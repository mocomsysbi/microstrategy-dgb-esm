var xmjd=mstrmojo&&mstrmojo.descriptors;var mstrmojo={descriptors:xmjd||{},meta:{TP:"t",STP:"st"},emptyFn:function(){},tstid:function(B){var A;if(B){if(typeof (B)==="object"){A=B.tstid;}else{A=B;}}return A?'tstid="'+A+'"':"";},getMissingFn:function getMissingFn(){return function(){var C=this.scriptClass,A;try{for(A in this){if(this[A]===arguments.callee){C+="."+A;break;}}}catch(B){}throw new Error("Missing abstract method: "+C);};},now:function now(){return new Date().getTime();},usesFrames:false};(function(){mstrmojo.global=(function(){var F=function(){return this;};return F.call(null);}());mstrmojo.dbg=mstrmojo.emptyFn;mstrmojo.dbg_stack=mstrmojo.emptyFn;mstrmojo.dbg_xhr=mstrmojo.emptyFn;mstrmojo.dbg_profile=mstrmojo.emptyFn;mstrmojo.debugBundles=(function(){return(window.mstrConfig&&(mstrConfig.debugFlags!==undefined)&&((mstrConfig.debugFlags&4)>0));})();mstrmojo.platform={};mstrmojo.prompt={};mstrmojo.settings={};mstrmojo.models={datasets:{},template:{}};mstrmojo.ui={editors:{controls:{}},menus:{},pathbar:{}};mstrmojo.prefs={};mstrmojo.ACL={};mstrmojo.CMS={};mstrmojo.storage={};mstrmojo.maps={};mstrmojo.maps.androidmap={};mstrmojo.maps.jsmap={};mstrmojo.graph={};mstrmojo.IPA={};mstrmojo.IPA.Monitors={};mstrmojo.IPA.Alerts={};mstrmojo.IPA.Environment={};mstrmojo.IPA.Groups={};mstrmojo.IPA.Heartbeat={};mstrmojo.IPA.Managers={};mstrmojo.sm={};mstrmojo.sort={};mstrmojo.ME={};mstrmojo.architect={ui:{editors:{},panels:{},factories:{}},obj:{},menu:{},projectmanagement:{}};mstrmojo.warehouse={ui:{editors:{}},obj:{},dbroles:{},menu:{}};mstrmojo.plugins={};mstrmojo.gmaps={};mstrmojo.DI={controller:{},model:{},ui:{dialogs:{}}};mstrmojo.Refine={};mstrmojo.qb={bigquery:{},es:{},mdx:{},menu:{},thirdParty:{}};mstrmojo.WH={};mstrmojo.fe={};mstrmojo.txEditor={};mstrmojo.condTx={};mstrmojo.threshold={};mstrmojo.express={ui:{}};mstrmojo.rw={model:{},xtab:{}};mstrmojo.util={ui:{}};mstrmojo.android={controllers:{},factories:{},inputControls:{},large:{controllers:{},factories:{},ui:{}},medium:{controllers:{},factories:{},ui:{nativebar:{}}},selectors:{},ui:{},nativedialog:{}};mstrmojo.vi={controllers:{},factories:{},models:{editors:{}},enums:{},ui:{menus:{},editors:{},rw:{selectors:{},xtab:{}},tabs:{},toolbars:{},tutorial:{}},viz:{},util:{}};mstrmojo.onetier={controllers:{},vi:{acl:{},prefs:{model:{}},ui:{tutorial:{}}}};mstrmojo.config={vi:{},onetier:{}};mstrmojo.chart={common:{},enums:{},model:{enums:{}}};mstrmojo.nativeandroid={};mstrmojo.gm={};mstrmojo.heatmap={vi:{}};mstrmojo.netviz={};mstrmojo.imagelayout={};mstrmojo.iphone={};mstrmojo.winphone={};mstrmojo.mstr={search:{}};mstrmojo.mstr.ui={};mstrmojo.gmaps={};mstrmojo.esrimap={};mstrmojo.examples={};mstrmojo.home={controllers:{},models:{},views:{},ui:{}};mstrmojo.err=function D(H){var G=H.name+': "'+H.message+'"';if(mstrmojo.debug){if(H.fileName){G+=" at\n    "+H.fileName;}if(H.hasOwnProperty("lineNumber")){G+=": "+H.lineNumber;}else{if(H.hasOwnProperty("line")&&H.sourceURL){var F=H.sourceURL.split("/");G+="("+F[F.length>1?F.length-1:0]+":"+H.line+")";}}}this.dbg(G);if(mstrmojo.Dialog){mstrmojo.error({longDesc:H.message},null,{title:H.name});}else{window.alert(G);}};mstrmojo.confirm=function B(F){return window.confirm(F);};mstrmojo.alert=function E(F){window.alert(F);};var C=!!(/return true/.test(String(function(){return true;})));mstrmojo.mixin=function A(J,H){if(J){H=H||{};var I=/this\.\_super/;var G=function(N,M){return function L(){var P=this._super;this._super=M;var O=N.apply(this,arguments||[]);this._super=P;return O;};};var F=J.__onmixin__;if(F){delete J.__onmixin__;}var K;for(K in J){if((typeof J[K]==="function")&&(!C||I.test(J[K]))){H[K]=G(J[K],H[K]);}else{H[K]=J[K];}}if(F){J.__onmixin__=F;}}return H;};}());(function(){var $XHR;var $MISSING={};var getApp=function(){return mstrmojo.global.mstrApp||{};},getJsRoot=function(){return getApp().jsRoot||"../javascript/";},getJsBundlesRoot=function(){return getJsRoot()+"bundles/";},getJsMojoRoot=function(){return getApp().jsMojoRoot||"../javascript/mojo/js/source/";},isIE=!!document.all;function getXHR(){$XHR=self.XMLHttpRequest?new XMLHttpRequest():(self.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){if(params.hasOwnProperty(p)){url[++x]=p+"="+encodeURIComponent(params[p]);}}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function syncXHR(method,baseUrl,params){var result=null;method=method.toUpperCase();if(!$XHR){getXHR();}if($XHR){try{var m=null,app=window.mstrApp;if(window.microstrategy!==undefined&&microstrategy){m=microstrategy;}params.taskContentType=params.taskContentType||"json";params.taskEnv="xhr";params.xts=mstrmojo.now();params=mstrmojo.addCSRFTokenToTaskParams(params);var ptp=(app&&app.persistTaskParams)||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}$XHR.open(method,appendUrlParams(method,baseUrl,params),false);if(method!=="POST"){params=null;}else{params=encodeParams(params);$XHR.setRequestHeader("Content-type","application/x-www-form-urlencoded");}$XHR.send(params);result=$XHR.responseText||null;}catch(localerr){if(window.console){window.console.log(localerr);}}}return result;}function _jsGet(file,nullCheck){var js=mstrmojo.loadFileSync(file);if(js){try{eval(js);return nullCheck?!!eval(nullCheck):true;}catch(localerr){window.alert("JavaScript compile error:\n\nFile: "+file+"\n\nError: "+localerr.message);}}return false;}mstrmojo.requiresBundle=function reqBundle(bundleName){return _jsGet(getJsBundlesRoot()+bundleName);};mstrmojo.loadFileSync=function loadFileSync(file){var result=null;if(!$XHR){getXHR();}if($XHR){try{$XHR.open("GET",file+((window.mstrConfig&&mstrConfig.webVersion)?"?v="+mstrConfig.webVersion:""),false);$XHR.send(null);result=$XHR.responseText||null;}catch(localerr){}if(!isIE&&$XHR.abort){$XHR.abort();}}return result;};mstrmojo.insertCSSLinks=function insertCSSLinks(files){var css,firsthead;if(files&&files.length>0){firsthead=document.getElementsByTagName("head")[0];files.forEach(function(file){css=document.createElement("link");css.setAttribute("id",file.replace(/[^a-zA-Z0-9]/g,""));css.setAttribute("rel","stylesheet");css.setAttribute("type","text/css");css.setAttribute("href",file);firsthead.appendChild(css);});}};mstrmojo.loader={loaded:{mstrmojo:true,"mstrmojo.loader":true},isLoaded:function isLd(fqcn){var o;try{o=eval(fqcn);}catch(localerr){}if(o){this.loaded[fqcn]=true;}return !!o;},load:function ld(fqcn){if($MISSING[fqcn]){return false;}if(this.loaded[fqcn]||this.isLoaded(fqcn)){return true;}if(_jsGet(this.fqcnToFile(fqcn),fqcn)){this.loaded[fqcn]=true;return true;}$MISSING[fqcn]=true;return false;},fqcnToFile:function fqcnToFile(fqcn){if(fqcn.match(/^mstrmojo\.plugins\./)){var pluginName=fqcn.substring(17,fqcn.indexOf(".",17));fqcn="../"+pluginName+"/javascript/"+getJsMojoRoot()+fqcn.replace("mstrmojo.plugins."+pluginName+".","").replace(/\./gm,"/");}else{if(fqcn.match(/^mstrmojo\./)){fqcn=getJsMojoRoot()+fqcn.replace("mstrmojo.","").replace(/\./gm,"/");}else{fqcn=getJsRoot()+fqcn.replace(/\./gm,"/");}}return fqcn+".js";}};var $LOADER=mstrmojo.loader,isLoaded=$LOADER.loaded;var reqCache={},addPackagesToReqCache=function addPkg(n,ns){var ps=n.split("."),klen=ps.length,k;for(k=1;k<klen;k++){var s=ps.slice(0,k).join(".");if(!reqCache[s]){ns.push(s);reqCache[s]=true;}}},loadInputScripts=function loadInputScripts(ns){var jlen=ns.length,j;for(j=0;j<jlen;j++){if(!$LOADER.load(ns[j])){window.alert("Warning: Javascript class not found:\n"+ns[j]);break;}}};mstrmojo.requiresCls=function reqCls(){var argLen=arguments.length,ns=[],i,len;for(i=0,len=argLen;i<len;i++){var n=arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){addPackagesToReqCache(n,ns);}ns.push(n);reqCache[n]=true;}loadInputScripts(ns);return true;};mstrmojo.requiresClsP=function reqClsP(){var argLen=arguments.length,ns=[],pkgName=arguments[0],i,len;addPackagesToReqCache(pkgName,ns);for(i=1,len=argLen;i<len;i++){var n=pkgName+"."+arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){ns.push(n);reqCache[n]=true;}}loadInputScripts(ns);return true;};var $DESCRIPTORS=mstrmojo.descriptors,descPrefix="mstrWeb.";function populateDescriptors(ds){if(ds){var dlen=ds.length,di;for(di=0;di<dlen;di++){var d=ds[di];$DESCRIPTORS[d.key]=d.v;}}}mstrmojo.populateDescriptors=populateDescriptors;if(window.mstrConfig!==undefined){populateDescriptors(mstrConfig.mstrDescs&&mstrConfig.mstrDescs.descriptors);mstrConfig.mstrDescs=null;}if(window.mstrApp!==undefined){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}var requestDescriptor=function(prefix,ids){var ns=[],len=ids.length,i;for(i=0;i<len;i++){var k=ids[i];if(k&&!($DESCRIPTORS.hasOwnProperty(prefix+k))){ns.push(k);}}if(ns.length>0){var response=syncXHR("POST",(window.mstrConfig&&mstrConfig.taskURL)||"taskProc",{taskId:"getDescriptors",keys:ns.join(","),prefix:prefix});if(response){var r=eval("("+response+")");populateDescriptors(r&&r.descriptors);}}};mstrmojo.requiresDescsWPrefix=function reqDescP(prefix){var args=[].slice.call(arguments);args[0]=null;requestDescriptor(prefix,args);};mstrmojo.requiresDescs=function reqDesc(){if(window.mstrConfig!==undefined&&!mstrConfig.onMobileDevice){requestDescriptor(descPrefix,arguments);}};mstrmojo.desc=function desc(descID,defText){if(descID!==null&&descID!==undefined){mstrmojo.requiresDescs(descID);if($DESCRIPTORS.hasOwnProperty(descPrefix+descID)){return $DESCRIPTORS[descPrefix+descID];}defText=defText||"No string descriptor found for descID="+descID;}var decDefText="["+defText+"]";$DESCRIPTORS[descPrefix+descID]=decDefText;return decDefText;};mstrmojo.descP=function descP(prefix,descID,defText){mstrmojo.requiresDescsWPrefix(prefix,descID);if($DESCRIPTORS.hasOwnProperty(prefix+descID)){return $DESCRIPTORS[prefix+descID];}defText=defText||"No string descriptor found for descID="+descID;var decDefText="*"+defText+"*";$DESCRIPTORS[prefix+descID]=decDefText;return decDefText;};mstrmojo.provide=function prv(fqcn,cls){isLoaded[fqcn]=!!cls;return cls;};mstrmojo.invalidateCls=function rel(fqcn){reqCache[fqcn]=false;isLoaded[fqcn]=false;eval(fqcn+" = null");};var mx=mstrmojo.mixin;mstrmojo.declare=function declare(SuperCls,mixins,config){function Constr(props){if((!props||!props.dontInit)&&this.init){this.init(props);}}if(SuperCls){Constr.prototype=new SuperCls({dontInit:true});Constr.prototype.constructor=Constr;}var proto=Constr.prototype;var cnt=(mixins&&mixins.length)||0,i;for(i=0;i<cnt;i++){mx(mixins[i],proto);}if(config){mx(config,proto);if(config.scriptClass){isLoaded[config.scriptClass]=true;}}return Constr;};mstrmojo.findAncestor=function findAncestor(src,property,value,limitClass){var ancestor=src&&src.parent;while(ancestor&&(!limitClass||!(ancestor instanceof limitClass))){var targetProperty=ancestor[property];if(targetProperty!==undefined){if(value!==undefined&&value!==null){if(targetProperty===value){return ancestor;}}else{return ancestor;}}ancestor=ancestor.parent;}return null;};mstrmojo.isDescendant=function isDescendant(parent,child){var ancestor;if(!child||!parent){return false;}ancestor=child.parent;while(ancestor){if(ancestor===parent){return true;}ancestor=ancestor.parent;}return false;};mstrmojo.getCSRFToken=function getCSRFToken(url){var tkn=null;try{if(url){if(url.indexOf("validateRandNum=")>=0){return tkn;}if(this.isUrlExternal(url)){return tkn;}}if(window.mstrApp&&mstrApp.validateRandNum){tkn=mstrApp.validateRandNum;}else{if(window.mstrConfig&&mstrConfig.validateRandNum){tkn=mstrConfig.validateRandNum;}else{if(window.microstrategy!==undefined&&microstrategy&&microstrategy.validateRandNum){tkn=microstrategy.validateRandNum;}}}}catch(err){}return tkn;};mstrmojo.addCSRFTokenToURL=function addCSRFTknToURL(url){if(!url){return"";}var tkn=mstrmojo.getCSRFToken(url);if(tkn&&tkn.length>0){if(url.indexOf("?")>-1){url+="&";}else{url+="?";}url+="validateRandNum="+tkn;}return url;};mstrmojo.addCSRFTokenToTaskParams=function addCSRFTknToTaskParams(params){if(params){var tkn=mstrmojo.getCSRFToken();if(tkn&&tkn.length>0){params.validateRandNum=tkn;}}return params;};mstrmojo.getInstance=function getInstance(config){var Clazz=mstrmojo.hash.walk(config.scriptClass,window);if(Clazz){return new Clazz(config);}return null;};mstrmojo.isUrlExternal=function isUrlExternal(url){var curURL=window.location.href;var servletName=window.mstrApp&&mstrApp.name,taskProcName=window.mstrConfig.taskURL&&mstrConfig.taskURL,isSameWebApp=(url.indexOf("?")===0||url.indexOf(servletName)===0||url.indexOf("./"+servletName)===0||url.indexOf(taskProcName)===0||url.indexOf("./"+taskProcName)===0||url.indexOf(curURL)===0||((curURL.indexOf("?")>0)&&(url.indexOf(curURL.substring(0,curURL.indexOf("?")))===0)));return !isSameWebApp;};mstrmojo.resolveFeature=function resolveFeature(feature){var features=mstrApp.features;return features&&features[feature];};mstrmojo.getStyleRoot=function getStyleRoot(){var c=mstrConfig||{},styleRoot=c.styleRoot||"../style";return styleRoot;};}());
/* -- 
    Mojo JavaScript Library
    Copyright (C) 1996-2011 MicroStrategy Incorporated, All rights reserved. Confidential. 
-- */
(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum=this.mMaximum+M;this.mMinimum=this.mMinimum-M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());(function(){var A=/^mstrmojo./;mstrmojo.DynamicClassFactory={newComponent:function(C,B,F){var H=C.prototype.scriptClass.replace(A,"");for(var E=0,D=B&&B.length||0;E<D;E++){if(!B[E]._mixinName){throw new Error('Mixins must have a "_mixinName" property to be used with DynamicClassFactory');}H+="_"+B[E]._mixinName.replace(A,"");}var G=mstrmojo[H];if(!G){G=mstrmojo.declare(C,B,F);mstrmojo[H]=G;}return G;}};}());(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep).format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};(function(){mstrmojo.ui.editors._HostsControls=mstrmojo.provide("mstrmojo.ui.editors._HostsControls",{_mixinName:"mstrmojo.ui.editors._HostsControls",setFormatSource:function C(E){this.throwAbstractMethodError("setFormatSource");},syncControls:function A(E){var F=this._sync;this._sync=true;E.call(this);this._sync=F;},raiseFormatValueChange:function D(F,G,E){if(this._sync){return false;}this.onGroupValueChange(F,G,E);return true;},onGroupValueChange:function B(F,G,E){}});}());mstrmojo.vi.viz.EnumDSSDropZones={Reserved:0,Rows:1,Columns:2,XAxis:3,YAxis:4,BreakBy:5,SliceBy:6,ColorBy:7,SizeBy:8,AdditionalMetrics:9,Angle:10,Grouping:11,GeoAttribute:12,Layout:13,FromItem:14,ToItem:15,ItemSize:16,Latitude:17,Longitude:18};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};(function(){mstrmojo.StringBuffer=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.StringBuffer",append:function A(C){if(!this.buf){this.reset();}this.buf[++this.len]=C;return this;},reset:function B(){this.buf=[];this.len=-1;}});mstrmojo.StringBuffer.prototype.toString=function(D){var C=this.buf;return(C&&C.join(D||""))||"";};}());mstrmojo.chart.model.enums.EnumDSSBaseFormType={DssBaseFormReserved:0,DssBaseFormDateTime:1,DssBaseFormNumber:2,DssBaseFormText:3,DssBaseFormPicture:4,DssBaseFormUrl:5,DssBaseFormEmail:6,DssBaseFormHTMLTag:7,DssBaseFormDate:8,DssBaseFormTime:9,DssBaseFormSymbol:10,DssBaseFormBigDecimal:11};(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75};(function(){mstrmojo.models.template.MetricValue=mstrmojo.declare(null,null,{init:function G(H){this.data=H.data;this.value=H.value;},getValue:function B(){return this.value.v;},getThresholdType:function D(){return this.value.ty;},getRawValue:function A(){return this.value.rv;},getCSS:function C(){return this.data.css[this.value.cni].n;},getThresholdValue:function F(H){if(this.value.ti===undefined){return H;}return this.data.th[this.value.ti].n;},getFillColor:function E(H){if(this.value.ci===undefined){return H;}return this.data.fc[this.value.ci].n;}});}());mstrmojo.mstr.EnumNodeDimty={NodeDimtyReserved:0,NodeDimtyNone:1,NodeDimtyContinuation:2,NodeDimtyExclusiveContinuation:3,NodeDimtyOutputLevel:4,NodeDimtyBreakBy:5,NodeDimtyEmbedded:6,NodeDimtyUnspecified:7};(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(G,E){var C=!!G&&(typeof G==="string")&&!G.match(/\./)&&!!this[G],D=mstrmojo.registry.ref(C?this[G]:G);if(D&&D.open){if(C){this[G]=D;}if(D.disposable!==false){this.addDisposable(D);}var J=D.slot&&this[D.slot];if(J){if(D.parent!==this){if(this.addChildren){this.addChildren([D]);}else{var I=false,F=D.domNode||D.placeholder;if(F&&typeof F==="string"){F=document.getElementById(F);}if(!F){I=true;F=document.createElement("span");D.placeholder=F;}if(I||(F.parentNode!==J)){J.appendChild(F);}}}}try{D.open(this,E);}catch(H){console.log("Error opening popup: "+H);}this._lastOpened=D;}},closePopup:function B(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}});}());mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7};(function(){mstrmojo.models.template.Title=mstrmojo.declare(null,null,{init:function G(J){this.title=J.title;},getActionType:function(){return this.title.at;},getDrillPath:function(){return this.title.dp;},getHeaderValues:function B(){return this.title.es;},getHeaderName:function F(J){return this.title.es[J].n;},getHeaderId:function F(J){return this.title.es[J].id;},getForms:function E(){return this.title.fs;},getFormId:function D(){return this.title.fid;},getFormType:function I(){return this.title.ftp;},getUnitId:function H(){return this.title.id;},getLinkMap:function C(){return this.title.lm;},getName:function A(){return this.title.n;},getUnitDssType:function(){return this.title.otp;},getSelectorControl:function(){return this.title.sc;}});}());mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle"};mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap={DssXmlAxisNone:0,DssXmlAxisRowsBit:1,DssXmlAxisColumnsBit:2,DssXmlAxisPagesBit:4,DssXmlAxisChaptersBit:8};mstrmojo.mstr.EnumDSSXMLBaseFormType={DssXmlBaseFormReserved:0,DssXmlBaseFormHidden:-1,DssXmlBaseFormDateTime:1,DssXmlBaseFormNumber:2,DssXmlBaseFormText:3,DssXmlBaseFormPicture:4,DssXmlBaseFormUrl:5,DssXmlBaseFormEmail:6,DssXmlBaseFormHTMLTag:7,DssXmlBaseFormDate:8,DssXmlBaseFormTime:9,DssXmlBaseFormSymbol:10,DssXmlBaseFormBigDecimal:11,DssXmlBaseFormPhoneNumber:12};mstrmojo.mstr.EnumDSSXMLBaseFormType.convertDataType2BaseFormType=function(B){var A={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2};return A[B]||0;};mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5};(function(){mstrmojo.requiresDescs(5774,2266,2287,2496,2495,2493,2267,2498,2500,2279,2491,2476,2271,2478,2268,2492,2273,2280,2490,2488,2494,2487,2269,2477,2499,2292,2489,2281,2484,2483,2480,2497,2274,2485,2486,2282,2481,2479,2482,2290,2293);var A=[{n:mstrmojo.desc(5774,"No Fill"),id:"transparent"},{n:mstrmojo.desc(2266,"Black"),id:"#000000"},{n:mstrmojo.desc(2287,"Brown"),id:"#993300"},{n:mstrmojo.desc(2496,"Olive Green"),id:"#333300"},{n:mstrmojo.desc(2495,"Dark Green"),id:"#003300"},{n:mstrmojo.desc(2493,"Dark Teal"),id:"#003366"},{n:mstrmojo.desc(2267,"Dark Blue"),id:"#000080"},{n:mstrmojo.desc(2498,"Indigo"),id:"#333399"},{n:mstrmojo.desc(2500,"Grey-80%"),id:"#333333"},{n:mstrmojo.desc(2279,"Dark Red"),id:"#800000"},{n:mstrmojo.desc(2491,"Orange"),id:"#ff6600"},{n:mstrmojo.desc(2476,"Dark Yellow"),id:"#808000"},{n:mstrmojo.desc(2271,"Green"),id:"#008000"},{n:mstrmojo.desc(2478,"Teal"),id:"#008080"},{n:mstrmojo.desc(2268,"Blue"),id:"#0000ff"},{n:mstrmojo.desc(2492,"Blue-Grey"),id:"#666699"},{n:mstrmojo.desc(2273,"Grey-50%"),id:"#808080"},{n:mstrmojo.desc(2280,"Red"),id:"#ff0000"},{n:mstrmojo.desc(2490,"Light Orange"),id:"#ff9900"},{n:mstrmojo.desc(2488,"Lime"),id:"#99cc00"},{n:mstrmojo.desc(2494,"Sea Green"),id:"#339966"},{n:mstrmojo.desc(2487,"Aqua"),id:"#33cccc"},{n:mstrmojo.desc(2269,"Light Blue"),id:"#3366ff"},{n:mstrmojo.desc(2477,"Violet"),id:"#800080"},{n:mstrmojo.desc(2499,"Grey-40%"),id:"#969696"},{n:mstrmojo.desc(2292,"Pink"),id:"#ff00ff"},{n:mstrmojo.desc(2489,"Gold"),id:"#ffcc00"},{n:mstrmojo.desc(2281,"Yellow"),id:"#ffff00"},{n:mstrmojo.desc(2484,"Bright Green"),id:"#00ff00"},{n:mstrmojo.desc(2483,"Turquoise"),id:"#00ffff"},{n:mstrmojo.desc(2480,"Sky Blue"),id:"#00ccff"},{n:mstrmojo.desc(2497,"Plum"),id:"#993366"},{n:mstrmojo.desc(2274,"Grey-25%"),id:"#c0c0c0"},{n:mstrmojo.desc(2485,"Rose"),id:"#ff99cc"},{n:mstrmojo.desc(2486,"Tan"),id:"#ffcc99"},{n:mstrmojo.desc(2282,"Light Yellow"),id:"#ffff99"},{n:mstrmojo.desc(2481,"Light Green"),id:"#ccffcc"},{n:mstrmojo.desc(2479,"Light Turquoise"),id:"#ccffff"},{n:mstrmojo.desc(2482,"Pale Blue"),id:"#99ccff"},{n:mstrmojo.desc(2290,"Lavender"),id:"#cc99ff"},{n:mstrmojo.desc(2293,"White"),id:"#ffffff"}];var E=[];mstrmojo.util.ui.ColorPicker={getBasicColors:function B(){return A.slice();},getCustomColors:function D(){return E.slice();},addCustomColor:function C(G){var F=function(H){return H.id===G;};if(!A.filter(F)[0]&&!E.filter(F)[0]){E.push({n:G,id:G});if(E.length>8){E.shift();}}}};}());(function(){mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function D(E){if(!E||!E.length){return mstrmojo.emptyFn;}return function(){var F=E.length,G;for(G=0;G<F;G++){E[G].apply(this,arguments);}};},wrapMethods:function C(J,H){function I(L,K){K=K||{};mstrmojo.hash.forEach(L,function(M,N){K[N]=(K.hasOwnProperty(N)&&typeof M==="function")?mstrmojo.func.composite([M,K[N]]):M;});return K;}if(arguments.length<3){return I(J,H);}var F=arguments.length,G=[].slice.call(arguments,0,F-1).reverse(),E=arguments[F-1];mstrmojo.array.forEach(G,function(K){E=I(K,E);});return E;},override:function A(G,E){var F=function(J,I){return function H(){var L=this._super,K;this._super=I||mstrmojo.emptyFn;try{K=J.apply(this,arguments||[]);}finally{this._super=L;}return K;};};E=E||{};mstrmojo.hash.forEach(G,function(H,I){E[I]=F(H,E[I]);});return E;},throttle:function(G,I,E){var F,K,N,L=null,J=0,M=E||{};var H=function(){J=M.leading===false?0:mstrmojo.date.now();L=null;N=G.apply(F,K);F=K=null;};return function(){var O=mstrmojo.date.now();if(!J&&M.leading===false){J=O;}var P=I-(O-J);F=this;K=arguments;if(P<=0){clearTimeout(L);L=null;J=O;N=G.apply(F,K);F=K=null;}else{if(!L&&M.trailing!==false){L=setTimeout(H,P);}}return N;};},debounce:function(H,J,G){var M,L,F,K,N,E=mstrmojo.date.now;var I=function(){var O=E()-K;if(O<J){M=setTimeout(I,J-O);}else{M=null;if(!G){N=H.apply(F,L);F=L=null;}}};return function(){F=this;L=arguments;K=E();var O=G&&!M;if(!M){M=setTimeout(I,J);}if(O){N=H.apply(F,L);F=L=null;}return N;};},addMethods:function B(F,E){E=E||{};mstrmojo.hash.forEach(F,function(G,H){if(!E.hasOwnProperty(H)&&typeof G==="function"){E[H]=G;}});return E;}});}());mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionTuple:1000};(function(){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",G=String.fromCharCode;function D(H){H=H.replace(/\r\n/g,"\n");var I="";for(var K=0;K<H.length;K++){var J=H.charCodeAt(K);if(J<128){I+=G(J);}else{if((J>127)&&(J<2048)){I+=G((J>>6)|192);I+=G((J&63)|128);}else{I+=G((J>>12)|224);I+=G(((J>>6)&63)|128);I+=G((J&63)|128);}}}return I;}function F(L){var H="",J=0,M=0,K=0,I=0;while(J<L.length){M=L.charCodeAt(J);if(M<128){H+=G(M);J++;}else{if((M>191)&&(M<224)){K=L.charCodeAt(J+1);H+=G(((M&31)<<6)|(K&63));J+=2;}else{K=L.charCodeAt(J+1);I=L.charCodeAt(J+2);H+=G(((M&15)<<12)|((K&63)<<6)|(I&63));J+=3;}}}return H;}mstrmojo.base64=mstrmojo.provide("mstrmojo.base64",{decodeHttpHeader:function E(K){var I=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(K&&K.indexOf("=?UTF-8?B?")===0){var J="",H;while((H=I.exec(K))!==null){J+=mstrmojo.base64.decode(H[1]);}return J;}return K;},encode:function B(J){var H="";var Q,O,M,P,N,L,K;var I=0;J=D(J);while(I<J.length){Q=J.charCodeAt(I++);O=J.charCodeAt(I++);M=J.charCodeAt(I++);P=Q>>2;N=((Q&3)<<4)|(O>>4);L=((O&15)<<2)|(M>>6);K=M&63;if(isNaN(O)){L=K=64;}else{if(isNaN(M)){K=64;}}H+=A.charAt(P)+A.charAt(N)+A.charAt(L)+A.charAt(K);}return H;},decode:function C(J){var H="",I=0;var Q,O,M,P,N,L,K;J=J.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(I<J.length){P=A.indexOf(J.charAt(I++));N=A.indexOf(J.charAt(I++));L=A.indexOf(J.charAt(I++));K=A.indexOf(J.charAt(I++));Q=(P<<2)|(N>>4);O=((N&15)<<4)|(L>>2);M=((L&3)<<6)|K;H+=G(Q);if(L!==64){H+=G(O);}if(K!==64){H+=G(M);}}H=F(H);return H;}});})();(function(){function D(K){var J=this.h.idx;if(J!==-1){return this.t.es[J][K];}return"";}mstrmojo.models.template.Header=mstrmojo.declare(null,null,{init:function H(J){this.h=J.h;this.t=J.t;},getName:function A(){return D.call(this,"n");},getElementId:function I(){return D.call(this,"id");},getObjectId:function B(){return D.call(this,"oid");},getElementIndex:function G(){return this.h.idx;},getActionType:function F(){return this.h.at;},isTotal:function E(){return this.h.otr===1;},getFormIndex:function C(){return this.h.fi;}});}());mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(B){if(!B){return false;}if(typeof this[B]==="function"){return true;}var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof A==="string"){this.requiresCls(A);return typeof this[B]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof A==="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresExternalScripts(F,G,C){if(F&&F instanceof Array){if(F.length===0){if(G){G.call(C);}return false;}if(F[0]&&F[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[F[0].url]){F.splice(0,1);return this.requiresExternalScripts(F,G,C);}var A=document.createElement("script"),D=!!document.all,B=F[0].url;if(B.substr(0,7)==="file://"){B=B.substr(7);}else{if(mstrApp.isSingleTier&&B.substr(0,4)!=="http"){B="http:"+B;}}A.type="text/javascript";A.src=B;if(!F[0].callbackParamName){if(D){A.onreadystatechange=function(){if(A.readyState==="loaded"||A.readyState==="complete"){A.onreadystatechange=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}}};}else{A.onload=function(){A.onload=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}};}}else{if(F[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var E=this;window.setTimeout(function(){E.requiresExternalScripts(F,G,C);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+F[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=F;mstrmojo._LoadsScript.callback=G;mstrmojo._LoadsScript.esScritsContext=C;}}document.getElementsByTagName("head")[0].appendChild(A);}}});(function(){function A(C){return C.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");}mstrmojo._ImageHelper=mstrmojo.provide("mstrmojo._ImageHelper",{getImage:function B(D){var E=mstrApp,C=E.getConfiguration();if(D){if(D.indexOf("\\")>=0){D=D.replace(/\\/g,"/");}D=A(D);if(D===decodeURI(D)){D=encodeURI(D);}}if(C&&D&&D.indexOf("://")===-1){D=C.getHostUrlByProject(E.getCurrentProjectId())+D;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(D)):D;}});}());mstrmojo.EnumReadystate={IDLE:1,WAITING:3,ERROR:4,SUCCESS:5,CANCELLED:6,TIMEOUT:7};(function(){function X(a){var b=[].slice.call(a),c=b[b.length-1],d=function(f,e){return f===e;};if(/function|string/.test(typeof c)){d=typeof c==="function"?c:function(f,e){return f[c]===e[c];};b=b.slice(0,b.length-1);}return{sets:b,compareFunc:d};}mstrmojo.array=mstrmojo.provide("mstrmojo.array",{indexOf:function D(b,d){var a=(b&&b.length)||0,c;for(c=0;c<a;c++){if(b[c]==d){return c;}}return -1;},indexOfMulti:function T(a,b){var f=[],e={},d=0,c=this;c.forEach(a,function(h,g){c.forEach(b,function(i,j){var k=(i===h);if(k){f[j]=e[j]=g;d++;}return !k;});});return{indices:f.length?f:null,map:e,count:d};},forEach:function R(b,g,d){var a=(b&&b.length)||0,c;for(c=0;c<a;c++){var e=c===(a-1);if(d){if(g.call(d,b[c],c,b,e)===false){break;}}else{if(g(b[c],c,b,e)===false){break;}}}return b;},map:function Y(b,e){var a=(b&&b.length)||0,c=[],d;for(d=0;d<a;d++){c[d]=e(b[d],d);}return c;},filter:function I(c,d,e){var h=[],g=0,b=(c&&c.length)||0,a=(e&&e.max)||0,f;for(f=0;f<b;f++){if(d(c[f],f,c)){h[g]=c[f];g++;if(a&&g>=a){break;}}}return h;},filterOne:function L(a,b){var c=this.filter(a,b,{max:1});if(c.length){return c[0];}return null;},ensureArray:function P(a){return[].concat(a||[]);},find:function M(b,f,c){var a=(b&&b.length)||0,d;for(d=0;d<a;d++){var e=b[d];if(e&&e[f]==c){return d;}}return -1;},distinct:function B(b,f){if(b.reduce&&!f){return b.reduce(function(h,g){if(h.indexOf(g)<0){h.push(g);}return h;},[]);}var a=(b&&b.length)||0,c,e,d=[];for(c=0;c<a;c++){e=b[c];if((e!==undefined)&&((f&&this.find(d,f,e[f])<0)||(!f&&this.indexOf(d,e)<0))){d.push(e);}}return d;},findBin:function E(c,g,i,b){var f=(b||c.length)-1,d=0,a,e=g[i];while(f-d>1){if(c[a=f+d>>1][i]<e){d=a;}else{f=a;}}if(c[d][i]===e){return d;}return c[f][i]===e?f:-1;},search:function H(i,d,f){var e=i.length,c=-1,b,g=d.toUpperCase(),a=d.length;while(e-c>1){if(i[b=e+c>>1][f].substr(0,a).toUpperCase()<g){c=b;}else{e=b;}}return e;},findMulti:function Q(h,d,m){if(!m){return{indices:null,map:{},count:0};}var l=m.length,q=[],b={},o=0,f=(h&&h.length)||0,g;for(g=0;g<f;g++){var p=h[g][d],e;for(e=0;e<l;e++){if(m[e][d]===p){q[e]=g;b[e]=g;o++;break;}}}return{indices:q,map:b,count:o};},removeItem:function W(a,c){var b=this.indexOf(a,c);if(b>-1){this.removeIndices(a,b,1);}return b;},removeItems:function N(a,f,b){var c=this.findMulti(a,f,b);if(c.count){var e=c.indices.concat().sort(this.numSorter).slice(0,c.count),d;for(d=e.length-1;d>-1;d--){a.splice(e[d],1);}}},numSorter:function Z(d,c){return Number(d)-Number(c);},stringSorter:function J(e,d){var c=e.toLowerCase(),f=d.toLowerCase();if(c<f){return -1;}if(c>f){return 1;}return 0;},removeIndices:function O(a,c,b){a.splice(c,b);},insert:function F(b,a,c){if(!b){b=[];}if(a===null||a===undefined){a=b.length;}Array.prototype.splice.apply(b,[a,0].concat(c));return b;},hash:function C(b,d){d=d||{};var a=(b&&b.length)||0,c;for(c=0;c<a;c++){d[b[c]]=true;}return d;},get:function U(b,e){if(!e){return null;}var c=[],a=e.length,d;for(d=0;d<a;d++){c[d]=b[e[d]];}return c;},deepSortArr:function G(b,d,a,c){return b.sort(function(g,e){var h=g[a][d],f=e[a][d];if(!c){return(h<=f);}return(h>f)?-1:1;});},isArray:function(a){var b=Array.isArray;if(b){return b(a);}return Object.prototype.toString.call(a)==="[object Array]";},some:function K(b,c){if(!b){return false;}if(b.some){return b.some(c);}var a=false;this.forEach(b,function(e,d){a=c(e,d,b);return !a;});return a;},difference:function V(){if(arguments.length<2){throw new Error("difference should get at least 2 parameters");}var d=X(arguments),b=d.sets,c=d.compareFunc,e=b[0],a=[].concat.apply([],b.slice(1));return e.filter(function(f){return !a.some(function(g){return c(f,g);});});},intersection:function S(){if(arguments.length<2){throw new Error("intersection should get at least 2 parameters");}var e=X(arguments),c=e.sets,d=e.compareFunc,a=c[0],b=c.slice(1);b.forEach(function(f){a=a.filter(function(g){return f.some(function(h){return d(g,h);});});});return a;},fnReduceNumber:function A(a,b){return a+b;}});}());mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,e){var Z=null,j,c=this.getRange(),b;if(X&&X===c.startContainer){var g=c.startContainer.firstChild,U=g&&g.firstChild,d=U&&U.firstChild;if(d){c.setStart(d,c.startOffset);c.setEnd(d,c.endOffset);}}if(window.getSelection){var W=function(l,n,m){var k=l.cloneRange();k.collapse(m);k.setStartBefore(n);return k.toString().length;},S=c.startContainer,f=c.startOffset;if(S.nodeType===1){f=W(c,S,true);}Z={collapsed:c.collapsed,startContainer:S,startOffset:e?e.startOffset:f};if(!c.collapsed){var V=c.endContainer,R=c.endOffset;if(V.nodeType===1){R=W(c,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=c;}else{var i,a,Y=function(n,o){var m=n.duplicate(),k=document.body.createTextRange(),l;m.collapse(o);l=m.parentElement();k.moveToElementText(l);k.setEndPoint("EndToStart",m);return{container:l,offset:k.text.length};},h=Y(c,true),T;Z={collapsed:(c.compareEndPoints("StartToEnd",c)===0),startContainer:h.container,startOffset:h.offset};if(!Z.collapsed){T=Y(c,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());mstrmojo.chart.model.enums.EnumDSSDynamicShortcut={DssDynamicShortcutReserved:0,DssDynamicShortcutAuto:1,DssDynamicShortcutAcrossThenDown:2,DssDynamicShortcutDownThenAcross:3,DssDynamicShortcutColumns:4,DssDynamicShortcutRows:5,DssDynamicShortcutCell:6,DssDynamicShortcutShape:7,DssDynamicShortcutLastOne:8,DssDynamicShortcutRangeEnd:255};(function(){mstrmojo._Fetchable=mstrmojo.provide("mstrmojo._Fetchable",{_mixinName:"mstrmojo._Fetchable",blockBegin:1,blockCount:-1,concat:false,items:null,size:function A(){var B=this.items;return(B&&B.length)||0;},next:function(B){if(this.hasNext()){this.getItems(this.blockBegin+this.blockCount,B);}},previous:function(B){if(this.hasPrevious()){var C=this.blockBegin-this.blockCount;C=C<0?0:C;this.getItems(C,B);}},getItems:function(G,E){E=E||{};var D=this,C=mstrmojo.emptyFn,B=E.success||C,F=E.failure||C,H=E.complete||C;this._retrieveItems(G,{success:function(I){D.blockBegin=G;D.set("items",(D.concat?(D.items||[]).concat(I.items||[]):(I.items||[])));if(I.totalSize){D.totalSize=I.totalSize;}B(I);},failure:function(I){F(I);},complete:function(I){H(I);}});},_retrieveItems:function(C,B){alert("Object which mixes in this mixin has not implemented this method - _retrieveItems().");},hasNext:function(){return(((this.concat?1:this.blockBegin)+((this.items&&this.items.length)||0))<(this.totalSize+1));},hasPrevious:function(){return this.blockBegin>1;}});}());mstrmojo.EnumRWUnitType={LAYOUT:0,HEADER:2,FOOTER:3,SUBSECTION:4,DETAILS:5,PAGEHEADER:6,PAGEFOOTER:7,PANELSTACK:8,PANEL:9,GRID:521,GRAPH:522,GRIDGRAPH:527,RECTANGLE:101,IMAGE:102,LINE:105,TEXTFIELD:106,HTMLCONTAINER:107,SELECTOR:111,ROUNDEDRECTANGLE:112,VISUALIZATION:114,MOJOVISUALIZATION:115};(function(){mstrmojo.hash=mstrmojo.provide("mstrmojo.hash",{copy:function B(S,R){if(S){R=R||{};var T;for(T in S){R[T]=S[T];}}return R;},copyProps:function C(T,V,R){R=R||{};if(V){var U=(T&&T.length)||0,S;for(S=0;S<U;S++){var W=T[S];if(V[W]!==undefined){R[W]=V[W];}}}return R;},forEach:function I(U,T,S){if(U){var R;for(R in U){if(S){if(T.call(S,U[R],R,U)===false){break;}}else{if(T(U[R],R,U)===false){break;}}}}return U;},walk:function P(V,S){if(!S){S=mstrmojo.global;}var U=V.split(".");if(U.length===1){return S[V];}var T=(U&&U.length)||0,R;for(R=0;R<T;R++){S=S[U[R]];if(!S){break;}}return S;},isEmpty:function F(S){if(!S){return true;}var R;for(R in S){if(S[R]!==null&&S[R]!==undefined){return false;}}return true;},clear:function G(S){if(S){var R;for(R in S){delete S[R];}}return S;},any:function J(U,V){var T;if(U){var S=this.keyarray(U);if(S.length>0){var R=S[0];T=V?R:U[R];}}return T;},clone:function M(V){if(!V){return null;}var X;if(V.constructor===Array){X=V.concat();var W=X[0];if(W&&typeof W==="object"){var R=X.length,U;for(U=0;U<R;U++){X[U]=this.clone(V[U]);}}}else{X={};var T;for(T in V){var S=V[T];if(S&&typeof S==="object"){X[T]=this.clone(S);}else{X[T]=S;}}}return X;},cloneArray:function E(S){var T=[],R=(S&&S.length)||0,U;for(U=0;U<R;U++){T[U]=this.clone(S[U]);}return T;},keyarray:function K(T,U){var R=[],S;if(T){if(Object.keys&&!U){R=Object.keys(T);}else{for(S in T){R.push(U?Number(S):S);}}}return R;},valarray:function L(T){var R=[];if(T){var S;for(S in T){R.push(T[S]);}}return R;},equals:function Q(Y,X){var S=mstrmojo.hash,W=(Y&&X)||(!Y&&!X&&(Y===X));if(W&&Y){W=(Y.constructor===X.constructor);if(W){if(Y.constructor===Array){var V=Y.length;W=(V===X.length);if(W&&V){var T;for(T=0;T<V;T++){W=W&&S.equals(Y[T],X[T]);}}}else{if(typeof Y==="object"){var Z=S.keyarray(Y),U=S.keyarray(X);W=Z.length===U.length;if(W){var R;for(R in Y){W=W&&(S.equals(Y[R],X[R]));}}}else{W=(Y===X);}}}}return W;},obj2array:function O(W){var X;for(X in W){var V=W[X];if(V&&typeof V==="object"){W[X]=this.obj2array(V);}}var S=W.isArray;if(S!==undefined&&S===true){var U=[],R=W.length,T;for(T=0;T<R;T++){U.push(W[T]);}return U;}return W;},min:function D(U,V,W){var R=null,T;if(U){for(T in U){var S=V?U[T]:T;if(W){S=Number(S);}if((R===null)||(S<R)){R=S;}}}return R;},max:function N(U,V,W){var R=null,T;if(U){for(T in U){var S=V?U[T]:T;if(W){S=Number(S);}if((R===null)||(S>R)){R=S;}}}return R;},make:function A(S,T,R){if(!S||!T){return null;}if(S.attachEventListener){return S;}if(T.makeObservable){S=T.makeObservable(S,R)||S;}else{this.copy(T.prototype,S);if(S.init){S=S.init(R)||S;}}return S;},mergeHashes:function H(R,S){R=this.clone(R)||{};if(S){mstrmojo.array.forEach(mstrmojo.array.distinct(this.keyarray(S).concat(this.keyarray(R))),function(T){var V=R[T],U=S[T];if(!V){R[T]=U;}else{if(V&&U){if(typeof V==="object"){if(V.constructor===Array){R[T]=V.concat(U);}else{R[T]=this.mergeHashes(V,U);}}else{R[T]=U;}}}},this);}return R;}});}());(function(){mstrmojo._IsGraphDataService=mstrmojo.provide("mstrmojo._IsGraphDataService",{handleUserSingleTap:function A(D,E,B,G,C,F){if(mstrApp.onMobileDevice()){mstrApp.serverRequest({taskId:"handleUserSingleTap",sliceID:D,nodekey:E,x:B,y:G,selectable:C},F);}}});}());mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){function AG(Am,An){return An||(Am||window).event;}mstrmojo.PositionType=null;var Aj=!!document.all,AE=document.documentMode,p=navigator.userAgent,i=false,g=false,e=false,d=false,R=false,s=false;if(Aj){if(window.mstrConfig&&mstrConfig.isEdgeModeEnabled){i=!!p.match(/MSIE 6/);g=((!!p.match(/MSIE 7/)&&!AE)||AE===7);e=(AE===8);d=(AE===9);R=(AE===10);s=(!AE||AE<=9);}else{i=!!p.match(/MSIE 6/);g=!!p.match(/MSIE 7/);e=!!p.match(/MSIE 8/);d=!!p.match(/MSIE 9/);R=!!p.match(/MSIE 10/);s=!R;}}var c=!Aj&&!!p.match(/Firefox/),k=0,q=!!p.match(/Android/),Aa=!!p.match(/iPad/),AK=!!p.match(/iPhone/),AS=!!document.createTouch||q,o=!!p.match(/PlayBook/),O=!!p.match(/Windows Phone/),Ak=!Aj&&!!p.match(/Trident.*rv/),b=c?"-moz-":(Aj||Ak)?"":"-webkit-",AF=c?"Moz":(R||Ak)?"":Aj?"ms":"webkit",AP=((R||Ak)?"t":"T"),AJ=AF+AP+"ransition";function Ae(){return AF+AP+"ransform";}function AC(){return AJ+"Property";}function S(){return AJ+"Duration";}function N(){return(R||c)?"transitionend":"webkitTransitionEnd";}function f(){return AF+"BoxShadow";}var Ah=Ae(),AX=AC(),x=S(),A=N(),m=f();function AO(){if(!k&&c){var Am=p.match(/.*Firefox\/([\d|\.]*).*/);if(Am){k=parseFloat(Am[1]);}}return k;}function AU(){var An=0,Ar=0,Ao=window,Ap=document,Am=Ap.body,Aq=Ap.documentElement;if(typeof Ao.pageYOffset==="number"){Ar=Ao.pageYOffset;An=Ao.pageXOffset;}else{if(Am&&(Am.scrollLeft||Am.scrollTop)){Ar=Am.scrollTop;An=Am.scrollLeft;}else{if(Aq&&(Aq.scrollLeft||Aq.scrollTop)){Ar=Aq.scrollTop;An=Aq.scrollLeft;}}}return{x:An,y:Ar};}function AD(Am){Am=Am||0;Am=String(Am);return((Am.indexOf("%",0))!==-1)?Am:(Am+"px");}function AM(Ao,As,Ar,Aq,Ap){if(!mstrmojo.dom.isWinPhone){Aq=(Aq||false||this.isHWAccelerated);}else{Aq=false;}var An=Ap+(Aq?"3d":"")+"(",Am=Aq?(","+Ar+")"):")";return An+Ao+","+As+Am;}var AY=2,V=3;function t(As,Ar,Av){var Au=As.style,Ao=Au.display,Aq=this.windowDim(),Ap=AU();Au.display="block";var At=Aq.w-As.clientWidth,Aw=Math.max(Aq.h-As.clientHeight,0),Am={4:0,5:At,3:At/2},An={1:0,3:Aw/2,2:Aw};Au.left=Am[Ar]+Ap.x+"px";Au.top=An[Av]+Ap.y+"px";Au.display=Ao;}function l(Ap,Ao,Aq,Am){if(Ap.addEventListener){return Ap.addEventListener(Ao,Aq,!!Am);}Aq._id=Aq._id||l.guid++;Ap.events=Ap.events||{};var An=Ap.events[Ao];if(!An){An=Ap.events[Ao]={};if(Ap["on"+Ao]){An[0]=Ap["on"+Ao];}}An[Aq._id]=Aq;function Ar(Au){Au=Au||window.event;var At=this.events[Au.type],As;for(As in At){At[As].call(this,Au);}}Ap["on"+Ao]=Ar;}l.guid=1;function h(Ao,An,Ap,Am){if(!Ao){return ;}if(Ao.removeEventListener){Ao.removeEventListener(An,Ap,!!Am);}else{if(Ao.events&&Ao.events[An]){delete Ao.events[An][Ap._id];}}}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:p,isIE:Aj,isIE6:i,isIE7:g,isIE8:e,isIE9:d,isIE10:R,isIEW3C:Ak,isNSIE:s,isDXIE:s,isFF:c,isWK:!!p.match(/AppleWebKit/),isSafari:!!p.match(/Safari/)&&!p.match(/Chrome/),isChrome:!!p.match(/AppleWebKit/)&&p.match(/Chrome/),isHWAccelerated:!q,isAndroid:q,isIPad:Aa,isPlayBook:o,isWinPhone:O,isMobile:Aa||AK||O||q,supportsTouches:AS,TOUCHSTART:AS?"touchstart":"mousedown",TOUCHMOVE:AS?"touchmove":"mousemove",TOUCHEND:AS?"touchend":"mouseup",TOUCHCANCEL:AS?"touchcancel":"",RESIZE:AS?"orientationchange":"resize",CSS3_PREFIX:b,CSS3_BOXSHADOW:m,CSS3_TRANSFORM:Ah,CSS3_TRANSITION:AJ,CSS3_TRANSITION_PROPERTY:AX,CSS3_TRANSITION_DURATION:x,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},htmlFeatures:{FILE_READER:"fr"},MOUSE_BUTTON:{LEFT:1,RIGHT:2},supports:function B(Am){var An=this.isFF&&AO();switch(Am){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||An>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||An>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);case this.htmlFeatures.FILE_READER:return !!(window.FileReader);}return false;},getOSInfo:function AL(){var Ar="Unknown",An=navigator.appVersion,Aq=navigator.userAgent,Ap=Ar;var Am=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var Ao;for(Ao=0;Ao<Am.length;Ao++){var At=Am[Ao];if(At.r.test(Aq)){Ap=At.s;break;}}var As=Ar;if(/Windows/.test(Ap)){As=/Windows (.*)/.exec(Ap)[1];Ap="Windows";}switch(Ap){case"Mac OS X":As=/Mac OS X (10[\.\_\d]+)/.exec(Aq)[1];break;case"Android":As=/Android ([\.\_\d]+)/.exec(Aq)[1];break;case"iOS":As=/OS (\d+)_(\d+)_?(\d+)?/.exec(An);As=As[1]+"."+As[2]+"."+(As[3]|0);break;}return{name:Ap,version:As};},transEndEvtNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},replace:function n(Ao,Am){if(Ao&&Am){var An=Ao.parentNode;if(An){An.replaceChild(Am,Ao);}}return Am;},attachEvent:function X(Ao,An,Ap,Am){if(Ao.addEventListener){return Ao.addEventListener(An,Ap,!!Am);}return Ao.attachEvent("on"+An,Ap);},detachEvent:function AW(Ao,An,Ap,Am){if(!Ao){return ;}if(Ao.removeEventListener){Ao.removeEventListener(An,Ap,!!Am);}else{Ao.detachEvent("on"+An,Ap);}},attachMarkupEvent:function v(Ap,Ao,Am){var An=function(Aq){mstrmojo.all[Ap].captureDomEvent(Am,window,Aq);};this.attachEvent(Ao,Am,An);return An;},attachOneTimeEvent:function W(Ap,An,Aq,Am){var Ao=function(Ar){Aq(Ar);if(Am){h(this,An,Ao);}else{mstrmojo.dom.detachEvent(this,An,Ao);}};if(Am){l(Ap,An,Ao);}else{this.attachEvent(Ap,An,Ao);}Ap=null;return Ao;},attachMouseMoveEvents:function D(Ap,Am){var Ao=this,An=function(Aq){if(Am){Am(Aq);}Ao.detachEvent(document,"mousemove",Ap);Ao.detachEvent(document,"mouseup",An);};Ao.attachEvent(document,"mousemove",Ap);Ao.attachEvent(document,"mouseup",An);},captureDomEvent:function AI(Ar,Ap,An,Aq,Ao){var Am=mstrmojo.all[Ar];if(Am){Am.captureDomEvent(Ap,An,Aq,Ao);}},translate:function L(Ao,An,Ar,Aq,Am,Ap){Am=(Am&&" "+Am)||"";Ao.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(An,Ar,Aq,Ap)+Am;},createTranslateString:function P(Am,Ap,Ao,An){Am=AD(Am);Ap=AD(Ap);Ao=AD(Ao);return AM(Am,Ap,Ao,An,"translate");},createScaleString:function u(Am,Ap,Ao,An){Am=Am||0;Ap=Ap||0;Ao=Ao||0;return AM(Am,Ap,Ao,An,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function C(Ao,Am,Ap,Ar){var An=Ao.id+"-"+Am,Aq=this._bufferConnects[An];if(!Aq){Aq=this._bufferConnects[An]={elId:Ao.id,eventName:Am,timer:null,bufferSize:Ar,listeners:[],callback:function(As){mstrmojo.dom._callback(As,mstrmojo.global,An);return true;}};this.attachEvent(Ao,Am,Aq.callback);}Aq.listeners.push(Ap);},_callback:function Ad(Aq,Am,Ao){var Ap=this._bufferConnects[Ao],Ar=Ap&&Ap.timer;if(Ap&&!Ar){var An=(Ap.bufferSize===null)?this._bufferSize:Ap.bufferSize;if(Ap.bufferSize){Ap.timer=Am.setTimeout(function(){mstrmojo.dom.updateBuffers(Ao);},An);}else{mstrmojo.dom.updateBuffers(Ao);}}},updateBuffers:function H(Ap){var Aq=this._bufferConnects[Ap],An=Aq&&Aq.listeners,Am=(An&&An.length)||0,Ao;for(Ao=0;Ao<Am;Ao++){An[Ao]();}if(Aq&&Aq.timer){delete Aq.timer;}},detachBufferedEvent:function AA(An,Ar,As){if(!An){return ;}var Au=An.id+"-"+Ar,Ao=this._bufferConnects[Au],Aq=Ao&&Ao.listeners,At=(Aq&&Aq.length)||0,Ap;if(At){for(Ap=At-1;Ap>-1;Ap--){if(Aq[Ap]===As){Aq.splice(Ap,1);}}if(!Aq.length){this.detachEvent(An,Ar,Ao.callback);delete this._bufferConnects[Au];if(Ao.timer){var Am=mstrmojo.global;Am.clearTimeout(Ao.timer);}}}},eventTarget:function y(Am,An){An=AG(Am,An);return An.target||An.srcElement;},isMac:function w(){return this.getOSInfo().name.toLowerCase().indexOf("mac")>=0;},isMetaKey:function J(Am,Ap){var Ao=this.getOSInfo().name.toLowerCase().indexOf("mac")>=0,An=AG(Am,Ap)||{};return(An.ctrlKey&&!Ao)||(An.metaKey&&Ao);},ctrlKey:function Ag(Am,An){return(AG(Am,An)||{}).ctrlKey;},shiftKey:function z(Am,An){return(AG(Am,An)||{}).shiftKey;},metaKey:function Z(Am,An){return(AG(Am,An)||{}).metaKey;},getButton:function AQ(Am,An){return((Number(AG(Am,An).button))===2)?2:1;},isPrimaryMouseBtn:function Ab(An,Am){return this.getButton(Am||window,An)===1;},getMousePosition:function j(Ap,Ao){Ao=Ao||window;var An,As;if(mstrmojo.dom.isIE){Ap=Ap||Ao.event;var Aq=document,Am=Aq.body,Ar=Aq.documentElement;An=Ap.clientX+Am.scrollLeft+(Ar.scrollLeft||0);As=Ap.clientY+Am.scrollTop+(Ar.scrollTop||0);}else{An=Ap.pageX;As=Ap.pageY;}return{x:An,y:As};},position:function AR(An,Ao){var Ar={x:0,y:0,w:0,h:0};if(An&&An.getBoundingClientRect){try{Ar=An.getBoundingClientRect();}catch(Aq){Ar={left:0,top:0,right:0,bottom:0,height:0,width:0};}Ar={x:Ar.left,y:Ar.top,w:Ar.right-Ar.left,h:Ar.bottom-Ar.top};if(this.isIE6||this.isIE7){var Am=An.ownerDocument;if(Am){var At=Am.documentElement,As=At.getBoundingClientRect();Ar.x-=As.left;Ar.y-=As.top;}}}if(Ao){var Ap=AU();Ar.x+=Ap.x;Ar.y+=Ap.y;}return Ar;},delta:function F(Ao,Am){Am=Am||document.body;var An=this.position(Ao),Ap=this.position(Am);return{x:Math.round(An.x-Ap.x),y:Math.round(An.y-Ap.y)};},windowDim:function Q(){var Am=0,Ao=0,Ap=window,Aq=document,Ar=Aq.documentElement,An=Aq.body;if(typeof (Ap.innerWidth)=="number"&&typeof (Ap.innerHeight)=="number"){Am=Ap.innerWidth;Ao=Ap.innerHeight;}else{if(Ar&&(Ar.clientWidth||Ar.clientHeight)){Am=Ar.clientWidth;Ao=Ar.clientHeight;}else{if(An&&(An.clientWidth||An.clientHeight)){Am=An.clientWidth;Ao=An.clientHeight;}}}return{w:Am,h:Ao};},center:function AH(Am){t.call(this,Am,V,V);},bottomCenter:function E(Am){t.call(this,Am,V,AY);},clearBrowserHighlights:function K(Am){Am=Am||self;if(!Am.getSelection){var As=Am.document,Ar=As&&As.selection,Ap=Ar&&Ar.empty;if(Ap){try{Ar.empty();}catch(Ao){}}}else{var An=Am.getSelection,Aq=An&&Am.getSelection();if(Aq&&!Aq.isCollapsed){if(Aq.empty){Aq.empty();}else{if(Aq.removeAllRanges){Aq.removeAllRanges();}}}}},findAncestorByAttr:function AN(Aq,Ao,An,Am){var Ar=An?Aq:Aq&&Aq.parentNode;while(Ar&&(Ar!==Am)){var Ap=Ar.getAttribute&&Ar.getAttribute(Ao);if(Ap!=null){return{node:Ar,value:Ap};}Ar=Ar.parentNode;}return null;},findAncestorByName:function Af(Ao,Ar,An,Am){Ar=Ar&&Ar.toLowerCase();var Ap=An?Ao:Ao&&Ao.parentNode;while(Ap&&(Ap!==Am)){var Aq=Ap.nodeName;if(Aq&&(Aq.toLowerCase()===Ar)){return Ap;}Ap=Ap.parentNode;}return null;},contains:function I(Ap,Aq,An,Am){var Ao=Aq;if(!An){Ao=Ao.parentNode;}while(Ao){if(Ao===Ap){return true;}if(Ao===Am){break;}Ao=Ao.parentNode;}return false;},toggleSelection:function Al(An,Am){An.setAttribute("unselectable",Am?"off":"on");mstrmojo.css.toggleClass(An,"unselectable",!Am);An.onselectstart=function(){return Am;};if(!Am){this.clearBrowserHighlights();}},preventDefault:function U(Am,An){An=An||Am.event;if(An.preventDefault){An.preventDefault();}else{An.returnValue=false;}},stopPropogation:function M(Am,An){An=An||Am.event;if(An.stopPropagation){An.stopPropagation();}else{An.cancelBubble=true;}},firstTouch:function AT(Am,An){return An&&An.touches&&An.touches.length?An.touches[0]:(An||Am.event);},firstChangedTouch:function AZ(Am,An){return An&&An.changedTouches&&An.changedTouches.length?An.changedTouches[0]:(An||Am.event);},isLandscape:function T(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function AV(Am){while(Am){var An=Am.mstrmojoId;if(An!==null&&An!==undefined){return mstrmojo.all[An];}Am=Am.parentNode;}return null;},setCaret:function G(Am,Ao){if(Am.setSelectionRange){Am.focus();Am.setSelectionRange(Ao,Ao);}else{if(Am.createTextRange){var An=Am.createTextRange();An.move("character",Ao);An.select();}}},setInputSelection:function Y(Am){if(Am.select){Am.focus();Am.select();}else{if(Am.createTextRange){Am.createTextRange().select();}}},setElementSelection:function a(Ao){if(window.getSelection){var Am=document.createRange(),An=window.getSelection();Am.selectNodeContents(Ao);An.removeAllRanges();An.addRange(Am);}else{if(document.body.createTextRange){var Ap=document.body.createTextRange();Ap.moveToElementText(Ao);Ap.select();}}},getHorizontalScroll:function Ai(){return AU().x;},getVerticalScroll:function AB(){return AU().y;},removeNode:function Ac(Ao){var An=document.getElementById(Ao),Am=An&&An.parentNode;if(Am){return Am.removeChild(An);}}});}());mstrmojo.warehouse.EnumObjectTypes={FILTER:1,METRIC:4,ATTRIBUTE:12,FACT:13,DIMENSION:14,TABLE:15,TABLE_LOGICAL_VIEW:151,TABLE_PARTITION:152,FORM:21,COLUMN:26,DBROLE:29,PROJECT:32,TRANSFORMATION:43,DBTABLE:53,LAYER:70,RELATIONSHIP:99,COMPOUND_FORM:1001,RELATIONSHIP_ATTRIBUTE:1002};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};mstrmojo.chart.model.enums.EnumDSSAxisName={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5,DssAxisDropZoneIndexRoot:8,DssAxisDropZoneIndexEnd:8+255,DssAxisDynamicShortcutRoot:300,DssAxisDynamicShortcutEnd:300+255};mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={NONE:1,AUTOMATIC:2,COMPACT:3,MANUAL:4};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo._ShowsStatus=mstrmojo.provide("mstrmojo._ShowsStatus",{showStatus:function showStatus(A,G,D){var C=this._STATUS;if(!this.hasRendered||!C){return ;}var E=C.style;if(!A){if(this.showingStatus){E.display="none";}}else{if(C){var F=this._STATUS_TXT;if(F){F.innerHTML=G||"";}var B=this._STATUS_BAR;if(B){B.style.width=(D||0)+"%";}if(!this.isStatusBarPositioned){E.top=Math.max((this.scrollboxHeight||0)-50,12)+"px";this.isStatusBarPositioned=true;}if(!this.showingStatus){E.display="block";}}}this.showingStatus=A;},updateStatus:function updateStatus(A,B){this.showStatus(this.showingStatus,A,B);}});(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}this.destroy();var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}}});}());mstrmojo.EnumDSSDisplayMode={RESERVED:0,GRID:1,GRAPH:2,ENGINE:3,TEXT:4,DATAMART:5,BASE:6,GRIDGRAPH:7,NONINTERACTIVE:8};(function(){mstrmojo.requiresCls("mstrmojo.EnumDSSDisplayMode");mstrmojo.requiresDescs(981);var B=mstrmojo.vi.viz;mstrmojo.vi.viz.KnownVisualizations={CUSTOM:-2,UNKNOWN:-1,GRID:0,ESRIMAP:2,GRAPHMATRIX:3,IMAGELAYOUT:4,HEATMAP:16,GOOGLEMAP:17,NETWORK:18,getDefinition:function A(E){var F=B.KnownVisualizations,H={Grid:{id:F.GRID,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,title:mstrmojo.desc(981,"Grid")},visAjaxDatePicker:{id:1},ESRIMapVisualizationStyle:{id:F.ESRIMAP,mobileVIStyles:{IPhoneVisualization:"ViEsriMapAdapter",IPadVisualization:"ViEsriMapAdapter"}},GraphMatrixVisualizationStyle:{id:F.GRAPHMATRIX,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,widgetEnable:"-1",mobileVIStyles:{IPadVisualization:"IPadGraphMatrix2Style"}},ImageLayoutVisualizationStyle:{id:F.IMAGELAYOUT,mobileVIStyles:{IPadVisualization:"IPhoneImageMapStyle",ATabletVisualization:"AndroidImageMapStyle"}},SurveyVisualizationStyle:{id:8,mobileVIStyles:{IPadVisualization:"SurveyVisualizationStyle"}},VIHeatMapVisualizationStyle:{id:F.HEATMAP,mobileVIStyles:{IPadVisualization:"IPadHeatMapStyle",ATabletVisualization:"HeatMapVisualizationStyle"}},GoogleMapVisualizationStyle:{id:F.GOOGLEMAP,mobileVIStyles:{IPhoneVisualization:"IPhoneMapStyle",IPadVisualization:"IPadMapStyle"}},NetworkVisualizationStyle:{id:F.NETWORK,mobileVIStyles:{IPadVisualization:"IPhoneNetVizStyle"}}};var G=H[E];if(!G){var C=mstrConfig.pluginsVisList,D=C&&C[E];G={id:D?F.CUSTOM:F.UNKNOWN};G.mobileVIStyles=(D&&D.mobileVIStyles)||{};}return G;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;var P=mstrmojo.dom;var O="mousedown";function S(U){var T=U[U.hotSlot||"domNode"];if(T){if(!U._closeCallback){var W=U.id,V=function(X){return function(Z){var Y=mstrmojo.all[W];if(Y&&!Y.ignoreHover){Y["auto"+X](Z,self);}};};U._uncloseCallback=V("Unclose");U._closeCallback=V("Close");}E.attachEvent(T,"mouseover",U._uncloseCallback);E.attachEvent(T,"mouseout",U._closeCallback);}}function B(U){if(U._closeCallback){var T=U[U.hotSlot||"domNode"];if(T){E.detachEvent(T,"mouseover",U._uncloseCallback);E.detachEvent(T,"mouseout",U._closeCallback);}}}function F(V,U){var T=V;while(T){if(T.open||T.openPopup){if(T.set){T.set("ignoreHover",U);}else{T.ignoreHover=U;}}T=T.opener||T.parent;if(T&&T.shouldPropagateLockHover&&!T.shouldPropagateLockHover()){break;}}}function D(){var T=this._lockHoverCallback;if(T){E.detachEvent(document.body,O,T,true);delete this._lockHoverCallback;}}mstrmojo._CanAutoClose=mstrmojo.provide("mstrmojo._CanAutoClose",{autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function Q(){this._super();if(this.autoCloses){S(this);}this.oncloseOnClickChange();},onautoClosesChange:function L(){var T=(this.autoCloses)?S:B;T(this);},oncloseOnClickChange:function H(){if(!this.curtainNode){return ;}var V=this,U="click",T=(mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp());if(T){U="touchstart";}E.attachEvent(V.curtainNode,U,function(){V.close();if(T){mstrmojo.touchManager.notify([]);}});},autoUnclose:function G(){var T=this._autoCloseTimer;if(T){self.clearTimeout(T);delete this._autoCloseTimer;}},autoClose:function J(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var T=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[T].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function R(T){D.call(this);this._super(T);},lockHover:function N(){F(this,true);if(!this._lockHoverCallback){var U=this.id,T=this._lockHoverCallback=function(V){mstrmojo.all[U]._unlockHoverCheck(V,self);};if((E.isIE7||E.isIE8)&&window.event&&(window.event.type===O)&&this.opener){this.opener._ignoreMousedown=true;}E.attachEvent(document.body,O,T,true);}},unlockHover:function M(){F(this,false);D.call(this);},_unlockHoverCheck:function C(X,T){var U=this.opener;if(U&&U._ignoreMousedown){delete U._ignoreMousedown;return ;}var W=E.eventTarget(T,X);if(!P.contains(this.domNode,W,true,document.body)){var V=P.findWidget(W);while(V){if(V===this){return ;}V=V.parent||V.opener;}if(U&&U.onPopupAutoClosed){U.onPopupAutoClosed(X,T);}this.close();}},open:function I(U,T){if(this.autoCloses){this.autoUnclose();}this._super(U,T);if(this.locksHover){this.lockHover();}},close:function K(T){if(this.locksHover){this.unlockHover();}this._super(T);},shouldPropagateLockHover:function A(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof W==="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children,W=(X&&X.length)||0,Y;for(Y=0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);var W=(Y&&Y.length)||0,X;for(X=0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props,Z;for(Z in Y){var X=Y[Z],W=X.ease;if(typeof W==="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props,a;for(a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}return parseInt(W*Y,10)/W;}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}if(X===0){return W;}return W+Z*I(X,Y);},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}return W+Z*Math.sin((Math.PI/2)*X/Y);},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var G=this.ifDataHelper,F=this,E=this.scrollNode||this.domNode;this.supportsIncFetch=G&&G.hasNext();if(G&&this.supportsIncFetch){this._scroll=function D(){if(E.offsetHeight+E.scrollTop>=E.scrollHeight){F.raiseEvent({name:"incFetch",id:F.id});}};C.attachEvent(E,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(H){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);G.next({complete:function(I){if(F.postNext){F.postNext();}F.set("isFetching",false);},success:function(I){F.addItems(I.items);},failure:function(I){F.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+I);}});});}},addItems:function B(D){if(this._super){this._super(D);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var E=this.scrollNode||this.domNode;C.detachEvent(E,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",P="mousemove",R="mouseup";function G(Y){if(E.isPrimaryMouseBtn(Y)){B.startDragCheck(self,Y);}}var V,Q,A="mstrmojo-dnd-avatar",U;function F(Z,Y){if(Y!==undefined&&Y!==null){Q.innerHTML=Y;}U.left=Z.x+"px";U.top=Z.y+"px";}function L(Z,Y){if(!V){V=I.createElement("div");U=V.style;V.className=A;V.innerHTML='<div class="'+A+'-inner"></div>';Q=V.firstChild;I.body.appendChild(V);}F(Z,Y);U.display="block";}function S(){if(U){U.display="none";}}function H(Y){var Z=++B.ctxt.moveCount;if(Z>=B.minMoves){B.stopDragCheck();if((Y.buttons===1||Y.buttons===undefined||E.isIE9)&&(Y.which===1||Y.button===0||E.isIE8)){B.startDrag(self,Y);}}}function O(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDragCheck();delete B.ctxt;}}function D(Y){B.onDragMove(self,Y);}function C(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDrag(window,Y);}}function N(b){var Z=mstrmojo.hash.copy(b,{}),a=Z.hWin=Z.hWin||window,Y=Z.e=Z.e||a.event;Z.node=E.eventTarget(a,Y);Z.pos=E.getMousePosition(Y,a);return Z;}function J(Z){var Y=E.findWidget(Z);while(Y){if(Y.draggable){return Y;}Y=Y.parent;}return null;}function T(Y){var a=Y.src,Z=J(a.node);if(!Z){return null;}if(Z.getDragAction){Y.action=Z.getDragAction(Y);}a.widget=Z;a.data=Z.getDragData&&Z.getDragData(Y);if(Z.isDragValid){if(!Z.isDragValid(Y)){if(!Z.shouldDragBubble||Z.shouldDragBubble(Y)!==true){Y.src.node=Z.domNode.parentNode;return T(Y);}return null;}}if(Z.ondragstart){Z.ondragstart(Y);}return Z;}function X(a,Z){var Y=E.findWidget(a),b=Z.tgt&&Z.tgt.widget;while(Y){if(Y.dropZone){if(Y===b){return Y;}if(Y.allowDrop&&Y.allowDrop(Z)){return Y;}}Y=Y.parent;}return null;}function W(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(Y,Z){delete this.ctxt;var a=N({hWin:Y,e:Z});this.ctxt={src:a,moveCount:0,last:M.copy(a.pos),getDirection:function(b){return !!this.dir[b];},getCtxtDragData:function(){var b=this.src;return(b&&b.data)||{};},getCtxtDropData:function(){var b=this.tgt;return(b&&b.data)||{};}};if(this.minMoves){E.attachEvent(I,P,H);E.attachEvent(I,R,O);}else{this.startDrag(Y,Z);}},stopDragCheck:function(){E.detachEvent(I,P,H);E.detachEvent(I,R,O);},startDrag:function(Y,b){var Z=this.ctxt;Z.id=mstrmojo.now();var a=T(Z);if(!a){return ;}E.clearBrowserHighlights(Y);E.preventDefault(self,b);E.attachEvent(I,P,D);E.attachEvent(I,R,C);var d=window.mstrApp;if(d&&d.setInteractive){this._changeAppStatus=d.setInteractive(false);}if(!a.ownAvatar){var c=Z.src;L(c.pos,c.data&&c.data.html);}},stopDrag:function(Y,f){E.detachEvent(I,P,D);E.detachEvent(I,R,C);var b=this.ctxt,a=b.tgt||{},Z=N({hWin:Y,e:f,data:a.data}),d=X(Z.node,b);Z.widget=d;b.tgt=Z;if(d){if(d.ondrop){d.ondrop(b);}else{W.call(d);}}var c=b.src.widget;if(c&&c.ondragend){c.ondragend(b);}if(c&&!c.ownAvatar){S();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(c,f){if(E.isSafari){E.clearBrowserHighlights();}var Y=this.ctxt,b=Y.tgt||{},Z=b.widget,d=N({hWin:c,e:f,data:b.data}),i=d.widget=X(d.node,Y),h=Y.last,a=d.pos;Y.dir={x:a.x>h.x,y:a.y>h.y};Y.last=M.copy(d.pos);Y.tgt=d;if(Z!==i){if(Z){if(Z.ondragleave){Z.ondragleave(Y);}else{W.call(Z);}}if(i){Y.tgt.data=(i.getDropData&&i.getDropData(Y))||{};if(i.ondragenter){i.ondragenter(Y);}else{if(i.set){i.set("allowingDrop",true);}}}}if(i){if(i.ondragover){i.ondragover(Y);}}var g=Y.src.widget;if(g&&g.ondragmove){g.ondragmove(Y);}if(g&&!g.ownAvatar){F(d.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.dom");function G(J){return(J&&J.id);}mstrmojo._HasScrollbox=mstrmojo.provide("mstrmojo._HasScrollbox",{_mixinName:"mstrmojo._HasScrollbox",scrollListeners:null,scrollListenerCount:0,scrollInterval:50,scrollboxNode:undefined,scrollTo:function F(L,K){var J=this.scrollboxNode;J.scrollLeft=L.x;J.scrollTop=L.y;if(K){this.notifyScrollListeners(L);}},connectScrollbox:function E(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(!L){L={};this.scrollListeners=L;}if(!L[J]){L[J]=K;this.scrollListenerCount++;if(this.scrollListenerCount===1){this._attachScrollDom();}}},disconnectScrollbox:function D(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(L&&L.hasOwnProperty(J)){delete this.scrollListeners[J];this.scrollListenerCount--;if(!this.scrollListenerCount){this._detachScrollDom();}}},notifyScrollListeners:function C(K){var N=K||this.getScrollPos(),M=N.y,L=N.x;this.scrollboxTop=M;this.scrollboxLeft=L;this.scrollboxRight=L+this.scrollboxWidth;this.scrollboxBottom=M+this.scrollboxHeight;var J=this.scrollListeners,O;for(O in J){J[O].onscroll(this);}},getScrollPos:function H(){var J=this.scrollboxNode;return{x:J.scrollLeft,y:J.scrollTop};},_attachScrollDom:function A(){var M=this.scrollboxNode;if(M){var L=this.usesTouches;if(!L){if(!this.scrollCallback){var K=this.id;this.scrollCallback=function(){mstrmojo.all[K].notifyScrollListeners();};}mstrmojo.dom.attachBufferedEvent(M,"scroll",this.scrollCallback,this.scrollInterval);}if(this.scrollboxTop===null){this.scrollboxTop=L?0:M.scrollTop;}if(this.scrollboxLeft===null){this.scrollboxLeft=L?0:M.scrollLeft;}var J=function(P){var O=P.toLowerCase();var N=M.style[O];return(!isNaN(N)&&N.charAt(N.length-1)!=="%")?parseInt(N,10):M["client"+P];};if(this.scrollboxHeight===null){this.scrollboxHeight=J("Height");}if(this.scrollboxWidth===null){this.scrollboxWidth=J("Width");}this.scrollboxBottom=this.scrollboxTop+this.scrollboxHeight;this.scrollboxRight=this.scrollboxLeft+this.scrollboxWidth;this._attachedScrollbox=M;}},_detachScrollDom:function I(){var J=this._attachedScrollbox;if(J&&this.scrollCallback){mstrmojo.dom.detachBufferedEvent(J,"scroll",this.scrollCallback,this.scrollInterval);}delete this._attachedScrollbox;},scrollboxTop:null,scrollboxLeft:null,scrollboxHeight:null,scrollboxBottom:null,buildRendering:function B(){this._detachScrollDom();this._super();if(this.scrollListenerCount){this._attachScrollDom();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B=mstrmojo.dom,E=100;function I(K,J){return function(L){mstrmojo.all[K][(J?"move":"show")+"Tooltip"](L,self);};}function A(){var K=this.tooltipNode||this.domNode,M=this.id,J,L="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(N){mstrmojo.all[M].hideTooltip(N,self);};}if(!this[L]){this[L]=I(M,this.isDynamicTooltip);}K=[].concat(K);for(J=0;J<K.length;J++){K[J].removeAttribute("title");B.attachEvent(K[J],(this.isDynamicTooltip?"mousemove":"mouseover"),this[L]);B.attachEvent(K[J],"mouseout",this._ontooltipout);}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,hasOpenTooltip:false,postBuildRendering:function(){var J=this._super();if(this.useRichTooltip){A.call(this);}return J;},onuseRichTooltipChange:function H(){if(this.hasRendered){var K=this.tooltipNode||this.domNode,J;if(this.useRichTooltip){A.call(this);}else{if(this._ontooltipout){if(K&&K.constructor!==Array){K=[K];}for(J=0;J<K.length;J++){B.detachEvent(K[J],this.isDynamicTooltip?"mousemove":"mouseover",this["_ontooltip"+(this.isDynamicTooltip?"move":"over")]);B.detachEvent(K[J],"mouseout",this._ontooltipout);}}this.hideTooltip();}}},showTooltip:function G(M,L){var K=this;if(!K.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(M);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var N={};for(var J in M){N[J]=M[J];}M=N;}var O=this.richTooltip?this.richTooltip.areaId:undefined;this._tooltipTimeOut=window.setTimeout(function(){if(K._closeTooltipTimeout){window.clearTimeout(K._closeTooltipTimeout);delete K._closeTooltipTimeout;}mstrmojo.tooltip.open(K,M,L);K.tooltip.onmouseover=function(){if(K.richTooltip&&K.richTooltip.enableHover){window.clearTimeout(K._closeTooltipTimeout);window.clearTimeout(K._deactivationTimeout);if(K.tooltip){K.tooltip.onmouseout=function(P){if(!B.contains(this.domNode,P.e.toElement||P.e.relatedTarget)){K.hideTooltip();}};}}};K.hasOpenTooltip=true;K._hasActiveArea=true;K._tooltipAreaId=O;window.clearTimeout(K._deactivationTimeout);delete K._deactivationTimeout;},(this._hasActiveArea&&O&&O===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function C(J,L){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var N=this,K=J,M=L;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(N,K,M);},this.tooltipOpenDelay);},hideTooltip:function F(){var J=this;window.clearTimeout(this._tooltipTimeOut);if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete J._deactivationTimeout;delete J._hasActiveArea;delete J._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if(J.richTooltip&&J.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete J._closeTooltipTimeout;},E);}else{mstrmojo.tooltip.close();}this.hasOpenTooltip=false;},unrender:function D(M){var N=this.tooltipNode||this.domNode,L;if(N&&N.constructor!==Array){N=[N];}if(N){var O=this._ontooltipover,K=this._ontooltipout,J=this._ontooltipmove;for(L=0;L<N.length;L++){if(O){B.detachEvent(N[L],"mouseover",O);}if(K){B.detachEvent(N[L],"mouseout",K);}if(J){B.detachEvent(N[L],"mousemove",J);}}}this._super(M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresDescs(521,522,523,524,525,526,529,530,534,535,546,547,587,686,687,688,696,746,1101,1102,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,2171,2202,2203,2204,2219,2220,2784,2785,2786,2795,2796,3086,3344,3852,3853,3854,3855,3856,3857,3858,3859,3860,3861,3862,3863,3945,3946,4406,4407,5282,5283,5924,5925,6076,6077,6078,6079,6080,6081,6082,7899,7900,7901,7902,7903,9379,9380,9381,9382,9383,9384,9385,12298,13889,13890,13896,13897);mstrmojo.locales=mstrmojo.provide("mstrmojo.locales",{load:function(C){var A=this;if(this.isLoaded){C();C=null;}else{var B={taskId:"getLocaleInfo"};if(mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){B.sessionState=mstrApp.sessionState;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(D){A.update(D);C();C=null;if(mstrmojo.expr){mstrmojo.expr.onLocaleUpdated();}mstrmojo.locales.isLoaded=true;},failure:function(D){alert(D.getResponseHeader("X-MSTR-TaskFailureMsg"));}},B);}},update:function(A){if(A){mstrmojo.hash.copy(mstrmojo.hash.obj2array(A),this);}},isLoaded:false,datetime:{MONTHNAME_SHORT:[mstrmojo.desc(3852,"Jan"),mstrmojo.desc(3853,"Feb"),mstrmojo.desc(3854,"Mar"),mstrmojo.desc(3855,"Apr"),mstrmojo.desc(3856,"May"),mstrmojo.desc(3857,"Jun"),mstrmojo.desc(3858,"Jul"),mstrmojo.desc(3859,"Aug"),mstrmojo.desc(3860,"Sep"),mstrmojo.desc(3861,"Oct"),mstrmojo.desc(3862,"Nov"),mstrmojo.desc(3863,"Dec")],MONTHNAME_FULL:[mstrmojo.desc(1956,"January"),mstrmojo.desc(1957,"February"),mstrmojo.desc(1958,"March"),mstrmojo.desc(1959,"April"),mstrmojo.desc(1960,"May"),mstrmojo.desc(1961,"June"),mstrmojo.desc(1962,"July"),mstrmojo.desc(1963,"August"),mstrmojo.desc(1964,"September"),mstrmojo.desc(1965,"October"),mstrmojo.desc(1966,"November"),mstrmojo.desc(1967,"December")],dayShortNames:["S","M","T","W","T","F","S"],dayNames:[mstrmojo.desc(9379,"Sunday"),mstrmojo.desc(9380,"Monday"),mstrmojo.desc(9381,"Tuesday"),mstrmojo.desc(9382,"Wednesday"),mstrmojo.desc(9383,"Thursday"),mstrmojo.desc(9384,"Friday"),mstrmojo.desc(9385,"Saturday")],DATEINPUTFORMATS:["M/d/yy","M/d/yyyy","MMM d, yy"],TIMEINPUTFORMATS:["h:mm a","H:mm","h:mm:ss a","H:mm:ss","h:mm:ss a z"],DATEOUTPUTFORMAT:"M/d/yyyy",TIMEOUTPUTFORMAT:"h:mm:ss a",DATEDISPLAYFORMAT:"M/d/yy",TIMEDISPLAYFORMAT:"h:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:mstrmojo.desc(3945,"Include")},{did:"2",n:mstrmojo.desc(3946,"Exclude")}],BranchQual:[{did:"19",n:mstrmojo.desc(5282,"AND")},{did:"20",n:mstrmojo.desc(5283,"OR")},{did:"21",n:mstrmojo.desc(12298,"NOT")},{did:"19_21",n:mstrmojo.desc(5924,"AND NOT")},{did:"20_21",n:mstrmojo.desc(5925,"OR NOT")}],RootOperator:[{did:"19",n:mstrmojo.desc(534,"All selections")},{did:"20",n:mstrmojo.desc(535,"Any selection")}],ExprType:[{did:"2",n:mstrmojo.desc(546,"Qualify")},{did:"5",n:mstrmojo.desc(547,"Select")}],DimtyLevels:[{did:"1",n:mstrmojo.desc(2171,"Default")},{did:"2",n:mstrmojo.desc(3086,"Metric")},{did:"3",n:mstrmojo.desc(3344,"Report")}],Attribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,76",n:mstrmojo.desc(686,"Contains"),t:1,tp:1},{did:"1,79",n:mstrmojo.desc(2784,"Does not contain"),t:1,tp:1},{did:"1,77",n:mstrmojo.desc(687,"Begins with"),t:1,tp:1},{did:"1,80",n:mstrmojo.desc(2785,"Does not begin with"),t:1,tp:1},{did:"1,78",n:mstrmojo.desc(688,"Ends with"),t:1,tp:1},{did:"1,81",n:mstrmojo.desc(2786,"Does not end with"),t:1,tp:1},{did:"1,18",n:mstrmojo.desc(525,"Like"),t:1,tp:1},{did:"1,43",n:mstrmojo.desc(526,"Not Like"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],Metric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"2,1",n:mstrmojo.desc(529,"Highest"),t:2,tp:2},{did:"2,2",n:mstrmojo.desc(530,"Lowest"),t:2,tp:2},{did:"3,1",n:mstrmojo.desc(4407,"Highest %"),t:3,tp:3},{did:"3,2",n:mstrmojo.desc(4406,"Lowest %"),t:3,tp:3}],MetricRP:[{did:"2,13",n:mstrmojo.desc(13897,"Rank between highest"),t:2,tp:2},{did:"2,4",n:mstrmojo.desc(1101,"Exclude highest"),t:2,tp:2},{did:"2,3",n:mstrmojo.desc(13896,"Rank between lowest"),t:2,tp:2},{did:"2,5",n:mstrmojo.desc(1102,"Exclude lowest"),t:2,tp:2},{did:"3,13",n:mstrmojo.desc(13890,"Between highest")+"%",t:3,tp:3},{did:"3,4",n:mstrmojo.desc(1101,"Exclude highest")+"%",t:3,tp:3},{did:"3,3",n:mstrmojo.desc(13889,"Between lowest")+"%",t:3,tp:3},{did:"3,5",n:mstrmojo.desc(1102,"Exclude lowest")+"%",t:3,tp:3}],MDXAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],MDXMetric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],SAPAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],Element:[{did:"1,22",n:mstrmojo.desc(2219,"In List"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2220,"Not In List"),t:1,tp:1}]},validation:{requiredFieldError:mstrmojo.desc(6078,"This field is required."),invalidCharError:mstrmojo.desc(7899,"This field contains invalid characters for #."),invalidDateStringError:mstrmojo.desc(7900,"This field contains invalid date/time string."),invalidNumericFormatError:mstrmojo.desc(7901,"This field contains numeric value with incorrect format."),outofRangeError:mstrmojo.desc(6079,"This field should be # between ## and ###."),noLessMinError:mstrmojo.desc(6081,"This field should be # greater than or equal to ##."),noGreaterMaxError:mstrmojo.desc(6080,"This field should be # less than or equal to ###."),failRegexTestError:mstrmojo.desc(6082,"This field failed regular expression validation."),invalidValueInListError:mstrmojo.desc(7902,"One of the value (#) in this list is not valid."),integerDataType:mstrmojo.desc(6076,"an Integer value"),numericDataType:mstrmojo.desc(6077,"a Number value"),dateDataType:mstrmojo.desc(7903,"a Date/Time value")},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"#F00E0E",v:"#F00E0E"},{n:"#080000",v:"#080000"},{n:"#E81A1A",v:"#E81A1A"},{n:"#6E0909",v:"#6E0909"},{n:"#4F2828",v:"#4F2828"},{n:"#141212",v:"#141212"},{n:"#D60202",v:"#D60202"},{n:"#C40404",v:"#C40404"}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.base64","mstrmojo.func","mstrmojo.hash");mstrmojo.XhrCallbackType=null;function decodeHeader(value){var rEncoded=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(value&&value.indexOf("=?UTF-8?B?")===0){var decMsg="",result;while((result=rEncoded.exec(value))!==null){decMsg+=mstrmojo.base64.decode(result[1]);}return decMsg;}return value;}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function sendXhr(xhr,method,baseUrl,params){method=method.toUpperCase();var app=mstrApp,m=window.microstrategy;if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);params.taskContentType=params.taskContentType||"json";params.taskEnv=params.taskEnv||"xhr";params.xts=new Date().getTime();params[mstrApp.name]=mstrApp.servletState||mstrConfig.servletState||"";baseUrl=baseUrl||mstrConfig.taskURL;}var ptp=app.persistTaskParams||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}xhr.open(method,appendUrlParams(method,baseUrl,params),this.async);if(method!=="POST"){xhr.send(null);}else{xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.send(encodeParams(params));}if(this.async===false){xhr.onreadystatechange();}}function createXhr(){var methods=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}],cnt=methods.length,i;for(i=0;i<cnt;i++){var xhr;try{xhr=methods[i]();}catch(e){continue;}createXhr=methods[i];return xhr;}throw new Error("mstrmojo.SimpleXHR: Could not create an XHR object.");}function evalResponse(rt){var rtn=null;try{rtn=eval("("+rt+")");}catch(ex){rtn=rt&&mstrmojo.string.trim(rt);}return rtn;}var MSI_SERVER_NAME_NOT_INITIALIZED=2147760371,MSI_INVALID_SESSION_ID=2147760372,E_MSI_USERMGR_USER_NOTFOUND=2147758245,E_MSI_CONNECT_FAILED=2147759877;function isSessionExpiredError(res){var c=res&&res.getResponseHeader("X-MSTR-TaskErrorCode");c=(c<0)?(4294967296+parseInt(c,10)):c;switch(c){case MSI_SERVER_NAME_NOT_INITIALIZED:case MSI_INVALID_SESSION_ID:case E_MSI_USERMGR_USER_NOTFOUND:case E_MSI_CONNECT_FAILED:return true;}return false;}function xhrSupportsProgress(xhr){return !!(xhr&&xhr.upload&&xhr.upload.onprogress);}mstrmojo.SimpleXHR=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.SimpleXHR",isTask:true,async:true,init:function init(props){mstrmojo.hash.copy(props,this);},onreadystatechange:function onreadystatechange(xhr,callback,prevRequest){if(xhr.readyState!==4){return ;}if(typeof callback!=="object"){return ;}try{if((xhr.status===200)||(xhr.status===304)){this.response=callback.textResponse?xhr.responseText:evalResponse(xhr.responseText);if(typeof callback.success==="function"){callback.success(this.response);}}else{if(xhr.status!==0){var app=mstrApp,sessionExp=app&&app.onSessionExpired;if(sessionExp&&isSessionExpiredError(xhr)){sessionExp.call(app,prevRequest);}else{var orig=xhr.getResponseHeader;xhr.getResponseHeader=function(name){return decodeHeader(orig.apply?orig.apply(xhr,[name]):orig(name));};if(typeof callback.failure==="function"){callback.failure(xhr);}}}}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(typeof callback.complete==="function"){callback.complete();}if(!isSessionExpiredError(xhr)&&!prevRequest.params.notRestartSessionManager){var sm=mstrApp.sessionManager;if(sm&&sm.restart){sm.restart();}}}},cancel:function(){var didCancel=false;var xhr=this.xhr;if(xhr){delete xhr.onreadystatechange;xhr.isAborted=true;if(xhr.readyState<4){xhr.abort();didCancel=true;}this.xhr=null;}return didCancel;},request:function request(method,baseUrl,callback,params,webSvrUrl,useResFeed,webSrvParams){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("POST",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{var xhr=createXhr();xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(this,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=(function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback));}this.xhr=xhr;sendXhr.call(this,xhr,method,baseUrl,params);}}});mstrmojo.QueuedXHR=mstrmojo.declare(mstrmojo.SimpleXHR,null,{scriptClass:"mstrmojo.QueuedXHR",queue:null,requestCount:0,retryDelay:1,lookup:null,cancel:function cancel(){var didCancel=this._super();while(this.queue.length){var x=this.queue.pop();var cb=x.callback;if(cb&&cb.complete){cb.complete();}}this.queue=[];this.requestCount--;return didCancel;},init:function init(){this.queue=[];this.lookup=[];},request:function request(method,baseUrl,callback,params,override,webSvrUrl,useResFeed,webSrvParams,useCache){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("POST",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{if(this.requestCount>0&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();callback=mstrmojo.func.wrapMethods(callback,{complete:(function(ths){return function(){ths.advanceQueue();};}(this)),success:(function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this))});xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(this,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=(function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback));}sendXhr.call(this,xhr,method,baseUrl,params);}}}},upload:function upload(method,baseUrl,callback,params,data,config,override,webSrvParams,useCache){if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);}if(this.requestCount>0&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params,data:data,config:config});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();var self=this;callback=mstrmojo.func.wrapMethods(callback,{complete:(function(ths){return function(){ths.advanceQueue.call(ths);};}(this)),success:(function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this))});var handleProgress=function(event){callback.progress(event,config);};var url=baseUrl;xhr.open("POST",url,false);var formData=new FormData();var a;for(a in params){formData.append(a,params[a]);}if(data){if(params.fileName){formData.append("myFile",data,params.fileName);}else{formData.append("myFile",data);}}if(xhrSupportsProgress(xhr)&&callback.progress){xhr.upload.onprogress=handleProgress;}xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(self,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));xhr.send(formData);}}},advanceQueue:function advanceQueue(){this.requestCount--;if(this.queue.length===0){this.requestCount=0;return ;}var req=this.queue.shift();if(req.params.taskId==="importFile"){this.upload(req.method,req.baseUrl,req.callback,req.params,req.data,req.config);}else{this.request(req.method,req.baseUrl,req.callback,req.params,true);}},_searchForCacheRequest:function _searchForCacheRequest(params){var i;for(i in this.lookup){if(mstrmojo.hash.equals(params,this.lookup[i].params)){return this.lookup[i];}}return null;},hasRequests:function hasRequests(){return this.requestCount>0||mstrmojo.jsonp.hasRequests();}});mstrmojo.xhr=new mstrmojo.QueuedXHR();mstrmojo.jsonp={jsc:new Date().getTime(),timeToWait:20000,requestCount:0,request:function(url,params,callback){var head=document.getElementsByTagName("head")[0]||document.documentElement,jsonp="jsonp"+(this.jsc++),script=document.createElement("script");params.jsonp=jsonp+"(@R@);";params.taskContentType="jsonp";params.taskEnv="jsonp";params.xts=new Date().getTime();window[jsonp]=function(response){mstrmojo.jsonp.requestCount--;if(!response){if(callback.timeout){callback.timeout();}}else{if(response.status===200){callback.success(response.content);}else{var res={status:response.status,getResponseHeader:function(name){switch(name){case"X-MSTR-TaskFailureMsg":return response.errorMsg;case"X-MSTR-TaskErrorCode":return response.errorCode;}}};if(mstrApp.onSessionExpired&&isSessionExpiredError(res)){if(callback.onSessionExpired){callback.onSessionExpired();}else{mstrApp.onSessionExpired();}}else{callback.failure(res);}}}if(window[jsonp]){if(callback.complete){callback.complete();}window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}head.removeChild(script);}};head.insertBefore(script,head.firstChild);this.requestCount++;script.src=appendUrlParams("GET",url,params);setTimeout(function(){var fn=window[jsonp];if(fn){fn();}},this.timeToWait);},hasRequests:function(){return this.requestCount>0;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,e,V,X){var W=b,Z;while(Z=W.match(e)){var c=Z[0],a=c.length,d=true;c=c.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===c){d=false;break;}else{if(c.indexOf(Y)===0){delete U[Y];}}}if(d){U[c]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var d=S.evt2idx,g=S.idx2evt,Z=S.parts;var e=(U>=0)?U:0,b=this.id,W=mstrmojo.all,c=(U>0)?W[g[e-1].context][Z[e-1]]:(S.host?W[S.host]:this.parent),T=Z[e];var V=mstrmojo.array;while(c&&T){if(c.attachEventListener){var f=c[T+"_bindEvents"]||(T+"Change");if(typeof (f)=="string"){f=[f];}var Y=[];for(var a=0,X=f.length;a<X;a++){Y[a]=c.attachEventListener(f[a],b,"_callback");}for(var a=0;a<f.length;a++){d[c.id+"_"+f[a]]=e;}g[e]={context:c.id,evts:f,subs:Y};}c=c[T];T=S.parts[++e];}},_detachChain:function G(S,T){var U=mstrmojo.all,h=S.idx2evt,d=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=h.length;if(Y<b){for(;Y<b;Y++){var Z=h[Y];if(!Z){break;}var W=Z.context,c=U[W],g=Z.evts;if(c&&c.detachEventListener){var k=Z.subs;for(var f=0,V=k.length;f<V;f++){c.detachEventListener(k[f]);}}h[Y]=null;for(var X=0,e=g.length;X<e;X++){delete d[W+"_"+g[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,B=mstrmojo.hash;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function A(F,E){var D=[];E=E||[];B.forEach(E,function(G){C.forEach(G.att||[],function(H){if(H.did===F){D=D.concat(H.fs||[]);return false;}});});D=C.filter(D,function(G){return !!G.obf;});return C.distinct(D,"fid");}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.all={};var E=mstrmojo.all,G=mstrmojo.hash;var A=0;function D(){var I;while(!I){var H="mstr"+(A++);if(!E[H]){I=H;}}return I;}mstrmojo.registry=mstrmojo.provide("mstrmojo.registry",{add:function F(H){if(!H){return ;}var I=H.id;if(!I){H.id=I=D();}else{if(E[I]){throw new Error("Tried to register 2 objects with same id: "+I);}}E[I]=H;},remove:function C(H){if(H&&H.id){delete E[H.id];}},dumpAll:function(){var H;for(H in E){var I=E[H].id;if(I){mstrmojo.dbg(I+"("+(E[H].scriptClass||"[unknown class]")+")");}}},ref:function B(I,H){H=H||{};if(I){var L=I;while(L){switch(typeof L){case"string":if(H.skipLoadChecks!==true){mstrmojo.requiresCls(L);}L=G.walk(L,window);break;case"function":return(H.dontInst!==true)?new L():L;case"object":if(L.constructor===Object){var K=L.scriptClass;if(K){if(H.skipLoadChecks!==true){mstrmojo.requiresCls(K);}var J=G.walk(K,window);if(J){return new J((H.clone===true)?G.clone(L):L);}return null;}return L;}return L;default:return null;}}}return null;}});mstrmojo.insert=mstrmojo.registry.ref;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,M=mstrmojo.hash;function J(U){if(U!==null){return(U.constructor!==Array)?[U]:U;}return null;}function F(e,c,Y){if(!c){return null;}var f=[],V=e.selectedIndices,U=e.allIdx,a=e.noneIdx;if(e.multiSelect&&(a>-1)&&(I.indexOf(c,a)>-1)){return f;}var X,Z,d=e.items,b=e.itemIdField,W=e.selectedItems,h;if(e.multiSelect&&(U>-1)&&(I.indexOf(c,e.allIdx)>-1)){for(X=0,Z=d.length;X<Z;X++){if(!V[X]){f.push(X);V[X]=true;e.selectedIndex=X;e.selectedItem=d[X];}}}else{for(X=0,Z=c.length;X<Z;X++){var g=c[X];if(!V[g]){V[g]=true;if(Y){f.push({idx:g,positions:Y});}else{f.push(g);}e.selectedIndex=g;h=e.selectedItem=d[g];if(W){W[h[b]]=h;}}}}return f;}function D(X,U){var W=[],Y=X.selectedIndices,Z=X.selectedItems,V;for(V in Y){delete Y[V];if(U){W.push({idx:parseInt(V,10),positions:U});}else{W.push(parseInt(V,10));}}X.selectedIndex=-1;X.selectedItem=null;if(Z){X.selectedItems={};}return W;}function T(e,d,Y){if(!d){return null;}var a=[],V=e.selectedIndices,g=I.indexOf,U=e.allIdx,b=e.noneIdx,c=e.itemIdField,W=e.selectedItems;if(e.multiSelect&&(((U>-1)&&(g(d,U)>-1))||((b>-1)&&(g(d,b)>-1)))){return D(e);}if(d.length>0&&V[U]){if(g(d,U)<0){d.push(U);}}var Z=d.length,X;for(X=0;X<Z;X++){var f=d[X];if(V[f]){delete V[f];if(Y){a.push({idx:f,positions:Y});}else{a.push(f);}if(W){delete W[e.items[f][c]];}if(e.selectedIndex===f){e.selectedIndex=-1;e.selectedItem=null;}}}return a;}function C(X,Y,V,U){if(U){return ;}if(this.raiseEvent){if((X&&X.length)||(Y&&Y.length)){try{this.raiseEvent({name:"selectionChange",added:X,removed:Y});}catch(W){T(this,X);F(this,Y);throw W;}}}}function B(V){var W=this.itemIdField,U=this.items;if(typeof V==="object"&&W){return I.find(U,W,V[W]);}return I.indexOf(U,V);}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,noneIdx:-1,itemIdField:"",items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(U){this._super(U);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function K(d){d=J(d);if(!d){return ;}var a=this.items,U=this.items.length,W=this.selectedItems,Y=[],V;a=this.items=a.concat(d);V=a.length;if(W){var Z=this.itemIdField,X,c;for(X=U;X<a.length;X++){c=a[X];if(W[c[Z]]){Y.push(X);}}}if(Y&&Y.length){F(this,Y);}if(V>U){var b=this.itemsContainerNode;if(b){b.innerHTML+=this._buildItemsMarkup(U,V-1).join("");}}},addSelectedItems:function S(U){this.selectItems(U,false);},setSelectedItems:function L(U){this.selectItems(U,true);},selectItems:function R(c,e){c=J(c);if(!c){return ;}if(e&&this.selectedItems){this.selectedItems={};}var W=this.selectedItems,a=this.itemIdField,U=[],Y=this.items.length,Z=[],V=this.allowUnlistedValues,d,b,X;for(X=0;X<c.length;X++){d=c[X];b=B.call(this,d);if(b<0){if(W===null){if(V){U.push(d);b=Y++;Z.push(b);}}else{W[d[a]]=d;}}else{Z.push(b);}}if(U.length>0){this.addItems(U);}if(Z.length>0){if(e){this.select(Z);}else{this.addSelect(Z);}}},unselectItems:function A(V){V=J(V);if(!V){return ;}var a=this.selectedItems,W=[],Z=this.itemIdField,Y,U,X;if(a===null){return ;}for(X=0;X<V.length;X++){Y=V[X];if(a){delete a[Y[Z]];}U=B.call(this,Y);if(U<0){W.push(U);}}if(W.length>0){this.removeSelect(W);}},getSelectedItems:function G(){if(this.selectedItems){return M.valarray(this.selectedItems);}return I.get(this.items,M.keyarray(this.selectedIndices,true));},singleSelect:function(V,W,U){if(V!==-1){this.select([V],W,U);}},singleSelectByField:function O(V,W,U){this.singleSelect(I.find(this.items,W,V),U);},toggleSelect:function Q(U){var W,V;if(this.selectedIndices[U]){V=T(this,[U]);}else{W=F(this,[U]);}C.call(this,W,V,[U]);},select:function(W,V,U){W=J(W);if(!W){return ;}var Y=D(this,U),a=F(this,W,U),X;if(this.selectionPolicy!=="reselect"){for(X=Y.length-1;X>=0;X--){var Z=I.indexOf(a,Y[X]);if(Z>-1){Y.splice(X,1);a.splice(Z,1);}}}C.call(this,a,Y,W,V);},rangeSelect:function H(V,U){var a=this.selectedIndex,Y=a,Z=this.allIdx,W=[],X;if(V===Z||this.selectedIndices[Z]){W.push(Z);}else{if(Y===-1&&this.selectedIndices){for(X in this.selectedIndices){Y=parseInt(X,10);break;}}Y=Y===-1?0:Y;if(Y>V){Y=V;V=a;}for(X=Y;X<=V;X++){W.push(X);}}this.select(W,U);this.selectedIndex=a;},clearSelect:function(U){C.call(this,null,D(this),[],U);if(!U){this.raiseEvent({name:"clearSelection"});}},addSelect:function(X,U,V){X=J(X);if(!X){return ;}var W=F(this,X,V),Z=null,Y=this.noneIdx;if(this.multiSelect&&(Y>-1&&I.indexOf(X,Y)>-1)){Z=T(this,X);}C.call(this,W,Z,X,U);},removeSelect:function(W,U,V){W=J(W);if(!W){return ;}C.call(this,null,T(this,W,V),W,U);},_set_selectedIndices:function P(W,c,U){if(this.selectedItems){this.selectedItems={};}var V=this.selectedIndices;if(V===c){return false;}if(!V){V={};this.selectedIndices=V;}if(!c){c={};}var a=this.selectedIndex,Z=[],b;for(b in V){if(!c[b]){b=parseInt(b,10);delete V[b];Z.push(b);if(a===b){this.selectedIndex=-1;this.selectedItem=null;}}}var f=[],d=this.items,Y=this.itemIdField,e;for(b in c){if(!V[b]){b=parseInt(b,10);V[b]=true;f.push(b);this.selectedIndex=b;e=this.selectedItem=d[b];if(this.selectedItems){this.selectedItems[e[Y]]=e;}}}if(U!==true){var X=[];for(b in c){if(V[b]){b=parseInt(b,10);X.push(b);}}C.call(this,f,Z,X);}return(f.length||Z.length);},_set_selectedIndex:function N(X,V,U){var W={};if(V>-1){W[V]=true;}return this._set_selectedIndices("selectedIndices",W,U);},_set_selectedItem:function E(X,W,V){var U=B.call(this,W);if((U<0)&&(W!==null&&W!==undefined)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(W));U=this.items.length-1;}return this._set_selectedIndex("selectedIndex",U,V);},_addSelections:function(U){return F(this,U);},_removeAll:function(){return D(this);}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var B={};var E={};mstrmojo.publisher=mstrmojo.provide("mstrmojo.publisher",{publish:function F(H,Q,L){var M=B[H]&&B[H][Q],O;if(!M){return ;}for(O in M){var J=null;if(O){J=mstrmojo.all[O];if(!J){delete M[O];continue;}}var R=M[O].methods;if(R){var P=J||mstrmojo.global,I;for(I in R){if(P[I]){P[I](L);}}}var N=M[O]&&M[O].functions,S=(N&&N.length)||0;if(S){var K;if(J){for(K=S-1;K>-1;K--){if(N[K]){N[K].apply(J,[L]);}}}else{for(K=S-1;K>-1;K--){if(N[K]){N[K](L);}}}}}},subscribe:function D(I,N,R,J){var S=B[I];if(!S){S={};B[I]=S;}var M=S[N];if(!M){M={};S[N]=M;}var K=M[J||""];if(!K){K={};M[J||""]=K;}if(typeof R==="function"){var L=K.functions;if(!L){L=[];K.functions=L;}L.push(R);}else{var H=K.methods;if(!H){H={};K.methods=H;}H[R]=true;}var Q=E,P=Q[J||""];if(!P){P={};Q[J||""]=P;}var O=P[I];if(!O){O={};P[I]=O;}O[N]=true;return{id:I,type:N,callback:R,listener:J,clear:function(){mstrmojo.publisher.unsubscribe(this);}};},unsubscribe:function C(I){var R=B[I.id],O=R&&R[I.type],L=O&&O[I.listener||""];if(!L){return ;}var K=mstrmojo.array,Q=mstrmojo.hash,P=typeof I.callback,M=false;if(P==="function"){var N=L.functions;if(N){K.removeItem(N,I.callback);if(!N.length){delete L.functions;if(Q.isEmpty(L.methods)){M=true;}}}}else{var J=L.methods;if(J){delete J[I.callback];if(Q.isEmpty(J)){delete L.methods;if(!L.functions||!L.functions.length){M=true;}}}}if(M){delete O[I.listener||""];if(Q.isEmpty(O)){delete R[I.type];}}},hasSubs:function G(K,J){var I=B[K],H=I&&I[J];return !!H;},clearSubscriptions:function A(I){if(!I){I="";}var P=B,M=mstrmojo.hash,H;if(P[I]){delete P[I];}var O=E[I];if(O){for(H in O){var N=P[H],L=O[H],K;if(!N){continue;}for(K in L){var J=N[K];if(!J){continue;}delete J[I];if(M.isEmpty(J)){delete N[K];}}}}delete E[I];}});mstrmojo.publisher.NO_SRC="NO_SRC";mstrmojo.publisher.CONNECTIVITY_CHANGED_EVENT="CONNECTIVITY_CHANGED";mstrmojo.publisher.RECONCILE_END_EVENT="RECONCILE_END";}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var N=/\{\@(en@)?([^\}]+)\}/gm,J=/\</gm,R=/\>/gm,E=/\S/,Q=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],F=new RegExp("(\\"+Q.join("|\\")+")","g"),S={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;",u0009:"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},C={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#039;",'"':"&quot;"},M={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#039;":"'","&quot;":'"'},D={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#039;",'"':"&quot;","\u20ac":"&#8364;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&#039;":"'","&quot;":'"',"&#8364;":"\u20ac"};var L=function(V){if(V===null){return"null";}var W=typeof V;if(W!=="object"){return W;}if(V.length===undefined){return"object";}return"array";};var T={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function G(W,Z,Y){var V;Y=Y||[];if(!W){return"";}var X=[];for(V in Z){if(mstrmojo.array.indexOf(Y,V)===-1){X.push(V.k||V);}}return W.replace(new RegExp(X.join("|"),"g"),function(a){var b=Z[a];return b.v||b;});},trim:function P(V){return(V&&V.replace)?V.replace(/^\s+/,"").replace(/\s+$/,""):V;},startsWith:function U(W,V){return W.length>=V.length&&W.substring(0,V.length)==V;},ellipsize:function A(X,W){var V=this.trim(X.substr(0,(W||1)-1));if(V!==X){V+="&hellip;";}return V;},isEmpty:function I(V){return(V===null)||(V===undefined)||!(E.test(V));},regEscape:function O(V){return V.replace(F,"\\$1");},encodeXMLAttribute:function(V){return mstrmojo.string.multiReplace(V,S);},encodeHtmlString:function(W,V,X){if(!W||!W.replace){return W;}if(X){return mstrmojo.string.multiReplace(W,D);}return mstrmojo.string.multiReplace(W,C,V?[" "]:[]);},decodeHtmlString:function(W,V){return V?mstrmojo.string.multiReplace(W,K):mstrmojo.string.multiReplace(W,M);},htmlAngles:function(V){if(!mstrmojo.string.isEmpty(V)){V=String(V);return V.replace(J,"&lt;").replace(R,"&gt;");}return V;},apply:function H(V,X){if(!V){return"";}var W=this;return V.replace(N,function Y(b,c,d){var Z;try{Z=mstrmojo.hash.walk(d,X);}catch(a){}Z=(Z===null||Z===undefined)?"":Z;return(!!c)?W.encodeHtmlString(Z,true):Z;});},json2xml:function(V,k,l){if(!(k instanceof Array)){k=[k];}var W=l&&l.isSerializable,j=(l.convertBoolean!==false),o=l&&l.skipFunctions,h,b;var d=[],Z=[],c,Y,a;for(h=0,b=k.length;h<b;h++){var g=k[h];for(c in g){if(o&&typeof g[c]==="function"){continue;}if(W){var m=W(c,k,h);if(m!==true){if(m===false){continue;}else{if(m.att){d.push(m.att);}if(m.child){Z.push(m.child);}continue;}}}Y=g[c];a=L(Y);switch(a){case"array":var e,f;Z.push("<"+c+">");for(e=0,f=Y.length;e<f;e++){var X=l.getArrItemName(c,Y,e)||e;Z.push(this.json2xml(X,Y[e],l));}Z.push("</"+c+">");break;case"object":Z.push(this.json2xml(c,Y,l));break;case"string":d.push(c+'="'+mstrmojo.string.encodeXMLAttribute(Y)+'"');break;case"boolean":d.push(c+'="'+(j?(Y?"-1":"0"):Y)+'"');break;case"null":if(!l.skipNull){d.push(c+'="'+l.nullValue+'"');}break;default:d.push(c+'="'+Y+'"');break;}}}return"<"+V+" "+d.join(" ")+">"+Z.join("")+"</"+V+">";},escape4HTMLText:function B(c){if(!c||!c.replace){return c;}var Z=/"/gm;var X="&quot;";var d=/&/gm;var b="&amp;";var a=/</gm;var V="&lt;";var Y=/>/gm;var W="&gt;";return c.replace(d,b).replace(Z,X).replace(a,V).replace(Y,W);},parseUri:function(Z,W){W=W||T;var V=W.parser[((W.strictMode)?"strict":"loose")].exec(Z),Y={},X=14;while(X--){Y[W.key[X]]=V[X]||"";}Y[W.q.name]={};Y[W.key[12]].replace(W.q.parser,function(b,a,c){if(a){Y[W.q.name][a]=c;}});return Y;},removeSpecialChars:function(V){return V.replace(/[^a-zA-Z0-9]/g,"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash");var E=mstrmojo.func.wrapMethods;function B(L,I,K,H,J){return E({success:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("success",I.target,JSON.stringify(I.memo),JSON.stringify(M));}},complete:function(){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("complete",I.target,JSON.stringify(I.memo));}J.removeCallback(K,H);},failure:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("failure",I.target,JSON.stringify(I.memo),JSON.stringify(M));}}},L);}mstrmojo._CanProxyCallback=mstrmojo.provide("mstrmojo._CanProxyCallback",{_mixinName:"mstrmojo._CanProxyCallback",callbacks:null,isCallbackReceiver:false,newCallback:function D(O){return O;var K=this.callbacks,I=mstrmojo.hash.copy(O),P=(O.index!==undefined)?String(O.index):"index",N=arguments.callee.caller.arguments,L,J,M,H=O.method||"anonymous";if(!K){K=this.callbacks={};}if(!K[H]){K[H]={};}if(!this.isCallbackReceiver){for(J=0,M=N.length;J<M;J++){L=N[J];if(L&&L.target){I=B(I,L,H,P,this);break;}}}if(!O.method){I.proxy=this.getCallbackMemo();}K[H][P]=I;return I;},anonymous:function(J,K,I,H){if(!this.isCallbackReceiver){K=B(K,H,"anonymous","index",this);mstrApp.serverRequest(J,K,I);}},getCallback:function C(K,J){var H=J||"index",I=this.callbacks;return I&&I[K]&&I[K][H];},removeCallback:function G(K,J){var H=J||"index",I=this.callbacks;if(I&&I[K]){delete I[K][H];if(mstrmojo.hash.isEmpty(I[K])){delete I[K];}}},getCallbackMemo:function F(I,H){return{target:'mstrmojo.all["'+this.id+'"].receiveCallback',memo:{method:I||"anonymous",index:H||"index"}};},receiveCallback:function A(L,J,K){var M=J.method,I=J.index,H=this.getCallback(M,I);if(H&&L&&H[L]){H[L](K);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.Event=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Event",init:function A(B){if(B&&!B.name){B.name=B.type;}mstrmojo.hash.copy(B,this);},name:"",src:null});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var C=mstrmojo.hash,E=mstrmojo.array;function D(F){return function(G){F[G]=true;};}mstrmojo.rw.model.UpdateKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.UpdateKeysConfig",init:function B(){this.nodes=[];this.selectors={};this.objects={};}});mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig=function A(J){var F={},K={},G={},I={};E.forEach(J,function H(M){var L=M.partialUpdate;if(L){E.forEach(L.nodes,D(K));E.forEach(L.selectors,D(G));E.forEach(L.objects,function(N){if(!I[N.id]||N.flag>I[N.id].flag){I[N.id]=N;}});delete M.partialUpdate;}E.forEach(M.actions,H);});if(!C.isEmpty(K)){F.nodes=C.keyarray(K);}if(!C.isEmpty(G)){F.selectors=C.keyarray(G);}if(!C.isEmpty(I)){F.objects=C.valarray(I);}return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var E=mstrmojo.hash;var B=function(G){return(mstrmojo.now()-G.getTime());};mstrmojo.storage.DOMStorage=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.storage.DOMStorage",mIsSupported:false,mStorageObj:null,itemTimeToLive:3600,init:function F(G){E.copy(G,this);return this;},isSupported:function C(){return this.mIsSupported;},checkVersion:function A(G){var H=this.getItem("__version__");if(H&&H<G){mstrmojo.dbg("DOMStorage data is old - clearing, v="+H);this.clear();}this.setItem("__version__",G,-1);return this;},length:function(){return(this.mIsSupported?this.mStorageObj.length:0);},_keyExpired:function D(G){return(G&&(G.ts>0)&&(mstrmojo.now()>G.ts));},key:function(G){return(this.mIsSupported?this.mStorageObj.key(G):null);},getItemAsString:function(H){var G=this.getItem(H);if(G){if(typeof G=="object"){G=JSON.stringify(G);}else{G=G+"";}}return G;},getItem:function(H){var G=null;if(this.mIsSupported){var J=this.mStorageObj.getItem(H);if(J){try{J=JSON.parse(J);}catch(I){}if(this._keyExpired(J)){this.removeItem(H);}else{G=J.data;}}}return G;},setItem:function(H,J,G){G=G||this.itemTimeToLive;try{if(this.mIsSupported){this.mStorageObj.removeItem(H);var L=(G>0)?(mstrmojo.now()+(G*1000)):-1;var I={ts:L,data:J};this.mStorageObj.setItem(H,JSON.stringify(I));}}catch(K){if(K!==QUOTA_EXCEEDED_ERR){throw K;}}finally{}return this;},removeItem:function(G){if(this.mIsSupported){this.mStorageObj.removeItem(G);}return this;},clear:function(){if(this.mIsSupported){this.mStorageObj.clear();}return this;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array;function A(E){var D=(E&&E.gts&&E.gts.col)||[],G=(E&&E.gts&&E.gts.row)||[];var F=C.filter(D.concat(G),function(H){return H.otp===-1;})[0];return{tpltProp:E.prop,mxProp:C.map((F&&F.es)||[],function(H){var I={};I[H.oid]=mstrmojo.hash.copy(H.prop,{n:H.n,t:H.otp});return I;})};}mstrmojo._IsDocumentTemplate=mstrmojo.provide("mstrmojo._IsDocumentTemplate",{_mixinName:"mstrmojo._IsDocumentTemplate",gridInfo:null,tmsProps:null,update:function B(D){if(D&&D.data){this.gridInfo=D.data.gsi;this.tmsProps=A(D.data);}if(this._super){return this._super(D);}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(P,O,R){var N,M;for(M in P){N=P[M];if(N.v){var Q=N.v.split(";");if(Q&&Q.length>1){Q[1]=O;if(R&&Q.length>2){Q.pop();}N.v=Q.join(";");}}}return P;},buildElemsCountStr:function K(P,N){P=(!P||!P.length)?[]:P;N=(!N||!N.length)?[]:N;var O=P.length,M=N.length;if(I.find(N,"v",D)>-1){M-=1;}if(I.find(N,"v",C)>-1){M-=1;}if(I.find(P,"v",D)>-1||I.indexOf(P,D)>-1){O=M;}return this.buildElemsCountStrByNum(O,M);},buildElemsCountStrByNum:function K(N,M){if(N===M){if(M===0){return"";}return M.toString();}else{if(M===0){return N+" "+mstrmojo.desc(514);}else{if(N>M){return"("+M+")";}}}return mstrmojo.desc(4891,"").replace("##",String(N)).replace("###",String(M));},browseElements:function G(O,P,N){var M={doNotHold:!(N&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(N,P),O,M);},getIdPresentation:function J(P){if(!!P){var O=P.charAt(0),M,N,Q;if((O>="g"&&O<="w")||(O>="V"&&O<="Z")){N=false;for(Q=1;Q<P.length;++Q){if(N){N=false;}else{switch(P.charAt(Q)){case";":return"terseLong";case"\\":N=true;break;}}}return"terse";}if(O>="B"&&O<="Q"){if(P.length>2){M=P.charAt(1);if(M>="A"&&M<="Q"){if(P.charAt(2)===":"){return"oldLong";}}}}if(P.length>=33&&P.charAt(32)===":"){return"old";}}return null;},isNullElem:function H(M){if(!M){return true;}var P=this.getIdPresentation(M),N=false,O;switch(P){case"terse":case"terseLong":O=M.substring(1,M.length).split(";");N=O[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":N=M.indexOf(this.OLD_NULL)>-1;break;}return N;},isNonGroupNull:function(O){var M=O.eid||(O._e&&O._e.id),N=M&&M.split(":")[0];return N&&N===this.NON_GROUP_NULL;},getAttributeId:function L(O){var N,M;if(O){M=O.split(";");N=M[1];}return N;},getElementValue:function A(N){var O,M;if(N){M=N.split(";");if(M.length>2){O=M[0]+" "+M[2];}else{O=M[0];}}return O;},isAttributeIdsLinked:function E(N,M,O){var Q=false,P=B.keyarray(O);I.forEach(P,function(R){if(R===N){I.forEach(O[R],function(S){if(S===M){Q=true;return false;}});}if(Q){return false;}});return Q;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000"});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var H=mstrmojo.array,B=mstrmojo.hash,J=B.isEmpty;var G=1;function D(Q){return(typeof Q==="object")?Q:{};}function E(R,Q){B.forEach(Q,function(S,V){var T=R[V];if(T===undefined){delete Q[V];return true;}S=Q[V]=D(S);T=R[V]=D(T);if(J(S)&&J(T)){throw (G);}else{if(J(T)){delete R[V];if(J(R[V])){E(R,Q);}}else{if(J(S)){delete R[V];if(J(R[V])){E(R,Q);}}else{try{E(R[V],Q[V]);}catch(U){switch(U){case G:R[V]=Q[V]={};break;}}}}}});}function I(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=U.include,W=U.exclude;if(J(T)||J(W)){return true;}if(!J(T)&&!J(W)){try{E(W,T);}catch(V){switch(V){case G:R[S]={};break;}}}});});return Q;}function F(S,R,Q){B.forEach(S,function(U,T){if(U===true||J(U)){Q.push(R+T);}else{F(U,R+T+".",Q);}});return Q;}function P(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=[];F(U.include,"",T);F(U.exclude,"!",T);R[S]=T.join(";");});});return Q;}function K(Q,R){B.forEach(Q,function(S,U){var T=R[U];if(T!==undefined){if(S!==true&&T!==true){K(S,T);}else{if(S===true&&T!==true){R[U]=true;}else{if(S!==true&&T===true){Q[U]=true;}}}}});}function L(R,S){var Q=true;B.forEach(R,function(Y,T){var W=S[T];if(W){var U=Y.include,Z=Y.exclude,X=W.include,V=W.exclude;if(!J(V)&&!J(Z)){Q=false;return Q;}if(!J(X)&&!J(U)){K(X,U);}}return Q;});return Q;}function C(S,Q){Q=Q||{};if(S){var R=Q;H.forEach(S.split("."),function(W,U,T,V){R[W]=V?true:{};R=R[W];});}return Q;}mstrmojo.rw.model.RetrievalKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.RetrievalKeysConfig",init:function M(){this.nodes=[];this.filters={};},addNode:function A(R,T){var S=this.filters,Q=S[R];if(!Q){this.nodes.push(R);Q=S[R]={data:{},defn:{}};}if(T){if(L(Q,T)){S[R]=B.mergeHashes(Q,T);}else{throw ("The new filters for node key ## cannot be merged with the filters currently defined".replace("##",R));}}return this;}});mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig=function O(T){var Q={},U={},S={};H.forEach(T,function R(W){var V=W.partialRetrieval;if(V){H.forEach(V.nodes,function(X){U[X]=true;});S=B.mergeHashes(S,V.filters);delete W.partialRetrieval;}H.forEach(W.actions,R);});if(!J(U)){Q.nodes=B.keyarray(U);}if(!J(S)){Q.filters=P(I(S));}return Q;};mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters=function N(R){var Q=function(T){var S={};B.forEach(T,function(W,V){var U=S[V]={serialized:W,include:{},exclude:{}};H.forEach(W.split(";"),function(Y){var X=Y.indexOf("!")===0;Y=X?Y.slice(1):Y;C(Y,X?U.exclude:U.include);});});return S;};return{data:Q(R.data),defn:Q(R.defn)};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");mstrmojo.vi.ui.rw.SelectionType={EMPTY:"empty",ATTS:"att",METRICS:"metric",COL_HEADERS:"col-headers",ROW_HEADERS:"row-headers",METRIC_VALUES:"metric-values"};var G=function(c){var b=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return c.k+"-"+b;},P={},T=mstrmojo.hash,Y=mstrmojo.array,V=function(d){var b=T.keyarray(d).sort(),c=[],e;Y.forEach(b,function(f){e=[];Y.forEach(d[f],function(g){e.push(this.model.getNormalizedFormElementId(g.id));},this);c.push(f+"-"+e.sort().join("@"));},this);return c.join("#");},a=function(b){var c=V.call(this,b);if(!this._viSelections[c]){this._viSelections[c]=b;P[G(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}},F=function(c){var d=V.call(this,c),b=this._viSelections[d];if(b){delete this._viSelections[d];P[G(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}return b;},N=function(c,b,e){var d={};d[c]=[{id:b,n:e}];return d;},R=mstrmojo.vi.ui.rw.SelectionType;mstrmojo.vi.ui.rw._HasVisSelections=mstrmojo.provide("mstrmojo.vi.ui.rw._HasVisSelections",{_mixinName:"mstrmojo.vi.ui.rw._HasVisSelections",init:function(b){if(this._super){this._super(b);}this._viSelections={};},update:function I(c){var b=true;if(this._super){b=this._super(c);}T.copy(P[G(this)],this);return b;},onSelectionChange:function O(b){if(this._super){this._super(b);}},_viSelections:{},_selectionType:R.EMPTY,_cellSelections:[],getSelectionType:function(){return this._selectionType;},isSingleAttrSelection:function(){var c=null,b;if(this.getSelectionType()===R.ATTS){b=this.getSelections();if(b.length>1){return !b.some(function(d){if(!c){c=d[0].tid;return false;}return c!=d[0].tid;},this);}return true;}return false;},isSingleSelection:function(){return(this._viSelections&&T.keyarray(this._viSelections).length===1);},getSelectionSize:function X(){return(this._viSelections&&T.keyarray(this._viSelections).length)||0;},getSelectionHash:function H(){return this._viSelections;},getSelections:function L(){var b=[],c;T.forEach(this._viSelections,function(d){c=[];b.push(c);T.forEach(d,function(e,f){Y.forEach(e,function(g){c.push({tid:f,eid:g.id,v:g.n});});});});return b;},isMetricValueSelected:function J(b){return !!this._viSelections[V.call(this,b)];},isAttSelected:function C(c,b){return this.isMetricValueSelected(N(c,b));},addAttributeSelection:function Q(c,b,d){if(this._selectionType!==R.ATTS){this.clearSelections();this._selectionType=R.ATTS;}var e=N.call(this,c,b,d);a.call(this,e);return e[c];},removeAttributeSelection:function Z(c,b){return F.call(this,N.call(this,c,b));},addMetricValueSelection:function M(b){if(this._selectionType!==R.METRICS){this.clearSelections();this._selectionType=R.METRICS;}a.call(this,b);},addAttrOrMetricCellSelection:function D(d,c,b){this._cellSelections.push({parentElementIds:d,target:{selectionType:b?R.ATTS:R.METRICS,id:c}});},getCellSelections:function A(){var b=this;b.clearCellSelections();var c=function(e,d){var f=[];if(e){while(d.hasOwnProperty("_p")){f.push(d._p._e.id);d=d._p;}}else{var g=b.model.getCellDataUnion(d);Y.forEach(g,function(h){f.push(h.eid);});}return f;};Y.forEach(b.highlights,function(h){var d=b.getCellForNode(h),i=!d.hasOwnProperty("mix")&&d._e&&!d.fi,g=c(i,d);if(i){var e=d._e.id;b.addAttrOrMetricCellSelection(g,e,true);}else{var f=d._tp._e.oid;b.addAttrOrMetricCellSelection(g,f,false);}});return this._cellSelections;},removeMetricValueSelection:function U(b){return F.call(this,b);},clearSelections:function B(){if(this._super){this._super();}this._viSelections={};this._selectionType=R.EMPTY;},clearCellSelections:function E(){this._cellSelections=[];},clearSelectionsCache:function K(){P={};},clearUnitSelections:function B(c){if(this._super){this._super();}var b={};T.forEach(this._viSelections,function(e,d){if(T.keyarray(e)[0]!==c){b[d]=e;}});this._viSelections=b;},endSelections:function S(){P[G(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};this.onSelectionChange(this.getSelectionHash());},addSelectionsFromExpression:function W(d){this.clearSelections();this._selectionType=d.type;var b=this,c=function(j){var k=20,h=19,i=function(l){return l.nds.length===1?k:l.fn;},g=function(l){return parseInt(l.et,10)===5||parseInt(i(l),10)===h;},e=function(l){Y.forEach(l.es,function(m){b.addAttributeSelection(l.a.did,m.v,m.n);});},f=function(n){var m={},l=function(o){Y.forEach(o.es,function(p){T.copy(N.call(b,o.a.did,p.v,p.n),m);});};if(n.nds){Y.forEach(n.nds,l);}else{if(n.es){l(n);}}b.addMetricValueSelection(m);};if(g(j)){j={nds:[j]};}Y.forEach(j.nds,function(l){if(g(l)){if(d.type===R.ATTS){e(l);}else{f(l);}}else{c(l);}});};c(d.data);}});mstrmojo.vi.ui.rw._HasVisSelections.VisSelectionType=null;}());mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var S=mstrmojo.hash,H="containerNode",G="auto",Q="px";var I={v:G,c:undefined,sv:G};function E(c,f,e){var g=this._layoutWidgets[f],j=c.slot||H,h=g.f,i=g.p,d=(h&&h[j]!==undefined),b=(i&&i[j]!==undefined);if(j&&((!e&&d)||b)){return d?h[j]:(g.x*parseInt(i[j],10)/100)+Q;}return c[(f==="h")?"height":"width"];}function K(g,d,b){if(g.ignoreLayout){return ;}var c=(d===G)||d==="NaNpx",f=(b===G)||b==="NaNpx";var e=g.getLayoutOffsets&&g.getLayoutOffsets();if(e){if(!c){d=(parseInt(d,10)-e.h)+Q;}if(!f){b=(parseInt(b,10)-e.w)+Q;}}if(g.setDimensions){g.setDimensions(d,b);}else{if(g.set){if(!c){g.set("height",d);}if(!f){g.set("width",b);}}}}function Z(e){var c=this.children,g,k;for(g=0,k=(c&&c.length)||0;g<k;g++){var d=c[g],l=d.slot||H;if(l){var j=E.call(this,d,"h",e),m=E.call(this,d,"w",e);this.setSlotDimensions(l,j,m);K(d,j,m);var b=E.call(this,d,"h",e),f=E.call(this,d,"w",e);if(b!==j||f!==m){K(d,b,f);}this.setSlotDimensions(l,b,f);}}this.afterLayout();}function B(){var c=this.children,b=this._layoutWidgets;S.forEach(this.slotNames,function(g,i){if(!g||this.skipsSlotLayout(i)){return ;}var f=(b.h&&b.h.getSlotSizeInfo(i,c))||I,d=(b.w&&b.w.getSlotSizeInfo(i,c))||I,e=f.c||d.c;mstrmojo.array.forEach(e,function(h){K(h,f.v,d.v);});this.setSlotDimensions(i,f.sv,d.sv);},this);this.afterLayout();}function D(c){var b=this.layoutConfig.xt?B:Z;b.call(this,c);}function T(i,e,g){var h=i.slot||H,f=e&&e.a;if(!f||f[h]===undefined){return ;}var b=this[h]["offset"+g],c=f[h];if(b===c){return ;}e.x-=(b-c);f[h]=b;}function J(b){this.beforeLayout();var c=this._layoutWidgets,d=b.src;T.call(this,d,c.h,"Height");T.call(this,d,c.w,"Width");D.call(this,true);}function O(d,g){if(!d){return null;}var b=this.children,q=g.toLowerCase(),h=parseInt(this[q],10),k=h,m={},o={},f={},c={},n={},j,l,e,s,p;for(p in d){if(!d.hasOwnProperty(p)){continue;}s=d[p];if(s.match(/px$/)){h-=parseInt(s,10);m[p]=s;}else{if(s.match(/%$/)){o[p]=s;}else{if(s.match(/all/)){n[p]=k;}else{f[p]=s;}}}}if(!S.isEmpty(f)&&!S.isEmpty(o)){for(j=0,l=(b&&b.length)||0;j<l;j++){e=b[j];p=e.slot||H;if(p&&f[p]&&!e.ignoreLayout){if(e.hasRendered){c[p]=this[p]["offset"+g];h-=c[p];}else{c[p]=0;e.attachEventListener((e instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,J);}}}}return{f:S.isEmpty(m)?undefined:m,p:S.isEmpty(o)?undefined:o,a:S.isEmpty(c)?undefined:c,n:S.isEmpty(n)?undefined:n,x:h,getSlotSizeInfo:function(z,u){if(!d[z]){return I;}var t=mstrmojo.array.filter(u,function(AB){var AA=AB.slot;return AA===z||(z===H&&!AA);}),x,y;var i=m[z];if(i){y=i;}var w=o[z];if(w){y=(this.x*parseInt(w,10)/100)+Q;}if(f[z]){y=c[z];if(y){y+=Q;}else{y=G;}x=G;}var v=n[z];if(v){y=x=v+Q;}y=y||"0px";return{v:y,c:t,sv:x||y};}};}function R(c){var b=this.domNode;if(!b||!this.layoutConfig){return ;}b.style[c]=this[c];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,layoutConfig:null,init:function V(b){this._super(b);this.layoutConfig=S.clone(this.layoutConfig);},preBuildRendering:function C(){var d=this.cssText||"";var b=this.height;if(b&&b!==G){d+="height:"+this.height+";";}var c=this.width;if(c&&c!==G){d+="width:"+this.width+";";}this.cssText=d;return(this._super)?this._super():true;},postBuildRendering:function W(){this.doLayout();return this._super();},modifyLayoutConfig:function Y(d,c){var b=this.layoutConfig=this.layoutConfig||{};b.h=S.copy(d,b.h);b.w=S.copy(c,b.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function P(d,b){var c=this._super(d,b);if(d==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return c;},doLayout:function A(){var b=this.layoutConfig;if(!b||(this.height===G&&this.width===G)){return ;}if(b.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:O.call(this,b.h,"Height"),w:O.call(this,b.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(b){this.setDimensions(b.h,b.w);return true;},onwidthChange:function N(){R.call(this,"width");},onheightChange:function M(){R.call(this,"height");},skipsSlotLayout:function(b){return false;},adjustParentDimensions:function L(){var c=this.parent,b=c&&c._layoutWidgets;if(b){T.call(c,this,b.h,"Height");T.call(c,this,b.w,"Width");}},setDimensions:function U(e,c){var d=(e===G)||e==="NaNpx",f=(c===G)||c==="NaNpx";if((!d&&parseInt(this.height,10)!==parseInt(e,10))||(!f&&parseInt(this.width,10)!==parseInt(c,10))){if(!d){this.height=e;}if(!f){this.width=c;}var b=this.domNode,g=b&&b.style;if(g){if(!d){g.height=e;}if(!f){g.width=c;}this.doLayout();}return true;}return false;},setSlotDimensions:function X(e,d,c){var b=this[e]&&this[e].style;if(!b){return ;}if(d!==G&&d!==undefined&&d!=="NaNpx"&&b.height!==d&&parseInt(d)>=0){b.height=d;}if(c!==G&&c!==undefined&&c!=="NaNpx"&&b.width!==c&&parseInt(c)>=0){b.width=c;}}});mstrmojo._HasLayout.getSlotSize=function a(e,f){var c=e&&e.prototype.layoutConfig;if(c){var d=c.h,b=c.w;return{h:(d&&d[f])||undefined,w:(b&&b[f])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],t=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-t.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=t.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var s=W.concat(U),Y=this.addSelect(s,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo,D=A.array;mstrmojo.vi.util.TemplateUtils=mstrmojo.provide("mstrmojo.vi.util.TemplateUtils",{getTemplateUnits:function B(F){var E=[].concat(F.mx);(F.rows||[]).concat(F.cols||[]).forEach(function(G){if(G.did!=="-1"){E.push({did:G.did,t:G.t,n:G.n});}});return E;},findUnitsById:function C(H,F){var E=mstrmojo.vi.util.TemplateUtils.getTemplateUnits(H),G=[];D.ensureArray(F).forEach(function(K){var J=D.find(E,"did",K),I=J>-1?E[J]:null;if(I){G.push(I);}});return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var E="*",A=".",C="-",J="_",H="<";var M=new RegExp("[\\"+E+"\\"+A+"\\"+C+"\\"+J+"\\"+H+"]","g"),G=E+"$&";mstrmojo.Serializer={scriptClass:"mstrmojo.Serializer",serializeValueGroup:function F(B){mstrmojo.array.forEach(B,function(D,K){B[K]=mstrmojo.Serializer.serializeValues(D);});return C+this.serializeValues(B)+J;},serializeValues:function I(D){var B=[];mstrmojo.array.forEach(D,function(K){if(typeof K==="Boolean"){K=K?"1":"0";}B.push(String(K).replace(M,G));});return B.join(A);}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var C=function(R){var Q=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return R.k+"-"+Q;},E={},L=mstrmojo.array;mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",{_mixinName:"mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",postBuildRendering:function G(){this._super();this.setup();if(!this.getExp()){if(E[C(this)]){this.highlight.apply(this,E[C(this)]);}else{this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},getExp:function(){var Q=this.model.data,R=Q&&Q.sc&&Q.sc.exp;return R;},clearsBrushingOnHighlight:true,brushSub:null,clearSub:null,getAssociatedNodes:function B(){var Q=this.defn.an;return Q&&Q.length>0?Q:[];},hasAssociatedNodes:function K(){var Q=this.getAssociatedNodes();return Q.length>0;},getDocModelForEvent:function P(){return this.model&&this.model.docModel;},setup:function H(){var Q=this.getDocModelForEvent(),R=this.id;if(Q){[this.brushSub,this.clearSub].forEach(function(S){if(S){S.clear();}});this.brushSub=Q.attachEventListener("brushing",R,this.onBrushing);this.clearSub=Q.attachEventListener("clearBrush",R,this.onClearBrushing);}},handlesMultiSelection:function I(){return(this._super&&this._super())||this.getAssociatedNodes().length>0;},getHighlightKeys:function F(){var R=[],Q=this.getAssociatedNodes();Q.forEach(function(S){R.push(S.k);});return R;},onSelectionChange:function J(R){var S=false;if(this._super){S=this._super(R);}var Q=this.getDocModelForEvent();if(this.clearsBrushingOnHighlight){Q.raiseEvent({name:"clearBrush",from:this});}if(this.handlesMultiSelection()&&!S){Q.raiseEvent({name:"brushing",from:this,keys:this.getHighlightKeys()});return true;}return false;},onBrushing:function A(R){var Q=R.keys.slice();if(Q.indexOf(this.k)!==-1){if(this.highlight){var S=R.from;this.highlight(S.getSelectionType(),S.getSelectionHash());Q.push(S.k);this.getDocModelForEvent().raiseEvent({name:"clearBrush",from:this,excludeKeys:Q});}else{throw new Error(this.scriptClass+" must implement highlight method.");}}},onClearBrushing:function O(R){var Q=false;if(L.indexOf(R.excludeKeys,this.k)===-1){if(this._super){Q=this._super(R);}if(!Q){var S=this.getAssociatedNodes();if(L.find(S,"k",R.from.k)!==-1){this.clearSelections(true);}}}return true;},highlight:function D(){E[C(this)]=arguments;if(this._super){this._super.apply(this,arguments);}},clearSelections:function N(){delete E[C(this)];if(this._super){this._super.apply(this,arguments);}},updateAssociatedNodesOnMove:function M(){this.clearSelections(true);this.endSelections();delete this.defn.an;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo.array;mstrmojo.fe._IsRelationTreeNode=mstrmojo.provide("mstrmojo.fe._IsRelationTreeNode",{createSetHtml:'<span class="mstrmojo-textset mstrmojo-create-set-text" mstrAttach:click >'+mstrmojo.desc(12034,"Create a Set")+"</span>",syncRootOperator:function(){var F=this.parent,H=function(){var J=this.parent,I=[];if(J){I=J.ctxtBuilder.itemWidgets;}return I;},E,D,B,C,G;if(F){E=H.call(this);B=E.length;D=A.find(E,"noRelationOperator",true)!==-1;for(C=0;C<B;C++){G=E[C];G&&G.set("noRelationOperator",D);}this.set("noRelationOperator",D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array;function B(){var H=this.buildConfig=this.buildConfig||{};H.pk=this.k;H.fgk=this.defn&&this.defn.fgk;return H;}mstrmojo._HasBuilder={builder:null,postBuildRendering:function D(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function F(){return this.model.getChildren(this.node,false);},buildChildren:function E(H){if(!this.builder||!this.model){return false;}var J=this.children;if(J&&J.length){this.set("children",[]);}var I=this.builder.build(this.getChildren(),this.model,B.call(this));if(!H){this.addChildren(I);}this.builtChildren=true;return H?I:true;},rebuildChildren:function C(K){var H=this.children.slice(0),I=this.model,J=[];K=K||H.slice(0);K.forEach(function(P){var N=G.indexOf(H,P),O=P.k;if(N===-1){throw new Error("Invalid child requested rebuild in mstrmojo._HasBuilder::rebuildChild.");}this.removeChildren(P);P.destroy();J.push(O);},this);var L=I.getChildrenByKey(this.node,false,J);var M=this.builder.build(L,I,B.call(this));this.addChildren(M);return M;},rebuildChild:function A(H){return this.rebuildChildren([H])[0];}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var H="#000000",E=Math.round;function N(X){return("0"+parseInt(X,10).toString(16)).slice(-2);}mstrmojo.color=mstrmojo.provide("mstrmojo.color",{rgbStr2rgb:function V(X){return X.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i).slice(1);},rgbStr2hex:function F(X){if(X.indexOf("rgb")>=0){var Y=this.rgbStr2rgb(X);return"#"+this.rgb2hex(Y[0],Y[1],Y[2]);}return X;},rgb2hex:function B(Z,Y,X){return N(Z)+N(Y)+N(X);},rgb2hsv:function U(X,e,i){var a=Math.min(X,e,i),j=Math.max(X,e,i),c=0,m,l;l=j/255;m=(j!==0)?(parseFloat(j)-parseFloat(a))/parseFloat(j):0;if(m===0){c=0;}else{var f=j-a,Y=(j-X)/f,Z=(j-e)/f,k=(j-i)/f;if(X===j){c=k-Z;}else{if(e===j){c=2+Y-k;}else{c=4+Z-Y;}}c=c/6;if(c<0){c=c+1;}}return[E(c*360),E(m*100),E(l*100)];},rgb2hsl:function D(X,c,d){X/=255;c/=255;d/=255;var e=Math.max(X,c,d),Z=Math.min(X,c,d),Y=(e+Z)/2,a,i;if(e===Z){a=i=0;}else{var f=e-Z;i=Y>0.5?f/(2-e-Z):f/(e+Z);switch(e){case X:a=(c-d)/f+(c<d?6:0);break;case c:a=(d-X)/f+2;break;case d:a=(X-c)/f+4;break;}a/=6;}return[a,i,Y];},hsl2rgb:function C(d,i,c){var a=function a(h,g,b){if(b<0){b+=1;}if(b>1){b-=1;}if(b<1/6){return h+(g-h)*6*b;}if(b<1/2){return g;}if(b<2/3){return h+(g-h)*(2/3-b)*6;}return h;},X,e,f;if(i===0){X=e=f=c;}else{var Y=c<0.5?c*(1+i):c+i-c*i,Z=2*c-Y;X=a(Z,Y,d+1/3);e=a(Z,Y,d);f=a(Z,Y,d-1/3);}return[E(X*255),E(e*255),E(f*255)];},hsl2hex:function I(Z,Y,X){return"#"+mstrmojo.array.map(this.hsl2rgb(Z,Y,X),function(a){return N(a);}).join("");},hex2rgb:function P(a){var X=this.fixFullHexValue("#"+a.replace("#","")),Y=[],Z;X=X.replace("#","");for(Z=0;Z<3;Z++){Y.push(parseInt(X.substr(Z*2,2),16));}return Y;},hex2bgr:function K(X){return this.hex2rgb(X).reverse();},hex2hsv:function S(Y){var X=this.hex2rgb(Y);return this.rgb2hsv(X[0],X[1],X[2]);},hex2hsl:function W(X){return this.rgb2hsl.apply(this,this.hex2rgb(X));},hsv2rgb:function G(f,o,m){f=f/360;o=o/100;m=m/100;var X,j,l;if(o===0){X=m*255;j=m*255;l=m*255;}else{var a=f*6;if(a===6){a=0;}var e=Math.floor(a);var Z=m*(1-o);var Y=m*(1-o*(a-e));var n=m*(1-o*(1-(a-e)));var k,c,d;switch(e){case 0:k=m;c=n;d=Z;break;case 1:k=Y;c=m;d=Z;break;case 2:k=Z;c=m;d=n;break;case 3:k=Z;c=Y;d=m;break;case 4:k=n;c=Z;d=m;break;default:k=m;c=Z;d=Y;break;}X=k*255;j=c*255;l=d*255;}return[E(X),E(j),E(l)];},hsv2hex:function L(a,Z,X){var Y=this.hsv2rgb(a,Z,X);return this.rgb2hex(Y[0],Y[1],Y[2]);},getContrastingColor:function M(a,Y,X){var Z=this.hex2rgb(a);return(((Z[0]*299)+(Z[1]*587)+(Z[2]*114))/1000<125)?Y:X;},getHighlightColor:function R(f,d){var X,e,h,i,j=this.hex2rgb(!d?"#FFCE7F":"#EFE6D8"),c=parseInt(f[0],10),Z=parseInt(f[1],10),l=parseInt(f[2],10),a=parseInt(j[0],10),Y=parseInt(j[1],10),k=parseInt(j[2],10);X=(c*a)/255;e=(Z*Y)/255;h=(l*k)/255;i=c*0.3+Z*0.59+l*0.11;if(i<85){X=X+(63*(85-i)/85);X=X>255?255:X;e=e+(63*(85-i)/85);e=e>255?255:e;h=h+(63*(85-i)/85);h=h>255?255:h;}return"#"+this.rgb2hex(E(X),E(e),E(h));},get3DBorderColor:function Q(Z,d){var Y=parseInt(Z[0],10)*0.3+parseInt(Z[1],10)*0.59+parseInt(Z[2],10)*0.11;var c=parseInt(Z[0],10);var a=parseInt(Z[1],10);var X=parseInt(Z[2],10);switch(d){case"light":if(Y>150){c=c*0.9;a=a*0.9;X=X*0.9;}else{c=c*0.6+102;a=a*0.6+102;X=X*0.6+102;}break;case"dark":if(Y>10){c=c*0.4;a=a*0.4;X=X*0.4;}else{c=c*0.8+30;a=a*0.8+30;X=X*0.8+30;}break;}return"#"+this.rgb2hex(E(c),E(a),E(X));},encodeColor:function J(X,Y){if(Y!==undefined&&(X===null||X.length===0||X==="undefined")){X=Y;}if(X==="transparent"){return -1;}if(parseInt(X,10)===-2){return -2;}if(X.substring(0,1)==="#"){X=X.substring(1);}return parseInt(X.substring(4)+X.substring(2,4)+X.substring(0,2),16);},decodeColor:function A(X){X=parseInt(X,10);if(X===0){return H;}var Y=16777216+(X&255)*65536+(X&65280)+(X&16711680)/65536;return"#"+Y.toString(16).substring(1).toUpperCase();},fixFullHexValue:function T(X){if(X&&X.length===4){return X.replace(/([0-9a-f])/ig,"$1$1");}return X;},findMidColorHex:function O(a,Z){var b=this.hex2rgb(a),X=this.hex2rgb(Z),Y=[];b.forEach(function(c,d){Y.push(parseInt((c+X[d])/2,10));});return("#"+this.rgb2hex(Y[0],Y[1],Y[2]));}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array,E=mstrmojo.desc(2412,"Default"),H=mstrmojo.desc(3433,"Font"),B=mstrmojo.desc(3434,"Number"),C=mstrmojo.desc(3435,"Alignment"),A=mstrmojo.desc(2886,"Borders"),F=mstrmojo.desc(3905,"Background");var L=[{n:E,v:"pru"}];G.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings"],function(M){L.push({n:M,v:M});});function K(N,M,O){return(M&&M>=N)?K(N,M-O,O).concat(M):[];}var J=K(2,12,1);J=J.concat(K(14,24,2));J=J.concat(K(36,48,12));J=J.concat(K(72,72,1));var D=[{n:E,v:"pru"}];G.forEach(J,function(M){D.push({n:String(M),v:String(M)});});mstrmojo._FormatDefinition={Formats:[{n:H},{n:B},{n:C},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:B},{n:C},{n:H},{n:A},{n:F}],MetricHeaderFormats:[{n:B},{n:C},{n:H},{n:A},{n:F},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:L,Sizes:D,SizesInVI:D.slice(7,19),Styles:[{n:E,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:E,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:"-1,234.12",v:1,f:"#,##0.00"},{n:"-1,234.12",r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:"1,234.12",r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:"(1,234.12)",v:3,f:"#,##0.00;(#,##0.00)"},{n:"(1,234.12)",r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:"-$1,234.12",v:1,f:'"$"#,##0.00'},{n:"-$1,234.12",r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:"$1,234.12",r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:"($1,234.12)",v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:"($1,234.12)",r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/7"),v:"m/d"},{n:mstrmojo.desc(2232,"04/07"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/7/98"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/07/98"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/07/1998"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236,"7-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"7-Apr-98"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-98"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '98"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 1998"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 7, 1998"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/07/98 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/07/98 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:E,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:E,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(2265,"Double"),v:6}],extractModel:function(O,Q,N){var S=N||this.DefaultFormat,R;for(R in O){var M=O[R];if(!M.attachEventListener){if(!mstrmojo.hash.isEmpty(M)){Q[R]=M;}}else{var P;for(P in M){if(S[R]&&S[R][P]){if(!Q[R]){Q[R]={};}Q[R][P]=M[P];}}}}},getAvailableFonts:function I(){var M={success:function(O){if(O.name==="fontPicker"){var N=[{n:E,v:"pru"}];mstrmojo.array.forEach(O.shortcuts,function(P){N.push({n:P.attributes[1].value,v:P.attributes[1].value});});mstrmojo._FormatDefinition.Families=N;}}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,M,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);},getStandardFormat:function(N,M){var P=mstrmojo.hash.clone(M||this.DefaultFormat),O;N=N||{};for(O in P){N[O]=N[O]||{};}for(O in N){if(!N[O].attachEventListener){N[O]=mstrmojo.hash.make(N[O],mstrmojo.Obj);}}return N;},saveFormatModel:function(Q,W,N,X){var V=X||this.DefaultFormat,S,M;for(S=0;S<N.length;S++){var R=N[S],P=W[R]||null,U=Q[R];if(U===undefined){delete W[R];continue;}for(M in V){var T=V[M],O;if((!P&&!U)||(P&&!P[M]&&!U[M])){continue;}for(O in T){if(U[M]===undefined||U[M]===""||U[M][O]==="pru"||U[M][O]===undefined){if(P&&P[M]&&(P[M][O]!==undefined&&P[M][O]!==null&&P[M][O]!=="pru")){P[M][O]="pru";}}else{P=P||{};P[M]=P[M]||{};P[M][O]=U[M][O];}}}if(P){W[R]=P;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Header");mstrmojo.models.template.Headers=mstrmojo.declare(null,null,{init:function D(K){var O=this.isRow=K.isRow,J=this.data=K.data,L=J.gts,G=J.ghs,F=this.hs=O?G.rhs:G.chs,M=this.i=K.i,N=0,I;this.titles=O?L.row:L.col;this.headers=F.items&&F.items[M]&&F.items[M].items;if(O&&this.headers){N=this.titles.length-this.headers.length;if(N){for(I=M-1;I>=0;I--){var E=F.items[I].items,H=E.length-this.headers.length;if(H>0){this.headers=E.slice(0,H).concat(this.headers);if(this.titles.length===this.headers.length){break;}}}}}},size:function B(){var E=this.headers;return(!E?0:E.length);},getHeader:function C(H){var F=this.headers,G=F&&F[H],E=H;if(G&&mstrApp&&mstrApp.isVI){E=isNaN(G.tui)?G.ui:G.tui;}return G&&new mstrmojo.models.template.Header({h:G,t:this.titles[this.isRow?H:this.i]});},getCSS:function A(F){var E=this.headers;return E&&this.data.css[E[F].cni].n;},getHeaderCell:function(F){var E=this.headers;return E&&E[F];}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Title");mstrmojo.models.template.Titles=mstrmojo.declare(null,null,{init:function D(G){var F=this.gridData=G.data,E=F.gts;this.titles=G.isRow?E.row:E.col;},size:function C(){return this.titles.length;},getTitle:function B(E){return new mstrmojo.models.template.Title({title:this.titles[E]});},getCSS:function A(E){return this.gridData.css[this.titles[E].cni].n;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.models.template.Titles","mstrmojo.models.template.MetricValue","mstrmojo.models.template.Headers","mstrmojo.models.datasets.DataInterface");var O=mstrmojo.array,U=mstrmojo.hash,D=mstrmojo.string,E=mstrmojo.models.datasets.DataInterface,g=D.decodeHtmlString;var G=-1,F=1,W=2,P=3;var N=1,H=2,c=3;function b(j){var k={};U.forEach(j,function(n,m){var l=[];O.forEach(n,function(o){l.push({fillColor:o.fillclr,text:o.n});});k[m]=l;});return k;}function i(n){var y=this.getTotalRows(),p=this.data,t=[],v=p.gts.col[0],m=v?v.es:[],x=m.length,q=0;n=U.copy(n,{minAttribute:1,minMetric:1});if(y<n.minAttribute||x<n.minMetric){throw"Error";}do{var l=this.getRowHeaders(q),o,k={},u=l.size();for(o=0;o<u;o++){while(o<u&&l.getHeader(o).getFormIndex()!==undefined){o++;}if(o<u){var s=l.getHeader(o);k[s.t.n]=s.getName();}}for(o=0;o<m.length;o++){var w=this.getMetricValue(q,o).value;k[m[o].n]={v:w.v,rv:w.rv};}t.push(k);q++;}while(q<y);return t;}function K(k){var j=[],l=this.data.gts.row;O.forEach(l,function(n,m){O.forEach(k,function(o){if(n.id===o.id){j[m]=true;}});});return j;}function Q(AN){var v=this.getTotalRows(),AP=this.data,u=[],x=AP.gts.col[0],p=x?x.es:[],AE=p.length,t,AI=0;AN=U.copy(AN,{minAttribute:1,minMetric:1,colorByInfo:[],hasTitleName:false,hasSelection:false,needDecode:false});if(v<AN.minAttribute||AE<AN.minMetric){throw"Error";}var k=AN.needDecode,AK=AN.hasTitleName,AJ=AN.hasSelection,AQ=AN.hasThreshold,AC=AN.colorByInfo;var AO=AQ?b(AP.th):undefined;t=K.call(this,AC);do{var m=this.getRowHeaders(AI),o={},AG,AF=[],AM=AC.length,l={headers:[],values:[],colorInfo:[]};for(AG=0;AG<m.size();AG++){var AH=m.getHeader(AG),z=AH.getName(),AS=AH.t,s={name:k?g(z):z};if(AK){var AR=AS&&AS.n;s.tname=k?g(AR):AR;}if(AJ){var AB=AS&&AS.id,w=AH.getElementId();s.attributeSelector={n:z,tid:AB,eid:w,isSelectAttr:true};o[AB]=[{n:z,id:w}];}if(AM&&t[AG]===true){var y=AH.getElementId();AF.push(y);}l.headers.push(s);}if(AM){l.colorInfo=AF;}for(AG=0;AG<p.length;AG++){var AD=this.getMetricValue(AI,AG).value,AL={v:AD.v,rv:AD.rv};if(AQ){var q=AO[AG],n=q&&q[AD.ti];if(n){AL.threshold=n;}}if(AK){var AA=this.getColTitles().titles[0].es[AG].n;AL.name=k?g(AA):AA;}l.values.push(AL);}if(AJ){l.metricSelector=o;}u.push(l);AI++;}while(AI<v);return u;}function A(AD){var AG=this.data,o=this.getTotalRows(),p=AG.gts.col[0],m=p?p.es:[],t=m.length,u={},v=[],x,y=0,w;AD=U.copy(AD,{minAttribute:1,minMetric:1,descKey:"name",childrenKey:"children",hasTitleName:false,hasSelection:false,needDecode:false,nestedLevel:undefined,colorByInfo:[]});if(o<AD.minAttribute||t<AD.minMetric){throw"Error";}var n=AD.descKey,q=AD.childrenKey,k=AD.needDecode,AA=AD.hasTitleName,z=AD.hasSelection,l=AD.nestedLevel||0,AF=AD.hasThreshold,s=AD.colorByInfo,AB=s.length;var AE=AF?b(AG.th):undefined;u[n]="root";x=K.call(this,s);var AC=function(AX,AH,AO,AQ,AK){var AL=(AX[q]=AX[q]||[]),AY=AH.getHeader(AO),Aa=AY&&AY.t,AV=Aa&&Aa.id,AT=AY&&AY.getName(),AP=AH&&AH.headers&&AH.headers.length||0,AZ,AS=AY&&AY.getElementId(),j=O.filterOne(AL,function(Ac){return(Ac._eid===AS);});AZ=O.some(x,function(Ad,Ac){return Ad&&((AO-Ac)%AP===0);});if(AB&&AZ){v.push(AS);}if(!j||(AO===l-1)){j={_eid:AS};var AN=(AY!==undefined);if(AN){j[n]=k?g(AT):AT;}if(AA&&AN){var Ab=Aa&&Aa.n;j.tname=k?g(Ab):Ab;}if(z&&AN){j.attributeSelector={n:AT,tid:AV,eid:AS,isSelectAttr:true};}AL.push(j);}if(z&&AN){AK[AV]=[{n:AT,id:AS}];}if(AO<AH.size()-1&&(!l||(AO<l-1))){AC.call(this,j,AH,AO+1,AQ,AK);}else{var AR=this.getMetricValue(AQ,0).value;if(AR){j.value=AR.rv;j.formattedValue=AR.v;}if(AB){j.colorInfo=v;v=[];}j.values=[];for(w=0;w<m.length;w++){var AW=this.getMetricValue(AQ,w).value,AI={v:AW.v,rv:AW.rv};if(AF){var AM=AE[w],AJ=AM&&AM[AW.ti];if(AJ){AI.threshold=AJ;}}if(AA){var AU=this.getColTitles().titles[0].es[w].n;AI[n]=k?g(AU):AU;}j.values.push(AI);}if(z){j.metricSelector=AK;}}};do{AC.call(this,u,this.getRowHeaders(y),0,y,{});y++;}while(y<o);return u;}function C(j,k){var l=[];O.forEach((j.row||[]).concat(j.col||[]),function(m){if((m.id===k)&&(m.fs)){l=l.concat(m.fs);}});return l;}mstrmojo.models.template.DataInterface=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.models.template.DataInterface",data:null,init:function(j){this.data=j;},getRowTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:true});},getColTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:false});},getTotalRows:function V(){if(this.data.eg){return 0;}var l=this.data,k=l&&l.ghs,j=k&&k.rhs,m=j&&j.items;return(m&&m.length)||0;},getTotalColHeaderRows:function T(){var j=this.data.ghs.chs.items;return(j&&j.length)||0;},getTotalCols:function Y(){return this.getColHeaders(0).size();},getRowHeaders:function J(j){return new mstrmojo.models.template.Headers({data:this.data,i:j,isRow:true});},getColHeaders:function a(j){return new mstrmojo.models.template.Headers({data:this.data,i:j,isRow:false});},getMetricValue:function I(l,j){var k=this.data;return new mstrmojo.models.template.MetricValue({data:k,value:k.gvs.items&&k.gvs.items[l].items[j]});},getColumnHeaderCount:function M(){var j=this.data.gvs.items;return j?j[0].items.length:0;},getCSSString:function f(){return this.data.cssString;},isEmpty:function S(){var j=this.data.gsi;return !j||(!j.rows.length&&!j.cols.length&&!j.mx.length);},getAggregatePadding:function e(){var k=this.data.gsi&&this.data.gsi.fmts,l=function(n,m){return n+m;},j=function(n){var m=0;return["ch","rh","va"].map(function(o){var p=false;return n.map(function(q){if(k[o]&&k[o].hasOwnProperty(q)){if(!p){p=true;m++;}return k[o][q];}return 0;}).reduce(l)/n.length;}).reduce(l)/(m||1);};if(!k){return null;}return{v:j(["tp","bp"]),h:j(["rp","lp"])};},getColResizeScenario:function B(){var j=this.data;if(j.afw){return F;}else{if(j.afc===false){return P;}else{return W;}}},getColResizeInfo:function L(o){var p=this.data,m={v:this.getColResizeScenario(),widths:null};var q=p.gsi,k=p.gts||{},u=[],n=p.twm||{},s=n.top||[],t=n.bottom||[],l=0,j=function(w,v){if(q){q[w].every(function(y){var z=y.did,AA=C(k,z),x=E.getFormsByAttrId(z,o);(AA.length?AA:[]).forEach(function(AD,AC){var AE=x[O.find(x,"fid",AD.id)],AB=(t&&t[l])||{};u.push({n:y.n+(x.length?(" - "+AE.fnm):""),did:z,depth:AC+1,t:y.t||4,width:parseInt(AB.w||0,10),widthModel:{top:(s&&s[l])||{},bottom:AB}});l++;});return !v;});}};j("rows",false);j("mx",q.tma===1);m.widths=u;return m;},getRowResizeScenario:function R(){return !!this.data.rh?P:W;},getRowResizeInfo:function X(){var k=this.data,j=k.rh;return{v:this.getRowResizeScenario(),height:(j===undefined||j==="")?k.xrh:j};},getColumnHeaderData:function h(){var p=this.data,v=p.gts,u=p.gts.rec,w=[],k=[],s=v.row;O.forEach(s,function(y){var x=y.fs,z=y.otp===G;if(x&&x.length>1){O.forEach(x,function(){w.push(y);});}else{w.push(y);}if(z){k=y.es;}});var o=v.col;if(o&&o.length>0){var n=p.ghs,l=n.chs,j=l.items,t=j[j.length-1].items,m=function m(x){var y=x.pi,z=y&&y.ci,AA=y&&y.ri;if(x.mix!==undefined){return x;}if(AA===undefined||z===undefined){return ;}return m(j[AA].items[z]);};O.forEach(o,function(x){var y=x.otp===G;if((y&&(!u||s.length===0))){w.push(x);}if(y){k=x.es;}});var q=w.length;O.forEach(t,function(x){delete x._ridx;});if(k.length>0){O.forEach(t,function(AA){var x=m(AA);var AB=x?x.mix:(AA.pi?0:AA.idx),z=k[AB]||k[0];var y=z._ridx=z._ridx||[];if(y.length===0){O.forEach(t,function(AD,AE){var AC=m(AD);if(!x||AC.mix===AB){y.push(q+AE);}});}w.push(z);});}}else{if(k.length>0){w.push(k[0]);}}return w;},getUnitById:function Z(l){var k=this.data.gsi,j=null;[k.rows,k.cols,k.mx].some(function(m,n){if(n===2){n=-2;}m.some(function(o,p){if(o.did===l){j={axis:n+1,depth:p+1,unit:o};}return !!j;});return !!j;});return j;},getRawData:function d(j,k){switch(j){case H:return i.call(this,k);case c:return Q.call(this,k);}return A.call(this,k);}});mstrmojo.models.template.DataInterface.inflateGridData=function(l){var m=l.gvs,k=l.ghs;if(l.egt===undefined&&(l.eg===undefined||l.eg===null)&&!!m&&U.isEmpty(m)){var j={v:"",rv:""},n={items:(k.chs.cws||[0]).map(function(){return j;})};m.items=k.rhs.items?k.rhs.items.map(function(){return n;}):[];m.show=true;}};mstrmojo.models.template.DataInterface.ENUM_GRID_RESIZE={FIT_TO_WINDOW:F,FIT_TO_CONTENTS:W,FIXED:P};mstrmojo.models.template.DataInterface.ENUM_RAW_DATA_FORMAT={TREE:N,ROWS:H,ROWS_ADV:c};}());(function(){mstrmojo.requiresCls("mstrmojo.storage.DOMStorage");var A=4;mstrmojo.storage.DOMSessionStorage=mstrmojo.declare(mstrmojo.storage.DOMStorage,null,{scriptClass:"mstrmojo.storage.DOMSessionStorage",init:function(B){this._super(B);try{this.mIsSupported=("sessionStorage" in window)&&(window.sessionStorage!==null);this.mStorageObj=this.mIsSupported?window.sessionStorage:null;this.checkVersion(A);}catch(C){this.mIsSupported=false;}}});$SS=mstrmojo.global.sessionStore=new mstrmojo.storage.DOMSessionStorage();})();(function(){mstrmojo.requiresCls("mstrmojo.storage.DOMStorage");var A=4;mstrmojo.storage.DOMLocalStorage=mstrmojo.declare(mstrmojo.storage.DOMStorage,null,{scriptClass:"mstrmojo.storage.DOMLocalStorage",init:function(B){this._super(B);try{this.mIsSupported=("localStorage" in window)&&(window.localStorage!==null);this.mStorageObj=this.mIsSupported?window.localStorage:null;this.checkVersion(A);}catch(C){this.mIsSupported=false;}}});$LS=mstrmojo.global.localStore=new mstrmojo.storage.DOMLocalStorage({itemTimeToLive:(3600*24)});})();(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.array");var H=mstrmojo,F=H.array,A="00000000000000000000000000000000",E=-1;function J(K){return K.t===4&&K.id!==A;}function G(L){var K,M=(L&&L.length)||0;if(M===0){return false;}for(K=0;K<M;K++){if(!J(L[K])){return false;}}return true;}mstrmojo.VisProps=null;mstrmojo.vi.viz.DropZoneHelper=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.vi.viz.DropZoneHelper",getXml:function B(){return"";},setData:function I(K){},isMetric:function(K){return J(K);},isMetricZone:function(K){return G(K);},getMetricCountInZone:function D(L){var K=0;F.forEach(L,function(M){if(J(M)){K++;}});return K;}});mstrmojo.vi.viz.DropZoneHelper.METRIC_NAMES_ID=A;mstrmojo.vi.viz.DropZoneHelper.isMetricNames=function C(K){return(parseInt(K.did,10)===E)||(K.id===A)||(K.did===A);};}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var T=mstrmojo.dom,K=mstrmojo.string,X=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:T.isNSIE?"block":"table",DISPLAY_CELL:T.isNSIE?"block":"table-cell",MINHEIGHT:T.isIE6?"height":"minHeight",addClass:function L(e,d){if(e){if(d.constructor!==Array){d=[d];}var Z=e.className||"",g=" "+Z+" ",a=false,Y=d.length,b;for(b=0;b<Y;b++){var f=d[b];if(!g.match(new RegExp("\\s"+f+"\\s"))){Z+=" "+f;a=true;}}if(a){e.className=K.trim(Z);}}return e;},removeClass:function N(c,b){if(!c){return ;}if(b.constructor!==Array){b=[b];}var Z=" "+(c.className||"")+" ",Y=b.length,a;for(a=0;a<Y;a++){Z=Z.replace(new RegExp("\\s"+b[a]+"\\s","g")," ");}c.className=K.trim(Z);},addWidgetCssClass:function M(d,b){var Z=d.cssClass,c=(Z&&Z.split(" "))||[],a;b=[].concat(b);for(a=0;a<b.length;a++){var Y=b[a];if(X.indexOf(c,Y)===-1){c.push(Y);}}d.cssClass=c.join(" ");},removeWidgetCssClass:function F(e,c){var Z=e.cssClass,d=(Z&&Z.split(" "))||[],b;c=[].concat(c);for(b=0;b<c.length;b++){var Y=c[b];var a=X.indexOf(d,Y);if(a!==-1){d.splice(a,1);}}e.cssClass=d.join(" ");},toggleClass:function S(a,Z,Y){if(Y){this.addClass(a,Z);}else{this.removeClass(a,Z);}},applyShadow:function G(c,d,b,a,Y){var Z=c.style;if(T.isDXIE){Z.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+d+"px, OffY="+b+"px, Color='"+Y+"')";}else{if(T.isFF||T.isWK||T.isIE10){Z[T.CSS3_BOXSHADOW]=d+"px "+b+"px "+a+"px "+Y;}}},removeShadow:function B(Z){var Y=Z.style;if(T.isFF||T.isWK||T.isIE10){Y[T.CSS3_BOXSHADOW]="";}},setOpacity:function U(Z,b){if(T.isDXIE&&!T.isIE9){var c=Z.currentStyle.filter;var Y=null;if(c.length>0){Y=Z.filters["DXImageTransform.Microsoft.Alpha"];}if(Y){Y.opacity=b;Y.enabled=(b!==100);}else{if(b<100){var a="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")";Z.style.filter=(c||"")+" "+a;}}}else{Z.style.opacity=b/100-(T.isIE9?0.00001:0);}},buildGradient:function O(Z,b,Y){if(T.supports(T.cssFeatures.GRADIENTS)){var a={};if(T.isDXIE){a.n="filter";a.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+Z+",StartColorStr='"+b+"',EndColorStr='"+Y+"')";}else{if(T.isFF){a.n="background-image";a.v="-moz-linear-gradient("+((Z===0)?"top":"left")+","+b+","+Y+")";}else{if(T.isWK){a.n="background";a.v="-webkit-gradient(linear,"+((Z===0)?"left top, left bottom":"left top, right top")+",from("+b+"),to("+Y+"))";}else{if(T.isIE10||T.isIEW3C){a.n="background";a.v="linear-gradient("+((Z===0)?"to bottom":"to right")+","+b+","+Y+")";}}}}return a;}return null;},buildRoundCorners:function Q(d,c){if(T.supports(T.cssFeatures.ROUND_CORNERS)){var Z=d+"px";var f=Z+(c?" "+Z+" 0 0":"")+";";if(T.isFF||T.isWinPhone||T.isIE10){return"border-radius:"+f;}if(T.isWK){if(!c){return"-webkit-border-radius:"+Z+";";}var e=["left","right"],b=[],Y=-1,a;for(a=0;a<2;a++){b[++Y]="-webkit-border-top-"+e[a]+"-radius:"+Z;b[++Y]="-webkit-border-bottom-"+e[a]+"-radius:0";}return b.join(";");}}return"";},getBorderWidthsOrPaddings:function D(Z,e){var f={t:0,r:0,b:0,l:0,h:0,w:0};if(!Z){return f;}var c=Z.split(" "),Y=c.length,d;for(d=0;d<Y;d++){c[d]=Math.round(e*parseFloat(c[d])/72);}if(Y<4){if(Y===1){c[1]=c[2]=c[3]=c[0];}else{c[3]=c[1];if(Y===2){c[2]=c[0];}}}f.t=c[0];f.r=c[1];f.b=c[2];f.l=c[3];f.h=f.t+f.b;f.w=f.l+f.r;return f;},getBorderWidths:function H(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},getPaddings:function C(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},parkAfterFade:function A(Y){var Z=Y.target.style;if(Z.opacity===0){Z.left="-10000px";window.setTimeout(function(){Z.opacity=0.99;},0);return true;}return false;},getStyleValue:function I(Y,c){var a=(c==="float"),b;if(Y.currentStyle){c=a?"styleFloat":c;b=Y.currentStyle[c];}else{if(document.defaultView&&document.defaultView.getComputedStyle){c=a?"cssFloat":c;var Z=document.defaultView.getComputedStyle(Y,null);b=Z?Z[c]:null;}}return b;},getComputedStyle:function R(Y,a){var Z=(window.getComputedStyle)?function(b,c){return window.getComputedStyle(b,c||null);}:function(b){return b.currentStyle||{};};mstrmojo.css.getComputedStyle=Z;return Z(Y,a);},getCssTextFromObj:function E(a){var Z="",Y;for(Y in a){Z+=Y+":"+a[Y]+";";}return Z;},onTransitionEnd:function W(a,Y){var Z="transition",b=window.Modernizr;if(b.testProp(Z)){T.attachOneTimeEvent(a,T.transEndEvtNames[b.prefixed(Z)],Y);}else{window.setTimeout(Y,0);}},flashClass:function P(Z,Y,b){this.toggleClass(Z,Y,true);var a=this;window.setTimeout(function(){a.toggleClass(Z,Y,false);},b);},convertCssToCamelCase:function J(Y){return Y.replace(/\-([a-z])/gi,function(Z,a){return a.toUpperCase();});},printCSSInfo:function V(c){var g=document.styleSheets,l=g.length,d,e;for(e=0;e<l;e++){var f=g[e],h=f.cssRules,a=h?h.length:0,k=0;for(d=0;d<a;d++){var Y=h[d].selectorText;if(Y){try{k+=Y.split(",").length;}catch(b){}}}var Z=f.href;if(!c||(Z&&X.indexOf(Z,c)>-1)){console.log("Stylesheet: "+Z||"Inline CSS Block");console.log("Total rules: "+a);console.log("Total selectors: "+k);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var N=mstrmojo.locales,I=mstrmojo.string,Q=window.mstrConfig,F=mstrmojo.array,K=function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},R=function(){return mstrmojo.locales.number.DECIMALSEPARATOR;},C=Q.units,T={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},A={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},E={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var G=96;String.prototype.reverse=function(){var W="",V;for(V=this.length;V>0;--V){W+=this.charAt(V-1);}return W;};function M(V,X){V=V||"";X=X||V.match(/\".+?\"/g)||[];for(var W=0;W<X.length;W++){V=V.replace(X[W],X[W].substring(1,X[W].length-1).replace(/\$/g,"$$$$"));}return V;}function U(a){var V=86400000,Z=new Date(1900,0,1,0,0,0,0),W=Math.floor(a)-1,Y=a-W-1;if(a>=59){W--;}var X=new Date(Z.getTime()+(W*V));X.setTime(X.getTime()+Y*V+500);return X;}function H(Z,g,i){var a={"d+":Z.getDate(),"h+|H":Z.getHours(),"s+":Z.getSeconds()},V=N.datetime,b;if(/(y+)/.test(g)){var Y=Z.getFullYear().toString(),f=RegExp.$1,X=f.length===2,W=Y.length;g=g.replace(f,Y.substr(X?W-2:0,X?2:W));}if(/(^\[h\])/.test(g)&&i){g=g.replace(RegExp.$1,""+(Math.floor(i*24)));}if(/(\"?:\"?mm)/.test(g)){var c=Z.getMinutes();g=g.replace(RegExp.$1,":"+(RegExp.$1.length===1?c:("00"+c).substr(c.toString().length)));}if(/(AM\/PM)/.test(g)){var h=a["h+"],d=h>11;a["h+"]=h-(d?12:0);g=g.replace(RegExp.$1,d?"PM":"AM");}for(b in a){if(new RegExp("("+b+")").test(g)){g=g.replace(RegExp.$1,RegExp.$1.length===1?a[b]:("00"+a[b]).substr((a[b].toString()).length));}}if(/(mmmm)/.test(g)){g=g.replace(RegExp.$1,V.MONTHNAME_FULL[Z.getMonth()]);}else{if(/(mmm)/.test(g)){g=g.replace(RegExp.$1,V.MONTHNAME_SHORT[Z.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(g)){var e=(Z.getMonth()+1).toString();g=g.replace(RegExp.$1,RegExp.$1.length===1?e:("00"+e).substr(e.length));}}}return M(g);}function O(W,Z){var X=0,V=Z.length,Y=0;for(;X<V;X++){if(Z[X]==="0"){Y++;}else{if(Z[X]==="#"){if(Y<W){Y++;}}else{continue;}}}return Y;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function D(V){var Y=K(),X=new RegExp("^(-)?[0-9]{1,3}(\\"+Y+"[0-9]{3})*$"),W=new RegExp("^(-)?[0-9]+$");return(String(V).indexOf(Y)&&X.test(V))||W.test(V);},isNumeric:function P(Y,Z){var X=R(),a=K(),W=new RegExp("^(-)?[0-9]{1,3}(\\"+a+"[0-9]{3})*(\\"+X+"[0-9]+)?$"),V=new RegExp("^(-)?[0-9]*(\\"+X+")?[0-9]+$");return(String(Y).indexOf(a)&&W.test(Y))||V.test(Y);},parseInteger:function L(V,W){if(!this.isInt(V)){return Number.NaN;}return parseInt(this.toString(V,true),W);},parseNumeric:function B(V){if(!this.isNumeric(V)){return Number.NaN;}return parseFloat(this.toString(V,true));},inNumericRange:function S(W,X,V){W=this.parseNumeric(W);V=(V!=null)?this.parseNumeric(String(V)):Number.NaN;X=(X!=null)?this.parseNumeric(String(X)):Number.NaN;if(V!=Number.NaN&&(W>V||isNaN(W))){return 1;}if(X!=Number.NaN&&(W<X||isNaN(W))){return -1;}return 0;},convertToUSUnits:function(Y,X,W){var V=Y;X=X||C;switch(parseInt(X,10)){case T.CM:V=parseFloat(this.toString(Y))/2.54+"";break;case T.MM:V=parseFloat(this.toString(Y))/25.4+"";break;case T.PT:V=parseFloat(this.toString(Y))/72+"";break;case T.PC:V=parseFloat(this.toString(Y))/6+"";break;case T.PX:V=parseFloat(this.toString(Y))/G+"";break;}return W?V:this.toLocaleString(V);},convertToLocalUnits:function(Y,X,W){var V;X=X||C;switch(parseInt(X,10)){case T.CM:V=(parseFloat(this.toString(Y))*2.54).toFixed(4)+"";break;case T.MM:V=(parseFloat(this.toString(Y))*25.4).toFixed(4)+"";break;case T.PT:V=(parseFloat(this.toString(Y))*72).toFixed(4)+"";break;case T.PC:V=(parseFloat(this.toString(Y))*6).toFixed(4)+"";break;case T.PX:V=(parseFloat(this.toString(Y))*G)+"";break;default:V=parseFloat(this.toString(Y)).toFixed(4)+"";}return W?V:this.toLocaleString(V);},convertUnits:function(W,X,V){return this.convertToLocalUnits(this.convertToUSUnits(V,W,true),X,true);},toLocaleString:function(V){return(V+"").replace(".",R());},toString:function(X,V){if(V===true){var W=this.getThousandSepRegex();if(W){X=String(X).replace(W,"");}}return String(X).replace(R(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(K().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(X,W){var V=W;if(W=="."||W=="*"||W=="\\"){V="\\"+W;}return X.reverse().replace(/(\d{3})/g,"$1"+W).reverse().replace(new RegExp("^(-)?"+V),"$1");},format:function(Z,Y,c,V){var b="",a=(Y>0)?".":"",W=[];c=(c)?c:"";for(var X=0;X<Y;X++){W.push("0");}W=W.join("");switch(Z){case E.GENERAL:b="0.00";break;case E.PERCENT:b="0"+a+W+"%";break;case E.SCIENTIFIC:b="0"+a+W+"E+00";break;default:b='"'+c+'"#,##0'+a+W;}return this.formatByMask(b,V);},getDecimalLength:function J(X){var V=X.indexOf("."),Y=0;if(V!==-1){var W=X.substr(V+1,X.length).match(/\d+/);if(W&&W.length>0){Y=W[0].length;}}return Y;},formatByMask:function(AC,AT){var z,s;if(isNaN(AT)){z=new Date(AT);if(isNaN(z)){return AT;}s=true;}if(AC==="General"){return String(parseFloat(AT).toFixed(2));}var q=String(AC).split(";"),l="",Y=q[0],h="\u00A4",AM=/"[^"]*"/g,k=(AC&&AC.replace(AM,h).replace(/\[.*\]/g,h))||"",AS=["m","y","d","h","s"],AH=false;F.forEach(AS,function(i){AH=AH||k.indexOf(i,0)!==-1;});if(AH){if(window.SSF){l=this.formatBySSF(AC,AT);}if(l!==""){return l;}else{return H(s?z:U(AT),AC,AT);}}var AG=Y.indexOf("E+"),e=Y.indexOf("%"),w=Y.match(/\"[^A-Za-z]+?\"/g),x=Y.indexOf("?/?")>-1,AA=(AG!=-1)?E.SCIENTIFIC:((e!=-1)?E.PERCENT:((w)?E.CURR:x?E.FRACTION:E.FIXED)),p="",AO="",n=false,W=new String(AT),d=this.parseNumeric(AT)||parseFloat(AT);if(w){if(Y.match(/\[\$.+?\]/g)){for(var f=0;f<w.length;f++){Y=Y.replace(w[f],w[f].substring(1,w[f].length-1));if(w[f].match(/\[\$.+?\]/g)){w[f]=w[f].replace(/\[\$.+?\]/g,w[f][w[f].indexOf("[$")+2]);}}Y=Y.replace(/\[\$.+?\]/g,'"#"'.replace("#",Y[Y.indexOf("[$")+2]));}p=M(Y,w);p=p.replace(Y.replace(/\".+?\"/g,""),h);}if(d<0){W=W.substring(1,W.length);d=-d,n=true;if(q.length>1){var b=q[1].replace(/\[.*\]/,"");AO=M(b.replace(q[0],h));}}var c=function(j,i){return(i)?i.replace(h,j):"-"+j;};if(AA==E.FRACTION){var AK,AJ,AR,o=10,y,u=0,AE,AN,Z,X=false,AB;if(AC.indexOf("# ")>-1){X=true;}for(AK=5;AK>0;AK--){AB="/";for(AJ=0;AJ<AK;AJ++){AB+="?";}if(AC.indexOf(AB)>-1){for(AJ=1;AJ<AK;AJ++){o*=10;}break;}}if(X){u=Math.floor(Number(d));d-=u;}AN=o/2;AR=-1;AE=d*o;for(AK=o-1;AK>=2;AK--){Z=(AE*AK)/o;Z=Z-Math.floor(Z);Z=Z*o;if(Math.abs(Z-o)<Z){Z=Math.abs(Z-o);}Z=Z/AK;if(Z<AN){AN=Z;AR=AK;}else{if((Z==AN)&&(Z==0)){AN=Z;AR=AK;}}}y=Math.round(AR*AE/o);for(AK=AR;AK>=2;AK--){if((y%AK==0)&&(AR%AK==0)){y=y/AK;AR=AR/AK;break;}}if(AR==o){AR=1;y=0;}if(y==0){AR=1;}if(y==AR){if(X){l=""+(u+1);}else{l="1";}}else{if(X&&u>0){if(y==0){l=u;}else{l=u+" "+y+"/"+AR;}}else{if(y==0){l="0";}else{l=y+"/"+AR;}}}if(n){l=c(l,AO);}}else{if(AA==E.SCIENTIFIC){if(d!=0){var AU=Math.floor(Math.log(d)/Math.LN10),AI=d/Math.pow(10,AU),AV=Y.substring(0,AG),g=AV.indexOf("."),AD=Y.length-Y.indexOf("E+")-(""+Math.abs(AU)).length-2,AK,V=AU<0;AU=Math.abs(AU);for(AK=0;AK<AD;AK++){AU="0"+AU;}l+=Number(AI).toFixed((g!=-1)?AV.length-g-1:0);l=((n)?c(l,AO):l)+"E"+(V?"-":"+")+AU;}else{l="0";}}else{if(AA==E.PERCENT){Y=Y.substring(0,Y.length-1);W=String(d*100);}var g=Y.indexOf("."),a=0,AQ,t=g>=0?Y.substring(0,g):Y;if(t.match(/[#0\?],$/)){d/=1000;W=String(d);}AQ=this.getDecimalLength(W);if(g!=-1){a=O(AQ,Y.substr(g+1,Y.length));}l=String(parseFloat(W).toFixed(Math.min(a,20)));if(AA===E.FIXED){if(/[\[\]><=A-Za-z]|,{2}/.test(Y)&&window.SSF){var AL=this.formatBySSF(AC,AT);l=AL!==""?AL:l;}}var AP=l.split(".");var AF=Y.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AF!==null){if(!(K()===","&&AP[0].search(K())>0)){AP[0]=this.addSeparators(AP[0],K());}}l=AP.join(R());if(AA==E.CURR){l=p.replace(h,l);if(l===p&&window.SSF){l=this.formatBySSF(AC,AT,l);}}if(AA==E.PERCENT){l+="%";}if(n){l=c(l,AO);}}}return l;},formatBySSF:function(X,W,Y){var V=Y||"";try{V=window.SSF.format(X,W);}catch(Z){if(window.mstr_profile){window.mstr_profile.log(Z);}}return V;},validateFormat:function(V){var W=true,X=String(V).split(";");if(X[1]&&X[1].indexOf(X[0])<0){W=false;}return W;},generateUniqueID:function(V){var X="0123456789ABCDEF".split(""),Y=[];for(var W=0;W<V;W++){Y[W]=X[0|Math.random()*16];}return Y.join("");},countOfDecimals:function(W,X){var V=String(W);return V.length-(V.indexOf(X!==undefined?X:R())+1);}});mstrmojo.num.UNIT=T;mstrmojo.num.UNIT_SYMBOL=A;})();(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var M=mstrmojo.string,L=mstrmojo.hash,E=mstrmojo.dom;var R=mstrmojo.usesFrames?null:document.createElement("span");var J=/mstrAttach:([\w,]+)/g;var Q;function U(a){if(Q===undefined){Q=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return a.replace(J,function Z(g,j){var c=j.split(","),d=[],b=c.length,f;for(f=0;f<b;f++){var h=c[f];if(h){if(Q){if(h.indexOf("mouse")>-1){continue;}else{if(h==="click"){h="touchend";}}}d.push("on"+h+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+h+"', self, event)\"");}}return d.join(" ");});}var N="preBuildRendering",C="buildRendering",B="postBuildRendering";function X(b){var a=b.markupString;if(a.match(/mstrAttach:/)){a=U(a);if(b.markupString===b.constructor.prototype.markupString){b.constructor.prototype.markupString=a;}}var Z=M.apply(a,b);if(Z){if(mstrmojo.usesFrames){var c=(b.domNode&&b.domNode.ownerDocument)||window.document;if(!R||R.ownerDocument!==c){R=c.createElement("span");}}R.innerHTML=Z;var e=R.removeChild(R.firstChild);e.mstrmojoId=b.id;return e;}return null;}function A(b){var a=b.markupSlots,Z,c;if(a){Z={};for(c in a){Z[c]=a[c].call(b);}}return Z;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function Y(){if((this[N]&&this[N]()===false)||(this[C]()===false)||(this[B]&&this[B]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var Z="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,Z)){this.raiseEvent({name:Z});}return true;},buildDom:function T(){return X(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function F(){var Z=this.domNode,a=this.buildDom();this.domNode=a;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(A(this));this.paint();if(a){var d=Z;if(!d){d=this.placeholder;if(d){if(typeof d==="string"){d=document.getElementById(d);}delete this.placeholder;}}if(d){E.replace(d,a);}}var b="onchildRenderingChange",c=this.parent;if(c&&c[b]){c[b](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function S(b){if(this.hasRendered){if(!b){try{var Z=this.domNode;if(Z.parentNode){Z.parentNode.removeChild(Z);}if(mstrmojo.dom.isIE&&Z.outerHTML!=="undefined"){Z.outerHTML="";}}catch(a){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var a=this.markupMethods;if(!a){return ;}var d=this,e=function(i){var h=a[i];if(h){try{h.apply(d,[true]);}catch(g){throw new Error(["Error in markup method.","Script class: "+d.scriptClass,"Widget id: "+d.id,"Method name: "+i,"Err: "+g.message].join("\n\n"));}}};var c=a.sequence,Z,b,f;if(c){Z=c.length||0;for(b=0;b<Z;b++){e(c[b]);}}else{for(f in a){e(f);}}},redraw:function P(){return false;},refresh:function D(Z){if(this.hasRendered){if(this.redraw()!==true){var a=this.domNode;this.unrender(true);this.placeholder=a;if(Z){Z();}this.render();}}},set:function I(c,Z){this._super(c,Z);if(this.domNode){var a=this.markupMethods,b=a&&a["on"+c+"Change"];if(b){b.apply(this);}}return this;},slotNames:null,addSlots:function G(a){var Z=this.slotNames,b;if(!Z){Z={};this.slotNames=Z;}for(b in a){this[b]=a[b];Z[b]=true;}},removeSlots:function H(Z){if(Z){var a=this.slotNames,b;for(b in Z){delete this[b];if(a){delete a[b];}}}},captureDomEvent:function W(b,Z,c,a){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(b,Z,c||Z.event,a));}},playEffect:function V(a){var Z=this[a];if(Z&&Z.constructor===Object){Z=mstrmojo.insert(mstrmojo.hash.clone(Z));Z.widget=this;this[a]=Z;}if(Z){Z.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function O(a,Z){a.prototype.markupMethods=L.copy(Z,L.copy(a.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(c,Z,b,a){return{name:c,hWin:Z,e:b,config:a,ctrlKey:E.ctrlKey(Z,b),shiftKey:E.shiftKey(Z,b),metaKey:E.isMetaKey(Z,b),cancel:function(){E.stopPropogation(Z,b);},preventDefault:function(){E.preventDefault(Z,b);},getTarget:function(){return E.eventTarget(Z,b);}};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.StringBuffer");mstrmojo._XMLNode=mstrmojo.declare(null,null,{nodeName:null,init:function N(O){mstrmojo.hash.copy(O,this);},addChild:function F(P){var O=new mstrmojo._XMLNode({nodeName:P});return this.appendNode(O);},appendNode:function J(O){if(O){if(!this.children){this.children=[];}this.children.push(O);O.parent=this;}return O;},addAttribute:function L(O,P){if(O!=null){if(!this.attributes){this.attributes={};}this.attributes[O]=P;}return this;},addText:function M(O){this._addToStringMember("text",O);return this;},addRawXML:function K(O){this._addToStringMember("rawXML",O);return this;},getXMLString:function I(){var O=new mstrmojo.StringBuffer();this.buildXMLString(O);return O.toString();},buildXMLString:function E(O){O=O||new mstrmojo.StringBuffer();O.append("<").append(this.nodeName).append(" ");this._buildAttributesXMLString(O).append(">").append(((this.text!=null)?this._escapeString(this.text):"")).append(((this.rawXML!=null)?this.rawXML:""));this._buildChildrenXMLString(O).append("</").append(this.nodeName).append(">");return O;},_buildAttributesXMLString:function D(O){var Q=this.attributes;if(Q){var R;for(R in Q){if(Q[R]!=null){var P=String(Q[R]);switch(R){case"et":case"nt":case"dmt":case"ddt":case"fnt":case"tp":case"stp":break;default:P=this._escapeString(P);}O.append(R+'="'+P+'" ');}}}return O;},_escapeString:function C(O){return mstrmojo.string.escape4HTMLText(O);},_buildChildrenXMLString:function H(P){var R=this.children;var O=R&&R.length;if(O){var Q;for(Q=0;Q<O;Q++){if(R[Q]&&R[Q].buildXMLString){R[Q].buildXMLString(P);}}}return P;},_addToStringMember:function A(O,Q){var P=this[O];if(P==null){this[O]=Q;}else{this[O]=P+Q;}}});mstrmojo.XMLBuilder=mstrmojo.declare(null,null,{root:null,curNode:null,addChild:function F(O){if(!this.root){this.currentNode=this.root=new mstrmojo._XMLNode({nodeName:O});}else{this.currentNode=this.currentNode.addChild(O);}return this;},appendNode:function J(O){if(!this.root){this.currentNode=this.root=O;}else{this.currentNode=this.currentNode.appendNode(O);}return this;},addAttribute:function L(O,P){if(this.currentNode){this.currentNode.addAttribute(O,P);}else{alert("no root node");}return this;},addText:function M(O){if(this.currentNode){this.currentNode.addText(O);}else{alert("no root node");}return this;},addRawXML:function K(O){if(this.currentNode){this.currentNode.addRawXML(O);}else{alert("no root node");}return this;},closeElement:function G(){this.currentNode=this.currentNode.parent;},toString:function B(){if(this.root){return this.root.getXMLString();}return"";}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;this.preHandleEvent(H);var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){this.postHandleEvent(H);C.publish(this.id,M,H);}return H;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(T,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var U=G(T,Q[R]);if(!U){continue;}S.push(U);L(T,U);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var T=R[Q];if(T&&T.destroy){T.destroy(S);if(!S){N(this,T);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(U,Q,R){if(!U){return U;}var T=U.constructor===Array,P=A(this,T?U:[U]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return T?P:(P&&P[0]);},removeChildren:function J(V,R){var T=this.children,U=V?[V]:(this.children||[]).concat(),Q=U.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,U[S]);}if(V){P=K.removeItem(T,V);}else{if(T){T.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:U,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"POST",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(){if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");if(F.params&&!F.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){F.params.sessionState=mstrApp.sessionState;}H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){if(J.mstrerr){J.code=J.mstrerr.code;J.message=J.mstrerr.message;}E.response(G,true,J);},failure:function(J){E.response(G,false,{code:J.getResponseHeader("X-MSTR-TaskErrorCode"),message:J.getResponseHeader("X-MSTR-TaskFailureMsg")});},complete:function(){delete D[G];},textResponse:F.callback.textResponse},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.locales");var X=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function Y(b,f,a){var d=this.parseDate(b,a);var e=!!(d&&this.doesDateExist(d.month,d.day,d.year));if(f){if(e){var c=this.formatDateInfo(d,X().DATEOUTPUTFORMAT);if(a){return{match:d.match,formatted:c};}return c;}return null;}return !!e;},formatDateInfo:function R(d,f){if(!f){return"";}var a=d.day,e=d.month,c=d.year;var b=f.replace(/dd/g,this.formatInteger(a,2)).replace(/d/g,Number(a)).replace(/yyyy/g,Number(c)).replace(/yy/g,this.formatInteger(Number(c)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,X().MONTHNAME_FULL[Number(e)-1]).replace(/\~\~\~\~/g,X().MONTHNAME_SHORT[Number(e)-1]).replace(/\@\@/g,this.formatInteger(e,2)).replace(/\^/g,Number(d.month));return b;},parseDate:function Z(l,f,j){if(l==null){return false;}if(typeof l!=="string"){l=String(l);}l=L.trim(l);var a=this.CACHE.PARSEDATE[f?"CONTAINS":"EQUALS"],c=a[l];if(c||(c===null)){return c;}var b=null;var h;if(j){h=[j];}else{h=[].concat(X().DATEINPUTFORMATS);h.unshift(X().DATEOUTPUTFORMAT);}var d,e;for(d=0,e=h.length;d<e;d++){var g=this._buildRegExp4DateFormat(h[d]),k=g&&l.match(f?g.reContains:g.reEquals);if(k){b={match:k[0],year:g.yearIndex&&this.fourDigitYear(k[g.yearIndex]),day:g.dayIndex&&parseInt(Number(k[g.dayIndex]),10),month:g.monthIndex&&this.numericMonth(k[g.monthIndex])};break;}}a[l]=b;return b;},isTime:function I(b,e,a){var f=this.parseTime(b,a);var d=!!(f&&this.doesTimeExist(f.hour,f.min,f.sec));if(e){if(d){var c=this.formatTimeInfo(f,X().TIMEOUTPUTFORMAT);if(a){return{match:f.match,formatted:c};}return c;}return null;}return !!d;},parseTime:function J(m,f,k){if(m==null){return false;}if(typeof m!=="string"){m=String(m);}m=L.trim(m);var a=this.CACHE.PARSETIME[f?"CONTAINS":"EQUALS"],c=a[m];if(c||(c===null)){return c;}var b=null;var j;if(k){j=[k];}else{j=[].concat(X().TIMEINPUTFORMATS);j.unshift(X().TIMEOUTPUTFORMAT);}var d,e;for(d=0,e=j.length;d<e;d++){var h=this._buildRegExp4TimeFormat(j[d]),l=h&&m.match(f?h.reContains:h.reEquals);if(l){var g=h.ampmIndex&&l[h.ampmIndex];b={match:l[0],hour:h.hourIndex&&this.capitalHour(l[h.hourIndex],g),min:h.minIndex&&parseInt(Number(l[h.minIndex]),10),sec:h.secIndex&&parseInt(Number(l[h.secIndex]),10)};break;}}a[m]=b;return b;},formatTimeInfo:function S(d,b){if(!b){return"";}var c=!(Number(d.hour)%12)?12:(Number(d.hour)%12),a=b.replace(/HH/g,this.formatInteger(d.hour,2)).replace(/H/g,Number(d.hour)).replace(/hh/g,this.formatInteger(c,2)).replace(/h/g,c).replace(/mm/g,this.formatInteger(Number(d.min)||0,2)).replace(/m/g,Number(d.min)||0).replace(/ss/g,this.formatInteger(Number(d.sec)||0,2)).replace(/s/g,Number(d.sec)||0).replace(/a/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/tt/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/AM\/PM/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME);return a;},doesTimeExist:function G(f,b,e){var d=parseInt(f,10);if(d>=0&&d<=23){var a=parseInt(b,10);if(a>=0&&a<=59){if(!e){return true;}var c=parseInt(e,10);if(c>=0&&c<=59){return true;}}}return false;},capitalHour:function C(a,b){a=parseInt(Number(a),10);if(b&&(b.match(X().AM_NAME)||b.match(/AM/i))){return a%12;}if(b&&(b.match(X().PM_NAME)||b.match(/PM/i))){return 12+(a%12);}return a;},getTimeStamp:function O(){var b=new Date();var a=[b.getMonth()+1,b.getDate(),b.getFullYear()];var e=[b.getHours(),b.getMinutes(),b.getSeconds()];var d=(e[0]<12)?"AM":"PM";e[0]=(e[0]<12)?e[0]:e[0]-12;e[0]=e[0]||12;for(var c=1;c<3;c++){if(e[c]<10){e[c]="0"+e[c];}}return a.join("-")+" "+e.join(":")+" "+d;},isDateAndOrTime:function V(a,b){return this.isDateTime(a,b)||this.isDate(a,b)||this.isTime(a,b);},isDateTime:function B(j,a){var e=this.parseDateAndOrTime(j),h=e&&e.date,d=e&&e.time,g=!!h&&!!d&&this.doesDateExist(h.month,h.day,h.year)&&this.doesTimeExist(d.hour,d.min,d.sec);if(a){if(g){var b=this.formatDateInfo(h,X().DATEOUTPUTFORMAT),c=this.formatTimeInfo(d,X().TIMEOUTPUTFORMAT),i=j.indexOf(h.match),f=j.indexOf(d.match);return(f<i)?c+" "+b:b+" "+c;}return null;}return !!g;},parseDateAndOrTime:function Q(b,a,f){var c=this.parseDate(b,true,a);var d=L.trim((c&&c.match)?b.replace(c.match,""):b),e=this.parseTime(d,false,f);if(!c&&!e){return null;}return{date:c,time:e};},inDateTimeRange:function P(c,e,h){var b=this.parseDateAndOrTime(c),f=b&&b.date,i=b&&b.time;if(!f&&!i){return 0;}if(e!=null){var d=this.parseDateAndOrTime(e);if(f&&d&&d.date){var j=this.compareDate(f,d.date);if(j<0){return -1;}if(j==0){if(i&&d.time&&(this.compareTime(i,d.time)<0)){return -1;}}}}if(h!=null){var a=this.parseDateAndOrTime(h);if(f&&a&&a.date){var g=this.compareDate(f,a.date);if(g>0){return 1;}if(g==0){if(i&&a.time&&(this.compareTime(i,a.time)>0)){return 1;}}}}return 0;},compareDate:function A(c,a){if(c===a){return 0;}var d=typeof c==="string"?this.parseDate(c):c,b=typeof a==="string"?this.parseDate(a):a;if(!d){return -1;}if(!b){return 1;}return(d.year-b.year)||(d.month-b.month)||(d.day-b.day)||0;},compareTime:function K(b,a){if(b===a){return 0;}var d=typeof b==="string"?this.parseTime(b):b,c=typeof a==="string"?this.parseTime(a):a;if(!d){return -1;}if(!c){return 1;}return(d.hour-c.hour)||(d.min-c.min)||(d.sec-c.sec)||0;},compareDateTime:function U(b,a){return this.compareDate(b,a)||this.compareTime(b,a);},compareDateAndOrTime:function E(h,f){if(h===f){return 0;}var b=typeof h==="string"?this.parseDateAndOrTime(h):h,a=typeof f==="string"?this.parseDateAndOrTime(f):f;if(!b){return -1;}if(!a){return 1;}var g=b.date,e=a.date,d=b.time,c=a.time;return this.compareDate(g,e)||this.compareTime(d,c);},_buildRegExp4DateFormat:function N(c){if(!c){return null;}var e=this.REGEXPS.DATES[c];if(!e){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=X().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=X().MONTHNAME_SHORT.join("|");}e=this.REGEXPS.DATES[c]={};e.formatStr=c;var b=e.reStr=c.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");e.reEquals=new RegExp("^"+b+"$");e.reContains=new RegExp("^"+b+"\\b");var f=[{key:"monthIndex",index:c.indexOf("M")},{key:"dayIndex",index:c.indexOf("d")},{key:"yearIndex",index:c.indexOf("y")}];f.sort(function(h,g){return h.index-g.index;});var a=1,d;for(d=0;d<3;d++){e[f[d].key]=f[d].index>-1?a++:null;}}return e;},_buildRegExp4TimeFormat:function F(d){if(!d){return null;}var f=this.REGEXPS.TIMES[d];if(!f){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[X().AM_NAME,X().PM_NAME,String(X().AM_NAME).toLowerCase(),String(X().PM_NAME).toLowerCase()].join("|");}f=this.REGEXPS.TIMES[d]={};f.formatStr=d;var c=d.replace(/\'\'/g,'"');var g=c.match(/\'(.+?)\'/g);c.replace(/\'(.+?)\'/g,"*");c=c.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var e,a;for(e=1,a=(g&&g.length)||0;e<a;e++){c=c.replace(/\*/,g[e]);}c=c.replace(/\"/g,"'");f.reEquals=new RegExp("^"+c+"$");f.reContains=new RegExp(c);var h=[{key:"hourIndex",index:d.search(/h|H/)},{key:"minIndex",index:d.indexOf("m")},{key:"secIndex",index:d.indexOf("s")},{key:"ampmIndex",index:d.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:d.search(/z|Z/)}];h.sort(function(j,i){return j.index-i.index;});var b=1;for(e=0;e<5;e++){f[h[e].key]=h[e].index>-1?b++:null;}}return f;},doesDateExist:function M(d,a,b){var c=new Date(b,d-1,a);return b==c.getFullYear()&&d==c.getMonth()+1&&a==c.getDate();},fourDigitYear:function T(b){b=parseInt(Number(b),10);if(!isNaN(b)){var a=(X().TWODIGITYEARSTART%100)||0;if(b>=0&&b<=a){b=2000+b;}else{if(b>a&&b<100){b=1900+b;}}}return b;},numericMonth:function W(e){var d=parseInt(Number(e),10),c=mstrmojo.array;if(!isNaN(d)){return d;}var a=(e&&e.length)||0,b=-1;if(a){if(a<=3){b=c.indexOf(X().MONTHNAME_SHORT,e);}if(b===-1){b=c.indexOf(X().MONTHNAME_FULL,e);}}return b+1;},formatInteger:function H(c,b){var f=String(c),e=Math.max(b-f.length,0);if(e>0){var a=[f],d;for(d=1;d<=e;d++){a.push("0");}f=a.reverse().join("");}return f;},getFirstDateOfMonth:function(b,a){return new Date(b,a-1,1);},getDateObject:function(g,a,f,c,e,b){g=g||0;a=a||1;f=f||1;c=c||0;e=e||0;b=b||0;return new Date(g,a-1,f,c,e,b);},getDateFromDateInfo:function(a){return this.getDateObject(a.date&&a.date.year,a.date&&a.date.month,a.date&&a.date.day,a.time&&a.time.hour,a.time&&a.time.min,a.time&&a.time.sec);},getDateJson:function(a){return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),min:a.getMinutes(),sec:a.getSeconds()};},isLeapYear:function(a){return !(a%400)||(!(a%4)&&!!(a%100));},getDaysOfMonth:function(c,a){var b=[31,28,31,30,31,30,31,31,30,31,30,31];if(a==2&&this.isLeapYear(c)){return 29;}return b[a-1];},getPreMonth:function(b,a){if(a===1){return{y:b-1,m:12};}return{y:b,m:a-1};},getNextMonth:function(b,a){if(a===12){return{y:b+1,m:1};}return{y:b,m:a+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.locales");var c=mstrmojo.array,P=mstrmojo.meta.TP,G=mstrmojo.meta.STP,O=mstrmojo.hash,F={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},B={};var W;for(W in F){B[F[W]]=true;}var a={};a[F.AQ]="a";a[F.AL]="a";a[F.AC]="a";a[F.AE]="a";a[F.MQ]="m";a[F.MC]="m";a[F.F]="f";a[F.R]="r";a[F.XML]="p";var K={};K[F.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];K[F.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];K[F.AE]=["not","a","fn","es","a2","fm2","p"];K[F.AQ]=["not","a","fm","fn","cs"];K[F.AL]=["not","a","fm","fn","cs"];K[F.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];K[F.R]=["not","r"];K[F.F]=["not","f"];K[F.XML]=["not","n","p"];var M={};M[F.MQ]="METRIC_FNS";M[F.MC]="METRIC_FNS";M[F.AQ]="FORM_FNS";M[F.AL]="FORM_FNS";M[F.AC]="FORM_FNS";M[F.AE]="ELEM_FNS";var N={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47},b={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,CONS:12032,NDE:12033},T={a:N.ATTR,a2:N.ATTR,m:N.METRIC,m2:N.METRIC,r:N.REPORT,f:N.FILTER,p:N.PROMPT},U={f:b.FILTER};var V={};V[F.MQ]=N.METRIC;V[F.MC]=N.METRIC;V[F.AQ]=N.ATTR;V[F.AL]=N.ATTR;V[F.AC]=N.ATTR;V[F.AE]=N.ATTR;V[F.F]=N.FILTER;V[F.R]=N.REPORT;var J=function(d){var H=d.length,g={},e;for(e=0;e<H;e++){var h=d[e];g[h.did]=h.n;}return g;},E=function(e){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){d.t=d.tp;}}return e;},X=function(e,g){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){if(g){d.t=g;}else{delete d.t;}}}return e;},Z=function(d,f){if(!f){f=[];}f.length=0;var e,H;for(e=0,H=d.length;e<H;e++){f[e]=d[e];}return f;},L={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var R={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:F,ETs:B,ET2TGT:a,ET2COND:K,ET2TP:V,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:N,STP:b,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":b.PROMPT,1:b.PROMPT_LONG,2:b.PROMPT_LONG,3:b.PROMPT_LONG,4:b.PROMPT_DOUBLE,5:b.PROMPT_DOUBLE,6:b.PROMPT_DOUBLE,7:b.PROMPT_DOUBLE,8:b.PROMPT_STRING,9:b.PROMPT_STRING,10:b.PROMPT_STRING,14:b.PROMPT_DATE,15:b.PROMPT_DATE,16:b.PROMPT_DATE,21:b.PROMPT_LONG,22:b.PROMPT_LONG,23:b.PROMPT_STRING,24:b.PROMPT_BOOLEAN,30:b.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function A(e,d){var g=this.FN,h=this.FN_MRP,H=this.FNT;if(d===H.DEF||d===undefined){switch(e){case g.BETWEEN:case g.NOT_BETWEEN:return 2;case g.IS_NULL:case g.IS_NOT_NULL:return 0;}}else{if(d===H.PER||d===H.RANK){switch(e){case h.BETWEEN:case h.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function S(d,H){var e=this.FN;return d==e.IN_LIST||d==e.NOT_IN_LIST;},fn_AC_MC:function Y(d,H){var e=this.FN;return(d==e.EQUAL)||(d==e.NOT_EQUAL)||(d==e.GREATER)||(d==e.LESS)||(d==e.GREATER_EQUAL)||(d==e.LESS_EQUAL);},fnName:function Q(h,g,d,f){var H=this[M[h]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[f]]||H["*"];}if(h===F.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var e=c.find(H,"did",(d||1)+this.FN_SEP+g);if(e>-1){return H[e].n;}return"";},findTargets:function I(n,f,p){if(!p){p={};}if(n){var m;for(m in T){var y=n[m];if(y){if(!y[P]){y[P]=T[m];}if(!y[G]&&U[m]){y[G]=U[m];}p[y[f]]=y;}}if(n.dmy){var j=this.TP.ATTR,q=this.DMY_TP.ATTR,e=n.dmy.uts,x,d;for(x=0,d=(e&&e.length)||0;x<d;x++){var l=e[x];if(l&&l.utp===q){var g=l.utgt;if(!g.t){g.t=j;}p[g[f]]=g;}}}var H=n.nds,o,v;for(o=0,v=(H&&H.length)||0;o<v;o++){this.findTargets(H[o],f,p);}var s=n.cs,w=s&&s.length;if(w){for(o=0;o<w;o++){this.findTargets(s[o],f,p);}}}return p;},onLocaleUpdated:function(){var d=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=O.copy(J(d.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=Z(X(d.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":X(c.filter(d.Metric.concat(d.MetricRP),function(e){return e.did&&(c.find(R["0"],"did",e.did)<0);}))};H.FORM_FNS={0:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0);})),1:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["1"],"did",e.did)<0);})),2:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0)&&(c.find(L["1"],"did",e.did)<0);}))};H.DIMTYLEVELS=Z(X(d.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function D(f){var H=0,d=1,e=2;function g(h){switch(h.t){case N.METRIC:return d;case N.ATTR:case N.DIM:case N.CONS:return H;case N.FILTER:return h.st===b.CUSTOMGROUP?H:e;default:return e;}}return f.slice(0).sort(function(l,k){var m=g(l)-g(k);if(m){return m;}var j=l.n.toUpperCase(),i=k.n.toUpperCase(),h=j.localeCompare(i);if(h){return h;}return l.n.localeCompare(k.n);});},mapBaseFormTypeToDataType:function C(e){e=parseInt(e);if(e===NaN){return -1;}var d=this.BFTP,H=this.DTP;switch(e){case d.DATETIME:return H.TIMESTAMP;case d.DATE:return H.DATE;case d.TIME:return H.TIME;case d.NUMBER:return H.REAL;case d.TEXT:return H.CHAR;case d.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(k,l){var h=k.dtp,j=k.constraints,n=j.allowedFormatChars||"",g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),m=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,i;if(g){if(!k._intRegExp){n+="0-9-"+(k.isList?L:"")+m;k._intRegExp=new RegExp("[^"+n+"]");}i=k._intRegExp;}if(d){if(!k._numericRegExp){n+="0-9-"+(k.isList?L:"")+f+m;k._numericRegExp=new RegExp("[^"+n+"]");}i=k._numericRegExp;}return !!i&&i.test(l);}function c(k,m){var h=k.dtp,j=k.constraints,g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),f=j.min,l=j.max,i;if(f===undefined&&l===undefined){return false;}if(g||d){return Z.inNumericRange(m,f,l)!==0;}if(e){return F.inDateTimeRange(m,f,l)!==0;}return false;}function K(e,d){return !Z.isNumeric(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(i,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,o=this.value||"",e=this.isList?o.split(l):[o],n=j===14,m=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){o=e[h];d=F.parseDateAndOrTime(o);if(d){if(n&&d.date){m.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{m.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(p){var m=this.constraints,n=m.regExp,f=m.validator,d={id:this.id,code:b.VALID,msg:""},l=this.dtp,k=(A[l]===1),e=(A[l]===2||A[l]===5),g=(A[l]===3),h=(A[l]===6),j=U.isEmpty(p),o=String(p).length,i="",s=mstrmojo.locales.validation;if(this.required&&j){d.code=b.INVALID_EMPTY;d.msg=s.requiredFieldError;return d;}p=U.trim(p);if(!j&&P(this,p)){if(k){i=s.integerDataType;}if(e){i=s.numericDataType;}if(h){i=s.dateDataType;}d.code=b.INVALID_CHAR;d.msg=s.invalidCharError.replace("#",i);return d;}if(!j&&h&&R(this,p)){d.code=b.INVALID_BAD_DATESTRING;d.msg=s.invalidDateStringError;return d;}if(!j&&(e||k)&&K(this,p)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=s.invalidNumericFormatError;return d;}if(!j&&(k||e||h)&&c(this,p)){d.code=b.INVALID_OUTOFRANGE;if(m.min!==null&&m.max!==null){i=s.outofRangeError.replace("# ","").replace("##",m.min).replace("###",m.max);}else{if(m.min!==null){i=s.noLessMinError.replace("##",m.min).replace("# ","");}else{if(m.max!==null){i=s.noGreaterMaxError.replace("###",m.max).replace("# ","");}}}d.msg=i;return d;}if(g&&m.minLen!==null&&m.maxLen!==null){if(o<m.minLen||o>m.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,m.minLen).replace(/##/,m.maxLen);return d;}}if(n&&!n.test(p)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var q=f&&f.apply(this,[p]);if(q){d.code=q.code;d.msg=q.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css");var G=mstrmojo.array,F=mstrmojo.expr,H=mstrmojo.css;mstrmojo._IsExprNode=mstrmojo.provide("mstrmojo._IsExprNode",{ind:function B(){var L=this.parent;if(L&&L.indent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.indent(K);}}},out:function D(){var L=this.parent;if(L&&L.outdent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.outdent(K);}}},andOrTxt:function A(){var M=this.parent,K=M&&M.data,L="",N=this.data;if(K&&(K.et===F.ET.ANDOR)&&K.fn){L=K.fn+(N&&N.not?"_"+F.FN.NOT:"");L=F.BRANCH_FNS[L];}return'<span class="mstrmojo-text mstrmojo-andor">'+L+"</span>";},getPrefixAndOrToolsMarkup:function(){return('<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5896,"Ungroup Conditions")+"</span>");},premousedown:function J(K){var L=mstrmojo.dom.eventTarget(K.hWin,K.e);if(this.prefixHoverNode&&mstrmojo.dom.contains(this.prefixHoverNode,L,false)){mstrmojo.dom.stopPropogation(K.hWin,K.e);return ;}if(this._super){this._super(K);}},isSelectableArea:function E(K){return true;},childIndex:function I(){var M=this.parent,K=M&&M.data,L=K&&K.nds,N=this.data;if(L&&N){return G.indexOf(L,N);}return -1;},toggleGroupBorder:function C(K){H.toggleClass(this.parent.itemsContainerNode.childNodes[this.childIndex()-1].firstChild,"upgroup",K);H.toggleClass(this.domNode,"downgroup",K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.vi.viz.DropZoneHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.XMLBuilder","mstrmojo.gm.GMEnums");var L=mstrmojo,F=L.hash,I=L.array,P=L.vi.viz,B=P.EnumDSSDropZones,A=1,H=0,D=P.DropZoneHelper.METRIC_NAMES_ID,O,E=mstrmojo.gm.DualAxisSubAxisBit,G=E.PRIMARY;mstrmojo.vi.viz.GraphMatrixHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.GraphMatrixHelper",handled:false,rowObjects:null,columnObjects:null,xAxisObjects:null,yAxisObjects:null,angleObjects:null,sliceObjects:null,breakByObjects:null,colorByObjects:null,currentXML:"",sizeByObjects:null,tooltipMetrics:null,data:null,metricsDropZone:"",secondaryMetricsDropZone:"",shape:"",subtype:"",metricShapes:null,visType:-1,init:function N(Q){this._super(Q);this.rowObjects=[];this.columnObjects=[];this.xAxisObjects=[];this.yAxisObjects=[];this.angleObjects=[];this.sliceObjects=[];this.breakByObjects=[];this.colorByObjects=[];this.sizeByObjects=[];this.tooltipMetrics=[];this.currentXML="";this.metricsDropZone="";this.secondaryMetricsDropZone="";this.shape="";this.subtype="";this.metricShapes="{}";},clone:function J(R){var Q=this;Q.rowObjects=R.rowObjects.concat();Q.columnObjects=R.columnObjects.concat();Q.xAxisObjects=R.xAxisObjects.concat();Q.yAxisObjects=R.yAxisObjects.concat();Q.angleObjects=R.angleObjects.concat();Q.sliceObjects=R.sliceObjects.concat();Q.breakByObjects=R.breakByObjects.concat();Q.colorByObjects=R.colorByObjects.concat();Q.sizeByObjects=R.sizeByObjects.concat();Q.tooltipMetrics=R.tooltipMetrics.concat();Q.currentXML=R.currentXML;Q.metricsDropZone=R.metricsDropZone;Q.secondaryMetricsDropZone=R.secondaryMetricsDropZone;Q.shape=R.shape;Q.subtype=R.subtype;Q.metricShapes=R.metricShapes;},exists:function(S,Q){var T=this[Q],R=false;I.forEach(T,function(U){R=(U.did===S.did);if(R){return false;}});return R;},removeAngleMetricFromOthers:function(Q){["xAxisObjects","yAxisObjects","tooltipMetrics"].every(function(T){var S=this[T],R=I.find(S,"did",Q.did);if(R>-1){S.splice(R,1);return false;}});},getXml:function C(){var Q=this.data.dz,R=Q?F.copy(Q.visProp&&Q.visProp.fmt,{}):{},S=new mstrmojo.XMLBuilder();if(this.shape){R.Shape=this.shape;}if(this.subtype){R.Subtype=this.subtype;}if(this.metricShapes){R.metricShapes=this.metricShapes;}R.visType=this.visType;S.addChild("props");S.addChild("widgetProps");S.addChild("fmt");F.forEach(R,function(T,U){S.addChild(U);S.addAttribute("value",T);S.closeElement();});S.closeElement();S.closeElement();S.closeElement();return S.toString();},setData:function K(T){if(!T){return ;}var R=this,S=function(V,W){if(V){var U=V.TemplateUnit||V.TemplateMetric;if(U){U.forEach(function(X){var Y=F.copy(X);if(!Y.did){Y.did=Y.id;}W.push(Y);});}}};S(T[O.PROP_ROWS],this.rowObjects);S(T[O.PROP_COLUMNS],this.columnObjects);S(T[O.PROP_XAXIS],this.xAxisObjects);S(T[O.PROP_YAXIS],this.yAxisObjects);S(T[O.PROP_BREAKBY],this.breakByObjects);S(T[O.PROP_COLORBY],this.colorByObjects);S(T[O.PROP_SIZEBY],this.sizeByObjects);S(T[O.PROP_SLICE],this.sliceObjects);S(T[O.PROP_ANGLE],this.angleObjects);S(T[O.PROP_TOOLTIPMETRICS],this.tooltipMetrics);var Q=T.visProp.fmt;this.shape=Q[O.PROP_SHAPE];this.subtype=Q[O.PROP_SUBTYPE];},setMetricsDropZone:function M(Q){if(!Q){return ;}var R=this;[O.PROP_ROWS,O.PROP_COLUMNS,O.PROP_XAXIS,O.PROP_YAXIS,O.PROP_BREAKBY,O.PROP_SLICE,O.PROP_COLORBY].forEach(function(S){if(Q[S]&&Q[S].hasOwnProperty("MetricNames")){if(R.metricsDropZone){R.secondaryMetricsDropZone=S;}else{R.metricsDropZone=S;}}});},getAddDropZonesAction:function(){var U=this,R=this.metricsDropZone,Q=this.secondaryMetricsDropZone,S={act:"updateTemplate",keyContext:this.data.k,actions:[]},T=function(V){S.actions.push({act:"addDropZoneUnit",zoneId:B[V],unitId:D,unitType:H});};[{p:"rowObjects",v:"Rows"},{p:"columnObjects",v:"Columns"},{p:"xAxisObjects",v:"XAxis"},{p:"yAxisObjects",v:"YAxis"},{p:"breakByObjects",v:"BreakBy"},{p:"colorByObjects",v:"ColorBy"},{p:"sizeByObjects",v:"SizeBy"},{p:"angleObjects",v:"Angle"},{p:"sliceObjects",v:"SliceBy"},{p:"tooltipMetrics",v:"AdditionalMetrics"}].forEach(function(X){var V=U[X.p],Y=B[X.v];V.forEach(function(Z){S.actions.push({act:"addDropZoneUnit",zoneId:Y,unitId:Z.did,unitType:Z.t,ax:Z.ax||G});});if(R===X.v){var W=function(Z){return(Z&&(Z.length>A)&&U.isMetricZone(Z));};if(W(U.xAxisObjects)||W(U.yAxisObjects)||W(U.angleObjects)){T(R);}}});if(Q==="ColorBy"){T(Q);}return S;}});O=mstrmojo.vi.viz.GraphMatrixHelper;O.PROP_ROWS="Rows";O.PROP_COLUMNS="Columns";O.PROP_HORIZONTAL_AXIS="HorizontalAxis";O.PROP_VERTICAL_AXIS="VerticalAxis";O.PROP_XAXIS="XAxis";O.PROP_YAXIS="YAxis";O.PROP_SLICE="SliceBy";O.PROP_ANGLE="AngleBy";O.PROP_BREAKBY="BreakBy";O.PROP_COLORBY="ColorBy";O.PROP_SIZEBY="SizeBy";O.PROP_TOOLTIPMETRICS="AdditionalMetrics";O.PROP_SHAPE="Shape";O.PROP_SUBTYPE="Subtype";O.PROP_METRICSHAPES="metricShapes";O.PROP_SHAPE_AREA="Area";O.PROP_SHAPE_LINE="Line";O.PROP_SHAPE_BAR="Bar";O.PROP_SHAPE_CIRCLE="Circle";O.PROP_SHAPE_SQUARE="Square";O.PROP_SHAPE_PIE="Pie";O.PROP_SHAPE_RING="Ring";O.PROP_SHAPE_TICK="Tick";O.PROP_SUBTYPE_CLUSTERED="Clustered";O.PROP_SUBTYPE_AUTOMATIC="Automatic";O.PROP_SUBTYPE_STACKED="Stacked";O.PROP_SUBTYPE_ABSOLUTE="Absolute";O.PROP_SUBTYPE_PERCENT="Percent";}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.DropZoneHelper");var V=mstrmojo,I=V.array,T=V.vi.viz.EnumDSSDropZones,N=V.hash,M;function C(b,a){var c=b.getDropZoneItems(a);return c[0];}function R(b,a){var c=C(b,a);return c?c.id:"";}mstrmojo.vi.viz.MapHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.MapHelper",widget:null,data:null,vp:null,geoAttribute:null,latitude:null,longitude:null,angle:null,colorBy:null,sizeBy:null,tooltip:null,mapType:null,useAttributeForm:null,supportAreaMap:true,defaultView:null,init:function S(a){this._super(a);this.tooltip=[];this.data=this.data||{};this.vp=this.data.vp||{};},setWidget:function W(a){this.widget=a;var b=a.model.data.vp;this.geoAttribute=R(a,T.GeoAttribute);this.latitude=R(a,T.Latitude);this.longitude=R(a,T.Longitude);this.angle=R(a,T.Angle);this.colorBy=R(a,T.ColorBy);this.sizeBy=R(a,T.SizeBy);this.tooltip=a.getDropZoneItems(T.AdditionalMetrics).map(function(c){return c.id;});this.mapType=b.mtp;this.useAttributeForm=b.af;this.defaultView=b.dv;},getGeoUnit:function P(){return C(this.widget,T.GeoAttribute);},getLatitudeUnit:function H(){return C(this.widget,T.Latitude);},getLongitudeUnit:function L(){return C(this.widget,T.Longitude);},getAngleUnit:function A(){return C(this.widget,T.Angle);},getColorByUnit:function B(){return C(this.widget,T.ColorBy);},getSizeByUnit:function K(){return C(this.widget,T.SizeBy);},getTooltipUnits:function G(){return this.widget.getDropZoneItems(T.AdditionalMetrics);},setMapType:function(a){this.mapType=a;},setUseAttributeForm:function J(a){this.useAttributeForm=a?M.USE_ATTRIBUTE_FORM:M.USE_ATTRIBUTE;},getGeoForm:function F(d,b){var a=d&&d.fs,c=null;if(!b){b=function(){return true;};}if((d.otp===12||d.t===12)&&a){I.forEach(a,function(e){if(b(e)){c=e;return false;}});}return c;},getLatitudeForm:function Z(a){return this.getGeoForm(a,function(b){return M.isLatitude(b.fnm,b.fgr)&&b.obf;});},getLongitudeForm:function D(a){return this.getGeoForm(a,function(b){return M.isLongitude(b.fnm,b.fgr)&&b.obf;});},getXml:function O(){return M.getXmlFromJson(this.vp);}});M=mstrmojo.vi.viz.MapHelper;M.USE_ATTRIBUTE="0";M.USE_ATTRIBUTE_FORM="1";M.MTP_MARKER="1";M.MTP_BUBBLE="2";M.MTP_AREA="3";M.MTP_DENSITY="4";M.MTP_PATH="5";M.canShowColorByZone=function(a){return a===M.MTP_MARKER||a===M.MTP_BUBBLE||a===M.MTP_AREA||a===M.MTP_PATH;};M.canShowSizeByZone=function(a){return a===M.MTP_BUBBLE;};M.supportImageThreshold=function(a){return a!==M.MTP_BUBBLE&&a!==M.MTP_AREA;};M.isLatitude=function Y(b,a){return a===5||(b&&b.toLowerCase().indexOf("latitude")>-1);};M.isLongitude=function X(b,a){return a===6||(b&&b.toLowerCase().indexOf("longitude")>-1);};M.getXmlFromJson=function E(a){var b=new mstrmojo.XMLBuilder();b.addChild("widgetProps");b.addChild("fmt");N.forEach(a,function(c,d){b.addChild(d);b.addAttribute("value",c);b.closeElement();});b.closeElement();b.closeElement();return b.toString();};M.getMapTypeByElementCount=function Q(a){return a>500?M.MTP_DENSITY:M.MTP_MARKER;};M.isGeoRoleSupportArea=function U(d){var c=1,e=3,g=2,b=8,f=9,a=7;return d===e||d===g||d===b||d===f||d===c||d===a;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.fx.AnimateProp");var S=mstrmojo.css;var Q=10;function C(W,Z,Y){W.pauseScrollRendering(true);var X=W.scrollboxNode,V=W.animate?W.scrollEffect:null;if(V&&V.play){if(V.isPlaying){V.cancel();}V.props={scrollTop:{start:X.scrollTop,stop:Z,isStyle:false}};V.onEnd=function(){W.pauseScrollRendering(false,null,Y);};V.play();}else{X.scrollTop=Z;W.pauseScrollRendering(false,null,Y);}}function K(c,e,V){var W=4;if(!V){V=0;}var f=Math.round(c.renderBlockSize/2);c.fillAt(Math.max(0,e-f),e+f);var b=c.itemsContainerNode,a=b.childNodes[e],Z=c.listMapper.itemOffsetTop(c,b,null,a),d=parseInt(c.scrollboxNode.clientHeight/2,10)-a.offsetHeight/2,X=Math.max(0,c.spacerMargin+Z-d);if(Math.abs(c.scrollboxNode.scrollTop-X)>2){C(c,X,c.renderOnScroll?function(){if(V<=W){K(c,e,V++);}}:null);}else{var Y=c.animate?c.scrollEffect:null;if(Y&&Y.isPlaying&&Y.cancel){Y.cancel();c.pauseScrollRendering(false);}}}function J(X){var Y=X.itemsContainerNode,V=Y.lastChild,W=V?V.offsetTop+V.offsetHeight-Y.firstChild.offsetTop:0;return W;}function U(W){var V=J(W),X=Math.max(0,parseInt((W.scrollboxNode.clientHeight-V)/2,10));C(W,Math.max(0,W.spacerMargin-X));}function H(X){var V=X.selectedIndex,W=V>-1;X.set("hasSelection",W);if(!X.domNode){return ;}if(W){K(X,V);}else{U(X);}}function E(W){var Y=W.scrollboxNode,V=J(W),X=V>Y.clientHeight/2;S.toggleClass(W.upArrowNode,["enabled"],X);S.toggleClass(W.downArrowNode,["enabled"],X);}function N(V,W){var X=V.scrollboxNode;X.scrollTop=Math.min(Math.max(X.scrollTop+W,0),X.scrollHeight-X.offsetHeight);}function B(W,V){if(!W._scrollInter){var X=Q*(V?-1:1);W._scrollInter=window.setInterval(function(){N(W,X);},50);}}function R(V){if(V._scrollInter){window.clearInterval(V._scrollInter);V._scrollInter=null;}}mstrmojo._IsDial=mstrmojo.provide("mstrmojo._IsDial",{markupString:'<div id="{@id}" class="mstrmojo-Dial {@cssClass}" style="position:relative;"><div class="mstrmojo-Dial-uparrow"  onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], true)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], true)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"></div><div class="mstrmojo-Dial-scrollbox {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-Dial-spacer" style="{@spacerCssText}"><div class="mstrmojo-Dial-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div></div></div><div class="mstrmojo-Dial-dnarrow" onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], false)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], false)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.childNodes[1];},spacerNode:function(){return this.domNode.childNodes[1].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},upArrowNode:function(){return this.domNode.childNodes[0];},downArrowNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){S.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);}},animate:true,itemsEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:500,interval:25,slot:"itemsContainerNode",preStart:function(){var W=this.widget[this.slot],V=(W&&W.offsetWidth)||0;this.props=V?{left:{start:-V,stop:0,suffix:"px",isStyle:true}}:{};},revertOnCancel:false},scrollEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:250,interval:25,slot:"scrollboxNode",revertOnCancel:false},multiSelect:false,holdJumpOnly:true,audibles:{"*":true,hasSelection:false},initSpacer:function I(){var V=(this.cssText||"").match(/height:\s*(\d*)px/);if(V){this.spacerMargin=parseInt(Number(V[1])/2,10);var W=this.spacerMargin+"px";this.spacerCssText="padding-top: "+W+"; padding-bottom: "+W+";";}else{this.spacerMargin=0;delete this.spacerCssText;}},center:function T(){H(this);},preBuildRendering:function(){this.initSpacer();return this._super();},postBuildRendering:function D(){this._super();this.center();E(this);},refreshScroll:function G(){this.center();E(this);},prechange:function O(V){this._super(V);if(this.hasRendered){if(!this.multiSelect||(V&&V.added&&V.added.length)){this.center();}}},onclickarrow:function A(X,W,V){N(this,Q*(V?-1:1));},onmouseoverarrow:function L(X,W,V){if(!this.holdJumpOnly){B(this,V);}},onmouseoutarrow:function M(X,W,V){R(this);},onmousedownarrow:function F(X,W,V){if(this.holdJumpOnly){B(this,V);}},onmouseuparrow:function P(X,W,V){R(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},n=function m(k,j){for(var o=k;o<j;o++){Y[W++]=l;var p=b.build(h,d,e[o],o);if(V[o]){p=p.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=p;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){n(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){n(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.color","mstrmojo.hash","mstrmojo.array");var AA=mstrmojo.color,V=mstrmojo.hash,BD=mstrmojo.array,A9=mstrmojo.css,d=mstrmojo.num;var BB=1,Aj=2,Ak=3,Ax=4,AR=5,AS=6;var BI="FormattingFont",I="FormattingAppearance",X="FormattingAlignment",AY="FormattingSize",Q="FormattingPatterns",F="FormattingBorder",Aw="FormattingOrder",E="FormattingView",O="FormattingSelector",Am="Template Formatting",L="FormattingPadding",Ah="AnalyticalEngineProperties",Ap="RWDocumentProperties",A6="FormattingPage",N="Mobile",T="VLDB Select";var Ag=1;var g="n",M="h",BE="w",y="wm",A3="pw",W="ml",A4="mr",q="upwalw",n="ff",Ab="fsz",A7="fw",z="fit",A8="fun",k="fst",p="fc",U="alh",o="alv",AV="atw",AF="atd",a="textOverflow",Af="bc",D="bgs",H="btc",Ae="brc",AO="bbc",m="blc",i="bts",BG="brs",Ay="bbs",AU="bls",AL="borderColor",At="borderStyle",c="zIndex",AM="showTitleBar",h="title",As="ctrlStyle",t="ctrlOrientation",Ar="ctrlOrientationBehavior",f="ctrlMultiselect",C="ciwm",A5="cmcy",Au="sec",l="easow",AE="layoutXml",J="lockAspectRatio",Ad="ism",e="shw",Av="mg",BF="lhv",Y="gridVPadding",Aa="gridHPadding",AZ="ln",AD="sar",B="hnv",AX="iw",AT="ih",AH="tsp",AP="visible",R="rf",BH="jad",Ai="jdc",Az="fs",A2="ssc",b="sstyle",x="hgl";function P(BJ){return BJ;}function AJ(BJ){return parseInt(BJ,10);}var w={name:"encode",_def:P};w[Ak]=function(BJ){return BJ?1:0;};w[Aj]=function(BJ){if(BJ==="transparent"){return -1;}if(BJ.length===4){BJ=BJ.replace(/([0-9a-f])/ig,"$1$1");}BJ=AA.rgbStr2hex(BJ);return parseInt(BJ.substring(5)+BJ.substring(3,5)+BJ.substring(1,3),16);};w[Ax]=AJ;w[BB]=function(BJ){if(typeof BJ==="number"){return d.toLocaleString(BJ);}return P(BJ);};w[AS]=function(BL){if(BL==="none"){return 0;}var BK=BL.match(/([0-9]+[,\.]?[0-9]*pt)/)[0],BJ=BL.match(/pt ([\w\W]*)/)[1];if(BK==="2pt"){return 5;}switch(BJ){case"solid":return 1;case"dashed":return 3;case"dotted":return 4;default:throw new Error("Invalid border style value in FormatModel::encodeValue.");}};var BC={name:"decode",_def:P};BC[Ak]=function(BJ){return parseInt(BJ,10)===1;};BC[Aj]=function(BJ){if(BJ===-1){return"transparent";}if(typeof BJ==="number"){return AA.decodeColor(BJ);}if(BJ.length===4){return BJ.replace(/([0-9a-f])/ig,"$1$1");}return AA.rgbStr2hex(BJ);};BC[Ax]=AJ;BC[AS]=function(BL){if(BL===undefined||BL===0){return"none";}var BK="1pt",BJ="solid";if(BL===5){BK="2pt";}if(BL===3){BJ="dashed";}else{if(BL===4){BJ="dotted";}}return BK+" "+BJ;};function A0(){return this.pn.toLowerCase();}function AG(BJ,BL,BM){var BK=document.createElement("div");BK.style[BM||BL]=BJ[BL];return BK;}function G(BJ){return function(){return AA.rgbStr2hex(BJ.apply(this,arguments));};}function Ac(){var BJ=A0.call(this);return BJ==="underline"?BJ:"line-through";}var Ao={name:"extract"},S=Ao._def=function(BJ,BL,BM){var BK=AG(BJ,BL||this.getFormatBlockName(),BM);return BK.style[this.getCssName()];};Ao[Aj]=G(S);function s(BJ){return S.call(this,BJ,this.getFormatBlockName())===A0.call(this);}function A(BJ){var BK=S.call(this,BJ,this.getFormatBlockName(),this.getCssName());return BK.indexOf(Ac.call(this))>-1;}function An(BJ){var BK=this.getFormatBlockName();return AA.rgbStr2hex(S.call(this,BJ,BK,BK+this.pn));}var BA={name:"resolve"},Z=BA._def=function(BJ,BM,BL,BN){BL=BL||this.getFormatBlockName();var BK=AG(BJ,BL);BK.style[BN||this.getCssName()]=BM;return BK.style[A9.convertCssToCamelCase(BL)];};BA[Aj]=function(BJ,BL,BK,BM){if(BL.or!==undefined){return BL;}return AA.rgbStr2hex(Z.call(this,BJ,BL,BK,BM));};function AN(BJ,BK){return Z.call(this,BJ,BK?A0.call(this):"normal");}function AK(BK,BM){var BL=(BK[this.getFormatBlockName()]||"").split(" "),BJ=Ac.call(this);if(BM){if(BL.indexOf(BJ)===-1){BL.push(BJ);}}else{BL=BL.filter(function(BN){return BN!==BJ;});}return Z.call(this,BK,BL.join(" "));}var AW={name:"update"},A1=AW._def=function(BJ,BK){BJ[this.getFormatBlockName()]=this.resolve(BJ,BK);return BJ;};var AI={};AI[g]={ps:I,pn:"Name",pt:BB};AI[M]={ps:AY,pn:"Height",pt:BB};AI[BE]={ps:AY,pn:"Width",pt:BB};AI[y]={ps:AY,pn:"WidthMode",pt:Ax};AI[A3]={ps:A6,pn:"PageWidth",pt:BB};AI[W]={ps:A6,pn:"MarginLeft",pt:BB,fn:"margin-left"};AI[A4]={ps:A6,pn:"MarginRight",pt:BB,fn:"margin-right"};AI[q]={ps:A6,pn:"UsePageWidthAsLayoutWidth",pt:Ak};AI[n]={ps:BI,pn:"Name",pt:BB,fn:"font",cn:"fontFamily",extract:function(){return S.apply(this,arguments).replace(/['"]/g,"");}};AI[Ab]={ps:BI,pn:"Size",pt:Ax,fn:"font",cn:"fontSize"};AI[A7]={ps:BI,pn:"Bold",pt:Ak,fn:"font",cn:"fontWeight",extract:s,resolve:AN};AI[z]={ps:BI,pn:"Italic",pt:Ak,fn:"font",cn:"fontStyle",extract:s,resolve:AN};AI[A8]={ps:BI,pn:"Underline",pt:Ak,fn:"text-decoration",extract:A,resolve:AK};AI[k]={ps:BI,pn:"Strikeout",pt:Ak,fn:"text-decoration",extract:A,resolve:AK};AI[p]={ps:BI,pn:"Color",pt:Aj};AI[U]={ps:X,pn:"Horizontal",pt:Ax,fn:"text-align"};AI[AV]={ps:X,pn:"TextWrap",pt:Ak,fn:"white-space"};AI[AF]={ps:X,pn:"TextDirection",pt:Ax};AI[o]={ps:X,pn:"Vertical",pt:Ax};AI[a]={ps:AY,pn:"TextOverflow",pt:Ak};AI[Af]={ps:Q,pn:"FillColor",pt:Aj,x:Ag,fn:"background-color",update:function(BJ,BL){var BK=BJ.fx;if(BL.or!==undefined){if(!BK){BK=BJ.fx={};}var BM=BK.gd=BK.gd||{};BM.ec=BL.c2;BM.sc=BL.c1;BM.t=BL.or;delete BJ[this.getFormatBlockName()];BJ.fx=BK;}else{if(BK){delete BK.gd;}A1.call(this,BJ,BL);}return BJ;}};AI[D]={ps:Q,pn:"FillStyle",pt:Ax};AI[A2]={ps:Q,pn:"SelectorSelectionColor",pt:Aj};AI[b]={ps:Q,pn:"SelectorSelectionFillStyle",pt:Ax};AI[H]={ps:F,pn:"TopColor",pt:Aj,fn:"border",extract:An};AI[Ae]={ps:F,pn:"RightColor",pt:Aj,fn:"border",extract:An};AI[AO]={ps:F,pn:"BottomColor",pt:Aj,fn:"border",extract:An};AI[m]={ps:F,pn:"LeftColor",pt:Aj,fn:"border",extract:An};AI[AL]={ps:F,pn:["TopColor","RightColor","BottomColor","LeftColor"],pt:Aj,fn:"border",extract:An,resolve:G(function(BJ,BL){var BM=this.getFormatBlockName(),BK=Z.call(this,BJ,BL,BM,BM+"Color"),BN=BK.indexOf("rgb");if(BN>-1){BK=BK.slice(0,BN)+AA.rgbStr2hex(BK.slice(BN));}return BK;})};AI[At]={ps:F,pn:["TopStyle","RightStyle","BottomStyle","LeftStyle"],pt:AS,fn:"border",extract:An,resolve:function(BJ,BM){var BK=BM.split(" "),BN=this.getFormatBlockName();BJ[BN]=Z.call(this,BJ,BK[0],BN,BN+"Width");var BL=Z.call(this,BJ,BK[1]||"none",BN,BN+"Style"),BO=BL.indexOf("rgb");if(BO>-1){BL=BL.slice(0,BO)+AA.rgbStr2hex(BL.slice(BO));}if(BL.indexOf("#")===-1&&BL.indexOf("transparent")===-1){BL+=" transparent";}return BL;}};AI[i]={ps:F,pn:"TopStyle",pt:AS,fn:"border",extract:An};AI[BG]={ps:F,pn:"RightStyle",pt:AS,fn:"border"};AI[Ay]={ps:F,pn:"BottomStyle",pt:AS,fn:"border",extract:An};AI[AU]={ps:F,pn:"LeftStyle",pt:AS,fn:"border",extract:An};AI[c]={ps:Aw,pn:"ZIndex",pt:Ax,fn:"z-index"};AI[AM]={ps:E,pn:"ShowTitleBar",pt:Ak};AI[h]={ps:E,pn:"Title",pt:BB};AI[As]={ps:O,pn:"Style",pt:Ax};AI[t]={ps:O,pn:"Orientation",pt:Ax};AI[Ar]={ps:O,pn:"OrientationBehavior",pt:Ax};AI[f]={ps:O,pn:"Multiselect",pt:Ak};AI[C]={ps:O,pn:"ItemWidthMode",pt:Ax};AI[A5]={ps:O,pn:"MetricConditionType",pt:Ax};AI[Au]={ps:O,pn:"ShowElementCount",pt:Ax};AI[l]={ps:O,pn:"ExportAsShownOnWeb",pt:Ax};AI[AE]={ps:AY,pn:"LayoutXML",pt:AR};AI[J]={ps:AY,pn:"LockAspectRatio",pt:Ak};AI[Ad]={ps:AY,pn:"ImageSizeMode",pt:Ax};AI[AT]={ps:AY,pn:"ImageHeight",pt:BB};AI[AX]={ps:AY,pn:"ImageWidth",pt:BB};AI[AH]={ps:Ap,pn:"layoutBarPosition",pt:Ak};AI[Az]={ps:Ap,pn:"ExecutionFullScreenMode",pt:Ak};AI[AP]={ps:I,pn:"Visible",pt:Ak};AI[AZ]={ps:Am,pn:"LongNames",pt:BB};AI[AD]={ps:Ah,pn:"ShowAllRows",pt:BB};AI[B]={ps:Ah,pn:"HideNullZeroValues",pt:BB};AI[Aa]={ps:L,pn:["LeftPadding","RightPadding"],pt:BB};AI[Y]={ps:L,pn:["TopPadding","BottomPadding"],pt:BB};AI.rowsshw={ps:Am,pn:"ShowRowHeaders",pt:BB};AI.rowsmg={ps:Am,pn:"MergeCells",pt:BB};AI.rowslhv={ps:Am,pn:"LockRowHeaders",pt:BB};AI.colsshw={ps:Am,pn:"ShowColumnHeaders",pt:BB};AI.colsmg={ps:Am,pn:"MergeColumnCells",pt:BB};AI.colslhv={ps:Am,pn:"LockColumnHeaders",pt:BB};AI[R]={ps:N,pn:"RefreshFrequency",pt:Ax};AI[BH]={ps:T,pn:"Join Across Datasets",pt:Ax};AI[Ai]={ps:T,pn:"MCE Join To Get Data Combination",pt:Ax};AI[x]={ps:I,pn:"Highlight",pt:Ax};BD.forEach(V.keyarray(AI),function(BJ){var BK=AI[BJ];BK.getFormatBlockName=function(){var BM=this.fn;if(!BM){var BL=this.pn;BM=BL.charAt(0).toLowerCase()+BL.substr(1);}return BM;};BK.getCssName=function(){var BL=this.getFormatBlockName.call(this),BM=this.cn;if(!BM){BM=A9.convertCssToCamelCase(BL);}return BM;};BD.forEach([w,BC,Ao,BA,AW],function(BL){var BM=BL.name;BK[BM]=BK[BM]||BL[BK.pt]||BL._def;});});function Aq(BM,BL,BJ){var BK=BJ[BM.ps]=BJ[BM.ps]||{};BL=BM.encode(BL);BD.forEach([].concat(BM.pn),function(BN){BK[BN]=BL;});return BJ;}function AC(BP,BO,BJ){var BN=BP.x;if(BN){if((BN&Ag)>0){var BM=!!BO.c1,BL=0;if(BM){Aq(BP,BO.c1,BJ);var BK=BJ[Q];BK.GradientColor=BP.encode(BO.c2);BK.GradientAngle=BO.or?0:90;BK.GradientXOffset=0;BK.GradientYOffset=0;BL=2;}else{if(BP.encode(BO)===-1){BL=1;}else{Aq(BP,BO,BJ);}}return Aq(AI[D],BL,BJ);}}return null;}mstrmojo.models.FormatModel={getFormatUpdate:function AQ(BK,BN,BJ){var BM=AI[BK];if(!BM){throw new Error("Invalid property "+BK+" in FormatModel::getFormatUpdate.");}BJ=BJ||{};var BL=AC.call(this,BM,BN,BJ);if(BL){return BL;}return Aq(BM,BN,BJ);},getFormatPropertyInfo:function j(BJ){return AI[BJ];},getValueFromUpdate:function K(BK,BL){var BN=AI[BK],BJ=null;try{BJ=BL[BN.ps][BN.pn];}catch(BM){}return BJ;},getGradientValues:function AB(BK){var BJ=BK.fx&&BK.fx.gd;if(BJ){var BM={c1:BJ.sc,c2:BJ.ec,or:BJ.t};return BM;}if(BK[D]===2){var BL={c1:BK.bc,c2:BK.gdc,or:BK.gda===90?0:1};return BL;}return null;},decodeValue:function v(BJ,BK){return AI[BJ].decode(BK);},updateFormatBlock:function Al(BJ,BK,BL){return AI[BK].update(BJ,BL);},getFormatBlockValue:function u(BJ,BK){return AI[BK].extract(BJ);},GradientType:null,FormatObjectType:null,PROPERTY_INFO_TYPE:null,ENUM_PROPERTY_NAMES:{NAME:g,HEIGHT:M,WIDTH:BE,WIDTH_MODE:y,PAGE_WIDTH:A3,MARGIN_LEFT:W,MARGIN_RIGHT:A4,USE_PAGE_WIDTH_AS_LAYOUT_WIDTH:q,FONT_FAMILY:n,FONT_SIZE:Ab,FONT_WEIGHT:A7,FONT_STYLE:z,UNDERLINE:A8,LINE_THROUGH:k,COLOR:p,TEXT_ALIGN:U,VERTICAL_ALIGN:o,TEXT_WRAP:AV,TEXT_DIRECTION:AF,TEXT_OVERFLOW:a,BACKGROUND_COLOR:Af,FILL_STYLE:D,BORDER_TOP_COLOR:H,BORDER_RIGHT_COLOR:Ae,BORDER_BOTTOM_COLOR:AO,BORDER_LEFT_COLOR:m,BORDER_TOP_STYLE:i,BORDER_RIGHT_STYLE:BG,BORDER_BOTTOM_STYLE:Ay,BORDER_LEFT_STYLE:AU,BORDER_COLOR:AL,BORDER_STYLE:At,Z_INDEX:c,SHOW_TITLE_BAR:AM,TITLE:h,CONTROL_STYLE:As,CONTROL_ORIENTATION:t,CONTROL_ORIENTATION_BEHAVIOR:Ar,CONTROL_MULTISELECT:f,CONTROL_ITEM_WIDTH_MODE:C,CONTROL_METRIC_CONDITION_TYPE:A5,CONTROL_SHOW_ELEMENT_COUNT:Au,CONTROL_EXPORT_AS_SHOWN_ON_WEB:l,LAYOUT_XML:AE,LOCK_ASPECT_RATIO:J,IMAGE_SIZE_MODE:Ad,SHOW_HEADER:e,MERGE_HEADER:Av,LOCK_HEADER:BF,LONG_NAME:AZ,SHOW_ALL_ROWS:AD,HIDE_NULL:B,IMAGE_WIDTH:AX,IMAGE_HEIGHT:AT,VISIBLE:AP,LAYOUT_TAB_POSITION:AH,GRID_VERTICAL_PADDING:Y,GRID_HORIZONTAL_PADDING:Aa,REFRESH:R,JOIN_ACROSS_DATASET:BH,MCE_JOIN_TO_GET_DATA_COMBINATION:Ai,FULL_SCREEN_MODE:Az,SELECTOR_SELECTION_COLOR:A2,SELECTOR_SELECTION_FILL_STYLE:b,VIZ_HIGHLIGHTING:x}};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var Z=mstrmojo.css,H=mstrmojo.dom,O=mstrmojo.array,K={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},X="scrollingMode",R="scrolling",c=3;var L=H.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function J(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function P(e,d){var j=H.eventTarget(d,e),h=this.scrollNode,g=H.position(h),i=this.scrollTrackNodes,f=this.scrollBarNodes,k=function k(t){var q=j===i[t];if(q){var u=K[t],l=f[t],v=H.position(l),n=H.getMousePosition(e,d)[u.position],o=n-v[u.position],m=o>0?1:-1,s=h[u.scrollDimension],w=Math.abs(o-(v.h/2))*(s/g[u.dimension]),p={};p[u.scroll]={isStyle:false,start:h[u.scroll],stop:h[u.scroll]+(m*Math.min(s/3,500,w)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:p,duration:200,interval:10,target:h})).play();}};k.call(this,"h");k.call(this,"v");}function B(e,d){var h=this.scrollNode,g=e.type==="mousewheel",f=g?-1:1;mstrmojo.array.forEach(["h","v"],function(o){var m=K[o],j=g?"wheelDelta":"delta",l=e[j+{h:"X",v:"Y"}[o]]*f,k=Math.abs(l),i=l/k,n=k===3&&H.isFF&&!L;h[m.scroll]+=n?i*40:l;});H.stopPropogation(d,e);H.preventDefault(d,e);}function b(i){var h=K[i],g=this.scrollNode,f=H.position(g),e=f[h.dimension],j=g[h.scrollDimension],d=Math.ceil(e)/j;return A(d,e,j);}function A(e,d,f){return(!isNaN(e)&&e<1)&&(Math.abs(d-f)>c);}function C(z){var s="px",l=K[z],f=this.scrollNode,m=J.call(this),AA=H.position(f),n=AA[l.dimension],u=f[l.scrollDimension],e=Math.ceil(n)/u,y=this.scrollBarNodes,j=y[z],p=this.scrollTrackNodes,q=p[z],w=A(e,n,u),g=l.cls;if(!j){q=p[z]=document.createElement("div");var h=this,o=function(AC){P.call(h,AC);},k=function(AC){B.call(h,AC);},v=function(AE,AC,AD){H.attachEvent(AE,AC,AD);h.installedEventListeners.push({e:AE,evt:AC,fn:AD});};v(q,"click",o);q.className="mstrmojo-scrolltrack "+g;j=y[z]=document.createElement("div");j.className="mstrmojo-scrollbar "+g;q.appendChild(j);m.appendChild(q);var x=mstrApp.isSingleTier?"mousewheel":"wheel";v(q,x,k);v(j,x,k);}var AB=j.style,i=(f[l.scroll]/f[l.scrollDimension]),d=H.delta(f,J.call(this))[l.position],t=q.style;if(w){t[l.styleDir]=d+s;AB[l.styleDim]=(e*n)+s;AB[l.styleDir]=(n*i)+s;}Z.toggleClass(m,l.hostCls,w);Z.toggleClass(f,l.scrollNodeCls,w);return w;}function G(){return !(mstrApp.isSingleTier&&L);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function T(d){this._super(d);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=G();}this.installedEventListeners=[];},onRender:function I(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function F(){var e=this.scrollNode;if(e){var d=H.attachMarkupEvent(this.id,e,"scroll");this.installedEventListeners.push({e:e,evt:"scroll",fn:d});}if(!this.hasCustomScrollbar){Z.addClass(e,"mstrmojo-sb-show-default");return ;}if(e){Z.addClass(J.call(this),"mstrmojo-scrollbar-host");Z.addClass(e,"mstrmojo-scrollNode");}},updateScrollbars:function a(){if(!this.hasRendered){return ;}this.setupScrollNodes();if(!this.hasCustomScrollbar){if(this.scrollNode){this.scrollNode.style.overflowX=b.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};var d=this.scrollNode.style;d.overflowY=C.call(this,"v")?"scroll":"hidden";d.overflowX=C.call(this,"h")?"scroll":"hidden";}},onscroll:function W(){var k=this.scrollNode;if(k&&this.hasCustomScrollbar){var h=function h(l){var m=parseInt(l);return m===null||isNaN(m)?0:m;},i=H.position(k),j=i.h-h(Z.getStyleValue(k,"padding-bottom")),e=i.w-h(Z.getStyleValue(k,"padding-right")),g=this.scrollBarNodes,f=g.v,d=g.h;if(k.scrollHeight-j>0){f.style.top=((j-H.position(f).h)*(k.scrollTop/(k.scrollHeight-j)))+"px";}if(k.scrollWidth-e>0){d.style.left=((e-H.position(d).w)*(k.scrollLeft/(k.scrollWidth-e)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function E(e){var h=this.scrollNode,g=H.position(h),f=e.src.node,d=this.scrollBarNodes;if(this.isDraggingScrollBar(e)){return{isScrollBar:true,direction:f===d.v?"v":"h",scrollTop:h.scrollTop,scrollLeft:h.scrollLeft,conversionRatio:{y:h.scrollHeight/g.h,x:h.scrollWidth/g.w}};}return(this._super&&this._super(e));},isDragValid:function D(d){return this.isDraggingScrollBar(d)||(this._super&&this._super(d))||false;},isDraggingScrollBar:function S(e){var f=e.src.node,d=this.scrollBarNodes;return !!d&&(f===d.v||f===d.h);},ondragstart:function Y(d){if(this.isDraggingScrollBar(d)){Z.addClass(d.src.node,R);Z.addClass(J.call(this),X);}if(this._super){this._super(d);}},shouldDragBubble:function Q(d){var e=d.src.node,f=this.scrollTrackNodes;return !!f&&(e===f.v||e===f.h);},ondragmove:function N(e){if(this.isDraggingScrollBar(e)){var m=e.tgt,d=e.src,n=m.pos,f=d.pos,j=d.node,i=this.scrollNode,l=this.scrollBarNodes,k=d.data,h={y:(n.y-f.y),x:(n.x-f.x)},g=k.conversionRatio;if(j===l.v){i.scrollTop=k.scrollTop+(h.y*g.y);}else{i.scrollLeft=k.scrollLeft+(h.x*g.x);}}if(this._super){this._super(e);}},ondragend:function N(d){if(this.isDraggingScrollBar(d)){Z.toggleClass(d.src.node,R,false);Z.toggleClass(J.call(this),X,false);}if(this._super){this._super(d);}},widgetResized:function M(){if(this._super){this._super();}this.updateScrollbars();},unrender:function U(d){O.forEach(this.installedEventListeners,function(e){H.detachEvent(e.e,e.evt,e.fn);});delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(d);},getDefaultScrollBarProps:function V(d){return K[d];}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(S){if(this._editComplete){return ;}var W,Q=false,V=this.text,T=false;if(S===C){W=V;T=true;Q=true;}if(!S||(!this.allowNewLine&&S===L)){var R=this[this.editableSlot],U=R.innerText||R.textContent||"";if(!this.allowNewLine){W=U.replace(/\n/g,"");}else{W=U;}Q=true;if(!this.allowEmptyText&&W.length===0){W=V;T=true;}}if(Q){this._editComplete=true;W=W.replace(/\u00A0/g,"\u0020");this.text=W;this.set("isEditing",false);this.onTextEditComplete(W!==V,V);delete this._editComplete;}if(T){this.refresh();}}function E(Q){var R={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[R[Q.name]]&&Q.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(S,R,Q){if(typeof R["on"+Q]!=="function"){H.attachMarkupEvent(S,R,Q);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,allowEmptyText:false,allowNewLine:false,editOnDoubleClick:false,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var S=this.editableSlot,Q=this[S],T=this[this.editButtonSlot||S];K.addClass(Q,"hasEditableText");this.text=this.text||Q.innerText||Q.textContent||"";Q.innerHTML=N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");var R=this.id;if(this.editOnClick){F(R,T,"click");}F(R,T,"dblclick");F(R,Q,"blur");F(R,Q,"keyup");F(R,Q,"keydown");},onclick:function P(Q){E.call(this,Q);if(this._super){this._super(Q);}},ondblclick:function G(Q){E.call(this,Q);},onblur:function M(){I.call(this);},onkeyup:function B(R){var Q=window.event||R.e;I.call(this,Q.keyCode);},onkeydown:function J(R){var Q=window.event||R.e;if(Q.keyCode===L){I.call(this,Q.keyCode);R.cancel();}},_set_text:function D(S,Q){var R=this.text;this.text=Q;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(Q||"",true);}return(R!==Q);},onisEditingChange:function O(){if(this.hasRendered){var Q=this[this.editableSlot],R=!!this.isEditing;Q.contentEditable=R;Q.spellcheck=false;K.toggleClass(Q,"editable",R);if(R){Q.focus();H.setElementSelection(Q);}else{Q.blur();Q.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var J={T:["top","left"],D:["height","width"],B:["border","border-color","border-style","border-width"],F:["font","color","text-decoration"],P:["padding"],BG:["background-color","fx"],RW:[]};J.RW=["z-index"].concat(J.T.concat(J.D));var D=mstrmojo.dom,O=mstrmojo.css;function N(T,V,S){var U=T[V]||[];U.push(S);T[V]=U;}function L(W,V){var U=((W&&W.fmts)||null);if(V){var Y=W.thresholds,T=Y&&Y[V];if(T){var X={},Z;for(Z in U){X[Z]=T[Z]||U[Z];}for(Z in T){var S=T[Z];X[Z]=(typeof S==="string")?(S+" !important"):S;}U=X;}}return U;}mstrmojo._Formattable=mstrmojo.provide("mstrmojo._Formattable",{_mixinName:"mstrmojo._Formattable",formatHandlers:null,thresholdId:null,getCacheKey:function E(){return"css_cache"+(this.thresholdId||"");},update:function G(T){var S=true;this.invisible=!!(T&&T.data&&T.data.invisible);if(this._super){S=this._super(T);}return S;},buildCSSFormatString:function H(U,d){var h=this.formatHandlers[U],j=h.src?d[h.src]:d;if(!j){return null;}var b=h.props||h;if(!b){return null;}var X=[],g=-1;var V=b.length-1;for(V;V>=0;V--){var i=b[V];var c=J[i]||[i];var a=c.length-1;for(a;a>=0;a--){i=c[a];var T=j[i];if(T!==undefined){if(i==="fx"){var Y=T,S={};var e=Y.gd;if(e){this.formatGradient(e,S);}var W=parseInt(Y.rt,10);if(W){if(W===1||W===3){this.formatTextRotation(Y.rt,S);}}if(Y.ds){this.formatDropShadow(Y,S);}var Z;for(Z in S){X[++g]=Z+":"+S[Z].join(" ");}}else{X[++g]=i+":"+T;}}}}if(this.invisible){X.push("visibility:hidden");}return X.join(";")+";";},applyCSSFormatToNode:function I(U,S){var V=this[U],T=V&&V.style;if(T){this.buildCSSFormatString(U,S).split(";").forEach(function(W){var X=W.split(":");T[O.convertCssToCamelCase(X[0])]=X[1];});}},clearSlotBackgroundCSS:function F(T){var U=this[T],S=U&&U.style;if(S){S.background="transparent none 0 0 no-repeat";S.filter="none";}},preBuildRendering:function B(){this._super();var V=this.formatHandlers,S=this.getFormats();if(V&&S){var W=this.defn=this.defn||{},X=this.getCacheKey(),U=W[X];if(!U){U=W[X]={};for(var T in V){var Z=T+"CssText";this[Z]=U[Z]=this.buildCSSFormatString(T,S)||"";}}else{var Y;for(Y in U){this[Y]=U[Y];}}}return true;},formatGradient:function P(S,U){var T=O.buildGradient(S.t,S.sc,S.ec);if(T){N(U,T.n,T.v);}},formatDropShadow:function K(W,U){if(D.supports(D.cssFeatures.DROP_SHADOW)){var V=W.ds;if(D.isDXIE){N(U,"filter","progid:DXImageTransform.Microsoft.DropShadow(Color='#66000000',Positive='true',OffX="+V+",OffY="+V+")");}else{var S=[V,V],T=parseInt(W.rt,10);if(T===1||T===3){S[((T===1)?1:0)]=-V;}N(U,(D.isWK?"-webkit-":"")+"box-shadow",S.join("px ")+"px 3px 0px #888");}}},formatTextRotation:function C(T,S){if(D.supports(D.cssFeatures.TEXT_ROTATION)){if(D.isDXIE){N(S,"filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+T+")");}else{var U=(T===1)?90:-90;N(S,D.CSS3_PREFIX+"transform-origin","top left");N(S,D.CSS3_PREFIX+"transform","rotate("+U+"deg)");}}},getFormats:function R(){if(!this.fmts){this.fmts=L.call(this,this.defn,this.thresholdId);}return this.fmts;},clearFormats:function A(){this.fmts=undefined;},createEmptyFormats:function(){return(this.fmts=this.fmts||{});},clearCache:function Q(){delete this.defn[this.getCacheKey()];},unrender:function M(S){if(this.thresholdId){this.fmts=null;}this._super(S);}});mstrmojo._Formattable.getBorderWidths=function(W){var V=W.getFormats(),S=(V.border)?V.border.match(/(\d*|\d*\.\d*)pt/)[0]:V["border-width"],U=W.model,T=U.docModel;return O.getBorderWidths(S,(T&&T.dpi)||U.dpi);};}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var G=mstrmojo.dom,J=mstrmojo.css,H="selected";function B(S,T,U,R,W){var V=W.listHooks[S];if(V&&V.call(W,T,U,R)){return ;}J.toggleClass(T,H,S==="select");}function I(U,T,S){var V=this[U],R=V?V.split(T):[];this[U]=mstrmojo.array.distinct(R.concat(S.split(T))).join(T);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function Q(R){this._super(R);this._shiftStartIndex=-1;},getItemMarkup:function O(S,R){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function E(R){return R.n||"";},getItemProps:function K(V,R){var S=!!this.selectedIndices[R],W={tag:"div",sel:S,cls:"",n:this.getItemDisplayName(V),style:"",idx:R,addCls:function T(Y){I.call(this,"cls"," ",Y);},addStyle:function U(Y){I.call(this,"style",";",Y);},title:V.title||""};if(S){W.addCls(H);}var X=V.cls;if(X){W.addCls(X);}return W;},itemRenderer:{render:function A(S,R,T){S._renderIdx=R;return mstrmojo.string.apply(T.getItemMarkup(S,R),T.getItemProps(S,R));},select:function L(S,T,R,U){B("select",S,T,R,U);},unselect:function D(S,T,R,U){B("unselect",S,T,R,U);}},onclick:function P(R){try{var T=this.getItemFromTarget(R.getTarget());if(T){R.cancel();this.doItemSelect(T,R||{});}}catch(S){mstrApp.onerror(S);}},doItemSelect:function F(j,b){var R=b.hWin,h=b.e,c=j._renderIdx,W=j._positionIdx,S=G.isMetaKey(R,h),Z=G.shiftKey(R,h),Y=this.multiSelect,U=this.useListModKeys,d=this._shiftStartIndex,X=this.selectedIndices;if(Y&&U&&Z&&d>-1){var g=[],T=[],V=Math.min(d,c),k=Math.max(d,c),f;for(f=0;f<this.items.length;f++){if(V<=f&&f<=k){if(!X[f]){g.push(f);}}else{if(X[f]){T.push(f);}}}this.addSelect(g);this.removeSelect(T);}else{if(Y&&(!U||S)){var a=(X[c])?"remove":"add";this[a+"Select"](c,false,W);}else{this.singleSelect(c,false,W);}this._shiftStartIndex=c;}},onclearSelection:function N(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function C(S){var R=G.findAncestorByAttr(S,"idx",true,this.domNode);return(R&&R.node)||null;},getItemFromTarget:function M(T){var S=this.getItemNodeFromTarget(T),R=S&&parseInt(S.getAttribute("idx"),10);if(R!==null&&!isNaN(R)&&this.items){return this.items[R];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=H;}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(T){if(!T||!T.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var V=23242571;var R=-693593;if(T.ifTime>V){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}else{if(T.ifTime>0){var W=this.DAYSToYMD(Math.floor(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<0){var W=this.DAYSToYMD(Math.ceil(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}}}}S*=H;var U=S+0.5;if(U==H){U--;}if(U>0){this.mnHour=Math.floor(U/A);U-=this.mnHour*A;this.mnMinute=Math.floor(U/L);U-=this.mnMinute*L;this.mnSecond=Math.floor(U/C);U-=this.mnSecond*C;this.mnMillisecond=Math.floor(U);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S=S+H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var T=(S-R*H)/H;if(T<0){R--;T+=1;}return R>=0?R+T:R-T;},DAYSToYMD:function N(T){var W=0;var Y=0;var S=0;T+=693959;var V=Math.floor(T/365);var U=T-V*365;var X=Math.floor(V/4)-Math.floor(V/100)+Math.floor(V/400);U=U-X;if(U<0){V--;U+=365;while(U<=0){V--;U+=365;}}var R=T-(V*365+Math.floor(V/4)+(V%4?1:0)-Math.floor((V-1)/100)+Math.floor((V-1)/400));if(R==365&&!this.IsLeapYear(V)){W=V+1;Y=1;S=1;return{year:W,month:Y,day:S};}if(R==-1){W=V-1;Y=12;S=31;return{year:W,month:Y,day:S};}W=V;Y=12;while(R<B.DaysBeforeMonth[Y-1]){Y--;}S=R-B.DaysBeforeMonth[Y-1]+1;if(Y>2&&this.IsLeapYear(W)){S--;if(S==0){Y--;S=B.DaysInMonth[Y-1];if(Y==2){S++;}}}return{year:W,month:Y,day:S};},YMDToDAYS:function G(U,T,S){if(T<1||T>12){return 0;}var R=U*365+Math.floor(U/4)+(U%4?1:0)-Math.floor((U-1)/100)+Math.floor((U-1)/400);R+=B.DaysBeforeMonth[T-1];if(T>2&&this.IsLeapYear(U)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}else{return S-R;}},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}else{if(this.mnYear<R.mnYear){return -1;}}if(this.mnMonth>R.mnMonth){return 1;}else{if(this.mnMonth<R.mnMonth){return -1;}}if(this.mnDay>R.mnDay){return 1;}else{if(this.mnDay<R.mnDay){return -1;}}if(this.mnHour>R.mnHour){return 1;}else{if(this.mnHour<R.mnHour){return -1;}}if(this.mnMinute>R.mnMinute){return 1;}else{if(this.mnMinute<R.mnMinute){return -1;}}if(this.mnSecond>R.mnSecond){return 1;}else{if(this.mnSecond<R.mnSecond){return -1;}}if(this.mnMillisecond>R.mnMillisecond){return 1;}else{if(this.mnMillisecond<R.mnMillisecond){return -1;}}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.hash");var C=mstrmojo.vi.viz.EnumDSSDropZones,D=mstrmojo.vi.viz.MapHelper,A=new RegExp(".{32}","g");mstrmojo.vi.viz.GoogleMapHelper=mstrmojo.declare(mstrmojo.vi.viz.MapHelper,null,{scriptClass:"mstrmojo.vi.viz.GoogleMapHelper",supportAreaMap:false,tooltip:[],showColorByZone:function(){return D.canShowColorByZone(this.mapType||this.vp.mtp);},showSizeByZone:function(){return D.canShowSizeByZone(this.mapType||this.vp.mtp);},getXml:function B(){var G=this.vp,L=this.geoAttribute,J=this.latitude,K=this.longitude,M=this.colorBy,E=this.sizeBy,N=this.tooltip,I=this.mapType,F=this.defaultView,H=this.useAttributeForm;if(I){G.mtp=I;}if(F){G.dv=F;}G.ga=L||"";G.flat=J||"";G.flong=K||"";G.cmt=M||"";G.smt=E||"";if(H){G.af=H;}G.tooltip="";N.forEach(function(O){G.tooltip+=O;});return this._super();}});mstrmojo.vi.viz.GoogleMapHelper.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:C.GeoAttribute,prm:true,show:function(E){return true;},v:function(E){return E.ga?[E.ga]:[];},onDel:function(E){E.ga="";},onAdd:function(E,F){E.ga=F.item.did;E.af=D.USE_ATTRIBUTE_FORM;}},{n:mstrmojo.desc(7696,"Latitude"),id:C.Latitude,prm:true,show:function(E){return E.mtp!=="3";},v:function(E){return E.flat?[E.flat]:[];},onDel:function(E){E.flat="";},onAdd:function(E,F){var G=F.item;E.flat=G.did;E.af=G.t===21?D.USE_ATTRIBUTE_FORM:D.USE_ATTRIBUTE;}},{n:mstrmojo.desc(7697,"Longitude"),id:C.Longitude,prm:true,show:function(E){return E.mtp!=="3";},v:function(E){return E.flong?[E.flong]:[];},onDel:function(E){E.flong="";},onAdd:function(E,F){var G=F.item;E.flong=G.did;E.af=G.t===21?D.USE_ATTRIBUTE_FORM:D.USE_ATTRIBUTE;}},{n:mstrmojo.desc(11662,"Color By"),id:C.ColorBy,prm:true,show:function(E){return D.canShowColorByZone(E.mtp);},v:function(E){return E.cmt?[E.cmt]:[];},onDel:function(E){E.cmt="";},onAdd:function(E,F){E.cmt=F.item.did;}},{n:mstrmojo.desc(11663,"Size By"),id:C.SizeBy,prm:true,show:function(E){return D.canShowSizeByZone(E.mtp);},v:function(E){return E.smt?[E.smt]:[];},onDel:function(E){E.smt="";},onAdd:function(E,F){E.smt=F.item.did;}},{n:mstrmojo.desc(2962,"Tooltip"),id:C.AdditionalMetrics,prm:false,show:function(E){return true;},v:function(E){var F=E.tooltip;return F?F.match(A):[];},onDel:function(E,F){E.tooltip=E.tooltip.replace(F.item.did,"");},onAdd:function(E,F){var G=E.tooltip?E.tooltip.match(A):[];G.splice(F.idx,0,F.item.did);E.tooltip=G.join("");}}];}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.EnumDSSDropZones");var E=mstrmojo.vi.viz.MapHelper,D=mstrmojo.vi.viz.EnumDSSDropZones,H=mstrmojo.gmaps,A=new RegExp(".{32}","g");function C(I){return(I.sa==="1")?E.MTP_AREA:I.mtp;}mstrmojo.vi.viz.ESRIMapHelper=mstrmojo.declare(mstrmojo.vi.viz.MapHelper,null,{scriptClass:"mstrmojo.vi.viz.ESRIMapHelper",setWidget:function G(I){this._super(I);this.mapType=C(I.model.data.vp);},setMapType:function F(I){this._super(I);if(I===mstrmojo.vi.viz.MapHelper.MTP_AREA){this.vp.sa="1";this.vp.sm="0";}else{this.vp.sm="1";this.vp.sa="0";}},showAngleZone:function(){return(vp.mtp===H.EnumMapType.Marker||vp.mtp===H.EnumMapType.Bubble)&&vp.mc===H.EnumClusterMode.PIE;},showColorByZone:function(){return E.canShowColorByZone(this.mapType||C(this.vp));},showSizeByZone:function(){return E.canShowSizeByZone(this.mapType||C(this.vp));},getXml:function B(){var K=this.vp,P=this.geoAttribute,N=this.latitude,O=this.longitude,Q=this.colorBy,I=this.sizeBy,R=this.tooltip,M=this.mapType,J=this.defaultView,L=this.useAttributeForm;if(M){K.mtp=M;K.sa=M===E.MTP_AREA?"1":"0";K.sm=M===(E.MTP_MARKER||M===E.MTP_BUBBLE)?"1":"0";}if(J){K.dv=J;}K.ma=P||"";K.lat=N||"";K.lng=O||"";K.cmt=Q||"";K.smt=I||"";if(L){K.af=L;}K.tooltip="";R.forEach(function(S){K.tooltip+=S;});return this._super();}});mstrmojo.vi.viz.ESRIMapHelper.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:D.GeoAttribute,prm:true,show:function(I){return true;},v:function(I){return[I.ma];},onDel:function(I){I.ma="";},onAdd:function(I,J){I.ma=J.item.did;I.af=E.USE_ATTRIBUTE_FORM;I.lid="";}},{n:mstrmojo.desc(7696,"Latitude"),id:D.Latitude,prm:true,show:function(I){return I.sa!=="1";},v:function(I){return I.lat?[I.lat]:[];},onDel:function(I){I.lat="";},onAdd:function(I,J){var K=J.item;I.lat=K.did;I.af=K.t===21?E.USE_ATTRIBUTE_FORM:E.USE_ATTRIBUTE;}},{n:mstrmojo.desc(7697,"Longitude"),id:D.Longitude,prm:true,show:function(I){return I.sa!=="1";},v:function(I){return I.lng?[I.lng]:[];},onDel:function(I){I.lng="";},onAdd:function(I,J){var K=J.item;I.lng=K.did;I.af=K.t===21?E.USE_ATTRIBUTE_FORM:E.USE_ATTRIBUTE;}},{n:mstrmojo.desc(14294,"Angle"),id:D.Angle,prm:true,show:function(I){return(I.mtp===H.EnumMapType.Marker||I.mtp===H.EnumMapType.Bubble)&&I.mc===H.EnumClusterMode.PIE;},v:function(I){return[I.amt];},onDel:function(I){I.amt="";},onAdd:function(I,J){I.amt=J.item.did;}},{n:mstrmojo.desc(11662,"Color By"),id:D.ColorBy,prm:true,show:function(I){return E.canShowColorByZone(C(I));},v:function(I){return[I.cmt];},onDel:function(I){I.cmt="";},onAdd:function(I,J){I.cmt=J.item.did;}},{n:mstrmojo.desc(11663,"Size By"),id:D.SizeBy,prm:true,show:function(I){return E.canShowSizeByZone(C(I));},v:function(I){return[I.smt];},onDel:function(I){I.smt="";},onAdd:function(I,J){I.smt=J.item.did;}},{n:mstrmojo.desc(2962,"Tooltip"),id:D.AdditionalMetrics,prm:false,show:function(I){return true;},v:function(I){var J=I.tooltip;return J&&J.match(A);},onDel:function(I,J){I.tooltip=I.tooltip.replace(J.item.did,"");},onAdd:function(I,J){var K=I.tooltip?I.tooltip.match(A):[];K.splice(J.idx,0,J.item.did);I.tooltip=K.join("");}}];}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.StringBuffer","mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo._IsGraphDataService","mstrmojo.func","mstrmojo._ImageHelper","mstrmojo.rw.model.RetrievalKeysConfig","mstrmojo.rw.model.UpdateKeysConfig");var a=mstrmojo.hash,A=a.copy,R=mstrmojo.array,AN=mstrmojo.dom,q=mstrmojo.func,AE=[mstrmojo.desc(8445,"Loading")],Ag=mstrmojo.array.ensureArray,N=0;function T(BF){BF=BF||{};BF.preserveUndo=true;return BF;}function Ad(BJ,BK,BF){if(this.blockRequests){throw ("The data service is currently ignoring all requests to the server.");}var BG=N++,BI=this.getTxUpdates(BG);BF=BF||{};BF.src=Ad.caller.name;if(!mstrmojo.string.isEmpty(BI)){BJ.updateChanges=BI;}BJ.zoomFactor=this.model.getZoomFactor();var BH=this.cmdMgr;if(!BF.preserveUndo&&BH){BH.onSubmitUpdates();}mstrApp.serverRequest(BJ,this.wrapCallback(BK,BG),BF);}function L(BH,BG,BF){a.copy({unitType:BG.defn&&BG.defn.t,unitKey:BG.k},BH);if(BF.layoutKey){a.copy({toKey:BF.layoutKey,analysisSectionType:BF.analysisSectionType},BH);}else{a.copy({toKey:BF.parentKey},BH);}return BH;}function Ai(BG){BG=BG||{};var BF=window.mstrMobileApp?this.model.controller.getContentDimensions():mstrApp.getContentDimensions();if(BF){BG.styleName="RWDocumentMobileStyle";BG.availableWidth=BF.w;BG.availableHeight=BF.h;}else{BG.innerWidth=mstrmojo.dom.windowDim().w;BG.innerHeight=mstrmojo.dom.windowDim().h;}return BG;}function BA(BG){var BF=BG&&BG.style,BH=BF&&BF.params;return BH&&BH.treesToRender;}function B(BF,BG){return{act:"moveUnit",toKey:BF,unitType:BG};}function Ah(BF){return BF.split("\u001E")[2];}function K(BG,BK){if(BG!==mstrmojo.DocDataService.UNDO_KEY){return BG;}if(!this.undoSectionKey){var BJ=this.undoSectionKey=this.model.getNextKey(),BH=this.undoFGKey=this.model.getNextKey();BK.addActions({act:"addUndoSection",cbKey:this.cbKey,nodeKey:BJ,fgKey:BH});var BI=this;BK.addCallbacks({failure:function BF(){delete BI.undoSectionKey;}});}return this.undoSectionKey;}function Ac(BH,BG){var BF={dsid:BH.dsid,formula:BH.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BH.tokenStreamXML),name:BH.alias,afb:BH.afb,sfb:BH.sfb};if(BG){BF.Ids=["$GUID_135"];}return this.getAddDerivedMetricToDatasetAction(BF);}function AD(BI,BL,BG,BM,BF,BH){var BJ=[this.getNodeKeyFromKeyContext(BL)];if(!BH){BJ=Ag(BM).concat(BJ);}var BK={act:BI,keyContext:BL,tgtKey:BG,partialRetrieval:{nodes:BJ}};if(!BF){BK.partialUpdate={selectors:[Ah(BL)]};}return BK;}mstrmojo.DocDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsGraphDataService,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.DocDataService",defaultStyle:{params:{treesToRender:2}},cmdMgr:null,stid:-1,blockRequests:false,init:function Aa(BF){this._super(BF);this.cmdMgr=this.model.controller&&this.model.controller.cmdMgr;},wrapCallback:function AT(BJ,BG){var BH=this;return q.wrapMethods({success:function BI(BK){if(BK){BH.model.bs=BH.rwb=BK.bs||BH.rwb;BH.msgId=BK.mid||BH.msgId;BH.cbKey=BK.cbKey||BH.cbKey;if(BK.stid!==undefined){BH.stid=BK.stid;}}BH.clearTxUpdates(BG);},failure:function BF(){BH.resetTxUpdates(BG);}},BJ);},getNodeKeyFromKeyContext:function V(BF){return BF.split("\u001E")[1];},refresh:function Ao(BH,BI){var BG=!!BH.useRefreshProgress,BF=BG?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:AE;delete BH.useRefreshProgress;BH=Ai(BH);Ad.call(this,A(BH,{taskId:"docRefresh",rwb:this.rwb,rePrompt:false,fresh:false,regenerate:false}),BI,{showProgress:true,hideProgress:true,progressStateText:BF,useRefreshProgress:BG});},saveRW:function Ar(BF,BG){Ad.call(this,A(BF,{taskId:"saveRW",msgID:this.msgId}),BG);},saveThresholds:function e(BG,BH,BF){Ad.call(this,A(BG,{taskId:"saveThresholds"}),BH,BF);},getThresholds:function A4(BG,BH,BF){Ad.call(this,A(BG,{taskId:"getThresholds"}),BH,BF);},browseElements:function AA(BF,BG){Ad.call(this,A(BF,{taskId:"browseElements",styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30}),BG);},removeUnit:function U(BG,BH){var BF=A(BG,{act:"removeUnit"});this.submitTemplateUpdates(BF.nodeKey,BF,BH);},removeLayout:function AI(BG,BF,BH){this.submitUpdates({act:"removeLayout",unitKey:BG,isCurrent:BF},BH);},moveLayout:function o(BH,BF,BG){this.submitUpdates(this.getMoveNodeAction(BH,BF,BG),mstrmojo.DocDataService.EMPTY_CALLBACK,mstrmojo.DocDataService.SUPPRESS_DATA);},getMacroCopyNodeAction:function Ae(BG,BF,BI){var BH={act:"macroCopyUnit",newKey:BI,partialRetrieval:this.newRetrievalKeysConfig().addNode(BI)};L(BH,BG,BF);return BH;},getMacroMoveNodeAction:function w(BG,BF){var BH={act:"macroMoveUnit",partialRetrieval:this.newRetrievalKeysConfig().addNode(BG.k)};L(BH,BG,BF);return BH;},getMoveNodeAction:function k(BJ,BF,BG){var BI=BJ.defn,BH=BI?BI.t:mstrmojo.EnumRWUnitType.LAYOUT;var BK=B(BF,BH);BK.unitKey=BJ.k;if(BG!==undefined){BK.index=BG;}return BK;},getMoveControlAction:function Z(BI,BG,BF){var BH=B(BG,mstrmojo.EnumRWUnitType.SELECTOR);BH.keyContext=BI;if(BF){BH.partialRetrieval={nodes:Ag(BF)};}return BH;},addMoveControlAction:function H(BI,BH,BG,BF){BI.addActions(this.getMoveControlAction(BH,K.call(this,BG,BI),BF));},getSetCtrlSourceAction:function AB(BG,BH,BF){return{act:"setControlSource",keyContext:BG,unitId:BH,unitType:BF,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BG)),partialUpdate:{selectors:[Ah(BG)]}};},getRemoveCtrlTargetAction:function F(BH,BG,BI,BF){return AD.call(this,"removeControlTarget",BH,BG,BI,BF);},getClearCtrlTargetAction:function A0(BF){return{act:"clearControlTarget",keyContext:BF};},getAddCtrlTargetAction:function Am(BJ,BG,BK,BL,BF,BH){var BI=AD.call(this,"addControlTarget",BJ,BG,BK,BF,BH);BI.isUC=!BL;return BI;},getAddCtrlTargetDatasetAction:function Ax(BG,BF){return{act:"addControlTargetDataset",keyContext:BG,tgtDid:BF};},getRemoveCtrlTargetDatasetAction:function d(BG,BF){return{act:"removeControlTargetDataset",keyContext:BG,tgtDid:BF};},getClearCtrlTargetDatasetAction:function AH(BF){return{act:"clearControlTargetDataset",keyContext:BF};},getChangeControlElementSource:function A9(BG,BF){return{act:"changeControlElementSource",keyContext:BG,ctlElementSrc:BF};},getSetAttributesJoinTypeAction:function AX(BF,BG){return{act:"setAttributesJoinType",nodeKey:BF,value:BG,partialRetrieval:this.newRetrievalKeysConfig().addNode(BF)};},getSetMetricJoinTypeAction:function AP(BH,BJ,BF,BG,BI){return{act:"setMetricJoinType",nodeKey:BH,unitId:BJ,dataType:BF,unitType:BG,value:BI,partialRetrieval:this.newRetrievalKeysConfig().addNode(BH)};},getTxUpdates:function AM(BG){var BF=this.model;return BF&&BF.getTransactionUpdates&&BF.getTransactionUpdates(BG);},clearTxUpdates:function Ab(BG){var BF=this.model;if(BF&&BF.clearTransactionUpdates){BF.clearTransactionUpdates(BG);}},resetTxUpdates:function C(BG){var BF=this.model;if(BF&&BF.resetTransactionUpdates){BF.resetTransactionUpdates(BG);}},loadDocLayout:function J(BH,BJ,BI){var BG={act:"setCurrentLayout",unitKey:BH.layoutKey,disablePU:true},BF={style:{params:{treesToRender:3}},params:Ai.call(this)};if(BI){BI.add(BG,BJ,BF);}else{this.submitUpdates(BG,BJ,BF);}},checkMissingCredentials:function s(BF,BG){Ad.call(this,A(BF,{taskId:"checkMissingCredentials"}),BG);},setCurrentDocLayout:function Ak(BF,BJ,BI){var BH={act:"setCurrentLayout",unitKey:BF},BG={config:{silent:(BJ===null)}};BJ=BJ||null;if(BI){BI.add(BH,BJ,BG);}else{this.submitUpdates(BH,BJ,BG);}if(window.mstrMobileApp!==undefined){mstrMobileApp.clearWebViewCache(false);}},fetchDocPage:function A1(BF,BG){Ad.call(this,{taskId:"fetchDocPage",rwb:this.rwb,pos:BF},BG);},requestPanelChangeDeferred:function A8(BL,BK,BF,BG,BI,BJ){var BH={act:"setCurrentPanel",unitKey:BK};if(BF){BH.partialRetrieval={nodes:BF.split(",")};}BL.add(BH,BJ,{config:{showProgress:BI,hideProgress:BI,progressStateText:AE},style:{params:{treesToRender:BG?3:0}}});},getGraphSelectionAction:function D(BJ,BF,BH,BM,BL,BG){var BK=this.model.getCurrentLayoutDef(),BN=(BK&&BK.dzf)||1,BI={act:"graphSelector",nodeKey:BJ,sliceID:BH,x:Math.round(BM/BN),y:Math.round(BL/BN)};if(BG){BI.usePartialUpdate="0";}else{BI.partialUpdate={selectors:BF.split("\u001E")};}return BI;},getSelectorElementsAction:function l(BH){var BG={act:"setSelectorElements",keyContext:BH.ck,ctlKey:BH.ctlKey,elemList:mstrmojo.string.decodeHtmlString(BH.eid),isVisualization:!!BH.isDocVis},BF=BH.include;if(BF!==undefined){BG.include=!!BF;}if(BH.tks){BG.tks=BH.tks;}if(BH.disablePU){BG.usePartialUpdate="0";}else{if(BH.ignoreTargetData){BG.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BH.ck));}else{BG.partialUpdate={selectors:BH.ctlKey.split("\u001F")};}}return BG;},getUpdateTransactionAction:function BD(BG){var BF={act:"updateTransaction"};if(BG){if(BG.ctlKey){BF.partialUpdate={selectors:[BG.ctlKey]};}}return BF;},getSelectorFromGMAction:function i(BG){var BF={act:"setSelectorFromGM",keyContext:BG.ck,ctlKey:BG.ctlKey,keepOnly:!!BG.keepOnly,selectorObjects:BG.selectorObjects,isVisualization:!!BG.isDocVis,include:!!BG.include};if(BG.tks){BF.tks=BG.tks;}if(BG.disablePU){BF.usePartialUpdate="0";}else{BF.partialUpdate={selectors:[BG.ctlKey]};}return BF;},getGMViewFilterAction:function z(BG){var BF={act:"keepOnlyGM",selectorObjects:BG.selectorObjects,isVisualization:!!BG.isDocVis,keepOnly:!!BG.keepOnly};if(BG.tks){BF.tks=BG.tks;}if(BG.disablePU){BF.usePartialUpdate="0";}else{BF.partialUpdate={selectors:[BG.ctlKey]};}return BF;},setMultiDocSelectorElements:function x(BF,BG,BI){var BH={taskId:"setMultiDocSelectorElements",rwb:this.rwb,multiSelect:BG,selectorObjects:BF};Ad.call(this,BH,BI,{showWait:true,hideWait:true,delay:true});},setDocSelectorTexts:function Q(BK,BM,BO,BL,BN,BG,BF,BH,BJ){var BI={taskId:"setDocSelectorTexts",rwb:this.rwb,unitKeyContext:BK,ctlTexts:BM,ctlKey:BO,zoomFactor:BG};if(AN.isAndroid||BF){BI.taskId="androidSetDocSelectorElements";}if(BL!==null&&BL!==undefined){BI.include=BL;}if(BH!==null&&BH!==undefined){BI.usePartDisplay=BH;}if(BJ!==null&&BJ!==undefined){BI.treesToRender=BJ;}Ad.call(this,BI,BN);},getSelectorExpressionAction:function m(BH){var BG={act:"setSelectorExpression",keyContext:BH.ck,partialUpdate:{selectors:[BH.ckey]},ctlType:BH.type,objId:BH.srcid,objType:BH.srct,expFunction:BH.f,expFunctionType:BH.ft,include:!!BH.include,qt:BH.qt,unset:!!BH.unset};if(BH.disablePU){BG.usePartialUpdate="0";}else{BG.partialUpdate={selectors:[BH.ckey]};}if(BH.changeQual){BG.changeQual=BH.changeQual;}var BF=BH.cs;if(BF!==null&&BF!==undefined){BG.expConstants=BF;BG.dataType=BH.dtp;}if(BH.fid){BG.fid=BH.fid;}return BG;},getMultiUnitSelectorAction:function A6(BF){return{act:"multiUnitSelection",keyContext:BF.ck,sels:BF.selections,partialUpdate:{selectors:[BF.ctlKey]}};},getRemoveCtrlAction:function Af(BG,BF){return{act:"removeControl",key:BG,partialUpdate:{selectors:[BG]},partialRetrieval:{nodes:Ag(BF)}};},getAddCtrlAction:function AW(BM,BK,BG,BL,BH,BN,BF,BI,BO){if(isNaN(BO)){BO=1;}var BJ={act:"addControl",parentKey:BM,nodeKey:BK,ctlKey:BG,isUC:!!BH,unitType:BN||-1,unitId:BF||"",targetKeys:Ag(BI),ctlType:BO,gpType:BO,partialRetrieval:{nodes:Ag(BL)}};if(!BJ.isUC){BJ.partialUpdate={selectors:[BG]};}return BJ;},getSaveGraphPropertiesAction:function h(BF,BG){return{act:"saveGraphProperties",nodeKey:BF,properties:BG};},getSelectorIncludeAction:function At(BG){var BF=BG.ckey;return{act:"setSelectorInclude",keyContext:BG.ck,ctlKey:BF,ctlType:BG.type,include:BG.include,partialUpdate:{selectors:[BF]}};},getSelectorShowAllAction:function O(BF){return{act:"setSelectorShowAll",keyContext:BF.ck,ctlKey:BF.ckey,ctlType:BF.type,showAll:BF.showAll,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BF.ck))};},getUnsetSelectorAction:function c(BI){var BH=BI.ckey,BF=BI.ck,BG={act:"unsetSelector",keyContext:BF,ctlKey:BH,ctlType:BI.type};if(BI.ignoreTargetData){BG.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BF));}else{BG.partialUpdate={selectors:[BH]};}return BG;},getChangeFilteringAction:function Aq(BF,BI,BH,BG){return{act:"changeFiltering",nodeKey:BF,filterMode:BI,isUC:BH,partialRetrieval:{nodes:(BG?Ag(BG):[])}};},getAddDerivedMetricToDatasetAction:function Aw(BF){return{act:"addDerivedMetricToDataset",dsid:BF.dsid,formula:BF.formula,isTokenStream:BF.isTokenStream,name:BF.name,newObjectIds:BF.Ids,afb:BF.afb,sfb:BF.sfb};},getEditDocUnitPropAction:function v(BF){return{act:"editDocUnitProp",dsid:BF.dsid,formId:BF.formId,unitId:BF.unitId,unitType:BF.unitType,prop:BF.prop,value:BF.value};},getRWGraphImage:function BC(BJ,BN){var BI=mstrApp,BF=this.id,BG={taskId:"getRWGraphImage",taskEnv:"xhr",imgType:4,messageID:this.msgId,nodeKey:BJ.k,sliceID:parseInt(BJ.sid,10),width:parseInt(BJ.w,10),height:parseInt(BJ.h,10)};if(BI.onMobileDevice()&&BI.useBinaryFormat){window.setTimeout(function(){Ad.call(mstrmojo.all[BF],BG,BN,T());},0);}else{if(BJ.encodeImage){BG.taskContentEncoding="base64";delete BG.taskEnv;Ad.call(this,BG,{success:function BO(BP){BN.success("data:image/png;base64,"+BP);},failure:function BH(BP){(BN.failure||BI.onerror)(BP);}},T());}else{var BL=BI.getConfiguration(),BK=BI.getCurrentProjectId(),BM=new mstrmojo.StringBuffer();BG.__ts__=new Date().getTime();BG.sessionState=BI.getSessionState(BK);a.forEach(BG,function(BP,BQ){BM.append(BQ+"="+encodeURIComponent(BP));});BN.success(BL.getTaskUrlByProject(BK)+"?"+BM.toString("&"));}}},getImage:function BB(BG){var BH=mstrApp,BF=BH.getConfiguration();if(BF&&BG&&BG.indexOf("://")===-1){BG=BF.getHostUrlByProject(BH.getCurrentProjectId())+BG;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(BG)):BG;},setGridDisplayMode:function n(BH,BG,BI,BF){a.copy({params:{suppressData:true}},BF);this.submitUpdates({act:"setGridDisplayMode",unitKey:BH,displayMode:BG},BI,BF);},setDocZoom:function G(BF,BG){this.submitUpdates(A(BF,{act:"setDocZoom",disablePU:true}),BG,{style:{params:{treesToRender:3}}});},sortGrid:function AF(BF,BG){this.submitTemplateUpdates(BF.nodeKey,A({act:"sort"},BF),BG);},getAdvSortData:function AZ(BF,BG){this.rwExecute(A(BF,{styleName:"RWGridStyle"}),BG);},saveViewFilter:function Al(BH,BI){var BF={act:"saveViewFilter",messageID:this.msgId,nodeKey:BH.nodeKey,expr:BH.expr};var BG={act:"saveViewFilterLimit",messageID:this.msgId,nodeKey:BH.nodeKey,limitExp:BH.limitExp};this.submitUpdates([BF,BG],BI);},getViewFilter:function AG(BF,BG){Ad.call(this,{taskId:BF.taskId,rwb:BF.rwb,msgID:BF.msgID,nodeKey:BF.nodeKey},BG);},rwExecute:function A3(BF,BG){Ad.call(this,A(BF,{taskId:"RWExecute",rwb:this.rwb,messageID:this.msgId}),BG);},pivot:function j(BF,BG){this.submitTemplateUpdates(BF.nodeKey,{act:"pivot",unitId:BF.unitId,unitType:BF.unitType,attFormId:BF.attFormId,axis:BF.axis,unitPos:BF.unitPos},BG);},resizeXtabColumn:function Az(BF,BG){this.submitUpdates([this.getUpdateTemplateAction(BF.nodeKey,BF),{act:"format",unitType:52,unitKey:BF.nodeKey,formatType:1,format:{FormattingSize:{WidthMode:2}}}],BG);},showTotals:function S(BF,BG){this.submitTemplateUpdates(BF.nodeKey,{act:"showTotals",unitId:BF.unitId,unitType:BF.unitType,subtotalType:BF.subtotalType,clearSubtotalType:BF.clearSubtotalType},BG);},drillGrid:function AC(BF,BG){this.submitUpdates(this.getDrillGridAction(BF),BG,{config:{showProgress:true,hideProgress:true,progressStateText:AE,delay:true}});},getDrillGridAction:function A5(BG){var BF={act:"gridDrillWithin",messageID:this.msgId,nodeKey:BG.nodeKey,sliceId:BG.sliceId,drillPathIndex:BG.drillPathIndex,drillPathKey:BG.drillPathKey,elementList:BG.drillElements,retainParent:BG.retainParent,partialUpdate:{nodes:[BG.nodeKey]}};if(BG.x){BF.x=BG.x;BF.y=BG.y;}return BF;},changeDocGroupBy:function M(BH,BI,BF){var BG={act:"changeDocGroupBy",disablePU:true};if(BH.flags){BG.flags=BH.flags;}if(BH.groupbyKey){BG.gbKey=BH.groupbyKey;BG.elemId=BH.elementId;}else{BG.gbUnits=BH.gbUnits;}this.submitUpdates(BG,BI,{config:BF,style:{params:{treesToRender:3}},params:Ai.call(this)});},retrieveServerJson:function b(BH,BQ,BI){var BK=this.model,BL=BK.controller,BO={},BF,BG,BM;var BN=BH.nodes;if(BN){BO.partialRetrieval=BN;}var BP=BH.slices;if(BP){BO.slices=BP;}if(BI){BF=BI.style;BG=BI.config;BM=BI.params;}if(!BG){BG={showProgress:true,hideProgress:true,progressStateText:AE};}var BR=BH.style=a.clone(this.defaultStyle);A(BF.params,BR.params);var BJ={taskId:"getServerJSONResults",styleName:"ServerJsonRWDStyle",compress:1,rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(BO),treesToRender:BR.params.treesToRender};A(BM,BJ);BG.preserveUndo=(BI&&BI.preserveUndo)||false;Ad.call(this,BJ,BQ,BG);},downloadGridData:function I(BG,BH){var BF={act:"gridIncrementalFetch",nodeKey:BG.nodeKey,rowPosition:BG.rowPosition,maxRows:BG.maxRows,colPosition:BG.colPosition,sliceId:BG.sliceId,maxColumns:BG.maxColumns,partialRetrieval:this.newRetrievalKeysConfig().addNode(BG.nodeKey)};if(BG.partialUpdate){BF.partialUpdate=BG.partialUpdate;}this.submitUpdates(BF,BH,a.copy(T(),{noUpdate:true,config:{silent:true}}));},txMarkRows:function AL(BF,BG){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionMarkRow(BF.nodeKey,BF.sliceId,BF.rowOrdinal,BF.actionType);}else{Ad.call(this,{taskId:"markRow",rwb:this.rwb,nodeKey:BF.nodeKey,sliceId:BF.sliceId,rowOrdinal:BF.rowOrdinal,actionType:BF.actionType},BG);}},txChangeData:function p(BF,BG){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionDataChange(BF.nodeKey,BF.sliceId,JSON.stringify(BF.cells),BF.autoRefresh);}else{Ad.call(this,{taskId:"changeData",rwb:this.rwb,nodeKey:BF.nodeKey,sliceId:BF.sliceId,cells:BF.cells,autoRefresh:BF.autoRefresh},BG);}},sendTransactionActions:function Y(BG,BH){var BF={taskId:"DocTransaction",rwb:this.rwb,keyContext:BG.keyContext,actions:BG.actions,messageID:this.msgId};if(BG.txrcd){BF.isPending=BG.txrcd.pending;BF.timestamp=BG.txrcd.timestamp;}Ad.call(this,BF,BH,{silent:!!BH});},newUpdate:function Av(BH,BG){var BF=new mstrmojo.DocDataService.Update(BG);BF.ds=this;BF.cmd=BH;return BF;},newUpdateWithoutCmd:function g(BG){var BF=new mstrmojo.DocDataService.Update(BG);BF.ds=this;return BF;},newRetrievalKeysConfig:function AV(){return new mstrmojo.rw.model.RetrievalKeysConfig();},newUpdateKeysConfig:function P(){return new mstrmojo.rw.model.UpdateKeysConfig();},submitCmd:function A2(BG,BF){this.newUpdate(BG,BF).submit();},submitUpdates:function AY(BO,BT,BL){BO=Ag(BO);var BK={actions:BO},BF,BI,BQ,BH=false;R.forEach(BO,function BN(BV){if(BV.disablePU){BH=true;delete BV.disablePU;}R.forEach(BV.actions,BN);return !BH;});if(!BH){var BG=mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig(BO),BS=mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig(BO);if(!a.isEmpty(BG)){BK.partialRetrieval=BG;}if(!a.isEmpty(BS)){BK.partialUpdate=BS;}}if(BL){BF=BL.style;BI=BL.config;BQ=BL.params;}if(!BI){BI={showProgress:true,hideProgress:true,progressStateText:AE};}if(!BF){BK.style=this.defaultStyle;}else{var BU=BK.style=a.clone(this.defaultStyle);A(BF.params,BU.params);}BK.style.name=(BF&&BF.name)||mstrApp.styleName;var BM={taskId:"mojoRWManipulation",rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(BK)};A(BQ,BM);BI.preserveUndo=(BL&&BL.noUpdate)||false;var BP=this,BR=true,BJ=q.override({success:function(BV,BW){if(BV.status===2){BR=false;BP.submitUpdates([],BT,BL);}else{BR=true;return this._super(BV,BW);}},complete:function(){if(this._super&&BR){this._super();}}},A(BT));if(!(BL&&BL.hideCancel)){BI.waitBoxCfg=a.copy({showCancel:true},BI.waitBoxCfg);}if(BL&&BL.message){BI.waitBoxCfg=a.copy({message:BL.message},BI.waitBoxCfg);}Ad.call(this,BM,BJ,BI);},submitTemplateUpdates:function t(BF,BH,BI,BG){this.submitUpdates(this.getUpdateTemplateAction(BF,BH),BI,BG);},getUpdateTemplateAction:function AS(BF,BH,BG){return{act:"updateTemplate",keyContext:BF,partialRetrieval:this.newRetrievalKeysConfig().addNode(BF,BG),partialUpdate:{selectors:BH.selectors},actions:Ag(BH)};},addUpdateTemplateAction:function A7(BH,BF,BG){BH.addActions(this.getUpdateTemplateAction(BF,BG));},applySegment:function AJ(BG,BF,BH){Ad.call(this,{taskId:"applySegment",rwb:this.rwb,segmentID:BG,nodeKey:BF},BH);},getPageByTree:function AK(BF){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},BF);},getUserDICubeInfo:function W(BF,BG){Ad.call(this,{taskId:"getUserDICubeInfo",cubeIds:BF.join(",")},BG);},applySorts:function Au(BG,BH,BF,BI){Ad.call(this,{taskId:"applySorts",key:BG,sortType:BH,sortList:BF},BI,mstrmojo.DocDataService.PROGRESS_CONFIG);},getAddNewDerivedMetricToDatasetSubmitFunc:function As(BG){var BF=this;return function(BJ){var BK=BF.model,BI=BK.controller,BH=a.copy(BJ,BG),BL=[Ac.call(BF,BH,false)],BM=BK.getDatasetsUpdateCallback();BI.submitUndoRedoUpdates(BL,null,BM,{style:{params:{treesToRender:1}}});};},getAddNewDerivedMetricToXtabSubmitFunc:function Aj(BG){var BF=this;return function(BK){var BL=BF.model,BJ=BL.controller,BI=a.copy(BK,BG),BH=BI.idx,BN=[],BO=q.wrapMethods(BL.getDatasetsUpdateCallback(),BJ._getXtabCallback(BI.host));BN.push(Ac.call(BF,BI,true));if(BI.replace){BN.push(BF.getUpdateTemplateAction(BI.nodeKey,[BI.host.model.getRemoveTemplateUnitAction({did:BI.replace.did,t:BI.replace.t})]));}else{BH++;}var BM=BF.getUpdateTemplateAction(BI.nodeKey,[BI.host.model.getAddTemplateUnitAction({did:"$GUID_135",t:4},BI.dsid,BI.zoneid,BH),{act:"renameUnit",id:"$GUID_135",type:4,name:BI.alias,isDynamicAlias:true}]);BN.push(BM);BJ.submitUndoRedoUpdates(BN,null,BO);};},getAddNewDerivedMetricToDropzoneSubmitFunc:function y(BG){var BF=this;return function(BM){var BN=BF.model,BO=BN.controller,BQ=a.copy(BM,BG),BS=BQ.host.zonesModel,BT=BQ.idx,BL=[],BH=[],BR={id:BQ.zoneid},BP={did:"$GUID_135",t:4},BU=q.wrapMethods(BN.getDatasetsUpdateCallback(),BO._getXtabCallback(BQ.host));BL.push(Ac.call(BF,BQ,true));if(BQ.replace){var BJ={did:BQ.replace.did,t:BQ.replace.t};BH.push(BS.getRemoveDropZoneUnitAction(BR,BJ));}else{BT++;}BH.push(BS.getAddDropZoneUnitAction(BR,BP,BT,{datasetId:BQ.dsid}));var BI=(BG.zoneid===4)?1:2,BK=BS.getAddMetricNameAction(BG.host,BI);if(BK){BL.push(BK);}if(!BQ.replace&&BS.gmZones){BK=BS.gmZones.getUpdateGroupInfoActionForNewMetric(BG.zoneid,BT,true);if(BK){BL.push(BK);}}BS.checkAndAddThresholdAction(BQ.zoneid,BP,BH);BL.push(BF.getUpdateTemplateAction(BQ.nodeKey,BH));BO.submitUndoRedoUpdates(BL,null,BU);};},getEditDerivedMetricSubmitFunc:function f(BG){var BF=this;return function(BJ){var BL=BF.model,BI=BL.controller,BH=a.copy(BJ,BG),BK=BG.nodeKey,BM={act:"editDM",formula:BH.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BH.tokenStreamXML),afb:BG.afb,sfb:BG.sfb,dsid:BH.dsid||"",did:BH.did},BN=[BL.addUpdateObjects(BM,{id:BH.did,type:4,flag:mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS.DATA_CHANGE})],BO=q.wrapMethods(BL.getDatasetsUpdateCallback(),BI.getPartialUpdateCallback());if(BK){BN.push(BF.getUpdateTemplateAction(BK,[{act:"renameUnit",id:BH.did,type:4,name:BH.alias,isDynamicAlias:true}]));}else{BM.name=BH.alias;}BI.submitUndoRedoUpdates(BN,null,BO);};},resetSelections:function Ay(BG,BF,BH){Ad.call(this,{taskId:"resetSelections",rwb:this.rwb,unitKeyContext:BG||"",usePartDisplay:BF?"0":"1",treesToRender:BF?3:2},BH);},setPreference:function E(BF,BG){Ad.call(this,{taskId:"setPreference",prefs:BF},BG);},getObjectInfo:function AQ(BF,BG){Ad.call(this,A(BF,{taskId:"getObjectInfo"}),BG,T());},addSuppressData:function An(BF){if(BA(BF)===mstrmojo.DocDataService.EnumTreesToRender.NONE){a.copy({params:{suppressData:true}},BF);}},uploadImageToServer:function(BH,BI){var BG={taskId:"importImage",imageFieldName:"imageData",isEdit:1,fieldKey:BH.fieldKey,fieldName:BH.fieldName,imageName:encodeURIComponent(BH.imageName),imageSize:BH.imageSize,nodeKey:BH.nodeKey,sectionKey:BH.sectionKey};if(mstrApp.isSingleTier){var BF=";base64,";BG.rwNodeKey=BH.fieldGroupKey;BG.imageData=BH.base64Str.split(BF)[1]||BH.base64Str;mstrApp.serverRequest(BG,BI);}else{BG.msgID=this.msgId;BG.imageData=BH.imageData;mstrmojo.xhr.upload("POST",mstrConfig.taskURL,BI,BG);}}});mstrmojo.DocDataService.Update=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DocDataService.Update",actions:null,callback:null,extras:null,init:function Aa(BF){A(BF,this);this.actions=this.actions||[];this.callback=this.callback||{};this.extras=this.extras||{};},addActions:function AU(BF){this.actions=this.actions.concat(Ag(BF));},addCallbacks:function Ap(BF){this.callback=q.wrapMethods(this.callback,BF);},addExtras:function AO(BG){var BF=BA(BG),BH=BA(this.extras);this.extras=A(BG,this.extras);if(BF!==undefined&&BH!==undefined){this.extras.style.params.treesToRender|=BH;}},addUpdate:function AR(BF){this.add(BF.actions,BF.callback,BF.extras);},setTreesToRender:function BE(BF){if(BF){this.addExtras({style:{params:{treesToRender:BF}}});}return this.extras.style.params.treesToRender;},add:function X(BG,BH,BF){if(BG){this.addActions(BG);}if(BH){this.addCallbacks(BH);}if(BF){this.addExtras(BF);}},submit:function u(){var BG=this.actions,BH=this.callback,BF=this.extras;if(this.cmd){this.cmd.submit(BG,BH,BF);}else{this.ds.submitUpdates(BG,BH,BF);}}});mstrmojo.DocDataService.PUInfoType=null;mstrmojo.DocDataService.ExtrasType=null;mstrmojo.DocDataService.PROGRESS_CONFIG={showProgress:true,hideProgress:true,progressStateText:AE,delay:true};mstrmojo.DocDataService.UNDO_KEY="undo";mstrmojo.DocDataService.REQUEST_DEFN_DATA={style:{params:{treesToRender:3}}};mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION={style:{params:{treesToRender:1}}};mstrmojo.DocDataService.REQUEST_ONLY_DATASETS={style:{params:{treesToRender:0}}};mstrmojo.DocDataService.SUPPRESS_DATA={params:{suppressData:true}};mstrmojo.DocDataService.EMPTY_CALLBACK={success:mstrmojo.emptyFn};mstrmojo.DocDataService.CopyMoveDestinationType=null;mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS={FORMAT_CHANGE:1,DATA_CHANGE:2};mstrmojo.DocDataService.EnumTreesToRender={NONE:0,DEFN:1,DATA:2,BOTH:3};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var B=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(C,D){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(C,D,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,D,C,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(C,D,G){var E=C.blockCount,F={taskId:"searchMetadata",styleName:"MyPageFolderStyle",blockCount:E,includeAncestorInfo:"true",includeObjectDesc:C.includeObjectDesc};if(C.folderLinksContextId){F.folderLinksContextId=C.folderLinksContextId;}if(C.sId){F.sessionState=C.sId;}if(D.fid){F.rootFolderID=D.fid;}else{if(D.fty){F.rootFolderType=D.fty;}}if(C.browsableTypes){F.objectType=C.browsableTypes;}if(D.blockBegin){F.blockBegin=D.blockBegin;}if(D.searchPattern){if(C.enableQuickSearch){F.quickSearch=C.enableQuickSearch;}F.searchPattern=D.searchPattern;if(D.recursive){F.recursive=D.recursive;}}this.serverRequest(F,G);},newFolder:function(F,G,E,C){var D={taskId:"createFolder",taskContentType:"json",folderID:F,name:G,description:E};this.serverRequest(D,C);},loadObjects:function A(G,H,C,F){var D=[],E=[];B.forEach(G,function(I){D.push(I.did);E.push(I.t);});if(G.length>0&&F){this.serverRequest({taskId:"getObjectInfo",objectIDs:D.join(","),objectTypes:E.join(","),includeDetails:true},H,C);}else{H.success();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.color","mstrmojo.hash","mstrmojo.num","mstrmojo.array");var e=1,c=2,k=3,G=4,W=5,f=6,d=7,A=-1,H=-2,F=mstrmojo.color,K=mstrmojo.hash,Z=mstrmojo.array,E=mstrmojo.num,I,V;function j(t,s){return t.every(function(u){return s(u);});}function a(u,t,s){return j(u,function(v){return v.ttp===t||v.ttp===s;});}function Y(t){var s=t.toFixed(2);return parseFloat(s);}function i(s){this.raiseEvent(K.copy(s,{name:"modelEdit"}));}function m(s){this.raiseEvent(K.copy(s,{name:"selectedThresholdsChange"}));}function P(){var s=this.basedOnId||this.metricId;return Z.filterOne(this.data.gsi.mx,function(t){return t.did===s;});}function g(v){var s=v.expr.nds,t=s.length;if(t!==1){return false;}var u=s[0],AE=u.cs;if(!u.m||!AE){return false;}var AD=u.fnt,y=u.fn,AC=AE[0],AA=AE[1],x=AC&&AC.v,w=AA&&AA.v,AB=E.parseNumeric(x)||parseFloat(x),z=E.parseNumeric(w)||parseFloat(w);switch(AD){case 2:case 3:switch(y){case 1:case 2:v.flr=AD===2?-Infinity:0;v.ceil=AB;v.ttp=AD===2?(y===1?W:G):(y===1?c:e);break;case 3:case 4:case 5:case 13:v.flr=AB;v.ceil=isNaN(z)?(AD===2?Infinity:100):z;v.ttp=AD===2?(y===4?W:(y===5?G:f)):(y===4?c:(y===5?e:k));break;default:return false;}break;default:switch(y){case 11:v.flr=-Infinity;v.ceil=AB;v.ttp=d;break;case 17:case 10:v.flr=AB;v.ceil=isNaN(z)?Infinity:z;v.ttp=d;break;default:return false;}}return true;}mstrmojo.threshold.MetricThresholdData=null;mstrmojo.threshold.ThresholdModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.ThresholdModel",data:undefined,thresholds:undefined,orgThresholds:undefined,selectedThresholds:[],metricId:undefined,basedOnId:undefined,editorMode:0,init:function l(t){this._super(t);var s=mstrApp.customization.getCustomThresholds();I=I||s.color;V=V||s.image;},ondataChange:function h(){this.thresholds=this.data.gsi.thresholds;this.saveOriginalData();},isAdvanced:function D(w){var t=this.thresholds;if(t){var z=t[w]||[],AN=false,AM,AG,AK="The expression is not supported by the Simple Threshold Exception Parser.";if(z.length===0){return false;}if(z.some(function(AT){if(AT.ttp===A){return true;}try{if(!g(AT)){throw AK;}AG=AT.expr.nds[0].m.did;}catch(AS){return true;}if(AM&&AM!==AG){return true;}AM=AG;var AR=AT.rtp;if(AR===3||AR===10){return true;}var AO=AT.scope;if(AO&&AO!==1){return true;}var AQ=AT.fmt||{};for(var AP in AQ){if(AP!=="bc"&&AP!=="bgs"){return true;}else{AN=true;}}return false;})){return true;}if(AN&&!j(z,function(AO){return AO.fmt&&(AO.fmt.bc||AO.fmt.bgs);})){return true;}this.basedOnId=AM;var AH=false,AF=this.getSimpleThresholdType(w),y=z.length;if(y>0&&AF!==H){var AJ,AB,AD;for(AJ=0;AJ<y-1;AJ++){AB=z[AJ];AD=z[AJ+1];if(AB.ceil!==AD.flr&&AB.flr!==AD.ceil){AH=true;break;}}if(!AH){var s=z[0],u=z[y-1],AC=s.flr,AI=u.ceil,v=s.ceil,x=u.flr,AA=this.getMetricsCount(),AE=this.getMetricsMinValue(),AL=this.getMetricsMaxValue();switch(AF){case W:case G:AH=!(((AC===0||AC===-Infinity)&&(AI===AA||AI===Infinity))||((v===AA||v===Infinity)&&(x===0||x===-Infinity)));break;case c:case e:AH=!((parseInt(AC,10)===0&&parseInt(AI,10)===100)||(parseInt(v,10)===100&&parseInt(x,10)===0));break;case d:AH=!(((AC===AE||AC===-Infinity)&&(AI===AL||AI===Infinity))||((v===AL||v===Infinity)&&(x===AE||x===-Infinity)));break;}}return AH;}else{return true;}}return false;},getSimpleThresholdType:function(t){var u=this.thresholds&&this.thresholds[t],s=H;if(u){if(a(u,k,c)){s=c;}else{if(a(u,k,e)){s=e;}else{if(a(u,f,G)){s=G;}else{if(a(u,f,W)){s=W;}else{if(a(u,d)){s=d;}}}}}}return s;},isImageBasedType:function L(s){var t=this.thresholds&&this.thresholds[s];return t&&!t.some(function(u){return u.rtp!==4;});},getMetricsMaxValue:function(){var s=P.call(this).max;return s===undefined?3000000:s;},getMetricsMinValue:function(){var s=P.call(this).min;return s===undefined?-3000000:s;},getMetricsCount:function(){var s=P.call(this).cnt;return s===undefined?100:s;},getFormatString:function(){var u=this.data.nf,t=this,s=Z.filterOne(u,function(v){return v.id===t.basedOnId;})||{};return s.nfs||"";},getDefaultColors:function p(){return I;},getDefaultImages:function J(){return V;},getNormalizedValue:function(u,t){var s=null;if(t===k||t===c||t===e){s=u/100;}if(t===f||t===W||t===G){s=u/(this.getMetricsCount());}if(t===d){s=(u-this.getMetricsMinValue())/(this.getMetricsMaxValue()-this.getMetricsMinValue());}if(s<0){s=0;}if(s>1){s=1;}return s;},getRealValue:function(t,s){if(s===k||s===c||s===e){return Y(t*100);}if(s===f||s===W||s===G){return Y(t*this.getMetricsCount());}if(s===d){return this.getMetricsMinValue()+t*(this.getMetricsMaxValue()-this.getMetricsMinValue());}return null;},getColorScheme:function(t){var s="custom",u,v,w;I.forEach(function(x){w=x.bands;v=t.length;if(v!==w.length){return ;}for(var y=0;y<v;y++){u=mstrmojo.color.fixFullHexValue(t[y]);if(w[y].bc!==u&&w[v-y-1].bc!==u){return ;}}s=x.id;});return s;},getImageSetName:function U(w){var v=V[0].id,s,u=function(x){return x===s.bands[0].url;};for(var t=0;t<V.length;t++){s=V[t];if(w.some(u)){v=s.id;break;}}return v;},getGridValueFormat:function M(){return this.data.gsi.fmts.va;},isMapReversed:function N(u,s,w){var v=(w?V:I).filter(function(x){return x.id===u;})[0],t=s[0];if(!w){t=F.fixFullHexValue(t);}return v&&v.bands[0][w?"url":"bc"]!==t;},setConditionData:function Q(v,t){var u=v.data,s=u.isNew;K.copy(t,K.clear(u));delete u.isNew;v.paint();v.tree.onConditionEdit(v,s);},hasSelectedThresholds:function o(){return this.selectedThresholds.length>0;},isThresholdSelected:function b(s){return this.selectedThresholds.indexOf(s)!==-1;},toggleThresholdSelected:function X(s,u){var y=this.selectedThresholds,x=y.indexOf(s),t=x!==-1,w=this.thresholds[this.metricId],v=w.indexOf(s)!==-1;if(v){if(u&&!t){y.push(s);}else{if(!u&&t){y.splice(x,1);}}m.call(this);}},addThresholds:function T(s){var t=this.thresholds[this.metricId];this.thresholds[this.metricId]=(t||[]).concat(s);i.call(this);},duplicateThreshold:function n(t){var v=this.thresholds[this.metricId],s=v[t],u=K.clone(s);v.push(u);if(this.isThresholdSelected(s)){this.toggleThresholdSelected(u,true);}i.call(this);},deleteThreshold:function q(s){var u=this.thresholds[this.metricId];var t=u.indexOf(s);if(t!==-1){this.toggleThresholdSelected(s,false);u.splice(t,1);}i.call(this);},moveThreshold:function C(t,v){var u=this.thresholds[this.metricId],s=u.splice(t,1);this.thresholds[this.metricId]=u.slice(0,v).concat(s,u.slice(v,u.length));i.call(this);},cleanUp:function O(){this.selectedThresholds=[];this.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.AUTO;},clearData:function S(){var s=this.thresholds;if(s){s[this.metricId]=undefined;}},saveOriginalData:function R(){this.orgThresholds=K.clone(this.thresholds);},setAttIdToNDE:function B(u){if(!(u instanceof Array)){u=[u];}var t,z,v,s,y,w=function(AA){AA.att.forEach(function(AB){if(AB.did===y.did){y.attId=AB.attId;}});},x=function(AA){AA.conid=y.did;};for(t=0;t<u.length;t++){s=u[t];for(z in s){y=s[z];if(typeof y==="function"||!(y instanceof Object)){continue;}else{if(z==="a"){if(y.t===47&&y.st===12033){K.forEach(this.controller.datasets,w);v=s.fn;if(v===22||v===57){(s.es||[]).forEach(x);}}}else{this.setAttIdToNDE(s[z]);}}}}}});mstrmojo.threshold.ThresholdModel.SLIDER_MODE={COLOR_BASED:0,IMAGE_BASED:1};mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL=[{n:"&#9679;",v:"1"},{n:"&#9632;",v:"2"},{n:"&#9830;",v:"3"},{n:"&#9670;",v:"4"},{n:"&#10070;",v:"5"},{n:"&#9784;",v:"6"},{n:"&#10047;",v:"7"},{n:"&#8984;",v:"8"},{n:"&#8680;",v:"29"},{n:"&#8679;",v:"30"},{n:"&#8681;",v:"31"}];mstrmojo.threshold.ThresholdModel.FEATURES={SHOW_ADVANCED_EDITOR:1,SHOW_BASED_ON:2,SHOW_IMAGE:3,SHOW_VALUE_ITEM:4};mstrmojo.threshold.ThresholdModel.EDITOR_TYPES={AUTO:0,ADVANCED_EDITOR:1,SIMPLE_EDITOR:2};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Obj","mstrmojo.string","mstrmojo.hash","mstrmojo.expr","mstrmojo.mstr.EnumNodeDimty");var D=mstrmojo.array,P=mstrmojo.expr,J=P.ET,I=P.TP,K=mstrmojo.mstr.EnumNodeDimty,N=P.ET2TGT,M=P.ET2COND,B=mstrmojo.meta.TP;function O(S,A){var R=(A&&A.did)?A.did.split(P.FN_SEP):null,E=R&&parseInt(R[0],10),Q=R&&parseInt(R[1],10),T=S.et;S.fnt=E;S.fn=Q;if(T!=J.AE&&P.fn_List(Q,E)){S.et=J.AL;S.a2=null;S.cs=null;}else{if(T==J.AL&&!P.fn_List(Q,E)){S.et=J.AQ;S.cs=null;}else{if(T==J.MC&&!P.fn_AC_MC(Q,E)){S.et=J.MQ;S.m2=null;}else{if(T==J.AC&&!P.fn_AC_MC(Q,E)){S.et=J.AQ;S.a2=null;}}}}switch(Q){case P.FN.IS_NULL:case P.FN.IS_NOT_NULL:S.a2=null;S.a3=null;S.fm2=null;S.fm3=null;S.m2=null;S.m3=null;S.cs=null;break;case P.FN.BETWEEN:case P.FN.NOT_BETWEEN:break;default:S.a3=null;S.fm3=null;S.m3=null;while(S.cs&&S.cs.length>1){S.cs.pop();}}}function F(W,X,Y){var E=true,A=2+X;switch(Y.t){case I.PROMPT:var U=W.cs,V;if(!U){U=[];W.cs=U;}U[X]={};V=U[X];V.p=Y;W["a"+A]=null;W["m"+A]=null;switch(W.et){case J.AC:W.et=J.AQ;break;case J.MC:W.et=J.MQ;break;}break;case I.METRIC:W["a"+A]=null;W.cs=null;W.et=J.MC;W["m"+A]=Y;break;case I.ATTR:W["m"+A]=null;W.cs=null;W.et=J.AC;W["a"+A]=Y;W["fm"+A]=null;break;default:W["a"+A]=null;W["m"+A]=null;var U=W.cs;if(!U){U=[];W.cs=U;}if("did" in Y){W["a"+A]=null;W["fm"+A]=null;W["m"+A]=null;if(U[X]&&U[X].p){U[X].p=null;}}else{if(Y&&Y.v!=null){U[X]=Y;}else{if(U[X]){U=U.splice(X,1);}}E=false;}if(!Y.skipET){switch(W.et){case J.MC:W.et=J.MQ;break;case J.AC:W.et=J.AQ;break;case J.AL:if(!("did" in Y)&&Y.v){var Q,S=Y.dtp,U=[];Q=Y.v.split(mstrConfig.listSep);for(var R=0,T=Q.length;R<T;R++){U.push({v:mstrmojo.string.trim(Q[R]),dtp:S});}W.cs=U;}break;}}}return E;}var H={};H[J.AQ]={target:1,fm:1,fn:1,cs:1};H[J.AL]={target:1,fm:1,fn:1,cs:1};H[J.AE]={target:1,fn:1,es:1};H[J.AC]={target:1,a2:1,a3:1,fm:1,fm2:1,fm3:1,fn:1};H[J.MQ]={target:1,fn:1,cs:1,dmy:1};H[J.MC]={target:1,fn:1,m2:1,m3:1,dmy:1};H[J.F]={target:1};H[J.R]=H[J.F];H[J.XML]={target:1};var G=function(A){return A!==null&&A!==undefined;};var L=function(W){if(!W||!G(W.et)){return false;}var V=true,A=H[W.et],T=W.cs,S;V=V&&(!A.target||W[N[W.et]]);V=V&&(!A.fm||W.fm);V=V&&(!A.fn||G(W.fn));var R=P.fnCstCount(W.fn,W.fnt);if(V&&A.cs){for(S=0;S<R;S++){V=V&&T&&G(T[S]);}}if(V){var U=[N[W.et],"fm"];for(var E=0;E<2;E++){for(S=0;S<R;S++){var X=U[E]+(2+S);V=V&&(!A[X]||W[X]);}}}V=V&&(!A.es||W.es&&(W.es.length>0));var Q=W.dimtyTypes;V=V&&(!A.dmy||Q[K.NodeDimtyUnspecified]||Q[K.NodeDimtyNone]||(Q[K.NodeDimtyOutputLevel]&&W.dmy&&W.dmy.uts&&(W.dmy.uts.length>0)));return V;};mstrmojo.ConditionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ConditionModel",completed:false,init:function(A){if(this._super){this._super(A);}this._updateCompleted();},edit:function(l,Y){var S=this[l],k=true;this.etWas=this.et;switch(l){case"not":Y=!!(Y&&Y.did===P.FN.NOT);S=!!this.not;if(Y===S){return ;}this.not=!!Y||null;break;case"target":var AA=this.et;if(Y){switch(Y[B]){case I.ATTR:case I.CONS:S=this.a;if(AA!==J.AQ&&AA!==J.AE){this.et=J.AQ;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}if(AA!==J.AE){this.fn=null;this.fnt=null;}this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case I.METRIC:S=this.m;if((AA!==J.MQ)&&(AA!==J.MC)){this.et=J.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.r=null;this.f=null;this.cs=null;this.dmt=K.NodeDimtyUnspecified;}this.m2=null;break;case I.REPORT:S=this.r;if(AA!==J.R){this.et=J.R;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.f=null;}break;case I.FILTER:S=this.f;if(AA!==J.F){this.et=J.F;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;}break;case I.PROMPT:S=this.prms&&this.prms[0];if(AA!==J.XML){this.et=J.XML;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}break;}}this.es=null;this[N[this.et]]=Y;break;case"fm":if(Y&&Y[B]==="fn"){this.et=J.AE;this.fm=null;O(this,Y);}else{this.fm=Y;if(Y&&(this.et==J.AE)){this.et=J.AQ;}this.fnt=null;this.fn=null;this.cs=null;this.a2=null;this.fm2=null;}break;case"fm2":case"fm3":this[l]=Y;break;case"fn":O(this,Y);break;case"es":var AD=this.es;if(Y&&Y.removed&&AD){D.removeItems(AD,Y.itemIdField,Y.removed);}if(Y&&Y.added){if(!AD){AD=Y.added.concat();this.es=AD;}else{D.insert(AD,AD.length,Y.added);}}break;case"c0":k=F(this,0,Y);break;case"c1":k=F(this,1,Y);break;case"dmy":var x=this.dmy;if(!x){x={cc:true,fres:true,uts:[]};this.dmy=x;}var s=x&&x.uts;if(!s){s=[];x.uts=s;this.dmt=K.NodeDimtyOutputLevel;}var Q={};Q[P.TP.ATTR]=true;Q[P.TP.DIM]=true;if(Y&&Y.removed){var f=[],A=false,W=[],R=false;for(var j=0,T=Y.removed,E=T.length;j<E;j++){var V=T[j],z=V[B] in Q;if(z){R=true;}else{A=true;}var h=z?W:f;h.push(V);}if(A){D.removeItems(s,"did",f);}if(R){var AC={};for(var d=0,Z=s&&s.length;d<Z;d++){var X=s[d];if(X&&X.utgt){AC[X.utgt.did]=d;}}var U=[];for(var y=0,w=W.length;y<w;y++){var g=AC[W[y].did];if(g>-1){U.push(g);}}U.sort(D.numSorter);for(var q=U.length-1;q>-1;q--){s.splice(U[q],1);}}}if(Y&&Y.added){var AE=[],m=P.DMY_TP.DIM,p=P.DMY_TP.ATTR;for(var AB=0,t=Y.added,e=t.length;AB<e;AB++){var o=t[AB];AE.push((o[B] in Q)?{utgt:o,utp:o[B]===I.DIM?m:p,agg:1,flt:2,gb:true,rps:0,n:o.n}:o);}D.insert(s,s.length,AE);}break;}this._updateCompleted();if(k){this.raiseEvent({name:"edit",prop:l,value:Y,valueWas:S});}},get:function C(){var A=M[this.et]||[];A.push("et");return mstrmojo.hash.copyProps(A,this);},_updateCompleted:function(){this.set("completed",L(this));}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var E=mstrmojo.hash;mstrmojo.threshold.PropertyModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.PropertyModel",threshold:undefined,gridValueFormat:undefined,submitChange:function F(){this.raiseEvent({name:"propertyModelChange",threshold:this.threshold});},updateControl:function D(H){var G=this.threshold,I=E.copy(G.fmt,this.gridValueFormat);H.textGroup.setFormatSource(G);H.charGroup.setFormatSource(I);H.containerGroup.setFormatSource(I);},changeFormatProperty:function B(H,I,K){var G=this.threshold,J=H==="threshold"?G:G.fmt;if(!J&&H==="fmt"){J=G.fmt={};}J[I]=K;},getReplaceTypeName:function A(){return"rtp";},getReplaceTextName:function C(){return"rtxt";}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var K=mstrmojo.hash;var P=0;var F=[];var J={};var L=false;function I(T){var U=T.callback;if(U.submission){U.submission(T.id,this.userInteractionRequired(T),T);}this.submitRequest(T);}function G(){if(F.length&&!L){I.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(d,a,U,V){if(U){this.cancelRequests();}var X=this.id,Y=this.transport,T=mstrmojo.now()+a.taskId+P++,W=d.canceled||mstrmojo.emptyFn;d.canceled=function(e){W();d.complete(true);return Y.cancelRequest(e);};d=mstrmojo.func.wrapMethods(d,{complete:function(e){mstrmojo.all[X].deleteRequest(e);}});var Z=!K.isEmpty(this._requests),b=this.createRequest(T,d,a,V),c=(L||Z)&&!V.doNotHold;if(c){F.push(b);}else{I.call(this,b);}return T;},hasRequests:function O(){return !K.isEmpty(this._requests)||L;},createRequest:function Q(V,X,W,T){var U=this._requests;if(!U){U=this._requests={};}U[V]={id:V,callback:X,params:W,config:T};return U[V];},submitRequest:function M(T){this.transport.serverRequest(this.id,T.id,T);},cancelRequests:function S(){var T=false;K.forEach(this._requests,function(U){if(U.gotResponse===undefined){T|=U.callback.canceled(U.id);}});this._requests={};F=[];return T;},cancelRequest:function B(X){var U=false,W=this._requests[X],V,T=F.length;for(V=0;V<T;V++){if(F[V]===W){break;}}if(V<T){F.splice(V,1);delete this._requests[X];U|=W.callback.canceled(W.id);}return U;},response:function A(X,T,V){$MAPF(false,"AndroidServerTransport","transportRequest");var W=this.getRequest(X);if(W){W.gotResponse=true;var Y=W.callback,U=(T&&!V.mstrerr)?"success":"failure";try{if(Y[U]){Y[U](V,W);}}finally{Y.complete(X);}}G.call(this);},deleteRequest:function N(U){var T=this._requests;delete T[U];},getRequest:function H(U){var T=this._requests;return T&&T[U];},userInteractionRequired:function C(T){return false;},addLoadingGraph:function D(T){J[T]=true;L=true;},removeLoadingGraph:function R(T){delete J[T];if(K.isEmpty(J)){L=false;G.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");function B(J,I){this.raiseEvent({name:"viCompBuilt",type:J,widget:I});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function G(I){this._super(I);this.relativePanels={};this.comps={};},addRelativePanel:function H(I){this.relativePanels[I]=true;},isRelativePanel:function F(I){return !!this.relativePanels[I];},isComponent:function C(J,I){return this.getComponentKey(J)===I;},getComponent:function A(I){return this.comps[I];},getComponentKey:function D(J){var I=this.getComponent(J);return(I&&I.k)||"";},createComponent:function E(L,K,J){B.call(this,L);var I=new K(J);this.comps[L]=I;B.call(this,L,I);return I;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.StepperContentProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.StepperContentProvider",item:null,renderer:null,min:null,max:null,interval:1,minField:"min",maxField:"max",valField:"value",intField:"interval",canLoop:false,next:mstrmojo.emptyFn,prev:mstrmojo.emptyFn,hasPrev:mstrmojo.emptyFn,hasNext:mstrmojo.emptyFn,renderItemAt:mstrmojo.emptyFn,setVal:mstrmojo.emptyFn,getVal:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._Fetchable");mstrmojo.mstr.DocElementDataHelper=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._Fetchable],{scriptClass:"mstrmojo.mstr.DocElementDataHelper",source:null,items:null,browseConfig:null,concat:true,init:function(A){var B=A&&A.browseConfig;this.blockBegin=(B&&B.blockBegin)||1;this.blockCount=(B&&B.blockCount)||mstrApp.elementsBlockCount||30;if(this._super){this._super(A);}},getBrowseConfig:function(){if(!this.browseConfig){this.browseConfig={blockBegin:this.blockBegin,blockCount:this.blockCount};}return this.browseConfig;},_retrieveItems:function(C,B){var A=this.getBrowseConfig();A.blockBegin=C;mstrmojo.func.override({success:function(D){if(this._super){this._super(mstrmojo.hash.copy(D,{items:D.es,totalSize:D.sz}));}}},B);this.source.browseElements(A,B);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var D={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};var C={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:D,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,init:function H(I){this.clear();this._super(I);},setAlignment:function E(I,J){this.alignment={host:I,popup:J};},addPopupHandlers:function F(I,K,J){this.popupHandlers[I]={open:K,close:J};},clear:function B(){this.popupHandlers={};var I=this.ENUM_CORNERS;this.alignment={host:I.BOTTOM_LEFT,popup:I.TOP_LEFT};}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=D;mstrmojo.ui.PopupConfig.directionCfg={menuDirection:C.LEFT_TO_RIGHT,isRightToLeft:function G(){return this.menuDirection===C.RIGHT_TO_LEFT;},setDirection:function A(I){this.menuDirection=I?C.RIGHT_TO_LEFT:C.LEFT_TO_RIGHT;}};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom");function b(c,e){if(!mstrmojo.DocInfoWindow){return ;}var d=c;while(d){if(d instanceof mstrmojo.DocInfoWindow){d[e?"registerScrollLock":"releaseScrollLock"](this);break;}d=d.parent;}}var L=mstrmojo.array,C=mstrmojo.dom,Q=mstrmojo.hash,Y=mstrmojo.css,F="px";var B=false;function K(c,e){if(!mstrmojo.DocInfoWindow){return ;}var d=c;while(d){if(d instanceof mstrmojo.DocInfoWindow){d[e?"registerLock":"releaseLock"](this);this.lockIW=e?d:null;break;}d=d.parent;}}var T=mstrmojo.ui.PopupConfig,M=T.directionCfg,A=T.ENUM_CORNERS,V=A.TOP_LEFT,S=A.TOP_RIGHT,H=A.BOTTOM_RIGHT,G=A.BOTTOM_LEFT;function I(c){return(c===G||c===V);}function Z(c){return(c===S||c===H);}function O(c){return(c===H||c===G);}function R(c){return(c===S||c===V);}function W(j,e,p,v){var y=p.x,x=p.y,u=p.w||0,l=p.h||0,d=v.w,q=v.h,t=j.alignment,h=t.popup,g=t.host,w=Z(g),z=O(g),s=false,n=false,f=false,o=false;if(I(h)){var i=y+d+(w?u:0);s=e.w<i;}if(R(h)){var m=x+q+(z?l:0);n=e.h<m;}if(Z(h)){var k=y-d+(w?u:0);f=k<0;}if(O(h)){var c=x-q+(z?l:0);o=c<0;}return{top:o,bottom:n,left:f,right:s};}function E(d){var c=this.popupConfig;if(c){Q.forEach(c.popupHandlers,function(f,g){var e=f[d?"open":"close"];if(e){e.call(mstrmojo.all[g]||e,!!d);}});}}function J(d){var c=this.popupConfig;if(c&&!c.isHostedWithin){var e=this.hostProxy;if(e){e.style.display=d?"":"none";}}}function a(c){return c!==undefined&&c!==null&&!isNaN(c);}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,open:function N(e,c){E.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(c,e);}else{Q.forEach(c,function(h,g){this.set(g,h);},this);}var d="popup-mid-render";this.set("opener",e);if(!this.hasRendered){var f=this.visible;this.visible=false;this.render();Y.addClass(this.domNode,d);this.set("visible",f);}if(this.nudge){this.domNode.style.top="-10000px";}J.call(this,true);this.set("visible",true);if(this.lockIWForScroll){b.call(this,this.opener,true);}if(c&&c.lockIW){K.call(this,c.lockIW,true);}if(this.nudge){this.nudge();}this.adjustCornersForPopupOverflow();this.onOpen();Y.removeClass(this.domNode,d);},adjustCornersForPopupOverflow:function X(){var m=this.popupConfig;if(!m){return false;}var AJ=(m.includeScroll!==undefined)?m.includeScroll:true;var p=m.position||C.position(m.anchorElement||m.hostElement,AJ);if(!m.isHostedWithin){var z=this.hostProxy,t=this.hostProxy=document.createElement("div");document.body.appendChild(t);t.appendChild(this.domNode);if(z){z.parentNode.removeChild(z);}var g=t.style,u={x:"left",y:"top",w:"width"};t.className=m.hostProxyCssClass;g.position="absolute";g.background="none";g.height="0";L.forEach(["x","y","w"],function(AM){var AL=p[AM];if(a(AL)){g[u[AM]]=AL+F;}});}var AG=m.ENUM_CORNERS,x=AG.BOTTOM_LEFT,k=AG.BOTTOM_RIGHT,j=AG.TOP_RIGHT,AC=AG.TOP_LEFT;var AD=W(m,C.position(document.body),p,C.position(this.domNode)),y=AD.right,q=AD.bottom,f=AD.left,w=AD.top,AB=m.alignment,s=AB.popup,AK=AB.host,i=s,e=AK;if(M.isRightToLeft()){y=true;}else{if(y){M.setDirection(true);this.resetDirection=true;}}if(y||f){if(I(e)){e=R(e)?j:k;}else{if(Z(e)){e=R(e)?AC:x;}}if(y&&I(i)){i=R(i)?j:k;}else{if(f&&Z(i)){i=R(i)?AC:x;}}}if(q||w){if(I(e)){e=R(e)?x:AC;}else{if(Z(e)){e=R(e)?k:j;}}if(q&&R(i)){i=I(i)?x:k;}else{if(w&&O(i)){i=I(i)?AC:j;}}}if(w||y||q||f){if(B){console.log("Overflow directions: "+JSON.stringify(AD));}this._orgalgn={host:AK,popup:s};m.setAlignment(e,i);}if(!m.isHostedWithin){if(a(p.y)&&a(p.h)){this.hostProxy.style.top=(p.y+(O(i)?(m.alignWithAnchor===true?p.h:0):(m.alignWithAnchor===true?0:p.h)))+F;}}var AA=O(e),AF=Z(e),AE=O(i),o=Z(i),l="auto",d="100%",c="0";var v=l,AH=l,n=l,h=l;if(AE){n=AA?c:d;}else{v=AA?d:c;}if(o){AH=AF?c:d;}else{h=AF?d:c;}var AI=this.domNode.style;AI.top=v;AI.right=AH;AI.bottom=n;AI.left=h;return true;},close:function P(d){if(this.onClose){this.onClose(d);}J.call(this,false);if(this.lockIWForScroll){b.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){K.call(this,this.lockIW,false);}E.call(this,false);var c=this._orgalgn;if(c){this.popupConfig.setAlignment(c.host,c.popup);}if(this.resetDirection){this.resetDirection=false;M.setDirection(false);}},buildRendering:function D(){var c=this._super();if(c){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return c;},unrender:function U(c){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){document.body.removeChild(this.hostProxy);delete this.hostProxy;}this._super(c);}};}());(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var A=mstrmojo.num;function B(G,F){var H=F?G.max:G.min,D=F?G.min:G.max,E=G.getVal(F?1:-1);return(H===null||(F?(E<=H):(E>=H))||(D!==null&&G.canLoop));}function C(H,G){var F=H.min,D=H.max,E=H.getVal(G?1:-1);if((G&&D!==null&&E>D)||(!G&&F!==null&&(E<F))){if(H.canLoop){E=((E-F)%(D-F+1))+F;E=(E>=F)?E:E+(D-F+1);}else{return ;}}H.item[H.valField]=H.curVal=E;H.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(E){this._super(E);var F=this.item,D=function(I){var H=I&&F[I];return(H===null||H===undefined);},G=function(I,K,H){var J=H&&D.call(this,K)?null:F[K];if(J!==null&&J!==undefined){this[I]=J;}};G.call(this,"min",this.minField,true);G.call(this,"max",this.maxField,true);G.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var E=this.item,F=this.curVal=E[this.valField];if(F===null||F===undefined){var D=this.min;this.curVal=D!==null?D:0;}},next:function(){C(this,true);},prev:function(){C(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},renderItemAt:function(F){var E=this.getVal(F),D=this.renderer;return D?D.render(E,this):E;},getVal:function(D){return this.curVal+(this.interval*(D||0));},setVal:function(F){var G=this.min,D=this.max,E=this.getVal();if(typeof F!=="number"||isNaN(F)||F===E||A.inNumericRange(F,G,D)!==0){return ;}this.item[this.valField]=this.curVal=F;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport");var BasicAggMap={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},RankMap={"8107C326DD9911D3B98100C04F2233EA":"Rank"},OLAPAggMap={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},MovingAggMap={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},RunningAggMap={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},BandingMap={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"};function _sortFunctions(fcts){var fs=function(a,b){return mstrmojo.array.stringSorter(a.n,b.n);},i,len;fcts=fcts.sort(fs);for(i=0,len=fcts.length;i<len;i++){fcts[i].fns=fcts[i].fns.sort(fs);}return fcts;}function getFuncCatIndex(fcts,funcDid){var len=fcts.length,ci;for(ci=0;ci<len;ci++){var fns=fcts[ci].fns;if(mstrmojo.array.find(fns,"did",funcDid)>-1){return ci;}}return -1;}function buildTaskParams(params){var qse=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();params=mstrmojo.hash.copy(params,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(qse){params.quickSearch=qse;params.nameWildcards=16;params.sortKey=-1;}return params;}function serverRequest(callback,taskParams){if(mstrApp.serverRequest){mstrApp.serverRequest(taskParams,callback);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(callback,taskParams,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function getServerProxy(){if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}return this.serverProxy;},getMetricDefintion:function getMetricDefintion(params,callbacks){var taskParams={taskId:"getMetricDefinition",metricId:params.id,outputFlags:65599};if(params.msgID){taskParams.msgID=params.msgID;}serverRequest.call(this,callbacks,taskParams);},validateMetric:function validateMetric(params,callbacks){var taskParams={taskId:"validateMetric",metricId:params.metricId,tokenStreamXML:params.tokenStreamXML,metricXML:params.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(params.metricId)){taskParams.isNew=true;}if(params.msgID){taskParams.msgID=params.msgID;}if(params.formID){taskParams.frmid=params.formID;}if(params.isIDForm){taskParams.isIDForm=params.isIDForm;}if(params.objectType){taskParams.objectType=params.objectType;}serverRequest.call(this,callbacks,taskParams);},getMetricComponents:function getMetricComponents(params,callbacks){var me=this,mc=this.metricComponents;if(!this.noCache&&mc&&mc.items.length==mc.sz){callbacks.success(mc);return ;}callbacks.success=mstrmojo.func.composite([callbacks.success,function(res){if(me.metricComponents&&me.metricComponents.items){me.metricComponents.items.push(res.items);}else{me.metricComponents=res;}}]);var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||24,objectType:params.objectType||"12,13,43"});serverRequest.call(this,callbacks,taskParams);},getAttributes:function getAttributes(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||26,objectType:12});serverRequest.call(this,callbacks,taskParams);},getFacts:function getFacts(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||29,objectType:13});serverRequest.call(this,callbacks,taskParams);},getMetrics:function getMetrics(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||5,objectType:4});if(params.isVerify){taskParams.nameWildcards=2;}serverRequest.call(this,callbacks,taskParams);},getFunctions:function getFunctions(callbacks){var me=this,wss=window.sessionStorage,fcts=this.functions||(wss&&wss.getItem("functions")),localeId=wss&&wss.getItem("mstrLocaleId"),cLocaleId=mstrApp&&mstrApp.localeId;if(fcts&&localeId==cLocaleId){fcts=_sortFunctions(eval("("+fcts+")").fncs);callbacks.success(fcts);}else{var cb={failure:callbacks.failure,textResponse:true},taskParams={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};cb.success=function(res){if(typeof res==="string"||!mstrApp.isSingleTier){if(wss){wss.setItem("functions",res);wss.setItem("mstrLocaleId",cLocaleId);}me.functions=res;fcts=_sortFunctions(eval("("+res+")").fncs);}else{fcts=_sortFunctions(res.fncs);me.functions=JSON.stringify(res);}callbacks.success(fcts);};serverRequest.call(this,cb,taskParams);}},getAggFunctions:function getAggFunctions(){if(this._aggFunctions){return this._aggFunctions;}var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.array.filter(fcts[this.getBasicCategoryIndex(fcts)].fns,function(item){var did=item.did,retVal;if(did!=="B2C0FA4020C711D6AD1400C04F0423DE"&&did!=="B2C0FA4120C711D6AD1400C04F0423DE"){retVal=BasicAggMap[did];}return retVal;});return fcts;},getOLAPAggFunctions:function getOLAPAggFunctions(type){var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.array.filter(fcts[this.getOLAPCategoryIndex(fcts)].fns,function(item){switch(type){case"moving":return MovingAggMap[item.did];case"running":return RunningAggMap[item.did];case"olap":default:return OLAPAggMap[item.did];}return false;});return fcts;},getFunctionCatList:function getFunctionCatList(){if(this._functionCatList){return this._functionCatList;}var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.hash.make(fcts,mstrmojo.Arr);this._functionCatList=fcts;return fcts;},getCategoryIndex:function getCategoryIndex(funcDid,fcts){return getFuncCatIndex(fcts||this.getFunctionCatList(),funcDid);},getBasicCategoryIndex:function getBasicCategoryIndex(fcts){var Agg_Func_Greatest="B2C0FA4020C711D6AD1400C04F0423DE";return getFuncCatIndex(fcts||this.getFunctionCatList(),Agg_Func_Greatest);},getDataMiningCatIndex:function getDataMiningCatIndex(fcts){var DataMining_Func_MiningModel="F17CD4F3FF134D91B80DDAB9CA73C919";return getFuncCatIndex(fcts||this.getFunctionCatList(),DataMining_Func_MiningModel);},getDateTimeCategoryIndex:function getDateTimeCategoryIndex(fcts){var DateTime_Func_Date="C50F2A4F75AE49D6B20E00224967B500";return getFuncCatIndex(fcts||this.getFunctionCatList(),DateTime_Func_Date);},getStringCategoryIndex:function getStringCategoryIndex(fcts){var String_Func_Concat="6F7DF5FF449111D5BEA300B0D01A55EF";return getFuncCatIndex(fcts||this.getFunctionCatList(),String_Func_Concat);},getOLAPCategoryIndex:function getBasicCategoryIndex(fcts){var OLAP_Func_Avg="D221F90EB35540E3A1204ED6CC9A8267";return getFuncCatIndex(fcts||this.getFunctionCatList(),OLAP_Func_Avg);},getInternalCategoryIndex:function getInternalCategoryIndex(fcts){var INTER_Func_Band="8107C337DD9911D3B98100C04F2233EA";return getFuncCatIndex(fcts||this.getFunctionCatList(),INTER_Func_Band);},getFunctionDetails:function getFunctionDetails(params,callbacks){var taskParams={taskId:"getSystemFunctions",functionId:params.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};serverRequest.call(this,callbacks,taskParams);},getTransformations:function getTransformations(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||38,objectType:43});serverRequest.call(this,callbacks,taskParams);},getFilters:function getFilters(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||4,objectType:1});serverRequest.call(this,callbacks,taskParams);},getAttributeForms:function getAttributeForms(params,callbacks){var taskParams={taskId:"getAttributeForms",attributeID:params.attributeID,displayedForms:params.displayedForms,styleName:"WidgetElementListStyle"};serverRequest.call(this,callbacks,taskParams);},getSubtotalFunctions:function getSubTotalFunctions(params,callbacks){var taskParams=buildTaskParams({objectType:"1025,1026",searchPattern:""});serverRequest.call(this,callbacks,taskParams);},isBasicAggMap:function isBasicAggMap(did){var retVal=!!BasicAggMap[did];if(did==="B2C0FA4020C711D6AD1400C04F0423DE"||did==="B2C0FA4120C711D6AD1400C04F0423DE"){retVal=false;}return retVal;},isOLAPAgg:function isOLAPAgg(did){return !!OLAPAggMap[did];},isMovingAgg:function isMovingAgg(did){return !!MovingAggMap[did];},isRunningAgg:function isRunningAgg(did){return !!RunningAggMap[did];},isBanding:function isBanding(did){return !!BandingMap[did];},isOLAP:function isOLAP(did){var fcts=this.getFunctionCatList(),olapFns=fcts[this.getOLAPCategoryIndex(fcts)].fns;return mstrmojo.array.find(olapFns,"did",did)>-1;},isRank:function isRank(did){return !!RankMap[did];},isScalar:function isScalar(fctOi){return(fctOi||{}).sqt===3;},getFunctionHelpTopic:function getFunctionHelpTopic(h){return'<a href="'+((mstrApp.helpUrl||"../help/")+"FunctionsRef/index.html?context=functionsref&topic="+(h||""))+'" target="_new">'+mstrmojo.desc(5811,"Details ...")+"</a>";},sortFunctions:function sortFunctions(functions){var allfuncs={},fs=function(a,b){return mstrmojo.array.stringSorter(a.n,b.n);};mstrmojo.array.forEach(functions,function(funcs){mstrmojo.array.forEach(funcs&&funcs.fns,function(func){if(func&&func.did){allfuncs[func.did]=func;}});});return mstrmojo.hash.valarray(allfuncs).sort(fs);}});}());(function(){mstrmojo.requiresCls("mstrmojo.threshold.ThresholdModel","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel");var I=mstrmojo,E=mstrmojo.chart.model.enums.EnumDSSObjectType,F=1,C=["#97D2FC","#62B4EE","#2798EB","#2387CF","#1F77B4"],G=[0.2,0.4,0.6,0.8],B=I.models.FormatModel,H=B.ENUM_PROPERTY_NAMES;function D(L,K,M,N){K.reverse().forEach(function(O){N.push(L.getClearThresholdAction(M.did,M.t||E.DssTypeMetric,O.tid));});}mstrmojo.vi.util.ThresholdUtils=mstrmojo.provide("mstrmojo.vi.util.ThresholdUtils",{addClearAllThresholdsActions:function J(K,M,Q){var P=M.data.gsi,L=P.mx,N=P.thresholds,O;if(N){L.forEach(function(R){O=N[R.did];if(O){D(K,O,R,Q);}});P.thresholds={};}},addThresholds:function A(S,X,N,R,P,K,L,O){var Q,U=[],T=new mstrmojo.threshold.ThresholdModel({data:N.data}),V=T.data.gsi.thresholds,M=V&&V[R.did];P=P||[];if(!M||O){K=K||C;L=L||G;for(Q=0;Q<K.length;Q++){var W={};W.fmt=B.getFormatUpdate(H.BACKGROUND_COLOR,K[Q]);B.getFormatUpdate(H.FILL_STYLE,0,W.fmt);if(Q>0){W.flr=T.getRealValue(L[Q-1],F);}if(Q<L.length){W.ceil=T.getRealValue(L[Q],F);}U.push(W);}if(M){D(S,M,R,P);}P.push(S.getCreateSimpleThresholdAction(U,X.k,R.did,F,null,4));}T.destroy();return P;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget");var R=["(",")","{","}","-","+","*","/","<",">","|","~",","],G={" ":true,"@":true},Q=null;function J(V){if(!Q){Q={};var U,T;for(U=0,T=R.length;U<T;U++){Q[R[U]]=true;}}return Q.hasOwnProperty(V);}function S(V){if(!V){return false;}var T=V.length,U,W;for(U=0;U<T;U++){W=V.charAt(U);if(J(W)||G[W]){return true;}}return false;}function A(T){return S(T)?"["+T+"]":T;}var M={8:true,9:true,10:true};var C=function(U,T){return M[U]&&!/^\".*\"$/.test(T)?'"'+T+'"':T;};var D=function(U,T,V){var W=typeof V==="undefined"?true:M[V];return U.tp===261&&T.length>=2&&W?(/^\s+$/.test(T.substr(1,T.length-2))?T:T.substr(1,T.length-2)):T;};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,null,{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}"></span>',active:false,markupMethods:{ondataChange:function(){var U=this.data,T=mstrmojo.string.encodeHtmlString(String(U.v));if(U.v===","){this.domNode.innerHTML=T+"&nbsp;";}else{if(U.tp===259&&U.v==="Desc"){this.domNode.innerHTML="&nbsp;"+T;}else{this.domNode.innerHTML=T;}}mstrmojo.css.toggleClass(this.domNode,["mstr"],this.isMstrO());mstrmojo.css.toggleClass(this.domNode,["nfn"],!this.isFunction());mstrmojo.css.toggleClass(this.domNode,["invalid"],U.sta===-1);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},isMstrO:function P(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t==11);},brackets:A,length:function E(){return this.data.v.toString().length;},isDelimiter:function O(){return this.data.isDelimiter||(this.length()===1&&J(this.data.v));},split2Tokens:function H(W){var V=this.data,U=V&&V.v.toString(),X=U.substring(0,W),T=U.substring(W);return[{v:X,isNew:true},{v:T,isNew:true}];},mergeTo:function I(U){var W=this.data,V=W&&W.v.toString(),T=U.data.v.toString();return{v:V+T,isNew:true};},brackets:A,setItemInfo:function N(T){var U=this.data;U.v=this.brackets(T.n);U.oi=T;U.sta=1;U.isNew=true;this.set("data",U);this.paint();},spliceContent:function K(Z,X,U){var Y=this.data,W=Y&&Y.v.toString(),a=W.substring(0,Z);X=(X===null||X===undefined)?(W.length-Z):X;var T=W.substring(Z+X),V=a+(U||"")+T;Y.v=V;Y.isNew=true;Y.sta=1;Y.ift=(this.isAttributeToken()||Y.at)&&(Y.v.indexOf("@")>=0);if(Y.ift){Y.at=Y.oi||Y.at;}else{delete Y.at;}delete Y.oi;delete Y.exv;delete Y.extp;delete Y.tp;this.set("data",Y);this.paint();},isAttributeToken:function F(){return this.data&&this.data.oi&&this.data.oi.t===12;},setFormInfo:function L(U){var V=this.data,T=V.oi||V.at;V.v=this.brackets(T.n)+"@"+this.brackets(U.n);V.exv=U.did;V.extp=8;V.sta=1;V.isNew=true;V.oi=V.at;delete V.at;this.set("data",V);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=J;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=D;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=M;mstrmojo.ME.MetricToken.argDelimiter={".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",";})();(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(V,R){var U=V?[V]:(this.children||[]),O=U.length,S;for(S=O-1;S>-1;S--){var Q=U[S],P=Q&&Q.domNode;if(P){var T=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===T){T.removeChild(P);}}}return this._super(V,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var W=O&&O.domNode;if(!W){return ;}var P=this.defaultChildSlot,V=O.slot||P,Y=this[V],Q=this.children;if(!Y){if(W.parentNode){W.parentNode.removeChild(W);}}else{if(W.parentNode===Y){return ;}if(!this.preserveChildDomOrder){Y.appendChild(W);}else{var R,U;for(U=Q.length-1;U>=0;U--){var X=Q[U];if(X===O){break;}if(V===(X.slot||P)){var Z=X.domNode;if(Z&&Z.parentNode===Y){R=Z;}}}if(R){Y.insertBefore(W,R);}else{Y.appendChild(W);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,T;for(T=0;T<S;T++){if(!Q[T].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var E=mstrmojo.Widget;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function D(){return this.domNode.firstChild;},containerNode:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:E.visibleMarkupMethod,onheightChange:E.heightMarkupMethod,onwidthChange:E.widthMarkupMethod,onvalueChange:function F(){this.selectedNode.innerHTML=this.value||"";},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",postBuildRendering:function B(){this._super();this.getPopupList().set("items",this.items);var G=this.selectedIndex,H=this.selectedIndices;if(G!==undefined){this.set("selectedIndex",G);}if(H!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(H||{}));}},onitemsChange:function C(){var G=this.getPopupList();if(G){G.set("items",this.items);}},onPopupWidgetOpened:function(){var G=this.getPopupList();if(G&&(!G.items||G.items.length===0)){G.close();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var C=mstrmojo.css,A=mstrmojo.dom,F=mstrmojo.string,E=function(H){this._super&&this._super(H);A.stopPropogation(H.hWin,H.e);},G=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.DynamicNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.fe.DynamicNode",markupString:'<div id="{@id}" class="mstrmojo-dynamic {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-dynamic-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-dynamic-prefix-text"  mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">'+G+'<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-onhoverparent mstrmojo-dynamicNode" title="'+mstrmojo.desc(13229,"Add this condition to the target list of a selector.")+'"><span class="mstrmojo-dynamicNode-info"><span class="mstrmojo-textset"></span></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" ></img></span><span class="mstrmojo-textset mstrmojo-rename-text" mstrAttach:click >'+mstrmojo.desc(1388,"Rename")+"</span>"+G+"</div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},dynamicNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.lastChild.firstChild.lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},createSetNode:function(){return this.domNode.lastChild.lastChild;},renameNode:function(){return this.domNode.lastChild.childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){C.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){C.toggleClass(this.dynamicNode,["selected"],this.selected);},onisEditingChange:function(){C.toggleClass(this.domNode,["renaming"],this.isEditing);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=this.data.ph.n;},onglowChange:function(){var H=this;C.toggleClass(H.dynamicNode,["glow"],this.glow);if(this.glow){setTimeout(function(){C.toggleClass(H.dynamicNode,["glow"],false);H.glow=false;},1000);}},onnoRelationOperatorChange:function(){C.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){C.toggleClass(this.dynamicNode,["noRelation"],this.noRelation);}},editableSlot:"textNode",editButtonSlot:"renameNode",init:function(H){var J=H.data;if(J){var I=H.tree.nameFactory;if(J.ph.n){I.setName(J.ph.n,this);}else{J.ph.n=I.getNewName(this,mstrmojo.desc(12033,"Dynamic Condition")+" ");}}this._super(H);},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;this.text=H.ph.n;}return J;},preclick:function D(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.createSetOptNode,I,true)&&!this.noRelationOperator&&!this.noRelation){J="createSetOpt";}else{if(A.contains(this.createSetNode,I,true)&&!this.noRelation){J="createSet";}else{if(A.contains(this.renameNode,I,true)){this.set("isEditing",true);}}}}H.part=J;},isEmpty:function(){var I=this.data,H=I&&I.ph;return !(H&&H.n);},del:function B(){var I=this.parent,H=this.tree.nameFactory;if(I&&I.remove&&this.data){I.remove(this.data);H.removeName(this.data.ph.n);}},onkeyup:E,onkeydown:E,onTextEditComplete:function(){var J=this.tree,K=J.nameFactory,H=F.trim(this.text||""),I=this.data.ph.n;if(H&&H!==I){if(K.isNameExist(H)){K.names[H].set("glow",true);this.set("isEditing",true);}else{K.changeName(I,H,this);this.data.ph.n=H;}}},isSelectableArea:function(H){return mstrmojo.dom.contains(this.dynamicNode,H,true);},avatarCssCls:"mstrmojo-FE mstrmojo-dynamicNode",getAvatarNode:function(){return this.dynamicNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.dom");var H=mstrmojo.color,F=mstrmojo.dom;var G=68.5,I=77.5,C=83;function A(L,K){var J=F.getMousePosition(L,window);return{x:J.x-K.x-I,y:J.y-K.y-I};}function B(L){var K=this._hsl,J=K[0],N=K[1],P=K[2],Q=J*2*Math.PI;var M=this.hueHandleNode.style;M.left=Math.round(Math.sin(Q)*G+I)+"px";M.top=Math.round(-Math.cos(Q)*G+I)+"px";var O=this.slHandleNode.style;O.left=Math.round(C*(0.5-N)+I)+"px";O.top=Math.round(C*(0.5-P)+I)+"px";this.slNode.style.backgroundColor=H.hsl2hex(J,1,0.5);if(!L){this.onColorPicked(H.hsl2hex(J,N,P));}}mstrmojo.ui.editors.controls.ColorWheel=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.editors.controls.ColorWheel",markupString:'<div id="{@id}" class="mstrmojo-ui-ColorWheel {@cssClass}" style="{@cssText}" mstrAttach:mousedown><div class="cwHue"></div><div class="cwColorField"></div><div class="cwHandle"><div></div></div><div class="cwHandle"><div></div></div></div>',markupSlots:{slNode:function(){return this.domNode.childNodes[1];},hueHandleNode:function(){return this.domNode.childNodes[2];},slHandleNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,oncolorChange:function(){this._hsl=H.hex2hsl(this.color);B.call(this,true);}},slNode:null,hueHandleNode:null,slHandleNode:null,color:"#ffffff",onColorPicked:function E(J){},onmousedown:function D(M){var O=this,J=F.position(this.domNode),P=this._hsl,L=M.e,N=A(L,J),Q=Math.max(Math.abs(N.x),Math.abs(N.y))*2>C,K=function(S){var V=A(S,J),R=P[0],T=P[1],U=P[2];if(Q){R=Math.atan2(V.x,-V.y)/(2*Math.PI);if(R<0){R+=1;}}else{T=Math.max(0,Math.min(1,-(V.x/C)+0.5));U=Math.max(0,Math.min(1,-(V.y/C)+0.5));}O._hsl=[R,T,U];B.call(O);F.stopPropogation(window,S);return false;};F.attachMouseMoveEvents(K);K(L);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css");var C=mstrmojo.Widget;mstrmojo.ui.Checkbox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.Checkbox",markupString:'<div id="{@id}" class="mstrmojo-ui-Checkbox {@cssClass}" mstrAttach:click></div>',markupMethods:{onvisibleChange:C.visibleMarkupMethod,oncheckedChange:function B(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},onenabledChange:C.enabledMarkupMethod},checked:false,onclick:function A(){this.set("checked",!this.checked);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css");var C=mstrmojo.css,E=mstrmojo.desc(14058,"Show Details"),A=mstrmojo.desc(14059,"Hide Details"),F=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div>'+F+'</div><div class="toggle-details-link" >'+E+'</div><div class="error-details">{@en@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];}},markupMethods:{onshowDetailsChange:function(){var H=this.showDetails;this.toggleDetailsNode.innerHTML=H?A:E;C.toggleClass(this.domNode,"show-details",H);this.updateScrollbars();}},shortDesc:undefined,longDesc:undefined,showDetails:false,init:function G(H){this._super(H);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function B(H){var J=H.getTarget(),I,K=this.longDesc;if(J===this.contactNode){I="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(K?("&body="+encodeURI("Detail:\r\n"+K)):"");mstrApp.openPage(I,"_self");}else{if(J===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);}}},setupScrollNodes:function D(){this.scrollNode=this.scrollNode;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(i,k,h){var j=i.listSelector;if(j){j[k](i,i.itemsContainerNode,h);}}function L(i,h){var j=i.lastPagePos;if(!j||j.dragId!==h){j=e.offset(i.itemsContainerNode);j.dragId=h;i.lastPagePos=j;var k=i.scrollboxNode;i.lastScrollPos={left:k.scrollLeft,top:k.scrollTop,width:k.clientWidth,height:k.clientHeight};}}function O(k,n,i){var j=n&&n.node;if(j===k.dropCueNode||j===k.dropCueNode.firstChild){return k.dropCuePos;}var l=k.listMapper;var h=l&&l.whereDrop(k,k.itemsContainerNode,j,n.pos,{left:k.lastPagePos.left-k.lastScrollPos.left,top:k.lastPagePos.top-k.lastScrollPos.top,width:k.lastScrollPos.width,height:k.lastScrollPos.height});var m=k.dropCuePos;return((i!==false)&&m&&h&&(m.idx===h.idx)&&(m.left===h.left)&&(m.top===h.top))?m:h;}var g="attachEventListener";function D(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function G(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var k=this.dropCuePos,j=!!k;if(j){h.left=k.left+"px";h.top=k.top+"px";}h.display=j?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var l=this.listBuilder,o=l.newContext(this);this.ctxtBuilder=o;var i=this.markupSlots,k=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),j=this.items,h=(j&&j.length)||0,m=k?this.firstRenderBlockSize:h,n=k?this.firstRenderBlockSize:0;this._eros=k;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(j,l,this,o,m,n).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var i=mstrmojo.all[p];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(j,h,i){if(j!==false){j=true;}if(this.paused===!!j){return ;}this.paused=!!j;if(j){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var m=(this.items&&this.items.length)||0;if(!m){if(l){l();}}else{var j=this.scrollboxNode,n=this.itemsContainerNode,k=mstrmojo.boxmodel.offset(n,j),p=this.listMapper,o=p.findScrollRange(n,m,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||j.scrollTop,j.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||j.scrollLeft,j.clientWidth,k.left,k.top);if(this.fillAt(o.start,o.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,l);},100);}else{if(l){l();}}}},fillAt:function M(j,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,j,i,this.renderBlockSize);}else{return false;}},add:function R(i,h){if(!i||!i.length){return -1;}var j=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(j&&j.length)||0;}if(j&&j.add){j.add(i,h);}else{this.set("items",j?f.insert(j.concat(),h,i):i);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(j){var i=this.items;if(!i||(j==null)){return -1;}var h;if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function Y(m,i,j){var k=this.items,h=-1;if(!k||(m==null)){return -1;}if(!isNaN(m)){if(i===null||i===undefined){i=m+1;}m=k[m];}else{if(i===null||i===undefined){i=this.itemIndex(m)+1;}}if(m){var l;l=a.copy(j,a.clone(m));h=this.add([l],i);}return h;},preremove:function N(i){if(this.hasRendered){var k=this.listMapper;if(k){k.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var j=this.listBuilder;if(j){j.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function S(l,s){function p(t,i){t=parseInt(t,10);return i===1||(s>=t&&s<t+i);}var q=(this.items&&this.items.length)||0;if(s===-1||s==null||isNaN(s)){s=q;}else{s=Math.min(s,q);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(p(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(p(h,1)){return false;}}else{h=l;n=[l];m=1;if(p(h,1)){return false;}k=[this.items[h]];}}var o=0;for(var j=0;j<m;j++){if(n[j]<=s){s--;o++;}}if(o==n.length){s++;}if(k[0]!=null){this.remove(h);this.add(k,s);}return true;},itemIndex:function F(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(m,h){var l=this.items;h=this.initItems(h);this.items=h;if(l!==h){var k=this,j=function(){if(k.autoHide){k.set("visible",!!(h&&h.length));}k=null;},i=this.hasRendered;if(i){this.refresh(j);}else{j();}}return l!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(i){var h,j=this.listMapper;if(j&&j.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){j.toItem(this,h);}}},draggable:false,getDragData:function(l){L(this,l.id);var j=O(this,l.src),i=j&&j.idxActual;if((i>-1)&&this.selectedIndices[i]){var k=this.sortSelectedIndices(),h=f.get(this.items,k)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:k[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:k},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(k){var i=k&&k.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(i.hWin,i.e)){var j=k.src&&k.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}}}}},ondrop:function(q){var v=q&&q.src,p=v&&v.data;if(p){var k=O(this,q.tgt,false),t=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;t=Math.min(t,n&&n.length)||0;var u=true;if(v.widget===this){u=this.move(j,t);f.forEach(j,function(i){if(i<=t){t--;}});}else{this.add(l?p:[p],t);}if(u){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[t+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var C=mstrmojo.dom,B=mstrmojo.hash,E=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){E.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function D(J){var K=this.domNode;if(this.hasRendered&&K){K.className=K.className.replace(J.valueWas,"")+" "+J.value;}},onclick:mstrmojo.emptyFn,ontouchend:function I(J){this.onclick(J);}});mstrmojo.Button.newIconButton=function H(L,O,M,J,N){var K={scriptClass:"mstrmojo.Button",title:L,cssClass:O,text:"",onclick:M};if(J){K.bindings=J;}B.copy(N,K);return K;};function F(M,N,J,P){var L=[];if(J){L.push(J);}var O=P&&P.cssClass;if(O){L.push(O);delete P.cssClass;}var K={scriptClass:"mstrmojo.Button",cssClass:L.join(" "),text:M};if(N){K.onclick=N;}return B.copy(P,K);}mstrmojo.Button.newInteractiveButton=function G(M,N,P,O){var L={glowClass:"glow"};if(P&&(C.isFF||C.isWK)){B.copy({onmousedown:function J(){E.applyShadow(this.domNode,0,0,10,P);},onmouseup:function K(){E.removeShadow(this.domNode);}},L);}return F(M,N,"mstrmojo-InteractiveButton",B.copy(O,L));};mstrmojo.Button.newWebButton=function A(K,J,M,L){return F(K,J,"mstrmojo-WebButton"+(M?" hot":""),L);};mstrmojo.Button.newActionButton=function(K,L,M){var J=mstrmojo.Button.newWebButton(K,L,false,M);J.cssClass=J.cssClass+" action-button";return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||"../javascript/mojo/css/images/1ptrans.gif";}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo._ListSelections");var E=mstrmojo.dom;mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" tstid="{@tstid}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function G(){return this.domNode.firstChild;},scrollboxNode:function A(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},autoHide:false,itemsContainerNode:null,_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,init:function J(K){this._super(K);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},buildRendering:function D(){this.itemsHtml="";var K=(this.renderOnScroll?this.items&&((this.renderIndex+1)*this.renderBlockSize):this.items&&this.items.length);if(K){this.itemsHtml=this._buildItemsMarkup(0,K-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_buildItemsMarkup:function B(K,N,U,L,V,M){var W=[],Q=0;W[Q++]=U||"";var P=this.itemRenderer,T=P&&P.render;if(T&&typeof T==="function"){var R=this.items,S=Math.min(N+1,((R&&R.length)||0)),O;for(O=K;O<S;O++){W[Q++]=V||"";W[Q++]=T(R[O],O,this);W[Q++]=M||"";}}W[Q+1]=L||"";return W;},onselectionChange:function H(V){if(!V){return ;}var S=this.itemRenderer;if(!S){return ;}var O=S.unselect,R=this.items||[],W=V.removed,N,M,L,P,X;if(O&&W){for(P=0,X=W.length;P<X;P++){N=W[P];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){O(L,R[N],M,this);}}}var K=S.select,U=V.added,Q,T;if(K&&U){for(Q=0,T=U.length;Q<T;Q++){N=U[Q];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){K(L,R[N],M,this);}}}if(this.onchange){this.onchange({added:V.added,removed:V.removed});}},_set_items:function C(N,K){this.renderIndex=0;if(this.autoHide){this.set("visible",!!(K&&K.length));}var M=this.items;this.items=K;if(M!==K){var L=this.hasRendered;if(L){this.unrender(false);}this.clearSelect();if(L){this.render();}return true;}return false;},onItemContextMenu:mstrmojo.emptyFn,oncontextmenu:function F(K){E.preventDefault(window,K.e);var M=K.getTarget(),L=this.getItemFromTarget&&this.getItemFromTarget(M);if(L){if(this.onItemContextMenu(L,K)){K.cancel();}}},_getItemNode:function I(K){var L=this.itemsContainerNode;return(L&&L.childNodes[K])||null;},renderOnScroll:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" title="{@title} "mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;},ontextChange:function(){var C=this.text;C=B.isEmpty(C)?"":C.toString();this.domNode.innerHTML=this.allowHTML?C:B.encodeHtmlString(C,true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(E,C){if(this.autoHide){this.set("visible",(C!==null)&&(C!=="")&&(C!==undefined));}var D=this.text;this.text=C;return(D!==C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.css","mstrmojo.string","mstrmojo._IsExprNode","mstrmojo._HasPopup","mstrmojo.Widget");var O=mstrmojo.dom,B=mstrmojo.css,E=mstrmojo.string.htmlAngles,M=mstrmojo.expr,N=M.ET,K=M.FN,A=M.BRANCH_FNS[K.NOT],D={};D[K.BETWEEN]=1;D[K.NOT_BETWEEN]=1;var C={"*":function(Q,P){return Q?('<span class="mstrmojo-unknown">'+(E(Q.n||Q.xml)||"...")+"</span>"):null;}};function H(Q,P,S,R){return S&&((R?'<span class="mstrmojo-ListIcon t'+R+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+E(S)+"</span>");}C[N.R]=function(Q,P){return H(Q,P,Q.r&&Q.r.n,Q.r&&Q.r.t);};C[N.F]=function(Q,P){return H(Q,P,Q.f&&Q.f.n,Q.f&&Q.f.t);};C[N.XML]=function(Q,P){return H(Q,P,Q.n||Q.p&&Q.p.n||Q.xml,Q.p&&Q.p.t);};C[N.AE]=function(V,S){var R=[];if(V&&V.a&&V.a.n){R.push('<span class="mstrmojo-text mstrmojo-attr">'+E(V.a.n)+"</span>");if(V.fn!==M.FN.IN_LIST){R.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(V.et,V.fn,V.fnt))+"</span>");}var U=V.es,P=U&&U.length||0;if(P){R.push('<span class="mstrmojo-elems">');var Q=R.length;for(var T=0;T<P;T++){R[Q++]='<span class="mstrmojo-text mstrmojo-elem">';R[Q++]=E(U[T].n);if(T<P-1){R[Q++]=", ";}R[Q++]="</span>";}R[Q++]="</span>";}else{R.push('<span class="mstrmojo-text mstrmojo-emptyelems">(Empty)</span>');}}return R.join("");};C[N.AQ]=function(W,X){var T=[];if(W&&W.a&&W.a.n){T.push('<span class="mstrmojo-text mstrmojo-attr">'+E(W.a.n)+"</span>");if(W.fm&&W.fm.n){T.push('<span class="mstrmojo-text mstrmojo-form">'+E(W.fm.n)+"</span>");if(W.fn!=null){T.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(W.et,W.fn,W.fnt,W.fm.dtp))+"</span>");var P=M.fnCstCount(W.fn,W.fnt);if(W.et===N.AC){if(P>=1){if(W.a2&&W.a2.n){T.push('<span class="mstrmojo-text mstrmojo-attr2">'+E(W.a2.n)+"</span>");if(W.fm2&&W.fm2.n){T.push('<span class="mstrmojo-text mstrmojo-form2">'+E(W.fm2.n)+"</span>");}}if(P>1){T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");if(W.a3&&W.a3.n){T.push('<span class="mstrmojo-text mstrmojo-attr3">'+E(W.a3.n)+"</span>");if(W.fm3&&W.fm3.n){T.push('<span class="mstrmojo-text mstrmojo-form3">'+E(W.fm3.n)+"</span>");}}}}}else{if(W.et===N.AL){var U=W.cs,Y=[];for(var R=0,V=U.length;R<V;R++){Y.push(U[R].v);}T.push('<span class="mstrmojo-text mstrmojo-c1">'+Y.join(mstrConfig.listSep)+"</span>");}else{if(P>=1){var U=W.cs,S=U&&U[0];T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(S&&S.p&&S.p.n||S&&S.v)+"</span>");if(P>1){var Q=U&&U[1];T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(Q&&Q.p&&Q.p.n||Q&&Q.v)+"</span>");}}}}}}}return T.join("");};C[N.AC]=C[N.AQ];C[N.AL]=C[N.AQ];C[N.MQ]=function(f,g){var e=[],Z=f&&f.m,j=Z&&Z.n;if(j){var Q=f.fnt,U=M.FNT.PER,c=M.FNT.RANK;j=Q===U?mstrmojo.desc(2787,"Percentage of ##").replace("##",j):Q===c?mstrmojo.desc(2788,"Rank of ##").replace("##",j):j;e.push('<span class="mstrmojo-text mstrmojo-metric">'+E(j)+"</span>");if(f.fn!=null){e.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(f.et,f.fn,Q,M.DTP.REAL))+"</span>");var X=M.fnCstCount(f.fn,Q);if(f.et==M.ET.MC){if(X>=1){var i=(f.m2&&f.m2.n)||"?";e.push('<span class="mstrmojo-text mstrmojo-m2">'+E(i)+"</span>");if(X>1){e.push('<span class="mstrmojo-text mstrmojo-btwn">'+g.betweenText+"</span>");var S=(f.m3&&f.m3.n)||"?";e.push('<span class="mstrmojo-text mstrmojo-m3">'+E(S)+"</span>");}}}else{if(X>=1){var R=f.cs,a=R&&R[0];var P=function(h){var d=h.v;if(f.fnt==U){if(d.replace){h.v=d.replace(/%$/,"");}d=h.v+"%";}return d;};e.push('<span class="mstrmojo-text mstrmojo-c1">'+E(a&&a.p&&a.p.n||a&&a.v&&P(a))+"</span>");if(X>1){var Y=R&&R[1];e.push('<span class="mstrmojo-text mstrmojo-btwn">'+g.betweenText+"</span>");e.push('<span class="mstrmojo-text mstrmojo-c2">'+E(Y&&Y.p&&Y.p.n||Y&&Y.v&&P(Y))+"</span>");}}}var b=f.dmy&&f.dmy.uts,W=b&&b.length;if(W){e.push('<span class="mstrmojo-text mstrmojo-at">'+g.atText+"</span>");e.push('<span class="mstrmojo-dmy">');for(var V=0;V<W;V++){var T=b[V];e.push('<span class="mstrmojo-text mstrmojo-dmyunit">');e.push(E(T.utgt?T.utgt.n:T.n));if(V<W-1){e.push(",");}e.push("</span>");}e.push("</span>");}}}return e.join("");};C[N.MC]=C[N.MQ];function G(P){var Q=P.data;if(Q.not){return'<span class="mstrmojo-text mstrmojo-not">'+A+"</span>";}return"";}function F(P){var R=P.data,Q=C[R&&R.et]||C["*"];return G(P)+((Q&&Q(R,P))||('<span class="mstrmojo-text">'+P.emptyText+"</span>"));}mstrmojo.ConditionNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){B.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},oneditableChange:function(){B.toggleClass(this.textNode,["editable"],this.editable);},onselectedChange:function(){B.toggleClass(this.condNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=F(this);this.textPostfixNode.innerHTML=this.getConditionTextPostfix();}},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),init:function L(P){this._super(P);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());},getConditionTextPostfix:function(){return"";},del:function J(){var P=this.parent;if(P&&P.remove&&this.data){P.remove(this.data);}},isEmpty:function(){var Q=this.data,P=Q&&Q.et,R=P&&mstrmojo.expr.ET2TGT[P];return !(R&&Q[R]);},isSelectableArea:function(P){return O.contains(this.condNode,P,true);},preclick:function I(P){var R=null,Q=O.eventTarget(P.hWin,P.e);if(O.contains(this.prefixNode,Q,true)){R="andor";}else{if(O.contains(this.textNode,Q,true)){R="condition";}else{if(O.contains(this.textPostfixNode,Q,true)){O.stopPropogation(P.hWin,P.e);return false;}}}P.part=R;}});mstrmojo.ConditionNode.getFunctionNode=F;})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.css","mstrmojo.string");function A(C,B){return mstrmojo.hash.copy(B,{label:"",tabIndex:"",cssDisplay:"inline",name:null,markupString:'<span id="{@id}" class="'+C+' {@cssClass}" style="{@cssText}" title="{@tooltip}"><input id="{@id}_input"  type="{@type}" name="{@name}" value="{@value}" tabIndex="{@tabIndex}" mstrAttach:click tstid="{@tstid}"/><label for="{@id}_input">{@label}</label></span>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},labelNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onenabledChange:function(){this.inputNode.disabled=!this.enabled;mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,"disabled");},onlabelChange:function(){this.labelNode.innerHTML=mstrmojo.string.encodeHtmlString(this.label);},oncheckedChange:function(){this.inputNode.checked=this.checked;}},checked:false,preclick:function(){this.set("checked",this.inputNode.checked);},isChecked:function(){return this.inputNode.checked;}});}mstrmojo.CheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox",{scriptClass:"mstrmojo.CheckBox",type:"checkbox"}));mstrmojo.ImageCheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox mstrmojo-ImageCheckBox",{scriptClass:"mstrmojo.CheckBox",type:"image",cssDisplay:"block",preclick:function(){this.set("checked",!this.checked);},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.oncheckedChange=function(){mstrmojo.css.toggleClass(this.inputNode,["checked"],this.checked);};},postBuildRendering:function(){this.inputNode.src=this.src||"../images/1ptrans.gif";if(this._super){return this._super();}return true;}}));mstrmojo.RadioButton=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-RadioButton",{scriptClass:"mstrmojo.RadioButton",type:"radio",postBuildRendering:function(){if(mstrmojo.dom.isIE){this.inputNode.checked=this.checked;}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.func","mstrmojo.DocDataService");var R=mstrmojo.hash.copy,c=mstrmojo.array.forEach,k=mstrmojo.func,I=k.wrapMethods;var F=2,U=1,f=1,i=2,a=3;var A={FIRST:1,MIDDLE:2,LAST:3};var j={BUSY:1,INTERIM:2,DONE:3,SILENT:4,CANCELED:5};var S=R(mstrmojo.DocDataService.SUPPRESS_DATA,{preserveUndo:true,config:{silent:true}});function G(){c(this._delayRemovedCmds,function(s){s.discard();});this._delayRemovedCmds=null;}function V(){this.cmds=this.cmds.concat(this._delayRemovedCmds);this._delayRemovedCmds=null;}function J(t){var s=this.cmds,u=this.pos;this._delayRemovedCmds=s.splice(u+1);if(u>=this.size-1){s.shift().discard();}s.push(t);this.pos=s.length-1;}function p(s,t){s.reset();throw new Error(t||"Invalid state.");}mstrmojo.vi.controllers.UICmdMgr=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmdMgr",cmds:null,pos:-1,size:20,_delayRemovedCmds:null,controller:null,dataService:null,model:null,state:U,STATE:{EXECUTING:F,IDLE:U},CMD_PHASE:A,init:function l(s){R(s,this);this.cmds=[];},execute:function d(u){if(this.state===F){p(this);}try{u=R(u,{mgr:this,undoUIState:this.model.getUIState(),action:i});var s=this.curCmd=new mstrmojo.vi.controllers.UICmd(u);J.call(this,s);this.state=F;s.execute();}catch(t){this.reset();throw t;}},getInterimCmd:function B(){if(this.state===F){var s=this.cmds[this.pos];if(s.state===j.INTERIM){return s;}}return null;},undo:function T(u){if(this.canUndo()){this.state=F;try{var s=this.curCmd=this.cmds[this.pos--];s.action=f;s.redoUIState=this.model.getUIState();s.undoRedo(u);}catch(t){this.reset();throw t;}}},redo:function H(){if(this.canRedo()){this.state=F;try{var s=this.curCmd=this.cmds[++this.pos];s.action=a;s.undoUIState=this.model.getUIState();s.undoRedo();}catch(t){this.reset();throw t;}}},onSuccess:function b(s){if(this.state===U){p(this);}if(s!==this.curCmd){p(this,"Wrong command");}this.state=U;G.call(this);this.controller.onCmdMgrChanged();},onFailure:function o(){G.call(this);this.reset();},onCancel:function Z(t,u){this.state=U;var s=!!t.submitCount;if(s){this.undo(u);}else{this.pos--;}this.cmds.pop();t.discard();if(s){G.call(this);}else{V.call(this);}this.controller.onCmdMgrChanged();},reset:function e(){c(this.cmds,function(s){s.discard();});this.cmds.length=0;this.pos=-1;this.state=U;this.controller.onCmdMgrChanged();},resetState:function Y(){this.state=U;},canUndo:function X(){return this.state===U&&this.pos>=0;},canRedo:function L(){return this.state===U&&this.pos<this.cmds.length-1;},onSubmitUpdates:function P(){if(this.state===U){this.cmds.splice(this.pos+1);this.controller.onCmdMgrChanged();}},isUndoRedo:function C(){var s=this.curCmd||{};if(this.state===F&&(s.action===f||s.action===a)){return true;}return false;}});function W(s,u,t){if(u.stid==="undefined"){t.submission=function(y,v,w){var z=w.params,x=JSON.parse(z.params);x.actions[0].stid=s.action===f?s.undoStateId:s.redoStateId;z.params=JSON.stringify(x);};}return t;}function E(t,x){var u=t.mgr;x.disablePU=true;var w=W(t,x,{success:function v(){t.state=j.DONE;},failure:function s(){u.onFailure();}});t.state=j.SILENT;u.dataService.submitUpdates(x,w,S);u.onSuccess(t);}function g(AC,x){var AB=AC.urInfo,AA=AB.puKeys,AH=AB.puObjs,y=AB.puFilters,AD=AC.mgr,z=AD.model,AE=AD.dataService;if(AA||AH){if(AA){x.partialRetrieval={nodes:AA,filters:y};}if(AH){z.addUpdateObjects(x,AH);}}else{x.disablePU=true;}var v=W(AC,x,{success:function AG(){AC.state=j.DONE;AD.onSuccess(AC);z.restoreUIState(AC.action===f?AC.undoUIState:AC.redoUIState);},failure:function u(){AD.onFailure();},complete:function t(){AD.resetState();}}),s=AB.callback||z.getRebuildCallback(),AF=I(s,v),w=R(AB.extras);if(x.act==="undo"&&w!==undefined){w.hideCancel=true;if(x.killJob){w.message=mstrmojo.desc(14586,"Canceling...");}}AC.state=j.BUSY;AE.submitUpdates(x,AF,w);}function N(v){var s=v.urInfo,t=v.mgr.model;if(!s.extras){var u=(s.treesToRender!==undefined)?s.treesToRender:v._treesFromRes;if(!s.disablePU&&!v._hasFullUpdate&&(!s.puKeys||!s.puKeys.length)){u=0;s.callback=I(t.getDatasetsUpdateCallback(),s.callback);}s.extras={style:{params:{treesToRender:u}}};}}mstrmojo.vi.controllers.UICmd=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmd",mgr:null,redoStateId:null,undoStateId:null,execute:mstrmojo.getMissingFn(),discard:mstrmojo.emptyFn,action:null,state:j.INTERIM,urInfo:null,getStateValue:function Q(t,s){return this.action===f?s:t;},init:function l(s){R(s,this);this._treesFromRes=0;this.urInfo=this.urInfo||{};this.submitCount=0;},undoRedo:function h(y){var u=this,w,t=this.urInfo,s=t.silent,z,v=this.mgr,x=v.dataService;if(u.action===a){w={act:"redo",stid:u.redoStateId};z=t.redo;}else{if(u.action===f){w={act:"undo",stid:u.undoStateId,killJob:y};z=t.undo;}else{p(this.mgr);}}if(z){x.blockRequests=true;try{s=!!z.call(u)||s;}finally{x.blockRequests=false;}}if(s){E(u,w);}else{g(u,w);}},submitUpdate:function O(t,s){this.submit(t.actions,t.callback,t.extras,s);},submit:function M(w,AG,v,AE){var AB=this,AC=AB.mgr,y=AC.model,AD=AC.dataService,AA=mstrmojo.array.ensureArray(w);AG=AG?R(AG):y.getRebuildCallback();AB.state=j.BUSY;function x(AH,AI){return !(AH&&AH[AI]&&AH[AI].length);}if(AB._hasFullUpdate||AA.some(function(AH){return AH.disablePU;})||AA.every(function(AI){var AJ=AI.partialRetrieval,AH=AI.partialUpdate;return x(AJ,"nodes")&&x(AH,"nodes")&&x(AH,"selectors")&&x(AH,"objects");})){AB._hasFullUpdate=true;}k.override({submission:function u(){if(AB.submitCount===0){AB.undoStateId=AD.stid;}AB.submitCount++;},success:function AF(AL,AM){if(AB.action!==i){p(AC);}AB.redoStateId=AL.stid;var AK=!AE||AE===A.LAST;if(AK){AB.state=j.DONE;}else{AB.state=j.INTERIM;}var AJ=AB.urInfo;if(!AJ.disablePU){var AH=AJ.puKeys||[],AN=AL.pukeys&&AL.pukeys.split("\u001E");if(AN&&AN.length){AH=AH.concat(AN);var AI=AJ.extraPuKeys;if(AI){AH=AH.concat(AI);delete AJ.extraPuKeys;}}if(AH.length){AJ.puKeys=AH;}}AB._treesFromRes|=(AL.defn?1:0)|(AL.data?2:0);if(this._super){this._super(AL,AM);}if(AK){AB.completeSubmit();}},failure:function t(AH,AK){var AJ=(v&&v.skipUICmdMgrOnFailure)||[],AI=parseInt(AH.code||(AH.getResponseHeader&&AH.getResponseHeader("X-MSTR-TaskErrorCode"),10));if(AJ.indexOf(AI)===-1&&AJ.indexOf(mstrmojo.mstr.EnumWebAPIErrorCodes.E_UNUSED)===-1){AC.onFailure();}if(this._super){this._super(AH,AK);}},canceled:function z(AH){if(this._super){this._super(AH);}window.setTimeout(function(){AB.cancel(true);},0);},complete:function s(){if(!AE||AE===A.LAST){AC.resetState();}if(this._super){this._super();}}},AG);AD.submitUpdates(w,AG,v);},submitInterim:function n(t,u,s){this.submit(t,u,s,A.MIDDLE);},resetCmdMgrOnComplete:function m(){this._resetMgr=true;},completeSubmit:function K(){var t=this,u=t.mgr,s=u.model;if(!t.completed){t.completed=true;t.state=j.DONE;u.onSuccess(t);N(t);t.redoUIState=s.getUIState();if(t._resetMgr){u.reset();}}},cancel:function D(s){this.state=j.CANCELED;N(this);this.mgr.onCancel(this,s);},submitSilent:function q(u){var w=this,x=w.mgr,v=x.model,y=x.dataService;w.state=j.SILENT;x.onSuccess(w);w.redoUIState=v.getUIState();var z={submission:function t(){w.undoStateId=y.stid;w.submitCount++;},success:function AA(AB){w.state=j.DONE;w.redoStateId=AB.stid;},failure:function s(){x.onFailure();}};y.submitUpdates(u,z,S);}});mstrmojo.vi.controllers.UICmd.CMD_PHASE=A;mstrmojo.vi.controllers.UICmd.STATES={BUSY:F,IDLE:U};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService");mstrmojo.requiresDescs(5421,5422);var P=mstrmojo.hash,L=mstrmojo.array,F=mstrmojo.desc,G=mstrmojo.DocDataService,B=mstrmojo.string;function K(h,i,d,Y){var e=h.model,j=h.selCells,f=[],c=e.getCellTitleInfo(i).title,g,b,Z=function(k){var l=h.getCellForNode(k);f.push(h.getCellUnitIndex(l));g=l.dpt;},X,a=i.lv>=0;if(typeof Y==="string"&&Y.indexOf(";")>0){b=parseInt(Y.substring(Y.indexOf(";")+1),10);Y=parseInt(Y.substring(0,Y.indexOf(";")),10);}if(b===1&&!d){j.reverse().forEach(Z);}else{if(b===1){X=1;j.forEach(Z);}else{j.forEach(Z);}}return{oId:c.id,oTp:c.otp,depth:g,ordinals:f.join(","),sliceId:h.sid,viewKey:h.k,funcVal:Y,switchOrder:X,art:e.getObjectInfoFromDataset(c.id).art,isRA:a};}function C(Z,Y,b){var e=Z.getDEInfo(Y),d=e&&e.deObject&&e.deObject.des,c=1,a=b===-1?F(5187,"Group"):F(5188,"Calculation"),X=function(f){return f.n===a+" "+c;};while(true&&d){if(d.some(X)){c++;}else{break;}}Z.controller.onAddQuickDE(Z,P.copy(K(Z,Y,false,b),{act:"addQuickDE",deName:a+" "+c}));}function W(X,Y){for(did in X){if(L.find(X[did].att,"did",Y)>-1){return did;}}return undefined;}function A(i,Y,f,b,X){var e=f.es,Z=f.id,d;X.forEach(function(j){d=j[0];if(d.eid.indexOf(Z)<0){e.push({n:B.decodeHtmlString(d.v,true),t:mstrmojo.vi.enums.EnumDerivedElementType.LIST,v:d.eid.split(";")[0].slice(1)});}});var a=i.controller,h=i.model&&i.model.docModel,g=a._getXtabCallback(i),c={act:"applyDEChanges",deId:Y.did,attId:Y.attId,attName:Y.attName,dsId:Y.dsId,k:i&&i.k,actions:[U(f,b)]};h.addUpdateObjects(c,{id:c.deId||c.attId,type:47,flag:G.PARTIAL_UPDATE_FLAGS.DATA_CHANGE});g=mstrmojo.func.wrapMethods(g,h.getDatasetsUpdateCallback(),{success:function(){h.callOnNDECreated([f]);}});a.submitUndoRedoUpdates(c,{},g);}function U(Y,X){return{act:"update",position:X+1,item:Y};}function E(Z,Y,c,b,a){var X=Z.model.getCellTitleInfo(Y).title;Z.controller.onSetDEHierachyOptions(Z,{act:"setDEHierarchyOptions",oId:X.id,eId:c.id,splice:b,expand:a});}function O(b,Y){var X=[],a=Y.t,Z=Y.did;b.getDropZones().zones.forEach(function(c){((c&&c.items)||[]).forEach(function(e){var f=e.t,d=e.did;if(f!==21&&d!=="-1"&&d!=="00000000000000000000000000000000"&&((f===4&&a===4)||(f!==4&&a!==4))&&d!==Z&&L.find(X,"did",d)===-1){X.push(e);}});});b.docModel.getDatasetUnits(a===4?["mx"]:["att"]).forEach(function(c){if(L.find(X,"did",c.did)===-1&&c.did!==Z&&!c.hide){X.push(c);}});return mstrmojo.vi.ui.DatasetUnitMenuUtils.getSortedDatasetUnits(X);}mstrmojo.vi.ui.rw._XtabDE=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabDE",{scriptClass:"mstrmojo.vi.ui.rw._XtabDE",derivedElementGroup:function M(X){C(this,X,-1);},addElementsToGroup:function N(Z,a,Y,X){A(this,Z,a,Y,X);},derivedElementCalculation:function D(Y,X){C(this,Y,X);},separateOthers:function Q(X,Y){E(this,X,Y,1,1);},renameDEList:function I(X){this.controller.onEditQuickDEList(this,P.copy(K(this,X,true,-1),{act:"editQuickDEList",deName:X.v}));},editQuickDECalculationNumberFormat:function J(Y,Z){var X=K(this,Y);X.deId=Z.de.id;X.act="editQuickDECalculationNumberFormat";this.controller.editQuickDECalculationNumberFormat(this,P.copy(X,this.model.docModel.createNumberFormatParams(Z)));},editDECalculation:function H(Y,X){if(X!==undefined&&X!==null){this.controller.editQuickDECalculation(this,P.copy(K(this,Y,true,X),{act:"editQuickDECalculation"}));}else{this.controller.onEditQuickDECalculation(this,P.copy(K(this,Y,true),{act:"editQuickDECalculation",deName:Y.v}));}},removeQuickDE:function S(d,h){var a=h&&h.deObject,b=(a&&a.des)||[],i=this,k=2,g=L.filter(b,function(l){return !l.ido;},{max:k+1}),j={success:function(n){var o=i.controller.view.getLayouts(),l=o.length,m;for(m=0;m<l;m++){i.controller.model.data.layouts[m].loaded=false;o[m].defn.loaded=false;}}};if(a&&(b.length<=k||g.length<=k)){var c=[],f=this.zonesModel.getZoneForObject(a.did),Z=O(this.zonesModel,a),Y=L.find(Z,"did",a.attId),X=Y>=0?Z[Y]:null,e={};if(X&&f){c.push(P.copy({isUngroup:1,deId:a.did},this.model.getAddTemplateUnitAction(X,a.dsId,f.id,L.find(f.items,"dsId",a.dsId))));c=[this.zonesModel.getUpdateTemplateAction(c)];e=this.controller._getXtabCallback(this);}c.push({act:"removeNDEFromDS",dsid:a.dsId,oid:a.did,partialRetrieval:{nodes:this.model.docModel.getSourceFilterKeys(this.zonesModel.getHost().k)}});e=mstrmojo.func.wrapMethods(e,this.controller.model.getDatasetsUpdateCallback(),this.controller.getReloadLayoutViewCallback(),j);this.controller.submitUndoRedoUpdates(c,null,e,G.REQUEST_DEFN_DATA);}else{this.controller.removeQuickDE(this,P.copy(K(this,d),{act:"removeQuickDE"}));}},derivedElementsEdit:function T(f,a){if(!a){a=this.getDEInfo(f);}var b=this.model,Y=b.getCellTitleInfo(f).title,Z=a&&a.deObject,e=a&&a.de,X,d,c;if(!Z){X=this.gridData.datasetId||W(b.docModel.datasets,Y.id);d=Y.id;c=Y.n;}this.controller.openDEEditor(this,{dsId:X,attId:d,attName:c,deObj:Z,elemId:e&&e.id,dispName:f.n,isRA:b.isRecursiveAttribute(d)});},getDEInfo:function V(Y){var Z=this.model,X=Z.getCellTitleInfo(Y).title,a=Y.dei,b,c;if(X.ost!==12033){return null;}b=Z.docModel.getDEObject(X.id);if(b&&a!==undefined){c=b.des[a];}return{deObject:b,de:c,ttl:X};},getOthersDEInfo:function R(Y){var X;L.forEach(Y.des,function(Z){if(Z.t===4){X=Z;return false;}});return X;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.boxmodel","mstrmojo.Model","mstrmojo._CanProxyCallback","mstrmojo.EnumRWUnitType","mstrmojo.models.template.DataInterface","mstrmojo.StringBuffer","mstrmojo.EnumReadystate");var Ag=mstrmojo.EnumRWUnitType,K=mstrmojo.EnumReadystate,R=mstrmojo.hash,At=R.forEach,Ar=mstrmojo.func.wrapMethods,Ap=mstrmojo.Obj.free,M=mstrmojo.array,AG=mstrmojo.boxmodel,C=mstrmojo.mixin,b="\u001E";var F={},T={},N=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807];mstrmojo.MultiRWUnitFormatEventsType=null;var AH={isObservable:function(A1){var A0=A1&&A1.t;if((!A0&&A0!==Ag.LAYOUT)||!this.hasOwnProperty(A0)||A1.scriptClass){return false;}return(A0!==Ag.SUBSECTION||!A1.dt);},makeObservable:function(A0){var A1=A0.audibles=this[A0.t]||{};if(A1.hasOwnProperty("readyState")){A0.readyState=K.IDLE;}return new mstrmojo.Model(A0);}};AH[Ag.PANELSTACK]={"*":false,selKey:true,readyState:true};AH[Ag.GRID]={"*":false,readyState:true,ds:true};AH[Ag.GRAPH]={"*":false,readyState:true,ds:true};AH[Ag.GRIDGRAPH]={"*":false,qsm:true,ds:true};AH[Ag.SUBSECTION]={"*":false,resize:true,adjustSize:true};AH[Ag.VISUALIZATION]={"*":false,ds:true};AH[Ag.SELECTOR]={"*":false,cek:true,ds:true,readyState:true};AH[Ag.MOJOVISUALIZATION]={"*":false,ds:true};AH[Ag.LAYOUT]={"*":false,readyState:true};var Ab={};function Ai(A0){return Ab[A0]||Ab["*"];}Ab["*"]={update:function k(A1,A2,A0,A3){R.copy(A0,A2);}};Ab[Ag.PANEL]=C({update:function k(A1,A2,A0,A3){delete A2.layoutXML;this._super(A1,A2,A0);}},Ab["*"]);function f(A5,A6){var A1=A5&&A5.layoutMap&&A5.layoutMap[A6];if(A1){if(!A1.t){A1.t=Ag.LAYOUT;}if(AH.isObservable(A1)){A1=A5.layoutMap[A6]=this.addDisposable(AH.makeObservable(A1));}return A1;}var A0=A5&&A5.layouts,A4=(A0&&A0.length)||0,A3;for(A3=0;A3<A4;A3++){if(A0[A3].k===A6){var A2=A0[A3];if(!A2.t){A2.t=Ag.LAYOUT;}if(AH.isObservable(A2)){A0[A3]=this.addDisposable(AH.makeObservable(A2));}return A0[A3];}}return null;}function x(A3,A5,A2,A1){var A0=f.call(this,A3,A5);if(A2===A5){A0._lkz=A5;return A0;}if(A0){var A4=A0.units[A2];if(A4){if(parseInt(A4.t,10)===Ag.GRIDGRAPH){if(!A0.units[A2+"_0"]){A0.units[A2+"_0"]={ck:A4.ck,fmts:A4.fmts.gd,txi:A4.txi,t:Ag.GRID};A0.units[A2+"_1"]={ck:A4.ck,fmts:A4.fmts.gp,t:Ag.GRAPH};}}if(!A1&&AH.isObservable(A4)){A4=A0.units[A2]=AH.makeObservable(A4);this.disposables.push(A4);}A4._lkz=A5;}}return A0&&A0.units[A2];}function AN(A4,A3,A2,A0){var A1=this.getChildren(A4,A3,0);return(mstrApp.isMobile?(M.filter(A1,function(A7){var A5=A2&&A2.indexOf(A7.defn.t),A6=A7.defn.dk;return A0?(A5>-1&&A6===-1):(A5<0||A6!==-1);})):(A0?[]:A1));}var I=function(A0,A1){var A2=new mstrmojo.StringBuffer();if(A1){A2.append("*l"+A1);}A2.append("*k"+A0.k);if(A0.hasOwnProperty("wid")){A2.append("*x"+A0.wid);}A2.append("*t"+this.buildTime);return A2.toString();};function AD(A2){var A1,A0,A5=this.delta,A3=this.pendingUpdate=this.pendingUpdate||{},A4=[];if(!R.isEmpty(A5)){A4.push("<updates>");for(A1 in A5){if(A5.hasOwnProperty(A1)){A0=A5[A1];A4.push(A0.getUpdates());}}A3[A2]=A5;this.delta={};A4.push("</updates>");}return A4.join("");}function Aw(A5,A1){var A4;if(A5){var A0=M.isArray(A5)?A5:A5.split(A1||b),A3=A0.length,A2;for(A2=0;A2<A3;A2++){A4=A4||{};A4[A0[A2]]=x.call(this,this.defn,this.currlaykey,A0[A2]);}}return A4;}function n(A0,A1){return mstrmojo.all[I.call(this,{k:A0,wid:A1},this.currlaykey)];}function Ac(A1,A0){var A2=this.getLayoutUnitDefn(A1,A0);return(A2&&A2.t===Ag.PANELSTACK&&A2.ifw);}function Ae(A1,A0){return !A0||(A1.wid===A0);}function e(A4,BC){var A7=this,BD=A7.getSliceCallback(BC),A2=BD.shared,BE=BC.tks,A1=BC.eid,BA=A7.getDataService();if(!BE){return ;}var A9=x.call(A7,A7.defn,A7.currlaykey,A1);if(!A9){return ;}var A6=A1,A8=A2.tgtDefs[BE],A0=function(){A8.set("selKey",A1);},A3;A8.newSelKey=A1;if(A9.l){var A5=A9.dirtyKeys;if(!!A5){A6=R.keyarray(A5).join(",");A2.orignalTargetDefs=A2.tgtDefs=Aw.call(A7,A6,",");A3=function(){A0();At(A2.dataCacheUpdate.upd,function(BF,BG){var BH=mstrmojo.all[BG];if(BH&&BH.setDirty){BH.setDirty(false);}});};}else{if(BC.skipServerCall){A0();return ;}BA.requestPanelChangeDeferred(A4,A1,null,false,false,A7.newCallback({method:"slice",success:A0}));return ;}}else{A3=function(){A0();A9.l=true;};}var BB=BD.success;BD.success=function(BG){if(!A7.checkStatus(BG)){return ;}A7.updateDefnCache(BG.defn,[A1]);BB(BG);A3();var BF=n.call(A7,BC.tks,0);if(BF){BF.clearDirtyChild(A1);}};BA.requestPanelChangeDeferred(A4,A1,A6,true,!BC.hasLoader,BD);}function W(A1,A0){if(A1.defn&&A1.defn.t>=Ag.GRID){mstrmojo.models.template.DataInterface.inflateGridData(A1.data);}A0[A1.id]=A1;return A1;}function AK(BJ,A9,A0,A6){var BC=this.currlaykey,A3;if(BJ){A3=BJ.defn;BC=(A3&&A3._lkz)||BJ.k;}var BU=this.getLayoutDataCache(BC),BK=(!A0&&!R.isEmpty(BU)),BQ;if(!BJ){BQ=this.data;}else{var A8=BJ.data||BJ;if(BK){BQ=BU[I.call(this,A8,BC)];BQ=(BQ&&BQ.data)||BQ||A8;}else{BQ=A8;}}if(!!BQ.sections){this._buildingLayoutKey=BQ.k;}var A1=BQ?this.extractChildren(BQ):[],BE=[];var BN=(A1&&A1.length)||0;if(BN){A3=this.defn;var BG=!BJ,BB=BJ?BC:null,A5=(BJ&&((BJ.defn)?BJ.defn.t:x.call(this,A3,BB,BJ.k).t));var A2=(A5===Ag.GRIDGRAPH),BO=(A5===Ag.DETAILS),BM,BL;A1=A9(A1);for(BM=0,BL=A1.length;BM<BL;BM++){var BS=A1[BM];if(A2){BS.k=BJ.k;BS.wid=BJ.data.wid;}var BW=BS.k,BI=I.call(this,BS,BB),BR;if(!BG&&!A0&&Ac.call(this,BW,BB)){var BP=this.getLayoutUnitDefn(BW),BF=W({data:BS,defn:BP,id:BI,k:BW,p:BQ},BU);if(!this.infoWinByKey||!this.infoWinByKey[BW]){var A4=this.infoWindows=this.infoWindows||{};var BT=this.infoWinByKey=this.infoWinByKey||{};A4[BP.n]=BT[BW]=BF;}continue;}if(A2){BI+="_"+BM;BR=x.call(this,A3,BB,BS.k+"_"+BM);}else{BR=x.call(this,A3,BB||BS.k,BS.k);}if(BO){BR.dt=true;}if(BU===null&&(BR.t===Ag.LAYOUT)){BU=this.getLayoutDataCache(BS.k);}var BV;if(BR.t===Ag.PANEL&&BU[BI]&&BK){var A7=this.extractChildren(BS)||[],BD=this.extractChildren(BU[BI].data)||[],BA=false;if(A7.length!=BD.length){M.forEach(BD,function(BY){var BX=M.find(A7,"k",BY.k);if(BX>-1){A7[BX]=BY;BA=true;}});if(BA){BD.splice(0,BD.length);M.forEach(A7,function(BX){BD.push(BX);});}}BV=BS;}else{BV=BK?(BU[BI]&&BU[BI].data)||BS:BS;}var BH={k:BS.k,id:BI,defn:BR,data:BV};if(!BU[BI]){W(BH,BU);}BE.push(BH);}}return A6?{nodes:BE,total:BN}:BE;}function Ax(A6,A1,A5){var A0=AG.px2Inches,A2=this.getZoomProps(),A4=1,A3=2;if((A5&A4)>0){A6.FormattingPosition={Left:A0(A2,A1.x||0),Top:A0(A2,A1.y||0)};}if((A5&A3)>0){A6.FormattingSize={Height:A0(A2,A1.h||0),Width:A0(A2,A1.w||0)};}}function s(A1){function A0(A3,A2){return A3<A2?-1:(A3>A2?1:0);}A1.sort(function(A3,A2){var A4=A0(A3.levelID,A2.levelID);return A4!==0?A4:A0(A3.elemID,A2.elemID);});return A1;}function Au(A0,A1){return A0.map(function(A2){return A2[A1];}).join(b);}function J(A0){return Au(A0,"levelID");}function Av(A0){return Au(A0,"elemID");}function AE(A1){if(A1){T={};}F={};var A0=this.defn.epm;if(A0){A0.forEach(function(A2){A2.epmv.forEach(function(A3){var A5=s(A3.k.chn.map(function(A8){var A7=A8.emt!==2;return{levelID:A7?A8.at.did:"-1",elemID:A7?A8.ei:A8.mt.did};})),A6=J(A5),A4=Av(A5);if(!F[A6]){F[A6]={};}F[A6][A4]=JSON.parse(A3.v.vv);});});}}function a(A0){if(A0){A0=mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters(A0);}return A0;}function AA(){var A1=this.data&&this.data.layouts,A0=A1[M.find(A1,"k",this.getCurrentLayoutKey())],A3=A0&&A0.gbys&&A0.gbys.groupbys,A2=false;M.forEach(A3,function(A4){if(A4.unit&&A4.unit.elms&&A4.unit.elms[A4.unit.idx].v==="u;"){A2=true;return false;}});return A2;}mstrmojo.DocModel=mstrmojo.declare(mstrmojo.Model,[mstrmojo._CanProxyCallback],{scriptClass:"mstrmojo.DocModel",audibles:{"*":false,data:true,tsp:true},features:null,dataCache:null,searchElemsCache:null,controller:null,sdp:null,dpi:96,keySeed:0,currlaykey:"",init:function AP(A0){this._super(A0);if(!this.features){this.features=new mstrmojo.Model();this.disposables.push(this.features);}this.ondefnChange();AE.call(this);this.buildTime=mstrmojo.now();},hasFeatures:function AM(A4){var A2=this.features;if(!A2){return false;}var A1=A4.split(","),A0=A1.length,A3;for(A3=0;A3<A0;A3++){var A5=A1[A3],A6=A5.match(/^!/);if(A6){A5=A5.replace("!","");}if(!!A6===!!A2[A5]){return false;}}return true;},makeObservable:function AO(A0){return AH.makeObservable(A0);},checkStatus:function Aq(A0){if(parseInt(A0.status,10)===4){A0.message=mstrmojo.desc(5781,"Request timed out.");mstrmojo.err(A0);return false;}return true;},getDataService:function AZ(){var A1=this.dataService;if(!A1){var A0={rwb:this.bs,msgId:this.mid,stid:this.stid,cbKey:this.cbKey,model:this};if(mstrApp.modelFactory){A1=mstrApp.modelFactory.newDataService("Document",A0);}else{A1=mstrApp.viewFactory.newDocDataService(A0);}this.dataService=A1;this.disposables.push(A1);}return A1;},getNextKey:function Ah(){return"W"+this.keySeed++;},resetKeySeed:function D(A0){this.keySeed=A0;},getWidgetId:function H(A0,A1){return I.call(this,A0,A1||this.getCurrentLayoutKey());},getUIState:function S(){return{};},ondefnChange:function t(){var A5=this.defn,A2=A5&&A5.layouts,A1={};if(A5){A5.layoutMap=A1;var A4=(A2&&A2.length)||0,A3;for(A3=0;A3<A4;A3++){var A0=A2[A3];A1[A0.k]=A0;}}},extractChildren:function u(A0){return(A0.sections||A0.subsections||A0.objects||A0.panels||A0.layouts||A0.children);},getChildren:function O(A2,A1,A5,A0,A4){A5=A5||0;var A3=function(A6){return A6.slice(A5,A5+(A0||A6.length));};return AK.call(this,A2,A3,A1,A4);},getChildrenByKey:function AJ(A2,A1,A0,A4){var A3=function(A6){var A5=[],A7;M.forEach(A0,function(A8){A7=M.find(A6,"k",A8);if(A7!==-1){A5.push(A6[A7]);}});return A5;};return AK.call(this,A2,A3,A1,A4);},getTargetDefn:function AI(A0){return Aw.call(this,A0);},getUnitDefinitions:function(A1,A0){return Aw.call(this,A1,A0);},getUnitInstance:function p(A0,A1){return mstrmojo.all[I.call(this,{k:A0,wid:A1},this.currlaykey)];},getFirstUnitInstanceByName:function v(A3){var A0=f.call(this,this.defn,this.currlaykey);if(A0){var A1=A0.units,A2;for(A2 in A1){var A4=A1[A2];if(A4.n===A3){return this.getUnitInstance(A2,1);}}}return null;},getLayoutUnitDefn:function B(A1,A0){return x.call(this,this.defn,A0||this.currlaykey,A1);},getRawLayoutUnitDefn:function U(A1,A2,A0){return x.call(this,A2||this.defn,A0||this.currlaykey,A1,true);},getSelectedKey:function Al(A0){return(!A0&&this.currlaykey)||null;},getCurrentLayoutKey:function o(){return this.currlaykey;},getLayoutDefn:function AR(A0){var A1=this.defn,A2=A1&&A1.layouts;return A2&&A2[M.find(A2,"k",A0)];},getCurrentLayoutDef:function AU(){return this.getLayoutDefn(this.getCurrentLayoutKey());},replaceLayout:function As(A8,A1,A9){var A5=this.defn,A4=this.data,A2=A1&&A1.defn,A0=A1&&A1.data,BA=this.dataCache;if(BA&&BA[A8]){BA[A8]={};}var A7=(A4&&A4.layouts)||(A5&&A5.layouts),A3,A6=false;for(A3=(A7&&A7.length-1)||0;A3>=0;A3--){if(A7[A3].k===A8){break;}}if(A9&&A3<0){A3=M.find(A0.layouts||A2.layouts,"k",A8);A6=true;}this.bs=A1.bs;if(A0){if(A6){M.insert(A4.layouts,A3,[A0.layouts[A3]]);}else{A4.layouts[A3]=A0.layouts[A3];}A4.elems=A0.elems;}if(A2){if(A6){M.insert(A5.layouts,A3,[A2.layouts[A3]]);}else{A5.layouts[A3]=A2.layouts[A3];}this.ondefnChange();}},loadLayout:function Z(A0,A2,A1){this.replaceLayout(A0.currlaykey,A0);this.raiseEvent({name:"rebuildLayout",unloadCache:!!A2,restoreIW:!!A1});},getLayoutDataNode:function Ay(A1){var A0=this.data&&this.data.layouts;return M.filterOne(A0,function(A2){return A2.k===A1;});},getLayoutDataCache:function l(A1){if(!A1){return null;}var A0=this.dataCache;if(!A0){A0=this.dataCache={};}if(!A0[A1]){A0[A1]={};}return A0[A1];},saveRW:function Aj(A1,A3){var A2=mstrmojo.desc,A0=this.getDataService();A0.saveRW({objName:A1||this.n,folderID:this.pfid,saveAsFlags:1},A3||{success:function(A4){mstrmojo.alert(A2(3819,"Document Saved")+": "+A4.n);}});},saveAsRW:function Az(A2,A1){var A0=this,A3=mstrmojo.hash.copy(A2,{evt:3102,applyChanges:false,executionMode:2,parentFolderID:mstrApp.saveFolderId||A0.sfid||A0.pfid,saveFromDesignMode:false,rwb:A0.bs});if(A1){A3.target=A1;A3.saveAsOrigin=13;}mstrmojo.form.send(A3,null,"post");},saveDocProps:function AC(A0,A1,A2,A6){var A5=this.getDataService(),A4=A2?null:mstrmojo.DocDataService.SUPPRESS_DATA,A3=[{act:"setDocumentProperties",props:A0}];R.forEach(A0.RWDocumentProperties,function(A8,A7,A9){A9[A7]=String(A8);});if(A1){this.controller.cmdMgr.execute({execute:function(){this.submit(A3,A6||{},A4);},urInfo:A1});}else{A5.submitUpdates(A3,A6||{},R.copy(A4,{preserveUndo:true}));}},partialUpdate:function y(A5,A0,A3,A2,A1){if(A3){this.updateDefnCache(A3,A2,A1);}if(A5){var A4=this.updateDataCache(A5,A0,undefined,A1);this.raiseEvent({name:"partialUpdate",tree:A5,ids:A4});return A4;}},refreshDefinition:function Y(A3,A2,A1,A4){var A0=this.getLayoutUnitDefn(A3,A1||this.getCurrentLayoutKey());if(!A0){return ;}Ai(A0.t).update(this,A0,A2,A4);},loadPartialData:function w(A5,A1){var A3={};A3[A1]=x.call(this,this.defn,this.currlaykey,A1);var A2=this.updateDataCache(A5,A3),A0=this.getLayoutDataCache(this.getCurrentLayoutKey()),A4=this;M.forEach(A5.layouts,function(A6){var A7=A6&&A6.xtabStyles;if(A7){A4.raiseEvent({name:"updateStyles",key:A6.k,updatedStyles:A7});}});At(A2,function(A7,A6){if(A6==="upd"){At(A7,function(A9,BA){var A8=mstrmojo.all[BA];if(A8&&A8.update){A8.update(A0[BA]);}});}});},updateDefnCache:function A(A1,A7,A4){var BA=this.currlaykey,A3=f.call(this,A1,BA),BC=f.call(this,this.defn,BA),A8=function(BD,BE){var BF;for(BF in BE){if(BD[BF]===undefined){BD[BF]=BE[BF];}}},BB=A3&&A3.units,A9=BC&&BC.units,A2=A3&&A3.cgbMap,A0=BC&&BC.cgbMap,A5=A4&&a(A4).defn,A6=this;M.forEach(A7,function(BD){A6.refreshDefinition(BD,BB&&BB[BD],null,A5&&A5[BD]);});if(BB){A8(A9,BB);}if(A2){A8(A0,A2);this.raiseEvent({name:"CGBMapChange",cgbMap:A0});}},deleteDataCache:function P(A1){var A0=this.getLayoutDataCache(this.getCurrentLayoutKey());if(A0[A1]){delete A0[A1];}},updateDataCache:function AQ(BA,A9,A0,A4,A8){var A2=this.getLayoutDataCache(this.getCurrentLayoutKey()),A1=A4&&a(A4).data,BB={ifws:{},upd:{},tgts:{},def:{},secs:{}},A5=function(BH,BC){var BG=A2[BH];if(A1){var BF=mstrmojo.all[BH];if(BF){var BD=BG.k,BE=A1[BD];if(BE){if(!R.isEmpty(BE.exclude)){R.copy(BC.data,BG.data);}else{BC.data=R.copyProps(BE.serialized.split(";"),BC.data,BG.data);}}}}if(A8&&!!A8.clearAll){BC.clearAll=true;}W(BC,A2);};function A7(BQ,BV,BD,BG){var BI=false,BN=this.getChildren(BQ,true),BM;if(!BN.length){return ;}if(BD){BM=mstrmojo.all[BQ.id];BI=!BQ.id||!!BM;}var BH=BQ.defn,BE=BQ.data,BS;if(BH&&BH.t===Ag.PANELSTACK&&BH.od){BS=BE.selKey;}var BR,BL,BW=function(BX){return(BX.k===BL);};for(BR in BN){var BO=BN[BR],BP=BO.id,BF=null,BT;BL=BO.k;if(BV){var BJ=this.extractChildren(BV);if(BJ){BT=M.filterOne(BJ,BW);if(!BT){BJ.push(R.clone(BO.data));}}else{R.copy(R.clone(BQ.data),BV);}}if(mstrmojo.all[BP]){BI=true;}if(A9.hasOwnProperty(BL)){if(Ac.call(this,BL)&&Ae(BO.data,A0)){A5(BP,BO);if(!BG){BB.ifws[BL]=this.infoWinByKey[BL].id;}}BF=BL;if(BI){if(BS&&BS!==BL){continue;}if(!BG){BB.tgts[BP]=true;}var BC=BM&&BM.defn,BU=BC&&BC.t,BK=BC&&BC.ck;if(BU===Ag.SUBSECTION&&(BK&&BK.hasOwnProperty(BL))){BB.secs[BM.id]=true;}}}if((BG||BF)&&(!BS||BS===BL)){A5(BP,BO);BB.def[BL]=true;if(BI){BB.upd[BP]=true;}}A7.call(this,BO,BT,BI,BG||BF);}}if(BA&&BA.layouts&&A9){var A3=M.filterOne(BA.layouts,function(BC){return(BC.loaded);}),A6=this.data.layouts;if(A3){A7.call(this,A3,A6[M.find(A6,"k",A3.k)],true);}}return BB;},getDimensionAndPositionAction:function Q(A1,A0,A3){var A2=this.getUnitFormatAction(A1,null,null,A3);Ax.call(this,A2.format,A0,3);return A2;},getDimensionAction:function Q(A1,A0,A3){var A2=this.getUnitFormatAction(A1,null,null,A3);Ax.call(this,A2.format,A0,2);return A2;},getUnitFormatAction:function d(A8,A1,A7,A3){var A5=A8.defn,A9=A5.t||1,A6=A8.k,A4=[A6];var A0={act:"format",unitKey:A6,unitType:A9===115?521:A9,formatType:A1||1,format:A7||{}};if(!A3){A0.partialRetrieval={nodes:A4};}if(A9===Ag.SELECTOR){var BA=A5.ck;A0.keyContext=BA;A4[0]=this.getDataService().getNodeKeyFromKeyContext(BA);}if(A9===Ag.TEXTFIELD||A9===Ag.IMAGE||A9===Ag.HTMLCONTAINER){var A2=A8.nk||A5.fgk;A0.fieldKey=A6;A0.nodeKey=A2;A0.keyContext=A9+b+A2+b+A6;A4[0]=A2;}return A0;},updateUnitFormat:function Af(A1,A3,A4,A5,A0){var A2=this.getUnitFormatAction(A1,A3,A4);this.getDataService().submitUpdates(A2,A5,A0);},selectPanelDeferred:function(A5,A4,A3,A2,A1,A0){e.call(this,A5,{type:3,tks:A4,eid:A3,sid:A2||1,ck:A4,hasLoader:A1,skipServerCall:A0});},getSearchElemsCache:function Ao(){var A0=this.searchElemsCache;if(!A0){A0=this.searchElemsCache={};}return A0;},getCGBMap:function AW(){var A0=f.call(this,this.defn,this.currlaykey);return A0&&A0.cgbMap;},getSliceCallback:function AB(A0){var A3=this,A4={};A4.dataCacheUpdate=null;A4.tgtDefs=A0.tks?Aw.call(this,A0.tks):null;A4.orignalTargetDefs=A4.tgtDefs;var A2=A4.tgtDefs,A1=function(A7){var A8=A2;if(A0.disablePU){A8=Aw.call(A3,A3.currlaykey);}At(A8,function(A9){if(A9&&A9.set){A9.set("readyState",A7);}});},A6=this.newCallback({method:"slice",shared:A4,submission:function(){A1(K.WAITING);},success:function(A8){if(!A3.checkStatus(A8)){return ;}if(A0.disablePU){A3.loadLayout(A8,A0.isUConDS,A0.restoreIW);return ;}if(A8.pukeys){A4.tgtDefs=Aw.call(A3,A8.pukeys);}A4.dataCacheUpdate=A3.updateDataCache(A8.data,A4.tgtDefs,A0&&A0.sid,A8.puFilters,A0);if(typeof A8==="object"){R.copyProps(["bs","exopt","dty"],A8,A3);}var A7={name:"partialUpdate",tree:A8.data,ids:A4.dataCacheUpdate,unloadCache:A0.isUConDS};if(!mstrmojo.hash.isEmpty(A7.ids.ifws)){if(A0&&!A0.suppressIW&&(A0.type===Ag.GRID||A0.type===Ag.GRAPH)){A7.anchor=A0.anchor;}else{A7.ids.ifws={};}}A3.raiseEvent(A7);},complete:function(){A1(K.IDLE);}}),A5={success:function(){At(A4.orignalTargetDefs,function(BH,BF){var BG=n.call(A3,BF,1);if(!BG){if(!!A3.sdp&&!!A3.sdp[BF]){var BE=A3.getLayoutDataCache(A3.getCurrentLayoutKey());var BI=I.call(A3,{k:BF,wid:1},A3.currlaykey);A3.raiseEvent({name:"secondaryDataSliced",key:BF,data:BE[BI].data});}return ;}if(A4.dataCacheUpdate&&!A4.dataCacheUpdate.def.hasOwnProperty(BF)){if(BG.setDirty){BG.setDirty(true);}}else{if(parseInt(BH.t,10)===Ag.PANELSTACK){BG.setDirtyChildren();}}});var A7=n.call(A3,A0.ctlKey,1);if(A7&&A4.dataCacheUpdate&&!A4.dataCacheUpdate.upd.hasOwnProperty(A7.id)){var BC=(A7.children&&A7.children[0].selectedIndices)||{},BA=A7.node.data,BD=mstrmojo.DocSelector.STYLES,BB=[];if(A7.style===BD.SEARCH_BOX){var A8=(A7.children&&A7.children[0].items)||[];M.forEach(A8,function(BE){BB.push(R.clone(BE));});}else{R.forEach(BC,function(BF,BE){if(BF){BB.push(BA.elms[BE]);}});}var A9=M.find(BB,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(A9>-1){BB=[BB[A9]];}BA.ces=BB;A7.selIdx=BC;}}};if(A0.isUConDS||(parseInt(A0.type,10)===Ag.GRAPH&&A0.tty===1)){A6.success=function(A7){A3.controller.setData(A7,true);};return A6;}if((parseInt(A0.type,10)===3)){return A6;}return Ar(A6,A5);},slice:function X(A0){var A1=this.getDataService(),A2=A1.newUpdateWithoutCmd();this.sliceDeferred(A2,A0);if(A2.actions&&A2.actions.length>0){A1.addSuppressData(A2.extras);A2.submit();}},sliceDeferred:function(A3,BC){var A0={};try{if(!BC||(!mstrmojo.dom.isAndroid&&!BC.tks&&!BC.multiSelect&&(BC.type===3||(BC.type===Ag.GRAPH&&parseInt(BC.tty,10)!==1)))){return A0;}var BD=this.getSliceCallback(BC),A9=this,BB=this.getDataService();var BF=parseInt(BC.type,10);if(BF===3){e.call(A9,A3,BC);return ;}if(BC.multiSelect){if(BC.selectorObjects.length>0){BB.setMultiDocSelectorElements(BC.selectorObjects,BC.multiSelect,BD);}return ;}if(BF===Ag.GRAPH){A3.add(BB.getGraphSelectionAction(BC.src,BC.cks,BC.sid,BC.x,BC.y,(BC.tty===1)),BD);if(!!BC.showLoadingIcon){A3.addExtras({config:mstrmojo.DocDataService.PROGRESS_CONFIG});}return ;}var BE=BC.events||{K0:BC},A2=[],A5,A1={config:mstrmojo.DocDataService.PROGRESS_CONFIG},A8=A1.params={},A4,A7={},BA=function(BH,BG){if(BH){A7[BG]=BH.visName;}};for(A4 in BE){BC=BE[A4];if(!BC){break;}if(BC.hasOwnProperty("eid")){if(BC.isUConDS){BC.disablePU=true;}if(AA.call(this)){BC.disablePU=true;BC.restoreIW=true;}A5=BB.getSelectorElementsAction(BC);if(A9.sdp){A7={};At(A9.sdp,BA);A8.sdpKeys=JSON.stringify(A7);}if(BC.disablePU){A8.disablePU=true;}}else{if(BC.fromGM){A5=BB.getSelectorFromGMAction(BC);}else{if(parseInt(BC.srct,10)===4||BC.fid){if(BC.fid&&AA.call(this)){BC.disablePU=true;}A5=BB.getSelectorExpressionAction(BC);}else{if(BC.unset){A5=BB.getUnsetSelectorAction(BC);}else{if(parseInt(BC.ct,10)===6){A5=BB.getMultiUnitSelectorAction(BC);A9.hasUnitSelector=BC.selections&&BC.selections.hasElements;}else{A5=BB.getSelectorIncludeAction(BC);}}}}}A2.push(A5);}A3.add(A2,BD,A1);}catch(A6){mstrmojo.err(A6);}},getInfoWindow:function q(A1){var A0=this.infoWindows;return A0&&A0[A1];},getTargetInfoWin:function(A1){var A0=[],A2=Aw.call(this,A1);if(A2){var A3;for(A3 in A2){if(A2[A3]&&A2[A3].ifw){A0.push(A3);}}}return A0;},showInfoWin:function m(A3,A2,A0,A4,A5){var A1=this.infoWinByKey&&this.infoWinByKey[A3];if(A1===undefined){return ;}this.raiseEvent({name:"showInfoWin",psId:A1.id,psKey:A1.k,anchor:A2,anchorOrientation:A0,anchorPosition:A5,invalidate:A4});},getSelectedXtabStyles:function j(A2){var A1=A2||this.currlaykey;var A4={};var A0=this.data&&this.data.layouts,A3;for(A3 in A0){if(A0[A3].k===A1){A4=A0[A3].xtabStyles;break;}}return A4;},downloadGridData:function E(A4){var A2=this,A1=A4.xtabId,A0=A4.memo,A3=mstrmojo.all[A1];this.getDataService().downloadGridData(A4,this.newCallback({success:function(BC){function A5(BG,BI){var BJ=A2.getChildren(BG,true),BH=BJ.length,BF;for(BF=0;BF<BH;BF++){var BK=BJ[BF];if(BI===BK.id){return BK;}var BE=A5(BK,BI);if(BE){return BE;}}return null;}var A9=BC.data&&f.call(A2,BC.data,A2.currlaykey);if(A9){var A8=A5(A9,A1);if(A8){mstrmojo.models.template.DataInterface.inflateGridData(A8.data);if(A3){A3.dataDownloaded(A8,A0);}}var BB=A9.xtabStyles;if(BB){A2.raiseEvent({name:"updateStyles",key:A9.k,updatedStyles:BB});}}var BA=x.call(A2,A2.defn,A2.currlaykey,A4.nodeKey);if(BA&&BA.t===Ag.GRIDGRAPH&&A0.recalculating){var A7=A3.parent,BD=A7&&A7.getGraphWidget();if(BD&&A7.updateGraph){A7.updateGraph(A5(A9,BD.id));}}if(BC.pukeys){var A6=Aw.call(A2,BC.pukeys);delete A6[A4.nodeKey];if(!R.isEmpty(A6)){A2.partialUpdate(BC.data,A6);}}},failure:A3.dataDownloadErr||mstrmojo.emptyFn}));},clearDisposables:function AV(){var A0=[];M.forEach(this.disposables,function(A1){if(A1._lkz){Ap(A1);}else{A0.push(A1);}});this.disposables=A0;},getFixedHeaders:function(A1,A0){return AN.call(this,A1,A0,[Ag.PAGEHEADER],true);},getFixedFooters:function(A1,A0){return AN.call(this,A1,A0,[Ag.PAGEFOOTER],true);},getNonFixedSections:function(A1,A0){return AN.call(this,A1,A0,[Ag.PAGEHEADER,Ag.PAGEFOOTER],false);},addAutoWidthID:function g(A2){var A1=this.aws||{},A0=A1[this.currlaykey]||[];A0.push(A2);A1[this.currlaykey]=A0;this.aws=A1;},getAutoWidthIDs:function L(){var A2=this.aws,A0=this.currlaykey;var A1=A2&&A2[A0];if(A1){delete A2[A0];}return A1;},getTransactionUpdates:function i(A0){return this.txDiscardTargets?"":AD.call(this,A0);},clearTransactionUpdates:function AF(A0){this.clearTxDeltaUpdate(A0);},resetTransactionUpdates:function Aa(A0){var A1=this.pendingUpdate,A2=this.delta;if(A1&&A1[A0]){At(A1[A0],function(A3,A4){if(A2&&!A2[A4]){A2[A4]=A3;}});delete A1[A0];}},transactionUpdate:function An(A2,A1){if(!A2.data){return null;}var A4;if(A1&&A1.tks){A4=Aw.call(this,A1.tks);}if(A2.pukeys){A4=Aw.call(this,A2.pukeys);var A5;for(A5 in A4){if(A4[A5]&&A4[A5].cek){A4[A5].cek=null;}}}if(A2.txrcd){this.txrcd=A2.txrcd;}else{delete this.txrcd;}var A3=this.updateDataCache(A2.data,A4,A1&&A1.sid),A0={name:"partialUpdate",tree:A2.data,ids:A3};if(!R.isEmpty(A3.ifws)){if(A1&&A1.type===Ag.GRID){A0.anchor=A1.anchor;}else{A3.ifws={};}}this.raiseEvent(A0);return A3;},deltaUpdate:function AY(A0){var A1=this.delta;if(!A1){A1=this.delta={};}A1[A0.id]=A0;},clearTxDeltaUpdate:function V(A1){var A4=this.txDiscardTargets,A0=!A4,A3=this.pendingUpdate,A2=this;if(!A0){At(A4,function(A5,A6){if(A2.delta&&A2.delta[A6]){A2.delta[A6].clear();delete A2.delta[A6];}});}if(A3&&A3[A1]){At(A3[A1],function(A5){A5.clear();});delete this.pendingUpdate[A1];}},sendTransactionActions:function G(A1,A0,A3){var A2=this;if(!A3){A3={success:function(A4){A2.transactionUpdate(A4);}};}A2.getDataService().sendTransactionActions({keyContext:A1,actions:A0,txrcd:this.txrcd},A3);},sendTransactionUpdates:function AT(A0){var A2=this.getSliceCallback(A0),A1=this.getDataService();A1.submitUpdates([A1.getUpdateTransactionAction(A0)],A2);},addSDP:function Ak(A1,A0){if(!A1||!A0){return ;}if(!this.sdp){this.sdp={};}this.sdp[A1]={k:A0.k,visName:A0.visName};},removeSDP:function Ad(A0){if(!A0||!this.sdp[A0]){return ;}delete this.sdp[A0];},getUpdateColorMapCallback:function c(){var A0=this;return{success:function(A1){A0.defn.epm=A1.defn&&A1.defn.epm;AE.call(A0);A0.raiseEvent({name:"colorMapChanged"});}};},getUpdateThemePaletteCallback:function AX(A0){var A1=this;return{success:function(A2){A1.thm=A2.thm;A1.plt=A2.plt;A1.defmts=A2.defmts;AE.call(A1,!A0);}};},getCurrentPaletteColors:function AL(){return(this.plt&&this.plt.colors)||N;},getColorBy:function(A6,A0){var A4=A0.map(function(A8,A7){return{levelID:A6[A7].toString(),elemID:A8};});if(A4&&A4.length>1){s(A4);}var A5=J(A4),A3=Av(A4),A2=T[A5];if(!A2){A2=T[A5]={_currentColorIdx:0};}if(!A2[A3]){var A1=this.getCurrentPaletteColors();A2[A3]=A1[A2._currentColorIdx];A2._currentColorIdx=(A2._currentColorIdx+1)%A1.length;}if(F[A5]&&F[A5][A3]){return{color:F[A5][A3].color,isManual:true};}return{color:A2[A3],isManual:false};},getZoomFactor:function z(){return this.getCurrentLayoutDef().zf||1;},getZoomProps:function AS(){return{dpi:this.dpi,zf:this.getZoomFactor()};},executeLink:function h(A0,A2,A3){if(A0.indexOf("prevMsgID")>0){var A1="prevMsgID="+this.mid;A0=A0.replace(/prevMsgID=0($|&)/g,function(A4,A5){if(A5==="&"){return(A1+"&");}return A1;});if(mstrmojo.dom.isIE){A0+="&cb"+mstrmojo.now()+"=1";}}A0=mstrmojo.addCSRFTokenToURL(A0);this.controller.onLink(this,{url:A0,target:A2,src:A3||null,submitAsPost:!mstrmojo.isUrlExternal(A0)});},getDatasetUnits:function Am(A1,A0,A3,A5){var A4=this.datasets,A2=[];R.keyarray(A4).forEach(function(A7){if(!A3||A7===A3){var A8=A4[A7],A6=A8,A9=[];A1.forEach(function(BA){if(A5!==undefined){A6=A8.tables[A5];}(A6[BA]||[]).forEach(function(BB){if(!A0||A0(BB)){A9.push(BB);}});});A2=A2.concat(A9.map(function(BA){return mstrmojo.hash.copyProps(["did","n","t","st","formType","dt","f","hide","usedInDropZones","card","lock","fs"],BA,{ds:A8.name,dsId:A7,dm:!!BA.um,da:!!BA.da,de:!!BA.de});}));}});return A2;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}else{if(H===F){break;}}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.func","mstrmojo.vi.controllers.UICmdMgr");var R=mstrmojo.func,N=mstrmojo.hash,K=mstrmojo.array,H=mstrmojo.vi.controllers.UICmd.STATES,F={SHARED:0,SEPARATE:1},I={AND:19,OR:20},X=function X(b,a){var Y={},Z=function(e,d){var c=[];if(!d){return e;}K.forEach((d||[]),function(f){c.push(f);});K.forEach((e||[]),function(g){var f=K.find(d,"id",g.id);if(!~f){c.push(g);}});return c;};N.forEach(a,function(c,d){Y[d]=c;});N.forEach(b,function(c,d){Y[d]=Z(c,a[d]);});return Y;},D=function D(Y){var Z=[];N.forEach(Y,function(a){Z.push({ft:I.AND,d:a});});return Z;},G=function(Z){var Y={},a=function(b){var c=N.keyarray(b)[0];return{id:c,d:b[c][0]};};N.forEach(Z,function(e){var d={},b=a(e),c=d[b.id];if(b.id){if(!c){d[b.id]=c=[];}c.push(b.d);}Y=X(Y,d);},this);return[{ft:I.OR,d:Y}];},C=function C(e){var a=this.model,d,c=[],Z=this.getSelectionType(),Y=mstrmojo.vi.ui.rw.SelectionType,f=true,b=false;if(!N.isEmpty(e)){if(Z===Y.METRICS){d=D.call(this,e);}else{d=G.call(this,e);}}N.forEach(d,function(g){f=false;var h=[];N.forEach(g.d,function(i,m){if(a.supportsViewFilterActions(m)){b=true;var j=[],l={id:m,elems:j},k=a.getObjectInfo(m);if(k){l.t=k.t;l.st=k.st;if(k.st===12033){l.attId=k.attId;}}K.forEach((i||[]),function(n){j.push(n.id);});h.push(l);}});if(h.length){c.push({ft:g.ft,d:h});}});c.hasElements=b;c.clearSelections=f;return c;},U=function U(b){var c=this.selectorControl,Z,Y,a=this;if(c){if(b.clearSelections||b.hasElements){Z=this.controller;c.exp=null;if(Z.onGridSelector){Y=function(){Z.onGridSelector(a,{type:mstrmojo.EnumRWUnitType.GRID,ck:c.ck,tks:c.tks,ctlKey:c.ckey,sliceId:this.sid,isUConDS:c.isUConDS,ct:c.ct,selections:b});};if(this.multiUnitCtrlInterval){window.clearInterval(this.multiUnitCtrlInterval);this.multiUnitCtrlInterval=null;}if(Z.cmdMgr.state===H.BUSY){this.multiUnitCtrlInterval=window.setInterval(function(){if(Z.cmdMgr.state!==H.BUSY){window.clearInterval(a.multiUnitCtrlInterval);if(!a.destroyed){a.multiUnitCtrlInterval=null;Y();}}},1000);}else{Y();}}}}},B=function B(a){var Y={type:mstrmojo.vi.ui.rw.SelectionType.ATTS,data:a},Z=function(b,c){if(parseInt(b.fn,10)===22&&parseInt(c,10)===19){Y.type=mstrmojo.vi.ui.rw.SelectionType.METRICS;}K.forEach((b.nds||[]),function(d){Z(d,b.fn);});};Z(a,null);return Y;},V=function V(){return this.parent.model.getCurrentLayoutDef().cgbMap;},J=function J(){var Y=V.call(this),Z=[];N.forEach(Y,function(b,a){if(this.k===b){Z.push(a);}},this);return Z;},W=function W(){var Y=this.controller&&this.controller.cmdMgr;if(Y&&Y.isUndoRedo()){return true;}return false;};mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",{_mixinName:"mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",selectorControl:null,multiUnitCtrlInterval:null,postBuildRendering:function S(){this._super&&this._super();var Y=this.findSelectorControl();if(W.call(this)){this.clearSelections();}if(Y&&!N.isEmpty(Y.exp)&&this.addSelectionsFromExpression){this.addSelectionsFromExpression(B(Y.exp));if(this.highlight){this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},findSelectorControl:function Q(){if(this._super){return this._super();}else{this.throwAbstractMethodError("findSelectorControl");}},handlesMultiSelection:function E(Y){return(this._super&&this._super(Y))||!!this.selectorControl;},onSelectionChange:function L(Z){var b=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),a=false;if(this._super){a=this._super(Z);}if(b.length>0){this.singleUnitSelect();a=true;}else{if(!!this.selectorControl){var Y=C.call(this,Z);U.call(this,Y);return true;}}return a;},singleUnitSelect:function A(){if(this._super){this._super();}},clearAllSelections:function P(){return this.selectorControl&&this.selectorControl.showall;},onClearBrushing:function T(Y){if(this.selectorControl){return true;}if(this._super){return this._super(Y);}return false;},getFilterType:function M(){return this.defn.ins||F.SHARED;},switchFilterType:function O(i){var f=this,h,g=f.getFilterType(),d=f.parent.model,c,b={actions:[]},j,a=V.call(f),Y,e=false;if(g!==i){h=J.call(f);if(h.length>0&&g===F.SHARED){j=h[0];c=d.getSourceControls(f.parent,j);K.forEach(c,function(l,m){if(m!==0){Y=d.getNextKey();a[Y]=f.k;b.actions.push(d.redoFilterAssociations(true,l.control.ckey,l.sourceKey,f.k,j,Y));e=true;}}.bind(f));}else{var Z;K.forEach(h,function(l,m){c=d.getSourceControls(f.parent,l);if(m===0){Z=l;}else{delete a[l];b.actions.push(d.redoFilterAssociations(false,c[0].control.ckey,c[0].sourceKey,f.k,l,Z));e=true;}}.bind(f));}b.actions.push(d.getUnitFormatAction(f,1,{FormattingSelector:{IndependentNodeSelector:i}},true));var k=false;b.callback=({success:function(){f.defn.ins=k?g:i;k=!k;}});if(e){b.callback=R.wrapMethods(b.callback,d.getRebuildCallback());}}b.extras={style:{params:{treesToRender:3}}};return b;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.dom","mstrmojo.css");var A=mstrmojo.dom,B=mstrmojo.css,D=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span>"+D+"</div></div>",getPrefixAndOrToolsMarkup:function(){return(D+this._super());},markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},createSetNode:function(){return this.domNode.childNodes[1].lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){B.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noRelation);},onnoCreateSetChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noCreateSet);}},mstrmojo.hash.copy(mstrmojo.ConditionNode.prototype.markupMethods)),init:function(E){if(this._super){this._super(E);}var F=this.data&&this.data.et;if(F){this.set("noCreateSet",F===10||F===12);}},preclick:function C(E){var H=null,G=A.eventTarget(E.hWin,E.e),F=this._super(E);if(A.contains(this.createSetOptNode,G,true)&&!this.noRelationOperator&&!this.noRelation){H="createSetOpt";}else{if(A.contains(this.createSetNode,G,true)&&!this.noRelation){H="createSet";}else{if(A.contains(this.addConditionNode,G,true)){H="addCondition";}}}E.part=H||E.part;return F;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.dom");var B=mstrmojo.dom;mstrmojo.threshold.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,null,{scriptClass:"mstrmojo.threshold.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),cssClass:"adv-threshold",avatarCssCls:"mstrmojo-thresholdRow",markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass} mstrAttach:mousedown"><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span></div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},preclick:function A(C){var F=null,E=B.eventTarget(C.hWin,C.e),D=this._super(C);if(B.contains(this.addConditionNode,E,true)){F="addCondition";}C.part=F||C.part;return D;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css");var B=mstrmojo.css;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',onkeyup:function C(D){this._super(D);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var E=this;this._autoApplyTimer=window.setTimeout(function(){E.set("isEditing",false);},this.autoApplyDelay);}},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function A(){var E=this[this.editableSlot],D=!!this.selectable;E.selectable=D;E.setAttribute("unselectable",!D?"on":"off");B.toggleClass(E,"unselectable",!D);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");mstrmojo.DivItemRenderer={render:function(E,C,F){var D=mstrmojo.string.encodeHtmlString((F.getItemName?F.getItemName(E,C):(F.itemDisplayField&&E[F.itemDisplayField])));return'<div mstridx="'+C+'" class="'+F.itemCssClass+(F.selectedIndices[C]?" "+F.itemSelectedCssClass:"")+(E.cssClass?" "+E.cssClass:"")+'" style="'+F.itemCssText+'">'+D+"</div>";},select:function(D,E,C,F){D.className+=" selected";},unselect:function(D,E,C,F){D.className=D.className.replace(/selected/g,"");},rowHeight:21};mstrmojo._RendersItemDivs={tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"mstrmojo-ListBox-cell",cellCssText:"",itemCssClass:"mstrmojo-ListBox-item",itemSelectedCssClass:"selected",itemDisplayField:"n",itemRenderer:mstrmojo.DivItemRenderer,rangeSelected:false,_findMatch:function(C,D){return mstrmojo.dom.findAncestorByAttr(mstrmojo.dom.eventTarget(C,D),"mstridx",true,this.itemsNode);},premousedown:function A(C){if(mstrmojo.dom.shiftKey(C.hWin,C.e)){mstrmojo.dom.preventDefault(C.hWin,C.e);}},preclick:function B(L){var H=L.hWin,I=L.e,G=this._findMatch(H,I);if(G){var E=G.node,K=parseInt(G.value,10),J=mstrmojo.dom,C=J.ctrlKey(H,I),D=J.shiftKey(H,I);if(C||D){J.clearBrowserHighlights(H);}if(this.multiSelect&&(this.selectionPolicy==="toggle"||C)){var F=this.rangeSelected||this.selectedIndex===-1;this.toggleSelect(K);if(F&&K<this.items.length&&this.selectedIndices[K+1]){K++;}this.selectedIndex=K;this.rangeSelected=false;}else{if(this.multiSelect&&D){this.rangeSelected=true;this.rangeSelect(K);}else{this.singleSelect(K);this.rangeSelected=false;}}}}};mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._RendersItemDivs");mstrmojo.ListBoxBase=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._RendersItemDivs],{scriptClass:"mstrmojo.ListBoxBase",cssClass:"mstrmojo-ListBox",itemCssClass:"mstrmojo-ListBox-item",_markupPrefix:function(){var C=this.itemRenderer;return(C&&C.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var C=this.itemRenderer;return(C&&C.markupSuffix)||"</tbody></table>";},_itemPrefix:function(){var C=this.itemRenderer;return(C&&C.itemPrefix)||('<tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'"><td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var C=this.itemRenderer;return(C&&C.itemSuffix)||"</td></tr>";},_getItemNode:function(C){var E=this.itemsNode,D=E&&E.rows,F=D&&D[C];return F&&F.cells[0].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var A;mstrmojo.ui.editors.controls.ColorList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.editors.controls.ColorList",init:function D(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ColorList");},getItemMarkup:function C(F,E){if(!A){A=this._super(F,E).replace(">{@en@n}<",">{@en@msg}<");}return A;},getItemProps:function B(G,E){var F=this._super(G,E);if(G.id==="transparent"){F.msg=mstrmojo.desc(5774,"No Fill");F.addCls("noFill");}else{F.msg="";G.title=G.n;F.addStyle("background-color:"+G.id);}return F;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,F=mstrmojo.array,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(H,G){if(!A){var I=this.itemField;A=this._super(H).replace('@title}">{@en@n}<',"@en@"+I+'}">{@en@'+I+"}<");}return A;},getItemProps:function C(I,G){var H=this._super(I,G),J=this.itemField;H[J]=I[J];return H;},onclick:function B(G){if(this.disableClick){return false;}var L=this,I=this.parent,K=I.opener,H=D.isMetaKey(G.hWin,G.e);if(H&&!this.multiSelect){this.multiSelect=K.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var N=L.selectedIndices;if(K){K.suggestionShown=false;if(N&&!E.isEmpty(N)){var M=[];E.forEach(L.selectedIndices,function(P,O){M.push(L.items[O]);});K.handleSuggestionItemSelect(M);}I.close();}L.multiSelect=false;});}}this._super(G);if(!this.multiSelect){K.suggestionShown=false;var J=this.selectedItem;if(J){K.handleSuggestionItemSelect(J);}I.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.css");var B=mstrmojo.css;var A;var D;mstrmojo.ui.ButtonBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.ButtonBar",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenabledChange:function G(){B.toggleClass(this.domNode,"disabled",!this.enabled);}},cssDisplay:"table",icnCssText:"display:table-row;",items:null,showIcon:true,init:function F(I){this._super(I);var H=["mstrmojo-ui-ButtonBar"];if(!this.showIcon){H.push("btn-text");}B.addWidgetCssClass(this,H);},getItemMarkup:function E(H){if(!D){D=this._super(H);}if(!A){A=D.replace(">{@en@n}<",'title="{@en@n}"><div>&nbsp;</div><');}return this.showIcon?A:D;},getItemProps:function C(J,H){var I=this._super(J,H);var K=J.css;if(K){I.addCls(K);}I.n=J.n||"";return I;}});mstrmojo.ui.ButtonBar.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.SelectBox=mstrmojo.declare(mstrmojo.ListBase,null,{scriptClass:"mstrmojo.SelectBox",size:10,cssDisplay:"inline",markupString:'<select id="{@id}" class="mstrmojo-SelectBox {@cssClass}" style="{@cssText}" size="{@size}" {@multipleHtml} mstrAttach:keyup,change tstid="{@tstid}">{@itemsHtml}</select>',markupSlots:{itemsContainerNode:function(){return this.domNode;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){this.domNode.disabled=!this.enabled;}},itemCssClass:"mstrmojo-selectbox-item",itemDisplayField:"n",itemIdField:"v",showItemTooltip:false,itemRenderer:{render:function(E,D,F){var G=mstrmojo.string.htmlAngles((F.getItemName)?F.getItemName(E,D):(F.itemDisplayField&&E[F.itemDisplayField]));return'<option class="'+F.itemCssClass+'" value="'+((F.getItemValue)?F.getItemValue(E,D):(F.itemIdField&&E[F.itemIdField]))+'" '+((F.selectedIndices[D])?'selected="true" ':"")+((F.showItemTooltip)?'title="'+mstrmojo.string.encodeXMLAttribute(G)+'"':"")+">"+G+"</option>";},select:function(E,F,D,G){E.selected=true;},unselect:function(E,F,D,G){E.selected=false;}},buildRendering:function C(){this.multipleHtml=this.multiSelect?' multiple="true" ':"";this._super();delete this.multipleHtml;},_getItemNode:function(D){var E=this.scrollboxNode;return E&&E.options[D];},prechange:function A(E){if(this._syncDom){return ;}this._syncDom=true;var H=this.scrollboxNode;if(this.multiSelect){var I=H.options,F=[];for(var G=0,D=I.length;G<D;G++){if(I[G].selected){F.push(G);}}this.select(F);}else{this.singleSelect(H.selectedIndex);}delete this._syncDom;},prekeyup:function(E){var H=this.scrollboxNode,F=false;if(this.multiSelect){var I=H.options;for(var G=0,D=I.length;G<D;G++){if(I[G].selected!==!!this.selectedIndices[G]){F=true;break;}}}else{if(H.selectedIndex!==this.selectedIndex){F=true;}}if(F){var J=E;J.name="change";this.raiseEvent(E);}},onselectionChange:function B(D){if(!this._syncDom){this._super(D);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasMarkup","mstrmojo.Image");mstrmojo.threshold.ImageBand=mstrmojo.declare(mstrmojo.Image,null,{scriptClass:"mstrmojo.threshold.ImageBand",cssClass:"mstrmojo-Image color-band"});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.threshold.ImageBand,{onwidthChange:mstrmojo.Widget.widthMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Button","mstrmojo.EnumRWUnitType","mstrmojo.vi.models.VIComponentMap","mstrmojo.VisEnum");mstrmojo.requiresDescs(14292,14293,14607);var F=mstrmojo.array,B=12,A=1,E=2,D=mstrmojo.Button.newWebButton,C=mstrmojo.vi.models.VIComponentMap.TYPES;mstrmojo.vi.models._CheckDataCards=mstrmojo.provide("mstrmojo.vi.models._CheckDataCards",{_mixinName:"mstrmojo.vi.models._CheckDataCards",CARDLIMIT:mstrmojo.VisEnum.VIS_CARDLIMIT.NON_GRID,isUnitRestrictedInViz:function(){var G=this.docModel,H=[],I=G.getVIComponent(C.FILTER_PANEL),J=I&&I.parent;H=H.concat((J&&J.getFilterDefinitions())||[]);return H.length;},_addInLargeItems:[],_columnCardinalityCount:1,clearCardinalityFlags:function(){this._addInLargeItems=[];this._columnCardinalityCount=1;},existLargeOrManyItems:function(){return(!!this._addInLargeItems.length||this._columnCardinalityCount>this.CARDLIMIT);},findTotalColumnCount:function(L,M){var N=this,P,I=1,K=0,O=this.getHost().gridData;N._columnCardinalityCount=1;if(O){if(M&&M.id===A){var G=O.rw,Q=G&&G.row;N._columnCardinalityCount=(Q&&Q.tc)||1;return ;}var H=O.ghs,J=H&&H.chs;F.forEach(J&&J.items,function(R){if(R.items){I=Math.max(I,R.items.length);}});}F.forEach(L,function(R){if(M&&M.id===E){M.items.every(function(S){if(S.t===B&&S.did===R.did&&S.card){K++;I=I/S.card;return false;}return true;});}P=R.cardg>0?R.cardg:R.card;if(!P&&R.otp===B&&R.es){P=R.es.length+1;}if(P){I=I*P;}});N._columnCardinalityCount=(K===L.length)?1:I;},findLargeItemsForAddUnits:function(G,H,J){var I=this,K;if((!H&&!I.isUnitRestrictedInViz())||H){G.forEach(function(M){var L=M.cardg>0?M.cardg:M.card;K=!!J?J:I.CARDLIMIT;if(L&&L>K){I._addInLargeItems.push(M.n+" ("+L+")");}});}},warnAndExecCallBackForAddUnits:function(M,L,I){if(this.existLargeOrManyItems()){var J=this._addInLargeItems,K=J.length,H;if(K>1){H=mstrmojo.desc(15550,"The following attributes contain a large number of elements: ##. This action may impact dossier performance.").replace("##",J);}else{if(K===1){H=mstrmojo.desc(15549,"The attribute ## has too many elements. This action may impact dossier performance.").replace("##",J);}else{H=mstrmojo.desc(15526,"The dossier will attempt to display more than ### columns. This can affect performance and stability.").replace("###",this.CARDLIMIT);}}var G=[];if(K&&L){G.push(D(mstrmojo.desc(7977,"Move to Rows"),function(){L();},true));}G.push(D(mstrmojo.desc(212,"Continue"),function(){M();}));G.push(D(mstrmojo.desc(2140,"Cancel"),function(){if(I){mstrmojo._DocToolbarActions.close.call({model:{isnew:false}});}}));mstrmojo.warn(H,{},{buttons:G});J.splice(0,J.length);return ;}M();},checkAndWarnLargeItemsForAddUnits:function(J,M,L,G,I,H,K){this.clearCardinalityFlags();if(!I||I.id===E){this.findLargeItemsForAddUnits(J,H,K);}if(G){this.findTotalColumnCount(J,I);}this.warnAndExecCallBackForAddUnits(M,L,H);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.css","mstrmojo.hash");var H=mstrmojo.css,D=mstrmojo.hash,B="glow";var F=mstrmojo.android.ui.Button=mstrmojo.declare(mstrmojo.Button,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Button",onclick:mstrmojo.emptyFn,touchBegin:function E(){if(this.enabled){H.addClass(this.domNode,B);}},touchTap:function C(J){if(this.enabled){this.onclick({e:J.evt});}},touchSelectBegin:mstrmojo.emptyFn,touchSelectEnd:function A(J){if(this.enabled){this.onclick({e:J.evt});}},touchEnd:function I(){H.removeClass(this.domNode,B);}});F.prototype.markupString=F.prototype.markupString.replace(new RegExp(" mstrAttach:[a-zA-Z,]*"),"");F.newButton=function G(M,L,K){var J={scriptClass:"mstrmojo.android.ui.Button",text:M};if(L){J.onclick=L;}D.copy(K,J);return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton mstrButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton mstrButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var L=mstrmojo.boxmodel,I=mstrmojo.dom,M=mstrmojo.css,O="mstrmojo-Tooltip",A="mstrmojo-scrollNode",E=20;function C(S,T,R){var U="connectScrollbox";if(R){U="dis"+U;}var Q=S&&S.parent;while(Q){if(Q[U]){Q[U](T);}Q=Q.parent;}}function G(){if(!this._paintHandle){var R=this.id,Q=function(V){var Z=mstrmojo.all[R];if(!Z){return ;}delete Z._paintHandle;var T=[O],a=Z.cssClass;if(a){T.push(a);}var S=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),X=Z.opener;if(X&&X.getTooltipThemeClass){S=X.getTooltipThemeClass();}T.push(S);Z.domNode.className=T.join(" ");var Y=Z.content,U=Z.contentNode,W=Z.arrowNode;U.className=(O+"-content "+A+" "+Z.contentNodeCssClass);U.style.cssText=Z.contentNodeCssText;U.innerHTML=Y;W.style.cssText="";Z.domNode.style.visibility=!!Y?"visible":"hidden";Z.updatePosition();if(!V&&Z.optimizePos){Z.optimizePos();}Z.updateScrollbars();};if(!this._hasPaint){Q(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(Q,0);}}}function B(h,c,a,Y){var T=c&&(c.richTooltip||c.tooltip),f=a?I.getMousePosition(a,Y||self):null,Q=T&&(typeof T==="string");var U="",g="",d="",Z=T,X=null,W=mstrmojo.tooltip.POS_TOPLEFT,S=null,b=null;var V=false,R=false;if(T&&!Q){g=T.cssClass||g;U=T.contentNodeCssClass||U;d=T.contentNodeCssText||d;Z=T.content||"";X=T.refNode||X;W=T.posType||W;S=T.left||0;b=T.top||0;V=T.keepArrowXPos||V;R=T.keepArrowYPos||R;}h.set("contentNodeCssClass",U);h.set("cssClass",g);h.set("contentNodeCssText",d);h.set("content",Z);h.set("refNode",X);h.set("posType",W);h.set("left",Q?((f&&f.x)||h.left):S);h.set("top",(Q||!T)?((f&&(f.y+E))||h.top):b);h.set("keepArrowXPos",V);h.set("keepArrowYPos",R);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",markupString:'<div id="{@id}" class="'+O+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+O+'-shadow {@shadowNodeCssClass}"></div><div class="'+O+'-contentWrapper"><div class="'+O+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+O+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function D(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var R=this.domNode.style,Q=!!this.visible;if(this._previousVisible!==Q){R.visibility="hidden";}R.display=Q?"block":"none";this._previousVisible=Q;if(Q){this.updatePosition();if(this.content){G.call(this);}}},onleftChange:G,ontopChange:G,onrefNodeChange:G,onposTypeChange:G,oncontentNodeCssClassChange:G,oncontentNodeCssTextChange:G,oncontentChange:G,oncssClassChange:G},preBuildRendering:function N(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function H(V){if(!this.visible&&!V){return ;}var U=this.refNode,T=U?L.offset(U,document.body):{left:I.getHorizontalScroll(),top:I.getVerticalScroll()},k=this.domNode.style,e=this.containerNode,g=e.offsetWidth,Y=e.offsetHeight,R=this.posType,b=R.indexOf("R")>-1,W=R.indexOf("B")>-1,a=this.top!==null?parseInt(this.top,10)+T.top-(W?Y:0):null,S=this.left!==null?parseInt(this.left,10)+T.left-(b?g:((R.indexOf("C")>-1)?Math.floor(g/2):0)):null,i=false,Z=false,c,X,h=I.windowDim(),f=I.getHorizontalScroll()+h.w,Q=I.getVerticalScroll()+h.h,d=this.arrowNode,j=null;if(S!==null){c=Math.min(Math.max(S,0),f-g);k.left=c+"px";i=S!==c;}if(a!==null){X=Math.min(Math.max(a,0),Q-Y);k.top=X+"px";Z=a!==X;}if(i||Z){if((this.keepArrowXPos&&i)||(this.keepArrowYPos&&Z)){j=M.getComputedStyle(d);}if(this.keepArrowXPos&&i){d.style.left=(parseInt(j.left,10)+S-c)+"px";}if(this.keepArrowYPos&&Z){d.style.top=(parseInt(j.top,10)+a-X)+"px";}}M.toggleClass(this.domNode,"offset",i||Z);},_on_tooltip_change:function(Q){B(this,Q&&Q.src);},_set_opener:function(T,S){var R=this.opener,Q=S!==R;if(Q){if(S){C(S,this);}if(R){C(S,this,true);}if(R&&R.detachEventListener){R.detachEventListener(this._richSubs);R.detachEventListener(this._ttpSubs);}if(S&&S.attachEventListener){this._richSubs=S.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=S.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=S;}return Q;},updatePopupConfig:function(Q,R){B(this,R,Q&&Q.e,Q&&Q.win);},onscroll:function K(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var J=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function F(R,T,S,Q){if(!J||!mstrmojo.all[J.id]){J=new mstrmojo.Tooltip();}Q=Q||{};Q.e=T;Q.win=S;J.open(R,Q);R.tooltip=J;},close:function P(){if(J){if(J.opener){J.opener.tooltip=null;}J.close();}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");function A(B){return function(){this.domNode.style[B]=this[B]||"";};}mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",titleNodeCssClass:"mstrmojo-popup-title",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}"><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-title {@titleNodeCssClass}">{@title}</div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onleftChange:A("left"),ontopChange:A("top"),onzIndexChange:A("zIndex")}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom");var Y=mstrmojo.css,F=mstrmojo.dom;var Z={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var c=this.value,b=this.inputNode,d=b.value,a=(c!==null&&c!==undefined)?String(c):"";if(a!==d&&(!this.keepEmpty||d!==this.emptyText)){b.value=a;}if(b.mstrmojoEmpty){Y.removeClass(b,[this.emptyClass]);b.mstrmojoEmpty=null;}}function X(){var a=this.inputNode;a.value=this.emptyText||"";Y.addClass(a,[this.emptyClass]);a.mstrmojoEmpty=true;}function N(){var a=this.inputNode;if(a){this.readingDom=true;this.set("value",a.value);this.readingDom=false;}}function U(a){var b=this;if(a===-1){N.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete b._lastTimeoutId;N.call(b);},a||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function S(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function O(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var a=this.inputNode;a.disabled=!this.enabled;Y.toggleClass(a,"disabled",!this.enabled);},onvalueChange:function P(){var a=this.value,b=(a===undefined)||(a===null)||(a==="");if(b){if(!this.hasFocus){X.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(F.isIE9){this.inputNode.type=b?"text":this.type;}},ontooltipChange:function R(){this.domNode.title=this.tooltip;},onreadOnlyChange:function H(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){Y.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function V(){this._super();var a=this.inputNode;a.setAttribute("autocomplete",this.autoComplete?"on":"off");a.setAttribute("autocorrect",this.autoCorrect?"on":"off");a.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");},focus:function Q(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(a){}}},prefocus:function M(){this.hasFocus=true;A.call(this);},blur:function T(){this.inputNode.blur();},preblur:function W(){window.setTimeout(function(){},200);this.hasFocus=false;N.call(this);var a=this.value;if(((a===null||a==="")&&this.emptyText)||(this.keepEmpty&&a===this.emptyText)){X.call(this);}},prekeyup:function I(b){var a=b.hWin,c=b.e||a.event;U.call(this,this.valueChangeDelay);var d=Z[c.keyCode];if(this["on"+d]){this["on"+d](b);}},preinput:function J(){U.call(this,this.valueChangeDelay);},prepaste:function K(){U.call(this);},precut:function G(){U.call(this);},setInvalidState:function C(a){this.set("textValid",true);if(a){this.domNode.setAttribute("title",a);}},cleanUp:function L(){this.inputNode.value="";this.set("textValid",false);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var B=mstrmojo.func,C=mstrmojo.dom,F="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function H(L){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);}this._super(L);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function D(){var L=this.getPopupWidget();if(!L||L._pbCfg){return ;}var M=function M(O,N){return function(){O.apply(N,arguments);};};L.onOpen=B.composite([M(this.onPopupWidgetOpened,this),L.onOpen||mstrmojo.emptyFn]);L.onClose=B.composite([M(this.onPopupWidgetClosed,this),L.onClose||mstrmojo.emptyFn]);L._pbCfg=true;},onclick:function K(L){var N=L.getTarget();if(N===this[this.anchorSlot]||N.parentNode===this[this.anchorSlot]){var M=this.getPopupWidget();if(!M.visible){this.openPopup(M);}else{this.closePopup();}}},onPopupAutoClosed:function I(M,L){if(C.contains(this[this.anchorSlot],C.eventTarget(L,M),true)){return false;}},getPopupHostNode:function J(){return this.containerNode;},getPopupConfig:function G(){var M=[F],L=this.hostedCSSClass;if(L){M.push(L);}return new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:M.join(" ")});},unrender:function E(L){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(L);},postBuildRendering:function A(){var P=this.getPopupWidget();if(P){var R=this.getPopupConfig();if(!R.isHostedWithin){var N=this.parent||this.opener,M=R.hostProxyCssClass.split(" ");M.push(this.domNode.className);while(N){var Q=N.themeClassName;if(Q){M.push(Q);break;}N=N.parent||N.opener;}R.hostProxyCssClass=M.join(" ");}P.popupConfig=P.addDisposable(R);}var L=P.id,O=this._listenerProc=function(){var S=mstrmojo.all[L];if(S&&S.visible&&S.adjustCornersForPopupOverflow){S.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){C.attachEvent(window,"resize",O);}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var M=mstrmojo.Widget,G=mstrmojo.dom,N=mstrmojo.global.document,C=50,B=500;mstrmojo.Stepper=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Stepper",orientation:"vertical",provider:null,title:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text">{@itemHtml}</div><div class="prev">-</div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},nextNode:function(){return this.domNode.children[1];},textNode:function(){return this.domNode.children[2];},prevNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:M.visibleMarkupMethod,onheightChange:M.heightMarkupMethod,onwidthChange:M.widthMarkupMethod,onenabledChange:function I(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},preBuildRendering:function J(){this.itemHtml=this.provider.renderItemAt();this._super();},processEvent:function A(O){if(G.contains(this.textNode,O)||O===this.titleNode){return ;}var Q=this.provider,P=((O===this.nextNode)?"Next":"Prev");if(Q["has"+P]()){Q[P.toLowerCase()]();this.updateDisplayText();}},updateDisplayText:function E(){this.textNode.innerHTML=this.provider.renderItemAt();},startStepperInterval:function F(O,P){var Q=this;this._holdTimer=setInterval(function(){Q[P](O);},C);},stopStepperInterval:function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}},onclick:function L(O){this.processEvent(O.e.target);},onmousedown:function D(O){if(!this._holdTimer&&!this._startHoldTimer){var P=this;this._startHoldTimer=setTimeout(function(){delete P._startHoldTimer;P.startStepperInterval(O,"onclick");},B);G.attachOneTimeEvent(N,"mouseup",function(){if(P._startHoldTimer){clearTimeout(P._startHoldTimer);delete P._startHoldTimer;}P.stopStepperInterval();},true);}},onselectstart:function K(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var D=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.TwoColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-TwoColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+D+'></div><div class="divider"'+D+'></div><div class="vi-col2"'+D+"></div></div>",markupSlots:{col1Node:function C(){return this.domNode.firstChild;},dividerNode:function B(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"40%",dividerNode:"5px",col2Node:"60%"},xt:true},shouldPropagateEnabled:true,col1Width:"40%",dividerWidth:"5px",col2Width:"60%",init:function F(G){this._super(G);var H=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),I=H.w;I.col1Node=this.col1Width;I.dividerNode=this.dividerWidth;I.col2Node=this.col2Width;},getControl:function E(G){return(this.children||[]).filter(function(H){return H.slot==="col"+G+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.color","mstrmojo.dom","mstrmojo.css","mstrmojo._HasOwnAvatar","mstrmojo.Container","mstrmojo.threshold.ThresholdModel");var Q=mstrmojo.color,F=mstrmojo.dom,I=mstrmojo.css;function G(T){var S=this.parent,R=S.width,U=Math.min(Math.max(T.last.x-F.position(this.domNode).x,0),R-1);return U/R;}mstrmojo.threshold.MarkersNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.threshold.MarkersNode",cssClass:"markers",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"  mstrAttach:click,mousedown,mouseover,mouseout></div>',markupSlots:{containerNode:function D(){return this.domNode;}},dropZone:true,draggable:true,avatarCssClass:"marker-drag-avatar",addMarker:function J(R){this.parent.parent.switchToCustomScheme();var V=this.parent,T=F.position(this.containerNode).w,S=V.getPalette(),X=V.addMarkerToMap(R/T),U=S.length;if(U===(X+1)){X--;}var Y=S[X+1],W=X===-1?Y:S[X];S.splice(X+1,0,Q.findMidColorHex(W,Y));V.update();},remove:function H(T){var S=this.parent.getComp(),R=this.parent.getPalette();S.splice(T,1);R.splice(T+1,1);},onclick:function O(S){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED&&S.getTarget()===this.domNode){var T=F.position(this.containerNode),R=S.e.clientX-T.x;this.addMarker(R);}},premousedown:function N(){this.parent.unselectAll();},createAvatar:function B(U,T){var S;for(S=0;S<this.children.length;S++){if(this.children[S].id===U.id){T.tgtNode=this.children[S];T.i=S;}}var R=U.cloneNode(true),V=document.createElement("div");I.addClass(V,"bar");R.appendChild(V);return R;},positionAvatar:function L(X){var R=this.avatar,T=R.style,V=this.restrictedToAxis,S=F.position(this.domNode),U=S.y;if(R){if(V!=="y"){var W=X.x;if(W<S.x){W=S.x;}if(W>S.x+S.w){W=S.x+S.w-1;}T.left=W-2+"px";}if(V!=="x"){T.top=U+"px";}}},isDragValid:function K(R){return R.src.node!==this.domNode;},ondragstart:function C(S){this._super(S);var R=this.parent.getComp();this.removeChildren(this.children[S.i]);R.splice(S.i,1);},ondragmove:function A(R){this._super(R);this.parent.editableBubble.showBubble(G.call(this,R));},ondragend:function E(T){var S=this.parent,R=S.addMarkerToMap(G.call(this,T));S.update();this.children[R].set("selected",true);this._super(T);},onmouseover:function P(S){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED&&!this._cursorAvatar){var V=document,U=this.domNode,T=this._cursorAvatar=V.createElement("div"),R=this._mouseMoveHandler=function(Z){var Y=F.eventTarget(self,Z),X=F.getMousePosition(Z,self),W=T.style;W.top=X.y+12+"px";W.left=X.x+12+"px";W.display=(Y===U&&mstrApp.isInteractive())?"block":"none";};V.body.appendChild(T);I.addClass(T,"mstrmojo-SimpleThresholdEditor add-cursor");F.attachEvent(U,"mousemove",R);}if(this._super){return this._super(S);}},onmouseout:function M(R){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED){F.detachEvent(this.domNode,"mousemove",this._mouseMoveHandler);var S=this._cursorAvatar;S.parentNode.removeChild(S);delete this._cursorAvatar;delete this._mouseMoveHandler;}if(this._super){return this._super(R);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var D=function(){var F=this.opener;if(F.direction.toLowerCase()==="up"){this.domNode.style.top=-F.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"19px",text:"",direction:"down",enabled:true,title:"",markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.text;},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function B(){if(this._super){this._super();}var F=this.popupRef;if(F){if(F.nudge){F.nudge=mstrmojo.func.composite([F.nudge,D]);}else{if(this.direction.toLowerCase()!=="down"){F.nudge=D;}}}},popupRef:null,popupOpenConfig:null,destroy:function C(F){var G=this.popupRef;if(G&&G.hasRendered){G.destroy(false);}if(this._super){this._super(F);}},togglePopup:function E(){var F=this._lastOpened;if(F&&F.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(F){this.togglePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var D=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.ThreeColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.ThreeColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ThreeColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+D+'></div><div class="divider1"'+D+'></div><div class="vi-col2"'+D+'></div><div class="divider2"'+D+'></div><div class="vi-col3"'+D+"></div></div>",markupSlots:{col1Node:function C(){return this.domNode.firstChild;},divider1Node:function H(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.childNodes[2];},divider2Node:function B(){return this.domNode.childNodes[3];},col3Node:function E(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"30%",divider1Node:"5px",col2Node:"30%",divider2Node:"5px",col3Node:"40%"},xt:true},shouldPropagateEnabled:true,col1Width:"30%",divider1Width:"5px",col2Width:"30%",divider2Width:"5px",col3Width:"40%",init:function G(I){this._super(I);var J=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),K=J.w;K.col1Node=this.col1Width;K.divider1Node=this.divider1Width;K.col2Node=this.col2Width;K.divider2Node=this.divider2Width;K.col3Node=this.col3Width;},getControl:function F(I){return(this.children||[]).filter(function(J){return J.slot==="col"+I+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var U=H.slot;if(!this[U]){var M=U&&U.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),V=parseInt(M[2],10),Q=this.containerNode,T=this[(B+R)],N=[];if(!T){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}T=N[B+R];}var P=T.cells&&T.cells.length||0;for(var K=P;K<=V;K++){var I=T.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.GraphMatrixHelper","mstrmojo.vi.viz.GoogleMapHelper","mstrmojo.vi.viz.ESRIMapHelper","mstrmojo.vi.viz.KnownVisualizations","mstrmojo.vi.util.ThresholdUtils","mstrmojo.gm.GMEnums");var N=mstrmojo,K=N.array,P=N.vi.viz,B=P.GraphMatrixHelper,A=P.EnumDSSDropZones,H=P.KnownVisualizations,I=N.vi.util.ThresholdUtils,L=mstrmojo.gm.EnumABLDirection;function C(Q){return Q&&Q.getHostModel&&Q.getHostModel();}function M(R){var Q=false;if(R.t!==4){K.forEach(R.fs||[],function(S){if(S.ftr||S.bftp===1||S.bftp===8||S.bftp===9){Q=true;return false;}});}return Q;}function F(m,V,q,Z,c){var U=q.dz,o=q.gsi||{},R=[],W=false,Q=false,S=false,a=function(s){return s.shape==="Pie"||s.shape==="Ring";},l=function(){var s=Z.getHost();return s&&s.GMController&&s.GMController.isBubbleOrScatter();},h=function(s,w){R.push({act:"addDropZoneUnit",zoneId:s,datasetId:V,unitId:m.did,unitType:m.t,unitPos:w||0});W=true;S=(s===A.ColorBy);Q=(s===A.AdditionalMetrics);var v=["Reserved","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy"],u=v[s],t=m.t===4?"TemplateMetric":"TemplateUnit";if(U[u]){if(!U[u][t]){U[u][t]=[];}U[u][t].push(m);}},g=function(s,t){R.push({act:"removeDropZoneUnit",zoneId:s,unitId:t.did,unitType:t.t});},k=function(s){R.push({act:"addDropZoneUnit",zoneId:s,unitId:"00000000000000000000000000000000",unitType:0});},n=new P.GraphMatrixHelper({data:q}),p=function(s){if(!n.shape){n.shape=s;c=true;}},X=function(s,y){h(s,y);if(!n.metricsDropZone){if(s===A.XAxis&&n.xAxisObjects.length){k(A.Columns);}else{if(s===A.YAxis&&n.yAxisObjects.length){k(A.Rows);}}}var v=Z.getHost(),w=v.GMController,u,x=w.getChartInfo(),t={dndGM:false};if(w.shallWeUseGroupInfo){u=w.getGroupInfo();if((x.dirc===L.VERTICAL&&s===A.YAxis)||(x.dirc===L.HORIZONTAL&&s===A.XAxis)){u=Z.fillGroupInfo(t,u,m.did,true);}w.setGroupInfo(u);c=true;}};n.setData(q.dz);n.setMetricsDropZone(q.dz);if(m.t===4){if(n.exists(m,"yAxisObjects")||n.exists(m,"xAxisObjects")||n.exists(m,"sizeByObjects")||n.exists(m,"colorByObjects")||n.exists(m,"angleObjects")){var j=!n.exists(m,"yAxisObjects")&&!n.exists(m,"xAxisObjects");if(j&&(!n.yAxisObjects.length||n.yAxisObjects[0].t===4)){X(A.YAxis);}else{if(j&&(!n.xAxisObjects.length||n.xAxisObjects[0].t===4)){X(A.XAxis);}else{if(!n.angleObjects.length&&a(n)){h(A.Angle);}else{if(!n.colorByObjects.length){h(A.ColorBy);}else{if(!n.sizeByObjects.length||(!n.exists(m,"sizeByObjects")&&l())){h(A.SizeBy);}}}}}}else{if(!n.angleObjects.length&&a(n)){h(A.Angle);}else{if((!n.yAxisObjects.length)&&(!n.xAxisObjects.length)){X(A.YAxis);p(B.PROP_SHAPE_BAR);}else{if(n.yAxisObjects.length&&!n.xAxisObjects.length){if(!n.exists(m,"yAxisObjects")){X(A.XAxis);p(Z.isMetricZone(A.YAxis)?B.PROP_SHAPE_CIRCLE:B.PROP_SHAPE_BAR);}}else{if((!n.yAxisObjects.length)&&n.xAxisObjects.length){if(!n.exists(m,"xAxisObjects")){X(A.YAxis);p(Z.isMetricZone(A.XAxis)?B.PROP_SHAPE_CIRCLE:B.PROP_SHAPE_BAR);}}else{if((n.xAxisObjects[0].t!==4)&&(n.yAxisObjects[0].t===4)&&!n.exists(m,"yAxisObjects")&&!n.exists(m,"sizeByObjects")&&!n.exists(m,"colorByObjects")){X(A.YAxis);if(n.metricsDropZone!==B.PROP_COLUMNS&&n.metricsDropZone!==B.PROP_ROWS&&(!n.colorByObjects.length||n.colorByObjects[0].t!==4)){k(A.ColorBy);}}else{if((n.xAxisObjects[0].t===4)&&(n.yAxisObjects[0].t!==4)&&!n.exists(m,"xAxisObjects")&&!n.exists(m,"sizeByObjects")&&!n.exists(m,"colorByObjects")){X(A.XAxis);if(n.metricsDropZone!==B.PROP_COLUMNS&&n.metricsDropZone!==B.PROP_ROWS&&(!n.colorByObjects.length||n.colorByObjects[0].t!==4)){k(A.ColorBy);}}else{if((n.xAxisObjects[0].t===4)&&(n.yAxisObjects[0].t===4)&&!n.exists(m,"xAxisObjects")&&!n.exists(m,"yAxisObjects")&&!n.exists(m,"sizeByObjects")&&!n.exists(m,"colorByObjects")){if(!n.colorByObjects.length&&n.metricsDropZone!==B.PROP_COLORBY){h(A.ColorBy);}else{if(!n.sizeByObjects.length&&n.shape!=="Area"){h(A.SizeBy);}else{if(n.xAxisObjects.length===1){X(A.XAxis);}else{if(n.yAxisObjects.length===1){X(A.YAxis);}else{if(n.sizeByObjects.length===1&&n.shape!=="Area"){h(A.SizeBy);}else{if(!n.exists(m,"tooltipMetrics")){h(A.AdditionalMetrics);}}}}}}}else{if(!n.colorByObjects.length&&n.metricsDropZone!==B.PROP_COLORBY){h(A.ColorBy);}else{if(!n.sizeByObjects.length){h(A.SizeBy);}else{if(!n.exists(m,"tooltipMetrics")){h(A.AdditionalMetrics);}}}}}}}}}}if((!Q)&&W){if(n.exists(m,"tooltipMetrics")){var f=K.find(n.tooltipMetrics,"did",m.did);if(f>-1){n.tooltipMetrics.splice(f,1);g(A.AdditionalMetrics,m);}}}}if(W&&S){var e=Z.getHost();I.addThresholds(e.model,e,e.node,m,R);}}else{if((o.rows||[]).concat(o.cols||[]).some(function(s){return s.did===m.did;})){if(!n.colorByObjects.length||(n.colorByObjects[0].t!==4&&!n.exists(m,"colorByObjects"))){h(A.ColorBy);}}else{if(!n.sliceObjects.length&&a(n)){h(A.SliceBy);if(!n.colorByObjects.length){h(A.ColorBy);}}else{if((!n.yAxisObjects.length)&&(!n.xAxisObjects.length)){h(A.XAxis);p(M(m)?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((n.yAxisObjects.length)&&(!n.xAxisObjects.length)){h(A.XAxis);p(M(m)&&n.yAxisObjects[0]===4?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((!n.yAxisObjects.length)&&(n.xAxisObjects.length)){h(A.YAxis);p(M(m)&&n.xAxisObjects[0]===4?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((n.xAxisObjects[0].t!==4)&&(n.yAxisObjects[0].t===4)){if(!n.colorByObjects.length){h(A.ColorBy);if(!n.exists(m,"breakByObjects")){h(A.BreakBy);}}else{h(A.Columns);}}else{if((n.xAxisObjects[0].t===4)&&(n.yAxisObjects[0].t!==4)){if(!n.colorByObjects.length){h(A.ColorBy);if(!n.exists(m,"breakByObjects")){h(A.BreakBy);}}else{h(A.Rows);}}else{if((n.xAxisObjects[0].t!==4)&&(n.yAxisObjects[0].t!==4)){h(A.Columns);}else{if((n.xAxisObjects[0].t===4)&&(n.yAxisObjects[0].t===4)){if(!n.colorByObjects.length){h(A.ColorBy);if(!n.exists(m,"breakByObjects")){h(A.BreakBy);}}else{if(!n.columnObjects.length&&n.rowObjects.length&&n.rowObjects[0].t!==4){h(A.Rows);}else{h(A.Columns);}}}}}}}}}}}}var Y=[];if(R.length){var d=Z.getUpdateTemplateAction(R);var T=Z.docModel,i=T.controller.view.builder,b=i.getLayoutVIMap(T.getCurrentLayoutKey()).getComponent(mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK);if(b){d.partialRetrieval.nodes.push(b.k);}Y.push(d);}if(c){Y.push({act:"setProperty",nodeKey:q.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(n.getXml())});}if(Y.length){Z.clearCardinalityFlags();Z.findLargeItemsForAddUnits([m]);}return Y;}function J(T,V,U,Q){var R,S=true;function W(a,c,Z){var b=Q.getZoneModelByZoneId(a);if(Q.getUnitIndexInZone(b,T)===-1&&(!Z||Z(b))){var Y=c?0:b.items.length;R=Q.getAddItemActions(b,[T],Y,false,c?b.items[Y]:null,V);b.items.push(T);return false;}return true;}function X(Y){return Y.items.length===0;}if(!Q.isMetric(T)){S=W(A.ColorBy,false,function(Y){return X(Y)&&Q.getItemCountInZone(A.Grouping)>=2;});S=S&&W(A.Grouping);if(R){Q.clearCardinalityFlags();Q.findLargeItemsForAddUnits([T]);}}else{S=W(A.ColorBy,false,X);S=S&&W(A.SizeBy,false,X);S=S&&W(A.SizeBy,true,function(Y){return Y.items[0].did===Q.getZoneModelByZoneId(A.ColorBy).items[0].did;});S=S&&W(A.AdditionalMetrics,false,function(){return Q.getUnitIndexInZone(Q.getZoneModelByZoneId(A.SizeBy),T)===-1&&Q.getUnitIndexInZone(Q.getZoneModelByZoneId(A.ColorBy),T)===-1;});}return R?[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)]:[];}function D(S,U,T,Q){var R=null,V=!Q.isMetric(S)?[A.FromItem,A.ToItem]:[A.ColorBy,A.ItemSize,A.SizeBy];K.forEach(V,function(W){var X=Q.getZoneModelByZoneId(W);if(X.items.length===0){R=Q.getAddItemActions(X,[S],0,U);X.items.push(S);return false;}});if(R){Q.clearCardinalityFlags();Q.findLargeItemsForAddUnits([S]);return[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)];}return[];}function G(S,U,T,Q){var R=null,V=!Q.isMetric(S)?[A.GeoAttribute,A.Layout]:[A.ColorBy,A.SizeBy,A.AdditionalMetrics];K.forEach(V,function(W){var X=Q.getZoneModelByZoneId(W);if((W===A.AdditionalMetrics||X.items.length===0)&&Q.isZoneAvalaible(W)){R=Q.getAddDropZoneUnitsActions(X,[S],0,{datasetId:U});return false;}});return R?[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)]:[];}function E(h,V,k,Z,S){var i=k.gsi||{},Y=Z.getHost(),a=[],c=false,e=Z.getZoneModelByZoneId(A.ColorBy),f=Z.getZoneModelByZoneId(A.SizeBy),T=Z.getZoneModelByZoneId(A.AdditionalMetrics),g=mstrmojo.vi.viz,b=g.MapHelper,W=false,X=function(p,o,n,q){if(p){a.push(Z.getUpdateTemplateAction([{act:"addDropZoneUnit",zoneId:n,unitId:p,unitType:o,datasetId:q}]));if(n===A.ColorBy){a.push(Z.getUpdateTemplateAction(I.addThresholds(Y.model,Y,Y.node,h)));}}switch(n){case A.GeoAttribute:S.geoAttribute=p;break;case A.Latitude:S.latitude=p;break;case A.Longitude:S.longitude=p;break;case A.ColorBy:S.colorBy=p;break;case A.SizeBy:S.sizeBy=p;break;case A.AdditionalMetrics:S.tooltip.push(p);break;}W=true;},m=function(p,o,n){if(p){a.push(Z.getUpdateTemplateAction([{act:"removeDropZoneUnit",zoneId:n,unitId:p,unitType:o}]));}switch(n){case A.geoAttribute:S.geoAttribute="";break;case A.Latitude:S.latitude="";break;case A.Longitude:S.longitude="";break;case A.ColorBy:S.colorBy="";break;case A.SizeBy:S.sizeBy="";break;case A.AdditionalMetrics:S.tooltip=K.filter(S.tooltip,function(q){return q!==p;},{max:S.tooltip.length});break;}},j=function(n,o){a.push(Z.getUpdateTemplateAction({act:"addForm",unitId:n,attFormId:o,unitPos:1}));};S.setWidget(Y);K.forEach((i.rows||[]).concat(i.cols||[]),function(n){if(n.did===h.did){c=true;return false;}});if(c){return[];}switch(h.t){case 4:if(e&&!e.items.length){X(h.did,h.t,A.ColorBy,V);}else{if(f&&!f.items.length){X(h.did,h.t,A.SizeBy,V);}else{if(T){X(h.did,h.t,A.AdditionalMetrics,V);}}}break;default:var Q=!S.geoAttribute&&!S.latitude&&!S.longitude,R=S.getGeoForm(h,function(n){return b.isGeoRoleSupportArea(n.fgr);}),d=function(){var n=S.mapType,o=S.tooltip;if(!b.canShowSizeByZone(n)&&S.sizeBy&&o.indexOf(S.sizeBy)<0){X(S.sizeBy,4,A.AdditionalMetrics);m(S.sizeBy,4,A.SizeBy);}if(!b.canShowColorByZone(n)&&S.colorBy&&o.indexOf(S.colorBy)<0){X(S.colorBy,4,A.AdditionalMetrics);m(S.colorBy,4,A.ColorBy);}};if(Q&&S.supportAreaMap&&R){S.setMapType(b.MTP_AREA);S.setUseAttributeForm(false);X(h.did,h.t,A.GeoAttribute,V);j(h.did,R.fid);}else{var U=S.getLatitudeForm(h),l=S.getLongitudeForm(h);if(U&&l&&Q){X(h.did,h.t,A.GeoAttribute,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(true);j(h.did,U.fid);j(h.did,l.fid);X(U.fid,21,A.Latitude,V);X(l.fid,21,A.Longitude,V);}else{if((U||b.isLatitude(h.n))&&(!l&&!b.isLongitude(h.n))&&!S.geoAttribute&&!S.latitude){X(h.did,h.t,A.Latitude,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(false);}else{if((!U&&!b.isLatitude(h.n))&&(l||b.isLongitude(h.n))&&!S.geoAttribute&&!S.longitude){X(h.did,h.t,A.Longitude,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(false);}else{if(S.tooltip.indexOf(h.did)<0){X(h.did,h.t,A.AdditionalMetrics,V);}}}}}if(W){d();}break;}if(W){a.push({act:"setProperty",nodeKey:k.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(S.getXml())});}return a;}function O(b,U,T,Z){var Y=T.gsi||{},c=Y.rows||[],W=Y.cols||[],V=Y.mx||[],S=[],R,X,Q,a;Z.clearCardinalityFlags();if(K.find(c.concat(W).concat(V),"did",b.did)===-1){a=!!K.filterOne(W,function(d){return d.t!==4;});Q=!!K.filterOne(c,function(d){return d.t!==4;});if(b.t===4){R=-1;if(V.length===0){if(!Q&&!!a){R=1;X=c.length;}else{R=2;X=W.length;}}X=V.length;}else{if(a&&!Q){R=2;X=W.length;Z.findLargeItemsForAddUnits([b]);Z.findTotalColumnCount([b],null);}else{R=1;X=c.length;}}S.push({act:"updateTemplate",keyContext:T.k,actions:[Z.getHost().model.getAddTemplateUnitAction(b,U,R,X)]});}return S;}mstrmojo.vi.models.DatasetDoubleClick=mstrmojo.provide("mstrmojo.vi.models.DatasetDoubleClick",{addObject:function(X,S,W){var R=C(W),Q=[],V=W.getHost();if(!X||!R){return Q;}var Y=R.visName||"Grid";switch(H.getDefinition(Y).id){case H.GRAPHMATRIX:Q=F(X,S,R,W);break;case H.ESRIMAP:Q=E(X,S,R,W,new P.ESRIMapHelper({data:R}));break;case H.GOOGLEMAP:Q=E(X,S,R,W,new P.GoogleMapHelper({data:R}));break;case H.HEATMAP:Q=J(X,S,R,W);break;case H.NETWORK:Q=D(X,S,R,W);break;case H.IMAGELAYOUT:Q=G(X,S,R,W);break;case H.CUSTOM:Q=(W.getCustomDropZones&&W.getCustomDropZones())?[]:O(X,S,R,W);break;default:Q=O(X,S,R,W);break;}if(S!==R.datasetId){var U=W.getHost().model.data.gsi;var T=U?(U.rows||[]).concat(U.cols||[]).concat(U.mx||[]):[];if(S&&(Q.length||mstrmojo.array.find(T,"did",X.did)!==-1)){Q.push({act:"editNode",nodeKey:V.k,datasetId:S});}}return Q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.date");var A=mstrmojo.date;mstrmojo.DateStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.DateStepperContentProvider",curVal:null,init:function(F){this._super(F);var G=this.item,E=G[this.intField],I=G[this.valField],H=this.minField,D=this.maxField,C=G[H],B=G[D];this.min=C&&A.getDateFromDateInfo(C);this.max=B&&A.getDateFromDateInfo(B);this.curVal=I?A.getDateFromDateInfo(I):(this.min?new Date(this.min):new Date());this.createChildProviders();},createChildProviders:function(){var B=this;mstrmojo.array.forEach(["year","month","day"],function(C){B[C+"CP"]=new mstrmojo.NumStepperContentProvider({item:{interval:1},canLoop:true,updateConfig:function(E,D,F){this.curVal=E;this.max=D;this.min=F;},onTraverse:function(){B.traverse(C,this.curVal);}});});this.updateChildProviders();},updateChildProviders:function(){var I=this.max,D=this.min,G=this.curVal.getFullYear(),F=this.curVal.getMonth(),H=this.curVal.getDate(),C=I&&(G===I.getFullYear()),E=D&&(G===D.getFullYear()),J=C&&(F===I.getMonth()),B=E&&(F===D.getMonth());this.yearCP.updateConfig(G,I?I.getFullYear():null,D?D.getFullYear():null);this.monthCP.updateConfig(F+1,C?I.getMonth()+1:12,E?D.getMonth()+1:1);this.dayCP.updateConfig(H,J?I.getDate():mstrmojo.date.getDaysOfMonth(G,F+1),B?D.getDate():1);},traverse:function(E,D){var C=this.curVal,G=(E==="year")?D:this.curVal.getFullYear(),B=(E==="month")?D:this.curVal.getMonth()+1,F=(E==="day")?D:this.curVal.getDate();F=Math.min(mstrmojo.date.getDaysOfMonth(G,B),F);C.setFullYear(G,B-1,F);if(this.max){C=Math.min(this.max,C);}if(this.min){C=Math.max(this.min,C);}this.curVal=new Date(C);this.updateChildProviders();if(this.onTraverse){this.onTraverse();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.num","mstrmojo.array");var A=mstrmojo.num,E=mstrmojo.array;var C="?";function B(H,G){var J=G?H.max:H.min,F=G?H.min:H.max,I=H.getValGroup(G?1:-1);return(J===null||(G?(I.every(function(K){return K<=J;})):(I.every(function(K){return K>=J;})))||(F!==null&&H.canLoop));}function D(I,H){var G=I.min,F=I.max,J=I.getValGroup(H?1:-1)||[];if((H&&F!==null&&J.some(function(K){return K>F;})||(!H&&G!==null&&J.some(function(K){return K<G;})))){if(I.canLoop){J.forEach(function(L,K){L=((L-G)%(F-G+1))+G;L=(L>=G)?L:L+(F-G+1);J[K]=L;});}else{return ;}}I.item[I.valField]=I.curValGroup=J;I.onTraverse();}mstrmojo.NumGroupStepperContentProvider=mstrmojo.declare(mstrmojo.NumStepperContentProvider,null,{scriptClass:"mstrmojo.NumGroupStepperContentProvider",curValGroup:null,init:function(F){this._super(F);},_initCurrent:function(){var H=this.item,F=this.curValGroup=H[this.valField];if(F===null||F===undefined){var G=this.min;this.curValGroup=G!==null?[G]:0;}this.curValGroup=E.ensureArray(this.curValGroup);},next:function(){D(this,true);},prev:function(){D(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},getValGroup:function(I){var F=this.curValGroup,G=this.interval,H=[];(F||[]).forEach(function(K,J){H[J]=F[J]+(G*(I||0));});return H;},getVal:function(){var F=null;(this.curValGroup||[]).forEach(function(G){if(F===null){F=G;}else{if(F!==C&&G!==F){F=C;}}});return F;},setVal:function(H){var I=this.min,G=this.max,F=this.curValGroup;if(typeof H!=="number"||isNaN(H)||A.inNumericRange(H,I,G)!==0){return ;}(F||[]).forEach(function(K,J){F[J]=H;});this.onTraverse();},_set_curValGroup:function(J,I){var H=this.min,G=this.max,F=this.getValGroup();if(I.some(function(K){return typeof K!=="number";})||I.some(function(K){return isNaN(K);})||I.every(function(L,K){return L===F[K];})||I.every(function(K){return A.inNumericRange(K,H,G)!==0;})){return false;}this.item[this.valField]=this.curValGroup=I;return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.array","mstrmojo.date","mstrmojo.Stepper","mstrmojo.android.ui.Button","mstrmojo.DateStepperContentProvider","mstrmojo.NumStepperContentProvider");var U=mstrmojo.array,Q=mstrmojo.date,L=mstrmojo.hash,R=mstrmojo.android.ui.Button.newButton,I=mstrmojo.expr.DTP,D={interval:1},G={min:1,max:12,interval:1,value:12},N={min:0,max:23,interval:1,value:0},E={min:0,max:59,interval:1};function C(){var W=this.dtp,Z=this.stepperClass,X=this[this.valueField],M=[],Y,H;if(this._hasDate){M.push({scriptClass:Z,slot:"monthNode",alias:"monthStepper",title:mstrmojo.desc(871,"month"),provider:this.dateProvider.monthCP},{scriptClass:Z,slot:"dayNode",alias:"dayStepper",title:mstrmojo.desc(872,"day"),provider:this.dateProvider.dayCP},{scriptClass:Z,slot:"yearNode",alias:"yearStepper",title:mstrmojo.desc(873,"year"),provider:this.dateProvider.yearCP});}if(this._hasTime){M.push({scriptClass:Z,slot:"hourNode",alias:"hourStepper",provider:this.hourProvider},{scriptClass:Z,slot:"minNode",alias:"minStepper",provider:this.minProvider});}if(!this.hideSwitchers){if(W!==I.TIME){Y=(X&&X.date)?Q.formatDateInfo(X.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT):mstrmojo.desc(2052,"Date");M.push(R(Y,function(){this.parent.toDateView();},{alias:"dateToggle",slot:"switcherNode",cssClass:"",selected:true}));}if(W!==I.DATE){H=(X&&X.time)?Q.formatTimeInfo(X.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT):mstrmojo.desc(2170,"Time");M.push(R(H,function(){this.parent.toTimeView();},{alias:"timeToggle",slot:"switcherNode",cssClass:"",selected:W==I.TIME}));}}if(this._hasDate){this.viewCssClass="dateView";}else{if(this._hasTime){this.viewCssClass="timeView";}}this.addChildren(M);}function P(){var a=[this.valueField,"min","max"],M=L.copy(D),Z=this.is24HourMode?L.copy(N):L.copy(G),Y=L.copy(E),X=this[this.valueField],H=X&&X.time,W=this;U.forEach(a,function(b){M[b]=L.copy(W[b]);});if(this._hasDate){this.dateProvider=new mstrmojo.DateStepperContentProvider({item:M,valField:this.valueField,canLoop:true,onTraverse:function(){W.updateDate();}});}if(this._hasTime){if(this.minuteInterval!==undefined){Y.interval=this.minuteInterval;}delete this.minuteInterval;if(H){if(!this.is24HourMode){Z.value=H.hour%12||12;this.set("meridiem",(H.hour<12));}else{Z.value=H.hour;}Y.value=H.min;}this.hourProvider=new mstrmojo.NumStepperContentProvider({item:Z,valField:"value",canLoop:true,onTraverse:function(){W.updateTime();}});this.minProvider=new mstrmojo.NumStepperContentProvider({item:Y,valField:"value",canLoop:true,renderer:{render:function(b){return String(b).length===1?("0"+b):b;}},onTraverse:function(){W.updateTime();}});}}mstrmojo.DateTimePicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DateTimePicker",value:null,min:null,max:null,meridiem:true,hideSwitchers:false,minuteInterval:null,is24HourMode:false,dtp:mstrmojo.expr.DTP.TIMESTAMP,viewCssClass:"",valueField:"value",stepperClass:"mstrmojo.Stepper",markupString:"<div id='{@id}' class='mstrmojo-DateTimePicker' style='{@cssText}'><div class='switcher'></div><div class='{@viewCssClass}'><span class='stepNode month'></span><span class='stepNode day'></span><span class='stepNode year'></span><span class='stepNode hour'></span><span class='stepNode min'></span><span class='meridiem' mstrAttach:click></div></div></div>",markupSlots:{switcherNode:function(){return this.domNode.firstChild;},viewNode:function(){return this.domNode.children[1];},monthNode:function(){return this.domNode.children[1].children[0];},dayNode:function(){return this.domNode.children[1].children[1];},yearNode:function(){return this.domNode.children[1].children[2];},hourNode:function(){return this.domNode.children[1].children[3];},minNode:function(){return this.domNode.children[1].children[4];},meridiemNode:function(){return this.domNode.children[1].children[5];}},markupMethods:{onmeridiemChange:function(){if(this.is24HourMode){this.meridiemNode.display="none";}else{this.meridiemNode.innerHTML=this.meridiem?mstrmojo.locales.datetime.AM_NAME:mstrmojo.locales.datetime.PM_NAME;}},onviewCssClassChange:function(){this.viewNode.className=this.viewCssClass;}},init:function O(M){this._super(M);var H=this.dtp;this._hasDate=(H===I.DATE||H===I.TIMESTAMP);this._hasTime=(H===I.TIME||H===I.TIMESTAMP);P.call(this);C.call(this);},getDateTime:function B(){return{date:this.getDate(),time:this.getTime()};},getDate:function F(){if(this._hasDate){var H=this.dateProvider.curVal;return{year:H.getFullYear(),month:H.getMonth()+1,day:H.getDate()};}return null;},getTime:function S(){if(this._hasTime){return{hour:!this.is24HourMode?Q.capitalHour(this.hourProvider.curVal,this.meridiem?" AM":" PM"):this.hourProvider.curVal,min:this.minProvider.curVal};}return null;},getDateTimeString:function K(){var H="";if(this._hasDate){H+=Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT);}if(this._hasDate&&this._hasTime){H+=" ";}if(this._hasTime){H+=Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return H;},updateDate:function A(){if(this.hasRendered){var H=this;U.forEach(["year","month","day"],function(M){H[M+"Stepper"].updateDisplayText();});}if(this.dateToggle){this.dateToggle.set("text",Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}},updateTime:function J(){if(this.timeToggle){this.timeToggle.set("text",Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}},toDateView:function T(){this.set("viewCssClass","dateView");this.dateToggle.set("selected",true);var H=this.timeToggle;if(H){H.set("selected",false);}},toTimeView:function V(){this.set("viewCssClass","timeView");var H=this.dateToggle;if(H){H.set("selected",false);}this.timeToggle.set("selected",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasBuilder");mstrmojo.ToolBar=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder],{scriptClass:"mstrmojo.ToolBar",cellCssClass:"mstrmojo-ToolBar-cell",markupString:'<table id="{@id}" class="mstrmojo-ToolBar {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-ToolBar-outercell"><table class="mstrmojo-ToolBar-innertable" cellspacing="0" cellpadding="0"><tr>{@tableHtml}</tr></table></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0].firstChild.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildChildren:function A(){var B=this.buildConfig;if(!B){this.buildConfig={};B=this.buildConfig;}B.target=this.target;return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(L){if(L){return ;}var J=this.visible,K=J?"block":"none";this.editorNode.style.display=K;if(this.modal){this.curtainNode.style.display=K;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function F(){var J;var K=this.buttons;if(K&&!this.btnHbox){for(J in K){K[J].cssClass=(K[J].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:K},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function B(){var J=this.placeholder;if(this._super()){if(!this.parent&&!J){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function E(){var J=this.id;return function(){var K=mstrmojo.all[J];K.resizeDialog();K.positionDialog();};},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var K=this._resizeHandler=this.getResizeHandler();D.attachEvent(window,"resize",K);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(J){}return true;},resizeDialog:function G(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function C(){var K=this,O=K.curtainNode,J=document.body,M=document.documentElement,N=O.style,L=K.curtainPosition;N.width=Math.max(J.clientWidth,M.scrollWidth)+"px";if(L&&L.h){N.height=L.h+"px";}else{N.height=Math.max(J.clientHeight,M.scrollHeight)+"px";}if(L&&L.y){N.top=L.y+"px";}K.raiseEvent({name:"resizeCurtain"});},positionDialog:function H(){var K=this.editorNode,M=this.left,L=this.top;if(!M||!L){D.center(K);var J=K.style;if(this.alignment==="top"){J.top="10px";}if(M){J.left=M;}if(L){J.top=L;}}},destroy:function(K){var J=this._resizeHandler;if(J){D.detachEvent(window,"resize",J);}this._super(K);}});mstrmojo.toast=function I(O,M,Q,J){var P="mojoToast9",N,L=M||3000;if(J&&J.id){P=J.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(K){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.Label",cssClass:(J&&J.cssClass)?J.cssClass:"toastCss",text:O}).render();N=mstrmojo.all[P].domNode;if(J&&J.dom){J.dom.appendChild(N);}else{document.body.appendChild(N);D.bottomCenter(N);}window.setTimeout(function(){if(Q){Q();}try{mstrmojo.all[P].destroy();}catch(R){}},L);};mstrmojo.mask={show:function(){var J=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});J.render();document.body.appendChild(J.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}if(H&&H.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(H&&H.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,getLayoutOffsets:function B(){return{h:2,w:2};},anchorSlot:"clickableNode",updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(D){this._super(D);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}this.cssClass=C.cssClass||"";this.addChildren(C.contents);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-MenuPopup");},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasOwnAvatar","mstrmojo.css","mstrmojo.dom");var E=mstrmojo.css,D=mstrmojo.dom;function F(K){var L=K.src.node,M=this.children.filter(function(N){return D.contains(N.domNode,L,true,this.domNode);});return M[0];}function J(K){var N=K.tgt,V=this.children,R=D.getMousePosition(N.e,N.hWin),Q,S,U,M,T,P,L=R.y;for(var O=V.length-1;O>=0;O--){U=V[O];Q=D.position(U.domNode);T=Q.h;M=Q.y;P=M+T/2;if(P<L&&(O===V.length-1||L<=M+T)){S=O;break;}else{if((O===0||M<L)&&L<=P){S=O-1;break;}}}return S;}function I(K){return K===-1?"top":"bottom";}mstrmojo.threshold.ThresholdRowPanel=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.threshold.ThresholdRowPanel",dropZone:true,draggable:true,restrictedToAxis:"y",avatarCssClass:"threshold-drag-avatar",getDragData:function H(K){return{row:F.call(this,K)};},createAvatar:function B(M,L){var K=L.src.data.row.domNode.cloneNode(true);K.style.left=D.position(this.domNode).x+"px";return K;},isDragValid:function G(K){var L=K.getCtxtDragData().row;return !(this.children.length===1||!L||L.draggableNode!==K.src.node)||this._super(K);},ondragstart:function(K){this._super(K);this.removeChildren(K.getCtxtDragData().row);},ondragmove:function A(M){var O=M.getCtxtDragData(),N=this.children,L=J.call(this,M);var K=O.lastRowIdx;if(K!==L){if(K!==undefined){E.removeClass(N[Math.max(K,0)].domNode,I(K));}E.addClass(N[Math.max(L,0)].domNode,I(L));O.lastRowIdx=L;}this._super(M);},ondragend:function C(L){var M=L.src.data,K=M.lastRowIdx;if(K!==undefined){E.removeClass(this.children[Math.max(K,0)].domNode,I(K));}this._super(L);this.parent.parent.model.moveThreshold(L.getCtxtDragData().row.idx,K+1);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.css");var B=mstrmojo.css;mstrmojo.vi.ui.editors.EditorGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},showDivider:true,isNested:false,isContainer:false,init:function D(E){this._super(E);B.addWidgetCssClass(this,["mstrmojo-vi-EditorGroup","ctrl-group"]);},preBuildRendering:function A(){var E=[];if(this.showDivider){E.push("divide");}if(this.isContainer){E.push("container");}if(E.length){B.addWidgetCssClass(this,E);}return this._super();},getLayoutOffsets:function C(){return{h:0,w:this.isNested?0:18};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui._HasScroller","mstrmojo.css");var B=mstrmojo.css;mstrmojo.ui.ColumnContainer=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnContainer {@cssClass}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.firstChild;}},markupMethods:{onnextChange:function A(){B.toggleClass(this.domNode,"hasNext",!!this.next);}},active:false,next:null,idx:undefined,updateColumnContainer:function D(){var E=this.next;if(E){E.updateColumnContainer();}},onactiveChange:function C(){B.toggleClass(this.domNode,"active",this.active);var E=this.next;if(E){E.updateColumnContainer();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui.PopupConfig","mstrmojo.css");mstrmojo.ui.editors.ToolbarPopup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.ToolbarPopup",popupConfig:null,anchorElement:null,autoCloses:false,locksHover:true,init:function B(C){this._super(C);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ToolbarPopup");this.popupConfig=new mstrmojo.ui.PopupConfig({isHostedWithin:false,hostProxyCssClass:(mstrApp&&mstrApp.getThemeClassName())||"",anchorElement:this.anchorElement});},open:function A(D,C){D.closePopup();this._super(D,C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui.editors._HostsControls","mstrmojo._HasLayout","mstrmojo.css");mstrmojo.ui.editors.controls.ControlGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui.editors._HostsControls,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.ControlGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},shouldPropagateEnabled:true,init:function A(B){this._super(B);mstrmojo.css.addWidgetCssClass(this,"ctrl-group");}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ui.editors.controls.ControlGroup,{onenabledChange:mstrmojo.Container.enabledMarkupMethod});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.TextBox");var A=mstrmojo.css,C=mstrmojo.dom;mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur></textarea>',maxLength:256,onkeydown:function B(K){var I=this.inputNode,J=this.value,E=this.maxLength,F=(J&&J.length)||0,M=K.e,L=M.keyCode;this.isDeleteKeys=L===8||L===46;this.isArrowKeys=L===37||L===38||L===39||L===40;if(E!==undefined&&E<=F){var G=I.selectionEnd,H=(G!==undefined)?(G-I.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!H){if(C.isIE7||C.isIE8||C.isIE9){I.blur();window.setTimeout(function(){I.focus();},1);}C.preventDefault(window,M);return false;}}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextArea,{oncssClassChange:function D(){A.addClass(this.domNode,this.cssClass||"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo.hash");var A="mstrmojo-TextBoxWithLabel";mstrmojo.TextBoxWithLabel=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextBoxWithLabel",label:"",rightLabel:"",cssDisplay:"inline",type:"text",markupString:'<div class="'+A+' {@cssClass}" style="{@cssText}"><span class="mstrmojo-TextBox-label">{@label}</span><input id="{@id}" class="mstrmojo-TextBox {@inputNodeCssClass}"  style="{@inputNodeCssText}" title="{@tooltip}" type="{@type}" value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur/><span class="mstrmojo-TextBox-label-right">{@rightLabel}</span></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild.nextSibling;},lblNode:function(){return this.domNode.firstChild;}}});mstrmojo.TextBoxWithLabel.prototype.markupMethods=mstrmojo.hash.copy({oncssClassChange:function(){var B=this.cssClass;this.domNode.className=A+(B?" "+B:"");},onlabelChange:function(){this.lblNode.innerText=this.label||"";}},mstrmojo.hash.copy(mstrmojo.TextBoxWithLabel.prototype.markupMethods));}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(I.ttp||I.n);},showTooltip:function G(W,M){var O=this;if(!O.hasOpenTooltip&&!(O._lastOpened&&O._lastOpened.visible)){var b=E.eventTarget(M,W),X=O.getItemFromTarget(b),R=O.getItemNodeFromTarget(b),d=O.getTooltipText(X),N=O.tooltipCss;if(!d){return ;}var c=E.position(R),V,P,L,T="",U=O.tooltipOffset;if(this.tooltipOrientation==="vertical"){V=c.x+c.w/2;L=C.POS_TOPCENTER;P=c.y+c.h+U;O.tooltipCss=F.copy({cssClass:"vi-regular vi-tooltip-A A-center"},N);}else{var K=E.windowDim(),S=40,Y=c.x+c.w+U,J=c.x-U,a=J-S,I=K.w-(Y+S),Z="vi-regular vi-tooltip-",Q;P=c.y;if(I>=a){V=Y;Q=I;L=C.POS_TOPLEFT;N.cssClass=Z+"C  "+N.rightCssClass;}else{V=J;Q=a;L=C.POS_TOPRIGHT;N.cssClass=Z+"D  "+N.leftCssClass;}T="max-width: "+Q+"px;";}if(O.tooltipContrast){N.cssClass=N.cssClass+" contrast";}if(N&&N.getItemCssClass){N.cssClass=H.filter([N.cssClass,N.getItemCssClass(X)],function(e){return !!e;}).join(" ");}O.richTooltip=F.copy(O.tooltipCss,{content:D.apply(O.tooltipMarkup,{c:d,style:T}),top:P,left:V,posType:L});O.richTooltip.keepArrowXPos=!!O.keepArrowXPos;O.richTooltip.keepArrowYPos=!!O.keepArrowYPos;this._super(W,M);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo.tooltip","mstrmojo.string","mstrmojo.array");var O=0,I=mstrmojo.array,B=mstrmojo.string;function P(){var U=this.textNode,W=this.imgNode;if(this.eg!=null){W.style.display="none";U.innerHTML=this.eg||"";U.style.display="block";}else{U.style.display="none";W.style.display="block";if(this.tooltip){W.setAttribute("ttl",this.tooltip);}var V=this.getFormats();this.retrieveGraphSrc(V.height,V.width);}}var T={6:"poly",7:"rect",100:"circle"};function H(){var d=this.as,Z=d&&d.length;if(!Z){return ;}var Y=this.id,c=Y+"_map"+O++,W=[],b=-1,X;for(X=0;X<Z;X++){var V=d[X];V.id=Y;V.aid=X;V.tooltip=B.multiReplace(V.tooltip||"",{"&#13":"<br />","&#32":" ",'"':"&quot;"});if(!isNaN(V.shape)){V.shape=this.getAreaShapeName(V.shape);}if(V.tks||V.tks===""||V.tty===1){V.extra=' href="#" ';}W[++b]=B.apply(this.areaMarkup,V);}var a='<map id="'+c+'" name="'+c+'">'+W.join("")+"</map>";if(!this.domNode){this.att='usemap="#'+c+'" ';this.map=a;}else{var U=document.createElement("div");U.innerHTML=a;if(this.mapNode){U=U.firstChild;this.mapNode.innerHTML=U.innerHTML;}else{this.imgNode.setAttribute("usemap","#"+c);this.mapNode=this.domNode.appendChild(U.firstChild);}}}var A=mstrmojo.GraphBase=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.GraphBase",cssClassPrefix:"mstrmojo-GraphBase",markupString:'<div id="{@id}" class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><img {@att}src="../images/1ptrans.gif" class="{@cssClassPrefix} {@cssImageClass}" hidefocus="true" />{@map}</div>',att:"",map:"",cAreaIdx:-1,useRichTooltip:true,markupSlots:{imgNode:function J(){return this.domNode.childNodes[1];},mapNode:function F(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function M(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function K(){this.domNode.style.display=(this.visible)?"block":"none";}},preBuildRendering:function C(){H.call(this);return this._super();},postBuildRendering:function Q(){P.call(this);return this._super();},setModel:function L(U){this.model=U;},updatingTooltipHelper:function R(Y,h,b){var V=Y&&Y.getAttribute("aid"),U=Y&&Y.getAttribute("ttl"),X=Y.getAttribute("SC"),a={refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMLEFT,contentNodeCssClass:"gp-tooltip"},g=(this.model.getZoomFactor?this.model.getZoomFactor():(this.model.docModel?this.model.docModel.getZoomFactor():1))+"em";if(V==this.cAreaIdx){return ;}this.cAreaIdx=V;a.content=U||this.defaultTooltip;var W="font-size:"+g+";";if(X){W+="border-color:#"+X;}a.contentNodeCssText=W;var d=Y.getAttribute("coords"),f=99999,e=99999;if(!b){if(d&&d.length>0){d=d.split(",");var Z=0;while(Z+1<d.length){f=Math.min(f,parseInt(d[Z++],10));e=Math.min(e,parseInt(d[Z++],10));}}}if(f===99999){f=h.x;}if(e===99999){e=h.y;}a.top=e;a.left=f;this.richTooltip=null;this.set("richTooltip",a);},redraw:function N(){if(!this.hasRendered){return false;}P.call(this);var U=this.getFormats();if(this.as&&U.height&&U.width){this.refreshMap();}return true;},refreshMap:function G(){if(this.as){H.call(this);}},getAreaShapeName:function D(U){return T[parseInt(U,10)]||"default";}});var S=A.tooltipCLS="mstrmojo-mobileGraph-Tooltip-content",E=A.canvasCLS="mobile-graph-highlight-canvas";A.hideTooltips=function(){I.forEach(document.getElementsByClassName(S),function(U){U.style.display="none";});I.forEach(document.getElementsByClassName(E),function(U){U.getContext("2d").clearRect(0,0,U.width,U.height);U.width=U.width;});};}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.List","mstrmojo._IsDial");mstrmojo.Dial=mstrmojo.declare(mstrmojo.List,[mstrmojo._IsDial],{scriptClass:"mstrmojo.Dial",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){mstrmojo.css.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);},hideIfEmpty:function(){this.onadd();}},hideIfEmpty:false,onadd:function(A){if(this._super){this._super(A);}if(this.hideIfEmpty){if(this.domNode){this.domNode.style.display=(!this.items||this.items.length==0)?"none":"block";}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+E.substring(0,G)+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function E(){return this.domNode.firstChild;}},postBuildRendering:function B(){if(this.renderOnScroll){if(!this.onScrollEnd){var G=this.id;this.onScrollEnd=function F(){var H=mstrmojo.all[G];H.doScroll();H.updateScrollbars();};}}if(this._super){this._super();}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,doScroll:function A(){if(this.renderOnScroll){var G,H=this.scrollNode,F=(this.renderIndex+1)*this.renderBlockSize;if(F>=this.items.length){return ;}if(mstrmojo.dom.position(H).h===H.scrollHeight){G=this.domNode;}else{G=H;}if((mstrmojo.dom.position(G).h+G.scrollTop)>=G.scrollHeight){this.renderIndex++;var I=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");G.innerHTML+=I;this.itemsContainerNode.innerHTML+=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.css");var F=mstrmojo.css;var C;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function L(){F.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function J(){F.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function H(){F.toggleClass(this.domNode,"disabled",!this.enabled);}},multiSelect:true,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,getItemMarkup:function K(M){if(!C){C=this._super(M).replace(">{@en@n}<",'title="{@tt}"><span>{@en@n}</span><');}return C;},getItemProps:function G(P,N){var O=this._super(P,N),M={"\r\n":" ","\n":" ","\r":" "};var Q=P.css;if(Q){O.addCls(Q);}O.tt=P.tt||"";P.n=mstrmojo.string.multiReplace(P.n,M);O.n=P.n||" ";return O;},setupScrollNodes:function D(){this.scrollNode=this.scrollboxNode;},preselectionChange:function B(N){var O=this.minimumSelectCnt,M=this.getSelectedItems().length,P=N.removed;if(P&&O){if(M<O){this.select(P,true);return false;}}F.toggleClass(this.itemsContainerNode,"disableSelected",M<=O);return true;},buildRendering:function E(){this._super();F.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.ButtonBar");mstrmojo.vi.ui.TextAlignButtonBar=mstrmojo.declare(mstrmojo.ui.ButtonBar,null,{scriptClass:"mstrmojo.vi.ui.TextAlignButtonBar",includeJustify:true,init:function B(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"txtAlign");var D=this.itemsValueMap,C=this.items;if(!this.includeJustify){C=C.filter(function(F){return F.id!=="justify";});}this.items=C.map(function(G){var F=mstrmojo.hash.copy(G);F.v=D[F.id];return F;});},onValueChange:mstrmojo.emptyFn,itemsValueMap:{left:0,center:2,right:1,justify:6},items:[{n:mstrmojo.desc(3049,"Left"),id:"left"},{n:mstrmojo.desc(2193,"Center"),id:"center"},{n:mstrmojo.desc(2166,"Right"),id:"right"},{n:mstrmojo.desc(2068,"Justify"),id:"justify"}],getItemProps:function A(E,C){var D=this._super(E,C);D.addCls(E.id);return D;},postselectionChange:function(C){var D=this.items,E=D[C.added[0]],F=D[C.removed&&C.removed[0]];this.onValueChange(E.v,F&&F.v);}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=U.path;}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBoxBase","mstrmojo._HasScrollbox");mstrmojo.ListBox=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._HasScrollbox],{scriptClass:"mstrmojo.ListBox",renderAllItems:false,renderPause:10,numPagesRendered:0,pageStatus:null,_rc:null,_totalPages:null,_rh:null,_rhMin:8,_rowsPerPage:null,_defaultRowsPerPage:100,_minRowsPerPage:100,_pageHeight:null,buildRendering:function K(){if(this.renderAllItems===true){this._super();return true;}this._initPageSettings();var L=this.items;this.items=this._rc?this.items.slice(0,Math.min(this._rowsPerPage,this._rc)):[];this._super();this.items=L;this.postRenderPage(0,true);if(this._rc>this._rowsPerPage){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]=(this._rh*this._rc)+"px";if(!this.connectedScrollbox){this.connectScrollbox(this);this.connectedScrollbox=true;}}else{this.postRenderingCleanup();}},_initPageSettings:function E(){var L=this.items;this._rc=(L&&L.length)||0;var N=this.itemRenderer;this._rh=(N&&N.rowHeight)||this._rhMin||3;var M=this._defaultRowsPerPage;if(!isNaN(this.scrollboxHeight)){M=Math.ceil(this.scrollboxHeight/this._rh);M=Math.max(M,this._minRowsPerPage);}this._rowsPerPage=M;this._totalPages=Math.ceil(this._rc/this._rowsPerPage);this._pageHeight=this._rh*this._rowsPerPage;this._pageStatus=new Array(this._totalPages);this._numPagesRendered=0;},onscroll:function J(){if(!this._renderingRows){this._startPageRenderThread();}},_startPageRenderThread:function F(){this.renderingRows=true;var M=this,L=this._renderTimer=self.setInterval(function(){if(!M){self.clearInterval(L);return ;}var N=M.getPagesToRender();if(N.length>0){M.renderPages(N);}else{M.renderingRows=false;self.clearInterval(M._renderTimer);delete M._renderTimer;if(M.isRenderingComplete()){M.postRenderingCleanup();}M=null;}},this.renderPause);},getPagesToRender:function I(){var P=[],Z=this._pageHeight,b=null,W=this._pageStatus,Y=this;function R(c){var d=W[c];if(d&&d.filled){if(!d.height){if(!b){b=Y.itemsNode.tBodies;}d.height=b[c].offsetHeight;}return d.height;}else{return Z;}}var a=0,S=null,O=null,M=this.scrollboxTop;for(var V=0,X=this._totalPages;V<X;V++){a+=R(V);if(a>=M){S=V;break;}}if(S==null){S=O=X-1;}else{var L=this.scrollboxBottom;for(var T=S+1;T<X;T++){if(a>=L){O=T-1;break;}a+=R(T);}}if(O==null){O=X-1;}for(var N=this._numPagesRendered;N<S;++N){P.push({idx:N,fill:false});}for(var Q=S;Q<=O;++Q){var U=W[Q];if(!U||!U.filled){P.push({idx:Q,fill:true});}}return P;},renderPages:function D(M){for(var N=0,L=M.length;N<L;++N){this.renderPage(M[N].idx,M[N].fill);}},renderPage:function B(R,M){var V=this._pageStatus,P=(this._numPagesRendered>=R+1);if(P){if(!M||(V[R]&&V[R].filled)){return ;}}var U=this._rowsPerPage,L=R*U,N=Math.min(L+U,this._rc)-1;var T=this.tempTableCont;if(!T){T=this.tempTableCont=this.domNode.ownerDocument.createElement("div");}var Q=M?this._buildItemsMarkup(L,N,'<table><tbody idx="'+R+'">',"</tbody></table>",this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join(""):'<table><tbody idx="'+R+'"><tr><td style="height:'+this._pageHeight+'px">&nbsp;</td></tr></tbody></table>';T.innerHTML=Q;var O=T.firstChild.tBodies[0],S=this.itemsNode;if(!P){S.appendChild(O);}else{S.replaceChild(O,S.tBodies[R]);}this.postRenderPage(R,M);},postRenderPage:function G(M,O){if(M+1>this._numPagesRendered){this._numPagesRendered=M+1;}var L=this._pageStatus,N=L[M];if(!N){N=L[M]={};}if(O){N.filled=true;}if(M>0&&M==this._totalPages-1){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]="";}},isRenderingComplete:function C(){if(this._numPagesRendered==this._totalPages){for(var L=this._pageStatus,M=this._totalPages-1;M>-1;M--){if(!L[M]||!L[M].filled){return false;}}return true;}return false;},postRenderingCleanup:function A(){if(this.connectedScrollbox){this.disconnectScrollbox(this);this.connectedScrollbox=false;}},unrender:function(L){this.postRenderingCleanup();this._super(L);},refresh:function H(){if(!this.hasRendered){return ;}var N=this.domNode,L=N&&N.parentNode;if(!this.parent&&L){var M=N.ownerDocument.createElement("span");L.insertBefore(M,N);}this.unrender();if(!this.parent&&L){this.domNode=M;}this.render();if(this.defn&&this.defn.set){this.defn.set("readyState",mstrmojo.EnumReadystate.IDLE);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._ListSelections");mstrmojo.ListBoxHoriz=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBoxHoriz",cssClass:"mstrmojo-ListBoxHoriz",tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"",cellCssText:"",cellSpacing:0,cellPadding:0,_markupPrefix:function(){var A=this.itemRenderer;return(A&&A.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="'+this.cellSpacing+'" cellpadding="'+this.cellPadding+'"><tbody><tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'">');},_markupSuffix:function(){var A=this.itemRenderer;return(A&&A.markupSuffix)||"</tr></tbody></table>";},_itemPrefix:function(){var A=this.itemRenderer;return(A&&A.itemPrefix)||('<td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var A=this.itemRenderer;return(A&&A.itemSuffix)||"</td>";},_getItemNode:function(A){if(A<0){return null;}var B=this.itemsNode,C=B&&B.rows[0];return C&&C.cells[A].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxHoriz");var A={render:function(F,B,G){var H=(G.htmlName+B),D=G.selectedIndices[B]?"checked ":"",E=D?" selected":"",C=F.v!=="u;"?" nAll":"";return'<div class="'+G.itemCssClass+E+C+'"><input type="'+G.inputType+'" name="'+G.htmlName+'" id="'+H+'" value="'+B+'" '+D+'/><label for="'+H+'" title="'+(F[G.itemTitleField]||"")+'" style="'+G.labelCssText+'">'+F[G.itemDisplayField||"n"]+"</label></div>";},select:function(D,E,B,F){var C=D&&D.firstChild;if(C&&!C.checked){C.checked=true;}mstrmojo.css.toggleClass(D,"selected",C.checked);},unselect:function(D,E,B,F){var C=D&&D.firstChild;if(C&&C.checked){C.checked=false;}mstrmojo.css.toggleClass(D,"selected",C.checked);},rowHeight:23};mstrmojo._RendersInputItems=mstrmojo.provide("mstrmojo._RendersInputItems",{inputType:null,htmlName:null,itemRenderer:A,init:function(B){this._super(B);if(!this.htmlName){this.htmlName=this.id;}},preclick:function(E){var D=E.hWin,G=E.e,F=mstrmojo.dom.eventTarget(D,G);if(F&&F.nodeName.match(/input/i)){var C=parseInt(F.value,10);if(this.inputType&&this.inputType.match(/radio/i)){this.singleSelect(C);}else{var B=(F.checked)?"add":"remove";this[B+"Select"](C);}}}});mstrmojo._InputList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputList"});mstrmojo._InputListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputListHoriz"});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+D[E.itemDisplayField]+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var C=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function E(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function D(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=C.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui._HasListTooltip");mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,parentDomNode:undefined,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function D(){return this.domNode.firstChild.firstChild;},scrollboxNode:function F(){return this.domNode.firstChild;}},setupScrollNodes:function E(){this.scrollNode=this.scrollboxNode;},onOpen:function B(){this._super();this.updateScrollbars();},postBuildRendering:function C(){var H=this._super();if(!this.parent){var G=this.parentDomNode=this.parentDomNode||document.body;G.appendChild(this.domNode);}return H;},closePopup:function A(){this.set("visible",false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo._IsDial");mstrmojo.WidgetDial=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._IsDial],{scriptClass:"mstrmojo.WidgetDial"});})();(function(){mstrmojo.requiresCls("mstrmojo.dnd","mstrmojo.ui._HasScroller");function Z(f){var h=document.createElement("div"),g=h.style,e=f.domNode;h.className="mstrmojo-DataGrid-avatar";g.height=e.clientHeight+"px";e.appendChild(h);f.avatar=h;return h;}function Q(e){var f=mstrmojo.dom.position(e.domNode,true);return f.x;}function O(e){return'<div class="mstrmojo-DataGrid-resizeHandle" unselectable="on" onselectstart="return false" rh="'+e+'"></div>';}function b(g){var f=g.getAttribute("rh"),e=f&&parseInt(f,10);return e;}function Y(f,i,e){var h=e.src,j=h&&h.data,g=j&&j.resizingIdx;if(!(g&&g>0)){return i&&i.apply(f,[e]);}}mstrmojo.RESIZE_NEXT_COLUMN_MODE={getRange:function G(h,g){var e=h.colSizeArray;var f=[-e[g-1]+h.minColWidth,(g==e.length-1)?e[g]-h.resizeHandleWidth-h.minColWidth:e[g]-h.minColWidth];return f;},updateSize:function F(h,g,f){var e=h.colSizeArray;e[g-1]=e[g-1]+f;e[g]=e[g]-f;},updateColumnWidth:function T(h,f,i,g){var e=h.colSizeArray;f[g-1].style.width=e[g-1]+"px";i[g-1].style.width=e[g-1]+"px";f[g].style.width=e[g]+"px";i[g].style.width=e[g]+"px";}};mstrmojo.RESIZE_ALL_COLUMN_MODE={getRange:function G(k,j){var l=k.minColWidth+k.resizeHandleWidth,e=k.colSizeArray,g=0;for(var h=j;h<e.length;++h){g+=e[h]-l;}var f=[-e[j-1]+l,g];return f;},updateSize:function F(h,m,f){var l=h.minColWidth+h.resizeHandleWidth,j=h.colSizeArray;j[m-1]=j[m-1]+f;var e=[];for(var g=0;g<j.length-m;++g){e[g]=m+g;}e.sort(function(i,o){return j[i]-j[o];});for(var g=0;g<e.length;++g){var n=f/(e.length-g);var k=j[e[g]];f-=(k>=n+l)?n:k-l;j[e[g]]=(k>=n+l)?k-n:l;}},updateColumnWidth:function T(j,f,k,h){var e=j.colSizeArray;for(var g=h-1;g<e.length;++g){f[g].style.width=e[g]+"px";k[g].style.width=e[g]+"px";}}};mstrmojo._CanResizeColumn=mstrmojo.provide("mstrmojo._CanResizeColumn",{draggable:true,dropZone:false,avatar:null,colSizeArray:null,resizableColumns:true,resizeHandleWidth:10,minColWidth:5,resizeColumnBehavior:mstrmojo.RESIZE_NEXT_COLUMN_MODE,createColSizeArray:function c(){var f,k,h,g,j,e;k=this.headerContainerNode;h=k&&k.getElementsByTagName("table")[0];g=h.rows[0].cells;f=[];for(j=0,e=g.length;j<e;j++){f.push(g[j].offsetWidth);}return f;},postBuildRendering:function V(){if(this._super){this._super();}if(this.avatar){this.domNode.appendChild(this.avatar);}this.colSizeArray=null;},getDragData:function E(e){var g=e.src,h=g.node,f=b(h);if(f&&f>0){return{resizingIdx:f,startingX:g.pos.x,baseX:Q(this)};}if(this._super){return this.dropZone&&this._super(e);}return null;},allowDrop:function K(e){var g=e.src,h=g&&g.data,f=h&&h.resizingIdx;if(f&&f>0){return true;}return this.dropZone;},ondragenter:function R(e){Y(this,this._super,e);},ondragover:function S(e){Y(this,this._super,e);},ondragleave:function B(e){Y(this,this._super,e);},ondrop:function W(e){Y(this,this._super,e);},isDragValid:function C(e){var g=e.src,h=g&&g.data,f=h&&h.resizingIdx;if(f&&f>0){return true;}if(this._super){return this._super(e);}return false;},ondragstart:function X(e){var h=e.src,i=h&&h.data,g=i&&i.resizingIdx;if(g&&g>0){var f=this.avatar||Z(this);this.ownAvatar=true;f.style.left=(i.startingX-i.baseX)+"px";f.style.display="block";document.body.style.cursor="col-resize";if(!this.colSizeArray){this.colSizeArray=this.createColSizeArray();this._firstTimeResize=true;}i.resizingRange=this.resizeColumnBehavior.getRange(this,g);return ;}if(this._super){this._super(e);}},ondragmove:function P(f){var m=f.src,g=m&&m.data,k=g&&g.resizingIdx;if(k&&k>0){var l=f.tgt,h=this.avatar,j=g.resizingRange,i=l.pos.x-g.startingX,e=Math.min(j[1],Math.max(i,j[0]));g.deltaX=e;if(h){h.style.left=(g.startingX-g.baseX+e)+"px";}}else{if(this._super){this._super(f);}}},ondragend:function L(j){var q=j.src,k=q&&q.data,o=k&&k.resizingIdx;if(o&&o>0){var e=this.titleColGroup,p=e&&e.childNodes,m=this.dataColGroup,n=m&&m.childNodes,h=p.length,l=this.colSizeArray,f=k.deltaX;this.resizeColumnBehavior.updateSize(this,o,f);if(this._firstTimeResize){var g;for(g=0;g<h;g++){p[g].style.width=l[g]+"px";n[g].style.width=l[g]+"px";}this._firstTimeResize=false;}else{this.resizeColumnBehavior.updateColumnWidth(this,p,n,o);}this.avatar.style.display="none";document.body.style.cursor="";this.ownAvatar=false;}else{if(this._super){this._super(j);}}}});mstrmojo.requiresCls("mstrmojo._CanResizeColumn","mstrmojo.ListMapperTable","mstrmojo.WidgetList");function J(g){var k=document.createElement("colgroup"),e=g.length,f,j;for(j=0;j<e;j++){var h=document.createElement("col");f=g[j];if(f.colWidth){h.style.width=f.colWidth+"px";}h.className=f.colCss||("col"+j);k.appendChild(h);}return k;}function I(f){var g=f._headerWidgets_,e=g&&g.length;if(e>0){var h;for(h=0;h<e;h++){g[h].destroy(true);}}}function A(i,e,h,k,f){var g=[],j=i.headerWidget;h=h?(" "+h):"";k=k||this._headerWidgets;f=f?(" "+f):' w="1"';g.push("<td"+h+">");if(e>0&&this.resizableColumns){g.push(O(e));}g.push('<div class="mstrmojo-DataGrid-headerText');g.push(i.headerCss?" "+i.headerCss:"");if(j){k.push(mstrmojo.hash.copy(j));g.push('"'+f+">");}else{g.push('">');}g.push(i.headerText||"&nbsp");g.push("</div>");g.push("</td>");return g.join("");}function a(e,m){var g,k,l,f,n,j,h=[];e=e||"_headerWidgets";m=m||"1";g=this[e];k=g.length;if(k>0){l=this.headerContainerNode.getElementsByTagName("div");f=mstrmojo.array.filter(l,function(i){return i.getAttribute("w")==m;});for(j=0;j<k;j++){g[j].placeholder=f[j].firstChild;g[j].dataGrid=this;n=mstrmojo.registry.ref(g[j]);n.render();h.push(n);}}this[e+"_"]=h;}mstrmojo.DataGrid=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._CanResizeColumn,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.DataGrid",banding:true,resizableColumns:true,columns:null,items:null,listMapper:mstrmojo.WidgetListMapperTable,lockHeader:false,contentWidth:"",renderHook:{},markupString:'<div id="{@id}" class="mstrmojo-DataGrid {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-DataGrid-headerContainer">{@headerHtml}</div><div class="mstrmojo-DataGrid-itemsScrollBox" style="position:relative;"><div class="mstrmojo-DataGrid-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild.firstChild;},dropCueNode:function(){return this.domNode.lastChild.lastChild;},headerContainerNode:function(){return this.domNode.firstChild;}},markupMethods:{oncontentWidthChange:function(){var f=this.contentWidth,g=this.headerContainerNode,e=this.itemsContainerNode;if(f&&g&&e){g.style.width=f;e.style.width=f;}},onlockHeaderChange:function(){mstrmojo.css.toggleClass(this.domNode,"lockHeader",this.lockHeader);},onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";}},setupScrollNodes:function M(){this.scrollNode=this.scrollboxNode;},itemFunction:function(g,e,f){var h=new mstrmojo.DataRow({columns:f.columns,data:g,idx:e,dataGrid:f,parent:f});return h;},preBuildRendering:function D(){var k=this.renderHook;if(k&&k.pre){k.pre.apply(this,[A]);}else{var f=this.columns,e=f.length,g=['<table class="mstrmojo-DataGrid-headerTable" cellspacing="0" cellpadding="0"><tr>'],j;this._headerWidgets=[];var h;for(h=0;h<e;h++){j=A.apply(this,[f[h],h]);g.push(j);}g.push("</tr></table>");this.headerHtml=g.join("");}if(this._super){this._super();}},postBuildRendering:function V(){if(this._super){this._super();}var g=this.renderHook;if(g&&g.post){g.post.apply(this,[J,a]);}else{a.apply(this);this.titleColGroup=J(this.columns);}var e=this.titleColGroup,l=e.cloneNode(true),i=this.headerContainerNode,k=i&&i.getElementsByTagName("table")[0],m=this.itemsContainerNode,j=this.scrollboxNode,h=this.domNode,f=m&&m.getElementsByTagName("table")[0];this.dataColGroup=l;if(k&&f){k.insertBefore(e,k.firstChild);f.insertBefore(l,f.firstChild);}if(this.lockHeader){j.style.height=h.offsetHeight-i.offsetHeight+"px";mstrmojo.dom.attachEvent(j,"scroll",function(n){i.style.left=-j.scrollLeft+"px";});}},refresh:function H(e){I(this);if(this._super){this._super(e);}},destroy:function d(e){I(this);this._super(e);},unrender:function U(j){var g=this._headerWidgets_,f=g&&g.length,e;if(f>0){var h;for(h=0;h<f;h++){e=g[h];if(e&&e.hasRendered){e.unrender(true);}}}this._super(j);}});mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Container");mstrmojo.DataRow=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DataRow",cssClass:"mstrmojo-DataRow",columns:null,markupMethods:{onselectedChange:function(){mstrmojo.css.toggleClass(this.domNode,"selected",this.selected);}},buildDom:function(){this.children=[];var k=document.createElement("tr"),o=this.data,s=this.idx,f=this.dataGrid,l=this.cssClass,u=this.columns,e=this.children,g,p=-1,t,q;k.setAttribute("id",this.id);if(f.banding){l+=(s%2==1)?" odd":" even";}k.className=l+(mstrmojo.string.isEmpty(o[f.itemDisplayField||"n"])?" empty-row":"")+(" "+o[f.itemCSSField||"itemCss"]||"");var j,n;for(j=0,n=u.length;j<n;j++){t=u[j];q=(t.dataWidgetBuilder&&t.dataWidgetBuilder(o))||t.dataWidget;g=document.createElement("td");if(t.applyStyle2Cell&&t.colCss){g.setAttribute("class",t.colCss);}k.appendChild(g);if(q){g.setAttribute("w","1");p++;e.push(mstrmojo.hash.copy(q,{slot:"slot"+p,data:o,idx:s,dataGrid:f}));}else{if(t.dataFunction){g.innerHTML=t.dataFunction(o,s,f);}else{var h=mstrmojo.string.htmlAngles(o[t.dataField||"n"])||"&nbsp",m=t.tooltip?' title="'+h+'"':"";g.innerHTML='<div class="mstrmojo-DataRow-text" '+m+">"+h+"</div>";}}}this.initChildren();k.mstrmojoId=this.id;return k;},buildRendering:function N(){this._super();var j=this.domNode.childNodes,e=j.length,h={},g=0,k,f;for(f=0;f<e;f++){k=j[f];if(k.getAttribute("w")=="1"){h["slot"+g]=k;g++;}}this.addSlots(h);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ui.menus._HasMenuPopup","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var D=mstrmojo.dom,P=mstrmojo.css,I=mstrmojo.ui.PopupConfig.directionCfg;var Q={};var K=false;function F(V,W){if(V.pop){if(W&&V.ax){window.clearTimeout(this._popupAxTimeout);V.actionFn();this.closeAllMenus();}else{var T=V.fn.call(mstrmojo.all[V.scope],V.ctxt);var U=T.ENUM_CORNERS;T.setAlignment(U.TOP_RIGHT,U.TOP_LEFT);T.hostId=this.id;T.hostElement=this._getItemNode(V._renderIdx);this.openPopup(T.newInstance());}}else{if(V.dsbld!==true){if(V.fn(V,this)!==false){this.closeAllMenus();}}}}function G(T){var U=parseInt(T);return U===null||isNaN(U)?0:U;}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var V=this.scrollNode;if(!V){return ;}var T=(getComputedStyle&&getComputedStyle(V,null))||V.currentStyle,U=V.offsetWidth-G(T.borderLeftWidth)-G(T.borderRightWidth)-V.clientWidth;V.style.marginRight=-U+"px";V.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function L(V){this._super(V);var T=this.popupConfig;this.items=T.getMenuItems();var U=["mstrmojo-ui-Menu","unselectable"],W=T.menuCssClass;if(W){U.push(W);}P.addWidgetCssClass(this,U);if(T&&T.supportsScroll&&T.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+T.maxHeight+"px";}this.useRichTooltip=!!T.useTooltip;this.tstid=T.tstid;},markupMethods:{onvisibleChange:function J(){var T=this.visible;if(!K||T){P.toggleClass(this.domNode,"visible",T);}}},getItemMarkup:function C(X,T){if(X.getItemMarkup){return X.getItemMarkup.apply(this,[X,T]);}var V=!!X.pop,W=V?"submenu":"item",U=Q[W];if(!U){U=this._super(X,T).replace("{@en@n}",'<div class="micn"></div>{@en@n}');if(V){U=U.replace("{@en@n}",'{@en@n}<div class="arw"></div>');}Q[W]=U;}if(X.tstid){U=U.replace("{@tag}","{@tag} "+mstrmojo.tstid(X)+" ");}return U;},getItemProps:function R(V,T){var U=this._super(V,T);U.tag="a";U.addCls("mstrmojo-ui-Menu-item");U.addCls(V.cls);return U;},adjustCornersForPopupOverflow:function O(){var V=this._super(),Z=this.domNode,Y,X,T,U,W;if(V){Y=D.position(Z);T=Y.y;X=Z.style;U=this.popupConfig;W=U.position||D.position(U.hostElement);if(T<0||(T+Y.h>D.position(document.body).h)){X.top=(-W.y+5)+"px";X.bottom="auto";}}return V;},onmouseover:function E(T){var Y=T.getTarget(),X=this.getItemFromTarget(Y),W=this,V=W._lastOpened,a=V&&this.getItemFromTarget(V.popupConfig.hostElement)._renderIdx,Z=this.getItemNodeFromTarget(Y),U=(a!==undefined&&D.contains(this._getItemNode(a),Y,true,this.domNode));if(X){this._lastHoverIx=X._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==a&&!U){this._popupTimeOut=window.setTimeout(function(){if(W._lastOpened&&W._lastOpened.visible){W.closePopup();}if(W.visible&&X.pop){if(X.ax){W._popupAxTimeout=window.setTimeout(function(){P.removeClass(Z,"hlt-ax");F.call(W,X);},0);}else{F.call(W,X);}}},400);if(X.pop&&X.ax){P.addClass(Z,"hlt-ax");}}}},onclick:function S(T){this._evtTarget=T.getTarget();this._super(T);T.cancel();},postselectionChange:function H(T){var U=T.added;if(U){var V=this.items[U[0]];F.call(this,V,!(V.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function M(T){D.preventDefault(window,T.e);return false;},postBuildRendering:function N(T){this._super(T);if(this.popupConfig.supportsScroll){var U=this;window.setTimeout(function(){U.updateScrollbars();},10);}},showTooltip:function B(X,W){var V=D.eventTarget(W,X),U=this.getItemNodeFromTarget(V),T=this.getItemFromTarget(V);if(U&&((T&&T.ttp)||(U.scrollWidth>U.clientWidth))){this._super(X,W);}},onClose:function A(T){if(this._super){this._super(T);}this.closePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Box","mstrmojo.array","mstrmojo._HasLayout","mstrmojo.ui.ColumnContainer");var E=mstrmojo.dom,G=mstrmojo.hash,C=mstrmojo.array;mstrmojo.ui.ColumnWalk=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.ColumnWalk",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnWalk cf {@cssClass}" mstrAttach:click></div>',layoutConfig:{h:{containerNode:"100%"},xt:true},currentColumn:-1,addNextColumn:function B(K){var J=this.children||[],L=J.length,I=J[L-1];var M=this.addChildren([G.copy(K,{scriptClass:"mstrmojo.ui.ColumnContainer",idx:L})])[0];if(I){I.set("next",M);}},onclick:function A(I){var K=I.getTarget();if(K){var J=this.children;C.forEach(J,function(M,L){if(E.contains(M.domNode,K,true,M.domNode)){this.set("currentColumn",L);}},this);}},oncurrentColumnChange:function D(I){var K=this.children,M=K[I.valueWas],J=K[this.currentColumn],L="active";if(M){M.set(L,false);}J.set(L,true);},removeTrailingContainer:function H(K){var J=this,I=this.children;if(!I||K>=I.length-1){return ;}C.forEach(I.slice(K+1),function(L){J.removeAndDestroyChild(L);});if(K>=0){I[K].set("next",null);}},insertAndRemoveTrailing:function F(J,I){this.removeTrailingContainer(J);this.addNextColumn(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom");mstrmojo.requiresDescs(1442,2140);var E=mstrmojo.dom,G=mstrmojo.array;function B(I,K){var H=2140,M="Cancel",L="this.parent.popupConfig."+(I?"ok":"cancel"),J=K&&K[(I?"ok":"cancel")+"BtnText"];if(I){H=1442;M="Ok";}return mstrmojo.Button.newWebButton(J||mstrmojo.desc(H,M),function(O){var P=this.parent,N=P.popupConfig;P.closeAllMenus();N["fn"+M](N.data,P);E.stopPropogation(O.hWin,O.e);},I,{slot:"btnNode",bindings:{enabled:L+"Enabled",visible:L+"Visible"},cssDisplay:"inline-block"});}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,null,{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;},btnNode:function D(){return this.domNode.children[1];},bottomNode:function D(){return this.domNode.children[2];}},popupConfig:null,init:function F(J){this._super(J);var I=this.popupConfig,H=I.bottomNode;this.data=I.data||{};if(I.onOpen){this.onOpen=I.onOpen;}this.addChildren([B(true,I),B(false)]);if(H){H.slot="bottomNode";this.addChildren(H);}},onOpen:function C(){G.forEach(this.children,function(H){if(H.scriptClass==="mstrmojo.ui.ScrollableContainer"&&H.onOpen){H.onOpen();}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=this.searchEnabled?false:true;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var h=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,W=mstrmojo.array;function V(n){if(!this.modal){return ;}var o=window.mstrApp;if(o&&o.modalEditorChange){o.modalEditorChange(this.id,n);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titlebarNode:function j(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function k(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function l(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=mstrmojo.string.encodeHtmlString(this.title);}},onzIndexChange:function(){var n=this.zIndex;this.editorNode.style.zIndex=n;this.curtainNode.style.zIndex=n-1;},onvisibleChange:function(q){if(q){return ;}var p=this.visible,o="closeEffect",n="none";if(p){o="openEffect";n="block";}if(this[o]){this.playEffect(o);}else{this.editorNode.style.display=n;if(this.modal){this.curtainNode.style.display=n;}}},onhelpChange:function d(){if(this.showTitle){var o=this.help,n=this.helpNode;if(!o){n.style.display="none";}else{n.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(o,n){this._super(o,n);V.call(this,true);},close:function f(n){this._super(n);V.call(this,false);},unrender:function B(n){this._super(n);V.call(this,false);},destroy:function g(n){this._super(n);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function i(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(n){var o=n.getTarget();if(o===this.closeNode||o===this.helpNode){C.toggleClass(o,"active",true);}},premouseup:function O(n){var o=n.getTarget();if(o===this.closeNode||o===this.helpNode){C.toggleClass(o,"active",false);}if(n.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function c(o){if(o.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{var n=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm#");window.open(n+(this.help||""),"_blank");return false;}}},_set_visible:function b(u,q){var p=(this[u]!==q);if(p){this[u]=q;var t=this._close_handler;if(q){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var s=this;t=this._close_handler=t||function(n){var v=M.eventTarget(self,n);if(v&&v.parentNode&&!M.contains(s.editorNode,v,true,document.body)){s.close();}};M.attachEvent(document.body,"mousedown",t);}}else{var o=this._curtain_handler;if(o){M.detachEvent(window,"resize",o);}if(t){M.detachEvent(document.body,"mousedown",t);}}}return p;},showTooltip:function m(u,s){var q=this,o=M.findAncestorByAttr(M.eventTarget(s,u),"tooltip",true,this.domNode),p=o&&o.value;if(!q.hasOpenTooltip&&p){var n=M.position(o.node);q.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:p,top:Math.max(n.y+40,0),left:Math.max(n.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(u,s);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(n){n=Math.round(n);return["rgb(",n,",",n,",",n,")"].join("");}}},preStart:function(){var o=this.target,n=this.widget;n.editorNode.style.display="block";if(!n.modal){return false;}o.style.display="block";C.setOpacity(o,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var n=this.widget;n.editorNode.style.display="none";return !!n.modal;}};function D(n){return function(){Y[n].destroy();};}function J(o,w,x,y){var n=w.id||"mojoAlertx9",t,v=w.buttons;W.forEach(v,function(AA){var z=AA.onclick;AA.onclick=function(AB){var AC=Y[n];if(z&&z.call(AA,AB)===false){return ;}AC.destroy();AC=null;};});try{Y[n].destroy();}catch(u){}var p=w.cssClass,q=[];if(p){q.push(p);delete w.cssClass;}if(y){q.push(y);}q.push("mstrmojo-alert");t={scriptClass:"mstrmojo.Editor",id:n,width:"475px",zIndex:1000,title:x||mstrmojo.desc(11812,"Notification"),cssClass:q.join(" "),children:[{scriptClass:"mstrmojo.Label",cssClass:"alert-content",text:o,allowHTML:w.allowHTML}],visible:true};var s=new mstrmojo.Editor(N.copy(w,t));s.render();return s;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(o,v,p){p=p||{};var w=p.forceClose,u=p.callback||mstrmojo.emptyFn,t=N.copy(v||{},{buttons:w?[mstrmojo.Button.newActionButton((p.buttonText||mstrmojo.desc(8607,"Dismiss")),u)]:null,showTitle:false,modal:false,top:"42px"}),q=p.duration||6000;var s=J(o,t,"",w?"ed-notify":"ed-toast"),n=s.id;if(!w){window.setTimeout(h([u,D(n)]),q);}else{window.setTimeout(function(){if(Y[n]){Y[n].editorNode.style.opacity=0.75;}},6000);}return s;};mstrmojo.confirm=function e(t,o,s){o=o||{};var n=o.confirmBtn||{},q=o.cancelBtn||{},p=[Z(n.t||mstrmojo.desc(219,"Yes"),n.fn,true),Z(q.t||mstrmojo.desc(218,"No"),q.fn)];return J(t,N.copy(s||{},{buttons:p,onPreClose:function(){if(q&&q.fn){q.fn();}return true;}}));};mstrmojo.warn=function K(p,n,o){o=o||{};o.cssClass=(o.cssClass||"")+" mstrmojo-warning";mstrmojo.confirm(p,n,o);};mstrmojo.alert=function a(t,p,s,u,n,q){var o={title:s,zIndex:u,cssClass:n,buttons:[Z(mstrmojo.desc(1442,"OK"),p,true)],onPreClose:function(){if(p){p();}return true;}};N.forEach(o,function(w,v){if(!w){delete o[v];}});return J(t,N.copy(q,o));};mstrmojo.error=function T(s,n,q){var o=s||{};var p=mstrmojo.desc(96,"Error");if(q){p=(q.title)?q.title:mstrmojo.desc(96,"Error");}J("",N.copy(q||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),n,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:o.shortDesc,longDesc:o.longDesc}]}),p);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ToolBar","mstrmojo.boxmodel","mstrmojo.array","mstrmojo.EnumRWUnitType","mstrmojo.dom","mstrmojo.css");var Q=["background-color","border","border-color","border-left","border-style","border-top","border-width","filter","top","left","z-index","fx","normWidth","normHeight","normZIndex","normTop","normLeft","tbborder","lrborder","ttl"],X=["width","height"],n="p_fmts";var k="px";var i={getContentHeight:function(q,t){var s=t.ttl&&t.ttl.height;if(q&&s&&!this.floatingToolbar){return Math.max(parseInt(q,10)-parseInt(s,10),0)+k;}return"";},getPortletMinHeight:function(q){return q.ttl.height;},adjustTitleCss:function(){return ;}};var f={getContentHeight:function(q){return q;},getPortletMinHeight:function(){return 0;},adjustTitleCss:function(q){q.titlebarNodeClass+=" floating";return ;}};function A(u,s){var t=this.parent,q=u+"DirtyKey";if(t[q]){t[q](s);}}function P(){this.toolbarTitleTextNode.innerHTML=this.title+(this.count?" ("+this.count+")":"");}function h(){var s=this.parent,u=s&&s.defn;if(u&&parseInt(u.t,10)===mstrmojo.EnumRWUnitType.PANEL){var q=s.parent,t=q.defn;if(t&&t.ifp){return q;}}return null;}var R=mstrmojo.hash,G=2;mstrmojo.DocPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocPortlet",floatingTitle:false,floatingTitleHeight:30,n:"",buttonWidth:17,markupString:'<div class="mstrmojo-portlet {@borderCss}" nm="{@n}" style="{@portletNodeCssText}"><div class="mstrmojo-portlet-slot-shadow" style="{@shadowNodeCssText}"></div><div class="mstrmojo-portlet-container" style="{@portletContainerNodeCssText}"><div class="mstrmojo-portlet-titlebar {@titlebarNodeClass}" style="{@titlebarNodeCssText}"><table style="height:100%;width:100%" class="mstrmojo-portlet-titlebar-table" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-portlet-slot-toolbar-left {@leftToolbarNodeClass}" style="{@leftToolbarNodeCssText}"></td><td class="mstrmojo-portlet-title" style="{@titleNodeCssText}"><div style="overflow: hidden;"></div></td><td class="mstrmojo-portlet-slot-toolbar {@toolbarNodeClass}" style="{@rightToolbarNodeCssText}"></td></tr></table></div><div class="mstrmojo-portlet-buttonbar {@buttonbarNodeClass}" style="{@buttonbarNodeCssText}"></div><div class="mstrmojo-portlet-slot-content" style="{@contentNodeCssText}"></div></div></div>',rightToolbarNodeCssText:"",leftToolbarNodeCssText:"",titleNodeCssText:"",titlebarNodeClass:"",titlebarNodeCssText:"",contentNodeCssText:"",borderCss:"no-border",buttonbarNodeClass:"",buttonbarNodeCssText:"",markupSlots:{containerNode:function(){return this.domNode.lastChild;},portletNode:function(){return this.domNode;},portletContainerNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.lastChild.childNodes[0];},buttonbarNode:function(){return this.domNode.lastChild.childNodes[1];},toolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[2];},toolbarTitleTextNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[1].firstChild;},leftToolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[0];},contentNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontitleChange:function(){P.call(this);},oncountChange:function(){P.call(this);},onfcChange:function(){if(this.fc&&this.content){this.updateContentHeight();}}},formatHandlers:{portletContainerNode:["RW","B","fx","background-color"],shadowNode:["RW","B","fx","background-color"],buttonbarNode:{src:"ttl",props:["background-color"]},titlebarNode:{src:"ttl",props:["F","B","background-color","height","fx","text-align","vertical-align"]},titleNode:{src:"ttl",props:["vertical-align","P","text-decoration"]}},updateServer:true,fc:false,content:null,rightToolbar:null,leftToolbar:null,floatingToolbar:false,_ts:i,getCacheKey:function F(){return this._super()+"-portlet";},getFormats:function M(){var s=this.content,q=s&&s.getFormats();return q&&q[n];},updateContentHeight:function d(v){var q=this.getFormats(),s=this.content,u=s.dimNode||s.domNode,t=((q.ttl&&parseInt(q.ttl.height,10))||0);if(u){if(!v){t+=((this.fc||this.isInFilterPanel())?u.offsetHeight:(q.height?parseInt(q.height,10):0));}this.containerNode.style.height=t+k;this.shadowNode.style.height=t+k;}},init:function o(q){this._super(q);var s=this.content;this.n=(q&&q.defn&&q.defn.n)||"";if(s&&s.getFormats()&&!this.getFormats()){this._createFormats();}},preBuildRendering:function B(){var s=this._ts=(this.floatingTitle)?f:i;if(this.isInFilterPanel()){var t=R.clone(this.formatHandlers);t.portletContainerNode=["z-index","height","B","backgroud-color"];t.shadowNode=["z-index","height","B","fx","background-color"];this.formatHandlers=t;}this._super();s.adjustTitleCss(this);var q="display:none;";if(!this.leftToolbar){this.leftToolbarNodeCssText+=q;}if(!this.toolbar){this.toolbarNodeCssText+=q;}var u=mstrmojo._Formattable.getBorderWidths(this);if(u.l||u.t||u.r){this.borderCss="has-border";}},postBuildRendering:function Y(){var u=mstrmojo.dom,AB=this.titleNode,AA=this.onclicktitle;if(this.floatingTitle&&this.titleNode){document.body.appendChild(this.titleNode);var v=mstrmojo.css,x=this.contentNode,y=this;if(!this._onhover){this._onhovertt=function(){v.addClass(y.titleNode,["visible"]);y._onflt=true;return true;};this._onhoverofftt=function(){v.removeClass(y.titleNode,["visible"]);y._onflt=false;return true;};this._onhover=function(){var AC=y.titleNode;v.addClass(AC,["visible"]);var AD=u.position(y.contentNode,true);AC.style.top=(AD.y-AC.clientHeight+2)+k;AC.style.left=AD.x+k;return true;};this._onhoveroff=function(){v.removeClass(y.titleNode,["visible"]);return true;};}u.attachEvent(x,"mouseover",this._onhover);u.attachEvent(x,"mouseout",this._onhoveroff);u.attachEvent(AB,"mouseover",this._onhovertt);u.attachEvent(AB,"mouseout",this._onhoverofftt);}if(AB&&AA){u.attachEvent(AB,"click",AA);}if(this._super){this._super();}var w=this.getFormats();this.set("fc",w&&!w.height);if(this.isInFilterPanel()&&!this.isHorizFP()){var q=this.portletContainerNode.style,s=this.shadowNode.style,z=this.parent;q.width=s.width="99%";q.top=s.top=z.topStart+k;q.left=s.left=G+k;}else{if(this.isInFilterPanel()&&this.isHorizFP()){G=8;this.portletContainerNode.style.left=this.shadowNode.style.left=parseInt(w.left,10)+G*this.orgPos+k;}else{if(this.defn.ifp){this.adjustFPHeight2Fit();}}}if(this.buttonbarNode.clientHeight>0){this.buttonbarNode.style.height=this.buttonbarNode.clientHeight*this.model.getZoomFactor()+"px";}},adjustFPHeight2Fit:function(){var t=mstrmojo.dom,q=t.position(this.titleNode),s=t.position(this.contentNode).y-q.y-q.h;this.content.domNode.style.height=parseInt(this.defn.fmts.height,10)-s+"px";},unrender:function E(s){if(this.floatingTitle&&this.titleNode){var v=this.domNode,q=this.titleNode,u=mstrmojo.dom;if(v&&this._onhover){u.detachEvent(v,"mouseover",this._onhover);}if(v&&this._onhoveroff){u.detachEvent(v,"mouseout",this._onhoveroff);}if(q&&this._onhovertt){u.detachEvent(q,"mouseover",this._onhovertt);}if(q&&this._onhoverofftt){u.detachEvent(q,"mouseout",this._onhoverofftt);}if(q){document.body.removeChild(q);}}if(this._super){this._super(s);}},updateStyle:function(s,q){var u=this.shadowNode.style,t=this.containerNode.style;u.height=t.height=s;u.width=t.width=q;},_createFormats:function V(){var w=this.content&&this.content.getFormats(),u;u=w.p_fmts={};var q,v;for(q in Q){v=Q[q];if(w[v]!==undefined){u[v]=w[v];delete w[v];}}for(q in X){v=X[q];if(w[v]!==undefined){u[v]=w[v];}}w.height=this._ts.getContentHeight(w.height,u);if(mstrmojo.dom.isIE&&u.fx&&u.fx.ds&&!u["background-color"]){u["background-color"]="#ffffff";}var t=u.ttl,s=t&&t["background-color"];if(s){this.titlebarNodeClass=mstrmojo.color.getContrastingColor(s,"light","dark");}},refresh:function p(){if(!this.hasRendered){return ;}var s=this.children,q;for(q=s.length-1;q>=0;q--){s[q].refresh();}},isInFilterPanel:function L(){return(h.call(this)!==null);},isHorizFP:function(){if(this.isInFilterPanel()){var q=this.getFilterPanel();return q&&q.defn&&parseInt(q.defn.fds,10)===2;}return false;},getFilterPanel:function H(){return h.call(this);},getContainerHeight:function c(){return this.containerNode.clientHeight;},relocate:function C(q){if(this.isInFilterPanel()&&!this.isHorizFP()){this.portletContainerNode.style.top=this.shadowNode.style.top=q+k;}},setInfoWindowDimensions:function m(v){var s=this.domNode.style,q=this.shadowNode.style,t=this.portletContainerNode.style,u=mstrmojo._Formattable.getBorderWidths(this);v.h-=u.h;v.w-=u.w;q.height=t.height=s.height=v.h+k;q.width=t.width=s.width=v.w+k;v.h-=this.titleNode.offsetHeight;this.toolbarNode.style.display="none";},addDirtyKey:function K(q){A.call(this,"add",q);},removeDirtyKey:function J(q){A.call(this,"remove",q);},setDirtyChildren:function Z(){var q=this.content;if(q&&q.setDirtyChildren){q.setDirtyChildren.apply(q,arguments);}}});var W=0,O=1,j=2;function N(q){var s=this.content.defn;if(s){s.set("ds",q);}}function l(q){return{FormattingOrder:{ZIndex:this.getFormats()["z-index"]},FormattingView:{WindowState:q}};}function a(AD,AB,q,AE){var AA=this.content,AC=AA.k,z=mstrmojo.boxmodel.px2Inches,t=AA.model.docModel||AA.model,AG=t.getZoomProps(),u=this.getFormats(),s=AB!==undefined&&q!==undefined,AF={},x=this,y=l.call(this,AD);if(s){y.FormattingSize={OldHeight:z(AG,AB),OldWidth:z(AG,q),Height:z(AG,parseInt(u.height,10)),Width:z(AG,parseInt(u.width,10))};}AF.success=function(v){var w=v&&v.data;if(w){t.loadPartialData(w,AC);}N.call(x,AD);var AH=x.parent;if(AH.adjustSectionSize&&s){AH.adjustSectionSize();}};t.updateUnitFormat(AA,1,y,AF,{params:{suppressData:true},config:s?null:{silent:true},preserveUndo:true});if(!s&&!(AE&&AE.all)){t.saveRWProps(AC,props,1,this.loadDataOnResize,AF,true);}}function T(){var x=this.content;if(!x){return ;}var v=function(AB){mstrmojo.array.forEach(AB,function(AC){if(AC.ds!==undefined){AC.set("visible",(AC.ds!==x.defn.ds));}});},y;if(this.isInFilterPanel()){var t=(parseInt(this.defn.ds,10)===W);x.set("visible",t);this.updateContentHeight(!t);y=this.leftToolbar;v(y&&y.children);var u=this.parent;if(u.refreshFP){u.refreshFP();}}else{var q=x.getFormats(),z=this.getFormats(),s=this.portletContainerNode.style,AA=this.shadowNode.style,w=this.contentNode.firstChild.style;w.height=q.height;w.width=q.width;AA.height=s.height=z.height;AA.width=s.width=z.width;AA.top=s.top=z.top;AA.left=s.left=z.left;if(z["z-index"]!==undefined){AA.zIndex=s.zIndex=z["z-index"];}y=this.rightToolbar;v(y&&y.children);if(x.resize){x.resize();}}}mstrmojo.DocResizablePortlet=mstrmojo.declare(mstrmojo.DocPortlet,null,{scriptClass:"mstrmojo.DocResizablePortlet",loadDataOnResize:false,_createFormats:function V(){this._super();var s=this.getFormats();var q=parseInt(this.defn.ds,10);if(q===W){s.normHeight=s.height;s.normWidth=s.width;if(s["z-index"]!==null&&s["z-index"]!==undefined){s.normZIndex=s["z-index"];}}if(q!==j){s.normTop=s.top;s.normLeft=s.left;}},onmaximize:function e(){var u=this.parent,x=this.content,w=x&&x.getFormats(),t=this.getFormats(),s=t.height,q=t.width,v=mstrmojo._Formattable.getBorderWidths(this);this.clearCache();x.clearCache();t.height=(parseInt(u.getHeight(),10)-v.h)+k;w.height=this._ts.getContentHeight(t.height,t);t.width=w.width=(u.getWidth()-v.w)+k;t.top=t.left=0;t["z-index"]=u.getMaxZIndex()+1;a.call(this,j,s,q);},onminimize:function b(){var w=this.content,s=w.dimNode||w.domNode,v=w&&w.getFormats(),u=this.getFormats(),t=u.height||s.offsetHeight,q=u.width;this.clearCache();w.clearCache();u.width=v.width=u.normWidth;u.top=u.normTop;u.left=u.normLeft;if(u.normZIndex!==null&&u.normZIndex!==undefined){u["z-index"]=u.normZIndex;}v.height=0;u.height=this._ts.getPortletMinHeight(u);a.call(this,O,t,q);},onrestore:function S(){var v=this.content,u=v&&v.getFormats(),t=this.getFormats(),s=t.height,q=t.width;this.clearCache();v.clearCache();t.height=t.normHeight;u.height=this._ts.getContentHeight(t.height,t);t.width=u.width=t.normWidth;t.top=t.normTop;t.left=t.normLeft;if(t.normZIndex!==null&&t.normZIndex!==undefined){t["z-index"]=t.normZIndex;}a.call(this,W,s,q);},changeWindowState:function I(t){N.call(this,t);var s=this.content,u=l.call(s,t),q=s.model.docModel||s.model;return q.getUnitFormatAction(s,1,u);},oncollapse:function U(q){a.call(this,O,undefined,undefined,q);},onexpand:function D(q){a.call(this,W,undefined,undefined,q);},adjustFP:function g(){var s=(parseInt(this.defn.ds,10)===W);this.content.set("visible",s);this.updateContentHeight(!s);var q=this.parent;if(q.refreshFP){q.refreshFP();}},postBuildRendering:function Y(){if(!this._sub_dsChange){this._sub_dsChange=this.defn.attachEventListener("dsChange",this.id,T);}this._super();if(this.isInFilterPanel()){var q=(parseInt(this.defn.ds,10)===W);this.updateContentHeight(!q);}}});mstrmojo.DocPortlet.ST_RESTORE=W;mstrmojo.DocPortlet.ST_MAX=j;mstrmojo.DocPortlet.ST_MIN=O;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(Y){var X=this.list,V=X.selectedIndex,U=X.items.length,W=Y?U-1:0;if(V===W){X.clearSelect();return ;}if(V===null||V<0){V=Y?0:U-1;}else{V+=Y?1:-1;}X.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(){if(this.suggestionShown){this._lastOpened.nextHighlight();}},preHighlight:function H(){if(this.suggestionShown){this._lastOpened.preHighlight();}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if(j&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(){D.call(this,true);},preHighlight:function(){D.call(this,false);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor");function C(E,F){var D=this;if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(E,F,{silent:true});}else{mstrmojo.xhr.request("POST",D.path,F,E,undefined,D.XServer,D.baseParams);}}function A(H,I,G,D){var E=this,F={taskId:"createFolder",taskContentType:"json",folderID:H,name:I,description:G};C.call(E,F,D);}function B(E,I,F){if(!E){mstrmojo.alert(mstrmojo.desc(3380));return false;}var G=this,H=G.fId,D={success:function(J){G.contPanel.name.set("value","");G.contPanel.desc.set("value","");if(G.okFn){G.okFn(J,F);}},failure:function(J){if(J.getResponseHeader){mstrmojo.alert(J.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};if(mstrApp.isSingleTier&&this.dp){this.dp.newFolder(H,E,I,D);}else{A.call(G,H,E,I,D);}}mstrmojo.NewFolderEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.NewFolderEditor",cssClass:"mstrmojo-NewFolderEditor",title:mstrmojo.desc(663,"Create Folder"),help:"Create_a_new_folder.htm",navigateAfter:false,okFn:mstrmojo.emptyFn,path:mstrConfig.taskURL,fId:null,children:[{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-Input-Panel",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Name-Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Desc-Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"btns",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",alias:"ok",text:mstrmojo.desc(1442,"OK"),onclick:function(){var E=this.parent.parent,G=E&&E.opener,D=E.contPanel.name.value,F=E.contPanel.desc.value;if(!B.call(E,D,F,E.navigateAfter)){E.close();}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.menus.MenuEditor");mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function D(E){this._super(E);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function C(){return new mstrmojo.ui.menus.MenuEditor({popupConfig:this});},destroy:function B(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!==this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var U="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasMenuItems:function Q(){return !!this.menus.length;},getMenuItems:function E(V){return mstrmojo.array.filter(this.menus.slice().reverse(),function(Z,Y,X){var W=X[Y+1];return V||Z.cls!==U||(Y&&W&&W.cls!==U);}).reverse();},getMenuItem:function C(Y){var X=this.menus,V;if(X!==null){for(V=0;V<X.length;V++){var W=X[V];if(W.cls===Y){return W;}}}return null;},absorbMenuItems:function S(V){this.menus=this.menus.concat(V.menus);},addMenuItem:function I(c,Y,a,W,Z){var b,X,V;if(!c||typeof c==="string"){b=c;}else{b=c.n;X=c.ttp;}V={n:b,ttp:X,cls:Y,fn:a,ctxt:W};if(isNaN(Z)||Z>=this.menus.length){this.menus.push(V);}else{this.menus.splice(Z,0,V);}return V;},addCustomMenuItem:function T(a,X,Z,W,V){var Y=this.addMenuItem(a,X,Z,V);Y.getItemMarkup=W;return Y;},addDisabledMenuItem:function O(W,V){this.addNonInteractiveMenuItem(W,V,true);},addNonInteractiveMenuItem:function M(Z,W,V){var X=["non-int"];if(W){X.push(W);}if(V){X.push("disabled");}var Y=this.addMenuItem(Z,X.join(" "),mstrmojo.emptyFn);Y.dsbld=true;},addSeparator:function D(){this.addMenuItem("",U,function(){return false;});},addPopupMenuItem:function R(c,X,b,Y,W,Z){var a=["pop "];if(Y){a.push(Y);}var V=this.addMenuItem(c,a.join(" "),b,W,Z);V.pop=true;V.scope=X;return V;},addActionPopupMenuItem:function L(c,W,a,b,X,V,Z){var Y=this.addPopupMenuItem(c,W,b,(X||"")+" ax",V,Z);Y.actionFn=a;Y.ax=true;},addSubMenuItem:function K(Z,X,W,Y,V){this.addPopupMenuItem(Z,W,Y,X,V);},addEditorMenuItem:function P(Z,W,Y,V,X){this.addPopupMenuItem(Z,W,Y,"",V,X);},getToggleItemStates:function F(d,f,V,b,X,a){var Y,Z,W,c;if(typeof d==="string"){Y=Z=d;W=c="";}else{Y=d.on||"";Z=d.off||"";W=d.ttpOn||"";c=d.ttpOff||"";}var e=[{n:Y,ttp:W,cls:f+" on",fn:b,ctxt:a},{n:Z,ttp:c,cls:f,fn:V,ctxt:a}];if(!X){e.reverse();}return e;},addToggleMenuItem:function J(c,Y,a,X,W,b,V){var Z=this.getToggleItemStates(c,Y,a,X,b,V);return this.addDualStateItem(W,Z[0],Z[1]);},addDualStateItem:function G(W,V,X){return this.addMenuItem({n:V.n,ttp:V.ttp},V.cls,this.getDualStateHandler(W,V,X),V.ctxt);},getDualStateHandler:function H(W,V,X){return function(Z,a){var Y=[V,X];if(Z.cls===V.cls){Y.reverse();}Y[1].fn.call(mstrmojo.all[W],Z,a);Z.n=Y[0].n;Z.ttp=Y[0].ttp;Z.cls=Y[0].cls;};},addRadioMenuGroup:function B(X,c,Y,W,V,b,a){var Z=[];Y.forEach(function(g,d){if(g.separator){this.addSeparator();return ;}var i=g.text,h=(W||"")+" "+(g.cls||"")+(b?"":" radio")+(g.value===X?" on":""),f=function(){if(c.call(this.ctxt,g.value,X,g)===false){return false;}X=g.value;Z.forEach(function(j){j.cls=j.cls.replace(/ on$/,"")+(j.radioValue===X?" on":"");});return true;},e=a?this.addCustomMenuItem(i,h,f,a(g,d),V):this.addMenuItem(i,h,f,V);e.radioValue=g.value;Z.push(e);},this);},clear:function N(){this._super();this.menus=[];},newInstance:function A(V){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},V));}});}());(function(){mstrmojo.requiresCls("mstrmojo.TreeNode","mstrmojo._IsExprNode","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.expr","mstrmojo._HasOwnAvatar");var F=mstrmojo.array,M=mstrmojo.expr,P=mstrmojo.dom,A=mstrmojo.css;function J(R,Q){var T=R.data,S=T&&T.nds;if(!S){return null;}if(Q){Q.sort(F.numSorter);}else{Q=R.sortSelectedIndices();}if(!Q.length){return null;}return{idxs:Q,nds:F.get(S,Q)};}function N(S){var R=S.ctxtBuilder,U=R&&R.itemWidgets,Q=U&&U[0],T=Q&&Q.data;if(T&&T.not&&(U.length>0)){delete T.not;Q.paint();}}mstrmojo.AndOrNode=mstrmojo.declare(mstrmojo.TreeNode,[mstrmojo._IsExprNode,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.AndOrNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},itemsContainerPrefix:function(){return this.domNode.childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[2].firstChild;},dropCueNode:function(){return this.domNode.childNodes[2].lastChild;},itemsContainerSuffix:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onitemCntChange:function(){A.toggleClass(this.itemsContainerNode,["multi"],this.itemCnt>2);},onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();},ondropCuePosChange:mstrmojo.TreeNode.prototype.markupMethods.ondropCuePosChange},multiSelect:true,itemIdField:null,init:function(Q){this._super(Q);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());var R=this.data;if(R){delete this.data;this._set_data(null,R);}},itemCnt:0,postBuildRendering:function(){var Q;this.set("itemCnt",this.items.length);if(this._super){Q=this._super();}N(this);return Q;},preadd:function L(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},preremove:function O(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},_set_data:function(T,Q){var R=this.data,S=(R!==Q);if(S){this.data=Q;if(Q&&!Q.nds){Q.nds=[];}this.set("items",Q&&Q.nds);}return S;},isDragValid:function K(){return true;},isSelectableArea:function(Q){return false;},getDragData:function(Q){var S=this._super(Q);if(S&&!S.html){var R=S.et&&M.ET2TGT[S.et];S.html=R?S[R]&&S[R].n||"":S.n||"";}return S;},remove:function I(R,S){var Q=this._super(R);if(Q>-1){var T=S||this.suppressConsolidation;if(!T){this.consolidate(false);}}return Q;},move:function(R,Q){this.suppressConsolidation=true;var S;if(this._super){S=this._super(R,Q);}this.suppressConsolidation=false;return S;},consolidate:function E(){var U=this.parent;if(!U||!U.remove){return ;}var S=this.items,R=S&&S.length;if(R<2){var T=R?S[0]:null,Q=this.childIndex();if(T){U.add([T],Q);}U.remove(this.data);}},indent:function G(S,Q){var R=J(this,S);if(!R){return ;}this.remove(R.idxs,true);var W=R.nds,V=Q&&Q.fn||this.data&&this.data.fn,U={et:M.ET.ANDOR,nds:W,fn:V};if(W.length===2&&W[0].not){if(W[1].not){delete W[0].not;delete W[1].not;U.not=true;U.fn=(V===M.FN.AND?M.FN.OR:M.FN.AND);}else{var T=W[0];W[0]=W[1];W[1]=T;}}this.add([U],R.idxs[0]);this.consolidate(false);},outdent:function C(R){var S=this.parent,Q=S&&S.data;if(!Q||Q.et!==M.ET.ANDOR){return ;}var T=J(this,R);if(!T){return ;}this.remove(T.idxs,true);if(this.data.not){T.nds[0].not=true;}S.add(T.nds,this.childIndex());this.consolidate(false);},edit:function D(Z,a,S){if(!Z){return ;}var Y=this.data,X=Y&&Y.fn,R=Z.data,f=R&&R.not;if(!R){R={};Z.data=R;}R.not=!!S;if(X!==a){var Q=Y.nds;if(Q&&Q.length>2){var e=Z.childIndex();if(e>0){this.indent([e-1,e],{fn:a});}}else{Y.fn=a;var V=this.ctxtBuilder,U=V&&V.itemWidgets;for(var T=0,W=(U&&U.length)||0;T<W;T++){var b=U[T];if(b){b.paint();}}}}else{Z.paint();}},preclick:function H(Q){var S=null,R=P.eventTarget(Q.hWin,Q.e);if(R===this.prefixNode){}else{if(P.contains(this.prefixNode,R,true)){S="andor";}}Q.part=S;},createAvatar:function B(S){var R=document.createElement("div"),T=P.findWidget(S),Q=T.getAvatarNode&&T.getAvatarNode();if(!Q){Q=T.condNode.cloneNode(true);Q.style.boxSizing="border-box";Q.style.width=T.condNode.offsetWidth+"px";}R.appendChild(Q);A.addClass(R,T.avatarCssCls||"mstrmojo-FE mstrmojo-ConditionNode");R.style.zIndex=20;return R;},_ndsToMove:J});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var I=mstrmojo.css,G=mstrmojo.array,F=mstrmojo.dom;mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,allowHTML:true,init:function N(O){this._super(O);I.addWidgetCssClass(this.list,"ctrl-popup-list");},initChildren:function E(){this.children=this.getPopupListConfig();this._super();},getSelectedItem:function H(){var O=this.items;return O&&O[this.selectedIndex];},selectItemByField:function J(P,O){this.set("selectedIndex",G.find(this.items||[],P,O));},getPopupWidget:function D(){return this.list;},getPopupList:function K(){return this.list;},_set_items:function B(R,O){var Q=this.items;this.items=O;delete this.selectedIndex;if(Q!==O){var P=this.hasRendered;if(P){this.refresh();}return true;}return false;},onclick:function M(O){this._super(O);var Q=this,P=Q.getPopupWidget();Q.mw=Q.mw||function(R){if(!F.contains(P.domNode,F.eventTarget(self,R),true,document.body)){P.close();F.detachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Q.mw);}};F.attachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Q.mw);},_set_selectedIndex:function A(T,R){if((R!==0&&!R)||R<0){return false;}var P=this.selectedIndex=R,O=this.getPopupList(),Q=O.items,S=this.selectedNode;O.set("selectedIndex",P);if(S&&Q&&Q[P]){S.innerHTML=this.allowHTML?Q[P].n:mstrmojo.string.encodeHtmlString(Q[P].n);S.title=Q[P].title||"";}this.onitemSelected(Q[P],P);return true;},getPopupListConfig:function C(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,listHooks:{select:function O(R,S,Q){this.parent.set("selectedIndex",Q);this.close();}},getItemProps:function P(S,Q){var R=mstrmojo._IsList.getItemProps.call(this,S,Q);R.style=this.parent.itemCssText||"";return R;}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function L(P,T,O,S,R){S=S||{};S.items=P;var Q;if(R===true){Q=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:O||0},S);}else{Q=new mstrmojo.ui.Pulldown(S);if(O!==undefined){Q.set("selectedIndex",O);}}Q.postselectedIndexChange=function(U){var X=U.value,W=U.valueWas;if(X!==W){var V=this.items;T.call(this,V[X],V[W]);}};return Q;};}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz","mstrmojo.hash");mstrmojo.CheckList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.CheckList",inputType:"checkbox",cssClass:"mstrmojo-CheckList",itemCssClass:"mstrmojo-CheckList-item"});mstrmojo.requiresCls("mstrmojo._InputListHoriz");mstrmojo.CheckListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.CheckListHoriz",inputType:"checkbox",cssClass:"mstrmojo-CheckListHoriz",itemCssClass:"mstrmojo-CheckListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var H=mstrmojo.array,C=mstrmojo.hash,B=19,J=13,D=27;mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,editOnClick:false,init:function K(P){this._super(P);var M=this.getPopupList();M.renderOnScroll=this.renderOnScroll||M.renderOnScroll;M.renderBlockSize=this.renderBlockSize||M.renderBlockSize;mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-SearchablePulldown");var O=M.constructor.prototype,N=M.getItemProps?M.getItemProps:O.getItemProps,Q=M.getItemMarkup?M.getItemMarkup:O.getItemMarkup;M.getItemProps=function(V,R){var S=this._spft||"",W=V.n,T=W.toUpperCase().indexOf(S);if(T===-1){S="";}var U=N.call(this,V,R);U.before=W.slice(0,T);U.input=W.substring(T,T+S.length);U.after=W.slice(T+S.length,W.length);return U;};M.getItemMarkup=function(S,R){return Q.call(this,S,R).replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");};},onclick:function L(M){var P=this.selectedNode,Q=M.getTarget(),R=M.e.offsetX>=(P.offsetWidth-B),O=this.getPopupWidget(),N=O.visible;if(Q===P&&(!N||(N&&R))){this.set("isEditing",!N);this._super(M);}},onPopupWidgetClosed:function F(){this.set("isEditing",false);var P=this.getPopupList(),Q=P._oldItems,N=this.text;delete P._oldItems;if(Q){var M=H.find(Q,"n",N);if(M===-1&&!this.allowCustomText){var O=P.items[0]||Q[0];M=H.find(Q,"n",O.n);}P.set("items",Q);this.set("selectedIndex",M);}},_set_selectedIndex:function E(O,M){if(this.allowCustomText&&M===-1){this.selectedIndex=-1;this.onitemSelected(null,M);}else{this.isSearching=false;this._super(O,M);if(this.hasRendered){var N=this.selectedNode;this.text=N.innerText?N.innerText:N.textContent;}}return true;},onkeydown:function G(N){this._super(N);var M=window.event||N.e;if(M.keyCode===J){this.getPopupList().close();}},onkeyup:function A(O){this._super(O);var M=window.event||O.e,P=M.keyCode,N=this.getPopupList();if(P===D||P===J){N.close();}else{this.processSearch();}},processSearch:function I(){this.isSearching=true;this.hideTooltip();var M=[],O=this.getPopupList(),P=this.selectedNode.innerHTML,Q=O._oldItems||O.items,N=P.toUpperCase();N=N.replace(/<BR>/,"");if(N.length>0){H.forEach(Q,function(R){if(R.n.toUpperCase().indexOf(N)>-1){M.push(C.clone(R));}},this);}else{M=Q;}O._spft=N;if(this.customizeSearchResult){this.customizeSearchResult(M);}O.set("items",M);O.adjustCornersForPopupOverflow();delete O._spft;O._oldItems=Q;O.set("visible",M.length!==0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Obj","mstrmojo.ui.ButtonBar","mstrmojo.ui.Checkbox","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ThreeColumnContainer");var D=mstrmojo.hash;mstrmojo.vi.models.editors.ControlsViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.editors.ControlsViewFactory",getEditorGroup:function B(H,I){return new mstrmojo.vi.ui.editors.EditorGroup(D.copy(I,{children:H}));},getLabelAndControl:function G(J,K,M,O,L,N){var P=new mstrmojo.Label({text:J,setDimensions:function(S,Q){var R=this.domNode;if(R){R.style.width=Q;}}}),I=P,H=K;if(L){I=K;H=P;}I.slot="col1Node";H.slot="col2Node";return new mstrmojo.ui.editors.controls.TwoColumnContainer(D.copy(N,{col1Width:M||"40%",col2Width:O||"60%",children:[I,H],getLabel:function(){return P;},getCtrl:function(){return this.children.filter(function(Q){return Q!==P;})[0];}}));},getLabelAndControlWithMsg:function C(L,M,P,O,S,H,N,Q){var R=new mstrmojo.Label({text:L,setDimensions:function(W,U){var V=this.domNode;if(V){V.style.width=U;}}}),T=new mstrmojo.Label({text:P?mstrmojo.desc(14548,"Changes will be applied after Desktop is restarted."):"",setDimensions:function(W,U){var V=this.domNode;if(V){V.style.width=U;}},setText:function(U){this.text=U;}}),K=R,J=M,I=T;if(N){K=M;J=R;}K.slot="col1Node";J.slot="col2Node";I.slot="col3Node";return new mstrmojo.ui.editors.controls.ThreeColumnContainer(D.copy(Q,{col1Width:O||"30%",col2Width:S||"30%",col3Width:H||"40%",children:[K,J,I],getLabel:function(){return R;},getCtrl:function(){return this.children.filter(function(U){return U!==R;})[0];},getMessage:function(){return T;}}));},getPulldown:function F(I,L,H,K,J){return mstrmojo.ui.Pulldown.newPulldown(I,function(M,N){L.call(this,M.v,N&&N.v);},H,K,J);},getCheckboxAndLabel:function A(N,L,K){var J=new mstrmojo.ui.Checkbox({checked:N,oncheckedChange:function(){var O=this.checked;K.call(this,O,!O);}});var M=this.getLabelAndControl(L,J,"14px","100%",true);M.cssClass="checkLabel";var I=M.getLabel();I.onclick=function H(){J.onclick();};I.cssDisplay="inline-block";return M;},getButtonBar:function E(J,H,L,K){K=K||{};K.items=J;var I=new mstrmojo.ui.ButtonBar(K);I.singleSelect(H);I.postselectionChange=function(M){var N=this.items,O=N[M.removed&&M.removed[0]];L.call(this,N[M.added[0]],O);};return I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.util.ui.ColorPicker","mstrmojo.ui.editors.controls.ColorList","mstrmojo.ui.editors.controls.ColorWheel","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.TextBoxWithLabel","mstrmojo.ui.ButtonBar","mstrmojo.Button","mstrmojo.css");var G=1,Q=2,X=mstrmojo.css,L=mstrmojo.array,I=mstrmojo.util.ui.ColorPicker,B=G,V=0,E=1,K=2,H="txtColor",U="automatic";var D=[{n:mstrmojo.desc(12071,"Color fill"),id:V},{n:mstrmojo.desc(12072,"No fill"),id:E},{n:mstrmojo.desc(12073,"Gradient"),id:K}];function F(){return this.color!==U?this.color:this.autoPreviewColor;}function b(e,d,c){return mstrmojo.Button.newWebButton(e,c,d,{slot:"buttonNode",cssDisplay:"inline-block"});}function M(c){return{scriptClass:"mstrmojo.ui.editors.controls.ColorList",items:c,postselectionChange:function(d){var g=d.added;if(g){var f=this.parent,e=this.items[g[0]].id;f.set("color",e);f.colorChanged(e);}}};}function a(c){return"#"+c.replace("#","");}function N(){var c=this.txtColor1,f=this.txtColor2,d=this.color,e=false,g=this.colorStyle;switch(g.items[g.selectedIndex].id){case V:d=a(c.value);break;case E:d="transparent";break;case K:d={or:this.gradientOrientation.getSelectedItems()[0].id,c1:a(c.value),c2:a(f.value)};e=true;break;}X.toggleClass(this.containerNode,"grad",e);this.set("color",d);}function J(c){this.set("activeColor",c);var d=this[c];L.forEach([1,2],function(f){var e=this[H+f];X.toggleClass(e.domNode,"on",e===d);},this);this.colorWheel.set("color",a(d.value));}function O(c,d,e,f){if(typeof e==="string"){if(e==="transparent"){e="#ffffff";}}else{if(e.c1){e=e["c"+c];}}return{scriptClass:"mstrmojo.TextBoxWithLabel",alias:H+c,cssDisplay:"block",label:d,autoCorrect:false,maxLength:6,size:6,value:e.replace("#",""),bindings:f,onfocus:function(){J.call(this.parent,this.alias);},onvalueChange:function(g){if(!/^[0-9a-fA-F]{0,6}$/.test(g.value)){this.value=g.valueWas;}else{if(this.value.length===6){var h=this.parent;h.colorWheel.set("color",a(this.value));N.call(h);}}}};}function S(){var c=F.call(this),g="this.parent.colorStyle.items[ this.parent.colorStyle.selectedIndex ].id",i=g+" === "+K,f=g+" !== "+E,d=(this.showNoFill&&c==="transparent")?1:0,e=D.slice(0,this.showGradient?3:2),h=0;if(!this.showNoFill){e.splice(1,1);}if(c.c1){d=L.find(e,"id",K);h=c.or?0:1;}this.addChildren([{scriptClass:"mstrmojo.ui.Pulldown",alias:"colorStyle",selectedIndex:d,items:e,onitemSelected:function(){N.call(this.parent);}},{scriptClass:"mstrmojo.ui.ButtonBar",alias:"gradientOrientation",items:[{n:mstrmojo.desc(2066,"Horizontal"),id:1,css:"h"},{n:mstrmojo.desc(2069,"Vertical"),id:0,css:"v"}],selectedIndex:h,bindings:{visible:i},postselectionChange:function(j){if(j.added){N.call(this.parent);}}},{scriptClass:"mstrmojo.Button",cssClass:"simpleButton",text:mstrmojo.desc(11658,"Swap"),bindings:{visible:i},onclick:function(){var l=this.parent,k=l.txtColor1,m=l.txtColor2,j=k.value;k.set("value",m.value);m.set("value",j);N.call(l);}},O(1,mstrmojo.desc(12074,"Color HEX:"),c,{visible:f,label:g+" === "+K+' ? "'+mstrmojo.desc(12075,"Color 1 HEX:")+'" : "'+mstrmojo.desc(12074,"Color HEX:")+'";'}),O(2,mstrmojo.desc(12076,"Color 2 HEX:"),c,{visible:i}),{scriptClass:"mstrmojo.ui.editors.controls.ColorWheel",alias:"colorWheel",color:c.c1||c,onColorPicked:function(j){var k=this.parent;k[k.activeColor].set("value",j.replace("#",""));},bindings:{visible:f}},b(mstrmojo.desc(1442,"Ok"),true,function(){var k=this.parent,j=k.color;if(!j.c1){I.addCustomColor(j);}k.colorChanged(j);}),b(mstrmojo.desc(2140,"Cancel"),false,function(){this.parent.colorCanceled();})]);J.call(this,H+"1");}function T(){var d=F.call(this),c=this.sampleNode.style;if(d){if(d.c1){var e=X.buildGradient(d.or,d.c1,d.c2);c[X.convertCssToCamelCase(e.n)]=e.v;}else{c.background=d;}}}mstrmojo.ui.editors.controls.AdvancedColorPicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPicker",markupString:'<div id="{@id}" class="mstrmojo-ui-AdvColorPicker {@cssClass}" style="{@cssText}" mstrAttach:click><div class="acpToolbar"><div class="acpBtn acpSwatchBtn"></div><div class="acpBtn acpPaletteBtn"></div><div class="acpColor"></div></div><div class="acpContent" ></div><div class="acpButtons" ></div></div>',markupSlots:{swatchBtnNode:function(){return this.domNode.firstChild.firstChild;},paletteBtnNode:function(){return this.domNode.firstChild.childNodes[1];},sampleNode:function(){return this.domNode.firstChild.lastChild;},containerNode:function(){return this.domNode.firstChild.nextSibling;},buttonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onpickerModeChange:function P(){B=this.pickerMode;this.renderContent();},oncolorChange:function A(){T.call(this);},onautoPreviewColorChange:function C(){T.call(this);}},color:"#000fff",showGradient:true,showNoFill:true,showAutomatic:false,autoPreviewColor:null,activeColor:H+"1",swatchBtnNode:null,paletteBtnNode:null,colorStyle:null,gradientOrientation:null,txtColor1:null,txtColor2:null,colorWheel:null,pickerMode:G,init:function R(c){this._super(c);this.pickerMode=B;},renderContent:function W(){this.showPickerForCurrentMode();},showPickerForCurrentMode:function Y(){var e=this;this.removeChildren();var f=B===G;if(f){var d=I.getBasicColors();if(!this.showNoFill){d.shift();}if(this.showAutomatic&&this.color!==U){this.addChildren([{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4531,"Automatic"),cssClass:"AutomaticOption",onclick:function c(){e.set("color",U);e.colorChanged(U);}}]);}this.addChildren([mstrmojo.hash.copy({alias:"basicColors"},M(d)),M((mstrApp&&mstrApp.getPreferredColors)?L.map(mstrApp.getPreferredColors(),function(g){return{n:g,id:g};}):[]),M(I.getCustomColors())]);}else{S.call(this);}X.toggleClass(this.swatchBtnNode,"on",f);X.toggleClass(this.paletteBtnNode,"on",!f);this.buttonNode.style.display=f?"none":"block";},colorChanged:mstrmojo.emptyFn,colorCanceled:mstrmojo.emptyFn,onclick:function Z(c){var d=c.getTarget(),e=this.pickerMode;if(d===this.swatchBtnNode){e=G;this.set("pickerMode",e);}else{if(d===this.paletteBtnNode){e=Q;this.set("pickerMode",e);}}}});mstrmojo.ui.editors.controls.AdvancedColorPicker.VAL_AUTOMATIC=U;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.array","mstrmojo.threshold.ThresholdModel");var G=mstrmojo.array;var I=[{n:mstrmojo.desc(5999,"Replace Text"),v:3},{n:mstrmojo.desc(6000,"Quick Symbol"),v:10},{n:mstrmojo.desc(11898,"Replace With Image"),v:4}];var F=mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL;function B(N,O,M){this.parent.raiseFormatValueChange(N,O,M);}function E(O){var N=this.parent.model,M=N.threshold;this.replaceType.set("enabled",O);this.replaceText.set("enabled",O);this.replaceSymbol.set("enabled",O);if(!O){delete M[N.getReplaceTypeName()];delete M[N.getReplaceTextName()];}}mstrmojo.threshold.TextGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.threshold.TextGroup",nameRow:undefined,replaceRow:undefined,replaceType:undefined,replaceText:undefined,replaceSymbol:undefined,preBuildRendering:function K(){this._sync=true;if(this._super){this._super();}},postBuildRendering:function A(){if(this._super){this._super();}this._sync=false;},children:[{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"replaceRow",col1Width:"10%",col2Width:"90%",replaceChk:undefined,children:[{scriptClass:"mstrmojo.ui.Checkbox",slot:"col1Node",alias:"replaceChk",oncheckedChange:function D(){E.call(this.parent.parent,this.checked);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:mstrmojo.desc(11888,"Enable Data Replace")}]},{scriptClass:"mstrmojo.ui.Pulldown",alias:"replaceType",selectedIndex:0,enabled:false,items:I,onenabledChange:function H(){if(this.enabled){B.call(this,"rtp",this.items[this.selectedIndex].v);}},postselectedIndexChange:function(O){var S=O.value,P=O.valueWas,N=this.parent,M=N.replaceText,R=N.replaceSymbol;if(S!==P){var Q=S===1;M.set("visible",!Q);M.set("hint",S===2?mstrmojo.desc(11889,"Image URL"):"");R.set("visible",Q);B.call(this,"rtp",this.items[S].v);}}},{scriptClass:"mstrmojo.TextBox",alias:"replaceText",enabled:false,onenabledChange:function H(){if(this.enabled){B.call(this,"rtxt",this.value);}},onvalueChange:function J(){B.call(this,"rtxt",this.value);var M=this.parent,N=M.replaceType;if(!M.parent.model.threshold.rtp){B.call(this,"rtp",N.items[N.selectedIndex]);}}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"replaceSymbol",selectedIndex:0,isHostedWithin:false,enabled:false,visible:false,items:F,getPopupListConfig:function C(){var M=mstrmojo.ui.Pulldown.prototype.getPopupListConfig();M.getItemMarkup=function N(){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@n}</{@tag}>';};return M;},onenabledChange:function H(){if(this.enabled){B.call(this,"rtxt",this.items[this.selectedIndex].v);}},postselectedIndexChange:function(M){var O=M.value,N=M.valueWas;if(O!==N){B.call(this,"rtxt",this.items[O].v);}}}],setFormatSource:function L(M){var N=this,O=N.parent.model;this.syncControls(function(){var P=M[O.getReplaceTextName()],S=M[O.getReplaceTypeName()];N.replaceRow.replaceChk.set("checked",!!P);var Q=G.find(I,"v",S);N.replaceType.set("selectedIndex",Q===-1?0:Q);if(S!==10){N.replaceText.set("value",P||"");N.replaceSymbol.set("selectedIndex",0);}else{var R=Math.max(G.find(F,"v",P),0);N.replaceSymbol.set("selectedIndex",R);N.replaceText.set("value","");}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.css");var C,D=mstrmojo.css;var J=mstrmojo.declare(mstrmojo.ui.PopupList,null,{getItemMarkup:function G(K){if(!C){C=this._super(K).replace(">{@en@n}<","><div>{@en@n}</div><");}return C;},getItemProps:function F(M,K){var L=this._super(M,K);L.addCls("bst"+K);if(K){L.title=M.n;L.n="";}else{L.tt="";}return L;}});mstrmojo.ui.editors.controls.LineStyleButton=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",itemValueField:"id",showThickOption:true,markupMethods:{onenabledChange:function E(){D.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function H(L){this._super(L);var K=["mstrmojo-ui-LineStyle"];if(!this.showThickOption){K.push("no-thick");}D.addWidgetCssClass(this,K);},getListCfg:function I(){return new J({selectionPolicy:"reselect",items:[{n:mstrmojo.desc(2258,"None"),id:"none"},{n:mstrmojo.desc(2259,"Dashed"),id:"1pt dashed"},{n:mstrmojo.desc(2260,"Dotted"),id:"1pt dotted"},{n:mstrmojo.desc(2262,"Thin"),id:"1pt solid"},{n:mstrmojo.desc(2264,"Thick"),id:"2pt solid"}]});},postBuildRendering:function A(){this.borderStyleNode=this.previewNode.appendChild(document.createElement("div"));return this._super();},updatePreview:function B(){var N=this.borderStyleNode,L=this.selectedValue.split(" "),K=this.selectedValue==="conflict";D.toggleClass(this.previewNode,"conflict",K);if(N&&!K){var M=N.style;if(L.length===1){M.borderTopStyle=L[0];}else{M.borderTopWidth=L[0];M.borderTopStyle=L[1];}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.EditableLabel");var A=mstrmojo.css,E=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",markupMethods:{onenabledChange:function D(){this.txtLabel.set("editOnClick",this.enabled);A.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");},updatePreview:function C(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},validateTextInput:function(F){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:E.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetTree","mstrmojo.expr","mstrmojo.AndOrNode","mstrmojo.ConditionNode");var F=mstrmojo.expr,B=F.ET;function A(G){var I=G&&G.src,J=I&&I.data,H=J&&J.et;return(H in F.ETs);}mstrmojo.FilterExpr=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.FilterExpr",allowDrop:A,renderOnScroll:false,itemIdField:null,nodeClassMap:{14:mstrmojo.AndOrNode,"*":mstrmojo.ConditionNode},onBlankClick:function(G){this.clearTreeSelect();},onnodemousedown:function(H){var I=mstrmojo.dom.eventTarget(H.hWin,H.e),J=H.src,G=J.listMapper.findIndex(J,J.itemsContainerNode,I),K=G>=0?J.ctxtBuilder.itemWidgets[G]:null;if(!K||(K.isSelectableArea&&!K.isSelectableArea(I))){this.onBlankClick(H);}},getItemIdentityProp:function(G){return G.et;},itemFunction:function(L,I,M){var H=M.tree,J=H.getItemConfig(L,I,M),K=H.nodeClassMap,G=K[H.getItemIdentityProp(L)]||K["*"];return G&&(new G(J));},getItemConfig:function(J,G,K){var H=(J.et===B.ANDOR),I=K.tree||K;return{data:J,tree:I,parent:K,bindings:{prefixedAndOrEditable:"this.parent.editable"},itemFunction:(H)?K.itemFunction:null,draggable:H?I.draggable:false,dropZone:H?I.dropZone:false,allowDrop:H&&I.dropZone?I.allowDrop:null,allowCopy:H?I.allowCopy:false,editable:I.isEditable?I.isEditable(J):I.editable,makeObservable:H&&K.makeObservable,onclick:I.onnodeclick,onadd:I.onnodeadd,onremove:I.onnoderemove};},getDragData:function(G){var I=this._super(G);if(I&&!I.html){var H=I.et&&F.ET2TGT[I.et];I.html=H?I[H]&&I[H].n||"":I.n||"";}return I;},newCondition:function E(K){K=K||{et:B.AQ};var J=this.selectionParentNode,G;J=(J&&J.hasRendered)?J:this;if(J!==this){G=J.add([K]);}else{var I=this.addCondition([K],null,true);G=I.index;J=I.widget;}var H={widget:J,index:G,data:K};if(this.onNew){this.onNew(H);}return H;},addCondition:function D(I,K){var L=this.items,H=L&&L.length,N=I&&I.length;if(!N){return null;}var J,G;if(H&&L[0].et===B.ANDOR){J=this.ctxtBuilder.itemWidgets[0];G=J.add(I,null);}else{if(!H&&(N===1)){J=this;G=0;this.add(I,0);}else{if(H){var M=L[0];this.remove(M);I.unshift(M);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);J=this.ctxtBuilder.itemWidgets[0];G=H?1:0;}}return{widget:J,index:G};},addSingleCondition:function C(H,G){var I=this.addCondition([H],G);return I.widget.ctxtBuilder.itemWidgets[I.index];},ondrop:function(J){if(this._super){this._super(J);}var H=this.items,G=H&&H.length,I=H.concat();if(G>1){if(H.remove){H.remove(0,H.length);}else{this.set("items",null);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList");var O=mstrmojo.hash,W=mstrmojo.func,L=mstrmojo.meta.TP,F="5CECE58CC1D549F890EB61C4DB2156A3",T="E0CCB9CF22104A489CBE78D974AFD19E",Q=mstrmojo.chart.model.enums.EnumDSSObjectType,K=mstrmojo.array,D=mstrmojo.dom,X=function(f,g,a){var d=f.scrollableIncFetch,c=d?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",e={scriptClass:c,items:g.items,multiSelect:a};if(d){e.browseConfig={blockBegin:g.bb,blockCount:g.bc,totalSize:g.sz,folderLinksContextId:f.folderLinksContextId,rootFolderID:g.did,browsableTypes:f.browsableTypes,browsableViewMedias:f.browsableViewMedias,dataProvider:f.dataProvider};e.onwaitingChange=function(){if(f.booklet){f.booklet.set("waiting",this.waiting);}};}var b=mstrmojo.insert(e);b.render();return b;},A=function(c,d,a){var b=mstrmojo.ObjectBrowser.widgetHandler||X;return b(c,d,a);},N={success:function(c){var d=this.ob,b=c.items,e=d.pageCache[d.currentPage],a=e._w;e.items=b;a.set("items",b);this.ob=null;this.item=null;window.clearTimeout(d._btm);d.booklet.set("waiting",false);if(d.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},failure:function(a){window.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},S=function(f,e,c){var d=c?-1:1,b=f.pageCache.length,g;for(g=f.currentPage+d;g<b&&g>=0;g+=d){var a=f.pageCache[g];if(a._k===e.k){return{steps:g-f.currentPage,cache:a};}}return null;},C=function(e,d,c,f){var g=e.currentPage+1,b=e.pageCache.length,a;for(a=g;a<b;a++){e.pageCache[a]._w.destroy();delete e.pageCache[a].items;}e.pageCache=e.pageCache.slice(0,g);f._w=c;f._k=d.k;e.pageCache[g]=f;e.cacheChange();},H=function(b){var a=mstrmojo.hash.walk("anc.items.0.items",b);this.set("canGoUp",!(!b.pf||!a));},I=function(e,d,f,c,b){delete e._btm;var a;if(!c){a=A(e,f,e.multiSelect);a.attachEventListener("change",e.id,"navigate");if(e.useDblSelect||e.useBothSglDblSelect){a.attachEventListener("dblclick",e.id,"dblselect");}}else{a=f._w;}e.obList=a;e.booklet.turn(a,b>0);window.setTimeout(function(){e.onBrowsing=false;},300);if(!c){C(e,d,a,f);}e.set("currentFolder",f);e.set("currentPage",e.currentPage+b);e.updateUpButton(f);if(e.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},P=function(c,b,a){var d=S(c,b,false);d=d||S(c,b,true);if(!d){window.clearTimeout(c._btm);c._btm=window.setTimeout(function(){c.booklet.set("waiting",true);},300);a.ob=c;a.item=b;c.getDataProvider().fetchFolderContents(c,b,a);}else{I(c,b,d.cache,true,d.steps);}},B=function(b,c,d,a){P(b,{fid:b.pageCache[b.currentPage].did,blockBegin:c,searchPattern:d,recursive:a},N);},J={success:function(b){var c=this.ob;if(c){window.clearTimeout(c._btm);if(!b.items){b.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var a=function e(f){var j=f.length,g;for(g=0;g<j;g++){var h=f[g];if(h.did===F||h.did===T){h.n=(h.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(h.items){a(h.items);}}};if(b.did===F||b.did===T){b.n=(b.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(b.anc&&b.anc.items){a(b.anc.items);}}if(b&&b.items&&c.browsableViewMedias){var d={};K.forEach(c.browsableViewMedias.split(","),function(f){d[parseInt(f,10)]=true;});b.items=K.filter(b.items,function(f){return(f.t!==Q.DssTypeDocumentDefinition)||d[f.dvm];});}if(b&&b.items&&mstrApp&&mstrApp.isSingleTier){b.items=K.filter(b.items,function(f){return(f.st!==772);});}if(b.did&&this.item.k!==b.did){this.item.k=b.did;}I(c,this.item,b,false,1);this.ob=null;this.item=null;}},failure:function(a){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(a);}else{if(a.getResponseHeader){mstrmojo.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(a.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},Z=function(c){var b=c.pageCache.length,a;for(a=0;a<b;a++){c.pageCache[a]._w.destroy();}c.pageCache=[];c.currentPage=-1;c.cacheChange();},M=function(d,c,e){var a=d.onBrowseFolder;if(a){a[0][a[1]](c);}if(c&&parseInt(c.acg,10)===33){return ;}var b={};if(c){b.k=c.did;b.fid=c.did;}else{if(d.rootFolderID){b.k=d.rootFolderID;b.fid=d.rootFolderID;}else{if(d.rootFolderType){b.k=d.rootFolderType;b.fty=d.rootFolderType;}else{if(d.folderLinksContextId){b.k=d.folderLinksContextId;}}}}P(d,b,W.wrapMethods(e,O.copy(J)));},V=function(f,a,c){if(!c){return a;}var d=f.showCompletePath,h=a[0],e,b;while(h){var g;for(g=c.length-1;g>=0;g--){if(h.did===c[g].did){c.splice(g,1);h._isSc=true;}}b=h;h._open=true;h=h.items;h=h&&h[0];if(!h){b.lastLeaf=true;}}if(!d){h=a[0];while(h){if(h._isSc){a[0]=h;break;}h=h.items;h=h&&h[0];}}return a.concat(c);},U=function(b,a,c){b._naviInfo=V(b,a,c);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var a=this.opener.parent.parent,d=this.tree,c=a._naviInfo,b=this.parent.parent.parent.extraDDItems;if(d.items!==c){d._pup=this;this.ob=a;if(b){K.forEach(b,function(e){e.isExtra=true;});c=c.concat(b);}d.set("items",c);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(e,a,b){var d=mstrmojo.WidgetTree.prototype.itemFunction(e,a,b);if(e.isExtra){if(e.cssClass){d.cssClass=e.cssClass;}d.onmousedown=e.onmousedown||mstrmojo.emptyFn;return d;}if(e._open){d.state=1;}d._ll=!!e.lastLeaf;d._pup=b._pup;d.onmousedown=function(f){var g=mstrmojo.dom.eventTarget(f.hWin,f.e),h=this._pup;if(g===this.domNode||g===this.textNode){if(!this._ll){M(h.ob,this.data);}h.close();}};d.markupMethods=O.copy(d.markupMethods);d.markupMethods.onstateChange=function(){var f=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[f]||"closed");this.itemsContainerNode.style.display=(f===1)?"block":"none";};d.useRichTooltip=true;var c=d.postBuildRendering;d.postBuildRendering=function(){if(c){c.call(d);}if(d.textNode.parentNode.clientWidth){d.textNode.style.width=(d.textNode.parentNode.clientWidth-20)+"px";}};d.premouseover=function(h){if(this.useRichTooltip){var g=this.textNode;if(g.clientWidth<g.scrollWidth){var f=D.position(g);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.data[this.itemDisplayField],top:f.y-2,left:f.x+f.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(h.hWin,h.e);}return true;};return d;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(a,b){this.parent.parent.getDataProvider().serverRequest(a,b);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},onUpdateSearchParams:function G(c){var b=this.parent.parent,a=b.sId;if(a){c.sessionState=a;}if(b.useOldSearch){c.quickSearch=0;c.nameWildcards=1;c.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(b){var d=parseInt(this.height,10),a=this.np>1,c={target:this.domNode,props:{height:{start:(a?0:d),stop:(a?d:0),suffix:"px"}},onEnd:function(){if(a){this.target.style.overflow="visible";}}},e=new mstrmojo.fx.AnimateProp(c);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);e.play();},onifsChange:function(a){var b=this.np;mstrmojo.hash.copy(a.value,this);if(this.np>1){this.children=null;this.refresh();}if((b<=1&&this.np>1)||(b>1&&this.np<=1)||(b===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function Y(){Z(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var c=this.searchUpBar;if(c&&c.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var a=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){a.attachEventListener("ifsChange",this.id,function(d){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",d.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var b=this.obIncFetch;b.attachEventListener("fetch",this.id,function(d){b.cp=d.v;b.children=null;b.refresh();B(this,(d.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(b){var c=b.value,a=this.pageCache[this.currentPage]._w;if(!c||c.length===0){c=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var d={};K.forEach(this.browsableViewMedias.split(","),function(e){d[parseInt(e,10)]=true;});c=K.filter(c,function(e){return(e.t!==Q.DssTypeDocumentDefinition)||d[e.dvm];});}}a.set("items",c);},navigate:function(h){var a=h.src,i=a.selectedItem,c=this.multiSelect,f=c&&a.getSelectedItems(),g=this,b=h.added&&h.added.length,e=h.removed&&h.removed.length,d=c?f.length===1&&(!e||b):!!i;if(d&&i.did==="empty"){return ;}if(d&&parseInt(i[L],10)===8){if(!this.onBrowsing){this.onBrowsing=true;M(this,i);}}else{if((i&&(!this.useDblSelect||this.useBothSglDblSelect))||f){this.select(c?f:i);}}},browseFolder:function(a,b){M(this,{did:a,n:b});},onFishEyeChange:function(a){this.goToPage(a.value);},goToPage:function(a){if(a<this.pageCache.length&&a!==this.currentPage){var c=a>this.currentPage,b=this.pageCache[a];this.set("currentPage",a);this.booklet.turn(b._w,c);this.set("currentFolder",b);H.call(this,b);}},oncurrentPageChange:function(a){if(this.fishEye){this.fishEye.setSelectedIndex(a.value);}var b=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(b.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",b.items||[]);this.obSearchBox.set("totalSize",b.sz);this.obSearchBox.set("rootID",b.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(b.sz/b.bc)+((b.sz%b.bc>0)?1:0),cp:Math.floor(b.bb/b.bc)+((b.bb%b.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(b,a){O.copy(b,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}Z(this);M(this,undefined,a);},close:function(){var b=this.ctx||this,a=b.onCloseCB;if(a){a[0][a[1]]();}b.set("visible",false);},select:function(b){var a=this.onSelectCB;if(a){a[0][a[1]](b);}if(this.closeOnSelect){this.close();}},dblselect:function R(b){var c=b&&b.src.selectedItem;if(!c||(c&&c.did==="empty")||c[L]===8){return ;}if(this.useBothSglDblSelect){var a=this.onDblSelectCB;if(a){a[0][a[1]](c);}if(this.closeOnSelect){this.close();}}else{this.select(c);}},goUp:function(){if(this.canGoUp){M(this,{did:this.currentFolder.pf});}},updateUpButton:function E(a){H.call(this,a);},oncurrentFolderChange:function(a){var b=a.value;U(this,b.anc.items,b.sc);},refreshContent:function(a){B(this,a);},onError:null,onheightChange:function(){var a=["titleBar","fishEye","searchUpBar","obIncFetch"],c=0,b;for(b in a){c+=parseInt(this[a[b]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-c+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.expr","mstrmojo.dom","mstrmojo.array","mstrmojo.css");var L=mstrmojo.expr,N=mstrmojo.dom,C=mstrmojo.array,A=mstrmojo.css,F=mstrmojo.fe._IsRelationTreeNode.createSetHtml;var M=function(){var T="noRelationOperator",P=this[T],R=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],S=mstrmojo.array.filter(R,function(U){return U&&U[T]!==P&&U.data.et!==L.ET.RLS;}),O=S.length;for(var Q=0;Q<O;Q++){S[Q].set(T,P);}};mstrmojo.fe.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.AndOrNode",markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',getPrefixAndOrToolsMarkup:function(){return(F+this._super());},markupSlots:mstrmojo.hash.copy({createSetNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupSlots)),markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){A.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupMethods)),removeSet:function G(P){var O=P.childIndex(),Q=P.data,R=[Q];if(O>=0){this.remove(O,true);if(Q.nds&&Q.nds.length>0){R=Q.nds;if(Q.not){R[0].not=true;}}else{delete Q.dmy;delete Q.relation;delete Q.applySubExpr;delete Q.relation;delete Q.useSchema;delete Q.dmt;}this.add(R,O);this.consolidate(false);}},createSet:function E(Q,O){var P=this._ndsToMove(this,Q);if(!P){return ;}this.remove(P.idxs,true);var U=P.nds,T;if(U){if(U.length>1){var S={et:L.ET.ANDOR,nds:U};S.fn=this.data.fn;U=[S];T=S.nds[0].not;}else{var V=U[0];if(V&&V.not&&V.et===L.ET.ANDOR){T=V.not;delete V.not;}}}if(O&&O.rq){var R;if(O.isMetric){R=O.cq;mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],O.rq,R);}else{R=O.rq;R.nds=U;if(T){R.not=T;}}this.add([R],P.idxs[0]);}this.consolidate(false);},preclick:function H(O){var R=null,Q=N.eventTarget(O.hWin,O.e),P=this._super(O);if(N.contains(this.createSetNode,Q,true)&&!this.noRelationOperator){R="createSetOpt";}O.part=R||O.part;return P;},preadd:function I(O){if(this._super){this._super(O);}this.updateRelationOperator();},preremove:function K(O){if(this._super){this._super(O);}this.updateRelationOperator();},consolidate:function B(){this._super();this.updateRelationOperator();},postBuildRendering:function J(){var O=this._super();this.updateRelationOperator();return O;},updateRelationOperator:function D(){var O=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],P=!!C.filterOne(O,function(R){return R&&(R.data.et===L.ET.RLS||(R.data.et===L.ET.ANDOR&&R.noRelationOperator));}),Q=this.parent;this.set("noRelationOperator",P);M.call(this);if(Q&&Q.hasRendered&&Q.updateRelationOperator){Q.updateRelationOperator();}},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode");mstrmojo.threshold.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,null,{scriptClass:"mstrmojo.threshold.AndOrNode",cssClass:"adv-threshold",avatarCssCls:"mstrmojo-thresholdRow",onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);},consolidate:function A(){if(this.parent!==this.tree||this.itemCnt===0){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.css");var b=mstrmojo.css,N=1,L=2,F=4,c=8,K=16;function E(e){return function(){b.toggleClass(this.menuBtnNode,"active",e);};}function H(f){var j=new mstrmojo.ui.menus.MenuConfig(),i=this.getMenuActions(),e=this.index,k=this.id,g=this.total;if((i&K)>0){this.addNewTabMenuItem(j);}if((i&F)>0){j.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"dup",function(){mstrmojo.all[k].tabDuplicated();});}if((i&L)>0){if(e){j.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){mstrmojo.all[k].tabMoved(true);});}if(e<g-1){j.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){mstrmojo.all[k].tabMoved(false);});}}j.addSeparator();if((i&N)>0){j.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){mstrmojo.all[k].lbl.set("isEditing",true);});}if((i&c)>0){if(g>1){j.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){mstrmojo.all[k].tabDeleted();});}}var h=this.getCustomMenu();if(h&&h.hasMenuItems()){j.addSeparator();j.absorbMenuItems(h);}j.addPopupHandlers(this.id,E(true),E(false));this.showTabMenu(this.updateMenuCfg(j),f);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function W(){return this.domNode.firstChild.firstChild;},menuBtnNode:function a(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function Z(){this.lbl.set("text",this.title);},onisSelectedChange:function V(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function D(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function Q(f,e){if(f){this.parent.titleEdited(this.text,e);}}}],postBuildRendering:function X(){if(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()){this.draggable=false;}this._super();},onclick:function d(e){var f=e.getTarget();if(f===this.menuBtnNode){H.call(this,f);}else{if(!this.isSelected){this.tabSelected();}}},getMenuActions:function I(){return 0;},getCustomMenu:function B(){return null;},isDragValid:function A(){return this.parent.children.length>1&&!this.lbl.isEditing;},createAvatar:function S(){var e=document.createElement("div");e.appendChild(this.domNode.cloneNode(true));e.style.margin="-5px 0 0 10px";return e;},allowDrop:function G(e){var f=e.src.widget;return f&&f.parent===this.parent;},ondrop:function Y(e){var f=e.src.data;this.parent.moveTab(f.idx,this.index,f.fromIdx);this._super(e);},ondragenter:function P(f){this._super(f);var g=f.src.data,e=this.index;this.parent.moveTab(g.idx,e);g.idx=e;},ondragover:function T(g){var e=g.tgt.node,f=g.tgtData,h=f&&f.node;if(!f||h!==e){g.tgtData={node:e};if(h){h.style.borderColor="";}}e.style.borderColor="#0fe88f";},getDragData:function C(){var g=this.id,e=this.index;return{setAvatarClass:function f(h){var k=mstrmojo.all[g],i=k.avatar;if(i){var j=[k.avatarCssClass,"hasOwnAvatar",h];i.className=j.join(" ");}},fromIdx:e,idx:e};},getDropAvatarIcon:function R(){return"pivot";},cleanUpAfterTarget:function J(f){var e=f.tgtData&&f.tgtData.node;if(e){e.style.borderColor="";}this._super(f);},onAppStateChange:function U(e){var f=this.lbl,g=e.value===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;f.set("isEditing",false);f.set("editOnDoubleClick",!g);this.draggable=!g;},addNewTabMenuItem:function O(e){this.throwAbstractMethodError("addNewTabMenuItem");},tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function M(e){return e;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:K,RENAME:N,MOVE:L,DUPLICATE:F,DELETE:c};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.ui.menus.MenuConfig");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var U={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var E=["background-color","fx"],J=mstrmojo.array;mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,skipReRender:false,updateFormatsOnUpdate:true,vizDimensionFmts:undefined,setModel:function N(a){this.set("model",a);},destroy:function X(){var a=this.model;if(a&&a.destroy){a.destroy();delete this.model;}this._super();},resize:function Y(){var a=this.getFormats();if(parseInt(a.height,10)===0||parseInt(a.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(a.height,a.width);this.domNode.style.display="";}},setDimensions:function P(c,b){var a=this._super(c,b);if(a&&this.hasRendered&&!this.skipReRender){this.reRender();}return a;},reRender:function G(){this.unrender();this.render();},getWidth:function C(){return parseInt(this.width,10);},getHeight:function L(){return parseInt(this.height,10);},getLeft:function S(){return parseInt(this.left,10);},getTop:function A(){return parseInt(this.top,10);},buildRendering:function I(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function W(){},postBuildRendering:function(){var a=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:a,controls:this.getVisEmptyMsgControls()});this.applyBackground();return !a;},applyBackground:function(){var b=this.defn&&this.defn.fmts,g=(b&&b.p_fmts)||b,d={},e,a,f,c;if(mstrApp.isExpress&&g){e=this.formatHandlers=this.formatHandlers||{};f=e.domNode=e.domNode||[];a="BG";c=J.indexOf(f,a);if(c<0){f.push(a);}J.forEach(E,function(h){if(g[h]){d[h]=g[h];}});this.applyCSSFormatToNode("domNode",d);}},update:function H(d){d=d||this.node;if(d){var a=d.data;if(a){this.model.set("data",a);}this.waitingForData=!!a.nsj;if(this.waitingForData){var b="ServerJsonRWDStyle";var e=this.model,c=e.getDataService(),f={host:this,nodes:[this.k]},h;if(a.wid!==undefined){f.slices=[a.wid];}h=mstrmojo.func.wrapMethods(e.docModel.getUpdateColorMapCallback(),e.docModel.getUpdateThemePaletteCallback(true),e.controller._getXtabCallback(this));c.retrieveServerJson(f,h,{preserveUndo:true,style:{name:b,params:{treesToRender:3}},params:{styleName:b}});this.updated=true;this.cacheVizWebDimenFmts(d.defn);return false;}this.updateContentFormats(d);}if(this.model){var i=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(i&&i.getDocBuilder){var g=i.getDocBuilder().getMojoVisName(d);if(g){d.data.visName=g;}}}this.updated=true;if(this._super){return this._super(d);}return true;},cacheVizWebDimenFmts:function B(d){var b=d&&d.fmts,a={};if(b){for(var c in U){if(U.hasOwnProperty(c)&&b.hasOwnProperty(c)){a[c]=b[c];}}}this.vizDimensionFmts=a;},updateContentFormats:function(f){var c,e=this.parent,d=f.defn,b=(d&&d.fmts)||{},a=this.vizDimensionFmts||{};if(this.updateFormatsOnUpdate){if(this.clearFormats){this.clearFormats();}for(c in U){if(U.hasOwnProperty(c)&&a.hasOwnProperty(c)){b[c]=a[c];}}if(e&&e._createFormats&&!b.p_fmts){e._createFormats();}b=(this.getFormats&&this.getFormats())||b;for(c in U){if(U.hasOwnProperty(c)&&b.hasOwnProperty(c)){this[U[c]]=b[c];}}}},isEmpty:function M(){return false;},getVisEmptyMsgControls:function D(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function O(){return this.model;},getData:function K(){return this.model.data;},getRowsAndCols:function(){var a=this.model.data.gts;return(a.row||[]).concat(a.col||[]);},getExp:function(){var a=this.model.data,b=a&&a.sc&&a.sc.exp;return b;},getDocModel:function T(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function V(){return mstrmojo.emptyFn;},renderErrorMessage:function Z(a){this.domNode.innerHTML='<div class="mstrmojo-message">'+a+"</div>";},getMessageID:function F(){return this.model.docModel.mid||this.model.mid;},performAction:function R(a){var c=this.model.getAction(a),b=c&&c.h;if(b&&this.controller[b]){this.controller[b](this,c.a);return true;}return false;},findSelectorControl:function Q(){var b=this.getData(),a=b&&b.sc;if(a&&parseInt(a.ct,10)===6){this.selectorControl=a;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;}});})();(function(){mstrmojo.requiresClsP("mstrmojo","Widget","css","dom");var E=mstrmojo.css,F=mstrmojo.dom;mstrmojo.threshold.ColorMarker=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ColorMarker",markupString:'<div class = "marker {@cssClass}" id="{@id}" style="{@cssText}" mstrAttach:contextmenu,mousedown,mouseover,mouseout></div>',markupMethods:{onleftChange:mstrmojo.Widget.leftMarkupMethod},hovered:false,selected:false,index:undefined,select:function(){this.set("selected",true);},unselect:function(){this.set("selected",false);},onselectedChange:function B(I){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onMarkerSelected(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onMarkerUnselected(this.index);}this.parent.onMarkerUnhovered(this.index);},oncontextmenu:function H(J){F.preventDefault(window,J.e);var I=this,K=I.parent.parent;var L=new mstrmojo.ui.menus.MenuConfig({position:F.getMousePosition(J.e,J.hWin),isHostedWithin:false});L.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){K.bands.remove(I.index);K.update();});this.openPopup(L.newInstance());},onmousedown:function A(){this.set("selected",!this.selected);},onmouseover:function G(){this.set("hovered",true);},onmouseout:function D(){this.set("hovered",false);},onhoveredChange:function C(I){if(!this.selected){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onMarkerHovered(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onMarkerUnhovered(this.index);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus.MenuConfig");var D=mstrmojo.string,A=mstrmojo.dom,E=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(){var K=this,J=K.statusList,F=J&&J.length||0,G=K.statusConfig||new mstrmojo.ui.menus.MenuConfig(),L=function(M){return function(N){K.set("status",M);K.onStatusClick(M);};};if(!G.hasMenuItems()&&F){for(var H=0;H<F;H++){var I=J[H];G.addMenuItem(I.n,I.cls||"",L(I),K);}}else{}if(G.hasMenuItems()){G.alignment=K.alignment||{host:E.BOTTOM_LEFT,popup:E.TOP_LEFT};G.hostId=K.id;G.hostElement=K[K.hostElementName]||K.domNode;K.openPopup(G.newInstance());}}function C(){var F=this.statusConfig||this.statusList&&this.statusList.length>1;this.menuButtonNode.style.display=F?"":"none";}mstrmojo.ui.StatusButton=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.ui.StatusButton",markupString:'<div id="{@id}" class="mstrmojo-StatusButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}"><div class="mstrmojo-Button {@innerIconClass}"  mstrAttach:click><span class="mstrmojo-text"></span></div><div class="menuButton" mstrAttach:click></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},textSpanNode:function(){return this.domNode.firstChild.firstChild;},menuButtonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onstatusChange:function(){this.textSpanNode.innerHTML=D.encodeHtmlString(this.status&&this.status.n||"");},onstatusListChange:function(){C.call(this);},onstatusConfigChange:function(){C.call(this);}},status:null,statusList:null,statusConfig:null,onclick:function(F){var G=A.eventTarget(F.hWin,F.e);if(A.contains(this.menuButtonNode,G,true)){B.call(this);}else{if(A.contains(this.textNode,G,true)){this.onButtonClick(this.status,F);}}},onButtonClick:mstrmojo.emptyFn,onStatusClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var M=mstrmojo.dom,O=mstrmojo.css,x=mstrmojo.Enum_Keys,D=mstrmojo.range,c=D.EDGE,p=mstrmojo.ME.MetricToken.isDelimiter,L=mstrmojo.expr,h=mstrmojo.array,H=mstrmojo.hash;function AE(E){return E.ctrlKey||M.isMetaKey(window,E);}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function N(E){var AF=E.ownerDocument,AG=AF.createElement("span");return AG;},_iw2idx:function P(AF,AI,AH){var AG=this.wrapperNodes(AI),E=mstrmojo.array.indexOf(AG,AH);return E===-1?AG.length:E;},itemOffsetLeft:function a(AF,AJ,E,AH){if(!AH){var AG=this.wrapperNodes(AJ);AH=AG&&AG[E];if(!AH){return 0;}}var AI=AJ.firstChild;if(!AI||(AI===AH)){return 0;}return AH.offsetLeft-AI.offsetLeft;},whereDrop:function AD(AN,E,AH,AM,AF){var AJ=this._nd2iw(AN,E,AH),AO,AL,AI,AK,AG;if(AJ){AL=this._iw2idx(AN,E,AJ);AO=AL;AI=this.itemOffsetLeft(AN,E,null,AJ);AK=AJ.offsetTop;AG=AJ.offsetWidth;if(AM.x>AF.left+AI+AG/2){AO++;AI+=AG;}}else{return AN.dropCuePos;}return{left:AI,top:AK,idx:AO,idxActual:AL};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function C(E){var AF=E.src.data;return !!AF;},ondrop:function(E){E.src.data={v:mstrmojo.ME.MetricToken.brackets(E.src.data.item.n),oi:H.copyProps(["did","n","t"],E.src.data.item),isNew:true};if(this.prepareDropItem){this.prepareDropItem(E);}this.insertTokens([E.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondragenter:function F(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function Q(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function S(AF){var AG=AF.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AG){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "document.oncontextmenu =  mstrmojo.all.{@id}.fnContextMenu;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function G(AG,E,AF){return new mstrmojo.ME.MetricToken({data:AG,parent:AF});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function R(AF,E){if(this._super){this._super(AF,E);}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:p,postBuildRendering:function X(){if(this._super){this._super();}this._eros=false;if(M.isFF){document.body.spellCheck=false;}},fnContextMenu:function I(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},handlekeydown:function V(AK){AK=AK||window.event;var AI=AK.keyCode||AK.charCode,AG=false,AL=D.getRangeInfo();if((AE(AK)||AI===x.LEFT_ARROW||AI===x.RIGHT_ARROW)&&this.doubleByte){this.doubleByte=false;var AJ=this.prev_rInfo,AF=AL,AM=AF.startContainer.data.slice(AJ.startOffset,AL.startOffset);this.widgetHandleImeInput(AJ,AM);return ;}switch(AI){case x.DELETE:if(!this.doubleByte){try{this.widgetHandleDelete(AL);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(AH){}AG=true;}break;case x.BACKSPACE:if(!this.doubleByte){try{this.widgetHandleBackspace(AL);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}AG=true;}break;case x.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case x.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AG=true;break;case x.ESCAPE:this.endTokenSuggestion();AG=true;break;case 86:if(AE(AK)){this._saveRangeInfo=D.getRangeInfo();if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this._saveRangeInfo=D.getRangeInfo();}this.clipboardNode.focus();AG=false;}break;case 89:if(AE(AK)){this.widgetHandleUndoRedo("redo");AG=true;}break;case 90:if(AE(AK)){this.widgetHandleUndoRedo("undo");AG=true;}break;case 229:if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=AL;this.prev_items=this.items;}break;default:}if(AG){M.stopPropogation(window,AK);M.preventDefault(window,AK);return false;}return true;},getCharacter:function z(AF){var E=(M.isIE&&!M.isIE9)?AF.keyCode:AF.charCode;return(E>0)?String.fromCharCode(E):null;},handlekeypress:function A(AH){AH=AH||window.event;var AI=this.getCharacter(AH),AF=false;if(AI&&!((AI==="c"||AI==="a")&&AE(AH))){try{this.widgetHandleInput(D.getRangeInfo(),AI);this.raiseChangeEvent({type:"input",character:AI});if(!this.isDelimiter(AI)){if(this.useKeyDelay){var AG=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AG.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AF=true;}if(AF){M.stopPropogation(window,AH);M.preventDefault(window,AH);return false;}return true;},handlekeyup:function Y(AG){var E=AG.keyCode||AG.charCode,AF;if(E===x.LEFT_ARROW||E===x.RIGHT_ARROW){AF=this.findObjectToken();if(AF&&AF===this._saveActiveToken){this.startTokenSuggestion(AF);}else{this.endTokenSuggestion();}}else{if(E===x.UP_ARROW){this.preHighlight();}else{if(E===x.DOWN_ARROW){this.nextHighlight();}}}this._saveRangeInfo=D.getRangeInfo();},handlemouseup:function g(AK){if(this.dropCuePos){return false;}var AG=this.findObjectToken();if(AG&&AG===this._saveActiveToken){this.startTokenSuggestion(AG);}else{this.endTokenSuggestion();}var AI=D.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var AJ=this.prev_rInfo,AH=this._saveRangeInfo,AF=AH.startContainer.data.slice(AJ.startOffset,AH.startOffset+1);if(AF!==""){var E=this.widgetHandleImeInput(AJ,AF);this.prev_items=this.items;AG=M.findWidget(AI.startContainer);if(AG){this._delaySetTextCaretPos(AG.domNode,AI.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AI.startOffset-1);}}this.prev_rInfo=AI;}this._saveRangeInfo=AI;},handlepasteDirect:function u(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlepaste(E);M.stopPropogation(window,E);M.preventDefault(window,E);return false;},handlepaste:function e(AJ){var AF=this.clipboardNode.value;this.clipboardNode.value="";var AI=[],E=AF&&AF.length,AH,AG="",AK;if(E>0){for(AH=0;AH<E;AH++){AK=AF.charAt(AH);if(this.isDelimiter(AK)){if(!mstrmojo.string.isEmpty(AG)){AI.push({v:AG,isNew:true});AG="";}AI.push({v:AK,isDelimiter:true,isNew:true});}else{AG=AG+AK;}}if(!mstrmojo.string.isEmpty(AG)){AI.push({v:AG,isNew:true});AG="";}this.insertTokens(AI);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AC(){var AF=[],AH=this.items,AG,E;for(AG=0,E=AH.length;AG<E;AG++){AF[AG]=AH[AG].v;}return AF.join("| ");},replaceErrorToken:function i(AH){var AG=this.items||[],AI=mstrmojo.array.find(AG,"sta",-1),AF,AJ=function(AP,AN,AQ){var AM=(AP&&AP.items)||[],AL=h.find(AM,"did",AN),AK,AO;if(AL>-1){AK=AM[AL].fs;AO=h.filterOne(AK,function(AR){return AR.fnm&&AR.fnm.toUpperCase()===AQ.toUpperCase();});}return AO;},E=function(AP,AN,AO){var AK={v:AN.n,oi:AN,isNew:true},AM=AP.v&&AP.v.split("@"),AL;if(AM&&AM.length>1){AL=AJ(AO,AN.did,AM[1]);if(AL){AK.exv=AL.fmdid||AL.fid;AK.extp=8;AK.v=mstrmojo.ME.MetricToken.brackets(AN.n)+"@"+AL.fnm;}}return AK;};if(AI>-1){AF=E(AG[AI],AH,this.candidates);this.remove(AI);this.add([AF],AI);}},widgetHandleDelete:function Z(AI){if(AI.collapsed){var AH,AG,E,AJ=AI.startOffset,AF=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AI.startContainer,false,document.body)){D.collapseOnNode(this.editNode,false);return ;}AH=D.getEdgeInfo(AI.startContainer,AI.startOffset);AG=M.findWidget(AI.startContainer);E=this.itemIndex(AG.data);if(AH===c.EDGE_END){E++;AG=AF[E];AJ=0;}if(!AG){D.collapseOnNode(this.editNode,false);return ;}if(AG.length()===1){this.remove(E);AG=AF[E];if(AG){D.collapseOnNode(AG.domNode,true);}else{D.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AG.spliceContent(AJ,1);D.collapseOnTextNode(AG.domNode,AJ);}}else{this.widgetDeleteTokens(AI);}},widgetHandleBackspace:function o(AI){if(AI.collapsed){var AH,AG,E,AJ=AI.startOffset,AF=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AI.startContainer,false,document.body)){if(AI.startOffset>0&&M.isFF){AG=AF[this.items.length-1];D.collapseOnNode(AG.domNode,false);AI=D.getRangeInfo();AH=D.getEdgeInfo(AI.startContainer,AI.startOffset);}else{D.collapseOnNode(this.editNode,true);return ;}}AH=D.getEdgeInfo(AI.startContainer,AI.startOffset);AG=M.findWidget(AI.startContainer);E=this.itemIndex(AG.data);if(AH===c.EDGE_BEGIN){E--;AG=AF[E];AJ=AG.length();}if(!AG){D.collapseOnNode(this.editNode,true);return ;}if(AG.length()===1){this.remove(E);AG=AF[E-1];if(AG){D.collapseOnNode(AG.domNode,false);this.checkMergeTwoTokens(E-1,E);AG=AF[E-1];}else{D.collapseOnNode(this.editNode,true);}}else{AG.spliceContent(AJ-1,1);D.collapseOnTextNode(AG.domNode,AJ-1);}}else{this.widgetDeleteTokens(AI);}},widgetHandleInput:function q(AJ,AK){if(!AJ.collapsed){this.widgetDeleteTokens(AJ);AJ=D.getRangeInfo();}var AG,AL,AM,AN,E,AF,AH=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AJ.startContainer,false,document.body)){this.add([{v:AK,isDelimiter:this.isDelimiter(AK),isNew:true}],0);AL=AH[0];D.collapseOnTextNode(AL.domNode,1);return ;}AG=D.getEdgeInfo(AJ.startContainer,AJ.startOffset);AL=M.findWidget(AJ.startContainer);AM=this.itemIndex(AL.data);if(this.isDelimiter(AK)){AN={v:AK,isDelimiter:true,isNew:true};if(AG===c.EDGE_MIDDLE){var AI=AL.split2Tokens(AJ.startOffset);this.remove(AM);this.add([AI[0],AN,AI[1]],AM);AM=AM+1;}else{AM=(AG===c.EDGE_BEGIN)?AM:AM+1;this.add([AN],AM);}AL=AH[AM];D.collapseOnNode(AL.domNode,false);}else{AF=AJ.startOffset;if(AL.isDelimiter()){E=AH[(AG===c.EDGE_BEGIN)?AM-1:AM+1];if(E&&!E.isDelimiter()){AL=E;AF=(AG===c.EDGE_BEGIN)?AL.length():0;}}if(!AL.isDelimiter()){AL.spliceContent(AF,0,AK);D.collapseOnTextNode(AL.domNode,AF+1);}else{this.add([{v:AK,isNew:true}],(AG===c.EDGE_BEGIN)?AM:AM+1);AL=AH[(AG===c.EDGE_BEGIN)?AM:AM+1];D.collapseOnNode(AL.domNode,false);}}},widgetHandleImeInput:function q(AI,AJ){if(!AI.collapsed){this.widgetDeleteTokens(AI);AI=D.getRangeInfo();}var AG,AK,AL,AM,E,AF,AH=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AI.startContainer,false,document.body)){this.clearTokens();this.add([{v:AJ,isDelimiter:this.isDelimiter(AJ),isNew:true}],0);AH=this.ctxtBuilder.itemWidgets;AK=AH[0];D.collapseOnTextNode(AK.domNode,1);this._delaySetCaretPos(AK.domNode,false);return ;}AG=D.getEdgeInfo(AI.startContainer,AI.startOffset);AK=M.findWidget(AI.startContainer);AL=this.itemIndex(AK.data);AF=AI.startOffset;if(AK.isDelimiter()){this.clearTokens();this.set("items",this.prev_items);AH=this.ctxtBuilder.itemWidgets;E=AH[(AG===c.EDGE_BEGIN)?AL-1:AL+1];if(E&&!E.isDelimiter()){AK=E;AF=(AG===c.EDGE_BEGIN)?AK.length():0;}}if(!AK.isDelimiter()){AK.spliceContent(AF,0,AJ);this._delaySetTextCaretPos(AK.domNode,AF+AJ.length);}else{this.add([{v:AJ,isNew:true}],(AG===c.EDGE_BEGIN)?AL:AL+1);AK=AH[(AG===c.EDGE_BEGIN)?AL:AL+1];this._delaySetCaretPos(AK.domNode,false);}this.startTokenSuggestion();return AK;},findObjectToken:function B(){var AI=D.getRangeInfo(),AG=M.findWidget(AI.startContainer);if(!M.contains(this.editNode,AI.startContainer,false,document.body)){return null;}if(!AG||AG===this||!AG.isDelimiter){return null;}if(AG&&!AG.isDelimiter()){return AG;}var AH=D.getEdgeInfo(AI.startContainer,AI.startOffset),AF=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AG.data);AG=AF[(AH===c.EDGE_BEGIN)?E-1:E+1];if(AG&&!AG.isDelimiter()){return AG;}return null;},checkMergeTwoTokens:function m(AI,AG){var AH=this.ctxtBuilder.itemWidgets,AF=AH[AI],E=AH[AG];if((AF&&!AF.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AI,AG]);this.add([AF.mergeTo(E)],AI);D.collapseOnTextNode(AH[AI].domNode,AF.length());}},insertTokens:function t(AL){var E=0,AF=this.editNode;var AK=this._saveRangeInfo||D.getRangeInfo();if(!AK||!M.contains(AF,AK.startContainer,false,document.body)){this.add(AL);E=this.items.length-1;this._delaySetTextCaretPos(AF,(AF.innerText||AF.textContent).length);}else{var AJ=D.getEdgeInfo(AK.startContainer,AK.startOffset),AG=M.findWidget(AK.startContainer);E=this.itemIndex(AG.data);if(AJ===c.EDGE_MIDDLE){var AI=AG.split2Tokens(AK.startOffset);this.remove(E);AL.unshift(AI[0]);AL.push(AI[1]);this.add(AL,E);}else{E=(AJ===c.EDGE_BEGIN?E:E+1);this.add(AL,E);}E=E+AL.length-1;AG=this.ctxtBuilder.itemWidgets[E];this._delaySetCaretPos(AG.domNode,false);}this.raiseChangeEvent({type:"insert"});var AH=this;window.setTimeout(function(){AH._saveRangeInfo=D.getRangeInfo();},50);return E;},insertParenthesisTokens:function w(AF){var E=this;window.setTimeout(function(){var AG=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AG]);},AF||50);},clearTokens:function l(E){this.set("items",E||[]);this._saveRangeInfo=null;this._delaySetCaretPos(this.editNode,false);},focus:function s(){var AF=this.ctxtBuilder.itemWidgets,E=AF.length;this._delaySetCaretPos(E>0?AF[E-1].domNode:this.editNode,false);},startTokenSuggestion:function y(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[L.TP.FOLDER,L.TP.FACT,L.TP.ATTR,L.TP.FUNCTION,L.TP.FILTER,L.STP.PROMPT_OBJECTS,L.TP.ATTR,L.TP.DIM,L.TP.METRIC,L.TP.ROLE].join(","),getSearchPattern:function U(){var AF=this._saveActiveToken,AH=AF&&AF.data.v,E=AH&&AH.length;if(E>2){if(AH.charAt(0)==="["){AH=AH.substring(1);}if(AH.charAt(AH.length-1)==="]"){AH=AH.substring(0,AH.length-1);}}if(AF&&AF.data.ift){var AG=AF.data.v,AI=AG&&AG.indexOf("@");if(AI>=0){AH=AG.substring(AI);}}return AH||"";},getSuggestionPos:function b(){var E=this._saveActiveToken,AF=null,AH,AG;if(E){AH=E.data&&E.data.ift;AG=mstrmojo.dom.position(E.domNode,true);AF={left:Math.round(AG.x+(AH?AG.w:0))+"px",top:Math.round(AG.y+AG.h)+"px",zIndex:100};}return AF;},item2textCss:function J(AF){var E=(this._super&&this._super(AF))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AF.t]||"";E+=AF.da?" da":"";E+=(AF.dm||AF.um)?" dm":"";E+=AF.de?" de":"";E+=AF.fs&&AF.fs.length&&AF.fs.some(function(AG){return AG.fgr>0;})?" g":"";return E;},onBrowserOpen:function n(){this.editNode.blur();},onSuggestionItemSelect:function v(AF){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AF.t===21){E.setFormInfo(AF);}else{E.setItemInfo(AF);if(AF.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function AA(E,AG){var AF=this.editNode,AH=this,AI=function(){AF.focus();AF.focus();D.collapseOnNode(E,AG);AH._saveRangeInfo=D.getRangeInfo();};window.setTimeout(AI,0);},_delaySetTextCaretPos:function AA(E,AI){var AF=this.editNode,AG=this,AH=function(){AF.focus();AF.focus();D.collapseOnTextNode(E,AI);AG._saveRangeInfo=D.getRangeInfo();};window.setTimeout(AH,0);},getCandidatesThroughTaskCall:function W(AF,E){AF.objectType="11,12,13,43,4";AF.rootFolderType=39;AF.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AF,E);},filterCandidates:function k(AI,AH,E){var AF=this._saveActiveToken,AJ=AF&&(AF.data.oi||AF.data.at),AG;if(AJ&&AF.data.ift){E=E||this.suggestCount;AH=mstrmojo.string.regEscape(AH);AG=h.filter(AI,function(AK){return AK.t===21&&AK.attid===AJ.did&&(new RegExp("^"+AH,"i")).test("@"+AK.n);},{max:E});}else{AG=h.filter(AI,function(AK){return AK.t!==21;});AG=this._super(AG,AH,E);}return AG;},endTokenSuggestion:function AB(AF){var E=this._saveActiveToken;if(E){if(AF){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function f(AN){var AF=AN.startOffset,E=AN.endOffset,AQ=M.findWidget(AN.startContainer),AO=M.findWidget(AN.endContainer),AJ=this.itemIndex(AQ.data),AH=this.itemIndex(AO.data),AK=[],AL=D.getEdgeInfo(AN.startContainer,AF),AP=D.getEdgeInfo(AN.endContainer,E),AM=(AL===c.EDGE_BEGIN?AJ:AJ+1),AG=(AP===c.EDGE_END?AH:AH-1),AI;if(AQ===AO){if((AL===c.EDGE_BEGIN)&&(AP===c.EDGE_END)){this.remove(AJ);AO=this.ctxtBuilder.itemWidgets[AJ===0?AJ:AJ-1];if(AO){D.collapseOnNode(AO.domNode,AJ===0);}else{D.collapseOnNode(this.editNode,true);}}else{AQ.spliceContent(AF,E-AF);D.collapseOnTextNode(AO.domNode,AF);}}else{for(AI=AM;AI<=AG;AI++){AK.push(AI);}this.remove(AK);if(AL===c.EDGE_MIDDLE){AQ.spliceContent(AF);}if(AP===c.EDGE_MIDDLE){AO.spliceContent(0,E);}if(AL===c.EDGE_BEGIN){AQ=this.ctxtBuilder.itemWidgets[AJ===0?AJ:AJ-1];}if(AQ){D.collapseOnNode(AQ.domNode,AJ===0);}else{D.collapseOnNode(this.editNode,false);}AJ=(AL===c.EDGE_BEGIN)?AJ-1:AJ;this.checkMergeTwoTokens(AJ,AJ+1);}this.editNode.focus();},oncandidatesChange:function j(){var AF=this.candidates,E=(AF&&AF.items)||[];if(!this.noCache&&AF&&AF.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AF=this.getSuggestionPos();if(AF){E.set("left",AF.left);E.set("top",AF.top);}},pretokensModify:function K(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:H.clone(this.items),rInfo:D.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function d(AG){var AH,E,AF=function(AJ){if(!AJ){return ;}AJ=AJ||{};this.set("items",H.clone(AJ.items));var AM=this.ctxtBuilder.itemWidgets,AI=AM[AJ.idx],AL=AI&&AI.domNode||this.editNode,AK=AJ.rInfo;this._delaySetTextCaretPos(AL,AK&&AK.startOffset||0);};switch(AG){case"undo":AH=--this.tokensCachePointer;if(AH>-1){E=this.tokensCache[AH-1];AF.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AH=this.tokensCachePointer++;if(AH>-1&&AH<this.tokensCache.length){E=this.tokensCache[AH];AF.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function T(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ME.TokenInputBox");mstrmojo.requiresDescs(13542,13543);var B=mstrmojo.array;var L={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},H={0:mstrmojo.desc(9565,"Valid Metric Formula."),1:mstrmojo.desc(9106,"Require Validation?"),2:mstrmojo.desc(9566,"Validation in Progress..."),3:mstrmojo.desc(9567,"Validation Failed with Syntax Error!"),4:mstrmojo.desc(9568,"Validation Failed with Object Ambiguity!")};function D(O){if(!O){return L.VALID;}return{"-2147214845":L.ERROR,"-2147214846":L.AMBIGUITY}[O]||L.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricEditBox",vStatus:L.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,isObjectVisible:function(O){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;}},markupMethods:{onvStatusChange:function(){var P=this.vStatus,O=this.vStatusNode;O.className="mstrmojo-MEBox-vStatus "+G[P];O.innerHTML=(this.getStatusDesc&&this.getStatusDesc(P))||H[P]||"";},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;this.iStatusNode.title=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:"this.parent.browseItemVisible",candidates:"this.parent.candidates"}}],init:function N(O){if(this._super){this._super(O);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function M(){return this.inputBox.getSearchPattern();},getHighlightedText:function I(P,O){return this.inputBox.getHighlightedText(P,O);},item2textCss:function F(O){return{4:"m",7:"am",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[O.t]||"";},handleSuggestionItemSelect:function E(O){var P=this.abiguityDialog;if(O){P.onItemSelect(O);}P.close();},showDesc:true,showPath:true,abiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",mstrmojo.desc(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",mstrmojo.desc(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:"this.parent.opener.suggestionItems"},onclick:function(O){mstrmojo._IsList.onclick.call(this,O);}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:mstrmojo.desc(547,"Select"),onclick:function(){var O=this.parent.parent;O.opener.handleSuggestionItemSelect(O.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",L.UNKNOWN);this.set("iStatus","");},postBuildRendering:function A(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function K(O){this.inputBox.set("items",O.items);},replaceErrorToken:function C(O){this.inputBox.replaceErrorToken(O);},handleValidation:function J(O){if(!O){this.set("vStatus",L.ERROR);return ;}O.vs=D(O.rjec);this.set("vStatus",O.vs);this.set("iStatus",O.rjed||"");this.updateInputBoxItems(O);this.inputBox.focus();if(O.vs===L.AMBIGUITY){var W=this,T=O.items,S=B.find(T,"sta",-1),P=T[S].v,U=function(X){W.replaceErrorToken(X);W.set("iStatus","");W.set("vStatus",L.UNKNOWN);if(W.continueValidataion){W.continueValidataion();}};var Q=B.filter(O.srfd.items,this.isObjectVisible);var V=this.parent.candidates,R=V&&V.items;if(R){B.forEach(Q,function(Y){var X=B.find(R,"did",Y.did);if(X===-1){if(this.absorbAmbiguity){R.push(Y);}}else{Y.path=R[X].path;}});}if(Q.length===1){U(Q[0]);return ;}this.openPopup("abiguityDialog",{zIndex:100,items:Q,ambiguousName:P,onItemSelect:U});}else{if(this.postHandleValidation){this.postHandleValidation();}}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.fx","mstrmojo.locales","mstrmojo.expr","mstrmojo.Button","mstrmojo.date","mstrmojo.ui.editors.controls.Stepper","mstrmojo.css");var AB=function(){return mstrmojo.locales.datetime;},i=mstrmojo.dom,h=mstrmojo.expr,y=h.DTP,Z=mstrmojo.date,J=mstrmojo.publisher,e=mstrmojo.hash,k=mstrmojo.array,N=k.removeIndices,j=mstrmojo.css;var AA=0,C=3,M=4,n=5,Q=6;var AC="month",c="day",V="year",X="hour",AF="minute",v="second";var G='<table border="0" cellpadding="0" cellspacing="0">',u="</table>";function O(AG){return'<table border="0" cellpadding="0" cellspacing="0" style="'+AG+'">';}function H(AJ,AG,AH){var AI=Z.getFirstDateOfMonth(AJ,AG);return(AI.getDay()-AH+8)%7;}function l(AJ){var AI=Z.parseDateAndOrTime(AJ),AK,AG,AH;if(AI){AH={};AK=AI.date;AG=AI.time;if(AK){e.copy(AK,AH);}if(AG){e.copy(AG,AH);}}return AH;}function F(AH,AK,AJ,AI,AG){var AL=Z.formatDateInfo({day:AH,month:AK,year:AJ},AB().DATEOUTPUTFORMAT);return Z.inDateTimeRange(AL,AI,AG)===0;}function T(AK,AJ,AI){var AH=AK.decreaseButton,AG=AK.increaseButton,AL="mstrmojo-Calendar";AH.className=(AL+"-decrease");AG.className=(AL+"-increase");}function W(AK,AH,AM,AJ){var AI=0,AG=AK.length,AL;for(AI=0;AI<AG;AI++){AL=AK[AI];if(AL&&AL.day===AH&&AL.month===AM&&AL.year===AJ){return AI;}}return -1;}function o(AG,AI,AH){var AJ=new Date();return(AJ.getFullYear()===AH)&&((AJ.getMonth()+1)===AI)&&(AJ.getDate()===AG);}function t(AN,AO){var AS=AN.dayView.getElementsByTagName("div"),AQ=AN.selectedDates,AI=AQ[AO],AR=AN.browseYear,AH=AN.browseMonth,AK=Z.getDaysOfMonth(AR,AH),AJ=Z.getPreMonth(AR,AH),AM=Z.getDaysOfMonth(AJ.y,AJ.m),AG=H(AR,AH,AN.firstDayOfWeek),AL=((AI.month===AH)?AI.day+AG-1:(AI.month>AH?AI.day+AG+AK-1:AG-AM+AI.day-1)),AP=AS[AL];if(AP){b(AP,AN,false);}N(AQ,AO,1);}function B(AG){var AH=AG.selectedDates;while(AH.length){t(AG,0);}}function AE(AI,AG){var AH=K(AI,AG),AJ=AI.selectedDates;AJ.push({day:AH.d,month:AH.m,year:AH.y});b(AG,AI,true);}function m(AI,AJ){if(!AJ||!AJ.length){return null;}var AL=AI.selectedDates;for(var AH=0,AG=AJ.length;AH<AG;AH++){var AK=AJ[AH],AM=p(AI,AK);AL.push({day:AK.d,month:AK.m,year:AK.y});if(AM){b(AM,AI,true);}}}function p(AO,AQ){var AS=AO.dayView.getElementsByTagName("div"),AJ=AS.length,AR=AO.browseYear,AH=AO.browseMonth,AK=Z.getPreMonth(AR,AH),AL=Z.getDaysOfMonth(AK.y,AK.m),AW=Z.getNextMonth(AR,AH),AI=Z.getDaysOfMonth(AR,AH),AG=H(AR,AH,AO.firstDayOfWeek);var AM=AG>0?{y:AK.y,m:AK.m,d:AS[0].innerHTML}:{y:AR,m:AH,d:AS[0].innerHTML},AU=(AS.length-AI-AG)>0?{y:AW.y,m:AW.m,d:AS[AJ-1].innerHTML}:{y:AR,m:AH,d:AS[AJ-1].innerHTML},AV=S(AM,AQ),AN=S(AQ,AU),AP=null;if(AV>=0&&AN>=0){var AT=0;if(AV<AG){AT=-1;}if(AN<(AS.length-AG-AI)){AT=1;}AP=((AT===0)?AQ.d+AG-1:(AT===1?AQ.d+AG+AI-1:AG-AL+AQ.d-1));return AS[AP];}else{return null;}}function f(AO,AG){var AQ=AO.selectedDates,AI=AQ.length;if(!AI){return null;}var AH=AQ[AI-1],AJ=K(AO,AG),AT=S({y:AH.year,m:AH.month,d:AH.day},AJ),AU=[],AL=AT>0,AR=Math.abs(AT);for(var AN=0;AN<=AR;AN++){var AM=new Date(AJ.y,AJ.m-1,AJ.d);AM.setDate(AM.getDate()+(AL?-AN:AN));var AS=AM.getFullYear(),AK=AM.getMonth()+1,AP=AM.getDate();if(AO.isDateDisabled(AP,AK,AS,AO.min,AO.max)&&!AO.canSelectDisabledDate){continue;}AU.push({y:AS,m:AK,d:AP});}return AU;}function S(AJ,AI){var AG=new Date(AJ.y,AJ.m-1,AJ.d),AH=new Date(AI.y,AI.m-1,AI.d);return(AH-AG)/1000/3600/24;}function K(AI,AG){var AJ=AI.browseYear,AL=AI.browseMonth,AK=parseInt(AG.innerHTML,10),AM=parseInt(AG.getAttribute("m"),10),AH=null;AH=(AM===0)?{y:AJ,m:AL}:(AM===1?Z.getNextMonth(AJ,AL):Z.getPreMonth(AJ,AL));AH.d=AK;return AH;}function g(AG){var AI=AG.selectedDates,AH=AI.length;return(AH===0)?null:AI[AH-1];}function b(AH,AI,AG){var AJ=AI.selectedColor;j.toggleClass(AH,["selected",AI.selectedCssStyle],AG);AH.parentNode.style.backgroundColor=AG?AJ:"";AH.style.backgroundColor=AG?AJ:"";}function x(AG){return AG.selectedColor?('style="background-color:'+AG.selectedColor+';"'):"";}function P(AG){return(AG.tagName.toLowerCase()==="td")?AG.firstChild:AG;}function R(AH,AI){var AJ=Z.getDateJson(AH),AG=Z.formatDateInfo(AJ,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);if(AI===y.TIMESTAMP){AG+=" "+Z.formatTimeInfo(this.timeVal,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return AG;}function q(AL,AI){var AG=this.advancedValues,AH=null;AG.set(AL,AI);switch(AG.baseDate){case C:AH=new Date();break;case M:break;case n:break;case Q:break;default:return ;}var AJ=AG.monthsToAdjust;if(AJ>0){AH.setMonth(AH.getMonth()+(AG.toAddMonths?AJ:-AJ));}var AK=AG.daysToAdjust;if(AK>0){AH.setDate(AH.getDate()+(AG.toAddDays?AK:-AK));}this.set("value",R.call(this,AH,this.dtp));}function U(){var AG=this.advancedValues,AH=["isDyn"];if(AG.baseDate===AA){return null;}AH.push(AG.baseDate);AH.push(AG.toAddDays?AG.daysToAdjust:-AG.daysToAdjust);AH.push(AG.toAddMonths?AG.monthsToAdjust:-AG.monthsToAdjust);AH.push(0);AH.push(0);AH.push(0);AH.push(0);AH.push(this.value);AH.push(this.timeVal.hour);AH.push(this.timeVal.min);AH.push(this.timeVal.sec);return AH.join("::");}function AD(AG){if(AG.value!==undefined&&this.hasRendered){this.updateSelectedDate();}}function I(AI,AH){var AJ=this,AG=function(AK){return AK[0].toUpperCase()+AK.substring(1);};return{scriptClass:"mstrmojo.HBox",cssClass:"dateAdjustBox",alias:AI+"AdjustBox",children:[{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:AH>=0?0:1,onitemSelected:function(AL,AK){q.call(AJ,"toAdd"+AG(AI),AK===0);},items:[{did:0,n:mstrmojo.desc(9424,"plus")},{did:1,n:mstrmojo.desc(9425,"minus")}]},{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:null,height:null,provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,min:0,value:Math.abs(AH)},onTraverse:function(){q.call(AJ,AI+"ToAdjust",this.curVal);}})},{scriptClass:"mstrmojo.Label",text:AI==="days"?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months")}]};}function Y(){this.buttonsNode.style.display=(this.wasAdvanced||this.changeValueOnOK||(this.showAdvanced&&this.isAdvanced)?"block":"none");this.advancedNode.style.display=this.showAdvanced?"block":"none";}mstrmojo.Calendar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Calendar",cssPrefix:"",browseMonth:null,browseYear:null,yearRangStart:null,selectedDates:null,selectedColor:"",isMultiSelect:false,hilightToday:false,yearViewSize:5,cssTextDay:"",cssTextMonth:"",cssTextYear:"",cssTextWeekDay:"",cssTextHeader:"",cssTextMonthYearLabel:"",forceNonEmptySelection:false,showCurMonthDatesOnly:false,currentView:c,duration:600,timeDelimiter:":",dtp:y.DATE,value:"",firstDayOfWeek:1,changeValueOnOK:false,wasAdvanced:false,showAdvanced:false,isAdvanced:false,dynDateValue:null,canSelectDisabledDate:false,monthNames:function(AG){return AB().MONTHNAME_SHORT[AG];},dayNames:function(AG){return AB().dayShortNames[AG];},min:null,max:null,supportedViews:{day:true,month:true,year:true,hour:true,minute:true,second:true},sDirMatrix:{day:{month:"down",year:"down",hour:"up",minute:"up",second:"up"},month:{day:"up",year:"left",hour:"up",minute:"up",second:"up"},year:{day:"up",month:"right",hour:"up",minute:"up",second:"up"},hour:{day:"down",month:"down",year:"down",minute:"left",second:"left"},minute:{day:"down",month:"down",year:"down",hour:"right",second:"left"},second:{day:"down",month:"down",year:"down",hour:"right",minute:"right"}},markupString:'<div id="{@id}" class="{@cssPrefix} mstrmojo-Calendar {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,mouseover,mouseout><div class="mstrmojo-Calendar-header" style="{@cssTextHeader}"><div class="mstrmojo-Calendar-decrease"></div><div class="mstrmojo-Calendar-increase"></div><div class="mstrmojo-Calendar-title"><span class="mstrmojo-Calendar-monthLabel" style="{@cssTextMonthYearLabel}">{@browseMonth}</span><span class="mstrmojo-Calendar-yearLabel" style="{@cssTextMonthYearLabel}">{@browseYear}</span></div></div><div class="mstrmojo-Calendar-body" style="{@cssTextBody}"><div class="mstrmojo-Calendar-dayView"></div></div><div class="mstrmojo-Calendar-timePart"><span class="mstrmojo-Calendar-hourLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-minuteLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-secondLabel">00</span><span class="mstrmojo-Calendar-AMPMLabel">AM</span></div><div class="mstrmojo-Calendar-advanced"></div><div class="mstrmojo-Calendar-buttons cf"></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onbrowseMonthChange:function(){this.monthLabel.innerHTML=this.monthNames(this.browseMonth-1);},onbrowseYearChange:function(){this.yearLabel.innerHTML=this.browseYear;},ondtpChange:function(){this.timePart.style.display=(this.dtp===y.TIMESTAMP||this.dtp===y.TIME)?"block":"none";this.advancedNode.style.display=this.showAdvanced?"block":"none";},onvalueChange:function(){if(this.lastValue===undefined||this.value!==this.lastValue){this.updateSelectedDate();}},onchangeValueOnOKChange:Y,onisAdvancedChange:Y},markupSlots:{monthLabel:function(){return this.domNode.firstChild.lastChild.firstChild;},yearLabel:function(){return this.domNode.firstChild.lastChild.lastChild;},decreaseButton:function(){return this.domNode.firstChild.firstChild;},increaseButton:function(){return this.domNode.firstChild.childNodes[1];},bodyContainer:function(){return this.domNode.childNodes[1];},dayView:function(){return this.domNode.childNodes[1].firstChild;},monthView:function(){return this.domNode.childNodes[1].firstChild;},yearView:function(){return this.domNode.childNodes[1].firstChild;},hourView:function(){return this.domNode.childNodes[1].firstChild;},minuteView:function(){return this.domNode.childNodes[1].firstChild;},secondView:function(){return this.domNode.childNodes[1].firstChild;},timePart:function(){return this.domNode.childNodes[2];},hourLabel:function(){return this.domNode.childNodes[2].firstChild;},minuteLabel:function(){return this.domNode.childNodes[2].childNodes[2];},secondLabel:function(){return this.domNode.childNodes[2].childNodes[4];},AMPMLabel:function(){return this.domNode.childNodes[2].childNodes[5];},advancedNode:function(){return this.domNode.childNodes[3];},buttonsNode:function(){return this.domNode.childNodes[4];}},init:function z(AG){if(this._super){this._super(AG);}if(this.duration<1){this.duration=1;}if(!this.selectedDates){this.selectedDates=[];}this.timeVal={hour:0,min:0,sec:0};},ondynDateValueChange:function s(AG){if(AG.value!==undefined&&this.hasRendered){this.updateSelectedDate();this.buildChildren();}},onminChange:AD,onmaxChange:AD,buildChildren:function a(){var AM=this;if(this.showAdvanced){var AJ=this.dynDateValue,AI=this.advancedValues||this.addDisposable(new mstrmojo.Model({})),AP=AJ&&AJ.split("::")||[],AL=AP[1]||AA,AH=AP[2]||0,AQ=AP[3]||0,AN=function AN(){if(AM.isAdvanced){AM.wasAdvanced=true;AM.changeValueOnOK=true;}AM.set("isAdvanced",!AM.isAdvanced);mstrmojo.css.toggleClass(AM.markupSlots.dayView.call(AM),["ddSelected"],AM.isAdvanced);q.call(AM,"baseDate",AM.isAdvanced?3:0);if(AM.parent&&AM.parent.nudge&&AM.isAdvanced){AM.parent.nudge();}};this.advancedValues=AI;AI.baseDate=parseInt(AL);AI.toAddDays=AH>=0;AI.daysToAdjust=Math.abs(AH);AI.toAddMonths=AQ>=0;AI.monthsToAdjust=Math.abs(AQ);this.isAdvanced=!!this.dynDateValue;if(this.domNode){mstrmojo.css.toggleClass(this.markupSlots.dayView.call(this),["ddSelected"],this.isAdvanced);}if(this.isAdvanced&&this.value){var AG=l(this.value),AK=this.timeVal;if(AG&&AG.hour!==undefined){AK.hour=AG.hour;AK.min=AG.min;AK.sec=AG.sec;}}q.call(AM,"baseDate",this.isAdvanced?3:0);this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.HBox",alias:"checkLabel",slot:"advancedNode",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",checked:!!AM.isAdvanced,oncheckedChange:AN},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13844,"Dynamic Date"),onclick:function AO(){this.parent.checkbox.onclick();}}]},{scriptClass:"mstrmojo.Box",alias:"advancedPanel",slot:"advancedNode",bindings:{visible:"this.parent.isAdvanced"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today"),cssClass:"tdLabel"},I.call(this,"days",AH),I.call(this,"months",AQ)]},]);}else{this.destroyChildren(false);}this.addChildren([mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){AM.parent.close();},false,{slot:"buttonsNode"}),mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(){if(AM.changeValueOnOK||AM.isAdvanced||AM.wasAdvanced){AM.updateValue(true);}},true,{slot:"buttonsNode"})]);},preBuildRendering:function A(){this.buildChildren();return this._super();},getSelectedDatesAsString:function E(AH){var AG=[];k.forEach(this.selectedDates,function(AI){AG.push(Z.formatDateInfo(AI,AH||AB().DATEOUTPUTFORMAT));});return AG;},updateSelectedDate:function L(AK){var AG=this.value,AH=this.timeVal,AJ=this.selectedDates,AI,AL=function(AN,AM){AN.set("browseYear",AM.year);AN.set("browseMonth",AM.month);AN.updateTimePart();AN.updateView(AN.currentView);if(!AN.changeValueOnOK&&AN.hasRendered&&AN.closeOnValueChange!=true){AN.updateValue();}};if(this.wasAdvanced){this.wasAdvanced=false;this.changeValueOnOK=false;}if(AG){AI=l(AG);if(AI&&AI.hour!==undefined){AH.hour=AI.hour;AH.min=AI.min;AH.sec=AI.sec;}}if((AI&&!this.isMultiSelect)||AK){B(this);}if(AJ.length===0){if(!AI){if(this.parent.opener&&this.parent.opener.defaultDate){AI=l(this.parent.opener.defaultDate);}else{AI=Z.getDateJson(new Date());}}if(!this.canSelectDisabledDate&&this.isDateDisabled(AI.day,AI.month,AI.year,this.min,this.max)){if(this.min&&Z.compareDate(AI,this.min)<0){AI=l(this.min);}else{if(this.max&&Z.compareDate(AI,this.max)>0){AI=l(this.max);}}}AJ.push(AI);AL(this,AI);}else{AI=AJ[0];if(!this.value){AL(this,AI);}}},updateValue:function d(AG){var AI=g(this),AH="";if(AI){AH=Z.formatDateInfo(AI,AB().DATEOUTPUTFORMAT);if(this.dtp!==y.DATE){AH+=" "+Z.formatTimeInfo(this.timeVal,AB().TIMEOUTPUTFORMAT);}}this.lastValue=AH;this.set("value",AH);if(this.showAdvanced){this.set("dynDateValue",AG?U.call(this):null);}if(this.onValueUpdate){this.onValueUpdate();}},updateTimePart:function w(){var AH=this.timeVal,AG=AH.hour||0,AI=(AG%12===0)?12:(AG%12);this.hourLabel.innerHTML=AI;this.minuteLabel.innerHTML=Z.formatInteger(AH.min||0,2);this.secondLabel.innerHTML=Z.formatInteger(AH.sec||0,2);this.AMPMLabel.innerHTML=AG<12?" "+AB().AM_NAME:" "+AB().PM_NAME;},premousedown:function(AG){var AI=AG.e,AH=i.eventTarget(AG.hWin,AI);if(AH===this.decreaseButton||AH===this.increaseButton){if(i.isFF){i.stopPropogation(window,AI);}return true;}else{return this.processEvent(AH,AI);}},premouseup:function(AG){var AI=AG.e;if(AI.ctrlKey||AI.shiftKey){i.clearBrowserHighlights();}var AH=i.eventTarget(AG.hWin,AI);if(AH===this.decreaseButton&&!AH.disabled){this.decrease();return true;}if(AH===this.increaseButton&&!AH.disabled){this.increase();return true;}},processEvent:function(AR,AY){var AJ=this.currentView,AK=this.selectedDates,AO,AT,AZ,AG,AQ;if(AR===this.monthLabel){if(AJ!==AC){this.switchViewTo(AC);}return true;}if(AR===this.yearLabel){if(AJ!==V){this.adjustYearStart();this.switchViewTo(V);return true;}}if(AR===this.hourLabel){if(AJ!==X){this.switchViewTo(X);}return true;}if(AR===this.minuteLabel){if(AJ!==AF){this.switchViewTo(AF);}return true;}if(AR===this.secondLabel){if(AJ!==v){this.switchViewTo(v);}return true;}if(AR===this.AMPMLabel){if(AJ!==X){this.switchViewTo(X);}return true;}if(AJ===X){var AM=AR.getAttribute("h");AQ=parseInt(AR.innerHTML,10);if(!isNaN(AM)&&!isNaN(AQ)){AM=parseInt(AM,10);this.timeVal.hour=AQ%12+AM*12;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===AF){AQ=parseInt(AR.innerHTML,10);if(!isNaN(AQ)){this.timeVal.min=AQ;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===v){AQ=parseInt(AR.innerHTML,10);if(!isNaN(AQ)){this.timeVal.sec=AQ;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===c){var AX=this.browseYear,AH=this.browseMonth,AI;AR=P(AR);AZ=parseInt(AR.innerHTML,10);AG=parseInt(AR.getAttribute("m"),10);if(!isNaN(AZ)&&!isNaN(AG)){AI=(AG===0)?{y:AX,m:AH}:(AG===1?Z.getNextMonth(AX,AH):Z.getPreMonth(AX,AH));if((!this.canSelectDisabledDate&&this.isDateDisabled(AZ,AI.m,AI.y,this.min,this.max))||AY.button===2){return true;}if(this.isAdvanced){return true;}var AU=W(AK,AZ,AH,AX),AS=AK.length>1,AP=this.forceNonEmptySelection,AV=this.isMultiSelect,AN=AV&&AY.ctrlKey,AW=AV&&AY.shiftKey,AL=null;if(AW){AL=f(this,AR);B(this);m(this,AL);}else{if(AN){if(AU===-1){AE(this,AR);}else{if(!AP||AS){t(this,AU);}}}else{B(this);if(AS||AU===-1||AP){AE(this,AR);}}}if(this.onselect||J.hasSubs(this.id,"select")){this.raiseEvent({name:"select",value:this.selectedDates});}if(AG===1){this.increase();}else{if(AG===-1){this.decrease();}}if(!this.changeValueOnOK){this.updateValue();}else{if(this.showAdvanced){this.checkLabel.checkbox.set("checked",false);q.call(this,"baseDate",0);}}}return true;}if(AJ===AC){AR=P(AR);AT=parseInt(AR.getAttribute("m"),10);if(!isNaN(AT)){this.set("browseMonth",AT+1);this.switchViewTo(c);}return true;}if(AJ===V){AR=P(AR);AO=parseInt(AR.innerHTML,10);if(!isNaN(AO)){this.set("browseYear",AO);this.switchViewTo(c);}return true;}return true;},decrease:function(){var AI=this.currentView,AL=AI,AK=this.browseYear,AG=this.browseMonth,AH=this.yearRangStart,AJ;switch(AI){case c:AJ=Z.getPreMonth(AK,AG);this.set("browseMonth",AJ.m);this.set("browseYear",AJ.y);break;case AC:this.set("browseYear",AK-1);break;case V:this.yearRangStart=AH-this.yearViewSize*this.yearViewSize;break;case X:AL=v;break;case AF:AL=X;break;case v:AL=AF;break;}this.switchViewTo(AL,"right");},increase:function(){var AI=this.currentView,AL=AI,AK=this.browseYear,AG=this.browseMonth,AH=this.yearRangStart,AJ;switch(AI){case c:AJ=Z.getNextMonth(AK,AG);this.set("browseMonth",AJ.m);this.set("browseYear",AJ.y);break;case AC:this.set("browseYear",AK+1);break;case V:this.yearRangStart=AH+this.yearViewSize*this.yearViewSize;break;case X:AL=AF;break;case AF:AL=v;break;case v:AL=X;break;}this.switchViewTo(AL,"left");},updateView:function(AG){var AH=this[AG+"ViewHTML"]();this[AG+"View"].innerHTML=AH;},adjustYearStart:function(){this.yearRangStart=this.browseYear-10-this.browseYear%5;},switchViewTo:function(AH,AJ){var AN="mstrmojo-Calendar-"+AH+"View",AM=document.createElement("div"),AG=this[this.currentView+"View"],AK=AH+"ViewHTML",AL=this[this.currentView+"Label"],AI=this[AH+"Label"];if(!this.supportedViews[AH]){return ;}if(!AJ){AJ=this.sDirMatrix[this.currentView][AH];}AM.className=AN;AM.innerHTML=this[AK]();this.currentView=AH;this[AH+"View"]=AM;mstrmojo.css.toggleClass(AM,["ddSelected"],this.isAdvanced);this._slideIntoView(AG,AM,AJ);},_slideIntoView:function(AK,AO,AI){var AG=this.bodyContainer,AM=(AI==="left"||AI==="right")?AK.offsetWidth:AK.offsetHeight,AH=(AI==="left"||AI==="right")?"left":"top",AN=(AI==="left"||AI==="up")?AM:-AM,AL=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AK,onEnd:function(){AG.removeChild(AK);}}),AJ=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AO});AO.style[AH]=AN+"px";AG.appendChild(AO);AL.props[AH]={start:0,stop:-AN,suffix:"px"};AJ.props[AH]={start:AN,stop:0,suffix:"px"};AL.play();AJ.play();},dayViewHTML:function(){var AL=this.browseYear,AO=this.browseMonth,AT=Z.getDaysOfMonth(AL,AO),AX=Z.getPreMonth(AL,AO),AI=Z.getDaysOfMonth(AX.y,AX.m),AH=Z.getNextMonth(AL,AO),AP=H(AL,AO,this.firstDayOfWeek),AM=[],AJ=x(this),AZ=0,AG=this.selectedDates,AR=this.min,AV=this.max,Aa,AS,AW,AU,AY=this.showCurMonthDatesOnly?'style="visibility:hidden;"':"";T(this,{d:AI,m:AX.m,y:AX.y},{d:1,m:AH.m,y:AH.y});AM.push(O(this.cssTextDay));AM.push(this._dayViewTHead());AM.push("<tr>");for(AW=0;AW<AP;AW++){Aa=AI-AP+AW+1;AS=this.isDateDisabled(Aa,AX.m,AX.y,AR,AV)?"disabled":"";AM.push("<td "+AY+'><div class="mstrmojo-Calendar-day-pre '+AS+'" m="-1">');AM.push(Aa);AM.push("</div></td>");AZ++;}for(AW=0;AW<AT;AW++){Aa=AW+1;AS=this.isDateDisabled(Aa,AO,AL,AR,AV)?" disabled":"";var AK=o(Aa,AO,AL),AN=AK?" today":"",AQ=W(AG,Aa,AO,AL)!==-1;AN=(this.hilightToday&&AK)?" hilightToday":AN;AM.push("<td "+(AK?('class="'+AN+'" '):" ")+(AQ?AJ:"")+'><div class="mstrmojo-Calendar-day-cur'+(AQ?(" selected "):"")+AS+'" m="0"'+(AQ?AJ:"")+">");AM.push(AW+1);AM.push("</div></td>");if((++AZ)%7===0){AM.push("</tr><tr>");}}for(AU=AZ;AU<42;AU++){Aa=AZ-AT-AP+1;AS=this.isDateDisabled(Aa,AH.m,AH.y,AR,AV)?"disabled":"";AM.push("<td "+AY+'><div class="mstrmojo-Calendar-day-next '+AS+'" m="1">');AM.push(Aa);AM.push("</div></td>");if((++AZ)%7===0&&AZ!==42){AM.push("</tr><tr>");}}AM.push("</tr>");AM.push(u);return AM.join("");},_dayViewTHead:function(){var AJ=[],AK='<thead><tr class="mstrmojo-Calendar-thead" style="'+this.cssTextWeekDay+';">',AI="</tr></thead>",AH=this.firstDayOfWeek-1,AL=this.dayNames,AG;AJ.push(AK);for(AG=AH;AG<AH+7;AG++){AJ.push("<td>");AJ.push(AL(AG%7));AJ.push("</td>");}AJ.push(AI);return AJ.join("");},monthViewHTML:function(){var AH=[],AJ=this.browseMonth-1,AI=this.browseYear,AG;T(this,{d:31,m:12,y:AI-1},{d:1,m:1,y:AI+1});AH.push(O(this.cssTextMonth));AH.push("<tr>");for(AG=0;AG<12;AG++){AH.push("<td "+((AG===AJ)?x(this):"")+'><div class="mstrmojo-Calendar-month'+((AG===AJ)?" selected":"")+'" m="');AH.push(String(AG));AH.push('">');AH.push(this.monthNames(AG));AH.push("</div></td>");if(AG%3===2){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},yearViewHTML:function(){var AL=this.yearRangStart,AH=[],AJ=this.browseYear,AK,AG,AI=this.yearViewSize;T(this,{d:31,m:12,y:AL-1},{d:1,m:1,y:AL+AI*AI});AH.push(O(this.cssTextYear));AH.push("<tr>");for(AG=0;AG<AI*AI;AG++){AK=AL+AG;AH.push("<td "+((AJ===AK)?x(this):"")+'><div class="mstrmojo-Calendar-year'+((AJ===AK)?" selected":"")+'">');AH.push(AK);AH.push("</div></td>");if(AG%AI===(AI-1)){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},hourViewHTML:function(){var AI=[],AH=this.timeVal.hour,AG;AI.push(G);AI.push('<tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AI.push(AB().AM_NAME);AI.push("</div></td></tr>");for(AG=0;AG<12;AG++){AI.push('<td><div class="mstrmojo-Calendar-hour'+((AG===AH)?" selected":"")+'" h="0">');AI.push((AG===0)?12:AG);AI.push("</div></td>");if(AG===5){AI.push("</tr><tr>");}}AI.push('</tr><tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AI.push(AB().PM_NAME);AI.push("</div></td></tr>");for(AG=0;AG<12;AG++){AI.push('<td><div class="mstrmojo-Calendar-hour'+(((12+AG)===AH)?" selected":"")+'" h="1">');AI.push((AG===0)?12:AG);AI.push("</div></td>");if(AG===5){AI.push("</tr><tr>");}}AI.push("</tr>");AI.push(u);return AI.join("");},minuteViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.min,"mstrmojo-Calendar-minute");},secondViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.sec,"mstrmojo-Calendar-second");},_minuteSecondViewHTML:function(AI,AJ){var AH=[],AG;AH.push(G);AH.push("<tr>");for(AG=0;AG<60;AG++){AH.push('<td><div class="');AH.push(AJ);AH.push((AG===AI)?' selected">':'">');AH.push(AG);AH.push("</div></td>");if(AG%10===9){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},isDateDisabled:function(AG,AI,AH){return !F(AG,AI,AH,this.min,this.max);},unrender:function D(AG){delete this.lastValue;this._super(AG);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.css");var G=mstrmojo.dom,R=mstrmojo.array,d=mstrmojo.css,c="animate",W="31px";function X(){var i=window.Modernizr,h="transition";if(i.testProp(h)){return G.transEndEvtNames[i.prefixed(h)];}return null;}function D(h){return function(){this.menuNode.style.display=h?"block":"none";};}function I(h){return Math.min(h.offsetWidth-h.firstChild.offsetWidth,0);}function S(h){return h.isAlignRight?"right":"left";}function e(h,i){return parseInt(h.style[S(i)],10)||0;}function O(){var i=this.tabContainerNode,j=false,h=false;if(I(i)<0){var l=G.position(i),k=G.position(i.firstChild);j=(k.x<l.x);h=(k.x+k.w>l.x+l.w+0.1);}this.downBtnNode.style.display=j?"block":"none";this.upBtnNode.style.display=h?"block":"none";}function T(h,i){h=(h||[]);if(!h.filter){return R.filter(h,i);}return h.filter(i);}function Q(h,i){h=(h||[]);if(!h.map){return R.map(h,i);}return h.map(i);}function J(x,j){if(this.isStatic){return ;}var v=this.tabContainerNode,u=T(this.children,function(y){return y.isSelected;})[0],q=u&&u.domNode;if(!v||!q){return ;}var k=G.position(v),o=v.firstChild,w=I(v),l=e(o,this),i=Math.max(l,w);if(x){if(w<0){var n=G.position(q),p=n.x-k.x,t=n.x+n.w-(k.x+k.w),s=this.isAlignRight,h=function(y){i=s?i+y:i-y;};if(p<0){h(p);}else{if(t>0){h(t);}}}}if(i!==l){var m=X();if(j&&m){d.addClass(o,c);G.attachOneTimeEvent(o,m,function(){d.removeClass(o,c);});}o.style[S(this)]=Math.max(w,Math.min(i,0))+"px";}O.call(this);}function K(h){return h.hasOwnProperty("index");}function H(){var h=this.children,i=0;(h||[]).every(function(k,j){if(!K(k)){return false;}i++;k.index=j;return true;});(h||[]).every(function(j){if(!K(j)){return false;}j.total=i;return true;});}function B(l,i){var p=l.ENUM_CORNERS,m=[p.TOP_RIGHT,p.BOTTOM_RIGHT],n=this.parent;if(n.position!=="bottom"){m.reverse();}l.setAlignment(m[0],m[1]);var k=G.position(n.domNode),h=G.position(i),j=n.menuNode;var o=j.style;o.top=(h.y-k.y)+"px";o.left=(h.x-k.x)+"px";l.addPopupHandlers(n.id,D(true),D(false));l.hostId=n.id;l.hostElement=j;l.isHostedWithin=false;n.openPopup(l.newInstance());}function Y(h){h.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" ><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div></div></div><div class="mstrmojo-VITabStrip-downBtn" mstrAttach:click,mousedown><div></div></div><div class="mstrmojo-VITabStrip-upBtn" mstrAttach:click,mousedown><div></div></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabContainerNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild.firstChild.firstChild;},addBtnNode:function(){return this.domNode.childNodes[1];},addBtnImgNode:function(){return this.domNode.childNodes[1].firstChild;},downBtnNode:function(){return this.domNode.childNodes[2];},upBtnNode:function(){return this.domNode.childNodes[3];},menuNode:function(){return this.domNode.childNodes[4];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isAlignRight:true,tabContainerNode:null,downBtnNode:null,upBtnNode:null,menuNode:null,position:"bottom",layoutConfig:{w:{tabContainerNode:"100%",addBtnNode:W},xt:true},onAppStateChange:function V(i){var h=mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;if(i.value===h||i.valueWas===h){this.layoutConfig.w.addBtnNode=mstrApp.appState===h?"0px":W;this.doLayout();}},setStatic:function U(h,i){this.isStatic=h;if(!h){J.call(this,true,i);}},setTabs:function C(j,h){this.removeChildren();var k=this,i=j.length;this.addChildren(Q(j,function(n,l){var m=n.k;return k.getTabCfg(j,n,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:l,total:i,draggable:!!i,dropZone:!!i,k:m,isSelected:m===h,showTabMenu:B,tabMoved:function(p){var o=this.index;this.parent.moveTab(o,o+(p?-1:1),o);}});}));J.call(this,true);Y(this);},getTabs:function N(){return T(this.children,K);},getTabCfg:function F(i,j,h){return h;},deleteTab:function P(h){var n=this.id,m=this.children[h],l=X(),k=function(){var o=mstrmojo.all[n];o.removeChildren(m);m.destroy();H.call(o);O.call(o);Y(o);};if(l){var j=m.domNode.firstChild,i=j.style;i.width=j.offsetWidth+"px";window.setTimeout(function(){d.addClass(j,c);G.attachOneTimeEvent(j,l,k);i.width=0;},0);}else{k();}},buildRendering:function E(){this._super();d.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function Z(){var h=this._super();J.call(this,true);return h;},doLayout:function A(){this._super();J.call(this);},setSelectedTab:function b(h){(this.children||[]).forEach(function(i){i.set("isSelected",i.k===h);});Y(this);},getSelectedTab:function M(){var k=null,j=this.children||[],h;for(h=0;h<j.length;h++){if(j[h].isSelected){k=j[h];break;}}return k;},onclick:function g(h){if(h.getTarget()===this.addBtnImgNode){this.addTab();}},addTab:mstrmojo.emptyFn,onmousedown:function f(t){var o=t.getTarget().parentNode,u=(o===this.downBtnNode);if(u||o===this.upBtnNode){var s=this.tabContainerNode,n=s.firstChild,i=I(s),k=e(n,this),m=this.isAlignRight?(u?-10:10):(u?10:-10),j=this.id,p=this,l;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}d.addClass(o,"active");var q=function(){window.clearInterval(l);d.removeClass(o,"active");O.call(mstrmojo.all[j]);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}};G.attachOneTimeEvent(document.body,"mouseup",q);l=window.setInterval(function(){k=Math.min(Math.max(i,k+m),0);n.style[S(p)]=k+"px";if(k===i||k===0){q();}},33);}},moveTab:function L(h,p,n,m){var i=this.children,q=i.splice(h,1)[0];i.splice(p,0,q);H.call(this);var j=this.containerNode,k=j.childNodes,o=j.removeChild(k[h]),l=k[p];if(l){j.insertBefore(o,l);}else{j.appendChild(o);}if(q.isSelected){J.call(this,true,true);}if(!m&&n!==undefined&&n!==p){this.commitTabMove(n,p);Y(this);}},commitTabMove:function a(h,i){throw new Error(this.scriptClass+" must implement commitTabMove.");}});}());(function(){mstrmojo.requiresCls("mstrmojo.FilterExpr","mstrmojo.threshold.AndOrNode","mstrmojo.threshold.ConditionNode","mstrmojo.expr");var G=mstrmojo.expr,F=G.ET;mstrmojo.threshold.ThresholdExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.threshold.ThresholdExprTree",cssClass:"mstrmojo-ThresholdExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,supportRelation:true,nodeClassMap:{14:mstrmojo.threshold.AndOrNode,"*":mstrmojo.threshold.ConditionNode},onConditionEdit:mstrmojo.emptyFn,editor:undefined,isEditable:function C(H){if(!this.editable){return false;}if(H&&H.et===F.XML){return !H.xml;}return true;},onNew:function E(H){H.data.isNew=true;this.editor.openConditionWalk(H.data,H.widget.ctxtBuilder.itemWidgets[H.index]);},onnodeclick:function D(H){var I=H.part;if(!H||!I){return ;}var K=I==="andor",J=this.tree.editor;if(!((K&&this.prefixedAndOrEditable)||(!K&&this.editable))){return ;}if(!this.editable){return ;}if(K){J.openAndORPopup(this,H.getTarget());return ;}else{if(I==="addCondition"){this.tree.newCondition(null);return ;}}J.openConditionWalk(this.data,this);},allowDrop:function B(H){var M=H&&H.src,L=M&&M.data,J=L&&L.et,K=this.tree,I=M&&M.widget&&M.widget.tree;return J&&(this===K?(I!==K):true);},remove:function A(I){var H=this._super(I);if(this.items.length===0&&I.et===F.ANDOR&&I.nds.length===0&&this.parent.removeFromModel){this.parent.removeFromModel();}return H;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasPopup","mstrmojo.fe.AndOrNode","mstrmojo.fe.DynamicNode","mstrmojo.ConditionNode","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr");var D=mstrmojo.css,A=mstrmojo.dom,G=mstrmojo.hash,C=function(L){var M=L.data,K=M.dmy&&M.dmy.uts||[],I=K.length,H=[],J;for(J=0;J<I;J++){H.push(K[J].n);}return'<span class="mstrmojo-text">'+H.join(", ")+"</span>";};mstrmojo.fe.RelationNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.fe.RelationNode",markupString:'<div id="{@id}" class="mstrmojo-relation {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-relation-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-relation-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-relationNode"><span class="mstrmojo-relationNode-inf"><span class="mstrmojo-relation-prefix-text">'+mstrmojo.desc(2790,"Set of").replace(/##/g,"")+'</span><span class="mstrmojo-textset"  mstrAttach:click></span><span class="mstrmojo-relation-postfix-text">'+mstrmojo.desc(2793,"Where").replace(/##/g,"")+'</span><span class="mstrmojo-relation-convert-text"  mstrAttach:click >'+mstrmojo.desc(null,"Convert to Condition")+'</span><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></span><div class="mstrmojo-relation-childTreeNode" style="position:relative;"></div></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},relationNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},convertNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[3];},containerNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{onprefixedAndOrEditableChange:function(){D.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){D.toggleClass(this.relationNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=C(this);}},noRelationOperator:true,children:[{scriptClass:"mstrmojo.fe.RelationFilterExprTree",alias:"childTree",ignoreLayout:true,dropZone:false,draggable:false,nodeClassMap:{14:mstrmojo.fe.AndOrNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},onNew:function(H){this.parent.tree.onNew(H);},getItemConfig:function(K,H,L){var I=mstrmojo.fe.RelationFilterExprTree.prototype.getItemConfig.call(this,K,H,L),J=L.tree||L;return G.copy({tree:J,rootTree:this.parent.tree,noRelation:true,inRelation:true},I);},prenodeclick:function(H){if(!H||!H.part){return ;}var I=this.rootTree;if(I&&I.onnodeclick&&this.editable){H.editor=I.editor;I.onnodeclick.call(this,H);}}}],premousedown:function(H){if(this._super){this._super(H);}var I=A.eventTarget(H.hWin,H.e);if(!A.contains(this.childTree.domNode,I,true)){this.childTree.clearTreeSelect();}},preselectedChange:function(H){if(!H.value){this.childTree.clearTreeSelect();}},init:function(H){this._super(H);var I=this.data;if(I){delete this.data;this._set_data(null,I);}},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;if(H){this.childTree.set("items",H.nds||[H]);}}return J;},isSelectableArea:function(H){return mstrmojo.dom.contains(this.relationNode,H,true);},preclick:function E(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.textNode,I,true)){J="createSet";}else{if(A.contains(this.convertNode,I,true)){this.parent.removeSet(this);return false;}}}H.part=J;},del:function B(){var H=this.parent;if(H&&H.remove&&this.data){H.remove(this.data);}},newCondition:function F(H){this.childTree.newCondition(H);},avatarCssCls:"mstrmojo-FE mstrmojo-relationNode",getAvatarNode:function(){return this.relationNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");var H=mstrmojo.array;var E=[257,1024,3072,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:H.hash(E),item:null,OKFn:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+E.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:false,scrollableIncFetch:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId"}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function C(){var J=this.parent.parent;this.parent.parent.close({item:J.item});var I=J.OKFn;if(I){I(J.item);}J.set("item",null);},bindings:{enabled:function B(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancle"),onclick:function C(){var I=this.parent.parent;this.parent.parent.close();I.set("item",null);}}]}],preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function D(){if(this._super){this._super();}this.browse();},onOBSelect:function F(I){this.set("item",((this.supportedTypes[I.t]||this.supportedTypes[I.st])?I:null));},browse:function G(){this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.NewFolderEditor");function B(){var E={alias:"newFolder",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-createfolder",text:mstrmojo.desc(3245,"Create New Folder"),onclick:function(){var G=this.parent.parent,F={zIndex:G.zIndex+10,navigateAfter:false,fId:G.ob.currentFolder.did,okFn:function(H,I){G.ob.refreshContent();if(I){G.ob.browseFolder(H.fid,G.newFolder);}}};if(G.ob.dataProvider){F.dp=G.ob.dataProvider;}G.openPopup("newFolder",F);},postCreate:function(){this.set("visible",mstrmojo.resolveFeature("create-folder"));}},D=mstrmojo.hash.clone(mstrmojo.ObjectBrowser.prototype.children);D.push(E);return D;}mstrmojo.SaveAsObjectBrowser=mstrmojo.declare(mstrmojo.ObjectBrowser,null,{scriptClass:"mstrmojo.SaveAsObjectBrowser",cssClass:"mstrmojo-SaveAs-OB",children:B()});var A={success:function(D){var E=this.parent;if(E.onObjectSaved){E.onObjectSaved({name:E.name,did:D.did,desc:E.desc});}mstrmojo.alert(mstrmojo.desc(7987,"The ## '###' has been saved successfully.").replace("##",E.typeDesc||"Object").replace("###",E.name),null,mstrmojo.desc(7984,"Object Saved"));E.ob.refreshContent();E.close();},failure:function(E){var D=parseInt(E.getResponseHeader("X-MSTR-TaskErrorCode"),10)+4294967296,F=this.parent;if(D==2147749923){mstrmojo.confirm(mstrmojo.desc(7986,"The ## '###' already exists. Do you want to replace the existing one?").replace("##",F&&F.typeDesc||"Object").replace("'###'",F&&F.name?'"'+F.name+'"':""),{confirmBtn:{fn:function(){F.saveAs(true);}}},{title:mstrmojo.desc(3179),zIndex:F&&F.zIndex+10});}else{mstrmojo.alert(mstrmojo.desc(7985,"Error while saving: ")+E.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};mstrmojo.SaveAsEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SaveAsEditor",cssClass:"mstrmojo-SaveAsEditor",title:mstrmojo.desc(3167,"Save As"),sId:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:null,browsableTypes:null,showCompletePath:true,desc:"",name:"",help:"Save_As_dialog_box.htm",displaySaveLabel:true,searchVisible:true,upButtonVisible:true,children:[{scriptClass:"mstrmojo.SaveAsObjectBrowser",alias:"ob",closeable:false,closeOnSelect:false,fishEyeVisible:false,bindings:{showCompletePath:"this.parent.showCompletePath",rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",browsableTypes:"this.parent.browsableTypes",displaySaveLabel:"this.parent.displaySaveLabel",searchVisible:"this.parent.searchVisible",upButtonVisible:"this.parent.upButtonVisible",sId:"this.parent.sId"},postCreate:function(){this.onSelectCB=[this.parent,"onOBSelect"];this.onBrowseFolder=[this.parent,"onOBBrowseFolder"];}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-Input-Panel",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Name-Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput",bindings:{value:"this.parent.parent.name"}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Desc-Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",bindings:{value:"this.parent.parent.desc"},rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"buttonBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot okButton",alias:"ok",text:mstrmojo.desc(2400,"Save"),onclick:function(){this.parent.parent.saveAs();}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]}],newFolder:{scriptClass:"mstrmojo.NewFolderEditor"},onOpen:function(){this.ob.browse();},onOBBrowseFolder:mstrmojo.emptyFn,onOBSelect:function(D){this.set("name",D.n);},saveAsCallback:function C(){return A;},saveAs:function(F){var E=this.contPanel;this.name=E.name.value;this.desc=E.desc.value;if(!this.name){mstrmojo.alert(mstrmojo.desc(3380,"Please enter valid name"));return ;}var G=this.saveParams||{};G.folderID=this.ob.currentFolder.did;G.description=this.desc||"";G.name=this.name||"";G.saveAsOverwrite=!!F;var D=this.saveAsCallback();D.parent=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,D,G);}});mstrmojo.SaveAsEditor.SAVEAS_CALLBACK=A;})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.Label","mstrmojo.Obj","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.warehouse.EnumObjectTypes");var G=mstrmojo.expr,C=G.ET,B=mstrmojo.array,E=mstrmojo.string,F=mstrmojo.warehouse.EnumObjectTypes,D=mstrmojo.mstr.EnumNodeDimty;mstrmojo.fe.CreateSetEditor=mstrmojo.declare(mstrmojo.Editor,null,{onOpen:function(){var M=this.model,P=this.condition.data,N=!P.m,J=this.attrsBox.attrsList,H=this.relBox.relPd,Q=[{n:mstrmojo.desc(12037,"System Default"),t:-1,did:"default"}].concat(M.metrics),I=this.appQual;J.set("items",M.attrs);mstrmojo.array.forEach(["relBox","appQual"],function(R){this[R].set("visible",N);},this);if(P.dmt===4&&P.dmy.uts){var K={};B.forEach(P.dmy.uts,function(S){var R=B.find(M.attrs,"did",S.utgt.did);if(R>=0){K[R]=true;}});J.set("selectedIndices",K);}if(N){H.set("items",Q);if(P.relation&&P.relation.guide){var L=P.relation.guide,O=B.find(Q,"did",L.did);H.set("selectedIndex",O>=0?O:0);}else{H.set("selectedIndex",0);}I.set("checked",!!P.applySubExpr);}},onOK:function(){var O=this.model,R=this.condition,T=this.condition.data,L=this.attrsBox.attrsList,H=this.relBox.relPd,J=this.appQual;var V=L.getSelectedItems(),I=[];B.forEach(V,function(X){I.push({utgt:{n:X.n,did:X.did},utp:G.DMY_TP.ATTR,agg:1,flt:2,gb:true,rps:0,n:X.n});});var U;if(H.selectedIndex>0){var M=H.items[H.selectedIndex];U={n:M.n,did:M.did,t:F.METRIC,st:1024};}var K;if(T.et===15){T.dmt=D.NodeDimtyOutputLevel;T.dmy=T.dmy||{};T.dmy.uts=I;K=T.relation=T.relation||{};if(U){K.guide=U;T.useSchema=false;}else{delete K.guide;delete K.rsTp;delete K.joTp;delete K.paTp;delete K.erTp;T.useSchema=true;}T.applySubExpr=J.checked;R.set("data",T);}else{var S={et:15};S.dmt=D.NodeDimtyOutputLevel;S.dmy={};S.dmy.uts=I;K=S.relation={};if(U){K.guide=U;}else{S.useSchema=true;}S.applySubExpr=J.checked;var N=R,P={rq:S,cq:T},Q=[R.childIndex()];if(T.et===C.ANDOR){if(T.nds&&T.nds.length>2){var W=O.childIdx;Q=[W,W-1];}else{N=R.parent;}}else{N=R.parent;P.isMetric=!!T.m;}N.createSet(Q,P);}},children:[{scriptClass:"mstrmojo.Box",alias:"attrsBox",cssClass:"Attributes-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14613,"Select attributes to create the set"),cssClass:"Label"},{scriptClass:"mstrmojo.ui.CheckList",alias:"attrsList",cssClass:"CheckList"}]},{scriptClass:"mstrmojo.Box",alias:"relBox",cssClass:"RelatedBy-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12036,"Related by"),cssClass:"Label",cssDisplay:"inline-block"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"relPd",cssClass:"Pulldown",cssDisplay:"inline-block",onitemSelected:function A(H){}}]},{scriptClass:"mstrmojo.ui.Checkbox",alias:"appQual",cssClass:"AppQual-CheckBox",postBuildRendering:function(){this.domNode.innerHTML=E.encodeHtmlString(mstrmojo.desc(12038,"Apply this qualification independently of the relationship filter"));}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float: right; border-collapse: separate; display: table;",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(2397,"OK"),onclick:function(){var H=this.editor;H.onOK();H.close();},bindings:{enabled:function(){var I=this.parent.parent.attrsBox.attrsList,H=this.parent.parent.attrsBox.attrsList.selectedIndices;return I.getSelectedItems().length>0;},editor:"this.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent"}}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.FilterExpr");var D=mstrmojo.hash,B=mstrmojo.expr.ET;mstrmojo.fe.FilterExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.fe.FilterExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,onConditionEdit:mstrmojo.emptyFn,modifyConditionNode:function(G,F){var H=G.data,E=H.isNew;D.copy(D.clone(F),D.clear(H));delete H.isNew;G.paint();if(H.et===B.MQ||H.et===B.MC){G.set("noCreateSet",true);}if(G.tree.onConditionEdit){G.tree.onConditionEdit(G,E);}},getItemConfig:function(H,E,I){var F=this._super(H,E,I),G=I.tree;return D.copy({onclick:G.prenodeclick,containerResizable:G.containerResizable,ondragend:G.ondragend,ondrop:G.ondrop},F);},ondragenter:function A(E){this.dropCuePos={left:0,top:0,idx:0,idxActual:0};this._super(E);},ondragend:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondragend.call(this,E);}},ondrop:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondrop.call(this,E);}},isEditable:function C(F){if(!this.editable){return false;}var E=false;switch(F&&F.et){case B.R:case B.F:E=false;break;case B.ANDOR:case B.MQ:case B.AQ:case B.AL:case B.AC:case B.MC:case B.AE:E=true;break;case B.XML:E=!F.xml||!!F.ph;}return E;},prenodeclick:function(E){if(!E||!E.part){return ;}if(E.part!=="createSet"&&E.part!=="createSetOpt"&&!(E.part==="andor"?this.prefixedAndOrEditable:this.editable)){return ;}var F=this.tree;if(F.onnodeclick){F.onnodeclick.call(this,E);}},getSelectedItemWidget:function(){var E=function(K){var I=K&&K.ctxtBuilder&&K.ctxtBuilder.itemWidgets,G=K.selectedIndex,F=I&&I.length||0;if(!I){return ;}if(G===-1){for(var H=0;H<F;H++){var J=E(I[H]);if(J){return J;}}}else{return I[G];}};return E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox");var K=mstrmojo.hash,Z=mstrmojo.array,F=mstrmojo.num,H=mstrmojo._FormatDefinition,A=mstrmojo.css,X=mstrmojo.mstr.EnumFunction,J=mstrmojo.locales,G=mstrmojo.Button.newIconButton,M=mstrmojo.date,D=H.NumberFormatCategory,l=H.FixedNegative,E=H.CurrencyNegative,c=H.PercentNegative,I=H.DefaultFormat.FormattingNumber,W,R,b=function b(o,n){return{cls:this.value===o.v?"selected":"",v:o.v||"",n:o.n||"",style:o.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===n?"selected":""};},k={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};var Q=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(H.Category.slice(2)),a=[{n:"$"},{n:"£"},{n:"€"},{n:"¥"},{n:"fr."}];function C(p,o){var n=Z.find(p,"v",o);return n===-1?"":p[n].f;}function L(n){var p=this.parent.parent.parent.myData,o=n.v;p.set("format",C(this.items,o));p.set("negativeNumbers",o);A.toggleClass(this.selectedNode,"red",n.r);}function V(p,q,n){return{scriptClass:"mstrmojo.ui.Pulldown",items:p,onitemSelected:function o(s){var t=this.parent;while(t&&(!t.data||typeof t.data[q]==="undefined")){t=t.parent;}if(t){t.data.set(q,s.v);if(n){t.children[0].preview.preview_label.set("text",s.n);}}}};}function f(x,s,q,z,w){var y=K.clone(x),n=s>0?".":"",o=n,p=H.DefaultFormat.FormattingNumber,u;for(u=0;u<s;u++){n+=u%9;o+="0";}for(u=0;u<y.length;u++){var v=y[u];if(q){v.n=v.n.replace(/,/g,"");v.f=v.f.replace(/,/g,"");}if(z&&z!==p.CurrencyPosition){switch(z){case k.RIGHT:v.n=v.n.replace(/\$/g,"").replace(/\.\d{2}/g,".12$");v.f=v.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case k.LEFT_WITH_SPACE:v.n=v.n.replace(/\$/g,"$ ");v.f=v.f.replace(/\$/g,"$ ");break;case k.RIGHT_WITH_SPACE:v.n=v.n.replace(/\$/g,"").replace(/\.\d{2}/g,".12 $");v.f=v.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}v.n=v.n.replace(/\.\d{2}/g,n);v.f=v.f.replace(/\.\d{2}/g,o);if(w&&w!==p.CurrencySymbol){var t=w.replace(/\$/g,"$$$$");v.n=v.n.replace(/\$/g,t);v.f=v.f.replace(/\$/g,t);}v.cls=v.r?"red":null;}return y;}function T(p){var n="1"+(p>0?".":"").toString(),q="0"+(p>0?".":"").toString(),o;for(o=0;o<p;o++){n+=o%10;q+="0";}return[n+"E+03",q+"E+0#"];}function P(AB,AD){var v="\u00A4",z=/"[^"]*"/g,p=AB.match(z),AE="\u0091",AA=/\[[^\]]*\]/g,n=AB.match(AA),y,AC;y=AB.replace(z,v);y=y.replace(AA,AE);var s=AB.indexOf("."),x=F.getDecimalLength(AB),u=Math.max(0,x+AD),q=AB.match(/\d(?!((\d)|(,\d)))/g),o=s!==-1?AB.charAt(s-1):q&&q[0],w=(o||"0")+(u>0?".":"").toString();for(var t=0;t<u;t++){w+="0";}y=y.replace(x===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,w);y=y.split(v);AC=y[0];Z.forEach(p,function(AG,AF){AC+=AG+y[AF+1];});y=AC.split(AE);AC=y[0];Z.forEach(n,function(AG,AF){AC+=AG+y[AF+1];});return AC;}function N(v,n,u,t,p,o){var s=v.parent.parent.parent,q=f(n,u.decimalPlaces,t,p,o);u.set("format",C(q,u.negativeNumbers.toString()));v.set("items",q);v.set("selectedIndex",Z.find(q,"v",u.negativeNumbers.toString()));s.preview.preview_label.set("text",S(s.myData.format));}function h(){var w=this.parent.parent,AA=w.myData,q=w.formatterContainer,o=Q[w.categoryPicker.selectedIndex].v,AD=this.funcType===X.FunctionLeftStr?1:-1,t=null,v=null,s=false,AC=0,x=null,p=false,z;switch(o){case D.Fixed:t=q.fixed_hBox.negativeDDL;v=l;s=!AA.thousandSeparator;break;case D.Currency:t=q.currency_hBox2.negativeDDL;v=E;AC=AA.currencyPosition;x=AA.currencySymbol;break;case D.Percentage:t=q.percentage_hBox.negativeDDL;v=c;break;case D.Scientific:p=true;break;case D.Custom:z=true;break;default:return ;}if(z){var AB=P(AA.format,AD);w.preview.preview_label.set("text",S(AB));w.formatterContainer.custom_text.set("value",AB);return ;}var u=AA.decimalPlaces,n=u+AD;n=Math.max(0,n);n=Math.min(H.MaxNegativeDidigts,n);AA.set("decimalPlaces",n);if(p){var y=T(n);AA.set("format",y[1]);w.preview.preview_label.set("text",y[0]);}else{N(t,v,AA,s,AC,x);}}function S(y){var p="\u00A4",u=/"[^"]*"/g,o=y.match(u),t=y.replace(u,p),x=["m","y","d","h","s"],w=false,n=new Date(),v=n.getFullYear(),s=n.getMonth(),q=n.getDay(),AA=J.datetime,z;Z.forEach(x,function(AB){w=w||t.indexOf(AB,0)!==-1;});if(w){t=t.replace(/y{3,}/g,v).replace(/y{1,2}/g,v.toString().slice(2,4));t=t.replace(/m{4,}/g,AA.MONTHNAME_FULL[s-1]).replace(/m{3}/g,AA.MONTHNAME_SHORT[s-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");t=t.replace(/d{4,}/g,AA.dayNames[q-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");t=t.replace(/hh/g,"08").replace(/h/g,"8");t=t.replace(/ss/g,"04").replace(/s/g,"4");t=t.split(p);z=t[0];Z.forEach(o,function(AC,AB){z+=AC+t[AB+1];});return z;}return F.formatByMask(y,1234.12);}function m(n,o){return Math.max(Z.find(n,"v",o),0);}function B(p){var o=this.parent.parent.categoryPicker,n=Q.map(function(q){return q.v;}).indexOf(p);o.set("selectedIndex",n);}function j(n,o,q,p){return G(undefined,n,o,undefined,K.copy(p,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:q,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function Y(){if(mstrApp.isSingleTier){var t=this.formatterContainer,s=J.datetime,n={day:7,month:4,year:1998},p={hour:15,min:41,sec:46},q=s&&s.DATEINPUTFORMATS,o=s&&s.TIMEINPUTFORMATS;W=[];R=[];q.forEach(function(u){W.push({v:u,n:M.formatDateInfo(n,u)});});o.forEach(function(u){R.push({v:u,n:M.formatTimeInfo(p,u)});});t.date_ddl.set("items",W);t.time_ddl.set("items",R);}else{W=H.Date;R=H.Time;}}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}Y.call(this);var n=this.formatterContainer;if(this.formatValue){n.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;n.fixed_btn.checked=!!this.formatValue.thousandSeparator;A.addWidgetCssClass(n.fraction_ddl,c[Z.find(c,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function O(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",m(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[K.copy({alias:"categoryPicker",cssClass:"nf-category",onitemSelected:function i(AA){if(!this.hasRendered){return ;}var v=this,y=v.parent,p=y.formatterContainer,n=y.shortcutRow,z=y.preview.preview_label,x=AA.v,s=x===D.Automatic,o=[],u=y.myData;Z.forEach(p.children,function(AB){AB.set("visible",false);});y.border.set("visible",!s);y.preview.set("visible",!s);["border","moveLeftBtn","moveRightBtn"].forEach(function(AB){n[AB].set("visible",!s);});u.set("category",x);u.set("thousandSeparator",x?I.ThousandSeparator:y.formatValue.thousandSeparator);switch(x){case D.Currency:N(p.currency_hBox2.negativeDDL,E,u,false,u.currencyPosition,u.currencySymbol);p.currency_hBox1.currency_position.set("selectedIndex",m(H.CurrencyPosition,u.currencyPosition.toString()));o=["currency_hBox1","currency_hBox2"];break;case D.Date:p.date_ddl.set("selectedIndex",m(W,u.format));o=["date_ddl"];break;case D.Time:p.time_ddl.set("selectedIndex",m(R,u.format));o=["time_ddl"];break;case D.Percentage:N(p.percentage_hBox.negativeDDL,c,u,false,0,null);o=["percentage_hBox"];break;case D.Fraction:p.fraction_ddl.set("selectedIndex",m(H.Fraction,u.format));o=["fraction_ddl"];break;case D.Scientific:var t=T(u.decimalPlaces||0);u.set("format",t[1]);z.set("text",t[0]);break;case D.Custom:var q=u.customText||u.format,w=p.custom_text;u.set("format",q);w.value=q;w.refresh();z.set("text",S(q));o=["custom_condense","custom_text"];break;case D.Fixed:N(p.fixed_hBox.negativeDDL,l,u,!u.thousandSeparator,0,null);o=["fixed_hBox","fixed_btn"];break;}Z.forEach(o,function(AB){p[AB].set("visible",true);});y.adjustAfterCategoryChange();}},V(Q,"category")),{scriptClass:"mstrmojo.Box",cssClass:"nf-MiddleRow nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,moveRightBtn:null,children:[j("nf-shortcut-currency",function e(){B.call(this,D.Currency);},mstrmojo.desc(2051,"Currency"),undefined),j("nf-shortcut-percentage",function e(){B.call(this,D.Percentage);},mstrmojo.desc(2053,"Percentage"),undefined),j("nf-shortcut-fixed",function e(){B.call(this,D.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),undefined),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},j("nf-MoveDecimalPoint left",function e(){h.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{funcType:X.FunctionLeftStr,alias:"moveLeftBtn"}),j("nf-MoveDecimalPoint right",function e(){h.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{funcType:X.FunctionRightStr,alias:"moveRightBtn"})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function U(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:"nf-MiddleRow",label:mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",J.number.THOUSANDSEPARATOR),onclick:function e(){var n=this.parent.parent;n.myData.set("thousandSeparator",this.checked?-1:0);N(this.parent.fixed_hBox.negativeDDL,l,n.myData,!this.checked,0,null);}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:"nf-MiddleRow",visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",items:a,postselectedValueChange:function g(n){var t=this,s=t.parent.parent.parent,q=n.value,o=s.myData;o.set("currencySymbol",q);N(this.parent.parent.currency_hBox2.negativeDDL,E,o,false,parseInt(o.currencyPosition,10),q);}},K.copy({cssClass:"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function i(n){var s=this,q=s.parent.parent.parent,o=n.v;q.myData.set("currencyPosition",parseInt(o,10));N(this.parent.parent.currency_hBox2.negativeDDL,E,q.myData,false,parseInt(o,10),q.myData.currencySymbol);}},V(H.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},K.copy({alias:"date_ddl",cssClass:"nf-MiddleRow"},V(H.Date,"format",true)),K.copy({alias:"time_ddl",cssClass:"nf-MiddleRow"},V(H.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},K.copy({alias:"fraction_ddl",cssClass:"nf-MiddleRow"},V(H.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0');},false,{cssClass:"nf-condense",alias:"custom_condense"}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",cssClass:"nf-custom",onvalueChange:function d(){var q=this,o=q.parent.parent,n=q.value;o.myData.set("format",n);o.myData.set("customText",n);q.parent.parent.preview.preview_label.set("text",S(n).replace(/\s/g,"&nbsp;"));}}]},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:"nf-MiddleRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.hash","mstrmojo.css");var A=mstrmojo.hash.copy;mstrmojo.ui.editors.controls.AdvancedColorPickerPopup=mstrmojo.declare(mstrmojo.ui.editors.controls.AdvancedColorPicker,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPickerPopup",locksHover:true,init:function E(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-AdvColorPickerPopup");},showPickerForCurrentMode:function D(){this._super();var G=this,F=function F(){if(G.visible){G.adjustCornersForPopupOverflow();}};if(this.pickerMode===2){this.colorStyle.markupMethods=A({onselectedIndexChange:F},A(this.colorStyle.markupMethods));}F();},onOpen:function C(){var F=this.parent;this.set("color",F?F.selectedValue:this.color);this.renderContent();this._super();},colorCanceled:function B(){this.close();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var R=mstrmojo.array,U=mstrmojo.css,N=mstrmojo.hash,O=mstrmojo.func,M=mstrmojo.Button.newWebButton,P=mstrmojo.dom,T="mstrmojo-link-validation",Q="mstrmojo-link-vt",F=function F(V){if(V.old){this.removedLinks.push(V);}this.links.removeChildren(V);},S=function S(){var t=this.dsMap,p=this.docModel,Y=p.datasets,v=function v(i,k,a){var j={n:a||"",did:k||null,parent:i||null,lv:(i?i.lv+1:-1),children:[]};if(i){i.children.push(j);}return j;},e=v(),X,W,V,g,Z,q,l,u,s,o,n,m,c,b,d,h,f;N.forEach(Y,function(a){if(p.isMDXDataset(a)){Z=a.tables;for(o=0,b=Z.length;o<b;o++){q=Z[o];X=v(e,q.did,q.n);X.isMDX=true;for(n=0,d=q.dimensions.length;n<d;n++){l=q.dimensions[n];W=v(X,l.did,l.n);for(m=0,h=l.hierarchies.length;m<h;m++){u=l.hierarchies[m];V=v(W,u.did,u.n);for(c=0,f=u.att.length;c<f;c++){s=u.att[c];g=v(V,s.did,s.n);g.att=s;t[q.did+":"+s.did]=g;}}}}}else{X=v(e,a.did,a.name);X.isMDX=false;R.forEach(a.att,function(i){g=v(X,i.did,i.n);g.att=i;t[a.did+":"+i.did]=g;});}});return e;},B=function B(b,c){b=R.ensureArray(b);var a=this,Z=this.attribute.did,d=this.docModel,X=d.findDatasetIdFromUnit(Z),W="\u001F",V={success:function(f){var h=f.als,e=(d.als&&d.als.links)||{},g=a.dsTree;R.forEach(b,function(q,l){var s={},j={},k=[],m={},p=Z+" "+q,n=R.filter(h[l].ats,function(i){return !d.isInDataset(X,i.at,["att"]);}),o=function o(i,t){if(!m[i]){m[i]={};}if(!m[i][t]){m[i][t]=true;}};R.forEach(n,function(u){var i=u.at,t=u.fms;s[i]=true;if(t){R.forEach(t,function(v){o(i,v.fm);});}});N.keyarray(e).forEach(function(i){if(i===p){R.forEach(e[i],function(t){t=t.split(" ");s[t[0]]=true;o(t[0],t[1]);});}});if(N.keyarray(s).length>0){R.forEach(g.children,function(t){var i=function(u){var v;if(!u.att){return ;}u=u.att;if(s[u.did]){if(!j[u.n]){j[u.n]={};}if(!j[u.n][u.did]){j[u.n][u.did]=[];}j[u.n][u.did].push(t.n);v=N.copy(u,v);v.dsId=t.did;k.push(v);}};if(t.isMDX){R.forEach(t.children,function(u){R.forEach(u.children,function(v){R.forEach(v.children,i);});});}else{R.forEach(t.children,i);}});}a.tgtAttrs[q]=k;a.tgtForms[q]=m;a.namesHash[q]=j;});}},Y={taskId:"validateDocumentLinks",msgID:d.mid,action:1,attributeList:Z,attributeFormList:b.join(W)};mstrApp.serverRequest(Y,O.wrapMethods(V,c));},E=function(Y,a,W,Z){Y.richTooltip=null;if(!Y.isSearching){var X=a&&a.scrollWidth>a.clientWidth;W=X?mstrmojo.desc(14648,"## from ###").replace("##",W):"";if(Z){if(!X){W=mstrmojo.desc(14640,"From ###");}W=W.replace("###",Z);}var V=mstrmojo.dom.position(a);Y.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:W,top:V.y-6,left:V.x};}},D=function D(c){var d=this,f=function(m){var k=m.fs,n=m.de,l=[];(k||[]).forEach(function(o){if(o.obf&&(!n||o.idf)){l.push({n:o.fnm,v:o.fid,idf:o.idf});}});return l;},g=f(this.attribute),Z=function(n,l){var k=f(n);var o=(d.tgtForms[l]&&d.tgtForms[l][n.did])||{};var m=[];R.forEach(k,function(p){if(o[p.v]){m.push(p);}});return m;},b=function b(l){var k=[];R.forEach(d.tgtAttrs[l],function(m){if(Z(m,l||d.idFormId).length>0){var o=d.namesHash[l],n=m.n;if(o[m.n]&&N.keyarray(o[m.n]).length>1){n=n+" ("+o[m.n][m.did].join(",")+")";}k.push({n:m.n,v:m,tt:n});}});if(k.length===0){k.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return k;},h=b((c&&c.srcFormId)||this.idFormId),i=function(k,l){return R.find(k.fs,l?"fid":"idf",l||true);},j=function(l){var k=-1;h.forEach(function(n,m){if(n.v.did===l){k=m;}});return k;},W=function(l){var k=h[l];if(!k){return mstrmojo.desc(13397,"Select an attribute");}else{return k.n;}},X=function(l){var m=l.items,k=l.selectedIndex;if(k>=0){if(m[k].idf){return ;}}m.forEach(function(o,n){if(o.idf){l.set("selectedIndex",n);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!c,oldMeta:c,getMeta:function(){var k=this.linkFromForm,m=this.linkToAtt,l=this.linkToForm;return{srcAttrId:d.attribute.did,srcFormId:k.items[k.selectedIndex].v,tgtAttrId:m.items[m.selectedIndex]&&m.items[m.selectedIndex].v.did,tgtFormId:l.items[l.selectedIndex]&&l.items[l.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:d.attribute.n,useRichTooltip:true,updateTooltipConfig:function(o){var n=o.target,k=this.text,l=d.datasetId,m=l?d.docModel.datasets[l].name:"";E(this,n,k,m);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:g,selectedIndex:i(d.attribute,c&&c.srcFormId),onitemSelected:function(l){var k=this,m=function(){var o=k.parent.linkToAtt;h=b(l.v);o.set("items",h);o.set("selectedIndex",-1);o.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(o.selectedNode,"nvo");},n={success:m};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!l.idf){X(this.parent.linkToForm);if(!d.tgtForms[l.v]){B.call(d,l.v,n);return ;}}m();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:h,text:W(j(c&&c.tgtAttrId)),selectedIndex:j(c&&c.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(p){var o=p.target,k=o.getAttribute("tt"),m=this.getSelectedItem(),l=m?m.v.dsId:null,n=l?d.docModel.datasets[l].name:"";if(this.selectedNode===o&&m){k=m.tt;}E(this,o,k,n);},onitemSelected:function(o){if(!o||o.v.did===null){return ;}var n=this.parent.linkToForm,m=this.parent.linkFromForm,l=Z(o.v,m.items[m.selectedIndex].v),p=function p(q,t){var s=R.find(q,t?"v":"idf",t||true);if(s===-1&&q.length>0){s=0;}return s;},k;R.forEach(l,function(q){if(q.idf){k=false;return false;}});if(k){K.call(d,true);}n.set("items",l);n.set("selectedIndex",p(l,!this.hasRendered&&c&&c.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}J.call(d);},onPopupWidgetOpened:function a(){if(this.selectedIndex===-1){this.set("text","");}U.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function e(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(this.selectedNode,"nvo");}else{U.removeClass(this.selectedNode,"nvo");}this.hideTooltip();R.forEach(d.collapseTargets,function(k){k.className="arrow-b";U.removeClass(k.parentNode.parentNode,"collapse");});R.forEach(d.collapseTreeNodes,function(k){delete k.collapse;});R.forEach(this.list.itemsContainerNode.childNodes,function(k){k.style.display="";});},postBuildRendering:function V(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){U.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function Y(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function k(q,s,p){this.parent.set("selectedIndex",p);this.close();}},onclick:function l(y){try{var q=y.getTarget(),z=this.getItemFromTarget(q),v=P.findAncestorByAttr(q,"idx",true,this.domNode);if(z){y.cancel();if(q.className==="arrow-b"||q.className==="arrow-r"){var u=this.items,p=this.itemsContainerNode.childNodes,t=function t(AB){var AA;while(AB){AA=AB.className||"";if(AA.indexOf("lv")===0){return window.parseInt(AA.substring(2),10);}AB=AB.firstChild;}return null;},x=function x(AA,AD){var AC=d.dsMap,AB=AC[AA.dsId+":"+AA.did];while(AB){if(AB.lv===AD){return AB;}AB=AB.parent;}return null;},w=function w(){var AJ=(q.className==="arrow-b"),AD=q.parentNode.parentNode,AA=t(AD),AE=z._renderIdx,AB=x(z.v,AA),AH=u.length,AG,AC,AF,AI,AL,AK;q.className=AJ?"arrow-r":"arrow-b";if(!d.collapseTargets){d.collapseTargets=[];}d.collapseTargets.push(q);U.toggleClass(AD,"collapse",AJ);AB.collapse=AJ;if(!d.collapseTreeNodes){d.collapseTreeNodes=[];}d.collapseTreeNodes.push(AB);for(AG=AE+1;AG<AH;AG++){AC=p[AG];AF=t(AC);if(AF<=AA){break;}AI=x(u[AG].v,AF);AL=AI.parent;AK=true;while(AL){if(AL.collapse){AK=false;break;}AL=AL.parent;}AC.style.display=(AK?"":"none");}};w();}else{if(v&&v.node.className.indexOf("item")!==-1){this.doItemSelect(z,y||{});}}}}catch(s){mstrApp.onerror(s);}},getItemProps:function m(s,p){var q=mstrmojo._IsList.getItemProps.call(this,s,p);var t=s.cls;if(t){q.addCls(t);}return q;},getItemMarkup:function o(AA,z){if(AA.v.did===null){return'<{@tag} class="item {@cls}" did="'+AA.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AB=[],x=AA.v.did,s=AA.v.dsId,t=s?d.docModel.datasets[s]:null,q=t?t.name:"",y=z>0&&this.items[z-1].v,v=d.dsMap,u=v[AA.v.dsId+":"+x],p=v[(y&&(y.dsId+":"+y.did))];AB.push("</div>");while(u){if(u.lv===-1){break;}if(u.att){var w=u.att.da?"derived-attr":"attr";AB.push('<div class="lv'+u.lv+' dim item {@cls}" tt="'+AA.tt+'" did="'+x+'" dsName="'+q+'" idx="{@idx}" style="{@style}"><div><div class="'+w+'"></div></div>{@n}</div>');}else{if(u!==p){AB.push('<div class="lv'+u.lv+' dim" dtt="'+u.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+u.n+"</div>");}else{break;}}u=u.parent;p=(p&&p.parent)||null;}AB.push("<div>");return AB.reverse().join("");},updateTooltipConfig:function n(v){var u=v.target,s=u.getAttribute("tt"),q=u.getAttribute("dtt"),t=u.getAttribute("dsName"),p=s||q;if(p){E(this,u,p,t);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(k){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!k.idf){X(this.parent.linkFromForm);}}}},M("",function(){F.call(d,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},K=function(V){U.toggleClass(this.editorNode,"mstrmojo-advanced",V);},L=function(Y){var W=this,Z=T,V;try{mstrmojo.all[Z].destroy();}catch(X){}V={scriptClass:"mstrmojo.Editor",id:Z,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[M(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[Z].destroy();H.call(W);},true)],children:[{scriptClass:"mstrmojo.Label",text:Y}],visible:true,zIndex:1000};mstrmojo.insert(V).render();},H=function(){var X=this,W=this.illLinks,V=this.links.children,Y=Q;R.forEach(W,function(Z){Z=Z.al;R.forEach(V||[],function(b){var d=b.getMeta(),e=b.linkToAtt,a,c;if(d.srcAttrId===Z.alaid1&&d.tgtAttrId===Z.alaid2){if(!mstrmojo.all[Y]){c=new mstrmojo.Tooltip({id:Y,cssClass:X.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});P.attachEvent(X.editorNode,"click",function(){c.close();U.toggleClass(e.selectedNode,"mstrmojo-Warning",false);});}else{c=mstrmojo.all[Y];}c.close();a=mstrmojo.dom.position(e.selectedNode);c.set("top",a.y-6);c.set("left",a.x);c.set("content",Z.alstmsg);U.toggleClass(e.selectedNode,"mstrmojo-Warning",true);c.open();return false;}});});},A=function(){var V=mstrmojo.all[Q];if(V){V.close();}},J=function J(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},G=function G(){var V=this,W=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){D.call(V);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){K.call(V,true);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){K.call(V,false);A.call(V);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(W);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var Y=this,W=this.docModel,X=function(){var Z=(W.als&&W.als.links)||{},a=[];N.keyarray(Z).forEach(function(b){if(b.indexOf(Y.attribute.did+" ")===0){Z[b].forEach(function(c){a.push({srcAttrId:b.split(" ")[0],srcFormId:b.split(" ")[1],tgtAttrId:c.split(" ")[0],tgtFormId:c.split(" ")[1]});});}});return a;},V;this.set("buttons",[M(mstrmojo.desc(1442,"OK"),function(){var g=[],a=Y.links.children,Z=function(){var h=W.controller,i=W.controller.getRefreshCallback();if(g.length>0){h.cmdMgr.execute({execute:function(){this.submit(g,i);},urInfo:{callback:i}});}Y.close();},f=false,c,d;Y.removedLinks.forEach(function(h){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);});(a||[]).forEach(function(h){if(h.old&&h.oldUpdated){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);}if(!h.old||(h.old&&h.oldUpdated)){d=h.getMeta();if(!d.tgtAttrId){return ;}c=N.copy(d,{act:"applyAttributeLinking",unlink:false});g.push(c);}});R.forEach(g,function(h){if(!h.unlink){f=true;return false;}});if(!f){Z();return ;}var e={taskId:"validateDocumentLinks",msgID:W.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(g)+"}"},b={success:function(h){if(h.als&&h.als.length>0){var i="";R.forEach(h.als,function(j){i+=j.al.alstmsg+"\n";});Y.illLinks=h.als;L.call(Y,i);return ;}Z();}};mstrApp.serverRequest(e,b);},true,{enabled:false}),M(mstrmojo.desc(221,"Cancel"),function(){Y.close();})]);G.call(this);V=X(this.attribute.did);if(V.length>0){V.forEach(function(Z){D.call(Y,Z);});J.call(this);}else{D.call(this);}this._super();},close:function I(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(b){var W=mstrmojo.insert(N.copy(b,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),Z=W.attribute,c=Z.did,V=W.docModel,Y=(V.als&&V.als.links)||{},X=[],a={success:function(){W.set("visible",true);W.render();}};R.forEach(Z.fs,function(d){if(d.idf){W.idFormId=d.fid;return false;}});N.keyarray(Y).forEach(function(e){var d=e.split(" ");if(d[0]===c){X.push(d[1]);}});if(R.indexOf(X,W.idFormId)===-1){X.push(W.idFormId);}W.dsMap={};W.dsTree=S.call(W);B.call(W,X,a);};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.ui.editors.controls.AdvancedColorPickerPopup","mstrmojo.css");var F=mstrmojo.css,E=Math.round;function I(N){var O=this.previewNode,M=O.offsetWidth,P=O.offsetHeight,Q=Math.sqrt(M*M+P*P),L=Math.atan2(P,M)*(-180)/Math.PI;O.style.backgroundColor="#FFFFFF";N.display="block";N.top=E(P/2)+"px";N.left=E((M-Q)/2)+"px";N.width=E(Q)+"px";N[mstrmojo.dom.CSS3_TRANSFORM]="rotate("+E(L)+"deg)";}mstrmojo.ui.editors.controls.ColorPickerButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onselectedValueChange:function(){this.updatePreview();this.colorPicker.set("color",this.selectedValue);},onautoPreviewColorChange:function C(){this.getPopupWidget().set("autoPreviewColor",this.autoPreviewColor);this.updatePreview();},onenabledChange:function G(){F.toggleClass(this.domNode,"disabled",!this.enabled);}},isHostedWithin:false,showGradient:true,showNoFill:true,showAutomatic:false,autoPreviewColor:null,selectedValue:null,init:function K(M){this._super(M);var L=this.colorPicker;L.showGradient=this.showGradient;if(this.showNoFill!==undefined){L.showNoFill=this.showNoFill;L.showAutomatic=this.showAutomatic;}L.showAutomatic=this.showAutomatic;F.addWidgetCssClass(this,"mstrmojo-ColorPickerBtn");},preBuildRendering:function J(){this.colorPicker.showNoFill=this.showNoFill;return this._super();},setDimensions:function H(M,L){this._super(M,L);window.setTimeout(function(){this.updatePreview();}.bind(this),0);},postBuildRendering:function A(){var L=this.noFillNode=document.createElement("div");L.style.display="none";L.className="slash";this.domNode.firstChild.appendChild(L);this._super();},updatePreview:function B(){var P=this.previewNode;if(P){var N=this.selectedValue===mstrmojo.ui.editors.controls.AdvancedColorPicker.VAL_AUTOMATIC?this.autoPreviewColor:this.selectedValue;if(N){var Q=P.style;if(N.c1){var R=F.buildGradient(N.or,N.c1,N.c2);if(R&&R.n){Q[F.convertCssToCamelCase(R.n)]=R.v;}}else{var L=F.buildGradient(0,"0","0");if(L&&L.n){Q[F.convertCssToCamelCase(L.n)]=null;}var O="conflict"===N||("transparent"===N&&!this.showNoFill);F.toggleClass(P,"conflict",O);Q.backgroundColor=!O?N:null;}if(this.showNoFill&&this.noFillNode&&this.enabled){var M=this.noFillNode.style;if("transparent"===N){I.call(this,M);}else{M.display="none";}}}}},getPopupWidget:function D(){return this.colorPicker;},children:[{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPickerPopup",alias:"colorPicker",slot:"widgetHostNode",color:this.selectedValue,isHostedWithin:true,colorChanged:function(L){this.parent.set("selectedValue",L);this.close();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.fe.FilterExprTree","mstrmojo.fe.AndOrNode","mstrmojo.fe.RelationNode","mstrmojo.fe.DynamicNode","mstrmojo.fe.ConditionNode");var K=mstrmojo.expr.ET;mstrmojo.fe.RelationFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RelationFilterExprTree",nodeClassMap:{14:mstrmojo.fe.AndOrNode,15:mstrmojo.fe.RelationNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},getItemIdentityProp:function(L){if(L.ph){return"ph";}if((L.et===10||L.et===12)&&L.dmt===4){return K.RLS;}return L.et;},isEditable:function J(M){var L=false;switch(M&&M.et){case K.RLS:L=true;break;}return L||this._super(M);},getItemConfig:function(O,L,P){var M=this._super(O,L,P),N=(O.et===K.RLS||!!O.relation);if(N){M.itemFunction=P.itemFunction;}return M;},newCondition:function E(M){var L=this.getSelectedItemWidget();if(M&&M.ph&&!M.ph.idx&&microstrategy.bones.rwb_viewer){M.ph.idx=microstrategy.bones.rwb_viewer.nextPhIndex++;}if(L&&L.selected&&L.newCondition){return L.newCondition(M);}else{return this._super(M);}},createSet:function D(M,L){var N=L.rq,O=L.cq;if(N&&O){this.remove(O);if(L.isMetric){mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],N,O);N=O;}else{N.nds=[O];}this.add([N],M[0]);}},removeSet:function G(L){var M=L.data,N=[M];this.remove(M);if(M.nds&&M.nds.length>0){N=M.nds;}else{delete M.dmy;delete M.relation;delete M.applySubExpr;delete M.relation;delete M.useSchema;delete M.dmt;}this.add(N,0);},nameFactory:{counter:1,names:{},clear:function(){this.resetCounter();this.names={};},resetCounter:function C(){this.counter=1;},isNameExist:function I(L){return !!this.names[L];},setName:function H(L,M){this.names[L]=M;},changeName:function B(M,L,N){this.removeName(M);this.setName(L,N);},getNewName:function F(O,N,Q){var P=N||"",M=Q||"",L;while(this.isNameExist(P+this.counter+M)){this.counter++;}L=P+this.counter+++M;this.names[L]=O;return L;},removeName:function A(L){delete this.names[L];this.resetCounter();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.Label","mstrmojo.hash","mstrmojo.array","mstrmojo.ui.Checkbox","mstrmojo.css","mstrmojo.threshold.ThresholdExprTree","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.models.FormatModel.getFormatUpdate","mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL");mstrmojo.requiresDescs(2869,3397,5893,7978,7979,13788,13789,13790,13894,14599,14600,14601,14611);var E=mstrmojo.hash,N=mstrmojo.array,O=mstrmojo.css,I=mstrmojo.models.FormatModel.decodeValue,M=mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL,C=12;function G(R){this.threshold.scope=R;}function J(V,S,R){var T=this.previewNode;switch(V){case 10:var U=N.filterOne(M,function(W){return W.v===S;});if(U){T.innerHTML=U.n;}break;case 4:O.addClass(T,"hasImage");T.innerHTML='<img class="replaceImg" src="'+S+'" />';break;default:T.innerHTML=S||(R===C?mstrmojo.desc(14611,"Sample"):"1234.567");}}function P(S,R){R.fontFamily=S.ff;R.fontSize=parseInt(S.fsz,10)+"pt";R.fontWeight=S.fw?"bold":"normal";R.textDecoration=(S.fun?"underline":"")+" "+(S.fst?"line-through":"");R.fontStyle=S.fit?"italic":"";R.color=S.fc;R.backgroundColor=S.bc;R.textAlign=S.alh;R.verticalAlign=S.alv;R.wordWrap=S.atw;R.direction=S.atd;var T=S.bts;R.border=S.borderStyle||(T?I("bts",T):"1px dotted");R.borderColor=S.borderColor||S.btc||"#e1e1e1";}mstrmojo.threshold.ThresholdRow=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ThresholdRow",markupString:'<div id="{@id}" class="mstrmojo-thresholdRow cf {@cssClass}" style="{@cssText}" mstrAttach:click><div class="draggable-icon"></div><div class="container"></div><div class="previewWrap"><div class="preview"></div></div><div class="menu"></div><div class="delete"></div></div>',markupSlots:{containerNode:function F(){return this.domNode.children[1];},draggableNode:function H(){return this.domNode.firstChild;},previewNode:function F(){return this.domNode.children[2].firstChild;},menuNode:function F(){return this.domNode.children[3];},deleteNode:function L(){return this.domNode.children[4];}},threshold:undefined,idx:undefined,editor:undefined,model:undefined,lblIndex:undefined,chkBox:undefined,exprTree:undefined,postBuildRendering:function A(){this.destroyChildren(false);var R=this.threshold,S=this.model,T=this.previewNode.style,V=E.copy(R.fmt,E.clone(S.getGridValueFormat())),U=R.expr;J.call(this,R.rtp,R.rtxt,S.objectType);if(V){P(V,T);}this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.Label",alias:"lblIndex",text:this.idx+1},{scriptClass:"mstrmojo.threshold.ThresholdExprTree",alias:"exprTree",editor:this.editor,model:this.model,items:[U]}]);S.attachEventListener("selectedThresholdsChange",this.id,"onselectedThresholdsChange");return this._super();},onselectedThresholdsChange:function D(){},onclick:function Q(U){var S=this.editor,W=U.getTarget(),T=this,R=this.model,V=S.objectType===C;if(W===this.deleteNode){this.removeFromModel();}else{if(W===this.menuNode){var X=new mstrmojo.ui.menus.MenuConfig();X.hostId=this.id;X.hostElement=this.menuNode;X.isHostedWithin=false;X.addSubMenuItem(mstrmojo.desc(13788,"Apply to"),"",S.id,function(){var Y=new mstrmojo.ui.menus.MenuConfig();Y.addRadioMenuGroup(T.threshold.scope||1,G,[{value:1,text:V?mstrmojo.desc(14599,"Element Rows Only"):mstrmojo.desc(13789,"Metric Only")},{value:2,text:V?mstrmojo.desc(14600,"Subtotal Rows Only"):mstrmojo.desc(13790,"Subtotals Only")},{value:3,text:V?mstrmojo.desc(14601,"Elements and Subtotals"):mstrmojo.desc(13894,"Metric and Subtotals")}],"",T,true);return Y;});X.addMenuItem(mstrmojo.desc(2869,"Formatting"),"",function(){S.openPropertyPanel(T);});X.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"",function(){R.duplicateThreshold(T.idx);});if(this.idx!==0){X.addMenuItem(mstrmojo.desc(7978,"Move Up"),"",function(){R.moveThreshold(T.idx,T.idx-1);});}else{X.addNonInteractiveMenuItem(mstrmojo.desc(7978,"Move Up"),"",true);}if(this.idx!==R.thresholds[R.metricId].length-1){X.addMenuItem(mstrmojo.desc(7979,"Move Down"),"",function(){R.moveThreshold(T.idx,T.idx+1);});}else{X.addNonInteractiveMenuItem(mstrmojo.desc(7979,"Move Down"),"",true);}X.addMenuItem(mstrmojo.desc(5893,"New Condition"),"",function(){T.exprTree.newCondition(null);});this.openPopup(X.newInstance());}else{if(W===this.previewNode||W===this.previewNode.firstChild){S.openPropertyPanel(this);}}}},removeFromModel:function K(){this.model.deleteThreshold(this.threshold);},onpropertyModelChange:function B(R){E.copy(R.threshold,E.clear(this.threshold));this.refresh();}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash");var Z=mstrmojo.array,M=mstrmojo.hash,K=mstrmojo.ME.MetricToken.brackets,L=mstrmojo.dom,B=mstrmojo.css,Q=mstrmojo.vi.ui.tabs.Tab.ACTIONS,g=Q.DELETE+Q.RENAME,i=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,D=mstrmojo.string,k="This@ID",T="45C11FA478E745FEA08D781CEA190FE5";function G(o){return{n:o,k:o,ftk:[],vs:1,is:""};}function O(u,v,o,s){var q=u.forms[v]||{},t=u.forms[o],p=u.inputBox;if(v!==o){q.vs=u.vStatus;q.is=u.iStatus;q.ftk=p.items;u.set("vStatus",i.UNKNOWN);}u.set("vStatus",t.vs);u.set("iStatus",t.is);u.updateInputBoxItems({items:t.ftk});if(u.curFormIdx!==o){u.curFormIdx=o;u.tabstrip.setSelectedTab(t.k);}u.raiseEvent({name:"tabSwitch",tks:t.ftk,vs:t.vs,is:t.is,oidx:v,nidx:o,toNewTab:s});}function N(p){var o=p.forms[p.curFormIdx];if(o){o.ftk=p.inputBox.items;o.vs=p.vStatus;o.is=p.iStatus;}}var e=0;function W(o){e=Math.max(o.length-1,e);}function V(){e=0;}function l(o){var p="DESC"+(e?" "+e:"");e++;if(Z.find(o,"n",p)>=0){return l(o);}return p;}function I(s){var q={v:K(s.n),oi:s,isNew:true},p,o;if(s.t===12){p=Z.filter(s.fs,function(t){return t.obf||s.da;}).length;if(p===1){o=s.fs[0];q=M.copy({v:K(s.n)+"@"+K(o.fnm),ift:true,exv:o.fid,extp:8},q);}else{q=M.copy({v:K(s.n)+"@",ift:true},q);}}return q;}function E(p,o){p.set("enabled",!o);var q="mstrmojo-InlineWaitIcon";if(p.iconClass){p.set("iconClass",p.iconClass.replace(new RegExp(q),"")+" "+(o?q:""));}else{mstrmojo.css.toggleClass(p.domNode,q,o);}}var U=function(x){var s=x.items,t=s.length,u=s[s.length-1],q,p,w=[],o="",v;if(s[0]&&s[0].tp!==33){w.push({v:"!",tp:33,lv:4,sta:2});}for(q=0;q<t;q++){p=s[q];if(p.isNew&&!p.oi){o+=p.v;}else{if(!D.isEmpty(o)){w.push({v:o,tp:2,lv:1});o="";}if(p.v&&p.v.indexOf(k)>=0){p.v=p.v.replace("["+k+"]",k);p.exv=T;p.extp=8;delete p.oi;}w.push(p);}}if(!D.isEmpty(o)){w.push({v:o,tp:2,lv:1});o="";}if(u&&u.tp!==-1){w.push({v:"",tp:-1,lv:4,sta:2});}return{items:w};},a=function(q){var o=q.items||[],p=o[o.length-1];if(p&&p.tp===-1){o.pop();}if(o[0]&&(o[0].tp===33||o[0].tp===37)){o.splice(0,1);}Z.forEach(o,function(s){if(s.v&&s.v.indexOf(k)>=0){M.copy({extp:8,exv:T,oi:{n:"This",did:"This",t:12}},s);}});},Y=function(o){if(!o){return i.VALID;}return{"-2147214845":i.ERROR,"-2147214846":i.AMBIGUITY}[o]||i.ERROR;},R=function(q){q=U(q);var p={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},o={getArrItemName:function(){return"tkn";},isSerializable:function(s){return(p[s])?true:false;}};return D.json2xml("tknstrm",q,o);},F=function(q,u,t,p){var s=R(u),v=function(w){if(w&&w.tks){var x=w.tks;a(x);x.vs=Y(x.rjec);x.tokenXML=s;if(p){p(x);}}},o=function(w){mstrmojo.alert(w.message||w.getResponseHeader&&w.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:s,localSymbolFolderXML:"",metricXML:"",metricId:q||"",isNew:true,objectType:12,isIDForm:t,msgID:mstrApp.getMsgID()},{success:v,failure:o});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function S(){if(this._super){this._super();}var o=this,p=o.lbl;p.editOnDoubleClick=this.editable;p.onTextEditComplete=function(s,q){if(o.validate(p.text)){o.titleEdited(p.text,q);}};},onclick:function d(o){var p=mstrmojo.dom.eventTarget(o.hWin,o.e);if(p===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(o){var p=!/[\[\]\"\\]/g.test(o);if(!p){this.lbl.set("isEditing",true);}this.set("valid",p);return p;},showErrTooltip:function n(t,q){var o=mstrmojo.dom.position(this.domNode),p=this,s=p.errTooltip;if(!s){p.errTooltip=s=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(s);}s.set("top",o.y+o.h+2);s.set("left",o.x+o.w/2-q);s.set("content",'<div class="content"><span>'+t+"</span></div>");s.open();window.setTimeout(function(){s.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function f(s,t,u){var q=Z.find(t,"k",u.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:u.n,draggable:false,editable:q!==0,cssClass:"mstrmojo-AEB-Tab "+(q===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return g;},tabSelected:function(){O(s,s.curFormIdx,q);},titleEdited:function p(w,v){if(w!==v){if(Z.find(s.forms,"n",w)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}var x=s.forms[q];x.n=w;}},tabDeleted:function o(){var v=s.forms.length,y=(s.curFormIdx===v-1)?0:s.curFormIdx,w=s.forms.slice(0),x=w[q];if(x&&x.did){s.delForms.push({n:x.n,did:x.did});}w.splice(q,1);s.curFormIdx=y;s.set("forms",w);O(s,-1,y);s.set("dirty",true);}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function j(q){var s=this;s.children=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function p(v,w,u){return M.copy(f(s,v,w),u);},addTab:function t(){var w=s.forms,u=w.length,x=l(w),v=w.slice(0);v.push(G(x));s.set("forms",v);O(s,s.curFormIdx,u,true);s.set("dirty",true);},clear:function o(){Z.forEach(this.children,function(u){u.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(1763,"Clear All"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll",onclick:function(){s.inputBox.clearTokens([]);}},{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"tabstripNode",text:mstrmojo.desc(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-validate",onclick:function(){s.validateCurrentForm();}}].concat(this.children);this._super(q);},item2textCss:function J(o){return this._super(o)||{21:"afm"}[o.t]||"";},onformsChange:function X(){var o=this.forms,p=o[this.curFormIdx].k;Z.forEach(o,function(q){a({items:q.ftk});});this.tabstrip.setTabs(o,p);W(o);},selectFormTab:function A(o){O(this,this.curFormIdx,o);},postBuildRendering:function S(){if(this._super){this._super();}this.clear();var o=this;this.inputBox.ondrop=function(x){if(!x.src.data||!x.src.data.item){return ;}var w=o.inputBox,t=w.ctxtBuilder.itemWidgets,u=M.copyProps(["did","n","t","fs"],x.src.data.item),s=I(u),v,p,q;x.src.data=s;mstrmojo.ListBase2.prototype.ondrop.call(this,x);if(o.ontokensModify){o.ontokensModify();}v=this.selectedIndices;if(u.t===12&&s.ift&&!s.exv){for(p in v){q=t[p];if(q){w.startTokenSuggestion(q);}}}w.clearSelect(true);B.removeClass(w.domNode,"unselectable");};},clear:function c(){this.curFormIdx=0;this.delForms=[];this.attrid=null;V();this.set("forms",[G("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",i.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},validateCurrentForm:function C(p){var q=this,s=this.validateBtn,o=function(t){E(s,false);q.set("vStatus",t.vs);q.set("iStatus",t.rjed||"");q.updateInputBoxItems({items:t.items});q.statusNode.style.display="block";q.handleValidation(t);if(p){p(t.items,t.vs===i.VALID);}};q.set("vStatus",i.VALIDATING);E(s,true);F(this.attrid,{items:this.inputBox.items},q.curFormIdx===0,o);},validateAllForms:function m(q){var s=this,p=s.forms,o=0,t=function(w){var v=(o===0);if(w){var u=p[o-1];u.ftk=w.items;u.vs=w.vs;u.is=w.rjed||"";u.tokenXML=R({items:w.items});if(w.vs!==i.VALID){s.selectFormTab(o-1);s.handleValidation(w);if(q){q(null,false);}return ;}}if(o===p.length){if(q){q(p,true);}return ;}F(s.attrid,{items:p[o++].ftk},v,t);};N(s);t();},continueValidataion:function P(){this.validateCurrentForm();},getStatusDesc:function b(o){return{0:mstrmojo.desc(11655,"Valid Formula.")}[o];},onvStatusChange:function h(){this.statusNode.style.display=this.vStatus>=i.VALIDATING?"block":"none";},onObjectInsert:function H(s){var t=this.inputBox,q=I(s),o=t.insertTokens([q]),p;if(s.t===12&&q.ift&&!q.exv){p=t.ctxtBuilder.itemWidgets[o];if(p){t.startTokenSuggestion(p);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=a;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=U;mstrmojo.ME.AttributeEditBox.mapErrorCode=Y;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=R;mstrmojo.ME.AttributeEditBox.validateSyntax=F;mstrmojo.ME.AttributeEditBox.prepareInsertToken=I;}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.css","mstrmojo.registry","mstrmojo.AjaxCall","mstrmojo.hash","mstrmojo.array","mstrmojo.Arr","mstrmojo.expr","mstrmojo.dom","mstrmojo.mstr.EnumDataType","mstrmojo.Label","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.WidgetDial","mstrmojo.Calendar","mstrmojo.DateTextBox","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ValidationTextBox","mstrmojo.ui.CheckList","mstrmojo.ui._HasScroller","mstrmojo.ui.ColumnContainer","mstrmojo.elementHelper");var AR=mstrmojo.css,AK=mstrmojo.registry,M=mstrmojo.hash,c=mstrmojo.mstr.EnumDataType,K=mstrmojo.array,q=K.map,L=mstrmojo.Arr,AN=mstrmojo.expr,b=AN.ET,m=AN.ET2TP,AD=AN.ET2TGT,O=AN.FN,w=AN.FN_MRP,AL=AN.DTP,j=AN.DTP2FN_DTP,AG=mstrmojo.meta.TP,P=mstrmojo.meta.STP,AS=AN.TP,W=AN.STP,U=mstrmojo.elementHelper;var AY={};AY[b.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};AY[b.AL]={target:1,fm:1,fn:1,c0:1};AY[b.AE]={target:1,fm:1,es:1};AY[b.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};AY[b.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};AY[b.MC]=AY[b.MQ];AY["*"]={target:1};var B={};B[b.MQ]={key:"metricFns",def:AN.METRIC_FNS};B[b.MC]={key:"metricFns",def:AN.METRIC_FNS};B[b.AQ]={key:"formFns",def:AN.FORM_FNS};B[b.AL]={key:"formFns",def:AN.FORM_FNS};B[b.AC]={key:"formFns",def:AN.FORM_FNS};B[b.AE]={key:"elemFns",def:AN.ELEM_FNS};var y=mstrmojo.desc(14084,"Select a filter option or a qualification."),x=mstrmojo.desc(14085,"Select one or more elements."),v=mstrmojo.desc(14086,"Select an operator."),u=mstrmojo.desc(14087,"Enter a value or select an attribute from the list."),t=mstrmojo.desc(14088,"Select an attribute form. When done, click ## button.").replace("##",'"√"'),s=mstrmojo.desc(14089,"Select a condition."),p=mstrmojo.desc(14090,"Enter a value or select a metric from the list.");var AJ=0,AW=1;var H=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;function F(Ad){var Ac=true,AZ=Ad.model,Aa,Ab=AZ&&AN.fnCstCount(AZ.fn,AZ.fnt);if(!AZ){return ;}switch(AZ.et){case b.AQ:case b.AL:case b.MQ:for(Aa=0;Aa<Ab;Aa++){Ac=Ac&&!Ad["invalid"+Aa];}break;}Ad.okBtn.set("visible",Ac&&!!AZ.completed);}function J(){var Aa=this.parent,AZ=((Aa&&Aa.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=AZ&&AZ[0];}var Y="dummy",o={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:Y,css:"unselectable"},A={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:Y,css:"unselectable"},AU={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:Y,css:"unselectable"},AH={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:Y,css:"unselectable"},a={did:"idAttribute",v:"idAttribute",n:mstrmojo.desc(518,"Attribute"),t:Y,css:"unselectable"},AC={did:"idMetric",v:"idMetric",n:mstrmojo.desc(517,"Metric"),t:Y,css:"unselectable"};function k(Ab){if(this.updating){return ;}var Ac=this.multiSelect,Af=this.selectedItem,Ae=Ab&&Ab.added,Ag=Ab&&Ab.removed;if(!Ac&&Ae&&Ag&&Ae[0]===Ag[0]){return ;}if(Af&&Af[AG]===Y){this.updating=true;if(Ac){this.removeSelect([this.selectedIndex]);}else{var Aa=Ag&&Number(Ag[0]);Aa=(Aa==null)?-1:Aa;this.set("selectedIndex",Aa);}this.updating=false;}else{var AZ=this.parent.parent.parent.model;if(Ac){var Ad=this.items;AZ.edit(this.alias,{added:Ae&&K.get(Ad,Ae),removed:Ag&&K.get(Ad,Ag),itemIdField:this.itemIdField});}else{AZ.edit(this.alias,Af);}}}mstrmojo.rw.ConditionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.rw.ConditionList",allowUnlistedValues:true,itemIdField:"did",getItemProps:function AP(Ad,AZ){var Ac=!!this.selectedIndices[AZ],Ae=Ad.n,Ab=false;if(Ad.t===12){var Aa=K.filter(Ad.fs,function(Af){return Af.fgr>0;});if(Aa.length>0){Ab=true;}}return M.copy({cls:(Ac?mstrmojo._IsList.SELECTED_CLS:"")+" "+(Ad.css||"")+" "+(Ad.t?("t"+Ad.t+((Ad.da||Ad.um)?"d":"")+(Ab?"g":"")+(Ad.st?(" st"+Ad.st):"")):""),n:Ae||"&nbsp;"},this._super(Ad,AZ));},onselectionChange:function n(AZ){this._super(AZ);k.call(this,AZ);}});function AB(Ab,Ad,Aa){var Ac=Ab.items,AZ=K.indexOf(Ac,Ad);if((AZ===0)&&(Ac.length===1)){Aa=mstrmojo.Arr.makeObservable((Aa&&Aa.length)?Aa.concat():[]);Ab.set("items",Aa);}else{if(AZ>-1){Ac.splice(AZ,1);}if(Aa&&Aa.length){K.insert(Ac,(AZ>-1)?AZ:Ac.length,Aa);}Ab.refresh();}}function N(AZ){return mstrmojo.mixin(AZ,{scriptClass:"mstrmojo.rw.ConditionList",cssClass:"mstrmojo-"+AZ.alias,postCreate:J});}function V(Ab,AZ,Ac){var Aa=Ab.cfg;if(Aa){Aa.data=Ab;Aa.parent=Ac;return AK.ref(Aa);}Aa=new mstrmojo.Label({text:Ab.n||"&nbsp;",cssClass:"dial-item "+(Ab.t?("t"+Ab.t):"")});Aa.markupMethods.onselectedChange=function(){AR.toggleClass(this.domNode,["selected"],this.selected);};Aa.data=Ab;Aa.parent=Ac;return Aa;}function f(Aa,AZ){var Ab=AZ+AN.FN_SEP+Aa;return(Aa!=null)?{did:Ab,n:Ab}:null;}function AV(AZ){return AZ.targets?K.filter(AZ.targets,function(Aa){return Aa[AG]===AN.TP.ATTR;}):[];}function Q(Ab,Aa,Ac,Af){Ab.updating=true;if(Aa){if(Ac!=null){Ab.clearSelect();Ab.set("items",Ac);}var Ae=Ab.itemIdField,Ad=Ab.selectedItem;if((Ad&&Ad[Ae])!=(Af&&Af[Ae])){var AZ=Math.max(K.indexOf(q((Ac||[]),function(Ag){return Ag[Ae];}),Af&&Af[Ae]),0);Ab.set("selectedIndex",AZ);}}Ab.updating=false;}function AO(AZ,Aa,Ac,Ab){AZ.updating=true;AZ.clearSelect();K.forEach(Aa,function(Ad){Ad.title=Ad.title||Ad.n||"";});if(Aa){AZ.set("items",Aa);}if(Ac&&Ac.length){AZ.setSelectedItems(Ac);}else{if(Ab&&Ab.length){AZ.select(Ab);}}AZ.updating=false;}function AF(Aa,AZ,Ab,Ad,Ac){if(AZ){AO(Aa,Ab,Ad,Ac);}}function AE(Ab,Aa){var AZ=Ab.model||{},Ac=AZ.fn;return(Ac!=null)&&((AZ.et===b.MQ)||(AZ.et===b.MC)||(AZ.et===b.AQ)||(AZ.et===b.AL)||(AZ.et===b.AC))&&(AN.fnCstCount(Ac,AZ.fnt)>Aa);}var e={};e[AL.DATE]=1;e[AL.TIME]=1;e[AL.TIMESTAMP]=1;function l(AZ,Ab){var Aa;if(Ab){switch(AD[AZ.et]){case"a":Aa=Ab[b.AC];break;case"m":Aa=Ab[b.MC];break;default:Aa=false;break;}}else{Aa=true;}return Aa&&AN.fn_AC_MC(AZ&&AZ.fn);}function i(Aa){var Ad=Aa&&m[Aa.et],Ac=Aa&&Aa.fm&&Aa.fm.dtp,AZ=Ac&&AN.DTP2PROMPT_STP[Ac],Ab={};Ab[Ad]=true;if(AZ){Ab[AZ]=true;}return Ab;}function d(AZ){switch(AZ){case c.DataTypeInteger:case c.DataTypeUnsigned:case c.DataTypeDecimal:case c.DataTypeReal:case c.DataTypeDouble:case c.DataTypeFloat:return c.DataTypeNumeric;default:return AZ;}}function C(Aa){var Ac=Aa.model,Ah=Ac&&Ac[AD[Ac.et]]&&Ac[AD[Ac.et]][Aa.columnWalk.target.itemIdField],Ab=Ac&&Ac.fm,AZ=Ab&&Ab.dtp,Ae=l(Ac,Aa.ets);if(this.targetsLastMod&&this.targetsLastMod===Aa.targetsLastMod&&Ah&&Ah===this._lastTargetId&&this.lastFmDtp===AZ&&this.lastFnTp===Ae){return ;}if(!Ae){this.clearSelect();this.set("items",this.items.slice(0,this.preLen));}else{var Af=i(Ac),Ai=Ac[AD[Ac.et]],Ad=Ac.a?[a]:Ac.m?[AC]:[],Aj=Ad.concat(AN.getSortedObjectsByTypeGroup(K.filter(Aa.targets,function(Ak){return(Ak.t!==4||Ak.did!==Ai.did)&&(Af[Ak[AG]]||Af[Ak[P]]);}))),Ag=this.items.slice(this.preLen);K.forEach(Ag.reverse(),function(Ak){this.remove(Ak);},this);this.add(Aj,-1);}this._lastTargetId=Ah;this.lastFnTp=Ae;this.lastFmDtp=AZ;this.targetsLastMod=Aa.targetsLastMod;}function AI(As,Aj){As.updating=true;var Af=As.parent.parent.parent,Ar=AE(Af,Aj),Al,An;if(Ar){var Ab=Af.model||{},Ad=Ab.cs,Ap=Ad&&Ad[Aj],Ai=Ap&&Ap.v,Ag;C.call(As,Af);switch(Ab.et){case b.MQ:case b.MC:Ag=(Ap&&Ap.dtp)||d(Ab.m.dt)||AN.METRIC_DTP;break;case b.AQ:case b.AC:case b.AE:Ag=Ab.fm&&Ab.fm.dtp;break;case b.AL:Ag=Ab.fm&&Ab.fm.dtp;Ai=[];for(Al=0,An=Ad&&Ad.length;Al<An;Al++){Ai.push(Ad[Al].v);}Ai=Ai.join(mstrConfig.listSep);break;}Ag=Ag||AL.CHAR;var Ae=Ab.fn,Ak=AN.fn_List(Ae,Ab.fnt),Am=e[Ag],Ao=Am&&!Ak;var Aa=As.ctxtBuilder,AZ=Aa&&Aa.itemWidgets,Aq=Am?(Ao?As.calIndex:As.dtxtIndex):As.txtIndex,Ac;for(Al=0,An=As.preLen;Al<An;Al++){Ac=AZ[Al];if(Al==Aq){Ac.set("dtp",Ag);Ac.set("isList",Ak);Ac.set("value",Ai);Ac.set("visible",true);try{if(As.alias!=="c1"){Ac.focus&&Ac.focus();}}catch(Ah){}if(Ae===1||Ae===2){Ac.constraints.min=0;}if(Ac.clearValidation){Ac.clearValidation();}}else{Ac.set("visible",false);}if(Ak){Ac.set("hint",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"));}else{Ac.set("hint","");}}if(Af.hasPrompt&&As.selectedItem&&As.selectedItem.st===AN.STP.PROMPT_STRING){Af.invalid0=false;}switch(Ab.et){case b.AQ:case b.AL:case b.MQ:if(Ap&&Ap.p){As.set("selectedItem",Ap.p);}else{As.set("selectedIndex",Aq);}break;case b.MC:case b.AC:As.set("selectedItem",Ab[AD[Ab.et]+(2+Aj)]);break;}}As.updating=false;}function h(){var Ac=this.parent,Aa=Ac.parent.parent.parent,Ab=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),AZ=Aa.model;Aa["invalid"+Ac.cstIndex]=!Ab;if(!this.updating&&Ab){this.updating=true;if(AZ){AZ.edit(Ac.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}F(Aa);}function AQ(){var Aa=this.parent,AZ=Aa.parent;AZ["invalid"+Aa.cstIndex]=false;}function AA(AZ){this.tip.set("text",AZ);}function D(Ab){var Ad=this.selectedItem;Ab=K.filter(Ab,function(Ae){return(!Ae.icf);});if(Ad){var Aa=K.find(Ab,this.itemIdField,Ad[this.itemIdField]);if(Aa>-1){Ab=Ab.concat();Ab.splice(Aa,1);}}AB(this,A,Ab);var Ac=this.items,AZ=Ac.length;if(AZ===1){this.singleSelect(0);}this.parent.updateScrollbars();}function I(Aa){var AZ=[{did:660,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP|mstrmojo.validation.TRIGGER.VALUESET},onValid:h,onInvalid:h,onClearValidation:AQ,size:6,visible:false}},{did:154,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:h,visible:false}},{did:23,cfg:{scriptClass:"mstrmojo.DateTextBox",cssText:"margin-left:9px;",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:h,onInvalid:h,onClearValidation:AQ,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(Ab){mstrmojo.dom.stopPropogation(Ab.hWin,Ab.e);}},visible:false}}];return N(M.copy(Aa,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:V,selectionPolicy:"reselect",items:AZ.concat(),txtIndex:0,calIndex:2,dtxtIndex:2,preLen:AZ.length,insertUnlistedValuesAt:-1,itemIdField:"did",update:function(){AI(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},itemsEffect:undefined,onchange:k}));}function G(AZ){return N(M.copy(AZ,{insertUnlistedValuesAt:-1,postCreate:function(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var Ab=this.parent,Aa=this.response;if((Aa&&Aa.did)!==Ab.lastAttrId){return ;}D.call(this.parent,Aa.fms||[]);},onerr:function(){AB(this.parent,A,[o]);}});},update:function(){var Ak=this.fmPost,Ac=this.parent.parent.parent,Ae=Ac.model,Aj=Ae&&Ae["a"+Ak],Ah=!!Aj,Ad,Ag,Al,Ab=Ac.disableElementsBrowsing,Aa=Aj&&Ab&&Ab(Aj);if(Ah){switch(Ae.et){case b.AQ:case b.AL:Ag=Ae.fm;break;case b.AC:Ag=Ae["fm"+Ak];break;case b.AE:Ag=f(Ae.fn,1);break;}if(this.lastAttrId!==Aj.did){this.lastAttrId=Aj.did;Ad=[];if(this.isFirstFm){if(!Aa&&(!Aj.ilk&&(!Ac.ets||Ac.ets[b.AE]))){Ad.push(AU);var Af=B[b.AE],Ai=Af&&Af.key;Ad=Ad.concat((Ai&&Ac[Ai])||Af.def||[]);}Ad.push(AH);}if(Ag&&(Ae.et!==b.AE)){Ad.push(Ag);}Al=this.ajx;Al.params.attributeId=Aj.did;Al.params.otp=Aj.t||12;Ad.push(A);L.makeObservable(Ad);}}if(Aa&&Ae.et===b.AE){Ag=null;}Q(this,Ah,Ad,Ag);if(Ah&&Al){if(Ac.getAttributeForms){D.call(this,Ac.getAttributeForms(Aj.did)||[]);}else{if(Aj.fms){D.call(this,Aj.fms);}else{if(Al){if(Al._delayId){window.clearTimeout(Al._delayId);delete Al._delayId;}Al._delayId=window.setTimeout(function(){delete Al._delayId;Al.send();},500);}}}}}}));}var z=[AN.STP.PROMPT,AN.STP.PROMPT_OBJECTS,AN.STP.PROMPT_ELEMENTS,AN.STP.PROMPT_EXPRESSION,AN.STP.PROMPT_EXPRESSION_DRAFT];function Z(AZ){if(AZ&&!M.isEmpty(AZ)){var Aa=K.hash(z);M.forEach(AZ,function(Ac,Ab){if(Ac){Aa[m[Ab]]=true;}});return Aa;}return null;}mstrmojo.rw.ConditionWalkProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.rw.ConditionWalkProvider",browseEs:function S(Ac,Ab,Ae){Ac.openPopup("eb",{zIndex:Ac.parent.zIndex+10,left:Math.round(Ae.x)+"px",top:Math.round(Ae.y)+"px"});var Aa=Ac.eb.browser,AZ=Ac.model,Ad=AZ&&AZ.a&&AZ.a.did;if(!Ad){return ;}Aa.set("attributeID",Ad);Aa.set("selectedItems",AZ.es?M.clone(AZ.es):[]);Aa.initBrowser();},browseObjs:function AT(Ag,AZ,Aa){Ag.openPopup("ob",{zIndex:Ag.parent.zIndex+10,left:Math.round(Aa.x)+"px",top:Math.round(Aa.y)+"px"});var Ab=Ag.ob.browser;Ab.target=AZ;var Ac;switch(AZ.alias){case"dmy":Ac=[AN.TP.ATTR,AN.TP.DIM];break;case"c0":case"c1":var Ae=Ag.model,Ad=Ae&&Ae.et,Ah=Ae&&Ae.fm,Af=Ah&&Ah.dtp||(Ae.m?AN.DTP.DECIMAL:AN.DTP.UNKNOWN);Ac=(Ad===b.MQ||Ad===b.MC)?[AN.TP.METRIC,AN.DTP2PROMPT_STP[Af]]:[AN.TP.ATTR,AN.DTP2PROMPT_STP[Af]];break;default:Ac=Z(Ag.ets);Ac=Ac?M.keyarray(Ac,true):[AN.TP.ATTR,AN.TP.METRIC,AN.STP.REPORT_GRID,AN.STP.REPORT_GRAPH,AN.STP.REPORT_ENGINE,AN.STP.REPORT_TEXT,AN.STP.REPORT_DATAMART,AN.STP.REPORT_BASE,AN.STP.REPORT_GRIDGRAPH,AN.STP.REPORT_NONINTERACTIVE,AN.STP.FILTER].concat(z);}Ac[Ac.length]=AN.TP.FOLDER;Ab.browse({rootFolderType:Ae&&(Ae.et===b.MQ||Ae.et===b.MC)?5:26,folderLinksContextId:33,onSelectCB:[Ag,"onOBSelect"],browsableTypes:Ac.join(",")});},getFm2NodeProps:function AM(){return{alias:"fm2",children:[G({alias:"fm2",fmPost:2})],updateColumnContainer:function AZ(){var Aa=this.parent.parent;this.fm2.update();AA.call(Aa,t);H.call(this);}};},getC0NodeProps:function E(){var AZ=this;return{alias:"c0",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},I({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},I({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false}],updateColumnContainer:function Aa(){this.c0.update();var Ad=this.parent,Af=Ad.parent,Ag=Ad.parent.model,Ai=Ag&&Ag.fn,Ae=Ai===O.BETWEEN||Ai===O.NOT_BETWEEN||Ai===w.BETWEEN||Ai===w.BETWEEN_DESCENDING,Ac=Ai===O.EQUAL||Ai===O.NOT_EQUAL||Ai===O.GREATER||Ai===O.GREATER_EQUAL||Ai===O.LESS||Ai===O.LESS_EQUAL,Ab=this.idx,Ah=this.next;this.browseLink.set("visible",Af.objectBrowsingEnabled&&l(Ag,Af.ets));this.btwn.set("visible",Ae);this.c1.set("visible",Ae);if(Ae){this.c1.update();}else{Ag.edit("c1",{v:null,dtp:null,skipET:true});}if(Ag.a2&&Ac){if(!(Ah&&Ah.fm2)){Ad.insertAndRemoveTrailing(Ab,AZ.getFm2NodeProps());}}else{Ad.removeTrailingContainer(Ab);}AA.call(Af,Ag.a?u:Ag.m?p:"");H.call(this);}};},getFnNodeProps:function AX(){var AZ=this;return{alias:"fn",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(9579,"Condition")},G({alias:"fn",allowUnlistedValues:false,update:function(){var Ag=this.parent.parent.parent,Ac=Ag.model||{},Ah=Ac.et,Af,Ai=false,Aj,Ab;switch(Ah){case b.AE:Ai=!!Ac.a;break;case b.AQ:case b.AC:case b.AL:Ai=!!(Ac.fm&&Ac.fm.did);Af=Ai?Ac.fm.dtp:null;break;case b.MQ:case b.MC:Ai=!!Ac.m;Af=Ai?AN.METRIC_DTP:null;break;}if(Ai){var Ak=j[Af];if((this.lastEt!==Ah)||(this.lastFnDtp!==Ak)){this.lastEt=Ah;this.lastFnDtp=Ak;var Ae=Ah?B[Ah]:null,Ad=Ae&&Ae.key;Aj=(Ad&&Ag[Ad])||Ae.def||[];if(typeof (Aj)==="object"){Aj=Aj[Ak]||Aj["*"];}}Ab=f(Ac.fn,Ac.fnt||1);}Q(this,Ai,Aj,Ab);this.parent.updateScrollbars();}})],updateColumnContainer:function Aa(){this.fn.update();var Ab=this.parent,Ac=Ab.parent,Ad=Ac.model,Af=Ad&&Ad.fn,Ae=this.next,Ag=Af===O.IS_NULL||Af===O.IS_NOT_NULL;if(Af&&Ag){Ab.removeTrailingContainer(this.idx);}else{if(Af&&!(Ae&&Ae.c0)){Ab.insertAndRemoveTrailing(this.idx,AZ.getC0NodeProps());}}AA.call(Ac,Ad.a?v:Ad.m?s:"");Ae=this.next;if(Ae){Ae.updateColumnContainer();}}};},getEsNodeProps:function T(){var Ab=[{scriptClass:"mstrmojo.ui.CheckList",alias:"es",itemIdField:"v",allowUnlistedValues:true,insertUnlistedValuesAt:0,selectionPolicy:"toggle",postCreate:function Aa(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var Am=this.parent,Ag=this.response;if((Ag&&Ag.did)!==Am.lastAttrId){return ;}var Ai=(Ag&&Ag.es)?K.filter(Ag.es,function(An){return !U.isNullElem(An.v);}):[],Al=Am.parent.parent.parent.model&&Am.parent.parent.parent.model.es,Aj=function(At,Ao){var As=At&&At.length||0,Ar=Ao&&Ao.length||0,An=[],Aq,Ap;for(Aq=0;Aq<Ar;Aq++){for(Ap=0;Ap<As;Ap++){if(Ao[Aq].n===At[Ap].n){break;}}if(Ap===As){An.push(Ao[Aq]);}}return An;},Ak=function(An,Ao,Ar){var Aq=[],Ap;K.forEach(An,function(As){Ap=K.filterOne(Ao,function(At){return As[Ar]&&At[Ar]&&As[Ar]===At[Ar];});if(Ap){Aq.push(Ap);}});return Aq.length===An.length?Aq:An;};Al=Al&&Ak(Al,Ai,"v");if(Am.allowUnlistedValues){var Ah=Aj(Ai,Al);Ai=(Am.insertUnlistedValuesAt===0)?Ah.concat(Ai):Ai.concat(Ah);}AO(Am,Ai,Al,null);Am.parent.updateScrollbars();},onerr:function(){AB(this.parent,A,[o]);}});},onselectionChange:function Ae(Ag){mstrmojo.ListBase.prototype.onselectionChange.call(this,Ag);k.call(this,Ag);},update:function Ad(){var Aj=this.parent.parent.parent,Ai=Aj.model,An=Ai&&Ai.a,Ao=!!An&&!An.ilk,Ap,Ag,Am,Ak,Ah,Aq;if(Ao){if(this.lastAttrId!==An.did){this.lastAttrId=An.did;Ap=Ai.es;Ak=Ap&&Ap.length;Ap=Ak?Ap.concat():[];Ap.push(A);if(Ak){Am=[];for(Ah=1;Ah<=Ak;Ah++){Am[Ah]=Ah;}}Aq=this.ajx;Aj.updateBrowseElementsParams(Aq.params,An);}else{Ag=Ai.es;}}AF(this,Ao,Ap,Ag,Am);if(Ao&&Aq){if(Aj.getElements){var Al=this;Aj.getElements(An,{success:function(Ar){AO(Al,Ar.es||[],Aj.model&&Aj.model.es,null);Al.parent.updateScrollbars();},failure:function(){AB(Al,A,[o]);}});}else{Aq.send();}}},setupScrollNodes:function Ac(){this.scrollNode=null;}}];if(!mstrApp.isSingleTier){Ab.splice(0,0,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7928,"Browse elements..."),onclick:function AZ(){this.parent.parent.parent.browse(this.parent.es);}});}return{alias:"es",children:Ab,updateList:function(Ag){AF(this.es,true,Ag,this.parent.parent.model.es,null);this.updateScrollbars();},updateColumnContainer:function Af(){var Ag=this.parent.parent;this.es.update();AA.call(Ag,x);}};},getFmNodeProps:function g(){var AZ=this;return{alias:"fm",children:[G({alias:"fm",fmPost:"",filter:false,isFirstFm:true})],updateColumnContainer:function Aa(){this.fm.update();var Ak=this.parent,Af=Ak.parent,Ae=Af.model,Ah=Ae&&Ae.fm,Aj=this.idx,Ai=Ae&&Ae.a,Ac=Af.disableElementsBrowsing,Ab=Ai&&Ac&&Ac(Ai);var Ag=(Ae.etWas&&Ae.etWas===b.AE)?AW:AJ,Ad=AJ;if(Ae.et===b.AE&&!Ab){Ad=AW;}if(Ag!==Ad||Ad===AJ){Ak.removeTrailingContainer(Aj);if(Ad===AJ&&Ah){Ak.addNextColumn(AZ.getFnNodeProps());}else{if(Ad===AW){Ak.addNextColumn(AZ.getEsNodeProps());}}}AA.call(Af,y);H.call(this);}};},getTargetNodeProps:function R(){var AZ=this;return{alias:"target",target:null,browseLink:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(11859,"Based On")},N({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},onObjBrowsed:function(Ac){if(Ac.st===W.FILTER||Ac.t===AS.REPORT||Ac.t===AS.PROMPT){this.parent.parent.parent.onOK();}},update:function Ab(){var Ad=this.parent.parent.parent,Ae=Ad.model,Ah=Ad.targetsLastMod,Ai=Ae&&Ae.et;if(this.lastModel!==Ae||this.targetsLastMod!==Ah){this.lastModel=Ae;this.targetsLastMod=Ah;var Ac=Ad.targets,Aj=Ad.ets;if(Aj&&Ac&&Ac.length){var Ag=Z(Ad.ets);Ac=K.filter(Ac,function(Ak){return Ag[Ak[AG]];});}var Af=Ae&&Ae[AD[Ai]];Q(this,true,AN.getSortedObjectsByTypeGroup(Ac),Af);this.parent.updateScrollbars();}}}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.target);}}],updateColumnContainer:function Aa(){this.target.update();var Ad=this.parent,Ae=Ad.parent,Af=Ae.model,Ah=Af&&Af.et,Ac=this.idx,Ag=this.next;this.browseLink.set("visible",Ae.objectBrowsingEnabled);if(Ah){switch(Ah){case b.AQ:case b.AL:case b.AC:case b.AE:if(Af.a&&!(Ag&&Ag.fm)){this.parent.insertAndRemoveTrailing(Ac,AZ.getFmNodeProps());}break;case b.MQ:case b.MC:if(Af.m&&!(Ag&&Ag.fn)){this.parent.insertAndRemoveTrailing(Ac,AZ.getFnNodeProps());}break;case b.R:case b.F:case b.XML:this.parent.removeTrailingContainer(Ac);break;}}Ag=this.next;if(Ag){Ag.updateColumnContainer();}}};}});var X=mstrmojo.rw.ConditionWalkProvider;X.updateOkBtn=F;X.setTip=AA;X.getChildJSON=N;X.updateList=Q;X.fmJson=G;X.cstJson=I;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.hash","mstrmojo.array","mstrmojo.ValidationTextBox","mstrmojo.expr");var K=mstrmojo.emptyFn,B=mstrmojo.hash,H=mstrmojo.array,I=mstrmojo.expr.DTP,F={FILL_COLOR:"Clr",FILL_TRANSPARENT:"FillTrans"},C=1,J=2;function N(T,Q,P,S,R){return{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"fillColor",slot:T,showNoFill:S!==false,showAutomatic:!!R,showGradient:P!==false,selectedValue:"#000000",isHostedWithin:Q||false,postselectedValueChange:function(U){if(this.propName&&this.parent&&this.parent.parent){this.parent.parent.raiseFormatValueChange(this.propName,U.value,U.valueWas);}},postclick:function(U){this.parent.parent.postclick(U);}};}function O(Q){return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillAlpha",slot:Q,col1Width:"100%",col2Width:"10px",children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",slot:"col1Node",value:"100",cssText:"text-align:right",dtp:I.INTEGER,required:true,constraints:{min:0,max:100},onvalueChange:function(R){this.valueWas=R.valueWas;},onValid:function P(){if(this.propName&&this.value!==this.valueWas){this.parent.parent.parent.raiseFormatValueChange(this.propName,this.value,this.valueWas);}},postclick:function(R){this.parent.parent.parent.postclick(R);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:"%"}]};}mstrmojo.ui.editors.controls.FillConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.FillConfigGroup",propNames:undefined,postclick:K,visibleControls:C+J,fillColorAndTrans:undefined,init:function M(T){this._super(T);var Q=[],W="col1Node",R=T&&T.colorPickerHostWithin,P=T&&T.showGradient,V=T&&T.showNoFill,S=T&&T.showAutomaticInColor,U;if((this.visibleControls&C)>0){Q.push(N(W,R,P,V,S));W="col2Node";}if((this.visibleControls&J)>0){Q.push(O(W));}if(Q.length===1){U={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}this.addChildren([B.copy(U,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillColorAndTrans",children:Q})]);},getChildComp:function L(P){if(P.indexOf(F.FILL_COLOR)!==-1){return this.fillColorAndTrans.fillColor;}if(P.indexOf(F.FILL_TRANSPARENT)!==-1){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;},iniChildrenComp:function E(P){this.propNames=P;H.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);},setChildValue:function D(Q,R){var P=this.getChildComp(Q);if(P===undefined){return false;}switch(P.alias){case"fillColor":if(R!==P.selectedValue){P.set("selectedValue",R==="undefined"?"conflict":R);}break;case"fillAlphaText":if(R!==P.value){P.set("value",R==="undefined"?"":R);}break;}},setChildEnable:function G(R,Q){var P=this.getChildComp(R);if(P!==undefined){P.set("enabled",Q);}},setChildrenValue:function A(P){P.forEach(function(Q){this.setChildValue(Q[0],Q[1]);});}});mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS={FILL_COLOR:C,FILL_TRANSPARENCY:J};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.Pulldown","mstrmojo.ui.ButtonBar","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.NumGroupStepperContentProvider","mstrmojo._FormatDefinition","mstrmojo.models.FormatModel");var F=mstrmojo._FormatDefinition,R=mstrmojo.models.FormatModel,J=R.ENUM_PROPERTY_NAMES,I=1,E=2,N=4,C=8,H=16;var P;var K;var G={bold:J.FONT_WEIGHT,italic:J.FONT_STYLE,underline:J.UNDERLINE,strikeout:J.LINE_THROUGH};function B(S){return(S&H)>0;}function Q(T){var W=J.FONT_FAMILY,S=T[W]||R.getFormatBlockValue(T,W),U=this.hcgControls.fontFamily;if(S===-1){var V=U&&U.list;if(!V){return ;}V.clearSelect();delete U.selectedIndex;if(U.hasRendered){U.refresh();}}else{U.set("selectedIndex",Math.max(K.map(function(X){return X.n;}).indexOf(S)));}}function O(S){var T=[],U=function(X,Y,V){var W=S[X];if(W===undefined){W=R.getFormatBlockValue(S,X);}if(W){T.push(V);}};U(J.FONT_WEIGHT,"bold",0);U(J.FONT_STYLE,"italic",1);U(J.UNDERLINE,"underline",2);U(J.LINE_THROUGH,"line-through",3);this.hcgControls.fontStyle.select(T);}function L(S){var Y=this.hcgControls,V=J.FONT_SIZE,T=J.COLOR,X=S[V]||R.getFormatBlockValue(S,V),U=Y.fontSize;var W=S[T];if(typeof W==="undefined"||W===null){W=R.getFormatBlockValue(S,T);}if(typeof W==="undefined"||W===null){W="";}if(B(this.visibleControls)){if(X.length){U.provider.set("curValGroup",X);}}else{if(X===-1){U.list.clearSelect();U.selectedValue="";U.updatePreview();}else{U.set("selectedValue",X?(parseInt(X,10)).toString():U.items[0].n);}}Y.fontColor.set("selectedValue",W===""?"conflict":R.decodeValue(J.COLOR,W));}function M(){if(P&&K){return ;}P=F.SizesInVI.map(function(S){return{idx:parseInt(S.n,10),n:S.n};});K=mstrmojo._FormatDefinition.Families.slice(1).map(function(S){return{n:S.n,id:S.n};});}mstrmojo.ui.editors.controls._HasCharacterGroup=mstrmojo.provide("mstrmojo.ui.editors.controls._HasCharacterGroup",{_mixinName:"mstrmojo.ui.editors.controls._HasCharacterGroup",visibleControls:I+E+N,showNoFillInColor:true,hcgControls:null,getHCGControls:function D(U){M();var T=this.hcgControls={},S=this.visibleControls;if((S&I)>0){T.fontFamily=mstrmojo.ui.Pulldown.newPulldown(K,function(W,X){U(J.FONT_FAMILY,W.id,X&&X.id);},0,{isHostedWithin:false});}if((S&E)>0||(S&C)>0){var V=T.fontStyle=new mstrmojo.ui.ButtonBar({multiSelect:true,items:[{n:mstrmojo.desc(2718,"Bold"),id:"b",css:"bold"},{n:mstrmojo.desc(2719,"Italic"),id:"i",css:"italic"},{n:mstrmojo.desc(2720,"Underline"),id:"u",css:"underline"},{n:mstrmojo.desc(3062,"Strikeout"),id:"s",css:"strikeout"}],postselectionChange:function(W){var Y=W.added,Z=this.items[Y?Y[0]:W.removed[0]],X=!!Y;if(Z){U(G[Z.css],X,!X);}}});if((S&C)>0){V.items.pop();}}if((S&N)>0){T.fontSize=B(S)?new mstrmojo.ui.editors.controls.Stepper({provider:new mstrmojo.NumGroupStepperContentProvider({item:{interval:1},curValGroup:[],min:Math.min.apply(Math,P.map(function(W){return W.idx;})),max:Math.max.apply(Math,P.map(function(W){return W.idx;})),container:this,onTraverse:function(){var W=this.container.fontSize;if(W._sync){return ;}this.container.raiseFormatValueChange(J.FONT_SIZE,W.provider.getValGroup());},oncurValGroupChange:function(){var W=this.container.fontSize;if(W.textNode){W.updateDisplayText();}}})}):new mstrmojo.ui.editors.controls.ComboBox({selectedValue:"10",items:P,isHostedWithin:false,validateTextInput:function(W){return(/^[0-9]+(pt)?$/.test(W));},updateSelection:function(){this.set("selectedValue",parseInt(this.txtLabel.value,10).toString());},postselectedValueChange:function(W){U(J.FONT_SIZE,parseInt(W.value,10)+"pt",parseInt(W.valueWas,10)+"pt");}});T.fontColor=new mstrmojo.ui.editors.controls.ColorPickerButton({showGradient:false,showNoFill:this.showNoFillInColor,selectedValue:"#000000",postselectedValueChange:function(W){U(J.COLOR,W.value,W.valueWas);}});}return T;},setFormatSource:function A(S){var T=this;this.syncControls(function(){var U=this.visibleControls;if((U&I)>0){Q.call(T,S);}if((U&E)>0||(U&C)>0){O.call(T,S);}if((U&N)>0){L.call(T,S);}});}});mstrmojo.ui.editors.controls._HasCharacterGroup.CTRL_FLAGS={FONT_FAMILY:I,FONT_STYLE:E,FONT_SIZE_AND_COLOR:N,FONT_STYLE_NO_STRIKEOUT:C,FONT_SIZE_USE_STEPPER:H};mstrmojo.ui.editors.controls._HasCharacterGroup.ControlsType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton");var L=mstrmojo.emptyFn,I=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.gm.EnumCombinedLineStyle;var J={LINE_COLOR:"Clr",LINE_STYLE:"Style"},A={"1pt solid":E.THIN,"2pt solid":E.THICK,"1pt dashed":E.DASHED,"1pt dotted":E.DOTTED,none:E.NONE};function D(P,O){return C.copy(O,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"lineColor",slot:P,selectedValue:"#000000",postselectedValueChange:function(Q){if(this.propName){this.parent.parent.raiseFormatValueChange(this.propName,Q.value,Q.valueWas);}},postclick:function(Q){this.parent.parent.postclick(Q);}});}function K(P){return{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:true,showNoneOption:true,defaultSelectedIndex:3,propName:undefined,alias:"lineStyle",slot:P,postInit:function O(){var Q=["mstrmojo-ui-LineStyle"];if(!this.showNoneOption){Q.push("no-none");}mstrmojo.css.addWidgetCssClass(this,Q);(this.list.items||[]).forEach(function(R){R.v=(A[R.id]!==undefined?A[R.id]:A["not defined"]);});},onshowNoneOptionChange:function(Q){var R=["no-none"];if(!Q.value){mstrmojo.css.addWidgetCssClass(this,R);}else{mstrmojo.css.removeWidgetCssClass(this,R);}var S=this.hasRendered;if(S){this.refresh();}},postselectedValueChange:function(R){this._super();var Q=I.find(this.list.items,"id",R.value);if(Q===-1){Q=this.defaultSelectedIndex;}var S=this.list.items[Q].v;if(this.propName){this.parent.parent.setChildEnable(J.LINE_COLOR,S!==A.none);this.parent.parent.raiseFormatValueChange(this.propName,S,A[R.valueWas]);}},postclick:function(Q){this.parent.parent.postclick(Q);}};}mstrmojo.ui.editors.controls.LineConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.LineConfigGroup",propNames:undefined,postclick:L,hideColorControl:false,showGradient:false,showNoFillInColor:true,showAutomaticInColor:false,showNoneOption:true,lineColorAndStyle:undefined,lineTitle:undefined,init:function N(Q){this._super(Q);var O=[],R;O.push(K("col1Node"));if(!this.hideColorControl){O.push(D("col2Node",{showGradient:this.showGradient,showNoFill:this.showNoFillInColor,showAutomatic:this.showAutomaticInColor}));}else{R={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}var P=[];if(this.lineTitle&&this.lineTitle!==""){P.push(new mstrmojo.Label({text:this.lineTitle}));}P.push(C.copy(R,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"lineColorAndStyle",children:O}));this.addChildren(P);},getChildComp:function M(O){if(O.indexOf(J.LINE_COLOR)!==-1){return this.lineColorAndStyle.lineColor;}if(O.indexOf(J.LINE_STYLE)!==-1){return this.lineColorAndStyle.lineStyle;}return null;},iniChildrenComp:function G(P){I.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);var O=this.lineColorAndStyle.lineStyle;O.showNoneOption=this.showNoneOption;O.postInit();},onshowNoneOptionChange:function(O){this.lineColorAndStyle.lineStyle.set("showNoneOption",O.value);},setChildValue:function F(Q,R){var O=this.getChildComp(Q);if(O===undefined){return false;}var P;switch(O.alias){case"lineColor":if(R!==O.selectedValue){O.set("selectedValue",typeof R==="undefined"?"conflict":R);}break;case"lineStyle":if(typeof R==="undefined"){O.list.clearSelect();this.syncControls(function(){O.set("selectedValue","conflict");});}else{P=I.find(O.list.items,"v",R);if(P===-1){P=O.defaultSelectedIndex;}var S=O.list.items[P].id;if(S!==O.selectedValue){O.set("selectedValue",S);}}break;}},setChildEnable:function H(Q,P){var O=this.getChildComp(Q);if(O!==undefined){O.set("enabled",P);}},setChildrenValue:function B(O){O.forEach(function(P){this.setChildValue(P[0],P[1]);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.Label","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton","mstrmojo.color","mstrmojo.hash","mstrmojo.models.FormatModel");var N=mstrmojo.color,K="fillColor",C="border",B=1,I=2,D=mstrmojo.models.FormatModel,H=D.ENUM_PROPERTY_NAMES,E=H.BACKGROUND_COLOR,A={all:{c:H.BORDER_COLOR,s:H.BORDER_STYLE},top:{c:H.BORDER_TOP_COLOR,s:H.BORDER_TOP_STYLE},right:{c:H.BORDER_RIGHT_COLOR,s:H.BORDER_RIGHT_STYLE},bottom:{c:H.BORDER_BOTTOM_COLOR,s:H.BORDER_BOTTOM_STYLE},left:{c:H.BORDER_LEFT_COLOR,s:H.BORDER_LEFT_STYLE}};function G(Q,O){O.forEach(function(S,R){S.slot="col"+(R+1)+"Node";});var P=this.secondColumnWidth;return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:Q,col1Width:(100-P)+"%",col2Width:P+"%",children:O};}function J(Q,O,P){return mstrmojo.hash.copy(P,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",showGradient:!!O,postselectedValueChange:function(R){this.parent.parent.raiseFormatValueChange(Q,R.value,R.valueWas);}});}function F(R){var Q="transparent",O="none",P;if(R){P=R.indexOf("#");if(P===-1){P=R.indexOf(Q);}}if(!isNaN(P)&&P>-1){O=R.substr(0,P-1);Q=N.fixFullHexValue(R.substr(P));}else{O=R;}if(O.indexOf("none")>-1){O="none";}return{s:O,c:Q};}mstrmojo.ui.editors.controls.ContainerGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.ContainerGroup",borderTitle:mstrmojo.desc(13631,"Outer border:"),showThickBorderStyle:true,showBackgroundNoFill:true,showBorderNoFill:true,visibleControls:B+I,targetBorder:"all",secondColumnWidth:60,init:function L(R){this._super(R);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditContainer");var Q=[],P=this.visibleControls,O=A[this.targetBorder];if((P&B)>0){Q.push(G.call(this,K,[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7993,"Fill color:")},J(E,true,{showNoFill:this.showBackgroundNoFill})]));}if((P&I)>0){Q.push(new mstrmojo.Label({text:this.borderTitle}));Q.push(G.call(this,C,[{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:this.showThickBorderStyle,postselectedValueChange:function(S){var T=this.parent.parent;T.raiseFormatValueChange(O.s,S.value,S.valueWas);T[C].getControl(2).set("enabled",S.value!=="none");}},J(O.c,false,{showNoFill:this.showBorderNoFill})]));}this.addChildren(Q);},setFormatSource:function M(P){var O=this[K],S=this[C],R=this.targetBorder,Q=A[R];if(R==="all"){Q=A.top;}this.syncControls(function(){if(O){var V=D.getGradientValues(P),Y;if(!V){if(P[H.FILL_STYLE]===1){Y="transparent";}else{var U=P[E];if(typeof U==="undefined"||U===null){U=P["background-color"];}if(typeof U==="undefined"||U===null){U=-1;}Y=D.decodeValue(E,U);}}O.getControl(2).set("selectedValue",V||Y);}if(S){var W=P.border;if(!W){if(typeof (P.borderStyle)!=="undefined"&&P.borderStyle!==null){W=typeof (P.borderStyle)==="string"?P.borderStyle:D.decodeValue("borderStyle",P.borderStyle);}else{W=D.decodeValue(Q.s,P[Q.s]);}if(typeof P.borderColor!=="undefined"&&P.borderColor!==null){W+=" "+D.decodeValue("borderColor",P.borderColor);}else{if(typeof P[Q.c]!=="undefined"&&P[Q.c]!==null){W+=" "+D.decodeValue(Q.c,P[Q.c]);}else{W+=" "+D.decodeValue(Q.c,-1);}}}var X=F(W),T=S.getControl(2);S.getControl(1).set("selectedValue",X.s);T.set("enabled",X.s!=="none");T.set("selectedValue",X.c);}});}});mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS={FILL_COLOR:B,BORDER:I};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasMarkup","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.dom","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.css");var E=mstrmojo.css,F=mstrmojo.dom;mstrmojo.threshold.ColorBand=mstrmojo.declare(mstrmojo.ui.editors.controls.ColorPickerButton,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ColorBand",hovered:false,selected:false,index:undefined,showGradient:false,showNoFill:false,markupString:'<div class = "color-band mstrmojo-ui-PreviewButton {@cssClass}" id="{@id}" style="{@cssText}" mstrAttach:click,keyup,contextmenu,mouseover,mouseout><div class="host mstrmojo-ui-PreviewButton"></div></div>',markupSlots:{previewNode:function(){return this.domNode;},btnNode:function(){return this.domNode;},clickableNode:function(){return this.domNode;},widgetHostNode:function(){return this.domNode.lastChild;}},select:function(){this.set("selected",true);},unselect:function(){this.set("selected",false);},onhoveredChange:function C(I){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onBandHovered(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onBandUnhovered(this.index);}},onselectedChange:function B(I){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onBandSelected(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onBandUnselected(this.index);}this.parent.onBandUnhovered(this.index);},onmouseover:function H(){this.set("hovered",true);},onmouseout:function D(){this.set("hovered",false);},oncontextmenu:function G(I){F.preventDefault(window,I.e);var K=this,J=K.parent.parent;var L=new mstrmojo.ui.menus.MenuConfig({position:F.getMousePosition(I.e,I.hWin),isHostedWithin:false});L.addMenuItem(mstrmojo.desc(7604,"Change Color"),"",function(){K.onclick(I);});L.addMenuItem(mstrmojo.desc(13386,"Add Color Band"),"",function(){var N=J.markers;var O=F.position(N.containerNode),M=I.e.clientX-O.x;N.addMarker(M);});L.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){K.unselect();J.bands.remove(K.index);J.update();});this.openPopup(L.newInstance());},postselectedValueChange:function(J){var K=this.parent.parent,I=K.parent,M=K.getPalette().concat();if(J){var L=J.value;if(K.getReversedValue()){M.reverse();}this.backgroundColor=M[this.index]=L;I.switchToCustomScheme(undefined,M);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.threshold.ColorBand,{onwidthChange:mstrmojo.Widget.widthMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onbackgroundColorChange:function A(){this.selectedValue=this.backgroundColor;this.updatePreview();this.colorPicker.set("color",this.selectedValue);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","Widget","num","css","Container","Box","Label","EditableLabel","Image");mstrmojo.requiresClsP("mstrmojo.threshold","ColorBand","ImageBand","MarkersNode","ColorMarker","ThresholdModel");var E=mstrmojo.dom,c=mstrmojo.num,g=mstrmojo.css,C=["bands","markers"];var Z=0,D=1;var d=mstrmojo.threshold.ThresholdModel.SLIDER_MODE;function F(h){var i;if(h===C[Z]){i=this.sliderMode===d.IMAGE_BASED?new mstrmojo.threshold.ImageBand():new mstrmojo.threshold.ColorBand();}else{i=new mstrmojo.threshold.ColorMarker();}this[h].addChildren([i]);}function J(v){var u=this[C[v]],k=u.children,l=k?k.length:0,t=this.getComp(),m=this.getPalette(),p=this.width,q=v?t.length-1:t.length,w=this.sliderMode===d.IMAGE_BASED,s,j,h;if(l>q){for(s=l-q-1;s>=0;s--){u.removeChildren(k[s]);}}else{if(q>l){for(s=0;s<q-l;s++){F.call(this,C[v]);}}}if(v===0&&this.getReversedValue()){m=m.concat().reverse();}k=u.children;var o,n;for(s=0;s<q;s++){j=k[s];o=parseInt(s===0?0:p*t[s-1],10);n=parseInt(p*t[s],10);if(v===0){j.set("left",(this.containerNode.offsetLeft+o+1)+"px");h=n-o;g.toggleClass(j.domNode,"no-border",!h);j.set("width",h+"px");if(w){j.set("src",m[s]);j.domNode.firstChild.style.left=j.domNode.clientWidth/2-12+"px";}else{j.set("backgroundColor",m[s]);}}else{j.set("left",n-(w?0:1)+"px");}j.set("index",s);}}function A(i,h,j){h.forEach(function(l){var k=i[l.id]={palette:[],comp:[],reversed:false};l.bands.forEach(function(m){k.palette.push(m[j?"url":"bc"]);k.comp.push(m.end/100);});});}function H(){var h=this.parent.model,i={};A(i,h.getDefaultColors(),false);A(i,h.getDefaultImages(),true);return i;}mstrmojo.threshold.TextBubble=mstrmojo.declare(mstrmojo.EditableLabel,null,{scriptClass:"mstrmojo.EditableLabel",visible:false,cssClass:"editable-bubble",text:"",isPercentage:true,maxValue:1,showBubble:function(h){this.updatePosition(h);this.updateText(h);this.set("visible",true);},hideBubble:function(){this.set("visible",false);},updatePosition:function B(h){this.domNode.style.left=this.parent.width*h+"px";},updateText:function(k){var j=this.parent,h=j.parent.model,i=h.getRealValue(k,j.selectedOption);if(j.selectedOption===7){i=c.formatByMask(h.getFormatString(),i);}if(this.isPercentage){i+="%";}this.set("text",String(i));}});mstrmojo.threshold.ColorSlider=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.threshold.ColorSlider",markupString:'<div class = "mstrmojo-color-slider {@cssClass}"  style="{@cssText}" mstrAttach:click,keyup><div class="labels"></div><input type="text" class="hidden-field"></div>',markupSlots:{containerNode:function a(){return this.domNode;},labelsNode:function f(){return this.domNode.firstChild;},hiddenField:function I(){return this.domNode.lastChild;}},sliderMode:d.COLOR_BASED,baseColor:undefined,editableBubble:undefined,hoverBubble:undefined,bands:undefined,markers:undefined,colorMap:undefined,selectedOption:undefined,getComp:function Q(){return this.colorMap[this.baseColor].comp;},getPalette:function S(){return this.colorMap[this.baseColor].palette;},getReversedValue:function b(){var h=this.colorMap;return h&&h[this.baseColor].reversed||false;},postBuildRendering:function e(){this.width=E.position(this.containerNode).w;this.resetColorMap();if(this._super){this._super();}this.update();},resetColorMap:function R(){this.colorMap=H.call(this);},onkeyup:function(k){var i=window.event||k.e,l=i.keyCode;if(this.sliderMode===d.COLOR_BASED&&(l===mstrmojo.Enum_Keys.DELETE||l===mstrmojo.Enum_Keys.BACKSPACE)){if(this.editableBubble.isEditing){return ;}var j,h;if(this.bands.isSelected){j=this.bands;}else{if(this.markers.isSelected){j=this.markers;}else{return ;}}h=j.selectedIndex;j.children[h].unselect();j.remove(h);this.update();}},update:function M(){if(this.baseColor){J.call(this,Z);J.call(this,D);}},onsliderModeChange:function U(){g.toggleClass(this.domNode,"image-mode",this.sliderMode===d.IMAGE_BASED);this.unselectAll();this.bands.removeChildren();},onbaseColorChange:function P(){this.unselectAll();this.update();},onselectedOptionChange:function O(h){var i=this.parent.model,j=this.editableBubble,k=j.text;this.updateLabels(h.value);if(j.visible){if(h.valueWas===1||h.valueWas===2){k=k.slice(0,k.length-1);}j.updateText(i.getNormalizedValue(k,h.valueWas));}},updateLabels:function Y(i){var l=this.parent.model,m=this.editableBubble,k=this.hoverBubble,n,j;i=i||this.selectedOption;if(i===1||i===2){n="0%";j="100%";m.set("isPercentage",true);k.set("isPercentage",true);}else{if(i===4||i===5){n="0";j=l.getMetricsCount();m.set("isPercentage",false);k.set("isPercentage",false);}else{var h=l.getFormatString();n=c.formatByMask(h,l.getMetricsMinValue());j=c.formatByMask(h,l.getMetricsMaxValue());m.set("isPercentage",false);k.set("isPercentage",false);}}this.startLabel.set("text",n);this.endLabel.set("text",j);},setColorComp:function L(i,h){var j=this.colorMap;if(j){j[i].comp=h;this.unselectAll();this.update();}},addCustomScheme:function(i,h){this.colorMap.custom={comp:i,palette:h,reversed:false};this.set("baseColor","custom");},addMarkerToMap:function W(j){var k=this.getComp(),h=k.length,l;if(k[0]>j){l=0;}else{for(l=1;l<h;l++){if(k[l-1]<=j&&k[l]>=j){break;}}}k.splice(l,0,j);this.unselectAll();return l;},unselectAll:function X(){var i=this.bands;if(i.isSelected){i.children[i.selectedIndex].unselect();}var j=this.markers,h=j.selectedIndex;if(j.isSelected&&j.children[h]){j.children[h].unselect();}},reverseMapColor:function T(){if(this.colorMap&&this.baseColor){var h=this.colorMap[this.baseColor];h.reversed=!h.reversed;this.unselectAll();this.update();}},children:[{scriptClass:"mstrmojo.Label",cssClass:"start-label",alias:"startLabel",slot:"labelsNode",text:"0%"},{scriptClass:"mstrmojo.Label",cssClass:"end-label",alias:"endLabel",slot:"labelsNode",text:"100%"},{scriptClass:"mstrmojo.threshold.TextBubble",alias:"editableBubble",slot:"labelsNode",allowEmptyText:true,onTextEditComplete:function(l,s){if(l){var q=this.text;if(this.isPercentage){q=q.replace(/%$/,"");}var n=s.charAt(0);if(n.match(/\W/)!==null){q=q.replace(new RegExp("^\\"+n),"");}q=c.parseNumeric(q);if(isNaN(q)){this.set("text",s);return ;}var h=this.parent,m=h.parent.model,p=m.getNormalizedValue(q,h.selectedOption),o=h.getComp();this.updatePosition(p);var j=h.markers.selectedIndex;o.splice(j,1);var k=h.addMarkerToMap(p);h.markers.children[k].select();h.update();}}},{scriptClass:"mstrmojo.threshold.TextBubble",alias:"hoverBubble",slot:"labelsNode",allowEmptyText:false},{scriptClass:"mstrmojo.Box",cssClass:"color-bands",alias:"bands",isSelected:false,selectedIndex:0,remove:function G(k){if(this.children.length===1){return ;}var l=this.parent;var j=l.getComp(),h=l.getPalette();if(k===this.children.length-1){j.splice(k-1,1);}else{j.splice(k,1);}h.splice(k,1);},onBandHovered:function(h){this.isSelected=true;},onBandUnhovered:function(h){this.isSelected=false;},onBandSelected:function(h){var j,l=this.children,k=this.parent,m=k.markers;for(j=0;j<l.length;j++){if(j!==h&&l[j].selected){l[j].unselect();}}if(m.isSelected===true){m.children[m.selectedIndex].unselect();}k.hiddenField.focus();this.isSelected=true;this.selectedIndex=h;},onBandUnselected:function(h){var j,k=this.children;for(j=0;j<k.length;j++){if(j!==h&&k[j].selected){return ;}}this.isSelected=false;}},{scriptClass:"mstrmojo.threshold.MarkersNode",alias:"markers",isSelected:false,selectedIndex:0,onMarkerSelected:function V(j){var h=this.parent;h.editableBubble.showBubble(h.getComp()[j]);var k,n=this.children;for(k=0;k<n.length;k++){if(k!==j&&n[k].selected){n[k].unselect();}}var l=h.bands;if(l.isSelected===true){l.children[l.selectedIndex].unselect();}this.parent.hiddenField.focus();this.isSelected=true;this.selectedIndex=j;},onMarkerUnselected:function(h){var j,k=this.children;for(j=0;j<k.length;j++){if(j!==h&&k[j].selected){return ;}}this.parent.editableBubble.hideBubble();this.isSelected=false;},onMarkerHovered:function K(i){var h=this.parent;h.hoverBubble.showBubble(h.getComp()[i]);this.isSelected=true;},onMarkerUnhovered:function N(h){this.parent.hoverBubble.hideBubble();this.isSelected=false;}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.css");mstrmojo.ui.editors.controls.CharacterGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,[mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",init:function A(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var H=this,C=this.getHCGControls(function(K,L,J){if(!H._sync){H.raiseFormatValueChange(K,L,J);}}),D=[];Object.keys(C).forEach(function(J){this[J]=C[J];}.bind(this));var B=this.fontFamily,I=this.fontStyle,G=this.fontSize,F=this.fontColor;if(B){D.push(B);}if(I){D.push(I);}if(G){G.slot="col1Node";F.slot="col2Node";D.push({scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",children:[G,F]});}if(D.length){this.addChildren(D);}}});mstrmojo.ui.editors.controls.CharacterGroup.CTRL_FLAGS=mstrmojo.ui.editors.controls._HasCharacterGroup.CTRL_FLAGS;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.ToolbarPopup","mstrmojo.ui.editors._HostsControls","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.models.FormatModel","mstrmojo.css");var B=mstrmojo.models.FormatModel;mstrmojo.ui.editors.CharacterToolbarPopup=mstrmojo.declare(mstrmojo.ui.editors.ToolbarPopup,[mstrmojo.ui.editors._HostsControls,mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.CharacterToolbarPopup",textAlignJustify:true,textAlignValueMap:null,textAlignFmtName:mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES.TEXT_ALIGN,btnTextAlign:null,init:function D(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var K=this.textAlignJustify,H=this,F=function(P,Q,O){H.raiseFormatValueChange(P,Q,O);},L=this.getHCGControls(F),J=L.fontFamily,N=L.fontSize,G=L.fontColor,M={alias:"btnTextAlign",includeJustify:K,onValueChange:function(P,O){F(H.textAlignFmtName,P,O);}};J.width="125px";N.width="50px";G.width="50px";this.width=K?"485px":"456px";var E=this.textAlignValueMap;if(E){M.itemsValueMap=E;}this.addChildren([J,L.fontStyle,N,G,new mstrmojo.vi.ui.TextAlignButtonBar(M)]);},shouldPropagateLockHover:function C(){return false;},setFormatSource:function A(E){this._super(E);this.syncControls(function(){if(this.textAlignFmtName in E){this.btnTextAlign.singleSelectByField(E[this.textAlignFmtName],"v");}else{this.btnTextAlign.singleSelectByField(B.getFormatBlockValue(E,B.ENUM_PROPERTY_NAMES.TEXT_ALIGN),"id");}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo.ui.ColumnWalk","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ConditionModel","mstrmojo.rw.ConditionWalkProvider");var Q=mstrmojo.Widget,I=mstrmojo.array,F=mstrmojo.dom,N=mstrmojo.hash,A=mstrmojo.mstr.EnumNodeDimty,T=mstrmojo.rw.ConditionWalkProvider.updateOkBtn,J=mstrmojo.rw.ConditionWalkProvider.setTip;var C=mstrmojo.desc(11899,"Select a dataset object.");var L=I.hash([A.NodeDimtyOutputLevel]);function E(){var U=this.model;if(U){if(!U.attachEventListener){mstrmojo.hash.make(U,mstrmojo.ConditionModel,{});}U.attachEventListener("edit",this.id,"onmodeledit");}}function M(V,U){if(U&&U.detachEventListener){U.detachEventListener("edit",V.id,"onmodeledit");}}function O(Z,U){var X=U,Y=[],W=[],V=[],a=false;N.forEach(X,function(b){Y=Y.concat(b.att.filter(function(c){return c.did===Z;}));});a=Y[0]&&Y[0].da;Y.forEach(function(b){W=W.concat(b.fs||[]);});W.forEach(function(b){if((b.obf||a)&&V.filter(function(c){return c.did===b.fid;}).length===0){V.push({did:b.fid,dtp:mstrmojo.expr.mapBaseFormTypeToDataType(b.bftp),n:b.fnm,t:b.t});}});return V;}function D(Z,U){var V,X=U||microstrategy.bones.rwb_viewer.datasetInfos,Y,W=false;N.forEach(X,function(a){V=a.mx;N.forEach(V,function(b){if(b.did===Z){Y=a;W=b.um||b.rdm;return false;}});return !Y;});return W&&Y&&Y.isMDX;}mstrmojo.rw.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasPopup],{scriptClass:"mstrmojo.rw.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},walkNode:function(){return this.domNode.children[1];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function K(){Q.visibleMarkupMethod.call(this);if(this.visible){this.initWalk();}},onheightChange:Q.heightMarkupMethod,onwidthChange:Q.widthMarkupMethod},layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",applyNode:"auto"},xt:true},editor:undefined,columnWalk:undefined,tip:undefined,walkProvider:null,objectBrowsingEnabled:true,postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=mstrmojo.insert(mstrmojo.rw.ConditionWalkProvider);}},initWalk:function P(){var U=this.columnWalk,V=this.walkProvider;J.call(this,C);U.removeTrailingContainer(-1);U.addNextColumn(V.getTargetNodeProps());U.target.updateColumnContainer();T(this);},updateBrowseElementsParams:function(X,W){X.attributeID=W.did;X.otp=W.t||12;var V=this.editor,U=V&&V.onUpdateBrowseElementsParams;if(U){U.call(V,X,W);}},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"750px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var U=this.parent;if(U.close){U.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var U=this.parent;if(U.onOK){U.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:C,ignoreLayout:true}],eb:{scriptClass:"mstrmojo.Editor",cssClass:F.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(V){var U=this.parent.opener;U.updateBrowseElementsParams(V,U.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-WebButton hot",cssText:"width: 66px;",onclick:function(){var U=this.parent.parent,V=U&&U.opener;if(V){V.onEBSelect();V.closePopup();}}},{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-WebButton",cssText:"min-width: 66px; margin-left: 11px;",onclick:function(){var U=this.parent.parent,V=U&&U.opener;if(V){V.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,upButtonVisible:true,scrollableIncFetch:true,showCompletePath:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true,minSearchLength:1}]},_set_model:function S(X,U){var V=this.model,W=(U!==V);if(W){M.call(this,V);U.dimtyTypes=this.dimtyTypes||L;this.model=U;E.call(this,U);if(this.hasRendered&&this.visible){this.columnWalk.target.updateColumnContainer();}}return W;},onmodeledit:function H(U){this.columnWalk[U.prop==="c1"?"c0":U.prop].updateColumnContainer();T(this);},browse:function G(W){var Y=this.parent.editorNode,X=function(a,c){var Z=mstrmojo.dom.position(a,true),b=mstrmojo.dom.position(c,true);return{x:Z.x+Z.w,y:b.y};},U=this.columnWalk,V=this.walkProvider;switch(W&&W.alias){case"target":case"dmy":V.browseObjs(this,W,X(W.alias==="target"?U.target.domNode:this.dmyNode,Y));break;case"c0":case"c1":V.browseObjs(this,W,X(U.c0.domNode,Y));break;case"es":V.browseEs(this,W,X(U.es.domNode,Y));break;}},onOBSelect:function(Y){var W=this.ob.browser,a=W.target;this.closePopup();var V=this.targets,Z=a.itemIdField,X=V||[],U=I.find(V,Z,Y[Z]);if(U===-1){X.push(Y);this.targets=X;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}a.setSelectedItems([Y],a.multiSelect);if(a.onObjBrowsed){a.onObjBrowsed(Y);}},onEBSelect:function(){var V=this.eb.browser,X=this.columnWalk.es.es;X.set("selectedIndices",{});var U=X.items,W=[];I.forEach(V.selectedItems||[],function(Z){if(I.find(X.items,"v",Z.v)<0){W.push(Z);}});var Y=X.insertUnlistedValuesAt||0;if(Y<0){Y=U.length;}X.set("items",U.slice(0,Y).concat(W).concat(U.slice(Y)));X.setSelectedItems(V.selectedItems,false);},destroy:function R(V){var U=this.walkProvider;if(U&&U.destroy){this.walkProvider.destroy();}this._super(V);}});mstrmojo.rw.ConditionWalk.getAttForms=O;mstrmojo.rw.ConditionWalk.isMdxDM=D;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.rw.ConditionWalk","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.expr","mstrmojo.css");var F=mstrmojo.expr.ET.MQ,H=mstrmojo.expr.ET.MC,C=mstrmojo.css,B=mstrmojo.desc(14387,"Evaluate this condition independent of other dataset level conditions");var G=function(L,N){var K=L.et,I=L.m&&mstrmojo.rw.ConditionWalk.isMdxDM(L.m.did),M=((K===F||K===H)&&!this.inRelation&&!I)?"block":"none",J=(((N===1)||K!==F)&&!I)?1:0;C.toggleClass(this.toolNode,"unselectable",K===H);this.toolNode.style.display=M;this.level.set("selectedIndex",J);this.includeExist.set("visible",J===1&&(K===H||K===F));this.includeExist.set("checked",L.idcsi===undefined?false:L.idcsi);};mstrmojo.fe.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,null,{scriptClass:"mstrmojo.fe.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="tools"></div><div class="apply"></div></div>',markupSlots:mstrmojo.hash.copy({toolNode:function(){return this.domNode.childNodes[2];}},mstrmojo.hash.copy(mstrmojo.rw.ConditionWalk.prototype.markupSlots)),layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",toolNode:"auto",applyNode:"auto"},xt:true},postCreate:function E(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Label",slot:"toolNode",text:mstrmojo.desc(13517,"Calculate on")},{scriptClass:"mstrmojo.ui.Pulldown",slot:"toolNode",alias:"level",isHostedWithin:false,items:[{n:mstrmojo.desc(13518,"Template level"),v:0},{n:mstrmojo.desc(13519,"Dataset level"),v:1}],onitemSelected:function I(J){var K=this.parent;if(K&&K.condition&&K.visible){K.includeExist.set("visible",J.v===1);K.condition.level=J.v;}}},{scriptClass:"mstrmojo.ui.Checkbox",alias:"includeExist",slot:"toolNode",postBuildRendering:function(){this.domNode.innerHTML=B;},oncheckedChange:function(){var J=this.parent;if(J){J.model.set("idcsi",this.checked);}}}]);if(this._super){this._super();}},onvisibleChange:function A(I){var J=this.condition;if(J&&this.toolNode&&this.visible){G.call(this,J.data,J.tree.level);}if(this._super){this._super(I);}},onmodeledit:function D(I){if(this._super){this._super(I);}if(this.toolNode){G.call(this,this.model.get(),this.model.level);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.rw.ConditionWalk","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.mstr.EnumNodeDimty","mstrmojo.mstr.DocElementDataHelper","mstrmojo.ui._IsIncFetchList");var E=mstrmojo.array,G=mstrmojo.css,C=mstrmojo.mstr.EnumNodeDimty,K=E.hash([C.NodeDimtyUnspecified,C.NodeDimtyNone]);function H(){var L=this.thresholdRow,M=this.editor;if(L){this.removeChildren(L);}G.toggleClass(M.content.domNode,"no-overflow",false);this.set("visible",false);M.setRowPanelVisibility(true);}mstrmojo.threshold.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,[mstrmojo.ui._IsIncFetchList],{objectBrowsingEnabled:false,dimtyTypes:K,targets:null,targetsLastMod:null,ets:null,condition:null,onOK:function B(){var L=this.editor;L.model.setConditionData(this.condition,this.model.get());H.call(this);L.toggleButtonStatus(true);},close:function I(){var O=this.editor;var Q=this.condition,M=Q.tree.parent,L=M.exprTree;if(Q.isEmpty()){Q.del();}var N=L&&L.items,P=N&&N.length;if(!P||P===0){O.model.deleteThreshold(M.threshold);}H.call(this);O.toggleButtonStatus(true);},browse:function F(L){this._super(L);if(L.alias==="es"){G.toggleClass(this.eb.domNode,"adv-threshold",true);}},getAttributeForms:function J(L){return mstrmojo.rw.ConditionWalk.getAttForms(L,this.editor.controller.datasets);},getElements:function D(N,P){var O={},L=P.complete,M=this;this.scrollNode=this.columnWalk.es.scrollNode;if(!this.ifDataHelper){this.ifDataHelper=new mstrmojo.mstr.DocElementDataHelper({source:this.editor.controller.dataService});}else{this.ifDataHelper.set("items",null);}this.columnWalk.es.es.allowUnlistedValues=false;this.updateBrowseElementsParams(O,N);this.ifDataHelper.browseConfig=O;P=mstrmojo.func.wrapMethods(P,{complete:function(Q){M.initScroll();}});this.ifDataHelper.getItems(1,P);},postNext:function A(){this.columnWalk.es.updateList(this.ifDataHelper.items);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.Container","mstrmojo.threshold.TextGroup","mstrmojo.threshold.ThresholdRow","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.ui.editors.controls.CharacterGroup");var G=mstrmojo.Widget,F=mstrmojo.hash,D="180px";mstrmojo.threshold.PropertyPanel=mstrmojo.declare(mstrmojo.Container,[mstrmojo.threshold.PropertyPanel],{markupString:'<div class="mstrmojo-threshold-PropertyPanel"><div class="condition"></div><div class="format mstrmojo-vi-PropEditor"><div class="text"><div class="title">'+mstrmojo.desc(5998,"Replace Data")+'</div></div><div class="font mstrmojo-vi-EditorGroup"><div class="title">'+mstrmojo.desc(3433,"Font")+'</div></div><div class="border"><div class="title">'+mstrmojo.desc(5616,"Color And Borders")+'</div></div></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.children[1].firstChild;},fontNode:function(){return this.domNode.children[1].children[1];},borderNode:function(){return this.domNode.children[1].children[2];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:G.visibleMarkupMethod,onheightChange:G.heightMarkupMethod,onwidthChange:G.widthMarkupMethod},model:undefined,editor:undefined,textGroup:undefined,charGroup:undefined,containerGroup:undefined,onvisibleChange:function A(){if(this.visible){var J=this.model;J.updateControl(this);var H=F.clone(J.threshold),I=this.thresholdRow;if(I){this.removeChildren(I);}this.addChildren({scriptClass:"mstrmojo.threshold.ThresholdRow",alias:"thresholdRow",slot:"conditionNode",idx:J.thresholdRow.idx,model:this.editor.model,threshold:H,onclick:mstrmojo.emptyFn});this.refresh();}},onOK:function B(){this.model.submitChange();this.close();},close:function E(){var H=this.thresholdRow;if(H){this.removeChildren(H);}this.set("visible",false);this.editor.toggleButtonStatus(true);this.editor.setRowPanelVisibility(true);},children:[{scriptClass:"mstrmojo.threshold.TextGroup",slot:"textNode",alias:"textGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("threshold",H,I);}},{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",slot:"fontNode",alias:"charGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("fmt",H,I);}},{scriptClass:"mstrmojo.ui.editors.controls.ContainerGroup",slot:"borderNode",alias:"containerGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("fmt",H,I);}},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",onclick:function(){var H=this.parent;if(H.close){H.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",onclick:function(){var H=this.parent;if(H.onOK){H.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:mstrmojo.desc(14000,"Press ## after finishing formatting.").replace("##",'"√"')}]});}());(function(){mstrmojo.requiresClsP("mstrmojo","array","css","hash","color","Editor","Button","Box","Label","num");mstrmojo.requiresClsP("mstrmojo.ui","Pulldown","Checkbox","CheckList");mstrmojo.requiresClsP("mstrmojo.threshold","ColorSlider","ThresholdModel");mstrmojo.requiresClsP("mstrmojo.models","FormatModel");mstrmojo.requiresDescs(2268,2281,2491,2519,3606,5585,7665,7666,7905,7907,7908,7909,7910,12110,12111,13613,13614,13615);var M=mstrmojo.array,X=mstrmojo.css,P=mstrmojo.hash,Q=mstrmojo.Button.newWebButton,U=mstrmojo.num,E=mstrmojo.models.FormatModel.getFormatUpdate,A=4;var V=mstrmojo.threshold.ThresholdModel.SLIDER_MODE,F=mstrmojo.threshold.ThresholdModel.FEATURES;var K=null,B=null,W=[{n:mstrmojo.desc(527,"Value"),v:7},{n:mstrmojo.desc(4405,"Lowest"),v:4},{n:mstrmojo.desc(529,"Highest"),v:5},{n:mstrmojo.desc(4406,"Lowest %"),v:1},{n:mstrmojo.desc(4407,"Highest %"),v:2}];function S(m){var n=[],k=this.colorSlider,j=k.getComp(),d=k.getPalette(),l=this.basedOn.value,f=this.model,g=this.controller,o=f.orgThresholds,a=this.metricId,c=o&&o[a],Z=this.breakBy.breakByList,h=Z.items[Z.selectedIndex],b=j.length,e,p;if(k.getReversedValue()){d=d.concat().reverse();}for(e=0;e<b;e++){p={};if(this.colorSlider.sliderMode===V.IMAGE_BASED){p.rtp=4;p.rtxt=d[e];}else{p.fmt=E("bc",d[e]);}if(e>0){p.flr=U.toLocaleString(f.getRealValue(j[e-1],l));}if(e<b-1||b===1){p.ceil=U.toLocaleString(f.getRealValue(j[e],l));}if(h&&h.did!==-1){p.dmy={did:h.did,t:h.t};}n.push(p);}g.onSubmitActions(n,c,a,g.supportsFeature(F.SHOW_BASED_ON)?this.basedOn.selectedMetric:a,this.basedOn.value,m,A);}function J(j){var f=this.model,b=f.thresholds&&f.thresholds[j],v=f.data.gsi,m=this.colorSlider,h=[],z=[],g=[],l,y,Z,o=this.colorPalettes,k=this.imageSelector,t=o.colorPulldown,x=this.typeSelector.typeCheckList,a=k.imagePulldown,i=this.basedOn,d=i.options,s=i.metricsList,q=this.breakBy.breakByList,p=this.controller.supportsFeature(F.SHOW_BASED_ON);if(b&&b.length>0){l=f.getSimpleThresholdType(j);if(l!==-2){Z=f.isImageBasedType(j);b.forEach(function(e){var AB=P.copy(e),AA=AB.ceil;if(AA!==Infinity){AB.comp=f.getNormalizedValue(AA,e.ttp);}else{AB.comp=1;}h.push(AB);});h.sort(function(AA,e){return AA.comp-e.comp;});h.forEach(function(e){z.push(e.comp);if(Z){g.push(e.rtxt);}else{g.push(e.fmt.bc);}});x.set("selectedIndex",Z?V.IMAGE_BASED:V.COLOR_BASED);if(Z){y=f.getImageSetName(g);a.set("selectedIndex",M.find(B,"v",y));}else{y=f.getColorScheme(g);if(y==="custom"){this.switchToCustomScheme(z,g);m.unselectAll();m.update();}else{t.set("items",K);t.set("selectedIndex",M.find(K,"v",y));}}m.set("baseColor",y);m.setColorComp(y,z);if(f.isMapReversed(y,g,Z)){m.reverseMapColor();}if(p){var c=b[0].expr,n=c.m||c.nds[0].m;s.set("selectedIndex",M.find(v.mx,"did",(n&&n.did)||f.metricId));}d.set("selectedIndex",M.find(d.items,"v",l));var w;try{w=b[0].expr.nds[0].dmy.uts[0].utgt.did;}catch(u){}q.set("selectedIndex",Math.max(0,M.find(q.items,"did",w)));}}else{x.set("selectedIndex",V.COLOR_BASED);t.set("items",K);t.set("selectedIndex",0);m.update();if(p){s.set("selectedIndex",0);}q.set("selectedIndex",0);}}function N(Z){this.parent.colorSlider.set("baseColor",Z);this.selectedColor=Z;}function O(){return mstrmojo.Button.newWebButton(mstrmojo.desc(12282,"Reversed"),function(){this.parent.parent.colorSlider.reverseMapColor(this.checked);},false,{cssClass:"reverse"});}function L(){var Z=this.model,b=this.basedOn.options,d=b.items,e=isNaN(Z.getMetricsMaxValue())||isNaN(Z.getMetricsMinValue()),a=(e||!this.controller.supportsFeature(F.SHOW_VALUE_ITEM))?W.slice(1):W,c=d[b.selectedIndex];if(a.length!==d.length){b.set("items",a);b.set("selectedIndex",Math.max(a.indexOf(c),0));}}mstrmojo.threshold.SimpleThresholdEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.threshold.SimpleThresholdEditor",cssClass:"mstrmojo-SimpleThresholdEditor",title:mstrmojo.desc(3647,"Thresholds"),help:"thresholds_editor.htm",model:undefined,controller:undefined,metricId:undefined,metricName:undefined,typeSelector:undefined,basedOn:undefined,breakBy:undefined,colorSlider:undefined,colorPalettes:undefined,imageSelector:undefined,showAdvancedEditorLink:undefined,init:function R(b){this._super(b);var a=mstrApp.customization.getCustomThresholds(),Z=function(c){return{n:mstrmojo.desc(c.title,"N/A"),v:c.id,cls:c.id};};if(!K){K=a.color.map(function(c){return Z(c);});}this.colorPalettes.colorPulldown.set("items",K);if(!B){B=a.image.map(function(d){var c=Z(d);c.bc=d.combinedImageUrl;return c;});this.imageSelector.imagePulldown.set("items",B);}},onOpen:function D(){var Z=this.controller,a=this.model,e=this.basedOn,c=e.options,f=e.metricsList,b=this.metricId,d=a.data.gsi;this.colorSlider.resetColorMap();X.toggleClass(this.containerNode,"hideImage",!Z.supportsFeature(F.SHOW_IMAGE));if(Z.supportsFeature(F.SHOW_BASED_ON)){X.addClass(c.domNode,"short");f.set("items",d.mx);f.set("visible",true);}else{f.set("visible",false);X.removeClass(c.domNode,"short");}this.breakBy.breakByList.set("items",[{n:mstrmojo.desc(2057,"None"),did:-1}].concat(this.targets.filter(function(g){return g.t===12;})));this.showAdvancedEditorLink.set("visible",Z.supportsFeature(F.SHOW_ADVANCED_EDITOR));J.call(this,b);this.colorSlider.updateLabels();this.domNode.oncontextmenu=function(){if(mstrApp.isSingleTier){return false;}};},onClose:function C(){this.model.cleanUp();},switchToCustomScheme:function H(b,g){var f="custom",c=this.colorSlider,d=this.colorPalettes.colorPulldown,e=d.items,a=e.map(function(h){return h.v;}).indexOf(f)!==-1;b=b||c.getComp().concat();if(!g){var Z=c.getPalette().concat();g=c.getReversedValue()?Z.reverse():Z;}c.addCustomScheme(b,g);if(!a){d.set("items",e.concat({n:mstrmojo.desc(2056,"Custom"),v:f}));}d.set("selectedIndex",M.find(d.items,"v",f));},children:[{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"typeSelector",typeCheckList:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12112,"Thresholds Type:")},{scriptClass:"mstrmojo.ui.CheckList",alias:"typeCheckList",multiSelect:false,orientation:"h",postselectionChange:function I(k){var f=this.parent.parent,d=f.model,g=f.colorSlider,b=f.colorPalettes,i=f.imageSelector,c=i.imagePulldown,a=K[b.colorPulldown.selectedIndex],Z=B[c.selectedIndex],j=k.added[0],e=j?Z:a,h=j?d.getDefaultImages()[0].id:d.getDefaultColors()[0].id;b.set("visible",!j);i.set("visible",!!j);g.set("sliderMode",j);g.set("baseColor",(e&&e.v)||h);g.editableBubble.set("visible",false);if(j===V.IMAGE_BASED&&!c.selectedIndex){c.set("selectedIndex",0);}},selectedIndex:0,items:[{n:mstrmojo.desc(12113,"Color-based"),v:"color",cls:"color"},{n:mstrmojo.desc(12114,"Image-based"),v:"image",cls:"image"}]}]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"colorPalettes",selectedColor:undefined,colorPulldown:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2060,"color:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"short",alias:"colorPulldown",onitemSelected:function G(Z){N.call(this.parent,Z.v);},selectedIndex:0,items:K},O()]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"imageSelector",visible:false,selectedColor:undefined,imagePulldown:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(6369,"Images:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"image-pulldown short",alias:"imagePulldown",onitemSelected:function G(Z){N.call(this.parent,Z.v);},getPopupListConfig:function T(){var Z=mstrmojo.ui.Pulldown.prototype.getPopupListConfig.call(this);Z.getItemMarkup=function b(){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}"><div class="text">{@n}</div><div class="bc" style="{@bc}"></div></{@tag}>';};Z.getItemProps=function a(e,c){var d=mstrmojo._IsList.getItemProps.call(this,e,c);d.bc="background:url("+e.bc+")";return d;};return Z;},items:B},O()]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"basedOn",value:"",metricsList:undefined,options:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4402,"Based on:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"short",alias:"metricsList",onitemSelected:function G(c){var b=this.parent,Z=b.parent,a=c.did;b.selectedMetric=Z.model.basedOnId=a;Z.colorSlider.updateLabels();L.call(Z);}},{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:3,cssClass:"short option",alias:"options",onitemSelected:function G(b){var e=this.parent,a=e.parent,d=a.breakBy,c=b.v,Z=c===7;e.value=c;a.colorSlider.set("selectedOption",b.v);d.set("visible",!Z);if(Z){d.breakByList.set("selectedIndex",0);}},items:W}]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"breakBy",breakByList:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4564,"Break By:")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"breakByList"}]},{scriptClass:"mstrmojo.threshold.ColorSlider",alias:"colorSlider"},{scriptClass:"mstrmojo.Label",cssClass:"link",alias:"showAdvancedEditorLink",slot:"buttonNode",text:mstrmojo.desc(4569,"Advanced Thresholds Editor..."),onclick:function Y(){var b=this.parent,a=b.breakBy.breakByList,Z=a.items[a.selectedIndex].did!==-1,c=function(){b.colorSlider.unselectAll();b.close();b.model.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.ADVANCED_EDITOR;};mstrmojo.warn(Z?mstrmojo.desc(14160,"Save thresholds definition before proceeding to the Advanced Thresholds Editor? The Break By attribute will be lost."):mstrmojo.desc(14159,"Save thresholds definition before proceeding to the Advanced Thresholds Editor?"),undefined,{cssClass:"save-threshold-warning",buttons:[Q(mstrmojo.desc(2827,"Clear"),function(){c();b.controller.openEditor();},false,{cssClass:"nosave"}),Q(mstrmojo.desc(2031,"Apply"),function(){c();a.set("selectedIndex",0);S.call(b,true);},true),Q(mstrmojo.desc(2223,"Cancel"))]});}},{scriptClass:"mstrmojo.Box",cssClass:"editor-buttons",slot:"buttonNode",children:[Q(mstrmojo.desc(221,"Cancel"),function Y(){var Z=this.parent.parent;Z.colorSlider.unselectAll();Z.close();}),Q(mstrmojo.desc(1442,"OK"),function Y(){var Z=this.parent.parent;S.call(Z);Z.colorSlider.unselectAll();Z.close();},true),Q(mstrmojo.desc(2031,"Apply"),function Y(){var Z=this.parent.parent;S.call(Z,true);Z.colorSlider.unselectAll();},true)]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Widget","mstrmojo.Label","mstrmojo.Box","mstrmojo.desc","mstrmojo.css","mstrmojo.hash","mstrmojo.array","mstrmojo.expr","mstrmojo.models.FormatModel","mstrmojo.ui._HasScroller","mstrmojo.threshold.ThresholdRow","mstrmojo.threshold.ConditionWalk","mstrmojo.threshold.PropertyPanel","mstrmojo.threshold.PropertyModel","mstrmojo.threshold.ThresholdRowPanel");var f=mstrmojo.css,U=mstrmojo.hash,e=mstrmojo.expr,J=e.ET,T=e.BRANCH_FNS,Y=mstrmojo.Button.newWebButton,L=mstrmojo.models.FormatModel.getFormatUpdate,g="";var D=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,G=[D.BORDER_TOP_STYLE,D.BORDER_RIGHT_STYLE,D.BORDER_BOTTOM_STYLE,D.BORDER_LEFT_STYLE],Q={0:"none",1:"1pt solid",3:"1pt dashed",4:"1pt dotted",5:"1.5pt solid"};function H(i,k){var j=[];if(k){k.forEach(function(m){var n=m.fmt,l={FormattingAppearance:{Visible:-1}};U.forEach(n,function(o,p){var q=false;if(G.indexOf(p)===-1){L(p,o,l);}else{if(!n.borderStyle&&!q){L(D.BORDER_STYLE,Q[o],l);}}});i.setAttIdToNDE(m.expr);j.push({n:m.n,scope:m.scope,rtp:m.rtp,rtxt:m.rtxt,expr:mstrmojo.fe.FilterUtils.getExprXml(m.expr),fmt:l});});}return j;}function a(m){var j=this.controller,k=this.model,l=k.thresholds,n=this.metricId,p=l&&l[n],o=k.orgThresholds,i=o&&o[n];j.onSubmitActions(H(k,p),i,n,undefined,-1,m,this.objectType);}function X(i){(i||[]).forEach(function(j){delete j.dmy;var k=j.nds;if(k){X(k);}});}function R(){var m=this.content,j=this.model,q=j.thresholds,l=this,n=[],p=m.rowPanel,o=q&&q[j.metricId],k=0;if(o){o.forEach(function(i){X(i.expr.nds);n.push({scriptClass:"mstrmojo.threshold.ThresholdRow",threshold:i,editor:l,model:j,idx:k++});});}p.destroyChildren(false);p.addChildren(n);this.updateScrollbars();}function d(){var n=this.content.rowPanel,l=n.children,j=(l&&l.length)||0,k=this.model,o=k.thresholds,m=o&&o[k.metricId],i={expr:{et:14,fn:19}};if(!o){o=k.thresholds={};}if(!m){m=o[k.metricId]=[];}m.push(i);n.addChildren([{scriptClass:"mstrmojo.threshold.ThresholdRow",threshold:i,editor:this,model:k,idx:j}]);n.children[j].exprTree.newCondition(null);this.updateScrollbars();}function V(j){var i=this.model,l=i.thresholds,k=l&&l[i.metricId];if(k){k.forEach(function(m){i.toggleThresholdSelected(m,j);});}}function N(m,n){var i=this.controller,j=this.model,k=this.metricId,l=j.selectedThresholds;if(l.length>0){i.onSaveThresholds(H(j,l),k,-1,m,n);}}function K(j){var l="mstrIVE_THRESHOLD_SAVER",i=j.controller.dataService.model,k=mstrmojo.all[l];if(!k){k=new mstrmojo.SaveAsEditor({id:l,zIndex:j.zIndex+1,folderLinksContextId:32,rootFolderID:i.isnew?null:i.pfid,showCompletePath:false,saveParams:{},typeDesc:mstrmojo.desc(null,"Thresholds"),saveAs:function(o){var m=this.contPanel;this.name=m.name.value;this.desc=m.desc.value;if(!this.name){mstrmojo.alert(mstrmojo.desc(3380,"Please enter valid name"));return ;}var p=this.saveParams||{};p.folderId=this.ob.currentFolder.did;p.name=this.name||"New Thresholds";p.saveAsOverwrite=!!o;var n=this.saveAsCallback();n.failure=function(s){var q=s.code,t=this.parent;if(q==="-2147217373"||q==="-2147216857"){mstrmojo.warn(mstrmojo.desc(7986,"The ## '###' already exists. Do you want to replace the existing one?").replace("##",t.typeDesc||"Object").replace("###",t.name),{confirmBtn:{fn:function(){t.saveAs(true);}}},{title:mstrmojo.desc(3179,"Confirm Overwrite"),zIndex:t&&t.zIndex+10});}else{mstrmojo.alert(mstrmojo.desc(7985,"Error while saving: ")+s.message);}};n.parent=this;N.call(j,p,n);}});k.render();}k.open();}function E(k){var p="mstrIVE_THRESHOLD_LOADER",n=mstrmojo.all[p],j=k.controller.dataService.model,o=[72];if(!n){n=new mstrmojo.vi.ui.editors.ObjectPicker({id:p,supportedTypes:mstrmojo.array.hash(o),zIndex:k.zIndex+1,rootFolderID:j.isnew?null:j.pfid,onOpen:function i(){this.browse();},postBuildRendering:function m(){mstrmojo.Editor.prototype.postBuildRendering.apply(this);},OKFn:function(q){if(q){k.controller.onLoadThresholds(k.metricId,q.did);}}});var l=n.ob;l.set("folderLinksContextId",32);l.set("multiSelect",false);l.set("searchVisible",true);l.set("upButtonVisible",true);l.set("browsableTypes","8,"+o.join(","));n.render();}n.open();}mstrmojo.threshold.AdvancedThresholdEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.threshold.AdvancedThresholdEditor",cssClass:"adv-threshold",title:"Advanced Threshold Editor",help:"advanced_thresholds_editor_for_html5_dashboards.htm",model:undefined,targets:undefined,content:undefined,buttonBar:undefined,init:function Z(i){this._super(i);g=this.id;},postBuildRendering:function c(){this._super();var i=this.content;R.call(this);i.conditionWalk.set("editor",this);i.property.set("editor",this);},onOpen:function I(){R.call(this);this.setRowPanelVisibility(true);var i=this.content;i.conditionWalk.set("visible",false);i.property.set("visible",false);var j=this.buttonBar&&this.buttonBar.quickLink;if(!!j){j.set("visible",this.objectType!==12);}},setupScrollNodes:function P(){this.scrollNode=this.content.containerNode;},onClose:function F(){this.model.cleanUp();},onmodelChange:function O(){var i=this.model;if(i){i.attachEventListener("modelEdit",this.id,"onmodelEdit");i.attachEventListener("selectedThresholdsChange",this.id,"onselectedThresholdsChange");R.call(this);}},onselectedThresholdsChange:function b(){},openConditionWalk:function C(i,k){var n=this,o=n.content,p=o.conditionWalk,j=k.tree.parent,l=U.clone(j.threshold),m=p.thresholdRow;l.expr=i;if(m){p.removeChildren(m);}var q=new mstrmojo.threshold.ThresholdRow({alias:"thresholdRow",slot:"conditionNode",idx:j.idx,model:this.model,threshold:l,onclick:mstrmojo.emptyFn});p.addChildren(q);q.render();p.set("objectBrowsingEnabled",n.objectBrowsingEnabled);p.set("targets",n.targets);p.set("targetsLastMod",new Date());p.set("ets",k.tree.validExprTypes);p.set("condition",k);p.set("model",U.clone(i));n.setRowPanelVisibility(false);f.toggleClass(n.content.domNode,"no-overflow",true);p.set("visible",true);p.doLayout();n.toggleButtonStatus(false);this.updateScrollbars();},onmodelEdit:function S(){R.call(this);},openPropertyPanel:function M(i){this.setRowPanelVisibility(false);var k=this.content.property,j=k.model=new mstrmojo.threshold.PropertyModel({thresholdRow:i,threshold:U.clone(i.threshold),gridValueFormat:U.clone(this.model.getGridValueFormat())});this.disposables.push(j);j.attachEventListener("propertyModelChange",i.id,"onpropertyModelChange");k.set("visible",true);this.toggleButtonStatus(false);this.updateScrollbars();},openAndORPopup:function W(l,i){var j=new mstrmojo.ui.menus.MenuConfig();j.hostId=this.id;j.hostElement=i;j.isHostedWithin=false;j.menuCssClass="andor-PopupList";var k=function k(s){var m=l,q=s.ctxt.did,p=q>21?true:null,o=q-(p?21:0);var n=m&&m.parent;if(n&&n.data&&n.data.et===J.ANDOR){n.edit(m,o,p);}else{var t=m&&m.data;if(t&&(t.not!==p)){t.not=p;m.paint();}}};j.addMenuItem(T[19],"",k,{did:19});j.addMenuItem(T[20],"",k,{did:20});j.addMenuItem(T["19_21"],"",k,{did:19+21});j.addMenuItem(T["20_21"],"",k,{did:20+21});this.openPopup(j.newInstance());},toggleButtonStatus:function A(i){this.buttonBar.children.forEach(function(j){j.set("enabled",i);});},setRowPanelVisibility:function B(j){var i=this.content;i.rowPanel.set("visible",j);i.newCondition.set("visible",j);this.updateScrollbars();},children:[{scriptClass:"mstrmojo.Widget",alias:"rulesTitles",markupString:"<div class='rulesTitles'><div class='container'></div><div class='order'>"+mstrmojo.desc(3095,"Order")+"</div><div class='condition'>"+mstrmojo.desc(11890,"Threshold Conditions")+"</div><div class='format'>"+mstrmojo.desc(11891,"Format Preview")+"</div></div>"},{scriptClass:"mstrmojo.Box",cssClass:"content",alias:"content",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"><div class="scroll-container"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},rowPanel:undefined,newCondition:undefined,conditionWalk:undefined,property:undefined,children:[{scriptClass:"mstrmojo.threshold.ThresholdRowPanel",alias:"rowPanel",children:[]},{scriptClass:"mstrmojo.Label",alias:"newCondition",cssClass:"link",text:mstrmojo.desc(4585,"New Threshold"),onclick:function h(){d.call(mstrmojo.all[g]);}},{scriptClass:"mstrmojo.threshold.ConditionWalk",alias:"conditionWalk",height:"300px",width:"750px",visible:false},{scriptClass:"mstrmojo.threshold.PropertyPanel",alias:"property",visible:false}]},{alias:"buttonBar",scriptClass:"mstrmojo.Box",slot:"buttonNode",children:[Y(mstrmojo.desc(221,"Cancel"),function(){mstrmojo.all[g].close();}),Y(mstrmojo.desc(1442,"OK"),function(){a.call(mstrmojo.all[g],false);mstrmojo.all[g].close();},true),Y(mstrmojo.desc(2031,"Apply"),function(){a.call(mstrmojo.all[g],true);},true),{scriptClass:"mstrmojo.Label",cssClass:"link",alias:"quickLink",text:mstrmojo.desc(14004,"Quick Thresholds Editor..."),onclick:function h(){var k=mstrmojo.all[g],j=k.model,i=k.controller,m=j.isAdvanced(j.metricId),n=function(){k.close();j.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.SIMPLE_EDITOR;},l=[Y(m?mstrmojo.desc(1442,"OK"):mstrmojo.desc(2827,"Clear"),function(){n();i.openEditor();},m,m?undefined:{cssClass:"nosave"})];if(!m){l.push(Y(mstrmojo.desc(2031,"Apply"),function(){n();a.call(k,true);},true));}l.push(Y(mstrmojo.desc(2223,"Cancel")));mstrmojo.warn(m?mstrmojo.desc(13998,"This action will clear the thresholds definition. Do you want to proceed?"):mstrmojo.desc(13999,"Do you want to apply your thresholds before using the Quick Thresholds Editor?"),undefined,{cssClass:m?undefined:"save-threshold-warning",buttons:l});}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Dial","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Obj","mstrmojo.CheckBox","mstrmojo.warehouse.EnumObjectTypes","mstrmojo.fe.FilterExprTree","mstrmojo.fe.RelationFilterExprTree","mstrmojo.fe.CreateSetEditor","mstrmojo.fe.ConditionWalk","mstrmojo.ui.Pulldown","mstrmojo.ui.StatusButton");var Z=mstrmojo.expr,I=Z.ET,P=Z.BRANCH_FNS,X=mstrmojo.Obj,W=mstrmojo.dom,a=mstrmojo.array,T=mstrmojo.hash,d=mstrmojo.css,C=mstrmojo.warehouse.EnumObjectTypes,K={TEMPLATE:0,DATASET:1},E=mstrmojo.mstr.EnumNodeDimty,R=a.hash([E.NodeDimtyUnspecified,E.NodeDimtyNone]),N=200,H=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(g){a.forEach(this.buttonBar.children[0].children,function(h){h.set("enabled",g);});}function Y(){var g=this.avatar;if(g){g.parentNode.removeChild(g);delete this.avatar;d.removeClass(g,[this.avatarCssClass]);}}mstrmojo.fe.FilterEditorBase=mstrmojo.declare(mstrmojo.Editor,null,{onSave:null,title:mstrmojo.desc(12032,"View Filter Editor"),help:"view_filter_editor_for_report_services_documents.htm",cssClass:"mstrmojo-charcoalboxe mstrmojo-FE",showLimits:true,objectBrowsingEnabled:false,children:null,init:function U(g){this.children=[{alias:"feContent",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-content",postCreate:function(){this.children=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-exprTool",children:[{scriptClass:"mstrmojo.ui.StatusButton",cssClass:"mstrmojo-FE-addCondition",postCreate:function h(){this.editor=this.parent.parent.parent;this.statusList=this.editor.getAddConditionList();this.status=this.statusList[0];},onButtonClick:function(i){if(i){i.handler.apply(this.editor);}}}]},this.parent.getExpressionContainerCfg()];}},this.getConditionWalkConfig(),{alias:"buttonBar",scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(118,"Save"),onclick:function(){var h=this.editor;M(h);h.close();},bindings:{enabled:function(){return !this.editor.readOnly;},editor:"this.parent.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent.parent"}}]}]}];this._super(g);this.model=this.model||new X();},getExpressionContainerCfg:function(){var g=this;return{alias:"feExpr",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-expr-list",postCreate:function(){this.children=g.getExpressionContentsConfig();},onRender:function(){W.attachMarkupEvent(this.id,this.domNode,"mousedown");},onmousedown:function(h){var i=W.eventTarget(h.hWin,h.e);if(this.isBlankArea(i)){this.clearSelect();}},isBlankArea:function(h){return h===this.domNode;},clearSelect:function(){}};},getExpressionContentsConfig:function(){return[];},getConditionWalkConfig:function(){var h=this;return{scriptClass:"mstrmojo.rw.ConditionWalk",width:"750px",objectBrowsingEnabled:false,dimtyTypes:R,alias:"walk",visible:false,onOK:function g(){var j=this.condition;h.feContent.set("visible",true);this.set("visible",false);h.onConditionEdit(j,this.model.get());B.call(h,true);},close:function i(){h.feContent.set("visible",true);this.set("visible",false);var j=this.condition;if(j.isEmpty()){j.del();}B.call(h,true);},targets:null,targetsLastMod:null,ets:null,condition:null,bindings:{disableElementsBrowsing:"this.parent.disableElementsBrowsing"}};},onConditionEdit:function(h,g){h.tree.modifyConditionNode(h,g);},getAddConditionList:function c(){return[{n:mstrmojo.desc(1994,"Add Condition"),handler:function(){this.mainExpr.newCondition(null,true);}}];},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-FE-andOrPopup mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",slot:"containerNode",modal:false,autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var g=this.condition,j=g&&g.data&&g.data.not,k=g&&g.parent,h=k&&k.data,i=(h&&h.fn)+(j?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(i)?null:{did:i});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",items:[{did:19,n:P[19]},{did:20,n:P[20]},{did:19+21,n:P["19_21"]},{did:20+21,n:P["20_21"]}],onchange:function(){if(this.opening){return ;}var h=this.parent,g=h.condition,m=this.selectedItem,l=m&&m.did,k=l>21?true:null,j=l-(k?21:0);h.close();var i=g&&g.parent;if(i&&i.data&&i.data.et===I.ANDOR){i.edit(g,j,k);}else{var n=g&&g.data;if(n&&(n.not!==k)){n.not=k;g.paint();}}}}]},createSetPopupRef:{scriptClass:"mstrmojo.fe.CreateSetEditor",contentNodeCssClass:"",cssClass:"CreateSet-Editor",title:mstrmojo.desc(12034,"Create a Set"),slot:"containerNode"},_set_busy:function(h,g){if(g){this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");}else{this.set("enabled",true);this.set("iconClass","");}},_set_model:function(k,h){var i=this.model,j=i!==h;if(j){this.model=h;this.modelLastSet=new Date();var g=function(l){return Q(J(l));};h.exprForest=g(h.expr);h.limitExprForest=g(h.limitExpr);if(this.feContent&&this.feContent.feExpr.ve){this.feContent.feExpr.ve.nameFactory.clear();}}return j;},onUpdateBrowseElementsParams:mstrmojo.emptyFn});mstrmojo.fe.ReportFilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({clearSelect:function(){this.re.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{alias:"re",scriptClass:"mstrmojo.fe.ReportFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}}];}});mstrmojo.fe.ReportFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.ReportFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(g){g.data.isNew=true;F(this.editor,g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");},onnodeclick:function A(g){F(g.editor||this.tree.editor,this.data,this,g&&g.part);},allowDrop:function G(g){var i=g&&g.src,k=i&&i.data,j=k&&k.et,h=i&&i.widget&&i.widget.tree;return j&&this!==h;}});mstrmojo.fe.FilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({isBlankArea:function(h){if(this._super(h)){return true;}return !a.filterOne([this.ve,this.vle],function(i){if(W.contains(i.domNode,h,true)){return true;}});},clearSelect:function(){this.ve.clearTreeSelect();this.vle.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11746,"Dataset Level Conditions"),cssClass:"mstrmojo-FE-expr-header dl",bindings:{visible:"true || this.parent.parent.parent.showLimits"}},{alias:"ve",scriptClass:"mstrmojo.fe.RWViewFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},supportRelation:true,postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11747,"Template Level Conditions"),cssClass:"mstrmojo-FE-expr-header tl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"vle",scriptClass:"mstrmojo.fe.RWViewLimitExprTree",level:K.TEMPLATE,bindings:{visible:"this.editor.showLimits",items:"this.editor.model.limitExprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("limitExpr",this);}}];},getConditionWalkConfig:function(){var g=this._super();T.copy({scriptClass:"mstrmojo.fe.ConditionWalk"},g);return g;},getAddConditionList:function c(){var g=this._super();g.push({n:mstrmojo.desc(12055,"Add Dynamic Condition"),handler:function(){this.mainExpr.newCondition({et:I.XML,idc:1,ph:{}},true);}});return g;},onConditionEdit:function(i,h){if(i.tree.level===i.level||i.tree.level===undefined){this._super(i,h);}else{i.parent.remove(i.data);var g=K.TEMPLATE===i.level?this.limitExpr:this.mainExpr;g.addSingleCondition(h);}}});mstrmojo.fe.RWViewFilterExprTree=mstrmojo.declare(mstrmojo.fe.RelationFilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(g){g.data.isNew=true;if(!g.data.ph){F(this.editor,g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");}},onnodeclick:function A(g){F(g.editor||this.tree.editor,this.data,this,g&&g.part);},ondragend:function O(i){var h=i&&i.tgt,g=h&&h.widget;if(this.tree&&g&&g.tree&&g.tree!==this.tree){Y.call(this);return ;}this._super(i);},getItemConfig:function(i,g,j){var h=this._super(i,g,j);return T.copy({getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewLimit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(4978,"Move to view limit")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewLimit(w); return false;\" />";}},h);},moveMQNodeToViewLimit:function(i){if(i.data.et!==I.MQ){return ;}var h=T.copy(i.data);i.parent.remove(i.data);var g=this.editor.limitExpr;g.addSingleCondition(h);},allowDrop:function G(g){var i=g&&g.src,l=i&&i.data,k=l&&l.et,j=this.tree,h=i&&i.widget&&i.widget.tree;return k&&(this===j?(h!==j):true);}});mstrmojo.fe.RWViewLimitExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewLimitExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-limitExpr",validExprTypes:a.hash([I.MQ]),onnodeclick:function A(g){F(this.tree.editor,this.data,this,g&&g.part);},onConditionEdit:function(h,g){this._super(h,g);h.data.mdxUnitId=h.data.m.did;V(h);},addSingleCondition:function(h){var g=this._super(h);V(g);},allowDrop:function(g){var j=g&&g.src,l=j&&j.data,k=l&&l.et,i=this.tree,h=j&&j.widget&&j.widget.tree;if(i===h){return this!==h&&this.data&&(this===j.parent||this.data.mdxUnitId===l.mdxUnitId);}return k===I.MQ;},ondrop:function L(h){var k=h&&h.src,g=k&&k.widget;if(g&&g.tree!==this.tree){var j=k&&k.data;if(j&&j.index!==null){var i=g.ctxtBuilder.itemWidgets[j.index];i.tree.moveMQNodeToViewLimit(i);}k.data=null;}this._super(h);},isEditable:function(g){return g.mdxUnitId&&this._super(g);},ondragend:function S(g){var j=g&&g.tgt,h=j&&j.widget;if(h&&h.tree!==this.tree){var i=g.src&&g.src.data;if(i&&(i.indices||(i.index!==null))){this.remove(i.indices||i.index);}Y.call(this);}else{this._super(g);}},moveMQNodeToViewFilter:function(h){var g=this.editor.mainExpr;h.parent.remove(h.data);g.addSingleCondition(h.data);},getItemConfig:function(i,g,j){i.mdxUnitId=D(i);var h=this._super(i,g,j);return T.copy({cssClass:f(i,g,j)?"per-metric-limit":"",forbidRelation:true,getConditionTextPostfix:function(){if(this.data.et!==I.MQ||mstrmojo.rw.ConditionWalk.isMdxDM(this.data.m.did)){return"";}return'<img class="mstrmojo-moveToViewFilter" src="../images/1ptrans.gif" title="'+mstrmojo.desc(9746,"Move to view filter")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewFilter(w); return false;\" />";}},h);}});function F(o,l,m,s){var h=W.delta(m.domNode,o.containerNode);h.y+=(s==="andor"?16:parseInt(m.domNode.offsetHeight,10));var p={condition:m,zIndex:o.zIndex+10,left:h.x+"px",top:h.y+"px"},g;switch(s){case"andor":if(o.skipAndOrPopup){return ;}g="andOrPopupRef";break;case"createSet":case"createSetOpt":var q=o.model.targets;g="createSetPopupRef";p.type=s;p.model={attrs:a.filter(q,function(n){return n.t===C.ATTRIBUTE;}),metrics:a.filter(q,function(n){return n.t===C.METRIC;})};if(s==="createSetOpt"){p.condition=m.parent;p.model.childIdx=m.childIndex();}break;case"condition":var k=o.walk,i=m.textNode.cloneNode(true),j=k.conditionNode.firstChild;d.removeClass(i,"editable");d.addClass(k.conditionNode,"mstrmojo-ConditionNode");if(j.firstChild){j.removeChild(j.firstChild);}j.appendChild(i);k.set("objectBrowsingEnabled",o.objectBrowsingEnabled);k.set("targets",o.model.targets);k.set("targetsLastMod",o.modelLastSet);k.set("ets",m.tree.validExprTypes||o.validExprTypes);k.set("condition",m);k.set("model",T.clone(l));k.set("hasPrompt",o.model.hasPrompt);k.set("disableElementsBrowsing",o.disableElementsBrowsing||k.disableElementsBrowsing);k.set("editor",o);k.set("inRelation",m.inRelation);o.feContent.set("visible",false);k.set("visible",true);k.columnWalk.target.updateScrollbars();B.call(o,false);return ;}o.openPopup(g,p);}function M(h){var g=h.model;g.expr=e(g.exprForest);g.limitExpr=e(b(g.limitExprForest));h.onSave(g);}function Q(h){var g=[];a.forEach(h,function(i){if(!i){return ;}if(i.et===I.ANDOR){i.nds=Q(i.nds);if(i.nds.length===0){return ;}else{if(i.nds.length===1){var j=i.nds[0];if(i.not){j.not=!j.not;}g.push(j);return ;}}}g.push(i);});return g;}function J(g){return g?[g]:[];}function e(g){return g&&g.length===1?g[0]:null;}function b(i){var h=Q(i),g;if(!h[0]||h[0].mdxUnitId){g={et:I.ANDOR,fn:Z.FN.AND,nds:h};}else{g=h[0];}return[g];}function f(h,g,i){return(i===i.tree||i.parent===i.tree)&&!!h.mdxUnitId;}function D(h){if(!("mdxUnitId" in h)){var g;switch(h.et){case I.MQ:g=h.m.did||null;break;case I.ANDOR:a.forEach(h.nds,function(j){var i=D(j);if(g===undefined){g=i;}else{if(g!==i){g=null;return false;}}return true;});break;default:g=undefined;break;}h.mdxUnitId=g;}return h.mdxUnitId;}function V(l){var n=l.tree,m=n.ctxtBuilder.itemWidgets[0],q=l.parent,o=a.indexOf(q.items,l.data),j=q.items[o],h=j.mdxUnitId;if(q===n){return ;}if(q.data.mdxUnitId===h){return ;}if(m.data.mdxUnitId){var i={et:I.ANDOR,fn:Z.FN.AND,nds:[m.data,j]};n.remove(0);n.add([i]);n.ctxtBuilder.itemWidgets[0].ctxtBuilder.itemWidgets[0].remove(j);}else{var k=m,g;a.forEach(m.data.nds,function(t,s){if(t.mdxUnitId===j.mdxUnitId&&m.items[s]!==j){k=m.ctxtBuilder.itemWidgets[s];g=s;return false;}});if(k===q){return ;}if(k.data.et!==I.ANDOR){var p={et:I.ANDOR,fn:Z.FN.AND,nds:[k.data,j]};m.add([p],g+1);m.remove(k.data);}else{k.add([j]);}q.remove(j);}}}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo.fe.FilterEditor","mstrmojo._FormatDefinition","mstrmojo.num","mstrmojo.locales","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.dom","mstrmojo.ME.AttributeEditBox","mstrmojo.ME.MetricToken","mstrmojo.string","mstrmojo.dom","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var l=mstrmojo.mstr.EnumFunction,X=mstrmojo.hash,o=mstrmojo.array,AD=mstrmojo.expr.ET,D=mstrmojo.css,V=mstrmojo.dom,s=mstrmojo.Button.newWebButton,S=mstrmojo.ME.MetricToken.brackets,w=mstrmojo.ME.MetricToken.argDelimiter,T=mstrmojo._FormatDefinition,m=mstrmojo.models.datasets.DataInterface,K=mstrmojo.vi.models.VIComponentMap.TYPES,U=mstrmojo.chart.model.enums.EnumDSSObjectType;var Y={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},c={SUM:{n:Y.SUM,t:l.FunctionSum},ADD:{n:Y.ADD,t:l.FunctionPlus},AVG:{n:Y.AVG,t:l.FunctionAvg},MAX:{n:Y.MAX,t:l.FunctionMax},GST:{n:Y.GST,t:l.FunctionGreatest},MIN:{n:Y.MIN,t:l.FunctionMin},LST:{n:Y.LST,t:l.FunctionLeast},TMS:{n:Y.MTP,t:l.FunctionTimes},CNT:{n:Y.CNT,t:l.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:l.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:l.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:l.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:l.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:l.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:l.FunctionVar}},Z=[{n:Y.SUM,t:l.FunctionOLAPSum},{n:Y.AVG,t:l.FunctionOLAPAvg},{n:Y.MIN,t:l.FunctionOLAPMin},{n:Y.MAX,t:l.FunctionOLAPMax},{n:Y.CNT,t:l.FunctionOLAPCount}],AE=[{n:Y.SUM,t:l.FunctionOLAPSum},{n:Y.AVG,t:l.FunctionOLAPAvg},{n:Y.MIN,t:l.FunctionOLAPMin},{n:Y.MAX,t:l.FunctionOLAPMax},{n:Y.CNT,t:l.FunctionOLAPCount}],M=[{n:mstrmojo.desc(1058,"Previous"),t:l.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:l.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:l.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:l.FunctionLast}];function e(AI,AK,AJ,AG){return{scriptClass:"mstrmojo.ui.Pulldown",items:AI,selectedIndex:AK,onitemSelected:function AH(AL){var AM=this.parent;while(!AM.data||!AM.data[AJ]){AM=AM.parent;}AM.data.set(AJ,AG?AG(AL):AL.v);}};}function t(AH,AG){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:")},e(AH,AG,"breakBy",function(AI){return{id:AI.did,type:AI.t,dmy:AI.dmy};})]};}function AB(AJ){var AK=AJ.metrics,AL=AJ.propName,AI=AJ.optionValueField||"id",AG=o.find(AK,AI,AJ.value),AM=function AM(AO){var AN=this.parent;while(!AN.data||!AN.data.hasOwnProperty(AL)){AN=AN.parent;}AN.data.set(AL,AO?{id:AO[AI],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",items:AK,selectedIndex:AG,useRichTooltip:true,bindings:AJ.bindings,valid:true,allowCustomText:true,allowEmptyText:true,onvalidChange:function AH(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:AM,onTextEditComplete:function(){AM.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:AJ.postkeyup};}function R(AJ,AI,AH){if(AJ&&AJ.datap){var AG=o.filterOne(AJ.datap,function(AL){return AL.tbid===AI;}),AK=AG&&AG.maps.amps;return o.filterOne(AK,function(AL){return AH===AL.aimp.atid;});}return null;}function h(AG,AK){var AI=o.filterOne(AG&&AG.afmps,function(AL){return AL.fmid===AK;}),AJ=AI&&(AI.sqc?AI:AI.col.oi),AH;if(AJ&&AJ.sqc){AH={did:AJ.sqc.id,n:mstrmojo.string.decodeHtmlString(AJ.cln),coldtp:AJ.sqc.dt.tp,georole:AJ.geo,timerole:AJ.tim,der:AJ.sqc.der};}else{if(AJ){AH={did:AJ.did,n:mstrmojo.string.decodeHtmlString(AJ.def.cln),coldtp:AJ.def.dt.tp,georole:AI.geo,timerole:AJ.def.dicl.time,der:AJ.def.dicl.der};}}return AH;}function C(AH,AG,AJ){var AI={success:function(AK){if(AK&&AK.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:AK.msgid,bindingflag:2,previewflag:261,browsetype:5},AJ);}},failure:function(AK){mstrApp.onerror(AK);}};mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:AG,messageID:AH},AI);}function I(AL,AM,AJ){var AH=AL.srcTableId,AO=AL.tgtTableId,AG,AK,AI=function(AS,AR){var AU="<mpcs><mpc ",AQ,AT;for(AQ in AR){AT=AR[AQ];AU+='$ACT="$VAL" '.replace("$ACT",AQ).replace("$VAL",AT);}AU+="/></mpcs>";return{act:"changeEMMAMapping",tbid:AS,dsid:AL.dsid,mapping:AU};},AP=function(AS){var AT={success:function(){AN();}},AR,AQ;AG=R(AS,AH,AL.srcId);AK=R(AS,AO,AL.tgtId);AR=h(AG,AG.afmps[0].fmid);AQ=[AI(AH,{did:AR.did,oid:AK.aimp.atid,fg:1})];AM.getDataService().submitUpdates(AQ,AT);},AN=function(){var AQ=[],AT={},AR,AS;if(!AG||!AK){return ;}AT[AH]={};AT[AO]={};o.forEach(AG.afmps,function(AX){var AV=o.find(AK.afmps,"fmid",AX.fmid),AY,AW,AU;if(AV>=0){AR=h(AG,AX.fmid);AS=h(AK,AX.fmid);if(AR.georole!==AS.georole){AU=(AR.georole===0)?AH:AO;AY=(AR.georole===0)?AR.did:AS.did;AW=AR.georole||AS.georole;AT[AU][AY]=X.copy({did:AY,georole:AW},AT[AU][AY]);}if(AR.timerole!==AS.timerole){AU=(AR.timerole===0)?AH:AO;AY=(AR.timerole===0)?AR.did:AS.did;AW=AR.timerole||AS.timerole;AT[AU][AY]=X.copy({did:AY,timerole:AW},AT[AU][AY]);}if(AR.der!==AS.der){AW=AR.der|AS.der;AT[AH][AR.did]=X.copy({did:AR.did,drvflg:AW},AT[AH][AR.did]);AT[AO][AS.did]=X.copy({did:AS.did,drvflg:AW},AT[AO][AS.did]);}}});X.forEach(AT,function(AU,AV){X.forEach(AU,function(AW){AQ.push(AI(AV,AW));});});AR=h(AG,AG.afmps[0].fmid);AQ.push(AI(AH,{did:AR.did,oid:AK.aimp.atid}));if(AJ){AJ(AQ);}};C(AM.mid,AL.dsid,{success:AP});}function W(AL,AI,AH,AM){var AG=0,AK=[],AJ=function(AN){var AO=AH[AG-1];if(AN&&AN.tks&&AO){AK.push({fid:AO.fid,fnm:AO.fnm,ftk:AN.tks.items});}if(AG===AH.length){AM(AK);return ;}AO=AH[AG++];mstrmojo.ME.MetricDataService.validateMetric({metricId:AI,formID:AO.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:AL},{success:AJ});};AJ();}function x(AG,AH){return{v:S(AG.n)+"@"+S(AH.fnm),tp:275,lv:1,exv:AH.fid,extp:8,oi:{did:AG.did,t:AG.t,n:AG.n}};}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function AA(AG){return{"12":[[c.AVG,c.CNT,c.MAX,c.MIN,c.STD,c.SUM,c.VAR]],"4":[[c.SUM,c.AVG,c.MIN,c.MAX,c.CNT],[c.GEM,c.MED,c.MOD,c.PDT,c.STD,c.VAR]]}[AG.t];},isAmongFunctions:function A(AH,AG){return AG.some(function(AI){return AI.some(function(AJ){return AJ.t===AH;});});},getMultiSelectionShortcutMetricFunctions:function J(AG){var AH=true;o.forEach(AG,function(AI){if(4!==AI.t){AH=false;return false;}return true;});return AH?[c.ADD,c.AVG,c.GST,c.LST,c.TMS]:[];},getRelativeReferenceMenu:function b(AK,AI,AN,AG){var AJ=0,AH=M[AJ],AM=0,AL=AN&&AN[AM];return new mstrmojo.ui.menus.EditorConfig({data:{item:AK,relativeRef:AH,breakBy:AL},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:AI&&AI.length,text:AI},e(M,AJ,"relativeRef",function(AO){return AO.t;})]},t(AN,AM)],fnOk:function(AO){return AG(AO.item,AO.relativeRef,[AO.breakBy]);}});},getMovingTotalMenu:function B(AQ,AK,AM){var AR=1,AJ=AE[AR].t,AL=1,AH=mstrmojo.desc(13289,"Starting previous##rows").split("##"),AP=0,AI=AK&&AK[AP];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:AQ,funcType:AJ,windowSize:AL,breakBy:AI},contents:[e(AE,AR,"funcType",function(AS){return AS.t;}),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix",text:AH[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function AO(){this.set("value",AL);},_ontooltipover:function(){var AS=mstrmojo.all[this.id];AS._hovered=true;AS.showTooltip();},_ontooltipout:function(){var AS=mstrmojo.all[this.id];AS._hovered=false;AS.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var AS=this.validationStatus.msg,AT=!(this.richTooltip&&AS===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:AS};if(this._hovered&&AT){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function AN(){var AS=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",AS?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix",text:AH[1]}]},t(AK,AP)],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function AG(AS){if(AM){AM(AQ,AS.funcType,AS.windowSize,[AS.breakBy]);}}});},getRunningTotalMenu:function z(AJ,AM,AH){var AI=0,AG=Z[AI].t,AL=0,AK=AM&&AM[AL];return new mstrmojo.ui.menus.EditorConfig({data:{item:AJ,func:AG,breakBy:AK},cssClass:"RunningTotal-MenuEditor",contents:[e(Z,AI,"func",function(AN){return AN.t;}),t(AM,AL)],fnOk:function(AN){return AH(AN.item,AN.func,[AN.breakBy]);}});},getRankMetricEditor:function u(AK,AN,AI){var AG=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],AH=0,AJ=AG[AH].v,AM=0,AL=AN&&AN[AM];return new mstrmojo.ui.menus.EditorConfig({data:{item:AK,order:AJ,breakBy:AL},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:")},e(AG,AH,"order")]},t(AN,AM)],fnOk:function(AO){return AI(AO.item,AO.order,[AO.breakBy]);}});},insertAddUnitToFilterMenu:function H(AL,AH,AG){var AJ=this,AI=mstrmojo.desc(2022,"Add to Filter"),AK=o.ensureArray(AG).filter(function(AM){return AJ.isValidAddToFP(AH,AM);});if(AK.length>0){AL.addMenuItem(AI,"",function(){AH.addFilterStackSelectors(AK);});}else{AL.addDisabledMenuItem(AI,"");}},isValidAddToFP:function N(AJ,AL){var AH=AJ.controller.view.builder,AI=AH.getLayoutVIMap(AJ.getCurrentLayoutKey()).getComponent(K.FILTER_STACK),AM;AM=(!AI||o.find(AI.getFilterDefinitions(),"srcid",AL.did)===-1);if(AM&&AL.lock){var AG=AL.fs||[],AK;AM=false;for(AK=0;AK<AG.length;AK++){if(AG[AK].iidx){AM=true;break;}}}return AM;},renameItem:function n(AL,AO,AH,AJ){var AK=AL.mstrmojoId,AN=mstrmojo.dom.findWidget(AL);AJ=AJ||{};if(!AK){var AM=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,text:AO.n,title:AO.dsc||"",allowEmptyText:AJ.allowEmptyText,cssClass:AJ.cssClass||"",placeholder:AL,onTextEditComplete:function AG(AP){if(AP){return AH(this);}},onmousedown:function AI(AP){if(this.isEditing){AP.cancel();}}});if(AN&&AN.draggable){AM.parent=AN;}AM.render();AK=AM.id;}mstrmojo.all[AK].set("isEditing",true);return mstrmojo.all[AK];},getMultipleMetricsCalculationMenus:function g(AN,AG,AQ){var AM=new mstrmojo.ui.menus.MenuConfig(),AS=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(AN),AK=function(AU,AV,AT){return{dsid:AG,funcType:AV,funcType2:AT,items:AU};};AM.useTooltip=true;AS.forEach(function(AT){AM.addMenuItem(AT.n,"",function(){AQ(AK(AN,AT.t));});});if(AN.length===2){var AL=mstrmojo.mstr.EnumFunction,AJ=AL.FunctionDivide,AH=AL.FunctionMinus,AP=AN[0],AO=AN[1],AR=function(AX,AV,AT,AW,AU){AM.addMenuItem(AX,"",function(){AQ(AK([AV,AT],AW,AU));});},AI=[{n:function(AU,AT){return AU.n+"/"+AT.n;},fn:AJ},{n:function(AU,AT){return AU.n+"-"+AT.n;},fn:AH},{n:function(AU,AT){return"("+AU.n+"-"+AT.n+")/"+AT.n;},fn:AH,fn2:AJ}];AI.forEach(function(AT){AM.addSeparator();AR(AT.n(AP,AO),AP,AO,AT.fn,AT.fn2);AR(AT.n(AO,AP),AO,AP,AT.fn,AT.fn2);});}return AM;},getCalculationMetricEditor:function L(AO,AP,AN){var AI=[{n:"",css:"operator-plus",funcType:l.FunctionPlus},{n:"",css:"operator-minus",funcType:l.FunctionMinus},{n:"",css:"operator-multiply",funcType:l.FunctionTimes},{n:"",css:"operator-divide",funcType:l.FunctionDivide},{n:"%",css:"operator-percent-diff",funcType:l.FunctionMinus,funcType2:l.FunctionDivide}],AJ={m1:AP.did,m2:AO[0].did,operator:l.FunctionPlus,u1:{id:AP.did,type:4},u2:null},AH=function(AQ){return{}.hasOwnProperty.call(AQ,"cst");},AM=function(AQ){return typeof AQ==="string"&&!!AQ.length&&!isNaN(Number(AQ));};var AG="this.parent.popupConfig.valid || this.selectedIndex !== -1 || (!!this.selectedNode && this.selectedNode.innerHTML.length === 0)",AL=function AL(){var AQ=this.parent.popupConfig;if(AQ){AQ.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[AB({metrics:AO,value:AJ.m1,propName:"u1",optionValueField:"did",bindings:{valid:AG},postkeyup:AL}),{scriptClass:"mstrmojo.ButtonListHoriz",items:AI,selectedIndex:0,postselectionChange:function AK(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},AB({metrics:AO,value:null,propName:"u2",optionValueField:"did",bindings:{valid:AG},postkeyup:AL})],data:AJ,okEnabled:false,bindings:{valid:function(){var AS=this.data.u1,AR=this.data.u2,AT=this.data.operator;if(!AS||!AR||!AT){return false;}var AQ=!(AH(AS)&&AH(AR))&&(!AH(AS)||AM(AS.cst))&&(!AH(AR)||AM(AR.cst));this.set("okEnabled",AQ);return AQ;}},fnOk:function(AQ){return AN(AQ.u1,AQ.u2,AQ.operator,AQ.operator2);}});},getFilterEditor:function F(AH){var AM="dfe",AL,AI={},AK=AH.datasetFilter;function AJ(AN){if(!AN.et){return false;}if(AN.et===AD.RLS){return false;}if(AN.p){return false;}if(AN.cs&&AN.cs.some(function(AO){return !!AO.p;})){return false;}return !AN.nds||AN.nds.every(AJ);}function AG(){o.forEach(AH.att,function(AO){if(AO.t!==12||AO.da){return ;}AI[AO.did]={did:AO.did,n:AO.n,t:AO.t,fs:AO.fs};});o.forEach(AH.mx,function(AO){if(AO.um){return ;}AI[AO.did]={did:AO.did,n:AO.n,t:AO.t};});if(AK){mstrmojo.expr.findTargets(AK,"did",AI);}var AN={expr:X.clone(AK),targets:X.valarray(AI)};AL=AM&&window.mstrmojo&&mstrmojo.all[AM];if(!AL){AL=mstrmojo.insert({id:AM,scriptClass:"mstrmojo.fe.ReportFilterEditor",showLimits:false,objectBrowsingEnabled:true});}if(AH.zIndex){AL.set("zIndex",AH.zIndex);}AL.set("title",mstrmojo.desc(12138,"Dataset Filter #").replace("#",AH.datasetName));AL.set("onSave",AH.fnOk);AL.set("model",AN);AL.onUpdateBrowseElementsParams=AH.browseParam;AL.open();}if(AK&&!AJ(AK)){mstrmojo.warn(mstrmojo.desc(13527,"The filter contains an advanced condition that cannot be edited."),{confirmBtn:{t:mstrmojo.desc(13528,"Clear existing filter"),fn:function(){AK=null;AG();}}},{title:mstrmojo.desc(11812,"Notification")});}else{AG();}},getCfgForAddUnitFromAllObject:function(AG,AH){var AI=null,AJ=null,AK=[],AL=function(AM,AN){if(!AN){return false;}return o.find((AN.att||[]).concat(AN.mx||[]),"did",AM.did)>-1;};X.forEach(AH,function(AN,AM){if(AN.idd){AI=AM;AJ=AN;return false;}return true;});if(!AI){AI="$GUID_141";AK.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[AI]});}o.forEach(AG,function(AM){if(!AL(AM,AJ)){AK.push({act:"addUnitToDataset",dsid:AI,unitId:AM.did,unitType:AM.t});}});return{actions:AK,dsid:AI};},getAggregateByMenu:function k(AL,AJ){var AH=new mstrmojo.ui.menus.MenuConfig(),AI=function(AP,AO){var AR,AQ;if(AO){var AN=AP.mexp.args[0];AR=AN.did;AQ=AN.t;}else{AR=AP.did;AQ=AP.t;}return{did:AR,t:AQ};},AG=this.getAvailableShortcutMetricFunctionsGroup(AL),AM=AL.mexp?AL.mexp.ft:null,AK=AL.mexp&&this.isAmongFunctions(AM,AG);AG.forEach(function(AN,AO){if(AO!==0){AH.addSeparator();}AN.forEach(function(AP){AH.addMenuItem(AP.n,"",function(){AJ(AI(AL,AK),AP.t);});});});return AH;},showObjectPicker:function j(AH,AG){var AI="object_picker";return function(){var AJ=mstrmojo.all[AI];if(!AJ){AJ=new mstrmojo.vi.ui.editors.ObjectPicker({id:AI});if(AG){AJ.supportedTypes=o.hash(AG);AJ.ob.browsableTypes="8,"+AG.join(",");}AJ.render();}else{if(AG){AJ.supportedTypes=o.hash(AG);AJ.ob.browsableTypes="8,"+AG.join(",");}AJ.browse();}AJ.OKFn=AH||mstrmojo.emptyFn;AJ.open();};},generateNumberFormat:function q(AL){var AG=T.DefaultFormat.FormattingNumber,AH=T.NumberFormatCategory,AJ=AL||{},AI=AJ.nct,AK=AI===AH.General&&AJ.nfs==="General";return{category:(AI===undefined||AK)?AH.Automatic:AI,decimalPlaces:AJ.ndp===undefined?2:AJ.ndp,thousandSeparator:AJ.nth?-1:0,currencySymbol:AJ.ncs||AG.CurrencySymbol,currencyPosition:AJ.ncp||AG.CurrencyPosition,format:AJ.nfs||"",negativeNumbers:AJ.nnn||AG.NegativeNumbers};},getNumberFormatEditor:function v(AJ,AI,AH){var AG=this.generateNumberFormat(AI),AK=X.clone(AG),AM=X.clone(AG);return new mstrmojo.ui.menus.EditorConfig({data:AK,bindings:{okEnabled:function(){return !(this.data.category===AM.category&&this.data.format===AM.format);}},cssClass:"NumberFormat-MenuEditor",contents:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",formatValue:AG,myData:AK,oldData:AM,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}}],fnOk:function AL(AN){if(!(AN.category===AM.category&&AN.format===AM.format)){return AH(AN,AM);}}});},getHighlightElementHandler:function(AI,AH,AG){return function(){D.toggleClass(AH,AG||"open",AI);};},getConfDataTypeMenuCfg:function y(AG,Ab,AT,Ao){var Aj="ToString",Aa="ToNumber",AY="ToDateTime",AS="keepOriginal",AJ="Default",Ak={ToString:3,ToNumber:2,ToDateTime:8},AO={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},AM="_pattern",Am="_func",AW="_bft",Ar="_state",Ap={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},AL={n:"Default",v:"Default"},Ah=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},AL],AI=[{n:mstrmojo.desc(13772,"Keep Original"),v:AS},{n:mstrmojo.desc(12276,"String"),v:Aj},{n:mstrmojo.desc(2052,"Date"),v:AY},{n:mstrmojo.desc(3434,"Number"),v:Aa}],AR=X.clone(AI).slice(1),AZ=Ab.fs.filter(function(At){return Ab.da||At.obf;}),As=AZ.length>1,AU=AZ.length>5,AN=false,Ai=false,Ac=[],Ag=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:")}],Aq={okEnabled:false},Al=function(){var At=false;AZ.forEach(function(Au){At=At||(Aq[Au.fnm+Am+Ar]!==Ap.UNCHANGED)||(Aq[Au.fnm+AM+Ar]!==Ap.UNCHANGED);});return At;},Ad=function(Av,Au){var At=0;if(Av.da){o.forEach([Aj,AY,Aa],function(Ay,Aw){var Ax=new RegExp("^\\s*"+Ay+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(Au.f);if(Ax&&Ax[2]){At=Aw+1;return false;}});}return At;},Af=function(Av,Au){var Aw=AJ;if(Ab.da){var At=new RegExp("^\\s*"+Au+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(Av.f);if(!mstrmojo.string.isEmpty(At&&At[1])){Aw=At[1];}}return Aw;},Ae=function(){return AU?this.parent.parent.parent:(As?this.parent.parent:this.parent);},AX=function(At){if(AU){At.formList.updateScrollbars();}},AK=function(A0,A1,Az){var At=A1.fnm,Aw=AU?A0.formList[A1.fnm+AM]:A0[A1.fnm+AM],Ax=As?Aw.children[1]:Aw,Ay=Aq[At+Am],Av=AN&&(Ay===AY||Ay===Aj),Au=Aw.visible!==Av;if(Au){Aw.set("visible",Av);if(Av){AX(A0);}else{Ax.hideTooltip();}}if(Az){Ax.set("text",Af(A1,Ay));Ax.set("items",Ay===AY?Ah:[AL]);}},AV=function(At){var Au=false;AZ.forEach(function(Av){if(Aq[Av.fnm+Am]===AY||Aq[Av.fnm+Am]===Aj){Au=true;return false;}});At.advancedLabel.set("visible",Au);},AH=function(Aw,Au,Ax,At){return{scriptClass:"mstrmojo.ui.Pulldown",items:Aw,alias:Ax.fnm+Am,selectedIndex:Au,onPopupWidgetOpened:function(){AX(Ae.call(this));},onitemSelected:function Av(A2,A0){var A1=Ae.call(this),A3=A1.data,A4=Ax.fnm,Az=A2.v,Ay=function(A5){if(A5){return(Aw.length===3?Ap.TO_UPDATE:Ap.TO_CREATE);}return Ap.UNCHANGED;};A3.set(A4+Am,Az);A3.set(A4+AM,Af(Ax,Az));A3.set(A4+AW,Az===AS?Ax.bftp:Ak[Az]);A3.set(A4+Am+Ar,Ay(A0!==Au));A3.set("okEnabled",Al());AK(A1,Ax,true);AV(A1);}};},AQ=function(Av,Aw,At){return{scriptClass:"mstrmojo.ui.SearchablePulldown",alias:Av.fnm+AM,useRichTooltip:true,visible:At,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){AX(Ae.call(this));},customizeSearchResult:function(Ax){if(o.find(Ax,"v","Default")===-1&&this.items.length>0){Ax.push(AL);}},onclick:function(Ax){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,Ax);this.set("isEditing",true);},updateData:function(Az){var Ax=Ae.call(this),Ay=Ax.data,A0=Av.fnm;Ay.set(A0+AM,Az);Ay.set(A0+AM+Ar,Aw!==Az?Ap.TO_UPDATE:Ap.UNCHANGED);Ay.set("okEnabled",Al());},onitemSelected:function Au(Ay,Ax){if(Ay){this.updateData(Ay.v);}},onkeyup:function(Ax){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,Ax);var Ay=this[this.editableSlot],Az=Ay.innerText||Ay.textContent;this.updateData(Az);},updateTooltipConfig:function(Ay){this.tooltipOpenDelay=Ay?500:0;var Ax=V.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:Ax.y-2,left:Ax.x+Ax.w+10};}};},An=function(A1,A0,At,Au,Az){var Aw=Ad(A1,A0),Ay=Af(A0,AI[Aw].v),Av=A0.fnm,Ax=AI;if(Aw>0){Ax=AR;Aw--;}Au[Av+AM]="";Au[Av+Am]="";Au[Av+AW]="";Au[Av+Am+Ar]=Au[Av+AM+Ar]=Ap.UNCHANGED;if(Az){At.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:Av+Am,children:[{scriptClass:"mstrmojo.Label",text:Av,useRichTooltip:true,updateTooltipConfig:function(A4){this.tooltipOpenDelay=A4?500:0;var A3=this.domNode;var A2=V.position(A3);if(A3.scrollWidth>A3.offsetWidth){this.richTooltip={content:A3.innerText,posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:A2.y-A2.h-10,left:A2.x-10};}}},AH(Ax,Aw,A0,true)]});At.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:Av+AM,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern")},AQ(A0,Ay,true)]});}else{At.push(AH(Ax,Aw,A0,false));At.push(AQ(A0,Ay,false));}};o.forEach(Ab.fs,function(At){if(AG.als&&AG.als.links[Ab.did+" "+At.fid]){Ai=true;return false;}});if(As){AZ.forEach(function(At){An(Ab,At,AU?Ac:Ag,Aq,true);});}else{An(Ab,AZ[0],Ag,Aq,false);}if(AU){Ag.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:Ac});}Ag.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var Au=this.parent,Av,At,Aw=true;AN=!AN;D.toggleClass(this.domNode,"expanded",AN);AZ.forEach(function(Ax){AK(Au,Ax,false);Av=AU?Au.formList[Ax.fnm+AM]:Au[Ax.fnm+AM];At=As?Av.children[1]:Av;if(Av.visible&&Aw&&!AU){Aw=false;At.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:Aq,cssClass:"ConfDataType-MenuEditor",contents:Ag,onOpen:function(){AX(this);},bindings:{okEnabled:"this.data.okEnabled"},fnOk:function AP(Av){var At=[],Ax=[],Au=false,Aw=function(A0,A1,Az){var A3=[],A2=function(A4){var A5=A4.ftk&&A4.ftk.slice(2,-2);if(!A5){return null;}while((A5.shift()).v!=="("){}return A5;},Ay=A2(Az)||[x(Ab,Az)];A3.push({v:"!",tp:33,lv:4});if(A0!==AS){A3.push({v:A0,oi:{did:AO[A0],t:11,st:2816,n:A0}});if(!mstrmojo.string.isEmpty(A1)&&A1!==AJ&&(A0===AY||A0===Aj)){A3.push({v:'<Pattern="'+A1+'">(',tp:"2",lv:1});}else{A3.push({v:"(",tp:"2",lv:1});}A3=A3.concat(Ay);A3.push({v:")",tp:"2",lv:1});}else{A3=A3.concat(Ay);}A3.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:A3});};if(Ai){Au=true;}else{AZ.forEach(function(Ay){if(Av[Ay.fnm+Am+Ar]===Ap.TO_CREATE){Au=true;return false;}else{if(Av[Ay.fnm+Am+Ar]===Ap.TO_UPDATE||(Av[Ay.fnm+AM+Ar]===Ap.TO_UPDATE&&(Av[Ay.fnm+Am]===AY||Av[Ay.fnm+Am]===Aj))){Ax.push(Ay);}}});}if(Au){AZ.forEach(function(Ay){At.push({n:Ay.fnm,formula:Aw(Av[Ay.fnm+Am],Av[Ay.fnm+AM],Ay),bft:Av[Ay.fnm+AW]});});Ao(Au,At);}else{if(Ab.da){W(AG.mid,Ab.did,Ax,function(Ay){Ay.forEach(function(Az){At.push({did:Az.fid,formula:Aw(Av[Az.fnm+Am],Av[Az.fnm+AM],Az),bft:Av[Az.fnm+AW]});});Ao(Au,At);});}}}});},getCreateTimeDAEditorCfg:function O(AK,AJ){var AI=function(AO){var AP=8,AQ=1,AN=o.filter(AO.fs,function(AR){return(AO.da||AR.obf)&&(AR.bftp===AP||AR.bftp===AQ);}),AM=o.find(AN,"idf",true);return AN[AM>=0?AM:0];},AG=AI(AK);if(!AG){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function AH(){var AM=false;X.forEach(this.selectedIndices,function(AN){if(AN){AM=true;return false;}});this.parent.data.set("okEnabled",AM);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function AL(AR,AS){var AW=AS.time_type,AV=AW.selectedIndices,AT=AW.items,AQ=[],AM=[],AN="@form",AP={Year:"6F7DF5F8449111D5BEA300B0D01A55EF",Quarter:"6F7DF5F7449111D5BEA300B0D01A55EF",Concat:"6F7DF5FF449111D5BEA300B0D01A55EF",QuarterStartDate:"59E10CE2ADDD4A6DAC2416A72999A9ED",Month:"6F7DF5F6449111D5BEA300B0D01A55EF",ToString:"D1ED29645DEC4DBF99E8E09ED939074B",MonthStartDate:"7C63D4E70B2741C3A5B54A2EFD40961B",Week:"6F7DF5F5449111D5BEA300B0D01A55EF",WeekStartDate:"44681336D0DB4E43AC333FFB3CC4400D",DayOfMonth:"6F7DF5F2449111D5BEA300B0D01A55EF",DayOfWeek:"6F7DF5F3449111D5BEA300B0D01A55EF",DayOfYear:"6F7DF5F4449111D5BEA300B0D01A55EF"},AU=function(AX){switch(AX){case"Year":return{ID:["Year","(",AN,")"]};case"Quarter":return{ID:["Year","(",AN,") * 10 + ","Quarter","(",AN,")"],DESC:["Concat",'("Q"',w," Quarter","(",AN,")",w,' ", "',w," Year","(",AN,"))"],DATE:["QuarterStartDate","(",AN,")"]};case"QuarterOfYear":return{ID:["Quarter","(",AN,")"],DESC:["Concat",'("Q"',w," This@ID)"]};case"Month":return{ID:["Year","(",AN,") * 100 + ","Month","(",AN,")"],DESC:["ToString",'<Pattern="mmm yyyy">(',AN,")"],DATE:["MonthStartDate","(",AN,")"]};case"MonthOfYear":return{ID:["Month","(",AN,")"],DESC:["ToString",'<Pattern="mmmm">(',AN,")"]};case"Week":return{ID:["Year","(",AN,") * 100 + ","Week","(",AN,")"],DESC:["Concat",'("W"',w," Week","(",AN,")",w,' ", "',w," Year","(",AN,"))"],DATE:["WeekStartDate","(",AN,")"]};case"WeekOfYear":return{ID:["Week","(",AN,")"]};case"DayOfMonth":return{ID:["DayOfMonth","(",AN,")"]};case"DayOfWeek":return{ID:["DayOfWeek","(",AN,")"],DESC:["ToString",'<Pattern="ddd">(',AN,")"]};case"DayOfYear":return{ID:["DayOfYear","(",AN,")"]};}},AO=function(AX,AZ,Ab){var Aa=[{v:"!",tp:33,lv:4}],AY;Ab.forEach(function(Ad,Ac){if(Ad===AN){Aa.push(x(AX,AZ));}else{AY=AP[Ad];if(AY){Aa.push({v:AY,oi:{did:AY,t:11,st:2816,n:AY}});}else{Aa.push({v:Ad,tp:"2",lv:1});}}});Aa.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:Aa});};X.forEach(AV,function(AX,AY){if(AX){AM=[];X.forEach(AU(AT[AY].v),function(AZ,Aa){AM.push({n:Aa,formula:AO(AK,AG,AZ),bft:(Aa==="DATE"?8:0)});});AQ.push({isTokenStream:true,forms:AM,name:AK.n+" ("+AT[AY].n+")"});}});return AJ(AQ);}});},RefreshAndCloseAllObjectBrowserCallback:function(AH,AG){return mstrmojo.func.wrapMethods(AG.getDatasetsUpdateCallback(),{success:function(){if(o.find(AH,"act","createDataset")!==-1){AG.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function a(AH,AJ,AG){var AI=null;X.forEach(AH,function(AL){var AK=AL.att||[];if(AG===4){AK=AL.mx||[];}o.forEach(AK,function(AM){if(AM.did===AJ){AI=AM;return false;}});if(AI){return false;}});return AI;},getDatasetFromId:function P(AG,AH){var AI=null;X.forEach(AG,function(AJ){if(AJ.did===AH){AI=AJ;return false;}});return AI;},getDatasetFromAttributeId:function P(AG,AH){var AI=null;X.forEach(AG,function(AJ){if(o.find(AJ.att,"did",AH)>=0){AI=AJ;return false;}});return AI;},getSortedDatasetUnits:function E(AG){var AH=function AH(AI){return AI.t===U.DssTypeMetric?2:1;};AG=AG.concat();AG.sort(function(AL,AJ){var AM=AH(AL)-AH(AJ),AK=AL.n.toUpperCase(),AI=AJ.n.toUpperCase();return AM!==0?AM:(AK!==AI?AK.localeCompare(AI):AL.n.localeCompare(AJ.n));});return AG;},getUnitCssClass:function(AH){var AG=AH.t;if(AH.fs&&AH.fs.length&&AH.fs.some(function(AI){return AI.fgr>0;})){AG+="g";}else{if((AH.dm||AH.um)||AH.da){AG+="d";}else{if(AH.de){AG+="de";}}}if((AH.t===47&&AH.st===12033)||(AH.t===12&&AH.st&&AH.st===3076)){AG+=(" st"+AH.st);}return"ic"+AG;},hasMultiForms:function i(AH,AG){return m.getFormsByAttrId(AH,AG).length>1;},getDisplayFormsMenu:function G(AS,AQ,AK,AP){var AO=[],AR=[],AJ=[],AM=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}];var AL=AQ.model.data,AG=AL.gts,AN;o.forEach((AG.row||[]).concat(AG.col||[]),function(AT){if(AT.id===AS.did){AR=AR.concat(AT.fs);}});AN=m.getFormsByAttrId(AS.did,AK);o.forEach(AN||[],function(AU){var AV=AU.fid;if(o.find(AO,"id",AV)<0){AO.push({id:AV,n:AU.fnm});var AT=o.find(AR,"id",AV);if(AT>-1){AJ[AO.length-1]=true;}}});return new mstrmojo.ui.menus.EditorConfig({data:{item:AS,oldSelected:X.copy(AJ,{})},contents:[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:AO,selectedIndices:AJ},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:")},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:AM,selectedIndex:o.find(AM,"v",AL.lnm||0),onitemSelected:function AH(AT){this.v=String(AT.v);}}],okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function AI(AY,Ac){var AX=Ac.fs,AV=AX.selectedIndices,Aa=AX.items,Ag=[],AZ=[],Ad=[];if(!AX.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var AU=AY.oldSelected,Af=AV,AW,Ab={},Ae={};for(AW=0;AW<Aa.length;AW++){if(AU[AW]&&!Af[AW]){Ab[AW]=true;}else{if(!AU[AW]&&Af[AW]){Ae[AW]=true;}}}X.forEach(Ab,function(Ah,Ai){if(Ah){AZ.push({act:"removeForm",unitId:AS.did,attFormId:Aa[Ai].id});}});var AT=AQ.model.data.gts;(AT.row||[]).concat(AT.col||[]).forEach(function(Ah){if(Ah.id===AS.did){(Ah.fs||[]).forEach(function(Ai){if(o.find(AO,"id",Ai.id)<0){AZ.push({act:"removeForm",unitId:AS.did,attFormId:Ai.id});}});}});X.forEach(Ae,function(Ah,Ai){if(Ah){Ag.push({act:"addForm",unitId:AS.did,attFormId:Aa[Ai].id,unitPos:0});}});Ad.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:Ac.longNames.v});if(AP){AP([{act:"updateTemplate",keyContext:AQ.k,partialRetrieval:{nodes:[AQ.k]},actions:AZ.concat(Ag).concat(Ad)}]);}}});},getAttributeLinkMenu:function d(AS,AV,AQ,AU,AL){var AW=-2147483648,AN=AU.datasets,AO=AN[AQ],AT=AO.tables||[],AG={},AP=[],AJ=(AV.fs&&AV.fs[0])||{},AR=[],AM=779,AI=AV.art>1,AH=!AI&&X.keyarray(AN).length>1,AK=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:AV,docModel:AU,datasetId:AQ});};if((AO.st!==AM)||AT.length<=1||AV.da){if(AH){AS.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AK);}return ;}o.forEach(AO.att,function(AZ){var Aa=true,AY=null,AX=(AZ.fs&&AZ.fs[0])||{};if(AZ.da){return ;}if(AJ.der===AW||AX.der===AW||AJ.fgr===-1||AX.fgr===-1||AJ.ftr===-1||AX.ftr===-1){return ;}if(AJ.fgr&&AX.fgr&&AJ.fgr!==AX.fgr){return ;}if(AJ.ftr&&AX.ftr&&AJ.ftr!==AX.ftr){return ;}o.forEach(AT,function(Ab){var Ac=o.find(Ab.attRefs,"did",AV.did),Ad=o.find(Ab.attRefs,"did",AZ.did);if(Ac>=0&&o.indexOf(AP,Ab.did)<0){AP.push(Ab.did);}if(Ad>=0){AY=Ab.did;}if(Ac>=0&&Ad>=0){Aa=false;}});if(Aa&&!AZ.hide){AG[AZ.did]=AY;AR.push(AZ);}});if(AR.length>0&&AO.hcs!==true){AS.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:AR,listHooks:{select:function AX(AY,AZ){AU.warnForEditStandaloneDS(AO,function(){o.forEach(AP,function(Aa){I({dsid:AQ,srcId:AV.did,srcTableId:Aa,tgtId:AZ.did,tgtTableId:AG[AZ.did]},AU,AL);});});}}}]}]});});}if(AH){AS.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AK);}},isDocumentLevelItem:function p(AG){return AG&&(AG.um||AG.da||(AG.t===47&&AG.st===12033));},isLegalObjectName:function Q(AG){var AH=/["\[\]\\]/g;if(AG.match(AH)){return false;}return true;},validateName:function f(AH,AI,AG){if(this.isLegalObjectName(AH)){AI();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),AG,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AF(AG){return AG.att.some(function(AI){var AK=(AI.t===1||AI.t===47),AJ=(AI.t===12&&AI.de),AH=(AI.t===47&&AI.st===12033);return(AK&&!AH||AJ);});},hasOldDEOverDatasets:function(AJ,AI){var AH=false,AG;X.forEach(AI,function(AK){AG=o.find((AK.att||[]),"did",AJ);if(AG!==-1&&AK.att[AG].de){AH=true;return false;}});return AH;},getMarkGeoRoleEditorCfg:function AC(AG,As,Aa,AX,A1,A3){var AW=268435456,Ay=536870912,AL=1073741824,Ak=268435456,Av=805306368,Aq=805306368,Ae=1879048192,A2=-2147483648,At=0,Au=1,AN=2,AV=3,AZ=4,AT=5,A0=6,AQ=7,Ac=8,Ab=9,Am=10,AJ=2,Aj=3,Ar={v:At,n:mstrmojo.desc(2057,"None")},A4={v:AV,n:mstrmojo.desc(7674,"Country"),der:AW},Ap={v:AN,n:mstrmojo.desc(7676,"State"),parents:[A4],der:Ay},AR={v:Ab,n:mstrmojo.desc(12919,"County"),parents:[A4,Ap]},Aw={v:Au,n:mstrmojo.desc(7675,"City"),parents:[A4,Ap],der:AL},Af={v:Ac,n:mstrmojo.desc(7677,"Zip Code"),parents:[A4,Ap,Aw]},AY={v:AT,n:mstrmojo.desc(7696,"Latitude")},An={v:A0,n:mstrmojo.desc(7697,"Longitude")},AU={v:AZ,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},Ai={v:Am,n:mstrmojo.desc(12973,"Area Code")},Al={v:AQ,n:mstrmojo.desc(2056,"Custom")},AS={ID:[Ar,A4,Ap,AR,Aw,Af,AY,An,AU,Ai,Al],ID_NUMERIC:[Ar,Af,Ai,AY,An],NON_ID:[Ar,A4,Ap,AR,Aw,Af,AU,Ai,Al],NON_ID_NUMERIC:[Ar,Af,Ai]},Ag=o.filter(As.fs,function(A5){return(A5.bftp===AJ||A5.bftp===Aj)&&A5.der!==A2;});var Ao=(Ag.length>1),AI=o.find(Ag,"idf",true),AK=(AI===-1?0:AI),Ah=Ag[AK],AP,AH,Ad,AM=[],AO=function(A5){var A6=(A5.idf?"ID":"NON_ID")+(A5.bftp===AJ?"_NUMERIC":"");return AS[A6];},Az=function(A6,A5){return o.find(AO(A5),"v",A6);};if(Ag.length===0||o.find(As.fs,"fgr",-1)!==-1||Ah.der===A2){return null;}o.forEach(Ag,function(A7,A5){var A6=X.clone(A7);A6.n=A6.fnm;AM.push(A6);if(A7.fgr){Ah=A6;AK=A5;}});AP=Ah.fid;Ad=Ah.fgr||0;AH=Az(Ad,Ah);return new mstrmojo.ui.menus.EditorConfig({data:{item:As,geoForm:Ah,geoRole:Ad},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:Ao},{scriptClass:"mstrmojo.ui.Pulldown",items:AM,selectedIndex:AK,alias:"formList",visible:Ao,onitemSelected:function Ax(A7){var A5=this.parent.data,A6=this.parent.geoRoleList;if(A5.geoForm.fid!==A7.fid){A5.set("geoForm",A7);A5.set("geoRole",A7.fgr);A6.set("items",AO(A7));A6.set("selectedIndex",Az(A7.fgr,A7));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:Ao,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:")},{scriptClass:"mstrmojo.ui.Pulldown",items:AO(Ah),selectedIndex:AH,alias:"geoRoleList",onitemSelected:function Ax(BB){var BA=this.parent,A5=BA.data,BC=BA.geoDrvList;var A7=[],A9=[],A6=Ah.der,A8;A5.set("geoRole",BB.v);o.forEach(BB.parents,function(BD,BE){A8=BD;A7.push({n:A8.n,der:A8.der});if((A6&A8.der)!==0){A9[BE]=true;}});BC.set("items",A7);BC.set("selectedIndices",A9);o.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(BD){BA[BD].set("visible",A7.length>0);});}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(A8,A7){var A5=function(BE){var BD=function(BI){var BJ="<mpcs>";o.forEach(BI,function(BK){BJ+='<mpc did="'+BK.did+'" n="'+BK.n+'" georole="'+BK.georole+'" drvflg="'+BK.drvflg+'" />';});BJ+="</mpcs>";return BJ;},A9=function(BI,BK,BM,BJ){var BL=function(BQ,BN,BP){var BO=R(BE,BQ,BN),BR=h(BO,BP);return BR&&BR.did;};A1.forEach(function(BN,BO){var BP=BL(BN.did,As.did,BK.fid);if(BP){BI[BO]=BI[BO]||[];BI[BO].push({did:BP,n:BK.fnm,georole:BM,drvflg:BJ});}});},BB=[],BH=[],BF=A7.geoDrvList,BA=0,BC=false,BG={2:Ak,1:Av,9:Aq,8:Ae}[A8.geoRole]||0;X.forEach(BF.selectedIndices,function(BJ,BI){if(BJ){BA|=BF.items[BI].der;}});BA&=BG;if(Ah.fgr!==A8.geoRole||Ah.fid!==A8.geoForm.fid||Ah.der!==BA){if(Ao&&Ah.fid!==A8.geoForm.fid){if(Ah.fgr!==At){A9(BH,Ah,At,0);if(Ah.der>0){BC=true;}}}if(A8.geoForm.fgr!==A8.geoRole||A8.geoForm.der!==BA){A9(BH,A8.geoForm,A8.geoRole,BA);if((BA&A8.geoForm.der)!==A8.geoForm.der){BC=true;}}if(BH.length>0){BH.forEach(function(BJ,BI){BB.push({act:"changeEMMAMapping",dsid:Aa,tbid:A1[BI].did,mapping:BD(BJ)});});A3(BB,BC);}}},A6=function(){C(AG.mid,Aa,{success:A5});};if(!AX){mstrmojo.warn(mstrmojo.desc(15445,"Modifications to this dataset will affect other reports, documents, and dossiers that share the dataset. Do you want to continue?"),{},{buttons:[s(mstrmojo.desc(219,"Yes"),function(){A6();},true,{width:"60px"}),s(mstrmojo.desc(221,"Cancel"),function(){})]});}else{A6();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.threshold.ThresholdModel","mstrmojo.threshold.SimpleThresholdEditor","mstrmojo.threshold.AdvancedThresholdEditor");var E=mstrmojo.hash,A="mstrmojo-simple-threshold-editor",C="mstrmojo-advanced-threshold-editor",G=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES;mstrmojo.threshold.ThresholdController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.ThresholdController",metricId:undefined,data:undefined,model:undefined,targets:undefined,editor:undefined,messageId:undefined,datasets:undefined,dataService:undefined,onSubmitActions:mstrmojo.emptyFn(),onSaveThresholds:mstrmojo.emptyFn(),onLoadThresholds:mstrmojo.emptyFn(),supportsFeature:function F(H){return true;},init:function D(H){this._super(H);this.model=new mstrmojo.threshold.ThresholdModel({controller:this});},openEditor:function B(){var L=this.data;if(!L){throw new Error("Visualization data not provided.");}var I=this.metricId,H=this.objectType,M=this.model,P=this.messageId,N;M.set("data",E.clone(L));M.metricId=I;M.objectType=H;var O=M.isAdvanced(I),J=M.editorMode,K=J===G.SIMPLE_EDITOR;if(J===G.ADVANCED_EDITOR||(!K&&O)){N=mstrmojo.all[C]||new mstrmojo.threshold.AdvancedThresholdEditor({id:C,onUpdateBrowseElementsParams:function Q(T){var S,R=this.controller.datasets,U=function(V){return V.did===T.attributeID;};for(S in R){if(R[S].att.filter(U).length>0){T.datasetID=S;break;}}T.messageID=P;T.templateNodeKey=L.k;}});}else{if(O){M.clearData();}N=mstrmojo.all[A]||new mstrmojo.threshold.SimpleThresholdEditor({id:A});}this.editor=N;N.set("model",M);N.set("controller",this);N.set("metricId",I);N.set("objectType",H);N.set("title",this.title);N.set("targets",this.targets);N.open();this.addDisposable([M,N]);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.models.template.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus.EditorConfig","mstrmojo.Button","mstrmojo.Label","mstrmojo.ui.CheckList","mstrmojo.ui.Pulldown","mstrmojo.models.datasets.DataInterface","mstrmojo.vi.models.VIComponentMap","mstrmojo.threshold.ThresholdController","mstrmojo.threshold.ThresholdModel","mstrmojo.chart.model.enums.EnumDSSAxisName","mstrmojo.chart.model.enums.EnumDSSDynamicShortcut","mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes");var Z=mstrmojo,L=Z.array,Q=Z.hash,AI=mstrmojo.chart.model.enums.EnumDSSObjectType,c=Z.vi.ui.DatasetUnitMenuUtils,U=mstrmojo.models.datasets.DataInterface,AE=Z.vi.models.VIComponentMap,G=1,AD=2,F=3,AK=4,N=5,y=6,f=7,M=8,q=9,AN=10,A=11,v=12,D="00000000000000000000000000000000",AB=-1,a=mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap,x=mstrmojo.chart.model.enums.EnumDSSAxisName,AS=mstrmojo.chart.model.enums.EnumDSSDynamicShortcut,P=mstrmojo.mstr.EnumDSSXMLBaseFormType,S=mstrmojo.mstr.EnumDSSXMLObjectTypes;function T(AX){var AY=this.getHost(),AZ=AY.model.data.gsi;return AZ.cols.concat(AZ.rows).filter(function(Aa){return Aa.t===AX;});}function u(AX,AZ,AY){return{act:"updateTemplate",keyContext:AX.k,partialRetrieval:{nodes:AY?null:[AX.k]},actions:AZ};}function AJ(Ab,AZ,AY){var Ad=[];if(AZ.useDropzone){Ab.useDropzone=true;Ab.dropzoneId=AZ.zone.id;if(AZ.item.ax!==undefined){Ab.ax=AZ.item.ax;}}Ab.position=AZ.idx+1+(AY.offset||0);if(AY.replaceSourceId){Ab.replaceSourceId=AY.replaceSourceId;}Ab.partialRetrieval={nodes:[Ab.nodeKey]};Ad.push(Ab);var Ac="$GUID_115",Aa=[],AX=this.checkAndAddThresholdAction(AZ.zone.id,{did:Ac,t:4},Aa);if(AX){Ab.newObjectIds=[Ac];Ad.push(this.getUpdateTemplateAction(Aa));}return Ad;}function AW(Aa){var AX=this.getHost().model.data.datasetId,AZ=L.ensureArray(Aa),AY=L.hash(AZ);if(!AX){Q.forEach(this.docModel.datasets,function(Ad,Ae){var Ab=(Ad.att||[]).concat(Ad.mx||[]),Ac=Ab.some(function(Af){return AY[Af.did];});if(Ac){AX=Ae;return false;}});}return AX;}function AO(AX,Ab,AY){var Ae=this,Ai=this.docModel,Ad=AX.item,Ag=c.getUnitFromDataset(Ae.docModel.datasets,Ad.did,Ad.t)||Ad,Aj=this.getHost(),Af=Ae.docModel.getDataService(),Ac=Ab==="edit",AZ,Aa={dsid:Ac?Ai.findDatasetIdFromUnit(Ag.did):AW.call(Ae,Ag.did),alias:Ag.alias||Ag.n},Ah=null;if(Ag.t===4){if(Ac){AZ={metricId:Ag.did,action:{cmd:Ab,n:Ag.n,alias:Ad.n}};Aa.did=Ag.did;Aa.nodeKey=Aj.k;Ah=Af.getEditDerivedMetricSubmitFunc(Aa);}else{AZ={metricId:"",action:{cmd:Ab,refOi:{did:Ag.did,n:Ag.n}}};Aa.nodeKey=Aj.k;Aa.idx=AX.idx;Aa.host=Aj;Aa.zoneid=AX.zone.id;if(AY){Aa.replace={did:Ag.did,t:Ag.t};}if(AX.useDropzone){Ah=Af.getAddNewDerivedMetricToDropzoneSubmitFunc(Aa);}else{Ah=Af.getAddNewDerivedMetricToXtabSubmitFunc(Aa);}}if(Ae.docModel.isFromSolrCube(Ag.did)||Ae.docModel.isFromMDXCube(Ag.did)){AZ.disableAFB=true;}Ae.docModel.controller.openDME(Aj,AZ,Ah);}}mstrmojo.vi.models._DropZoneCommon=mstrmojo.provide("mstrmojo.vi.models._DropZoneCommon",{_mixinName:"mstrmojo.vi.models._DropZoneCommon",isMetric:function e(AX){return AX&&AX.t===S.Metric&&AX.id!==D;},isAttribute:function z(AX){return AX&&AX.t===S.Attribute;},isRecursiveAttribute:function Y(AX){return AX&&AX.t===S.Attribute&&AX.st===3076;},isNewDerivedElement:function AF(AX){return AX.t===S.Consolidation&&AX.st===12033;},isConsolidation:function AQ(AX){return AX.t===S.Consolidation&&AX.st===12032;},isCustomGroup:function C(AX){return AX.t===S.Filter;},isAttrCategory:function V(AX){return AX&&(AX.t===S.Attribute||AX.t===S.Filter||AX.t===S.Consolidation);},isMetricName:function AM(AX){return AX&&(AX.id===D||AX.did===D);},differInType:function R(AY,AX){return(this.isMetric(AY)&&this.isAttrCategory(AX))||(this.isAttrCategory(AY)&&this.isMetric(AX));},isDynamicLink:function H(AY){if(this.isAttribute(AY)){var AX=AY.fs||U.getFormsByAttrId(AY.did,this.docModel.datasets);return AX.length===2&&AX[1].bftp===P.DssXmlBaseFormHTMLTag&&AX[1].fnm==="DYNAMICLINK";}return false;},getZoneModelByZoneId:function(AX){var AY=this.dropZones,AZ;L.forEach(AY,function(Aa){if(Aa.id===AX){AZ=Aa;return false;}});return AZ;},hGetItemOccurrence:function(Ab,Ad){Ad=Ad||[];if(Ad.length===0){Ad=[G,AD,F,AK,f,N,M,q,y,AN];}var AZ,AX,AY,Ac=Ad.length,Aa=[];for(AZ=0;AZ<Ac;AZ++){AY=this.getZoneModelByZoneId(Ad[AZ]);if(!AY){continue;}AX=this.getUnitIndexInZone(AY,Ab);if(AX!==-1){Aa.push({zoneId:Ad[AZ],itemIndex:AX});}}return Aa;},removeColorByItemFromBreakByIfExists:function w(Aa,Ac){var Ab,AZ,AX,AY;Ab=this.hGetItemOccurrence(Aa,[G,AD,F,AK,N,M,y]);if((Ab.length===1)&&(Ab[0].zoneId===N||Ab[0].zoneId===y)){AZ=Ab[0];AX=this.getZoneModelByZoneId(AZ.zoneId);AY=AX.items[AZ.itemIndex];if(AY.hidden){Ac.push(this.getRemoveDropZoneUnitAction(AX,AY));}}},updateBreakByAndSliceUnits:function h(){var AX=this,AZ=[G,AD,F,AK,f,M,A,v],AY=this.getZoneModelByZoneId(y)||this.getZoneModelByZoneId(N),Aa;AY.items.forEach(function(Ab){if(AX.isAttrCategory(Ab)||AX.isMetricName(Ab)){Aa=AX.hGetItemOccurrence(Ab,AZ);if((Aa.length===1)&&(Aa[0].zoneId===f)){Ab.hidden=true;}}});},getAxisSummary:function AG(){var AX={};AX[F]=this.getItemCountInZone(F);AX[AK]=this.getItemCountInZone(AK);AX[AN]=this.getItemCountInZone(AN);return AX;},getItemCountInZone:function(AX){var AY=this.getZoneModelByZoneId(AX);if(AY){return AY.items.length;}return 0;},isOnlyMetricZone:function d(AX){var AZ,Ab,Aa,AY=this.getZoneModelByZoneId(AX);if(!AY){return false;}Aa=AY.items;Ab=Aa.length;if(Ab===0){return false;}for(AZ=0;AZ<Ab;AZ++){if(!this.isMetric(Aa[AZ])){return false;}}return true;},isMetricZone:function t(AX){var AZ,Ab,Aa,AY=this.getZoneModelByZoneId(AX);if(!AY){return false;}Aa=AY.items;Ab=Aa.length;if(Ab===0){return false;}for(AZ=0;AZ<Ab;AZ++){if(!this.isMetric(Aa[AZ])){if(this.isMetricName(Aa[AZ])){continue;}else{return false;}}}return true;},getMetricCntInZone:function(AX){var AZ=this,AY=this.getZoneModelByZoneId(AX),Ab=AY.items,Aa=0;L.forEach(Ab,function(Ac){if(AZ.isMetric(Ac)){Aa++;}});return Aa;},isAttrCategoryZone:function(AX){var AZ,Ab,Aa,AY=this.getZoneModelByZoneId(AX);if(!AY){return false;}Aa=AY.items;Ab=Aa.length;if(Ab===0){return false;}for(AZ=0;AZ<Ab;AZ++){if(!this.isAttrCategory(Aa[AZ])&&!this.isMetricName(Aa[AZ])){return false;}}return true;},showNumberFormat:function(AX){return mstrmojo.all[this.hostId].model.showNumberFormat(AX);},renameItem:function(AY,AX){var AZ=this.id;c.renameItem(AY,AX,function(Ad){var Af=mstrmojo.all[AZ],Ai=Af.getHost(),Ac=Af.getHostModel().gsi,Ae=Ad.text.trim(),Aj=AX.t===4,Ab=Aj?Ac.mx:Ac.rows.concat(Ac.cols),Ah=function(){Af.submitDropZoneUpdates(u(Ai,[{act:"renameUnit",id:AX.did,type:AX.t,name:Ae,isDynamicAlias:AX.t===4}]));},Aa=function(){Ad.set("text",AX.n);},Ag=Ab.some(function(Ak){return Ak.did!==AX.did&&(Aj||Ak.t===AX.t)&&Ak.n===Ae;});if(Ag){mstrmojo.warn(mstrmojo.desc(11664,'"##" already exists in the visualization. Do you want to proceed?').replace("##",Ae),{confirmBtn:{fn:Ah},cancelBtn:{fn:Aa}});}else{Ah();}},{allowEmptyText:true,cssClass:AY.className});},getPageByUnit:function AT(){var AY=this.getHost(),AX=AY.builder.getLayoutVIMap(AY.defn._lkz).getComponent(AE.TYPES.PAGEBY_PANEL);return AX&&AX.unit;},shouldShowDisplayFormsMenu:function E(Aa){if(!this.isAttribute(Aa)||this.isDynamicLink(Aa)){return false;}var AX=U.getFormsByAttrId(Aa.did,this.docModel.datasets),Ab=this.getHost().model.data,AY=Ab.gts,AZ=AX.length>1;if(AX.length===1){var Ac=false;L.forEach((AY.row||[]).concat(AY.col||[]),function(Ad){if(Ad.id===Aa.did&&L.find(Ad.fs||[],"id",AX[0].fid)>-1){Ac=true;return false;}});if(!Ac){AZ=true;}}return AZ;},getDisplayFormsMenu:function(AY){var AX=this;return c.getDisplayFormsMenu(AY,AX.getHost(),AX.docModel.datasets,function(AZ){AX.submitDropZoneUpdates(AZ);});},editDerivedMetric:function(AX){AO.call(this,AX,"edit");},newDerivedMetric:function(AY){var AX=mstrmojo.all[this.hostId].zonesModel.allowInsertNewMetric(AY.zone);if(AY.zone.id===f){AX=false;}AO.call(this,AY,"editNew",!AX);},newDerivedAttribute:function b(Ac,AY){var Ad=Ac.item,Ab=c.getUnitFromDataset(this.docModel.datasets,Ad.did,Ad.t)||Ad,Aa=this.getHost(),AZ=this,AX={forceRefresh:true,alias:"New Attribute",precreate:function(Af){if(AZ.getAddItemActions){var Ae=AZ.getAddItemActions(Ac.zone,[{did:"$GUID_1",t:12}]);Af.newObjectIds=["$GUID_1"];if(AY){Ae=[AZ.getRemoveDropZoneUnitAction(Ac.zone,Ab)].concat(Ae);}Af=[Af,{act:"updateTemplate",keyContext:Aa.k,actions:Ae}];}else{Af=Q.copy({act:"addDAToTemplate",nodeKey:Aa.k,treeType:Aa.defn.tt},Af);if(Ac.useDropzone){Af.useDropzone=true;Af.dropzoneId=Ac.zone.id;if(Ac.item.ax!==undefined){Af.ax=Ac.item.ax;}if(AY){Af.replaceSourceId=Ab.did;}}else{Af.axis=Ac.axis;}}return Af;}};this.docModel.controller.openDAE(this,AX,mstrmojo.emptyFn,Ab);},newDynamicLinkAttr:function s(Ac,AY){var Ad=Ac.item,Ab=c.getUnitFromDataset(this.docModel.datasets,Ad.did,Ad.t)||Ad,Aa=this.getHost(),AZ=this,AX={forceRefresh:true,alias:"New Link",precreate:function(Af){if(AZ.getAddItemActions){var Ae=AZ.getAddItemActions(Ac.zone,[{did:"$GUID_1",t:12}]);Af.newObjectIds=["$GUID_1"];if(AY){Ae=[AZ.getRemoveDropZoneUnitAction(Ac.zone,Ab)].concat(Ae);}Af=[Af,{act:"updateTemplate",keyContext:Aa.k,actions:Ae}];}else{Af=Q.copy({act:"addDAToTemplate",nodeKey:Aa.k,treeType:Aa.defn.tt},Af);if(Ac.useDropzone){Af.useDropzone=true;Af.dropzoneId=Ac.zone.id;if(Ac.item.ax!==undefined){Af.ax=Ac.item.ax;}if(AY){Af.replaceSourceId=Ab.did;}}else{Af.axis=Ac.axis;Af.pos=Ac.idx+2;}}return Af;}};this.docModel.controller.openDynamicLinkEditor(this,AX,mstrmojo.emptyFn,Ab);},editDerivedAttribute:function(Aa){var Af=this.getHost(),Ac=Aa.item,Ae=c.getUnitFromDataset(this.docModel.datasets,Ac.did,Ac.t)||Ac,AY=this.docModel.findDatasetIdFromUnit(Ae.did),Ab={dsid:AY,did:Ae.did,n:Ae.n,alias:Ac.n,forms:Ae.fs,preupdate:function(Ah){var Ag=Ah.name;Ah.name=Ae.n;Ah=[Ah,u(Af,[{act:"renameUnit",id:Ae.did,type:12,name:Ag}],true)];return Ah;}};var AZ=window&&window.event,Ad=!!(AZ.ctrlKey&&AZ.altKey),AX=Ab.forms||[];if(this.isDynamicLink(Ac)&&!Ad){this.docModel.controller.openDynamicLinkEditor(this,Ab,mstrmojo.emptyFn);}else{this.docModel.controller.openDAE(this,Ab,mstrmojo.emptyFn);}},getTemplateAttributes:function g(){return T.call(this,12);},getTemplateHierarchies:function W(){return T.call(this,14);},getTemplateDEs:function AP(){var AX=this.getHost(),AY=AX.model.data.gsi;return AY.cols.concat(AY.rows).filter(function(AZ){return AZ.st===12033;});},getUnitInfoInTemplate:function j(AY){var AZ={},AX=this.getHost().model.data.gts;[{axis:G,name:"row"},{axis:AD,name:"col"}].forEach(function(Aa){L.forEach(AX[Aa.name],function(Ac,Ab){if(Ac.id===AY){AZ.axis=Aa.axis;AZ.axisName=Aa.name;AZ.tplIdx=Ab;AZ.unit=Ac;return false;}});});return AZ;},sortGrid:function n(Ad,Ab){var Ae=this.getHost(),Aa=Ad.t,Ac=Ad.did,AX=null,AZ=null;if(Aa===AI.DssTypeMetric){AZ=["","","",1];}else{AX=this.getUnitInfoInTemplate(Ad.did);AZ=[AX.unit.fid||(AX.unit.fs&&AX.unit.fs[0].id),"21","",AX.axis];}var Af=AX?AX.axis:G,AY=Ae.model.data.gts[(Af===G?"row":"col")+"SubPos"];Ae.controller.onSort(Ae,Ae.model.getSortGridAction(AY,[Aa,Ac].concat(AZ).join("!"),Af,Ab));},addSortMenu:function X(AX,Aa,Ae){var Ac=this,Af=this.getHost(),Ag=AX.item,AY=Af.model.data,Ad=AY.gsi.tma,Ab=Q.copy(Ag);if(Ag.t===AI.DssTypeFilter){return ;}if(Ag.t===AI.DssTypeDimension){L.forEach((AY.gts.row||[]).concat(AY.gts.col||[]),function(Ai){if(Ai.hid===Ab.did){Ab.did=Ai.id;Ab.t=Ai.otp;return false;}});}if(AX.axis!==AB||Ad!==G){Aa.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",function(){Ac.sortGrid(Ab,true);});Aa.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",function(){Ac.sortGrid(Ab,false);});}if(Ae){Aa.addMenuItem(mstrmojo.desc(11099,"Advanced Sort..."),"xt",function(){var Ai=AX.axis;if(Ai===AB){Ai=Ad;}Af.controller.onGetAdvSortData(Af,Ai,Ab.t);});}else{var AZ=AY.gsi.sorts.some(function(Ai){return !!Ai.length;}),Ah=mstrmojo.desc(11699,"Clear Sort");if(AZ){Aa.addMenuItem(Ah,"",function(){Ac.submitDropZoneTemplateUpdates([{act:"clearSort"}]);});}}},convertToMetric:function k(Ad){var Ac=this.getHost(),AX=Ac.model&&Ac.model.data&&Ac.model.data.datasetId,AZ=Ac.k,Ab=Ac.defn.tt,Aa=Ad.item;if(!AX){mstrmojo.hash.forEach(this.docModel.datasets,function(Af,Ag){if(mstrmojo.array.find((Af.att||[]),"did",Aa.did)!==-1){AX=Ag;return false;}});}var AY=mstrmojo.mstr.EnumFunction,Ae=AJ.call(this,{act:"addShortcutMetric",nodeKey:AZ,treeType:Ab,funcType:Aa.formType===2?AY.FunctionSum:AY.FunctionCount,units:[{id:Aa.did,type:Aa.t}],dsid:AX,replaceSourceId:Aa.did},Ad);this.submitActionForDatasetUpdate(Ae);},getAddMetricNameAction:function(Ag,Ac){if(!this.gmZones){return null;}var Ae=this,AY=0,Ad=false,Ab,AX=Ae.gmZones.getZoneModelByZoneId((Ac===G)?AK:F),Af={n:"Metric Names",did:D,t:0},Aa=Q.clone(Af),AZ=Ae.gmZones.hGetItemOccurrence(Aa,[G,AD,F,AK,f]);L.forEach(AX.items,function(Ah){if(Ae.isMetric(Ah)){AY++;}});if(AZ.length===0&&AY<=1){Ad=true;}if(Ad){Ab={act:"updateTemplate",keyContext:Ag.k,actions:Ae.gmZones.getUpdateMetricNameUnitActions(Ad,Ac)};}return Ab;},getAggregateByMetricSubMenu:function(AY){var Ac=this,Ab=AY.item,Ae=c.getUnitFromDataset(this.docModel.datasets,Ab.did,Ab.t)||Ab,AX=this.id,Af=this.getHost(),Aa=Af.k,AZ=Af.defn.tt,Ad=this.submitActionForDatasetUpdate;return c.getAggregateByMenu(Ae,function(Aj,Ah){var Ag=Ac.allowInsertNewMetric(AY.zone),Al=[];if(AY.zone.id===f){Ag=false;}if(Ag&&AY.useDropzone&&Ac.gmZones){var Ak=Ac.gmZones.getZoneModelByZoneId((AY.zone.id===AK)?G:AD);var Ai=Ac.getAddMetricNameAction(Af,Ak.id);if(Ai){Al.push(Ai);}Ai=Ac.gmZones.getUpdateGroupInfoActionForNewMetric(AY.zone.id,AY.idx+1,Ab.ax===0);if(Ai){Al.push(Ai);}}Ad.call(mstrmojo.all[AX],Al.concat(AJ.call(Ac,{act:"addShortcutMetric",dsid:AW.call(Ac,Ae.did),nodeKey:Aa,treeType:AZ,funcType:Ah,units:[{id:Aj.did,type:Aj.t}]},AY,{offset:Ag?1:0,replaceSourceId:Ag?null:Ae.did})));});},getCalculationEditorCfg:function AL(AX){var Ac=this,Ae=this.getHost(),Ab=this.submitActionForDatasetUpdate.bind(this),Aa=Ae.k,Ad=Ae.model.data.gsi,AY=Ae.defn.tt,Af=Ac.allowInsertNewMetric(AX.zone),AZ=[];if(AX.zone.id===f){Af=false;}return c.getCalculationMetricEditor(Ad.mx,AX.item,function(Ah,Ag,Al,Ai){if(Af&&AX.useDropzone&&Ac.gmZones){var Ak=Ac.gmZones.getZoneModelByZoneId((AX.zone.id===AK)?G:AD);var Aj=Ac.getAddMetricNameAction(Ae,Ak.id);if(Aj){AZ.push(Aj);}Aj=Ac.gmZones.getUpdateGroupInfoActionForNewMetric(AX.zone.id,AX.idx+1,AX.item.ax===0);if(Aj){AZ.push(Aj);}}Ab(AZ.concat(AJ.call(Ac,{act:"addShortcutMetric",dsid:AW.call(Ac,AX.item.did),nodeKey:Aa,treeType:AY,funcType:Al,funcType2:Ai,units:[Ah,Ag]},AX,{offset:Af?1:0,replaceSourceId:Af?null:AX.item.did})));});},submitAddShortcutMetric:function(Ad,Ao){var Aq=this,Aj=Aq.id,Ah=this.getHost(),AY=Ah.k,Aa=Ah.defn.tt,Ar=Aq.submitActionForDatasetUpdate,Am=Aq.allowInsertNewMetric(Ad.zone),Ae=[];if(Ad.zone.id===f){Am=false;}if(Am&&Ad.useDropzone&&Aq.gmZones){var Ac=Aq.gmZones.getZoneModelByZoneId((Ad.zone.id===AK)?G:AD);var Al=Aq.getAddMetricNameAction(Ah,Ac.id);if(Al){Ae.push(Al);}Al=Aq.gmZones.getUpdateGroupInfoActionForNewMetric(Ad.zone.id,Ad.idx+1,Ad.item.ax===0);if(Al){Ae.push(Al);}}var An=Ao.item,Ag=Ao.extraItem,Ap=Ao.funcType,AZ=Ao.funcType2,Af=Ao.breakBys,AX=Ao.sortBys,Ab=Ao.prs,Ak=[{id:An.did,type:An.t}],Ai;if(Ag){Ak.push(Ag);}Ai={act:"addShortcutMetric",dsid:AW.call(Aq,An.did),nodeKey:AY,treeType:Aa,funcType:Ap,units:Ak,breakBys:Af,sortBys:AX};if(AZ){Ai.funcType2=AZ;}if(Ab){Ai.prs=Ab;}Ae=Ae.concat(AJ.call(Aq,Ai,Ad,{offset:Am?1:0,replaceSourceId:Am?null:An.did}));Ar.call(mstrmojo.all[Aj],Ae);},getDynamicBreakByAxisOptions:function(AZ){var Ab=this,Aa=Ab.getHost(),Ac=Aa.model.data.gsi,AX=[],AY=function AY(Ad){return Ad.some(function(Ae){return Ab.isAttribute(Ae)||Ab.isNewDerivedElement(Ae)||Ab.isCustomGroup(Ae)||Ab.isConsolidation(Ae);});};if(AY(Ac.rows)){AX.push({n:AZ?mstrmojo.desc(3326,"By Columns"):mstrmojo.desc(122,"Columns"),axes_bitmap:a.DssXmlAxisRowsBit,dmy:"@cols"});}if(AY(Ac.cols)){AX.push({n:AZ?mstrmojo.desc(3327,"By Rows"):mstrmojo.desc(2968,"Rows"),axes_bitmap:a.DssXmlAxisColumnsBit,dmy:"@rows"});}return AX;},getBreakByAxisOptions:function(AY){var AX=[{n:mstrmojo.desc(4531,"Automatic"),axes_bitmap:x.DssAxisDynamicShortcutRoot+AS.DssDynamicShortcutAuto,dmy:"@auto"},{n:AY?mstrmojo.desc(13408,"By None"):mstrmojo.desc(2057,"None"),axes_bitmap:a.DssXmlAxisPagesBit,dmy:"@p"}];if(AY){AX.splice(1,0,{isSeparator:true});}return AX.concat(this.getDynamicBreakByAxisOptions(AY));},getBreakByAttributeOptions:function(){var AX=this,AY=[],Aa=AX.getTemplateAttributes().concat(AX.getTemplateDEs()),AZ=AX.getPageByUnit();AY=AY.concat(Aa);if(AZ&&AZ.srcid){if(L.find(AY,"did",AZ.srcid)===-1){AY.push({n:AZ.n,did:AZ.srcid,t:AZ.srct});}}return AY;},getDynamicBreakByOptions:function(AX){var AY=this,AZ=AY.getBreakByAttributeOptions();if(AX&&AZ.length){AZ.unshift({isSeparator:true});}return AY.getBreakByAxisOptions(AX).concat(AZ);},getDynamicLevelOptions:function(){var AX=this,AZ=AX.getBreakByAxisOptions(true),AY=AX.getBreakByAttributeOptions();AZ.some(function(Aa){if(Aa.axes_bitmap===a.DssXmlAxisPagesBit){Aa.n=mstrmojo.desc(3329,"Grand Total");return true;}});if(AY.length){AY.unshift({isSeparator:true});}return AZ.concat(AY);},getShortcutMetricSubMenu:function(Ab){var Aa=this,AX=new mstrmojo.ui.menus.MenuConfig(),Ac=Ab.item,AZ=c.getUnitFromDataset(this.docModel.datasets,Ac.did,Ac.t)||Ac,AY=Aa.allowInsertNewMetric(Ab.zone);if(AZ.t===4){Aa.addRankShortcutMenu(Ab,AX);Aa.addPercentileShortcutMenu(Ab,AX);Aa.addPercentToTotalShortcutMenu(Ab,AX);AX.addSeparator();Aa.addPercentOfShortcutMenu(Ab,AX);Aa.addPercentChangeShortcutMenu(Ab,AX);Aa.addDifferenceShortcutMenu(Ab,AX);AX.addSeparator();Aa.addMovingTotalShortcutMenu(Ab,AX);Aa.addRunningTotalShortcutMenu(Ab,AX);Aa.addPercentRunningTotalShortcutMenu(Ab,AX);}AX.addSeparator();AX.addMenuItem(mstrmojo.desc(11491,"More Functions..."),"",function(){AO.call(Aa,Ab,"add",!AY);},AZ);return AX;},hasReplaceCandidates:function(AX){var AY=this.getReplaceCandidates(AX.zone,AX.item);return AY&&AY.length>0;},getReplaceSubMenu:function(AY,Aa){var Ae,Af=AY.item,Ab=AY.zone,AZ=this.getReplaceCandidates(Ab,Af),Ac=this;Ae=Aa?[Aa]:[];Ae.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"scrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:AZ,listHooks:{select:function Ad(Ag,Ah){Ac.unitsDropped(Ab,{src:{data:{item:Ah,items:[Ah],dsid:Ah.dsId}},getCtxtDragData:function(){var Ai=this.src;return(Ai&&Ai.data)||{};}},{allowedItems:[Ah],idx:L.find(Ab.items,"did",Af.did)===-1?Af._renderIdx:L.find(Ab.items,"did",Af.did),edge:mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION.ON,removeReplaced:true});if(this.parent&&this.parent.parent&&this.parent.parent.closeAllMenus){this.parent.parent.closeAllMenus();}}}}]});return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"replaceReference",okVisible:false,cancelVisible:false,contents:Ae,onOpen:function AX(){this.scrollableContainer.updateScrollbars();}});},addRankShortcutMenu:function m(Aa,AY){var AZ=this,Ac=this.id;function AX(Af,Ae,Ad){AZ.submitAddShortcutMetric(Aa,{item:Af,funcType:mstrmojo.mstr.EnumFunction.FunctionRank,prs:[{n:"ASC",v:Ae}],breakBys:Ad});}function Ab(Ad){return c.getRankMetricEditor(Ad.item,AZ.getDynamicBreakByOptions(),AX);}AY.addActionPopupMenuItem(mstrmojo.desc(2789,"Rank"),Ac,function(){AX(Aa.item,"0",[{dmy:"@auto"}]);},Ab,"",Aa);},addPercentileShortcutMenu:function l(AZ,AX){var AY=this,Ac=this.id;function Aa(Ad){var Ae;if(Ad.dmy){Ae={dmy:Ad.dmy};}else{Ae={id:Ad.did,type:Ad.t};}AY.submitAddShortcutMetric(AZ,{item:AZ.item,funcType:mstrmojo.mstr.EnumFunction.FunctionPercentRank,breakBys:[Ae],prs:[{n:"inclusive",v:"False"}]});}function Ab(){var Ae=new mstrmojo.ui.menus.MenuConfig(),Ad=AY.getDynamicBreakByOptions(true);Ad.forEach(function(Af){if(Af.isSeparator){Ae.addSeparator();return ;}Ae.addMenuItem(Af.n,"",function(){Aa(Af);});});return Ae;}AX.addActionPopupMenuItem(mstrmojo.desc(13409,"Percentile Rank"),Ac,function(){Aa({dmy:"@auto"});},Ab,"",AZ);},addPercentToTotalShortcutMenu:function AA(AY,Ae){var Ag=this,AX=this.id,Aj=AY.item,Ak=Ag.getHost(),Af=Ag.submitActionForDatasetUpdate.bind(Ag),Ad=Ag.getDynamicLevelOptions(),Ac=Ak.k,AZ=Ak.defn.tt,Ai=Ag.allowInsertNewMetric(AY.zone),Ab=[];if(AY.zone.id===f){Ai=false;}function Ah(Al){if(Ai&&AY.useDropzone&&Ag.gmZones){var An=Ag.gmZones.getZoneModelByZoneId((AY.zone.id===AK)?G:AD);var Am=Ag.getAddMetricNameAction(Ak,An.id);if(Am){Ab.push(Am);}Am=Ag.gmZones.getUpdateGroupInfoActionForNewMetric(AY.zone.id,AY.idx+1,AY.item.ax===0);if(Am){Ab.push(Am);}}Af(Ab.concat(AJ.call(Ag,{act:"addPercentToTotalMetric",nodeKey:Ac,treeType:AZ,metric_id:Aj.did,axes_bitmap:Al.axes_bitmap||0,units:Al.did&&[{id:Al.did,type:Al.t}]},AY,{offset:Ai?1:0,replaceSourceId:Ai?null:AY.item.did})));}function Aa(){var Al=new mstrmojo.ui.menus.MenuConfig();Ad.forEach(function(Am){if(Am.isSeparator){Al.addSeparator();return ;}Al.addMenuItem(Am.n,"",function(){Ah(Am);});});return Al;}Ae.addActionPopupMenuItem(mstrmojo.desc(3323,"Percent to Total"),AX,function(){Ah({axes_bitmap:x.DssAxisDynamicShortcutRoot+AS.DssDynamicShortcutAuto});},Aa,"",AY);},addPercentOfShortcutMenu:function J(Ab,AX){var Aa=this,Ac=this.id;function AZ(Ae,Af,Ad){Aa.submitAddShortcutMetric(Ab,{item:Ae,funcType:Af,funcType2:mstrmojo.mstr.EnumFunction.FunctionDivide,breakBys:Ad,sortBys:[{dmy:"@auto"}]});}function AY(Ad){return c.getRelativeReferenceMenu(Ad.item,mstrmojo.desc(13394,"Percent of:"),Aa.getDynamicBreakByOptions(),AZ);}AX.addActionPopupMenuItem(mstrmojo.desc(13390,"Percent Of"),Ac,function(){AZ(Ab.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},AY,"",Ab);},addPercentChangeShortcutMenu:function i(Aa,AY){var AZ=this,Ac=this.id;function Ab(Ae,Af,Ad){AZ.submitAddShortcutMetric(Aa,{item:Ae,funcType:Af,funcType2:mstrmojo.mstr.EnumFunction.FunctionVar,breakBys:Ad,sortBys:[{dmy:"@auto"}]});}function AX(Ad){return c.getRelativeReferenceMenu(Ad.item,mstrmojo.desc(146,"From:"),AZ.getDynamicBreakByOptions(),Ab);}AY.addActionPopupMenuItem(mstrmojo.desc(13391,"Percent Change"),Ac,function(){Ab(Aa.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},AX,"",Aa);},addDifferenceShortcutMenu:function I(Aa,AX){var AZ=this,Ac=this.id;function AY(Ae,Af,Ad){AZ.submitAddShortcutMetric(Aa,{item:Ae,funcType:Af,funcType2:mstrmojo.mstr.EnumFunction.FunctionMinus,breakBys:Ad,sortBys:[{dmy:"@auto"}]});}function Ab(Ad){return c.getRelativeReferenceMenu(Ad.item,mstrmojo.desc(146,"From:"),AZ.getDynamicBreakByOptions(),AY);}AX.addActionPopupMenuItem(mstrmojo.desc(11495,"Difference"),Ac,function(){AY(Aa.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},Ab,"",Aa);},addMovingTotalShortcutMenu:function AC(AZ,AX){var AY=this,Ac=this.id;function Ab(Ag,Af,Ae,Ad){AY.submitAddShortcutMetric(AZ,{item:Ag,funcType:Af,breakBys:Ad,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"3"},{n:"OLAPWinStOffset",v:Ae.toString()},{n:"OLAPWinEndType",v:"2"}]});}function Aa(Ad){return c.getMovingTotalMenu(Ad.item,AY.getDynamicBreakByOptions(),Ab);}AX.addActionPopupMenuItem(mstrmojo.desc(13392,"Moving Average"),Ac,function(){Ab(AZ.item,mstrmojo.mstr.EnumFunction.FunctionOLAPAvg,1,[{dmy:"@auto"}]);},Aa,"",AZ);},addRunningTotalShortcutMenu:function AR(Ab,AX){var Aa=this,Ac=this.id;function AZ(Af,Ae,Ad){Aa.submitAddShortcutMetric(Ab,{item:Af,funcType:Ae,breakBys:Ad,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"0"},{n:"OLAPWinEndType",v:"2"}]});}function AY(Ad){return c.getRunningTotalMenu(Ad.item,Aa.getDynamicBreakByOptions(),AZ);}AX.addActionPopupMenuItem(mstrmojo.desc(11906,"Running Total"),Ac,function(){AZ(Ab.item,mstrmojo.mstr.EnumFunction.FunctionOLAPSum,[{dmy:"@auto"}]);},AY,"",Ab);},addPercentRunningTotalShortcutMenu:function B(Aa,AY){var AZ=this,Ac=this.id;function AX(Af,Ad){var Ae=[];Ad.forEach(function(Ag){if(Ag.dmy){Ae.push({dmy:Ag.dmy});}else{Ae.push({id:Ag.did,type:Ag.t});}});AZ.submitAddShortcutMetric(Aa,{item:Af,funcType:mstrmojo.mstr.EnumFunction.FunctionOLAPSum,funcType2:mstrmojo.mstr.EnumFunction.FunctionDivide,breakBys:Ae,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"0"},{n:"OLAPWinEndType",v:"2"}]});}function Ab(Af){var Ae=new mstrmojo.ui.menus.MenuConfig(),Ad=AZ.getDynamicLevelOptions();Ad.forEach(function(Ag){if(Ag.isSeparator){Ae.addSeparator();return ;}Ae.addMenuItem(Ag.n,"",function(){AX(Af.item,[Ag]);});});return Ae;}AY.addActionPopupMenuItem(mstrmojo.desc(13393,"Percent Running Total"),Ac,function(){AX(Aa.item,[{dmy:"@auto"}]);},Ab,"",Aa);},getMultipleMetricsCalcMenus:function p(Ae,Ad,Ag){var Af=this,Ah=this.getHost(),Ac=this.submitActionForDatasetUpdate.bind(this),Aa=Ah.k,AY=Ah.defn.tt,AZ=Ad.map(function(Ai){return Ai.did;}),AX=Ae.items.map(function(Ai){return Ai.did;}),Ab=-1;AZ.forEach(function(Ai){var Aj=L.indexOf(AX,Ai);if(Aj>Ab){Ab=Aj;}});return c.getMultipleMetricsCalculationMenus(Ad,Ah.model.data.datasetId,function(Ak){var Aj={act:"addShortcutMetric",dsid:AW.call(Af,AZ),nodeKey:Aa,treeType:AY,funcType:Ak.funcType,funcType2:Ak.funcType2,units:Ak.items.map(function(Am){return{id:Am.did,type:Am.t};}),position:Ab+2,partialRetrieval:{nodes:[Aa]}},Al=[],Ai;if(Ag){Aj.useDropzone=Ag;Aj.dropzoneId=Ae.id;}Al.push(Aj);if(Af.gmZones){Ai=Af.gmZones.getUpdateGroupInfoActionForNewMetric(Ae.id,Ab+1,true);}if(Ai){Al.push(Ai);}Ac(Al);});},getCreateOrEditElementGroupFunc:function AV(AY){var AX=this;return function(){var Ac=AX.getHost(),Ad=Ac.model,Ab=AY.item,Aa=Ab.did,AZ=AX.getUnitInfoInTemplate(Aa),Af="$GUID_1",Ae=AZ.unit.ost===12033&&Ad.docModel.getDEObject(Aa);Ac.controller.openDEEditor(Ac,Ae?{deObj:Ae}:{dsId:Ad.data.datasetId,attId:Aa,attName:Ab.n,deId:Af,getExtraSaveActions:function(){var Ag=AY.zone;return AX.getUpdateTemplateAction([AX.getRemoveDropZoneUnitAction(Ag,Ab),AX.getAddDropZoneUnitAction(Ag,{did:Af,t:AI.DssTypeConsolidation},AY.idx)]);}});};},buildThresholdMenuOptions:function o(AY,AZ,AX){mstrmojo.all[this.hostId].model.buildThresholdMenuOptions(AY,AZ,AX,this.canSupportImageThreshold());},canSupportImageThreshold:function K(){return false;},getNumberFormatEditorCfg:function O(AX){return mstrmojo.all[this.hostId].model.getNumberFormatEditorCfg(AX);},submitUpdatesAndPersistWidgetXMLIfNecessary:function AU(Aa,AZ,AY){var AX=Aa.model.docModel,Ab=AX.getDataService(),Ad,Ac;if(!Aa.isXMLDirty()){Aa.controller.onSubmitTemplateUpdates(Aa,AZ,AY);}else{Ac={act:"updateTemplate",keyContext:Aa.k,actions:AZ};Ad=Aa.getPersistAction();Ab.submitUpdates([Ac,Ad],mstrmojo.func.wrapMethods(Aa.controller._getXtabCallback(Aa),AY));Aa.resetXMLDirtyFlag();}},submitActionForDatasetUpdate:function AH(AY){var AX=this.docModel;this.submitDropZoneUpdates(AY,mstrmojo.func.wrapMethods(AX.getDatasetsUpdateCallback(),AX.controller._getXtabCallback(this.getHost())));}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.string");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var n=document.getElementById("vis-measure-canvas"),A=document.getElementById("vis-measure-span"),AE={},Z={},t={},S=mstrmojo.dom,e=mstrmojo.elementHelper,s=mstrmojo.vi.ui.DatasetUnitMenuUtils,AC=mstrmojo.VisEnum.EnumColorRankMode,AD=mstrmojo.chart.model.enums.EnumDSSObjectType,p=mstrmojo.chart.model.enums.EnumDSSBaseFormType,d=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,J=mstrmojo.chart.enums.EnumFontStyle,T=mstrmojo.hash,AB=mstrmojo.string,R=mstrmojo.func.wrapMethods,x=mstrmojo.VisEnum,f=x.SERVER_JSON_ERROR_TYPE;var q=64,g=128,O=4,l=5,w=6,y=7,j=mstrmojo,k=j.array,v=mstrmojo.array,P=j.desc,AA=j.mstr.EnumFunction,b=mstrmojo.vi.enums.EnumDerivedElementType,a=j._HasMarkup,F=j.css;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);function AG(AM,AL){var AN=o.pluck(AL,"tid"),AO=o.pluck(AL,"eid"),AK=(AM.getDocModel&&AM.getDocModel())||o.getPropertyByPath(AM,"model.docModel");if(o.getPropertyByPath(AK,"getColorBy") instanceof Function){return AK.getColorBy(AN,AO);}}function AF(AK,AM,AO){var AN=AM.id,AL=AM.getHost();if(AL&&AL.observableModel){AK.forEach(function(AQ){var AP=AL.observableModel[AQ];if(AP){AP.attachEventListener("valueChanged",AN,AO);}});}}function U(AL){var AK={SINGLE:[{text:P(358,"Absolute"),value:AA.FunctionAbs,n:P(358,"Absolute"),v:AA.FunctionAbs}],PAIR:[{text:P(6017,"Add"),value:AA.FunctionAdd,n:P(6017,"Add"),v:AA.FunctionAdd},{text:P(2122,"Average"),value:AA.FunctionAverage,n:P(2122,"Average"),v:AA.FunctionAverage},{text:P(5868,"Least"),value:AA.FunctionLeast,n:P(5868,"Least"),v:AA.FunctionLeast},{text:P(5869,"Greatest"),value:AA.FunctionGreatest,n:P(5869,"Greatest"),v:AA.FunctionGreatest},{text:"A-B",value:AA.FunctionMinus+";0",n:"A-B",v:AA.FunctionMinus+";0"},{text:"B-A",value:AA.FunctionMinus+";1",n:"B-A",v:AA.FunctionMinus+";1"},{text:"A/B",value:AA.FunctionDivide+";0",n:"A/B",v:AA.FunctionDivide+";0"},{text:"B/A",value:AA.FunctionDivide+";1",n:"B/A",v:AA.FunctionDivide+";1"}],MORE:[{text:P(6017,"Add"),value:AA.FunctionAdd,n:P(6017,"Add"),v:AA.FunctionAdd},{text:P(2122,"Average"),value:AA.FunctionAverage,n:P(2122,"Average"),v:AA.FunctionAverage},{text:P(5868,"Least"),value:AA.FunctionLeast,n:P(5868,"Least"),v:AA.FunctionLeast},{text:P(5869,"Greatest"),value:AA.FunctionGreatest,n:P(5869,"Greatest"),v:AA.FunctionGreatest}]};return AK[AL];}function B(AL,AK){return !!(((AL&&AL.at)||0)&AK);}function N(AK){return !AK.selCells.some(function(AL){var AM=AK.getCellForNode(AL);return e.isNonGroupNull(AM)||!B(AM,q)||AM.dei!==undefined||AK.model.isRecursiveAttribute(AM.tid);});}function I(AL){var AK;return !AL.selCells.some(function(AM){AK=AL.getCellForNode(AM);return(e.isNonGroupNull(AK)||!B(AK,g))||AL.model.isRecursiveAttribute(AK.tid);});}function E(AN,AM,AP,AO,AL){var AK=AP&&AP.func;if((AK===AO)||(typeof AO==="string"&&AO.indexOf(AK)===0&&AO.indexOf(";0")>0)){return ;}if(AL){AN.editDECalculation(AM,AO);}else{AN.derivedElementCalculation(AM,AO);}}function M(AW,AU,AS){var AV=AU&&AU.es,AK=(AV&&AV.length)||AW.selCells.length,AN=(AK===1)?"SINGLE":((AK===2)?"PAIR":"MORE"),AT=U(AN),AM=(AU&&AU.func),AO,AX=AW.selCells,AL,AR,AQ,AP;if(AN==="PAIR"){if(AU){AP=AV[0].v>AV[1].v;if(AP){AQ=AV[0].n;AR=AV[1].n;AT[4]={value:AA.FunctionMinus+";1",v:AA.FunctionMinus+";1"};AT[5]={value:AA.FunctionMinus+";0",v:AA.FunctionMinus+";0"};AT[6]={value:AA.FunctionDivide+";1",v:AA.FunctionDivide+";1"};AT[7]={value:AA.FunctionDivide+";0",v:AA.FunctionDivide+";0"};}else{AR=AV[0].n;AQ=AV[1].n;}}else{AR=AS(AX[0]);AQ=AS(AX[1]);}AT[O].text=AR+" - "+AQ;AT[l].text=AQ+" - "+AR;AT[w].text=AR+" / "+AQ;AT[y].text=AQ+" / "+AR;AT[O].n=AR+" - "+AQ;AT[l].n=AQ+" - "+AR;AT[w].n=AR+" / "+AQ;AT[y].n=AQ+" / "+AR;}for(AO in AT){if(typeof AT[AO].value==="string"&&AT[AO].value.indexOf(AM)===0&&AT[AO].value.indexOf(";0")>0){AL=AT[AO];break;}if(AT[AO].value===AM){AL=AT[AO];break;}}return{items:AT,selectedItem:AL};}function V(AK,AN){if(!AK){return AK;}if(AN.length===1){return AK[AN[0]];}var AM=(AN&&AN.length)||0,AL;for(AL=0;AL<AM;AL++){AK=AK[AN[AL]];if(!AK){break;}}return AK;}function z(AM,AL,AK){return AM.every(function(AN){return AN.ttp===AL||AN.ttp===AK;});}function AJ(AL,AO,AP){var AN=(AO&&AO.length)||0,AM,AK,AQ=AL;for(AM=0;AM<AN-1;AM++){AK=AO[AM];if(!AQ[AK]){AQ[AK]={};}AQ=AQ[AK];}AQ[AO[AN-1]]=AP;}function Y(AS){var AT,AR,AN,AP,AK,AQ=this.model.docModel.datasets,AL=false,AO=false,AM={isDM:false};for(AT in AQ){if(AQ.hasOwnProperty(AT)){AR=AQ[AT].mx;k.forEach((AR||[]),function(AU){if(AU.did===AS){if(AU.um||AU.rdm){AO=true;}AL=true;return false;}});if(AL){break;}}}if(AO){AK=this.model.data.gts.col;AN=(AK&&AK[AK.length-1]);if(AN&&AN.otp===-1){AP=AN.es;}k.forEach((AP||[]),function(AU){if(AU.oid===AS){AM={isDM:true,id:AU.id};return false;}});}return AM;}function H(AK,AN){var AQ=[],AM={act:"updateElementsPropertiesMap",epm:AQ},AO=[],AL={},AS=[AL],AR=this;AQ.push({epmk:AO,epmv:AS});AK.forEach(function(AU){var AV=AU.tid,AT=AV===-1,AW={ob:{did:AT?"":AV}};AO.push(AW);});if(AN&&AN.indexOf("default")<0){AL.v={vv:AN};}var AP=[];AL.k={chn:AP};AK.forEach(function(AV){var AW=AV.tid,AT=AW===-1,AU;if(AT){AU=Y.call(AR,AV.eid);if(AU.isDM){AP.push({emt:2,ei:AU.id});}else{AP.push({emt:2,mt:{did:AV.eid,tp:4,ql:0}});}}else{AP.push({emt:1,ei:AV.eid,at:{did:AW,tp:AV.tp,ql:0}});}});return AM;}function C(AO,AM){var AN="00000000000000000000000000000000",AL=AO&&AO.dropZones,AK=k.find(AL,"id",AM);return AK===-1?[]:k.filter(AL[AK].items,function(AP){return AP.t===4&&AP.id!==AN;});}function c(AL,AK){return function(){var AM=new j.ui.menus.MenuConfig();AM.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);AM.addRadioMenuGroup(null,AL,AK,"checkMark",undefined,true);return AM;};}mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(t);},getUpdateColorMapAction:function(AL,AK){return H.call(this,AL,AK);},measureTextSize:function(AL,AK,AM){return{width:this.measureTextWidth(AL,AK,AM),height:this.measureTextHeight(AL,AK,AM)};},measureTextWidth:function(AN,AM,AO,AL,AK){if(S.isIE||S.isIEW3C){return this.measureTextWidthWithSpan(AN,AM,AO,AL,AK);}return this.measureTextWidthWithCanvas(AN,AM,AO);},measureTextWidthWithCanvas:function(AN,AO,AR,AP){AP=AP||false;if(AN===""){return 0;}if(AN===" "){AN="\u00A0";}var AQ=AO.fontFamily,AT=AO.fontSize,AM=AO.fontStyle,AS=AO.fontWeight;if(typeof AT==="number"){AT+="pt";}AM=AM||"normal";AS=AS||"normal";AR=AR||0;var AL=AP?undefined:V(AE,[AQ,AT,AM,AS,AN]);if(!AL){if(!n){n=document.createElement("canvas");n.width=0;n.height=0;n.id="vis-measure-canvas";n.style.position="absolute";n.style.top="0";n.style.fontSize="medium";document.body.appendChild(n);}var AK=n.getContext("2d");AK.font=AM+" "+AS+" "+AT+" "+AQ;AL=Math.ceil(AK.measureText(AN).width);AJ(AE,[AQ,AT,AM,AS,AN],AL);}return AL+AR;},measureTextWidthQuick:function(AN,AO,AR,AP){AP=AP||false;if(AN===""){return 0;}if(AN===" "){AN="\u00A0";}var AQ=AO.fontFamily,AT=AO.fontSize,AM=AO.fontStyle,AS=AO.fontWeight;if(typeof AT==="number"){AT+="pt";}AM=AM||"normal";AS=AS||"normal";AR=AR||0;var AL=AP?undefined:V(AE,[AQ,AT,AM,AS,AN]);if(!AL){if(!n){n=document.createElement("canvas");n.width=0;n.height=0;n.id="vis-measure-canvas";n.style.position="absolute";n.style.top="0";n.style.fontSize="medium";document.body.appendChild(n);}var AK=n.getContext("2d");AK.font=AM+" "+AS+" "+AT+" "+AQ;AL=Math.ceil(AK.measureText(AN).width);AJ(AE,[AQ,AT,AM,AS,AN],AL);}return AL+AR;},measureTextWidthWithSpan:function(AM,AN,AR,AT,AO){if(AM===""){return 0;}if(AM===" "){AM="\u00A0";}var AP=AN.fontFamily,AU=AN.fontSize,AL=AN.fontStyle,AQ=AN.fontWeight;if(typeof AU==="number"){AU+="px";}AL=AL||"normal";AQ=AQ||"normal";AT=AT||"auto";AR=AR||0;AO=!!AO;if(typeof AT==="number"){AT+="px";}var AK=V(Z,[AP,AU,AL,AQ,AT,AM]);if(!AK){var AS;if(!A){A=document.createElement("span");AS=A.style;A.id="vis-measure-span";AS.position="absolute";AS.top="0";AS.visibility="hidden";AS.width="auto";AS.height="auto";if(AO){AS.whiteSpace="nowrap";}else{AS.whiteSpace="normal";}document.body.appendChild(A);}AS=A.style;if(AO){AS.whiteSpace="nowrap";}else{AS.whiteSpace="normal";}AS.width="auto";AS.height=AT;AS.fontFamily=AP;AS.fontSize=AU;AS.fontStyle=AL;AS.fontWeight=AQ;A.innerHTML=AM;AK=Math.ceil(A.clientWidth);AJ(Z,[AP,AU,AL,AQ,AT,AM],AK);}return AK+AR;},measureTextHeight:function(AM,AN,AS,AU,AK,AP,AO){if(AM===""){return 0;}if(AM===" "){AM="\u00A0";}var AQ=AN.fontFamily,AW=AN.fontSize,AL=AN.fontStyle,AR=AN.fontWeight;AK=AK||"normal";AO=!!AO;if(typeof AW==="number"){AW+="px";}AL=AL||"normal";AR=AR||"normal";AU=AU||"auto";AS=AS||0;if(typeof AU==="number"){AU+="px";}var AV=AP?undefined:V(t,[AQ,AW,AL,AR,AU,AM]);if(!AV){var AT;if(!A){A=document.createElement("span");AT=A.style;A.id="vis-measure-span";AT.position="absolute";AT.top="0";AT.visibility="hidden";AT.width="auto";AT.height="auto";if(AO){AT.whiteSpace="nowrap";}else{AT.whiteSpace="normal";}document.body.appendChild(A);}AT=A.style;if(AO){AT.whiteSpace="nowrap";}else{AT.whiteSpace="normal";}AT.heigth="auto";AT.width=AU;AT.fontFamily=AQ;AT.fontSize=AW;AT.fontStyle=AL;AT.fontWeight=AR;AT.wordBreak=AK;A.innerHTML=AM;AV=A.clientHeight;if(!AP){AJ(t,[AQ,AW,AL,AR,AU,AM],AV);}}return AV+AS;},getVisEmptyMsg:function(AK){var AL="";switch(AK){case"AE_ERROR":AL='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+mstrmojo.desc(14436,"Unable to load visualization.")+"</div><div>"+mstrmojo.desc(14437,"Use a filter to reduce the data and try again.")+"</div></div></div></div></div>";break;case"NODATA_OTHERERROR":AL='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div>'+(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"))+"</div></div></div></div>";break;default:AL='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return AL;},applyStyles2DomNode:function(AP,AS){var AK,AQ=AP.style;if(Object.prototype.hasOwnProperty.call(AS,"backgroundColor")&&AS.backgroundColor!==""&&AS.backgroundColor!=="transparent"){var AO=1;if(Object.prototype.hasOwnProperty.call(AS,"opacity")&&AS.opacity!==""){AO=AS.opacity;}var AL=AS.backgroundColor,AR=function AR(AT){if(isNaN(AT)){AT=0;}AT%=16777216;return{b:AT%256,g:(AT>>8)%256,r:(AT>>16)%256};},AN="";if(AL){var AM=function AM(AU,AV){if(AU==="transparent"){return"rgba(0,0,0,0)";}AU=this.parseCSSColor(AU,false);var AT=AR(AU);return"rgba("+AT.r+" ,"+AT.g+" ,"+AT.b+" ,"+AV+" )";}.bind(this);if(AL.c1!==undefined&&AL.c2!==undefined&&AL.or!==undefined){AN=(F.buildGradient(AL.or,AM(AL.c1,AO),AM(AL.c2,AO))).v;}else{AN=AM(AL,AO);}AQ.background=AN;}}else{AQ.backgroundColor="rgba(0,0,0,0)";}for(AK in AS){if(AK!=="backgroundColor"&&AK!=="opacity"&&Object.prototype.hasOwnProperty.call(AS,AK)&&AS[AK]&&AS[AK]!==""){AQ[AK]=AS[AK];}}},parseCSSColor:function(AO,AL){var AK,AM;if(AO.length===7){if(AL===true){AK=AO[5]+AO[6]+AO[3]+AO[4]+AO[1]+AO[2];}else{AK=AO.slice(1);}}else{AK=[];var AN=AO.slice(1);if(AL===true){for(AM=2;AM>=0;AM--){AK.push(AN[AM]);AK.push(AN[AM]);}}else{for(AM=0;AM<3;AM++){AK.push(AN[AM]);AK.push(AN[AM]);}}AK=AK.join("");}return parseInt(AK,16);},positionDomNode:function(AM,AO){var AL,AR,AP,AN=["width","height","top","left","right","bottom"],AQ=AN.length,AK=AM.style;for(AL=0;AL<AQ;AL++){AR=AN[AL];AP=AO[AR];if(AP!==undefined){if((typeof AP)==="number"){AP+="px";}AK[AR]=AP;}}},getComputedFontStyle:function G(AM){var AK=mstrmojo.css.getComputedStyle(AM);var AN={};AN.fontFamily=AK.fontFamily;AN.fontSize=AK.fontSize;AN.fontStyle=AK.fontStyle;AN.fontWeight=AK.fontWeight;AN.fontVariant=AK.fontVariant;var AL=parseInt(AK.paddingLeft)||0,AO=parseInt(AK.paddingLeft)||0;AN.bonus=AL+AO;return AN;},splitWordIfTooLong:function(AU,AS,AN){var AQ=[];var AR=AU.length;var AO;for(AO=0;AO<AR;AO++){var AL=AU[AO];while(true){var AV=this.measureTextWidth(AL,AN);if(AV>AS){var AT=(AS/AV)*AL.length;var AK=Math.max(Math.round(AT),1);while(AK>0){var AP=AL.substr(0,AK);var AM=Math.round(this.measureTextWidth(AP,AN));if(AM<=AS||AK===1){AQ.push(AP);break;}else{AK--;}}AL=AL.substr(AK,AL.length-AK);}else{AQ.push(AL);break;}}}return AQ;},truncateTextToLineWithWordWrap:function Q(Ak,Ad,Ab,AQ,Ac,AU){var AY=Ak.split(" "),Ae=AY.length;if(!AU){AY=this.splitWordIfTooLong(AY,Ab,Ad);}var Ar,AW=[],Am=[],AK=0,AO=AY.length,At=this.measureTextWidth(" ",Ad),AN=0,AT=false,Aa=(Ae===AY.length);Am.push(0);for(Ar=0;Ar<AO;Ar++){var Ai=this.measureTextWidth(AY[Ar],Ad);if(!AU&&Ai>Ab){var AL=AY[Ar];var Ap=(Ab/Ai)*AL.length;AY[Ar]=AL.substr(0,parseInt(Ap,10));Ai=Ab;}AW.push(Ai);AK+=Ai;Am.push(AK);if(Ar!==AO-1){AK+=At;}}var Ao,Aq,Ag=AQ;for(Ao=0,Aq=0;Aq<Am.length;){var AS=Am[Aq]-Am[Ao];if(Ao>0&&Aq!==Ao){AS-=At;}var AR=Am[Aq+1]-Am[Ao];if(Ao>0&&Aq+1!==Ao){AR-=At;}if(AS<=Ab&&((Aq+1===Am.length)||(AR>Ab))){AN=Math.max(AN,AS);Ag--;if(Ag===0||Aq===AO){break;}else{Ao=Aq;Aq++;}}else{Aq++;}}if(Aq>AO){Aq=AO;}var AV=Am[Aq]-Am[Ao];if(Ao>0&&Aq!==Ao){AV-=At;}var Aj;if(Aq>=AO&&AV<Ab){Aj=AY.join(" ");}else{AT=true;AN=Ab;Aj=AY.slice(0,Aq).join(" ");var AX=this.measureTextWidth("...",Ad);if(AV+AX<=Ab){if(AV+At+AX>Ab){Aj+="...";}else{var As=AY[Aq],AZ;for(var Af=1;Af<As.length;Af++){AZ=this.measureTextWidth(As.substr(0,Af),Ad);if(AV+At+AZ+AX>Ab){break;}}Aj+=" "+As.substr(0,Af-1)+"...";}}else{if(Aj.charAt(Aj.length-1)===" "){Aj=Aj.substr(0,Aj.length-1);}var Ah=Aj.lastIndexOf(" ");var AM=Aj.length-1-Ah;if(AM===3){Aj=Aj.substr(0,Aj.length-3)+" ...";}else{var Al=0,AP="",An=0;while(Al<AX&&Aj.length>An){An++;AP=Aj.substr(Aj.length-An,Aj.length);Al=this.measureTextWidth(AP,Ad);}Aj=Aj.substr(0,Aj.length-An)+"...";}}}if(Ac){return{text:Aj,truncated:AT,maxLineLen:AN,canWordWrap:Aa};}return Aj;},measureSuperTextWidth:function AI(AL,AM,AK,AN){return AL?this.measureTextWidth("<sup>"+AM+"</sup>",AK,AN):this.measureTextWidth(AM,AK,AN);},splitTokenIfTooLong:function i(AV,AT,AN){var AR=[];var AS=AV.length;var AO,AL,AW,AQ,AX;for(AO=0;AO<AS;AO++){AL=AV[AO];AQ=AL.isSuper;while(true){AW=AL.v;if(AL.textWidth!==undefined){AX=AL.textWidth;}else{AX=AL.textWidth=this.measureSuperTextWidth(AQ,AW,AN);}if(AX>AT){var AU=(AT/AX)*AW.length;var AK=Math.max(Math.round(AU),1);while(AK>0){var AP=AW.substr(0,AK);var AM=Math.round(this.measureSuperTextWidth(AQ,AP,AN));if(AM<=AT||AK===1){AR.push({v:AP,isSuper:AQ,textWidth:AM});break;}else{AK--;}}AL={v:AW.substr(AK,AW.length-AK),isSuper:AQ};}else{AR.push(AL);break;}}}return AR;},truncateTextToLineWithWordWrapForTokens:function W(AU,AO,An,Af,Ao,Aa){var Ai=AU.length;AU=this.splitTokenIfTooLong(AU,An,AO);var Am,AZ=[],AK=0,Ad=AU.length,AL=0,Ae=false,AQ=(Ai===AU.length),AS,AX,Ag,AM,Ak,AT,AY;if(Aa&&!AQ){return{canWordWrap:AQ};}AZ.push(0);for(Am=0;Am<Ad;Am++){AS=AU[Am];Ag=AS.v;AX=AS.isSuper;if(AS.textWidth!==undefined){AM=AS.textWidth;}else{AM=AS.textWidth=this.measureSuperTextWidth(AX,Ag,AO);}if(AM>An){var Al=(An/AM)*Ag.length;AS.v=Ag.substr(0,parseInt(Al,10));AM=AS.textWidth=An;}AK+=AM;AZ.push(AK);}var AW,Ah,AV=Af;for(AW=0,Ah=0;Ah<AZ.length;){var AR=AZ[Ah]-AZ[AW];var AP=AZ[Ah+1]-AZ[AW];if(AR<=An&&((Ah+1===AZ.length)||(AP>An))){AL=Math.max(AL,AR);AV--;if(AV===0||Ah===Ad){break;}else{AW=Ah;Ah++;}}else{Ah++;}}if(Ah>Ad){Ah=Ad;}var Ac=AZ[Ah]-AZ[AW];var Ap;if(Ah>=Ad&&Ac<An){Ap=AU;}else{Ae=true;AL=An;Ap=AU.slice(0,Ah);var AN=this.measureTextWidth("...",AO);if(Ac+AN<=An){AT=AU[Ah];Ag=AT.v;AX=AT.isSuper;for(Ak=1;Ak<Ag.length;Ak++){AY=this.measureSuperTextWidth(AX,Ag.substr(0,Ak),AO);if(Ac+AN+AY>An){break;}}if(Ak>1){AS={v:Ag.substr(0,Ak-1),isSuper:AX};AS.textWidth=this.measureSuperTextWidth(AX,AS.v,AO);Ap.push(AS);Ap.push({v:"...",textWidth:AN});}}else{var Ab=0,Aj;for(Am=Ap.length-1;Am>=0;Am--){AS=Ap[Am];Ag=AS.v;AX=AS.isSuper;Aj=0;for(Ak=Ag.length-1;Ak>=0;Ak--){Aj=this.measureSuperTextWidth(AX,Ag.substr(Ak),AO);if(Ab+Aj>=AN){break;}}if(Ak>=0){break;}else{Ab+=Aj;}}if(Am>=0){if(Ak>0){AS.v=Ag.substr(0,Ak);AS.textWidth=this.measureSuperTextWidth(AX,AS.v,AO);Ap=Ap.slice(0,Am+1);}else{if(Ak===0){Ap=Ap.slice(0,Am);}}Ap.push({v:"...",textWidth:AN});}else{Ap=[{v:"...",textWidth:AN}];}}}if(Ao){return{text:Ap,truncated:Ae,maxLineLen:AL,canWordWrap:AQ};}return Ap;},getRankMode:function h(AQ){var AS=1,AR=2,AP=3,AL=4,AN=5,AK=6,AO=7,AM=AC.INVALID;if(AQ){if(z(AQ,AP,AR)){AM=AC.TOP_PERCENT;}else{if(z(AQ,AP,AS)){AM=AC.BOTTOM_PERCENT;}else{if(z(AQ,AK,AL)){AM=AC.BOTTOM;}else{if(z(AQ,AK,AN)){AM=AC.TOP;}else{if(z(AQ,AO)){AM=AC.VALUE;}}}}}}return AM;},getColorByTitle:function L(AL,AK){if(AK===AC.BOTTOM_PERCENT||AK===AC.TOP_PERCENT){AL=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",AL);}else{if(AK===AC.BOTTOM||AK===AC.TOP){AL=mstrmojo.desc(2788,"Rank of ##").replace("'##'",AL);}}return AL;},getColorByFormatStr:function u(AL,AK){if(AK===AC.BOTTOM_PERCENT||AK===AC.TOP_PERCENT){AL="0%;(0%)";}else{if(AK===AC.BOTTOM||AK===AC.TOP){AL="";}}return AL;},getColorByItems:function AH(AK,AU,Ab,AX,AS,AQ,AY){var AW=[],Ac,AM,AR=mstrmojo.num,AP,AT;if(AK===undefined||AK.length===0){return AW;}var Ae=true;if(AK.length>1){if(AK[0].ceil===AK[1].flr){Ae=false;}else{Ae=true;}}for(Ac=0;Ac<AK.length;Ac++){var Ad=AK[Ac],AO={},AL=Ad.ceil,Aa=Ad.flr;if((Ac===0&&Ae)||(Ac===AK.length-1&&!Ae)){if(AU===AC.BOTTOM_PERCENT||AU===AC.TOP_PERCENT){AO.flr=Aa/100;AO.ceil=1;}else{if(AU===AC.TOP||AU===AC.BOTTOM){Aa+=1;AO.flr=Math.floor(Aa);AO.ceil=AS;}else{AO.flr=Aa;AO.ceil=Ab;}}AT=AO.ceil;}else{if((Ac===0&&!Ae)||(Ac===AK.length-1&&Ae)){if(AU===AC.BOTTOM_PERCENT||AU===AC.TOP_PERCENT){AO.flr=0;AO.ceil=AL/100;}else{if(AU===AC.TOP||AU===AC.BOTTOM){AO.flr=0;AO.ceil=Math.floor(AL);}else{AO.flr=AX;AO.ceil=AL;}}AP=AO.flr;}else{if(AU===AC.BOTTOM_PERCENT||AU===AC.TOP_PERCENT){Aa=Aa/100;AL=AL/100;}else{if(AU===AC.TOP||AU===AC.BOTTOM){Aa+=1;Aa=Math.floor(Aa);AL=Math.floor(AL);}}AO.flr=Aa;AO.ceil=AL;}}if(AU===AC.TOP||AU===AC.BOTTOM){AO.ceil=AO.ceil>AS?AS:AO.ceil;}if(AQ){AO.label=AR.formatByMask(AQ,AO.flr)+" - "+AR.formatByMask(AQ,AO.ceil);}else{AO.label=AO.flr+" - "+AO.ceil;}if(Ad.fmt&&Ad.fmt.bc){AO.color=Ad.fmt.bc;}else{AO.color=AY;}AW.push(AO);}AW=AW.filter(function(Af){return Af.flr<=Af.ceil&&!(Af.flr>AT||Af.ceil<AP);});if(AU===AC.TOP||AU===AC.BOTTOM){AM=AS;}else{if(AW.length>0){if(Ae){AM=AW[0].ceil-AW[(AW.length-1)].flr;}else{AM=AW[(AW.length-1)].ceil-AW[0].flr;}}}var AZ=0,AV,AN;for(Ac=0;Ac<AW.length;Ac++){if(Ac===AW.length-1){AW[Ac].scopePercent=1-AZ;}else{if(AU===AC.TOP||AU===AC.BOTTOM){AN=AW[Ac].ceil-AW[Ac].flr+1;}else{AN=AW[Ac].ceil-AW[Ac].flr;}AV=AN/AM;AW[Ac].scopePercent=AV;AZ+=AV;}}return AW;},getDefaultColorByItems:function(AN,AL,AM){var AK={};AK.label=AM+" - "+AL;AK.flr=AM;AK.ceil=AL;AK.color=AN;AK.scopePercent=1;return[AK];},getNumberFormat:function(AN,AL){var AO=AN.nf,AM=AN.gvs;function AK(){var AR=(AM&&AM.items&&AM.items[0]&&AM.items[0].items)||[],AQ=AR[AL]||{},AP=AQ.nfs;return typeof AP==="string"?AP:"";}if(typeof AO[AL].nfs!=="string"){AO[AL].nfs=AK();}return AO[AL].nfs;},hasOnlyMetricsOnColumn:function(AL){var AK=(AL&&AL.gts&&AL.gts.col)||[];return AK.every(function(AM){return AM.otp===AD.DssTypeUnknown&&(AM.es||[]).every(function(AN){return AN.otp===AD.DssTypeMetric;});});},hasNoMetricOnRow:function(AL){var AM=(AL&&AL.gts&&AL.gts.row)||[],AK=function(AN){return AN.otp!==AD.DssTypeMetric;};return AM.every(AK);},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(AS,AK,AW,AQ){if(!AS||!AK){return ;}var AN=AS.nds,AR,AL,AT,AV,AU,AP,AO,AM;v.forEach(AN||[],function(AX){AR=AX.nds;v.forEach(AR||[],function(AY){AL=AY.es;v.forEach(AL||[],function(AZ){AV=AZ.v;AP=AQ[AV];if(!AP){AP=AW.getNormalizedFormElementId(AV);AQ[AV]=AP;}v.forEach(AK||[],function(Aa){AT=Aa.es;v.forEach(AT||[],function(Ab){AM=false;AU=Ab.id;if(AU===AV){AM=true;}else{AO=AQ[AU];if(!AO){AO=AW.getNormalizedFormElementId(AU);AQ[AU]=AO;}if(AP===AO){AM=true;}}if(AM){AZ.v=Ab.id;AZ.n=Ab.n;return false;}});if(AM){return false;}});});});});},modifyScExpDeprecated:function(AQ,AR,AO,AM){if(!AQ||!AR){return ;}var AN=AQ.nds,AL,AK,AP;v.forEach(AN||[],function(AS){AL=AS.nds;v.forEach(AL||[],function(AT){AK=AT.es;v.forEach(AK||[],function(AU){v.forEach(AR||[],function(AV){v.forEach(AV||[],function(AW){AP=AW.es;v.forEach(AP||[],function(AX){if(AO.call(AM,AX.id,AU.v)){AU.v=AX.id;AU.n=AX.n;}});});});});});});},getMouseOffset:function(AL){var AK=(AL.offsetX!==undefined)?AL.offsetX:(AL.layerX),AM=(AL.offsetY!==undefined)?AL.offsetY:(AL.layerY);return{x:AK,y:AM};},translateLineStyle:function(AK){var AM=["none","solid","solid","dashed","dotted"],AL=["1px","1px","2px","1px","1px"];return{width:AL[AK]||"0px",style:AM[AK]||"none"};},getGroupAndCalculationContextMenuForDataPoints:function(AU,Ai){var AW,AY=[],AM=[],Af=[],AR=Ai.fnCellName,Aa=Ai.fnUnique,AQ=Ai.fnMakeNode,Ad=AU.getCellForNode.bind(AU),Ak=Ai.selection;var AP=new j.ui.menus.MenuConfig(),AL=new j.ui.menus.MenuConfig(),Ac=new j.ui.menus.MenuConfig(),Ah=new j.ui.menus.MenuConfig();function Aj(Al){AU.selCells=AY[Al].selCells;AU.derivedElementGroup(Ad(AU.selCells[0]));}function AS(An){AU.selCells=AM[An].selCells;var Am=Ad(AM[An].selCells[0]),Al=AU.getDEInfo(Am);AU.derivedElementsEdit(Ad(AU.selCells[0]),Al);}function AZ(Am){AU.selCells=AM[Am].selCells;var Al=Ad(AM[Am].selCells[0]);AU.removeQuickDE(Al);}function AX(Am){AU.selCells=AM[Am].selCells;var Al=Ad(AM[Am].selCells[0]);AU.renameDEList(Al);}function Ab(Al){E(AU,Ad(AU.selCells[0]),null,Al,false);}function AK(Al){E(AU,Ad(AU.selCells[0]),null,Al,true);}function AO(Am){var Al=Ad(AM[Am].selCells[0]);AU.removeQuickDE(Al);}function Ag(Am){var Al=Ad(AM[Am].selCells[0]);AU.editDECalculation(Al);}function AT(Am,Al){return function(){var An=new j.ui.menus.MenuConfig();An.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);An.addRadioMenuGroup(null,Am,Al,"checkMark",undefined,true);return An;};}function AV(Al){Al=Al||[];function Am(Aq){var An=Aq.extra||{},Ar=Aq.setup||mstrmojo.emptyFn,Ao=Aq.action||mstrmojo.emptyFn,Ap=[];Ar(Ap,An);Ao(Ap,An);}Al.forEach(Am);}var AN=[{name:"group",setup:function(Al){AY.forEach(function(Am){AU.selCells=AY[Am.v].selCells;if(!Object.prototype.hasOwnProperty.call(AM,Am.v)&&N(AU)){Al.push(Am);}});},action:function(Am){var Al;if(Am.length===1){Al=Am[0].v;AP.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AU.selCells=AY[Al].selCells;AU.derivedElementGroup(Ad(AU.selCells[0]));});}if(Am.length>1){AP.addPopupMenuItem(mstrmojo.desc(1911,"Group"),AU.id,AT(Aj,Am),"xt");}}},{name:"edit-group",setup:function(Al){AM.forEach(function(Ap){var Ao=Ad(AM[Ap.v].selCells[0]),An=AU.getDEInfo(Ao),Am=An&&An.de;if(Am&&Am.t===b.LIST){Al.push(Ap);}});},action:function(Am){var Al,Ao,An;if(Am.length===1){Al=AM[Am[0].v].selCells;Ao=Ad(Al[0]);An=AU.getDEInfo(Ao);AL.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AU.selCells=Al;AU.derivedElementsEdit(Ad(AU.selCells[0]),An);});AL.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AU.selCells=Al;AU.removeQuickDE(Ao);});Ah.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AU.selCells=Al;AU.renameDEList(Ao);});}if(Am.length>1){AL.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),AU.id,AT(AS,Am),"xt");AL.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),AU.id,AT(AZ,Am),"xt");Ah.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),AU.id,AT(AX,Am),"xt");}}},{name:"calculation",setup:function(Al){Af.forEach(function(Ao,An,Am){AU.selCells=Am[Ao.v].selCells;var Aq=Ad(AU.selCells[0]),Ap=AU.getDEInfo(Aq),Ar=Ap&&Ap.de;if(!(Ar&&Ar.t===b.RESIDUE)&&I(AU)){Al.push(Ao);}});},action:function(Al){if(Al.length===1){AP.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AU.id,function(){var Am=Al[0].v,An=new j.ui.menus.MenuConfig();AU.selCells=Af[Am].selCells;An.addRadioMenuGroup(null,Ab,M(AU,null,AR).items,"checkMark",undefined,true);return An;},"xt");}if(Al.length>1){AP.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AU.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Al,selectedIndex:0,onitemSelected:function(Am){var An=Am.v;AU.selCells=Af[An].selCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",M(AU,null,AR).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(An,Am){E(AU,Ad(AU.selCells[0]),null,Am.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(Al){AM.forEach(function(Ap){var Ao=Ad(AM[Ap.v].selCells[0]),An=AU.getDEInfo(Ao),Am=An&&An.de;if(Am&&Am.t===b.CALCULATION){Al.push(Ap);}});},action:function(Al){function Am(){var An=Al[0].v;AU.selCells=AM[An].selCells;var Ar=Ad(AU.selCells[0]),Aq=AU.getDEInfo(Ar),As=Aq&&Aq.de,Ap=M(AU,As,AR),Ao=new j.ui.menus.MenuConfig();Ao.addRadioMenuGroup(Ap.selectedItem.value,AK,Ap.items,"checkMark",undefined,true);return Ao;}if(Al.length===1){Ac.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AU.id,Am,"xt");Ac.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var An=Al[0].v;AU.selCells=AM[An].selCells;var Ao=Ad(AU.selCells[0]);AU.removeQuickDE(Ao);});Ah.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var An=Al[0].v;AU.selCells=AM[An].selCells;var Ao=Ad(AU.selCells[0]);AU.editDECalculation(Ao);});}if(Al.length>1){Ac.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AU.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Al,selectedIndex:0,onitemSelected:function(Aq){var Ar=Aq.v;AU.selCells=AM[Ar].selCells;var Ap=Ad(AU.selCells[0]),Ao=AU.getDEInfo(Ap),As=Ao&&Ao.de;var An=M(AU,As,AR);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",An.items);this.parent.checkList.set("selectedItem",An.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Ao,An){E(AU,Ad(AU.selCells[0]),null,An.checkList.selectedItem.v,true);}});});Ac.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),AU.id,AT(AO,Al),"xt");Ah.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),AU.id,AT(Ag,Al),"xt");}}}];AW=Aa(Ak);AW.forEach(function(Am){var Ao=AQ(Am),Al=Ad(Ao),An,Ap,Aq;if(!AU.model.supportsViewFilterActions(Al.tid)){return ;}An=Al.dei===undefined?AY:AM;Ap=Al.tid;Aq=AU.model.getObjectInfo(Ap).n;if(An[Ap]===undefined){An[Ap]={};An[Ap].selCells=[];An.push({n:Aq,v:Ap,text:Aq,value:Ap});}An[Ap].selCells.push(Ao);if(Af[Ap]===undefined){Af[Ap]={};Af[Ap].selCells=[];Af.push({n:Aq,v:Ap,text:Aq,value:Ap});}Af[Ap].selCells.push(Ao);});var Ae=this.getPropertyByPath(AU,"model.data.visName")||this.getPropertyByPath(AU,"model.data.vis.vn");if(Ae==="VIHeatMapVisualizationStyle"){AN.splice(2,2);}AV(AN);return{createDe:AP,editGroup:AL,editCalculation:Ac,renameDe:Ah};},getGroupAndCalculationContextMenu:function(AS,Ag,Ad){var Af=AS,AZ=Ad.skipSingleAttrCheck||Af.isSingleAttrSelection(),AN=false,AP=Af.isSingleSelection(),AT=Af.getDEInfo(Ag),AO=AT&&AT.deObject,Ac=AT&&AT.de,AX=AO&&Af.getOthersDEInfo(AO),AV=Af.getSelections(),Ab=true,AR=Ad.fnCellName,Ae=this.getPropertyByPath(Af,"model.data.visName")||this.getPropertyByPath(Af,"model.data.vis.vn");var AQ=new j.ui.menus.MenuConfig(),AL=new j.ui.menus.MenuConfig(),AW=new j.ui.menus.MenuConfig(),Aa=new j.ui.menus.MenuConfig();Af.selCells=Ad.selection;if(AS.model.supportsViewFilterActions(Ag.tid)){if((AN||AZ)&&B(Ag,q)&&N(Af)){AQ.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AS.derivedElementGroup(Ag);});}if(AP&&Ac&&Ac.t===b.LIST){AL.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AS.derivedElementsEdit(Ag,AT);});AL.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AS.removeQuickDE(Ag);});Aa.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AS.renameDEList(Ag);});}var AU=function(Ah){E(Af,Ag,Ac,Ah,false);},AY=function(Ah){E(Af,Ag,Ac,Ah,true);};if(AX&&!AP&&AZ){k.forEach(AV,function(Ah){if(Ah[0]&&Ah[0].eid.indexOf(AX.id)>-1){Ab=false;return false;}});}if(Ae!=="VIHeatMapVisualizationStyle"&&!(AP&&Ac&&Ac.t===b.RESIDUE)&&(AN||AZ)&&B(Ag,g)&&I(Af)){var AK=function(){var Ah=new j.ui.menus.MenuConfig(),Ai=M(Af,null,AR);Ah.addRadioMenuGroup(null,AU,Ai.items,"checkMark",undefined,true);return Ah;};AQ.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,AK,"xt");}if(AP&&Ac&&Ac.t===b.CALCULATION){var AM=function(){var Ah=new j.ui.menus.MenuConfig(),Ai=M(Af,Ac,AR);Ah.addRadioMenuGroup(Ai.selectedItem.value,AY,Ai.items,"checkMark",undefined,true);return Ah;};AW.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,AM,"xt");AW.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){AS.removeQuickDE(Ag);});Aa.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){AS.editDECalculation(Ag);});}}return{createDe:AQ,editGroup:AL,editCalculation:AW,renameDe:Aa};},isHostedPopupNode:function(AO,AM,AL,AK){var AP=AL?AO:AO&&AO.parentNode;while(AP&&(AP!==AK)){var AN=AP.getAttribute&&AP.getAttribute(AM);if(AN!==null&&AN.indexOf("mstrmojo-popup-widget-hosted")>=0){return true;}AP=AP.parentNode;}return false;},applyStyle2Legend:function(AN,AM,AL){var AK,AP={},AO={};for(AK in AN){if(AK.indexOf("font")>=0||AK.indexOf("color")>=0||AK.indexOf("textDecoration")>=0){AP[AK]=AN[AK];}else{AO[AK]=AN[AK];}}if(AM){AM.style.background="";this.applyStyles2DomNode(AM,AO);}if(AL){this.applyStyles2DomNode(AL,AP);}},mergeMenuConfigs:function K(AL,AK){function AM(AO,AP,AN){if(!AP){return ;}if(!AN&&AO.hasMenuItems()&&AP.hasMenuItems()){AO.addSeparator();}if(AP.hasMenuItems()){AO.absorbMenuItems(AP);}}return AK.reduce(function(AN,AO){AM(AN,AL[AO.name],AO.noSeparator);return AN;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(AL,AK,AM){AL.addDisposable(AK);AL.absorbMenuItems(AK);if(AM&&AK.menus.length>0){AL.addSeparator();}},addWheelListener:(function(){var AN=mstrmojo.dom,AM=AN.attachEvent,AL=AN.preventDefault,AO;function AK(AS,AR,AT,AQ){var AP=(AO==="wheel")?AT:function(AU){if(!AU){AU=window.event;}var AW={originalEvent:AU,target:AU.target||AU.srcElement,type:"wheel",deltaMode:(AU.deltaMode!==undefined?AU.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){AL(window,AU);}},AV=this;if(AO==="mousewheel"){AW.deltaY=-AU.wheelDelta;if(AU.wheelDeltaX!==undefined){AW.deltaX=-AU.wheelDeltaX;}}else{AW.deltaY=AU.detail;}return AT.call(AV,AW);};return AM(AS,AR,AP,AQ);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){AO="wheel";}else{AO=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(AQ,AR,AP){return AK(AQ,AO,AR,AP);};}()),isNearZero:function(AL,AK){AK=AK||5;var AM=1/Math.pow(10,AK);return(Math.abs(AL)<AM);},hasMergedRowCells:function(AK){return false;},getMockUpThresholds:function(AM,AN){var AK=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];k.forEach(AK,function(AP){var AO=AP.expr.nds[0].m;AO.did=AM;AO.n=AN;});var AL={};AL[AM]=AK;return AL;},generateThresholdsInfo:function(AM,AR,AK,AO){var AQ=AK.length,AL=[],AU,AN,AV=0,AT=0;for(var AP=0;AP<AQ;AP++){AN=Math.round(AO[AP]*100);AT=AV;AV=AN||100;AU={tid:AP+1,n:"threshold "+AP,scope:1,rtp:2,rtxt:"",fmt:{bc:AK[AP],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:AM,n:AR},cs:[{v:AN+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:AV,flr:AT};AL.push(AU);}var AS={};AS[AM]=AL;return AS;},psPt2CssPt:function(AM,AL){var AK=parseInt(AM,10)*0.75;if(AL instanceof Function){AK=AL(AK);}return AK+"pt";},captureEventOnce:function(AP,AO,AK,AN,AM){function AL(AQ){AO.call(AK,a.newDomEvent(AP,window,AQ||window.event),AM);S.detachEvent(AN,AP,AL);}AM=AM||{};AN=AN||document;S.attachEvent(AN,AP,AL);},getPropertyByPath:function(AO,AN,AK){var AL,AM;if(typeof AN!=="string"){return AK;}AL=AN.split(".");AM=AL.every(function(AQ){var AP=AO[AQ];if(AP!==undefined){AO=AP;return true;}return false;});return AM?AO:AK;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(AK,AL){if(AL){Object.keys(AL).forEach(function(AM){AK[AM]=AL[AM];});}return AK;},{});},toggleControlEnabled:function(AK,AL){[].concat(AK).forEach(function(AM){AM.set("enabled",!!AL);});},findInArray:function(AN,AM,AL){var AP=-1,AO,AK;if(!Array.isArray(AN)){return AP;}for(AO=AL===undefined?0:AL,AK=AN.length;AO<AK;AO+=1){if(AM(AN[AO])){return AO;}}return AP;},arrayUnique:function(AK,AL){if(!Array.isArray(AK)){return AK;}return AK.filter(function(AM,AN){return o.findInArray(AK,function(AO){return AL(AM,AO);},AN+1)===-1;});},range:function(AK,AO,AN){AN=AN||1;var AM,AL=[];for(AM=AK;AM!==AO;AM+=AN){AL.push(AM);}return AL;},drawDashLine:function D(AS,AM,AQ,AL,AO,AK,AR){var AP=(AM===AL),AN;AS.beginPath();AS.moveTo(AM,AQ);if(AP){AN=0;AQ+=AK;while(AQ<=AO){if(AN%2===0){AS.lineTo(AM,AQ);AQ+=AR;}else{AS.moveTo(AM,AQ);AQ+=AK;}AN++;}if(AN%2===0){AS.lineTo(AL,AO);}}else{AN=0;AM+=AK;while(AM<=AL){if(AN%2===0){AS.lineTo(AM,AQ);AM+=AR;}else{AS.moveTo(AM,AQ);AM+=AK;}AN++;}if(AN%2===0){AS.lineTo(AL,AO);}}AS.stroke();},repeat:function(AM,AN){var AK=[],AL;AN=Math.max(0,AN);for(AL=0;AL<AN;AL+=1){AK[AL]=AM;}return AK;},isHierarchyObject:function(AK){return(AK&&AK.t)===AD.DssTypeDimension;},selectPropertyPanel:function(AL,AM){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AL.getDocModel().selectVIUnit(AL.parent.id,true);var AK=AL.edtModel;if(AK){AK.selectTargetByValue(AM);}},pluck:function(AL,AK){if(!k.isArray(AL)){return AL;}return AL.map(function(AM){return AM&&AM[AK];});},pick:function(AL,AK){return AK.reduce(function(AN,AM){AN[AM]=AL[AM];return AN;},{});},isColorManuallySet:function(AM,AL){var AK=AG(AM,AL);if(AK){return AK.isManual;}},getCombColor:function(AM,AL){var AK=AG(AM,AL);if(AK){return AK.color;}},setColorPickerShowAutomatic:function(AL,AK){AL.children[0].fillColor.colorPicker.showAutomatic=AK;},getCharGroupValueChangeCb:function(AK){var AL=(function(){var AM={};AM[d.FONT_WEIGHT]=J.FS_BOLD;AM[d.FONT_STYLE]=J.FS_ITALIC;AM[d.UNDERLINE]=J.FS_UNDERLINE;AM[d.LINE_THROUGH]=J.FS_STRIKETHROUGH;return function(AN,AO){return AN^AM[AO];};}());return function(AN,AM){if(AK instanceof Function){AK=AK();}if(!AK){return ;}switch(AN){case d.COLOR:AK.fontColor.fill.value.setValue(AM);break;case d.FONT_SIZE:AK.fontSize.setValue(AM);break;case d.FONT_FAMILY:AK.fontFamily.setValue(AM);break;case d.FONT_WEIGHT:case d.FONT_STYLE:case d.UNDERLINE:case d.LINE_THROUGH:AK.fontStyle.setValue(AL(AK.fontStyle.getValue(),AN));break;}};},getMetricsInDropZone:C,addLegendFontChangeListeners:function(AL,AM){var AK=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AF(AK,AL,AM);},addLegendBackgroundChangeListeners:function(AL,AM){var AK=["lgdBgFillClr","lgdBgFillTrans"];AF(AK,AL,AM);},isValidDropZone:function(AK){if(AK===undefined){return false;}var AM=Object.keys(AK).filter(function(AN){return AN!=="visProp";});var AL=T.copyProps(AM,AK);return AK&&!T.equals(AL,{});},getDrillCandidates:function(AP){var AM=AP.modelData,AN=AP.model,AL=AN.docModel.datasets,AK=AM.gts,AO=AM.datasetId,AQ=AL[AO],AR=AQ.att||[];return AR.filter(function(AU){var AT=AU.did,AV=AK.row||[],AS=AK.col||[];return AV.concat(AS).every(function(AW){return AW.id!==AT&&AU.hide!==true;});});},getDrillMenuItemsCallback:function(AL,AM,AK){return function(){var AO=o.getDrillCandidates(AL),AN=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});AO.forEach(function(AP){AN.addMenuItem(AP.n,"xt",AM,T.copy(AK,{drillUnit:AP}));});return AN;};},doDrill:function(AM,Aa,AV,Ab){var Ac=AM;function AS(Ae){return Ae.model.controller.cmdMgr;}function AY(){return{success:function Ae(){o.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var AL=Ac.model,AZ=(Ac.getDocModel&&Ac.getDocModel())||Ac.model.docModel,AX=AZ.getDataService(),AP=AX.newUpdate();var AR=true;if(AZ.prefs&&AZ.prefs.rtprnt){AR=parseInt(AZ.prefs.rtprnt,10)===1;}else{if(AL.xtab.defn.tkp!==undefined){AR=parseInt(AL.xtab.defn.tkp,10)===-1;}}Ab=Ab||{};Ab.keepParent=AR;var AQ=AV.call(AM,Aa,Ab);var AT=Ac.zonesModel,Ad=AT.getUpdateCallback(),AU=Ac.model.controller||AZ.controller,AN=AU._getXtabCallback(Ac);AP.add(AQ,R(Ad,AN));var AK=AL.getSelectorDataFromViewFilter(Ac.model.data.vfexpr).concat({keepOnly:true,data:Ac.getSelections()}),AW=AZ.getKeepOnlyOrExcludeAction(Ac.k,AK);AP.add(AW,AY.call(Ac));AS(Ac).execute({execute:function AO(){this.submitUpdate(AP);},urInfo:{callback:AP.callback}});},strStartsWith:function(AM,AL,AK){AK=AK||0;return AM.lastIndexOf(AL,AK)===AK;},changeWidgetBackground:function(AM,AN,AL){var AK=AM.parent;if(AK&&AN!==AL){AK.changeUnitFormats(false,1,AM.getFormats(),d.BACKGROUND_COLOR,AN,AL);AK.raiseEvent({name:"BEMFormatChange",propertyName:d.BACKGROUND_COLOR,value:AN,isTitle:false});}},translateGridError:function(AL,AK){if(AK===undefined){AK=f.AE_ERROR;}if(AK===f.EMPTY_DATA){AL=mstrmojo.desc(12093,"Filter excludes all data");}if(AK===f.NO_DATASET||AK===f.NO_TEMPLATE_UNIT){AL=mstrmojo.desc(11668,"Drag objects here.");}if(!AL){AL=mstrmojo.desc(13687,"Unknown error");}return{msg:AL,type:AK};},hasValidValueInMetric:function(AM,AK){var AL=o.getPropertyByPath(AM,"model.data.gsi.mx");if(AL===undefined||AL.length<=AK||AK<0){return false;}var AN=AL[AK];return["min","max"].every(function(AO){var AP=AN[AO];return AP!==undefined&&AP!==null&&AP!=="";});},renderWidgetErrorRSD:function(AN,AP,AL){var AR=document.createElement("div");var AQ='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+AP+"</div></div>";AR.innerHTML=AQ;AR=AR.firstChild;var AK=AN.width,AM=AN.height;if(AK!==undefined){AR.style.width=AK+"px";}if(AM!==undefined){AR.style.height=AM+"px";}var AO=AN.domNode;if(AO){AL.forEach(function(AS){AO["on"+AS]=undefined;});while(AO.firstChild){AO.removeChild(AO.firstChild);}AO.appendChild(AR);}else{AN.parent.domNode.appendChild(AR);}},visPrint:function(){var AK=mstrmojo.VisUtility.enableInVis;if(AK&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(AN,AK){var AM=AK&&AK.did,AL=AN.model.data.datasetId||"",AO=null;if(AM){AO=s.getDatasetFromAttributeId(AN.model.docModel.datasets,AM);}else{if(AL){AO=s.getDatasetFromId(AN.model.docModel.datasets,AL);}}return AO&&s.hasCGorCon(AO);},findElementsByAttribute:function m(AM,AO,AN,AK){AK=!!AK;var AP=[];if(AN.constructor!==Array){AN=[AN];}var AQ=function(AR){if(AK){return AR.identity&&AR.identity.tlOpt&&AR.identity.tlOpt[AO];}else{return AR.getAttribute(AO);}};function AL(AT){var AR=AQ(AT),AS;if(AT.hasChildNodes()){AS=AT.firstChild;while(AS){if(AS.nodeType===1){AR=AQ(AS);if(AN.indexOf(AR)!==-1){AP.push(AS);}else{AL(AS);}}AS=AS.nextSibling;}}}AL(AM);return AP;},restoreEsForUnit:function X(AO){if(!AO){return ;}var AP=AO.es,AL=AO.fs,AN=AO.otp,AK=AL&&AL.length||0;function AM(AQ){var AR=document.createElement("div");AR.innerHTML=AQ;return AR.innerText;}if(AP){k.forEach(AP,function(AR,AQ){AR.n=AB.decodeHtmlString(AR.n);if(AN===AD.DssTypeAttribute&&AK){switch(AL[AQ%AK].bftp){case p.DssBaseFormHTMLTag:AR.n=AM(AR.n);break;default:}}});}}});mstrmojo.VisUtility.enableInVis=true;var o=mstrmojo.VisUtility;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.models.EnumDragSources","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.models.DatasetDoubleClick","mstrmojo.vi.models._CheckDataCards","mstrmojo.vi.util.TemplateUtils");var Q=mstrmojo.hash,d=mstrmojo.array,s=mstrmojo.func,V=mstrmojo.vi.util.TemplateUtils,m=mstrmojo.vi.ui.DatasetUnitMenuUtils,T="00000000000000000000000000000000",e=mstrmojo.vi.models.EnumDragSources,S=mstrmojo.chart.model.enums.EnumDSSObjectType;var U={ABOVE:0,ON:1,BELOW:2};mstrmojo.vi.models.DropZoneItemType=null;mstrmojo.vi.models.DropZoneType=null;mstrmojo.vi.models.DropZonesEditorConfigType=null;function G(AB,x,z,AC,AF,AA,AD,AE){var y={act:AB,zoneId:x,unitId:z,unitType:AC};if(AF!==undefined){y.unitPos=AF+1;}if(AE!==undefined){y.is_disableonly=AE;}if(AA){y.datasetId=String(AA);y.datasetType=String(AD);}return y;}function L(x){return function(y){var z=[{t:x,did:NaN}];return !!this.getAllowDropInfo(y,z,y.items.length-1,U.BELOW,{src:{data:{src:e.DATASETS}}}).allowedItems.length;};}mstrmojo.vi.models.DropZonesModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.models._CheckDataCards],{scriptClass:"mstrmojo.vi.models.DropZonesModel",hostId:"",docModel:null,getDropZones:mstrmojo.emptyFn,getDZFlatStruct:function I(){var AA=this.getHost().model.data,AB=AA.gsi||{},x=(AB.rows||[]).concat(AB.cols||[]),z={},y={};x.forEach(function(AC){if(AC.hasOwnProperty("st")&&AC.hasOwnProperty("did")){z[AC.did]=AC.st;}});if(AA.dz){Object.keys(AA.dz).forEach(function(AE){var AC=AA.dz[AE],AD=(AC.TemplateUnit||[]).concat(AC.TemplateMetric||[]);AD.forEach(function(AF){var AG=AF.id;if(AF.st===undefined&&z.hasOwnProperty(AG)){AF.st=z[AG];}});y[AE]=AD;});}return y;},getAvatarIconClass:function Y(){throw new Error(this.scriptClass+" must implement getAvatarIconClass method.");},canSwapAxis:function l(){return false;},swapAxis:function A(){if(this.canSwapAxis()){throw new Error(this.scriptClass+" must implement swapAxis method if this.canSwapAxis returns true.");}},canDefineSubtotals:function(){return false;},getZoneMenuItems:function o(y,x){},getUnitMenuItems:function f(y,x,AA,z){},getMultiUnitsMenuItems:function c(y,x,z){var AA=this.id;if(m.getMultiSelectionShortcutMetricFunctions(z).length){y.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[AA].getMultipleMetricsCalcMenus(x,z,true);});}y.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[AA].deleteItems(x,z);});},deleteItem:function H(y,x){this.throwAbstractMethodError("deleteItem");},deleteItems:function H(x,y){this.throwAbstractMethodError("deleteItems");},addZoneItem:function b(z,AA){z.t=z.t||4;if(z.did===undefined){z.did=z.id;}var x=V.findUnitsById(this.getHost().model.data.gsi,z.did)[0];if(x){Q.copyProps(["n","um"],x,z);}if(z.t===12||z.t===47||z.t===4){var y=this.docModel.datasets,AC=false,AB=z.t===4?"mx":"att";Object.keys(y).every(function(AD){(y[AD][AB]||[]).every(function(AE){if(AE.did===z.did){AC=true;var AF;for(AF in AE){if(!z.hasOwnProperty(AF)){z[AF]=AE[AF];}}}return !AC;});return !AC;});}AA.push(z);},getZone:function n(AC,AB,AA,x,y){var z=[];(AA||[]).forEach(function(AD){this.addZoneItem(Q.copy(AD),z,y);},this);return{n:AC,id:AB,enabled:!x,cssClass:(y&&y.allowSingle)?"singleUnitZone":"",getDropIconCls:function(){return"pivot";},title:(y&&y.title)||"",items:z};},getZoneForObject:function O(y){var x=null;this.getDropZones().zones.every(function(z){if(d.find(z.items,"did",y)>-1){x=z;return false;}return true;});return x;},getUnitIndexInZone:function j(x,y){return d.find(x.items,"did",y.did);},isZoneDropAllowed:function R(x){if(!x.enabled){return false;}return true;},getAllowDropInfo:function C(y,z,x,AA){return{allowedItems:z.concat(),removeReplaced:AA===U.ON&&d.find(z,"did",y.items[x].did)===-1};},getTargetEdgePortion:function M(x){return 0.33;},allowInsertNewMetric:L(4),allowInsertNewAttribute:L(12),unitsDropped:function t(x,y,z,AB,AA){if(this.unitDropped!==mstrmojo.vi.models.DropZonesModel.prototype.unitDropped){return this.unitDropped(x,y,z.idx,z.edge,AB,AA);}this.throwAbstractMethodError("unitsDropped");},getHost:function Z(){return mstrmojo.all[this.hostId];},getHostModel:function B(){this.throwAbstractMethodError("getHostModel");},shouldMetricNameShowIcon:function w(){return true;},addUnitsFromDataSource:function F(AE,AC,z,y){var AB=this.docModel.controller,x;z=z||[];var AA=false,AG=this.getHost(),AD=[],AH;[].concat(AE).forEach(function(AI){AH=this.isMetric(AI);AA=AH||AA;x=mstrmojo.vi.models.DatasetDoubleClick.addObject(AI,AC,this);z=z.concat(x);if(AH){AD.push(AI);}},this);if(z&&z.length){if(AA&&x&&x[0].actions){x[0].actions.push(AG.model.getValuesDefaultFormatGridZoneAction(AD));}var AF=AB._getXtabCallback(this.getHost());if(y){AF=s.wrapMethods(y,AF);}if(this.existLargeOrManyItems()){this.warnAndExecCallBackForAddUnits(function(){AB.submitUndoRedoUpdates(z,{},AF);});return ;}AB.submitUndoRedoUpdates(z,{},AF);}},changeZoneUnits:function k(y,x,z){},getZoneAddCandidates:function X(x){return[];},getRequiredItemsInfo:function g(y){if(!y){return 0;}var x=[];this.getDropZones().zones.forEach(function(z){x=x.concat(z.items);});return Number(x.reduce(function(z,AA){if(parseInt(AA.did,10)!==-1&&AA.t===y){return z+1;}return z;},0));},getUpdateCallback:function P(){var y=this.getHost().parent.k,x=this.docModel;return{success:function(){x.getPanel().getUnitByKey(y).selectVIUnit(true);}};},getUpdateTemplateAction:function K(x){return this.docModel.getDataService().getUpdateTemplateAction(this.getHost().k,x);},getReplaceCandidates:function J(x,z){var y=[],AC=z.t,AB=z.did,AA=this.getHostModel().datasetId;this.getDropZones().zones.forEach(function(AD){((AD&&AD.items)||[]).forEach(function(AF){var AG=AF.t,AE=AF.did;if(AG!==21&&AE!=="-1"&&AE!==T&&((AG===4&&AC===4)||(AG!==4&&AC!==4))&&AE!==AB&&d.find(y,"did",AE)===-1){y.push(AF);}});});if(AA){this.docModel.getDatasetUnits(AC===4?["mx"]:["att"],null,AA).forEach(function(AD){if(d.find(y,"did",AD.did)===-1&&AD.did!==AB&&!AD.hide){y.push(AD);}});}return m.getSortedDatasetUnits(y);},getDropTargetIndex:function D(y,AA){var x=AA.idx,z=(AA.edge===U.ON&&!AA.removeReplaced)?U.BELOW:AA.edge,AC=x,AB=this,AD={};AA.allowedItems.forEach(function(AF){var AE=AB.getUnitIndexInZone(y,AF);if(AE!==-1){AD[AE]=AF;}});Q.forEach(AD,function(AF,AG){var AE=parseInt(AG,10);if(AE<x){AC--;}else{if(AE===x){z=U.ON;}}});return z===U.BELOW?(AC+1):AC;},getAddDropZoneUnitAction:function i(y,AA,x,z){return G("addDropZoneUnit",y.id,AA.did,AA.t,x,z&&z.datasetId,(z&&z.datasetType)||S.DssTypeReportDefinition);},getAddDropZoneUnitsActions:function v(y,z,x,AA){return z.reverse().map(function(AB){return G("addDropZoneUnit",y.id,AB.did,AB.t,x,AA&&AA.datasetId,(AA&&AA.datasetType)||S.DssTypeReportDefinition);});},getRemoveDropZoneUnitAction:function W(x,y,z){return G("removeDropZoneUnit",x.id,y.did,y.t,undefined,undefined,undefined,z);},checkAndAddThresholdAction:function q(z,x,y){return false;},getAllZones:function(){return this.getDropZones().zones||[];},getClearAllUnitsActions:function N(){var x=[];(this.getAllZones()).forEach(function(y){((y&&y.items)||[]).forEach(function(z){x.push(this.getRemoveDropZoneUnitAction(y,z));},this);},this);return x;},getClearAllUnitsUnTemplateActions:function a(){return[];},clearAllDropZones:function p(AG){var z=this.getClearAllUnitsActions(),AB=this.getClearAllUnitsUnTemplateActions(),AI=this.getHost(),AE=AI.id,AA=AI.gridData||AI.model.data||AI.node.data,AD=AA.vlexpr,AJ=this.docModel,y=AI.model,AC=AJ.controller,AF=s.wrapMethods({success:function(){var AK=mstrmojo.all[AE];if(AK._viSelections){AK.clearSelections();AK.endSelections();}}},AC._getXtabCallback(AI),{success:function AH(){mstrmojo.all[AE].raiseEvent({name:"regenerateToolbar"});}}),x=y.getKeepOnlyActionsForAssociatedNodes([],AF);if(AD){x.actions.push(AC.dataService().getUpdateTemplateAction(AI.k,y.getRemoveMetricLimitsAction(AD)));}if(AG){AG.actions=[].concat(AG.actions).concat(x.actions);AG.callback=s.wrapMethods(AG.callback,x.callback);}else{AG=x;}if(AB&&AB.length>0){AG.actions=AG.actions.concat(AB);}this.submitDropZoneTemplateUpdates(z,AG);},submitDropZoneUpdates:function h(AD,AE,z){var AB=this.getHost(),y=this.docModel,x=y.controller,AA=[].concat(AD||[]);if(AA&&AA.length){var AC=AE||x._getXtabCallback(AB);x.cmdMgr.execute({execute:function(){this.submit(AA,AC,z);},urInfo:{callback:AC}});}},submitDropZoneTemplateUpdates:function E(x,z){var y=(x&&x.length)?[this.getUpdateTemplateAction(x)]:[];if(z&&z.actions){y=y.concat(z.actions);}this.submitDropZoneUpdates(y,z&&z.callback,z&&z.extras);},getHighlightTargets:function u(y,x){return[x];}});mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION=U;mstrmojo.vi.models.DropZonesModel.ENUM_REQUIREMENT_TYPE={ATTRIBUTE:12,METRIC:4,LONGITUDE:"long",LATITUDE:"lat"};}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.DataGrid","mstrmojo.hash","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.func","mstrmojo.array");var S=mstrmojo.hash,M=mstrmojo.array,V=mstrmojo.Button.newWebButton,J=mstrmojo.ui.Pulldown.newPulldown,K=mstrmojo.models.FormatModel.getFormatUpdate,O=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,H=mstrmojo.vi.ui.DatasetUnitMenuUtils,a;var U=1,T=2,b=3,E="410px";var Y=[{n:mstrmojo.desc(6031,"Off"),v:"0"},{n:mstrmojo.desc(6030,"On"),v:"1"},{n:mstrmojo.desc(8504,"Form name only"),v:"2"},{n:mstrmojo.desc(8505,"Show attribute name once"),v:"3"},{n:mstrmojo.desc(4531,"Automatic"),v:"4"}],Z=[{n:mstrmojo.desc(13786,"Show both nulls and zeros"),v:"-1"},{n:mstrmojo.desc(13787," Hide both nulls and zeros"),v:"2"},{n:mstrmojo.desc(9845,"Hide nulls only"),v:"0"},{n:mstrmojo.desc(9846,"Hide zeros only"),v:"1"}],A=[{n:mstrmojo.desc(13544,"Last selection only"),v:0},{n:mstrmojo.desc(13545,"Intersection of all selections"),v:1}],I=[{n:mstrmojo.desc(959,"Default"),v:"-1",title:mstrmojo.desc(959,"Default")},{n:mstrmojo.desc(9640,"Inner Join"),v:"0",title:mstrmojo.desc(9640,"Inner Join")},{n:mstrmojo.desc(9641,"Outer Join"),v:"1",title:mstrmojo.desc(9641,"Outer Join")}],P=[{n:mstrmojo.desc(959,"Default"),v:"-1",title:mstrmojo.desc(959,"Default")},{n:mstrmojo.desc(13177,"Inner Join"),v:"0",title:mstrmojo.desc(13178,"Results displaying only those attribute elements that have metric value")},{n:mstrmojo.desc(13179,"Outer Join - Ignore Filter"),v:"2",title:mstrmojo.desc(13180,"Outer join to attribute's look up table without considering the filter on template")},{n:mstrmojo.desc(13181,"Outer Join - Preserve Filter"),v:"3",title:mstrmojo.desc(13182,"Outer join to attribute's look up table after considering the filter on template")}];var R={"-1":mstrmojo.desc(959,"Default"),"0":mstrmojo.desc(9640,"Inner Join"),"2":mstrmojo.desc(13179,"Outer Join - Ignore Filter"),"3":mstrmojo.desc(13181,"Outer Join - Preserve Filter")},D={"-1":mstrmojo.desc(959,"Default"),"0":mstrmojo.desc(9640,"Inner Join"),"1":mstrmojo.desc(9641,"Outer Join")};function Q(h,e,d,g){var f={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",col1Width:h,col2Width:e,children:d};return S.copy(g,f);}function X(e,f,d){return S.copy(d,{scriptClass:"mstrmojo.Label",slot:f,text:e});}function B(g,d){return[X(g,"col1Node",{cssClass:"subTitle"}),{scriptClass:"mstrmojo.ui.CheckList",orientation:"h",slot:"col2Node",preBuildRendering:function e(){var j=mstrmojo.all[a].data[d],h=this.items,i=this.selectedIndices;if(j){M.forEach(h,function(l,k){i[k]=j[l.id]==="-1";});}},postselectionChange:function f(h){var j=this.items,i=[h.added,h.removed];i.forEach(function(l,k){if(l&&l.length>0){K(d+j[l[0]].id,k===0?"-1":"0",mstrmojo.all[a].newData);}});},items:[{n:mstrmojo.desc(2969,"Show"),id:O.SHOW_HEADER},{n:mstrmojo.desc(1095,"Merge"),id:O.MERGE_HEADER},{n:mstrmojo.desc(2970,"Lock"),id:O.LOCK_HEADER}]}];}function G(e){var d=mstrmojo.all[a];if(e){d.update=d.update.actions?d.update:{actions:[]};d.update.actions=d.update.actions.concat(mstrmojo.hash.valarray(d.joinActions));d.update.callback=mstrmojo.func.wrapMethods(d.update.callback,d.host.parent.model.getRebuildCallback());d.submitAction(d.newData,d.update.actions,d.update.callback,d.update.extras);}d.newData=d.update={};d.joinActions={};d.close();}function N(e){var h=e.parent.data,f=mstrmojo.all[a],d=f.host.k,g=f.host.controller,i=new mstrmojo.ui.menus.MenuConfig();f.joinActions=f.joinActions||{};if(h.did==="AllAttr"){P.forEach(function(j){i.addMenuItem(j.n,"",function(){e.parent.jtValue.set("text",j.n);h.v=j.v;h.dv=j.n;f.joinActions.AllAttr=g.dataService().getSetAttributesJoinTypeAction(d,j.v);});});}else{I.forEach(function(j){i.addMenuItem(j.n,"",function(){e.parent.jtValue.set("text",j.n);h.v=j.v;h.dv=j.n;f.joinActions[h.did]=g.dataService().getSetMetricJoinTypeAction(d,h.did,h.dt,h.t,j.v);});});}i.hostId=a;i.isHostedWithin=false;i.hostElement=e.domNode;i.menuCssClass="joinbehavior";i.setAlignment(3,2);f.openPopup(i.newInstance());}mstrmojo.vi.ui.editors.MoreOptionsEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.editors.MoreOptionsEditor",host:undefined,showHeadersSection:false,data:undefined,lockHeadersCase:undefined,update:undefined,newData:undefined,joinActions:undefined,cssClass:"mstrmojo-MoreOptions-Editor",title:mstrmojo.desc(9126,"More options"),help:"more_options_dialog_box.htm",submitAction:mstrmojo.emptyFn,init:function W(d){this._super(d);a=this.id;this.newData=this.update={};this.joinActions={};this.onshowHeadersSectionChange(this.showHeadersSection);},onOpen:function F(){this.refresh();},_set_lockHeadersCase:function c(g,d){this.lockHeadersCase=d;var e=this.data,f=this.lockHeadersCase;if(!e){e=this.data={rows:{},cols:{}};}else{e.rows=e.rows||{};e.cols=e.cols||{};}e.rows.lhv=(f===b||f===U)?"-1":"0";e.cols.lhv=(f===b||f===T)?"-1":"0";},onshowHeadersSectionChange:function L(e){var f=e.value,d=this.headersSection;if(!f&&d){this._headersSecOrphan=d;this.removeChildren(d);}else{if(f&&!d){this.addChildren(this._headersSecOrphan,0);}}},children:[Q("26%","74%",[X(mstrmojo.desc(2967,"Headers"),"col1Node",{cssClass:"title"}),Q("20%","80%",B(mstrmojo.desc(2968,"Rows"),"rows"),{slot:"col2Node"}),Q("20%","80%",B(mstrmojo.desc(122,"Columns"),"cols"),{slot:"col2Node"})],{alias:"headersSection",cssClass:"headers",width:E}),Q("26%","74%",[X(mstrmojo.desc(4083,"Display"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[X(mstrmojo.desc(8503,"Show attribute form names:"),"containerNode",null),J(Y,function(d){K(O.LONG_NAME,d.v,mstrmojo.all[a].newData);},0,{width:"151px",preBuildRendering:function C(){var d=this.items.map(function(e){return e.v;}).indexOf(mstrmojo.all[a].data[O.LONG_NAME]);this.selectedIndex=Math.max(d,0);}},true)]},{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row2",children:[X(mstrmojo.desc(13200,"Hide Null/Zero"),"containerNode",null),J(Z,function(e){var d=e.v,f=d==="-1"?"-1":"0";if(d!=="-1"){K(O.HIDE_NULL,d,mstrmojo.all[a].newData);}K(O.SHOW_ALL_ROWS,f,mstrmojo.all[a].newData);},0,{width:"181px",preBuildRendering:function C(){var e=mstrmojo.all[a].data,d=e[O.SHOW_ALL_ROWS]==="-1"?0:this.items.map(function(f){return f.v;}).indexOf(e[O.HIDE_NULL]);this.selectedIndex=Math.max(d,0);}},true)]}],{alias:"viewSection",cssClass:"view",width:E}),Q("26%","74%",[X(mstrmojo.desc(13546,"Filtering"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[X(mstrmojo.desc(13547,"When this visualization is filtered by multiple other visualizations, filter by:"),"containerNode",{cssClass:"dropdownLabel"}),J(A,function(d){var e=mstrmojo.all[a],f=e.host;if(f.switchFilterType){e.update=f.switchFilterType(d.v);}},0,{width:"181px",preBuildRendering:function C(){var d=mstrmojo.all[a].host;if(d.getFilterType){this.selectedIndex=d.getFilterType();}}},true)]}],{alias:"filteringSection",cssClass:"filtering",width:E}),Q("26%","74%",[X(mstrmojo.desc(4571,"Join Behavior"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.DataGrid",slot:"col2Node",cssClass:"jointype",banding:false,columns:[{headerText:mstrmojo.desc(5467,"Objects"),dataField:"n",headerCss:"objects-hd",tooltip:true,itemTooltipField:"tf",itemCSSField:"itemCss",colWidth:140,colHeight:24},{headerText:mstrmojo.desc(13176,"Join Type"),headerCss:"jointype-hd",dataWidget:{scriptClass:"mstrmojo.Box",cssClass:"jt-col",children:[{scriptClass:"mstrmojo.Label",cssClass:"jt-value",alias:"jtValue",bindings:{text:"this.parent.data.dv"}},{scriptClass:"mstrmojo.Button",cssClass:"jt-menu",alias:"jtBtn",onclick:function(){var d=mstrmojo.all[a];N.call(d,this);}}]}}],items:[],itemFunction:function(){var d=mstrmojo.DataGrid.prototype.itemFunction.apply(this,arguments);d.themeClassName="mojo-theme-dark";return d;},preBuildRendering:function C(){var n=mstrmojo.all[a].host,m=n.model&&n.model.docModel,g=n.gridInfo||{},o=g.rows||[],k=g.cols||[],l=g.mx||[],h=g.dmx||[],j=n.tmsProps,e=j.tpltProp&&j.tpltProp["VLDB Select"]&&j.tpltProp["VLDB Select"][0].v,i=[];e=(e&&e.length)?e:"-1";(o.concat(k)).some(function(p){if(p.t===12){i.push({did:"AllAttr",n:mstrmojo.desc(13185,"All Attributes"),v:e,dv:R[e],itemCss:"jt-allattr"});return true;}return false;});var d=l.concat(h);d=M.filter(d,function(q){var s=H.getUnitFromDataset(m.datasets,q.did,4),p=q.isSmart&&q.decomposable===2;return s&&(!s.um||q.afb||!q.isSmart||p);});var f=[].concat(j.mxProp);h.forEach(function(q){var p={};p[q.did]=q.prop;f.push(p);});(d||[]).forEach(function(q){var p={v:"-1"};(f||[]).forEach(function(s){if(s[q.did]){(s[q.did]["VLDB Select"]||[]).forEach(function(t){if(t.n==="Metric Join Type"){p=t;}});}});i.push({did:q.did,n:q.n,dt:p.dt,t:4,v:p.v,dv:D[p.v],itemCss:"jt-metric"});});this.items=i;mstrmojo.DataGrid.prototype.preBuildRendering.apply(this,arguments);}}],{alias:"JoinBehaviorSection",cssClass:"joinbehavior",width:E}),{alias:"buttonBar",scriptClass:"mstrmojo.Box",slot:"buttonNode",children:[V(mstrmojo.desc(221,"Cancel"),function(){G(false);}),V(mstrmojo.desc(118,"Save"),function(){G(true);},true)]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.array","mstrmojo.vi.models.editors.ControlsViewFactory","mstrmojo.Label","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.vi.ui.editors.MoreOptionsEditor");var E=mstrmojo.hash,A=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,I="mstrmojo-more-options-editor";mstrmojo.vi.models.editors.EditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.ControlsViewFactory,null,{scriptClass:"mstrmojo.vi.models.editors.EditorModel",hostId:"",help:"",getHost:function Q(){return mstrmojo.all[this.hostId];},docModel:null,getEditorContents:mstrmojo.emptyFn,getGroupTitle:function J(R){return new mstrmojo.Label({cssClass:"edt-title",text:R});},getShowTitleCheckbox:function C(){var R=this.getHost();return this.getCheckboxAndLabel(R.parent.getTitleBarVisibility(),mstrmojo.desc(13599,"Show titlebar"),function(S){R.parent.toggleTitleBar(!!S);});},getTextAlign:function L(T,U,S){var R=new mstrmojo.vi.ui.TextAlignButtonBar(!S?null:{itemsValueMap:S});R.singleSelect(mstrmojo.array.find(R.items,"id",T));R.onValueChange=U;return R;},getWrapText:function B(S,R){return this.getCheckboxAndLabel(S,mstrmojo.desc(13577,"Wrap text"),R);},getTextDirection:function K(S,T){var R=0;if(S){R=S===3?1:2;}return this.getLabelAndControl(mstrmojo.desc(11914,"Direction:"),this.getPulldown([{n:mstrmojo.desc(2066,"Horizontal"),v:0},{n:mstrmojo.desc(5155,"90 degrees"),v:90},{n:mstrmojo.desc(5156,"-90 degrees"),v:-90}],T,R));},getOverflow:function O(S,R){return this.getLabelAndControl(mstrmojo.desc(11915,"Overflow:"),this.getPulldown([{n:mstrmojo.desc(2974,"Clip"),v:false},{n:mstrmojo.desc(2976,"Scroll"),v:true}],R,S?1:0));},getChangeFormatPropertyFn:function H(R,S){var T=this.id;return function(W,U){var V=mstrmojo.all[T];V.docModel.changeUnitFormatProperty(V.getHost().parent,[{formatType:S||1,propertyName:R,newValue:W,oldValue:U}]);};},getChangeGroupPropertyFn:function P(R){var S=this.id;return function(T,V,U){(mstrmojo.all[S].getChangeFormatPropertyFn(T,R))(V,U);};},getCharacterGroup:function G(U,R,S){var V={onGroupValueChange:U};if(S){V.visibleControls=S;}var T=new mstrmojo.ui.editors.controls.CharacterGroup(V);T.setFormatSource(R);return T;},getContainerGroup:function F(R,U,S,T){var V=new mstrmojo.ui.editors.controls.ContainerGroup(E.copy(T,{onGroupValueChange:U||this.getChangeGroupPropertyFn(),visibleControls:S||(A.FILL_COLOR+A.BORDER)}));V.setFormatSource(R);return V;},getMoreOptionsEditorLink:function N(S,R,T){return new mstrmojo.Label({text:mstrmojo.desc(9126,"More options"),cssClass:"edt-link",onclick:function(){this.openMoreOptionsEditor(S,R,T);}.bind(this)});},openMoreOptionsEditor:function D(V,R,W){var T=this.getHost();var S=mstrmojo.all[I]||new mstrmojo.vi.ui.editors.MoreOptionsEditor({id:I,submitAction:function U(Z,X,d,Y){var a=this.host,b=a.controller,c=[];if(!E.isEmpty(Z)){d=mstrmojo.func.wrapMethods(b._getXtabCallback(a),d);c=[b.dataService().getUpdateTemplateAction(a.k,[a.model.getAdvancedPropertiesAction(Z)])];}c=c.concat(X||[]);if(!E.isEmpty(c)){b.submitUndoRedoUpdates(c,null,d,Y);}}});S.set("data",V);S.set("showHeadersSection",!!R);S.set("lockHeadersCase",W);S.set("host",T);S.open();},replaceChildControls:function M(T,S){var R=[].concat(T.children||[]);T.removeChildren();R.forEach(function(U){U.destroy();});T.addChildren(S);T.doLayout();}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.DropZonesModel","mstrmojo.array","mstrmojo.hash","mstrmojo.vi.models._DropZoneCommon","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLBaseFormType");mstrmojo.requiresDescs(190,1388,3224,5188,11806,12287,13295,13296,13624,13625,14003,14655,14656,14717);var H=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.vi.ui.DatasetUnitMenuUtils,I="-1",D=mstrmojo.mstr.EnumDSSXMLBaseFormType,F=mstrmojo.mstr.EnumDSSXMLObjectTypes;mstrmojo.vi.models.TemplateBasedDropZones=mstrmojo.declare(mstrmojo.vi.models.DropZonesModel,[mstrmojo.vi.models._DropZoneCommon],{getClearAllUnitsActions:function G(){var K=[],J=this.getHost().model;this.getDropZones().zones.forEach(function(L){var M=L.id;L.items.forEach(function(O,N){if(O.did!==I){K.push(J.getRemoveTemplateUnitAction(C.copy(O,{axis:M,unitPos:N+1})));}});});return K;},getMultiUnitsMenuItems:function B(K,J,L){var M=this.id;if(E.getMultiSelectionShortcutMetricFunctions(L).length){K.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[M].getMultipleMetricsCalcMenus(J,L,false);});K.addSeparator();}K.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[M].deleteItems(J,L);});},getExtraUnitMenuItems:function A(K,J,M,L){},getUnitMenuItems:function A(Q,T,Y,V){if(!Y){throw new Error(this.scriptClass+"::getUnitMenuItems: Item must be provided.");}var S=T.items,X=this.getHost(),M=S.length,N=T.id,L={zone:T,axis:N,idx:H.indexOf(S,Y),cnt:M,item:Y,metricsAxis:(this.getHost().gridInfo||{}).tma,useDropzone:false},U=this,K=this.id,R=Y.did===I,J=(Y.t===F.Consolidation&&Y.st===12033);if(J){Q.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",function(){var Z={otp:Y.t,id:Y.did,n:Y.n,axis:T.id,ui:L.idx};X.derivedElementsEdit(Z);});Q.addSeparator();}if(!R){if(Y.t===F.Attribute&&Y.st===3076){Q.addMenuItem(mstrmojo.desc(14655,"Expand All Levels"),"",function(){var Z={id:Y.did};X.raExpandAll(Z,true);});Q.addMenuItem(mstrmojo.desc(14656,"Collapse All Levels"),"",function(){var Z={id:Y.did};X.raExpandAll(Z,false);});Q.addSeparator();}this.addSortMenu(L,Q,true);Q.addSeparator();if(Y.t===F.Metric){if(Y.um){Q.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){U.editDerivedMetric(L);},L);Q.addSeparator();}if(this.docModel.findDatasetIdFromUnit(Y.did)&&!this.docModel.isFromSolrCube(Y.did)&&!this.docModel.isFromMDXCube(Y.did)){Q.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"",K,U.getAggregateByMetricSubMenu,L);Q.addSeparator();}Q.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),K,U.getCalculationEditorCfg,L);Q.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"",K,U.getShortcutMetricSubMenu,L);Q.addMenuItem(mstrmojo.desc(13624,"Create Metric..."),"",function(){U.newDerivedMetric(L);},L);}if(Y.t===F.Attribute){var P=Y.did||"",O=P?E.getDatasetFromAttributeId(this.docModel.datasets,P):null,W=this.isDynamicLink(Y);if(!O||!this.docModel.isMDXDataset(O)){if(Y.da){Q.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){U.editDerivedAttribute(L);},L);Q.addSeparator();}if(((!O)||!E.hasCGorCon(O))&&!W){Q.addMenuItem(mstrmojo.desc(13625,"New Attribute..."),"",function(){U.newDerivedAttribute(L);},L);Q.addMenuItem(mstrmojo.desc(14717,"Create Links..."),"",function(){U.newDynamicLinkAttr(L);},L);}}if(!E.hasOldDEOverDatasets(Y.did,this.docModel.datasets)&&!W){Q.addMenuItem(mstrmojo.desc(13295,"Create Groups..."),"eg",function(){var Z={otp:Y.t,id:Y.did,n:Y.n,axis:T.id,ui:L.idx};X.derivedElementsEdit(Z);});}}this.getExtraUnitMenuItems(Q,T,Y,L);Q.addSeparator();if(U.hasReplaceCandidates(L)){Q.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",K,U.getReplaceSubMenu,L);}Q.addMenuItem(mstrmojo.desc(1388,"Rename"),K,function(){mstrmojo.all[K].renameItem(V,Y);});Q.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[K].deleteItem(T,L.idx);});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var E=mstrmojo.array,D=mstrmojo.hash,A=mstrmojo.func.wrapMethods;function B(F){return F.model.controller.cmdMgr;}mstrmojo._colorPalette=mstrmojo.provide("mstrmojo._colorPalette",{listenToUpdateColorMap:function(I){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var H=this,G,F=(H.getDocModel&&H.getDocModel())||H.model.docModel;if(F){return F.attachEventListener("colorMapChanged",H.id,function(K){G=H.parent.parent;if(G.isPanelDisplaying()){I.call(H);}else{var J=G.attachEventListener("panelDisplaying",H.id,function(L){if(H.postBuilderingCalled){I.call(H);}G.detachEventListener(J);});}});}},detachUpdateColorMapListener:function(G){if(!G){return ;}var F=(this.getDocModel&&this.getDocModel())||this.model.docModel;F.detachEventListener(G);},submitUpdatesAndPersistXML:function C(H,L,F,P){if(!H||H.length===0){return ;}var G={},M=this,Q=(M.getDocModel&&M.getDocModel())||M.model.docModel,O=Q.getDataService(),I=M.model.controller||Q.controller,J=I._getXtabCallback(M);if(F){D.copy(mstrmojo.DocDataService.SUPPRESS_DATA,G);}if(P){D.copy(mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION,G);}var K=false;E.forEach(H,function(R){if(R.act==="updateElementsPropertiesMap"){K=true;}});if(K){A(Q.getUpdateColorMapCallback(),J);}B(M).execute({execute:function N(){var R=O.newUpdate(this,undefined);R.add(H,L,G);this.submitUpdate(R);},urInfo:{callback:J}});},updateColorMap:function(I,G){if(!E.isArray((G))){G=[G];I=[I];}if(I.length!==G.length){throw new Error("comb and color number mismatch");}var F=(this.getDocModel&&this.getDocModel())||this.model.docModel,J=mstrmojo.VisUtility.getUpdateColorMapAction.bind(this),H=I.map(function(L,K){return J(L,JSON.stringify({color:G[K]}));});this.submitUpdatesAndPersistXML(H,F.getUpdateColorMapCallback(),false,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var g=mstrmojo.chart,c=g.model,o=mstrmojo.VisUtility,Q=g.enums,E=Q.EnumFontStyle,S=c.enums,y=S.EnumDSSGraphProperty,X=S.EnumDSSGraphDataTextShowType,z=S.EnumDSSGraphObject;var F=mstrmojo.gm.EnumDataLabels;var V=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var p=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var Y=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function U(AI){switch(AI){case y.DssGraphFontColor:return 0;case y.DssGraphFontName:return 1;case y.DssGraphFontSize:return 2;case y.DssGraphFontStyle:return 3;case y.DssGraphFontSize100:return 4;default:return -1;}}function u(AI){switch(AI){case y.DssGraphAreaColor:return 0;case y.DssGraphFillEffect:return 1;case y.DssGraphAreaAlpha:return 2;}return -1;}function w(AI){var AJ;switch(AI){case z.DssGraphX1Body:case z.DssGraphX1Label:case z.DssGraphX1Major:case z.DssGraphX1Minor:case z.DssGraphUserLabel3:case z.DssGraphUserLine3:AJ="X1";break;case z.DssGraphX2Body:case z.DssGraphX2Label:case z.DssGraphX2Major:case z.DssGraphX2Minor:case z.DssGraphUserLabel4:case z.DssGraphUserLine4:AJ="X2";break;case z.DssGraphY1Body:case z.DssGraphY1Label:case z.DssGraphY1Major:case z.DssGraphY1Minor:case z.DssGraphUserLabel1:case z.DssGraphUserLine1:AJ="Y1";break;case z.DssGraphY2Body:case z.DssGraphY2Label:case z.DssGraphY2Major:case z.DssGraphY2Minor:case z.DssGraphUserLabel2:case z.DssGraphUserLine2:AJ="Y2";break;case z.DssGraphZBody:AJ="Z";break;case z.DssGraphO1Body:case z.DssGraph2DO1Label:case z.DssGraphO1Major:case z.DssGraphO1Minor:AJ="O1";break;case z.DssGraphO2Body:case z.DssGraph2DO2Label:case z.DssGraphO2Major:case z.DssGraphO2Minor:AJ="O2";break;default:AJ="No_Axis";break;}return AJ;}function d(AI,AJ){if(!!AI===false){return undefined;}return undefined;}function W(AN,AI){if(!!AN===false){return undefined;}var AS,AQ,AP=AI.isVertical!==undefined?AI.isVertical:true,AK=AI.isGridChart||false,AT=AI.isPieShape||false,AO={Name:0,Value:0},AL=AN.gaid,AM=AN.goid,AJ=AN.gsid,AR=AN.v;if(!!AL===false){return undefined;}switch(AL){case y.DssGraphShowLBLFeeler:if(AT){AO.Name="DataLabel";if((AR&X.DssGraphDataTextValue)!==0){AO.Value=F.SHOW_VALUE_ONLY;}else{if((AR&X.DssGraphDataTextLabel)!==0){AO.Value=F.SHOW_TEXT_ONLY;}else{AO.Value=F.HIDE;}}}break;case y.DssGraphAreaColor:case y.DssGraphFillEffect:case y.DssGraphAreaAlpha:AQ=u.call(this,AL);if(AQ<0){return undefined;}if(AM===z.DssGraphBackground){AO.Name=Y[AQ][0];if(AO.Name.search("Trans")!==-1){AO.Value=AR/255*100;}else{AO.Value=AR;}}break;case y.DssGraphShowLegendText:AO.Name="LegendVisibleness";AO.Value=AR===0?false:true;break;case y.DssGraphSDShowDataText:AO.Name="ShowSeriesDataLabel";AO.Value=AR!==0;break;case y.DssGraphShowDataText:if(AT===false){AO.Name="DataLabel";AO.Value=F.HIDE;if(AR&X.DssGraphDataTextValue){AO.Value=F.SHOW_VALUE_ONLY;}else{if(AR&X.DssGraphDataTextLabel){AO.Value=F.SHOW_TEXT_ONLY;}}}break;case y.DssGraphFontColor:case y.DssGraphFontName:case y.DssGraphFontSize100:case y.DssGraphFontSize:case y.DssGraphFontStyle:AO.Value=AR;AS=w.call(this,AM);AQ=U.call(this,AL);if(AQ<0){return undefined;}if(AQ===4){AQ=3;AO.Value/=100;}if(AS==="No_Axis"){if(AM===z.DssGraphDataText){if(AT){return undefined;}AO.Name=V[AQ][2];}else{if(AM===z.DssGraphPieFeelerLabel||AM===z.DssGraphPieFeelerLabel){if(AT===false){return undefined;}AO.Name=V[AQ][2];}else{if(AM===z.DssGraphLegendText){AO.Name=V[AQ][3];}else{return undefined;}}}}else{if(AS[0]==="X"){AO.Name=V[AQ][0];}else{if(AS[0]==="Y"){AO.Name=V[AQ][1];}else{if(AS[0]==="O"){AO.Name=AP?V[AQ][0]:V[AQ][1];}else{return undefined;}}}}break;}return AO;}var T,i=String.fromCharCode,AC=mstrmojo.locales.datetime,AH=0,L=document.getElementById("measureText"),B={},h={};var m=0.03,K=0,R=0,H=0.2;function n(AJ){var AI,AK=[],AL;for(AI=0;AI<=AJ;AI++){AL=AI.toString(16);if(AL.length===1){AL="0"+AL;}AK[AI]=AL;}T=AK;return AK;}function AF(AI){var AJ=parseFloat(AI);if(isNaN(AJ)===false&&AJ!==undefined&&AJ!==null){return AJ;}return 0;}function D(AI){AI=AI.replace(/ddd/g,"EEE");AI=AI.replace(/AM\/PM/g,"a");AI=AI.replace(/tt/g,"a");AI=AI.replace(/:'/g,":");AI=AI.replace(/'\/'/g,"/");AI=AI.replace(/\\/g,"");var AJ,AL=true,AK=AI.length;for(AJ=0;AJ<AK;AJ++){if(AI[AJ]==="h"||AI[AJ]==="H"||AI[AJ]===":"){AL=true;}else{if(AI[AJ]===" "&&AL){AL=true;}}if(AI[AJ]==="m"&&AL){AI=AI.substring(0,AJ)+"M"+AI.substring(AJ+1);}}return AI;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{point2D:{},rect2D:{},tripleId:{create:function M(AJ,AN,AL,AK,AM){if(AJ===null||AJ===undefined){AJ=-3;}if(AN===null||AN===undefined){AN=-3;}if(AL===null||AL===undefined){AL=-3;}var AI={mObjectId:AJ,mSeriesId:AN,mGroupId:AL};if(AK!==undefined&&AK!==null){AI.angleByIndex=AK;}if(AM!==undefined&&AM!==null){AI.sliceById=AM;}return AI;},walks:function k(AM,AK){if(!!AM===false||!!AK===false){return null;}if(AM.length===1){return AK[AM[0]];}var AL=(AM&&AM.length)||0,AJ,AI=AM[AJ];for(AJ=0;AJ<AL;AJ++){if(AK[AI]===undefined){AK[AI]={};}AK=AK[AI];}return AK;},equal:function a(AI,AJ){return(AI.mObjectId===AJ.mObjectId&&AI.mSeriesId===AJ.mSeriesId&&AI.mGroupId===AJ.mGroupId);},reset:function q(AK,AM,AL,AJ,AI,AN){AK.mObjectId=AM!==undefined?AM:-3;AK.mSeriesId=AL!==undefined?AL:-3;AK.mGroupId=AJ!==undefined?AJ:-3;if(AI!==undefined&&AI!==null){AK.angleByIndex=AI;}if(AN!==undefined&&AN!==null){AK.sliceById=AN;}return AK;}},transformProperty:function A(AI,AK,AJ){if(AK===0){return W.call(this,AI,AJ);}return d.call(this,AI,AJ);},abbreviateNumber:function b(AS,AI){var AT,AJ,AU="",AL=(AS<0),AV=(this.isIntegar(AS)===false);if(AV){AI++;}if(AS<0){AI++;}var AO=AL?-AS:AS;var AP=0;if(AO>=1e+27){AO=999;AU="Y";}else{if(AO>=1e+24){AO/=1e+24;AU="Y";}else{if(AO>=1e+21){AO/=1e+21;AU="Z";}else{if(AO>=1000000000000000000){AO/=1000000000000000000;AU="E";}else{if(AO>=1000000000000000){AO/=1000000000000000;AU="P";}else{if(AO>=1000000000000){AO/=1000000000000;AU="T";}else{if(AO>=1000000000){AO/=1000000000;AU="B";}else{if(AO>=1000000){AO/=1000000;AU="M";}else{if(AO>=1000){AO/=1000;AU="K";}else{if(AO>=1){AP++;}else{if(AO>=0.001){AP++;}else{if(AO>=0.000001){AP++;}else{if(AO>=1e-9){AP++;}else{if(AO>=1e-12){AP++;}else{AL=false;}}}}}}}}}}}}}}if(this.isIntegar(AO)===false){AT=AO.toString();var AK=5,AN=2,AW;AJ=AT.indexOf(".");AW=AT.length-AJ-1;if(AW>AK||(AW>AN&&AW>AJ)){if(AW>AK&&AI-AW<0){AN=Math.max(AN,Math.min(AN,AI-AW));}else{AN=Math.max(1,Math.min(AN,AI-AW));}AO=AO.toFixed(AN);}}AT=AO.toString();if(this.isIntegar(AO)===false){var AR=AT.length-1;AJ=AT.indexOf(".");if(AJ!==-1){if(AJ>=AR){AT=AT.substring(0,AJ);}else{var AQ,AM=true;for(AQ=AR;AQ>AJ&&AM;--AQ){if(AT[AQ]!=="0"){AM=false;}}if(AM){AT=AT.substring(0,AJ);}}}}if(AL){AT="-"+AT;}AT+=AU;return AT;},getScalePlate:function AE(AI){AI=AI||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AI){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AB(AK,AJ,AL){var AI={mUseLogarithmicScale:AK,mAlwaysIncludeZero:!AK&&(AJ||!!(AL&1)||!!(AL&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AI;},evaluateTextMargin:function P(AI){this.mTextMargins=this.mTextMargins||{};var AJ=this.mTextMargins;if(AJ[AI]){return AJ[AI];}var AK=[];AK[0]=Math.floor(AI*m+0.5);AK[1]=Math.floor(AI*K+0.5);AK[2]=Math.max(Math.floor(AI*R+0.5),1);AJ[AI]=AK;return AK;},AlmostZero:function x(AI){return(Math.abs(AI)<0.000001);},isValidNumber:function J(AI){if(typeof AI==="number"){if(AI===0){return true;}return !!AI;}return false;},isIntegar:function j(AI){return AI===+AI&&AI===(AI|0);},HasArrayIntersection:function O(AJ,AI){var AK;for(AK=0;AK<AJ.length;AK++){if(AI.indexOf(AJ[AK])!==-1){return true;}}return false;},EscapeString:function C(AI){var AK='"',AJ='\\"',AL=new RegExp(AK,"g");return String(AI).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AL,AJ).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function N(AI){var AK='"',AJ='\\"',AL=new RegExp(AK,"g");return String(AI).replace(/\\/g,"\\\\").replace(AL,AJ).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AD(AJ){var AI;if(!AJ.buf||AJ.len===-1){return ;}AI=AJ.len;var AK=String(AJ.buf[AI]);if(AK&&AK[AK.length-1]===","){AJ.buf[AI]=AK.slice(0,-1);}},decodeUTF8:function f(AI){var AJ="",AL=0,AN=0,AM=0,AK=0;while(AL<AI.length){AN=AI.charCodeAt(AL);if(AN<128){AJ+=i(AN);AL++;}else{if((AN>191)&&(AN<224)){AM=AI.charCodeAt(AL+1);AJ+=i(((AN&31)<<6)|(AM&63));AL+=2;}else{AM=AI.charCodeAt(AL+1);AK=AI.charCodeAt(AL+2);AJ+=i(((AN&15)<<12)|((AM&63)<<6)|(AK&63));AL+=3;}}}return AJ;},formatDateTimeValue:function e(AJ,AO){var AM=new mstrmojo.chart.common.DSSDateTime({ifTime:AO});var AI="";var AL="";var AP=0;while(AP<AJ.length){var AK=1;switch(AJ.charAt(AP)){case"[":AP++;while(AP<AJ.length&&AJ.charAt(AP)!=="]"){AL+=AJ.charAt(AP);AP++;}if(AL.length>0&&(AL[0]===">"||AL[0]==="<"||AL[0]==="=")){AL="";}AP++;break;case"y":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="y"){AK++;AP++;if(AK===4){break;}}if(AK===1||AK===2){AI+=this.fillZeroToWidth(AM.mnYear%100,2);}else{if(AK===3){AI+=this.fillZeroToWidth(AM.mnYear%100,2);AP--;}else{if(AK===4){AI+=AM.mnYear;}}}break;case"M":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="M"){AK++;AP++;}if(AK<3){AI+=this.fillZeroToWidth(AM.mnMonth,AK);}else{if(AK===3){AI+=AC.MONTHNAME_SHORT[AM.mnMonth];}else{AI+=AC.MONTHNAME_FULL[AM.mnMonth];}}break;case"d":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="d"){AK++;AP++;}if(AK<3){AI+=this.fillZeroToWidth(AM.mnDay,AK);}else{if(AK===3){AI+=AC.dayShortNames[AM.mnDay];}else{AI+=AC.dayNames[AM.mnDay];}}break;case"h":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="h"){AK++;AP++;}var AN=AM.mnHour;if(AN===0){AN=12;}if(AN>12){AN-=12;}AI+=this.fillZeroToWidth(AN,AK);break;case"H":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="H"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnHour,AK);break;case"m":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="m"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnMinute,AK);break;case"s":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="s"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnSecond,AK);break;case"S":AP++;while(AP<AJ.length&&AJ.charAt(AP)==="S"){AK++;AP++;}AI+=this.fillZeroToWidth(AM.mnMillisecond,AK);break;case"a":AN=AM.mnHour;if(AN<12){AI+=AC.AM_NAME;}else{AI+=AC.PM_NAME;}AP++;break;default:AI+=AJ.charAt(AP++);break;}}if(AL.length!==0){AI='<SPAN STYLE="COLOR: '+AL+'" >'+AI+"</SPAN>";}return AI;},fillZeroToWidth:function l(AM,AK){var AJ="",AL=AJ+AM;var AI=AL.length;while(AI<AK){AL="0"+AL;AI++;}return AL;},updateCache:function AG(AJ,AM,AN){var AL=(AM&&AM.length)||0,AK,AI,AO=AJ;for(AK=0;AK<AL-1;AK++){AI=AM[AK];if(!AO[AI]){AO[AI]={};}AO=AO[AI];}AO[AM[AL-1]]=AN;},measureTextHeight:function(AN,AK,AR,AO,AI){var AQ,AM=AN;if(AM===" "){AM="\u00A0";}AI=AI||"pt";if(typeof AR==="number"){AR=AR+AI;}var AJ="none",AP="normal";if(AO&E.FS_ITALIC){AJ="italic";}if(AO&E.FS_BOLD){AP="bold";}var AL={fontFamily:AK,fontSize:AR,fontStyle:AJ,fontWeight:AP};if(h&&h.H&&h.H[AK]&&h.H[AK][AR]&&h.H[AK][AR][AO]){AQ=h.H[AK][AR][AO];}else{AQ=o.measureTextHeight("H",AL,1);this.updateCache(h,["H",AK,AR,AO],AQ);}return AQ;},measureText:function v(AP,AM,AV,AQ,AK){var AJ=true,AI,AT=AV+1;var AO=AP;if(AO===" "){AO="\u00A0";}AK=AK||"pt";if(typeof AV==="number"){AV=AV+AK;}if(B&&B[AO]&&B[AO][AM]&&B[AO][AM][AV]&&B[AO][AM][AV][AQ]){return B[AO][AM][AV][AQ];}if(AJ){var AL="normal",AR="normal";if(AQ&E.FS_ITALIC){AL="italic";}if(AQ&E.FS_BOLD){AR="bold";}var AN={fontFamily:AM,fontSize:AV,fontStyle:AL,fontWeight:AR};if(h&&h.H&&h.H[AM]&&h.H[AM][AV]&&h.H[AM][AV][AQ]){AT=h.H[AM][AV][AQ];}else{AT=o.measureTextHeight("H",AN,true);this.updateCache(h,["H",AM,AV,AQ],AT);}AI=o.measureTextWidth(AP,AN,0);}else{if(!L){var AS=document.createElement("div");AS.id="measureText";AS.style.position="absolute";AS.style.top="0";AS.style.visibility="hidden";AS.style.height="auto";AS.style.width="auto";document.body.appendChild(AS);L=AS;}L.innerHTML="";L.appendChild(document.createTextNode(AO));L.style.fontFamily=AM;L.style.fontSize=AV;L.style.fontWeight="normal";L.style.fontStyle="none";if(AQ&E.FS_ITALIC){L.style.fontStyle="italic";}if(AQ&E.FS_BOLD){L.style.fontWeight="bold";}AI=L.scrollWidth+1;AT=L.scrollHeight+1;}var AU={Width:AI,Height:AT};this.updateCache(B,[AO,AM,AV,AQ],AU);return AU;},ReplaceDecimalPoint:function AA(AJ,AI){return AJ.replace(".",AI);},ReplaceMinusSign:function t(AI,AJ){return AI.replace("-",AJ);},insert:function G(AJ,AI,AK){if(typeof AJ==="string"&&typeof AI==="string"&&AK<=AJ.length){return AJ.substr(0,AK)+AI+AJ.substr(AK);}return AJ;},InsertThousandSeparator:function s(AK,AL,AP){var AI=AP.mstrDecimalPoint;var AJ=AK.indexOf(AI);if(AJ===-1){AJ=AK.length;}var AM=0;while(AM<AJ&&!this.chk_val(AK.charAt(AM))){AM++;}var AO=AK;var AN;for(AN=AJ-3;AN>AM;AN-=3){AO=this.insert(AO,AL,AN);}return AO;},chk_val:function I(AI){return/^\d+$/.test(AI);},hFormatValue:function Z(AV,AM,Ag,A5){var AT=0;var Ao=0;var Ac=AV.length;var BD=false;if(!A5){A5={};var Am=window.navigator.userLanguage||window.navigator.language;var BO=Am.split("-");this.mstrLanguageCode=BO[0];this.mstrCountryCode=BO[1]||BO[0];A5.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";A5.mstrCurrencySymbol="$";A5.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";A5.mstrPercentSign="%";A5.mstrMinusSign="-";}while(AT<Ac){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}AT++;}else{if(AV.charAt(AT)==="["){AT++;var An="";while(AT<Ac&&AV.charAt(AT)!=="]"){An+=AV.charAt(AT);AT++;}if(An.length>1&&(An.charAt(0)===">"||An.charAt(0)==="<"||An.charAt(0)==="=")){var AJ=-1;var A7=0;switch(An.charAt(0)){case">":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=1;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=2;A7=2;}}break;case"=":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=3;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=3;A7=2;}}break;case"<":if(An.charAt(1)>="0"&&An.charAt(1)<="9"){AJ=5;A7=1;}else{if(An.charAt(1)==="="&&An.length>2&&An.charAt(2)>="0"&&An.charAt(2)<="9"){AJ=4;A7=2;}}break;}if(AJ>0){var AX=An.substr(A7);var BG=parseFloat(AX);if((AJ===1&&AM>BG)||(AJ===2&&AM>=BG)||(AJ===3&&AM===BG)||(AJ===4&&AM<=BG)||(AJ===5&&AM<BG)){BD=true;}}}}else{if(AV.charAt(AT)===";"){if(BD){Ac=AT;break;}else{Ao=AT+1;AT++;}}else{AT++;}}}}if(!BD){Ao=0;}AT=Ao;var At=false;while(AT<Ac){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}}else{if(AV.charAt(AT)==="["){AT++;while(AT<Ac&&AV.charAt(AT)!=="]"){AT++;}}else{if(AV.charAt(AT)==="y"||AV.charAt(AT)==="M"||AV.charAt(AT)==="d"||AV.charAt(AT)==="h"||AV.charAt(AT)==="H"||AV.charAt(AT)==="m"||AV.charAt(AT)==="s"||AV.charAt(AT)==="S"){At=true;break;}else{AT++;}}}}if(At){var BB="";if(BD){BB=AV.substr(Ao,Ac-Ao);}else{BB=AV;}return mstrmojo.num.formatByMask(BB,AM);}var BF;var Ak;var Aq=false;var AP=false;var BA=false;var Ab=false;var BL=[];var Af="K";var AY=0;var A6=false;var AW=0;var BM="";var AQ="";var Aj="";var A4="";var AU=0;var BI=0;var BH=false;var A8=A5.mstrCurrencySymbol;var Az=A5.mstrThousandSeparator;var Av=A5.mstrDecimalPoint;var A9=A5.mstrPercentSign;var A3=A5.mstrMinusSign;AT=Ao;var Ai="";if(AM<0&&!BD){while(AT<Ac&&AV.charAt(AT)!==";"){if(AV.charAt(AT)==='"'){AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){AT++;}}AT++;}AT++;if(AT>=Ac){if(AM<0){BM+="-";}AT=Ao;}}var BN=false;while(AT<Ac){var Ap=false;switch(AV.charAt(AT)){case"[":AT++;while(AT<Ac&&AV.charAt(AT)!=="]"){Aj+=AV.charAt(AT);AT++;}if(Aj.length>0&&(Aj.charAt(0)===">"||Aj.charAt(0)==="<"||Aj.charAt(0)==="=")){Aj="";}AT++;break;case'"':AT++;while(AT<Ac&&AV.charAt(AT)!=='"'){if(AV.charAt(AT)==="K"){BA=true;Af="K";}else{if(BN){AQ+=AV.charAt(AT);}else{BM+=AV.charAt(AT);}}AT++;}AT++;break;case"#":case"0":var Aa=AV.charAt(AT);BN=true;var Ae=1;AT++;while(AT<Ac&&AV.charAt(AT)===Aa){Ae++;AT++;}if(AT+1<Ac&&AV.charAt(AT)==="-"&&AV.charAt(AT+1)===Aa){Ab=true;BL.push(Ae);AT++;while(true){Ae=0;while(AT<Ac&&AV.charAt(AT)===Aa){Ae++;AT++;}BL.push(Ae);if(AT>=Ac||AV.charAt(AT)!=="-"){break;}AT++;}}while(AT<Ac){if(AV.charAt(AT)===","){if(AT+1<Ac&&AV.charAt(AT+1)===Aa){Aq=true;}else{break;}}else{if(AV.charAt(AT)!==Aa){break;}}AT++;}break;case".":BN=true;AT++;AY=0;while(AT<Ac&&AV.charAt(AT)==="0"){AY++;AT++;}if(AY===0){while(AT<Ac&&AV.charAt(AT)==="#"){AY++;AT++;}}break;case"E":BI=6;while(AT<Ac&&AV.charAt(AT)!=="0"){if(AV.charAt(AT)==="+"&&AT<Ac&&AV.charAt(AT+1)==="0"){AP=true;}else{A4+=AV.charAt(AT);}AT++;}AU=0;while(AT<Ac&&AV.charAt(AT)==="0"){AU++;AT++;}break;case"%":BI=4;AT++;break;case"(":AT++;BM+="(";break;case")":AT++;AQ+=")";break;case"-":AT++;if(AM<0){BM+=A3;}break;case"?":AT++;break;case"/":if(AT>Ao&&AV.charAt(AT-1)==="?"&&AT+1<Ac&&AV.charAt(AT+1)==="?"){BI=5;A6=false;Ak=AT-1;while(Ak>Ao&&AV.charAt(Ak)==="?"){Ak--;}while(Ak>Ao&&AV.charAt(Ak)===" "){Ak--;}if(Ak>=Ao&&(AV.charAt(Ak)==="#"||AV.charAt(Ak)==="0")){A6=true;}AW=0;AT++;while(AT<Ac&&AV.charAt(AT)==="?"){AW++;AT++;}}else{AT++;}break;case",":if(AT>Ao&&(AV.charAt(AT-1)==="0"||AV.charAt(AT-1)==="#")){if(AT+1<Ac&&(AV.charAt(AT+1)==="K"||AV.charAt(AT+1)==="k")){BA=true;Af=AV.charAt(AT+1);AT++;}}Ak=AT+1;while(Ak<Ac){if(AV.charAt(Ak)===","){Ak++;continue;}else{break;}}if(Ak===Ac||AV.charAt(Ak)==="."){BH=true;}if(BH||(!BH&&AT+1<Ac&&AV.charAt(AT+1)===",")){while(AT<Ac&&AV.charAt(AT)===","){AM/=1000;AT++;}AT--;}AT++;break;case";":Ap=true;break;case"$":if(BN){AQ+=A8;}else{BM+=A8;}AT++;break;case"_":if(BN){AQ+=" ";}else{BM+=" ";}AT++;AT++;break;default:if(BN){AQ+=AV.charAt(AT);}else{BM+=AV.charAt(AT);}AT++;}if(Ap){break;}}if(AM<0){AM=-AM;}var Ax="";if(Ab){var As=0;for(BF=0;BF<BL.length;BF++){As+=BL[BF];}Ax=Ai=this.fillZeroToWidth(As,AM.toFixed());for(BF=0;BF<BL.length-1;BF++){As-=BL[BF];var Ar=Ax.length-As;Ax=Ax.slice(0,Ar)+"-"+Ax.slice(Ar);}}else{switch(BI){case 0:if(BA){AM/=1000;}var A1=AM;if(A1<0){A1=-A1;}var AI=0;while(A1>=10){A1/=10;AI++;}if(AI>=15){Ax=Ai=this.fillZeroToWidth((AM<0?-AM:AM),10);var Al=Ax.indexOf(".");if(Al!==-1){Ax=Ax.slice(0,Al)+Ax.slice(Al+1);}Ax=Ax.substr(0,16);if(Ax.charAt(15)>="5"){var AS=14;while(AS>=0&&Ax.charAt(AS)==="9"){Ax=Ax.slice(0,AS)+"0"+Ax.slice(AS+1);AS--;}var AN=Ax.charAt(AS);AN++;if(AS>=0){Ax=Ax.slice(0,AS)+AN+Ax.slice(AS+1);}else{Ax="1"+Ax;}}Ax=Ax.substr(0,15);var BE;for(BE=AI-14;BE>0;BE--){Ax+="0";}if(AM<0){Ax=A3+Ax;}}else{Ai+=(AM+Math.pow(0.1,AY+6)).toFixed(AY);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}if(BA){Ax+=Af;}break;case 5:if(BA){AM/=1000;}var Ah=10;for(BF=1;BF<AW;BF++){Ah*=10;}var AK={numerator:0,denominator:1};var AR={numerator:1,denominator:1};var AO={numerator:1,denominator:2};var Aw={numerator:0,denominator:1};var Ad=AM>=0;var A2=Math.abs(AM);var A0=parseInt(A2,10);A2-=A0;while(AO.denominator<Ah){if(Math.abs(AF.call(AO)-A2)<1e-15){Aw=AO;break;}if(AF.call(AO)>A2){AR=AO;}else{AK=AO;}AO.denominator=AK.denominator+AR.denominator;AO.numerator=AK.numerator+AR.numerator;}if(AO.denominator>=Ah){if(A2-AF.call(AK)<AF.call(AR)-A2){Aw=AK;}else{Aw=AR;}}if(A0>0){Aw.numerator+=A0*Aw.denominator;}if(Aw.denominator===0){A6=false;}var BC=false;var Ay=false;var BK=Aw.numerator;if(A6){A0=Math.floor(Aw.numerator/Aw.denominator);BK=Aw.numerator%Aw.denominator;Ay=Ay||(BK!==0);if(A0>0){BC=true;Ai+=A0;if(Ay){Ai+=" ";}}}if(!Ay&&!BC&&BK===0){Ai+="0";}else{if(!Ay&&BC&&BK===0){AH++;}else{Ai+=BK;Ai+="/";Ai+=Aw.denominator;}}Ax=Ai;if(!Ad){Ax=A3+Ax;}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}if(BA){Ax+=Af;}break;case 4:AM*=100;Ai+=(AM+Math.pow(0.1,AY+6)).toFixed(AY);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}if(Aq){Ax=this.InsertThousandSeparator(Ax,Az,A5);}Ax+=A9;break;case 6:var Au=AM;var BJ=0;if(Au>1){while(Au>=10){Au/=10;BJ++;}}else{if(Au!==0){while(Au<1){Au*=10;BJ--;}}}Ai+=(Au+Math.pow(0.1,AY+6)).toFixed(AY);Ai+=A4;if(AP&&BJ>=0){Ai<<"+";}if(BJ<0){Ai<<"-";BJ=-BJ;}Ai+=this.fillZeroToWidth(BJ,AU);Ax=Ai;Ax=this.ReplaceDecimalPoint(Ax,Av);if(AM<0){Ax=this.ReplaceMinusSign(Ax,A3);}break;}}var AL=BM+Ax+AQ;var AZ=false;if(Aj.length!==0&&AZ){AL='<SPAN STYLE="COLOR: '+Aj+'" >'+AL+"</SPAN>";}return AL;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var m=mstrmojo,n=mstrmojo.array,P=mstrmojo.hash,H=mstrmojo.num,G=mstrmojo.VisUtility,a=mstrmojo.chart,K=a.enums,b=K.EnumGraphMajorType,J=a.common.Utility,T=a.model,M=T.enums,v=M.EnumDSSGraphObject,z=mstrmojo.VisEnum.ControlType,w=m.gm,U=mstrmojo.gm.EnumTextAlignH,p=mstrmojo.gm.EnumTextAlignV,u=";",i=",",A="_tmsp",L=" ",Y=-20,j=mstrmojo.gm.EnumSelectionOptionLevel,AB=mstrmojo.gm.EnumShape,f=mstrmojo.color,I=mstrmojo.gm.EnumIdentityType,R=0.00001,D,Z=Math.pow(2,30),c=Math.pow(2,60);var e=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];function k(AH,AG){var AI,AF=AH.length;if(AF!==AG.length){return false;}for(AI=0;AI<AF;AI++){if(AH[AI]!==AG[AI]){return false;}}return true;}function AA(AI,AG,AJ){var AH=false,AK=AJ+A,AF=AI[AK],AL=AG[AK];if(AG[AJ]===undefined){AH=true;}else{if((AL===undefined&&AF!==undefined)||(AL!==undefined&&AF!==undefined&&AL<AF)){AH=true;}}if(AH){AG[AJ]=AI[AJ];if(AL!==undefined){AG[AK]=AF;}}}function AE(AG,AF){var AH;for(AH in AG){if(AG.hasOwnProperty(AH)){AA(AG,AF,AH);}}return AF;}function W(AJ){var AI={},AH,AG=[],AF;n.forEach(AJ,function(AK){if(AK!==undefined){AG.push(AK);}});AF=AG.length;if(AF===1){return AG[0];}for(AH=0;AH<AF;AH++){AE(AG[AH],AI);}return AI;}function y(AF){return{n:AF,s:AF.toString(),on:AF};}function X(AH,AF,AJ){if(AF===AH){return 0;}var AG=AF-AH,AI=1;while(AG<1){AG*=10;AI/=10;}while(AG>=10){AG/=10;AI*=10;}if(AG<1.8){AI*=0.2;}else{if(AG<3.1){AI*=0.4;}else{if(AG<4.6){AI*=0.5;}else{if(AG>=8.1){AI*=2;}}}}if(AJ){AI=Math.round(AI);if(AI<1){AI=1;}}return AI;}function B(AI,AM,AO,AG){var AK=[];if(AI===AM){if(AI<0){AK.push(mstrmojo.gm.GMUtility.formatNumber(AI,"nearest"));}AK.push({n:0,s:"0",on:0});if(AI>0){AK.push(mstrmojo.gm.GMUtility.formatNumber(AI,"nearest"));}return AK;}var AF=AG>0?AG:X(AI,AM,AO);var AH=Math.ceil(AM/AF)*AF;if(AH-AM>=AF*0.9){AH=Math.floor(AM/AF)*AF;}var AL=Math.floor(AI/AF)*AF;if(AI-AL>=AF*0.9){AL=Math.ceil(AI/AF)*AF;}var AN=Math.floor((AH-AL+AF/100)/AF)+1,AJ;for(AJ=0;AJ<AN;++AJ){AK.push(mstrmojo.gm.GMUtility.formatNumber(AL+AJ*AF,"nearest"));}return AK;}function S(AF,AI){var AH;AF.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AF.mStep=this.mMinimum<0?0.2:0.1;if(AI.mUseCustomMinMax){var AG=AI;AF.mMaxTick=AG.mAxisMaxValue;AF.mMinTick=AG.mAxisMinValue;AF.mMaxTick=Math.min(1,AF.mMaxTick);AF.mMinTick=Math.max(-1,AF.mMinTick);AF.mStep=0.1;}else{if(this.mMaximum>=0.5){AF.mMaxTick=1;AF.mMinTick=Math.floor(this.mMinimum/AF.mStep)*AF.mStep;AF.mMinTick=(AF.mMinTick*this.mMinimum<0)?0:(AF.mMinTick>0?0:AF.mMinTick);if(this.mMinimum<-0.5){AF.mMinTick=-1;}}else{if(this.mMaximum>0){AF.mMaxTick=Math.ceil(this.mMaximum/AF.mStep)*AF.mStep;AF.mMinTick=-1;}else{AF.mStep=0.1;AF.mMaxTick=0;AF.mMinTick=-1;}}}}else{AF.mMinTick=(this.mMinimum<0)?-1:0;if(t.call(this,AF)){return ;}AF.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AF.mMaxTick-AF.mMinTick)/10;}for(AH=AF.mMinTick+AF.mStep;AH+a.gModuleMain.mTolerance<AF.mMaxTick;AH+=AF.mStep){AF.mTicks.push(Math.round(AH*100)/100);}}function O(AF,AK){var AJ,AG,AM=AK,AL=AM.mDrawCustomLine,AH=AM.mAxisCustomValue,AI;AF.mStep=1;if(this.mMaximum<=0){AF.mMinTick=1;AF.mMaxTick=10;if(AL&&AH<=1){AM.mAxisCustomValue=AF.mMinTick;}return ;}if(this.mMinimum<=0){AG=this.mMaximum>1?0:-1;AF.mMinTick=Math.pow(10,AG);if(AM.mUseCustomMinMax){AF.mMaxTick=this.mMaximum;AJ=Math.floor(g.call(this,this.mMaximum));if(g.call(this,this.mMaximum)===AJ){AJ--;}}else{AJ=Math.ceil(g.call(this,this.mMaximum));AF.mMaxTick=Math.pow(10,AJ);}for(AI=AG+1;AI<AJ;++AI){AF.mTicks.push(Math.pow(10,Math.floor(AI)));}if(AL&&AH<=0){AM.mAxisCustomValue=Math.max(AF.mMinTick,AM.mAxisCustomValue);}return ;}if(AM.mUseCustomMinMax){AJ=g.call(this,this.mMaximum);AG=g.call(this,this.mMinimum);AF.mMaxTick=this.mMaximum;AF.mMinTick=this.mMinimum;}else{AJ=Math.ceil(g.call(this,this.mMaximum));AG=Math.floor(g.call(this,this.mMinimum));AF.mMaxTick=Math.pow(10,AJ);AF.mMinTick=Math.pow(10,AG);}for(AI=AG+1;AI<AJ;++AI){AF.mTicks.push(Math.pow(10,Math.floor(AI)));}if(AL&&AH<=0){AM.mAxisCustomValue=AF.mMinTick;}}function q(AP,AK){var AH=AK,AF,AI;AP.mStep=d.call(this,this.mMaximum,this.mMinimum,AH.mAlwaysIncludeZero);AP.mMaxTick=Math.ceil(this.mMaximum/AP.mStep)*AP.mStep;AP.mMinTick=Math.floor(this.mMinimum/AP.mStep)*AP.mStep;AP.mMinTick=(AP.mMinTick*this.mMinimum<0)?0:AP.mMinTick;if(AH.mAlwaysIncludeZero){AP.mMaxTick=(this.mMaximum<0)?0:AP.mMaxTick;AP.mMinTick=(this.mMinimum>0)?0:AP.mMinTick;}var AJ=AP.mMaxTick-AP.mMinTick;if(AP.mStep>=AJ){return ;}if(t.call(this,AP)){return ;}AF=Math.floor((AP.mMaxTick-AP.mMinTick+AP.mStep/100)/AP.mStep)+1;var AL=this.mNumberFormat;for(AI=1;AI<AF-1;++AI){var AN=AP.mMinTick+AI*AP.mStep,AO,AG,AM;if(AP.mStep<1&&AL.mFormatType===4&&AL.mCustomFormat.indexOf("%")!==-1){AO=AN*100;if(!J.isIntegar(AO)){AG=Math.round(AO);AM=Math.abs(AO-AG);if(AM<R){AN=AG/100;}}}AP.mTicks.push(AN);}}function C(AP,AJ){var AO=AJ,AI,AF,AM,AH,AL,AK,AG,AN;AP.mMaxTick=AO.mAxisMaxValue;AP.mMinTick=AO.mAxisMinValue;if(t.call(this,AP)){return ;}if(!V.call(this)||this.mMajorGrid.mUseManualGrid){AP.mStep=d.call(this,AP.mMaxTick,AP.mMinTick,false);AI=AP.mMaxTick-AP.mMinTick;if(AP.mStep>=AI){return ;}AF=Math.floor(AI/AP.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AI===AF*AP.mStep){for(AH=1;AH<AF;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}else{AI=AP.mMaxTick-AP.mMinTick;AM=10;AL=false;for(AH=3;AH<AF;++AH){AK=AI/AH;while(AK<1){AK*=10;}while(AK>=10){AK/=10;}if(AK===Math.floor(AK)){AM=AH;AL=true;break;}}if(AL){AP.mStep=AI/AM;for(AH=1;AH<AM;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}else{AG=Math.ceil((AP.mMinTick+AP.mStep/100)/AP.mStep)*AP.mStep;AN=Math.floor((AP.mMaxTick-AP.mStep/100-AG)/AP.mStep)+3;for(AH=0;AH<AN-2;++AH){AP.mTicks.push(AG+AH*AP.mStep);}}}}else{AI=AP.mMaxTick-AP.mMinTick;AM=10;for(AH=6;AH<=9;++AH){AK=AI/AH;while(AK<10){AK*=10;}while(AK>=100){AK/=10;}if(AK===Math.floor(AK)){AM=AH;break;}}AP.mStep=AI/AM;for(AH=1;AH<AM;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}}function E(AF,AJ){var AI,AG,AH;AF.mMaxTick=AJ.mAxisMaxValue;if(AF.mMaxTick<=this.mMinimum){this.mMinimum=AF.mMaxTick-1;}AF.mStep=d.call(this,AF.mMaxTick,this.mMinimum,AJ.mAlwaysIncludeZero&&(AF.mMaxTick>0));AI=(AJ.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(V.call(this)){AF.mMinTick=AF.mMaxTick-Math.ceil((AF.mMaxTick-AI)/AF.mStep)*AF.mStep;}else{AF.mMinTick=Math.floor(AI/AF.mStep)*AF.mStep;}if(t.call(this,AF)){return ;}AG=Math.floor((AF.mMaxTick-AF.mStep/100-AF.mMinTick)/AF.mStep)+2;for(AH=1;AH<AG-1;++AH){AF.mTicks.push(AF.mMinTick+AH*AF.mStep);}}function h(AF,AK){var AG,AJ,AH,AI;AF.mMinTick=AK.mAxisMinValue;if(AF.mMinTick>=this.mMaximum){this.mMaximum=AF.mMinTick+1;}AF.mStep=d.call(this,this.mMaximum,AF.mMinTick,AK.mAlwaysIncludeZero&&(AF.mMinTick<0));AG=(AK.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(V.call(this)){AF.mMaxTick=AF.mMinTick+Math.ceil((AG-AF.mMinTick)/AF.mStep)*AF.mStep;}else{AF.mMaxTick=Math.ceil(AG/AF.mStep)*AF.mStep;}if(t.call(this,AF)){return ;}AJ=Math.ceil((AF.mMinTick+AF.mStep/100)/AF.mStep)*AF.mStep;AH=Math.floor((AF.mMaxTick-AJ+AF.mStep/100)/AF.mStep)+2;for(AI=0;AI<AH-2;++AI){AF.mTicks.push(AJ+AI*AF.mStep);}}function d(AV,AP,AH){var AO,AJ;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AO=0;if(AH){AO=Math.max(AV,AV-AP);AO=Math.max(AO,-AP);}else{AO=AV-AP;}if(AO===0){this.mIsShown=false;return 1;}if(AO>=1&&AO<=4&&parseInt(AO)===AO){var AW=this.PrimaryMetricIndex,AK=AW.length;for(var AR=0;AR<AK;AR++){var AN=this.mChartContextPtr.mDatasetPtr,AQ=AN.dataProvider,AI=AQ.getSeriesCount(),AM=AQ.getGroupCount(),AG=AW[AR],AL,AT;for(var AU=0;AU<AI;AU++){AL=AQ.getMetricIndexForSeries(AU);if(AL===AG){AT=true;for(var AS=0;AS<AM;AS++){var AX=AN.GetData(AU,AS);if(parseInt(AX)!==AX){AT=false;break;}}}if(AT){return 1;}}}}var AF=AO;AJ=1;while(AO<1){AO*=10;AJ/=10;}while(AO>=10){AO/=10;AJ*=10;}if(AO<1.8){AJ*=2;AJ/=10;}else{if(AO<3.1){AJ*=4;AJ/=10;}else{if(AO<4.6){AJ*=5;AJ/=10;}else{if(AO>=8.1){AJ*=2;}}}}AJ=this.postProcessStep(AJ,AF);return AJ;}function t(AF){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AG=this.mMajorGrid;return AG.mUseManualGrid&&(AG.mGridInterval<(AF.mMaxTick-AF.mMinTick)/30);}function g(AF){return Math.log(AF)/Math.log(10);}function V(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===v.DssGraphX1Body;}function x(AI){var AJ=this,AF=AJ.id,AH=AI.metricId,AG=new m.ui.menus.MenuConfig();(AI.options).forEach(function(AK){if(AK!==w.EnumRefLineModelType.CONST){AG.addMenuItem(e[AK],"xt",function(){AJ.toggleRefLineEnabled(AH,AK,true);});}else{AG.addEditorMenuItem(e[w.EnumRefLineModelType.CONST],AF,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(AM,AL){var AN=AL.constVal;if(AN.isValid()){AJ.toggleRefLineEnabled(AH,AK,true,AN.value);}}});});}});return AG;}function s(AH){var AI=this,AG=AH.metricId,AF=new m.ui.menus.MenuConfig();(AH.options).forEach(function(AL){var AJ=AL.refType,AK=e[AJ]+((AJ===w.EnumRefLineModelType.CONST)?("-["+H.toLocaleString(AL.c)+"]"):"");AF.addMenuItem(AK,"xt",function(){AI.toggleRefLineEnabled(AG,AJ,false,0,AL.modix);});});return AF;}function AC(AJ,AF){var AI=AJ.GMController,AG=AI.getForbiddenShapeForMetric(AF),AH=[];[{text:mstrmojo.desc(12097,"Bar"),value:AB.BAR},{text:mstrmojo.desc(2059,"Line"),value:AB.LINE},{text:mstrmojo.desc(9738,"Area"),value:AB.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AB.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AB.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AB.TICK}].forEach(function(AK){if(AG.indexOf(AK.value)<0){AH.push(AK);}});return AH;}function o(AG,AF){return function(AI,AH){if(AI!==AH){AF({ctxt:{sp:AI,mid:AG}});}};}function AD(AI){var AG=AI.options,AF=this.getMenuHandler("changeShape"),AH=new mstrmojo.ui.menus.MenuConfig();AH.addRadioMenuGroup(AI.currValue,o(AI.metricId,AF),AG,"checkMark",undefined,true);return AH;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function Q(AG){if(this.mUseTimer){var AF=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AF,desc:AG.functionName+": "+AG.purpose});return AF;}},endTimer:function F(AF){if(this.mUseTimer){var AJ,AI=this.mTimers;if(AF===undefined){AJ=AI.pop();}else{var AH,AG;for(AH=0;AH<AI.length;AH++){AG=AI[AH];if(AG.timerId===AF){AJ=AG;AI.splice(AH,1);AH--;}}}if(AJ){G.visPrint("%c"+AJ.desc+": "+(new Date()-AJ.timeStamp)+"ms","color: blue");}}},computeTicksForPercentchart:function(AG,AF,AH){return B(AG,AF,false,AH);},computeTicksForFlexMinMax:function(AG,AF,AH,AI){return B(AG,AF,AH,AI);},formatNumber:function(AH,AG,AF){return y(AH,AG,AF===undefined?3:AF);},sizeCalculator:{sum:function(AF,AJ,AK){var AH,AG=0,AI=0;if(AK===undefined){AK=AF.length;}AJ=AJ||1;for(AH=0;AH<AK;AH++){if(AF[AH]>0){AI+=AF[AH];AG+=1;}}if(AG>1){AI+=(AG-1)*AJ;}return AI;},add:function(AH,AF,AG){AG=AG||1;if(AF>0){AH+=(AF+AG);}return AH;},minus:function(AH,AF,AG){if(AF>0){AH-=(AF+AG);}return AH;}},replaceSpecialChars:function(AF){AF=AF.replace(/&/g,"&amp;");AF=AF.replace(/</g,"&lt;");AF=AF.replace(/>/g,"&gt;");AF=AF.replace(/"/g,"&quot;");return AF;},restoreSpecialChars:function(AF){AF=AF.replace(/&nbsp;/g," ");AF=AF.replace(/&lt;/g,"<");AF=AF.replace(/&gt;/g,">");AF=AF.replace(/&quot;/g,'"');AF=AF.replace(/&amp;/g,"&");return AF;},removeExtraSpace:function(AF){return AF.replace(/ {2,}/g," ");},stringToJSON:function(AF){if(AF===undefined){return undefined;}if(typeof AF==="string"){AF=AF.replace(/'/g,'"');return JSON.parse(AF);}return AF;},everythingToString:function(AG){if(AG===undefined){return undefined;}var AF;if(typeof AG==="object"){AF=JSON.stringify(AG.jsonObj||AG);}else{AF=AG.toString();}AF=AF.replace(/"/g,"'");return AF;},compareElementObj:function(AJ,AG){var AI=AJ.tid.toString(),AF=AG.tid.toString(),AK=AJ.eid,AH=AG.eid;if(AI!==AF){return AI>AF?1:-1;}if(AK===AH){return 0;}return AK>AH?1:-1;},isEqualComb:function(AG,AF){var AK=true,AJ,AI=AG.length,AH=AF.length;if(AI!==AH){return false;}if(AG.length>1){AG.sort(this.compareElementObj);}if(AF.length>1){AF.sort(this.compareElementObj);}for(AJ=0;AJ<AI;AJ++){if(this.compareElementObj(AG[AJ],AF[AJ])!==0){AK=false;break;}}return AK;},serializeCombination:function(AG){var AF="";if(AG.length>1){AG.sort(this.compareElementObj);}n.forEach(AG,function(AH){if(AF!==""){AF+=u;}AF+=(AH.tid+i+AH.eid);});return AF;},deserializeCombination:function(AG){var AH=AG.split(u),AF=[];n.forEach(AH,function(AL){var AI=AL.split(i);var AK=AI[0];var AJ=AI[1];AF.push({tid:AK,eid:AJ});});return AF;},getElementCombinationForMetric:function(AF){var AG=[];AG.push({tid:-1,eid:AF});return AG;},getResolvedFormatsObject:function(AF){return W(AF);},isDigitalArrayEqual:function(AG,AF){return k.call(this,AG,AF);},indexOf:function(AG,AI){var AH,AF=AG.length;for(AH=0;AH<AF;AH++){if(k(AG[AH],AI)){return AH;}}return -1;},parseAxisScaleData:function(AJ){var AH,AK,AG,AF=AJ.split(","),AI=[];for(AH=0,AK=AF.length;AH<AK;AH++){AG=AF[AH].split(":");AI.push(AG);}return AI;},parseCSSColor:function(AJ,AG){var AI=AJ.slice(1),AF=[],AH;if(AI.length===6){if(AG===true){AF[0]=AI[4];AF[1]=AI[5];AF[2]=AI[2];AF[3]=AI[3];AF[4]=AI[0];AF[5]=AI[1];}else{for(AH=0;AH<6;AH++){AF[AH]=AI[AH];}}}else{if(AG===true){for(AH=2;AH>=0;AH--){AF.push(AI[AH]);AF.push(AI[AH]);}}else{for(AH=0;AH<3;AH++){AF.push(AI[AH]);AF.push(AI[AH]);}}}return parseInt("0x"+AF.join(""),16);},RGB_BRG_Switch:function(AG){var AI=(AG>>16)&255,AH=(AG>>8)&255,AF=(AG>>0)&255;return(AF<<16)|(AH<<8)|(AI<<0);},encodeColor:function(AG){if(AG===undefined||AG===null||AG==="transparent"||AG==="default"){return AG;}var AH=false,AF={};if(AH){if(typeof AG==="object"){AF.c1=this.RGB_BRG_Switch(f.encodeColor(AG.c1));AF.c2=this.RGB_BRG_Switch(f.encodeColor(AG.c2));AF.or=AG.or;return AF;}return this.RGB_BRG_Switch(f.encodeColor(AG));}if(typeof AG==="object"){AF.c1=f.encodeColor(AG.c1);AF.c2=f.encodeColor(AG.c2);AF.or=AG.or;return AF;}return f.encodeColor(AG);},checkEquality:function(AG,AF){if(typeof AG==="object"&&AG.c1!==undefined){if(AG.c1!==AF.c1){return false;}if(AG.c2!==AF.c2){return false;}if(AG.or!==AF.or){return false;}return true;}return AG===AF;},decodeColor:function(AG){if(AG===undefined||AG===null||AG==="transparent"||AG==="default"){return AG;}var AH=false,AF={};if(AH){if(typeof AG==="object"){AF.c1=f.decodeColor(this.RGB_BRG_Switch(AG.c1));AF.c2=f.decodeColor(this.RGB_BRG_Switch(AG.c2));AF.or=AG.or;return AF;}return f.decodeColor(this.RGB_BRG_Switch(AG));}if(typeof AG==="object"){AF.c1=f.decodeColor(AG.c1);AF.c2=f.decodeColor(AG.c2);AF.or=AG.or;return AF;}return f.decodeColor(AG);},getTrendLineToggleHandler:function(AF,AH,AG){return function(){AF.switchOnOffTrendLineForMetric(AH,AG);};},getTrendLineToggleState:function(AF,AG){return AF.queryTrendLineStatusForMetric(AG);},getEditTrendLineHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.TREND_LINE,AG);};},getEditRefLineHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.REF_LINE,AG);};},getEditAxisScaleHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.AXIS_SCALE,AG);};},getEditAxisOriginHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.AXIS_ORIGIN_DEFINE,AG);};},getEditLogScaleHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(I.LOG_SCALE,AG);};},getOptionObjArr:function(AF,AH,AJ){if(!D){D=mstrmojo.gm.GMUtility;}var AG={},AI;if(AH!==undefined){AH=AH.toLowerCase();if(AH==="x1"){AH="x";}else{if(AH==="y1"){AH="y";}}}if(AF.length>1||(AJ&&AF.length===1)){if(AH==="x"){AG.opt=mstrmojo.desc(11712,"Bottom Axis");AG.key="XAxis";}else{if(AH==="x2"){AG.opt=mstrmojo.desc(11710,"Top Axis");AG.key="X2Axis";}else{if(AH==="y"){AG.opt=mstrmojo.desc(11715,"Left Axis");AG.key="YAxis";}else{if(AH==="y2"){AG.opt=mstrmojo.desc(11713,"Right Axis");AG.key="Y2Axis";}else{if(AH==="z"){AG.opt=mstrmojo.desc(12090,"SizeBy");AG.key="SizeBy";}}}}}AG.optLvl=j.AXIS;AG.mos=this.getMetricFormatFromIndexArray(AF);}else{if(AF.length===1){AI=this.getMetricFormat(AF[0]);AG.opt=AI.n;AG.mos=[AI];AG.key=AI.mId;AG.comb=D.getElementCombinationForMetric(AI.mId);AG.optLvl=j.METRIC;if(AH==="z"){AG.sizeBy=true;}}}return AG;},filterInValidMetricIndex:function(AG){var AF=[];n.forEach(AG,function(AH){if(AH!==Y){AF.push(AH);}});return AF;},fillBackgroundDiv:function(AG){var AF=document.createElement("div");AF.setAttribute("class","gm-bk-div");AF.style.backgroundColor="rgba(0,0,0,0)";AG.appendChild(AF);},getSubMenu:function(AK,AL,AJ,AI){var AH=AC(AK,AI),AF=AK.getMenuHandler("changeShape"),AG=AK.GMController.getOnTheFlyShapeForMetric(AI);if(AH.length>1){AL.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AK.id,AD,{currValue:AG,options:AH,metricId:AJ});}else{AL.addRadioMenuGroup(AG,o(AJ,AF),AH,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AG,AK,AL,AF){var AM=mstrmojo.gm.EnumSubtype,AJ=AG.GMController.chartSubType;if(AL&&AJ===AM.PERCENT){return ;}var AN=AG.id,AH=AG.getAvailableRefLineTypes(AF)||[];if(AH.length>0){AK.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AN,x,{metricId:AF,options:AH});}var AI=AG.getExistingRefLineOptions(AF)||[];if(AI.length>0){AK.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",D.getEditRefLineHandler(AG,AF));AK.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AN,s,{metricId:AF,options:AI});}},reverseMapping:function l(AG){var AI={},AH,AF=AG.length;for(AH=0;AH<AF;AH++){AI[AG[AH]]=AH;}return AI;},longIntAnd:function(AG,AF){var AH;if(AG===AF){return AG;}if(AG>c||AF>c){throw new Error("Operand exceeds valid data range.");}if(AG<Z&&AF<Z){return AG&AF;}if(AG>=Z||AF>=Z){if(AG<AF){AH=AG;AG=AF;AF=AH;}}var AJ=Math.floor(AG/Z),AI=Math.floor(AF/Z),AL=AG-AJ*Z,AK=AF-AI*Z;return(AL&AK)+(AJ&AI)*Z;},longIntOr:function(AG,AF){var AH;if(AG===AF){return AG;}if(AG<Z&&AF<Z){return AG|AF;}if(AG<AF){AH=AG;AG=AF;AF=AH;}AH=this.longIntAnd(AG,AF);return AF-AH+AG;},parseNumeric:function(AF){return +AF||parseFloat(AF);},fillTextInDiv:function(AF,AO,AQ,AG,AR,AH,AT,AJ,AM){if(AG===undefined){AG=AF.offsetWidth;}if(AR===undefined){AR=AF.offsetHeight;}if(AJ===undefined){AJ=U.MIDDLE;}if(AM===undefined){AM=p.MIDDLE;}if(AH===undefined){AH=false;}var AN,AP,AL,AS=AH?"gm-text-body":"gm-text-body-nowrap",AI=false,AK;AN=G.measureTextWidth(AQ,AT,6);AK=G.measureTextWidth("...",AT,6);if(AN>AG&&AK>AG){return ;}AL=document.createElement("div");AL.setAttribute("class",AS);AL.setAttribute("type",z.GM_TEXT_BODY);AL.identity=AO;G.applyStyles2DomNode(AL,AT);AL.innerHTML=AQ;AF.appendChild(AL);if(AH){if(AN>AG){AP=AL.offsetHeight;}else{AP=G.measureTextHeight(AQ,AT,4);}}else{AP=G.measureTextHeight(AQ,AT,4);AI=AN>AG;}AN=Math.min(AN,AG);AL.style.width=AN+"px";if(AH){AI=AL.scrollWidth>AN||AL.scrollHeight>AP;}if(AI){AL.setAttribute("title",AQ);}else{AL.setAttribute("title","");}switch(AJ){case U.LEFT:AL.style.left="0px";AL.style.textAlign="left";break;case U.MIDDLE:AL.style.left=((AG-AN)>>1)+"px";break;case U.RIGHT:AL.style.right="0px";AL.style.textAlign="right";break;}switch(AM){case p.TOP:AL.style.top="0px";break;case p.MIDDLE:AL.style.top=((AR-AP)>>1)+"px";break;case p.BOTTOM:AL.style.bottom="0px";break;}},updateTextColorAndAlignment:function(AF,AH,AI){var AJ=AF.firstChild,AK=AJ.style,AG=AF.clientWidth,AL=AJ.clientWidth,AN=AF.clientHeight,AM=AJ.clientHeight;AK.left="auto";AK.right="auto";switch(AH){case U.LEFT:AK.left="0px";break;case U.MIDDLE:AK.left=((AG-AL)>>1)+"px";break;case U.RIGHT:AK.right="0px";break;}AK.top="auto";AK.bottom="auto";switch(AI){case p.TOP:AK.top="0px";break;case p.MIDDLE:AK.top=((AN-AM)>>1)+"px";break;case p.BOTTOM:AK.bottom="0px";break;}},toggleDisplay:function(AG,AF){if(!AG){return ;}if(AF){AG.style.display="block";}else{AG.style.display="none";}},isTrendLineAvailableForMetric:function(AJ,AK,AN){var AU=false,AR=mstrmojo.gm.EnumSubtype,AM=m.gm.EnumShape,AS=AJ.GMController,AO=AS.chartSubType,AT=AJ.model.data.dz,AH=AT.XAxis,AF=AT.YAxis,AI=AT.BreakBy,AL=AT.SliceBy,AP=AN,AG=AS.getChartInfo(),AQ=AS.getBreakByAttrsID().length>0||(AG.isABL&&((AH.MetricNames!==undefined)||(AF.MetricNames!==undefined)||(AI.MetricNames!==undefined)||(AL.MetricNames!==undefined)));if(AP===undefined){AP=AS.getOnTheFlyShapeForMetric(AK);}if(AG.isABL&&AO===AR.PERCENT){AU=true;}if(AQ&&!AG.isBubbleOrScatter&&(AP===AM.BAR||AO===AR.STACKED||(AO===AR.AUTO&&AP===AM.AREA))){AU=true;}if(AG.isABL){if(AH.TemplateUnit&&AH.TemplateUnit.length>1){AU=true;}if(AF.TemplateUnit&&AF.TemplateUnit.length>1){AU=true;}if(AH.TemplateUnit===undefined&&AF.TemplateUnit===undefined){AU=true;}}AU=AU||this.isIgnoredMetric(AJ,AK);return !AU;},isTrendLineAvailableForAnyMetric:function(AH){var AG=AH.model.data.gsi.mx,AF;for(AF in AG){if(this.isTrendLineAvailableForMetric(AH,AF)){return true;}}return false;},isIgnoredMetric:function(AI,AG){var AH=AI.GMController,AJ,AF;if(AH.bubbleSeriesNum!==undefined){AJ=AH.getMetricsOnYAxis();AF=AJ.indexOf(AG);if(AF>=AH.bubbleSeriesNum){return true;}AJ=AH.getMetricsOnXAxis();AF=AJ.indexOf(AG);if(AF>=AH.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AK){var AF=AK.model.data.dz,AL=AK.model.data.gsi.mx,AG,AH,AJ=[];if(!AF||!AF.ColorBy||!AL){return AL;}var AI=function(AM){return(AM&&AM.TemplateMetric)||[];};AG=AI(AF.YAxis).concat(AI(AF.XAxis));n.forEach(AL,function(AM){AH=false;n.forEach(AG,function(AN){if(AM.did===AN.id){AH=true;return false;}});if(AH){AJ.push(AM);}});return AJ;},isInvalidTemplate:function N(AI){if(AI.eg){return false;}var AG=AI.gts;var AF=AG.row.length===0&&AG.col.length===0;n.forEach(AG.row,function(AL){if(AL.otp===-1){AF=true;}});var AK=AG.col;if(AK.length>0){var AH,AJ=AK.length-1;for(AH=0;AH<AJ;AH++){if(AK[AH].otp===-1){AF=true;}}}return AF;},isNoData:function(AF){return AF.eg!==undefined;},getInvalidTemplateErrMsg:function(AF){return AF||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AG,AH){mstrmojo.func.override({showPickerForCurrentMode:function AF(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AI=this.gradientOrientation,AJ=AH.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AI.set("selectedIndex",n.find(AI.items,"id",AJ?0:1));}}},AG.colorPicker);},generateToolTipContent:function(AO,AJ,AF,AK,AM,AL,AR){var AI,AG,AH,AN,AP,AQ;for(AI=AO;AI<AJ;AI++){AG=AK[AI];AN=AM[AI];if(AI>AO){AH=AK[AI-1];AP=AM[AI-1];if(AG.id===AH.id){if(AN===""){continue;}if(AG.fid===AH.fid&&AN.idx===AP.idx){continue;}if(AG.n===""){AL[AL.length-1].v+=L+AN.n;continue;}}}if(AR){AL.push({n:AG.n,tid:AG.id,v:AN.n});}else{AQ=AF===undefined?AG.isRowAttribute:AF;AL.push({n:AG.n,tid:AG.id,v:AN.n,eid:AN.id,tp:AG.otp,axis:AQ?1:2,tui:AG.tui,ui:AG.tui,dpt:AG.tui+1,at:AN.at,isRowAttribute:AQ,dei:AN.dei,o:AN.o});}}},getAttributeFormCnt:function(AF){var AG;if((AF.fcnt===undefined||AF.fcnt===null)&&AF.fs){AF.fcnt=AF.fs.length||1;}if(AF.fcnt!==undefined&&AF.fcnt!==null){AG=AF.fcnt;}else{if(AF.t===47){AG=1;}else{AG=AF.cs!==undefined?AF.cs:AF.rs;}}return AG;},isTrueForBoolValue:function(AF){return AF===true||AF==="true";},computeTicksForAxis:function(AI,AG){var AH=AI.mOptions,AJ,AF={mTicks:[]};if(AG){AJ=P.copy(AH);P.copy(AG,AJ);}else{AJ=AH;}if(AI.mIsPercent){S.call(AI,AF,AJ);return AF;}if(AJ.mUseLogarithmicScale){O.call(AI,AF,AJ);return AF;}if(AI.mGraphMajorType===b.GMT_BUBBLE&&AI.mTripleId.mObjectId===v.DssGraphZBody){AF.mMinTick=AJ.mUseMinValue?AJ.mAxisMinValue:AI.mMinimum;AF.mMaxTick=AJ.mUseMaxValue?AJ.mAxisMaxValue:AI.mMaximum;if(AI.mMinTick>=AI.mMaxTick){AF.mMaxTick=AF.mMinTick+1;}return AF;}if(!AJ.mUseMaxValue&&!AJ.mUseMinValue){q.call(AI,AF,AJ);}else{if(AJ.mUseMaxValue&&AJ.mUseMinValue){C.call(AI,AF,AJ);}else{if(AJ.mUseMaxValue){E.call(AI,AF,AJ);}else{h.call(AI,AF,AJ);}}}return AF;},computeTicksForLogScale:function(AH){var AG=AH.mOptions,AF={mTicks:[]};O.call(AH,AF,AG);return AF;},destroyDisposable:function(AF,AG){if(AG){n.removeItem(AF.disposables,AG);AG.destroy();}},handleDestroy:function(AI,AH){if(!AI){return ;}var AJ,AG=0,AF=AI.disposables,AK=(AF&&AF.length)||0;while(AG<AK){AJ=AF[AG];if(!AJ.scriptClass||AH.indexOf(AJ.scriptClass)<0){this.destroyDisposable(AI,AJ);}if(AF.length<AK){AK=AF.length;}else{AG++;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.TemplateBasedDropZones","mstrmojo.vi.models.EnumDragSources","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.array","mstrmojo.hash","mstrmojo.func");var I=mstrmojo.array,C=mstrmojo.hash,M="-1",P=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION;function O(){var Q=this.getHostModel();return Q?Q.gsi:null;}function L(Y,V,T,X,Q){var Z=this.getHost(),U=Z.controller,S,W;S=Y.did;W=Y.t;if(Q){var R=this.getUnitIndexInZone(V,Y);if(R!==-1){if(R<X){X--;}}}U.submitUndoRedoUpdates(this.getUpdateTemplateAction([Z.model.getPivotUnitAction(T,X,S,W)]),null,mstrmojo.func.wrapMethods(U._getXtabCallback(Z),this.getUpdateCallback()));}function J(T){var c=T.item,X=T.zone,Q=T.dsid,a=T.index,R=T.edge,Z=T.isPivot;var d=this.getHost(),W=d.controller,b=X.items,V=d.model,S=X.id,U=[];if(b.length){if(R===P.ON){var Y=b[a];U.push(V.getRemoveTemplateUnitAction(Y));}else{if(R===P.BELOW){a++;}}}else{a=0;}if(Z&&R!==P.ON){L.call(this,c,X,S,a,true);return ;}U.push(V.getAddTemplateUnitAction(c,Q,S,a));W.submitUndoRedoUpdates((T.actions||[]).concat(this.getUpdateTemplateAction(U)),null,mstrmojo.func.wrapMethods(W._getXtabCallback(d),this.getUpdateCallback()));}function K(Q){return Q.src.data.src===mstrmojo.vi.models.EnumDragSources.VIZ_EDITOR;}mstrmojo.vi.models.BaseVisDropZones=mstrmojo.declare(mstrmojo.vi.models.TemplateBasedDropZones,null,{scriptClass:"mstrmojo.vi.models.BaseVisDropZones",addZoneItem:function A(S,T,R){var U=R.mx,Q;if(S.did===M){I.forEach(U,function(V){Q={did:V.did,n:V.n,t:4};T.push(Q);});}else{this._super(S,T);}},getDropZones:function N(){var Q=O.call(this),R=this.getHost();return Q?{n:R.defn.ttl,zones:[this.getZone(mstrmojo.desc(3581,"Attributes"),1,Q.rows,false,{mx:Q.mx,title:mstrmojo.desc(13828)}),this.getZone(mstrmojo.desc(3582,"Metrics"),-1,Q.mx,false,{mx:Q.mx,title:mstrmojo.desc(13827)})]}:{n:R.defn.ttl,zones:[]};},getAvatarIconClass:function G(){return"viXtab";},getAllowDropInfo:function F(R,S,Q,U,T){var W=this._super(R,S,Q,U,T),V=R.id===-1;return C.copy({allowedItems:W.allowedItems.filter(function(Y){var X=Y.t===4;return V?X:!X;})},W);},unitsDropped:function E(Q,S,T,V,U){var R=T.allowedItems[0];J.call(this,{item:R,zone:Q,dsid:S.src.data.dsid,index:T.idx,edge:T.edge,isPivot:K(S),actions:S.actions});},deleteItem:function B(R,Q){this.deleteItems(R,[R.items[Q]]);},deleteItems:function D(R,S){var T=this.getHost(),Q=T.controller,U=[];(S||[]).forEach(function(V){U.push(T.model.getRemoveTemplateUnitAction(V));});if(U.length){Q.submitUndoRedoUpdates(this.getUpdateTemplateAction(U),null,mstrmojo.func.wrapMethods(Q._getXtabCallback(T),this.getUpdateCallback()));}},getExtraUnitMenuItems:function H(R,Q,T,S){this._super(R,Q,T,S);if(T.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Metric&&this.getHost().showThreshold){R.addSeparator();this.buildThresholdMenuOptions(R,{item:T},true);}},getHostModel:function(){return this.getHost().model.data;}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.editors.EditorModel","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.ui.editors.CharacterToolbarPopup","mstrmojo.array","mstrmojo.hash");var B=0,I=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,S=mstrmojo.models.FormatModel,H=S.ENUM_PROPERTY_NAMES.TEXT_ALIGN,K=mstrmojo.hash,T=B;function L(Z,U,W,a,X){var V=Z===this.getTitleFormatCode(),Y;if(W===H){Y=function(b){return this.titleAlignButtonBar.items.filter(function(c){return c.v===b;})[0].id;}.bind(this);}this.getHost().parent.changeUnitFormats(V,Z,U,W,a,X,Y,function(b){this.raiseEvent({name:"BEMFormatChange",propertyName:W,value:b,isTitle:V});}.bind(this));}function Q(V,W){var U=new mstrmojo.vi.ui.TextAlignButtonBar({includeJustify:false});this.titleAlignButtonBar=U;U.singleSelect(U.items.map(function(X){return X.id;}).indexOf(V));U.onValueChange=function(Y,X){W(H,Y,X);};return this.getLabelAndControl(mstrmojo.desc(13597,"Alignment:"),U);}function C(X){var W=this.getHost().getFormats(),b=W.ttl,V=[];if(b){var a=L.bind(this,this.getTitleFormatCode(),W),Z=this.getHost(),U=Z.parent.getTitleBarVisibility(),Y=[this.getCharacterGroup(a,b),this.getContainerGroup(b,a,I.FILL_COLOR,{showBackgroundNoFill:false}),Q.call(this,S.getFormatBlockValue(b,H),a)];Y.forEach(function(c){c.set("enabled",U);});V.push(this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(4756,"Title")),this.getCheckboxAndLabel(U,mstrmojo.desc(13599,"Show titlebar"),function(c){Z.parent.toggleTitleBar(!!c);})].concat(Y),{cssClass:"bem-tc-title",showDivider:false}));}V.push(this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(11917,"Container")),this.getContainerGroup(W,L.bind(this,1,W),this.getContainerCtrlFlags(),{showBackgroundNoFill:false,showBorderNoFill:false})],{cssClass:"bem-tc-container"}));this.replaceChildControls(X,V.concat(this.getTitleAndContainerControls()));}function D(U){var W=this.getTargetPulldownItems(U);var V=this.getPulldown(W,function(X){T=X;W[W.map(function(Y){return Y.v;}).indexOf(X)].h(X);});V.set("selectedIndex",Math.max(W.map(function(X){return X.v;}).indexOf(T),0));return V;}mstrmojo.vi.models.editors.BaseEditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.EditorModel,null,{scriptClass:"mstrmojo.vi.models.editors.BaseEditorModel",titleAlignButtonBar:null,init:function N(U){this._super(U);T=this.getInitialTarget();},selectTargetByValue:function M(U){if(U!==undefined){var V=this._targetPulldown;if(V){V.selectItemByField("v",U);}}},getInitialTarget:function R(){return B;},getEditorContents:function O(){var U=this.getEditorGroup([],{cssClass:"bem-dynamic-grp",showDivider:false,isNested:true,isContainer:true});var W=this._targetPulldown=D.call(this,U),V=[U].concat(this.getCommonControls());if(W.items.length>1){V.unshift(this.getEditorGroup([W]));}return V;},getFormattingToolbar:function F(V,a,W){if(V===B){var Z=this.getHost(),U=Z.getFormats(),Y=U.ttl;if(Y){Y=K.copy(Y);Y[H]=this.titleAlignButtonBar.items.filter(function(b){return b.id===Y["text-align"];})[0].v;var X=new mstrmojo.ui.editors.CharacterToolbarPopup(K.copy({onGroupValueChange:L.bind(this,this.getTitleFormatCode(),U),textAlignJustify:false,textAlignFmtName:H,anchorElement:a},W));X.setFormatSource(Y);return X;}}return null;},getCommonControls:function E(){return[];},getContainerCtrlFlags:function A(){return I.FILL_COLOR+I.BORDER;},getTitleAndContainerControls:function P(){return[];},getTargetPulldownItems:function G(V){var U=this.getHost().getFormats(),W=[];if(U&&(this.getHost().showTitleAndContainerFormats!==false)){W.push({n:mstrmojo.desc(12049,"Title and Container"),v:B,h:C.bind(this,V)});}return W;},getTitleFormatCode:function J(){return 2;}});mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE=B;}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.BaseVisDropZones","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.array","mstrmojo.hash","mstrmojo.func");var $ARR=mstrmojo.array,$HASH=mstrmojo.hash,$FUNC=mstrmojo.func,EMPTY_FN=mstrmojo.emptyFn,ENUM_TARGET_POSITION=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION,ENUM_DROP_ZONES=mstrmojo.vi.viz.EnumDSSDropZones;var ENUM_ALLOW_ATTRIBUTE_AND_METRIC=0,ENUM_ALLOW_ATTRIBUTE=1,ENUM_ALLOW_METRIC=2,ENUM_ALLOW_ATTRIBUTE_OR_METRIC=3;var DROP_ZONE_MAP=["XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","Angle","Grouping","GeoAttribute","Layout","FromItem","ToItem","ItemSize","Latitude","Longitude"];function mapZoneNameToJSONName(name){switch(name){case"Angle":return"AngleBy";case"Grouping":return"Grp";case"GeoAttribute":return"Geo";case"Layout":return"layout";case"FromItem":return"from";case"ToItem":return"to";case"ItemSize":return"itemsz";case"Latitude":return"Lat";case"Longitude":return"Long";}return name;}function isTemplateDropZone(zoneId){return zoneId===-1||zoneId===ENUM_DROP_ZONES.Rows||zoneId===ENUM_DROP_ZONES.Columns;}function getAddItemActions(zone,items,idx,replaceItem,datasetId){var host=this.getHost(),model=host.model,zoneId=zone.id,isTemplate=isTemplateDropZone(zoneId),extras={datasetId:datasetId},actions=[];if(replaceItem){actions.push(isTemplate?model.getRemoveTemplateUnitAction(replaceItem):this.getRemoveDropZoneUnitAction(zone,replaceItem));}if(isTemplate){$ARR.forEach(items,function(item){actions.push(model.getAddTemplateUnitAction(item,datasetId,zoneId,idx));});}else{actions=actions.concat(this.getAddDropZoneUnitsActions(zone,items,idx,extras)||[]);}return actions;}function generateDropZoneItems(dropZones){var length=dropZones&&dropZones.length;if(!length){return null;}var maxLength=DROP_ZONE_MAP.length;if(length>maxLength){throw"ERROR: Defined drop zones exceeds max capacity: "+maxLength+"!";}var me=this,zones=[],zoneNames=[];var getDisabledFn=function(disabledValue){var result=false;try{if(disabledValue){result=eval(disabledValue);}}catch(exception){result=false;}return result;};$ARR.forEach(dropZones,function(zone,index){var zoneName=zone.name,zoneDSSName=DROP_ZONE_MAP[index];if($ARR.indexOf(zoneNames,zoneName)>-1){throw"ERROR: More than one drop zones have same name!";}zoneNames.push(zoneName);zones.push(me.getZone(zoneName,ENUM_DROP_ZONES[zoneDSSName],me.getDZFlatStruct()[mapZoneNameToJSONName(zoneDSSName)],getDisabledFn.call(me,zone.disabled),{title:zone.title,allowSingle:zone.maxCapacity===1}));});return zones;}function getCustomDropZoneIndexByName(zoneName){var index=-1;$ARR.forEach(this.getCustomDropZones(),function(zone,i){if(zone.name===zoneName){index=i;return false;}});return index;}function getAllowedDropItems(zone,dragItems,edge){var me=this,allowObjectType=ENUM_ALLOW_ATTRIBUTE_AND_METRIC,maxCapacity=Number.MAX_VALUE,index=-1;$ARR.forEach(this.getCustomDropZones(),function(zoneDef,i){if(zoneDef.name===zone.n){allowObjectType=zoneDef.allowObjectType;maxCapacity=zoneDef.maxCapacity;index=i;return false;}});if(index===-1){return dragItems;}var isReplacing=this.isReplacing(edge),itemsInZone=this.getDropZoneObjectsByIndex(index),itemsCount=itemsInZone.length;if(!isReplacing&&itemsCount>=maxCapacity){return[];}return $ARR.filter(dragItems,function(item){var isMetric=me.isMetric(item);switch(allowObjectType){case ENUM_ALLOW_ATTRIBUTE:return !isMetric;case ENUM_ALLOW_METRIC:return isMetric;case ENUM_ALLOW_ATTRIBUTE_OR_METRIC:return !itemsCount?true:((itemsCount===1&&isReplacing)||(me.isMetric(itemsInZone[0])===isMetric));}return true;});}function calculateObjectTransition(zone,source,disallowType){var me=this,allowObjectType=zone.allowObjectType;if(allowObjectType!==disallowType&&source.length>0){if(allowObjectType===ENUM_ALLOW_ATTRIBUTE_OR_METRIC&&disallowType===ENUM_ALLOW_ATTRIBUTE&&$ARR.filterOne(this._dropZoneTransitions,function(info){return info.toZoneId===ENUM_DROP_ZONES[DROP_ZONE_MAP[getCustomDropZoneIndexByName.call(me,zone.name)]]&&!me.isMetric(info.obj);})){return ;}var i=Math.min(zone.maxCapacity||Number.MAX_VALUE,source.length);this.transitionObjectsToZone(zone.name,source.splice(0,i));}}mstrmojo.vi.models.CustomVisDropZones=mstrmojo.declare(mstrmojo.vi.models.BaseVisDropZones,null,{scriptClass:"mstrmojo.vi.models.CustomVisDropZones",getDropZones:function getDropZones(){var xtabStructure=this.getHostStructure(),host=this.getHost(),customDropZones=generateDropZoneItems.call(this,this.getCustomDropZones()),zones=xtabStructure?(customDropZones||this._super().zones):[];this.dropZones=zones;return{n:host.defn.ttl,zones:zones};},getAllowDropInfo:function getAllowDropInfo(zone,dragItems,idx,edge,context){dragItems=getAllowedDropItems.call(this,zone,dragItems,edge);return $HASH.copy(this.shouldAllowObjectsInDropZone(zone,dragItems,idx,edge,context),{allowedItems:dragItems.concat(),removeReplaced:edge===ENUM_TARGET_POSITION.ON&&$ARR.find(dragItems,"did",zone.items[idx].did)===-1});},unitsDropped:function unitsDropped(zone,context,dropInfo){var viz=this.getHost(),dragData=context.src.data,actions=context.actions||[],idx=dropInfo.idx,allowedItems=dropInfo.allowedItems,replaceItem=(this.isReplacing(dropInfo.edge)&&dropInfo.removeReplaced)?zone.items[idx]:null,templateActions=getAddItemActions.call(this,zone,allowedItems,this.getDropTargetIndex(zone,dropInfo),replaceItem,dragData.dsid);templateActions=templateActions.concat(this.getActionsForObjectsDropped(zone,allowedItems,this.getDropTargetIndex(zone,dropInfo),replaceItem,{datasetId:dragData.dsid})||[]);this.submitDropZoneUpdates(actions.concat(this.getUpdateTemplateAction(templateActions)),$FUNC.wrapMethods(context.callback,viz.model.docModel.controller._getXtabCallback(viz)));},deleteItems:function deleteItems(zone,items){var me=this,templateActions=[];$ARR.forEach(items,function(item){templateActions.push(isTemplateDropZone(zone.id)?me.getHost().model.getRemoveTemplateUnitAction(item):me.getRemoveDropZoneUnitAction(zone,item));});templateActions=templateActions.concat(this.getActionsForObjectsRemoved(zone,items)||[]);this.submitDropZoneTemplateUpdates(templateActions);},getUnitMenuItems:function getUnitMenuItems(cfg,zone,item,el){this._super(cfg,zone,item,el);this.getDropZoneContextMenuItems(cfg,zone,item,el);},getClearAllUnitsActions:function getClearAllUnitsActions(){return mstrmojo.vi.models.DropZonesModel.prototype.getClearAllUnitsActions.call(this);},transitionDropZones:function transitionDropZones(attributes,metrics){this._dropZoneTransitions=[];this.customDropZonesTransition(attributes,metrics);return this._dropZoneTransitions;},getColorByAttributes:function getColorByAttributes(){var customDZ=this.getCustomDropZones(),zoneItems,me=this;$ARR.forEach(customDZ,function(zone){if(zone.isColorBy===true){zoneItems=me.getDropZoneObjectsByName(zone.name);}});return zoneItems;},getCustomDropZones:EMPTY_FN,getActionsForObjectsDropped:EMPTY_FN,getActionsForObjectsRemoved:EMPTY_FN,getDropZoneContextMenuItems:EMPTY_FN,shouldAllowObjectsInDropZone:EMPTY_FN,getHostStructure:function getHostStructure(){var modelData=this.getHostModel();return modelData&&modelData.gsi;},getDropZoneObjectsByIndex:function getDropZoneItems(index){return this.getDZFlatStruct()[mapZoneNameToJSONName(DROP_ZONE_MAP[index])]||[];},getAddDropZoneObjectsActions:function getAddDropZoneObjectsActions(actions,zoneName,objects,idx,extras){$ARR.insert(actions,undefined,this.getAddDropZoneUnitsActions(this.getZoneModelByName(zoneName),objects||[],idx,extras));},getRemoveDropZoneObjectsActions:function getRemoveDropZoneObjectsActions(actions,zoneName,objects){var me=this;$ARR.forEach($ARR.ensureArray(objects),function(object){actions.push(me.getRemoveDropZoneUnitAction(me.getZoneModelByName(zoneName),object));});},getDropZoneObjectsByName:function getDropZoneObjectsByName(zoneName){return this.getDropZoneObjectsByIndex(getCustomDropZoneIndexByName.call(this,zoneName));},isMetric:function isMetric(object){return object&&object.t===4;},isSameObject:function isSameObject(obj1,obj2){return obj1&&obj2&&(obj1.did||obj1.oid||obj1.id)===(obj2.did||obj2.oid||obj2.id);},isReplacing:function isReplacing(edge){return edge===ENUM_TARGET_POSITION.ON;},isObjectInZone:function isObjectInZone(object,zoneName){var me=this;return $ARR.filter(me.getDropZoneObjectsByName(zoneName),function(dzItem){return me.isSameObject(dzItem,object);}).length>0;},isZoneEmpty:function isZoneEmpty(zoneName){return(this.getDropZoneObjectsByName(zoneName)||[]).length===0;},getZoneModelByName:function getZoneModelByName(zoneName){return this.getZoneModelByZoneId(ENUM_DROP_ZONES[DROP_ZONE_MAP[getCustomDropZoneIndexByName.call(this,zoneName)]]);},getAvatarIconClass:function getAvatarIconClass(){return"viXtab";},getDropZoneName:function getDropZoneName(zone){return zone&&zone.n;},transitionObjectsToZone:function transitionObjectsToZone(zoneName,objects){var dropZoneTransitions=this._dropZoneTransitions,zoneIndex=getCustomDropZoneIndexByName.call(this,zoneName);if(dropZoneTransitions&&zoneIndex!==-1&&objects){$ARR.ensureArray(objects).forEach(function(object){dropZoneTransitions.push({obj:object,toZoneId:ENUM_DROP_ZONES[DROP_ZONE_MAP[zoneIndex]]});});}},customDropZonesTransition:function customDropZonesTransition(attributes,metrics){var me=this,customDropZones=this.getCustomDropZones()||[];customDropZones.forEach(function(zone){calculateObjectTransition.call(me,zone,attributes,ENUM_ALLOW_METRIC);calculateObjectTransition.call(me,zone,metrics,ENUM_ALLOW_ATTRIBUTE);});}});mstrmojo.vi.models.CustomVisDropZones.ENUM_ALLOW_DROP_TYPE={ATTRIBUTE_AND_METRIC:ENUM_ALLOW_ATTRIBUTE_AND_METRIC,ATTRIBUTE:ENUM_ALLOW_ATTRIBUTE,METRIC:ENUM_ALLOW_METRIC,ATTRIBUTE_OR_METRIC:ENUM_ALLOW_ATTRIBUTE_OR_METRIC};}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.Widget","mstrmojo.VisUtility","mstrmojo.VisEnum","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.rw._XtabDE","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl","mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights","mstrmojo.Button","mstrmojo.models.template.DataInterface","mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.DocDataService","mstrmojo.hash","mstrmojo.gm.GMUtility","mstrmojo.func.composite","mstrmojo._colorPalette");var $DOM=mstrmojo.dom,$ARR=mstrmojo.array,$DSSOBJ_TYPES=mstrmojo.chart.model.enums.EnumDSSObjectType,$HASH=mstrmojo.hash,$NWB=mstrmojo.Button.newWebButton,$COMPOS=mstrmojo.func.composite,$FNEMPTY=mstrmojo.emptyFn,$UTIL=mstrmojo.VisUtility,$VIS_ENUM=mstrmojo.VisEnum,$GM_UTIL=mstrmojo.gm.GMUtility;var FILTER_TYPE={SHARED:0};var EXTERNAL_LIBS={D3:"d3"};function getErrorCtrlOverlay(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:this.errorMessage+" "+this.errorDetails}];}function toggleError(show){this.raiseEvent({name:"toggleCtrlOverlay",visible:show,controls:getErrorCtrlOverlay.call(this)});}function hideFilterMenuOption(){var vizContainer=this.parent,titleBar=vizContainer&&vizContainer.titleBar,toolbarCfg=titleBar&&titleBar.getMenuConfig();if(!toolbarCfg){return ;}toolbarCfg.menus=$ARR.filter(toolbarCfg.menus,function(item){return item.cls!=="uaf";});}function getSetPropertiesAction(){var modelData=this.model.data,xmlDom,xmlString;var convertJSONToXML=function(object,tagName){var ret=xmlDom.createElement(tagName),key;if(object instanceof Object){for(key in object){if(object.hasOwnProperty(key)){var child=convertJSONToXML(object[key],key);if(child){ret.appendChild(child);}}}}else{ret.setAttribute("value",object);}return ret;},encodeXMLString=function(xmlString){return xmlString.replace(/</g,"&lt;").replace(/"/g,"&quot;");};xmlDom=(new DOMParser()).parseFromString("<props><widgetProps><fmt></fmt></widgetProps></props>","text/xml");xmlDom.firstChild.firstChild.firstChild.appendChild(convertJSONToXML(this.getProperties(),"cvp"));xmlString=(new XMLSerializer()).serializeToString(xmlDom);return[{act:"setProperty",nodeKey:modelData.k,prs:"FormattingWidget",pri:4,v:encodeXMLString(xmlString)}];}function isValidProperties(properties,level){var isObject=typeof properties==="object";if((level===0&&!isObject)||(level===2&&isObject)){return false;}for(var key in properties){var value=properties[key];if(typeof value==="object"&&!isValidProperties(value,level+1)){return false;}}return true;}function reserveExternalLibrarys(noConflictLibs){var _noConflictLibs=this._noConflictLibs,D3=EXTERNAL_LIBS.D3;if(!_noConflictLibs){_noConflictLibs=this._noConflictLibs={};}$ARR.forEach(noConflictLibs,function(lib){if(!_noConflictLibs[D3]){switch(lib){case D3:_noConflictLibs[D3]=window.d3;return ;}}});}function getNoConflictLibraryReference(noConflictLibraries){var code="",D3=EXTERNAL_LIBS.D3;$ARR.forEach(noConflictLibraries,function(lib){switch(lib){case D3:code+="var d3 = this._noConflictLibs['"+D3+"'];";return ;}});return code;}mstrmojo.CustomVisBase=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo.vi.ui.rw._XtabDE,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo._colorPalette],{scriptClass:"mstrmojo.CustomVisBase",plotted:false,markupString:'<div id="{@id}" class="custom-vis-layout {@cssClass}" style="position:absolute;font-size:8pt;width:{@width}px;height:{@height}px;z-index:{@zIndex};{@viewportCssText}" mstrattach:click,mousedown,mouseup,mousemove></div>',markupSlots:{containerNode:function(){return this.domNode;},viewport:function(){return this.domNode;}},formatHandlers:{viewport:["background-color","left","top"]},bindings:{gridData:"this.model.data"},externalLibraries:null,cssFiles:null,errorMessage:"Either there is not enough data to display the visualization or the visualization configuration is incomplete.",errorDetails:"",isDynamicTooltip:true,reuseDOMNode:false,noConflictLibraries:null,dataInterface:null,init:function init(props){if(window.mstrApp&&window.mstrApp.isVI){var viewportHandler=this.formatHandlers.viewport;if(viewportHandler){var idx=$ARR.indexOf(viewportHandler,"background-color");if(idx>-1){viewportHandler.splice(idx,1);}}}this._super(props);var cssFiles=this.cssFiles;if(cssFiles){mstrmojo.insertCSSLinks(cssFiles);}},plot:mstrmojo.emptyFn,getFilterType:function getFilterType(){return this.defn.ins||FILTER_TYPE.SHARED;},unrender:function unrender(ignoreDom){this.clearCache();this._super(ignoreDom);},displayError:function displayError(){toggleError.call(this,true);},renderVisualization:function renderVisualization(){try{toggleError.call(this,false);this.dataInterface=new mstrmojo.models.template.DataInterface(this.getData());var noConflictLibraries=this.noConflictLibraries;if(noConflictLibraries&&noConflictLibraries.length>0){var codeString=this.plot.toString();eval(getNoConflictLibraryReference(noConflictLibraries)+codeString.substring(codeString.indexOf("{")+1,codeString.lastIndexOf("}")));}else{this.plot();}this.plotted=true;}catch(e){this.displayError();this.plotted=false;}},postBuildRendering:function postBuildRendering(){var me=this,libraries,res,sub;if(me.waitingForData){return ;}sub=me.listenToUpdateColorMap(function(){me.render();if(sub&&me.detachUpdateColorMapListener instanceof Function){me.detachUpdateColorMapListener(sub);}});hideFilterMenuOption.call(me);res=this._super();var egt=this.model.data.egt;if(this.isEmpty()&&(egt===undefined||egt===$VIS_ENUM.SERVER_JSON_ERROR_TYPE.AE_ERROR)){if(mstrApp.isExpress){this.addChildren(this.getVisEmptyMsgControls());this.errorMsg.render();}return false;}libraries=(this.externalLibraries||[]).concat();if(libraries){this.requiresExternalScripts(libraries,function(){var noConflictLibraries=me.noConflictLibraries;if(noConflictLibraries&&noConflictLibraries.length>0){reserveExternalLibrarys.call(me,noConflictLibraries);}me.renderVisualization();});}else{me.renderVisualization();}return res;},redraw:function redraw(){if(this.reuseDOMNode){if(this.plotted){this.renderVisualization();}return this.plotted;}return false;},moveTooltip:function moveTooltip(evt,win){var target=evt.target||$DOM.eventTarget(evt.hWin,evt.e),that=this,content,getTitle=function getTitle(node){var i,children=node.childNodes;for(i=0;i<children.length;i++){var child=children[i];if(child.nodeName==="title"){return child;}}if(node!==that.domNode){return getTitle(node.parentNode);}return null;},title=getTitle(target);if(title){var tooltip=title.innerHTML||title.textContent;if(tooltip.length){content=tooltip;title.tt=tooltip;title.innerHTML="";}else{if(title.tt!==undefined){content=title.tt;}}}this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:content,top:evt.clientY+12,left:evt.clientX-12,cssClass:"vi-regular vi-tooltip-A"};this._super(evt,win);},isEmpty:function isEmpty(){var data=this.model.data;return data.eg!==undefined||data.egt!==undefined;},getVisEmptyMsgControls:function getVisEmptyMsgControls(){var egt=this.model.data.egt;return this.isEmpty()?(((egt===undefined||egt===$VIS_ENUM.SERVER_JSON_ERROR_TYPE.AE_ERROR))?[{scriptClass:"mstrmojo.Widget",cssClass:"error-msg",alias:"errorMsg",markupString:$UTIL.getVisEmptyMsg("AE_ERROR")}]:getErrorCtrlOverlay.call(this)):this._super();},getProperties:function getProperties(){var data=this.model.data,vp=data.vp;if(!vp){data.vp={cvp:{}};}else{if(!vp.cvp){vp.cvp={};}}return data.vp.cvp;},getDefaultProperties:function getDefaultProperties(){return this.dvp||{};},setDefaultPropertyValues:function setDefaultPropertyValues(dvp){if(dvp instanceof Object){this.dvp=dvp;}else{this.dvp={};}},getProperty:function getProperty(propertyName){var props=this.getProperties(),defProps=this.getDefaultProperties(),propValue;propValue=props[propertyName]===undefined?defProps[propertyName]:props[propertyName];if(typeof propValue==="object"){propValue=$HASH.copy(props[propertyName],defProps[propertyName]);}return propValue;},setProperty:function setProperty(propertyName,newValue,config){var properties=this.getProperties(),oldValue=properties[propertyName];if(properties&&!$HASH.equals(oldValue,newValue)){properties[propertyName]=newValue;if(config&&config.onPropertyChange instanceof Function){var changedProperties=config.onPropertyChange(propertyName,newValue);if(isValidProperties(changedProperties,0)){$HASH.copy(changedProperties,properties);}else{mstrmojo.warn("Results of onPropertyChange() is invalid. It must be an JSON object that contains the properties and values you want to change, and can't have child properties that exceeds two levels.",{},{buttons:[$NWB(mstrmojo.desc(1442,"OK"),mstrmojo.emptyFn)]});}}var suppressData=!!(config&&config.suppressData),requestDefinition=config&&config.requestDefinition,customUndoRedoCallback=config&&config.clientUndoRedoCallback,hasClientUndoRedoCallback=customUndoRedoCallback&&(customUndoRedoCallback instanceof Function),me=this,visId=me.id,boxId=me.parent.id,visModel=me.model,docModel=visModel.docModel,controller=visModel.controller,actions=getSetPropertiesAction.call(this),callback,undoredoCallback,extra={},execute;var getClientUndoRedoCallback=function getClientUndoRedoCallback(val){return hasClientUndoRedoCallback?function(){var vis=mstrmojo.all[visId],properties=vis.getProperties();properties[propertyName]=val;customUndoRedoCallback.call(vis,val);vis.getDocModel().selectVIUnit(vis.parent.id,true);}:$FNEMPTY;};if(suppressData){callback=mstrmojo.emptyFn;execute=function(){this.submitSilent(actions);};}else{callback=docModel.getSliceCallback({tks:visModel.data.k});callback.success=$COMPOS([callback.success,function(){docModel.selectVIUnit(boxId,true);}]);execute=function(){this.submit(actions,callback,extra);};}undoredoCallback=controller._getXtabCallback(me);undoredoCallback.success=$COMPOS([undoredoCallback.success,function(){docModel.selectVIUnit(boxId,true);}]);if(requestDefinition){$HASH.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,extra);}controller.cmdMgr.execute({execute:execute,urInfo:{silent:hasClientUndoRedoCallback,callback:undoredoCallback,redo:getClientUndoRedoCallback(newValue),undo:getClientUndoRedoCallback(oldValue)}});}},addThresholdMenuItem:function addThresholdMenuItem(){this.showThreshold=true;},addUseAsFilterMenuItem:function addUseAsFilterMenuItem(){var vizContainer=this.parent;if(vizContainer&&vizContainer.generateToolbar){vizContainer.generateToolbar();}},getColorBy:function getColorBy(eids){if(!eids||!this.zonesModel){return null;}var zoneItems=this.zonesModel.getColorByAttributes(),colorObj,gts=this.dataInterface.data.gts,tids=[],attr=$DSSOBJ_TYPES.DssTypeAttribute;$ARR.forEach(gts.row.concat(gts.col),function(item){$ARR.forEach(zoneItems,function(itm){if((itm.otp===attr||itm.t===attr)&&itm.id===item.id){tids.push(itm.id);}});});colorObj=this.model.docModel.getColorBy(tids,eids);return $GM_UTIL.decodeColor(colorObj.color);},getColorByAttInfo:function getColorByAttInfo(zoneItems){function getShapeColorAndOpacity(cbElements){var me=this,colorObj,tid,eid,strtid,streid,attr,opacity,props=this.props||{},opacities=props.attrColorByOpacity||{};cbElements.map(function(item){tid=item.colorByAttributeIDs;eid=item.colorByElementIDs;strtid=tid&&tid.join("|");streid=eid&&eid.join("|");attr=opacities[strtid]||{};opacity=attr&&attr[streid];if(opacity===undefined){opacity=100;}item.opacity=opacity;if(tid&&eid){colorObj=me.model.docModel.getColorBy(tid,eid);item.color=$GM_UTIL.decodeColor(colorObj.color);}});}function getCbElements(zoneItems){var cbElements,cbAtt=[],gts=this.dataInterface.data.gts;$ARR.forEach(zoneItems,function(item){$ARR.forEach(gts.row.concat(gts.col),function(itm){if(itm.otp===12&&itm.id===item.id){cbAtt.push(itm);}});});function descartes(arr){var rs=[],len=arr.length,m,str,bothDescartes=function(arr1,arr2){var r=[],i,j,idx=0,len1=arr1.length,len2=arr2.es.length;for(i=0;i<len1;i++){for(j=0;j<len2;j++){str=arr1[i].text+" "+arr2.es[j].n;idx++;r.push({comb:arr1[i].comb.concat({eid:arr2.es[j].id,tid:arr2.id}),colorByAttributeIDs:arr1[i].colorByAttributeIDs.concat(arr2.id),colorByElementIDs:arr1[i].colorByElementIDs.concat(arr2.es[j].id),text:str});}}return r;};for(m=0;m<len;m++){if(m===0){$ARR.forEach(arr[0].es,function(itm){rs.push({comb:[{tid:arr[0].id,eid:itm.id}],colorByAttributeIDs:[arr[0].id],colorByElementIDs:[itm.id],text:itm.n});});}else{rs=bothDescartes(rs,arr[m]);}}return rs;}cbElements=descartes(cbAtt);cbElements.unshift({text:mstrmojo.desc(2461,"All"),color:"#ffffff",opacity:100,comb:[]});return cbElements;}var cbElements=getCbElements.call(this,zoneItems);getShapeColorAndOpacity.call(this,cbElements);return cbElements;},applySelection:function addSelection(selectInfo){if(!selectInfo){return ;}var me=this;this.clearSelections();$ARR.forEach($ARR.ensureArray(selectInfo),function(selection){if(selection.isSelectAttr){me.addAttributeSelection(selection.tid,selection.eid,selection.name);}else{me.addMetricValueSelection(selection);}});this.endSelections();}});mstrmojo.CustomVisBase.ENUM_EXTERNAL_LIBS=EXTERNAL_LIBS;}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.editors.BaseEditorModel","mstrmojo.vi.models.editors.ControlsViewFactory","mstrmojo.vi.models.editors.EditorModel","mstrmojo.models.FormatModel","mstrmojo.CustomVisBase","mstrmojo.ui.CheckList","mstrmojo.gm.GMUtility","mstrmojo.ui.editors.controls.Stepper","mstrmojo.NumGroupStepperContentProvider","mstrmojo.VisUtility","mstrmojo.gm.GMEnums");mstrmojo.requiresClsP("mstrmojo.ui.editors.controls","ComboBox","PreviewButton","CharacterGroup","FillConfigGroup","LineConfigGroup");var c=mstrmojo.emptyFn,Y=mstrmojo.array,L=mstrmojo.hash,l=mstrmojo.VisUtility,I=mstrmojo.gm.GMUtility,j=Y.ensureArray,b=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,W=mstrmojo.ui.editors.controls.CharacterGroup.CTRL_FLAGS,Z=mstrmojo.Button.newWebButton,C=mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS,f="30%",g="70%";function d(q,t){var s=null,u;if(typeof t==="number"){Y.forEach(q,function(w,v){if(!u){s=v;}else{if((t-w.value)*(t-u.value)<=0){s=Math.abs(t-w.value)<Math.abs(t-u.value)?v:v-1;return false;}}u=w;});}else{if(typeof t==="string"){Y.forEach(q,function(w,v){if(w.value.toString()===t){s=v;return false;}});}}return s;}function Q(q){return j(q).map(function(s){return{n:s.name,v:s.value};});}function D(w,x,t){var v=this.getHost(),s=this.docModel;if(!t||t.suppressData===undefined){t=L.copy({suppressData:true},t);}v.setProperty(w,x,t);if(t.suppressData){var u=t.callback instanceof Function?t.callback:v.renderVisualization.bind(v);u();var q=this._targetPulldown.selectedIndex;s.selectVIUnit(v.parent.id,true);this._targetPulldown.set("selectedIndex",q);}}function k(v,q,w,s){var u=this.getHost(),t=L.clone(u.getProperty(v))||{};t[q]=w;D.call(this,v,t,s);}function O(s,q){s.set("enabled",!q.disabled);var t=j(q.items);if(t.length>0&&s.getChildControl instanceof Function){t.forEach(function(u){var w=s.getChildControl(u.childName),v=u.disabled;if(w&&v!==undefined){w.set("enabled",!v);}});}}function i(q,u,t,s){q.forEach(function(x,w){x.slot="col"+(w+1)+"Node";});s=L.copy(s,{col1Width:u,col2Width:t,children:q});var v=new mstrmojo.ui.editors.controls.TwoColumnContainer(s);O(v,s);return v;}function h(w){var u=this,t=u.getHost(),q=w.propertyName,s=d.call(this,w.items,t.getProperty(q));var v=this.getPulldown(Q(w.items),function(x){D.call(u,q,x,w.config);},s||0);O(v,w);return v;}function o(s,q){var t={};if(q){s.forEach(function(v,u){var w=q[v.propertyName];if(w==="true"||w===true){t[u]=true;}});}return t;}function X(x){var t=this,s=t.getHost(),q=x.propertyName,v=s.getProperty(q),w=v==="true"?true:(v==="false"?false:x.value);var u=this.getCheckboxAndLabel(w,x.labelText,function(y){D.call(t,q,y.toString(),x.config);});O(u,x);return u;}function m(s,q,w){var x=this,z=x.getHost(),u=s.propertyName,v=j(s.items).map(function(AA){return{n:AA.labelText,propertyName:AA.propertyName};});var y={items:v,multiSelect:s.multiSelect,selectedIndices:o(v,z.getProperty(u)),postselectionChange:function(AA){var AD=AA.added,AE=this.items[AD?AD[0]:AA.removed[0]],AC=!!AD,AB=L.clone(z.getProperty(u))||{};if(this.multiSelect){AB[AE.propertyName]=AC.toString();}else{this.items.forEach(function(AF){AB[AF.propertyName]=(AF===AE?AC:!AC).toString();});}D.call(x,u,AB,s.config);}};L.copy(w,y);var t=new q(y);O(t,s);return t;}function G(q){return m.call(this,q,mstrmojo.ui.ButtonBar,{showIcon:false});}function K(q){return m.call(this,q,mstrmojo.ui.CheckList,{cssClass:"selectors",orientation:q.orientation});}function J(t){var s=this,q=[];Y.forEach(t,function(u){q.push(P.call(s,u));});return q;}function S(q){return new mstrmojo.Label({text:q});}function N(x){var v=this,u=v.getHost(),q=x.propertyName,s=x.config;var t={value:u.getProperty(q),onValid:function(){D.call(v,q,this.value,s);}};var w=new mstrmojo.ui.editors.controls.ValidationTextBox(t);O(w,x);return w;}function p(w){var u=this,t=u.getHost(),q=w.propertyName;var s={provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,value:Number(t.getProperty(q))||w.min||0},min:w.min,max:w.max,container:this,onTraverse:function(){D.call(u,q,this.curVal,w.config);}})};var v=new mstrmojo.ui.editors.controls.Stepper(s);O(v,w);return v;}function E(w){var u=this,t=u.getHost(),q=w.propertyName;var s={selectedValue:t.getProperty(q),items:Q(w.items),isHostedWithin:false,postselectedValueChange:function(x){D.call(u,q,x.value,w.config);}};var v=new mstrmojo.ui.editors.controls.ComboBox(s);O(v,w);return v;}function B(t,s,v,z){var y=this,AB=this.getHost(),w=t.propertyName,u;var x={getChildComp:z,onGroupValueChange:function(AD,AC){k.call(y,w,AD,AC,t.config);},getChildControl:function(AC){return this.getChildComp(AC);}};L.copyProps(["showGradient","showNoFill","showAutomatic"],t,x);u=new s(x);if(s===mstrmojo.ui.editors.controls.LineConfigGroup){var q=u.lineColorAndStyle.lineStyle;q.showNoneOption=u.showNoneOption;q.postInit();}var AA=AB.getProperty(w)||{};v.forEach(function(AC){u.setChildValue(AC,AA[AC]);});u.iniChildrenComp(v);O(u,t);return u;}function M(s){var q={};L.forEach(s,function(u,t){q[u]=t;});return q;}function A(s,t){var q={};if(s){L.forEach(t,function(v,u){q[v]=s[u];});}return q;}function V(s){var x=this,AB=this.getHost(),q=s&&s.config,u=s.propertyName,z=0,t,v={fontSize:b.FONT_SIZE,fontColor:b.COLOR,fontFamily:b.FONT_FAMILY,fontWeight:b.FONT_WEIGHT,fontItalic:b.FONT_STYLE,fontUnderline:b.UNDERLINE,fontLineThrough:b.LINE_THROUGH};if(s){if(s.showFontFamily!==false){z=z|W.FONT_FAMILY;}if(s.showFontStyle!==false){z=z|W.FONT_STYLE;}if(s.showFontSizeAndColor!==false){z=z|W.FONT_SIZE_AND_COLOR;}if(s.isFontSizeStepper===true){z=z|W.FONT_SIZE_USE_STEPPER;}}var w={visibleControls:z,onGroupValueChange:function(AE,AD){if(AE===b.FONT_SIZE){if(this.visibleControls&W.FONT_SIZE_USE_STEPPER){AD=AD[0];}AD=parseInt(AD,10)+"pt";}k.call(x,u,M(v)[AE],AD,q);},getChildControl:function(AD){return this[AD];}};t=new mstrmojo.ui.editors.controls.CharacterGroup(w);var AA=AB.getProperty(u),y=A(AA,v),AC=y[b.FONT_SIZE];if(s.isFontSizeStepper&&AC){y[b.FONT_SIZE]=[parseInt(AC,10)];}t.setFormatSource(y);O(t,s);return t;}function F(t){var s="fillColor",q="fillAlpha";return B.call(this,t,mstrmojo.ui.editors.controls.FillConfigGroup,[s,q],function(u){if(u===s){return this.fillColorAndTrans.fillColor;}if(u===q){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;});}function T(t){var s="lineColor",q="lineStyle";return B.call(this,t,mstrmojo.ui.editors.controls.LineConfigGroup,[s,q],function(u){if(u===s){return this.lineColorAndStyle.lineColor;}if(u===q){return this.lineColorAndStyle.lineStyle;}return undefined;});}function H(){var AB=this.getHost();function AA(AE){function AF(){if(AE===undefined){AE=0;}else{v=AE;}var AG=AD[AE];this.setChildValue(z,AG.color);}this.syncControls(AF);}function AC(){var AG=AB.zonesModel,AE=AG.getCustomDropZones(),AF=[];Y.forEach(AE,function(AI,AH){if(AI.isColorBy===true){AF=AG.dropZones[AH].items;}});return AF;}function x(AE){return AE.map(function(AG,AF){return{n:AG.text,title:AG.text,v:AF};});}var AD=AB.getColorByAttInfo(AC.call(this)),q=x(AD),z="ShapeClr",t="ShapeFillTrans",v,s,w=0,u,y=l.range(1,q.length);u=new mstrmojo.ui.editors.controls.FillConfigGroup({visibleControls:C.FILL_COLOR,onGroupValueChange:function(AJ,AI){var AH=[].concat(!v?y:v),AE=AJ===z,AG=[],AF=[],AL,AK;AH.forEach(function(AM){AL=AD[AM];AK=AL&&AL.comb;AF.push(AK);if(AE){AG.push(I.encodeColor(AI));AL.color=AI;}});if(AE){AB.updateColorMap(AF,AG);}}});if(u){u.iniChildrenComp([z]);AA.call(u,v);}s=this.getPulldown(q,AA.bind(u),w||0);return this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(13753,"Shape Color")),s,u]);}function a(v,y,u,x){var t=v.style,w=v.propertyName,q=mstrmojo.vi.models.editors.CustomVisEditorModel.WIDGET_TYPE,s=/^[a-z A-Z\u4e00-\u9fa5:]{1}([\w]|[\u4e00-\u9fa5]|[-.:_]){1,}$/;if(t&&v.style!==q.TWOCOLUMN&&v.style!==q.EDITORGROUP){if(!!w&&u.indexOf(w)!==-1&&y.indexOf(w)===-1){y.push(w);}else{if(!!w&&u.indexOf(w)===-1){u.push(w);}}if(!s.test(w)&&x.indexOf(w)===-1){x.push(w);}return ;}else{if(t&&(v.style===q.TWOCOLUMN||v.style===q.EDITORGROUP)){a(j(v.items),y,u,x);}}Y.forEach(v,function(z){a(z,y,u,x);});}function P(u){switch(u.style){case U.TWOCOLUMN:var s=j(u.items),t=s[0],q=s[1];f=(t&&t.width)||f;g=(q&&q.width)||g;return i.call(this,J.call(this,s),f,g,u);case U.PULLDOWN:return h.call(this,u);case U.LABEL:return S.call(this,u.labelText);case U.BUTTONBAR:return G.call(this,u);case U.CHECKBOXANDLABEL:return X.call(this,u);case U.CHECKLIST:return K.call(this,u);case U.TEXTBOX:return N.call(this,u);case U.STEPPER:return p.call(this,u);case U.COMBOBOX:return E.call(this,u);case U.CHARACTERGROUP:return V.call(this,u);case U.FILLGROUP:return F.call(this,u);case U.LINEGROUP:return T.call(this,u);case U.COLORBYGROUP:return H.call(this,u);}}function n(s){var t=this,q=[];Y.forEach(j(s),function(u){q.push(P.call(t,u));});return q;}function R(v,s){var q=[],t,u=this;Y.forEach(v,function(w){t=j(w.items);switch(w.style){case"EditorGroup":if(t&&t.length){q.push(u.getEditorGroup(n.call(u,t)));}break;default:q.push(P.call(u,w));}});this.replaceChildControls(s,q);}mstrmojo.vi.models.editors.CustomVisEditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.BaseEditorModel,null,{scriptClass:"mstrmojo.vi.models.editors.CustomVisEditorModel",getTargetPulldownItems:function e(w){var t=this._super(w),x,y=this,z=[],q=[],AA=[],v=[],AD,AB;x=Q(this.getCustomProperty());Y.forEach(x,function(AE){if(!!AE.v){z=z.concat(AE.v);}});if(!!z.length){a(z,q,AA,v);}AD=q&&q.length;AB=v&&v.length;if(AD||AB){var AC="The following property name are repeated: ##.",s="The following property name are invalid: **.",u=(AD&&AB)?AC+s:(AD?AC:s);mstrmojo.warn(mstrmojo.desc(null,u).replace("##",q).replace("**",v),{},{buttons:[Z(mstrmojo.desc(1442,"OK"),mstrmojo.emptyFn)]});}else{if(x.length){t=(j(t)).concat(x);Y.forEach(t,function(AE){if(AE.v){AE.h=R.bind(y,j(AE.v),w);}});}}return t;},getCustomProperty:c});var U=mstrmojo.vi.models.editors.CustomVisEditorModel.WIDGET_TYPE={PULLDOWN:"PullDown",BUTTONBAR:"ButtonBar",CHECKLIST:"CheckList",STEPPER:"Stepper",COMBOBOX:"ComboBox",TEXTBOX:"TextBox",CHECKBOXANDLABEL:"CheckBoxAndLabel",EDITORGROUP:"EditorGroup",TWOCOLUMN:"TwoColumn",LABEL:"Label",CHARACTERGROUP:"CharacterGroup",FILLGROUP:"FillGroup",LINEGROUP:"LineGroup",COLORBYGROUP:"ColorByGroup"};mstrmojo.vi.models.editors.CustomVisEditorModel.ENUM_LINE_STYLE=mstrmojo.gm.EnumCombinedLineStyle;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.Refine.DateTimeUtil=mstrmojo.declare(mstrmojo.Obj,null,null);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var B=Date,A=B.prototype,D=B.CultureInfo,G=function(I,H){if(!H){H=2;}return("000"+I).slice(H*-1);};A.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};A.setTimeToNow=function(){var H=new Date();this.setHours(H.getHours());this.setMinutes(H.getMinutes());this.setSeconds(H.getSeconds());this.setMilliseconds(H.getMilliseconds());return this;};B.today=function(){return new Date().clearTime();};B.compare=function(I,H){if(isNaN(I)||isNaN(H)){throw new Error(I+" - "+H);}else{if(I instanceof Date&&H instanceof Date){return(I<H)?-1:(I>H)?1:0;}else{throw new TypeError(I+" - "+H);}}};B.equals=function(I,H){return(I.compareTo(H)===0);};B.getDayNumberFromName=function(I){var M=D.dayNames,H=D.abbreviatedDayNames,L=D.shortestDayNames,K=I.toLowerCase();for(var J=0;J<M.length;J++){if(M[J].toLowerCase()==K||H[J].toLowerCase()==K||L[J].toLowerCase()==K){return J;}}return -1;};B.getMonthNumberFromName=function(I){var L=D.monthNames,H=D.abbreviatedMonthNames,K=I.toLowerCase();for(var J=0;J<L.length;J++){if(L[J].toLowerCase()==K||H[J].toLowerCase()==K){return J;}}return -1;};B.isLeapYear=function(H){return((H%4===0&&H%100!==0)||H%400===0);};B.getDaysInMonth=function(H,I){return[31,(B.isLeapYear(H)?29:28),31,30,31,30,31,31,30,31,30,31][I];};B.getTimezoneAbbreviation=function(K){var J=D.timezones,I;for(var H=0;H<J.length;H++){if(J[H].offset===K){return J[H].name;}}return null;};B.getTimezoneOffset=function(H){var K=D.timezones,J;for(var I=0;I<K.length;I++){if(K[I].name===H.toUpperCase()){return K[I].offset;}}return null;};A.clone=function(){return new Date(this.getTime());};A.compareTo=function(H){return Date.compare(this,H);};A.equals=function(H){return Date.equals(this,H||new Date());};A.between=function(I,H){return this.getTime()>=I.getTime()&&this.getTime()<=H.getTime();};A.isAfter=function(H){return this.compareTo(H||new Date())===1;};A.isBefore=function(H){return(this.compareTo(H||new Date())===-1);};A.isToday=function(){return this.isSameDay(new Date());};A.isSameDay=function(H){return this.clone().clearTime().equals(H.clone().clearTime());};A.addMilliseconds=function(H){this.setMilliseconds(this.getMilliseconds()+H);return this;};A.addSeconds=function(H){return this.addMilliseconds(H*1000);};A.addMinutes=function(H){return this.addMilliseconds(H*60000);};A.addHours=function(H){return this.addMilliseconds(H*3600000);};A.addDays=function(H){this.setDate(this.getDate()+H);return this;};A.addWeeks=function(H){return this.addDays(H*7);};A.addMonths=function(H){var I=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+H);this.setDate(Math.min(I,B.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};A.addYears=function(H){return this.addMonths(H*12);};A.add=function(I){if(typeof I=="number"){this._orient=I;return this;}var H=I;if(H.milliseconds){this.addMilliseconds(H.milliseconds);}if(H.seconds){this.addSeconds(H.seconds);}if(H.minutes){this.addMinutes(H.minutes);}if(H.hours){this.addHours(H.hours);}if(H.weeks){this.addWeeks(H.weeks);}if(H.months){this.addMonths(H.months);}if(H.years){this.addYears(H.years);}if(H.days){this.addDays(H.days);}return this;};var E,F,C;A.getWeek=function(){var O,N,M,L,K,J,I,H,Q,P;E=(!E)?this.getFullYear():E;F=(!F)?this.getMonth()+1:F;C=(!C)?this.getDate():C;if(F<=2){O=E-1;N=(O/4|0)-(O/100|0)+(O/400|0);M=((O-1)/4|0)-((O-1)/100|0)+((O-1)/400|0);Q=N-M;K=0;J=C-1+(31*(F-1));}else{O=E;N=(O/4|0)-(O/100|0)+(O/400|0);M=((O-1)/4|0)-((O-1)/100|0)+((O-1)/400|0);Q=N-M;K=Q+1;J=C+((153*(F-3)+2)/5)+58+Q;}I=(O+N)%7;L=(J+I-K)%7;H=(J+3-L)|0;if(H<0){P=53-((I-Q)/5|0);}else{if(H>364+Q){P=1;}else{P=(H/7|0)+1;}}E=F=C=null;return P;};A.getISOWeek=function(){E=this.getUTCFullYear();F=this.getUTCMonth()+1;C=this.getUTCDate();return G(this.getWeek());};A.setWeek=function(H){return this.moveToDayOfWeek(1).addWeeks(H-this.getWeek());};B._validate=function(K,J,H,I){if(typeof K=="undefined"){return false;}else{if(typeof K!="number"){throw new TypeError(K+" is not a Number.");}else{if(K<J||K>H){throw new RangeError(K+" is not a valid value for "+I+".");}}}return true;};B.validateMillisecond=function(H){return B._validate(H,0,999,"millisecond");};B.validateSecond=function(H){return B._validate(H,0,59,"second");};B.validateMinute=function(H){return B._validate(H,0,59,"minute");};B.validateHour=function(H){return B._validate(H,0,23,"hour");};B.validateDay=function(I,H,J){return B._validate(I,1,B.getDaysInMonth(H,J),"day");};B.validateMonth=function(H){return B._validate(H,0,11,"month");};B.validateYear=function(H){return B._validate(H,0,9999,"year");};A.set=function(H){if(B.validateMillisecond(H.millisecond)){this.addMilliseconds(H.millisecond-this.getMilliseconds());}if(B.validateSecond(H.second)){this.addSeconds(H.second-this.getSeconds());}if(B.validateMinute(H.minute)){this.addMinutes(H.minute-this.getMinutes());}if(B.validateHour(H.hour)){this.addHours(H.hour-this.getHours());}if(B.validateMonth(H.month)){this.addMonths(H.month-this.getMonth());}if(B.validateYear(H.year)){this.addYears(H.year-this.getFullYear());}if(B.validateDay(H.day,this.getFullYear(),this.getMonth())){this.addDays(H.day-this.getDate());}if(H.timezone){this.setTimezone(H.timezone);}if(H.timezoneOffset){this.setTimezoneOffset(H.timezoneOffset);}if(H.week&&B._validate(H.week,0,53,"week")){this.setWeek(H.week);}return this;};A.moveToFirstDayOfMonth=function(){return this.set({day:1});};A.moveToLastDayOfMonth=function(){return this.set({day:B.getDaysInMonth(this.getFullYear(),this.getMonth())});};A.moveToNthOccurrence=function(I,J){var H=0;if(J>0){H=J-1;}else{if(J===-1){this.moveToLastDayOfMonth();if(this.getDay()!==I){this.moveToDayOfWeek(I,-1);}return this;}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(I,+1).addWeeks(H);};A.moveToDayOfWeek=function(H,I){var J=(H-this.getDay()+7*(I||+1))%7;return this.addDays((J===0)?J+=7*(I||+1):J);};A.moveToMonth=function(J,H){var I=(J-this.getMonth()+12*(H||+1))%12;return this.addMonths((I===0)?I+=12*(H||+1):I);};A.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};A.getTimezone=function(){return B.getTimezoneAbbreviation(this.getUTCOffset());};A.setTimezoneOffset=function(J){var H=this.getTimezoneOffset(),I=Number(J)*-6/10;return this.addMinutes(I-H);};A.setTimezone=function(H){return this.setTimezoneOffset(B.getTimezoneOffset(H));};A.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};A.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};A.getUTCOffset=function(){var I=this.getTimezoneOffset()*-10/6,H;if(I<0){H=(I-10000).toString();return H.charAt(0)+H.substr(2);}else{H=(I+10000).toString();return"+"+H.substr(1);}};A.getElapsed=function(H){return(H||new Date())-this;};if(!A.toISOString){A.toISOString=function(){function H(I){return I<10?"0"+I:I;}return'"'+this.getUTCFullYear()+"-"+H(this.getUTCMonth()+1)+"-"+H(this.getUTCDate())+"T"+H(this.getUTCHours())+":"+H(this.getUTCMinutes())+":"+H(this.getUTCSeconds())+'Z"';};}A._toString=A.toString;A.toString=function(J){var H=this;if(J&&J.length==1){var K=D.formatPatterns;H.t=H.toString;switch(J){case"d":return H.t(K.shortDate);case"D":return H.t(K.longDate);case"F":return H.t(K.fullDateTime);case"m":return H.t(K.monthDay);case"r":return H.t(K.rfc1123);case"s":return H.t(K.sortableDateTime);case"t":return H.t(K.shortTime);case"T":return H.t(K.longTime);case"u":return H.t(K.universalSortableDateTime);case"y":return H.t(K.yearMonth);}}var I=function(L){switch(L*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return J?J.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(L){if(L.charAt(0)==="\\"){return L.replace("\\","");}H.h=H.getHours;switch(L){case"hh":return G(H.h()<13?(H.h()===0?12:H.h()):(H.h()-12));case"h":return H.h()<13?(H.h()===0?12:H.h()):(H.h()-12);case"HH":return G(H.h());case"H":return H.h();case"mm":return G(H.getMinutes());case"m":return H.getMinutes();case"ss":return G(H.getSeconds());case"s":return H.getSeconds();case"yyyy":return G(H.getFullYear(),4);case"yy":return G(H.getFullYear());case"dddd":return D.dayNames[H.getDay()];case"ddd":return D.abbreviatedDayNames[H.getDay()];case"dd":return G(H.getDate());case"d":return H.getDate();case"MMMM":return D.monthNames[H.getMonth()];case"MMM":return D.abbreviatedMonthNames[H.getMonth()];case"MM":return G((H.getMonth()+1));case"M":return H.getMonth()+1;case"t":return H.h()<12?D.amDesignator.substring(0,1):D.pmDesignator.substring(0,1);case"tt":return H.h()<12?D.amDesignator:D.pmDesignator;case"S":return I(H.getDate());default:return L;}}):this._toString();};}());(function(){var Q=Date,G=Q.prototype,R=Q.CultureInfo,K=Number.prototype;G._orient=+1;G._nth=null;G._is=false;G._same=false;G._isSecond=false;K._dateElement="day";G.next=function(){this._orient=+1;return this;};Q.next=function(){return Q.today().next();};G.last=G.prev=G.previous=function(){this._orient=-1;return this;};Q.last=Q.prev=Q.previous=function(){return Q.today().last();};G.is=function(){this._is=true;return this;};G.same=function(){this._same=true;this._isSecond=false;return this;};G.today=function(){return this.same().day();};G.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}return false;};G.at=function(V){return(typeof V==="string")?Q.parse(this.toString("d")+" "+V):this.set(V);};K.fromNow=K.after=function(V){var W={};W[this._dateElement]=this;return((!V)?new Date():V.clone()).add(W);};K.ago=K.before=function(V){var W={};W[this._dateElement]=this*-1;return((!V)?new Date():V.clone()).add(W);};var E=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),H=("january february march april may june july august september october november december").split(/\s/),J=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),L=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),B=("final first second third fourth fifth").split(/\s/),T;G.toObject=function(){var W={};for(var V=0;V<J.length;V++){W[J[V].toLowerCase()]=this["get"+L[V]]();}return W;};Q.fromObject=function(V){V.week=null;return Date.today().set(V);};var S=function(V){return function(){if(this._is){this._is=false;return this.getDay()==V;}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}this._isSecond=false;var X=this._nth;this._nth=null;var W=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(V,X);if(this>W){throw new RangeError(Q.getDayName(V)+" does not occur "+X+" times in the month of "+Q.getMonthName(W.getMonth())+" "+W.getFullYear()+".");}return this;}return this.moveToDayOfWeek(V,this._orient);};};var F=function(V){return function(){var X=Q.today(),W=V-X.getDay();if(V===0&&R.firstDayOfWeek===1&&X.getDay()!==0){W=W+7;}return X.addDays(W);};};for(var P=0;P<E.length;P++){Q[E[P].toUpperCase()]=Q[E[P].toUpperCase().substring(0,3)]=P;Q[E[P]]=Q[E[P].substring(0,3)]=F(P);G[E[P]]=G[E[P].substring(0,3)]=S(P);}var U=function(V){return function(){if(this._is){this._is=false;return this.getMonth()===V;}return this.moveToMonth(V,this._orient);};};var I=function(V){return function(){return Q.today().set({month:V,day:1});};};for(var O=0;O<H.length;O++){Q[H[O].toUpperCase()]=Q[H[O].toUpperCase().substring(0,3)]=O;Q[H[O]]=Q[H[O].substring(0,3)]=I(O);G[H[O]]=G[H[O].substring(0,3)]=U(O);}var C=function(V){return function(){if(this._isSecond){this._isSecond=false;return this;}if(this._same){this._same=this._is=false;var a=this.toObject(),Z=(arguments[0]||new Date()).toObject(),Y="",X=V.toLowerCase();for(var W=(J.length-1);W>-1;W--){Y=J[W].toLowerCase();if(a[Y]!=Z[Y]){return false;}if(X==Y){break;}}return true;}if(V.substring(V.length-1)!="s"){V+="s";}return this["add"+V](this._orient);};};var D=function(V){return function(){this._dateElement=V;return this;};};for(var N=0;N<J.length;N++){T=J[N].toLowerCase();G[T]=G[T+"s"]=C(J[N]);K[T]=K[T+"s"]=D(T);}G._ss=C("Second");var A=function(V){return function(W){if(this._same){return this._ss(arguments[0]);}if(W||W===0){return this.moveToNthOccurrence(W,V);}this._nth=V;if(V===2&&(W===undefined||W===null)){this._isSecond=true;return this.addSeconds(this._orient);}return this;};};for(var M=0;M<B.length;M++){G[B[M]]=(M===0)?A(-1):A(M);}}());(function(){Date.Parsing={Exception:function(I){this.message="Parse error at '"+I.substring(0,10)+" ...'";}};var A=Date.Parsing;var C=A.Operators={rtoken:function(I){return function(J){var K=J.match(I);if(K){return([K[0],J.substring(K[0].length)]);}else{throw new A.Exception(J);}};},token:function(I){return function(J){return C.rtoken(new RegExp("^s*"+J+"s*"))(J);};},stoken:function(I){return C.rtoken(new RegExp("^"+I));},until:function(I){return function(J){var K=[],M=null;while(J.length){try{M=I.call(this,J);}catch(L){K.push(M[0]);J=M[1];continue;}break;}return[K,J];};},many:function(I){return function(J){var M=[],K=null;while(J.length){try{K=I.call(this,J);}catch(L){return[M,J];}M.push(K[0]);J=K[1];}return[M,J];};},optional:function(I){return function(J){var K=null;try{K=I.call(this,J);}catch(L){return[null,J];}return[K[0],K[1]];};},not:function(I){return function(J){try{I.call(this,J);}catch(K){return[null,J];}throw new A.Exception(J);};},ignore:function(I){return I?function(J){var K=null;K=I.call(this,J);return[null,K[1]];}:null;},product:function(){var J=arguments[0],K=Array.prototype.slice.call(arguments,1),L=[];for(var I=0;I<J.length;I++){L.push(C.each(J[I],K));}return L;},cache:function(K){var I={},J=null;return function(L){try{J=I[L]=(I[L]||K.call(this,L));}catch(M){J=I[L]=M;}if(J instanceof A.Exception){throw J;}else{return J;}};},any:function(){var I=arguments;return function(K){var L=null;for(var J=0;J<I.length;J++){if(I[J]==null){continue;}try{L=(I[J].call(this,K));}catch(M){L=null;}if(L){return L;}}throw new A.Exception(K);};},each:function(){var I=arguments;return function(K){var N=[],L=null;for(var J=0;J<I.length;J++){if(I[J]==null){continue;}try{L=(I[J].call(this,K));}catch(M){throw new A.Exception(K);}N.push(L[0]);K=L[1];}return[N,K];};},all:function(){var J=arguments,I=I;return I.each(I.optional(J));},sequence:function(I,J,K){J=J||C.rtoken(/^\s*/);K=K||null;if(I.length==1){return I[0];}return function(O){var P=null,Q=null;var S=[];for(var N=0;N<I.length;N++){try{P=I[N].call(this,O);}catch(R){break;}S.push(P[0]);try{Q=J.call(this,P[1]);}catch(M){Q=null;break;}O=Q[1];}if(!P){throw new A.Exception(O);}if(Q){throw new A.Exception(Q[1]);}if(K){try{P=K.call(this,P[1]);}catch(L){throw new A.Exception(P[1]);}}return[S,(P?P[1]:O)];};},between:function(J,K,I){I=I||J;var L=C.each(C.ignore(J),K,C.ignore(I));return function(M){var N=L.call(this,M);return[[N[0][0],r[0][2]],N[1]];};},list:function(I,J,K){J=J||C.rtoken(/^\s*/);K=K||null;return(I instanceof Array?C.each(C.product(I.slice(0,-1),C.ignore(J)),I.slice(-1),C.ignore(K)):C.each(C.many(C.each(I,C.ignore(J))),px,C.ignore(K)));},set:function(I,J,K){J=J||C.rtoken(/^\s*/);K=K||null;return function(X){var L=null,N=null,M=null,O=null,P=[[],X],W=false;for(var R=0;R<I.length;R++){M=null;N=null;L=null;W=(I.length==1);try{L=I[R].call(this,X);}catch(U){continue;}O=[[L[0]],L[1]];if(L[1].length>0&&!W){try{M=J.call(this,L[1]);}catch(V){W=true;}}else{W=true;}if(!W&&M[1].length===0){W=true;}if(!W){var S=[];for(var Q=0;Q<I.length;Q++){if(R!=Q){S.push(I[Q]);}}N=C.set(S,J).call(this,M[1]);if(N[0].length>0){O[0]=O[0].concat(N[0]);O[1]=N[1];}}if(O[1].length<P[1].length){P=O;}if(P[1].length===0){break;}}if(P[0].length===0){return P;}if(K){try{M=K.call(this,P[1]);}catch(T){throw new A.Exception(P[1]);}P[1]=M[1];}return P;};},forward:function(I,J){return function(K){return I[J].call(this,K);};},replace:function(J,I){return function(K){var L=J.call(this,K);return[I,L[1]];};},process:function(J,I){return function(K){var L=J.call(this,K);return[I.call(this,L[0]),L[1]];};},min:function(I,J){return function(K){var L=J.call(this,K);if(L[0].length<I){throw new A.Exception(K);}return L;};}};var H=function(I){return function(){var J=null,M=[];if(arguments.length>1){J=Array.prototype.slice.call(arguments);}else{if(arguments[0] instanceof Array){J=arguments[0];}}if(J){for(var L=0,K=J.shift();L<K.length;L++){J.unshift(K[L]);M.push(I.apply(null,J));J.shift();return M;}}else{return I.apply(null,arguments);}};};var G="optional not ignore cache".split(/\s/);for(var D=0;D<G.length;D++){C[G[D]]=H(C[G[D]]);}var F=function(I){return function(){if(arguments[0] instanceof Array){return I.apply(null,arguments[0]);}else{return I.apply(null,arguments);}};};var E="each any all".split(/\s/);for(var B=0;B<E.length;B++){C[E[B]]=F(C[E[B]]);}}());(function(){var E=Date,K=E.prototype,F=E.CultureInfo;var G=function(M){var N=[];for(var L=0;L<M.length;L++){if(M[L] instanceof Array){N=N.concat(G(M[L]));}else{if(M[L]){N.push(M[L]);}}}return N;};E.Grammar={};E.Translator={hour:function(L){return function(){this.hour=Number(L);};},minute:function(L){return function(){this.minute=Number(L);};},second:function(L){return function(){this.second=Number(L);};},meridian:function(L){return function(){this.meridian=L.slice(0,1).toLowerCase();};},timezone:function(L){return function(){var M=L.replace(/[^\d\+\-]/g,"");if(M.length){this.timezoneOffset=Number(M);}else{this.timezone=L.toLowerCase();}};},day:function(L){var M=L[0];return function(){this.day=Number(M.match(/\d+/)[0]);};},month:function(L){return function(){this.month=(L.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(L)/4:Number(L)-1;};},year:function(L){return function(){var M=Number(L);this.year=((L.length>2)?M:(M+(((M+2000)<F.twoDigitYearMax)?2000:1900)));};},rday:function(L){return function(){switch(L){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(L){L=(L instanceof Array)?L:[L];for(var N=0;N<L.length;N++){if(L[N]){L[N].call(this);}}var M=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=M.getDate();}if(!this.year){this.year=M.getFullYear();}if(!this.month&&this.month!==0){this.month=M.getMonth();}if(!this.day){this.day=1;}if(!this.hour){this.hour=0;}if(!this.minute){this.minute=0;}if(!this.second){this.second=0;}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.day>E.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}var O=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){O.set({timezone:this.timezone});}else{if(this.timezoneOffset){O.set({timezoneOffset:this.timezoneOffset});}}return O;},finish:function(L){L=(L instanceof Array)?G(L):[L];if(L.length===0){return null;}for(var Q=0;Q<L.length;Q++){if(typeof L[Q]=="function"){L[Q].call(this);}}var N=E.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else{if(this.now){N=new Date();}}var R=!!(this.days&&this.days!==null||this.orient||this.operator);var S,P,O;O=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){N.setTimeToNow();}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;R=true;}}if(!R&&this.weekday&&!this.day&&!this.days){var M=Date[this.weekday]();this.day=M.getDate();if(!this.month){this.month=M.getMonth();}this.year=M.getFullYear();}if(R&&this.weekday&&this.unit!="month"){this.unit="day";S=(E.getDayNumberFromName(this.weekday)-N.getDay());P=7;this.days=S?((S+(O*P))%P):(O*P);}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}if(this.month&&!this.day&&this.value){N.set({day:this.value*1});if(!R){this.day=this.value*1;}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;R=true;}if(R&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";S=(this.month-N.getMonth());P=12;this.months=S?((S+(O*P))%P):(O*P);this.month=null;}if(!this.unit){this.unit="day";}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*O;}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}this[this.unit+"s"]=this.value*O;}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.weekday&&!this.day&&!this.days){var M=Date[this.weekday]();this.day=M.getDate();if(M.getMonth()!==N.getMonth()){this.month=M.getMonth();}}if((this.month||this.month===0)&&!this.day){this.day=1;}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}if(R&&this.timezone&&this.day&&this.days){this.day=this.days;}return(R)?N.add(this):N.set(this);}};var H=E.Parsing.Operators,D=E.Grammar,J=E.Translator,B;D.datePartDelimiter=H.rtoken(/^([\s\-\.\,\/\x27]+)/);D.timePartDelimiter=H.stoken(":");D.whiteSpace=H.rtoken(/^\s*/);D.generalDelimiter=H.rtoken(/^(([\s\,]|at|@|on)+)/);var A={};D.ctoken=function(P){var O=A[P];if(!O){var Q=F.regexPatterns;var N=P.split(/\s+/),M=[];for(var L=0;L<N.length;L++){M.push(H.replace(H.rtoken(Q[N[L]]),N[L]));}O=A[P]=H.any.apply(null,M);}return O;};D.ctoken2=function(L){return H.rtoken(F.regexPatterns[L]);};D.h=H.cache(H.process(H.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),J.hour));D.hh=H.cache(H.process(H.rtoken(/^(0[0-9]|1[0-2])/),J.hour));D.H=H.cache(H.process(H.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),J.hour));D.HH=H.cache(H.process(H.rtoken(/^([0-1][0-9]|2[0-3])/),J.hour));D.m=H.cache(H.process(H.rtoken(/^([0-5][0-9]|[0-9])/),J.minute));D.mm=H.cache(H.process(H.rtoken(/^[0-5][0-9]/),J.minute));D.s=H.cache(H.process(H.rtoken(/^([0-5][0-9]|[0-9])/),J.second));D.ss=H.cache(H.process(H.rtoken(/^[0-5][0-9]/),J.second));D.hms=H.cache(H.sequence([D.H,D.m,D.s],D.timePartDelimiter));D.t=H.cache(H.process(D.ctoken2("shortMeridian"),J.meridian));D.tt=H.cache(H.process(D.ctoken2("longMeridian"),J.meridian));D.z=H.cache(H.process(H.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),J.timezone));D.zz=H.cache(H.process(H.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),J.timezone));D.zzz=H.cache(H.process(D.ctoken2("timezone"),J.timezone));D.timeSuffix=H.each(H.ignore(D.whiteSpace),H.set([D.tt,D.zzz]));D.time=H.each(H.optional(H.ignore(H.stoken("T"))),D.hms,D.timeSuffix);D.d=H.cache(H.process(H.each(H.rtoken(/^([0-2]\d|3[0-1]|\d)/),H.optional(D.ctoken2("ordinalSuffix"))),J.day));D.dd=H.cache(H.process(H.each(H.rtoken(/^([0-2]\d|3[0-1])/),H.optional(D.ctoken2("ordinalSuffix"))),J.day));D.ddd=D.dddd=H.cache(H.process(D.ctoken("sun mon tue wed thu fri sat"),function(L){return function(){this.weekday=L;};}));D.M=H.cache(H.process(H.rtoken(/^(1[0-2]|0\d|\d)/),J.month));D.MM=H.cache(H.process(H.rtoken(/^(1[0-2]|0\d)/),J.month));D.MMM=D.MMMM=H.cache(H.process(D.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),J.month));D.y=H.cache(H.process(H.rtoken(/^(\d\d?)/),J.year));D.yy=H.cache(H.process(H.rtoken(/^(\d\d)/),J.year));D.yyy=H.cache(H.process(H.rtoken(/^(\d\d?\d?\d?)/),J.year));D.yyyy=H.cache(H.process(H.rtoken(/^(\d\d\d\d)/),J.year));B=function(){return H.each(H.any.apply(null,arguments),H.not(D.ctoken2("timeContext")));};D.day=B(D.d,D.dd);D.month=B(D.M,D.MMM);D.year=B(D.yyyy,D.yy);D.orientation=H.process(D.ctoken("past future"),function(L){return function(){this.orient=L;};});D.operator=H.process(D.ctoken("add subtract"),function(L){return function(){this.operator=L;};});D.rday=H.process(D.ctoken("yesterday tomorrow today now"),J.rday);D.unit=H.process(D.ctoken("second minute hour day week month year"),function(L){return function(){this.unit=L;};});D.value=H.process(H.rtoken(/^\d\d?(st|nd|rd|th)?/),function(L){return function(){this.value=L.replace(/\D/g,"");};});D.expression=H.set([D.rday,D.operator,D.value,D.unit,D.orientation,D.ddd,D.MMM]);B=function(){return H.set(arguments,D.datePartDelimiter);};D.mdy=B(D.ddd,D.month,D.day,D.year);D.ymd=B(D.ddd,D.year,D.month,D.day);D.dmy=B(D.ddd,D.day,D.month,D.year);D.date=function(L){return((D[F.dateElementOrder]||D.mdy).call(this,L));};D.format=H.process(H.many(H.any(H.process(H.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(L){if(D[L]){return D[L];}else{throw E.Parsing.Exception(L);}}),H.process(H.rtoken(/^[^dMyhHmstz]+/),function(L){return H.ignore(H.stoken(L));}))),function(L){return H.process(H.each.apply(null,L),J.finishExact);});var I={};var C=function(L){return I[L]=(I[L]||D.format(L)[0]);};D.formats=function(M){if(M instanceof Array){var N=[];for(var L=0;L<M.length;L++){N.push(C(M[L]));}return H.any.apply(null,N);}else{return C(M);}};D._formats=D.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);D._start=H.process(H.set([D.date,D.time,D.expression],D.generalDelimiter,D.whiteSpace),J.finish);D.start=function(L){try{var M=D._formats.call({},L);if(M[1].length===0){return M;}}catch(N){}return D._start.call({},L);};E._parse=E.parse;E.parse=function(L){var M=null;if(!L){return null;}if(L instanceof Date){return L;}try{M=E.Grammar.start.call({},L.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(N){return null;}return((M[1].length===0)?M[0]:null);};E.getParseFunction=function(M){var L=E.Grammar.formats(M);return function(N){var O=null;try{O=L.call({},N);}catch(P){return null;}return((O[1].length===0)?O[0]:null);};};E.parseExact=function(L,M){return E.getParseFunction(M)(L);};}());}());