mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};(function(){mstrmojo.requiresDescs(9380,9381,9382,9383,9384,9385,9379,15106,15107,10639,10159,9705,9704);mstrmojo.DI.DIConstants=mstrmojo.provide("mstrmojo.DI.DIConstants",{invalidObjectNameChars:'\\"[]',invalidObjectNameCharsRegex:/[\\"\[\]]/,sourceItemLinkType:{dbList:0,oauthPara:1},setDefaultOAuthParamCMD:"MSTR_DEFAULT_OAUTH_PARAMS",actions:{none:0,importSource:1,editImport:2,transform:3,changeSheet:4,publish:5,changeMappings:6,refine:7,quickPreview:8,savePublish:9,getFlatPreview:10,refreshData:11,mergeCube:12},localStorageKey:{HGOSFileTypeTooltipPop:"HGOSFileTypeTooltipPop"},requestFlag:{mapping:1,preview:2,sourceInfo:4,refineSourceInfo:8,sheets:16,crb:32,transformations:64,transformedPreview:128,relationship:256,stateInfo:512,anyState:268435456,fullData:1024,refineInnerData:2048},formMappingFlag:{formMappingFlagReserved:0,formMappingFlagRemoveGeoRole:1,formMappingFlagRemoveTimeRole:2,formMappingFlagRemoveDeriveFlags:4},browseFlag:{reportBindingTable:1,dataPreview:4,publish:16,cubeConfig:68,reportLevelProperty:256},importBehaviorFlag:{reserved:0,newColumnsSilent:1,dataTypeSilent:2},saveAsFlags:{saveAsOverWrite:32,saveAsManaged:524288,saveAsDDA:33554432,saveAsInMemory:67108864,saveAsWithPrompts:4096,saveAsWithAnswers:4},connectLiveSupport:{connectLiveSupportUnknown:0,connectLiveSupportDDAOrInMemory:1,connectLiveSupportInMemoryOnly:2,connectLiveSupportDDAOnly:3},xdaType:{excel:272,text:288,refine:384,salesforce:337,querybuilder:352,ffsql:304,mdx:2,customFreeFormSQL:3,googleAnalytics:390,googleBigQuery:341,googleBigQueryFFSQL:342,googleBigQuerySingleTable:345,qbSingleTable:368,twitter:343,facebook:344,dataImport:256,projectsImport:400,sparkDataset:416,dataImportFileExcel:16|256,dataImportFileText:32|256,dataImportCustomSQL:48|256,dataImportTable:64|256,dataImportOAuth:80|256,dataImportBISource:144|256,dataImportOAuthSalesforce:1|336,dataImportOAuthGDocs:2|336,dataImportOAuthGDrive:2|336,dataImportOAuthDropbox:3|336,dataImportOAuthGAnalytics:4|336,dataImportOAuthGBigQuery:5|336,dataImportOAuthGBigQueryFFSQL:6|336,dataImportOAuthGBigQuerySingleTable:9|336,spark:160|256},fileTypes:[{n:"CSV/TXT",v:"CSV"},{n:"PARQUET",v:"PARQUET"},{n:"AVRO",v:"AVRO"},{n:"ORC",v:"ORC"},{n:"JSON",v:"JSON"},{n:"PARQ",v:"PARQUET",visible:false}],sourceInfoDesc:{json:"DB_FILE_TYPE_JSON"},sourceType:{file:1,salesforce:2,dropbox:3,googleDrive:4,googleAnalytics:5,googleBigQuery:6,querybuilder:7,mstrFile:8,mdx:9,hadoop:10,twitter:11,facebook:12,bisource:13,remoteProject:14,importfromcube:15,dataFromPushApi:16,newConnector:17,cloudElement:18},sourceSubtype:{localFile:1,url:2,salesforce:3,dropbox:4,googleDrive:5,googleAnalytics:6,googleBigQuery:7,querybuilder:8,samplefile:9,clipboard:10,googleBigQueryFFSQL:11,searchOnSource:12,mdx:13,hadoop:14,twitter:15,facebook:16,bisource:17,remoteProject:18,googleBigQuerySingleTable:19,hanaSingleTable:20,publicData:21,importfromcube:22,dataFromPushApi:23,cloudElement:24,},backendSourceSubtype:{localFile:65537,url:65539,samplefile:65540,clipboard:65538,newConnector:65544,cloudElement:65552,hadoopFileBrowser:65541,customSQL:131073,customSQLWizard:131074,singleTable:131075,bISources:131076,searchAsASource:131078,salesforce:196609,dropbox:196610,facebook:196611,twitter:196612,googleDrive:196613,googleAnalytics:196614,googleBigQuery:196615,googleBigQueryFFSQLModel:196616,googleBigQuerySingleTable:196617,OLAPSources:327681,publicData:65542,dataFromPushApi:65543,dataFromPushApiV2:65545,cloudElement:65552,},sourceItemType:{file:0,url:1,database:2,hadoop:3,olap:4,publicData:5,salesforce:6,googleAnalytics:7,googleBigQuery:8,googleDrive:9,dropbox:10,searchAsASource:11,clipboard:12,bISources:13,facebook:14,twitter:15,samplefile:16,importFromCube:17,addNewConnector:18,newConnector:19,cloudElement:20,unknow:-1},columnState:{reserved:0,unchanged:1,newColumn:2,missing:4,changed:8},operationMode:{create:0,edit:1,refresh:2,subscribe:3,enterCredentials:4,oauth:5,pickTable:6,hadoopPickTable:7,ffsql:8,hadoopFFsql:9},statusCode:{obtainSource:-2147071874,xformsError:-2147071872,mappingError:-2147071871,edit:1,republish:2,schedule:3,enterCredentials:4,pickTable:5,hadoopPickTable:6,ffsql:7,hadoopFFsql:8},pageType:{intro:0,file:1,database:2,emmaPreview:3,redirect:4,analytics:5,dataSelection:6,suggestNewSource:7,sourceIntro:8,sourceObjects:10,sampleFiles:11,dataset:12,externalPage:13,preview:14,clipboard:15,refine:16,parse:17,mstrFile:18,allProjectSource:19,hadoop:20,twitter:21,facebook:22,sourceObjectsDnD:23,schedule:24,publicData:25,republish:26,sourceAdmin:27,importFromCube:28,addNewConnector:29,newConnector:30,addConnectorList:31,cloudElement:32},backendError:{overwriteObject:-2147212339,noPermission:-2147214579,invalidObjectName:-2147213715,unexpectedDataType:-2147212539,noExternalSession:-2147071844,noPrivilege:-2147212082,salesforceUnsavedReport:-2147212081,salesforceObsoleteReport:-2147212080,maxSizeExceeded:-2147212076,maxSizeExceededURL:-2147212121,salesforceUnresolvedFilter:-2147212074,incrementalRefresh:-2147212287,invalidUrl:-2147212062,fileVersionError:-2147212064,emptySheet:-2147212144,refreshTokenUnavailable:-2147202875,cubeQuotaExceeded:-2147071825,notEnoughSpace:-2147071811,importedURLInvalid:-2147212122,unsupportedFileFormat:-2147212063,objectNameTooLong:-2147217407,noExternalSourceInfo:-2147215346,memoryConsumptionExceeded:-2147215346,cubeQuotaReached:-2147071870,switchingFileType:-2147212140,memoryGovernSizeExceeded:-2147181051,stringTooLong:-2147213718,missingColumn:-2147071871,dataDiscoveryError:-2147211998,refineApplyError:-2147202299,serverOutOfMemory:-2147212055,columnCountMatchError:-2147467259,incompatibleDataTypeError:-2147211983,reportTimeout:-2147212335,requestTimeout:-2147206497,databaseCredentialsNotAvailable:-2147212037,ddasupportIncompatible:-2147215326,mergeInvalidXdatype:-2147215325,notFullyControl:-2147214579,shouldBeIgnored:-2147212123,CECredentialNotAvailable:-2147215317,AuthenticationError:-2147215346,queryEngineGeneralError:-2147212544},transformation:{xtab:1,delimiter:2},application:{platform:"Platform",cloudPersonal:"Personal",cloudProfessional:"Professional"},refreshOptions:{replace:1,append:2,update:4},cubeRefreshType:{dummy:-1,reserved:0,add:1,remove:2,update:3,upsert:4,addNewTable:5,deleteTable:6,replaceTable:7,preserve:8},tableStatsExecutionAction:{reserved:0,forceExecution:1,ignore:4,requireFreshData:268435456},sourcesInfoFlags:{none:0,getReports:1,getUserName:2,getTokensInfo:4,revokeSession:8,getGAnalyticsAccount:64},queryBuilderType:{individualTable:1,multipleTables:2,queryScript:3},relationshipEditType:{create:1,changeERType:2,remove:3,flip:8001},ERType:{reserved:0,ERType11:1,ERType1M:2,ERTypeM1:3,ERTypeMM:4,ERTypeParallel:5,ERTypePerpendicular:6},RSType:{reserved:0,auto:1,geo:2,defined:3},tableStates:{newly:1,old:2},behaviorChangeFlag:{multiSheet:4,remapping:8,refreshData:16},menuItems:{SEPARATOR:-1,NONE:0,TABLE_RENAME:1,DO_NOT_IMPORT:2,FLIP_ORDER:3,DELETE:4,RELATIONSHIP_TYPE:5,ONE_TO_ONE:6,ONE_TO_MANY:7,MANY_TO_ONE:8,MANY_TO_MANY:9,REMOVE:10,REFRESH_DATA:11,REFINE:12,CANCEL_REFINE:13,UNLINK:14,CHANGE_DATA_TYPE:15,MARK_GEO_ROLES:16,CREATE_TIME_ATTRIBUTES:17,TO_METRIC:18,TO_ATTRIBUTE:19,MAP_TO_PROJECT_ATTRIBUTE:20,UNMAP:21,MODIFY_ATTRIBUTE_GROUP:22,CREATE_ATTRIBUTE_GROUP:23,HIDE_ALL_ATTRIBUTE_FORMS:24,DEFINE_RELATIONSHIPS:25,LINK:26,ITEM_RENAME:27,CREATE_MULTIFORM_ATTRIBUTE:28,EDIT_MULTIFORM_ATTRIBUTE:29,ADDTO_MULTIFORM_ATTRIBUTE:30,SHOW_ALL_ATTRIBUTE_FORMS:31,SHOW_ALL_COLUMNS:32,PARTITION:33,REFINE_RENAME:34,REFINE_DELETE:35,REFINE_DELETE_ALL:36,REFINE_RESET:37,REFINE_RESET_ALL:38,PARSE:39,IMPORT:40,UNLINK_ALL:41,CREATE_HIERARCHY_ATTRIBUTE:42,EDIT_HIERARCHY_ATTRIBUTE:43,RESET_HIERARCHY_ATTRIBUTE:44},dataTypeMenuItems:{DATE_TIME:"1",NUMBER:"2",TEXT:"3",URL:"5",EMAIL:"6",HTML_TAG:"7",DATE:"8",TIME:"9",SYMBOL:"10",BIG_DECIMAL:"11",PHONE_NUMBER:"12"},columnDataTypes:{reserved:0,integer:1,unsigned:2,numeric:3,decimal:4,real:5,dtdouble:6,dtfloat:7,dtchar:8,varChar:9,longVarChar:10,binary:11,varBin:12,longVarBin:13,date:14,dttime:15,timeStamp:16,nChar:17,nVarChar:18,nlong:22,bigDecimal:30,cellFormatData:31,utf8Char:33,int64:34},formsOptions:{CREATE_MULTIFORM_ATTRIBUTE:1,EDIT_MULTIFORM_ATTRIBUTE:2,ADDTO_MULTIFORM_ATTRIBUTE:3},hierarchyOptions:{CREATE_HIERARCHY_ATTRIBUTE:1,EDIT_HIERARCHY_ATTRIBUTE:2,RESET_HIERARCHY_ATTRIBUTE:3},rdcsFlag:{ID:1,JOIN_ID:2,FILTER_ID:3,DISTANCE:4},timeRoles:{NONE:0,DATE:1,DATE_TIME:2,TIME:3,SECOND:4,MINUTE:5,HOUR:6,DAY:7,WEEK:8,MONTH:9,QUARTER:10,YEAR:11},contextMenuType:{ITEM_MENU:0,TABLE_MENU:1,PREVIEW_ITEM_MENU:2,LINK_MENU:3},dialogType:{fixRefreshErrorDialog:1,allObjectsViewDialog:2,missingColumnsDialog:3,diPageDialog:4,refreshHistoryDialog:5,alternateSourceValidateDialog:6,ddaConfirmDialog:7,publishStatusDialog:8,saveAsDialog:9,cubesList:10,refinePage:11,multiFormEditor:12,sheetsSelectionDialog:13,partitionGroupDialog:14,parseDataDialog:15,errorDialog:16,warningDialog:17,relationDefineDialog:18,qbImportOptionDialog:19,previewRenameDialog:20,mapProjectsAttributeDialog:21,setOAuthParaDialog:22,objectPicker:23,refineClusteringPage:24,refineExtractDialog:25,refineImportDialog:26,twitterAdvOptDialog:27,credentialsDialog:28,mapProjectsAttributeDialog2:29,setWhiteListDialog:30,binaryUploadDialog:31,authenticationDialog:32,sharingDialog:33,hadoopGatewayManagerDialog:34,hadoopGatewayDialog:35,addConnectorDialog:36,hierarchyAttributeDialog:37,hierarchyAttributeResetDialog:38},dataEvents:{DATA_PREVIEW_EVENT:"dataReturned",NO_DATA_RETURNED_EVENT:"noDataReturned"},cubeSchedStatus:{unexecuted:1,successful:2,unscheduled:3,failed:4},privilegeType:{accessDatabase:1,accessFile:2,accessCloud:3},dbType:{MS_ACCESS:100,ORACLE:200,SQL_SERVER:300,INFORMIX:400,SYBASE:500,REDBRICK:600,DB2:700,TANDEM:800,TERADATA:900,UNKNOWN:1000,GENERIC:1100,SAP:1200,NETEZZA:1300,EXCEL:1400,MSFT_AS:1500,ESSBASE:1600,MYSQL:1700,POSTGRESQL:1800,HPNEOVIEW:1900,METAMATRIX:2000,DATALLEGRO:2100,COMPOSITE:2200,ASTER:2300,VERTICA:2400,OPENACCESS:2500,SYBASE_SQL_ANY:2600,SYBASE_IQ:2700,PARACCEL:2800,TM1:2900,XQUERY:3000,HIVE:3100,SAND:3200,SALESFORCE:3300,HIVETHRIFT:3400,VECTORWISE:3500,ENTERPRISEDB:3600,KOGNITIOWX2:3700,EXASOLUTION:3800,INFORMATICA:3900,SAPHANA:4000,IMPALA:4100,AMAZON_REDSHIFT:4200,DENODO:4300,GOOGLE_DRIVE:4400,DROPBOX:4500,GOOGLE_ANALYTICS:4600,GOOGLE_BIGQUERY:4700,CONNECTION_CLOUD:4800,GOOGLE_BIG_QUERY_FFSQL_MODEL:4900,PARSTREAM:5100,MONGODB:5200,MARKLOGIC:5300,BIG_DATA_ENGINE:5400,SEARCH_ENGINE_SOLR:5500,SPLUNK:5600,TWITTER:5700,FACEBOOK:5800,PIG:6400,URL:7700,newConnector:7900,LOACLFILE:8200},getCubeQuotaAndInfosOptions:{GetCubeQuotaAndInfosReserved:0,GetCubeQuotaAndInfosDefault:1,GetCubeQuotaAndInfosQuotaOnly:2,GetCubeQuotaAndInfosAll:3,GetCubeQuotaAndInfosVI:4},homepageViewMode:{GRID_VIEW:0,LIST_VIEW:1},datasetServeMode:{inMemory:1,dda:2,unknow:3},cubePollStatus:{msgID:0,result:1,prompt:2,error:3,xmlResult:21},ibmDb2Versions:[17,18,21,22,23,24,25,37,45,46,47,48,63,66,74,89,92,101,103,105,123,134,157,172,202,232],hadoopDbTypes:[3100,1100,700,4100,7300,6800,6400,8100],formCategory:{longitude:"2345134F4F5E261C3BB902A874467080",latitude:"B191051C48221A6AE44CA2B65B1B65E3"},urlAuthDBRoles:{anonymous:"CB1CB472A07E41D5AE038232839F2064",windows:"95A5ACC02FE94CBABCB65E4F2D2415B2",kerberos:"317D6F016D784836A724AD4D739E1E9C",integrated:"E966E1A0A4C949108287B2E5086B68EB"},urlAuthDBMSId:"497F2406FA154B86810C71EA3D401D6D",newConnectorDBMSId:"565D5DC3A1124726B85FE53EF992472A",hadoopGateWay:{HGoS_CONFIG_HAS_EXIT:1510,CONNOT_AUTHENTICATE:1511,SPACE_OVER:1512,FAIL_COPY_TO_HOST:1513,INSUFFICIENT:1514,DIRECTORY_NO_EXIST:1515,HGOS_DEPLOYED:1518,HGOS_DEPLOYING:1519,CONNOT_AUTHENTICATE2:1520,HGOS_RUNNING:1521,HGOS_STOPPED:1522,HGOS_NOT_DEPLOYING:1523,HGOST_TAR_NOT_EXIST:1524,HGOS_CONF_NOT_EXIST:1530},workstation:{filerBreakLine:new RegExp("[\r\n]","g"),utils:{shouldShowTitleBar:function(){var A=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&(!!mstrApp.isPopup||!!A);},setNativeWindow:function(C,F){var B=1110,E=590,D=parseInt(C,10),A=parseInt(F,10);if(!window.FormWrapper||!window.FormWrapper.setWindowFrame){return ;}if(C.match(/%$/)&&F.match(/%$/)){window.FormWrapper.setWindowContentSize(1200,680);}else{D=D<B?B:D;A=A<E?E:A;window.FormWrapper.setWindowContentSize(D,A);}},lockResize:function(){if(!window.FormWrapper||!window.FormWrapper.lockResize){return ;}window.FormWrapper.lockResize();},unlockResize:function(){if(!window.FormWrapper||!window.FormWrapper.unlockResize){return ;}window.FormWrapper.unlockResize();}}},authMode:{ANONYMOUS:0,USERNAME:1,OAUTH:2},authModePrefix:{ANONYMOUS:"AuthMode=Anonymous;URL=",USERNAME:"AuthMode=Basic;URL=",OAUTH:"AuthMode=OAuth;URL="},sdkUrl:{MARKPLACE_URL:"https://community.microstrategy.com/s/gallery?tabset-89baf=202df",QUICK_START_URL:"https://lw.microstrategy.com/msdz/MSDL/GARelease_Current/docs/projects/DataConnectorSDK/Content/topics/Quick_Start_Guide.htm"},originalConnector:{elastic:"DE4A8E15405A36D80BF1E1A2BA6F9B66",tapClicks:"1E8ADD3975DA4609B8D00E6211ACAB6A"},googleAnalyticsUrl:{queryExplorer:"https://ga-dev-tools.appspot.com/query-explorer/"},weekDay:[{n:mstrmojo.desc(9380,"Monday"),v:0},{n:mstrmojo.desc(9381,"Tuesday"),v:1},{n:mstrmojo.desc(9382,"Wednesday"),v:2},{n:mstrmojo.desc(9383,"Thursday"),v:3},{n:mstrmojo.desc(9384,"Friday"),v:4},{n:mstrmojo.desc(9385,"Saturday"),v:5},{n:mstrmojo.desc(9379,"Sunday"),v:6}],dateMon:[{n:mstrmojo.desc(15106,"1st day"),v:"1"},{n:mstrmojo.desc(15107,"15th day"),v:"15"}],timeOfDay:[{n:"12:00AM",v:"12:00AM"},{n:"1:00AM",v:"1:00AM"},{n:"2:00AM",v:"2:00AM"},{n:"3:00AM",v:"3:00AM"},{n:"4:00AM",v:"4:00AM"},{n:"5:00AM",v:"5:00AM"},{n:"6:00AM",v:"6:00AM"},{n:"7:00AM",v:"7:00AM"},{n:"8:00AM",v:"8:00AM"},{n:"9:00AM",v:"9:00AM"},{n:"10:00AM",v:"10:00AM"},{n:"11:00AM",v:"11:00AM"},{n:"12:00PM",v:"12:00PM"},{n:"1:00PM",v:"1:00PM"},{n:"2:00PM",v:"2:00PM"},{n:"3:00PM",v:"3:00PM"},{n:"4:00PM",v:"4:00PM"},{n:"5:00PM",v:"5:00PM"},{n:"6:00PM",v:"6:00PM"},{n:"7:00PM",v:"7:00PM"},{n:"8:00PM",v:"8:00PM"},{n:"9:00PM",v:"9:00PM"},{n:"10:00PM",v:"10:00PM"},{n:"11:00PM",v:"11:00PM"}],schedule:{DAILY:"Daily",WEEKDAY:"Weekday",WEEKLY:"Weekly",MONTHLY:"Monthly"},mainPage:{GRID_MODE:0,LIST_MODE:1},sourceIconClsName:{0:"ds-Generic",1:"ds-DB2",2:"ds-DB2",3:"ds-DB2",4:"ds-InformixWire",5:"ds-InformixXPS",6:"ds-PostgreSQL",7:"ds-SAP",8:"ds-SAP",9:"ds-Oracle",10:"ds-MicroSoft",11:"ds-Teradata",12:"ds-MySQL",13:"ds-GreenPlum",14:"ds-Netezza",15:"ds-WebServices",17:"ds-Infobright",18:"ds-Salesforce",19:"ds-MicroSoft",20:"ds-Actian-n",21:"ds-Amazon-Redshift",22:"ds-Impala",23:"ds-Aster",25:"ds-Actian-n",26:"ds-EnterpriseDB",27:"ds-Vertica",28:"ds-Denodo",29:"ds-CiscoDataVirtualization",31:"ds-MicroSoft",32:"ds-GoogleBigQuery",33:"ds-SAP",35:"ds-IBMBigInsights",39:"ds-TM1",41:"ds-WebServices",43:"ds-Amazon-EMR",44:"ds-Apache-Hive",45:"ds-ClouderaHive",46:"ds-HortonworksHive",47:"ds-MapRHive",48:"ds-apache",49:"ds-SharkSpark",50:"ds-MongoDB",52:"ds-MariaDB",51:"ds-MarkLogic",54:"ds-Splunk",55:"ds-DataDirectCloud",56:"ds-ParStream",58:"ds-Phoenix",59:"ds-MicroSoft",60:"ds-DB2",61:"ds-Oracle",62:"ds-Teradata",63:"ds-SAP",65:"ds-PostgreSQL",66:"ds-MySQL",67:"ds-MariaDB",68:"ds-Amazon-EMR",69:"ds-Apache-Hive",70:"ds-ClouderaHive",71:"ds-HortonworksHive",72:"ds-MapRHive",73:"ds-SharkSpark",75:"ds-Amazon-Redshift",76:"ds-PIVOTALHAWQ",77:"ds-MemSQL",78:"ds-Arcadia-Platform",79:"ds-Altibase",80:"ds-MongoDB",81:"ds-Presto",82:"ds-DB2",83:"ds-DB2",84:"ds-InformixWire",85:"ds-SAP",86:"ds-MicroSoft",87:"ds-MicroSoft",88:"ds-MemSQL",90:"ds-GreenPlum",91:"ds-PIVOTALHAWQ",92:"ds-Netezza",93:"ds-Infobright",94:"ds-Actian-n",95:"ds-Impala",96:"ds-IBMBigInsights",97:"ds-Aster",99:"ds-Actian-n",100:"ds-EnterpriseDB",101:"ds-Vertica",102:"ds-Denodo",103:"ds-CiscoDataVirtualization",105:"ds-DataDirectCloud",106:"ds-ParStream",107:"ds-Arcadia-Platform",109:"ds-Presto",110:"ds-Phoenix",111:"ds-Kognitio",112:"ds-Kognitio",113:"ds-Informatica",114:"ds-Informatica",115:"ds-Apache-Cassandra-JDBC",116:"ds-SAP",117:"ds-Actian",118:"ds-Actian",119:"ds-InformixXPS",120:"ds-Apache-Cassandra-JDBC",121:"ds-MapRDrill",122:"ds-Cirro",123:"ds-EXASolution",124:"ds-EXASolution",125:"ds-Oracle",126:"ds-Oracle",127:"ds-Snowflake",128:"ds-Snowflake",129:"ds-Amazon-Aurora",130:"ds-Amazon-Aurora",131:"ds-Amazon-Athena",132:"ds-Amazon-Athena",133:"ds-MapRDrill",134:"ds-Druid",135:"ds-Druid",139:"ds-MongoBI",157:"ds-GoogleBigQuery",161:"ds-MapD",168:"ds-HortonworksSpark",169:"ds-HortonworksSpark",170:"ds-Yellowbrick",},dispTag:{1:"Database",2:"OLAP",4:"BigData",8:"Database",16:"BigData",32:"BigData"},searchTags:{100:["Database","ODBC"],200:["Database","ODBC"],300:["Database","ODBC"],400:["Database","ODBC"],500:["Database","ODBC"],600:["Database","ODBC"],700:["Database","ODBC"],900:["Database","ODBC"],1100:["Database","ODBC"],1200:["OLAP","Cube"],1300:["Database","ODBC"],1400:["Database"],1500:["OLAP","Cube"],1600:["OLAP","Cube"],1700:["Database","ODBC"],1800:["Database","ODBC"],2200:["Database","ODBC"],2300:["Database","ODBC"],2400:["Database","ODBC"],2800:["Database","ODBC"],2900:["OLAP","Cube"],3000:["Database"],3100:["Database","BigData","Hadoop"],3300:["Cloud"],3500:["Database","ODBC"],3600:["Database","ODBC","BigData"],3800:["Database"],3900:["Database"],4000:["Database","ODBC"],4100:["Database","BigData","Hadoop"],4200:["Database","ODBC"],4300:["Database","ODBC"],4700:["Database","Cloud","BigData"],4800:["Cloud"],5200:["Database","NoSQL"],5300:["Database","NoSQL"],5400:["Hadoop"],6400:["Database","BigData","Hadoop"],6600:["Database"],6700:["Database"],6800:["BigData"],6900:["BigData"],7100:["NoSQL"],7200:["Database"],7300:["BigData","Hadoop"],7500:["Database"],7600:["Database"],8000:["Database"],8100:["BigData"],},srcItemTypes:{ALL_SOURCES:"ALL_SOURCES",STATIC_SOURCE:"STATIC_SOURCE",DBTYPE_SOURCE:"DBTYPE_SOURCE",CUSTOM_CONNECTOR:"CUSTOM_CONNECTOR",CLOUDELEMENT_CONNECTOR:"CLOUDELEMENT_CONNECTOR"},combination:{BigData:["BigData","NoSQL","Search","Hadoop"],Apps:["Apps","oAuth","Cloud","Social","BI","PublicData","CE"]},GenericDBStr:"Generic",dataSourceType:{MONGODB:"mongodb",FILE_URL:"fileUrl",FILE_LOCAL:"fileLocal",ES:"elasticsearch",DROPBOX:"dropbox",GOOGLE_DRIVE:"googleDrive",GOOGLE_ANALYTICS:"googleAnalytics",GOOGLE_BIGQUERY:"googleBigQuery",SALESFORCE:"salesforce",FILE:"file",GENERIC_JDBC:"genericJdbc"},ERDF:{ENUM_LOAD_REPORT_BROWSE_TYPE_BINDINGTABLE:1,ENUM_LOAD_REPORT_BROWSE_TYPE_DATAPREVIEW:4,ENUM_LOAD_REPORT_BINDING_FLAG_ALL:15,ENUM_LOAD_REPORT_PREVIEW_FLAG_MappingInfo:1,ENUM_LOAD_REPORT_PREVIEW_FLAG_DataInfo:2,ENUM_LOAD_REPORT_PREVIEW_FLAG_SourceInfo:4,ENUM_LOAD_REPORT_PREVIEW_FLAG_InnerDataInfo:2048,},DSSSubType:{DSSSUBTYPEATTRIBUTE:3072,DSSSUBTYPEATTRIBUTEROLE:3073,DSSSUBTYPEATTRIBUTETRANSFORMATION:3074,DSSSUBTYPEATTRIBUTEABSTRACT:3075,DSSSUBTYPEATTRIBUTERECURSIVE:3076},DSSExType:{DSSEXDISPARK:416},URLMode:{NormalUrl:0,NewConnector:1,NewConnectorEdit:2,CloudElement:3},disableFeatures:{DISABLE_CUSTOM_CONNECTOR:"disableCustomerConnector",DISABLE_DDA:"disableDDA",DISABLE_QUOTA:"disableQuota",DISABLE_HADOOP:"disableHadoop",DISABLE_BI_TOOLS:"disableBITools",DISABLE_CLIP_BOARD:"disableClipboard",DISABLE_FACE_BOOK:"disableFacebook",DISABLE_TWITTER:"disableTwitter",DISABLE_SAMPLE_FILES:"disableSampleFiles",DISABLE_PUBLIC_DATA:"disablePublicData",DISABLE_MERGE_CUBE:"disableMergeCube",DISABLE_CE_SOURCE:"disableCESource",DISABLE_FLATTERN_DB_SOURCE:"disabledSources"},DssXmlPrivileges:{DssXmlPrivilegesUseDatabaseInstanceManager:57},Enum_SourceCategoryType:{File:1,BigData:2,Database:3,OLAP:4,Customized:5,Apps:6,}});}());(function(){mstrmojo._CanRenderChildrenOnShow=mstrmojo.provide("mstrmojo._CanRenderChildrenOnShow",{_subs_renderOnShow:null,childRenderCheck:function B(D){if(this.renderMode!=="onshow"){return this._super(D);}if(D.visible){return this._super(D);}var C=this._subs_renderOnShow;if(!C){C={};this._subs_renderOnShow=C;}if(!C[D.id]){C[D.id]=D.attachEventListener("visibleChange",this.id,"_on_child_visibleChange");}return false;},_on_child_visibleChange:function A(C){if(this.hasRendered){var E=C&&C.src;if(E&&this.childRenderCheck(E)){var D=this._subs_renderOnShow;if(D){E.detachEventListener(D[E.id]);delete D[E.id];}E.render();}}}});}());(function(){mstrmojo.vi.ui.theme=mstrmojo.provide("mstrmojo.vi.ui.theme",{getThemeClass:function A(){var D=this.parent||this.opener,C="",B;while(D){var E=D.themeClassName;if(E){C=E;break;}B=D.parent||D.opener;if(B===D){break;}D=B;}return C;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var B=mstrmojo.array;function A(C){if(C.parent){if(C.parent.shouldEllipsizeChildren===undefined){mstrmojo.mixin(mstrmojo._HasEllipsis,C.parent);}C.parent.set("shouldEllipsizeChildren",true);}}mstrmojo._HasEllipsis=mstrmojo.provide("mstrmojo._HasEllipsis",{shouldEllipsize:false,shouldEllipsizeChildren:false,doEllipsize:function(){if(this.shouldEllipsizeChildren){B.forEach(this.children,function(D,C){if(D.hasRendered&&D.doEllipsize){D.doEllipsize();}});}},onshouldEllipsizeChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsize,this.shouldEllipsizeChildren);},onshouldEllipsizeChildrenChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsizeChildren,this.shouldEllipsize);},_onEllipsizeFlagChange:function(D,C){if(D&&!C){A(this);this.markupMethods=mstrmojo.mixin({onvisibleChange:function(){if(this._super){this._super();}if(this.visible&&this.hasRendered){this.doEllipsize();}}},mstrmojo.hash.copy(this.markupMethods));}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",O="mousemove",Q="mouseup";function G(X){if(E.isPrimaryMouseBtn(X)){B.startDragCheck(self,X);}}var U,P,A="mstrmojo-dnd-avatar",T;function F(Y,X){if(X!==undefined&&X!==null){P.innerHTML=X;}T.left=Y.x+"px";T.top=Y.y+"px";}function L(Y,X){if(!U){U=I.createElement("div");T=U.style;U.className=A;U.innerHTML='<div class="'+A+'-inner"></div>';P=U.firstChild;I.body.appendChild(U);}F(Y,X);T.display="block";}function R(){if(T){T.display="none";}}function H(X){var Y=++B.ctxt.moveCount;if(Y>=B.minMoves){B.stopDragCheck();if((X.buttons===1||X.buttons===undefined||E.isIE9)&&(X.which===1||X.button===0||E.isIE8)){B.startDrag(self,X);}}}function N(X){if(E.isPrimaryMouseBtn(X)){B.stopDragCheck();delete B.ctxt;}}function D(X){B.onDragMove(self,X);}function C(X){if(E.isPrimaryMouseBtn(X)){B.stopDrag(window,X);}}function J(Y){var X=E.findWidget(Y);while(X){if(X.draggable){return X;}X=X.parent;}return null;}function S(X){var Z=X.src,Y=J(Z.node);if(!Y){return null;}if(Y.getDragAction){X.action=Y.getDragAction(X);}Z.widget=Y;Z.data=Y.getDragData&&Y.getDragData(X);if(Y.isDragValid){if(!Y.isDragValid(X)){if(!mstrApp.isInVFInteractMode&&(!Y.shouldDragBubble||Y.shouldDragBubble(X)===true)){X.src.node=Y.domNode.parentNode;return S(X);}return null;}}if(Y.ondragstart){Y.ondragstart(X);}return Y;}function W(Z,Y){var X=E.findWidget(Z),a=Y.tgt&&Y.tgt.widget;while(X){if(X.dropZone){if(X===a){return X;}if(X.allowDrop&&X.allowDrop(Y)){return X;}}X=X.parent;}return null;}function V(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(X,Y){delete this.ctxt;var Z=E.captureEventInfo({hWin:X,e:Y});this.ctxt={src:Z,moveCount:0,last:M.copy(Z.pos),getDirection:function(a){return !!this.dir[a];},getCtxtDragData:function(){var a=this.src;return(a&&a.data)||{};},getCtxtDropData:function(){var a=this.tgt;return(a&&a.data)||{};}};if(this.minMoves){E.attachEvent(I,O,H);E.attachEvent(I,Q,N);}else{this.startDrag(X,Y);}},stopDragCheck:function(){E.detachEvent(I,O,H);E.detachEvent(I,Q,N);},startDrag:function(X,a){var Y=this.ctxt;Y.id=mstrmojo.now();var Z=S(Y);if(!Z){return ;}E.clearBrowserHighlights(X);E.preventDefault(self,a);E.attachEvent(I,O,D);E.attachEvent(I,Q,C);var c=window.mstrApp;if(c&&c.setInteractive){this._changeAppStatus=c.setInteractive(false);}if(!Z.ownAvatar){var b=Y.src;L(b.pos,b.data&&b.data.html);}},stopDrag:function(X,d){E.detachEvent(I,O,D);E.detachEvent(I,Q,C);var a=this.ctxt,Z=a.tgt||{},Y=E.captureEventInfo({hWin:X,e:d,data:Z.data}),c=W(Y.node,a);Y.widget=c;a.tgt=Y;if(c){if(c.ondrop){c.ondrop(a);}else{V.call(c);}}var b=a.src.widget;if(b&&b.ondragend){b.ondragend(a);}if(b&&!b.ownAvatar){R();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(b,d){if(E.isSafari){E.clearBrowserHighlights();}var X=this.ctxt,a=X.tgt||{},Y=a.widget,c=E.captureEventInfo({hWin:b,e:d,data:a.data}),h=c.widget=W(c.node,X),g=X.last,Z=c.pos;X.dir={x:Z.x>g.x,y:Z.y>g.y};X.last=M.copy(c.pos);X.tgt=c;if(Y!==h){if(Y){if(Y.ondragleave){Y.ondragleave(X);}else{V.call(Y);}}if(h){X.tgt.data=(h.getDropData&&h.getDropData(X))||{};if(h.ondragenter){h.ondragenter(X);}else{if(h.set){h.set("allowingDrop",true);}}}}if(h){if(h.ondragover){h.ondragover(X);}}var f=X.src.widget;if(f&&f.ondragmove){f.ondragmove(X);}if(f&&!f.ownAvatar){F(c.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.func");mstrmojo.ACL.UserDataService=mstrmojo.provide("mstrmojo.ACL.UserDataService",{topgroups:null,userCandidates:null,getMembers:function(G,E){var F={taskId:"getUserEntityInfo",blockBegin:G.blockBegin,blockCount:G.blockCount,userEntityID:G.data.did,userEntityName:G.data.n||"",incremental:true,outputElements:G.outputElements||3};mstrmojo.xhr.request("POST",mstrConfig.taskURL,E,F);},getTopLevelGroups:function D(G,F){var E=this;if(this.topgroups){F.success({items:this.topgroups});return ;}F.success=mstrmojo.func.composite([F.success,function(H){E.topgroups=H.items;}]);this.getUsers({topGroupsOnly:true},F);},searchUserCandidates:function C(F,I,G,E){var H={blockBegin:1,blockCount:G,searchPattern:F,nameWildcards:I?4:2};this.getUsers(H,E);},getUserCandidates:function B(H,G){if(this.userCandidates){G.success(this.userCandidates);return ;}var E=G.success,F=this;G.success=function(J){F.userCandidates={items:J.items,isComplete:(parseInt(J.bc,10)===-1||(J.bb+J.bc>J.sz))};E(F.userCandidates);};var I={blockBegin:1,blockCount:H,nameWildcards:1};this.getUsers(I,G);},getUsers:function A(G,E){var F={taskId:"getUserServices"};mstrmojo.hash.copy(G,F);mstrmojo.xhr.request("POST",mstrConfig.taskURL,E,F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ListSelector");var A=mstrmojo.dom;mstrmojo.TreeBrowserSelector=mstrmojo.provide("mstrmojo.TreeBrowserSelector",mstrmojo.hash.copy({premousedown:function B(F,I,E){if(A.isPrimaryMouseBtn(E.e)){var D=E.hWin,H=E.e,G=A.eventTarget(D,H),C=F.listMapper.findIndex(F,I,G);if(C>-1){F.toggleSelect(C);}}}},mstrmojo.hash.copy(mstrmojo.ListSelector)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var d=mstrmojo.css,J=mstrmojo.dom,R=mstrmojo.array,N={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},b="scrollingMode",U="scrolling",g=3;var O=J.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function M(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function V(l,i){var k=this.scrollNode,h=M.call(this),j={v:l,h:i};R.forEach(["v","h"],function(n){var m=N[n];d.toggleClass(h,m.hostCls,j[n]);d.toggleClass(k,m.scrollNodeCls,j[n]);});}function S(i,h){var n=J.eventTarget(h,i),l=this.scrollNode,k=J.position(l),m=this.scrollTrackNodes,j=this.scrollBarNodes,o=function o(w){var u=n===m[w];if(u){var x=N[w],p=j[w],y=J.position(p),r=J.getMousePosition(i,h)[x.position],s=r-y[x.position],q=s>0?1:-1,v=l[x.scrollDimension],z=Math.abs(s-(y.h/2))*(v/k[x.dimension]),t={};t[x.scroll]={isStyle:false,start:l[x.scroll],stop:l[x.scroll]+(q*Math.min(v/3,500,z)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:t,duration:200,interval:10,target:l})).play();}};o.call(this,"h");o.call(this,"v");}function C(i,h){var l=this.scrollNode,k=i.type==="mousewheel",j=k?-1:1;mstrmojo.array.forEach(["h","v"],function(s){var q=N[s],n=k?"wheelDelta":"delta",p=i[n+{h:"X",v:"Y"}[s]]*j,o=Math.abs(p),m=p/o,r=o===3&&J.isFF&&!O;l[q.scroll]+=r?m*40:p;});J.stopPropogation(h,i);J.preventDefault(h,i);}function f(m){var l=N[m],k=this.scrollNode,j=J.position(k),i=j[l.dimension],n=k[l.scrollDimension],h=Math.ceil(i)/n;return A(h,i,n);}function A(i,h,j){return(!isNaN(i)&&i<1)&&(Math.abs(h-j)>g);}function D(AF){var y="px",r=N[AF],l=this.scrollNode,s=M.call(this),AH=J.position(l),t=AH[r.dimension],AA=l[r.scrollDimension],k=Math.ceil(t)/AA,AE=this.scrollBarNodes,p=AE[AF],w=this.scrollTrackNodes,x=w[AF],AC=A(k,t,AA),m=r.cls;if(!p){x=w[AF]=document.createElement("div");var n=this,v=function(AJ){S.call(n,AJ);},q=function(AJ){C.call(n,AJ);},AB=function(AL,AJ,AK){J.attachEvent(AL,AJ,AK);n.installedEventListeners.push({e:AL,evt:AJ,fn:AK});};AB(x,"click",v);x.className="mstrmojo-scrolltrack "+m;p=AE[AF]=document.createElement("div");p.className="mstrmojo-scrollbar "+m;x.appendChild(p);s.appendChild(x);var AD=mstrApp.isSingleTier?"mousewheel":"wheel";AB(x,AD,q);AB(p,AD,q);}var AI=p.style,o=(l[r.scroll]/l[r.scrollDimension]),i=J.delta(l,M.call(this))[r.position],z=x.style;if(AC){z[r.styleDir]=i+y;var j=k*t,u=35,AG=t*o,h=t-35;AI[r.styleDim]=(j<u?u:j)+y;AI[r.styleDir]=(AG>h?h:AG)+y;}return AC;}function I(){return !(mstrApp.isSingleTier&&O);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function X(h){this._super(h);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=I();}this.installedEventListeners=[];},onRender:function L(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function G(){var i=this.scrollNode,j=J.isFF&&!O;if(i){var h=J.attachMarkupEvent(this.id,i,"scroll");this.installedEventListeners.push({e:i,evt:"scroll",fn:h});}if(j){d.addClass(i,"firefox-on-windows");}else{if(J.isEdge){d.addClass(i,"ms-edge");}}if(!this.hasCustomScrollbar){d.addClass(M.call(this),"mstrmojo-sb-host-show-default");d.addClass(i,"mstrmojo-sb-show-default");return ;}if(i){d.addClass(M.call(this),"mstrmojo-scrollbar-host");d.addClass(i,"mstrmojo-scrollNode");}},updateScrollbars:function e(){if(!this.hasRendered){return ;}this.setupScrollNodes();var h,j=false;if(!this.hasCustomScrollbar){if(this.scrollNode){h=this.scrollNode.style;h.overflowY=f.call(this,"v")?"scroll":"hidden";h.overflowX=f.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};V.call(this,j,j);h=this.scrollNode.style;var k=D.call(this,"v"),i=D.call(this,"h");h.overflowY=k?"scroll":"hidden";h.overflowX=i?"scroll":"hidden";V.call(this,k,i);}},onscroll:function a(){var o=this.scrollNode;if(o&&this.hasCustomScrollbar){var l=function l(p){var q=parseInt(p);return q===null||isNaN(q)?0:q;},m=J.position(o),n=m.h-l(d.getStyleValue(o,"padding-bottom")),i=m.w-l(d.getStyleValue(o,"padding-right")),k=this.scrollBarNodes,j=k.v,h=k.h;if(o.scrollHeight-n>0){j.style.top=((n-J.position(j).h)*(o.scrollTop/(o.scrollHeight-n)))+"px";}if(o.scrollWidth-i>0){h.style.left=((i-J.position(h).w)*(o.scrollLeft/(o.scrollWidth-i)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function F(i){var l=this.scrollNode,k=J.position(l),j=i.src.node,h=this.scrollBarNodes;if(this.isDraggingScrollBar(i)){return{isScrollBar:true,direction:j===h.v?"v":"h",scrollTop:l.scrollTop,scrollLeft:l.scrollLeft,conversionRatio:{y:l.scrollHeight/k.h,x:l.scrollWidth/k.w}};}return(this._super&&this._super(i));},isDragValid:function E(h){return this.isDraggingScrollBar(h)||(this._super&&this._super(h))||false;},isDraggingScrollBar:function W(i){var j=i.src.node,h=this.scrollBarNodes;return !!h&&(j===h.v||j===h.h);},ondragstart:function c(h){if(this.isDraggingScrollBar(h)){d.addClass(h.src.node,U);d.addClass(M.call(this),b);}if(this._super){this._super(h);}},shouldDragBubble:function T(h){var i=h.src.node,j=this.scrollTrackNodes;return !(!!j&&(i===j.v||i===j.h));},ondragmove:function Q(i){if(this.isDraggingScrollBar(i)){var q=i.tgt,h=i.src,r=q.pos,j=h.pos,n=h.node,m=this.scrollNode,p=this.scrollBarNodes,o=h.data,l={y:(r.y-j.y),x:(r.x-j.x)},k=o.conversionRatio;if(n===p.v){m.scrollTop=o.scrollTop+(l.y*k.y);}else{m.scrollLeft=o.scrollLeft+(l.x*k.x);}}if(this._super){this._super(i);}},ondragend:function K(h){if(this.isDraggingScrollBar&&this.isDraggingScrollBar(h)){d.toggleClass(h.src.node,U,false);d.toggleClass(M.call(this),b,false);}if(this._super){this._super(h);}},widgetResized:function P(){if(this._super){this._super();}this.updateScrollbars();},unrender:function Y(h){R.forEach(this.installedEventListeners,function(i){J.detachEvent(i.e,i.evt,i.fn);});this.installedEventListeners=[];delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(h);},getDefaultScrollBarProps:function Z(h){return N[h];},disableScroll:function B(h,k){var j=this.scrollNode,i=M.call(this);R.forEach(["v","h"],function(m){var l=N[m];d.toggleClass(i,l.hostCls,false);d.toggleClass(j,l.scrollNodeCls,false);});if(j){if(k||k===undefined){j.style.overflowY="hidden";}else{if(j.style.overflowY==="hidden"){j.style.overflowY="auto";}}if(h||h===undefined){j.style.overflowX="hidden";}}},enableScroll:function H(){this.updateScrollbars();if(!this.hasCustomScrollbar&&this.scrollNode){this.scrollNode.style.overflowY=f.call(this,"v")?"scroll":"hidden";}},scrollIntoViewIfNeeded:function(k){var p=this.scrollNode,m=k.clientHeight,l=p.clientHeight,i=J.position(k).y,n=J.position(p).y,j=i-n,h=j<0,o=j+m>l;if(h||o){p.scrollTop+=j+m/2-l/2;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},n=function m(k,j){for(var o=k;o<j;o++){Y[W++]=l;var p=b.build(h,d,e[o],o);if(V[o]){p=p.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=p;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){n(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){n(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});mstrmojo.ui._HasUITheme.EnumThemeNames={LIGHT_THEME:"mojo-theme-light",DARK_THEME:"mojo-theme-dark"};}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var E=mstrmojo.dom,Q=mstrmojo.css,B=mstrmojo.string,I="selected",L="hidden";function P(V,W,X,U,Z){var Y=Z.listHooks[V];if(Y&&Y.call(Z,W,X,U)){return ;}Q.toggleClass(W,I,V==="select");}function G(X,W,V){var Y=this[X],U=Y?Y.split(W):[];this[X]=mstrmojo.array.distinct(U.concat(V.split(W))).join(W);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function N(U){this._super(U);this._shiftStartIndex=-1;},getItemMarkup:function D(V,U){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function M(U){return U.n||"";},getItemProps:function R(Y,U){var V=!!this.selectedIndices[U],Z={tag:"div",sel:V,cls:"",n:this.getItemDisplayName(Y),style:"",idx:U,addCls:function W(b){G.call(this,"cls"," ",b);},addStyle:function X(b){G.call(this,"style",";",b);},title:Y.title||""};if(Z.n&&B.isEmpty(Z.n)){Z.n=B.decodeHtmlString("<br/>");}if(V){Z.addCls(I);}var a=Y.cls;if(a){Z.addCls(a);}if(Y.hid){Z.addCls(L);}return Z;},itemRenderer:{render:function S(V,U,W){V._renderIdx=U;return mstrmojo.string.apply(W.getItemMarkup(V,U),W.getItemProps(V,U));},select:function K(V,W,U,X){P("select",V,W,U,X);},unselect:function H(V,W,U,X){P("unselect",V,W,U,X);}},onclick:function T(U){try{var W=this.getItemFromTarget(U.getTarget());if(W){U.cancel();this.doItemSelect(W,U||{});}}catch(V){mstrApp.onerror(V);}},doItemSelect:function C(j,i){var b=i.hWin,c=i.e,g=j._renderIdx,d=j._positionIdx,V=E.isMetaKey(b,c),a=E.shiftKey(b,c),W=this.multiSelect,Z=this.useListModKeys,h=this._shiftStartIndex,X=this.selectedIndices;if(W&&Z&&a&&h>-1){var U=[],Y=[];this.processContinuousSelection(U,Y,g);this.addSelect(U);this.removeSelect(Y);}else{if(W&&(!Z||V)){var f=(X[g])?"remove":"add";this[f+"Select"](g,false,d);}else{this.singleSelect(g,false,d);}this._shiftStartIndex=g;}},processContinuousSelection:function J(W,V,U){var b=this._shiftStartIndex,a=this.selectedIndices,Z=Math.min(b,U),Y=Math.max(b,U),X;for(X=0;X<this.items.length;X++){if(Z<=X&&X<=Y){if(!a[X]){W.push(X);}}else{if(a[X]){V.push(X);}}}},onclearSelection:function A(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function F(V){var U=E.findAncestorByAttr(V,"idx",true,this.domNode);return(U&&U.node)||null;},getItemFromTarget:function O(W){var V=this.getItemNodeFromTarget(W),U=V&&parseInt(V.getAttribute("idx"),10);if(U!==null&&!isNaN(U)&&this.items){return this.items[U];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=I;mstrmojo._IsList.HIDDEN_CLS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.Obj");var M=mstrmojo.DI.DIConstants,H=mstrmojo.array,D=M.dbType,F=M.xdaType,I=M.sourceType,K=M.backendSourceSubtype;mstrmojo.DI.DIDatabaseHelper=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIDatabaseHelper.getImportOptionByDBType=function A(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:case D.PIG:return false;default:return true;}};mstrmojo.DI.DIDatabaseHelper.getSourceTypeByDBType=function E(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:return F.mdx;case D.PIG:return F.ffsql;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType=function(N){switch(N){case D.MS_ACCESS:return 9149;case D.ORACLE:return 8545;case D.SQL_SERVER:return 8552;case D.INFORMIX:return 12995;case D.SYBASE:return 12998;case D.REDBRICK:return 10059;case D.DB2:return 8516;case D.TERADATA:return 8553;case D.SAP:return 13107;case D.NETEZZA:return 8558;case D.EXCEL:return 3958;case D.MSFT_AS:return 13225;case D.ESSBASE:return 13224;case D.MYSQL:return 8556;case D.POSTGRESQL:return 8541;case D.COMPOSITE:return 12991;case D.ASTER:return 10058;case D.VERTICA:return 10062;case D.PARACCEL:return 10056;case D.TM1:return 13223;case D.XQUERY:return 8560;case D.HIVE:return 8561;case D.SALESFORCE:return 9213;case D.SAPHANA:return 12997;case D.GOOGLE_BIGQUERY:return 12450;default:return 4444;}};mstrmojo.DI.DIDatabaseHelper.getOASTFromBEST=function L(N){switch(N){case K.googleBigQuery:case K.googleBigQueryFFSQLModel:case K.googleBigQuerySingleTable:return I.googleBigQuery;case K.dropbox:return I.dropbox;case K.googleAnalytics:return I.googleAnalytics;case K.googleDrive:return I.googleDrive;case K.facebook:return I.facebook;case K.twitter:return I.twitter;case K.salesforce:return I.salesforce;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.isOAuthSourceType=function C(N){var O=[I.googleBigQuery,I.dropbox,I.googleAnalytics,I.googleDrive,I.facebook,I.twitter,I.salesforce];return H.indexOf(O,N)!==-1;};mstrmojo.DI.DIDatabaseHelper.filterDBById=function B(P,N,O){return H.filter(P,function(S){var R=H.indexOf(N,S.id),Q;if(R>-1){Q=O;}else{Q=!O;}return Q;});};mstrmojo.DI.DIDatabaseHelper.filterDBByDispOption=function B(P,N,O){return H.filter(P,function(R){var Q=false;if((R.disp&N)===N){H.forEach(O,function(S){if(R.id===S){Q=true;return false;}});return !Q;}});};mstrmojo.DI.DIDatabaseHelper.getDBIds=function J(O){var N=[];H.forEach(O,function(P){N=N.concat(P.id);});return N;};mstrmojo.DI.DIDatabaseHelper.getUniqueDBTypes=function G(P){var O=[],N;H.forEach(P,function(Q){N=H.indexOf(O,Q.dbType);if(N<0){O.push(Q.dbType);}});return O;};mstrmojo.DI.DIDatabaseHelper.filterDBByAdminConfig=function(O,N){return H.filter(O,function(R){var P=H.indexOf(N,R.id),Q=true;if(P>=0){Q=false;}return Q;});};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var D={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};var C={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:D,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,useDarkTheme:false,init:function H(I){this.clear();this._super(I);},setAlignment:function E(I,J){this.alignment={host:I,popup:J};},addPopupHandlers:function F(I,K,J){this.popupHandlers[I]={open:K,close:J};},clear:function B(){this.popupHandlers={};var I=this.ENUM_CORNERS;this.alignment={host:I.BOTTOM_LEFT,popup:I.TOP_LEFT};},destroy:function(I){this.anchorElement=null;this.hostElement=null;if(this._super){this._super(I);}}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=D;mstrmojo.ui.PopupConfig.directionCfg={menuDirection:C.LEFT_TO_RIGHT,isRightToLeft:function G(){return this.menuDirection===C.RIGHT_TO_LEFT;},setDirection:function A(I){this.menuDirection=I?C.RIGHT_TO_LEFT:C.LEFT_TO_RIGHT;}};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.locales","mstrmojo.date","mstrmojo.DI.DIConstants","mstrmojo.DI.DIDatabaseHelper");mstrmojo.requiresDescs(2052,2170,2265,3434,3544,4530,4699,8002,8984,9614,9919,9920,9921,9922,12491,12492,12493,12494,12495,12509,12771,13031,13131,13132,13980,13981,8536);var T=mstrmojo.DI.DIConstants,O=T.dataTypeMenuItems,L=T.rdcsFlag,D=mstrmojo.dom,J=mstrmojo.array;mstrmojo.DI.DIHelpers=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIHelpers.isIE7=function N(){return mstrmojo.dom.isIE7;};mstrmojo.DI.DIHelpers.isIE=function(){return D.isIE||!!D.userAgent.match(/Trident\/7\.0/);};mstrmojo.DI.DIHelpers.isIEOrEdge=function(){return mstrmojo.dom.isEdge||this.isIE();};mstrmojo.DI.DIHelpers.getURLCaption=function(){var U="";if(mstrApp.diParams&&mstrApp.diParams.EnableURLImport){if(mstrApp.diParams.EnableFileImport){if(mstrApp.isSingleTier){if(window.FormWrapper!==window.client){U+="File://";}}else{U+="File://";}}if(mstrApp.diParams.EnableHttpImport){if(U!==""){U+=", ";}U+="Http://, Https://";}if(mstrApp.diParams.EnableFTPImport){if(U!==""){U+=", ";}U+="Ftp://";}}return U;};mstrmojo.DI.DIHelpers.getUrlTooltip=function C(){var U="";if(!mstrApp.diParams){return U;}if(!mstrApp.diParams.EnableURLImport){U=mstrmojo.desc(12491,"URL file uploads are currently disabled. Please contact your administrator.");}else{U=mstrmojo.desc(12492,"Use one of the following URL formats to upload your file:")+" ";U+=mstrmojo.DI.DIHelpers.getURLCaption();if(mstrApp.enableFileImport){U+="\r\r";U+=mstrmojo.desc(12493,"'File://' format allows you to upload files in your local machine. For example: File://ComputerName/path/FileName.");}if(mstrApp.enableHttpImport||mstrApp.enableHttpsImport){U+="\r\r";if(mstrApp.enableFileImport){U+=mstrmojo.desc(12494,"Some other examples are:");}else{U+=mstrmojo.desc(12495,"Some examples are:");}}if(mstrApp.enableHttpImport){U+="\r";U+="http://host/path/FileName";U+="\r";U+="https://user:password@host/path/FileName";}if(mstrApp.enableFtpImport){U+="\r";U+="ftp://user:password@host/path/FileName";U+="\r";U+="ftp://user:password@host:port/path/FileName";}}return U;};mstrmojo.DI.DIHelpers.createMSTRObjects=function(W,Y){var U,X,V;if(W.constructor===Array){U=W;for(V=0;V<U.length;V++){U[V]=mstrmojo.DI.DIHelpers.createMSTRObjects(W[V],Y);}}else{if(typeof W==="object"){U=new mstrmojo.Obj(W);for(X in W){if(!Y||Y.indexOf(X)===-1){if(W.hasOwnProperty(X)){U.set(X,mstrmojo.DI.DIHelpers.createMSTRObjects(W[X],Y));}}}}else{U=W;}}return U;};mstrmojo.DI.DIHelpers.getURLParameters=function(U){var V;var Y;var X=[];if(U){if(U.indexOf("?")>0){U=U.substr(U.indexOf("?")+1);}Y=U.split("&");for(V=0;V<Y.length;V++){var W=Y[V].split("=");if(W.length===2){X[W[0]]=W[1];}}}return X;};mstrmojo.DI.DIHelpers.getBackendSourceType=function(U){var V=T.backendSourceSubtype.localFile;switch(U){case T.sourceSubtype.dropbox:V=T.backendSourceSubtype.dropbox;break;case T.sourceSubtype.bisource:V=T.backendSourceSubtype.bISources;break;case T.sourceSubtype.clipboard:V=T.backendSourceSubtype.clipboard;break;case T.sourceSubtype.facebook:V=T.backendSourceSubtype.facebook;break;case T.sourceSubtype.googleAnalytics:V=T.backendSourceSubtype.googleAnalytics;break;case T.sourceSubtype.googleBigQuery:V=T.backendSourceSubtype.googleBigQuery;break;case T.sourceSubtype.googleBigQueryFFSQL:V=T.backendSourceSubtype.googleBigQueryFFSQLModel;break;case T.sourceSubtype.googleBigQuerySingleTable:V=T.backendSourceSubtype.googleBigQuerySingleTable;break;case T.sourceSubtype.googleDrive:V=T.backendSourceSubtype.googleDrive;break;case T.sourceSubtype.hadoop:V=T.backendSourceSubtype.hadoopFileBrowser;break;case T.sourceSubtype.localFile:V=T.backendSourceSubtype.localFile;break;case T.sourceSubtype.mdx:V=T.backendSourceSubtype.OLAPSources;break;case T.sourceSubtype.salesforce:V=T.backendSourceSubtype.salesforce;break;case T.sourceSubtype.samplefile:V=T.backendSourceSubtype.samplefile;break;case T.sourceSubtype.searchOnSource:V=T.backendSourceSubtype.searchAsASource;break;case T.sourceSubtype.twitter:V=T.backendSourceSubtype.twitter;break;case T.sourceSubtype.url:V=T.backendSourceSubtype.url;break;case T.sourceSubtype.publicData:V=T.backendSourceSubtype.publicData;break;case T.sourceSubtype.cloudElement:V=T.backendSourceSubtype.cloudElement;break;}return V;};mstrmojo.DI.DIHelpers.getStateParameters=function(V){var U;var Y;var W=[];if(V.indexOf(":")>=0){Y=V.split(":");}else{Y=V.split("%3A");}for(U=0;U<Y.length;U++){var X=Y[U];if(X.substr(2,1)==="_"){W[X.substr(0,2)]=X.substr(3);}}return W;};mstrmojo.DI.DIHelpers.getExtensionType=function(W){var V=W.toLowerCase(),U;if(V===".xls"||V===".xlsx"||V===".xlsm"){U=T.xdaType.excel;}else{if(V===".txt"||V===".csv"||V===".tsv"||V===".prn"){U=T.xdaType.text;}else{U=0;}}return U;};mstrmojo.DI.DIHelpers.setTablesrc=function(U,W,V){if(W){if(!U.tablesSrc[W]){U.tablesSrc[W]=[];}U.tablesSrc[W].push(V);}};function S(U){var W={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2},Z={1:T.columnDataTypes.integer,2:T.columnDataTypes.integer,6:T.columnDataTypes.dtdouble,7:T.columnDataTypes.dtfloat,21:T.columnDataTypes.integer,22:T.columnDataTypes.nlong,30:T.columnDataTypes.bigDecimal,34:T.columnDataTypes.int64},V=W[U],Y=Z[U],X="";switch(V.toString()){case T.dataTypeMenuItems.NUMBER:switch(Y){case T.columnDataTypes.integer:X=mstrmojo.desc(9614,"Integer");break;case T.columnDataTypes.nlong:X=mstrmojo.desc(13131,"Long");break;case T.columnDataTypes.int64:X=mstrmojo.desc(13132,"Big Integer");break;case T.columnDataTypes.dtfloat:X=mstrmojo.desc(8002,"Float");break;case T.columnDataTypes.dtdouble:X=mstrmojo.desc(2265,"Double");break;case T.columnDataTypes.bigDecimal:X=mstrmojo.desc(9920,"Big Decimal");break;default:X=mstrmojo.desc(3434,"Number");break;}break;case T.dataTypeMenuItems.DATE:X=mstrmojo.desc(2052,"Date");break;case T.dataTypeMenuItems.DATE_TIME:X=mstrmojo.desc(9919,"DateTime");break;case T.dataTypeMenuItems.TIME:X=mstrmojo.desc(2170,"Time");break;case T.dataTypeMenuItems.TEXT:X=mstrmojo.desc(3544,"Text");break;case T.dataTypeMenuItems.HTML_TAG:X=mstrmojo.desc(9921,"HTML Tag");break;case T.dataTypeMenuItems.PHONE_NUMBER:X=mstrmojo.desc(8984,"Phone Number");break;case T.dataTypeMenuItems.SYMBOL:X=mstrmojo.desc(4530,"Symbol");break;case T.dataTypeMenuItems.URL:X=mstrmojo.desc(9922,"URL");break;case T.dataTypeMenuItems.EMAIL:X=mstrmojo.desc(4699,"Email");break;}return X;}mstrmojo.DI.DIHelpers.getDataTypeString=S;mstrmojo.DI.DIHelpers.parseAlternateSourceValidationResults=function M(c){var a=[],Y,Z,b,d,U,W,X,V;J.forEach(c,function(e){Y=Z=b=d="";W=(e.vt===3)?1:0;switch(e.vt){case 0:case 1:case 2:case 3:Y=e.n;Z=S(e.ddt);U=e.src;b=U.n;d=S(U.ddt);break;case 4:Y=e.n;Z=S(e.ddt);break;case 8:U=e.src;b=U.n;d=S(U.ddt);break;}X=Z?Y+"("+Z+")":Y;V=d?b+"("+d+")":b;a.push([X,W,V]);});return a;};mstrmojo.DI.DIHelpers.getURLFileName=function(V){var U=V.lastIndexOf("/");return U>=0&&U+1!==V.length?V.substr(U+1):V;};mstrmojo.DI.DIHelpers.isOperationMode=function(U){return U!==undefined&&U!==null;};mstrmojo.DI.DIHelpers.isCtrlKey=function(U,W){var V=W||(U||window).event;return V.ctrlKey||V.metaKey;};mstrmojo.DI.DIHelpers.isRefreshable=function(V){var U,W=0;for(U in V.importSources){var X=V.importSources[U];if(X.type===T.sourceType.file&&(X.subtype===T.sourceSubtype.url||X.subtype===T.sourceSubtype.publicData)){if(!X.sourceInfo||X.sourceInfo.url.indexOf("http://mirror.microstrategy.com/datahub/samples")!==0){W++;}}}if(V.getAllTableID().length===W&&!mstrApp.diParams.EnableHttpImport&&!mstrApp.diParams.EnableFTPImport&&!mstrApp.diParams.EnableFileImport&&!mstrApp.diParams.EnableURLImport){return false;}return true;};mstrmojo.DI.DIHelpers.strStartsWith=function(V,U){return V.indexOf(U)===0;};mstrmojo.DI.DIHelpers.adjustDataIdx=function(X,W){var U=[],V;if(!X||X.length===0){return ;}J.forEach(X,function(Y){V=Y.subColumns;if(V&&V.length>1){U=U.concat(V);}else{U.push(Y);}});U.sort(function(Z,Y){return Z[W]-Y[W];});};mstrmojo.DI.DIHelpers.setDataIdx=function(W,V,U){if(!V||V.length===0){return ;}if(V[0].hasOwnProperty("clix")){J.forEach(W,function(Y){var X=Y.ix;Y[U]=J.find(V,"clix",X);if(Y.isMultiForm){J.forEach(Y.subColumns,function(Z){Z[U]=J.find(V,"clix",Z.ix);});}});}if(V[0].hasOwnProperty("did")){J.forEach(W,function(Z){var Y=Z.did;var X=J.find(V,"did",Y);if(X!==-1){Z[U]=X;}if(Z.isMultiForm){J.forEach(Z.subColumns,function(a){X=J.find(V,"did",a.did);if(X!==-1){a[U]=X;}});}});}};mstrmojo.DI.DIHelpers.encodeData=function(U){var V="";if(U!==undefined){if(typeof U==="number"){V=U;}else{V=mstrmojo.string.encodeHtmlString(U,false,true);}}return V;};var E={0:"Bytes",1:"KB",2:"MB",3:"GB",4:"TB",5:"PB"};function P(U){return E[U]||"unknown";}mstrmojo.DI.DIHelpers.getRoundSize=function I(V){var U;for(U=0;(V/1024)>1;U++){V=V/1024;}V=V.toPrecision(3);return V+P(U);};mstrmojo.DI.DIHelpers.findNewElements=function(W,X){var V=[],U;if(W&&W.length){J.forEach(X,function(Y){U=J.indexOf(W,Y);if(U===-1){V.push(Y);}});}else{if(X&&X.length){V=[].concat(X);}}return V;};mstrmojo.DI.DIHelpers.generateCubeName=function(V){var U,W,X=50;U=V.join(" ");if(U.length>X){U=U.slice(0,X)+"...";}W=V.length;if(W>1){U+=" ("+W+" tables)";}return U;};mstrmojo.DI.DIHelpers.parseValidateSourceResults=function(V){var U={isValidate:true,hasError:false,tbids:[],tableValidate:[],missingColumnTbids:[],mismatchedDatatypeTbids:[],missingTableTbids:[],errorTableTbids:[],missingColumns:{},mismatchedDatatypeColumns:{},missingTablesColumns:{},errorTableErrCode:{},errorTableErrMsg:{}},W=V&&V.vts;J.forEach(W,function(e){var X=e.tbid,f=e.vt,Z=e.emsg,c=e.cols||[],Y=true,d=false,b,g=[],a=[];if(f===1){Y=true;}else{switch(f){case T.backendError.switchingFileType:case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:case T.backendError.shouldBeIgnored:d=true;break;}J.forEach(c,function(h){var i=h.vt;switch(i){case 1:a.push(h);break;case 4:g.push(h);break;}});}if(d){U.errorTableTbids.push(X);U.errorTableErrCode[X]=f;U.errorTableErrMsg[X]=Z;U.isValidate=false;U.hasError=true;}b=g.length>0&&g.length===c.length;if(g.length>0||a.length>0){Y=false;}else{Y=true;}if(Y===false){U.isValidate=false;}U.tbids.push(X);U.tableValidate.push(Y);if(g.length>0){if(b){U.missingTableTbids.push(X);U.missingTablesColumns[X]=g;}else{U.missingColumnTbids.push(X);U.missingColumns[X]=g;}}if(a.length>0){U.mismatchedDatatypeTbids.push(X);U.mismatchedDatatypeColumns[X]=a;}});return U;};mstrmojo.DI.DIHelpers.truncate=function(W,Y,U){if(W&&W.length>Y){var a=3,V=Y-a,Z=Math.ceil(V/2),X=Math.floor(V/2);if(U){return W.substr(0,V)+"...";}else{return W.substr(0,Z)+"..."+W.substr(W.length-X);}}else{return W;}};mstrmojo.DI.DIHelpers.getAbsoluteFileName=function(U){var V,W=U.lastIndexOf("\\");if(W===-1){W=U.lastIndexOf("/");}V=U.substring(W+1,U.length);return V;};mstrmojo.DI.DIHelpers.reevaluatePopupPosition=function(U){if(U){var V=U.style,Y=V.display,X=V.left,W=V.top;V.display="block";if(parseInt(X.substring(0,X.length-2))<0){V.left="0px";}if(parseInt(W.substring(0,W.length-2))<0){V.top="0px";}V.display=Y;}};mstrmojo.DI.DIHelpers.expandNode=function(V){var U=V.visible;V.set("visible",!U);return !U;};mstrmojo.DI.DIHelpers.normalizeTimestamp=function(W){var V=W.replace(/-/g,"/");var U=V.indexOf(".");if(U>0){V=V.substring(0,U);}return V;};mstrmojo.DI.DIHelpers.getBackendErrorStr=function(V,U){var W="";switch(V){case T.backendError.switchingFileType:W=mstrmojo.desc(12509,"Switching the file type is not allowed during republishing or editing the cube.");break;case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:W=mstrmojo.desc(14392,"We do not have the credentials needed to get the data for this table. Please provide the credentials to proceed publishing this table.");break;}return W;};mstrmojo.DI.DIHelpers.getCommonElements=function(X,Z,Y){var V=[],W,U;for(W=0;X&&W<X.length;W++){for(U=0;Z&&U<Z.length;U++){if(Y(X[W],Z[U])){V.push(X[W]);break;}}}return V;};mstrmojo.DI.DIHelpers.formatDateAndTime=function(c,X){var b=mstrmojo.date;var V=mstrmojo.locales;var W,d,a,Z,U,Y;W=b.parseDateAndOrTime(c);d=W.date;a=W.time;if(X){Y=new Date(Date.UTC(d.year,d.month-1,d.day,a.hour,a.min,a.sec));W=b.getDateJson(Y);d=W;a=W;}Z=b.formatDateInfo(d,V.datetime.DATEDISPLAYFORMAT);U=b.formatTimeInfo(a,V.datetime.TIMEDISPLAYFORMAT);return Z+" "+U;};mstrmojo.DI.DIHelpers.isServerBasedWS=function(){return !!mstrApp.isWorkstation&&!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isLocalWS=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isDIinVI=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier&&!!mstrApp.isPopup;};mstrmojo.DI.DIHelpers.extractFileNameFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W;};mstrmojo.DI.DIHelpers.extractFileExtensionFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W.substring(W.lastIndexOf(".")+1);};mstrmojo.DI.DIHelpers.isWS=function(){return !!mstrApp.isWorkstation;};mstrmojo.DI.DIHelpers.getEnvObj=function(){var X=(navigator.platform.indexOf("Win")!==-1?"Win":"Mac"),U=!!mstrApp.isWorkstation?"WS":"Web",V=[];V.push(U,X);return{ENV:V.join("-"),isWSClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return !window.FormWrapper.isDesktop();},isDesktopClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return window.FormWrapper.isDesktop();},isWeb:function(){return U==="Web";},isWS:function(){return U==="WS";},isWin:function(){return X==="Win";},isMac:function(){return X==="Mac";},isDataSet:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp"||mstrApp.placeholder==="QBApp";},isDIinVI:function(){return !!mstrApp.isFromVI;},isInDI:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp";},isInQB:function(){return mstrApp.placeholder==="QBApp";},isAppSchema:function(){return !!window.mstrAppSchema;},isWebWin:function(){return this.isWeb()&&this.isWin();},isWebMac:function(){return this.isWeb()&&this.isMac();},isWebDataSet:function(){return this.isWeb()&&this.isDataSet();},isWebDossier:function(){return this.isWeb()&&this.isDIinVI();},isWSWin:function(){return this.isWS()&&this.isWin();},isWSMac:function(){return this.isWS()&&this.isMac();},isWSDataSet:function(){return this.isWS()&&this.isDataSet();},isServerBasedWS:mstrmojo.DI.DIHelpers.isServerBasedWS,isWSDossier:function(){return this.isWS()&&this.isDIinVI();},isWSLiveMode:function W(){return this.isWS()&&parseInt(window.FormWrapper.isWSLiveMode(),10)===1;},isWSDossierLocalMode:function(){return this.isWSDossier()&&!this.isWSLiveMode();},isWebWinDataSet:function(){return this.isWeb()&&this.isWin()&&this.isDataSet();},isWebMacDataSet:function(){return this.isWeb()&&this.isMac()&&this.isDataSet();},isWebWinDossier:function(){return this.isWeb()&&this.isWin()&&this.isDIinVI();},isWebMacDossier:function(){return this.isWeb()&&this.isMac()&&this.isDIinVI();},isWSWinDataSet:function(){return this.isWS()&&this.isWin()&&this.isDataSet();},isWSMacDataSet:function(){return this.isWS()&&this.isMac()&&this.isDataSet();},isWSWinDossier:function(){return this.isWS()&&this.isWin()&&this.isDIinVI();},isWSMacDossier:function(){return this.isWS()&&this.isMac()&&this.isDIinVI();},isStandaloneDataSet:function(){return !this.isDIinVI()&&this.isDataSet();}};};mstrmojo.DI.DIHelpers.isOnetier=function(){return !!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.getHierarchyMappingXML=function(Z,a){var W="";var V=0,X=1,Y=12;if(a&&a[L.ID]){W+="<mpcs>";W+="<mpc ";W+='did="'+a[L.ID].did+'" drvflg="'+V+(a[L.ID].n?('" n="'+a[L.ID].n+'" ot="'):"")+Y+'" recurisve="'+X+'" ';if(!!Z&&Z!==""){W+='oid="'+Z+'" ';}W+=">";if(a[L.JOIN_ID]){W+="<rdcs>";}for(var U=L.JOIN_ID;U<=L.DISTANCE;U++){if(a[U]!==undefined){W+='<rdc did="'+a[U].did+'" fg="'+U+'"/>';}}if(a[L.JOIN_ID]){W+="</rdcs>";}W+="</mpc>";W+="</mpcs>";}return W;};mstrmojo.DI.DIHelpers.getOperationMode=function(){return mstrApp.getRootController().getModel().operationMode;};mstrmojo.DI.DIHelpers.standardizeDBRolesFormat=function Q(c){var W=["att","dbRole","tableMap"],d,f,Z,U,X,V,a,Y,e,g,b=(function(){var h="list",j="number",i="text";function k(l,q,p,o,n,m){if(l&&p){if(m){l.push({field:q,fieldV:p,IDS:o,options:m,tp:n});}else{l.push({field:q,fieldV:p,IDS:o,tp:n});}}}return{authenticationmethod:function(l,m){k(l,"auth",m,7776,h,[{IDS:13980,n:mstrmojo.desc(13980),v:"1"},{IDS:13981,n:mstrmojo.desc(13981),v:"4"}]);},databasename:function(l,m){k(l,"db",m,8519,i);},hostname:function(l,m){k(l,"host",m,8533,i);},port:function(l,m){k(l,"port",m,8534,j);},server:function(l,m){k(l,"svr",m,8536,i);}};}());c=Object.keys(c).map(function(h){return mstrmojo.DI.DIHelpers.createMSTRObjects(c[h],W);});J.forEach(c,function(h){J.forEach(h.tables,function(i){i.dbRole=(i.dbRole&&i.dbRole.oi)||i.dbRole;i.dbmsObj=i.dbmsObj&&i.dbmsObj.oi;f=i.dbRole;if(f){f.dbmsObj=i.dbmsObj;Z=f.dbmsObj;if(!f.dbms){f.dbms=f.def&&f.def.dbms&&f.def.dbms.did;}}if(!Z||Z.DBInfo){return ;}Z.DBInfo={};d=Z.DBInfo;U=f.efd;if(!U){return ;}U.forEach(function(j){X=j.oi&&j.oi.def;if(!X){return ;}g=X.dbtp;if(g){f.db_type=g;d.dbTypes={dbt:{v:g,n:mstrmojo.desc(mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType(g))}};}V=X.cnsr;if(!V){return ;}e=[];Y=null;f.connstr=V;V.split(";").forEach(function(k){a=k.split("=");a[0]=a[0].toLowerCase().trim();if(a[0]==="driver"){d.driverInstalled=true;}else{if(a[0]==="authenticationmethod"){Y=a;}else{if(b[a[0]]){b[a[0]](e,a[1]);}}}});if(Y){b[Y[0]](e,Y[1]);}});});});return c;};mstrmojo.DI.DIHelpers.filterDisableSources=function A(U){return J.indexOf(mstrApp.diParams.disabledSources,U)<0;};mstrmojo.DI.DIHelpers.getPopupWindowOptions=function R(){var Y={};var W=window.screenX||window.screenLeft||0,V=window.screenY||window.screenTop||0,X=800,U=600,Z;if(document.body&&document.body.offsetWidth){X=document.body.offsetWidth;U=document.body.offsetHeight;}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){X=document.documentElement.offsetWidth;U=document.documentElement.offsetHeight;}if(window.innerWidth&&window.innerHeight){X=window.innerWidth;U=window.innerHeight;}if(window.outerWidth){X=window.outerWidth;}if(window.outerHeight){U=window.outerHeight;}Y.height=U*0.5;Y.width=X*0.8;if(Y.height<600||isNaN(Y.height)){Y.height=600;}if(Y.width<800||isNaN(Y.width)){Y.width=800;}Y.left=W+(X-Y.width)/2;Y.top=V+(U-Y.height)/8;if(this.getEnvObj().isWSWin()&&this.getEnvObj().isDIinVI()){Y.left=(window.screen.width-Y.width)/2;Y.top=(window.screen.height-Y.height)/2;}Z="width="+Y.width+",height="+Y.height;Z+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";Z+=",left="+Y.left+",top="+Y.top;return Z;};mstrmojo.DI.DIHelpers.createPopupWindow=function G(V,U){var W,X;X=this.getPopupWindowOptions();if(!V){V="";}W=window.open(V,U,X);return{wnd:W};};mstrmojo.DI.DIHelpers.openPopupWindow=function H(X,V,U){var W;if(X&&!X.closed){X.location=U;X.focus();}else{W=this.createPopupWindow(U);X=W.wnd;if(X){X.focus();}}return X;};mstrmojo.DI.DIHelpers.sendResponse2Window=function B(V,U,Y){var X;if(Y){X=Y;}else{X=window.opener;}if(X){if(U===undefined){U=window.location.origin;if(!U){U=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");}}try{if(this.isIE()&&X.postMessagePassthrough){X.postMessagePassthrough(V,U);try{window.open("","_self","");window.close();}catch(Z){window.close();}}else{X.postMessage(V,U);}}catch(W){console.log("postMessage error: "+W);}}};mstrmojo.DI.DIHelpers.convertDataSourceType2SourceType=function F(U){switch(U){case T.dataSourceType.DROPBOX:return T.sourceType.dropbox;case T.dataSourceType.GOOGLE_DRIVE:return T.sourceType.googleDrive;case T.dataSourceType.GOOGLE_ANALYTICS:return T.sourceType.googleAnalytics;case T.dataSourceType.SALESFORCE:return T.sourceType.salesforce;case T.dataSourceType.GOOGLE_BIGQUERY:return T.sourceType.googleBigQuery;default:return -1;}};mstrmojo.DI.DIHelpers.highlightKeyWords=function K(c,d,U){var W="\\*.?+$^[](){}|/",e=c,a,X;if(c===""){return d;}for(X in W){if(W.hasOwnProperty(X)){a=W[X];e=e.replace(new RegExp("\\"+a,"g"),"\\"+a);}}var b=new RegExp("("+e+")","ig");var V="\u001E",Z=mstrmojo.string.encodeHtmlString,Y;if(b.test(d)){d=d.replace(b,function(f){return V+f+V;});Y=J.map((d||"").split(V),function(g,f){return(f%2===0)?Z(g):('<span class="'+U+'">'+Z(g)+"</span>");});return Y.join("");}};mstrmojo.DI.DIHelpers.detectCustomImg=function(X,W){if(!X||!(W.nodeType&&W.nodeType===window.Node.ELEMENT_NODE)){return ;}var U=X.replace?X.replace(/\s+/g,""):"";var Y=document.getElementsByTagName("head")[0];var V=document.createElement("img");V.src="../javascript/mojo/css/images/DI/connectors/"+U+".png";V.onload=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/"+U+".png) no-repeat";Y.removeChild(V);};V.onerror=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/default.png) no-repeat";Y.removeChild(V);};Y.appendChild(V);};mstrmojo.DI.DIHelpers.spliceUrlBySeparator=function(V){var U=V.split("#");return U.slice(U.length/2+1).join("#");};mstrmojo.DI.DIHelpers.isOriginalConnector=function(V){var U=T.originalConnector;if(U.elastic===V||U.tapClicks===V){return true;}return false;};mstrmojo.DI.DIHelpers.acceptEventFromAncestor=function(U){if(!U){return true;}if(!this.domNode||typeof U.contains!=="function"||!this.hasRendered){return false;}return U.contains(this.domNode);};mstrmojo.DI.DIHelpers.isdbRoleWritable=function(U){if(mstrmojo.DI.DIHelpers.isOnetier()){return true;}else{return U.writable==="1"&&mstrApp.rootController.hasPrivilege(T.DssXmlPrivileges.DssXmlPrivilegesUseDatabaseInstanceManager);}};mstrmojo.DI.DIHelpers.isdbRoleUsable=function(U){return mstrmojo.DI.DIHelpers.isOnetier()?true:U.usable==="1";};mstrmojo.DI.DIHelpers.applyDriverSuffix=function(W){if(!W||!W.Preferences){return ;}var U=JSON.stringify(W),V=W.Preferences.driverNameSuffix,Y=this.getEnvObj();var X="Platform";if(Y.isDesktopClient()){X=Y.isMac()?"DesktopMac":"DesktopWin";}else{if(Y.isWSClient()){X=Y.isMac()?"WorkstationMac":"WorkstationWin";}}var Z=V[J.find(V,"n",X)];return JSON.parse(U.replace(/!#DRIVERSUFFIX#!/g,Z?Z.value:""));};mstrmojo.DI.DIHelpers.isGeo=function(U){return U.georole&&U.georole>0;};mstrmojo.DI.DIHelpers.isTime=function(U){return U.dtp===parseInt(O.DATE,10)||U.dtp===parseInt(O.DATE_TIME,10)||U.dtp===parseInt(O.TIME,10);};}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(i,k,h){var j=i.listSelector;if(j){j[k](i,i.itemsContainerNode,h);}}function L(i,h){var j=i.lastPagePos;if(!j||j.dragId!==h){j=e.offset(i.itemsContainerNode);j.dragId=h;i.lastPagePos=j;var k=i.scrollboxNode;i.lastScrollPos={left:k.scrollLeft,top:k.scrollTop,width:k.clientWidth,height:k.clientHeight};}}function O(k,n,i){var j=n&&n.node;if(j===k.dropCueNode||j===k.dropCueNode.firstChild){return k.dropCuePos;}var l=k.listMapper;var h=l&&l.whereDrop(k,k.itemsContainerNode,j,n.pos,{left:k.lastPagePos.left-k.lastScrollPos.left,top:k.lastPagePos.top-k.lastScrollPos.top,width:k.lastScrollPos.width,height:k.lastScrollPos.height});var m=k.dropCuePos;return((i!==false)&&m&&h&&(m.idx===h.idx)&&(m.left===h.left)&&(m.top===h.top))?m:h;}var g="attachEventListener";function D(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function G(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var k=this.dropCuePos,j=!!k;if(j){h.left=k.left+"px";h.top=k.top+"px";}h.display=j?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var l=this.listBuilder,o=l.newContext(this);this.ctxtBuilder=o;var i=this.markupSlots,k=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),j=this.items,h=(j&&j.length)||0,m=k?this.firstRenderBlockSize:h,n=k?this.firstRenderBlockSize:0;this._eros=k;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(j,l,this,o,m,n).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var i=mstrmojo.all[p];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(j,h,i){if(j!==false){j=true;}if(this.paused===!!j){return ;}this.paused=!!j;if(j){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var m=(this.items&&this.items.length)||0;if(!m){if(l){l();}}else{var j=this.scrollboxNode,n=this.itemsContainerNode,k=mstrmojo.boxmodel.offset(n,j),p=this.listMapper,o=p.findScrollRange(n,m,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||j.scrollTop,j.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||j.scrollLeft,j.clientWidth,k.left,k.top);if(this.fillAt(o.start,o.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,l);},100);}else{if(l){l();}}}},fillAt:function M(j,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,j,i,this.renderBlockSize);}else{return false;}},add:function R(i,h){if(!i||!i.length){return -1;}var j=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(j&&j.length)||0;}if(j&&j.add){j.add(i,h);}else{this.set("items",j?f.insert(j.concat(),h,i):i);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(j){var i=this.items;if(!i||(j==null)){return -1;}var h;if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function Y(m,i,j){var k=this.items,h=-1;if(!k||(m==null)){return -1;}if(!isNaN(m)){if(i===null||i===undefined){i=m+1;}m=k[m];}else{if(i===null||i===undefined){i=this.itemIndex(m)+1;}}if(m){var l;l=a.copy(j,a.clone(m));h=this.add([l],i);}return h;},preremove:function N(i){if(this.hasRendered){var k=this.listMapper;if(k){k.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var j=this.listBuilder;if(j){j.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function S(l,q){function o(r,i){return q>=r&&q<=r+i;}var p=(this.items&&this.items.length)||0;if(q===-1||q==null||isNaN(q)){q=p;}else{q=Math.min(q,p);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(o(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(o(h,1)){return false;}}else{h=l;n=[l];m=1;if(o(h,1)){return false;}k=[this.items[h]];}}for(var j=0;j<m;j++){if(n[j]<=q){q--;}}if(k[0]!=null){this.remove(h);this.add(k,q);}return true;},itemIndex:function F(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(m,h){var l=this.items;h=this.initItems(h);this.items=h;if(l!==h){var k=this,j=function(){if(k.autoHide){k.set("visible",!!(h&&h.length));}k=null;},i=this.hasRendered;if(i){this.refresh(j);}else{j();}}return l!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(i){var h,j=this.listMapper;if(j&&j.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){j.toItem(this,h);}}},draggable:false,getDragData:function(l){L(this,l.id);var j=O(this,l.src),i=j&&j.idxActual;if((i>-1)&&this.selectedIndices[i]){var k=this.sortSelectedIndices(),h=f.get(this.items,k)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:k[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:k},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(k){var i=k&&k.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(i.hWin,i.e)){var j=k.src&&k.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}}}}},ondrop:function(q){var u=q&&q.src,p=u&&u.data;if(p){var k=O(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;r=Math.min(r,n&&n.length)||0;var t=true;if(u.widget===this){t=this.move(j,r);f.forEach(j,function(i){if(i<=r){r--;}});}else{this.add(l?p:[p],r);}if(t){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton mstrButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton mstrButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo._CanRenderChildrenOnShow");var A=mstrmojo.array;mstrmojo.StackContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._CanRenderChildrenOnShow],{scriptClass:"mstrmojo.StackContainer",isStack:true,markupString:'<div id="{@id}" class="mstrmojo-StackContainer {@cssClass}" style="{@cssText}"></div>',markupMethods:{onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}},onborderChange:function(){this.domNode.style.border=this.border||"";},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{containerNode:function(){return this.domNode;}},_set_selected:function D(H,F){var G=this.selected;if(G===F){return false;}if(G){G.set("visible",false);}this.selected=F;if(F){F.set("visible",true);}return true;},addChildren:function B(J,G,H){var K=this.selected,L;for(var I=0,F=(J&&J.length)||0;I<F;I++){L=J[I];if(L&&L.set){L.set("visible",L===K);}}return this._super(J,G,H);},removeChildren:function C(H,F){var G=this._super(H,F);if(!H||(H===this.selected)){this.set("selected",null);}return G;},destroy:function E(F){this._super(F);this.selected=null;},renderMode:"onshow"});})();(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var E=function(){var G=this.opener;if(G.direction.toLowerCase()==="up"){this.domNode.style.top=-G.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"",text:"",direction:"down",enabled:true,title:"",allowHTML:true,markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.getTextInnerHTML();},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function C(){if(this._super){this._super();}var G=this.popupRef;if(G){if(G.nudge){G.nudge=mstrmojo.func.composite([G.nudge,E]);}else{if(this.direction.toLowerCase()!=="down"){G.nudge=E;}}}},popupRef:null,popupOpenConfig:null,destroy:function D(G){var H=this.popupRef;if(H&&H.hasRendered){H.destroy(false);}if(this._super){this._super(G);}},togglePopup:function F(){var G=this._lastOpened;if(G&&G.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(G){this.togglePopup();},getTextInnerHTML:function B(){return this.allowHTML?this.text:mstrmojo.string.encodeHtmlString(this.text);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.css","mstrmojo.hash");mstrmojo.TristateCheckBox=mstrmojo.declare(mstrmojo.Label,null,{scriptClass:"mstrmojo.TristateCheckBox",grayed:true,checked:true,cssClass:"tristate",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}},markupMethods:mstrmojo.hash.copy({oncheckedChange:function(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},ongrayedChange:function(){mstrmojo.css.toggleClass(this.domNode,"grayed",this.grayed);},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},mstrmojo.hash.copy(mstrmojo.Label.prototype.markupMethods))});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(G,F){if(!A){var H=this.itemField;A=this._super(G).replace('@title}">{@en@n}<',"@en@"+H+'}">{@en@'+H+"}<");}return A;},getItemProps:function C(H,F){var G=this._super(H,F),I=this.itemField;if(!mstrmojo.string.isEmpty(H[I])){G[I]=H[I];}return G;},onclick:function B(F){if(this.disableClick){return false;}var K=this,H=this.parent,J=H.opener,G=D.isMetaKey(F.hWin,F.e);if(G&&!this.multiSelect){this.multiSelect=J.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var M=K.selectedIndices;if(J){J.suggestionShown=false;if(M&&!E.isEmpty(M)){var L=[];E.forEach(K.selectedIndices,function(O,N){L.push(K.items[N]);});J.handleSuggestionItemSelect(L);}H.close();}K.multiSelect=false;});}}this._super(F);if(!this.multiSelect){J.suggestionShown=false;var I=this.selectedItem;if(I){J.handleSuggestionItemSelect(I);}H.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}else{if(H===F){break;}}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css","mstrmojo.DI.DIHelpers");var F=mstrmojo.css,H=mstrmojo.string,A=mstrmojo.desc(14058,"Show Details"),E=mstrmojo.desc(14059,"Hide Details"),B=mstrmojo.DI.DIHelpers,D=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">'+D+'</div><div class="toggle-details-link" >'+A+'</div><div class="error-details">{@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},errorDetailsNode:function(){return this.domNode.firstChild.children[3];}},markupMethods:{onshowDetailsChange:function(){var K=this.showDetails;this.toggleDetailsNode.innerHTML=K?E:A;F.toggleClass(this.domNode,"show-details",K);this.updateScrollbars();}},cssClass:undefined,shortDesc:undefined,longDesc:undefined,showDetails:false,showToggle:true,enableContactStr:true,allowHTML:false,init:function I(K){this._super(K);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function J(K){var M=K.getTarget(),L,N=this.longDesc;if(M===this.contactNode){L="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(N?("&body="+encodeURI("Detail:\r\n"+N)):"");mstrApp.openPage(L,"_self");}else{if(M===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}},setupScrollNodes:function C(){this.scrollNode=this.scrollNode;},preBuildRendering:function G(){this._super&&this._super();if(!this.allowHTML){this.longDesc=H.encodeHtmlString(H.decodeHtmlString(this.longDesc,true),true);}},postBuildRendering:function(){var K=this.domNode.firstChild.children[1];this._super&&this._super();!this.showToggle&&F.addClass(this.toggleDetailsNode,"hide");!this.enableContactStr&&F.addClass(K,"invisible");}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,allowHTML:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return this.allowHTML?H[G.itemField]:mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,adjustSize:function(){var G=this.opener,F=this.domNode;if(G&&G.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(G&&G.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}this.adjustSize();},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=P(U.path);}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.StackContainer");mstrmojo.MouseOverContainer=mstrmojo.declare(mstrmojo.StackContainer,null,{scriptClass:"mstrmojo.MouseOverContainer",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout></div>',doSwitch:true,mouseoverItem:null,mouseoutItem:null,init:function(A){this._super(A);if(this.setupSelectedItem){this.setupSelectedItem();}},markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},onmouseover:function(){if(this.doSwitch&&this.enabled){this.set("selected",this.mouseoverItem);}},onmouseout:function(){if(this.doSwitch){this.set("selected",this.mouseoutItem);}},preBuildRendering:function(){this.set("selected",this.mouseoutItem);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var i=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,b=mstrmojo.DI.DIHelpers,W=mstrmojo.array;function V(p){if(!this.modal){return ;}var q=window.mstrApp;if(q&&q.modalEditorChange){q.modalEditorChange(this.id,p);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",allowHTMLTitle:false,help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,onEditorResized:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titleContainerNode:function j(){return this.domNode.firstChild.firstChild;},titlebarNode:function l(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function m(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function n(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.allowHTMLTitle?this.title:mstrmojo.string.encodeHtmlString(this.title);}},onzIndexChange:function(){var p=this.zIndex;this.editorNode.style.zIndex=p;this.curtainNode.style.zIndex=p-1;},onvisibleChange:function(s){if(s){return ;}var r=this.visible,q="closeEffect",p="none";if(r){q="openEffect";p="block";}if(this[q]){this.playEffect(q);}else{this.editorNode.style.display=p;if(this.modal){this.curtainNode.style.display=p;}}},onhelpChange:function e(){if(this.showTitle){var q=this.help,p=this.helpNode;if(!q){p.style.display="none";}else{p.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(q,p){this._super(q,p);V.call(this,true);},close:function g(p){this._super(p);V.call(this,false);},unrender:function B(p){this._super(p);V.call(this,false);},destroy:function h(p){this._super(p);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function k(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(p){var q=p.getTarget();if(q===this.closeNode||q===this.helpNode){C.toggleClass(q,"active",true);}},premouseup:function O(p){var q=p.getTarget();if(q===this.closeNode||q===this.helpNode){C.toggleClass(q,"active",false);}if(p.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function d(p){if(p.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{window.open(mstrmojo.helpPath()+(this.help||""),"_blank");return false;}}},_set_visible:function c(u,r){var q=(this[u]!==r);if(q){this[u]=r;var t=this._close_handler;if(r){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var s=this;t=this._close_handler=t||function(v){var w=M.eventTarget(self,v);if(w&&w.parentNode&&!M.contains(s.editorNode,w,true,document.body)){s.close();}};M.attachEvent(document.body,"mousedown",t);}}else{var p=this._curtain_handler;if(p){M.detachEvent(window,"resize",p);}if(t){M.detachEvent(document.body,"mousedown",t);}}}return q;},showTooltip:function o(v,u){var s=this,q=M.findAncestorByAttr(M.eventTarget(u,v),"tooltip",true,this.domNode),r=q&&q.value;if(!s.hasOpenTooltip&&r){var p=M.position(q.node);s.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:r,top:Math.max(p.y+40,0),left:Math.max(p.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(v,u);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(p){p=Math.round(p);return["rgb(",p,",",p,",",p,")"].join("");}}},preStart:function(){var q=this.target,p=this.widget;p.editorNode.style.display="block";if(!p.modal){return false;}q.style.display="block";C.setOpacity(q,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var p=this.widget;p.editorNode.style.display="none";return !!p.modal;}};function D(p){return function(){Y[p].destroy();};}function J(q,x,y,z){var p=x.id||"mojoAlertx9",u,w=x.buttons;W.forEach(w,function(AB){var AA=AB.onclick;AB.onclick=function(AC){var AD=Y[p];if(AA&&AA.call(AB,AC)===false){return ;}AD.destroy();AD=null;};});try{!!Y[p]&&Y[p].destroy();}catch(v){}var r=x.cssClass,s=[];if(r){s.push(r);delete x.cssClass;}if(z){s.push(z);}s.push("mstrmojo-alert");u={scriptClass:"mstrmojo.Editor",id:p,width:"475px",zIndex:1000,title:y||mstrmojo.desc(11812,"Notification"),cssClass:s.join(" "),children:[{scriptClass:"mstrmojo.Box",cssClass:"alert-content",children:[{scriptClass:"mstrmojo.Label",text:q,allowHTML:x.allowHTML}]}],visible:true};var t=new mstrmojo.Editor(N.copy(x,u));t.render();return t;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(q,w,r){r=r||{};var x=r.forceClose,v=r.callback||mstrmojo.emptyFn,u=N.copy(w||{},{buttons:x?[mstrmojo.Button.newActionButton((r.buttonText||mstrmojo.desc(8607,"Dismiss")),v)]:null,showTitle:false,modal:false,top:"42px"}),s=r.duration||6000;var t=J(q,u,"",x?"ed-notify":"ed-toast"),p=t.id;if(!x){window.setTimeout(i([v,D(p)]),s);}else{window.setTimeout(function(){if(Y[p]){Y[p].editorNode.style.opacity=0.75;}},6000);}return t;};mstrmojo.confirm=function f(p,v,x){v=v||{};var r=v.confirmBtn||{},u=v.cancelBtn||{},w=r.hot!==false,q=!!u.hot,t=x&&x.title,s=[Z(r.t||mstrmojo.desc(219,"Yes"),r.fn,w,r.cfg),Z(u.t||mstrmojo.desc(218,"No"),u.fn,q,u.cfg)];return J(p,N.copy(x||{},{buttons:s,onPreClose:function(){if(u&&u.fn){u.fn();}return true;}}),t,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.warn=function K(r,p,q){q=q||{};q.cssClass=(q.cssClass||"")+" mstrmojo-warning";return mstrmojo.confirm(r,p,q);};mstrmojo.alert=function a(u,r,t,v,p,s){var q={title:t||mstrmojo.desc(12405,"Alert"),zIndex:v,cssClass:p,buttons:[Z(mstrmojo.desc(1442,"OK"),r,true)],onPreClose:function(){if(r){r();}return true;}};N.forEach(q,function(x,w){if(!x){delete q[w];}});return J(u,N.copy(s,q),t,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.error=function T(u,q,t){var r=u||{};var s=mstrmojo.desc(96,"Error");var p=!(b.getEnvObj().isInDI()||b.getEnvObj().isInQB());if(t){s=(t.title)?t.title:mstrmojo.desc(96,"Error");t.title=s;if(t.enableContactStr===false){p=false;}}J("",N.copy(t||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),q,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:r.shortDesc,longDesc:r.longDesc,showToggle:!!(r.longDesc),enableContactStr:p,allowHTML:!!(t&&t.allowHTML===true)}]}),s,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dnd","mstrmojo.ui._HasScroller","mstrmojo.DI.DIConstants");var e=mstrmojo.DI.DIConstants;function Z(g){var i=document.createElement("div"),h=i.style,f=g.domNode;i.className="mstrmojo-DataGrid-avatar";h.height=f.clientHeight+"px";f.appendChild(i);g.avatar=i;return i;}function Q(f){var g=mstrmojo.dom.position(f.domNode,true);return g.x;}function O(f){return'<div class="mstrmojo-DataGrid-resizeHandle" unselectable="on" onselectstart="return false" rh="'+f+'"></div>';}function b(h){var g=h.getAttribute("rh"),f=g&&parseInt(g,10);return f;}function Y(g,j,f){var i=f.src,k=i&&i.data,h=k&&k.resizingIdx;if(!(h&&h>0)){return j&&j.apply(g,[f]);}}mstrmojo.RESIZE_NEXT_COLUMN_MODE={getRange:function G(i,h){var f=i.colSizeArray;var g=[-f[h-1]+i.minColWidth,(h==f.length-1)?f[h]-i.resizeHandleWidth-i.minColWidth:f[h]-i.minColWidth];return g;},updateSize:function F(i,h,g){var f=i.colSizeArray;f[h-1]=f[h-1]+g;f[h]=f[h]-g;},updateColumnWidth:function T(i,g,j,h){var f=i.colSizeArray;g[h-1].style.width=f[h-1]+"px";j[h-1].style.width=f[h-1]+"px";g[h].style.width=f[h]+"px";j[h].style.width=f[h]+"px";}};mstrmojo.RESIZE_ALL_COLUMN_MODE={getRange:function G(l,k){var m=l.minColWidth+l.resizeHandleWidth,f=l.colSizeArray,h=0;for(var j=k;j<f.length;++j){h+=f[j]-m;}var g=[-f[k-1]+m,h];return g;},updateSize:function F(j,n,g){var m=j.minColWidth+j.resizeHandleWidth,k=j.colSizeArray;k[n-1]=k[n-1]+g;var f=[];for(var h=0;h<k.length-n;++h){f[h]=n+h;}f.sort(function(i,p){return k[i]-k[p];});for(var h=0;h<f.length;++h){var o=g/(f.length-h);var l=k[f[h]];g-=(l>=o+m)?o:l-m;k[f[h]]=(l>=o+m)?l-o:m;}},updateColumnWidth:function T(k,g,l,j){var f=k.colSizeArray;for(var h=j-1;h<f.length;++h){g[h].style.width=f[h]+"px";l[h].style.width=f[h]+"px";}}};mstrmojo.RESIZE_CURRENT_COLUMN_MODE={getRange:function G(l,k){var m=l.minColWidth+l.resizeHandleWidth,f=l.colSizeArray,h=0;for(var j=k;j<f.length;++j){h+=f[j]-m;}var g=[-f[k-1]+m,h];return g;},updateSize:function F(i,h,g){var f=i.colSizeArray;f[h-1]=f[h-1]+g;},updateColumnWidth:function T(i,g,j,h){var f=i.colSizeArray;g[h-1].style.width=f[h-1]+"px";j[h-1].style.width=f[h-1]+"px";i.widgetResized();}};mstrmojo._CanResizeColumn=mstrmojo.provide("mstrmojo._CanResizeColumn",{draggable:true,dropZone:false,avatar:null,colSizeArray:null,resizableColumns:true,resizeHandleWidth:10,minColWidth:5,resizeColumnBehavior:mstrmojo.RESIZE_NEXT_COLUMN_MODE,createColSizeArray:function c(){var g,l,j,h,k,f;l=this.headerContainerNode;j=l&&l.getElementsByTagName("table")[0];h=j.rows[0].cells;g=[];for(k=0,f=h.length;k<f;k++){g.push(h[k].offsetWidth);}return g;},postBuildRendering:function V(){if(this._super){this._super();}if(this.avatar){this.domNode.appendChild(this.avatar);}this.colSizeArray=null;},getDragData:function E(f){var h=f.src,i=h.node,g=b(i);if(g&&g>0){return{resizingIdx:g,startingX:h.pos.x,baseX:Q(this)};}if(this._super){return this.dropZone&&this._super(f);}return null;},allowDrop:function K(f){var h=f.src,i=h&&h.data,g=i&&i.resizingIdx;if(g&&g>0){return true;}return this.dropZone;},ondragenter:function R(f){Y(this,this._super,f);},ondragover:function S(f){Y(this,this._super,f);},ondragleave:function B(f){Y(this,this._super,f);},ondrop:function W(f){Y(this,this._super,f);},isDragValid:function C(f){var h=f.src,i=h&&h.data,g=i&&i.resizingIdx;if(g&&g>0){return true;}if(this._super){return this._super(f);}return false;},ondragstart:function X(f){var i=f.src,j=i&&i.data,h=j&&j.resizingIdx;if(h&&h>0){var g=this.avatar||Z(this);this.ownAvatar=true;g.style.left=(j.startingX-j.baseX)+"px";g.style.display="block";document.body.style.cursor="col-resize";if(!this.colSizeArray){this.colSizeArray=this.createColSizeArray();this._firstTimeResize=true;}j.resizingRange=this.resizeColumnBehavior.getRange(this,h);return ;}if(this._super){this._super(f);}},ondragmove:function P(g){var n=g.src,h=n&&n.data,l=h&&h.resizingIdx;if(l&&l>0){var m=g.tgt,i=this.avatar,k=h.resizingRange,j=m.pos.x-h.startingX,f=Math.min(k[1],Math.max(j,k[0]));h.deltaX=f;if(i){i.style.left=(h.startingX-h.baseX+f)+"px";}}else{if(this._super){this._super(g);}}},ondragend:function L(k){var r=k.src,l=r&&r.data,p=l&&l.resizingIdx;if(p&&p>0){var f=this.titleColGroup,q=f&&f.childNodes,n=this.dataColGroup,o=n&&n.childNodes,j=q.length,m=this.colSizeArray,g=l.deltaX;this.resizeColumnBehavior.updateSize(this,p,g);if(this._firstTimeResize){var h;for(h=0;h<j;h++){q[h].style.width=m[h]+"px";o[h].style.width=m[h]+"px";}this._firstTimeResize=false;}else{this.resizeColumnBehavior.updateColumnWidth(this,q,o,p);}this.avatar.style.display="none";document.body.style.cursor="";this.ownAvatar=false;}else{if(this._super){this._super(k);}}}});mstrmojo.requiresCls("mstrmojo._CanResizeColumn","mstrmojo.ListMapperTable","mstrmojo.WidgetList");function J(h){var l=document.createElement("colgroup"),f=h.length,g,k;for(k=0;k<f;k++){var j=document.createElement("col");g=h[k];if(g.colWidth){j.style.width=g.colWidth+"px";}j.className=g.colCss||("col"+k);l.appendChild(j);}return l;}function I(g){var h=g._headerWidgets_,f=h&&h.length;if(f>0){var j;for(j=0;j<f;j++){h[j].destroy(true);}}}function A(j,f,i,l,g){var h=[],k=j.headerWidget;i=i?(" "+i):"";l=l||this._headerWidgets;g=g?(" "+g):' w="1"';h.push("<td"+i+">");if(f>0&&this.resizableColumns){h.push(O(f));}h.push('<div class="mstrmojo-DataGrid-headerText');h.push(j.headerCss?" "+j.headerCss:"");if(k){l.push(mstrmojo.hash.copy(k));h.push('"'+g+">");}else{h.push('">');}h.push(j.headerText||"&nbsp");h.push("</div>");h.push("</td>");return h.join("");}function a(f,n){var h,l,m,g,o,k,j=[];f=f||"_headerWidgets";n=n||"1";h=this[f];l=h.length;if(l>0){m=this.headerContainerNode.getElementsByTagName("div");g=mstrmojo.array.filter(m,function(i){return i.getAttribute("w")==n;});for(k=0;k<l;k++){h[k].placeholder=g[k].firstChild;h[k].dataGrid=this;o=mstrmojo.registry.ref(h[k]);o.render();j.push(o);}}this[f+"_"]=j;}mstrmojo.DataGrid=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._CanResizeColumn,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.DataGrid",banding:true,resizableColumns:true,columns:null,items:null,listMapper:mstrmojo.WidgetListMapperTable,lockHeader:false,contentWidth:"",renderHook:{},shouldDisableItem:function(){return false;},markupString:'<div id="{@id}" class="mstrmojo-DataGrid {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-DataGrid-headerContainer">{@headerHtml}</div><div class="mstrmojo-DataGrid-itemsScrollBox" style="position:relative;"><div class="mstrmojo-DataGrid-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild.firstChild;},dropCueNode:function(){return this.domNode.lastChild.lastChild;},headerContainerNode:function(){return this.domNode.firstChild;},headerRows:function(){return this.domNode.firstChild.firstChild.rows;},bodyRows:function(){return this.domNode.lastChild.firstChild.firstChild.rows;}},markupMethods:{oncontentWidthChange:function(){var g=this.contentWidth,h=this.headerContainerNode,f=this.itemsContainerNode;if(g&&h&&f){h.style.width=g;f.style.width=g;}},onlockHeaderChange:function(){mstrmojo.css.toggleClass(this.domNode,"lockHeader",this.lockHeader);},onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";}},setupScrollNodes:function M(){this.scrollNode=this.scrollboxNode;},itemFunction:function(h,f,g){var i=new mstrmojo.DataRow({columns:g.columns,data:h,disable:g.shouldDisableItem(h),idx:f,dataGrid:g,parent:g});return i;},preBuildRendering:function D(){var l=this.renderHook;if(l&&l.pre){l.pre.apply(this,[A]);}else{var g=this.columns,f=g.length,h=['<table class="mstrmojo-DataGrid-headerTable" cellspacing="0" cellpadding="0"><tr>'],k;this._headerWidgets=[];var j;for(j=0;j<f;j++){k=A.apply(this,[g[j],j]);h.push(k);}h.push("</tr></table>");this.headerHtml=h.join("");}if(this._super){this._super();}},postBuildRendering:function V(){if(this._super){this._super();}var h=this.renderHook;if(h&&h.post){h.post.apply(this,[J,a]);}else{a.apply(this);this.titleColGroup=J(this.columns);}var f=this.titleColGroup,m=f.cloneNode(true),j=this.headerContainerNode,l=j&&j.getElementsByTagName("table")[0],n=this.itemsContainerNode,k=this.scrollboxNode,i=this.domNode,g=n&&n.getElementsByTagName("table")[0];this.dataColGroup=m;if(l&&g){l.insertBefore(f,l.firstChild);g.insertBefore(m,g.firstChild);}if(this.lockHeader){k.style.height=i.offsetHeight-j.offsetHeight+"px";mstrmojo.dom.attachEvent(k,"scroll",function(o){j.style.left=-k.scrollLeft+"px";});}},refresh:function H(f){I(this);if(this._super){this._super(f);}},destroy:function d(f){I(this);this._super(f);},unrender:function U(k){var h=this._headerWidgets_,g=h&&h.length,f;if(g>0){var j;for(j=0;j<g;j++){f=h[j];if(f&&f.hasRendered){f.unrender(true);}}}this._super(k);}});mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Container");mstrmojo.DataRow=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DataRow",cssClass:"mstrmojo-DataRow",dataTextCSSClass:"mstrmojo-DataRow-text",columns:null,disable:false,markupMethods:{onselectedChange:function(){mstrmojo.css.toggleClass(this.domNode,"selected",this.selected);}},buildDom:function(){this.children=[];var m=document.createElement("tr"),q=this.data,t=this.idx,g=this.dataGrid,n=this.cssClass,v=this.columns,f=this.children,j=this.disable,h,r=-1,u,s;m.setAttribute("id",this.id);if(g.banding){n+=(t%2==1)?" odd":" even";}m.className=n+(mstrmojo.string.isEmpty(q[g.itemDisplayField||"n"])?" empty-row":"")+(" "+q[g.itemCSSField||"itemCss"]||"")+(j?" disabled":"");var l,p;for(l=0,p=v.length;l<p;l++){u=v[l];s=(u.dataWidgetBuilder&&u.dataWidgetBuilder(q))||u.dataWidget;h=document.createElement("td");if(u.applyStyle2Cell&&u.colCss){h.setAttribute("class",u.colCss);}m.appendChild(h);if(s){h.setAttribute("w","1");r++;f.push(mstrmojo.hash.copy(s,{slot:"slot"+r,data:q,idx:t,dataGrid:g}));}else{if(u.dataFunction){h.innerHTML=u.dataFunction(q,t,g);}else{var k=mstrmojo.string.htmlAngles(q[u.dataField||"n"])||"&nbsp",o=u.tooltip?' title="'+k+'"':"";h.innerHTML='<div class="'+this.dataTextCSSClass+'" '+o+">"+k+"</div>";}}}this.initChildren();m.mstrmojoId=this.id;return m;},buildRendering:function N(){this._super();var k=this.domNode.childNodes,f=k.length,j={},h=0,l,g;for(g=0;g<f;g++){l=k[g];if(l.getAttribute("w")=="1"){j["slot"+h]=l;h++;}}this.addSlots(j);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.fx","mstrmojo.TreeNode");var K=mstrmojo.dom,E={0:"closed",1:"opened",2:"leaf"},I=function(R,Q){var N=R.style,M,P,L,S,O;N.display="block";N.height="auto";M=R.offsetHeight;P=Q?M:0;L=Q?0:M;S=Q?"block":"none";N.overflow="hidden";O=new mstrmojo.fx.AnimateProp({target:R,props:{height:{start:L,stop:P,suffix:"px",fn:Math.round,ease:mstrmojo.ease.linear}},onEnd:function(){N.height="auto";N.display=S;},interval:30,duration:300});O.play();};mstrmojo.TreeBrowserNode=mstrmojo.declare(mstrmojo.TreeNode,null,{scriptClass:"mstrmojo.TreeBrowserNode",markupString:'<div id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,click,dblclick><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><img class="mstrmojo-TreeNode-checkBox" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><div class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</div></div>',markupSlots:mstrmojo.hash.copy({displayNode:function(){return this.domNode.firstChild;},checkBoxNode:function(){return this.domNode.firstChild.childNodes[1];}},mstrmojo.TreeNode.prototype.markupSlots),markupMethods:mstrmojo.hash.copy({onstateChange:function(L){this.stateNode.className="mstrmojo-TreeNode-state "+(E[this.state]||"closed");if(this.tree.anim&&this.contentRetrieved&&!L){I(this.itemsContainerNode,this.state===1);}else{this.itemsContainerNode.style.display=(this.state===1)?"block":"none";}}},mstrmojo.TreeNode.prototype.markupMethods),blockBegin:1,allowUnlistedValues:false,contentRetrieved:false,_set_items:function(N,M){var L=this._super(N,M);if(L&&this.tree.anim){I(this.itemsContainerNode,true);}return L;},onstateChange:function J(){var L=this.tree;if(!this.contentRetrieved&&(this.state==1)){this.set("items",[L.loadingItemCreaterFunc()]);L.getContent(this,this.blockBegin);}else{if((this.state==1)&&L.onNodeExpand){L.onNodeExpand(this);}if((this.state==0)&&L.onNodeCollapse){L.onNodeCollapse(this);}}},toggleState:function G(){if(this.state!==2){this.set("state",this.state===1?0:1);}},preclick:function H(L){K.clearBrowserHighlights(L.hWin);return false;},predblclick:function D(L){K.clearBrowserHighlights(L.hWin);return false;},premousedown:function B(M){var R=mstrmojo.dom,O=mstrmojo.dom.eventTarget(M.hWin,M.e),L=this.tree,N=(this.state==2),Q=R.contains(this.itemsContainerNode,R.eventTarget(M.hWin,M.e),true,this.domNode),P=(L.branchClickPolicy==mstrmojo.TreeBrowserEnum.BRANCH_POLICY_TOGGLE);if((this.isSpecialNode()||!(O==this.checkBoxNode||((O==this.textNode||O==this.displayNode)&&(N||!P))))&&!this.draggable){R.stopPropogation(M.hWin,M.e);}if((O==this.stateNode)||((O==this.textNode||O==this.displayNode)&&!N&&P)){if(!N){this.toggleState();}}else{if(O==this.checkBoxNode||Q){if(this._super){this._super(M);}}else{this.handleNodeClicked();}}},isSpecialNode:function C(){var L=this.data&&this.data.st;return(L<0);},handleNodeClicked:function F(){var L=this.tree,M=this.parent,N=this.data;switch(N&&N.st){case"-4":mstrmojo.css.addClass(this.textNode,["loading"]);L.getContent(M,M.blockBegin-L.blockCount);break;case"-3":mstrmojo.css.addClass(this.textNode,["loading"]);L.getContent(M,M.blockBegin+L.blockCount);break;case"-1":case"-2":break;default:if(L.handleNodeClicked){L.handleNodeClicked(N);}}},init:function(L){this._super(L);this.set("state",this.tree.isBranch(this.data)?0:2);},postBuildRendering:function A(){if(this._super){this._super();}var L=function(M){K.preventDefault(window,M||window.event);return false;};K.attachEvent(this.domNode,"mousedown",L);if(this.isSpecialNode()||this.tree.noCheckBox){this.checkBoxNode.style.display="none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(a,X){var Z=this.list,V=Z.selectedIndex,U=Z.items.length,W=a?U-1:0;if(V===W){Z.clearSelect();return ;}if(V===null||V<0){V=a?0:U-1;}else{V+=a?1:-1;}if(X){var Y=Z.items[V];while(Y&&Y.type==="dummy"){if(V===W){Z.clearSelect();return ;}V+=a?1:-1;Y=Z.items[V];}}Z.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(U){if(this.suggestionShown){this._lastOpened.nextHighlight(U);}},preHighlight:function H(U){if(this.suggestionShown){this._lastOpened.preHighlight(U);}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if((j||j==="")&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(U){D.call(this,true,U);},preHighlight:function(U){D.call(this,false,U);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo._HasSuggestion");var F=-1,E=0,D=1;mstrmojo._ValidateSuggestions=mstrmojo.provide("mstrmojo._ValidateSuggestions",mstrmojo.hash.copy(mstrmojo._HasSuggestion,{_mixinName:"mstrmojo._ValidateSuggestions",itemValidationField:"did",verifyObject:function C(J,H){var M=this.candidates,L;if(M){var I=M.items,G=mstrmojo.array.find(I,this.itemValidationField,H.data[this.itemValidationField]);G=G>-1?G:mstrmojo.array.find(I,this.itemField,J);if(G>-1){H.updateData(I[G]);L=E;}else{if(M.isComplete){L=D;}}}if(L!==undefined){return L;}var K=this._vqueue=this._vqueue||[];K.push({pattern:J,id:H.data[this.itemIdField]});if(!this._vInProgress){this.verifyNextCandidate();}return F;},verifyNextCandidate:function B(){var G=this._vqueue;if(!G||G.length===0){this._vInProgress=false;return ;}this.verifyCandidate(G.shift());},verifyCandidate:function A(H){var G=this;this._vInProgress=true;this.getCandidatesThroughTaskCall({pattern:H.pattern,blockBegin:1,blockCount:G.noCache?-1:this.suggestCount,isVerify:true},{success:function(N){var K=G.ctxtBuilder.itemWidgets,J=K&&K.length,O,M;for(M=0;M<J;M++){if(K[M].data[G.itemIdField]===H.id){O=K[M];break;}}if(!O){return ;}var L=N.items;if(L&&L.length===1){O.updateData(L[0]);}else{if(L&&L.length>1){var I=mstrmojo.array.find(L,"did",O.data.did);if(I>-1){O.updateData(L[I]);}else{O.set("state",D);}}else{O.set("state",D);}}},failure:function(I){mstrmojo.alert(I.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){G.verifyNextCandidate();}});}}));mstrmojo._ValidateSuggestions.ENUM_STATES={UNDETERMINED:F,VALID:E,INVALID:D};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.WidgetTree","mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowserSelector");mstrmojo.TreeBrowserEnum={};var I=mstrmojo.TreeBrowserEnum;I.BRANCH_POLICY_TOGGLE="toggle";I.BRANCH_POLICY_SELECT="select";mstrmojo.TreeBrowser=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.TreeBrowser",cssClass:"mstrmojo-TreeBrowser",browserNodeClass:mstrmojo.TreeBrowserNode,blockCount:30,noCheckBox:false,selectionAcrossBranch:true,branchClickPolicy:I.BRANCH_POLICY_TOGGLE,contentRetrieved:false,listSelector:mstrmojo.TreeBrowserSelector,handleNodeClicked:function(J){},getContentThroughTaskCall:function H(K,J){},isBranch:function F(J){},item2textCss:function C(J){return{"-1":"failed","-2":"loading","-3":"next","-4":"prev"}[J.st]||"";},failItemCreaterFunc:function(){return{n:"Loading Failed!",did:"-1",tp:"-1",st:"-1"};},loadingItemCreaterFunc:function(){return{n:mstrmojo.desc(5674,"Loading..."),did:"-2",tp:"-2",st:"-2"};},nextItemCreaterFunc:function(J){return{n:mstrmojo.desc(4507,"Next ##  item(s)...").replace("##",J?Math.min(J,this.blockCount):this.blockCount),did:"-3",tp:"-3",st:"-3"};},prevItemCreaterFunc:function(){return{n:mstrmojo.desc(4508,"Previous ##  item(s)...").replace("##",this.blockCount),did:"-4",tp:"-4",st:"-4"};},updateTreeContent:function(K,M){K.contentRetrieved=true;var L=M[K.itemChildrenField]||[],J=K.tree||K,O=M.bc,N=M.sz,P=M.bb;if(O!==-1){if(P+O<=N){L.push(J.nextItemCreaterFunc(N-P-O+1));}if((P-O)>-1){L.unshift(J.prevItemCreaterFunc());}}K.blockBegin=P;J.initializing=true;K.clearSelect(false);K.set("items",L);K.setSelectedItems(J.getTotalSelections(),true);J.initializing=false;if(J.onNodeExpand){J.onNodeExpand(K);}},getContent:function(K,O){var L=(K===this),J=this,P=function(Q){if(L){mstrmojo.css.removeClass(J.domNode,["loading"]);}J.updateTreeContent(K,Q);},M=function(Q){K.contentRetrieved=true;K.set("items",[J.failItemCreaterFunc()]);},N={success:P,failure:M};if(L){mstrmojo.css.addClass(J.domNode,["loading"]);}this.getContentThroughTaskCall({isRoot:L,data:K.data,blockBegin:L?0:(O||K.blockBegin),blockCount:J.blockCount},N);},postBuildRendering:function A(){this._super();if(!this.contentRetrieved){var J=this;setTimeout(function(){J.getContent(J);},0);}},itemFunction:function G(N,K,L){var J=L.tree||L,M=new J.browserNodeClass({data:N,state:0,parent:L,tree:J,multiSelect:L.multiSelect,text:N[L.itemDisplayField],textCssClass:J.item2textCss(N),items:N[L.itemChildrenField],itemIdField:L.itemIdField,itemDisplayField:L.itemDisplayField,itemIconField:L.itemIconField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction,listSelector:L.listSelector});return M;},clearTreeSelect:function E(){if(!this.selectionAcrossBranch){this._super();}else{var L=this._selectionParentNode,J=L&&L.length,K;for(K=0;K<J;K++){L[K].clearSelect();}this._selectionParentNode=null;this._totalSelections=null;}},onnodechange:function D(T){if(this.initializing){return ;}if(!this.selectionAcrossBranch){this._super(T);}else{this._totalSelections=this._totalSelections||[];this._selectionParentNode=this._selectionParentNode||[];var R=this._totalSelections,J=this._selectionParentNode,S=T.added,P=T.removed,Q=[],L=[],K=T.src,N,M,O,U;J.push(K);for(N=0,O=P&&P.length;N<O;N++){L.push(K.items[P[N]]);}mstrmojo.array.removeItems(R,"did",L);for(M=0,U=S&&S.length;M<U;M++){Q.push(K.items[S[M]]);}this._totalSelections=R.concat(Q);}},getTotalSelections:function B(){if(this.selectionAcrossBranch){return this._totalSelections||[];}var J=this.selectionParentNode;return J&&J.getSelectedItems();}});}());(function(){mstrmojo.requiresCls("mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowser","mstrmojo.ACL.UserDataService");mstrmojo.ACL.UserTreeBrowser=mstrmojo.declare(mstrmojo.TreeBrowser,null,{scriptClass:"mstrmojo.ACL.UserTreeBrowser",itemIdField:"did",branchClickPolicy:mstrmojo.TreeBrowserEnum.BRANCH_POLICY_SELECT,getACLUserDataService:function D(){return mstrmojo.ACL.UserDataService;},getContentThroughTaskCall:function C(G,E){var F=this.getACLUserDataService();E.failure=mstrmojo.func.composite([function(H){if(H.getResponseHeader){mstrmojo.alert(H.getResponseHeader("X-MSTR-TaskFailureMsg"));}},E.failure]);if(G.isRoot){F.getTopLevelGroups(G,E);}else{F.getMembers(G,E);}},isBranch:function B(E){return E.isGroup;},item2textCss:function A(E){return(this._super&&this._super(E))||"mstrmojo-ACLInputBox-user "+{8704:"u",8705:"ug"}[E.st];}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo._ValidateSuggestions","mstrmojo.WidgetList","mstrmojo.Editor","mstrmojo.LegacySuggestionList");mstrmojo.Enum_OIB_States=mstrmojo.hash.copy(mstrmojo._ValidateSuggestions.ENUM_STATES,{EDITING:2,ADDING:3,EMPTY:4});mstrmojo.Enum_OIB_States_CSS=(function(){var AC=mstrmojo.Enum_OIB_States,AB={},AD;for(AD in AC){if(AC.hasOwnProperty(AD)){AB[String(AC[AD])]=AD;}}return AB;}());var Q=mstrmojo.dom,S=mstrmojo.hash,a=mstrmojo.Enum_OIB_States,I=0,c="_did_",x=mstrmojo.Enum_Keys,z=80,U=200;function X(){return(mstrApp&&mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay())?mstrApp.searchAutoCompleteDelay():U;}function P(){return I++;}function h(AB){return(AB&&AB.state===a.ADDING);}function p(AB){var AC={n:AB||"",state:a.EMPTY};AC[c]=-2;return AC;}function O(AB){return(AB&&AB.state===a.EMPTY);}function t(AC){var AD=AC.items,AB=AD&&AD.length;if(!AB){return true;}return(AB===1&&h(AD[0]))||(AB===2&&O(AD[0])&&h(AD[1]));}function l(){var AC=this.ctxtBuilder.itemWidgets,AB=AC[AC.length-1];if(AB&&AB.isAdding){var AD=this;Q.attachEvent(AB.domNode,"click",function(){AD.editingIdx=null;});return AB;}return null;}function L(){var AB=this.editingIdx;if(AB!==null){return this.ctxtBuilder.itemWidgets[AB];}return l.call(this);}function D(){this.isActive=false;var AC=this.emptyText||"",AD=this.items;if(t(this)&&!O(AD[0])&&(AC.length>0)){this.add([p(AC)],0);var AE=this.ctxtBuilder.itemWidgets[0];AE.set("shouldEllipsize",true);AE.doEllipsize();}var AB=L.call(this);if(AB){if(h(AB)&&this.showEmptyItem){AB.domNode.style.visibility="hidden";}AB.blur();}Q.detachEvent(document.body,"mousedown",this._mousedownHandler);if(this.tabNavigable){Q.detachEvent(AB.inputNode,"keydown",this._tabKeyHander);}}function N(){if(!this.enabled){return ;}this.isActive=true;if(O(this.items[0])){this.remove(0);}var AB=L.call(this);if(AB){if(h(AB)&&!this.isFull){AB.domNode.style.display="block";AB.domNode.style.visibility="visible";}this.scrollTo(AB.data);AB.focus();}Q.attachEvent(document.body,"mousedown",this._mousedownHandler);if(this.tabNavigable){Q.attachEvent(AB.inputNode,"keydown",this._tabKeyHander);}}mstrmojo.ObjectInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._ValidateSuggestions],{scriptClass:"mstrmojo.ObjectInputBox",cssClass:"mstrmojo-ObjectInputBox",emptyText:"",showEmptyItem:true,items:null,itemField:"n",dynamicVerify:true,suggestCount:10,candidates:null,makeObservable:true,renderOnScroll:false,editingIdx:null,isActive:false,maxObjectCount:null,isFull:false,suggestionListClass:"mstrmojo.LegacySuggestionList",acptSugItemOnly:false,useKeyDelay:false,showSuggestionOnEdit:true,tabNavigable:false,getSearchPattern:function(){var AB=L.call(this);if(AB){return AB.getSearchPattern();}return"";},getSuggestionTarget:function m(){return this.suggestTarget;},onsuggestTargetChanged:function o(AB){this._request_pattern=null;},getSuggestionPos:function d(){return this._pop_cfg;},onSuggestionItemSelect:function u(AB){if(this.suggestTarget){this.suggestTarget.setItem(AB[this.itemField],AB,false);}this.hideSuggestion();this.closePopup();},hideEditButton:function(AB){return !!this.noEditButton;},_set_items:function k(AG,AD){AD=mstrmojo.hash.clone(AD)||[];var AF=this.maxObjectCount;this.set("isFull",(AF&&AD.length>=AF));if(AD.length===0){var AC=this.emptyText||"";if(AC.length>0){AD.push(p(AC));}}var AE={n:"",state:a.ADDING};AE[c]=-1;AD.push(AE);var AB=AD[AD.length-1];if(AB&&h(AB)&&this.maxObjectCount&&(this.getSelectedObjects().length>=this.maxObjectCount)){this.set("isFull",true);}this.itemIdField=c;return this._super(AG,AD);},add:function E(AC,AB){var AD=l.call(this);if(!this.maxObjectCount||this.getSelectedObjects().length<this.maxObjectCount){this._super(AC,AB);}if(!t(this)&&O(this.items[0])){this.remove(0);}if(AD){AD.adjustInputWidth();if(this.maxObjectCount&&(this.getSelectedObjects().length===this.maxObjectCount)){this.set("isFull",true);AD.domNode.style.display="none";}else{AD.domNode.style.display=this.showEmptyItem?"none":"";}}},remove:function b(AB){this._super(AB);var AC=l.call(this);if(AC){if(this.maxObjectCount&&(this.getSelectedObjects().length<this.maxObjectCount)){this.set("isFull",false);}AC.adjustInputWidth();}},preBuildRendering:function(){if(this.items==null||this.items.length==0){this.set("items",[]);}if(this._super){this._super();}},postBuildRendering:function Z(){this._super();var AC=this,AB=l.call(AC);if(AB&&(this.showEmptyItem||this.isFull)){AB.domNode.style.display="none";}this._clickHandler=function(){N.call(AC);};this._mousedownHandler=function(AD){if(!AC.isActive||AC.browserShown){return ;}var AE=Q.eventTarget(self,AD);if(AE&&AE.parentNode&&!Q.contains(L.call(AC).domNode,AE,false,document.body)&&!Q.contains(AC.suggestionPopup.domNode,AE,false,document.body)){D.call(AC);}};if(this.tabNavigable){this._tabKeyHander=function(AD){var AE=parseInt(AD.keyCode||AD.charCode,10);if(AE===x.TAB){if(!AC.isActive||AC.browserShown){return ;}D.call(AC);}};}Q.attachEvent(this.domNode,"click",this._clickHandler);},nextId:P,item2textCss:function M(AB){return AB.cssClass||"";},itemFunction:function G(AD,AB,AC){AD[AC.itemIdField]=P();var AE=new mstrmojo.ObjectItem({parent:AC,itemField:AC.itemField,cssClass:AC.item2textCss(AD),data:AD,showSuggestionOnEdit:this.showSuggestionOnEdit,enabled:AC.enabled});AC.attachEventListener4ItemWidget(AE,AC);return AE;},attachEventListener4ItemWidget:function i(AF,AD){var AC=["ItemEditBegin","ItemEditEnd","ItemDeletePrev","ItemDelete","ItemAdd","SuggestionOn","SuggestionOff","ItemEditing"],AB=AC.length,AE;for(AE=0;AE<AB;AE++){AF.attachEventListener(AC[AE],AD.id,"_itemChangeHandler");}return AF;},getSelectedObjects:function j(){if(t(this)){return[];}var AB=this.items,AC=AB.length-1;if((AC>-1)&&h(AB[AC])){return AB.slice(0,AC);}return AB.concat();},isValid:function C(){var AC=this.ctxtBuilder.itemWidgets,AB=AC&&AC.length,AD;for(AD=0;AD<AB;AD++){if(!AC[AD].isValid()){return false;}}return true;},isEmpty:function V(){return t(this);},_itemChangeHandler:function(AE){var AG=AE.name,AH=AE.d,AC,AB=this.items.length,AD;switch(AG){case"ItemEditBegin":if(this.editingIdx!==null){AD=L.call(this);if(AD){AD.blur();}}AC=this.itemIndex(AH);this.editingIdx=AC;N.call(this);break;case"ItemEditEnd":this.editingIdx=null;if(AE.deactivate){D.call(this);}else{N.call(this);}AD=l.call(this);if(AD){AD.adjustInputWidth();}break;case"ItemDelete":if(this.editingIdx!==null){AD=L.call(this);if(AD){AD.blur();}this.editingIdx=null;}AC=this.itemIndex(AH);this.remove(AC);if(!AE.deactivate){this.editingIdx=null;N.call(this);}else{if(!this.isActive){D.call(this);}else{N.call(this);}}break;case"ItemDeletePrev":if(AB>1){this.remove(AB-2);}break;case"ItemAdd":var AF=S.copy(AE.d);this.add([AF],AB-1);if(AE.deactivate){D.call(this);}else{N.call(this);}break;case"SuggestionOn":this.set("suggestTarget",AE.target);this._pop_cfg={target:AE.target,left:AE.l,top:AE.t,zIndex:this.zIndex?this.zIndex:100};this.showSuggestion(AE.pattern);break;case"SuggestionOff":this.set("suggestTarget",null);this.hideSuggestion();break;}if(this.onitemchange&&(AG==="ItemEditEnd"||AG==="ItemAdd"||AG==="ItemDelete"||AG==="ItemDeletePrev"||AG==="ItemEditing")){this.onitemchange();}},unrender:function B(AC){var AB=this.suggestionPopup;if(AB.hasRendered){AB.unrender(false);}if(this._super){this._super(AC);}},destroy:function s(AC){var AB=this.suggestionPopup;if(AB&&AB.hasRendered){AB.destroy(false);}if(this._super){this._super(AC);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ObjectInputBox,{onenabledChange:mstrmojo.Widget.enabledMarkupMethod});mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasEllipsis");var q="mstrmojo-ObjectItem-text";mstrmojo.ObjectItem=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasEllipsis],{scriptClass:"mstrmojo.ObjectItem",markupString:'<div id={@id} class="mstrmojo-ObjectItem" style="{@cssText}"><div class="mstrmojo-ObjectItem-displayNode"><span title=" {@en@title}" class="'+q+' {@cssClass}"></span><img class="mstrmojo-ObjectItem-edit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1088,"Edit")+'" onclick="mstrmojo.all[\'{@id}\'].edit()"/><img class="mstrmojo-ObjectItem-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(629,"Delete")+'" onclick="mstrmojo.all[\'{@id}\'].del(arguments[0])"/></div><div class="mstrmojo-ObjectItem-editNode"><input type="text" class="mstrmojo-ObjectItem-input" mstrAttach:keyup,keydown/></div></div>',markupSlots:{displayNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.firstChild.firstChild;},editButtonNode:function(){return this.domNode.firstChild.childNodes[1];},delButonNode:function(){return this.domNode.firstChild.lastChild;},inputNode:function(){return this.domNode.childNodes[1].firstChild;}},markupMethods:{oncssClassChange:function(){this.textNode.className=q+" "+this.cssClass;},onstateChange:function(){var AD=this.state,AC=mstrmojo.Enum_OIB_States_CSS[AD],AB=this.domNode;if(AD===a.EMPTY){AB.innerHTML=this.enabled?'<div class="mstrmojo-ObjectItem-emptyText">'+this.text+"</div>":"";}else{if(AD===a.EDITING){this.reduceWidth();}}AB.className="mstrmojo-ObjectItem "+AC;this.updateButtonsVisibility(this.data);},ontextChange:function(){this.inputNode.value=this.text;this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);}},reduceWidth:function(){var AB=Math.round(this.displayNode.clientWidth);this.editNode.style.width=AB-4+"px";this.inputNode.style.width=AB-9+"px";},updateButtonsVisibility:function AA(){if(this.parent.hideEditButton(this.data)){this.editButtonNode.style.display="none";}},state:a.VALID,onstateChange:function f(AB){this.data.state=this.state;},ontextChange:function H(AB){this.data[this.itemField]=this.text;},onfocus:function v(){N.call(this.parent);},updateData:function F(AB){S.copy(AB,this.data);this.set("state",a.VALID);this.set("text",this.data[this.itemField]);this.set("cssClass",this.parent.item2textCss(this.data));},init:function w(AC){this._super(AC);var AE=this.data,AB=AE.state,AD=this.parent;AB=this.initState();this.cssClass=AD.item2textCss(AE);this.text=AE[this.itemField];this.state=AB;this.isAdding=h(AE);this.useRichTooltip=true;this.title=this.text;},initState:function K(){var AC=this.parent,AD=this.data,AB=AD.state;if(AD&&AD.did){AD.state=a.VALID;return AD.state;}if(typeof AB==="undefined"){AB=AC.dynamicVerify?AC.verifyObject(AD[this.itemField],this):a.UNDETERMINED;AD.state=AB;}return AB;},isValid:function C(){var AB=parseInt(this.state,10);return(AB!==a.INVALID&&AB!==a.UNDETERMINED);},adjustInputWidth:function A(){if(this.isAdding){var AE=this.inputNode.style;AE.width=z+"px";var AD=this.domNode.parentNode,AB=AD.parentNode.offsetWidth,AC=Math.max(AB-AD.offsetLeft-20,z);if(!isNaN(AC)){AE.width=AC+"px";}}},blur:function T(){this.hideSuggestion();if(!this.isActive){return ;}this.isActive=false;var AD=this.inputNode,AB=AD.value,AC=this.parent;window.setTimeout(function(){try{AD.blur();}catch(AE){}},0);if(!AB){return ;}if(AC.acptSugItemOnly&&this._tWas_){this.set("text",AB);this.set("text","");this._tWas_=null;return ;}this.setItem(AB,null,true);},focus:function r(){var AC=this.inputNode,AB=this.isActive;window.setTimeout(function(){try{AC.focus();if(AC.createTextRange&&!AB){var AE=AC.createTextRange(),AD=AC.value.length;AE.move("character",AD);AE.select();}else{if(AC.setSelectionRange&&!AB){var AD=AC.value.length;AC.setSelectionRange(AD,AD);}}}catch(AF){}},0);this.isActive=true;},prekeydown:function J(AB){var AD=this.inputNode.value,AC=parseInt(AB.e.keyCode||AB.e.charCode,10),AF=this.parent;if(!AD){return ;}if(AC===x.TAB||AC===x.ENTER){if(AC===x.ENTER){Q.preventDefault(AB.hWin,AB.e);}var AE=AF.getSelected();if(AE&&AE.did){AF.handleSuggestionItemSelect(AE);}else{this.hideSuggestion();if(!AF.acptSugItemOnly){this.setItem(AD,null,false);}else{this.set("text",AD);this.set("text","");}}}else{if(AC===x.DOWN_ARROW){if(!AF.noCache&&!AF.suggestionShown){this.showSuggestion(AD);AF.preHighlight();}AF.nextHighlight();}else{if(AC===x.UP_ARROW){AF.preHighlight();}}}},prekeyup:function y(AB){var AD=this.inputNode.value,AC=parseInt(AB.e.keyCode||AB.e.charCode,10),AG=this.isAdding,AF=this.parent;if(!AD){if(AG){if(AC===x.BACKSPACE&&!this._tWas_){this.raiseEvent({name:"ItemDeletePrev"});Q.preventDefault(AB.hWin,AB.e);}this._tWas_=null;}else{this.raiseEvent({name:"ItemDelete",d:this.data});}this.hideSuggestion();return ;}if(AC===x.ESCAPE||AC===x.TAB){this.hideSuggestion();if(AF.acptSugItemOnly){this.set("text",AD);this.set("text","");this._tWas_=null;return ;}}else{if(this._tWas_!==AD){this.textChanged=true;this.raiseEvent({name:"ItemEditing",d:this.data});if(AF.useKeyDelay){window.clearTimeout(this._timerID);var AE=this;this._timerID=window.setTimeout(function(){var AH=AE.inputNode.value;if(AH){AE.showSuggestion(AH);}AE._timerID=null;},X());}else{this.showSuggestion(AD);}}}this._tWas_=AD;},setItem:function(AB,AD,AC){var AE=this.isAdding;AC=AC||false;this.set("text",AB);if(AE){this.setItem_Adding(AB,AD,AC);}else{this.setItem_Editing(AB,AD,AC);}this._tWas_=null;},setItem_Adding:function(AB,AD,AC){this.set("text","");if(!AD){AD={};AD[this.itemField]=AB;}else{AD.state=a.VALID;}this.raiseEvent({name:"ItemAdd",d:AD,deactivate:AC});},setItem_Editing:function(AB,AD,AC){var AE=this.parent;this.set("text",AB);if(AD){this.updateData(AD);}else{if(this.textChanged){var AF={};AF[c]=this.data[c];delete this.data.did;this.data=AF;this.textChanged=false;}this.set("state",AE.verifyObject(AB,this));this.set("cssClass",AE.item2textCss(this.data));}this.isActive=false;this.raiseEvent({name:"ItemEditEnd",d:AD,deactivate:AC});},getSearchPattern:function W(){return(this.inputNode?this.inputNode.value:"");},showSuggestion:function n(AB){var AC=mstrmojo.dom.position(this.domNode,true);this.raiseEvent({name:"SuggestionOn",l:Math.round(AC.x)+"px",t:Math.round(AC.y+AC.h)+"px",pattern:AB,target:this});},hideSuggestion:function g(){this.raiseEvent({name:"SuggestionOff"});},del:function R(AB){AB=AB||self.event;Q.stopPropogation(self,AB);this.raiseEvent({name:"ItemDelete",d:this.data,deactivate:true});if(this.useRichTooltip&&this.hideTooltip){this.hideTooltip();}},edit:function Y(){this.set("state",a.EDITING);this.raiseEvent({name:"ItemEditBegin",d:this.data});if(this.showSuggestionOnEdit){this.showSuggestion(this.text);}},doEllipsize:function e(){if(!this.shouldEllipsize){return ;}var AC=this.maxItemWidth,AB;if(AC){this.domNode.style.maxWidth=AC;switch(parseInt(this.state,10)){case a.VALID:case a.UNDETERMINED:case a.INVALID:AB=this.textNode;break;case a.EMPTY:AB=this.domNode.firstChild;break;}if(AB){this.set("richTooltip",{content:this.text,contentNodeCssClass:"sp-tooltip",posType:mstrmojo.tooltip.POS_TOPLEFT,left:0,top:30,refNode:this.domNode});mstrmojo.css.addClass(AB,"truncated");}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ObjectInputBox","mstrmojo.ACL.UserDataService");mstrmojo.ACL.UserInputBox=mstrmojo.declare(mstrmojo.ObjectInputBox,null,{suggestionPopupCssClss:"mstrmojo-ACLInputBox-suggest",blockCount:10,useKeyDelay:true,getACLUserDataService:function C(){return mstrmojo.ACL.UserDataService;},item2textCss:function A(D){return(this._super&&this._super(D))||"mstrmojo-ACLInputBox-user "+{8704:"u",8705:"ug"}[D.st]||"";},getCandidatesThroughTaskCall:function B(E,D){this.getACLUserDataService().searchUserCandidates(E.pattern,!E.isVerify,E.blockCount,D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.HTMLButton","mstrmojo.HBox","mstrmojo.List","mstrmojo.Label","mstrmojo.ListMapperHoriz","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo.TristateCheckBox","mstrmojo.Pulldown","mstrmojo.ACL.UserTreeBrowser","mstrmojo.DataGrid","mstrmojo.DropDownButton","mstrmojo.ListBox","mstrmojo.DivItemRenderer","mstrmojo.VBox","mstrmojo.Box","mstrmojo.ACL.UserInputBox","mstrmojo.Editor","mstrmojo.ACL.UserDataService","mstrmojo.MouseOverContainer");var G=[1,4,8,16,32,64,128],M=[mstrmojo.desc(1825,"Browse"),mstrmojo.desc(8078,"Read"),mstrmojo.desc(8079,"Write"),mstrmojo.desc(629,"Delete"),mstrmojo.desc(8080,"Control"),mstrmojo.desc(8081,"Use"),mstrmojo.desc(8082,"Execute")],K=["B","R","W","D","C","U","E"];function B(U){var S=[],V=Math.floor(U/1000),T=U%1000,Q=G,O=Q.length,R,P;for(P=0;P<O;P++){S.push(M[P]);S.push(" ");if((T&Q[P])>0){S.push(mstrmojo.desc(8083,"Granted"));}else{if((V&Q[P])>0){S.push(mstrmojo.desc(8084,"Denied"));}else{S.push(mstrmojo.desc(959,"Default"));}}S.push(",");}R=S.join("");return R.substring(R,R.length-1);}function D(U){var S=[],T=U%1000,Q=G,O=Q.length,R,P;for(P=0;P<O;P++){if((T&Q[P])>0){S.push(K[P]);S.push(",");}}R=S.join("");return R.substring(R,R.length-1);}function J(O){return{"253000":255000,"253":255,"221":223,"197":199,"69":71}[O]||O;}function A(O){return{"253000":255000,"253":255,"32221":223,"56197":199}[O]||O;}function N(Q,R){var S=Q.items,P=mstrmojo.array.find(S,Q.itemIdField,R),U=Q.customItem,O=S.length-2;if(P===-1){var T={n:D(R),rgt:R};if(U){S.splice(O,1);}O=S.length-1;S.splice(O,0,T);Q.customItem=T;}else{if(U&&P!==O){S.splice(O,1);Q.customItem=null;}}Q.set("title",B(R));Q.value=R;}function E(O){return{"776":[{n:mstrmojo.desc(8085,"Consume"),rgt:71},{n:mstrmojo.desc(531,"Add"),rgt:199},{n:mstrmojo.desc(8086,"Collaborate"),rgt:223},{n:mstrmojo.desc(8087,"Full control"),rgt:255},{n:mstrmojo.desc(8088,"Denied all"),rgt:255000},{n:mstrmojo.desc(8089,"Custom ..."),rgt:-1}],"779":[{n:mstrmojo.desc(8085,"Consume"),rgt:71},{n:mstrmojo.desc(531,"Add"),rgt:199},{n:mstrmojo.desc(8086,"Collaborate"),rgt:223},{n:mstrmojo.desc(8087,"Full control"),rgt:255},{n:mstrmojo.desc(8088,"Denied all"),rgt:255000},{n:mstrmojo.desc(8089,"Custom ..."),rgt:-1}]}[O]||[{n:mstrmojo.desc(8090,"View"),rgt:199},{n:mstrmojo.desc(767,"Modify"),rgt:223},{n:mstrmojo.desc(8087,"Full control"),rgt:255},{n:mstrmojo.desc(8088,"Denied all"),rgt:255000},{n:mstrmojo.desc(8089,"Custom ..."),rgt:-1}];}function H(O){return(O&&O.t===8);}function F(U){var T=U.acls,O=U.inhs,S=[],W,Q,V,P,R;if(H(U)){T=T.concat(mstrmojo.hash.valarray(O));}for(P=0,R=T.length;P<R;P++){W=T[P];V=W.rgt;if(V>1000){Q=mstrmojo.hash.copy(W);Q.den=true;Q.rgt=Math.floor(V/1000);S.push(Q);}if((V%1000)>0){Q=mstrmojo.hash.copy(W);Q.den=false;Q.rgt=V%1000;S.push(Q);}}U.acls=S;return U;}function C(P){var O={isSerializable:function(S,R,Q){switch(S){case"did":case"rgt":case"n":case"acls":case"t":case"st":case"inh":case"den":return true;}return false;},getArrItemName:function(S,Q,R){if(S==="acls"){return"acl";}},convertBoolean:true};return mstrmojo.string.json2xml("oi",P,O);}function I(R,Q){var P=R&&R.oi,O;if(P){P=F(P);O=C(P);var S={taskId:"saveObjectACL",objectXML:O,objectType:P.t,objectID:P.did};mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(T){if(Q){if(R.postSaveACL){R.postSaveACL(true);}R.close();}},failure:function(T){mstrmojo.alert(T.getResponseHeader("X-MSTR-TaskFailureMsg"));if(Q){if(R.postSaveACL){R.postSaveACL(false);}R.close();}}},S);}}function L(V){var a=V.aclList,b=V.objectInputer,W=V.rightPulldown,R=b.getSelectedObjects(),S=R.length,X=[],Q,Z=W.value,P,Y,O;if(!b.isValid()){mstrmojo.alert(mstrmojo.desc(9048,"Some users/groups do not exist. Please remove them in order to proceed."),null,V.alertTitle);return false;}for(P=0;P<S;P++){Q=R[P];Y=mstrmojo.array.find(a.items,"did",Q.did);if(Y!==-1){O=a.items[Y];if(V.uneditableRights[O.rgt]){continue;}}X.push(new mstrmojo.Obj({n:Q.n,did:Q.did,st:Q.st,rgt:Z,newItem:true}));}if(X.length>0){var U=mstrmojo.array.findMulti(a.items,"did",X);if(U.count){var T=U.indices.concat().sort(mstrmojo.array.numSorter).slice(0,U.count);for(P=T.length-1;P>-1;P--){a.remove(T[P]);}}a.add(X);V.set("hasChanged",true);}b.set("items",[]);V.set("inEditMode",false);return true;}mstrmojo.ACL.ACLEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.ACL.ACLEditor",cssClass:"mstrmojo-ACLEditor",zIndex:10,help:"sharing_dialog_box.htm",inEditMode:false,hasChanged:false,showButtonText:true,showObjectNameOnTitle:true,uneditableRights:{},defaultRight:223,viewOnlyMode:false,userSelectorTitle:mstrmojo.desc(8091,"User/User Group Browser"),userSelector:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-UserEditor",help:"user_group_browser.htm",onClose:function(){this.userBrowser.clearTreeSelect();},children:[{scriptClass:"mstrmojo.ACL.UserTreeBrowser",alias:"userBrowser",anim:true,selectionAcrossBranch:true,multiSelect:true},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-OK",text:mstrmojo.desc(1442,"OK"),onclick:function(P){var O=this.parent.parent,T=O.opener,S=T.objectInputer,R=O.userBrowser,Q=R.getTotalSelections();if(Q&&Q.length>0){S.add(Q,S.items.length-1);T.set("inEditMode",true);}O.close();},preBuildRendering:function(){if(!this.parent.parent.opener.showButtonText){this.set("text","");}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-Cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(O){this.parent.parent.close();},preBuildRendering:function(){if(!this.parent.parent.opener.showButtonText){this.set("text","");}}}]}],onOpen:function(){this.set("title",this.opener.userSelectorTitle);}},customACL:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(8092,"Custom Permission Level"),cssClass:"mstrmojo-CustomACLEditor",help:"Custom_Permission_Level_dialog_box.htm",onOpen:function(){var U=this.rgt,V=Math.floor(U/1000),T=U%1000,Q=this.children,R,S,P,O;for(P=0,O=Q.length;P<O;P++){R=Q[P];S=R.right;if(this.twoStates){R.set("grayed",false);R.set("checked",false);}else{R.set("grayed",true);R.set("checked",true);}if((V&S)>0){R.set("checked",false);R.set("grayed",false);}if((T&S)>0){R.set("checked",true);R.set("grayed",false);}}},getACLValue:function(){var S=0,T=0,Q=this.children,R,P,O;for(P=0,O=Q.length;P<O;P++){R=Q[P];if(R.grayed||!R.right){continue;}if(R.checked){S+=R.right;}else{T+=R.right;}}return T*1000+S;},children:[{scriptClass:"mstrmojo.TristateCheckBox",alias:"browse",right:1,text:mstrmojo.desc(1825,"Browse")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"read",right:4,text:mstrmojo.desc(8078,"Read")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"write",right:8,text:mstrmojo.desc(8079,"Write")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"delete",right:16,text:mstrmojo.desc(629,"Delete")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"control",right:32,text:mstrmojo.desc(8080,"Control")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"use",right:64,text:mstrmojo.desc(8081,"Use")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"execute",right:128,text:mstrmojo.desc(8082,"Execute")},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-OK",text:mstrmojo.desc(1442,"OK"),onclick:function(O){var P=this.parent.parent;if(P.onOK){P.onOK();}P.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-Cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(O){var P=this.parent.parent;if(P.onCancel){P.onCancel();}P.close();}}]}]},_set_oi:function(P,O){this.oi=this.preProcessACLs(O);return true;},postCreate:function(){this.oi=this.preProcessACLs(this.oi);},preProcessACLs:function(V){var T=V.acls,S=T&&T.length,U=H(V),P={},W,O,Q,R;if(U){Q={};V.inhs=Q;}for(R=0;R<S;R++){W=new mstrmojo.Obj(T[R]);if(U&&W.inh){Q[W.n]=mstrmojo.hash.copy(W);continue;}O=P[W.n];if(!O){O=mstrmojo.hash.copy(W);O.rgt=0;delete O.den;P[W.n]=O;}O.rgt+=W.den?W.rgt*1000:W.rgt;}T=mstrmojo.hash.valarray(P);V.acls=T;return V;},postSaveACL:function(){},getAvailableRightsForDisplay:function(){return E(this.oi.st);},getAvailableRightsForSelection:function(){return E(this.oi.st);},onOpen:function(){if(this.showObjectNameOnTitle){this.set("title",mstrmojo.desc(8093,"Share: ##").replace("##",mstrmojo.string.encodeHtmlString(this.oi.n)));}var T=this.rightPulldown;T.set("items",this.getAvailableRightsForSelection());T.set("value",this.defaultRight);var W=this.objectInputer,Q=this.userSelector,O=Q&&Q.userBrowser;if(O&&O.hasRendered){O.set("items",[]);O.getContent(O);}var U=mstrmojo.ACL.UserDataService,S=200,V=function(X){W.set("candidates",X);},P=function(X){mstrmojo.alert(X.getResponseHeader("X-MSTR-TaskFailureMsg"));},R={success:V,failure:P};U.getUserCandidates(S,R);this.set("inEditMode",false);this.set("hasChanged",false);},onClose:function(){var O=this.objectInputer;O.set("items",[]);this.aclList.clearSelect();},oninEditModeChange:function(){mstrmojo.css.toggleClass(this.objectInputer.domNode,"small",this.inEditMode);},children:[{scriptClass:"mstrmojo.DataGrid",cssClass:"mstrmojo-ACLEditor-ACLList",alias:"aclList",renderOnScroll:false,makeObservable:true,itemDisplayField:"n",dropZone:true,bindings:{items:"this.parent.oi.acls"},sortCol:"",sortAsc:new mstrmojo.Obj({n:true,rgt:true}),sort:function(R,P){var Q=function O(T,S){return function(W,U){var Y=W[T],V=U[T],X=Y>V;if(Y===V){return 0;}if(S===X){return 1;}return -1;};};if(this.items){this.items.sort(Q(R,P));this.render();}},onremove:function(P){var S=this.parent.oi;if(!H(S)){return ;}var T=S.inhs,R=P.value,O=R&&R.length,U,Q;for(Q=0;Q<O;Q++){U=R[Q].n;delete T[U];}},onadd:function(P){var S=this.parent.oi;if(!H(S)){return ;}var T=S.inhs,R=P.value,O=R&&R.length,U,Q;for(Q=0;Q<O;Q++){U=R[Q].n;T[U]=mstrmojo.hash.copy(R[Q]);T[U].inh=true;}},onACLChanged:function(P){var O=this.parent.oi;this.parent.set("hasChanged",true);if(!H(O)){return ;}O.inhs[P.n]=mstrmojo.hash.copy(P);O.inhs[P.n].inh=true;},columns:[{headerWidget:{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(5657,"User/Group"),onclick:function(){var O=!(this.dataGrid.sortAsc.n);this.dataGrid.set("sortCol","n");this.dataGrid.sortAsc.set("n",O);this.dataGrid.sort("n",O);},postCreate:function(){if(this.dataGrid.sortCol==="n"){this.set("cssClass",(this.dataGrid.sortAsc.n)?"mstrmojo-sortAsc":"mstrmojo-sortDesc");}}},dataFunction:function(Q,O,P){return'<div class="mstrmojo-ACLEditor-user '+(Q.st===8705?"ug":"u")+'">'+mstrmojo.string.encodeHtmlString(Q.n)+"</div>";},colCss:"userCol"},{headerWidget:{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9149,"Access"),onclick:function(){var O=!(this.dataGrid.sortAsc.rgt);this.dataGrid.set("sortCol","rgt");this.dataGrid.sortAsc.set("rgt",O);this.dataGrid.sort("rgt",O);},postCreate:function(){if(this.dataGrid.sortCol==="rgt"){this.set("cssClass",(this.dataGrid.sortAsc.rgt)?"mstrmojo-sortAsc":"mstrmojo-sortDesc");}}},colCss:"rgtCol",dataWidget:{scriptClass:"mstrmojo.MouseOverContainer",children:[{scriptClass:"mstrmojo.Label",alias:"mouseoutItem",bindings:{text:function(){var P=this.parent.dataGrid.parent.getAvailableRightsForDisplay(),O=P.length,Q;for(Q=0;Q<O;Q++){if(P[Q].rgt===this.parent.data.rgt){return P[Q].n;}}return mstrmojo.desc(2056,"Custom");}}},{scriptClass:"mstrmojo.HBox",alias:"mouseoverItem",visible:false,children:[{scriptClass:"mstrmojo.Pulldown",itemIdField:"rgt",popupToBody:true,selectionPolicy:"reselect",defaultSelection:0,postCreate:function(){this.markupMethods=mstrmojo.hash.copy({ondataChange:function(){var O=this.parent.parent.data;this.set("value",O[this.itemIdField]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";if(!this.visible&&this.popupRef){this.popupRef.set("visible",false);}}},mstrmojo.hash.copy(this.markupMethods));this.items=this.parent.parent.dataGrid.parent.getAvailableRightsForSelection();},_set_value:function(T,P){var Q=this.value,O=(Q!==P);if(O){if(P===-1){var S=this.parent.parent.dataGrid.parent,R=this;S.openPopup("customACL",{zIndex:S.zIndex+10,rgt:Q,twoStates:!!this.parent.parent.data.newItem,onOK:function(){R.set("value",this.getACLValue());},onCancel:function(){R.set("value",Q);}});return false;}P=J(P);N(this,P);this.parent.parent.data.set(this.itemIdField,P);if(Q!==null){this.parent.parent.dataGrid.onACLChanged(this.parent.parent.data);}return true;}return true;}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-ACLEditor-delete",text:"&nbsp",title:mstrmojo.desc(629,"Delete"),onclick:function(O){this.parent.parent.dataGrid.remove(this.parent.parent.data);this.parent.parent.dataGrid.parent.set("hasChanged",true);}}]}],postCreate:function(){var O=!this.dataGrid.parent.viewOnlyMode&&!this.dataGrid.parent.uneditableRights[this.data.rgt];this.set("doSwitch",O);}}}]},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ACLEditor-MorePanel",bindings:{visible:"!this.parent.viewOnlyMode"},children:[{scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9150,"Add Users/Groups:"),cssClass:"mstrmojo-ACLEditor-addLabel"},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-ACLEditor-chooseLabel",onclick:function(O){var P=this.parent.parent.parent;P.openPopup("userSelector",{zIndex:P.zIndex+10});},bindings:{text:function(){return(this.parent.parent.parent.showButtonText)?mstrmojo.desc(1825,"Browse"):"";}}}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-ACLEditor-CPSection",children:[{scriptClass:"mstrmojo.ACL.UserInputBox",emptyText:mstrmojo.desc(9151,"Type users or groups here."),cssClass:"mstrmojo-ObjectInputBox mstrmojo-ACLEditor-inputBox small",onRender:function(){var O=this.parent.parent.parent;if(O){O.objectInputer=this;}},postBuildDom:function(){var O=this;this._clickHandler=function(P){O.parent.parent.parent.set("inEditMode",true);};mstrmojo.dom.attachEvent(this.domNode,"click",this._clickHandler);}},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ACLEditor-CPSection-RHS",children:[{scriptClass:"mstrmojo.Pulldown",itemIdField:"rgt",value:-1,defaultSelection:0,selectionPolicy:"reselect",onRender:function(){var O=this.parent.parent.parent.parent;if(O){O.rightPulldown=this;}},postCreate:function(){this.items=this.parent.parent.parent.parent.getAvailableRightsForSelection();},_set_value:function(T,P){var Q=this.value,O=(Q!==P);if(O){if(P===-1){var S=this.parent.parent.parent.parent,R=this;S.openPopup("customACL",{zIndex:S.zIndex+10,rgt:Q,twoStates:true,onOK:function(){R.set("value",this.getACLValue());},onCancel:function(){R.set("value",Q);}});return false;}P=A(P);N(this,P);return true;}return true;},bindings:{visible:"this.parent.parent.parent.parent.inEditMode"}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-ACLEditor-addButton",onclick:function(O){var P=this.parent.parent.parent.parent;L(P);},bindings:{visible:"this.parent.parent.parent.parent.inEditMode",text:function(){return(this.parent.parent.parent.parent.showButtonText)?mstrmojo.desc(2156,"Add"):"";}}}]}]}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-OK",text:mstrmojo.desc(1442,"OK"),bindings:{enabled:function(){var O=this.parent.parent.oi;return(O.acg&32)>0&&this.parent.parent.hasChanged;},visible:"!this.parent.parent.viewOnlyMode"},onclick:function(O){var P=this.parent.parent;if(L(P)){I(P,true);}},preBuildRendering:function(){if(!this.parent.parent.showButtonText){this.set("text","");}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-Close",onclick:function(O){if(!this.parent.parent.inEditMode){this.parent.parent.close();this.parent.parent.set("hasChanged",false);}this.parent.parent.objectInputer.set("items",[]);this.parent.parent.set("inEditMode",false);},bindings:{iconClass:function(){if(this.parent.parent.inEditMode||this.parent.parent.hasChanged){return"mstrmojo-Editor-button-Cancel";}return"mstrmojo-Editor-button-Close";},text:function(){if(!this.parent.parent.showButtonText){return"";}if(this.parent.parent.inEditMode||this.parent.parent.hasChanged){return mstrmojo.desc(2140,"Cancel");}return mstrmojo.desc(2102,"Close");}}}]}]});}());