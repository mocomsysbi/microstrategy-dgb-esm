var xmjd=mstrmojo&&mstrmojo.descriptors;var mstrmojo={helpPath:function(){return(mstrApp.helpUrl||"../help/")+"MSTRWeb/WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/Content/";},helpPathMobileAdmin:function(){return(mstrApp.helpUrl||"../help/")+"MobileAdmin/WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/";},upgradeHelpPath:function(){return(mstrApp.upgradeHelpUrl||"../help/")+"WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/Content/";},descriptors:xmjd||{},meta:{TP:"t",STP:"st"},emptyFn:function(){},tstid:function(B){var A;if(B){if(typeof (B)==="object"){A=B.tstid;}else{A=B;}}return A?'tstid="'+A+'"':"";},getMissingFn:function getMissingFn(){return function(){var C=this.scriptClass,A;try{for(A in this){if(this[A]===arguments.callee){C+="."+A;break;}}}catch(B){}throw new Error("Missing abstract method: "+C);};},now:function now(){return new Date().getTime();},usesFrames:false};(function(){mstrmojo.global=(function(){var F=function(){return this;};return F.call(null);}());mstrmojo.dbg=mstrmojo.emptyFn;mstrmojo.dbg_stack=mstrmojo.emptyFn;mstrmojo.dbg_xhr=mstrmojo.emptyFn;mstrmojo.dbg_profile=mstrmojo.emptyFn;mstrmojo.debugBundles=(function(){return(window.mstrConfig&&(mstrConfig.debugFlags!==undefined)&&((mstrConfig.debugFlags&4)>0));})();mstrmojo.platform={};mstrmojo.prompt={};mstrmojo.settings={};mstrmojo.models={datasets:{},template:{}};mstrmojo.ui={editors:{controls:{}},menus:{},pathbar:{}};mstrmojo.prefs={};mstrmojo.ACL={};mstrmojo.CMS={};mstrmojo.storage={};mstrmojo.maps={};mstrmojo.maps.androidmap={};mstrmojo.maps.jsmap={};mstrmojo.graph={};mstrmojo.IPA={};mstrmojo.IPA.Monitors={};mstrmojo.IPA.Alerts={};mstrmojo.IPA.Environment={};mstrmojo.IPA.Groups={};mstrmojo.IPA.Heartbeat={};mstrmojo.IPA.Managers={};mstrmojo.sm={};mstrmojo.sort={};mstrmojo.ME={};mstrmojo.architect={ui:{editors:{},panels:{},factories:{}},obj:{},menu:{},projectmanagement:{}};mstrmojo.warehouse={ui:{editors:{}},obj:{},dbroles:{},menu:{}};mstrmojo.plugins={};mstrmojo.AS={};mstrmojo.DI={controller:{},model:{},ui:{dialogs:{}}};mstrmojo.Refine={};mstrmojo.qb={bigquery:{},es:{},mdx:{},menu:{},thirdParty:{}};mstrmojo.WH={};mstrmojo.fe={};mstrmojo.txEditor={};mstrmojo.condTx={};mstrmojo.threshold={};mstrmojo.express={ui:{}};mstrmojo.rw={model:{},xtab:{}};mstrmojo.util={ui:{}};mstrmojo.android={controllers:{},factories:{},inputControls:{},large:{controllers:{},factories:{},ui:{}},medium:{controllers:{},factories:{},ui:{nativebar:{}}},selectors:{},ui:{},nativedialog:{}};mstrmojo.vi={controllers:{},factories:{},models:{editors:{}},enums:{},ui:{menus:{},editors:{fe:{},cm:{},nlp:{}},rw:{selectors:{},xtab:{}},tabs:{},toolbars:{},tutorial:{}},viz:{},util:{}};mstrmojo.onetier={controllers:{},vi:{acl:{},prefs:{model:{}},ui:{tutorial:{}}}};mstrmojo.config={vi:{},onetier:{}};mstrmojo.chart={common:{},enums:{},model:{enums:{}}};mstrmojo.nativeandroid={};mstrmojo.gm={};mstrmojo.ngm={};mstrmojo.heatmap={vi:{}};mstrmojo.netviz={};mstrmojo.imagelayout={};mstrmojo.kpicard={layout:{},editors:{}};mstrmojo.iphone={};mstrmojo.winphone={};mstrmojo.mstr={search:{}};mstrmojo.mstr.ui={};mstrmojo.gmaps={basemap:{},graphic:{},geometry:{},layer:{svg:{},canvas:{},mapbox:{}}};mstrmojo.esrimap={};mstrmojo.mapbox={ui:{selectors:{}}};mstrmojo.examples={};mstrmojo.home={controllers:{},models:{},views:{},ui:{}};mstrmojo.workstation={pages:{}};mstrmojo.err=function D(I,H){var G=I.name+': "'+I.message+'"';if(mstrmojo.debug){if(I.fileName){G+=" at\n    "+I.fileName;}if(I.hasOwnProperty("lineNumber")){G+=": "+I.lineNumber;}else{if(I.hasOwnProperty("line")&&I.sourceURL){var F=I.sourceURL.split("/");G+="("+F[F.length>1?F.length-1:0]+":"+I.line+")";}}}this.dbg(G);if(mstrmojo.Dialog){mstrmojo.error({longDesc:I.message,code:I.code},H,{title:I.name});}else{window.alert(G);}};mstrmojo.confirm=function B(F){return window.confirm(F);};mstrmojo.alert=function E(F){window.alert(F);};var C=!!(/return true/.test(String(function(){return true;})));mstrmojo.mixin=function A(J,H){if(J){H=H||{};var I=/this\.\_super/;var G=function(N,M){return function L(){var P=this._super;this._super=M;var O=N.apply(this,arguments||[]);this._super=P;return O;};};var F=J.__onmixin__;if(F){delete J.__onmixin__;}var K;for(K in J){if((typeof J[K]==="function")&&(!C||I.test(J[K]))){H[K]=G(J[K],H[K]);}else{H[K]=J[K];}}if(F){J.__onmixin__=F;}}return H;};}());(function(){var $XHR;var $MISSING={};var getApp=function(){return mstrmojo.global.mstrApp||{};},getJsRoot=function(){return getApp().jsRoot||"../javascript/";},getJsBundlesRoot=function(){return getJsRoot()+"bundles/";},getJsMojoRoot=function(){return getApp().jsMojoRoot||"../javascript/mojo/js/source/";},getPluginRoot=function(){return getApp().pluginRoot||"../plugins/";},getPluginMojoRoot=function(){return getApp().pluginMojoRoot||getJsMojoRoot();},isIE=!!document.all;function getXHR(){$XHR=self.XMLHttpRequest?new XMLHttpRequest():(self.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){if(params.hasOwnProperty(p)){url[++x]=p+"="+encodeURIComponent(params[p]);}}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function syncXHR(method,baseUrl,params){var result=null;method=method.toUpperCase();if(!$XHR){getXHR();}if($XHR){try{var m=null,app=window.mstrApp;if(window.microstrategy!==undefined&&microstrategy){m=microstrategy;}params.taskContentType=params.taskContentType||"json";params.taskEnv="xhr";params.xts=mstrmojo.now();params=mstrmojo.addCSRFTokenToTaskParams(params);var ptp=(app&&app.persistTaskParams)||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}$XHR.open(method,appendUrlParams(method,baseUrl,params),false);$XHR.setRequestHeader("X-Requested-With","XMLHttpRequest");if(method!=="POST"){params=null;}else{params=encodeParams(params);$XHR.setRequestHeader("Content-type","application/x-www-form-urlencoded");}$XHR.send(params);result=$XHR.responseText||null;}catch(localerr){if(window.console){window.console.log(localerr);}}}return result;}function _jsGet(file,nullCheck){var js=mstrmojo.loadFileSync(file);if(js){try{eval(js);return nullCheck?!!verifyJsLoaded(nullCheck):true;}catch(localerr){window.alert("JavaScript compile error:\n\nFile: "+file+"\n\nError: "+localerr.message);}}return false;}mstrmojo.requiresBundle=function reqBundle(bundleName){return _jsGet(getJsBundlesRoot()+bundleName);};mstrmojo.requiresDepLib=function requiresDepLib(file,AMD){if(reqCache[file]){return true;}function isAMD(){return"function"===typeof define&&define.amd;}var AMDCache=window.define;if(!AMD&&isAMD()){delete window.define;}var value=_jsGet(file);reqCache[file]=true;window.define=AMDCache;return value;};mstrmojo.loadFileSync=function loadFileSync(file){var result=null;if(!$XHR){getXHR();}if($XHR){try{$XHR.open("GET",file+((window.mstrConfig&&mstrConfig.webVersion)?"?v="+mstrConfig.webVersion:""),false);$XHR.setRequestHeader("X-Requested-With","XMLHttpRequest");$XHR.send(null);result=$XHR.responseText||null;}catch(localerr){}if(!isIE&&$XHR.abort){$XHR.abort();}}return result;};mstrmojo.insertCSSLinks=function insertCSSLinks(files){var css,firsthead;if(files&&files.length>0){firsthead=document.getElementsByTagName("head")[0];files.forEach(function(file){css=document.createElement("link");css.setAttribute("id",file.replace(/[^a-zA-Z0-9]/g,""));css.setAttribute("rel","stylesheet");css.setAttribute("type","text/css");css.setAttribute("href",file);firsthead.appendChild(css);});}};mstrmojo.loader={loaded:{mstrmojo:true,"mstrmojo.loader":true},isLoaded:function isLd(fqcn){var isLoaded=!!verifyJsLoaded(fqcn);if(isLoaded){this.loaded[fqcn]=true;}return isLoaded;},load:function ld(fqcn){if($MISSING[fqcn]){return false;}if(this.loaded[fqcn]||this.isLoaded(fqcn)){return true;}if(_jsGet(this.fqcnToFile(fqcn),fqcn)){this.loaded[fqcn]=true;return true;}$MISSING[fqcn]=true;return false;},fqcnToFile:function fqcnToFile(fqcn){if(fqcn.match(/^mstrmojo\.plugins\./)){var pluginName=fqcn.substring(17,fqcn.indexOf(".",17)),pluginFile=pluginName+"/javascript/"+getPluginMojoRoot()+fqcn.replace("mstrmojo.plugins."+pluginName+".","").replace(/\./gm,"/");if(mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.SUPPORT_LIVEMODE)&&mstrApp.getWSLiveMode()&&mstrConfig.dossierServerPluginNames&&mstrConfig.dossierServerPluginNames.indexOf(pluginName)>-1){fqcn=mstrApp.dossierServerBaseUrl+"plugins/"+pluginFile;}else{fqcn=getPluginRoot()+pluginFile;}}else{if(fqcn.match(/^mstrmojo\./)){fqcn=getJsMojoRoot()+fqcn.replace("mstrmojo.","").replace(/\./gm,"/");}else{fqcn=getJsRoot()+fqcn.replace(/\./gm,"/");}}return fqcn+".js";}};var $LOADER=mstrmojo.loader,isLoaded=$LOADER.loaded;var reqCache={},addPackagesToReqCache=function addPkg(n,ns){var ps=n.split("."),klen=ps.length,k;for(k=1;k<klen;k++){var s=ps.slice(0,k).join(".");if(!reqCache[s]){ns.push(s);reqCache[s]=true;}}},loadInputScripts=function loadInputScripts(ns){var jlen=ns.length,j;for(j=0;j<jlen;j++){if(!$LOADER.load(ns[j])){window.alert("Warning: Javascript class not found:\n"+ns[j]);break;}}};mstrmojo.requiresCls=function reqCls(){var argLen=arguments.length,ns=[],i,len;for(i=0,len=argLen;i<len;i++){var n=arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){addPackagesToReqCache(n,ns);}ns.push(n);reqCache[n]=true;}loadInputScripts(ns);return true;};mstrmojo.requiresClsP=function reqClsP(){var argLen=arguments.length,ns=[],pkgName=arguments[0],i,len;addPackagesToReqCache(pkgName,ns);for(i=1,len=argLen;i<len;i++){var n=pkgName+"."+arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){ns.push(n);reqCache[n]=true;}}loadInputScripts(ns);return true;};var $DESCRIPTORS=mstrmojo.descriptors,descPrefix="mstrWeb.";function populateDescriptors(ds){if(ds){var dlen=ds.length,di;for(di=0;di<dlen;di++){var d=ds[di];$DESCRIPTORS[d.key]=d.v;}}}mstrmojo.populateDescriptors=populateDescriptors;if(window.mstrConfig!==undefined){populateDescriptors(mstrConfig.mstrDescs&&mstrConfig.mstrDescs.descriptors);mstrConfig.mstrDescs=null;}if(window.mstrApp!==undefined){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}var requestDescriptor=function(prefix,ids){var ns=[],len=ids.length,i;for(i=0;i<len;i++){var k=ids[i];if(k&&!($DESCRIPTORS.hasOwnProperty(prefix+k))){ns.push(k);}}if(ns.length>0){var response=syncXHR("POST",(window.mstrConfig&&mstrConfig.taskURL)||"taskProc",{taskId:"getDescriptors",keys:ns.join(","),prefix:prefix});if(response){var r=JSON.parse(response.replace(/\\'/g,"'"));populateDescriptors(r&&r.descriptors);}}};mstrmojo.requiresDescsWPrefix=function reqDescP(prefix){var args=[].slice.call(arguments);args[0]=null;requestDescriptor(prefix,args);};mstrmojo.requiresDescs=function reqDesc(){if(window.mstrConfig!==undefined&&!mstrConfig.onMobileDevice){requestDescriptor(descPrefix,arguments);}};mstrmojo.desc=function desc(descID,defText){if(descID!==null&&descID!==undefined){mstrmojo.requiresDescs(descID);if($DESCRIPTORS.hasOwnProperty(descPrefix+descID)){return $DESCRIPTORS[descPrefix+descID];}defText=defText||"No string descriptor found for descID="+descID;}var decDefText="["+defText+"]";$DESCRIPTORS[descPrefix+descID]=decDefText;return decDefText;};mstrmojo.descP=function descP(prefix,descID,defText){mstrmojo.requiresDescsWPrefix(prefix,descID);if($DESCRIPTORS.hasOwnProperty(prefix+descID)){return $DESCRIPTORS[prefix+descID];}defText=defText||"No string descriptor found for descID="+descID;var decDefText="*"+defText+"*";$DESCRIPTORS[prefix+descID]=decDefText;return decDefText;};mstrmojo.provide=function prv(fqcn,cls){isLoaded[fqcn]=!!cls;return cls;};mstrmojo.invalidateCls=function rel(fqcn){reqCache[fqcn]=false;isLoaded[fqcn]=false;this.invalidateJsLoaded(fqcn);};var mx=mstrmojo.mixin;mstrmojo.declare=function declare(SuperCls,mixins,config){function Constr(props){if((!props||!props.dontInit)&&this.init){this.init(props);}}if(SuperCls){Constr.prototype=new SuperCls({dontInit:true});Constr.prototype.constructor=Constr;}var proto=Constr.prototype;var cnt=(mixins&&mixins.length)||0,i;for(i=0;i<cnt;i++){mx(mixins[i],proto);}if(config){mx(config,proto);if(config.scriptClass){isLoaded[config.scriptClass]=true;}}return Constr;};mstrmojo.findAncestor=function findAncestor(src,property,value,limitClass){var ancestor=src&&src.parent;while(ancestor&&(!limitClass||!(ancestor instanceof limitClass))){var targetProperty=ancestor[property];if(targetProperty!==undefined){if(value!==undefined&&value!==null){if(targetProperty===value){return ancestor;}}else{return ancestor;}}ancestor=ancestor.parent;}return null;};mstrmojo.isDescendant=function isDescendant(parent,child){var ancestor;if(!child||!parent){return false;}ancestor=child.parent;while(ancestor){if(ancestor===parent){return true;}ancestor=ancestor.parent;}return false;};mstrmojo.getCSRFToken=function getCSRFToken(url){var tkn=null;try{if(url){if(url.indexOf("validateRandNum=")>=0){return tkn;}if(this.isUrlExternal(url)){return tkn;}}if(window.mstrApp&&mstrApp.validateRandNum){tkn=mstrApp.validateRandNum;}else{if(window.mstrConfig&&mstrConfig.validateRandNum){tkn=mstrConfig.validateRandNum;}else{if(window.microstrategy!==undefined&&microstrategy&&microstrategy.validateRandNum){tkn=microstrategy.validateRandNum;}}}}catch(err){}return tkn;};mstrmojo.addCSRFTokenToURL=function addCSRFTknToURL(url){if(!url){return"";}var tkn=mstrmojo.getCSRFToken(url);if(tkn&&tkn.length>0){if(url.indexOf("?")>-1){url+="&";}else{url+="?";}url+="validateRandNum="+tkn;}return url;};mstrmojo.addCSRFTokenToTaskParams=function addCSRFTknToTaskParams(params){if(params){var tkn=mstrmojo.getCSRFToken();if(tkn&&tkn.length>0){params.validateRandNum=tkn;}}return params;};mstrmojo.getInstance=function getInstance(config){var Clazz=mstrmojo.hash.walk(config.scriptClass,window);if(Clazz){return new Clazz(config);}return null;};mstrmojo.isUrlExternal=function isUrlExternal(url){var curURL=window.location.href;var servletName=window.mstrApp&&mstrApp.name,taskProcName=window.mstrConfig.taskURL&&mstrConfig.taskURL,isSameWebApp=(url.indexOf("?")===0||url.indexOf(servletName)===0||url.indexOf("./"+servletName)===0||url.indexOf(taskProcName)===0||url.indexOf("./"+taskProcName)===0||url.indexOf(curURL)===0||((curURL.indexOf("?")>0)&&(url.indexOf(curURL.substring(0,curURL.indexOf("?")))===0)));return !isSameWebApp;};mstrmojo.resolveFeature=function resolveFeature(feature){var features=mstrApp.features;return features&&features[feature];};mstrmojo.getStyleRoot=function getStyleRoot(){var c=mstrConfig||{},styleRoot=c.styleRoot||"../style";return styleRoot;};mstrmojo.getJsRoot=getJsRoot;function verifyJsLoaded(name){name=name.trim();var path=name.split(".");var o=window;for(var i=0;i<path.length;i++){o=o[path[i]];if(!o){break;}}return o;}mstrmojo.invalidateJsLoaded=function invalidateJsLoaded(name){var path=name&&name.trim().split("."),len=(path&&path.length)||0,tmp=window,i;for(i=0;i<len-1;i++){if(!tmp){return ;}tmp=tmp[path[i]];}if(tmp&&path[i]){tmp[path[i]]=undefined;}};}());(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(G,E){var C=!!G&&(typeof G==="string")&&!G.match(/\./)&&!!this[G],D=mstrmojo.registry.ref(C?this[G]:G);if(D&&D.open){if(C){this[G]=D;}if(D.disposable!==false){this.addDisposable(D);}var J=D.slot&&this[D.slot];if(J){if(D.parent!==this){if(this.addChildren){this.addChildren([D]);}else{var I=false,F=D.domNode||D.placeholder;if(F&&typeof F==="string"){F=document.getElementById(F);}if(!F){I=true;F=document.createElement("span");D.placeholder=F;}if(I||(F.parentNode!==J)){J.appendChild(F);}}}}try{D.open(this,E);}catch(H){console.log("Error opening popup: "+H);}this._lastOpened=D;}},closePopup:function B(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}});}());(function(){mstrmojo.BarcodeReader=mstrmojo.provide("mstrmojo.BarcodeReader",{_callback:null,_callbackId:0,readBarcodes:function B(G,I,C,F,D){this._callbackId++;var H=String(this._callbackId);this._callback=I;var E="mstrmojo.BarcodeReader.onBarcodeResult";if(G){G.blockBegin=0;G.blockCount=-1;G.serverUrl=mstrApp.getConfiguration().getTaskUrlByProject(mstrApp.getCurrentProjectId());}mstrMobileApp.readBarcodes(H,C,(G&&JSON.stringify(G))||null,(F&&JSON.stringify(F))||null,D||null,E);},onBarcodeResult:function A(F,C,D){var E=this._callback;if(F!==this._callbackId||(!E)){return ;}delete this._callback;if(C==-1){E.success(D);}else{if(C!=0){E.failure(D||"Error reading bare code.");}}}});}());mstrmojo.mstr.EnumDSSConsolidationType={DssNormal:0,DssDerivedElement:1,DssRecursiveDerivedElement:2};(function(){var B={NetworkVisualizationStyle:{b:"vi-network.js",s:"VisualizationServerJsonDataStyle",c:"netviz.VisNetwork",oivmb:"oivm-network.js",vib:"vi-network.js"},ReportTimelineAjaxVisualizationStyle:{s:"TimelineMojoVisualizationDataStyle",c:"VisTimeline"},visAjaxDatePicker:{s:"AjaxDatePickerReportStyle",c:"VisDateSelection"},SurveyVisualizationStyle:{s:"VisualizationDataStyle",c:"SurveyVis"},VIHeatMapVisualizationStyle:{b:"vi-heatmap.js",s:"VisualizationServerJsonDataStyle",c:"heatmap.vi.VisHeatMap",oivmb:"oivm-heatmap.js",vib:"vi-heatmap.js"},KPICardVisualizationStyle:{b:"vi-kpi.js",s:"VisualizationServerJsonDataStyle",c:"kpicard.VisKPICard",lib:'[["libraries/echarts.common.min.js"],["libraries/slick/slick.min.js"]]'},GraphMatrixVisualizationStyle:{b:"vi-gm.js",s:"VisualizationServerJsonDataStyle",c:"gm.VisGraphMatrix",oivmb:"oivm-gm.js",vib:"vi-gm.js"},ESRIMapVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"VisMapBase"},MapboxVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"mapbox.VisMapbox",lib:'[["libraries/mapbox/mapbox-gl.js"],["libraries/mapbox/supercluster.min.js"],["libraries/mapbox/turf.min.4.7.3.js"]]'},NewGraphMatrixVisualizationStyle:{b:"vi-ngm.js",s:"VisualizationServerJsonDataStyle",c:"ngm.VisNewGraphMatrix",lib:'[["../VisFramework/ngm/dist/bundle/ngm.js"]]',oivmb:"oivm-ngm.js",vib:"vi-ngm.js"},GoogleMapVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"VisMapBase"}};var E={"com.microstrategy.web.vf.viewer.EsriMapApplicationViewer":"ESRIMapVisualizationStyle","com.microstrategy.web.vf.viewer.HeatMapApplicationViewer":"VIHeatMapVisualizationStyle","com.microstrategy.flex.viewer.GraphMatrixViewer":"GraphMatrixVisualizationStyle","com.microstrategy.flex.viewer.NewGraphMatrixViewer":"NewGraphMatrixVisualizationStyle","com.microstrategy.web.vf.viewer.DatePickerApplicationViewer":"visAjaxDatePicker","com.microstrategy.flex.viewer.NetViz":"NetworkVisualizationStyle"};mstrmojo.ExpressVisList=mstrmojo.provide("mstrmojo.ExpressVisList",{getVis:function D(F){return B[F]||(mstrConfig&&mstrConfig.pluginsVisList&&mstrConfig.pluginsVisList[F])||null;},findVisName:function(F){return E[F]||(mstrConfig&&mstrConfig.pluginsWidgetVisMap[F])||null;},findWidgetName:function C(H){var G;for(var F in E){if(E.hasOwnProperty(F)&&E[F]===H){G=F;break;}}if(!G&&mstrConfig&&mstrConfig.pluginsWidgetVisMap){for(var F in mstrConfig.pluginsWidgetVisMap){if(mstrConfig.pluginsWidgetVisMap.hasOwnProperty(F)&&mstrConfig.pluginsWidgetVisMap[F]===H){G=F;break;}}}return G;},getVisClass:function A(F,G){if(G.txi&&G.t===115){F=mstrmojo.DynamicClassFactory.newComponent(F,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableXtab]);}return F;}});}());(function(){function AR(A2,A3){return A3||(A2||window).event;}function t(A2){var A3=parseInt(A2,10);return A3===null||isNaN(A3)?0:A3;}mstrmojo.PositionType=null;var Ay=!!document.all,AP=document.documentMode,AB=navigator.userAgent,q=false,o=false,k=false,j=false,V=false,S=!Ay&&"ActiveXObject" in window,AD=false;Ay=Ay||S;if(Ay){if(window.mstrConfig&&mstrConfig.isEdgeModeEnabled){q=!!AB.match(/MSIE 6/);o=((!!AB.match(/MSIE 7/)&&!AP)||AP===7);k=(AP===8);j=(AP===9);V=(AP===10);AD=(!AP||AP<=9);}else{q=!!AB.match(/MSIE 6/);o=!!AB.match(/MSIE 7/);k=!!AB.match(/MSIE 8/);j=!!AB.match(/MSIE 9/);V=!!AB.match(/MSIE 10/);AD=!V;}}var h=!Ay&&!!AB.match(/Firefox/),u=0,AC=!!AB.match(/Android/),Ao=!!AB.match(/iPad/),AW=!!AB.match(/iPhone/),Ae=!!document.createTouch||AC,AA=!!AB.match(/PlayBook/),Q=!!AB.match(/Windows Phone/),Az=!Ay&&!!AB.match(/Trident.*rv/),g=h?"-moz-":(Ay||Az)?"":"-webkit-",AQ=h?"Moz":(V||Az)?"":Ay?"ms":"webkit",Ab=((V||Az)?"t":"T"),AV=AQ+Ab+"ransition";function At(){return AQ+Ab+"ransform";}function AN(){return AV+"Property";}function W(){return AV+"Duration";}function P(){return(V||h)?"transitionend":"webkitTransitionEnd";}function l(){return AQ+"BoxShadow";}var Aw=At(),Ak=AN(),AI=W(),A=P(),x=l();function Aa(){if(!u&&h){var A2=AB.match(/.*Firefox\/([\d|\.]*).*/);if(A2){u=parseFloat(A2[1]);}}return u;}function Ag(){var A3=0,A7=0,A4=window,A5=document,A2=A5.body,A6=A5.documentElement;if(typeof A4.pageYOffset==="number"){A7=A4.pageYOffset;A3=A4.pageXOffset;}else{if(A2&&(A2.scrollLeft||A2.scrollTop)){A7=A2.scrollTop;A3=A2.scrollLeft;}else{if(A6&&(A6.scrollLeft||A6.scrollTop)){A7=A6.scrollTop;A3=A6.scrollLeft;}}}return{x:A3,y:A7};}function AO(A2){A2=A2||0;A2=String(A2);return((A2.indexOf("%",0))!==-1)?A2:(A2+"px");}function AY(A4,A8,A7,A6,A5){if(!mstrmojo.dom.isWinPhone){A6=(A6||false||this.isHWAccelerated);}else{A6=false;}var A3=A5+(A6?"3d":"")+"(",A2=A6?(","+A7+")"):")";return A3+A4+","+A8+A2;}var Am=2,Z=3;function AE(A8,A7,BB){var BA=A8.style,A4=BA.display,A6=this.windowDim(),A5=Ag();BA.display="block";var A9=A6.w-A8.clientWidth,BC=Math.max(A6.h-A8.clientHeight,0),A2={4:0,5:A9,3:A9/2},A3={1:0,3:BC/2,2:BC};BA.left=A2[A7]+A5.x+"px";BA.top=A3[BB]+A5.y+"px";BA.display=A4;}function w(A5,A4,A6,A2){if(A5.addEventListener){return A5.addEventListener(A4,A6,!!A2);}A6._id=A6._id||w.guid++;A5.events=A5.events||{};var A3=A5.events[A4];if(!A3){A3=A5.events[A4]={};if(A5["on"+A4]){A3[0]=A5["on"+A4];}}A3[A6._id]=A6;function A7(BA){BA=BA||window.event;var A9=this.events[BA.type],A8;for(A8 in A9){A9[A8].call(this,BA);}}A5["on"+A4]=A7;}w.guid=1;function p(A4,A3,A5,A2){if(!A4){return ;}if(A4.removeEventListener){A4.removeEventListener(A3,A5,!!A2);}else{if(A4.events&&A4.events[A3]){delete A4.events[A3][A5._id];}}}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:AB,isIE:Ay,isIE6:q,isIE7:o,isIE8:k,isIE9:j,isIE10:V,isIE11:S,isIEW3C:Az,isNSIE:AD,isDXIE:AD,isFF:h,isWK:!!AB.match(/AppleWebKit/),isSafari:!!AB.match(/Safari/)&&!AB.match(/Chrome/),isChrome:!!AB.match(/AppleWebKit/)&&AB.match(/Chrome/),isEdge:!!AB.match(/Edge/),isHWAccelerated:!AC,isAndroid:AC,isIPad:Ao,isPlayBook:AA,isWinPhone:Q,isMobile:Ao||AW||Q||AC,isIOSTouch:(Ao||AW)&&!window.MSStream,supportsTouches:Ae,TOUCHSTART:Ae?"touchstart":"mousedown",TOUCHMOVE:Ae?"touchmove":"mousemove",TOUCHEND:Ae?"touchend":"mouseup",TOUCHCANCEL:Ae?"touchcancel":"",RESIZE:Ae?"orientationchange":"resize",CSS3_PREFIX:g,CSS3_BOXSHADOW:x,CSS3_TRANSFORM:Aw,CSS3_TRANSITION:AV,CSS3_TRANSITION_PROPERTY:Ak,CSS3_TRANSITION_DURATION:AI,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},htmlFeatures:{FILE_READER:"fr"},MOUSE_BUTTON:{LEFT:1,RIGHT:2},supports:function B(A2){var A3=this.isFF&&Aa();switch(A2){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||A3>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||A3>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);case this.htmlFeatures.FILE_READER:return !!(window.FileReader);}return false;},getOSInfo:function AX(){var A7="Unknown",A3=navigator.appVersion,A6=navigator.userAgent,A5=A7;var A2=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var A4;for(A4=0;A4<A2.length;A4++){var A9=A2[A4];if(A9.r.test(A6)){A5=A9.s;break;}}var A8=A7;if(/Windows/.test(A5)){A8=/Windows (.*)/.exec(A5)[1];A5="Windows";}switch(A5){case"Mac OS X":A8=/Mac OS X (10[\.\_\d]+)/.exec(A6)[1];break;case"Android":A8=/Android ([\.\_\d]+)/.exec(A6)[1];break;case"iOS":A8=/OS (\d+)_(\d+)_?(\d+)?/.exec(A3);A8=A8[1]+"."+A8[2]+"."+(A8[3]|0);break;}return{name:A5,version:A8};},transEndEvtNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},animationEndEvtNames:{WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",animation:"animationend"},replace:function z(A4,A2){if(A4&&A2){var A3=A4.parentNode;if(A3){A3.replaceChild(A2,A4);}}return A2;},attachEvent:function b(A4,A3,A5,A2){if(A4.addEventListener){return A4.addEventListener(A3,A5,!!A2);}return A4.attachEvent("on"+A3,A5);},detachEvent:function Ai(A4,A3,A5,A2){if(!A4){return ;}if(A4.removeEventListener){A4.removeEventListener(A3,A5,!!A2);}else{A4.detachEvent("on"+A3,A5);}},attachMarkupEvent:function AG(A5,A4,A2){var A3=function(A6){mstrmojo.all[A5].captureDomEvent(A2,window,A6);};this.attachEvent(A4,A2,A3);return A3;},attachOneTimeEvent:function a(A5,A3,A6,A2){var A4=function(A7){A6(A7);if(A2){p(this,A3,A4);}else{mstrmojo.dom.detachEvent(this,A3,A4);}};if(A2){w(A5,A3,A4);}else{this.attachEvent(A5,A3,A4);}A5=null;return A4;},attachMouseMoveEvents:function D(A5,A2){var A4=this,A3=function(A6){if(A2){A2(A6);}A4.detachEvent(document,"mousemove",A5);A4.detachEvent(document,"mouseup",A3);};A4.attachEvent(document,"mousemove",A5);A4.attachEvent(document,"mouseup",A3);},captureDomEvent:function AU(A7,A5,A3,A6,A4){var A2=mstrmojo.all[A7];if(A2){A2.captureDomEvent(A5,A3,A6,A4);}},captureEventInfo:function AT(A5){var A3=mstrmojo.hash.copy(A5,{}),A4=A3.hWin=A3.hWin||window,A2=A3.e=A3.e||A4.event;A3.node=this.eventTarget(A4,A2);A3.pos=this.getMousePosition(A2,A4);return A3;},translate:function N(A4,A3,A7,A6,A2,A5){A2=(A2&&" "+A2)||"";A4.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(A3,A7,A6,A5)+A2;},createTranslateString:function R(A2,A5,A4,A3){A2=AO(A2);A5=AO(A5);A4=AO(A4);return AY(A2,A5,A4,A3,"translate");},createScaleString:function AF(A2,A5,A4,A3){A2=A2||0;A5=A5||0;A4=A4||0;return AY(A2,A5,A4,A3,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function C(A4,A2,A5,A7){var A3=A4.id+"-"+A2,A6=this._bufferConnects[A3];if(!A6){A6=this._bufferConnects[A3]={elId:A4.id,eventName:A2,timer:null,bufferSize:A7,listeners:[],callback:function(A8){mstrmojo.dom._callback(A8,mstrmojo.global,A3);return true;}};this.attachEvent(A4,A2,A6.callback);}A6.listeners.push(A5);},_callback:function As(A6,A2,A4){var A5=this._bufferConnects[A4],A7=A5&&A5.timer;if(A5&&!A7){var A3=(A5.bufferSize===null)?this._bufferSize:A5.bufferSize;if(A5.bufferSize){A5.timer=A2.setTimeout(function(){mstrmojo.dom.updateBuffers(A4);},A3);}else{mstrmojo.dom.updateBuffers(A4);}}},updateBuffers:function J(A5){var A6=this._bufferConnects[A5],A3=A6&&A6.listeners,A2=(A3&&A3.length)||0,A4;for(A4=0;A4<A2;A4++){A3[A4]();}if(A6&&A6.timer){delete A6.timer;}},detachBufferedEvent:function AL(A3,A7,A8){if(!A3){return ;}var BA=A3.id+"-"+A7,A4=this._bufferConnects[BA],A6=A4&&A4.listeners,A9=(A6&&A6.length)||0,A5;if(A9){for(A5=A9-1;A5>-1;A5--){if(A6[A5]===A8){A6.splice(A5,1);}}if(!A6.length){this.detachEvent(A3,A7,A4.callback);delete this._bufferConnects[BA];if(A4.timer){var A2=mstrmojo.global;A2.clearTimeout(A4.timer);}}}},eventTarget:function AJ(A2,A3){A3=AR(A2,A3);return A3.target||A3.srcElement;},isMac:function AH(){return this.getOSInfo().name.toLowerCase().indexOf("mac")>=0;},isMetaKey:function L(A2,A5){var A4=this.getOSInfo().name.toLowerCase().indexOf("mac")>=0,A3=AR(A2,A5)||{};return(A3.ctrlKey&&!A4)||(A3.metaKey&&A4);},ctrlKey:function Av(A2,A3){return(AR(A2,A3)||{}).ctrlKey;},shiftKey:function AK(A2,A3){return(AR(A2,A3)||{}).shiftKey;},metaKey:function e(A2,A3){return(AR(A2,A3)||{}).metaKey;},getButton:function Ac(A2,A3){return((Number(AR(A2,A3).button))===2)?2:1;},isPrimaryMouseBtn:function Ap(A3,A2){return this.getButton(A2||window,A3)===1;},isRMC:function Al(A3,A2){return A3&&(A3.button===2||A3.type==="contextmenu"||this.isMac()&&this.ctrlKey(A2,A3)&&A3.button===0);},getMousePosition:function s(A5,A4){A4=A4||window;var A3,A8;if(mstrmojo.dom.isIE){A5=A5||A4.event;var A6=document,A2=A6.body,A7=A6.documentElement;A3=A5.clientX+A2.scrollLeft+(A7.scrollLeft||0);A8=A5.clientY+A2.scrollTop+(A7.scrollTop||0);}else{A3=A5.pageX;A8=A5.pageY;}return{x:A3,y:A8};},position:function Ad(A3,A4){var A7={x:0,y:0,w:0,h:0};if(A3&&A3.getBoundingClientRect){try{A7=A3.getBoundingClientRect();}catch(A6){A7={left:0,top:0,right:0,bottom:0,height:0,width:0};}A7={x:A7.left,y:A7.top,w:A7.right-A7.left,h:A7.bottom-A7.top};if(this.isIE6||this.isIE7){var A2=A3.ownerDocument;if(A2){var A9=A2.documentElement,A8=A9.getBoundingClientRect();A7.x-=A8.left;A7.y-=A8.top;}}}if(A4){var A5=Ag();A7.x+=A5.x;A7.y+=A5.y;}return A7;},delta:function G(A4,A2){A2=A2||document.body;var A3=this.position(A4),A5=this.position(A2);return{x:Math.round(A3.x-A5.x),y:Math.round(A3.y-A5.y)};},windowDim:function U(){var A2=0,A4=0,A5=window,A6=document,A7=A6.documentElement,A3=A6.body;if(typeof (A5.innerWidth)=="number"&&typeof (A5.innerHeight)=="number"){A2=A5.innerWidth;A4=A5.innerHeight;}else{if(A7&&(A7.clientWidth||A7.clientHeight)){A2=A7.clientWidth;A4=A7.clientHeight;}else{if(A3&&(A3.clientWidth||A3.clientHeight)){A2=A3.clientWidth;A4=A3.clientHeight;}}}return{w:A2,h:A4};},center:function AS(A2){AE.call(this,A2,Z,Z);},bottomCenter:function E(A2){AE.call(this,A2,Z,Am);},clearBrowserHighlights:function M(A2){A2=A2||self;if(!A2.getSelection){var A8=A2.document,A7=A8&&A8.selection,A5=A7&&A7.empty;if(A5){try{A7.empty();}catch(A4){}}}else{var A3=A2.getSelection,A6=A3&&A2.getSelection();if(A6&&!A6.isCollapsed){if(A6.empty){A6.empty();}else{if(A6.removeAllRanges){A6.removeAllRanges();}}}}},findAncestorByAttr:function AZ(A6,A4,A3,A2){var A7=A3?A6:A6&&A6.parentNode;while(A7&&(A7!==A2)){var A5=A7.getAttribute&&A7.getAttribute(A4);if(A5!=null){return{node:A7,value:A5};}A7=A7.parentNode;}return null;},findAncestorByName:function Au(A4,A7,A3,A2){A7=A7&&A7.toLowerCase();var A5=A3?A4:A4&&A4.parentNode;while(A5&&(A5!==A2)){var A6=A5.nodeName;if(A6&&(A6.toLowerCase()===A7)){return A5;}A5=A5.parentNode;}return null;},contains:function K(A5,A6,A3,A2){var A4=A6;if(!A3){A4=A4.parentNode;}while(A4){if(A4===A5){return true;}if(A4===A2){break;}A4=A4.parentNode;}return false;},toggleSelection:function A0(A3,A2){A3.setAttribute("unselectable",A2?"off":"on");mstrmojo.css.toggleClass(A3,"unselectable",!A2);A3.onselectstart=function(){return A2;};if(!A2){this.clearBrowserHighlights();}},preventDefault:function Y(A2,A3){A3=A3||A2.event;if(A3.preventDefault){A3.preventDefault();}else{A3.returnValue=false;}},stopPropogation:function O(A2,A3){A3=A3||A2.event;if(A3.stopPropagation){A3.stopPropagation();}else{A3.cancelBubble=true;}},firstTouch:function Af(A2,A3){return A3&&A3.touches&&A3.touches.length?A3.touches[0]:(A3||A2.event);},firstChangedTouch:function An(A2,A3){return A3&&A3.changedTouches&&A3.changedTouches.length?A3.changedTouches[0]:(A3||A2.event);},isLandscape:function X(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function Ah(A2){while(A2){var A3=A2.mstrmojoId;if(A3!==null&&A3!==undefined){return mstrmojo.all[A3];}A2=A2.parentNode;}return null;},setCaret:function H(A2,A4){if(A2.setSelectionRange){A2.focus();A2.setSelectionRange(A4,A4);}else{if(A2.createTextRange){var A3=A2.createTextRange();A3.move("character",A4);A3.select();}}},setInputSelection:function d(A2){if(A2.select){A2.focus();A2.select();}else{if(A2.createTextRange){A2.createTextRange().select();}}},setElementSelection:function f(A4){if(window.getSelection){var A2=document.createRange(),A3=window.getSelection();A2.selectNodeContents(A4);A3.removeAllRanges();A3.addRange(A2);}else{if(document.body.createTextRange){var A5=document.body.createTextRange();A5.moveToElementText(A4);A5.select();}}},getHorizontalScroll:function Ax(){return Ag().x;},getVerticalScroll:function AM(){return Ag().y;},getMaxScrollHeight:function I(){return mstrmojo.dom.windowDim().h-22;},getComputedScrollbarWidth:function Aq(A3){if(A3){var A2=mstrmojo.css.getComputedStyle(A3);if(A2){return(A3.offsetWidth-t(A2.borderLeftWidth)-t(A2.borderRightWidth)-A3.clientWidth);}}return null;},removeNode:function Ar(A4){var A3=document.getElementById(A4),A2=A3&&A3.parentNode;if(A2){return A2.removeChild(A3);}},redirectUrlToFormWrapper:function Aj(A5){var A4=function A4(A7){A7.preventDefault();var A9=A7.target,A8=A9&&A9.href;if(A8&&window&&window.FormWrapper){window.FormWrapper.openPage(A8.replace(/ /g,"%20"));}};var A6=A5&&A5.getElementsByTagName("a"),A3=A6.length;for(var A2=0;A2<A3;A2++){if(!A6[A2].openWithFormWrapper){A6[A2].addEventListener("click",A4,true);A6[A2].openWithFormWrapper=true;}}},checkTagName:function A1(A3,A2){return A3&&A3.tagName&&A3.tagName.toLowerCase()===A2;},getComputedMargin:function F(A3){var A2=mstrmojo.css.getComputedStyle(A3);return[parseInt(A2.marginTop,10)||0,parseInt(A2.marginRight,10)||0,parseInt(A2.marginBottom,10)||0,parseInt(A2.marginLeft,10)||0];}});}());(function(){mstrmojo.url=mstrmojo.provide("mstrmojo.url",{isAbsoluteURL:function(B){return(/^(http|https|ftp|file):\/\//i.test(B));},getAbsoluteURL:function(B,C){if(this.isAbsoluteURL(B)){return B;}if(C){return C+(/\/$/.test(C)?"":"/")+B;}return"http://"+B;},getWebServerUrl:function(F){var J=null;if(F){if(mstrApp!==undefined&&mstrApp.getConfiguration){J=mstrApp.getConfiguration().getCurrentProjectWebServerUrl();}}else{var D=document.location&&document.location.href;if(D){var E=D.toLowerCase();var C="/app/",L="/servlet/",K="/asp/";var B=E.indexOf(C),H=E.indexOf(L),I=E.indexOf(K);if(B>=0){J=D.substr(0,B+1);}else{if(H>=0){if(I<0){J=D.substr(0,H+1);}else{if(I>=0){var G=(H>I)?I:H;J=D.substr(0,G+1);}}}else{if(H<0){if(I>=0){J=D.substr(0,I+1);}}}}}}return J;},getFullPath:function A(J){var E=J,C=/^[A-z]:\/\//,I,D;if(!(mstrApp&&mstrApp.isDossier)||!J||J.indexOf("data:image")===0){return J;}if(C.test(J)){E=J;}else{var H=/^(\.\.\/|\.\.\\)/;var G=/^(\.\/|\.\\)/;var F=/^(\/|\\)/;J=J.replace(H,"");J=J.replace(G,"");J=J.replace(F,"");if(mstrApp&&mstrApp.getConfiguration){var B=this.getWebServerUrl(this.isTablet);if(!B){E=J;}else{E=this.getAbsoluteURL(J,B);}}}return E;}});}());mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};(function(){function Z(d){var e=[].slice.call(d),f=e[e.length-1],g=function(j,h){return j===h;};if(/function|string/.test(typeof f)){g=typeof f==="function"?f:function(j,h){return j[f]===h[f];};e=e.slice(0,e.length-1);}return{sets:e,compareFunc:g};}mstrmojo.array=mstrmojo.provide("mstrmojo.array",{indexOf:function D(e,g){var d=(e&&e.length)||0,f;for(f=0;f<d;f++){if(e[f]==g){return f;}}return -1;},indexOfMulti:function V(d,e){var j=[],h={},g=0,f=this;f.forEach(d,function(l,k){f.forEach(e,function(o,p){var q=(o===l);if(q){j[p]=h[p]=k;g++;}return !q;});});return{indices:j.length?j:null,map:h,count:g};},forEach:function S(e,k,h){var d=(e&&e.length)||0,g;for(g=0;g<d;g++){var j=g===(d-1);if(h){if(k.call(h,e[g],g,e,j)===false){break;}}else{if(k(e[g],g,e,j)===false){break;}}}return e;},map:function a(e,j){var d=(e&&e.length)||0,g=[],h;for(h=0;h<d;h++){g[h]=j(e[h],h);}return g;},filter:function J(f,g,h){var l=[],k=0,e=(f&&f.length)||0,d=(h&&h.max)||0,j;for(j=0;j<e;j++){if(g(f[j],j,f)){l[k]=f[j];k++;if(d&&k>=d){break;}}}return l;},filterOne:function M(d,e){var f=this.filter(d,e,{max:1});if(f.length){return f[0];}return null;},ensureArray:function Q(d){return[].concat(d||[]);},find:function N(e,j,f){var d=(e&&e.length)||0,g;for(g=0;g<d;g++){var h=e[g];if(h&&h[j]==f){return g;}}return -1;},distinct:function B(e,j){if(e.reduce&&!j){return e.reduce(function(l,k){if(l.indexOf(k)<0){l.push(k);}return l;},[]);}var d=(e&&e.length)||0,f,h,g=[];for(f=0;f<d;f++){h=e[f];if((h!==undefined)&&((j&&this.find(g,j,h[j])<0)||(!j&&this.indexOf(g,h)<0))){g.push(h);}}return g;},findBin:function E(f,o,q,e){var k=(e||f.length)-1,g=0,d,j=o[q];while(k-g>1){if(f[d=k+g>>1][q]<j){g=d;}else{k=d;}}if(f[g][q]===j){return g;}return f[k][q]===j?k:-1;},search:function I(s,g,k){var j=s.length,f=-1,e,q=g.toUpperCase(),d=g.length;while(j-f>1){if(s[e=j+f>>1][k].substr(0,d).toUpperCase()<q){f=e;}else{j=e;}}return j;},findMulti:function R(l,e,p){if(!p){return{indices:null,map:{},count:0};}var o=p.length,t=[],d={},q=0,g=(l&&l.length)||0,h;for(h=0;h<g;h++){var s=l[h][e],f;for(f=0;f<o;f++){if(p[f][e]===s){t[f]=h;d[f]=h;q++;break;}}}return{indices:t,map:d,count:q};},removeItem:function Y(d,f){var e=this.indexOf(d,f);if(e>-1){this.removeIndices(d,e,1);}return e;},removeItems:function O(d,j,e){var f=this.findMulti(d,j,e);if(f.count){var h=f.indices.concat().sort(this.numSorter).slice(0,f.count),g;for(g=h.length-1;g>-1;g--){d.splice(h[g],1);}}},numSorter:function b(e,d){return Number(e)-Number(d);},stringSorter:function K(f,e){var d=f.toLowerCase(),g=e.toLowerCase();if(d<g){return -1;}if(d>g){return 1;}return 0;},removeIndices:function P(d,f,e){d.splice(f,e);},insert:function F(e,d,f){if(!e){e=[];}if(d===null||d===undefined){d=e.length;}Array.prototype.splice.apply(e,[d,0].concat(f));return e;},hash:function C(e,g){g=g||{};var d=(e&&e.length)||0,f;for(f=0;f<d;f++){g[e[f]]=true;}return g;},get:function W(e,h){if(!h){return null;}var f=[],d=h.length,g;for(g=0;g<d;g++){f[g]=e[h[g]];}return f;},deepSortArr:function G(e,g,d,f){return e.sort(function(k,h){var l=k[d][g],j=h[d][g];if(!f){return(l<=j);}return(l>j)?-1:1;});},isArray:function(d){var e=Array.isArray;if(e){return e(d);}return Object.prototype.toString.call(d)==="[object Array]";},some:function L(e,f){if(!e){return false;}if(e.some){return e.some(f);}var d=false;this.forEach(e,function(h,g){d=f(h,g,e);return !d;});return d;},difference:function X(){if(arguments.length<2){throw new Error("difference should get at least 2 parameters");}var g=Z(arguments),e=g.sets,f=g.compareFunc,h=e[0],d=[].concat.apply([],e.slice(1));return h.filter(function(j){return !d.some(function(k){return f(j,k);});});},intersection:function U(){if(arguments.length<2){throw new Error("intersection should get at least 2 parameters");}var h=Z(arguments),f=h.sets,g=h.compareFunc,d=f[0],e=f.slice(1);e.forEach(function(j){d=d.filter(function(k){return j.some(function(l){return g(k,l);});});});return d;},fnReduceNumber:function A(d,e){return d+e;},applyLargeArray:function H(g,k,o,p){var h=g.length,l=1000,d,e,f,j=o;if(h){for(d=0,e=l;d<h;d=e,e+=l){f=k.apply(p,g.slice(d,e));j=k.apply(p,[j,f]);}}else{j=k.apply(p,g);}return j;}});}());(function(){var B=1,C=2,A=4;mstrmojo._IsThresholdConditionTarget=mstrmojo.provide("mstrmojo._IsThresholdConditionTarget",{_mixinName:"mstrmojo._IsThresholdConditionTarget",update:function D(G){var E=G.data.tta;var F=(E&B)>0,H=(E&C)>0;if(F&&this.preservedEnabled===undefined){this.preservedEnabled=!!this.enabled;}if(H&&this.preservedVisible===undefined){this.preservedVisible=!!this.visible;}this.set("enabled",F?false:this.preservedEnabled!==undefined?this.preservedEnabled:this.enabled);this.set("visible",H?false:this.preservedVisible!==undefined?this.preservedVisible:this.visible);this.set("required",(E&A)>0);if(this._super){this._super(G);}}});}());mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7,HISTOGRAM:8,BOXPLOT:9,WATERFALL:10};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={UNDEFINED:-1,NONE:0,HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",VIS_TYPE:"visType",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",DATA_LABEL_FONT_SIZE_CONSTRAINT:"DataLabelFontSizeConstraint",DATA_LABEL_TEXT_ANGLE:"DataLabelTextAngle",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn",SHOW_BOTH_TOTALS:"totalShw:intSumShw"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_NGM_GRID_LINES_SHOW:"allNGMGridLnShw",X_GRID_LINES_SHOW:"xGridLnShw",Y_GRID_LINES_SHOW:"yGridLnShw",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr",SELECTION_LIMIT:"slctnLmt",CONTAINER_FIT_MODE:"cntrFitMode",SHOW_MODEBAR:"showModeBar",MEAN_SD:"meanSD",POINT_SIZE:"ptSize",PTSZ_TYPE:"ptSzType",JITTER:"jitter",JTR_TYPE:"jtrType",POINT_POS:"ptPos",PTPOS_TYPE:"ptPosType",SHOW_OUTLIERS:"shwOutliers",CUSTOM_BINS_MODE:"custMode",MANUAL_BINS_MODE:"manualBinsMode",RANGE_TYPE:"rangeType",NUM_BINS:"numBins",XBINS_START:"xBinsStart",XBINS_END:"xBinsEnd",XBINS_SIZE:"xBinsSize",HAS_UNCHECKED_AUTO:"hasUncheckedAuto",HAS_UNCHECKED_DATASET_RANGE:"hasUncheckedDstRng",TOTAL_SHOW:"totalShw",TOTAL_LABEL:"totalLabel",INT_SUM_SHOW:"intSumShw",POSITIVE_COLOR:"posClr",NEGATIVE_COLOR:"negClr",TOTAL_COLOR:"totalClr",INT_SUM_COLOR:"intSumClr",INT_SUM_FULL:"intSumFull"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={NONE:1,AUTOMATIC:2,COMPACT:3,MANUAL:4};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.EnumNGMGridLines={SHOW_Y:1,SHOW_X:2,SHOW:3,HIDE:4,AUTO:5};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.gm.EnumNGMSubtype={CLUSTERED:0,STACKED:1,PERCENT:2};mstrmojo.gm.EnumBoxPlotMean={NO_MEAN:0,ONLY_MEAN:1,MEAN_STDEV:2};mstrmojo.gm.EnumBoxPlotOutliers={OUTLIERS:0,ALL_POINTS:1,JITTER:0,JTR_MAN:0.5,POINT_POS:0,POS_MAN:-1.8,POINT_SIZE:6,SIZE_MAN:10,MANUAL:1};mstrmojo.gm.EnumHistogram={AUTOMATIC:1,MANUAL:0,CUST_INPUT:2,DATASET:3,BY_BIN_SIZE:4,BY_BIN_NUMBER:5};mstrmojo.gm.EnumContainerFitModes={AUTOMATIC:0,FIT_TO_CONTAINER:1,FIT_TO_CONTENT:2};mstrmojo.EnumRWUnitType={LAYOUT:0,HEADER:2,FOOTER:3,SUBSECTION:4,DETAILS:5,PAGEHEADER:6,PAGEFOOTER:7,PANELSTACK:8,PANEL:9,UNITCONTAINER:11,GRID:521,GRAPH:522,GRIDGRAPH:527,RECTANGLE:101,IMAGE:102,LINE:105,TEXTFIELD:106,HTMLCONTAINER:107,SELECTOR:111,ROUNDEDRECTANGLE:112,VISUALIZATION:114,MOJOVISUALIZATION:115};(function(){mstrmojo.models.template.Title=mstrmojo.declare(null,null,{init:function G(J){this.title=J.title;},getActionType:function(){return this.title.at;},getDrillPath:function(){return this.title.dp;},getHeaderValues:function B(){return this.title.es;},getHeaderName:function F(J){return this.title.es[J].n;},getHeaderId:function F(J){return this.title.es[J].id;},getForms:function E(){return this.title.fs;},getFormId:function D(){return this.title.fid;},getFormType:function I(){return this.title.ftp;},getUnitId:function H(){return this.title.id;},getLinkMap:function C(){return this.title.lm;},getName:function A(){return this.title.n;},getUnitDssType:function(){return this.title.otp;},getSelectorControl:function(){return this.title.sc;}});}());(function(){var A=/^mstrmojo./;mstrmojo.DynamicClassFactory={newComponent:function(C,B,F){var H=C.prototype.scriptClass.replace(A,"");for(var E=0,D=B&&B.length||0;E<D;E++){if(!B[E]._mixinName){throw new Error('Mixins must have a "_mixinName" property to be used with DynamicClassFactory');}H+="_"+B[E]._mixinName.replace(A,"");}var G=mstrmojo[H];if(!G){G=mstrmojo.declare(C,B,F);mstrmojo[H]=G;}return G;}};}());if(!mstrmojo.LoadedExternalJSURLs){mstrmojo.LoadedExternalJSURLs={};}function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}if(!mstrmojo._LoadsScript){mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(B){if(!B){return false;}if(typeof this[B]==="function"){return true;}var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof A==="string"){this.requiresCls(A);return typeof this[B]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof A==="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresExternalScripts(G,H,C){if(G&&G instanceof Array){if(G.length===0){if(H){H.call(C);}return false;}if(G[0]&&G[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[G[0].url]){G.splice(0,1);return this.requiresExternalScripts(G,H,C);}var A=document.createElement("script"),D=!!document.all,B=G[0].url,F=G[0].onError;if(B.substr(0,7)==="file://"){B=B.substr(7);}else{if(mstrApp.isSingleTier&&B.substr(0,4)!=="http"){B="http:"+B;}}A.type="text/javascript";A.src=B;if(F){A.onerror=function(){if(F&&F.callback&&C){F.callback.call(C,F.params);}};}if(!G[0].callbackParamName){if(D){A.onreadystatechange=function(){if(A.readyState==="loaded"||A.readyState==="complete"){A.onreadystatechange=null;A.onerror=null;if(G.length>1){mstrmojo.LoadedExternalJSURLs[G.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(G,H,C);}else{if(G.length===1){mstrmojo.LoadedExternalJSURLs[G[0].url]=true;if(H){H.call(C);}}}}};}else{A.onload=function(){A.error=null;A.onload=null;if(G.length>1){mstrmojo.LoadedExternalJSURLs[G.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(G,H,C);}else{if(G.length===1){mstrmojo.LoadedExternalJSURLs[G[0].url]=true;if(H){H.call(C);}}}};}}else{if(G[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var E=this;window.setTimeout(function(){E.requiresExternalScripts(G,H,C);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+G[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=G;mstrmojo._LoadsScript.callback=H;mstrmojo._LoadsScript.esScritsContext=C;}}document.getElementsByTagName("head")[0].appendChild(A);}}});}(function(){var E=new RegExp("^[A-Z0-9]{8}[A-Z0-9]{4}[A-Z0-9]{4}[A-Z0-9]{4}[A-Z0-9]{12}$","i");var A=2147483648;var G=Array.apply(null,Array(256)).map(function(H,I){return(I<16?"0":"")+I.toString(16).toUpperCase();});var F=(window.crypto&&window.crypto.getRandomValues)?function(){var H=new Uint32Array(4);window.crypto.getRandomValues(H);return{d0:H[0],d1:H[1],d2:H[2],d3:H[3]};}:function(){return{d0:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d1:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d2:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d3:Math.abs(Math.floor(Math.random()*A)^(+new Date()))};};function D(H){var L=H.d0,K=H.d1,J=H.d2,I=H.d3;return G[L&255]+G[L>>8&255]+G[L>>16&255]+G[L>>24&255]+G[K&255]+G[K>>8&255]+G[K>>16&15|64]+G[K>>24&255]+G[J&63|128]+G[J>>8&255]+G[J>>16&255]+G[J>>24&255]+G[I&255]+G[I>>8&255]+G[I>>16&255]+G[I>>24&255];}mstrmojo.UUID=mstrmojo.provide("mstrmojo.UUID",{create:function C(){return D(F());},isUUID:function B(H){return H&&E.test(H.toString());}});mstrmojo.UUID.EMPTY="00000000000000000000000000000000";}());mstrmojo.mstr.EnumDSSXMLBaseFormType={DssXmlBaseFormReserved:0,DssXmlBaseFormHidden:-1,DssXmlBaseFormDateTime:1,DssXmlBaseFormNumber:2,DssXmlBaseFormText:3,DssXmlBaseFormPicture:4,DssXmlBaseFormUrl:5,DssXmlBaseFormEmail:6,DssXmlBaseFormHTMLTag:7,DssXmlBaseFormDate:8,DssXmlBaseFormTime:9,DssXmlBaseFormSymbol:10,DssXmlBaseFormBigDecimal:11,DssXmlBaseFormPhoneNumber:12};mstrmojo.mstr.EnumDSSXMLBaseFormType.convertDataType2BaseFormType=function(B){var A={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2};return A[B]||0;};(function(){mstrmojo._IsSelectorTarget=mstrmojo.provide("mstrmojo._IsSelectorTarget",{_mixinName:"mstrmojo._IsSelectorTarget",setDirty:function A(C){var D=(C?"add":"remove")+"DirtyKey",B=this.parent;if(B&&B[D]){this.parent[D](this.k);}}});}());(function(){function A(C){return function B(H){if(!this.domNode){return 0;}var G=this.children;if(H!==undefined&&!isNaN(H)){G=(G&&[G[H-1]]);}var E=(G&&G.length)||0,D=0,F;for(F=0;F<E;F++){D+=G[F]["get"+C]();}return D;};}mstrmojo._CanMeasureChildren=mstrmojo.provide("mstrmojo._CanMeasureChildren",{getHeight:A("Height"),getWidth:A("Width")});}());mstrmojo.vi.enums.EnumVisFilterType={KEEP_ONLY:0,ADV_QUALIFICATION:1,LINKING:2,DRILLING:3};mstrmojo._ShowsStatus=mstrmojo.provide("mstrmojo._ShowsStatus",{showStatus:function showStatus(A,G,D){var C=this._STATUS;if(!this.hasRendered||!C){return ;}var E=C.style;if(!A){if(this.showingStatus){E.display="none";}}else{if(C){var F=this._STATUS_TXT;if(F){F.innerHTML=G||"";}var B=this._STATUS_BAR;if(B){B.style.width=(D||0)+"%";}if(!this.isStatusBarPositioned){E.top=Math.max((this.scrollboxHeight||0)-50,12)+"px";this.isStatusBarPositioned=true;}if(!this.showingStatus){E.display="block";}}}this.showingStatus=A;},updateStatus:function updateStatus(A,B){this.showStatus(this.showingStatus,A,B);}});(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());(function(){var E=[];function H(L,K){E.push({n:L,args:K});}function I(N,M,K){var L=false;switch(N._loadingStatus){case 0:if(google&&google.maps&&google.maps.Geocoder){N._loadingStatus=2;L=true;}else{H(M,K);N._loadScript();}break;case 1:H(M,K);break;case 2:L=true;break;}return L;}mstrmojo.GeoLocation=mstrmojo.provide("mstrmojo.GeoLocation",{_altitude:null,_latitude:null,_longitude:null,_callbacks:[],_getPos:function(){if(mstrMobileApp&&mstrMobileApp.getGeoLocation){mstrmojo.GeoLocation._getPos=function(){mstrMobileApp.getGeoLocation("mstrmojo.GeoLocation.updateLocation");};}else{if(navigator&&navigator.geolocation){mstrmojo.GeoLocation._getPos=function(){navigator.geolocation.getCurrentPosition(function(K){mstrmojo.GeoLocation.updateLocation(K);},function(K){switch(K.code){case K.TIMEOUT:alert("Retrieve Geo Position: Timeout, please try it again ");break;case K.PERMISSION_DENIED:alert("Retrieve Geo Position: Permission to use location service has been denied ");break;case K.POSITION_UNAVAILABLE:alert("Retrieve Geo Position: Position unavaiable ");break;}mstrmojo.GeoLocation.updateLocation(K);},{maximumAge:10000,timeout:10000});};}else{mstrmojo.GeoLocation._getPos=function(){alert("no available Geo Location service");};}}mstrmojo.GeoLocation._getPos();},getCurrentLocation:function(K){this._callbacks.push(K);if(!this._pending){this._pending=true;this._getPos();}},updateLocation:function(P){var M=mstrmojo.GeoLocation;var L,K;var O=P&&P.coords;var N=P&&P.err;if(O){M._latitude=O.latitude;M._longitude=O.longitude;K=M._callbacks;for(L=0;L<K.length;L++){K[L].success(O.latitude,O.longitude);}}else{if(N){K=M._callbacks;for(L=0;L<K.length;L++){K[L].failure("Error in updating geo location information."+N);}}else{K=M._callbacks;for(L=0;L<K.length;L++){K[L].failure("Error in updating geo location information.");}}}M._callbacks=[];M._pending=false;},getCurrentAddress:function(K){this.getCurrentLocation({success:function(N,L,M){mstrmojo.GeoLocation.findAddress({lat:N,lng:L},{success:K.success&&K.success||mstrmojo.emptyFn,failure:K.failure&&K.failure||mstrmojo.emptyFn});},failure:K.failure&&K.failure||mstrmojo.emptyFn});},count:null,cbs:null,getUniqId:function D(){var K;if(!this.count){K=this.count=1;}else{K=this.count++;}return"fa"+K;},findAddress:function F(L,K){if(!mstrMobileApp||!mstrMobileApp.useNativeMap||!mstrMobileApp.useNativeMap()){this.findAddressUsingJsAPI(L,K);}else{this.findAddressUsingNativeAPI(L,K);}},findAddressUsingJsAPI:function J(M,K){if(I(this,"findAddress",[M,K])){var L=new google.maps.Geocoder();L.geocode({location:new google.maps.LatLng(M.lat,M.lng)},function(O,N){if(N==google.maps.GeocoderStatus.OK&&O[0]){K.success(O);}else{K.failure(O,N);}});}},findAddressUsingNativeAPI:function G(M,K){var L=this.getUniqId();if(this.cbs==null){this.cbs={};}this.cbs[L]=function(N){if(N.status=="OK"){K.success(N.results);}else{K.failure(N.results,N.status);}};mstrMobileApp.findAddress(M.lat,M.lng,"mstrmojo.GeoLocation.findAddressCallback",L);},findAddressCallback:function B(L,K,M){this.cbs[M].apply(mstrmojo.GeoLocation,[L]);},_loadingStatus:0,_loadScriptCallBack:function A(){this._loadingStatus=2;for(var K=0;K<E.length;K++){var L=E[K];mstrmojo.GeoLocation[L.n].apply(mstrmojo.GeoLocation,L.args);}},_loadScript:function C(){this._loadingStatus=1;var K=document.createElement("script");K.type="text/javascript";K.src="http://maps.google.com/maps/api/js?sensor=false&callback=mstrmojo.GeoLocation._loadScriptCallBack";document.body.appendChild(K);}});})();mstrmojo.android.EnumMenuOptions=mstrmojo.provide("mstrmojo.android.EnumMenuOptions",{HOME:1,SETTINGS:2,HELP:4,LEARN:8,ALL:255,REFRESH:256,FULL_SCREEN:512,GROUP_BY:768,PAGE_BY:1024,REPROMPT:1280,DELETE:1536,SEARCH:1792,SCAN:2048,MAP_ROADMAP:2304,MAP_SAT:2560,MAP_HYBRID:2816,MAP_TERRAIN:3072,DOC_LAYOUTS:3328,TRANSACTIONS_QUEUE:3584,ADD_SERVER:3840,ADD_PROJECT:4096,ABOUT:4352,SHARE:4608,ABOUT_RESULTSET:4864,ANNOTATION:5120});(function(){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",G=String.fromCharCode;function D(H){H=H.replace(/\r\n/g,"\n");var I="";for(var K=0;K<H.length;K++){var J=H.charCodeAt(K);if(J<128){I+=G(J);}else{if((J>127)&&(J<2048)){I+=G((J>>6)|192);I+=G((J&63)|128);}else{I+=G((J>>12)|224);I+=G(((J>>6)&63)|128);I+=G((J&63)|128);}}}return I;}function F(L){var H="",J=0,M=0,K=0,I=0;while(J<L.length){M=L.charCodeAt(J);if(M<128){H+=G(M);J++;}else{if((M>191)&&(M<224)){K=L.charCodeAt(J+1);H+=G(((M&31)<<6)|(K&63));J+=2;}else{K=L.charCodeAt(J+1);I=L.charCodeAt(J+2);H+=G(((M&15)<<12)|((K&63)<<6)|(I&63));J+=3;}}}return H;}mstrmojo.base64=mstrmojo.provide("mstrmojo.base64",{decodeHttpHeader:function E(K){var I=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(K&&K.indexOf("=?UTF-8?B?")===0){var J="",H;while((H=I.exec(K))!==null){J+=mstrmojo.base64.decode(H[1]);}return J;}return K;},encode:function B(J){var H="";var Q,O,M,P,N,L,K;var I=0;J=D(J);while(I<J.length){Q=J.charCodeAt(I++);O=J.charCodeAt(I++);M=J.charCodeAt(I++);P=Q>>2;N=((Q&3)<<4)|(O>>4);L=((O&15)<<2)|(M>>6);K=M&63;if(isNaN(O)){L=K=64;}else{if(isNaN(M)){K=64;}}H+=A.charAt(P)+A.charAt(N)+A.charAt(L)+A.charAt(K);}return H;},decode:function C(J){var H="",I=0;var Q,O,M,P,N,L,K;J=J.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(I<J.length){P=A.indexOf(J.charAt(I++));N=A.indexOf(J.charAt(I++));L=A.indexOf(J.charAt(I++));K=A.indexOf(J.charAt(I++));Q=(P<<2)|(N>>4);O=((N&15)<<4)|(L>>2);M=((L&3)<<6)|K;H+=G(Q);if(L!==64){H+=G(O);}if(K!==64){H+=G(M);}}H=F(H);return H;}});})();(function(){mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function D(E){if(!E||!E.length){return mstrmojo.emptyFn;}return function(){var F=E.length,G;for(G=0;G<F;G++){E[G].apply(this,arguments);}};},wrapMethods:function C(J,H){function I(L,K){K=K||{};mstrmojo.hash.forEach(L,function(M,N){K[N]=(K.hasOwnProperty(N)&&typeof M==="function")?mstrmojo.func.composite([M,K[N]]):M;});return K;}if(arguments.length<3){return I(J,H);}var F=arguments.length,G=[].slice.call(arguments,0,F-1).reverse(),E=arguments[F-1];mstrmojo.array.forEach(G,function(K){E=I(K,E);});return E;},override:function A(G,E){var F=function(J,I){return function H(){var L=this._super,K;this._super=I||mstrmojo.emptyFn;try{K=J.apply(this,arguments||[]);}finally{this._super=L;}return K;};};E=E||{};mstrmojo.hash.forEach(G,function(H,I){E[I]=F(H,E[I]);});return E;},throttle:function(G,I,E){var F,K,N,L=null,J=0,M=E||{};var H=function(){J=M.leading===false?0:mstrmojo.date.now();L=null;N=G.apply(F,K);F=K=null;};return function(){var O=mstrmojo.date.now();if(!J&&M.leading===false){J=O;}var P=I-(O-J);F=this;K=arguments;if(P<=0){clearTimeout(L);L=null;J=O;N=G.apply(F,K);F=K=null;}else{if(!L&&M.trailing!==false){L=setTimeout(H,P);}}return N;};},debounce:function(H,J,G){var M,L,F,K,N,E=mstrmojo.date.now;var I=function(){var O=E()-K;if(O<J){M=setTimeout(I,J-O);}else{M=null;if(!G){N=H.apply(F,L);F=L=null;}}};return function(){F=this;L=arguments;K=E();var O=G&&!M;if(!M){M=setTimeout(I,J);}if(O){N=H.apply(F,L);F=L=null;}return N;};},addMethods:function B(F,E){E=E||{};mstrmojo.hash.forEach(F,function(G,H){if(!E.hasOwnProperty(H)&&typeof G==="function"){E[H]=G;}});return E;}});}());(function(){mstrmojo.android.NativeBridge=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.android.NativeBridge",selectNavItem:function A(F){var D=F.queryKey,E={act:parseInt(D.act,10),fromNav:D.fromNav==="true",n:D.n};mstrApp.rootController.jumpTo(E);},selectLastOpenedDoc:function C(F){var D=F.queryKey,E={renderIdx:parseInt(D.renderIdx,10),did:D.did,n:D.n,projectID:D.projectID,st:parseInt(D.st,10),ttl:D.ttl,xId:D.xId,hsc:D.hsc==="true"};mstrApp.rootController.jumpTo(E);},goUp:function B(){mstrApp.closeAllDialogs();mstrApp.rootController.goUp();}});}());(function(){function Q(V,R,S){if(V.nodeType===3&&R){return V;}else{var U=(R&&V.nodeType===1&&V.lastChild)?V.lastChild:F(V,S);return U?D(U,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(V,R,S){if(V.nodeType===3&&R){return V;}else{var U=(R&&V.nodeType===1&&V.firstChild)?V.firstChild:B(V,S);return U?E(U,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(U,V){var R=0,S;if(U.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(U);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(U);R=S.text.length;}}else{R=I(U).length;}return V===R?this.EDGE.EDGE_END:(V===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(V,S){if(!V.offsetParent){return ;}var U=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(V);R.collapse(S);U.removeAllRanges();U.addRange(R);}else{R.moveToElementText(V);R.collapse(S);R.select();}},collapseOnTextNode:function L(V,W){var U=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(V,true);S.setStart(R,W);S.collapse(true);U.removeAllRanges();U.addRange(S);}else{S.moveToElementText(V);S.collapse(true);S.move("character",W);S.select();}},collapseOnTextNodeIE:function C(S,U){var V=M(S,true),R;while(V!==null){R=I(V).length;if(R>=U){this.collapseOnTextNode(V,U);break;}else{U-=R;V=M(V,false);}}},getRangeInfo:function J(Y,g){var a=null,o,e=this.getRange(),d;if(Y&&Y===e.startContainer){var j=e.startContainer.firstChild,V=j&&j.firstChild,f=V&&V.firstChild;if(f){e.setStart(f,e.startOffset);e.setEnd(f,e.endOffset);}}if(window.getSelection){var X=function(q,t,s){var p=q.cloneRange();p.collapse(s);p.setStartBefore(t);return p.toString().length;},S=e.startContainer,h=e.startOffset;if(S.nodeType===1){h=X(e,S,true);}a={collapsed:e.collapsed,startContainer:S,startOffset:g?g.startOffset:h};if(!e.collapsed){var W=e.endContainer,R=e.endOffset;if(W.nodeType===1){R=X(e,W,false);}a.endContainer=W;a.endOffset=R;}a.range=e;}else{var l,b,Z=function(t,u){var s=t.duplicate(),p=document.body.createTextRange(),q;s.collapse(u);q=s.parentElement();p.moveToElementText(q);p.setEndPoint("EndToStart",s);return{container:q,offset:p.text.length};},k=Z(e,true),U;a={collapsed:(e.compareEndPoints("StartToEnd",e)===0),startContainer:k.container,startOffset:k.offset};if(!a.collapsed){U=Z(e,false);a.endContainer=U.container;a.endOffset=U.offset;}}return a;},collapse:function O(S){if(window.getSelection){var U=this.getSelection();if(S){U.collapseToStart();}else{U.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(U){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(U);R.select();}},selectMultipleNodes:function N(X,S,Y,V){var W=this.getSelection(),U=this.getRange();if(window.getSelection){U.setStart(X,S);U.setEnd(Y,V);W.removeAllRanges();W.addRange(U);}else{X=(X.nodeType===3)?X.parentNode:X;U.moveToElementText(X);U.move("character",S);Y=(Y.nodeType===3)?Y.parentNode:Y;var R=document.body.createTextRange();R.moveToElementText(Y);R.move("character",V);U.setEndPoint("EndToStart",R);U.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());mstrmojo.vi.models.EnumFieldTypes={TEXT:3,IMAGE:2,HTML_CONTAINER:10};mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};(function(){function A(C){return C.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");}mstrmojo._ImageHelper=mstrmojo.provide("mstrmojo._ImageHelper",{getImage:function B(D){var E=mstrApp,C=E.getConfiguration();if(D){if(D.indexOf("\\")>=0){D=D.replace(/\\/g,"/");}D=A(D);if(D===decodeURI(D)){D=encodeURI(D);}}if(C&&D&&D.indexOf("://")===-1){D=C.getHostUrlByProject(E.getCurrentProjectId())+D;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(D)):D;}});}());(function(){mstrmojo._ReportDataService=mstrmojo.provide("mstrmojo._ReportDataService",{_mixinName:"mstrmojo._ReportDataService",getPageByTree:function A(C){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},C);},pageByUnitsToKeys:function B(F){var C=[],D;for(D=0;D<F.length;D++){var E=F[D];if(mstrApp.useBinaryFormat){C.push(E.v);}else{C=C.concat([E.id,E.tp,E.v]);}}return C.join("\u001F");}});}());mstrmojo.vi.enums.EnumFilterClearActionType={CLEAR_ALL:0,CLEAR_KEEP_ONLY:1,CLEAR_ADV_QUALIFICATION:2,CLEAR_LINKING:3,CLEAR_KEEP_ONLY_AND_LINKING:4,CLEAR_DRILLING:5};(function(){var E=1;var B=2;var J=4;var F=8;function D(L,K){var M=L.rw;if(!M){return false;}return K?(M.row.bb+M.row.bc<M.row.tc):(M.wsr+M.wmr<M.tr);}mstrmojo._XtabSeamlessIncrementalFetch=mstrmojo.provide("mstrmojo._XtabSeamlessIncrementalFetch",{_mixinName:"mstrmojo._XtabSeamlessIncrementalFetch",useSeamlessIncFetch:true,preBuildRendering:function G(){var K=this._super();if(this.useSeamlessIncFetch){this.currentPageNum=0;this.currentPageNum=this.loadingPageNum=0;this.endFetching=!D(this.gridData,this.isDocXtab);}return K;},aggregateCP:function H(N,M,K){var O=(M===J)?this.rhsCP:this.valuesCP;if(O.scriptClass!=="mstrmojo.XtabVACP"){O=mstrmojo.hash.clone(O);var L=new mstrmojo.XtabVACP();L.cps=[O,N];mstrmojo.hash.copy(L,(M===J)?this.rhsCP:this.valuesCP);}else{O.cps.push(N);}if(K){K.cp.initContent();}},onScrolledToLastRow:function C(){if(this.useSeamlessIncFetch){var L=this.currentPageNum,K=this.loadingPageNum;if(K<=L&&!this.endFetching){this.loadingPageNum=L+1;this.download(1+L);}}},download:function A(N){var P=this.gridData.rw,M=P.row,O=P.col,L=M.bc;this._isDownloading=this.rhsCP.isDownloading=this.valuesCP.isDownloading=true;if(L){var K={blockNum:N};this.controller.onDownloadGridData(this,this.model.getDownloadAction(N*L+1,L,O.bb,O.bc,this.id,K));}},dataDownloaded:function I(N,U){if(this._isDecelerating){this._cachedDownload={node:N,memo:U};return ;}var P=this._cachedDownload;if(P){if(N){alert("Missed download");}N=P.node;U=P.memo;delete this._cachedDownload;}var V=N.data,S=this.zones;this._firstRowHeight=this._firstRowHeight||this.contentNode.rows[0].offsetHeight;var M=this.initCP(V,this.interactiveCellsArray,J,V.ghs.rhs,V.gts.row,E),O=this.initCP(V,this.interactiveCellsArray,F,V.gvs);this.aggregateCP(M,J,S._BL);this.aggregateCP(O,F,S._BR);var L=M.startIndexInContainer,Q=L+M.rc-1;var R=function(W){if(W){W.start=L;W.end=Q;W.renderGrid(true);}};var K=this.id;window.setTimeout(function(){var W=mstrmojo.all[K];R(S._BL);R(S._BR);if(!D(V,W.isDocXtab)){W.endFetching=true;}W.setOffsets();W.currentPageNum++;W._isDownloading=false;},0);}});}());mstrmojo.android.EnumOrientationTypes={PORTRAIT:1,LANDSCAPE:2};mstrmojo.vi.enums.EnumFeatures={SUPPORT_RESPONSIVE:"support-responsive",SUPPORT_RESPONSIVE_RESIZING:"support-responsive-resizing",SUPPORT_GHOST_IMG:"support-ghost-img",SUPPORT_NLP:"use-natural-language",SUPPORT_CONDITION_METRIC:"support_condition_metric",USE_WORKSTATION_NAMING_STYLE:"use-workstation-naming-style",SUPPORT_TOC_UPDATEPOISITION:"support-toc-updatePosition",SUPPORT_LIVEMODE:"support-livemode",NUMBER_FORMATTING:"number-formatting",SAVE_ANALYSIS:"save-analysis",INSERT_NEW_METRIC:"insert-new-metric",DATA_ENGINE_VERSION:"data-engine-version",WEB_DRILL_AND_LINK:"web-drill-and-link",WEB_IMPORT_DATABASE:"web-import-database"};mstrmojo.mstr.EnumWebAPIErrorCodes={MSI_INBOX_MSG_NOT_FOUND:-2147468986,POOL_OBJECT_NOT_FOUND_BY_ID:-2147467398,DOCDATA_PREPARE_TASK_REPORT_INCOMP:-2147466604,AUTHEN_E_LOGIN_FAIL_EXPIRED_PWD:-2147216963,AUTHEN_E_LOGIN_FAILED_NEW_PASSWORD_REQD:-2147216960,AUTHEN_E_LOGIN_FAIL:-2147216959,E_INVALID_EXPRESSION:-2147214839,MSI_ADDUSERJOB_ERROR:-2147209185,E_MSI_USERMGR_USER_NOTFOUND:-2147209051,MSI_SERVER_NOT_FOUND:-2147206923,DFC_QRYENG_RES_TRUNC:-2147205488,MSI_CUBE_NOT_PUBLISHED:-2147072488,ERROR_CREATE_REPORT_INSTANCE:-2147216373,E_UNUSED:4294967295,UICMD_DEFAULT_ERROR:10};mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle",NEW_GRAPH_MATRIX:"NewGraphMatrixVisualizationStyle",MAPBOX:"MapboxVisualizationStyle",KPICARD:"KPICardVisualizationStyle"};(function(){mstrmojo.requiresDescs(9380,9381,9382,9383,9384,9385,9379,15106,15107,10639,10159,9705,9704);mstrmojo.DI.DIConstants=mstrmojo.provide("mstrmojo.DI.DIConstants",{invalidObjectNameChars:'\\"[]',invalidObjectNameCharsRegex:/[\\"\[\]]/,sourceItemLinkType:{dbList:0,oauthPara:1},setDefaultOAuthParamCMD:"MSTR_DEFAULT_OAUTH_PARAMS",actions:{none:0,importSource:1,editImport:2,transform:3,changeSheet:4,publish:5,changeMappings:6,refine:7,quickPreview:8,savePublish:9,getFlatPreview:10,refreshData:11,mergeCube:12},localStorageKey:{HGOSFileTypeTooltipPop:"HGOSFileTypeTooltipPop"},requestFlag:{mapping:1,preview:2,sourceInfo:4,refineSourceInfo:8,sheets:16,crb:32,transformations:64,transformedPreview:128,relationship:256,stateInfo:512,anyState:268435456,fullData:1024,refineInnerData:2048},formMappingFlag:{formMappingFlagReserved:0,formMappingFlagRemoveGeoRole:1,formMappingFlagRemoveTimeRole:2,formMappingFlagRemoveDeriveFlags:4},browseFlag:{reportBindingTable:1,dataPreview:4,publish:16,cubeConfig:68,reportLevelProperty:256},importBehaviorFlag:{reserved:0,newColumnsSilent:1,dataTypeSilent:2},saveAsFlags:{saveAsOverWrite:32,saveAsManaged:524288,saveAsDDA:33554432,saveAsInMemory:67108864,saveAsWithPrompts:4096,saveAsWithAnswers:4},connectLiveSupport:{connectLiveSupportUnknown:0,connectLiveSupportDDAOrInMemory:1,connectLiveSupportInMemoryOnly:2,connectLiveSupportDDAOnly:3},xdaType:{excel:272,text:288,refine:384,salesforce:337,querybuilder:352,ffsql:304,mdx:2,customFreeFormSQL:3,googleAnalytics:390,googleBigQuery:341,googleBigQueryFFSQL:342,googleBigQuerySingleTable:345,qbSingleTable:368,twitter:343,facebook:344,dataImport:256,projectsImport:400,sparkDataset:416,dataImportFileExcel:16|256,dataImportFileText:32|256,dataImportCustomSQL:48|256,dataImportTable:64|256,dataImportOAuth:80|256,dataImportBISource:144|256,dataImportOAuthSalesforce:1|336,dataImportOAuthGDocs:2|336,dataImportOAuthGDrive:2|336,dataImportOAuthDropbox:3|336,dataImportOAuthGAnalytics:4|336,dataImportOAuthGBigQuery:5|336,dataImportOAuthGBigQueryFFSQL:6|336,dataImportOAuthGBigQuerySingleTable:9|336,spark:160|256},fileTypes:[{n:"CSV/TXT",v:"CSV"},{n:"PARQUET",v:"PARQUET"},{n:"AVRO",v:"AVRO"},{n:"ORC",v:"ORC"},{n:"JSON",v:"JSON"},{n:"PARQ",v:"PARQUET",visible:false}],sourceInfoDesc:{json:"DB_FILE_TYPE_JSON"},sourceType:{file:1,salesforce:2,dropbox:3,googleDrive:4,googleAnalytics:5,googleBigQuery:6,querybuilder:7,mstrFile:8,mdx:9,hadoop:10,twitter:11,facebook:12,bisource:13,remoteProject:14,importfromcube:15,dataFromPushApi:16,newConnector:17,cloudElement:18},sourceSubtype:{localFile:1,url:2,salesforce:3,dropbox:4,googleDrive:5,googleAnalytics:6,googleBigQuery:7,querybuilder:8,samplefile:9,clipboard:10,googleBigQueryFFSQL:11,searchOnSource:12,mdx:13,hadoop:14,twitter:15,facebook:16,bisource:17,remoteProject:18,googleBigQuerySingleTable:19,hanaSingleTable:20,publicData:21,importfromcube:22,dataFromPushApi:23,cloudElement:24,},backendSourceSubtype:{localFile:65537,url:65539,samplefile:65540,clipboard:65538,newConnector:65544,cloudElement:65552,hadoopFileBrowser:65541,customSQL:131073,customSQLWizard:131074,singleTable:131075,bISources:131076,searchAsASource:131078,salesforce:196609,dropbox:196610,facebook:196611,twitter:196612,googleDrive:196613,googleAnalytics:196614,googleBigQuery:196615,googleBigQueryFFSQLModel:196616,googleBigQuerySingleTable:196617,OLAPSources:327681,publicData:65542,dataFromPushApi:65543,dataFromPushApiV2:65545,cloudElement:65552,},sourceItemType:{file:0,url:1,database:2,hadoop:3,olap:4,publicData:5,salesforce:6,googleAnalytics:7,googleBigQuery:8,googleDrive:9,dropbox:10,searchAsASource:11,clipboard:12,bISources:13,facebook:14,twitter:15,samplefile:16,importFromCube:17,addNewConnector:18,newConnector:19,cloudElement:20,unknow:-1},columnState:{reserved:0,unchanged:1,newColumn:2,missing:4,changed:8},operationMode:{create:0,edit:1,refresh:2,subscribe:3,enterCredentials:4,oauth:5,pickTable:6,hadoopPickTable:7,ffsql:8,hadoopFFsql:9},statusCode:{obtainSource:-2147071874,xformsError:-2147071872,mappingError:-2147071871,edit:1,republish:2,schedule:3,enterCredentials:4,pickTable:5,hadoopPickTable:6,ffsql:7,hadoopFFsql:8},pageType:{intro:0,file:1,database:2,emmaPreview:3,redirect:4,analytics:5,dataSelection:6,suggestNewSource:7,sourceIntro:8,sourceObjects:10,sampleFiles:11,dataset:12,externalPage:13,preview:14,clipboard:15,refine:16,parse:17,mstrFile:18,allProjectSource:19,hadoop:20,twitter:21,facebook:22,sourceObjectsDnD:23,schedule:24,publicData:25,republish:26,sourceAdmin:27,importFromCube:28,addNewConnector:29,newConnector:30,addConnectorList:31,cloudElement:32},backendError:{overwriteObject:-2147212339,noPermission:-2147214579,invalidObjectName:-2147213715,unexpectedDataType:-2147212539,noExternalSession:-2147071844,noPrivilege:-2147212082,salesforceUnsavedReport:-2147212081,salesforceObsoleteReport:-2147212080,maxSizeExceeded:-2147212076,maxSizeExceededURL:-2147212121,salesforceUnresolvedFilter:-2147212074,incrementalRefresh:-2147212287,invalidUrl:-2147212062,fileVersionError:-2147212064,emptySheet:-2147212144,refreshTokenUnavailable:-2147202875,cubeQuotaExceeded:-2147071825,notEnoughSpace:-2147071811,importedURLInvalid:-2147212122,unsupportedFileFormat:-2147212063,objectNameTooLong:-2147217407,noExternalSourceInfo:-2147215346,memoryConsumptionExceeded:-2147215346,cubeQuotaReached:-2147071870,switchingFileType:-2147212140,memoryGovernSizeExceeded:-2147181051,stringTooLong:-2147213718,missingColumn:-2147071871,dataDiscoveryError:-2147211998,refineApplyError:-2147202299,serverOutOfMemory:-2147212055,columnCountMatchError:-2147467259,incompatibleDataTypeError:-2147211983,reportTimeout:-2147212335,requestTimeout:-2147206497,databaseCredentialsNotAvailable:-2147212037,ddasupportIncompatible:-2147215326,mergeInvalidXdatype:-2147215325,notFullyControl:-2147214579,shouldBeIgnored:-2147212123,CECredentialNotAvailable:-2147215317,AuthenticationError:-2147215346,queryEngineGeneralError:-2147212544},transformation:{xtab:1,delimiter:2},application:{platform:"Platform",cloudPersonal:"Personal",cloudProfessional:"Professional"},refreshOptions:{replace:1,append:2,update:4},cubeRefreshType:{dummy:-1,reserved:0,add:1,remove:2,update:3,upsert:4,addNewTable:5,deleteTable:6,replaceTable:7,preserve:8},tableStatsExecutionAction:{reserved:0,forceExecution:1,ignore:4,requireFreshData:268435456},sourcesInfoFlags:{none:0,getReports:1,getUserName:2,getTokensInfo:4,revokeSession:8,getGAnalyticsAccount:64},queryBuilderType:{individualTable:1,multipleTables:2,queryScript:3},relationshipEditType:{create:1,changeERType:2,remove:3,flip:8001},ERType:{reserved:0,ERType11:1,ERType1M:2,ERTypeM1:3,ERTypeMM:4,ERTypeParallel:5,ERTypePerpendicular:6},RSType:{reserved:0,auto:1,geo:2,defined:3},tableStates:{newly:1,old:2},behaviorChangeFlag:{multiSheet:4,remapping:8,refreshData:16},menuItems:{SEPARATOR:-1,NONE:0,TABLE_RENAME:1,DO_NOT_IMPORT:2,FLIP_ORDER:3,DELETE:4,RELATIONSHIP_TYPE:5,ONE_TO_ONE:6,ONE_TO_MANY:7,MANY_TO_ONE:8,MANY_TO_MANY:9,REMOVE:10,REFRESH_DATA:11,REFINE:12,CANCEL_REFINE:13,UNLINK:14,CHANGE_DATA_TYPE:15,MARK_GEO_ROLES:16,CREATE_TIME_ATTRIBUTES:17,TO_METRIC:18,TO_ATTRIBUTE:19,MAP_TO_PROJECT_ATTRIBUTE:20,UNMAP:21,MODIFY_ATTRIBUTE_GROUP:22,CREATE_ATTRIBUTE_GROUP:23,HIDE_ALL_ATTRIBUTE_FORMS:24,DEFINE_RELATIONSHIPS:25,LINK:26,ITEM_RENAME:27,CREATE_MULTIFORM_ATTRIBUTE:28,EDIT_MULTIFORM_ATTRIBUTE:29,ADDTO_MULTIFORM_ATTRIBUTE:30,SHOW_ALL_ATTRIBUTE_FORMS:31,SHOW_ALL_COLUMNS:32,PARTITION:33,REFINE_RENAME:34,REFINE_DELETE:35,REFINE_DELETE_ALL:36,REFINE_RESET:37,REFINE_RESET_ALL:38,PARSE:39,IMPORT:40,UNLINK_ALL:41,CREATE_HIERARCHY_ATTRIBUTE:42,EDIT_HIERARCHY_ATTRIBUTE:43,RESET_HIERARCHY_ATTRIBUTE:44},dataTypeMenuItems:{DATE_TIME:"1",NUMBER:"2",TEXT:"3",URL:"5",EMAIL:"6",HTML_TAG:"7",DATE:"8",TIME:"9",SYMBOL:"10",BIG_DECIMAL:"11",PHONE_NUMBER:"12"},columnDataTypes:{reserved:0,integer:1,unsigned:2,numeric:3,decimal:4,real:5,dtdouble:6,dtfloat:7,dtchar:8,varChar:9,longVarChar:10,binary:11,varBin:12,longVarBin:13,date:14,dttime:15,timeStamp:16,nChar:17,nVarChar:18,nlong:22,bigDecimal:30,cellFormatData:31,utf8Char:33,int64:34},formsOptions:{CREATE_MULTIFORM_ATTRIBUTE:1,EDIT_MULTIFORM_ATTRIBUTE:2,ADDTO_MULTIFORM_ATTRIBUTE:3},hierarchyOptions:{CREATE_HIERARCHY_ATTRIBUTE:1,EDIT_HIERARCHY_ATTRIBUTE:2,RESET_HIERARCHY_ATTRIBUTE:3},rdcsFlag:{ID:1,JOIN_ID:2,FILTER_ID:3,DISTANCE:4},timeRoles:{NONE:0,DATE:1,DATE_TIME:2,TIME:3,SECOND:4,MINUTE:5,HOUR:6,DAY:7,WEEK:8,MONTH:9,QUARTER:10,YEAR:11},contextMenuType:{ITEM_MENU:0,TABLE_MENU:1,PREVIEW_ITEM_MENU:2,LINK_MENU:3},dialogType:{fixRefreshErrorDialog:1,allObjectsViewDialog:2,missingColumnsDialog:3,diPageDialog:4,refreshHistoryDialog:5,alternateSourceValidateDialog:6,ddaConfirmDialog:7,publishStatusDialog:8,saveAsDialog:9,cubesList:10,refinePage:11,multiFormEditor:12,sheetsSelectionDialog:13,partitionGroupDialog:14,parseDataDialog:15,errorDialog:16,warningDialog:17,relationDefineDialog:18,qbImportOptionDialog:19,previewRenameDialog:20,mapProjectsAttributeDialog:21,setOAuthParaDialog:22,objectPicker:23,refineClusteringPage:24,refineExtractDialog:25,refineImportDialog:26,twitterAdvOptDialog:27,credentialsDialog:28,mapProjectsAttributeDialog2:29,setWhiteListDialog:30,binaryUploadDialog:31,authenticationDialog:32,sharingDialog:33,hadoopGatewayManagerDialog:34,hadoopGatewayDialog:35,addConnectorDialog:36,hierarchyAttributeDialog:37,hierarchyAttributeResetDialog:38},dataEvents:{DATA_PREVIEW_EVENT:"dataReturned",NO_DATA_RETURNED_EVENT:"noDataReturned"},cubeSchedStatus:{unexecuted:1,successful:2,unscheduled:3,failed:4},privilegeType:{accessDatabase:1,accessFile:2,accessCloud:3},dbType:{MS_ACCESS:100,ORACLE:200,SQL_SERVER:300,INFORMIX:400,SYBASE:500,REDBRICK:600,DB2:700,TANDEM:800,TERADATA:900,UNKNOWN:1000,GENERIC:1100,SAP:1200,NETEZZA:1300,EXCEL:1400,MSFT_AS:1500,ESSBASE:1600,MYSQL:1700,POSTGRESQL:1800,HPNEOVIEW:1900,METAMATRIX:2000,DATALLEGRO:2100,COMPOSITE:2200,ASTER:2300,VERTICA:2400,OPENACCESS:2500,SYBASE_SQL_ANY:2600,SYBASE_IQ:2700,PARACCEL:2800,TM1:2900,XQUERY:3000,HIVE:3100,SAND:3200,SALESFORCE:3300,HIVETHRIFT:3400,VECTORWISE:3500,ENTERPRISEDB:3600,KOGNITIOWX2:3700,EXASOLUTION:3800,INFORMATICA:3900,SAPHANA:4000,IMPALA:4100,AMAZON_REDSHIFT:4200,DENODO:4300,GOOGLE_DRIVE:4400,DROPBOX:4500,GOOGLE_ANALYTICS:4600,GOOGLE_BIGQUERY:4700,CONNECTION_CLOUD:4800,GOOGLE_BIG_QUERY_FFSQL_MODEL:4900,PARSTREAM:5100,MONGODB:5200,MARKLOGIC:5300,BIG_DATA_ENGINE:5400,SEARCH_ENGINE_SOLR:5500,SPLUNK:5600,TWITTER:5700,FACEBOOK:5800,PIG:6400,URL:7700,newConnector:7900,LOACLFILE:8200},getCubeQuotaAndInfosOptions:{GetCubeQuotaAndInfosReserved:0,GetCubeQuotaAndInfosDefault:1,GetCubeQuotaAndInfosQuotaOnly:2,GetCubeQuotaAndInfosAll:3,GetCubeQuotaAndInfosVI:4},homepageViewMode:{GRID_VIEW:0,LIST_VIEW:1},datasetServeMode:{inMemory:1,dda:2,unknow:3},cubePollStatus:{msgID:0,result:1,prompt:2,error:3,xmlResult:21},ibmDb2Versions:[17,18,21,22,23,24,25,37,45,46,47,48,63,66,74,89,92,101,103,105,123,134,157,172,202,232],hadoopDbTypes:[3100,1100,700,4100,7300,6800,6400,8100],formCategory:{longitude:"2345134F4F5E261C3BB902A874467080",latitude:"B191051C48221A6AE44CA2B65B1B65E3"},urlAuthDBRoles:{anonymous:"CB1CB472A07E41D5AE038232839F2064",windows:"95A5ACC02FE94CBABCB65E4F2D2415B2",kerberos:"317D6F016D784836A724AD4D739E1E9C",integrated:"E966E1A0A4C949108287B2E5086B68EB"},urlAuthDBMSId:"497F2406FA154B86810C71EA3D401D6D",newConnectorDBMSId:"565D5DC3A1124726B85FE53EF992472A",hadoopGateWay:{HGoS_CONFIG_HAS_EXIT:1510,CONNOT_AUTHENTICATE:1511,SPACE_OVER:1512,FAIL_COPY_TO_HOST:1513,INSUFFICIENT:1514,DIRECTORY_NO_EXIST:1515,HGOS_DEPLOYED:1518,HGOS_DEPLOYING:1519,CONNOT_AUTHENTICATE2:1520,HGOS_RUNNING:1521,HGOS_STOPPED:1522,HGOS_NOT_DEPLOYING:1523,HGOST_TAR_NOT_EXIST:1524,HGOS_CONF_NOT_EXIST:1530},workstation:{filerBreakLine:new RegExp("[\r\n]","g"),utils:{shouldShowTitleBar:function(){var A=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&(!!mstrApp.isPopup||!!A);},setNativeWindow:function(C,F){var B=1110,E=590,D=parseInt(C,10),A=parseInt(F,10);if(!window.FormWrapper||!window.FormWrapper.setWindowFrame){return ;}if(C.match(/%$/)&&F.match(/%$/)){window.FormWrapper.setWindowContentSize(1200,680);}else{D=D<B?B:D;A=A<E?E:A;window.FormWrapper.setWindowContentSize(D,A);}},lockResize:function(){if(!window.FormWrapper||!window.FormWrapper.lockResize){return ;}window.FormWrapper.lockResize();},unlockResize:function(){if(!window.FormWrapper||!window.FormWrapper.unlockResize){return ;}window.FormWrapper.unlockResize();}}},authMode:{ANONYMOUS:0,USERNAME:1,OAUTH:2},authModePrefix:{ANONYMOUS:"AuthMode=Anonymous;URL=",USERNAME:"AuthMode=Basic;URL=",OAUTH:"AuthMode=OAuth;URL="},sdkUrl:{MARKPLACE_URL:"https://community.microstrategy.com/s/gallery?tabset-89baf=202df",QUICK_START_URL:"https://lw.microstrategy.com/msdz/MSDL/GARelease_Current/docs/projects/DataConnectorSDK/Content/topics/Quick_Start_Guide.htm"},originalConnector:{elastic:"DE4A8E15405A36D80BF1E1A2BA6F9B66",tapClicks:"1E8ADD3975DA4609B8D00E6211ACAB6A"},googleAnalyticsUrl:{queryExplorer:"https://ga-dev-tools.appspot.com/query-explorer/"},weekDay:[{n:mstrmojo.desc(9380,"Monday"),v:0},{n:mstrmojo.desc(9381,"Tuesday"),v:1},{n:mstrmojo.desc(9382,"Wednesday"),v:2},{n:mstrmojo.desc(9383,"Thursday"),v:3},{n:mstrmojo.desc(9384,"Friday"),v:4},{n:mstrmojo.desc(9385,"Saturday"),v:5},{n:mstrmojo.desc(9379,"Sunday"),v:6}],dateMon:[{n:mstrmojo.desc(15106,"1st day"),v:"1"},{n:mstrmojo.desc(15107,"15th day"),v:"15"}],timeOfDay:[{n:"12:00AM",v:"12:00AM"},{n:"1:00AM",v:"1:00AM"},{n:"2:00AM",v:"2:00AM"},{n:"3:00AM",v:"3:00AM"},{n:"4:00AM",v:"4:00AM"},{n:"5:00AM",v:"5:00AM"},{n:"6:00AM",v:"6:00AM"},{n:"7:00AM",v:"7:00AM"},{n:"8:00AM",v:"8:00AM"},{n:"9:00AM",v:"9:00AM"},{n:"10:00AM",v:"10:00AM"},{n:"11:00AM",v:"11:00AM"},{n:"12:00PM",v:"12:00PM"},{n:"1:00PM",v:"1:00PM"},{n:"2:00PM",v:"2:00PM"},{n:"3:00PM",v:"3:00PM"},{n:"4:00PM",v:"4:00PM"},{n:"5:00PM",v:"5:00PM"},{n:"6:00PM",v:"6:00PM"},{n:"7:00PM",v:"7:00PM"},{n:"8:00PM",v:"8:00PM"},{n:"9:00PM",v:"9:00PM"},{n:"10:00PM",v:"10:00PM"},{n:"11:00PM",v:"11:00PM"}],schedule:{DAILY:"Daily",WEEKDAY:"Weekday",WEEKLY:"Weekly",MONTHLY:"Monthly"},mainPage:{GRID_MODE:0,LIST_MODE:1},sourceIconClsName:{0:"ds-Generic",1:"ds-DB2",2:"ds-DB2",3:"ds-DB2",4:"ds-InformixWire",5:"ds-InformixXPS",6:"ds-PostgreSQL",7:"ds-SAP",8:"ds-SAP",9:"ds-Oracle",10:"ds-MicroSoft",11:"ds-Teradata",12:"ds-MySQL",13:"ds-GreenPlum",14:"ds-Netezza",15:"ds-WebServices",17:"ds-Infobright",18:"ds-Salesforce",19:"ds-MicroSoft",20:"ds-Actian-n",21:"ds-Amazon-Redshift",22:"ds-Impala",23:"ds-Aster",25:"ds-Actian-n",26:"ds-EnterpriseDB",27:"ds-Vertica",28:"ds-Denodo",29:"ds-CiscoDataVirtualization",31:"ds-MicroSoft",32:"ds-GoogleBigQuery",33:"ds-SAP",35:"ds-IBMBigInsights",39:"ds-TM1",41:"ds-WebServices",43:"ds-Amazon-EMR",44:"ds-Apache-Hive",45:"ds-ClouderaHive",46:"ds-HortonworksHive",47:"ds-MapRHive",48:"ds-apache",49:"ds-SharkSpark",50:"ds-MongoDB",52:"ds-MariaDB",51:"ds-MarkLogic",54:"ds-Splunk",55:"ds-DataDirectCloud",56:"ds-ParStream",58:"ds-Phoenix",59:"ds-MicroSoft",60:"ds-DB2",61:"ds-Oracle",62:"ds-Teradata",63:"ds-SAP",65:"ds-PostgreSQL",66:"ds-MySQL",67:"ds-MariaDB",68:"ds-Amazon-EMR",69:"ds-Apache-Hive",70:"ds-ClouderaHive",71:"ds-HortonworksHive",72:"ds-MapRHive",73:"ds-SharkSpark",75:"ds-Amazon-Redshift",76:"ds-PIVOTALHAWQ",77:"ds-MemSQL",78:"ds-Arcadia-Platform",79:"ds-Altibase",80:"ds-MongoDB",81:"ds-Presto",82:"ds-DB2",83:"ds-DB2",84:"ds-InformixWire",85:"ds-SAP",86:"ds-MicroSoft",87:"ds-MicroSoft",88:"ds-MemSQL",90:"ds-GreenPlum",91:"ds-PIVOTALHAWQ",92:"ds-Netezza",93:"ds-Infobright",94:"ds-Actian-n",95:"ds-Impala",96:"ds-IBMBigInsights",97:"ds-Aster",99:"ds-Actian-n",100:"ds-EnterpriseDB",101:"ds-Vertica",102:"ds-Denodo",103:"ds-CiscoDataVirtualization",105:"ds-DataDirectCloud",106:"ds-ParStream",107:"ds-Arcadia-Platform",109:"ds-Presto",110:"ds-Phoenix",111:"ds-Kognitio",112:"ds-Kognitio",113:"ds-Informatica",114:"ds-Informatica",115:"ds-Apache-Cassandra-JDBC",116:"ds-SAP",117:"ds-Actian",118:"ds-Actian",119:"ds-InformixXPS",120:"ds-Apache-Cassandra-JDBC",121:"ds-MapRDrill",122:"ds-Cirro",123:"ds-EXASolution",124:"ds-EXASolution",125:"ds-Oracle",126:"ds-Oracle",127:"ds-Snowflake",128:"ds-Snowflake",129:"ds-Amazon-Aurora",130:"ds-Amazon-Aurora",131:"ds-Amazon-Athena",132:"ds-Amazon-Athena",133:"ds-MapRDrill",134:"ds-Druid",135:"ds-Druid",139:"ds-MongoBI",157:"ds-GoogleBigQuery",161:"ds-MapD",168:"ds-HortonworksSpark",169:"ds-HortonworksSpark",170:"ds-Yellowbrick",},dispTag:{1:"Database",2:"OLAP",4:"BigData",8:"Database",16:"BigData",32:"BigData"},searchTags:{100:["Database","ODBC"],200:["Database","ODBC"],300:["Database","ODBC"],400:["Database","ODBC"],500:["Database","ODBC"],600:["Database","ODBC"],700:["Database","ODBC"],900:["Database","ODBC"],1100:["Database","ODBC"],1200:["OLAP","Cube"],1300:["Database","ODBC"],1400:["Database"],1500:["OLAP","Cube"],1600:["OLAP","Cube"],1700:["Database","ODBC"],1800:["Database","ODBC"],2200:["Database","ODBC"],2300:["Database","ODBC"],2400:["Database","ODBC"],2800:["Database","ODBC"],2900:["OLAP","Cube"],3000:["Database"],3100:["Database","BigData","Hadoop"],3300:["Cloud"],3500:["Database","ODBC"],3600:["Database","ODBC","BigData"],3800:["Database"],3900:["Database"],4000:["Database","ODBC"],4100:["Database","BigData","Hadoop"],4200:["Database","ODBC"],4300:["Database","ODBC"],4700:["Database","Cloud","BigData"],4800:["Cloud"],5200:["Database","NoSQL"],5300:["Database","NoSQL"],5400:["Hadoop"],6400:["Database","BigData","Hadoop"],6600:["Database"],6700:["Database"],6800:["BigData"],6900:["BigData"],7100:["NoSQL"],7200:["Database"],7300:["BigData","Hadoop"],7500:["Database"],7600:["Database"],8000:["Database"],8100:["BigData"],},srcItemTypes:{ALL_SOURCES:"ALL_SOURCES",STATIC_SOURCE:"STATIC_SOURCE",DBTYPE_SOURCE:"DBTYPE_SOURCE",CUSTOM_CONNECTOR:"CUSTOM_CONNECTOR",CLOUDELEMENT_CONNECTOR:"CLOUDELEMENT_CONNECTOR"},combination:{BigData:["BigData","NoSQL","Search","Hadoop"],Apps:["Apps","oAuth","Cloud","Social","BI","PublicData","CE"]},GenericDBStr:"Generic",dataSourceType:{MONGODB:"mongodb",FILE_URL:"fileUrl",FILE_LOCAL:"fileLocal",ES:"elasticsearch",DROPBOX:"dropbox",GOOGLE_DRIVE:"googleDrive",GOOGLE_ANALYTICS:"googleAnalytics",GOOGLE_BIGQUERY:"googleBigQuery",SALESFORCE:"salesforce",FILE:"file",GENERIC_JDBC:"genericJdbc"},ERDF:{ENUM_LOAD_REPORT_BROWSE_TYPE_BINDINGTABLE:1,ENUM_LOAD_REPORT_BROWSE_TYPE_DATAPREVIEW:4,ENUM_LOAD_REPORT_BINDING_FLAG_ALL:15,ENUM_LOAD_REPORT_PREVIEW_FLAG_MappingInfo:1,ENUM_LOAD_REPORT_PREVIEW_FLAG_DataInfo:2,ENUM_LOAD_REPORT_PREVIEW_FLAG_SourceInfo:4,ENUM_LOAD_REPORT_PREVIEW_FLAG_InnerDataInfo:2048,},DSSSubType:{DSSSUBTYPEATTRIBUTE:3072,DSSSUBTYPEATTRIBUTEROLE:3073,DSSSUBTYPEATTRIBUTETRANSFORMATION:3074,DSSSUBTYPEATTRIBUTEABSTRACT:3075,DSSSUBTYPEATTRIBUTERECURSIVE:3076},DSSExType:{DSSEXDISPARK:416},URLMode:{NormalUrl:0,NewConnector:1,NewConnectorEdit:2,CloudElement:3},disableFeatures:{DISABLE_CUSTOM_CONNECTOR:"disableCustomerConnector",DISABLE_DDA:"disableDDA",DISABLE_QUOTA:"disableQuota",DISABLE_HADOOP:"disableHadoop",DISABLE_BI_TOOLS:"disableBITools",DISABLE_CLIP_BOARD:"disableClipboard",DISABLE_FACE_BOOK:"disableFacebook",DISABLE_TWITTER:"disableTwitter",DISABLE_SAMPLE_FILES:"disableSampleFiles",DISABLE_PUBLIC_DATA:"disablePublicData",DISABLE_MERGE_CUBE:"disableMergeCube",DISABLE_CE_SOURCE:"disableCESource",DISABLE_FLATTERN_DB_SOURCE:"disabledSources"},DssXmlPrivileges:{DssXmlPrivilegesUseDatabaseInstanceManager:57},Enum_SourceCategoryType:{File:1,BigData:2,Database:3,OLAP:4,Customized:5,Apps:6,}});}());(function(){var N={Min:15872549,Max:1489202,Invalid:0,NoColorMetric:16119287};var G={LeftToRight:0,RightToLeft:1,Center:2,None:3};function K(U,h,Y){if(U<0||U>1){return 0;}var V=256,X=U*V,P,W,Z,S=h>>16,R=Y>>16,d=(h&65280)>>8,a=(Y&65280)>>8,Q=(h&255),f=(Y&255);P=S+Math.floor((X*(R-S)/V));W=d+Math.floor((X*(a-d)/V));Z=Q+Math.floor((X*(f-Q)/V));return Z+(W<<8)+(P<<16);}function F(Q,U){var S=Q>>16,R=(Q&65280)>>8,P=(Q&255);S=Math.floor((1-U)*S);R=Math.floor((1-U)*R);P=Math.floor((1-U)*P);return P+(R<<8)+(S<<16);}function J(P){var X=[],V,Q,S=P.dp,R=S.length,Y,Z,U;if(P===null||P.length===0){return[];}for(U=0;U<R;U++){Q={};var Y,W;if(U>0){Y=V;V=Z;}else{V=S[U];}if(U<R-1){Z=S[U+1];}Q.sv=(U===0)?V.v:(Y.v+V.v)/2;Q.ev=(U===R-1)?V.v:(Z.v+V.v)/2;Q.c=V.c;Q.d=(U===0)?G.LeftToRight:(U===R-1?G.RightToLeft:G.Center);X[U]=Q;}return X;}function E(Y){var P=[],U,Q,S=Y.dp,R=S.length;if(Y==null||Y.length==0){return[];}for(var V=0;V<R;V++){U={};Q=S[V];var Z=Q.s,X=Q.e;U.c=Q.c;switch(Q.d){case G.LeftToRight:U.v=Q.s;break;case G.RightToLeft:U.v=Q.e;case G.Center:case G.None:default:var W=(Q.s+Q.e)/2;U.v=W;break;}P[V]=U;}return P;}function D(U,Z){var P=[],Q=[],W=[];if(this.min==this.max||isNaN(U)||isNaN(Z)||U==Z){P[0]=L.call(this,U);P[1]=L.call(this,Z);Q[0]=1;Q[1]=1;W[0]=0;W[1]=1;}else{if(this.min<this.max){var Y,S=this.blend.dp,R=S.length,X=0;P[X]=L.call(this,U);Q[X]=1;W[X]=0;X++;for(var V=0;V<R;V++){Y=S[V];if(Y.v>=U&&Y.v<=Z){P[X]=Y.c;Q[X]=1;W[X]=(Y.v-U)/(Z-U);X++;}}P[X]=L.call(this,Z);Q[X]=1;W[X]=1;}}return{c:P,a:Q,r:W};}function A(U,e){var P=[],Q=[],W=[];if(this.min==this.max||isNaN(U)||isNaN(e)||U==e){P[0]=B.call(this,U);P[1]=B.call(this,e);Q[0]=1;Q[1]=1;W[0]=0;W[1]=1;}else{if(this.min<this.max){var S=this.band.dp,R=S.length,f=0.4,Z,d,h,Y=0;if(U<0){P[Y]=B(U);Q[Y]=1;W[Y]=0;Y++;if(e<1){P[Y]=B(e);Q[Y]=1;W[Y]=1;Y++;}}for(var V=0;V<R;V++){Z=S[V];if(Z.s>e||Z.e<U){continue;}d=Z.c;h=F(d,f);var g=Math.max(Z.s,U),b=Math.min(Z.e,e);if(b!=g){switch(Z.d){case G.LeftToRight:case G.RightToLeft:case G.Center:if(g==Z.s){P[Y]=(Z.d!=G.LeftToRight)?h:d;}else{P[Y]=B.call(this,g);}W[Y]=(g-U)/(e-U);Q[Y]=1;Y++;if(Z.d==G.Center){var X=(Z.s+Z.e)/2;if(X>g&&X<b){P[Y]=d;W[Y]=(X-U)/(e-U);Q[Y]=1;Y++;}}if(b==Z.e){P[Y]=(Z.d!=G.RightToLeft)?h:d;}else{P[Y]=B.call(this,b);}W[Y]=(b-U)/(e-U);Q[Y]=1;Y++;break;case G.None:default:P[Y]=d;W[Y]=(g-U)/(e-U);Q[Y]=1;Y++;P[Y]=d;W[Y]=(b-U)/(e-U);Q[Y]=1;Y++;break;}}}if(e>1){if(U>1){P[Y]=B.call(this,U);W[Y]=0;Q[Y]=1;Y++;}P[Y]=B.call(this,e);W[Y]=1;Q[Y]=1;}}}return{c:P,a:Q,r:W};}function I(R,V){var S=0.4,Q=F(V.c,S),P,U;switch(V.d){case G.LeftToRight:if(R<V.s){return V.c;}if(R>V.e){return Q;}if(V.s==V.e){return K(0.5,V.c,Q);}U=(R-V.s)/(V.e-V.s);return K(U,V.c,Q);case G.RightToLeft:if(R<V.s){return Q;}if(R>V.e){return V.c;}if(V.s==V.e){return K(0.5,Q,V.c);}U=(R-V.s)/(V.e-V.s);return K(U,Q,V.c);case G.Center:P=(V.s+V.e)/2;if(R<V.s||R>V.e){return Q;}if(V.s==V.e){return Q;}if(R<=P){U=(R-V.s)/(P-V.s);return K(U,Q,V.c);}U=(R-P)/(V.e-P);return K(U,V.c,Q);case G.None:default:return V.c;}}function L(Z){if(isNaN(Z)){return N.Invalid;}if(this.max==this.min){return this.blendEqualColor;}var R=this.blend.dp,Q=R.length;if(!this.valid){var b=R[0],V=R[Q-1];if(Z<this.min){return b.c;}return V.c;}var S,X=R[0],a=X.v,W=X.c,Y,U;for(S=1;S<Q;S++){X=R[S];if(X.v>=Z){break;}a=X.v;W=X.c;}S=Math.min(S,Q-1);X=R[S];Y=X.v;U=X.c;if(Z<a){return W;}if(Z>Y){return U;}if(a==Y){return K(0.5,W,U);}var P=(Z-a)/(Y-a);return K(P,W,U);}function B(Q){if(isNaN(Q)){return N.Invalid;}if(this.min==this.max){return this.bandEqualColor;}var V=this.band.dp,P=V.length;if(!this.valid){var S=V[0],U=V[P-1];if(Q<this.min){return I(U.s,S);}else{return I(U.e,U);}}for(var R=0;R<P;R++){c=V[R];if(c.s===c.e){continue;}if(c.s<=Q&&Q<=c.e){return I(Q,c);}}}function O(Q,P){this.blend.dp=[];var S=this.blend.dp,R;R={};R.c=Q;R.v=0;S[0]=R;R={};R.c=P;R.v=1;S[1]=R;}function M(Q,P){this.band.dp=[];var S=this.band.dp,R;R={};R.d=G.LeftToRight;R.s=0;R.e=0.5;R.c=Q;S[0]=R;R={};R.d=G.LeftToRight;R.s=0.5;R.e=1;R.c=P;S[1]=R;}function C(s,S,q){var V=[],U=0,Y,o,b=this.min,g=this.max,R=q.legendTickCount,Q={},P,X=!isNaN(this.min)&&!isNaN(this.max);if(this.min>=this.max||this.blend.dp.length<=2){var j=(g-b)/R;for(var h=0;h<s;h++){Q={x:U,w:Math.floor(S/R)};U+=Q.w;if(X){Y=b+h*j;o=Y+j;P=this.getColor((Y+o)/2);}else{Y="Null";o="Null";P=0;}V.push({r:Q,c:P,sv:Y,ev:o});}}else{var a=this.blend.dp,e=a.length;for(var h=0;h<e;h++){var k=a[h],W,Z;if(h==0){Y=b;}else{W=a[h-1];Y=b+(g-b)*(k.v+W.v)/2;}if(h==e-1){o=g;}else{Z=a[h+1];o=b+(g-b)*(k.v+Z.v)/2;}Q={x:U,w:Math.floor(S*(o-Y)/(g-b))};U+=Q.w;if(X){P=this.getColor((Y+o)/2);}else{Y="Null";o="Null";P=0;}V.push({r:Q,c:P,sv:Y,ev:o});}}this.tooltipInfo=V;}function H(s,V,q){var X=[],W=0,Z,p,g=this.min,h=this.max,S=q.legendTickCount,R={},Q,b,Y=!isNaN(this.min)&&!isNaN(this.max);if(this.min>=this.max){for(var j=0;j<s;j++){R={x:W,w:Math.floor(V/S)};b+=R.w;if(Y){b=Z+" < "+ms+" < "+p;Q=this.getColor(g);}else{Z="Null";p="Null";Q=0;}X.push({r:R,c:Q,sv:Z,ev:p});}}else{var U,P;if(this.isFixedColorBanding){U=this.initMax;P=this.initMin;}else{U=h;P=g;}var a=this.band.dp,f=a.length;if(f<=2){for(var j=0;j<f;j++){var o=a[j];if(j==0){Z=P;}else{Z=P+(U-P)*o.s;}if(j==f-1){p=U;}else{p=P+(U-P)*o.e;}if(Z<g){Z=g;}if(p>h){p=h;}if(Z>p&&p>=h){Z=h;p=h;}else{if(p<Z&&Z<=g){Z=g;p=g;}}R={x:W,w:Math.floor(V*(p-Z)/(h-g)/2)};W+=R.w;if(Y){p=(Z+p)/2;Q=this.getColor((Z+p)/2);}else{Z="Null";p="Null";Q=0;}X.push({r:R,c:Q,sv:Z,ev:p});W+=R.w;var k=V*(p-Z)/(h-g)/2;R={x:W,w:Math.ceil(k)};if(j>0){var e=X[X.length-1].r;if(R.x<e.x+e.w+1){e.w=R.x-e.x;}}W+=Math.floor(k);if(Y){Z=(Z+p)/2;Q=this.getColor((Z+p)/2);}else{Z="Null";p="Null";Q=0;}X.push({r:R,c:Q,sv:Z,ev:p});}}else{for(var j=0;j<f;j++){var o=a[j];if(j==0){Z=q.props.legendAsc?P:U;}else{Z=q.props.legendAsc?P+(U-P)*o.s:U+(P-U)*o.s;}if(j==f-1){p=q.props.legendAsc?U:P;}else{p=q.props.legendAsc?P+(U-P)*o.e:U+(P-U)*o.e;}if(Z<g){Z=g;}if(p>h){p=h;}if(Z>p&&p>=h){Z=h;p=h;}else{if(p<Z&&Z<=g){Z=g;p=g;}}var k=V*(p-Z)/(h-g);R={x:W,w:Math.ceil(k)};if(j>0){var e=X[X.length-1].r;if(R.x<e.x+e.w+1){e.w=R.x-e.x;}}if(j==f-1){R.w=V-W;}W+=Math.floor(k);var t=q.props.legendAsc?" < ":" > ";if(Y){Q=this.getColor((Z+p)/2);}else{Z="Null";p="Null";Q=0;}if(t){X.push({r:R,c:Q,sv:Z,ev:p});}else{X.push({r:R,c:Q,sv:Z,ev:p,sign:">"});}}}}this.tooltipInfo=X;}mstrmojo.VisHeatMapColorTheme={newInstance:function(){return{initialize:function W(){this.blend={};this.band={};this.valid=true;this.blendEqualColor=0;this.bandEqualColor=0;this.isBlend=true;this.setDefaultDataProvider();this.checkMinMax();},getGradientFillInfo:function Z(g,e){var h,f;if(isNaN(g)||isNaN(e)){if(this.isBlend){return D.call(this,g,e);}else{return A.call(this,g,e);}}if(this.min==this.max){if(g<this.min){h=0;}else{h=1;}if(e<this.max){f=0;}else{f=1;}}else{if(this.isFixedColorBanding){var j=this.initMax-this.initMin;h=(g-this.initMin)/j;f=(e-this.initMin)/j;}else{var j=this.max-this.min;h=(g-this.min)/j;f=(e-this.min)/j;}}if(this.isBlend){return D.call(this,h,f);}else{return A.call(this,h,f);}},checkMinMax:function X(){var j=this.min,d=this.max;if(j>d){this.valid=false;}else{if(j==d){j=d=1;var o=this.blend.dp,e=o.length,k,g;for(var h=e-1;h>=0;h--){k=o[h];if(h==e-1&&k.v<=j){this.blendEqualColor=k.c;break;}if(h==0&&k.c>=j){this.blendEqualColor=k.c;break;}if(h>0&&k.c>=j){var f=o[h-1];if(f.c<j){g=(j-f.v)/(k.v-f.v);this.blendEqualColor=K(g,f.c,k.c);break;}}}o=this.band.dp;e=o.length;for(var h=0;h<e;h++){k=o[h];if((h==0&&k.s>=j)||(h==e-1&&k.e<=j)||(k.s<=j&&k.e>=j)){this.bandEqualColor=k.c;break;}}}}},setDefaultDataProvider:function b(){O.call(this,N.Min,N.Max);M.call(this,N.Min,N.Max);this.useDefault=true;},getColor:function S(d){if(this.hasNoColorMetric){return N.NoColorMetric;}var e=NaN;if(isNaN(d)){e==0;}else{if(this.min==this.max){e=d<this.min?0:1;}else{if(this.isFixedColorBanding){e=(d-this.initMin)/(this.initMax-this.initMin);}else{e=(d-this.min)/(this.max-this.min);}}}if(this.isBlend){return L.call(this,e);}else{return B.call(this,e);}},isBrightColor:function a(j){var f=j>>16,e=(j&65280)>>8,d=(j&255),h=(f*299+e*587+d*114)/1000;if(h>150){return true;}return false;},getContrastColor:function Q(d){if(this.isBrightColor(d)){return 0;}return 16777215;},createTooltipInfo:function V(g,f,j){var h=0;if(this.min>=this.max){h=1;}else{var e;if(this.isBlend){e=this.blend.dp.length;h=(e<=2)?5:e;}else{e=this.band.dp.length;h=(e<=2)?4:e;}}if(this.isBlend){C.call(this,h,f,j);}else{H.call(this,h,f,j);}},getTooltipInfo:function U(d){var f=this.tooltipInfo;for(var e=0;e<f.length;e++){var h=f[e],g=h.r;if(d>=g.x&&d<g.x+g.w){return e;}}return e-1;},getMaxMinByMetricID:function(l,e){var f=l.gts.col,p=f.length,k=0,o=null;range={min:null,max:null};for(k=0;k<p&&o==null;k++){var s=f[k].es,d=s.length,h;for(h=0;h<d;h++){if(s[h].oid==e){o=h;break;}}}if(o==null){return range;}var g=l.gvs.items,p=g.length;for(k=0;k<p;k++){var q=parseFloat(g[k].items[o].rv);if(range.min==null){range.min=q;}if(range.max==null){range.max=q;}if(range.min>q){range.min=q;}if(range.max<q){range.max=q;}}return range;},convertFixedValueToBlendString:function(h,g){var p="";if(h.length%2==0){var d=h.length,e=g.min,j=g.max,f=0;var o=j-e;p="0,"+h[1];for(f=2;f<d-2;f+=2){var l=parseInt(h[f]);if(l<e||l>j){continue;}else{var k=(l-e)/o;p+=","+k+","+h[f+1];}}p+=",1,"+h[d-1];}return p;},convertFixedValueToBandString:function(k,h){var w=k.split(","),l=w.length,g,f,q=h.max-h.min;var p="",u,x;if(l%4===0){var z;if(q===0){x=h.min;for(g=0;g<l;g+=4){var AA=w[g],o=w[g+1],t=w[g+2];if(AA==="min"){AA=-Infinity;}else{AA=parseFloat(AA);}if(o==="max"){o=Infinity;}else{o=parseFloat(o);}if(x>=AA&&x<=o){z=t;}}}for(g=0;g<l;g+=4){for(f=0;f<2;f++){u=w[g+f];if(u==="min"){x=h.min;}else{if(u==="max"){x=h.max;}else{x=parseFloat(w[g+f]);}}if(!isNaN(x)){if(q===0){w[g+f]=f===0?0:1;}else{w[g+f]=String((x-h.min)/q);}}else{console.log("warning: invalid band string. In heatmap color theme");}}if(z){w[g+2]=z;}}for(g=0;g<l;g++){p+=(w[g]+",");}p=p.substring(0,p.length-1);}else{console.log("warning: Invalid band color string. In heatmap color theme");}return p;},convertAbsoluteToBlend:function(f,h){this.useDefault=false;this.isColorBanding=true;var d=h.abs.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");d=(new window.DOMParser()).parseFromString(d,"text/xml");var g=d.getElementsByTagName("m")[0];f.absoluteColorID=g.getAttribute("id");this.isFixedColorBanding=true;this.fixedBandingArray=g.getAttribute("bl").split(",");var e;if(!isNaN(this.min)&&!isNaN(this.max)){e={max:this.max,min:this.min};}else{e=this.getMaxMinByMetricID(f.model,f.absoluteColorID);this.max=e.max;this.min=e.min;}if(isNaN(this.initMax)||isNaN(this.initMin)){e=this.getMaxMinByMetricID(f.model,f.absoluteColorID);this.max=e.max;this.min=e.min;this.initMax=e.max;this.initMin=e.min;}h.bandColors=this.convertFixedValueToBandString(g.getAttribute("ba"),e);h.gradientColors=this.convertFixedValueToBlendString(this.fixedBandingArray,e);},createBandDataProviderFromString:function R(j){this.band.dp=[];var h=this.band.dp,d=j.split(","),e=0;if(d.length%4==0){while(e<d.length){var g={};g.s=parseFloat(d[e]);e++;g.e=parseFloat(d[e]);e++;g.c=parseInt(d[e]);e++;var f=d[e];switch(f){case"leftToRight":g.d=G.LeftToRight;break;case"rightToLeft":g.d=G.RightToLeft;break;case"center":g.d=G.Center;break;default:g.d=G.None;}e++;h[h.length]=g;}}},createBlendDataProviderFromString:function P(h){this.blend.dp=[];var d=h.split(","),e=0,g=this.blend.dp;if(d.length%2==0){while(e<d.length){var f={};f.v=parseFloat(d[e]);e++;f.c=parseInt(d[e]);e++;g[g.length]=f;}}},createDataProviderFromString:function Y(e,d){this.useDefault=false;this.createBandDataProviderFromString(d);this.createBlendDataProviderFromString(e);}};}};})();(function(){function B(J,E){if(!E.domNode){return 0;}var K="_fixed"+J;if(E[K]){return E[K];}var H=E.getFormats(),I=J.toLowerCase();if(H&&H.hasOwnProperty(I)){var F=H[I];if(F.charAt(F.length-1)!=="%"){var G=parseInt(F,10);if(!isNaN(G)){E[K]=G;return G;}}}return(E.domNode["client"+J]||0);}mstrmojo._ContainsDocObjects=mstrmojo.provide("mstrmojo._ContainsDocObjects",{getHeight:function D(){return B("Height",this);},getWidth:function A(){return B("Width",this);},getMaxZIndex:function C(){var F=0;mstrmojo.array.forEach(this.children,function E(G){F=Math.max(F,G.getFormats()["z-index"]);});return F;}});}());mstrmojo.mstr.EnumNodeType={NodeReserved:0,NodeFormShortcut:1,NodeElementsObject:2,NodeConstant:3,NodeOperator:4,NodeShortcut:5,NodeTime:6,NodeRelationship:7,NodeResidue:8,NodeMe:9,NodeBigDecimal:10,NodeGroup:14,NodeRef:15};(function(){mstrmojo.android._HasLingeringListSelections=mstrmojo.provide("mstrmojo.android._HasLingeringListSelections",{_mixinName:"mstrmojo.android._HasLingeringListSelections",selectionPolicy:"reselect",noLinger:false,canItemLinger:function D(E){return true;},setClearHandler:function C(F){if(this.noLinger){return ;}var E=this.selectedIndex,G=this.id;if(E>-1&&this.canItemLinger(this.items[E])){this._clearHandler=window.setTimeout(function(){var H=mstrmojo.all[G];if(H){if(H.selectedIndex===E){H.clearSelect();}delete H._clearHandler;}},F);}},postBuildRendering:function A(){this._super();this.setClearHandler(800);},preselectionChange:function B(E){var F=this._clearHandler;if(F){window.clearTimeout(F);delete this._clearHandler;}}});}());(function(){mstrmojo.vi._MonitorsLayoutMode=mstrmojo.provide("mstrmojo.vi._MonitorsLayoutMode",{onLayoutModeChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("layoutModeChange",this.id,"onLayoutModeChange");}}});}());mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){function I(J,K){if(!K&&J===this._inFullScreen){return ;}delete this._inFlash;var L=this;if(!K){this._inFullScreen=J;}if(!J&&K){this._inFlash=true;}mstrMobileApp[(J?"enter":"exit")+"FullScreen"]();if(!J){if(K){L._flashHandle=window.setTimeout(function(){delete L._flashHandle;I.call(L,true,true);},2000);}}}function F(P,O,J){if(!O&&P===!!this._inFullScreen){return ;}delete this._inFlash;var N=this.domNode;if(!N){return ;}var K=N.style,S=!!this.controller,R=this,M=(this.fullscreenDirection==="up")?"top":"bottom",Q=function(){K.position=P?"absolute":"static";if(S){mstrApp.rootView.doLayout();}},L=function(){if(S){mstrMobileApp[(P?"enter":"exit")+"FullScreen"]();}};if(!O){this._inFullScreen=P;if(P||!J){Q();}}if(!P){if(parseInt(K[M],10)===0){Q();L();return ;}if(O){this._inFlash=true;}}if(J){mstrmojo.dom.attachOneTimeEvent(N,"webkitTransitionEnd",function(){if(!P){if(!O){Q();}else{R._flashHandle=window.setTimeout(function(){delete R._flashHandle;F.call(R,true,true,true);},3000);}}else{if(R.onEnterFullScreenEnd){R.onEnterFullScreenEnd();}}if(!O){L();}});}else{L();}this["on"+(P?"Enter":"Exit")+"FullScreen"]();K.webkitTransitionDuration=J?"":0;K[M]=P?-N.offsetHeight+"px":0;}function D(J,K,M){var L=mstrApp.isActionBarNative()?I:F;L.call(this,J,M,K);}function H(){var J=this._flashHandle;if(J){window.clearTimeout(J);delete this._flashHandle;}}mstrmojo.android.ui._CanBeFullScreen=mstrmojo.provide("mstrmojo.android.ui._CanBeFullScreen",{fullscreenDirection:"up",onEnterFullScreen:mstrmojo.emptyFn,onExitFullScreen:mstrmojo.emptyFn,resetFullScreen:function E(){if(this._inFullScreen){delete this._inFullScreen;D.call(this,true,false);}},enterFullScreen:function A(){D.call(this,true,true);},flashFullScreen:function G(){if(this._inFullScreen&&!this._inFlash){D.call(this,false,true,true);}},exitFullScreen:function C(J){H.call(this);D.call(this,false,J);},cancelFlashFullScreen:function B(){if(this._inFullScreen&&this._inFlash){H.call(this);D.call(this,true,false,true);}}});}());(function(){if(!mstrmojo.PerformanceLogOutput){var G={},D=true;mstrmojo.PerformanceLogOutput=mstrmojo.provide("mstrmojo.PerformanceLogOutput",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function C(L,K){if(this.mUseTimer){if(K&&this.getTimerIdByName(K)>=0){return ;}var J=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:J,desc:L.functionName+": "+L.purpose});if(K){G[K]=J;}return J;}},getTimerIdByName:function F(J){var K=G[J];return isNaN(K)?-1:K;},endTimer:function A(M){var K;if(typeof M==="string"){K=this.getTimerIdByName(M);}else{K=M;}if(this.mUseTimer){var J,P=this.mTimers;if(K===undefined){J=P.pop();}else{var L,R;for(L=0;L<P.length;L++){R=P[L];if(R.timerId===K){J=R;P.splice(L,1);break;}}}if(J){var O=J.desc;var N=new Date()-J.timeStamp;var Q=[O,N];this.visPrint("%c"+J.desc+": "+N+"ms","color: blue");H(Q);delete G[M];}}},visPrint:function I(){if(D&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},recordJSHeapMemory:function E(L){var N=window.performance,M=N&&N.memory;if(this.mUseTimer&&M){L=L?(L+": "):"";var K=["usedJSHeapSize","totalJSHeapSize","jsHeapSizeLimit"],J=this;K.forEach(function(P){var Q=L+P,O=M[P]/1000;J.visPrint("%c"+Q+": "+O+"KB","color: blue");H([Q,O]);});}},exportToCsv:function B(){var K=mstrApp.rootCtrl.docCtrl.model.n+".csv",P=window.perfResults;var Q=function(W,U){var V="";var S=W[U]===null?"":W[U].toString();if(W[U] instanceof Date){S=W[U].toLocaleString();}var R=S.replace(/"/g,'""');if(R.search(/("|,|\n)/g)>=0){R='"'+R+'"';}V+=R;return V+",";};var O="";for(var M=0;M<P.length;M++){O+=Q(P[M],0);}O+="\n";for(var M=0;M<P.length;M++){O+=Q(P[M],1);}O+="\n";var J=new Blob([O],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob){navigator.msSaveBlob(J,K);}else{var N=document.createElement("a");if(N.download!==undefined){var L=URL.createObjectURL(J);N.setAttribute("href",L);N.setAttribute("download",K);N.style.visibility="hidden";document.body.appendChild(N);N.click();document.body.removeChild(N);}}window.perfResults=[];}});function H(K){var J=window.perfResults;if(!J){J=window.perfResults=[];}J.push(K);}}})();mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionConcatAgg:177,FunctionTuple:1000};(function(){mstrmojo._HasDrillLinks=mstrmojo.provide("mstrmojo._HasDrillLinks",{_mixinName:"mstrmojo._HasDrillLinks",update:function A(E){this._super(E);var B=E.defn.dl,F=E.data.dl,D=this.drillLinkItems=((B&&B.items)||[]).concat((F&&F.items)||[]).sort(function(H,G){return H.index-G.index;}),C;for(C=D.length-1;C>=0;C--){if(C&&D[C].index===D[C-1].index){D.splice(C,1);}}if(B&&B.target){for(C=0;C<D.length;C++){D[C].target=B.target;}}}});}());mstrmojo.EnumReadystate={IDLE:1,WAITING:3,ERROR:4,SUCCESS:5,CANCELLED:6,TIMEOUT:7};(function(){mstrmojo.vi.ui.theme=mstrmojo.provide("mstrmojo.vi.ui.theme",{getThemeClass:function A(){var D=this.parent||this.opener,C="",B;while(D){var E=D.themeClassName;if(E){C=E;break;}B=D.parent||D.opener;if(B===D){break;}D=B;}return C;}});}());(function(){mstrmojo.models.template.MetricValue=mstrmojo.declare(null,null,{init:function G(H){this.data=H.data;this.value=H.value;},getValue:function B(){return this.value.v;},getThresholdType:function D(){return this.value.ty;},getRawValue:function A(){return this.value.rv;},getCSS:function C(){return this.data.css[this.value.cni].n;},getThresholdValue:function F(H){if(this.value.ti===undefined){return H;}return this.data.th[this.value.ti].n;},getFillColor:function E(H){if(this.value.ci===undefined){return H;}return this.data.fc[this.value.ci].n;}});}());mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75,GRAPHMATRIXVERTICALHISTOGRAM:76,GRAPHMATRIXGRIDCHART:78,GRAPHMATRIXVERTICALBOXPLOT:79,GRAPHMATRIXHORIZONTALBOXPLOT:80,GRAPHMATRIXVERTICALWATERFALL:81,GRAPHMATRIXHORIZONTALWATERFALL:82,KPICARD:83};var T=mstrmojo.vi.viz.EnumVisualizationTemplates;mstrmojo.vi.viz.EnumAggregatedVisTemplates={COMBOCHART:[T.GRAPHHORIZONTALBARDUALAXISCLUSTERED,T.GRAPHHORIZONTALBARDUALAXISABSOLUTE,T.GRAPHHORIZONTALLINEDUALAXISABSOLUTE,T.GRAPHHORIZONTALAREADUALAXISABSOLUTE,T.GRAPHVERTICALBARDUALAXISCLUSTERED,T.GRAPHVERTICALBARDUALAXISABSOLUTE,T.GRAPHVERTICALBARDUALAXISSTACKED,T.GRAPHVERTICALLINEDUALAXISABSOLUTE,T.GRAPHVERTICALLINEDUALAXISSTACKED,T.GRAPHVERTICALAREADUALAXISABSOLUTE,T.GRAPHVERTICALAREADUALAXISSTACKED,T.GRAPHCOMBINATIONBARAREADUALAXIS,T.GRAPHCOMBINATIONBARAREA],BUBBLECHART:[T.GRAPHMATRIXSCATTERCIRCLEMM,T.GRAPHMATRIXSCATTERGRIDCIRCLEAA,T.GRAPHMATRIXBUBBLECIRCLEMM,T.GRAPHMATRIXBUBBLEGRIDCIRCLEAA,T.GRAPHMATRIXSCATTERSQUAREAM,T.GRAPHMATRIXSCATTERSQUAREMM,T.GRAPHMATRIXSCATTERGRIDSQUAREAA,T.GRAPHMATRIXBUBBLESQUAREAM,T.GRAPHMATRIXBUBBLESQUAREMM,T.GRAPHMATRIXBUBBLEGRIDSQUAREAA],BARCHART:[T.GRAPHMATRIXVERTICALBARSTACKED,T.GRAPHMATRIXVERTICALBARCLUSTERED,T.GRAPHMATRIXVERTICALBARPERCENT,T.GRAPHMATRIXHORIZONTALBARSTACKED,T.GRAPHMATRIXHORIZONTALBARCLUSTERED,T.GRAPHMATRIXHORIZONTALBARPERCENT,T.GRAPHHORIZONTALBARCLUSTERED,T.GRAPHVERTICALBARCLUSTERED,T.GRAPHHORIZONTALBARABSOLUTE,T.GRAPHHORIZONTALBARPERCENT,T.GRAPHHORIZONTALBARSTACKED,T.GRAPHVERTICALBARABSOLUTE,T.GRAPHVERTICALBARPERCENT,T.GRAPHVERTICALBARSTACKED,T.GRAPHMATRIXVERTICALBARAUTOMATIC,T.GRAPHMATRIXHORIZONTALBARAUTOMATIC],LINECHART:[T.GRAPHMATRIXVERTICALLINESTACKED,T.GRAPHMATRIXVERTICALLINECLUSTERED,T.GRAPHMATRIXVERTICALLINEPERCENT,T.GRAPHMATRIXHORIZONTALLINESTACKED,T.GRAPHMATRIXHORIZONTALLINECLUSTERED,T.GRAPHMATRIXHORIZONTALLINEPERCENT,T.GRAPHHORIZONTALLINEABSOLUTE,T.GRAPHVERTICALLINEABSOLUTE,T.GRAPHVERTICALLINESTACKED,T.GRAPHVERTICALLINEPERCENT,T.GRAPHMATRIXVERTICALLINEAUTOMATIC,T.GRAPHMATRIXHORIZONTALLINEAUTOMATIC],PIECHART:[T.PIE,T.RING,T.GRAPHMATRIXPIE,T.GRAPHMATRIXRING],AREACHART:[T.GRAPHMATRIXVERTICALAREASTACKED,T.GRAPHMATRIXVERTICALAREAPERCENT,T.GRAPHMATRIXVERTICALAREACLUSTERED,T.GRAPHMATRIXHORIZONTALAREASTACKED,T.GRAPHMATRIXHORIZONTALAREAPERCENT,T.GRAPHMATRIXHORIZONTALAREACLUSTERED,T.GRAPHHORIZONTALAREAABSOLUTE,T.GRAPHVERTICALAREAABSOLUTE,T.GRAPHVERTICALAREAPERCENT,T.GRAPHVERTICALAREASTACKED,T.GRAPHMATRIXVERTICALAREAAUTOMATIC,T.GRAPHMATRIXHORIZONTALAREAAUTOMATIC],HISTOGRAM:[T.GRAPHMATRIXVERTICALHISTOGRAM,],BOXPLOT:[T.GRAPHMATRIXVERTICALBOXPLOT,T.GRAPHMATRIXHORIZONTALBOXPLOT],WATERFALL:[T.GRAPHMATRIXVERTICALWATERFALL,T.GRAPHMATRIXHORIZONTALWATERFALL]};(function(){mstrmojo.StringBuffer=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.StringBuffer",append:function A(C){if(!this.buf){this.reset();}this.buf[++this.len]=C;return this;},reset:function B(){this.buf=[];this.len=-1;}});mstrmojo.StringBuffer.prototype.toString=function(D){var C=this.buf;return(C&&C.join(D||""))||"";};}());(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}this.destroy();}});}());mstrmojo.mstr.EnumDSSXMLObjectSubTypes={Unknown:-1,Reserved:0,Filter:256,CustomGroup:257,Template:512,ReportGrid:768,ReportGraph:769,ReportEngine:770,ReportText:771,ReportDatamart:772,ReportBase:773,ReportGridAndGraph:774,ReportNonInteractive:775,ReportCube:776,ReportIncrementalRefresh:777,ReportTransaction:778,ReportEmmaCube:779,ReportEmmaIncrementalRefresh:780,Metric:1024,SubtotalDefinition:1025,SystemSubtotal:1026,MetricDMX:1027,DssSubTypeMetricTraining:1028,Style:1536,AggMetric:1792,Folder:2048,Device:2304,Prompt:2560,PromptBoolean:2561,PromptLong:2562,PromptString:2563,PromptDouble:2564,PromptDate:2565,PromptObjects:2566,PromptElements:2567,PromptExpression:2568,PromptExpressionDraft:2569,PromptDimty:2570,PromptBigDecimal:2571,Function:2816,Attribute:3072,AttributeRole:3073,AttributeTransformation:3074,AttributeAbstract:3075,AttributeRecursive:3076,Fact:3328,DimensionSystem:3584,DimensionUser:3585,DimensionOrdered:3586,DimensionUserHierarchy:3587,Table:3840,TablePartitionMD:3841,TablePartitionWH:3842,DatamartReport:4096,FactGroup:4352,Resolution:4864,AttributeForm:5376,FormSystem:5377,FormNormal:5378,Schema:5632,Format:5888,Catalog:6144,CatalogDefn:6400,Column:6656,PropertyGroup:6912,PropertySet:7168,DBRole:7424,DBRoleDataImport:7425,DBRoleOAuth:7427,DBRoleGenericDataConnector:7430,DBLogin:7680,DBConnection:7936,Project:8192,ServerDef:8448,User:8704,UserGroup:8705,Transmitter:8705,Configuration:9216,Request:9472,Search:9984,SearchFolder:10240,Datamart:10496,FunctionPackageDefinition:10752,Role:11008,RoleTransformation:11009,SecurityRole:11264,InBox:11520,InBoxMsg:11776,Consolidation:12032,ConsolidationManaged:12033,ConsolidationElement:12288,ScheduleEvent:12544,ScheduleObject:12800,ScheduleTrigger:13056,Link:13312,DBTable:13568,DBTablePMT:13569,TableSource:13824,DocumentDefinition:14080,ReportWritingDocument:14081,DocumentTheme:14082,DrillMap:14336,DBMS:14592,MDSecurityFilter:14848,MonitorPerformance:15104,MonitorJobs:15105,MonitorUserConnections:15106,MonitorDBConnections:15107,PromptAnswer:15232,PromptAnswers:15360,PromptAnswerBoolean:15233,PromptAnswerLong:15234,PromptAnswerString:15235,PromptAnswerDouble:15236,PromptAnswerDate:15237,PromptAnswerObjects:15238,PromptAnswerElements:15239,PromptAnswerExpression:15240,PromptAnswerExpressionDraft:15241,PromptAnswerDimty:15242,PromptAnswerBigDecimal:15243,PromptAnswerInt64:15244,GraphStyle:15616,ChangeJournalSearch:15872,BlobUnknown:16128,BlobOther:16129,BlobImage:16130,BlobProjectPackage:16131,BlobExcel:16132,BlobHTMLTemplate:16133,DashboardTemplate:16384,Flag:16640,ChangeJournal:16896,ExternalShortcutUnknown:17152,ExternalShortcutURL:17153,ExternalShortcutSnapshot:17154,ExternalShortcutTarget:17408,Reconciliation:17664,DerivedAttribute:3077,PaletteSystem:17920,PaletteCustom:17921,Thresholds:18432,SubscriptionAddress:65281,SubscriptionContact:65282,SubscriptionInstance:65283};mstrmojo.mstr.EnumExpressionType={ExpressionReserved:0,ExpressionGeneric:1,FilterSingleBaseFormQual:2,FilterMultiBaseFormQual:3,FilterJointFormQual:4,FilterListQual:5,FilterListFormQual:6,FilterJointListQual:7,FilterJointListFormQual:8,FilterSingleBaseFormExpression:9,FilterSingleMetricQual:10,FilterMultiMetricQual:11,FilterMetricExpression:12,FilterEmbedQual:13,FilterBranchQual:14,FilterRelationshipQual:15,FilterAllAttributeQual:16,FilterAttributeIDQual:17,FilterAttributeDESCQual:18,ExpressionAggMetric:19,ExpressionBanding:20,FilterReportQual:21,ExpressionMDXSAPVariable:22,ExpressionSQLQueryQual:23,ExpressionCanceledPrompt:24,ExpressionElementList:25,ExpressionElementSingle:26};mstrmojo.chart.model.enums.EnumDSSBaseFormType={DssBaseFormReserved:0,DssBaseFormDateTime:1,DssBaseFormNumber:2,DssBaseFormText:3,DssBaseFormPicture:4,DssBaseFormUrl:5,DssBaseFormEmail:6,DssBaseFormHTMLTag:7,DssBaseFormDate:8,DssBaseFormTime:9,DssBaseFormSymbol:10,DssBaseFormBigDecimal:11};mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5,TOC_CHAPTER:6,TOC_PAGES_LIST:7,VIZ_LAYER:8};mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7,MAPBOX:8,KPICARD:9};(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep).format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());mstrmojo.mstr.EnumDSSXMLTokenTypes={EndOfInput:-1,Reserved:0,Error:1,Unknown:2,Empty:3,ExclamationPoint:33,NumberSign:35,Dollar:36,Percent:37,Ampersand:38,LeftParen:40,RightParen:41,Asterisk:42,PlusSign:43,Comma:44,MinusSign:45,Dot:46,FwdSlash:47,Colon:58,Semicolon:59,LeftAngleBracket:60,EqualSign:61,RightAngleBracket:62,QuestionMark:63,AtSign:64,LeftSquareBracket:91,RightSquareBracket:93,Caret:94,Underscore:95,LeftAccolade:123,VerticalBar:124,RightAccolade:125,Tilda:126,Literal:258,Identifier:259,Reserved1:260,DoubleQString:261,Integer:262,Float:263,AttrRef:264,DimRef:265,MetricRef:266,AggMetricRef:267,FactRef:268,ReportRef:269,FilterRef:270,RoleRef:271,TableRef:272,PromptRef:273,ColumnRef:274,AttrFormRef:275,DimFormRef:276,SimpInfixFun1:277,SimpInfixFun2:278,SimpPrefixFun:279,AggFun:280,RelativeFun:281,CompareFun:282,AndFun:283,OrFun:284,NotFun:285,BoolPrefixFun:286,IntersectFun:287,Reserved2:288,InSetFun:289,BetweenFun:290,LikeFun:291,EnhCompareFun:292,EnhBetweenFun:293,ArrowUp:294,ArrowDown:295,ArrowUpDown:296,AggFirstInFact:297,AggLastInFact:298,KwdTrue:299,KwdFalse:300,KwdBreakBy:301,KwdSortBy:302,KwdFactID:303,DateTime:304,CaseFun:305,FreeVariable:306,LongNumber:307,RWMetricRef:308,CSQLRef:309,ConsolidationRef:310,DssTokenTypeKwdCSIUpdate:312,DssTokenTypeKwdCSISet:313,DssTokenTypeKwdCSIInsert:314,DssTokenTypeKwdCSIDelete:315,DssTokenTypeKwdCSIWhere:316,DssTokenTypeKwdCSIInto:317,DssTokenTypeKwdCSIValues:318,DssTokenTypeKwdCSIFrom:319,DssTokenTypeCSIFieldUnit:321,Elements:323,ConsolidationElementRef:324,EndOfTypes:340};(function(){function E(H,G,F){return H>=G&&H<=F;}function A(G,F){return{start:G,end:F};}function C(I,G){var L=this.renderedRowsArr,K=B.call(this,I,1),J=K.index,H=L[J],F;if(!K.between){if(H&&I>H.end+1){J++;L.splice(J,0,A(I,G));}else{L.splice(J,0,A(I,G));}H=L[J];}else{H.end=Math.max(H.end,G);}while(J<L.length-1){J++;F=L[J];if(H.end+1>=F.start){H.end=Math.max(H.end,F.end);L.splice(J,1);J--;}else{break;}}}function B(G,L){var K=this.renderedRowsArr,H=0,I=K.length-1,F,J;while(H<=I){F=(H+I)/2|0;J=K[F];if(E(G,J.start,J.end+L||0)){return{between:true,index:F};}else{if(G<J.start){I=F-1;}else{H=F+1;}}}return{between:false,index:F};}mstrmojo._RowRendTracker=mstrmojo.provide("mstrmojo._RowRendTracker",{_mixinName:"mstrmojo._RowRendTracker",renderedRowsArr:undefined,init:function D(F){this._super(F);this.renderedRowsArr=[];},markPages:function(G,F){C.call(this,G,F);},searchRow:function(H){var G=B.call(this,H,0),F;if(G.between){F=this.renderedRowsArr[G.index];return{rendered:true,min:F.start,max:F.end};}return null;},unMarkAllPages:function(){this.renderedRowsArr.length=[];}});}());(function(){function E(N,M){var O=N.st;if(!O||O===2048||O==="Project"){this.openFolder(N);}else{if(M||!mstrApp.isTablet()||this.orientation){this.openItem(N);}else{this.rootCtrl.updateItemProperties("",N,this.id,this.isItemAvail(N));}}}mstrmojo.android.controllers._HasFolderView=mstrmojo.provide("mstrmojo.android.controllers._HasFolderView",{_mixinName:"mstrmojo.android.controllers._HasFolderView",start:function B(N){this._super(N);var M=mstrmojo.publisher,O=this.id;mstrmojo.array.forEach([M.CONNECTIVITY_CHANGED_EVENT,M.RECONCILE_END_EVENT],function(P){M.subscribe(M.NO_SRC,P,function(){var Q=this.view;if(Q.hasRendered){Q.refresh();}},O);});},initFolderView:function I(){var M=this.view=this.newView("Folder",{cssClass:"folder-browser",multiSelect:false,hasEvenRows:!mstrApp.isTablet()||!this.orientation,postselectionChange:function(N){var O=N.added;if(O){E.call(this.controller,this.items[O[0]]);}}});return M;},executeItem:function D(M){var N=this.nextController;if(N){N.destroy();this.rootCtrl.updateFolder(this.view);}if(mstrApp.isTablet()&&!this.orientation){E.call(this,M,true);}else{this.view.singleSelect(M._renderIdx);}},onorientationChange:function L(){this._super();var N=this.view;if(N&&mstrApp.isTablet()){N.set("hasEvenRows",!this.orientation);if(N.hasRendered&&N.domNode&&N.domNode.parentNode){var M=N.scrollerConfig;if(M&&M.origin){M.offsetIdx=N.getOffsetIndex();M.origin.y=0;N.updateScroller();}this.syncItemProperties();}}},syncItemProperties:function K(){if(mstrApp.isTablet()&&!this.orientation){var M=this.view,N=M&&M.getSelectedItems&&M.getSelectedItems()[0];if(N){this.rootCtrl.updateItemProperties("",N,this.id,this.isItemAvail(N));}else{this.updatePropertiesMsg();}}},getDefaultMessage:function A(){return"";},updatePropertiesMsg:function H(){var M=this.view;this.rootCtrl.updateItemProperties(this.getDefaultMessage(M&&M.items));},canItemLinger:function J(M){if(!mstrApp.isTablet()){return true;}var N=M.st;if(N===2048||N==="Project"||this.orientation){return true;}return false;},itemLongPressed:function G(M){var N=this.id;if(!mstrApp.isTablet()||this.orientation){this.rootCtrl.updateItemProperties("",M,N,this.isItemAvail(M));return true;}return false;},isItemAvail:function C(N,M){if(mstrMobileApp.isOnline()||N.act===5||N.act===3){return true;}if(N.t===8&&(N.st==="Project"||N.systemFolder)){var O=mstrApp.getConfiguration().getProject(N.did);return !!(O&&O.realPid);}return M?false:this.isItemCached(N);},isItemCached:function F(N){var Q=N.t,M=N.st;if(!(Q===3||Q===55||M===2048||M==="Project")){return false;}if(M===2048&&mstrMobileApp.isOnline()){return true;}var O=N.pid||N.projectID;if(!O){var P=mstrApp.getConfiguration().getProject(mstrApp.getCurrentProjectId());O=P&&P.realPid;}return !!(O&&mstrMobileApp.isCached(O,N.sub_id||N.did,(N.sub_id)?-1:M));}});}());(function(){mstrmojo._IsGraphDataService=mstrmojo.provide("mstrmojo._IsGraphDataService",{handleUserSingleTap:function A(D,E,B,G,C,F){if(mstrApp.onMobileDevice()){mstrApp.serverRequest({taskId:"handleUserSingleTap",sliceID:D,nodekey:E,x:B,y:G,selectable:C},F);}}});}());mstrmojo.mstr.EnumNodeDimty={NodeDimtyReserved:0,NodeDimtyNone:1,NodeDimtyContinuation:2,NodeDimtyExclusiveContinuation:3,NodeDimtyOutputLevel:4,NodeDimtyBreakBy:5,NodeDimtyEmbedded:6,NodeDimtyUnspecified:7};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b",KPI_V_SCROLLBAR:"kpi-vertical-scrollbar",KPI_H_SCROLLBAR:"kpi-horizontal-scrollbar"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000,AREA_MAP:1000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumSingleLegendMode:{RESTORE:1,COLLAPSE:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};(function(){function D(K){var J=this.h.idx;if(J!==-1){return this.t.es[J][K];}return"";}mstrmojo.models.template.Header=mstrmojo.declare(null,null,{init:function H(J){this.h=J.h;this.t=J.t;},getName:function A(){return D.call(this,"n");},getElementId:function I(){return D.call(this,"id");},getObjectId:function B(){return D.call(this,"oid");},getElementIndex:function G(){return this.h.idx;},getActionType:function F(){return this.h.at;},isTotal:function E(){return this.h.otr===1;},getFormIndex:function C(){return this.h.fi;}});}());(function(){mstrmojo.hash=mstrmojo.provide("mstrmojo.hash",{copy:function B(S,R){if(S){R=R||{};var U;for(U in S){R[U]=S[U];}}return R;},copyProps:function C(U,W,R){R=R||{};if(W){var V=(U&&U.length)||0,S;for(S=0;S<V;S++){var X=U[S];if(W[X]!==undefined){R[X]=W[X];}}}return R;},forEach:function I(V,U,S){if(V){var R;for(R in V){if(S){if(U.call(S,V[R],R,V)===false){break;}}else{if(U(V[R],R,V)===false){break;}}}}return V;},walk:function P(W,S){if(!S){S=mstrmojo.global;}var V=W.split(".");if(V.length===1){return S[W];}var U=(V&&V.length)||0,R;for(R=0;R<U;R++){S=S[V[R]];if(!S){break;}}return S;},isEmpty:function F(S){if(!S){return true;}var R;for(R in S){if(S[R]!==null&&S[R]!==undefined){return false;}}return true;},clear:function G(S){if(S){var R;for(R in S){delete S[R];}}return S;},any:function J(V,W){var U;if(V){var S=this.keyarray(V);if(S.length>0){var R=S[0];U=W?R:V[R];}}return U;},clone:function M(W){if(!W){return null;}var Y;if(W.constructor===Array){Y=W.concat();var X=Y[0];if(X&&typeof X==="object"){var R=Y.length,V;for(V=0;V<R;V++){Y[V]=this.clone(W[V]);}}}else{Y={};var U;for(U in W){var S=W[U];if(S&&typeof S==="object"){Y[U]=this.clone(S);}else{Y[U]=S;}}}return Y;},cloneArray:function E(S){var U=[],R=(S&&S.length)||0,V;for(V=0;V<R;V++){U[V]=this.clone(S[V]);}return U;},keyarray:function K(U,V){var R=[],S;if(U){if(Object.keys&&!V){R=Object.keys(U);}else{for(S in U){R.push(V?Number(S):S);}}}return R;},valarray:function L(U){var R=[];if(U){var S;for(S in U){R.push(U[S]);}}return R;},equals:function Q(Z,Y){var S=mstrmojo.hash,X=(Z&&Y)||(!Z&&!Y&&(Z===Y));if(X&&Z){X=(Z.constructor===Y.constructor);if(X){if(Z.constructor===Array){var W=Z.length;X=(W===Y.length);if(X&&W){var U;for(U=0;U<W;U++){X=X&&S.equals(Z[U],Y[U]);}}}else{if(typeof Z==="object"){var a=S.keyarray(Z),V=S.keyarray(Y);X=a.length===V.length;if(X){var R;for(R in Z){X=X&&(S.equals(Z[R],Y[R]));}}}else{X=(Z===Y);}}}}return X;},obj2array:function O(X){var Y;for(Y in X){var W=X[Y];if(W&&typeof W==="object"){X[Y]=this.obj2array(W);}}var S=X.isArray;if(S!==undefined&&S===true){var V=[],R=X.length,U;for(U=0;U<R;U++){V.push(X[U]);}return V;}return X;},min:function D(V,W,X){var R=null,U;if(V){for(U in V){var S=W?V[U]:U;if(X){S=Number(S);}if((R===null)||(S<R)){R=S;}}}return R;},max:function N(V,W,X){var R=null,U;if(V){for(U in V){var S=W?V[U]:U;if(X){S=Number(S);}if((R===null)||(S>R)){R=S;}}}return R;},make:function A(S,U,R){if(!S||!U){return null;}if(S.attachEventListener){return S;}if(U.makeObservable){S=U.makeObservable(S,R)||S;}else{this.copy(U.prototype,S);if(S.init){S=S.init(R)||S;}}return S;},mergeHashes:function H(R,S){R=this.clone(R)||{};if(S){mstrmojo.array.forEach(mstrmojo.array.distinct(this.keyarray(S).concat(this.keyarray(R))),function(U){var W=R[U],V=S[U];if(W===undefined){R[U]=V;}else{if(W&&V){if(typeof W==="object"){if(W.constructor===Array){R[U]=W.concat(V);}else{R[U]=this.mergeHashes(W,V);}}else{R[U]=V;}}}},this);}return R;},invert:function(S){var U={};if(S){var R;for(R in S){if(S.hasOwnProperty(R)){if(typeof R==="number"||typeof R==="string"){U[S[R].toString()]=R;}}}}return U;}});}());(function(){function G(O,V,U,Q,S,P,R){if(V>P){return false;}return(!R)||(O===0)||((O<Q)&&(V>=S-(P-S)));}function M(R,O,W,V,Q,U,P,S){if(W>P){return false;}return(!S)||((O<Q)&&(W>=U-R.getHeight()));}function N(O,Q,P){O.renderMode="scroll";O.render();O.numChildrenRendered=0;Q.numChildrenRendered++;if(P&&!O.builtChildren){O.buildChildren();}}function E(){return this.useScrollBuffer?this.scrollBuffer:0;}mstrmojo._CanRenderDocOnScroll=mstrmojo.provide("mstrmojo._CanRenderDocOnScroll",{_mixinName:"mstrmojo._CanRenderDocOnScroll",renderMode:"scroll",scrollBuffer:0,preBuildRendering:function K(){if(!!mstrApp.features["ignore-incremental-rendering"]){this.renderMode=null;}if(this._super){this._super();}},postBuildRendering:function B(){if(this.renderMode===null){return this._super();}this.renderChildren();return true;},childRenderOnAddCheck:function(O){if(this.renderMode===null){return this._super(O);}return false;},renderChildren:function L(){var P;if(this.renderMode==="scroll"){var Q=this;while(Q){if(Q.scrollboxNode&&(Q.scrollboxWidthFixed||Q.scrollboxHeightFixed)&&Q.connectScrollbox){P=Q;break;}Q=Q.parent;}}if((this.renderMode!=="scroll")||!P){this._super();return ;}if(this.containerNode){this.scrollboxOwner=P;P.connectScrollbox(this);this.numChildrenRendered=0;var O=this.numChildren;if(O===undefined){this.numChildren=O=this._getModelChildNodes(this.node,false,0,0,true).total;}this.sectionsToRender=O;this.subsectionsToRender=0;if(O){this._startSubsectionThread(false);}}if(this.resizeOrReposition){this.resizeOrReposition();}},onscroll:function I(){if(!this.renderingSubsections){this.useScrollBuffer=true;this._startSubsectionThread(true);}},_startSubsectionThread:function A(R){var P=this;var Q=function(U,S){if(P[U]){if(S){self.clearTimeout(P[U]);}else{self.clearInterval(P[U]);}delete P[U];}};var O=function(U){P.renderingSubsections=false;var S=function(){Q("renderCtlsTimer");P.showRenderStatus(false);P.renderCtrlsInViewport();P.raiseEvent({name:"afterScroll"});P=null;};if(U){P.renderCtlsTimer=self.setTimeout(S,P.scrollboxOwner.scrollInterval+1);}else{S();}};Q("renderSubsTimer");Q("renderCtlsTimer",true);this.renderingSubsections=true;if((this.sectionsToRender||this.subsectionsToRender)&&!this._renderSubsectionsToScroll()){this.showRenderStatus(true);this.renderSubsTimer=self.setInterval(function(){if(P._renderSubsectionsToScroll()){Q("renderSubsTimer");O(R);}else{P.showRenderStatus(true);}},this.scrollboxOwner.scrollInterval);}else{O(R);}},showRenderStatus:function F(P,V){var U=this.parent;if(!U||!U.showStatus){return ;}var O=V,Q;if(P){var R=this.numChildrenRendered,S=this.numChildren;Q=S&&parseInt(100*R/S,10);O="*Rendering section "+R+" of "+S+".*";}U.showStatus(P,O,Q);},_renderSubsectionsToScroll:function J(){var a=this.scrollboxOwner,b=a.scrollboxTop,R=a.scrollboxLeft,V=a.scrollboxBottom+E.call(this),q=a.scrollboxRight,d=V-b,Y=0,X=0,W=null,e=null,Z,k;V+=1;function l(){W=X;e=W+d;}var O=this.numChildren,U=this.children||[],Q=this.model,h=this.node,g=false;for(k=0;k<O;k++){var p=U[k];if(!p){p=this.addChildren(this.builder.build(this._getModelChildNodes(h,false,k,1,true).nodes,Q))[0];U=this.children||[];}var P=g;g=!!p.defn.horiz;Z=(k>0&&p.node.data.bh);if((!g&&P)||(Z&&P)){Y=0;X+=U[k-1].getHeight();if(X>V){return true;}if((e!==null)&&(X>e)){return false;}}if(!p.hasRendered){if(!G(Y,X,R,q,b,V,g)){if(g){continue;}else{return true;}}this._renderSection(p,k);this.sectionsToRender--;this.subsectionsToRender+=(p.children&&p.children.length)||0;if(W===null){l();}}var S=p.children||[],j=null,f,o;for(f=0,o=S.length;f<o;f++){j=S[f];if(!j.hasRendered){if(!M(j,Y,X,R,q,b,V,g)){if(g){break;}else{return true;}}N(j,p);this.subsectionsToRender--;if(W===null){l();}}if(g){Y+=j.getWidth();if(Y>q){break;}}else{X+=j.getHeight();if(X>V){return true;}if((e!==null)&&(X>e)){return false;}}}}return true;},_renderSection:function H(O,P){N(O,this,true);},_getModelChildNodes:function(Q,P,S,O,R){return this.model.getChildren(Q,P,S,O,R);},renderCtrlsInViewport:function D(){var Y=this.scrollboxOwner,a=Y.scrollboxTop,P=Y.scrollboxLeft,S=Y.scrollboxBottom+E.call(this),q=Y.scrollboxRight,V=0,U=0,f=false,R=this.children||[],O,W,j,Z;var e=function(u){if(f){V+=u.getWidth();}else{U+=u.getHeight();}};var o=function(AA,u,z,AC,x){var w=parseInt(u,10)||0,AB=parseInt(z,10);return(isNaN(AB))?(AA+w<=x):mstrmojo.boxmodel.rangeIntersect(AA+w,AA+w+AB,AC,x);};for(j=0,Z=(R&&R.length)||0;j<Z;j++){var s=R[j];O=f;f=!!s.defn.horiz;W=(j>0&&s.node.data.bh);if((!f&&O)||(W&&O)){V=0;U+=R[j-1].getHeight();if(U>S){return ;}}if(!s.hasRendered){if(!f){return ;}continue;}var l=s.children,Q=(l&&l.length)||0,d,h;for(d=0;d<Q;d++){h=l[d];if(!h.hasRendered){break;}if(h.builtChildren&&(h.numChildrenRendered===((h.children&&h.children.length)||0))){e(h);}else{if((U+h.getHeight()>=a)&&(!f||(V+h.getWidth()>=P))){var t=h.children,b=(t&&t.length)||0;if(!b&&!h.builtChildren){h.buildChildren();t=h.children;b=(t&&t.length)||0;}var g=[],k;for(k=0;k<b;k++){var p=t[k];if(p.hasRendered){continue;}var X=p.getFormats()||{};if(o(U,X.top,X.height,a,S)&&o(V,X.left,X.width,P,q)){p.render();g.push(p);}}h.performCanGrowCanShrink(g,true);}e(h);}if((f&&V>q)||(!f&&U>S)){break;}}}},unrender:function C(P){var O=this.scrollboxOwner;if(O){O.disconnectScrollbox(this);}this._super(P);}});}());(function(){var A=400,B=1500;mstrmojo._CanHandleTwoClicks=mstrmojo.provide("mstrmojo._CanHandleTwoClicks",{firstClickTimeStamp:undefined,firstClickTarget:undefined,onclick:function(C){var D=new Date();timeStamp=D.getTime();if(D-this.firstClickTimeStamp<B&&D-this.firstClickTimeStamp>A){C.secondTarget=C.getTarget();C.firstTarget=this.firstClickTarget;this.onTwoClicks(C);C.cancel();}else{this.firstClickTarget=C.getTarget();this.firstClickTimeStamp=timeStamp;}if(this._super){this._super(C);}},onTwoClicks:mstrmojo.emptyFn});}());(function(){mstrmojo._Fetchable=mstrmojo.provide("mstrmojo._Fetchable",{_mixinName:"mstrmojo._Fetchable",blockBegin:1,blockCount:-1,concat:false,items:null,size:function A(){var B=this.items;return(B&&B.length)||0;},next:function(B){if(this.hasNext()){this.getItems(this.blockBegin+this.blockCount,B);}},previous:function(B){if(this.hasPrevious()){var C=this.blockBegin-this.blockCount;C=C<0?0:C;this.getItems(C,B);}},getItems:function(H,F,B){F=F||{};var E=this,D=mstrmojo.emptyFn,C=F.success||D,G=F.failure||D,I=F.complete||D;this._retrieveItems(H,{success:function(J){E.blockBegin=H;E.blockCount=J.bc||30;E.set("items",(E.concat?(E.items||[]).concat(J.items||[]):(J.items||[])));if(J.totalSize){E.totalSize=J.totalSize;}C(J);},failure:function(J){G(J);},complete:function(J){I(J);}},B);},_retrieveItems:function(D,C,B){alert("Object which mixes in this mixin has not implemented this method - _retrieveItems().");},hasNext:function(){return(((this.concat?1:this.blockBegin)+((this.items&&this.items.length)||0))<((mstrApp.isAppStatePause&&mstrApp.isAppStatePause())?this.totalSize:(this.totalSize+1)));},hasPrevious:function(){return this.blockBegin>1;}});}());mstrmojo.mstr.EnumWebFunctionType={WebFunctionTypeReserved:0,WebFunctionTypeGeneric:1,WebFunctionTypeRankQual:2,WebFunctionTypePercentQual:3};(function(){mstrmojo._HasRelativeUrls=mstrmojo.provide("mstrmojo._HasRelativeUrls",{_mixinName:"mstrmojo._HasRelativeUrls",relativeUrls:[],update:function A(C){this._super(C);var B=this,D=mstrApp.getConfiguration().getHostUrlByProject(mstrApp.getCurrentProjectId());mstrmojo.array.forEach(this.relativeUrls,function(F){var E=B[F];if(E&&(E.indexOf("://")===-1&&E.indexOf("data:")!==0)){B[F]=D+E;}});}});}());mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash");var B=mstrmojo.func.wrapMethods,C=mstrmojo.hash;function L(M){return function(){var O=this,N=[].slice.call(arguments),P=N.pop();N.push(mstrmojo.func.wrapMethods({success:function(Q){O.setData(Q);},prompts:function(Q){O.setPrompts(O.getDataService().getPrompts());}},P));this.submitToDataService(M,N);};}function A(M,N){if(N){M.data=N;}M.setPrompts(M.getDataService().getPrompts());}mstrmojo._IsRptModel={_mixinName:"mstrmojo._IsRptModel",setPrompts:function D(M){this.prompts=M;if(M){M.host=this;}},getDataService:function H(){return this.dataService;},execute:function I(O,P){var M=this,N=C.copy(O,{dssId:O.did});if(O.forceExec){N.execFlags=1;N.doNotUpdateCaches=true;}this.getDataService().execute(N,B({success:function(Q){A(M,Q);},prompts:function(){A(M);}},P));},refresh:function F(N,O){var M=this;this.getDataService().getResults(null,B({success:function(P){A(M,P);}},O));},answerPrompts:function E(N){var M=this;this.getDataService().answerPrompts(this.prompts,B({success:function(O){M.data=O;}},N));},submitToDataService:function G(M,N){var O=this.getDataService();O[M].apply(O,N);},getPageByTree:function J(M){this.submitToDataService.call(this,"getPageByTree",[M]);},sort:L("sort"),pivot:L("pivot"),drillGrid:L("drillGrid"),drill2Grid:L("drill2Grid"),linkToObject:L("linkToObject"),pageBy:L("pageBy"),addQuickGroup:L("addQuickGroup"),setData:function K(M){this.data=M;if(!this.prompts){this.setPrompts(this.dataService.getPrompts());}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,B=mstrmojo.hash;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function A(F,E){var D=[];E=E||[];B.forEach(E,function(G){C.forEach(G.att||[],function(H){if(H.did===F){D=D.concat(H.fs||[]);return false;}});});D=C.filter(D,function(G){return !!G.obf;});return C.distinct(D,"fid");}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.requiresDescs(2213,3326,3327,3329,4531,13283,13284,13285,13286);mstrmojo.ME.Enum={METRIC_ACTIONS:{ADD:"add",EDIT:"edit",EDIT_NEW:"editNew"},EDITOR_IDS:{ADVANCED:"mstrME",FORMULA:"mstrME",WIZARD:"mstrFE",SIMPLE:"mstrSME",SELECOTR:"mstrFSE"},EDITOR_TYPES:{ADVANCED:"ADVANCED",FUNCTION:"FUNCTION",SIMPLE:"SIMPLE",SELECTOR:"SELECTOR"},METRIC_EDIT_TYPES:{ADVANCED:65536,SIMPLE:131072,FUNCTION:196608},METRIC_TYPES:{65536:"ADVANCED",131072:"SIMPLE",196608:"FUNCTION"},NEW_METRIC_DEFINITION:{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}},getNewDefinition:function(){return{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}};},FBFlag:{Automatic:0,Manual:3},AFB:{Automatic:-1,False:0,True:1},SFB:{Automatic:-1,False:1,True:2},UI_OBJECT_TYPE:{Dimty:-1,Sub_Expression:-2,Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},UI_DATA_TYPE:{Sortby:-1,Breakby:-2,Level:-4,Condition:-5,Transformation:-6},SHORTCUT_FUNCTIONS:{Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},DYNAMIC_DIMTY:{CODES:{auto:{n:mstrmojo.desc(4531,"Automatic"),did:"@auto",t:-1},page:{n:mstrmojo.desc(3329,"Grand Total"),did:"@p",t:-1},byCol:{n:mstrmojo.desc(3326,"By Columns"),did:"@cols",t:-1},byRow:{n:mstrmojo.desc(3327,"By Rows"),did:"@rows",t:-1},byCell:{n:mstrmojo.desc(13283,"By Cell"),did:"@cell",t:-1},byShape:{n:mstrmojo.desc(13284,"By Shape"),did:"@shape",t:-1},downCross:{n:mstrmojo.desc(13285,"Down, Then Across"),did:"@cr",t:-1},crossDown:{n:mstrmojo.desc(13286,"Across, Then Down"),did:"@rc",t:-1}},getItems:function D(G){var F=this.CODES,E=[];switch(G){case"breakby":E=[F.auto,A.copy({n:mstrmojo.desc(2057,"None")},A.copy(F.page)),A.copy({n:mstrmojo.desc(122,"Columns")},A.copy(F.byCol)),A.copy({n:mstrmojo.desc(2968,"Rows")},A.copy(F.byRow)),A.copy({n:mstrmojo.desc(13399,"Cell")},A.copy(F.byCell)),A.copy({n:mstrmojo.desc(2923,"Shape")},A.copy(F.byShape))];break;case"level":E=[F.auto,F.page,F.byCol,F.byRow,F.byCell,F.byShape];break;case"sortby":E=[F.auto,F.downCross,F.crossDown];}return E;},getAutomaticDimtyObject:function C(){return A.copy(this.CODES.auto);},getDimtyObject:function B(E,H){var F=null;var G=false;if(H){A.forEach(mstrmojo.ME.Enum.DYNAMIC_DIMTY.CODES,function(I){if(I.did===E){F=A.copy(I);G=true;return false;}});}if(!G){F={n:E,t:-1,dimty:true};}return F;}},NonExposableParams:["IsNewOLAP","OLAPPattern","OLAPHasWindow"]};mstrmojo.ME.Enum.DEFAULT_MPS={mps:{afb:mstrmojo.ME.Enum.AFB.False,sfb:mstrmojo.ME.Enum.SFB.False,fbf:mstrmojo.ME.Enum.FBFlag.Automatic}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.mstr.ElementDataService=mstrmojo.provide("mstrmojo.mstr.ElementDataService",{getElements:function A(C,D){var B=mstrmojo.hash.copy(C,{});B.taskId=B.taskId||"browseElements";mstrApp.serverRequest(B,D,{showWait:true,hideWait:true,delay:true,silent:B.silent});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var X=this._sourceFn;if(!X){var W=this.source;if(W!=null){if(typeof (W)=="string"){if(!(W.match("return "))&&!(W.match(/\;\s*\S/))){W="return "+W;}X=new Function(W);}else{if(typeof (W)=="function"){X=W;}}this._sourceFn=X;}}var S,Y=this.parent;if(X){try{S=X.apply(Y,[]);}catch(V){}}var U=this.setter,Z=this.destination;if(U==null){Y[Z]=S;}else{if(typeof (U)=="string"){Y[U](Z,S);}else{if(typeof (U)=="function"){U.apply(Y,[Z,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var U=this._chains;if(!U){this._parseChains();U=this._chains;}for(var S in U){this._attachChain(U[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var U=this._chains;if(U){for(var S in U){this._detachChain(U[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var V=this._chains;var U=this.source;if(U&&(typeof (U)=="function")){U=U.toString&&U.toString();}if(!U){return ;}function S(d,g,W,Y){var X=d,a;while(a=X.match(g)){var e=a[0],b=e.length,f=true;e=e.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Z in V){if(Z.substr(0,b)===e){f=false;break;}else{if(e.indexOf(Z)===0){delete V[Z];}}}if(f){V[e]={host:(W==null)?null:a[W],parts:a[Y].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}X=X.substr(a.index+b);}}if(D.test(U)){S(U,O,null,1);}if(R.test(U)){S(U,M,1,2);}if(B.test(U)){S(U,L,1,2);}},_attachChain:function Q(S,V){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var f=S.evt2idx,j=S.idx2evt,a=S.parts;var g=(V>=0)?V:0,d=this.id,X=mstrmojo.all,e=(V>0)?X[j[g-1].context][a[g-1]]:(S.host?X[S.host]:this.parent),U=a[g];var W=mstrmojo.array;while(e&&U){if(e.attachEventListener){var h=e[U+"_bindEvents"]||(U+"Change");if(typeof (h)=="string"){h=[h];}var Z=[];for(var b=0,Y=h.length;b<Y;b++){Z[b]=e.attachEventListener(h[b],d,"_callback");}for(var b=0;b<h.length;b++){f[e.id+"_"+h[b]]=g;}j[g]={context:e.id,evts:h,subs:Z};}e=e[U];U=S.parts[++g];}},_detachChain:function G(S,U){var V=mstrmojo.all,l=S.idx2evt,f=S.evt2idx,b=this.id;var Z=(U>-1)?U:0,d=l.length;if(Z<d){for(;Z<d;Z++){var a=l[Z];if(!a){break;}var X=a.context,e=V[X],k=a.evts;if(e&&e.detachEventListener){var o=a.subs;for(var h=0,W=o.length;h<W;h++){e.detachEventListener(o[h]);}}l[Z]=null;for(var Y=0,g=k.length;Y<g;Y++){delete f[X+"_"+k[Y]];}}}},_callback:function I(U){this.exec();if(!U||!U.name||!U.src){return ;}var V=U.src.id+"_"+U.name,X=this._chains;for(var Y in X){var W=X[Y],S=W.evt2idx[V];if(S!=null){this._detachChain(W,S+1);this._attachChain(W,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var H=mstrmojo.array,B=mstrmojo.hash,J=B.isEmpty;var G=1;function D(Q){return(typeof Q==="object")?Q:{};}function E(R,Q){B.forEach(Q,function(S,W){var U=R[W];if(U===undefined){delete Q[W];return true;}S=Q[W]=D(S);U=R[W]=D(U);if(J(S)&&J(U)){throw (G);}else{if(J(U)){delete R[W];if(J(R[W])){E(R,Q);}}else{if(J(S)){delete R[W];if(J(R[W])){E(R,Q);}}else{try{E(R[W],Q[W]);}catch(V){switch(V){case G:R[W]=Q[W]={};break;}}}}}});}function I(Q){B.forEach(Q,function(R){B.forEach(R,function(V,S){var U=V.include,X=V.exclude;if(J(U)||J(X)){return true;}if(!J(U)&&!J(X)){try{E(X,U);}catch(W){switch(W){case G:R[S]={};break;}}}});});return Q;}function F(S,R,Q){B.forEach(S,function(V,U){if(V===true||J(V)){Q.push(R+U);}else{F(V,R+U+".",Q);}});return Q;}function P(Q){B.forEach(Q,function(R){B.forEach(R,function(V,S){var U=[];F(V.include,"",U);F(V.exclude,"!",U);R[S]=U.join(";");});});return Q;}function K(Q,R){B.forEach(Q,function(S,V){var U=R[V];if(U!==undefined){if(S!==true&&U!==true){K(S,U);}else{if(S===true&&U!==true){R[V]=true;}else{if(S!==true&&U===true){Q[V]=true;}}}}});}function L(R,S){var Q=true;B.forEach(R,function(Z,U){var X=S[U];if(X){var V=Z.include,a=Z.exclude,Y=X.include,W=X.exclude;if(!J(W)&&!J(a)){Q=false;return Q;}if(!J(Y)&&!J(V)){K(Y,V);}}return Q;});return Q;}function C(S,Q){Q=Q||{};if(S){var R=Q;H.forEach(S.split("."),function(X,V,U,W){R[X]=W?true:{};R=R[X];});}return Q;}mstrmojo.rw.model.RetrievalKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.RetrievalKeysConfig",init:function M(){this.nodes=[];this.filters={};},addNode:function A(R,U){var S=this.filters,Q=S[R];if(!Q){this.nodes.push(R);Q=S[R]={data:{},defn:{}};}if(U){if(L(Q,U)){S[R]=B.mergeHashes(Q,U);}else{throw ("The new filters for node key ## cannot be merged with the filters currently defined".replace("##",R));}}return this;}});mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig=function O(U){var Q={},V={},S={};H.forEach(U,function R(X){var W=X.partialRetrieval;if(W){H.forEach(W.nodes,function(Y){V[Y]=true;});S=B.mergeHashes(S,W.filters);delete X.partialRetrieval;}H.forEach(X.actions,R);});if(!J(V)){Q.nodes=B.keyarray(V);}if(!J(S)){Q.filters=P(I(S));}return Q;};mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters=function N(R){var Q=function(U){var S={};B.forEach(U,function(X,W){var V=S[W]={serialized:X,include:{},exclude:{}};H.forEach(X.split(";"),function(Z){var Y=Z.indexOf("!")===0;Z=Y?Z.slice(1):Z;C(Z,Y?V.exclude:V.include);});});return S;};return{data:Q(R.data),defn:Q(R.defn)};};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",O="mousemove",Q="mouseup";function G(Y){if(E.isPrimaryMouseBtn(Y)){B.startDragCheck(self,Y);}}var V,P,A="mstrmojo-dnd-avatar",U;function F(Z,Y){if(Y!==undefined&&Y!==null){P.innerHTML=Y;}U.left=Z.x+"px";U.top=Z.y+"px";}function L(Z,Y){if(!V){V=I.createElement("div");U=V.style;V.className=A;V.innerHTML='<div class="'+A+'-inner"></div>';P=V.firstChild;I.body.appendChild(V);}F(Z,Y);U.display="block";}function R(){if(U){U.display="none";}}function H(Y){var Z=++B.ctxt.moveCount;if(Z>=B.minMoves){B.stopDragCheck();if((Y.buttons===1||Y.buttons===undefined||E.isIE9)&&(Y.which===1||Y.button===0||E.isIE8)){B.startDrag(self,Y);}}}function N(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDragCheck();delete B.ctxt;}}function D(Y){B.onDragMove(self,Y);}function C(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDrag(window,Y);}}function J(Z){var Y=E.findWidget(Z);while(Y){if(Y.draggable){return Y;}Y=Y.parent;}return null;}function S(Y){var a=Y.src,Z=J(a.node);if(!Z){return null;}if(Z.getDragAction){Y.action=Z.getDragAction(Y);}a.widget=Z;a.data=Z.getDragData&&Z.getDragData(Y);if(Z.isDragValid){if(!Z.isDragValid(Y)){if(!mstrApp.isInVFInteractMode&&(!Z.shouldDragBubble||Z.shouldDragBubble(Y)===true)){Y.src.node=Z.domNode.parentNode;return S(Y);}return null;}}if(Z.ondragstart){Z.ondragstart(Y);}return Z;}function X(a,Z){var Y=E.findWidget(a),b=Z.tgt&&Z.tgt.widget;while(Y){if(Y.dropZone){if(Y===b){return Y;}if(Y.allowDrop&&Y.allowDrop(Z)){return Y;}}Y=Y.parent;}return null;}function W(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(Y,Z){delete this.ctxt;var a=E.captureEventInfo({hWin:Y,e:Z});this.ctxt={src:a,moveCount:0,last:M.copy(a.pos),getDirection:function(b){return !!this.dir[b];},getCtxtDragData:function(){var b=this.src;return(b&&b.data)||{};},getCtxtDropData:function(){var b=this.tgt;return(b&&b.data)||{};}};if(this.minMoves){E.attachEvent(I,O,H);E.attachEvent(I,Q,N);}else{this.startDrag(Y,Z);}},stopDragCheck:function(){E.detachEvent(I,O,H);E.detachEvent(I,Q,N);},startDrag:function(Y,b){var Z=this.ctxt;Z.id=mstrmojo.now();var a=S(Z);if(!a){return ;}E.clearBrowserHighlights(Y);E.preventDefault(self,b);E.attachEvent(I,O,D);E.attachEvent(I,Q,C);var f=window.mstrApp;if(f&&f.setInteractive){this._changeAppStatus=f.setInteractive(false);}if(!a.ownAvatar){var d=Z.src;L(d.pos,d.data&&d.data.html);}},stopDrag:function(Y,g){E.detachEvent(I,O,D);E.detachEvent(I,Q,C);var b=this.ctxt,a=b.tgt||{},Z=E.captureEventInfo({hWin:Y,e:g,data:a.data}),f=X(Z.node,b);Z.widget=f;b.tgt=Z;if(f){if(f.ondrop){f.ondrop(b);}else{W.call(f);}}var d=b.src.widget;if(d&&d.ondragend){d.ondragend(b);}if(d&&!d.ownAvatar){R();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(d,g){if(E.isSafari){E.clearBrowserHighlights();}var Y=this.ctxt,b=Y.tgt||{},Z=b.widget,f=E.captureEventInfo({hWin:d,e:g,data:b.data}),k=f.widget=X(f.node,Y),j=Y.last,a=f.pos;Y.dir={x:a.x>j.x,y:a.y>j.y};Y.last=M.copy(f.pos);Y.tgt=f;if(Z!==k){if(Z){if(Z.ondragleave){Z.ondragleave(Y);}else{W.call(Z);}}if(k){Y.tgt.data=(k.getDropData&&k.getDropData(Y))||{};if(k.ondragenter){k.ondragenter(Y);}else{if(k.set){k.set("allowingDrop",true);}}}}if(k){if(k.ondragover){k.ondragover(Y);}}var h=Y.src.widget;if(h&&h.ondragmove){h.ondragmove(Y);}if(h&&!h.ownAvatar){F(f.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(W,U){var X=[],Q=W.selectedIndices,P=W.allIdx;var R,S,V=W.items;if(W.multiSelect&&(P>-1)&&(K.indexOf(U,W.allIdx)>-1)){for(R=0,S=V.length;R<S;R++){if(!Q[R]){X.push(R);Q[R]=true;W.selectedIndex=R;W.selectedItem=V[R];}}}else{for(R=0,S=U.length;R<S;R++){var Y=U[R];if(!Q[Y]){Q[Y]=true;X.push(Y);W.selectedIndex=Y;W.selectedItem=V[Y];}}}return X;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(W,V){var S=[],Q=W.selectedIndices,Y=K.indexOf,P=W.allIdx;if(W.multiSelect&&(P>-1)&&(Y(V,P)>-1)){return J(W);}if(V.length>0&&Q[P]){if(Y(V,P)<0){V.push(P);}}var U=V.length,R;for(R=0;R<U;R++){var X=V[R];if(Q[X]){delete Q[X];S.push(X);if(W.selectedIndex===X){W.selectedIndex=-1;W.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var V=S.selectedIndex,U=[],W,Q;for(Q in P){if(!R[Q]){W=parseInt(Q,10);delete P[Q];U.push(W);if(V===W){S.selectedIndex=-1;S.selectedItem=null;}}}var Y=[],X=S.items;for(Q in R){if(!P[Q]){W=parseInt(Q,10);P[Q]=true;Y.push(W);S.selectedIndex=W;S.selectedItem=X&&X[W];}}return{add:Y,rmv:U};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(X,U,S){var R=U&&(typeof U==="object"),W=this.itemIdField,Q=-1,V=this.items;if(R&&W!=null){Q=K.find(V,W,U[W]);}else{if(U!=null){Q=K.indexOf(V,U);}}if((Q===-1)&&(U!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(V&&V.length)||0;}Q=P;this.add([U],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(U,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(U){this._set_selectedIndices(null,U,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,e){if(!Q||!Q.length){return ;}var S=this.items||[],u=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),W=Q.length,U=W-u.count,s=this.allowUnlistedValues,d=this.insertUnlistedValuesAt,Y=(s&&(d>-1))?U:0;if(d<0){d=S.length;}var R=[],V=[],g=u.map;if(U&&s){var q=0,f;for(f=0;f<W;f++){if(g[f]==null){R.push(Q[f]);V.push(d+q++);}}this.add(R,d);}var X=[],l;for(l in g){var p=g[l];if(p>=d){p+=Y;}X.push(p);}var t=X.concat(V),Z=this.addSelect(t,!e);if(!e){var a=K.hash(Z),h=this.selectedIndices,b=[],o;for(o in h){if(!a[o]){b.push(parseInt(o,10));}}var P=this.removeSelect(b,true);G(this,Z,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.StringBuffer");var G=mstrmojo.dom,U=mstrmojo.hash,P=mstrmojo.array;function Y(){U.forEach(this.ifwMap,function(b){b.destroy();});this.ifwMap={};}function A(){var b=[],e=null,d=null;U.forEach(this.ifwMap,function(f){if(f.visible){b.push({psId:f.psId,psKey:f.psKey,autoCloseLocks:f.autoCloseLocks,lockInfoWinId:f.lockIW?f.lockIW.id:false,anchorPos:f.anchorPosition||G.position(f.anchor,true),anchorOrn:f.anchorOrientation});}});if(b.length>0){e=this.getSelectedLayoutWidget();d=e&&e.getScrollPos();}return{ifwRecords:b,docScrollRecord:d};}function O(l){var d=(l&&l.ifwRecords)||[],j=l&&l.docScrollRecord,g=this.getSelectedLayoutWidget(),h=this,k={};if(d.length>0){if(j&&g){g.scrollTo(j);}var e=this.model,f=e.getCurrentLayoutKey(),b=e.getLayoutDataCache(f);P.forEach(d,function(o){if(o.lockInfoWinId){k.lockInfoWinId=o.lockInfoWinId;}var p=window.setInterval(function(){if(b[o.psId]){window.clearInterval(p);h.showInfoWindow(o.psId,o.psKey,k,null,o.anchorOrn,o.anchorPos,o.autoCloseLocks);}},10);});}}function K(){if(mstrmojo.DICPopup&&mstrmojo.DICPopup.cancel){mstrmojo.DICPopup.cancel();}}function S(){P.forEach(this.xtabStyleSheets,function(d){var b=d.parentNode;if(b){b.removeChild(d);}});}function a(d,g){var e=this.getLayout(d),b=e.docGroupBy,f=this.controller;if(b){b.set("data",g.groupbys);e.gb=g;}if(f.getPageByTree){f.getPageByTree(true);}}mstrmojo._IsRwDocument=mstrmojo.provide("mstrmojo._IsRwDocument",{_mixinName:"mstrmojo._IsRwDocument",updateXtabStyles:function M(j,e){var s=this.xtabStyleSheets&&this.xtabStyleSheets[0],q=this.styleList||{},d=function(AA,x){var z;for(z in x){var w=x[z].css||"";if(x[z].app){w=(AA[z]||"")+w;}AA[z]=w;}return AA;},t=document;if(!q[j]){q[j]=d({},this.model.getSelectedXtabStyles(j));}d(q[j],e);if(!this.xtabStyleSheets){this.xtabStyleSheets=[];s=this.xtabStyleSheets[0]=t.getElementsByTagName("head")[0].appendChild(t.createElement("style"));}var u=new mstrmojo.StringBuffer(),g,h;for(g in q){for(h in q[g]){u.append(q[g][h]);}u.append("\n");}var f=u.toString();if(s&&f){s=s.styleSheet||s;if(G.isWK){var p=s.firstChild;if(p){p.nodeValue=f;}else{s.appendChild(t.createTextNode(f));}}else{if(G.isIE6||G.isIE7||G.isIE8||G.isIE9){s.cssText=f;var o,l,b,k;for(o=1;s.rules.length===4095&&t.styleSheets.length<31;o++){l=s.rules[4094];b=new RegExp(l.selectorText,"i");k=f.search(b);if(k===-1){break;}k=f.indexOf("}",k+1);f=f.slice(k+1);if(!this.xtabStyleSheets[o]){this.xtabStyleSheets[o]=t.getElementsByTagName("head")[0].appendChild(t.createElement("style"));}s=this.xtabStyleSheets[o].styleSheet;s.cssText=f;}}else{s.innerHTML=f;}}}this.styleList=q;},postBuildRendering:function X(){var b=document.getElementsByTagName("head")[0];P.forEach(this.xtabStyleSheets,function(d){b.appendChild(d);});return this._super();},buildChildren:function B(g){var l;try{var h=this.model;if(h){var j=this.buildSubs||{},w=h.id+"-partialUpdate",d=h.id+"-rebuildLayout",p=h.id+"-updateStyles",f=h.id+"-showInfoWin",e=this.id;var o=this,t=function(){P.forEach(o.getLayouts(),function(s){if(s.k!==h.currlaykey){s.defn.loaded=false;}});};if(j[w]===undefined){var q=function b(AD){var x=this.model,u=x&&x.getLayoutDataCache(x.getCurrentLayoutKey()),s=AD&&AD.ids;if(U.isEmpty(u)||!s){return ;}P.forEach(AD&&AD.tree&&AD.tree.layouts,function(AF){if(AF.k===x.currlaykey){this.updateXtabStyles(AF.k,AF.xtabStyles);if(AF.gbys){a.call(this,AF.k,AF.gbys);}return false;}return true;},this);var AA=U.forEach,AE=false,AB={update:s.upd,refresh:s.tgts,adjustSectionSize:s.secs};AA(s.ifws,function(AH,AG){var AF=mstrmojo.all[AH+"_ifw"];if(AF&&AF.visible){this.updateInfoWindowPS(AH,AG);}},this);AA(AB,function(AG,AF){AA(AG,function(AJ,AN){var AI=mstrmojo.all[AN],AM;if(AI&&AI[AF]!==undefined){var AL=u[AN],AH=(AF==="update"?AL:null),AK=AF;if(AF==="update"){if(AI.updateForPU){AK="updateForPU";}else{AI.node=AL;}}else{if(AF==="refresh"&&AI.refreshForPU){AK="refreshForPU";}}AM=AI[AK](AH);if(AF==="adjustSectionSize"&&AM){AE=AE||(!!AM.heightReduced);}}},this);},this);var z=this.getSelectedLayoutWidget();if(AE){z.notifyScrollListeners();}var AC=z.docLayout;if(AC){AC.resizeOrReposition();}if(AD&&AD.unloadCache){t();}};j[w]=h.attachEventListener("partialUpdate",e,q);}j[d]=j[d]||h.attachEventListener("rebuildLayout",e,function(s){var x=s&&s.restoreIW,u;if(x){u=A.call(this);this.model.aws=null;}this.onLayoutRebuilt(this.rebuildLayout(s.src.currlaykey,this.getLayouts()));if(s&&s.unloadCache){t();}if(x){O.call(this,u);}});j[p]=j[p]||h.attachEventListener("updateStyles",e,function(s){this.updateXtabStyles(s.key,s.updatedStyles);});j[f]=j[f]||h.attachEventListener("showInfoWin",e,function(s){this.showInfoWindow(s.psId,s.psKey,s.anchor,s.invalidate,s.anchorOrientation,s.anchorPosition);});this.updateXtabStyles(h.getCurrentLayoutKey());h.attachEventListener("refresh",this.id,function(){this.refresh();});}l=this._super(g);}catch(k){mstrmojo.err(k);}return l;},updateInfoWindowPS:mstrmojo.emptyFn,showInfoWindow:function J(d,z,o,q,u,w,AH){var f=this.model,j=f.getLayoutDataCache(f.getCurrentLayoutKey()),AC=this.builder,b=j[d]&&j[d].defn,h=b&&b.iwpl,AB=d+"_ifw",AG=mstrmojo.all[AB],AD=this.domNode,e=mstrmojo.DocInfoWindow.PLACEMENT.FIXED,AE=function(AI,AJ,AK,AM,AL){if(h===e){if(AJ){var AN=G.delta(AJ,AD);AI.popPosition={left:(AN&&AN.x)?AM+AN.x:AM,top:(AN&&AN.y)?AL+AN.y:AL};}else{if(AK){AI.popPosition={left:(AK.scrollboxLeft)?AM-AK.scrollboxLeft:AM,top:(AK.scrollboxTop)?AL-AK.scrollboxTop:AL};}else{AI.popPosition={left:AM,top:AL};}}}};var t=this.getLayout(f.getCurrentLayoutKey());if(AG){if(q){AG.refresh();}AG.anchorOrientation=u;AG.anchorPosition=w;if(h===e){if(!AG._ifwpdn){var p=j[d]&&j[d].p,x=p&&f.getUnitInstance(p.k,p.wid);AG._ifwpdn=x&&x.domNode;}else{if(AG._ifwpdn.style.display==="none"){AG._ifwpdn=document.getElementById(AG._ifwpdn.id);}}}AE(AG,AG._ifwpdn,t,AG._ifwfl,AG._ifwft);AG.open(this,{anchor:o,boundary:AD});}else{var k={opener:this,anchor:o,anchorOrientation:u,boundary:AD,parent:this,builder:AC,model:this.model,psKey:z,psId:d,id:AB,autoCloses:true,locksHover:true,closeOnClick:false,autoCloseLocks:AH,anchorPosition:w};if(h){h=parseInt(h,10);k.placement=h;if(h===e){var l=b.fmts,g=k._ifwfl=l&&l.left&&parseInt(l.left.replace("px",""),10),AA=k._ifwft=l&&l.top&&parseInt(l.top.replace("px",""),10),p=j[d]&&j[d].p,x=p&&f.getUnitInstance(p.k,p.wid),s=k._ifwpdn=x&&x.domNode;AE(k,s,t,g,AA);}}AG=AC.newInfoWindow(k);this.renderInfoWindow(AG);var AF=this.ifwMap=(this.ifwMap||{});AF[d]=AG;}},renderInfoWindow:function L(b){b.render();},_lockInfoWinContainer:function I(e){var h=this.ifwMap,d=function(j,k){return function(){j.releaseLock(k);};},b;for(b in h){var f=h[b],g=e.xtab;if(f&&g&&G.contains(f.infoNode,g.domNode,true,document.body)){f.registerLock(g);e.onClose=d(f,g);break;}}},unrender:function W(b){Y.call(this);this._super(b);S.call(this);},getLayouts:function Q(){return this._layouts;},getLayout:function V(b){b=b||this.model.getCurrentLayoutKey();var d=this.getLayouts();return d[P.find(d,"k",b)];},getSelectedLayoutWidget:mstrmojo.emptyFn,needLoadLayout:function R(b,d){return b.defn&&(d&&d.reload||(!!(d&&d.panelKey))||(b.defn.loaded===false)||(this.model.zt&&(window.mstrMobileApp!==undefined)&&(b.defn.lastOrientation!==mstrMobileApp.getOrientation())));},getNewLayout:function F(d,j,b,o,e){var h=this,f=h.model,l=d.layoutKey,g=j[P.find(j,"k",l)];if(this.needLoadLayout(g,d)){var k=o.success;o.success=function(p){f.replaceLayout(l,p,false);f.currlaykey=l;if(b){h.selectLayout(g,false,null,e);}var q=h.rebuildLayout(l,j,false);if(h.controller.getPageByTree){h.controller.getPageByTree(true);}k(q);};this.loadDocLayout(d,o,e);}else{if(b){this.selectLayout(g,true,{success:function(p){U.copyProps(["bs"],p,f);}},e);}if(!g.hasRendered){g=this.rebuildLayout(l,j);if(h.controller.getPageByTree){h.controller.getPageByTree(true);}}o.success(g);}},selectLayout:function E(f,g,j,h){var b=this.model,d=f.k,e=(d!==b.currlaykey);b.currlaykey=d;if(this.controller){this.controller.updateZoom();}this.restoreLayoutState(f);if(g&&e){this.setCurrentDocLayout(d,j,h);}else{if(j&&j.complete){j.complete();}}return f;},rebuildLayout:function C(d,l,o){var f=this.model,e=P.find,g=l[e(l,"k",d)],b=f.getChildren(this.node,false);var h=b[e(b,"k",d)];if(window.mstrMobileApp!==undefined){h.defn.lastOrientation=mstrMobileApp.getOrientation();}var j=this.replaceLayout(g,h);this.updateXtabStyles(d,f.getSelectedXtabStyles(d));if(o!==false){Y.call(this);}K();return j;},destroy:function Z(){Y.call(this);if(this._super){this._super();}S.call(this);},replaceLayout:mstrmojo.emptyFn,restoreLayoutState:mstrmojo.emptyFn,onLayoutRebuilt:mstrmojo.emptyFn,unloadGbLayuts:function H(e){var l=this.getLayouts(),g=this.model.getCurrentLayoutKey(),j,h,o,d,f,b;j=this.getLayout();d=j.gb&&j.gb.groupbys;for(f=0;f<d.length;f++){o=d[f];if(o.k===e){b=o.unit.target.did;break;}}for(h=0;h<l.length;h++){j=l[h];if(j.k===g){continue;}d=j.gb&&j.gb.groupbys;if(d&&d.length){for(f=0;f<d.length;f++){o=d[f];if(o.unit.target.did===b){j.defn.loaded=false;break;}}}}},loadDocLayout:function N(b,e,d){this.model.getDataService().loadDocLayout(b,e,d);},setCurrentDocLayout:function D(b,e,d){this.model.getDataService().setCurrentDocLayout(b,e,d);}});}());mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var S=mstrmojo.hash,H="containerNode",G="auto",Q="px";var I={v:G,c:undefined,sv:G};function E(e,h,g){var j=this._layoutWidgets[h],o=e.slot||H,k=j.f,l=j.p,f=(k&&k[o]!==undefined),d=(l&&l[o]!==undefined);if(o&&((!g&&f)||d)){return f?k[o]:(j.x*parseInt(l[o],10)/100)+Q;}return e[(h==="h")?"height":"width"];}function K(k,f,d){if(k.ignoreLayout){return ;}var e=(f===G)||f==="NaNpx",j=(d===G)||d==="NaNpx";var g=k.getLayoutOffsets&&k.getLayoutOffsets();if(g){if(!e){f=(parseInt(f,10)-g.h)+Q;}if(!j){d=(parseInt(d,10)-g.w)+Q;}}if(k.setDimensions){k.setDimensions(f,d);}else{if(k.set){if(!e){k.set("height",f);}if(!j){k.set("width",d);}}}}function a(g){var e=this.children,k,o;for(k=0,o=(e&&e.length)||0;k<o;k++){var f=e[k],p=f.slot||H;if(p){var l=E.call(this,f,"h",g),q=E.call(this,f,"w",g);this.setSlotDimensions(p,l,q);K(f,l,q);var d=E.call(this,f,"h",g),j=E.call(this,f,"w",g);if(d!==l||j!==q){K(f,d,j);}this.setSlotDimensions(p,d,j);}}this.afterLayout();}function B(){var e=this.children,d=this._layoutWidgets;S.forEach(this.slotNames,function(k,l){if(!k||this.skipsSlotLayout(l)){return ;}var j=(d.h&&d.h.getSlotSizeInfo(l,e))||I,f=(d.w&&d.w.getSlotSizeInfo(l,e))||I,g=j.c||f.c;mstrmojo.array.forEach(g,function(h){K(h,j.v,f.v);});this.setSlotDimensions(l,j.sv,f.sv);},this);this.afterLayout();}function D(e){var d=this.layoutConfig.xt?B:a;d.call(this,e);}function U(l,g,j){var k=l.slot||H,h=g&&g.a;if(!h||h[k]===undefined){return ;}var e=this[k]["offset"+j],f=h[k];if(e===f){return ;}g.x-=(e-f);h[k]=e;}function J(d){this.beforeLayout();var e=this._layoutWidgets,f=d.src;U.call(this,f,e.h,"Height");U.call(this,f,e.w,"Width");D.call(this,true);}function O(f,k){if(!f){return null;}var d=this.children,x=k.toLowerCase(),l=parseInt(this[x],10),p=l,s={},u={},j={},e={},t={},o,q,g,z,w;for(w in f){if(!f.hasOwnProperty(w)){continue;}z=f[w];if(z.match(/px$/)){l-=parseInt(z,10);s[w]=z;}else{if(z.match(/%$/)){u[w]=z;}else{if(z.match(/all/)){t[w]=p;}else{j[w]=z;}}}}if(!S.isEmpty(j)&&!S.isEmpty(u)){for(o=0,q=(d&&d.length)||0;o<q;o++){g=d[o];w=g.slot||H;if(w&&j[w]&&!g.ignoreLayout){if(g.hasRendered){var h=this[w];e[w]=h.getBoundingClientRect?Math.round(h.getBoundingClientRect()[k.toLowerCase()]):h["offset"+k];l-=e[w];}else{e[w]=0;g.attachEventListener((g instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,J);}}}}return{f:S.isEmpty(s)?undefined:s,p:S.isEmpty(u)?undefined:u,a:S.isEmpty(e)?undefined:e,n:S.isEmpty(t)?undefined:t,x:l,getSlotSizeInfo:function(AH,AC){if(!f[AH]){return I;}var AB=mstrmojo.array.filter(AC,function(AJ){var AI=AJ.slot;return AI===AH||(AH===H&&!AI);}),AF,AG;var AA=s[AH];if(AA){AG=AA;}var AE=u[AH];if(AE){AG=(this.x*parseInt(AE,10)/100)+Q;}if(j[AH]){AG=e[AH];if(AG){AG+=Q;}else{AG=G;}AF=G;}var AD=t[AH];if(AD){AG=AF=AD+Q;}AG=AG||"0px";return{v:AG,c:AB,sv:AF||AG};}};}function R(e){var d=this.domNode;if(!d||!this.layoutConfig){return ;}d.style[e]=this[e];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,forceLayout:false,layoutConfig:null,init:function W(d){this._super(d);this.layoutConfig=S.clone(this.layoutConfig);},preBuildRendering:function C(){var f=this.cssText||"";var d=this.height;if(d&&d!==G){f+="height:"+this.height+";";}var e=this.width;if(e&&e!==G){f+="width:"+this.width+";";}this.cssText=f;return(this._super)?this._super():true;},postBuildRendering:function X(){this.doLayout();return this._super();},modifyLayoutConfig:function Z(f,e){var d=this.layoutConfig=this.layoutConfig||{};d.h=S.copy(f,d.h);d.w=S.copy(e,d.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function P(f,d){var e=this._super(f,d);if(f==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return e;},doLayout:function A(){var d=this.layoutConfig;if(!d||(this.height===G&&this.width===G)){return ;}if(d.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:O.call(this,d.h,"Height"),w:O.call(this,d.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(d){this.setDimensions(d.h,d.w);return true;},onwidthChange:function N(){R.call(this,"width");},onheightChange:function M(){R.call(this,"height");},skipsSlotLayout:function(d){return false;},adjustParentDimensions:function L(){var e=this.parent,d=e&&e._layoutWidgets;if(d){U.call(e,this,d.h,"Height");U.call(e,this,d.w,"Width");}},setDimensions:function V(g,e){var f=(g===G)||g==="NaNpx",j=(e===G)||e==="NaNpx";if((!f&&parseInt(this.height,10)!==parseInt(g,10))||(!j&&parseInt(this.width,10)!==parseInt(e,10))||this.forceLayout){if(!f){this.height=g;}if(!j){this.width=e;}var d=this.domNode,k=d&&d.style;if(k){if(!f){k.height=g;}if(!j){k.width=e;}this.doLayout();}return true;}return false;},setSlotDimensions:function Y(g,f,e){var d=this[g]&&this[g].style;if(!d){return ;}if(f!==G&&f!==undefined&&f!=="NaNpx"&&d.height!==f&&parseInt(f)>=0){d.height=f;}if(e!==G&&e!==undefined&&e!=="NaNpx"&&d.width!==e&&parseInt(e)>=0){d.width=e;}}});mstrmojo._HasLayout.getSlotSize=function b(g,j){var e=g&&g.prototype.layoutConfig;if(e){var f=e.h,d=e.w;return{h:(f&&f[j])||undefined,w:(d&&d[j])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash;mstrmojo._CanSupportTransaction={_mixinName:"mstrmojo._CanSupportTransaction",updatedCellsMap:null,getUpdates:mstrmojo.emptyFn,getUpdateObject:mstrmojo.emptyFn,getKeyContext:mstrmojo.emptyFn,autoRefresh:mstrmojo.emptyFn,editNext:mstrmojo.emptyFn,buildConditions:mstrmojo.emptyFn,dataChanged:function A(G,H,F,I,D){var E=this.updateValue(G,F);this.updatedCellsMap[G]={r:H,v:F};this.controller.onTransactionUpdates(this,this.getUpdateObject(),E,D);},postBuildRendering:function B(){if(this._super){this._super();}if(!this.txModel){this.txModel=this.model.docModel||this.model;}this.updatedCellsMap=this.updatedCellsMap||{};},updateValue:function(E,D){if(this.txModel.deltaUpdate){this.txModel.deltaUpdate(this);}return false;},getUpdatedValues:function(){var E=this.updatedCellsMap,F,D,G=[];for(F in E){if(E.hasOwnProperty(F)){D={};D.v=E[F].v.v;G.push(C.copy(this.getKeyContext(F),D));}}return G;},clear:function(){this.updatedCellsMap={};},registerTxWidget:function(){function E(F,H){var G=F.node.data.k;H.txWidgets=H.txWidgets||{};H.txWidgets[G]=F;return false;}var D=this.parent;while(D){if(D.isPanelStack===true){E(this,D);}D=D.parent;}}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var B={};var E={};mstrmojo.publisher=mstrmojo.provide("mstrmojo.publisher",{publish:function F(H,Q,L){var M=B[H]&&B[H][Q],O;if(!M){return ;}for(O in M){var J=null;if(O){J=mstrmojo.all[O];if(!J){delete M[O];continue;}}var R=M[O].methods;if(R){var P=J||mstrmojo.global,I;for(I in R){if(P[I]){P[I](L);}}}var N=M[O]&&M[O].functions,S=(N&&N.length)||0;if(S){var K;if(J){for(K=S-1;K>-1;K--){if(N[K]){N[K].apply(J,[L]);}}}else{for(K=S-1;K>-1;K--){if(N[K]){N[K](L);}}}}}},subscribe:function D(I,N,R,J){var S=B[I];if(!S){S={};B[I]=S;}var M=S[N];if(!M){M={};S[N]=M;}var K=M[J||""];if(!K){K={};M[J||""]=K;}if(typeof R==="function"){var L=K.functions;if(!L){L=[];K.functions=L;}L.push(R);}else{var H=K.methods;if(!H){H={};K.methods=H;}H[R]=true;}var Q=E,P=Q[J||""];if(!P){P={};Q[J||""]=P;}var O=P[I];if(!O){O={};P[I]=O;}O[N]=true;return{id:I,type:N,callback:R,listener:J,clear:function(){mstrmojo.publisher.unsubscribe(this);}};},unsubscribe:function C(I){var R=B[I.id],O=R&&R[I.type],L=O&&O[I.listener||""];if(!L){return ;}var K=mstrmojo.array,Q=mstrmojo.hash,P=typeof I.callback,M=false;if(P==="function"){var N=L.functions;if(N){K.removeItem(N,I.callback);if(!N.length){delete L.functions;if(Q.isEmpty(L.methods)){M=true;}}}}else{var J=L.methods;if(J){delete J[I.callback];if(Q.isEmpty(J)){delete L.methods;if(!L.functions||!L.functions.length){M=true;}}}}if(M){delete O[I.listener||""];if(Q.isEmpty(O)){delete R[I.type];}}},hasSubs:function G(K,J){var I=B[K],H=I&&I[J];return !!H;},clearSubscriptions:function A(I){if(!I){I="";}var P=B,M=mstrmojo.hash,H;if(P[I]){delete P[I];}var O=E[I];if(O){for(H in O){var N=P[H],L=O[H],K;if(!N){continue;}for(K in L){var J=N[K];if(!J){continue;}delete J[I];if(M.isEmpty(J)){delete N[K];}}}}delete E[I];}});mstrmojo.publisher.NO_SRC="NO_SRC";mstrmojo.publisher.CONNECTIVITY_CHANGED_EVENT="CONNECTIVITY_CHANGED";mstrmojo.publisher.RECONCILE_END_EVENT="RECONCILE_END";}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.all={};var E=mstrmojo.all,G=mstrmojo.hash;var A=0;function D(){var I;while(!I){var H="mstr"+(A++);if(!E[H]){I=H;}}return I;}mstrmojo.registry=mstrmojo.provide("mstrmojo.registry",{add:function F(H){if(!H){return ;}var I=H.id;if(!I){H.id=I=D();}else{if(E[I]){throw new Error("Tried to register 2 objects with same id: "+I);}}E[I]=H;},remove:function C(H){if(H&&H.id){delete E[H.id];}},dumpAll:function(){var H;for(H in E){var I=E[H].id;if(I){mstrmojo.dbg(I+"("+(E[H].scriptClass||"[unknown class]")+")");}}},ref:function B(I,H){H=H||{};if(I){var L=I;while(L){switch(typeof L){case"string":if(H.skipLoadChecks!==true){mstrmojo.requiresCls(L);}L=G.walk(L,window);break;case"function":return(H.dontInst!==true)?new L():L;case"object":if(L.constructor===Object){var K=L.scriptClass;if(K){if(H.skipLoadChecks!==true){mstrmojo.requiresCls(K);}var J=G.walk(K,window);if(J){return new J((H.clone===true)?G.clone(L):L);}return null;}return L;}return L;default:return null;}}}return null;}});mstrmojo.insert=mstrmojo.registry.ref;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var O=/\{\@(en@)?([^\}]+)\}/gm,K=/\</gm,S=/\>/gm,F=/\S/,R=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],G=new RegExp("(\\"+R.join("|\\")+")","g"),U={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;","\u0009":"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},X={"&amp;":"&","&lt;":"<","&gt;":">","&#x09;":"\u0009","&#x0A;":"\n","&#x0D;":"\r","&quot;":'"'},D={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#39;",'"':"&#34;"},N={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#39;":"'","&#34;":'"'},E={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","\u20ac":"&#8364;"},L={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&#34;":'"',"&#8364;":"\u20ac"};var M=function(Y){if(Y===null){return"null";}var Z=typeof Y;if(Z!=="object"){return Z;}if(Y.length===undefined){return"object";}return"array";};var V={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function H(Z,d,b){var Y;b=b||[];if(!Z){return"";}var a=[];for(Y in d){if(mstrmojo.array.indexOf(b,Y)===-1){a.push(Y.k||Y);}}return Z.replace(new RegExp(a.join("|"),"g"),function(e){var f=d[e];return f.v||f;});},trim:function Q(Y){return(Y&&Y.replace)?Y.replace(/^\s+/,"").replace(/\s+$/,""):Y;},startsWith:function W(Z,Y){return Z.length>=Y.length&&Z.substring(0,Y.length)==Y;},ellipsize:function A(a,Z){var Y=this.trim(a.substr(0,(Z||1)-1));if(Y!==a){Y+="&hellip;";}return Y;},isEmpty:function J(Y){return(Y===null)||(Y===undefined)||!(F.test(Y));},regEscape:function P(Y){return Y.replace(G,"\\$1");},escapeIllegalXML:function C(Y){if(!Y||!Y.replace){return Y;}var Z=/\u001a/gm,a="";return Y.replace(Z,a);},encodeXMLAttribute:function(Y){return mstrmojo.string.multiReplace(Y,U);},decodeXMLAttribute:function(Y){return mstrmojo.string.multiReplace(Y,X);},encodeHtmlString:function(Z,Y,a){if(!Z||!Z.replace){return Z;}if(a){return mstrmojo.string.multiReplace(Z,E);}return mstrmojo.string.multiReplace(Z,D,Y?[" "]:[]);},decodeHtmlString:function(Z,Y){return Y?mstrmojo.string.multiReplace(Z,L):mstrmojo.string.multiReplace(Z,N);},htmlAngles:function(Y){if(!mstrmojo.string.isEmpty(Y)){Y=String(Y);return Y.replace(K,"&lt;").replace(S,"&gt;");}return Y;},apply:function I(Y,a){if(!Y){return"";}var Z=this;return Y.replace(O,function b(f,g,h){var d;try{d=mstrmojo.hash.walk(h,a);}catch(e){}d=(d===null||d===undefined)?"":d;return(!!g)?Z.encodeHtmlString(d,true):d;});},json2xml:function(Y,q,s){if(!(q instanceof Array)){q=[q];}var Z=s&&s.isSerializable,p=(s.convertBoolean!==false),w=s&&s.skipFunctions,o,f;var h=[],d=[],g,b,e;for(o=0,f=q.length;o<f;o++){var l=q[o];for(g in l){if(w&&typeof l[g]==="function"){continue;}if(Z){var u=Z(g,q,o);if(u!==true){if(u===false){continue;}else{if(u.att){h.push(u.att);}if(u.child){d.push(u.child);}continue;}}}b=l[g];e=M(b);switch(e){case"array":var j,k;d.push("<"+g+">");for(j=0,k=b.length;j<k;j++){var a=s.getArrItemName(g,b,j)||j;d.push(this.json2xml(a,b[j],s));}d.push("</"+g+">");break;case"object":d.push(this.json2xml(g,b,s));break;case"string":h.push(g+'="'+mstrmojo.string.encodeXMLAttribute(b)+'"');break;case"boolean":h.push(g+'="'+(p?(b?"-1":"0"):b)+'"');break;case"null":if(!s.skipNull){h.push(g+'="'+s.nullValue+'"');}break;default:h.push(g+'="'+b+'"');break;}}}return"<"+Y+" "+h.join(" ")+">"+d.join("")+"</"+Y+">";},escape4HTMLText:function B(g){if(!g||!g.replace){return g;}var d=/"/gm;var a="&quot;";var h=/&/gm;var f="&amp;";var e=/</gm;var Y="&lt;";var b=/>/gm;var Z="&gt;";return g.replace(h,f).replace(d,a).replace(e,Y).replace(b,Z);},parseUri:function(d,Z){Z=Z||V;var Y=Z.parser[((Z.strictMode)?"strict":"loose")].exec(d),b={},a=14;while(a--){b[Z.key[a]]=Y[a]||"";}b[Z.q.name]={};b[Z.key[12]].replace(Z.q.parser,function(f,e,g){if(e){b[Z.q.name][e]=g;}});return b;},removeSpecialChars:function(Y){return Y.replace(/[^a-zA-Z0-9]/g,"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash,A=null;function B(D){return mstrmojo.AndroidDICFactory.createDIC(C.copy({dic:this.dic,owner:this.owner,group:this},D));}mstrmojo.AndroidDICFactory=mstrmojo.provide("mstrmojo.AndroidDICFactory",{createDIC:function(G){var E=G.dic,F=mstrmojo.DICConfig.getDICClass(E),D;if(F){if(G.k===undefined){G.k=G.opener&&G.opener.id;}G.showByDefault=mstrmojo.DICConfig.showDICByDefault(G.dic,G.openerType);G.hasPreview=mstrmojo.DICConfig.hasDICPreview(G.dic,G.openerType);D=new F(G);}return D;},createDICPopup:function(D,E){return mstrmojo.DICPopup.getInstance(D,E);},createDICGroup:function(F){var I=C.copy(F,{scriptClass:"mstrmojo.Widget",widgetsMap:{},dic:null,owner:null,groupMembers:{},postCreate:function(){var L=this.dic,K=this.openerType,J=mstrmojo.DICConfig;this.showByDefault=J.showDICByDefault(L,K);this.hasPreview=J.hasDICPreview(L,K);},addDIC:function D(J,K){this.groupMembers[J]=K;},showPopupDIC:function H(K){if(!this.showByDefault){var J=this.widgetsMap[K],L=this.groupMembers[K];if(!L){return ;}if(!J){J=this.widgetsMap[K]=B.call(this,L);}J.showInPopup();}},render:function G(){if(this.showByDefault||this.hasPreview){var L=this.groupMembers,K=this,J;C.forEach(L,function(N,M){if(!N.hasRendered){K.widgetsMap[M]=J=B.call(K,N);if(K.showByDefault){J.render();}else{if(K.hasPreview){J.renderPreview();}}N.hasRendered=true;}});}},destroy:function E(){C.forEach(this.widgetsMap,function(J){J.destroy();});this.widgetsMap={};}});return mstrmojo.insert(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var V=this.vscrollNode,W=V&&V.style;if(!W){return ;}if(this.vscrollVisible){var U=this.maxPos,X=this.clientSize;W.height=Math.round(X.y*X.y/U.y)+"px";W.left=(X.x-5)+"px";W.display="block";W.opacity=0.5;}else{W.opacity=0;}},onhscrollVisibleChange:function(){var W=this.hscrollNode,V=W&&W.style;if(!V){return ;}if(this.hscrollVisible){var U=this.maxPos,X=this.clientSize;V.width=Math.round(X.x*X.x/U.x)+"px";V.top=(X.y-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}}};var M=L.copy({onposChange:function(){var W=this.clientSize,V=this.maxPos,U=0,X=0;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((W.y-(W.y*W.y/V.y))*this.pos.y/V.y)+"px)";}}if(this.scrollsHoriz){U=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((W.x-(W.y*W.x/V.x))*this.pos.x/V.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(U,10)+"px, -"+parseInt(X,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var W=this.clientSize,V=this.maxPos,U=0,Y=0,X=this.scrollboxNode;if(this.scrollsVert){Y=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((W.y-(W.y*W.y/V.y))*this.pos.y/V.y)+"px";}X.scrollTop=parseInt(Y,10);}if(this.scrollsHoriz){U=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((W.x-(W.y*W.x/V.x))*this.pos.x/V.x)+"px";}X.scrollLeft=parseInt(U,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var X=this.scrollboxNode,W=this.itemsContainerNode||X.firstChild;if(X&&X!==W){this.scrollChild=W;var U=X.style;U.position="relative";U.overflow="hidden";var V=W.style;V.position="absolute";V.left=0;V.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(U){if(this.usesTouches){this.detachTouchEvents();}this._super(U);},attachTouchEvents:function(){var V=this.touchNode||this.scrollboxNode;if(V){if(!this._tsCallback){var U=this;this._tsCallback=function(W){U.touchesBegin(self,W);};this._tmCallback=function(W){U.touchesMoved(self,W);};this._teCallback=function(W){U.touchesEnd(self,W);};}D.attachEvent(V,D.TOUCHSTART,this._tsCallback);this._tsNode=V;}},detachTouchEvents:function(){var U=this._tsNode;if(U){D.detachEvent(U,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(U,W){var V=W.target&&W.target.tagName;if(V&&(V==="SELECT"||V==="INPUT")){return ;}D.preventDefault(U,W);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(U,W),U);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(d,g){var a=D.getMousePosition(D.firstTouch(d,g),d);D.preventDefault(d,g);if(!this.dragging){var U=5,k=Math.abs;if((this.scrollsHoriz&&k(a.x-this.pos.x)>U)||(this.scrollsVert&&k(a.y-this.pos.y)>U)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=a;var W=this.scrollboxNode,Z={x:W.clientWidth,y:W.clientHeight},h={x:W.scrollWidth,y:W.scrollHeight};this.clientSize=Z;this.scrollSize=h;this.maxPos={x:Math.max(h.x-Z.x,0),y:Math.max(h.y-Z.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(d,g);var f=this.startTimePos,Y=this.startTouchPos,b=this.maxPos;var X={x:this.scrollsHoriz?Math.max(Math.min(f.x-(a.x-Y.x),b.x),0):0,y:this.scrollsVert?Math.max(Math.min(f.y-(a.y-Y.y),b.y),0):0};this.set("pos",X);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=a;var V=new Date(),j=this.lastDragTime;this.nextLastDragTime=j;this.lastDragTime=V;if((V-j)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:X.x,y:X.y};this.startTouchPos=a;}}},touchesEnd:function I(U,V){D.preventDefault(U,V);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(U,V);if((new Date())-this.lastDragTime<=R){this.startDeceleration(U,V);}else{this.hideScroll();}}},startDeceleration:function B(Z,a){var X=D.getMousePosition(D.firstChangedTouch(Z,a),Z),f=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||X,d={x:X.x-f.x,y:X.y-f.y},U=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),g=U?(new Date())-U:0,W={x:g?Number(d.x*O*F/g).toFixed(2):0,y:g?Number(d.y*O*F/g).toFixed(2):0};var b=this,V=function(e){return(b.scrollsHoriz&&Math.abs(e.x)>=G)||(b.scrollsVert&&Math.abs(e.y)>=G);};if(V(W)){this.velocity=W;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var Y=function(){b.decelerate();if(!V(b.velocity)){b.stopDeceleration();b=null;}};Y();if(this.decelerating){this.decelerationTimer=window.setInterval(Y,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var X=this.pos,W=this.velocity,V=this.friction,a=this.maxPos,Y={x:X.x-W.x,y:X.y-W.y},d=this.bounces,U=this.BOUNCEFRICTION;var b=Y.x;if(b<0||b>a.x){Y.x=(b<0)?0:a.x;W.x*=d?-U:0;V.x=U;}var Z=Y.y;if(Z<0||Z>a.y){Y.y=(Z<0)?0:a.y;W.y*=d?-U:0;V.y=U;}this.set("pos",Y);this.velocity={x:V.x*W.x,y:V.y*W.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var U=this.maxPos;if(this.scrollsVert&&U.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&U.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash");var E=mstrmojo.func.wrapMethods;function B(L,I,K,H,J){return E({success:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("success",I.target,JSON.stringify(I.memo),JSON.stringify(M));}},complete:function(){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("complete",I.target,JSON.stringify(I.memo));}J.removeCallback(K,H);},failure:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("failure",I.target,JSON.stringify(I.memo),JSON.stringify(M));}}},L);}mstrmojo._CanProxyCallback=mstrmojo.provide("mstrmojo._CanProxyCallback",{_mixinName:"mstrmojo._CanProxyCallback",callbacks:null,isCallbackReceiver:false,newCallback:function D(O){return O;var K=this.callbacks,I=mstrmojo.hash.copy(O),P=(O.index!==undefined)?String(O.index):"index",N=arguments.callee.caller.arguments,L,J,M,H=O.method||"anonymous";if(!K){K=this.callbacks={};}if(!K[H]){K[H]={};}if(!this.isCallbackReceiver){for(J=0,M=N.length;J<M;J++){L=N[J];if(L&&L.target){I=B(I,L,H,P,this);break;}}}if(!O.method){I.proxy=this.getCallbackMemo();}K[H][P]=I;return I;},anonymous:function(J,K,I,H){if(!this.isCallbackReceiver){K=B(K,H,"anonymous","index",this);mstrApp.serverRequest(J,K,I);}},getCallback:function C(K,J){var H=J||"index",I=this.callbacks;return I&&I[K]&&I[K][H];},removeCallback:function G(K,J){var H=J||"index",I=this.callbacks;if(I&&I[K]){delete I[K][H];if(mstrmojo.hash.isEmpty(I[K])){delete I[K];}}},getCallbackMemo:function F(I,H){return{target:'mstrmojo.all["'+this.id+'"].receiveCallback',memo:{method:I||"anonymous",index:H||"index"}};},receiveCallback:function A(L,J,K){var M=J.method,I=J.index,H=this.getCallback(M,I);if(H&&L&&H[L]){H[L](K);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresDescs(521,522,523,524,525,526,529,530,534,535,546,547,587,686,687,688,696,746,1101,1102,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,2171,2202,2203,2204,2219,2220,2784,2785,2786,2795,2796,3086,3344,3852,3853,3854,3855,3856,3857,3858,3859,3860,3861,3862,3863,3945,3946,4406,4407,5282,5283,5924,5925,6076,6077,6078,6079,6080,6081,6082,7899,7900,7901,7902,7903,9379,9380,9381,9382,9383,9384,9385,12298,13889,13890,13896,13897);mstrmojo.locales=mstrmojo.provide("mstrmojo.locales",{load:function(C){var A=this;if(this.isLoaded){C();C=null;}else{var B={taskId:"getLocaleInfo"};if(mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){B.sessionState=mstrApp.sessionState;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(D){A.update(D);C();C=null;if(mstrmojo.expr){mstrmojo.expr.onLocaleUpdated();}mstrmojo.locales.isLoaded=true;},failure:function(D){alert(D.getResponseHeader("X-MSTR-TaskFailureMsg"));}},B);}},update:function(A){if(A){mstrmojo.hash.copy(mstrmojo.hash.obj2array(A),this);}},isLoaded:false,datetime:{MONTHNAME_SHORT:[mstrmojo.desc(3852,"Jan"),mstrmojo.desc(3853,"Feb"),mstrmojo.desc(3854,"Mar"),mstrmojo.desc(3855,"Apr"),mstrmojo.desc(3856,"May"),mstrmojo.desc(3857,"Jun"),mstrmojo.desc(3858,"Jul"),mstrmojo.desc(3859,"Aug"),mstrmojo.desc(3860,"Sep"),mstrmojo.desc(3861,"Oct"),mstrmojo.desc(3862,"Nov"),mstrmojo.desc(3863,"Dec")],MONTHNAME_FULL:[mstrmojo.desc(1956,"January"),mstrmojo.desc(1957,"February"),mstrmojo.desc(1958,"March"),mstrmojo.desc(1959,"April"),mstrmojo.desc(1960,"May"),mstrmojo.desc(1961,"June"),mstrmojo.desc(1962,"July"),mstrmojo.desc(1963,"August"),mstrmojo.desc(1964,"September"),mstrmojo.desc(1965,"October"),mstrmojo.desc(1966,"November"),mstrmojo.desc(1967,"December")],dayShortNames:["S","M","T","W","T","F","S"],dayNames:[mstrmojo.desc(9379,"Sunday"),mstrmojo.desc(9380,"Monday"),mstrmojo.desc(9381,"Tuesday"),mstrmojo.desc(9382,"Wednesday"),mstrmojo.desc(9383,"Thursday"),mstrmojo.desc(9384,"Friday"),mstrmojo.desc(9385,"Saturday")],DATEINPUTFORMATS:["M/d/yy","M/d/yyyy","MMM d, yy"],TIMEINPUTFORMATS:["h:mm a","H:mm","h:mm:ss a","H:mm:ss","h:mm:ss a z"],DATEOUTPUTFORMAT:"M/d/yyyy",TIMEOUTPUTFORMAT:"h:mm:ss a",DATEDISPLAYFORMAT:"M/d/yy",TIMEDISPLAYFORMAT:"h:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:mstrmojo.desc(3945,"Include")},{did:"2",n:mstrmojo.desc(3946,"Exclude")}],BranchQual:[{did:"19",n:mstrmojo.desc(5282,"AND")},{did:"20",n:mstrmojo.desc(5283,"OR")},{did:"21",n:mstrmojo.desc(12298,"NOT")},{did:"19_21",n:mstrmojo.desc(5924,"AND NOT")},{did:"20_21",n:mstrmojo.desc(5925,"OR NOT")}],RootOperator:[{did:"19",n:mstrmojo.desc(534,"All selections")},{did:"20",n:mstrmojo.desc(535,"Any selection")}],ExprType:[{did:"2",n:mstrmojo.desc(546,"Qualify")},{did:"5",n:mstrmojo.desc(547,"Select")}],DimtyLevels:[{did:"1",n:mstrmojo.desc(2171,"Default")},{did:"2",n:mstrmojo.desc(3086,"Metric")},{did:"3",n:mstrmojo.desc(3344,"Report")}],Attribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,76",n:mstrmojo.desc(686,"Contains"),t:1,tp:1},{did:"1,79",n:mstrmojo.desc(2784,"Does not contain"),t:1,tp:1},{did:"1,77",n:mstrmojo.desc(687,"Begins with"),t:1,tp:1},{did:"1,80",n:mstrmojo.desc(2785,"Does not begin with"),t:1,tp:1},{did:"1,78",n:mstrmojo.desc(688,"Ends with"),t:1,tp:1},{did:"1,81",n:mstrmojo.desc(2786,"Does not end with"),t:1,tp:1},{did:"1,18",n:mstrmojo.desc(525,"Like"),t:1,tp:1},{did:"1,43",n:mstrmojo.desc(526,"Not Like"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],Metric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"2,1",n:mstrmojo.desc(529,"Highest"),t:2,tp:2},{did:"2,2",n:mstrmojo.desc(530,"Lowest"),t:2,tp:2},{did:"3,1",n:mstrmojo.desc(4407,"Highest %"),t:3,tp:3},{did:"3,2",n:mstrmojo.desc(4406,"Lowest %"),t:3,tp:3}],MetricRP:[{did:"2,13",n:mstrmojo.desc(13897,"Rank between highest"),t:2,tp:2},{did:"2,4",n:mstrmojo.desc(1101,"Exclude highest"),t:2,tp:2},{did:"2,3",n:mstrmojo.desc(13896,"Rank between lowest"),t:2,tp:2},{did:"2,5",n:mstrmojo.desc(1102,"Exclude lowest"),t:2,tp:2},{did:"3,13",n:mstrmojo.desc(13890,"Between highest")+"%",t:3,tp:3},{did:"3,4",n:mstrmojo.desc(1101,"Exclude highest")+"%",t:3,tp:3},{did:"3,3",n:mstrmojo.desc(13889,"Between lowest")+"%",t:3,tp:3},{did:"3,5",n:mstrmojo.desc(1102,"Exclude lowest")+"%",t:3,tp:3}],MDXAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],MDXMetric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],SAPAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],Element:[{did:"1,22",n:mstrmojo.desc(2219,"In List"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2220,"Not In List"),t:1,tp:1}]},validation:{requiredFieldError:mstrmojo.desc(6078,"This field is required."),invalidCharError:mstrmojo.desc(7899,"This field contains invalid characters for #."),invalidDateStringError:mstrmojo.desc(7900,"This field contains invalid date/time string."),invalidNumericFormatError:mstrmojo.desc(7901,"This field contains numeric value with incorrect format."),outofRangeError:mstrmojo.desc(6079,"This field should be # between ## and ###."),noLessMinError:mstrmojo.desc(6081,"This field should be # greater than or equal to ##."),noGreaterMaxError:mstrmojo.desc(6080,"This field should be # less than or equal to ###."),failRegexTestError:mstrmojo.desc(6082,"This field failed regular expression validation."),invalidValueInListError:mstrmojo.desc(7902,"One of the value (#) in this list is not valid."),integerDataType:mstrmojo.desc(6076,"an Integer value"),numericDataType:mstrmojo.desc(6077,"a Number value"),dateDataType:mstrmojo.desc(7903,"a Date/Time value")},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"#F00E0E",v:"#F00E0E"},{n:"#080000",v:"#080000"},{n:"#E81A1A",v:"#E81A1A"},{n:"#6E0909",v:"#6E0909"},{n:"#4F2828",v:"#4F2828"},{n:"#141212",v:"#141212"},{n:"#D60202",v:"#D60202"},{n:"#C40404",v:"#C40404"}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");mstrmojo.vi.ui.rw.SelectionType={EMPTY:"empty",ATTS:"att",METRICS:"metric",COL_HEADERS:"col-headers",ROW_HEADERS:"row-headers",METRIC_VALUES:"metric-values"};var A=function(AE){var AC=(mstrApp&&mstrApp.docModelData&&mstrApp.docModelData.mid)||"",AD=AE.k||AE.key;return AD+"-"+AC;},F={},s={},R=mstrmojo.hash,X=mstrmojo.array,L=function(AE){var AC=R.keyarray(AE).sort(),AD=[],AF;X.forEach(AC,function(AG){AF=[];X.forEach(AE[AG],function(AH){AF.push(this.model.getNormalizedFormElementId(AH.id));},this);AD.push(AG+"-"+AF.sort().join("@"));},this);return AD.join("#");},K=function(AC){var AD=L.call(this,AC);if(!this._viSelections[AD]){this._viSelections[AD]=AC;if(mstrApp&&mstrApp.isInVFConfigMode){return ;}F[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}},AB=function(AC){var AD=L.call(this,AC);if(!this._viContextMenuSelections[AD]){this._viContextMenuSelections[AD]=AC;}},p=function(AD){var AE=L.call(this,AD),AC=this._viSelections[AE];if(AC){delete this._viSelections[AE];if(mstrApp&&mstrApp.isInVFConfigMode){return ;}F[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}return AC;},d=function(AD){var AE=L.call(this,AD),AC=this._viContextMenuSelections[AE];if(AC){delete this._viContextMenuSelections[AE];}return AC;},k=function(){var AC=A(this);s=s||{};if(F[AC]){s[AC]=R.clone(F[AC]);}},AA=function(AF,AE,AJ,AG,AC,AI,AD){var AH={};AH[AF]=[{id:AE,n:AJ,fm:AD,ui:AG,o:AC,axis:AI}];return AH;},G=mstrmojo.vi.ui.rw.SelectionType;mstrmojo.vi.ui.rw._HasVisSelections=mstrmojo.provide("mstrmojo.vi.ui.rw._HasVisSelections",{_mixinName:"mstrmojo.vi.ui.rw._HasVisSelections",init:function(AC){if(this._super){this._super(AC);}this._viSelections={};},update:function b(AD){var AC=true;if(this._super){AC=this._super(AD);}if(!mstrApp.isInVFConfigMode){R.copy(F[A(this)],this);}if(!this.updateForInteractiveMode){k.call(this);}return AC;},onSelectionChange:function J(AC){if(this._super){this._super(AC);}},_viSelections:{},_viContextMenuSelections:{},_selectionType:G.EMPTY,_contextMenuSelectionType:G.EMPTY,_cellSelections:[],getSelectionType:function(){return this._selectionType;},getContextMenuSelectionType:function(){return this._contextMenuSelectionType;},isSingleAttrSelection:function(){var AD=null,AC;if(this.getSelectionType()===G.ATTS){AC=this.getSelections();if(AC.length>1){return !AC.some(function(AE){if(!AD){AD=AE[0].tid;return false;}return AD!=AE[0].tid;},this);}return true;}return false;},isSingleContextMenuAttrSelection:function(){var AD=null,AC;if(this.getContextMenuSelectionType()===G.ATTS){AC=this.getContextMenuSelections();if(AC.length>1){return !AC.some(function(AE){if(!AD){AD=AE[0].tid;return false;}return AD!=AE[0].tid;},this);}return true;}return false;},isSingleSelection:function(){return(this._viSelections&&R.keyarray(this._viSelections).length===1);},isSingleContextMenuSelection:function(){return(this._viContextMenuSelections&&R.keyarray(this._viContextMenuSelections).length===1);},getSelectionSize:function t(){return(this._viSelections&&R.keyarray(this._viSelections).length)||0;},getCxtMnuSelectionSize:function C(){return(this._viContextMenuSelections&&R.keyarray(this._viContextMenuSelections).length)||0;},getSelectionHash:function Q(){return this._viSelections;},getContextMenuSelectionHash:function j(){return this._viContextMenuSelections;},getSelectionCache:function B(){return F[A(this)];},setSelectionCache:function V(AC){F[A(this)]=AC;},getPrevSelectionInfo:function I(){return s[A(this)];},getSelections:function o(){var AC=[],AD;R.forEach(this.getSelectionHash(),function(AE){AD=[];AC.push(AD);R.forEach(AE,function(AF,AG){X.forEach(AF,function(AH){AD.push({tid:AG,eid:AH.id,v:AH.n,level:AH.level});});});});return AC;},getContextMenuSelections:function a(){var AC=[],AD;R.forEach(this.getContextMenuSelectionHash(),function(AE){AD=[];AC.push(AD);R.forEach(AE,function(AF,AG){X.forEach(AF,function(AH){AD.push({tid:AG,eid:AH.id,fm:AH.fm,v:AH.n,axis:AH.axis,o:AH.o,ui:AH.ui});});});});return AC;},isMetricValueSelected:function w(AC){return !!this._viSelections[L.call(this,AC)];},isAttSelected:function S(AD,AC){return this.isMetricValueSelected(AA(AD,AC));},addAttributeSelection:function g(AD,AC,AE){if(this._selectionType!==G.ATTS){this.clearSelections();this._selectionType=G.ATTS;}var AF=AA.call(this,AD,AC,AE);K.call(this,AF);return AF[AD];},addContextMenuAttributeSelection:function e(AF,AE,AI,AG,AC,AH,AD){if(this._contextMenuSelectionType!==G.ATTS){this.clearCxtMnuSelection();this._contextMenuSelectionType=G.ATTS;}var AJ=AA.call(this,AF,AE,AI,AG,AC,AH,AD);AB.call(this,AJ);return AJ[AF];},removeAttributeSelection:function H(AD,AC){return p.call(this,AA.call(this,AD,AC));},removeContextMenuAttributeSelection:function U(AD,AC){return d.call(this,AA.call(this,AD,AC));},addMetricValueSelection:function l(AC){if(this._selectionType!==G.METRICS){this.clearSelections();this._selectionType=G.METRICS;}K.call(this,AC);},addContextMenuMetricValueSelection:function l(AC){if(this._contextMenuSelectionType!==G.METRICS){this.clearCxtMnuSelection();this._contextMenuSelectionType=G.METRICS;}AB.call(this,AC);},addAttrOrMetricCellSelection:function x(AE,AD,AC){this._cellSelections.push({parentElementIds:AE,target:{selectionType:AC?G.ATTS:G.METRICS,id:AD}});},getCellSelections:function h(){var AC=this;AC.clearCellSelections();var AD=function(AF,AE){var AG=[];if(AF){while(AE.hasOwnProperty("_p")){AG.push(AE._p._e.id);AE=AE._p;}}else{var AH=AC.model.getCellDataUnion(AE);X.forEach(AH,function(AI){AG.push(AI.eid);});}return AG;};X.forEach(AC.highlights,function(AI){var AE=AC.getCellForNode(AI),AJ=!AE.hasOwnProperty("mix")&&AE._e&&!AE.fi,AH=AD(AJ,AE);if(AJ){var AF=AE._e.id;AC.addAttrOrMetricCellSelection(AH,AF,true);}else{var AG=AE._tp._e.oid;AC.addAttrOrMetricCellSelection(AH,AG,false);}});return this._cellSelections;},removeMetricValueSelection:function M(AC){return p.call(this,AC);},removeContextMenuMetricValueSelection:function N(AC){return d.call(this,AC);},clearSelections:function Z(){if(this._super){this._super();}this._viContextMenuSelections={};this._contextMenuSelectionType=G.EMPTY;this._viSelections={};this._selectionType=G.EMPTY;if(typeof this.clearSelectedGraphicInfo==="function"){this.clearSelectedGraphicInfo();}},clearCxtMnuSelection:function u(){if(this._super){this._super();}this._viContextMenuSelections={};this._contextMenuSelectionType=G.EMPTY;},clearCellSelections:function O(){this._cellSelections=[];},clearSelectionsCache:function P(){F={};},clearUnitSelections:function Z(AD){if(this._super){this._super();}var AC={};R.forEach(this._viSelections,function(AF,AE){if(R.keyarray(AF)[0]!==AD){AC[AE]=AF;}});this._viSelections=AC;},clearAllSelectionsAndHighlight:function f(){this.clearSelections(true);this.endSelections();},endSelections:function E(){if(mstrApp&&mstrApp.isInVFConfigMode){return ;}F[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};this.raiseGraphicsSelectedEvent(this);if(this.isInFilterPanel()&&mstrApp&&mstrApp.isDossier){this.raiseGraphicsSelectionChangeEvent();return ;}this.onSelectionChange(this.getSelectionHash());},isInFilterPanel:function D(){var AC=this.node&&this.node.defn;return AC.iifp;},addSelectionsFromExpression:function z(AE){this.clearSelections();this._selectionType=AE.type;var AC=this,AD=function(AK){var AL=20,AI=19,AJ=function(AM){return AM.nds.length===1?AL:AM.fn;},AH=function(AM){return parseInt(AM.et,10)===5||parseInt(AJ(AM),10)===AI;},AF=function(AM){X.forEach(AM.es,function(AN){AC.addAttributeSelection(AM.a.did,AN.v,AN.n);});},AG=function(AO){var AN={},AM=function(AP){X.forEach(AP.es,function(AQ){R.copy(AA.call(AC,AP.a.did,AQ.v,AQ.n),AN);});};if(AO.nds){X.forEach(AO.nds,AM);}else{if(AO.es){AM(AO);}}AC.addMetricValueSelection(AN);};if(AH(AK)){AK={nds:[AK]};}X.forEach(AK.nds,function(AM){if(AH(AM)){if(AE.type===G.ATTS){AF(AM);}else{AG(AM);}}else{AD(AM);}});};AD(AE.data);},raiseGraphicsSelectedEvent:function q(){if(window.mstrApp&&window.mstrApp.isEmbedded){var AI=this,AH=AI.model,AG=AH&&AH.data,AE=AG&&AG.k,AC=AG&&AG.gts,AM=AC&&AC.row,AF=AC&&AC.col,AJ=X.ensureArray(AM).concat(AF||[]),AD=function(AO){var AN;X.forEach(AJ,function(AP){if(AP&&AP.id===AO){AN=AP.n;return false;}});return AN;},AK=[],AL=this.getSelectionHash();R.forEach(AL,function(AO){var AN=[];R.forEach(AO,function(AR,AQ){var AP=AD(AQ);X.forEach(AR,function(AS){AN.push({n:AP,nid:AQ,v:AS.n,vid:AS.id});});});AK.push(AN);});mstrApp.raiseEvent({name:"graphicsSelected",value:{graphics:AK,vizKey:AE}});}},raiseGraphicsSelectionChangeEvent:function Y(){if(mstrApp&&(typeof mstrApp.raiseEvent==="function")){mstrApp.raiseEvent({name:"graphicsSelectionChange",value:{selections:F[A(this)],vizKey:this.k}});}}});mstrmojo.vi.ui.rw._HasVisSelections.VisSelectionType=null;mstrmojo.vi.ui.rw._HasVisSelections.clearAllSelectionsCache=function W(){F={};s={};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";ELEM_HIDDEN_PROP="hid";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(R,Q,V){var P,O;for(O in R){P=R[O];if(P.v){var S=P.v.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f");var U=S.split(";");if(U&&U.length>1){U[1]=Q;if(V&&U.length>2){U.pop();}P.v=U.join(";").replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");}}}return R;},buildElemsCountStr:function K(U,Q,P){U=(!U||!U.length)?[]:U;Q=(!Q||!Q.length)?[]:Q;function S(V){return V.filter(function(W){return !W[ELEM_HIDDEN_PROP];});}var R=S(U).length,O=S(Q).length;if(I.find(Q,"v",D)>-1){O-=1;}if(I.find(Q,"v",C)>-1){O-=1;}if(P){R=(R<O)?O-R:0;}if(I.find(U,"v",D)>-1||I.indexOf(U,D)>-1){R=O;}return this.buildElemsCountStrByNum(R,O);},buildElemsCountStrByNum:function K(P,O){if(P===O){if(O===0){return"";}return O.toString();}else{if(O===0){return P+" "+mstrmojo.desc(514);}else{if(P>O){return"("+O+")";}}}return mstrmojo.desc(4891,"").replace("##",String(P)).replace("###",String(O));},browseElements:function G(Q,R,P){var O={doNotHold:!(P&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(P,R),Q,O);},getIdPresentation:function J(R){if(!!R){var Q=R.charAt(0),O,P,S;if((Q>="g"&&Q<="w")||(Q>="V"&&Q<="Z")){P=false;for(S=1;S<R.length;++S){if(P){P=false;}else{switch(R.charAt(S)){case";":return"terseLong";case"\\":P=true;break;}}}return"terse";}if(Q>="B"&&Q<="Q"){if(R.length>2){O=R.charAt(1);if(O>="A"&&O<="Q"){if(R.charAt(2)===":"){return"oldLong";}}}}if(R.length>=33&&R.charAt(32)===":"){return"old";}}return null;},terseLong2OldShort:function N(P){if(this.getIdPresentation(P)!=="terseLong"){return P;}var O=P.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f"),Q=O.substring(1,O.length).split(";");return(Q[1]+":"+Q[0]).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");},oldShort2terseLong:function L(P,S){if(this.getIdPresentation(P)!=="old"){return P;}var O=P.replace(/\\\\/g,"\u001e").replace(/\\\:/g,"\u001f"),R=O.split(":"),Q=R.shift();return(S||"h")+(R.join(":")+";"+Q).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\:");},isNullElem:function H(O){if(!O){return true;}var R=this.getIdPresentation(O),P=false,Q;switch(R){case"terse":case"terseLong":Q=O.substring(1,O.length).split(";");P=Q[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":P=O.indexOf(this.OLD_NULL)>-1;break;}return P;},isNonGroupNull:function(Q){var O=Q.eid||(Q._e&&Q._e.id),P=O&&O.split(":")[0];return P&&P===this.NON_GROUP_NULL;},getAttributeId:function M(Q){var P,O;if(Q){O=Q.split(";");P=O[1];}return P;},getElementValue:function A(P){var Q,O;if(P){O=P.split(";");if(O.length>2){Q=O[0]+" "+O[2];}else{Q=O[0];}}return Q;},isAttributeIdsLinked:function E(P,O,Q){var S=false,R=B.keyarray(Q);I.forEach(R,function(U){if(U===P){I.forEach(Q[U],function(V){if(V===O){S=true;return false;}});}if(S){return false;}});return S;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000",ELEM_ALL:{t:mstrmojo.chart.model.enums.EnumDSSObjectType.DssTypeDimension,v:"u;",n:"(All)"}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,M=mstrmojo.hash;function J(V){if(V!==null){return(V.constructor!==Array)?[V]:V;}return null;}function F(g,e,Z){if(!e){return null;}var h=[],W=g.selectedIndices,V=g.allIdx,b=g.noneIdx;if(g.multiSelect&&(b>-1)&&(I.indexOf(e,b)>-1)){return h;}var Y,a,f=g.items,d=g.itemIdField,X=g.selectedItems,k;if(g.multiSelect&&(V>-1)&&(I.indexOf(e,g.allIdx)>-1)){for(Y=0,a=f.length;Y<a;Y++){if(!W[Y]){h.push(Y);W[Y]=true;g.selectedIndex=Y;g.selectedItem=f[Y];}}}else{for(Y=0,a=e.length;Y<a;Y++){var j=e[Y];if(!W[j]){W[j]=true;if(Z){h.push({idx:j,positions:Z});}else{h.push(j);}g.selectedIndex=j;k=g.selectedItem=f[j];if(X){X[k[d]]=k;}}}}return h;}function D(Y,V){var X=[],Z=Y.selectedIndices,a=Y.selectedItems,W;for(W in Z){delete Z[W];if(V){X.push({idx:parseInt(W,10),positions:V});}else{X.push(parseInt(W,10));}}Y.selectedIndex=-1;Y.selectedItem=null;if(a){Y.selectedItems={};}return X;}function U(g,f,Z){if(!f){return null;}var b=[],W=g.selectedIndices,j=I.indexOf,V=g.allIdx,d=g.noneIdx,e=g.itemIdField,X=g.selectedItems;if(g.multiSelect&&(((V>-1)&&(j(f,V)>-1))||((d>-1)&&(j(f,d)>-1)))){return D(g);}if(f.length>0&&W[V]){if(j(f,V)<0){f.push(V);}}var a=f.length,Y;for(Y=0;Y<a;Y++){var h=f[Y];if(W[h]){delete W[h];if(Z){b.push({idx:h,positions:Z});}else{b.push(h);}if(X){delete X[g.items[h][e]];}if(g.selectedIndex===h){g.selectedIndex=-1;g.selectedItem=null;}}}return b;}function C(Y,Z,W,V){if(V){return ;}if(this.raiseEvent){if((Y&&Y.length)||(Z&&Z.length)){try{this.raiseEvent({name:"selectionChange",added:Y,removed:Z});}catch(X){U(this,Y);F(this,Z);throw X;}}}}function B(W){var X=this.itemIdField,V=this.items;if(typeof W==="object"&&X){return I.find(V,X,W[X]);}return I.indexOf(V,W);}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,noneIdx:-1,itemIdField:"",items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(V){this._super(V);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function K(f){f=J(f);if(!f){return ;}var b=this.items,V=this.items.length,X=this.selectedItems,Z=[],W;b=this.items=b.concat(f);W=b.length;if(X){var a=this.itemIdField,Y,e;for(Y=V;Y<b.length;Y++){e=b[Y];if(X[e[a]]){Z.push(Y);}}}if(Z&&Z.length){F(this,Z);}if(W>V){var d=this.itemsContainerNode;if(d){d.innerHTML+=this._buildItemsMarkup(V,W-1).join("");}}},addSelectedItems:function S(V){this.selectItems(V,false);},setSelectedItems:function L(V){this.selectItems(V,true);},selectItems:function R(e,g){e=J(e);if(!e){return ;}if(g&&this.selectedItems){this.selectedItems={};}var X=this.selectedItems,b=this.itemIdField,V=[],Z=this.items.length,a=[],W=this.allowUnlistedValues,f,d,Y;for(Y=0;Y<e.length;Y++){f=e[Y];d=B.call(this,f);if(d<0){if(X===null){if(W){V.push(f);d=Z++;a.push(d);}}else{X[f[b]]=f;}}else{a.push(d);}}if(V.length>0){this.addItems(V);}if(a.length>0){if(g){this.select(a);}else{this.addSelect(a);}}},unselectItems:function A(W){W=J(W);if(!W){return ;}var b=this.selectedItems,X=[],a=this.itemIdField,Z,V,Y;if(b===null){return ;}for(Y=0;Y<W.length;Y++){Z=W[Y];if(b){delete b[Z[a]];}V=B.call(this,Z);if(V<0){X.push(V);}}if(X.length>0){this.removeSelect(X);}},getSelectedItems:function G(){if(this.selectedItems){return M.valarray(this.selectedItems);}return I.get(this.items,M.keyarray(this.selectedIndices,true));},singleSelect:function(W,X,V){if(W!==-1){this.select([W],X,V);}},singleSelectByField:function O(W,X,V){this.singleSelect(I.find(this.items,X,W),V);},toggleSelect:function Q(V){var X,W;if(this.selectedIndices[V]){W=U(this,[V]);}else{X=F(this,[V]);}C.call(this,X,W,[V]);},select:function(X,W,V){X=J(X);if(!X){return ;}var Z=D(this,V),b=F(this,X,V),Y;if(this.selectionPolicy!=="reselect"){for(Y=Z.length-1;Y>=0;Y--){var a=I.indexOf(b,Z[Y]);if(a>-1){Z.splice(Y,1);b.splice(a,1);}}}C.call(this,b,Z,X,W);},rangeSelect:function H(W,V){var b=this.selectedIndex,Z=b,a=this.allIdx,X=[],Y;if(W===a||this.selectedIndices[a]){X.push(a);}else{if(Z===-1&&this.selectedIndices){for(Y in this.selectedIndices){Z=parseInt(Y,10);break;}}Z=Z===-1?0:Z;if(Z>W){Z=W;W=b;}for(Y=Z;Y<=W;Y++){X.push(Y);}}this.select(X,V);this.selectedIndex=b;},clearSelect:function(V){C.call(this,null,D(this),[],V);if(!V){this.raiseEvent({name:"clearSelection"});if(this.parent){this.parent.raiseEvent({name:"clearSelection"});}}},addSelect:function(Y,V,W){Y=J(Y);if(!Y){return ;}var X=F(this,Y,W),a=null,Z=this.noneIdx;if(this.multiSelect&&(Z>-1&&I.indexOf(Y,Z)>-1)){a=U(this,Y);}C.call(this,X,a,Y,V);},removeSelect:function(X,V,W){X=J(X);if(!X){return ;}C.call(this,null,U(this,X,W),X,V);},_set_selectedIndices:function P(X,e,V){if(this.selectedItems){this.selectedItems={};}var W=this.selectedIndices;if(W===e){return false;}if(!W){W={};this.selectedIndices=W;}if(!e){e={};}var b=this.selectedIndex,a=[],d;for(d in W){if(!e[d]){d=parseInt(d,10);delete W[d];a.push(d);if(b===d){this.selectedIndex=-1;this.selectedItem=null;}}}var h=[],f=this.items,Z=this.itemIdField,g;for(d in e){if(!W[d]){d=parseInt(d,10);W[d]=true;h.push(d);this.selectedIndex=d;g=this.selectedItem=f[d];if(this.selectedItems){this.selectedItems[g[Z]]=g;}}}if(V!==true){var Y=[];for(d in e){if(W[d]){d=parseInt(d,10);Y.push(d);}}C.call(this,h,a,Y);}return(h.length||a.length);},_set_selectedIndex:function N(Y,W,V){var X={};if(W>-1){X[W]=true;}return this._set_selectedIndices("selectedIndices",X,V);},_set_selectedItem:function E(Y,X,W){var V=B.call(this,X);if((V<0)&&(X!==null&&X!==undefined)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(X));V=this.items.length-1;}return this._set_selectedIndex("selectedIndex",V,W);},_addSelections:function(V){return F(this,V);},_removeAll:function(){return D(this);}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash,A=null;function B(D){return mstrmojo.DICFactory.createDIC(C.copy({dic:this.dic,owner:this.owner,group:this},D));}mstrmojo.DICFactory=mstrmojo.provide("mstrmojo.DICFactory",{createDIC:function(G){var E=G.dic,F=mstrmojo.DICConfig.getDICClass(E),D;if(F){if(G.k===undefined){G.k=G.opener&&G.opener.id;}G.showByDefault=mstrmojo.DICConfig.showDICByDefault(G.dic,G.openerType);G.hasPreview=mstrmojo.DICConfig.hasDICPreview(G.dic,G.openerType);G.canSlice=mstrmojo.DICConfig.canSlice(G.dic,G.openerType);D=new F(G);}return D;},createDICPopup:function(D,E){return mstrmojo.DICPopup.getInstance(D,E);},createDICGroup:function(F){var I=C.copy(F,{scriptClass:"mstrmojo.Widget",widgetsMap:{},dic:null,owner:null,groupMembers:{},postCreate:function(){var L=this.dic,K=this.openerType,J=mstrmojo.DICConfig;this.showByDefault=J.showDICByDefault(L,K);this.hasPreview=J.hasDICPreview(L,K);},addDIC:function D(J,K){this.groupMembers[J]=K;},showPopupDIC:function H(K){if(!this.showByDefault){var J=this.widgetsMap[K],L=this.groupMembers[K];if(!L){return ;}if(!J){J=this.widgetsMap[K]=B.call(this,L);}J.showInPopup();}},render:function G(){if(this.showByDefault||this.hasPreview){var L=this.groupMembers,K=this,J;C.forEach(L,function(N,M){if(!N.hasRendered){K.widgetsMap[M]=J=B.call(K,N);if(K.showByDefault){J.render();}else{if(K.hasPreview&&J.enabled){J.renderPreview();}}N.hasRendered=true;}});}},destroy:function E(){C.forEach(this.widgetsMap,function(J){J.destroy();});this.widgetsMap={};}});return mstrmojo.insert(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var C=mstrmojo.hash,E=mstrmojo.array;function D(F){return function(G){F[G]=true;};}mstrmojo.rw.model.UpdateKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.UpdateKeysConfig",init:function B(){this.nodes=[];this.selectors={};this.objects={};}});mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig=function A(J){var F={},K={},G={},I={};E.forEach(J,function H(M){var L=M.partialUpdate;if(L){E.forEach(L.nodes,D(K));E.forEach(L.selectors,D(G));E.forEach(L.objects,function(N){if(!I[N.id]||N.flag>I[N.id].flag){I[N.id]=N;}});delete M.partialUpdate;}E.forEach(M.actions,H);});if(!C.isEmpty(K)){F.nodes=C.keyarray(K);}if(!C.isEmpty(G)){F.selectors=C.keyarray(G);}if(!C.isEmpty(I)){F.objects=C.valarray(I);}return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array;function A(E){var D=(E&&E.gts&&E.gts.col)||[],G=(E&&E.gts&&E.gts.row)||[];var F=C.filter(D.concat(G),function(H){return H.otp===-1;})[0];return{tpltProp:E.prop,mxProp:C.map((F&&F.es)||[],function(H){var I={};I[H.oid]=mstrmojo.hash.copy(H.prop,{n:H.n,t:H.otp});return I;})};}mstrmojo._IsDocumentTemplate=mstrmojo.provide("mstrmojo._IsDocumentTemplate",{_mixinName:"mstrmojo._IsDocumentTemplate",gridInfo:null,tmsProps:null,update:function B(D){if(D&&D.data){this.gridInfo=D.data.gsi;this.tmsProps=A(D.data);}if(this._super){return this._super(D);}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Header");mstrmojo.models.template.Headers=mstrmojo.declare(null,null,{init:function D(K){var O=this.isRow=K.isRow,J=this.data=K.data,L=J.gts,G=J.ghs,F=this.hs=O?G.rhs:G.chs,M=this.i=K.i,N=0,I;this.titles=O?L.row:L.col;this.headers=F.items&&F.items[M]&&F.items[M].items;this.missingTitles=this.titles&&this.headers?(this.headers.length-this.titles.length):0;if(O&&this.headers){N=this.titles.length-this.headers.length;if(N){for(I=M-1;I>=0;I--){var E=F.items[I].items,H=E.length-this.headers.length;if(H>0){this.headers=E.slice(0,H).concat(this.headers);if(this.titles.length===this.headers.length){break;}}}}}},size:function B(){var E=this.headers;return(!E?0:E.length);},getHeader:function C(H){var F=this.headers,G=F&&F[H],E=H;if(G&&this.missingTitles){E=isNaN(G.tui)?G.ui:G.tui;}return G&&new mstrmojo.models.template.Header({h:G,t:this.titles[this.isRow?E:this.i]});},getCSS:function A(F){var E=this.headers;return E&&this.data.css[E[F].cni].n;},getHeaderCell:function(F){var E=this.headers;return E&&E[F];}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.EnumReadystate");var C=mstrmojo.EnumReadystate;function E(G){return(G.getKey&&G.getKey())||G.k;}mstrmojo._IsDocController={_mixinName:"mstrmojo._IsDocController",_getXtabCallback:function(L,H){var G={},J=G[E(L)]=L.defn,K=this,I=K.model;return I.newCallback({submission:function(){if(J.set){J.set("readyState",C.WAITING);}},success:function(N){var M=N.pukeys,O=M&&M.split("\u001E");if(M){G=I.getUnitDefinitions(M);}I.partialUpdate(N.data,G,H===false?undefined:N.defn,O,N.puFilters);},failure:function(M){if(!(mstrApp.isSingleTier&&M.code===403)){mstrmojo.alert(M.code+": "+M.message);}},complete:function(){if(J.set){J.set("readyState",C.IDLE);}K.docRequestComplete();}});},_addNodeKeyToAction:function(G,H){H.nodeKey=E(G);return H;},onGridSelector:function(H,K){var G=this.model,J=[].concat(G.getTargetInfoWin(K.ifw)).concat(G.getTargetInfoWin(K.tks));K.sid=H.sid;if(H.isInFilterPanel&&H.isInFilterPanel()&&H.filterCtrl){H.filterCtrl.cacheUpdateAction(K);}else{G.slice(K);}if(J&&J.length){var I;for(I=0;I<J.length;I++){G.showInfoWin(J[I],K.anchor,"h",true,null,K.sid);}}},onVisSelector:function(H,J){if(J.anchor){var G=this.model,I=G.getTargetInfoWin(J.tks);if(I&&I.length){G.showInfoWin(I[0],J.anchor,"h",true);}}if(H.xtabModel&&H.xtabModel.docModel&&H.xtabModel.docModel.slice){H.xtabModel.docModel.slice(J);}},isInRequest:function D(){var G=!!this._inProcess;if(!G){this._inProcess=true;}return G;},docRequestComplete:function F(){this._inProcess=false;},nudgeWidget:mstrmojo.emptyFn,getGroupByElements:function B(I){var M=[],L;while(I){L=I.node&&I.node.data&&I.node.data.pbes;if(L){break;}I=I.parent;}if(L){var J=this.model.data.elems;var H=L.length,K;for(K=0;K<H;K++){var G=L[K];M.push(isNaN(G)?G:J&&J[G]);}}return M;},setData:function A(H,J){var G=this.view,I=J;if(J&&G&&G.unloadLayouts){G.unloadLayouts(null,false);I=false;}this.model.loadLayout(H,I);if(this.hasPageBy&&this.hasPageBy()){this.getPageByTree(true);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.EnumReadystate");var D=mstrmojo.EnumReadystate;var A=1200;var C=function(F,E){if(E){E.style.display=F?"block":"none";}};mstrmojo._HasWaitIcon={waitHandle:null,postBuildRendering:function B(){if(!this._rsl){var E=this.id;this._rsl=this.defn.attachEventListener("readyStateChange",E,function(G){if(!this.hasRendered){return ;}switch(G.value){case D.WAITING:if(!this.waitIcon&&this.domNode){var H=document.createElement("div");H.className="mojo-overlay-wait";H.innerHTML='<div class="overlay"></div><div class="icon"></div>';this.domNode.appendChild(H);this.addSlots({waitIcon:H});}var F=this.waitIcon;if(A){this.waitHandle=window.setTimeout(function(){if(mstrmojo.all[E]){mstrmojo.all[E].waitHandle=null;}C(true,F);},A);}else{C(true,F);}break;case D.IDLE:if(this.waitHandle){window.clearTimeout(this.waitHandle);this.waitHandle=null;}C(false,this.waitIcon);break;}});}return this._super();}};}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui._CanBeFullScreen");function L(N,M){return function(O){return M?parseInt(O[N],10):O[N];};}mstrmojo.android.ui.ActionBarNative=mstrmojo.declare(null,[mstrmojo.android.ui._CanBeFullScreen],{scriptClass:"mstrmojo.android.ui.ActionBarNative",isActive:false,reset:mstrmojo.emptyFn,setUpStatus:function J(M){if(this.isActive!==M){mstrMobileApp.setUpStatus(M);this.isActive=M;}},setNavigation:function E(N,M){mstrMobileApp.setNavigation(N.map(L("n")),N.map(L("act",parseInt)),N.map(L("fromNav")),M);},clearNavigation:mstrmojo.emptyFn,restoreNavigation:function G(){mstrMobileApp.restoreNavigation();},selectNavigationItem:function H(N){var M=N.act;if(M){mstrMobileApp.selectNavigationItem(M);}},getNavList:mstrmojo.emptyFn,hasNavigationItems:function B(){return mstrMobileApp.hasNavigationItems();},setLastOpened:function D(M){mstrMobileApp.setLastOpened(M.map(L("renderIdxArr",parseInt)),M.map(L("did")),M.map(L("n")),M.map(L("projectID")),M.map(L("st",parseInt)),M.map(L("ttl")),M.map(L("xId")),M.map(L("hsc")));},updateTitle:function I(M){mstrMobileApp.setTitle(M);},updateToolbar:function K(N,M){mstrMobileApp.setSysMenu(N,M.groups,M.labels,M.actions,M.checked,M.icons,M.types);},setActionToolbarStatus:function C(M){mstrMobileApp.setActionToolbarStatus(M);},enterFullScreen:function A(){this._super();mstrMobileApp.enterFullScreen();},exitFullScreen:function F(){this._super();mstrMobileApp.exitFullScreen();},onEnterFullScreen:mstrmojo.emptyFn,onExitFullScreen:mstrmojo.emptyFn,propogateMenuVisibleChange:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.android.EnumMenuOptions");var C=mstrmojo.android.EnumMenuOptions,D=C.TRANSACTIONS_QUEUE;function B(){return mstrApp.getTransactionNotificationController();}function A(){return(!this.hsc&&(this.st===14081));}mstrmojo.android.controllers._SupportsQueuedTransactions=mstrmojo.provide("mstrmojo.android.controllers._SupportsQueuedTransactions",{_mixinName:"mstrmojo.android.controllers._SupportsQueuedTransactions",getTxnToolbarButton:function F(G){var H=B();if(H&&H.hasTransactionQueue((A.call(this))?this.did:null)){G.addToolbarBtn(D,mstrmojo.desc(9262,"Transactions Queue"),D,true,18);}return G;},handleMenuItem:function E(I,G){if(I===D){var H,J;if(A.call(this)){H=this.did;J=this.ttl;}B().showNotificationBoard(this,H,J);}else{this._super(I,G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Title");mstrmojo.models.template.Titles=mstrmojo.declare(null,null,{init:function D(G){var F=this.gridData=G.data,E=F.gts;this.titles=G.isRow?E.row:E.col;},size:function C(){return this.titles.length;},getTitle:function B(E){return new mstrmojo.models.template.Title({title:this.titles[E]});},getCSS:function A(E){return this.gridData.css[this.titles[E].cni].n;}});}());mstrmojo.requiresCls("mstrmojo.gm.GMEnums");var $GM=mstrmojo.gm,CHART_TYPE=$GM.EnumGraphType,PRP_DATA_LABELS=$GM.EnumDataLabels,PRP_LEGEND=$GM.EnumLegend,PRP_MIN_SIZE_TYPE=$GM.EnumMinSizeType,PRP_FIT_TO=$GM.EnumFitTo,ENUM_FIT_MODES=$GM.EnumContainerFitModes,NGM_GRID_LINE=$GM.EnumNGMGridLines;var ARIAL="Arial",OPEN_SANCE="Open Sans",ALL="ALL";var ENUM_LAYOUT_THEME={DEFAULT:"spatial",CLASSIC:"classic"};var classicProps={THEME_STYLE:ENUM_LAYOUT_THEME.CLASSIC,LAYOUT:{allFF:ARIAL,titleFF:ARIAL,dlvPadding:2,dlvMargin:4,dlvLOH_Compensation:1,ucTBLOHeight:1,drpChildPadding:4,drpLOHW_Compensation:0,cueBottomOffset:1},GRID:{paddingSize:5,mRatio:2,lRatio:3,gridTemplateVisible:false},HEATMAP:{smallGap:2,middleGap:4,largeGap:6,largerGap:8},NGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={cntrFitMode:ENUM_FIT_MODES.AUTOMATIC};return A;}())},OGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE,minRowHeight:20,fitTo:PRP_FIT_TO.AUTOMATIC};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={};A[CHART_TYPE.BAR]={shpBdrThk:1,shpBdrStyle:0};A[CHART_TYPE.PIE]={shpBdrThk:1,shpBdrStyle:0};A[CHART_TYPE.GRID]={shpFillTrans:70};return A;}())},KPI:{fontFamily:ARIAL,defaultFontClr:{1:"#444649",2:"#FFFFFF",3:"#FFFFFF",4:"#FFFFFF"}}},defaultProps={THEME_STYLE:ENUM_LAYOUT_THEME.DEFAULT,LAYOUT:{allFF:OPEN_SANCE,titleFF:OPEN_SANCE,dlvPadding:0,dlvMargin:0,dlvLOH_Compensation:0,ucTBLOHeight:0,drpChildPadding:12,drpLOHW_Compensation:12,cueBottomOffset:-2},GRID:{paddingSize:4.52,mRatio:1050/452,lRatio:1205/452,gridTemplateVisible:true},HEATMAP:{smallGap:1,middleGap:3,largeGap:5,largerGap:5,cellTextSize:11,fontFamily:"Open Sans SemiBold",leftPadding:10,topPadding:8,lineHeightTime:1.3,marginTop:"3px"},NGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE};A[CHART_TYPE.WATERFALL]={dataLabels:PRP_DATA_LABELS.HIDE};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={cntrFitMode:ENUM_FIT_MODES.FIT_TO_CONTENT,dlFntFml:OPEN_SANCE,rfLnFntFml:OPEN_SANCE,lgdFntFml:OPEN_SANCE,xAxTtFntFml:OPEN_SANCE,xAxLbFntFml:OPEN_SANCE,yAxTtFntFml:OPEN_SANCE,yAxLbFntFml:OPEN_SANCE,allTxtFntFml:OPEN_SANCE,rwHdrTxtFntFml:OPEN_SANCE,colHdrTxtFntFml:OPEN_SANCE,rwVlTxtFntFml:OPEN_SANCE,colVlTxtFntFml:OPEN_SANCE,ttlFntFml:OPEN_SANCE,dlFntSz:"9pt",rfLnFntSz:"9pt",lgdFntSz:"9pt",xAxTtFntSz:"9pt",xAxLbFntSz:"9pt",yAxTtFntSz:"9pt",yAxLbFntSz:"9pt",allTxtFntSz:"9pt",rwHdrTxtFntSz:"9pt",colHdrTxtFntSz:"9pt",rwVlTxtFntSz:"9pt",colVlTxtFntSz:"9pt",ttlFntSz:"9pt"};A[CHART_TYPE.WATERFALL]={yGridLnShw:NGM_GRID_LINE.AUTO,xGridLnShw:NGM_GRID_LINE.AUTO};return A;}())},OGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE,minRowHeight:20,fitTo:PRP_FIT_TO.NONE};A[CHART_TYPE.PIE]={legend:PRP_LEGEND.HIDE,legendShow:false,dataLabels:PRP_DATA_LABELS.SHOW_TEXT_ONLY};A[CHART_TYPE.SCATTER]={minSizeType:PRP_MIN_SIZE_TYPE.AUTO};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={rwHdrShw:false,colHdrShw:false,dlFntFml:OPEN_SANCE,rfLnFntFml:OPEN_SANCE,lgdFntFml:OPEN_SANCE,xAxTtFntFml:OPEN_SANCE,xAxLbFntFml:OPEN_SANCE,yAxTtFntFml:OPEN_SANCE,yAxLbFntFml:OPEN_SANCE,allTxtFntFml:OPEN_SANCE,rwHdrTxtFntFml:OPEN_SANCE,colHdrTxtFntFml:OPEN_SANCE,rwVlTxtFntFml:OPEN_SANCE,colVlTxtFntFml:OPEN_SANCE,ttlFntFml:OPEN_SANCE,dlFntClr:3815477,rfLnFntClr:3815477,lgdFntClr:3815477,xAxTtFntClr:3815477,xAxLbFntClr:3815477,yAxTtFntClr:3815477,yAxLbFntClr:3815477,allTxtFntClr:3815477,rwHdrTxtFntClr:3815477,colHdrTxtFntClr:3815477,rwVlTxtFntClr:3815477,colVlTxtFntClr:3815477,ttlFntClr:3815477,yAxTtFntStyle:1,xAxTtFntStyle:1,rwHdrTxtFntStyle:1,colHdrTxtFntStyle:1,dlFntSz:"9pt",rfLnFntSz:"9pt",lgdFntSz:"9pt",xAxTtFntSz:"9pt",xAxLbFntSz:"9pt",yAxTtFntSz:"9pt",yAxLbFntSz:"9pt",allTxtFntSz:"9pt",rwHdrTxtFntSz:"9pt",colHdrTxtFntSz:"9pt",rwVlTxtFntSz:"9pt",colVlTxtFntSz:"9pt",ttlFntSz:"9pt"};A[CHART_TYPE.AREA]={shpBdrThk:1,shpFillTrans:100,shpBdrClr:15461355};A[CHART_TYPE.BAR]={shpBdrClr:15461355,shpBdrStyle:0,shpBdrThk:1,shpFillTrans:100};A[CHART_TYPE.LINE]={shpFillTrans:100};A[CHART_TYPE.PIE]={shpBdrThk:1,shpBdrStyle:0,shpFillTrans:100,shpBdrClr:15461355};A[CHART_TYPE.SCATTER]={shpBdrStyle:99,shpFillTrans:40};A[CHART_TYPE.BUBBLE]={shpBdrStyle:99,shpFillTrans:40};A[CHART_TYPE.GRID]={shpBdrThk:1,shpFillTrans:100};return A;}())},KPI:{fontFamily:OPEN_SANCE,defaultFontClr:{1:"#35383A",2:"#FFFFFF",3:"#FFFFFF",4:"#FFFFFF"}}};mstrmojo.vi.enums.EnumThemeProperties={CLASSIC_THEME_PROPS:classicProps,DEFAULT_THEME_PROPS:defaultProps};mstrmojo.vi.enums.EnumThemeProperties.SUBTYPE={GRID:"GRID",LAYOUT:"LAYOUT",HEATMAP:"HEATMAP"};mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME=ENUM_LAYOUT_THEME;mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_STYLE={DEFAULT:0,CARD:1,FLAT:2};(function(){mstrmojo.requiresCls("mstrmojo.array");var I="#000000",E=Math.round;function O(Z){return("0"+parseInt(Z,10).toString(16)).slice(-2);}mstrmojo.color=mstrmojo.provide("mstrmojo.color",{rgbStr2rgb:function X(Z){if(Z==="transparent"){return["0","0","0"];}else{return Z.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i).slice(1);}},rgbStr2hex:function G(Z){if(Z.indexOf("rgb")>=0){var a=this.rgbStr2rgb(Z);return"#"+this.rgb2hex(a[0],a[1],a[2]);}return Z;},rgb2hex:function B(d,a,Z){return O(d)+O(a)+O(Z);},rgb2hsv:function W(Z,k,o){var f=Math.min(Z,k,o),p=Math.max(Z,k,o),j=0,u,t;t=p/255;u=(p!==0)?(parseFloat(p)-parseFloat(f))/parseFloat(p):0;if(u===0){j=0;}else{var l=p-f,a=(p-Z)/l,e=(p-k)/l,q=(p-o)/l;if(Z===p){j=q-e;}else{if(k===p){j=2+a-q;}else{j=4+e-a;}}j=j/6;if(j<0){j=j+1;}}return[E(j*360),E(u*100),E(t*100)];},rgb2hsl:function D(Z,f,j){Z/=255;f/=255;j/=255;var k=Math.max(Z,f,j),d=Math.min(Z,f,j),a=(k+d)/2,e,p;if(k===d){e=p=0;}else{var o=k-d;p=a>0.5?o/(2-k-d):o/(k+d);switch(k){case Z:e=(f-j)/o+(f<j?6:0);break;case f:e=(j-Z)/o+2;break;case j:e=(Z-f)/o+4;break;}e/=6;}return[e,p,a];},hsl2rgb:function C(j,t,f){var e=function e(h,g,b){if(b<0){b+=1;}if(b>1){b-=1;}if(b<1/6){return h+(g-h)*6*b;}if(b<1/2){return g;}if(b<2/3){return h+(g-h)*(2/3-b)*6;}return h;},Z,k,o;if(t===0){Z=k=o=f;}else{var a=f<0.5?f*(1+t):f+t-f*t,d=2*f-a;Z=e(d,a,j+1/3);k=e(d,a,j);o=e(d,a,j-1/3);}return[E(Z*255),E(k*255),E(o*255)];},hsl2hex:function J(b,a,Z){return"#"+mstrmojo.array.map(this.hsl2rgb(b,a,Z),function(d){return O(d);}).join("");},hex2rgb:function Q(d){var Z=this.fixFullHexValue("#"+d.replace("#","")),a=[],b;Z=Z.replace("#","");for(b=0;b<3;b++){a.push(parseInt(Z.substr(b*2,2),16));}return a;},hex2bgr:function L(Z){return this.hex2rgb(Z).reverse();},hex2hsv:function U(a){var Z=this.hex2rgb(a);return this.rgb2hsv(Z[0],Z[1],Z[2]);},hex2hsl:function Y(Z){return this.rgb2hsl.apply(this,this.hex2rgb(Z));},hsv2rgb:function H(l,AA,x){l=l/360;AA=AA/100;x=x/100;var Z,o,w;if(AA===0){Z=x*255;o=x*255;w=x*255;}else{var e=l*6;if(e===6){e=0;}var k=Math.floor(e);var d=x*(1-AA);var a=x*(1-AA*(e-k));var z=x*(1-AA*(1-(e-k)));var u,f,j;switch(k){case 0:u=x;f=z;j=d;break;case 1:u=a;f=x;j=d;break;case 2:u=d;f=x;j=z;break;case 3:u=d;f=a;j=x;break;case 4:u=z;f=d;j=x;break;default:u=x;f=d;j=a;break;}Z=u*255;o=f*255;w=j*255;}return[E(Z),E(o),E(w)];},hsv2hex:function M(d,b,Z){var a=this.hsv2rgb(d,b,Z);return this.rgb2hex(a[0],a[1],a[2]);},getContrastingColor:function N(d,a,Z){var b=this.hex2rgb(d);return(((b[0]*299)+(b[1]*587)+(b[2]*114))/1000<125)?a:Z;},getLuminance:function F(a){var Z=this.hex2rgb(a);return 0.2126*Z[0]+0.7152*Z[1]+0.0722*Z[2];},getHighlightColor:function S(k,h){var Z,j,l,o,p=this.hex2rgb(!h?"#FFCE7F":"#EFE6D8"),f=parseInt(k[0],10),d=parseInt(k[1],10),s=parseInt(k[2],10),e=parseInt(p[0],10),a=parseInt(p[1],10),q=parseInt(p[2],10);Z=(f*e)/255;j=(d*a)/255;l=(s*q)/255;o=f*0.3+d*0.59+s*0.11;if(o<85){Z=Z+(63*(85-o)/85);Z=Z>255?255:Z;j=j+(63*(85-o)/85);j=j>255?255:j;l=l+(63*(85-o)/85);l=l>255?255:l;}return"#"+this.rgb2hex(E(Z),E(j),E(l));},get3DBorderColor:function R(d,h){var a=parseInt(d[0],10)*0.3+parseInt(d[1],10)*0.59+parseInt(d[2],10)*0.11;var f=parseInt(d[0],10);var e=parseInt(d[1],10);var Z=parseInt(d[2],10);switch(h){case"light":if(a>150){f=f*0.9;e=e*0.9;Z=Z*0.9;}else{f=f*0.6+102;e=e*0.6+102;Z=Z*0.6+102;}break;case"dark":if(a>10){f=f*0.4;e=e*0.4;Z=Z*0.4;}else{f=f*0.8+30;e=e*0.8+30;Z=Z*0.8+30;}break;}return"#"+this.rgb2hex(E(f),E(e),E(Z));},encodeColor:function K(Z,a){if(a!==undefined&&(Z===null||Z.length===0||Z==="undefined")){Z=a;}if(Z==="transparent"){return -1;}if(parseInt(Z,10)===-2){return -2;}if(Z.substring(0,1)==="#"){Z=Z.substring(1);}return parseInt(Z.substring(4)+Z.substring(2,4)+Z.substring(0,2),16);},decodeColor:function A(Z){Z=parseInt(Z,10);if(Z===0){return I;}var a=16777216+(Z&255)*65536+(Z&65280)+(Z&16711680)/65536;return"#"+a.toString(16).substring(1).toUpperCase();},fixFullHexValue:function V(Z){if(Z&&Z.length===4){return Z.replace(/([0-9a-f])/ig,"$1$1");}return Z;},findMidColorHex:function P(d,b){var e=this.hex2rgb(d),Z=this.hex2rgb(b),a=[];e.forEach(function(f,g){a.push(parseInt((f+Z[g])/2,10));});return("#"+this.rgb2hex(a[0],a[1],a[2]));}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var F=mstrmojo.array;mstrmojo._IsPanelStack=mstrmojo.provide("mstrmojo._IsPanelStack",{_mixinName:"mstrmojo._IsPanelStack",TTL_SRC_PANEL:0,model:null,selectedIdx:undefined,init:function K(P){this._super(P);var O=this.defn;if(!O){O=this.defn=this.node&&this.node.defn;this.titleSrc=this.titleSrc||O.ttlSrc;}var N=this.selectedKey=this.defn.selKey=this.node.data.selKey;this.set("selectedIdx",F.find(this.node.data.panels,"k",N));O.attachEventListener("selKeyChange",this.id,function(Q){this.set("selectedKey",Q.value);});},addChildren:function M(P,W,U){var V=this.getFormats(),R=V&&V.overflow,Q=P.length,S;for(S=0;S<Q;S++){var O=P[S],X=O.k;if(X){O.selected=O.visible=X===this.selectedKey;if(R){var N=O.getFormats()||O.createEmptyFormats();if(N){N.overflow=R;}}}}return this._super(P,W,U);},refresh:function G(){if(this.hasRendered){var N=this.defn.newSelKey||this.selectedKey,P=this.selectedVisFilterContainerKey,O;F.forEach(this.children,function(R){var Q=R.k;if(Q){R._delayRefresh=(Q!==N);O=mstrApp.isInVFConfigMode&&Q===P;if(!R._delayRefresh&&!O){R.refresh();}}});}delete this.defn.newSelKey;},selectPanel:function B(O,P,N){var Q=this.model.getDataService(),R=Q.newUpdateWithoutCmd();this.selectPanelDeferred(R,O,P,N);if(R.actions&&R.actions.length>0){Q.addSuppressData(R.extras);R.submit();}},selectPanelDeferred:function(Q,O,P,N){if(O!==this.selectedKey){this.defn.set("selKeyChange",O);this.model.selectPanelDeferred(Q,this.k,O,this.node.data.wid,P,N);}},onselectedKeyChange:function L(O){var P=0,S,N,Q;F.forEach(this.children||this.node.data.panels,function(V,U){var W=V.k;if(W){if(O.value===W){N=V;Q=U-P;if(V.set){V.set("visible",true);V.set("selected",true);}}else{if(O.valueWas===W){S=V;if(V.set){V.set("selected",false);V.set("visible",false);}}}if(N&&S){return false;}}else{P++;}return true;});if(this.titleSrc===this.TTL_SRC_PANEL&&this.title){var R=N&&N.title;this.set("title",R);this.defn.ttl=R;}this.prevSelectIdx=this.selectedIdx;this.set("selectedIdx",Q);this.raiseEvent({name:"panelSelected",key:N.k});return{on:N,off:S};},getSelectedPanel:function D(){var N=0,O=this.selectedIdx,P;F.forEach(this.children,function(R,Q){if(R.k){if(Q-N===O){P=R;return false;}}else{N++;}return true;});return P;},setDirtyChildren:function I(N){var O=this.selectedKey;F.forEach(this.children,function(Q){var P=Q.k;if(P){Q[((N||P!==O)?"add":"remove")+"DirtyKey"](P);}});},clearDirtyChild:function J(P){var O=this.children,N=O[F.find(O,"k",P)];if(N){N.removeDirtyKey(N.k);}},isPanelStack:true,checkRequiredObjects:function C(){var N=this.txWidgets||{},O=true,P;for(P in N){O&=!!N[P].checkRequiredObjects();}return O;},isAutoApply:function E(){return this.defn.cas;},updateSelectedIdx:mstrmojo.emptyFn,unrender:function H(N){delete this.defn.newSelKey;this._super(N);},switchToPanel:function A(N,O){if(O!==undefined){this.set("selectedIdx",O);}else{this.updateSelectedIdx(N);}this.children[this.selectedIdx]&&this.selectPanel(this.children[this.selectedIdx].k);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var E="*",A=".",C="-",J="_",H="<";var M=new RegExp("[\\"+E+"\\"+A+"\\"+C+"\\"+J+"\\"+H+"]","g"),G=E+"$&";mstrmojo.Serializer={scriptClass:"mstrmojo.Serializer",serializeValueGroup:function F(B){mstrmojo.array.forEach(B,function(D,K){B[K]=mstrmojo.Serializer.serializeValues(D);});return C+this.serializeValues(B)+J;},serializeValues:function I(D){var B=[];mstrmojo.array.forEach(D,function(K){if(typeof K==="Boolean"){K=K?"1":"0";}B.push(String(K).replace(M,G));});return B.join(A);}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array;function B(){var H=this.buildConfig=this.buildConfig||{};H.pk=this.k;H.fgk=this.defn&&this.defn.fgk;return H;}mstrmojo._HasBuilder={builder:null,postBuildRendering:function D(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function F(){return this.model.getChildren(this.node,false);},buildChildren:function E(H){if(!this.builder||!this.model){return false;}var J=this.children;if(J&&J.length){this.set("children",[]);}var I=this.builder.build(this.getChildren(),this.model,B.call(this));if(!H){this.addChildren(I);}this.builtChildren=true;return H?I:true;},rebuildChildren:function C(J){var P=this.children.slice(0),L=this.model,K=[],I,H=this,M=mstrApp.restoreVFKey,N,O;J=J||P.slice(0);J.forEach(function(S){var Q=G.indexOf(P,S),R=S.k;if(Q===-1){throw new Error("Invalid child requested rebuild in mstrmojo._HasBuilder::rebuildChild.");}this.removeChildren(S);S.destroy();K.push(R);},this);if(mstrApp.isInVFConfigMode&&(mstrApp.showBandingInVFConfigMode||mstrApp.showOutlineInVFConfigMode)&&!!J&&J.length===1&&!!J[0]&&J[0].k===M){delete mstrApp.showBandingInVFConfigMode;delete mstrApp.showOutlineInVFConfigMode;N=L.insertVizBox(M,H,{});L.selectVIUnit(N.id,true,{});I=[N];}else{O=L.getChildrenByKey(this.node,false,K);I=this.builder.build(O,L,B.call(this));this.addChildren(I);}return I;},rebuildChild:function A(H){return this.rebuildChildren([H])[0];}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var L=10,C=20,b=false,o=false,X=L,d=[],W=mstrmojo.array,J=false,P,h;var B=6,Y=7,A=100,k=101,O=102,F=103;function D(s,w,t){var q=w[0],p=w[1],u;s.beginPath();s.moveTo(q,p);for(u=2;u<w.length-1;u=u+2){s.lineTo(w[u],w[u+1]);}s.lineTo(q,p);s.fillStyle=t;s.stroke();s.fill();}function j(s,w,t){var q=w[0],z=w[1],u=w[2]-q,p=w[3]-z;s.fillStyle=t;s.strokeRect(q,z,u,p);s.fillRect(q,z,u,p);}function a(z,u,AA){var s=u[0],q=u[1],x=u[2],t=u[3],w=u[4],p=u[5];z.beginPath();z.arc(s,q,t,w,p,false);z.lineTo(s+x*Math.cos(p),q+x*Math.sin(p));z.arc(s,q,x,p,w,true);z.closePath();z.fillStyle=AA;z.stroke();z.fill();}function M(z,u,AA){var t=u[0],s=u[1],w=u[2],x=u[3],p=u[4],q=u[5];z.scale(1,q);z.beginPath();z.arc(t,s,w,x,p,false);z.lineTo(t,s);z.arc(t,s,0,p,x,true);z.closePath();z.fillStyle=AA;z.stroke();z.fill();z.scale(1,1/q);}function N(AA,w,AB){var t=w[0],s=w[1],x=w[2],z=w[3],p=w[4],u=w[5],q=w[6];AA.scale(1,q);AA.beginPath();AA.arc(t,s,x,z,p,false);AA.lineTo(t+x*Math.cos(p),s+x*Math.sin(p)-u);AA.arc(t,s-u,x,p,z,true);AA.closePath();AA.fillStyle=AB;AA.stroke();AA.fill();AA.scale(1,1/q);}function E(p,s,q){p.fillStyle=q;p.beginPath();p.arc(s[0],s[1],s[2],0,Math.PI*2,true);p.stroke();p.fill();}function U(q,p){return q.Point.X-p.Point.X;}function I(q,AH,AC){var AG=this.tooltipArr[AC],t=q.Text,x=q.SC,p=AG.style,AF=this.model.getZoomFactor(),z=mstrMobileApp.getDeviceDPI()/160,AD=2*z,AE=mstrApp.getScreenDimensions().w-(P*2);if(mstrApp.isTablet()){AF=(AF*z)+"em";}else{if(mstrMobileApp.getDeviceDPI()>240){AF=(AF*1.5)+"em";}else{AF+="em";}}var w="font-size:"+AF+";";w+="padding:"+AD+"px;";w+="maxWidth:"+AE+"px;";if(x){w+="border-color:#"+x;}AG.innerHTML=t;p.cssText=w;p.display="block";var AB=0,u=0;var s=AG.offsetHeight,AA=AG.offsetWidth;AB=AH.y-s-6;u=AH.x-AA-6;d.push({x:q.Point.X,y:q.Point.Y,clr:x||"#000000",top:AB,left:u,width:AA,height:s});}function Q(s,q,p){var u=p.left,t=Math.max(p.top,h+C);width=p.width,style=q.style,newLeft=u+width+12;if(newLeft+width<=mstrApp.getScreenDimensions().w){u=newLeft;}else{if(u<0){u=P;}}style.left=u+"px";style.top=t+"px";s.showAreaMarker(p.x,p.y,p.clr);}function g(p,AK){var AF=d[AK],AH=p.tooltipArr,AE=AH[AK].style,s=AF.left,w=AF.top,AB=AF.width,x=AF.height,AC=mstrApp.getScreenDimensions().w,AD,AA;if(AK>0){var z=d[AK-1],u=z.top,q=z.left,AJ=q+z.width,t=q+AB,AI;s=q;if(t>AJ){s-=(t-AJ);}else{if(t<AJ){s+=(AJ-t);}}if(s<0){if((AB*2)+12>AC){b=false;J=true;s=P;for(AD=0;AD<AK;AD++){AI=AH[AD];z=d[AD];AA=s+AB-z.width;z.left=AA;AI.style.left=s+AB-z.width+"px";}}else{b=true;}}w=u-C-x;if(w<h){var AG=Math.abs(w)+h+C;for(AD=0;AD<AK;AD++){AI=AH[AD];z=d[AD];u=z.top+AG;z.top=u;AI.style.top=u+"px";}w+=AG;}}else{if(s<0){if((AB*2)+12>AC){J=true;s=P;}else{b=true;}}if(w<h){w=h+C;}}if(!b){AE.left=s+"px";AF.left=s;}AE.top=w+"px";AF.top=w;p.showAreaMarker(AF.x,AF.y,AF.clr);}function V(w,p,t,z){var s=w.tooltipArr[p].style,u=d[p],x=d[p-t].top,q=u.width;if(z+q>mstrApp.getScreenDimensions().w){o=true;s.display="none";return ;}s.left=z+"px";s.top=x+"px";w.showAreaMarker(u.x,u.y,u.clr);}function e(AG){var AH=d.length,q=AG.tooltipArr,u=Math.ceil(AH/2),x=0,AF=1,AD=Math.min(AH,L/2),p=mstrApp.getScreenDimensions().w,t,s,AC,AA;for(x=0;x<u;x++){g(AG,x);}if(b||J){for(x;x<AD;x++){g(AG,x);}if(!J){var w=x-1,AE=0,AB=0,z,AI;t=d[w];s=t.left+t.width+12;for(w=x-1;w>=0;w--){AC=q[w];AI=d[w].width;if(s+AI>p){AB=P+AI;if(AB>AE){AA=AB;z=d[w];}}AC.style.left=s+"px";}if(AE>0){for(w=0;w<x;w++){AC=q[w];AC.style.left=(P+z.width-d[w].width)+"px";}}}}else{t=d[AH-1];s=t.left+t.width+12;for(x;x<AH;x++){V(AG,x,AF,s);AF+=2;if(o){break;}}if(o&&x<=AD){for(x=u;x<AH;x++){g(AG,x);q[x].style.display="block";}}}}function S(){var p=this,q=d.length;if(q===0){return ;}h=mstrApp.rootView.getTitleHeight();if(q===1){Q(p,p.tooltipArr[0],d[0]);}else{e(p);}}function K(s,p,t,q){switch(s){case Y:j(p,t,q);break;case A:E(p,t,q);break;case k:a(p,t,q);break;case O:M(p,t,q);break;case F:N(p,t,q);break;default:D(p,t,q);}}mstrmojo.graph._MobileGraphAreaHelper=mstrmojo.provide("mstrmojo.graph._MobileGraphAreaHelper",{highlightArea:function l(u,s){var t=this,p=u.getContext("2d"),q="rgba(255, 255, 255, 0.5)";t.clearHighlightArea(u);p.strokeStyle="#FFFFFF";W.forEach(s,function(w){K(w.Shape,p,w.Coords,q);});},highlightAreaInInit:function G(AC,z){var AE=AC.getContext("2d"),p=this.graphData.Areas,u="rgba(255, 255, 255, 0.5)";AE.clearRect(0,0,AC.width,AC.height);AE.strokeStyle="#FFFFFF";var q=p.length,AF=286,x=259,AD=341;var AB=z.length/2,w,AA;for(AA=0;AA<q;AA++){var s=p[AA],t=parseInt(s.OID,10);if(t!==AF&&t!==x&&t!==AD){continue;}if(s.SID<0||s.GID<0){continue;}for(w=0;w<AB;w++){if(s.SID!==z[2*w]||s.GID!==z[2*w+1]){continue;}K(s.Shape,AE,s.Coords,u);}}},clearHighlightArea:function R(q){if(q){var p=q.getContext("2d");p.clearRect(0,0,q.width,q.height);q.width=q.width;}},showAreaMarker:function H(p,t,s){if(p>=0&&t>=0){var q=this.highlightNode.getContext("2d");q.save();q.fillStyle="#FFFFFF";q.strokeStyle=s||"#000000";q.lineWidth=2;q.beginPath();q.arc(p,t,5,0,Math.PI*2,true);q.stroke();q.fill();q.fillStyle=s||"#000000";q.beginPath();q.arc(p,t,2,0,Math.PI*2,true);q.stroke();q.fill();q.restore();}},displayTooltips:function f(p,w,u){p.sort(U);var t=this.tooltipArr,x;b=false;o=false;d=[];this.clearHighlightArea(this.highlightNode);if(!t){P=8*(mstrMobileApp.getDeviceDPI()/160);t=[];for(x=0;x<L;x++){var AA=document.createElement("div");AA.id="mstrmojo-mobileGraph-tooltip";AA.className=mstrmojo.GraphBase.tooltipCLS;document.body.appendChild(AA);t[x]=AA;}this.tooltipArr=t;}X=Math.min(p.length,L);var z=mstrmojo.touchManager;if(X===0&&this._touchListener){z.detachEventListener(this._touchListener);delete this._touchListener;}else{if(X>0&&!this._touchListener){this._touchListener=z.attachEventListener("touchesBegin",this.id,function(AC){var AD=mstrmojo.all[AC.srcId];if(!(AD instanceof mstrmojo.android.ui.ActionToolbarButtons||AD instanceof mstrmojo.android.ui.Menu)){this.displayTooltips([],0,0);}});}}var s=null,AB={},q;J=false;for(x=0;x<L;x++){q=t[x].style;q.left=-9999;q.display="none";}for(x=0;x<X;x++){s=p[x];AB.x=s.Point.X+w;AB.y=s.Point.Y+u;I.call(this,s,AB,x);}S.call(this);window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},destroy:function Z(p){W.forEach(this.tooltipArr,function(q){document.body.removeChild(q);});delete this.tooltipArr;if(this._super){this._super(p);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=function(X){var W=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return X.k+"-"+W;},O={},K=mstrmojo.array;mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",{_mixinName:"mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",postBuildRendering:function J(){this._super();this.setup();this.initialHighlight();},initialHighlight:function B(){if(!this.getExp()){if(O[G(this)]){this.highlight.apply(this,O[G(this)]);}else{if(this.isVisMap){this.highlight("allLayers",this.genSelectionMapping(),true);}else{this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}}},getExp:function(){var W=this.model.data,X=W&&W.sc&&W.sc.exp;return X;},clearsBrushingOnHighlight:true,brushSub:null,clearSub:null,getAssociatedNodes:function V(){var W=this.defn&&this.defn.an;return W&&W.length>0?W:[];},hasAssociatedNodes:function M(){var W=this.getAssociatedNodes();return W.length>0;},getDocModelForEvent:function H(){return this.model&&this.model.docModel;},setup:function Q(){var W=this.getDocModelForEvent(),X=this.id;if(W){[this.brushSub,this.clearSub].forEach(function(Y){if(Y){Y.clear();}});this.brushSub=W.attachEventListener("brushing",X,this.onBrushing);this.clearSub=W.attachEventListener("clearBrush",X,this.onClearBrushing);}},handlesMultiSelection:function F(){return(this._super&&this._super())||this.getAssociatedNodes().length>0;},getHighlightKeys:function P(){var X=[],W=this.getAssociatedNodes();W.forEach(function(Y){X.push(Y.k);});return X;},onSelectionChange:function L(W){var X=false;if(this._super){X=this._super(W);}return this.clearHighlightForSelectionChange(X);},onContextMenuSelectionChange:function I(W){var X=false;if(this._super){X=this._super(W);}return this.clearHighlightForSelectionChange(X);},clearHighlightForSelectionChange:function U(X){var W=this.getDocModelForEvent();if(this.clearsBrushingOnHighlight){W.raiseEvent({name:"clearBrush",from:this});}if(this.handlesMultiSelection()&&!X){W.raiseEvent({name:"brushing",from:this,keys:this.getHighlightKeys()});return true;}return false;},onBrushing:function A(X){var W=X.keys.slice();if(W.indexOf(this.k)!==-1){if(this.highlight){var Y=X.from;this.highlight(Y.getSelectionType(),Y.getSelectionHash());W.push(Y.k);this.getDocModelForEvent().raiseEvent({name:"clearBrush",from:this,excludeKeys:W});}else{throw new Error(this.scriptClass+" must implement highlight method.");}}},onClearBrushing:function S(X){var W=false;if(K.indexOf(X.excludeKeys,this.k)===-1){if(this._super){W=this._super(X);}if(!W){var Y=this.getAssociatedNodes();if(K.find(Y,"k",X.from.k)!==-1){this.clearSelections(true);}}}return true;},highlight:function E(){O[G(this)]=arguments;if(this._super){this._super.apply(this,arguments);}},clearSelections:function C(){delete O[G(this)];if(this._super){this._super.apply(this,arguments);}},clearCxtMnuSelection:function D(){if(this._super){this._super.apply(this);}},clearHighlightsCache:function R(){delete O[G(this)];},updateAssociatedNodesOnMove:function N(){this.clearSelections(true);this.endSelections();if(this.isLinkedFilter&&this.isLinkedFilter()){return ;}delete this.defn.an;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array");var H=mstrmojo.array,G=mstrmojo.dom;mstrmojo._IsDocXtab={_mixinName:"mstrmojo._IsDocXtab",isDocXtab:true,formatHandlers:{domNode:["RW","T","font"],msgNode:["height","background-color"],viewport:["D","background-color","B","fx"]},preBuildRendering:function B(){var I=this.getFormats(),L="",K=function K(M){if(I[M]){var N=this[M]||I[M];this[M]=N;if(this.isFullScreenWidget){I[M]=N;}this[M+"Limit"]=parseInt(N,10);}};K.call(this,"height");K.call(this,"width");var J=function(P,O){var M=I[P];if(M&&M.charAt(M.length-1)!=="%"){var N=parseInt(M,10);if(!isNaN(N)){if(O){N-=O;}L+=P+":"+N+"px;";}}return null;};J("height",0);J("width",0);this.scrollboxNodeCssText=L;return this._super();},postBuildRendering:function D(){var J=this._super();var I=this.gridData;if((I.afw||I.afc)&&this.hasCustomScrollbar&&!this.node.data.eg&&this.scrollboxNode.firstChild){this.scrollboxNode.firstChild.style.width=this.getFormats().width;}return J;},resize:function A(){this.clearCache();var K=this.getFormats(),J=parseInt(K.height,10),I=parseInt(K.width,10);if(I>0&&J>0){if(!this.visible&&this.forcedHidden){this.set("visible",true);this.forcedHidden=false;}H.forEach([this.scrollboxNode,this.viewport],function(M){var L=M.style;L.height=J+"px";L.width=I+"px";});if(this.scrollboxNode){this.scrollboxHeightFixed=J&&(J!=="auto");if(this.scrollboxHeightFixed){this.scrollboxHeight=parseInt(J,10);this.heightLimit=this.scrollboxHeight;this.scrollboxBottom=this.scrollboxTop+J;}if(I>0){this.widthLimit=I;}if(this.lockHeadersCase){this.resizeScrollBox(G.isIE);}}this.delegateGridAction(function(L){if(L&&L.onscroll){L.onscroll();}},"scrollOnResize");if(!(this.gridData&&this.gridData.eg!==undefined)){this.onGridWidthChanged();this.refreshResizeHandlers();}if(this.lockHeadersCase){this._refreshClonedNodes();}}else{if(this.visible){this.set("visible",false);this.forcedHidden=true;}}},renderPortalState:function E(){this.clearCache();this.unrender();this.render();},unrender:function F(I){this.clearCache();if(this._super){this._super(I);}},defaultAction:function C(N,I){if(this._super(N,I)){var M=this.model.sti,L=M&&M.titleId,K=M&&M.deselectCurrent;this._currentSelectedTD=K?undefined:N;if(L){var J=this.zone;this.delegateGridAction(function(P){var O=P.domNode,Q=O&&O.firstChild;if(!J&&Q&&(N.offsetParent===Q||N.offsetParent===O)){J=P;}},"defaultClickAction");if(J){J.clearHilites(L);if(!K){J.setHilites(L,N);}J.hiliteKey=L;this.model.sti=null;}}return true;}return false;}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");function C(G,H,E){var F=G.createElement("input");F.name=H;F.type="hidden";F.value=E;return F;}function B(K,J){J=J.substring(J.indexOf("?")+1,J.length);var M=J.split("&"),L="",G="";var N=/\+/g,H,E;for(H=0,E=M.length;H<E;H++){var I=M[H].indexOf("=");if(I>=0){L=M[H].substring(0,I);G=M[H].substring(I+1);}else{L=M[H];G="";}if(G){G=decodeURIComponent(G.replace(N," "));}var F=document.createElement("INPUT");F.type="HIDDEN";F.name=L;F.value=G;K.appendChild(F);}return false;}mstrmojo.form={createDynamicForm:function A(E,H){var F=document.createElement("FORM"),G=E.indexOf("?")>0;F.name="dynamic_form";F.method=H||"POST";F.action=(G?E.substring(0,E.indexOf("?")):E);if(G){B(F,E);}document.body.appendChild(F);return F;},sendLinkAsForm:function(E,G,H){var F=this.createDynamicForm(E,H);this.send({},F.action,F.method,G,null,null,F);},sendLink:function(E,H,I){var G=mstrmojo.array.indexOf(["_new","_blank"],H)>-1,F=!mstrmojo.isUrlExternal(E);if(!G&&F){mstrApp.showWait&&mstrApp.showWait({showCancel:true,onCancel:mstrApp.hideWait});}if(!mstrmojo.isUrlExternal(E)){mstrmojo.form.sendLinkAsForm(E,H,I);}else{if(G){window.open(E);}else{window.location.href=E;}}},send:function D(L,M,F,O,J,H,G){var Q=((J&&J.hWin)||window).document,N=G||Q.createElement("form"),K=mstrApp;L=mstrmojo.addCSRFTokenToTaskParams(L);N.method=F||"POST";if(O){N.target=O;}N.action=M||K.name;H=(H!==undefined)?H:!(N.action&&N.action.indexOf("aspx")>0)&&mstrConfig.addTimeStampToPreventCaching;if(!!K.addJSessionIdToURL&&K.httpSessionId){N.action+=";jsessionid="+K.httpSessionId;}if(H){N.action+=";uxts"+mstrmojo.now();}N.appendChild(C(Q,"xts",String(mstrmojo.now())));var R,E=K.persistTaskParams||microstrategy.persistParams;for(R in E){L[R]=E[R];}if(K.servletState&&K.name){L[K.name]=K.servletState;}if(L){var I;for(I in L){if(L[I].constructor===Array){mstrmojo.array.forEach(L[I],function(S){N.appendChild(C(Q,I,S));});}else{N.appendChild(C(Q,I,L[I]));}}}Q.body.appendChild(N);try{N.submit();}catch(P){if(O&&P.result===2147500037&&!window.open("","","width=1,height=1,left=0,top=0,scrollbars=no")){mstrmojo.alert("*This action requires popups to be allowed in the browser.*");}else{mstrmojo.err("Form submission failed for an unknown reason.");}}Q.body.removeChild(N);},addURLAsHiddenInputsToForm:B};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var I=mstrmojo.array,Q=mstrmojo.desc(2412,"Default"),P=mstrmojo.desc(3433,"Font"),K=mstrmojo.desc(3434,"Number"),D=mstrmojo.desc(3435,"Alignment"),N=mstrmojo.desc(2886,"Borders"),E=mstrmojo.desc(3905,"Background"),R="-1,234.12",C="1,234.12",M="(1,234.12)",H="-$1,234.12",B="$1,234.12",J="($1,234.12)";var O=[{n:Q,v:"pru"}];I.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Bookshelf Symbol 1","Bookshelf Symbol 2","Bookshelf Symbol 3","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Open Sans SemiBold","Open Sans","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Wingdings 2","Wingdings 3"],function(S){O.push({n:S,v:S,symbolic:true});});function G(U,S,V){return(S&&S>=U)?G(U,S-V,V).concat(S):[];}var A=G(2,12,1);A=A.concat(G(14,24,2));A=A.concat(G(36,48,12));A=A.concat(G(72,72,1));var F=[{n:Q,v:"pru"}];I.forEach(A,function(S){F.push({n:String(S),v:String(S)});});mstrmojo._FormatDefinition={Formats:[{n:P},{n:K},{n:D},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:K},{n:D},{n:P},{n:N},{n:E}],MetricHeaderFormats:[{n:K},{n:D},{n:P},{n:N},{n:E},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:O,Sizes:F,SizesInVI:F.slice(7,19),Styles:[{n:Q,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:Q,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:R,v:1,f:"#,##0.00"},{n:R,r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:C,r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:M,v:3,f:"#,##0.00;(#,##0.00)"},{n:M,r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:H,v:1,f:'"$"#,##0.00'},{n:H,r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:B,r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:J,v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:J,r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/7"),v:"m/d"},{n:mstrmojo.desc(2232,"04/07"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/7/98"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/07/98"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/07/1998"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236,"7-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"7-Apr-98"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-98"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '98"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 1998"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 7, 1998"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/07/98 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/07/98 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:Q,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:Q,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(15361,"Double"),v:6}],extractModel:function(V,X,U){var Z=U||this.DefaultFormat,Y;for(Y in V){var S=V[Y];if(!S.attachEventListener){if(!mstrmojo.hash.isEmpty(S)){X[Y]=S;}}else{var W;for(W in S){if(Z[Y]&&Z[Y][W]){if(!X[Y]){X[Y]={};}X[Y][W]=S[W];}}}}},getAvailableFonts:function L(){var S={success:function(V){if(V.name==="fontPicker"){var U=[{n:Q,v:"pru"}];I.forEach(V.shortcuts,function(X){var Y=X.attributes,Z=I.filterOne(Y,function(a){return a.value;}),W=I.filterOne(Y,function(a){return a.symbolic;});U.push({n:Z&&Z.value,v:Z&&Z.value,symbolic:(W&&W.symbolic||"false").toUpperCase()==="TRUE"});});mstrmojo._FormatDefinition.Families=U;}}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,S,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);},getStandardFormat:function(U,S){var W=mstrmojo.hash.clone(S||this.DefaultFormat),V;U=U||{};for(V in W){U[V]=U[V]||{};}for(V in U){if(!U[V].attachEventListener){U[V]=mstrmojo.hash.make(U[V],mstrmojo.Obj);}}return U;},saveFormatModel:function(X,e,U,f){var d=f||this.DefaultFormat,Z,S;for(Z=0;Z<U.length;Z++){var Y=U[Z],W=e[Y]||null,b=X[Y];if(b===undefined){delete e[Y];continue;}for(S in d){var a=d[S],V;if((!W&&!b)||(W&&!W[S]&&!b[S])){continue;}for(V in a){if(b[S]===undefined||b[S]===""||b[S][V]==="pru"||b[S][V]===undefined){if(W&&W[S]&&(W[S][V]!==undefined&&W[S][V]!==null&&W[S][V]!=="pru")){W[S][V]="pru";}}else{W=W||{};W[S]=W[S]||{};W[S][V]=b[S][V];}}}if(W){e[Y]=W;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var H=mstrmojo.array,D={},G={},A="72px",F="abcdefghijklmnopqrstuvwxyz0123456789";function C(I){return I.name+":"+(I.isItalic?"i":"n")+(I.isBold?"7":"4");}mstrmojo.util.FontLoader=mstrmojo.provide("mstrmojo.util.FontLoader",{load:function E(N,O){var L=this,J=[],K;H.forEach(N,function(P){if(!L.isFontInstalled(P)){K=C(P);if(!D[K]&&!G[K]){J.push(K);}}});if(!window.WebFont||J.length===0){return true;}window.WebFont.load({custom:{families:J},fontactive:function(Q,P){D[Q+":"+P]=true;},fontinactive:function(Q,P){G[Q+":"+P]=true;},active:function M(){O.success();},inactive:function I(){O.failure();}});return false;},isFontInstalled:function B(J){var K=document.createElement("canvas"),L=K.getContext("2d"),P=J.isItalic?"italic":"normal",I=J.isBold?"bold":"normal",N=P+" "+I+" "+A,O,M;L.font=N+" monospace";O=L.measureText(F).width;L.font=N+" '"+J.name+"', monospace";M=L.measureText(F).width;K=null;return O!==M;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array");var B=mstrmojo.array;function A(C){if(C.parent){if(C.parent.shouldEllipsizeChildren===undefined){mstrmojo.mixin(mstrmojo._HasEllipsis,C.parent);}C.parent.set("shouldEllipsizeChildren",true);}}mstrmojo._HasEllipsis=mstrmojo.provide("mstrmojo._HasEllipsis",{shouldEllipsize:false,shouldEllipsizeChildren:false,doEllipsize:function(){if(this.shouldEllipsizeChildren){B.forEach(this.children,function(D,C){if(D.hasRendered&&D.doEllipsize){D.doEllipsize();}});}},onshouldEllipsizeChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsize,this.shouldEllipsizeChildren);},onshouldEllipsizeChildrenChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsizeChildren,this.shouldEllipsize);},_onEllipsizeFlagChange:function(D,C){if(D&&!C){A(this);this.markupMethods=mstrmojo.mixin({onvisibleChange:function(){if(this._super){this._super();}if(this.visible&&this.hasRendered){this.doEllipsize();}}},mstrmojo.hash.copy(this.markupMethods));}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array");var H=mstrmojo.array,G=mstrmojo.dom;mstrmojo.nativeandroid._IsAndroidDocXtab={_mixinName:"mstrmojo.nativeandroid_IsAndroidDocXtab",isDocXtab:true,formatHandlers:{domNode:["RW","T","font"],msgNode:["height","background-color"],viewport:["D","background-color","B","fx"]},preBuildRendering:function B(){var I=this.getFormats(),L="",K=function K(M){if(I[M]){var N=this[M]||I[M];this[M]=N;if(this.isFullScreenWidget){I[M]=N;}this[M+"Limit"]=parseInt(N,10);}};K.call(this,"height");K.call(this,"width");var J=function(P,O){var M=I[P];if(M&&M.charAt(M.length-1)!=="%"){var N=parseInt(M,10);if(!isNaN(N)){if(O){N-=O;}L+=P+":"+N+"px;";}}return null;};J("height",0);J("width",0);this.scrollboxNodeCssText=L;return this._super();},postBuildRendering:function D(){var J=this._super();var I=this.gridData;if((I.afw||I.afc)&&this.hasCustomScrollbar&&!this.node.data.eg&&this.scrollboxNode.firstChild){this.scrollboxNode.firstChild.style.width=this.getFormats().width;}return J;},resize:function A(){this.clearCache();var K=this.getFormats(),J=parseInt(K.height,10),I=parseInt(K.width,10);if(I>0&&J>0){if(!this.visible&&this.forcedHidden){this.set("visible",true);this.forcedHidden=false;}H.forEach([this.scrollboxNode,this.viewport],function(M){var L=M.style;L.height=J+"px";L.width=I+"px";});if(this.scrollboxNode){this.scrollboxHeightFixed=J&&(J!=="auto");if(this.scrollboxHeightFixed){this.scrollboxHeight=parseInt(J,10);this.scrollboxBottom=this.scrollboxTop+J;}if(this.lockHeadersCase){this.resizeScrollBox(G.isIE);}}this.delegateGridAction(function(L){if(L&&L.onscroll){L.onscroll();}},"scrollOnResize");if(!(this.gridData&&this.gridData.eg)){this.onGridWidthChanged();}}else{if(this.visible){this.set("visible",false);this.forcedHidden=true;}}},renderPortalState:function E(){this.clearCache();this.unrender();this.render();},unrender:function F(I){this.clearCache();if(this._super){this._super(I);}},defaultAction:function C(N,I){if(this._super(N,I)){var M=this.model.sti,L=M&&M.titleId,K=M&&M.deselectCurrent;this._currentSelectedTD=K?undefined:N;if(L){var J=this.zone;this.delegateGridAction(function(P){var O=P.domNode,Q=O&&O.firstChild;if(!J&&Q&&(N.offsetParent===Q||N.offsetParent===O)){J=P;}},"defaultClickAction");if(J){J.clearHilites(L);if(!K){J.setHilites(L,N);}J.hiliteKey=L;this.model.sti=null;}}return true;}return false;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var J=mstrmojo.dom;var Z=5;var o=1;var W=2;var N=4;var l=0;var O=true;var I=0;var F=86400000;mstrmojo.VisChartUtils=mstrmojo.provide("mstrmojo.VisChartUtils",{getScreenZoomFactor:function a(){if(I==0){if(mstrMobileApp){var t=mstrMobileApp.getDeviceDPI();console.log("dpi:"+t);I=t/160;}else{I=1;}}return I;},changeElementSize:function b(x,AC,AB){if(AC=="fontSize"||AC=="height"||AC=="line-height"){var AA=mstrmojo.css.getStyleValue(x,AC);var w=Math.round(AB*parseInt(AA));x.style[AC]=w+"px";}else{if(AC=="font"){var z=mstrmojo.css.getStyleValue(x,"fontSize");var w=Math.round(AB*parseInt(z));var u=mstrmojo.css.getStyleValue(x,"fontWeight");var t=mstrmojo.css.getStyleValue(x,"fontFamily");x.style.font=u+" "+w+"px "+t;}}},rgbaStr2rgba:function L(t){var w=null;t=t.replace(/ /g,"");var u=t.indexOf("rgba");if(u>=0){t=t.substring(u+5,t.length-1);w=t.split(",");}return w;},fillBackground:function d(x,t,AG,u,AA){var z=u||x.context,w=t||x.canvas.width,AD=AG||x.canvas.height,AE=x.themeColor||"#000000",AC=null,AF=AA||1;if(!z){z=x.canvas.getContext("2d");if(!z){return ;}}z.save();if(x.noBackground){}else{if(!x.isAndroid&&!x.isTimeSeries){AC=z.createLinearGradient(0,0,0,AD/2);z.fillStyle=AE;z.fillRect(0,0,w,AD);z.globalAlpha=0.4;AC.addColorStop(0,"#fff");AC.addColorStop(0.1,"#fff");AC.addColorStop(1,AE);z.fillStyle=AC;z.rect(0,0,w,AD/2);z.fill();z.globalAlpha=0.1;z.fillStyle="#fff";z.fillRect(0,0,w,AD/2);}else{if(x.isTimeSeries){var AB=x.formatProp;AC=z.createLinearGradient(0,0,0,AD);z.globalAlpha=AB.backgroundAlpha;z.fillStyle=this.rgb2rgbStr(AB.backgroundClr)||"#000000";z.rect(0,0,w,AD);z.fill();}else{z.globalAlpha=AF;z.fillStyle=AE;z.fillRect(0,0,w,AD);}}}z.restore();},rgb2rgbStr:function X(u,w){var t="";if(!u||u.length!=3){return t;}if(w||w==0){t="rgba("+u[0]+","+u[1]+","+u[2]+","+w+")";}else{t="rgb("+u[0]+","+u[1]+","+u[2]+")";}return t;},getRGBWithOpacity:function R(u,t,w){if(isNaN(t)){return ;}if(!w){w=[255,255,255];}var x=[];for(color in u){x[color]=parseInt(u[color]*(1-t)+w[color]*t);}return x;},fillMasterChartBackground:function S(AC,u,t,x,AI,AB,z){var AD=z||AC.context,AA=x||AC.canvas.width,AG=AI||AC.canvas.height,AH=AC.themeColor,AF=null;var AE=AC.formatProp;AD.save();AD.globalAlpha=AE.backgroundAlpha;AD.fillStyle=this.rgb2rgbStr(AE.backgroundClr)||"#000000";AD.fillRect(0,0,AA,t+AI+AB);AD.globalAlpha=1;AD.strokeStyle=this.rgb2rgbStr(AC.formatProp.textClr,0.5);AD.lineWidth=1;var w=t+0.5;this.drawLineSet(this,[{x:u,y:w},{x:u+AA,y:w}],false,AD);w=t+AG-0.5;this.drawLineSet(this,[{x:u,y:w},{x:u+AA,y:w}],false,AD);AD.restore();},drawLineSetWithSplit:function(AA,AE,AD,u,AB){var w=AE.length,AC=Math.ceil(w/AB),t,x;for(var z=0;z<AC;z++){t=z*AB;x=Math.min(t+AB+1,w);this.drawLineSet(AA,AE.slice(t,x),AD,u);}},drawLineSet:function M(z,AF,AE,t){var AA=null,w=AF.length,AD=null;if(t){AA=t;}else{AA=z.context;}var AB=null,u=false;AA.beginPath();var x=0;while(x<w){if(AF[x]){AA.moveTo(AF[x].x,AF[x].y);AB=AF[x];u=true;x++;break;}x++;}var AC=false;for(;x<w;x++){AD=AF[x];if(AD){if(!AC){AA.lineTo(AD.x,AD.y);u=false;}else{AA.moveTo(AD.x,AD.y);u=true;AB=AD;AC=false;}}else{if(!AC){AC=true;if(u){AA.arc(AB.x,AB.y,1,0,Math.PI*2,false);}}}}if(AE){AA.closePath();AA.fill();}else{AA.stroke();}},getMinYPosition:function H(u,z,t){var x=z,w;while(x<=t){if(u[x]){w=u[x].y;break;}x++;}for(x=z;x<=t;x++){if(u[x]){w=Math.min(w,u[x].y);}}return w;},drawLineAreaWithSplit:function(AB,AH,t,z,x,AC,u,AD){var w=z-t+1,AF=Math.ceil(w/AD),AG,AE;for(var AA=0;AA<AF;AA++){AG=t+AA*AD;AE=Math.min(AG+AD,t+w-1);this.drawLineArea(AB,AH,AG,AE,x,AC,u);}},drawLineArea:function M(AA,t,AD,z,AC,AH,w){var AG=null,AK=t.length,AF=null,AL=0,AE=0;if(w){AG=w;}else{AG=AA.context;}var x=null,AJ=false;AG.save();AG.lineWidth=0;AG.beginPath();var AM=AD,AB;while(AM<=z){if(t[AM]){AL=t[AM].x;AG.moveTo(AL,AC);x=t[AM];AJ=true;break;}AM++;}AB=AM;var AI=false;for(;AM<=z;AM++){AF=t[AM];if(AF){if(!AI){AG.lineTo(AF.x,AF.y);AJ=false;AE=AF.x;}else{AL=AF.x;AG.moveTo(AL,AC);if(AM+1<=z&&t[AM+1]){AG.lineTo(AF.x,AF.y);}x=AF;AI=false;AB=AM;}}else{if(!AI){AI=true;if(!AJ){AG.lineTo(AE,AC);AG.lineTo(AL,AC);var u=this.getMinYPosition(t,AB,AM)||0;AG.fillStyle=this.rgb2rgbStr(AH,1);AG.globalAlpha=0.65;AG.fill();}}}}if(!AJ){AG.lineTo(AE,AC);AG.lineTo(AL,AC);var u=this.getMinYPosition(t,AB,z)||0;AG.closePath();AG.fillStyle=this.rgb2rgbStr(AH,1);AG.globalAlpha=0.65;AG.fill();}AG.restore();},drawRectangle:function p(AC,t,AE,z,AB,AD,AA){var u=null;if(AA){u=AA;}else{u=AC.context;}if(AD){u.fillRect(t,AE,z,AB);}else{u.strokeRect(t,AE,z,AB);}},drawArc:function Q(z,AE,AD,AB,AC,u,w,AF,t){var AA=null;if(t){AA=t;}else{AA=z.context;}AA.beginPath();AA.arc(AE,AD,AB,AC,u,w);if(AF){AA.fill();}else{AA.stroke();}},drawRoundRect:function K(z,t,AD,u,AA,AB,AC){AB=Math.min(u/2,AA/2,AB);z.beginPath();z.moveTo(t+AB,AD);z.arcTo(t+u,AD,t+u,AD+AA,AB);z.arcTo(t+u,AD+AA,t,AD+AA,AB);z.arcTo(t,AD+AA,t,AD,AB);z.arcTo(t,AD,t+u,AD,AB);z.closePath();if(AC){z.fill();}else{z.stroke();}},drawHalfRoundedRectangle:function s(z,AD,AC,AE,AA,t,AF,u){var AB=null;if(u){AB=u;}else{AB=z.context;}AB.beginPath();AB.moveTo(AD+AE,AC);AB.lineTo(AD+t,AC);AB.arcTo(AD,AC,AD,AC+t,t);AB.lineTo(AD,AC+AA-t);AB.arcTo(AD,AC+AA,AD+t,AC+AA,t);AB.lineTo(AD+AE,AC+AA);if(AF){AB.fill();}else{AB.stroke();}},drawStartEndPoints:function Y(AB,AH,u,x){var w=AH.length;var AC=null,t=AB.startEndPointRadius;if(u){AC=u;}else{AC=AB.context;}AC.save();var AE="#f0f43e",AD="#f0f43e",AF="#663300";if(AB.startPointColor){AE=AB.startPointColor;}if(AB.endPointColor){AD=AB.endPointColor;}else{var AG=AH[0].y,AA=AH[w-1].y;if(AG>AA){AD="#008000";}else{if(AG<AA){AD="#8d1616";}else{AD=AE;}}}if(AB.otherPointColor){AF=AB.otherPointColor;}if(x&o&&AH[0]){AC.strokeStyle=AE;AC.fillStyle=AE;this.drawArc(this,AH[0].x,AH[0].y,t,0,Math.PI*2,true,true,AC);}if(x&W&&AH[w-1]){AC.strokeStyle=AD;AC.fillStyle=AD;this.drawArc(this,AH[w-1].x,AH[w-1].y,t,0,Math.PI*2,true,true,AC);}if(x&N){AC.strokeStyle=AF;AC.fillStyle=AF;for(var z=1;z<w-1;z++){if(AH[z]){this.drawArc(this,AH[z].x,AH[z].y,t,0,Math.PI*2,true,true,AC);}}}AC.restore();},getColor:function U(t){return(parseInt(t.themeColor.substr(1),16)>8388607)?"#000000":"#ffffff";},drawHighlightLine:function f(u,AB){var t=u.context,AA=u.margin,z=AA.l,x=u.isTimeSeries?u.chartWidth+AA.l:u.getWidth()-AA.r;t.save();t.globalAlpha=1;t.strokeStyle=this.rgb2rgbStr(u.formatProp.textClr,0.35);t.lineWidth=1;t.lineCap="round";while(z<x){t.beginPath();t.moveTo(z,AB);z+=2;t.lineTo(z,AB);t.stroke();z+=3;}t.restore();},addLabel:function q(AL,AM,AK,AI,u,AE,AF){var AH=document.createElement("div");AH.className="mstrmojo-Chart-lbl";AH.style.color=this.rgb2rgbStr(AL.formatProp.textClr,0.8);AH.innerHTML=AM;if(u){AH.style.width=u+"px";}var AB=null;var AG=0;if(AL.isTimeSeries){if(AF.w>=0){AB=AL.xdiv;AG=AL.animationCanvas.width;}else{AB=AL.domNode.getElementsByClassName("mstrmojo-chart-ylbl-div")[0];if(!AB){AB=document.createElement("div");AB.id="mstrmojo-chart-ylbl-div";AB.className="mstrmojo-chart-ylbl-div";AL.domNode.appendChild(AB);}AB.style.width=AL.margin.l-1+"px";}}else{AB=AL.domNode;AG=AL.getWidth();}AB.appendChild(AH);var AA=AH.offsetWidth||(AL.getTextWidth&&AL.getTextWidthByElem(AM,AH));var AJ=AH.offsetHeight||22*(I||1);var z=u||AA||100;var AD=AL.xLabelPadding/2;var AC=AL.yLabelPadding/2;if(AF.w>=0&&AL.isTimeSeries&&AL._scroller.origin){var AN=AK-AL._scroller.origin.x;if(AN<=0&&(AN+AA/2>-AL.maxYLblWidth)){AL.needRedrawVerticalLine=true;AB.removeChild(AH);return null;}var t=AN-AL.getChartWidthOnScreen();if((t-AA/2)<=0&&t>=0){AL.needRedrawVerticalLine=true;AB.removeChild(AH);return null;}}if(AF.w>=0){AK=AK-z/2;}if(AF.h>=0&&((AI>=AF.y-AC&&AI<=AF.y+AF.h)||(AI+AJ>=AF.y-AC&&AI+AJ<=AF.y+AF.h)||(AI+AJ>=AL.canvas.height-AL.margin.b))){AB.removeChild(AH);return null;}if(AF.w>=0&&(((AK>=AF.x&&AK<AF.x+AF.w+AD))||AK<AF.x||AK<AL.margin.l||AK+z>AG)){AB.removeChild(AH);return null;}if(AL.isTimeSeries&&AF.h>=0){AB.style.top=(AL.margin.t-AJ/2)+"px";AB.style.height=(AL.canvas.height-AL.margin.t-AL.margin.b-1+AJ/2)+"px";this.translateCSS(AK,(AI-AL.margin.t)+AJ/2,AE,AH);}else{this.translateCSS(AK,AI,AE,AH);AH.style.maxHeight=AJ+"px";}AF.x=AK;AF.y=AI;if(AF.h>=0){AF.h=AJ;}if(AF.w>=0){AF.w=z;AH.style.textAlign="center";}return AH;},addDataLabel:function q(u,z,AB,x){var t=(u.margin.l>u.margin.r)?Z:u.getWidth()-u.margin.r+Z,AA=(u.margin.l>u.margin.r)?u.margin.l:u.margin.r;return this.addLabel(u,z,t,AB-10,AA-Z*2,false,x);},translateCSS:function h(t,AA,u,z){var w="translate("+t+"px,"+AA+"px)";if(u){w+=" rotate(45deg)";}z.style[J.CSS3_TRANSFORM]=w;},getTouchXYOnWidget:function B(u,t,z){var x=mstrmojo.TouchScroller,w=(x&&z.parent&&x.getScrollPositionTotals(z.parent))||{x:0,y:0};u=u-z.offsetLeft+w.x;t=t-z.offsetTop+w.y;return{touchX:u,touchY:t};},getYValue:function A(z,u){var t=z.canvas.height,x=z.margin,w=z.model.mvalues;return t-x.b-4-((parseFloat(u)-w[0])*z.RTY);},getMasterYValue:function g(x,u,z){var t=x.masterCanvas.height,w=x.model.mvalues;return t-z.b-3-((parseFloat(u)-w[0])*x.MRTY);},getSeriesIndexAndYValue:function C(AD,t,AE){var AF=AD.model.series,z=AF.length,AB=0;y=this.getYValue(AD,AF[AB].rv[t])||0;var AC=AE-y<0?-(AE-y):AE-y,u=AC;for(var AA=1;AA<z;AA++){var x=this.getYValue(AD,AF[AA].rv[t])||0;AC=AE-x<0?-(AE-x):AE-x;if(AC<u){y=x;u=AC;AB=AA;}}return{y:y,si:AB};},getLabelWidthForMargin:function k(t,z){var x=document.createElement("div");x.className="mstrmojo-Chart-lbl";x.innerHTML=z;t.domNode.appendChild(x);var u=x.offsetWidth||60;t.domNode.removeChild(x);return u+Z*2;},animateLineSet:function V(AG,z,AE,AC){var AH=[],AF=AG.animationContext,AA=AE.length;AF.clearRect(0,0,AG.getWidth(),AG.canvas.height);if(!AC.index){AC.index=0;}else{if(AC.index>=AC.rate){this.drawLineSet(AG,AE,false,AF);AG.drawLabels();if(AG.isFillLinesArea){this.fillLinesArea(AG,AE.slice(0));}if(AG.isDrawStartEndPoints){this.drawStartEndPoints(AG,AE,AF,AG.isDrawStartEndPoints);}return ;}}for(var AB=0;AB<AA;AB++){var u=AE[AB],t=z[AB];AH[AB]={x:(AC.index*(u.x-t.x)/AC.rate)+t.x,y:(AC.index*(u.y-t.y)/AC.rate)+t.y};}this.drawLineSet(AG,AH,false,AF);var AD=this;AC.index++;window.setTimeout(function(){AD.animateLineSet(AG,z,AE,AC);},40);},fillLinesArea:function G(u,AA){var x=u.canvas.height;AA.push({x:u.getWidth()-u.margin.r,y:x-u.margin.b});AA.push({x:u.margin.l,y:x-u.margin.b});var AB=new Array();if(u.fillinColor){mstrmojo.requiresCls("mstrmojo.color");var z=mstrmojo.color.hex2rgb(u.fillinColor).join(",");AB[0]="rgba("+z+", 0.8)";AB[1]="rgba("+z+", 0.2)";}else{AB=["rgba(255,128,0,0.8)","rgba(255,128,0,0.2)"];}var t=u.animationContext;var z=t.createLinearGradient(0,0,0,x);z.addColorStop(0,AB[0]);z.addColorStop(0.75,AB[1]);t.fillStyle=z;this.drawLineSet(u,AA,true,t);},convertRawValueToMilliseconds:function j(w){var x=Number(w),t=x-((new Date("1/1/1970").getTime()-new Date("12/30/1899").getTime())/F)-l,u=new Date(t*F);return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()).getTime();},getAncestorBgColor:function D(w){var AB=null,AA=w,AF=AA.modelData?AA.modelData:AA.model,AE=null;if(AA.hasOwnProperty("xtabModel")&&AA.xtabModel.hasOwnProperty("docModel")){AE=AA.xtabModel.docModel;}if(AE&&AE.defn&&AE.defn.layouts&&AE.defn.layouts.length>0){var AD=AE.defn.layouts,x;var u;for(u in AD){if(AD[u].loaded){x=AD[u];}}if(x&&x.hasOwnProperty("units")){var z=x.units;var AC=AF.parent;while(AC){var t=AC.k||null;if(z[t]&&z[t].fmts&&z[t].fmts["background-color"]){AB=z[t].fmts["background-color"];break;}else{AC=AC.parent||null;}}if(!AB){if(x.fmts&&x.fmts["background-color"]){AB=x.fmts["background-color"];}}}}return AB;},isLightColor:function e(z){var u=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,AA,t,AB,AE,AD,x=false;if(z){var AF,AC;if(/^(rgba|RGBA)/.test(z)){AC=z.replace(/rgba\(|RGBA\(/,"");AC=AC.replace(")","");AF=AC.split(",");t=AF[0];AB=AF[1];AE=AF[2];}else{if(/^(rgb|RGB)/.test(z)){AC=z.replace(/rgb\(|RGB\(/,"");AC=AC.replace(")","");AF=AC.split(",");t=AF[0];AB=AF[1];AE=AF[2];}else{if(u.test(z)){if(z.length===4){AF="#";for(AA=1;AA<4;AA++){AF+=z.slice(AA,AA+1).concat(z.slice(AA,AA+1));}z=AF;}var w=[];for(AA=1;AA<7;AA+=2){w.push(parseInt("0x"+z.slice(AA,AA+2)));}t=w[0];AB=w[1];AE=w[2];}}}AD=(t*299+AB*587+AE*114)/1000;if(AD>150){x=true;}}return x;},getPointDistanceSquare:function E(u,t){return(u.x-t.x)*(u.x-t.x)+(u.y-t.y)*(u.y-t.y);},truncateTextToLine:function(u,AG,AK){AG.className=u.className;AG.style.whiteSpace="nowrap";var AB=AG.innerHTML=u.innerHTML;var x=parseInt(u.offsetWidth)-parseInt(u.style.width);var AI=AK*parseInt(u.style.width)+x;var z=AB;if(AG.offsetWidth>AI){var AC=0,w=AB.length-1;while(AC<=w){var AF=Math.round((AC+w)/2);var AJ=AB.substr(0,AF+1);var AH=AB.substr(0,AF+2);AG.innerHTML=AJ;var AE=AG.offsetWidth;AG.innerHTML=AH;var AA=AG.offsetWidth;if(AE<=AI&&AA>AI){break;}else{if(AE>AI){w=AF-1;}else{if(AA<=AI){AC=AF+1;}}}}z=AB.substr(0,AF+1);if(z.length<AB.length){if(z.charAt(z.length-1)===" "){z=z.substr(0,z.length-1);}var AD=z.lastIndexOf(" ");var t=z.length-1-AD;if(t>=2&&t<=8){z=z.substr(0,z.length-t-1)+"...";}else{z=z.substr(0,z.length-3)+"...";}}}u.innerHTML=z;},getLen:function(x,w,u,t){w.innerHTML=x;var z=w.offsetWidth+u-t;return z;},splitWordIfTooLong:function(z,AJ,AG,AC,AE){var AI=z.split(" ");var AD=[];var AF=AI.length;var AA=0;var x=0;for(AA=0;AA<AF;AA++){var u=AI[AA];while(true){var AK=this.getLen(u,AJ,AE,AC);if(AK>AG){var AH=(AG/AK)*u.length;var t=Math.round(AH);while(t>0){var AB=u.substr(0,t);var w=this.getLen(AB,AJ,AE,AC);if(w<=AG){AD.push(AB);break;}else{t--;}}u=u.substr(t,u.length-t);}else{AD.push(u);break;}}}return AD.join(" ");},truncateTextToLineWithWordWrap:function(AT,AP,AM){AP.className=AT.className;AP.style.whiteSpace="nowrap";var AL=7;var AD=-1;if(AT.style&&AT.style.width&&AT.style.width.length>0){AD=parseFloat(AT.style.width);}if(AD<0){AD=parseFloat(mstrmojo.css.getComputedStyle(AT).width);}var AN=AT.innerHTML;var AS=parseFloat(AT.offsetWidth)-AD;AN=this.splitWordIfTooLong(AN,AP,AD,AS,AL);var AF=AN.split(" ");var z=[];var AI=[];var AR=0;var t=0;var AK=AF.length;AP.innerHTML="&nbsp;";var AU=AP.offsetWidth-AS;AI.push(0);for(AR=0;AR<AK;AR++){var u=this.getLen(AF[AR],AP,AL,AS);if(u>AD){var AE=AF[AR];var AQ=(AD/u)*AE.length;AF[AR]=AE.substr(0,parseInt(AQ));u=AD;}z.push(u);t+=u;AI.push(t);if(AR!==AK-1){t+=AU;}}var AH=0,AO=0;var AG=AM;for(;AO<AI.length;){var AC=AI[AO]-AI[AH];if(AH>0&&AO!=AH){AC-=AU;}var AB=AI[AO+1]-AI[AH];if(AH>0&&AO+1!=AH){AB-=AU;}if(AC<=AD&&((AO+1==AI.length)||(AB>AD))){AG--;if(AG==0||AO===AK){break;}else{AH=AO;AO++;}}else{AO++;}}if(AO>AK){AO=AK;}var AJ=AI[AO]-AI[AH];if(AH>0&&AO!=AH){AJ-=AU;}var AV;if(AO>=AK&&AJ<AD){AV=AF.join(" ");}else{AV=AF.slice(0,AO).join(" ");var x=this.getLen("...",AP,AL,AS);if(AJ+x<=AD){AV+="...";}else{if(AV.charAt(AV.length-1)===" "){AV=AV.substr(0,AV.length-1);}var AA=AV.lastIndexOf(" ");var w=AV.length-1-AA;if(w===3){AV=AV.substr(0,AV.length-3)+" ...";}else{AV=AV.substr(0,AV.length-3)+"...";}}}AT.innerHTML=AV;},getLen2:function(AB,u,t){var w=t;var x=w.getContext("2d");x.font=u;x.textAlign="center";x.fillStyle="blue";var AA=x.measureText(AB);var z=AA.width;return z;},splitWordIfTooLong2:function(AA,AG,z,AB){var AI=AA.split(" ");var AE=[];var AF=AI.length;var AC=0;var x=0;for(AC=0;AC<AF;AC++){var u=AI[AC];while(true){var AJ=this.getLen2(u,z,AB);if(AJ>AG){var AH=(AG/AJ)*u.length;var t=Math.max(Math.round(AH),1);while(t>0){var AD=u.substr(0,t);var w=this.getLen2(AD,z,AB);if(w<=AG||t==1){AE.push(AD);break;}else{t--;}}u=u.substr(t,u.length-t);}else{AE.push(u);break;}}}return AE.join(" ");},getComputedFontStyle:function P(t){var u=t.fontStyle+" "+t.fontWeight+" "+t.fontSize+"/"+t.fontVariant+" "+t.fontFamily;return u;},truncateTextToLineWithWordWrap2:function(AW,AP,AG,AO){var AF=-1;if(AW.style&&AW.style.width&&AW.style.width.length>0){var AT=0;var AV=mstrmojo.css.getComputedStyle(AW);if(AV.paddingLeft){AT+=parseFloat(AV.paddingLeft);}if(AV.paddingRight){AT+=parseFloat(AV.paddingRight);}var AU=AW.offsetWidth;AF=AU?AU-AT:parseInt(AW.style.width);}if(AF<0){AW.innerHTML="...";return ;}var AC=mstrmojo.css.getComputedStyle(AW);var w=this.getComputedFontStyle(AC);AP=this.splitWordIfTooLong2(AP,AF,w,AG);var AI=AP.split(" ");var AA=[];var AL=[];var AS=0;var t=0;var AN=AI.length;var AX=this.getLen2(" ",w,AG);AL.push(0);for(AS=0;AS<AN;AS++){var u=this.getLen2(AI[AS],w,AG);if(u>AF){var AH=AI[AS];var AR=(AF/u)*AH.length;AI[AS]=AH.substr(0,parseInt(AR));u=AF;}AA.push(u);t+=u;AL.push(t);if(AS!==AN-1){t+=AX;}}var AK=0,AQ=0;var AJ=AO;for(;AQ<AL.length;){var AE=AL[AQ]-AL[AK];if(AK>0&&AQ!=AK){AE-=AX;}var AD=AL[AQ+1]-AL[AK];if(AK>0&&AQ+1!=AK){AD-=AX;}if(AE<=AF&&((AQ+1==AL.length)||(AD>AF))){AJ--;if(AJ==0||AQ===AN){break;}else{AK=AQ;AQ++;}}else{AQ++;}}if(AQ>AN){AQ=AN;}var AM=AL[AQ]-AL[AK];if(AK>0&&AQ!=AK){AM-=AX;}var AY;if(AQ>=AN&&AM<AF){AY=AI.join(" ");}else{AY=AI.slice(0,AQ).join(" ");var z=this.getLen2("...",w,AG);if(AM+z<=AF){AY+="...";}else{if(AY.charAt(AY.length-1)===" "){AY=AY.substr(0,AY.length-1);}var AB=AY.lastIndexOf(" ");var x=AY.length-1-AB;if(x===3){AY=AY.substr(0,AY.length-3)+" ...";}else{AY=AY.substr(0,AY.length-3)+"...";}}}AW.innerHTML=AY;return AY.indexOf("...")>-1;},truncateDivContent:function(AA,AE,w){AE.innerHTML=AA;if(AE.offsetHeight>w){var AB=0,u=AA.length-1;while(AB<=u){var AF=Math.round((AB+u)/2);var AH=AA.substr(0,AF+1);var AG=AA.substr(0,AF+2);AE.innerHTML=AH;var AD=AE.offsetHeight;AE.innerHTML=AG;var z=AE.offsetHeight;if(AD<=w&&z>w){break;}else{if(AD>w){u=AF-1;}else{if(z<=w){AB=AF+1;}}}}var x=AA.substr(0,AF+1);if(x.length<AA.length){if(x.charAt(x.length-1)===" "){x=x.substr(0,x.length-1);}var AC=x.lastIndexOf(" ");var t=x.length-1-AC;if(t>=2&&t<=8){x=x.substr(0,x.length-t-1)+"...";}else{x=x.substr(0,x.length-3)+"...";}}return x;}else{return AA;}},positionTooltip:function(AM,w,AR,AC){if(!AM||!w||!AR){return ;}if(isNaN(AC)){AC=45;}var AO=AR.offsetWidth,AD=AR.offsetHeight,AA=AM.offsetWidth,AL=AM.offsetHeight,AH=AM.style,AE=0,AP=0;function AB(){return AA+AC<w.x&&AL<AD;}function x(){return AL+AC<w.y&&AA<AO;}function z(){return w.x+AC+AA<AO&&AL<AD;}function AG(){return w.y+AC+AL<AD&&AA<AO;}function u(){return w.x>AA/2&&(AO-w.x)>AA/2;}function t(){return w.y>AL/2&&(AD-w.y)>AL/2;}function AQ(){return x()&&AB();}function AN(){return x()&&u();}function AK(){return x()&&z();}function AS(){return AB()&&t();}function AJ(){return AG()&&AB();}function AT(){return z()&&t();}function AI(){return AG()&&u();}function AF(){return AG()&&z();}if(AQ()){AE=w.x-AC-AA;AP=w.y-AC-AL;}else{if(AN()){AE=w.x-AA/2;AP=w.y-AC-AL;}else{if(AK()){AE=w.x+AC;AP=w.y-AC-AL;}else{if(AS()){AE=w.x-AC-AA;AP=w.y-AL/2;}else{if(AJ()){AE=w.x-AC-AA;AP=w.y+AC;}else{if(AT()){AE=w.x+AC;AP=w.y-AL/2;}else{if(AI()){AE=w.x-AA/2;AP=w.y+AC;}else{if(AF()){AE=w.x+AC;AP=w.y+AC;}}}}}}}}AH.left=AE+"px";AH.top=AP+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var G=mstrmojo.dom,H=Math;var D=1,F=2,J=4,E=5,A=6;function B(w){var M=this.anchor;if(!M){return false;}var W=this.baseTipClass,X=this[this.tipNodeName];X.className=W+" top";var k=this[this.boundaryNodeName],AB=this[this.popupNodeName],h=this.anchorOffset,z=this.anchorOrientation,u=this.hasScrollbars(),e=mstrmojo.hash.copy(this.anchorPosition||G.position(M,true)),P=G.position(k,true),AF=P.w,N=P.h,l=AB.offsetWidth,R=AB.offsetHeight,a=l/2,K=R/2,d=G.position(X),s=H.min(d.h,d.w),U=H.max(d.h,d.w)/2,p=parseInt(this.placement,10);if(w){e=G.position(M,true);}if(u){AF-=15;N-=15;}var f=G.contains(k,AB),t=f?0:P.y,AE=AF/2-a,V=N/2-K+t,AA=-1000,AG=-1000,O,q=["borderBottomColor","borderTopColor","borderRightColor","borderLeftColor"],AH=0;if(f){e.x=e.x-P.x;e.y=e.y-P.y;}var o=e.y+e.h,Q=e.x+e.w,AC=((Q+l)<AF),Y=e.y>R,x=((o+R)<N),b=function(AI,AK,AJ){return H.min(H.max(AI,AJ),H.max(AK,0));},S=function(){if((e.x<AF)&&(x||Y)){var AI=e.x+(e.w/2),AJ=(p===J&&x)||!Y;if(AJ){O="top";AG=o;AH=0;V=o+s-h;}else{O="bottom";AG=e.y-s;AH=1;V=AG-R+h;}AE=b(0,AF-l,AI-a);AA=b(e.x,Q,AI)-U;return true;}return false;},j=function(){if((e.y<N)&&(AC||e.x>l)){var AI=e.y+(e.h/2),AJ=!(p===E&&e.x>l)&&AC;if(AJ){O="left";AA=Q;AH=2;AE=Q+s-h;}else{O="right";AA=e.x-s;AH=3;AE=AA-l+h;}V=b(t,N-R,AI-K);AG=b(e.y,o,AI)-U;return true;}return false;},Z=[S,j],AD=0;if(p===F){V=this.popPosition.top;AE=this.popPosition.left;AG=-1000;AA=-1000;O=null;}else{if(p===E||p===A||(p===D&&z==="h")){Z.reverse();}for(AD;AD<2;AD++){if(Z[AD]()){break;}}V=H.round(V);AE=H.round(AE);AG=H.round(AG);AA=H.round(AA);}X.className=W+" "+(O||"hidden");var g=X.style,L=AB.style;g.top=AG+"px";g.left=AA+"px";if(this.tipNodeColor){mstrmojo.array.forEach(q,function(AI){g[AI]="";});g[q[AH]]=this.tipNodeColor;}L.top=V+"px";L.left=AE+"px";return true;}mstrmojo._IsAnchorable={anchor:null,anchorPosition:null,boundaryNodeName:"curtainNode",popupNodeName:"editorNode",tipNodeName:"tipNode",baseTipClass:"mstrmojo-Editor-tip",anchorOffset:25,anchorOrientation:"v",placement:D,popPosition:null,hasScrollbars:function C(){return(!mstrApp.isTouchApp||!mstrApp.isTouchApp());},prepareAnchor:mstrmojo.emptyFn,positionDialog:function I(K){this.prepareAnchor();if(!B.apply(this,[K])){if(typeof this._super==="function"){this._super();}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(X){mstrmojo.hash.copy(X,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var X=this;this.delayTimer=window.setTimeout(function(){X._start();X=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function V(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var X=this.ease;if(typeof X==="string"){this.ease=mstrmojo.registry.ref(X);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var Y=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Z(){if(Y){Y.exec();Y.counter++;if(Y.counter>=Y.steps){Y._end();Y=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function U(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var Y=this.target;if(Y&&this.slot&&Y.scriptClass){var Z=Y[this.slot];if(Z){this.widget=Y;this.target=Z;}}}}}if(!this.target){var X=this;while(X=X.parent){if(!X||X.domNode){break;}}if(X){this.widget=X;this.target=X[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(a,b){var Y=a.children,X=(Y&&Y.length)||0,Z;for(Z=0;Z<X;Z++){Y[Z][b]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(a){this._super(a);var Z=this.children;mstrmojo.registry.refArray(Z);var X=(Z&&Z.length)||0,Y;for(Y=0;Y<X;Y++){Z[Y].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function V(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Z=this.props,a;for(a in Z){var Y=Z[a],X=Y.ease;if(typeof X==="string"){Y.ease=mstrmojo.registry.ref(X,{dontInst:true});}}this._super();},exec:function P(){var a=this.props,b;for(b in a){var Y=a[b],X=(Y.ease||mstrmojo.ease.sin)(this.counter,Y.start,Y.stop-Y.start,this.steps-1);if(Y.fn){X=Y.fn(X);}if(Y.suffix){X+=Y.suffix;}var Z=Y.isStyle===false?this.target:this.target.style;Z[b]=X;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var b=this.srcProp,Z;if(b){var X=this.widget||this.parent;Z=X&&X[b];if((Z!=null)&&(typeof (Z)!=="string")){Z=String(Z);}}this.stop=Z;this._dynStop=true;}if(this.stop==null){this.stop="";}var a=this.target,d=null,Y=1;if(a){a.innerHTML="";d=document.createTextNode("");a.appendChild(d);Y=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=d;this.charGroupSize=Y;},exec:function(){var Y=this.targetTextNode;if(!Y){return ;}var X;if(this.counter>=this.steps-1){X=this.stop;}else{if(this.counter===0){X="";}else{X=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}Y.nodeValue=X;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function V(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(X){if(X==null){X=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(X*100,10)+")";}else{this.target.style.opacity=X;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function V(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function W(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Z,Y,a){var X=Math.pow(10,a||2);if(Y){return parseInt(X*Z/Y,10)/X;}return parseInt(X*Z,10)/X;}mstrmojo.ease={linear:function L(Y,X,a,Z){if(Y===Z){return X+a;}if(Y===0){return X;}return X+a*I(Y,Z);},sin:function A(Y,X,a,Z){return X+a*Math.sin((Math.PI/2)*Y/Z);},cos:function B(Y,X,a,Z){return X+a*Math.cos((Math.PI/2)*(1-Y/Z));},sincos:function K(Y,X,a,Z){if(Y>Z/2){return X+a*Math.cos((Math.PI/2)*(1-Y/Z));}return X+a*Math.sin((Math.PI/2)*Y/Z);},cossin:function Q(Y,X,a,Z){if(Y>Z/2){return X+a*Math.sin((Math.PI/2)*Y/Z);}return X+a*Math.cos((Math.PI/2)*(1-Y/Z));},bounce:function G(Y,X,a,Z){if((Y/=Z)<(1/2.75)){return a*(7.5625*Y*Y)+X;}if(Y<(2/2.75)){return a*(7.5625*(Y-=(1.5/2.75))*Y+0.75)+X;}if(Y<(2.5/2.75)){return a*(7.5625*(Y-=(2.25/2.75))*Y+0.9375)+X;}return a*(7.5625*(Y-=(2.625/2.75))*Y+0.984375)+X;},shake:function J(Y,X,a,Z){if(Y<Z/2){return X+a*I(Math.sin(2*Math.PI*Y/8),null,2)*2*Y/Z;}return X+a*I(Math.sin(2*Math.PI*Y/8),null,2)*2*(1-Y/Z);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var I=this.ifDataHelper,H=this,G=this.scrollNode||this.domNode;this.supportsIncFetch=I&&I.hasNext();if(I&&this.supportsIncFetch){this._scroll=function F(){var J=this.scrollNode||this.domNode||G;if(Math.ceil(J.offsetHeight+J.scrollTop)>=J.scrollHeight){H.raiseEvent({name:"incFetch",id:H.id});}};E.attachEvent(G,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(J){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);I.next({complete:function(K){if(H.postNext){H.postNext();}H.set("isFetching",false);},success:function(K){H.addItems(K.items||null);},failure:function(K){H.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+K);}});});}},unrender:function D(F){var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);this._super(F);},render:function C(){this._super();if(this.supportsIncFetch){var F=this.scrollNode||this.domNode;E.attachEvent(F,"scroll",this._scroll);}},addItems:function B(F){if(this._super){this._super(F);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],U=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){U.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(U);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var F=mstrmojo.dom;var W="touchstart",J="mousedown",P=F.isIOSTouch,S=P?W:J;function X(Z){var Y=Z[Z.hotSlot||"domNode"];if(Y){if(!Z._closeCallback){var b=Z.id,a=function(d){return function(g){var f=mstrmojo.all[b];if(f&&!f.ignoreHover){f["auto"+d](g,self);}};};Z._uncloseCallback=a("Unclose");Z._closeCallback=a("Close");}F.attachEvent(Y,"mouseover",Z._uncloseCallback);F.attachEvent(Y,"mouseout",Z._closeCallback);}}function C(Z){if(Z._closeCallback){var Y=Z[Z.hotSlot||"domNode"];if(Y){F.detachEvent(Y,"mouseover",Z._uncloseCallback);F.detachEvent(Y,"mouseout",Z._closeCallback);}}}function G(b,Z){var Y=b,a;while(Y){if(Y.open||Y.openPopup){a=Y.ignoreHoverCount||0;a=Z?(a+1):(a>0?a-1:a);Y.ignoreHoverCount=a;if(Y.set){Y.set("ignoreHover",(a>0));}else{Y.ignoreHover=(a>0);}}Y=Y.opener||Y.parent;if(Y&&Y.shouldPropagateLockHover&&!Y.shouldPropagateLockHover()){break;}}}function E(){var a=this._lockHoverCallback,Z=this.curtainNode,d=this._onClickChange;if(a){F.detachEvent(document.body,S,a,true);delete this._lockHoverCallback;}if(!Z||!d){return ;}var Y=mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp()||P,b=Y?W:J;F.detachEvent(Z,b,d);delete this._onClickChange;}mstrmojo._CanAutoClose=mstrmojo.provide("mstrmojo._CanAutoClose",{autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function U(){this._super();if(this.autoCloses){X(this);}this.oncloseOnClickChange();},onautoClosesChange:function N(){var Y=(this.autoCloses)?X:C;Y(this);},oncloseOnClickChange:function I(){if(!this.curtainNode){return ;}var a=this,Y=mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp()||P,Z=Y?W:J;this._onClickChange=function(){a.close();if(Y){mstrmojo.touchManager.notify([]);}};F.attachEvent(a.curtainNode,Z,this._onClickChange);},autoUnclose:function H(){var Y=this._autoCloseTimer;if(Y){self.clearTimeout(Y);delete this._autoCloseTimer;}},autoClose:function L(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var Y=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[Y].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function V(Y){E.call(this);this._super(Y);},lockHover:function R(){G(this,true);if(!this._lockHoverCallback){var Z=this.id,Y=this._lockHoverCallback=function(a){mstrmojo.all[Z]._unlockHoverCheck(a,self);};if((F.isIE7||F.isIE8)&&window.event&&(window.event.type===S)&&this.opener){this.opener._ignoreMousedown=true;}F.attachEvent(document.body,S,Y,true);}},unlockHover:function O(){G(this,false);E.call(this);},hoverLock:function(Y){G(this,Y);},suppressClose:function B(Y){return F.contains(this.domNode,Y,true,document.body);},_unlockHoverCheck:function D(b,Y){var Z=this.opener;if(Z&&Z._ignoreMousedown){delete Z._ignoreMousedown;return ;}var a=F.eventTarget(Y,b);if(!this.suppressClose(a)){if(this.isWithinParentWidget(a)){return ;}if(Z&&Z.onPopupAutoClosed){Z.onPopupAutoClosed(b,Y);}this.close(a);}},isWithinParentWidget:function Q(Z){var Y=F.findWidget(Z);while(Y){if(Y===this){return true;}Y=Y.parent||Y.opener;}return false;},open:function K(Z,Y){if(this.autoCloses){this.autoUnclose();}this._super(Z,Y);if(this.locksHover){this.lockHover();}},close:function M(Y){if(this.locksHover){this.unlockHover();}this._super(Y);},shouldPropagateLockHover:function A(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var D=mstrmojo.dom;mstrmojo._FillsBrowser=mstrmojo.provide("mstrmojo._FillsBrowser",{_mixinName:"mstrmojo._FillsBrowser",getBrowserDimensions:function F(H){if(H){return{w:H.innerWidth,h:H.innerHeight};}var G=D.windowDim(),I=(D.isFF||D.isWK)?0:2;return{w:Math.max(G.w,0)+"px",h:Math.max(G.h-I,0)+"px"};},preBuildRendering:function B(){var I=this._super(),H=this.getBrowserDimensions();if(!this.browserResized||this.browserResized(H)!==true){this.height=H.h;this.width=H.w;}if(!this._listenerProc){var K=this.id,J=null,G=this._listenerProc=function(M){if(mstrApp&&mstrApp.isExporting){var L=M||window.event;mstrmojo.all[K].monitorWindow(L);}else{window.clearTimeout(J);J=window.setTimeout(function(){var N=M||window.event;mstrmojo.all[K].monitorWindow(N);},150);}};D.attachEvent(window,"resize",G);}return I;},destroy:function C(G){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);}this._super(G);},getResizeDimensions:function A(G){var J=G.currentTarget,I=this.getBrowserDimensions(),H={w:(J?J.innerWidth+"px":I.w),h:(J?J.innerHeight+"px":I.h)};return H;},monitorWindow:function E(G){var H=this.getResizeDimensions(G);if((H.h===this.height&&H.w===this.width)||parseInt(H.h,10)<=20||parseInt(H.w,10)<=20){return ;}if(!this.browserResized||this.browserResized(H,true)!==true){if(H.h!==this.height){this.set("height",H.h);}if(H.w!==this.width){this.set("width",H.w);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B="mstrmojo-floating-toolbar-lightbox";var G="mstrmojo-floating-toolbar";var M="mstrmojo-floating-toolbar-cell";var I="mstrmojo-fixed-toolbar-lightbox";var A="mstrmojo-fixed-toolbar";var N="mstrmojo-fixed-toolbar-cell";var H=" hasToolBar";var E="mstrmojo-Button mstrmojo-InteractiveButton mstrmojo-oivmSprite ";var D="mstrmojo-Button-text";var L=27;mstrmojo._HasToolbar=mstrmojo.provide("mstrmojo._HasToolbar",{_mixinName:"mstrmojo._HasToolbar",postBuildRendering:function C(){this._super();var O=this.getToolbarCfg();if(!O||this.defn.ttl){return ;}var S=this.containerNode;if(S){var Q=this._createToolbar(G,M);Q.className=B;S.className+=H;S.insertBefore(Q,S.firstChild);var P=this.domNode,R=mstrmojo.boxmodel.offset(P,this.parent&&this.parent.domNode);if(R.top<L){Q.style.top=(L-R.top)+"px";}}},_createToolbar:function F(W,b){var S=this.getToolbarCfg(),Z=this,X=document,P=X.createElement("div"),V=X.createElement("table"),Y=X.createElement("tr"),R=X.createElement("td");P.appendChild(V);V.className=W;R.className=b;Y.appendChild(R);V.appendChild(Y);var a=function(d){Z.onClick(d);},U;for(U in S){var O=X.createElement("div");O.className=E+S[U].css[0];var Q=X.createElement("div");Q.className=D;Q.nodeValue="&nbsp;";Q.setAttribute("ix",U);Q.setAttribute("cix","0");O.appendChild(Q);R.appendChild(O);O.onclick=a;}return P;},renderToolbar:function K(Q){if(!this.getToolbarCfg()){return ;}var P=Q.firstChild,O=this._createToolbar(A,N);O.className=I;if(P){Q.insertBefore(O,P);}else{Q.appendChild(O);}},onClick:function J(V,P){var W=mstrmojo.dom,O=W.eventTarget(P,V),S=O.getAttribute("cix"),R=O.getAttribute("ix");var Q=this.toolbarCfg[R],U=Q.callback;if(U&&this[U]&&this[U]()){S=++S%Q.css.length;O.parentNode.className=E+Q.css[S];O.setAttribute("cix",S);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var J=mstrmojo.dom;var I=1,C=2;function E(P){var Q=this.defn,R=Q.vc,S=Q.hc;if(!P||P.length===0||(!R&&!S)){return{};}return{v:!!R,h:!!S};}function B(P){return parseInt(this.getFormats()[(P===I)?"height":"width"],10);}function H(Q){var P=this.getFormats()["max-"+((Q===I)?"height":"width")];return P&&parseInt(P,10);}function G(U,S){var Q=this.defn,R=U&&(U.dimNode||U.domNode),P=Q.ck&&Q.ck[U&&(U.k||U.content.k)];if(R&&P&&(P&S)>0){return R;}return null;}function F(Q,U,S,Z){var P=parseInt(S.style[(U===I)?"top":"left"],10)||(Q.fmts&&parseInt(Q.fmts[(U===I)?"top":"left"],10))||0;if(!!Z){return P+Z;}var R=(Q.fmts&&Q.fmts.fx)||{},V=(!J.isIE7&&(R.rt===1||R.rt===3))?((U===I)?C:I):U,X=(V===I)?"Height":"Width";Z=S["offset"+X]+(R.ds||0);if(!J.isDXIE&&((U===I&&R.rt===3)||(U===C&&R.rt===1))){P=P-Z;}var W=P+Z;if(J.isIE7&&X==="Width"&&Q instanceof mstrmojo.XtabBase){var Y=Q.contentNode.offsetWidth;if(W<Y){W+=Y;}}return W;}function L(P,Q,R){if(P>Q){if(R){P=Math.min(P,R);}return P;}return Q;}function D(W,U,V){var P=this.getCanGrowShrinkNode(),R=(W===I)?"Height":"Width",Q=R.toLowerCase(),S=parseInt(P.style[Q],10);if(U&&U!==S&&!(U<S&&!!V)){S=U;P.style[Q]=S+"px";this.afterCanGrowShrink();}this["_fixed"+R]=S;}function A(X,S,V){var W=H.call(this,S),Y=B.call(this,S),U=X.length,Q;for(Q=0;Q<U;Q++){var P=X[Q],R=G.call(this,P,S);if(!R){continue;}Y=L(F.call(this,P,S,R),Y,W);if(Y===W){break;}}D.call(this,S,Y,V);}function O(V,U,Q,S){var R=G.call(this,V,U);if(!R){return ;}var P=F.call(this,V,U,R,Q);D.call(this,U,L(P,B.call(this,U),H.call(this,U)),S);}mstrmojo._CanGrowOrShrink=mstrmojo.provide("mstrmojo._CanGrowOrShrink",{getCanGrowShrinkNode:function N(){return this.domNode;},performCanGrowCanShrink:function M(Q,R){var P=E.call(this,Q);if(P.v){A.call(this,Q,I,R);}if(P.h){A.call(this,Q,C,R);}},fixedSizeCanGrowShrink:function K(W,P,U,V){var R=E.call(this,W&&[W]);var S=parseInt(P,10),Q=parseInt(U,10);if(R.v&&!isNaN(S)){O.call(this,W,I,S,V);}if(R.h&&!isNaN(Q)){O.call(this,W,C,Q,V);}},afterCanGrowShrink:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");function G(J){return(J&&J.id);}mstrmojo._HasScrollbox=mstrmojo.provide("mstrmojo._HasScrollbox",{_mixinName:"mstrmojo._HasScrollbox",scrollListeners:null,scrollListenerCount:0,scrollInterval:50,scrollboxNode:undefined,scrollTo:function F(L,K){var J=this.scrollboxNode;J.scrollLeft=L.x;J.scrollTop=L.y;if(K){this.notifyScrollListeners(L);}},connectScrollbox:function E(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(!L){L={};this.scrollListeners=L;}if(!L[J]){L[J]=K;this.scrollListenerCount++;if(this.scrollListenerCount===1){this._attachScrollDom();}}},disconnectScrollbox:function D(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(L&&L.hasOwnProperty(J)){delete this.scrollListeners[J];this.scrollListenerCount--;if(!this.scrollListenerCount){this._detachScrollDom();}}},notifyScrollListeners:function C(K){var N=K||this.getScrollPos(),M=N.y,L=N.x;this.scrollboxTop=M;this.scrollboxLeft=L;this.scrollboxRight=L+this.scrollboxWidth;this.scrollboxBottom=M+this.scrollboxHeight;var J=this.scrollListeners,O;for(O in J){J[O].onscroll(this);}},getScrollPos:function H(){var J=this.scrollboxNode;return{x:J.scrollLeft,y:J.scrollTop};},_attachScrollDom:function A(){var M=this.scrollboxNode;if(M){var L=this.usesTouches;if(!L){if(!this.scrollCallback){var K=this.id;this.scrollCallback=function(){mstrmojo.all[K].notifyScrollListeners();};}mstrmojo.dom.attachBufferedEvent(M,"scroll",this.scrollCallback,this.scrollInterval);}if(this.scrollboxTop===null){this.scrollboxTop=L?0:M.scrollTop;}if(this.scrollboxLeft===null){this.scrollboxLeft=L?0:M.scrollLeft;}var J=function(P){var O=P.toLowerCase();var N=M.style[O];return(!isNaN(N)&&N.charAt(N.length-1)!=="%")?parseInt(N,10):M["client"+P];};if(this.scrollboxHeight===null){this.scrollboxHeight=J("Height");}if(this.scrollboxWidth===null){this.scrollboxWidth=J("Width");}this.scrollboxBottom=this.scrollboxTop+this.scrollboxHeight;this.scrollboxRight=this.scrollboxLeft+this.scrollboxWidth;this._attachedScrollbox=M;}},_detachScrollDom:function I(){var J=this._attachedScrollbox;if(J&&this.scrollCallback){mstrmojo.dom.detachBufferedEvent(J,"scroll",this.scrollCallback,this.scrollInterval);}delete this._attachedScrollbox;},scrollboxTop:null,scrollboxLeft:null,scrollboxHeight:null,scrollboxBottom:null,buildRendering:function B(){this._detachScrollDom();this._super();if(this.scrollListenerCount){this._attachScrollDom();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.models.template.Titles","mstrmojo.models.template.MetricValue","mstrmojo.models.template.Headers","mstrmojo.models.datasets.DataInterface");var Y=mstrmojo.array,K=mstrmojo.hash,k=mstrmojo.string,V=mstrmojo.models.datasets.DataInterface,L=k.decodeHtmlString;var P=-1,h=1,S=2,E=3;var H=1,g=2,C=3;var I="0";function J(p){var q={};K.forEach(p,function(u,t){var s=[];Y.forEach(u,function(w){s.push({fillColor:w.fillclr,text:w.n});});q[t]=s;});return q;}function U(t){var AF=this.getTotalRows(),w=this.data,AA=[],AC=w.gts.col[0],s=AC?AC.es:[],AE=s.length,x=0;t=K.copy(t,{minAttribute:1,minMetric:1});if(AF<t.minAttribute||AE<t.minMetric){throw"Error";}do{var q=this.getRowHeaders(x),u,p={},AB=q.size();for(u=0;u<AB;u++){while(u<AB&&q.getHeader(u).getFormIndex()!==undefined){u++;}if(u<AB){var z=q.getHeader(u);p[z.t.n]=z.getName();}}for(u=0;u<s.length;u++){var AD=this.getMetricValue(x,u).value;p[s[u].n]={v:AD.v,rv:AD.rv};}AA.push(p);x++;}while(x<AF);return AA;}function B(q){var p=[],s=this.data.gts.row;Y.forEach(s,function(u,t){Y.forEach(q,function(w){if(u.id===w.id){p[t]=true;}});});return p;}function f(AU){var AC=this.getTotalRows(),AW=this.data,AB=[],AE=AW.gts.col[0],w=AE?AE.es:[],AL=w.length,AA,AP=0;AU=K.copy(AU,{minAttribute:1,minMetric:1,colorByInfo:[],hasTitleName:false,hasSelection:false,needDecode:false});if(AC<AU.minAttribute||AL<AU.minMetric){throw"Error";}var p=AU.needDecode,AR=AU.hasTitleName,AQ=AU.hasSelection,AX=AU.hasThreshold,AJ=AU.colorByInfo;var AV=AX?J(AW.th):undefined;AA=B.call(this,AJ);do{var s=this.getRowHeaders(AP),u={},AN,AM=[],AT=AJ.length,q={headers:[],values:[],colorInfo:[]};for(AN=0;AN<s.size();AN++){var AO=s.getHeader(AN),AG=AO.getName(),AZ=AO.t,z={name:p?L(AG):AG};if(AR){var AY=AZ&&AZ.n;z.tname=p?L(AY):AY;}if(AQ){var AI=AZ&&AZ.id,AD=AO.getElementId();z.attributeSelector={n:AG,tid:AI,eid:AD,isSelectAttr:true};u[AI]=[{n:AG,id:AD}];}if(AT&&AA[AN]===true){var AF=AO.getElementId();AM.push(AF);}q.headers.push(z);}if(AT){q.colorInfo=AM;}for(AN=0;AN<w.length;AN++){var AK=this.getMetricValue(AP,AN).value,AS={v:AK.v,rv:AK.rv};if(AX){var x=AV[AN],t=x&&x[AK.ti];if(t){AS.threshold=t;}}if(AR){var AH=this.getColTitles().titles[0].es[AN].n;AS.name=p?L(AH):AH;}q.values.push(AS);}if(AQ){q.metricSelector=u;}AB.push(q);AP++;}while(AP<AC);return AB;}function O(AK){var AN=this.data,u=this.getTotalRows(),w=AN.gts.col[0],s=w?w.es:[],AA=s.length,AB={},AC=[],AE,AF=0,AD;AK=K.copy(AK,{minAttribute:1,minMetric:1,descKey:"name",childrenKey:"children",hasTitleName:false,hasSelection:false,needDecode:false,nestedLevel:undefined,colorByInfo:[]});if(u<AK.minAttribute||AA<AK.minMetric){throw"Error";}var t=AK.descKey,x=AK.childrenKey,p=AK.needDecode,AH=AK.hasTitleName,AG=AK.hasSelection,q=AK.nestedLevel||0,AM=AK.hasThreshold,z=AK.colorByInfo,AI=z.length;var AL=AM?J(AN.th):undefined;AB[t]="root";AE=B.call(this,z);var AJ=function(Aj,AQ,Aa,Ad,AT){var AX=(Aj[x]=Aj[x]||[]),Ak=AQ.getHeader(Aa),Ao=Ak&&Ak.t,Ah=Ao&&Ao.id,Af=(Ak&&Ak.getName())||"",Ab=AQ&&AQ.headers&&AQ.headers.length||0,Al,Ae=Ak&&Ak.getElementId(),AP=Y.filterOne(AX,function(Ap){return(Ap._eid===Ae);});Al=Y.some(AE,function(Aq,Ap){return Aq&&((Aa-Ap)%Ab===0);});var Am=Aa+1,AV=[Af];while(Am<AQ.size()){var AU=AQ.getHeader(Am),AO=AU&&AU.t,AW=AO&&AO.id;if(AW===Ah){Aa++;if(AU&&AU.getName()){AV.push(AU.getName());}}else{break;}Am++;}Af=AV.join(" ");if(AI&&Al){AC.push(Ae);}if(!AP||(Aa===q-1)){AP={_eid:Ae};var AZ=(Ak!==undefined);if(AZ){AP[t]=p?L(Af):Af;}if(AH&&AZ){var An=Ao&&Ao.n;AP.tname=p?L(An):An;}if(AG&&AZ){AP.attributeSelector={n:Af,tid:Ah,eid:Ae,isSelectAttr:true};}AX.push(AP);}if(AG&&AZ){AT[Ah]=[{n:Af,id:Ae}];}if(Aa<AQ.size()-1&&(!q||(Aa<q-1))){AJ.call(this,AP,AQ,Aa+1,Ad,AT);}else{var Ac=this.getMetricValue(Ad,0).value;if(Ac){AP.value=Ac.rv;AP.formattedValue=Ac.v;}if(AI){AP.colorInfo=AC;AC=[];}AP.values=[];for(AD=0;AD<s.length;AD++){var Ai=this.getMetricValue(Ad,AD).value,AR={v:Ai.v,rv:Ai.rv};if(AM){var AY=AL[AD],AS=AY&&AY[Ai.ti];if(AS){AR.threshold=AS;}}if(AH){var Ag=this.getColTitles().titles[0].es[AD].n;AR[t]=p?L(Ag):Ag;}AP.values.push(AR);}if(AG){AP.metricSelector=AT;}}};do{AJ.call(this,AB,this.getRowHeaders(AF),0,AF,{});AF++;}while(AF<u);return AB;}function X(p,q){var s=[];Y.forEach((p.row||[]).concat(p.col||[]),function(t){if((t.id===q)&&(t.fs)){s=s.concat(t.fs);}});return s;}mstrmojo.models.template.DataInterface=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.models.template.DataInterface",data:null,init:function(p){this.data=p;},getRowTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:true});},getColTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:false});},getTotalRows:function b(){if(this.data.eg){return 0;}var s=this.data,q=s&&s.ghs,p=q&&q.rhs,t=p&&p.items;return(t&&t.length)||0;},getTotalColHeaderRows:function d(){var p=this.data.ghs.chs.items;return(p&&p.length)||0;},getTotalCols:function D(){return this.getColHeaders(0).size();},getRowHeaders:function W(p){return new mstrmojo.models.template.Headers({data:this.data,i:p,isRow:true});},getColHeaders:function Z(p){return new mstrmojo.models.template.Headers({data:this.data,i:p,isRow:false});},getMetricValue:function F(s,p){var q=this.data;return new mstrmojo.models.template.MetricValue({data:q,value:q.gvs.items&&q.gvs.items[s].items[p]});},getColumnHeaderCount:function N(){var p=this.data.gvs.items;return p?p[0].items.length:0;},getCSSString:function a(){return this.data.cssString;},isEmpty:function M(){var p=this.data.gsi;return !p||(!p.rows.length&&!p.cols.length&&!p.mx.length);},getAggregatePadding:function G(){var q=this.data.gsi&&this.data.gsi.fmts,s=function(u,t){return u+t;},p=function(u){var t=0;return["ch","rh","va"].map(function(w){var x=false;return u.map(function(z){if(q[w]&&q[w].hasOwnProperty(z)){if(!x){x=true;t++;}return q[w][z];}return 0;}).reduce(s)/u.length;}).reduce(s)/(t||1);};if(!q){return null;}return{v:p(["tp","bp"]),h:p(["rp","lp"])};},getColResizeScenario:function j(){var p=this.data;if(p.afw){return h;}else{if(p.afc===false){return E;}else{return S;}}},getColResizeInfo:function e(w){var x=this.data,t={v:this.getColResizeScenario(),widths:null};var z=x.gsi,q=x.gts||{},AC=[],u=x.twm||{},AA=u.top||[],AB=u.bottom||[],s=0,p=function(AE,AD){if(z){z[AE].every(function(AG){var AH=AG.did,AI=X(q,AH),AF=V.getFormsByAttrId(AH,w);(AI.length?AI:[]).forEach(function(AL,AK){var AM=AF[Y.find(AF,"fid",AL.id)],AJ=(AB&&AB[s])||{};AC.push({n:AG.n+(AF.length?(" - "+AM.fnm):""),did:AH,depth:AK+1,t:AG.t||4,width:parseInt(AJ.w||0,10),widthModel:{top:(AA&&AA[s])||{},bottom:AJ}});s++;});return !AD;});}};p("rows",false);if(AC.length===0){p("cols",false);}p("mx",z.tma===1);t.widths=AC;return t;},getRowResizeScenario:function Q(){return !!this.data.rh?E:S;},getRowResizeInfo:function A(){var q=this.data,p=q.rh;return{v:this.getRowResizeScenario(),height:(p===undefined||p==="")?q.xrh:p};},getColumnHeaderData:function R(AD){var x=this.data,AF=x.gts,AE=x.gts.rec,AG=[],q=[],AB=AF.row,z=x.gsi.prop.rows.shw===I&&AD;Y.forEach(AB,function(AI){var AH=AI.fs,AJ=AI.otp===P;if(!z){if(AH&&AH.length>1){Y.forEach(AH,function(){AG.push(AI);});}else{AG.push(AI);}}if(AJ){q=AI.es;}});var w=AF.col;if(w&&w.length>0){var u=x.ghs,s=u.chs,p=s.items,AC=p[p.length-1].items,t=function t(AH){var AI=AH.pi,AJ=AI&&AI.ci,AK=AI&&AI.ri;if(AH.mix!==undefined){return AH;}if(AK===undefined||AJ===undefined){return ;}return t(p[AK].items[AJ]);};Y.forEach(w,function(AH){var AI=AH.otp===P;if(!z&&(AI&&(!AE||AB.length===0))){AG.push(AH);}if(AI){q=AH.es;}});var AA=AG.length;Y.forEach(AC,function(AH){delete AH._ridx;});if(q.length>0){Y.forEach(AC,function(AK){var AH=t(AK);var AL=AH?AH.idx:(AK.pi?0:AK.idx),AJ=q[AL]||q[0];var AI=AJ._ridx=AJ._ridx||[];if(AI.length===0){Y.forEach(AC,function(AN,AO){var AM=t(AN);if(!AH||AM.mix===AL){AI.push(AA+AO);}});}AG.push(AJ);});}}else{if(q.length>0){AG.push(q[0]);}}return AG;},getUnitById:function l(s){var q=this.data.gsi,p=null;[q.rows,q.cols,q.mx].some(function(t,u){if(u===2){u=-2;}t.some(function(w,x){if(w.did===s){p={axis:u+1,depth:x+1,unit:w};}return !!p;});return !!p;});return p;},getRawData:function o(p,q){switch(p){case g:return U.call(this,q);case C:return f.call(this,q);}return O.call(this,q);}});mstrmojo.models.template.DataInterface.inflateGridData=function(s){var t=s.gvs,q=s.ghs;if(s.egt===undefined&&(s.eg===undefined||s.eg===null)&&!!t&&K.isEmpty(t)){var p={v:"",rv:""},u={items:(q.chs.cws||[0]).map(function(){return p;})};t.items=q.rhs.items?q.rhs.items.map(function(){return u;}):[];t.show=true;}};mstrmojo.models.template.DataInterface.ENUM_GRID_RESIZE={FIT_TO_WINDOW:h,FIT_TO_CONTENTS:S,FIXED:E};mstrmojo.models.template.DataInterface.ENUM_RAW_DATA_FORMAT={TREE:H,ROWS:g,ROWS_ADV:C};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.locales");var e=mstrmojo.array,P=mstrmojo.meta.TP,G=mstrmojo.meta.STP,O=mstrmojo.hash,F={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},B={};var X;for(X in F){B[F[X]]=true;}var b={};b[F.AQ]="a";b[F.AL]="a";b[F.AC]="a";b[F.AE]="a";b[F.MQ]="m";b[F.MC]="m";b[F.F]="f";b[F.R]="r";b[F.XML]="p";b[F.ANDOR]="nds";var K={};K[F.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];K[F.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];K[F.AE]=["not","a","fn","es","a2","fm2","p"];K[F.AQ]=["not","a","fm","fn","cs"];K[F.AL]=["not","a","fm","fn","cs"];K[F.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];K[F.R]=["not","r"];K[F.F]=["not","f"];K[F.XML]=["not","n","p"];K[F.ANDOR]=["not","node","nds","fn"];var M={};M[F.MQ]="METRIC_FNS";M[F.MC]="METRIC_FNS";M[F.AQ]="FORM_FNS";M[F.AL]="FORM_FNS";M[F.AC]="FORM_FNS";M[F.AE]="ELEM_FNS";var N={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47},d={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,CONS:12032,NDE:12033},U={a:N.ATTR,a2:N.ATTR,m:N.METRIC,m2:N.METRIC,r:N.REPORT,f:N.FILTER,p:N.PROMPT},V={f:d.FILTER};var W={};W[F.MQ]=N.METRIC;W[F.MC]=N.METRIC;W[F.AQ]=N.ATTR;W[F.AL]=N.ATTR;W[F.AC]=N.ATTR;W[F.AE]=N.ATTR;W[F.F]=N.FILTER;W[F.R]=N.REPORT;var J=function(g){var H=g.length,j={},h;for(h=0;h<H;h++){var k=g[h];j[k.did]=k.n;}return j;},E=function(g){var H=g.length,h;for(h=0;h<H;h++){var f=g[h];if("tp" in f){f.t=f.tp;}}return g;},Y=function(g,j){var H=g.length,h;for(h=0;h<H;h++){var f=g[h];if("tp" in f){if(j){f.t=j;}else{delete f.t;}}}return g;},a=function(f,h){if(!h){h=[];}h.length=0;var g,H;for(g=0,H=f.length;g<H;g++){h[g]=f[g];}return h;},L={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var R={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:F,ETs:B,ET2TGT:b,ET2COND:K,ET2TP:W,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158,DESCENDANT:187},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:N,STP:d,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":d.PROMPT,1:d.PROMPT_LONG,2:d.PROMPT_LONG,3:d.PROMPT_LONG,4:d.PROMPT_DOUBLE,5:d.PROMPT_DOUBLE,6:d.PROMPT_DOUBLE,7:d.PROMPT_DOUBLE,8:d.PROMPT_STRING,9:d.PROMPT_STRING,10:d.PROMPT_STRING,14:d.PROMPT_DATE,15:d.PROMPT_DATE,16:d.PROMPT_DATE,21:d.PROMPT_LONG,22:d.PROMPT_LONG,23:d.PROMPT_STRING,24:d.PROMPT_BOOLEAN,30:d.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function A(h,g){var j=this.FN,k=this.FN_MRP,H=this.FNT;if(g===H.DEF||g===undefined){switch(h){case j.BETWEEN:case j.NOT_BETWEEN:return 2;case j.IS_NULL:case j.IS_NOT_NULL:return 0;}}else{if(g===H.PER||g===H.RANK){switch(h){case k.BETWEEN:case k.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function S(g,H){var h=this.FN;return g==h.IN_LIST||g==h.NOT_IN_LIST;},fn_AC_MC:function Z(g,H){var h=this.FN;return(g==h.EQUAL)||(g==h.NOT_EQUAL)||(g==h.GREATER)||(g==h.LESS)||(g==h.GREATER_EQUAL)||(g==h.LESS_EQUAL);},fnName:function Q(k,j,f,h){var H=this[M[k]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[h]]||H["*"];}if(k===F.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var g=e.find(H,"did",(f||1)+this.FN_SEP+j);if(g>-1){return H[g].n;}return"";},findTargets:function I(s,j,x){if(!x){x={};}if(s){var q;for(q in U){var AE=s[q];if(AE){if(!AE[P]){AE[P]=U[q];}if(!AE[G]&&V[q]){AE[G]=V[q];}x[AE[j]]=AE;}}if(s.dmy){var o=this.TP.ATTR,z=this.DMY_TP.ATTR,g=s.dmy.uts,AD,f;for(AD=0,f=(g&&g.length)||0;AD<f;AD++){var p=g[AD];if(p&&p.utp===z){var l=p.utgt;if(!l.t){l.t=o;}x[l[j]]=l;}}}var H=s.nds,w,AB;for(w=0,AB=(H&&H.length)||0;w<AB;w++){this.findTargets(H[w],j,x);}var AA=s.cs,AC=AA&&AA.length;if(AC){for(w=0;w<AC;w++){this.findTargets(AA[w],j,x);}}}return x;},onLocaleUpdated:function(){var f=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=O.copy(J(f.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=a(Y(f.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":Y(e.filter(f.Metric.concat(f.MetricRP),function(g){return g.did&&(e.find(R["0"],"did",g.did)<0);}))};H.FORM_FNS={0:Y(e.filter(f.Attribute,function(g){return g.did&&(e.find(L["0"],"did",g.did)<0);})),1:Y(e.filter(f.Attribute,function(g){return g.did&&(e.find(L["1"],"did",g.did)<0);})),2:Y(e.filter(f.Attribute,function(g){return g.did&&(e.find(L["0"],"did",g.did)<0)&&(e.find(L["1"],"did",g.did)<0);}))};H.DIMTYLEVELS=a(Y(f.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function D(j){var g=-1,H=0,f=1,h=2;function k(l){switch(l.t){case N.METRIC:return f;case N.ATTR:case N.DIM:case N.CONS:return H;case N.FILTER:return l.st===d.CUSTOMGROUP?H:h;case -1:return g;default:return h;}}j=e.map(j||[],function(l){return O.copy(l,{});});return j.sort(function(s,q){var t=k(s)-k(q);if(t){return t;}var p=s.n.toUpperCase(),o=q.n.toUpperCase(),l=p.localeCompare(o);if(l){return l;}return s.n.localeCompare(q.n);});},mapBaseFormTypeToDataType:function C(g){g=parseInt(g);if(g===NaN){return -1;}var f=this.BFTP,H=this.DTP;switch(g){case f.DATETIME:return H.TIMESTAMP;case f.DATE:return H.DATE;case f.TIME:return H.TIME;case f.NUMBER:return H.REAL;case f.TEXT:return H.CHAR;case f.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var M=mstrmojo.locales,I=mstrmojo.string,P=window.mstrConfig,F=mstrmojo.array,C=P.units,R={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},A={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},E={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var G=96;String.prototype.reverse=function(){var V="",U;for(U=this.length;U>0;--U){V+=this.charAt(U-1);}return V;};function K(U,W){U=U||"";W=W||U.match(/\".+?\"/g)||[];for(var V=0;V<W.length;V++){U=U.replace(W[V],W[V].substring(1,W[V].length-1).replace(/\$/g,"$$$$"));}return U;}function S(Z){var U=86400000,Y=new Date(1900,0,1,0,0,0,0),V=Math.floor(Z)-1,X=Z-V-1;if(Z>=59){V--;}var W=new Date(Y.getTime()+(V*U));W.setTime(W.getTime()+X*U+500);return W;}function H(Y,g,j){var Z={"d+":Y.getDate(),"h+|H":Y.getHours(),"s+":Y.getSeconds()},U=M.datetime,a;if(/(y+)/.test(g)){var X=Y.getFullYear().toString(),f=RegExp.$1,W=f.length===2,V=X.length;g=g.replace(f,X.substr(W?V-2:0,W?2:V));}if(/(^\[h\])/.test(g)&&j){g=g.replace(RegExp.$1,""+(Math.floor(j*24)));}if(/(\"?:\"?mm)/.test(g)){var b=Y.getMinutes();g=g.replace(RegExp.$1,":"+(RegExp.$1.length===1?b:("00"+b).substr(b.toString().length)));}if(/(AM\/PM)/.test(g)){var h=Z["h+"],d=h>11;Z["h+"]=h-(d?12:0);g=g.replace(RegExp.$1,d?"PM":"AM");}for(a in Z){if(new RegExp("("+a+")").test(g)){g=g.replace(RegExp.$1,RegExp.$1.length===1?Z[a]:("00"+Z[a]).substr((Z[a].toString()).length));}}if(/(mmmm)/.test(g)){g=g.replace(RegExp.$1,U.MONTHNAME_FULL[Y.getMonth()]);}else{if(/(mmm)/.test(g)){g=g.replace(RegExp.$1,U.MONTHNAME_SHORT[Y.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(g)){var e=(Y.getMonth()+1).toString();g=g.replace(RegExp.$1,RegExp.$1.length===1?e:("00"+e).substr(e.length));}}}return K(g);}function N(V,Y){var W=0,U=Y.length,X=0;for(;W<U;W++){if(Y[W]==="0"){X++;}else{if(Y[W]==="#"){if(X<V){X++;}}else{continue;}}}return X;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function D(U){var X=this.getThousand(),W=new RegExp("^(-)?[0-9]{1,3}(\\"+X+"[0-9]{3})*$"),V=new RegExp("^(-)?[0-9]+$");return(String(U).indexOf(X)&&W.test(U))||V.test(U);},isNumeric:function O(Y){var X=this.getDecimal(),Z=this.getThousand(),W=new RegExp("^(-)?[0-9]{1,3}(\\"+Z+"[0-9]{3})*(\\"+X+"[0-9]+)?$"),V=new RegExp("^(-)?[0-9]*(\\"+X+")?[0-9]+$"),U=new RegExp("^(-)?[0-9]{1}(\\"+X+")[1-9]+[eE]{1}[-]{0,1}[0-9]+$");return(String(Y).indexOf(Z)&&W.test(Y))||V.test(Y)||U.test(Y);},isBigDecimal:function(V){if(!V){return false;}var U=String(V).match(/^#([^#]+)#$/);if(!U||U.length<=1){return false;}var W=U[1];return this.isNumeric(W);},parseInteger:function L(U,V){if(!this.isInt(U)){return Number.NaN;}return parseInt(this.toString(U,true),V);},parseNumeric:function B(U){if(!this.isNumeric(U)){return Number.NaN;}return parseFloat(this.toString(U,true));},parseBigDecimal:function(U){return String(U).match(/^#(.+)#$/)[1];},inNumericRange:function Q(V,W,U){V=this.parseNumeric(V);U=(U!=null)?this.parseNumeric(this.toLocaleString(U)):Number.NaN;W=(W!=null)?this.parseNumeric(this.toLocaleString(W)):Number.NaN;if(U!=Number.NaN&&(V>U||isNaN(V))){return 1;}if(W!=Number.NaN&&(V<W||isNaN(V))){return -1;}return 0;},convertToUSUnits:function(X,W,V){var U=X;W=W||C;switch(parseInt(W,10)){case R.CM:U=parseFloat(this.toString(X))/2.54+"";break;case R.MM:U=parseFloat(this.toString(X))/25.4+"";break;case R.PT:U=parseFloat(this.toString(X))/72+"";break;case R.PC:U=parseFloat(this.toString(X))/6+"";break;case R.PX:U=parseFloat(this.toString(X))/G+"";break;}return V?U:this.toLocaleString(U);},convertToLocalUnits:function(X,W,V){var U;W=W||C;switch(parseInt(W,10)){case R.CM:U=(parseFloat(this.toString(X))*2.54).toFixed(4)+"";break;case R.MM:U=(parseFloat(this.toString(X))*25.4).toFixed(4)+"";break;case R.PT:U=(parseFloat(this.toString(X))*72).toFixed(4)+"";break;case R.PC:U=(parseFloat(this.toString(X))*6).toFixed(4)+"";break;case R.PX:U=(parseFloat(this.toString(X))*G)+"";break;default:U=parseFloat(this.toString(X)).toFixed(4)+"";}return V?U:this.toLocaleString(U);},convertUnits:function(V,W,U){return this.convertToLocalUnits(this.convertToUSUnits(U,V,true),W,true);},toLocaleString:function(U){return(U+"").replace(".",this.getDecimal());},toString:function(W,U){if(U===true){var V=this.getThousandSepRegex();if(V){W=String(W).replace(V,"");}}return String(W).replace(this.getDecimal(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(this.getThousand().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(W,V){var U=V;if(V=="."||V=="*"||V=="\\"){U="\\"+V;}return W.reverse().replace(/(\d{3})/g,"$1"+V).reverse().replace(new RegExp("^(-)?"+U),"$1");},addSeparators2:function(X,W){var U=X,V=/(\d+)(\d{3})/;while(V.test(U)){U=U.replace(V,"$1"+W+"$2");}return U;},format:function(Y,X,b,U){var a="",Z=(X>0)?".":"",V=[];b=(b)?b:"";for(var W=0;W<X;W++){V.push("0");}V=V.join("");switch(Y){case E.GENERAL:a="0.00";break;case E.PERCENT:a="0"+Z+V+"%";break;case E.SCIENTIFIC:a="0"+Z+V+"E+00";break;default:a='"'+b+'"#,##0'+Z+V;}return this.formatByMask(a,U);},getDecimalLength:function J(W){var U=W.indexOf("."),X=0;if(U!==-1){var V=W.substr(U+1,W.length).match(/\d+/);if(V&&V.length>0){X=V[0].length;}}return X;},formatByMask:function(AJ,Ab){var AD,p="",w,Ae=false;if(isNaN(Ab)){AD=new Date(Ab);if(isNaN(AD)){return Ab;}w=true;}if(AJ==="General"){var AO=String(parseFloat(Ab).toFixed(2));p=AO.split(".");if(p.length===2){return p.join(this.getDecimal());}return AO;}var u=String(AJ).split(";"),X=u[0],k="\u00A4",AU=/"[^"]*"/g,o=(AJ&&AJ.replace(AU,k).replace(/\[.*\]/g,k))||"",Aa=["m","y","d","h","s"],AP=false;F.forEach(Aa,function(j){AP=AP||o.indexOf(j,0)!==-1;});if(AP){if(window.SSF&&!Ae){p=this.formatBySSF(AJ,Ab);Ae=true;}if(p!==""){return p;}else{return H(w?AD:S(Ab),AJ,Ab);}}var AN=X.indexOf("E+"),e=X.indexOf("%"),AA=X.match(/\".+?\"/g),AG=X.match(/\[([=<>]*)(-?\d+\.?\d*)\]/),AB=X.indexOf("?/?")>-1,AH=(AN!=-1)?E.SCIENTIFIC:((e!=-1)?E.PERCENT:((AA&&!AG)?E.CURR:AB?E.FRACTION:E.FIXED)),t="",AW="",q=false,V=new String(Ab),d=parseFloat(Ab)||this.parseNumeric(Ab);if(AA){if(X.match(/\[\$.+?\]/g)){for(var f=0;f<AA.length;f++){X=X.replace(AA[f],AA[f].substring(1,AA[f].length-1));if(AA[f].match(/\[\$.+?\]/g)){AA[f]=AA[f].replace(/\[\$.+?\]/g,AA[f][AA[f].indexOf("[$")+2]);}}X=X.replace(/\[\$.+?\]/g,'"#"'.replace("#",X[X.indexOf("[$")+2]));}t=K(X,AA);t=t.replace(X.replace(/\".+?\"/g,""),k);}if(d<0){V=V.substring(1,V.length);d=-d;q=true;if(u.length>1){var a=u[1].replace(/\[.*\]/,"");AW=K(a.replace(u[0],k));}}var l=this,b=function(Ag,j){var Af=j&&j.replace(k,Ag);if(j&&(Af===j)&&window.SSF){if(Ae){return Ag;}else{Ae=true;return l.formatBySSF(j,Ag);}}return(j)?Af:"-"+Ag;};if(AH===E.FRACTION){var AS,AR,AZ,s=10,AC,z=0,AL,AV,Y,W=false,AI;if(AJ.indexOf("# ")>-1){W=true;}for(AS=5;AS>0;AS--){AI="/";for(AR=0;AR<AS;AR++){AI+="?";}if(AJ.indexOf(AI)>-1){for(AR=1;AR<AS;AR++){s*=10;}break;}}if(W){z=Math.floor(Number(d));d-=z;}AV=s/2;AZ=-1;AL=d*s;for(AS=s-1;AS>=2;AS--){Y=(AL*AS)/s;Y=Y-Math.floor(Y);Y=Y*s;if(Math.abs(Y-s)<Y){Y=Math.abs(Y-s);}Y=Y/AS;if(Y<AV){AV=Y;AZ=AS;}else{if((Y==AV)&&(Y==0)){AV=Y;AZ=AS;}}}AC=Math.round(AZ*AL/s);for(AS=AZ;AS>=2;AS--){if((AC%AS==0)&&(AZ%AS==0)){AC=AC/AS;AZ=AZ/AS;break;}}if(AZ==s){AZ=1;AC=0;}if(AC==0){AZ=1;}if(AC==AZ){if(W){p=""+(z+1);}else{p="1";}}else{if(W&&z>0){if(AC==0){p=z;}else{p=z+" "+AC+"/"+AZ;}}else{if(AC==0){p="0";}else{p=AC+"/"+AZ;}}}if(q){p=b(p,AW);}}else{if(AH==E.SCIENTIFIC){if(d!=0){var Ac=Math.floor(Math.log(d)/Math.LN10),AQ=d/Math.pow(10,Ac),Ad=X.substring(0,AN),h=Ad.indexOf("."),AK=X.length-X.indexOf("E+")-(""+Math.abs(Ac)).length-2,AS,U=Ac<0;Ac=Math.abs(Ac);for(AS=0;AS<AK;AS++){Ac="0"+Ac;}p+=Number(AQ).toFixed((h!=-1)?Ad.length-h-1:0);p=((q)?b(p,AW):p)+"E"+(U?"-":"+")+Ac;}else{p="0";}}else{if(AH==E.PERCENT){X=X.substring(0,X.length-1);V=String(d*100);}var h=X.indexOf("."),Z=0,AY,x=h>=0?X.substring(0,h):X,AE=h>=0?X.substring(h+1,X.length):"",g=false;if(x.match(/[#0\?],$/)){d/=1000;V=String(d);}else{if(AE.match(/^[#0]*,/)){var AF=0;g=true;while(AF<AE.length){if(AE[AF]==="0"||AE[AF]==="#"){AF++;}else{if(AE[AF]===","){d/=1000;V=String(d);AF++;}else{break;}}}}}AY=this.getDecimalLength(V);if(h!=-1){Z=N(AY,X.substr(h+1,X.length));}p=String((+(Math.round(+(V.indexOf("e")>0?String(parseFloat(V).toFixed(Math.min(Z+2,20))):V+"e"+Math.min(Z,20)))+"e"+-Math.min(Z,20))).toFixed(Math.min(Z,20)));if(AH===E.FIXED){if(/[\[\]><=A-Za-z]|,{2}/.test(X)&&window.SSF){var AT=this.formatBySSF(AJ,Ab);p=AT!==""?AT:p;Ae=true;}}var AX=p.split(".");var AM=X.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AM!==null){if(AH===E.CURR){AX[0]=(this.formatBySSF((g?AM[0]&&AM[0].trim():AM.input&&AM.input.trim()),parseFloat(AX[0]))||"").split(".")[0];Ae=true;}if(AX[0].indexOf(",")>=0){AX[0]=AX[0].replace(/,/g,this.getThousand());}else{if(!(this.getThousand()===","&&AX[0].search(this.getThousand())>0)){AX[0]=this.addSeparators2(AX[0],this.getThousand());}}}p=AX.join(this.getDecimal());if(AH==E.CURR){p=t.replace(k,p);if(p===t&&window.SSF){p=this.formatBySSF(AJ,Ab,p);Ae=true;}}if(AH==E.PERCENT){p+="%";}if(q){p=b(p,AW);}}}return p;},formatBySSF:function(W,V,X){var U=(X!==undefined&&X!==null)?X:"";if(typeof V==="string"){V=parseFloat(V);}try{U=window.SSF.format(W,V);}catch(Y){if(window.mstr_profile){window.mstr_profile.log(Y);}U=(X||V).toString();}return U;},validateFormat:function(U){var V=true,W=String(U).split(";");if(W[1]&&W[1].indexOf(W[0])<0){V=false;}return V;},generateUniqueID:function(U){var W="0123456789ABCDEF".split(""),X=[];for(var V=0;V<U;V++){X[V]=W[0|Math.random()*16];}return X.join("");},countOfDecimals:function(V,W){var U=String(V);return U.length-(U.indexOf(W!==undefined?W:this.getDecimal())+1);},getThousand:function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},getDecimal:function(){return mstrmojo.locales.number.DECIMALSEPARATOR;}});mstrmojo.num.UNIT=R;mstrmojo.num.UNIT_SYMBOL=A;})();(function(){mstrmojo.requiresCls("mstrmojo.locales");var Y=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function Z(d,h,b){var f=this.parseDate(d,b);var g=!!(f&&this.doesDateExist(f.month,f.day,f.year));if(h){if(g){var e=this.formatDateInfo(f,Y().DATEOUTPUTFORMAT);if(b){return{match:f.match,formatted:e};}return e;}return null;}return !!g;},formatDateInfo:function R(f,h){if(!h){return"";}var b=f.day,g=f.month,e=f.year;var d=h.replace(/dd/g,this.formatInteger(b,2)).replace(/d/g,Number(b)).replace(/yyyy/g,Number(e)).replace(/yy/g,this.formatInteger(Number(e)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,Y().MONTHNAME_FULL[Number(g)-1]).replace(/\~\~\~\~/g,Y().MONTHNAME_SHORT[Number(g)-1]).replace(/\@\@/g,this.formatInteger(g,2)).replace(/\^/g,Number(f.month));return d;},parseDate:function a(p,h,l){if(p==null){return false;}if(typeof p!=="string"){p=String(p);}p=L.trim(p);var b=this.CACHE.PARSEDATE[h?"CONTAINS":"EQUALS"],e=b[p];if(e||(e===null)){return e;}var d=null;var k;if(l){k=[l];}else{k=[].concat(Y().DATEINPUTFORMATS);k.unshift(Y().DATEOUTPUTFORMAT);}var f,g;for(f=0,g=k.length;f<g;f++){var j=this._buildRegExp4DateFormat(k[f]),o=j&&p.match(h?j.reContains:j.reEquals);if(o){d={match:o[0],year:j.yearIndex&&this.fourDigitYear(o[j.yearIndex]),day:j.dayIndex&&parseInt(Number(o[j.dayIndex]),10),month:j.monthIndex&&this.numericMonth(o[j.monthIndex])};break;}}b[p]=d;return d;},isTime:function I(d,g,b){var h=this.parseTime(d,b);var f=!!(h&&this.doesTimeExist(h.hour,h.min,h.sec));if(g){if(f){var e=this.formatTimeInfo(h,Y().TIMEOUTPUTFORMAT);if(b){return{match:h.match,formatted:e};}return e;}return null;}return !!f;},parseTime:function J(q,h,o){if(q==null){return false;}if(typeof q!=="string"){q=String(q);}q=L.trim(q);var b=this.CACHE.PARSETIME[h?"CONTAINS":"EQUALS"],e=b[q];if(e||(e===null)){return e;}var d=null;var l;if(o){l=[o];}else{l=[].concat(Y().TIMEINPUTFORMATS);l.unshift(Y().TIMEOUTPUTFORMAT);}var f,g;for(f=0,g=l.length;f<g;f++){var k=this._buildRegExp4TimeFormat(l[f]),p=k&&q.match(h?k.reContains:k.reEquals);if(p){var j=k.ampmIndex&&p[k.ampmIndex];d={match:p[0],hour:k.hourIndex&&this.capitalHour(p[k.hourIndex],j),min:k.minIndex&&parseInt(Number(p[k.minIndex]),10),sec:k.secIndex&&parseInt(Number(p[k.secIndex]),10)};break;}}b[q]=d;return d;},formatTimeInfo:function S(f,d){if(!d){return"";}var e=!(Number(f.hour)%12)?12:(Number(f.hour)%12),b=d.replace(/HH/g,this.formatInteger(f.hour,2)).replace(/H/g,Number(f.hour)).replace(/hh/g,this.formatInteger(e,2)).replace(/h/g,e).replace(/mm/g,this.formatInteger(Number(f.min)||0,2)).replace(/m/g,Number(f.min)||0).replace(/ss/g,this.formatInteger(Number(f.sec)||0,2)).replace(/s/g,Number(f.sec)||0).replace(/a/g,(Number(f.hour)<12)?Y().AM_NAME:Y().PM_NAME).replace(/tt/g,(Number(f.hour)<12)?Y().AM_NAME:Y().PM_NAME).replace(/AM\/PM/g,(Number(f.hour)<12)?Y().AM_NAME:Y().PM_NAME);return b;},doesTimeExist:function G(j,d,g){var f=parseInt(j,10);if(f>=0&&f<=23){var b=parseInt(d,10);if(b>=0&&b<=59){if(!g){return true;}var e=parseInt(g,10);if(e>=0&&e<=59){return true;}}}return false;},capitalHour:function C(b,d){b=parseInt(Number(b),10);if(d&&(d.match(Y().AM_NAME)||d.match(/AM/i))){return b%12;}if(d&&(d.match(Y().PM_NAME)||d.match(/PM/i))){return 12+(b%12);}return b;},getTimeStamp:function O(){var d=new Date();var b=[d.getMonth()+1,d.getDate(),d.getFullYear()];var g=[d.getHours(),d.getMinutes(),d.getSeconds()];var f=(g[0]<12)?"AM":"PM";g[0]=(g[0]<12)?g[0]:g[0]-12;g[0]=g[0]||12;for(var e=1;e<3;e++){if(g[e]<10){g[e]="0"+g[e];}}return b.join("-")+" "+g.join("")+" "+f;},isDateAndOrTime:function W(b,d){return this.isDateTime(b,d)||this.isDate(b,d)||this.isTime(b,d);},isDateTime:function B(o,b){var g=this.parseDateAndOrTime(o),k=g&&g.date,f=g&&g.time,j=!!k&&!!f&&this.doesDateExist(k.month,k.day,k.year)&&this.doesTimeExist(f.hour,f.min,f.sec);if(b){if(j){var d=this.formatDateInfo(k,Y().DATEOUTPUTFORMAT),e=this.formatTimeInfo(f,Y().TIMEOUTPUTFORMAT),l=o.indexOf(k.match),h=o.indexOf(f.match);return(h<l)?e+" "+d:d+" "+e;}return null;}return !!j;},parseDateAndOrTime:function Q(d,b,h){var e=this.parseDate(d,true,b);var f=L.trim((e&&e.match)?d.replace(e.match,""):d),g=this.parseTime(f,false,h);if(!e&&!g){return null;}return{date:e,time:g};},inDateTimeRange:function P(e,g,k){var d=this.parseDateAndOrTime(e),h=d&&d.date,l=d&&d.time;if(!h&&!l){return 0;}if(g!=null){var f=this.parseDateAndOrTime(g);if(h&&f&&f.date){var o=this.compareDate(h,f.date);if(o<0){return -1;}if(o==0){if(l&&f.time&&(this.compareTime(l,f.time)<0)){return -1;}}}}if(k!=null){var b=this.parseDateAndOrTime(k);if(h&&b&&b.date){var j=this.compareDate(h,b.date);if(j>0){return 1;}if(j==0){if(l&&b.time&&(this.compareTime(l,b.time)>0)){return 1;}}}}return 0;},compareDate:function A(e,b){if(e===b){return 0;}var f=typeof e==="string"?this.parseDate(e):e,d=typeof b==="string"?this.parseDate(b):b;if(!f){return -1;}if(!d){return 1;}return(f.year-d.year)||(f.month-d.month)||(f.day-d.day)||0;},compareTime:function K(d,b){if(d===b){return 0;}var f=typeof d==="string"?this.parseTime(d):d,e=typeof b==="string"?this.parseTime(b):b;if(!f){return -1;}if(!e){return 1;}return(f.hour-e.hour)||(f.min-e.min)||(f.sec-e.sec)||0;},compareDateTime:function V(d,b){return this.compareDate(d,b)||this.compareTime(d,b);},compareDateAndOrTime:function E(k,h){if(k===h){return 0;}var d=typeof k==="string"?this.parseDateAndOrTime(k):k,b=typeof h==="string"?this.parseDateAndOrTime(h):h;if(!d){return -1;}if(!b){return 1;}var j=d.date,g=b.date,f=d.time,e=b.time;return this.compareDate(j,g)||this.compareTime(f,e);},_buildRegExp4DateFormat:function N(e){if(!e){return null;}var g=this.REGEXPS.DATES[e];if(!g){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=Y().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=Y().MONTHNAME_SHORT.join("|");}g=this.REGEXPS.DATES[e]={};g.formatStr=e;var d=g.reStr=e.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");g.reEquals=new RegExp("^"+d+"$");g.reContains=new RegExp("^"+d+"\\b");var h=[{key:"monthIndex",index:e.indexOf("M")},{key:"dayIndex",index:e.indexOf("d")},{key:"yearIndex",index:e.indexOf("y")}];h.sort(function(k,j){return k.index-j.index;});var b=1,f;for(f=0;f<3;f++){g[h[f].key]=h[f].index>-1?b++:null;}}return g;},_buildRegExp4TimeFormat:function F(f){if(!f){return null;}var h=this.REGEXPS.TIMES[f];if(!h){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[Y().AM_NAME,Y().PM_NAME,String(Y().AM_NAME).toLowerCase(),String(Y().PM_NAME).toLowerCase()].join("|");}h=this.REGEXPS.TIMES[f]={};h.formatStr=f;var e=f.replace(/\'\'/g,'"');var j=e.match(/\'(.+?)\'/g);e.replace(/\'(.+?)\'/g,"*");e=e.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var g,b;for(g=1,b=(j&&j.length)||0;g<b;g++){e=e.replace(/\*/,j[g]);}e=e.replace(/\"/g,"'");h.reEquals=new RegExp("^"+e+"$");h.reContains=new RegExp(e);var k=[{key:"hourIndex",index:f.search(/h|H/)},{key:"minIndex",index:f.indexOf("m")},{key:"secIndex",index:f.indexOf("s")},{key:"ampmIndex",index:f.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:f.search(/z|Z/)}];k.sort(function(o,l){return o.index-l.index;});var d=1;for(g=0;g<5;g++){h[k[g].key]=k[g].index>-1?d++:null;}}return h;},doesDateExist:function M(f,b,d){var e=new Date(d,f-1,b);return d==e.getFullYear()&&f==e.getMonth()+1&&b==e.getDate();},fourDigitYear:function U(d){d=parseInt(Number(d),10);if(!isNaN(d)){var b=(Y().TWODIGITYEARSTART%100)||0;if(d>=0&&d<=b){d=2000+d;}else{if(d>b&&d<100){d=1900+d;}}}return d;},numericMonth:function X(g){var f=parseInt(Number(g),10),e=mstrmojo.array;if(!isNaN(f)){return f;}var b=(g&&g.length)||0,d=-1;if(b){if(b<=3){d=e.indexOf(Y().MONTHNAME_SHORT,g);}if(d===-1){d=e.indexOf(Y().MONTHNAME_FULL,g);}}return d+1;},formatInteger:function H(e,d){var h=String(e),g=Math.max(d-h.length,0);if(g>0){var b=[h],f;for(f=1;f<=g;f++){b.push("0");}h=b.reverse().join("");}return h;},getFirstDateOfMonth:function(d,b){return new Date(d,b-1,1);},getDateObject:function(j,b,h,f,g,e){j=j||0;b=b||1;h=h||1;f=f||0;g=g||0;e=e||0;return new Date(j,b-1,h,f,g,e);},getDateFromDateInfo:function(b){return this.getDateObject(b.date&&b.date.year,b.date&&b.date.month,b.date&&b.date.day,b.time&&b.time.hour,b.time&&b.time.min,b.time&&b.time.sec);},getDateJson:function(b){return{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),hour:b.getHours(),min:b.getMinutes(),sec:b.getSeconds()};},isLeapYear:function(b){return !(b%400)||(!(b%4)&&!!(b%100));},getDaysOfMonth:function(e,b){var d=[31,28,31,30,31,30,31,31,30,31,30,31];if(b==2&&this.isLeapYear(e)){return 29;}return d[b-1];},getPreMonth:function(d,b){if(b===1){return{y:d-1,m:12};}return{y:d,m:b-1};},getNextMonth:function(d,b){if(b===12){return{y:d+1,m:1};}return{y:d,m:b+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var M=mstrmojo.string,L=mstrmojo.hash,E=mstrmojo.dom;var R=mstrmojo.usesFrames?null:document.createElement("span");var J=/mstrAttach:([\w,]+)/g;var Q;function V(b,d){if(Q===undefined){Q=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return b.replace(J,function a(k,o){var g=o.split(","),h=[],f=g.length,j;for(j=0;j<f;j++){var l=g[j];if(l){if(Q){if(l.indexOf("mouse")>-1){continue;}else{if(l==="click"){l="touchend";}}}h.push("on"+l+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+l+"', self, event)\"");}}return h.join(" ");});}var N="preBuildRendering",C="buildRendering",B="postBuildRendering";function Y(e){var b=e.markupString;if(b.match(/mstrAttach:/)){b=V(b,e);if(e.markupString===e.constructor.prototype.markupString){e.constructor.prototype.markupString=b;}}var a=M.apply(b,e);if(a){if(a.indexOf("oncontextmenu")>-1){e.hasContextMenuEvent=true;}if(mstrmojo.usesFrames){var f=(e.domNode&&e.domNode.ownerDocument)||window.document;if(!R||R.ownerDocument!==f){R=f.createElement("span");}}R.innerHTML=a;var g=R.removeChild(R.firstChild);g.mstrmojoId=e.id;return g;}return null;}function A(d){var b=d.markupSlots,a,e;if(b){a={};for(e in b){a[e]=b[e].call(d);}}return a;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function Z(){if((this[N]&&this[N]()===false)||(this[C]()===false)||(this[B]&&this[B]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var a="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,a)){this.raiseEvent({name:a});}return true;},buildDom:function U(){return Y(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function F(){var a=this.domNode,b=this.buildDom();this.domNode=b;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(A(this));this.paint();if(b){var f=a;if(!f){f=this.placeholder;if(f){if(typeof f==="string"){f=document.getElementById(f);}delete this.placeholder;}}if(f){E.replace(f,b);}}var d="onchildRenderingChange",e=this.parent;if(e&&e[d]){e[d](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function S(d){if(this.hasRendered){if(!d){try{var a=this.domNode;if(a.parentNode){a.parentNode.removeChild(a);}if(mstrmojo.dom.isIE&&a.outerHTML!=="undefined"){a.outerHTML="";}}catch(b){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var b=this.markupMethods;if(!b){return ;}var f=this,g=function(l){var k=b[l];if(k){try{k.apply(f,[true]);}catch(j){throw new Error(["Error in markup method.","Script class: "+f.scriptClass,"Widget id: "+f.id,"Method name: "+l,"Err: "+j.message].join("\n\n"));}}};var e=b.sequence,a,d,h;if(e){a=e.length||0;for(d=0;d<a;d++){g(e[d]);}}else{for(h in b){g(h);}}},redraw:function P(){return false;},refresh:function D(a){if(this.hasRendered){if(this.redraw()!==true){var b=this.domNode;this.unrender(true);this.placeholder=b;if(a){a();}this.render();}}},set:function I(e,a){this._super(e,a);if(this.domNode){var b=this.markupMethods,d=b&&b["on"+e+"Change"];if(d){d.apply(this);}}return this;},slotNames:null,addSlots:function G(b){var a=this.slotNames,d;if(!a){a={};this.slotNames=a;}for(d in b){this[d]=b[d];a[d]=true;}},removeSlots:function H(a){if(a){var b=this.slotNames,d;for(d in a){delete this[d];if(b){delete b[d];}}}},captureDomEvent:function X(d,a,f,b){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(d,a,f||a.event,b));}},playEffect:function W(b){var a=this[b];if(a&&a.constructor===Object){a=mstrmojo.insert(mstrmojo.hash.clone(a));a.widget=this;this[b]=a;}if(a){a.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function O(b,a){b.prototype.markupMethods=L.copy(a,L.copy(b.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(e,a,d,b){return{name:e,hWin:a,e:d,config:b,ctrlKey:E.ctrlKey(a,d),shiftKey:E.shiftKey(a,d),metaKey:E.isMetaKey(a,d),cancel:function(){E.stopPropogation(a,d);},preventDefault:function(){E.preventDefault(a,d);},getTarget:function(){return E.eventTarget(a,d);}};};}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.StringBuffer");mstrmojo._XMLNode=mstrmojo.declare(null,null,{nodeName:null,init:function N(O){mstrmojo.hash.copy(O,this);},addChild:function F(P){var O=new mstrmojo._XMLNode({nodeName:P});return this.appendNode(O);},appendNode:function J(O){if(O){if(!this.children){this.children=[];}this.children.push(O);O.parent=this;}return O;},addAttribute:function L(O,P){if(O!=null){if(!this.attributes){this.attributes={};}this.attributes[O]=P;}return this;},addText:function M(O){this._addToStringMember("text",O);return this;},addRawXML:function K(O){this._addToStringMember("rawXML",O);return this;},getXMLString:function I(){var O=new mstrmojo.StringBuffer();this.buildXMLString(O);return O.toString();},buildXMLString:function E(O){O=O||new mstrmojo.StringBuffer();O.append("<").append(this.nodeName).append(" ");this._buildAttributesXMLString(O).append(">").append(((this.text!=null)?this._escapeString(this.text):"")).append(((this.rawXML!=null)?this.rawXML:""));this._buildChildrenXMLString(O).append("</").append(this.nodeName).append(">");return O;},_buildAttributesXMLString:function D(O){var Q=this.attributes;if(Q){var R;for(R in Q){if(Q[R]!=null){var P=String(Q[R]);switch(R){case"et":case"nt":case"dmt":case"ddt":case"fnt":case"tp":case"stp":break;default:P=this._escapeString(P);}O.append(R+'="'+P+'" ');}}}return O;},_escapeString:function C(O){return mstrmojo.string.escape4HTMLText(O);},_buildChildrenXMLString:function H(P){var R=this.children;var O=R&&R.length;if(O){var Q;for(Q=0;Q<O;Q++){if(R[Q]&&R[Q].buildXMLString){R[Q].buildXMLString(P);}}}return P;},_addToStringMember:function A(O,Q){var P=this[O];if(P==null){this[O]=Q;}else{this[O]=P+Q;}}});mstrmojo.XMLBuilder=mstrmojo.declare(null,null,{root:null,curNode:null,addChild:function F(O){if(!this.root){this.currentNode=this.root=new mstrmojo._XMLNode({nodeName:O});}else{this.currentNode=this.currentNode.addChild(O);}return this;},appendNode:function J(O){if(!this.root){this.currentNode=this.root=O;}else{this.currentNode=this.currentNode.appendNode(O);}return this;},addAttribute:function L(O,P){if(this.currentNode){this.currentNode.addAttribute(O,P);}else{alert("no root node");}return this;},addText:function M(O){if(this.currentNode){this.currentNode.addText(O);}else{alert("no root node");}return this;},addRawXML:function K(O){if(this.currentNode){this.currentNode.addRawXML(O);}else{alert("no root node");}return this;},closeElement:function G(){this.currentNode=this.currentNode.parent;return this;},toString:function B(){if(this.root){return this.root.getXMLString();}return"";}});}());(function(){mstrmojo.requiresCls("mstrmojo.base64","mstrmojo.func","mstrmojo.hash","mstrmojo.string","mstrmojo.dom");mstrmojo.XhrCallbackType=null;function decodeHeader(value){var rEncoded=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(value&&value.indexOf("=?UTF-8?B?")===0){var decMsg="",result;while((result=rEncoded.exec(value))!==null){decMsg+=mstrmojo.base64.decode(result[1]);}return decMsg;}return value;}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function sendXhr(xhr,method,baseUrl,params){method=method.toUpperCase();var app=mstrApp,m=window.microstrategy;if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);params.taskContentType=params.taskContentType||"json";params.taskEnv=params.taskEnv||"xhr";params.xts=new Date().getTime();params[mstrApp.name]=mstrApp.servletState||mstrConfig.servletState||"";baseUrl=baseUrl||mstrConfig.taskURL;}var ptp=app.persistTaskParams||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}xhr.open(method,appendUrlParams(method,baseUrl,params),this.async);var headers=params.xhrHeaders;if(headers){for(var hdr in headers){xhr.setRequestHeader(hdr,headers[hdr]);}delete params.xhrHeaders;}if(method!=="POST"){xhr.send(null);}else{xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.send(encodeParams(params));}if(this.async===false){xhr.onreadystatechange();}}function createXhr(){var methods=[function(){var res=new XMLHttpRequest();var foo=res.open;res.open=function(){foo.apply(res,arguments);};return res;},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}],cnt=methods.length,i;for(i=0;i<cnt;i++){var xhr;try{xhr=methods[i]();}catch(e){continue;}createXhr=methods[i];return xhr;}throw new Error("mstrmojo.SimpleXHR: Could not create an XHR object.");}function evalResponse(rt){var rtn=null;try{try{rtn=JSON.parse(rt);}catch(ex){rtn=eval("("+rt+")");}}catch(ex){rtn=rt&&mstrmojo.string.trim(rt);}return rtn;}var MSI_SERVER_NAME_NOT_INITIALIZED=2147760371,MSI_INVALID_SESSION_ID=2147760372,E_MSI_USERMGR_USER_NOTFOUND=2147758245,E_MSI_CONNECT_FAILED=2147759877;function isSessionExpiredError(res){if(res.status===401){return true;}var c=res&&res.getResponseHeader("X-MSTR-TaskErrorCode");c=(c<0)?(4294967296+parseInt(c,10)):c;switch(c){case MSI_SERVER_NAME_NOT_INITIALIZED:case MSI_INVALID_SESSION_ID:case E_MSI_USERMGR_USER_NOTFOUND:case E_MSI_CONNECT_FAILED:return true;}return false;}function xhrSupportsProgress(xhr){return !mstrmojo.dom.isSafari&&!!(xhr&&xhr.upload&&xhr.upload.onprogress);}mstrmojo.SimpleXHR=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.SimpleXHR",isTask:true,async:true,init:function init(props){mstrmojo.hash.copy(props,this);},onreadystatechange:function onreadystatechange(xhr,callback,prevRequest){if(xhr.readyState!==4){return ;}if(typeof callback!=="object"){return ;}try{if((xhr.status===200)||(xhr.status===304)){this.response=callback.textResponse?xhr.responseText:evalResponse(xhr.responseText);if(typeof callback.success==="function"){callback.success(this.response,xhr);}}else{if(xhr.status!==0||(!xhr.isAborted&&prevRequest.params.displayNoResErr)){var app=mstrApp,sessionExp=app&&app.onSessionExpired;if(sessionExp&&isSessionExpiredError(xhr)){sessionExp.call(app,prevRequest);}else{var orig=xhr.getResponseHeader;xhr.getResponseHeader=function(name){return decodeHeader(orig.apply?orig.apply(xhr,[name]):orig(name));};if(typeof callback.failure==="function"){callback.failure(xhr);}}}}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(typeof callback.complete==="function"){callback.complete();}if(!isSessionExpiredError(xhr)&&!prevRequest.params.notRestartSessionManager){var sm=mstrApp.sessionManager;if(sm&&sm.restart){sm.restart();}}}},cancel:function(){var didCancel=false;var xhr=this.xhr;if(xhr){delete xhr.onreadystatechange;xhr.isAborted=true;if(xhr.readyState<4){xhr.abort();didCancel=true;}this.xhr=null;}return didCancel;},request:function request(method,baseUrl,callback,params,webSvrUrl,useResFeed,webSrvParams){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("POST",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{var xhr=createXhr();xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(this,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=(function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback));}this.xhr=xhr;sendXhr.call(this,xhr,method,baseUrl,params);}}});mstrmojo.QueuedXHR=mstrmojo.declare(mstrmojo.SimpleXHR,null,{scriptClass:"mstrmojo.QueuedXHR",queue:null,requestCount:0,retryDelay:1,lookup:null,cancel:function cancel(){var didCancel=this._super();while(this.queue.length){var x=this.queue.pop();var cb=x.callback;if(cb&&cb.complete){cb.complete();}}this.queue=[];this.requestCount--;return didCancel;},init:function init(){this.queue=[];this.lookup=[];},request:function request(method,baseUrl,callback,params,override,webSvrUrl,useResFeed,webSrvParams,useCache){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("POST",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{if(this.requestCount>0&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();callback=mstrmojo.func.wrapMethods(callback,{complete:(function(ths){return function(){ths.advanceQueue();};}(this)),success:(function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this))});xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(this,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=(function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback));}sendXhr.call(this,xhr,method,baseUrl,params);}}}},upload:function upload(method,baseUrl,callback,params,data,config,override,webSrvParams,useCache){if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);}if(this.requestCount>0&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params,data:data,config:config});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();var self=this;callback=mstrmojo.func.wrapMethods(callback,{complete:(function(ths){return function(){ths.advanceQueue.call(ths);};}(this)),success:(function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this))});var handleProgress=function(event){callback.progress(event,config);};var url=baseUrl;var async=!!(config&&config.async);xhr.open("POST",url,async);if(config&&config.authToken){xhr.setRequestHeader("X-MSTR-AuthToken",config.authToken);if("projectId" in params){xhr.setRequestHeader("X-MSTR-ProjectId",params.projectId);}}var formData=new FormData();var a;for(a in params){formData.append(a,params[a]);}if(data){if(params.fileName){formData.append(params.fileFieldName?params.fileFieldName:"myFile",data,params.fileName);}else{formData.append(params.fileFieldName?params.fileFieldName:"myFile",data);}}if(xhrSupportsProgress(xhr)&&callback.progress){xhr.upload.onprogress=handleProgress;}xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(self,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));xhr.send(formData);}}},advanceQueue:function advanceQueue(){this.requestCount--;if(this.queue.length===0){this.requestCount=0;return ;}var req=this.queue.shift();if(req.params.taskId==="importFile"||req.params.taskId==="arch.sparkFileUpload"){this.upload(req.method,req.baseUrl,req.callback,req.params,req.data,req.config);}else{this.request(req.method,req.baseUrl,req.callback,req.params,true);}},_searchForCacheRequest:function _searchForCacheRequest(params){var i;for(i in this.lookup){if(mstrmojo.hash.equals(params,this.lookup[i].params)){return this.lookup[i];}}return null;},hasRequests:function hasRequests(){return this.requestCount>0||mstrmojo.jsonp.hasRequests();}});mstrmojo.xhr=new mstrmojo.QueuedXHR();mstrmojo.jsonp={jsc:new Date().getTime(),timeToWait:20000,requestCount:0,request:function(url,params,callback){var head=document.getElementsByTagName("head")[0]||document.documentElement,jsonp="jsonp"+(this.jsc++),script=document.createElement("script");params.jsonp=jsonp+"(@R@);";params.taskContentType="jsonp";params.taskEnv="jsonp";params.xts=new Date().getTime();window[jsonp]=function(response){mstrmojo.jsonp.requestCount--;if(!response){if(callback.timeout){callback.timeout();}}else{if(response.status===200){callback.success(response.content);}else{var res={status:response.status,getResponseHeader:function(name){switch(name){case"X-MSTR-TaskFailureMsg":return response.errorMsg;case"X-MSTR-TaskErrorCode":return response.errorCode;}}};if(mstrApp.onSessionExpired&&isSessionExpiredError(res)){if(callback.onSessionExpired){callback.onSessionExpired();}else{mstrApp.onSessionExpired();}}else{callback.failure(res);}}}if(window[jsonp]){if(callback.complete){callback.complete();}window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}head.removeChild(script);}};head.insertBefore(script,head.firstChild);this.requestCount++;script.src=appendUrlParams("GET",url,params);setTimeout(function(){var fn=window[jsonp];if(fn){fn();}},this.timeToWait);},hasRequests:function(){return this.requestCount>0;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var X=mstrmojo.dom,L=mstrmojo.string,b=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:X.isNSIE?"block":"table",DISPLAY_CELL:X.isNSIE?"block":"table-cell",MINHEIGHT:X.isIE6?"height":"minHeight",addClass:function M(j,h){if(j){if(h.constructor!==Array){h=[h];}var e=j.className||"",l=" "+e+" ",f=false,d=h.length,g;for(g=0;g<d;g++){var k=h[g];if(!l.match(new RegExp("\\s"+k+"\\s"))){e+=" "+k;f=true;}}if(f){j.className=L.trim(e);}}return j;},removeClass:function O(h,g){if(!h){return ;}if(g.constructor!==Array){g=[g];}var e=" "+(h.className||"")+" ",d=g.length,f;for(f=0;f<d;f++){e=e.replace(new RegExp("\\s"+g[f]+"\\s","g")," ");}h.className=L.trim(e);},addWidgetCssClass:function N(j,g){var e=j.cssClass,h=(e&&e.split(" "))||[],f;g=[].concat(g);for(f=0;f<g.length;f++){var d=g[f];if(b.indexOf(h,d)===-1){h.push(d);}}j.cssClass=h.join(" ");},removeWidgetCssClass:function G(k,h){var e=k.cssClass,j=(e&&e.split(" "))||[],g;h=[].concat(h);for(g=0;g<h.length;g++){var d=h[g];var f=b.indexOf(j,d);if(f!==-1){j.splice(f,1);}}k.cssClass=j.join(" ");},toggleClass:function W(f,e,d){if(d){this.addClass(f,e);}else{this.removeClass(f,e);}},hasClass:function A(e,f){if(e){var d=" "+(e.className||"")+" ";return !!d.match(new RegExp("\\s"+f+"\\s"));}return false;},applyShadow:function H(h,j,g,f,d){var e=h.style;if(X.isDXIE){e.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+j+"px, OffY="+g+"px, Color='"+d+"')";}else{if(X.isFF||X.isWK||X.isIE10){e[X.CSS3_BOXSHADOW]=j+"px "+g+"px "+f+"px "+d;}}},removeShadow:function C(e){var d=e.style;if(X.isFF||X.isWK||X.isIE10){d[X.CSS3_BOXSHADOW]="";}},setOpacity:function Y(e,g){if(X.isDXIE&&!X.isIE9){var h=e.currentStyle.filter;var d=null;if(h.length>0){d=e.filters["DXImageTransform.Microsoft.Alpha"];}if(d){d.opacity=g;d.enabled=(g!==100);}else{if(g<100){var f="progid:DXImageTransform.Microsoft.Alpha(Opacity="+g+")";e.style.filter=(h||"")+" "+f;}}}else{e.style.opacity=g/100-(X.isIE9?0.00001:0);}},buildGradient:function P(e,g,d){if(X.supports(X.cssFeatures.GRADIENTS)){var f={};if(X.isDXIE){f.n="filter";f.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+e+",StartColorStr='"+g+"',EndColorStr='"+d+"')";}else{if(X.isFF){f.n="background-image";f.v="-moz-linear-gradient("+((e===0)?"top":"left")+","+g+","+d+")";}else{if(X.isWK){f.n="background";f.v="-webkit-gradient(linear,"+((e===0)?"left top, left bottom":"left top, right top")+",from("+g+"),to("+d+"))";}else{if(X.isIE10||X.isIEW3C){f.n="background";f.v="linear-gradient("+((e===0)?"to bottom":"to right")+","+g+","+d+")";}}}}return f;}return null;},buildRoundCorners:function R(j,h){if(X.supports(X.cssFeatures.ROUND_CORNERS)){var e=j+"px";var l=e+(h?" "+e+" 0 0":"")+";";if(X.isFF||X.isWinPhone||X.isIE10){return"border-radius:"+l;}if(X.isWK){if(!h){return"-webkit-border-radius:"+e+";";}var k=["left","right"],g=[],d=-1,f;for(f=0;f<2;f++){g[++d]="-webkit-border-top-"+k[f]+"-radius:"+e;g[++d]="-webkit-border-bottom-"+k[f]+"-radius:0";}return g.join(";");}}return"";},getBorderWidthsOrPaddings:function E(e,h){var j={t:0,r:0,b:0,l:0,h:0,w:0};if(!e){return j;}var f=e.split(" "),d=f.length,g;for(g=0;g<d;g++){f[g]=Math.round(h*parseFloat(f[g])/72);}if(d<4){if(d===1){f[1]=f[2]=f[3]=f[0];}else{f[3]=f[1];if(d===2){f[2]=f[0];}}}j.t=f[0];j.r=f[1];j.b=f[2];j.l=f[3];j.h=j.t+j.b;j.w=j.l+j.r;return j;},getBorderWidths:function I(e,d){return this.getBorderWidthsOrPaddings(e,d);},getPaddings:function D(e,d){return this.getBorderWidthsOrPaddings(e,d);},parkAfterFade:function B(d){var e=d.target.style;if(e.opacity===0){e.left="-10000px";window.setTimeout(function(){e.opacity=0.99;},0);return true;}return false;},getStyleValue:function J(d,h){var f=(h==="float"),g;if(d.currentStyle){h=f?"styleFloat":h;g=d.currentStyle[h];}else{if(document.defaultView&&document.defaultView.getComputedStyle){h=f?"cssFloat":h;var e=document.defaultView.getComputedStyle(d,null);g=e?e[h]:null;}}return g;},getComputedStyle:function V(d,f){var e=(window.getComputedStyle)?function(g,h){return window.getComputedStyle(g,h||null);}:function(g){return g.currentStyle||{};};mstrmojo.css.getComputedStyle=e;return e(d,f);},getCssTextFromObj:function F(f){var e="",d;for(d in f){e+=d+":"+f[d]+";";}return e;},onTransitionEnd:function a(f,d){var e="transition",g=window.Modernizr;if(g.testProp(e)){X.attachOneTimeEvent(f,X.transEndEvtNames[g.prefixed(e)],d);}else{window.setTimeout(d,0);}},onAnimationEnd:function U(f,d){var e="animation",g=window.Modernizr;if(g.testProp(e)){X.attachEvent(f,X.animationEndEvtNames[g.prefixed(e)],d);}else{window.setTimeout(d,0);}},flashClass:function Q(e,d,g){this.toggleClass(e,d,true);var f=this;window.setTimeout(function(){f.toggleClass(e,d,false);},g);},convertCssToCamelCase:function K(d){return d.replace(/\-([a-z])/gi,function(e,f){return f.toUpperCase();});},printCSSInfo:function Z(h){var p=document.styleSheets,t=p.length,k,l;for(l=0;l<t;l++){var o=p[l],q=o.cssRules,f=q?q.length:0,s=0;for(k=0;k<f;k++){var d=q[k].selectorText;if(d){try{s+=d.split(",").length;}catch(g){}}}var e=o.href;if(!h||(e&&e.indexOf(h)>-1)){console.log("Stylesheet: "+e||"Inline CSS Block");console.log("Total rules: "+f);console.log("Total selectors: "+s);}}},cssEscape:function S(k){if(arguments.length===0){throw new TypeError("`CSS.escape` requires an argument.");}var g=String(k),j=g.length,f=-1,h,d="",e=g.charCodeAt(0);while(++f<j){h=g.charCodeAt(f);if(h==0){d+="\uFFFD";continue;}if((h>=1&&h<=31)||h==127||(f==0&&h>=48&&h<=57)||(f==1&&h>=48&&h<=57&&e==45)){d+="\\"+h.toString(16)+" ";continue;}if(f==0&&j==1&&h==45){d+="\\"+g.charAt(f);continue;}if(h>=128||h==45||h==95||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122){d+=g.charAt(f);continue;}d+="\\"+g.charAt(f);}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.vi.enums.EnumFilterClearActionType","mstrmojo.vi.enums.EnumVisFilterType");var D=mstrmojo.array,M=mstrmojo.string,H=mstrmojo.vi.enums.EnumFilterClearActionType,J=mstrmojo.vi.enums.EnumVisFilterType;mstrmojo.vi.ui.rw._SupportViewFilterInVizBox=mstrmojo.provide("mstrmojo.vi.ui.rw._SupportViewFilterInVizBox",{_mixinName:"mstrmojo.vi.ui.rw._SupportViewFilterInVizBox",getSelectorObjectsFromTemplateLimit:function N(){return this.getSelObjsFromTemlateLimitHandler();},getSelectorObjectsFromViewFilter:function B(){return this.getSelObjsFromVFHandler();},getSelObjsFromVFHandler:function F(){var R=this,P=R.model,Q=R.node.data,S=Q&&Q.vfexpr;return P&&P.getSelectorDataFromViewFilter(S);},getSelObjsFromTemlateLimitHandler:function K(){var R=this,P=R.model,Q=R.node.data,S=Q&&Q.tpl;return P&&P.getSelectorDataFromTemplateLimit(S);},makeBold:function C(P){return"<span style='font-weight:bold;'>"+P+"</span>";},getSelectorExpr:function I(U,S){var V=[],W="",R=true,Q=U.keepOnly?"##":mstrmojo.desc(13232,"Not ##"),P,X=mstrmojo.desc(5283,"OR");if(S){X=this.makeBold(X);}U.data.every(function(Y){[].concat(Y).every(function(Z){if(W===""){W=Z.tn;}return(R=(W===Z.tn));});return R;});U.data.forEach(function(a,Y){if(Y>0){V.push(X);}var Z=[];[].concat(a).forEach(function(e){var d=S?M.encodeHtmlString(e.v):e.v,b=S?M.encodeHtmlString(e.tn):e.tn;Z.push((R?"":(e.tn+" = "))+(d||mstrmojo.desc(14323,"NULL")));});V.push(Z.join(" "));});if(V.length>0){P=Q.replace("##",(R?W+" = ":"")+V.join(" "));}return P;},getLinkingSelectorExpr:function O(S,R){var U=[],V="",Q=true,W=mstrmojo.desc(5283,"OR"),P=S.keepOnly?"##":mstrmojo.desc(13232,"Not ##");if(R){W=this.makeBold(W);}S.data.every(function(X){[].concat(X).every(function(Y){if(V===""){V=Y.tn;}return(Q=(V===Y.tn));});return Q;});S.data.forEach(function(Z,X){var Y=[];if(Q){if(X>0){Y.push(W);}else{Y.push(P.replace("##",V+" = "));}}[].concat(Z).forEach(function(d){var b=R?M.encodeHtmlString(d.v):d.v,a=R?M.encodeHtmlString(d.tn):d.tn;Y.push((Q?"":(a+" = "))+(b||mstrmojo.desc(14323,"NULL")));});U.push(Y.join(" "));});return U.join(" ");},getFilterMenuPairs:function G(P){var R=this,S=[],Q=mstrmojo.desc(2827,"Clear");if(P instanceof Array){P.forEach(function(X,W){var V=R.getSelectorExpr(X),U=R.getSelectorExpr(X,true);S.push({menuString:Q+' "'+V+'"',menuTtpString:Q+' "'+U+'"',ctxt:W});});}return S;},filterMenuHandler:function L(P,S){var R=this,Q=R.controller;switch(P.type){case H.CLEAR_KEEP_ONLY:P=P.idx;Q.applyKeepOnly(R,S,undefined,P,false);break;case H.CLEAR_ALL:Q.clearFiltersForVis(R,[J.KEEP_ONLY,J.LINKING,J.DRILLING],S);break;case H.CLEAR_ADV_QUALIFICATION:Q.clearFiltersForVis(R,[J.ADV_QUALIFICATION],S);break;case H.CLEAR_KEEP_ONLY_AND_LINKING:Q.clearFiltersForVis(R,[J.KEEP_ONLY,J.LINKING],S);break;case H.CLEAR_LINKING:Q.clearLinkingFilter(P,S);break;case H.CLEAR_DRILLING:Q.clearFiltersForVis(R,[J.DRILLING],S);break;default:break;}},hasKeepOnly:function E(P){return P===null||P.length>0;},getSelectorDataForKeepOnly:function A(Q,V){var S=this,R=S.model,U=S.model.data||S.node.data,P=U.tpl,W;if(V===-1){W=[];}else{W=[].concat(R.getSelectorDataFromTemplateLimit(P));if(V===-2){W=D.filter(W,function(X){return !X.keepOnly;});}else{if(V>=0){W.splice(V,1);}}}if(Q){W=W.concat(Q);}return W;}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(U,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var V=G(U,Q[R]);if(!V){continue;}S.push(V);L(U,V);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var U=R[Q];if(U&&U.destroy){U.destroy(S);if(!S){N(this,U);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(V,Q,R){if(!V){return V;}var U=V.constructor===Array,P=A(this,U?V:[V]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return U?P:(P&&P[0]);},removeChildren:function J(W,R){var U=this.children,V=W?[W]:(this.children||[]).concat(),Q=V.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,V[S]);}if(W){P=K.removeItem(U,W);}else{if(U){U.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:V,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;this.preHandleEvent(H);var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){this.postHandleEvent(H);C.publish(this.id,M,H);}return H;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var E=mstrmojo.dom,Q=mstrmojo.css,B=mstrmojo.string,I="selected",L="hidden";function P(W,X,Y,V,a){var Z=a.listHooks[W];if(Z&&Z.call(a,X,Y,V)){return ;}Q.toggleClass(X,I,W==="select");}function G(Y,X,W){var Z=this[Y],V=Z?Z.split(X):[];this[Y]=mstrmojo.array.distinct(V.concat(W.split(X))).join(X);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function N(V){this._super(V);this._shiftStartIndex=-1;},getItemMarkup:function D(W,V){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function M(V){return V.n||"";},getItemProps:function R(Z,V){var W=!!this.selectedIndices[V],a={tag:"div",sel:W,cls:"",n:this.getItemDisplayName(Z),style:"",idx:V,addCls:function X(d){G.call(this,"cls"," ",d);},addStyle:function Y(d){G.call(this,"style",";",d);},title:Z.title||""};if(a.n&&B.isEmpty(a.n)){a.n=B.decodeHtmlString("<br/>");}if(W){a.addCls(I);}var b=Z.cls;if(b){a.addCls(b);}if(Z.hid){a.addCls(L);}return a;},itemRenderer:{render:function S(W,V,X){W._renderIdx=V;return mstrmojo.string.apply(X.getItemMarkup(W,V),X.getItemProps(W,V));},select:function K(W,X,V,Y){P("select",W,X,V,Y);},unselect:function H(W,X,V,Y){P("unselect",W,X,V,Y);}},onclick:function U(V){try{var X=this.getItemFromTarget(V.getTarget());if(X){V.cancel();this.doItemSelect(X,V||{});}}catch(W){mstrApp.onerror(W);}},doItemSelect:function C(o,l){var d=l.hWin,f=l.e,j=o._renderIdx,g=o._positionIdx,W=E.isMetaKey(d,f),b=E.shiftKey(d,f),X=this.multiSelect,a=this.useListModKeys,k=this._shiftStartIndex,Y=this.selectedIndices;if(X&&a&&b&&k>-1){var V=[],Z=[];this.processContinuousSelection(V,Z,j);this.addSelect(V);this.removeSelect(Z);}else{if(X&&(!a||W)){var h=(Y[j])?"remove":"add";this[h+"Select"](j,false,g);}else{this.singleSelect(j,false,g);}this._shiftStartIndex=j;}},processContinuousSelection:function J(X,W,V){var d=this._shiftStartIndex,b=this.selectedIndices,a=Math.min(d,V),Z=Math.max(d,V),Y;for(Y=0;Y<this.items.length;Y++){if(a<=Y&&Y<=Z){if(!b[Y]){X.push(Y);}}else{if(b[Y]){W.push(Y);}}}},onclearSelection:function A(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function F(W){var V=E.findAncestorByAttr(W,"idx",true,this.domNode);return(V&&V.node)||null;},getItemFromTarget:function O(X){var W=this.getItemNodeFromTarget(X),V=W&&parseInt(W.getAttribute("idx"),10);if(V!==null&&!isNaN(V)&&this.items){return this.items[V];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=I;mstrmojo._IsList.HIDDEN_CLS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var J={T:["top","left"],D:["height","width"],B:["border","border-color","border-style","border-width"],F:["font","color","text-decoration"],P:["padding"],BG:["background-color","fx"],RW:[]};J.RW=["z-index"].concat(J.T.concat(J.D));var D=mstrmojo.dom,O=mstrmojo.css;function N(U,W,S){var V=U[W]||[];V.push(S);U[W]=V;}function L(X,W){var V=((X&&X.fmts)||null);if(W){var Z=X.thresholds,U=Z&&Z[W];if(U){var Y={},a;for(a in V){Y[a]=U[a]||V[a];}for(a in U){var S=U[a];Y[a]=(typeof S==="string")?(S+" !important"):S;}V=Y;}}return V;}mstrmojo._Formattable=mstrmojo.provide("mstrmojo._Formattable",{_mixinName:"mstrmojo._Formattable",formatHandlers:null,thresholdId:null,getCacheKey:function E(){return"css_cache"+(this.thresholdId||"");},update:function G(U){var S=true;this.invisible=!!(U&&U.data&&U.data.invisible);if(this._super){S=this._super(U);}return S;},buildCSSFormatString:function H(V,g){var k=this.formatHandlers[V],o=k.src?g[k.src]:g;if(!o){return null;}var d=k.props||k;if(!d){return null;}var Y=[],j=-1;var W=d.length-1;for(W;W>=0;W--){var l=d[W];var e=J[l]||[l];var b=e.length-1;for(b;b>=0;b--){l=e[b];var U=o[l];if(U!==undefined){if(l==="fx"){var Z=U,S={};var h=Z.gd;if(h){this.formatGradient(h,S);}var X=parseInt(Z.rt,10);if(X){if(X===1||X===3){this.formatTextRotation(Z.rt,S);}}if(Z.ds){this.formatDropShadow(Z,S);}var a;for(a in S){Y[++j]=a+":"+S[a].join(" ");}}else{Y[++j]=l+":"+U;}}}}if(this.invisible){Y.push("visibility:hidden");}return Y.join(";")+";";},applyCSSFormatToNode:function I(V,S){var W=this[V],U=W&&W.style;if(U){this.buildCSSFormatString(V,S).split(";").forEach(function(X){var Y=X.split(":");U[O.convertCssToCamelCase(Y[0])]=Y[1];});}},clearSlotBackgroundCSS:function F(U){var V=this[U],S=V&&V.style;if(S){S.background="transparent none 0 0 no-repeat";S.filter="none";}},preBuildRendering:function B(){this._super();var W=this.formatHandlers,S=this.getFormats();if(W&&S){var X=this.defn=this.defn||{},Y=this.getCacheKey(),V=X[Y];if(!V){V=X[Y]={};for(var U in W){var a=U+"CssText";this[a]=V[a]=this.buildCSSFormatString(U,S)||"";}}else{var Z;for(Z in V){this[Z]=V[Z];}}}return true;},formatGradient:function P(S,V){var U=O.buildGradient(S.t,S.sc,S.ec);if(U){N(V,U.n,U.v);}},formatDropShadow:function K(X,V){if(D.supports(D.cssFeatures.DROP_SHADOW)){var W=X.ds;if(D.isDXIE){N(V,"filter","progid:DXImageTransform.Microsoft.DropShadow(Color='#66000000',Positive='true',OffX="+W+",OffY="+W+")");}else{var S=[W,W],U=parseInt(X.rt,10);if(U===1||U===3){S[((U===1)?1:0)]=-W;}N(V,(D.isWK?"-webkit-":"")+"box-shadow",S.join("px ")+"px 3px 0px #888");}}},formatTextRotation:function C(U,S){if(D.supports(D.cssFeatures.TEXT_ROTATION)){if(D.isDXIE){N(S,"filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+U+")");}else{var V=(U===1)?90:-90;N(S,D.CSS3_PREFIX+"transform-origin","top left");N(S,D.CSS3_PREFIX+"transform","rotate("+V+"deg)");}}},getFormats:function R(){if(!this.fmts){this.fmts=L.call(this,this.defn,this.thresholdId);}return this.fmts;},clearFormats:function A(){this.fmts=undefined;},createEmptyFormats:function(){return(this.fmts=this.fmts||{});},clearCache:function Q(){delete this.defn[this.getCacheKey()];},unrender:function M(S){if(this.thresholdId){this.fmts=null;}this._super(S);}});mstrmojo._Formattable.getBorderWidths=function(X){var W=X.getFormats(),S=(W.border)?W.border.match(/(\d*|\d*\.\d*)pt/)[0]:W["border-width"],V=X.model,U=V.docModel;return O.getBorderWidths(S,(U&&U.dpi)||V.dpi);};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(W){if(!W.pageSize||W.pageSize<=0){var X=W.scrollboxNode;W.pageSize=X&&X.clientHeight||0;}return W.pageSize;}function U(W,X){if(W.usePaging){W.totalPages=1;var Z=W.itemsContainerNode,Y=B(W);if(W.usePaging&&Z&&Y){W.totalPages=Math.ceil((Z.clientHeight-parseInt(Z.style&&Z.style.paddingBottom||0,10))/Y);}if(Z){W.itemsContainerNode.style.paddingBottom=Y+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(W){return'<div class="'+this.getWrapperCss(W)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(W){return W.childNodes;},wrapperParentNode:function D(W){return W;},createWrapperNode:function G(W){var X=W.ownerDocument,Y=X.createElement("div");return Y;},findScrollRange:function N(o,a,l,t,X,e,u,s){if(!a){return{start:0,end:0};}var g=this.wrapperNodes(o),k=parseInt(a/2,10),Z=parseInt(Math.log(a)/Math.log(2),10),Y=0,W=a-1,j=l+t,f=g[0].offsetTop,d;for(var q=1;q<=Z;q++){d=g[k].offsetTop-f+s;if(d<l){Y=k;}else{if(d>j){W=k;}}var b=Math.round(a/Math.pow(2,q+1));k+=(d>l)?-b:b;k=Math.min(Math.max(0,k),a-1);}return{start:Y,end:W};},findWrapper:function L(Y,W){var X=this.wrapperNodes(Y);return X&&X[W];},findIndex:function F(W,Z,Y){var X=this._nd2iw(W,Z,Y);return X?this._iw2idx(W,Z,X):-1;},itemOffsetTop:function V(X,b,W,Z){if(!Z){var Y=this.wrapperNodes(b);Z=Y&&Y[W];if(!Z){return 0;}}var a=b.firstChild;if(!a||(a===Z)){return 0;}else{return Z.offsetTop-a.offsetTop;}},whereDrop:function S(e,W,Y,d,X){var Z=this._nd2iw(e,W,Y),f,b,g;if(Z){b=this._iw2idx(e,W,Z);f=b;g=this.itemOffsetTop(e,W,null,Z);var a=Z.offsetHeight;if(d.y>X.top+g+a/2){f++;g+=a;}}else{return e.dropCuePos;}return{left:0,top:g,idx:f,idxActual:b};},getWrapperCss:function(W){return K;},postBuildRendering:function(a,Z,Y,X,W){U(X,this);},buildItemWrappers:function P(g,d,o,f,b,p){var q=this.itemWrapperPrefix(o),l=this.itemWrapperSuffix,a=q+this.itemWrapperPrefill+l,Z=[this.markupPrefix],X=1,W=o.selectedIndices||{},t=function s(k,j){for(var u=k;u<j;u++){Z[X++]=q;var w=d.build(o,f,g[u],u);if(W[u]){w=w.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Z[X++]=w;Z[X++]=l;}};var e=(g&&g.length)||0;b=b&&d?Math.min(b,e):0;if(b){t(0,b);}p=p&&d?Math.min(p,e-b):0;var h=e-p;for(var Y=b;Y<h;Y++){Z[X++]=a;}if(p){t(h,e);}Z.push(this.markupSuffix);return Z;},fillItemWrappers:function H(Y,j,f,s,h,X,d,q){var g=(j&&j.length)||0,o=this.wrapperNodes(Y),t=h.itemStatus,W=mstrmojo.css,a=s.selectedIndices||{};for(var e=X,l=Math.min(d+1,g),b=0;e<l;e++){if(t[e]!==A){o[e].innerHTML=f.build(s,h,j[e],e);if(a[e]){var Z=o[e].firstChild;if(Z){W.addClass(Z,["selected"]);}}b++;if(b===q){break;}}}return b;},onadd:function O(f,W,a,g){if(W&&g){var b=g.value.length,d=this.wrapperNodes(W),e=d[g.index],Z=this.getWrapperCss(f);for(var Y=0;Y<b;Y++){var X=this.createWrapperNode(W);X.className=Z;X.innerHTML=J;if(e){this.wrapperParentNode(W).insertBefore(X,e);}else{this.wrapperParentNode(W).appendChild(X);}}U(f,this);}},onremove:function Q(Z,d,W,Y){if(d&&Y){var b=this.wrapperNodes(d);if(b){var e=Y.value.length;for(var a=Y.index+e-1,X=Y.index;a>=X;a--){this.wrapperParentNode(d).removeChild(b[a]);}}U(Z,this);}},onchange:function R(k,Y,e,o){if(Y&&o){var f=this.wrapperNodes(Y);if(f){var X=mstrmojo.css,q=e.itemStatus,l;for(var d=0,W=o.removed,h=W&&W.length;d<h;d++){l=W[d];if(q[l]){X.removeClass(f[l].firstChild,["selected"]);}}for(var b=0,g=o.added,Z=g&&g.length;b<Z;b++){l=g[b];if(q[l]){X.addClass(f[l].firstChild,["selected"]);}}}}},_nd2iw:function E(X,a,Z){a=this.wrapperParentNode(a);if(a&&Z&&a!==Z){var W=X.domNode,Y=Z.parentNode;while(Y){if(Y===a){return Z;}if(Y===W){break;}Z=Y;Y=Z.parentNode;}}return null;},_iw2idx:function M(Y,d,b){var X=Y.items&&Y.items.length,Z=this.wrapperNodes(d),W=I.findBin(Z,b,"offsetTop",X);for(var a=W;a<X;a++){if(Z[a].offsetHeight){return a;}}return -1;},toPage:function(W,Y){var X=W.scrollboxNode;if(W.usePaging&&X){X.scrollTop=Y*B(W);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(W){var X=W.scrollboxNode,Y=B(W);return Math.round((X&&Y&&X.scrollTop/Y)||0);},toItem:function(a,b){var Y=a&&a.itemsContainerNode,f=a.scrollboxNode,W=this.itemOffsetTop(a,Y,b),d=this.wrapperNodes(Y)[b].clientHeight,X=f.clientHeight,e=f.scrollTop,Z=e;if(W<e){Z=W;}else{if(e+X-d<W){Z=Math.min(W,W-X+d);}}f.scrollTop=Z;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.num","mstrmojo.color","mstrmojo.hash","mstrmojo.array");var AP=mstrmojo.color,a=mstrmojo.hash,Bb=mstrmojo.array,BW=mstrmojo.css,p=mstrmojo.num;var BZ=1,A1=2,A3=3,BI=4,Aj=5,Ak=6;var Bj="FormattingFont",L="FormattingAppearance",d="FormattingAlignment",Aq="FormattingSize",V="FormattingPatterns",I="FormattingBorder",BH="FormattingOrder",H="FormattingView",S="FormattingSelector",A5="Template Formatting",P="FormattingPadding",Az="AnalyticalEngineProperties",A9="RWDocumentProperties",BR="FormattingPage",R="Mobile",Y="VLDB Select",AJ="FormattingNumber",Ae="RWDExecution";var Ay=1;var t="n",Q="h",Bc="w",AN="wm",BO="pw",b="ml",BP="mr",AF="upwalw",AC="ff",At="fsz",BU="fw",AO="fit",BV="fun",AA="fst",AE="fc",Z="alh",AD="alv",An="atw",AV="atd",j="textOverflow",Ax="bc",E="bgs",K="btc",Aw="brc",Ag="bbc",AB="blc",w="bts",Be="brs",BJ="bbs",Am="bls",Ab="borderColor",BF="borderStyle",l="zIndex",Ad="showTitleBar",u="title",BD="ctrlStyle",AH="ctrlOrientation",BC="ctrlOrientationBehavior",s="ctrlMultiselect",o="ctrlAutoSearchEnabled",C="ciwm",BQ="cmcy",BE="sec",z="easow",AU="layoutXml",M="lockAspectRatio",Av="ism",q="shw",BG="mg",Bd="lhv",f="gridVPadding",As="gridHPadding",Ar="ln",AT="sar",B="hnv",Ap="iw",Al="ih",AX="tsp",Ah="visible",W="rf",Bi="jad",A0="jdc",AQ="ode",BK="fs",BN="ssc",k="sstyle",AM="hgl",A2="nct",BB="ncp",g="ncs",BS="ndp",G="nfs",D="nnn",BY="nth",Bh="gi",A7="stfurh",e="stfuch",Bf="stfuva",N="olm",BT="gdc",Bg="gda",Ac="layoutstyle";function U(Bk){return Bk;}function AZ(Bk){return parseInt(Bk,10);}var AL={name:"encode",_def:U};AL[A3]=function(Bk){return Bk?1:0;};AL[A1]=function(Bk){if(Bk==="transparent"){return -1;}if(Bk.length===4){Bk=Bk.replace(/([0-9a-f])/ig,"$1$1");}Bk=AP.rgbStr2hex(Bk);return parseInt(Bk.substring(5)+Bk.substring(3,5)+Bk.substring(1,3),16);};AL[BI]=AZ;AL[BZ]=function(Bk){if(typeof Bk==="number"){return p.toLocaleString(Bk);}return U(Bk);};AL[Ak]=function(Bm){if(Bm==="none"){return 0;}var Bl=Bm.match(/([0-9]+[,\.]?[0-9]*pt)/)[0],Bk=Bm.match(/pt ([\w\W]*)/)[1];if(Bl==="2pt"){return 5;}switch(Bk){case"solid":return 1;case"dashed":return 3;case"dotted":return 4;default:throw new Error("Invalid border style value in FormatModel::encodeValue.");}};var Ba={name:"decode",_def:U};Ba[A3]=function(Bk){return parseInt(Bk,10)===1;};Ba[A1]=function(Bk){if(Bk===-1){return"transparent";}if(typeof Bk==="number"){return AP.decodeColor(Bk);}if(Bk.length===4){return Bk.replace(/([0-9a-f])/ig,"$1$1");}return AP.rgbStr2hex(Bk);};Ba[BI]=AZ;Ba[Ak]=function(Bm){if(Bm===undefined||Bm===0){return"none";}var Bl="1pt",Bk="solid";if(Bm===5){Bl="2pt";}if(Bm===3){Bk="dashed";}else{if(Bm===4){Bk="dotted";}}return Bl+" "+Bk;};function BL(){return this.pn.toLowerCase();}function AW(Bk,Bm,Bn){var Bl=document.createElement("div");Bl.style[Bn||Bm]=Bk[Bm];return Bl;}function J(Bk){return function(){return AP.rgbStr2hex(Bk.apply(this,arguments));};}function Au(){var Bk=BL.call(this);return Bk==="underline"?Bk:"line-through";}var A8={name:"extract"},X=A8._def=function(Bk,Bm,Bn){var Bl=AW(Bk,Bm||this.getFormatBlockName(),Bn);return Bl.style[this.getCssName()];};A8[A1]=J(X);function AG(Bk){return X.call(this,Bk,this.getFormatBlockName())===BL.call(this);}function A(Bk){var Bl=X.call(this,Bk,this.getFormatBlockName(),this.getCssName());return Bl.indexOf(Au.call(this))>-1;}function A6(Bk){var Bl=this.getFormatBlockName();return AP.rgbStr2hex(X.call(this,Bk,Bl,Bl+this.pn));}var BX={name:"resolve"},h=BX._def=function(Bk,Bn,Bm,Bo){Bm=Bm||this.getFormatBlockName();var Bl=AW(Bk,Bm);Bl.style[Bo||this.getCssName()]=Bn;return Bl.style[BW.convertCssToCamelCase(Bm)];};BX[A1]=function(Bk,Bm,Bl,Bn){if(Bm.or!==undefined){return Bm;}return AP.rgbStr2hex(h.call(this,Bk,Bm,Bl,Bn));};function Af(Bk,Bl){return h.call(this,Bk,Bl?BL.call(this):"normal");}function Aa(Bl,Bn){var Bm=(Bl[this.getFormatBlockName()]||"").split(" "),Bk=Au.call(this);if(Bn){if(Bm.indexOf(Bk)===-1){Bm.push(Bk);}}else{Bm=Bm.filter(function(Bo){return Bo!==Bk;});}return h.call(this,Bl,Bm.join(" "));}var Ao={name:"update"},BM=Ao._def=function(Bk,Bl){Bk[this.getFormatBlockName()]=this.resolve(Bk,Bl);return Bk;};var AY={};AY[t]={ps:L,pn:"Name",pt:BZ};AY[Q]={ps:Aq,pn:"Height",pt:BZ};AY[Bc]={ps:Aq,pn:"Width",pt:BZ};AY[AN]={ps:Aq,pn:"WidthMode",pt:BI};AY[BO]={ps:BR,pn:"PageWidth",pt:BZ};AY[b]={ps:BR,pn:"MarginLeft",pt:BZ,fn:"margin-left"};AY[BP]={ps:BR,pn:"MarginRight",pt:BZ,fn:"margin-right"};AY[AF]={ps:BR,pn:"UsePageWidthAsLayoutWidth",pt:A3};AY[AC]={ps:Bj,pn:"Name",pt:BZ,fn:"font",cn:"fontFamily",extract:function(){return X.apply(this,arguments).replace(/['"]/g,"");},resolve:function(Bk,Bm){var Bl=AW(Bk,"font");Bl.style.fontFamily="'"+Bm+"'";return Bl.style.font;}};AY[At]={ps:Bj,pn:"Size",pt:BI,fn:"font",cn:"fontSize"};AY[BU]={ps:Bj,pn:"Bold",pt:A3,fn:"font",cn:"fontWeight",extract:AG,resolve:Af};AY[AO]={ps:Bj,pn:"Italic",pt:A3,fn:"font",cn:"fontStyle",extract:AG,resolve:Af};AY[BV]={ps:Bj,pn:"Underline",pt:A3,fn:"text-decoration",extract:A,resolve:Aa};AY[AA]={ps:Bj,pn:"Strikeout",pt:A3,fn:"text-decoration",extract:A,resolve:Aa};AY[AE]={ps:Bj,pn:"Color",pt:A1};AY[Z]={ps:d,pn:"Horizontal",pt:BI,fn:"text-align"};AY[An]={ps:d,pn:"TextWrap",pt:A3,fn:"white-space"};AY[AV]={ps:d,pn:"TextDirection",pt:BI};AY[AD]={ps:d,pn:"Vertical",pt:BI};AY[j]={ps:Aq,pn:"TextOverflow",pt:A3};AY[Ax]={ps:V,pn:"FillColor",pt:A1,x:Ay,fn:"background-color",update:function(Bk,Bm){var Bl=Bk.fx;if(Bm.or!==undefined){if(!Bl){Bl=Bk.fx={};}var Bn=Bl.gd=Bl.gd||{};Bn.ec=Bm.c2;Bn.sc=Bm.c1;Bn.t=Bm.or;delete Bk[this.getFormatBlockName()];Bk.fx=Bl;}else{if(Bl){delete Bl.gd;}BM.call(this,Bk,Bm);}return Bk;}};AY[E]={ps:V,pn:"FillStyle",pt:BI};AY[BN]={ps:V,pn:"SelectorSelectionColor",pt:A1};AY[k]={ps:V,pn:"SelectorSelectionFillStyle",pt:BI};AY[K]={ps:I,pn:"TopColor",pt:A1,fn:"border",extract:A6};AY[Aw]={ps:I,pn:"RightColor",pt:A1,fn:"border",extract:A6};AY[Ag]={ps:I,pn:"BottomColor",pt:A1,fn:"border",extract:A6};AY[AB]={ps:I,pn:"LeftColor",pt:A1,fn:"border",extract:A6};AY[Ab]={ps:I,pn:["TopColor","RightColor","BottomColor","LeftColor"],pt:A1,fn:"border",extract:A6,resolve:J(function(Bk,Bm){var Bn=this.getFormatBlockName(),Bl=h.call(this,Bk,Bm,Bn,Bn+"Color"),Bo=Bl.indexOf("rgb");if(Bo>-1){Bl=Bl.slice(0,Bo)+AP.rgbStr2hex(Bl.slice(Bo));}return Bl;})};AY[BF]={ps:I,pn:["TopStyle","RightStyle","BottomStyle","LeftStyle"],pt:Ak,fn:"border",extract:A6,resolve:function(Bk,Bn){var Bl=Bn.split(" "),Bo=this.getFormatBlockName();if(!Bk[Bo]){Bk[Bo]="transparent";}Bk[Bo]=h.call(this,Bk,Bl[0],Bo,Bo+"Width");var Bm=h.call(this,Bk,Bl[1]||"none",Bo,Bo+"Style"),Bp=Bm.indexOf("rgb");if(Bp>-1){Bm=Bm.slice(0,Bp)+AP.rgbStr2hex(Bm.slice(Bp));}return Bm;}};AY[w]={ps:I,pn:"TopStyle",pt:Ak,fn:"border",extract:A6};AY[Be]={ps:I,pn:"RightStyle",pt:Ak,fn:"border"};AY[BJ]={ps:I,pn:"BottomStyle",pt:Ak,fn:"border",extract:A6};AY[Am]={ps:I,pn:"LeftStyle",pt:Ak,fn:"border",extract:A6};AY[l]={ps:BH,pn:"ZIndex",pt:BI,fn:"z-index"};AY[Ad]={ps:H,pn:"ShowTitleBar",pt:A3};AY[u]={ps:H,pn:"Title",pt:BZ};AY[BD]={ps:S,pn:"Style",pt:BI};AY[AH]={ps:S,pn:"Orientation",pt:BI};AY[BC]={ps:S,pn:"OrientationBehavior",pt:BI};AY[s]={ps:S,pn:"Multiselect",pt:A3};AY[o]={ps:S,pn:"AutoSearchEnabled",pt:A3};AY[C]={ps:S,pn:"ItemWidthMode",pt:BI};AY[BQ]={ps:S,pn:"MetricConditionType",pt:BI};AY[BE]={ps:S,pn:"ShowElementCount",pt:BI};AY[z]={ps:S,pn:"ExportAsShownOnWeb",pt:BI};AY[AU]={ps:Aq,pn:"LayoutXML",pt:Aj};AY[M]={ps:Aq,pn:"LockAspectRatio",pt:A3};AY[Av]={ps:Aq,pn:"ImageSizeMode",pt:BI};AY[Al]={ps:Aq,pn:"ImageHeight",pt:BZ};AY[Ap]={ps:Aq,pn:"ImageWidth",pt:BZ};AY[AX]={ps:A9,pn:"layoutBarPosition",pt:BZ};AY[BK]={ps:A9,pn:"ExecutionFullScreenMode",pt:A3};AY[Ac]={ps:A9,pn:"LayoutStyle",pt:BI};AY[Ah]={ps:L,pn:"Visible",pt:A3};AY[Ar]={ps:A5,pn:"LongNames",pt:BZ};AY[N]={ps:A5,pn:"Indented",pt:BI};AY[AT]={ps:Az,pn:"ShowAllRows",pt:BZ};AY[B]={ps:Az,pn:"HideNullZeroValues",pt:BZ};AY[As]={ps:P,pn:["LeftPadding","RightPadding"],pt:BZ};AY[f]={ps:P,pn:["TopPadding","BottomPadding"],pt:BZ};AY.rowsshw={ps:A5,pn:"ShowRowHeaders",pt:BZ};AY.rowsmg={ps:A5,pn:"MergeCells",pt:BZ};AY.rowslhv={ps:A5,pn:"LockRowHeaders",pt:BZ};AY.colsshw={ps:A5,pn:"ShowColumnHeaders",pt:BZ};AY.colsmg={ps:A5,pn:"MergeColumnCells",pt:BZ};AY.colslhv={ps:A5,pn:"LockColumnHeaders",pt:BZ};AY[A7]={ps:A5,pn:"SubtotalFormatUseRowHeaders",pt:BZ};AY[e]={ps:A5,pn:"SubtotalFormatUseColumnHeaders",pt:BZ};AY[Bf]={ps:A5,pn:"SubtotalFormatUseValues",pt:BZ};AY[W]={ps:R,pn:"RefreshFrequency",pt:BI};AY[Bi]={ps:Y,pn:"Join Across Datasets",pt:BI};AY[A0]={ps:Y,pn:"MCE Join To Get Data Combination",pt:BI};AY[AQ]={ps:Ae,pn:"OnDemandEvaluation",pt:BI};AY[AM]={ps:L,pn:"Highlight",pt:BI};AY[A2]={ps:AJ,pn:"Category",pt:BI};AY[G]={ps:AJ,pn:"Format",pt:BZ};AY[g]={ps:AJ,pn:"CurrencySymbol",pt:BZ};AY[BS]={ps:AJ,pn:"DecimalPlaces",pt:BI};AY[BB]={ps:AJ,pn:"CurrencyPosition",pt:BI};AY[D]={ps:AJ,pn:"NegativeNumbers",pt:BI};AY[BY]={ps:AJ,pn:"ThousandSeparator",pt:BI};AY[Bh]={ps:L,pn:"GroupInfo",pt:BZ};AY[BT]={ps:V,pn:"GradientColor",pt:A1};AY[Bg]={ps:V,pn:"GradientAngle",pt:BI};Bb.forEach(a.keyarray(AY),function(Bk){var Bl=AY[Bk];Bl.getFormatBlockName=function(){var Bn=this.fn;if(!Bn){var Bm=this.pn;Bn=Bm.charAt(0).toLowerCase()+Bm.substr(1);}return Bn;};Bl.getCssName=function(){var Bm=this.getFormatBlockName.call(this),Bn=this.cn;if(!Bn){Bn=BW.convertCssToCamelCase(Bm);}return Bn;};Bb.forEach([AL,Ba,A8,BX,Ao],function(Bm){var Bn=Bm.name;Bl[Bn]=Bl[Bn]||Bm[Bl.pt]||Bm._def;});});function BA(Bn,Bm,Bk){var Bl=Bk[Bn.ps]=Bk[Bn.ps]||{};Bm=Bn.encode(Bm);Bb.forEach([].concat(Bn.pn),function(Bo){Bl[Bo]=Bm;});return Bk;}function AS(Bq,Bp,Bk){var Bo=Bq.x;if(Bo){if((Bo&Ay)>0){var Bn=!!Bp.c1,Bm=0;if(Bn){BA(Bq,Bp.c1,Bk);var Bl=Bk[V];Bl.GradientColor=Bq.encode(Bp.c2);Bl.GradientAngle=Bp.or?0:90;Bl.GradientXOffset=0;Bl.GradientYOffset=0;Bm=2;}else{if(Bq.encode(Bp)===-1){Bm=1;}else{BA(Bq,Bp,Bk);}}return BA(AY[E],Bm,Bk);}}return null;}mstrmojo.models.FormatModel={getFormatUpdate:function Ai(Bl,Bo,Bk){var Bn=AY[Bl];if(!Bn){throw new Error("Invalid property "+Bl+" in FormatModel::getFormatUpdate.");}Bk=Bk||{};var Bm=AS.call(this,Bn,Bo,Bk);if(Bm){return Bm;}return BA(Bn,Bo,Bk);},getFormatPropertyInfo:function x(Bk){return AY[Bk];},getValueFromUpdate:function O(Bl,Bm){var Bo=AY[Bl],Bk=null;try{Bk=Bm[Bo.ps][Bo.pn];}catch(Bn){}return Bk;},getGradientValues:function AR(Bl){var Bk=Bl.fx&&Bl.fx.gd;if(Bk){var Bn={c1:Bk.sc,c2:Bk.ec,or:Bk.t};return Bn;}if(Bl[E]===2){if(!!Bl.bc.c1){return Bl.bc;}var Bm={c1:Bl.bc,c2:Bl.gdc,or:Bl.gda===90?0:1};return Bm;}return null;},decodeGradientValue:function F(Bk){if(Bk&&Bk.c1){Bk.c1=this.decodeValue(BT,Bk.c1);Bk.c2=this.decodeValue(BT,Bk.c2);return Bk;}return null;},decodeValue:function AK(Bk,Bl){return AY[Bk].decode(Bl);},updateFormatBlock:function A4(Bk,Bl,Bm){return AY[Bl].update(Bk,Bm);},getFormatBlockValue:function AI(Bk,Bl){return AY[Bl].extract(Bk);},GradientType:null,FormatObjectType:null,PROPERTY_INFO_TYPE:null,ENUM_PROPERTY_NAMES:{NAME:t,HEIGHT:Q,WIDTH:Bc,WIDTH_MODE:AN,PAGE_WIDTH:BO,MARGIN_LEFT:b,MARGIN_RIGHT:BP,USE_PAGE_WIDTH_AS_LAYOUT_WIDTH:AF,FONT_FAMILY:AC,FONT_SIZE:At,FONT_WEIGHT:BU,FONT_STYLE:AO,UNDERLINE:BV,LINE_THROUGH:AA,COLOR:AE,TEXT_ALIGN:Z,VERTICAL_ALIGN:AD,TEXT_WRAP:An,TEXT_DIRECTION:AV,TEXT_OVERFLOW:j,BACKGROUND_COLOR:Ax,FILL_STYLE:E,GRADIENT_COLOR:BT,GRADIENT_ANGLE:Bg,BORDER_TOP_COLOR:K,BORDER_RIGHT_COLOR:Aw,BORDER_BOTTOM_COLOR:Ag,BORDER_LEFT_COLOR:AB,BORDER_TOP_STYLE:w,BORDER_RIGHT_STYLE:Be,BORDER_BOTTOM_STYLE:BJ,BORDER_LEFT_STYLE:Am,BORDER_COLOR:Ab,BORDER_STYLE:BF,Z_INDEX:l,SHOW_TITLE_BAR:Ad,TITLE:u,CONTROL_STYLE:BD,CONTROL_ORIENTATION:AH,CONTROL_ORIENTATION_BEHAVIOR:BC,CONTROL_MULTISELECT:s,CONTROL_AUTOSEARCH:o,CONTROL_ITEM_WIDTH_MODE:C,CONTROL_METRIC_CONDITION_TYPE:BQ,CONTROL_SHOW_ELEMENT_COUNT:BE,CONTROL_EXPORT_AS_SHOWN_ON_WEB:z,LAYOUT_XML:AU,LOCK_ASPECT_RATIO:M,IMAGE_SIZE_MODE:Av,SHOW_HEADER:q,MERGE_HEADER:BG,LOCK_HEADER:Bd,LONG_NAME:Ar,SHOW_ALL_ROWS:AT,HIDE_NULL:B,IMAGE_WIDTH:Ap,IMAGE_HEIGHT:Al,VISIBLE:Ah,LAYOUT_TAB_POSITION:AX,GRID_VERTICAL_PADDING:f,GRID_HORIZONTAL_PADDING:As,REFRESH:W,JOIN_ACROSS_DATASET:Bi,MCE_JOIN_TO_GET_DATA_COMBINATION:A0,ON_DEMAND_EVALUATION:AQ,FULL_SCREEN_MODE:BK,SELECTOR_SELECTION_COLOR:BN,SELECTOR_SELECTION_FILL_STYLE:k,VIZ_HIGHLIGHTING:AM,GROUP_INFO:Bh,SUBTOTAL_FORMAT_USE_ROWHEADERS:A7,SUBTOTAL_FORMAT_USE_COLUMNHEADERS:e,SUBTOTAL_FORMAT_USE_VALUES:Bf,OUTLINE:N,LAYOUT_STYLE:Ac},ENUM_PROPERTY_SETS:{FORMATTING_NUMBER:AJ},ENUM_NUMBER_FORMAT_KEYS_OBJ:{CATEGORY:A2,CURRENCY_POSITION:BB,CURRENCY_SYMBOL:g,DECIMAL_PLACES:BS,FORMAT:G,NEGATIVE_NUMBERS:D,THOUSAND_SEPARATOR:BY}};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.DICFactory");var P=3,A=8,X=2,Z=2,V=mstrmojo.css,B="********",S=mstrmojo.hash,N=mstrmojo.array,D=mstrmojo.string;var L=null;function I(g,e){if(g){var a=this.dicWidget;if(a&&a.setDirtyFlag){a.setDirtyFlag(g,e);}else{if(g.className!=="flag-container"){var b=document.createElement("div");b.className="flag-container";b.style.right="10px";b.innerHTML='<div class="dirty-cell"/>';e.insertBefore(b,g);}}}}function U(b,a){if(b.className==="flag-container"){a.removeChild(b);}}function F(e,b,d,a){return'<rwf rw_tree_type="'+this.tt+'" rw_node_key="'+this.fgk+'" rw_field_key="'+this.k+'" key="'+this.key+'" columns="'+this.cls+'" types="'+d+'" '+b+a+' dt="'+e.dt+'" />';}mstrmojo._IsEditableTextfield={_mixinName:"mstrmojo._IsEditableTextfield",preBuildRendering:function W(){if(!this.edb){var e=this.node.data,a=this.node.defn,b=e.dic||a.txi.dic,f=(this.rv==="")?this.value:this.rv;if(b.psw){this.v=B;f=this.rv="";}if(b.ipt===Z){b.vls=this.vls||[];this.dk=b.k;this.ddic=true;}this.dt=b.dt;this.dicWidget=mstrmojo.DICFactory.createDIC({dic:S.copy(b,{req:this.req}),enabled:!!this.enabled,owner:this,k:0,dv:this.value,value:f,openerType:X,popupTitle:a.n});if(this.shouldReplaceValueNode()){if(!L){L=S.clone(this.formatHandlers);}this.formatHandlers.domNode=["T","z-index","D","B","F","P","text-align","background-color","fx","white-space","overflow"];delete this.formatHandlers.valueNode;}}this.set("cssClass",this.edb?"":"editable-field");this._super();},shouldReplaceValueNode:function R(){return this.dicWidget.showByDefault||this.dicWidget.hasPreview;},postBuildRendering:function M(){this._super();if(this.edb){return ;}var a=this.dicWidget,d=this.valueNode.innerHTML;if(D.isEmpty(d)){this.valueNode.innerHTML=d+"1";this.valueNode.style.height=this.valueNode.clientHeight+"px";this.valueNode.innerHTML=d;}if(a.showByDefault){a.render();}else{if(this.enabled){if(a.hasPreview){a.openerNode=this.domNode;a.renderPreview(this.value);}else{a.openerNode=this.valueNode;}mstrmojo.dom.attachEvent(a.openerNode,mstrApp.isMobile?mstrmojo.dom.TOUCHEND:"click",function(){a.showInPopup();});}else{V.addClass(this.domNode,"disabled");return ;}}if(this.shouldReplaceValueNode()){S.copy(L,this.formatHandlers);}this.registerTxWidget();this.addToTraversalList();if(this.mdf&&this.sci){var b=this.domNode;I.call(this,b.firstChild,b);}},getKeyContext:function G(){return{dt:this.dt||0,k:this.dk||undefined};},getUpdates:function E(){var g=this.getUpdatedValues()[0],a=N.find(this.vls,"v",g.v),b=this.dicWidget,f=this.ddic&&(a===-1),d,e="";if(b.canSlice||f){e=F.call(this,g,"",A,"");}if(!f){d=g.k?('rw_control_key="'+g.k+'" element_id="'+D.encodeXMLAttribute(this.vls[a].eid)+'" '):"";e+=F.call(this,g,d,P,'value="'+D.encodeXMLAttribute(String(g.v))+'"');}return e;},updateValue:function O(j,b){if(this._super){this._super(j,b);}var l=this.valueNode,g=this.domNode,h=this.dicWidget,k=b.v,a=b.dv,f=N.find(this.vls,"v",k),e=this.ddic&&(f===-1);if(this.rv!==k){if(this.req){V.removeClass(g,"required");}this.rv=k;this.v=a;this.mdf=e?0:1;if(!h.showByDefault){if(h.hasPreview){h.renderPreview();}else{l[l.innerText!==undefined?"innerText":"textContent"]=this.psw?B:(!a?"\u00a0":D.decodeHtmlString(a,false));}}if(this.req){V.removeClass(g,"required");}if(this.sci&&!e){I.call(this,g.firstChild,g);}else{U.call(this,g.firstChild,g);}}if(this.txar){return true;}return false;},applyPasswordMask:function Q(){this.psw=true;this.v=B;this.rv="";},getUpdateObject:function J(){var d={fieldKey:this.k,wid:this.wid,newValue:D.encodeXMLAttribute(String(this.rv)),dataType:this.dt},a=-1,b=this.getUpdatedValues()[0];if(b.k!==undefined){d.controlKey=b.k;a=mstrmojo.array.find(this.vls,"v",b.v);d.elementId=a>=0?this.vls[a].eid:"";}return{nodeKey:this.fgk,cells:[d],retrieveData:false,autoRefresh:false};},autoRefresh:function(a){this.model.sendTransactionUpdates(a);},update:function K(a){if(this._super){this._super(a);}var e=a.data,b=a.defn;if(e.vls){this.vls=e.vls;}else{delete this.vls;}this.cell=a.data;this.value=e.v||"";this.rv=(e.rv===undefined)?this.value:e.rv;this.tca=e.tca||0;this.dt=e.dt;this.key=e.key||"";this.cls=e.cls||"";this.wid=e.wid;this.edb=e.edb;this.mdf=e.mdf;this.sci=b.txi.sci;this.req=this.required||b.txi.dic.req;this.tt=b.tt;this.fgk=b.fgk;this.txar=b.txi.txar;this.txck=b.txi.dic.ckey;},addToTraversalList:function Y(){if(mstrmojo.DICConfig.isKeyNavigable(this.dicWidget.dic)){var d=this.parent.traversalList,e=this.domNode;if(!d){d=this.parent.traversalList=[];}var a=this.k,b=false;N.forEach(d,function(f){if(f.refField.k===a){b=true;return false;}});if(!b){d.push({x:e.offsetLeft,y:e.offsetTop,h:e.offsetHeight,refField:this});}}},editNext:function H(){var g=this.parent.traversalList,e,a,d,f=0;if(!g){return false;}if(!g.isSorted){for(e=0,a=g.length;e<a;e++){f+=g[e].h;}d=f/a;g.sort(function(k,h){var l=Math.floor(k.y/d),j=Math.floor(h.y/d);if(l<j){return -1;}if(l>j){return 1;}if(k.x<h.x){return -1;}if(k.x>h.x){return 1;}return(k.y<h.y)?-1:1;});g.isSorted=true;}for(e=0,a=g.length;e<a;e++){if(g[e].refField.k===this.k){break;}}if(e<a){do{e++;if(e>=a){e%=a;}if(e===parseInt(this.k,10)){return false;}var b=g[e].refField.dicWidget;if(b){if(!b.showByDefault){b.showInPopup();}else{b.focus();}return true;}}while(true);}},checkRequiredObjects:function C(){if(this.req&&!this.mdf&&!this.edb){V.addClass(this.domNode,"required");return false;}return true;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash");var K=1,B=2;function N(Q,P){return D(Q,P)&&Q.o===P.o;}function D(Q,P){return Q&&P&&Q.ui===P.ui&&Q.axis===P.axis&&Q.mix===P.mix;}function A(U,Q,R){var S=R.getCellTitleId(Q),P=R.getCellUnitIndex(Q);R.selections[S]=R.selections[S]||{};R.selections[S][P]=R.selections[S][P]||[];R.selections[S][P].push(U);M(U,Q,R);}function M(U,Q,R){if(Q){var S=R.getCellTitleId(Q),P=R.getCellUnitIndex(Q);if(!R.selectionsForCopy){R.selectionsForCopy={};}R.selectionsForCopy[S]=R.selectionsForCopy[S]||{};R.selectionsForCopy[S][P]=R.selectionsForCopy[S][P]||[];R.selectionsForCopy[S][P].push(U);C(U);}}function O(Q){var V=Q.selectionsForCopy;for(var U in V){for(var S in V[U]){for(var R=0,P=V[U][S].length;R<P;R++){J(V[U][S][R]);}}}Q.selections={};Q.selectionsForCopy={};}function C(P){mstrmojo.css.setOpacity(P,50);if(P.nodeName.toLowerCase()==="td"&&mstrmojo.dom.isIE8){mstrmojo.css.addClass(P,"showGridBorder");}}function J(P){mstrmojo.css.setOpacity(P,100);if(P.nodeName.toLowerCase()==="td"&&mstrmojo.dom.isIE8){mstrmojo.css.addClass(P,"showGridBorder");}}function F(R,S){if(R.mix===undefined){var W=S.gridData.gts[R.axis===K?"row":"col"],Q=W[R.tui||R.ui],V=0;for(var U=0,P=W.length;U<P;U++){if(W[U].id===Q.id){V++;}}return V;}return 0;}function H(){var Q="_xtabSelectionsHiddenField",P;P=document.getElementById(Q);if(!P){P=document.createElement("textarea");P.id=Q;P.style.opacity=0;P.style.position="absolute";P.style.top=0;P.style.height=0;P.style.width=0;document.body.appendChild(P);}return P;}function G(){var X="",Z={},R,d=[],h=[],Q={},S={},P=this.selectionsForCopy,W=mstrmojo.hash,Y=mstrmojo.array,f=function(j,k){if(j.hasOwnProperty("mix")){return k.es[j.mix].n;}else{return k.n;}},U,a,V,g,e,b=0;W.forEach(P,function(j){W.forEach(j,function(k){Y.forEach(k,function(l){b++;a=l.offsetLeft;V=l.offsetTop;if(!Z[a]){Z[a]={};}R=Z[a];R[V]=l.innerText;if(Y.indexOf(d,a)===-1){d.push(a);}if(Y.indexOf(h,V)===-1){h.push(V);}g=this.getCellForNode(l);e=this.model.getCellTitleInfo(g).title;if((!e.id&&e.axis===K)||(e.id&&e.axis===B)){S[V]=f.call(this,g,e);}else{Q[a]=f.call(this,g,e);}},this);},this);},this);d.sort(function(k,j){return k-j;});h.sort(function(k,j){return k-j;});if(b>1&&!W.isEmpty(S)){X="\t";}if(b>1&&!W.isEmpty(Q)){Y.forEach(d,function(j){X+=(Q[j]||"")+"\t";});X+="\n";}Y.forEach(h,function(j){if(b>1&&!W.isEmpty(S)){X+=(S[j]||"")+"\t";}Y.forEach(d,function(k){X+=(Z[k][j]||"")+(b>1?"\t":"");});if(b>1){X+="\n";}});U=H();U.value=X;U.focus();U.select();}mstrmojo._XtabSelections={lastSelectedTD:null,singleSelectForCopy:function I(P){var V=this.getCellForNode(P),d,e,a,b=V&&V.mix!=undefined,S=function(g,f){f=f||{};g=g||{};if(b){return g.mix==f.mix;}else{return g.mix==f.mix&&g.ui==f.ui;}};a=mstrmojo.dom.findAncestorByName(P,"table",false);e=a.rows;for(var W=0,X=e.length;W<X;W++){var Z=e[W].cells;for(var U=0,R=Z.length;U<R;U++){var Q=Z[U],Y=this.getCellForNode(Q);if(Q!=P&&S(Y,V)){M(Q,Y,this);}}}},singleSelect:function E(Q,Z){var X=this.getCellForNode(Q),h=Q.parentNode;if(Z){var W=this.getCellTitleId(X),d=this.getCellUnitIndex(X);selectedTitle=this.selections[W];selectedUnit=selectedTitle&&selectedTitle[d];if(selectedUnit){for(var Y=0,a=selectedUnit.length;Y<a;Y++){J(selectedUnit[Y]);}delete selectedTitle[d];return ;}}var V=F(X,this);if(X.axis===K){for(var Y=0,P=0,a=h.cells.length;Y<a&&P<V;Y++){var S=h.cells[Y],b=this.getCellForNode(S);if(N(b,X)){A(S,b,this);P++;}}}else{if(X.axis===B){var f=mstrmojo.dom.findAncestorByName(Q,"table",false),g=f.rows;for(var Y=0,P=0,a=g.length;Y<a&&P<V;Y++){var e=g[Y].cells;for(var U=0,R=e.length;U<R;U++){var S=e[U],b=this.getCellForNode(S);if(N(b,X)){A(S,b,this);P++;break;}}}}else{A(Q,X,this);}}},rangeSelect:function L(l,o){var g=this.getCellForNode(l),P=this.getCellForNode(o);if(D(g,P)){if(g.o>P.o||g._ei>P._ei){var s=l;l=o;g=this.getCellForNode(l);o=s;P=this.getCellForNode(o);}var b=F(g,this),Q=g.axis,p=mstrmojo.dom.findAncestorByName(l,"table",false),Y=p.rows,h=l.parentNode,t=h.rowIndex,a=h.cells,e=o.parentNode.rowIndex;if(Q===K){for(var f=t;f<=e;f++){var R=Y[f].cells,S=false;for(var d=0,k=R.length,U=0;d<k&&U<b;d++){var W=R[d],Z=this.getCellForNode(W);if(D(Z,g)){A(W,Z,this);U++;}}}}else{if(Q===B){for(var f=0,k=Y.length,q=0;f<k&&q<b;f++){var R=Y[f].cells,X=false;for(var d=0,V=R.length;d<V;d++){var W=R[d],Z=this.getCellForNode(W);if(N(Z,g)){X=true;}if(X){A(W,Z,this);}if(N(Z,P)){break;}}if(X){q++;}}}else{if(t==e){for(var f=l.cellIndex,k=o.cellIndex;f<=k;f++){var W=a[f],Z=this.getCellForNode(W);A(W,Z,this);}}else{for(var f=t,k=e;f<=k;f++){var R=Y[f].cells;for(var d=0,V=R.length;d<V;d++){var W=R[d],Z=this.getCellForNode(W);if(D(Z,g)){A(W,Z,this);break;}}}}}}}},doSelection:function(X,W,U){var Y=mstrmojo.dom,P=Y.isMetaKey(W,X),Q=Y.shiftKey(W,X);if(!P){O(this);}this.clearAllHighlights();var V=this.getCellForNode(U);var R=V&&(V.mix===undefined&&V.o!==undefined),S=V&&(V.mix!==undefined&&(V._lp||V._tp));if(R||S){if(Q){this.rangeSelect(this.lastSelectedTD,U);}else{this.singleSelect(U,P);this.lastSelectedTD=U;}}else{this.singleSelectForCopy(U,P);}G.call(this);},clearAllHighlights:function(){var Q=this.getCellForNode(this.lastSelectedCell),S=Q&&this.gridData.gts[Q.axis===1?"row":"col"],P=S&&S[Q.tui||Q.ui];var R=P&&P.sc&&P.sc.tks&&P.sc.tks.split("\x1E");if(R&&this.model.docModel.getTargetInfoWin(R).length==R.length){this.clearHighlights();}}};})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var f=mstrmojo.css,J=mstrmojo.dom,R=mstrmojo.array,N={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},d="scrollingMode",V="scrolling",j=3;var O=J.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function M(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function W(q,l){var p=this.scrollNode,k=M.call(this),o={v:q,h:l};R.forEach(["v","h"],function(t){var s=N[t];f.toggleClass(k,s.hostCls,o[t]);f.toggleClass(p,s.scrollNodeCls,o[t]);});}function S(l,k){var t=J.eventTarget(k,l),q=this.scrollNode,p=J.position(q),s=this.scrollTrackNodes,o=this.scrollBarNodes,u=function u(AE){var AC=t===s[AE];if(AC){var AF=N[AE],w=o[AE],AG=J.position(w),z=J.getMousePosition(l,k)[AF.position],AA=z-AG[AF.position],x=AA>0?1:-1,AD=q[AF.scrollDimension],AH=Math.abs(AA-(AG.h/2))*(AD/p[AF.dimension]),AB={};AB[AF.scroll]={isStyle:false,start:q[AF.scroll],stop:q[AF.scroll]+(x*Math.min(AD/3,500,AH)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:AB,duration:200,interval:10,target:q})).play();}};u.call(this,"h");u.call(this,"v");}function C(l,k){var q=this.scrollNode,p=l.type==="mousewheel",o=p?-1:1;mstrmojo.array.forEach(["h","v"],function(AA){var x=N[AA],t=p?"wheelDelta":"delta",w=l[t+{h:"X",v:"Y"}[AA]]*o,u=Math.abs(w),s=w/u,z=u===3&&J.isFF&&!O;q[x.scroll]+=z?s*40:w;});J.stopPropogation(k,l);J.preventDefault(k,l);}function h(s){var q=N[s],p=this.scrollNode,o=J.position(p),l=o[q.dimension],t=p[q.scrollDimension],k=Math.ceil(l)/t;return A(k,l,t);}function A(l,k,o){return(!isNaN(l)&&l<1)&&(Math.abs(k-o)>j);}function D(AN){var AG="px",z=N[AN],q=this.scrollNode,AA=M.call(this),AP=J.position(q),AB=AP[z.dimension],AI=q[z.scrollDimension],p=Math.ceil(AB)/AI,AM=this.scrollBarNodes,w=AM[AN],AE=this.scrollTrackNodes,AF=AE[AN],AK=A(p,AB,AI),s=z.cls;if(!w){AF=AE[AN]=document.createElement("div");var t=this,AD=function(AR){S.call(t,AR);},x=function(AR){C.call(t,AR);},AJ=function(AT,AR,AS){J.attachEvent(AT,AR,AS);t.installedEventListeners.push({e:AT,evt:AR,fn:AS});};AJ(AF,"click",AD);AF.className="mstrmojo-scrolltrack "+s;w=AM[AN]=document.createElement("div");w.className="mstrmojo-scrollbar "+s;AF.appendChild(w);AA.appendChild(AF);var AL=mstrApp.isSingleTier?"mousewheel":"wheel";AJ(AF,AL,x);AJ(w,AL,x);}var AQ=w.style,u=(q[z.scroll]/q[z.scrollDimension]),l=J.delta(q,M.call(this))[z.position],AH=AF.style;if(AK){AH[z.styleDir]=l+AG;var o=p*AB,AC=35,AO=AB*u,k=AB-35;AQ[z.styleDim]=(o<AC?AC:o)+AG;AQ[z.styleDir]=(AO>k?k:AO)+AG;}return AK;}function I(){return !(mstrApp.isSingleTier&&O);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function Y(k){this._super(k);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=I();}this.installedEventListeners=[];},onRender:function L(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function G(){var l=this.scrollNode,o=J.isFF&&!O;if(l){var k=J.attachMarkupEvent(this.id,l,"scroll");this.installedEventListeners.push({e:l,evt:"scroll",fn:k});}if(o){f.addClass(l,"firefox-on-windows");}else{if(J.isEdge){f.addClass(l,"ms-edge");}}if(!this.hasCustomScrollbar){f.addClass(M.call(this),"mstrmojo-sb-host-show-default");f.addClass(l,"mstrmojo-sb-show-default");return ;}if(l){f.addClass(M.call(this),"mstrmojo-scrollbar-host");f.addClass(l,"mstrmojo-scrollNode");}},updateScrollbars:function g(){if(!this.hasRendered){return ;}this.setupScrollNodes();var k,o=false;if(!this.hasCustomScrollbar){if(this.scrollNode){k=this.scrollNode.style;k.overflowY=h.call(this,"v")?"scroll":"hidden";k.overflowX=h.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};W.call(this,o,o);k=this.scrollNode.style;var p=D.call(this,"v"),l=D.call(this,"h");k.overflowY=p?"scroll":"hidden";k.overflowX=l?"scroll":"hidden";W.call(this,p,l);}},onscroll:function b(){var u=this.scrollNode;if(u&&this.hasCustomScrollbar){var q=function q(w){var x=parseInt(w);return x===null||isNaN(x)?0:x;},s=J.position(u),t=s.h-q(f.getStyleValue(u,"padding-bottom")),l=s.w-q(f.getStyleValue(u,"padding-right")),p=this.scrollBarNodes,o=p.v,k=p.h;if(u.scrollHeight-t>0){o.style.top=((t-J.position(o).h)*(u.scrollTop/(u.scrollHeight-t)))+"px";}if(u.scrollWidth-l>0){k.style.left=((l-J.position(k).w)*(u.scrollLeft/(u.scrollWidth-l)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function F(l){var q=this.scrollNode,p=J.position(q),o=l.src.node,k=this.scrollBarNodes;if(this.isDraggingScrollBar(l)){return{isScrollBar:true,direction:o===k.v?"v":"h",scrollTop:q.scrollTop,scrollLeft:q.scrollLeft,conversionRatio:{y:q.scrollHeight/p.h,x:q.scrollWidth/p.w}};}return(this._super&&this._super(l));},isDragValid:function E(k){return this.isDraggingScrollBar(k)||(this._super&&this._super(k))||false;},isDraggingScrollBar:function X(l){var o=l.src.node,k=this.scrollBarNodes;return !!k&&(o===k.v||o===k.h);},ondragstart:function e(k){if(this.isDraggingScrollBar(k)){f.addClass(k.src.node,V);f.addClass(M.call(this),d);}if(this._super){this._super(k);}},shouldDragBubble:function U(k){var l=k.src.node,o=this.scrollTrackNodes;return !(!!o&&(l===o.v||l===o.h));},ondragmove:function Q(l){if(this.isDraggingScrollBar(l)){var x=l.tgt,k=l.src,z=x.pos,o=k.pos,t=k.node,s=this.scrollNode,w=this.scrollBarNodes,u=k.data,q={y:(z.y-o.y),x:(z.x-o.x)},p=u.conversionRatio;if(t===w.v){s.scrollTop=u.scrollTop+(q.y*p.y);}else{s.scrollLeft=u.scrollLeft+(q.x*p.x);}}if(this._super){this._super(l);}},ondragend:function K(k){if(this.isDraggingScrollBar&&this.isDraggingScrollBar(k)){f.toggleClass(k.src.node,V,false);f.toggleClass(M.call(this),d,false);}if(this._super){this._super(k);}},widgetResized:function P(){if(this._super){this._super();}this.updateScrollbars();},unrender:function Z(k){R.forEach(this.installedEventListeners,function(l){J.detachEvent(l.e,l.evt,l.fn);});this.installedEventListeners=[];delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(k);},getDefaultScrollBarProps:function a(k){return N[k];},disableScroll:function B(k,p){var o=this.scrollNode,l=M.call(this);R.forEach(["v","h"],function(s){var q=N[s];f.toggleClass(l,q.hostCls,false);f.toggleClass(o,q.scrollNodeCls,false);});if(o){if(p||p===undefined){o.style.overflowY="hidden";}else{if(o.style.overflowY==="hidden"){o.style.overflowY="auto";}}if(k||k===undefined){o.style.overflowX="hidden";}}},enableScroll:function H(){this.updateScrollbars();if(!this.hasCustomScrollbar&&this.scrollNode){this.scrollNode.style.overflowY=h.call(this,"v")?"scroll":"hidden";}},scrollIntoViewIfNeeded:function(p){var w=this.scrollNode,s=p.clientHeight,q=w.clientHeight,l=J.position(p).y,t=J.position(w).y,o=l-t,k=o<0,u=o+s>q;if(k||u){w.scrollTop+=o+s/2-q/2;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=mstrmojo.dom,G=100,L=700;var B="mojo-safari-hide-nativeTooltip",H=mstrmojo.css;function M(O,N){return function(Q){var P=mstrmojo.all[O];if(P.customTooltipHandler){P.customTooltipHandler(Q);}P[(N?"move":"show")+"Tooltip"](Q,self);};}function A(){var O=this.tooltipNode||this.domNode,Q=this.id,N,P="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(R){mstrmojo.all[Q].hideTooltip(R,self);};}if(!this[P]){this[P]=M(Q,this.isDynamicTooltip);}O=[].concat(O);for(N=0;N<O.length;N++){O[N].removeAttribute("title");C.attachEvent(O[N],(this.isDynamicTooltip?"mousemove":"mouseover"),this[P]);C.attachEvent(O[N],"mouseout",this._ontooltipout);}}function I(){var Q=this.tooltipNode||this.domNode,P;if(Q&&Q.constructor!==Array){Q=[Q];}if(Q){var R=this._ontooltipover,O=this._ontooltipout,N=this._ontooltipmove;for(P=0;P<Q.length;P++){if(R){C.detachEvent(Q[P],"mouseover",R);}if(O){C.detachEvent(Q[P],"mouseout",O);}if(N){C.detachEvent(Q[P],"mousemove",N);}}}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,isIgnoreTooltipCloseDelay:false,hasWidgetContent:false,tooltipCloseDelay:G,hasOpenTooltip:false,postBuildRendering:function(){var N=this._super();if(this.useRichTooltip){A.call(this);}return N;},onuseRichTooltipChange:function K(){if(this.hasRendered){if(this.useRichTooltip){A.call(this);}else{I.call(this);this.hideTooltip();}}},showTooltip:function J(Q,P){var O=this;if(!O.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(Q);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var S={};for(var N in Q){S[N]=Q[N];}Q=S;}var U=this.richTooltip?this.richTooltip.areaId:undefined;if(C.isSafari&&Q){var R=Q.srcElement;if(window.getComputedStyle(R)["text-overflow"]==="ellipsis"){this.baseElement=R;H.toggleClass(R,B,true);}}this._tooltipTimeOut=window.setTimeout(function(){var V=O.richTooltip;if(O._closeTooltipTimeout){window.clearTimeout(O._closeTooltipTimeout);delete O._closeTooltipTimeout;}mstrmojo.tooltip.open(O,Q,P);O.tooltip.onmouseover=function(){if(O.richTooltip&&O.richTooltip.enableHover){window.clearTimeout(O._closeTooltipTimeout);window.clearTimeout(O._deactivationTimeout);if(O.tooltip){O.tooltip.onmouseout=function(W){var X=W.e;if((!X.toElement&&!X.relatedTarget)||!C.contains(this.domNode,W.e.toElement||W.e.relatedTarget)){O.hideTooltip();}};}}};O.tooltip.allowOtherTooltips=O.allowOtherTooltips;if(V&&V.onClose){O.tooltip.onClose=V.onClose;}O.hasOpenTooltip=true;O._hasActiveArea=true;O._tooltipAreaId=U;window.clearTimeout(O._deactivationTimeout);delete O._deactivationTimeout;},(this._hasActiveArea&&U&&U===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function D(N,P){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var R=this,O=N,Q=P;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(R,O,Q);},this.tooltipOpenDelay);},hideTooltip:function F(){var N=this;window.clearTimeout(this._tooltipTimeOut);if(C.isSafari&&this.baseElement){H.toggleClass(this.baseElement,B,false);}if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete N._deactivationTimeout;delete N._hasActiveArea;delete N._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if((!this.isIgnoreTooltipCloseDelay)&&N.richTooltip&&N.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete N._closeTooltipTimeout;},N.richTooltip.tooltipCloseDelay||this.tooltipCloseDelay);}else{if(N.tooltip){this.isIgnoreTooltipCloseDelay=false;mstrmojo.tooltip.close();}}this.hasOpenTooltip=false;},unrender:function E(N){I.call(this);this._super(N);}});mstrmojo._HasTooltip.TOOLTIP_OPEN_DELAY=L;mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY=G;}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom");var D=mstrmojo.dom,H=D.position,I=Math;function F(V,P,N){var O=this._ellTestNodes||{},K=O[V],M=mstrmojo.css.getComputedStyle(P),J=["width","height"];if(N){J.reverse();}var S=J[0],Q=J[1];if(!K||!D.contains(this.domNode,K.n,true,document.body)){var L=P.cloneNode(true);L.removeAttribute("id");L.removeAttribute("onclick");var U=L.style;U.position="absolute";U.top="-10000px";U.maxHeight=U.maxWidth="none";U[S]="auto";P.parentNode.appendChild(L);var R=parseInt(M["max-"+S],10);if(isNaN(R)){R=parseInt(M[S],10);}K=O[V]={n:L,m:R,d:S.substr(0,1)};if(K.m>0){this._ellTestNodes=O;}}else{K.n.innerHTML=P.innerHTML;}K.n.style[Q]=M[Q];return K;}function B(K,L){var M=this.ellipsisText;switch(this.ellipsisPosition){case"middle":var J=I.floor(L/2);return K.slice(0,J).join("")+M+K.slice(-J).join("");case"end":return K.slice(0,L).join("")+M;default:return K.join("");}}var G=4;mstrmojo._SupportsEllipsisText=mstrmojo.provide("mstrmojo._SupportsEllipsisText",{_mixinName:"mstrmojo._SupportsEllipsisText",ellipsisText:"\u2026",ellipsisPosition:"end",ellipsize:function A(V,P,O){var W=P.innerHTML;if(!W){return false;}var K=F.call(this,V,P,O),M=function(){var X=H(K.n)[K.d];return(X<=K.m);};if(M()){return false;}var L=K.n,J=W.split(""),R=0,N=J.length,Q,S;while(R<N){var U=I.floor((R+N)/2);W=L.innerHTML=B.call(this,J,U);if(M()){R=U+1;}else{N=U-1;}if(N-R<G){for(S=R-1;S<N+1;S++){W=L.innerHTML=B.call(this,J,S);if(!M()){break;}Q=W;}}if(Q){P.innerHTML=Q;break;}}return true;},ellipsizeElements:function C(U,O,N){var L=F.apply(this,arguments),M=function(){var V=H(L.n)[L.d];return(V<=L.m);};if(M()){return false;}var Q=this.ellipsisText;var P=this;var K=document.createElement("span");K.innerHTML=Q;var J=function(Z,Y){var V=Z.slice(0,Y).concat([K]);var X=document.createElement("div");for(var W=0;W<V.length;W++){X.appendChild(V[W]);}return X.innerHTML;};var S=function(W,a,Z,V){var d=0,X=a.length,b,g,e;var Y=function(h){while(h.hasChildNodes()){h.removeChild(h.lastChild);}};while(d<X){var f=I.floor((d+X)/2);if(V){g=Z.call(P,a,f);W.nodeValue=g;}else{Y(W);g=Z.call(P,a,f);W.innerHTML=g;}if(M()){d=f+1;}else{X=f-1;}if(X-d<G){e=d==0?0:d-1;for(;e<X+1;e++){if(V){g=Z.call(P,a,e);W.nodeValue=g;}else{Y(W);g=Z.call(P,a,e+1);W.innerHTML=g;}if(!M()){if(!V){W.removeChild(W.lastChild);b=g=W.innerHTML;}break;}if(!V){W.removeChild(W.lastChild);g=W.innerHTML;}b=g;}}if(b){if(V){W.nodeValue=b;}else{W.innerHTML=b;}break;}}};var R=function(Y){if(Y.nodeType==3){var Z=Y.nodeValue;if(!Z){return false;}S(Y,Z.split(""),B,true);return true;}else{var W=Y.childNodes;if(!W||W.length===0){return false;}var X=[];for(var V=0;V<W.length;V++){X[V]=W[V];}if(X.length!=1||X[0].nodeType!=3){S(Y,X,J,false);}return R(Y.lastChild);}};O.style.visibility="visible";L.n.style.visibility="hidden";R(L.n);O.style.visibility="hidden";L.n.style.visibility="visible";return true;},unrender:function E(J){delete this._ellTestNodes;this._super(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.css");var B="tx-touch",E=100,D='<div class="mstrmojo-dicPreview dicx{@t} {@x}" ontouchstart="mstrmojo.all[\'{@id}\'].previewTouchStart()";><div><div>{@v}</div></div></div>';mstrmojo.android._HasPreviewButton=mstrmojo.provide("mstrmojo.android._HasPreviewButton",{_mixinName:"mstrmojo.android._HasPreviewButton",renderPreview:function F(){var I=this.openerNode,J=this.group||this,H=(J.openerType===2)||!!this.dic.dm||this.dicChanged;this.renderPreviewButton(I,H?this.dv:I.innerHTML);},renderPreviewButton:function A(K,N){var Q=this.dic,O=Q.t,P=this.group||this,M=false,J=true,I=mstrmojo.DICConfig.TYPES,R=[];switch(O){case I.SLIDER:case I.TEXTAREA:J=!Q.dm;break;case I.SWITCH:case I.TOGGLE:case I.RATING:case I.STEPPER:case I.LIKERTSCALE:J=false;break;}if(P.openerType===2){M=J;}if(J){var L=K.style;L.border="";L.padding="";R.push("arw");if(M){R.push("prv");}}var H=this.id;K.innerHTML=mstrmojo.string.apply(D,{t:O,v:N||"&nbsp;",id:H,x:R.join(" ")});this._previewNode=K.firstChild;if(this.inlineExtraCssText){this._previewNode.style.cssText+=" "+this.inlineExtraCssText;}},setDirtyFlag:function C(K,J){var H=this._previewNode,I=H&&H.firstChild;mstrmojo.css.addClass(I||J,"tx-active");},previewTouchStart:function G(){var H=this;mstrmojo.css.addClass(H._previewNode,B);if(this._holdTimer){clearTimeout(this._holdTimer);}this._holdTimer=setTimeout(function(){delete H._holdTimer;mstrmojo.css.removeClass(H._previewNode,B);},E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){if(this.avatar){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});mstrmojo.ui._HasUITheme.EnumThemeNames={LIGHT_THEME:"mojo-theme-light",DARK_THEME:"mojo-theme-dark"};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(U){if(this._editComplete){return ;}var Y,R=false,X=this.text,V=false;if(U===C){Y=X;V=true;R=true;}if((!U&&U!==0)||(!this.allowNewLine&&U===L)){var S=this[this.editableSlot],W=S.innerText||S.textContent||"";if(!this.allowNewLine){Y=W.replace(/\n/g,"");}else{Y=W;}R=true;if(!this.allowEmptyText&&Y.length===0){Y=X;V=true;}}if(R){this._editComplete=true;Y=Y.replace(/\u00A0/g,"\u0020");this.text=Y;this.set("isEditing",false);this.onTextEditComplete(Y!==X,X);delete this._editComplete;}if(V){this.refresh();}}function E(R){var S={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[S[R.name]]||(R.name==="click"&&this.editOnTwoClicks)&&R.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(U,S,R){if(typeof S["on"+R]!=="function"){H.attachMarkupEvent(U,S,R);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,editOnTwoClicks:false,firstClickTime:undefined,allowEmptyText:false,allowTrimming:true,allowNewLine:false,editOnDoubleClick:false,onTextEditBegin:mstrmojo.emptyFn,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var U=this.editableSlot,R=this[U],V=this[this.editButtonSlot||U];K.addClass(R,"hasEditableText");this.text=this.text||R.innerText||R.textContent||"";R.innerHTML=this.getEditableTextInnerHTML();var S=this.id;if(this.editOnClick||this.editOnTwoClicks){F(S,V,"click");}F(S,V,"dblclick");F(S,R,"blur");F(S,R,"keyup");F(S,R,"keydown");},getEditableTextInnerHTML:function Q(){return N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");},onclick:function P(R){if(this.editOnClick){E.call(this,R);}if(this._super){this._super(R);}},onTwoClicks:function(R){if(this.editOnTwoClicks){E.call(this,R);}if(this._super){this._super(R);}},ondblclick:function G(R){E.call(this,R);},onblur:function M(){I.call(this);},onkeyup:function B(S){var R=window.event||S.e;I.call(this,R.keyCode);},onkeydown:function J(S){var R=window.event||S.e;if(R.keyCode===L){I.call(this,R.keyCode);S.cancel();}},_set_text:function D(U,R){var S=this.text;this.text=R;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(R||"",true);}return(S!==R);},onisEditingChange:function O(){if(this.hasRendered){var R=this[this.editableSlot],S=!!this.isEditing;R.contentEditable=S;R.spellcheck=false;K.toggleClass(R,"editable",S);if(S){R.focus();H.setElementSelection(R);this.onTextEditBegin();}else{R.blur();R.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");mstrmojo.android.selectors._SupportsHoriz=mstrmojo.provide("mstrmojo.android.selectors._SupportsHoriz",{_mixinName:"mstrmojo.android.selectors._SupportsHoriz",scrollerConfig:{bounces:false,showScrollbars:false},minItemHeight:25,getItemProps:function A(H,D){var G=this._super(H,D),F=this.height,I=this.items.length,E;G.tag="label";G.n=G.n||"&nbsp";if(this.isHoriz){if(F){E=F;}if(this.itemWidthMode===0){G.style+="width:"+Math.floor(100/I)+"%;";}}else{if(F){E=Math.round(parseInt(F,10)/I);E=Math.max(E,this.minItemHeight);E+="px";}}if(E){G.style+="line-height:"+E+";";}return G;},init:function C(E){this._super(E);if(this.isHoriz){this.cssDisplay="table";var D=["horiz"];if(this.itemWidthMode===0){D.push("fixedWidth");}mstrmojo.css.addWidgetCssClass(this,D);}},updateScrollerConfig:function B(){var G=this._super(),K=this.itemsContainerNode,F="Height",D="y",J="v",E={};if(this.isHoriz){F="Width";D="x";J="h";}G.scrollEl=K;var L=this[F.toLowerCase()];if(L){L=parseInt(L,10);var I=Math.max(K["offset"+F]-L,0),H=G[J+"Scroll"]=(I!==0);if(H){E[D]={start:0,end:I};}}G.offset=E;G.origin=G.origin||{x:0,y:0};return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var X=mstrmojo.dom,V=mstrmojo.hash,Y=mstrmojo.array,K=function K(AD,AB){var AC=this.getCellForNode(AD),AA=this.getCellForNode(AB);return !AC||!AA||AC.hasOwnProperty("mix")===AA.hasOwnProperty("mix");},H=function H(AE){var AD=[],AB=this.clonedRowHeader&&this.clonedRowHeader.getTableNode()&&this.clonedRowHeader.getTableNode().tBodies,AC=[],AA;AC.push(this.zone.tableNode.tBodies);if(AB){AC.push(AB);}Y.forEach(AC,function(AF){Y.forEach(AF,function(AG){for(AA=0;AA<AG.childNodes.length;AA++){AD.push(AG.childNodes[AA]);}if(AE&&AG.childNodes.length<this.zone.rowsPerPage){AD.push.apply(AD,new Array(this.zone.rowsPerPage-AG.childNodes.length));}},this);},this);return AD;},C=function C(AB,AD){var AC=H.call(this,true)[AD],AA;for(AA=0;AA<AC.childNodes.length;AA++){if(q.call(this,AC.childNodes[AA])>AB){return null;}if(q.call(this,AC.childNodes[AA])===AB){return AC.childNodes[AA];}}},q=function q(AA){var AB=this.getCellForNode(AA);return AB&&AB.colIx||0;},A={REPLACE_ALL:1,REMOVE:2,APPEND:3,TOGGLE:4},l={CONTROL:"Ctrl",SHIFT:"Shft",SINGLE:"Single"},e=function e(){return this.rhsCP.startIndexInContainer;},M=function M(AB,AC){var AA=this.rhsCP.getUnmergedCells(AB)||[];if(AA.length>AC){return AA[AC];}else{return this.rhsCP.getCell(AB,AC-AA.length);}},Q=function Q(AK,AG,AA){var AF=AK.o,AB=AF,AD=AK._gd,AJ=AK._e&&AK._e.id,AI,AH=this.zone.searchRow(AF+AG),AE,AC=AK.colIx;if(AH!==null){AE=AA===1?AH.max-AG:AH.min;while(Math.abs(AF-AE)>0){AI=M.call(this,AF+AA,AC);if(!AI||AJ!==(AI._e&&AI._e.id)||(AB!==AI.o&&AD===AI._gd)){break;}AF+=AA;}return AF+AG;}else{return null;}},b=function(AA){var AD=this.model.getCellDataUnion(AA),AB={},AC;Y.forEach(AD,function(AE){AC=AE.v;if(AB[AE.tid]&&AB[AE.tid][0]&&AB[AE.tid][0].n){AC=AB[AE.tid][0].n+":"+AE.v;}AB[AE.tid]=[{id:AE.eid,n:AC}];});return AB;},j=function j(AP){if(!AP){return null;}if(!this.selectSiblings(AP)){return[AP];}var AL=[],AF=this.getCellForNode(AP),AO=this.gridData,AN=AO.gsi,AK,AD,AJ,AQ,AA,AB,AG,AE,AM,AH,AI=function(AS,AR){var AT=true;if(AS.length===AR.length){Y.forEach((AS||[]),function(AU){AT=AT&&Y.find(AR,"id",AU.id)!==-1;return AT;});return AT;}return false;},AC=this.model.getCellInfo(AF);if(AC.isMetric){if(AN.tma===2){AK=AP.parentNode.childNodes;for(AD=0;AD<AK.length;AD++){AE=true;AJ=this.getCellForNode(AK[AD]);if(AJ&&AJ.hasOwnProperty("mix")){AM=b.call(this,AJ);AH=b.call(this,AF);AB=V.keyarray(AM);AG=V.keyarray(AH);if(!!AB.length&&AB.length===AG.length){Y.forEach((AB||[]),function(AR){AE=AE&&AI(AM[AR],AH[AR]);return AE;},this);}else{AE=false;}if(AE){AL.push(AK[AD]);}}}}else{AL.push(AP);}}else{if(this.isSelectAllCell(AP)){AL.push(AP);}else{if(AF&&AF._e&&AF.axis===1){AQ=H.call(this,false);Y.forEach((AQ||[]),function(AR){for(AD=0;AD<=AR.childNodes.length;AD++){AA=AR.childNodes[AD];AJ=this.getCellForNode(AA);if(AJ&&AJ._e){if(this.model.compareElementsId(AF._e.id,AJ._e.id)){AL.push(AA);}}}},this);}else{if(AF&&AF._e&&AF.axis===2){AK=AP.parentNode.childNodes;for(AD=0;AD<AK.length;AD++){AE=true;AJ=this.getCellForNode(AK[AD]);if(AJ&&AJ._e){if(AF._e.id===AJ._e.id){AL.push(AK[AD]);}}}}}}}return AL;},f=function f(){this.selCells=[];this.clearSelections();},S=function S(AC){var AB=this,AA=AB.getCellForNode(AC);this.selCells=Y.filter(this.selCells,function(AE){var AD=AB.getCellForNode(AE);return AD&&AA&&(AD.tui||AD.ui)!==(AA.tui||AA.ui);});this.clearUnitSelections(this.model.data.gts[AA.axis===1?"row":"col"][AA.tui||AA.ui].id);},w=function w(AC){var AB=this.isSelectAllCell(AC),AD=this.getCellForNode(AC),AE=this.model.getCellInfo(AD),AA=this.model.getCellTitleInfo(AD);if(!AD){return ;}if(!AB){if(Y.indexOf(this.selCells,AC)===-1){this.selCells.push(AC);}}else{if(!AD.hasOwnProperty("mix")){var AF=AE.isMetric?"Metrics":(AA.title&&AA.title.id),AH=this.model.scm,AG=AF&&AH&&AH[AF];if(AG&&(AG.all||AG.showall)){this.addAttributeSelection(AA.title.id,"OA:(All)","all");}}return ;}if(AD.hasOwnProperty("mix")){this.addMetricValueSelection(b.call(this,AD));}else{this.addAttributeSelection(AA.title.id,AD._e.id,AD._e.n);}},I=function I(AA){var AC=this.selCells.indexOf(AA),AB=this.getCellForNode(AA);this.selCells.splice(AC,1);if(AB.hasOwnProperty("mix")){this.removeMetricValueSelection(b.call(this,AB));}else{this.removeAttributeSelection(this.model.getCellTitleInfo(AB).title.id,AB._e.id);}},W=function W(){this.clearContextMenuHighlights();this.cmSelCells=[];this.clearCxtMnuSelection();},u=function u(AB,AD){var AC=this.getCellForNode(AB),AA=this.model.getCellTitleInfo(AC);if(Y.indexOf(this.cmSelCells,AB)===-1){this.cmSelCells.push(AB);if(AC.hasOwnProperty("mix")){this.addContextMenuMetricValueSelection(b.call(this,AC));}else{this.addContextMenuAttributeSelection(AA.title.id,AC._e.id,AD.n,undefined,undefined,undefined,AD.fm);}}},F=function(AK){var AI=this,AE={n:"",fm:""},AH,AB=[],AC,AA,AJ,AG,AD=[],AF=0;if(AK.length){Y.forEach(AK,function(AL){AH=AI.getCellForNode(AL);AA=AH._e;AC=AA&&AA.n;if(AC){AB.push(AC);}});if(AA){AJ=AA.id.split(";");AG=AJ[1];AD=Y.map(AI.model.getAttributeFormsInTemplate(AG),function(AL){return AL.bfid;});AE.fm=AD.join(";");AF=AD.length;}if(AB.length){AE.n=AB.slice(0,AF).join(" ");}}return AE;},d=function d(){var AD=this,AB,AA,AC;W.call(this);this.cmSelCells=this.selCells.slice(0);Y.forEach(this.cmSelCells,function(AE){AC=F.call(AD,j.call(AD,AE));AB=AD.getCellForNode(AE);AA=AD.model.getCellTitleInfo(AB);if(AB.hasOwnProperty("mix")){AD.addContextMenuMetricValueSelection(b.call(AD,AB));}else{AD.addContextMenuAttributeSelection(AA.title.id,AB._e.id,AC.n,undefined,undefined,undefined,AC.fm);}});},B=function B(AB){var AA=this.getCellForNode(AB);if(AA){return Y.some(this.model.getCellDataUnion(AA),function(AC){return AC.isSubtotal;});}return false;},U=function U(AC,AE,AB){var AD,AA,AF=this;if(V.isEmpty(AC)&&(!AB&&this.clearAllSelections&&this.clearAllSelections())){f.call(this);}AC=Y.filter((AC||[]),function(AG){return !B.call(AF,AG);});Y.forEach(AC,function(AG){AA=AE;AD=~Y.indexOf(this.selCells,AG);if(A.TOGGLE===AA){AA=AD?A.REMOVE:A.APPEND;}if(A.REPLACE_ALL===AA){if(AB){S.call(this,AG);}else{f.call(this);}AE=AA=A.APPEND;}switch(AA){case A.APPEND:w.call(this,AG);break;case A.REMOVE:I.call(this,AG);break;}},this);},a=function a(AA){var AC=this,AB;AA=Y.filter((AA||[]),function(AD){return !B.call(AC,AD);});W.call(this);AB=F.call(this,AA);Y.forEach(AA,function(AD){u.call(this,AD,AB);},this);},J=function J(AF,AG,AB,AD){var AC=Math.min(AG,AD),AE=Math.min(AF,AB),AL=Math.max(AG,AD),AA=Math.max(AF,AB),AI,AH,AK=[],AJ=function(AM,AN){Y.forEach((AN||[]),function(AO){if(Y.indexOf(AM,AO)===-1){AM.push(AO);}});};for(AI=AE;AI<=AA;AI++){for(AH=AC;AH<=AL;AH++){AJ(AK,j.call(this,C.call(this,AI,AH)));}}U.call(this,AK,A.APPEND);},Z=function Z(AA,AG){var AH,AE=this.selectorControl&&this.selectorControl.showall,AI=!!this.defn.msuc,AB=this.isSelectAllCell(AG),AJ=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),AC=!this.selectorControl&&(AJ&&AJ.length>0),AK,AD,AM,AF,AL=this.parent&&this.parent.defn&&this.parent.defn.t===527;if(AL){AI=!!this.parent.defn.msuc;}if(AC){if(!AI){AA=l.SINGLE;}AM=this.getCellForNode(AG);AD=AM&&AM.id;AF=Y.find(AJ,"did",AD);if(AF>=0){AK=AJ[AF].sc;AE=AK.showall||AK.all;}}if(AG.attributes.getNamedItem("ei")!==null&&(AC||(!B.call(this,AG)&&(AE||!AB)))){AH=this.getSelectionHash();if(V.isEmpty(AH)){this.selCells=[];}if(AG.className.indexOf(this.CELL_HIGHLIGHT)!==-1&&this.selCells.length>0){if(AE===false&&(AA===l.SINGLE||AA===l.CONTROL)&&o.call(this,AG)){return ;}if(AA===l.SINGLE&&o.call(this,AG)){AA=l.CONTROL;this.xTabHiddenTextArea.blur();}}this.clearHighlights();this["on"+AA+"Select"](AG,AC);this.lastSelectedCell=AG;if(AA!==l.SHIFT){this.shiftInfo={lastCell:AG,selCells:[].concat(this.selCells)};}this.markSelections();this.endSelections();}else{if(AE===true&&AG.attributes.getNamedItem("ei")===null&&!this.cellMenuOnCloseFlag){f.call(this);this.markSelections();this.endSelections();}}},z=function z(AC){var AB=false,AA=this.isSelectAllCell(AC);if(AC.attributes.getNamedItem("ei")!==null&&!AA){AB=this.isSelected(AC);if(AB){d.call(this);}else{a.call(this,j.call(this,AC));}this.markContextMenuSelections();}},o=function o(AG){var AC=this.selCells,AE=true;if(this.selectSiblings(AG)){var AB=this.getCellForNode(AC[0]),AA=this.model.getCellInfo(AB).isMetric,AD=AA?AB._ei:AB._e&&AB._e.id,AF=AA?AB._tp&&AB._tp._e&&AB._tp._e.id:undefined;AE=!Y.some(AC,function(AH){AH=this.getCellForNode(AH);if(AA){return AH._tp._e.id===AF&&AH._ei!==AD;}else{return AH._e&&AH._e.id!==AD;}}.bind(this));}else{if(AC.length>1){AE=false;}}return AE;};mstrmojo.vi.ui.rw._IsMultiselectXtab=mstrmojo.provide("mstrmojo.vi.ui.rw._IsMultiselectXtab",{_mixinName:"mstrmojo.vi.ui.rw._IsMultiselectXtab",selCells:[],cmSelCells:[],cellMenuOnCloseFlag:false,lastSelectedCell:null,isMultiSelect:false,getLastSelectedCell:function G(){return this.lastSelectedCell;},onCtrlSelect:function g(AA,AB){U.call(this,j.call(this,AA),A.TOGGLE,AB);},onShftSelect:function x(AP,AC){if(AC){return this.onSingleSelect(AP,AC);}var AB=this.shiftInfo.lastCell;if(K.call(this,AP,AB)){this.selCells=[].concat(this.shiftInfo.selCells);var AK=e.call(this),AL,AE,AI,AD,AJ,AN,AM=q.call(this,AB),AH=q.call(this,AP),AA=parseInt(AB.getAttribute("r"),10),AO=parseInt(AP.getAttribute("r"),10),AG=this.model.getCellInfo(this.getCellForNode(AP));if(AG.isMetric){AL=AA;AE=AO;}else{if(AM===AH){AJ=this.getCellForNode(AB);AN=this.getCellForNode(AP);}else{var AF=Math.min(AM,AH);AJ=M.call(this,AA-AK,AF);AN=M.call(this,AO-AK,AF);if(this.zone.searchRow(AJ.o+AK)===null){AJ=this.getCellForNode(AB);}if(this.zone.searchRow(AN.o+AK)===null){AN=this.getCellForNode(AP);}}AI=(AJ.o<AN.o)?AJ:AN;AL=Q.call(this,AI,AK,-1);AD=(AJ.o>AN.o)?AJ:AN;AE=Q.call(this,AD,AK,1);}J.call(this,AM,AL,AH,AE);}},onSingleSelect:function P(AA,AB){U.call(this,j.call(this,AA),A.REPLACE_ALL,AB);},handleSelection:function E(AE,AA,AD){var AC=AD&&X.findAncestorByName(AD,"td",true,this.viewport),AB=K.call(this,AC,this.lastSelectedCell),AF;if(!X.isRMC(AE,AA)){if(X.isMetaKey(AA,AE)&&AB){AF=l.CONTROL;}else{if(X.shiftKey(AA,AE)&&AB){AF=l.SHIFT;}else{AF=l.SINGLE;}}Z.call(this,AF,AC);}else{if(!(X.isMetaKey(AA,AE)||X.shiftKey(AA,AE))){z.call(this,AC);}}},markSelections:function D(){this.highlightCells(this.selCells);},markContextMenuSelections:function R(){this.highlightCellsWithContextMenuSelection(this.cmSelCells);},handlesMultiSelection:function k(AA){return(this._super&&this._super(AA))||this.isMultiSelect;},isSelected:function t(AA){return Y.indexOf(this.selCells,AA)!==-1;},addSelection:function O(AA){if(!this.isSelected(AA)){Z.call(this,l.CONTROL,AA);}},onclick:function h(AB){X.clearBrowserHighlights();W.call(this);var AD=AB.getTarget&&AB.getTarget();if(this.handlesMultiSelection(AB)){if(mstrApp.isExpress){var AC=AD&&X.findAncestorByName(AD,"td",true,this.viewport),AA=X.findAncestorByName(AD,"span",true,AC);if(AA){this.handleSelection(AB.e,AB.hWin,AD);}}else{this.handleSelection(AB.e,AB.hWin,AD);}}else{this._super(AB);}this.cellMenuOnCloseFlag=false;},singleUnitSelect:function p(){var AB=this.lastSelectedCell,AA=this.getCellForNode(AB);this.defaultAction(AB,AA);},getActionCells:function L(AA){var AC=this,AB=Y.map(Y.filter(this.selCells,function(AE){var AD=AC.getCellForNode(AE);return AD&&AA&&(AD.tui||AD.ui)===(AA.tui||AA.ui);}),function(AD){return AC.getCellForNode(AD);});if((AB.length===0)||!this.model.getCellTitleInfo(AA).isSrcTitle){AB=this._super(AA);}return AB;},openXtabCellMenu:function N(AE){var AB=mstrmojo.findAncestor(this,"openXtabCellMenu"),AC=this,AA=null;if(this.isInFilterPanel()&&mstrApp&&mstrApp.isInVFInteractMode){AB=this.controller&&this.controller.view;}if(AB){if(AE.evt){if(X.isMetaKey(AE.hWin,AE.evt)){var AD=AE.td&&X.findAncestorByName(AE.td,"td",true,this.viewport);this.addSelection(AD);}}AA=AB.openXtabCellMenuWithSelectionStyleControl(AE);if(AA){AA.onCloseMenuCallBack=function(){AC.clearContextMenuHighlights();AC.cellMenuOnCloseFlag=true;};}if(this.parent&&this.parent.selectVIUnit){this.parent.selectVIUnit();}}},highlightCells:function(AB,AA){if(this._super){this._super(AB,AA);}if(AA){this.selCells=AB;}},selectSiblings:function(){return true;},isSelectAllCell:function s(AC){var AA=this.getCellForNode(AC),AB=AA&&this.model.getCellDataUnion(AA);return !!AA&&(AB.length===0||(AB.length===1&&!AB[0].eid));}});}());(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");if(F.params&&!F.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){F.params.sessionState=mstrApp.sessionState;}H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){if(typeof J==="string"&&J[0]==="{"){try{J=JSON.parse(J);}catch(K){}}if(J.mstrerr){J.code=J.mstrerr.code;J.message=J.mstrerr.message;}E&&E.response(G,true,J);},failure:function(L){var M=L.status,K=L.getResponseHeader("X-MSTR-TaskErrorCode"),J;if(M===0){M=K||M;J=mstrmojo.desc(15666,"The connection to the MicroStrategy Web Server failed. Please wait a few minutes and then attempt to reload the page. If the condition persists, please contact your administrator.");}else{M=K||M||"-999";J=L.getResponseHeader("X-MSTR-TaskFailureMsg")||L.responseText||"Unexpected error, please contact your administrator";}E&&E.response(G,false,{code:M,message:J});},complete:function(){delete D[G];},textResponse:F.callback.textResponse},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,U){if(U){var N=P.itemWidgets,L,O,I,R;for(O=0,I=U.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=U.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,d=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(g){var f=parseInt(g,10),h=mstrmojo.validation.STATUSCODE;if(f===0||f===1||f>10){return{code:h.VALID};}return{code:h.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(f){var g=String(f).replace(/[^\d]/g,"");if(g.length<10){return{code:d.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(f)){return{code:d.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:d.VALID};},VALIDATE_ZIPCODE:function G(f){var h="",g=this.dtp;if(!H.REGEXP.US_ZIP.test(f)){if(H.isNumeric(g)||H.isInt(g)){h=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(g)){h=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:d.INVALID,msg:h};}return{code:d.VALID};},VALIDATE_EMAIL:function U(f){var g=f.indexOf("@");if(g===-1){return{code:d.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(f.substring(g).indexOf(".")===-1){return{code:d.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(f)?{code:d.VALID}:{code:d.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(f){var h=this.dtp,g;if(H.isNumeric(h)||H.isInt(h)){g=String(f).replace(/[^\d]/g,"");if(g.length!==9){return{code:d.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(f)){return{code:d.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:d.VALID};}};H.isInt=function D(f){return A[f]===1;};H.isNumeric=function Z(f){return A[f]===2||A[f]===5;};H.isString=function J(f){return A[f]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,a=mstrmojo.num,V=mstrmojo.string,F=mstrmojo.date;function P(p,q){var k=p.dtp,o=p.constraints,t=o.allowedFormatChars||"",j=(A[k]===1),f=H.isNumeric(k),g=(A[k]===6),s=mstrmojo.locales.number.THOUSANDSEPARATOR,h=mstrmojo.locales.number.DECIMALSEPARATOR,l;if(j){if(!p._intRegExp){t+="0-9-"+(p.isList?L:"")+s;p._intRegExp=new RegExp("[^"+t+"]");}l=p._intRegExp;}if(f){if(!p._numericRegExp){t+="0-9-#"+(p.isList?L:"")+h+s;p._numericRegExp=new RegExp("[^"+t+"]");}l=p._numericRegExp;}return !!l&&l.test(q);}function e(p,s){var k=p.dtp,o=p.constraints,j=(A[k]===1),f=H.isNumeric(k),g=(A[k]===6),h=o.min,q=o.max,l;if(h===undefined&&q===undefined){return false;}if(j||f){if(a.isBigDecimal(s)){return a.inNumericRange(a.parseBigDecimal(s),h,q)!==0;}return a.inNumericRange(s,h,q)!==0;}if(g){return F.inDateTimeRange(s,h,q)!==0;}return false;}function K(g,f){return !a.isNumeric(f)&&!a.isBigDecimal(f);}function R(j,g){var h=(j.dtp===M.DATE),f=(j.dtp===M.TIME);return(h?!F.isDate(g):(f?!F.isTime(g):!F.isDateAndOrTime(g)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function X(f){this._super(f);if(!this.constraints){this.constraints={};}var g=this.constraints;if(!g.hasOwnProperty("trigger")){g.trigger=B.NONE;}},_set_value:function(l,h){var j=this.value,g=(j!==h);if(g){this.value=h;var k=this.constraints.trigger,f=(k&B.VALUESET)>0;if(f){this.validate(h);}}return g;},validate:function O(){var h=(this.value!==null&&this.value!==undefined)?this.value:"",l=this.isList?h.split(L):[h],k,g,o,f=l.length,j;for(j=0;j<f;j++){k=this.doValidation(l[j]);g=(k.code>d.VALID);if(g){if(f>1){k.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",l[j]||" ");}break;}}o=g?"onInvalid":"onValid";if(!g&&this.autoFormat){this.format();}this.set("validationStatus",k);if(this[o]){this[o](k);}},format:function Y(){var l=this.dtp,h=(A[l]===6);if(!h){return ;}var p=mstrConfig.listSep,t=this.value||"",g=this.isList?t.split(p):[t],s=l===14,q=[],f,j=mstrmojo.locales.datetime,o=g.length,k;for(k=0;k<o;k++){t=g[k];f=F.parseDateAndOrTime(t);if(f){if(s&&f.date){q.push(F.formatDateInfo(f.date,j.DATEOUTPUTFORMAT));}else{q.push((f.date?F.formatDateInfo(f.date,j.DATEOUTPUTFORMAT):"")+" "+(f.time?F.formatTimeInfo(f.time,j.TIMEOUTPUTFORMAT):""));}}}this.set("value",q.join(p));},isValid:function W(){var f=this.validationStatus;if(!f){this.validate();}return this.validationStatus.code===d.VALID;},clearValidation:function b(){this.set("validationStatus",{code:d.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(w){var s=this.constraints,t=s.regExp,h=s.validator,f={id:this.id,code:d.VALID,msg:""},q=this.dtp,p=(A[q]===1),g=H.isNumeric(q),j=(A[q]===3),k=(A[q]===6),o=V.isEmpty(w),u=String(w).length,l="",z=mstrmojo.locales.validation;if(this.required&&o){f.code=d.INVALID_EMPTY;f.msg=z.requiredFieldError;return f;}w=V.trim(w);if(!o&&P(this,w)){if(p){l=z.integerDataType;}if(g){l=z.numericDataType;}if(k){l=z.dateDataType;}f.code=d.INVALID_CHAR;f.msg=z.invalidCharError.replace("#",l);return f;}if(!o&&k&&R(this,w)){f.code=d.INVALID_BAD_DATESTRING;f.msg=z.invalidDateStringError;return f;}if(!o&&(g||p)&&K(this,w)){f.code=d.INVALID_BAD_NUMERICFORMAT;f.msg=z.invalidNumericFormatError;return f;}if(!o&&(p||g||k)&&e(this,w)){f.code=d.INVALID_OUTOFRANGE;if(s.min!==null&&s.max!==null){l=z.outofRangeError.replace("# ","").replace("##",a.toLocaleString(s.min)).replace("###",a.toLocaleString(s.max));}else{if(s.min!==null){l=z.noLessMinError.replace("##",a.toLocaleString(s.min)).replace("# ","");}else{if(s.max!==null){l=z.noGreaterMaxError.replace("###",a.toLocaleString(s.max)).replace("# ","");}}}f.msg=l;return f;}if(j&&s.minLen!==null&&s.maxLen!==null){if(u<s.minLen||u>s.maxLen){f.code=d.INVALID;f.msg=mstrmojo.desc(9211).replace(/#/,s.minLen).replace(/##/,s.maxLen);return f;}}if(t&&!t.test(w)){f.code=d.INVALID_REGEX;f.msg=mstrmojo.desc(9205);return f;}var x=h&&h.apply(this,[w]);if(x){f.code=x.code;f.msg=x.msg;return f;}return f;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.num","mstrmojo.array","mstrmojo.AndroidDICFactory");var F=1,J=0,L=1,N=2,G=".",I=mstrmojo.dom,K=mstrmojo.css,E=mstrmojo.hash,D=mstrmojo.Enum_Keys.TAB,H=function(P){return(P>=1&&P<=7)||P==21||P==22||P==30;},C=function(S,Q){if(I.isIE&&!/px$/.test(Q)){var P=document.createElement("img"),R;P.style.zIndex=-1;P.style.left=Q;S.appendChild(P);R=P.style.pixelLeft;S.removeChild(P);return R+"px";}return Q;},B=function(P,Q){return parseInt(C(P,K.getStyleValue(P,Q)),10)||0;},M=function(P){return{lp:B(P,"paddingLeft"),rp:B(P,"paddingRight"),tp:B(P,"paddingTop"),bp:B(P,"paddingBottom")};},O=function(Q){var P=Q.currentStyle;if(!P){P=document.defaultView.getComputedStyle(Q,null);}return{fontFamily:P.fontFamily,fontSize:C(Q,P.fontSize),fontStyle:P.fontStyle,fontVariant:P.fontVariant,fontWeight:P.fontWeight,textAlign:P.textAlign};};mstrmojo._IsAndroidInputControl={_mixinName:"_IsAndroidInputControl",dic:null,owner:null,openerNode:null,popupStyle:J,items:null,applyOnEnter:true,lv:null,init:function(S){if(this._super){this._super(S);}var V=this.dic,U=V.dt,R=mstrmojo.expr.DTP,Q,P=[];if(mstrApp.useBinaryFormat){if(U==R.DATE||U==R.TIME||U==R.TIMESTAMP){Q=mstrmojo.date.parseDateAndOrTime(this.value);if(Q){if(U!=R.TIME){P.push(mstrmojo.date.formatDateInfo(Q.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}if(U!=R.DATE){P.push(mstrmojo.date.formatTimeInfo(Q.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}this.value=P.join(" ");}}}this.lv=this.value;if(V.wm&&V.w===undefined){V.wm=0;}},showByDefault:false,hasPreview:false,getItems:function(){var X=this.dic,Q=[],V,S,P=0,U=String(X.itv),R=U&&U.indexOf(G),W=H(X.dt);if(R>=0){P=U.substring(R+1).length;}if(parseInt(X.ipt,10)===0){for(V=0,S=X.min;S<X.max+0.00001;V++,S+=X.itv){Q[V]={n:mstrmojo.num.toLocaleString(P>0?S.toFixed(P):S),v:S};}}else{Q=X.vls;mstrmojo.array.forEach(Q,function(Y){if(Y.n===undefined){Y.n=W?mstrmojo.num.toLocaleString(Y.v):mstrmojo.string.encodeHtmlString(Y.v);}});}return Q;},font:null,onfontChange:function(){if(this.getInputNode){var P=this.getInputNode(),Q=this.font;E.forEach(Q,function(S,R){P.style[R]=S;});}},getOpenerNodeStyle:function(){var P=this.group&&this.group.ons,Q=this.openerNode;if(!P){P=M(Q);P.hp=P.lp+P.rp;P.vp=P.tp+P.bp;P.iw=Math.max(0,Q.clientWidth-P.hp);P.ih=Math.max(0,Q.clientHeight-P.vp);if(this.group){this.group.ons=P;}}return P;},onvalueChange:function(){if(this._super){this._super();}this.dicChanged=true;if(this.showByDefault){this.applyChanges();}else{if(this.popupStyle!==J&&this.popup&&this.popup.enableApply){this.popup.enableApply();}}},preBuildRendering:function(){if(this._super){this._super();}this.openerNode=this.openerNode||this.owner.domNode;if(this.showByDefault){this.openerStyle=this.getOpenerNodeStyle();if(this.inlineExtraCssText){this.cssText+=" "+this.inlineExtraCssText;}}if(!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}},postBuildRendering:function(){var P=this.openerNode;if(this._super){this._super();}if(!mstrmojo.isDescendant(this.owner,this)){if(this.showByDefault){P.replaceChild(this.domNode,P.lastChild);}else{this.set("font",O(P));}}if(mstrmojo.DICConfig.isKeyNavigable(this.dic)){this.registerKeyEvents(this.domNode);}},applyChanges:function(){var W=this.lv,P=this.getCurValue?this.getCurValue():this.value,V=this.openerNode,R=this.getDisplayValue?this.getDisplayValue():P,U=this.dic.dt,Q=mstrmojo.expr.DTP,S=mstrmojo.locales.datetime;if(String(P)!==String(W)){if(mstrApp.useBinaryFormat){if(U==Q.TIME||U==Q.TIMESTAMP){P=P.replace(new RegExp(S.AM_NAME),"AM").replace(new RegExp(S.PM_NAME),"PM");}}this.lv=P;this.dv=R;if(this.owner&&this.owner.dataChanged){this.owner.dataChanged(this.k,W,{dv:R,v:P},V);}}return true;},cancelChanges:function A(){this.value=this.lv;},showInPopup:function(){this.popup=mstrmojo.AndroidDICFactory.createDICPopup(this.owner,this);if(this.focus&&!mstrApp.useBinaryFormat){this.focus();}},renderPreview:null,onTabDown:function(P){mstrmojo.dom.preventDefault(window,P);if(this.applyChanges()!==false){if(this.popup){this.popup.close();}this.owner.editNext(this.k);this.cleanup();}},cleanup:mstrmojo.emptyFn,registerKeyEvents:function(Q){var P=this;I.attachEvent(Q,"keydown",function(R){var S=R||window.event;if(S.keyCode===D){P.onTabDown(R);}});if(I.isIE){I.attachEvent(Q,"keyup",function(R){var S=R||window.event;if(S.keyCode===D){P.focus();}});}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.num","mstrmojo.locales");var D=mstrmojo.array,A=mstrmojo.num,B=mstrmojo.locales;mstrmojo.vi.util.NumberFormatUtility=mstrmojo.provide("mstrmojo.vi.util.NumberFormatUtility",{applyFormatToNumber:function C(P,Q,G){var H="\u00A4",L=/"[^"]*"/g,F=P.match(L),K=P.replace(L,H),O=["m","y","d","h","s"],N=G||false,E=new Date(),M=E.getFullYear(),J=E.getMonth(),I=E.getDay(),S=B.datetime,R;D.forEach(O,function(U){N=N||K.indexOf(U,0)!==-1;});if(N){K=K.replace(/y{3,}/g,M).replace(/y{1,2}/g,M.toString().slice(2,4));K=K.replace(/m{4,}/g,S.MONTHNAME_FULL[J-1]).replace(/m{3}/g,S.MONTHNAME_SHORT[J-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");K=K.replace(/d{4,}/g,S.dayNames[I-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");K=K.replace(/hh/g,"08").replace(/h/g,"8");K=K.replace(/ss/g,"04").replace(/s/g,"4");K=K.split(H);R=K[0];D.forEach(F,function(V,U){R+=V+K[U+1];});return R;}if(A.isNumeric(Q)){return A.formatByMask(P,A.parseNumeric(Q));}return Q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.hash","mstrmojo.string","mstrmojo.array","mstrmojo._FormatDefinition");var B=mstrmojo.num,G=mstrmojo.hash,F=mstrmojo.string,C=mstrmojo.array,E=mstrmojo._FormatDefinition.NumberFormatCategory;mstrmojo.MetricSelectorUtility=mstrmojo.provide("mstrmojo.MetricSelectorUtility",{_GENERIC:1,_RANK:2,_PERCENT:3,OP:{_EQUALS:0,_NOT_EQUALS:1,_GREATER:2,_GREATER_EQUAL:3,_LESS:4,_LESS_EQUAL:5,_BETWEEN:6,_NOT_BETWEEN:7,_IN:8,_NOT_IN:9,_IS_NULL:10,_IS_NOT_NULL:11},OP_NAMES:[{n:mstrmojo.desc(2795,"Equals"),v:0},{n:mstrmojo.desc(2796,"Does not equals"),v:1},{n:mstrmojo.desc(521,"Greater than"),v:2},{n:mstrmojo.desc(522,"Greater than or equal to"),v:3},{n:mstrmojo.desc(523,"Less than"),v:4},{n:mstrmojo.desc(524,"Less than or equal to"),v:5},{n:mstrmojo.desc(696,"Between"),v:6},{n:mstrmojo.desc(746,"Not between"),v:7},{n:mstrmojo.desc(587,"In"),v:8},{n:mstrmojo.desc(2204,"Not In"),v:9},{n:mstrmojo.desc(2202,"Is null"),v:10},{n:mstrmojo.desc(2203,"Is not null"),v:11}],RANK_OP_NAMES:[{n:mstrmojo.desc(529,"Highest"),v:1},{n:mstrmojo.desc(530,"Lowest"),v:2},{n:mstrmojo.desc(4407,"Highest %"),v:3},{n:mstrmojo.desc(4406,"Lowest %"),v:4}],Q:{_G:0,_RT:1,_RB:2,_PT:3,_PB:4},MRPFN:{TOP:1,BOTTOM:2,BETWEEN:3,EXCLUDETOP:4,EXCLUDEBOTTOM:5,NOTBETWEEN:6,EQUALS:7,DIFFERENTFROM:8,EQUALSDESCENDING:15,NOTEQUALSDESCENDING:16,GREATERTHANDESCENDING:4,GREATERTHANEQUALSDESCENDING:18,LESSTHANDESCENDING:20,LESSTHANEQUALSDESCENDING:1,BETWEENDESCENDING:13,NOTBETWEENDESCENDING:14,INDESCENDING:22,NOTINDESCENDING:24,EQUALSASCENDING:7,NOTEQUALSASCENDING:8,GREATERTHANASCENDING:5,GREATERTHANEQUALSASCENDING:17,LESSTHANASCENDING:19,LESSTHANEQUALSASCENDING:2,BETWEENASCENDING:3,NOTBETWEENASCENDING:6,INASCENDING:21,NOTINASCENDING:23},FN:{EQUALS:6,NOTEQUALS:7,GREATERTHAN:8,GREATERTHANEQUALS:10,LESSTHAN:9,LESSTHANEQUALS:11,BETWEEN:17,NOTBETWEEN:44,ISNULL:54,ISNOTNULL:55,IN:22,NOTIN:57,CONTAINS:76,NOTCONTAINS:79,BEGINSWITH:77,NOTBEGINSWITH:80,ENDSWITH:78,NOTENDSWITH:81,LIKE:18,NOTLIKE:43,AND:19,OR:20,NOT:21,RANK:23,RANKPERCENT:59,TUPLE:1000},F:[[6,7,8,10,9,11,17,44,22,57,54,55],[15,16,4,18,20,1,13,14,22,24],[7,8,5,17,19,2,3,6,21,23]],EnumNumberCategory:{Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10},typeHelperCls:{0:"MetricValueSliderHelper",defaultCls:"MetricRankSliderHelper"},ErrorType:{_GENERIC:mstrmojo.desc(11689,"Invalid Number"),_RANK:mstrmojo.desc(11856,"Please enter value between ## and ###.")},ErrorCode:{EmptyValue:"emptyValueVIWarning",InvalidValue:"invalidValueVIWarning",OutOfRange:"outOfRangeVIWarning",NotInteger:"notIntegerVIWarning"},getQuaByFunc:function(L,M){var I=this.F,H=this.Q,K=H._G,J=function(N){return C.indexOf(I[1],N)!==-1;};if(J(L)){K=(M===this._RANK)?H._RT:H._PT;}else{K=(M===this._RANK)?H._RB:H._PB;}return K;},getFuncInfo:function(K,L){var J={},I=this.Q,H=this.F;J[I._G]={ft:this._GENERIC,f:H[0][K]};J[I._RT]={ft:this._RANK,f:H[1][K]};J[I._RB]={ft:this._RANK,f:H[2][K]};J[I._PT]={ft:this._PERCENT,f:H[1][K]};J[I._PB]={ft:this._PERCENT,f:H[2][K]};return J[L]||{};},getOpIdxByfunc:function(J,K){if(!J||!K){return -1;}var H=this.F,I=-1;switch(K){case this._GENERIC:I=C.indexOf(H[0],J);break;case this._RANK:case this._PERCENT:I=C.indexOf(H[1],J);if(I===-1){I=C.indexOf(H[2],J);}break;}return I;},getIncludeByOp:function(I){var H=this.OP;return I===H._EQUALS||I===H._GREATER_EQUAL||I===H._LESS_EQUAL||I===H._BETWEEN||I===H._IN;},formatNumber:function(J,L,I){var M,K=this.Q,N=I.fm,H=I.cat;if(!B.validateFormat(N)){N="#,##0.00;(#,##0.00)";}if(J===K._G){M=(N)?B.formatByMask(N,L):B.format(I.cat,I.dp,I.curr,L);}else{if(J===K._RB||J===K._RT){M=String(parseInt(L,10));}else{if(J===K._PB||J===K._PT){M=parseFloat(L)+"%";}}}if((H===E.Fixed||H===E.Currency||H===E.Percentage)&&L<0&&!F.startsWith(M,"(")&&!F.startsWith(M,"-")){M="-"+M;}return M;},doValidation:function(U,L,P,N){var O=L.qua,R=L.low,K=L.high,M=this.Q,V=O===M._RT||O===M._RB,H=O===M._PT||O===M._PB,S="",J,I=this.ErrorCode;if(F.isEmpty(U)){S=I.EmptyValue;}else{if(!(B.isNumeric(U)||(H&&String(U).match(/^\d+(\.\d+)?%$/))||(N&&!H&&B.isBigDecimal(U)))){S=I.InvalidValue;}else{if((O===M._PT||O===M._PB)&&B.inNumericRange(parseFloat(U),R,K)){S=I.OutOfRange;J=H?["0","100%"]:[R,K];}else{if(V&&(!B.isInt(U)||B.parseInteger(U,10)<0)){S=I.NotInteger;}}}}return G.copy(P,{invalid:!!S,errorCode:S,args:J||[]});},restoreMetricSelectorProps:function D(I,H){if(!I||!H){return ;}G.copyProps(["max","min","cnt","dt","nov"],H,I);},restoreMetricSelectorSelections:function A(I,H){if(!I||!H){return ;}G.copyProps(["f","ft","cs"],H,I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.num","mstrmojo.array","mstrmojo.DICFactory");var F=1,J=0,M=1,O=2,G=".",I=mstrmojo.dom,K=mstrmojo.css,E=mstrmojo.hash,D=mstrmojo.Enum_Keys.TAB,H=function(R){return(R>=1&&R<=7)||R==21||R==22||R==30;},C=function(V,S){if(I.isIE&&!/px$/.test(S)){var R=document.createElement("img"),U;R.style.zIndex=-1;R.style.left=S;V.appendChild(R);U=R.style.pixelLeft;V.removeChild(R);return U+"px";}return S;},B=function(R,S){return parseInt(C(R,K.getStyleValue(R,S)),10)||0;},N=function(R){return{lp:B(R,"paddingLeft"),rp:B(R,"paddingRight"),tp:B(R,"paddingTop"),bp:B(R,"paddingBottom")};},Q=function(S){var R=K.getComputedStyle(S)||S.currentStyle;return{fontFamily:R.fontFamily,fontSize:C(S,R.fontSize),fontStyle:R.fontStyle,fontVariant:R.fontVariant,fontWeight:R.fontWeight,textAlign:R.textAlign};},P=function(U,R){var S=mstrmojo.findAncestor(U,"scriptClass","mstrmojo.DocInfoWindow");if(!!S){S[R?"registerLock":"releaseLock"](this);}};mstrmojo._IsInputControl={_mixinName:"_IsInputControl",dic:null,owner:null,openerNode:null,popupStyle:J,items:null,applyOnEnter:true,lv:null,init:function(V){if(this._super){this._super(V);}var X=this.dic,W=X.dt,U=mstrmojo.expr.DTP,S,R=[];if(mstrApp.useBinaryFormat){if(W==U.DATE||W==U.TIME||W==U.TIMESTAMP){S=mstrmojo.date.parseDateAndOrTime(this.value);if(S){if(W!=U.TIME){R.push(mstrmojo.date.formatDateInfo(S.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}if(W!=U.DATE){R.push(mstrmojo.date.formatTimeInfo(S.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}this.value=R.join(" ");}}}this.lv=this.value;if(X.wm&&X.w===undefined){X.wm=0;}},showByDefault:false,hasPreview:false,getItems:function(){var Z=this.dic,S=[],X,V,R=0,W=String(Z.itv),U=W&&W.indexOf(G),Y=H(Z.dt);if(U>=0){R=W.substring(U+1).length;}if(parseInt(Z.ipt,10)===0){for(X=0,V=Z.min;V<Z.max+0.00001;X++,V+=Z.itv){S[X]={n:mstrmojo.num.toLocaleString(R>0?V.toFixed(R):V),v:V};}}else{S=Z.vls;mstrmojo.array.forEach(S,function(a){if(a.n===undefined){a.n=Y?mstrmojo.num.toLocaleString(a.v):a.v;}});}return S;},font:null,onfontChange:function(){if(this.getInputNode){var R=this.getInputNode(),S=this.font;E.forEach(S,function(V,U){R.style[U]=V;});}},getOpenerNodeStyle:function(){var R=this.group&&this.group.ons,S=this.openerNode;if(!R){R=N(S);R.hp=R.lp+R.rp;R.vp=R.tp+R.bp;R.iw=Math.max(0,S.clientWidth-R.hp);R.ih=Math.max(0,S.clientHeight-R.vp);if(this.group){this.group.ons=R;}}return R;},onvalueChange:function(){if(this._super){this._super();}this.dicChanged=true;if(this.showByDefault&&(!this.isDicWidgetReady||this.isDicWidgetReady())){this.applyChanges();}else{if(this.popupStyle!==J&&this.popup&&this.popup.enableApply){this.popup.enableApply();}}},preBuildRendering:function(){if(this._super){this._super();}this.openerNode=this.openerNode||this.owner.domNode;if(this.showByDefault){this.openerStyle=this.getOpenerNodeStyle();if(this.inlineExtraCssText){this.cssText+=" "+this.inlineExtraCssText;}}if(!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}},postBuildRendering:function(){var V=this.openerNode;if(this._super){this._super();}if(!mstrmojo.isDescendant(this.owner,this)){if(this.showByDefault){var U=this.domNode;if(!(this.handleDisable()||this.enabled)){var R=document.createElement("div"),S=document.createElement("div");R.className="DIC-Container";S.className="curtain";R.appendChild(U);R.appendChild(S);U=R;}V.innerHTML="";V.appendChild(U);}if(this.dic.t===1||this.dic.t===8){this.set("font",Q(V));}}if(mstrmojo.DICConfig.isKeyNavigable(this.dic)){this.registerKeyEvents(this.domNode);}},applyChanges:function(){var Y=this.lv,R=this.getCurValue?this.getCurValue():this.value,X=this.openerNode,U=this.getDisplayValue?this.getDisplayValue():R,W=this.dic.dt,S=mstrmojo.expr.DTP,V=mstrmojo.locales.datetime;if(String(R)!==String(Y)){if(mstrApp.useBinaryFormat){if(W==S.TIME||W==S.TIMESTAMP){R=R.replace(new RegExp(V.AM_NAME),"AM").replace(new RegExp(V.PM_NAME),"PM");}}this.lv=R;this.dv=U;if(this.owner&&this.owner.dataChanged){this.owner.dataChanged(this.k,Y,{dv:U,v:R},X,this.dic.k);}}return true;},cancelChanges:function A(){this.value=this.lv;},isElementVisible:function L(R){const S=R.getBoundingClientRect();return(S.top>=0)&&(S.left>=0)&&(S.bottom<=(window.innerHeight||document.documentElement.clientHeight))&&(S.right<=(window.innerWidth||document.documentElement.clientWidth));},showInPopup:function(){var S=this.owner;var R=this.openerNode;if(!this.isElementVisible(R)){R.scrollIntoView({block:"nearest"});}this.popup=mstrmojo.DICFactory.createDICPopup(S,this);this.popup.open(S,{widget:this});if(this.focus&&!mstrApp.useBinaryFormat){this.focus();}this.setInfoWindowLock(true);},lockPopup:function(){this.setInfoWindowLock(false);},renderPreview:null,onTabDown:function(R){mstrmojo.dom.preventDefault(window,R);if(this.applyChanges()!==false){if(this.popup){this.popup.close();}this.owner.editNext(this.k);this.cleanup();}},cleanup:mstrmojo.emptyFn,registerKeyEvents:function(S){var R=this;I.attachEvent(S,"keydown",function(U){var V=U||window.event;if(V.keyCode===D){R.onTabDown(U);}});if(I.isIE){I.attachEvent(S,"keyup",function(U){var V=U||window.event;if(V.keyCode===D){R.focus();}});}},setInfoWindowLock:function(R){P.call(this,this.owner,R);},handleDisable:function(){return true;}};}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.VisChartUtils");var L=0;var N=mstrmojo.num;var F=[{n:1,s:""},{n:1000,s:"K"},{n:1000000,s:"M"},{n:1000000000,s:"B"},{n:1000000000000,s:"T"},{n:1000000000000000,s:"Q"}];var M=3;var K=5;function D(V,Q,U){var S=function(X,W){return W?Math.floor(X):Math.ceil(X);};var R=S(V/Q,U)*Q;if(R.toString().indexOf(".")>=0&&Q<1&&R>1){R=parseFloat(R.toFixed(2));}if(R>0&&R<1&&Q>1/1000){R=parseInt(S(R*100,U))/100;}return R;}function P(R){function S(X,a){var Z=X,d=X,Y=a>>>1,W=R[Z-1];for(;d<=Y;Z=d){d=Z<<1;if(d<a&&R[d-1]<R[d]){++d;}var b=R[d-1];if(b<=W){break;}R[Z-1]=b;}R[Z-1]=W;}var V,Q=R.length;for(V=Q>>>1;V>0;V--){S(V,Q);}for(V=Q-1;V>0;V--){var U=R[0];R[0]=R[V];R[V]=U;S(1,V);}return R;}function H(W,X){if(!X){X=",";}var Q=W.length;for(var U=0;U<Q;U++){var V=W[U].rv,R=V.length;for(var S=0;S<R;S++){if(Number(V[S])){break;}V[S]=V[S].replace(X,".");}}}mstrmojo.VisChartData=mstrmojo.provide("mstrmojo.VisChartData",{process:function B(f){if((!f.baseModel&&f.model)||f.model.vp){this.setDerivedModel(f);var U=f.baseModel,R=U.colHeaders,e=R.length,W=R[e-1].items[0].ds;if(W&&W!=="."){H(U.series,W);}else{if(!W){H(U.series);}}}var d=f.model;var h=d.series,Y=h.length;if(Y<=0){return ;}var Q=!f.isLinearChart&&f.isDrawAxis&&f.drawYAxisLabels,S="";L=0;var g=new Array();if(h&&h[0]&&h[0].rv.length){for(var a=0;a<Y;a++){var o=h[a].rv,X=o.length,Z=g.length;for(var b=0;b<X;b++){var V=o[b];if(!V||V.length==0){continue;}if(L===0){L=h[a].v[b].indexOf("%")>=0?100:1;}g[Z]=parseFloat(V);if(Q&&g[Z].toString().length>S.length){S=g[Z].toString();}Z++;}}g=P(g);}d.mvalues=g;if(Q){d.mls=S;d.ylbls=g;}},setDerivedModel:function I(b){var S=b.model,e=S.series,U=e.length,a=S.ri,d=S.rowHeaders,Z=S.colHeaders;var Y=typeof (S.vp)!=="undefined"&&S.vp.rl&&S.vp.rl.length>0?S.vp.rl:null;b.baseModel=S;var R=e[0].rv.length,X=0;if(Y&&b.isTimeSeries){var V=parseInt(Y[0].rs),Q=Y[0].sr;for(var W=0;W<d.length;W++){if(d[W].id==Q){X=R-(d[W].l*V)>=0?R-(d[W].l*V):0;break;}}}b.model={categories:S.categories,mtrcs:S.mtrcs,series:e,colHeaders:Z,rowHeaders:d,rne:R,rns:X,ri:a};},processLinearData:function G(e){this.process(e);var V=e.model;var d=V.mvalues,f=e.getMaxValue(),W=e.getMinValue();var X=this.generateAxisLabels(e,f,W);V.mvalues=X;var g=e.isDrawAxis&&e.drawYAxisLabels;var R=e.isTimeSeries?e.formatProp.condenseLabels:true;if(g){var Z=this.condenseLabels(X,M);if(R){var S=this.checkDuplicatedCondensed(Z.condensedLabels);if(S){for(U=M+1;U<K;++U){Z=this.condenseLabels(X,U);S=this.checkDuplicatedCondensed(Z.condensedLabels);if(!S){break;}}if(S){R=false;}}V.mls=Z.maxLabel;V.ylbls=Z.condensedLabels;}if(!R){var b=[];var Q="";var Y=V.colHeaders[V.colHeaders.length-1].items;var a=Y&&Y[0]&&Y[0].f||"";for(var U=0;U<X.length;U++){b[U]=N.formatByMask(a,X[U]);if(b[U].toString().length>Q.length){Q=b[U].toString();}}V.mls=Q;V.ylbls=b;}}},checkDuplicatedCondensed:function E(Q){var R=false;for(var S=1;S<Q.length;S++){if(Q[S]==Q[S-1]){R=true;break;}}return R;},condenseLabels:function J(R,Q){var W=R.length;var S="";var V=new Array();for(var U=0;U<W;U++){V[U]=this.formatNumber(R[U],Q);if(V[U].toString().length>S.length){S=V[U].toString();}}return{condensedLabels:V,maxLabel:S};},generateAxisLabels:function A(V,Y,S,Z){var U=new Array();if(Y==S){if(S<0){U.push(S);}U.push(0);if(S>0){U.push(S);}return U;}var Q=this.calInterval(Y,S,Z);if(V.isTimeSeries&&V.formatProp.useCustomAxisScale){var R=Y;var X=S;}else{var R=D(Y,Q,false);var X=D(S,Q,true);}if((S-X)>0.9*Q){X=D(S,Q,false);}if((R-Y)>0.9*Q){R=D(Y,Q,true);}U=new Array();if(Q<((R-X)/30)){U.push(X);U.push(R);}else{var W=X;while(W<=R){U.push(W);if(W==X){W=Math.ceil((X+Q/100)/Q)*Q;}else{W=Math.ceil((W+Q)*1000)/1000;}}if(U[U.length-1]<R){U.push(R);}}return U;},formatNumber:function C(V,R){var W="",d=1,U=V*L;if(U<0){U=-V*L;d=-1;W="-";}if(U<=1+0.000001){d*=U;if(U.toString().length<=R){W+=U;}else{var Y=2;W+=U.toFixed(Y);for(var X=W.length-1;X>=0;--X){if(W.charAt(X)=="."){break;}else{if(W.charAt(X)!="0"){++X;break;}}}if(X<W.length){W=W.substr(0,X);}}}else{var Q=Math.log(U)/Math.LN10+0.000001;var S=parseInt(Q/3);if(S>=F.length){S=F.length-1;}var f=U/F[S].n;var a=f.toString();if(a.length>R){var Z=a.indexOf(".");var b=Z<0?0:a.length-Z+1,g=Z<0?a.length:Z;var e=R-g-1;a=f.toFixed(e<0?0:e);}d*=parseFloat(a)*F[S].n;W+=a+F[S].s;}return W;},calInterval:function O(Q,S,U){var R,V=(Q-S);if(V==0){if(Q==0){Q=1;S=-1;}else{Q=Q*2;S=S/2;}V=Q-S;}R=1;if(V<1){while(V<1){V*=10;R/=10;}}else{if(V>=10){while(V>=10){V/=10;R*=10;}}}if(V<1.8){R*=0.2;}else{if(V<3.1){R*=0.4;}else{if(V<4.6){R*=0.5;}else{if(V>=8.1){R*=2;}}}}if(U){R=Math.round(R);if(R<1){R=1;}}else{if((R>0&&R<1)&&(parseInt(R.toFixed(2)*100)/100)>0){R=parseInt(R.toFixed(2)*100)/100;}}return R;}});})();(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.expr","mstrmojo.array","mstrmojo.hash");mstrmojo.requiresDescs(308,5923,7930,5282,5283,2793,2787,2788,12298);var D=mstrmojo.string,S=mstrmojo.expr,M=S.ET,L=mstrmojo.array,R=mstrmojo.hash;var V=S.FN,K=S.BRANCH_FNS[V.NOT],Z=mstrmojo.mstr.EnumDSSXMLObjectTypes,H=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,N=mstrmojo.mstr.EnumDSSConsolidationType;function C(a){return D.htmlAngles(a)||"";}var A={betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),andText:mstrmojo.desc(5282,"AND"),orText:mstrmojo.desc(5283,"OR"),boldandText:"<span style='font-weight:bold;'>"+mstrmojo.desc(5282,"AND")+"</span>",boldorText:"<span style='font-weight:bold;'>"+mstrmojo.desc(5283,"OR")+"</span>",whereText:mstrmojo.desc(2793,"Where (##)"),notText:mstrmojo.desc(12298,"NOT")};var Y={"*":function(b,a){return{html:b?('<span class="mstrmojo-unknown">'+(C(b.n||b.xml)||"...")+"</span>"):null,text:b?(C(b.n||b.xml)||"..."):null};}};function W(a){return !!a.not||a.fn===V.NOT_EQUAL||a.fn===V.NOT_IN_LIST||a.fn===V.NOT_BETWEEN||a.fn===V.NOT;}function I(a){if(a&&a.not){return{html:'<span class="mstrmojo-text mstrmojo-not">'+K+"</span>",text:K+" "};}return{html:"",text:""};}function U(d,b){var a=d&&((b?'<span class="mstrmojo-ListIcon t'+b+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+C(d)+"</span>");return{html:a,text:d&&((b?b+" ":"")+C(d))};}function Q(a,d){var b=d&&d.trim().split(" ")||[];if(a.t===Z.Attribute&&a.st===H.AttributeRecursive){b.push("recursive");}else{if(a.t===Z.Consolidation&&a.st===H.ConsolidationManaged){b.push("derived");if(a.ndetype===N.DssRecursiveDerivedElement){b.push("recursive");}}}return b.join(" ");}function G(b,a){var d=C(b.n);return{html:'<span class="mstrmojo-text mstrmojo-attr '+Q(b,a)+'">'+d+"</span>",text:d};}Y[M.R]=function(b,a){return U(b.r&&b.r.n,b.r&&b.r.t);};Y[M.F]=function(b,a){return U(b.f&&b.f.n,b.f&&b.f.t);};Y[M.XML]=function(b,a){return U(b.n||b.p&&b.p.n||b.xml,b.p&&b.p.t);};Y[M.AE]=function(u,g){var q=[],p=[],f=(g&&g.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")";if(u&&u.a&&u.a.n){var b=G(u.a);q.push(b.html);p.push("{"+b.text+"}");var a=C(S.fnName(u.et,u.fn,u.fnt));q.push('<span class="mstrmojo-text mstrmojo-fn">'+a+"</span>");p.push(" "+a+" ");var w=u.es,j=w&&w.length||0;if(j){q.push('<span class="mstrmojo-elems">');p.push("[");var o=q.length,t="";for(var s=0;s<j;s++){q[o++]='<span class="mstrmojo-text mstrmojo-elem">';t=C(w[s].n);q[o++]=t;p.push(t);if(s<j-1){q[o++]=", ";p.push(", ");}q[o++]="</span>";}q[o++]="</span>";p.push("]");}else{q.push('<span class="mstrmojo-text mstrmojo-emptyelems">'+f+"</span>");p.push(f);}}return{html:q.join(""),text:p.join("")};};Y[M.AQ]=function(AB,AD){var z=[],k=[];if(AB&&AB.a&&AB.a.n){var f=G(AB.a);z.push(f.html);k.push("{"+f.text+"}");if(AB.fm&&AB.fm.n){var AE=C(AB.fm.n);z.push('<span class="mstrmojo-text mstrmojo-form">'+AE+"</span>");k.push("("+AE+")");if(AB.fn!=null){var l=C(S.fnName(AB.et,AB.fn,AB.fnt,AB.fm.dtp));z.push('<span class="mstrmojo-text mstrmojo-fn">'+l+"</span>");k.push(" "+l+" ");var o=S.fnCstCount(AB.fn,AB.fnt);if(AB.et===M.AC){if(o>=1){if(AB.a2&&AB.a2.n){var u=C(AB.a2.n);z.push('<span class="mstrmojo-text mstrmojo-attr2">'+u+"</span>");k.push("{"+u+"}");if(AB.fm2&&AB.fm2.n){var AA=C(AB.fm2.n);z.push('<span class="mstrmojo-text mstrmojo-form2">'+AA+"</span>");k.push("("+AA+")");}}if(o>1){z.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");k.push(" "+A.betweenText+" ");if(AB.a3&&AB.a3.n){var b=C(AB.a3.n);z.push('<span class="mstrmojo-text mstrmojo-attr3">'+b+"</span>");k.push("{"+b+"}");if(AB.fm3&&AB.fm3.n){var e=C(AB.fm3.n);z.push('<span class="mstrmojo-text mstrmojo-form3">'+e+"</span>");k.push("("+e+")");}}}}}else{if(AB.et===M.AL){var a=AB.cs||[],g=[];for(var w=0,x=a.length;w<x;w++){g.push(a[w].v);}var q=g.join(mstrConfig.listSep);z.push('<span class="mstrmojo-text mstrmojo-c1">'+q+"</span>");k.push("["+q+"]");}else{if(o>=1){var a=AB.cs,s=a&&a[0];var AC=C(s&&s.p&&s.p.n||s&&s.v);z.push('<span class="mstrmojo-text mstrmojo-c1">'+AC+"</span>");k.push(AC);if(o>1){var p=a&&a[1];z.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");k.push(" "+A.betweenText+" ");var j=C(p&&p.p&&p.p.n||p&&p.v);z.push('<span class="mstrmojo-text mstrmojo-c1">'+j+"</span>");k.push(j);}}}}}}}return{html:z.join(""),text:k.join("")};};Y[M.AC]=Y[M.AQ];Y[M.AL]=Y[M.AQ];Y[M.MQ]=function(AD,AE){var AC=[],q=[],x=AD&&AD.m,AG=x&&x.n;if(AG){var b=AD.fnt,j=S.FNT.PER,AB=S.FNT.RANK;AG=b===j?mstrmojo.desc(2787,"Percentage of ##").replace("##",AG):b===AB?mstrmojo.desc(2788,"Rank of ##").replace("##",AG):AG;AC.push('<span class="mstrmojo-text mstrmojo-metric">'+C(AG)+"</span>");q.push(C(AG));if(AD.fn!=null){var s=C(S.fnName(AD.et,AD.fn,b,S.DTP.REAL));AC.push('<span class="mstrmojo-text mstrmojo-fn">'+s+"</span>");q.push(" "+s+" ");var t=S.fnCstCount(AD.fn,b);if(AD.et==S.ET.MC){if(t>=1){var AF=(AD.m2&&AD.m2.n)||(AD.c2&&AD.c2.v)||"?";AC.push('<span class="mstrmojo-text mstrmojo-m2">'+C(AF)+"</span>");q.push(C(AF));if(t>1){AC.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");q.push(" "+A.betweenText+" ");var f=(AD.m3&&AD.m3.n)||(AD.c3&&AD.c3.v)||"?";AC.push('<span class="mstrmojo-text mstrmojo-m3">'+C(f)+"</span>");q.push(C(f));}}}else{if(t>=1){var e=AD.cs,z=e&&e[0];var a=function(h){var d=h.v;if(AD.fnt==j){if(d.replace){h.v=d.replace(/%$/,"");}d=h.v+"%";}return d;};var o=C(z&&z.p&&z.p.n||z&&z.v&&a(z));AC.push('<span class="mstrmojo-text mstrmojo-c1">'+o+"</span>");q.push(o);if(t>1){var w=e&&e[1],p=C(w&&w.p&&w.p.n||w&&w.v&&a(w));AC.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");q.push(" "+A.betweenText+" ");AC.push('<span class="mstrmojo-text mstrmojo-c2">'+p+"</span>");q.push(p);}}}var AA=AD.dmy&&AD.dmy.uts,l=AA&&AA.length;if(l){AC.push('<span class="mstrmojo-text mstrmojo-at">'+A.atText+"</span>");q.push(" "+A.atText+" ");AC.push('<span class="mstrmojo-dmy">');for(var k=0;k<l;k++){var g=AA[k];AC.push('<span class="mstrmojo-text mstrmojo-dmyunit">');AC.push(C(g.utgt?g.utgt.n:g.n));q.push(C(g.utgt?g.utgt.n:g.n));if(k<l-1){AC.push(",");q.push(",");}AC.push("</span>");}AC.push("</span>");}}}return{html:AC.join(""),text:q.join("")};};Y[M.MC]=Y[M.MQ];Y[M.ANDOR]=function(o,e){var k=[],j=[],b=(e&&e.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")",f=R.valarray(S.findTargets(o,"did"))[0],g=true;function p(d){if(!g){k.push('<span class="spliter"></span>');j.push(", ");}g=false;if(d){j.push(mstrmojo.desc(12298,"NOT")+" ");}}if(!f){return{html:'<span class="mstrmojo-text mstrmojo-emptyelems">'+b+"</span>",text:b};}var a=G(f,"andor");k.push(a.html);j.push("{"+a.text+"}");k.push("<span>:</span>");j.push(" : ");k.push('<span class="mstrmojo-elems">');j.push("[");L.forEach(o.nds,function l(q){if(!q){return ;}var d=W(q),z=q.fm,u=q.cs,s,w,h,t;switch(q.et){case M.ANDOR:L.forEach(q.nds,l);break;case M.AE:switch(q.fn){case V.IN_LIST:case V.NOT_IN_LIST:L.forEach(q.es,function(AA){p(d);s=d?" not":"";w=C(AA.n);k.push('<span class="mstrmojo-text mstrmojo-elem single'+s+'">'+w+"</span>");j.push(w);});break;case V.DESCENDANT:var x=(q.es||[]).slice();if(x.length===0){x.push({n:b});}L.forEach(x,function(AB){p(d);s=d?" not":"";w=C(AB.n);if(u&&u[0]){var AA;t=u[0].v;if(isNaN(t)){h=t.substr(t.indexOf(";")+1);}else{h=mstrmojo.desc(493,"Level")+" "+(parseInt(t,10)+1);}AA=h+" "+mstrmojo.desc(12853,"of")+" "+w;k.push('<span class="mstrmojo-text mstrmojo-elem level'+s+'">');k.push(AA);j.push(AA);}else{k.push('<span class="mstrmojo-text mstrmojo-elem descendant'+s+'">');k.push(C(AB.n));j.push(w);}k.push("</span>");});break;}break;case M.AQ:L.forEach(q.cs,function(AA){p(d);s=d?" not":"";t=AA.v;h=(z&&z.n)?C(z.n+" "+t):"";if(z&&z.n==="LEVEL_NUMBER"){s+=" level";if(isNaN(t)){h=t.substr(t.indexOf(";")+1);}else{h=mstrmojo.desc(493,"Level")+" "+(parseInt(t,10)+1);}}k.push('<span class="mstrmojo-text mstrmojo-elem constant'+s+'">'+h+"</span>");j.push(h);});break;}});k.push("</span>");j.push("]");return{html:k.join(""),text:j.join("")};};function O(g,f){var d=Y[g&&g.et]||Y["*"],b=I(g),e=d&&d(g,f),a=f&&f.emptyText||A.emptyText;return{html:b&&b.html+((e&&e.html)||('<span class="mstrmojo-text empty-cond">'+a+"</span>")),text:b&&b.text+((e&&e.text)||a)};}function F(a){return O(a).text;}function J(f,e,b){if(!f){return null;}var s=f.et,o=f.fn,a=f.nds;if(s===M.ANDOR){var t=b?"bold":"";splitter=o===V.AND?A[t+"andText"]:(o===V.OR?A[t+"orText"]:"");a=[].concat(a);if(a.length<1){return null;}var l=[],u;L.forEach(a,function(w){u=J(w,false,b);if(u){l.push(u);}});var q,p=l.length;if(p<1){return null;}else{if(p===1){q=l[0];}else{q=l.join(" "+splitter+" ");}}q=e||f.not?q:"("+q+")";return f.not?A.notText+" "+q:q;}else{if(s===M.RLS){var k=f.dmy&&f.dmy.uts||[],h=[],g;L.forEach(k,function(w){h.push("{"+w.n+"}");});g=h.join(", ");var d=f.nds&&f.nds[0],j=J(d,false,b);if(j){return"("+g+" "+A.whereText.replace(/\(##\)/g,"").replace(/'##'/g,"")+j+")";}return null;}else{return F(f);}}}function B(a){if(mstrmojo.fe.FilterUtils.isExprEmpty(a)){return{et:14,fn:19};}else{((a&&a.nds)||[]).forEach(function(d,b){a.nds[b]=B(d);});return a;}}mstrmojo.fe.FilterUtils=mstrmojo.provide("mstrmojo.fe.FilterUtils",{getExprXml:function(h){var b="<exp>",a="</exp>",f={a:true,a2:true,a3:true,agg:true,cc:true,ce:true,cgp:true,cs:true,conid:true,desc:true,did:true,attId:true,dmt:true,dmy:true,dtp:true,es:true,et:true,expr:true,f:true,flat:true,flt:true,fm:true,fm2:true,fm3:true,fn:true,fnt:true,fres:true,gb:true,isp:true,items:true,m:true,m2:true,m3:true,n:true,nds:true,not:true,pf:true,p:true,r:true,rps:true,st:true,t:true,utgt:true,utp:true,uts:true,v:true,xml:true,relation:true,applySubExpr:true,useSchema:true,guide:true,rsTp:true,joTp:true,paTp:true,erTp:true,exp:true,joAttrs:true,ph:true,idx:true,idc:true,idcsi:true,ucfg:true,node:true},e={getArrItemName:function(j){return j.substr(0,j.length-1);},isSerializable:function(x,u,t){if(x==="xml"){var l=u[t].xml;return{att:'hasXML = "-1"',child:l};}else{if(mstrmojo.array.indexOf(["header_format","grid_format","child_header_format","child_grid_format"],x)>-1){var z=u[t][x];if(!z){return{};}var p="<"+x+">";for(var w in z){p+="<prs n='"+w+"'>";var o=z[w];for(var j in o){var s=o[j];p+="<pr n='"+j+"' v='"+(s==="pru"?"":s)+"'";p+=s==="pru"?' pru="1"':"";p+="/>";}p+="</prs>";}p+="</"+x+">";return{child:p};}else{if(x==="cs"){var k=u[t],q=u[t][x];if(k&&k.fnt&&k.fnt==S.FNT.PER&&q){if(q[0]){q[0].v+="%";}if(q[1]){q[1].v+="%";}}return true;}else{if(x==="c2"||x==="c3"){var k=u[t];if(k&&k.et==S.ET.MC&&(k.fn==S.FN.BETWEEN||k.fn==S.FN.NOT_BETWEEN)){return true;}else{return false;}}}}}return(f[x])?true:false;},skipNull:true},d=B(h);if(!d||d.et!=M.ANDOR||d.fn===V.NOT||d.not){d={et:M.ANDOR,fn:S.FN.AND,nds:d?[d]:[]};}var g=D.json2xml("nd",[{},d],e);return b+g+a;},isExprEmpty:function(a){return(!a||(a.et===M.ANDOR&&(a.nds||[]).length<1));},getExprConditionNodeHtml:function E(a){return O(a).html;},getExprConditionNodeText:function F(a){return O(a).text;},getExprNodeHtmlAndText:function P(b,a){return O(b,a);},getExprText:function X(b,a){return J(b,true,a);}});}());(function(){mstrmojo.requiresCls("mstrmojo.StringBuffer","mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo._IsGraphDataService","mstrmojo.func","mstrmojo._ImageHelper","mstrmojo.fe.FilterUtils","mstrmojo.rw.model.RetrievalKeysConfig","mstrmojo.rw.model.UpdateKeysConfig");var f=mstrmojo.hash,B=f.copy,V=mstrmojo.array,Ac=mstrmojo.dom,AD=mstrmojo.func,AS=[mstrmojo.desc(8445,"Loading")],AJ=mstrmojo.fe.FilterUtils.getExprXml,Av=mstrmojo.array.ensureArray,P=0;function X(BZ){BZ=BZ||{};BZ.preserveUndo=true;return BZ;}function As(Bd,Be,BZ){if(this.blockRequests){throw ("The data service is currently ignoring all requests to the server.");}var Ba=P++,Bc=this.getTxUpdates(Ba);BZ=BZ||{};BZ.src=As.caller.name;if(!mstrmojo.string.isEmpty(Bc)){Bd.updateChanges=Bc;}Bd.zoomFactor=this.model.getZoomFactor();var Bb=this.cmdMgr;if(!BZ.preserveUndo&&Bb){Bb.onSubmitUpdates();}mstrApp.serverRequest(Bd,this.wrapCallback(Be,Ba,BZ.preserveStid),BZ);}function N(Bb,Ba,BZ){f.copy({unitType:Ba.defn&&Ba.defn.t,unitKey:Ba.k},Bb);if(BZ.layoutKey){f.copy({toKey:BZ.layoutKey,analysisSectionType:BZ.analysisSectionType},Bb);}else{f.copy({toKey:BZ.parentKey},Bb);}return Bb;}function Ay(Ba){Ba=Ba||{};if(mstrApp.optimizeFitToPage){var BZ=window.mstrMobileApp?this.model.controller.getContentDimensions():mstrApp.getContentDimensions();if(BZ){Ba.styleName="RWDocumentMobileStyle";Ba.availableWidth=BZ.w;Ba.availableHeight=BZ.h;}else{Ba.innerWidth=mstrmojo.dom.windowDim().w;Ba.innerHeight=mstrmojo.dom.windowDim().h;}}return Ba;}function BU(Ba){var BZ=Ba&&Ba.style,Bb=BZ&&BZ.params;return Bb&&Bb.treesToRender;}function C(BZ,Ba){return{act:"moveUnit",toKey:BZ,unitType:Ba};}function Ax(BZ){return BZ.split("\u001E")[2];}function M(Ba,Be){if(Ba!==mstrmojo.DocDataService.UNDO_KEY){return Ba;}if(!this.undoSectionKey){var Bd=this.undoSectionKey=this.model.getNextKey(),Bb=this.undoFGKey=this.model.getNextKey();Be.addActions({act:"addUndoSection",cbKey:this.cbKey,nodeKey:Bd,fgKey:Bb});var Bc=this;Be.addCallbacks({failure:function BZ(){delete Bc.undoSectionKey;}});}return this.undoSectionKey;}function Ar(Bb,Ba){var BZ={dsid:Bb.dsid,formula:Bb.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(Bb.tokenStreamXML),name:Bb.alias,afb:Bb.afb,sfb:Bb.sfb};if(Ba){BZ.Ids=["$GUID_135"];}return this.getAddDerivedMetricToDatasetAction(BZ);}function L(Ba){var BZ="USE_DEFAULT_INDICATOR";Ba=Ba||{};Ba.mptso=Ba.mptso||{pru:true};Ba.mptsim=Ba.mptsim||{pru:true};Ba.mptfms=Ba.mptfms||"";return{MDXPassThrough:{SolveOrder:Ba.mptso.pru?BZ:Ba.mptso.v,ScopeIsolationMode:Ba.mptsim.pru?BZ:Ba.mptsim.v,FormatString:Ba.mptfms}};}function AO(BZ,Ba){return{act:"formatDerivedMetric",dsid:BZ.dsid||"",mid:(Ba||!BZ.did)?"$GUID_135":BZ.did,format:L(BZ.mptf),};}function AR(Bc,Bf,Ba,Bg,BZ,Bb){var Bd=[this.getNodeKeyFromKeyContext(Bf)];if(!Bb){Bd=Av(Bg).concat(Bd);}var Be={act:Bc,keyContext:Bf,tgtKey:Ba,partialRetrieval:{nodes:Bd}};if(!BZ){Be.partialUpdate={selectors:[Ax(Bf)]};}return Be;}function q(Bb){var Bd=false;if(Bb===1||Bb===2){var Ba=this.model,BZ=Ba.controller,Be=BZ.getRequiredZoomFactor&&BZ.getRequiredZoomFactor(Bb),Bc=Ba.getZoomFactor();if(isNaN(Be)||parseInt(Math.abs((Be-Bc)*100),10)<=2){Bd=false;}else{Bd=true;}}return Bd;}mstrmojo.DocDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsGraphDataService,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.DocDataService",defaultStyle:{params:{treesToRender:2}},cmdMgr:null,stid:-1,blockRequests:false,clientAuto:false,init:function Ap(BZ){this._super(BZ);this.cmdMgr=this.model.controller&&this.model.controller.cmdMgr;},wrapCallback:function Ai(Be,Bb,Ba){var Bc=this;return AD.wrapMethods({success:function Bd(Bf){if(Bf){Bc.model.bs=Bc.rwb=Bf.bs||Bc.rwb;Bc.msgId=Bf.mid||Bc.msgId;Bc.cbKey=Bf.cbKey||Bc.cbKey;if(Bf.stid!==undefined&&!Ba){Bc.stid=Bf.stid;}if(Bf.clientAuto!==undefined){Bc.clientAuto=Bf.clientAuto;}if(mstrApp.parseSecondaryDataProviders){mstrApp.parseSecondaryDataProviders(Bf);}}Bc.clearTxUpdates(Bb);},failure:function BZ(){Bc.resetTxUpdates(Bb);}},Be);},getNodeKeyFromKeyContext:function Z(BZ){return BZ.split("\u001E")[1];},refresh:function A5(Bb,Bc){var Ba=!!Bb.useRefreshProgress,BZ=Ba?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:AS;delete Bb.useRefreshProgress;Bb=Ay.call(this,Bb);As.call(this,B(Bb,{taskId:"docRefresh",rwb:this.rwb,rePrompt:false,fresh:false,regenerate:false,displayNoResErr:true,compress:1}),Bc,{showProgress:true,hideProgress:true,progressStateText:BZ,useRefreshProgress:Ba});},saveRW:function A9(BZ,Ba){As.call(this,B(BZ,{taskId:"saveRW",msgID:this.msgId}),Ba);},saveThresholds:function k(Ba,Bb,BZ){As.call(this,B(Ba,{taskId:"saveThresholds"}),Bb,BZ);},getThresholds:function BN(Ba,Bb,BZ){As.call(this,B(Ba,{taskId:"getThresholds"}),Bb,BZ);},browseElements:function AN(Ba,Bb,BZ){As.call(this,B(Ba,{taskId:"browseElements",styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30}),Bb,BZ);},removeUnit:function Y(Ba,Bb){var BZ=B(Ba,{act:"removeUnit"});this.submitTemplateUpdates(BZ.nodeKey,BZ,Bb);},removeLayout:function AW(Ba,BZ,Bb){this.submitUpdates({act:"removeLayout",unitKey:Ba,isCurrent:BZ},Bb);},moveLayout:function AB(Bb,BZ,Ba){this.submitUpdates(this.getMoveNodeAction(Bb,BZ,Ba),mstrmojo.DocDataService.EMPTY_CALLBACK,mstrmojo.DocDataService.SUPPRESS_DATA);},getMacroCopyNodeAction:function At(Ba,BZ,Bc){var Bb={act:"macroCopyUnit",newKey:Bc,partialRetrieval:this.newRetrievalKeysConfig().addNode(Bc)};N(Bb,Ba,BZ);return Bb;},getMacroMoveNodeAction:function AI(Ba,BZ){var Bb={act:"macroMoveUnit",partialRetrieval:this.newRetrievalKeysConfig().addNode(Ba.k)};N(Bb,Ba,BZ);return Bb;},getMoveNodeAction:function w(Bd,BZ,Ba){var Bc=Bd.defn,Bb=Bc?Bc.t:mstrmojo.EnumRWUnitType.LAYOUT;return this.getMoveNodeActionUsingKey(Bd.k,Bb,BZ,Ba);},getMoveNodeActionUsingKey:function BC(Bd,Bb,BZ,Ba){var Bc=C(BZ,Bb);Bc.unitKey=Bd;if(Ba!==undefined){Bc.index=Ba;}return Bc;},getMoveControlAction:function e(Bc,Ba,BZ){var Bb=C(Ba,mstrmojo.EnumRWUnitType.SELECTOR);Bb.keyContext=Bc;if(BZ){Bb.partialRetrieval={nodes:Av(BZ)};}return Bb;},addMoveControlAction:function I(Bc,Bb,Ba,BZ){Bc.addActions(this.getMoveControlAction(Bb,M.call(this,Ba,Bc),BZ));},getSetCtrlSourceAction:function AP(Ba,Bc,BZ,Bb){return{act:"setControlSource",keyContext:Ba,unitId:Bc,unitType:BZ,removeCGB:Bb||[],partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(Ba)),partialUpdate:{selectors:[Ax(Ba)]}};},getRemoveCtrlTargetAction:function G(Bb,Ba,Bc,BZ){return AR.call(this,"removeControlTarget",Bb,Ba,Bc,BZ);},getClearCtrlTargetAction:function BJ(BZ){return{act:"clearControlTarget",keyContext:BZ};},getAddCtrlTargetAction:function A3(Bd,Ba,Be,Bf,BZ,Bb){var Bc=AR.call(this,"addControlTarget",Bd,Ba,Be,BZ,Bb);Bc.isUC=!Bf;return Bc;},getAddCtrlTargetDatasetAction:function BG(Ba,BZ){return{act:"addControlTargetDataset",keyContext:Ba,tgtDid:BZ};},getRemoveCtrlTargetDatasetAction:function j(Ba,BZ){return{act:"removeControlTargetDataset",keyContext:Ba,tgtDid:BZ};},getClearCtrlTargetDatasetAction:function AV(BZ){return{act:"clearControlTargetDataset",keyContext:BZ};},getChangeControlElementSource:function BT(Ba,BZ){return{act:"changeControlElementSource",keyContext:Ba,ctlElementSrc:BZ};},getSetAttributesJoinTypeAction:function Am(BZ,Ba){return{act:"setAttributesJoinType",nodeKey:BZ,value:Ba,partialRetrieval:this.newRetrievalKeysConfig().addNode(BZ)};},getSetMetricJoinTypeAction:function Ae(Bb,Bd,BZ,Ba,Bc){return{act:"setMetricJoinType",nodeKey:Bb,unitId:Bd,dataType:BZ,unitType:Ba,value:Bc,partialRetrieval:this.newRetrievalKeysConfig().addNode(Bb)};},getTxUpdates:function Ab(Ba){var BZ=this.model;return BZ&&BZ.getTransactionUpdates&&BZ.getTransactionUpdates(Ba);},clearTxUpdates:function Aq(Ba){var BZ=this.model;if(BZ&&BZ.clearTransactionUpdates){BZ.clearTransactionUpdates(Ba);}},resetTxUpdates:function D(Ba){var BZ=this.model;if(BZ&&BZ.resetTransactionUpdates){BZ.resetTransactionUpdates(Ba);}},loadDocLayout:function K(Bd,Bf,Be){var Bc={act:"setCurrentLayout",unitKey:Bd.layoutKey,disablePU:true,panelUnitKey:Bd.panelKey},Bb={style:{params:{treesToRender:3}},params:Ay.call(this,Bd)},BZ=this.model,Ba=!!Be;if(!Be){Be=BZ.getDataService().newUpdateWithoutCmd();}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){BZ.applyBufferedSelections(Be);}Be.add(Bc,Bf,Bb);if(!Ba){this.submitUpdates(Bc,Bf,Bb);}},checkMissingCredentials:function AE(BZ,Ba){As.call(this,B(BZ,{taskId:"checkMissingCredentials"}),Ba);},setCurrentDocLayout:function A0(Bb,Bf,Be){var Bd={act:"setCurrentLayout",unitKey:Bb},Bc={config:{silent:(Bf===null)&&(!!Be&&Object.keys(Be.callback||{}).length===0)}},BZ=this.model,Ba=!!Be;Bf=Bf||null;if(!Be){Be=BZ.getDataService().newUpdateWithoutCmd();}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){BZ.applyBufferedSelections(Be);}Be.add(Bd,Bf,Bc);if(!Ba){Be.submit();}if(window.mstrMobileApp!==undefined){mstrMobileApp.clearWebViewCache(false);}},fetchDocPage:function BK(BZ,Ba){As.call(this,{taskId:"fetchDocPage",rwb:this.rwb,pos:BZ},Ba);},requestPanelChangeDeferred:function BS(Bf,Be,BZ,Ba,Bc,Bd){var Bb={act:"setCurrentPanel",unitKey:Be};if(BZ){Bb.partialRetrieval={nodes:BZ.split(",")};}Bf.add(Bb,Bd,{config:{showProgress:Bc,hideProgress:Bc,progressStateText:AS},style:{params:{treesToRender:Ba?3:0}}});},getGraphSelectionAction:function E(Bd,BZ,Bb,Bg,Bf,Ba){var Be=this.model.getCurrentLayoutDef(),Bh=(Be&&Be.dzf)||1,Bc={act:"graphSelector",nodeKey:Bd,sliceID:Bb,x:Math.round(Bg/Bh),y:Math.round(Bf/Bh)};if(Ba){Bc.usePartialUpdate="0";}else{Bc.partialUpdate={selectors:BZ.split("\u001E")};}return Bc;},getSelectorElementsAction:function x(Bb){var Ba={act:"setSelectorElements",keyContext:Bb.ck,ctlKey:Bb.ctlKey,elemList:mstrmojo.string.decodeHtmlString(Bb.eid),isVisualization:!!Bb.isDocVis},BZ=Bb.include;if(BZ!==undefined){Ba.include=!!BZ;}if(Bb.tks){Ba.tks=Bb.tks;}if(Bb.disablePU){Ba.usePartialUpdate="0";}else{if(Bb.ignoreTargetData){Ba.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(Bb.ck));}else{Ba.partialUpdate={selectors:Bb.ctlKey.split("\u001F")};}}return Ba;},getUpdateTransactionAction:function BX(Ba){var BZ={act:"updateTransaction"};if(Ba){if(Ba.ctlKey){BZ.partialUpdate={selectors:[Ba.ctlKey]};}}return BZ;},getSelectorFromGMAction:function s(Ba){var BZ={act:"setSelectorFromGM",keyContext:Ba.ck,ctlKey:Ba.ctlKey,keepOnly:!!Ba.keepOnly,selectorObjects:Ba.selectorObjects,isVisualization:!!Ba.isDocVis,include:!!Ba.include};if(Ba.tks){BZ.tks=Ba.tks;}if(Ba.disablePU){BZ.usePartialUpdate="0";}else{BZ.partialUpdate={selectors:[Ba.ctlKey]};}return BZ;},getGMViewFilterAction:function AM(Ba){var BZ={act:"keepOnlyGM",selectorObjects:Ba.selectorObjects,isVisualization:!!Ba.isDocVis,keepOnly:!!Ba.keepOnly};if(Ba.tks){BZ.tks=Ba.tks;}if(Ba.disablePU){BZ.usePartialUpdate="0";}else{BZ.partialUpdate={selectors:[Ba.ctlKey]};}return BZ;},browseControlElements:function BO(Bd,Bm,Ba){var Bc=Bd.searchPattern,Bj=Bd.attributeId,Bf=this.model;if(!Bc||Bc===""){return ;}var Bg={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:Bj,expressionXML:Bd.expressionXML||"",dataSourcesXML:Bd.dataSourcesXML||"",blockBegin:Bd.blockBegin,blockCount:Bd.blockCount,searchPattern:Bc,rawInput:Bc,browseFlags:Bd.browseFlags||0,otp:Bd.objectType};if(Bd.datasetId){B({datasetID:Bd.datasetId,messageID:Bf.mid,ctlKey:Bd.controlKey},Bg);}var Bl=Bd.searchForms;if(Bl){var Bb="",Be="";V.forEach(Bl,function(Bn){Bb+=Be+Bn.did;Be=";";});Bg.searchForms=Bb;if(Bf.isnew||Bd.useClientForm){var BZ="",Bi="",Bh=V.filterOne(Bf.getDatasetUnits(["att"]),function(Bn){return Bn.did===Bj;}),Bk=Bh.fs||[];V.forEach(Bl,function(Bn){var Bo=V.filterOne(Bk,function(Bp){return Bp.fid===Bn.did;});BZ+=Bi+Bn.did+":"+(Bo&&Bo.bftp||0);Bi=";";});Bg.clientFormPatterns=BZ;}}As.call(this,Bg,Bm,Ba);},setMultiDocSelectorElements:function AK(BZ,Ba,Bc){var Bb={taskId:"setMultiDocSelectorElements",rwb:this.rwb,multiSelect:Ba,selectorObjects:BZ};As.call(this,Bb,Bc,{showWait:true,hideWait:true,delay:true});},setDocSelectorTexts:function U(Be,Bg,Bi,Bf,Bh,Ba,BZ,Bb,Bd){var Bc={taskId:"setDocSelectorTexts",rwb:this.rwb,unitKeyContext:Be,ctlTexts:Bg,ctlKey:Bi,zoomFactor:Ba};if(Ac.isAndroid||BZ){Bc.taskId="androidSetDocSelectorElements";}if(Bf!==null&&Bf!==undefined){Bc.include=Bf;}if(Bb!==null&&Bb!==undefined){Bc.usePartDisplay=Bb;}if(Bd!==null&&Bd!==undefined){Bc.treesToRender=Bd;}As.call(this,Bc,Bh);},getSelectorExpressionAction:function z(Bb){var Ba={act:"setSelectorExpression",keyContext:Bb.ck,ctlType:Bb.type,objId:Bb.srcid,objType:Bb.srct,expFunction:Bb.f,expFunctionType:Bb.ft,include:!!Bb.include,qt:Bb.qt,unset:!!Bb.unset};if(Bb.disablePU){Ba.usePartialUpdate="0";}else{Ba.partialUpdate={selectors:[Bb.ckey]};if(Bb.retrieveCtrlKey){Ba.partialRetrieval=this.newRetrievalKeysConfig().addNode(Bb.ctlKey);}}if(Bb.changeQual){Ba.changeQual=Bb.changeQual;}var BZ=Bb.cs;if(BZ!==null&&BZ!==undefined){Ba.expConstants=BZ;Ba.dataType=Bb.dtp;}if(Bb.fid){Ba.fid=Bb.fid;}return Ba;},getAttributeSelectorExpressionAction:function A2(Ba){var BZ={act:"setAttributeSelectorExpression",keyContext:Ba.ck,ctlKey:Ba.ctlKey,ctlType:Ba.type,expr:Ba.expr,partialUpdate:{selectors:[Ba.ctlKey]}};if(Ba.tks){BZ.tks=Ba.tks;}return BZ;},getMultiUnitSelectorAction:function BQ(BZ){return{act:"multiUnitSelection",keyContext:BZ.ck,include:BZ.include!==false,sels:BZ.selections,partialUpdate:{selectors:[BZ.ctlKey]}};},getRemoveCtrlAction:function Au(Ba,BZ){return{act:"removeControl",key:Ba,partialUpdate:{selectors:[Ba]},partialRetrieval:{nodes:Av(BZ)}};},getAddCtrlAction:function Al(Bg,Be,Ba,Bf,Bb,Bh,BZ,Bc,Bi){if(isNaN(Bi)){Bi=1;}var Bd={act:"addControl",parentKey:Bg,nodeKey:Be,ctlKey:Ba,isUC:!!Bb,unitType:Bh||-1,unitId:BZ||"",targetKeys:Av(Bc),ctlType:Bi,gpType:Bi,partialRetrieval:{nodes:Av(Bf)}};if(!Bd.isUC){Bd.partialUpdate={selectors:[Ba]};}return Bd;},getReplaceCtrlAction:function S(Bb,Be,BZ,Bd,Ba,Bc){return{act:"replaceControl",nodeKey:this.getNodeKeyFromKeyContext(Bb),ctlKey:Be,ctlType:BZ,unitId:Bd,unitType:Ba,partialUpdate:{selectors:[Be]},partialRetrieval:{nodes:Av(Bc)}};},getSaveGraphPropertiesAction:function p(BZ,Ba){return{act:"saveGraphProperties",nodeKey:BZ,properties:Ba};},getSelectorIncludeAction:function BB(Ba){var BZ=Ba.ckey;return{act:"setSelectorInclude",keyContext:Ba.ck,ctlKey:BZ,ctlType:Ba.type,include:Ba.include,partialUpdate:{selectors:[BZ]}};},getSelectorShowAllAction:function Q(BZ){return{act:"setSelectorShowAll",keyContext:BZ.ck,ctlKey:BZ.ckey,ctlType:BZ.type,showAll:BZ.showAll,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BZ.ck))};},getUnsetSelectorAction:function h(Bc){var Bb=Bc.ckey,BZ=Bc.ck,Ba={act:"unsetSelector",keyContext:BZ,ctlKey:Bb,ctlType:Bc.type};if(Bc.ignoreTargetData){Ba.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BZ));}else{Ba.partialUpdate={selectors:[Bb]};}if(Bc.retrieveCtrlKey){Ba.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BZ));Ba.partialRetrieval=Ba.partialRetrieval.addNode(Bb);}return Ba;},getRASelectorExpandAction:function u(Ba){var BZ=Ba.ckey;return{act:"raSelectorExpandCollapse",keyContext:Ba.ck,ctlKey:BZ,ctlType:Ba.type,elementId:Ba.elementId,isExpand:Ba.isExpand,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(Ba.ck))};},getChangeFilteringAction:function A7(BZ,Bc,Bb,Ba){return{act:"changeFiltering",nodeKey:BZ,filterMode:Bc,isUC:Bb,partialRetrieval:{nodes:(Ba?Av(Ba):[])}};},getAddDerivedMetricToDatasetAction:function BF(BZ){return{act:"addDerivedMetricToDataset",dsid:BZ.dsid,formula:BZ.formula,isTokenStream:BZ.isTokenStream,name:BZ.name,newObjectIds:BZ.Ids,afb:BZ.afb,sfb:BZ.sfb};},getSetMDXPassThroughOptionsForCMAction:function A(BZ){var Ba={act:"formatDerivedElement",format:L(BZ.mptf)};if(BZ.cid){Ba.cid=BZ.cid;}if(BZ.ceid){Ba.ceid=BZ.ceid;}return Ba;},getEditDocUnitPropAction:function AH(BZ){return{act:"editDocUnitProp",dsid:BZ.dsid,formId:BZ.formId,unitId:BZ.unitId,unitType:BZ.unitType,prop:BZ.prop,value:BZ.value};},getRWGraphImage:function BW(Bd,Bh){if(mstrApp.isExpress&&!mstrApp.optimizeFitToPage&&q.call(this,this.model.zt)){return ;}var Bc=mstrApp,BZ=this.id,Ba={taskId:"getRWGraphImage",taskEnv:"xhr",imgType:4,messageID:this.msgId,nodeKey:Bd.k,sliceID:parseInt(Bd.sid,10),width:parseInt(Bd.w,10),height:parseInt(Bd.h,10)};if(Bd.needCoordinate){Ba.needCoordinate=1;}if(Bc.onMobileDevice()&&Bc.useBinaryFormat){window.setTimeout(function(){As.call(mstrmojo.all[BZ],Ba,Bh,X());},0);}else{if(Bd.encodeImage){Ba.taskContentEncoding="base64";delete Ba.taskEnv;As.call(this,Ba,{success:function Bi(Bj){Bh.success(Bj);},failure:function Bb(Bj){(Bh.failure||Bc.onerror)(Bj);}},X());}else{var Bf=Bc.getConfiguration(),Be=Bc.getCurrentProjectId(),Bg=new mstrmojo.StringBuffer();Ba.__ts__=new Date().getTime();Ba.sessionState=Bc.getSessionState(Be);f.forEach(Ba,function(Bj,Bk){Bg.append(Bk+"="+encodeURIComponent(Bj));});Bh.success(Bf.getTaskUrlByProject(Be)+"?"+Bg.toString("&"));}}},getImage:function BV(Ba){var Bb=mstrApp,BZ=Bb.getConfiguration();if(BZ&&Ba&&Ba.indexOf("://")===-1){Ba=BZ.getHostUrlByProject(Bb.getCurrentProjectId())+Ba;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(Ba)):Ba;},setGridDisplayMode:function AA(Bb,Ba,Bc,BZ){f.copy(mstrmojo.DocDataService.RAPID_EXEC,BZ);this.submitUpdates({act:"setGridDisplayMode",unitKey:Bb,displayMode:Ba},Bc,BZ);},setDocZoom:function H(BZ,Ba){this.submitUpdates(B(BZ,{act:"setDocZoom",disablePU:true}),Ba,{style:{params:{treesToRender:3}}});},sortGrid:function AT(BZ,Ba){this.submitTemplateUpdates(BZ.nodeKey,B({act:"sort"},BZ),Ba);},getAdvSortData:function Ao(BZ,Ba){this.rwExecute(B(BZ,{styleName:"RWGridStyle"}),Ba);},getFilterExpression:function AY(Bb,Ba){var Bc=Bb&&Bb.expr,BZ=this.model;if(Bc&&BZ&&BZ.getVfexprWithUpdatedVf){Bc=BZ.getVfexprWithUpdatedVf(Ba,Bc);}return AJ(Bc);},saveViewFilter:function A1(Be,Bf){var Bd=this.msgId,BZ=Be&&Be.nodeKeys,Bc=this,Bb=V.map(BZ,function(Bg){return{act:"saveViewFilter",messageID:Bd,nodeKey:Bg,expr:Bc.getFilterExpression(Be.filterModel,Bg),partialUpdate:{nodes:[Bg]}};}),Ba=V.map(BZ,function(Bg){return{act:"saveViewFilterLimit",messageID:Bd,nodeKey:Bg,limitExp:Be.limitExp,limitToRemove:Be.limitMdxToRemove||[]};});this.submitUpdates(Bb.concat(Ba),Bf);},getViewFilter:function AU(Ba,Bb){var BZ=this.model;if(BZ.getViewFilter){BZ.getViewFilter(Ba,Bb);}else{As.call(this,{taskId:Ba.taskId,rwb:Ba.rwb,msgID:Ba.msgID,nodeKey:Ba.nodeKey},Bb);}},createEmbeddedFilter:function Aw(Bb,Be){var BZ=Bb.filterId,Bc=Bb.expJson,Bd={act:"createEmbeddedFilter",messageID:this.msgId,expr:Bb.expr,filterId:BZ,filterName:Bb.filterName};var Ba=this.model;AD.wrapMethods({success:function(){var Bf=Ba.defn.efs||[];Bf.push({did:BZ,exp:Bc});Ba.defn.efs=Bf;}},Be);this.submitUpdates([Bd],Be,{style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.NONE}},params:{suppressData:true}});},rwExecute:function BM(BZ,Ba){As.call(this,B(BZ,{taskId:"RWExecute",rwb:this.rwb,messageID:this.msgId}),Ba);},pivot:function t(BZ,Ba){this.submitTemplateUpdates(BZ.nodeKey,{act:"pivot",unitId:BZ.unitId,unitType:BZ.unitType,attFormId:BZ.attFormId,axis:BZ.axis,unitPos:BZ.unitPos},Ba);},resizeXtabColumn:function BI(BZ,Ba){this.submitUpdates([this.getUpdateTemplateAction(BZ.nodeKey,BZ),{act:"format",unitType:52,unitKey:BZ.nodeKey,formatType:1,format:{FormattingSize:{WidthMode:2}}}],Ba);},showTotals:function W(BZ,Ba){this.submitTemplateUpdates(BZ.nodeKey,{act:"showTotals",unitId:BZ.unitId,unitType:BZ.unitType,subtotalType:BZ.subtotalType,clearSubtotalType:BZ.clearSubtotalType},Ba);},drillGrid:function AQ(BZ,Ba){this.submitUpdates(this.getDrillGridAction(BZ),Ba,{config:{showProgress:true,hideProgress:true,progressStateText:AS,delay:true}});},getDrillGridAction:function BP(Ba){var BZ={act:"gridDrillWithin",messageID:this.msgId,nodeKey:Ba.nodeKey,sliceId:Ba.sliceId,drillPathIndex:Ba.drillPathIndex,drillPathKey:Ba.drillPathKey,elementList:Ba.drillElements,retainParent:Ba.retainParent,partialUpdate:{nodes:Av(Ba.updateNodeKey||Ba.nodeKey)}};if(Ba.x){BZ.x=Ba.x;BZ.y=Ba.y;}return BZ;},changeDocGroupBy:function O(Bb,Bc,BZ){var Ba={act:"changeDocGroupBy",disablePU:true};if(Bb.flags){Ba.flags=Bb.flags;}if(Bb.groupbyKey){Ba.gbKey=Bb.groupbyKey;Ba.elemId=Bb.elementId;}else{Ba.gbUnits=Bb.gbUnits;}this.submitUpdates(Ba,Bc,{config:BZ,style:{params:{treesToRender:3}},params:Ay.call(this,Bb)});},setOutlineExpanding:function A8(Bb,Bc,BZ){var Ba={act:"updateTemplate",keyContext:Bb.unitKey,actions:[{act:"setOutlineExpanding",prs:"Template Formatting",pr:"OutlineLevelExpanding",v:Bb.outlineLevel}]};this.submitUpdates(Ba,Bc,f.copy(mstrmojo.DocDataService.RAPID_EXEC,{config:{silent:true},style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}}));},retrieveServerJson:function g(Bb,Bl,Bc){if(mstrApp.isExpress&&!mstrApp.optimizeFitToPage&&q.call(this,this.model.zt)){return ;}var Be=this.model,Bf=Be.controller,Bj={},BZ,Ba,Bh;var Bi=Bb.nodes;if(Bi){Bj.partialRetrieval=Bi;}var Bk=Bb.slices;if(Bk){Bj.slices=Bk;}if(Bc){BZ=Bc.style;Ba=Bc.config;Bh=Bc.params;}if(!Ba){Ba={showProgress:true,hideProgress:true,progressStateText:AS};}var Bm=Bb.style=f.clone(this.defaultStyle),Bg=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();B(BZ.params,Bm.params);var Bd={taskId:"getServerJSONResults",styleName:"ServerJsonRWDStyle",compress:1,rwb:this.rwb,messageID:this.msgId,stateID:-1,excludeData:!!(Bg||mstrConfig.resolveOnly),params:JSON.stringify(Bj),treesToRender:Bm.params.treesToRender};B(Bh,Bd);Ba.preserveUndo=(Bc&&Bc.preserveUndo)||false;As.call(this,Bd,Bl,Ba);},downloadGridData:function J(Bc,Bd){var Bb={act:"gridIncrementalFetch",nodeKey:Bc.nodeKey,rowPosition:Bc.rowPosition,maxRows:Bc.maxRows,colPosition:Bc.colPosition,sliceId:Bc.sliceId,maxColumns:Bc.maxColumns,rowMode:Bc.rowMode||1,partialRetrieval:this.newRetrievalKeysConfig().addNode(Bc.nodeKey)};if(Bc.partialUpdate){Bb.partialUpdate=Bc.partialUpdate;}var Ba=mstrmojo.all[Bc.xtabId],BZ=Ba&&Ba.isCustomSort;this.submitUpdates(Bb,Bd,f.copy(X(),{noUpdate:true,preserveStid:BZ,config:{silent:true}}));},txMarkRows:function Aa(BZ,Ba){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionMarkRow(BZ.nodeKey,BZ.sliceId,BZ.rowOrdinal,BZ.actionType);}else{As.call(this,{taskId:"markRow",rwb:this.rwb,nodeKey:BZ.nodeKey,sliceId:BZ.sliceId,rowOrdinal:BZ.rowOrdinal,actionType:BZ.actionType},Ba);}},txChangeData:function AC(BZ,Ba){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionDataChange(BZ.nodeKey,BZ.sliceId,JSON.stringify(BZ.cells),BZ.autoRefresh);}else{As.call(this,{taskId:"changeData",rwb:this.rwb,nodeKey:BZ.nodeKey,sliceId:BZ.sliceId,cells:BZ.cells,autoRefresh:BZ.autoRefresh},Ba);}},sendTransactionActions:function d(Ba,Bb){var BZ={taskId:"DocTransaction",rwb:this.rwb,keyContext:Ba.keyContext,actions:Ba.actions,messageID:this.msgId};if(Ba.txrcd){BZ.isPending=Ba.txrcd.pending;BZ.timestamp=Ba.txrcd.timestamp;}As.call(this,BZ,Bb,{silent:!!Bb});},newUpdate:function BE(Bb,Ba){var BZ=new mstrmojo.DocDataService.Update(Ba);BZ.ds=this;BZ.cmd=Bb;return BZ;},newUpdateWithoutCmd:function o(Ba){var BZ=new mstrmojo.DocDataService.Update(Ba);BZ.ds=this;return BZ;},newRetrievalKeysConfig:function Ak(){return new mstrmojo.rw.model.RetrievalKeysConfig();},newUpdateKeysConfig:function R(){return new mstrmojo.rw.model.UpdateKeysConfig();},submitCmd:function BL(Ba,BZ){this.newUpdate(Ba,BZ).submit();},submitUpdates:function An(Bi,Bo,Bf){Bi=Av(Bi);var Be={actions:Bi},BZ,Bc,Bl,Bb=false;V.forEach(Bi,function Bh(Bq){if(Bq.disablePU){Bb=true;delete Bq.disablePU;}V.forEach(Bq.actions,Bh);return !Bb;});if(!Bb){var Ba=mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig(Bi),Bn=mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig(Bi);if(!f.isEmpty(Ba)){Be.partialRetrieval=Ba;}if(!f.isEmpty(Bn)){Be.partialUpdate=Bn;}}if(Bf){BZ=Bf.style;Bc=Bf.config;Bl=Bf.params;}if(!Bc){Bc={showProgress:true,hideProgress:true,progressStateText:AS};}if(!BZ){Be.style=this.defaultStyle;}else{var Bp=Be.style=f.clone(this.defaultStyle);B(BZ.params,Bp.params);}Be.style.name=(BZ&&BZ.name)||mstrApp.styleName;var Bg={taskId:"mojoRWManipulation",rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(Be)};B(Bl,Bg);Bc.preserveUndo=(Bf&&Bf.noUpdate)||false;Bc.preserveStid=(Bf&&Bf.preserveStid)||false;var Bk=this,Bm=true,Bd=AD.override({success:function(Bq,Br){if(Bq.status===2){Bm=false;Bk.submitUpdates([],Bo,Bf);}else{Bm=true;return this._super(Bq,Br);}},complete:function(){if(this._super&&Bm){this._super();}}},B(Bo));if(!(Bf&&Bf.hideCancel)){Bc.waitBoxCfg=f.copy({showCancel:true},Bc.waitBoxCfg);}if(Bf&&Bf.message){Bc.waitBoxCfg=f.copy({message:Bf.message},Bc.waitBoxCfg);}var Bj=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(Bf&&Bf.resolveOnly!==undefined){Bg.resolveOnly=Bf.resolveOnly;}else{if(Bj){Bg.resolveOnly=true;}}if(Bf&&Bf.excludeData!==undefined){Bg.excludeData=Bf.excludeData;}else{if(Bj){Bg.excludeData=true;}}if(Bf&&Bf.noDeltaXML!==undefined){Bg.noDeltaXML=Bf.noDeltaXML;}if(Bg.resolveOnly&&Bg.excludeData){mstrApp.enableUpdate=true;}As.call(this,Bg,Bd,Bc);},submitTemplateUpdates:function AF(BZ,Bb,Bc,Ba){this.submitUpdates(this.getUpdateTemplateAction(BZ,Bb),Bc,Ba);},getUpdateTemplateAction:function Ah(BZ,Bb,Ba){return{act:"updateTemplate",keyContext:BZ,partialRetrieval:this.newRetrievalKeysConfig().addNode(BZ,Ba),partialUpdate:{selectors:Bb.selectors},actions:Av(Bb)};},addUpdateTemplateAction:function BR(Bb,BZ,Ba){Bb.addActions(this.getUpdateTemplateAction(BZ,Ba));},applySegment:function AX(Ba,BZ,Bb){As.call(this,{taskId:"applySegment",rwb:this.rwb,segmentID:Ba,nodeKey:BZ},Bb);},getPageByTree:function AZ(BZ){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},BZ);},getUserDICubeInfo:function a(BZ,Ba){As.call(this,{taskId:"getUserDICubeInfo",cubeIds:BZ.join(",")},Ba);},applySorts:function BD(Ba,Bb,BZ,Bc){As.call(this,{taskId:"applySorts",key:Ba,sortType:Bb,sortList:BZ},Bc,mstrmojo.DocDataService.PROGRESS_CONFIG);},getAddNewDerivedMetricToDatasetSubmitFunc:function BA(Ba){var BZ=this;return function(Bd){var Be=BZ.model,Bc=Be.controller,Bb=f.copy(Bd,Ba),Bf=[Ar.call(BZ,Bb,true)],Bg=Be.getDatasetsUpdateCallback();if((Bb.mptf||{}).dirty||this.enablePTO){Bf.push(AO(Bb));}Bc.submitUndoRedoUpdates(Bf,null,Bg,{style:{params:{treesToRender:1}}});};},getAddNewDerivedMetricToXtabSubmitFunc:function Az(Ba){var BZ=this;return function(Be){var Bf=BZ.model,Bd=Bf.controller,Bc=f.copy(Be,Ba),Bb=Bc.idx,Bh=[],Bi=AD.wrapMethods(Bf.getDatasetsUpdateCallback(),Bd._getXtabCallback(Bc.host));Bh.push(Ar.call(BZ,Bc,true));if((Bc.mptf||{}).dirty||this.enablePTO){Bh.push(AO(Bc,true));}if(Bc.replace){Bh.push(BZ.getUpdateTemplateAction(Bc.nodeKey,[Bc.host.model.getRemoveTemplateUnitAction({did:Bc.replace.did,t:Bc.replace.t})]));}else{Bb++;}var Bg=BZ.getUpdateTemplateAction(Bc.nodeKey,[Bc.host.model.getAddTemplateUnitAction({did:"$GUID_135",t:4},Bc.dsid,Bc.zoneid,Bb),{act:"renameUnit",id:"$GUID_135",type:4,name:Bc.alias,isDynamicAlias:false}]);Bh.push(Bg);Bd.submitUndoRedoUpdates(Bh,null,Bi);};},getAddNewDerivedMetricToDropzoneSubmitFunc:function AL(Ba){var BZ=this;return function(Bg){var Bh=BZ.model,Bi=Bh.controller,Bk=f.copy(Bg,Ba),Bm=Bk.host.zonesModel,Bn=Bk.idx,Bf=[],Bb=[],Bl={id:Bk.zoneid},Bj={did:"$GUID_135",t:4},Bo=AD.wrapMethods(Bh.getDatasetsUpdateCallback(),Bi._getXtabCallback(Bk.host));Bf.push(Ar.call(BZ,Bk,true));if((Bk.mptf||{}).dirty||this.enablePTO){Bf.push(AO(Bk));}if(Bk.replace){var Bd={did:Bk.replace.did,t:Bk.replace.t};Array.prototype.push.apply(Bb,Bm.getRemoveDropZoneUnitActions(Bl,Bd));}else{Bn++;}Bb.push(Bm.getAddDropZoneUnitAction(Bl,Bj,Bn,{datasetId:Bk.dsid}));if(Bk.extraZone){Bb.push(Bm.getAddDropZoneUnitAction({id:Bk.extraZone.id},Bj,Bk.extraZone.idx,{datasetId:Bk.dsid}));}if(!Bk.replace){var Bc=(Ba.zoneid===4)?1:2,Be=Bm.getAddMetricNameAction(Ba.host,Bc);if(Be){Bf.push(Be);}}if(!Bk.replace&&Bm.gmZones){Be=Bm.gmZones.getUpdateGroupInfoActionForNewMetric(Ba.zoneid,Bn,true);if(Be){Bf.push(Be);}}Bm.checkAndAddThresholdAction(Bk.zoneid,Bj,Bb);Bf.push(BZ.getUpdateTemplateAction(Bk.nodeKey,Bb));Bi.submitUndoRedoUpdates(Bf,null,Bo);};},getEditDerivedMetricSubmitFunc:function l(Ba){var BZ=this;return function(Bd){var Bf=BZ.model,Bc=Bf.controller,Bb=f.copy(Bd,Ba),Be=Ba.nodeKey,Bg={act:"editDM",formula:Bb.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(Bb.tokenStreamXML),afb:Ba.afb,sfb:Ba.sfb,dsid:Bb.dsid||"",did:Bb.did},Bh=[Bf.addUpdateObjects(Bg,{id:Bb.did,type:4,flag:mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS.DATA_CHANGE})],Bi=AD.wrapMethods(Bf.getDatasetsUpdateCallback(),Bc.getPartialUpdateCallback());if(mstrApp.isSingleTier&&Ba.originTokenStream){Bg.originFormula=Ba.originTokenStream;Bg.originAfb=Ba.originAfb;Bg.originSfb=Ba.originSfb;}if((Bb.mptf||{}).dirty){Bh.push(AO(Bb));}if(Be){Bh.push(BZ.getUpdateTemplateAction(Be,[{act:"renameUnit",id:Bb.did,type:4,name:Bb.alias,isDynamicAlias:false}]));}else{Bg.name=Bb.alias;}Bc.submitUndoRedoUpdates(Bh,null,Bi,{style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}});};},resetSelections:function BH(Ba,BZ,Bb){As.call(this,{taskId:"resetSelections",rwb:this.rwb,unitKeyContext:Ba||"",usePartDisplay:BZ?"0":"1",treesToRender:BZ?3:2},Bb);},setPreference:function F(BZ,Ba){As.call(this,{taskId:"setPreference",prefs:BZ},Ba);},getObjectInfo:function Af(BZ,Ba){As.call(this,B(BZ,{taskId:"getObjectInfo"}),Ba,X());},addSuppressData:function A4(BZ){if(BU(BZ)===mstrmojo.DocDataService.EnumTreesToRender.NONE){f.copy({params:{suppressData:true}},BZ);}},uploadImageToServer:function(Bb,Bc){var Ba={taskId:"importImage",imageFieldName:"imageData",isEdit:1,fieldKey:Bb.fieldKey,fieldName:Bb.fieldName,imageName:encodeURIComponent(Bb.imageName),imageSize:Bb.imageSize,nodeKey:Bb.nodeKey,sectionKey:Bb.sectionKey,msgID:this.msgId||""};if(mstrApp.isSingleTier){var BZ=";base64,";Ba.rwNodeKey=Bb.fieldGroupKey;Ba.imageData=Bb.base64Str.split(BZ)[1]||Bb.base64Str;mstrApp.serverRequest(Ba,Bc);}else{Ba.imageData=Bb.imageData;mstrmojo.xhr.upload("POST",mstrConfig.taskURL,Bc,Ba);}}});mstrmojo.DocDataService.Update=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DocDataService.Update",actions:null,callback:null,extras:null,init:function Ap(BZ){B(BZ,this);this.actions=this.actions||[];this.callback=this.callback||{};this.extras=this.extras||{};},addActions:function Aj(BZ){this.actions=this.actions.concat(Av(BZ));},addCallbacks:function A6(BZ){this.callback=AD.wrapMethods(this.callback,BZ);},addExtras:function Ad(Ba){var BZ=BU(Ba),Bb=BU(this.extras);this.extras=B(Ba,this.extras);if(BZ!==undefined&&Bb!==undefined){this.extras.style.params.treesToRender|=Bb;}},addUpdate:function Ag(BZ){this.add(BZ.actions,BZ.callback,BZ.extras);},setTreesToRender:function BY(BZ){if(BZ){this.addExtras({style:{params:{treesToRender:BZ}}});}return this.extras.style.params.treesToRender;},add:function b(Ba,Bb,BZ){if(Ba){this.addActions(Ba);}if(Bb){this.addCallbacks(Bb);}if(BZ){this.addExtras(BZ);}},submit:function AG(){var Ba=this.actions,Bb=this.callback,BZ=this.extras;if(this.cmd){this.cmd.submit(Ba,Bb,BZ);}else{this.ds.submitUpdates(Ba,Bb,BZ);}}});mstrmojo.DocDataService.PUInfoType=null;mstrmojo.DocDataService.ExtrasType=null;mstrmojo.DocDataService.PROGRESS_CONFIG={showProgress:true,hideProgress:true,progressStateText:AS,delay:true};mstrmojo.DocDataService.UNDO_KEY="undo";mstrmojo.DocDataService.REQUEST_DEFN_DATA={style:{params:{treesToRender:3}}};mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION={style:{params:{treesToRender:1}}};mstrmojo.DocDataService.REQUEST_ONLY_DATASETS={style:{params:{treesToRender:0}}};mstrmojo.DocDataService.SUPPRESS_DATA={params:{suppressData:true}};mstrmojo.DocDataService.RAPID_EXEC={params:{suppressData:true,rapidExec:true}};mstrmojo.DocDataService.EMPTY_CALLBACK={success:mstrmojo.emptyFn};mstrmojo.DocDataService.CopyMoveDestinationType=null;mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS={FORMAT_CHANGE:1,DATA_CHANGE:2};mstrmojo.DocDataService.EnumTreesToRender={NONE:0,DEFN:1,DATA:2,BOTH:3};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.vi.ui.rw._IsMultiselectXtab");var Z=mstrmojo.dom,d=mstrmojo.css;function N(){var f=this._outlineRenderTimer;if(f){self.clearInterval(f);delete this._outlineRenderTimer;this.renderingRows=false;}}function P(f,l,q,h,k,j,p){var o=this,g=this.id;this.renderingRows=true;this._outlineRenderTimer=self.setInterval(function(){try{if(!f){return ;}var s=[],u=f.pageStatus[l],x=0,w=f.rowsPerPage;if(!u||!u.filled){s.push({idx:l,fill:true});}if(s.length>0){f.preRenderPages();f.renderPages(s);f.postRenderPages();f._postPagesClearup=true;}else{if(f._postPagesClearup){f.postRenderPagesCleanup();f.configureActions();f._postPagesClearup=false;}N.call(o);if(f.isRenderingComplete()){f.postRenderingCleanup();}if(j){l++;if(f.pageStatus[l]){P.call(o,f,l,q,h,k,j);}else{V.call(o);o.domNode.style.visibility="visible";}}else{if(p){X.call(o,q,h,k,p);}else{C.call(o,q,h,k,p);}}}}catch(t){N.call(o);throw t;}},f.renderPause);}function b(){var h=this.scrollboxNode;if(!this.heightLimit){h.style.height=h.firstChild.offsetHeight+(h.offsetHeight-h.clientHeight)+"px";}var g=this.xtabClonedNodes,f;for(f in g){g[f].refreshNode();}this._adjustClipSize();this.alignLockNodes(this.scrollboxLeft,this.scrollboxTop);}function G(){var f=this.getTargetZone();if(f&&f.onscroll){f.onscroll();}}function V(){d.removeClass(this.domNode,"outlineBusyCursor");var f=this.scrollboxNode;if(!this.heightLimit){f.style.height=f.firstChild.offsetHeight+(f.offsetHeight-f.clientHeight)+"px";this.refreshResizeHandlers();}if(!this.widthLimit){this.scrollboxNode.firstChild.style.position="relative";this.onGridWidthChanged();}if(this.scrollboxHeightFixed){b.call(this);this._refreshClonedNodes();}this.refreshResizeHandlers();G.call(this);this.updateScrollbars&&this.updateScrollbars();}function D(g,f){if(!g){return ;}if(f){g.className="icon-outline-span outline-expand";g.setAttribute("collapsed",true);}else{g.className="icon-outline-span outline-collapse";g.setAttribute("collapsed",false);}}function Y(){if(this.allPagesLoaded){return true;}var h=0,l=this.children[0].pageStatus,f=l.length;for(h=0;h<f;h++){if(!l[h].filled){return false;}}this.allPagesLoaded=true;var q=this.getTargetZone().tableNode,p=q.rows,o=this.gridData.maxLevel,j,k,g;f=p.length;Q.call(this,o,true);for(h=0;h<f;h++){g=p[h].getElementsByClassName("icon-outline-span")[0];k=(g&&parseInt(g.getAttribute("dpt"),10))||0;if(k>0){k=parseInt(g.getAttribute("dpt"),10);j="depth"+(k-1);this.maxIndividualCollapseCount[j]+=1;if(g.getAttribute("collapsed")==="true"){this.individualCollapseCount[j]+=1;}}}return true;}function L(f){f.setAttribute("collapsed","true");f.className="icon-outline-span outline-expand";}function C(s,j,p,q){var u=s.rows,l=u.length,f=this.getTargetZone(),t,o,h,g=0,k=true;for(h=p+1;h<l;h++){t=u[h];o=parseInt(t.getAttribute("level"),10);if(isNaN(o)){g=parseInt(t.parentElement.getAttribute("n")||1,10);if((p===h-1)&&f.pageStatus[g].filled===true){h++;}break;}if(o<=j){g=parseInt(t.parentElement.getAttribute("n")||0,10)+1;if(g<f.totalPages&&f.pageStatus[g].filled){k=false;}delete this.outlineState.collapseToLevel;break;}}if(h===l){g=parseInt(u[l-1].parentElement.getAttribute("n")||0,10)+1;if(g<f.totalPages&&f.pageStatus[g].filled===true){g++;}}if(k&&g<f.totalPages){P.call(this,f,g,s,j,h-1,false,q);}else{M.call(this,s,j,this.startCollapseRowIndex||p,q);if(this.isAutoTableLayout()){b.call(this);}delete this.startCollapseRowIndex;delete this.outlineState.collapseToLevel;}}function X(s,j,p,q){var u=s.rows,l=u.length,f=this.getTargetZone(),t,o,h,g=f.pageStatus.length,k=true;for(h=p+1;h<l;h++){t=u[h];o=parseInt(t.getAttribute("level"),10);if(isNaN(o)){g=parseInt(t.parentElement.getAttribute("n")||1,10);if(f.pageStatus[g].filled===true){f.pageStatus[g].filled=false;h++;}break;}if(o<=j){g=parseInt(t.parentElement.getAttribute("n")||0,10)+1;if(g<f.totalPages&&f.pageStatus[g].filled){k=false;}delete this.outlineState.collapseToLevel;break;}}if(k&&g<f.totalPages){P.call(this,f,g,s,j,h-1,false,q);}else{M.call(this,s,j,this.startCollapseRowIndex||p,q);if(this.isAutoTableLayout()){b.call(this);}delete this.startCollapseRowIndex;delete this.outlineState.collapseToLevel;}}function M(AG,k,q,g){var AH=this,x=AG.rows,AE=x.length,s,h,l,AC,AB,u="outlineMode "+(g?"":" hiddenRow"),AF=AH.getStickedTableNodes(),f=AH.children[0],AA=this.outlineState,AD,o,t=f.rowsPerPage;for(AC=q+1;AC<AE;AC++){s=x[AC];l=parseInt(s.getAttribute("level"),10);if(l<=k){break;}if(g&&l>k+1){continue;}s.className=u;o=s.getAttribute("ei");AD=s.getElementsByClassName("icon-outline-span")[0];if(!g){AA[o]={expanded:false,hidden:true};if(AD&&AD.getAttribute("collapsed")!=="true"){AH.individualCollapseCount["depth"+(l-1)]+=1;L(AD);}}else{AA[o]={expanded:false,hidden:false};}for(AB=0;AB<AF.length;AB++){h=AF[AB].rows[AC];if(h){h.className=u;if(!g){AD=h.getElementsByClassName("icon-outline-span")[0];if(AD){L(AD);}}}}}V.call(AH);var p="depth"+(k-1);if(Y.call(AH)){if(AH.individualCollapseCount[p]===0){S.call(AH,k+1,true);}else{if(!g&&this.maxIndividualCollapseCount[p]===this.individualCollapseCount[p]){R.call(AH,k);}}}var z=mstrmojo.findAncestor(this,"adjustAutoWidth",null,mstrmojo.grid);if(z){z.adjustAutoWidth(this);}}function S(k,g){if(!this.gridData.gts.show){return ;}var j=this.getTargetZone().tableNode,l=this.getStickedTableNodes(),f=k-1,o,h;l.push(j);mstrmojo.array.forEach(l,function(p){var q=p.rows[0].getElementsByClassName("icon-outline-span");for(h=0;h<q.length;h++){o=q[h];if(h<f){o.setAttribute("collapsed",0);d.removeClass(o,"outline-expand");d.addClass(o,"outline-collapse");}else{if(!g){o.setAttribute("collapsed",1);d.removeClass(o,"outline-collapse");d.addClass(o,"outline-expand");}}}});}function R(g){if(g===this.gridData.maxLevel){return ;}var f="depth"+(g-1);if(this.individualCollapseCount[f]===this.maxIndividualCollapseCount[f]){S.call(this,g);}else{R.call(this,g+1);}}function Q(l,g){var j=this.gridData,f=j.maxLevel||(j.gts&&j.gts.row&&j.gts.row.length)||0,k,h;for(h=0;h<f;h++){k="depth"+h;if(g){this.maxIndividualCollapseCount[k]=0;}if(h>=l){this.individualCollapseCount[k]=this.maxIndividualCollapseCount[k];}else{this.individualCollapseCount[k]=0;}}}function J(){var g=this.gridData,f=g.gts.show?1:0;if(g.gts.col&&g.gts.col.length>1){f=g.gts.col.length;}return f;}function U(){this.outlineState={};if(mstrApp.outlineStates[this.id]){delete mstrApp.outlineStates[this.id];}}function O(){this.retainOutlineState=true;if(!mstrApp.outlineStates[this.id]){mstrApp.outlineStates[this.id]=this.outlineState;}}mstrmojo.vi.ui.rw._IsOutlineXtab=mstrmojo.provide("mstrmojo.vi.ui.rw._IsOutlineXtab",{_mixinName:"mstrmojo.vi.ui.rw._IsOutlineXtab",onclick:function e(u){var q=this,p=u.getTarget&&u.getTarget(),l=p&&Z.findAncestorByName(p,"td",true,this.viewport),h=l&&Z.findAncestorByName(p,"span",true,l),o=h&&parseInt(h.getAttribute("expandTo"),10);if(h&&(h.getAttribute("sty")==="outimg"||o>=1)){var w=l.parentElement;if(h&&!u.shiftKey&&!u.ctrlKey){var x=this.getTargetZone().tableNode;if(this.renderingRows){return ;}if(o>=1){U.call(this);this.scrollboxNode.scrollTop=0;var s=this.gridData,f=q.model.getDataService(),k=parseInt(h.getAttribute("collapsed"),10)||0;o+=k?1:0;S.call(this,o);s.lvlepd=o=o<s.maxLevel?o:-1;f.setOutlineExpanding({unitKey:q.node.k||q.node.data.k,outlineLevel:o});window.setTimeout(function(){q.refresh();},10);}else{if(h.getAttribute("sty")==="outimg"){d.addClass(this.domNode,"outlineBusyCursor");var j=parseInt(h.getAttribute("dpt"),10),t=p.getAttribute("collapsed")==="true",g=w.getAttribute("ei");this.outlineState[g]={expanded:t,hidden:false};if(t){p.className="icon-outline-span outline-collapse";p.setAttribute("collapsed","false");this.individualCollapseCount["depth"+(j-1)]-=1;window.setTimeout(function(){q.outlineState.isExpanding=true;q.outlineState.collapseToLevel=j+1;q.startCollapseRowIndex=w.rowIndex;X.call(q,x,j,w.rowIndex,true);},10);}else{p.className="icon-outline-span outline-expand";p.setAttribute("collapsed","true");this.individualCollapseCount["depth"+(j-1)]+=1;window.setTimeout(function(){q.outlineState.isExpanding=false;q.outlineState.collapseToLevel=j;q.startCollapseRowIndex=w.rowIndex;C.call(q,x,j,w.rowIndex,false);},10);}}}}}else{this._super(u);}},refresh:function I(f,q){var o=this;if(q){var l=this.getTargetZone(),u=l&&l.tableNode,s=this.gridData;if(!s||!l||!u){return this._super(f);}var p=this.getFormats(),j=l.gridContainerNode,h=this.xtabClonedNodes||[],g=(p&&p.width)||j.style.width,t=(p&&p.height)||this.scrollboxNode.style.height,k=parseInt(g,10);if(s.afc){k=Math.max(u.offsetWidth,k);}j.style.width=k+"px";mstrmojo.array.forEach(h,function(w){if(w.domNode){w.domNode.firstChild.style.width=k+"px";}});this.widthLimit=k;this.heightLimit=parseInt(t,10);this.scrollboxNode.style.height=t;this.resize();this.updateScrollbars();return ;}if(!this.retainOutlineState){U.call(this);}else{this.retainOutlineState=false;}this._super(f);},postBuildRendering:function a(){var k=this.gridData;this.isOutlineMode=(k&&k.olm&&!(k.rw&&k.rw.row.bc>0)&&!this.defn.txi);if(!mstrApp.outlineStates){mstrApp.outlineStates=[];}if(mstrApp.outlineStates[this.id]){this.outlineState=mstrApp.outlineStates[this.id];}else{if(!this.outlineState){this.outlineState={};}}this._super();var h=this.getTargetZone(),j=h&&h.tableNode;if(!k||!h||!j){return ;}var l=k.lvlepd||0,g=k.maxLevel||(k.gts&&k.gts.row&&k.gts.row.length)||0,f=k.olm&&!(k.rw&&k.rw.row.bc>0)&&(l>=1&&l<g);this.allPagesLoaded=false;this.individualCollapseCount={};this.maxIndividualCollapseCount={};Q.call(this,g,true);if(f){h._defaultPageHeight=Math.min(j.tBodies[0].offsetHeight,h._defaultPageHeight);h.gridContainerNode.style.minHeight=h._defaultPageHeight*h.totalPages+"px";S.call(this,l);this.scrollboxNode.scrollTop=0;G.call(this);}},gridPagesRendered:function B(){this._super();if(Y.call(this)&&!this.outlineState.isExpanding){R.call(this,1);}},isOutlineMode:true,showBanding:function A(f){O.call(this);this._super(f);},formatGridZone:function W(h,g,f){O.call(this);this._super(h,g,f);},batchFormatGridZones:function E(h,g,f){O.call(this);this._super(h,g,f);},formatPadding:function K(g,h,f){O.call(this);this._super(g,h,f);},updateRelatedColWidths:function F(f){O.call(this);this._super(f);},updateScenario:function H(f){O.call(this);this._super(f);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(V,L,S,Y,I,P,Z,X){var Q=this.wrapperNodes(V),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,U=I+P,M=Q[0].offsetLeft,O;for(var W=1;W<=K;W++){O=Q[R].offsetLeft-M+Z;if(O<=I){J=R;}else{if(O>=U){H=R;}}var N=Math.round(L/Math.pow(2,W+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo._IsList","mstrmojo.dom");mstrmojo.android._IsList=mstrmojo.provide("mstrmojo.android._IsList",mstrmojo.hash.copy(mstrmojo._IsList,{_mixinName:"mstrmojo.android._IsList",getItemIdxTouch:function A(I){var H=mstrmojo.dom.findAncestorByAttr(I.target,"idx",true,this.domNode),G=H&&parseInt(H.value,10);return(G!==null&&!isNaN(G))?G:-1;},resetListState:function B(){this.clearSelect(true);var G=this.scrollerConfig;if(G){delete this.scrollerConfig.origin;}},restoreListState:function C(G,I){var J={};J[G]=true;this.selectedIndices=J;this.selectedIndex=G;var H=this.scrollerConfig;if(H){H.origin=I;}},touchSelectEnd:function E(G){this.touchTap(G);}}));var F=mstrmojo.android._IsList;var D=F.onclick;F.onclick=mstrmojo.emptyFn;F.touchTap=function(G){this._listTarget=G.target;D.call(this,G);};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.dom","mstrmojo.array");var R=Math,V=mstrmojo.publisher.hasSubs,Q=mstrmojo.hash,F=Q.forEach,b=mstrmojo.dom;var S=0.15;var f=1,U=2;var B={y:{edge:["top","bottom"],size:0},x:{edge:["left","right"],size:0},clsName:"mstrmojo-touch-scroll-indicator",init:function Z(){var k=this.y,j=this.x;if(!k.i){var l=k.i=document.createElement("div");l.className=this.clsName;var o=j.i=l.cloneNode(false);document.body.appendChild(l);document.body.appendChild(o);}},setGradient:function a(t,l,u,p){var s=t.i,k=t.edge[l?1:0];var q=R.min(R.round(R.min(R.abs(u)/200,1)*100),p/2),j="left top",o="left bottom";if(l){o=j;if(k==="bottom"){j="left bottom";}else{j="right top";}}else{if(k==="left"){o="right top";}}if(q!==t.size){s.style.background="-webkit-gradient(linear, "+j+", "+o+", from(rgba(39, 104, 162, .4)), to(rgba(39, 104, 162, 0)), color-stop("+(q/100)+", rgba(39, 104, 162, 0)))";t.size=q;}},scrollAxis:function D(o,AA,q,x,l){var AF=AA-q,k=l[o]=(AF!==0);if(!k){this.hide(o);return ;}var s=this[o],w=s.i,j=w.style,t=(o==="y"),u=(AF>0),z=this.clsName+" "+s.edge[u?1:0];if(!s.size||w.className!==z){w.className=z;var AB="px",AG=3,AC=x.y,p=x.x,AD=100,AE=x.w;if(t){if(u){AC+=x.h-AD-AG;}}else{AE=AD;AD=x.h;if(u){p+=x.w-AE-AG;}}j.top=AC+AB;j.left=p+AB;j.width=AE+AB;j.height=AD+AB;j.display="block";}this.setGradient(s,u,AF,t?x.h:x.w);},scroll:function D(o,l,s,q,w){var u=l.x,t=l.y;if(u!==s||t!==q){this.init();var p=this._widgetPosition;if(!p){var j=o.indicatorEl||w;p=mstrmojo.dom.position(j.parentNode);}var k=o._outOfBounds||{};this.scrollAxis("y",t,q,p,k);this.scrollAxis("x",u,s,p,k);this._widgetPosition=p;o._outOfBounds=k;}else{this.hideAll();delete o._outOfBounds;}},hide:function M(k){var j=this[k];if(j.size!==undefined){j.i.style.display="none";j.i.className=this.clsName;j.size=0;}},hideAll:function d(){this.hide("y");this.hide("x");delete this._widgetPosition;}};function X(j,k){return k?R.max(R.min(R.round(j),k.end),k.start):j;}function O(j,l,k){k.name=l;k.id=j.identifier;j.raiseEvent(k);}function G(){var k="scrollDone",j=this.origin;if(V(this.id,k)&&j){O(this,k,{x:j.x,y:j.y});}this.stopDeceleration();}function I(l,k,q){var p=l.scrollEl;if(!p){G.call(l);return ;}var o={x:k.x||0,y:k.y||0};F(l._scrollBarEls,function(AE,z){var AJ=(z==="x"),AD=o[z],s=AE.length,AF=AE.ratio,AB=AE.viewportSize,x=6/s,w=AE["base"+(AJ?"Left":"Top")],AC=w+AB-s,u=R.round(w+(AF*AD));if(u<w){u=w-AD;s+=AD;}else{if(u>AC){var AI=(AD-l.offset[z].end)*AF;u=R.min(AC+AI,AB+w-6)-1;s-=AI;}}var AH=0,t=[AH,AH,AH],AA=[1,1,1],AG=AJ?0:1;t[AG]=(u-w);AA[AG]=R.min(R.max(s/AE.length,x),1);b.translate(AE,t[0],t[1],t[2]," scale3d("+AA.join(",")+")");});if(q){q+="ms";}if(l._isHosted){var j=p.parentNode;j.scrollTop=o.y;j.scrollLeft=o.x;}else{p.style[b.CSS3_TRANSITION_DURATION]=q||"0";b.translate(p,-o.x,-o.y,0,l.transform,l.useTranslate3d);}if(V(l.id,"scrollMoved")){O(l,"scrollMoved",{x:k.x,y:k.y});}}function J(j,k,l){return R.ceil(1+R.log(j/R.abs(k))/R.log(1-l));}function E(j,p,l,k,o){return j+(p*(l*(1-R.pow(1-o,k))/o));}function N(AK,AU,q,AQ,AC,AP,x){var w=AK.offset[q];if(!w){return AU;}var p=AK._outOfBounds,k=p&&p[q],AA=w.incFetch,AB=AK.friction,u=w.start,t=w.end,AL=AQ?t:u;AC=R.abs(AC);if(k){AQ=(AU<u);AL=AQ?u:t;}var AT=AQ?1:-1;if(k&&(AQ||!AA)){var z=S*3,AS=1/(1-AB),o=z/R.pow((1-AB),(R.log(1-R.abs(AU-AL)*(1-AS)/z)/R.log(AS))-1);var AI=R.round(E(AU,AT,o,AP,AB));if(AQ?(AI>=AL):(AI<=AL)){G.call(AK);return AL;}return AI;}var AO=w.pageSize,AN=w.supportedEdges;var s=E(AU,AT,AC,AP,AB),AD=(s<=u),l=(s>=t);if(AD||l){if(AA&&((AD&&((AN&f)>0))||(l&&((AN&U)>0)))){if(s-t>=AO){s=t+AO;AL=s;}if(!AK.STATUS_INC_FETCH){AK.STATUS_INC_FETCH=true;O(AK,"incFetch",{edge:l?U:f});}}else{if(AK.bounces){var AR=AB*2,AE=AK.bounceVelocity,j=AK.bounceTime,AM=AK.bounceDistance;if(!AK.hasBounced){AE[q]=R.abs(S/R.pow(1-AB,x-AP-1));j[q]=J(S,AE[q],AR);AM[q]=R.abs(E(s,AT,AE[q],j[q],AR)-s);AK.raiseEvent({name:"bounceOut",id:AK.identifier,axis:q,direction:AQ,value:R.round(s)});AK.hasBounced=true;}var AH=Math.floor(AM[q]/2);var AG=E(AL,AT,AE[q],AP,AR),AJ=R.abs(AG-AL);if(R.abs(AJ)<AH){return AG;}if(R.abs(AJ)>=AM[q]){G.call(AK);return AL;}var AF=AH-(AJ-AH);return R.round(AL-(AQ?-AF:AF));}s=AL;}}return R.round(s);}function P(k){var j=this._scrollListener;if(j){if(!k||k!==j.el){b.detachEvent(j.el,"scroll",j.fn);delete this._scrollListener;return true;}return false;}return true;}mstrmojo.TouchScroller=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.TouchScroller",scrollEl:null,identifier:"",hScroll:false,vScroll:false,offset:null,origin:null,transform:"",friction:0.0015,frameRate:60,bounces:true,hasBounced:false,bounceDistance:{},bounceTime:{},bounceVelocity:{},showScrollbars:false,showIndicators:true,useTranslate3d:true,STATUS_INC_FETCH:false,init:function Z(j){this._super(j);B.init();},initScroller:function Y(k){Q.copy(k,this);var p=this.scrollEl;if(p){var o=this._isHosted=false;if(o){var j=p.parentNode;if(P.call(this,j)){j.style.overflow="auto";var q=this.id,l=this._scrollListener={el:j,fn:function(s){var t=mstrmojo.all[q].origin,u=s.target;t.x=u.scrollLeft;t.y=u.scrollTop;}};b.attachEvent(j,"scroll",l.fn);}this.showScrollbars=false;}}},canScroll:function L(){return this.vScroll||this.hScroll;},updateScrollBars:function H(t,o){var q=this.scrollEl;if(!this.showScrollbars||!q){return ;}var k=this._scrollBarEls;if(!k){var p=this;k=this._scrollBarEls={x:"hScroll",y:"vScroll"};F(k,function(u,w){if(p[u]){var x=document.createElement("div");x.className="mstrmojo-touch-scrollBar "+w+"Axis";(o||q.parentNode).appendChild(x);k[w]=x;}else{delete k[w];}});}if(!t){var j=this.scrollEl.parentNode;t={top:0,right:j.clientWidth,bottom:j.clientHeight,left:0};}var s=9,l={x:{left:t.left,top:t.bottom-s,x:t.right-t.left,d:"Width"},y:{left:t.right-s,top:t.top,x:t.bottom-t.top,d:"Height"}};F(k,function(AC,z){var AH=AC.style,AF=l[z],AA=AF.d,AB=AC.parentNode,AG=AF.x;var w=AF.left,AE=AF.top,AD=AG/q["offset"+AA],u=Math.min(Math.round(AG*AD),AG);AC.baseLeft=w;AC.baseTop=AE;AC.ratio=AD;AC.viewportSize=AG;AC.length=u;AH.left=w+"px";AH.top=AE+"px";AH[AA.toLowerCase()]=u+"px";});},toggleScrollBars:function C(j){F(this._scrollBarEls,function(k){k.style.opacity=j?1:0;});},scrollTo:function(k,q,o){if(!this.canScroll()&&!(k===0&&q===0)){I(this,{x:0,y:0});return ;}var p=this.offset,l=this.origin,j={x:(this.hScroll)?X(k,p.x):0,y:(this.vScroll)?X(q,p.y):0};I(this,j,o);l.x=j.x;l.y=j.y;},scrollToEnd:function(k,q,o){var l=this.origin,p=this.offset,j={x:0,y:0};if(l&&p){mstrmojo.array.forEach([k,q],function(t,s){var w=s?"y":"x",u=p[w];j[w]=t?(u&&u.end)||0:l[w];});}this.scrollTo(j.x,j.y,o);},scroll:function D(q){if(this._isHosted){return ;}var o=this.offset,AA=this.scrollEl,AC=q.delta,AD=AC.x,AB=AC.y;if(!AA){return ;}if(!o&&this.showIndicators){B.scroll(this,{x:(this.noHScroll)?0:-AD,y:(this.noVScroll)?0:-AB},0,0,AA);return ;}var z=this.origin,s={x:(this.hScroll)?R.round(z.x-AD):0,y:(this.vScroll)?R.round(z.y-AB):0},w=X(s.x,o.x),u=X(s.y,o.y);if(!o.scrollPast){if(this.showIndicators){B.scroll(this,s,w,u,AA);}s.x=w;s.y=u;}else{var p=(w!==s.x),t=(u!==s.y),j=(p||t),l=this._outOfBounds,k="";if(l){if(p!==(l.x===true)||t!==(l.y===true)){k="scrollIn";}}else{if(j){k="scrollOut";}}if(k){if(V(this.id,k)){var x=q.direction;O(this,k,{x:{position:s.x,direction:x.x},y:{position:s.y,direction:x.y}});}if(j){this._outOfBounds={x:p,y:t};}else{delete this._outOfBounds;}}}I(this,s);},scrollEnd:function W(AB){B.hideAll();if(!this.canScroll()||this._isHosted){return ;}var AJ=this.id,AC=this.friction,AR=1/(1-AC),AK=this.origin,o=AB.velocity,AP=AB.direction,AI=new Date(),p=this._outOfBounds,x=this.offset,AQ={x:this.hScroll,y:this.vScroll},AD={},AT={},AS={},z={},s={},AA={},u={},t={},AM={},AO=function(AW){AA[AW]=S;var AV=x[AW],AU=(p&&p[AW]),AX=(AU&&(!AV||!x.scrollPast));AT[AW]=(AQ[AW]&&!AX)?AK[AW]-AB.delta[AW]:AK[AW];if(AV){u[AW]=AV.start;t[AW]=AV.end;if(AU){if(!AX){AP[AW]=(AT[AW]<u[AW]);AM[AW]=(AP[AW])?u[AW]:t[AW];if(AP[AW]||!AV.incFetch){AA[AW]=S*3;o[AW]=AA[AW]/R.pow((1-AC),(R.log(1-R.abs(AT[AW]-AM[AW])*(1-AR)/AA[AW])/R.log(AR))-1);}}else{AT[AW]=X(AK[AW]-AB.delta[AW],AV);}}}AD[AW]=(AQ[AW]&&!AX)?R.abs(o[AW]):0;AS[AW]=(AP[AW]||false)?1:-1;z[AW]=J(AA[AW],AD[AW],AC);s[AW]=E(AT[AW],AS[AW],AD[AW],z[AW],AC);};AO("x");AO("y");AK.x=AT.x;AK.y=AT.y;var AG=(AD.x>0),AF=(AD.y>0);if(!x.scrollPast&&!AG&&!AF){G.call(this);var q,AL,AE,l,AN;for(q in x){AL=x[q];AN=AL.supportedEdges;AE=((AL.start===AT[q])&&((AN&f)>0));l=((AL.end===AT[q])&&((AN&U)>0));if(AL.incFetch&&(AE||l)){this.STATUS_INC_FETCH=true;O(this,"incFetch",{edge:l?U:f});}}return ;}this.hasBounced=false;this.bounceDistance={};this.bounceTime={};this.bounceVelocity={};this.decelerating=true;var k=Math.round(1000/this.frameRate),w=AI,AH,j={x:AG,y:AF};this.decelerationTimer=window.setTimeout(function(){var AU=mstrmojo.all[AJ],AV=AU.origin,AZ=new Date(),Aa=(AZ-AI),AY;if(AU._halt){G.call(AU);return ;}AH=AZ-w;w=AZ;if(AH>(k+5)){k=k+R.round((AH-k)/2);}for(AY in j){if(j[AY]){var AX=N(AU,AT[AY],AY,AP[AY],AD[AY],Aa,z[AY]);if(!isNaN(AX)){AV[AY]=AX;}}}I(AU,AV);var AW=(Aa>z.x&&Aa>z.y);if(!AW&&!AU.bounces){AW=true;mstrmojo.hash.forEach(x,function(Ad,Ac){var Ab=AV[Ac];if(Ab!==Ad.end&&Ab!==Ad.start){AW=false;return false;}});}if(AW){G.call(AU);}else{if(AU.decelerating){AU.decelerationTimer=window.setTimeout(arguments.callee,k);}}},k);},stopDeceleration:function A(){var j=!!this.decelerating;if(j){if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}delete this.decelerating;this.toggleScrollBars(false);}delete this._outOfBounds;delete this.hasBounced;delete this.bounceDistance;delete this.bounceTime;delete this.bounceVelocity;delete this._halt;return j;},haltScroller:function K(){this._halt=!!this.decelerating;},unrender:function e(){delete this.scrollEl;},destroy:function g(){this.stopDeceleration();P.call(this);this._super();}});mstrmojo.TouchScroller.getScrollPositionTotals=function h(p){var l=p.parent,j=p._scroller,k=mstrmojo.hash.copy((j&&j.origin)||{x:0,y:0});if(l){var o=mstrmojo.TouchScroller.getScrollPositionTotals(l);k.x+=o.x;k.y+=o.y;}return k;};mstrmojo.TouchScroller.ScrollIndicators=B;mstrmojo.TouchScroller.EnumIncFetchEdges={start:f,end:U};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");mstrmojo.touchManager=new mstrmojo.Obj({notify:function(x,z){return this.raiseEvent({name:"touchesBegin",srcId:x,touch:z});}});var W=mstrmojo.dom,t=W.attachEvent,u=W.detachEvent,B=Math,X=window.mstrConfig,Q=false,J=null,k=X&&X.allowDefaultTouches;var j=10,D=250,F=400,Z=100;var h="Begin",N="End",e="Move",S="Cancel";var p=1,q=2,C=3,P=4;var K={};K[p]="Select";K[q]="Swipe";K[C]="Multi";K[P]="Tap";t(document.body,"touchmove",function(x){if(!X||!X.allowDefaultTouches){if(x.preventDefault){x.preventDefault();return false;}}return true;});function Y(x){var z=x.identifier;return(z===undefined)?1:z;}function l(AB,AC,AA,z){if(Q){var x=z?Y(z)+" ":"";window.console.log(AB+":"+(AA?" "+AA.scriptClass+" "+AA.id:"")+" "+x+(AC||""));}}function o(x){return(J===x);}function U(x){if(!o(x)){return ;}l("detachWinEvts","",x);u(window,W.TOUCHMOVE,x._tmCallback,true);u(window,W.TOUCHEND,x._teCallback,true);u(window,W.TOUCHCANCEL,x._teCallback,true);J=null;}function V(x){if(o(x)){return ;}var z=J;if(z){l("forced deactivation","",z);U(z);}l("attachWinEvts","",x);t(window,W.TOUCHMOVE,x._tmCallback,true);t(window,W.TOUCHEND,x._teCallback,true);t(window,W.TOUCHCANCEL,x._teCallback,true);J=x;}function M(z,x){return"touch"+((x&&K[x])||"")+(z||"");}function a(AA,AB,z){var x=M(AB,z);return(AA[x]!==undefined)?x:"";}function s(AB,AD,AE,AA,z){z=z||AB.gestures[AE.id];var AC=(z&&z.bubbleTarget)||AB,x=a(AC,AD,AA);if(x){l("fire",x,AC);AE.methodName=x;return AC[x](AE);}l("no handler",M(AD,AA),AC);return true;}function f(AG,AH,x,AC){var AD=x.pageX,AB=x.pageY,AE=AG.timeStamp,z=Y(x),AL={x:B.round(AD-AH.pageX),y:B.round(AB-AH.pageY)};var AK={id:z,evt:AG,pageX:AD,pageY:AB,clientX:x.clientX,clientY:x.clientY,target:x.target,delta:AL,date:AE,stop:function(){l("event stopped",z);AG.stopPropagation();AG.cancelBubble=true;}};if(AC){var AA=AE-AC.date,AJ=AC.delta,AF={x:B.abs(AL.x-AJ.x),y:B.abs(AL.y-AJ.y)};AK.velocity={x:AF.x/AA,y:AF.y/AA};AK.isVertical=(AF.y>AF.x);AK.accelDelta=AF;var AI=AK.direction={};if(AD!==AC.pageX){AI.x=(AD<AC.pageX);}else{if(AD!==AH.pageX){AI.x=(AD<AH.pageX);}}if(AB!==AC.pageY){AI.y=(AB<AC.pageY);}else{if(AD!==AH.pageX){AI.y=(AB<AH.pageY);}}}return AK;}function I(AB,x,AA,z){return{s:AB,p1:x,p2:AA,evt:z,target:z.target};}function L(z,x){if(z){z.gestures[x]=null;}}function b(z,x){U(z);s(z,N,x);}function G(x){if(x._selectHandle){window.clearTimeout(x._selectHandle);delete x._selectHandle;l("cancelSelect","",x);}}function H(AE,AG){var AC=AG.which;if(AC&&AC===3){l("ignore","right mouse click",AE);return ;}var AF=AE.gestures,AD=AG.touches||[AG],x=(AG.changedTouches&&AG.changedTouches[0])||AG,AJ=o(AE),AK=f(AG,x,x),AI=I(AK,AK,AK,AG);l("touchBegin","",AE,x);if(AD.length>1){if(!AJ){AK.stop();l("ignore","cross widget multitouch",AE,x);var AB=J;if(AB&&AB.onCrossWidgetMultitouch!==undefined){l("call onCrossWidgetMultitouch for","",AB);AB.onCrossWidgetMultitouch();}return false;}}else{if(AJ){l("forced deactivation","",AE,x);U(AE);AJ=false;}}if(AE.singleNode&&x.target!==AE._tn){l("ignore","target is not touch node",AE,x);return ;}if(mstrmojo.touchManager.notify(AE.id,AK).ignore){AK.stop();return ;}if(!AJ){var AA=AK.target.tagName;AA=AA&&AA.toLowerCase();if(AA==="select"||AA==="input"){l("ignore","target is input or select",AE,x);if(AE.monitorInputs){s(AE,null,AK,P);}return ;}}AF[AK.id]=AI;if(AJ){if(!AE.multiTouch){G(AE);var z=AD[AD.length-2],AH=AF[Y(z)];s(AE,S,z,AH.action,AH);}else{AI.action=C;if(AE._singleTouch){G(AE);AE._singleTouch.action=C;delete AE._singleTouch.bubbleTarget;delete AE._singleTouch;s(AE,h,AK,C);}}AK.stop();return ;}if(!W.contains(AE._tn,AG.target,true,AE.domNode)){delete AF[AK.id];return ;}AE._singleTouch=AI;if(s(AE,h,AK)===false){return ;}AK.stop();if(a(AE,h,p)){AE._selectHandle=window.setTimeout(function(){AI.action=p;if(s(AE,h,AK,p)===false){b(AE,AK);}delete AE._selectHandle;},F);}V(AE);}function w(AC,AD){var AF=(AD.changedTouches&&AD.changedTouches[0])||AD,z=AC.gestures[Y(AF)];if(!z){return ;}var AA=f(AD,z.s,AF,z.p2),AB=z.action;z.p2=z.p1;z.p1=AA;if(!AB&&(B.abs(AA.delta.x)>j||B.abs(AA.delta.y)>j)){AB=z.action=q;G(AC);if(!a(AC,h,AB)&&!a(AC,e,AB)){AA.methodName=M(h,AB);return AC.bubbleTouchEvent(AA);}if(s(AC,h,AA,AB)===false){b(AC,AA);return ;}}if(AB){var x=z.lastMove||z.s.date,AE=AA.date-x;if(!mstrApp.isTouchApp()||AE>=Z){z.lastMove=AA.date;s(AC,e,AA,AB);}}}function E(AC,AE){var x=(AE.changedTouches&&AE.changedTouches[0])||AE,AF=(AE.touches&&AE.touches.length)||0,AD=AC.gestures,AI=Y(x),AH=AD[AI];if(!AH){l("No gesture",AI,AC,x);return ;}var AB=AH.action,AJ=f(AE,AH.s,x,AH.p2);if(!AB){G(AC);if(!AH.wasMulti){AB=P;}}if(AF===0){U(AC);AC.gestures=[];l("gestures","clear all",AC,x);}else{AD[AI]=null;l("gestures","clear single",AC,x);}L(AH.bubbleTarget,AI);switch(AB){case q:case p:AJ.stop();s(AC,N,AJ,AB,AH);break;case C:if(AF<2){s(AC,N,AJ,AB,AH);if(AF===1){var AA=AE.touches[0],AG=f(AE,AA,AA),z=I(AG,AG,AG,AE);z.wasMulti=true;AD[Y(AA)]=z;AC._singleTouch=z;}}if(AF>0){return ;}break;case P:if(!a(AC,null,AB)){break;}var AK=AC._tapHandler;if(AK){window.clearTimeout(AK.h);}if(AJ.date-AH.s.date<F){if(s(AC,"Before",AJ,AB,AH)===false){break;}if(!AC.multiTap){AJ.count=1;s(AC,null,AJ,AB,AH);}else{if(AK){AK.count++;}else{AK=AC._tapHandler={count:1};}AK.h=window.setTimeout(function(){AJ.count=AK.count;s(AC,null,AJ,AB,AH);delete AC._tapHandler;},D);}}else{delete AC._tapHandler;}break;}s(AC,N,AJ,undefined,AH);}function d(z){var x=z._tn;if(!x){return ;}if(!z._tmCallback){z._tsCallback=function(AA){H(z,AA);};z._tmCallback=function(AA){w(z,AA);};z._teCallback=function(AA){E(z,AA);};}t(x,W.TOUCHSTART,z._tsCallback);}mstrmojo._TouchGestures=mstrmojo.provide("mstrmojo._TouchGestures",{_mixinName:"mstrmojo._TouchGestures",singleNode:false,multiTouch:false,touchNode:null,multiTap:false,monitorInputs:false,postBuildRendering:function O(){if(this._super){this._super();}this._tn=this.touchNode||this.domNode;this.gestures=[];d(this);},bubbleTouchEvent:function g(AE){var AB=AE.methodName,x=AE.id,z=this.gestures[x],AA=this.parent;while(AA){var AD=AA[AB],AC=AA.touchBegin;if(AD&&(!AC||s(AA,h,AE)!==false)){AE.methodName=AB;L(z.bubbleTarget,x);z.bubbleTarget=AA;AA.gestures[x]=z;l("bubble",((this.k)?" "+this.k:"")+"] bubbled "+AB+" to ["+AA.scriptClass+((AA.k)?" "+AA.k:"")+"]",this,AE);return AD.call(AA,AE);}AA=AA.parent;}return false;},unrender:function A(z){if(o(this)){U(this);}var x=this._tn;if(x){W.detachEvent(x,W.TOUCHSTART,this._tsCallback);}this._super(z);},restoreDefaultTouches:function R(x){if(X){X.allowDefaultTouches=x&&k;}}});}());(function(){var I=mstrmojo.array,B=function(L,M){var O=-1;if(L==null||M==null){}else{var N=this.childNodes;O=I.indexOf(N,M);if(O<0){}}return O;},A=function(L){if(L.parentNode){L.parentNode.removeChild(L);}L.parentNode=this;};mstrmojo.mstr.WebNode=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.mstr.WebNode",exprType:0,nodeType:0,dataType:-1,dimType:1,childNodes:null,parentNode:null,getChildCount:function K(){return(this.childNodes&&this.childNodes.length)||0;},insertBefore:function H(L,M){var N=this.childNodes,O=B.call(this,L,M);if(O<0){A.call(this,L);I.insert(N,O,L);}},insertAfter:function F(L,M){var N=this.childNodes,O=B.call(this,L,M);if(O<0){A.call(this,L);I.insert(N,O+1,L);}},replaceChild:function G(L,M){var N=this.childNodes,O=B.call(this,L);if(O<0){A.call(this,L);M.parentNode=null;N[O]=L;}},removeChild:function J(L){L.parentNode=null;I.removeItem(this.childNodes,L);},appendChild:function C(L){if(L){A.call(this,L);if(!this.childNodes){this.childNodes=[];}this.childNodes.push(L);}},buildShortXML:function E(L){L.addChild("nd").addAttribute("et",this.exprType).addAttribute("nt",this.nodeType).addAttribute("dmt",this.dimType).addAttribute("ddt",this.dataType);var N=this.childNodes;if(N&&N.length){var M;for(M=0;M<N.length;M++){N[M].buildShortXML(L);}}this.buildTypeSpecificShortXML(L);L.closeElement();},buildTypeSpecificShortXML:function D(L){}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var B="FolderDataService";mstrmojo.FolderDataService=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.FolderDataService",getData:function A(F,G,E){$MAPF(true,B);try{var C=(F&&F.did)||this.did,D=F.rtf;F=mstrmojo.hash.copy(F,{taskId:"folderBrowse",styleName:"MojoFolderStyle",includeObjectDesc:true,objectType:"8,3,55",useEncoding:true,dereferenceShortcuts:false});if(D){F.did=D.did;F.folderID=D.did;}else{if(F&&!F.systemFolder){F.folderID=C;}}if(E){F.refresh=true;}mstrApp.serverRequest(F,G,{src:B+"::getData",showWait:true,hideWait:true,delay:false});return false;}finally{$MAPF(false,B);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.func","mstrmojo.array");mstrmojo.android.nativedialog.Dialog=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.nativedialog.Dialog",init:function(F){this._super(F);this.config={};},show:function C(){this.populateConfig();mstrMobileApp.showDialog(JSON.stringify(this.config));},populateConfig:function D(){this.config.type=this.type;this.config.mojoId=this.id;this.config.title=this.title||"";if(this.buttons&&this.buttons.length){this.addNegativeButton(this.buttons[0]);this.addPositiveButton(this.buttons[1]);}},addNegativeButton:function A(F){if(!!F){this.config.negativeButtonText=F.text;var G;if(!!F.onclick){G=mstrmojo.func.composite([F.onclick,function(){this.close();}]);}else{G=function(){this.close();};}this.onNegativeButtonClick=G;}},addPositiveButton:function B(F){if(!!F){this.config.positiveButtonText=F.text;this.onPositiveButtonClick=mstrmojo.func.composite([F.onclick,function(){this.close();}]);}},close:function E(){if(this.onClose){this.onClose();}this.destroy();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");function B(J,I){this.raiseEvent({name:"viCompBuilt",type:J,widget:I});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function G(I){this._super(I);this.relativePanels={};this.comps={};},addRelativePanel:function H(I){this.relativePanels[I]=true;},isRelativePanel:function F(I){return !!this.relativePanels[I];},isComponent:function C(J,I){return this.getComponentKey(J)===I;},getComponent:function A(I){return this.comps[I];},getComponentKey:function D(J){var I=this.getComponent(J);return(I&&I.k)||"";},createComponent:function E(L,K,J){B.call(this,L);var I=new K(J);this.comps[L]=I;B.call(this,L,I);return I;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.StepperContentProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.StepperContentProvider",item:null,renderer:null,min:null,max:null,interval:1,minField:"min",maxField:"max",maxLengthField:"maxLength",valField:"value",intField:"interval",canLoop:false,next:mstrmojo.emptyFn,prev:mstrmojo.emptyFn,hasPrev:mstrmojo.emptyFn,hasNext:mstrmojo.emptyFn,renderItemAt:mstrmojo.emptyFn,setVal:mstrmojo.emptyFn,getVal:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var F=mstrmojo.hash,M="pending",D="failed";function L(O){if(mstrApp.isHosted()){O.success({});}else{mstrApp.serverRequest({taskId:"getOfflineTransaction"},O,{noTaskURL:true,skipLogin:true});}}function C(O){var P=true;F.forEach(O,function(Q){if(Q.pending&&Q.pending.length>0){P=false;}});return P;}function I(){var O=this;L({success:function(R){var P=false,Q,U,S;O.emptyTransactionQueue=F.isEmpty(R);F.forEach(O.prjModel,function(W,V){if(!R[V]){Q=O.prjModel[V];if(Q&&Q.list){delete O.prjModel[V];P=true;}}});F.forEach(R,function(W,V){var X=mstrApp.getConfiguration().getProjectByRealPid(V);if(!X){return ;}Q=O.prjModel[V];if(!Q){Q=O.prjModel[V]={pid:X.pid,realPid:V,pn:X.pn,list:W};P=true;}else{if(!F.equals(Q.list,W)){Q.list=W;P=true;}}});if(P){S={};F.forEach(O.prjModel,function(V){if(V){U=F.clone(V.list);F.copy(U,S);F.forEach(U,function(W){W.p=V;});}});O.ntfBoardModel.docsTx=S;O.ntfBoardModel.raiseEvent({name:"recordChanged",data:O.ntfBoardModel.docsTx});}}});}mstrmojo.OfflineTransactionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.OfflineTransactionModel",lastSubmission:false,emptyTransactionQueue:true,ntfBoardModel:null,prjModel:null,init:function N(O){this._super(O);this.prjModel={};this.ntfBoardModel=new mstrmojo.Obj({docsTx:{},getOfflineRecords:function P(Q){return Q?this.docsTx[Q]:this.docsTx;}});I.call(this);},getBoardModel:function A(){return this.ntfBoardModel;},hasOfflineTransactions:function K(){return !this.emptyTransactionQueue;},editTransactionRecord:function G(Q,P,O,V){var U=this.ntfBoardModel,S=U.docsTx[Q].p,R=mstrApp.getContentDimensions();mstrApp.serverRequest({taskId:"editOfflineTransaction",projectId:S.realPid,documentId:Q,isPending:P,timeStamp:O,availableWidth:R.w,availableHeight:R.h},V,{projectId:S.pid,skipLogin:true});},deleteTransactionRecord:function E(Q,V,U,Z){var P=this.ntfBoardModel,R=P.docsTx[Q],O=R.p,W=R[V?M:D],Y,S,X=this;mstrApp.serverRequest({taskId:"deleteOfflineTransaction",projectId:O.realPid,documentId:Q,isPending:V,timeStamp:U},{success:function(){Y=mstrmojo.array.find(W,"timestamp",U);if(Y!==-1){W.splice(Y,1);}if(R.pending.length===0&&R.failed.length===0){delete P.docsTx[Q];if(F.isEmpty(P.docsTx)){X.emptyTransactionQueue=true;}S=X.prjModel[O.realPid];if(S){delete S.list[Q];if(F.isEmpty(S.list)){delete X.prjModel[O.realPid];}}P.raiseEvent({name:"recordChanged",data:P.docsTx});}if(Z.success){Z.success(W);}}},{noTaskURL:true,skipLogin:true});},submitOfflineTransaction:function B(){if(!this.lastSubmission||!this.emptyTransactionQueue){F.forEach(this.prjModel,function(P,O){if(P&&P.list&&!F.isEmpty(P.list)&&!C(P.list)){mstrApp.submitTransactionQueue(O,"submitOfflineTransaction");}});}},onSubmitDone:function H(O){this.lastSubmission=O;this.refresh();},refresh:function J(){I.call(this);}});mstrmojo.OfflineTransactionModel.PENDING=M;mstrmojo.OfflineTransactionModel.FAILED=D;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var K=mstrmojo.hash;var P=0;var F=[];var J={};var L=false;function I(U){var V=U.callback;if(V.submission){V.submission(U.id,this.userInteractionRequired(U),U);}this.submitRequest(U);}function G(){if(F.length&&!L){I.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(f,b,V,W){if(V){this.cancelRequests();}var Y=this.id,Z=this.transport,U=mstrmojo.now()+b.taskId+P++,X=f.canceled||mstrmojo.emptyFn;f.canceled=function(g){X();f.complete(true);return Z.cancelRequest(g);};f=mstrmojo.func.wrapMethods(f,{complete:function(g){mstrmojo.all[Y]&&mstrmojo.all[Y].deleteRequest(g);}});var a=!K.isEmpty(this._requests),d=this.createRequest(U,f,b,W),e=(L||a)&&!W.doNotHold;if(e){F.push(d);}else{I.call(this,d);}return U;},hasRequests:function O(){return !K.isEmpty(this._requests)||L;},createRequest:function Q(W,Y,X,U){var V=this._requests;if(!V){V=this._requests={};}V[W]={id:W,callback:Y,params:X,config:U};return V[W];},submitRequest:function M(U){this.transport.serverRequest(this.id,U.id,U);},cancelRequests:function S(){var U=false;K.forEach(this._requests,function(V){if(V.gotResponse===undefined){U|=V.callback.canceled(V.id);}});this._requests={};F=[];return U;},cancelRequest:function B(Y){var V=false,X=this._requests[Y],W,U=F.length;for(W=0;W<U;W++){if(F[W]===X){break;}}if(W<U){F.splice(W,1);delete this._requests[Y];V|=X.callback.canceled(X.id);}return V;},response:function A(Y,U,W){$MAPF(false,"AndroidServerTransport","transportRequest");var X=this.getRequest(Y);if(X){X.gotResponse=true;var Z=X.callback,V=(U&&!W.mstrerr)?"success":"failure";try{if(Z[V]){Z[V](W,X);}}finally{Z.complete(Y);}}G.call(this);},deleteRequest:function N(V){var U=this._requests;delete U[V];},getRequest:function H(V){var U=this._requests;return U&&U[V];},userInteractionRequired:function C(U){return false;},addLoadingGraph:function D(U){J[U]=true;L=true;},removeLoadingGraph:function R(U){delete J[U];if(K.isEmpty(J)){L=false;G.call(this);}},_serverRequestParallel:function(V,X,Y,U){var W=U||new mstrmojo.SimpleXHR();W.request("POST",V,{success:function(Z){if(Y.success){Y.success(Z);}},failure:function(Z){if(Y.failure){Y.failure({code:Z.getResponseHeader("X-MSTR-TaskErrorCode"),message:Z.getResponseHeader("X-MSTR-TaskFailureMsg")});}},complete:function(){if(Y.complete){Y.complete();}}},X);},serverRequestParallel:function(V,W,U){this._serverRequestParallel(mstrConfig.taskURL,V,W,U);},upload:function(a,Z,Y,V,X,W,U){mstrmojo.xhr.upload("POST",mstrConfig.taskURL,a,Z,Y,V,X,W,U);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var C=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(D,E){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(D,E,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,E,D,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(D,E,H){var F=D.blockCount,G={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:F,includeAncestorInfo:"true",includeObjectDesc:D.includeObjectDesc,encodeObjectInfo:false};if(D.folderLinksContextId){G.folderLinksContextId=D.folderLinksContextId;}if(D.sId){G.sessionState=D.sId;}if(E.fid){G.rootFolderID=E.fid;}else{if(E.fty){G.rootFolderType=E.fty;}}if(D.browsableTypes){G.objectType=D.browsableTypes;}if(E.blockBegin){G.blockBegin=E.blockBegin;}if(E.searchPattern){if(D.enableQuickSearch){G.quickSearch=D.enableQuickSearch;}G.searchPattern=E.searchPattern;if(E.recursive){G.recursive=E.recursive;}}this.serverRequest(G,H);},newFolder:function(G,H,F,D){var E={taskId:"createFolder",taskContentType:"json",folderID:G,name:H,description:F};this.serverRequest(E,D);},loadObjects:function B(H,I,D,G){var E=[],F=[];C.forEach(H,function(J){E.push(J.did);F.push(J.t);});if(H.length>0&&G){this.serverRequest({taskId:"getObjectInfo",objectIDs:E.join(","),objectTypes:F.join(","),includeDetails:true},I,D);}else{I.success();}},loadRecentSaveAsFolders:function A(E){var D={taskId:"getRecentSaveAsFolders"};this.serverRequest(D,E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var M=mstrmojo.DI.DIConstants,H=mstrmojo.array,D=M.dbType,F=M.xdaType,I=M.sourceType,K=M.backendSourceSubtype;mstrmojo.DI.DIDatabaseHelper=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIDatabaseHelper.getImportOptionByDBType=function A(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:case D.PIG:return false;default:return true;}};mstrmojo.DI.DIDatabaseHelper.getSourceTypeByDBType=function E(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:return F.mdx;case D.PIG:return F.ffsql;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType=function(N){switch(N){case D.MS_ACCESS:return 9149;case D.ORACLE:return 8545;case D.SQL_SERVER:return 8552;case D.INFORMIX:return 12995;case D.SYBASE:return 12998;case D.REDBRICK:return 10059;case D.DB2:return 8516;case D.TERADATA:return 8553;case D.SAP:return 13107;case D.NETEZZA:return 8558;case D.EXCEL:return 3958;case D.MSFT_AS:return 13225;case D.ESSBASE:return 13224;case D.MYSQL:return 8556;case D.POSTGRESQL:return 8541;case D.COMPOSITE:return 12991;case D.ASTER:return 10058;case D.VERTICA:return 10062;case D.PARACCEL:return 10056;case D.TM1:return 13223;case D.XQUERY:return 8560;case D.HIVE:return 8561;case D.SALESFORCE:return 9213;case D.SAPHANA:return 12997;case D.GOOGLE_BIGQUERY:return 12450;default:return 4444;}};mstrmojo.DI.DIDatabaseHelper.getOASTFromBEST=function L(N){switch(N){case K.googleBigQuery:case K.googleBigQueryFFSQLModel:case K.googleBigQuerySingleTable:return I.googleBigQuery;case K.dropbox:return I.dropbox;case K.googleAnalytics:return I.googleAnalytics;case K.googleDrive:return I.googleDrive;case K.facebook:return I.facebook;case K.twitter:return I.twitter;case K.salesforce:return I.salesforce;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.isOAuthSourceType=function C(N){var O=[I.googleBigQuery,I.dropbox,I.googleAnalytics,I.googleDrive,I.facebook,I.twitter,I.salesforce];return H.indexOf(O,N)!==-1;};mstrmojo.DI.DIDatabaseHelper.filterDBById=function B(P,N,O){return H.filter(P,function(S){var R=H.indexOf(N,S.id),Q;if(R>-1){Q=O;}else{Q=!O;}return Q;});};mstrmojo.DI.DIDatabaseHelper.filterDBByDispOption=function B(P,N,O){return H.filter(P,function(R){var Q=false;if((R.disp&N)===N){H.forEach(O,function(S){if(R.id===S){Q=true;return false;}});return !Q;}});};mstrmojo.DI.DIDatabaseHelper.getDBIds=function J(O){var N=[];H.forEach(O,function(P){N=N.concat(P.id);});return N;};mstrmojo.DI.DIDatabaseHelper.getUniqueDBTypes=function G(P){var O=[],N;H.forEach(P,function(Q){N=H.indexOf(O,Q.dbType);if(N<0){O.push(Q.dbType);}});return O;};mstrmojo.DI.DIDatabaseHelper.filterDBByAdminConfig=function(O,N){return H.filter(O,function(R){var P=H.indexOf(N,R.id),Q=true;if(P>=0){Q=false;}return Q;});};}());(function(){mstrmojo.requiresDescs(8409);mstrmojo.prompt.WebPrompt=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.prompt.WebPrompt",promptType:0,prs:null,pt:0,pin:0,loc:null,title:"",mn:"",req:false,min:null,max:null,dataSourcesXML:"",getStyle:mstrmojo.emptyFn,getDisplayValue:mstrmojo.emptyFn,validate:function F(K){if(this.isAnswerEmpty(K)&&this.req){throw new Error(mstrmojo.desc(8409,"This prompt (#) requires an answer.").replace("#",this.title));}},prepareAnswer:function E(L){var K=L&&L.success;if(K){K();}},getAnswerXML:function C(){var K=new mstrmojo.XMLBuilder();this.buildShortPa(K);return K.toString();},buildShortAnswerXML:function I(K){return K;},buildShortPa:function G(K){K.addChild("pa");K.addAttribute("pt",this.pt);var L=this.loc;if(L){K.addAttribute("pin",L.pin);K.addAttribute("did",L.did);K.addAttribute("tp",L.t);}this.buildShortAnswerXML(K);K.closeElement();},populateAnswer:function H(K){},setAnswerValue:mstrmojo.emptyFn,isAnswerEmpty:function J(K){return false;},populate:function D(L){this.promptType=L.ptp;this.pt=L.dptp;this.mn=L.mn;this.pin=L.pin;this.title=L.ttl;this.loc=L.loc;this.min=L.min||"";this.max=L.max||"";this.req=L.reqd;this.dataSourcesXML=L.dsrcs;var K=this.prs={};mstrmojo.array.forEach(L.prs,function(M){K[M.n]=M.v;});this.hasAnswer=L.hasAns;},buildAnswerObject:function B(){return{};},supported:function A(){return true;}});mstrmojo.prompt.WebPrompt.TYPES={CONSTANT_PROMPT:1,CONSTANT_GEO_PROMPT:1.5,ELEMENTS_PROMPT:2};mstrmojo.prompt.WebPrompt.STYLES={TEXT:1,LIST:2,STEPPER:3,SWITCH:4,SLIDER:5,CALENDAR:6,TIME:7,GEO:8,BARCODE:9};}());(function(){var B={1:"f",2:"tm",3:"rd",4:"mt",7:"amt",8:"fd",10:"p",11:"fun",12:"at",21:"fm"};function A(C){return B[C]||"resv";}mstrmojo.mstr.WebOI=mstrmojo.declare(mstrmojo.Obj,null,{did:"",t:0,st:0,n:"",desc:"",ab:"",icp:"",xml:"",getXML:function(){return this.xml||this.buildShortXML().toString();},buildShortXML:function(C){C=C||new mstrmojo.XMLBuilder();C.addChild(A(this.t));this.buildShortObjectAttributes(C);this.buildTypeSpecificShortXML(C);C.closeElement();return C;},buildShortObjectAttributes:function(C){C.addAttribute("did",this.did);C.addAttribute("tp",this.t);C.addAttribute("stp",this.st);C.addAttribute("n",this.n);},buildTypeSpecificBody:function(C){},buildShortObjectElt:function(C){C.addChild(A(this.t));this.buildShortObjectAttributes(C);C.closeElement();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._IsRptModel");mstrmojo.GraphModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsRptModel],{scriptClass:"mstrmojo.GraphModel"});}());(function(){mstrmojo.requiresCls("mstrmojo.func");var A=mstrmojo.string;mstrmojo.ResSetLink=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ResSetLink",SAME_PROMPT:1,DO_NOT_ANSWER:2,CLOSE:3,DYNAMIC:4,STATIC:5,CURRENT_UNIT:6,ALL_VALID_UNITS:7,USE_DEFAULT_ANSWER:8,DYNAMIC_OR_SAME_PROMPT:9,toXml:function B(){var M=this,E=function(S,U){return" "+S+'="'+U+'"';},D=function(S,U){return E(S,mstrmojo.string.encodeXMLAttribute(U));},H=new mstrmojo.StringBuffer(),F=function(U,V){var S=mstrmojo.string.multiReplace(V.disp_n,{"&nbsp;":" "});U.append("<e"+D("ei",A.decodeXMLAttribute(V.ei))+D("disp_n",A.decodeXMLAttribute(S))+E("emt",V.emt)+"/>");};var K=this.prms,C=K&&K.length;if(C||M.aopam!=M.DO_NOT_ANSWER){H.append("<hl"+E("mid",M.mid)+E("srct",M.srct)+E("aopam",M.aopam)+">");if(C){H.append("<prms>");for(var G=0;G<C;G++){var R=K[G];H.append("<prm"+E("id",R.id)+E("am",R.am)+E("pt",R.pt));if(R.orid){H.append(E("orid",R.orid)+E("ortp",R.ortp));}H.append(">");switch(R.am){case M.DO_NOT_ANSWER:case M.CLOSE:case M.USE_DEFAULT_ANSWER:case M.SAME_PROMPT:break;case M.STATIC:H.append('<pa ia="1"><es>');var Q=R.pa.es,P=Q&&Q.length||0;for(var L=P-1;L>=0;--L){var J=Q[L];F(H,J);}H.append("</es></pa>");break;case M.DYNAMIC:case M.CURRENT_UNIT:case M.DYNAMIC_OR_SAME_PROMPT:var O=R.pa;if(O){H.append('<pa ia="1">');var N=O.a;if(N){H.append("<a"+E("id",N.id)+D("n",N.n)+">");}if(R.pt===1){H.append(mstrmojo.string.encodeXMLAttribute(O.v));}else{H.append("<es"+E("dispForms",N&&N.dispForms>=0?N.dispForms:"")+">");var Q=O.es;P=Q&&Q.length||0;for(var L=P-1;L>=0;--L){var J=Q[L];F(H,J);}H.append("</es>");if(N){H.append("</a>");}}H.append("</pa>");}break;case M.ALL_VALID_UNITS:var O=R.pa;if(O){H.append('<pa ia="1">');var N=O.a,I=(N&&N.length)||0,G;if(I===0&&R.pt===1){H.append(mstrmojo.string.encodeXMLAttribute(O.v));}else{H.append("<attGroups><attGroup>");for(G=0;G<I;G++){H.append("<a"+E("id",N[G].id)+D("n",N[G].n)+">");if(R.pt===1){H.append(mstrmojo.string.encodeXMLAttribute(O.v));}else{H.append("<es"+E("dispForms",N[G].dispForms>=0?N[G].dispForms:"")+">");F(H,O.es[G]);H.append("</es>");}H.append("</a>");}H.append("</attGroup></attGroups>");}H.append("</pa>");}}H.append("</prm>");}H.append("</prms>");}else{H.append("<prms/>");}H.append("</hl>");}return H.toString();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo._Fetchable","mstrmojo.hash");var E=mstrmojo.hash;function A(){var F=mstrApp.modelFactory;if(F){return F.newDataService("Element");}return mstrApp.viewFactory.newElementDataService();}function D(F){var I,H,G;I=-1;G=0;while(G>=0){I++;G=F.indexOf(":",G);if(G>=0){G++;}}H=-1;G=0;while(G>=0){H++;G=F.indexOf("*:",G);if(G>=0){G++;}}if(I<H+1){alert("Unexpected format for element ID "+F);}return I-H;}mstrmojo.requiresCls("mstrmojo.XMLBuilder","mstrmojo.Obj");mstrmojo.mstr.WebElements=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._Fetchable],{scriptClass:"mstrmojo.mstr.WebElements",source:null,items:null,duplicate:function(){return new mstrmojo.mstr.WebElements({source:E.copy(this.source),browseConfig:E.copy(this.browseConfig)});},browseConfig:null,init:function(F){var G=F&&F.browseConfig;if(G){this.blockBegin=G.blockBegin||1;this.blockCount=G.blockCount||15;}if(this._super){this._super(F);}},getBrowseConfig:function(G){var F=this.browseConfig;return{attributeID:(this.source&&this.source.did)||0,blockBegin:G||1,blockCount:this.blockCount||-1,filterXML:(F.filter&&F.filter.getXML())||"",shortFilterXML:F.shortFilterXML||"",searchPattern:F.searchPattern||"",matchCase:!!F.matchCase,dataSourcesXML:F.dataSources||"",targetAttributeID:(F.searchTarget&&F.searchTarget.did)||"",searchForms:F.searchForms||""};},_retrieveItems:function(H,G){var F=this;A().getElements(this.getBrowseConfig(H),{success:function(I){if(G&&G.success){G.success({items:F.convertElems(I.items),totalSize:I.totalSize});}},failure:function(I){if(G&&G.failure){G.failure(I);}}});},convertElems:function C(G){var F=[],H;G=G||[];for(H=0;H<G.length;H++){var I=G[H];F[H]={vi:H,v:I.dssid,n:I.n,t:I.emt};}return F;},buildShortXML:function B(F){F.addChild("mi");F.addChild("es");if(this.source!=null){this.source.buildShortObjectElt(F);}var I=[].concat(this.items);I.sort(function(N,M){var L=N.n,K=M.n,J;if(L===K){J=0;}else{if(L<K){J=-1;}else{J=1;}}return J;});var H;for(H=0;H<I.length;H++){var G=I[H];F.addChild("e");F.addAttribute("ei",G.v);F.addAttribute("emt",G.t);F.addAttribute("art",D(G.v));F.addAttribute("disp_n",G.n);F.closeElement();}F.closeElement();F.closeElement();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.maps.AndroidMapModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.maps.AndroidMapModel",getVisProps:function(){return this.data.vp;},setPrompts:function E(M){},getDataService:function G(){},execute:function H(M,N){},answerPrompts:function F(M){},getPageByTree:function J(M){},sort:function D(M,N){},pivot:function K(M,N){},drillGrid:function L(M,N){},drill2Grid:function C(M,N){},linkToObject:function A(M,N){},pageBy:function I(M,N){},saveRWProps:function B(N,P,O,M,Q){}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj");var D={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};var C={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:D,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,useDarkTheme:false,init:function H(I){this.clear();this._super(I);},setAlignment:function E(I,J){this.alignment={host:I,popup:J};},addPopupHandlers:function F(I,K,J){this.popupHandlers[I]={open:K,close:J};},clear:function B(){this.popupHandlers={};var I=this.ENUM_CORNERS;this.alignment={host:I.BOTTOM_LEFT,popup:I.TOP_LEFT};},destroy:function(I){this.anchorElement=null;this.hostElement=null;if(this._super){this._super(I);}}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=D;mstrmojo.ui.PopupConfig.directionCfg={menuDirection:C.LEFT_TO_RIGHT,isRightToLeft:function G(){return this.menuDirection===C.RIGHT_TO_LEFT;},setDirection:function A(I){this.menuDirection=I?C.RIGHT_TO_LEFT:C.LEFT_TO_RIGHT;}};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var A="SubscriptionsDataService";mstrmojo.SubscriptionsDataService=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.SubscriptionsDataService",getSubscriptions:function B(D,C){$MAPF(true,A);try{mstrApp.serverRequest({taskId:"getSubscriptions"},D,{src:A+"::getSubscriptions",override:true,showWait:!C,hideWait:!C,delay:false,skipLogin:true,noTaskURL:true});return false;}finally{$MAPF(false,A);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.ui._HasUITheme","mstrmojo.vi.ui.theme","mstrmojo.dom");function h(j,l){if(!mstrmojo.DocInfoWindow){return ;}var k=j;while(k){if(k instanceof mstrmojo.DocInfoWindow){k[l?"registerScrollLock":"releaseScrollLock"](this);break;}k=k.parent;}}var N=mstrmojo.array,D=mstrmojo.dom,S=mstrmojo.hash,f=mstrmojo.css,G="px",K=mstrmojo.ui._HasUITheme.EnumThemeNames;var C=false;function M(j,l){if(!mstrmojo.DocInfoWindow){return ;}var k=j;while(k){if(k instanceof mstrmojo.DocInfoWindow){k[l?"registerLock":"releaseLock"](this);this.lockIW=l?k:null;break;}k=k.parent;}}var W=mstrmojo.ui.PopupConfig,O=W.directionCfg,B=W.ENUM_CORNERS,Z=B.TOP_LEFT,V=B.TOP_RIGHT,I=B.BOTTOM_RIGHT,H=B.BOTTOM_LEFT;function J(j){return(j===H||j===Z);}function e(j){return(j===V||j===I);}function Q(j){return(j===I||j===H);}function U(j){return(j===V||j===Z);}function a(u,l,AE,AK){var AN=AE.x,AM=AE.y,AJ=AE.w||0,z=AE.h||0,k=AK.w,AF=AK.h,AI=u.alignment,s=AI.popup,p=AI.host,AL=e(p),AO=Q(p),AH=false,AC=false,o=false,AD=false,q=false,AA=false,AG=D.isMobile,w=mstrmojo.ui.PopupConfig.directionCfg;if(J(s)){var t=AN+k+(AL?AJ:0);AH=l.w<t;q=AG&&(AH||w.isRightToLeft());}if(U(s)){var AB=AM+AF+(AO?z:0);AC=l.h<AB;AA=AG&&AC;}if(e(s)||q){var x=AN-k+((AL&&!q)?AJ:0);o=x<0;}if(Q(s)||AA){var j=AM-AF+((AO&&!AA)?z:0);AD=j<0;}return{top:AD,bottom:AC,left:o,right:AH};}function F(k){var j=this.popupConfig;if(j){S.forEach(j.popupHandlers,function(o,p){var l=o[k?"open":"close"];if(l){l.call(mstrmojo.all[p]||l,!!k);}});}}function L(k){var j=this.popupConfig;if(j&&!j.isHostedWithin){var l=this.hostProxy;if(l){l.style.display=k?"":"none";}}}function g(j){return j!==undefined&&j!==null&&!isNaN(j);}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,open:function P(l,j){F.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(j,l);}else{S.forEach(j,function(q,p){this.set(p,q);},this);}var k="popup-mid-render";this.set("opener",l);if(!this.hasRendered){var o=this.visible;this.visible=false;this.render();f.addClass(this.domNode,k);this.set("visible",o);}if(this.nudge){this.domNode.style.top="-10000px";}L.call(this,true);this.set("visible",true);if(this.lockIWForScroll){h.call(this,this.opener,true);}if(j&&j.lockIW){M.call(this,j.lockIW,true);}if(this.nudge){this.nudge();}if(this.adjustSize){this.adjustSize();}this.adjustCornersForPopupOverflow();this.onOpen();f.removeClass(this.domNode,k);},adjustCornersForPopupOverflow:function b(){var x=this.popupConfig;if(!x){return false;}var Ac=(x.includeScroll!==undefined)?x.includeScroll:true;var q=x.anchorElement||x.hostElement,o=x.position||D.position(q,Ac),AI=q&&q.style&&q.style.zIndex;if(!x.isHostedWithin){var Ak=this.hostProxy,Ab=this.hostProxy=document.createElement("div");document.body.appendChild(Ab);Ab.appendChild(this.domNode);if(Ak){Ak.parentNode.removeChild(Ak);}var AS=Ab.style,AT={x:"left",y:"top",w:"width"};Ab.className=x.hostProxyCssClass;AS.position="absolute";AS.background="none";f.addClass(Ab,"mstrmojo-popup-widget-hosted");AS.height="0";N.forEach(["x","y","w"],function(At){var As=o[At];if(g(As)){AS[AT[At]]=As+G;}});}var AH=x.ENUM_CORNERS,Aq=AH.BOTTOM_LEFT,AU=AH.BOTTOM_RIGHT,k=AH.TOP_RIGHT,AN=AH.TOP_LEFT;var u=D.position(document.body),AW=D.position(this.domNode),Af=a(x,u,o,AW),t=Af.right,AG=Af.bottom,Ar=Af.left,Aa=Af.top,AJ=x.alignment,AR=AJ.popup,l=AJ.host,AB=AR,AF=l,AV=D.isMobile,AE=q&&q.classList&&q.classList.contains("mstrmojo-ui-Menu-item"),AX=this.id,AC=q&&q.parentNode,AY=AC&&AC.parentElement,AQ=q||this.domNode,AO,Al=this.domNode.style;if(AY&&AY.classList.contains("mstrmojo-ui-Menu")){AQ=AY;}AO=D.position(AQ);if(AE&&((Ar&&t)||(Aa&&AG))){if(AY){Al.top=AO.y+"px";Al.left=AO.x+"px";var Aj=document.getElementsByClassName("mstrmojo-ui-Menu");N.forEach(Aj,function(As){if(AX!==As.id){As.style.visibility="hidden";}});}x.anchorElement=AQ;x.position={h:0,w:0,x:(AO.x+AW.w)>u.w?Math.min(AO.x,5):AO.x,y:(AO.y+AW.h)>u.h?Math.min(AO.y,90):AO.y};this.adjustCornersForPopupOverflow();return ;}if(O.isRightToLeft()&&(!AV||AW.w>0)){if(!AV||!Ar){t=true;}else{if(!AV||!t){O.setDirection(false);this.resetDirection=true;if(AV){AF=(AF===k)?AN:Aq;}}}}else{if(t){O.setDirection(true);this.resetDirection=true;}}if(t||Ar){if(J(AF)){AF=U(AF)?k:AU;}else{if(e(AF)){AF=U(AF)?AN:Aq;}}if(t&&J(AB)){AB=U(AB)?k:AU;}else{if(Ar&&e(AB)){AB=U(AB)?AN:Aq;}}}if(AG||Aa){if(J(AF)){AF=U(AF)?Aq:AN;}else{if(e(AF)){AF=U(AF)?AU:k;}}if(AG&&U(AB)){AB=J(AB)?Aq:AU;}else{if(Aa&&Q(AB)){AB=J(AB)?AN:k;}}}if(Aa||t||AG||Ar){if(C){console.log("Overflow directions: "+JSON.stringify(Af));}this._orgalgn={host:l,popup:AR};x.setAlignment(AF,AB);}if(!x.isHostedWithin){if(g(o.y)&&g(o.h)){this.hostProxy.style.top=(o.y+(Q(AB)?(x.alignWithAnchor===true?o.h:0):(x.alignWithAnchor===true?0:o.h)))+G;this.hostProxy.style.zIndex=(g(AI)&&(AI>100))?AI+1:101;}}var AZ,An={};if(x.isHostedWithin&&!!this.opener){AZ=f.getComputedStyle(this.opener.domNode);}N.forEach(["left","right","top","bottom"],function(As){An[As]=AZ?parseInt(AZ["border-"+As+"-width"]||0,10):0;});var Ah=Q(AF),Ai=e(AF),AA=Q(AB),s=e(AB),Ad=function(At,As){return"calc(100% + "+(As?An[At]:0)+"px)";},AD=function(At,As){return(As?-An[At]:0)+"px";};var w,Ae,j,p;w=Ae=j=p="auto";if(AA){j=Ah?AD("top"):Ad("top");}else{w=Ah?Ad("bottom"):AD("bottom");}if(s){Ae=Ai?AD("left"):Ad("left");}else{p=Ai?Ad("right"):AD("right");}Al.top=w;Al.right=Ae;Al.bottom=j;Al.left=p;var z=D.position(this.domNode),AP=5;if(AG||Aa){var Ao=z.y,AK=D.getMaxScrollHeight()+"px",Am=this.scrollNode,AL=Am&&Am.style.maxHeight;if(Ao<0||(Ao+z.h>u.h)){if(Am&&AK!==AL){Am.style.maxHeight=AK;this.updateScrollbars();}var Ag=(-o.y+AP)+G;if(!x.isHostedWithin){if(this.hostProxy){this.hostProxy.style.top=0;}Ag=AP+G;}Al.top=Ag;Al.bottom="auto";}}if(Ar||t){var Ap=z.x;if(Ap<0||(Ap+z.w>u.w)){var AM=(-o.x+AP)+G;if(!x.isHostedWithin){if(this.hostProxy){this.hostProxy.style.left=0;}AM=AP+G;}Al.left=AM;Al.right="auto";}}return true;},close:function R(k){if(this.keepOpen){return ;}if(this.onClose){this.onClose(k);}L.call(this,false);if(this.lockIWForScroll){h.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){M.call(this,this.lockIW,false);}F.call(this,false);var j=this._orgalgn;if(j){this.popupConfig.setAlignment(j.host,j.popup);}if(this.resetDirection){this.resetDirection=false;O.setDirection(false);}},preBuildRendering:function A(k){this._super(k);var p=this.popupConfig;if(p&&!p.isHostedWithin){var j=p.hostProxyCssClass.split(" "),o=false;N.forEach(S.keyarray(K),function(q){if(j.indexOf(K[q])>=0){o=true;return false;}});if(!(o||p.noInheritTheme)){var l=mstrmojo.vi.ui.theme.getThemeClass.call(this);if(l){j.push(l);}}p.hostProxyCssClass=j.join(" ");}},buildRendering:function E(){var j=this._super();if(j){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return j;},postBuildRendering:function Y(){var j=this,k=this.popupConfig;if(k&&!this._ListenerProc){this._ListenerProc=function(){j.monitorWindow();};D.attachEvent(window,"resize",this._ListenerProc);}this._super();},monitorWindow:function(){var k=D.getMaxScrollHeight();if(this.updateScrollbars&&this.scrollNode){this.scrollNode.style.maxHeight=(this.scrollNodeMaxHeight||k)+"px";this.updateScrollbars();}if(this.visible){var j=this,l=null;window.clearTimeout(l);l=window.setTimeout(function(){j.scrollNode.style.maxHeight=(j.scrollNodeMaxHeight||k)+G;j.adjustCornersForPopupOverflow();},175);}},destroy:function d(j){if(this._ListenerProc){D.detachEvent(window,"resize",this._ListenerProc);delete this._ListenerProc;}this._super(j);},unrender:function X(j){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){document.body.removeChild(this.hostProxy);delete this.hostProxy;}this._super(j);}};}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.WebOI","mstrmojo.mstr.WebElements");mstrmojo.mstr.WebAttribute=mstrmojo.declare(mstrmojo.mstr.WebOI,null,{scriptClass:"mstrmojo.mstr.WebAttribute",t:12,elemTotalSize:0,browseConfig:null,init:function(A){var B=this.browseConfig={};if(A){if(A.bb){B.blockBegin=A.bb;delete A.bb;}if(A.bc){B.blockCount=A.bc;delete A.bc;}if(A.sz){this.totalSize=A.sz;delete A.sz;}}this.browseConfig={};this._super(A);},getElements:function(A){A=mstrmojo.hash.copy((this.browseConfig||{}),(A||{}));return new mstrmojo.mstr.WebElements({source:this,totalSize:this.totalSize||0,browseConfig:A});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.StringBuffer","mstrmojo.ResSetLink");var l=1,U=2;var E=2,L=4,D=5;var X=1,O=4;var j=mstrmojo.array;function H(o,p){return o[((p===l)?"row":"col")];}function B(o,q){var p=q.lm;return p&&p[o.mix||0];}function e(p,w,AE){var AC=new mstrmojo.ResSetLink({mid:this.getMessageId(),srct:w.target.t||2,aopam:w.daMode});var x=w.ans,AD=x&&x.length;if(AD){var AA=AC.prms=[],q=0;for(q=0;q<AD;q++){var AH=x[q];var s=AH.pid,u=parseInt(AH.m,10),AG={id:s,am:u,pt:AH.pt};AA.push(AG);if(AH.po){AG.orid=AH.po.did;AG.ortp=AH.po.t;}switch(u){case AC.DO_NOT_ANSWER:case AC.CLOSE:case AC.USE_DEFAULT_ANSWER:case AC.SAME_PROMPT:break;case AC.STATIC:var o=AH.es,AF=(o&&o.length)||0,AB;AG.pa={es:[]};for(AB=AF-1;AB>=0;--AB){var t=o[AB];AG.pa.es.push({ei:t.id,disp_n:t.n,emt:1});}break;case AC.DYNAMIC:case AC.ALL_VALID_UNITS:case AC.CURRENT_UNIT:case AC.DYNAMIC_OR_SAME_PROMPT:if(AE.els){A.call(this,AH,AE,AG,u,AC);}else{K.call(this,AH,AE,AG,u,AC);}break;}}}return AC;}function A(x,p,o,w,u){var t=x.dunits,q=p.els,s=o.pa={};j.forEach(q,function(z){if(j.find(t,"id",z.id)>=0){if(w!==u.DYNAMIC&&w!==u.DYNAMIC_OR_SAME_PROMPT){s.a={id:z.id,n:z.disp_n,dispForms:z.dfi};}if(x.pt===1){s.v=z.v;}else{s.es=[];s.es.push({ei:z.ei,emt:z.emt,disp_n:z.disp_n});}}});}function K(AF,AC,AE,t,w){var x=AF.dunits,AA=AF.dsUnits;if(x&&x.length&&AC){var z=AE.pa={};var s=AC,q=(AC.mix!==undefined)&&(AC._lp||AC._tp);if(q){s=AC._lp||AC._tp;}var p=parseInt(s.axis,10);while(s){var AD=this.getPTitle(s,p);if(AD&&j.find(x,"id",AD.id)>=0){var u={id:AD.id,n:AD.n,dispForms:AD.dfi};if(t===w.ALL_VALID_UNITS){z.a=(z.a||[]).concat(u);}else{if(t!==w.DYNAMIC&&t!==w.DYNAMIC_OR_SAME_PROMPT){z.a=u;}}if(AF.pt===1){var o=AF.formMap;z.v=o&&o[s.fmi]?o[s.fmi]:s.v;break;}else{var AB={ei:s._e.id,emt:1,disp_n:s._e.n};if(t===w.ALL_VALID_UNITS){z.es=(z.es||[]).concat(AB);}else{z.es=[].concat(AB);}}if(t===w.CURRENT_UNIT){break;}}s=this.getPCellParentNode(s,p);if(q&&!s&&p===l){p=U;s=AC._tp;}}}else{if(AA&&AA.length&&AC){AE.pa={es:AA};}}}function R(q){var p=this.getCellTitleInfo(q[0]),t=[],w=function(x){if(x){if(mstrApp.useBinaryFormat){if(x._e){t.push(x.axis+"A"+(x.ui+1)+"A"+x._e.id);}w(x._p);}else{t.push(x.axis+"A"+(x.ui+1)+"A"+x.o);}}},s,o;if(!p.isSrcTitle){for(s=0,o=q.length;s<o;s++){var u=q[s];if(u.mix!==undefined&&(u._lp||u._tp)){w(u._lp);w(u._tp);}else{w(u);}}}return(mstrApp.useBinaryFormat)?t:t.join(",");}function J(t,s,p){var q=true,o=p.length;while(t<o){if(p[t].id!==s.id){q=false;break;}t++;}return q;}mstrmojo.XtabModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.XtabModel",getMessageId:function S(){return this.data.mid;},getCellTitleInfo:function f(p,t){var q=t?t.gts:this.data.gts;var s=null;if(q){if(p&&p.mix===undefined){s=H(q,p.axis)[p.tui||p.ui];}else{var o=function(x){var u=(x&&x.length)||0,w;for(w=u-1;w>=0;--w){if(parseInt(x[w].otp,10)===-1){return x[w];}}return null;};s=o(q.col)||o(q.row);}}return{isSrcTitle:!!p&&(p.o===undefined)&&!((p.mix!==undefined)&&(p._lp||p._tp)),title:s};},getCellInfo:function I(p){var o=this.getCellTitleInfo(p),q={isTitle:false,isHeader:false,isMetric:false};if(p&&(p.hasOwnProperty("mix")||p.otp===-1)){q.isMetric=true;if(p._e){q.isHeader=true;}}if(o.isSrcTitle){q.isTitle=true;}return q;},getCellLinksInfo:function h(p,q){if(!q){var o=this.getCellTitleInfo(p);q=o&&o.title;}return B(p,q);},getAllDrillPathsForCell:function b(p,s){if(!s){var o=this.getCellTitleInfo(p);s=o&&o.title;}var q=j.filter(s.dp,function(u){var t=u&&u.oid;if(t&&p._e&&p._e.oid){return t===p._e.oid;}return true;});return q;},getCellDrillsInfo:function G(o,q){var p=this.getAllDrillPathsForCell(o,q);return p&&p[o.mix||0];},getLinkDrillAction:function P(o){return this.getActionObject(o);},getAction:function W(o){return this.getActionObject(o);},getActionObject:function M(p){var o=p[0]&&p[0].at,q=null;if(o){if((o&O)>0){q={h:"onLink",a:this.getLinkAction(p[0])};}else{if((o&X)>0){q={h:"onDrill",a:this.getDrillAction(p)};}}}return q;},getSortAction:function F(AF,z){var t=this.getCellTitleInfo(AF),AC=t.title,p=[],s=t.isSrcTitle?AC.axis:(j.find(this.data.gts.col,"otp",-1)>-1?l:U),AE=this.data.gts[((s===l)?"row":"col")+"SubPos"],w,AB,AA,AD,AG;z=(z===null||z===undefined)?!(AF&&AF.so):z;if(t.isSrcTitle){w=E;AB=AC.id;AA=AC.otp;AD=AC.fid;}else{w=L;AA=4;AG=AC.stt;var x,o;do{x=AF._e;if(x){if(x.oid){AB=x.oid;}else{o=x.id.replace(/;/g,"\\;");p.push(o);}}AF=AF._p;}while(AF);}var u={sortType:w,axis:s,isAsc:z,unitID:AB,unitType:AA,elementList:p.join(";"),subTotalsPos:AE};if(AB){u.unitID=AB;}if(AD){u.formId=AD;}if(AG){u.sortType=D;u.stt=AG;}var q;if((w===L)||(w===D)){q=["","",u.elementList||"",u.axis];}else{q=[u.formId,"21","",u.axis];}q=[u.unitType,u.unitID].concat(q);u.sortKey=q.join("!");return u;},getSubTotalsPos:function Z(){var o=this.data.gts;if(o){return[o.rowSubPos,o.colSubPos];}return[0,0];},getPivotAction:function N(p,z){var s=false,q=p.hasOwnProperty("mix"),AA=q?null:p.axis,w=(q?p.idx:p.ui)+1,AF=(p.otp===-1);if(!isNaN(z)){AA=parseInt(z,10);w=1;if(q){q=false;AF=true;}}else{var AD=(z==="u"||z==="l"||z==="b");if(!q){var t=H(this.data.gts,AA),AH=0,AK={},o=false;mstrmojo.array.forEach(t,function(AL){if(AK[AL.id]){AK[AL.id].frm++;}else{AH++;AK[AL.id]={pos:AH,frm:1};if(AL.id===p.id){o=true;}else{if(o){return false;}}}});w=AK[p.id].pos;var AE=p.fix;if(AE){if((!AD||AE>1)&&!this.xtab.isOutlineMode){if(AD||AE!==AK[p.id].frm){w=AE;s=true;}}}}else{var AI=H(this.data.gts,p.axis),AC=AI[p.ui].es,x=this.data.gsi.mx;if(AC.length!==x.length){var AB=AC[w+(AD?-1:1)-1];if(AB){var u=j.find(x,"did",AB.oid);if(u!==-1){w=u+(AD?1:-1)+1;}}}}if(z==="b"){w=1;}else{w=w+(AD?-1:1);}}var AG={act:"pivot",unitPos:w};if(s){AG.attFormId=p.fid;}else{if(!q){AG.axis=AA;}}if(!AF){var AJ=q?p._e:p;if(!s){AG.unitType=AJ.otp;}AG.unitId=q?AJ.oid:p.id;}return AG;},isPvtButtonVisible:function g(x,q){var t=x.axis,s=H(this.data.gts,t),w=x.ui,p=x.hasOwnProperty("mix");if(q==="b"&&w===0){return false;}if(!isNaN(q)){if(parseInt(q,10)===t){return false;}if(p){return !!s[x.ui]._hid;}return true;}var u=s[x.ui].es,o=p?u.length:s.length;if(o===1){return false;}if(t===(p?U:l)){if(q==="u"||q==="d"){return false;}}else{if(q==="l"||q==="r"){return false;}}if(p?x._e===u[0]:w===0){if(q==="l"||q==="u"){return false;}}if(p?x._e===u[o-1]:(this.xtab.isOutlineMode&&x.fix)?J(w+1,x,s):w===o-1){if(q==="r"||q==="d"){return false;}}return true;},getDrillAction:function C(o,q){var p=q||this.getCellDrillsInfo(o[0]);return{srcMsgId:this.data.mid,sliceId:this.xtab.sid,isWithin:p.within,drillPathKey:p.k,drillPathIndex:p.dpi,drillElements:R.call(this,o)};},isVis:function d(){if(this.xtab){return this.xtab.isVis&&this.xtab.isVis();}else{var o=this.controller&&this.controller.view;if(o&&o.isVis){return o.isVis();}}return false;},getPTitle:function k(q,p){var o;if(this.isVis()){o=q.titleInfo;}else{o=H(this.data.gts,p)[q.tui];}return o;},getPCellParentNode:function Q(q,p){var o;if(this.isVis()){o=(p===l)?q._lp:q._tp;}else{o=q._p;}return o;},getLinkAction:function V(q,p){var o,s;if(this.isVis()){q=q.node;s=q.titleInfo;}else{o=this.getCellTitleInfo(q);s=o.title;}return this.getLinkActionImpl(q,s,p);},getLinkActionImpl:function a(AD,z,AB){var q=B(AD,z),AA=q&&q.links,AE=(q&&q.onw)?"_blank":"";if(AB===null||AB===undefined){AB=(q&&q.di)||0;}var u=AA&&AA[AB];if(!u){return null;}var s={linkInfo:u,linkTarget:AE};var o=u.url;if(o){var t="&CurrentElement";if(AD&&z&&o.indexOf(t)>-1){o=o.replace(t,AD._e.id);}s.url=o;}else{var w=u.target,AC,p;switch(parseInt(w&&w.t,10)){case 55:if(parseInt(w.st,10)===14081){if(w.dvm&(8192|2048)&&!((w.dvm&2048&&mstrApp.features["run-vi-flash"]))){AC=3140;if(mstrmojo.dom.isIE6||mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){mstrmojo.alert(mstrmojo.desc(15474,"To work with HTML5 dossiers, please turn off your browser Compatibility View or update your browser to one of the following browser versions: Chrome, Firefox, Safari, Internet Explorer 9 or above."));return null;}p="objectID";}else{AC=2048001;p="documentID";}}else{AC=32001;p="documentID";}break;case 3:AC=4001;p="reportID";s.reportViewMode=((parseInt(w.st,10)===769)?2:1);break;default:return null;}s.evt=AC;s[p]=w.did;s.srcMsgId=this.getMessageId();var x=e.call(this,q,u,AD);if(x){s.link=x;}return s;}},getDownloadAction:function Y(s,p,u,q,t,o,w){return{xtabId:t,rowPosition:s,maxRows:p,colPosition:u,maxColumns:q,rowMode:w,memo:o};}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.WebOI");mstrmojo.mstr.WebAttributeForm=mstrmojo.declare(mstrmojo.mstr.WebOI,null,{scriptClass:"mstrmojo.mstr.WebAttributeForm",t:21});})();(function(){mstrmojo.requiresCls("mstrmojo.mstr.WebOI");mstrmojo.mstr.WebFilter=mstrmojo.declare(mstrmojo.mstr.WebOI,null,{scriptClass:"mstrmojo.mstr.WebFilter",t:1,expression:null,buildTypeSpecificShortXML:function A(B){if(this.expression){this.expression.buildShortXML(B);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompt","mstrmojo.locales","mstrmojo.num","mstrmojo.date","mstrmojo.mstr.EnumDataType");mstrmojo.requiresDescs(8398,8399,8400,8401,8402,8403,8404,8405,8406);var Y=mstrmojo.prompt.WebPrompt.STYLES,b=function(){return mstrmojo.locales.datetime;},L=mstrmojo.mstr.EnumDataType,Z=mstrmojo.num,R=mstrmojo.date,X=Math;function B(e){var g=parseFloat(this.min,10),d=parseFloat(this.max,10),f=!isNaN(g),h=!isNaN(d);if(f&&e<g){return -1;}else{if(h&&e>d){return 1;}else{return 0;}}}var a={};a[L.DataTypeBool]=function(d){if("0"!==d||"1"!==d){throw new Error(mstrmojo.desc(8398,"Invalid answer: #. Boolean values required.").replace("#",d));}};a[L.DataTypeBigDecimal]=a[L.DataTypeLong]=a[L.DataTypeDouble]=a[L.DataTypeDecimal]=a[L.DataTypeReal]=a[L.DataTypeInteger]=a[L.DataTypeFloat]=a[L.DataTypeNumeric]=function(d){if(!isNaN(d)){var e=parseFloat(d,10);switch(B.call(this,e)){case -1:throw new Error(mstrmojo.desc(8399,"Invalid answer: #. Answer is smaller than the minimum limit: ##.").replace("##",this.min).replace("#",Z.toLocaleString(d)));case 1:throw new Error(mstrmojo.desc(8400,"Invalid answer: #. Answer is bigger than the maximum limit: ##.").replace("##",this.max).replace("#",Z.toLocaleString(d)));}}else{if(d){throw new Error(mstrmojo.desc(8401,"Not a number"));}}};a[L.DataTypeChar]=function(d){if(d){switch(B.call(this,(d&&d.length)||0)){case -1:throw new Error(mstrmojo.desc(8402,"Invalid answer: #. The length of the answer is smaller than the minimum limit: ##.").replace("##",this.min).replace("#",d));case 1:throw new Error(mstrmojo.desc(8403,"Invalid answer: #. The length of the answer is bigger than the maximum limit: ##.").replace("##",this.max).replace("#",d));}}};a[L.DataTypeDate]=function(d){switch(mstrmojo.date.inDateTimeRange(d,this.min,this.max)){case -1:throw new Error(mstrmojo.desc(8404,"Invalid answer: #. The date/time is earlier than the earliest limit: ##.").replace("##",this.min).replace("#",d));case 1:throw new Error(mstrmojo.desc(8405,"Invalid answer: #. The date/time is later than the latest limit: ##.").replace("##",this.max).replace("#",d));}};function J(e){e=String(e);var d=e.indexOf(".");return(d==-1)?0:e.length-d-1;}function Q(l){var g=this.prs.Interval||1;if(!l){g=-g;}var k=parseFloat(this.getDisplayValue(true,true),10),j=parseFloat(g,10),f=X.pow(10,X.max(J(k),J(j)));var e=parseInt((X.round(k*f)+X.round(j*f)),10)/f,d={v:e,s:true};try{this.validate(e);}catch(h){d.s=false;}return d;}function O(e){var d=Q.call(this,e);if(d.s){this.answer=String(d.v);}}mstrmojo.prompt.WebConstantPrompt=mstrmojo.declare(mstrmojo.prompt.WebPrompt,null,{scriptClass:"mstrmojo.prompt.WebConstantPrompt",answer:"",preAnswer:"",defAnswer:"",dataType:8,isNumericDataType:function D(){switch(this.dataType){case L.DataTypeInteger:case L.DataTypeUnsigned:case L.DataTypeNumeric:case L.DataTypeDecimal:case L.DataTypeReal:case L.DataTypeDouble:case L.DataTypeFloat:case L.DataTypeShort:case L.DataTypeLong:case L.DataTypeBigDecimal:return true;default:return false;}},getStyle:function G(){var d=this._style;if(!this._style){var e=this.prs;switch(e.DisplayStyle){case"Stepper":d=Y.STEPPER;break;case"Switch":d=Y.SWITCH;break;case"Slider":d=Y.SLIDER;break;case"Text box":if(this.dataType===14){d=Y[(e.ShowTime==="-1")?"TIME":"CALENDAR"];break;}d=Y.TEXT;break;case"Barcode":d=Y.BARCODE;break;}if(!d){throw new Error(mstrmojo.desc(8406,"WebConstantPrompt::getStyle - Unknown prompt style."));}this._style=d;}return d;},getDisplayValue:function K(p,f){var k=this.answer||this.defAnswer,h=(k===undefined||k===null),d=this.getStyle();switch(d){case Y.STEPPER:if(p&&(h||(this.dataType===6&&isNaN(parseFloat(k,10))))){var g=parseFloat(this.min,10),o=parseFloat(this.max,10);if(isNaN(g)||isNaN(o)){k=0;}else{if(0>g&&o>0){k=0;}else{k=(Math.abs(g-0)>Math.abs(o-0))?o:g;}}if(f){this.setAnswerValue(String(k));}}break;case Y.SWITCH:var l=this.prs,j=l.OnValue,e=l.OffValue;if(p&&(k!==j&&k!==e)){k=e;if(f){this.answer=e;}}k=(k===j);break;case Y.SLIDER:if(p&&(h||k==="")){k=this.min;if(f){this.setAnswerValue(String(k));}}break;}return(d==Y.SWITCH)?k:this.isNumericDataType()?mstrmojo.num.toLocaleString(String(k)):k;},validate:function U(d){d=(d===undefined||d===null)?this.answer:d;this._super(d);this._validateFn(d);},isAnswerEmpty:function F(d){d=(d===undefined||d===null)?this.answer:d;return(d===undefined||d===null||d==="");},populate:function M(h){this.answer=h&&h.ans&&h.ans.text;this.dataType=h&&h.datatp;this._validateFn=a[this.dataType];this._super(h);var g=this.prs;if(g.DisplayStyle==="Wheel"){g.DisplayStyle="Stepper";}switch(g.DisplayStyle){case"Switch":if(g.OnValue===undefined||g.OnValue===null){g.OnValue="1";}if(g.OffValue===undefined||g.OffValue===null){g.OffValue="0";}break;case"Slider":case"Stepper":this.interval=parseFloat(this.prs.Interval)||1;this.min=Z.parseNumeric(this.min);this.max=Z.parseNumeric(this.max);if(!this.min){this.min=0;}if(this.answer===undefined||this.answer===null||this.answer<this.min){this.answer=this.min;}if(this.answer>this.max){this.answer=this.max;}break;case"Text box":if(this.dataType===14&&g.ShowTime==="-1"){this.interval=parseFloat(this.prs.Interval)||1;var j=R.parseDateAndOrTime((this.answer||""));var f=R.parseDateAndOrTime((this.min||""));var d=R.parseDateAndOrTime((this.max||""));defaultTimeInfo={match:"12:00:00 AM",hour:0,min:0,sec:0};var e=R.formatTimeInfo(defaultTimeInfo,b().TIMEOUTPUTFORMAT);if(j&&!j.time){this.answer=this.answer+" "+e;}if(f&&!f.time){this.min=this.min+" "+e;}if(d&&!d.time){this.max=this.max+" "+e;}}break;}},populateAnswer:function P(d){if(d&&d.text){this.answer=d.text;}},buildAnswerObject:function S(){var d=this._super();d.ans={text:this.answer};return d;},setAnswerValue:function C(d){if(this.isNumericDataType()){d=mstrmojo.num.toString(d,false);}this.validate(d);this.answer=d;},getAnswerXML:function W(){return this.answer;},buildShortAnswerXML:function I(d){d.addText(this.isNumericDataType()?mstrmojo.num.toLocaleString(this.answer||""):(this.answer||""));},stepUp:function H(){if(this.getStyle()===Y.STEPPER){O.call(this,true);}},canStepUp:function V(){return(this.getStyle()===Y.STEPPER&&Q.call(this,true).s);},stepDown:function E(){if(this.getStyle()===Y.STEPPER){O.call(this,false);}},canStepDown:function N(){return(this.getStyle()===Y.STEPPER&&Q.call(this,false).s);},toggleSwitch:function A(){if(this.getStyle()===Y.SWITCH){var e=this.prs,d=(this.getDisplayValue(true,false))?e.OffValue:e.OnValue;this.set("answer",d);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompt");mstrmojo.prompt.WebUnsupportedPrompt=mstrmojo.declare(mstrmojo.prompt.WebPrompt,null,{scriptClass:"mstrmojo.prompt.WebUnsupportedPrompt",answerXml:"",populate:function C(F){this._super(F);if(F.ans&&F.ans.xml){this.answerXml=F.ans.xml;}},getAnswerXML:function E(){return this.answerXml;},buildShortPa:function D(F){F.addRawXML(this.answerXml);},buildAnswerObject:function B(){var F=this._super();if(this.answerXml){F.ans={xml:this.answerXml};}return F;},supported:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompt","mstrmojo.array");var E=mstrmojo.array;mstrmojo.prompt.WebGeoConstantPrompt=mstrmojo.declare(mstrmojo.prompt.WebPrompt,null,{scriptClass:"mstrmojo.prompt.WebGeoConstantPrompt",promptType:1.5,geos:null,getStyle:function F(){return mstrmojo.prompt.WebPrompt.STYLES.GEO;},getDisplayValue:function D(){var L=this._isErr;if(L){return"Error while updating location: "+L;}var K=this,J="";E.forEach(this.geos,function(M){var N=M.answer;if(N===""){J="&lt;Update Current Location&gt;";return false;}else{var O=M.prs.GeographicCoordinate;if(typeof (O)=="undefined"||O!="1"){K.la=N;}else{K.lo=N;}}});if(K.displayLoc){J=K.displayLoc;}else{K.mn="Searching...";if(typeof (K.la)=="undefined"){K.la="";}if(typeof (K.lo)=="undefined"){K.lo="";}if(!(K.la==""&&K.lo=="")){J="("+K.la+","+K.lo+")";}}return J;},getDisplayLocation:function(L){var K=this,M=this.la,J=this.lo;if(M!=""&&J!=""){mstrmojo.GeoLocation.findAddress({lat:M,lng:J},{success:function(N){K.mn="";K.displayLoc=N[0].formatted_address;L.updateItem(K._renderIdx);},failure:function(O,N){K.mn="";}});}},validate:function G(K,J){return true;},buildShortPa:function H(J){E.forEach(this.geos,function(K){K.buildShortPa(J);});},add:function I(K){var J=this.geos=this.geos||[];J.push(K);},setAnswerValue:function C(L,K){try{delete this.displayLoc;this.validate(L,K);this.setLocation(L,K);}catch(J){this.setError(J);return false;}return true;},setError:function B(J){this._isErr=J;},setLocation:function A(K,J){E.forEach(this.geos,function(L){switch((L.prs&&L.prs.GeographicCoordinate)||"0"){case"0":L.set("answer",String(K));break;case"1":L.set("answer",String(J));break;}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.locales","mstrmojo.date","mstrmojo.DI.DIConstants","mstrmojo.DI.DIDatabaseHelper");mstrmojo.requiresDescs(2052,2170,2265,3434,3544,4530,4699,8002,8984,9614,9919,9920,9921,9922,12491,12492,12493,12494,12495,12509,12771,13031,13131,13132,13980,13981,8536);var U=mstrmojo.DI.DIConstants,O=U.dataTypeMenuItems,L=U.rdcsFlag,D=mstrmojo.dom,J=mstrmojo.array;mstrmojo.DI.DIHelpers=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIHelpers.isIE7=function N(){return mstrmojo.dom.isIE7;};mstrmojo.DI.DIHelpers.isIE=function(){return D.isIE||!!D.userAgent.match(/Trident\/7\.0/);};mstrmojo.DI.DIHelpers.isIEOrEdge=function(){return mstrmojo.dom.isEdge||this.isIE();};mstrmojo.DI.DIHelpers.getURLCaption=function(){var V="";if(mstrApp.diParams&&mstrApp.diParams.EnableURLImport){if(mstrApp.diParams.EnableFileImport){if(mstrApp.isSingleTier){if(window.FormWrapper!==window.client){V+="File://";}}else{V+="File://";}}if(mstrApp.diParams.EnableHttpImport){if(V!==""){V+=", ";}V+="Http://, Https://";}if(mstrApp.diParams.EnableFTPImport){if(V!==""){V+=", ";}V+="Ftp://";}}return V;};mstrmojo.DI.DIHelpers.getUrlTooltip=function C(){var V="";if(!mstrApp.diParams){return V;}if(!mstrApp.diParams.EnableURLImport){V=mstrmojo.desc(12491,"URL file uploads are currently disabled. Please contact your administrator.");}else{V=mstrmojo.desc(12492,"Use one of the following URL formats to upload your file:")+" ";V+=mstrmojo.DI.DIHelpers.getURLCaption();if(mstrApp.enableFileImport){V+="\r\r";V+=mstrmojo.desc(12493,"'File://' format allows you to upload files in your local machine. For example: File://ComputerName/path/FileName.");}if(mstrApp.enableHttpImport||mstrApp.enableHttpsImport){V+="\r\r";if(mstrApp.enableFileImport){V+=mstrmojo.desc(12494,"Some other examples are:");}else{V+=mstrmojo.desc(12495,"Some examples are:");}}if(mstrApp.enableHttpImport){V+="\r";V+="http://host/path/FileName";V+="\r";V+="https://user:password@host/path/FileName";}if(mstrApp.enableFtpImport){V+="\r";V+="ftp://user:password@host/path/FileName";V+="\r";V+="ftp://user:password@host:port/path/FileName";}}return V;};mstrmojo.DI.DIHelpers.createMSTRObjects=function(X,Z){var V,Y,W;if(X.constructor===Array){V=X;for(W=0;W<V.length;W++){V[W]=mstrmojo.DI.DIHelpers.createMSTRObjects(X[W],Z);}}else{if(typeof X==="object"){V=new mstrmojo.Obj(X);for(Y in X){if(!Z||Z.indexOf(Y)===-1){if(X.hasOwnProperty(Y)){V.set(Y,mstrmojo.DI.DIHelpers.createMSTRObjects(X[Y],Z));}}}}else{V=X;}}return V;};mstrmojo.DI.DIHelpers.getURLParameters=function(V){var W;var Z;var Y=[];if(V){if(V.indexOf("?")>0){V=V.substr(V.indexOf("?")+1);}Z=V.split("&");for(W=0;W<Z.length;W++){var X=Z[W].split("=");if(X.length===2){Y[X[0]]=X[1];}}}return Y;};mstrmojo.DI.DIHelpers.getBackendSourceType=function(V){var W=U.backendSourceSubtype.localFile;switch(V){case U.sourceSubtype.dropbox:W=U.backendSourceSubtype.dropbox;break;case U.sourceSubtype.bisource:W=U.backendSourceSubtype.bISources;break;case U.sourceSubtype.clipboard:W=U.backendSourceSubtype.clipboard;break;case U.sourceSubtype.facebook:W=U.backendSourceSubtype.facebook;break;case U.sourceSubtype.googleAnalytics:W=U.backendSourceSubtype.googleAnalytics;break;case U.sourceSubtype.googleBigQuery:W=U.backendSourceSubtype.googleBigQuery;break;case U.sourceSubtype.googleBigQueryFFSQL:W=U.backendSourceSubtype.googleBigQueryFFSQLModel;break;case U.sourceSubtype.googleBigQuerySingleTable:W=U.backendSourceSubtype.googleBigQuerySingleTable;break;case U.sourceSubtype.googleDrive:W=U.backendSourceSubtype.googleDrive;break;case U.sourceSubtype.hadoop:W=U.backendSourceSubtype.hadoopFileBrowser;break;case U.sourceSubtype.localFile:W=U.backendSourceSubtype.localFile;break;case U.sourceSubtype.mdx:W=U.backendSourceSubtype.OLAPSources;break;case U.sourceSubtype.salesforce:W=U.backendSourceSubtype.salesforce;break;case U.sourceSubtype.samplefile:W=U.backendSourceSubtype.samplefile;break;case U.sourceSubtype.searchOnSource:W=U.backendSourceSubtype.searchAsASource;break;case U.sourceSubtype.twitter:W=U.backendSourceSubtype.twitter;break;case U.sourceSubtype.url:W=U.backendSourceSubtype.url;break;case U.sourceSubtype.publicData:W=U.backendSourceSubtype.publicData;break;case U.sourceSubtype.cloudElement:W=U.backendSourceSubtype.cloudElement;break;}return W;};mstrmojo.DI.DIHelpers.getStateParameters=function(W){var V;var Z;var X=[];if(W.indexOf(":")>=0){Z=W.split(":");}else{Z=W.split("%3A");}for(V=0;V<Z.length;V++){var Y=Z[V];if(Y.substr(2,1)==="_"){X[Y.substr(0,2)]=Y.substr(3);}}return X;};mstrmojo.DI.DIHelpers.getExtensionType=function(X){var W=X.toLowerCase(),V;if(W===".xls"||W===".xlsx"||W===".xlsm"){V=U.xdaType.excel;}else{if(W===".txt"||W===".csv"||W===".tsv"||W===".prn"){V=U.xdaType.text;}else{V=0;}}return V;};mstrmojo.DI.DIHelpers.setTablesrc=function(V,X,W){if(X){if(!V.tablesSrc[X]){V.tablesSrc[X]=[];}V.tablesSrc[X].push(W);}};function S(V){var X={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2},a={1:U.columnDataTypes.integer,2:U.columnDataTypes.integer,6:U.columnDataTypes.dtdouble,7:U.columnDataTypes.dtfloat,21:U.columnDataTypes.integer,22:U.columnDataTypes.nlong,30:U.columnDataTypes.bigDecimal,34:U.columnDataTypes.int64},W=X[V],Z=a[V],Y="";switch(W.toString()){case U.dataTypeMenuItems.NUMBER:switch(Z){case U.columnDataTypes.integer:Y=mstrmojo.desc(9614,"Integer");break;case U.columnDataTypes.nlong:Y=mstrmojo.desc(13131,"Long");break;case U.columnDataTypes.int64:Y=mstrmojo.desc(13132,"Big Integer");break;case U.columnDataTypes.dtfloat:Y=mstrmojo.desc(8002,"Float");break;case U.columnDataTypes.dtdouble:Y=mstrmojo.desc(2265,"Double");break;case U.columnDataTypes.bigDecimal:Y=mstrmojo.desc(9920,"Big Decimal");break;default:Y=mstrmojo.desc(3434,"Number");break;}break;case U.dataTypeMenuItems.DATE:Y=mstrmojo.desc(2052,"Date");break;case U.dataTypeMenuItems.DATE_TIME:Y=mstrmojo.desc(9919,"DateTime");break;case U.dataTypeMenuItems.TIME:Y=mstrmojo.desc(2170,"Time");break;case U.dataTypeMenuItems.TEXT:Y=mstrmojo.desc(3544,"Text");break;case U.dataTypeMenuItems.HTML_TAG:Y=mstrmojo.desc(9921,"HTML Tag");break;case U.dataTypeMenuItems.PHONE_NUMBER:Y=mstrmojo.desc(8984,"Phone Number");break;case U.dataTypeMenuItems.SYMBOL:Y=mstrmojo.desc(4530,"Symbol");break;case U.dataTypeMenuItems.URL:Y=mstrmojo.desc(9922,"URL");break;case U.dataTypeMenuItems.EMAIL:Y=mstrmojo.desc(4699,"Email");break;}return Y;}mstrmojo.DI.DIHelpers.getDataTypeString=S;mstrmojo.DI.DIHelpers.parseAlternateSourceValidationResults=function M(e){var b=[],Z,a,d,f,V,X,Y,W;J.forEach(e,function(g){Z=a=d=f="";X=(g.vt===3)?1:0;switch(g.vt){case 0:case 1:case 2:case 3:Z=g.n;a=S(g.ddt);V=g.src;d=V.n;f=S(V.ddt);break;case 4:Z=g.n;a=S(g.ddt);break;case 8:V=g.src;d=V.n;f=S(V.ddt);break;}Y=a?Z+"("+a+")":Z;W=f?d+"("+f+")":d;b.push([Y,X,W]);});return b;};mstrmojo.DI.DIHelpers.getURLFileName=function(W){var V=W.lastIndexOf("/");return V>=0&&V+1!==W.length?W.substr(V+1):W;};mstrmojo.DI.DIHelpers.isOperationMode=function(V){return V!==undefined&&V!==null;};mstrmojo.DI.DIHelpers.isCtrlKey=function(V,X){var W=X||(V||window).event;return W.ctrlKey||W.metaKey;};mstrmojo.DI.DIHelpers.isRefreshable=function(W){var V,X=0;for(V in W.importSources){var Y=W.importSources[V];if(Y.type===U.sourceType.file&&(Y.subtype===U.sourceSubtype.url||Y.subtype===U.sourceSubtype.publicData)){if(!Y.sourceInfo||Y.sourceInfo.url.indexOf("http://mirror.microstrategy.com/datahub/samples")!==0){X++;}}}if(W.getAllTableID().length===X&&!mstrApp.diParams.EnableHttpImport&&!mstrApp.diParams.EnableFTPImport&&!mstrApp.diParams.EnableFileImport&&!mstrApp.diParams.EnableURLImport){return false;}return true;};mstrmojo.DI.DIHelpers.strStartsWith=function(W,V){return W.indexOf(V)===0;};mstrmojo.DI.DIHelpers.adjustDataIdx=function(Y,X){var V=[],W;if(!Y||Y.length===0){return ;}J.forEach(Y,function(Z){W=Z.subColumns;if(W&&W.length>1){V=V.concat(W);}else{V.push(Z);}});V.sort(function(d,Z){return d[X]-Z[X];});};mstrmojo.DI.DIHelpers.setDataIdx=function(X,W,V){if(!W||W.length===0){return ;}if(W[0].hasOwnProperty("clix")){J.forEach(X,function(Z){var Y=Z.ix;Z[V]=J.find(W,"clix",Y);if(Z.isMultiForm){J.forEach(Z.subColumns,function(a){a[V]=J.find(W,"clix",a.ix);});}});}if(W[0].hasOwnProperty("did")){J.forEach(X,function(a){var Z=a.did;var Y=J.find(W,"did",Z);if(Y!==-1){a[V]=Y;}if(a.isMultiForm){J.forEach(a.subColumns,function(b){Y=J.find(W,"did",b.did);if(Y!==-1){b[V]=Y;}});}});}};mstrmojo.DI.DIHelpers.encodeData=function(V){var W="";if(V!==undefined){if(typeof V==="number"){W=V;}else{W=mstrmojo.string.encodeHtmlString(V,false,true);}}return W;};var E={0:"Bytes",1:"KB",2:"MB",3:"GB",4:"TB",5:"PB"};function P(V){return E[V]||"unknown";}mstrmojo.DI.DIHelpers.getRoundSize=function I(W){var V;for(V=0;(W/1024)>1;V++){W=W/1024;}W=W.toPrecision(3);return W+P(V);};mstrmojo.DI.DIHelpers.findNewElements=function(X,Y){var W=[],V;if(X&&X.length){J.forEach(Y,function(Z){V=J.indexOf(X,Z);if(V===-1){W.push(Z);}});}else{if(Y&&Y.length){W=[].concat(Y);}}return W;};mstrmojo.DI.DIHelpers.generateCubeName=function(W){var V,X,Y=50;V=W.join(" ");if(V.length>Y){V=V.slice(0,Y)+"...";}X=W.length;if(X>1){V+=" ("+X+" tables)";}return V;};mstrmojo.DI.DIHelpers.parseValidateSourceResults=function(W){var V={isValidate:true,hasError:false,tbids:[],tableValidate:[],missingColumnTbids:[],mismatchedDatatypeTbids:[],missingTableTbids:[],errorTableTbids:[],missingColumns:{},mismatchedDatatypeColumns:{},missingTablesColumns:{},errorTableErrCode:{},errorTableErrMsg:{}},X=W&&W.vts;J.forEach(X,function(g){var Y=g.tbid,h=g.vt,a=g.emsg,e=g.cols||[],Z=true,f=false,d,j=[],b=[];if(h===1){Z=true;}else{switch(h){case U.backendError.switchingFileType:case U.backendError.noExternalSession:case U.backendError.databaseCredentialsNotAvailable:case U.backendError.CECredentialNotAvailable:case U.backendError.AuthenticationError:case U.backendError.shouldBeIgnored:f=true;break;}J.forEach(e,function(k){var l=k.vt;switch(l){case 1:b.push(k);break;case 4:j.push(k);break;}});}if(f){V.errorTableTbids.push(Y);V.errorTableErrCode[Y]=h;V.errorTableErrMsg[Y]=a;V.isValidate=false;V.hasError=true;}d=j.length>0&&j.length===e.length;if(j.length>0||b.length>0){Z=false;}else{Z=true;}if(Z===false){V.isValidate=false;}V.tbids.push(Y);V.tableValidate.push(Z);if(j.length>0){if(d){V.missingTableTbids.push(Y);V.missingTablesColumns[Y]=j;}else{V.missingColumnTbids.push(Y);V.missingColumns[Y]=j;}}if(b.length>0){V.mismatchedDatatypeTbids.push(Y);V.mismatchedDatatypeColumns[Y]=b;}});return V;};mstrmojo.DI.DIHelpers.truncate=function(X,Z,V){if(X&&X.length>Z){var b=3,W=Z-b,a=Math.ceil(W/2),Y=Math.floor(W/2);if(V){return X.substr(0,W)+"...";}else{return X.substr(0,a)+"..."+X.substr(X.length-Y);}}else{return X;}};mstrmojo.DI.DIHelpers.getAbsoluteFileName=function(V){var W,X=V.lastIndexOf("\\");if(X===-1){X=V.lastIndexOf("/");}W=V.substring(X+1,V.length);return W;};mstrmojo.DI.DIHelpers.reevaluatePopupPosition=function(V){if(V){var W=V.style,Z=W.display,Y=W.left,X=W.top;W.display="block";if(parseInt(Y.substring(0,Y.length-2))<0){W.left="0px";}if(parseInt(X.substring(0,X.length-2))<0){W.top="0px";}W.display=Z;}};mstrmojo.DI.DIHelpers.expandNode=function(W){var V=W.visible;W.set("visible",!V);return !V;};mstrmojo.DI.DIHelpers.normalizeTimestamp=function(X){var W=X.replace(/-/g,"/");var V=W.indexOf(".");if(V>0){W=W.substring(0,V);}return W;};mstrmojo.DI.DIHelpers.getBackendErrorStr=function(W,V){var X="";switch(W){case U.backendError.switchingFileType:X=mstrmojo.desc(12509,"Switching the file type is not allowed during republishing or editing the cube.");break;case U.backendError.noExternalSession:case U.backendError.databaseCredentialsNotAvailable:case U.backendError.CECredentialNotAvailable:case U.backendError.AuthenticationError:X=mstrmojo.desc(14392,"We do not have the credentials needed to get the data for this table. Please provide the credentials to proceed publishing this table.");break;}return X;};mstrmojo.DI.DIHelpers.getCommonElements=function(Y,a,Z){var W=[],X,V;for(X=0;Y&&X<Y.length;X++){for(V=0;a&&V<a.length;V++){if(Z(Y[X],a[V])){W.push(Y[X]);break;}}}return W;};mstrmojo.DI.DIHelpers.formatDateAndTime=function(e,Y){var d=mstrmojo.date;var W=mstrmojo.locales;var X,f,b,a,V,Z;X=d.parseDateAndOrTime(e);f=X.date;b=X.time;if(Y){Z=new Date(Date.UTC(f.year,f.month-1,f.day,b.hour,b.min,b.sec));X=d.getDateJson(Z);f=X;b=X;}a=d.formatDateInfo(f,W.datetime.DATEDISPLAYFORMAT);V=d.formatTimeInfo(b,W.datetime.TIMEDISPLAYFORMAT);return a+" "+V;};mstrmojo.DI.DIHelpers.isServerBasedWS=function(){return !!mstrApp.isWorkstation&&!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isLocalWS=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isDIinVI=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier&&!!mstrApp.isPopup;};mstrmojo.DI.DIHelpers.extractFileNameFromHadoopURL=function(W){if(!W){return"";}var V,X;V=W.lastIndexOf("/")+1;X=W.substring(V);return X;};mstrmojo.DI.DIHelpers.extractFileExtensionFromHadoopURL=function(W){if(!W){return"";}var V,X;V=W.lastIndexOf("/")+1;X=W.substring(V);return X.substring(X.lastIndexOf(".")+1);};mstrmojo.DI.DIHelpers.isWS=function(){return !!mstrApp.isWorkstation;};mstrmojo.DI.DIHelpers.getEnvObj=function(){var Y=(navigator.platform.indexOf("Win")!==-1?"Win":"Mac"),V=!!mstrApp.isWorkstation?"WS":"Web",W=[];W.push(V,Y);return{ENV:W.join("-"),isWSClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return !window.FormWrapper.isDesktop();},isDesktopClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return window.FormWrapper.isDesktop();},isWeb:function(){return V==="Web";},isWS:function(){return V==="WS";},isWin:function(){return Y==="Win";},isMac:function(){return Y==="Mac";},isDataSet:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp"||mstrApp.placeholder==="QBApp";},isDIinVI:function(){return !!mstrApp.isFromVI;},isInDI:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp";},isInQB:function(){return mstrApp.placeholder==="QBApp";},isAppSchema:function(){return !!window.mstrAppSchema;},isWebWin:function(){return this.isWeb()&&this.isWin();},isWebMac:function(){return this.isWeb()&&this.isMac();},isWebDataSet:function(){return this.isWeb()&&this.isDataSet();},isWebDossier:function(){return this.isWeb()&&this.isDIinVI();},isWSWin:function(){return this.isWS()&&this.isWin();},isWSMac:function(){return this.isWS()&&this.isMac();},isWSDataSet:function(){return this.isWS()&&this.isDataSet();},isServerBasedWS:mstrmojo.DI.DIHelpers.isServerBasedWS,isWSDossier:function(){return this.isWS()&&this.isDIinVI();},isWSLiveMode:function X(){return this.isWS()&&parseInt(window.FormWrapper.isWSLiveMode(),10)===1;},isWSDossierLocalMode:function(){return this.isWSDossier()&&!this.isWSLiveMode();},isWebWinDataSet:function(){return this.isWeb()&&this.isWin()&&this.isDataSet();},isWebMacDataSet:function(){return this.isWeb()&&this.isMac()&&this.isDataSet();},isWebWinDossier:function(){return this.isWeb()&&this.isWin()&&this.isDIinVI();},isWebMacDossier:function(){return this.isWeb()&&this.isMac()&&this.isDIinVI();},isWSWinDataSet:function(){return this.isWS()&&this.isWin()&&this.isDataSet();},isWSMacDataSet:function(){return this.isWS()&&this.isMac()&&this.isDataSet();},isWSWinDossier:function(){return this.isWS()&&this.isWin()&&this.isDIinVI();},isWSMacDossier:function(){return this.isWS()&&this.isMac()&&this.isDIinVI();},isStandaloneDataSet:function(){return !this.isDIinVI()&&this.isDataSet();}};};mstrmojo.DI.DIHelpers.isOnetier=function(){return !!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.getHierarchyMappingXML=function(a,b){var X="";var W=0,Y=1,Z=12;if(b&&b[L.ID]){X+="<mpcs>";X+="<mpc ";X+='did="'+b[L.ID].did+'" drvflg="'+W+(b[L.ID].n?('" n="'+b[L.ID].n+'" ot="'):"")+Z+'" recurisve="'+Y+'" ';if(!!a&&a!==""){X+='oid="'+a+'" ';}X+=">";if(b[L.JOIN_ID]){X+="<rdcs>";}for(var V=L.JOIN_ID;V<=L.DISTANCE;V++){if(b[V]!==undefined){X+='<rdc did="'+b[V].did+'" fg="'+V+'"/>';}}if(b[L.JOIN_ID]){X+="</rdcs>";}X+="</mpc>";X+="</mpcs>";}return X;};mstrmojo.DI.DIHelpers.getOperationMode=function(){return mstrApp.getRootController().getModel().operationMode;};mstrmojo.DI.DIHelpers.standardizeDBRolesFormat=function Q(e){var X=["att","dbRole","tableMap"],f,h,a,V,Y,W,b,Z,g,j,d=(function(){var k="list",o="number",l="text";function p(q,x,w,u,t,s){if(q&&w){if(s){q.push({field:x,fieldV:w,IDS:u,options:s,tp:t});}else{q.push({field:x,fieldV:w,IDS:u,tp:t});}}}return{authenticationmethod:function(q,s){p(q,"auth",s,7776,k,[{IDS:13980,n:mstrmojo.desc(13980),v:"1"},{IDS:13981,n:mstrmojo.desc(13981),v:"4"}]);},databasename:function(q,s){p(q,"db",s,8519,l);},hostname:function(q,s){p(q,"host",s,8533,l);},port:function(q,s){p(q,"port",s,8534,o);},server:function(q,s){p(q,"svr",s,8536,l);}};}());e=Object.keys(e).map(function(k){return mstrmojo.DI.DIHelpers.createMSTRObjects(e[k],X);});J.forEach(e,function(k){J.forEach(k.tables,function(l){l.dbRole=(l.dbRole&&l.dbRole.oi)||l.dbRole;l.dbmsObj=l.dbmsObj&&l.dbmsObj.oi;h=l.dbRole;if(h){h.dbmsObj=l.dbmsObj;a=h.dbmsObj;if(!h.dbms){h.dbms=h.def&&h.def.dbms&&h.def.dbms.did;}}if(!a||a.DBInfo){return ;}a.DBInfo={};f=a.DBInfo;V=h.efd;if(!V){return ;}V.forEach(function(o){Y=o.oi&&o.oi.def;if(!Y){return ;}j=Y.dbtp;if(j){h.db_type=j;f.dbTypes={dbt:{v:j,n:mstrmojo.desc(mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType(j))}};}W=Y.cnsr;if(!W){return ;}g=[];Z=null;h.connstr=W;W.split(";").forEach(function(p){b=p.split("=");b[0]=b[0].toLowerCase().trim();if(b[0]==="driver"){f.driverInstalled=true;}else{if(b[0]==="authenticationmethod"){Z=b;}else{if(d[b[0]]){d[b[0]](g,b[1]);}}}});if(Z){d[Z[0]](g,Z[1]);}});});});return e;};mstrmojo.DI.DIHelpers.filterDisableSources=function A(V){return J.indexOf(mstrApp.diParams.disabledSources,V)<0;};mstrmojo.DI.DIHelpers.getPopupWindowOptions=function R(){var Z={};var X=window.screenX||window.screenLeft||0,W=window.screenY||window.screenTop||0,Y=800,V=600,a;if(document.body&&document.body.offsetWidth){Y=document.body.offsetWidth;V=document.body.offsetHeight;}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){Y=document.documentElement.offsetWidth;V=document.documentElement.offsetHeight;}if(window.innerWidth&&window.innerHeight){Y=window.innerWidth;V=window.innerHeight;}if(window.outerWidth){Y=window.outerWidth;}if(window.outerHeight){V=window.outerHeight;}Z.height=V*0.5;Z.width=Y*0.8;if(Z.height<600||isNaN(Z.height)){Z.height=600;}if(Z.width<800||isNaN(Z.width)){Z.width=800;}Z.left=X+(Y-Z.width)/2;Z.top=W+(V-Z.height)/8;if(this.getEnvObj().isWSWin()&&this.getEnvObj().isDIinVI()){Z.left=(window.screen.width-Z.width)/2;Z.top=(window.screen.height-Z.height)/2;}a="width="+Z.width+",height="+Z.height;a+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";a+=",left="+Z.left+",top="+Z.top;return a;};mstrmojo.DI.DIHelpers.createPopupWindow=function G(W,V){var X,Y;Y=this.getPopupWindowOptions();if(!W){W="";}X=window.open(W,V,Y);return{wnd:X};};mstrmojo.DI.DIHelpers.openPopupWindow=function H(Y,W,V){var X;if(Y&&!Y.closed){Y.location=V;Y.focus();}else{X=this.createPopupWindow(V);Y=X.wnd;if(Y){Y.focus();}}return Y;};mstrmojo.DI.DIHelpers.sendResponse2Window=function B(W,V,Z){var Y;if(Z){Y=Z;}else{Y=window.opener;}if(Y){if(V===undefined){V=window.location.origin;if(!V){V=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");}}try{if(this.isIE()&&Y.postMessagePassthrough){Y.postMessagePassthrough(W,V);try{window.open("","_self","");window.close();}catch(a){window.close();}}else{Y.postMessage(W,V);}}catch(X){console.log("postMessage error: "+X);}}};mstrmojo.DI.DIHelpers.convertDataSourceType2SourceType=function F(V){switch(V){case U.dataSourceType.DROPBOX:return U.sourceType.dropbox;case U.dataSourceType.GOOGLE_DRIVE:return U.sourceType.googleDrive;case U.dataSourceType.GOOGLE_ANALYTICS:return U.sourceType.googleAnalytics;case U.dataSourceType.SALESFORCE:return U.sourceType.salesforce;case U.dataSourceType.GOOGLE_BIGQUERY:return U.sourceType.googleBigQuery;default:return -1;}};mstrmojo.DI.DIHelpers.highlightKeyWords=function K(e,f,V){var X="\\*.?+$^[](){}|/",g=e,b,Y;if(e===""){return f;}for(Y in X){if(X.hasOwnProperty(Y)){b=X[Y];g=g.replace(new RegExp("\\"+b,"g"),"\\"+b);}}var d=new RegExp("("+g+")","ig");var W="\u001E",a=mstrmojo.string.encodeHtmlString,Z;if(d.test(f)){f=f.replace(d,function(h){return W+h+W;});Z=J.map((f||"").split(W),function(j,h){return(h%2===0)?a(j):('<span class="'+V+'">'+a(j)+"</span>");});return Z.join("");}};mstrmojo.DI.DIHelpers.detectCustomImg=function(Y,X){if(!Y||!(X.nodeType&&X.nodeType===window.Node.ELEMENT_NODE)){return ;}var V=Y.replace?Y.replace(/\s+/g,""):"";var Z=document.getElementsByTagName("head")[0];var W=document.createElement("img");W.src="../javascript/mojo/css/images/DI/connectors/"+V+".png";W.onload=function(){X.style.background="url(../javascript/mojo/css/images/DI/connectors/"+V+".png) no-repeat";Z.removeChild(W);};W.onerror=function(){X.style.background="url(../javascript/mojo/css/images/DI/connectors/default.png) no-repeat";Z.removeChild(W);};Z.appendChild(W);};mstrmojo.DI.DIHelpers.spliceUrlBySeparator=function(W){var V=W.split("#");return V.slice(V.length/2+1).join("#");};mstrmojo.DI.DIHelpers.isOriginalConnector=function(W){var V=U.originalConnector;if(V.elastic===W||V.tapClicks===W){return true;}return false;};mstrmojo.DI.DIHelpers.acceptEventFromAncestor=function(V){if(!V){return true;}if(!this.domNode||typeof V.contains!=="function"||!this.hasRendered){return false;}return V.contains(this.domNode);};mstrmojo.DI.DIHelpers.isdbRoleWritable=function(V){if(mstrmojo.DI.DIHelpers.isOnetier()){return true;}else{return V.writable==="1"&&mstrApp.rootController.hasPrivilege(U.DssXmlPrivileges.DssXmlPrivilegesUseDatabaseInstanceManager);}};mstrmojo.DI.DIHelpers.isdbRoleUsable=function(V){return mstrmojo.DI.DIHelpers.isOnetier()?true:V.usable==="1";};mstrmojo.DI.DIHelpers.applyDriverSuffix=function(X){if(!X||!X.Preferences){return ;}var V=JSON.stringify(X),W=X.Preferences.driverNameSuffix,Z=this.getEnvObj();var Y="Platform";if(Z.isDesktopClient()){Y=Z.isMac()?"DesktopMac":"DesktopWin";}else{if(Z.isWSClient()){Y=Z.isMac()?"WorkstationMac":"WorkstationWin";}}var a=W[J.find(W,"n",Y)];return JSON.parse(V.replace(/!#DRIVERSUFFIX#!/g,a?a.value:""));};mstrmojo.DI.DIHelpers.isGeo=function(V){return V.georole&&V.georole>0;};mstrmojo.DI.DIHelpers.isTime=function(V){return V.dtp===parseInt(O.DATE,10)||V.dtp===parseInt(O.DATE_TIME,10)||V.dtp===parseInt(O.TIME,10);};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.array","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.mstr.EnumFunction");var p=mstrmojo.array,h=mstrmojo.mstr.EnumFunction;var N={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},Q={"8107C326DD9911D3B98100C04F2233EA":"Rank"},AC={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},AD={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},u={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},X={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"},H={"8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31CDD9911D3B98100C04F2233EA":"Count",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C32DDD9911D3B98100C04F2233EA":"Median","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode","8107C32CDD9911D3B98100C04F2233EA":"Product","8107C32FDD9911D3B98100C04F2233EA":"Stdev","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31BDD9911D3B98100C04F2233EA":"Sum","8107C330DD9911D3B98100C04F2233EA":"Var",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",A202C23DDD9D11D3B98100C04F2233EA:"Fvschedule",A202C23CDD9D11D3B98100C04F2233EA:"IRR",A202C240DD9D11D3B98100C04F2233EA:"MIRR",A202C23EDD9D11D3B98100C04F2233EA:"NPV","8107C34ADD9911D3B98100C04F2233EA":"Percentile","9C374203DD9F11D3B98100C04F2233EA":"AvgDev","9C374228DD9F11D3B98100C04F2233EA":"ChiSquareTest","9C374225DD9F11D3B98100C04F2233EA":"Correlation","9C374224DD9F11D3B98100C04F2233EA":"Covariance","9C374237DD9F11D3B98100C04F2233EA":"ForecastV","9C37422FDD9F11D3B98100C04F2233EA":"FTest","9C374234DD9F11D3B98100C04F2233EA":"GrowthV","9C37422EDD9F11D3B98100C04F2233EA":"HeteroscedasticTTest","9C37422DDD9F11D3B98100C04F2233EA":"HomoscedasticTTest","9C37422ADD9F11D3B98100C04F2233EA":"Intercept","9C374204DD9F11D3B98100C04F2233EA":"Kurtosis","9C374222DD9F11D3B98100C04F2233EA":"MeanTTest","9C37422CDD9F11D3B98100C04F2233EA":"PairedTTest","9C374226DD9F11D3B98100C04F2233EA":"Pearson","9C374227DD9F11D3B98100C04F2233EA":"RSquare","9C374205DD9F11D3B98100C04F2233EA":"Skew","9C374229DD9F11D3B98100C04F2233EA":"Slope","9C37422BDD9F11D3B98100C04F2233EA":"SteYX","9C374231DD9F11D3B98100C04F2233EA":"TrendV","9C374223DD9F11D3B98100C04F2233EA":"VarTest","4A99DC7BC5254A319F6B8098E7D652C1":"ConcatAgg"},Z={AND283:"And",OR284:"Or",NOT285:"Not",IF305:"If"},s={BEGINSWITH279:"Begins with",ENDSWITH279:"Ends with",IN289:"In",BETWEEN290:"Between",CONTAINS291:"Contains",LIKE291:"Like"};function P(AI){var AG=function(AK,AJ){return mstrmojo.array.stringSorter(AK.n,AJ.n);},AH,AF;AI=AI.sort(AG);for(AH=0,AF=AI.length;AH<AF;AH++){AI[AH].fns=AI[AH].fns.sort(AG);}return AI;}function Y(AI,AJ){var AF=AI.length,AH;for(AH=0;AH<AF;AH++){var AG=AI[AH].fns;if(mstrmojo.array.find(AG,"did",AJ)>-1){return AH;}}return -1;}function M(AG){var AF=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();AG=mstrmojo.hash.copy(AG,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(AF){AG.quickSearch=AF;AG.nameWildcards=16;AG.sortKey=-1;}return AG;}function I(AG,AF){if(mstrApp.serverRequest){mstrApp.serverRequest(AF,AG);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(AG,AF,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function F(){if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}return this.serverProxy;},getMetricDefintion:function S(AH,AF){var AG={taskId:"getMetricDefinition",metricId:AH.id,outputFlags:65599};if(AH.msgID){AG.msgID=AH.msgID;}I.call(this,AF,AG);},validateMetric:function f(AH,AF){var AG={taskId:"validateMetric",metricId:AH.metricId,tokenStreamXML:AH.tokenStreamXML,metricXML:AH.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(AH.metricId)){AG.isNew=true;}if(AH.msgID){AG.msgID=AH.msgID;}if(AH.formID){AG.frmid=AH.formID;}if(AH.isIDForm){AG.isIDForm=AH.isIDForm;}if(AH.objectType){AG.objectType=AH.objectType;}I.call(this,AF,AG);},getMetricComponents:function B(AJ,AG){var AF=this,AH=this.metricComponents;if(!this.noCache&&AH&&AH.items.length==AH.sz){AG.success(AH);return ;}AG.success=mstrmojo.func.composite([AG.success,function(AK){if(AF.metricComponents&&AF.metricComponents.items){AF.metricComponents.items.push(AK.items);}else{AF.metricComponents=AK;}}]);var AI=M({blockBegin:AJ.blockBegin,blockCount:AJ.blockCount,searchPattern:AJ.pattern,rootFolderType:AJ.rootFolderType||24,objectType:AJ.objectType||"12,13,43"});I.call(this,AG,AI);},getAttributes:function R(AH,AF){var AG=M({blockBegin:AH.blockBegin,blockCount:AH.blockCount,searchPattern:AH.pattern,rootFolderType:AH.rootFolderType||26,objectType:12});I.call(this,AF,AG);},getFacts:function L(AH,AF){var AG=M({blockBegin:AH.blockBegin,blockCount:AH.blockCount,searchPattern:AH.pattern,rootFolderType:AH.rootFolderType||29,objectType:13});I.call(this,AF,AG);},getMetrics:function G(AH,AF){var AG=M({blockBegin:AH.blockBegin,blockCount:AH.blockCount,searchPattern:AH.pattern,rootFolderType:AH.rootFolderType||5,objectType:4});if(AH.isVerify){AG.nameWildcards=2;}I.call(this,AF,AG);},getFunctions:function U(AK){var AM=this,AN=window.sessionStorage,AJ=this.functions||(AN&&AN.getItem("functions")),AL=AN&&AN.getItem("mstrLocaleId"),AH=mstrApp&&mstrApp.localeId;if(AJ&&AL==AH){AJ=P(JSON.parse(AJ).fncs);AK.success(AJ);}else{var AG={failure:AK.failure,textResponse:true},AI={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};var AF=function(AO){p.forEach(AO,function(AQ){var AP=AQ&&AQ.fns;p.forEach(AP,function(AS){var AR=AS.pros;var AT=p.filterOne(AR,function(AU){return AU.n==="UseLookupForAttributes";});if(AT){AT.dfv="0";}});});};AG.success=function(AO){if(typeof AO==="string"||!mstrApp.isSingleTier){AO=AO.replace(/\\'/g,"'");var AQ=JSON.parse(AO),AP=AQ.fncs;AF(AP);AO=JSON.stringify(AQ);if(AN){AN.setItem("functions",AO);AN.setItem("mstrLocaleId",AH);}AM.functions=AO;AJ=P(JSON.parse(AO).fncs);}else{AF(AO.fncs);AJ=P(AO.fncs);AM.functions=JSON.stringify(AO);}AK.success(AJ);};I.call(this,AG,AI);}},getAggFunctions:function C(){if(this._aggFunctions){return this._aggFunctions;}var AF=this.parseFuncStr();AF=mstrmojo.array.filter(AF[this.getBasicCategoryIndex(AF)].fns,function(AH){var AG=AH.did,AI;if(AG!=="B2C0FA4020C711D6AD1400C04F0423DE"&&AG!=="B2C0FA4120C711D6AD1400C04F0423DE"){AI=N[AG];}return AI;});return AF;},getOLAPAggFunctions:function E(AF){var AG=this.parseFuncStr();AG=mstrmojo.array.filter(AG[this.getOLAPCategoryIndex(AG)].fns,function(AH){switch(AF){case"moving":return AD[AH.did];case"running":return u[AH.did];case"olap":default:return AC[AH.did];}return false;});return AG;},getFunctionCatList:function x(){if(this._functionCatList){return this._functionCatList;}var AF=this.parseFuncStr();AF=mstrmojo.hash.make(AF,mstrmojo.Arr);this._functionCatList=AF;return AF;},getCategoryIndex:function w(AG,AF){return Y(AF||this.getFunctionCatList(),AG);},getBasicCategoryIndex:function J(AG){var AF="B2C0FA4020C711D6AD1400C04F0423DE";return Y(AG||this.getFunctionCatList(),AF);},getDataMiningCatIndex:function l(AF){var AG="F17CD4F3FF134D91B80DDAB9CA73C919";return Y(AF||this.getFunctionCatList(),AG);},getDateTimeCategoryIndex:function AB(AG){var AF="C50F2A4F75AE49D6B20E00224967B500";return Y(AG||this.getFunctionCatList(),AF);},getStringCategoryIndex:function j(AG){var AF="6F7DF5FF449111D5BEA300B0D01A55EF";return Y(AG||this.getFunctionCatList(),AF);},getOLAPCategoryIndex:function J(AG){var AF="D221F90EB35540E3A1204ED6CC9A8267";return Y(AG||this.getFunctionCatList(),AF);},getInternalCategoryIndex:function V(AG){var AF="8107C337DD9911D3B98100C04F2233EA";return Y(AG||this.getFunctionCatList(),AF);},getFunctionDetails:function z(AH,AF){var AG={taskId:"getSystemFunctions",functionId:AH.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};I.call(this,AF,AG);},getTransformations:function O(AH,AF){var AG=M({blockBegin:AH.blockBegin,blockCount:AH.blockCount,searchPattern:AH.pattern,rootFolderType:AH.rootFolderType||38,objectType:43});I.call(this,AF,AG);},getFilters:function o(AH,AF){var AG=M({blockBegin:AH.blockBegin,blockCount:AH.blockCount,searchPattern:AH.pattern,rootFolderType:AH.rootFolderType||4,objectType:1});I.call(this,AF,AG);},getAttributeForms:function g(AH,AF){var AG={taskId:"getAttributeForms",attributeID:AH.attributeID,displayedForms:AH.displayedForms,styleName:"WidgetElementListStyle"};I.call(this,AF,AG);},getSubtotalFunctions:function W(AH,AF){var AG=M({objectType:"1025,1026",searchPattern:""});I.call(this,AF,AG);},isBasicAggMap:function q(AF){var AG=!!N[AF];if(AF==="B2C0FA4020C711D6AD1400C04F0423DE"||AF==="B2C0FA4120C711D6AD1400C04F0423DE"){AG=false;}return AG;},isOLAPAgg:function AE(AF){return !!AC[AF];},isMovingAgg:function a(AF){return !!AD[AF];},isRunningAgg:function e(AF){return !!u[AF];},isBanding:function k(AF){return !!X[AF];},isOLAP:function K(AG){var AH=this.getFunctionCatList(),AF=AH[this.getOLAPCategoryIndex(AH)].fns;return mstrmojo.array.find(AF,"did",AG)>-1;},isRank:function D(AF){return !!Q[AF];},isScalar:function d(AF){return(AF||{}).sqt===3;},hasLookupForAttributesProps:function(AF){return !!H[AF];},getFunctionHelpTopic:function t(AF){var AG="<div class='func-details' onclick='mstrmojo.ME.MetricDataService.showFunctionHelpTopic(\"##HELPTOPIC##\")'>"+mstrmojo.desc(5811,"Details...")+"</div>";AG=AG.replace("##HELPTOPIC##",AF);return AG;},showFunctionHelpTopic:function AA(AG){var AH=mstrApp.isSingleTier,AF=((mstrApp.helpUrl||"../help/")+"FunctionsRef/");if(AH){AF=AF+"index.htm#cshid="+(AG||"");window.FormWrapper.openPage(AF);}else{if(AG){AF=AF+"Content/"+AG+".htm";}else{AF=AF+"index.htm";}window.open(AF);}return false;},sortFunctions:function A(AG){var AH={},AF=function(AJ,AI){return mstrmojo.array.stringSorter(AJ.n,AI.n);};mstrmojo.array.forEach(AG,function(AI){mstrmojo.array.forEach(AI&&AI.fns,function(AJ){if(AJ&&AJ.did){AH[AJ.did]=AJ;}});});return mstrmojo.hash.valarray(AH).sort(AF);},parseFuncStr:function b(){var AF=window.sessionStorage,AG=this.functions||AF&&AF.getItem("functions");if(AG){return P(JSON.parse(AG).fncs);}},isValEqual:function(AI,AH){if(AI===AH){return true;}var AF=[-1,"-1","True",true],AG=[0,"0","False",false];if(AF.indexOf(AI)>-1&&AF.indexOf(AH)>-1){return true;}else{if(AG.indexOf(AI)>-1&&AG.indexOf(AH)>-1){return true;}}return false;},isFuncHasUseLookupForAttributeProp:function(AG){var AF=[h.FunctionSum,h.FunctionCount,h.FunctionAvg,h.FunctionMin,h.FunctionMax,h.FunctionProduct,h.FunctionMedian,h.FunctionMode,h.FunctionStdev,h.FunctionVar,h.FunctionGeomean,h.FunctionPercentile,h.FunctionStdevP,h.FunctionVarP,h.FunctionFirst,h.FunctionLast,h.ConcatAgg];return AF.indexOf(AG)>-1;},isLogicOrCompFunc:function(AG){var AF=AG.v.toUpperCase()+AG.tp;return !!Z[AF]||!!s[AF];}});}());(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var A=mstrmojo.num;function B(G,F){var H=F?G.max:G.min,D=F?G.min:G.max,E=G.getVal(F?1:-1);return(H===null||(F?(E<=H):(E>=H))||(D!==null&&G.canLoop));}function C(H,G){var F=H.min,D=H.max,E=H.getVal(G?1:-1);if((G&&D!==null&&E>D)||(!G&&F!==null&&(E<F))){if(H.canLoop){E=((E-F)%(D-F+1))+F;E=(E>=F)?E:E+(D-F+1);}else{return ;}}H.item[H.valField]=H.curVal=E;H.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(E){this._super(E);var F=this.item,D=function(I){var H=I&&F[I];return(H===null||H===undefined);},G=function(I,K,H){var J=H&&D.call(this,K)?null:F[K];if(J!==null&&J!==undefined){this[I]=J;}};G.call(this,"min",this.minField,true);G.call(this,"max",this.maxField,true);G.call(this,"maxLength",this.maxLengthField,true);G.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var E=this.item,F=this.curVal=E[this.valField];if(F===null||F===undefined){var D=this.min;this.curVal=D!==null?D:0;}},next:function(){C(this,true);},prev:function(){C(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},renderItemAt:function(F){var E=this.getVal(F),D=this.renderer;return D?D.render(E,this):E;},getVal:function(D){return this.curVal+(this.interval*(D||0));},setVal:function(F){var G=this.min,D=this.max,E=this.getVal();if(typeof F!=="number"||isNaN(F)||F===E||A.inNumericRange(F,G,D)!==0){return ;}this.item[this.valField]=this.curVal=F;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog");mstrmojo.android.nativedialog.EditTextDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.EditTextDialog",type:3,populateConfig:function A(){this._super();var B=this.children&&this.children.length&&this.children[0];this.config.textValue=B.textValue||B.value;this.config.textType=B.textType||B.type;this.config.rows=B.rows;if(!!this.validator){this.config.validator=this.validator;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog");mstrmojo.android.nativedialog.AlertDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.AlertDialog",type:4,populateConfig:function A(){this._super();var B=this.children&&this.children.length&&this.children[0];this.config.text=B.text;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog","mstrmojo.num");var B=mstrmojo.num.countOfDecimals;mstrmojo.android.nativedialog.SliderDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.SliderDialog",type:5,populateConfig:function A(){this._super();var D=this.children[0],C=D.sliderBar||D;this.config.min=C.min;this.config.max=C.max;this.config.interval=C.interval;this.config.value=D.value;this.config.dv=D.value||D.dv;this.config.intervalDecimal=B(this.config.interval,".");}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog");mstrmojo.android.nativedialog.DatePickerDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.DatePickerDialog",type:7,populateConfig:function A(){this._super();var B=this.children[0].dtValue.date;this.config.year=B.year;this.config.month=B.month;this.config.day=B.day;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog");mstrmojo.android.nativedialog.TimePickerDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.TimePickerDialog",type:6,populateConfig:function A(){this._super();var C=this.children[0],B=(C.dtValue||C.value).time;this.config.hour=B.hour;this.config.min=B.min;this.config.is24Hour=C.is24HourMode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.WebNode");mstrmojo.mstr.WebFormShortcutNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebFormShortcutNode",nodeType:mstrmojo.mstr.EnumNodeType.NodeFormShortcut,attribute:null,form:null,buildTypeSpecificShortXML:function A(C){var B=this.attribute;if(B){B.buildShortObjectElt(C);}var D=this.form;if(D){D.buildShortObjectElt(C);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumExpressionType","mstrmojo.mstr.EnumNodeDimty","mstrmojo.mstr.EnumFunction","mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.EnumWebFunctionType","mstrmojo.mstr.WebNode");var B=mstrmojo.mstr.ExpressionType,E=mstrmojo.mstr.EnumNodeDimty,C=mstrmojo.mstr.EnumFunction,F=mstrmojo.mstr.EnumNodeType,G=mstrmojo.mstr.EnumWebFunctionType;var A=function(H){H=parseInt(H,10);return H===B.FilterSingleMetricQual||H===B.FilterMetricExpression||H===B.FilterMultiMetricQual;};mstrmojo.mstr.WebOperatorNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebOperatorNode",nodeType:F.NodeOperator,func:C.FunctionReserved,funcType:G.WebFunctionTypeGeneric,property:"",onExprTypeChange:function(){if(A(this.exprType)){this.dimType=E.NodeDimtyUnspecified;}},on_set_func:function(M,H){var J=false,L=parseInt(this.funcType,10);if(L===G.WebFunctionTypePercentQual||L===G.WebFunctionTypeRankQual){var K=H;switch(K){case EnumWebMRPFunction.WebMRPFunctionTop:this.func=C.FunctionLessEqual;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBottom:this.func=C.FunctionLessEqual;this.property='<pr ix="4" v="-1"/>';break;case EnumWebMRPFunction.WebMRPFunctionBetween:this.func=C.FunctionBetween;if(J){this.property="";}else{this.property='<pr ix="4" v="0"/>';}break;case EnumWebMRPFunction.WebMRPFunctionExcludeTop:this.func=C.FunctionGreater;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionExcludeBottom:this.func=C.FunctionGreater;this.property='<pr ix="4" v="-1"/>';break;case EnumWebMRPFunction.WebMRPFunctionNotBetween:this.func=C.FunctionNotBetween;if(J){this.property="";}else{this.property='<pr ix="4" v="0"/>';}break;case EnumWebMRPFunction.WebMRPFunctionEquals:this.func=C.FunctionEquals;this.property="";break;case EnumWebMRPFunction.WebMRPFunctionDifferentFrom:this.func=C.FunctionNotEqual;this.property="";break;case EnumWebMRPFunction.WebMRPFunctionBanding:this.func=C.FunctionBanding;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingC:this.func=C.FunctionBandingC;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingP:this.func=C.FunctionBandingP;this.property='<pr ix="4" v="0"/>';break;case EnumWebMRPFunction.WebMRPFunctionBandingM:this.func=C.FunctionBandingM;this.property='<pr ix="4" v="0"/>';break;default:}if(L===G.WebFunctionTypePercentQual){this.property+='<pr ix="5" v="0"/>';}else{this.property+='<pr ix="5" v="-1"/>';}var I=null;if(this.childNodes&&this.childNodes.length>0){I=this.childNodes[0];}if(I!=null){I.setPropertyStr(property);}}else{this.func=H;}},buildTypeSpecificShortXML:function D(I){I.addChild("op").addAttribute("fnt",this.func).closeElement();var H=this.property;if(H){I.addChild("prs").addRawXML(H).closeElement();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumDataType","mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.WebNode");var B=mstrmojo.mstr.EnumNodeType,A=mstrmojo.mstr.EnumDataType;mstrmojo.mstr.WebConstantNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebTimeNode",nodeType:B.NodeConstant,value:"",type:A.DataTypeUnknown,buildTypeSpecificShortXML:function C(D){D.addChild("cst").addAttribute("ddt",this.type).addText(this.value).closeElement();}});})();(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.WebNode");mstrmojo.mstr.WebTimeNode=mstrmojo.declare(mstrmojo.mstr.WebNode,null,{scriptClass:"mstrmojo.mstr.WebTimeNode",nodeType:mstrmojo.mstr.EnumNodeType.NodeTime,value:"",time:null,buildTypeSpecificShortXML:function A(B){B.addText(this.value);}});}());(function(){mstrmojo.requiresCls("mstrmojo._TouchGestures","mstrmojo.css","mstrmojo.dom","mstrmojo.hash");mstrmojo.android.ui._IsTouchLink=mstrmojo.provide("mstrmojo.android.ui._IsTouchLink",mstrmojo.hash.copy(mstrmojo._TouchGestures,{_mixinName:"mstrmojo.android.ui._IsTouchLink",ontouchend:function(B){if(!this.linkEnabled){return ;}if(!B.e.handled){var C=this.domNode,A=document.createElement("div"),D=this.id;A.className="activeLink on";C.appendChild(A);window.setTimeout(function(){var E=mstrmojo.all[D];if(E&&E.hasRendered){mstrmojo.dom.attachOneTimeEvent(A,"webkitTransitionEnd",function(){C.removeChild(A);});mstrmojo.css.removeClass(A,"on");}},200);this.onclick();}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.dom","mstrmojo.num","mstrmojo._TouchGestures");var O=mstrmojo.dom,S=mstrmojo.css,D=Math.min,E=Math.max,Q=Math.round,N=mstrmojo.num,F=N.countOfDecimals;function B(){var b=document.defaultView.getComputedStyle,a=[this.leftNode,this.rightNode],f=["border-left-width","padding-left","margin-left","border-right-width","padding-right","margin-right"],e=[0,0],Z,Y;for(Z=0;Z<a.length;Z++){var d=b(a[Z]);for(Y=0;Y<f.length;Y++){e[Z]+=parseInt(d.getPropertyValue(f[Y]),10)||0;}}this._lnExt=e[0];this._rnExt=e[1];if(!this._thumbLen){this._thumbLen=parseInt(this.thumbNode.offsetWidth,10);}this._length=this.domNode.clientWidth;this._effLen=Q(this._length-this._thumbLen);this._unitLen=this._effLen/(this.max-this.min);}function W(Z){var d=this.min,b=this._unitLen,a=this._thumbLen/2,Y=Q((Z-d)*b);this.leftNode.style.width=(Y+a-this._lnExt)+"px";this.rightNode.style.width=(this._effLen-Y+a-this._rnExt)+"px";O.translate(this.thumbNode,E(D(Y,(this.max-d)*b),0),0);}function U(Z,a){var Y=this.interval;return D(E(this.min,parseFloat(Z,10)+Q(a/this._unitLen/Y)*Y),this.max).toFixed(this._intervalDecimals);}function H(Y){return U.call(this,this.min,Y-O.position(this.domNode,true).x-this._thumbLen/2);}function J(Y){return function(Z){return this["touchSelect"+Y](Z);};}mstrmojo.ui.MobileSlider=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures],{markupString:'<div class="mstrmojo-MobileSlider" style="visibility:hidden;"><div class="v"></div><div class="bk"></div><div class="th"><div></div></div><div class="min">{@minText}</div><div class="max">{@maxText}</div></div>',markupSlots:{leftNode:function(){return this.domNode.childNodes[0];},rightNode:function(){return this.domNode.childNodes[1];},thumbNode:function(){return this.domNode.childNodes[2];},minNode:function(){return this.domNode.childNodes[3];},maxNode:function(){return this.domNode.childNodes[4];}},markupMethods:{onvalueChange:function(){if(this.hasRendered){W.apply(this,[this.value]);}if(this.slidingValue!==this.value){this.set("slidingValue",this.value);}},onslidingValueChange:function(){if(this.hasRendered){W.apply(this,[this.slidingValue]);}}},value:0,slidingValue:0,max:10,min:0,interval:1,_intervalDecimals:0,init:function M(Y){this._super(Y);this._intervalDecimals=F(this.interval,".");},onintervalChange:function K(Z,Y){this._intervalDecimals=F(Y,".");},preBuildRendering:function C(){this.minText=N.toLocaleString(this.min);this.maxText=N.toLocaleString(this.max);this._super();},postBuildRendering:function R(){this._super();B.call(this);W.call(this,this.value);this.domNode.style.visibility="visible";},resize:function V(){B.call(this);W.call(this,this.value);},touchBegin:function L(Y){Y.stop();},touchSelectBegin:function A(Z){var Y=Z.target;if(!Y||Y!==this.thumbNode){return this.bubbleTouchEvent(Z);}S.addClass(this.domNode,"active");this.slidingValue=this.value;},touchSelectMove:function G(Y){this.set("slidingValue",U.apply(this,[this.value,Y.delta.x||0]));},touchSelectEnd:function I(Y){S.removeClass(this.domNode,"active");this.set("slidingValue",U.apply(this,[this.value,Y.delta.x||0]));this.set("value",this.slidingValue);},touchSwipeBegin:J("Begin"),touchSwipeMove:J("Move"),touchSwipeEnd:J("End"),onclick:function X(Z,Y){this.touchTap({clientX:O.getMousePosition(Z.e,Y).x});},touchTap:function P(Y){this.set("value",H.call(this,Y.clientX));}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo.TouchScroller");var L=mstrmojo.array.forEach,E=mstrmojo.hash.forEach,a=mstrmojo.dom;function O(g,h){var f;for(f in g){a.translate(g[f],h[0],h[1],h[2]);}}function R(g){var f=Math.abs;return{x:(f(g.accelDelta.x)<f(g.accelDelta.y)),y:(f(g.accelDelta.y)<f(g.accelDelta.x))};}function J(f,g){f.raiseEvent({name:"scrolledOut",value:g.value,axis:g.axis,direction:g.direction});}function Q(g,l,q,o,s,f,k,j){var p=new mstrmojo.TouchScroller({scrollEl:g,vScroll:q,hScroll:o,frameRate:s,showScrollbars:f,offset:l,origin:{x:0,y:0},bounces:false,useTranslate3d:false,indicatorEl:j});if(k){p.friction=k;}return p;}function B(f){var g;for(g in f){if(f[g].decelerating){f[g].stopDeceleration();}}}var S={x:false,y:false};function V(){var f=S;if(!f.x){return"x";}if(!f.y){return"y";}return null;}var P={x:false,y:false};function N(j,k){var g=V(),h=j.scrollerConfig.scrollPast;if(!g||!h){return !!g&&!h;}function f(p){var l=j.viewport,o=j._TSN[p],u=j._scroller[p],w=j.tPos[p],q=k[p],x=P[p],s=(p==="x")?"y":"x",AA=j._scroller[s],z=P[s],t;if(!AA[0].decelerating&&z){f(s);}if(w<=0&&q>0){if(!x){if(z){return false;}O(o,[0,0,0]);for(t in u){u[t].scrollEl=l;}P[p]=true;}}else{if(x){O([l],[0,0,0]);for(t in u){u[t].scrollEl=o[t];}P[p]=false;}}return true;}return f(g);}function F(p,f){var k=f.axis,j=p.scrollboxHeightFixed,o=f.name;if(p.ss){var l=p.zones._BR.getRowInfoByPosition(f[k]);l.position=f[k];p.ss.onMove(l);}p.tPos[k]=f[k];if(o==="scrollDone"){E(p._scroller,function(q){L(q,function(s){s.toggleScrollBars(false);});});if(!N(p,f)){return true;}}if(k==="y"){var h=function(q){if(!p._isDownloading&&(-q<=p._TMAX[k])){if(p.onScrolledToLastRow){p.onScrolledToLastRow();}}};if(o==="scrollDone"){delete p._isDecelerating;if(p._cachedDownload){p.dataDownloaded();}else{h(f.y);}if(j){var g=f.y;p.notifyScrollListeners({x:f.x,y:Math.max(g,0)});}}else{if(o==="scrollDecel"){p._isDecelerating=true;h(f.fY);if(j){p.notifyScrollListeners({x:f.fX,y:f.fY});}}else{if(o==="scrollOut"){p._isDecelerating=true;h(f.y.position);}}}}}function I(j,h){var f=Math.abs,k={};var g=k[h]={start:j._TMIN[h],end:f(j._TMAX[h])};k.scrollPast=j.scrollerConfig.scrollPast;if(h==="y"){if(j.useSeamlessIncFetch){g.incFetch=!j.endFetching;g.pageSize=j.scrollboxHeight-((parseInt(j.gridData.rh,10)||25)*4);}}return k;}function X(f){f._scroller={x:[],y:[]};var g=f._viewportCoords;E(f._TSN,function(k,l){var q=I(f,l),o=(l==="y"),p=(l==="x"),h=k.length;L(k,function(w,u){var t=Q(w,q,o,p,f.frameRate,(u===h-1)&&f.scrollerConfig.showScrollbars,f.scrollerFriction,f.domNode);t.updateScrollBars(g,f.domNode);f._scroller[l][u]=t;});var s=f._scroller[l][0],j=["scrollDone","scrollMoved"];if(s){if(o){j=j.concat(["scrollDecel","scrollOut"]);}L(j,function(t){s.attachEventListener(t,f.id,function(u){u.axis=l;F(f,u);});});}});}function A(g){if(this.hasRendered){this[g+"Limit"]=parseInt(this[g],10);if(this.zones){var f=this;window.setTimeout(function(){if(f.hasRendered){f.setOffsets(true);f.setupScrollers();}},0);}}}mstrmojo._HasXtabTouchScroll=mstrmojo.provide("mstrmojo._HasXtabTouchScroll",{noScrolling:false,useTouchScrolling:true,scrollerConfig:{showScrollbars:false,scrollPast:false},_TSN:null,tPos:{x:0,y:0},_TMIN:{x:0,y:0},setupTNs:function U(){this._TSN.x=this._TSN.y=[this.domNode];},touchBegin:function Y(k){if(!this.noScrolling){k.stop();if(!this._isDownloading){if(this.toolbarMgr){this.toolbarMgr.closeToolbar();}var j=this._scroller,g=this._TMIN,f=this._TMAX;E(this.tPos,function(l,o){if(l>=g[o]&&l<=Math.abs(f[o])){B(j[o]);}});}var h=this._scroller.x;E(h,function(l){l.origin.x=h[0].origin.x;});}return true;},touchSwipeBegin:function W(o){if(this.noScrolling){return this.bubbleTouchEvent(o);}if(this._isDownloading){return false;}S=R(o);var h=S.y?"x":"y",f=this._scroller[h][0],k=f.offset,j=k[h][o.direction[h]?"end":"start"];if(!k.scrollPast&&j===f.origin[h]){var l=this.bubbleTouchEvent(o);if(l!==undefined){return l;}}var g=this._scroller;if(!N(this,o.delta)){return true;}if(!S.x){B(g.x);}if(!S.y){B(g.y);}E(this._scroller,function(q,p){if(!S[p]){L(q,function(s){s.toggleScrollBars(true);});}});return true;},touchSwipeMove:function D(g){if(!N(this,g.delta)){return true;}var f=this._scroller;L(["x","y"],function(h){if(!S[h]){E(f[h],function(j){j.scroll(g);});}});},touchSwipeEnd:function Z(o){var g=S,j=null,l=o.delta,k=o.direction;if(!g.x&&l.x!==0){j="x";k=k.x?"left":"right";}if(!g.y&&l.y!==0){j="y";k=k.y?"up":"down";}if(j){J(this,{axis:j,value:this.tPos[j],direction:k});var f=this._scroller[j],h;if(!g[j]){for(h in f){f[h].scrollEnd(o);}}}},gridPagesRendered:function C(){if(this._super){this._super();}this.setOffsets(true);},renderEmptyGrid:function G(){if(this._super){this._super();}this.noScrolling=true;},postBuildRendering:function d(){if(this._super){this._super();}if(this.zones&&!this.gridData.eg){var f=this;window.setTimeout(function(){if(f.hasRendered){f._TSN={x:[],y:[]};f.setupTNs();f.setupScrollers();}},0);}},setOffsets:function e(){var j=this,h=this.domNode,g=this.zones,l=g._TR,f=g._BL,k=(!this.isFullScreenWidget&&this.isDocXtab),o=this._viewportCoords={top:l?l.cp.rc*parseInt(this.gridData.rh,10):0,right:k?this.widthLimit:parseInt(this.width,10),bottom:k?this.heightLimit:parseInt(this.height,10),left:f?f.totalColWidth:0};E(this._scroller,function(q,p){L(q,function(s){s.offset=I(j,p);s.updateScrollBars(o,h);var t=s.origin;if(t){s.scrollTo(t.x,t.y);}});});},setupScrollers:function H(){var h=this.gridData,g=this._TMAX,f=this.noScrolling=((h&&h.co)||(!this.scrollerConfig.scrollPast&&g.x===0&&g.y===0));if(!f&&!this._scroller){P={x:false,y:false};O(this._TSN.x,[0,0,0]);O(this._TSN.y,[0,0,0]);X(this);}},onwidthChange:function M(){A.call(this,"width");if(this._super){this._super();}},onheightChange:function K(){A.call(this,"height");if(this._super){this._super();}},unrender:function b(f){E(this._scroller,function(g){L(g,function(h){h.destroy();});});delete this._scroller;if(this._super){this._super(f);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._TouchGestures","mstrmojo.array","mstrmojo.dom","mstrmojo.css");var Y=mstrmojo.css,d=mstrmojo.emptyFn,U=mstrmojo.dom,G=32,e=mstrmojo.css,J={SINGLE:1,INCLUDE:2,EXCLUDE:3},Z={CONTINUOUS_STEPS:-1,UNSET:-4641},a={},E=function(f){if(!a[f.id+"cw"]){var h=parseInt(Y.getComputedStyle(f.sliderContainer).width,10);if(isNaN(h)){h=parseInt(Y.getComputedStyle(f.domNode.parentNode).width,10);}a[f.id+"cw"]=h;}return a[f.id+"cw"];},D=function(s,h,o){var k=s.type!==J.SINGLE,p=G,j=!!h?(h-(p/2)):parseInt(o.style.left,10),u=s.steps,w=E(s)-p,q=Math.round(w/(u-(!k?1:0))),f=k?s.rightStep:u-1;return Math.min(f,Math.round(j/q));},C=function(h){var k=h.rangeContainer.style,j=parseInt(k.width,10)-G,l=parseInt(k.left,10),f=h.steps,p=E(h)-G,o=Math.round(p/f);return Math.max(0,Math.min(Math.round((l+j)/o),f));},M=function(k,l){var h=k.steps,f=E(k),j=G;return Math.min(f-j,Math.max(0,((f/(h-1)*l)-j/2)))+"px";},B=function(j,k){var h=j.steps,f=E(j)-G;return((f/h)*k)+"px";},g=function(k,o,h){var j=k.steps,f=E(k)-G,l=h-o;return((l*f)/j)+G+"px";},X=function(h,j){var f=h.singleHandle;if(f){f.style.left=M(h,j);}},P=function(l,o,j){var f=l.rangeContainer,k,h=(l.rangeLHandle.clientWidth||G)+5;if(f){var p=l.innerRangeContainer.style;k=f.style;k.left=B(l,o);k.width=g(l,o,j);p.left=parseInt(k.left,10)+h+"px";p.width=Math.max(parseInt(k.width,10)-(2*h),0)+"px";}},A=function(j,f,p){var h=j.type!==J.SINGLE,o=D(j,f,p),q=h?"leftStep":"singleStep",k;if(o!==j[q]){j.set(q,o);this.step=o;}else{k=h?P:X;k(j,o,j.rightStep);}},H=function(h,o,l){var f=h.rangeContainer,j,k=h.leftStep,p=(l===f||l===h.innerRangeContainer);if(l===h.rangeRHandle||p){j=C(h);k+=p?j-h.rightStep:0;P(h,k,j);if(h.rightStep!==j){h.set("rightStep",j);if(p){h.set("leftStep",k);}}}else{if(l===h.rangeLHandle){A(h,o,f);}}},R=function(f,h){switch(f.type){case J.SINGLE:A(f,null,f.singleHandle);break;case J.EXCLUDE:case J.INCLUDE:H(f,null,h);break;}},I=function(u,l){var q=u.rangeContainer,h=q.style,j=parseInt(h.width,10),o=parseInt(h.left,10),f=u.leftStep,s=u.rightStep,k=s,p=f;if(l>0&&l<o&&f>0){k--;p--;}else{if(l>(o+j)&&l<E(u)){k++;p++;}}P(u,p,k);u.set("leftStep",p);u.set("rightStep",k);},Q=function(l,k,o,f,h){var j=o.style.width;if(j===""){j=Y.getComputedStyle(o).width;}f=Math.min(Math.max(0,f+(h||0)),E(l)-parseInt(j,10));k.style.left=f+"px";return f;},W=function(s,p,h,l){var k=s.rangeContainer,j=s.rangeLHandle,u=E(s)-G,q=Math.round(u/s.steps),o=h-l,f;if(o>=(q+G)){f=Q(s,k,j,p,l);if((p+l)>0){k.style.width=o+"px";}return f;}},b=function(s,o,h,k){var j=s.rangeContainer,p=E(s)-parseInt(j.style.left,10),l=h+k,u=E(s)-G,q=Math.round(u/s.steps),f;if(l>=(q+G)){f=Math.min(p,l);j.style.width=f+"px";return f;}},O=function(j){var k,l,f,h;switch(j.type){case J.SINGLE:k=parseInt(this.step,10)===Z.UNSET?D(j,null,j.singleHandle):this.step;h=j.buildSummary(k);this.step=Z.UNSET;break;case J.EXCLUDE:case J.INCLUDE:l=D(j,null,j.rangeContainer);f=C(j);h=j.buildSummary(null,l,f);break;}return h;};mstrmojo.android.selectors.MobileSliderSelector=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures,mstrmojo._ListSelections],{width:0,type:Z.UNSET,value:Z.UNSET,steps:Z.UNSET,include:Z.UNSET,initState:d,buildSummary:d,updateMinMaxLabels:d,flushSelections:d,step:Z.UNSET,singleStep:Z.UNSET,leftStep:Z.UNSET,rightStep:Z.UNSET,cssDisplay:"block",scriptClass:"mstrmojo.android.selectors.MobileSliderSelector",useRichTooltip:true,markupString:'<div class="mstrmojo-sliderSel" id="{@id}"><div></div><div class="mstrmojo-sliderSelSummary">&nbsp;</div><div class="mstrmojo-sliderSelScrollerContainer"><div class="mstrmojo-sliderSelScrollerHandle" style="display:none;"><div class="mstrmojo-sliderSelScrollerHandle1 leftHandle"><div></div></div><div class="mstrmojo-sliderSelScrollerHandle1 rightHandle"><div></div></div></div><div class="mstrmojo-sliderSelScrollerHandle2" style="display:none;"><div></div></div><div class="mstrmojo-sliderSelScrollerHandleArea" style="display:none;position:absolute"></div></div><div class="mstrmojo-sliderSelLabels"><label class="mstrmojo-sliderSelLL">&nbsp;</label><label class="mstrmojo-sliderSelLR">&nbsp;</label></div></div>',markupSlots:{editor:function(){return this.domNode.childNodes[0];},summary:function(){return this.domNode.childNodes[1];},sliderContainer:function(){return this.domNode.childNodes[2];},innerRangeContainer:function(){return this.domNode.childNodes[2].childNodes[2];},rangeContainer:function(){return this.domNode.childNodes[2].childNodes[0];},rangeLHandle:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[0];},rangeRHandle:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[1];},singleHandle:function(){return this.domNode.childNodes[2].childNodes[1];},minLabel:function(){return this.domNode.childNodes[3].childNodes[0];},maxLabel:function(){return this.domNode.childNodes[3].childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},ontypeChange:function(){var j,h="none",k="mstrmojo-sliderSelScrollerContainer",f="Handle1";switch(this.type){case J.SINGLE:j="block";break;case J.EXCLUDE:k="mstrmojo-sliderSelScrollerContainerExcl";f="Handle2";h="block";break;case J.INCLUDE:h="block";break;}this.rangeContainer.style.display=h;this.innerRangeContainer.style.display=h;this.sliderContainer.className=k;this.rangeLHandle.className="mstrmojo-sliderSelScrollerHandleX leftHandle".replace("HandleX",f);this.rangeRHandle.className="mstrmojo-sliderSelScrollerHandleX rightHandle".replace("HandleX",f);this.singleHandle.style.display=j;},onconstantsChange:function(){this.updateMinMaxLabels();},onvalueChange:function(){O(this);}},postBuildRendering:function V(){var f=this._super();this.initState();var h=this.tooltipNode||this.domNode;U.detachEvent(h,"mouseover",this._ontooltipover);U.detachEvent(h,"mouseout",this._ontooltipout);return f;},onsingleStepChange:function(){X(this,this.singleStep);},onleftStepChange:function(){P(this,this.leftStep,this.rightStep);},onrightStepChange:function(){P(this,this.leftStep,this.rightStep);},touchSwipeBegin:function(p){var o=p.target;if(!o){return false;}this.touchTap(p);var f=this._glowing=[];e.addClass(o,"glow");f.push(o);this._sliderTarget=o;var h=this.singleHandle,j=this.rangeContainer,l,k;switch(o){case h:l=h.style.left;a.shl=parseInt(!!l?l:0,10);break;case j:case this.innerRangeContainer:case this.rangeLHandle:case this.rangeRHandle:k=j.style;l=k.left;a.icl=parseInt(!!l?l:0,10);a.icw=parseInt(k.width,10);break;case this.sliderContainer:e.addClass(h,"glow");f.push(h);break;default:this.bubbleTouchEvent(p);}this._initTooltip();if(this.type===J.SINGLE){this.touchSelectMove(p,true);}},touchSwipeMove:function(q,l){var s=q.target;if(!s){return false;}s=this._sliderTarget;var h=this.singleHandle,k=this.rangeContainer,f=this.rangeLHandle,j=this.rangeRHandle,p=q.delta.x,o;switch(s){case h:o=Q(this,h,h,a.shl,p);break;case j:o=b(this,a.icl,a.icw,p);break;case f:o=W(this,a.icl,a.icw,p);break;case k:case this.innerRangeContainer:if(this.type===J.INCLUDE){o=Q(this,k,k,a.icl,p);}break;case this.sliderContainer:o=Q(this,h,h,q.clientX-U.position(this.sliderContainer,true).x);break;}this._updateTooltip(q.evt,s,o,l);},touchSwipeEnd:function(o){var k=(o.target===this.sliderContainer)?this.singleHandle:this._sliderTarget,f=this.leftStep,j=this.rightStep,h=this.singleStep;mstrmojo.array.forEach(this._glowing,function(l){e.removeClass(l,"glow");});R(this,k);if(f!==this.leftStep||j!==this.rightStep||h!==this.singleStep){this.flushSelections();}this.hideTooltip(o.evt,this);},touchTap:function(o){var p=o.target;if(!p){return false;}var q=this.sliderContainer,h=o.clientX,t=(q===p),j=h-U.position(q,true).x,k=this.leftStep,f=this.rightStep,u=this.singleStep;switch(this.type){case J.SINGLE:if(t){A(this,j,this.singleHandle);}break;case J.INCLUDE:if(t){I(this,j);}break;}if(k!==this.leftStep||f!==this.rightStep||u!==this.singleStep){O(this);this.flushSelections();}},touchSelectBegin:function(f){this.touchSwipeBegin(f);},touchSelectMove:function(f){this.touchSwipeMove(f,true);},touchSelectEnd:function(f){this.touchSwipeEnd(f);},touchEnd:function F(f){this.hideTooltip(f.evt,this);},_initTooltip:function S(){this.set("richTooltip",{refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMCENTER,contentNodeCssClass:"mstrmojo-sliderTip"});},_updateTooltip:function N(f,t,o,k){this.showTooltip(f,this);var l=U.position(this.sliderContainer,false),j=U.position(this.domNode,false),h=mstrmojo.boxmodel.offset(this.sliderContainer),p=(l.y<90),q=this.richTooltip,s=O(this),u;if(k){u=(G/2);}else{u=t.style.width;if(u===""){u=Y.getComputedStyle(t).width;}u=parseInt(u,10)/2;}q.content='<div class="mstrmojo-sliderTip-top">'+s+'</div><div class="mstrmojo-sliderTip-bottom'+(p?" down":"")+'"></div>';q.top=j.y-h.top-20+(p?100:0);q.left=o+u+(j.x-h.left);this.richTooltip=null;this.set("richTooltip",q);},onselectionChange:function L(){if(this.onchange){this.onchange();}if(this.makeSelection){this.makeSelection({selItem:this.type===J.SINGLE?this.singleHandle:this.rangeContainer});}},slideHosted:function(j,h,f){if(j!==null&&j!==undefined){this.set("singleStep",j);}if(h!==null&&h!==undefined){this.set("leftStep",h);}if(f!==null&&f!==undefined){this.set("rightStep",f);}this.flushSelections();O(this);}});var K=mstrmojo.android.selectors.MobileSliderSelector;K.TYPES=J;K.FLAGS=Z;}());(function(){mstrmojo.requiresCls("mstrmojo.TouchScroller","mstrmojo.hash");var H=mstrmojo.hash;mstrmojo._HasTouchScroller=mstrmojo.provide("mstrmojo._HasTouchScroller",{_meta_usesSuper:true,scrollerConfig:{},allowTouchBubble:true,scrollerSetupDelay:undefined,init:function M(S){this._super(S);this.scrollerConfig=H.clone(this.scrollerConfig);},updateScrollerConfig:function P(){return this.scrollerConfig;},updateScroller:function F(W,X){var S=this._scroller;if(S){var U=this.updateScrollerConfig();S.initScroller(U);if(!W){var V=U.origin;if(V){S.scrollTo(V.x,V.y,X);}}S.updateScrollBars();}},initScroller:mstrmojo.emptyFn,useSelectScroll:false,postBuildRendering:function Q(){var S=this._scroller;if(!S){S=this._scroller=new mstrmojo.TouchScroller();this.initScroller(S);}else{S.haltScroller();}if(!this.layoutConfig){var V=this.id,U=this.scrollerSetupDelay;if(!isNaN(U)){window.setTimeout(function(){mstrmojo.all[V].updateScroller();},U);}else{this.updateScroller();}}this._super();},afterLayout:function G(){this._super();this.updateScroller();},getScrollPos:function A(){return H.copy(this._scroller.origin||{x:0,y:0});},shouldTouchBubble:function I(W){if(!this.allowTouchBubble){return false;}var S=this._scroller,V=W.isVertical,U=V?"y":"x";return(!S[(V?"v":"h")+"Scroll"]||S.offset[U][W.direction[U]?"end":"start"]===S.origin[U]);},touchBegin:function L(S){this._scroller.haltScroller();return(this._super&&this._super(S))||true;},touchSwipeBegin:function J(S){if(this.shouldTouchBubble(S)){if(this.bubbleTouchEvent(S)===false){this._touchCanceled=true;}return ;}if(this._super){this._super(S);}this._scroller.toggleScrollBars(true);},touchSelectBegin:function B(S){if(this._super){this._super(S);}if(this.useSelectScroll){this.touchSwipeBegin(S);}},touchSwipeMove:function C(S){if(!this._touchCanceled){if(this._super){this._super(S);}}this._scroller.scroll(S);},touchSelectMove:function E(S){if(!this._touchCanceled){if(this._super){this._super(S);}}if(this.useSelectScroll){this.touchSwipeMove(S);}},touchSwipeEnd:function N(S){S.evt.handled=true;if(!this._touchCanceled){if(this._super){this._super(S);}}this._scroller.scrollEnd(S);},touchSelectEnd:function K(S){if(this._touchCanceled){return ;}if(this._super){this._super(S);}if(this.useSelectScroll){this.touchSwipeEnd(S);}},touchEnd:function D(S){if(this._touchCanceled){delete this._touchCanceled;return ;}if(this._super){this._super(S);}},unrender:function O(U){var S=this._scroller;if(S){S.unrender();}delete this.scrollerConfig.scrollEl;this._super(U);},destroy:function R(){if(this._scroller){this._scroller.destroy();delete this._scroller;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TouchScroller");var C={v:{axis:"y",dimension:"height"},h:{axis:"x",dimension:"width"}};mstrmojo.android._IsIncFetchList=mstrmojo.provide("mstrmojo.android._IsIncFetchList",{_mixinName:"mstrmojo.android._IsIncFetchList",supportsIncFetch:true,ifDataHelper:null,ifDirection:"v",supportedEdges:mstrmojo.TouchScroller.EnumIncFetchEdges.end,initScroller:function B(E){this._super(E);var F=this.ifDataHelper;if(F){E.attachEventListener("incFetch",this.id,function(G){if(!this.supportsIncFetch){return ;}var H=this;F.next({success:function(J,I){H.addItems(I||J.items);H._scroller.STATUS_INC_FETCH=false;},failure:function(I){mstrmojo.alert("Error in fetching next: "+I);}},G.edge);});}},updateScrollerConfig:function D(){var E=this._super(),I=this.supportsIncFetch,F=this.ifDirection,H=C[F];if(E[F+"Scroll"]){var G=E.offset[H.axis];G.incFetch=I;G.supportedEdges=this.supportedEdges;G.pageSize=I?(parseInt(this[H.dimension],10)-100):0;this.scrollerConfig=E;}return E;},addItems:function A(E){this._super(E);this.supportsIncFetch=((this.ifDataHelper.totalSize===-1)||(this.items.length<this.ifDataHelper.totalSize));if(this.updateScroller){this.updateScroller();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.TouchScroller","mstrmojo.vi.enums.EnumFeatures");var J=0,M=1,L=2,V=3,K="CellInfo",X="Drill",U="Link",D=25,B=40,I=55,E=6,C=4,P=false,O="InfoViewer-Tab",G="InfoViewer-TabWrapper",W="InfoViewer-nTab",Q="showAll",F="drillTo",N="linkTo",S="glow",R=mstrmojo.css,H=mstrmojo.vi.enums.EnumFeatures,A=[];A[O]=A[W]=function(b){var Z=b.className;if(Z==O){Z=b.parentNode.className;}for(var a=0,Y=this.tabs.length;a<Y;a++){if(Z.indexOf(this.tabs[a].name)>-1){this.setCurrentTab(a);break;}}this.xtab.magnifier.resizeAndPosition();};A[F]=function(){mstrApp.closeDialog();this.xtab.controller.onDrill(this.xtab,this.drillPaths[0].act);};A[N]=function(Y){mstrApp.closeDialog();this.xtab.controller.onLink(this.xtab,this.linkPaths[Y.getAttribute("lnk")].act);};A[Q]=function(Y){this.tabs[this.currentTabIndex].expanded=true;R.removeClass(this.xtab.magnifier.containerNode,"hideMore");this.xtab.magnifier.resizeAndPosition();};mstrmojo.XtabMagnifierHelper=mstrmojo.declare(mstrmojo.Obj,null,{xtab:null,cellInfo:null,selectedCell:null,drillPaths:null,linkPaths:null,tabs:[],currentTabIndex:0,init:function(Z){this._super(Z);P=mstrApp.isTablet();var Y=mstrMobileApp.getDeviceDPI();if(Y<=120){B=26;I=35;D=15;}else{if(Y<=160){B=35;I=46;D=20;}else{if(Y<=213){B=46;I=61;D=26;}else{if(Y<=240){B=53;I=69;D=30;}else{B=70;I=92;D=40;}}}}if(!P){C=3;}this.titleHeight=I;},glowOnTap:function(d){var a=[G,Q,F,N],Z=d.className;if(Z==O){d=d.parentNode;Z=d.className;}for(var b=0,Y=a.length;b<Y;b++){if(Z.indexOf(a[b])>-1){R.addClass(d,S);setTimeout(function(){R.removeClass(d,S);},200);break;}}},handleTouchTap:function(Y){this.glowOnTap(Y);for(n in A){if(Y.className.indexOf(n)>-1){A[n].call(this,Y);}}},handleTouchSwipe:function(f){if(!P){var a=f.direction.x,e=f.delta,Z=this.currentTabIndex,b=this.tabs.length,Y=parseInt(this.xtab.magnifier.width,10),d=isNaN(Y)?50:Y*0.2;if(Math.abs(e.x)>d){if(e.x>0){Z=(Z+b-1)%b;}else{Z=(Z+b+1)%b;}if(Z!=this.currentTabIndex){this.setCurrentTab(Z);this.xtab.magnifier.resizeAndPosition();}}}},resolveTouchEvent:function(d){var h=d.pageX,g=d.pageY,a=document.elementFromPoint(h,g),j=this.xtab,Y=j.zones,Z,f;while(a){var e=a.className;if(!Z&&a.tagName==="TD"&&e&&e.toLowerCase().indexOf("xtab-td")>=0){Z=a;}if(/mstrmojo-XtabZone/.test(e)){for(var b in Y){if(a==Y[b].domNode){f=Y[b];}}break;}a=a.parentNode;}if(Z&&f){return{cell:Z,zone:f,pos:{x:h-D,y:g-D,w:D*2,h:D*2}};}return null;},resolveInfoToDisplay:function(s){var l=s.cell,AF=s.zone,AJ=this.xtab,e=AJ.lockHeadersCase,w=parseInt(l.getAttribute("r"),10),a,f,h,AC,g,AH,o,t,AG,d,AC,z,AB,AE,x,Y,Z=[],AI=this,u=function(AK,k,j){if(j){AI.selectedCell=k;Z.unshift({title:AK,value:k});}else{Z.push({title:AK,value:k});}};delete this.selectedCell;if(e==J||e==M){w=w-(Math.max(AJ.titlesCP.rc,AJ.chsCP.rc)||0);}else{if(AF.slot=="_TR"||AF.slot=="_TL"){w=-1;}}if(w<0){a=AJ.getCellForNode(l);if(a&&a.o!==undefined){u(AJ.model.getCellTitleInfo(a).title,a,true);}else{return null;}}else{f=AJ.rhsCP.getUnmergedCells(w)||[];h={rh:f.concat(AJ.rhsCP.getRowCells(w)),vs:AJ.valuesCP.getRowCells(w),ch:[]};for(AC=0,z=AJ.chsCP.rc;AC<z;AC++){h.ch.push(AJ.chsCP.getRowCells(AC));}g=l.cellIndex;if(e==J||e==L||AF.slot=="_BL"){if(l.parentNode.sectionRowIndex===0){AH=g;}else{AH=g+f.length;}}else{AH=g+h.rh.length;}o=h&&h.rh.length;if(AH>=o){AH-=o;for(AB=0,AE=h.ch.length;AB<AE;AB++){t=0;for(x=0,Y=h.ch[AB].length;x<Y;x++){AG=h.ch[AB][x];d=(AG&&AG.cs)||1;if((AH>=t)&&(AH<t+d)){if(AG.mix!==undefined){u(AG,h.vs[AH],true);}else{if(AG.ui!=null||AG.tui!=null){u(AJ.model.getCellTitleInfo(AG).title,AG);}}break;}t+=d;}}if(!this.selectedCell){u(null,h.vs[AH],true);}AH=-1;}for(AC=0,z=o;AC<z;AC++){AG=h.rh[AC];u(AJ.model.getCellTitleInfo(AG).title,AG,AC==AH);if(AC==AH){break;}}}this.cellInfo=Z;if(this.cellInfo){this.tabs=[];this.tabs.push({name:K,label:mstrmojo.desc(10638,"Info"),expanded:false,content:this.cellInfo});var b=this.selectedCell,p=(b.v!==undefined)&&!!(b.at&1)&&!!mstrmojo.resolveFeature(H.WEB_DRILL_AND_LINK),q=!!(b.at&4);if(p){this.drillPaths=[];this.drillPaths.push({n:AJ.model.getCellDrillsInfo(b).n,act:AJ.model.getDrillAction([b])});this.tabs.push({name:X,label:mstrmojo.desc(145,"Drill"),expanded:false,content:this.drillPaths});}else{this.drillPaths=null;}if(q){this.linkPaths=[];var AA=AJ.model.getCellLinksInfo(b);for(var AC=0,AD=AA.links.length;AC<AD;AC++){this.linkPaths.push({n:AA.links[AC].n,act:AJ.model.getLinkAction(b,AC)});}this.tabs.push({name:U,label:mstrmojo.desc(8149,"Link"),expanded:false,content:this.linkPaths});}else{this.linkPaths=null;}}return this.cellInfo;},createTitle:function(a){var b=[],e=0,d=this.tabs,Z=d.length,f,Y;for(;e<Z;e++){f=d[e];if(P){b.push('<div class="',G," ",f.name,'" style="height:'+(I-E)+'px;" >');b.push('<div class="',O,'">',f.label,"</div>");b.push("</div>");}else{b.push('<div class="',W," ",f.name,'" >',f.label,"</div>");}}a.style.lineHeight=a.style.height=I+"px";a.innerHTML=b.join("");this.setCurrentTab();},createContent:function(f){var a=this.cellInfo,Y=this.drillPaths,Z=this.linkPaths,e=[],j=[],h=this.xtab,b=function(k,p,o){function q(x,u){var s=[],t=(u==="value"&&!P)?B/2:B;s.push('<td><div class="',u,'" style="line-height:',t,"px;max-height:",B,'px;" >');if(x){if(x.ts==4){var l=(x.n||x.v),w=h.controller&&h.controller.model&&h.controller.model.dataService;if(w&&w.getImage){l=w.getImage(l);}s.push('<img src="'+l+'"/>');}else{s.push(x.n||x.v||"&nbsp;");}}s.push("</div></td>");return s.join("");}j.push('<tr style="height:',B,'px">',q(k,"title"),q(p,"value"),"</tr>");},d,g;if(a==null){return ;}for(d=0,g=a.length;d<g;d++){b(a[d].title,a[d].value);}e.push('<table class="content">');e.push(j.join(""));e.push("</table>");if(Y){e.push('<div class="actionMenu hide">');for(var d=0,g=Y.length;d<g;d++){e.push('<div class="drillTo" style="line-height:',B,'px">',Y[d].n,"</div>");}e.push("</div>");}if(Z){e.push('<div class="actionMenu hide">');for(var d=0,g=Z.length;d<g;d++){e.push('<div class="linkTo" style="line-height:',B,'px" lnk="',d,'">',Z[d].n,"</div>");}e.push("</div>");}e.push('<div class="',Q,'" style="line-height:',B,'px" >'+mstrmojo.desc(8995,"See all...")+"</div>");f.innerHTML=e.join("");},setCurrentTab:function(j){var Z=j||0,h=this.tabs,a=h[Z],Y=h.length,f=this.xtab.magnifier,h=f.titleNode.children,b=f.containerNode.children,e,g,d;this.currentTabIndex=Z;for(e=0;e<Y;e++){R.toggleClass(h[e],"selected",e==Z);if(!P){if(Y<=2){R.toggleClass(h[e],"left",e!=Z);}else{R.toggleClass(h[e],"left",e==(Z+Y-1)%Y);}R.toggleClass(h[e],"right",e==(Z+Y+1)%Y);}}for(e=0,g=b.length-1;e<g;e++){R.toggleClass(b[e],"hide",e!=Z);if(e==Z){this.contentNode=b[e];}}R.toggleClass(f.containerNode,"hideMore",!a.expanded&&a.content.length>C);},getContentHeight:function(){function d(f){var g=f.content,h=g.length,e=f.expanded;return(!e&&h>C)?(B+1)*(C+1):(B+1)*h;}var b=this.tabs;if(P){return d(b[this.currentTabIndex]);}else{var Z=0;for(var a=0,Y=b.length;a<Y;a++){Z=Math.max(d(b[a]),Z);}return Z;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.TouchScroller");var E=mstrmojo.dom,A=Math;function F(K,L){return(L)?A.max(A.min(A.round(K),L.end),L.start):K;}mstrmojo._NeedSyncScroller=mstrmojo.provide("mstrmojo._NeedSyncScroller",{init:function J(K){if(this._super){this._super(K);}if(!this.lisenters){this.lisenters=[];}},initScroller:function H(K){if(this._super){this._super(K);}this._scrollMovedListener=this._scroller.attachEventListener("scrollMoved",this.id,function(L){this.onScrollMoved(L);});this._scrollDoneListener=this._scroller.attachEventListener("scrollDone",this.id,function(L){this.onScrollDone(L);});},onScrollMoved:function B(K){if(this._super){this._super(K);}this.syncScroller(K,true);},onScrollDone:function G(K){if(this._super){this._super(K);}this.syncScroller(K,false);},syncScroller:function C(O,N){if(!O||O.x==undefined||O.y==undefined){return ;}var M=this.lisenters,L=this.lisenters.length;for(var P=0;P<L;P++){var K=M[P]._scroller,Q=K.offset;K.origin={x:K.hScroll?O.x:0,y:K.vScroll?O.y:0};E.translate(K.scrollEl,-K.origin.x,-K.origin.y,0,K.transform,K.useTranslate3d);K.toggleScrollBars(N);mstrmojo.hash.forEach(K._scrollBarEls,function(d,X){var j=(X==="x"),b=O[X],R=d.length,e=d.ratio,Z=d.viewportSize,W=6/R,V=d["base"+((j)?"Left":"Top")],a=V+Z-R,U=A.round(V+(e*b));if(U<V){U=V-b;R+=b;}else{if(U>a){var h=(b-K.offset[X].end)*e;U=A.min(a+h,Z+V-6)-1;R-=h;}}var g=0,S=[g,g,g],Y=[1,1,1],f=(j)?0:1;S[f]=(U-V);Y[f]=A.min(A.max(R/d.length,W),1);E.translate(d,S[0],S[1],S[2]," scale3d("+Y.join(",")+")");});}},addSyncScroller:function D(K){this.lisenters.push(K);},destroy:function I(){this.lisenters=null;if(this._scrollDoneListener){this._scroller.detachEventListener(this._scrollDoneListener);delete this._scrollDoneListener;}if(this._scrollMovedListener){this._scroller.detachEventListener(this._scrollMovedListener);delete this._scrollMovedListener;}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl");mstrmojo.DefaultDIC=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DefaultDIC",isDummy:true,showInPopup:function(){mstrmojo.alert("The control style has not been supported yet.");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocLine=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocLine",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocLine" title="{@tooltip}" style="{@domNodeCssText}"></div>',formatHandlers:{domNode:["RW","border-top","border-left","fx"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function B(C){if(this.thresholdId||C.data.tid){delete this.fmts;}this.thresholdId=C.data.tid;this.set("visible",!C.data.hidden);if(this._super){this._super(C);}},getFormats:function A(){var C=this._super();if(C&&parseInt(C.height,10)===0){C.height="1px";}return C;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@en@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocRoundRectangle=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocRoundRectangle",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocRoundRectangle" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocRoundRectangle-l1" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l2" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l3" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div style="{@rectNodeCssText}{@rectNodeGradCssText}"></div><div class="mstrmojo-DocRoundRectangle-l3" style="{@bCornersCssText}{@bCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l2" style="{@bCornersCssText}{@bCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l1" style="{@bCornersCssText}{@bCornersCssGradText}"></div></div>',markupSlots:{rectNode:function(){return this.domNode.childNodes[3];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["top","left","width","z-index","fx"],rectNode:["height","background-color"],tCorners:["background-color"],bCorners:["background-color"]},update:function C(D){if(this.thresholdId||D.data.tid){delete this.fmts;}this.thresholdId=D.data.tid;this.set("visible",!D.data.hidden);},preBuildRendering:function B(){var F=this._super();var G=this.getFormats(),D=!!this.defn.topc,I=D?4:8,H="(\\d*px)",E=Math.max(parseInt(G.height,10)-I,0);if(G.height==="100%"){H="(100%)";E=this.parent.getHeight()-I;}this.rectNodeCssText=this.rectNodeCssText.replace(new RegExp("(.*height:)"+H+"(.*)"),"$1"+E+"px$3");if(D){this.bCornersCssText="display:none;";}return F;},formatGradient:function A(E,H){var F=mstrmojo.css.buildGradient(E.t,E.sc,E.ec);if(!F){return ;}var D=F.n+":"+F.v+";",G="background-color:";this.rectNodeGradCssText=D;if(E.t===0){this.tCornersCssGradText=G+E.sc+";";this.bCornersCssGradText=G+E.ec+";";}else{this.tCornersCssGradText=this.bCornersCssGradText=D;}}});}());(function(){var U="<tr>";var h=['<table cellspacing="0" cellpadding="0" style="table-layout:',null,";width:",null,';mstr-tablestyle-slot" ',null,">",null,"<tbody>"];var Y="&nbsp;";var J="fsbp_1 ";var f="fsbp_2 ";var C="fsbp_3 ";var d=1,e=2,G=3,j=4,M=5,B=6,W={1:" stack-top",2:" stack-middle",3:" stack-bottom",4:" stack-bottom-last",5:" no-stack",6:" stack-full"},P=1,a=2,A=3,R=4,X=5;var g=mstrmojo.css;var L=4;function F(p,o){for(var q=0,l=p.length;q<l;q++){var t=p[q];var s=o.rows[t.rows].cells[t.cells];if(s){mstrmojo.css.addClass(s,J);}}}function Z(p){var s=p.indexOf('src="');if(s<0){return p;}var q=p.substring(s+5),o=q.indexOf('"'),t;q=q.substring(0,o);t=q;var l=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(l&&l.getImage){t=l.getImage(q);}return p.replace(q,t);}mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.AndroidGridBase=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.AndroidGridBase",markupString:'<span id="{@id}" class="mstrmojo-Grid {@cssClass}" style="{@cssText}"></span>',markupSlots:{gridContainerNode:function(){return this.domNode;}},autoFitWindow:false,tableLayout:null,numAutoHeightRows:0,cp:null,rc:0,cc:0,cws:null,rh:null,totalColWidth:0,start:0,end:0,forceFixedSizes:true,hiliteCellsMap:null,eiMap:null,init:function K(l){this._super(l);},numColumnCanMerge:0,preBuildRendering:function E(l){var o=this.cp;if(!o){return ;}o.initContent();this.rc=o.rc||0;this.cws=o.colWidths||[];this.cc=this.cws.length;this.tdWidths=o.tdWidths||[];this.tdCnt=this.tdWidths?this.tdWidths.length:0;this.start=0;this.end=this.rc-1;this.numAutoHeightRows=o.getNumAutoHeightRows&&o.getNumAutoHeightRows()||0;this.hiliteCellsMap={};this.eiMap={};this.posMap=[];this.thPosMap=[];this.totalColWidth=0;},buildRendering:function I(o){var l=this._super(o);this.renderGrid();return l;},renderGrid:function V(o){var l=this.getGridContainer();this.preBuildGridTable();this.buildGridTable(l,o);this.postBuildGridTable();},getGridContainer:function k(){return this.gridContainerNode;},buildGridTable:function H(p,l){var o=this.getTableStartMarkup();var x=this.getTableEndMarkup();if(l){this.mergeHdrsAcrossBlks=true;}var u=this.buildTableRowsMarkup(this.start,this.end,o,x).join("");if(l){var s=document.createElement("div");s.innerHTML=u;var w=p.firstChild,z=w&&w.tBodies,q=s.firstChild.tBodies[0],t=this.matchedHdrsAcrossBlks;w.appendChild(q);if(t&&t.length>0){F(t,z[z.length-2]);}}else{p.innerHTML=u;}},getTableStartMarkup:function Q(){var o=this._getGridWidths(),l=h;l[1]=o.tableLayout;l[3]=o.totalColWidths;l[5]=this.tableCssClass?"class="+this.tableCssClass:"";l[7]="<colgroup>"+o.colgroup+"</colgroup>";if(this.tbodyStyle){l[8]='<tbody style="'+this.tbodyStyle+'">';}return l.join("");},getTableEndMarkup:function O(){return"</tbody></table>";},_getGridWidths:function b(){var z={};var s="",p=[],x="fixed",o=this.cws,t=o.length;if(t){s=0;p=[];for(var q=0;q<t;q++){if(o[q].w!==""){s+=parseInt(o[q].w,10);}}for(q=0;q<t;q++){var l=o[q];if(l.w!==""){var u=parseInt(l.w,10);if(mstrmojo.dom.isIE7){if(u===0){p.push('<col style="width:0%;display:none"></col>');}else{p.push('<col style="width:'+(u/s*100)+'%"></col>');}}else{if(mstrmojo.dom.isWK&&u===0){p.push('<col style="width:-1px"></col>');}else{p.push('<col style="width:'+l.w+'"></col>');}}}else{p.push("<col />");x="auto";}}this.totalColWidth=s;}z.colgroup=p.join("");x=this.tableLayout||x;if(this.autoFitWindow){x=this.tableLayout||x||"fixed";s="100%";}else{if(x=="fixed"){s+="px";}else{s="auto";}}z.totalColWidths=s;z.tableLayout=x;return z;},_CELL_MARKUP:['<td rowSpan="',null,'" colSpan="',null,'" class="',null,'" ei="',null,'" style="',null,'" r="',null,'">',null,"</td>"],buildTableRowsMarkup:function S(AE,t,Ag,o){var AR=[],Ad=0;AR[Ad++]=Ag||"<table><tbody>";var AG=this.cp,AL=AG.getRowHeight(),Aa=this._CELL_MARKUP,AQ=AL?'<tr style="height:'+(AL?AL+"px":"")+'">':U;var s=true,AC=true,AX=[],AT;this.matchedHdrsAcrossBlks=[];for(var AU=AE;AU<=t;AU++){AT=Ad++;AR[AT]=AU<this.numAutoHeightRows?U:AQ;var x=AG.getRowCells(AU);var AP=t+1-AU;var AO=0;if(!this.mergeHdrsAcrossBlks){if(s&&AE>0&&x.length<AG.colWidths.length){var AN=AG.getUnmergedCells(AE);if(AN){AO=AN.length;}for(var Ac in AN){var AW=AN[Ac];if(AW.rs>AP){Aa[1]=AP;Aa[5]=f+AW.css;}else{Aa[1]=AW.rs||1;Aa[5]=C+AW.css;}if(AW.cet){Aa[5]+=" mstrmojo-selected-cell";this.addHilitePosition(AW.cet,AU,Ac);}if(AW._ei){this.addExtraInfoMap(AW._ei,AU,Ac);Aa[5]+=" pt";}Aa[9]="";Aa[13]=Y;Aa[3]=AW.cs;Aa[7]=AW._ei!==undefined?AW._ei:"";AR[Ad++]=Aa.join("");}s=false;}}for(var Af=0,u=x.length;Af<u;Af++){var AJ=x[Af],AK;if(AJ.rs&&AJ.rs>AP){Aa[1]=AP;Aa[5]=J+AJ.css;if(AJ._ei){this.addExtraInfoMap(AJ._ei,AU,Af);}}else{Aa[1]=AJ.rs||1;Aa[5]=AJ.css;}if(AJ.rowType!==d){Aa[5]+=" xtab-td ";}if(AJ.css.indexOf("iggroup")>-1&&this.parent.gridData.vp.gb&&this.parent.gridData.vp.gb!==""){Aa[8]='" style="background-color:#'+this.parent.gridData.vp.gb+" !important";}else{Aa[8]='" style="';}if(AJ.cet){Aa[5]+="sc_"+this.parent.k;this.addHilitePosition(AJ.cet,AU,Af);}AK=AJ.rowType;if(AK){Aa[5]+=W[AK]||"";var w=AG.getRowHeight(AK);if(w){AR[AT]='<tr style="height:'+(w?w+"px":"")+'">';}}Aa[3]=AJ.cs||1;Aa[7]=AJ._ei!==undefined?AJ._ei:"";if(AJ.fs||AJ._e){this.addTitleHeaderPositionMap(AU,Af+AO,AJ);}if(AJ._ei!=null){this.addPositionMap(AJ._ei,AU,Af+AO);}Aa[11]=AU;if(AJ.ts===L){var AA=AJ.v;if(this.imgCacheMap){var AY=this.imgCacheMap,AS=AA&&AA.replace(/\\/g,"/");if(AY.cachedImg[AS]){AJ.v=AA=AY.baseURL+AY.cachedImg[AS];}else{if(AS&&!AY.unCachedImg[AS]){AY.unCachedImg[AS]=AS;}}}else{var q=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(q&&q.getImage){AA=q.getImage(AA);}}if(AJ.rowType){var l=(AG.getRowHeight(AJ.rowType)||AG.rh||AL),AV=l,AD=this.tdWidths,AM=AJ.colIdx,AH=0,AZ=0;var Ae=AG.getPadding(P),Ab=AG.getPadding(a),AF=AG.getPadding(A);if(AJ.rowType===d||AJ.rowType===j){AZ=l>(Ae+AF)?(l-Ae-AF):0;}else{if(AJ.rowType===e||AJ.rowType===G){AZ=l>2*AF?(l-2*AF):0;}else{if(AJ.rowType===M){AZ=l>(AF*2)?(l-AF*2):0;}}}if(AM!=="undefined"&&AM>-1&&AD&&AD.length>AM){var z=AD[AM]&&AD[AM].w;if(z!=="undefined"){AH=parseInt(z,10);}}var AB=AH>30?(AH-30):0;Aa[13]='<div><div style="top:'+(-parseInt(AV/2,10))+"px;height:"+(l-1)+"px;line-height:"+(l-1)+'px !important;">&nbsp;<img style="max-height:'+AZ+"px; max-width: "+AB+'px;" src="'+AA+'"></img></div></div>';}else{if(this.parent.gridData.lhv){Aa[9]="background-image:url('"+AA+"');background-repeat:no-repeat;background-position:center "+(AJ.rs>1?"top":"center")+";";Aa[13]=Y;}else{Aa[9]="";Aa[13]='<img src="'+AA+'"></img>';if(AJ.css&&AJ.css.indexOf("hl")>-1){Aa[13]="<span>"+Aa[13]+"</span>";}}}}else{Aa[9]="";if(mstrApp.useBinaryFormat&&AJ.v&&AJ.v.indexOf("img")>=0){AJ.v=Z.call(this,AJ.v);}Aa[13]=AJ.v||AJ.n||Y;if(AJ.css&&AJ.css.indexOf("hl")>-1){Aa[13]="<span>"+Aa[13]+"</span>";}}if(Af<this.numColumnCanMerge){if(AU===AE&&this.mergeHdrsAcrossBlks){var AI=this.rowHdsAcrossBlks;if(AC&&AJ.v&&AI&&AI[Af]){if(AJ.v===AI[Af].v){Aa[1]=AJ.rs||1;Aa[5]=C+AJ.css;Aa[13]="";this.matchedHdrsAcrossBlks.push(AI[Af]);}else{AC=false;}}}if(Aa[1]>=AP&&AJ.v){AX.push({rows:AU-AE,cells:Af,v:AJ.v});}}AR[Ad++]=Aa.join("");}AR[Ad++]="</tr>";}AR[Ad++]=o||"</tbody></table>";this.rowHdsAcrossBlks=AX;return AR;},addHilitePosition:function(o,p,l){var q=this.hiliteCellsMap[o];if(!q){this.hiliteCellsMap[o]={pos:[],nodes:[]};}this.hiliteCellsMap[o].pos.push({row:p,cell:l,page:0});},addExtraInfoMap:function(o,l,p){if(!this.eiMap[o]){this.eiMap[o]=[];}this.eiMap[o].push({row:l,cell:p,page:0});},addPositionMap:function(o,l,p){if(!this.posMap[o]){this.posMap[o]={row:l,cell:p,page:0};}},addTitleHeaderPositionMap:function(l,q,p){this.thPosMap.push({row:l,cell:q,page:0,obj:p});},clearHilites:function(x){var q=this.hiliteCellsMap[x],s=q&&q.nodes,u=this.parent;if(s){if(s.length==0&&q.pos){s=this.getNodesByPositions(q.pos);}for(var p=0,l=s.length;p<l;p++){var o=s[p],t=o.className,w=u.getCellForNode(o);if(w){delete w.cet;}g.removeClass(o,"sc_"+u.k);}this.hiliteCellsMap[x].nodes=[];}},setHilites:function(o,p){g.addClass(p,"sc_"+this.parent.k);if(!this.hiliteCellsMap[o]){this.hiliteCellsMap[o]={pos:[],nodes:[]};}this.hiliteCellsMap[o].nodes.push(p);var l=this.parent.getCellForNode(p);if(l){l.cet=o;}},getNodesByPositions:function(s){var q=this.tableNode,l=[];for(var p in s){var o=s[p];l.push(q.tBodies[0].rows[o.row].cells[o.cell]);}return l;},preBuildGridTable:function D(){},postBuildGridTable:function N(){this.addSlots({tableNode:this.gridContainerNode&&this.gridContainerNode.firstChild});}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.Widget","mstrmojo._ListSelections");var E=mstrmojo.dom;mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" tstid="{@tstid}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function G(){return this.domNode.firstChild;},scrollboxNode:function A(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},autoHide:false,itemsContainerNode:null,_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,init:function J(K){this._super(K);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},buildRendering:function D(){this.itemsHtml="";var K=(this.renderOnScroll?this.items&&((this.renderIndex+1)*this.renderBlockSize):this.items&&this.items.length);if(K){this.itemsHtml=this._buildItemsMarkup(0,K-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_buildItemsMarkup:function B(K,N,V,L,W,M){var X=[],Q=0;X[Q++]=V||"";var P=this.itemRenderer,U=P&&P.render;if(U&&typeof U==="function"){var R=this.items,S=Math.min(N+1,((R&&R.length)||0)),O;for(O=K;O<S;O++){X[Q++]=W||"";X[Q++]=U(R[O],O,this);X[Q++]=M||"";}}X[Q+1]=L||"";return X;},onselectionChange:function H(X){if(!X){return ;}var S=this.itemRenderer;if(!S){return ;}var V=this.items;if(X.added&&X.added.length>0&&V.length>0&&!mstrmojo.array.some(X.added,function(a){return !V[a]||!V[a].dsbld;})){return ;}var O=S.unselect,R=this.items||[],Y=X.removed,N,M,L,P,Z;if(O&&Y){for(P=0,Z=Y.length;P<Z;P++){N=Y[P];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){O(L,R[N],M,this);}}}var K=S.select,W=X.added,Q,U;if(K&&W){for(Q=0,U=W.length;Q<U;Q++){N=W[Q];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){K(L,R[N],M,this);}}}if(this.onchange){this.onchange({added:X.added,removed:X.removed});}},_set_items:function C(N,K){this.renderIndex=0;if(this.autoHide){this.set("visible",!!(K&&K.length));}var M=this.items;this.items=K;if(M!==K){var L=this.hasRendered;if(L){this.unrender(false);}this.clearSelect();if(L){this.render();}return true;}return false;},onItemContextMenu:mstrmojo.emptyFn,oncontextmenu:function F(K){E.preventDefault(window,K.e);var M=K.getTarget(),L=this.getItemFromTarget&&this.getItemFromTarget(M);if(L){if(this.onItemContextMenu(L,K)){K.cancel();}}},_getItemNode:function I(K){var L=this.itemsContainerNode;return(L&&L.childNodes[K])||null;},renderOnScroll:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocHTMLContainer=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocHTMLContainer",scrolling:"auto",markupString:'<iframe id="{@id}" k="{@k}" class="mstrmojo-DocHTMLContainer" title="{@tooltip}" style="{@domNodeCssText}" src="{@v}" scrolling="{@scrolling}"></iframe>',formatHandlers:{domNode:["RW","B","F","background-color","text-align","white-space","fx"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function A(B){this.v=B.data.v;if(mstrApp&&mstrApp.isTouchApp()){this.scrolling="no";}if(this.thresholdId||B.data.tid){delete this.fmts;}this.thresholdId=B.data.tid;this.set("visible",!B.data.hidden);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._RowRendTracker","mstrmojo.array","mstrmojo.dom","mstrmojo.url","mstrmojo.chart.model.enums.EnumDSSBaseFormType");var L="<tr>";var Y=mstrmojo.dom;var j=['<table cellspacing="0" cellpadding="0" style="table-layout:',null,";width:",null,';mstr-tablestyle-slot" ',null,">",null,"<tbody>"];var U="&nbsp;";var h="fsbp_1 ";var X="fsbp_2 ";var Q="fsbp_3 ";var f=1,g=2,G=3,e=4,p=5,S={1:" stack-top",2:" stack-middle",3:" stack-bottom",4:" stack-bottom-last",5:" no-stack",6:" stack-full"},K=1,l=3;var B=mstrmojo.css,a=mstrmojo.array,P=mstrmojo.chart.model.enums.EnumDSSBaseFormType;var N=4;function Z(u,w,q){var t=true,s=0;if(q.cs>1){for(s=0;s<q.cs;s++){t=t&&u[w+q.cs-s-1];}}else{t=u[w];}return t;}function V(t,s){for(var u=0,q=t.length;u<q;u++){var x=t[u];var w=s.rows[x.rows].cells[x.cells];if(w){mstrmojo.css.addClass(w,h);}}}function d(t){var w=t.indexOf('src="');if(w<0){return t;}var u=t.substring(w+5),s=u.indexOf('"'),x;u=u.substring(0,s);x=u;if(mstrApp.isDossier){x=mstrmojo.url.getFullPath(u);}else{var q=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(q&&q.getImage){x=q.getImage(u);}}return t.replace(u,x);}function o(w,u){var q="",x="#srcend",s=-1,t,z=w.split("#srcstart");z.forEach(function(AA){s=AA.indexOf(x);t=AA.split(x);t.forEach(function(AC,AB){if(AB===0&&s!==-1){AC=AC.substring(0,s);q+='<img src="'+AC+'" '+u+">";}else{q+=AC;}});});return q;}function D(t,s,q){var AA=t.outLvl,u="outlineMode",z=this.parent.outlineState,x=t._ei,w=x?(' ei="'+x+'"'):"";if(z&&z[x]){u+=t.hidden?" hiddenRow":"";}else{if((q>0&&AA>q)){u+=" hiddenRow";}}if(this.parent.hasEmptyTBody&&u.indexOf("hiddenRow")===-1){this.parent.hasEmptyTBody=false;}return' level="'+AA+'" class="'+u+'"'+w+">";}var J=(function(){var u=/\n/g,AA="<br/>",AF=/<a\s[^>]+>/gi,AE="<a ",AN='<a target="_blank" ',s="target=";var AD='<a href="',AB="",x="</a>",t="<span>",q="</span>",AK="<div>",AJ="</div>",AH='<span class="text">',AG="</span>",AC='<span rabtn class="raBtn ',z='"></span>',AI="iconRA-expand",w="iconRA-collapse",AM="<span>",AL="</span>";return function(AP,AZ,AX){var Ac=AP.v||AP.n||U,AT=AP.ts===P.DssBaseFormUrl,AW=AP.ts===P.DssBaseFormHTMLTag,Ab=AP.lv!==undefined;Ac=(AP.ts===P.DssBaseFormText||AP.mdf===1)?Ac.replace(u,AA):Ac;if(AT){if(!AB){AB=AZ?'" target="_blank">':'">';}Ac=AD+Ac+AB+Ac+x;}else{if(AW&&AZ){(Ac.match(AF)||[]).forEach(function(Ag){if(Ag.indexOf(s)===-1){Ac=Ac.replace(Ag,Ag.replace(AE,AN));}});}}if(AW){var AQ=document.createElement("div");AQ.innerHTML=Ac;var AU=AQ.querySelectorAll("img");a.forEach(AU,function(Ah){Ah.onload=function Ag(){var Ai=mstrmojo.all[AX];if(Ai){if(Ai._updateScrollbarTimer){clearTimeout(Ai._updateScrollbarTimer);}Ai._updateScrollbarTimer=setTimeout(function(){Ai.updateScrollbars();},100);}};});Ac=AQ.innerHTML;}if((AP.css&&AP.css.indexOf("hl")>-1)||AT){Ac=t+Ac+q;}if(Ab){var Ae=AP.lv,Af="&nbsp;&nbsp;&nbsp;&nbsp;",AS="",AO="",AY="",Aa;for(Aa=0;Aa<Ae;Aa++){AS+=Af;}if(AP.hcd&&AP.fi===undefined){AY=AC+(AP.epd?w:AI)+z;}else{AS+=Af;}if(AP.axis===1){AO=AM+AS+AL;}Ac=AK+AO+AY+AH+Ac+AG+AJ;}else{if(AP.outLvl&&AP.cs>1&&!AP.isLeaf){var Ad=(AP.stt&&!AP.dpt),AR=Ad?"":"icon-outline-span"+(AP.epd?" outline-expand":" outline-collapse"),AV=!Ad&&AP.epd?' collapsed="true"':"";Ac='<span class="'+AR+'"  sty="outimg" dpt="'+AP.outLvl+'"'+AV+"></span>"+Ac;}else{if(AP.expandLevel){Ac='<span class="icon-outline-span outline-collapse" expandTo="'+AP.expandLevel+'" title=""></span>'+Ac;}else{if(AP.fillerCell&&Ac==U){Ac="";}}}}return Ac;};}());mstrmojo.GridBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._RowRendTracker],{scriptClass:"mstrmojo.GridBase",markupString:'<span id="{@id}" class="mstrmojo-Grid {@cssClass}" style="{@cssText}"></span>',markupSlots:{gridContainerNode:function(){return this.domNode;}},autoFitWindow:false,tableLayout:null,numAutoHeightRows:0,cp:null,rc:0,cc:0,cws:null,rh:null,totalColWidth:0,start:0,end:0,forceFixedSizes:true,hiliteCellsMap:null,eiMap:null,init:function C(q){this._super(q);},numColumnCanMerge:0,preBuildRendering:function A(){var q=this.cp;if(!q){return ;}q.initContent();this.rc=q.rc||0;this.cws=q.colWidths||[];this.cc=this.cws.length;this.tdWidths=q.tdWidths||[];this.tdCnt=this.tdWidths?this.tdWidths.length:0;this.start=0;this.end=this.rc-1;this.numAutoHeightRows=q.getNumAutoHeightRows&&q.getNumAutoHeightRows()||0;this.hiliteCellsMap={};this.eiMap={};this.posMap=[];this.thPosMap=[];this.totalColWidth=0;},buildRendering:function b(s){var q=this._super(s);this.renderGrid();return q;},renderGrid:function F(s){var q=this.getGridContainer();this.preBuildGridTable();this.buildGridTable(q,s);this.postBuildGridTable();},getGridContainer:function H(){return this.gridContainerNode;},buildGridTable:function M(t,q){var s=this.getTableStartMarkup();var AB=this.getTableEndMarkup();if(q){this.mergeHdrsAcrossBlks=true;}var z=this.buildTableRowsMarkup(this.start,this.end,s,AB).join("");if(q){var w=document.createElement("div");w.innerHTML=z;var AA=t.firstChild,AC=AA&&AA.tBodies,u=w.firstChild.tBodies[0],x=this.matchedHdrsAcrossBlks;AA.appendChild(u);if(x&&x.length>0){V(x,AC[AC.length-2]);}}else{t.innerHTML=z;}this.markPages(this.start,this.end);},getTableStartMarkup:function E(){var s=this._getGridWidths(),q=j;q[1]=s.tableLayout;q[3]=s.totalColWidths;q[5]=this.tableCssClass?"class="+this.tableCssClass:"";q[7]="<colgroup>"+s.colgroup+"</colgroup>";if(this.tbodyStyle){q[8]='<tbody style="'+this.tbodyStyle+'">';}return q.join("");},getTableEndMarkup:function O(){return"</tbody></table>";},_getGridWidths:function R(){var AC={};var x="",t=[],AB="fixed",s=this.cws,z=s.length;if(z){x=0;t=[];for(var u=0;u<z;u++){if(s[u].w!==""){x+=parseInt(s[u].w,10);}}for(u=0;u<z;u++){var q=s[u];if(q.w!==""&&!this.autoFitWindow&&!this.autoFitContent){var AA=parseInt(q.w,10);if(mstrmojo.dom.isIE7){if(AA===0){t.push('<col style="width:0%;display:none"></col>');}else{t.push('<col style="width:'+(AA/x*100)+'%"></col>');}}else{if(mstrmojo.dom.isWK&&AA===0){t.push('<col style="width:-1px"></col>');}else{t.push('<col style="width:'+q.w+'"></col>');}}}else{t.push("<col />");AB="auto";}}this.totalColWidth=x;}AC.colgroup=t.join("");AB=this.tableLayout||AB;if(this.autoFitWindow){AB=this.tableLayout||AB||"fixed";x="100%";}else{if(AB==="fixed"){x+="px";}else{x="auto";}}AC.totalColWidths=x;AC.tableLayout=AB;return AC;},_CELL_MARKUP:['<td rowSpan="',null,'" colSpan="',null,'" class="',null,'" ei="',null,'" style="',null,'" r="',null,'">',null,"</td>"],buildTableRowsMarkup:function I(AK,Af,AD,z,s){var Ax=[],Ae=0;Ax[Ae++]=AD||"<table><tbody>";var AW=this.cp,Aw=this.acws,Az=this.rowMerge,BA=this.headerOffset,BB=this.mxPos,A3=!!AW.gemh,BE=AW.getRowHeight(),q=this._CELL_MARKUP,BC=BE?'<tr style="height:'+(BE?BE+"px":"")+'">':L;var A2=true,A7=true,Aa=[],BH;var Am=function Am(BJ){var BI=-1;mstrmojo.array.forEach(Aw,function(BL,BK){BJ=BJ-BL;if(BJ<0){BI=BK;return false;}});return BI;};var AP=function AP(BK,BJ){var BI=-1;mstrmojo.hash.forEach(AW.gemh,function(BL,BM){if(BK<=BM&&BK+BJ>BM){BI=BM;return false;}});return BI;};var AJ=function AJ(BM,BN,BL){var BK="",BJ,BI;BI=BM.gemh&&BM.gemh[BN];if(BI){BJ=Am(BL);if(BI[BJ]&&BI[BJ].v===0||BB===BL){BK+=h;}}BI=BM.gsmh&&BM.gsmh[BN];if(BI){BJ=Am(BL);if(BI[BJ]&&BI[BJ].v===0||BB===BL){BK+=Q;}}return BK;};var A0,AT,Aq,AU=[],Ad,AY,x=0,Ak=0,Ab,AF,w=AW.colWidths&&AW.colWidths.length,BF=0,At=0,Ao=s||((AD&&AD.indexOf("table-layout:fixed;")!==-1)?"fixed":"auto"),AN=mstrApp.isSingleTier;if(Aw&&A3){for(Ad=0;Ad<Aw.length-1;Ad++){At+=Aw[Ad];}}At=At||this.numColumnCanMerge;if(Ao==="fixed"){A0=[];for(AT=0,Aq=this.cws.length;AT<Aq;AT++){if(window.parseFloat(this.cws[AT].w)<=0){A0[AT]=true;}else{A0[AT]=false;}}}this.matchedHdrsAcrossBlks=[];var AB=Af,BD=this.parent.isOutlineMode,Ap=this.parent.gridData,A9=Ap.maxLevel,Ag=Ap.lvlepd,AC=this.parent.id,AX=0;AW.renderingNewPage=true;for(var AZ=AK;AZ<=Af;AZ++){x=0;BH=Ae++;Ax[BH]=AZ<this.numAutoHeightRows?L:BC;var t=AW.updateCounter,Ah=AW.getRowCells(AZ);if(BD&&window.mstrApp&&mstrApp.isExporting){var AM=AW.updateCounter-t;if(AM>0){AX=AM;}if(AX>0){AX--;Ax[BH]=Ax[BH].substr(0,Ax[BH].length-1)+' extra="1">';}}var Aj=Af+1-AZ;var AR=0;AF=Az;Ab="";if(!this.mergeHdrsAcrossBlks){if(A2&&AK>0&&Ah.length<AW.colWidths.length){var Ar=AW.getUnmergedCells(AK),An;if(Ar){AR=Ar.length;}for(Ad=0,Aq=AR;Ad<Aq;Ad++){var Av=Ar[Ad],A8=Av.rs;if(A8>Aj){q[1]=Aj;q[5]=X+Av.css;}else{q[1]=A8||1;q[5]=Q+Av.css;}if(A0&&A0[Ak+x]){q[5]+=" nwFixedWidth0 ";}if(A8&&A8>1){AU.push(A8);}x+=Av.cs||1;if(Av.cet){q[5]+=" mstrmojo-selected-cell";this.addHilitePosition(Av.cet,AZ,Ad);}if(Av._ei){this.addExtraInfoMap(Av._ei,AZ,Ad);q[5]+=" pt";}q[9]="";q[13]=U;q[3]=Av.cs;if(Av._ei===undefined){An=AW.getRowCells(Av.o+(AW.cps[0]&&AW.cps[0].rc||0),true);Av=a.filterOne(An,function(BI){return BI.dpt===Av.dpt&&BI.idx===Av.idx;});}q[7]=Av._ei;q[11]=AZ;if(A3){if(AF){Ab=AJ(AW,AZ-BA,Ad);}if(!!Ab){q[5]=Ab+q[5];}else{AF=false;}Ab=AJ(AW,AP(AZ-BA,q[1]),Ad);if(!!Ab){q[5]=h+q[5];AF=true;}}Ax[Ae++]=q.join("");}A2=false;}}BF=w;Aq=Ah.length;var Ai;for(Ai=0;Ai<Aq;Ai++){BF-=Ah[Ai].cs||1;}for(Ai=0;Ai<Aq;Ai++){var AS=Ah[Ai],A6;if(AS.outLvl){var A4=D.call(this,AS,A9,Ag);Ax[BH]=Ax[BH].replace(">",A4);if(AW.updateCounter>0){Af=AB+AW.updateCounter;}}AS.colIx=BF;if(AS.rs&&AS.rs>Aj){q[1]=Aj;q[5]=h+AS.css;if(AS._ei){this.addExtraInfoMap(AS._ei,AZ,Ai);}}else{q[1]=AS.rs||1;q[5]=AS.css;}if(A0&&A0[BF]){if(AS.cs==undefined||Z(A0,BF,AS)){q[5]+=" nwFixedWidth0 ";}}if(AS.rs&&AS.rs>1){AU.push(AS.rs);}x+=AS.cs||1;if(AS.rowType!==f){q[5]+=" xtab-td ";}if(AS.cet){q[5]+="sc_"+this.parent.k;this.addHilitePosition(AS.cet,AZ,Ai);}if(AS.lv!==undefined){q[5]+=" ra ";}A6=AS.rowType;if(A6){q[5]+=S[A6]||"";var AV=AW.getRowHeight(A6);if(AV){Ax[BH]='<tr style="height:'+(AV?AV+"px":"")+'">';}}q[3]=AS.cs||1;q[7]=AS._ei!==undefined?AS._ei:"";if(AS.fs||AS._e){this.addTitleHeaderPositionMap(AZ,Ai+AR,AS);}if(AS._ei!=null){this.addPositionMap(AS._ei,AZ,Ai+AR);}q[11]=AZ;if(AS.ts===N){if(mstrApp.isDossier){AS.v=mstrmojo.url.getFullPath(AS.v);}var Ay=AS.v;if(this.imgCacheMap){var Ac=this.imgCacheMap,AY=Ay&&Ay.replace(/\\/g,"/");if(Ac.cachedImg[AY]){AS.v=Ay=Ac.baseURL+Ac.cachedImg[AY];}else{if(AY&&!Ac.unCachedImg[AY]){Ac.unCachedImg[AY]=AY;}}}else{var AE=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(AE&&AE.getImage){Ay=AE.getImage(Ay);}}if(AS.rowType){var AL=(AW.getRowHeight(AS.rowType)||AW.rh||BE),AO=AL,BG=this.tdWidths,AH=AS.colIdx,AA=0,AG=0;var Al=AW.getPadding(K),A1=AW.getPadding(l);if(AS.rowType===f||AS.rowType===e){AG=AL>(Al+A1)?(AL-Al-A1):0;}else{if(AS.rowType===g||AS.rowType===G){AG=AL>2*A1?(AL-2*A1):0;}else{if(AS.rowType===p){AG=AL>(A1*2)?(AL-A1*2):0;}}}if(AH!=="undefined"&&AH>-1&&BG&&BG.length>AH){var AQ=BG[AH]&&BG[AH].w;if(AQ!=="undefined"){AA=parseInt(AQ,10);}}var u=AA>30?(AA-30):0;q[13]='<div><div style="top:'+(-parseInt(AO/2,10))+"px;height:"+(AL-1)+"px;line-height:"+(AL-1)+'px !important;">&nbsp;<img style="max-height:'+AG+"px; max-width: "+u+'px;" src="'+Ay+'"></img></div></div>';}else{q[9]="";var As="",AI=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model,Au=AI.getZoomFactor();if(Au!=1){As='onload="this.style.height='+Au+"*this.offsetHeight+'px';\"";}if(BD){if(Ay.indexOf("#srcstart")!==-1){AS.v=o(Ay,As);}else{AS.v='<img src="'+Ay+'" '+As+"></img>";}q[13]=J(AS,AN,AC);}else{q[13]='<img src="'+Ay+'" '+As+"></img>";}if(AS.css&&AS.css.indexOf("hl")>-1){q[13]="<span>"+q[13]+"</span>";}}}else{q[9]="";if(BD&&AS.v&&AS.v.indexOf("#srcstart")>=0){AS.v=o(AS.v,"");q[13]=J(AS,AN,AC);}else{if((mstrApp.isDossier||mstrApp.useBinaryFormat)&&AS.v&&AS.v.indexOf("img")>=0){AS.v=d.call(this,AS.v);}q[13]=J(AS,AN,AC);}}if(Ai<At){if(AZ===AK&&this.mergeHdrsAcrossBlks){var A5=this.rowHdsAcrossBlks;if(A7&&AS.v&&A5&&A5[Ai]){if(AS.v===A5[Ai].v){q[1]=AS.rs||1;q[5]=Q+AS.css;q[13]="";this.matchedHdrsAcrossBlks.push(A5[Ai]);}else{A7=false;}}}if(A3){if(AF){Ab=AJ(AW,AZ-BA,BF);if(!!Ab){q[5]=Ab+q[5];if(Ab.indexOf(Q)>=0&&AZ-BA>1){q[13]=U;}}else{AF=false;}Ab=AJ(AW,AP(AZ-BA,q[1]),BF);if(!!Ab){q[5]=h+q[5];AF=true;}}}if(q[1]>=Aj&&AS.v){Aa.push({rows:AZ-AK,cells:Ai,v:AS.v});}}BF+=AS.cs||1;Ax[Ae++]=q.join("");}Ax[Ae++]="</tr>";for(Ai=AU.length-1;Ai>=0;Ai--){AY=AU[Ai];if(AY<=1){AU.pop();}else{AU[Ai]=--AY;}}Ak=AU.length;}Ax[Ae++]=z||"</tbody></table>";this.rowHdsAcrossBlks=Aa;return Ax;},addHilitePosition:function(s,t,q){var u=this.hiliteCellsMap[s];if(!u){this.hiliteCellsMap[s]={pos:[],nodes:[]};}this.hiliteCellsMap[s].pos.push({row:t,cell:q,page:0});},addExtraInfoMap:function(s,q,t){if(!this.eiMap[s]){this.eiMap[s]=[];}this.eiMap[s].push({row:q,cell:t,page:0});},addPositionMap:function(s,q,t){if(!this.posMap[s]){this.posMap[s]={row:q,cell:t,page:0};}},addTitleHeaderPositionMap:function(q,t,s){this.thPosMap.push({row:q,cell:t,page:0,obj:s});},clearHilites:function(u){var AA=this.hiliteCellsMap[u],x=AA&&AA.nodes,w=this.parent;if(x){if(x.length==0&&AA.pos){x=this.getNodesByPositions(AA.pos);}for(var t=0,s=x.length;t<s;t++){var z=x[t],q=w.getCellForNode(z);if(q){delete q.cet;}B.removeClass(z,"sc_"+w.k);}this.hiliteCellsMap[u].nodes=[];}},setHilites:function(s,t){B.addClass(t,"sc_"+this.parent.k);if(!this.hiliteCellsMap[s]){this.hiliteCellsMap[s]={pos:[],nodes:[]};}this.hiliteCellsMap[s].nodes.push(t);var q=this.parent.getCellForNode(t);if(q){q.cet=s;}},getNodesByPositions:function(w){var u=this.tableNode,q=[];for(var t in w){var s=w[t];q.push(u.tBodies[0].rows[s.row].cells[s.cell]);}return q;},preBuildGridTable:function W(){},postBuildGridTable:function k(){this.addSlots({tableNode:this.gridContainerNode&&this.gridContainerNode.firstChild});if(this.tableNode&&mstrApp&&mstrApp.isSingleTier){Y.redirectUrlToFormWrapper(this.tableNode);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var C=mstrmojo.dom,B=mstrmojo.hash,E=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){E.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function D(J){var K=this.domNode;if(this.hasRendered&&K){K.className=K.className.replace(J.valueWas,"")+" "+J.value;}},onclick:mstrmojo.emptyFn,ontouchend:function I(J){this.onclick(J);}});mstrmojo.Button.newIconButton=function H(L,O,M,J,N){var K={scriptClass:"mstrmojo.Button",title:L,cssClass:O,text:"",onclick:M};if(J){K.bindings=J;}B.copy(N,K);return K;};function F(M,N,J,P){var L=[];if(J){L.push(J);}var O=P&&P.cssClass;if(O){L.push(O);delete P.cssClass;}var K={scriptClass:"mstrmojo.Button",cssClass:L.join(" "),text:M};if(N){K.onclick=N;}return B.copy(P,K);}mstrmojo.Button.newInteractiveButton=function G(M,N,P,O){var L={glowClass:"glow"};if(P&&(C.isFF||C.isWK)){B.copy({onmousedown:function J(){E.applyShadow(this.domNode,0,0,10,P);},onmouseup:function K(){E.removeShadow(this.domNode);}},L);}return F(M,N,"mstrmojo-InteractiveButton",B.copy(O,L));};mstrmojo.Button.newWebButton=function A(K,J,M,L){return F(K,J,"mstrmojo-WebButton"+(M?" hot":""),L);};mstrmojo.Button.newActionButton=function(K,L,M){var J=mstrmojo.Button.newWebButton(K,L,false,M);J.cssClass=J.cssClass+" action-button";return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var F=mstrmojo.array,C=mstrmojo.css,G=mstrmojo.string,B=mstrmojo.dom,A="unselected",D="block";function H(L){var K=mstrApp.getConfiguration();if(L===decodeURI(L)){L=encodeURI(L);}if(K&&L&&L.indexOf("://")===-1){L=K.getHostUrlByProject(mstrApp.getCurrentProjectId())+L;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(L)):L;}mstrmojo.ImageToggle=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ImageToggle",unset:null,useAnimation:true,markupString:'<div class="mstrmojo-ImageToggle {@cssClass}" style="{@cssText}" tabindex="{@tabIndex}"  mstrAttach:click,blur,keydown ></div>',tabIndex:0,markupMethods:{onimageListChange:function(){var P=this.imageList&&this.imageList.slice(),M=this,N=this.unset,L,O,K;if(!G.isEmpty(N)&&P){P.push({n:N,v:N,_ust:true});}if(this.domNode&&P){M.domNode.innerHTML="";M.domNode.style.minHeight=Math.min(20,M.height)+"px";M.domNode.style.minWidth=Math.min(20,M.width)+"px";M._loadedImgs=P.length;mstrmojo.array.forEach(P,function(R,Q){O=document.createElement("div");O.style.cssText="display:none;font-size:0px !important;line-height:"+Math.min(30,M.height)+"px !important;";K=document.createElement("img");K.alt=K.title=R.v;K.style.verticalAlign="middle";K.style.maxHeight=M.height+"px";K.style.maxWidth=(M.width-1)+"px";if(!mstrmojo.dom.isIE){K.onerror=function(){this.src="../images/image_not_found.jpg";};}O.appendChild(K);M.domNode.appendChild(O);K.src=(R.n&&H(R.n))||"../images/image_not_found.jpg";if(R._ust){M.ustImgIdx=Q;}M._imgs[Q]=O;});this._setSelectedValue();}},onvalueChange:function(){this._setSelectedValue();}},imageList:null,value:null,selectedIndex:-1,preBuildRendering:function E(){if(this._super){this._super();}this._imgs=[];},_setSelectedValue:function I(){var M=this,L=this.selectedIndex,O=this.imageList;if(O){if(O[L]){M._imgs[L].style.display="none";}F.forEach(this.imageList,function(P,Q){if(P.v==M.value){C.removeClass(M.domNode,A);M.selectedIndex=Q;M._imgs[Q].style.display=D;return ;}});if(this.selectedIndex===-1){if(!this.unset){C.addClass(this.domNode,A);}else{var N=this._imgs[this.ustImgIdx],K=N.lastChild;K.alt=K.title=this.value;N.style.display=D;}}}},onclick:function J(){var M=this.imageList,N=M&&M.length,O=300,V=this.selectedIndex,L=V,K=this.domNode,S,R,Q,U,P=this;Q=(V===-1&&this.ustImgIdx!==null)?this._imgs[this.ustImgIdx]:this._imgs[V];V=(V+1)%N;U=this._imgs[V];C.removeClass(K,A);this.selectedIndex=V;if(this.useAnimation){R=new mstrmojo.fx.FadeIn({duration:O,interval:(B.isIE8?(O/3):(O/10)),target:U,preStart:function(){this.target.style.display=D;}});S=new mstrmojo.fx.FadeOut({duration:O,interval:(B.isIE8?(O/3):(O/10)),target:Q,onEnd:function(){Q.style.display="none";if(L===-1){P._imgs.splice(P.ustImgIdx,1);K.removeChild(Q);delete P.ustImgIdx;}R.play();}});if(Q){S.play();}else{R.play();}}else{if(Q){Q.style.display="none";if(L===-1){P._imgs.splice(P.ustImgIdx,1);K.removeChild(Q);delete P.ustImgIdx;}}U.style.display=D;}this.value=this.imageList[V].v;},onkeydown:function(L){var K=L.hWin,M=L.e||K.event;if(M.keyCode===mstrmojo.Enum_Keys.SPACE){mstrmojo.dom.preventDefault(K,M);this.onclick();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocRectangle=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocRectangle",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocRectangle" title="{@tooltip}" style="{@domNodeCssText}"></div>',markupMethods:{onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}},onwidthChange:function(){if(this.width){this.domNode.style.width=this.width+"px";}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["RW","B","background-color","fx"]},preBuildRendering:function B(){var E=this._super(),D=this.defn;if(D.r){this.domNodeCssText+=mstrmojo.css.buildRoundCorners(D.r,D.topc);}return E;},postBuildRendering:function(){var F=this._super();var E=this.fmts;if(E){var D=E.border||E["border-width"],G=D&&(parseInt(D,10)/72*this.model.dpi);if(G){if(E.height==="100%"){this.set("height",this.domNode.clientHeight-2*G);}if(E.width==="100%"){this.set("width",this.domNode.clientWidth-2*G);}}}return F;},update:function C(D){if(this.thresholdId||D.data.tid){delete this.fmts;}this.thresholdId=D.data.tid;this.set("visible",!D.data.hidden);if(this._super){this._super(D);}},getFormats:function A(){var D=this._super(),E="z-index";if(D&&this.defn&&this.defn.fmts&&D[E]!=this.defn.fmts[E]){D[E]=this.defn.fmts[E]||D[E];}return D;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var E=mstrmojo.Widget;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function D(){return this.domNode.firstChild;},containerNode:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:E.visibleMarkupMethod,onheightChange:E.heightMarkupMethod,onwidthChange:E.widthMarkupMethod,onvalueChange:function F(){this.selectedNode.innerHTML=this.value||"";},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",postBuildRendering:function B(){this._super();this.getPopupList().set("items",this.items);var G=this.selectedIndex,H=this.selectedIndices;if(G!==undefined){this.set("selectedIndex",G);}if(H!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(H||{}));}},onitemsChange:function C(){var G=this.getPopupList();if(G){G.set("items",this.items);}},onPopupWidgetOpened:function(){var G=this.getPopupList();if(G&&(!G.items||G.items.length===0)){G.close();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image class="{@imgCssClass}" src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||"../javascript/mojo/css/images/1ptrans.gif";}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var b=mstrmojo.hash,h=mstrmojo.array,g=mstrmojo.boxmodel,e=mstrmojo.dom;function A(l,p,k){var o=l.listSelector;if(o){o[p](l,l.itemsContainerNode,k);}}function L(l,k){var o=l.lastPagePos;if(!o||o.dragId!==k){o=g.offset(l.itemsContainerNode);o.dragId=k;l.lastPagePos=o;var p=l.scrollboxNode;l.lastScrollPos={left:p.scrollLeft,top:p.scrollTop,width:p.clientWidth,height:p.clientHeight};}}function O(p,t,l){var o=t&&t.node;if(o===p.dropCueNode||o===p.dropCueNode.firstChild){return p.dropCuePos;}var q=p.listMapper;var k=q&&q.whereDrop(p,p.itemsContainerNode,o,t.pos,{left:p.lastPagePos.left-p.lastScrollPos.left,top:p.lastPagePos.top-p.lastScrollPos.top,width:p.lastScrollPos.width,height:p.lastScrollPos.height});var s=p.dropCuePos;return((l!==false)&&s&&k&&(s.idx===k.idx)&&(s.left===k.left)&&(s.top===k.top))?s:k;}var j="attachEventListener";function D(l,k){if(l.makeObservable){k=k||[];if(!k[j]){mstrmojo.hash.make(k,l.itemsScriptClass||mstrmojo.Arr);}}return k;}function H(l,k){if(k&&k[j]){l._sub_its=k;l._sub_add=k[j]("add",l.id,"preadd");l._sub_rmv=k[j]("remove",l.id,"preremove");}}function G(k){if(k._sub_its){var l=mstrmojo.publisher;l.unsubscribe(k._sub_add);l.unsubscribe(k._sub_rmv);delete k._sub_add;delete k._sub_rmv;delete k._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var l=this.dropCueNode,k=l&&l.style;if(!k){return ;}var p=this.dropCuePos,o=!!p;if(o){k.left=p.left+"px";k.top=p.top+"px";}k.display=o?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function a(q){this._super(q);this.items=this.initItems(this.items);var p=this.selectedIndices,k=this.selectedIndicesList,l=this.selectedIndex,s=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(p||k||(l>-1)||s){this.initSelections(p,k,l,s);}if(this.postInitItems){this.postInitItems();}},initItems:function I(k){return D(this,k);},preBuildRendering:function X(){var q=this.listBuilder,u=q.newContext(this);this.ctxtBuilder=u;var l=this.markupSlots,p=!!(this.renderOnScroll&&this.renderBlockSize&&l&&l.scrollboxNode),o=this.items,k=(o&&o.length)||0,s=p?this.firstRenderBlockSize:k,t=p?this.firstRenderBlockSize:0;this._eros=p;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(o,q,this,u,s,t).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var q=this.listMapper;if(q&&q.postBuildRendering){q.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var t=this.id;this._cb_scroll=function(){var u=mstrmojo.all[t];u.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var o=0,l=["itemsEffect","scrollEffect"],k=l.length;o<k;o++){var s=l[o],p=this[s];if(p&&p.constructor===Object){p=mstrmojo.insert(mstrmojo.hash.clone(p));p.widget=this;this[s]=p;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function Y(p){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var l=0,o=["itemsEffect","scrollEffect"],k=o.length;l<k;l++){var q=this[o[l]];if(q&&q.isPlaying){q.cancel();}}this._super(p);},pauseScrollRendering:function P(o,k,l){if(o!==false){o=true;}if(this.paused===!!o){return ;}this.paused=!!o;if(o){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(k,l);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var k=this;this._fillTmr=self.setTimeout(function(){k.fill();k=null;},50);}}if(this._super){this._super();}},fill:function d(k,q){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var s=(this.items&&this.items.length)||0;if(!s){if(q){q();}}else{var o=this.scrollboxNode,t=this.itemsContainerNode,p=mstrmojo.boxmodel.offset(t,o),w=this.listMapper,u=w.findScrollRange(t,s,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||o.scrollTop,o.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||o.scrollLeft,o.clientWidth,p.left,p.top);if(this.fillAt(u.start,u.end)){if(k){k();}var l=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[l].fill(k,q);},100);}else{if(q){q();}}}},fillAt:function M(o,l){var k=this.listMapper;if(k){return k.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,o,l,this.renderBlockSize);}else{return false;}},add:function R(l,k){if(!l||!l.length){return -1;}var o=this.items;if(k==null){k=b.min(this.selectedIndices,false,true);if(k!==null&&k!==undefined){k++;}}if(k==null||k===-1){k=(o&&o.length)||0;}if(o&&o.add){o.add(l,k);}else{this.set("items",o?h.insert(o.concat(),k,l):l);}return k;},preadd:function B(o){if(this.hasRendered){var s=this.listMapper;if(s){s.onadd(this,this.itemsContainerNode,this.ctxtBuilder,o);}var q=this.listBuilder;if(q){q.onadd(this,this.ctxtBuilder,o);}var l=this.listSelector;if(l){l.onadd(this,o);}if(this._eros){this.onscroll();}else{var p=o.index,k=o.value.length;this.fillAt(p,p+k-1);}}if(this.onadd){this.onadd(o);}if(this._super){this._super(o);}},remove:function V(k){if(k==null){return -1;}if(k.constructor!==Array){return this._remove(k);}var o=this.items;if(o){var l;if(o.remove){for(l=k.length-1;l>-1;l--){o.remove(k[l],1);}}else{o=o.concat();for(l=k.length-1;l>-1;l--){o.splice(k[l],1);}this.set("items",o);}return k[0];}return -1;},_remove:function V(o){var l=this.items;if(!l||(o==null)){return -1;}var k;if(!isNaN(o)){k=o;}else{k=this.itemIndex(o);}if(k>-1){if(l.remove){l.remove(k,1);}else{l=l.concat();l.splice(k,1);this.set("items",l);}}return k;},duplicate:function Z(s,l,o){var p=this.items,k=-1;if(!p||(s==null)){return -1;}if(!isNaN(s)){if(l===null||l===undefined){l=s+1;}s=p[s];}else{if(l===null||l===undefined){l=this.itemIndex(s)+1;}}if(s){var q;q=b.copy(o,b.clone(s));k=this.add([q],l);}return k;},preremove:function N(l){if(this.hasRendered){var p=this.listMapper;if(p){p.onremove(this,this.itemsContainerNode,this.ctxtBuilder,l);}var o=this.listBuilder;if(o){o.onremove(this,this.ctxtBuilder,l);}var k=this.listSelector;if(k){k.onremove(this,l);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(l);}if(this._super){this._super(l);}},move:function S(p,w){function t(z,x){return w>=z&&w<=z+x;}var u=(this.items&&this.items.length)||0;if(w===-1||w==null||isNaN(w)){w=u;}else{w=Math.min(w,u);}var o,k,s,q;if(p.constructor===Array){k=p;s=p;q=(k&&k.length)||0;if(t(p[0],p.length)){return false;}o=h.get(this.items,p);}else{if(typeof (p)==="object"){o=[p];q=1;k=this.itemIndex(o[0]);s=[k];if(t(k,1)){return false;}}else{k=p;s=[p];q=1;if(t(k,1)){return false;}o=[this.items[k]];}}for(var l=0;l<q;l++){if(s[l]<=w){w--;}}if(o[0]!=null){this.remove(k);this.add(o,w);}return true;},itemIndex:function F(k){if(k==null){return -1;}var l=this.itemIdField;return l?h.find(this.items,l,k[l]):h.indexOf(this.items,k);},prechange:function U(p){if(this.hasRendered){var l=[this.listBuilder,this.listMapper];for(var q=0,k=l.length;q<k;q++){var s=l[q];if(s&&s.onchange){s.onchange(this,this.itemsContainerNode,this.ctxtBuilder,p);}}}},makeObservable:false,_set_items:function J(s,k){var q=this.items;k=this.initItems(k);this.items=k;if(q!==k){var p=this,o=function(){if(p.autoHide){p.set("visible",!!(k&&k.length));}p=null;},l=this.hasRendered;if(l){this.refresh(o);}else{o();}}return q!==k;},premousedown:function f(k){A(this,"premousedown",k);},premouseup:function Q(k){A(this,"premouseup",k);},scrollTo:function W(l){var k,o=this.listMapper;if(o&&o.toItem){if(!isNaN(l)){k=l;}else{k=this.itemIndex(l);}if(k>=0){o.toItem(this,k);}}},draggable:false,getDragData:function(q){L(this,q.id);var o=O(this,q.src),l=o&&o.idxActual;if((l>-1)&&this.selectedIndices[l]){var p=this.sortSelectedIndices(),k=h.get(this.items,p)||[];switch(k.length){case 1:return b.copy({html:k[0][this.itemDisplayField],index:p[0]},b.copy(k[0]));case 0:return null;default:return b.copy({html:k.length+" selections",indices:p},k);}}},dropZone:false,ondragenter:function(k){L(this,k.id);this.set("dropCuePos",O(this,k.tgt));},ondragover:function(k){this.set("dropCuePos",O(this,k.tgt));},ondragleave:function(k){this.set("dropCuePos",null);},isDragValid:function C(k){return k&&k.src&&k.src.data;},ondragstart:function(k){if(!(k&&k.src&&k.src.data)){return false;}},allowCopy:false,ondragend:function(p){var l=p&&p.tgt,k=l&&l.widget;if(k===this){}else{if(this.tree&&k&&k.tree===this.tree){if(!this.allowCopy||!e.ctrlKey(l.hWin,l.e)){var o=p.src&&p.src.data;if(o&&(o.indices||(o.index!==null))){this.remove(o.indices||o.index);}}}}},ondrop:function(x){var AB=x&&x.src,w=AB&&AB.data;if(w){var o=O(this,x.tgt,false),z=o&&o.idx,p=(w&&w.constructor===Array),l=this.sortSelectedIndices();var t=this.items;z=Math.min(z,t&&t.length)||0;var AA=true;if(AB.widget===this){AA=this.move(l,z);h.forEach(l,function(s){if(s<=z){z--;}});}else{this.add(p?w:[w],z);}if(AA){var u=p?w.length:1,k={};for(var q=0;q<u;q++){k[z+q]=true;}this.set("selectedIndices",k);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(H,I);}else{mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);}},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget");mstrmojo.StickySections=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.StickySections",markupString:'<div id="{@id}" style="{@cssText};overflow:hidden"><div class="mstrmojo-StickySections {@cssClass}">{@currentSectionTitle}</div></div>',oncurrentSectionTitleChange:function B(C){this.domNode.lastChild.innerHTML=this.currentSectionTitle;},onMove:function A(G){var F=0;if(G.isNextRowNewSection){var C=G.position,D=G.rowStart,E=(D>C)?(this.domNode.offsetHeight+1):0;F=(D-C)-E;}mstrmojo.dom.translate(this.domNode.lastChild,0,F,0,"",true);if(G.sectionName&&G.sectionName!==this.currentSectionTitle){this.set("currentSectionTitle",G.sectionName);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(W,R){var V=W?[W]:(this.children||[]),O=V.length,S;for(S=O-1;S>-1;S--){var Q=V[S],P=Q&&Q.domNode;if(P){var U=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===U){U.removeChild(P);}}}return this._super(W,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var X=O&&O.domNode;if(!X){return ;}var P=this.defaultChildSlot,W=O.slot||P,Z=this[W],Q=this.children;if(!Z){if(X.parentNode){X.parentNode.removeChild(X);}}else{if(X.parentNode===Z){return ;}if(!this.preserveChildDomOrder){Z.appendChild(X);}else{var R,V;for(V=Q.length-1;V>=0;V--){var Y=Q[V];if(Y===O){break;}if(W===(Y.slot||P)){var a=Y.domNode;if(a&&a.parentNode===Z){R=a;}}}if(R){Z.insertBefore(X,R);}else{Z.appendChild(X);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,U;for(U=0;U<S;U++){if(!Q[U].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){var regExH=/"height", "[0-9.]+"/g;var regExW=/"width", "[0-9.]+"/g;var regExH1=/height="?[0-9.]+"?/g;var regExW1=/width="?[0-9.]+"?/g;mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable","mstrmojo._IsSelectorTarget");mstrmojo.DocVisualization=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget],{scriptClass:"mstrmojo.DocVisualization",markupString:'<div id={@id} class="mstrmojo-docvisualization" title="{@tooltip}" style="{@domNodeCssText}">{@htmlText}</div>',formatHandlers:{domNode:["RW","T","B","fx"]},update:function update(node){if(this._super){this._super(node);}var d=node.data;this.htmlText=d.htmlText;this.jsText=d.jsText;this.selData=d.selData;this.ctrLink=d.ctrLink;this.vp=d.vp;this.eg=d.eg;if(this.eg){this.htmlText=this.eg;}},preBuildRendering:function(){if(this._super){this._super();}var fmts=this.getFormats();if(!fmts){return ;}var h=fmts.height;if(h){h=h.replace("px","");}var w=fmts.width;if(w){w=w.replace("px","");}if(this.jsText){this.jsText=this.jsText.replace(regExH,'"height", "'+h+'"').replace(regExW,'"width", "'+w+'"');}},postBuildRendering:function pstBldRnd(){if(this._super){this._super();}eval(this.jsText);},resize:function(){if(this.eg){return ;}var embedNode=this.domNode.firstChild.firstChild.firstChild;if(!embedNode){return ;}var fmts=this.getFormats();var h=fmts.height;if(h){h=h.replace("px","");}var w=fmts.width;if(w){w=w.replace("px","");}if(mstrmojo.dom.isIE){embedNode.firstChild.setAttribute("height",h);embedNode.firstChild.setAttribute("width",w);}else{embedNode.innerHTML=embedNode.innerHTML.replace(regExH1,'height="'+h+'"').replace(regExW1,'width="'+w+'"');}},makeSelections:function(selections){var shuffledData={},i,j,attId,e;for(i=0;i<selections.length;i++){var attIdI=selections[i].attId;if(!shuffledData[attIdI]){shuffledData[attIdI]=[];}shuffledData[attIdI]=shuffledData[attIdI].concat(selections[i].values);}var sep="\u001E",sep1="\u001F";var ckJoined="",eidJoined="",cklJoined="";var tksArray=[];for(attId in shuffledData){var sd=this.getSelectionData(attId);if(!sd){continue;}var ctrLink=this.ctrLink[attId];var values=shuffledData[attId];if(sd&&values&&values.length>0){sd.sel=values;sd.ias=false;for(e in values){if(e==="u;"){sd.ias=true;break;}}}if(ctrLink.gbTargets){var t=ctrLink.targets=[],gbt=ctrLink.gbTargets,cgbmap=this.model.getCGBMap();for(j=0;j<gbt.length;j++){var targetKey=cgbmap[gbt[j]];if(targetKey){t.push(targetKey);}}delete ctrLink.gbTargets;}ckJoined+=ctrLink.ctxt+sep1;eidJoined+=values.join(sep)+sep1;cklJoined+=ctrLink.ck+sep1;tksArray=tksArray.concat(ctrLink.targets);}ckJoined=ckJoined.substring(0,ckJoined.length-1);eidJoined=eidJoined.substring(0,eidJoined.length-1);cklJoined=cklJoined.substring(0,cklJoined.length-1);if(tksArray.length===0){return ;}var evt={ck:ckJoined,eid:eidJoined,src:this.k,tks:tksArray.join(sep),type:this.defn.t,ctlKey:cklJoined,include:true,isDocVis:true};this.model.slice(evt);},getAllSelectionData:function(){return this.selData;},getSelectionData:function(attId){var selData=this.selData,k;if(selData&&selData.attl){var attl=selData.attl;if(attId){return attl[attId];}return attl[attl.keys()[0]];}},saveVisProps:function(widgetPropsXml){mstrApp.docModel.updateUnitFormat(this,1,{FormattingWidget:{WidgetProps:widgetPropsXml}},{success:function(){}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" title="{@title} "mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;},ontextChange:function(){var C=this.text;C=B.isEmpty(C)?"":C.toString();this.domNode.innerHTML=this.allowHTML?C:B.encodeHtmlString(B.decodeHtmlString(C),true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(E,C){if(this.autoHide){this.set("visible",(C!==null)&&(C!=="")&&(C!==undefined));}var D=this.text;this.text=C;return(D!==C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.BarcodeReader","mstrmojo._IsAndroidInputControl","mstrmojo.android._HasPreviewButton");var A=mstrmojo.array;mstrmojo.android.inputControls.BarcodeDIC=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsAndroidInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.BarcodeDIC",markupString:"<div></div>",showInPopup:function(){var C=this;var E={success:function(F){if(F!==""){if(!!C.dic.em){C.value=C.dic.vls[parseInt(F,10)].v;}else{C.value=F;}C.applyChanges();}},failure:function(F){}};var D={barcodeDIC:true};if(!!C.dic.em){var B=[];A.forEach(C.dic.vls,function(G,F){B[F]=G.m||G.v;});D.vls=B;}mstrmojo.BarcodeReader.readBarcodes(D,E,this.popupTitle);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo._IsAnchorable");var B=1,H=2,E=3,G=4;var F="title",D="content";mstrmojo.VisTextTooltip=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsAnchorable],{scriptClass:"mstrmojo.VisTextTooltip",left:0,top:0,zIndex:10,boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:"mstrmojo-vis-tip",anchorOffset:1,anchorOrientation:"h",anchor:null,boundary:null,tipNodeColor:"#ffffff",utils:mstrmojo.VisChartUtils,touchAreaType:D,markupString:'<div id="{@id}" class="{@cssClass}" style="top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;{@cssText};"><div class="mstrmojo-vis-text-tooltip" style="display: block"></div><div class="mstrmojo-vis-tip" style="display: block"></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},tipNode:function(){return this.domNode.childNodes[1];}},toggle:function A(I){if(I){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},updateContent:function(I,K,J){this.fillContent(I,K,J);this.positionDialog();},fillContent:function C(I,K,J){this.anchor=I;this.touchAreaType=K;this.domNode.firstChild.innerHTML=J||this.anchor.innerText;this.toggle(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.css","mstrmojo.string");function A(C,B){return mstrmojo.hash.copy(B,{label:"",tabIndex:"",cssDisplay:"inline",name:null,markupString:'<span id="{@id}" class="'+C+' {@cssClass}" style="{@cssText}" title="{@tooltip}"><input id="{@id}_input"  type="{@type}" name="{@name}" value="{@value}" tabIndex="{@tabIndex}" mstrAttach:click tstid="{@tstid}"/><label for="{@id}_input">{@label}</label></span>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},labelNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onenabledChange:function(){this.inputNode.disabled=!this.enabled;mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,"disabled");},onlabelChange:function(){this.labelNode.innerHTML=mstrmojo.string.encodeHtmlString(this.label);},oncheckedChange:function(){this.inputNode.checked=this.checked;}},checked:false,preclick:function(){this.set("checked",this.inputNode.checked);},isChecked:function(){return this.inputNode.checked;}});}mstrmojo.CheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox",{scriptClass:"mstrmojo.CheckBox",type:"checkbox"}));mstrmojo.ImageCheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox mstrmojo-ImageCheckBox",{scriptClass:"mstrmojo.CheckBox",type:"image",cssDisplay:"block",preclick:function(){this.set("checked",!this.checked);},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.oncheckedChange=function(){mstrmojo.css.toggleClass(this.inputNode,["checked"],this.checked);};},postBuildRendering:function(){this.inputNode.src=this.src||"../images/1ptrans.gif";if(this._super){return this._super();}return true;}}));mstrmojo.RadioButton=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-RadioButton",{scriptClass:"mstrmojo.RadioButton",type:"radio",postBuildRendering:function(){if(mstrmojo.dom.isIE){this.inputNode.checked=this.checked;}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.DocDataService","mstrmojo.mstr.EnumWebAPIErrorCodes");var G=mstrmojo.hash.copy,S=mstrmojo.func,X=S.wrapMethods,Y=mstrmojo.mstr.EnumWebAPIErrorCodes;var K=1,E=2,A=3;var P={FIRST:1,MIDDLE:2,LAST:3};var O={BUSY:1,INTERIM:2,DONE:3,SILENT:4,CANCELED:5};var F=G(mstrmojo.DocDataService.SUPPRESS_DATA,{preserveUndo:true,config:{silent:true}});function B(Z,b,a){if(b.stid==="undefined"){a.submission=function(g,d,e){var h=e.params,f=JSON.parse(h.params);f.actions[0].stid=Z.action===K?Z.undoStateId:Z.redoStateId;h.params=JSON.stringify(f);};}return a;}function H(a,f){var b=a.mgr;f.disablePU=true;var e=B(a,f,{success:function d(){a.state=O.DONE;},failure:function Z(){b.onFailure();}});a.state=O.SILENT;b.dataService.submitUpdates(f,e,F);b.onSuccess(a);}function W(l,f){var k=l.urInfo,j=k.puKeys,t=k.puObjs,g=k.puFilters,o=l.mgr,h=o.model,p=o.dataService;if(j||t){if(j){f.partialRetrieval={nodes:j,filters:g};}if(t){h.addUpdateObjects(f,t);}}else{f.disablePU=true;}var d=B(l,f,{success:function s(){l.state=O.DONE;o.onSuccess(l);h.restoreUIState(l.action===K?l.undoUIState:l.redoUIState);},failure:function b(){o.onFailure();},complete:function a(){o.resetState();}}),Z=k.callback||h.getRebuildCallback(),q=X(Z,d),e=G(k.extras);if(f.act==="undo"&&e!==undefined){e.hideCancel=true;if(f.killJob){e.message=mstrmojo.desc(14586,"Canceling...");}}l.state=O.BUSY;p.submitUpdates(f,q,e);}function M(d){var Z=d.urInfo,a=d.mgr.model;if(!Z.extras){var b=(Z.treesToRender!==undefined)?Z.treesToRender:d._treesFromRes;if(!Z.disablePU&&!d._hasFullUpdate&&(!Z.puKeys||!Z.puKeys.length)){b=0;Z.callback=X(a.getDatasetsUpdateCallback(),Z.callback);}Z.extras={style:{params:{treesToRender:b}}};}}mstrmojo.vi.controllers.UICmd=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmd",mgr:null,redoStateId:null,undoStateId:null,execute:mstrmojo.getMissingFn(),discard:mstrmojo.emptyFn,isUntracked:false,action:null,state:O.INTERIM,urInfo:null,getStateValue:function V(a,Z){return this.action===K?Z:a;},init:function Q(Z){G(Z,this);this._treesFromRes=0;this.urInfo=this.urInfo||{};this.submitCount=0;},undoRedo:function I(g){var b=this,e,a=this.urInfo,Z=a.silent,h,d=this.mgr,f=d.dataService;if(b.action===A){e={act:"redo",stid:b.redoStateId};h=a.redo;}else{if(b.action===K){e={act:"undo",stid:b.undoStateId,killJob:g};h=a.undo;}else{d.handleError();}}if(h){f.blockRequests=true;try{Z=!!h.call(b)||Z;}finally{f.blockRequests=false;}}if(Z){H(b,e);}else{W(b,e);}},submitUpdate:function J(a,Z){this.submit(a.actions,a.callback,a.extras,Z);},submit:function L(e,s,d,p){var k=this,l=k.mgr,g=l.model,o=l.dataService,j=mstrmojo.array.ensureArray(e);s=s?G(s):g.getRebuildCallback();k.state=O.BUSY;function f(t,u){return !(t&&t[u]&&t[u].length);}if(k._hasFullUpdate||j.some(function(t){return t.disablePU;})||j.every(function(u){var w=u.partialRetrieval,t=u.partialUpdate;return f(w,"nodes")&&f(t,"nodes")&&f(t,"selectors")&&f(t,"objects");})){k._hasFullUpdate=true;}S.override({submission:function b(){if(k.submitCount===0){k.undoStateId=o.stid;}k.submitCount++;},success:function q(z,AA){if(k.action!==E){l.handleError();}k.redoStateId=z.stid;var x=!p||p===P.LAST;if(x){k.state=O.DONE;}else{k.state=O.INTERIM;}var w=k.urInfo;if(!w.disablePU){var t=w.puKeys||[],AB=z.pukeys&&z.pukeys.split("\u001E");if(AB&&AB.length){t=t.concat(AB);var u=w.extraPuKeys;if(u){t=t.concat(u);delete w.extraPuKeys;}}if(t.length){w.puKeys=t;}}k._treesFromRes|=(z.defn?1:0)|(z.data?2:0);if(this._super){this._super(z,AA);}if(x){k.completeSubmit();}},failure:function a(t,x){var w=(d&&d.skipUICmdMgrOnFailure)||[],u=parseInt(t.code||(t.getResponseHeader&&t.getResponseHeader("X-MSTR-TaskErrorCode")||Y.UICMD_DEFAULT_ERROR),10);if(w.indexOf(u)===-1&&w.indexOf(mstrmojo.mstr.EnumWebAPIErrorCodes.E_UNUSED)===-1){l.onFailure();}if(this._super){this._super(t,x);}},canceled:function h(t){if(this._super){this._super(t);}window.setTimeout(function(){k.cancel(true);},0);},complete:function Z(){if(!p||p===P.LAST){l.resetState();}if(this._super){this._super();}}},s);o.submitUpdates(e,s,d);},submitInterim:function R(a,b,Z){this.submit(a,b,Z,P.MIDDLE);},resetCmdMgrOnComplete:function C(){this._resetMgr=true;},completeSubmit:function N(){var a=this,b=a.mgr,Z=b.model;if(!a.completed){a.completed=true;a.state=O.DONE;b.onSuccess(a);M(a);a.redoUIState=Z.getUIState();if(a.isUntracked){b.untrackLastCmd();}else{if(a._resetMgr){b.reset();}}}},cancel:function D(Z){this.state=O.CANCELED;if(this._hasFullUpdate){this._treesFromRes=3;}M(this);this.mgr.onCancel(this,Z);},submitSilent:function U(b){var e=this,f=e.mgr,d=f.model,g=f.dataService;e.state=O.SILENT;f.onSuccess(e);e.redoUIState=d.getUIState();var h={submission:function a(){e.undoStateId=g.stid;e.submitCount++;},success:function j(k){e.state=O.DONE;e.redoStateId=k.stid;},failure:function Z(){f.onFailure();}};g.submitUpdates(b,h,F);}});mstrmojo.vi.controllers.UICmd.CMD_PHASE=P;mstrmojo.vi.controllers.UICmd.CMD_STATE=O;mstrmojo.vi.controllers.UICmd.CMD_ACT_TYPE={UNDO:K,EXEC:E,REDO:A};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService","mstrmojo.vi.controllers.UICmd");var H=mstrmojo.hash.copy,U=mstrmojo.array.forEach,F=mstrmojo.vi.controllers.UICmd;var O=2,E=1,N=F.CMD_ACT_TYPE.UNDO,G=F.CMD_ACT_TYPE.EXEC,A=F.CMD_ACT_TYPE.REDO;var V=F.CMD_PHASE;var S=F.CMD_STATE;function B(){U(this._delayRemovedCmds,function(e){e.discard();});this._delayRemovedCmds=null;}function D(){this.cmds=this.cmds.concat(this._delayRemovedCmds);this._delayRemovedCmds=null;}function M(f){var e=this.cmds,g=this.pos;this._delayRemovedCmds=e.splice(g+1);if(g>=this.size-1){e.shift().discard();}e.push(f);this.pos=e.length-1;}mstrmojo.vi.controllers.UICmdMgr=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmdMgr",cmds:null,pos:-1,size:20,_delayRemovedCmds:null,controller:null,dataService:null,model:null,state:E,CMD_PHASE:V,init:function W(e){H(e,this);this.cmds=[];},execute:function J(h){if(this.state===O){this.handleError();}try{h=H(h,{mgr:this,undoUIState:this.model.getUIState(),action:G});var f=this.curCmd=new F(h);M.call(this,f);this.state=O;f.execute();}catch(g){this.reset();throw g;}},getInterimCmd:function R(){if(this.state===O){var e=this.cmds[this.pos];if(e&&e.state===S.INTERIM){return e;}}return null;},undo:function b(h){if(this.canUndo()){this.state=O;try{var f=this.curCmd=this.cmds[this.pos--];f.action=N;f.redoUIState=this.model.getUIState();f.undoRedo(h);}catch(g){this.reset();throw g;}}},redo:function P(){if(this.canRedo()){this.state=O;try{var f=this.curCmd=this.cmds[++this.pos];f.action=A;f.undoUIState=this.model.getUIState();f.undoRedo();}catch(g){this.reset();throw g;}}},onSuccess:function I(e){if(this.state===E){this.handleError();}if(e!==this.curCmd){this.handleError("Wrong command");}this.state=E;B.call(this);this.controller.onCmdMgrChanged();},onFailure:function Y(){B.call(this);this.reset();},onCancel:function L(f,g){this.state=E;var e=!!f.submitCount;if(e){this.undo(g);}else{this.pos--;}this.cmds.pop();f.discard();if(e){B.call(this);}else{D.call(this);}this.controller.onCmdMgrChanged();},untrackLastCmd:function a(){var e=this.cmds.pop();e.discard();this.pos--;this.controller.onCmdMgrChanged();},reset:function a(){U(this.cmds,function(e){e.discard();});this.cmds.length=0;this.pos=-1;this.state=E;this.controller.onCmdMgrChanged();},resetState:function X(){this.state=E;},canUndo:function d(){return this.state===E&&this.pos>=0;},canRedo:function Q(){return this.state===E&&this.pos<this.cmds.length-1;},onSubmitUpdates:function Z(){if(this.state===E){this.cmds.splice(this.pos+1);this.controller.onCmdMgrChanged();}},isUndoRedo:function C(){var e=this.curCmd||{};return(this.state===O&&(e.action===N||e.action===A));},handleError:function K(e){this.reset();throw new Error(e||"Invalid state.");}});mstrmojo.vi.controllers.UICmdMgr.STATES={BUSY:O,IDLE:E};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.StickySections","mstrmojo.VisTextTooltip","mstrmojo.VisChartUtils");var e=mstrmojo.dom,a=mstrmojo.hash,h=mstrmojo.array,L=["white","black","transparent","gray"],S="ig-selected-row";var F=2;function I(){return(this.isFullScreenWidget||!this.isDocXtab);}function J(q){var w=null,u=q,AA=u.model&&u.model.docModel,z=u.gridData&&u.gridData.parent;if(z&&AA&&AA.defn&&AA.defn.layouts&&AA.defn.layouts.length>0){var x=AA.defn.layouts,s;var p;for(p in x){if(x[p].loaded){s=x[p];}}if(s&&s.hasOwnProperty("units")){var t=s.units;while(z){var o=z.k||null;if(t[o]&&t[o].fmts&&t[o].fmts["background-color"]){w=t[o].fmts["background-color"];break;}else{z=z.parent||null;}}if(!w){if(s.fmts&&s.fmts["background-color"]){w=s.fmts["background-color"];}}}}return w;}function g(){var AE=this.gridData,u=AE.ghs.chs;if(u.items&&u.items.length){var AF=AE.ghs.chs.items[0].items,p=AE.vp,AD=p.cols,o=AD.cg,q=AD.cws,x=o.cgc,AA,w,AC=false,z=[];for(AA=0;AA<x;AA++){var s=o[AA],t=-1;a.forEach(s,function(AH,AG){if(/[mMiIxX]([0-9])+$/.test(AG)){for(w=0;w<AF.length;w++){if(AF[w].mix==AH){s[AG]=w;t++;break;}}if(AF[s[AG]]===undefined||w===AF.length){delete s[AG];return ;}AC=true;}});if(AC){var AB=[];for(w=0;w<s.cl;w++){if(s["mix"+w]===undefined){AB.push(w);}else{if(AB.length>0){s["mix"+AB.splice(0,1)]=s["mix"+w];delete s["mix"+w];}}}s.cl=++t;if(s.cl===0){z.push(AA);}}else{if(!s.attForms){z.push(AA);}}AC=false;}for(AA=z.length-1;AA>=0;AA--){delete o[z[AA]];for(w=z[AA];w<x;w++){o[w]=o[w+1];}delete o[w-1];q.splice(z[AA],1);o.cgc--;}}}function C(){var AE=":",AD=this.gridData,o=AD.gts,w=AD.ghs.chs,AF=o.row,u=AF[0],x=o.col&&o.col.length>0,q={bn:"0",gr:"0",ar:"1",ct:"1",daf:u.id+AE+u.fid,cols:{cws:[{w:"100"}],cg:{cgc:1}}},AA=["row"],t=[o.row],AC,AB;if(x){AA=["row","col"];t=[o.row,w.items[0].items];q.cols={cws:[{w:"50"},{w:"50"}],cg:{cgc:2}};}var p=q.cols.cg;for(AC=0,AB=p.cgc;AC<AB;AC++){var s=AA[AC],z;p[AC]={tg:true,cl:t[AC].length,cc:0,sh:true};if(s==="col"){for(z=0;z<t[AC].length;z++){p[AC]["mix"+z]=t[AC][z].mix;}}else{p[AC].attForms=[];for(z=0;z<t[AC].length;z++){p[AC].attForms[z]={idx:z,n:""};}}}this.gridData.vp=q;}function G(t,p){var w,q,o,u,s=function(AC,AE,AD){var z,AB,AA=AE[AC+"Sibling"],x;if(AA){for(z=0,AB=AA.cells.length;z<AB;z++){x=AA.cells[z];if((AC==="next"&&/stack-bottom-last/.test(x.className))||(AC==="previous"&&/stack-top/.test(x.className))){AD.push(AA);return ;}}AD.push(AA);s(AC,AA,AD);}};p.push(t);for(q=0,o=t.cells.length;q<o;q++){w=t.cells[q];u=w.className;if(/stack/.test(u)){if(/stack-top/.test(u)){s("next",t,p);break;}else{if(/stack-bottom-last/.test(u)){s("previous",t,p);break;}else{if(/stack-middle|stack-bottom/.test(u)){s("next",t,p);s("previous",t,p);break;}}}}}return p;}function l(o){h.forEach(o,function(p){mstrmojo.css.addClass(p,S);});}function H(){var o=a.copy(document.getElementsByClassName(S));h.forEach(o,function(p){mstrmojo.css.removeClass(p,S);});}function d(q){var u=e.findAncestorByAttr(q,"ei",true,this.domNode),p=u&&u.node,o=this.getCellForNode(p);if(p&&p.className.indexOf("iggroup")>0){return true;}if(this.isInteractiveGrid()&&this.igToggle(o)){return true;}if(!o){return true;}var t=!(o&&o._e&&o._e.n);if(e.contains(this._BR,q)&&!t){H();if(this.isReselectedTD(o)&&this.hasSelectAll(o)){return false;}var s=e.findAncestorByName(q,"tr",true);if(e.contains(this._BR,s)){l(G(s,[]));}}return false;}mstrmojo._IsInteractiveGrid=mstrmojo.provide("mstrmojo._IsInteractiveGrid",{_mixinName:"mstrmojo._IsInteractiveGrid",cssClass:"mstrmojo-InteractiveGrid",enableMagnifier:false,utils:mstrmojo.VisChartUtils,isTransparentTheme:false,ancesterBgColor:undefined,scrollerConfig:{scrollPast:false},isInteractiveGrid:function(){return(this.gridData.vp&&this.gridData.vp.cols)?true:false;},preBuildRendering:function E(){if(this.gridData.eg){return this._super();}if(!this.isInteractiveGrid()){C.call(this);}g.call(this);var s=this,q=this.parent,o=function(u){s[u]=s[u]||((q&&q[u])?q[u]:480);};o("height");o("width");var t=isNaN(this.gridData.vp.ct)?1:parseInt(this.gridData.vp.ct,10);this.cssClass="mstrmojo-InteractiveGrid "+L[t];if(t===2){this.isTransparentTheme=true;this.ancesterBgColor=J(this);if(this.utils.isLightColor(this.ancesterBgColor)){this.cssClass+=" light";}else{this.cssClass+=" dark";}}this.scrollboxNodeOverflow="overflow:hidden;";var p=(this._super?this._super():true);this.cssDefault=(this.cssDefault==="")?"r-cssDefault":"";return p;},postBuildRendering:function D(){if(this._super){this._super();}var u=this.gridData,s=u&&u.vp,p=u&&u.gts,o=p&&p.cws,w=this.stickySections,q;if(s&&o&&s.gr==="1"&&o.length>1){q=w&&w.lastChild;if(q){if(this.isTransparentTheme&&this.ancesterBgColor){q.style.backgroundColor=this.ancesterBgColor;}else{if(s.gb){var t=q.lastChild;if(t){t.style.cssText+="; background-color: #"+s.gb+" !important";}}}}}},getKey:function R(){return this.gridData.k;},isReselectedTD:function P(o){if(this.IGCurrentSelectedCell&&o&&this.IGCurrentSelectedCell===o){return true;}else{return false;}},hasSelectAll:function X(AA){var t=this.model,p=AA&&AA.at,s="Metrics",u=false;if(p){if(p&F){var q=t.getCellTitleInfo(AA),x=q&&q.title,o=x&&x.id,z=t.scm;var w=(o&&z[o])||z[s];if(w){var AB=t.xtab;u=(AB.allowToggleSelections&&w.all);}}}return u;},renderChildren:function Y(){this.prepareCWSCalculation();if(this._super){this._super();}this.createStickySections();var q=this.zones._BR,p=q.hiliteCellsMap,s={},o=[];a.forEach(p,function(t,u){h.forEach(t.pos,function(w){q.clearHilites(u);s[w.row]=w.row;});});if(!a.isEmpty(s)){a.forEach(s,function(t){o.push(q.domNode.firstChild.rows[t]);});l(G(o[0],[]));}},useDomToCalculateOffsets:function V(){var o=this.zones._BR.cp;if(o&&(o.groupEnabled||o.stackLevels>1)){return true;}return(this._super||this._super())||false;},prepareCWSCalculation:function Z(){var o=this.getFormats&&this.getFormats(),p=(!I.call(this))?parseInt(o.width,10):parseInt(this.width,10);this.zones._BR.cp.gridWidth=p;this.zones._TR.cp.gridWidth=p;},createStickySections:function M(){var x=this.gridData,w=this.getFormats&&this.getFormats();if(this.isInteractiveGrid()&&(x.vp.gr==="1"&&x.gts.cws.length>1)){mstrmojo.requiresCls("mstrmojo.StickySections");var q=this._TR,s="stickySections";this.addSlots({stickySections:q});if(!this.ss){var z=this.zones._BR.cp.getResolvedGroupHeader(0,0),AA="iggroup xtab-td",u={132:-22,160:-27,213:-35,240:-40,320:-53},t=u[mstrMobileApp.getDeviceDPI()]||-27,o=(!I.call(this))?(parseInt(w.width,10)+"px"):"100%",p="width: "+o+";z-index: 2; position: relative;margin-bottom:"+t+"px;";this.ss=new mstrmojo.StickySections({currentSectionTitle:z.n||z.v,cssClass:AA,slot:s,cssText:p});this.addChildren(this.ss);}}},performActionForXtab:function b(o){return d.call(this,o&&o.target)||(this._super&&this._super(o));},igToggle:function O(AD){if(!this.isInteractiveGrid()||!AD){return false;}var x=AD&&AD._e,AE=(AD&&AD.otp)||(x&&x.otp);if(AE){var u,q,AB=this.gridData.vp.cols,p=AB.cg,AF=AD.mix,AC=4,t=12,AA=function(AG,AJ){var AM=false;if(AG.tg&&AG.cl>1){var AI=AG.cc,AO=AG.cc,AH=0,AK=AG.cl,AN=AG.cc=(++AO>=(AK+AH))?AH:AO,AL=[this._TR.getElementsByTagName("COLGROUP")[0],this._BR.getElementsByTagName("COLGROUP")[0]];h.forEach(AL,function(AQ){var AP=AQ.childNodes[AJ+AI].style.width;AQ.childNodes[AJ+AI].style.width="0";AQ.childNodes[AJ+AN].style.width=AP;});AM=true;}return AM;},o,s,w=0,z=false;if(AD&&AD.otp===t){for(u=0;u<p.cgc;u++){o=p[u];s=o.attForms;if(s){for(q=0;q<o.cl;q++){if(s[q]&&(s[q].idx===(AD.ci||AD.ui))){z=AA.call(this,o,w);}}}w+=o.tg?o.cl:1;}}else{if(x&&x.otp===AC){for(u=0;u<p.cgc;u++){o=p[u];if(o["mix"+o.cc]===AF){z=AA.call(this,o,w);}w+=o.tg?o.cl:1;}}}return z;}return false;},getHACP:function B(){var o=(this.isInteractiveGrid())?new mstrmojo.InteractiveGridHACP():this._super();o.onDemandIF=!!(this.onDemandIF&&this.gridData.rw);return o;},onheightChange:function N(){if(I.call(this)&&this.scrollboxNode){this.scrollboxNode.style.height=(parseInt(this.height,10)-this._TR.clientHeight)+"px";}if(this._super){this._super();}},onwidthChange:function Q(){if(I.call(this)){var o=this.width;if(this.hasRendered){this.unrender();this.width=o;this.render();}}else{if(this._super){this._super();}}},defaultAction:function K(q,o){var p=false;if(this._super){p=this._super(q,o);}this.model.sti=null;return p;},onclick:function k(o){},touchSelectBegin:function A(w){var s=w;var o=mstrmojo.dom.findAncestorByName(w.target,"td",true,this.domNode);var p=this.hasImgTag(o);var q=mstrmojo.dom.findAncestorByAttr(w.target,"trType",true,this.domNode);if(o&&q&&!p){var u=this.getTextWidth(o,o.className);if(u>o.offsetWidth-30){if(!this.visTextTooltip){var t=document.createElement("div");this.domNode.appendChild(t);this.visTextTooltip=new mstrmojo.VisTextTooltip({placeholder:t,targetDiv:o,boundary:this.domNode,touchAreaType:q.value});this.visTextTooltip.render();this.visTextTooltip.updateContent(o,q.value,o.innerText);}else{this.visTextTooltip.targetDiv=o;this.visTextTooltip.touchAreaType=q.value;this.visTextTooltip.updateContent(o,q.value,o.innerText);}}}},touchSelectEnd:function W(p){var o=p;if(this.visTextTooltip&&this.visTextTooltip.domNode){this.visTextTooltip.toggle(false);}},hasImgTag:function U(o){var s=o&&o.childNodes.length>0&&o.childNodes[0];if(s&&s.nodeName.toLowerCase()==="div"){var p=s.childNodes.length>0&&s.childNodes[0];if(p&&p.nodeName.toLowerCase()==="div"){var q=p.childNodes.length>1&&p.childNodes[1];if(q&&q.nodeName.toLowerCase()==="img"){return true;}}}return false;},getTextWidth:function j(q,w,p,AB,s,x){var z=q.childNodes;var AA=null,o=null;if(z.length>0&&z[0].nodeName.toLowerCase()==="#text"){AA=document.createElement("table");o=document.createElement("td");AA.appendChild(o);}else{if(z.length>0&&z[0].nodeName.toLowerCase()==="span"){o=document.createElement("span");o.style="z-index:-10;visibility:hidden;-webkit-text-size-adjust: none;";}else{return -1;}}if(o.className!==w||""){o.className=w||"";}if(o.style.fontFamily!==p||""){o.style.fontFamily=p||"";}var t=s||"pt";if(AB){o.style.fontSize=AB+t;}else{o.style.fontSize="";}if(x){if(o.style.fontWeight!=="bold"){o.style.fontWeight="bold";}}else{if(o.style.fontWeight!==""){o.style.fontWeight="";}}o.innerHTML=q.innerText;var u=-1;if(AA){this.domNode.appendChild(AA);u=o.offsetWidth-30;this.domNode.removeChild(AA);}else{this.domNode.appendChild(o);u=o.offsetWidth;this.domNode.removeChild(o);}return u;},unrender:function f(o){if(this.visTextTooltip&&this.visTextTooltip.destroy){this.visTextTooltip.destroy();delete this.visTextTooltip;}var p=this.ss;if(p){this.removeChildren(p,true);p.destroy();delete this.ss;}this._super(o);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo._CanHandleTwoClicks","mstrmojo.Label","mstrmojo.Widget");var C=mstrmojo.css,A=mstrmojo.Label.prototype.markupMethods;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._CanHandleTwoClicks,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',markupMethods:mstrmojo.hash.copy({onwidthChange:function(){mstrmojo.Widget.widthMarkupMethod.call(this);},ontextChange:function(){if(A.ontextChange){A.ontextChange.call(this);}this.widgetResized();},onvisibleChange:function(){if(A.onvisibleChange){A.onvisibleChange.call(this);}if(this.visible){this.widgetResized();}}},mstrmojo.hash.copy(A)),onkeyup:function E(F){this._super(F);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var G=this;this._autoApplyTimer=window.setTimeout(function(){G.set("isEditing",false);},this.autoApplyDelay);}},postBuildRendering:function D(){if(this._super){this._super();}this.widgetResized();},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function B(){var G=this[this.editableSlot],F=!!this.selectable;G.selectable=F;G.setAttribute("unselectable",!F?"on":"off");C.toggleClass(G,"unselectable",!F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.css","mstrmojo.hash");mstrmojo.TristateCheckBox=mstrmojo.declare(mstrmojo.Label,null,{scriptClass:"mstrmojo.TristateCheckBox",grayed:true,checked:true,cssClass:"tristate",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}},markupMethods:mstrmojo.hash.copy({oncheckedChange:function(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},ongrayedChange:function(){mstrmojo.css.toggleClass(this.domNode,"grayed",this.grayed);},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},mstrmojo.hash.copy(mstrmojo.Label.prototype.markupMethods))});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._TouchGestures");mstrmojo.android.ui.Label=mstrmojo.declare(mstrmojo.Label,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Label",touchTap:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasTouchScroller","mstrmojo._TouchGestures");mstrmojo.android.TextArea=mstrmojo.declare(mstrmojo.Label,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.TextArea",markupString:'<div id="{@id}" class="mstrmojo-TextArea {@cssClass}" style="{@cssText}"><div>{@text}</div></div>',markupMethods:{ontextChange:function(){this.domNode.firstChild.innerHTML=this.text||"";},oncssTextChange:function(){this.domNode.style.cssText=this.cssText||"";},onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onheightChange:function(){this.domNode.style.height=this.height||"auto";}},allowTouchBubble:false,updateScrollerConfig:function A(){var B=this._super(),E=this.domNode,F=E.firstChild,D=parseInt(this.height,10);if(isNaN(D)){D=E.clientHeight;}B.bounces=false;B.scrollEl=F;B.origin=B.origin||{x:0,y:0};var G=Math.max(F.offsetHeight-D,0);var C=B.vScroll=(G!==0);if(C){B.offset={y:{start:0,end:G}};}return B;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.requiresDescs(11668,15187,15188,15189,15190);function B(L,K,I){var J=K,H;for(;J>0;J--){H=Array(J+1).join("#");L=L.replace(H,I[J-1]);}return L;}var C='<div class="ghost-vis-txt-metric">',A='<div class="ghost-vis-txt-attr">',E='<div class="ghost-vis-txt-attr-time">',G="</div>";var D={grid:B(mstrmojo.desc(15187,"Add # or more ##attributes### and/or #### or more #####metrics######"),6,[1,A,G,1,C,G]),heatmap:B(mstrmojo.desc(15187,"Add # or more ##attributes### and/or #### or more #####metrics######"),6,[1,A,G,1,C,G]),barchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),linechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),areachart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),bubblechart:B(mstrmojo.desc(15190,"Add # or more ##metrics### and #### or more #####attributes######"),6,[2,C,G,1,A,G]),piechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),combochart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,2,C,G]),network:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,A,G,1,C,G]),histogram:B(mstrmojo.desc(15667,"Add # or more ##attributes### and ####  #####metric######"),6,[1,A,G,1,C,G]),boxplot:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),waterfall:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),kpicard:B(mstrmojo.desc(15878,"Add # or more ##attributes### and #### #####metric######"),6,[1,A,G,1,C,G])};function F(H){return D[H]?D[H]:mstrmojo.desc(11668,"Drag objects here.");}mstrmojo.vi.ui.rw.GhostImageContainer=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ui-rw-GhostImageContainer {@cssClass}"><div class="mstmojo-ghostImgTableCell"><div class="mstrmojo-ghostImgDiv"><div class="ghost-vis-img"></div><div class="ghost-vis-name">{@visName}</div><div class="ghost-vis-desc">{@visDesc}</div></div></div></div>',markupSlots:{containerNode:function(){return this.domNode;}},visName:"",visDesc:""});mstrmojo.vi.ui.rw.GhostImageContainer.getVisDesc=F;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var M=mstrmojo.Widget,G=mstrmojo.dom,N=mstrmojo.global.document,C=50,B=500;mstrmojo.Stepper=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Stepper",orientation:"vertical",provider:null,title:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text">{@itemHtml}</div><div class="prev">-</div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},nextNode:function(){return this.domNode.children[1];},textNode:function(){return this.domNode.children[2];},prevNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:M.visibleMarkupMethod,onheightChange:M.heightMarkupMethod,onwidthChange:M.widthMarkupMethod,onenabledChange:function I(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},preBuildRendering:function J(){this.itemHtml=this.provider.renderItemAt();this._super();},processEvent:function A(O){if(G.contains(this.textNode,O)||O===this.titleNode){return ;}var Q=this.provider,P=((O===this.nextNode)?"Next":"Prev");if(Q["has"+P]()){Q[P.toLowerCase()]();this.updateDisplayText();}},updateDisplayText:function E(){this.textNode.innerHTML=this.provider.renderItemAt();},startStepperInterval:function F(O,P){var Q=this;this._holdTimer=setInterval(function(){Q[P](O);},C);},stopStepperInterval:function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}},onclick:function L(O){this.processEvent(O.e.target);},onmousedown:function D(O){if(!this._holdTimer&&!this._startHoldTimer){var P=this;this._startHoldTimer=setTimeout(function(){delete P._startHoldTimer;P.startStepperInterval(O,"onclick");},B);G.attachOneTimeEvent(N,"mouseup",function(){if(P._startHoldTimer){clearTimeout(P._startHoldTimer);delete P._startHoldTimer;}P.stopStepperInterval();},true);}},onselectstart:function K(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasBuilder","mstrmojo._CanMeasureChildren","mstrmojo._CanRenderDocOnScroll","mstrmojo._FillsBrowser");function A(){var E=this.domNode,D=this.containerNode,F=D.style,J=D.clientWidth||parseInt(F.width,10),I=E.clientWidth||parseInt(E.style.width,10),G=E.parentNode,M=D.clientHeight||parseInt(F.height,10),H=G.clientHeight||parseInt(G.style.height,10);if(J<I){F.left=(I-J)/2+"px";}if(M<H){F.top=(H-M)/2+"px";}var K=this.model.zt,L=K===1||K===2;if(!L||this.model.zoomFactorUpdating===false){F.visibility="visible";}}mstrmojo.rw.DocLayout=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren,mstrmojo._CanRenderDocOnScroll,mstrmojo._FillsBrowser],{scriptClass:"mstrmojo.rw.DocLayout",markupString:'<div id="{@id}"><div class="mstrmojo-DocLayout {@cssClass}" style="{@domNodeCssText}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},popupNode:function(){return this.domNode.firstChild;}},alias:"docLayout",getHeight:mstrmojo.emptyFn,getWidth:mstrmojo.emptyFn,resizeOrReposition:mstrmojo.emptyFn,preserveChildDomOrder:false,buildRendering:function(){this._super();var D=this.model.zt;if(mstrApp.features["is-document-center-align"]||D===1||D===2){this.containerNode.style.visibility="hidden";}},postBuildRendering:function C(){var F=this._super(),G=this,E=this.model.zt,D=E===1||E===2;if(mstrApp.features["is-document-center-align"]){window.setTimeout(function(){A.call(G);},10);}else{if(D&&this.model.zoomFactorUpdating===false){G.containerNode.style.visibility="visible";}}return F;},browserResized:function B(){if(this.hasRendered&&mstrApp.features["is-document-center-align"]){A.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasBuilder","mstrmojo._Formattable","mstrmojo._HasToolbar");var C="\u001E";var G=1;var I=2;var B=1;var J={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,vert:["height","width","top"],horiz:["width","height","left"],updateStyle:function(L){var O=L.defn.qsm;if(!O){return ;}if(L.getFormats().width){return ;}var P=null;if(O==G){P=L.containerNode.firstChild;}else{P=L.containerNode.lastChild;}if(!P){return ;}var M=P.clientHeight+"px";var K=P.clientWidth+"px";var N=L.domNode.style;N.height=M;N.width=K;if(L.parent.updateStyle){L.parent.updateStyle(M,K);}},repositionChildren:function(Q){if(!Q.children){return ;}var P=Q.getFormats(),O=parseInt(P.height,10),U=parseInt(P.width,10);var K=Q.children,N=K[0].getFormats(),W=K[1].getFormats();var L=(Q.defn.gp<this.LEFT),S=L?O:U,R=L?U:O,V=this[(L?"vert":"horiz")];var M=Math.round(S*(Q.defn.ga/100));N[V[0]]=M+"px";N[V[1]]=R+"px";W[V[0]]=(S-M)+"px";W[V[1]]=R+"px";if((Q.defn.gp%2)===0){W[V[2]]=M+"px";}else{N[V[2]]=(S-M)+"px";}this.resizeChildren(K[0],K[1]);},stackChildren:function(K){var N=K.children,O=K.getFormats(),M;var L;for(L=N.length-1;L>=0;L--){M=N[L].getFormats();M.width=O.width;M.height=O.height;}this.resizeChildren(N[0],N[1]);},resizeChildren:function(M,K){M.renderPortalState();var L=K.getFormats();K.resizeForDisplayState(parseInt(L.height,10),parseInt(L.width,10),true);},changeVisibility:function(M,K){var P=M.children,O=M.defn.qsm,L=K&&(!O||M.viewMode===G),N=K&&(!O||M.viewMode===I);if(P&&P.length>0){if(P[0].visible!==L){P[0].set("visible",L);}if(P[1].visible!==N){P[1].set("visible",N);}}M.visible=K;},setViewMode:function H(L){var M=L.children,N=L.visible;if(L.defn.qsm&&M&&M.length>0){var K=L.viewMode;M[0].set("visible",(K==G)&&N);M[1].set("visible",(K==I)&&N);}},clearFormatCache:function D(L){var N=L.children;for(var M=0,K=N&&N.length||0;M<K;M++){N[M].clearCache();}}};mstrmojo.DocGridGraph=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._Formattable,mstrmojo._IsSelectorTarget],{scriptClass:"mstrmojo.DocGridGraph",markupString:'<div id="{@id}" k="{@k}" title="{@tooltip}" class="mstrmojo-DocGridGraph" style="{@domNodeCssText}"><div class="mstrmojo-DocGridGraph-msg"></div><div class="mstrmojo-DocGridGraph-container"></div></div>',markupSlots:{msgNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.lastChild;}},formatHandlers:{domNode:["RW","B","background-color","fx","font"]},viewMode:null,visible:true,resize:function E(){this.clearCache();J.clearFormatCache(this);var M=this.getFormats(),K=parseInt(M.width,10),L=parseInt(M.height,10);if(K>0&&L>0){J.changeVisibility(this,true);if(!this.defn.qsm){J.repositionChildren(this);}else{J.stackChildren(this);}}else{J.changeVisibility(this,false);}},postBuildRendering:function A(){this._super();var M=this.node.data.eg;if(M===undefined){this.msgNode.style.display="none";this.containerNode.style.display="block";}else{this.msgNode.innerHTML=M;this.msgNode.style.display="block";this.containerNode.style.display="none";}var L=this.defn.qsm;if(!this.viewMode&&L){this.viewMode=L;}var K=this.node.defn;K.attachEventListener("qsmChange",this.id,function(N){this.viewMode=N.value;J.setViewMode(this);this.model.getDataService().setGridDisplayMode(this.k,this.viewMode,null,{cpmfig:{silent:true}});J.updateStyle(this);});J.setViewMode(this);J.updateStyle(this);if(!L&&this.defn.ds===B){this.resize();}},getGridWidget:function(){return this.children[0];},getGraphWidget:function(){return this.children[1];},updateGraph:function(L){var K=this.getGraphWidget();if(K){K.update(L);K.refresh();}},quickSwitch:function F(){var K=this.viewMode!=I;this.defn.set("qsm",(K?I:G));return true;}});})();(function(){mstrmojo.requiresCls("mstrmojo._HasBuilder","mstrmojo._HasLayout","mstrmojo.Container");var A=1;mstrmojo.maps.jsmap.AndroidDocMapInfoWindow=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._HasLayout],{scriptClass:"mstrmojo.maps.jsmap.AndroidDocMapInfoWindow",markupString:'<div class="mstrmojo-DocInfoWindow-wrapper"><div id="{@id}" class="mstrmojo-DocInfoWindow"></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild;}},getChildren:function B(){var C=this.model,E=C.getLayoutDataCache(C.getCurrentLayoutKey())[this.psId],D=E.defn.fmts;D.left=A+"px";D.top=A+"px";return[E];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");function A(B){return function(){this.domNode.style[B]=this[B]||"";};}mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",titleNodeCssClass:"mstrmojo-popup-title",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",keepOpen:false,markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}"><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-title {@titleNodeCssClass}">{@title}</div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onleftChange:A("left"),ontopChange:A("top"),onzIndexChange:A("zIndex")}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var V=H.slot;if(!this[V]){var M=V&&V.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),W=parseInt(M[2],10),Q=this.containerNode,U=this[(B+R)],N=[];if(!U){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}U=N[B+R];}var P=U.cells&&U.cells.length||0;for(var K=P;K<=W;K++){var I=U.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo._HasBuilder","mstrmojo._HasLayout","mstrmojo.Container");var A=1;mstrmojo.maps.androidmap.AndroidDocMapInfoWindow=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._HasLayout],{scriptClass:"mstrmojo.maps.androidmap.AndroidDocMapInfoWindow",markupString:'<div class="mstrmojo-androidmap-DocInfoWindow-wrapper"><div id="{@id}" class="mstrmojo-androidmap-DocInfoWindow"></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild;}},getChildren:function B(){var C=this.model,E=C.getLayoutDataCache(C.getCurrentLayoutKey())[this.psId],D=E.defn.fmts;D.left=A+"px";D.top=A+"px";return[E];}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var B=mstrmojo.func,D=mstrmojo.dom,C=mstrmojo.ui._HasUITheme.EnumThemeNames,G="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function J(N){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);}this._super(N);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function E(){var N=this.getPopupWidget();if(!N||N._pbCfg){return ;}var O=function O(Q,P){return function(){Q.apply(P,arguments);};};N.onOpen=B.composite([O(this.onPopupWidgetOpened,this),N.onOpen||mstrmojo.emptyFn]);N.onClose=B.composite([O(this.onPopupWidgetClosed,this),N.onClose||mstrmojo.emptyFn]);N._pbCfg=true;},onclick:function L(N){if(this.isClickingAnchorSlot(N)){var O=this.getPopupWidget();if(!O.visible){this.openPopup(O);}else{this.closePopup();}}},isClickingAnchorSlot:function M(N){var O=N.getTarget();return O===this[this.anchorSlot]||O.parentNode===this[this.anchorSlot];},onPopupAutoClosed:function I(O,N){if(D.contains(this[this.anchorSlot],D.eventTarget(N,O),true)){return false;}},getPopupHostNode:function K(){return this.containerNode;},getPopupConfig:function H(){var O=[G],N=this.hostedCSSClass;if(N){O.push(N);}var P=new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:O.join(" ")});return this.disposables?this.addDisposable(P):P;},unrender:function F(N){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(N);},postBuildRendering:function A(){var R=this.getPopupWidget();if(R){var U=this.getPopupConfig();if(!U.isHostedWithin){var P=this.parent||this.opener,O=U.hostProxyCssClass.split(" ");O.push(this.domNode.className);while(P){var S=P.themeClassName;if(S){O.push(S);break;}P=P.parent||P.opener;}if(U.useDarkTheme){O.splice(O.indexOf(C.LIGHT_THEME),1);O.push(C.DARK_THEME);}U.hostProxyCssClass=O.join(" ");}mstrmojo.Obj.free(R.popupConfig);R.popupConfig=R.addDisposable(U);}if(!(this.editableSlot&&D.isMobile)){var N=R.id,Q=this._listenerProc=function(){var V=mstrmojo.all[N];if(V&&V.visible&&V.adjustCornersForPopupOverflow){V.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){D.attachEvent(window,"resize",Q);}}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");function B(K,J,H){var I=J,G;for(;I>0;I--){G=Array(I+1).join("#");K=K.replace(G,H[I-1]);}return K;}var C='<div class="freezing-vis-txt-metric">',A='<div class="freezing-vis-txt-attr">',E="</div>",F="("+mstrmojo.desc(16294,"data retrieval paused")+")";var D=function(J,I){if(J<1&&I<1){return null;}var H=[],G="# ## ### ####";if(J>0){H.push(B(G,4,[A,J,J>1?mstrmojo.desc(3581,"Attributes"):mstrmojo.desc(518,"Attribute"),E]));}if(I>0){H.push(B(G,4,[C,I,I>1?mstrmojo.desc(3582,"Metrics"):mstrmojo.desc(517,"Metric"),E]));}return H.join(",");};mstrmojo.vi.ui.rw.FreezingImageContainer=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ui-rw-freezingImageContainer mstrmojo-vi-ui-rw-GhostImageContainer {@cssClass}"><div class="mstmojo-freezingImgTableCell"><div class="mstrmojo-freezingImgDiv"><div class="freezing-vis-img ghost-vis-img"></div><div class="freezing-vis-desc"><label class="visName">{@visName}</label><div class="freezing-details">{@freezingDetails}</div></div><div class="vis-dropzone">{@visDropzoneMsg} </div></div></div></div>',markupSlots:{containerNode:function(){return this.domNode;}},visName:"",freezingDetails:F,visDropzoneMsg:""});mstrmojo.vi.ui.rw.FreezingImageContainer.getVisDropzoneMsg=D;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._Formattable","mstrmojo._IsThresholdConditionTarget","mstrmojo.EnumRWUnitType");var TP_HTML_CONTAINER=mstrmojo.EnumRWUnitType.HTMLCONTAINER;var $DOM=mstrmojo.dom,$HASH=mstrmojo.hash;function buildScriptNode(scriptNode){var node=document.createElement("script"),attributes=scriptNode.attributes,length=attributes.length;for(var i=0;i<length;i++){node.setAttribute(attributes[i].name,attributes[i].value);}return node;}mstrmojo.DocTextfield=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsThresholdConditionTarget],{scriptClass:"mstrmojo.DocTextfield",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocTextfield {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocTextfield-valueNode" style="{@valueNodeCssText}" mstrAttach:click >{@v}</div>{@buttonNodeMarkup}</div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["T","z-index"],valueNode:["D","B","F","P","background-color","fx","text-align","white-space","overflow"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function update(node){var d=node.data,v=d.v||"";if(node.defn.t===TP_HTML_CONTAINER){var div=document.createElement("div");div.innerHTML="<textarea>"+v+"</textarea>";v='<div style="display:none">&nbsp;</div>'+div.firstChild.value;div=null;}this.v=v;this.tooltip=d.tooltip||this.tooltip;if(this.thresholdId||d.tid){delete this.fmts;}this.thresholdId=d.tid;this.set("visible",!node.data.hidden);if(this._super){this._super(node);}},init:function(props){this._super(props);},postBuildRendering:function postBuildRendering(){var i,len;this.handleRotatedText();if(this.defn.t===TP_HTML_CONTAINER){var scripts=this.domNode.getElementsByTagName("script");for(i=0,len=scripts.length;i<len;i++){if(scripts[i].src){var parentNode=scripts[i].parentNode,node=buildScriptNode(scripts[i]);parentNode.removeChild(scripts[i]);parentNode.appendChild(node);}else{try{eval(scripts[i].innerHTML);}catch(err){console.log(err);}}}}return this._super();},isTextFieldRotated:function isTextFieldRotated(){var formats=this.getFormats();return(formats.fx&&formats.fx.rt&&!$DOM.isDXIE&&$DOM.supports($DOM.cssFeatures.TEXT_ROTATION));},handleRotatedText:function handleRotatedText(){var formats=this.getFormats(),rotateValue=formats.fx&&formats.fx.rt;if(this.isTextFieldRotated()){var domNode=this.domNode,domNodeStyle=domNode.style;switch(rotateValue){case 1:domNodeStyle.left=(parseInt(formats.left,10)+domNode.offsetHeight)+"px";break;case 3:domNodeStyle.top=(parseInt(formats.top,10)+domNode.offsetWidth)+"px";break;}}},getAnchor:function getAnchor(){return this.valueNode;}});mstrmojo.DocSummaryTextfield=mstrmojo.declare(mstrmojo.DocTextfield,null,{scriptClass:"mstrmojo.DocSummaryTextfield",markupString:'<span id="{@id}" class="mstrmojo-DocSumTextfield {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><span class="mstrmojo-DocTextfield-valueNode" style="{@valueNodeCssText}" mstrAttach:click >{@openLink}{@v}{@closeLink}</span>{@buttonNodeMarkup}</span>',formatHandlers:{domNode:["T","z-index"],valueNode:["D","B","F","background-color","fx","text-align","white-space","overflow"]},update:function update(node){this._super(node);if(this.v){var v=this.v,p1=new RegExp("&lt;bold&gt;","g"),p2=new RegExp("&lt;/bold&gt;","g");if(v.indexOf("&lt;empty/&gt;")>-1){this.v="";return ;}v=v.replace(p1,"<b>");v=v.replace(p2,"</b>");this.v=v;}},preBuildRendering:function preBuildRendering(){if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.string","mstrmojo.url");var D=mstrmojo.string,E=function E(G){return G.data.dl||G.defn.dl;};mstrmojo.DocImage=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocImage",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocImage" title="{@tooltip}" style="{@domNodeCssText}"><div style="{@shadowNodeCssText}"><img src="{@en@v}" style="{@imgNodeCssText}" mstrAttach:click></div>{@buttonNodeMarkup}</div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function F(I){var J=this.model.getDataService(),G=I.data.v,H=E(I);if(I.data.v&&!((I.data.ut===4)||I.defn.oid)){G=mstrmojo.url.getFullPath(I.data.v);}this.origV=G;this.v=D.decodeXMLAttribute((J&&J.getImage&&J.getImage(G))||G);this.oid=I.defn.oid;if(H){this.tooltip=H.items[0].n;}if(this.thresholdId||I.data.tid){delete this.fmts;}this.thresholdId=I.data.tid;this.set("visible",!I.data.hidden);if(this._super){this._super(I);}},formatHandlers:{domNode:["left","top","z-index"],shadowNode:["width","height","B","fx"],imgNode:["height","width"]},preBuildRendering:function B(){this._super();if(mstrApp.isMobile&&mstrApp.useBinaryFormat){var G=this.v,I=mstrMobileApp.isOnline(),H=this.model.getDataService();if((!I&&G.indexOf("http")===0)||(I&&G.indexOf("http")!==0)){this.v=(H&&H.getDocImage&&H.getDocImage(this.origV))||G;}}if(this.node.data.ut===4&&this.v.indexOf(mstrConfig.taskURL)===-1){this.v=mstrConfig.taskURL+"?taskId=getRWEmbeddedImage&msgID="+this.model.mid+"&oid="+this.v;}this.updateDimensionsFromFormats();},updateDimensionsFromFormats:function C(){if(!mstrmojo.dom.isIE7){var G=this.getFormats(),J=(G.fx&&G.fx.ds)||0,H=mstrmojo._Formattable.getBorderWidths(this),I=1;if((mstrmojo.dom.isIE||mstrmojo.dom.isIEW3C)&&this.model.getZoomFactor){I=this.model.getZoomFactor()>1?this.model.getZoomFactor():1;H.w=Math.ceil(H.w*I);H.h=Math.ceil(H.h*I);}this.domNodeCssText+="width:"+((parseInt(G.width,10)||0)+J+H.w)+"px; height: "+((parseInt(G.height,10)||0)+J+H.h)+"px;";}},getAnchor:function A(){return this.imgNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var L=mstrmojo.boxmodel,I=mstrmojo.dom,M=mstrmojo.css,O="mstrmojo-Tooltip",A="mstrmojo-scrollNode",E=20;function C(S,U,R){var V="connectScrollbox";if(R){V="dis"+V;}var Q=S&&S.parent;while(Q){if(Q[V]){Q[V](U);}Q=Q.parent;}}function G(){if(!this._paintHandle){var R=this.id,Q=function(W){var a=mstrmojo.all[R];if(!a){return ;}delete a._paintHandle;var U=[O],b=a.cssClass;if(b){U.push(b);}var S=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),Y=a.opener;if(Y&&Y.getTooltipThemeClass){S=Y.getTooltipThemeClass();}U.push(S);a.domNode.className=U.join(" ");var Z=a.content,V=a.contentNode,X=a.arrowNode;V.className=(O+"-content "+A+" "+a.contentNodeCssClass);V.style.cssText=a.contentNodeCssText;if(!a.hasWidgetContent){V.innerHTML=Z;}X.style.cssText="";a.domNode.style.visibility=!!Z?"visible":"hidden";a.updatePosition();if(!W&&a.optimizePos){a.optimizePos();}a.updateScrollbars();};if(!this._hasPaint){Q(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(Q,0);}}}function B(V,f,l,W){var Z=f&&(f.richTooltip||f.tooltip),q=l?I.getMousePosition(l,W||self):null,d=Z&&(typeof Z==="string");var o="",b="",Y="",j=Z,a=null,Q=mstrmojo.tooltip.POS_TOPLEFT,S=null,g=null,R=null,p=false,U=null,X=mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY;var h=false,k=false;if(Z&&!d){b=Z.cssClass||b;o=Z.contentNodeCssClass||o;Y=Z.contentNodeCssText||Y;j=Z.content||"";a=Z.refNode||a;Q=Z.posType||Q;S=Z.left||0;g=Z.top||0;h=Z.keepArrowXPos||h;k=Z.keepArrowYPos||k;R=Z.updatePosition||null;p=Z.hasWidgetContent;U=Z.children;X=Z.tooltipCloseDelay||mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY;}V.set("contentNodeCssClass",o);V.set("cssClass",b);V.set("contentNodeCssText",Y);V.set("content",j);V.set("refNode",a);V.set("posType",Q);V.set("left",d?((q&&q.x)||V.left):S);V.set("top",(d||!Z)?((q&&(q.y+E))||V.top):g);V.set("keepArrowXPos",h);V.set("keepArrowYPos",k);if(R){V.set("updatePosition",R);}else{V.set("updatePosition",mstrmojo.Tooltip.prototype.updatePosition);}V.set("hasWidgetContent",p);V.set("children",U);V.set("tooltipCloseDelay",X);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",allowOtherTooltips:false,markupString:'<div id="{@id}" class="'+O+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+O+'-shadow {@shadowNodeCssClass}"></div><div class="'+O+'-contentWrapper"><div class="'+O+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+O+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function D(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var R=this.domNode.style,Q=!!this.visible;if(this._previousVisible!==Q){R.visibility="hidden";}R.display=Q?"block":"none";this._previousVisible=Q;if(Q){this.updatePosition();if(this.content){G.call(this);}}},onleftChange:G,ontopChange:G,onrefNodeChange:G,onposTypeChange:G,oncontentNodeCssClassChange:G,oncontentNodeCssTextChange:G,oncontentChange:G,oncssClassChange:G},preBuildRendering:function N(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function H(W){if(!this.visible&&!W){return ;}var V=this.refNode,U=V?L.offset(V,document.body):{left:I.getHorizontalScroll(),top:I.getVerticalScroll()},q=this.domNode.style,h=this.containerNode,k=h.offsetWidth,a=h.offsetHeight,R=this.posType,e=R.indexOf("R")>-1,X=R.indexOf("B")>-1,d=this.top!==null?parseInt(this.top,10)+U.top-(X?a:0):null,S=this.left!==null?parseInt(this.left,10)+U.left-(e?k:((R.indexOf("C")>-1)?Math.floor(k/2):0)):null,o=false,b=false,f,Y,l=I.windowDim(),j=I.getHorizontalScroll()+l.w,Q=I.getVerticalScroll()+l.h,g=this.arrowNode,p=null;if(S!==null){f=Math.min(Math.max(S,0),j-k);q.left=f+"px";o=S!==f;}if(d!==null){Y=Math.min(Math.max(d,0),Q-a);q.top=Y+"px";b=d!==Y;}if(o||b){var Z,t=this.keepArrowXPos&&o,s=this.keepArrowYPos&&b;if(t||s){p=M.getComputedStyle(g);Z=p.left;}if(Z&&Z.endsWith("%")){Z=parseFloat(Z)/100*k;}if(t){g.style.left=(parseInt(Z,10)+S-f)+"px";}if(s){g.style.top=(parseInt(p.top,10)+d-Y)+"px";}}M.toggleClass(this.domNode,"offset",o||b);},_on_tooltip_change:function(Q){B(this,Q&&Q.src);},_set_opener:function(U,S){var R=this.opener,Q=S!==R;if(Q){if(S){C(S,this);}if(R){C(S,this,true);}if(R&&R.detachEventListener){R.detachEventListener(this._richSubs);R.detachEventListener(this._ttpSubs);}if(S&&S.attachEventListener){this._richSubs=S.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=S.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=S;}return Q;},updatePopupConfig:function(Q,R){B(this,R,Q&&Q.e,Q&&Q.win);},onscroll:function K(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var J=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function F(R,U,S,Q){if(R&&R.hasWidgetContent&&J){J.destroy();}if(!J||!mstrmojo.all[J.id]){J=new mstrmojo.Tooltip();}Q=Q||{};Q.e=U;Q.win=S;J.open(R,Q);R.tooltip=J;},close:function P(){if(J&&!J.allowOtherTooltips){var Q=J.opener;if(Q){Q.tooltip=null;}J.close();if(Q&&Q.hasWidgetContent){J.destroy();}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo._ContainsDocObjects","mstrmojo._HasBuilder");mstrmojo.rw.DocSubsection=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._ContainsDocObjects,mstrmojo._HasBuilder],{scriptClass:"mstrmojo.rw.DocSubsection",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSubsection" style="{@domNodeCssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},formatHandlers:{domNode:["D","B","background-color","fx"]},update:function C(E){var D=E.data.tid;if(this.thresholdId||D){delete this.fmts;}this.thresholdId=D;if(this._super){this._super(E);}},postBuildRendering:function B(){return(this.renderMode!=="scroll")?this._super():true;},childRenderOnAddCheck:function A(D){return(this.renderMode!=="scroll")?this._super(D):false;},preserveChildDomOrder:false,performCanGrowCanShrink:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo._ContainsDocObjects","mstrmojo._HasBuilder","mstrmojo._SupportsEllipsisText","mstrmojo._HasEllipsis","mstrmojo.css","mstrmojo.array");var W=mstrmojo.css,V=mstrmojo.array;var R=2;function D(a,Y,Z){var b=a.parent.parent;if(b&&b instanceof mstrmojo.DocPanel){b[Y+"DirtyKey"](Z);}}function O(Z,Y,a){if(Z===Y.k){mstrmojo.array.forEach(Y.children,function(b){if(b.setDirtyChildren){b.setDirtyChildren(a);}});}}function I(Y){return Y._isFP()&&!Y.parent.defn.od;}mstrmojo.DocPanel=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._ContainsDocObjects,mstrmojo._HasBuilder,mstrmojo._SupportsEllipsisText,mstrmojo._HasEllipsis,mstrmojo.vi.ui._IsDropTarget],{scriptClass:"mstrmojo.DocPanel",visible:false,selected:false,k:"",cssDisplay:"block",subPanelCssText:"height:100%;width:100%;position:absolute;",topStart:R,contentWidth:0,markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocPanel {@cssClass}" style="{@cssText}{@domNodeCssText}"><div class="mstrmojo-DocSubPanel-content" style="{@containerNodeCssText}{@subPanelCssText}"></div></div>',markupMethods:{onvisibleChange:function(){var Z=this.domNode.style,Y=this.visible;if(I(this)){Z.visibility=(Y?"":"hidden");Z.zIndex=(Y?10:1);}else{Z.display=(Y?this.cssDisplay:"none");}}},markupSlots:{containerNode:function(){return this.domNode.firstChild;}},formatHandlers:{containerNode:["background-color","fx","overflow"]},title:"",init:function Q(Y){this._super(Y);if(!this.title){this.title=this.node.defn.ttl||"";}if(this._isSearchBoxPanel()){this.isSbp=true;this.set("canApplySbp",false);}},childRenderCheck:function L(Y){return(this._super(Y)&&(this.selected||I(this)));},postBuildRendering:function U(){if(!this.defn.l&&!this._forceRender){W.addClass(this.domNode,"placeholder");}var Z=this._super();if(this.isSbp){var Y=this.addChildren({scriptClass:"mstrmojo.Button",cssClass:"sbp-apply",title:mstrmojo.desc(134,"Apply"),cssText:"top:"+((parseInt(this.parent.fmts.height,10)||0)-28)/2+"px",bindings:{enabled:"this.parent.canApplySbp&&this.parent.parent.applyEnabled"},onclick:function(){this.parent.parent.applyBufferedSlices();}});Y.render();}if(this._isFSP()){this.set("shouldEllipsize",true);}if(mstrApp.isOIVM&&mstrApp.isOIVM()&&mstrmojo.dom.isChrome){var b=this.containerNode.style.overflow;this.containerNode.style.overflow="hidden";var a=this;window.setTimeout(function(){if(a.containerNode&&a.containerNode.style&&a.containerNode.style.overflow){a.containerNode.style.overflow=b;}},2000);}return Z;},onselectedChange:function M(Y){if(Y.value){this.renderChildren();}this.model&&this.model.raiseEvent({name:"panelSelected",panelId:this.id,panelVisible:!!Y.value});},updateForPU:function S(Y){this.node=Y;this.update(Y);},refreshForPU:function A(){this._isPartial=true;this.refresh();this._isPartial=false;},_isPartial:false,refresh:function E(){if(!this.hasRendered){return ;}this._inRendering=true;var a=[].concat(this.getPanelChildren()||[]),Z=[].concat(this.getChildren(this._isPartial)),Y;V.removeItems(a,"k",Z);V.removeItems(Z,"k",this.getPanelChildren());if(a.length!==0){V.forEach(a,function(b){this.removeChildren(b);b.destroy();},this);}if(Z.length!==0){V.forEach(Z,function(e){var d=e.id&&mstrmojo.all[e.id];var b=d&&d.defn;if(b){b._isDeleted=true;}if(d&&d.destroy){d.destroy();}},this);this.addChildren(this.builder.build(Z,this.model,this.buildConfig));this.builtChildren=true;}if(!this.selected){if(!this.children){this.builtChildren=false;}this._forceRender=true;this._super();delete this._forceRender;}else{a=[].concat(this.getPanelChildren()||[]);for(Y=a.length-1;Y>=0;Y--){a[Y].refresh();}}if(this._isFP()&&this.selected){this.refreshFP();}if(this._isFSP()){this.set("richTooltip",{content:this.containerNode.innerHTML,contentNodeCssClass:"sp-tooltip",left:-20,top:20,refNode:this.domNode});this.ellipsizeElements("div",this.containerNode,true);}this._inRendering=false;},setDirty:function N(Y){this[(Y?"add":"remove")+"DirtyKey"](this.k);},addDirtyKey:function H(Y){var a=this.defn,Z=a.dirtyKeys||{};Z[Y]=true;a.dirtyKeys=Z;if(Y===this.k){mstrmojo.array.forEach(this.children,function(b){if(b.setDirtyChildren){b.setDirtyChildren(true);}});}O(Y,this,true);D(this,"add",Y);},removeDirtyKey:function K(Z){D(this,"remove",Z);O(Z,this,false);if(Z===this.k){mstrmojo.array.forEach(this.children,function(b){if(b.setDirtyChildren){b.setDirtyChildren(false);}});}var a=this.defn,Y=a.dirtyKeys;if(!Y){return ;}delete Y[Z];if(!mstrmojo.hash.isEmpty(Y)){return ;}delete a.dirtyKeys;},getPanelChildren:function G(){return V.filter(this.children||[],function(Y){return Y.scriptClass!=="mstrmojo.Button";});},preBuildRendering:function(){if(this._isFSP()){this.useRichTooltip=true;}if(this._super){this._super();}},renderChildren:function J(){this._inRendering=true;var e=this.children;if(e&&(this._isFP()||this._isFSP())){V.forEach(e,function(h){h.getFormats();});}if(this.isSbp){W.addClass(this.domNode,"mstrmojo-sbp");}if(this._isFP()&&!mstrApp.isVI){W.addClass(this.parent.domNode,"fpgb");if(e){var f=this.domNode.clientWidth-2*R,d,Y;this.topStart=R+1;for(d=0,Y=(e&&e.length)||0;d<Y;d++){var a=this.domNode.clientWidth-2*R;this.contentWidth=(a>0)?a:0;if(a!==f){this.topStart=R+1;var b;for(b=0;b<d;b++){var Z=e[b];Z.refresh();if(Z.getContainerHeight){this.topStart+=Z.getContainerHeight()+R+1;}}}var g=e[d];if(this.childRenderCheck(g)){g.render(null);if(g.getContainerHeight){this.topStart+=g.getContainerHeight()+R+1;}}}}}else{this._super();}if(this._isFSP()){this.set("richTooltip",{content:this.containerNode.innerHTML,contentNodeCssClass:"sp-tooltip",left:-20,top:20,refNode:this.domNode});this.ellipsizeElements("div",this.containerNode,true);}this._inRendering=false;},refreshFP:function F(){if(!this.hasRendered){return ;}var b=this.children,Y=(b&&b.length)||0,a;this.topStart=R+1;var Z=this.domNode.clientWidth-2*R;this.contentWidth=(Z>0)?Z:0;for(a=0;a<Y;a++){var d=b[a];if(!d.hasRendered){continue;}if(d.relocate){d.relocate(this.topStart,this.contentWidth);}if(d.updateContentHeight){d.updateContentHeight();}if(d.getContainerHeight){this.topStart+=d.getContainerHeight()+R+1;}}},getChildren:function C(b){var a=this.model.getChildren(this.node,b);if(this._isFP()||this._isFSP()){var Y=(a&&a.length)||0,Z;for(Z=0;Z<Y;Z++){var d=a[Z];if(this._isFP()&&!d.defn.iifp){d.defn.iifp=true;}if(this._isFSP()&&!d.defn.iifs){d.defn.iifs=true;}}}a=V.filter(a||[],function(e){if(typeof e.defn.ifw==="boolean"){return !e.defn.ifw;}return true;});return a;},onchildRenderingChange:function B(Y){this._super(Y);if(this._isFSP()&&!this._inRendering){this.ellipsizeElements("div",this.containerNode,true);}if(this.parent.selectedKey!==this.k&&Y.gridInfo&&Y.tca===2){this.defn.l=false;}},_isFP:function X(){return !!this.parent.defn.ifp;},_isFSP:function P(){return !!this.parent.defn.ifsp;},_isSearchBoxPanel:function(){return false;},canApplySearchBoxPanel:function(){var Z=this.model.getChildren(this.node,false),Y;for(Y=0;Y<Z.length;Y++){var b=Z[Y],a=mstrmojo.all[b.id];if(a&&a.canApply&&!a.canApply()){return false;}}return true;},doEllipsize:function(){if(this.shouldEllipsize){this.ellipsizeElements("div",this.containerNode,true);}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom");var Z=mstrmojo.css,F=mstrmojo.dom;var a={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var e=this.value,d=this.inputNode,f=d.value,b=(e!==null&&e!==undefined)?String(e):"";if(b!==f&&(!this.keepEmpty||f!==this.emptyText)){d.value=b;}if(d.mstrmojoEmpty){Z.removeClass(d,[this.emptyClass]);d.mstrmojoEmpty=null;}}function Y(){var b=this.inputNode;b.value=this.emptyText||"";Z.addClass(b,[this.emptyClass]);b.mstrmojoEmpty=true;}function N(){var b=this.inputNode;if(b){this.readingDom=true;this.set("value",b.value);this.readingDom=false;}}function V(b){var d=this;if(b===-1){N.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete d._lastTimeoutId;N.call(d);},b||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,spellCheck:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown,mousedown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function S(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function O(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var b=this.inputNode;b.disabled=!this.enabled;Z.toggleClass(b,"disabled",!this.enabled);},onvalueChange:function P(){var b=this.value,d=(b===undefined)||(b===null)||(b==="");if(d){if(!this.hasFocus){Y.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(F.isIE9){this.inputNode.type=d?"text":this.type;}},ontooltipChange:function R(){this.domNode.title=this.tooltip;},onreadOnlyChange:function H(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){Z.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function W(){this._super();var b=this.inputNode;b.setAttribute("autocomplete",this.autoComplete?"on":"off");b.setAttribute("autocorrect",this.autoCorrect?"on":"off");b.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");b.setAttribute("spellcheck",this.spellCheck?"true":"false");},focus:function Q(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(b){}}},prefocus:function M(){this.hasFocus=true;A.call(this);},blur:function U(){this.inputNode.blur();},preblur:function X(){window.setTimeout(function(){},200);this.hasFocus=false;N.call(this);var b=this.value;if(((b===null||b==="")&&this.emptyText)||(this.keepEmpty&&b===this.emptyText)){Y.call(this);}},prekeyup:function I(d){var b=d.hWin,f=d.e||b.event;V.call(this,this.valueChangeDelay);var g=a[f.keyCode];if(this["on"+g]){this["on"+g](d);}},preinput:function J(){V.call(this,this.valueChangeDelay);},prepaste:function K(){V.call(this);},precut:function G(){V.call(this);},setInvalidState:function C(b){this.set("textValid",false);if(b){this.domNode.setAttribute("title",b);}},cleanUp:function L(){this.inputNode.value="";this.set("textValid",true);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasScrollbox","mstrmojo._HasLayout","mstrmojo._ShowsStatus");function E(J){var I=this.domNode,H=parseInt(this[J.toLowerCase()],10);return(isNaN(H))?I["offset"+J]:H;}mstrmojo.DocLayoutViewer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._HasScrollbox,mstrmojo._HasLayout,mstrmojo._ShowsStatus],{scriptClass:"mstrmojo.DocLayoutViewer",markupString:'<div id="{@id}" class="mstrmojo-DocLayoutViewer {@cssClass}" style="{@domNodeCssText}"><div></div><div><div class="mstrmojo-progress" style="display:none"><div class="mstrmojo-progress-barbg"><div class="mstrmojo-progress-bar"></div></div><div class="mstrmojo-progress-text"></div></div><div id="{@id}_fh"></div><div id="{@id}_scrollboxNode" class="mstrmojo-DocLayoutViewer-layout" style="{@_scrollCssText}"></div><div id="{@id}_ff"></div></div><div></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onborderChange:function(){if(this.border){this.domNode.style.border=this.border;}}},markupSlots:{groupBy:function(){return this.domNode.firstChild;},layout:function(){return this.domNode.childNodes[1].childNodes[2];},scrollboxNode:function(){return this.domNode.childNodes[1].childNodes[2];},containerNode:function(){return this.domNode.childNodes[1].childNodes[2];},incFetchNode:function(){return this.domNode.lastChild;},fixedHeaderNode:function(){return this.domNode.childNodes[1].childNodes[1];},fixedFooterNode:function(){return this.domNode.childNodes[1].childNodes[3];},_STATUS:function(){return this.domNode.childNodes[1].firstChild;},_STATUS_TXT:function(){return this.domNode.childNodes[1].firstChild.lastChild;},_STATUS_BAR:function(){return this.domNode.childNodes[1].firstChild.firstChild.firstChild;}},layoutConfig:{h:{groupBy:"auto",fixedHeaderNode:"auto",layout:"100%",fixedFooterNode:"auto",incFetchNode:"auto"},w:{layout:"100%"}},k:null,scrollboxHeightFixed:true,scrollboxWidthFixed:true,getHeight:function G(){return E.call(this,"Height");},getWidth:function B(){return E.call(this,"Width");},afterLayout:function A(){this._super();this.notifyScrollListeners();},preBuildRendering:function D(){if(this.parent){var J=this.parent[this.slot].style,I=this.height,H=this.width;this.height=(I!=="auto")?I:J.height;this.width=(H!=="auto")?H:J.width;}this.bs=this.model.bs;return this._super();},setSlotDimensions:function F(J,I,H){if(J==="layout"){this.scrollboxHeight=parseInt(I,10);this.scrollboxWidth=parseInt(H,10);}this._super(J,I,H);},onaddChild:function C(H){if(!isNaN(H.index)){var I=this.children[H.index];if(I&&I.slot==="groupBy"){this.docGroupBy=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.requiresDescs(9936,9937);var B=25,D=mstrmojo.desc;mstrmojo.android.ui.NoProjectsView=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.android.ui.NoProjectsView",markupString:'<div id="{@id}" class="mstrmojo-NoProjectsView"><div><div class="mstrmojo-NoProjectsViewImage"></div><div class="mstrmojo-NoProjectsViewMsg1">{@msg1}</div><div class="mstrmojo-NoProjectsViewMsg2">{@msg2}</div></div></div>',markupSlots:{wrapperNode:function(){return this.domNode.firstChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},preBuildRendering:function A(){this.msg1=D(9936,"No projects have been configured.");this.msg2=D(9937,"Contact your administrator");},postBuildRendering:function C(){this._super();var E=this.wrapperNode;E.style.marginTop=(-(E.clientHeight/2)-B)+"px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.array");var I=mstrmojo.array,J={containerNode:"100%",node1:"100%",node2:"100%"};mstrmojo.android.ui.ViewSwitcher=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.android.ui.ViewSwitcher",markupString:'<div id="{@id}" class="mstrmojo-AndroidSwitcher {@cssClass}" style="{@cssText}"><div class="switch-slider"><div class="switch-page"></div><div class="switch-page"></div></div><div class="overlay"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},sliderNode:function(){return this.domNode.firstChild;},node1:function(){return this.domNode.firstChild.firstChild;},node2:function(){return this.domNode.firstChild.lastChild;},overlayNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},layoutConfig:{h:J,w:J},getSlots:function E(){var M=this._curSlot||"node1",N=(M==="node1")?"node2":"node1";return{current:this[M],next:this[N],slot:N};},addChildren:function L(O,M,N){I.forEach(O,function(P){if(P.slot==="overlayNode"){P.ignoreLayout=true;}});this._super(O,M,N);},prepareNewView:function H(M,N){M.height=this.height;M.width=this.width;M.visible=true;M.slot=N;},switchView:function D(M,O){var Q=this.getCurrentView();if(M===Q){return ;}var P=this.getSlots(),N=this.getViewController(M),R=this.getViewController(Q);if(Q){if(R&&R.beforeViewHidden){R.beforeViewHidden(O);}}this.prepareNewView(M,P.slot);if(N&&N.beforeViewVisible){N.beforeViewVisible(O);}this.addChildren([M]);if(Q){this.removeChildren(Q);Q.unrender();if(R&&R.afterViewHidden){R.afterViewHidden(O);}}if(N&&N.afterViewVisible){N.afterViewVisible(O);}this.stackViews(P.slot);this.afterSwitch(M);},replaceView:function B(N,O,P){var M=I.indexOf(this.children,O);if(M===-1){return ;}var Q=O.slot;I.forEach([N,O],function(R){if(R.parent===this){this.removeChildren(R,true);R.unrender();if(!P){R.destroy();}}},this);this.prepareNewView(N,Q);this.addChildren([N]);return N;},stackViews:function C(M){I.forEach([1,2],function(N){var O="node"+N,P=this["node"+N];if(P){P.style.zIndex=(O===M)?3:1;}},this);},getCurrentView:function G(){var N=this._curSlot||"node2",M;I.forEach(this.children,function(O){if(O.slot===N){M=O;return false;}});return M;},getViewController:function K(M){return M?M.controller||M:null;},afterSwitch:function F(M){this._curSlot=M.slot;},doLayout:function A(){var N=this.node1.style,M=this.node2.style;N.height=M.height=this.height;N.width=M.width=this.width;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo._IsPanelStack","mstrmojo._IsSelectorTarget","mstrmojo._HasBuilder","mstrmojo._HasTouchScroller","mstrmojo._TouchGestures","mstrmojo.TouchScroller","mstrmojo.css");var U=mstrmojo.css,E=mstrmojo.dom,K=Math,A=700;function G(){var V=this._animHandle;if(V){window.clearTimeout(V);delete this._animHandle;}}function D(){delete this._animHandle;this._isAnimating=false;}function J(a,Z,Y,X){var W=this._translateX;if(Y||Z!==W){this._translateX=Z;G.call(this);if(a){this._isAnimating=true;}var V=this.containerNode.style;V[E.CSS3_TRANSITION_DURATION]=a+"ms";V[E.CSS3_TRANSFORM]=E.createTranslateString(-Z);if(X){var b=this.id;this._animHandle=window.setTimeout(function(){var d=mstrmojo.all[b];if(mstrmojo.all[b]._isAnimating){D.call(d);}},a*3);}if(this._scroller){this._scroller.raiseEvent({name:"transformAnim",x:Z,y:0});}}}function C(){if(!this.defn.dk){return ;}var d=this.children,a=0,V=d.length,Z=this.selectedIdx,b=[];for(a=0;a<V;a++){b.push('<div idx="'+a+'" class="');if(a===Z){b.push("on");}b.push('"><div></div></div>');}var X=this.selectorBtns,W=mstrMobileApp.getDeviceDPI();var Y={160:26,213:26,240:38,320:57},e=Y[W]||(Y[160]*W/160);X.style.width=(V*e)+"px";X.innerHTML=b.join("");this.selector.style.display="block";}mstrmojo.android.DocPanelStack=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._HasBuilder,mstrmojo._HasTouchScroller,mstrmojo._IsPanelStack,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.DocPanelStack",btnMarkup:"",markupString:'<div id="{@id}" title="{@tooltip}" class="mstrmojo-DocPanelStack {@cssClass}" style="{@domNodeCssText}"><div></div><div class="mstrmojo-PanelSelector"><div class="mstrmojo-SelectorBtns"></div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},selector:function(){return this.domNode.lastChild;},selectorBtns:function(){return this.domNode.lastChild.firstChild;}},formatHandlers:{domNode:["RW","B"]},scrollerConfig:{bounces:false,showScrollbars:false,vScroll:false,hScroll:true},addChildren:function I(d,g,e){this._super(d,g,e);var b=this.containerNode.style,f=this.getFormats(),W=this._pnlWidth=parseInt(f.width,10),h=parseInt(f.height,10),Z=this.selectedIdx;var Y=this.selectedIdx*W;b.width=(W*d.length)+"px";if(!E.isWinPhone){J.call(this,0,Y);}else{b.msTransform=Y;}var a=0,X=d.length;for(a=0;a<X;a++){var V=d[a];V.visible=true;V.selected=(a===Z);V.updatePanelDimensions(a*W,h,W);}C.call(this);this.updateScroller();return true;},postBuildRendering:function R(){this._super();C.call(this);var V=this.id;mstrmojo.dom.attachEvent(this.containerNode,E.CSS3_TRANSITION_END,function(W){var X=mstrmojo.all[V];if(W.target!==X.containerNode){return true;}G.call(X);W.stopPropagation();D.call(X);return false;});return true;},setInfoWindowDimensions:function S(a){var b=this.parent;if(b.scriptClass==="mstrmojo.DocPortlet"){b.setInfoWindowDimensions(a);}var X=a.h,f=a.w,V=this.domNode.style,Z=this.children,Y=Z.length,e="px",W;V.height=X+e;V.width=f+e;this.containerNode.style.width=(f*Y)+e;this._pnlWidth=f;this._translateX=(this.selectedIdx||0)*f;for(W=0;W<Y;W++){Z[W].updatePanelDimensions(W*f,X,f,true);}this.updateScroller();},getTitle:function H(){return this.title;},initScroller:function M(V){V.attachEventListener("scrollDone",this.id,function(W){this._translateX=W.x;});},updateScrollerConfig:function Q(){var X=this.children,Z=X&&X.length,W=this._super();W.noVScroll=true;if(Z){var V=this._translateX||0,Y=this._pnlWidth,a;a={start:K.max(V-Y,0),end:K.min(V+Y,Z*Y-Y)};mstrmojo.hash.copy({scrollEl:this.containerNode,offset:{x:a,scrollPast:false},origin:{x:V,y:0}},W);}return W;},onselectedIdxChange:function B(W){var V=this.selectorBtns,X=V&&V.childNodes;if(X){U.addClass(X[W.value],"on");U.removeClass(X[W.valueWas],"on");}},onselectedKeyChange:function F(X){this._super(X);var Y=this._pnlWidth,W=this.selectedIdx*Y;if(E.isWinPhone){var V=this.containerNode;V.style.position="relative";(new mstrmojo.fx.AnimateProp({props:{left:{isStyle:true,start:W,stop:this.prevSelectIdx*Y,suffix:"px",ease:mstrmojo.ease.linear}},duration:0,target:V})).play();}else{J.call(this,0,W);}this.updateScroller(true);},touchBegin:function N(V){if(this._isAnimating){V.stop();return false;}if(!this.defn.sw&&!E.contains(this.selector,V.target,true,this.domNode)){return false;}return this._super(V);},touchTap:function P(b){var Z=b.target,W=this.domNode;if(E.contains(this.selector,Z,true,W)){var a=this.selectorBtns,X=-1;if(E.contains(a,Z,true,W)){X=E.findAncestorByAttr(Z,"idx",true,a).value;}else{X=this.selectedIdx+((b.clientX-W.offsetLeft<(this._pnlWidth/2))?-1:1);}if(X>-1){var V=this.children[X];if(V){this.selectPanel(V.k);}}}else{var Y=this.controller;if(Y&&Y.viewTap){Y.viewTap();}}},touchSwipeBegin:function L(V){if(this.defn.sw||E.contains(this.selector,V.target,true,this.domNode)){return this._super(V);}return this.bubbleTouchEvent(V);},touchSwipeEnd:function O(Y){Y.evt.handled=true;mstrmojo.TouchScroller.ScrollIndicators.hideAll();var b=this._translateX||0,V=this._pnlWidth,X=this._scroller.offset.x,Z=K.max(K.min(b-Y.delta.x,X.end),X.start),e=b-Z,a=K.abs(e),W=A,d=(a<V*0.2);if(d){Z=b;W*=a/V;}else{Z=b+((e<0)?V:-V);W*=(V-a)/V;}J.call(this,K.round(W),Z,true,d);this.selectPanel(this.children[Z/V].k,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.Container","mstrmojo.ListBase","mstrmojo.android._IsList","mstrmojo.android._IsIncFetchList","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller");var H=mstrmojo.array,J=mstrmojo.hash.copy,G=mstrmojo.TouchScroller.EnumIncFetchEdges,D=G.start,C=50,F=20,B=false;function L(Q,M){if(this.end===null||isNaN(this.end)||this.start===null||isNaN(this.start)){this.ifDirection="h";this.supportedEdges=0;H.forEach(["start","end"],function(R){this.supportedEdges+=isNaN(this[R])?G[R]:0;},this);var P=this,N;this.ifDataHelper=new mstrmojo.Obj({totalSize:-1,next:function O(V,U){var S=[],R=-1;S=S.concat(P.items);if(U===D){for(N=0;N<C;N++){S.splice(0,0,{n:--Q});}S=S.splice(0,C+F);M=Q+C+F-1;R=C;}else{for(N=0;N<C;N++){S.push({n:++M});}S=S.splice(S.length-C-F);Q=M-C-F;R=F-3;}P.set("items",S);window.setTimeout(function(){B=true;P.singleSelect(R);},0);V.success({items:undefined});}});}}mstrmojo.android.ui.CalendarYearList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller,mstrmojo.android._IsIncFetchList],{scriptClass:"mstrmojo.android.ui.CalendarYearList",years:undefined,scrollerConfig:{bounces:false,showScrollbars:false,scrollPast:true},getItemMarkup:function(N,M){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}"><span>{@n}</span><div class="marker"></div></{@tag}>';},postCreate:function K(O){if(this._super){this._super();}var Q=(this.start)||(new Date(0)).getFullYear(),M=(this.end)||((new Date()).getFullYear()+5),P=Q,N=this.items=this.items||[];while(M>=P){N.push({n:P++});}L.call(this,Q,M);},postBuildRendering:function A(){this._super();var M=this.ITEMS_NODE_WIDTH=this.itemsNode.clientWidth;this.updateScroller();this.singleSelectByField(this.initialYear,"n");this._scroller.attachEventListener("scrollDone",this.id,function(N){var Q=(N.x+(parseInt(this.width,10)-M)/2)/M,P=Math.floor(Q),O=P;O+=((Q-P)>0.3)?1:0;if(O!==this.selectedIndex){this.singleSelect(O);}else{this.onchange();}});},onchange:function(){var M=this.selectedIndex;if(M>=0){var O=this.ITEMS_NODE_WIDTH,N=(M*O)-(parseInt(this.width,10)-O)/2;this._scroller.scrollTo(N,undefined,B?0:200);this.raiseEvent({name:"yearChanged",value:this.selectedItem.n});B=false;}},updateScrollerConfig:function E(){var N=this._super(),P=this.itemsContainerNode,M=parseInt(this.width,10);if(isNaN(M)){M=this.domNode.clientWidth;}N.scrollEl=P;N.noVScroll=true;N.origin=N.origin||{x:0,y:0};var Q=Math.max(P.clientWidth-M,0),O=N.hScroll=(Q!==0);if(O){N.offset={x:J({start:0,end:Q},N.offset&&N.offset.x)};}else{N.offset=undefined;}return N;},destroy:function I(){if(this.ifDataHelper){this.ifDataHelper.destroy();delete this.ifDataHelper;}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var E=function(){var G=this.opener;if(G.direction.toLowerCase()==="up"){this.domNode.style.top=-G.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"",text:"",direction:"down",enabled:true,title:"",allowHTML:true,markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.getTextInnerHTML();},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function C(){if(this._super){this._super();}var G=this.popupRef;if(G){if(G.nudge){G.nudge=mstrmojo.func.composite([G.nudge,E]);}else{if(this.direction.toLowerCase()!=="down"){G.nudge=E;}}}},popupRef:null,popupOpenConfig:null,destroy:function D(G){var H=this.popupRef;if(H&&H.hasRendered){H.destroy(false);}if(this._super){this._super(G);}},togglePopup:function F(){var G=this._lastOpened;if(G&&G.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(G){this.togglePopup();},getTextInnerHTML:function B(){return this.allowHTML?this.text:mstrmojo.string.encodeHtmlString(this.text);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.Image","mstrmojo._TouchGestures");mstrmojo.android.ui.Image=mstrmojo.declare(mstrmojo.Image,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Image",touchTap:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.ImageToggle","mstrmojo._IsInputControl");mstrmojo.ToggleDIC=mstrmojo.declare(mstrmojo.ImageToggle,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.ToggleDIC",init:function(A){this._super(A);this.unset=this.dic.ust;},focus:function(){this.domNode.focus();},onvalueChange:function(){},onblur:function(B){var A=B.e||B,C=this.domNode,D=mstrmojo.boxmodel.offset(C,document.body);if(A.clientX>D.left&&A.clientX<D.left+C.offsetWidth&&A.clientY>D.top&&A.clientY<D.top+C.offsetHeight){this.domNode.focus();}else{this.applyChanges();}},postBuildRendering:function(){if(this._super){this._super();}if(this.showByDefault){var A=this.openerStyle;this.width=A.iw;this.height=A.ih;this.set("imageList",this.dic.vls);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.EnumRWUnitType","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.hash","mstrmojo.Button","mstrmojo.vi.ui.rw._IsOutlineXtab","mstrmojo.css");mstrmojo.requiresDescs(619,1442,15963,16112,16113);var B=mstrmojo.EnumRWUnitType,A=mstrmojo.vi.viz.EnumVizStyles,Q=mstrmojo.hash,C={},N=mstrmojo.array,V=mstrmojo.DynamicClassFactory.newComponent;C[B.HEADER]=C[B.FOOTER]=C[B.PAGEHEADER]=C[B.PAGEFOOTER]=C[B.DETAILS]={n:"Section"};C[B.HTMLCONTAINER]={n:"HTMLContainer"};C[B.SELECTOR]={n:"Selector"};C[B.GRID]={n:"Xtab"};C[B.MOJOVISUALIZATION]={n:"MojoVisualization"};function D(a){return(a&&a.t)||mstrmojo.EnumRWUnitType.LAYOUT;}mstrmojo.DocBuilder=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.DocBuilder",visList:null,selectorFactory:null,classMap:null,init:function U(a){this._super(a);var b=this.selectorFactory=this.createSelectorFactory();this.addDisposable(b);this.classMap=this.createClassMap();},createSelectorFactory:function Z(){this.throwAbstractMethodError("getSelectorFactory");},createClassMap:function F(){return Q.copy(C);},getMojoVisName:function W(e){var d=e.data,f=d&&d.visName||"",a=D(e.defn),b=d&&d.vis;if(!f){if(b&&(a===B.GRID||a===B.GRAPH||a===B.GRIDGRAPH)){if(b.vn&&b.ve&&b.vm===51){f=Q.walk("dz.visProp.fmt.visStyle",d)||b.vn;}else{if(b.we&&b.wcn){f=this.visList.findVisName(b.wcn);}}}}if(f===A.NEW_GRAPH_MATRIX){if(mstrApp.supportFeature&&mstrApp.supportFeature("ngm")){if(mstrApp.supportFeature("ngmPartial")){if(N.indexOf([76,79,80,81,82],Q.walk("data.dz.visProp.fmt.visType",e))<0){f=A.GRAPH_MATRIX;}}}else{f=A.GRAPH_MATRIX;}}return f;},build:function P(a,j,u){var s=this.classMap,k=[],o=((a&&a.length)||0),h,e,f,b,g,d,q,p,t;for(h=0;h<o;h++){e=a[h];f=e&&e.defn;b=e&&e.data;g=D(f);d=s[g];if(j.isMapLayerNode(e.k)){continue;}if(g===B.TEXTFIELD&&((f&&f.dpst))){d=s[g+"B"];}q=this.getMojoVisName(e);if(q){b.visName=q;d=C[B.MOJOVISUALIZATION];}if((q||g===B.GRID)&&f.iifp){d=C[B.SELECTOR];f.style=mstrmojo.DocSelector.STYLES.VISUALIZATION;}p=(d&&d.n)?"new"+d.n:"";t=undefined;if(this[p]){t=this[p](j,e,d,u);}else{if(d&&d.scriptClass){var l=d.cls;if(!l){l=Q.walk(d.scriptClass,window);}if(l){t=this.newRWUnitInstance(j,e,l);}}}if(t){t.k=e.k;t.builder=this;t.tooltip=b.tooltip||f.tooltip||"";if(f.iifp){t.style=mstrmojo.DocSelector.STYLES.VISUALIZATION;}if(!t.defn){t.defn=f;delete t.defn.destroyed;t.disposables.push(t.defn);}if(t.update){t.update(e);}if(this.isPortlet(f)){t=this.createPortlet(g,e,t,u);}if(!this.extractWidget(t,e)){k.push(t);}}}return k;},createPortlet:function H(b,d,a,e){return a;},newRWUnitInstance:function S(a,d,e,b){return new e(Q.copy(b||{},{id:d.id,node:d,controller:this.parent.controller,model:a}));},newSection:function X(a,b){this.throwAbstractMethodError("newSection");},newSelector:function M(d,e,b,f){var a=this.selectorFactory.newDocSelector(d,e,b,f);a.controller=this.parent.controller;return a;},isPortlet:function R(a){return !!((a.t!==B.PANEL&&a.ttl!==undefined)||a.qsm);},extractWidget:function O(b,a){return !b;},getDefaultMojoVisModel:function J(){this.throwAbstractMethodError("getDefaultMojoVisModel");},newMojoVisualization:function(g,s){var u=this.visList,b=s.data,AC=b.visName===A.ESRI_MAP?A.GOOGLE_MAP:b.visName,t=u.getVis(AC),z=t&&((t.dc!==undefined)?t.dc:t.c),AD=this;if(!t){var e=b.className,AE=false;if(!e){if(!this._widgetNotFound){this._widgetNotFound=[];}N.forEach(this._widgetNotFound,function(AG){if(AG.name===AC){AE=true;}});if(!AE){this._widgetNotFound.push({key:b.k,name:AC});}var j=mstrApp.isWorkstation,AA=j&&FormWrapper.isDesktop(),l=j&&!(parseInt(FormWrapper.isWSLiveMode(),10)===1),f=l?16113:16112,w=l?'The following custom visualization(s) plug-in(s) used in this dossier are not deployed in $$$$, so the data will be displayed in tabular form:<br>####<br><br>Click on the "plus" button in the Visualizations Gallery to import custom visualization plug-in(s).':"The following custom visualization(s) plug-in(s) used in this dossier are not deployed in your environment, so the data will be displayed in tabular form:<br>####<br><br>Please contact your administrator to deploy these custom visualization plug-in(s).";if(!this._showWarning){this._showWarning=window.setTimeout(function(){var AG=[];N.forEach(this._widgetNotFound,function(AH){AG.push(AH.name);});mstrmojo.warn(mstrmojo.desc(f,w).replace("$$$$",AA?mstrmojo.desc(619,"Desktop"):mstrmojo.desc(15963,"Workstation")).replace("####",AG.join("<br>")),{},{buttons:[{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(1442,"OK"),onclick:function(){delete AD._widgetNotFound;delete AD._showWarning;}}],allowHTML:true});}.bind(this),0);}var AF=this.newXtab(g,s);AF.cssDefault=!!AF.cssDefault?AF.cssDefault+" noVis":"noVis";return AF;}t={dc:e};}var d="mstrmojo."+z,p=t.b;if(mstrApp.isVI&&t.vib){p=t.vib;}else{if(mstrApp.isExpress&&t.oivmb){p=t.oivmb;}}if(p&&!mstrmojo.loader.isLoaded(d)){mstrmojo.requiresBundle(p);}mstrmojo.requiresCls(d);if(t.lib){var AB=mstrmojo.getJsRoot();var k=JSON.parse(t.lib);N.forEach(k,function(AG){mstrmojo.requiresDepLib(AB+AG[0],AG[1]);});}var a=this.visList.getVis(AC).m,q=Q.walk(z,mstrmojo),x=a?Q.walk(a,mstrmojo):this.getDefaultMojoVisModel();if(!q||!x){throw new Error("Missing visualization class.");}q=u.getVisClass(q,s.defn);var o=new q(Q.copy(b.extProps,{id:s.id,node:s,n:s.defn.title,controller:this.parent.controller,gb:b.gbys}));var h=new x({xtab:o,controller:this.parent.controller,docModel:g});o.setModel(h);h.set("data",b);return o;},getModelClassByVisName:function L(d){var a,e,b=this.visList.getVis(d);if(!b){return null;}a=b.m;e=a?Q.walk(a,mstrmojo):this.getDefaultMojoVisModel();return e;},getEditableXtab:function G(a){this.throwAbstractMethodError("getEditableXtab");},getDefaultXtab:function E(a){this.throwAbstractMethodError("getDefaultXtab");},getCustomSortXtab:function I(){this.throwAbstractMethodError("getCustomSortXtab");},newXtab:function K(d,e,b,g){var f=mstrmojo.all[e.id];if(!f){var a=e.defn.iics?this.getCustomSortXtab():(e.defn.txi?this.getEditableXtab(e):this.getDefaultXtab(g));if(e.data&&e.data.olm&&!(e.data.rw&&e.data.rw.row.bc>0)&&!e.defn.txi){a=V(a,[mstrmojo.vi.ui.rw._IsOutlineXtab]);}f=this.newRWUnitInstance(d,e,a);f.model=this.newXtabModel({xtab:f,docModel:d});}else{f.set("node",e);f.model.set("docModel",d);}return f;},newXtabModel:function Y(a){this.throwAbstractMethodError("newXtabModel");}});mstrmojo.DocBuilder.ClassMapItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.OfflineTransactionModel","mstrmojo.Button");mstrmojo._CanSupportOfflineTransactions=mstrmojo.provide("mstrmojo._CanSupportOfflineTransactions",{_mixinName:"mstrmojo._CanSupportOfflineTransactions",getTransactionNotificationController:function A(){var F=this.txNtfCtlr;if(this.oflnTxModel&&(!F||!mstrmojo.all[F.id])){F=this.txNtfCtlr=mstrApp.controllerFactory.newController("Transactions",{model:this.oflnTxModel,rootCtrl:mstrApp.rootController});}return F;},submitTransactionQueue:function D(F,G){mstrMobileApp.submitOfflineTransactions(F,G,"mstrApp.onSubmitTransactionQueueDone");},onSubmitTransactionQueueDone:function C(F,G){if(this.oflnTxModel){this.oflnTxModel.onSubmitDone(F);}if(F){mstrApp.rootController.generateActionToolbar();mstrmojo.toast(mstrmojo.desc(9724,"All pending transactions have been successfully submitted"));}else{mstrmojo.toast(mstrmojo.desc(9261,"A background transaction submission failed"));}},submitOfflineTransaction:function E(){if(this.oflnTxModel){this.oflnTxModel.submitOfflineTransaction();}},refreshOfflineTransactionModel:function B(){if(this.oflnTxModel){this.oflnTxModel.refresh();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.MenuItem=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.MenuItem",markupString:'<div id="{@id}" class="mstrmojo-MenuItem {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-MenuItem-text"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.css","mstrmojo.hash");var H=mstrmojo.css,D=mstrmojo.hash,B="glow";var F=mstrmojo.android.ui.Button=mstrmojo.declare(mstrmojo.Button,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Button",onclick:mstrmojo.emptyFn,touchBegin:function E(){if(this.enabled){H.addClass(this.domNode,B);}},touchTap:function C(J){if(this.enabled){this.onclick({e:J.evt});}},touchSelectBegin:mstrmojo.emptyFn,touchSelectEnd:function A(J){if(this.enabled){this.onclick({e:J.evt});}},touchEnd:function I(){H.removeClass(this.domNode,B);}});F.prototype.markupString=F.prototype.markupString.replace(new RegExp(" mstrAttach:[a-zA-Z,]*"),"");F.newButton=function G(M,L,K){var J={scriptClass:"mstrmojo.android.ui.Button",text:M};if(L){J.onclick=L;}D.copy(K,J);return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._IsAndroidInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.Button","mstrmojo.url");mstrmojo.requiresDescs(1442,2140);var A=mstrmojo.Button.newInteractiveButton;var F="##mstr_signature_image_path##";mstrmojo.android.inputControls.SignatureDIC=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsAndroidInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.SignatureDIC",markupString:"<div></div>",hasSignature:false,showInPopup:function C(){var G=this.ownerCell||this.owner;this.captureSignature();},captureSignature:function B(){mstrMobileApp.captureSignature(JSON.stringify({serverURL:mstrApp.getConfiguration().getTaskUrlByProject(mstrApp.getCurrentProjectId()),sessionState:mstrApp.getSessionState(),showGuideLine:this.dic.sgl}),'mstrmojo.all["'+this.id+'"].signatureCaptured');},signatureCaptured:function D(G){this.value=G;this.applyChanges();},renderPreview:function E(){var J="",H=this.ownerCell||this.owner,I=this.openerNode,G=this.value;if(H.mdf&&/(png|jpg)$/.test(G)){G=G.replace(F,"");J='<img src="'+G+'" style="max-height:'+I.clientHeight+"px;max-width:"+(I.clientWidth-30)+'px;"></img>\u00a0';}this.renderPreviewButton(I,J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.css","mstrmojo.dom","mstrmojo.GridBase","mstrmojo.array");var Y=mstrmojo.css,O=mstrmojo.color,e=mstrmojo.css,E=mstrmojo.dom,I=E.isEdge;function C(g,h){var j=g&&g.parent;while(j&&j.scriptClass.indexOf("DocPanelStack")===-1){if(h in j){return j;}j=j.parent;}return null;}function B(h){var g=document.createElement("img");h.appendChild(g);h.removeChild(g);}function F(g,h){var k=Math.floor(g/h.rowsPerPage),o=g%h.rowsPerPage,l=h.tableNode.tBodies[k],j=l.rows[o].cells;return j;}function J(){var g=this._renderTimer;if(g){self.clearInterval(g);delete this._renderTimer;this.renderingRows=false;}}mstrmojo.Grid=mstrmojo.declare(mstrmojo.GridBase,null,{scriptClass:"mstrmojo.Grid",rowsPerPage:0,effectiveRh:0,numPagesRendered:0,totalPages:0,pageStatus:null,_defaultPageHeight:0,renderPause:10,rhMin:14,defaultRowsPerPage:100,minRowsPerPage:50,init:function H(g){this._super(g);this.forceFixedSizes=true;},initPageSettings:function P(){var k=this.parent,h=k.gridData,j=this.defaultRowsPerPage,g=this.cp.getAvailableRowsCount();this.effectiveRh=this.rh||this.rhMin||1;this.effectiveRh=this.effectiveRh*k.model.docModel.getZoomFactor();if(k&&k.numRowFixed){j=g;}else{if(k&&k.scrollboxHeightFixed){j=Math.ceil(k.scrollboxHeight/this.effectiveRh);j=Math.max(j,this.minRowsPerPage);if(g<j){j=this.minRowsPerPage;this._shouldRenderNextPage=true;}}}if(k.isOutlineMode){j=Math.min(200,g);}this.pageStatus=[];this.rowsPerPage=j;this.initPageStatus(this.pageStatus);this._defaultPageHeight=this.rowsPerPage*this.effectiveRh;},initPageStatus:function b(k){var j=this.rowsPerPage,g,o,h,l=function(s,t,p){var q=this;return function(){if(q._onDemand===undefined){q._onDemand=!s.isDataAvailable(t,p);}return q._onDemand;};};this.totalPages=(j&&Math.ceil(this.cp.rc/j))||0;k=k||this.pageStatus;for(g=0;g<this.totalPages;++g){o=g*j;h=o+j-1;if(!k[g]){k[g]={};}delete k[g]._onDemand;k[g].isOnDemand=l.call(k[g],this.cp,o,h);}},buildRendering:function G(){var g=false;if(this.renderMode==="vscroll"){this.initPageSettings();var k=this.pageStatus[0];g=k&&k.isOnDemand();this.start=0;this.end=-1;if(!g){this.end=Math.min(this.cp.rc,this.rowsPerPage)-1;}this.preRenderPages();this.preRenderPage(0,!g);}this._super();if(this.renderMode==="vscroll"){var j=this.parent;this.gridContainerNode.style[e.MINHEIGHT]=(this.cp.rc*this.effectiveRh)+"px";if(!this.connectedScrollbox){if(j&&j.connectScrollbox){j.connectScrollbox(this);this.connectedScrollbox=true;}}this.postRenderPage(0,!g);this.postRenderPages();var h=j&&!j.scrollboxHeightFixed&&!j.numRowFixed;if(h&&this.numPagesRendered>=this.totalPages&&!g){this.postRenderingCleanup();}else{if(g||h||this._shouldRenderNextPage||(j.isOutlineMode&&this.getPageHeight(this.pageNum)<this._defaultPageHeight)){this.onscroll();delete this._shouldRenderNextPage;}}}},preRenderPages:function S(){},postRenderPages:function d(){if(mstrApp&&mstrApp.isExpress){var h=this.parent.scrollboxNode,j=h.scrollTop,k=h.scrollLeft,g=(j>5)?j-5:0;this.parent.scrollTo({x:k,y:g});this.parent.scrollTo({x:k,y:j});}},configureActions:function N(){var g=this.parent;if(g&&g.configureActions){g.configureActions();}},preRenderPage:function Q(g,h){this.pageNum=g;},postRenderPage:function L(h,k,l){if(h+1>this.numPagesRendered){this.numPagesRendered=h+1;}var g=this.pageStatus,j=g[h];if(!j){j=g[h]={};}if(k){j.filled=true;j.dirty=false;}var o=this.gridContainerNode.style;if(h===this.totalPages-1&&o){o[e.MINHEIGHT]="";}},invalidAllPages:function(){for(var g=0;g<this.totalPages;++g){var h=this.pageStatus[g];if(h.filled){h.dirty=true;}delete h._onDemand;h.filled=false;h.isDownloading=false;}this.thPosMap=[];this.posMap=[];},_startPageRenderThread:function f(g){var h=this.id;this.renderingRows=true;this._renderTimer=self.setInterval(function(){try{var l=mstrmojo.all[h];if(!l){return ;}var j=l.getPagesToRender(g);if(j.length>0){l.preRenderPages();l.renderPages(j);l.postRenderPages();l._postPagesClearup=true;}else{if(l._postPagesClearup){l.postRenderPagesCleanup();l.configureActions();l._postPagesClearup=false;}J.call(l);if(l.isRenderingComplete()){l.postRenderingCleanup();}}}catch(k){J.call(mstrmojo.all[h]);throw k;}},this.renderPause);},onscroll:function a(h,g){if(!this.renderingRows){if(h===true){var j=this.parent;if(j&&j.maskNode){Y.addClass(j.maskNode,"wait");}}window.clearTimeout(this.scrollingTimeOut);this.scrollingTimeOut=window.setTimeout(function(){this._startPageRenderThread(g);}.bind(this),150);}},isRenderingComplete:function R(){if(this.end>=this.cp.rc-1){for(var g=this.pageStatus,h=this.totalPages-1;h>-1;h--){if(!g[h]||!g[h].filled){return false;}}return true;}return false;},renderPages:function D(h){for(var j=0,g=h.length;j<g;++j){this.renderPage(h[j].idx,h[j].fill,j!==g-1);}},renderPage:function Z(u,j,z){var AB=this.pageStatus,o=(this.numPagesRendered>=u+1);if(o){if(!j||(AB[u]&&AB[u].filled)){return ;}}var AA=this.rowsPerPage,q=this.domNode,t=this.parent;this.start=u*AA;this.end=Math.min(this.start+AA,this.cp.rc)-1;this.preRenderPage(u,j);if(j&&t.isOutlineMode){t.hasEmptyTBody=true;}var h=this.tempTable;if(!h){h=this.tempTable=q.ownerDocument.createElement("div");}var x=this.tableNode,w=this.start,k=this.end,s=j?this.buildTableRowsMarkup(w,k,'<table><tbody n="'+this.pageNum+'">',"</tbody></table>",x.style.tableLayout).join(""):'<table><tbody n="'+this.pageNum+'"><tr><td style="height:'+(t.isOutlineMode?this._defaultPageHeight:(this.effectiveRh*(this.end-this.start+1)))+'px">&nbsp;</td></tr></tbody></table>';if(j&&t.hasEmptyTBody){if(!t.outlineState.hasTBodyElementsToExpand){s='<table><tbody n="'+this.pageNum+'"><tr style="height:'+0+'px"></tr></tbody></table>';}else{t.outlineState.hasTBodyElementsToExpand=false;}}h.innerHTML=s;var l=h.firstChild.tBodies[0];if(!o){x.appendChild(l);if(t.isOutlineMode&&t.isAutoTableLayout()){if(t.clonedColHeader){t.clonedColHeader.getTableNode().appendChild(l.cloneNode(true));}if(t.clonedTitle&&t.clonedTitle.getTableNode()){t.clonedTitle.getTableNode().appendChild(l.cloneNode(true));}}}else{x.replaceChild(l,x.tBodies[u]);}if(l&&mstrApp&&mstrApp.isSingleTier){E.redirectUrlToFormWrapper(l);}if(j){this.markPages(w,k);}this.postRenderPage(u,j,l);var g=this.parent;if(g.onPageRendered){g.onPageRendered(l,u,o,j,z);}},getPagesToRender:function V(AA){var x=[],AC=this.parent,AM=this._defaultPageHeight,q=null,AN=this.pageStatus,AO=this;function u(j){var p=AN[j];if(p&&(p.filled||p.dirty)){if(!q){q=AO.tableNode.tBodies;}p.height=q[j].getBoundingClientRect().height;if(I){p.height-=11;}return p.height;}else{return AM;}}var t=0,s=null,z=null,k=AC.scrollboxTop;for(var AI=0,AJ=this.totalPages,g=this.pageStatus;AI<AJ;AI++){t+=u(AI);if(t>=k){s=AI>0?AI-1:AI;break;}}if(s===null){s=z=Math.max(AJ-1,0);}else{var AB=AC.scrollboxBottom;if(isNaN(AB)&&AC.numRowFixed){AB=k;}for(var AH=s+1;AH<AJ;AH++){if(parseInt(t,10)>AB){z=AH;break;}t+=u(AH);}}if(z===null){z=AJ-1;}else{if(z<AJ-1&&z<=s){z=z+1;}}for(var AD=this.numPagesRendered;AD<s;++AD){x.push({idx:AD,fill:false});}var AG=0,AK=this.rowsPerPage,w=false;for(var AE=s;AE<=z;++AE){var AL=AN[AE];if(!AL||!AL.filled){if(AL&&AL.isOnDemand()){w=true;if(!AL.isDownloading&&!this.isDownloading){AG+=AK;AL.isDownloading=true;this.isDownloading=true;var o=AE*AK,l=o+AK-1;this.cp.download(o,l,AA);}x.push({idx:AE,fill:false});}else{x.push({idx:AE,fill:true});}}}if(AC.isOutlineMode&&x.length===0){var AF=AC.scrollboxNode.getBoundingClientRect().bottom;while(x.length===0&&z<this.totalPages-1){var h=q[z].getBoundingClientRect().bottom;if(h<AF){z++;if(!AN[z].filled){x.push({idx:z,fill:true});}}else{break;}}}if(w){this.parent.showDownloadStatus(AG);}else{if(this.parent.closeDownloadStatus){this.parent.closeDownloadStatus();}}return x;},addHilitePosition:function(h,k,g){var l=this.hiliteCellsMap[h];if(!l){this.hiliteCellsMap[h]={pos:[],nodes:[]};}var j=k-(this.pageNum||0)*this.rowsPerPage;this.hiliteCellsMap[h].pos.push({row:j,cell:g,page:this.pageNum});},setHilites:function(k,l){var o=l.getAttribute("ei"),p=this.eiMap[o],g=this.getNodesByPositions(p);if(!g.length){this._super(k,l);return ;}for(var j=0,h=g.length;j<h;j++){this._super(k,g[j]);}},addExtraInfoMap:function(h,j,g){if(!this.eiMap[h]){this.eiMap[h]=[];}this.eiMap[h].push(this.getPosObj(j,g));},addPositionMap:function(h,j,g){if(!this.posMap[h]){this.posMap[h]=this.getPosObj(j,g);}},addTitleHeaderPositionMap:function(j,g,h){var k=this.getPosObj(j,g);k.obj=h;this.thPosMap.push(k);},getPosObj:function(h,k){var j=this.pageNum||0,g=this.rowsPerPage||0;return{row:h-j*g,cell:k,page:j};},getNodeByPosition:function(g){return this.tableNode.tBodies[g.page].rows[g.row].cells[g.cell];},getRowIdxByCell:function(g){var h=this.posMap[g._ei];return h.page*this.rowsPerPage+h.row;},getNodesByPositions:function(s){var l=[];for(var j in s){var u=s[j],h=(u&&u.page)||0,g=u&&u.row,o=u&&u.cell,k=this.tableNode.tBodies[h],q=k&&k.rows[g],t=q&&q.cells[o];if(t){l.push(t);}}return l;},getPageHeight:function U(g){var h=this.tableNode.tBodies;return(h&&h[g]&&h[g].offsetHeight)||0;},getTargetCell:function(s,q){var o=0,k=0,p;for(p=this.totalPages;k<p;k++){o+=this.getPageHeight(k);if(q<=o){break;}}var l=this.tableNode.tBodies[k];if(l){for(k=0,p=l.rows.length;k<p;k++){var w=l.rows[k];for(var g=0,u=w.cells.length;g<u;g++){var t=w.cells[g];if(t.offsetTop+t.offsetHeight>=q){if(s>=t.offsetLeft&&s<=t.offsetLeft+t.offsetWidth){return t;}}else{break;}}}}},postRenderPagesCleanup:function K(){var j=this.parent;if(j&&j.gridData&&j.gridData.afc){var h=this.tableNode;if(h&&(this.lastWidth!==h.offsetWidth)){if(j.onGridWidthChanged){j.onGridWidthChanged();}mstrmojo.array.forEach(this.pageStatus,function(k){delete k.height;});this.lastWidth=h.offsetWidth;}var g=C(j,"adjustAutoWidth");if(g){g.adjustAutoWidth(j);}}if(j.gridPagesRendered){j.gridPagesRendered();}if(mstrmojo.dom.isIE&&!mstrmojo.dom.isIE8){B(this.domNode);}if(j&&j.maskNode){Y.removeClass(j.maskNode,"wait");}this.hightLightChangedCells();},hightLightChangedCells:function M(){var s=this.cp.getUpdatedRows(),l=this,q,g,p,t,j,k,o,h=[];if(s){mstrmojo.hash.forEach(s,function(w,u){o=parseInt(u,10);q=l.cp.getRowCells(o);g=F(o,l);p=g.length;t=q.length-1;if(t>=0){for(j=p-1;j>=0;j--){k=g[j];if(t<0){break;}if(q[j]._d){var z=k.style.backgroundColor,x=k.style.color;h.push({dom:k,bgcolor:z,ftcolor:x});k.style.backgroundColor=O.getHighlightColor(O.rgbStr2rgb(e.getStyleValue(k,"backgroundColor"),true));k.style.color=O.getContrastingColor(O.rgbStr2hex(e.getStyleValue(k,"backgroundColor")),"#ffffff","#000000");delete q[j]._d;}t--;}}});if(h.length>0){window.setTimeout(function(){mstrmojo.array.forEach(h,function(u){u.dom.style.backgroundColor=u.bgcolor;u.dom.style.color=u.ftcolor;});},300);}}},postRenderingCleanup:function A(){var g=this.parent;if(g&&this.connectedScrollbox){g.disconnectScrollbox(this);}this.connectedScrollbox=false;if(g&&!g.scrollboxHeightFixed){var h=C(g,"performCanGrowCanShrink");if(h){h.performCanGrowCanShrink([g],true);}}},getRowInfoByPosition:function(g){return this.cp.getRowCellInfo(g);},unrender:function X(g){J.call(this);if(this.connectedScrollbox){this.parent.disconnectScrollbox(this);this.connectedScrollbox=false;}this.numPagesRendered=0;this.lastWidth=0;this.isDownloading=false;this.unMarkAllPages();this._super(g);},dataDownloaded:function W(){this.isDownloading=false;this.initPageStatus();this.onscroll();}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo.android._IsList","mstrmojo._HasTouchScroller","mstrmojo.android.selectors._SupportsHoriz","mstrmojo.css");mstrmojo.android.selectors.CheckList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._TouchGestures,mstrmojo.android._IsList,mstrmojo._HasTouchScroller,mstrmojo.android.selectors._SupportsHoriz],{scriptClass:"mstrmojo.android.selectors.CheckList",hasEvenRows:true,init:function A(C){this._super(C);var B=["selector-checklist"];if(this.multiSelect){B.push("multi");}mstrmojo.css.addWidgetCssClass(this,B);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo.android._IsList","mstrmojo._HasTouchScroller","mstrmojo.android.selectors._SupportsHoriz","mstrmojo.css");var B,A=/line-height:(\d*)px/,C=mstrmojo.css;function G(I){if(this.parent.defn.ct!=="4"){return ;}mstrmojo.css[(I?"add":"remove")+"Class"](this.domNode,"glow");}mstrmojo.android.selectors.ButtonBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._TouchGestures,mstrmojo.android._IsList,mstrmojo._HasTouchScroller,mstrmojo.android.selectors._SupportsHoriz],{scriptClass:"mstrmojo.android.selectors.ButtonBar",cssClass:"selector-btnbar",getItemMarkup:function F(I){if(!B){B=this._super(I).replace("{@en@n}","<div>{{@en@n}</div>");}return B;},getItemProps:function D(M,I){var L=this._super(M,I),K=L.style,J=K.match(A);if(J){L.style=K.replace(A,"line-height:"+(parseInt(J[1],10)-2)+"px");}return L;},touchBegin:function H(){G.call(this,true);},touchEnd:function E(){G.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(G,F){if(!A){var H=this.itemField;A=this._super(G).replace('@title}">{@en@n}<',"@en@"+H+'}">{@en@'+H+"}<");}return A;},getItemProps:function C(H,F){var G=this._super(H,F),I=this.itemField;if(!mstrmojo.string.isEmpty(H[I])){G[I]=H[I];}return G;},onclick:function B(F){if(this.disableClick){return false;}var K=this,H=this.parent,J=H.opener,G=D.isMetaKey(F.hWin,F.e);if(G&&!this.multiSelect){this.multiSelect=J.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var M=K.selectedIndices;if(J){J.suggestionShown=false;if(M&&!E.isEmpty(M)){var L=[];E.forEach(K.selectedIndices,function(O,N){L.push(K.items[N]);});J.handleSuggestionItemSelect(L);}H.close();}K.multiSelect=false;});}}this._super(F);if(!this.multiSelect){J.suggestionShown=false;var I=this.selectedItem;if(I){J.handleSuggestionItemSelect(I);}H.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.android._IsList","mstrmojo.android._HasLingeringListSelections","mstrmojo._TouchGestures","mstrmojo.css");var A,C=mstrmojo.dom,B=C.CSS3_TRANSITION_DURATION;mstrmojo.android.ui.ActionToolbarButtons=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo.android._HasLingeringListSelections,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.ActionToolbarButtons",init:function G(H){this._super(H);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ActionToolbar-buttons");},cssDisplay:"table",icnCssText:"display:table-row",getItemMarkup:function F(H){if(!A){A=this._super(H).replace(">{@en@n}",' title="{@en@n}"><div></div>');}return A;},getItemProps:function D(J,H){var I=this._super(J,H);I.addCls(J.cls);return I;},listHooks:{select:function(H){H.style[B]=0;this.setClearHandler(200);},unselect:function(H){H.style[B]="300ms";}},preselectionChange:function E(H){if(H.added){return !!this.parent.active;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo.android._IsList","mstrmojo.array","mstrmojo.css");var G=mstrmojo.array,H=mstrmojo.css,E=Math,A="fixed";function F(R,S){var O=this.domNode,N=O.clientWidth,Q=this._itemSizeMap,M=R-1,P=R+1;S=S||0;G.forEach(this.itemsContainerNode.childNodes,function(W,U){var X=0;if(U===R){X=(N/2)-(Q[U]/2);}else{if(U===P){X=N-Q[U];}else{if(U!==M){X=-(N/2);if(U>P){X=N+(-1*X);}}}}var V=E.round(X+S/2)+"px";if(W.style.left!==V){W.style.left=V;}W.style.left=(X+S/2)+"px";});}mstrmojo.android.ui.ScrollableTabs=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._TouchGestures,mstrmojo.android._IsList],{scriptClass:"mstrmojo.android.ui.ScrollableTabs",multiSelect:false,init:function L(M){this._super(M);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ScrollableTabs");},setCurrentTab:function K(M){this.clearSelect();this.singleSelect(M,true);this.itemRenderer.select(this._getItemNode(M),this.items[M],M,this);F.call(this,M);},tabSelected:mstrmojo.emptyFn,postitemsChange:function B(){var O=this._itemSizeMap=[],M=this.items,N=this.domNode;if(M&&M.length){G.forEach(this.itemsContainerNode.childNodes,function(Q,P){O[P]=Q.offsetWidth;});}else{this.set("visible",false);}H.addClass(N,A);F.call(this,E.max(this.selectedIndex||0,0));window.setTimeout(function(){H.removeClass(N,A);},0);},postselectionChange:function C(M){var N=M.added;if(N){this.tabSelected(this.items[N[0]]);}},enterScroll:function I(){H.addClass(this.domNode,A);},scroll:function J(M){F.call(this,this.selectedIndex,M);},exitScroll:function D(M){H.removeClass(this.domNode,A);this.setCurrentTab(M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");mstrmojo.DivItemRenderer={render:function(E,C,F){var D=mstrmojo.string.encodeHtmlString((F.getItemName?F.getItemName(E,C):(F.itemDisplayField&&E[F.itemDisplayField])));return'<div mstridx="'+C+'" class="'+F.itemCssClass+(F.selectedIndices[C]?" "+F.itemSelectedCssClass:"")+(E.cssClass?" "+E.cssClass:"")+'" style="'+F.itemCssText+'">'+D+"</div>";},select:function(C){if(C&&C.className){C.className+=" selected";}},unselect:function(C){if(C&&C.className){C.className=C.className.replace(/selected/g,"");}},rowHeight:21};mstrmojo._RendersItemDivs={tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"mstrmojo-ListBox-cell",cellCssText:"",itemCssClass:"mstrmojo-ListBox-item",itemSelectedCssClass:"selected",itemDisplayField:"n",itemRenderer:mstrmojo.DivItemRenderer,rangeSelected:false,_findMatch:function(C,D){return mstrmojo.dom.findAncestorByAttr(mstrmojo.dom.eventTarget(C,D),"mstridx",true,this.itemsNode);},premousedown:function A(C){if(mstrmojo.dom.shiftKey(C.hWin,C.e)){mstrmojo.dom.preventDefault(C.hWin,C.e);}},preclick:function B(K){var G=K.hWin,H=K.e,F=this._findMatch(G,H);if(F){var J=parseInt(F.value,10),I=mstrmojo.dom,C=I.ctrlKey(G,H),D=I.shiftKey(G,H);if(C||D){I.clearBrowserHighlights(G);}if(this.multiSelect&&(this.selectionPolicy==="toggle"||C)){var E=this.rangeSelected||this.selectedIndex===-1;this.toggleSelect(J);if(E&&J<this.items.length&&this.selectedIndices[J+1]){J++;}this.selectedIndex=J;this.rangeSelected=false;}else{if(this.multiSelect&&D){this.rangeSelected=true;this.rangeSelect(J);}else{this.singleSelect(J);this.rangeSelected=false;}}}}};mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._RendersItemDivs");mstrmojo.ListBoxBase=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._RendersItemDivs],{scriptClass:"mstrmojo.ListBoxBase",cssClass:"mstrmojo-ListBox",itemCssClass:"mstrmojo-ListBox-item",_markupPrefix:function(){var C=this.itemRenderer;return(C&&C.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var C=this.itemRenderer;return(C&&C.markupSuffix)||"</tbody></table>";},_itemPrefix:function(){var C=this.itemRenderer;return(C&&C.itemPrefix)||('<tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'"><td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var C=this.itemRenderer;return(C&&C.itemSuffix)||"</td></tr>";},_getItemNode:function(C){var H=this.itemsNode,G=this.renderAllItems,F=H&&H.tBodies,E=G?0:Math.floor(C/100),D=G?C:C%100,I=F&&F[E]&&F[E].rows&&F[E].rows[D];return I&&I.cells[0].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.android._IsList","mstrmojo._TouchGestures","mstrmojo.dom","mstrmojo.css");function C(){var E=this._tchHandler;if(E){E.clear();delete this._tchHandler;}this.clearSelect();mstrApp.setMenuStatus(this.id,false);}mstrmojo.android.ui.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Menu",init:function D(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ActionMenu");this._lastVisible=this.visible;},setMaxWidth:false,markupMethods:{onvisibleChange:function(){var E=!!this.visible,G=this.domNode,F=G.style;F.display=(E)?this.cssDisplay:"none";if(this.parent&&this.parent.propogateMenuVisibleChange&&E!=this._lastVisible){this._lastVisible=E;this.parent.propogateMenuVisibleChange(E);}if(E&&this.setMaxWidth){F.maxWidth=(Math.round(mstrApp.getScreenDimensions().w*0.98)-mstrmojo.dom.position(G).x)+"px";}}},onvisibleChange:function B(E){if(E.value){var F=this.id;this._tchHandler=mstrmojo.touchManager.attachEventListener("touchesBegin",F,function(G){if(G.srcId!==F){this.set("visible",false);G.ignore=true;}});mstrApp.setMenuStatus(F,true);}else{C.call(this);}},onUnRender:function A(){C.call(this);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.SelectBox=mstrmojo.declare(mstrmojo.ListBase,null,{scriptClass:"mstrmojo.SelectBox",size:10,cssDisplay:"inline",markupString:'<select id="{@id}" class="mstrmojo-SelectBox {@cssClass}" style="{@cssText}" size="{@size}" {@multipleHtml} mstrAttach:keyup,change tstid="{@tstid}">{@itemsHtml}</select>',markupSlots:{itemsContainerNode:function(){return this.domNode;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){this.domNode.disabled=!this.enabled;}},itemCssClass:"mstrmojo-selectbox-item",itemDisplayField:"n",itemIdField:"v",showItemTooltip:false,itemRenderer:{render:function(E,D,F){var G=mstrmojo.string.htmlAngles((F.getItemName)?F.getItemName(E,D):(F.itemDisplayField&&E[F.itemDisplayField]));return'<option class="'+F.itemCssClass+'" value="'+((F.getItemValue)?F.getItemValue(E,D):(F.itemIdField&&E[F.itemIdField]))+'" '+((F.selectedIndices[D])?'selected="true" ':"")+((F.showItemTooltip)?'title="'+mstrmojo.string.encodeXMLAttribute(G)+'"':"")+">"+G+"</option>";},select:function(E,F,D,G){E.selected=true;},unselect:function(E,F,D,G){E.selected=false;}},buildRendering:function C(){this.multipleHtml=this.multiSelect?' multiple="true" ':"";this._super();delete this.multipleHtml;},_getItemNode:function(D){var E=this.scrollboxNode;return E&&E.options[D];},prechange:function A(E){if(this._syncDom){return ;}this._syncDom=true;var H=this.scrollboxNode;if(this.multiSelect){var I=H.options,F=[];for(var G=0,D=I.length;G<D;G++){if(I[G].selected){F.push(G);}}this.select(F);}else{this.singleSelect(H.selectedIndex);}delete this._syncDom;},prekeyup:function(E){var H=this.scrollboxNode,F=false;if(this.multiSelect){var I=H.options;for(var G=0,D=I.length;G<D;G++){if(I[G].selected!==!!this.selectedIndices[G]){F=true;break;}}}else{if(H.selectedIndex!==this.selectedIndex){F=true;}}if(F){var J=E;J.name="change";this.raiseEvent(E);}},onselectionChange:function B(D){if(!this._syncDom){this._super(D);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.android._IsList","mstrmojo.css","mstrmojo.dom","mstrmojo.array");var K=mstrmojo.dom,L=mstrmojo.css;function F(U,Q){var R=K.findAncestorByAttr(U.target,"idx",true,this.domNode);if(R){var P=R.value,S=this.itemRenderer;S[Q](R.node,this.items[P],P,this);}}mstrmojo.android.SimpleList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo.android._IsList,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.SimpleList",scrollerConfig:{bounces:false,showScrollbars:false},highlightOnSelect:false,hasEvenRows:false,rowHeight:-1,itemsFloat:false,init:function O(P){this._super(P);if(!mstrApp.isTouchApp()){L.addWidgetCssClass(this,["hosted"]);}},updateItem:function C(P){var U=document.createElement("div"),R=this.items[P],Q=this;U.innerHTML=this.itemRenderer.render(this.items[P],P,this);var S=U.firstChild;this.itemsContainerNode.replaceChild(S,this._getItemNode(P));mstrmojo.array.forEach(R.dependents,function(V){Q.updateItem(V._renderIdx);});return S;},setDimensions:function N(R,Q){if(this.height!==R||this.width!==Q){this.height=R;this.width=Q;var P=this.domNode;if(P){P.style.height=R;P.style.width=Q;this.updateScroller();}}},buildRendering:function H(){var P=this._super();if(this.itemsFloat){var Q=document.createElement("div");Q.className="clear-me";this.itemsContainerNode.appendChild(Q);}return P;},updateScrollerConfig:function J(){var P=this._super(),U=this.itemsContainerNode,R=parseInt(this.height,10);if(isNaN(R)){R=this.domNode.clientHeight;}P.scrollEl=U;P.noHScroll=true;P.origin=P.origin||{x:0,y:0};var S=P.offsetIdx;if(S){delete P.offsetIdx;P.origin.y=this.getItemOffset(S);}var V=Math.max(this.getItemsContainerHeight()-R,0);var Q=P.vScroll=(V!==0&&P.noVScroll!==true);if(Q){P.offset={y:{start:0,end:V}};}else{P.offset=null;}return P;},getItemOffset:function E(P){var Q=this._getItemNode(P);return Math.max(Q.offsetTop-parseInt(L.getStyleValue(Q,"marginTop"),10),0);},getOffsetIndex:function B(){var U=this.scrollerConfig,Z=U&&U.origin,V=Z&&Z.y;if(V){var P=this.rowHeight;if(this.hasEvenRows&&P!==-1){return Math.round(V/P);}var Q=this.itemsContainerNode.childNodes,S=0,W=Q.length-1;while(W>=S){var Y=S+W>>1,X=Q[Y],R=X.offsetTop,a=X.offsetHeight;if(V<R-a){W=Y-1;}else{if(V>R+(a*2)){S=Y+1;}else{return Y;}}}}return 0;},scrollToItem:function D(Q,R){var P=this._scroller;if(P){P.scrollTo(0,this.getItemOffset(Q),R||0);}},getItemsContainerHeight:function G(){var S=this.hasEvenRows,Q;if(!S||this.rowHeight===-1){if(S){var R=this._getItemNode(0);if(R){this.rowHeight=R.offsetHeight;}}else{this.rowHeight=-1;}Q=this.itemsContainerNode.offsetHeight;}else{var P=this.items;Q=(this.rowHeight*((P&&P.length)||0));}return Q;},touchSelectBegin:function I(P){if(this.highlightOnSelect){F.call(this,P,"select");}this._super(P);},touchSelectMove:function M(P){this._selectMove=true;this._super(P);},touchSelectEnd:function A(Q){var P=this._selectMove;delete this._selectMove;if(!P){this.touchTap(Q);}else{if(this.highlightOnSelect){F.call(this,Q,"unselect");}}},touchend:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._TouchGestures","mstrmojo.android._IsList","mstrmojo._HasTouchScroller","mstrmojo.android.selectors._SupportsHoriz","mstrmojo.color","mstrmojo.css");function E(F){return function(K,L,G,N){var J=K.style,I="remove",M="transparent",H="inherit";if(F){I="add";M=N.selColor;H=N._txtColor;}J.backgroundColor=M;J.color=H;mstrmojo.css[I+"Class"](K,mstrmojo.android._IsList.SELECTED_CLS);};}mstrmojo.android.selectors.LinkBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._TouchGestures,mstrmojo.android._IsList,mstrmojo._HasTouchScroller,mstrmojo.android.selectors._SupportsHoriz],{scriptClass:"mstrmojo.android.selectors.LinkBar",selColor:"#60b1f6",minItemHeight:29,getItemMarkup:function(G){var F=this._itemMarkup;if(!F){this._itemMarkup=F=this._super(G).replace("{@en@n}",'<div>{@en@n}<div style="background-color:'+(this.parent.getFormats().color||"#000")+';"></div></div>');}return F;},getItemProps:function C(H,F){var G=this._super(H,F);if(G.sel){G.style+="color:"+this._txtColor+";background-color:"+this.selColor+";";}return G;},preBuildRendering:function B(){this.cssClass+=" selector-linkbar";this._txtColor=mstrmojo.color.getContrastingColor(this.selColor,"#ffffff","#000000");return this._super();}});var D=mstrmojo.android.selectors.LinkBar.prototype,A=D.itemRenderer;D.itemRenderer={render:A.render,select:E(true),unselect:E(false)};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.css","mstrmojo.AndroidGridBase");var W=mstrmojo.css,M=mstrmojo.color;function C(d,e){var f=d&&d.parent;while(f&&f.scriptClass.indexOf("DocPanelStack")===-1){if(e in f){return f;}f=f.parent;}return null;}function B(e){var d=document.createElement("img");e.appendChild(d);e.removeChild(d);}function E(d,e){var f=Math.floor(d/e.rowsPerPage),h=d%e.rowsPerPage,g=e.tableNode.tBodies[f];r=g.rows[h].cells;return r;}function H(){var d=this._renderTimer;if(d){self.clearInterval(d);delete this._renderTimer;this.renderingRows=false;}}mstrmojo.AndroidGrid=mstrmojo.declare(mstrmojo.AndroidGridBase,null,{scriptClass:"mstrmojo.AndroidGrid",rowsPerPage:0,effectiveRh:0,numPagesRendered:0,totalPages:0,pageStatus:null,_defaultPageHeight:0,renderPause:10,rhMin:15,defaultRowsPerPage:100,minRowsPerPage:50,init:function G(d){this._super(d);this.forceFixedSizes=true;},initPageSettings:function N(){var e=this.parent,d=this.defaultRowsPerPage;this.effectiveRh=this.rh||this.rhMin||1;if(e&&e.numRowFixed){d=this.cp.getAvailableRowsCount();}else{if(e&&e.scrollboxHeightFixed){d=Math.ceil(e.scrollboxHeight/this.effectiveRh);d=Math.max(d,this.minRowsPerPage);}}this.pageStatus=[];this.rowsPerPage=d;this.initPageStatus(this.pageStatus);this._defaultPageHeight=this.rowsPerPage*this.effectiveRh;},initPageStatus:function Y(h){var g=this.rowsPerPage;this.totalPages=g&&Math.ceil(this.cp.rc/g)||0;h=h||this.pageStatus;for(var e=0;e<this.totalPages;++e){var j=e*g,f=j+g-1,d=this.cp.isDataAvailable(j,f);if(!h[e]){h[e]={};}h[e].onDemand=!d;}},buildRendering:function F(j){if(this.renderMode=="vscroll"){this.initPageSettings();var h=this.pageStatus[0],d=h&&h.onDemand;this.start=0;this.end=-1;if(!d){this.end=Math.min(this.cp.rc,this.rowsPerPage)-1;}this.preRenderPages();this.preRenderPage(0,!d);}this._super();if(this.renderMode=="vscroll"){var g=this.parent,f=this,k=function(){f.gridContainerNode.style[mstrmojo.css.MINHEIGHT]=(f.cp.rc*f.effectiveRh)+"px";};if(mstrmojo.dom.isIE7){this.gridContainerNode.style.zoom="1";window.setTimeout(k,10);}else{k();}if(!this.connectedScrollbox){if(g&&g.connectScrollbox){g.connectScrollbox(this);this.connectedScrollbox=true;}}this.postRenderPage(0,!d);this.postRenderPages();var e=g&&!g.scrollboxHeightFixed&&!g.numRowFixed;if(e&&this.numPagesRendered>=this.totalPages&&!d){this.postRenderingCleanup();}else{if(d||e){this.onscroll();}}}else{this.configureActions();}},preRenderPages:function Q(){},postRenderPages:function a(){this.configureActions();},configureActions:function L(){var d=this.parent;if(d&&d.configureActions){d.configureActions();}},preRenderPage:function O(d,e){this.pageNum=d;},postRenderPage:function J(e,g,h){if(e+1>this.numPagesRendered){this.numPagesRendered=e+1;}var d=this.pageStatus,f=d[e];if(!f){f=d[e]={};}if(g){f.filled=true;f.dirty=false;}var j=this.gridContainerNode.style;if(e==this.totalPages-1&&j){j[mstrmojo.css.MINHEIGHT]="";}},invalidAllPages:function(){for(var d=0;d<this.totalPages;++d){var e=this.pageStatus[d];if(e.filled){e.dirty=true;}e.onDemand=true;e.filled=false;e.isDownloading=false;}this.thPosMap=[];this.posMap=[];},_startPageRenderThread:function b(){var d=this.id;this.renderingRows=true;this._renderTimer=self.setInterval(function(){try{var g=mstrmojo.all[d];if(!g){return ;}var e=g.getPagesToRender();if(e.length>0){g.preRenderPages();g.renderPages(e);g.postRenderPages();g._postPagesClearup=true;}else{if(g._postPagesClearup){g.postRenderPagesCleanup();g._postPagesClearup=false;}H.call(g);if(g.isRenderingComplete()){g.postRenderingCleanup();}}}catch(f){H.call(mstrmojo.all[d]);throw f;}},this.renderPause);},onscroll:function Z(d){if(!this.renderingRows){if(d===true){var e=this.parent;if(e&&e.maskNode){W.addClass(e.maskNode,"wait");}}this._startPageRenderThread();}},isRenderingComplete:function P(){if(this.end>=this.cp.rc-1){for(var d=this.pageStatus,e=this.totalPages-1;e>-1;e--){if(!d[e]||!d[e].filled){return false;}}return true;}return false;},renderPages:function D(e){for(var f=0,d=e.length;f<d;++f){this.renderPage(e[f].idx,e[f].fill);}},renderPage:function X(k,e){var p=this.pageStatus,g=(this.numPagesRendered>=k+1);if(g){if(!e||(p[k]&&p[k].filled)){return ;}}var o=this.rowsPerPage,h=this.domNode;this.start=k*o;this.end=Math.min(this.start+o,this.cp.rc)-1;this.preRenderPage(k,e);var d=this.tempTable;if(!d){d=this.tempTable=h.ownerDocument.createElement("div");}var j=e?this.buildTableRowsMarkup(this.start,this.end,'<table><tbody n="'+this.pageNum+'">',"</tbody></table>").join(""):'<table><tbody n="'+this.pageNum+'"><tr><td style="height:'+(this.effectiveRh*(this.end-this.start+1))+'px">&nbsp;</td></tr></tbody></table>';d.innerHTML=j;var f=d.firstChild.tBodies[0],l=this.tableNode;if(!g){l.appendChild(f);}else{l.replaceChild(f,l.tBodies[k]);}this.postRenderPage(k,e,f);},getPagesToRender:function S(){var s=[],w=this.parent,AH=this._defaultPageHeight,h=null,AI=this.pageStatus,AJ=this;function o(j){var p=AI[j];if(p&&(p.filled||p.dirty)){if(!p.height){if(!h){h=AJ.tableNode.tBodies;}p.height=h[j].offsetHeight;}return p.height;}else{return AH;}}var l=0,k=null,t=null,e=w.scrollboxTop;for(var AD=0,AE=this.totalPages,d=this.pageStatus;AD<AE;AD++){l+=o(AD);if(l>=e){k=AD;break;}}if(k===null){k=t=AE-1;}else{var u=w.scrollboxBottom;if(isNaN(u)&&w.numRowFixed){u=e;}for(var AB=k+1;AB<AE;AB++){if(l>u){t=AB-1;break;}l+=o(AB);}}if(t===null){t=AE-1;}for(var x=this.numPagesRendered;x<k;++x){s.push({idx:x,fill:false});}var AC=this.pageStatus,AA=0,AF=this.rowsPerPage,q=false;for(var z=k;z<=t;++z){var AG=AI[z];if(!AG||!AG.filled){if(AG&&AG.onDemand){q=true;if(!AG.isDownloading&&!this.isDownloading){AA+=AF;AG.isDownloading=true;this.isDownloading=true;var g=z*AF,f=g+AF-1;this.cp.download(g,f);}s.push({idx:z,fill:false});}else{s.push({idx:z,fill:true});}}}if(q){this.parent.showDownloadStatus(AA);}else{if(this.parent.closeDownloadStatus){this.parent.closeDownloadStatus();}}return s;},addHilitePosition:function(e,g,d){var h=this.hiliteCellsMap[e];if(!h){this.hiliteCellsMap[e]={pos:[],nodes:[]};}var f=g-(this.pageNum||0)*this.rowsPerPage;this.hiliteCellsMap[e].pos.push({row:f,cell:d,page:this.pageNum});},setHilites:function(g,h){var j=h.getAttribute("ei"),k=this.eiMap[j],d=this.getNodesByPositions(k);if(!d.length){this._super(g,h);return ;}for(var f=0,e=d.length;f<e;f++){this._super(g,d[f]);}},addExtraInfoMap:function(e,f,d){if(!this.eiMap[e]){this.eiMap[e]=[];}this.eiMap[e].push(this.getPosObj(f,d));},addPositionMap:function(e,f,d){if(!this.posMap[e]){this.posMap[e]=this.getPosObj(f,d);}},addTitleHeaderPositionMap:function(f,d,e){var g=this.getPosObj(f,d);g.obj=e;this.thPosMap.push(g);},getPosObj:function(d,e){return{row:d-this.pageNum*this.rowsPerPage,cell:e,page:this.pageNum};},getNodeByPosition:function(d){return this.tableNode.tBodies[d.page].rows[d.row].cells[d.cell];},getRowIdxByCell:function(d){var e=this.posMap[d._ei];return e.page*this.rowsPerPage+e.row;},getNodesByPositions:function(k){var d=[];for(var f in k){var e=k[f],h=(e&&e.page)||0,g=e&&e.row,j=e&&e.cell;d.push(this.tableNode.tBodies[h].rows[g].cells[j]);}return d;},getPageHeight:function R(d){var e=this.tableNode.tBodies;return(e&&e[d]&&e[d].offsetHeight)||0;},getTargetCell:function(o,l){var g=0,e=0;for(var k=this.totalPages;e<k;e++){g+=this.getPageHeight(e);if(l<=g){break;}}var f=this.tableNode.tBodies[e];if(f){for(var e=0,k=f.rows.length;e<k;e++){var s=f.rows[e];for(var d=0,q=s.cells.length;d<q;d++){var p=s.cells[d];if(p.offsetTop+p.offsetHeight>=l){if(o>=p.offsetLeft&&o<=p.offsetLeft+p.offsetWidth){return p;}}else{break;}}}}},postRenderPagesCleanup:function I(){var f=this.parent;if(f&&f.gridData&&f.gridData.afc){var e=this.tableNode;if(e&&(this.lastWidth!=e.offsetWidth)){if(f.onGridWidthChanged){f.onGridWidthChanged();}mstrmojo.array.forEach(this.pageStatus,function(g){delete g.height;});this.lastWidth=e.offsetWidth;}var d=C(f,"adjustAutoWidth");if(d){d.adjustAutoWidth(f);}}if(f.gridPagesRendered){f.gridPagesRendered();}if(mstrmojo.dom.isIE&&!mstrmojo.dom.isIE8){B(this.domNode);}if(f&&f.maskNode){W.removeClass(f.maskNode,"wait");}this.hightLightChangedCells();},hightLightChangedCells:function K(){var o=this.cp.getUpdatedRows(),h=this,l,d,k,p,f,g,j,e=[];if(o){mstrmojo.hash.forEach(o,function(s,q){j=parseInt(q,10);l=h.cp.getRowCells(j);d=E(j,h);k=d.length;p=l.length-1;if(p>=0){for(f=k-1;f>=0;f--){g=d[f];if(p<0){break;}if(l[f]._d){var u=g.style.backgroundColor,t=g.style.color;e.push({dom:g,bgcolor:u,ftcolor:t});g.style.backgroundColor=M.getHighlightColor(M.rgbStr2rgb(mstrmojo.css.getStyleValue(g,"backgroundColor"),true));g.style.color=M.getContrastingColor(M.rgbStr2hex(mstrmojo.css.getStyleValue(g,"backgroundColor")),["#ffffff","#000000"]);delete l[f]._d;}p--;}}});if(e.length>0){window.setTimeout(function(){mstrmojo.array.forEach(e,function(q){q.dom.style.backgroundColor=q.bgcolor;q.dom.style.color=q.ftcolor;});},300);}}},getRowInfoByPosition:function(d){return this.cp.getRowCellInfo(d);},postRenderingCleanup:function A(){var d=this.parent;if(d&&this.connectedScrollbox){d.disconnectScrollbox(this);}this.connectedScrollbox=false;if(d&&!d.scrollboxHeightFixed){var e=C(d,"performCanGrowCanShrink");if(e){e.performCanGrowCanShrink([d],true);}}},unrender:function V(d){H.call(this);if(this.connectedScrollbox){this.parent.disconnectScrollbox(this);this.connectedScrollbox=false;}this.numPagesRendered=0;this.lastWidth=0;this.isDownloading=false;this._super(d);},dataDownloaded:function U(){this.isDownloading=false;this.initPageStatus();this.onscroll();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable","mstrmojo._HasTouchScroller","mstrmojo._TouchGestures","mstrmojo.hash");mstrmojo.android.HTMLContainer=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable,mstrmojo._HasTouchScroller,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.HTMLContainer",markupString:'<div id="{@id}" class="mstrmojo-HTMLContainer {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div>{@v}</div></div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["RW","B","F","P","background-color","fx","text-align","white-space"]},update:function update(node){var d=node.data,v=d.v||"";var div=document.createElement("div");div.innerHTML="<textarea>"+v+"</textarea>";v='<div style="display:none">&nbsp;</div>'+div.firstChild.value+"&nbsp;";div=null;this.v=v;if(this.thresholdId||d.tid){delete this.fmts;}this.thresholdId=d.tid;this.scrollerConfig={bounces:false,showScrollbars:false};},postBuildRendering:function postBuildRendering(){var scripts=this.domNode.getElementsByTagName("script"),len=scripts.length,i;for(i=0;i<len;i++){eval(scripts[i].innerHTML);}return this._super();},updateScrollerConfig:function updateScrollerConfig(){var cfg=this._super(),scrollEl=this.valueNode,domNode=this.domNode,fmts=this.getFormats(),iterator={Height:{a:"y",s:"v"},Width:{a:"x",s:"h"}},offset={};cfg.scrollEl=scrollEl;mstrmojo.hash.forEach(iterator,function(info,dimension){if(cfg["no"+info.s.toUpperCase()+"Scroll"]){return ;}var widgetSize=parseInt(fmts[dimension.toLowerCase()],10);if(isNaN(widgetSize)){widgetSize=domNode["client"+dimension];}var offsetEnd=Math.max(scrollEl["offset"+dimension]-widgetSize,0),enableDimensionScroll=cfg[info.s+"Scroll"]=(offsetEnd!==0);if(enableDimensionScroll){offset[info.a]={start:0,end:offsetEnd};}});cfg.offset=offset;cfg.origin=cfg.origin||{x:0,y:0};return cfg;}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasTouchScroller","mstrmojo.dom");var B=mstrmojo.dom;function A(G,E){var D=Math.max(G.x,E.x);var I=Math.max(G.y,E.y);var F=Math.min(G.x+G.w,E.x+E.w)-D;var H=Math.min(G.y+G.h,E.y+E.h)-I;if(F<0||H<0){return{x:NaN,y:NaN,w:NaN,h:NaN};}return{x:D,y:I,w:F,h:H};}function C(D){return{x:D.x,y:D.y,w:D.w,h:D.h};}mstrmojo.SmoothScroll=mstrmojo.provide("mstrmojo.SmoothScroll",{viewRect:null,scrollerRect:null,unitRect:null,cachedUnits:[],demarcationUnits:{left:null,right:null,top:null,bottom:null},viewCutX:function(){},storeUnits:function(){this.cachedUnits=[];var G=C(this.unitRect),D=Math.ceil(this.scrollRect.h/G.h),E;for(E=0;E<D;E++,G.y+=G.h){var F=this.getUnitFromPoint(G.x+G.w/2,G.y+G.h/2);if(!F){continue;}this.cachedUnits.push(F);}},appendUnits:function(G,E){var I=this.cachedUnits,D;for(D=G;D<=E;D++){var F=I[D];if(!F){return ;}if(F.outside==true){F.outside=false;var H=F._parentNode,J=H.children;H.insertBefore(F,J[F._oldIndex]);H.style.paddingTop="";delete F._parentNode;delete F._oldIndex;}}console.log(E-G+1+" units added.");},removeUnits:function(G,E){var I=this.cachedUnits,D;for(D=G;D<=E;D++){var F=I[D];if(!F){return ;}if(F.outside!=true){var H=F.parentNode,J=H.children;F._parentNode=H;F._oldIndex=0;H.removeChild(F);H.style.paddingTop=this.unitRect.h+"px";F.outside=true;}}console.log(E-G+1+" units removed.");},viewCutY:function(K){if(!this.viewRect||!this.scrollRect||!this.unitRect){return ;}var G=K?K.y:this._scroller.origin.y,E=G+this.viewRect.h;if(!this._scroller||!this._scroller.scrollEl){console.log("no scrollEl.");return ;}var J=this._scroller.scrollEl;var H=Math.floor(G/this.unitRect.h),F=Math.floor(E/this.unitRect.h),I=this.cachedUnits,D=I.length;delta=0;this.removeUnits(0,H-1);this.appendUnits(H,F);this.removeUnits(F+1,D);delta=H;console.log("do viewCut.");},updateScroller:function(G,F){if(this._super){this._super(G,F);}var E=mstrmojo.dom.position;if(!this.unitRect||!this.unitRect.w||!this.unitRect.h){var D=this.cachedUnits[0];if(!D){return ;}this.unitRect=E(D);}if(this.viewNode){this.viewRect=E(this.viewNode);}this.scrollRect={x:this.unitRect.x,y:this.unitRect.y,w:this.unitRect.w,h:this.unitRect.h*this.cachedUnits.length};if(!this.viewRect||!this.scrollRect||!this.unitRect){return ;}this.viewCutY(this._scroller.origin);},getUnitFromPoint:function(D,J){var E=[],H=false;do{var I=document.elementFromPoint(D,J);if(I==G){break;}if(I.offsetHeight==this.unitRect.h&&I.offsetWidth==this.unitRect.w){H=true;}else{I.__metaDisplay=I.style.display;E.push(I);I.style.display="none";}var G=I;}while(!H&&I!=document.body);var F=I;while(E.length){var I=E.pop();I.style.display=I.__metaDisplay;delete I.__metaDisplay;}if(H){return F;}else{return null;}},postBuildRendering:function(D){if(this._super){this._super(D);}console.log("event binded!");this.smoothSwipeListener=this._scroller.attachEventListener("scrollMoved",this.id,this.viewCutY);},unrender:function(){if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.array","mstrmojo.dom","mstrmojo.css");var R=mstrmojo.array,V=mstrmojo.css,M=mstrmojo.dom,O=1,J="selected",H="d",L="m",E="y";function W(b,f,X,g){var a,e=this.selected=this.selected||[],Y;for(a=0;a<e.length;a++){Y=e[a];if(Y.day===f&&Y.month===X&&Y.year===g){e.splice(a,1);return false;}}var Z={node:b,day:f,month:X,year:g};Z.n=mstrmojo.date.formatDateInfo(Z,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);e.push(Z);return true;}function I(X){this.contentNode.innerHTML=this.markupBuilder.getContentHTML({m:0,y:X},{m:11,y:X},{incl:false});}function F(X,a){var Y=this.contentNode.children,Z;R.forEach(X||this.selected,function(b){if(b&&b.year===this.current.y){var d=new Date(b.year,b.month-O,1);R.forEach(Y,function(e){if(parseInt(e.getAttribute(L),10)===b.month){V.toggleClass(e.getElementsByClassName("mstrmojo-CalendarMV-DatesList")[0].children[b.day+(d.getDay())-1],J,a);return false;}});}Z=undefined;},this);}function G(X,a){var d=this.MONTH_CACHE,b=d[parseInt(X,10)],Z=d[parseInt(a,10)],Y="selectedMonth";if(a!==undefined){V.toggleClass(Z.node,Y,false);}V.toggleClass(b.node,Y,true);if(this._scroller){this._scroller.scrollTo(0,b.top,200);}if(!(mstrApp.isTablet()&&mstrApp.isLandscape())){this.headerNode.innerHTML=this.markupBuilder.getHeaderHTML(X,this.current.y);}}function K(k,j){I.call(this,this.current.y);this.updateScroller();var d=0,f=parseInt(this.height,10)-this.headerNode.clientHeight,e=this.contentNode,g=e.offsetTop,Y=e.children,a=this.selected,o=R.find(a,"year",k),b=o!==-1,l=this.MONTH_CACHE=[{}];for(d=0;d<Y.length-1;d++){var Z=Y[d],X=Z.clientHeight;l.push({node:Z,top:Z.offsetTop-g-(f-X)/2,height:X});}this._scroller.scrollTo(0,0);G.call(this,j||(b&&a[o].month)||O);this.selectItems();}mstrmojo.android.ui.CalendarMonthView=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.ui.CalendarMonthView",config:undefined,markupString:'<div id="{@id}" class="mstrmojo-Calendar-MonthView"><div class="mstrmojo-CalendarMV-Header"></div><div class="mstrmojo-CalendarMV-Content"><div></div></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},contentNode:function(){return this.domNode.lastChild.lastChild;}},range:undefined,selected:undefined,multiSelect:true,current:undefined,scrollerConfig:{bounces:false,showScrollbars:false,showIndicators:false},postCreate:function B(){if(this._super){this._super();}var Y=this,b=this.initialYear,X=this.initialMonth;if(isNaN(X)||isNaN(b)){throw new Error(mstrmojo.desc(96,"Error"));}this.current=new mstrmojo.Obj({m:X,y:b,onyChange:function a(){K.call(Y,this.y);},_set_m:function Z(f,e){var d=this.m;this.m=e;G.call(Y,this.m,d);}});},postBuildRendering:function Q(){var X=this.markupBuilder,Y=this.current;this._super();this.headerNode.innerHTML=X.getHeaderHTML(Y.m,Y.y);K.call(this,Y.y,Y.m);this._scroller.attachEventListener("scrollDone",this.id,function(a){var h=this.MONTH_CACHE,Z=Math.abs,f=a.y,g,e,d,b;for(b=1;b<h.length-1;b++){g=h[b].top;e=h[b+1].top;if((g<=f)&&(f<=e)){d=b+((Z(e-f)<Z(g-f))?1:0);break;}}this.current.set("m",d);});},touchTap:function P(e){var Y=M.findAncestorByAttr(e.target,L,true,this.domNode);if(Y){var Z=e.target,a=parseInt(Z.getAttribute(H),10),X=parseInt(Y.value,10),b=parseInt(Y.node.getAttribute(E),10);if(!isNaN(a)){if(this.singleSelect){R.forEach(this.selected,function(d){V.toggleClass(d.node,J,false);});this.selected=[];}V.toggleClass(Z,J,W.call(this,Z,a,X,b));this.raiseEvent({name:"selectionChanged",items:this.selected});}if(!isNaN(X)){this.current.set("m",X);}}return false;},selectItems:function U(X){F.call(this,X,true);},unselectItems:function C(X){F.call(this,X,false);},touchSelectBegin:function A(X){},touchSelectMove:function D(X){},touchSelectEnd:function P(X){},updateScrollerConfig:function N(){var X=this._super(),b=this.contentNode,Z=parseInt(this.height,10);if(isNaN(Z)){Z=this.domNode.clientHeight;}X.scrollEl=b;X.noHScroll=true;X.origin=X.origin||{x:0,y:0};var a=X.offsetIdx;if(a){delete X.offsetIdx;X.origin.y=this.getItemOffset(a);}var d=Math.max(b.clientHeight+this.headerNode.clientHeight-Z,0);var Y=X.vScroll=d!==0;if(Y){X.offset={y:{start:0,end:d}};}else{X.offset=null;}return X;},destroy:function S(){if(this.current){this.current.destroy();delete this.current;}delete this.MONTH_CACHE;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.VisHeatMapColorTheme","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.dom","mstrmojo.css");var H=1200,G=800;var F={ON:0,OFF:1,PROPORTIONAL:2};var I={LABEL_CTNR_THRES:6,LABEL_CTNR_WIDTH_THRES:32,LGD_GUTTER:5,LABEL_PADDING:2};var K={"heatmap-one-level-1":{},"heatmap-two-level-2":{},"heatmap-multi-level-1":{},"heatmap-multi-level-2":{},"heatmap-multi-level-3":{},init:false};function C(L){var N=16777216+L;var M="#"+N.toString(16).substring(1).toUpperCase();return M;}function E(N,R){var L=[N];while(L.length!==0){var Q=L.shift();if(Q===undefined||Q.deleted){continue;}R(Q);var P=Q.entityChildren;if(P!==undefined){var M=P.length;for(var O=0;O<M;O++){L.push(P[O]);}}}}function D(N,Q,O){if(N.deleted){return ;}if(O===undefined){Q(N);}else{Q(N,O);}if(N.entityChildren===undefined){return ;}var L=N.entityChildren,M=L.length;for(var P=0;P<M;P++){var R=L[P];if(O===undefined){D(R,Q);}else{var S=O;if(!S){S=P.toString();}else{S=S+":"+P;}D(R,Q,S);}}}function J(L,N){var M;if(N===1){if(L===0){M="heatmap-one-level-1";}}else{if(N===2){if(L===0){M="heatmap-multi-level-1";}else{if(L===1){M="heatmap-two-level-2";}}}else{if(N>=3){if(L===0){M="heatmap-multi-level-1";}else{if(L===1){M="heatmap-multi-level-2";}else{if(L===2){M="heatmap-multi-level-3";}}}}}}return M;}function B(L,M){if(!L||!M){return false;}if(M.x>=L.x+L.w||M.y>=L.y+L.h||M.x+M.w<=L.x||M.y+M.h<=L.y){return false;}else{return true;}}function A(O,M){var L=Math.max(O.x,M.x);var Q=Math.max(O.y,M.y);var N=Math.min(O.x+O.w,M.x+M.w)-L;var P=Math.min(O.y+O.h,M.y+M.h)-Q;if(N<0||P<0){return{x:NaN,y:NaN,w:NaN,h:NaN};}return{x:L,y:Q,w:N,h:P};}mstrmojo.VisHeatMapCanvas=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.VisHeatMapCanvas",parent:null,root:null,colorTheme:null,attributes:[],scale:1,labelSetting:0,showMetric:false,bgColor:"#333333",numImages:0,offsetX:0,offsetY:0,markupString:'<div style="position:absolute; width:{@width}px; height:{@height}px"><canvas width={@width} height={@height} style="visibility: hidden; z-index:0"></canvas><span></span></div>',markupSlots:{domCanvas:function(){return this.domNode.firstChild;},domSpan:function(){return this.domNode.childNodes[1];},domImage:function(){return this.domNode.childNodes[2];}},postBuildRendering:function(){this.initCSSATTR();this.draw();if(this._super){this._super();}},removeImageAndLabels:function(){var N=this.domNode,P=N.childNodes,O=P.length;for(var L=O-1;L>1;L--){var M=P[L];N.removeChild(M);}this.numImages=0;},removeLabels:function(){var O=this.domNode,Q=O.childNodes,P=Q.length,M=1+this.numImages;for(var L=P-1;L>M;L--){var N=Q[L];O.removeChild(N);}},updateOffsets:function(L,M){this.offsetX=L;this.offsetY=M;this.removeLabels();this.drawLabels();},draw:function(L,M){if(L!==undefined){this.offsetX=L;}if(M!==undefined){this.offsetY=M;}this.removeImageAndLabels();this.drawRects();this.drawLabels();},drawRects:function(){var U=this.width,b=this.height,Y=this.scale,N=Math.ceil(U*Y),W=Math.ceil(b*Y),V=this.domCanvas,d=this.domNode,L=document.createDocumentFragment(),Q=Math.ceil(W/G),O=Math.ceil(N/H),R=0;for(var a=0;a<Q;a++){for(var Z=0;Z<O;Z++){var S={x:Z*H,y:a*G,w:H,h:G};if(a+1===Q){S.h=W-S.y;}if(Z+1===O){S.w=N-S.x;}V.setAttribute("width",S.w);V.setAttribute("height",S.h);var M=V.getContext("2d");M.fillStyle=this.bgColor;M.fillRect(0,0,S.w,S.h);var P=function(q,h){var p=q.size;if(q.entityChildren===undefined&&!q.deleted&&B(S,p)){var k=Math.max(p.x-S.x,0),o=Math.max(p.y-S.y,0),j=Math.min(p.x+p.w-S.x,S.w),l=Math.min(p.y+p.h-S.y,S.h);M.fillStyle=q.color;M.fillRect(k,o,j-k,l-o);}q.idx=h;};D(this.root,P,"");var g=V.toDataURL();if(g==="data:,"){var X="Canvas rendering failed. Maybe the available memory is not enough, please clean the memory and retry";var e=S.getLocaleString?S.getLocaleString("CANVAS_RENDERING_FAILED",X):mstrmojo.desc(111111,X);throw e;}var f=document.createElement("img");f.src=g;f.style.position="absolute";f.style.left=S.x+"px";f.style.top=S.y+"px";f.setAttribute("draggable","false");f.setAttribute("orgx",S.x);f.setAttribute("orgy",S.y);L.appendChild(f);R++;}}V.setAttribute("width",0);V.setAttribute("height",0);d.style.width=N+"px";d.style.height=W+"px";d.appendChild(L);this.numImages=R;},drawLabels:function(){var M=this.attributes.length,Q=this,N=this.domNode,U=I.LGD_GUTTER,V=I.LABEL_PADDING,R={x:this.offsetX,y:this.offsetY,w:this.width,h:this.height};var S=[],P=[{},{},{}];var L=Math.floor(Math.log(this.scale)/Math.log(2));L=Math.min(L,M-3);L=Math.max(L,0);this._ext=L;var O=function(AG){if(AG===Q.root||AG.deleted){return ;}var Y=AG.size,l=Y&&Y.w,AF=Y&&Y.h;if(!B(R,Y)){return ;}if(l<I.LABEL_CTNR_WIDTH_THRES+2*I.LABEL_PADDING||AF<I.LABEL_CTNR_THRES){return ;}var AE=AG.text,u=AG.idx,X=AG.level-L;if(X>=0&&X<3){var AH,b,z=J(X,M),AA=K[z].font,Z=K[z].fontSize,AC={s:{},e:AG,m:0,css:z};if(Q.showMetric===true&&AG.entityChildren===undefined){var j={};mstrmojo.hash.copy(Y,j);if(M>1&&X===0){j.w-=2*U;j.h-=U;}else{j.w-=2*V;}var t,f;if(Q.labelSetting===F.PROPORTIONAL){t=9;var d=8,q=false,f=Q.getTextSize(AE,AA,t,true,false,j.w);while(d>=1){if(f.h<j.h){t+=d;}else{if(t===9){break;}if(t>=j.w){break;}if(!q){d/=2;}q=true;t-=d;}f=Q.getTextSize(AE,AA,t,true,false,j.w);if(q){d=d>>1;}}if(f.h>j.h&&t>9){t--;}if(t>j.w){t=j.w;}AC.fs=t;}else{t=Z;}AC.lh=t;f=Q.getTextSize(AE,AA,t,true,false,j.w);AH=Math.min(f.w,j.w);b=f.h;if(b>j.h){b=Math.floor(j.h/t)*t;}}else{if(S[X]===undefined){S[X]={};}var s=S[X];if(s[AE]===undefined){var f=Q.getTextSize(AE,AA,Z,true),AH=f.w,b=f.h;if(M>1&&X===0){AH+=2*U;b+=U;}s[AE]={w:AH,h:b};}else{AH=s[AE].w;b=s[AE].h;}if(b>AF){return ;}AC.lh=b;var AB;if(M>1&&X===0){AB=2*U;}else{AB=2*V;}if(AH>l-AB){var a=AH>>1,AD=Math.floor(AF/AC.lh);if(a>(l-AB)*AD){return ;}AH=l-AB;if((M==1&&X==0)||(M==2&&X==1)||(M>2&&X==2)){var W=Q.getTextSize(AE,AA,Z,true,false,l-AB,true);b*=Math.floor(Math.min(W.h,AF)/AC.lh);AC.isLowestLevel=true;}}}var k=Y.x+((l-AH)>>1),g=Y.y+((AF-b)>>1);AC.s={x:k,y:g,w:AH,h:b};P[X][u]=AC;}};if(Q.labelSetting!==F.OFF){E(this.root,O);this.layoutLabels(P);}},layoutLabels:function(o){var Z=this,s=document,N=s.createDocumentFragment();function Y(AA){var x=AA.s,z=AA.e,w=AA.css,u=Z.getLabelColor(x,z),t=AA.fs!==undefined;var AB=s.createElement("div");if(t){AB.setAttribute("style","font-size: "+AA.fs+"px !important");AB.className=w+" heatmap-showMetric-text";}else{AB.className=w+" heatmap-trun-text";}AB.style.position="absolute";AB.style.color=u;AB.style.backgroundColor="rgba(255, 255, 255, 0)";AB.style.zIndex="1";AB.style.left=x.x+"px";AB.style.top=x.y+"px";AB.style.width=x.w+"px";AB.style.height=x.h+"px";AB.style.lineHeight=AA.lh+"px";if(AA.isLowestLevel){AB.style.textOverflow="ellipsis";AB.style.wordBreak="normal";}AB.setAttribute("idx",z.idx);AB.innerHTML=z.text;N.appendChild(AB);}var k=o[0],j=o[1],h=o[2],b;for(b in j){var l=j[b],M=l.s,e=l.e,S=e.parentEntity,q=k[S.idx];if(q===undefined){Y(l);continue;}var Q=q.s,U=A(M,Q);var d=false;if(U.w>5||U.h>5){if(Q.y<=M.y){var p=((Q.y+Q.h-M.y)>>1)+1;if(q.m!==2&&(Q.y-p>=S.size.y)&&(M.y+M.h+p<=e.size.y+e.size.h)){Q.y-=p;M.y+=p;q.m=1;}else{d=true;}}else{var p=((M.y+M.h-Q.y)>>1)+1;if(q.m!==1&&(Q.y+Q.h+p<=S.size.y+S.size.h)&&(M.y-p>=e.size.y)){Q.y+=p;M.y-=p;q.m=2;}else{d=true;}}}if(d!==true){Y(l);}}for(b in k){Y(k[b]);}for(b in h){d=false;var V=h[b],L=V.e,O=L.parentEntity,P=O.parentEntity,f=O.idx,g=P.idx,W=j[f],X=k[g];if(W!==undefined){var a=A(W.s,V.s);if(!isNaN(a.w)){d=true;}}if(d===false&&X!==undefined){var R=A(X.s,V.s);if(!isNaN(R.w)){d=true;}}if(d!==true){Y(V);}}this.domNode.appendChild(N);},getLabelColor:function(Y,V){var M=V.level-this._ext;if(M===0){return"#FFFFFF";}var U=this.colorTheme;if(V.entityChildren===undefined){return C(U.getContrastColor(parseInt(V.color.substring(1,V.color.length),16)));}var X=[V],S=0,P=0;while(X.length!==0){var Q=X.shift(),L=Q.entityChildren,O=Q.entityChildren.length;for(var R=0;R<O;R++){var N=L[R];if(N.deleted){continue;}var W=A(Y,N.size);if(N.entityChildren===undefined){if(!isNaN(W.w)){if(U.isBrightColor(parseInt(N.color.substring(1,N.color.length),16))){S+=W.w*W.h;}else{P+=W.w*W.h;}}}else{if(!isNaN(W.w)){X.push(N);}}}}if(S>P){return"#000000";}else{if(M===1){return"#e6e7e8";}else{return"#d1d3d4";}}},getEntity:function(Q){var M=Q.x,L=Q.y,O;var N=function(X){if(X.entityChildren===undefined&&!X.deleted&&X.size){var V=X.size,S=V.x,W=V.y,R=S+V.w,U=W+V.h;if(M>=S&&M<=R&&L>=W&&L<=U){O=X;}}};var P=function(U,W){if(U.deleted){return ;}W(U);var R=U.entityChildren;if(R!==undefined){var S=R.length;for(var V=0;V<S;V++){var X=R[V];P(X,W);if(O!==undefined){return ;}}}};P(this.root,N);return O;},initCSSATTR:function(){if(K.init===false){var N=this.domSpan;for(var M in K){if(M==="init"){continue;}N.setAttribute("class",M);var L=document.defaultView.getComputedStyle(N);K[M].fontSize=parseInt(L.fontSize);K[M].font=L.fontFamily;}}},getTextSize:function(S,M,V,O,L,N,P){var Q=this.domSpan,R="break-all";if(P){R="normal";}Q.className="";Q.innerText=S;Q.style.cssText="position:absolute; visibility:hidden; z-index:-1; font-family:"+M+"; font-size:"+V+"px; font-weight:"+(O?"bold":"normal")+"; font-style:"+(L?"italic":"normal")+"; line-height:"+V+"px;";var U=Q.offsetWidth+1;if(N!==undefined&&U>N){Q.style.cssText+="overflow:hidden; word-break:"+R+"; width:"+N+"px;";U=Q.offsetWidth;}return{w:U,h:Q.offsetHeight};}});})();(function(){mstrmojo.requiresCls("mstrmojo.android.selectors.MobileSliderSelector","mstrmojo.hash");var D=mstrmojo.android.selectors.MobileSliderSelector,A=D.FLAGS,F=D.TYPES;mstrmojo.android.selectors.Slider=mstrmojo.declare(mstrmojo.android.selectors.MobileSliderSelector,null,{scriptClass:"mstrmojo.android.selectors.Slider",items:A.UNSET,initState:function C(){if(!!this.items){this.leftStep=this.rightStep=this.singleStep=null;this.set("type",(!this.multiSelect)?F.SINGLE:(this.include)?F.INCLUDE:F.EXCLUDE);this.set("steps",this.items.length);this.value=null;this.set("value",this.selectedIndices);}},onvalueChange:function G(){var H=this.value,J=mstrmojo.hash.any(H,true),K=J;if(this.type===F.SINGLE){this.set("singleStep",parseInt(J)||0);}else{var I;for(I in H){J=Math.min(I,J);K=Math.max(I,K);}J=J||"0";if(K===undefined||K===null){K=String(this.steps-1);}this.set("leftStep",parseInt(J,10));this.set("rightStep",parseInt(K,10)+1);}},flushSelections:function B(){if(this.type===F.SINGLE){this.select([this.singleStep]);}else{var I=[],H=this.leftStep;for(;H<this.rightStep;H++){I.push(H);}this.select(I);}},buildSummary:function E(L,M,H){var I=this.items,K=(L!==null)?L:M;if(K===undefined||K===null||isNaN(K)||!I.length){return ;}var J=(L===null&&M!==H-1)?I[M].n+" - "+I[H-1].n:(I[K]&&I[K].n)||"";this.summary.innerHTML=J;return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.mstr.EnumFunction","mstrmojo.mstr.EnumWebFunctionType","mstrmojo.mstr.EnumExpressionType","mstrmojo.mstr.EnumNodeType","mstrmojo.mstr.EnumDataType","mstrmojo.mstr.WebOperatorNode","mstrmojo.mstr.WebFormShortcutNode","mstrmojo.mstr.WebConstantNode","mstrmojo.mstr.WebTimeNode");var G=mstrmojo.mstr.EnumFunction,D=mstrmojo.mstr.EnumWebFunctionType,I=mstrmojo.mstr.EnumExpressionType,H=mstrmojo.mstr.EnumNodeType,B=mstrmojo.mstr.EnumDataType;mstrmojo.mstr.WebExpression=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.mstr.WebExpression",rootNode:null,init:function(K){K=K||{};if(!K.rootNode){K.rootNode=new mstrmojo.mstr.WebOperatorNode({exprType:I.FilterBranchQual,funcType:D.WebFunctionTypeGeneric,func:G.FunctionAnd});}this._super(K);},createOperatorNode:function E(K,N,L){if(!L){L=this.rootNode;}var M=new mstrmojo.mstr.WebOperatorNode({exprType:K});M.set("func",N);L.appendChild(M);return M;},createFormShortcutNode:function A(K,N,L){if(!L){L=this.rootNode;}var M=new mstrmojo.mstr.WebFormShortcutNode({attribute:K,form:N});L.appendChild(M);return M;},createValueNode:function C(M,K,L){switch(K){case B.DataTypeDate:case B.DataTypeTime:case B.DataTypeTimeStamp:return this.createTimeNode(M,L);default:return this.createConstantNode(M,K,L);}},createConstantNode:function J(N,K,L){if(!L){L=this.rootNode;}var M=new mstrmojo.mstr.WebConstantNode({value:N,type:K});L.appendChild(M);return M;},createTimeNode:function(M,K){var L=new mstrmojo.mstr.WebTimeNode({value:M});if(!K){K=this.rootNode;}K.appendChild(L);return L;},newAQSubExpression:function(K,O,N,M,Q){if(N<0){N=G.FunctionEquals;}var L=this.createOperatorNode(I.FilterSingleBaseFormQual,N),P=this.createFormShortcutNode(K,O,L),R=this.createValueNode(Q,M,L);return L;},buildShortXML:function F(L){L.addChild("exp");var K=this.rootNode;if(K){if(parseInt(K.exprType,10)===I.FilterBranchQual&&parseInt(K.nodeType,10)===H.NodeOperator){if(K.childNodes&&K.childNodes.length===1){var M=parseInt(K.func,10);if(M===G.FunctionAnd||M===G.FunctionOr){K.childNodes[0].buildShortXML(L);}else{K.buildShortXML(L);}}else{K.buildShortXML(L);}}else{K.buildShortXML(L);}}L.closeElement();}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.DatePickerDialog");mstrmojo.android.nativedialog.DateTimePickerDialog=mstrmojo.declare(mstrmojo.android.nativedialog.DatePickerDialog,null,{scriptClass:"mstrmojo.android.nativedialog.DateTimePickerDialog",type:8,populateConfig:function A(){this._super();var C=this.children[0],B=C.dtValue.time;this.config.hour=B.hour;this.config.min=B.min;this.config.is24Hour=C.is24HourMode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.date");var A=mstrmojo.date;mstrmojo.DateStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.DateStepperContentProvider",curVal:null,init:function(F){this._super(F);var G=this.item,E=G[this.intField],I=G[this.valField],H=this.minField,D=this.maxField,C=G[H],B=G[D];this.min=C&&A.getDateFromDateInfo(C);this.max=B&&A.getDateFromDateInfo(B);this.curVal=I?A.getDateFromDateInfo(I):(this.min?new Date(this.min):new Date());this.createChildProviders();},createChildProviders:function(){var B=this;mstrmojo.array.forEach(["year","month","day"],function(C){B[C+"CP"]=new mstrmojo.NumStepperContentProvider({item:{interval:1},canLoop:true,updateConfig:function(E,D,F){this.curVal=E;this.max=D;this.min=F;},onTraverse:function(){B.traverse(C,this.curVal);}});});this.updateChildProviders();},updateChildProviders:function(){var I=this.max,D=this.min,G=this.curVal.getFullYear(),F=this.curVal.getMonth(),H=this.curVal.getDate(),C=I&&(G===I.getFullYear()),E=D&&(G===D.getFullYear()),J=C&&(F===I.getMonth()),B=E&&(F===D.getMonth());this.yearCP.updateConfig(G,I?I.getFullYear():null,D?D.getFullYear():null);this.monthCP.updateConfig(F+1,C?I.getMonth()+1:12,E?D.getMonth()+1:1);this.dayCP.updateConfig(H,J?I.getDate():mstrmojo.date.getDaysOfMonth(G,F+1),B?D.getDate():1);},traverse:function(E,D){var C=this.curVal,G=(E==="year")?D:this.curVal.getFullYear(),B=(E==="month")?D:this.curVal.getMonth()+1,F=(E==="day")?D:this.curVal.getDate();F=Math.min(mstrmojo.date.getDaysOfMonth(G,B),F);C.setFullYear(G,B-1,F);if(this.max){C=Math.min(this.max,C);}if(this.min){C=Math.max(this.min,C);}this.curVal=new Date(C);this.updateChildProviders();if(this.onTraverse){this.onTraverse();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css","mstrmojo.DI.DIHelpers");var F=mstrmojo.css,H=mstrmojo.string,A=mstrmojo.desc(14058,"Show Details"),E=mstrmojo.desc(14059,"Hide Details"),B=mstrmojo.DI.DIHelpers,D=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">'+D+'</div><div class="toggle-details-link" >'+A+'</div><div class="error-details">{@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},errorDetailsNode:function(){return this.domNode.firstChild.children[3];}},markupMethods:{onshowDetailsChange:function(){var K=this.showDetails;this.toggleDetailsNode.innerHTML=K?E:A;F.toggleClass(this.domNode,"show-details",K);this.updateScrollbars();}},cssClass:undefined,shortDesc:undefined,longDesc:undefined,showDetails:false,showToggle:true,enableContactStr:true,allowHTML:false,init:function I(K){this._super(K);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function J(K){var M=K.getTarget(),L,N=this.longDesc;if(M===this.contactNode){L="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(N?("&body="+encodeURI("Detail:\r\n"+N)):"");mstrApp.openPage(L,"_self");}else{if(M===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}},setupScrollNodes:function C(){this.scrollNode=this.scrollNode;},preBuildRendering:function G(){this._super&&this._super();if(!this.allowHTML){this.longDesc=H.encodeHtmlString(H.decodeHtmlString(this.longDesc,true),true);}},postBuildRendering:function(){var K=this.domNode.firstChild.children[1];this._super&&this._super();!this.showToggle&&F.addClass(this.toggleDetailsNode,"hide");!this.enableContactStr&&F.addClass(K,"invisible");}});})();(function(){mstrmojo.requiresCls("mstrmojo.XtabModel","mstrmojo._IsRptModel","mstrmojo.func");mstrmojo.RptXtabModel=mstrmojo.declare(mstrmojo.XtabModel,[mstrmojo._IsRptModel],{scriptClass:"mstrmojo.RptXtabModel",init:function D(E){this._super(E);this.dataService=(mstrApp.modelFactory&&mstrApp.modelFactory.newDataService("Xtab",E))||mstrApp.viewFactory.newXtabDataService(E);},getPageByTree:function A(E){if((!this.data.ghs||!this.data.ghs.phs)&&!this.data.phs){return ;}this._super(E);},downloadGridData:function C(I){var G=I.xtabId,F=I.memo,E=mstrmojo.all[G],H=this.getDataService();var J={success:function(K){if(K&&E){E.dataDownloaded({data:K},F);E.updateXtabStyles(K.cssString);}},failure:function(){if(E.dataDownloadErr){E.dataDownloadErr();}}};H.downloadGridData(I,J);},destroy:function B(){if(this.dataService){this.dataService.destroy();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.XtabModel","mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.elementHelper");var AF="Metrics",H=2,h=mstrmojo.array,L=mstrmojo.hash,a=mstrmojo.elementHelper,A="\u001E";var J=1,s=2,N=0,X=2,B=3;function V(AL){if(!AL){return false;}var AM=this.scm,AN,AQ,AP,AO,AK,AJ=false;for(AQ in AM){AP=AM[AQ];AO=AP.cgb;for(AN in AO){AK=AL[AO[AN]];if(AK){if(!AP.tks){AP.tks=AK;AJ=true;}else{if(AP.tks&&(AP.tks.indexOf(AK)<0)){AP.tks+=A+AK;AJ=true;}}}}}return AJ;}function p(){var AK=this.data,AJ=AK.gts;if(!AJ){return ;}var AL;h.forEach([AJ.row,AJ.col],function(AM){h.forEach(AM,function(AN){if(AN.sc){AL=AL||{};AL[AN.id||AF]=AN.sc;if(AN.fid){AL[AN.id+"_"+AN.fid]=AN.sc;}}});});this.scm=AL;V.call(this,this.docModel.getCGBMap());}function AI(AJ,AK){var AL=this.getDataService();AL[AJ].apply(AL,AK);}function Y(AR,AX,AQ){var AT=AX||a.getIdPresentation(AR),AY,AJ;switch(AT){case"terse":case"terseLong":AR=AR.replace(/\\;/g,"*ESCAPESEMICOLON*");AY=AR.split(";");return(AY[0]+";"+AY[1]+(AQ?";"+AQ:"")).replace(/\*ESCAPESEMICOLON\*/g,"\\;");case"old":var AL="",AO=2;AR=AR.replace(/\*:/g,"*COLON*").replace(/\\/g,"\\\\").replace(/;/g,"\\;");AY=AR.split(":");while(AY[AO]){AL+=":"+AY[AO];AO++;}return("h"+AY[1]+AL+";"+AY[0]+(AQ?";"+AQ:"")).replace(/\*COLON\*/g,"\\:");case"oldLong":var AK=0,AW,AP,AS=[],AZ=[],AV,AU,AN,AM=function AM(){if(AK<0){return null;}var Ad=false,Ab=-1,Ae,Ac=null;for(AV=AK;AV<AR.length;AV++){Ae=AR.charAt(AV);if(Ae==="*"&&!Ad){Ad=true;}else{if(Ae===":"&&!Ad){Ab=AV;break;}else{Ad=false;}}}if(Ab===-1){Ac=AR.substring(AK);AK=-1;}else{Ac=AR.substring(AK,Ab);AK=Ab+1;}return Ac;};AN=AM();if(AN!=="BB"&&AN!=="BF"){return AR;}AJ=AM();if(AN==="BF"){AJ=AM();}AW=parseInt(AM(),10);AP=parseInt(AM(),10);for(AU=0;AU<AP;AU++){AZ[AU]=parseInt(AM(),10);AM();}for(AU=0;AU<AP;AU++){var Aa=AM();if(AZ[AU]<AW&&AZ[AU]>=0){AS[AZ[AU]]=Aa.replace(/\\/g,"\\\\").replace(/\*:/g,"\\:").replace(/;/g,"\\;");}}return"h"+AS.join(":")+";"+AJ+(AQ?";"+AQ:"");}return AR;}mstrmojo.DocXtabModel=mstrmojo.declare(mstrmojo.XtabModel,null,{scriptClass:"mstrmojo.DocXtabModel",docModel:null,init:function AB(AJ){this._super(AJ);var AK=this;this.docModel.attachEventListener("CGBMapChange",this.id,function(AL){if(AK.xtab.onCBGMapChange){AK.xtab.onCGBMapChange(AL);}});},ondataChange:function u(){p.call(this);},getMessageId:function I(){return this.docModel.mid;},getDataService:function K(){return this.docModel.getDataService();},getAction:function f(AX,AN,AS){var AV=AX[0],AK=AV&&AV.at;var AM;if(AK){if((AK&H)>0){var AL=this.getCellTitleInfo(AV),AT=AL&&AL.title,AJ=AT&&AT.id,AU=this.scm;this.sti={titleId:AJ||AF};var AR=(AJ&&AU[AJ])||AU[AF],AQ=function(){var AY=[];h.forEach(AX,function(AZ){if(AZ._e&&AZ._e.id){AY.push(AZ._e.id);}});return AY.join(A);};if(AR){var AW=this.xtab,AO=(AW.allowToggleSelections&&AR.all&&AS),AP=(AL.isSrcTitle||AO);this.sti.deselectCurrent=AO;AM={h:"onGridSelector",a:{type:mstrmojo.EnumRWUnitType.GRID,anchor:AN,ck:AR.ck,tks:AR.tks,eid:AP?"OA:(All)":AQ(),ctlKey:AR.ckey,sliceId:AW.sid,isUConDS:AR.isUConDS,ifw:AR.ifw}};}}}if(!AM){AM=this._super(AX);}if(AM&&AM.a){AM.a.sliceId=this.xtab.sid;}return AM;},getDownloadAction:function AA(AL,AP,AN,AM,AQ,AK,AO,AR){var AJ=this._super(AL,AP,AN,AM,AQ,AO,AK);AJ.sliceId=this.xtab.sid;if(AR&&AR.name==="TransactionUpdates"){if(AJ.partialUpdate){if(AJ.partialUpdate.selectors){AJ.partialUpdate.selectors.push(AR.ctlKey);}else{AJ.partialUpdate.selectors=[AR.ctlKey];}}else{AJ.partialUpdate={selectors:[AR.ctlKey]};}}return AJ;},getDrillAction:function t(AK,AM){var AL=this._super(AK,AM),AJ=this.getCellTitleInfo(AK[0]);if(AL&&AL.isWithin){AL.attrObj=AJ.title;}AL.srcMsgId=this.docModel.mid;return AL;},sort:function AE(AK,AL){var AJ=this.xtab;AK.stp=AK.stp||this.getSubTotalsPos();AK.subTotalsPos=AK.stp;AK.nodeKey=AJ.k;AK.treeType=AJ.treeType||1;if(AJ.gridData.ctlTPKeys){AK.selectors=AJ.gridData.ctlTPKeys.split(A);}AI.call(this,"sortGrid",[AK,AL]);},getAdvSortData:function W(AJ,AK){AI.call(this,"getAdvSortData",[AJ,AK]);},pivot:function M(AJ,AK){AI.call(this,"pivot",[AJ,AK]);},removeUnit:function U(AJ,AK){AI.call(this,"removeUnit",[AJ,AK]);},getTotalsAction:function O(AJ,AM,AK){var AL=this.getPivotAction(AJ);AL.act="showTotals";AL.subtotalType=AM;AL.clearSubtotalType=AK;return AL;},getRemoveAxisTotalsAction:function l(AK,AJ){return{act:"removeAxisTotals",axis:AJ,subtotalType:AK};},showTotals:function E(AJ,AK){AI.call(this,"showTotals",[AJ,AK]);},drillGrid:function e(AJ,AK){AI.call(this,"drillGrid",[AJ,AK]);},downloadGridData:function o(AJ,AK){AI.call(this,"downloadGridData",[AJ,AK]);},loadLayout:function j(AJ){this.docModel.loadLayout(AJ);},resizeXtabColumn:function Q(AJ,AK){AI.call(this,"resizeXtabColumn",[AJ,AK]);},submitTemplateActions:function AC(AJ,AK,AL){AI.call(this,"submitTemplateUpdates",[AJ,AK,AL]);},getDerivedMetricAction:function w(AJ,AK){return{did:AJ._e.oid,um:AJ.um,alias:AJ._e.n,n:AJ._e.n,v:AJ.um?AJ.formula:AJ._e.v,mix:AJ.mix,cmd:AK,model:this};},getAddTemplateUnitAction:function D(AN,AP,AL,AJ){var AK=AN.t,AO=this.data.gsi,AM={act:"addUnit",unitId:AN.did,unitType:AK,unitPos:++AJ,dsId:AP,isFirst:!AO||(AO.cols.length===0&&AO.rows.length===0)};if(AK!==4||!AO||!AO.mx.length){AM.axis=AL;}return AM;},getRemoveTemplateUnitAction:function z(AJ){return{act:"removeUnit",unitId:AJ.did||AJ.id,unitType:AJ.t||4,is_disableonly:1};},getRenameTemplateUnitAction:function G(AN,AL,AJ,AK){var AM={act:"renameUnit",id:AN,type:AL,name:AJ};if(AK){AM.isDynamicAlias=true;}return AM;},doesNameExistOnTemplate:function C(AL,AP,AN,AK){var AO=AL.node.data.gsi,AJ=AN===4,AM=AJ?AO.mx:AO.rows.concat(AO.cols);return AM.some(function(AQ){return AQ.did!==AP&&(AJ||AQ.t===AN)&&AQ.n===AK;});},getPivotUnitAction:function R(AM,AJ,AQ,AL,AP,AO){AJ++;var AN=parseInt(AP,10),AK=parseInt(AO,10);return L.copy(isNaN(AN)||isNaN(AK)?{}:{originAxis:AN,originUnitPos:++AK},{act:"pivot",unitId:String(AQ||""),unitType:AL||"",axis:AM,unitPos:AJ});},getShowTotalsUnitAction:function b(AM,AK,AL,AJ){return{act:"showTotals",unitId:String(AM||""),unitType:AK||"",subtotalType:AL,clearSubtotalType:AJ};},getMoveSubTotalAction:function k(AL,AM,AN,AQ){var AS=(this.xtab.gridInfo&&this.xtab.gridInfo.sorts)||[],AK=AL&&AL.axis,AO;function AJ(AY,AZ){var Aa=[];if(AZ.length>=AY){if(AQ){Aa=AY===J?AZ[s-1]:AZ[J-1];}else{Aa=AZ[AY-1];}}function AU(Ab,Ac){return Ab.indexOf("0!00000000000000000000000000000000!!!!"+Ac)>-1;}function AX(Ab,Ac){return !!(Ab&&Ab.length&&Ab[0].key&&!AU(Ab[0].key,Ac));}var AW=AX(Aa,AY),AV;if(AW){AV=L.clone(AZ);AV.forEach(function(Ac,Ab){if(!AX(Ac,Ab+1)){AV[Ab]=null;return ;}AV[Ab]=Ac=h.filter(Ac,function(Ad){return !AU(Ad.key,AY);});(Ac||[]).forEach(function(Ae){var Ad=Ae.key;if(Ad){Ae.key=Ad.replace(/;/g,"\\;").replace(/\u001e/g,";");if(AQ){Ad=Ae.key;if(Ad.indexOf("!!1")>=0){Ae.key=Ad.replace(/!!1/g,"!!2");}else{Ae.key=Ad.replace(/!!2/g,"!!1");}}}});});if(AQ){AV=AV.reverse();}}return AW?AV:[];}function AP(AW,AX){if(!AX||AX.length<AW){return false;}var AU=AX[AW-1];if(!AU||AU.length!==1){return false;}var AY="!5",AV=AU[0].key;return AV&&AV.slice(-2)===AY;}function AR(AX,AU,AW,AV,AY){return{act:"moveSubTotal",nodeKey:AX,sorts:AU,subTotalsPos:AW,stt:AY||-1,axis:AV};}function AT(){var AW=this.data,AV=AW&&AW.gts,Aa=AV&&AV.rowSubPos||N,AU=AV&&AV.colSubPos||N,AZ=[Aa,AU];if((!AK||AK===J)&&Aa===N){var AY=AV&&AV.row||[],AX=false;h.forEach(AY,function(Ab){if(Ab.ast&&Ab.ast.length>0){AX=true;return false;}});if(!AX||AW&&AW.gsi&&AW.gsi.hidesb){AZ[J-1]=X;AO=AJ(J,AS);return AR(AN,AO,AZ,J);}}return null;}if(!AM){return AT.call(this);}else{AO=AJ(AK,AS);return AR(AN,AO,AM,AK,AP(AK,AO)&&AL.hst?AL.hst:-1);}return null;},getSortGridAction:function AD(AM,AK,AL,AJ){return{sortKey:AK,subTotalsPos:AM,axis:AL,isAsc:AJ};},getColumnResizeAction:function S(AM,AJ,AK,AL,AN){return{act:"changeXtabColumnWidth",unitId:AM,unitType:AJ,width:AK||0,depth:AL||1,ec:AN};},getNormalizedFormElementId:function AH(AK,AJ){return Y(AK,null,AJ);},compareNormalizedElementsId:function x(AK,AJ){if(AK===AJ){return true;}else{if(this.docModel.populateAttributeIdLinkInfo){this.docModel.populateAttributeIdLinkInfo();}if(a.isAttributeIdsLinked(a.getAttributeId(AK),a.getAttributeId(AJ),this.docModel.als&&this.docModel.als.idLinks||{})){return a.getElementValue(AK)===a.getElementValue(AJ);}}return false;},compareElementsId:function Z(AN,AM){if(!this.docModel.als){return this.compareElementsIdInSingleGrid(AN,AM);}var AL=a.getIdPresentation(AN),AK=a.getIdPresentation(AM),AJ=Y(AN,AL),AO=Y(AM,AK);return this.compareNormalizedElementsId(AJ,AO);},compareElementsIdInSingleGrid:function g(AM,AL){var AK=a.getIdPresentation(AM),AJ=a.getIdPresentation(AL);if(AK!==AJ||AK==="oldLong"||AK==="terseLong"){return Y(AM,AK)===Y(AL,AJ);}return AM===AL;},getLinkedAttributes:function q(AJ){var AK;if(this.docModel.populateAttributeIdLinkInfo){this.docModel.populateAttributeIdLinkInfo();}AK=this.docModel.als&&this.docModel.als.idLinks||{};return AK[AJ];},getCellDataUnion:function d(AL){var AM=this,AK=AL.hasOwnProperty("mix"),AN=[],AO,AJ=function AJ(AQ){var AP=AM.getCellTitleInfo(AQ),AS=AP.title,AR=AS&&AS.id;if(AR){AO={};if(AQ.stt){AO.isSubtotal=true;}AN.push(L.copy(AO,{tid:AR,eid:AQ._e&&AQ._e.id,v:AQ.v||AQ._e&&AQ._e.n}));}};if(AL){if(!AK){AJ(AL);}else{h.forEach([AL._lp,AL._tp],function(AP){var AQ=AP;while(AQ&&AQ!==AQ._p){AJ(AQ);AQ=AQ._p;}});}}return AN;},getObjectInfo:function F(AJ){var AK;h.forEach((this.data.gsi.cols||[]).concat(this.data.gsi.rows||[]),function(AL){if(AL.did===AJ){AK=AL;}});return AK;},supportsViewFilterActions:function P(AJ){if(this.data&&this.data.gsi){var AK=this.getObjectInfo(AJ);return AK&&!AK.de&&(AK.t!==1)&&(AK.t!==47||AK.st===12033);}return false;},getSelectorControlMapInfo:function AG(){var AK=[],AM=this.data.gsi,AL=[],AJ;if(this.scm){L.forEach(AM,function(AN){if(AN instanceof Array){AL=AL.concat(AN);}});L.forEach(this.scm,function(AO,AN){AJ=h.find(AL,"did",AN);if(AJ!==-1){AK.push({did:AN,n:AL[AJ].n,sc:AO});}});}return AK;},getShowDefinedSubtotalsAction:function(){return{act:"showDefinedSubtotals"};}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocXtabModel","mstrmojo.array","mstrmojo.func");var E=2;var D=1,A=2;mstrmojo.DocVisModel=mstrmojo.declare(mstrmojo.DocXtabModel,null,{scriptClass:"mstrmojo.DocVisModel",getAction:function C(H){var F=H[0],G=F&&F.at;var I;if(G){if(G&E){I={h:"onVisSelector",a:this.getSelectAction(F)};}}if(!I){I=this._super(H);}return I;},getSelectAction:function B(K){var N=K.scObjList,M=N.length,G=null;if(M>1){G={multiSelect:true,type:mstrmojo.EnumRWUnitType.GRID,src:K.k,sliceId:1,sid:1,anchor:K.anchor,selectorObjects:[]};var F={};var J="";for(var I=0;I<M;I++){var O=N[I];var P=O.sc.tks.split("\x1E");for(var H=0;H<P.length;H++){var L=P[H];if(!F[L]){F[L]=true;if(J.length>0){J=J+"\x1E"+L;}else{J=L;}}}}for(var I=0;I<M;I++){var O=N[I];G.selectorObjects.push({ck:O.sc.ck,ctlKey:O.sc.ckey,tks:O.sc.tks,eid:O.eid});}if(!G.tks){G.tks=J;}}else{if(M===1){var O=N[0];G={type:mstrmojo.EnumRWUnitType.GRID,src:K.k,sliceId:1,sid:1,ck:O.sc.ck,ctlKey:O.sc.ckey,tks:O.sc.tks,eid:O.eid,anchor:K.anchor};}}return G;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.array","mstrmojo.date","mstrmojo.Stepper","mstrmojo.android.ui.Button","mstrmojo.DateStepperContentProvider","mstrmojo.NumStepperContentProvider");var V=mstrmojo.array,Q=mstrmojo.date,L=mstrmojo.hash,R=mstrmojo.android.ui.Button.newButton,I=mstrmojo.expr.DTP,D={interval:1},G={min:1,max:12,interval:1,value:12},N={min:0,max:23,interval:1,value:0},E={min:0,max:59,interval:1};function C(){var X=this.dtp,a=this.stepperClass,Y=this[this.valueField],M=[],Z,H;if(this._hasDate){M.push({scriptClass:a,slot:"monthNode",alias:"monthStepper",title:mstrmojo.desc(871,"month"),provider:this.dateProvider.monthCP},{scriptClass:a,slot:"dayNode",alias:"dayStepper",title:mstrmojo.desc(872,"day"),provider:this.dateProvider.dayCP},{scriptClass:a,slot:"yearNode",alias:"yearStepper",title:mstrmojo.desc(873,"year"),provider:this.dateProvider.yearCP});}if(this._hasTime){M.push({scriptClass:a,slot:"hourNode",alias:"hourStepper",provider:this.hourProvider},{scriptClass:a,slot:"minNode",alias:"minStepper",provider:this.minProvider});}if(!this.hideSwitchers){if(X!==I.TIME){Z=(Y&&Y.date)?Q.formatDateInfo(Y.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT):mstrmojo.desc(2052,"Date");M.push(R(Z,function(){this.parent.toDateView();},{alias:"dateToggle",slot:"switcherNode",cssClass:"",selected:true}));}if(X!==I.DATE){H=(Y&&Y.time)?Q.formatTimeInfo(Y.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT):mstrmojo.desc(2170,"Time");M.push(R(H,function(){this.parent.toTimeView();},{alias:"timeToggle",slot:"switcherNode",cssClass:"",selected:X==I.TIME}));}}if(this._hasDate){this.viewCssClass="dateView";}else{if(this._hasTime){this.viewCssClass="timeView";}}this.addChildren(M);}function P(){var b=[this.valueField,"min","max"],M=L.copy(D),a=this.is24HourMode?L.copy(N):L.copy(G),Z=L.copy(E),Y=this[this.valueField],H=Y&&Y.time,X=this;V.forEach(b,function(d){M[d]=L.copy(X[d]);});if(this._hasDate){this.dateProvider=new mstrmojo.DateStepperContentProvider({item:M,valField:this.valueField,canLoop:true,onTraverse:function(){X.updateDate();}});}if(this._hasTime){if(this.minuteInterval!==undefined){Z.interval=this.minuteInterval;}delete this.minuteInterval;if(H){if(!this.is24HourMode){a.value=H.hour%12||12;this.set("meridiem",(H.hour<12));}else{a.value=H.hour;}Z.value=H.min;}this.hourProvider=new mstrmojo.NumStepperContentProvider({item:a,valField:"value",canLoop:true,onTraverse:function(){X.updateTime();}});this.minProvider=new mstrmojo.NumStepperContentProvider({item:Z,valField:"value",canLoop:true,renderer:{render:function(d){return String(d).length===1?("0"+d):d;}},onTraverse:function(){X.updateTime();}});}}mstrmojo.DateTimePicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DateTimePicker",value:null,min:null,max:null,meridiem:true,hideSwitchers:false,minuteInterval:null,is24HourMode:false,dtp:mstrmojo.expr.DTP.TIMESTAMP,viewCssClass:"",valueField:"value",stepperClass:"mstrmojo.Stepper",markupString:"<div id='{@id}' class='mstrmojo-DateTimePicker' style='{@cssText}'><div class='switcher'></div><div class='{@viewCssClass}'><span class='stepNode month'></span><span class='stepNode day'></span><span class='stepNode year'></span><span class='stepNode hour'></span><span class='stepNode min'></span><span class='meridiem' mstrAttach:click></div></div></div>",markupSlots:{switcherNode:function(){return this.domNode.firstChild;},viewNode:function(){return this.domNode.children[1];},monthNode:function(){return this.domNode.children[1].children[0];},dayNode:function(){return this.domNode.children[1].children[1];},yearNode:function(){return this.domNode.children[1].children[2];},hourNode:function(){return this.domNode.children[1].children[3];},minNode:function(){return this.domNode.children[1].children[4];},meridiemNode:function(){return this.domNode.children[1].children[5];}},markupMethods:{onmeridiemChange:function(){if(this.is24HourMode){this.meridiemNode.display="none";}else{this.meridiemNode.innerHTML=this.meridiem?mstrmojo.locales.datetime.AM_NAME:mstrmojo.locales.datetime.PM_NAME;}},onviewCssClassChange:function(){this.viewNode.className=this.viewCssClass;}},init:function O(M){this._super(M);var H=this.dtp;this._hasDate=(H===I.DATE||H===I.TIMESTAMP);this._hasTime=(H===I.TIME||H===I.TIMESTAMP);P.call(this);C.call(this);},getDateTime:function B(){return{date:this.getDate(),time:this.getTime()};},getDate:function F(){if(this._hasDate){var H=this.dateProvider.curVal;return{year:H.getFullYear(),month:H.getMonth()+1,day:H.getDate()};}return null;},getTime:function S(){if(this._hasTime){return{hour:!this.is24HourMode?Q.capitalHour(this.hourProvider.curVal,this.meridiem?" AM":" PM"):this.hourProvider.curVal,min:this.minProvider.curVal};}return null;},getDateTimeString:function K(){var H="";if(this._hasDate){H+=Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT);}if(this._hasDate&&this._hasTime){H+=" ";}if(this._hasTime){H+=Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return H;},updateDate:function A(){if(this.hasRendered){var H=this;V.forEach(["year","month","day"],function(M){H[M+"Stepper"].updateDisplayText();});}if(this.dateToggle){this.dateToggle.set("text",Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}},updateTime:function J(){if(this.timeToggle){this.timeToggle.set("text",Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}},toDateView:function U(){this.set("viewCssClass","dateView");this.dateToggle.set("selected",true);var H=this.timeToggle;if(H){H.set("selected",false);}},toTimeView:function W(){this.set("viewCssClass","timeView");var H=this.dateToggle;if(H){H.set("selected",false);}this.timeToggle.set("selected",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompt","mstrmojo.array","mstrmojo.mstr.EnumDataType","mstrmojo.mstr.WebAttribute","mstrmojo.mstr.WebElements","mstrmojo.mstr.WebAttributeForm","mstrmojo.mstr.WebExpression","mstrmojo.mstr.WebFilter");mstrmojo.requiresDescs(8407,8408,8759);var R=mstrmojo.array.forEach;var P=mstrmojo.prompt.WebPrompt.STYLES;var O={0:"country",1:"administrative_area_level_1",2:"locality",3:"postal_code"};function J(Z,d){Z=Z||[];var Y=(d&&d.prs&&d.prs.GeographicMapping)||0,a=O[Y],b=false,X="";R(Z,function(e){R(e.address_components,function(f){R(f.types,function(g){if(g===a){X=f.short_name;b=true;return false;}});if(b){return false;}});if(b){return false;}});return X;}var U=mstrmojo.mstr.EnumFunction,L=mstrmojo.mstr.EnumDataType;function S(f){var Y=this.dateAnswer,e=Y&&Y.length,d=1;if(e){var Z=new mstrmojo.mstr.WebAttributeForm({did:this.origin.dateFormID}),h=new mstrmojo.mstr.WebExpression(),a=new mstrmojo.mstr.WebFilter({expression:h}),b=h.newAQSubExpression(this.origin,Z,U.FunctionIn,L.DataTypeDate,Y[0]);for(d;d<e;d++){h.createTimeNode(Y[d],b);}var X=this.origin.getElements({shortFilterXML:a.getXML(),blockBegin:1,blockCount:-1});var g=this,j=f.success;f.success=function(){g.dateAnswer=null;g.answer.set("items",X.items);if(!X.items.length&&f.failure){f.failure(mstrmojo.desc(8759,"No data found for the selected date(s)."));}else{j();}};X.getItems(0,f);}else{this.answer.set("items",[]);this.dateAnswer=null;f.success();}}mstrmojo.prompt.WebElementsPrompt=mstrmojo.declare(mstrmojo.prompt.WebPrompt,null,{scriptClass:"mstrmojo.prompt.WebElementsPrompt",answer:"",preAnswer:"",defAnswer:"",suggestion:null,origin:null,filter:null,dateAnswer:null,getStyle:function D(){var X=this._style;if(!X){var Y=this.prs;if(Y.DisplayStyle==="Calendar"&&!!this.origin.dateFormID){X=P.CALENDAR;}else{X=P.LIST;}this._style=X;}return parseInt(X,10);},syncDateAnswer:function B(X){if(this.dateAnswer){S.call(this,X);}else{X.success();}},validate:function N(Y){this._super(Y);Y=(Y===undefined||Y===null)?(this.answer&&this.answer.items):Y;var a=(Y&&Y.length)||0,Z=parseInt(this.min,10),X=parseInt(this.max,10),b="";if(!isNaN(Z)&&a<Z){b=mstrmojo.desc(8407,"You have made (#) selections, which is fewer selections than the required (##) for this prompt. Please make more selections.").replace("##",Z).replace("#",a);}else{if(!isNaN(X)&&a>X){b=mstrmojo.desc(8408,"You have made (#) selections, which is more selections than are allowed (##) for this prompt. Please remove some selections.").replace("##",X).replace("#",a);}}if(b){throw new Error(b);}},isAnswerEmpty:function C(X){X=(X===undefined||X===null)?(this.answer&&this.answer.items):X;return !X||(X.length===0);},getAvailable:function W(){var X;if(this.suggestion&&this.suggestion.items.length>0){X=this.suggestion;}else{X=this.origin.getElements();}return X;},canSearch:function V(){return !(this.suggestion&&this.suggestion.items.length>0);},getDisplayValue:function F(){if(this.getStyle()===P.CALENDAR&&this.dateAnswer){return this.dateAnswer.join(",");}var b=this.answer,Y=(b&&b.items)||[],Z=0,X=Y.length,a=[];for(Z;Z<X;Z++){a.push(Y[Z].n);}return a.join(", ");},getAnswerAsDateArray:function(){var X=mstrmojo.date,b=[],Z,Y,d=this.dateAnswer,a=this.answer&&this.answer.items;if(this.getStyle()===P.CALENDAR){if(d){for(Z=0;Z<d.length;Z++){Y=X.parseDate(d[Z]);Y.n=Y.match;b.push(Y);}}else{if(a){for(Z=0;Z<a.length;Z++){Y=X.parseDate(a[Z].n);Y.n=Y.match;b.push(Y);}}}}return b;},getSearch:function K(a,Z,X){var Y={searchPattern:a,matchCase:Z};if(X){Y.searchTarget=this.searchTarget;}return this.origin.getElements(Y);},populate:function G(d){this._super(d);var a=(d&&d.ans&&d.ans.elms)||[];this.answer=new mstrmojo.mstr.WebElements({items:a,totalSize:a.length,blockBegin:1,blockCount:-1});var f=d&&d.orgn;if(f){this.origin=new mstrmojo.mstr.WebAttribute(f);if(this.dataSourcesXML){this.origin.browseConfig.dataSources=this.dataSourcesXML;}var b=this.prs;if(b&&b.DisplayStyle==="GeoLocation"&&b.LookupForm){var Z=b.LookupForm.split("~");this.searchTarget=new mstrmojo.mstr.WebAttribute({did:Z[0],t:Z[1],st:Z[3],n:Z[2]});}this.answer.source=this.origin;}var e=d&&d.suggest;if(e){var Y=this.suggestion=new mstrmojo.mstr.WebElements({items:e});}var X=d&&d.fres;if(X){this.filter=new mstrmojo.mstr.WebOI(X);if(f){this.origin.browseConfig.filter=this.filter;}}},populateAnswer:function(X){this.answer.items=mstrmojo.hash.cloneArray(X.ans.elms);},buildAnswerObject:function M(){var X=this._super();X.ans={elms:mstrmojo.hash.cloneArray(this.answer.items)};return X;},prepareAnswer:function I(X){this.syncDateAnswer(X);},setAnswerValue:function A(X){this.validate(X);if(this.getStyle()===P.CALENDAR){this.set("dateAnswer",X);}else{this.answer.set("items",X);}},getAnswersCount:function H(){if(this.dateAnswer){return this.dateAnswer.length;}if(this.answer){return this.answer.items.length;}return 0;},buildShortAnswerXML:function E(X){if(this.dateAnswer){alert("need to sync date answers first.");}else{if(this.answer){this.answer.buildShortXML(X);}}},getGeoTargetValue:function Q(Y){var X=this;mstrmojo.GeoLocation.getCurrentAddress({success:function(Z){var a=J(Z,X);if(Y&&Y.success){Y.success(a);}},failure:function(Z){if(Y&&Y.failure){Y.failure(Z);}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._TouchGestures","mstrmojo.android.ui.CalendarMonthView","mstrmojo.android.ui.CalendarYearList");var H=mstrmojo.hash,E=mstrmojo.array,C=mstrmojo.desc(2827,"Clear"),A=mstrmojo.desc(221,"Cancel");mstrmojo.android.ui.Calendar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._TouchGestures,mstrmojo._HasLayout],{scriptClass:"mstrmojo.android.ui.Calendar",config:undefined,markupString:'<div id="{@id}" class="mstrmojo-android-Calendar"><div class="mstrmojo-Calendar-Year"></div><hr class="mstrmojo-Calendar-Sep"/><div class="mstrmojo-Calendar-Month"></div></div>',markupSlots:{yearNode:function(){return this.domNode.firstChild;},monthNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},cssDisplay:"",isMultiSelect:false,selectedDates:undefined,min:undefined,max:undefined,init:function G(O){var J=new Date(),M=this.children[0],R=this.children[1],L=O.min=O.min||{},P=O.max=O.max||{},K=O.selectedDates=O.selectedDates||[],Q=K[0]||{},N,I;E.forEach([Q,L],function(S){if(!isNaN(S.year)&&!isNaN(S.month)){N=S.year;I=S.month;return false;}});I=!isNaN(I)?I:(J.getMonth()+1);N=!isNaN(N)?N:J.getFullYear();H.copy({initialYear:N,initialMonth:I,multiSelect:!!this.isMultiSelect,selected:K,range:{start:L,end:P}},R);H.copy({initialYear:N,start:L.year,end:P.year},M);this._super(O);},postBuildRendering:function D(){this.monthWidget.markupBuilder=this.markupBuilder;this._super();var I=this.target;I.set("items",this.selectedDates);I.selectItems(I.items);this.yearWidget.attachEventListener("yearChanged",this.monthWidget.id,function(J){this.current.set("y",J.value);});this.monthWidget.attachEventListener("selectionChanged",this.id,function(J){this.syncListItemsWithSelections([].concat(J.items));});this.target.attachEventListener("selectionChange",this.id,function(K){var P=this.target,J=P.items,N=this.monthWidget,M=E.get(J,K.added),O=E.get(J,K.removed);if(M&&M.length>0){N.selectItems(M);}else{var L;if((O&&O.length>0)&&(J&&J.length>0)){L=O;}N.unselectItems(L);}if(P.parent){P.parent.btnHbox.children[0].set("text",((P.getSelectedItems().length>0)?C:A));}N.selected=P.getSelectedItems();});},syncListItemsWithSelections:function F(I){var J=this.target;J.glow=false;J.set("items",I);J.selectItems(I);if(J.parent){J.parent.btnHbox.children[0].set("text",((J.getSelectedItems().length>0)?C:A));J.parent.resizeDialog();}J.glow=true;},getSelectedDates:function B(J){var I=[];E.forEach(this.target.getSelectedItems(),function(K){I.push(K.n);});return I;},children:[{scriptClass:"mstrmojo.android.ui.CalendarYearList",alias:"yearWidget",slot:"yearNode"},{scriptClass:"mstrmojo.android.ui.CalendarMonthView",alias:"monthWidget",slot:"monthNode"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo.SmoothScroll","mstrmojo._HasTouchScroller");var C=16;var A={0:"&#9654;",1:"&#9660;",2:"&nbsp;"};var B=["heatmap-tree-state-text collapsed","heatmap-tree-state-text expanded","heatmap-tree-state-text leaf"];var D={NO:0,YES:1,PART:2};mstrmojo.VisHeatMapTreeItem=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VisHeatMapTreeItem",isRoot:false,showRoot:false,rootText:"",idx:0,buttonNodeCss:"heatmap-tree-checkbox",buttonNodeWidget:null,markupString:'<div id="{@id}" class="heatmap-tree" style="{@cssText}"><div class="{@cssName}" idx="{@idx}"><div class="heatmap-tree-state"><div class="heatmap-tree-state space">&nbsp;</div><div class="heatmap-tree-state-text"></div></div><div class="heatmap-tree-text"></div><div class="{@buttonNodeCss}">&nbsp;</div></div><div class="heatmap-tree-container"></div></div>',markupSlots:{contentNode:function(){return this.domNode.firstChild;},stateNode:function(){return this.domNode.firstChild.firstChild;},stateSpaceNode:function(){return this.domNode.firstChild.firstChild.firstChild;},stateTextNode:function(){return this.domNode.firstChild.firstChild.lastChild;},textNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.childNodes[2];},containerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerText=this.text;},onstateChange:function(){this.stateTextNode.className=B[this.state];if(!this.isRoot){this.containerNode.style.display=(this.state===1)?"block":"none";if(this.state!=2){this.tree.resized();}}}},level:-1,tree:null,itemDisplayField:"n",itemChildrenField:"items",isSelectable:true,itemFunctionField:"itemFunction",itemIncludeFunction:function(){return true;},dataProvider:null,owner:null,cssName:"heatmap-tree-div",fillData:function(){var E=this.tree||this;if(this.dataProvider){this.items=this.dataProvider[this.itemChildrenField];this.entity=this.dataProvider;this.entity.treeItem=this;}var G=this.items;if(this.items&&this.items.length){this.childTree=[];var K=0;for(var H=0;H<G.length;H++){var I=G[H];if(this.itemIncludeFunction(I)){var J;if(E.owner){J=I.label;}else{J=I[this.itemDisplayField];}var F={idx:K,isRoot:false,text:J,itemFunction:I[this.itemFunctionField],buttonNodeWidget:I.buttonNodeWidget,tree:E,level:(this.level+1),itemDisplayField:this.itemDisplayField,itemChildrenField:this.itemChildrenField,parent:this,parentTree:this,state:0,owner:this.owner,isSelectable:this.isSelectable,itemIncludeFunction:this.itemIncludeFunction,buttonNodeCss:this.buttonNodeCss,fillData:this.fillData,buildTree:this.buildTree,setChildStatus:this.setChildStatus,updateSelection:this.updateSelection};if(this.dataProvider){F.dataProvider=I;}else{F.items=I[this.itemChildrenField];}this.childTree[K]=F;K++;}}}},renderChildrenList:function(){if(!this.childTree){return ;}var J=this.childTree.length,M,L;if(this.tree){L=this.tree.cachedUnits;M=L.indexOf(this.contentNode)+1;if(M==0){M=L.length;}}if(this.isRoot&&this.showScrollbars){M=0;L=this.cachedUnits;}for(var H=0;H<J;H++){if(this.childTree[H].domNode){this.tree.cachedUnits.splice(M,0,this.childTree[H].contentNode);M++;continue;}var E=document.createElement("div");this.containerNode.appendChild(E);this.childTree[H].placeholder=E;var I=new mstrmojo.VisHeatMapTreeItem(this.childTree[H]);if(!I){alert("new failed!");}I.childTree=this.childTree[H].childTree;if(I.childTree){var F=I.childTree,K=F.length;for(var G=0;G<K;G++){F[G].parent=I;F[G].parentTree=I;}}this.childTree[H]=I;this.childTree[H].render();if(!isNaN(M)){L.splice(M,0,this.childTree[H].contentNode);M++;}}},postBuildRendering:function(){if(this._super){this._super();}this.domNode.style.display="none";var E=this.tree||this;if(this.dataProvider){this.items=this.dataProvider[this.itemChildrenField];}if(this.isRoot){if(!this.showRoot){this.contentNode.style.display="none";}else{this.stateNode.style.display="none";this.textNode.innerText=this.rootText;}this.containerNode.className="heatmap-tree-container root";}else{if(this.buttonNodeWidget){this.buttonNodeWidget.placeholder=this.buttonNode;var G=mstrmojo.insert(this.buttonNodeWidget);G.render();this.buttonNode=G.domNode;}this.textNode.innerText=this.text;var F=(this.level+1)*C;this.stateSpaceNode.style.width=(F>=0?F:0)+"px";this.textNode.style.width=this.domNode.offsetWidth-this.stateNode.offsetWidth-this.buttonNode.offsetWidth-10+"px";}this.domNode.style.display="block";if(!(this.items&&this.items.length)){this.set("state",2);this.tree.sampleUnit=this.domNode;}else{if(this.entity&&this.entity.isExpanded){this.clickHandler({target:this.stateNode});}}},buildTree:function(){this.fillData();var E=this.childTree&&this.childTree.length||0;for(var F=0;F<E;F++){this.childTree[F].buildTree();}},clickHandler:function(G){var L=G.target;var K,J,F;if(this.owner){if(!this.owner.entitiesWithStates){this.owner.entitiesWithStates={};}J=this.owner.entitiesWithStates;K=this.entity;}if(this.state!==2&&mstrmojo.dom.contains(this.stateNode,L,true,this.domNode)){this.set("state",this.state===0?1:0);if(this.state==1){this.renderChildrenList();this.updateChildrenSelection();}else{var H=this.tree.cachedUnits.indexOf(this.contentNode);if(H!=-1){H++;var E=this.childTree.length;this.tree.cachedUnits.splice(H,E);}}if(K&&J){if(!J.expendedEntities){J.expendedEntities=[];}F=J.expendedEntities;if(this.state===0){delete K.isExpanded;var I=F.indexOf(K);if(I!==-1){F.splice(I,1);}}else{if(this.state===1){K.isExpanded=true;if(F.indexOf(K)===-1){F.push(K);}}}}this.tree.resized();this.tree.updateScroller();return ;}if(this.itemFunction){this.itemFunction(G);}if(!this.isSelectable){return ;}mstrmojo.VisHeatMapAnimation.animate(this.contentNode,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});if(this.selectionStatus===D.YES){this.selectionStatus=D.NO;}else{this.selectionStatus=D.YES;}this.setChildStatus(this.selectionStatus);this.updateSelection(false,true);if(J&&K){if(!J.selectionStatusModifiedEntities){J.selectionStatusModifiedEntities=[];}F=J.selectionStatusModifiedEntities;if(this.selectionStatus===D.NO){K.isSelected=false;}else{if(this.selectionStatus===D.YES){K.isSelected=true;}}F.push(K);}},setChildStatus:function(E){if(this.childTree){for(var F=0;F<this.childTree.length;F++){var G=this.childTree[F];if(!G){continue;}G.selectionStatus=E;G.setChildStatus(E);G.updateSelection(false,false);}}},updateChildrenSelection:function(){if(!this.childTree){return ;}var E=this.childTree.length;for(var F=0;F<E;F++){if(this.childTree[F]){this.childTree[F].updateSelection(false,false);}}},updateSelection:function(K,J){if(K&&this.childTree){var G=true;var L=true;var F=false;for(var H=0;H<this.childTree.length;H++){var I=this.childTree[H];if(G&&I.selectionStatus!==D.YES){G=false;}if(L&&I.selectionStatus!==D.NO){L=false;}if(!G&&!L){F=true;break;}}this.selectionStatus=G?D.YES:(L?D.NO:D.PART);}var E="heatmap-tree-div";switch(this.selectionStatus){case D.YES:E+=" selected";break;case D.PART:E+=" partSelected";break;case D.NO:default:break;}this.cssName=E;if(this.contentNode){this.contentNode.className=E;}if(J&&this.parentTree){this.parentTree.updateSelection(true,true);}if(this.isRoot){this.notifyAll();}},resized:function(){if(this.parent.resized){this.parent.resized(this.domNode.offsetHeight);}},selectionStatus:D.NO});mstrmojo.VisHeatMapTree=mstrmojo.declare(mstrmojo.VisHeatMapTreeItem,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisHeatMapTree",isRoot:true,showRoot:false,rootText:"",heightLimit:0,defaultSelectionStatus:D.NO,markupString:'<div id="{@id}" class="heatmap-tree root {@cssClass}" style="{@cssText} mstrAttach:mousedown,mousemove,mouseup,click"><div class="heatmap-tree-div" style="line-height:40px;" idx="{@idx}"><div class="heatmap-tree-state" style="display:none;"><div class="heatmap-tree-state space">&nbsp;</div><div class="heatmap-tree-state-text"></div></div><div class="heatmap-tree-text"></div><div class="{@buttonNodeCss}">&nbsp;</div></div><div style="overflow:hidden; position:relative"><div class="heatmap-tree-container"></div></div></div>',markupSlots:{contentNode:function(){return this.domNode.firstChild;},stateNode:function(){return this.domNode.firstChild.firstChild;},stateSpaceNode:function(){return this.domNode.firstChild.firstChild.firstChild;},stateTextNode:function(){return this.domNode.firstChild.firstChild.lastChild;},textNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.childNodes[2];},scrollboxNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.lastChild.firstChild;}},initialized:false,dirty:false,showIndicators:false,showScrollbars:false,cachedUnits:[],init:function(E){this._super(E);this.observer=[];},register:function(E){this.observer.push(E);this.notifyAll();},notifyAll:function(){var F=false;if(this.childTree&&this.childTree.length>0){F=true;}if(F){mstrmojo.css.removeClass(this.contentNode,"disabled");}else{mstrmojo.css.addClass(this.contentNode,"disabled");}if(this.selectionStatus===D.NO){F=false;}for(var E in this.observer){this.observer[E].notify(F);}},buildRendering:function(){if(this.isRoot){this.cachedParent=this.parent;delete this.parent;}if(this._super){this._super();}},postBuildRendering:function(){var F=(new Date()).getTime();if(this.isRoot){this.scrollerConfig={bounces:false,showIndicators:this.showIndicators,showScrollbars:this.showScrollbars,useTranslate3d:true,vScroll:true,hScroll:false,offset:{y:{start:0,end:0},x:{start:0,end:0}},origin:{x:0,y:0},scrollEl:this.containerNode};}this.buildTree();this.applySelectionStatus();this._super();this.renderChildrenList();if(this.isRoot){this.parent=this.cachedParent;this.parent.containerNode.appendChild(this.domNode);}if(this.heightLimit>0){var E=this.heightLimit-this.contentNode.offsetHeight-2;if(E>=0){this.scrollboxNode.style.maxHeight=E+"px";}}this.viewNode=this.scrollboxNode;this.notifyAll();this.resized();this.updateScroller();var G=this;G._scroller.scrollTo(0,G.owner&&G.owner.dialogScrollerPosition||0);},applySelectionStatus:function(){this.selectionStatus=this.defaultSelectionStatus;this.setChildStatus(this.selectionStatus);this.updateSelection(false,true);var I=this.owner&&this.owner.entitiesWithStates&&this.owner.entitiesWithStates.selectionStatusModifiedEntities||[],E=I.length,F;for(F=0;F<E;F++){var H=I[F],G=H.treeItem;if(G&&H.isSelected!==undefined){G.selectionStatus=H.isSelected?D.YES:D.NO;G.setChildStatus(G.selectionStatus);G.updateSelection(false,true);}delete H.treeItem;}},touchTap:function(F){var G=mstrmojo.dom.findAncestorByAttr(F.target,"id",true,this.domNode);if(!G){this.clickHandler(F);return ;}var E=mstrmojo.all[G.value];if(E&&E.clickHandler){E.clickHandler(F);}},resized:function(E){var F=mstrmojo.dom.position;if(!this.viewRect){this.viewRect=F(this.scrollboxNode,true);}if(!(this.heightLimit>0)){return ;}if(!this._scroller.offset){return ;}E=E||this.containerNode.offsetHeight;if(E>this.scrollboxNode.clientHeight){this._scroller.offset.y.end=E-this.scrollboxNode.clientHeight;}else{this._scroller.offset.y.end=0;this._scroller.scrollTo(0,0,0);}},refresh:function(){if(this.needRefresh){this.containerNode.innerHTML="";this.postBuildRendering();this.resized();this.updateScroller();this.needRefresh=false;}},destroy:function(E){if(this.owner&&this._scroller&&this._scroller.origin){this.owner.dialogScrollerPosition=this._scroller.origin.y||0;}if(this._super){this._super(E);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidGridBase","mstrmojo.AndroidGrid");mstrmojo.AndroidXtabZone=mstrmojo.declare(mstrmojo.AndroidGrid,null,{scriptClass:"mstrmojo.AndroidXtabZone",markupString:'<div id="{@id}" class="mstrmojo-XtabZone" style="position:relative;{@cssText}"></div>',markupSlots:{gridContainerNode:function(){return this.domNode;}}});}());(function(){mstrmojo.XtabCP=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.XtabCP",base:null,lookupBase:null,colWidths:null,forceAutoRowHeight:false,startIndexInContainer:0,updatedRows:null,preServeUpdatedRows:true,init:function I(J){mstrmojo.hash.copy(J,this);},initContent:function D(L){this.startIndexInContainer=L||this.startIndexInContainer||0;var K=this.base.show,J=this.base.items;this.rc=K&&J?J.length:0;this.colWidths=K&&this.base.cws||[];this.isDownloading=false;this.isDownloaded=true;this.invalidData=false;},isDataAvailable:function B(K,J){return !this.invalidData;},download:function A(K,J){if(!this.isDownloaded&&!this.isDownloading&&this.dataSource){this.isDownloading=true;this.dataSource.download(0);}},invalid:function E(){this.invalidData=true;this.isDownloading=false;this.isDownloaded=false;this.preServeUpdatedRows=true;if(this.gridData){this.oldGridData=this.gridData;this.oldBase=this.base;this.updatedRows={};}},getRowHeight:function C(){return this.gridData.rh;},getNumAutoHeightRows:function(){return this.forceAutoRowHeight?this.rc:0;},getAvailableRowsCount:function H(){return this.rc;},getUpdatedRows:function G(){return this.updatedRows;},getRowCells:function(V){var N=this.base.items,W=N[V],O=W.items,Y=this.lookupBase,Q=this.interactiveCellsArray,X=this.gridData.css,b=null,a=false,h,P,S,M;if(this.oldGridData){h=this.oldGridData;P=this.oldBase;S=P&&P.items;M=S[V]&&S[V].items;}for(var R=0,Z=O&&O.length||0;R<Z;R++){var L=O[R];if(L){L.v=L.v||L.n;if(Y&&!L._e){var U=Y[L.tui];b=U&&U.es[L.idx];if(b){L.v=L.v||b.n;if(b.rv){L.rv=b.rv;}L._e=b;}}if(!L.css){L.css=X[L.cni].n;}if(!L._d&&M&&this.preServeUpdatedRows){var K=M[R];if(!K||(K.rs!==L.rs)){this.preServeUpdatedRows=false;this.updatedRows={};}else{if((K.v&&L.v!==K.v)){data={};if(L.v!==K.v){data.v=K.v;}if(L.css!==K.css){data.css=K.css;}L._d=data;this.updatedRows[this.startIndexInContainer+V]=true;}}}L._gd=this.gridData._bidx||0;if(L.at>0&&Q){if(L._ei===undefined||Q[L._ei]!==L){L._ei=Q.push(L)-1;}}if(this.axis){L.axis=this.axis;}var d=L.pi;if(d){if(d.ri!==undefined&&d.ci!==undefined){L._p=N[d.ri].items[d.ci];}else{var g=this.gridData.ghs,f=d.left,J=d.top;if(f){L._lp=g.rhs.items[f.ri].items[f.ci];}if(J){L._tp=g.chs.items[J.ri].items[J.ci];}}}}}return O;},getUnmergedCells:function F(O){var Q=[],R=this.base.items,L=this.gridData.css,P=R[O].items[0],K=P&&P.pi,J=K&&K.ri,N=K&&K.ci;while(K&&J>-1&&N>-1){P=P._p||R[J].items[N];var M={};mstrmojo.hash.copy(P,M);if(!M.css){M.css=L[M.cni].n;}M.rs=P.rs-O+J;Q.splice(0,0,M);K=P&&P.pi;J=K&&K.ri;N=K&&K.ci;}return Q;}});})();(function(){mstrmojo.XtabVACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabVACP",cps:[],initContent:function G(L){this.startIndexInContainer=L||0;this.rc=0;this.type=0;this.colWidths=[];for(var J=0;J<this.cps.length;++J){var K=this.cps[J];K.initContent(this.startIndexInContainer+this.rc);this.rc+=K.rc;this.type|=K.type;var I=K.colWidths;if(I&&(I.length>this.colWidths.length)){this.colWidths=I;}}},getNumAutoHeightRows:function(){return this.cps[0].getNumAutoHeightRows();},getRowHeight:function C(){return this.cps[0].getRowHeight();},getRowCells:function(I){var J=0,K=this.cps[J];while(I>=K.rc){I-=K.rc;K=this.cps[++J];}return K.getRowCells(I);},getUnmergedCells:function(I){var J=0,K=this.cps[J];while(I>=K.rc){I-=K.rc;K=this.cps[++J];}return K.getUnmergedCells(I);},isDataAvailable:function D(L,K){var J=this._getCPs(L,K);for(var I=0;I<J.length;++I){if(!J[I].isDataAvailable(L,K)){return false;}}return true;},getAvailableRowsCount:function F(){var K=0;for(var I=0;I<this.cps.length;++I){var J=this.cps[I];if(J.isDataAvailable()){K+=J.getAvailableRowsCount();}}return K;},_getCPs:function H(N,L){var J=0,M=this.cps[J],I=M&&M.startIndexInContainer,K=[];if(M){N-=I;L-=I;}while(M&&N>=M.rc){N-=M.rc;L-=M.rc;M=this.cps[++J];}while(M&&L>=M.rc){L-=M.rc;K.push(M);M=this.cps[++J];}if(M){K.push(M);}return K;},invalid:function E(){for(var I=0;I<this.cps.length;++I){var J=this.cps[I];J.invalid();}this.updatedRows={};},getUpdatedRows:function A(){var I={};for(var J=0;J<this.cps.length;++J){var K=this.cps[J];if(!K.preServeUpdatedRows){return{};}else{mstrmojo.hash.copy(K.getUpdatedRows(),I);}}this.updatedRows=I;return I;},download:function B(M,L){var K=this._getCPs(M,L);for(var I=0;I<K.length;++I){var J=K[I];J.download(M,L);}}});})();(function(){mstrmojo.XtabHACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabHACP",cps:[],initContent:function G(J){this.startIndexInContainer=J||0;this.type=0;this.colWidths=[];for(var I=0;I<this.cps.length;++I){this.cps[I].initContent(this.startIndexInContainer);this.type|=this.cps[I].type;var H=this.cps[I].colWidths;if(H){this.colWidths=this.colWidths.concat(H);}}this.rc=Math.max(this.cps[0].rc,this.cps[1].rc);},getNumAutoHeightRows:function(){return Math.max(this.cps[0].getNumAutoHeightRows(),this.cps[1].getNumAutoHeightRows());},getRowCells:function(I){var M=this.cps,J=[];for(var L=0,H=M.length;L<H;L++){if(M[L].getAvailableRowsCount()>0&&M[L].rc>I){var K=M[L].getRowCells(I);if(K){J=J.concat(K);}}}return J;},getRowHeight:function C(){return this.cps[0].getRowHeight();},getUnmergedCells:function(H){return this.cps[0].getUnmergedCells(H);},isDataAvailable:function D(I,H){return this.cps[1].isDataAvailable(I,H);},getAvailableRowsCount:function F(){return Math.max(this.cps[0].getAvailableRowsCount(),this.cps[1].getAvailableRowsCount());},invalid:function E(){var I,H,J;for(I=0,H=this.cps.length;I<H;++I){J=this.cps[I];J.invalid();}this.updatedRows={};},getUpdatedRows:function A(){var H={};for(var I=0;I<this.cps.length;++I){var J=this.cps[I];if(!J.preServeUpdatedRows){return{};}else{mstrmojo.hash.copy(J.getUpdatedRows(),H);}}this.updatedRows=H;return H;},download:function B(J,H){var I=this.cps[1];I.download(J,H);}});})();(function(){mstrmojo.XtabTitlesCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabTitlesCP",init:function E(G){this._super(G);},download:function A(H,G){},initContent:function D(N){this.startIndexInContainer=0;if(!this.cts){this.cts=mstrmojo.hash.clone(this.gridData.gts.col);}var H=this.gridData.gts,Y=(this.gridData.lhv!==0),J=H.row||[],G=H.col||[],P=H.show,M=H.rec,W=this.cts||[],V=J.length,O=W.length,R=this.gridData.css;this.base={items:[]};this.rc=P&&W.length||0;if(this.rc===0&&P){this.rc=V>0?1:0;}this.colWidths=P&&H.cws||[];if(!this.rc){return ;}var L={items:[]},I=1,Q,U;for(U=0;U<V;++U){J[U].axis=1;J[U].ui=U;L.items.push(J[U]);}if(O>0){W[0].axis=2;W[0].ui=0;G[0].axis=2;G[0].ui=0;I=W[0].rs||1;if(Y&&I>1){W[0].rs=1;Q=mstrmojo.hash.clone(W[0],{});Q.n="&nbsp;";W[0].cni=R.push({n:(R[W[0].cni].n||"")+" fsbp_1"})-1;}L.items.push(W[0]);}var K=this.base.items;K.push(L);for(U=1;U<O;++U){if(I>1){var S=I;while(S-->1){if(Y){var X=mstrmojo.hash.clone(Q,{});X.cni=R.push({n:(R[X.cni].n||"")+" fsbp_"+((S==1)?"3":"2")})-1;K.push({items:[X]});}else{K.push({items:[]});}}}W[U].axis=2;W[U].ui=U;G[U].axis=2;G[U].ui=U;I=W[U].rs||1;if(Y&&I>1){W[U].rs=1;Q=mstrmojo.hash.clone(W[U],{});Q.n="&nbsp;";W[U].cni=R.push({n:(R[W[U].cni].n||"")+" fsbp_1"})-1;}K.push({items:[W[U]]});}this.rc=K.length;if(M){this._removeExtraColumn(J,W);}},getAvailableRowsCount:function C(){return this.rc;},isDataAvailable:function B(H,G){return true;},_removeExtraColumn:function F(J,a){var Y=J&&J.length,O=a&&a.length,G=this.gridData.gts,R=G.row||[],M=G.col||[],H=R.length,W=M.length;if(!Y||!O){if(O===1){var b=a[O-1];if(b.otp==-1){if(W>0){M[W-1]._hid=true;}this.base.items=[];this.rc=0;}}return ;}var I=J[Y-1],S=this.rc,K=this.base.items;if(I){if(I.otp==-1){if(H>0){R[H-1]._hid=true;}K[0].items.splice(Y-1,1);}else{var P=S>1?S-1:0,Q=K[P],Z=Q.items.length;if(Z>0&&W>0){M[W-1]._hid=true;}var L=I.fix;if(L){for(var X=0;X<L;X++){Q.items[Z-1+X]=J[Y-L+X];}}else{Q.items[Z-1]=I;}for(var V=0,U=O-1;V<U;V++){a[V].cs=L?L:I.cs;}var N=L?L:1;K[0].items.splice(Y-N,N);}}return ;}});})();(function(){mstrmojo.XtabOnDemandCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabOnDemandCP",blockNum:0,listeners:null,initContent:function E(F){if(F!==undefined){this.startIndexInContainer=F;}this.isDownloaded=(this.base!==null);this.isDownloading=false;if(this.base){this._super(this.startIndexInContainer);this.notifyListeners();}},addCPListener:function D(F){if(!this.listeners){this.listeners=[];}this.listeners.push(F);},notifyListeners:function C(){var F,H=this.listeners,G=(H&&H.length)||0;for(F=0;F<G;F++){if(H[F]&&H[F].onDemandDataReady){H[F].onDemandDataReady(this);}}},getAvailableRowsCount:function B(){return this.isDownloaded?this.rc:0;},download:function(){if(!this.isDownloaded&&!this.isDownloading){this.isDownloading=true;this.dataSource.download(this.blockNum);}},invalid:function(){if(this._super){this._super();}this.isDownloaded=false;this.isDownloading=false;},isDataAvailable:function A(G,F){return this.isDownloaded;}});})();(function(){var f=1,k=2,x=4,a=8,o=1,p=2,H=3,h=4,w=5,Y=6,P=7,s=8,J=1,K=2,u=3,b=4,E=5,G={},B={},L=4,V=1,M={TITLE:"ig-title",GROUPING:"iggroup",BANDING:"igbanding",RIGHT_ALIGN:"rtAlign",LEFT_ALIGN:"leftAlign",TOTAL_ROW:"total"},X=mstrmojo.hash,Z=mstrmojo.array;function e(AD,AB){var AC=AD[0],z=AB.gts,AA=z.cws.length;return(AB.vp.gr==="1"&&(AA>1));}function q(AA,AF){var AD=function(AG,AH){if(AH&&AG&&AG.css&&AG.css.indexOf(AH)<0){AG.css+=" "+AH;}};var AC=AF.type,AB=AF.col,AE=(AB&&AB.cl)||0,z=(AC===k||AC===f);if(AC===k||AC===a){AD(AA,M.RIGHT_ALIGN);}else{if(AC===f||AC===x){AD(AA,M.LEFT_ALIGN);}}if(z){if(AB&&AB.tg&&AE>1){if(!AA._v){AA._v=AA.v;AA.v="<span class='toggleHeader'>"+AA.v+"</span>";}}AD(AA,M.TITLE);}Z.forEach(AF.extraCss,function(AG){AD(AA,AG);});}function A(z){return 0;}function t(AD){var AB,AC=AD.cg,z=AC&&AC.cgc,AA=1;for(AB=0;AB<z;AB++){if(AC&&AC[AB]&&!AC[AB].tg&&AC[AB].cl>AA){AA=AC[AB].cl;}}return AA;}function Q(AA,z){var AB=w;if(z===2){if(AA===0){AB=o;}else{if(AA===1){AB=h;}}}else{if(z>2){if(AA===0){AB=o;}else{if(AA===1){AB=p;}else{if(AA===z-1){AB=h;}else{if(AA<z-1&&AA>1){AB=H;}}}}}}return AB;}function O(z,AD,AB,AA){var AF=AA&&AA.cols&&AA.cols.cg,AC,AG=0,AE=0;if(AF){for(AC=0;AC<AD;AC++){if(z[AC]){AG+=z[AC].length;}}AG+=(AB+1);for(AC=0;AC<AF.cgc;AC++){AE+=AF[AC].cl;if(AE>=AG){return AC;}}}return -1;}function S(AG,AC,AA,z){var AF=[],AE,AB,AD,AH;for(AB=0,AD=AG.length;AB<AD;AB++){if(AG[AB].length===1){AE=AG[AB][0];AE.rowType=(AE.rowType!==s)?Q(AC,AA):s;AE.singleStack=(AA>1);AE=X.copy(AE);if(AE.ts===L){if(AA===1){AE.rowType=w;AE.colIdx=O(AG,AB,AC,z);}else{if(!AC){AE.colIdx=O(AG,AB,AC,z);}else{delete AE.ts;AE.v="";}}}else{if(AC){AE.v="";}}}else{AE=AG[AB][AC];if(!AE){AH=AG[AB].length;AE=X.copy(AG[AB][AH-1],{});AE.v="";if(AE.hasOwnProperty("ts")){delete AE.ts;}}else{if(AE.ts===L){AE.colIdx=O(AG,AB,AC,z);}}AE.rowType=(AE.rowType!==s)?Q(AC,AA):s;}AF.push(AE);}return AF;}function U(z){if(z===0){return 0;}var AA=this.sectionMap[z-1]||0;return Math.floor((z-AA)/this.stackLevels);}function D(AF){var AD,AE,AC=this.sectionInfo,z=AC.length,AB=this.srh,AA=this.lastSectionIndex;AE=AC[AA];if(AF>=AE.rs&&AF<(AE.rs+AB)){return AE;}if(AF<AE.rs){AD=AA-1;if(AD<=0){this.lastSectionIndex=0;return null;}do{AE=AC[AD];if(AF>AE.rs&&AF<=(AE.rs+AB)){this.lastSectionIndex=AD;return AE;}}while(AF<AE.rs&&--AD>0);this.lastSectionIndex=AD;return AE;}else{AD=AA+1;if(AD>=z){this.lastSectionIndex=z-1;return null;}do{AE=AC[AD];if(AF>AE.rs&&AF<=(AE.rs+AB)){this.lastSectionIndex=AD;return AE;}}while(AF>(AE.rs+AB)&&++AD<z);this.lastSectionIndex=AD-1;return null;}}function j(AH,AB,z,AG){var AF=AH[0],AD,AE=AH.length,AA=AF&&AF.rowType,AC={v:"",css:"empty-igcell",rowType:AA};if(z!==undefined&&AF&&(AA===o||AA===w||AA===Y)){AC={v:'<div><div class="IG-ActionArrow-IMG" style="height:'+AG+"px;top:-"+(0.5*G[AA])+'px;"></div></div>',css:"IG-ActionArrow",_ei:z};}for(AD=AE-1;AD>=AE-AB;AD--){AF=AH&&AH[AD];if(AF){AF.css+=" IG-lastdatacolumn";}}AH.push(AC);}function W(AT,AO,AB){var AK=AT.cols,AL=AK.cg,z=[{w:"0px"}];if(AK&&AO){var AU=AK.cws,AA=[],AS=AU.length,AW=0,AG=(parseInt(AT.ar,10)===1)?(AO/AS):-1,AJ,AC,AI=false,AD=0,AM=AO,AN=0,AR;for(AR=0;AR<AS;AR++){AC=AA[AR]=AU[AR];AJ=AC.w;if(AJ===""){AI=true;}else{if(AC.xc){AW+=parseInt(AJ);AM-=AW;AD++;}else{AN+=parseFloat(AJ,10);}}}if(AI||AN<100){AG=AM/(AS-AD);}for(AR=0;AR<AS;AR++){AC=AU[AR];if(AC.xc){continue;}else{if(AG===-1){AJ=parseInt(AC.w,10)*AM/100;if(!AJ&&AJ!==0){AJ=parseInt(AM/AL.cgc,10);}}else{AJ=(parseInt(AC.w,10)<0)?0:AG;}}AA[AR]={w:AJ+"px"};}if(AB){return AA;}var AH=[],AQ=0;for(AR=0;AR<AS;AR++){var AV=AL[AR],AF=AV.tg?AV.cl:1,AP=0;for(AP=0;AP<AF;AP++){var AE="0px";if(AP===AV.cc){AE=AA[AR].w;}AH[AQ+AP]={w:AE};}AQ+=AF;}return AH.concat(z);}else{if(AB){return null;}else{return cp.cws.concat(z);}}}function C(){delete this.lastStackCols;delete this.lastAttRow;delete this.lastMtxRow;}mstrmojo.InteractiveGridHACP=mstrmojo.declare(mstrmojo.XtabHACP,null,{scriptClass:"mstrmojo.InteractiveGridHACP",sectionMap:[],stackLevels:1,gridWidth:480,tdWidths:null,lastSectionIndex:0,adjustCPMaps:function R(){var AI=this.cps,AH=this.cps[0],AN=Math.max(AI[0].rc,AI[1].rc);if(AH.type!==f){var AS=this.gridData,AM=function(AV,AY){var AU=AV.base.items,AW=AV.lookupBase[0].es,AX=AU[AY].items[0],AT=AW&&AW[AX.idx];return(AT&&AT.n)||((AX.pi&&AW[AX.pi.ri||0])||"");},AQ,AP,z=1,AF,AA,AK,AC=0,AB=-1,AL,AR,AO=0,AJ=this.groupEnabled;for(AL=0,AQ=0,AR=AH.cps?AH.cps.length:1;AL<AR;AL++){var AE=AH.cps?AH.cps[AL]:AH,AG=AE.rc;AC=AB+1;AB=AC+AG-1;if(AE.isDataAvailable(AC,AB)){if(AE.lastRow){AO=AE.lastRow;AA=AE.lastSection;}else{AQ=AO||0;for(AP=0,z=this.sectionMap[AQ-1]||0;AP<AG;AP++){var AD=this.stackLevels;AK=AM(AE,AP);if(AJ&&AK!==AA){AA=AK;this.sectionInfo.push({sn:AK,rs:this.srh*z+this.stackedRh*Math.floor((AQ-z)/this.stackLevels)});this.sectionMap[AQ]=++z;AQ++;}while(AD){this.sectionMap[AQ]=z;AD--;AQ++;}}AO=AE.lastRow=AQ;AE.lastSection=AK;}}else{break;}}this.rc=(this.stackLevels>1?AN*this.stackLevels:AN)+(AJ?z:0);}},onDemandDataReady:function g(){this.adjustCPMaps();},initContent:function d(AI){var AH=this.cps,AT=this.gridData=AH[0].gridData||AH[0].cps[0].gridData,AP=AT.vp=this.gridVp=this.gridVp||AT.vp,AB=AP.daf&&AP.daf.split(":"),AJ=AP.cols,AK=AJ.cg,AQ=AJ.cws,AG=AH[A(AK)],AN=AT.gts.row,AA=AT.gts,AR=e(AH,AT),AF=AG.type!==f,AM,AO,AD,z,AL,AE,AS,AC=(typeof (mstrMobileApp)!=="undefined"&&mstrMobileApp.getDeviceDPI)?mstrMobileApp.getDeviceDPI():160;console.log("\ndpi: "+AC);if(AC===160){G={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};B={1:11,2:11,3:1,4:16,5:16};}else{if(AC===213){G={1:45,2:31,3:26,4:39,5:71,6:40,7:35,8:71};B={1:15,2:15,3:2,4:21,5:21};}else{if(AC===240){G={1:50,2:34,3:30,4:44,5:80,6:40,7:40,8:80};B={1:16,2:16,3:2,4:24,5:24};}else{if(AC===320){G={1:67,2:44,3:38,4:58,5:107,6:40,7:53,8:107};B={1:22,2:22,3:2,4:32,5:32};}else{G={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};B={1:11,2:11,3:1,4:16,5:16};}}}}if(AF){if(AP.dafIdx===undefined&&AB){for(AM=0;AM<AN.length;AM++){if(AN[AM].id===AB[0]&&AN[AM].fid===AB[1]){AP.dafIdx=AM;break;}}}}for(AM=0;AM<AK.cgc;AM++){if(AK[AM]&&AK[AM].tg){break;}}if(AM===AK.cgc){AT.gts.show=false;AT.ghs.chs.show=false;}this._super(AI);this.colWidths=W(AP,this.gridWidth);this.tdWidths=W(AP,this.gridWidth,true);if(AF){this.stackLevels=t(AJ);if(this.stackLevels>1){this.srh=G[P];this.rh=G[w];this.mrh=G[H];this.stackedRh=G[o]+(this.stackLevels-2)*G[p]+G[H];}else{this.srh=G[P];this.rh=this.stackedRh=this.mrh=G[w];}if(AR||this.stackLevels>1){this.sectionMap=[];this.sectionInfo=[];this.groupEnabled=AR;this.adjustCPMaps();z=this.cps[0].cps;if(z){AS=this;for(AM=0,AO=z.length;AM<AO;AM++){AE=z[AM];if(AE&&AE.addCPListener){AE.addCPListener(AS);}}}}}},getUnmergedCells:function(z){return ;},getResolvedGroupHeader:function(AB,AD){var AA=this.gridData,AC=AA.gts.row[AD].es,z=AA.ghs.rhs.items[AB].items[AD];if(z){if(!z.css){z.css=AA.css[z.cni].n+" iggroup";z.n=AC[z.idx].n;}}else{return{css:" iggroup",n:""};}return z;},getRowCells:function(AQ){var AL=this.cps,AE=[],Ae=this.gridData,Aa=Ae.vp,AO=Aa.cols.cg,AJ=AL[A(AO)],AN=this.groupEnabled,AA=Aa.bn==="1",Ab=[],AP=U.call(this,AQ),AF,AB,AR=1,AK,z,AH,AX,AW,AZ,Ad,AI;if(AN&&(this.sectionMap[AQ]!==this.sectionMap[AQ-1])){var AC=X.copy(AJ.getRowCells(AP)[0],{});AC.cs=this.colWidths.length;AC.rowType=P;q(AC,{col:null,type:AJ.type,extraCss:[M.GROUPING]});return[AC];}if(!AQ){C.call(this);}this.lastAttRow=this.lastAttRow||(AL[0].rc?AL[0].getRowCells(AP):[]);this.lastMtxRow=this.lastMtxRow||(AL[1].rc?AL[1].getRowCells(AP):[]);AH=this.lastAttRow;AZ=AH.length;if(AZ>0&&AH[0].stt){AK=true;for(AX=0;AX<AZ;AX++){Ad=AH[AX];if(Ad.stt===V){z=Ad;break;}}}if(!this.lastStackCols){Z.forEach([this.lastAttRow,this.lastMtxRow],function(Af){for(AX=0;AX<Af.length;AX++){if(Af[AX]._ei!==undefined){if(Aa.dafIdx>=0){AI=AJ.getRowCells(AP)[Aa.dafIdx];}AF=(Aa.dafIdx>=0)?(AI&&AI._ei):"";return false;}}},this);var AV=function(Af,Ag){if(Af&&(Ag.type===f||Ag.type===k)){if(AT.tg===false){Af.n=Af.v="";}Af.rowType=s;}q(Af,{col:AT,type:Ag.type,extraCss:[((Ag.type===a||Ag.type===x)&&AA&&(AP%2===1))?M.BANDING:null,AK?M.TOTAL_ROW:null]});if(Af){Af.cs=1;if(Af._ei===undefined&&Aa.dafIdx!==undefined){Af._ei=AF;}}};this.lastRowIndex=0;for(AW=0;AW<AO.cgc;AW++){var AT=AO[AW],AY=AT["mix"+AT.cc],AD=AY!==undefined,AG=AL[AD?1:0],AU,AS,AM,Ac={n:"",stt:V,css:"xtab-td"};arr=[];if(AT.tg){for(var AX=0;AX<AT.cl;AX++){arr=[];AM=AD?AT["mix"+AX]:AT.attForms[AX].idx;var AH=AD?this.lastMtxRow:this.lastAttRow;Ad=AH[AM];if(AK){if(!Ad){Ad=Ac;}else{if(Ad&&Ad.stt===V){Ad=X.copy(z,Ac);}else{Ad=X.copy(Ad,{});}}}else{Ad=X.copy(Ad,{});}AV(Ad,AG);arr.push(Ad);Ab.push(arr);}if(AW+1===AO.cgc){AR=AT.cl;}}else{for(AU=0,AZ=AT.cl;AU<AZ;AU++){if(AD){AS=AT["mix"+AU];if(AS!==undefined){Ad=this.lastMtxRow[AS];}}else{AS=AT.attForms[AU];if(AS){Ad=this.lastAttRow[AS.idx];}if(AK&&!Ad){Ad=Ac;}}AV(Ad,AG);arr.push(Ad);}Ab.push(arr);}}this.lastStackCols=Ab;}AE=S(this.lastStackCols,this.lastRowIndex++,this.stackLevels,Aa);if(this.lastRowIndex>=this.stackLevels){C.call(this);}return AE;},getRowHeight:function F(AA){var z=G[w];return G[AA]||z;},getPadding:function N(z){return B[z]||B[b];},isDataAvailable:function l(AA,z){if(!this.onDemandIF||!this.cps[1].cps){return true;}else{var AC=this.sectionMap.length,AB;if(!AC){return this.cps[1].isDataAvailable(AA,z);}if(z>AC){if(AA<AC){AB=U.call(this,AA);return this.cps[1].isDataAvailable(AB,AB+(z-AA));}else{return false;}}else{return this.cps[1].isDataAvailable(U.call(this,AA),U.call(this,z));}}},download:function I(AG,AD){var z=U.call(this,AG),AF=z+Math.ceil((AD-AG)/this.stackLevels),AE=this.cps[0],AA,AB,AC=!AE.cps?[AE]:this.cps[0]._getCPs(z,AF);for(AA=0;AA<AC.length;++AA){AB=AC[AA];AB.download(z,AF);}},getRowCellInfo:function(AC){var AB=D.call(this,AC+this.srh),z,AA=this.lastSectionIndex;if(AB){z=this.sectionInfo[AA-1];return{rowStart:AB.rs,isNextRowNewSection:true,sectionName:z&&z.sn};}else{return{isNextRowNewSection:false,sectionName:this.sectionInfo[AA].sn};}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList");mstrmojo.android.selectors.ListBox=mstrmojo.declare(mstrmojo.android.SimpleList,null,{scriptClass:"mstrmojo.android.selectors.ListBox",init:function B(C){this._super(C);mstrmojo.css.addWidgetCssClass(this,["selector-listbox"]);},postBuildRendering:function A(){var H=parseInt(this.height,10);if(H){var F=this.itemsContainerNode,C=F.offsetHeight;if(C<H){var E=this.items.length,G=Math.round(H/this.items.length)+"px",D=0;for(D=0;D<E;D++){F.childNodes[D].style.lineHeight=G;}}}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo.android._HasLingeringListSelections");var A=[],F=mstrmojo.dom,E=mstrmojo.string;mstrmojo.android.ui.FolderView=mstrmojo.declare(mstrmojo.android.SimpleList,[mstrmojo.android._HasLingeringListSelections],{scriptClass:"mstrmojo.android.ui.FolderView",allowTouchBubble:false,useSelectScroll:true,highlightOnSelect:true,hasEvenRows:true,listHooks:{select:function(I){I.style[F.CSS3_TRANSITION_DURATION]=0;},unselect:function(I){I.style[F.CSS3_TRANSITION_DURATION]="300ms";}},getItemMarkup:function(K){var M=K.desc,L=K.isc,J=((M)?1:0)+((L)?2:0);if(!A[J]){var I="<h3>{@n}</h3>";if(M){I+="<h4>{@desc}</h4>";}I+="<div><div><div></div></div></div>";A[J]=this._super(K).replace("{@en@n}",I);}return A[J];},getItemProps:function C(M,I){var L=this._super(M,I),N=M.desc||"",K=this.controller.isItemCached(M),J=!(K||this.controller.isItemAvail(M,true));L.addCls("ty"+(M.st||2048));if(L.n){L.n=E.htmlAngles(L.n);}if(N){L.desc=E.htmlAngles(N);L.addCls("desc");}if(K&&M.st!==2048){L.addCls("cached");}else{if(M.isc){L.addCls("isc");}}if(M.unread){L.addCls("new");}if(J){L.addCls("disabled");}return L;},canItemLinger:function H(I){return this.controller.canItemLinger(I);},buildRendering:function G(){var I=this._super();var J=document.createElement("div");J.className="clear-me";this.itemsContainerNode.appendChild(J);return I;},preselectionChange:function D(I){var J=I.added,L=I.removed;if(J){var K=this.items[J[0]];if(!this.controller.isItemAvail(K)){if(L&&L.length){this.select(L,true);}return false;}}return true;},touchSelectBegin:function B(K){var I=this.getItemIdxTouch(K);if(I>-1){var J=this.controller;if(!J.itemLongPressed||!J.itemLongPressed(this.items[I])){this._super(K);}else{return false;}}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo.css");var E=mstrmojo.css,B="glow",F=mstrmojo.dom,D=F.$TRANS_DURATION,A;function C(I){var H=I.style;H[D]=0;E.addClass(I,B);window.setTimeout(function(){H[D]="300ms";E.removeClass(I,B);},100);}mstrmojo.ui.MobileCheckList=mstrmojo.declare(mstrmojo.android.SimpleList,null,{scriptClass:"mstrmojo.ui.MobileCheckList",multiSelect:true,hasEvenRows:true,glow:true,allowTouchBubble:false,listHooks:{select:function(I,J,H){if(this.glow&&!this.skipEvent){C.call(this,I);}},unselect:function(I,J,H){if(this.glow&&this.multiSelect&&!this.skipEvent){C.call(this,I);}}},getItemMarkup:function(H){if(!A){A=this._super(H).replace("{@en@n}","<div><h3>{@en@n}</h3></div>");}return A;},init:function G(I){this._super(I);var H=["mobile-checklist"];if(this.multiSelect){H.push("multi");}mstrmojo.css.addWidgetCssClass(this,H);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Table","mstrmojo.SelectBox","mstrmojo._CanValidate","mstrmojo.MetricSelectorUtility");var D=mstrmojo.MetricSelectorUtility,K=mstrmojo.validation,G=mstrmojo.expr,E=mstrmojo.num,N=D.OP,F=[{n:mstrmojo.desc(2795,"Equals"),v:N._EQUALS},{n:mstrmojo.desc(2796,"Does not equals"),v:N._NOT_EQUALS},{n:mstrmojo.desc(521,"Greater than"),v:N._GREATER},{n:mstrmojo.desc(522,"Greater than or equal to"),v:N._GREATER_EQUAL},{n:mstrmojo.desc(523,"Less than"),v:N._LESS},{n:mstrmojo.desc(524,"Less than or equal to"),v:N._LESS_EQUAL},{n:mstrmojo.desc(519,"Between (enter value1;value2)"),v:N._BETWEEN},{n:mstrmojo.desc(614,"Not between (enter value1;value2)"),v:N._NOT_BETWEEN},{n:mstrmojo.desc(898,"In (enter value1;value2; ...;valueN)"),v:N._IN},{n:mstrmojo.desc(2394,"Not In (enter value1;value2; ...;valueN)"),v:N._NOT_IN},{n:mstrmojo.desc(2202,"Is null"),v:N._IS_NULL},{n:mstrmojo.desc(2203,"Is not null"),v:N._IS_NOT_NULL}],L=F.slice(0,10),J="padding:2px 2px 2px 2px",H=F.slice(10,12);var C=function(a,S,U,W,V){var X;if(V===2){return S;}var b=String(a).split(";"),Y=K.STATUSCODE.INVALID_VALIDATOR,R=K.STATUSCODE.VALID;if(W&&b&&b.length>1){S.code=Y;}else{for(X=0;X<b.length;X++){var Z=parseFloat(b[X],10);if(isNaN(Z)||(U&&((b[X].match(/^\d+(\.\d+)?%$/)===null&&b[X].match(/^\d+(\.\d+)?$/)==null)||Z<0||Z>100))||(!U&&b[X].match(/\d+$/)===null)){S.code=Y;}if(S.code!==R){break;}}}if(S.code!==R){S.msg=mstrmojo.desc(6103,"Please fix any invalid data");}return S;};var M=function(R){R=parseFloat(R);return isNaN(R)?"54px":((R*72/16)+"pt;");},Q=function(U){if(U.hasRendered){var S=U.domNode.style;S.font=U.font;S.width=M(S.fontSize);}else{var R=U.font.match(/[^\s]*?pt/)||[];U.cssText=U.cssText+" font:"+U.font+"; width:"+M(R[0]);}},I=function(R){if((R>=8&&R<=16)||(R>=23&&R<=25)){return false;}return true;};mstrmojo.MetricQualification=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.MetricQualification",cssClass:"qs",cssText:"width:100%",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},getClientHeight:function P(){return this.domNode.clientHeight+2;},rows:1,cols:4,layout:[{cells:[{cssText:"width:100%"},{cssText:"width:56px"},{cssText:"width:56px"},{cssText:"width:18px"}]}],init:function(R){if(this._super){this._super(R);}this._init();},_init:function(U){var S;switch(this.qua){case 0:this.low=(this.da&&this.da.low)||0;this.high=(this.da&&this.da.high)||0;break;case 1:case 2:this.low=1;this.high=(this.da&&this.da.cnt)||0;break;case 3:case 4:this.low=0;this.high=100;break;}if(U){this.cs=[];this.f=this.ft=null;}var W=D.getOpIdxByfunc(this.f,this.ft),V=I(this.dt)?N._GREATER_EQUAL:N._IS_NULL;this.set("opId",(W==-1)?V:W);var R=(this.cs&&this.cs.length>0)?E.toLocaleString(this.cs[0].v):"";if(this.opId===N._IN||this.opId===N._NOT_IN){for(S=1;S<this.cs.length;S++){R+=";"+E.toLocaleString(String(this.cs[S].v));}}else{this.set("cs2",(this.cs&&this.cs.length>1)?E.toLocaleString(this.cs[1].v):"");}this.set("cs1",R);this.vldTbL.validate();this.vldTbH.validate();this.changeQual=false;},updateData:function B(R,S){this.da=R;this.updateExpr(S);},updateExpr:function A(R){if(R){this.cs=R.cs;this.f=R.f;this.ft=R.ft;this.qua=R.qua;}this._init();},onquaChange:function O(R){this._init(true);this.func.items=(this.qua!==0)?L:I(this.parent.dt)?F:H;this.func.refresh();this.changeQual=true;this.onchange();},children:[{slot:"0,0",alias:"func",scriptClass:"mstrmojo.SelectBox",cssText:"width:100%",size:1,bindings:{sv:"this.parent.opId",font:"this.parent.font"},onfontChange:function(){if(this.hasRendered){this.domNode.style.font=this.font;}else{this.cssText="width:100%;font:"+this.font;}},onsvChange:function(){if(this.sv!==null&&this.sv!==undefined){this.set("selectedItem",{v:this.sv});}},postCreate:function(){if(mstrmojo.dom.isIE){this.itemDisplayField="n";this.showItemTooltip=true;}this.items=(this.parent.qua!==0)?L:I(this.parent.dt)?F:H;},onchange:function(){var S=this.parent,U=this.selectedItem;if(U&&U.v!==null&&U.v!==undefined){var R=D.getIncludeByOp(U.v);S.include=R;if(S.parent&&R!==S.parent.include){S.changeInclude=true;}else{S.changeInclude=false;}S.set("opId",U.v);}if(mstrApp.isMobile&&(U.v===N._IS_NULL||U.v===N._IS_NOT_NULL)){if(S.onchange){S.onchange();}}}},{slot:"0,1",alias:"vldTbL",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:G.DTP.VARCHAR,constraints:{trigger:K.TRIGGER.ALL,validator:function(R){var S={id:this.id,code:K.STATUSCODE.VALID,msg:""},U=this.parent;C(R,S,(U.qua===3||U.qua===4),(U.opId!==8&&U.opId!==9),(U.numFmts&&U.numFmts.cat));return S;}},bindings:{visible:"this.parent.opId!=10&&this.parent.opId!=11",value:"this.parent.cs1",font:"this.parent.font"},onfontChange:function(){Q(this);},onValid:function(){var S=this.parent,R=this.domNode;S.set("cs1",this.value);if(R&&R.value.length>6){R.title=R.value;}else{if(R){R.title="";}}},onvisibleChange:function(){if(!this.visible){this.parent.set("cs1","");}},onkeyup:function(S){var R=S.hWin,W=S.e||R.event,V=this.parent,U=S.src.domNode;if(W.keyCode===13&&V.apply&&V.apply.enabled){V.apply.onclick();}}},{slot:"0,2",alias:"vldTbH",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:G.DTP.VARCHAR,constraints:{trigger:K.TRIGGER.ALL,validator:function(R){var S={id:this.id,code:K.STATUSCODE.VALID,msg:""},U=this.parent;C(R,S,(U.qua===3||U.qua===4),(U.opId!==8&&U.opId!==9),(U.numFmts&&U.numFmts.cat));return S;}},bindings:{visible:"this.parent.opId ==7 ||this.parent.opId ==6",value:"this.parent.cs2",font:"this.parent.font"},onfontChange:function(){Q(this);},onValid:function(){this.parent.set("cs2",this.value);var R=this.domNode;if(R&&R.value.length>6){R.title=R.value;}else{if(R){R.title="";}}},onvisibleChange:function(){if(!this.visible){this.parent.set("cs2","");}},onkeyup:function(S){var R=S.hWin,V=S.e||R.event,U=this.parent;if(V.keyCode===13&&U.apply&&U.apply.enabled){U.apply.onclick();}}},{slot:"0,3",alias:"apply",title:mstrmojo.desc(2164,"Apply"),scriptClass:"mstrmojo.Button",cssClass:"icn apply",bindings:{enabled:"(!this.parent.vldTbL.visible ||!this.parent.vldTbL.validationStatus.code)&& (!this.parent.vldTbH.visible||!this.parent.vldTbH.validationStatus.code)"},onclick:function(){var U=this.parent,X=(U.qua===D.Q._PT||U.qua===D.Q._PB),R;U.cs=[];var V=function(Y){return Y+((X&&!String(Y).match(/^\d+%$/))?"%":"");};var S=function(Y,Z){return((Y===2||Y===3)&&Z===0)?14:5;};if(U.opId===N._IN||U.opId===N._NOT_IN){var W=String(U.cs1).split(";");for(R=0;R<W.length;R++){if(!mstrmojo.string.isEmpty(W[R])){U.cs.push({dtp:5,v:V(W[R])});}}}else{if(U.vldTbL.visible){U.cs.push({dtp:S((U.numFmts&&U.numFmts.cat),U.qua),v:V(U.cs1)});}if(U.vldTbH.visible){U.cs.push({dtp:S((U.numFmts&&U.numFmts.cat),U.qua),v:V(U.cs2)});}}if(U.onchange){U.onchange();}if(U.makeSelection){U.makeSelection();}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._SupportsEllipsisText","mstrmojo.android.ui.Label","mstrmojo.android.ui.Menu","mstrmojo.css");var I=mstrmojo.css,B="oversize",E="multiline",K=[B,E];mstrmojo.android.ui.TitleLabel=mstrmojo.declare(mstrmojo.Container,[mstrmojo._SupportsEllipsisText],{scriptClass:"mstrmojo.android.ui.TitleLabel",markupString:'<div id="{@id}" class="mstrmojo-AndroidTitleLabel {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},children:[{scriptClass:"mstrmojo.android.ui.Label",alias:"lbl",touchTap:function(){mstrApp.closeAllDialogs();var P=this.parent,O=P.list,M=O.items,N=M&&M.length;if(!O.visible&&N){if(P._isDropDown&&N===2){O.singleSelect((!O.selectedIndex)?1:0);}else{O.set("visible",true);if(mstrMobileApp&&mstrMobileApp.genMapPreview){mstrMobileApp.genMapPreview();}}}}},{scriptClass:"mstrmojo.android.ui.Menu",alias:"list",selectionPolicy:"reselect",visible:false,setMaxWidth:true}],addChildren:function L(O,M,N){this._super(O,M,N);this.list.attachEventListener("selectionChange",this.id,function(P){var Q=P.added,S=this.list;S.set("visible",false);if(mstrMobileApp&&mstrMobileApp.showMapView){mstrMobileApp.showMapView(0);}if(!Q){return ;}var R=S.items[Q[0]];if(R.isTitle){return ;}if(this._isDropDown){this.setText(R.n);}this.raiseEvent({name:"listSelectionMade",item:R});});},onRender:function J(){var M=this._testLbl=this.lbl.domNode.cloneNode(false),N=this.domNode;mstrmojo.css.addClass(M,"test");M.removeAttribute("onclick");M.removeAttribute("id");N.insertBefore(M,N.lastChild);},unrender:function H(M){delete this.testLbl;this._super(M);},setText:function D(M){this.checkTextFit(M);},checkTextFit:function A(R){var M=this.lbl,U=M.domNode,P=this._testLbl,Q=this._compOffset;R=(R===undefined)?M.text:R;if(Q===undefined){var N=I.getComputedStyle(U);Q=parseInt(N.paddingLeft,10)+parseInt(N.paddingRight,10);this._compOffset=Q;}P.style.width=(U.parentNode.offsetWidth-Q)+"px";P.innerHTML=R;var O=U.offsetHeight,S=(P.offsetHeight>O);I.toggleClass(U,K,S);M.set("text",R);if(S){if(!this.ellipsize("ttl",U,true)){I.addClass(P,B);P.innerHTML=U.innerHTML;if(P.offsetHeight===O){I.removeClass(U,E);}I.removeClass(P,K);}}},setListItems:function G(M,P){var Q=(M&&M.length),N=(P!==undefined),O=this.list;I.toggleClass(this.domNode,"has-items",Q);this._isDropDown=!!N;if(Q){if(!N){M=[{n:mstrmojo.desc(9850,"RECENTLY OPENED"),isTitle:true}].concat(M);}else{this.setText(M[P].n);}}O.set("items",M);if(N){O.singleSelect(P,true);}},clearListItems:function C(){var N=this.list,M={items:[].concat(N.items),idx:N.selectedIndex};mstrmojo.css.removeClass(this.domNode,"has-items");N.set("items",[]);return(M.idx>-1)?M:null;},reset:function F(){this.list.set("visible",false);this.checkTextFit();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.android.ui._CanBeFullScreen","mstrmojo.array","mstrmojo.css","mstrmojo.android.ui.ActionToolbarButtons","mstrmojo.android.ui.Menu","mstrmojo.android.EnumMenuOptions","mstrmojo._TouchGestures");var N=mstrmojo.array,U=mstrmojo.css,M=1,F=2,E=mstrmojo.android.EnumMenuOptions,K=E.SHARE,J=E.ANNOTATION;function R(){return mstrApp.isActionBarNative();}function S(W){if(!this.active){return ;}var X=W.added,a=W.src,Y=X&&a.items[X[0]],Z=this.menu;if(!Y){return ;}if(Y.isMenu){if(mstrMobileApp&&mstrMobileApp.genMapPreview){mstrMobileApp.genMapPreview();}Z.set("visible",!Z.visible);}else{if(Y.grp!==K&&Y.grp!==J){mstrApp.closeAllDialogs();}if(a===Z){Z.set("visible",false);if(mstrMobileApp&&mstrMobileApp.showMapView){mstrMobileApp.showMapView(0);}}mstrmojo.all[this._actController].handleMenuItem(Y.grp,Y.act);}}function G(){var Y=[],X=this.icons,W=this.groups,Z=this.actions;N.forEach(this.labels,function(b,a){Y.push({cls:"ic"+X[a],grp:parseInt(W[a],10),act:parseInt(Z[a],10),n:b});});return Y;}function Q(f){var b=[],e=this.icons,W=this.groups,X=this.actions,a=this.labels;N.forEach(this.types,function(h,g){if(h===F){b.push({cls:"ic"+e[g],act:parseInt(X[g],10),grp:parseInt(W[g],10),idx:g,n:a[g]});if(b.length===f){return false;}}});var Y;for(Y=b.length-1;Y>=0;Y--){var Z=b[Y],d=Z.idx;delete Z.idx;this.types.splice(d,1);this.groups.splice(d,1);this.labels.splice(d,1);this.actions.splice(d,1);this.checked.splice(d,1);this.icons.splice(d,1);}return b;}var A=mstrmojo.android.ui.ActionToolbar=mstrmojo.declare(mstrmojo.Box,[mstrmojo.android.ui._CanBeFullScreen],{scriptClass:"mstrmojo.android.ui.ActionToolbar",active:true,init:function P(W){this._super(W);U.addWidgetCssClass(this,"mstrmojo-ActionToolbar");},children:[{scriptClass:"mstrmojo.android.ui.ActionToolbarButtons",alias:"buttons"},{scriptClass:"mstrmojo.android.ui.Menu",alias:"menu",visible:false}],addChildren:function L(Y,W,X){this._super(Y,W,X);N.forEach(this.children,function(Z){Z.attachEventListener("selectionChange",this.id,S);},this);},setActions:function B(Z,W){var Y;var X=W.getBtnCount(W.minBtnCount,W.maxBtnCount);if(X){Y=Q.call(W,X);}if(W.size()){if(R()){mstrMobileApp.setSysMenu(Z,W.groups,W.labels,W.actions,W.checked,W.icons);}else{Y.push({cls:"menu",isMenu:true,n:"Menu"});this.menu.set("items",G.call(W));}}this.buttons.set("items",Y);this._actController=Z;this.raiseEvent("renderComplete");this.resetFullScreen();},onactiveChange:function I(){U.toggleClass(this.domNode,"inactive",!this.active);},reset:function V(){this.menu.set("visible",false);},onEnterFullScreen:function D(){this.reset();},propogateMenuVisibleChange:function C(W){mstrmojo.touchManager.raiseEvent({name:"actionBarMenuStateChange",value:W});}});function O(Z,X,W,b,a,Y){this.types.push(Z);this.groups.push(String(X));this.labels.push(String(W));this.actions.push(String(b));this.checked.push(String(!!a));this.icons.push(Y||-1);}A.newToolbarConfig=function H(){var X={addMenuItem:function Z(e,d,h,g,f){O.call(this,M,e,d,h,g,f);this.mnuCount++;},addToolbarBtn:function b(e,d,h,g,f){O.call(this,F,e,d,h,g,f);this.btnCount++;},getBtnCount:function Y(g,e){var f=this.btnCount;if(this.mnuCount){f++;}var d=Math.min(f,e);if(d<g){return 0;}if(d===e){if(!R()&&(this.mnuCount||(f>d))){d--;}}return d;},clear:function W(){this.btnCount=0;this.mnuCount=0;this.maxBtnCount=5;this.minBtnCount=1;this.types=[];this.groups=[];this.labels=[];this.actions=[];this.checked=[];this.icons=[];},size:function a(){return this.labels.length;}};X.clear();return X;};}());(function(){mstrmojo.requiresCls("mstrmojo.ListBoxBase","mstrmojo._HasScrollbox");mstrmojo.ListBox=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._HasScrollbox],{scriptClass:"mstrmojo.ListBox",renderAllItems:false,renderPause:10,numPagesRendered:0,pageStatus:null,_rc:null,_totalPages:null,_rh:null,_rhMin:8,_rowsPerPage:null,_defaultRowsPerPage:100,_minRowsPerPage:100,_pageHeight:null,buildRendering:function K(){if(this.renderAllItems===true){this._super();return true;}this._initPageSettings();var L=this.items;this.items=this._rc?this.items.slice(0,Math.min(this._rowsPerPage,this._rc)):[];this._super();this.items=L;this.postRenderPage(0,true);if(this._rc>this._rowsPerPage){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]=(this._rh*this._rc)+"px";if(!this.connectedScrollbox){this.connectScrollbox(this);this.connectedScrollbox=true;}}else{this.postRenderingCleanup();}},_initPageSettings:function E(){var L=this.items;this._rc=(L&&L.length)||0;var N=this.itemRenderer;this._rh=(N&&N.rowHeight)||this._rhMin||3;var M=this._defaultRowsPerPage;if(!isNaN(this.scrollboxHeight)){M=Math.ceil(this.scrollboxHeight/this._rh);M=Math.max(M,this._minRowsPerPage);}this._rowsPerPage=M;this._totalPages=Math.ceil(this._rc/this._rowsPerPage);this._pageHeight=this._rh*this._rowsPerPage;this._pageStatus=new Array(this._totalPages);this._numPagesRendered=0;},onscroll:function J(){if(!this._renderingRows){this._startPageRenderThread();}},_startPageRenderThread:function F(){this.renderingRows=true;var M=this,L=this._renderTimer=self.setInterval(function(){if(!M){self.clearInterval(L);return ;}var N=M.getPagesToRender();if(N.length>0){M.renderPages(N);}else{M.renderingRows=false;self.clearInterval(M._renderTimer);delete M._renderTimer;if(M.isRenderingComplete()){M.postRenderingCleanup();}M=null;}},this.renderPause);},getPagesToRender:function I(){var P=[],a=this._pageHeight,d=null,X=this._pageStatus,Z=this;function R(e){var f=X[e];if(f&&f.filled){if(!f.height){if(!d){d=Z.itemsNode.tBodies;}f.height=d[e].offsetHeight;}return f.height;}else{return a;}}var b=0,S=null,O=null,M=this.scrollboxTop;for(var W=0,Y=this._totalPages;W<Y;W++){b+=R(W);if(b>=M){S=W;break;}}if(S==null){S=O=Y-1;}else{var L=this.scrollboxBottom;for(var U=S+1;U<Y;U++){if(b>=L){O=U-1;break;}b+=R(U);}}if(O==null){O=Y-1;}for(var N=this._numPagesRendered;N<S;++N){P.push({idx:N,fill:false});}for(var Q=S;Q<=O;++Q){var V=X[Q];if(!V||!V.filled){P.push({idx:Q,fill:true});}}return P;},renderPages:function D(M){for(var N=0,L=M.length;N<L;++N){this.renderPage(M[N].idx,M[N].fill);}},renderPage:function B(R,M){var W=this._pageStatus,P=(this._numPagesRendered>=R+1);if(P){if(!M||(W[R]&&W[R].filled)){return ;}}var V=this._rowsPerPage,L=R*V,N=Math.min(L+V,this._rc)-1;var U=this.tempTableCont;if(!U){U=this.tempTableCont=this.domNode.ownerDocument.createElement("div");}var Q=M?this._buildItemsMarkup(L,N,'<table><tbody idx="'+R+'">',"</tbody></table>",this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join(""):'<table><tbody idx="'+R+'"><tr><td style="height:'+this._pageHeight+'px">&nbsp;</td></tr></tbody></table>';U.innerHTML=Q;var O=U.firstChild.tBodies[0],S=this.itemsNode;if(!P){S.appendChild(O);}else{S.replaceChild(O,S.tBodies[R]);}this.postRenderPage(R,M);},postRenderPage:function G(M,O){if(M+1>this._numPagesRendered){this._numPagesRendered=M+1;}var L=this._pageStatus,N=L[M];if(!N){N=L[M]={};}if(O){N.filled=true;}if(M>0&&M==this._totalPages-1){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]="";}},isRenderingComplete:function C(){if(this._numPagesRendered==this._totalPages){for(var L=this._pageStatus,M=this._totalPages-1;M>-1;M--){if(!L[M]||!L[M].filled){return false;}}return true;}return false;},postRenderingCleanup:function A(){if(this.connectedScrollbox){this.disconnectScrollbox(this);this.connectedScrollbox=false;}},unrender:function(L){this.postRenderingCleanup();this._super(L);},refresh:function H(){if(!this.hasRendered){return ;}var N=this.domNode,L=N&&N.parentNode;if(!this.parent&&L){var M=N.ownerDocument.createElement("span");L.insertBefore(M,N);}this.unrender();if(!this.parent&&L){this.domNode=M;}this.render();if(this.defn&&this.defn.set){this.defn.set("readyState",mstrmojo.EnumReadystate.IDLE);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._ListSelections");mstrmojo.ListBoxHoriz=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBoxHoriz",cssClass:"mstrmojo-ListBoxHoriz",tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"",cellCssText:"",cellSpacing:0,cellPadding:0,_markupPrefix:function(){var A=this.itemRenderer;return(A&&A.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="'+this.cellSpacing+'" cellpadding="'+this.cellPadding+'"><tbody><tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'">');},_markupSuffix:function(){var A=this.itemRenderer;return(A&&A.markupSuffix)||"</tr></tbody></table>";},_itemPrefix:function(){var A=this.itemRenderer;return(A&&A.itemPrefix)||('<td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var A=this.itemRenderer;return(A&&A.itemSuffix)||"</td>";},_getItemNode:function(A){if(A<0){return null;}var B=this.itemsNode,C=B&&B.rows[0];return C&&C.cells[A].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.ScrollableTabs","mstrmojo.css","mstrmojo.dom","mstrmojo.hash");var A=mstrmojo.css,D=mstrmojo.dom,F=mstrmojo.hash;mstrmojo.android.ui.LayoutSelector=mstrmojo.declare(mstrmojo.android.ui.ScrollableTabs,null,{scriptClass:"mstrmojo.android.ui.LayoutSelector",init:function E(H){this._super(H);var G=this.markupMethods=F.copy(this.markupMethods);G.onvisibleChange=function(){var L=this._hFade;if(L){window.clearTimeout(L);delete this._hFade;}var J=this.items;if(!J||J.length<=1){return ;}var I=!!this.visible,K=this.domNode;if(I){K.style.marginTop=0;}A.toggleClass(K,"open",I);};},initiateFade:function C(G){var H=this.id;this._hFade=window.setTimeout(function(){var I=mstrmojo.all[H];if(I){I.set("visible",false);}},G||2000);},postBuildRendering:function B(){var G=this.id;D.attachEvent(this.domNode,"webkitTransitionEnd",function(){var H=mstrmojo.all[G];if(!H.visible){H.domNode.style.marginTop="-10000px";}});return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.css");var G=mstrmojo.css;var D;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function J(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function M(){G.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function K(){G.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function I(){G.toggleClass(this.domNode,"disabled",!this.enabled);},onhideCheckMarkChange:function B(){G.toggleClass(this.domNode,"hideCheckMark",this.hideCheckMark);}},multiSelect:true,hideCheckMark:false,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,getItemMarkup:function L(N){if(!D){D=this._super(N).replace(">{@en@n}<",'title="{@tt}"><span class="text">{@en@n}</span><');}return D;},getItemProps:function H(Q,O){var P=this._super(Q,O),N={"\r\n":" ","\n":" ","\r":" "};var R=Q.css;if(R){P.addCls(R);}P.tt=Q.tt||"";Q.n=mstrmojo.string.multiReplace(Q.n,N);P.n=Q.n||"";return P;},setupScrollNodes:function E(){this.scrollNode=this.scrollboxNode;},preselectionChange:function C(O){var P=this.minimumSelectCnt,N=this.getSelectedItems().length,Q=O.removed;if(Q&&P){if(N<P){this.select(Q,true);return false;}}G.toggleClass(this.itemsContainerNode,"disableSelected",N<=P);return true;},buildRendering:function F(){this._super();G.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function E(){return this.domNode.firstChild;}},postBuildRendering:function B(){if(this.renderOnScroll){if(!this.onScrollEnd){var G=this.id;this.onScrollEnd=function F(){var H=mstrmojo.all[G];H.doScroll();H.updateScrollbars();};}}if(this._super){this._super();}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,doScroll:function A(){if(this.renderOnScroll){var G,H=this.scrollNode,F=(this.renderIndex+1)*this.renderBlockSize;if(F>=this.items.length){return ;}if(mstrmojo.dom.position(H).h===H.scrollHeight){G=this.domNode;}else{G=H;}if((mstrmojo.dom.position(G).h+G.scrollTop)>=G.scrollHeight){this.renderIndex++;var I=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");G.innerHTML+=I;this.itemsContainerNode.innerHTML+=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,V,U){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=V[S.itemField];var P=mstrmojo.string.escape4HTMLText,W="";if(Q){var M=V.anc&&V.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){W+=M[L].n+" > ";}W+=P(M[O-1].n);}else{if(V.path){W+=P(V.path);}}}if(!U){W+=(W.length===0?"":" > ")+P(I);}if(J){var N=V[S.itemDescField],K=120;if(N){W+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return W;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.GridBase","mstrmojo.Grid","mstrmojo.mstr.EnumDSSXMLObjectTypes");mstrmojo.XtabZone=mstrmojo.declare(mstrmojo.Grid,null,{scriptClass:"mstrmojo.XtabZone",markupString:'<div id="{@id}" class="mstrmojo-XtabZone" style="position:relative;{@cssText}"></div>',markupSlots:{gridContainerNode:function(){return this.domNode;}}});}());(function(){var G=1,B=2;mstrmojo.XtabCP=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.XtabCP",base:null,lookupBase:null,colWidths:null,forceAutoRowHeight:false,startIndexInContainer:0,updatedRows:null,preServeUpdatedRows:true,init:function M(N){mstrmojo.hash.copy(N,this);},initContent:function E(Q){this.startIndexInContainer=Q||this.startIndexInContainer||0;var P=this.base||[],O=P.show,N=P.items;this.rc=O&&N?N.length:0;this.colWidths=(O&&P.cws)||[];this.isDownloading=false;this.isDownloaded=true;this.invalidData=false;},isDataAvailable:function C(O,N){return !this.invalidData;},download:function A(P,O,N){if(!this.isDownloaded&&!this.isDownloading&&this.dataSource){this.isDownloading=true;this.dataSource.download(0,N);}},invalid:function F(){this.invalidData=true;this.isDownloading=false;this.isDownloaded=false;this.preServeUpdatedRows=true;if(this.gridData){this.oldGridData=this.gridData;this.oldBase=this.base;this.updatedRows={};}},getRowHeight:function D(){return this.gridData.rh;},getNumAutoHeightRows:function(){return this.forceAutoRowHeight?this.rc:0;},getAvailableRowsCount:function L(){return this.rc;},getUpdatedRows:function J(){return this.updatedRows;},getRowCells:function(l,O){var a=this.base||[],W=a.items||[],o=W[l]||[],Y=o.items,q=this.lookupBase,f=this.interactiveCellsArray,p=this.gridData.css,w=this.gridData.gsi,g=w&&w.prop&&w.prop.cols&&w.prop.cols.mg,t=null,Z,j,V,s,z,U,k,S,X,R,h="-1";if(this.oldGridData){Z=this.oldBase;j=Z&&Z.items;V=j[l]&&j[l].items;}for(z=0,s=(Y&&Y.length)||0;z<s;z++){U=Y[z];if(U){U.v=U.v||U.n;if(q&&!U._e){k=q[U.tui];S=U.fi;X=(k&&k.fs)||[];R=X[S]||X[0];U.ts=U.ts||R&&R.bftp;t=k&&k.es[U.idx];if(t){U.v=U.v||t.n;if(t.rv){U.rv=t.rv;}U._e=t;}}if(!U.css){var AC=U.cni;if(AC!==undefined){U.css=p[AC].n;}else{U.css="";}}if(!U._d&&V&&this.preServeUpdatedRows){var Q=V[z];if(!Q||(Q.rs!==U.rs)){this.preServeUpdatedRows=false;this.updatedRows={};}else{if((Q.v&&U.v!==Q.v)){var AB={};if(U.v!==Q.v){AB.v=Q.v;}if(U.css!==Q.css){AB.css=Q.css;}U._d=AB;this.updatedRows[this.startIndexInContainer+l]=true;}}}U._gd=this.gridData._bidx||0;if(f){if(!O&&(U._ei===undefined||f[U._ei]!==U)){U._ei=f.push(U)-1;}}if(this.axis){U.axis=this.axis;}var u=U.pi,d=function d(AF,AD,e){var AE=AF&&AF[AD];return AE&&AE.es[e];},b=function b(AG,AE,AH,AD,AF){var e=AG.items[AE].items[AH];if(e){e.axis=e.axis||AD;if(e._e===undefined){e._e=d(AG.show?q:AF,e.tui,e.idx);}}return e;};if(u){if(u.ri!==undefined&&u.ci!==undefined){if(U.axis===2&&g!==h){U._p=W[u.ri].items[z];}else{U._p=W[u.ri].items[u.ci];}}else{var AA=this.gridData.ghs,N=this.gridData.gts,x=u.left,P=u.top;if(x){U._lp=b(AA.rhs,x.ri,x.ci,G,N.row);}if(P){U._tp=b(AA.chs,P.ri,P.ci,B,N.col);}}}}}return Y;},getUnmergedCells:function H(S){var V=[],W=(this.base&&this.base.items)||[];if(S>W.length-1||S<0){return V;}var P=this.gridData.css,U=W[S].items[0],O=U&&U.pi,N=O&&O.ri,R=O&&O.ci;while(O&&N>-1&&R>-1){U=U._p||W[N].items[R];var Q={};mstrmojo.hash.copy(U,Q);if(!Q.css){Q.css=P[Q.cni].n;}Q.rs=U.rs-S+N;V.splice(0,0,Q);O=U&&U.pi;N=O&&O.ri;R=O&&O.ci;}return V;},getIndentPadding:function K(N){return N*14;},getCell:function I(N,O){var P=this.base.items;return P[N].items[O];}});}());(function(){mstrmojo.XtabVACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabVACP",cps:[],initContent:function G(L){this.startIndexInContainer=L||0;this.rc=0;this.type=0;this.colWidths=[];var J;for(J=0;J<this.cps.length;++J){var K=this.cps[J];K.initContent(this.startIndexInContainer+this.rc);this.rc+=K.rc;this.type|=K.type;var I=K.colWidths;if(I&&(I.length>this.colWidths.length)){this.colWidths=I;}}},getNumAutoHeightRows:function(){return this.cps[0].getNumAutoHeightRows();},getRowHeight:function C(){return this.cps[0].getRowHeight();},getRowCells:function(J,I){var K=0,L=this.cps[K],M;while(J>=L.rc){J-=L.rc;L=this.cps[++K];}if(this.renderingNewPage){L.updateCounter=0;this.renderingNewPage=false;}M=L.getRowCells(J,I);this.updateCounter=L.updateCounter;return M;},getUnmergedCells:function(I){var J=0,K=this.cps[J];while(I>=K.rc){I-=K.rc;K=this.cps[++J];}return K.getUnmergedCells(I);},getCell:function(I,K){var J=0,L=this.cps[J];while(I>=L.rc){I-=L.rc;L=this.cps[++J];}return L.getCell(I,K);},isDataAvailable:function D(L,K){var J=this._getCPs(L,K),I;for(I=0;I<J.length;++I){if(!J[I].isDataAvailable(L,K)){return false;}}return true;},getAvailableRowsCount:function F(){var K=0,I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];if(J.isDataAvailable()){K+=J.getAvailableRowsCount();}}return K;},_getCPs:function H(N,L){var J=0,M=this.cps[J],I=M&&M.startIndexInContainer,K=[];if(M){N-=I;L-=I;}while(M&&N>=M.rc){N-=M.rc;L-=M.rc;M=this.cps[++J];}while(M&&L>=M.rc){L-=M.rc;K.push(M);M=this.cps[++J];}if(M){K.push(M);}return K;},invalid:function E(){var I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];J.invalid();}this.updatedRows={};},getUpdatedRows:function A(){var I={},J;for(J=0;J<this.cps.length;++J){var K=this.cps[J];if(!K.preServeUpdatedRows){return{};}mstrmojo.hash.copy(K.getUpdatedRows(),I);}this.updatedRows=I;return I;},download:function B(N,M,I){var L=this._getCPs(N,M),J;for(J=0;J<L.length;++J){var K=L[J];K.download(N,M,I);}}});}());(function(){mstrmojo.XtabHACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabHACP",cps:[],initContent:function G(J){this.startIndexInContainer=J||0;this.type=0;this.colWidths=[];var I;for(I=0;I<this.cps.length;++I){this.cps[I].initContent(this.startIndexInContainer);this.type|=this.cps[I].type;var H=this.cps[I].colWidths;if(H){this.colWidths=this.colWidths.concat(H);}}this.rc=Math.max(this.cps[0].rc,this.cps[1].rc);},getNumAutoHeightRows:function(){return Math.max(this.cps[0].getNumAutoHeightRows(),this.cps[1].getNumAutoHeightRows());},getRowHeight:function C(){return this.cps[0].getRowHeight();},getRowCells:function(J,I){var N=this.cps,K=[],H=N.length,M;for(M=0;M<H;M++){if(N[M].getAvailableRowsCount()>0&&N[M].rc>J){var L=N[M].getRowCells(J,I);if(L){K=K.concat(L);}}}return K;},getUnmergedCells:function(H){return this.cps[0].getUnmergedCells(H);},isDataAvailable:function D(I,H){return this.cps[1].isDataAvailable(I,H);},getAvailableRowsCount:function F(){return Math.max(this.cps[0].getAvailableRowsCount(),this.cps[1].getAvailableRowsCount());},invalid:function E(){var I,H,J;for(I=0,H=this.cps.length;I<H;++I){J=this.cps[I];J.invalid();}this.updatedRows={};},getUpdatedRows:function A(){var H={},I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];if(!J.preServeUpdatedRows){return{};}mstrmojo.hash.copy(J.getUpdatedRows(),H);}this.updatedRows=H;return H;},download:function B(K,I,H){var J=this.cps[1];J.download(K,I,H);}});}());(function(){var C=4;mstrmojo.XtabLevelHACP=mstrmojo.declare(mstrmojo.XtabHACP,null,{scriptClass:"mstrmojo.XtabLevelHACP",allCells:[],updateCounter:0,pageNum:0,getEmptyCell:function B(D,E,G){var F={css:D.css.replace(" hl",""),v:"",fillerCell:true};if(E){F.cs=this.headerCells[G].cs||1;}return F;},getCellDepth:function A(D){var E=D.dpt||1;if(!D.dpt){D=D._p;while(D){if(D.dpt){E+=D.dpt;break;}E++;D=D._p;}}return E;},getUnmergedCells:function(D){return ;},getRowCells:function(S){var N=this.cps,I=[],b=N.length,K=false,e=this.gridData,O=(e&&e.lvlepd)||-1,Q=this.outlineState,H=this.allCells,a,Z,Y,F,E,f,X=0,J=-10;f=this.updateCounter;S-=f;if(H.length>0){return H.splice(0,1)[0];}var V=function(o){var l=o.gridData||(o.cps[0]&&o.cps[0].gridData),p=(l&&l.gts.row),h=(p&&p.length)||0,g,j,k;this.headerCells=g=mstrmojo.hash.clone(p);for(k=0;k<g.length;k++){if(g[k].cs>1&&g[k].otp===mstrmojo.mstr.EnumDSSXMLObjectTypes.Filter){for(Z=1;Z<g[k].cs;Z++){j=this.getEmptyCell(g[k],false);g.splice(k+1,0,j);}g[k].cs=1;}}for(k=h-1;k>0;k--){if(g[k].id===g[k-1].id){g.splice(k,1);}}h=g.length;this.maxLevel=l.maxLevel=h;this.gridData=l;for(k=0;k<h;k++){if(g[k].cs>1){return true;}}return false;};var G=function(l){var g,k,h,j;for(j=l.length-1;j>0;j--){k=l[j-1];g=l[j];if(g.dpt&&g.dpt===k.dpt){if(g.v&&g.v!==""){if(g.ts===C){if(g.v.indexOf("#srcstart")===0){h=g.v;}else{h="#srcstart"+g.v+"#srcend";}if(k.ts!==C){h=k.v+" "+h;}else{h="#srcstart"+k.v+"#srcend "+h;}k.v=h;}else{if(k.ts===C){k.v="#srcstart"+k.v+"#srcend "+g.v;}else{k.v+=" "+g.v;}}g.v="";}l.splice(j,1);}}return l;};var d=function(j){var h=this.headerCells,l=h.length,g=h[j].cs?(h[j].cs-1):0;var k=0;for(k=j+1;k<h.length;k++){g+=h[k].cs?(h[k].cs-1):0;}return g;};var D=function(k){var j=k.gridData||(k.cps[0]&&k.cps[0].gridData),g=j.gts,h=false;if(g.col.length===0){h=true;}else{h=g.rec;}return h?0:1;};for(a=0;a<b;a++){if(N[a].getAvailableRowsCount()>0&&N[a].rc>S){var L=mstrmojo.hash.clone(N[a].getRowCells(S).slice(0));if(N[a].type===4){if(S===0){this.hasMultiFormAttributes=V.call(this,N[a]);this.metricAdjuster=D(N[a]);if(O===-1){O=this.gridData&&this.gridData.lvlepd;}}if(this.hasMultiFormAttributes){L=G(L);}var P=L.length;for(Y=P-1;Y>=0;Y--){F=L[Y];var W=this.getCellDepth(F);if(Y===0){for(Z=1;Z<W;Z++){L.splice(Z-1,0,this.getEmptyCell(F,this.hasMultiFormAttributes,Z-1));}}else{if(F.stt&&F.idx<0){L.splice(Y,1);}else{if(F.stt===1&&(!F._e||F._e.n)){L.splice(Y,1);E=L[Y-1];if(F._e&&F.hst&&F.hst!==J&&E&&E.v===E._e.n){E.v+=" ("+F._e.n+")";}continue;}else{var R=[];L.splice(Y,1);for(Z=1;Z<W;Z++){R.push(this.getEmptyCell(F,this.hasMultiFormAttributes,Z-1));}R.push(F);H.splice(0,0,R);K=true;f++;this.rc++;}}}F.rs=1;F.outLvl=W;if(Q&&Q.collapseToLevel){if(W<=Q.collapseToLevel){if(W<Q.collapseToLevel||!Q.isExpanding){delete Q.collapseToLevel;H.forEach(function(g){g.forEach(function(h){if(!h.fillerCell&&h._ei){delete Q[h._ei];h.epd=false;h.hidden=false;}});});}else{if(Q.isExpanding){Q.hasTBodyElementsToExpand=true;}Q[F._ei]={expanded:false,hidden:true};}}else{Q[F._ei]={expanded:false,hidden:true};}}if(Q&&Q[F._ei]!==undefined){F.epd=!(Q[F._ei].expanded);F.hidden=Q[F._ei].hidden;}else{F.epd=O>0&&O<=W;F.hidden=false;}if(this.hasMultiFormAttributes){X=d.call(this,W-1);}if((X||this.metricAdjuster)&&W===this.maxLevel){F.isLeaf=true;}F.cs=P>1?(P-Y+X+this.metricAdjuster):(P+X+this.metricAdjuster);}this.updateCounter=f;}else{if(K){var U=H.length-1,M=H[U];H[U]=M.concat(L);for(Z=0;Z<U;Z++){M=H[Z];for(Y=0;Y<L.length;Y++){M.push(this.getEmptyCell(L[Y]));}}for(Y=0;Y<L.length;Y++){I.push(this.getEmptyCell(L[Y]));}continue;}}if(L){I=I.concat(L);}}}return I;}});}());(function(){function F(N){var M=0;for(M=0;M<N.length;M++){if(N[M].otp===-1){return true;}}return false;}function G(M){var N=[],Q,P,O;for(O=M.length-1;O>0;O--){Q=M[O];P=M[O-1];if(Q.id===P.id){M.splice(O,1);if(P.v===P.n){P.v+=" | "+Q.v;P.cs=(P.cs||1)+(Q.cs||1);}}}return M;}function C(M){return M.gts.col.length>0&&M.gts.rec===false;}mstrmojo.XtabTitlesCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabTitlesCP",init:function L(M){this._super(M);},download:function A(O,N,M){},shouldClonedLastTitleCell:function K(){return(this.gridData.lhv!==0);},initContent:function H(V){this.startIndexInContainer=0;if(!this.cts){this.cts=mstrmojo.hash.clone(this.gridData.gts.col);}var N=this.gridData.gts,P=N.row||[],M=N.col||[],X=N.show,U=N.rec,e=this.cts||[],d=P.length,W=e.length,a=this.gridData.css;this.base={items:[]};this.rc=(X&&e.length)||0;if(this.rc===0&&X){this.rc=d>0?1:0;}this.colWidths=(X&&N.cws)||[];if(!this.rc){this.nRowSpan=this.nColSpan=0;return ;}var R={items:[]},Y=0,O=1,Z,b,g=this,Q=g.base.items,f=function(h,j){if(g.shouldClonedLastTitleCell()&&j>1){h.rs=1;Z=mstrmojo.hash.clone(h,{});Z.n="&nbsp;";h.cni=a.push({n:(a[h.cni].n||"")+" fsbp_1"})-1;}},S=function(k){var h=k;while(h-->1){if(g.shouldClonedLastTitleCell()){var j=mstrmojo.hash.clone(Z,{});j.cni=a.push({n:(a[j.cni].n||"")+" fsbp_"+((h==1)?"3":"2")})-1;Q.push({items:[j]});}else{Q.push({items:[]});}}};for(b=0;b<d;++b){P[b].axis=1;P[b].ui=b;Y+=P[b].cs||1;R.items.push(P[b]);}if(W>0){e[0].axis=2;e[0].ui=0;M[0].axis=2;M[0].ui=0;O=e[0].rs||1;f(e[0],O);Y+=e[0].cs||1;R.items.push(e[0]);}Q.push(R);for(b=1;b<W;++b){if(O>1){S(O);}e[b].axis=2;e[b].ui=b;M[b].axis=2;M[b].ui=b;O=e[b].rs||1;f(e[b],O);Q.push({items:[e[b]]});}this.rc=Q.length;this.nRowSpan=this.rc+O-1;this.nColSpan=Y;if(U){this._removeExtraColumn(P,e);}},getAvailableRowsCount:function I(){return this.rc;},getSpanDimension:function J(){return{nRow:this.nRowSpan||0,nCol:this.nColSpan||0};},isDataAvailable:function B(N,M){return true;},getRowCells:function E(N){var Q=this._super(N),U=this.gridData;if(U.olm&&!(U.rw&&U.rw.row.bc>0)&&!(this.dataSource&&this.dataSource.defn.txi)){Q=G(Q);var S=0,P=0,O;Q=mstrmojo.hash.clone(Q);for(S=0;S<Q.length;S++){if(Q[S].cs>1&&Q[S].otp===mstrmojo.mstr.EnumDSSXMLObjectTypes.Filter){for(P=1;P<Q[S].cs;P++){O={};O.css=Q[S].css.replace(" hl","");O.v="&nbsp;";Q.splice(S+1,0,O);}Q[S].cs=1;}}var R=C(U),M=R?Q.length-1:Q.length,S;for(S=0;S<M-1;S++){Q[S].expandLevel=S+1;}}return Q;},_removeExtraColumn:function D(P,h){var f=P&&P.length,V=h&&h.length,M=this.gridData.gts,Y=M.row||[],S=M.col||[],N=Y.length,d=S.length;if(!f||!V){if(V===1){var k=h[V-1];if(k.otp==-1){if(d>0){S[d-1]._hid=true;}this.base.items=[];this.nRowSpan=this.nColSpan=this.rc=0;}}return ;}var O=P[f-1],Z=this.rc,Q=this.base.items;if(O){if(O.otp==-1){if(N>0){Y[N-1]._hid=true;}if(this.nColSpan){this.nColSpan-=O.cs||1;}Q[0].items.splice(f-1,1);}else{var W=Z>1?Z-1:0,X=Q[W],g=X.items.length;if(g>0&&d>0){S[d-1]._hid=true;}var R=O.fix;if(R){var e;for(e=0;e<R;e++){X.items[g-1+e]=P[f-R+e];}}else{X.items[g-1]=O;}for(var b=0,a=V-1;b<a;b++){h[b].cs=R?R:O.cs;}var U=R?R:1;Q[0].items.splice(f-U,U);if(this.nColSpan){this.nColSpan-=1;}}}return ;}});})();(function(){mstrmojo.XtabOnDemandCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabOnDemandCP",blockNum:0,listeners:null,initContent:function E(F){if(F!==undefined){this.startIndexInContainer=F;}this.isDownloaded=(this.base!==null);this.isDownloading=false;if(this.base){this._super(this.startIndexInContainer);this.notifyListeners();}},addCPListener:function D(F){if(!this.listeners){this.listeners=[];}this.listeners.push(F);},notifyListeners:function C(){var F,H=this.listeners,G=(H&&H.length)||0;for(F=0;F<G;F++){if(H[F]&&H[F].onDemandDataReady){H[F].onDemandDataReady(this);}}},getAvailableRowsCount:function B(){return this.isDownloaded?this.rc:0;},download:function(F){if(!this.isDownloaded&&!this.isDownloading){this.isDownloading=true;this.dataSource.download(this.blockNum,F);}},invalid:function(){if(this._super){this._super();}this.isDownloaded=false;this.isDownloading=false;},isDataAvailable:function A(G,F){return this.isDownloaded;}});})();(function(){var b=1,g=2,s=4,X=8,j=1,k=2,G=3,e=4,q=5,V=6,M=7,o=8,Y=4,F={},B={},I=4,R=1,J={TITLE:"ig-title",GROUPING:"iggroup",BANDING:"igbanding",RIGHT_ALIGN:"rtAlign",LEFT_ALIGN:"leftAlign",TOTAL_ROW:"total"},U=mstrmojo.hash,W=mstrmojo.array;function a(z,w){var x=z[0],t=w.gts,u=t.cws.length;return(w.vp.gr==="1"&&(u>1));}function l(u,AB){var z=function(AC,AD){if(AD&&AC&&AC.css&&AC.css.indexOf(AD)<0){AC.css+=" "+AD;}};var x=AB.type,w=AB.col,AA=(w&&w.cl)||0,t=(x===g||x===b);if(x===g||x===X){z(u,J.RIGHT_ALIGN);}else{if(x===b||x===s){z(u,J.LEFT_ALIGN);}}if(t){if(w&&w.tg&&AA>1){if(!u._v){u._v=u.v;u.v="<span class='toggleHeader'>"+u.v+"</span>";}}z(u,J.TITLE);}W.forEach(AB.extraCss,function(AC){z(u,AC);});}function A(t){return 0;}function p(z){var w,x=z.cg,t=x&&x.cgc,u=1;for(w=0;w<t;w++){if(x&&x[w]&&!x[w].tg&&x[w].cl>u){u=x[w].cl;}}return u;}function N(u,t){var w=q;if(t===2){if(u===0){w=j;}else{if(u===1){w=e;}}}else{if(t>2){if(u===0){w=j;}else{if(u===1){w=k;}else{if(u===t-1){w=e;}else{if(u<t-1&&u>1){w=G;}}}}}}return w;}function L(t,z,w,u){var AB=u&&u.cols&&u.cols.cg,x,AC=0,AA=0;if(AB){for(x=0;x<z;x++){if(t[x]){AC+=t[x].length;}}AC+=(w+1);for(x=0;x<AB.cgc;x++){AA+=AB[x].cl;if(AA>=AC){return x;}}}return -1;}function P(AC,x,u,t){var AB=[],AA,w,z,AD;for(w=0,z=AC.length;w<z;w++){if(AC[w].length===1){AA=AC[w][0];AA.rowType=(AA.rowType!==o)?N(x,u):o;AA.singleStack=(u>1);AA=U.copy(AA);if(AA.ts===I){if(u===1){AA.rowType=q;AA.colIdx=L(AC,w,x,t);}else{if(!x){AA.colIdx=L(AC,w,x,t);}else{delete AA.ts;AA.v="";}}}else{if(x){AA.v="";}}}else{AA=AC[w][x];if(!AA){AD=AC[w].length;AA=U.copy(AC[w][AD-1],{});AA.v="";if(AA.hasOwnProperty("ts")){delete AA.ts;}}else{if(AA.ts===I){AA.colIdx=L(AC,w,x,t);}}AA.rowType=(AA.rowType!==o)?N(x,u):o;}AB.push(AA);}return AB;}function Q(t){if(t===0){return 0;}var u=this.sectionMap[t-1]||0;return Math.floor((t-u)/this.stackLevels);}function D(AB){var z,AA,x=this.sectionInfo,t=x.length,w=this.srh,u=this.lastSectionIndex;AA=x[u];if(AB>=AA.rs&&AB<(AA.rs+w)){return AA;}if(AB<AA.rs){z=u-1;if(z<=0){this.lastSectionIndex=0;return null;}do{AA=x[z];if(AB>AA.rs&&AB<=(AA.rs+w)){this.lastSectionIndex=z;return AA;}}while(AB<AA.rs&&--z>0);this.lastSectionIndex=z;return AA;}else{z=u+1;if(z>=t){this.lastSectionIndex=t-1;return null;}do{AA=x[z];if(AB>AA.rs&&AB<=(AA.rs+w)){this.lastSectionIndex=z;return AA;}}while(AB>(AA.rs+w)&&++z<t);this.lastSectionIndex=z-1;return null;}}function f(AD,w,t,AC){var AB=AD[0],z,AA=AD.length,u=AB&&AB.rowType,x={v:"",css:"empty-igcell",rowType:u};if(t!==undefined&&AB&&(u===j||u===q||u===V)){x={v:'<div><div class="IG-ActionArrow-IMG" style="height:'+AC+"px;top:-"+(0.5*F[u])+'px;"></div></div>',css:"IG-ActionArrow",_ei:t};}for(z=AA-1;z>=AA-w;z--){AB=AD&&AD[z];if(AB){AB.css+=" IG-lastdatacolumn";}}AD.push(x);}function S(AQ,AL,x){var AH=AQ.cols,AI=AH.cg,t=[{w:"0px"}];if(AH&&AL){var AR=AH.cws,u=[],AP=AR.length,AT=0,AD=(parseInt(AQ.ar,10)===1)?(AL/AP):-1,AG,z,AF=false,AA=0,AJ=AL,AK=0,AO;for(AO=0;AO<AP;AO++){z=u[AO]=AR[AO];AG=z.w;if(AG===""){AF=true;}else{if(z.xc){AT+=parseInt(AG);AJ-=AT;AA++;}else{AK+=parseFloat(AG,10);}}}if(AF||AK<100){AD=AJ/(AP-AA);}for(AO=0;AO<AP;AO++){z=AR[AO];if(z.xc){continue;}else{if(AD===-1){AG=parseInt(z.w,10)*AJ/100;if(!AG&&AG!==0){AG=parseInt(AJ/AI.cgc,10);}}else{AG=(parseInt(z.w,10)<0)?0:AD;}}u[AO]={w:AG+"px"};}if(x){return u;}var AE=[],AN=0;for(AO=0;AO<AP;AO++){var AS=AI[AO],AC=AS.tg?AS.cl:1,AM=0;for(AM=0;AM<AC;AM++){var AB="0px";if(AM===AS.cc){AB=u[AO].w;}AE[AN+AM]={w:AB};}AN+=AC;}return AE.concat(t);}else{if(x){return null;}else{return cp.cws.concat(t);}}}function C(){delete this.lastStackCols;delete this.lastAttRow;delete this.lastMtxRow;}mstrmojo.InteractiveGridHACP=mstrmojo.declare(mstrmojo.XtabHACP,null,{scriptClass:"mstrmojo.InteractiveGridHACP",sectionMap:[],stackLevels:1,gridWidth:480,tdWidths:null,lastSectionIndex:0,adjustCPMaps:function O(){var AE=this.cps,AD=this.cps[0],AJ=Math.max(AE[0].rc,AE[1].rc);if(AD.type!==b){var AO=this.gridData,AI=function(AR,AU){var AQ=AR.base.items,AS=AR.lookupBase[0].es,AT=AQ[AU].items[0],AP=AS&&AS[AT.idx];return(AP&&AP.n)||((AT.pi&&AS[AT.pi.ri||0])||"");},AM,AL,t=1,AB,u,AG,x=0,w=-1,AH,AN,AK=0,AF=this.groupEnabled;for(AH=0,AM=0,AN=AD.cps?AD.cps.length:1;AH<AN;AH++){var AA=AD.cps?AD.cps[AH]:AD,AC=AA.rc;x=w+1;w=x+AC-1;if(AA.isDataAvailable(x,w)){if(AA.lastRow){AK=AA.lastRow;u=AA.lastSection;}else{AM=AK||0;for(AL=0,t=this.sectionMap[AM-1]||0;AL<AC;AL++){var z=this.stackLevels;AG=AI(AA,AL);if(AF&&AG!==u){u=AG;this.sectionInfo.push({sn:AG,rs:this.srh*t+this.stackedRh*Math.floor((AM-t)/this.stackLevels)});this.sectionMap[AM]=++t;AM++;}while(z){this.sectionMap[AM]=t;z--;AM++;}}AK=AA.lastRow=AM;AA.lastSection=AG;}}else{break;}}this.rc=(this.stackLevels>1?AJ*this.stackLevels:AJ)+(AF?t:0);}},onDemandDataReady:function d(){this.adjustCPMaps();},initContent:function Z(AE){var AD=this.cps,AP=this.gridData=AD[0].gridData||AD[0].cps[0].gridData,AL=AP.vp=this.gridVp=this.gridVp||AP.vp,w=AL.daf&&AL.daf.split(":"),AF=AL.cols,AG=AF.cg,AM=AF.cws,AC=AD[A(AG)],AJ=AP.gts.row,u=AP.gts,AN=a(AD,AP),AB=AC.type!==b,AI,AK,z,t,AH,AA,AO,x=(typeof (mstrMobileApp)!=="undefined"&&mstrMobileApp.getDeviceDPI)?mstrMobileApp.getDeviceDPI():160;if(x===160){F={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};B={1:11,2:11,3:1,4:16,5:16};}else{if(x===213){F={1:45,2:31,3:26,4:39,5:71,6:40,7:35,8:71};B={1:15,2:15,3:2,4:21,5:21};}else{if(x===240){F={1:50,2:34,3:30,4:44,5:80,6:40,7:40,8:80};B={1:16,2:16,3:2,4:24,5:24};}else{if(x===320){F={1:67,2:44,3:38,4:58,5:107,6:40,7:53,8:107};B={1:22,2:22,3:2,4:32,5:32};}else{F={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};B={1:11,2:11,3:1,4:16,5:16};}}}}if(AB){if(AL.dafIdx===undefined&&w){for(AI=0;AI<AJ.length;AI++){if(AJ[AI].id===w[0]&&AJ[AI].fid===w[1]){AL.dafIdx=AI;break;}}}}for(AI=0;AI<AG.cgc;AI++){if(AG[AI]&&AG[AI].tg){break;}}if(AI===AG.cgc){AP.gts.show=false;AP.ghs.chs.show=false;}this._super(AE);this.colWidths=S(AL,this.gridWidth);this.tdWidths=S(AL,this.gridWidth,true);if(AB){this.stackLevels=p(AF);if(this.stackLevels>1){this.srh=F[M];this.rh=F[q];this.mrh=F[G];this.stackedRh=F[j]+(this.stackLevels-2)*F[k]+F[G];}else{this.srh=F[M];this.rh=this.stackedRh=this.mrh=F[q];}if(AN||this.stackLevels>1){this.sectionMap=[];this.sectionInfo=[];this.groupEnabled=AN;this.adjustCPMaps();t=this.cps[0].cps;if(t){AO=this;for(AI=0,AK=t.length;AI<AK;AI++){AA=t[AI];if(AA&&AA.addCPListener){AA.addCPListener(AO);}}}}}},getUnmergedCells:function(t){return ;},getResolvedGroupHeader:function(w,z){var u=this.gridData,x=u.gts.row[z].es,t=u.ghs.rhs.items[w].items[z];if(t){if(!t.css){t.css=u.css[t.cni].n+" iggroup";t.n=x[t.idx].n;}}else{return{css:" iggroup",n:""};}return t;},getRowCells:function(AM){var AH=this.cps,AA=[],Aa=this.gridData,AW=Aa.vp,AK=AW.cols.cg,AF=AH[A(AK)],AJ=this.groupEnabled,u=AW.bn==="1",AX=[],AL=Q.call(this,AM),AB,w,AN=1,AG,t,AD,AT,AS,AV,AZ,AE;if(AJ&&(this.sectionMap[AM]!==this.sectionMap[AM-1])){var x=U.copy(AF.getRowCells(AL)[0],{});x.cs=this.colWidths.length;x.rowType=M;l(x,{col:null,type:AF.type,extraCss:[J.GROUPING]});return[x];}if(!AM){C.call(this);}this.lastAttRow=this.lastAttRow||(AH[0].rc?AH[0].getRowCells(AL):[]);this.lastMtxRow=this.lastMtxRow||(AH[1].rc?AH[1].getRowCells(AL):[]);AD=this.lastAttRow;AV=AD.length;if(AV>0&&AD[0].stt){AG=true;for(AT=0;AT<AV;AT++){AZ=AD[AT];if(AZ.stt===R){t=AZ;break;}}}if(!this.lastStackCols){W.forEach([this.lastAttRow,this.lastMtxRow],function(Ab){for(AT=0;AT<Ab.length;AT++){if(Ab[AT]._ei!==undefined){if(AW.dafIdx>=0){AE=AF.getRowCells(AL)[AW.dafIdx];}AB=(AW.dafIdx>=0)?(AE&&AE._ei):"";return false;}}},this);var AR=function(Ab,Ac){if(Ab&&(Ac.type===b||Ac.type===g)){if(AP.tg===false){Ab.n=Ab.v="";}Ab.rowType=o;}l(Ab,{col:AP,type:Ac.type,extraCss:[((Ac.type===X||Ac.type===s)&&u&&(AL%2===1))?J.BANDING:null,AG?J.TOTAL_ROW:null]});if(Ab){Ab.cs=1;if(Ab._ei===undefined&&AW.dafIdx!==undefined){Ab._ei=AB;}}};this.lastRowIndex=0;for(AS=0;AS<AK.cgc;AS++){var AP=AK[AS],AU=AP["mix"+AP.cc],z=AU!==undefined,AC=AH[z?1:0],AQ,AO,AI,AY={n:"",stt:R,css:"xtab-td"};arr=[];if(AP.tg){for(var AT=0;AT<AP.cl;AT++){arr=[];AI=z?AP["mix"+AT]:AP.attForms[AT].idx;var AD=z?this.lastMtxRow:this.lastAttRow;AZ=AD[AI];if(AG){if(!AZ){AZ=AY;}else{if(AZ&&AZ.stt===R){AZ=U.copy(t,AY);}else{AZ=U.copy(AZ,{});}}}else{AZ=U.copy(AZ,{});}AR(AZ,AC);arr.push(AZ);AX.push(arr);}if(AS+1===AK.cgc){AN=AP.cl;}}else{for(AQ=0,AV=AP.cl;AQ<AV;AQ++){if(z){AO=AP["mix"+AQ];if(AO!==undefined){AZ=this.lastMtxRow[AO];}}else{AO=AP.attForms[AQ];if(AO){AZ=this.lastAttRow[AO.idx];}if(AG&&!AZ){AZ=AY;}}AR(AZ,AC);arr.push(AZ);}AX.push(arr);}}this.lastStackCols=AX;}AA=P(this.lastStackCols,this.lastRowIndex++,this.stackLevels,AW);if(this.lastRowIndex>=this.stackLevels){C.call(this);}return AA;},getRowHeight:function E(u){var t=F[q];return F[u]||t;},getPadding:function K(t){return B[t]||B[Y];},isDataAvailable:function h(u,t){if(!this.onDemandIF||!this.cps[1].cps){return true;}else{var x=this.sectionMap.length,w;if(!x){return this.cps[1].isDataAvailable(u,t);}if(t>x){if(u<x){w=Q.call(this,u);return this.cps[1].isDataAvailable(w,w+(t-u));}else{return false;}}else{return this.cps[1].isDataAvailable(Q.call(this,u),Q.call(this,t));}}},download:function H(AB,x,AC){var w=Q.call(this,AB),t=w+Math.ceil((x-AB)/this.stackLevels),z=this.cps[0],u,AD,AA=!z.cps?[z]:this.cps[0]._getCPs(w,t);for(u=0;u<AA.length;++u){AD=AA[u];AD.download(w,t,AC);}},getRowCellInfo:function(x){var w=D.call(this,x+this.srh),t,u=this.lastSectionIndex;if(w){t=this.sectionInfo[u-1];return{rowStart:w.rs,isNextRowNewSection:true,sectionName:t&&t.sn};}else{return{isNextRowNewSection:false,sectionName:this.sectionInfo[u].sn};}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.Button");var B=mstrmojo.android.ui.Button.newButton;mstrmojo._CanMakeServerProxyRequests=mstrmojo.provide("mstrmojo._CanMakeServerProxyRequests",{_mixinName:"mstrmojo._CanMakeServerProxyRequests",cancelRequests:function A(){return this.serverProxy.cancelRequests();},serverRequest:function C(J,K,E){var I=this;try{K=K||{};E=E||{};E.projectId=E.projectId||this._currentProjId;E.mobileConfig=this.getConfiguration();var F=E.src||(arguments.callee&&arguments.callee.caller.name);var D=function(L){if(E[L+"Wait"]){I.hideMessage();}if(E[L+"Progress"]){mstrMobileApp.hideProgress();}};if(!E.silent){K=mstrmojo.func.wrapMethods(K,{submission:function(L,M){if(!M){if(E.showWait){I.showMessage();}if(E.showProgress){mstrMobileApp.showProgress(E.progressStateText,!!E.useRefreshProgress);}}},failure:function(L){D("show");if(L&&L.requireDeviceCertificate){var M=function(){try{mstrApp.rootController.spawn(mstrApp.controllerFactory.newController("Settings",{}),{viewFn:"getCertificateAuthenticationFieldsView"});}catch(N){L.method=F;mstrApp.handleError(N,I);}};mstrmojo.confirm("Missing/invalid/expired device certificate detected. Would you like to get a new one?",{confirmBtn:{fn:M}});return ;}if(!(E.noErrorMessage||L.noErrorMessage)){L.method=F;mstrApp.handleError(L,I);}},complete:function(){D("hide");},canceled:function(){D("show");}});}try{I.serverProxy.request(K,J,!!E.override,E);}catch(H){K.failure(H);}}catch(G){mstrApp.handleError(G,this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.Image","mstrmojo.Label","mstrmojo.Box","mstrmojo.Button","mstrmojo.android.ui.Button","mstrmojo.android.ui.Label","mstrmojo.dom","mstrmojo.css");var G=mstrmojo.Image.baseCssClass+" prv",J=mstrmojo.dom,M=mstrmojo.css;function F(S,Q){var R=S.imgNode;if(R){var U=S.imgNode.style;U[J.CSS3_TRANSITION_DURATION]=Q?"300ms":0;U.opacity=Q;}}function B(){var R=this.imgPreview.params,Q=R&&R.item;if(Q){this.onOpenItem();mstrmojo.all[R.ctrlId].executeItem(Q);}}function D(){if(mstrApp.isTablet()){this.updateScroller();return ;}var g=this._scrollStyle,V=this.scrollNode,d=V.parentNode,Q=d.parentNode;if(!g){var X=M.getComputedStyle(Q),l=M.getComputedStyle(V);this._scrollStyle=g={p:parseInt(X.paddingLeft,10)+parseInt(X.paddingRight,10),b:0,sp:parseInt(l.paddingLeft,10)+parseInt(l.paddingRight,10)};}var b="px",S=g.p,R=g.b,W=g.sp,o=parseInt(this.height,10),j=parseInt(this.width,10),U=this.staticNode,Y=U.offsetHeight,f=U.offsetWidth,e=0,Z=(j-S),h=(o-Y-S);if(!this.controller.orientation){e=f;Z=(j-f-S);h=o-S;}var a=Q.style;a.left=e+b;a.width=Z+b;a.height=h+b;var k=d.style;k.width=(Z-R)+b;k.height=(h-R)+b;V.style.width=(Z-R-W)+b;this.updateScroller();}var C=mstrmojo.android.ui.PropertiesView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.android.ui.PropertiesView",markupString:'<div id="{@id}" class="mstrmojo-PropertiesView {@cssClass}" style="{@cssText}"><div class="mstrmojo-PropertiesViewStatic"></div><div class="mstrmojo-PropertiesViewScroll"><div><div></div></div></div></div>',markupSlots:{staticNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.lastChild.firstChild.firstChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},children:[{scriptClass:"mstrmojo.Image",slot:"staticNode",alias:"imgPreview",cssClass:"prv",visible:false,onload:function(){F(this,1);}},{scriptClass:"mstrmojo.Box",slot:"staticNode",cssClass:"btns",alias:"btns",children:[mstrmojo.android.ui.Button.newButton(mstrmojo.desc(1900,"View"),function(){B.call(this.parent.parent);},{alias:"btnView",cssClass:"mstrmojo-GlowButton",visible:false}),{scriptClass:"mstrmojo.android.ui.Label",alias:"txView",cssClass:"txOffline",visible:false,txData:{},ontxDataChange:function H(){if(!this.txData){this.set("visible",false);this.txData={};}},touchTap:function(){var Q=mstrApp.getTransactionNotificationController(),R=Q&&Q.rootCtrl.getCurrent();if(R){if(R.ctrlType!==2048){R=R.getController("ctrlType",2048);}Q.showNotificationBoard(R||Q.rootCtrl,this.did,this.n);}}}]},{scriptClass:"mstrmojo.Label",slot:"scrollNode",alias:"lblName",cssClass:"nm",visible:false},{scriptClass:"mstrmojo.Label",slot:"scrollNode",alias:"lblDesc",cssClass:"ds"},{scriptClass:"mstrmojo.Label",slot:"scrollNode",alias:"lblCachedOn",cssClass:"ch",text:""}],afterViewVisible:function A(){D.call(this);},rootOrientationChange:function O(){D.call(this);},updateScrollerConfig:function I(){var Q=this._super(),S=this.scrollNode;Q.scrollEl=S;Q.noHScroll=true;Q.origin={x:0,y:0};var U=Math.max(S.offsetHeight-S.parentNode.clientHeight,0);var R=Q.vScroll=(U!==0);if(R){Q.offset={y:{start:0,end:U}};}else{Q.offset=null;}M.toggleClass(this.domNode,"can-scroll",R);return Q;},onOpenItem:mstrmojo.emptyFn,updateView:function P(g){var k=this.imgPreview,f=this.lblName,U=this.lblDesc,X=this.lblCachedOn,R=this.btns.btnView,W=this.btns.txView,e=g.item,S="visible",V="text";var b=g.desc||g.defaultMsg;U.set(V,b);U.set(S,!!b);if(!e){k.set(S,false);f.set(S,false);X.set(S,false);R.set(S,false);W.set(S,false);delete k.params;}else{var Q=mstrmojo.android.ui.PropertiesView.getPreviewSizes();if(mstrApp.isTablet()&&this.controller.orientation){Q.reverse();}mstrMobileApp.getScreenShot(this.id,e.pid||mstrApp.getCurrentProjectId(),e.did,Q[0].h,Q[0].w);var a=k.params;if(!a||a.did!==g.did){k.set("cssClass",G+" i"+g.st);k.set("src","");}k.params=g;k.set(S,true);var Z=g.ttl;f.set(V,Z);f.set(S,!!Z);var j=g.cached;X.set(V,j);X.set(S,(j!==undefined));if(g.avail){R.set(S,true);var h=g.did;if(h){var d=mstrApp.getTransactionNotificationController(),Y=(d&&d.hasTransactionQueue(h));W.set("did",h);W.set("n",g.ttl);W.set("visible",Y);if(Y){d.addWidgetListener(h,W);}}}else{R.set(S,false);W.set(S,false);}}D.call(this);},onPreviewReady:function E(R){if(R){var Q=this.imgPreview;if(Q.src!==R){F(Q,0);Q.domNode.className=G;Q.set("src",R);}}}});var N={160:{h:150,w:200},213:{h:150,w:200},240:{h:225,w:300},320:{h:300,w:400},480:{h:300,w:400}},L={160:{h:334,w:400},213:{h:334,w:400},240:{h:501,w:600},320:{h:668,w:800}},K={160:{h:337,w:400},213:{h:337,w:400},240:{h:506,w:930},320:{h:674,w:1240}};C.getPreviewSizes=function(){var R=[],Q=mstrMobileApp.getDeviceDPI();if(mstrApp.isTablet()){R.push(K[Q]);R.push(L[Q]);}else{R.push(N[Q]);}return R;};}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.Dialog","mstrmojo.android.ui.Button");mstrmojo.requiresDescs(221);var C=mstrmojo.android.ui.Button.newButton,B=0,A=1,E=2;mstrmojo.android.nativedialog.ListDialog=mstrmojo.declare(mstrmojo.android.nativedialog.Dialog,null,{scriptClass:"mstrmojo.android.nativedialog.ListDialog",type:1,choiceMode:A,populateConfig:function D(){var G=this.children[0];this.config.items=G.items;this.config.choiceMode=this.choiceMode;switch(this.choiceMode){case A:this.buttons=[C(mstrmojo.desc(221,"Cancel"))];if(G.selectedIndex!==undefined){this.config.selectedIndex=G.selectedIndex;}break;case E:if(G.selectedIndices!==undefined){this.config.selectedIndices=G.selectedIndices;}break;}this._super();},getItem:function F(G){return this.config.items[G];}});mstrmojo.android.nativedialog.ListDialog.CHOICE_MODES={NONE:B,SINGLE:A,MULTIPLE:E};}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.Popup","mstrmojo.MenuItem");var G="mstrFilterPanelMenu",L="mstrmojo.Box",E="mstrmojo-Menu-Box";var B=function(){var N=mstrmojo.all[G],M=N.fps;M.clearAllFilter();M.applyBufferedSlices();N.close();};var C=function(){var N=mstrmojo.all[G],M=N.fps;if(M&&M.applyBufferedSlices){M.applyBufferedSlices();}N.close();};var F=function(){H(false);};var I=function(){H(true);};var A=function(){var O=mstrmojo.all[G],N=O.fps,M=!O.autoSubmit;N.applyBufferedSlices();N.model.updateUnitFormat(N,1,{FormattingLayout:{CtlAutoSubmit:(M?1:0)}},{success:function(){var P=N.parent;O.set("autoSubmit",M);O.fps.defn.set("cas",M);P.buttonbar.applyNow.set("visible",!M);P.buttonbar.resetBtn.set("visible",!M);P.adjustFPHeight2Fit();mstrmojo.css.toggleClass(P.buttonbarNode,"hide",M);mstrmojo.css.toggleClass(P.toolbarNode,["cas"],!M);}},{params:{suppressData:true}});O.close();};function H(O){var P=mstrmojo.all[G],N=P.fps,V=mstrmojo.DocPortlet,M=O?V.ST_RESTORE:V.ST_MIN;if(!N||!N.children){return ;}var U=N.model,R=[];for(var S in N.children){var W=N.children[S];if(!W.children||!W.selected){continue;}for(var Q in W.children){var X=W.children[Q];if(typeof (X.defn.ttl)!=="undefined"){R.push(X.changeWindowState(M));}}}if(R.length){U.getDataService().submitUpdates(R,{},{preserveUndo:true,params:{suppressData:true}});}P.close();}function J(P,N,M){var O={scriptClass:"mstrmojo.MenuItem",text:P,cssClass:"mstrmojo-InteractiveButton",onclick:N,bindings:M};return O;}function K(P,N,M){M=M||{};M.pressed="mstrmojo.all['"+G+"'].autoSubmit";M.iconClass="this.pressed?'pressed':''";var O=J(P,N,M);O.onpressedChange=function(){if(this.domNode){mstrmojo.css.toggleClass(this.domNode,"pressed",this.pressed);}};return O;}mstrmojo.FilterPanelMenu=mstrmojo.registry.ref({id:G,slot:"popupNode",scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-Menu",shadowNodeCssClass:"mstrmojo-Menu-shadow",contentNodeCssClass:"mstrmojo-Menu-content",locksHover:true,autoSubmit:true,onOpen:function D(){var R=this.opener,a=R&&R[this.slot],Z=mstrmojo.dom.position(a),b=Z.y||0,U=this.cmPos,W,S,Y;if(U){W=U.x;S=U.y-b;}else{var N=this.openerButton.domNode;Y=mstrmojo.boxmodel.offset(N,a);W=Y.left;S=Y.top+((N&&N.offsetHeight)||0);}var Q=mstrmojo.dom.windowDim(),O=this.domNode;var P=O.offsetHeight,V=Q.h-b;Y=Math.max(0,S+P-V);this.set("top",S-Y+"px");var X=O.offsetWidth,M=Q.w;Y=Math.max(0,W+X-M);this.set("left",W-Y+"px");this.set("autoSubmit",this.fps.isAutoApply());},children:[{scriptClass:L,bindings:{},cssClass:E,children:[J(mstrmojo.desc(15554,"Unset all filters"),B,{}),J(mstrmojo.desc(14820,"Apply Now"),C,{visible:"!mstrmojo.all['"+G+"'].autoSubmit",enabled:"mstrmojo.all['"+G+"'].fps.applyEnabled"})]},{scriptClass:L,cssClass:E,bindings:{},children:[J(mstrmojo.desc(8970,"Expand all"),I,{}),J(mstrmojo.desc(8971,"Collapse all"),F,{})]},{scriptClass:L,cssClass:E,bindings:{},children:[K(mstrmojo.desc(1996,"Auto-Apply changes"),A,{})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ToggleDIC","mstrmojo._TouchGestures","mstrmojo.android._HasPreviewButton","mstrmojo.url","mstrmojo.array");mstrmojo.android.inputControls.ToggleDIC=mstrmojo.declare(mstrmojo.ToggleDIC,[mstrmojo._TouchGestures,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.ToggleDIC",useAnimation:false,init:function C(D){this._super(D);mstrmojo.array.forEach(this.dic.vls,function(E){E.n=mstrmojo.url.getAbsoluteURL(E.n,mstrApp.getConfiguration().getCurrentProjectWebServerUrl());});},touchTap:function B(){this.onclick();},onclick:function A(){this._super();this.applyChanges();},onblur:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo._TouchGestures","mstrmojo.android.ui.Image","mstrmojo.dom","mstrmojo.css");var F={containerNode:"100%"};mstrmojo.android.ui.ResultSetView=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.ResultSetView",layoutConfig:{h:F,w:F},init:function G(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ResultSetView");},rootOrientationChange:mstrmojo.emptyFn,addChildren:function A(K,I,J){if(!this.btnFullScreen){K=K.concat([{scriptClass:"mstrmojo.android.ui.Image",alias:"btnFullScreen",cssClass:"btnFullScreen",ignoreLayout:true,visible:false,touchTap:function(){mstrApp.rootController.flashFullScreen();}}]);}this._super(K,I,J);},delegateToolbar:function H(I){return false;},setActionToolbarStatus:mstrmojo.emptyFn,getMaskNode:mstrmojo.emptyFn,touchTap:function E(){this.controller.viewTap();},enterFullScreen:function D(){this.btnFullScreen.set("visible",true);},exitFullScreen:function B(){this.btnFullScreen.set("visible",false);},flashFullScreen:mstrmojo.emptyFn,cancelFlashFullScreen:mstrmojo.emptyFn,getPosition:function C(){var I=this.domNode;return I?mstrmojo.dom.position(I):undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+mstrmojo.string.encodeHtmlString(E.substring(0,G))+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,allowHTML:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return this.allowHTML?H[G.itemField]:mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,adjustSize:function(){var G=this.opener,F=this.domNode;if(G&&G.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(G&&G.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}this.adjustSize();},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,U=this.parent.parent;if(R===""){U.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);U.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.android.ui.ViewSwitcher","mstrmojo.dom","mstrmojo.array");var I=Math,H=mstrmojo.dom,J=mstrmojo.array;function F(O,N,Q,R){if(isNaN(N)){N=parseInt(N,10);}var P=O.style;P[H.CSS3_TRANSITION]=H.CSS3_PREFIX+"transform "+(Q||0)+"ms "+(R||"ease");P[H.CSS3_TRANSFORM]="translateX("+N+"px)";}function G(U,V,X){var P=this.getSlots(),S=P.current,W=P.next,R=P.slot,O=0;J.forEach(J.filter(this.children,function(Y){return(Y.slot===R);}),function(Y){this.removeChildren(Y);Y.unrender();},this);this.prepareNewView(U,R);try{var N=this.id;window.setTimeout(function(){mstrmojo.all[N].addChildren([U]);},0);if(W&&S){O=X?parseInt(this.width,10):0;if(X){W.style.zIndex=3;S.style.zIndex=1;}}}catch(Q){mstrmojo.Obj.free(U);throw Q;}return{start:V,target:O,newView:U,oldView:this.getCurrentView(),isForward:X};}function B(O,V,X,R,Q){var N=this.sliderNode,P=0,S="",U=function(){F(N,-O,P,S);if(X){if(P){window.setTimeout(X,P+100);}else{X();}}};if(R){var W=I.abs((O||0)-(V||0));P=I.round(W/parseInt(this.width,10)*700);S="ease";if(Q){P=I.min(P,I.round(W/Q));S+="-out";}this._animating=true;window.setTimeout(U,20);}else{U();}}function M(O,N){this.removeChildren(N);N.unrender();this._curSlot=O.slot;delete this._animating;}mstrmojo.android.ui.ViewSlider=mstrmojo.declare(mstrmojo.android.ui.ViewSwitcher,null,{scriptClass:"mstrmojo.android.ui.ViewSlider",switchView:function E(N,O){var P=this.getSlots();F(this.sliderNode,0);F(P.current,0);F(P.next,0);this._super(N,O);},isAnimating:function A(){return !!this._animating;},resetSliderNodes:function(Q){var P=this.getSlots(),O=parseInt(this.width,10),S=-O,N=O,R=0;if(Q){S=0;N=0;R=O;}F(this.sliderNode,S);F(P.current,N);F(P.next,R);return{sliderX:S,currentX:N,nextX:R};},beginScroll:function(R,O){if(this.isAnimating()){return false;}var P=R.delta.x<0,N=this.resetSliderNodes(P);var Q=this._scrollInfo=G.call(this,O,N.sliderX,P);this.scrollStarted(Q);this.scroll(R);},scroll:function L(P){var O=this._scrollInfo,N=P.delta.x;if(O){if(O.isForward!==(N<0)){B.call(this,0);this.beginScroll(P);}else{B.call(this,-(O.start+N));this.scrollProgress(O,N);}}},endScroll:function D(U){var P=this._scrollInfo;if(!P){return ;}var S=U.delta.x,N=-P.start,R=false,O=0,Q=this.id;if(I.abs(S)/parseInt(this.width,10)>0.25){N=P.target;R=true;O=U.velocity.x;}this.scrollStopped(P,R);B.call(this,N,N-S,function(){mstrmojo.all[Q]["scroll"+(R?"Complete":"Canceled")](P);},true,O);delete this._scrollInfo;},scrollStarted:mstrmojo.emptyFn,scrollProgress:mstrmojo.emptyFn,scrollStopped:mstrmojo.emptyFn,scrollCanceled:function C(N){M.call(this,N.oldView,N.newView);},scrollComplete:function K(N){M.call(this,N.newView,N.oldView);}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayoutViewer","mstrmojo._Formattable","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.dom");function J(g){var h,W=this._newLinks,f=mstrmojo.hash.copy(W,this._allLinks),h=g?f:W;this._newLinks={};if(mstrMobileApp.isOnline()){return ;}var Y=this.controller,X,b,Z=[],j=[],d;for(X in h){b=h[X];d=Y.getLinkRequest(b);if(d){Z.push(d);j.push(b);}}var a=Z.length;if(a){var e=function(k){for(X=0;X<a;X++){b=j[X];b.src.setLinkEnabled(k[X]);}};if(mstrApp.isHosted()){}else{this.model.getDataService().checkCachedLinkTargets(Z,{success:e,failure:mstrmojo.emptyFn});}}}function D(){var Y=this.children,X,W;for(X=0,W=(Y&&Y.length)||0;X<W;X++){var a=Y[X],Z=a.slot;if(Z){this.setSlotDimensions(Z,a.height,a.width);}}}mstrmojo.MobileDocLayoutViewer=mstrmojo.declare(mstrmojo.DocLayoutViewer,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.MobileDocLayoutViewer",layoutConfig:{h:{groupBy:"0",fixedHeaderNode:"auto",layout:"100%",fixedFooterNode:"auto",incFetchNode:"0"},w:{layout:"100%"}},formatHandlers:{domNode:["background-color"]},scrollerConfig:{vScroll:false,hScroll:false,bounces:false,showScrollbars:false},usesTouches:true,init:function O(W){this._super(W);this._newLinks={};this._allLinks={};},postBuildRendering:function U(){this._super();if(this.fixedFooterNode.clientHeight>0){D.call(this);}},preBuildRendering:function B(){this._super();this._scrollCssText="overflow:"+((!mstrmojo.dom.isWinPhone)?"hidden":"auto");var X=this.id,W=this.updateScroller;if(!this.afterScrollSubscr){this.afterScrollSubscr=this.docLayout.attachEventListener("afterScroll",X,function(){this.updateScroller();J.call(this);});this.model.attachEventListener("partialUpdate",X,W);}},mapID:null,setMapID:function I(W){this.mapID=W;},beforeViewHidden:function E(W){if(!this.mapID){return ;}var X=mstrmojo.all[this.mapID];if(X&&X.beforeViewHidden){X.beforeViewHidden(W);}this.mapID=null;},updateScrollerConfig:function R(){var X=this.scrollerConfig,Z=this.docLayout.containerNode;if(Z){var b=this.docLayout,Y={start:0,end:Math.max(b.getWidth()-this.scrollboxWidth,0)},e={start:0,end:Math.max(b.getHeight()-this.scrollboxHeight,0)},W=(e.start!==e.end),a=(Y.start!==Y.end),d;if(W||a){d={x:Y,y:e};}else{X.origin={x:0,y:0};}mstrmojo.hash.copy({scrollEl:this.scrollboxNode.firstChild,offset:d,vScroll:W,hScroll:a,showScrollbars:false},X);if(!X.origin){X.origin=this._origin={x:0,y:0};}b.scrollBuffer=parseInt(mstrApp.rootView.getContentDimensions().h,10);}return this._super();},initScroller:function M(W){this._super(W);W.attachEventListener("scrollDone",this.id,function(X){this._origin={x:X.x,y:X.y};this.notifyScrollListeners(X);});},touchBegin:function N(X){var W=this.parent;if(W&&W.isAnimating&&W.isAnimating()){X.stop();return false;}return this._super(X);},shouldTouchBubble:function K(W){if(mstrmojo.dom.contains(this.scrollboxNode,W.target,true,this.domNode)){return this._super(W);}return true;},touchSwipeBegin:function L(Y){if(this.shouldTouchBubble(Y)){var X=this.parent,W=X.canScroll&&X.canScroll(Y);if(W){this._parentScrolling=true;X.beginScroll(Y);}return W;}this._super(Y);},touchSwipeMove:function A(W){if(this._parentScrolling){this.parent.scroll(W);return ;}this._super(W);},touchSwipeEnd:function P(W){W.evt.handled=true;if(this._parentScrolling){delete this._parentScrolling;this.parent.endScroll(W);return ;}this._super(W);},touchTap:function S(){var W=this.controller;if(W&&W.viewTap){W.viewTap();}},renderChildren:function F(){this._super();this.updateScroller();},unrender:function Q(){delete this.scrollerConfig.origin;var W=this._scroller;if(W){delete W.origin;}if(this.subscr){mstrmojo.publisher.unsubscribe(this.subscr);delete this.subscr;}if(this.afterScrollSubscr){mstrmojo.publisher.unsubscribe(this.afterScrollSubscr);delete this.afterScrollSubscr;}this._super();},addLinkInfo:function H(X,W){this._newLinks[X]=W;},onRender:function C(){this._super();if(!this.subscr){var X=mstrmojo.publisher;this.subscr=X.subscribe(X.NO_SRC,X.CONNECTIVITY_CHANGED_EVENT,function(b){if(b){var Y=this._allLinks,Z,a;for(Z in Y){a=Y[Z].src;if(!a.linkEnabled){a.setLinkEnabled(true);}}}else{J.call(this,true);}},this.id);}if((mstrApp.useBinaryFormat||mstrApp.isHosted())&&!mstrMobileApp.isOnline()){var W=this;window.setTimeout(function(){J.call(W);},100);}},setSlotDimensions:function V(e,d,Z){if(e==="layout"){var Y=parseInt(this.height,10),X=this.fixedHeaderNode.clientHeight,b=this.fixedFooterNode.clientHeight,W=parseInt(d,10),a=Y-X-b;if(X+b>=Y){d=0;}else{if(W!=a){d=a+"px";}}}this._super(e,d,Z);},getCaptureDimensions:function G(){return this.docLayout.getCaptureDimensions();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.css","mstrmojo.array");mstrmojo.android.ui.TextInput=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.android.ui.TextInput",markupString:'<div id="{@id}" class="mstrmojo-AndroidTextInput {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onlabelTxtChange:function(){var D=this.lbl,E=this.labelTxt;D.set("visible",!!E);D.set("text",E||"");},ontextValueChange:function(){this.txt.set("value",this.textValue||"");},ontextTypeChange:function(){this.txt.set("type",this.textType||"text");}},labelTxt:"",textValue:"",textType:"text",init:function C(E){this._super(E);this.parent.attachEventListener("widthChange",this.id,function(G){var H=parseInt(G.value,10),F=this.txt.domNode,I=mstrmojo.css.getComputedStyle(F);mstrmojo.array.forEach(["padding","margin"],function(J){H-=parseInt(I[J+"Left"],10);H-=parseInt(I[J+"Right"],10);});F.style.width=H+"px";});var D=this.getTextCfg();D.alias="txt";D.cssDisplay="block";this.addChildren([D,{scriptClass:"mstrmojo.Label",cssClass:"lblErr",alias:"lblErr",visible:false}]);},getTextCfg:function B(){return{scriptClass:"mstrmojo.TextBox",onEnter:function(){var D=this.parent,E=D.onEnter;if(E){E.call(D,this.value);}}};},getValue:function A(){return this.txt.value;},children:[{scriptClass:"mstrmojo.Label",alias:"lbl"}],onRender:function(){this._super();this.txt.focus();}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._TouchGestures","mstrmojo.css","mstrmojo.dom");var E=500,B=mstrmojo.css;var C={onkeyup:function(H,I){var J=H._searchTimer;if(J){window.clearTimeout(J);}H._searchTimer=window.setTimeout(function(){H.searchFunc(I);delete H._searchTimer;},E);},onEnter:function(H,I){H.searchFunc(I);}};mstrmojo.android.ui.SearchBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._TouchGestures],{searchResult:null,searchStrategy:C,searchFunc:mstrmojo.emptyFn,clearFunc:mstrmojo.emptyFn,monitorInputs:true,clearSearch:function G(){this.clearFunc();},onkeyup:function D(){},onEnter:function A(){this.searchStrategy.onEnter(this,this.searchValue||this.value);delete this.searchValue;},onvalueChange:function F(){B.toggleClass(this.domNode,"clear",!!this.value.length);},touchTap:function(H){var I=this.domNode,J=H.evt;if(H.pageX-mstrmojo.dom.position(J.target).x>(I.offsetWidth-parseInt(B.getStyleValue(I,"paddingRight"),10))){this.set("value","");this.clearSearch();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.TextBox");var A=mstrmojo.css,C=mstrmojo.dom;mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur></textarea>',maxLength:256,onkeydown:function B(K){var I=this.inputNode,J=this.value,E=this.maxLength,F=(J&&J.length)||0,M=K.e,L=M.keyCode;this.isDeleteKeys=L===8||L===46;this.isArrowKeys=L===37||L===38||L===39||L===40;if(E!==undefined&&E<=F){var G=I.selectionEnd,H=(G!==undefined)?(G-I.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!H){if(C.isIE7||C.isIE8||C.isIE9){I.blur();window.setTimeout(function(){I.focus();},1);}C.preventDefault(window,M);return false;}}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextArea,{oncssClassChange:function D(){A.addClass(this.domNode,this.cssClass||"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(E){this._super(E);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}var D=["mstrmojo-ui-MenuPopup"],F=C.cssClass;if(F){D.push(F);}if(C.hasToggleItem){D.push("hasToggleItem");}mstrmojo.css.addWidgetCssClass(this,D);this.addChildren(C.contents);},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocPanel","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo._CanGrowOrShrink","mstrmojo.hash");function G(){var M=this.containerNode;if(M){var O=this.getFormats(),R=this._parentSize,P=Math.max((parseInt(O.height,10)||0),R.height),N=Math.max((parseInt(O.width,10)||0),R.width),Q=M.style;Q.width=N+"px";Q.height=P+"px";}}var L=mstrmojo.android.AndroidDocPanel=mstrmojo.declare(mstrmojo.DocPanel,[mstrmojo._CanGrowOrShrink,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.AndroidDocPanel",scrollerSetupDelay:0,postBuildRendering:function A(){if(this._isInfWin){G.call(this);}return this._super();},updatePanelDimensions:function D(Q,M,P,N){this._parentSize={height:M,width:P};var O="px";if(N){this._isInfWin=true;G.call(this);}this.cssText="left:"+Q+"px;top:0;height:"+M+O+";width:"+P+O+";";if(this.hasRendered){var R=this.domNode.style;R.left=Q+O;R.height=M+O;R.width=P+O;this.updateScroller();}},update:function E(M){this.scrollerConfig={bounces:false,showScrollbars:false};},onchildRenderingChange:function I(M){this._super(M);if(this.getFormats().overflow==="auto"){this.performCanGrowCanShrink([(M&&M.src)||M],(!!this._isInfWin&&!mstrApp.isTablet()));}},touchTap:function B(){var M=this.controller;if(M&&M.viewTap){M.viewTap();}},getCanGrowShrinkNode:function K(){return this.containerNode;},afterCanGrowShrink:function C(){this.updateScroller();},updateScrollerConfig:function F(){var M=this._super();if(this.getFormats().overflow==="auto"){var P=this.containerNode,O=this._parentSize,N={Height:{a:"y",s:"v"},Width:{a:"x",s:"h"}},Q={};M.scrollEl=P;mstrmojo.hash.forEach(N,function(V,U){var R=O[U.toLowerCase()];var W=Math.max(P["offset"+U]-R,0),S=M[V.s+"Scroll"]=(W!==0);if(S){Q[V.a]={start:0,end:W};}});M.offset=Q;M.origin=M.origin||{x:0,y:0};}return M;}});var J=L.prototype.formatHandlers,H="containerNode";J[H]=J[H].concat("D");}());(function(){mstrmojo.requiresCls("mstrmojo.rw.DocSubsection","mstrmojo._CanGrowOrShrink","mstrmojo.boxmodel");mstrmojo.DocSubsection=mstrmojo.declare(mstrmojo.rw.DocSubsection,[mstrmojo._CanGrowOrShrink],{scriptClass:"mstrmojo.DocSubsection",postBuildRendering:function D(){var H=this.defn;if(H.hc||H.vc){var F=this.domNode,J=this.getFormats(),K=this.id,I=J.height,G=J.width;H.attachEventListener("resized",K,function(){var M=J.height,L=J.width;if(M){F.style.height=M;}if(L){F.style.width=L;}});H.attachEventListener("adjustSize",K,function(N){var M=F.style,L=M.height;if(H.hc&&M.width!==G){M.width=G;}if(H.vc&&M.height!==I){M.height=I;}this.performCanGrowCanShrink(this.children);N.heightReduced=(parseInt(L,10)>parseInt(M.height,10));});}return this._super();},onchildRenderingChange:function B(H){this._super(H);if(this.renderMode!=="scroll"){var F=this.parent.slot,G=F==="fixedHeaderNode"||F==="fixedFooterNode";this.performCanGrowCanShrink([(H&&H.src)||H],G);}},portalMaximized:function C(){var I=this.defn,J=I.vc,G=I.hc;if(!G&&!J){return{};}delete I.vc;delete I.hc;delete I.ck;var H=this.getFormats(),F=this.model,N=this.domNode,K=this;var L={HideIfEmpty:-1};var M=function(R,P,Q){var S=R.toLowerCase(),O=parseInt(N.style[S],10);P=((P===undefined)?O:Math.max(parseInt(P,10),O))+"px";if(H[S]!==P){H[S]=P;L[R]=mstrmojo.boxmodel.px2Inches(F.getZoomProps(),P);delete K["_fixed"+R];}Q=Q||"";L["Max"+R]=0;L["CanGrow"+Q]=0;L["CanShrink"+Q]=0;};if(J){M("Height",H.normHeight);}if(G){M("Width",H.normWidth,"Horizontal");}I.raiseEvent({name:"resized"});return L;},adjustSectionSize:function A(){var F=this.defn;if(F.vc||F.hc){return F.raiseEvent({name:"adjustSize"});}return null;},refresh:function E(){if(!this.hasRendered){return ;}var G=this.children||[],F=G.length-1;for(F;F>=0;F--){if(G[F].refresh){G[F].refresh();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(D.encodeHtmlString(I.ttp,true)||D.encodeHtmlString(I.n,true));},showTooltip:function G(a,N){var Q=this;if(!Q.hasOpenTooltip&&!(Q._lastOpened&&Q._lastOpened.visible)){var h=E.eventTarget(N,a),b=Q.getItemFromTarget(h),V=Q.getItemNodeFromTarget(h),k=Q.getTooltipText(b),P=Q.tooltipCss;if(!k||b.ttpDisabled){return ;}if(Q.showTooltipForLargeText){if(V.offsetWidth>=V.scrollWidth){return ;}}var j=E.position(V),Z,R,L,X="",Y=Q.tooltipOffset,O=(b&&b.ctxt)||{};if(this.tooltipOrientation==="vertical"){Z=j.x+j.w/2;L=O.posType||C.POS_TOPCENTER;R=j.y+j.h+Y;var M="mojo-theme-light vi-regular vi-tooltip-A";if(!O.posType){M+=" A-center";}Q.tooltipCss=F.copy({cssClass:M},P);}else{var K=E.windowDim(),W=40,d=j.x+j.w+Y,J=j.x-Y,g=J-W,I=K.w-(d+W),f="vi-regular vi-tooltip-",U;R=j.y;if(I>=g){Z=d;U=I;L=O.posType||C.POS_TOPLEFT;P.cssClass=f+"C "+P.rightCssClass;}else{Z=J;U=g;L=O.posType||C.POS_TOPRIGHT;P.cssClass=f+"D "+P.leftCssClass;}X="max-width: "+U+"px;";}if(Q.tooltipContrast){P.cssClass=P.cssClass+" contrast";}if(P&&P.getItemCssClass){P.cssClass=H.filter([P.cssClass,P.getItemCssClass(b)],function(e){return !!e;}).join(" ");}var S=Q.richTooltip=F.copy(Q.tooltipCss,{content:D.apply(Q.tooltipMarkup,{c:k,style:X}),top:R,left:Z,posType:L});if(Q.itemDisabled){S.cssClass+=" vi-warning";}if(O.hoverable){S.enableHover=true;}if(O.posType==="TL"){S.left=j.x;}S.keepArrowXPos=!!Q.keepArrowXPos;S.keepArrowYPos=!!Q.keepArrowYPos;this._super(a,N);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo.tooltip","mstrmojo.string","mstrmojo.array");var O=0,I=mstrmojo.array,B=mstrmojo.string;function P(){var V=this.textNode,X=this.imgNode;if(this.eg!=null){X.style.display="none";V.innerHTML=this.eg||"";V.style.display="block";this.domNode.style.display=(this.visible&&this.eg.length>0)?"block":"none";}else{V.style.display="none";this.domNode.style.display=this.visible?"block":"none";X.style.display="block";if(this.tooltip){X.setAttribute("ttl",this.tooltip);}var W=this.getFormats();this.retrieveGraphSrc(W.height,W.width);}}var U={6:"poly",7:"rect",100:"circle"};function H(){var f=this.as,a=f&&f.length;if(!a){return ;}var Z=this.id,e=Z+"_map"+O++,X=[],d=-1,Y;for(Y=0;Y<a;Y++){var W=f[Y];W.id=Z;W.aid=Y;W.tooltip=B.multiReplace(W.tooltip||"",{"&#13":"<br />","&#32":" ",'"':"&quot;"});if(!isNaN(W.shape)){W.shape=this.getAreaShapeName(W.shape);}if(!mstrApp.isDossier&&(W.tks||W.tks===""||W.tty===1)){W.extra=' href="#" ';}X[++d]=B.apply(this.areaMarkup,W);}var b='<map id="'+e+'" name="'+e+'">'+X.join("")+"</map>";if(!this.domNode){this.att='usemap="#'+e+'" ';this.map=b;}else{var V=document.createElement("div");V.innerHTML=b;if(this.mapNode){V=V.firstChild;this.mapNode.innerHTML=V.innerHTML;}else{this.imgNode.setAttribute("usemap","#"+e);this.mapNode=this.domNode.appendChild(V.firstChild);}}}var A=mstrmojo.GraphBase=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.GraphBase",cssClassPrefix:"mstrmojo-GraphBase",markupString:'<div id="{@id}" class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><img {@att}src="../images/1ptrans.gif" class="{@cssClassPrefix} {@cssImageClass}" hidefocus="true" />{@map}</div>',att:"",map:"",cAreaIdx:-1,useRichTooltip:true,markupSlots:{imgNode:function J(){return this.domNode.childNodes[1];},mapNode:function F(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function M(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function K(){this.domNode.style.display=(this.visible)?"block":"none";}},preBuildRendering:function C(){H.call(this);return this._super();},postBuildRendering:function Q(){P.call(this);return this._super();},setModel:function L(V){this.model=V;},updatingTooltipHelper:function R(Z,j,d){var W=Z&&Z.getAttribute("aid"),V=Z&&Z.getAttribute("ttl"),Y=Z.getAttribute("SC"),b={refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMLEFT,contentNodeCssClass:"gp-tooltip"},h=(this.model.getZoomFactor?this.model.getZoomFactor():(this.model.docModel?this.model.docModel.getZoomFactor():1))+"em";if(W==this.cAreaIdx){return ;}this.cAreaIdx=W;b.content=V||this.defaultTooltip;var X="font-size:"+h+";";if(Y){X+="border-color:#"+Y;}b.contentNodeCssText=X;var e=Z.getAttribute("coords"),g=99999,f=99999;if(!d){if(e&&e.length>0){e=e.split(",");var a=0;while(a+1<e.length){g=Math.min(g,parseInt(e[a++],10));f=Math.min(f,parseInt(e[a++],10));}}}if(g===99999){g=j.x;}if(f===99999){f=j.y;}b.top=f;b.left=g;this.richTooltip=null;this.set("richTooltip",b);},redraw:function N(){if(!this.hasRendered){return false;}P.call(this);var V=this.getFormats();if(this.as&&V.height&&V.width){this.refreshMap();}return true;},refreshMap:function G(){if(this.as){H.call(this);}},getAreaShapeName:function D(V){return U[parseInt(V,10)]||"default";}});var S=A.tooltipCLS="mstrmojo-mobileGraph-Tooltip-content",E=A.canvasCLS="mobile-graph-highlight-canvas";A.hideTooltips=function(){I.forEach(document.getElementsByClassName(S),function(V){V.style.display="none";});I.forEach(document.getElementsByClassName(E),function(V){V.getContext("2d").clearRect(0,0,V.width,V.height);V.width=V.width;});};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.registry","mstrmojo.tooltip","mstrmojo.HBox");var B=mstrmojo.dom,C=mstrmojo.css,A=1,G=2,F=3,E=function(I){var H=C.getStyleValue(I,"verticalAlign");return{top:A,bottom:F,middle:G}[H]||A;};mstrmojo.SliderBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.SliderBox",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}" tabindex="{@tabIndex}" ><div class="valuePart" style="{@valueCssText}"><span class="valueLabel">{@valueLabel}</span><span class="valueText">{@valueText}</span></div><table class="sliderPart" style="{@sliderCssText}"><tbody><tr><td class="minText">{@min}</td><td class="sliderWrapper"></td><td class="maxText">{@max}</td></tr></tbody></table></div>',markupSlots:{valuePartNode:function(){return this.domNode.firstChild;},valueLabelNode:function(){return this.domNode.firstChild.firstChild;},valueTextNode:function(){return this.domNode.firstChild.lastChild;},sliderPartNode:function(){return this.domNode.lastChild;},minTextNode:function(){return this.domNode.lastChild.rows[0].cells[0];},maxTextNode:function(){return this.domNode.lastChild.rows[0].cells[2];},sliderNode:function(){return this.domNode.lastChild.rows[0].cells[1];}},markupMethods:{onmaxChange:function(){this.maxTextNode.innerHTML=this.max;},onminChange:function(){this.minTextNode.innerHTML=this.min;},onvalueTextChange:function(){this.valueTextNode.innerHTML=this.valueText;},onunsetChange:function(){var H=this.sliderBar.domNode;if(H){mstrmojo.css.toggleClass(H,"unset",this.unset);}}},tabIndex:-1,sliderRef:null,valueLabel:mstrmojo.desc(4104,"Value:"),valueText:"",min:"",max:"",interval:0,isSequential:false,unset:false,cssClass:"mstrmojo-SliderGroup",postCreate:function D(){if(!this.sliderRef){this.sliderRef={scriptClass:"mstrmojo.Slider",isHoriz:true,ontitleChange:function(){if(this.domNode&&this.title){this.domNode.setAttribute("title",this.title);}},onselectionChange:function(){if(!this.hasRendered){return ;}var I=this.items[this.selectedIndex]&&this.items[this.selectedIndex].n,H=this.parent;if(H.unset){H.unset=false;C.removeClass(this.domNode,"unset");}H.set("valueText",I);H.set("value",I);this.typeHelper.updateThumb();}};}this.sliderRef.slot="sliderNode";this.sliderRef.alias="sliderBar";this.addChildren(this.sliderRef);},preBuildRendering:function(){this._super();var M=this.min,I=this.max,K=mstrmojo.num.parseNumeric(this.value),J=this.items,H,L=this.sliderBar;if(this.isSequential){H=Math.floor((Math.max(Math.min(K,I),M)-M)/this.interval);if(isNaN(K)||K<M||K>I){this.unset=true;}}else{H=mstrmojo.array.find(J,"v",String(K));if(H==-1){this.unset=true;H=0;}}L.set("items",J);L.select(H||0);},postBuildRendering:function(){this._super();if(this.unset){C.addClass(this.sliderBar.domNode,"unset");}},alignSlider:function(K,H){var J=E(K),I,L;if(!this.valuePartNode){L=this.valueCssText||"";I=this.sliderCssText||"";if(J===A){this.valueCssText="top:0;"+L;this.sliderCssText="top:0;"+I;}else{if(J===F){this.valueCssText="bottom:0;"+L;this.sliderCssText="bottom:0;"+I;}else{this.valueCssText="height: 100%; line-height: "+H+"px;"+L;this.sliderCssText="height: 100%;"+I;}}}else{I=this.sliderPartNode.style;L=this.valuePartNode.style;if(J){if(J===A){I.top=L.top="0";}else{if(J===F){I.bottom=L.bottom="0";}else{L.height=I.height="100%";L.lineHeight=inlineHeight+"px";}}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(W,U){if(!W){return ;}var S=U&&U.length||0,V;for(V=S;V>0;V--){W=W.replace(new Array(V+2).join("#"),U[V-1]);}return W;},L=function L(U){if(!U){return ;}var a=this,W=J.position(U.refNode||a.refNode),Z=J.position(a.domNode),Y=U.position||R.RIGHT,V=0,b=0,S=9+(U.margin!==undefined?U.margin:0),X=" ";switch(Y){case R.TOP:b=-Z.h-S;X+="t";break;case R.BOTTOM:b=W.h+S;X+="b";break;case R.LEFT:V=-Z.w-S;X+="l";break;case R.RIGHT:V=W.w+S;X+="r";break;}mstrmojo.hash.forEach(C(U,{left:V,top:b,contentNodeCssClass:X,visible:false}),function(d,e){this[e]=d;},this);this.set("visible",U.invalid);},A=function A(S){var X=this,V,W=S.errorCode,Y=S.errorMsg,U=S.args,Z=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){V={content:W!==null?(X.generateContentHTML(Q(Z[W],U))||Z["*"]):Y};}return V;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(V){var Z=this,b=Z.warningSlotName,e=Z[b],S=V&&V.lasting||6000,Y=V.refNode||this.domNode,U=V.highlight!==false,d=V.closeOnClick===false?false:true,a;if(!e){e=new mstrmojo.Tooltip({refNode:Y,highlight:U,closeOnClick:d,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Z.addDisposable(e);Z[b]=e;a=Z.closeOnClick=Z.getCloseOnClickListener();J.attachEvent(document.body,"click",a);}var X=V.position||R.TOP,W="vi-warning vi-tooltip-";switch(X){case R.TOP:e.cssClass=W+"V";break;case R.BOTTOM:e.cssClass=W+"A";break;case R.LEFT:e.cssClass=W+"D";break;case R.RIGHT:e.cssClass=W+"C";break;}e.open(Z,A.call(Z,V));this.adjustPosition(V);if(U){P.toggleClass(e.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Z._warningTimeOut);Z._warningTimeOut=window.setTimeout(function(){Z.hideWarning();},S);},hideWarning:function H(){var U=this,S=U[U.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(U._warningTimeOut);delete U._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var U=S[S.warningSlotName];if(U.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var U=this;L.call(U[U.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(V){if(!V||!V.attachEventListener){return ;}var W=V._validationEventListener,U;if(W){V.detachEventListener(W);delete V._validationEventListener;}U=this.getValidationEvtListener();if(U){V._validationEventListener=V.attachEventListener("validationChange",this.id,U);}},this);},getValidationEvtListener:function B(){var U=this;return function S(V){var W=V.value;U[(W&&W.invalid?"show":"hide")+"Warning"](W);};},unrender:function K(S){var U=this[this.warningSlotName];if(U){U.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._ListSelections","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var Q=mstrmojo.dom,C=mstrmojo.css,R=mstrmojo.hash,K=mstrmojo.all,e=mstrmojo._HasMarkup,f="px";var D={},J=false,a;function d(){var s={mousedown:["touchstart","mousedown"],mouseup:["touchend","mouseup"],mousemove:["touchmove","mousemove"]},q;for(q in s){D[q]=J?s[q][0]:s[q][1];}}function o(s){if(this.dragging){return ;}this._moveCnt++;if(this._moveCnt>this.mousemoveBuffer){var q=document.body;Q.detachEvent(q,"mousemove",this._mousemoveCallback);Q.detachEvent(q,"mouseup",this._cancelCallback);this.initDrag(s);}}function h(s){if(this.dragging){return ;}this._moveCnt++;if(this._moveCnt>this.mousemoveBuffer){var q=document.body;Q.detachEvent(q,"touchmove",this._touchmoveCallback);Q.detachEvent(q,"touchend",this._cancelCallback);if(a){window.clearTimeout(a);}this.initDrag(s);}}function H(u){var q=document.body,t=J?"_touchmoveCallback":"_mousemoveCallback";Q.detachEvent(q,D.mousemove,this[t]);Q.detachEvent(q,D.mouseup,this._cancelCallback);if(a){window.clearTimeout(a);}var s=this.afterDragCancel;if(s){s.call(this.target,u);}}function G(x){J=true;d();Q.preventDefault(window,x);if(this.dragging){return true;}var t=this.target.id,u=document.body,s=x&&x.touches&&x.touches[0]||x;if(!this._touchmoveCallback){this._touchmoveCallback=function(z){h.call(K[t].dnd,z&&z.touches&&z.touches[0]||z);return true;};}this._moveCnt=0;this.startE=R.copy(s);Q.attachEvent(u,"touchmove",this._touchmoveCallback);if(!this._cancelCallback){this._cancelCallback=function(z){H.call(K[t].dnd,s);return true;};}Q.attachEvent(u,"touchend",this._cancelCallback);var w=this,q=s;q.type=q.name="contextmenu";a=window.setTimeout(function(){var AA=w.target,AB=AA&&AA.docSelector,z=AB&&AB.parent;Q.detachEvent(u,"touchmove",this._touchmoveCallback);Q.detachEvent(u,"touchend",this._cancelCallback);if(z){z.raiseEvent(e.newDomEvent("contextmenu",window,q));}},1000);return false;}function g(t){J=false;d();Q.preventDefault(window,t);if(this.dragging){return true;}var q=this.target.id,s=document.body;if(!this._mousemoveCallback){this._mousemoveCallback=function(u){o.call(K[q].dnd,u);return true;};}this._moveCnt=0;this.startE=R.copy(t);Q.attachEvent(s,"mousemove",this._mousemoveCallback);if(!this._cancelCallback){this._cancelCallback=function(u){H.call(K[q].dnd,u);return true;};}Q.attachEvent(s,"mouseup",this._cancelCallback);return false;}function E(s){var q=this.duringDrag;if(q){q.call(this.target,s);}return true;}function N(t){this.dragging=false;var q=document.body;Q.detachEvent(q,D.mousemove,this._dragCallback);Q.detachEvent(q,D.mouseup,this._dragEndCallback);var s=this.afterDragEnd;if(s){s.call(this.target,t);}return true;}function W(){if(this._mousemoveCallback){Q.detachEvent(document.body,"mousemove",this._mousemoveCallback);delete this._mousemoveCallback;}if(this._touchmoveCallback){Q.detachEvent(document.body,"touchmove",this._touchmoveCallback);delete this._touchmoveCallback;}if(this._cancelCallback){Q.detachEvent(document.body,"mouseup",this._cancelCallback);Q.detachEvent(document.body,"touchup",this._cancelCallback);delete this._cancelCallback;}if(this._dragCallback){Q.detachEvent(document.body,"mousemove",this._dragCallback);Q.detachEvent(document.body,"touchmove",this._dragCallback);delete this._dragCallback;}if(this._dragEndCallback){Q.detachEvent(document.body,"mouseup",this._dragEndCallback);Q.detachEvent(document.body,"touchmove",this._dragEndCallback);delete this._dragEndCallback;}}mstrmojo.DnDComponent=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DnDComponent",isDragging:false,initD:null,startE:null,afterDragStart:null,duringDrag:null,afterDragEnd:null,target:null,mousemoveBuffer:1,init:function V(q){R.copy(q,this);},initDrag:function l(w){this.dragging=true;var s=this.target.id,u=document.body;var x=this._dragCallback;if(!x){x=this._dragCallback=function(z){if(J){z=z&&z.touches&&z.touches[0]||z;}return E.call(K[s].dnd,z);};}Q.attachEvent(u,D.mousemove,x);var q=this._dragEndCallback;if(!q){q=this._dragEndCallback=function(z){if(J){z=z&&z.touches&&z.touches[0]||z;}return N.call(K[s].dnd,z);};}Q.attachEvent(u,D.mouseup,q);var t=this.afterDragStart;if(t){t.call(this.target,w);}this._dragCallback(w);}});function Z(q){this.getUnit=function s(){var t=q.items.length;return t>1?q._effLen/(t-1):1;};this.calcMinMax=function(u,t){var w=Math.round((u/q.unit+t/q.unit)/2);return{min:w,max:w};};this.preUpdateThumb=function(){q.start=Math.min(q.min*q.unit,q._effLen)+f;q.sdCssText=q.orCfg.posCssP+":"+q.start+";";};this.updateThumb=function(){q.containerNode.style[q.orCfg.posCssP]=q.start=Math.min(Math.round(q.min*q.unit),q._effLen)+f;};return this;}function k(q){this.getUnit=function(){return q._effLen/q.items.length;};this.calcMinMax=function(u,t){return{min:Math.floor(u/q.unit+0.5),max:Math.floor(t/q.unit-0.5)};};function s(){var t=q.min,w=q.unit;var x=q.start=(t*w)+f;var u=q.length=Math.max(Math.round((q.max-t+1)*w-q.gap),0)+f;return{st:x,len:u};}this.preUpdateThumb=function(){var u=q.orCfg,t=s();q.sdCssText=u.posCssP+":"+t.st+";"+u.lenCssP+":"+t.len+";";};this.updateThumb=function(){var u=q.orCfg,t=s(),w=q.containerNode.style;w[u.posCssP]=t.st;w[u.lenCssP]=t.len;};return this;}var F="<span>{@content}</span>";mstrmojo.Slider=mstrmojo.declare(mstrmojo.Container,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.Slider",markupString:'<div id="{@id}" class="mstrmojo-Slider {@cssClass} {@clsType} {@clsOrientation}" style="{@cssText}" ><div class="cont"><div class="bk" style="{@bkCssText}"></div><div class="sdc" style="position:absolute;{@sdcCssText}" mstrAttach:mouseout><div class="sd" style="{@sdCssText}"><div class="t1"></div><div class="t2"></div><div class="t3"></div></div></div></div></div>',sdCssText:"",cssClass:"sc",clsType:"sc2",clsOrientation:"sc-v",orCfg:null,typeHelper:null,_tooltip_pos:"TL",useRichTooltip:true,init:function j(q){this._super(q);if(q.isHoriz){this.orCfg={posCssP:"left",marginCssP:"marginLeft",lenCssP:"width",lenP:"clientWidth",opPosCssP:"top",thickP:"clientHeight",offsetP:"x"};this.clsOrientation=" sc-h";this._tooltip_pos=mstrmojo.tooltip.POS_BOTTOMLEFT;}else{this.orCfg={posCssP:"top",marginCssP:"marginTop",lenCssP:"height",lenP:"clientHeight",opPosCssP:"left",thickP:"clientWidth",offsetP:"y"};this._tooltip_pos=mstrmojo.tooltip.POS_TOPRIGHT;this.titleHeight=(q.docSelector.fmts.ttl&&q.docSelector.fmts.ttl.height)?parseInt(q.docSelector.fmts.ttl.height,10):0;}this._exRoom=this.thumbWidth;if(this.multiSelect){this._exRoom*=2;}if(q.multiSelect){this.typeHelper=new k(this);}else{this.clsType="sc1";this.typeHelper=new Z(this);}},markupSlots:{dndNode:function(){return this.domNode.firstChild;},bgNode:function(){return this.domNode.firstChild.firstChild;},sdcNode:function(){return this.domNode.firstChild.lastChild;},containerNode:function(){return this.domNode.firstChild.lastChild.firstChild;},frontNode:function(){return this.domNode.firstChild.lastChild.firstChild.firstChild;},thumbNode:function(){return this.domNode.firstChild.lastChild.firstChild.childNodes[1];},endNode:function(){return this.domNode.firstChild.lastChild.firstChild.lastChild;},tooltipNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:function(){this.synchronizeSlider();}},start:"50px",length:"30px",min:0,max:0,gap:1,ghost:null,thumbWidth:11,cssBkBW:1,dndNode:null,synchronizeSlider:function I(){var AA=this.orCfg,z=AA.lenCssP,t=this[z],q=parseInt(t,10),AF=this.hasRendered,AD=this.titleHeight||0;var u=this._effLen=isNaN(q)?0:(q-this._exRoom-AD);if(t){var AE={};AE[z]=Math.max(parseInt(t,10)-(2*this.cssBkBW),0)-AD+f;var w={};w[z]=u+f;w[AA.posCssP]=Math.round(this._exRoom/2)+f;w[AA.opPosCssP]="0"+f;if(AF){R.copy(AE,this.bgNode.style);R.copy(w,this.sdcNode.style);}else{this.bkCssText=C.getCssTextFromObj(AE);this.sdcCssText=C.getCssTextFromObj(w);}}var AH=this.selectedIndices;if(!R.isEmpty(AH)){var AC=this.items.length,x=-1,AG=-1,AB;for(AB=0;AB<AC;AB++){if(AH[AB]){if(x<0){x=AB;}AG=AB;}else{if(x>-1){break;}}}this.min=x;this.max=AG;}var s=this.typeHelper;this.unit=s.getUnit();if(AF){s.updateThumb();}else{s.preUpdateThumb();}},preBuildRendering:function A(){this.synchronizeSlider();},postBuildRendering:function U(){this._super();if(this.items.length>1){var q=this.dnd=new mstrmojo.DnDComponent({target:this});var s=this.id;this.__mouseDownEvt=function(t){Q.stopPropogation(window,t);g.call(K[s].dnd,t);return true;};Q.attachEvent(this.dndNode,"mousedown",this.__mouseDownEvt);if(Q.supportsTouches){this.__touchstartEvt=function(t){Q.stopPropogation(window,t);G.call(K[s].dnd,t);return true;};Q.attachEvent(this.dndNode,"touchstart",this.__touchstartEvt);}q.afterDragStart=this.initDrag;q.duringDrag=this.ondrag;q.afterDragEnd=this.ondrop;q.afterDragCancel=this.cancelDrag;}},initDrag:function l(x,q){q=q||window;var w=this.configureGhost(true),s=this.orCfg,u=this.dnd,t=u.startE;u.initD={tP:parseInt(this.start,10),sL:this._effLen,contL:w.containerNode[s.lenP],offset:Q.getMousePosition(t,q)[s.offsetP],td:Q.eventTarget(q,t)};},configureGhost:function b(s){var u=this.ghost;if(!u){var x=this.containerNode.cloneNode(true),w=x.childNodes;C.addClass(x,"gh");x.style.display="none";u=this.ghost={containerNode:x,frontNode:w[0],thumbNode:w[1],endNode:w[2]};this.sdcNode.appendChild(x);}var t=this.ghost.containerNode.style,q=this.orCfg;R.copyProps([q.posCssP,q.lenCssP],this.containerNode.style,t);if(s){t.display="block";}return u;},ondrag:function O(AB,AA){AA=AA||window;var AC=this.dnd.initD,w=this.ghost.containerNode,AG,t,q,z=this.min,AD=this.max,x=this.orCfg,s=x.lenCssP,AF=x.posCssP;var AE=Q.getMousePosition(AB,AA)[x.offsetP]-AC.offset;switch(AC.td){case this.thumbNode:AG=Math.max(Math.min(AC.tP+AE,AC.sL-AC.contL),0);t=AG+AC.contL;w.style[AF]=AG+f;var u=this.typeHelper.calcMinMax(AG,t);z=u.min;AD=u.max;break;case this.frontNode:AG=Math.max(Math.min(AC.tP+AE,AC.tP+AC.contL),0);q=Math.max(Math.min(AC.contL-AE,AC.tP+AC.contL),0);w.style[AF]=AG+f;w.style[s]=q+f;z=Math.min(Math.floor(AG/this.unit+0.5),this.max);break;case this.endNode:q=Math.max(Math.min(AC.contL+AE,AC.sL-AC.tP),0);t=AC.tP+q;w.style[s]=q+f;AD=Math.max(Math.floor(t/this.unit-0.5),this.min);break;default:return ;}if(z!==this.min||AD!==this.max){this.min=z;this.max=AD;this.typeHelper.updateThumb();}this._updateTooltip();},ondrop:function Y(){this.typeHelper.updateThumb();var w=this.ghost;if(w){w.containerNode.style.display="none";}this.hideTooltip();var x=this.dnd&&this.dnd.initD;if(this.makeSelection&&x){this.makeSelection({selItem:x.td});}var q=this.items;if(q&&q.length){var t=[],s;for(s=this.min;s<=this.max;s++){var u=q[s];if(u){t.push(s);}}this.select(t);}this.dnd.initD=null;},cancelDrag:function M(s,q){if(this.makeSelection){this.makeSelection({selItem:Q.eventTarget(q||window,this.dnd.startE)});}},showTooltip:function p(s,q){this.configureGhost(false);this._updateTooltip(s,q);this._super(s,q);},hideTooltip:function P(s,q){if(this.dnd&&this.dnd.dragging){return ;}this._super(s,q);},_updateTooltip:function S(){var AA=this.orCfg,AB={contentNodeCssClass:"sc-tooltip",refNode:this.domNode,posType:this._tooltip_pos},s=(this.ghost)?this.ghost.containerNode:this.containerNode;AB[AA.opPosCssP]=0;AB[AA.posCssP]=s.style[AA.posCssP];AB.content="";var x=this.items,u=x.length;if(x&&u){var q=(x[this.min]||x[0]),t=this.getItemTooltip(q),w=t;if(this.min!==this.max){var z=(x[this.max]||x[u-1]);w=mstrmojo.desc(146,"From:")+" '"+t+"' "+mstrmojo.desc(2665,"To:")+" '"+this.getItemTooltip(z)+"'";}AB.content=F.replace(/\{@content\}/g,w);}this.set("richTooltip",AB);},getItemTooltip:function X(q){var s=q?q.n:"";return"'"+(s.length>20?s.slice(0,20)+"...":s)+"'";},unrender:function B(s){this.ghost=null;this.hideTooltip();this.min=0;this.max=(this.items&&this.items.length-1)||0;var t=this.dndNode,u=this.__mouseDownEvt,q=this.__touchstartEvt;if(u&&t){Q.detachEvent(t,"mousedown",u);}if(q&&t){Q.detachEvent(t,"touchstart",q);}W.call(this);this._super(s);},onselectionChange:function L(){var q=this.selectedIndices,s=R.isEmpty(q);if(q){this.set("max",s?this.items.length-1:R.max(q,false,true));this.set("min",s?0:R.min(q,false,true));if(this.typeHelper){this.typeHelper.updateThumb();}}if(this.onchange){this.onchange();}}});mstrmojo.Slider.SINGLE_HANDLE_WIDTH=11;mstrmojo.Slider.SCROLLHANDLEWIDTH=11;}());(function(){mstrmojo.requiresCls("mstrmojo.DocTextfield","mstrmojo._HasTouchScroller","mstrmojo._TouchGestures");mstrmojo.android.DocTextfield=mstrmojo.declare(mstrmojo.DocTextfield,[mstrmojo._HasTouchScroller,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.DocTextfield",formatHandlers:{domNode:["T","D","fx","z-index"],valueNode:["B","F","P","background-color","text-align","white-space","overflow"]},scrollerConfig:{bounces:false,showScrollbars:false},updateScrollerConfig:function A(){var C=this.scrollerConfig,E=this.domNode,B=this.getFormats(),F=this.valueNode,D={Height:{a:"y",s:"v"},Width:{a:"x",s:"h"}},G={};if(B.overflow==="Scroll"||B.overflow==="auto"){C.scrollEl=F;E.style.overflow="hidden";F.style.display="inline-block";mstrmojo.hash.forEach(D,function(K,J){if(C["no"+K.s.toUpperCase()+"Scroll"]){return ;}var I=parseInt(B[J.toLowerCase()],10);if(isNaN(I)){I=E["client"+J];}var L=Math.max(F["offset"+J]-I,0),H=C[K.s+"Scroll"]=(L!==0);if(H){G[K.a]={start:0,end:L};}});C.offset=G;C.origin=C.origin||{x:0,y:0};}else{F.style.width=E.style.width;F.style.height=E.style.height;}return C;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.url","mstrmojo.DocTextfield");var I=mstrmojo.dom,K=mstrmojo.css,L=1,Q=2,A=3,N=4,P=5,E=6,B=1,D=["","CaptionOnly","IconOnly","IconLeft","IconRight","IconTop","Custom"];var M=[];M[L]=M[Q]=M[E]={minsp:0,mincs:0};M[A]=M[N]={minsp:10,mincs:5};M[P]={minsp:4,mincs:5};function F(W,S,Y,R,U){var Z=I.position(W),V=I.position(W.parentElement),X=W.style;R=R||{};R={t:R.t||0,r:R.r||0,b:R.b||0,l:R.l||0};R.h=V.h-R.t-R.b;R.w=V.w-R.l-R.r;if(U){if(Z.h>R.h){X.height=R.h+"px";}if(Z.w>R.w){X.width=R.w+"px";}Z=I.position(W);}if(S){X.top=((R.h-Z.h)/2+R.t)+"px";}if(Y){X.left=((R.w-Z.w)/2+R.l)+"px";}}function J(W,X,U){var S=document.createElement("img"),R=S.style;W.appendChild(S);I.attachEvent(S,"load",function(){var Y=R.display;R.display="block";F(S,true,true);R.display=Y;},true);S.className=U;var V=this.model.getDataService();S.src=(V&&V.getDocImage&&V.getDocImage(X))||X;}mstrmojo.DocButton=mstrmojo.declare(mstrmojo.DocTextfield,null,{scriptClass:"mstrmojo.DocButton",pressed:false,markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocButton {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocButton-Container" mstrAttach:click,mousedown><div class="mstrmojo-DocButton-IconNode"></div><div class="mstrmojo-DocButton-ValueNode" style="{@valueNodeCssText}">{@v}</div></div><div class="mstrmojo-DocButton-EffectOverlay"></div>{@buttonNodeMarkup}</div>',markupSlots:{iconNode:function(){return this.domNode.firstChild.firstChild;},valueNode:function(){return this.domNode.firstChild.lastChild;},buttonContainerNode:function(){return this.domNode.firstChild;}},markupMethods:{onpressedChange:function(){var R=!!this.pressed,V=this.defn,U=this.domNode,S=this.fmts;K.toggleClass(U,"pressed",R);this.setBackgroundColor();this.valueNode.style.color=R?V.fhlc:(S.color||"");},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["T","z-index","D","B","P","background-color"],valueNode:["font","fx","color","white-space","overflow"]},setBackgroundColor:function H(){this.domNode.style.backgroundColor=(!!this.pressed)?this.defn.bhlc:(this.fmts["background-color"]||"");},getAnchor:function O(){return this.domNode;},getDPI:function C(){return this.model.dpi;},buildRendering:function G(){this._super();var S=this.defn,l=this.domNode,W=this.buttonContainerNode,k=this.iconNode,q=this.valueNode,f=parseInt((S&&S.dpst)||1,10),g="px";K.toggleClass(l,D[f],true);l.onselectstart=l.ondragstart=function(){return false;};var d=this.getFormats(),Y=parseInt(K.getComputedStyle(W).borderWidth,10)*2;if(isNaN(Y)){Y=0;}var a=parseFloat(d.width)-Y,o=parseFloat(d.height)-Y,X=M[f],b=X.minsp,t=X.mincs,e,Z=k.style,j=q.style;function V(u,x){Z.width=u+g;Z.height=x+g;}var s=W.style;s.height=o+g;s.width=a+g;switch(f){case P:var U=this.getDPI(),R=o+K.getBorderWidths(d["border-width"],U).h+K.getPaddings(d.padding,U).h;e=Math.max(0,Math.min(o-b-t,R*0.6));V(a,e);F(k,false,true);F(q,true,false,{t:e+b},true);break;case A:case N:e=Math.max(0,Math.min(o,a-b-t));V(e,e);F(k,true,false);j[(f===A)?"left":"right"]=(e+b)+g;F(q,true,false);break;case L:F(q,true,false);break;case Q:case E:break;}if(B===parseInt(S.fe,10)){K.addClass(l,"gloss");}J.call(this,k,mstrmojo.url.getFullPath(S.nmurl),"normal");J.call(this,k,mstrmojo.url.getFullPath(S.hlurl||S.nmurl),"hilight");var p=document.createElement("div");K.addClass(p,"mstrmojo-DocButton-IconMaskNode");k.appendChild(p);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,getLayoutOffsets:function B(){return{h:2,w:2};},anchorSlot:"clickableNode",updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Popup","mstrmojo._HasBuilder","mstrmojo._IsAnchorable","mstrmojo.hash","mstrmojo.array","mstrmojo.dom");var M="mstrmojo-DocInfoWindow-tip",G=1,E=mstrmojo.dom,O=mstrmojo.hash,I=mstrmojo.array;$D=mstrmojo.dom,$A=mstrmojo.array;function H(W){var V=this.anchor,U=E.findWidget(V)||(V&&V.w),W=W||{};W.lockIW=U;return W;}function S(V){var U=V.model;return U.getLayoutDataCache(U.getCurrentLayoutKey())[V.psId];}function R(){var V=this.anchor,X=E.findWidget(V)||(V&&V.w),U=0;while(X){var W=X.className;if(W==="mstrmojo-DocInfoWindow"){U=mstrmojo.css.getStyleValue(X,"z-index");break;}X=X.parentNode||(X.domNode&&X.domNode.parentNode);}return U;}mstrmojo.DocInfoWindow=mstrmojo.declare(mstrmojo.Popup,[mstrmojo._HasBuilder,mstrmojo._IsAnchorable,mstrmojo._HasPopup],{scriptClass:"mstrmojo.DocInfoWindow",markupString:'<div class="mstrmojo-DocInfoWindow-wrapper @{waitState}"><div id="{@id}" class="mstrmojo-DocInfoWindow"></div><div class="'+M+' top"></div><div class="mstrmojo-DocInfoWindow-curtain" mstrAttach:click></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},tipNode:function(){return this.domNode.childNodes[1];},curtainNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.firstChild;}},boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:M,anchorOffset:1,anchorOrientation:"h",anchor:null,boundary:null,closeOnClick:true,autoCloseLocks:null,autoScrollCloseLocks:null,tipNodeColor:"",ontouchstart:function J(){this.close();},close:function N(){if(this.isAutoCloseLocked()){return ;}if(mstrApp&&mstrApp.isOIVM&&mstrApp.isOIVM()&&mstrApp.modalOpenEditors){if(Object.keys(mstrApp.modalOpenEditors).length>0){return ;}}this.model.raiseEvent({name:"infoWindowClosed",psKey:this.psKey});if(this._super){this._super();}if(this.anchor&&this.anchor.lockInfoWinId&&mstrmojo.all[this.anchor.lockInfoWinId]){mstrmojo.all[this.anchor.lockInfoWinId].releaseLock(this);}this.clearAnchorHilites();E.detachEvent(document,E.isFF?"DOMMouseScroll":"mousewheel",this.mw);E.detachEvent(document,"scroll",this.mw);E.detachEvent(window,"resize",this._resizeHandler);},clearAnchorHilites:function C(){var U=mstrmojo.dom.findWidget(this.anchor);if(U&&U.clearHilites){if(U.parent&&U.parent.clearAllHighlights){U.parent.clearAllHighlights();}else{U.clearHilites(U.hiliteKey);delete U.hiliteKey;}}},prepareAnchor:function A(){if(this.children&&this.children[0]){var V=this.infoNode.style,W=this.children[0],X=W.dimNode||W.domNode,Y=X.offsetWidth,U=X.offsetHeight;V.width=(Y+2*G)+"px";V.height=(U+2*G)+"px";}},nudge:function L(){this.positionDialog();var U=this.containerNode.style;if(this.anchor){var V=parseInt(R.call(this),10);if(V){this.containerNode.style.zIndex=(V+2)+"";}}this.model.raiseEvent({name:"infoWindowRendered",id:this.id});},onRender:function F(){this.open(this.opener);},open:function K(b,W){var U=mstrmojo.all[this.psId];if(U){var Y=U.defn.sfp,e=U.selectedIdx;if(Y&&e!==0){U.switchToPanel(0,0);U.children[e].set("selected",false);}}if(this._super){this._super(b,H.call(this,W));}var X=function X(f){if(!f){return ;}if(f.defn&&f.defn.ifp){f.refresh();}I.forEach(f.children||[],function(g){X(g);});};X(U);if(mstrApp.isTablet&&mstrApp.isTablet()){var d=mstrmojo.touchManager,V=this.id,a=this.domNode;this._tchHandler=d.attachEventListener("touchesBegin",V,function(h){if(this.isAutoCloseLocked()){return ;}var g=mstrmojo.dom.contains(a,h.touch.target,true);var k=document.getElementsByClassName("heatmap-infobox"),f=(k&&k.length)||0,j,o=h.touch.target,l=false;for(j=0;j<f;j++){if(mstrmojo.dom.contains(k[j],o,true)){l=true;break;}}if(!g&&!mstrApp.hasOpenDialog()&&!l){this.closeOnTablet();}});}var Z=this;Z.mw=Z.mw||function(g){if(Z.isAutoScrollCloseLocked()){return ;}var f=E.eventTarget(self,g);if(Z.autoCloses&&!E.contains(Z.domNode,f,true,document.body)&&!(Z.isWithinParentWidget&&Z.isWithinParentWidget(f))){Z.close();}};Z._resizeHandler=function(f){Z.positionDialog(true);};E.attachEvent(document,E.isFF?"DOMMouseScroll":"mousewheel",Z.mw);E.attachEvent(document,"scroll",Z.mw);E.attachEvent(window,"resize",Z._resizeHandler);},getChildren:function D(){return[S(this)];},preBuildRendering:function B(){var W=S(this),V=W.defn.fmts;V.left=G+"px";V.top=G+"px";if(V.border){var U=V.border.split(" ");if(U.length>=3){this.tipNodeColor=U[2];}}if(this._super){this._super();}},postBuildRendering:function Q(){this.set("visible",true);if(this._super){this._super();}if(!this.closeOnClick){this.curtainNode.style.display="none";}},closeOnTablet:function P(){this.close();if(this._tchHandler){this._tchHandler.clear();}},postwaitStateChange:function(){var U=this.children[0],V=U.dimNode||U.domNode;if(!this.waitState&&!V){this.refresh();}},renderChildren:function(){if(!this.waitState){this._super();}},registerLock:function(U){var V=this.autoCloseLocks||[];if(I.indexOf(V,U.id)===-1){V.push(U.id);this.autoCloseLocks=V;}},releaseLock:function(U){I.removeItem(this.autoCloseLocks,U.id);},isAutoCloseLocked:function(){this.autoCloseLocks=I.filter(this.autoCloseLocks,function(U){return !!mstrmojo.all[U];});return this.autoCloseLocks.length>0;},openPopupMenu:function(V,U){this.openPopup(V,U);},registerScrollLock:function(U){var V=this.autoScrollCloseLocks||[];if($A.indexOf(V,U.id)===-1){V.push(U.id);this.autoScrollCloseLocks=V;}},releaseScrollLock:function(U){$A.removeItem(this.autoScrollCloseLocks,U.id);},isAutoScrollCloseLocked:function(){this.autoScrollCloseLocks=$A.filter(this.autoScrollCloseLocks,function(U){return !!mstrmojo.all[U];});return this.autoScrollCloseLocks.length>0;},destroy:function(){var U=mstrmojo.all[this.psId];if(U&&U.defn.iwpl===mstrmojo.DocInfoWindow.PLACEMENT.FIXED&&U.fmts){U.fmts.left=this._ifwfl+"px";U.fmts.top=this._ifwft+"px";}if(this._super){this._super();}}});mstrmojo.DocInfoWindow.PLACEMENT={AUTO:1,FIXED:2,ABOVE:3,BELOW:4,LEFT:5,RIGHT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo.num","mstrmojo.HBox","mstrmojo._IsAndroidInputControl","mstrmojo._TouchGestures");var X=mstrmojo.dom,O=X.attachEvent,P=X.detachEvent,b=mstrmojo.css,Q=mstrmojo.expr.DTP,M="mstrmojo.Button",R=mstrmojo.num,I=mstrmojo.validation.TRIGGER,d=50,L=500,A=10;function S(){var j=this;O(window,X.TOUCHSTART,j._evtHandler,true);j.isActive=true;}function W(){var j=this;P(window,X.TOUCHSTART,j._evtHandler,true);j.isActive=false;}function G(j){return j?parseFloat(j.toFixed(A)):j;}function e(){var l=this.numericValue,j=this.max,o=this.min,k=this.itv;if(!isNaN(l)){if(j!==undefined&&l-k>j){this.set("numericValue",j);}else{if(o===undefined||l-k>=o){this.set("numericValue",G(l-k));}else{if(l>o&&l-k<o){this.set("numericValue",o);}}}}}function K(){var l=this.numericValue,j=this.max,o=this.min,k=this.itv;if(!isNaN(l)){if(o!==undefined&&l+k<o){this.set("numericValue",o);}else{if(j===undefined||l+k<=j){this.set("numericValue",G(l+k));}else{if(l<j&&l+k>j){this.set("numericValue",j);}}}}}function D(j){if(j){K.call(this);}else{e.call(this);}}function g(j){var k=this;this._holdTimer=setInterval(function(){D.call(k,j);},d);}function B(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}}function h(j){var k=this;if(!this._holdTimer&&!this._startHoldTimer){this._startHoldTimer=setTimeout(function(){delete k._startHoldTimer;g.call(k,j);},L);}}function f(){if(this._startHoldTimer){clearTimeout(this._startHoldTimer);delete this._startHoldTimer;}B.call(this);}function F(j){var k=j.target;return(this.plusNode&&this.plusNode==k);}function E(j){var k=j.target;return(this.minusNode&&this.minusNode==k);}function J(){var j=this.numericValue;if(!isNaN(j)&&j>=this.min&&j<=this.max&&j!=this.value){this.set("value",j);}}function a(j){b.addClass(j,"touched");}function N(o){var j=o.max,l=o.min,k=o.itv;return{scriptClass:"mstrmojo.HBox",alias:"hBox",cssText:"margin:auto",children:[{scriptClass:M,alias:"minus",cssClass:"mstrmojo-StepperDIC-Operator minus",bindings:{enabled:function(){return this.parent.parent.numericValue>l;}}},{scriptClass:"mstrmojo.ValidationTextBox",cssClass:"mstrmojo-DataInputControl",dtp:Q.DOUBLE,required:true,alias:"textInput",constraints:{trigger:I.ONKEYUP|I.ONBLUR,max:j,min:l},bindings:{value:"this.parent.parent.numericValue"},onblur:function p(q){var s=this.parent.parent,t=R.parseNumeric(this.value);if(!s.isActive){J.call(this.parent.parent);}this._super&&this._super(q);},onValid:function(){this.parent.parent.set("numericValue",parseFloat(this.value));}},{scriptClass:M,alias:"plus",cssClass:"mstrmojo-StepperDIC-Operator plus",bindings:{enabled:function(){return this.parent.parent.numericValue<j;}}}]};}mstrmojo.android.inputControls.StepperDIC=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsAndroidInputControl,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.inputControls.StepperDIC",cssClass:"mstrmojo-StepperDIC",isActive:false,markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},init:function V(k){this._super&&this._super(k);this.max=this.dic.max;this.min=this.dic.min;this.itv=this.dic.itv;var j=parseFloat(this.value);this.set("numericValue",isNaN(j)?(this.min||0):j);this.set("children",N(this.dic));this.plus=this.hBox&&this.hBox.plus;this.minus=this.hBox&&this.hBox.minus;var l=this;this._evtHandler=this._evtHandler||function(o){var p=o.target;if(!X.contains(l.domNode,p)){X.stopPropogation(o.view,o);W.call(l);J.call(l);}};},postBuildRendering:function Z(){this._super();this.plusNode=this.plus&&this.plus.domNode;this.minusNode=this.minus&&this.minus.domNode;},touchTap:function(j){if(!this.isActive){S.call(this);}if(F.call(this,j)){a(this.plusNode);D.call(this,true);}else{if(E.call(this,j)){a(this.minusNode);D.call(this,false);}}},touchBegin:function U(j){if(!this.isActive){S.call(this);}if(F.call(this,j)){a(this.plusNode);h.call(this,true);}else{if(E.call(this,j)){a(this.minusNode);h.call(this,false);}}},touchEnd:function C(j){f.call(this);},unrender:function Y(j){if(this.isActive){W.call(this);}f.call(this);this._super(j);},setDirtyFlag:function H(k,j){mstrmojo.css.addClass(this.domNode.firstChild||j,"tx-active");}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasBuilder");mstrmojo.ToolBar=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder],{scriptClass:"mstrmojo.ToolBar",cellCssClass:"mstrmojo-ToolBar-cell",markupString:'<table id="{@id}" class="mstrmojo-ToolBar {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-ToolBar-outercell"><table class="mstrmojo-ToolBar-innertable" cellspacing="0" cellpadding="0"><tr>{@tableHtml}</tr></table></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0].firstChild.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildChildren:function A(){var B=this.buildConfig;if(!B){this.buildConfig={};B=this.buildConfig;}B.target=this.target;return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(L){if(L){return ;}var J=this.visible,K=J?"block":"none";this.editorNode.style.display=K;if(this.modal){this.curtainNode.style.display=K;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function F(){var J;var K=this.buttons;if(K&&!this.btnHbox){for(J in K){K[J].cssClass=(K[J].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:K},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function B(){var J=this.placeholder;if(this._super()){if(!this.parent&&!J){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function E(){var J=this.id;return function(){var K=mstrmojo.all[J];K.resizeDialog();K.positionDialog();};},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var K=this._resizeHandler=this.getResizeHandler();D.attachEvent(window,"resize",K);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(J){}return true;},resizeDialog:function G(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function C(){var K=this,O=K.curtainNode,J=document.body,M=document.documentElement,N=O.style,L=K.curtainPosition;N.width=Math.max(J.clientWidth,M.scrollWidth)+"px";if(L&&L.h){N.height=L.h+"px";}else{N.height=Math.max(J.clientHeight,M.scrollHeight)+"px";}if(L&&L.y){N.top=L.y+"px";}K.raiseEvent({name:"resizeCurtain"});},positionDialog:function H(){var K=this.editorNode,M=this.left,L=this.top;if(!M||!L){D.center(K);var J=K.style;if(this.alignment==="top"){J.top="10px";}if(M){J.left=M;}if(L){J.top=L;}}},destroy:function(K){var J=this._resizeHandler;if(J){D.detachEvent(window,"resize",J);}this._super(K);}});mstrmojo.toast=function I(O,M,Q,J){var P="mojoToast9",N,L=M||3000;if(J&&J.id){P=J.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(K){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.Label",cssClass:(J&&J.cssClass)?J.cssClass:"toastCss",text:O}).render();N=mstrmojo.all[P].domNode;if(J&&J.dom){J.dom.appendChild(N);}else{document.body.appendChild(N);D.bottomCenter(N);}window.setTimeout(function(){if(Q){Q();}try{mstrmojo.all[P].destroy();}catch(R){}},L);};mstrmojo.mask={show:function(){var J=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});J.render();document.body.appendChild(J.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.HBox","mstrmojo._HasBuilder","mstrmojo._CanMeasureChildren");function D(){return(this.renderMode!=="scroll")?this._super():true;}function C(){if(!this.hasRendered){return ;}var F=this.children||[],E=F.length-1;for(E;E>=0;E--){if(F[E].refresh){F[E].refresh();}}}mstrmojo.DocSection=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren],{scriptClass:"mstrmojo.DocSection",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSection" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},postBuildRendering:D,childRenderOnAddCheck:D,refresh:C,getWidth:function A(){return this._super(1);}});mstrmojo.DocSectionHoriz=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren],{scriptClass:"mstrmojo.DocSectionHoriz",postBuildRendering:D,childRenderOnAddCheck:D,refresh:C,getHeight:function B(){return this._super(1);}});}());(function(){mstrmojo.requiresCls("mstrmojo.rw.DocLayout","mstrmojo._Formattable","mstrmojo._HasWaitIcon","mstrmojo.dom");mstrmojo.DocLayout=mstrmojo.declare(mstrmojo.rw.DocLayout,[mstrmojo._Formattable,mstrmojo._HasWaitIcon],{scriptClass:"mstrmojo.DocLayout",formatHandlers:{domNode:["B","background-color","D","min-height","width"]},markupMethods:{onminHeightChange:function(){var N=this.minHeight;if(!N){var M=this.getFormats();N=M&&M["min-height"];}if(N){this.containerNode.style[mstrmojo.css.MINHEIGHT]=N;}}},getHeight:function E(){var M=0;mstrmojo.array.forEach(this.children,function(N){M+=N.getHeight();});return M||this.containerNode.offsetHeight;},getWidth:function I(){var M=this.children;return(M&&M.length)?M[0].getWidth():this.containerNode.offsetWidth;},preBuildRendering:function K(){var M=this.getFormats();if(M&&M["min-width"]!==undefined){M.width=M["min-width"];}this._super();},renderChildren:function L(){this._super();this.resizeOrReposition();},resizeOrReposition:function D(){var O=this.containerNode;if(!!this.defn.aw){var V=this.model.getAutoWidthIDs(),S=(V&&V.length)||0,Z=0,Y=mstrmojo.all,P;if(!S){return ;}for(P=0;P<S;P++){Z=Math.max(this._getWidgetRightMostPosition(Y[V[P]]),Z);}Z=Math.max(this.getLayoutMinWidth(),Z);if(Z>parseInt(this.getFormats().width,10)){O.style.width=Z+"px";}}var X=this.model.zt;if(mstrApp.isMobile&&X){var M=this.parent.domNode;if(M){var Q=this.model.controller,N=!!Q.orientation,a=0,W=this.parent,R=W.getHeight()-W.fixedHeaderNode.clientHeight-W.fixedFooterNode.clientHeight;if(X===2){if(!Q.toolBarDelegated){R-=Q.getBottomToolBarHeight();}a=Math.round(N?Math.max((R-this.getHeight()),0)/2:0)+"px";}O.style.margin=a+" auto";var U=this;window.setTimeout(function(){Q.nudgeWidget(U.id,{left:O.offsetLeft,top:O.offsetTop});},0);}}},getLayoutMinWidth:function F(){return 0;},_getWidgetRightMostPosition:function F(M){return parseInt(M.getFormats().left,10)+((M.getDim&&M.getDim().w)||M.domNode.offsetWidth);},renderCtrlsInViewport:function C(){this._super();this.resizeOrReposition();},adjustAutoWidth:function H(M){if(!this.defn.aw||!M){return ;}var O=this.containerNode.style,N=parseInt(O.width,10)||0;var P=this;window.setTimeout(function(){var Q=P._getWidgetRightMostPosition(M);if(Q>N){O.width=Q+"px";}},1);},_getModelChildNodes:function B(P,O,S,N,R){var Q=this.model.getNonFixedSections(P,O);var M=Q.length;N=isNaN(N)?M:N;S=S||0;if(S>0||N<M){Q=Q.slice(S,S+N);}return R?{nodes:Q,total:M}:Q;},getChildren:function G(O,N,Q,M,P){return this._getModelChildNodes(O||this.node,N||false,Q,M,P);},getCaptureDimensions:function J(){var N=this.domNode,M;if(!this.domNode){return null;}M=mstrmojo.dom.position(N);M.w=Math.min(N.offsetWidth,M.w);M.h=Math.min(N.offsetHeight,M.h);return M;},preserveChildDomOrder:false,postBuildRendering:function A(){if(window.mstrMobileApp!==undefined){this.defn.lastOrientation=mstrMobileApp.getOrientation();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui.PopupConfig","mstrmojo.css");mstrmojo.ui.editors.ToolbarPopup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.ToolbarPopup",popupConfig:null,anchorElement:null,autoCloses:false,locksHover:true,init:function B(C){this._super(C);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ToolbarPopup");this.popupConfig=new mstrmojo.ui.PopupConfig({isHostedWithin:false,hostProxyCssClass:(mstrApp&&mstrApp.getThemeClassName())||"",anchorElement:this.anchorElement});},open:function A(D,C){D.closePopup();this._super(D,C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.string","mstrmojo.ListBase","mstrmojo._IsList");var G=",",F=mstrmojo.string;mstrmojo.TableLayoutList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.TableLayoutList",cssClass:"mstrmojo-TableLayoutList",styleCssClass:"",itemIdField:"v",allowUnlistedValues:false,tableLayoutCssStyle:"auto",multiSelect:false,titleItems:null,items:null,itemsPerRow:0,getLeftEndTitle:function E(H){return"";},getRightEndTitle:function D(H){return"";},getTitleRowMarkup:function A(){var L=this.titleItems;if(L){var K='<tr><td class="left_text">'+this.getLeftEndTitle(-1)+"</td>",H=L.length,J=0,I;for(J;J<H;J++){I=L[J];K+='<td class="item_title" title="'+I+'">'+I+"</td>";}K+='<td class="left_text">'+this.getRightEndTitle(-1)+"</td></tr>";return K;}return"";},_markupPrefix:function(){return'<table class="tableLayoutList" style="table-layout:'+this.tableLayoutCssStyle+'" cellspacing="0" cellpadding="0"><tbody>'+this.getTitleRowMarkup();},_markupSuffix:function(){return"</tbody></table>";},getItemMarkup:function(L,I){var K='<{@tag} class="item {@cls}" idx="{@idx}" title="{@en@n}" style="{@style}">{@en@n}</{@tag}>',H=this.getLeftEndTitle(I),J=this.getRightEndTitle(I),M=this.itemsPerRow;H='<td class="left_text" title="'+H+'">'+H+"</id>";J='<td class="right_text" title="'+J+'">'+J+"</id>";if(M>0){K=(I%M===0?"<tr>"+H:"")+"<td>"+K+"</td>"+((I+1)%M===0?J+"</tr>":"");}else{K='<td><div class="item_wrapper" idx="'+I+'">'+K+"</div></td>";if(!I){K="<tr>"+H+K;}else{if(I===this.items.length-1){K=K+J+"</tr>";}}}return K;},_getItemNode:function(H){var I=this.itemsNode,K=this.itemsPerRow,J=(this.titleItems?1:0)+((K>0)?parseInt(H/K,10):0),L=1+((K>0)?(H%K):H);return I.rows[J].cells[L].firstChild;},init:function(H){this._super(H);mstrmojo.css.addWidgetCssClass(this,this.styleCssClass);},onchange:function B(){var J,I=[];if(!this.multiSelect){J=this.selectedItem.v;}else{var H;for(H in this.selectedIndices){I.push(this.items[H].v);}J=I.join(this.delim||G);}this.set("value",J);},postBuildRendering:function C(){this._super();var H=[];if(this.multiSelect){var J=this.value.split(G),I;for(I=0;I<J.length;I++){H.push({v:J[I]});}}else{H.push({v:this.value});}this.setSelectedItems(H);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._FillsBrowser","mstrmojo._HasLayout","mstrmojo._TouchGestures","mstrmojo.Box","mstrmojo.Label","mstrmojo.dom","mstrmojo.css","mstrmojo.android.ui.ActionBarNative");var a=mstrmojo.css;mstrmojo.requiresDescs(2901,8445);function V(){var l="rootPortrait",j="rootLandscape",k=this.domNode;if(mstrApp.isLandscape()){var h=l;l=j;j=h;}a.removeClass(k,j);a.addClass(k,l);}mstrmojo.android.ui.RootView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser,mstrmojo._HasLayout,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.RootView",markupString:'<div id="{@id}" class="mstrmojo-RootView {@cssClass}" style="{@cssText}" ><div class="mstrmojo-RootView-title"></div><div class="mstrmojo-RootView-content"></div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},layoutConfig:{h:{titleNode:"auto",containerNode:"100%"},w:{titleNode:"100%",containerNode:"100%"}},actionBar:null,preBuildRendering:function D(){a.addClass(document.body,"dpi"+mstrMobileApp.getDeviceDPI());if(!this.msgBox){var j=this.msgBox=new mstrmojo.Box({placeholder:"mainAppMsg",cssClass:"mstrmojo-RootViewMessage",cssText:"left:-10000px;",children:[{scriptClass:"mstrmojo.Label",alias:"lbl",text:mstrmojo.desc(2901,"Loading...")}]});j.render();}var h=mstrApp.viewFactory,k=[h.newView("Switcher",{slot:"containerNode",alias:"switcher"})];if(mstrApp.isActionBarNative()){this.actionBar=new mstrmojo.android.ui.ActionBarNative();}else{k.push(h.newView("ActionBar",{slot:"titleNode",alias:"actionBar",controller:mstrmojo.all[this.controllerId]}));}this.addChildren(k);return this._super();},postBuildRendering:function Z(){V.call(this);var h=this.titleNode;if(!this._tchHandler){this._tchHandler=mstrmojo.touchManager.attachEventListener("actionBarMenuStateChange",this.id,function(j){if(j.value){a.addClass(h,"top");}else{a.removeClass(h,"top");}});}return this._super();},unrender:function X(h){if(this._tchHandler){mstrmojo.touchManager.detachEventListener(this._tchHandler);delete this._tchHandler;}this._super(h);},setNavigation:function e(j,h){this.actionBar.setNavigation(j,h);},getTitleHeight:function B(){return this.titleNode.offsetHeight;},clearNavigation:function O(){this.actionBar.clearNavigation();},restoreNavigation:function Y(){this.actionBar.restoreNavigation();},selectNavigationItem:function G(h){return this.actionBar.selectNavigationItem(h);},hasNavigationItems:function Q(){return this.actionBar.hasNavigationItems();},reset:function b(){this.actionBar.reset();},setContent:function J(h,j){this.reset();this.switcher.switchView(h,j);},contentUpdated:function N(){this.reset();},setTitle:function M(h){this.actionBar.updateTitle(h);},setActionToolbar:function P(j,h){this.actionBar.updateToolbar(j,h);},setActionToolbarStatus:function I(h){this.actionBar.setActionToolbarStatus(h);},setUpStatus:function f(h){this.actionBar.setUpStatus(h);},updateLastOpened:function S(h){this.actionBar.setLastOpened(h);},monitorWindow:function F(){var h=mstrApp.getScreenDimensions();this._super({currentTarget:{innerWidth:h.w,innerHeight:h.h}});V.call(this);mstrmojo.all[this.controllerId].set("orientation",(mstrMobileApp.getOrientation()===mstrmojo.android.EnumOrientationTypes.PORTRAIT)?1:0);window.setTimeout(function(){mstrMobileApp.setWaitScreenVisibility(false);},0);},setDimensions:function U(l,k){this._super(l,k);var j=this.msgBox;j.set("height",this.height);j.set("width",this.width);},getBrowserDimensions:function(){var j=mstrApp.getScreenDimensions(),h="px";return{h:j.h+h,w:j.w+h};},getContentDimensions:function d(){var h=this.containerNode;return{h:h.clientHeight,w:h.clientWidth};},showMessage:function L(h){mstrMobileApp.showProgress([h||mstrmojo.desc(8445,"Loading")],false);},showHTMLProgress:function K(p){var l=this.msgBox,o=l.domNode.style,k=l.lbl,j=k.domNode,h=j.style;k.set("text",p||mstrmojo.desc(2901,"Loading..."));h.left=Math.round(parseInt(this.width,10)/2-j.offsetWidth/2)+"px";h.top=Math.round(parseInt(this.height,10)/2-j.offsetHeight/2)+"px";o.left=0;o.top=0;a.addClass(l.domNode,"active");o.opacity=1;},hideMessage:function R(){mstrMobileApp.hideProgress();},hideHTMLProgress:function H(){var h=this.msgBox.domNode,j=h.style;j.opacity=0;j.left="-10000px";a.removeClass(h,"active");},enterFullScreen:function W(){this.actionBar.enterFullScreen();},flashFullScreen:function g(){this.actionBar.flashFullScreen();},exitFullScreen:function E(h){this.actionBar.exitFullScreen(h);},cancelFlashFullScreen:function A(){return this.actionBar.cancelFlashFullScreen();},propogateMenuVisibleChange:function C(h){this.actionBar.propogateMenuVisibleChange(h);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout");mstrmojo.Overlay=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onheightChange:function(){this.domNode.style.height=this.height?this.height:"";},onwidthChange:function(){this.domNode.style.width=this.width?this.width:"";}},layoutConfig:{h:{containerNode:"100%"},w:{containerNode:"100%"}},scriptClass:"mstrmojo.Overlay"});})();(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._TouchGestures");mstrmojo.ui.MobileStepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.ui.MobileStepper",onclick:function D(I){if(!mstrApp.isTouchApp()){this._super(I);}return false;},onmousedown:function A(I){if(!mstrApp.isTouchApp()){this._super(I);}return false;},onmouseup:function C(I){if(!mstrApp.isTouchApp()){this._super(I);}return false;},touchSelectBegin:function B(I){this.startStepperInterval(I,"touchTap");},touchSelectEnd:function G(I){this.stopStepperInterval();},touchTap:function F(I){this.processEvent(I.target);},touchBegin:function H(J){var I=J.target;if(I===this.nextNode||I===this.prevNode){mstrmojo.css.addClass(I,"glow");}},touchEnd:function E(J){var I=J.target;if(I===this.nextNode||I===this.prevNode){mstrmojo.css.removeClass(I,"glow");}}});mstrmojo.ui.MobileStepper.prototype.markupString=mstrmojo.ui.MobileStepper.prototype.markupString.replace(",mousedown,mouseup","");}());(function(){mstrmojo.requiresCls("mstrmojo.TristateCheckBox","mstrmojo._IsInputControl");mstrmojo.CheckBoxDIC=mstrmojo.declare(mstrmojo.TristateCheckBox,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.CheckBoxDIC",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" tabindex="1" mstrAttach:click,keydown></div>',cssText:"width: 0; margin:0 auto; max-height: 18px; cursor: pointer;",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);this.set("checked",true);}else{this.set("checked",!this.checked);}},oncheckedChange:function(A){this.set("value",this[this.checked?"onValue":"offValue"]);},preBuildRendering:function(){this._super();var A=this.dic.vls;this.offValue=A[0].v;this.onValue=A[1].v;this.grayed=(this.onValue!==this.value)&&(this.offValue!==this.value);this.checked=(this.onValue===this.value);},postBuildRendering:function(){var B=this.domNode,D=B.style,C=this.openerStyle,A;this._super();D.height=C.ih+"px";},onkeydown:function(B){var A=B.hWin,C=B.e||A.event;if(C.keyCode===mstrmojo.Enum_Keys.SPACE){mstrmojo.dom.preventDefault(A,C);this.onclick();}},focus:function(){this.domNode.focus();}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.func","mstrmojo.vi.controllers.UICmdMgr");var X=mstrmojo.func,S=mstrmojo.hash,P=mstrmojo.array,M=mstrmojo.vi.controllers.UICmdMgr.STATES,J={SHARED:0,SEPARATE:1},N={AND:19,OR:20},e=function e(j,h){var f={},g=function(o,l){var k=[];if(!l){return o;}P.forEach((l||[]),function(p){k.push(p);});P.forEach((o||[]),function(q){var p=P.find(l,"id",q.id);if(!~p){k.push(q);}});return k;};S.forEach(h,function(k,l){f[l]=k;});S.forEach(j,function(k,l){f[l]=g(k,h[l]);});return f;},D=function D(f){var g=[];S.forEach(f,function(h){g.push({ft:N.AND,d:h});});return g;},K=function(g){var f={},h=function(j){var k=S.keyarray(j)[0];return{id:k,d:j[k][0]};};S.forEach(g,function(o){var l={},j=h(o),k=l[j.id];if(j.id){if(!k){l[j.id]=k=[];}k.push(j.d);}f=e(f,l);},this);return[{ft:N.OR,d:f}];},C=function C(k,q){var l=this.model,p,g=[],h=mstrmojo.vi.ui.rw.SelectionType,o=true,j=false,f=this;if(!q){q=this.getSelectionType();}if(!S.isEmpty(k)){if(q===h.METRICS){p=D.call(this,k);}else{p=K.call(this,k);}}S.forEach(p,function(s){o=false;var t=[];S.forEach(s.d,function(u,AB){if(f.isSupportViewFilterForSelection(AB)){j=true;var x=[],AA={id:AB,elems:x,fm:u[0].fm,v:P.map(u,function(w){return w.n;}).reverse()},z=l.getObjectInfo(AB);if(z){AA.t=z.t;AA.st=z.st;if(z.st===12033){AA.attId=z.attId;}}P.forEach((u||[]),function(w){x.push(w.id);});t.push(AA);}});if(t.length){g.push({ft:s.ft,d:t});}});g.hasElements=j;g.clearSelections=o;return g;},F=function F(h){var f=this.getContextMenuSelectionType(),g=[];g=C.call(this,h,f);return g;},a=function a(o,q){var l=this.selectorControl,h,g,p,k=this,j,f;if(l){if(o.clearSelections||o.hasElements){h=this.controller;if(q){g=h.model;f=l.navPage;j=g.getLayoutKeyByUnitKey(f);this.clearSelections();this.setSelectionCache();}l.exp=null;if(h.onGridSelector){p=function(){h.onGridSelector(k,{type:mstrmojo.EnumRWUnitType.GRID,ck:l.ck,tks:l.tks,cgb:S.valarray(l.cgb),ctlKey:l.ckey,sliceId:this.sid,isUConDS:l.isUConDS,isNavigation:q,layoutKey:j,panelKey:f,ct:l.ct,selections:o});};if(this.multiUnitCtrlInterval){window.clearInterval(this.multiUnitCtrlInterval);this.multiUnitCtrlInterval=null;}if(h.cmdMgr.state===M.BUSY){this.multiUnitCtrlInterval=window.setInterval(function(){if(h.cmdMgr.state!==M.BUSY){window.clearInterval(k.multiUnitCtrlInterval);if(!k.destroyed){k.multiUnitCtrlInterval=null;p();}}},1000);}else{p();}}}}},B=function B(h){var f={type:mstrmojo.vi.ui.rw.SelectionType.ATTS,data:h},g=function(j,k){if(parseInt(j.fn,10)===22&&parseInt(k,10)===19){f.type=mstrmojo.vi.ui.rw.SelectionType.METRICS;}P.forEach((j.nds||[]),function(l){g(l,j.fn);});};g(h,null);return f;},b=function b(){return this.parent.model.getCurrentLayoutDef().cgbMap;},O=function O(){var f=b.call(this),g=[];S.forEach(f,function(j,h){if(this.k===j){g.push(h);}},this);return g;},d=function d(){var f=this.controller&&this.controller.cmdMgr;if(f&&f.isUndoRedo()){return true;}return false;};mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",{_mixinName:"mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",selectorControl:null,multiUnitCtrlInterval:null,postBuildRendering:function Y(){if(this._super){this._super();}var f=mstrApp.isInVFConfigMode||this.isCustomSort?null:this.findSelectorControl();if(d.call(this)){this.clearSelections();}if(f&&!f.isNavigation&&!S.isEmpty(f.exp)&&this.addSelectionsFromExpression){this.addSelectionsFromExpression(B(f.exp));if(this.highlight){this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},getSelectorDataFromExpression:B,getSelectionDataTree:C,getContextMenuSelectionDataTree:F,deleteSelectorControl:function E(){if(this._super){return this._super();}this.throwAbstractMethodError("deleteSelectorControl");},findSelectorControl:function W(){if(this._super){return this._super();}this.throwAbstractMethodError("findSelectorControl");},handlesMultiSelection:function H(f){return(this._super&&this._super(f))||!!this.selectorControl;},isSupportViewFilterForSelection:function I(g){var f=this.model;return f.supportsViewFilterActions(g);},isLinkedFilter:function(){var f=this.findSelectorControl&&this.findSelectorControl();return f&&f.isNavigation;},isLinkedFilterEnabled:function(){return this.isLinkedFilter()&&this.getContextMenuSelectionHash&&!S.isEmpty(this.getContextMenuSelectionHash());},handleContextMenuSelectionData:function G(f){this.isNavigation=f;this.onContextMenuSelectionChange(this.getContextMenuSelectionHash&&this.getContextMenuSelectionHash());},onSelectionChange:function Q(g){var k=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),j=false,h=this.isNavigation;if(h){delete this.isNavigation;}if(this._super){j=this._super(g);}if(!h&&this.isLinkedFilter()){return true;}if(k.length>0){this.singleUnitSelect();j=true;}else{if(!!this.selectorControl&&!this.isCustomSort){var f=C.call(this,g);a.call(this,f,h);return true;}}return j;},onContextMenuSelectionChange:function L(g){var k=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),j=false,h=this.isNavigation;if(h){delete this.isNavigation;}if(this._super){j=this._super(g);}if(!h&&this.isLinkedFilter()){return true;}if(k.length>0){this.singleUnitSelect();j=true;}else{if(!!this.selectorControl){var f=F.call(this,g);a.call(this,f,h);return true;}}return j;},singleUnitSelect:function A(){if(this._super){this._super();}},clearAllSelections:function V(){return this.selectorControl&&this.selectorControl.showall;},onClearBrushing:function Z(f){if(this.selectorControl){return true;}if(this._super){return this._super(f);}return false;},getFilterType:function R(){return this.defn.ins||J.SHARED;},switchFilterType:function U(w){var p=this,u,q=p.getFilterType(),l=p.parent.model,k,j={actions:[]},x,h=b.call(p),f,o=false,s,AB,t,AA,g;if(q!==w){u=O.call(p);s=l.getCurrentLayoutDef().units;if(u.length&&q===J.SHARED){x=P.filterOne(u,function(AC){AB=s[AC];if(AB){t=AB.scs||[];return true;}k=l.getSourceControls(p.parent,AC);t=k;return k.length;});if(!k||!k.length){k=l.getSourceControls(p.parent,x);k=P.filter(k,function(AC){AA=AC.control.key;return !P.find(t,"ckey",AA);});t=t.concat(k);}P.forEach(t,function(AC,AD){if(AD!==0){f=l.getNextKey();h[f]=p.k;j.actions.push(l.redoFilterAssociations(true,AC.ckey||AC.control.ckey,AC.pnk||AC.sourceKey,p.k,x,f));o=true;}}.bind(p));}else{g="";P.forEach(u,function(AC){AB=s[AC];if(!AB){k=l.getSourceControls(p.parent,AC);AB=k.length&&k[0];if(!AB){return true;}AB.pnk=AB.sourceKey;AB.ckey=AB.control.ckey;}if(!g){g=AC;}else{delete h[AC];t=(AB.scs&&AB.scs[0])||AB;j.actions.push(l.redoFilterAssociations(false,t.ckey,t.pnk,p.k,AC,g));o=true;}}.bind(p));}j.actions.push(l.getUnitFormatAction(p,1,{FormattingSelector:{IndependentNodeSelector:w}},true));var z=false;j.callback=({success:function(){p.defn.ins=z?q:w;z=!z;}});if(o){j.callback=X.wrapMethods(j.callback,l.getRebuildCallback());}}j.extras={style:{params:{treesToRender:3}}};return j;}});}());(function(){mstrmojo.requiresCls("mstrmojo.CheckBoxDIC","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.android._HasPreviewButton","mstrmojo.dom","mstrmojo.css");var K=24,U=36,D=48,A={160:K,213:K,240:U,320:D},V={160:48,213:48,240:73,320:98},B=300,R=mstrmojo.css,O=mstrmojo.dom;function I(W){this.btnNode.innerHTML=W?this.onText:this.offText;R.toggleClass(this.btnNode,"on",W);R.toggleClass(this.btnNode,"off",!W);}function E(){if(this._animHandle){window.clearTimeout(this._animHandle);delete this._animHandle;}}function J(Z,Y){this._scroller.origin.x=Y;if(!Z){return ;}var W=this.scrollNode.style,X=this;this._isAnimating=true;W[O.CSS3_TRANSITION_DURATION]=Z+"ms";W[O.CSS3_TRANSFORM]=O.createTranslateString(-Y);this._animHandle=window.setTimeout(function(){if(X._isAnimating){X._isAnimating=false;}E.call(X);},Z*3);}mstrmojo.android.inputControls.CheckBoxDIC=mstrmojo.declare(mstrmojo.CheckBoxDIC,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.CheckBoxDIC",cssText:"cursor:pointer;",cssDisplay:"inline-block",onText:"ON",offText:"OFF",isSwitchStyle:false,markupString:'<div id="{@id}" class="mstrmojo-Label mstrmojo-CheckBoxDIC {@cssClass}" style="{@cssText}" mstrAttach:click,keydown><div class="checkBox-android-wrapper"><div class="checkBox-android-scrollable"><div class="checkBox-androidMobile-button off"></div><div class="checkBox-label-text"></div></div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.firstChild.lastChild;},btnNode:function(){return this.domNode.firstChild.firstChild.firstChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){this.textNode.innerHTML=(this.text!=null)?this.text:"";}},mstrmojo.hash.copy(mstrmojo.CheckBoxDIC.prototype.markupMethods)),init:function N(X){this._super&&this._super(X);if(this.dic.stl==0){this.isSwitchStyle=true;var W=mstrMobileApp.getDeviceDPI();this.maxOffsetX=V[W];this.scrollerConfig={showScrollbars:false,showIndicators:false,vScroll:false,hScroll:true,bounces:false,useTranslate3d:false,offset:{x:{end:this.maxOffsetX,start:0},scrollPast:false}};this.minHeight=A[W]||K;}},updateScrollerConfig:function S(){if(!this.isSwitchStyle){return ;}var W=this._super(),X=this.checked?0:(this.maxOffsetX||0);mstrmojo.hash.copy({scrollEl:this.scrollNode,origin:{x:X,y:0}},W);return W;},updateScroller:function G(W,X){if(!this.isSwitchStyle){return ;}this._super(W,X);},initScroller:function M(W){if(!this.isSwitchStyle){return ;}this._super(W);var X=this;W.attachEventListener("scrollMoved",this.id,function(Y){this._translateX=Y.x;I.call(X,(Y.x<X.maxOffsetX/2));});},oncheckedChange:function H(W){if(this.isSwitchStyle){if(this.checked&&this._scroller.origin.x!==0){J.call(this,B,0);}else{if(!this.checked&&this._scroller.origin.x!==this.maxOffsetX){J.call(this,B,this.maxOffsetX);}}I.call(this,this.checked);}this._super&&this._super(W);},preBuildRendering:function C(){this.cssClass=this.isSwitchStyle?"Android-tristate-mobile":"Android-tristate";var W;switch(this.owner.getFormats()["text-align"]){case"center":W="50%";break;case"right":W="100%";break;}if(W){this.cssText+="background-position:"+W+" 50%;";}return this._super();},postBuildRendering:function Q(){this._super();if(this.isSwitchStyle){I.call(this,this.checked);this.domNode.style.height=(this.openerStyle.ih>this.minHeight?this.openerStyle.ih:this.minHeight)+"px";}},touchTap:function P(W){this.onclick();},touchBegin:function L(W){if(!this.isSwitchStyle){return ;}if(this._isAnimating){W.stop();return false;}return this._super(W);},touchSwipeEnd:function(a){if(!this.isSwitchStyle){return ;}a.evt.handle=true;var Z=this._translateX,Y=(Z<this.maxOffsetX/2),W=Y?Z:(this.maxOffsetX-Z),X=W*B/this.maxOffsetX;J.call(this,X,Y?0:this.maxOffsetX);this.set("checked",Y);},setDirtyFlag:function F(X,W){if(this.isSwitchStyle){mstrmojo.css.addClass(this.domNode.firstChild||W,"tx-active");}else{this._super(X,W);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DateTimePicker","mstrmojo.ui.MobileStepper","mstrmojo._TouchGestures");var A="mstrmojo.ui.MobileStepper";mstrmojo.ui.MobileDateTimePicker=mstrmojo.declare(mstrmojo.DateTimePicker,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.ui.MobileDateTimePicker",stepperClass:"mstrmojo.ui.MobileStepper",onclick:function(B){this.touchTap(B.e);},touchTap:function(B){if(B.target===this.meridiemNode){this.set("meridiem",!this.meridiem);this.updateTime();}},touchBegin:function(B){if(B.target===this.meridiemNode){mstrmojo.css.addClass(B.target,"glow");}},touchEnd:function(B){if(B.target===this.meridiemNode){mstrmojo.css.removeClass(B.target,"glow");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TableLayoutList","mstrmojo.array");var A=mstrmojo.array;mstrmojo._IsTableLayoutListDIC=mstrmojo.provide("mstrmojo._IsTableLayoutListDIC",{_mixinName:"mstrmojo._IsTableLayoutListDIC",icnCss:"dicContainer",tableLayoutCssStyle:"fixed",setDirtyFlag:function(E,D){if(E.className!=="flag-container"){var C=document.createElement("div"),B=this.itemsNode&&this.itemsNode.clientWidth-8;C.className="flag-container";C.style.left=(B>0?B:0)+"px";C.innerHTML='<div class="dirty-cell"/>';D.insertBefore(C,E);}},zoomStyle:function(E,D,C,B){if(E!==1){A.forEach(D,function(H){H.style="";var J=window.getComputedStyle(H,null),I=J.getPropertyValue("width"),G=J.getPropertyValue("height"),F=J.getPropertyValue("background-position-x"),K=J.getPropertyValue("background-position-y");if(I&&G&&F&&K){H.style="width:"+parseFloat(I)*E+"px;height:"+parseFloat(G)*E+"px;background-position-x:"+parseFloat(F)*E+"px;background-position-y:"+parseFloat(K)*E+"px;background-size:"+C*E+"px "+B*E+"px;";}});}},zoomBackground:function(C,B){if(C!==1){A.forEach(B,function(E){E.style.backgroundPositionX="";E.style.backgroundPositionY="";var F=window.getComputedStyle(E,null),D=F.getPropertyValue("background-position-x"),G=F.getPropertyValue("background-position-y");if(D&&G){E.style.backgroundPositionX=parseFloat(D)*C+"px";E.style.backgroundPositionY=parseFloat(G)*C+"px";}});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.alert","mstrmojo.css","mstrmojo.desc","mstrmojo.dom","mstrmojo.Label","mstrmojo.ui.editors.ToolbarPopup","mstrmojo.vi.models.EnumFieldTypes");var E=mstrmojo.dom,F=null;function D(I){var H=1;if(I.tstp===769){H=2;}else{if(I.tstp===774){H=3;}}return H;}function B(L){var H=mstrApp.name,K=H+"?",I=-1,J=function(N,M){K+=N+"="+M+"&";};if(!!L){switch(L.ttp){case 3:J("evt","4001");J("reportID",L.tid);I=D(L);if(I!==-1){J("reportViewMode",I);}break;case 55:if(L.tstp===14080){J("evt","32001");J("documentID",L.tid);}else{if(L.tvmd&(8192|2048)&&!((L.tvmd&2048&&mstrApp.features["run-vi-flash"]))){J("evt","3140");J("documentID",L.tid);if(E.isIE6||E.isIE7||E.isIE8){mstrmojo.alert(mstrmojo.desc(15474,"To work with HTML5 dossiers, please turn off your browser Compatibility View or update your browser to one of the following browser versions: Chrome, Firefox, Safari, Internet Explorer 9 or above."));return null;}}else{J("evt","2048001");J("objectID",L.tid);J("visMode","0");}}break;}}return K;}mstrmojo._HasDocLink=mstrmojo.provide("mstrmojo._HasDocLink",{_mixinName:"mstrmojo._HasDocLink",url:"",target:"",linkEnabled:true,ifw:"",update:function G(H){var I=H.defn;this.url=H.data.url||I.url;if(I.target){this.target=I.target;}if(I.ifw){this.ifw=I.ifw;}this._super(H);},postBuildRendering:function A(){if(this.url||this.ifw){mstrmojo.css.addClass(this.domNode,"hasLink");}var I=this.controller&&this.controller.view,H=I&&I.getCurrentLayout&&I.getCurrentLayout();if(H&&H.addLinkInfo){H.addLinkInfo(this.id,{url:this.url,target:this.target,src:this});}return this._super();},setLinkEnabled:function C(L){this.linkEnabled=L;var K=this.domNode;if(!K){return ;}var M=K.childNodes,J=M[M.length-1],H=this.id+"_mask",I=(J.id===H)?J:null;if(L){if(I){K.removeChild(I);delete this._mask;}}else{if(!I){I=document.createElement("div");I.className="mstrmojo-DocLinkMask";I.id=H;I.innerHTML="&nbsp;";K.appendChild(I);}}},cancelDocLink:false,onclick:function(I){if(F===null){var J=this,H=function(){if(J.linkEnabled&&!J.isEditing){var S=J.drillLinkItems,R=S&&S[0],K=J.url||(R&&R.url),M=J.node&&J.node.data,L=M&&M.navpage,Q=J.model,O=mstrmojo.desc(15704,'Go to "#"'),P;if(J.ifw){Q.showInfoWin(J.ifw,(J.getAnchor&&J.getAnchor())||J.domNode,"v",true);}else{if(K){O=O.replace("#",K);P=function(){Q.executeLink(K,J.target,J);};}else{if(M&&M.tid&&!mstrApp.isSingleTier){K=B(M);if(!!K){O=O.replace("#",M.tnm);P=function(){Q.executeLink(K,J.target,J);};}}else{if(L){O=O.replace("#",M.navpagenm);P=function(){Q.raiseEvent({name:"layoutSelected",panelKey:L,layoutKey:Q.getLayoutKeyByUnitKey(L)});};}}}}if(P){if(!mstrApp.isVI||mstrApp.isAppStatePresentation()){P();return ;}var U=J.parent,N=J._menu,V=function(W){if(W===mstrmojo.vi.models.EnumFieldTypes.IMAGE){return mstrmojo.desc(10502,"Edit image");}return mstrmojo.desc(16163,"Edit text");};if(!N){N=J._menu=new mstrmojo.ui.editors.ToolbarPopup({anchorElement:U,autoCloses:true,cssClass:"link-action-cfg",children:[{scriptClass:"mstrmojo.Label",alias:"nav",cssClass:"link nav",cssDisplay:"inline",text:O,onclick:function(){P();this.parent.close();}},{scriptClass:"mstrmojo.Label",cssClass:"separator",cssDisplay:"inline-block",text:"|"},{scriptClass:"mstrmojo.Label",alias:"edit",cssClass:"link",cssDisplay:"inline-block",popupHost:U,text:V(U.hostType),onpopupHostChange:function(){this.set("text",V(this.popupHost.hostType));},onclick:function(){this.parent.close();this.popupHost.switchToEditMode();}}]});}else{N.nav.set("text",O);N.nav.set("onclick",function(){P();this.parent.close();});N.edit.set("popupHost",U);}N.popupConfig.position=E.getMousePosition(I.e,I.hWin);U.openPopup(N);}}};F=window.setTimeout(function(){if(!J.cancelDocLink){H();}J.cancelDocLink=false;F=null;},200);}},hasActiveLink:function(){if(this.linkEnabled){var K=this.drillLinkItems,H=K&&K[0],J=this.url||(H&&H.url),I=this.node&&this.node.data;if(I){if(I.tid&&!mstrApp.isSingleTier){return true;}if(I.navpage){return true;}}if(J){return true;}}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayout");function F(P){var N=-1,O=P.children,M,L,K,I,J=[],H=function(){var R;for(R in J){var Q=J[R];if(Q._fixedHeight!==N){Q._fixedHeight=N;if(Q.domNode){Q.domNode.style.height=N+"px";}}}N=-1;J=[];};for(L in O){M=O[L];if(M&&M.node&&M.node.data&&M.node.data.bh&&N>-1){H();}if(M&&M.defn&&M.defn.horiz){for(K in M.children){I=M.children[K];N=Math.max(I._fixedHeight||0,N);J[J.length]=I;}}}H();}mstrmojo.DocLayoutHoriz=mstrmojo.declare(mstrmojo.DocLayout,null,{scriptClass:"mstrmojo.DocLayoutHoriz",markupString:'<div id="{@id}"><div class="mstrmojo-DocLayout {@cssClass}" style="{@domNodeCssText}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},getWidth:function A(){return this.containerNode.offsetWidth;},getHeight:function G(){return this.containerNode.offsetHeight;},_renderSection:function C(L,I){if(L.node.data.bh||(L.defn.horiz&&!this._horizOpen)){this._horizOpen=true;var M=document.createElement("div");M.className="mstrmojo-DocLayout-HBox";var J=document.createElement("table");J.className="mstrmojo-DocLayout-HBox-HorizContainerTable";this._hRow=J.insertRow(-1);M.appendChild(J);this.containerNode.appendChild(M);}if(L.defn.horiz){var H="hi"+I;L.slot=H;var N=this._hRow.insertCell(-1);N.vAlign="top";var K={};K[H]=N;this.addSlots(K);}else{if(this._horizOpen){this._horizOpen=false;}}this._super(L,I);},getLayoutMinWidth:function B(){var I=0,Q=0,J=this.children,P=J.length,N,M;for(N=0;N<P;N++){var O=J[N],L=O&&O.node,H=L&&L.data,K=H&&(String(H.bh)==="true"||String(H.bv)==="true");if(K){I=Math.max(I,Q);Q=0;}if(O.children){for(M in O.children){Q+=O.children[M].getWidth();}}else{Q+=10;break;}}return Math.max(I,Q);},resizeOrReposition:function E(){if(this._super){this._super();}F(this);},renderCtrlsInViewport:function D(){this._super();F(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo._IsAnchorable");var A=mstrmojo.dom,B=mstrmojo.array;mstrmojo.VisHeatMapPopupPanel=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VisHeatMapPopupPanel",title:"",markupString:'<div id="{@id}" class="heatmap-popup-panel" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},initialized:false,naviAction:null});mstrmojo.VisHeatMapAnimation=(function(){var C=[];return{animate:function(H,L,J,P,I,Q){var G;var M=C.length;for(var K=0,O=C.length;K<O;K++){if(!C[K]){M=K;continue;}if(C[K].node===H&&C[K].propName===L){(C[K].finalize(false));G=C[K];break;}}if(!G){G={};G.node=H;G.index=M;G.propName=L;C[M]=G;}var F=(new Date()).getTime();var I=I||500;var E=20;var D=null;G.finalize=function(R){clearInterval(D);D=null;if(P.r!==undefined){P.a=P.a||1;H.style[L]="";}else{if(P.px!==undefined){H.style[L]=P.px+"px";}}if(R){delete C[this.index];}if(Q){Q();}};function N(){var R={};var S=(new Date()).getTime();var V=S-F;if(V>=I){G.finalize(true);return ;}for(var U in J){R[U]=(P[U]-J[U])*V/I+J[U];if(U!=="a"){R[U]=Math.round(R[U]);}}if(R.r){R.a=R.a||1;H.style[L]="rgba("+R.r+","+R.g+","+R.b+","+R.a+")";}else{if(R.px){H.style[L]=R.px+"px";}}}D=setInterval(N,E);}};})();mstrmojo.VisHeatMapPopup=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VisHeatMapPopup",fadeOnClose:false,autoClose:true,markupString:'<div style="display: -webkit-box; -webkit-box-align: start; -webkit-box-pack: center;position:absolute; left:0px; top:0px; z-index:100000; width: 100%; height:100%;"  id={@id} mstrAttach:mouseup,touchend><div id={@id} style=" position:relative; left: 0px; top: 0px; width:{@width}; background-color:#F5F5F5;z-index:100001;border:2px solid rgba(0, 0, 0, 0.1);-webkit-box-shadow:rgba(0, 0, 0, 0.45) 2px 2px 8px;"><div  class="heatmap-popup-panel-title" style="display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: center;position:relative; -webkit-box-sizing: border-box; margin-bottom:6px; padding-right: 25%; height:65px; width:100%; line-height:65px;vertical-align:bottom;color:#33b5e5;"></div><div style="height: 2px;width:100%;background-color:#33b5e5"></div><div style="width:100%; height:auto; position:relative;overflow:hidden; display: -webkit-box; -webkit-box-orient: horizontal"></div></div><div style="position:absolute;z-index:100000;top:0px;left:0px;width:100%;height:100%;background: rgba(0, 0, 0, 0.5);"></div></div>',markupSlots:{contentNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.lastChild;},curtainNode:function(){return this.domNode.lastChild;}},baseTipClass:"heatmap-editor-tip",anchorOffset:42,hasCloseButton:true,goBack:function(){return this.close();},close:function(){this.domNode.style.webkitTransform="translate(-100000px,0px)";this.destroy();return true;},destroy:function(){if(this.onClose){this.onClose();}if(this._super){this._super();}},postBuildRendering:function(){this._super();for(var D=0,C=this.panels.length;D<C;D++){if(D!==0){var F=document.createElement("div");F.style.cssText="position:relative;width:1px;color:grey;height:35px;text-align:center;background-color:grey;";this.titleNode.appendChild(F);}var F=document.createElement("div");F.style.cssText="-webkit-box-flex:1; line-height:65px;text-align:center; display: -webkit-box; -webkit-box-align: center; -webkit-box-pack: center; height:100%;";if(D==0){F.style.cssText+="margin-left:16px;";}else{F.style.cssText+="margin-right:16px;";}F.setAttribute("panel",D);F.innerText=this.panels[D].title;this.titleNode.appendChild(F);}var E=this;document.body.appendChild(this.domNode);this.panelStack=this.defaultIndex?this.defaultIndex:0;this.navigateTo(this.panelStack);this.contentNode.style.marginTop=parseInt((document.body.offsetHeight-this.contentMaxHeight-this.titleNode.offsetHeight)/2)+"px";},onmouseup:function(D){if(D.e.target===this.curtainNode){this.close();return ;}var E=mstrmojo.dom.findAncestorByAttr(D.e.target,"panel",true,this.domNode);if(!E){return ;}E.node.style.backgroundColor="rgba(51, 181, 229, 0.6)";var F=function(){mstrmojo.VisHeatMapAnimation.animate(E.node,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};var C=this;setTimeout(function(){setTimeout(function(){C.navigateTo(E.value);F();},0);},0);},ontouchend:function(C){this.onmouseup(C);},highlightTitle:function(E){E=2*parseInt(E);if(isNaN(E)){return ;}var F=this.titleNode.childNodes,C=F.length;for(var D=0;D<C;D+=2){if(D!=E){F[D].style.borderBottom="";}else{F[D].style.borderBottom="solid 6px #33b5e5";}}},panelStack:0,navigateTo:function(I){if(this.owner&&this.owner.props){this.owner.props.navigatingIndex=I;}this.highlightTitle(I);var E=this.panels[I];var J=this.panelStack;var C=this.panels[J];if(I!=J){if(C.hasRendered){C.domNode.style.display="none";}}if(!E.hasRendered){this.panels[I]=new mstrmojo.VisHeatMapPopupPanel(this.panels[I]);var E=this.panels[I];this.addChildren(E);this.renderChildren();}E.domNode.style.display="block";if(E.naviAction){E.naviAction();}if(J===I){delete E.domNode.style.webkitTransform;}else{var F=C.domNode.offsetWidth+"px";var H=E.domNode.offsetWidth+"px";var K=Math.max(parseInt(F),parseInt(H));delete E.domNode.style.webkitTransition;var G="";var D="";if(J<I){G="translate(-"+K+"px,0px)";D="translate(-"+K+"px,0px)";}else{G="translate("+K+"px,0px)";D="translate("+K+"px,0px)";}this.panelStack=I;}},animation:function(D,E,C){E.domNode.style.webkitTransform=C;D.domNode.style.webkitTransform=C;},dummy:true});})();(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo._IsAnchorable");var A=mstrmojo.dom,C=mstrmojo.array;mstrmojo.android.Popup=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsAnchorable],{scriptClass:"mstrmojo.android.Popup",fadeOnClose:false,autoClose:true,init:function E(J){this._super(J);if(this.anchor){mstrmojo.css.addWidgetCssClass(this,"anchor");}},addChildren:function I(L,J,K){this._super(L,J,K);C.forEach(this.children,function(M){if(M.isElastic){this._elasticChild=M;return false;}},this);},resizeDialog:function D(){var Q=this.editorNode,M=mstrApp,J=M.getScreenDimensions(),P=Math.round(J.h*0.9),U=J.w,R;U=U*0.85;if(M.isTablet()){var N=this.popDimensions||{},S=mstrApp.getScreenDimensions();P=N.h||Math.min(Math.round(S.h*0.6),P);U=N.w||Math.min(Math.round(S.w*(mstrApp.isLandscape()?0.43:0.65)),U);}U+="px";var K=this._elasticChild;if(K&&K.visible){var L=K.elasticHeight;if(L){R=L;}else{if(K.getItemsContainerHeight){R=K.getItemsContainerHeight();}}}if(R===undefined){R=this.getAvailableContentSpace();P=Math.max(P,R+(this.titleNode.offsetHeight+this.buttonNode.offsetHeight));}else{R=Math.min(R,P-(this.titleNode.offsetHeight+this.buttonNode.offsetHeight));}if(Q){Q.style.maxHeight=P+"px";this.set("width",U);}else{this.width=U;this.cssText=(this.cssText||"")+"max-height:"+P+"px;";}this.raiseEvent({name:"popupResized",maxheight:P,height:R,width:parseInt(U,10)});if(K&&K.visible){var O=K.height;if(O!==undefined&&O!=="auto"){K.set("height","auto");}K.set("height",R+"px");if(K.updateScroller){K.updateScroller();}}this._super();},getAvailableContentSpace:function B(){return Math.max(this.containerNode.offsetHeight,this.editorNode.clientHeight-this.titleNode.offsetHeight-this.buttonNode.offsetHeight);},close:function F(){if(this.onClose){this.onClose();}if(this.fadeOnClose){var J=this.domNode;if(J){var K=this.id;if(!A.isWinPhone){A.attachOneTimeEvent(J,A.CSS3_TRANSITION_END,function(){mstrmojo.all[K].destroy();});J.style.opacity=0;}else{(new mstrmojo.fx.FadeOut({onEnd:function(){mstrmojo.all[K].destroy();},target:J,duration:400})).play();}}}else{this.destroy();}},onclick:function G(J){if(this.autoClose&&J.e.target===this.curtainNode){this.close();}},ontouchend:function H(J){this.onclick(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo._IsAnchorable","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller");var B=mstrmojo.dom;function A(){mstrApp.closeDialog();}mstrmojo.Magnifier=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsAnchorable,mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.Magnifier",cssClass:"mstrmojo-magnifier anchor",markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}"><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-InfoViewer-Title"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-InfoViewer-Content"></div><div class="mstrmojo-InfoViewer-Buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',anchorOrientation:"h",anchorOffset:0,baseTipClass:"",screenDim:null,width:"auto",close:function G(){if(this.onClose){this.onClose();}B.detachEvent(window,"resize",A);this.destroy();},touchBegin:function H(I){this.helper.glowOnTap(I.target);},touchTap:function D(J){var I=J.target;if(I===this.curtainNode){mstrApp.closeDialog();}else{this.helper.handleTouchTap(I);}},touchSwipeEnd:function C(I){this.helper.handleTouchSwipe(I);this._super(I);},preBuildRendering:function E(){this._super();var K=this.screenDim=mstrApp.getScreenDimensions(),I=K.w,J=K.h;if(mstrApp.isTablet()){this.width="auto";}else{this.width=(I>J?(I*0.4):(I*0.6))+"px";}},postBuildRendering:function(){this._super();B.attachEvent(window,"resize",A);},updateContent:function(){var I=this.helper;I.createTitle(this.titleNode);I.createContent(this.containerNode);},resizeAndPosition:function(I){var K=this.helper.getContentHeight(),M=this.helper.titleHeight,L=this.screenDim,J=L.h-30,N;this.height=Math.min(K,J-M);this.containerNode.style.height=this.height+"px";this.updateScroller();if(I){this.moveTo(I);}else{N=B.position(this.editorNode);if(!(N.x>0&&N.x+N.w<L.w&&N.y>0&&N.y+N.h<L.h)){this.positionDialog();}}window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},moveTo:function(I){this.anchorPosition=I;this.positionDialog();},updateScrollerConfig:function F(){var J=this._super(),I=this.helper.currentTabIndex,L=this.containerNode.children[I];J.bounces=false;if(L){J.scrollEl=L;J.origin=J.origin||{x:0,y:0};J.noVScroll=J.noHScroll=true;var M=Math.max(this.helper.getContentHeight()-this.height,0);var K=J.vScroll=(M!==0);if(K){J.offset={y:{start:0,end:M}};}}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var l=mstrmojo.func.composite,M=mstrmojo.dom,a=mstrmojo.Button.newWebButton,C=mstrmojo.css,Z=mstrmojo.all,N=mstrmojo.hash,d=mstrmojo.DI.DIHelpers,X=mstrmojo.array;function W(w){if(!this.modal){return ;}var x=window.mstrApp;if(x&&x.modalEditorChange){x.modalEditorChange(this.id,w);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",allowHTMLTitle:false,help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,onEditorResized:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function Y(){return this.domNode.firstChild;},titleContainerNode:function o(){return this.domNode.firstChild.firstChild;},titlebarNode:function q(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function s(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function t(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.allowHTMLTitle?this.title:mstrmojo.string.encodeHtmlString(this.title);}},onzIndexChange:function(){var w=this.zIndex;this.editorNode.style.zIndex=w;this.curtainNode.style.zIndex=w-1;},onvisibleChange:function(AA){if(AA){return ;}var z=this.visible,x="closeEffect",w="none";if(z){x="openEffect";w="block";}if(this[x]){this.playEffect(x);}else{this.editorNode.style.display=w;if(this.modal){this.curtainNode.style.display=w;}}},onhelpChange:function g(){if(this.showTitle){var x=this.help,w=this.helpNode;if(!x){w.style.display="none";}else{w.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(x,w){this._super(x,w);W.call(this,true);},close:function j(w){this._super(w);W.call(this,false);},unrender:function B(w){this._super(w);W.call(this,false);},destroy:function k(w){this._super(w);W.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;W.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function p(){return this.titlebarNode;},getMovingTarget:function V(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(w){var x=w.getTarget();if(x===this.closeNode||x===this.helpNode){C.toggleClass(x,"active",true);}},premouseup:function O(w){var x=w.getTarget();if(x===this.closeNode||x===this.helpNode){C.toggleClass(x,"active",false);}if(w.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function f(w){if(w.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{window.open(mstrmojo.helpPath()+(this.help||""),"_blank");return false;}}},_set_visible:function e(AC,z){var x=(this[AC]!==z);if(x){this[AC]=z;var AB=this._close_handler;if(z){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var AA=this;AB=this._close_handler=AB||function(AD){var AE=M.eventTarget(self,AD);if(AE&&AE.parentNode&&!M.contains(AA.editorNode,AE,true,document.body)){AA.close();}};M.attachEvent(document.body,"mousedown",AB);}}else{var w=this._curtain_handler;if(w){M.detachEvent(window,"resize",w);}if(AB){M.detachEvent(document.body,"mousedown",AB);}}}return x;},showTooltip:function u(AC,AB){var AA=this,x=M.findAncestorByAttr(M.eventTarget(AB,AC),"tooltip",true,this.domNode),z=x&&x.value;if(!AA.hasOpenTooltip&&z){var w=M.position(x.node);AA.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:z,top:Math.max(w.y+40,0),left:Math.max(w.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(AC,AB);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(w){w=Math.round(w);return["rgb(",w,",",w,",",w,")"].join("");}}},preStart:function(){var x=this.target,w=this.widget;w.editorNode.style.display="block";if(!w.modal){return false;}x.style.display="block";C.setOpacity(x,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var w=this.widget;w.editorNode.style.display="none";return !!w.modal;}};function D(w){return function(){Z[w].destroy();};}function J(x,AF,AG,AH){var w=AF.id||"mojoAlertx9",AC,AE=AF.buttons;X.forEach(AE,function(AJ){var AI=AJ.onclick;AJ.onclick=function(AK){var AL=Z[w];if(AI&&AI.call(AJ,AK)===false){return ;}AL.destroy();AL=null;};});try{!!Z[w]&&Z[w].destroy();}catch(AD){}var z=AF.cssClass,AA=[];if(z){AA.push(z);delete AF.cssClass;}if(AH){AA.push(AH);}AA.push("mstrmojo-alert");AC={scriptClass:"mstrmojo.Editor",id:w,width:"475px",zIndex:1000,title:AG||mstrmojo.desc(11812,"Notification"),cssClass:AA.join(" "),children:[{scriptClass:"mstrmojo.Box",cssClass:"alert-content",children:[{scriptClass:"mstrmojo.Label",text:x,allowHTML:AF.allowHTML}]}],visible:true};var AB=new mstrmojo.Editor(N.copy(AF,AC));AB.render();return AB;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(x,AE,z){z=z||{};var AF=z.forceClose,AD=z.callback||mstrmojo.emptyFn,AC=N.copy(AE||{},{buttons:AF?[mstrmojo.Button.newActionButton((z.buttonText||mstrmojo.desc(8607,"Dismiss")),AD)]:null,showTitle:false,modal:false,top:"42px"}),AA=z.duration||6000;var AB=J(x,AC,"",AF?"ed-notify":"ed-toast"),w=AB.id;if(!AF){window.setTimeout(l([AD,D(w)]),AA);}else{window.setTimeout(function(){if(Z[w]){Z[w].editorNode.style.opacity=0.75;}},6000);}return AB;};mstrmojo.confirm=function h(w,AD,AF){AD=AD||{};var z=AD.confirmBtn||{},AC=AD.cancelBtn||{},AE=z.hot!==false,x=!!AC.hot,AB=AF&&AF.title,AA=[a(z.t||mstrmojo.desc(219,"Yes"),z.fn,AE,z.cfg),a(AC.t||mstrmojo.desc(218,"No"),AC.fn,x,AC.cfg)];return J(w,N.copy(AF||{},{buttons:AA,onPreClose:function(){if(AC&&AC.fn){AC.fn();}return true;}}),AB,d.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.warn=function K(z,w,x){x=x||{};x.cssClass=(x.cssClass||"")+" mstrmojo-warning";return mstrmojo.confirm(z,w,x);};mstrmojo.alert=function b(AC,z,AB,AD,w,AA){var x={title:AB||mstrmojo.desc(12405,"Alert"),zIndex:AD,cssClass:w,buttons:[a(mstrmojo.desc(1442,"OK"),z,true)],onPreClose:function(){if(z){z();}return true;}};N.forEach(x,function(AF,AE){if(!AF){delete x[AE];}});return J(AC,N.copy(AA,x),AB,d.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.error=function U(AC,x,AB){var z=AC||{};var AA=mstrmojo.desc(96,"Error");var w=!(d.getEnvObj().isInDI()||d.getEnvObj().isInQB());if(AB){AA=(AB.title)?AB.title:mstrmojo.desc(96,"Error");AB.title=AA;if(AB.enableContactStr===false){w=false;}}J("",N.copy(AB||{},{buttons:[a(mstrmojo.desc(1442,"OK"),x,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:z.shortDesc,longDesc:z.longDesc,showToggle:!!(z.longDesc),enableContactStr:w,allowHTML:!!(AB&&AB.allowHTML===true)}]}),AA,d.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ToolBar","mstrmojo.boxmodel","mstrmojo.array","mstrmojo.EnumRWUnitType","mstrmojo.dom","mstrmojo.css");var Q=["background-color","border","border-color","border-left","border-style","border-top","border-width","filter","top","left","z-index","fx","normWidth","normHeight","normZIndex","normTop","normLeft","tbborder","lrborder","ttl"],Y=["width","height"],t="p_fmts";var p="px";var l={getContentHeight:function(x,AA){var z=AA.ttl&&AA.ttl.height;if(x&&z&&!this.floatingToolbar){return Math.max(parseInt(x,10)-parseInt(z,10),0)+p;}return"";},getPortletMinHeight:function(x){return x.ttl.height;},adjustTitleCss:function(){return ;}};var h={getContentHeight:function(x){return x;},getPortletMinHeight:function(){return 0;},adjustTitleCss:function(x){x.titlebarNodeClass+=" floating";return ;}};function A(AB,z){var AA=this.parent,x=AB+"DirtyKey";if(AA[x]){AA[x](z);}}function P(){this.toolbarTitleTextNode.innerHTML=this.title+(this.count?" ("+this.count+")":"");}function k(){var z=this.parent,AB=z&&z.defn;if(AB&&parseInt(AB.t,10)===mstrmojo.EnumRWUnitType.PANEL){var x=z.parent,AA=x.defn;if(AA&&AA.ifp){return x;}}return null;}var R=mstrmojo.hash,G=2;mstrmojo.DocPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocPortlet",floatingTitle:false,floatingTitleHeight:30,n:"",buttonWidth:17,markupString:'<div class="mstrmojo-portlet {@borderCss}" nm="{@n}" style="{@portletNodeCssText}"><div class="mstrmojo-portlet-slot-shadow" style="{@shadowNodeCssText}"></div><div class="mstrmojo-portlet-container" style="{@portletContainerNodeCssText}"><div class="mstrmojo-portlet-titlebar {@titlebarNodeClass}" style="{@titlebarNodeCssText}"><table style="height:100%;width:100%" class="mstrmojo-portlet-titlebar-table" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-portlet-slot-toolbar-left {@leftToolbarNodeClass}" style="{@leftToolbarNodeCssText}"></td><td class="mstrmojo-portlet-title" style="{@titleNodeCssText}"><div style="overflow: hidden;"></div></td><td class="mstrmojo-portlet-slot-toolbar {@toolbarNodeClass}" style="{@rightToolbarNodeCssText}"></td></tr></table></div><div class="mstrmojo-portlet-buttonbar {@buttonbarNodeClass}" style="{@buttonbarNodeCssText}"></div><div class="mstrmojo-portlet-slot-content" style="{@contentNodeCssText}"></div></div></div>',rightToolbarNodeCssText:"",leftToolbarNodeCssText:"",titleNodeCssText:"",titlebarNodeClass:"",titlebarNodeCssText:"",contentNodeCssText:"",borderCss:"no-border",buttonbarNodeClass:"",buttonbarNodeCssText:"",markupSlots:{containerNode:function(){return this.domNode.lastChild;},portletNode:function(){return this.domNode;},portletContainerNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.lastChild.childNodes[0];},buttonbarNode:function(){return this.domNode.lastChild.childNodes[1];},toolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[2];},toolbarTitleTextNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[1].firstChild;},leftToolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[0];},contentNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontitleChange:function(){P.call(this);},oncountChange:function(){P.call(this);},onfcChange:function(){if(this.fc&&this.content){this.updateContentHeight();}}},formatHandlers:{portletContainerNode:["RW","B","fx","background-color"],shadowNode:["RW","B","fx","background-color"],buttonbarNode:{src:"ttl",props:["background-color"]},titlebarNode:{src:"ttl",props:["F","B","background-color","height","fx","text-align","vertical-align"]},titleNode:{src:"ttl",props:["vertical-align","P","text-decoration"]}},updateServer:true,fc:false,content:null,rightToolbar:null,leftToolbar:null,floatingToolbar:false,_ts:l,getCacheKey:function F(){return this._super()+"-portlet";},getFormats:function M(){var z=this.content,x=z&&z.getFormats();return x&&x[t];},updateContentHeight:function f(AC){var x=this.getFormats(),z=this.content,AB=z.dimNode||z.domNode,AA=((x.ttl&&parseInt(x.ttl.height,10))||0);if(AB){if(!AC){AA+=((this.fc||this.isInFilterPanel())?AB.offsetHeight:(x.height?parseInt(x.height,10):0));}this.containerNode.style.height=AA+p;this.shadowNode.style.height=AA+p;}},init:function u(x){this._super(x);var z=this.content;this.n=(x&&x.defn&&x.defn.n)||"";if(z&&z.getFormats()&&!this.getFormats()){this._createFormats();}},preBuildRendering:function B(){var z=this._ts=(this.floatingTitle)?h:l;if(this.isInFilterPanel()){var AA=R.clone(this.formatHandlers);AA.portletContainerNode=["z-index","height","B","backgroud-color"];AA.shadowNode=["z-index","height","B","fx","background-color"];this.formatHandlers=AA;}this._super();z.adjustTitleCss(this);var x="display:none;";if(!this.leftToolbar){this.leftToolbarNodeCssText+=x;}if(!this.toolbar){this.toolbarNodeCssText+=x;}var AB=mstrmojo._Formattable.getBorderWidths(this);if(AB.l||AB.t||AB.r){this.borderCss="has-border";}},postBuildRendering:function Z(){var AA=mstrmojo.dom,AH=this.titleNode,AG=this.onclicktitle;if(this.floatingTitle&&this.titleNode){document.body.appendChild(this.titleNode);var AB=mstrmojo.css,AD=this.contentNode,AE=this;if(!this._onhover){this._onhovertt=function(){AB.addClass(AE.titleNode,["visible"]);AE._onflt=true;return true;};this._onhoverofftt=function(){AB.removeClass(AE.titleNode,["visible"]);AE._onflt=false;return true;};this._onhover=function(){var AI=AE.titleNode;AB.addClass(AI,["visible"]);var AJ=AA.position(AE.contentNode,true);AI.style.top=(AJ.y-AI.clientHeight+2)+p;AI.style.left=AJ.x+p;return true;};this._onhoveroff=function(){AB.removeClass(AE.titleNode,["visible"]);return true;};}AA.attachEvent(AD,"mouseover",this._onhover);AA.attachEvent(AD,"mouseout",this._onhoveroff);AA.attachEvent(AH,"mouseover",this._onhovertt);AA.attachEvent(AH,"mouseout",this._onhoverofftt);}if(AH&&AG){AA.attachEvent(AH,"click",AG);}if(this._super){this._super();}var AC=this.getFormats();this.set("fc",AC&&!AC.height);if(this.isInFilterPanel()&&!this.isHorizFP()){var x=this.portletContainerNode.style,z=this.shadowNode.style,AF=this.parent;x.width=z.width="99%";x.top=z.top=AF.topStart+p;x.left=z.left=G+p;}else{if(this.isInFilterPanel()&&this.isHorizFP()){G=8;this.portletContainerNode.style.left=this.shadowNode.style.left=parseInt(AC.left,10)+G*this.orgPos+p;}else{if(this.defn.ifp){this.adjustFPHeight2Fit();}}}if(this.buttonbarNode.clientHeight>0){this.buttonbarNode.style.height=this.buttonbarNode.clientHeight*this.model.getZoomFactor()+"px";}},adjustFPHeight2Fit:function(){var AA=mstrmojo.dom,x=AA.position(this.titleNode),z=AA.position(this.contentNode).y-x.y-x.h;this.content.domNode.style.height=parseInt(this.defn.fmts.height,10)-z+"px";},unrender:function E(z){if(this.floatingTitle&&this.titleNode){var AB=this.domNode,x=this.titleNode,AA=mstrmojo.dom;if(AB&&this._onhover){AA.detachEvent(AB,"mouseover",this._onhover);}if(AB&&this._onhoveroff){AA.detachEvent(AB,"mouseout",this._onhoveroff);}if(x&&this._onhovertt){AA.detachEvent(x,"mouseover",this._onhovertt);}if(x&&this._onhoverofftt){AA.detachEvent(x,"mouseout",this._onhoverofftt);}if(x){document.body.removeChild(x);}}if(this._super){this._super(z);}},updateStyle:function(z,x){var AB=this.shadowNode.style,AA=this.containerNode.style;AB.height=AA.height=z;AB.width=AA.width=x;},_createFormats:function W(){var AD=this.content&&this.content.getFormats(),AB;AB=AD.p_fmts={};var x,AC;for(x in Q){AC=Q[x];if(AD[AC]!==undefined){AB[AC]=AD[AC];delete AD[AC];}}for(x in Y){AC=Y[x];if(AD[AC]!==undefined){AB[AC]=AD[AC];}}AD.height=this._ts.getContentHeight(AD.height,AB);if(mstrmojo.dom.isIE&&AB.fx&&AB.fx.ds&&!AB["background-color"]){AB["background-color"]="#ffffff";}var AA=AB.ttl,z=AA&&AA["background-color"];if(z){this.titlebarNodeClass=mstrmojo.color.getContrastingColor(z,"light","dark");}},refresh:function w(){if(!this.hasRendered){return ;}var z=this.children,x;for(x=z.length-1;x>=0;x--){z[x].refresh();}},isInFilterPanel:function L(){return(k.call(this)!==null);},isHorizFP:function(){if(this.isInFilterPanel()){var x=this.getFilterPanel();return x&&x.defn&&parseInt(x.defn.fds,10)===2;}return false;},getFilterPanel:function H(){return k.call(this);},getContainerHeight:function e(){return this.containerNode.clientHeight;},relocate:function C(x){if(this.isInFilterPanel()&&!this.isHorizFP()){this.portletContainerNode.style.top=this.shadowNode.style.top=x+p;}},setInfoWindowDimensions:function s(AC){var z=this.domNode.style,x=this.shadowNode.style,AA=this.portletContainerNode.style,AB=mstrmojo._Formattable.getBorderWidths(this);AC.h-=AB.h;AC.w-=AB.w;x.height=AA.height=z.height=AC.h+p;x.width=AA.width=z.width=AC.w+p;AC.h-=this.titleNode.offsetHeight;this.toolbarNode.style.display="none";},addDirtyKey:function K(x){A.call(this,"add",x);},removeDirtyKey:function J(x){A.call(this,"remove",x);},setDirtyChildren:function a(){var x=this.content;if(x&&x.setDirtyChildren){x.setDirtyChildren.apply(x,arguments);}}});var X=0,O=1,o=2;function N(x){var z=this.content.defn;if(z){z.set("ds",x);}}function q(x){return{FormattingOrder:{ZIndex:this.getFormats()["z-index"]},FormattingView:{WindowState:x}};}function b(AJ,AH,x,AK){var AF=this.content,AI=AF.k,AE=mstrmojo.boxmodel.px2Inches,AA=AF.model.docModel||AF.model,AM=AA.getZoomProps(),AB=this.getFormats(),z=AH!==undefined&&x!==undefined,AL={},AC=this,AD=q.call(this,AJ),AG=!(AF.defn.t===mstrmojo.EnumRWUnitType.GRIDGRAPH||AF.defn.t===mstrmojo.EnumRWUnitType.GRAPH);if(z){AD.FormattingSize={OldHeight:AE(AM,AH),OldWidth:AE(AM,x),Height:AE(AM,parseInt(AB.height,10)),Width:AE(AM,parseInt(AB.width,10))};}AL.success=function(AN){var AO=AN&&AN.data;if(AO){AA.loadPartialData(AO,AI);}N.call(AC,AJ);var AP=AC.parent;if(AP.adjustSectionSize&&z){AP.adjustSectionSize();}};AA.updateUnitFormat(AF,1,AD,AL,{params:{suppressData:AG,rapidExec:AG},config:z?null:{silent:true},preserveUndo:true});if(!z&&!(AK&&AK.all)){if(AA.saveRWProps){AA.saveRWProps(AI,undefined,1,this.loadDataOnResize,AL,true);}}}function U(){var AE=this.content;if(!AE){return ;}var AC=function(AI){mstrmojo.array.forEach(AI,function(AJ){if(AJ.ds!==undefined){AJ.set("visible",(AJ.ds!==AE.defn.ds));}});},AF;if(this.isInFilterPanel()){var AA=(parseInt(this.defn.ds,10)===X);AE.set("visible",AA);this.updateContentHeight(!AA);AF=this.leftToolbar;AC(AF&&AF.children);var AB=this.parent;if(AB.refreshFP){AB.refreshFP();}}else{var x=AE.getFormats(),AG=this.getFormats(),z=this.portletContainerNode.style,AH=this.shadowNode.style,AD=this.contentNode.firstChild.style;AD.height=x.height;AD.width=x.width;AH.height=z.height=AG.height;AH.width=z.width=AG.width;AH.top=z.top=AG.top;AH.left=z.left=AG.left;if(AG["z-index"]!==undefined){AH.zIndex=z.zIndex=AG["z-index"];}AF=this.rightToolbar;AC(AF&&AF.children);if(AE.resize){AE.resize();}}}mstrmojo.DocResizablePortlet=mstrmojo.declare(mstrmojo.DocPortlet,null,{scriptClass:"mstrmojo.DocResizablePortlet",loadDataOnResize:false,_createFormats:function W(){this._super();var z=this.getFormats();var x=parseInt(this.defn.ds,10);if(x===X){z.normHeight=z.height;z.normWidth=z.width;if(z["z-index"]!==null&&z["z-index"]!==undefined){z.normZIndex=z["z-index"];}}if(x!==o){z.normTop=z.top;z.normLeft=z.left;}},onmaximize:function g(){var AB=this.parent,AE=this.content,AD=AE&&AE.getFormats(),AA=this.getFormats(),z=AA.height,x=AA.width,AC=mstrmojo._Formattable.getBorderWidths(this);this.clearCache();AE.clearCache();AA.height=(parseInt(AB.getHeight(),10)-AC.h)+p;AD.height=this._ts.getContentHeight(AA.height,AA);AA.width=AD.width=(AB.getWidth()-AC.w)+p;AA.top=AA.left=0;AA["z-index"]=AB.getMaxZIndex()+1;b.call(this,o,z,x);},onminimize:function d(){var AD=this.content,z=AD.dimNode||AD.domNode,AC=AD&&AD.getFormats(),AB=this.getFormats(),AA=AB.height||z.offsetHeight,x=AB.width;this.clearCache();AD.clearCache();AB.width=AC.width=AB.normWidth;AB.top=AB.normTop;AB.left=AB.normLeft;if(AB.normZIndex!==null&&AB.normZIndex!==undefined){AB["z-index"]=AB.normZIndex;}AC.height=0;AB.height=this._ts.getPortletMinHeight(AB);b.call(this,O,AA,x);},onrestore:function S(){var AC=this.content,AB=AC&&AC.getFormats(),AA=this.getFormats(),z=AA.height,x=AA.width;this.clearCache();AC.clearCache();AA.height=AA.normHeight;AB.height=this._ts.getContentHeight(AA.height,AA);AA.width=AB.width=AA.normWidth;AA.top=AA.normTop;AA.left=AA.normLeft;if(AA.normZIndex!==null&&AA.normZIndex!==undefined){AA["z-index"]=AA.normZIndex;}b.call(this,X,z,x);},changeWindowState:function I(AA){N.call(this,AA);var z=this.content,AB=q.call(z,AA),x=z.model.docModel||z.model;return x.getUnitFormatAction(z,1,AB);},oncollapse:function V(x){b.call(this,O,undefined,undefined,x);},onexpand:function D(x){b.call(this,X,undefined,undefined,x);},adjustFP:function j(){var z=(parseInt(this.defn.ds,10)===X);this.content.set("visible",z);this.updateContentHeight(!z);var x=this.parent;if(x.refreshFP){x.refreshFP();}},postBuildRendering:function Z(){if(!this._sub_dsChange){this._sub_dsChange=this.defn.attachEventListener("dsChange",this.id,U);}this._super();if(this.isInFilterPanel()){var x=(parseInt(this.defn.ds,10)===X);this.updateContentHeight(!x);}}});mstrmojo.DocPortlet.ST_RESTORE=X;mstrmojo.DocPortlet.ST_MAX=o;mstrmojo.DocPortlet.ST_MIN=O;}());(function(){mstrmojo.requiresCls("mstrmojo.DocButton","mstrmojo._HasDrillLinks","mstrmojo.ui.MobileCheckList","mstrmojo.android.ui.Button","mstrmojo.dom","mstrmojo.array");function A(L){this.set("pressed",L);}function J(M,N){var L=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(M);return L?"rgba("+parseInt(L[1],16)+","+parseInt(L[2],16)+","+parseInt(L[3],16)+","+N+")":"";}function B(L){this.model.executeLink(L,this.target,this);}function G(){var L=this.drillLinkItems,M=this.id;if(L.length===1){A.call(this,false);B.call(this,L[0].url);return ;}this._linksOpen=true;mstrApp.showDialog({title:this.defn.n,children:[{scriptClass:"mstrmojo.ui.MobileCheckList",items:L,multiSelect:false,isElastic:true,hasEvenRows:true,postselectionChange:function(N){mstrApp.closeDialog();B.call(mstrmojo.all[M],L[N.added[0]].url);}}],onClose:function(){var N=mstrmojo.all[M];A.call(N,false);delete N._linksOpen;},buttons:[mstrmojo.android.ui.Button.newButton(mstrmojo.desc(221,"Cancel"))]});}mstrmojo.android.ui.DocButton=mstrmojo.declare(mstrmojo.DocButton,[mstrmojo._HasDrillLinks],{scriptClass:"mstrmojo.android.ui.DocButton",touchBegin:function F(){if(!this.linkEnabled){return false;}A.call(this,true);return true;},touchTap:function C(){if(this.ifw){this.model.showInfoWin(this.ifw,(this.getAnchor&&this.getAnchor())||this.domNode,"v");return ;}var L=this.drillLinkItems,M=(L&&L.length)||0;if(M>0){G.call(this);}},touchSelectBegin:function H(){this.touchTap();},touchEnd:function K(){if(!this._linksOpen){A.call(this,false);}},setBackgroundColor:function I(){var L=!!this.pressed,R=this.defn,Q=this.domNode,N=this.fmts,S=this.buttonContainerNode.style,O=this.domNode.style,P=L?R.bhlc:(N["background-color"]||""),M=L?J(R.bhlc,0.4):"";S.backgroundColor=P;S.borderColor=P;O.borderColor=M;O.backgroundColor=M;},getDPI:function E(){return mstrMobileApp.getDeviceDPI();}});var D=mstrmojo.android.ui.DocButton;D.prototype.markupString=D.prototype.markupString.replace(new RegExp(" mstrAttach:[a-zA-Z,]*"),"");D.prototype.formatHandlers.domNode=mstrmojo.array.filter([].concat(D.prototype.formatHandlers.domNode),function(L){return(L!=="P"&&L!=="B");});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.SliderBox","mstrmojo._IsAndroidInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.ui.MobileSlider","mstrmojo.num");var C=1,B=mstrmojo.num;mstrmojo.android.inputControls.SliderDIC=mstrmojo.declare(mstrmojo.SliderBox,[mstrmojo._IsAndroidInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.SliderDIC",popupStyle:1,init:function F(H){var G,I,J,K;this._super(H);this.items=this.getItems();this.cssClass=this.showByDefault?"mstrmojo-SliderGroup":"mstrmojo-PopupSlider";if(this.dic.ipt!==C){this.isSequential=true;I=this.max=this.dic.max;G=this.min=this.dic.min;J=this.interval=this.dic.itv;}else{G=1;I=this.items.length;J=1;}K=this.sliderBar;if(K){K.min=G;K.max=I;K.interval=J;}},preBuildRendering:function E(){var I=this.dic,G=(I.ldw!=null)?I.ldw/100:0.4,H;this.valueText=this.dv;this._super();if(this.showByDefault){H=this.openerStyle;this.valueCssText="left:-"+H.iw*G+"px;width:"+H.iw*G+"px";this.cssText="width:"+H.iw*(1-G)+"px";this.alignSlider(this.openerNode,H.ih);}},onpopupResized:function D(){var G=this.sliderBar;if(G){G.refresh();}},sliderRef:{scriptClass:"mstrmojo.ui.MobileSlider",onslidingValueChange:function(){if(this.hasRendered){this.selectedIdx=parseInt((this.slidingValue-this.min)/this.interval,10)||0;this.parent.selectedIdxChanged(this.selectedIdx);}},selectedIdx:0,select:function(G){this.selectedIdx=G||0;this.slidingValue=this.value=this.min+G*this.interval;}},selectedIdxChanged:function A(H){var I=this.items[H],G=I&&I.n;this.set("value",B.toLocaleString(G));this.set("valueText",B.toLocaleString(G));}});}());(function(){mstrmojo.requiresCls("mstrmojo.graph._MobileGraphAreaHelper","mstrmojo.GraphBase","mstrmojo.dom");var AF=0,Au=0,BE=0,Ae=1,g=2,Z=11,X=12,AV=13,BK=101,o=102,A1=111,Ac=112,BF=113,l=121,A6=122,Af=131,x=132,AI=201,H=301,F=302,AC=303,t=311,h=321,BA=322,B=401,A4=402,Al=501,J=502,AQ=503,AO=511,s=512,M=513,BI=514,At=515,BL=521,AU=522,Q=601,N=701,AX=801;var Ak=0,I=9,AK=10,a=14;var AA=0,AM=1,G=2,Aj=3,Ag=4;var p=0,A3=1,Ai=2;var V=2,e=3;var A0=0,AP=3,BD=4,z=6,E=13,A=14,D=101;var A9=0,Az=1,Ao=2;var Ah=3.14159265;var f,b;var Ax=0,A7=1,Ar=2,R=3,AG=4,BJ=5,AE=6,AZ=7,AW=8,Ab=9;var A8=100;var BB=[[-100,-100,100,-100,100,100,-100,100],[-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[],[0,-100,100,0,0,100,-100,0],[0,-100,100,100,-100,100],[-100,-100,100,-100,100,100,-100,100],[0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100]];function As(Cj,B5,C4,B3){var Bj=C4.InstructionList,CC=Bj.length,Br,CH,B2,B1,CK,B4,Bi,Bn,BR,BV,CJ,CA,BZ,Cy,CQ,CL,C2;for(CH=0;CH<CC;CH++){Br=Bj[CH];if(typeof (Br)==="undefined"){continue;}switch(Br.Ins){case BE:break;case Ae:Cj.save();break;case g:Cj.restore();break;case Z:Cj.clip();break;case X:Cj.scale(Br.X,Br.Y);break;case AV:if(Br.Radian!==0){Cj.translate(Br.Anchor.X,Br.Anchor.Y);Cj.rotate(Br.Radian);Cj.translate(-Br.Anchor.X,-Br.Anchor.Y);}break;case BK:Cj.beginPath();break;case o:Cj.closePath();break;case A1:if(C4.IsAnimated===0){Cj.moveTo(Br.X,Br.Y);}else{if(Br.CA[0]==0){B2=Br.X[0]*(1-B5)+Br.X[1]*B5;B1=Br.Y[0]*(1-B5)+Br.Y[1]*B5;Cj.moveTo(B2,B1);}else{var Bp=Math.sqrt((Br.X[0]-Br.BPX[0])*(Br.X[0]-Br.BPX[0])+(Br.Y[0]-Br.BPY[0])*(Br.Y[0]-Br.BPY[0]));var Bm=Math.sqrt((Br.X[1]-Br.BPX[0])*(Br.X[1]-Br.BPX[0])+(Br.Y[1]-Br.BPY[0])*(Br.Y[1]-Br.BPY[0]));var CN=Math.sqrt((Br.X[0]-Br.X[1])*(Br.X[0]-Br.X[1])+(Br.Y[0]-Br.Y[1])*(Br.Y[0]-Br.Y[1]));var Bo=Math.acos((Bp*Bp+Bm*Bm-CN*CN)/(2*Bp*Bm));var C7=(Br.X[0]-Br.BPX[0])*Math.cos(Bo)-(Br.Y[0]-Br.BPY[0])*Math.sin(Bo)+Br.BPX[0]-Br.X[1];if(C7<-0.01||C7>0.01){Bo=2*Ah-Bo;}B2=(Br.X[0]-Br.BPX[0])*Math.cos(B5*Bo)-(Br.Y[0]-Br.BPY[0])*Math.sin(B5*Bo)+Br.BPX[0];B1=(Br.Y[0]-Br.BPY[0])*Math.cos(B5*Bo)+(Br.X[0]-Br.BPX[0])*Math.sin(B5*Bo)+Br.BPY[0];Cj.moveTo(B2,B1);}}break;case Ac:if(C4.IsAnimated===0){Cj.lineTo(Br.X,Br.Y);}else{if(Br.CA[0]==0){B2=Br.X[0]*(1-B5)+Br.X[1]*B5;B1=Br.Y[0]*(1-B5)+Br.Y[1]*B5;Cj.lineTo(B2,B1);}else{var Bp=Math.sqrt((Br.X[0]-Br.BPX[0])*(Br.X[0]-Br.BPX[0])+(Br.Y[0]-Br.BPY[0])*(Br.Y[0]-Br.BPY[0]));var Bm=Math.sqrt((Br.X[1]-Br.BPX[0])*(Br.X[1]-Br.BPX[0])+(Br.Y[1]-Br.BPY[0])*(Br.Y[1]-Br.BPY[0]));var CN=Math.sqrt((Br.X[0]-Br.X[1])*(Br.X[0]-Br.X[1])+(Br.Y[0]-Br.Y[1])*(Br.Y[0]-Br.Y[1]));var Bo=Math.acos((Bp*Bp+Bm*Bm-CN*CN)/(2*Bp*Bm));var C7=(Br.X[0]-Br.BPX[0])*Math.cos(Bo)-(Br.Y[0]-Br.BPY[0])*Math.sin(Bo)+Br.BPX[0]-Br.X[1];if(C7<-0.02||C7>0.02){Bo=2*Ah-Bo;}B2=(Br.X[0]-Br.BPX[0])*Math.cos(B5*Bo)-(Br.Y[0]-Br.BPY[0])*Math.sin(B5*Bo)+Br.BPX[0];B1=(Br.Y[0]-Br.BPY[0])*Math.cos(B5*Bo)+(Br.X[0]-Br.BPX[0])*Math.sin(B5*Bo)+Br.BPY[0];Cj.lineTo(B2,B1);}}break;case BF:if(C4.IsAnimated===0){Cj.bezierCurveTo(Br.CP1X,Br.CP1Y,Br.CP2X,Br.CP2Y,Br.X,Br.Y);}else{cp1x=Br.CP1X[0]*(1-B5)+Br.CP1X[1]*B5;cp1y=Br.CP1Y[0]*(1-B5)+Br.CP1Y[1]*B5;cp2x=Br.CP2X[0]*(1-B5)+Br.CP2X[1]*B5;cp2y=Br.CP2Y[0]*(1-B5)+Br.CP2Y[1]*B5;B2=Br.X[0]*(1-B5)+Br.X[1]*B5;B1=Br.Y[0]*(1-B5)+Br.Y[1]*B5;Cj.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,B2,B1);}break;case l:if(C4.IsAnimated===0){Cj.rect(Br.X,Br.Y,Br.W,Br.H);}else{B2=Br.X[0]*(1-B5)+Br.X[1]*B5;B1=Br.Y[0]*(1-B5)+Br.Y[1]*B5;B4=Br.W[0]*(1-B5)+Br.W[1]*B5;CK=Br.H[0]*(1-B5)+Br.H[1]*B5;Cj.rect(B2,B1,B4,CK);}break;case A6:if(C4.IsAnimated===0){if(Br.EndAngle==6.283){Br.EndAngle=2*Ah;}Cj.arc(Br.X,Br.Y,Br.Radius,Br.StartAngle,Br.EndAngle,Br.AntiClockwise);}else{if(Br.EndAngle[0]==6.283){Br.EndAngle[0]=2*Ah;}if(Br.EndAngle[1]==6.283){Br.EndAngle[1]=2*Ah;}Cj.arc(Br.X[0]*(1-B5)+Br.X[1]*B5,Br.Y[0]*(1-B5)+Br.Y[1]*B5,Br.Radius[0]*(1-B5)+Br.Radius[1]*B5,Br.StartAngle[0]*(1-B5)+Br.StartAngle[1]*B5,Br.EndAngle[0]*(1-B5)+Br.EndAngle[1]*B5,Br.AntiClockwise[0]);}break;case x:if(C4.IsAnimated==1){var Bx=Br.Angle[0]*(1-B5)+Br.Angle[1]*B5;var Bh=Br.NeedleSize[0];var CO=Br.BPX[0];var CM=Br.BPY[0];var BS=Br.MarkSize[0];var Co=Br.MarkShape[0];var Cb={X:Bh*Math.cos(Bx)+CO,Y:Bh*Math.sin(Bx)*-1+CM};var B8=AR(Co,Cb,BS);C(Cj,B8,false,false);}break;case AI:case H:break;case F:Cj.lineWidth=Br.LineWidth;break;case AC:switch(Br.Type){case A9:Cj.lineJoin="miter";break;case Az:Cj.lineJoin="bevel";break;case Ao:Cj.lineJoin="round";break;}break;case t:case h:case BA:break;case B:Cj.fill();break;case A4:Cj.stroke();break;case Al:BR=Br.Format;Bi=B3[BR];if(Br.HEP==1){Bn=Br.FC;}else{Bn=Bi.SimpleColor;}Cj.fillStyle="RGBA("+Math.round(Bn.R*Br.DarkerFactor)+", "+Math.round(Bn.G*Br.DarkerFactor)+", "+Math.round(Bn.B*Br.DarkerFactor)+", "+Bi.Alpha/255+")";Cj.fill();break;case J:break;case AQ:if(C4.IsAnimated===0){BZ=Br.BoundingRect;C2=Br.DarkerFactor;}else{BZ=Br.BoundingRect[0];C2=Br.DarkerFactor[0];var C5=Br.BoundingRect[1];BZ.X=BZ.X*(1-B5)+C5.X*B5;BZ.Y=BZ.Y*(1-B5)+C5.Y*B5;BZ.Width=BZ.Width*(1-B5)+C5.Width*B5;BZ.Height=BZ.Height*(1-B5)+C5.Height*B5;}if(BZ.Width<1||BZ.Height<1){continue;}BZ.Width=Math.floor(BZ.Width);BZ.Height=Math.floor(BZ.Height);var Bi=B3[Br.Format];if(Bi.Bevel.FillBevelType!=Ag||B5<1){Ay(Cj,Bi,BZ,C2);}else{Ap(Cj,Bi);Ay(Cj,Bi,BZ,C2);}break;case AO:Bi=B3[Br.Format];CQ=Bi.Bevel;B8=AH(Br.Polygon);var Bw=B8.length;var BY=[];for(var CI=0;CI<Bw;CI++){BY.push(B8[CI]);}while(true){Bw=BY.length;if(Bw<3){break;}var Be=[];var B9=[];var BT=false;if(Bw>3){var Cx={X:0,Y:0};for(var CI=0;((CI<(Bw-2))&&(!BT));++CI){for(var CF=CI+2;CF<(Bw-1);++CF){var C0=d(BY[CI],BY[CI+1],BY[CF],BY[CF+1],Cx,false);Cx=C0.interSection;if(C0.val==1){BT=true;for(m=0;m<=CI;++m){if(!AY(BY[m],Cx)){Be.push(BY[m]);}}Be.push(Cx);for(m=CF+1;m<Bw;++m){if(!AY(BY[m],Cx)){Be.push(BY[m]);}}B9.push(Cx);for(m=CF;m>CI;--m){if(!AY(BY[m],Cx)){B9.push(BY[m]);}}break;}}if((CI!=0)&&(!BT)){var C0=d(BY[CI],BY[CI+1],BY[0],BY[Bw-1],Cx,false);Cx=C0.interSection;if(C0.val==1){for(m=0;m<=CI;++m){Be.push(BY[m]);}Be.push(Cx);B9.push(Cx);for(m=Bw-1;m>CI;--m){B9.push(BY[m]);}BT=true;}}}}if(!BT){Be=BY;}var Cw=0;var Ck=BN(Be,Cw);Cw=Ck.depth;if(!Ck.mark){break;}Cw*=CQ.Depth*0.01;var B0=[];var BX=[];var B6=Be.length;for(var CI=0;CI<B6;++CI){var Ce;var Bu;var Ck=Aw(Be[(CI+B6-1)%B6],Be[CI],Be[(CI+1)%B6],Cw);Ce=Ck.start;Bu=Ck.end;B0.push(Ce);BX.push(Bu);}for(var CI=0;CI<B6;++CI){var CW={X:BX[CI].X-B0[CI].X,Y:BX[CI].Y-B0[CI].Y};var BU=Math.sqrt(Av(CW));var Cd={X:CW.X/BU,Y:CW.Y/BU};var BP=AB((540-CQ.LightAngle)%360);var Ba={X:Math.cos(BP),Y:Math.sin(BP)};var B7=AN(Cd,Ba);var CZ=0;var CE=0;var Cm=0.1;var Cz=0.2;if(B7<-0.01){CZ=(1+B7)*Cm;CE=(1+Math.abs(B7))*Cz*CQ.Intensity*0.01;}else{CZ=(1-Cm)+B7*Cm;CE=((1-Cz)+B7*Cz)*CQ.Intensity*0.01;}var CD=CI+1;if(CD==B6){CD-=B6;}Cj.beginPath();Cj.moveTo(Be[CI].X,Be[CI].Y);Cj.lineTo(Be[CD].X,Be[CD].Y);Cj.lineTo(B0[CD].X,B0[CD].Y);Cj.lineTo(B0[CI].X,B0[CI].Y);Cj.closePath();var CV=Math.round(CZ*255);if(isNaN(CV)){continue;}if(CQ.FillBevelType==AM){Cj.save();Cj.clip();var BQ=Cj.createLinearGradient(BX[CI].X,BX[CI].Y,B0[CI].X,B0[CI].Y);BQ.addColorStop(0,"rgba("+CV+","+CV+","+CV+","+CE+")");BQ.addColorStop(1,"rgba("+CV+","+CV+","+CV+","+0+")");Cj.fillStyle=BQ;Cj.fill();Cj.restore();}else{Cj.fillStyle="RGBA("+CV+", "+CV+", "+CV+", "+CE+")";Cj.fill();}}if(BT){BY=B9;}else{break;}}if(B8.length!=0){Cj.beginPath();Cj.moveTo(B8[0].X,B8[0].Y);for(var CI=1;CI<B8.length;++CI){Cj.lineTo(B8[CI].X,B8[CI].Y);}Cj.closePath();}break;case s:Bi=B3[Br.Format];CQ=Bi.Bevel;if(C4.IsAnimated===0){BZ=Br.BoundingRect;CL=Br.IsCircularShape;}else{var C6=Br.BoundingRect[0];var C5=Br.BoundingRect[1];BZ={X:0,Y:0,Width:0,Height:0};BZ.X=C6.X*(1-B5)+C5.X*B5;BZ.Y=C6.Y*(1-B5)+C5.Y*B5;BZ.Width=C6.Width*(1-B5)+C5.Width*B5;BZ.Height=C6.Height*(1-B5)+C5.Height*B5;}if(CQ.FillBevelType===Aj){var C3=0.2;var CS=CQ.Intensity*0.01*Bi.Alpha/255;var CU=1-CQ.Depth*0.01;Cy=Cj.createLinearGradient(BZ.X,BZ.Y,BZ.X+BZ.Width,BZ.Y);CJ="RGBA(0,0,0,"+CS+")";CA="RGBA(255,255,255,"+CS+")";Cy.addColorStop(0,CJ);Cy.addColorStop(CU*C3,CJ);Cy.addColorStop(CU,CA);Cy.addColorStop(1,CJ);}else{CJ=Bi.SimpleColor;var Bb={x:BZ.X+BZ.Width/2,y:BZ.Y+BZ.Height/2};Bq={x:0,y:0};Bl={x:0,y:0};AD(BZ,CQ.LightAngle,Bb);var Bf=Bi.Alpha/255;var Bt=Bf;if(Bi.FillType!=A0){Bf*=0.8;Bt*=0.5;CJ={R:128,G:128,B:128};}var BQ=Cj.createLinearGradient(Bq.x,Bq.y,Bl.x,Bl.y);BQ.addColorStop(0,"rgba(255,255,255,"+Bf+")");BQ.addColorStop(0.05+CQ.Intensity*0.001,"rgba(255,255,255,"+9*Bf/(10-Bf)+")");BQ.addColorStop(0.5,"rgba("+CJ.R+","+CJ.G+","+CJ.B+","+Bt+")");BQ.addColorStop(0.85+(1-CQ.Intensity*0.01)*0.05,"rgba(0,0,0,"+9*Bf/(10-Bf)+")");BQ.addColorStop(1,"rgba(0,0,0,"+Bf+")");Cj.fillStyle=BQ;Cj.fill();if(Bi.FillType!=A0){continue;}var BO=Math.max(BZ.Width,BZ.Height)*0.5*(2-CQ.Intensity*0.01);BO*=CL?0.75:2;Cy=Cj.createRadialGradient(Bb.x,Bb.y,0,Bb.x,Bb.y,BO);Cy.addColorStop(0,"rgba("+CJ.R+","+CJ.G+","+CJ.B+","+Bf+")");Cy.addColorStop(0.5,"rgba("+CJ.R+","+CJ.G+","+CJ.B+","+Bf/2+")");Cy.addColorStop(0.8,"rgba("+CJ.R+","+CJ.G+","+CJ.B+","+Bf/10+")");Cy.addColorStop(1,"rgba("+CJ.R+","+CJ.G+","+CJ.B+",0)");}Cj.fillStyle=Cy;Cj.fill();break;case At:Bi=B3[Br.Format];CQ=Bi.Bevel;var Ch=Br.CX;var Cg=Br.CY;var Cr=Br.Radius;var BO;var CS;switch(Br.BorderUse){case V:CS=0.4;Bq={x:Ch+Cr*Math.cos(Ah*1.25),y:Cg+Cr*Math.sin(Ah*1.25)};Bl={x:Ch+Cr*Math.cos(Ah*0.25),y:Cg+Cr*Math.sin(Ah*0.25)};Cj.save();Cj.clip();var BQ=Cj.createLinearGradient(Bq.x,Bq.y,Bl.x,Bl.y);BQ.addColorStop(0,"rgba(0,0,0,"+CS+")");BQ.addColorStop(1,"rgba(255,255,255,"+CS+")");Cj.fillStyle=BQ;Cj.fill();Cj.restore();CS=0.4;BO=Cr*0.3;Bn=Bi.SimpleColor;Bq={x:Ch+BO*Math.cos(Ah*0.75),y:Cg+BO*Math.sin(Ah*0.75)};Bl={x:Ch+BO*Math.cos(Ah*1.75),y:Cg+BO*Math.sin(Ah*1.75)};Cj.save();Cj.clip();var BQ=Cj.createLinearGradient(Bq.x,Bq.y,Bl.x,Bl.y);BQ.addColorStop(0,"rgba("+Bn.R+","+Bn.G+","+Bn.B+","+0+")");BQ.addColorStop(0.2,"rgba("+Bn.R+","+Bn.G+","+Bn.B+","+1+")");BQ.addColorStop(0.8,"rgba("+Bn.R+","+Bn.G+","+Bn.B+","+1+")");BQ.addColorStop(1,"rgba("+Bn.R+","+Bn.G+","+Bn.B+","+0+")");Cj.fillStyle=BQ;Cj.fill();Cj.restore();break;case e:CS=0.6;BO=Cr*0.2;var CU=0.3;Bq={x:Ch+BO*Math.cos(Ah*1.25),y:Cg+BO*Math.sin(Ah*1.25)};Bl={x:Ch+Cr*Math.cos(Ah*0.25),y:Cg+Cr*Math.sin(Ah*0.25)};Cj.save();Cj.clip();var BQ=Cj.createLinearGradient(Bq.x,Bq.y,Bl.x,Bl.y);BQ.addColorStop(0,"rgba(255,255,255,"+CS+")");BQ.addColorStop(CU,"rgba(0,0,0,"+CS+")");BQ.addColorStop(1,"rgba(255,255,255,"+CS+")");Cj.fillStyle=BQ;Cj.fill();Cj.restore();break;default:CS=0.4;BO=Cr-Br.Thickness;Bq={x:Ch+BO*Math.cos(Ah*1.25),y:Cg+BO*Math.sin(Ah*1.25)};Bl={x:Ch+BO*Math.cos(Ah*0.25),y:Cg+BO*Math.sin(Ah*0.25)};Cj.save();Cj.clip();var BQ=Cj.createLinearGradient(Bq.x,Bq.y,Bl.x,Bl.y);BQ.addColorStop(0,"rgba(0,0,0,"+CS+")");BQ.addColorStop(1,"rgba(255,255,255,"+CS+")");Cj.fillStyle=BQ;Cj.fill();Cj.restore();break;}break;case M:Bi=B3[Br.Format];CQ=Bi.Bevel;var CS;var CU;var Ch;var Cg;var Bs;var Bd;var CT;var By;var Bv;var Cl;if(C4.IsAnimated===0){Ch=Br.CX;Cg=Br.CY;Bs=Br.InnerRadius;Bd=Br.OuterRadius;CT=Br.RGUsage;By=Br.HEP;if(By==1){Bv=Br.ExtraDepth;Cl=Br.ExtraIntensity;}}else{Ch=Br.CX[0]*(1-B5)+Br.CX[1]*B5;Cg=Br.CY[0]*(1-B5)+Br.CY[1]*B5;Bs=Br.InnerRadius[0];Bd=Br.OuterRadius[0];CT=Br.RGUsage[0];By=Br.HEP[0];if(By==1){Bv=Br.ExtraDepth[0];Cl=Br.ExtraIntensity[0];}}switch(CT){case p:CS=CQ.Intensity*0.01*Bi.Alpha/255;CU=1-CQ.Depth*0.01;Cy=Cj.createRadialGradient(Ch,Cg,Bs,Ch,Cg,Bd);CJ="RGBA(0,0,0,"+CS+")";CA="RGBA(255,255,255,"+CS+")";Cy.addColorStop(0,CJ);Cy.addColorStop(CU,CA);Cy.addColorStop(1,CJ);Cj.fillStyle=Cy;Cj.fill();break;case A3:CS=CQ.Intensity*0.01*Bi.Alpha/255;Cy=Cj.createRadialGradient(Ch,Cg,Bs,Ch,Cg,Bd);CJ="RGBA(0,0,0,"+CS+")";CA="RGBA(255,255,255,"+CS+")";Cy.addColorStop(0,CJ);Cy.addColorStop(1,CA);Cj.fillStyle=Cy;Cj.fill();break;case Ai:if(By==0){CS=CQ.Intensity*0.01*Bi.Alpha/255;CU=CQ.Depth*0.01;}else{CS=Cl*0.01*Bi.Alpha/255;CU=Bv*0.01;}Cy=Cj.createRadialGradient(Ch,Cg,Bs,Ch,Cg,Bd);CJ="RGBA(0,0,0,"+CS+")";CA="RGBA(255,255,255,"+CS+")";Cy.addColorStop(0,CJ);Cy.addColorStop(CU,CA);Cy.addColorStop(1,CJ);Cj.fillStyle=Cy;Cj.fill();break;}break;case BI:Bi=B3[Br.Format];CQ=Bi.Bevel;CS=CQ.Intensity*0.01*Bi.Alpha/255;CU=1-CQ.Depth*0.01;CJ="RGBA(0,0,0,"+CS+")";CA="RGBA(255,255,255,"+CS+")";Cy=Cj.createLinearGradient(Br.StartPoint.X,Br.StartPoint.Y,Br.EndPoint.X,Br.EndPoint.Y);Cy.addColorStop(0,CJ);Cy.addColorStop(CU,CA);Cy.addColorStop(1,CJ);Cj.save();Cj.clip();Cj.fillStyle=Cy;Cj.fill();Cj.restore();break;case BL:case AU:break;case Q:var Ci;BR=Br.Format;Bi=B3[BR];if(Bi.Gradient&&Bi.Gradient.Valid){var Cv=Bi.Gradient,Cp=Cv.Colors,Bq=Cv.Start,Bl=Cv.End;if(Cv.style==0){var Bz=Cj.createLinearGradient(Bq.x,Bq.y,Bl.x,Bl.y);}else{if(Cv.angle==0){Bz=Cj.createLinearGradient(Bq.x,0,Bl.x,0);}else{Bz=Cj.createLinearGradient(0,Bq.y,0,Bl.y);}}var Bg,CB=1,Cu=Cp.length;if(Cu>0){for(CI=0;CI<Cu;CI++){Bg="RGBA("+Math.round(CB*Cp[CI].Color.mR)+", "+Math.round(CB*Cp[CI].Color.mG)+", "+Math.round(CB*Cp[CI].Color.mB)+", "+Bi.Alpha/255+")";Bz.addColorStop(Cp[CI].Step,Bg);}Ci=Bz;}else{Bn=Bi.Color;Ci="RGBA("+Bn.R+", "+Bn.G+", "+Bn.B+", "+Bi.Alpha/255+")";}}else{Bn=Bi.Color;Ci="RGBA("+Bn.R+", "+Bn.G+", "+Bn.B+", "+Bi.Alpha/255+")";}Cj.strokeStyle=Ci;Cj.stroke();break;case N:BR=Br.Format;Bi=B3[BR];Bn=Bi.Color;Cj.font=Bi.Size+"px "+Bi.Name;if(Bi.Style&2){Cj.font="italic "+Cj.font;}if(Bi.Style&1){Cj.font="bold "+Cj.font;}Cj.fillStyle="RGBA("+Bn.R+", "+Bn.G+", "+Bn.B+", "+Bi.Alpha/255+")";Cj.fillText(Br.Text,Br.StartPoint.X,Br.StartPoint.Y);if(Bi.Style&12){Cj.beginPath();var CR=Cj.measureText(Br.Text);if(Bi.Style&4){Cj.moveTo(Math.round(Br.StartPoint.X),Math.round(Br.StartPoint.Y));Cj.lineTo(Math.round(Br.StartPoint.X+CR.width),Math.round(Br.StartPoint.Y));}if(Bi.Style&8){Cj.moveTo(Math.round(Br.StartPoint.X),Math.round(Br.StartPoint.Y-Bi.Size*0.5));Cj.lineTo(Math.round(Br.StartPoint.X+CR.width),Math.round(Br.StartPoint.Y-Bi.Size*0.5));}Cj.strokeStyle="RGBA("+Bn.R+", "+Bn.G+", "+Bn.B+", "+Bi.Alpha/255+")";Cj.lineWidth=Math.round(Math.max(1,Bi.Size*3/40));Cj.stroke();}break;case AX:var C1;if(C4.IsAnimated===0){C1=Br.Rect;}else{C1=Br.Rect[0];var C5=Br.Rect[1];C1.X=C1.X*(1-B5)+C5.X*B5;C1.Y=C1.Y*(1-B5)+C5.Y*B5;C1.Width=C1.Width*(1-B5)+C5.Width*B5;C1.Height=C1.Height*(1-B5)+C5.Height*B5;}var CG=Br.RotationAngle;var CP=Br.BevelDepth;var Cc=Br.LTColor;var Ca=Br.LTAlpha;var Ct=Br.RBColor;var Cq=Br.RBAlpha;var Cs={X:C1.X+C1.Width/2,Y:C1.Y+C1.Height/2};var Cf={X:0,Y:0,Width:0,Height:0};Cf.X=C1.X;Cf.Y=C1.Y;Cf.Width=C1.Width;Cf.Height=C1.Height;BH(Cf,CP,CP);var Bk=[];Bk.push(A5({X:C1.X,Y:C1.Y},Cs,CG));Bk.push(A5({X:C1.X+C1.Width,Y:C1.Y},Cs,CG));Bk.push(A5({X:C1.X+C1.Width,Y:C1.Y+C1.Height},Cs,CG));Bk.push(A5({X:C1.X,Y:C1.Y+C1.Height},Cs,CG));var Cn=[];Cn.push(A5({X:Cf.X,Y:Cf.Y},Cs,CG));Cn.push(A5({X:Cf.X+Cf.Width,Y:Cf.Y},Cs,CG));Cn.push(A5({X:Cf.X+Cf.Width,Y:Cf.Y+Cf.Height},Cs,CG));Cn.push(A5({X:Cf.X,Y:Cf.Y+Cf.Height},Cs,CG));var Bc=[];Bc.push(A5({X:C1.X,Y:C1.Y+C1.Height},Cs,CG));Bc.push(A5({X:Cf.X,Y:Cf.Y+Cf.Height},Cs,CG));Bc.push(A5({X:Cf.X,Y:Cf.Y},Cs,CG));Bc.push(A5({X:Cf.X+Cf.Width,Y:Cf.Y},Cs,CG));Bc.push(A5({X:C1.X+C1.Width,Y:C1.Y},Cs,CG));Bc.push(A5({X:C1.X,Y:C1.Y},Cs,CG));C(Cj,Bc,false,false);Cj.fillStyle="RGBA("+Cc.R+", "+Cc.G+", "+Cc.B+", "+Ca/255+")";Cj.fill();var BW=[];BW.push(A5({X:C1.X,Y:C1.Y+C1.Height},Cs,CG));BW.push(A5({X:Cf.X,Y:Cf.Y+Cf.Height},Cs,CG));BW.push(A5({X:Cf.X+Cf.Width,Y:Cf.Y+Cf.Height},Cs,CG));BW.push(A5({X:Cf.X+Cf.Width,Y:Cf.Y},Cs,CG));BW.push(A5({X:C1.X+C1.Width,Y:C1.Y},Cs,CG));BW.push(A5({X:C1.X+C1.Width,Y:C1.Y+C1.Height},Cs,CG));C(Cj,BW,false,false);Cj.fillStyle="RGBA("+Ct.R+", "+Ct.G+", "+Ct.B+", "+Cq/255+")";Cj.fill();Cj.strokeStyle="RGBA(230, 230, 230, "+Ca*0.5/255+")";Cj.lineWidth=1;C(Cj,Bk,true,true);Cj.stroke();C(Cj,Cn,true,true);Cj.stroke();break;}}}function A2(BO,BP){return 1-(Math.sqrt((BP-256)*(BP-256)+(BO-256)*(BO-256))/(1.5*256));}function W(BS,BO,BT,BQ,BP){var BR=(BQ&&BP)?0.5:0;BS.moveTo(BO+BR,BT+BR);}function BM(BS,BO,BT,BQ,BP){var BR=(BQ&&BP)?0.5:0;BS.lineTo(BO+BR,BT+BR);}function k(BR,BO,BQ,BP){var BT=BO.length;if(BT<=0){return ;}BR.beginPath();W(BR,BO[0].X,BO[0].Y,BQ,BP);var BS=0;for(i=1;i<BT;++i){BM(BR,BO[i].X,BO[i].Y,BQ,BP);BS=i;}}function Y(BQ){var BP=BB[BQ];var BO=BP.length/2;return{number:BO,points:BP};}function AR(BX,BS,BP){var BO=[];if(BX==AG){BO.push({X:BS.X-BP,Y:BS.Y-BP});BO.push({X:BS.X+BP,Y:BS.Y-BP});BO.push({X:BS.X+BP,Y:BS.Y+BP});BO.push({X:BS.X-BP,Y:BS.Y+BP});return BO;}var BU;var BW;var BT=Y(BX);BU=BT.number;BW=BT.points;for(var BV=0;BV<BU;BV++){var BR=(BW[2*BV])*BP/A8+BS.X;var BQ=(BW[2*BV+1])*BP/A8+BS.Y;BO.push({X:BR,Y:BQ});}return BO;}function C(BT,BP,BR,BQ){var BV=BP.length;if(BV<3){return ;}BT.beginPath();if(BR&&BQ){var BO=[];for(var BS=0;BS<BV;++BS){BO.push(BP[BS]);}var BU=BV-1;for(var BS=0;BS<BV;++BS){lNextIndex=(BS+1==BV)?0:BS+1;if(BP[BS].X==BP[BU].X||BP[BS].X==BP[lNextIndex].X){BO[BS].X+=0.5;}if(BP[BS].Y==BP[BU].Y||BP[BS].Y==BP[lNextIndex].Y){BO[BS].Y+=0.5;}BU=BS;}k(BT,BO,false,BQ);}else{k(BT,BP,false,BQ);}BT.closePath();}function BC(BO,BR,BQ){var BS=BO.X-BR.X;var BP=BO.Y-BR.Y;BO.X=BR.X+Math.cos(BQ)*BS-Math.sin(BQ)*BP;BO.Y=BR.Y+Math.sin(BQ)*BS+Math.cos(BQ)*BP;return BO;}function A5(BO,BQ,BP){return BC(BO,BQ,BP);}function BH(BP,BQ,BO){if(BQ*2>BP.Width){BQ=BP.Width/2;}if(BO*2>BP.Height){BO=BP.Height/2;}return AJ(BP,-BQ,-BO);}function AJ(BP,BQ,BO){BP.X-=BQ;BP.Y-=BO;BP.Width+=(BQ*2);BP.Height+=(BO*2);return BP;}function w(BP,BO,BQ){return S(BP,BO)+S(BO,BQ)+S(BQ,BP);}function q(BP,BO){return Math.sqrt((BP.X-BO.X)*(BP.X-BO.X)+(BP.Y-BO.Y)*(BP.Y-BO.Y));}function P(BR,BV,Be){var Ba=Be;var BQ=BR.length;var BZ=BV;var Bb=BR[(BZ+BQ-1)%BQ];var BY=BR[(BZ+1)%BQ];var BT=0;var Bd={X:0,Y:0};var Bc={X:BR[BV].X-BR[(BV+BQ-1)%BQ].X,Y:BR[BV].Y-BR[(BV+BQ-1)%BQ].Y};for(var BW=(BZ+2)%BQ;BW!=BZ;BW=(BW+1)%BQ){var BX=BW-1;if(BX<0){BX+=BQ;}var Bg={X:BR[BX].X-BR[BZ].X,Y:BR[BX].Y-BR[BZ].Y};var Bf={X:BR[BW].X-BR[BZ].X,Y:BR[BW].Y-BR[BZ].Y};if(S(Bc,Bg)<0.01&&S(Bc,Bf)>0.01){var BP=d(Bb,BR[BZ],BR[BX],BR[BW],Bd,false);Bd=BP.interSection;BT=BW;break;}}var BO=0;var BU={X:0,Y:0};var BS={X:BR[BV].X-BR[(BV+1)%BQ].X,Y:BR[BV].Y-BR[(BV+1)%BQ].Y};for(var BW=(BZ+BQ-2)%BQ;BW!=BZ;BW=(BW-1+BQ)%BQ){var BX=BW+1;if(BX>=BQ){BX-=BQ;}var Bg={X:BR[BX].X-BR[BZ].X,Y:BR[BX].Y-BR[BZ].Y};var Bf={X:BR[BW].X-BR[BZ].X,Y:BR[BW].Y-BR[BZ].Y};if(S(BS,Bg)>-0.01&&S(BS,Bf)<-0.01){var BP=d(BY,BR[BZ],BR[BX],BR[BW],BU,false);BU=BP.interSection;BO=BW;break;}}Ba.push(BR[BZ]);Ba.push(Bd);for(m=BT;;m=(m+1)%BQ){Ba.push(BR[m]);if(m==BO){break;}}Ba.push(BU);return Ba;}function j(BZ,BW){var BX=BZ.length;if(BX==3){var BP=BN(BZ,BW);return BP;}else{var Bg=BZ[BX-1];var BO={X:BZ[1].X-BZ[0].X,Y:BZ[1].Y-BZ[0].Y};var Ba={X:-BO.X,Y:-BO.Y};var BR={X:Bg.X-BZ[0].X,Y:Bg.Y-BZ[0].Y};var Bh={X:-BR.X,Y:-BR.Y};var BT=false;var BY=10000000000;for(var Bf=2;Bf<BX;++Bf){var Bd=Bf-1;var Be={X:BZ[Bf].X-BZ[Bd].X,Y:BZ[Bf].Y-BZ[Bd].Y};if(S(Ba,Be)<-0.01){var BQ={X:0,Y:0};var BU=d(BZ[0],BZ[1],BZ[Bd],BZ[Bf],BQ,false);BQ=BU.interSection;if(BU.val>0){var BV={X:BQ.X-BZ[0].X,Y:BQ.Y-BZ[0].Y};if(AN(BO,BV)>0.01){var BS={X:BQ.X+Be.X,Y:BQ.Y+Be.Y};var Bb={X:0,Y:0};var Bc;var BP=U(Bg,BZ[0],BQ,BS,Bb,Bc);Bb=BP.point;Bc=BP.val;if(BP.mark){BT=true;if((Bc<BY)&&Aq(Bb,BZ[Bd-1],BZ[Bd],BZ[Bf],BZ[(Bf+1)%BX])){BY=Bc;}}}}}else{if(S(Bh,Be)<-0.01){var BQ={X:0,Y:0};var BU=d(BZ[0],Bg,BZ[Bd],BZ[Bf],BQ,false);BQ=BU.interSection;if(BU.val>0){var BV={X:BQ.X-BZ[0].X,Y:BQ.Y-BZ[0].Y};if(AN(BR,BV)>0.01){var BS={X:BQ.x-Be.x,Y:BQ.y-Be.y};var Bb={X:0,Y:0};var Bc;var BP=U(BS,BQ,BZ[0],BZ[1],Bb,Bc);Bb=BP.point;Bc=BP.val;if(BP.mark){BT=true;if((Bc<BY)&&Aq(Bb,BZ[Bd-1],BZ[Bd],BZ[Bf],BZ[(Bf+1)%BX])){BY=Bc;}}}}}}}return{mark:BT,depth:BY};}}function Av(BO){return BO.X*BO.X+BO.Y*BO.Y;}function Aw(Ba,BY,BX,BS){var BT={X:Ba.X-BY.X,Y:Ba.Y-BY.Y};var BR={X:BX.X-BY.X,Y:BX.Y-BY.Y};var BQ=Math.sqrt(Av(BT));var BP=Math.sqrt(Av(BR));var BW={X:BT.X/BQ,Y:BT.Y/BQ};var BV={X:BR.X/BP,Y:BR.Y/BP};var BZ=0;if(Math.abs(BW.X-BV.X)<0.01){BZ=BS*(BV.X+BW.X)/(BW.Y-BV.Y);}else{BZ=BS*(BV.Y+BW.Y)/(BV.X-BW.X);}var BU={X:0,Y:0};var BO={X:0,Y:0};BU.X=BY.X+BZ*BV.X;BU.Y=BY.Y+BZ*BV.Y;BO.X=BU.X+BS*(-BV.Y);BO.Y=BU.Y+BS*BV.X;return{start:BO,end:BU};}function An(BP,BO){var BQ=AN(BP,BO)/(Math.sqrt(Av(BP)*Av(BO)));BQ=(BQ>1)?1:BQ;BQ=(BQ<-1)?-1:BQ;return Math.acos(BQ);}function Aq(BU,Bc,Bb,BZ,BY){var BW={X:Bc.X-Bb.X,Y:Bc.Y-Bb.Y};var BT={X:BZ.X-Bb.X,Y:BZ.Y-Bb.Y};var Ba=u(An(BW,BT));if(S(BT,BW)<-0.01){Ba=360-Ba;}var BQ={X:BU.X-Bb.X,Y:BU.Y-Bb.Y};var BV=u(An(BQ,BT));if(S(BT,BQ)<-0.01){BV=360-BV;}if(2*BV>Ba){return false;}var BP={X:-BT.X,Y:-BT.Y};var BO={X:BY.X-BZ.X,Y:BY.Y-BZ.Y};var BX=u(An(BP,BO));if(S(BO,BP)<-0.01){BX=360-BX;}var BS={X:BU.X-BZ.X,Y:BU.Y-BZ.Y};var BR=u(An(BP,BS));if(S(BS,BP)<-0.01){BR=360-BR;}if(2*BR>BX){return false;}return true;}function AS(BO){return Math.sqrt(Av(BO));}function U(Bc,Bb,BZ,BX,BS,Bf){var Bn;var Be;var Bl={X:Bb.X-Bc.X,Y:Bb.Y-Bc.Y};var Bh={X:BX.X-BZ.X,Y:BX.Y-BZ.Y};var BV={X:BZ.X-Bb.X,Y:BZ.Y-Bb.Y};var Bk=Math.sqrt(Av(BV));var Bi=S(Bl,Bh);if(Bi>0.01||Bi<-0.01){var BW={X:0,Y:0};var BY=d(Bc,Bb,BZ,BX,BW,false);BW=BY.interSection;var Bj=q(Bb,BW);var BP=q(BZ,BW);if(Bi<-0.01){var BR=Bk+Bj+BP;BS.X=(BP*Bb.X+Bj*BZ.X+Bk*BW.X)/BR;BS.Y=(BP*Bb.Y+Bj*BZ.Y+Bk*BW.Y)/BR;Bn=w(Bb,BZ,BW)/BR;Be=true;}else{var BR=Bj+BP-Bk;if(BR<0.01){var Bg=0;if(Math.abs(S(Bl,BV))<0.01){var Bm={X:-BV.X/Bk,Y:-BV.Y/Bk};var BQ=Math.sqrt(Av(Bh));var BT={X:Bh.X/BQ,Y:Bh.Y/BQ};Bg=(Bm.Y-BT.Y)*Bk/(Bm.X+BT.X);BS.X=Bb.X+Bg*Bm.Y;BS.Y=Bb.Y+Bg*(-Bm.X);}else{var Ba={X:BV.X/Bk,Y:BV.Y/Bk};var Bd=AS(Bl);var BU={X:-Bl.X/Bd,Y:-Bl.Y/Bd};Bg=(BU.Y-Ba.Y)*Bk/(BU.X+Ba.X);BS.X=BZ.X+Bg*(-Ba.Y);BS.Y=BZ.Y+Bg*Ba.X;}Bn=Bg;Be=true;return{val:Bn,mark:Be,point:BS};}BS.X=(BP*Bb.X+Bj*BZ.X-Bk*BW.X)/BR;BS.Y=(BP*Bb.Y+Bj*BZ.Y-Bk*BW.Y)/BR;Bn=w(Bb,BW,BZ)/BR;Be=true;}}else{if(Math.abs(S(Bl,BV))<0.01){Be=false;return{val:Bn,mark:Be,point:BS};}var Bd=Math.sqrt(Av(Bl));var BO={X:-Bl.X/Bd,Y:-Bl.Y/Bd};BS.X=(Bb.X+BZ.X+Bk*BO.X)/2;BS.Y=(Bb.Y+BZ.Y+Bk*BO.Y)/2;Bn=S(BV,BO)/2;Be=true;}return{val:Bn,mark:Be,point:BS};}function BN(Bc,BZ){var Bl=false;var BP=Bc.length;if(BP==3){var BX=q(Bc[0],Bc[1]);var BW=q(Bc[1],Bc[2]);var BV=q(Bc[2],Bc[0]);var BO=BX+BW+BV;BZ=w(Bc[0],Bc[1],Bc[2])/BO;Bl=true;}else{var BU=false;var Bb=10000000000;for(var Bh=0;Bh<BP;++Bh){var Bi=Bc[Bh];var Bj=Bc[(Bh+BP-1)%BP];var Bg=Bc[(Bh+1)%BP];var Bf=Bc[(Bh+2)%BP];var BS={X:Bj.X-Bi.X,Y:Bj.Y-Bi.Y};var BQ={X:Bg.X-Bi.X,Y:Bg.Y-Bi.Y};var Bd={X:-BQ.X,Y:-BQ.Y};var Ba={X:Bf.X-Bg.X,Y:Bf.Y-Bg.Y};var BY=S(BS,BQ);if(BY<0.01){if(S(Bd,Ba)<0.01){var BT={X:0,Y:0};var Be=0;var BR=U(Bj,Bi,Bg,Bf,BT,Be);BT=BR.point;Be=BR.val;if(BR.mark){BU=true;Bb=(Bb>Be)?Be:Bb;}}}else{if(BY>0.01){var Bk=[];Bk=P(Bc,Bh,Bk);var BR=j(Bk,Be);var Be=BR.depth;if(BR.mark){BU=true;Bb=(Bb>Be)?Be:Bb;}}}}BZ=Bb;Bl=BU;}return{mark:Bl,depth:BZ};}function AY(BP,BO){return(Math.abs(BP.X-BO.X)<0.01&&Math.abs(BP.Y-BO.Y)<0.01);}function AH(BP){var BQ=[];BQ.push(BP[0]);pcount=BP.length;for(var BO=1;BO<pcount;BO++){if(BP[BO-1].X==BP[BO].X&&BP[BO-1].Y==BP[BO].Y){continue;}BQ.push(BP[BO]);}var BR=new Array();pcount=BQ.length;for(var BO=0;BO<pcount;BO++){if(BO===pcount-1){if(BQ[BO].X==BQ[0].X&&BQ[BO].Y==BQ[0].Y){continue;}}BR.push(BQ[BO]);}return BR;}function Aa(BP,BO,BS,BR){var BQ=0.01;if(BR===false){BQ=-0.01;}if(Math.abs(BO.X-BS.X)<0.01){if(BP.Y-BO.Y>BQ&&BS.Y-BP.Y>BQ){return true;}if(BP.Y-BS.Y>BQ&&BO.Y-BP.Y>BQ){return true;}}else{if(BP.X-BO.X>BQ&&BS.X-BP.X>BQ){return true;}if(BP.X-BS.X>BQ&&BO.X-BP.X>BQ){return true;}}return false;}function d(BY,BX,BV,BU,BT,BP){var BQ={X:BX.X-BY.X,Y:BX.Y-BY.Y};var BR={X:BU.X-BV.X,Y:BU.Y-BV.Y};if(Math.abs(S(BQ,BR))<0.01){var BO={X:BV.X-BY.X,Y:BV.Y-BY.Y};if(Math.abs(S(BQ,BO))<0.01){return{val:-1,interSection:BT};}else{return{val:0,interSection:BT};}}else{var BS={X:BY.X-BV.X,Y:BY.Y-BV.Y};var BW=S(BR,BS)/S(BQ,BR);BT.X=BY.X+BW*BQ.X;BT.Y=BY.Y+BW*BQ.Y;if(Aa(BT,BY,BX,BP)&&Aa(BT,BV,BU,BP)){return{val:1,interSection:BT};}else{return{val:2,interSection:BT};}}}function AD(BX,BQ,BS){var BP=BQ;while(BP<0){BP+=360;}while(BP>=360){BP-=360;}var Ba=BX.X+BX.Width-BS.x;var BV=BS.y-BX.Y;var Bc=BS.x-BX.X;var BT=BX.Y+BX.Height-BS.y;var BY=AB(BP);var BR={x:Math.cos(BY),y:-Math.sin(BY)};var BU;var BO;if(BP>=0&&BP<90){var Bd={x:Ba,y:-BV};var BZ={x:-Bc,y:BT};BU=O(Bd,BR);BO=O(BZ,BR);}else{if(BP>=90&&BP<180){var Be={x:-Bc,y:-BV};var Bb={x:Ba,y:BT};BU=O(Be,BR);BO=O(Bb,BR);}else{if(BP>=180&&BP<270){var Bd={x:Ba,y:-BV};var BZ={x:-Bc,y:BT};BU=O(BZ,BR);BO=O(Bd,BR);}else{var Be={x:-Bc,y:-BV};var Bb={x:Ba,y:BT};BU=O(Bb,BR);BO=O(Be,BR);}}}b.x=BS.x+BU*BR.x;b.y=BS.y+BU*BR.y;f.x=BS.x+BO*BR.x;f.y=BS.y+BO*BR.y;var BW=-BO/(BU-BO);if(BW<0){BW=0;}else{if(BW>1){BW=1;}}return BW;}function AB(BO){return BO*Ah/180;}function u(BO){return BO*180/Ah;}function O(BP,BO){return(BP.x*BO.x+BP.y*BO.y);}function AN(BP,BO){return(BP.X*BO.X+BP.Y*BO.Y);}function S(BP,BO){return(BP.X*BO.Y-BP.Y*BO.X);}function Ay(BQ,Bg,BP,BR){var BO=Bg.Gradient;var Bc="RGBA("+Math.round(BR*BO.StartGraphColor.R)+", "+Math.round(BR*BO.StartGraphColor.G)+", "+Math.round(BR*BO.StartGraphColor.B)+", "+Bg.Alpha/255+")";var Ba="RGBA("+Math.round(BR*BO.EndGraphColor.R)+", "+Math.round(BR*BO.EndGraphColor.G)+", "+Math.round(BR*BO.EndGraphColor.B)+", "+BO.EndAlpha/255+")";var BY;switch(BO.GradientType){case a:if(BO.style==0){var Bi=BO.HorizontalOffset;if((BO.Angle>90&&BO.Angle<180)||BO.Angle>270){Bi=100-Bi;}var Be={x:BP.X+BP.Width*Bi/100,y:BP.Y+BP.Height*BO.VerticalOffset/100};f={x:0,y:0};b={x:0,y:0};var BS=AD(BP,BO.Angle,Be);BY=BQ.createLinearGradient(f.x,f.y,b.x,b.y);BY.addColorStop(0,Ba);BY.addColorStop(BS,Bc);BY.addColorStop(1,Ba);}else{var BV=BO.Angle==0;f={x:0,y:0};b={x:0,y:0};if(BV){f.x=BP.X;b.x=BP.X+BP.Width;f.y=b.y=0;}else{f.y=BP.Y;b.y=BP.Y+BP.Height;f.x=b.x=0;}BY=BQ.createLinearGradient(f.x,f.y,b.x,b.y);BY.addColorStop(0,Bc);var Bh=BO.IntermediateColors;for(var Bf=0;Bf<Bh.length;Bf++){var Bb=Bh[Bf].Color;var Bd="RGBA("+Math.round(BR*Bb.mR)+", "+Math.round(BR*Bb.mG)+", "+Math.round(BR*Bb.mB)+", "+Bg.Alpha/255+")";BY.addColorStop(Bh[Bf].Step,Bd);}BY.addColorStop(1,Ba);}BQ.fillStyle=BY;BQ.fill();break;case I:var Be={x:BP.X+BP.Width*BO.HorizontalOffset/100,y:BP.Y+BP.Height*BO.VerticalOffset/100};var BW=BP.Width*1/BP.Height;Be.y*=BW;BY=BQ.createRadialGradient(Be.x,Be.y,0,Be.x,Be.y,BP.Width*2);BY.addColorStop(0,Bc);BY.addColorStop(0.5,Ba);BY.addColorStop(1,Ba);BQ.fillStyle=BY;BQ.save();BQ.scale(1,1/BW);BQ.fill();BQ.restore();break;case AK:var Be={x:BP.X+BP.Width*BO.HorizontalOffset/100,y:BP.Y+BP.Height*BO.VerticalOffset/100};var BT=BO.Angle%90;var BX=u(Math.atan(BP.Height/BP.Width));var BU=2*BT-BX*BT/45+90+BX;f={x:0,y:0};b={x:0,y:0};var BS=AD(BP,BU,Be);var BZ=BQ.createLinearGradient(f.x,f.y,b.x,b.y);Bc="RGBA("+Math.round(BR*BO.StartGraphColor.R)+", "+Math.round(BR*BO.StartGraphColor.G)+", "+Math.round(BR*BO.StartGraphColor.B)+", "+Bg.Alpha/(255*2-Bg.Alpha)+")";Ba="RGBA("+Math.round(BR*BO.EndGraphColor.R)+", "+Math.round(BR*BO.EndGraphColor.G)+", "+Math.round(BR*BO.EndGraphColor.B)+", "+BO.EndAlpha/(255*2-BO.EndAlpha)+")";BZ.addColorStop(0,Ba);BZ.addColorStop(BS,Bc);BZ.addColorStop(1,Ba);BQ.fillStyle=BZ;BQ.fill();BU=BX*BT/45+90-BX;BS=AD(BP,BU,Be);BY=BQ.createLinearGradient(f.x,f.y,b.x,b.y);Bc="RGBA("+Math.round(BR*BO.StartGraphColor.R)+", "+Math.round(BR*BO.StartGraphColor.G)+", "+Math.round(BR*BO.StartGraphColor.B)+", "+Bg.Alpha/(255*2)+")";Ba="RGBA("+Math.round(BR*BO.EndGraphColor.R)+", "+Math.round(BR*BO.EndGraphColor.G)+", "+Math.round(BR*BO.EndGraphColor.B)+", "+BO.EndAlpha/(255*2)+")";BY.addColorStop(0,Ba);BY.addColorStop(BS,Bc);BY.addColorStop(1,Ba);BQ.fillStyle=BY;BQ.fill();break;}}function Ap(BO,BQ){var BP=BQ.Alpha/255;BO.fillStyle="rgba(255,255,255,"+BQ.Alpha/255+")";BO.fill();}function AL(BP){var BO=BP.canvas;BP.clearRect(0,0,BO.width,BO.height);}function Am(BO){Au=(new Date()).getTime();L(BO);}function L(BX){var BW=BX.graphData,BY=BW.UnitList,BZ=BY.length,BR=BW.FormatList,Bc=BX.graphNode,BU=BX.highlightNode,BS=BU.getContext("2d"),Bb=BX.selectionNode,BT=Bb.getContext("2d"),BQ=Bc.getContext("2d");AL(BQ);AL(BS);AL(BT);var Bd=Math.min(((new Date()).getTime()-Au)/AF,1),Ba=(1-Bd),BV;var BO=0.3*Bd*Ba*Ba+2.7*Ba*Bd*Bd+Bd*Bd*Bd;var BP=0;for(BV=0;BV<BZ;BV++){As(BQ,BO,BY[BV],BR);if(BY[BV].IsAnimated!==0){BP=1;}}if(Bd<1&&BP===1){setTimeout(function(){L(BX);},20);}}mstrmojo.graph._CanvasGraph=mstrmojo.provide("mstrmojo.graph._CanvasGraph",{markupString:'<div class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><canvas id="{@id}" height="{@height}" width="{@width}">{@unsupportedError}</canvas>{@map}<canvas id="{@id}-highlight" class="mobile-graph-selection-canvas" height="{@height}" width="{@width}" style="position:absolute;top:0;left:0"></canvas><canvas id="{@id}-highlight" class="'+mstrmojo.GraphBase.canvasCLS+'" height="{@height}" width="{@width}" style="position:relative;top:0;left:0"></canvas></div>',unsupportedError:"This text is displayed if your browser does not support HTML5 Canvas element.",markupSlots:{graphNode:function(){return this.domNode.childNodes[1];},imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return null;},textNode:function(){return this.domNode.firstChild;},selectionNode:function(){return this.domNode.lastChild.previousSibling;},highlightNode:function(){return this.domNode.lastChild;}},graphData:null,retrieveGraphSrc:function BG(BR,BV){var BT=this.graphNode,BW=this.highlightNode,BS=this.selectionNode,BU=this.graphData,BQ=(BU&&BU.data);if(BQ&&BQ.eg){var BX=this.textNode,BP=this.imgNode;BP.style.display="none";BW.style.display="none";BS.style.display="none";BX.innerHTML=BQ.eg||"";BX.style.display="block";BX.className="mstrmojo-message";}else{var BY=BU.GH||parseInt(BR,10),BO=BU.GW||parseInt(BV,10);BT.setAttribute("height",BY);BT.setAttribute("width",BO);BW.style.display="block";BW.setAttribute("height",BY);BW.setAttribute("width",BO);BW.style.top=-BY+"px";BS.style.display="block";BS.setAttribute("height",BY);BS.setAttribute("width",BO);this.displayTooltips([],0,0);Am(this);if(BU.Selected){this.highlightAreaInInit(BS,BU.Selected);}}},unrender:function AT(BO){this._super(false);},invalidate:function K(){var BO=this.graphNode;if(BO){AL(BO.getContext("2d"));}},getCaptureDimensions:function Ad(){var BP=this.graphNode,BO=mstrmojo.dom.position(this.domNode,true);BO.w=BP.width;BO.h=BP.height;return BO;}});}());(function(){mstrmojo.requiresCls("mstrmojo.GraphBase","mstrmojo._TouchGestures","mstrmojo.graph._MobileGraphAreaHelper");mstrmojo.MobileGraph=mstrmojo.declare(mstrmojo.GraphBase,[mstrmojo._TouchGestures,mstrmojo.graph._MobileGraphAreaHelper],{scriptClass:"mstrmojo.MobileGraph",areaMarkup:'<area shape="{@shape}" coords="{@coords}" ttl="{@tooltip}" aid="{@aid}" {@extra}/>',cssImageClass:"mstrmojo-ReportGraph",setDimensions:function I(M,L){if(this.height===M&&this.width===L){return ;}this.height=M;this.width=L;if(this.hasRendered){this.controller.refresh(this);}},preBuildRendering:function J(){var L=this.graphData.gd.g;this.as=L&&L.as;return this._super?this._super():true;},refresh:function F(){this.graphData=this.model.data;this._super();},retrieveGraphSrc:function E(M,L){var O="data:image/png;base64,"+this.graphData.ib.eb,N=this.imgNode;if(N.src!==O){N.src=O;}},getFormats:function G(){return{height:this.height,width:this.width,top:0,left:0};},touchTap:function B(){this.displayTooltips([],0,0);var L=this.controller;if(L&&L.viewTap){L.viewTap();}},touchSelectBegin:function D(L){this.syncTooltips(L.pageX,L.pageY);},touchSelectMove:function H(L){this.syncTooltips(L.pageX,L.pageY);},setModel:function K(L){this._super(L);this.setGraphData(L.data);},syncTooltips:function C(L,O){var M=this,N=mstrmojo.dom.position(M.domNode,true);L-=N.x;O-=N.y;M.model.getDataService().handleUserSingleTap(-1,"",L,O,false,{success:function(P){M.displayTooltips(P.Areas,N.x,N.y);}});},setGraphData:function A(L){this.graphData=L;this.controller.getPageByTree(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui._HasListTooltip");mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,scrollNodeMaxHeight:undefined,parentDomNode:undefined,keydownString:null,lastKeydownTime:null,keydownInterval:500,closeAfterSelection:true,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" tabIndex="-1" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu,keydown><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;},scrollboxNode:function A(){return this.domNode.firstChild;}},setupScrollNodes:function F(){this.scrollNode=this.scrollboxNode;},onOpen:function E(){this._super();this.updateScrollbars();var M=this;setTimeout(function(){M.scrollToSelectedItem();},10);},onclick:function K(M){this.closeAfterSelection=true;this._super(M);},postBuildRendering:function B(){var N=this._super();if(!this.parent){var M=this.parentDomNode=this.parentDomNode||document.body;M.appendChild(this.domNode);}return N;},closePopup:function J(){this.set("visible",false);},onkeydown:function H(O){if(!this.opener||!this.opener.focusOnPopup){return ;}var M=O.hWin,R=O.e||M.event,U=this.keydownString;this.locksHover=false;this.closeAfterSelection=false;if(R.keyCode===mstrmojo.Enum_Keys.DOWN_ARROW){if(this.selectedIndex<this.items.length-1){this.set("selectedIndex",this.selectedIndex+1);this.scrollToSelectedItem();}}else{if(R.keyCode===mstrmojo.Enum_Keys.UP_ARROW){if(this.selectedIndex>0){this.set("selectedIndex",this.selectedIndex-1);this.scrollToSelectedItem();}}else{if(R.keyCode===mstrmojo.Enum_Keys.ENTER||R.keyCode===mstrmojo.Enum_Keys.ESCAPE){this.closeAfterSelection=true;this.singleSelect(this.selectedIndex);}else{var S=new Date(),P=S.getTime(),N=String.fromCharCode(R.keyCode).toLowerCase(),Q=this;if(this.lastKeydownTime===null){this.keydownString=N;}else{if(P-this.lastKeydownTime<this.keydownInterval){this.keydownString=this.keydownString+N;}else{this.keydownString=N;}}U=this.keydownString;if(this._holdTimer){clearTimeout(this._holdTimer);}this._holdTimer=setTimeout(function(){Q.changeSelectedItem(O);Q.adjustPosition();},Q.keydownInterval);this.lastKeydownTime=P;}}}},changeSelectedItem:function D(M){var P=this.selectedIndex,O=this.items&&this.items.length;if(O>0){var N;for(N=this.selectedIndex+1;N<this.items.length;N++){if(this.items[N].n.toLowerCase().indexOf(this.keydownString)==0){P=N;break;}}if(P===this.selectedIndex){for(N=0;N<this.selectedIndex;N++){if(this.items[N].n.toLowerCase().indexOf(this.keydownString)==0){P=N;break;}}}if(P!==this.selectedIndex){this.set("selectedIndex",P);}}},focus:function L(){this.domNode.focus();},scrollToSelectedItem:function G(){var P=this.itemsContainerNode.childNodes[this.selectedIndex];if(P){var M=this.scrollNode,O=M.clientHeight,N=P.offsetTop;if(N-M.scrollTop+P.offsetHeight>O){M.scrollTop=P.offsetTop+P.offsetHeight-O;}else{if(N<M.scrollTop){M.scrollTop-=P.offsetHeight;}}}},adjustPosition:function C(){this.adjustCornersForPopupOverflow();this.scrollToSelectedItem();this.focus();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var E=mstrmojo.dom,H=mstrmojo.css,F=mstrmojo.ui.PopupConfig.directionCfg;var C={};var B=false;function O(W,X){if(W.pop){if(X&&W.ax){window.clearTimeout(this._popupAxTimeout);W.actionFn();this.closeAllMenus();}else{var U=W.fn.call(mstrmojo.all[W.scope],W.ctxt);var V=U.ENUM_CORNERS,S=U.maxHeight,R=E.getMaxScrollHeight();U.setAlignment(V.TOP_RIGHT,V.TOP_LEFT);U.hostId=this.id;U.hostElement=this._getItemNode(W._renderIdx);U.includeScroll=this.includeScroll;U.supportsScroll=true;U.alignWithAnchor=true;U.isHostedWithin=false;U.maxHeight=S?Math.min(R,S):R;this.openPopup(U.newInstance());}}else{if(W.dsbld!==true){if(W.fn(W,this)!==false){this.closeAllMenus();}}}}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var S=this.scrollNode;if(!S){return ;}var R=E.getComputedScrollbarWidth(S);S.style.marginRight=-R+"px";S.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function P(U){this._super(U);if(!!mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}if(U.themeClassName){this.themeClassName=U.themeClassName;}var R=this.popupConfig;this.items=R.getMenuItems();var S=["mstrmojo-ui-Menu","unselectable"],V=R.menuCssClass;if(V){S.push(V);}if(R.hasToggleItem){S.push("hasToggleItem");}H.addWidgetCssClass(this,S);if(R&&R.supportsScroll&&R.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+R.maxHeight+"px";}this.useRichTooltip=!!R.useTooltip;this.tstid=R.tstid;},markupMethods:{onvisibleChange:function M(){var R=this.visible;if(!B||R){H.toggleClass(this.domNode,"visible",R);}}},getItemMarkup:function L(X,S){if(X.getItemMarkup){return X.getItemMarkup.apply(this,[X,S]);}var V=!!X.pop,W=V?"submenu":"item",U=C[W],R='<div class="micn"></div>';if(!U){R+=!!mstrApp.isWSStyling?'<div class="mtxt">{@en@n}</div>':"{@en@n}";if(V){R+='<div class="arw"></div>';}U=this._super(X,S).replace("{@en@n}",R);C[W]=U;}if(X.tstid){U=U.replace("{@tag}","{@tag} "+mstrmojo.tstid(X)+" ");}return U;},getItemProps:function J(U,R){var S=this._super(U,R);S.tag="a";S.addCls("mstrmojo-ui-Menu-item");S.addCls(U.cls);return S;},onmouseover:function Q(Y){var W=Y.config&&Y.config.targetHostElement?Y.config.targetHostElement:Y.getTarget(),a=this.getItemFromTarget(W),X=this,S=X._lastOpened,R=S&&this.getItemFromTarget(S.popupConfig.hostElement)._renderIdx,U=this.getItemNodeFromTarget(W),V=(R!==undefined&&E.contains(this._getItemNode(R),W,true,this.domNode));if(a){this._lastHoverIx=a._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==R&&!V){this._popupTimeOut=window.setTimeout(function(){if(X._lastOpened&&X._lastOpened.visible){X.closePopup();}if(X.visible&&a.pop){if(a.ax){X._popupAxTimeout=window.setTimeout(function(){H.removeClass(U,"hlt-ax");O.call(X,a);},0);}else{O.call(X,a);}}},400);if(a.pop&&a.ax){H.addClass(U,"hlt-ax");}}}var Z=this.popupConfig;if(Z&&!Z.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(Y.name,Y.hWin,Y.e,{targetHostElement:Z.hostElement}));}},onclick:function N(R){this._evtTarget=R.getTarget();this._super(R);R.cancel();},postselectionChange:function D(R){var S=R.added;if(S){var U=this.items[S[0]];O.call(this,U,!(U.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function G(R){E.preventDefault(window,R.e);return false;},postBuildRendering:function A(R){this._super(R);if(this.popupConfig.supportsScroll){var S=this;window.setTimeout(function(){S.updateScrollbars();},10);}},showTooltip:function K(W,V){var U=E.eventTarget(V,W),S=this.getItemNodeFromTarget(U),R=this.getItemFromTarget(U);this.itemDisabled=R&&R.dsbld;if(S&&((R&&R.ttp)||(S.scrollWidth>S.clientWidth)||(U.scrollWidth>U.clientWidth))){this._super(W,V);}},onCloseMenuCallBack:null,onClose:function I(R){if(this._super){this._super(R);}this.closePopup();if(this.onCloseMenuCallBack){this.onCloseMenuCallBack();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",hasToggleItem:false,contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.ui._HasScroller");mstrmojo.requiresDescs(1442,2140);var D=mstrmojo.dom,E=mstrmojo.array;function G(L,N){var K=2140,P="Cancel",O="this.parent.popupConfig."+(L?"ok":"cancel"),M=N&&N[(L?"ok":"cancel")+"BtnText"];if(L){K=1442;P="Ok";}return mstrmojo.Button.newWebButton(M||mstrmojo.desc(K,P),function(R){var S=this.parent,Q=S.popupConfig;S.closeAllMenus();Q["fn"+P](Q.data,S);D.stopPropogation(R.hWin,R.e);},L,{slot:"btnNode",bindings:{enabled:O+"Enabled",visible:O+"Visible"},cssDisplay:"inline-block"});}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="scroll-container" style="{@scCssText}"><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div></div>',markupSlots:{containerNode:function C(){return this.domNode.firstChild.firstChild;},btnNode:function H(){return this.domNode.firstChild.children[1];},bottomNode:function H(){return this.domNode.firstChild.children[2];},scrollNode:function(){return this.domNode.firstChild;},scrollbarHostNode:function(){return this.domNode;}},popupConfig:null,postBuildRendering:function A(K){this._super(K);if(this.popupConfig&&this.popupConfig.supportsScroll){var L=this;window.setTimeout(function(){L.updateScrollbars();},10);}},onmouseover:function J(L){var K=this.popupConfig;if(K&&!K.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(L.name,L.hWin,L.e,{targetHostElement:K.hostElement}));}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll){var L=this.scrollNode;if(!L){return ;}var K=D.getComputedScrollbarWidth(L);L.style.marginRight=-K+"px";L.style.paddingRight=0;}},monitorWindow:function F(){var L=document.activeElement,K=null;if(L!==null&&L.id!==""){K=this.domNode.querySelector("#"+L.id)?L:null;}this._super();if(K){K.focus();}},init:function I(M){this._super(M);var L=this.popupConfig,K=L.bottomNode;if(L&&L.supportsScroll&&L.maxHeight>0){if(L.cssClass.indexOf("RoleMenu")>-1){L.maxHeight=360;}this.cssText=(this.cssText||"")+";max-height:"+L.maxHeight+"px";this.scCssText=(this.scCssText||"")+";max-height:"+L.maxHeight+"px";}if(!!mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}this.data=L.data||{};if(L.onOpen){this.onOpen=L.onOpen;}this.addChildren([G(true,L),G(false)]);if(K){K.slot="bottomNode";this.addChildren(K);}},onOpen:function B(){E.forEach(this.children,function(K){if(K.scriptClass==="mstrmojo.ui.ScrollableContainer"&&K.onOpen){K.onOpen();}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextArea","mstrmojo._IsAndroidInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.dom","mstrmojo.css");var C=mstrmojo.dom,Q=mstrmojo.css,E=5,K=6,R=1,I=7,N=30;function A(W){if(W.style){var V=mstrmojo.css.getStyleValue(W,C.CSS3_TRANSFORM);if(V!=="none"){W.style[C.CSS3_TRANSFORM]=V;}}}function J(X){var W,V=X.childNodes.length;for(W=0;W<V;W++){var Y=X.childNodes[W];J(Y);A(Y);}}mstrmojo.android.inputControls.TextAreaDIC=mstrmojo.declare(mstrmojo.TextArea,[mstrmojo._IsAndroidInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.TextAreaDIC",cssDisplay:"block",init:function O(V){this._super(V);this.maxLength=this.dic.ml;if(!this.showByDefault){this.cssClass="mstrmojo-TextAreaDIC-Popup";this.rows=7;}},focus:function M(){C.setCaret(this.domNode,(this.value!=null&&String(this.value).length)||0);},onfocus:function U(){window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},onvalueChange:function L(){if(!this.showByDefault){this._super();}},onblur:function B(){if(this.showByDefault){this.applyChanges();}},applyChanges:function F(){if(!!this.domNode){this.domNode.blur();}var V=parseInt(this.dic.dt,10);if((V>=R&&V<=I)||V===N){this.value=parseFloat(this.value);}this._super();},cancelChanges:function G(){this.domNode.blur();this._super();},postBuildRendering:function S(){this._super();if(this.showByDefault){this.domNode.style.width="100%";this.domNode.style.height="100%";if(!mstrApp.isTablet()){C.attachEvent(this.domNode,"click",function(){J(document.body);},false);}var V=this;C.attachEvent(this.domNode,"blur",function(){var W=V.domNode;while(W!=null){if(W.scrollTop>0){W.scrollTop=0;break;}W=W.parentNode;}},false);}},renderPreview:function P(){var W=this.dic,V=(this.dv==null)?"":String(this.dv);if(!this.dicChanged){if(!V||!W.sp){V=W.siwc?"&nbsp;":(V||"&nbsp;");}else{V=this._getPreviewValue();}this.dv=V;}this.renderPreviewButton(this.openerNode,this.dv);Q.toggleClass(this.openerNode.firstChild,"filled",!this.dicChanged&&this.value!=null&&String(this.value).length>0);},getDisplayValue:function D(){var X=this.dic,V=this.value,W=(V==null)?"":String(V);if(!W||!X.sp){W=X.siwc?"&nbsp;":(mstrmojo.string.encodeHtmlString(W)||"&nbsp;");}else{W=this._getPreviewValue();}return W;},_getPreviewValue:function H(){var d=this.dic,b=this.value,V=(b==null)?"":String(b),Y="",e=/(.*href=['"])(.*)(['"].*>)(.*)(<.*)/i,a='<a href="mailto:"></a>';var Z=b.length>d.pl;b=Z?b.substring(0,d.pl):b;switch(this.ts){case K:Y="mailto:";case E:var W=mstrmojo.string.encodeHtmlString(this.value.replace(/\$/g,"$$$$")),X=mstrmojo.string.encodeHtmlString(b.replace(/\$/g,"$$$$"));X=Z?X+"&hellip;":X;V=a.replace(e,"$1"+Y+W+"$3"+X+"$5");break;default:if(!this.dicChanged){V=this.dv;}if(V.length>d.pl){V=this.dicChanged?mstrmojo.string.encodeHtmlString(V.substring(0,d.pl))+"&hellip;":V.substring(0,d.pl)+"&hellip;";}else{V=this.dicChanged?mstrmojo.string.encodeHtmlString(V):V;}}return V;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.android.ui.Label","mstrmojo.android.ui.Menu","mstrmojo.android.ui.SearchBox","mstrmojo.android.ui.Image","mstrmojo.mstr.WebElements","mstrmojo.dom","mstrmojo.css");mstrmojo.requiresDescs(10,9462,9463);var D=mstrmojo.dom,F=mstrmojo.css,E=D.CSS3_TRANSITION_END;var B=[{n:mstrmojo.desc(9462,"View All"),idx:1,v:true},{n:mstrmojo.desc(9463,"View Selected"),idx:0,v:false}];function C(){if(this.searchRequired){if(!this.target.getSelectedItems().length){return false;}}return true;}function A(){var S=this.lbl,W=S.domNode,L=W.style,N=this.searchNode.style,M=this.search.box,K=M.inputNode,U=K.style,Q=this.target,R="visible";var P=this._isSearch=!!S.visible;if(P){Q.enterSearchMode();var O=F.getComputedStyle(M.inputNode),J=this.domNode.offsetWidth-(2*parseInt(O.marginRight,10))-parseInt(O.paddingLeft,10)-parseInt(O.paddingRight,10)-this.search.slot0.offsetWidth,V=this.browseElements;D.attachOneTimeEvent(W,E,function(){S.set(R,false);N.width="100%";M.set("hint",(V&&V.source.n)||mstrmojo.desc(10,"Search"));M.set(R,true);window.setTimeout(function(){U.width=J+"px";},0);});L.opacity=0;}else{if(!C.call(this)){return ;}Q.exitSearchMode(!this.searchRequired);D.attachOneTimeEvent(K,E,function(){M.set(R,false);M.set("value","");N.width="";S.set(R,true);window.setTimeout(function(){L.opacity=1;},0);});M.inputNode.style.width=0;}}mstrmojo.android.ui.ElementsSearchBar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.android.ui.ElementsSearchBar",markupString:'<div id="{@id}" class="mstrmojo-ElementSearchBar {@cssClass}" style="{@cssText}" ><div><div class="mstrmojo-ElementSearchBar-switch"></div><div class="mstrmojo-ElementSearchBar-search"></div></div></div>',markupSlots:{switchNode:function(){return this.domNode.firstChild.firstChild;},searchNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{oncanSearchChange:function(){this.search.btn.set("visible",!!this.canSearch);}},target:null,browseElements:null,searchRequired:false,children:[{scriptClass:"mstrmojo.android.ui.Menu",slot:"switchNode",alias:"menu",visible:false,items:[B[1]],postselectionChange:function(J){var L=J.added,M=L&&this.items[L[0]];if(M){var K=this.parent;K.lbl.set("text",M.n);this.set("visible",false);this.set("items",[B[M.idx]]);K.target.set("viewAll",M.v);}}},{scriptClass:"mstrmojo.HBox",alias:"search",slot:"searchNode",children:[{scriptClass:"mstrmojo.android.ui.Image",alias:"btn",touchTap:function(){A.call(this.parent.parent);}},{scriptClass:"mstrmojo.android.ui.SearchBox",alias:"box",hint:mstrmojo.desc(10,"Search"),cssDisplay:"block",cssText:"width:0;",visible:false,searchFunc:function(M){if(M){var O=this.parent.parent,L=O.browseElements,K=(L&&L.duplicate())||new mstrmojo.mstr.WebElements(),J=K.browseConfig||{},N=this.id;J.searchPattern=M;J.blockBegin=1;J.searchForms=this.searchForms;if(O.searchTarget){J.searchTarget=O.searchTarget;delete O.searchTarget;}K.browseConfig=J;K.getItems(0,{success:function(){mstrmojo.all[N].set("searchResult",K);}});}else{this.clearSearch();}},clearFunc:function(){this.parent.parent.target.clearSearch();},onsearchResultChange:function(){this.parent.parent.target.search(this.searchResult);}}]}],init:function H(J){this._super(J);var K={scriptClass:"mstrmojo.android.ui.Label",slot:"switchNode",alias:"lbl"};if(J.searchRequired){K.text=J.title;K.cssClass="mstrmojo-no-Image";}else{K.text=mstrmojo.desc(9462,"View All");K.touchTap=function(){var M=this.parent.menu,L=!M.visible;if(L){M.set("width",this.domNode.offsetWidth+"px");}M.set("visible",L);};}this.addChildren(K);},onRender:function I(){var J=this.initSearchValue,K=this.id;if(J||this.searchRequired){delete this.initSearchValue;window.setTimeout(function(){var M=mstrmojo.all[K];A.call(M);var L=M.search.box;L.set("value",J||"");if(J){L.onEnter();}},0);}return this._super();},goBack:function G(){if(this._isSearch){if(C.call(this)){A.call(this);return true;}}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.MobileDocLayoutViewer");var B=mstrmojo.DynamicClassFactory.newComponent;mstrmojo.maps.MobileMapInfoWindowLayoutViewer=mstrmojo.declare(mstrmojo.MobileDocLayoutViewer,null,{scriptClass:"mstrmojo.maps.MobileMapInfoWindowLayoutViewer",preBuildRendering:function A(){this.setDimensions(this.height,this.width);this.set("visible",true);return this._super?this._super():true;}});mstrmojo.maps.MapInfoWindowLayoutViewer=mstrmojo.declare(mstrmojo.MobileDocLayoutViewer,null,{scriptClass:"mstrmojo.maps.MapInfoWindowLayoutViewer",preBuildRendering:function A(){this.set("visible",true);return this._super?this._super():true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.ViewSlider","mstrmojo._HasBuilder","mstrmojo._IsRwDocument","mstrmojo.android.ui.LayoutSelector","mstrmojo.Label","mstrmojo.hash","mstrmojo.array","mstrmojo.func","mstrmojo.android.EnumOrientationTypes");mstrmojo.requiresDescs(4174);var k=mstrmojo.array,p=k.forEach,S=mstrmojo.hash,Q=mstrmojo.android.EnumOrientationTypes,K=Q.PORTRAIT,P=Q.LANDSCAPE;function g(AC){return(AC.defn.iw!==undefined&&AC.defn.iw);}function R(AC){return new mstrmojo.Label({cssClass:"pre-loader",n:AC.n,k:AC.k,isPreloader:true});}function h(AE,AC){var AD=this.layoutSelector,AF=this.getSupportedLayouts();if(!AC){AD.set("items",AF);}AD.setCurrentTab(k.find(AF,"k",AE.k));AD.set("visible",!!AC);if(AC){AD.initiateFade();}}function z(AD,AJ){var AF=this._layouts,AC=mstrMobileApp.getOrientation(),AE=AF.length-1-AD,AI=false,AG;var AH=AF.slice(AD+1);if(AD){AH=AH.concat(AF.slice(0,AD));}if(!AJ){AH.reverse();AE=AD;}p(AH,function(AL,AK){AI=(AK>=AE);if(((AL.defn.or&AC)>0)&&!g(AL)){AG=AL;return false;}});if(!AG){return null;}return{wrap:AI,layout:AG};}function u(){var AD=this.model.defn.views,AC=(AD&&AD.length)||0,AF;if(AC){var AE=AD[0].orientation;for(AF=1;AF<AC;AF++){if(AE!==AD[AF].orientation){return true;}}}return false;}function f(AM){var AJ=this._layouts,AI=this._orientationInfo;if(!AI){AI=this._orientationInfo={};var AN=AI[K]={lyts:[]};var AK=AI[P]={lyts:[]};k.forEach(AJ,function(AP){var AR=AP.defn.or,AQ=AI[AR];if(!g(AP)&&AQ!==undefined){AQ.lyts.push(AP.k);}});if(AN.lyts.length||AK.lyts.length){AI.specific=true;}}var AD=AJ[k.find(AJ,"k",AM)],AF=AD.defn.or,AG=AI[AF],AE=mstrMobileApp.getOrientation(),AH={isSupported:true,currentLayout:AD,specific:!!AI.specific};if(g(AD)||((AF&AE)===0)){AH.isSupported=false;var AL=AI[AE];if(AG===undefined||AL===undefined){return AH;}var AO=AL.lyts[k.indexOf(AG.lyts,AM)];if(AO){AH.newLayout=AJ[k.find(AJ,"k",AO)];}else{var AC=AL.last;if(AC){AH.newLayout=AC;}else{k.forEach(AJ,function(AP){if(!g(AP)&&(AP.defn.or&AE)>0){AH.newLayout=AP;return false;}});}}AG.last=AD;if(!AH.newLayout){AH.isStale=true;}}else{AH.needNewLayout=u.call(this);}return AH;}function AB(AD){var AC=z.call(this,k.find(this._layouts,"k",this.model.getCurrentLayoutKey()),(AD.delta.x<0));return(AC&&!AC.wrap)?AC:null;}function F(){var AD=this.model,AC=AD&&AD.wm;if(AC&&AC.tp===3&&AC.imgSrc){return AC;}return null;}function Z(AG){var AC=document.createElement("img"),AD=AC.style;this.watermarkNode=AC;AD.position="absolute";AD.top=0;AD.left=0;AD.visibility="hidden";var AE=this;AC.onload=function(){var AJ=AC.width,AL=AC.height;if(AG.imgScale<=0){var AI=AE.domNode;if(AI){AC.width=AI.clientWidth;AC.height=AI.clientHeight;}}else{var AK=AG.imgScale/100;AC.width=AJ*AK;AC.height=AL*AK;}AC.style.visibility="visible";};this.domNode.insertBefore(AC,this.domNode.firstChild);var AF=this.model.getDataService();var AH=AG&&AG.imgSrc;AC.src=(AH&&AF&&AF.getDocImage&&AF.getDocImage(AH))||AH;}function j(AC){this.parent.showLayout(AC);}mstrmojo.android.ui.DocumentView=mstrmojo.declare(mstrmojo.android.ui.ViewSlider,[mstrmojo._HasBuilder,mstrmojo._IsRwDocument],{scriptClass:"mstrmojo.android.ui.DocumentView",postBuildRendering:function Y(){var AD=this._super(),AC=F.call(this);if(AC){Z.call(this,AC);}return AD;},buildChildren:function e(AC){this._layouts=this._super(true);},beforeViewHidden:function M(AD){this._stale=true;var AC=this.getCurrentLayout();if(AC&&AC.beforeViewHidden){AC.beforeViewHidden(AD);}},getViewController:function H(AC){return null;},unrender:function A(AC){delete this._stale;this._super(AC);},reloadLayout:function I(){var AC=this.getCurrentView(),AE=this.id,AD={layoutKey:AC.k,reload:true,executionOrientation:mstrMobileApp.getOrientation()};this.getNewLayout(AD,this._layouts,true,{success:function(AF){var AG=mstrmojo.all[AE];AG.replaceView(AF,AC,true);AG.resetSliderNodes();}});},rootOrientationChange:function L(){if(this._stale){return ;}var AF=F.call(this);if(AF&&AF.imgScale<=0){var AH=this.watermarkNode;AH.width=parseInt(this.width,10);AH.height=parseInt(this.height,10);}var AO=this.getCurrentView();if(AO.isPreloader){return ;}var AM=this._layouts,AI=AO.k,AE=f.call(this,AI),AJ=AE.newLayout;if(AE.isStale){return ;}if(AE.specific){h.call(this,AO);}var AK=!!AE.needNewLayout,AL=!AK&&(!AE.isSupported&&AJ),AD=!AL&&(this.model.zt&&!AO.isFullScreenWidget);if(AK||AL||AD){mstrApp.closeAllDialogs();var AC=this.id,AN=this,AG={layoutKey:AI,reload:true,executionOrientation:mstrMobileApp.getOrientation()},AP=function(AQ){mstrmojo.all[AC].replaceView(AQ,AN.getCurrentView());AN.resetSliderNodes();};if(AL){AO=this.replaceView(R(AJ),AO,true);AG.layoutKey=AJ.k;delete AG.reload;AP=mstrmojo.func.composite([function(AQ){h.call(mstrmojo.all[AC],AQ);},AP]);}this.getNewLayout(AG,AM,true,{success:AP});}this.controller.generateActionToolbar();},onRender:function C(){if(!this.layoutSelector){this.addChildren([{scriptClass:"mstrmojo.android.ui.LayoutSelector",slot:"overlayNode",alias:"layoutSelector",visible:false,tabSelected:j}]);}var AC=this.getCurrentLayout();var AH=f.call(this,this.model.getCurrentLayoutKey()),AD=AH.currentLayout,AF=this,AG=function(AJ){if(AJ&&!AJ.domNode){AF.switchView(AJ);}else{AF.stackViews(AJ.slot);}return AJ;};if(AH.needNewLayout&&this.controller.isBack){AG(AD);var AI={layoutKey:AD.k,reload:true,executionOrientation:mstrMobileApp.getOrientation()};this.getNewLayout(AI,this._layouts,true,{success:function(AJ){AF.replaceView(AJ,AD);}});}else{if(AH.isSupported){AG(AD);h.call(this,AD);}else{var AE=AH.newLayout;if(AE){AD.defn.loaded=false;AE=AG(this.selectLayout(R(AE),false));this.getNewLayout({layoutKey:AE.k},this._layouts,true,{success:function(AJ){h.call(AF,AJ);AF.replaceView(AJ,AE);}});}else{this._ignoreOrientation=true;AG(AD);}}}},showLayout:function O(AD){var AC=AD.k,AE=this;if(AC!==this.model.getCurrentLayoutKey()){var AF={layoutKey:AC};if(u.call(this)){AF.executionOrientation=mstrMobileApp.getOrientation();AF.reload=true;}this.getNewLayout(AF,this._layouts,true,{success:function(AG){AE.switchView(AG);}});return true;}return false;},afterSwitch:function q(AC){this._super(AC);this.selectLayout(AC,(AC.k!==this.model.getCurrentLayoutKey()));},selectLayout:function o(AC,AD,AF){var AE=this._super(AC,AD,AF);this.controller.getPageByTree(true);if(!AC.defn||!AC.defn.iw){h.call(this,AE,true);}return AE;},replaceLayout:function D(AE,AD){var AF=this._layouts||[],AC=k.find(AF,"k",AE.k);if(AC>=0){AE.unrender();AE.destroy();}var AG=this.builder.build([AD],this.model)[0];if(AC>=0){AF[AC]=AG;}else{AF.push(AG);}this._layouts=AF;return AG;},onLayoutRebuilt:function X(AC){this.replaceView(AC,this.getCurrentView());},canScroll:function U(AC){return !!AB.call(this,AC);},beginScroll:function a(AF,AI){if(this.isAnimating()){return false;}delete this._scrollInfo;if(!AI){var AJ=this._layouts,AK=AB.call(this,AF),AC=this.id;if(!AK){return ;}AI=AK.layout;var AD=mstrMobileApp.getOrientation(),AH=AI.docLayout,AG=u.call(this)||(this.model.zt&&AH&&AD!==AH.defn.lastOrientation);if(!AI.defn.loaded||AG){AI=R(AI);var AE={layoutKey:AI.k};if(AG){AE.executionOrientation=AD;AE.reload=true;}this.getNewLayout(AE,AJ,false,{success:function(AM){var AL=mstrmojo.all[AC],AN=AL._scrollInfo;if(AN){AN.view=AM;}AL.replaceView(AM,AI);}});}}if(AI){this._super(AF,AI);}},scrollStarted:function G(){var AC=this.layoutSelector;AC.set("visible",true);AC.enterScroll();},scrollProgress:function l(AC,AD){this.layoutSelector.scroll(AD);},scrollStopped:function AA(AE,AF){var AD=this.layoutSelector,AC=AD.selectedIndex;if(AF){AC+=(AE.isForward?1:-1);}AD.exitScroll(AC);},scrollCanceled:function s(AD){this._super(AD);var AC=AD.oldView;this.model.getDataService().setCurrentDocLayout(AC.k);this.selectLayout(AC,false);this.layoutSelector.initiateFade();},scrollComplete:function b(AD){this._super(AD);var AC=AD.newView;this.selectLayout(AC,(AC.k!==this.model.getCurrentLayoutKey()));this.controller.generateActionToolbar();},renderInfoWindow:function W(AD){AD.autoCloses=AD.locksHover=false;if(mstrApp.isTablet()){this._super(AD);return ;}var AE=this.controller,AL=AE.rootCtrl,AK=AL.getTitle(),AH=function(AM){AL.updateContent(null,AM);},AF=false;this.fullScreenInfoWindow=true;AE.generateActionToolbar();var AC=this.id;mstrApp.showDialog({cssClass:"FSInfoWindow",children:AD,resizeDialog:function AJ(){var AR=mstrApp.rootView,AQ=AR.getContentDimensions(),AP=this.editorNode&&this.editorNode.style,AN=this.children[0],AM=AN&&AN.infoNode;if(AP){AP.top=(parseInt(AR.getBrowserDimensions().h,10)-AQ.h+3)+"px";AP.left="5px";}if(AM){var AO=AM.style;AO.height=AQ.h+"px";AO.width=AQ.w+"px";mstrmojo.all[AN.psId].setInfoWindowDimensions(AQ);}},onClose:function AI(){AH(AK);delete mstrmojo.all[AC].fullScreenInfoWindow;AE.generateActionToolbar();if(AF){mstrMobileApp.releaseOrientation();}var AM=this.children[0];AM.model.raiseEvent({name:"infoWindowClosed",psKey:AM.psKey});if(AM&&AM.clearAnchorHilites){AM.clearAnchorHilites();}},positionDialog:mstrmojo.emptyFn});var AG=AD.children[0];AH(AG.getTitle());if(mstrMobileApp.getLockedOrientation()===0){mstrMobileApp.lockOrientation(mstrMobileApp.getOrientation());AF=true;}AG.attachEventListener("titleChange",this.id,function(AM){AH(AM.value);});},updateInfoWindowPS:function d(AC,AD){if(!mstrApp.isTablet()){mstrmojo.all[AC].setInfoWindowDimensions(mstrApp.getContentDimensions());}},destroy:function w(AC){p(this._layouts,function(AD){AD.destroy(AC);});this.builder.destroy();this._super(AC);},getLayouts:function(){return this._layouts;},getSelectedLayoutWidget:function B(){return this.getCurrentView();},getNewLayout:function J(AG,AF,AD,AH){var AC=this.controller,AE;if(AC&&AC.getDesiredElements){AE=AC.getDesiredElements();if(AE){AG.desiredElements=AE;}}AH.success=mstrmojo.func.composite([AH.success,function(){AC.generateActionToolbar();}]);S.forEach(this.ifwMap,function(AI){if(AI.visible){AI.close();}});return this._super(AG,AF,AD,AH);},unloadLayouts:function t(AL,AC){var AK=this._layouts,AG=this.model.getCurrentLayoutKey(),AH,AD=(AK&&AK.length)||0,AF,AE,AJ,AI;for(AH=0;AH<AD;AH++){AF=AK[AH];AJ=AF.defn;if(AF.k!==AG&&AJ&&AJ.loaded){if(AC){AE=(AF.gb&&AF.gb.groupbys);if(AE&&AE.length){AJ.loaded=false;}}else{if(AL){for(AI=0;AI<AL.length;AI++){if(AF.k===AL[AI]){AJ.loaded=false;break;}}}else{AJ.loaded=false;}}}}},getSupportedLayouts:function N(){var AD=[],AC=mstrMobileApp.getOrientation();p(this._layouts,function(AE){if(((AE.defn.or&AC)>0)&&(!g(AE))){AD.push(AE);}});return AD;},getCurrentLayout:function x(){var AC=this._layouts;return AC[k.find(AC,"k",this.model.getCurrentLayoutKey())];},getCaptureDimensions:function V(){var AC=this.getCurrentLayout();return AC.getCaptureDimensions&&AC.getCaptureDimensions();},closeInfoWindowsOnTablet:function E(){if(mstrApp.isTablet()){S.forEach(this.ifwMap,function(AC){if(AC.visible){AC.closeOnTablet();}});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=this.searchEnabled?false:true;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.ListDialog");var A=mstrmojo.android.nativedialog.ListDialog.CHOICE_MODES;mstrmojo.android.nativedialog.TwoLevelPageByDialog=mstrmojo.declare(mstrmojo.android.nativedialog.ListDialog,null,{scriptClass:"mstrmojo.android.nativedialog.TwoLevelPageByDialog",type:2,choiceMode:A.NONE,update:function C(D){this.config.items=D;mstrMobileApp.updateDialog(JSON.stringify(this.config));},getItem:function B(E,D){return this.config.items[E].items[D];}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.nativedialog.EditTextDialog","mstrmojo.android.nativedialog.ListDialog","mstrmojo.android.nativedialog.SliderDialog","mstrmojo.android.nativedialog.TimePickerDialog","mstrmojo.android.nativedialog.DatePickerDialog","mstrmojo.android.nativedialog.DateTimePickerDialog","mstrmojo.array","mstrmojo.num","mstrmojo.string");var TEXTFIELD=1,LIST=3,SLIDER=4,CALENDAR=5,TIMEPICKER=6,TEXTAREA=8,$ARR=mstrmojo.array;function getTextValidator(dic){var validator={type:dic.vm};$ARR.forEach(["emin","emax","ml","mnl","rgx","dt"],function(prop){if(!!dic[prop]){if(prop=="emin"||prop=="emax"){prop=(prop=="emin")?"min":"max";}validator[prop]=dic[prop];}});if(dic.req||dic.emin){validator.req=true;}return validator;}function setListOnSelectionChange(config){var dicWidget=config.widget;config.onSelectionChange=function(index){dicWidget.set("value",dicWidget.items[index].v);dicWidget.applyChanges();this.close();};delete config.buttons;}function setPositiveButtonOnClick(config,preApplyChanges){var dicWidget=config.widget;getPositiveButton(config).onclick=function(value){preApplyChanges(value);dicWidget.applyChanges();};}function getCalendarPreApplyChanges(dicWidget){var preApplyChanges=function(value){var newDate=eval("("+value+")");if(dicWidget.dic.ict){dicWidget.updateDateAndTime(newDate);}else{dicWidget.updateDate(newDate.date);}};return preApplyChanges;}function getPositiveButton(config){return config.buttons[1];}function getNegativeButton(config){return config.buttons[0];}mstrmojo.android.nativedialog.DICDialogFactory=mstrmojo.provide("mstrmojo.android.nativedialog.DICDialogFactory",{createDICDialog:function createDICDialog(config){var clazz,dicWidget=config.widget,dic=dicWidget.dic,preApplyChanges=function(value){dicWidget.set("value",value);};config.children=[dicWidget];delete getNegativeButton(config).onclick;switch(dic.t){case TEXTFIELD:case TEXTAREA:preApplyChanges=function(value){dicWidget.set("value",mstrmojo.string.decodeHtmlString(value));};config.validator=getTextValidator(dic);clazz=mstrmojo.android.nativedialog.EditTextDialog;break;case LIST:setListOnSelectionChange(config);dicWidget.items=dicWidget._items;dicWidget.selectedIndex=$ARR.find(dicWidget.items,"v",dicWidget.value);clazz=mstrmojo.android.nativedialog.ListDialog;break;case SLIDER:clazz=mstrmojo.android.nativedialog.SliderDialog;break;case CALENDAR:preApplyChanges=getCalendarPreApplyChanges(dicWidget);clazz=dicWidget.dic.ict?mstrmojo.android.nativedialog.DateTimePickerDialog:mstrmojo.android.nativedialog.DatePickerDialog;break;case TIMEPICKER:preApplyChanges=function(newTime){dicWidget.updateTime(eval("("+newTime+")").time);};clazz=mstrmojo.android.nativedialog.TimePickerDialog;break;}if(dic.t!==LIST){setPositiveButtonOnClick(config,preApplyChanges);}return new clazz(config);},showDialog:function showDialog(config){this.createDICDialog(config).show();}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.android.nativedialog.ListDialog");var D=mstrmojo.array;function A(E){var F=[];D.forEach(E,function(H,G){F[G]={n:H.n};});return F;}mstrmojo.android.nativedialog.LayoutDialog=mstrmojo.declare(mstrmojo.android.nativedialog.ListDialog,null,{scriptClass:"mstrmojo.android.nativedialog.LayoutDialog",populateConfig:function B(){this._super();this.config.items=A(this.config.items);},update:function C(E,F){this.config.items=A(E);this.config.selectedIndex=F<0?0:F;mstrMobileApp.updateDialog(JSON.stringify(this.config));}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._TouchGestures","mstrmojo.android.ui.Button","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.android.nativedialog.ListDialog");mstrmojo.requiresDescs(221);var D=mstrmojo.css,C=mstrmojo.android.ui.Button.newButton,H=mstrmojo.hash;mstrmojo.android.DropDownList=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.DropDownList",cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-AndroidDropDownList {@cssClass}" mstrAttach:click><div>{@value}</div></div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onvalueChange:function(){var L=this.value,J=this.options;if(J){var I=mstrmojo.array.find(J,"v",L),K=J[I];this.valueNode.innerHTML=K.n;if(L!=="-1"&&J[0].v==="-1"){J.shift();I--;}this.idx=I;}}},options:null,value:"",name:"",idx:0,singleSelectByField:function G(I){this.set("value",I);},touchTap:function F(){var L=this.id,J=this.domNode,K=mstrApp,I={autoClose:true,title:this.name,fadeOnClose:false,cssClass:"dropDownList",onClose:function(){D.removeClass(J,"down");},children:[{scriptClass:"mstrmojo.ui.MobileCheckList",items:this.options,multiSelect:false,isElastic:true,selectedIndex:this.idx,hasEvenRows:true,postselectionChange:function(M){mstrApp.closeDialog();mstrmojo.all[L].set("idx",M.added[0]);}}],buttons:[C(mstrmojo.desc(221,"Cancel"),function(){mstrApp.closeDialog();})]};if(mstrApp.useBinaryFormat){H.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.ListDialog",onSelectionChange:function(M){mstrmojo.all[L].set("idx",M);this.close();}},I);}K.showDialog(I);D.addClass(J,"down");},touchSelect:function A(){this.touchTap();},onidxChange:function E(){var I=this.options;if(I){this.set("value",I[this.idx].v);}},preBuildRendering:function B(){this._super();var I=this.options;if(I){this.value=I[this.idx].v;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._CanSupportOfflineTransactions","mstrmojo._CanMakeServerProxyRequests","mstrmojo.MobileConfiguration","mstrmojo.OfflineTransactionModel","mstrmojo.dom","mstrmojo.hash","mstrmojo.android.EnumOrientationTypes");mstrmojo.requiresDescs(6828,9419);var N=mstrmojo.dom,O=mstrmojo.hash;var a=[],u={},Y={},V;function AG(AI,AL,AM){if(!AI||AI.handledError){return ;}var AK=[],AJ={title:"",message:mstrmojo.desc(6828)+" ",sourceURL:"Source URL: ",fileName:"File: ",lineNumber:"Line: ",line:"Line: "};O.forEach(AJ,function(AN,AO){if(AI[AO]!==undefined){AK.push(AN+AI[AO]);if(AO==="title"){AK.push("");}}});if(AI.getResponseHeader){AK.push("XHR: "+AI.getResponseHeader("X-MSTR-TaskFailureMsg"));}AK=AK.join("\n");if(AL){AL.hideMessage();}if(AK.length){if(AI.useToast){mstrmojo.toast(AK,3000,AM);}else{mstrmojo.alert(AK,AM);}AI.handledError=true;mstrmojo.dbg(AI.stack||AK);}}function e(AI,AJ,AK){if(AI instanceof String){AG({message:AI,fileName:AJ,lineNumber:AK});}}var M=mstrmojo.android.AndroidApp=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._CanMakeServerProxyRequests,mstrmojo._CanSupportOfflineTransactions],{scriptClass:"mstrmojo.android.AndroidApp",serverProxy:null,isMobile:true,handledCompatibilityError:false,nativeBridge:new mstrmojo.android.NativeBridge(),init:function AB(AJ){this._super(AJ);var AI=window.onerror;window.onerror=AI?mstrmojo.func.composite([e,AI]):e;this.handleError=AG;},start:function X(){this.started=true;var AM=mstrMobileApp;AM.setTaskServletName(mstrConfig.taskURL);var AK=this.getConfiguration(),AL=AK.getDiagnosticMode();AM.setDiagnosticMode(AL);this.diagnosticMode=AL;this.useBinaryFormat=AK.getBinaryMode();mstrmojo.DPIManager.setDPI();mstrApp.oflnTxModel=new mstrmojo.OfflineTransactionModel();var AJ=this.rootView=this.viewFactory.newView("Root",{id:"rootView",placeholder:this.placeholder});var AI=this.rootController=this.controllerFactory.newController("Root",{id:"rootController",rootView:AJ});AJ.controllerId=AI.id;AJ.render();AI.start();if(!mstrApp.isActionBarNative()){window.setTimeout(function(){mstrMobileApp.getTitleBarHeight(mstrApp.rootView.getTitleHeight());},0);}},restart:function AE(){var AI=this.rootController;if(AI){AI.restart();}else{this.start();}},onMobileDevice:function G(){return mstrConfig.onMobileDevice;},isTouchApp:function U(){return(N.isIPad||N.isAndroid||mstrApp.onMobileDevice())&&!N.isWinPhone;},isLandscape:function AF(){return(mstrMobileApp.getOrientation()===mstrmojo.android.EnumOrientationTypes.LANDSCAPE);},getConfiguration:function t(){if(!this._cfg){this._cfg=new mstrmojo.MobileConfiguration();}return this._cfg;},isTablet:function w(){return mstrMobileApp.isTablet();},isMicroTablet:function p(){if(V===undefined){V=false;if(this.isTablet()){var AJ=this.getScreenDimensions(),AI=700;V=(AJ.h<AI||AJ.w<AI);}}return V;},goBack:function J(){if(this.cancelPending(true)){return true;}var AJ=false;O.forEach(Y,function(AL,AN){var AM=mstrmojo.all[AN];if(AM){AM.set("visible",false);AJ=true;}});Y={};if(AJ){return true;}var AI=a.length;if(AI){var AK=a[AI-1];if(AK.goBack){if(AK.goBack()){return true;}}if(this.closeDialog()){return true;}}return(this.rootController&&this.rootController.goBack())||mstrMobileApp.goBack();},doSearch:function Z(){},menuShown:function E(){},registerListener:function(AI,AL,AK){var AJ=u[AI]||[];AJ.push({t:AL,f:AK});u[AI]=AJ;},unregisterListener:function(AJ,AL){var AK=u[AJ],AI=AK&&AK.pop();if(!AI||AI.t!==AL){window.alert("Unregister Search listener out of order.");if(AK&&AI){AK.push(AI);}}},getListener:function(AJ,AL){var AK=u[AJ],AI=AK&&((AK.length)?AK[AK.length-1]:null);return((AI&&AI.t===AL)?AI:null);},cancelPending:function z(AI){this.hideMessage();mstrMobileApp.hideProgress();var AJ=this.serverProxy;if(AJ){if(AJ.cancelRequests()){return true;}}return AI?false:this.closeDialog();},onerror:function h(AI,AJ){AG(AI,this,AJ);},showMessage:function f(AI){if(this.rootView){this.rootView.showMessage(AI);}},showHTMLProgress:function P(AI){if(this.rootView){this.rootView.showHTMLProgress(AI);}},hideMessage:function AC(){if(this.rootView){this.rootView.hideMessage();}},hideHTMLProgress:function q(){if(this.rootView){this.rootView.hideHTMLProgress();}},showToastNotification:function W(AJ,AI){mstrMobileApp.toast(AJ,AI);},displayHelp:function AA(){var AI=mstrMobileApp.displayHelp();if(AI){mstrApp.onerror({message:AI});}},isDialogUp:function j(){return(a.length>0);},showDialog:function b(AJ,AL){var AK;if(AJ.isNative){AK=mstrmojo.insert(AJ);AK.show();return AK;}mstrMobileApp.showPopupDialog();AJ.scriptClass=AJ.scriptClass||"mstrmojo.android.Dialog";var AI=mstrmojo.func.wrapMethods(AJ,{onClose:function(){mstrMobileApp.closePopupDialog();a.pop();}});AK=AL?this.viewFactory.newView(AL,AI):mstrmojo.insert(AI);a.push(AK);AK.render();window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);return AK;},showPopup:function H(AI,AJ){AI.scriptClass=AI.scriptClass||"mstrmojo.android.Popup";if(AJ){AI.anchor=AJ;}return this.showDialog(AI);},closeDialog:function d(){if(a.length){a[a.length-1].close();return true;}return false;},closeAllDialogs:function k(){var AJ=a.slice(0),AI=AJ.pop();while(AI){AI.close();AI=AJ.pop();}a=[];},setMenuStatus:function o(AJ,AI){if(AI){Y[AJ]=true;}else{delete Y[AJ];}},setCurrentProjectId:function L(AI){this._currentProjId=AI;},getCurrentProjectId:function Q(){return this._currentProjId;},getSessionState:function l(AI){return this.serverProxy.getSession(AI||this._currentProjId);},getContentDimensions:function s(AI){return this.rootView.getContentDimensions(AI);},getContentPosition:function R(){var AI=this.getContentDimensions();return{x:0,y:this.rootView.getTitleHeight(),w:AI.w,h:AI.h};},getScreenDimensions:function AD(){var AI=String(mstrMobileApp.getScreenDimensions()).split("|");return{h:parseInt(AI[0],10),w:parseInt(AI[1],10)};},getResSetStore:function g(){return mstrMobileApp.getResSetStore(this.getCurrentProjectId());},getResSetStoreMgr:function A(){return mstrMobileApp.getResSetStoreMgr();},removeProjectCaches:function AH(AI){if(this.getConfiguration().getCacheEnabled()){this.getResSetStoreMgr().removeProjectCaches(AI);}},getLocaleInfo:function I(AI){AI=AI||this._currentProjId;return this.serverProxy.getLocaleInfo(AI);},onConnectivityChanged:function F(AK,AJ){var AI=mstrmojo.publisher;if(AK&&AJ){this.getConfiguration().reload();}AI.publish(AI.NO_SRC,AI.CONNECTIVITY_CHANGED_EVENT,AK);if(AK){this.submitOfflineTransaction();}this.rootController.generateActionToolbar();},onReconcileEnd:function K(){var AI=mstrmojo.publisher;AI.publish(AI.NO_SRC,AI.RECONCILE_END_EVENT,null);if(mstrMobileApp.isOnline()){this.submitOfflineTransaction();}},handleCompatibilityError:function x(){if(!this.handledCompatibilityError){this.handledCompatibilityError=true;if(!this.isHosted()){mstrmojo.toast(mstrmojo.desc(9419,"The version of this app is incompatible with one or more of the MicroStrategy Mobile Server(s). Please update the app to a more recent version."));}}},hasOpenDialog:function D(){return a.length>0;},isHosted:function B(){return mstrMobileApp.isProxy;},isActionBarNative:function C(){return !this.isHosted();},cachesCleared:function S(){this.refreshOfflineTransactionModel();}});M.$PF=function(AK,AJ,AI){mstrMobileApp[(AK?"enter":"exit")+"JavaScriptMethod"](new Date().getTime(),AI||arguments.callee.caller.name,AJ);};window.$MAPF=M.$PF;}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.XtabZone","mstrmojo.DICFactory","mstrmojo.DynamicClassFactory");var AV=102,S=1,K=2,F=1,AR=4,w=mstrmojo.css,t=mstrmojo.dom,l=mstrmojo.hash,AB=mstrmojo.array,g=mstrmojo.DynamicClassFactory.newComponent,L=1,AX=2,I=4,Q=1,h=2,Y=1,C=2,AS=1,H=2,AF=1,AD=2,f=2,o=1,AZ=6,AI=7,J=function(Ab){if(Ab){return Ab.tui>=0?("h_"+Ab.tui+"_"+Ab.fi+"_"+Ab.axis):("m_"+Ab.mix);}return"";};function AE(Ah,Ad,Ae){var Ag=this.nm[Ad],Ac=Ae.v,Af=Ae.dv;Ah.rv=Ac;Ah.v=Af;Ah.mdf=1;if(Ah._src){Ah._src.rv=Ac;Ah._src.v=Af;Ah._src.mdf=1;}var Ab=this.dicGroupMap[J(Ah)].widgetsMap[Ah._ei];if(!Ab.showByDefault){if(Ab.hasPreview){Ab.renderPreview();}else{if(t.isIE7&&mstrmojo.string.isEmpty(Ac)){Ac=" ";}Ag[Ag.innerText!==undefined?"innerText":"textContent"]=(!Ac?"\u00a0":Ac);}}return Ag;}function d(Ae,Af,Ab){if(Ab[Af]===0){return true;}if(Ae&&Ab[Af]===undefined){try{var Ac=Ae.getRowCells(Af),Ag=Ac&&Ac[0];if(Ag&&Ag.o===Af){if(Ag.sst){Ab[Af]=0;}return !!Ag.stt;}if(Ag&&Ag.o){return d(Ae,Af+Af-Ag.o,Ab);}return false;}catch(Ad){return false;}}else{return false;}}function M(Ac,Ab){AB.forEach(Ac,function(Ad){Ab[Ad.o]=1;});}function AW(Ab){if(Ab.mgh&&(Ab.mgh&S)){this.mghMarks={};}}function AG(Ad,Af){var Ac=Af.bb-1,Ab=Math.min(Ac+Af.bc,Af.tc),Ae;l.forEach(Ad,function(Ah,Ag){Ae=Number(Ag);if(!isNaN(Ae)&&Ae>=Ac&&Ae<Ab){delete Ad[Ag];}});}function AL(Ae,Ad){var Ab=this.editing?1:(Ae.rs||1),Ac;for(Ac=0;Ac<Ab;Ac++){this.dirtyRows[Ad+Ac]=1;}}function Aa(Ab){return Ab&&parseInt(Ab.ipt,10)===f;}function AU(Ab){var Ac;this.delegateGridAction(function(Ad){if(!Ac&&Ad.posMap&&Ad.posMap[Ab._ei]){Ac=Ad;}},"getRowIndex");return Ac.getRowIdxByCell(Ab);}function p(Ab){var Ah=Ab.thPosMap,Aj=Ab.slot,Ag=Ah&&Ah.length||0,Al=this.lastHeaderIndexs[Aj]||0,Af=[Ab.tableNode],Ai,Ad,Ak,Ae;if(this.getStickedTableNodes){Af=Af.concat(this.getStickedTableNodes());}for(Ae=Al;Ae<Ag;++Ae){Ai=Ah[Ae],Ak=Ai.obj;if(this.isEditableHeader(Ak)){for(var Ac in Af){AQ(Af[Ac],Ai);}}}this.lastHeaderIndexs[Aj]=Ae;}function AQ(Ab,Ad){var Ac=Ab.tBodies[Ad.page].rows[Ad.row].cells[Ad.cell];Ac.innerHTML='<div class="editable-column">'+Ac.innerHTML+"</div>";}function q(Ad){var Af=true,Ac=Ad||[];for(var Ae=0,Ab=Ac.length;Ae<Ab;Ae++){if(Ac[Ae]&&(Ac[Ae].w==="")){Af=false;break;}}return Af?"40px":"";}function AA(Ab){return !Ab.tav||!(Ab.tav&F);}function AO(Af,Ad,Ah,Ao){var Ai=false;for(var Ag=0;Ag<Af.length;Ag++){var Al=Af[Ag],Ac=Al.style,Ae=parseFloat(w.getStyleValue(Al,"padding-left"))||0,Ab=parseFloat(w.getStyleValue(Al,"padding-right"))||0,An=parseFloat(w.getStyleValue(Al,"padding-top"))||0,Aj=parseFloat(w.getStyleValue(Al,"padding-bottom"))||0;var Am=Al.getElementsByClassName("tableLayoutList")[0];var Ak=Al.getElementsByClassName("mstrmojo-TableLayoutList")[0];if(Am&&Ak){if(Am.clientWidth>Ad[Ag]){Ac.width=Am.clientWidth+"px";Ak.style.width="auto";Ai=true;}else{Ac.width=Ad[Ag]-Ae-Ab+"px";}if(Am.clientHeight>Ah[Ag]){Ac.height=Am.clientHeight+"px";Ak.style.height="auto";Ai=true;}else{Ac.height=Ah[Ag]-An-Aj+"px";}}else{Ac.width=Ad[Ag]-Ae-Ab+"px";Ac.height=Ah[Ag]-An-Aj+"px";}}if(Ai){Ao.style.width="auto";}}mstrmojo._IsEditableGridCP={_mixinName:"mstrmojo._IsEditableGridCP",initContent:function AN(Ae){this._super(Ae);var Ak=this.gridData,Ac=Ak&&Ak.vp,Ai,Ah,Aj,Am,Ab,Al,Ad,Ag;if(((this.type===L)||(this.type===I))&&Ac&&Ac.cols&&!Ac._adjusted){Ab=Ac.cols.cg;Ad=Ac.cols.cws;if(Ab&&Ab.cgc>0){for(Ai=Ab.cgc;Ai>0;Ai--){Ab[Ai]=l.copy(Ab[Ai-1],{});Al=Ab[Ai];var Af=Al.attForms;if(Af){for(Ah=0,Am=Af.length;Ah<Am;Ah++){Aj=Af[Ah];Aj.idx+=1;}}}Ab[0]={tg:false,cc:0,cl:1,attForms:[{n:"",idx:0}]};Ab.cgc+=1;}if(Ad){Ad.splice(0,0,{w:"60px",xc:true});}if(Ac.dafIdx!==undefined){Ac.dafIdx+=1;}Ag=Ak.gts.row;for(Ai=0,Am=Ag.length;Ai<Am;Ai++){Ag[Ai].ci=Ai+1;}Ac._adjusted=true;}this.colWidths=[{w:q(this.colWidths)}].concat(this.colWidths);this.unmergedCells=[];},getUnmergedCells:function b(){return null;},getRowCells:function AJ(Al){var Ad=this._super(Al),Ab=Ad[0],Ap=(Ab&&Ab.o)||0,Am=(this.tp===L),Ag=this.interactiveCellsArray,Ao={css:"",v:""},As=[],Ac=[],At,Au;if(!Am){var Ai=this.base.items,Ar=this.lookupBase,Aq=this.gridData.css,Ax=Ab&&Ab.pi,An=Ax&&Ax.ri,Aw=Ax&&Ax.ci,Aj=Ab.stt>0;while(Ax&&An>-1&&Aw>-1){Ab=Ab._p||Ai[An].items[Aw];var Ae=l.copy(Ab,{});Ae._src=Ab;if(!Ae.css){Ae.css=Aq[Ae.cni].n;}var Ak=Ar[Ab.tui],Av=Ak&&Ak.es[Ab.idx];if(Av){Ae.v=Ab.v||Av.n;Ae._e=Av;}Ae.rs=1;if(Aj){Ae.at&=~32;}if(Ap>-1){Ae.o=Ap;}if(!Ae.axis&&this.axis){Ae.axis=this.axis;}Ae._ei=Ag.push(Ae)-1;As.splice(0,0,Ae);Ax=Ab&&Ab.pi;An=Ax&&Ax.ri;Aw=Ax&&Ax.ci;}for(At=0,Au=Ad.length;At<Au;At++){var Af=Ad[At];if(Af.rs>1){var Ah=l.copy(Af,{});Ah.rs=1;Af=Ah;}Ac.push(Af);}}else{Ac=Ad;if(Al>0){return Ad;}}if(Ac[0]){Ao=l.copy(Ac[0],{});Ao.rv=Ao.v="";if(this.tp===L){Ao.n=Ao.v="";Ao.markAll=true;}else{Ao.n="";}Ao._ei=Ag.push(Ao)-1;Ao.at=32;Ao.cs=1;Ao.mark=true;Ao.mix="x";Ao.css=(As[0]&&As[0].css)||Ao.css;delete Ao.ui;delete Ao.tui;delete Ao.fs;delete Ao.mdf;}return[Ao].concat(As.concat(Ac));}};mstrmojo._IsEditableXtab=mstrmojo.provide("mstrmojo._IsEditableXtab",{_mixinName:"mstrmojo._IsEditableXtab",update:function AH(Ad){var Ab,Ac=Ad.data;if(this._super){this._super(Ad);}this.kc={};this.rs={};this.rsDelta={};AW.call(this,Ac);if(Ac.eg!==undefined){return ;}Ab=Ad.data.marked;if(Ab){M(Ab,this.rs);}if(!Ac.rw){var Ae=Ac.gvs.items.length;Ac.rw={row:{bb:1,bc:Ae,tc:Ae},col:{bb:-1,bc:-1,tc:0}};}},initCP:function E(Ad,Ac,Ai,Af,Ah,Ae,Ag){var Ab={gridData:Ad,type:Ai,interactiveCellsArray:Ac};Ab.base=Af||Ab.base;Ab.lookupBase=Ah||Ab.lookupBase;Ab.axis=Ae||Ab.axis;Ab.dataSource=this;if(!Ag){if(this.tca===K&&this.editing){if(Ai===L){mstrmojo.EditableXtabTitlesCP=g(mstrmojo.XtabTitlesCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabTitlesCP",tp:L});Ag=new mstrmojo.EditableXtabTitlesCP(Ab);}else{if(Ai===I){mstrmojo.EditableXtabCP=g(mstrmojo.XtabCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabCP"});Ag=new mstrmojo.EditableXtabCP(Ab);}else{Ag=new mstrmojo.XtabCP(Ab);}}}else{if(Ai===L){Ag=new mstrmojo.XtabTitlesCP(Ab);}else{Ag=new mstrmojo.XtabCP(Ab);}}}else{l.copy(Ab,Ag);}return Ag;},createOnDemandCP:function u(Ac,Ad,Ab){var Ae;if(this.tca===K&&this.editing&&Ab===I){mstrmojo.EditableXtabOnDemandCP=g(mstrmojo.XtabOnDemandCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabOnDemandCP"});Ae=new mstrmojo.EditableXtabOnDemandCP();}else{Ae=new mstrmojo.XtabOnDemandCP();}Ae.dataSource=this;Ae.blockNum=Ac;Ae.rc=Ad;return Ae;},preBuildRendering:function B(){var Ab=this.defn.txi;if(this._super){this._super();}this.txar=Ab.txar;this.sci=Ab.sci;this.tca=Ab.tca;if(this.tca!==K){this.editing=false;}else{if(mstrApp.isMobile){this.editing=this.alwaysEditing=true;}}this.nm={};this.ko={};this.dirtyRows={};this.requiredCellsMap={};this.dicGroupMap={};this.lastIndex=0;this.lastHeaderIndexs={};this.columnNames={};},postBuildRendering:function a(){if(this._super){this._super();}if(this.tca===K&&this.gridData.eg===undefined){var Ad=Math.max(-16,-this.domNode.offsetTop),Ae=this;if(!this.alwaysEditing){var Ab=mstrmojo.Button.newIconButton(mstrmojo.desc(8324,"Mark rows"),"mstrmojo-EditButton",function(){if(!Ae.recalculating){Ae.editing=!Ae.editing;Ae.refresh();}}),Ac=new mstrmojo.Button(mstrmojo.hash.copy({cssText:"top:"+Ad+"px;"},Ab));Ac.render();this.domNode.appendChild(Ac.domNode);if(this.editing){this.domNode.style.zIndex=1000;w.addClass(Ac.domNode,"close");}else{w.removeClass(Ac.domNode,"close");}}}},dataDownloadErr:function N(){if(this.txar&&this.recalculating){this.delegateGridAction(function(Ab){Ab.isDownloading=false;},"isDownloading");this.rhsCP.initContent();this.valuesCP.initContent();w.removeClass(this.maskNode,"wait");this.recalculating=false;}},dataDownloaded:function W(Ae,Ac){var Ad=Ae.data;if(this.txar){var Ab=Ac.blockNum,Af;if(this.recalculating){Ac.recalculating=true;this.interactiveCellsArray=[];this.requiredCellsMap={};this.dirtyRows={};this.lastIndex=0;this.lastHeaderIndexs={};this.kc={};this.nm={};this.updatedCellsMap={};this.recalculating=false;this.destroyDICs();}else{Ac.recalculating=false;}if(Ab===0){this.gridData=Ad;}if(Ad.eg){this.refresh();return ;}Af=this.interactiveCellsArray;this.initCP(Ad,Af,L,null,null,null,this.titlesCP);this.initCP(Ad,Af,AX,Ad.ghs.chs,Ad.gts.col,h,this.chsCP);this.titlesCP.initContent();this.chsCP.initContent();this.delegateGridAction(function(Ag){if(Af&&Af.length===0){grid.refresh();}},"refreshOnDataDownloaded");}if(this._super){this._super(Ae,Ac);}AW.call(this,Ad);AG(this.rs,Ad.rw.row);if(Ad.marked){M(Ad.marked,this.rs);this.rsDelta={};}},closeDownloadStatus:function Z(){if(this._super){this._super();}mstrmojo.css.removeClass(this._STATUS,"recalculate");},kc:null,ko:null,nm:null,rs:null,dicGroupMap:null,lastIndex:0,lastHeaderIndexs:{},columnNames:null,getDataInputInfo:function k(Ab,Ae){var Aj=Ab._ei,Ai,Ad=this.node.defn,Ar=this.gridData;if(Ab.mark){Ai=Ab.o;if(Ab.stt){this.rs[Ai]=0;return ;}this.ko[Ai]=Aj;Ab.rv=Ab.v=this.rs[Ai]||-1;this.kc[Aj]={rowop:true};return{key:Aj,t:AV,vls:[{v:-1},{v:1}],wm:1,w:22,hm:1,h:16,dm:1};}var Am=this.model.getCellTitleInfo(Ab,this.dataBlocks[Ab._gd]),As=Am&&Am.title,Ao=As&&As.es,Ah=(Ab.mti!==undefined)?Ab.mti:Ab.mix,Af=(Ab.mix!==undefined),Ap=Ad.txi.dic,Al;Al=l.copy(!Af?Ap.att&&As&&Ap.att[As.id]&&Ap.att[As.id][As.fs[Ab.fi].id]:Ap.mtx&&Ap.mtx[Ao[Ah].oid],{});if(!Al){return null;}if(this.columnNames[Ae]===undefined){this.columnNames[Ae]=!Af?As.n:Ao[Ah].n;}if(Aa(Al)){Al.vls=(Ar.dcv&&Ar.dcv[Al.k])||[];}if(Ar.tcs&&Ar.tcs[Al.k]){var Ak=Ar.tcs[Al.k];if(Ak&F){Al.disabled=true;}if(Ak&AR){Al.req=1;}}if(Aj>=0&&!this.kc[Aj]){var Aq=!Ab.axis,Ag={isMv:Aq};if(Aq){var An=Ab.pi,Ac=An&&An.top;Ag.co=(Ac&&Ac.ci)||0;Ag.metric_id=Ao[Ah].oid;Ab.o=Ag.o=(Ab._lp&&Ab._lp.o)||0;Ag.tp=C;}else{Ag.ax=Ab.axis;Ag.atid=As.id;Ag.form_id=As.fs[Ab.fi].id;Ag.o=Ab.o;Ag.tp=Y;Ag.fi=Ab.fi;Ag.ui=Ab.ui;Ag.tui=Ab.tui;Ag.rs=Ab.rs;}Ag.dt=Al.dt;if(Aa(Al)){Ag.vls=Al.vls;Ag.k=Al.k;}this.kc[Aj]=Ag;}Al.key=Aj;if(Al.dm){Al.dm=parseInt(Al.dm,10);}return Al;},isEditableHeader:function G(Ab){var Ac=this.node.defn,Ad=Ac.txi.dic;if(Ab.sst||!Ad){return false;}if(Ab.id!==undefined&&Ad.att){return !!(Ad.att[Ab.id]&&(Ab.fix?Ad.att[Ab.id][Ab.fid]:Ad.att[Ab.id]));}if(Ab.tui!==undefined&&Ab.mix!==undefined&&Ad.mtx){return !!(Ad.mtx[Ab._e.oid]);}return false;},dataChanged:function R(Ad,Ae,Ac,Af,Ab){if(!this.recalculating){if(Af){this.nm[Ad]=Af;}if(this._super){this._super(Ad,Ae,Ac,Af,Ab);}}},updateValue:function j(Ae,Ac){if(this._super){this._super(Ae,Ac);}var Ai=this.interactiveCellsArray[Ae],Am=Ac.v,An,Ab=AU.call(this,Ai);this.lmr=null;An=AE.call(this,Ai,Ae,Ac);this.updateDirtyUnits();if(Ai.r!==Am){if(!Ai.mark){Ai.mdf=1;mstrmojo.css.removeClass(An,"required");AL.apply(this,[Ai,Ab]);this.flagDirtyUnit(An);}}else{this.clearDirtyUnit(An);}if(this.onCellUpdated){this.onCellUpdated(Ai,An);}if(this.tca===K){if(Ai.mark){var Ag=Ai.markAll?-1:Ai.o,Ak=this.rsDelta;this.rs[Ag]=Am;this.lmr={r:Ag,v:Am};if(Ai.markAll){Ak=this.rsDelta={};Ak[Ag]=Am;this.mghMarks={};}else{if(Ak[Ag]&&Ak[Ag]!==Am){delete Ak[Ag];}else{if(Ak[-1]!==Am){Ak[Ag]=Am;}}}}else{if(this.rs[Ai.o]!==0){this.rs[Ai.o]=1;}if(!this.editing&&this.mghMarks&&(Ai.mix===undefined)){if(!this.mghMarks[Ai.o]||this.mghMarks[Ai.o].rs<Ai.rs){this.mghMarks[Ai.o]={o:Ai.o,rs:Ai.rs,k:Ae};}var Af,Aj,Ah=this;l.forEach(this.rsDelta,function(Ao,Ap){Af=parseInt(Ap,10);Aj=parseInt(Ai.o,10);if(Af>=Aj&&Af<=(Aj+Ai.rs)){delete Ah.rsDelta[Ap];}});}else{this.rsDelta[Ai.o]=1;}if(!this.editing&&Ai.rs>1){var Ad=Ai.o+1;while(Ad-Ai.o<Ai.rs){if(!d(this.rhsCP,Ad,this.rs)){this.rs[Ad]=1;}Ad+=1;}}if(this.editing){var Al=this.dicGroupMap.m_x.widgetsMap[this.ko[Ai.o]];if(Al){Al.set("checked",true);}}}}if(this.txar&&!Ai.mark){return true;}return false;},autoRefresh:function AK(Ab){this.delegateGridAction(function(Ac){Ac.invalidAllPages();},"invalidAllPages");this.rhsCP.invalid();this.valuesCP.invalid();w.addClass(this._STATUS,"recalculate");this.delegateGridAction(function(Ac){var Ad=Ac.parent;if(Ad&&!Ac.connectedScrollbox){Ad.connectScrollbox(Ac);Ac.connectedScrollbox=true;}Ac.onscroll(true,Ab);},"scrollOnAutoRefresh");this.recalculating=true;},getKeyContext:function P(Ab){return this.kc[Ab];},getUpdateObject:function U(){var Ag=[],Ae,Ah,Ai,Ac=this.lmr,Ad,Af={};if(Ac){this.lmr=null;return{manipulation:AS,actionType:(Ac.v===-1)?AF:AD,rowOrdinal:Ac.r,nodeKey:this.k,sliceId:this.sid};}Ah=this.getUpdatedValues();for(Ae=0;Ae<(Ah&&Ah.length);Ae++){if(!Ah[Ae].rowop){Ai=Ah[Ae];break;}}if(Ai){Ad=mstrmojo.string.encodeXMLAttribute(String(Ai.v));if(Ai.k!==undefined&&Ai.vls){var Ab=AB.find(Ai.vls,"v",Ai.v);if(Ab!==-1){Af={controlKey:Ai.k,elementId:Ai.vls[Ab].eid};}}if(!!Ai.isMv){Ag.push(l.copy(Af,{rowOrdinal:Ai.o,colOrdinal:Ai.co,newValue:Ad,dataType:Ai.dt}));}else{Ag.push(l.copy(Af,{rowOrdinal:Ai.o,attId:Ai.atid,formId:Ai.form_id,unitIndex:Ai.tui||Ai.ui,newValue:Ad,dataType:Ai.dt}));}}return{manipulation:H,nodeKey:this.k,sliceId:this.sid,cells:Ag,autoRefresh:this.txar};},getUpdates:function V(){var Al=this,Ag,Ah,Ab=Al.getUpdatedValues(),Ae=this.rsDelta,Af=[],Ak=[],Ai=false,Ad="";Af.push('<gr rw_tree_type="'+Al.treeType+'" rw_node_key="'+Al.k+'" slice_id="'+Al.sid+'">');for(Ag in Ab){if(Ab.hasOwnProperty(Ag)){Ah=Ab[Ag];if(!Ah.rowop){var Am=mstrmojo.string.encodeXMLAttribute(String(Ah.v)),Ac=AB.find(Ah.vls,"v",Ah.v);if(Ah.k&&Ah.vls&&Ac===-1){if(!!Ah.isMv){Ak.push('<cli cordinal="'+Ah.co+'" metric_id="'+Ah.metric_id+'"><updt types="'+AI+'" rordinal="'+Ah.o+'" rw_control_key="'+Ah.k+'"/></cli>');}else{Ak.push('<cli ax="'+Ah.ax+'" attribute_id="'+Ah.atid+'" form_id="'+Ah.form_id+'"><updt types="'+AZ+'" ordinal="'+Ah.o+'" rw_control_key="'+Ah.k+'" flags="1"/></cli>');}}else{if(Ah.k&&Ah.vls&&Ac!==-1){Ad='rw_control_key="'+Ah.k+'" element_id="'+mstrmojo.string.encodeXMLAttribute(String(Ah.vls[Ac].eid))+'" ';}if(!!Ah.isMv){Ak.push('<cli cordinal="'+Ah.co+'" metric_id="'+Ah.metric_id+'"><updt types="'+Ah.tp+'" rordinal="'+Ah.o+'" '+Ad+'value="'+Am+'" dt="'+Ah.dt+'"/></cli>');}else{Ak.push('<cli ax="'+Ah.ax+'" attribute_id="'+Ah.atid+'" form_id="'+Ah.form_id+'"><updt types="'+Ah.tp+'" ordinal="'+Ah.o+'" '+Ad+'value="'+Am+'" dt="'+Ah.dt+'"'+(this.mghMarks?' flags="1"':"")+"/></cli>");}}Ai=true;}}}if(!l.isEmpty(this.mghMarks)){var Aj=this;l.forEach(this.mghMarks,function(An,Ao){Ad=Aj.getKeyContext(An.k);Ak.push('<mark rordinal="'+Ao+'" types="4" flags="1" attribute_id="'+Ad.atid+'" form_id="'+Ad.form_id+'"/>');});}if(Ae&&!l.isEmpty(Ae)){Ai=true;AB.forEach(l.keyarray(Ae).sort(),function(An){if(Ae[An]===1){Ak.push('<mark rordinal="'+An+'" types="4"/>');}else{Ak.push('<mark rordinal="'+An+'" types="5"/>');}});}Af.push(Ak.join(""));Af.push("</gr>");if(!Ai){Af=[];}return Af.join("");},flagDirtyUnit:function e(Ac){if(Ac&&this.sci){if(this._super){this._super(Ac);return ;}var Ab=document.createElement("div"),Ag,Ad=false,Af=w.getStyleValue(this.domNode,t.CSS3_TRANSFORM),Ae;Ab.className="flag-container";Ab.innerHTML='<div class="dirty-cell"/>';if(Ac.insertBefore){Ac.insertBefore(Ab,Ac.firstChild);Ae=(Ab.offsetParent===Ac);}Ad=mstrmojo.string.isEmpty(Af)||Af==="none";Ag=Ab.firstChild;Ag.style.top=((!Ad||Ae)?(-Ab.offsetTop):(Ac.offsetTop-Ab.offsetTop))+"px";Ag.style.left=(Ac.clientWidth+((!Ad||Ae)?(-Ab.offsetLeft):(Ac.offsetLeft-Ab.offsetLeft))-8)+"px";}},updateDirtyUnits:function AT(){var Ab=this.domNode,Ad=Ab.getElementsByClassName("dirty-cell"),Af=w.getStyleValue(Ab,t.CSS3_TRANSFORM),Ac=mstrmojo.string.isEmpty(Af)||Af==="none",Ae;AB.forEach(Ad,function(Ai){var Ag=Ai.parentNode,Ah=Ag&&Ag.parentNode;Ae=Ah.insertBefore?Ag.offsetParent===Ah:false;Ai.style.top=((!Ac||Ae)?(-Ag.offsetTop):(Ah.offsetTop-Ag.offsetTop))+"px";Ai.style.left=(Ah.clientWidth+((!Ac||Ae)?(-Ag.offsetLeft):(Ah.offsetLeft-Ag.offsetLeft))-8)+"px";});},clearDirtyUnit:function AY(Ab){if(this._super){this._super(Ab);return ;}var Ac=Ab.firstChild;if(Ab){if(Ac&&Ac.className&&Ac.className==="flag-container"){Ab.removeChild(Ac);}}},onvisibleChange:function z(){if(this.visible===true){var Ab=this;setTimeout(function(){Ab.configureActions();},10);}},configureActions:function X(){if(this.visible===false){return ;}this.configureCellsAction();this.lastIndex=this.interactiveCellsArray.length;var Ab=this;this.delegateGridAction(function(Ac){p.call(Ab,Ac);},"markEditableColHeaders");this.registerTxWidget();if(this._super){this._super();}},configureCellsAction:function AM(Ad,An,A8,Af){var Al=this,A1=this.getTargetZone(),A8=A8||A1.posMap,Aj=Ad||this.interactiveCellsArray,An=(An===undefined?this.lastIndex:An),BD=this.dicGroupMap,Au=[],BB,Am,A9,A7,Aq,Ar,As,A3,BC,Ah,Az,Ai,A5,Ap=function(){var BE=[];this.delegateGridAction(function(BF){BE.push(BF);},"configureActions");return BE;},At=Ap.call(this),Av=(At.length>1),Ak=function(BE){var BG=BE.length,BF;for(BF=0;BF<BG;BF++){Al.flagDirtyUnit(BE[BF]);}};for(BB=An,Am=Aj.length;Aj[BB]&&BB<Am;BB++){Aq=Aj[BB];Ar=A8&&A8[BB];if(!Ar&&Av){A1=(At[0]===A1)?At[1]:At[0];A8=A1&&A1.posMap;Ar=A8&&A8[BB];}if(Ar&&((Aq.at&32)>0)){Aq.at=32;if(Aq.rv==null){Aq.rv=isNaN(Aq.mix)?Aq._e.n:Aq.v;}A3=J(Aq);Az=this.getDataInputInfo(Aq,A3);Ai=BD[A3];if((Aq.axis===h||Aq.axis===Q&&Aq.o===undefined)&&this.clonedColHeader&&this.clonedColHeader.isRendered()){A5=this.clonedColHeader.getTableNode();}else{if(Aq.axis===Q&&this.clonedRowHeader){if(this.clonedRowHeader.isRendered()){A5=this.clonedRowHeader.getTableNode();}else{A5=A1.tableNode;if(Az&&!Ai){this.clonedRowHeader.addGroupKey(A3);}this.clonedRowHeader.addTempDICInfo(Aq,Ar);}}else{A5=A1.tableNode;}}As=A5.tBodies[Ar.page].rows[Ar.row].cells[Ar.cell];if(Az){if(!Ai){Ai=BD[A3]=mstrmojo.DICFactory.createDICGroup({gk:A3,dic:Az,owner:this,openerType:o});}var A0=!AA(Aq)||Az.disabled;var Ao={value:(Aq.rv===undefined)?(Aq.v||Aq.n):(typeof Aq.rv==="string"?mstrmojo.string.decodeHtmlString(Aq.rv):Aq.rv),dv:Aq.v||Aq.n,ts:Aq.ts,markAll:Aq.markAll,openerNode:As,k:Aq._ei,ownerCell:Aq,enabled:!A0,popupTitle:this.columnNames[A3]},Ae=A1.cp.stackedRh;if(Ae&&Aq.singleStack&&(mstrmojo.DICConfig.showDICByDefault(Az,1)||mstrmojo.DICConfig.hasDICPreview(Az,1))){var A6=As.offsetHeight;As.className+=" igDIC";As.style.cssText="height:"+A6+"px;";if(Ai.showByDefault){As.className+=" sbd";}mstrmojo.hash.copy({inlineExtraCssText:"position:absolute;top:"+parseInt(Ae/2-A6/2+1,10)+"px;"},Ao);}Ai.addDIC(Aq._ei,Ao);BC=Ar.page*A1.rowsPerPage+Ar.row;if(Az.req){for(A7=0;A7<(this.editing?1:(Aq.rs||1));A7++){Ah=this.requiredCellsMap[BC+A7];if(!Ah){this.requiredCellsMap[BC+A7]=Ah=[];}Ah.push(Aq);}}if(Aq.mdf&&!Af){Au.push(As);AL.apply(this,[Aq,BC]);}if(A0&&!mstrmojo.DICConfig.showDICByDefault(Az,1)){var Ax=document.createElement("div"),Ay=document.createElement("span"),A2=As.currentStyle||document.defaultView.getComputedStyle(As,null),Ab={marginLeft:"-"+A2.paddingLeft,paddingLeft:A2.paddingLeft,marginRight:"-"+A2.paddingRight,paddingRight:A2.paddingRight,marginTop:"-"+A2.paddingTop,paddingTop:A2.paddingTop,marginBottom:"-"+A2.paddingBottom,paddingBottom:A2.paddingBottom};Ax.className="xtab-dic-disabled";l.copy(Ab,Ax.style);Ay.appendChild(As.firstChild);Ax.appendChild(Ay);As.appendChild(Ax);}}}}this.lastIndex=BB;var BA=A1.tableNode.rows,Aw=BA&&BA.length>=2,Ag,Ac=[],A4=[];if(Aw){Ag=BA[1].children;AB.forEach(Ag,function(BE){Ac.push(BE.clientWidth);A4.push(BE.clientHeight);});}for(A3 in BD){BD[A3].render();}if(Aw){AO(Ag,Ac,A4,A1.tableNode);}setTimeout(function(){Ak(Au);},25);},destroyDICGroup:function x(Ac){var Ad=this.dicGroupMap,Ab,Ae,Af;if(Ad&&(Ac instanceof Array)){for(Ab in Ac){Ae=Ac[Ab];Af=Ad[Ae];if(Af){Af.destroy();delete Ad[Ae];}}}},showPopupDIC:function A(Ae){var Ac=Ae&&t.findAncestorByAttr(Ae,"ei",true,this.viewport);if(Ac){var Af=Ac.node,Ab=this.getCellForNode(Af),Ad=this.dicGroupMap[J(Ab)];if(Ad&&!Ad.dic.disabled&&!(Ab.tav&&(Ab.tav&F))){Ad.showPopupDIC(Ab._ei);return true;}}return false;},onclick:function AP(Ac){var Ab=mstrmojo.dom.eventTarget(window,Ac.e);if(!this.showPopupDIC(Ab)&&this._super){this._super(Ac);}},unrender:function D(){if(this._super){this._super();}this.destroyDICs();},destroyDICs:function AC(){var Ab=this.dicGroupMap;this.dicGroupMap={};setTimeout(function(){var Ac;for(Ac in Ab){Ab[Ac].destroy();}},10);},checkRequiredObjects:function O(){if(this.hasRendered&&!(this.isInteractiveGrid&&this.isInteractiveGrid())&&!this.gridData.eg){var Ad=this.getTargetZone();if(!Ad){return true;}var Af=Ad.posMap,Ah,Ae=this,Ac=this.rs,Ab=true,Ag=function(An,Aj){var Am=true,Ak=Ae.requiredCellsMap[An],Ai=(Ak&&Ak.length)||0,Al;for(Al=0;Al<Ai;Al++){if(!Ak[Al].mdf){w.toggleClass(Ad.getNodeByPosition(Af[Ak[Al]._ei]),"required",Aj);Am=!Aj;}}return Am;};if(this.tca===K){for(Ah in Ac){Ab=Ag(parseInt(Ah,10)+1,Ac[Ah]>0)&&Ab;}}else{for(Ah in this.dirtyRows){Ab=Ag(Ah,true)&&Ab;}}return Ab;}return true;},editNext:function s(Ad){if(this.recalculating){return false;}var Ae=this.interactiveCellsArray,Ab=Ae.length,Af=Ad+1,Ag,Ac;do{if(Af>=Ab){Af%=Ab;}if(Af===Ad){return false;}Ag=Ae[Af];var Ah=this.dicGroupMap[J(Ag)];if(Ah&&!Ah.dic.disabled&&AA(Ag)){if(mstrmojo.DICConfig.isKeyNavigable(Ah.dic)){if(!Ah.showByDefault){Ah.showPopupDIC(Af);}else{Ac=Ah.widgetsMap[Af];Ac.focus();}return true;}}Af++;}while(true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasScrollbox","mstrmojo.XtabZone","mstrmojo._ShowsStatus","mstrmojo.boxmodel","mstrmojo.dom");var Q=1,X=2,Y=0,A=1,AC=2,M=3;var L=1;var AE=2;var G=4;var g=8;var d=mstrmojo.dom,u;function AI(AJ){var AK=null;if(AJ&&AJ.length>1){AK=new mstrmojo.XtabVACP();AK.cps=AJ;}return AK;}function P(AK){var AJ=document.createElement("img");AK.appendChild(AJ);AK.removeChild(AJ);}function I(AK,AJ){if(d.isIE){return mstrmojo.boxmodel.convert2px(AK,AJ);}return AJ;}function H(AK){if(!AK||this._onDemandCP){return null;}var AR=AK.bc,AP=AK.tc,AL=AP-AR,AQ=Math.ceil(AL/AR),AM=[],AO=[],AN;for(AN=0;AN<AQ;++AN){var AJ=Math.min(AL,AR);AM.push(this.createOnDemandCP(AN+1,AJ,G));AO.push(this.createOnDemandCP(AN+1,AJ,g));AL-=AR;}this._onDemandCP={rhs:AM,vls:AO};return this._onDemandCP;}mstrmojo.XtabBase2=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasScrollbox,mstrmojo._ShowsStatus],{scriptClass:"mstrmojo.XtabBase2",dataRenderMode:"vscroll",handleClicks:function F(){return true;},markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-Xtab {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div style="display: none;{@msgNodeCssText}"><div>&nbsp;</div></div><div class="mstrmojo-Xtab-overlay"></div><div class="mstrmojo-Xtab-content {@cssDefault}" title="{@tooltip}" style="{@viewportCssText}" mstrAttach:click,selectstart,touchstart><table cellspacing="0" cellpadding="0"><tr trType="title"><td style="vertical-align:top;padding:0px"></td><td class="xtab-tr" style="vertical-align:top;padding:0px;"></td></tr><tr trType="content"><td class="xtab-bl" style="vertical-align:top;padding:0px;"></td><td class="xtab-br" style="vertical-align:top;padding:0px"><div class="mstrmojo-progress" style="display:none"><div class="mstrmojo-progress-barbg"><div class="mstrmojo-progress-bar"></div></div><div class="mstrmojo-progress-text"></div></div><div id="{@id}_scrollbox" style="position:relative;{@scrollboxNodeCssText};{@scrollboxNodeOverflow}"></div></td></tr></table></div></div>',markupSlots:{overlayNode:function(){return this.domNode;},msgNode:function(){return this.domNode.firstChild;},maskNode:function(){return this.domNode.childNodes[1];},viewport:function(){return this.domNode.lastChild;},contentNode:function(){return this.domNode.lastChild.firstChild;},scrollboxNode:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].lastChild;},_TL:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0];},_TR:function(){return this.domNode.lastChild.firstChild.rows[0].cells[1];},_BL:function(){return this.domNode.lastChild.firstChild.rows[1].cells[0];},_BR:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].lastChild;},_T_ROW:function(){return this.domNode.lastChild.firstChild.rows[0];},_B_ROW:function(){return this.domNode.lastChild.firstChild.rows[1];},_BR_CELL:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1];},_STATUS:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild;},_STATUS_TXT:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild.lastChild;},_STATUS_BAR:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild.firstChild.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";}},zones:null,lockHeadersCase:M,interactiveCellsArray:null,titlesCP:null,chsCP:null,rhsCP:null,valuesCP:null,onDemandIF:true,numRowFixed:false,heightLimit:0,height:0,widthLimit:0,width:0,useTouchScrolling:false,scrollInterval:0,selections:null,dataBlocks:null,gridInfo:null,getCellUnitIndex:function q(AJ){return(AJ.o!==undefined)?AJ.o:AJ._ei;},getCellTitleId:function e(AJ){var AK="";if(AJ.axis&&AJ.ui!==undefined){AK=AJ.axis+"A"+(AJ.ui+1);}else{if(AJ.mix!==undefined){AK="0A"+AJ.mix;}}return AK;},update:function l(AK){this.set("gridData",AK.data[0]||AK.data);var AJ=this.defn||AK.defn;this.sid=this.gridData.sid;this.treeType=(AJ&&AJ.tt)||1;this.interactiveCellsArray=[];this.gridInfo=AK.data.gsi;},initCP:function D(AL,AK,AQ,AN,AP,AM,AO){var AJ={gridData:AL,type:AQ,interactiveCellsArray:AK};AJ.base=AN||AJ.base;AJ.lookupBase=AP||AJ.lookupBase;AJ.axis=AM||AJ.axis;if(!AO){if(AQ===L){AO=new mstrmojo.XtabTitlesCP(AJ);}else{AO=new mstrmojo.XtabCP(AJ);}}else{mstrmojo.hash.copy(AJ,AO);}return AO;},preBuildRendering:function B(){var AJ=this.gridData;this.lockHeadersCase=AJ.lhv||Y;this.selections={};this.cssDefault=(this.lockHeadersCase===Y||!this.k)?"":"r-cssDefault"+(this.k?"_"+this.k:"");this.numRowFixed=!!(!this.height&&AJ.rw&&AJ.rw.row&&(AJ.rw.row.bc<AJ.rw.row.tc));this.rw=AJ.rw;this._onDemandCP=null;if(this.width){this.widthLimit=parseInt(this.width,10);}if(this.height){this.heightLimit=parseInt(this.height,10);}return(this._super)?this._super():true;},renderEmptyGrid:function w(){var AL=this.gridData,AK=this.msgNode,AJ=this.viewport;AK.firstChild.innerHTML=AL.eg;AK.style.display="block";AK.style.overflow="hidden";AK.className="mstrmojo-message";AJ.style.display="none";return(this._super)?this._super():true;},postBuildRendering:function s(){var AR=this.gridData,AN=!!this._BR&&AR,AJ=this.msgNode,AO=this.viewport,AP;if(AR.eg===undefined){if(AJ.style.display==="block"){AJ.style.display="none";AO.style.display="block";}}else{return this.renderEmptyGrid();}if(!this.interactiveCellsArray){this.interactiveCellsArray=[];}if(AN){this._setupZones(AR);this._setupCPs(AR);var AM=this.zones,AK;for(AK in AM){var AQ=AM[AK];if(AQ.parent!==this){this.addChildren(this.zones[AK]);}}if(this.scrollboxNode){var AL=this.heightLimit;this.scrollboxHeightFixed=!isNaN(AL)&&(AL>0);if(this.scrollboxHeightFixed){this.scrollboxHeight=AL;}this.scrollboxLeft=this.scrollboxTop=0;if(this.lockHeadersCase){this.connectScrollbox(this);}}}this.renderChildren();AP=this._super();if(this.numRowFixed){if(!this.height){this.heightLimit=this.zones._BR.getPageHeight(0)+(this._TR?this._TR.offsetHeight:0);this.height=this.heightLimit+"px";}else{this.heightLimit=parseInt(this.height,10);}}if((this.lockHeadersCase&&AN&&this.scrollboxNode)||this.numRowFixed){this.resizeScrollBox(d.isIE);}this.onGridWidthChanged(true);if(d.isIE7&&!this.scrollboxHeightFixed&&this.scrollboxNode&&this.scrollboxNode.scrollWidth>this.scrollboxNode.offsetWidth){this.scrollboxNode.style.height=this.scrollboxNode.offsetHeight+17+"px";}return AP;},onclick:function t(AO,AJ){if(!this.interactiveCellsArray.length){return ;}AO=AO.e||AO;var AL=mstrmojo.dom,AN=AL.eventTarget(AJ,AO),AM=AN&&AL.findAncestorByName(AN,"td",true,this.viewport);if(AM){var AK=AL.findAncestorByName(AN,"span",true,AM);if(AK&&!AL.shiftKey(AJ,AO)&&!AL.ctrlKey(AJ,AO)){this.defaultAction(AM);}else{this.doSelection(AO,AJ,AM);AL.clearBrowserHighlights();}}},ontouchend:function h(AK,AJ){this.onclick(AK,AJ);},onselectstart:function x(){return false;},onscroll:function z(){this._alignHeaders();},resizeScrollBox:function J(AL){var AJ=this.scrollboxNode,AU=AJ&&AJ.style,Aa=this._B_ROW,AZ=this._BR_CELL;if(!AU||!Aa||!AZ){return ;}var AT=this.widthLimit,AS=this.heightLimit;if(!AT||!AS){if(!AT){AU.width="auto";}if(!AS){AU.height="auto";this.scrollboxHeightFixed=false;}}if(AS){var AR=(this.zones._TR&&this.zones._TR.cp.rc)?Aa.offsetTop:0,AW=AS-AR;if(AW>0){AU.height=AW+"px";this.scrollboxHeight=AW;this.scrollboxHeightFixed=true;if((this.lockHeadersCase!==Y)&&this.numRowFixed){this.viewport.style.height=this.overlayNode.style.height=(AW+AR)+"px";}}}if(!this.useTouchScrolling){var AK=(this.zones._BL&&this.zones._BL.cp.rc)?AZ.offsetLeft:0;var AY=0;if(this.lockHeadersCase!==Y){var AX=this.viewport,AM=mstrmojo.css.getComputedStyle(AX),AV=["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"];if(AM){mstrmojo.array.forEach(AV,function(Ab){AY+=parseFloat(I(AX,AM[Ab]));});}if(this.width){this.viewport.style.width=(parseFloat(this.width)-(AY||0))+"px";}}var AN=(this.widthLimit&&(this.widthLimit-AK))||(mstrmojo.dom.isIE7?AZ.scrollWidth+1:(AZ.scrollWidth+(AJ.offsetWidth-AJ.clientWidth)));if(AN&&(AN>0)){AN-=AY;AU.width=AN+"px";}this._alignHeaders(AL);}var AQ=AU.height,AP=AU.width;if(AQ||AP){var AO=mstrmojo.findAncestor(this,"fixedSizeCanGrowShrink",null,mstrmojo.DocSection);if(AO){AO.fixedSizeCanGrowShrink(this,AQ,AP);}}},_resizeScrollBoxWidth:function V(){var AO=this.scrollboxNode,AL=AO&&AO.style,AK=this._B_ROW,AJ=this._BR_CELL;if(this.useTouchScrolling||!AL||!AK||!AJ){return ;}var AM=this.widthLimit;if(!AM){AL.width="auto";}var AN=function(){var AP=(mstrmojo.dom.isIE7?AJ.scrollWidth+1:(AJ.scrollWidth+(AO.offsetWidth-AO.clientWidth)));if((AP&&(AP>0))&&(!AM||(AM&&(AP<AM)))&&(AO.firstChild.firstChild.offsetWidth>=AO.clientWidth)){AL.width=AP+"px";}};if(mstrmojo.dom.isIE7){window.setTimeout(function(){AN();},1);}else{AN();}},onGridWidthChanged:function a(AL){if(this.lockHeadersCase===Y&&!AL){this._resizeScrollBoxWidth();}var AK=mstrmojo.findAncestor(this,"fixedSizeCanGrowShrink",null,mstrmojo.DocSection),AJ=this.widthLimit;if(!AJ){this.width=u;if(AK){AK.performCanGrowCanShrink([this],true);}}else{if(AK){AK.fixedSizeCanGrowShrink(this,null,AJ);}}},getGridDimension:function R(AM){var AK=1,AL=AM===AK?"Height":"Width",AN=AL.toLowerCase(),AJ=this[AN+"Limit"];if(!AJ&&(this[AN]===u||this[AN]===0)){AJ=this.viewport["offset"+AL];this[AN]=AJ+"px";return AJ;}return AJ||parseInt(this[AN],10);},_alignHeaders:function p(AK){if(this.lockHeadersCase===Y||this.useTouchScrolling){return ;}var AN=this.scrollboxLeft,AM=this.scrollboxTop,AL=this.zones,AJ=AL._TR,AO=AL._BL;function AP(AQ,AU,AR){var AT=AQ&&AQ.domNode,AS=AT&&AT.style;if(!AS){return ;}AS[AU]=-AR+"px";}if(AJ&&AJ.rc){AP(AJ,"left",AN);}if(AO&&AO.rc){AP(AO,"top",AM);}if(AK){P(this._BL);}},defaultAction:function S(AO,AK){var AJ=AK||this.getCellForNode(AO),AN=AO&&AO.className.indexOf("sc_")>0,AM=this.model.getAction(this.getActionCells(AJ),AO,AN),AL=AM&&AM.h;this._currentSelectedTD=AO;if(AL&&this.controller[AL]){this.controller[AL](this,AM.a);return true;}return false;},createZone:function o(AJ){return new mstrmojo.XtabZone(AJ||{});},_setupZones:function k(AM){var AK=this.zones;this.zones={};var AO=this.zones,AJ=this.lockHeadersCase,AQ="z-index:";var AL=this;function AP(AU,AT,AV,AS){var AR=(AS&&AS[AV])||AL.createZone({renderMode:AU,cssText:AT,slot:AV});AO[AV]=AR;AR.rh=AM.rh;}AP(this.dataRenderMode,AQ+"1;","_BR",AK);if(AJ&A){AP(this.dataRenderMode,AQ+"3;","_BL",AK);}if(AJ&AC){AP(null,AQ+"3;","_TR",AK);}if(AJ===M){AP(null,AQ+"4;","_TL",AK);}if(AJ===Y){this.zones._BR.autoFitWindow=!!AM.afw;this.zones._BR.tableCssClass="r-cssDefault"+(this.k?"_"+this.k:"");}if(mstrmojo.dom.isIE7){if(AJ&A||AJ&AC||AJ===M){this._T_ROW.style.display="block";}else{if(AJ===Y){this._T_ROW.style.display="none";}}}var AN=AO._BL||AO._BR;if(AN){AN.numColumnCanMerge=AM.gts.cws.length-1;}},getHACP:function AH(){return(this._super&&this._super())||new mstrmojo.XtabHACP();},_setupCPs:function W(AR){var AM=this.titlesCP=this.getTitleCP(AR),AO=this.chsCP=this.getColumnHeadersCP(AR),AK=this.rhsCP=this.getRowHeadersCP(AR),AL=this.valuesCP=this.getValuesCP(AR);AM.forceAutoRowHeight=AO.forceAutoRowHeight=AR.rh;var AP=this.zones;switch(this.lockHeadersCase){case Y:var AV=new mstrmojo.XtabVACP();var AJ=this.getHACP();AJ.cps=[AM,AO];AV.cps=[AJ];var AT=this.getHACP();AT.cps=[AK,AL];AV.cps.push(AT);AP._BR.cp=AV;break;case A:var AS=new mstrmojo.XtabVACP();var AN=new mstrmojo.XtabVACP();AS.cps=[AM,AK];AN.cps=[AO,AL];AP._BL.cp=AS;AP._BR.cp=AN;break;case AC:var AQ=this.getHACP();var AU=this.getHACP();AQ.cps=[AM,AO];AU.cps=[AK,AL];AP._TR.cp=AQ;AP._BR.cp=AU;break;case M:AP._TL.cp=AM;AP._TR.cp=AO;AP._BL.cp=AK;AP._BR.cp=AL;break;}},ongridDataChange:function Z(){var AJ=this.model;if(AJ){AJ.set("data",this.gridData);if(!this.dataBlocks){this.dataBlocks=[];}this.dataBlocks[0]=this.gridData;}},gridPagesRendered:mstrmojo.emptyFn,getTitleCP:function E(AJ){return this.initCP(AJ,this.interactiveCellsArray,L);},getColumnHeadersCP:function AD(AJ){return this.initCP(AJ,this.interactiveCellsArray,AE,AJ.ghs.chs,AJ.gts.col,X);},getRowHeadersCP:function AF(AJ){var AK=this.initCP(AJ,this.interactiveCellsArray,G,AJ.ghs.rhs,AJ.gts.row,Q);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){H.call(this,this.rw&&this.rw.row);}this.rhsCPList=[AK].concat(this._onDemandCP.rhs);return AI(this.rhsCPList)||AK;}return AK;},getValuesCP:function b(AK){var AJ=this.initCP(AK,this.interactiveCellsArray,g,AK.gvs);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){H.call(this,this.rw&&this.rw.row);}this.valuesCPList=[AJ].concat(this._onDemandCP.vls);return AI(this.valuesCPList)||AJ;}return AJ;},createOnDemandCP:function f(AK,AL,AJ){var AM=new mstrmojo.XtabOnDemandCP();AM.dataSource=this;AM.blockNum=AK;AM.rc=AL;return AM;},dataDownloaded:function U(AL,AO){var AQ=AO.blockNum,AJ=this.rhsCPList[AQ],AM=this.valuesCPList[AQ],AP=AL.data;AP._bidx=AQ;this.dataBlocks[AQ]=AP;if(!AJ||!AM){return ;}this.initCP(AP,this.interactiveCellsArray,G,AP.ghs.rhs,AP.gts.row,Q,AJ);this.initCP(AP,this.interactiveCellsArray,g,AP.gvs,null,null,AM);AJ.initContent();AM.initContent();this.numRowsDownloaded+=parseInt(AJ.rc,10);this.updateStatus(mstrmojo.desc(8301,"Retrieving Data ..."),this.numRowsDownloaded*100/this.numRowsToDownload);var AN=this.zones,AK=AN&&AN._BL,AR=AN&&AN._BR;if(AK){AK.dataDownloaded();}if(AR){AR.dataDownloaded();}},showDownloadStatus:function O(AJ){if(!AJ){return ;}if(this.showingStatus){this.numRowsToDownload+=AJ;}else{this.numRowsToDownload=AJ;this.numRowsDownloaded=0;}if(this.showStatus){this.showStatus(true,mstrmojo.desc(8301,"Retrieving Data ..."),this.numRowsDownloaded*100/this.numRowsToDownload);}},closeDownloadStatus:function j(){this.numRowsToDownload=0;if(this.showStatus){this.showStatus(false);}},download:function K(AL){var AN=this.gridData.rw,AK=AN.row,AM=AN.col,AJ=AK.bc;this.rhsCPList[AL].isDownloading=this.valuesCPList[AL].isDownloading=true;if(AJ){this.controller.onDownloadGridData(this,this.model.getDownloadAction(AL*AJ+1,AJ,AM.bb,AM.bc,this.id,{blockNum:AL}));}},unrender:function C(AJ){this.width=this.widthLimit=this.height=this.heightLimit=0;this.disconnectScrollbox(this);this._super(AJ);},getCellForNode:function AB(AK){var AJ=AK&&AK.getAttribute("ei");if(isNaN(AJ)){return null;}return this.interactiveCellsArray[parseInt(AJ,10)];},getActionCells:function N(AJ){var AK=[],AM=this.selections;var AN=AJ.axis+"A"+(AJ.ui+1),AO=AM[AN],AL;if(AO&&AO[AJ.o]){for(AL in AO){var AP=this.getCellForNode(AO[AL][0]);AK.push(AP);}}else{AK.push(AJ);}return AK;},setModel:function AG(AJ){this.model=AJ;if(AJ.data){this.set("gridData",AJ.data);}},destroy:function AA(){var AJ=this.model;if(AJ&&AJ.destroy){AJ.destroy();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var E=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function C(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=E.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+D[E.itemDisplayField]+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxHoriz","mstrmojo.string");var B=mstrmojo.string;var A={render:function(G,C,H){var I=(H.htmlName+C),E=H.selectedIndices[C]?"checked ":"",F=E?" selected":"",D=G.v!=="u;"?" nAll":"";return'<div class="'+H.itemCssClass+F+D+'"><input type="'+H.inputType+'" name="'+H.htmlName+'" id="'+I+'" value="'+C+'" '+E+'/><label for="'+I+'" title="'+B.encodeHtmlString(G[H.itemTitleField]||"")+'" style="'+H.labelCssText+'">'+B.encodeHtmlString(G[H.itemDisplayField||"n"])+"</label></div>";},select:function(D){var C=D&&D.firstChild;if(C){if(!C.checked){C.checked=true;}mstrmojo.css.toggleClass(D,"selected",C.checked);}},unselect:function(D){var C=D&&D.firstChild;if(C){if(C.checked){C.checked=false;}mstrmojo.css.toggleClass(D,"selected",C.checked);}},rowHeight:23};mstrmojo._RendersInputItems=mstrmojo.provide("mstrmojo._RendersInputItems",{inputType:null,htmlName:null,itemRenderer:A,init:function(C){this._super(C);if(!this.htmlName){this.htmlName=this.id;}},preclick:function(F){var E=F.hWin,H=F.e,G=mstrmojo.dom.eventTarget(E,H);if(G&&G.nodeName.match(/input/i)){var D=parseInt(G.value,10);if(this.inputType&&this.inputType.match(/radio/i)){this.singleSelect(D);}else{var C=(G.checked)?"add":"remove";this[C+"Select"](D);}}}});mstrmojo._InputList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputList"});mstrmojo._InputListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputListHoriz"});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.array","mstrmojo.android.EnumMenuOptions","mstrmojo.android.ui.ActionToolbar");mstrmojo.requiresDescs(1,1143,7831);var Y=mstrmojo.android.EnumMenuOptions,I=mstrmojo.hash,b=mstrmojo.array.forEach,j=Y.SETTINGS,J=Y.HELP,Z=Y.LEARN,F=-1;var f={currentViewMedia:0,documentID:"objectID",elementsPromptAnswers:0,link:0,linkAnswers:0,objectID:0,objectsPromptAnswers:0,promptsAnswerXML:0,reportID:0,reportViewMode:0,valuePromptAnswers:0,visMode:0,desiredElements:0,desiredUnits:0,projectID:0,Project:"projectID",groupByElements:0,pageByElements:0,layoutIndex:0,originMessageID:"originMessageID",promptAnswerMode:0,selectorMode:"selectorMode"};mstrmojo.android.controllers.ViewController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.controllers.ViewController",supportsFullScreen:false,start:function P(q){this.set("orientation",mstrApp.isLandscape()?0:1);this.pid=mstrApp.getCurrentProjectId();},detach:function p(){var t=this,u=t.nextController,s=t.prevController;if(s){delete s.nextController;}if(u){u.destroy();}this.nextController=this.prevController=null;var q=this.view;if(q){q.destroy();}},destroy:function k(){this.detach();this._super();},canDetach:function O(q){return q.hsc||!this.hsc;},getUpStatus:function L(){return !this.hsc;},spawn:function G(s,q){var t=this.nextController;if(t){if(!t.canDetach(s)){t.spawn(s,q);return ;}t.destroy();}this.nextController=s;s.prevController=this;s.rootCtrl=this.rootCtrl||this;s.start(q||{});},spawnFailed:function U(q){this.makeCurrent();mstrApp.onerror(q);},viewFailed:function V(s){if(s){mstrmojo.dbg("details: "+JSON.stringify(s));}mstrApp.hideMessage();if(this.view){if(this.rootCtrl.getCurrent()!==this){this.makeCurrent(true);}}else{var q=this.prevController;if(q){q.spawnFailed(s);}}mstrApp.onerror(s);},makeCurrent:function X(AD){var q=this.nextController,AB=true;if(q){AB=!q.doNotRefresh;q.destroy();}if(!this.supportsFullScreen){this.rootCtrl.exitFullScreen();}var x=this.pid;if(x){mstrApp.setCurrentProjectId(x);}if(AD){if(mstrApp.useBinaryFormat&&mstrApp.getCurrentProjectId()){var AA=this.ctrlType;if(AA){var w=this.model,u=mstrmojo.emptyFn,AC=u,z=this;if(this.checkCache&&AB){AC=function(){setTimeout(function(){z.checkCache(null,null,null,1);},100);};}var s={taskId:"setCurrentView",st:AA,did:this.did||"",mid:(w&&w.dataService&&w.dataService.msgId)||""},t=w&&w.currlaykey;if(t){s.layoutKey=t;}mstrApp.serverRequest(s,{success:AC,failure:u},{silent:true});}}}},makeHome:function M(){this.makeCurrent(true);},jumpTo:function o(q){var s=this.nextController;if(s){s.jumpTo(q);return ;}this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(q.st),q),q);},getPath:function H(){var q=this.nextController;if(q){return q.getPath();}return[];},updateItemProperties:function A(w,s,q,u){var t=this.nextController;if(t){t.updateItemProperties(w,s,q,u);}},onorientationChange:function N(){var s=this.orientation,q=this.view;if(q&&q.hasRendered&&q.rootOrientationChange){q.rootOrientationChange({isLandscape:!s});}var t=this.nextController;if(t){t.set("orientation",s);}},getCurrent:function l(){var q=this.nextController;if(q){return q.getCurrent();}return this;},goBack:function E(){var q=this.nextController;if(q){if(!q.goBack()){if(!this.rootCtrl){return false;}this.makeCurrent(true);}return true;}return false;},goUp:function S(){var q=this.nextController;if(q){return q.goUp();}return false;},getController:function Q(t,u,s){var q=this[(s?"next":"prev")+"Controller"];if(q){if(q[t]===u){return q;}return q.getController(t,u,s);}return null;},newView:function e(q,s){return mstrApp.viewFactory.newView(q,mstrmojo.hash.copy(s,{controller:this}));},getViewKey:function C(q){return{1:"Projects",2:"Home",3:"Subscriptions",4:"Settings",5:"Projects",6:"Help",8:"Subscriptions",768:"Xtab",769:"Graph",774:"Xtab",2048:"Folder",14081:"Document"}[q];},getDefaultMenus:function h(){return F;},generateActionToolbar:function K(){var q=this.rootCtrl||this,s=q.getCurrent();q.setActionToolbar(s.id,s.updateActionToolbar(mstrmojo.android.ui.ActionToolbar.newToolbarConfig()));},updateActionToolbar:function g(s){var t=this.getDefaultMenus(),q=mstrApp.getConfiguration();if(q.isMenuAllowed(Z,t)){s.addMenuItem(Z,mstrmojo.desc(9849,"Learn More"),Z,true,6);}if(q.isMenuAllowed(j,t)){s.addMenuItem(j,mstrmojo.desc(7831,"Settings"),j,true,6);}if(q.isMenuAllowed(J,t)){s.addMenuItem(J,mstrmojo.desc(1143,"Help"),J,false,9);}if(!mstrApp.isTablet()){s.maxBtnCount=(mstrApp.isLandscape())?Math.round(mstrMobileApp.getDeviceDPI()/105)+1:2;}return s;},handleMenuItem:function d(s,q){switch(s){case j:this.spawn(mstrApp.controllerFactory.newController("Settings"));break;case Z:mstrMobileApp.displayLearnMore();break;case J:mstrApp.displayHelp();break;}return false;},beforeViewVisible:mstrmojo.emptyFn,afterViewVisible:function R(){var q=this;window.setTimeout(function(){q.generateActionToolbar();},100);},beforeViewHidden:mstrmojo.emptyFn,afterViewHidden:mstrmojo.emptyFn,handleSpecialLink:function W(t){var s=t.queryKey.evt,q;if(s==="3999"){this.spawn(mstrApp.controllerFactory.newController("Settings",{}),{});}else{if(s==="3124"){mstrApp.goBack();q=true;}else{if(s==="3994"){mstrApp.displayHelp();}else{if(s==="3997"){mstrApp.rootController.jumpTo({act:8});}else{if(s==="3995"){mstrApp.rootController.goHome();q=true;}else{if(s==="3996"){mstrApp.rootController.jumpTo({act:5});q=true;}}}}}}if(q){window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);}},getDepth:function B(){var q=this.prevController;return(q&&(q.getDepth()+1))||1;},onLink:function D(t,u){var w=this.buildLinkParams(u);w.action="linkToObject";var s=false,q=768;switch(parseInt(u.evt,10)){case 4001:if(parseInt(u.reportViewMode,10)===2){q=769;}w.styleName="AndroidMessageResultStyle";break;case 32001:s=true;break;case 2048001:q=14081;break;}w.st=q;this.spawn(mstrApp.controllerFactory.newController(s?"HTMLDoc":this.getViewKey(q),{st:q}),w);},buildLinkParams:function a(s){var t={};I.forEach(s,function(w,AB){var z=f[AB];if(AB==="Project"){var x=mstrApp.getConfiguration(),AD=s.Server,u=s.port||s.Port,AC;if(AD===undefined){var AA=x.getServerByProjectId(mstrApp.getCurrentProjectId());if(AA!==undefined){b(AA.pl,function(AE){if(w===AE.pn){if((u===undefined)||(!!u&&parseInt(u,10)===AE.sp)){AC=AE;return false;}}});}}else{AC=x.getProjectByServerAndProjectName(AD,u,w);}if(AC!==undefined){t[z]=AC.pid;}}else{if(z!==undefined){t[z||AB]=w;}}});if(mstrApp.useBinaryFormat){t.srcMsgId=s.srcMsgId;}var q=s.linkInfo;if(q&&q.so>0){t.selectorMode=q.so;t.originMessageID=s.srcMsgId;if(!s.linkAnswers){t.promptAnswerMode="0";}}return t;},exitFullScreen:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.android.ui._CanBeFullScreen","mstrmojo.android.ui.ActionToolbar","mstrmojo.android.ui.TitleLabel","mstrmojo.android.ui.Image","mstrmojo.hash","mstrmojo.array","mstrmojo.css");var D=mstrmojo.hash,J=mstrmojo.array,L=mstrmojo.css;var F=mstrmojo.android.ui.ActionBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.android.ui._CanBeFullScreen],{scriptClass:"mstrmojo.android.ui.ActionBar",markupString:'<div id="{@id}" class="mstrmojo-ActionBar {@cssClass}" style="{@cssText}" ><div><div class="mstrmojo-ActionBar-logo"></div><div><div class="mstrmojo-ActionBar-contents"></div></div><div class="mstrmojo-ActionBar-toolbar"></div></div></div>',markupSlots:{logoNode:function(){return this.domNode.firstChild.firstChild;},containerNodeWrapper:function(){return this.domNode.firstChild.childNodes[1];},containerNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},toolbarNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},layoutConfig:{h:{logoNode:"56px",containerNodeWrapper:"56px",containerNode:"56px",toolbarNode:"56px"},w:{logoNode:"66px",containerNodeWrapper:"100%",containerNode:"100%",toolbarNode:"auto"}},children:[{scriptClass:"mstrmojo.android.ui.Image",slot:"logoNode",alias:"logo",onactiveChange:function(){L.toggleClass(this.domNode,"active",this.active);},touchTap:function(){mstrApp.closeAllDialogs();if(this.active){var O=this.domNode,N="selected";L.addClass(O,N);this.parent.controller.goUp();window.setTimeout(function(){L.removeClass(O,N);},500);}}},{scriptClass:"mstrmojo.android.ui.TitleLabel",slot:"containerNode",alias:"title",onlistSelectionMade:function(N){this.parent.controller.jumpTo(N.item);}},{scriptClass:"mstrmojo.android.ui.ActionToolbar",slot:"toolbarNode",alias:"toolbar"}],reset:function H(){this.title.reset();this.toolbar.reset();},setUpStatus:function K(N){this.logo.set("active",N);},setNavigation:mstrmojo.emptyFn,clearNavigation:mstrmojo.emptyFn,restoreNavigation:mstrmojo.emptyFn,selectNavigationItem:function E(O){var P=this.getNavList(),N=false;J.forEach(P&&P.items,function(R,Q){if(O.act===R.act){P.singleSelect(Q);N=true;return false;}});return N;},getNavList:mstrmojo.emptyFn,hasNavigationItems:function A(){return this.getNavList().items.length>0;},setLastOpened:function C(N){this.title.setListItems(N);},updateTitle:function I(N){this.title.setText(N);},updateToolbar:function M(O,N){this.toolbar.setActions(O,N);this.title.checkTextFit();},setActionToolbarStatus:function B(N){this.toolbar.set("active",N);},onEnterFullScreen:function G(){this.reset();}});F.adjustLayoutConfig=function(P,N){var O=mstrmojo.DPIManager;D.forEach(F.prototype.layoutConfig.h,function(R,S){O.registerClass(F,"h",S,P);});var Q=D.copy(P);if(N){D.forEach(Q,function(S,R){Q[R]=Math.ceil(S*1.333);});}O.registerClass(F,"w","logoNode",Q);};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileCheckList","mstrmojo._IsAndroidInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.android._IsIncFetchList","mstrmojo.array");var D=50;function F(){return{next:function(H){var I=Math.min(this.blockEnd+D,this.totalSize);H.success(null,this.items.slice(this.blockEnd,I));this.blockEnd=I;},init:function(J,H,I){this.blockBegin=J;this.blockEnd=H;this.totalSize=I.length;this.items=I;}};}mstrmojo.android.inputControls.PullDownDIC=mstrmojo.declare(mstrmojo.ui.MobileCheckList,[mstrmojo._IsAndroidInputControl,mstrmojo.android._HasPreviewButton,mstrmojo.android._IsIncFetchList],{scriptClass:"mstrmojo.android.inputControls.PullDownDIC",multiSelect:false,isElastic:true,supportsIncFetch:false,init:function G(H){this._super(H);this._items=this.getItems();if(this._items.length>D){this.ifDataHelper=F();this.supportsIncFetch=true;}},postselectionChange:function C(I){var H=I.added[0];if(H<this.items.length){this.set("value",this.items[H].v);}},preBuildRendering:function A(){this._super();var J=this.value,K=this.dic.ust||"",I=this._items,H=mstrmojo.array.find(I,"v",J);if(H===-1){I=[{n:K,v:J}].concat(I);H=0;}if(this.supportsIncFetch){this.ifDataHelper.init(0,D,I);I=I.slice(0,D);}this.items=I;this.set("selectedIndex",H);},postBuildRendering:function B(){this._super();this._scroller.scrollTo(0,0);},renderPreview:function E(){var H=mstrmojo.array.find(this._items,"v",this.value),I=(H>=0)?this._items[H].n:(this.dic.ust!==undefined?this.dic.ust:this.dv);this.renderPreviewButton(this.openerNode,this.dicChanged?I:this.dv);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileCheckList","mstrmojo.android._IsIncFetchList","mstrmojo.mstr.WebElements","mstrmojo.array");var D=mstrmojo.array,G=new mstrmojo.mstr.WebElements();function H(M){this.supportsIncFetch=false;delete this.ifDataHelper;if(M){if(M.items.length<M.totalSize){this.ifDataHelper=M;this.supportsIncFetch=true;}}}function C(){var M=this.height;if(!this.elasticHeight&&M){this.elasticHeight=parseInt(M,10);}}mstrmojo.android.ui.ElementsPicker=mstrmojo.declare(mstrmojo.ui.MobileCheckList,[mstrmojo.android._IsIncFetchList],{scriptClass:"mstrmojo.android.ui.ElementsPicker",browseElements:null,viewAll:true,glow:true,onbrowseElementsChange:function A(){H.call(this);this._ignoreSelection=true;var M=this.browseElements;if(M){var O=M.items=(M.items||[]),N=this._searchConfig;if((!N||N.exit)&&!this.viewAll){O=this.getSelectedItems();}this.set("items",O);if(N){this.glow=false;this.selectItems(N.selected,true);this.glow=true;}H.call(this,M);}else{this.set("items",[]);}this.updateScroller();this._ignoreSelection=false;},syncSelection:function F(){var M=this._searchConfig;if(M){this.selectItems(M.selected,false);}},enterSearchMode:function E(){var M=this.getSelectedItems();this._searchConfig={elements:this.browseElements,selected:M,clone:[].concat(M)};C.call(this);this.set("browseElements",G);},search:function L(M){this.set("browseElements",M);},exitSearchMode:function K(N){var M=this._searchConfig;M.exit=true;this.set("browseElements",N?M.elements:{items:M.selected});delete this._searchConfig;},clearSearch:function J(){var M=this._searchConfig;M.selected=[].concat(M.clone);this.set("browseElements",G);},postselectionChange:function B(N){var M=this._searchConfig;if(!M||this._ignoreSelection){return ;}var Q=M.selected,O=this.items,P=N.added;if(this.multiSelect){D.forEach(P,function(R){Q.push(O[R]);});D.forEach(N.removed,function(R){D.removeItems(Q,"v",[O[R]]);});}else{if(P){Q.splice(0);Q.push(O[P[0]]);}}},onviewAllChange:function I(){var N=this.getSelectedItems(),M;if(this.viewAll){M=this.browseElements;N=M.items;}else{C.call(this);}this.glow=false;var O=this.getSelectedItems();this.set("items",N);this.selectItems(O,true);this.glow=true;H.call(this,M);this.updateScroller();}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo.ui.MobileCheckList","mstrmojo.array");var A='<div class="mstrmojo-SelectBoxList-item" idx="{@idx}"><h2>{@n}</h2><h4>{@v}</h4></div>';mstrmojo.android.ui.SelectBoxList=mstrmojo.declare(mstrmojo.android.SimpleList,null,{scriptClass:"mstrmojo.android.ui.SelectBoxList",selectionPolicy:"reselect",getItemMarkup:function(){return A;},getItemProps:function B(F,D){var E=this._super(F,D);E.v=F.v;return E;},postselectionChange:function C(E){var G=E.added;if(!G){return ;}var D=G[0],H=this.items[D],F=H.items,I=this.id;mstrApp.showDialog({title:H.n,children:[{scriptClass:"mstrmojo.ui.MobileCheckList",items:F,multiSelect:false,isElastic:true,selectedIndex:mstrmojo.array.find(F,"on",true),postselectionChange:function(J){mstrApp.closeDialog();mstrmojo.all[I].selectListChange(D,F[J.added[0]]);}}]});},selectListChange:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileCheckList","mstrmojo.css");var B=mstrmojo.css,C="selected";function E(){var G=this.getSelectedItems().length,I=this.items.length,H="btnCheckSemi";if(G===0){H="btnCheckNone";}else{if(G===I){H="btnCheckFull";}}this.parent.updateTitleBarButtonClass(H);}mstrmojo.ui.MobileReviewList=mstrmojo.declare(mstrmojo.ui.MobileCheckList,null,{scriptClass:"mstrmojo.ui.MobileReviewList",listHooks:{select:function(H,I,G){mstrmojo.ui.MobileCheckList.prototype.listHooks.select(H,I,G);if(this.parent.selectionHidden){this.selectedIndices={};return true;}E.call(this);},unselect:function(H,I,G){mstrmojo.ui.MobileCheckList.prototype.listHooks.unselect(H,I,G);E.call(this);return this.selectionHidden;}},init:function F(G){this._super(G);if(this.multiSelect){B.addWidgetCssClass(this,"hidden");}},selectAll:function D(){var G="addClass",J=this.domNode.childNodes[0],I=J.childElementCount,H=0,K=true;if(this.getSelectedItems().length>0){G=("removeClass");this.selectedIndices={};K=false;}for(H=0;H<I;H++){B[G](J.childNodes[H],C);if(K){this.selectedIndices[H]=true;}}E.call(this);},touchSelectBegin:function A(G){if(this.parent.selectionHidden){this.parent.setDeleteActions("delete");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasScrollbox","mstrmojo.AndroidXtabZone","mstrmojo._ShowsStatus","mstrmojo.boxmodel","mstrmojo.dom");var R=1;var Y=2;var Z=0;var A=1;var AD=2;var N=3;var M=1;var AF=2;var H=4;var h=8;var e=mstrmojo.dom,w;function AJ(AK){var AL=null;if(AK&&AK.length>1){AL=new mstrmojo.XtabVACP();AL.cps=AK;}return AL;}function Q(AL){var AK=document.createElement("img");AL.appendChild(AK);AL.removeChild(AK);}function J(AL,AK){if(e.isIE){return mstrmojo.boxmodel.convert2px(AL,AK);}return AK;}function I(AL){if(!AL||this._onDemandCP){return ;}var AS=AL.bc,AQ=AL.tc,AM=AQ-AS,AR=Math.ceil(AM/AS),AN=[],AP=[],AO;for(AO=0;AO<AR;++AO){var AK=Math.min(AM,AS);AN.push(this.createOnDemandCP(AO+1,AK,H));AP.push(this.createOnDemandCP(AO+1,AK,h));AM-=AS;}this._onDemandCP={rhs:AN,vls:AP};return this._onDemandCP;}mstrmojo.AndroidXtabBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasScrollbox,mstrmojo._ShowsStatus],{scriptClass:"mstrmojo.AndroidXtabBase",dataRenderMode:"vscroll",handleClicks:function G(){return true;},markupString:'<div id="{@id}" class="mstrmojo-Xtab {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div style="display: none;{@msgNodeCssText}"><div>&nbsp;</div></div><div class="mstrmojo-Xtab-overlay"></div><div class="mstrmojo-Xtab-content {@cssDefault}" title="{@tooltip}" style="{@viewportCssText}" mstrAttach:click,selectstart><table cellspacing="0" cellpadding="0"><tr trType="title"><td style="vertical-align:top;padding:0px"></td><td class="xtab-tr" style="vertical-align:top;padding:0px;"></td></tr><tr trType="content"><td class="xtab-bl" style="vertical-align:top;padding:0px;"></td><td class="xtab-br" style="vertical-align:top;padding:0px"><div class="mstrmojo-progress" style="display:none"><div class="mstrmojo-progress-barbg"><div class="mstrmojo-progress-bar"></div></div><div class="mstrmojo-progress-text"></div></div><div id="{@id}_scrollbox" style="position:relative;{@scrollboxNodeCssText};{@scrollboxNodeOverflow}"></div></td></tr></table></div></div>',markupSlots:{overlayNode:function(){return this.domNode;},msgNode:function(){return this.domNode.firstChild;},maskNode:function(){return this.domNode.childNodes[1];},viewport:function(){return this.domNode.lastChild;},contentNode:function(){return this.domNode.lastChild.firstChild;},scrollboxNode:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].lastChild;},_TL:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0];},_TR:function(){return this.domNode.lastChild.firstChild.rows[0].cells[1];},_BL:function(){return this.domNode.lastChild.firstChild.rows[1].cells[0];},_BR:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].lastChild;},_T_ROW:function(){return this.domNode.lastChild.firstChild.rows[0];},_B_ROW:function(){return this.domNode.lastChild.firstChild.rows[1];},_BR_CELL:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1];},_STATUS:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild;},_STATUS_TXT:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild.lastChild;},_STATUS_BAR:function(){return this.domNode.lastChild.firstChild.rows[1].cells[1].firstChild.firstChild.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";}},zones:null,lockHeadersCase:N,interactiveCellsArray:null,titlesCP:null,chsCP:null,rhsCP:null,valuesCP:null,onDemandIF:true,numRowFixed:false,heightLimit:0,height:0,widthLimit:0,width:0,useTouchScrolling:false,scrollInterval:0,selections:null,dataBlocks:null,getCellUnitIndex:function s(AK){return(AK.o!==undefined)?AK.o:AK._ei;},getCellTitleId:function f(AK){var AL="";if(AK.axis&&AK.ui!==undefined){AL=AK.axis+"A"+(AK.ui+1);}else{if(AK.mix!==undefined){AL="0A"+AK.mix;}}return AL;},update:function p(AL){if(this._super){this._super(AL);}this.set("gridData",AL.data[0]||AL.data);var AK=this.defn||AL.defn;this.sid=this.gridData.sid;this.treeType=(AK&&AK.tt)||1;this.interactiveCellsArray=[];},initCP:function D(AM,AL,AR,AO,AQ,AN,AP){var AK={gridData:AM,type:AR,interactiveCellsArray:AL};AK.base=AO||AK.base;AK.lookupBase=AQ||AK.lookupBase;AK.axis=AN||AK.axis;if(!AP){if(AR===M){AP=new mstrmojo.XtabTitlesCP(AK);}else{AP=new mstrmojo.XtabCP(AK);}}else{mstrmojo.hash.copy(AK,AP);}return AP;},preBuildRendering:function B(){var AK=this.gridData;this.lockHeadersCase=parseInt(AK.lhv,10);this.selections={};this.cssDefault=(this.lockHeadersCase===Z||!this.k)?"":"r-cssDefault"+(this.k?"_"+this.k:"");this.numRowFixed=!!(!this.height&&AK.rw&&AK.rw.row&&(AK.rw.row.bc<AK.rw.row.tc));this.rw=AK.rw;this._onDemandCP=null;if(this.width){this.widthLimit=parseInt(this.width,10);}if(this.height){this.heightLimit=parseInt(this.height,10);}return(this._super)?this._super():true;},renderEmptyGrid:function x(){var AM=this.gridData,AL=this.msgNode,AK=this.viewport;AL.firstChild.innerHTML=AM.eg;AL.style.display="block";AL.style.overflow="hidden";AL.className="mstrmojo-message";AK.style.display="none";return(this._super)?this._super():true;},postBuildRendering:function t(){var AS=this.gridData,AO=!!this._BR&&AS,AK=this.msgNode,AP=this.viewport,AQ;if(AS.eg===""){return ;}else{if(AS.eg){this.renderEmptyGrid();return ;}else{if(AK.style.display==="block"){AK.style.display="none";AP.style.display="block";}}}if(!this.interactiveCellsArray){this.interactiveCellsArray=[];}if(AO){this._setupZones(AS);this._setupCPs(AS);var AN=this.zones,AL;for(AL in AN){var AR=AN[AL];if(AR.parent!==this){this.addChildren(this.zones[AL]);}}if(this.scrollboxNode){var AM=this.heightLimit;this.scrollboxHeightFixed=!isNaN(AM)&&(AM>0);if(this.scrollboxHeightFixed){this.scrollboxHeight=AM;}this.scrollboxLeft=this.scrollboxTop=0;if(this.lockHeadersCase){this.connectScrollbox(this);}}}this.renderChildren();AQ=this._super();if(this.numRowFixed){if(!this.height){this.heightLimit=this.zones._BR.getPageHeight(0)+(this._TR?this._TR.offsetHeight:0);this.height=this.heightLimit+"px";}else{this.heightLimit=parseInt(this.height,10);}}if((this.lockHeadersCase&&AO&&this.scrollboxNode)||this.numRowFixed){this.resizeScrollBox(e.isIE);}this.onGridWidthChanged(true);if(e.isIE7&&!this.scrollboxHeightFixed&&this.scrollboxNode&&this.scrollboxNode.scrollWidth>this.scrollboxNode.offsetWidth){this.scrollboxNode.style.height=this.scrollboxNode.offsetHeight+17+"px";}return AQ;},onclick:function u(AP,AK){if(!this.interactiveCellsArray.length){return ;}AP=AP.e||AP;var AM=mstrmojo.dom,AO=AM.eventTarget(AK,AP),AN=AO&&AM.findAncestorByName(AO,"td",true,this.viewport);if(AN){var AL=AM.findAncestorByName(AO,"span",true,AN);if(AL&&!AM.shiftKey(AK,AP)&&!AM.ctrlKey(AK,AP)){this.defaultAction(AN);}else{this.doSelection(AP,AK,AN);AM.clearBrowserHighlights();}}},ontouchend:function j(AL,AK){this.onclick(AL,AK);},onselectstart:function z(){return false;},onscroll:function AA(){this._alignHeaders();},resizeScrollBox:function K(AM){var AK=this.scrollboxNode,AV=AK&&AK.style,Ab=this._B_ROW,Aa=this._BR_CELL;if(!AV||!Ab||!Aa){return ;}var AU=this.widthLimit,AT=this.heightLimit;if(!AU||!AT){if(!AU){AV.width="auto";}if(!AT){AV.height="auto";this.scrollboxHeightFixed=false;}}if(AT){var AS=(this.zones._TR&&this.zones._TR.cp.rc)?Ab.offsetTop:0,AX=AT-AS;if(AX>0){AV.height=AX+"px";this.scrollboxHeight=AX;this.scrollboxHeightFixed=true;if((this.lockHeadersCase!==Z)&&this.numRowFixed){this.viewport.style.height=this.overlayNode.style.height=(AX+AS)+"px";}}}if(!this.useTouchScrolling){var AL=(this.zones._BL&&this.zones._BL.cp.rc)?Aa.offsetLeft:0;var AZ=0;if(this.lockHeadersCase!==Z){var AY=this.viewport,AN=mstrmojo.css.getComputedStyle(AY),AW=["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"];if(AN){mstrmojo.array.forEach(AW,function(Ac){AZ+=parseFloat(J(AY,AN[Ac]));});}if(this.width){this.viewport.style.width=(parseFloat(this.width)-(AZ||0))+"px";}}var AO=(this.widthLimit&&(this.widthLimit-AL))||(mstrmojo.dom.isIE7?Aa.scrollWidth+1:(Aa.scrollWidth+(AK.offsetWidth-AK.clientWidth)));if(AO&&(AO>0)){AO-=AZ;AV.width=AO+"px";}this._alignHeaders(AM);}var AR=AV.height,AQ=AV.width;if(AR||AQ){var AP=mstrmojo.findAncestor(this,"fixedSizeCanGrowShrink",null,mstrmojo.DocSection);if(AP){AP.fixedSizeCanGrowShrink(this,AR,AQ);}}},_resizeScrollBoxWidth:function W(){var AP=this.scrollboxNode,AM=AP&&AP.style,AL=this._B_ROW,AK=this._BR_CELL;if(this.useTouchScrolling||!AM||!AL||!AK){return ;}var AN=this.widthLimit;if(!AN){AM.width="auto";}var AO=function(){var AQ=(mstrmojo.dom.isIE7?AK.scrollWidth+1:(AK.scrollWidth+(AP.offsetWidth-AP.clientWidth)));if((AQ&&(AQ>0))&&(!AN||(AN&&(AQ<AN)))&&(AP.firstChild.firstChild.offsetWidth>=AP.clientWidth)){AM.width=AQ+"px";}};if(mstrmojo.dom.isIE7){window.setTimeout(function(){AO();},1);}else{AO();}},onGridWidthChanged:function b(AM){if(this.lockHeadersCase===Z&&!AM){this._resizeScrollBoxWidth();}var AL=mstrmojo.findAncestor(this,"fixedSizeCanGrowShrink",null,mstrmojo.DocSection),AK=this.widthLimit;if(!AK){this.width=w;if(AL){AL.performCanGrowCanShrink([this],true);}}else{if(AL){AL.fixedSizeCanGrowShrink(this,null,AK);}}},getGridDimension:function S(AN){var AL=1,AM=AN===AL?"Height":"Width",AO=AM.toLowerCase(),AK=this[AO+"Limit"];if(!AK&&(this[AO]===w||this[AO]===0)){AK=this.viewport["offset"+AM];this[AO]=AK+"px";return AK;}return AK||parseInt(this[AO],10);},_alignHeaders:function q(AL){if(this.lockHeadersCase===Z||this.useTouchScrolling){return ;}var AO=this.scrollboxLeft,AN=this.scrollboxTop,AM=this.zones,AK=AM._TR,AP=AM._BL;function AQ(AR,AV,AS){var AU=AR&&AR.domNode,AT=AU&&AU.style;if(!AT){return ;}AT[AV]=-AS+"px";}if(AK&&AK.rc){AQ(AK,"left",AO);}if(AP&&AP.rc){AQ(AP,"top",AN);}if(AL){Q(this._BL);}},defaultAction:function U(AO,AL){var AK=AL||this.getCellForNode(AO),AN=AO&&AO.className.indexOf("sc_")>0;if(this.model&&this.model.data&&this.model.data.visName&&this.model.data.visName==="InteractiveGridAjaxVisualizationStyle"){AN=this.isReselectedTD(AK);if(AN&&this.hasSelectAll&&this.hasSelectAll(AK)){this.IGCurrentSelectedCell=null;}else{this.IGCurrentSelectedCell=AK;}}var AM=this.model.getAction(this.getActionCells(AK),AO,AN);this._currentSelectedTD=AO;this.handleAction(AM,AK);},handleAction:function F(AM,AK){var AL=AM&&AM.h;if(AL&&this.controller[AL]){this.controller[AL](this,AM.a);return true;}return false;},createZone:function o(AK){return new mstrmojo.AndroidXtabZone(AK||{});},_setupZones:function l(AN){var AL=this.zones;this.zones={};var AP=this.zones,AK=this.lockHeadersCase,AR="z-index:";var AM=this;function AQ(AV,AU,AW,AT){var AS=(AT&&AT[AW])||AM.createZone({renderMode:AV,cssText:AU,slot:AW});AP[AW]=AS;AS.rh=AN.rh;}AQ(this.dataRenderMode,AR+"1;","_BR",AL);if(AK&A){AQ(this.dataRenderMode,AR+"3;","_BL",AL);}if(AK&AD){AQ(null,AR+"3;","_TR",AL);}if(AK===N){AQ(null,AR+"4;","_TL",AL);}if(AK===Z){this.zones._BR.autoFitWindow=!!AN.afw;this.zones._BR.tableCssClass="r-cssDefault"+(this.k?"_"+this.k:"");}if(mstrmojo.dom.isIE7){if(AK&A||AK&AD||AK===N){this._T_ROW.style.display="block";}else{if(AK===Z){this._T_ROW.style.display="none";}}}var AO=AP._BL||AP._BR;if(AO){AO.numColumnCanMerge=AN.gts.cws.length-1;}},getHACP:function AI(){return(this._super&&this._super())||new mstrmojo.XtabHACP();},_setupCPs:function X(AS){var AN=this.titlesCP=this.getTitleCP(AS),AP=this.chsCP=this.getColumnHeadersCP(AS),AL=this.rhsCP=this.getRowHeadersCP(AS),AM=this.valuesCP=this.getValuesCP(AS);AN.forceAutoRowHeight=AP.forceAutoRowHeight=AS.rh;var AQ=this.zones;switch(this.lockHeadersCase){case Z:var AW=new mstrmojo.XtabVACP();var AK=this.getHACP();AK.cps=[AN,AP];AW.cps=[AK];var AU=this.getHACP();AU.cps=[AL,AM];AW.cps.push(AU);AQ._BR.cp=AW;break;case A:var AT=new mstrmojo.XtabVACP();var AO=new mstrmojo.XtabVACP();AT.cps=[AN,AL];AO.cps=[AP,AM];AQ._BL.cp=AT;AQ._BR.cp=AO;break;case AD:var AR=this.getHACP();var AV=this.getHACP();AR.cps=[AN,AP];AV.cps=[AL,AM];AQ._TR.cp=AR;AQ._BR.cp=AV;break;case N:AQ._TL.cp=AN;AQ._TR.cp=AP;AQ._BL.cp=AL;AQ._BR.cp=AM;break;}},ongridDataChange:function a(){var AK=this.model;if(AK){AK.set("data",this.gridData);if(!this.dataBlocks){this.dataBlocks=[];}this.dataBlocks[0]=this.gridData;}},gridPagesRendered:mstrmojo.emptyFn,getTitleCP:function E(AK){return this.initCP(AK,this.interactiveCellsArray,M);},getColumnHeadersCP:function AE(AK){return this.initCP(AK,this.interactiveCellsArray,AF,AK.ghs.chs,AK.gts.col,Y);},getRowHeadersCP:function AG(AK){var AL=this.initCP(AK,this.interactiveCellsArray,H,AK.ghs.rhs,AK.gts.row,R);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){I.call(this,this.rw&&this.rw.row);}this.rhsCPList=[AL].concat(this._onDemandCP.rhs);return AJ(this.rhsCPList)||AL;}return AL;},getValuesCP:function d(AL){var AK=this.initCP(AL,this.interactiveCellsArray,h,AL.gvs);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){I.call(this,this.rw&&this.rw.row);}this.valuesCPList=[AK].concat(this._onDemandCP.vls);return AJ(this.valuesCPList)||AK;}return AK;},createOnDemandCP:function g(AL,AM,AK){var AN=new mstrmojo.XtabOnDemandCP();AN.dataSource=this;AN.blockNum=AL;AN.rc=AM;return AN;},dataDownloaded:function V(AM,AQ){var AS=AQ.blockNum,AK=this.rhsCPList[AS],AO=this.valuesCPList[AS],AR=AM.data;AR._bidx=AS;this.dataBlocks[AS]=AR;if(!AK||!AO){return ;}this.initCP(AR,this.interactiveCellsArray,H,AR.ghs.rhs,AR.gts.row,R,AK);this.initCP(AR,this.interactiveCellsArray,h,AR.gvs,null,null,AO);AK.initContent();AO.initContent();this.numRowsDownloaded+=parseInt(AK.rc,10);var AN=window.getLocaleString?window.getLocaleString("RETRIEVING_DATA","Retrieving Data ..."):mstrmojo.desc(8301,"Retrieving Data ...");this.updateStatus(AN,this.numRowsDownloaded*100/this.numRowsToDownload);var AP=this.zones,AL=AP&&AP._BL,AT=AP&&AP._BR;if(AL){AL.dataDownloaded();}if(AT){AT.dataDownloaded();}},showDownloadStatus:function P(AK){if(!AK){return ;}if(this.showingStatus){this.numRowsToDownload+=AK;}else{this.numRowsToDownload=AK;this.numRowsDownloaded=0;}if(this.showStatus){var AL=window.getLocaleString?window.getLocaleString("RETRIEVING_DATA","Retrieving Data ..."):mstrmojo.desc(8301,"Retrieving Data ...");this.showStatus(true,AL,this.numRowsDownloaded*100/this.numRowsToDownload);}},closeDownloadStatus:function k(){this.numRowsToDownload=0;if(this.showStatus){this.showStatus(false);}},download:function L(AM){var AO=this.gridData.rw,AL=AO.row,AN=AO.col,AK=AL.bc;this.rhsCPList[AM].isDownloading=this.valuesCPList[AM].isDownloading=true;if(AK){this.controller.onDownloadGridData(this,this.model.getDownloadAction(AM*AK+1,AK,AN.bb,AN.bc,this.id,{blockNum:AM}));}},unrender:function C(AK){this.width=this.widthLimit=this.height=this.heightLimit=0;this.disconnectScrollbox(this);this._super(AK);},getCellForNode:function AC(AM){var AK=AM&&AM.getAttribute("ei");if(isNaN(AK)){return null;}var AL=this.interactiveCellsArray[parseInt(AK,10)];return AL;},getActionCells:function O(AK){var AL=[],AN=this.selections;var AO=AK.axis+"A"+(AK.ui+1),AP=AN[AO],AM;if(AP&&AP[AK.o]){for(AM in AP){var AQ=this.getCellForNode(AP[AM][0]);AL.push(AQ);}}else{AL.push(AK);}return AL;},setModel:function AH(AK){this.model=AK;if(AK.data){this.set("gridData",AK.data);}},destroy:function AB(){var AK=this.model;if(AK&&AK.destroy){AK.destroy();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebConstantPrompt","mstrmojo.prompt.WebGeoConstantPrompt","mstrmojo.prompt.WebElementsPrompt","mstrmojo.prompt.WebUnsupportedPrompt","mstrmojo.XMLBuilder");mstrmojo.prompt.WebPrompts=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.prompt.WebPrompts",lcl:1033,host:null,mergeGeoPrompts:true,init:function I(K){var L=K.rsl;delete K.rsl;this._super(K);this.populate(L);},get:function(K){var L=this.prompts;if(L&&K<L.length){return L[K];}alert("index is out of boundary.");},size:function J(){var K=this.prompts;return(K&&K.length)||0;},isEmpty:function E(){return !this.prompts||!!this.prompts.length;},validate:function G(){var L=this.prompts,K;for(K=0;K<L.length;K++){L[K].validate();}return true;},populate:function F(N){var K=N&&N.prompts,R=mstrmojo.prompt.PromptTypes,Q=this.mergeGeoPrompts,P;this.lcl=(N&&N.lcl)||this.lcl;this.prompts=[];if(K){var M;for(M=0;M<K.length;M++){var O=K[M],L;switch(O.ptp){case R.CONSTANT_PROMPT:L=new mstrmojo.prompt.WebConstantPrompt();L.populate(O);if(Q&&L.prs&&L.prs.DisplayStyle==="GeoLocation"){if(!P){P=new mstrmojo.prompt.WebGeoConstantPrompt();P.title="Current Location";P.add(L);L=P;}else{P.add(L);continue;}}break;case R.ELEMENTS_PROMPT:L=new mstrmojo.prompt.WebElementsPrompt();L.populate(O);break;default:L=new mstrmojo.prompt.WebUnsupportedPrompt();L.populate(O);}this.prompts.push(L);}}},populateAnswers:function A(M){var K=this.prompts,L;for(L=0;L<M.length;L++){K[L].populateAnswer(M[L]);}},buildAnswerObject:function B(){var K=[],L;for(L=0;L<this.size();L++){var M=this.prompts[L];K.push(M.buildAnswerObject());}return K;},prepareAnswer:function(L){var M=this.prompts,K=function(Q,O,P){var N=Q.length;Q[O].prepareAnswer({success:function(){if(O<N-1){K(Q,O+1,P);}else{if(P&&P.success){P.success();}}},failure:function(){if(P&&P.failure){P.failure();}}});};if(M&&M.length>0){K(this.prompts,0,L);}},getAnswerXML:function C(){var K=new mstrmojo.XMLBuilder();this.buildShortAnswerXML(K);return K.toString();},buildShortAnswerXML:function H(K){K=K||new mstrmojo.XMLBuilder();K.addChild("rsl");K.addAttribute("lcl",this.lcl);var L;for(L=0;L<this.size();L++){var M=this.prompts[L];M.buildShortPa(K);}K.closeElement();},hasSupported:function D(){var K;for(K=0;K<this.size();K++){var L=this.prompts[K];if(L.supported()){return true;}}return false;}});mstrmojo.prompt.PromptTypes={CONSTANT_PROMPT:1,CONSTANT_GEO_PROMPT:1.5,ELEMENTS_PROMPT:2,OBJECT_PROMPT:4};mstrmojo.Enum={};mstrmojo.Enum.Validation={};mstrmojo.Enum.Validation.STATUSCODE={VALID:0,INVALID_DATATYPE:1,EXCEEDS_MIN_VALUE:2,EXCEEDS_MAX_VALUE:3,EXCEEDS_MIN_LENGTH:4,EXCEEDS_MAX_LENGTH:5,EXCEEDS_MIN_COUNT:6,EXCEEDS_MAX_COUNT:7,INVALID_ANSWERS:8,NO_INPUT:9,NO_PERSONAL_ANSWER_NAME:10,INCOMPLETE_CONDITION:11,TRUNCATED:12,INCOMPLETE_CONDITION_ON_AUTO_NODE:13,INVALID_PERSONAL_ANSWER_NAME:14,DUPLICATED:15,INVALID:999};}());(function(){mstrmojo.requiresCls("mstrmojo.prompt.WebPrompts");var D="mstrmojo._ResultSetXt",G=0,Q=1,F=2,N=3,H=4;var V=["promptsAnswerXML","elementsPromptAnswers","valuePromptAnswers","objectsPromptAnswers"];function A(Y){if(Y.linkAnswers){return true;}var W=V.length,X;for(X=0;X<W;X++){if(Y[V[X]]){return true;}}return false;}function C(W){if((!W)||(W.status===undefined)||(isNaN(W.status))){return G;}switch(parseInt(W.status,10)){case 0:case 1:return Q;case 2:return N;case 3:return F;default:return H;}}function L(a,W,e){var Y=e.success;delete e.success;var d=mstrApp,b=!!a.useRefreshProgress,Z=b?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:[],X;delete a.useRefreshProgress;e.success=function(f,g){switch(C(f)){case Q:case N:case G:Y(f,g);break;case F:e.failure(f);break;case H:var h;e.success=function(k,l){var j=C(k);switch(j){case Q:case N:Y(k,l);break;case G:case H:X();break;default:k.message="Error checking the status of running report/document.";e.failure(k);break;}};X=function(){d.serverRequest({taskId:"pollStatus",msgID:f.id},e,{src:D+"::pollForResult"});};X();break;}};d.serverRequest(a,e,{src:D+"::pollForResult",showProgress:W,hideProgress:!W,hideWait:!W,useRefreshProgress:b,progressStateText:Z});}function I(Y,a,W,Z){var X=this;L.call(this,Y,W,{success:function(b){X.msgId=b.id;if(b.visName){X.visName=b.visName;}var d=C(b);if(d===N){if(a.prompts){X.loadPrompts({success:a.prompts,failure:a.failure});}else{a.failure({message:"Wrong status. Received Prompts while expected Result."});}}else{if(a.execSuccess){a.execSuccess(b);}if(Z&&Z.statusOnly){a.success(b);}else{if(X.visName&&X.visName!==""){if(!Z){Z={};}Z.colsPerPage=-1;Z.rowsPerPage=-1;}X.getResults(Z,{success:a.success,failure:a.failure,complete:a.complete||mstrmojo.emptyFn,canceled:a.canceled||mstrmojo.emptyFn});}}},failure:a.failure,complete:a.complete||mstrmojo.emptyFn,canceled:a.canceled||mstrmojo.emptyFn});}function B(X,Y){var W=mstrApp.modelFactory;if(W){return W.newPromptsModel(X,Y);}return mstrApp.viewFactory.newPrompts(X,Y);}mstrmojo._ResultSetXt=mstrmojo.provide("mstrmojo._ResultSetXt",{_mixinName:"mstrmojo._ResultSetXt",msgId:null,execute:function J(Y,a,Z){if(Y.link){Y.linkAnswers=Y.link.toXml();delete Y.link;}var X=this,W=mstrmojo.func.addMethods(a,{prompts:function(b){X.prompts=b;a.prompts(b);},success:function(b){if(b.prompt){X.prompts=b.prompt;}a.success(b);}});if(!X.prompts&&A(Y)){W.success=function(b,d){delete d.config.hideWait;delete d.config.hideProgress;X.loadPrompts({success:function(e){if(e.prompts){X.prompts=e;X.answers=B(e).buildAnswerObject();}a.success(b,d);},failure:a.failure,complete:a.complete||mstrmojo.emptyFn},{includeClosed:true});};}else{if(Y.promptsAnswerXML){W.success=function(b,d){X.prompts=null;X.answers=null;X.loadPrompts({success:function(e){if(e.prompts){X.prompts=e;X.answers=B(e).buildAnswerObject();}a.success(b,d);},failure:mstrmojo.emptyFn});};}}I.call(this,Y,W,true,Z);},answerPrompts:function P(W,Z,Y){if(mstrApp.useBinaryFormat){Y.objectType=55;}Y.taskId="answerPrompts";Y.msgID=Y.msgId||this.msgId;Y.promptAnswerXML=W.getAnswerXML();var X=this;I.call(this,Y,{success:function(a){X.answers=W.buildAnswerObject();Z.success(a);},prompts:Z.prompts,failure:Z.failure},true);},getResults:function R(W,X){W.messageID=W.msgId||this.msgId;L.apply(this,[W,false,X]);},loadPrompts:function O(X,W){W.taskId="getPrompts";W.msgID=W.msgID||this.msgId;L.apply(this,[W,false,X]);},linkToObject:function K(W,X){this.execute(W,X);},getPrompts:function E(){var W=this.prompts;if(W){return B(this.prompts,this.answers);}return undefined;},checkCache:function U(Y,Z,X){var W=mstrmojo.hash.copy(X,{src:D+"::checkCache",override:false,silent:true});Y.taskId="checkCache";mstrApp.serverRequest(Y,Z,W);},checkCachedLinkTargets:function S(W,Y){var X={taskId:"checkCachedLinkTargets",items:W};mstrApp.serverRequest(X,Y,{src:D+"::checkCachedLinkTargets",override:false,silent:true});},urlLinkParams:function M(){return V;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.SelectBoxList","mstrmojo.array","mstrmojo.android.nativedialog.TwoLevelPageByDialog","mstrmojo.android.nativedialog.ListDialog","mstrmojo.hash");mstrmojo.android.controllers._HasSelectBoxDialog=mstrmojo.provide("mstrmojo.android.controllers._HasSelectBoxDialog",{_mixinName:"mstrmojo.android.controllers._HasSelectBoxDialog",showSelectBoxDialog:function A(D,G,E){E.children=[{scriptClass:"mstrmojo.android.ui.SelectBoxList",isElastic:true,items:D,selectListChange:function(I,J){if(!G.call(this,I,J)){mstrApp.closeDialog();}}}];if(D.length===1){var B=E.children[0];var F=D[0];var C=F.items;E.title=F.n;B.scriptClass="mstrmojo.ui.MobileCheckList";B.items=C;B.multiSelect=false;B.selectedIndex=mstrmojo.array.find(C,"on",true);B.postselectionChange=function(I){this.selectListChange(0,C[I.added[0]]);};}if(mstrApp.useBinaryFormat){var H=(D.length>1);mstrmojo.hash.copy({isNative:true,scriptClass:H?"mstrmojo.android.nativedialog.TwoLevelPageByDialog":"mstrmojo.android.nativedialog.ListDialog",onSelectionChange:function(J,I){if(I===undefined){G.call(this,0,this.getItem(J));this.close();}else{G.call(this,J,this.getItem(J,I));}}},E);}mstrApp.showDialog(E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.ui.ActionToolbar","mstrmojo.android.EnumMenuOptions","mstrmojo.android.ui.PropertiesView","mstrmojo.hash","mstrmojo.array","mstrmojo.string");mstrmojo.requiresDescs(1142,8623,8429,8430,8624,8625,9099,11191);var L=mstrmojo.hash,g=mstrmojo.array.forEach,K=mstrmojo.dom,O=768,e=mstrmojo.android.EnumMenuOptions,AA=e.FULL_SCREEN,AD=e.SHARE,C=e.ANNOTATION,F=3,I=50;function s(){var AF=this._oldPID;if(AF){mstrApp.setCurrentProjectId(AF);}}function D(AJ,AK,AH,AI){var AG=this.model,AF=AG.prompts;if(AF){AJ.promptsAnswerXML=AF.getAnswerXML();}AJ.useRefreshProgress=AI;mstrApp.closeAllDialogs();AG.execute(AJ,AK,AH);}function R(AJ,AI){var AG=this.model,AF=AG.prompts,AH={fresh:false,useRefreshProgress:mstrApp.isTablet(),isAutoRefresh:AI||false};if(AF){AH.promptsAnswerXML=AF.getAnswerXML();}mstrApp.closeAllDialogs();this.refresh(AH,AJ);}function V(){var AF=this._startParams,AH=AF.action,AG;if(!AH||(AH!=="drillGrid"&&AH!=="drill2Grid")){AG=AF;}this.rootCtrl.updateLastOpened(AG);}function AB(AG,AK){AK=AK||{};var AF=this.view=this.createView(AG,L.copy(AK)),AJ=AG.n||AK.ttl||"",AH=this;AF.slot="containerNode";var AI=this.frame=this.newView("ResultSet",{controller:this});AI.addChildren([AF]);this.rootCtrl.updateContent(AI,AJ);this.ttl=this._startParams.n=AJ;this.desc=AG.dsc;V.call(this);window.setTimeout(function(){AH.checkCache(AG,AK);},100);}function M(){if(this.isFullScreen){this.cancelFlashFullScreen();}var AF=this.frame.getPosition(),AG=K.windowDim();AF.ww=AG.w;AF.wh=AG.h;return JSON.stringify(AF);}mstrmojo.android.controllers.ResultSetController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.ResultSetController",supportsFullScreen:true,start:function U(AH){this._super(AH);this._startParams=L.copy(AH);var AN=this,AJ=AH.projectID,AP=AN.prevController,AF=function(AQ){s.call(AN);AN.viewFailed(AQ);},AK=function(AQ){$MAPF(AQ,"ResultSetController","start");},AO=function(){if(AP&&AP.docRequestComplete){AP.docRequestComplete();}};var AL=this.ctrlType=AH.st;AK(true);if(AJ){this._oldPID=mstrApp.getCurrentProjectId();mstrApp.setCurrentProjectId(AJ);this.pid=AJ;}try{var AG=AH.action||"execute";delete AH.action;var AI=this.model=this.initModel();if(AL){AI.st=AL;AI.n=AH.n;}this.did=this.did||AH.documentID||AH.reportID||AH.objectID;AI[AG](AH,{success:function(AQ){try{AB.call(AN,AQ,AH);}catch(AR){AF(AR);}},prompts:function(){AN.openPrompts(AH);},failure:function(AQ){AF(AQ);},complete:function(){AK(false);AO();},canceled:function(){AF();}});}catch(AM){AF(AM);AO();}},initModel:mstrmojo.emptyFn,canDelegateToolBar:function J(){return true;},createView:mstrmojo.emptyFn,getDefaultMenus:function w(){return 0;},onorientationChange:function Q(){var AF=this.frame;if(AF&&AF.hasRendered){AF.rootOrientationChange({isLandscape:!this.orientation});}this._super();},refresh:function AE(AG,AH){var AF=this.view;this.model.refresh(AG,mstrmojo.func.wrapMethods({success:function(AI){if(AI){AF.refresh();}}},AH));},reExecute:function A(AF){if(mstrApp.useBinaryFormat){mstrMobileApp.removeLiveCache(mstrApp.getCurrentProjectId(),this.model.ci.cid);var AG=this;D.call(this,{},{success:function(AH){AG.setData(AH);}},{refresh:true},false);}else{AF.model.raiseEvent({name:"refresh"});}},reprompt:function AC(){this.repromptFlag=true;this.openPrompts();},openPrompts:function q(AJ){var AM=this,AL=this.model.prompts,AN=AL.size(),AF=[],AO=false,AK;for(AK=0;AK<AN;AK++){var AH=AL.get(AK);if(AH.supported()){AF.push(AH);}else{if(!AH.hasAnswer){if(AH.req){this.viewFailed({message:mstrmojo.desc(8623,"Report cannot be executed because it contains unanswered, required prompts.")});return ;}AO=true;}}}var AI=function(){if(AO){mstrmojo.alert(mstrmojo.desc(8624,"Warning: Report contains unasnwered, unsupported prompts."),function(){AM.answerPrompts();});}else{AM.answerPrompts();}};if(AF.length>0){var AG=this.frame;this.spawn(mstrApp.controllerFactory.newController("Prompts"),{maskNode:AG&&AG.getMaskNode(),prompts:AL,supportedPrompts:AF,n:(AJ&&(AJ.n||AJ.ttl))||this.ttl,callback:function(){AI();}});}else{AI();}},answerPrompts:function X(){var AF=this;this.model.answerPrompts({success:function(AG){var AH=AF.nextController;if(AH){AH.destroy();}if(AF.repromptFlag){AF.afterReprompt(AG);delete AF.repromptFlag;AF.rootCtrl.updateContent(AF.frame,AG.n);V.call(AF);AF.checkCache(AG);}else{AB.call(AF,AG);}},prompts:function(){AF.viewFailed({message:mstrmojo.desc(8625,"Prompts in prompts are not supported.")});},failure:function(AG){mstrApp.onerror(AG);}});},afterReprompt:function d(AF){this.getPageByTree(true);},hasPageBy:mstrmojo.emptyFn,getPageByTree:function p(AI){var AG=!!this.pageByData;if((!AI&&AG)||!this.hasPageBy()){return ;}var AJ=this,AF=this.view,AH=(AF.isVis&&AF.isVis())?AF.xtabModel:this.model;if(AH.getPageByTree){if(AG){this.set("pageByData",null);}AH.getPageByTree({success:function(AK){AJ.set("pageByData",AK);},failure:function(AK){mstrApp.onerror(AK);}});}},destroy:function x(){this.model.destroy();var AF=this.frame;if(AF){AF.destroy();}this._super();},checkCache:function H(AK,AI,AQ,AJ,AG){var AM=this,AO=this.model.getDataService(),AF=AK&&AK.ifc;AQ=AQ||mstrmojo.emptyFn;if(!mstrApp.useBinaryFormat||!AF){AQ();return ;}AI=AI||{did:this.did,n:this.n,st:this.st,t:this.t,sub_id:this.sub_id};var AH=function(AS){var AR=(AS!==true);AM.rootCtrl.setActionToolbarStatus(AR);AM.frame.setActionToolbarStatus(AR);};var AP=true,AN=1,AL={success:function(AR){if(AP&&AJ!==2){mstrmojo.toast(mstrmojo.desc(8617,"Your view has been updated with the latest version of the document."),3000);}if(AN===1){AM.setData(AR,true);}AM.getPageByTree(true);AM.generateActionToolbar();AQ();AH();},prompts:function(){mstrmojo.alert(mstrmojo.desc(8619,"New prompts were added to the document."),function(){AH();AM.reprompt();});},failure:function(){AH();},canceled:AH};AH(true);if(AJ===1&&AK.ci.cid==="00000000000000000000000000000000"){AP=false;}AO.checkCache(L.copy(AK.ci||{},{isAutoRefresh:AJ===2}),{success:function(AR){if(AR.needUpdate){if(AR.refresh&&AJ===2){AN=2;R.call(AM,AL,true);}else{AI.isAutoRefresh=AJ===2;D.call(AM,AI,AL,{},mstrApp.isTablet());}}else{AQ();AH();}},failure:function(){if(!mstrApp.onMobileDevice()){if(AJ===2){AN=2;R.call(AM,AL);}else{D.call(AM,AI,AL,{},mstrApp.isTablet());}}else{AH();}},canceled:AH},AG);},goBack:function E(){var AF=this._super();if(!AF){s.call(this);}return AF;},makeCurrent:function b(AF){var AG=this.frame;if(AG){this._super(AF);this.rootCtrl.updateContent(AG,this._startParams.n,AF);V.call(this);}else{this.doNotRefresh=true;this.prevController.makeCurrent(AF);}},onExecuteNewObject:function P(AG){var AF=(AG.objType===F)?768:14081;this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(AF),{st:AF}),AG);},onDrill:function h(AF){this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(O)),L.copy(AF,{action:(this.ctrlType===O)?"drillGrid":"drill2Grid",st:O}));},goUp:function Y(){if(!this._super()){var AF=this.getController("ctrlType",2048);if(AF){AF.makeCurrent(true);}else{this.rootCtrl.goHome();}}return true;},updateActionToolbar:function t(AF){if(mstrApp.getConfiguration().isMenuAllowed(AD,AD)){if(mstrMobileApp.getSDKVersion()>=11){AF.addMenuItem(C,mstrmojo.desc(11191,"Annotation"),C,false,24);}AF.addMenuItem(AD,mstrmojo.desc(9099,"Share"),AD,false,22);}AF=this._super(AF);if(this.frame&&this.frame.delegateToolbar(AF)){AF=mstrmojo.android.ui.ActionToolbar.newToolbarConfig();}return AF;},handleMenuItem:function l(AG,AF){switch(AG){case AD:this.share("",false);return ;case AA:this[((AF===11)?"enter":"exit")+"FullScreen"]();return ;case C:this.startAnnotate();return ;}return this._super(AG,AF);},beforeViewHidden:function G(AG){this._super(AG);var AF=this.view;if(AF&&AF.beforeViewHidden){AF.beforeViewHidden(AG);}if(this.isFullScreen){this.exitFullScreen(true,AG);}},afterViewVisible:function W(AF){this._super(AF);if(this.isFullScreen||!!this.model.fs||!!this.model.data.fs){this.enterFullScreen();}else{if(mstrMobileApp.getSDKVersion()>=16){window.setTimeout(function(){mstrMobileApp.clearWebViewCache(false);},100);}}mstrMobileApp.hideProgress();if(!AF){var AG=this.id;window.setTimeout(function(){var AH=mstrmojo.all[AG];if(AH&&AH.rootCtrl.getCurrent()===AH){AH.takeScreenShot();}},300);}},takeScreenShot:function Z(){var AG=this.view,AF=(AG.getCaptureDimensions&&AG.getCaptureDimensions())||K.position(AG.domNode),AI=K.windowDim(),AJ=this.did||this.getDepth(),AH=mstrApp.getCurrentProjectId();g(mstrmojo.android.ui.PropertiesView.getPreviewSizes(),function(AK){mstrMobileApp.takeScreenShot(JSON.stringify({pid:AH,dssId:AJ,x:AF.x,y:AF.y,w:Math.max(AF.w,AK.w),h:Math.max(AF.h,AK.h),pw:AK.w,ph:AK.h,ww:AI.w,wh:AI.h}));});},addFullScreenButton:function a(AF){var AH=mstrmojo.desc(8430,"Enter Fullscreen"),AG=11;if(this.isFullScreen){AH=mstrmojo.desc(8429,"Exit Fullscreen");AG=10;}},enterFullScreen:function N(){this.frame.enterFullScreen();this.rootCtrl.enterFullScreen();this.isFullScreen=true;this.generateActionToolbar();mstrmojo.touchManager.raiseEvent({name:"fullScreenStateChange"});},exitFullScreen:function z(AF,AG){this.isFullScreen=false;this.frame.exitFullScreen(!AF);this.rootCtrl.exitFullScreen(!AF,AG);this.generateActionToolbar();mstrmojo.touchManager.raiseEvent({name:"fullScreenStateChange"});},viewTap:function B(){},cancelFlashFullScreen:function k(){this.frame.cancelFlashFullScreen();this.rootCtrl.cancelFlashFullScreen();},getMagnifierConfig:function f(){var AF=this.frame.getPosition();return{curtainPosition:AF};},share:function o(AH,AG){var AI=M.call(this),AF=this.ttl;window.setTimeout(function(){mstrMobileApp.takeScreenShotAndSend(AI,JSON.stringify({attachmentName:mstrmojo.string.decodeHtmlString(AF),subject:AH,useDefault:AG}));},100);},getBottomToolBarHeight:function S(){return(!mstrApp.isTablet()&&!this.isFullScreen&&!mstrApp.isLandscape())?(Math.round(I*mstrMobileApp.getDeviceDPI()/160)):0;},startAnnotate:function u(){if(!!this.ignoreAnnotationMenuItem){return ;}this.ignoreAnnotationMenuItem=true;mstrMobileApp.showProgress([mstrmojo.desc(8445,"Loading")],false);var AG=M.call(this),AF=this;window.setTimeout(function(){mstrMobileApp.startAnnotate(AG,mstrmojo.string.decodeHtmlString(AF.ttl),"javascript:mstrmojo.all."+AF.id+".onAnnotationFinished()");},100);},onAnnotationFinished:function j(){this.ignoreAnnotationMenuItem=false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.controllers._HasFolderView","mstrmojo.android.EnumMenuOptions");mstrmojo.requiresDescs(773,1089,9931);var E=mstrmojo.desc;var A=mstrmojo.android.EnumMenuOptions.REFRESH;function H(N){var O=this,P=function(S){var Q=O.view,R=O.rootCtrl,U;Q.set("items",S.items);if(R.getCurrent()===O){if(!O.hsc){U=E(1089,"Subscriptions");}R.updateFolder(Q,U);O.updatePropertiesMsg();}};mstrApp.modelFactory.newDataService("Subscriptions").getSubscriptions({success:P,failure:function(Q){if(mstrApp.isHosted()){P({items:[{n:"Subscriptions Unavailable"}]});}else{O.viewFailed(Q);}}},N);}mstrmojo.android.controllers.SubscriptionsController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,[mstrmojo.android.controllers._HasFolderView],{scriptClass:"mstrmojo.android.controllers.SubscriptionsController",init:function M(O){this._super(O);var N=mstrmojo.publisher;N.subscribe(N.NO_SRC,N.RECONCILE_END_EVENT,function(){H.call(this,true);},this.id);},start:function C(N){this._super(N);this.csp=N.csp;this.initFolderView();H.call(this,false);},openItem:function I(O){var N=O.st;if(N){this.spawnedItem=O;this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(N),O),O);}else{this.view.clearSelect();}},spawnFailed:function J(N){delete this.spawnedItem;this._super(N);},itemLongPressed:function G(N){if(N.st){return this._super(N);}return false;},getDefaultMessage:function B(){return E(9931,"Select a subscription to view its content.");},makeCurrent:function L(P){var N=this.spawnedItem;if(P&&N){delete N.unread;delete this.spawnedItem;}this._super(P);var O=this.rootCtrl;O.updateFolder(this.view,this.txt,P);O.restoreNavigation();this.updatePropertiesMsg();},goUp:function K(){if(!this._super()){this.rootCtrl.goBack();}return true;},updateActionToolbar:function F(N){N.addMenuItem(A,E(773,"Refresh"),A,true,5);return this._super(N);},handleMenuItem:function D(N,O){if(N===A){mstrMobileApp.restartReconciler();return ;}this._super(N,O);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.EnumMenuOptions");mstrmojo.android.controllers.PromptsController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.PromptsController",doNotRefresh:true,start:function D(H){this._super(H);this.callback=H.callback;var F=this.prompts=H.prompts,E=this.view=this.newView("Prompts",{maskNode:H.maskNode,prompts:F,supportedPrompts:H.supportedPrompts});var G=F.host.n||H.n;this.rootCtrl.updatePrompts(E,G);},getDefaultMenus:function B(){return 0;},goUp:function C(){if(!this._super()){this.rootCtrl.goBack();}return true;},answerPrompts:function A(){var E=this.id;this.prompts.prepareAnswer({success:function(){try{var F=mstrmojo.all[E];F.prompts.validate();F.callback();}catch(G){mstrApp.onerror(G);return false;}return true;}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.controllers._SupportsQueuedTransactions","mstrmojo.android.controllers._HasFolderView","mstrmojo.hash");mstrmojo.requiresDescs(8385);function F(P,K,O){mstrApp.setCurrentProjectId(P.did);var N=mstrmojo.hash.copy(P),M={};if(O){M.hsc=true;}var L=P.rtf;if(L){N.did=N.folderID=L.did;}else{N.systemFolder=7;}N.st=2048;K.spawn(mstrApp.controllerFactory.newController("Folder",M),N);}function D(L){if(L.length<1){var K=this._noPrjView;if(!K){K=this._noPrjView=new mstrmojo.android.ui.NoProjectsView({controller:this});}this.rootCtrl.updateDisplayMessage(K);}}var C=mstrmojo.android.controllers.ProjectsController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,[mstrmojo.android.controllers._SupportsQueuedTransactions,mstrmojo.android.controllers._HasFolderView],{scriptClass:"mstrmojo.android.controllers.ProjectsController",start:function B(N){this._super(N);var M=mstrApp.getConfiguration().getProjectList(),L=this.rootCtrl,K=this.initFolderView();K.set("items",M);L.updateFolder(K);this.updatePropertiesMsg();D.call(this,M);},openFolder:function G(K){F(K,this);},getDefaultMessage:function A(){return mstrmojo.desc(8385,"Select a project to view contents");},makeCurrent:function J(L){this._super(L);this.view.clearSelect();var K=this.rootCtrl;K.updateFolder(this.view);K.restoreNavigation();this.updatePropertiesMsg();D.call(this,mstrApp.getConfiguration().getProjectList());},goUp:function I(){if(!this._super()){this.rootCtrl.goBack();}return true;},destroy:function H(){var K=this._noPrjView;if(K){K.destroy();}this._super();},updateActionToolbar:function E(K){this.getTxnToolbarButton(K);return this._super(K);}});C.spawnFolderController=F;}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.SimpleList","mstrmojo.android.EnumMenuOptions","mstrmojo.android.ui.Button","mstrmojo.hash","mstrmojo.array","mstrmojo.string","mstrmojo.num","mstrmojo.android.nativedialog.ListDialog");mstrmojo.requiresDescs(11,16,17,18,37,187,295,629,702,784,844,845,874,1088,1142,1563,1900,1905,2411,2461,2822,3157,4253,5191,6560,7227,7559,7561,7778,7779,7831,7840,8027,8360,8361,8362,8363,8364,8365,8366,8367,8368,8369,8370,8371,8372,8373,8374,8375,8376,8377,8378,8379,8390,8441,8447,8455,8456,8457,8458,8459,8489,8633,8634,8635,8760,9446,9447,9448,9449,9450,9451,9452,9456,9457,9458,9459,9460,9464,9465,9466,9467,9468,9469,9470,9471,9481,9790,9791,9792,9793,9794,9795,9796,9797,9807);var $ARR=mstrmojo.array,$HASH=mstrmojo.hash,$BTN=mstrmojo.android.ui.Button.newButton,$DESC=mstrmojo.desc,MENUS=mstrmojo.android.EnumMenuOptions,MENU_DELETE=MENUS.DELETE,MENU_ADD_SERVER=MENUS.ADD_SERVER,MENU_ADD_PROJECT=MENUS.ADD_PROJECT,MENU_ABOUT=MENUS.ABOUT,legalText;var STYLE_HEADER=1,STYLE_BUTTON=2,STYLE_VIEW_BUTTON=3,STYLE_TEXT=4,STYLE_LIST=5,STYLE_CHECK=6,STYLE_IMAGE=7,STYLE_TEXT_AREA=8,STYLE_NUMBER=9,STYLE_TIME=10;var TYPE_HOME=1,TYPE_SERVERS=2,TYPE_EDIT_SERVER=3,TYPE_SERVER_CREDS=4,TYPE_EDIT_PROJECT=5,TYPE_PROJECT_CREDS=6,TYPE_GENERAL=7,TYPE_ABOUT=8,TYPE_LEGAL=10,TYPE_CERT=12,TYPE_CERT_AUTH=12,TYPE_TRUSTED_CERTS=13;var DELETE_TXT={};DELETE_TXT[TYPE_EDIT_SERVER]=5191;DELETE_TXT[TYPE_EDIT_PROJECT]=11;var ADD_TXT={};ADD_TXT[TYPE_SERVERS]=5191;ADD_TXT[TYPE_EDIT_SERVER]=11;var MEMORY_LIMIT_LIST=[{v:25,n:"25MB"},{v:50,n:"50MB"},{v:100,n:"100MB"},{v:250,n:"250MB"},{v:500,n:"500MB"},{v:1024,n:"1GB"},{v:2048,n:"2GB"},{v:3072,n:"3GB"},{v:4096,n:"4GB"}];function getHourString(v){return $DESC(9797,"Every ## hours").replace("##",v);}var UPDATE_INTERVAL=[{v:1,n:$DESC(9796,"Every hour")},{v:2,n:getHourString(2)},{v:4,n:getHourString(4)},{v:10,n:getHourString(10)},{v:24,n:getHourString(24)}];var MODIFIED_ITEMS={};function getNewServerNode(){return{nm:"",po:80,pt:"MicroStrategyMobile",ty:1,rt:0,udc:true,wsc:{am:1,lo:"",ps:""},pdc:{am:1,lo:"",ps:""},pl:[],isNew:true};}function getNewProjectNode(){return{pc:{am:0,lo:"",ps:""},pn:"",sn:"",sp:0,udc:false,isNew:true};}function updateView(viewInfo,items){if(items){viewInfo.items=items;}else{items=viewInfo.items;}var view=this.view.getList(viewInfo.cfg.isHome),rootCtrl=this.rootCtrl;view.restoreListState(viewInfo.idx,viewInfo.origin);view.items=items;view.refresh();if(mstrApp.isTablet()&&viewInfo.cfg.isHome){if(!viewInfo.idx){view.singleSelect(0);}}rootCtrl.updateContent(null,(mstrApp.isTablet())?$DESC(7831,"Settings"):viewInfo.title);rootCtrl.contentUpdated("Settings");this.generateActionToolbar();}function generateView(fnView,item){var viewInfo=fnView.call(this,item);this.view.getList(viewInfo.cfg.isHome).resetListState();viewInfo.cfg.fnRedraw=fnView;this._viewInfos.push(viewInfo);updateView.call(this,viewInfo);}function getLastViewInfo(){var views=this._viewInfos;return views[views.length-1];}function getCurrentConfig(){var viewInfo=getLastViewInfo.call(this);return viewInfo&&viewInfo.cfg;}function cacheViewState(idx){var lastViewInfo=getLastViewInfo.call(this);lastViewInfo.idx=idx;lastViewInfo.origin=this.view.getList(lastViewInfo.cfg.isHome).getScrollPos();}function showCurrentView(){var current=getLastViewInfo.call(this),cfg=current.cfg;updateView.call(this,current,cfg.fnRedraw.call(this,cfg.item).items);this.view.getList(cfg.isHome).restoreListState(current.idx,current.origin);}function confirmDelete(itemName,fnOk){mstrmojo.confirm($DESC(8390,"Are you sure you want to delete #?").replace("#",itemName),[$BTN($DESC(221,"Cancel")),$BTN($DESC(1442,"OK"),fnOk)]);}function deleteItem(item){var me=this;confirmDelete(item.nm,function(){var mobileConfig=me.mobileConfigObj,cfg=getCurrentConfig.call(me),servers=mobileConfig.getWebServersList(),collection=(cfg.type===TYPE_SERVERS)?servers:servers[cfg.idx].pl;collection.splice(item.idx,1);me.view.getList(cfg.isHome).set("items",cfg.fnRedraw.call(me,cfg.item).items);me.mobileConfigObj.reconcileHomescreen();me.mobileConfigObj.saveConfiguration();me.connectivityChanged=true;});}function showPopup(item){var controller=this,dialog,dialogConfig;var dialogConfig={title:item.nm,cssClass:"mstrmojo-SimpleOptions",children:[{scriptClass:"mstrmojo.android.SimpleList",isElastic:true,items:[{n:$DESC(1088,"Edit"),v:1},{n:$DESC(629,"Delete"),v:2}],postselectionChange:function(evt){dialog.close();if(this.items[evt.added[0]].v===1){item.fn();}else{deleteItem.call(controller,item);}}}]};if(mstrApp.useBinaryFormat){$HASH.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.ListDialog",choiceMode:mstrmojo.android.nativedialog.ListDialog.CHOICE_MODES.NONE,onSelectionChange:function(index){if(index===0){item.fn();}else{deleteItem.call(controller,item);}this.close();}},dialogConfig);}dialog=mstrApp.showDialog(dialogConfig);}function convertListToItems(list){var rtn=[],x=-1;$ARR.forEach(list,function(n,idx){if(n){rtn[++x]={n:n,v:idx};}});return rtn;}function editItem(item,value,node){var cfg=getCurrentConfig.call(this),type=cfg.type,path=item.pt.split("."),prop=path.pop(),mobileConfig=this.mobileConfigObj,servers=mobileConfig.getWebServersList();switch(type){case TYPE_EDIT_SERVER:node=servers[cfg.idx];if(!node){node=getNewServerNode();servers.push(node);this.connectivityChanged=true;}break;case TYPE_EDIT_PROJECT:var serverNode=servers[cfg.parent.idx],projects=serverNode.pl||[];node=projects[cfg.idx];if(!node){node=getNewProjectNode();this.mobileConfigObj.setPid(node);projects.push(node);this.connectivityChanged=true;}break;case TYPE_GENERAL:node=mobileConfig.getGeneralSettings();if(prop==="am"||prop==="lo"||prop==="ps"){node=mobileConfig.getDefaultServerCreds();}else{if(prop==="ebs"||prop==="tod"||prop==="ui"||prop==="wo"||prop==="co"){node=mobileConfig.getBackgroundSyncSettings();}}break;case TYPE_CERT:case TYPE_CERT_AUTH:case TYPE_TRUSTED_CERTS:break;default:throw new Error("AndroidSettingsController::editItem -- Unhandled edit action.");}if(path.length){node=$HASH.walk(path.join("."),node);}var oldValue=node[prop];if(oldValue!==value){node[prop]=value;item.v=value;var mods=MODIFIED_ITEMS[type]||{};mods[item.pt.replace(".","@")]=item;MODIFIED_ITEMS[type]=mods;$ARR.forEach(item.dependents,function(dependentItem){$ARR.forEach(["Hidden","Disabled"],function(prop){var fnDependent=dependentItem["fn"+prop];if(fnDependent){dependentItem[prop.toLowerCase()]=fnDependent(value);}});});if(prop==="lo"||prop==="ps"){node.um=true;}}}function newImage(props){return $HASH.copy(props,{nm:"",style:STYLE_IMAGE});}function newHeader(text,props){return $HASH.copy(props,{nm:text,style:STYLE_HEADER});}function newItem(title,value,style,props){return $HASH.copy(props,{nm:title,v:value,style:style});}function newBtnItem(title,value,fnClick,props){var controller=this;return newItem(title,value,STYLE_BUTTON,$HASH.copy({fn:function(){fnClick.call(controller);}},props));}function newViewItem(title,value,fnView,props){var controller=this;return newItem(title,value,STYLE_VIEW_BUTTON,$HASH.copy({fn:function(){cacheViewState.call(controller,this._renderIdx);generateView.call(controller,fnView,this);}},props));}function newEditItem(title,style,node,path,props){var controller=this;return newItem(title,$HASH.walk(path,node),style,$HASH.copy({pt:path,fn:function(value){editItem.call(controller,this,value,node);}},props));}function newListItem(title,node,path,items,props){return newEditItem.call(this,title,STYLE_LIST,node,path,$HASH.copy({items:items},props));}function newCheckItem(title,description,node,path,on,off,props){return newEditItem.call(this,title,STYLE_CHECK,node,path,$HASH.copy({desc:description,on:on,off:off},props));}function ellipsizeHeaderText(text,ellipsize){return ellipsize?mstrmojo.string.ellipsize(text,20):text;}function addTabletHeader(items,title,ellipsize){if(mstrApp.isTablet()){var headerTitle=[];$ARR.forEach(this._viewInfos,function(info,idx){if(idx&&info.title!==title){headerTitle.push('<div hidx="'+idx+'">'+ellipsizeHeaderText(info.title,(idx>1&&ellipsize))+"</div>");}});headerTitle.push("<em>"+ellipsizeHeaderText(title,ellipsize)+"</em>");items=[newHeader(headerTitle.join(""),{cls:"tablet-header"})].concat(items);}return items;}function validateServerChanges(cfg,mods){var servers=this.mobileConfigObj.getWebServersList(),server=servers[cfg.idx],serverCreds=server.wsc,serverAuth=serverCreds.am,projects=server.pl,isNewServer=server.isNew;if(isNewServer&&!mods.nm){servers.splice(cfg.idx,1);return false;}delete server.isNew;if(mods.nm||mods.po||mods.pt||mods.ty){$ARR.forEach(projects,function(project){mstrApp.removeProjectCaches(project);});}else{if(mods["wsc@lo"]&&(mods["wsc@am"]||(serverAuth===2||serverAuth===3))){var projectDefaultAuth=server.pdc.am;$ARR.forEach(projects,function(project){var projectAuth=(project.udc)?projectDefaultAuth:project.pc.am;if(projectAuth===2||projectAuth===64){mstrApp.removeProjectCaches(project);}});}}server.udc=(!serverAuth);if(!serverAuth){serverCreds.lo="";serverCreds.ps="";}this.mobileConfigObj.setWebServerList(servers);return(isNewServer||!!mods.nm);}function validateProjectChanges(cfg,mods){var servers=this.mobileConfigObj.getWebServersList(),projects=servers[cfg.parent.idx].pl,project=projects[cfg.idx],projectCreds=project.pc,projectAuth=projectCreds.am,isNewProject=project.isNew;if(isNewProject&&(!mods.pn||!mods.sn)){projects.splice(cfg.idx,1);return false;}delete project.isNew;if(!isNewProject&&(mods.pn||mods.sn||mods["pc@am"]||(projectAuth>0&&mods.lo))){mstrApp.removeProjectCaches(project.pid);this.mobileConfigObj.setPid(project);this.connectivityChanged=true;}project.udc=(!projectAuth);if(!projectAuth){projectCreds.lo="";projectCreds.ps="";}return(isNewProject||!!mods.pn||!!mods.sn);}function validateGeneralSettingsChanges(cfg,mods){var mobileConfig=this.mobileConfigObj,creds=mobileConfig.getDefaultServerCreds(),isAnonymousMode=(creds.am===1);if(mods.am||(mods.lo&&!isAnonymousMode)){$ARR.forEach(mobileConfig.getWebServersList(),function(server){if(server.udc){var defaultProjAuth=server.pdc.am;$ARR.forEach(server.pl,function(project){var projAuthMode=(project.udc)?defaultProjAuth:project.pc.am;if(projAuthMode===2||projAuthMode===64){mstrApp.removeProjectCaches(project.pid);}});}});}if(isAnonymousMode){creds.lo="";creds.ps="";}return false;}function newAuthenticationItems(type,node){var path="",fnDisabled=mstrmojo.emptyFn,items;if(type===TYPE_EDIT_SERVER||type===TYPE_SERVER_CREDS){items=convertListToItems([$DESC(8441,"Default"),$DESC(7778,"Anonymous"),$DESC(7227,"Basic"),$DESC(7779,"Windows"),$DESC(8027,"Trusted")]);if(type===TYPE_EDIT_SERVER){path="wsc";}fnDisabled=function(v){return(v<2||v===64);};if((type!==TYPE_SERVER_CREDS)&&node.udc){node[path].am=0;}}else{items=[{n:$DESC(8441,"Default"),v:0},{n:$DESC(3157,"Standard"),v:1},{n:$DESC(7779,"Windows"),v:2},{n:"LDAP",v:16},{n:$DESC(1563,"Database"),v:32},{n:mstrmojo.desc(8027,"Trusted"),v:64}];path=(type===TYPE_PROJECT_CREDS)?"pdc":"pc";fnDisabled=function(v){return(!v||parseInt(v,10)===2||parseInt(v,10)===64);};if((type!==TYPE_PROJECT_CREDS)&&node.udc){node[path].am=0;}}if(type===TYPE_SERVER_CREDS||type===TYPE_PROJECT_CREDS){items.shift();}path=(path&&path+".")||"";var rtn=[];if(!this.mobileConfigObj.getGeneralSettings().npc){var cfgLogin={disabled:fnDisabled($HASH.walk(path+"am",node)),fnDisabled:fnDisabled},userName=newEditItem.call(this,$DESC(17,"User Name"),STYLE_TEXT,node,path+"lo",cfgLogin),pwd=newEditItem.call(this,$DESC(18,"Password"),STYLE_TEXT,node,path+"ps",$HASH.copy(cfgLogin,{pwd:true}));rtn.push(newListItem.call(this,$DESC(2822,"Authentication"),node,path+"am",items,{dependents:[userName,pwd]}));rtn.push(userName);rtn.push(pwd);}else{rtn.push(newListItem.call(this,$DESC(2822,"Authentication"),node,path+"am",items));}return rtn;}function getEditProjectView(item){var idx=item.idx,settingsCfg=getCurrentConfig.call(this),server=this.mobileConfigObj.getWebServersList()[settingsCfg.idx]||getNewServerNode(),project=server.pl[idx]||getNewProjectNode(),items=[];items.push(newEditItem.call(this,$DESC(11,"Project"),STYLE_TEXT,project,"pn",{showHint:true}));items.push(newEditItem.call(this,$DESC(5191,"Server"),STYLE_TEXT,project,"sn",{showHint:true}));items=items.concat(newAuthenticationItems.call(this,TYPE_EDIT_PROJECT,project));return{title:item.nm,items:addTabletHeader.call(this,items,item.nm,true),cfg:{type:TYPE_EDIT_PROJECT,item:item,idx:idx,parent:settingsCfg,fnVal:validateProjectChanges}};}function getEditServerView(item){var controller=this,serverIndex=item.idx,server=this.mobileConfigObj.getWebServersList()[serverIndex]||getNewServerNode(),projects=server.pl||[],items=[];server.pl=projects;items.push(newEditItem.call(this,$DESC(7559,"Name"),STYLE_TEXT,server,"nm",{showHint:true}));items.push(newEditItem.call(this,$DESC(16,"Port"),STYLE_NUMBER,server,"po",{limits:{min:0,max:65535}}));items.push(newEditItem.call(this,$DESC(8489,"Path"),STYLE_TEXT,server,"pt"));items.push(newListItem.call(this,$DESC(8362,"Web server type"),server,"ty",convertListToItems(["J2EE","ASP.Net"])));items.push(newCheckItem.call(this,$DESC(8363,"Secure HTTP"),$DESC(9449,"Use HTTPS to access the mobile server"),server,"rt",1,0));items=items.concat(newAuthenticationItems.call(this,TYPE_EDIT_SERVER,server));items.push(newHeader($DESC(8364,"Default Project Credentials")));items=items.concat(newAuthenticationItems.call(this,TYPE_PROJECT_CREDS,server));items.push(newHeader($DESC(37,"Projects")));$ARR.forEach(projects,function(project,idx){items.push(newViewItem.call(controller,project.pn,project.sn,getEditProjectView,{idx:idx,fnPress:showPopup}));});return{title:item.nm,items:addTabletHeader.call(this,items,item.nm,true),cfg:{type:TYPE_EDIT_SERVER,item:item,idx:serverIndex,parent:getCurrentConfig.call(this),fnVal:validateServerChanges}};}function getLegalView(){var items=[],title=$DESC(8365,"Legal");if(!legalText){legalText="<p>"+$DESC(8633)+"</p><p>"+$DESC(8634)+"</p><p>"+$DESC(8635)+"</p>";}items.push(newItem(legalText,"",STYLE_TEXT_AREA,{noclick:true}));return{title:title,items:addTabletHeader.call(this,items,title),cfg:{type:TYPE_LEGAL}};}function getAboutView(){var items=[],title=mstrApp.isTablet()?$DESC(1142,"About"):$DESC(9457,"About #").replace("#","MicroStrategy");items.push(newImage.call(this,{noclick:true,cls:"mstr-logo"}));items.push(newItem.call(this,"MicroStrategy Mobile 9.4.1",$DESC(8366,"Build Number #").replace("#",mstrMobileApp.getAppVersion()),STYLE_BUTTON,{cls:"build-info",noclick:true}));items.push(newHeader($DESC(9456,"More Information"),{cls:"more-info"}));items.push(newViewItem.call(this,$DESC(8365,"Legal"),$DESC(9460,"Copyright disclosure"),getLegalView));items.push(newBtnItem.call(this,$DESC(9458,"Get in touch"),$DESC(9459,"Send us an email with your feedback, suggestions and appreciation!"),function(){var bodyMsg=[$DESC(9465,"I was looking through the MicroStrategy Mobile Android App. Please contact me with details on how I can:")];bodyMsg.push($DESC(9466," - Find out how I can use MicroStrategy Apps to drive my business."));bodyMsg.push($DESC(9467," - Have apps, based on my workflow, specifications and design, in two weeks."));bodyMsg.push($DESC(9468," - How I can partner with MicroStrategy for all my Mobile solutions."));bodyMsg.push($DESC(9469," - Attend a free, hands-on, class to teach developers how to build and maintain Mobile Business Apps."));bodyMsg.push("");bodyMsg.push($DESC(9470,"Thank you."));mstrMobileApp.sendEmail("info@microstrategy.com",$DESC(9464,"Request information about MicroStrategy Mobile"),bodyMsg.join("\r\n"),"");}));return{title:title,items:addTabletHeader.call(this,items,title),cfg:{type:TYPE_ABOUT}};}function getBackgroundSyncingItems(){var settings=this.mobileConfigObj.getBackgroundSyncSettings(),fnDisabled=function(v){return(!v||v===false);},depProps={disabled:fnDisabled($HASH.walk("ebs",settings)),fnDisabled:fnDisabled},timeOfDay=newEditItem.call(this,$DESC(9807,"Time of day"),STYLE_TIME,settings,"tod"),updateInterval=newListItem.call(this,$DESC(9792,"Update interval"),settings,"ui",UPDATE_INTERVAL,$HASH.copy(depProps,{dependents:[timeOfDay]})),wifi=newCheckItem.call(this,$DESC(9793,"Only over Wi-Fi"),null,settings,"wo",true,false,depProps),charge=newCheckItem.call(this,$DESC(9794,"Only if charging"),null,settings,"co",true,false,depProps),enable=newCheckItem.call(this,$DESC(9795,"Enable background syncing"),null,settings,"ebs",true,false,{dependents:[updateInterval,timeOfDay,wifi,charge,timeOfDay]}),items=[];items.push(enable);items.push(updateInterval);items.push(timeOfDay);items.push(wifi);items.push(charge);timeOfDay.disabled=updateInterval.disabled||(updateInterval.v!==24);timeOfDay.fnDisabled=function(){return(enable.v!==true)||(updateInterval.v!==24);};return items;}function deleteCertificate(item){var controller=this;confirmDelete(item.nm,function(){mstrApp.showMessage("Deleting...");window.setTimeout(function(){var cfg=getCurrentConfig.call(controller);mstrMobileApp.deleteCertificate();item.hidden=!mstrMobileApp.hasCertificate();$ARR.forEach(item.dependents,function(d){d.hidden=!item.hidden;});controller.view.getList(cfg.isHome).set("items",cfg.fnRedraw.call(controller,cfg.item).items);mstrApp.hideMessage();},100);});}function showPopupDeleteCertificate(item){var controller=this,dialog;dialog=mstrApp.showDialog({title:item.nm,cssClass:"mstrmojo-SimpleOptions",children:[{scriptClass:"mstrmojo.android.SimpleList",isElastic:true,items:[{n:$DESC(1900,"View"),v:1},{n:$DESC(629,"Delete"),v:2}],postselectionChange:function(evt){dialog.close();if(this.items[evt.added[0]].v===1){item.fn();}else{if(this.items[evt.added[0]].v===2){deleteCertificate.call(controller,item);}}}}]});}function getCertificateDetailsView(item){var detailsStr=mstrMobileApp.getCertificateDetails(),details=eval("("+detailsStr+")"),items=[],result="",i;if(details.prs){for(i=0;i<details.prs.pr.length;++i){var pr=details.prs.pr[i];var name;if(pr.n==="edat"){name=$DESC(8457,"Expiration");}else{if(pr.n==="issr_n"){name=$DESC(8458,"Issuer");}else{name=pr.n;}}result+=name+": "+pr.v+"<br/>";}items.push(newItem.call(this,result,"",STYLE_TEXT_AREA,{disabled:true}));return{title:item.nm,items:addTabletHeader.call(this,items,item.nm),cfg:{type:TYPE_CERT,item:item}};}throw details.message||"No certificate details available";}function getTrustedCertificatesView(item){var result=mstrMobileApp.getTrustedCertificates(),jsonResult=eval("("+result+")"),items=[],i;if(jsonResult&&jsonResult.certs){for(i=0;i<jsonResult.certs.length;++i){var cert=jsonResult.certs[i].dsc;items.push(newItem(cert,"",STYLE_TEXT_AREA,{disabled:true}));}}return{title:item.nm,items:addTabletHeader.call(this,items,item.nm),cfg:{type:TYPE_TRUSTED_CERTS,item:item}};}function getCertificateAuthenticationFieldsView(item){var result=mstrMobileApp.getCertificateAuthenticationFields(),jsonResult=eval("("+result+")"),items=[],controller=this,i=0;if(jsonResult.login_info){var settings={},loginInfoField=jsonResult.login_info.field;for(i=0;i<loginInfoField.length;++i){var field=loginInfoField[i],cfgAuth={};settings[field.n]="";if(!!field.pass){cfgAuth=$HASH.copy(cfgAuth,{pwd:true});}items.push(newEditItem.call(this,field.dn,((field.tp==="numeric")?STYLE_NUMBER:STYLE_TEXT),settings,field.n,cfgAuth));}items.push(newItem.call(this,"Submit","",STYLE_BUTTON,{fn:function(){mstrApp.showMessage();window.setTimeout(function(){var responseStr=mstrMobileApp.getNewCertificate(JSON.stringify(settings));mstrApp.hideMessage();var response=eval("("+responseStr+")"),message=response.message;if(message){window.alert(response.message);}else{window.alert("Certificate obtained");if(item&&item.nm==="Get Certificate"){item.hidden=mstrMobileApp.hasCertificate();$ARR.forEach(item.dependents,function(d){d.hidden=!d.hidden;});}mstrApp.goBack();}},100);}}));var title=jsonResult.login_info.msg;return{title:title,items:addTabletHeader.call(this,items,title),cfg:{type:TYPE_CERT_AUTH,item:item}};}throw new Error(jsonResult.message);}function getGeneralSettingsView(item){var mobileConfig=this.mobileConfigObj,generalSettings=mobileConfig.getGeneralSettings(),items=[];items.push(newEditItem.call(this,$DESC(8367,"Network Timeout (seconds)"),STYLE_NUMBER,generalSettings,"nt",{limits:{min:0,max:9999}}));items.push(newEditItem.call(this,$DESC(7840,"Maximum Columns in Grid"),STYLE_NUMBER,generalSettings,"mgc",{limits:{min:0,max:9999}}));if(generalSettings.usd){var diagnosticMode=newCheckItem.call(this,$DESC(8760,"Diagnostic Mode"),$DESC(9450,"Store a log file in the device"),{b:mobileConfig.getDiagnosticMode()},"b",true,false);diagnosticMode.fn=function(value){mobileConfig.setDiagnosticMode(value);this.v=value;};items.push(diagnosticMode);}var monitor=newCheckItem.call(this,$DESC(9471,"Monitor Network Status"),$DESC(9790,"Notify the user when connection quality is below optimal"),generalSettings,"mns",true,false);var fn=function(value){mstrMobileApp.setNetworkMonitoringEnabled(value);};monitor.fn=mstrmojo.func.composite([fn,monitor.fn]);if(generalSettings.mns===undefined){monitor.v=true;}items.push(monitor);items.push(newHeader($DESC(8361,"Mobile Server Default")));items=items.concat(newAuthenticationItems.call(this,TYPE_SERVER_CREDS,this.mobileConfigObj.getDefaultServerCreds()));if(generalSettings.usc){items.push(newHeader($DESC(8368,"Caching")));items.push(newListItem.call(this,$DESC(8369,"Memory limit"),generalSettings,"ml",MEMORY_LIMIT_LIST));items.push(newCheckItem.call(this,$DESC(8370,"Folder caching"),$DESC(9451,"Store folders information for offline analysis"),generalSettings,"fc",true,false));items.push(newCheckItem.call(this,$DESC(8371,"Clear cache when closed"),$DESC(9452,"Delete reports and documents information after exiting the app"),generalSettings,"cc",2,1));}items.push(newHeader($DESC(8459,"Certificates")));if(generalSettings.ucs!==undefined&&generalSettings.ucs!==""&&generalSettings.ucs){var hasCert=mstrMobileApp.hasCertificate(),certItem,getCertItem;certItem=newViewItem.call(this,"Device Certificate","",getCertificateDetailsView,{fnPress:showPopupDeleteCertificate,hidden:!hasCert});getCertItem=newViewItem.call(this,"Get Certificate","",getCertificateAuthenticationFieldsView,{hidden:hasCert,dependents:[certItem]});certItem.dependents=[getCertItem];items.push(certItem);items.push(getCertItem);}items.push(newViewItem.call(this,$DESC(8447,"Trusted Certificates"),"",getTrustedCertificatesView,{hidden:false}));if(mstrMobileApp.isDPCEnabled()){items.push(newHeader($DESC(9481,"Device Passcode")));items.push(newItem.call(this,$DESC(1905,"Reset"),"",STYLE_BUTTON,{fn:function(){mstrMobileApp.resetDPC();}}));}items.push(newHeader($DESC(9791,"Background Syncing")));items=items.concat(getBackgroundSyncingItems.call(this));return{title:item.nm,items:addTabletHeader.call(this,items,item.nm),cfg:{type:TYPE_GENERAL,fnVal:validateGeneralSettingsChanges,item:item}};}function getMobileServersView(item){var config=this.mobileConfigObj,servers=config.getWebServersList(),items=[];$ARR.forEach(servers,function(server,idx){items.push(newViewItem.call(this,server.nm,"",getEditServerView,{idx:idx,fnPress:showPopup}));},this);return{title:item.nm,items:addTabletHeader.call(this,items,item.nm),cfg:{type:TYPE_SERVERS,item:item}};}function getHomeSettingsView(){var items=[newViewItem.call(this,$DESC(6560,"General Settings"),"",getGeneralSettingsView),newViewItem.call(this,$DESC(8375,"Mobile Servers"),"",getMobileServersView)];if(mstrApp.isTablet()){items.push(newViewItem.call(this,$DESC(1142,"About"),"",getAboutView));}return{title:$DESC(7831,"Settings"),items:items,cfg:{type:TYPE_HOME,isHome:true}};}function saveChanges(cfg,doSave){var type=cfg.type,modifications=MODIFIED_ITEMS[cfg.type];if(modifications){var fnValidate=cfg.fnVal;if(fnValidate){fnValidate.call(this,cfg,modifications);}if(doSave){this.mobileConfigObj.saveConfiguration();}delete MODIFIED_ITEMS[type];}}var $CTRL=mstrmojo.android.controllers.SettingsController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.SettingsController",connectivityChanged:false,init:function(props){this._super(props);this.mobileConfigObj=this.mobileConfigObj||mstrApp.getConfiguration();},start:function(params){var viewFn=params.viewFn;this._super(params);mstrApp.cancelPending();this._viewInfos=[];var view=this.view=this.newView("Settings");this.rootCtrl.updateContent(view,$DESC(7831,"Settings"));generateView.call(this,(viewFn&&eval("("+viewFn+")"))||getHomeSettingsView);},getDefaultMenus:function getDefaultMenus(){return MENUS.HELP;},updateActionToolbar:function updateActionToolbar(tbCfg){var cfg=getCurrentConfig.call(this),cfgType=cfg&&cfg.type,deleteDescId=DELETE_TXT[cfgType],addDescId=ADD_TXT[cfgType];if(addDescId){var menuId=MENU_ADD_SERVER,iconId=19;if(cfgType===TYPE_EDIT_SERVER){menuId=MENU_ADD_PROJECT;iconId=20;}tbCfg.addToolbarBtn(menuId,$DESC(9446,"Add #").replace("#",$DESC(addDescId,"Item")),menuId,true,iconId);}if(deleteDescId){tbCfg.addMenuItem(MENU_DELETE,$DESC(8379,"Delete #").replace("#",$DESC(deleteDescId,"Item")),MENU_DELETE,true,16);}if(!mstrApp.isTablet()&&cfgType!==TYPE_ABOUT&&cfgType!==TYPE_LEGAL){tbCfg.addMenuItem(MENU_ABOUT,$DESC(1142,"About"),MENU_ABOUT,true,21);}return this._super(tbCfg);},handleMenuItem:function handleMenuItem(group,cmdId){var cfg=getCurrentConfig.call(this),type=cfg.type,servers=this.mobileConfigObj.getWebServersList(),isServer=(type===TYPE_EDIT_SERVER);switch(group){case MENU_ABOUT:cacheViewState.call(this,-1);generateView.call(this,getAboutView);break;case MENU_ADD_SERVER:case MENU_ADD_PROJECT:cacheViewState.call(this,-1);if(group===MENU_ADD_SERVER){generateView.call(this,getEditServerView,{nm:$DESC(9447,"New Server"),idx:servers.length});}else{var server=servers[cfg.item.idx];generateView.call(this,getEditProjectView,{nm:$DESC(9448,"New Project"),idx:(server&&server.pl.length)||0});}break;case MENU_DELETE:var collection;if(isServer){collection=servers;}else{if(type===TYPE_EDIT_PROJECT){var idx=cfg.parent.idx;collection=servers[idx]&&servers[idx].pl;}}if(collection){var me=this,item=collection[cfg.idx];var okFn=function(){collection.splice(cfg.idx,1);me.mobileConfigObj.reconcileHomescreen();me.mobileConfigObj.saveConfiguration();me.view.getList(cfg.isHome).set("items",cfg.parent.fnRedraw.call(me,cfg.parent.item).items);me.goBack();me.connectivityChanged=true;};if(item){confirmDelete(item.nm||item.pn,okFn);}else{okFn();}}else{this.goBack();}return false;}return this._super(group,cmdId);},goBack:function goBack(){if(this._super()){return true;}var currentConfig=getCurrentConfig.call(this);saveChanges.call(this,currentConfig,true);var viewInfos=this._viewInfos;viewInfos.pop();if(currentConfig.type===TYPE_EDIT_SERVER&&mstrApp.deviceType===3&&this.mobileConfigObj.getWebServersList().length===0){viewInfos.pop();}var current=getLastViewInfo.call(this);if(!current||(mstrApp.isTablet()&&viewInfos.length===1)){if(this.connectivityChanged){this.rootCtrl.restart();return true;}return false;}showCurrentView.call(this);return true;},goUp:function goUp(){if(!this._super()){$ARR.forEach(this._viewInfos,function(view){saveChanges.call(this,view.cfg);},this);this.mobileConfigObj.saveConfiguration();this.rootCtrl[(this.connectivityChanged)?"restart":"goHome"]();}return true;},jumpTo:function jumpTo(idx,showView){var viewInfos=this._viewInfos,targetIdx=idx+1;$ARR.forEach(viewInfos,function(view,vIdx){if(vIdx>targetIdx){saveChanges.call(this,view.cfg);}},this);viewInfos.splice(targetIdx);if(showView){showCurrentView.call(this);}}});$CTRL.STYLES={HEADER:STYLE_HEADER,BUTTON:STYLE_BUTTON,VIEW_BUTTON:STYLE_VIEW_BUTTON,TEXT:STYLE_TEXT,LIST:STYLE_LIST,CHECK:STYLE_CHECK,IMAGE:STYLE_IMAGE,TEXT_AREA:STYLE_TEXT_AREA,NUMBER:STYLE_NUMBER,TIME:STYLE_TIME};}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.date","mstrmojo.locales","mstrmojo.hash");mstrmojo.requiresDescs(8391,8392);function F(M){var J=M.st;if(J===2048||J==="Project"){return undefined;}var K=mstrMobileApp.getCachedTime(M.sub_id||M.did,(M.sub_id)?-1:J,M.projectID||M.pid||""),L;if(K>0){var P=mstrmojo.date,O=mstrmojo.locales.datetime,N=P.getDateJson(new Date(parseInt(K,10)));L=P.formatDateInfo(N,O.DATEOUTPUTFORMAT)+" "+P.formatTimeInfo(N,O.TIMEOUTPUTFORMAT);}return mstrmojo.desc(8391,"Cached On:")+" "+(L||mstrmojo.desc(8392,"Not available"));}function I(K){var J=K.item;if(J){K=mstrmojo.hash.copy(K,{desc:J.desc||"",ttl:J.n||J.ttl||"",cached:F(J),did:J.did,st:J.st});}this.view.updateView(K);}mstrmojo.android.controllers.PropertiesController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.PropertiesController",doNotRefresh:true,start:function A(K){this._super(K);var J=this.view=mstrApp.viewFactory.newView("Properties",{controller:this});this.rootCtrl.updateProperties(J,"Properties");I.call(this,K);},updateItemProperties:function E(M,K,J,L){I.call(this,{defaultMsg:M,item:K,ctrlId:J,avail:L});},extractView:function D(){var J=this.view;J.parent.removeChildren(J);J.unrender();return J;},afterViewVisible:function B(){this.view.afterViewVisible();this._super();},restoreView:function C(J){J.unrender();this.rootCtrl.updateProperties(J);},makeCurrent:function H(J){this._super(J);this.rootCtrl.updateProperties(this.view,"Properties");},goUp:function G(){if(!this._super()){this.rootCtrl.goBack();}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.func","mstrmojo.hash");mstrmojo.requiresDescs(9478,9479,9753);var P=mstrmojo.hash,A=1,E=2,O;mstrmojo.android.controllers.TransactionNotificationController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.TransactionNotificationController",widgetMap:null,boardOpen:null,init:function R(Y){this._super(Y);var X=this.widgetMap={},W=this.boardModel=this.model.getBoardModel();if(!this._txListener){this._txListener=W.attachEventListener("recordChanged",this.id,function(Z){P.forEach(X,function(b,a){if(!Z.data||!Z.data[a]){b.set("txData",null);delete X[a];}});if(this.isNotificationBoardOpen()){this.pendingUpdate=true;}else{this.generateActionToolbar();}});}},start:function G(X){this._super(X);var W=this.view=mstrApp.viewFactory.newView("Transactions",{model:this.boardModel,context:X.context,controller:this});O=mstrmojo.desc(9753,"Transactions");this.rootCtrl.updateTransactions(W,O);},destroy:function S(W){var X=this._txListener;if(X){X.clear();}this._super(W);},hasTransactionQueue:function L(X){var W=this.model.hasOfflineTransactions();if(W&&X){W=this.boardModel.getOfflineRecords(X);}return W;},hasPendingTransactions:function N(X){var W=this.boardModel.getOfflineRecords(X);return(W&&W.pending&&W.pending.length);},showNotificationBoard:function C(a,Y,Z){var W={},X=E;if(Y){W={context:{id:Y,n:Z||a.ttl}};X=A;}this.boardOpen=X;this.contextController=a;a.spawn(this,W);},isNotificationBoardOpen:function D(){return !!this.boardOpen;},isAllTransactionLevel:function H(){return(this.boardOpen===E);},editTransactionRecord:function I(Y,X,W,b){var Z=this.boardModel,a=this.id;this.model.editTransactionRecord(Y,X,W,mstrmojo.func.wrapMethods(b,{success:function(d){mstrmojo.all[a].startDocument(d,Y,Z.docsTx[Y]&&Z.docsTx[Y].p.pid);}}));},deleteTransactionRecord:function Q(a,X,W,b){b=b||{};var Y=b.success||mstrmojo.emptyFn,Z=this;b.success=function(f){var d=!Z.boardModel.getOfflineRecords();Y(f);var e=Z.boardOpen;if(e===E&&d){Z.goBack();}if((e===A&&d)||Z.model.emptyTransactionQueue){mstrmojo.toast(Z.model.emptyTransactionQueue?mstrmojo.desc(9478,"There are no more pending transactions"):mstrmojo.desc(9479,"There are no more pending transactions for the current document"));Z.goUp();}};this.model.deleteTransactionRecord(a,X,W,b);},startDocument:function B(Z,a,Y){Z.ifc=false;this.rootCtrl.closeTransactions(true);var W=this.contextController;if(W){if(W instanceof mstrmojo.android.controllers.ResultSetController){if(W.did===a){W.hasTxChanges=true;W.model.transactionUpdate(Z);W.setData(Z);W.getPageByTree(true);W.makeCurrent();return ;}}var X={action:"open",data:Z,documentID:a,hasTxChanges:true,st:14081};if(Y!==mstrApp.getCurrentProjectId()){X.projectID=Y;}W.spawn(mstrApp.controllerFactory.newController("Document",{st:14081}),X);}},detach:function U(){this._super();this.boardOpen=null;if(this.pendingUpdate){this.rootCtrl.getCurrent().generateActionToolbar();delete this.pendingUpdate;}},addWidgetListener:function K(X,W){this.widgetMap[X]=W;},goBack:function V(){if(this._super()){return true;}if(this.boardOpen!==E||!this.view.goBack()){this.rootCtrl.closeTransactions();}return true;},goUp:function M(){if(!this._super()){this.rootCtrl.closeTransactions();}return true;},makeCurrent:function F(W){this._super(W);this.rootCtrl.updateTransactions(this.view,O,W);},setOfflineRecords:function J(W){this.model.refresh();}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.hash","mstrmojo.array");mstrmojo.requiresDescs(8394);var H={FOLDER:1,RESULTSET:2,REPORTS:3,SETTINGS:4,SHAREDLIBRARY:5,SUBSCRIPTIONS:8,HELP:6};var W=1,Q=2,M=3,a=4;var U=mstrmojo.hash,P=mstrmojo.array;function f(){this.rootView.setUpStatus(this.getCurrent().getUpStatus());}function B(p,q){var o=p&&p.getHomeScreenType();if(!p||(o<W||o>a)){mstrmojo.err({name:"StartupError",message:p?"illegal default homescreen type, hsc="+o:"no device configuration found."});return false;}if(o>Q){var j=p.getHomeScreen(),k=j.pid,h=j.st;q.did=j.did;var s=j.systemFolder;if(s){q.systemFolder=s;}if(o===a){var l=j.oi;k=q.pid=l.pid;h=l.st;q.did=l.did;q.csp=!!j.csp;}else{q.projectID=k;U.copyProps(["promptsAnswerXML","elementsPromptAnswers","valuePromptAnswers","objectsPromptAnswers","reportViewMode"],j,q);if(parseInt(q.reportViewMode,10)===2){h=769;}}mstrApp.setCurrentProjectId(k);q.st=h;}this.initHomeScreen(o,q);}var d=mstrmojo.android.controllers.RootController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,null,{scriptClass:"mstrmojo.android.controllers.RootController",start:function G(){var h=mstrApp.getConfiguration(),j={hsc:true};this._lastOpened=P.filter(this._lastOpened,function(k){return !!h.getProject(k.projectID||k.pid);});B.call(this,h,j);},direct:function C(h){var j=new mstrmojo.MobileConfiguration({_cfg:h});mstrApp.closeAllDialogs();B.call(this,j,{});},restart:function X(){mstrApp.closeAllDialogs();var h=this.nextController;if(h){h.destroy();}this.start();},initHomeScreen:function I(h,j){this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(j.st),j),j);},initNav:function e(){var h=mstrApp.getConfiguration(),j=[{n:mstrmojo.desc(1873,"Home"),act:-1,fromNav:true}];if(h.isSubscriptionEnabled()){j.push({n:mstrmojo.desc(1089,"Subscriptions"),act:8,fromNav:true});}this.rootView.setNavigation(j,0);},updateLastOpened:function S(k){var j=this._lastOpened,h=mstrApp.getCurrentProjectId(),l;if(k){l=k.did||k.documentID||k.reportID||k.objectID;mstrmojo.array.forEach(j,function(p,o){if(p.xId===l&&p.projectID===h){j.splice(o,1);return false;}});}this.rootView.updateLastOpened(j);if(k){j=this._lastOpened=[U.copy(k,{projectID:h,xId:l})].concat(j);if(j.length>5){j.pop();}}},updateProperties:mstrmojo.emptyFn,updateFolder:function Y(j,k,h){f.call(this);},updatePrompts:function V(h,j){this.updateContent(h,j);},updateTransactions:mstrmojo.emptyFn,closeTransactions:mstrmojo.emptyFn,updateContent:function O(j,l,h){var k=this.rootView;if(l!==undefined&&this._lastTitle!==l){this._lastTitle=l;k.setTitle(l);k.clearNavigation();}if(j){k.setContent(j,h);}f.call(this);},contentUpdated:function K(h){this.rootView.contentUpdated(h);},restoreNavigation:function b(){this.rootView.restoreNavigation();},updateDisplayMessage:mstrmojo.emptyFn,setActionToolbarStatus:function J(h){this.rootView.setActionToolbarStatus(h);},getTitle:function L(){return this._lastTitle||"";},jumpTo:function R(h){var j=h.act;if(j){if(!h.fromNav){if(!this.rootView.hasNavigationItems()){this.initNav();}else{this.restoreNavigation();}this.rootView.selectNavigationItem(h);}if(j===-1){this.restart();}else{if(j===H.SHAREDLIBRARY){this.spawn(mstrApp.controllerFactory.newController("Projects",{hsc:true}));}else{if(j===H.SUBSCRIPTIONS){this.spawn(mstrApp.controllerFactory.newController("Subscriptions",{hsc:true}));}}}return ;}this._super(h);},goHome:function E(){mstrApp.closeAllDialogs();var h=this.nextController;if(h){h.makeHome();}},makeCurrent:mstrmojo.emptyFn,setActionToolbar:function N(j,h){this.rootView.setActionToolbar(j,h);},enterFullScreen:function Z(){this.rootView.enterFullScreen();},flashFullScreen:function g(){this.rootView.flashFullScreen();},exitFullScreen:function D(h,j){this.rootView.exitFullScreen(h);},cancelFlashFullScreen:function A(){return this.rootView.cancelFlashFullScreen();},onorientationChange:function F(h){this._super(h);this.rootView.reset();this.raiseEvent({name:"rootOrientationChange",isLandscape:!!this.orientation});}});d.EnumHSType={DEFAULT:W,CUSTOM:Q,RESULTSET:M,FOLDER:a};}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ViewController","mstrmojo.android.controllers._SupportsQueuedTransactions","mstrmojo.android.controllers._HasFolderView","mstrmojo.android.EnumMenuOptions","mstrmojo.publisher","mstrmojo.array");mstrmojo.requiresDescs(773,8386,8388);var P=mstrmojo.array,M=mstrmojo.desc,V=mstrmojo.android.EnumMenuOptions,W=V.REFRESH;function B(){var b=this._requests;return b[b.length-1];}function Z(f,e,g){var d=this,b=this.view;f.csp=this.csp;g=g||{};this.dataService.getData(f,{success:function(h){b.set("items",h.items);if(e){B.call(d).res=h;}else{d._requests.push({p:f,res:h});}var j=g.success;if(j){j.call(d,h);}},failure:function(h){d.viewFailed(h);},canceled:function(){var h=g.canceled;if(h){h.call(d);}}},e);}function S(b){var d=B.call(this);d.orientation=mstrApp.isLandscape();d.idx=b;d.origin=this.view.getScrollPos();d.hasState=true;}function I(){var b=this.view;if(b&&!mstrApp.isTablet()){b.clearSelect();}}function D(b){var e=b.st,d={ttl:b.n,st:e,did:b.did,ab:b.ab,rtf:b.rtf};this.spawn(mstrApp.controllerFactory.newController(this.getViewKey(e),d),d);}function K(f){if(!f.hasState){return ;}var d=this.view,g=(mstrApp.isTablet()&&f.orientation!==mstrApp.isLandscape()),b=f.idx,e={x:0,y:0};if(!g){e=f.origin;}d.restoreListState(b,e);d.items=f.res.items;d.refresh();if(g){d.scrollToItem(b);}}function Y(b){var g=this._requests;if(b!==undefined){if(g.length<=b+1){return false;}g.splice(b+1);}else{g.pop();}var e=B.call(this);if(!e){return false;}K.call(this,e);var d=this.rootCtrl,f=e.res;d.updateFolder(null,f.n);d.contentUpdated(2048);this.updatePropertiesMsg();return true;}mstrmojo.android.controllers.FolderController=mstrmojo.declare(mstrmojo.android.controllers.ViewController,[mstrmojo.android.controllers._SupportsQueuedTransactions,mstrmojo.android.controllers._HasFolderView],{scriptClass:"mstrmojo.android.controllers.FolderController",start:function H(d){this._super(d);this.ctrlType=2048;this.dataService=mstrApp.modelFactory.newDataService("Folder");this._requests=[];var b=this.initFolderView();Z.call(this,d,false,{success:function(f){if(d.systemFolder===7){f.n=d.n||d.txt;}var e=this.rootCtrl;e.updateFolder(this.view,f.n);if(this.hsc&&!mstrApp.isTablet()){e.updateContent(null,f.n);}this.updatePropertiesMsg();},canceled:function(){this.prevController&&this.prevController.makeCurrent();}});},openFolder:function N(b){S.call(this,b._renderIdx);this.view.resetListState();Z.call(this,b,false,{success:function(e){var d=this.rootCtrl;d.updateFolder(null,e.n);d.contentUpdated(2048);this.updatePropertiesMsg();},canceled:I});},openItem:function C(b){S.call(this,b._renderIdx);D.call(this,b);},itemLongPressed:function J(b){S.call(this,b._renderIdx);return this._super(b);},getDefaultMenus:function O(){return V.SETTINGS+V.HELP+V.LEARN;},getDefaultMessage:function U(){var b=this.view.items;return(b&&b.length)?M(8386,"Select a report, document or folder to view its content"):M(8388,"No items in folder");},makeCurrent:function G(b){this._super(b);var d=B.call(this);if(d){var e=(this.hsc&&mstrApp.isTablet())?undefined:d.res.n;this.rootCtrl.updateFolder(this.view,e,b);K.call(this,d);}},makeHome:function R(){this._super();Y.call(this,0);},goBack:function a(){if(this._super()){return true;}return Y.call(this);},goUp:function L(){if(!this._super()){if(this._requests.length>1){Y.call(this,0);}else{this.rootCtrl.goBack();}}return true;},getUpStatus:function X(){if(!this._super()){var b=this._requests;return !!(b&&b.length>1);}return true;},updateActionToolbar:function Q(b){this.getTxnToolbarButton(b);if(mstrMobileApp.isOnline()){b.addMenuItem(W,M(773,"Refresh"),W,true,5);}return this._super(b);},handleMenuItem:function A(d,b){if(d===W){Z.call(this,B.call(this).p,true,{success:function(){this.view._scroller.scrollTo(0,0);}});return false;}return this._super(d,b);},getPath:function E(){var b=[],d=this.id;P.forEach(this._requests,function(g,e){var f=g.res;b.push({n:f.n,fn:function(){Y.call(mstrmojo.all[d],e);}});});return b;},goHome:function F(){Y.call(this,0);}});}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz","mstrmojo.hash");mstrmojo.CheckList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.CheckList",inputType:"checkbox",cssClass:"mstrmojo-CheckList",itemCssClass:"mstrmojo-CheckList-item"});mstrmojo.requiresCls("mstrmojo._InputListHoriz");mstrmojo.CheckListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.CheckListHoriz",inputType:"checkbox",cssClass:"mstrmojo-CheckListHoriz",itemCssClass:"mstrmojo-CheckListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.menus.MenuEditor");mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function D(E){this._super(E);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function C(){return new mstrmojo.ui.menus.MenuEditor({popupConfig:this});},destroy:function B(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var B=mstrmojo.array,X="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasToggleItem:false,hasMenuItems:function S(){var Y=B.filter(this.menus||[],function(Z){return Z.cls!==X;});return !!Y.length;},getMenuItems:function F(Y){var a=B.filter(this.menus.slice().reverse(),function(f,e,d){var b=d[e+1];return Y||f.cls!==X||(e&&b&&b.cls!==X);}).reverse();var Z=(a&&a.length)||0;if(!Y&&Z>0&&a[Z-1].cls===X){a.pop();}return a;},getMenuItem:function D(b){var a=this.menus,Y;if(a!==null){for(Y=0;Y<a.length;Y++){var Z=a[Y];if(Z.cls===b){return Z;}}}return null;},absorbMenuItems:function V(Y){this.menus=this.menus.concat(Y.menus);if(!this.hasToggleItem&&Y.hasToggleItem){this.hasToggleItem=true;}},addMenuItem:function K(g,b,e,Z,d){var f,a,Y;if(!g||typeof g==="string"){f=g;}else{f=g.n;a=g.ttp;}Y={n:f,ttp:a,cls:b,fn:e,ctxt:Z};if(isNaN(d)||d>=this.menus.length){this.menus.push(Y);}else{this.menus.splice(d,0,Y);}if(b.indexOf(/\bon\b/)>-1){this.hasToggleItem=true;}return Y;},addCustomMenuItem:function W(e,a,d,Z,Y){var b=this.addMenuItem(e,a,d,Y);b.getItemMarkup=Z;return b;},addDisabledMenuItem:function Q(Z,Y){this.addNonInteractiveMenuItem(Z,Y,true);},addNonInteractiveMenuItem:function O(d,Z,Y){var a=["non-int"];if(Z){a.push(Z);}if(Y){a.push("disabled");}if(d&&typeof d!=="string"&&d.ttp){this.useTooltip=true;}var b=this.addMenuItem(d,a.join(" "),mstrmojo.emptyFn);b.dsbld=true;},addSeparator:function E(){this.addMenuItem("",X,function(){return false;});},addPopupMenuItem:function U(g,a,f,b,Z,d){var e=["pop "];if(b){e.push(b);}var Y=this.addMenuItem(g,e.join(" "),f,Z,d);Y.pop=true;Y.scope=a;return Y;},addActionPopupMenuItem:function N(g,Z,e,f,a,Y,d){var b=this.addPopupMenuItem(g,Z,f,(a||"")+" ax",Y,d);b.actionFn=e;b.ax=true;},addSubMenuItem:function M(d,a,Z,b,Y){this.addPopupMenuItem(d,Z,b,a,Y);},addEditorMenuItem:function R(d,Z,b,Y,a){this.addPopupMenuItem(d,Z,b,"",Y,a);},getToggleItemStates:function G(h,k,Y,f,a,e){var b,d,Z,g;if(typeof h==="string"){b=d=h;Z=g="";}else{b=h.on||"";d=h.off||"";Z=h.ttpOn||"";g=h.ttpOff||"";}var j=[{n:b,ttp:Z,cls:k+" on",fn:f,ctxt:e},{n:d,ttp:g,cls:k,fn:Y,ctxt:e}];if(!a){j.reverse();}return j;},addToggleMenuItem:function L(g,b,e,a,Z,f,Y){var d=this.getToggleItemStates(g,b,e,a,f,Y);this.hasToggleItem=true;return this.addDualStateItem(Z,d[0],d[1]);},addDualStateItem:function I(Z,Y,a){return this.addMenuItem({n:Y.n,ttp:Y.ttp},Y.cls,this.getDualStateHandler(Z,Y,a),Y.ctxt);},getDualStateHandler:function J(Z,Y,a){return function(d,e){var b=[Y,a];if(d.cls===Y.cls){b.reverse();}b[1].fn.call(mstrmojo.all[Z],d,e);d.n=b[0].n;d.ttp=b[0].ttp;d.cls=b[0].cls;};},addRadioMenuGroup:function C(a,g,b,Z,Y,f,e){var d=[];this.hasToggleItem=true;b.forEach(function(l,h){if(l.separator){this.addSeparator();return ;}var p=l.text,o=(Z||"")+" "+(l.cls||"")+(f?"":" radio")+(l.value===a?" on":""),k=function(){if(g.call(this.ctxt,l.value,a,l)===false){return false;}a=l.value;d.forEach(function(q){q.cls=q.cls.replace(/ on$/,"")+(q.radioValue===a?" on":"");});return true;},j=e?this.addCustomMenuItem(p,o,k,e(l,h),Y):this.addMenuItem(p,o,k,Y);j.radioValue=l.value;d.push(j);},this);},clear:function P(){this._super();this.menus=[];},newInstance:function A(Y){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},Y));},addMenuTitle:function H(Y){this.addMenuItem(Y||"","menu-item-title",mstrmojo.emptyFn);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasTooltip","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.string","mstrmojo.css","mstrmojo.array","mstrmojo._CanAutoClose");var U=mstrmojo.css,L=mstrmojo.array,F=mstrmojo.dom,B=mstrmojo.string;function H(W){this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-C",content:B.encodeHtmlString(W)});}mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,onSelectedItemChange:mstrmojo.emptyFn,useRichTooltip:true,allowHTML:false,useDarkTheme:false,init:function P(W){this._super(W);U.addWidgetCssClass(this.getPopupList(),"ctrl-popup-list");},initChildren:function C(){this.children=this.getPopupListConfig();this._super();},postBuildRendering:function Q(){if(this._super){this._super();}var W=this.getSelectedItem();if(W){H.call(this,W.n);}},showTooltip:function D(a,Z){var X=this.selectedNode,Y=this.richTooltip;if(X.offsetWidth>=X.scrollWidth){return ;}if(!Y.top){var W=F.position(this.selectedNode);Y.top=W.y-3;Y.left=W.x+W.w+6;}if(this._super){this._super(a,Z);}},getSelectedItem:function M(){var W=this.items;return W&&W[this.selectedIndex];},selectItemByField:function A(X,W){this.set("selectedIndex",L.find(this.items||[],X,W));},getPopupWidget:function E(){return this.list;},getPopupList:function J(){return this.list;},_set_items:function I(Z,W){var Y=this.items;this.items=W;delete this.selectedIndex;if(Y!==W){var X=this.hasRendered;if(X){this.refresh();}return true;}return false;},onclick:function V(W){this._super(W);var Y=this,X=Y.getPopupWidget();Y.mw=Y.mw||function(Z){if(!F.contains(X.domNode,F.eventTarget(self,Z),true,document.body)){X.close();F.detachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Y.mw);}};F.attachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Y.mw);if(Y.focusOnPopup){X.domNode.focus();}},_set_selectedIndex:function N(e,a,Y){if((a!==0&&!a)||a<0){return false;}var X=this.selectedIndex=a,W=this.getPopupList(),Z=W&&W.items,d=Z&&Z[X],b=this.selectedNode;if(d&&d.dsbld){return false;}if(W){mstrmojo._ListSelections._set_selectedIndex.call(W,"selectedIndex",X,Y);}if(b&&Z&&Z[X]){b.innerHTML=this.getPulldownTextInnerHTML(Z[X]);b.title=Z[X].title||"";}if(Z&&Z[X]){if(this.focusOnPopup&&W&&!W.closeAfterSelection){W.itemsContainerNode.children[X].style.color="";}else{this.onitemSelected(Z[X],X);}}return true;},getPulldownTextInnerHTML:function G(W){return this.allowHTML?W.n:B.encodeHtmlString(W.n,true);},postselectedIndexChange:function O(W){var a=W.value,Y=W.valueWas;if(a!==Y){var X=this.items,Z=X[a];if(Z){H.call(this,Z.n);}this.onSelectedItemChange(Z,X[Y]);}},getPopupConfig:function K(){var W=this._super();W.useDarkTheme=this.useDarkTheme;return W;},getPopupListConfig:function S(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,useRichTooltip:true,showTooltipForLargeText:true,scrollNodeMaxHeight:this.scrollNodeMaxHeight,listHooks:{select:function W(a,b,Z){this.parent.set("selectedIndex",Z);if(this.visible&&this.closeAfterSelection&&!this.selectedItem.dsbld){this.close();}}},getItemProps:function X(b,Z){var a=mstrmojo._IsList.getItemProps.call(this,b,Z);a.style=this.parent.itemCssText||"";return a;},suppressClose:function Y(Z){return mstrmojo._CanAutoClose.suppressClose.call(this,Z)||F.contains(this.parent.domNode,Z,true,document.body);}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function R(X,b,W,a,Z){a=a||{};a.items=X;var Y;if(Z===true){Y=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:W||0},a);}else{Y=new mstrmojo.ui.Pulldown(a);if(W!==undefined){Y.set("selectedIndex",W);}}Y.onSelectedItemChange=b||mstrmojo.emptyFn;return Y;};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.MobileGraph","mstrmojo.graph._CanvasGraph");mstrmojo.graph.MobileXtabCanvasGraph=mstrmojo.declare(mstrmojo.MobileGraph,[mstrmojo.graph._CanvasGraph],{scriptClass:"mstrmojo.graph.MobileXtabCanvasGraph"});}());(function(){mstrmojo.requiresCls("mstrmojo.Slider","mstrmojo.MetricSelectorUtility","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.array","mstrmojo._FormatDefinition.NumberFormatCategory","mstrmojo.hash");mstrmojo.requiresDescs(8153,8154,8155,8156,8157,8158,8159,8160,8161,8162,8163,8164,8165,8166,8167,8168,8169,8170,7839,587,2204,2202,2203,7576,7575,7622);var V=mstrmojo.dom,N=mstrmojo.hash,S=mstrmojo.MetricSelectorUtility,l=mstrmojo._FormatDefinition.NumberFormatCategory,J=mstrmojo.desc,W=mstrmojo.css,Y=mstrmojo.num,B=Math,d=B.max,H=B.min,f=B.floor,X=B.round,a=9;function M(AG,AF,AD,AC){var AE="px",w=AG._length,t=AG.handleSize,s=AG.orCfg,AK=s.posCssP,x=s.lenCssP,z=false;AD=d(AD,-1);AC=H(AC+a,w);if(AD>AC){z=true;}var AH=H(AD,AC),AI=d(AD,AC),AJ=AI-AH-(z?0:t+a),AA=d(w-AI,0);if(AG.hasRendered){AF.handle1Node.style[AK]=AD+AE;AF.handle2Node.style[AK]=(AC-a)+AE;var q=AF.lowerRange.style,AB=AF.thumbNode.style,u=AF.upperRange.style;q[AK]=0;AB[AK]=(AH+(z?0:t))+AE;u[AK]=(AI+t-a)+AE;q[x]=d(AH,0)+AE;AB[x]=AJ+AE;u[x]=AA+AE;}else{AE+=";";AK+=":";x+=":";AG.handle1CssText=AK+AD+AE;AG.handel2CssText=AK+(AC-a)+AE;AG.lowerRangeCssText=x+d(AH,0)+AE;AG.thumbCssText=AK+(AH+t)+AE+x+AJ+AE;AG.upperRangeCssText=AK+(AI+t-a)+AE+x+AA+AE;}return{handle1:AD,handle2:AC};}function O(q){this.getUnit=function(){return q._length/d((q.items.length-1),1);};this.calcMinMax=function(u,t){var w=q.unit;return{min:f(u/w+0.5),max:f(t/w+0.5)};};this.calcPxIdx=function(t){return f(t/q.unit+0.5);};this.getStep=function(){var u=q.high-q.low,t=parseInt(q.numFmts.cat,10),w=(t===4)?2:(t===5)?4:0;u=(u===0)?1:u;if(u>1){return(u>(q._length-2))?Number(Number(u/(q._length-2)).toFixed(q.numFmts.dp+w)):1;}return u/(q._length-2);};this.getIdx=function(t){return H(d(X((t-q.low)/q.step),0),q.items.length-1);};this.initialMetricSlider=function s(){var z=function(AL){return AL!==undefined&&AL!==null;},w=function(AL){return(z(AL.da)&&z(AL.da.low)&&z(AL.da.high)&&z(AL.da.cnt)&&z(AL.f)&&z(AL.ft)&&z(AL.qua));},u=function(AL){var AP=true,AO=true,AM=parseInt(AL.ft,10),AN=parseInt(AL.f,10);if(AM===S._GENERIC){AP=AN!==S.FN.ISNULL&&AN!==S.FN.ISNOTNULL&&AN!==S.FN.NOTIN&&AN!==S.FN.IN;}else{if(AM===S._PERCENT||AM===S._RANK){AO=AN!==S.MRPFN.INASCENDING&&AN!==S.MRPFN.INDESCENDING&&AN!==S.MRPFN.NOTINDESCENDING&&AN!==S.MRPFN.NOTINASCENDING;}}return !AP||!AO;},AI=0;q.include=q.parent.include;q.clsType="scm ";q.staticStatus=!(z(q.da)&&z(q.da.low)&&z(q.da.high)&&z(q.da.cnt)&&z(q.qua));if(q.staticStatus){q.da.low=1;q.da.high=7;q.ft=S._GENERIC;q.f=S.FN.BETWEEN;q.qua=S.Q._G;q.cs=[{n:"",v:1},{n:"",v:7}];q.numFmts={cat:9,dp:0,fm:""};}switch(q.qua){case 0:var AH=parseInt(q.numFmts.cat,10);AI=AH===4?2:AH===5?4:0;q.low=Number(Number(q.da.low).toFixed(q.numFmts.dp+AI));q.high=Number(Number(q.da.high).toFixed(q.numFmts.dp+AI));break;case 1:case 2:q.low=1;q.high=q.da.cnt;break;case 3:case 4:q.low=0;q.high=100;break;}var AK=!q.staticStatus&&!q.da.nov;q.set("lowText",AK?q.formatNumber(q.low):"");q.set("highText",AK?q.formatNumber(q.high):"");q.step=(q.qua===1||q.qua===2)?1:this.getStep();q.cs1Vl=q.low;q.cs2Vl=q.high;var x=q.low,AE=q.high,AJ=[],AG=0;if(z(x)&&z(AE)){var AB=x,AD;for(AD=0;AB<=AE;AD++,AB+=q.step){AJ[AD]={n:S.formatNumber(q.qua,AB,q.numFmts),v:Number(Number(AB).toFixed(q.numFmts.dp+AI))};}AG=AJ.length;if(AG>0&&AJ[AG-1].v!==AE){AJ[AG-1]={n:S.formatNumber(q.qua,AE,q.numFmts),v:AE};}}q.items=AJ;var t=S.OP,AF=q.cs,AC=(AF&&AF.length>0)?Y.parseNumeric(String(AF[0].v).replace("%","")):x,AA=(AF&&AF.length>1)?Y.parseNumeric(String(AF[1].v).replace("%","")):AE;if(AC<q.low){q.frtUst=true;}if(AA>q.high){q.ndUst=true;}q.opId=(q.f!==null&&q.ft!==null)?S.getOpIdxByfunc(q.f,q.ft):t._BETWEEN;switch(q.opId){case t._EQUALS:case t._NOT_EQUALS:q.cs1Vl=q.cs2Vl=AC;break;case t._LESS_EQUAL:case t._GREATER:q.cs1Vl=x;q.cs2Vl=AC;break;case t._GREATER_EQUAL:case t._LESS:q.cs1Vl=AC;q.cs2Vl=AE;break;case t._IN:case t._NOT_IN:case t._IS_NULL:case t._IS_NOT_NULL:break;default:q.cs1Vl=AC;q.cs2Vl=AA;break;}q.cs1Idx=this.getIdx(q.cs1Vl);q.cs2Idx=this.getIdx(q.cs2Vl);q.cs1Nm=z(q.cs1Vl)?S.formatNumber(q.qua,q.cs1Vl,q.numFmts):q.items[q.cs1Idx].n;q.cs2Nm=z(q.cs2Vl)?S.formatNumber(q.qua,q.cs2Vl,q.numFmts):q.items[q.cs2Idx].n;q.unit=this.getUnit();q.set("unSet",(!w(q)||u(q)||(!q.cs||q.cs.length===0))&&!q.staticStatus);};this.updateOpCs=function(){var x=(q.cs1Vl>q.cs2Vl)?q.cs2Vl:q.cs1Vl,AD=(q.cs1Vl>q.cs2Vl)?q.cs1Vl:q.cs2Vl,w=q.low,AA=q.high,AC=q.include,t=S.OP,z=parseInt(q.qua,10),u=(z===S.Q._PT||z===S.Q._PB),AE,AB=[];if((x>=w&&AD<=AA)||x<w||AD>AA){q.opId=AC?t._BETWEEN:t._NOT_BETWEEN;}if(x===AD){q.opId=AC?t._EQUALS:t._NOT_EQUALS;}if(x===w&&AD<AA){q.opId=AC?t._LESS_EQUAL:t._GREATER;}if(x>w&&AD===AA){q.opId=AC?t._GREATER_EQUAL:t._LESS;}AE=w==x&&AD==AA;if(!AE){switch(q.opId){case t._BETWEEN:case t._NOT_BETWEEN:AB.push({dtp:5,v:Y.toLocaleString(x)+(u?"%":"")});case t._EQUALS:case t._NOT_EQUALS:AB.push({dtp:5,v:Y.toLocaleString(AD)+(u?"%":"")});break;default:if(x>w){AB.push({dtp:5,v:Y.toLocaleString(x)+(u?"%":"")});}if(AD<AA){AB.push({dtp:5,v:Y.toLocaleString(AD)+(u?"%":"")});}}}q.cs=AB;q.parent.node.data.cs=AB;q.set("unSet",AE);};this.updateThumb=function(){var t=q.cs1Idx,x=q.cs2Idx;if(t!==undefined&&x!==undefined){var u=q.unit,w=q.gap;N.copy(M(q,q,X(t*u-w),X(x*u-w)),q);}};this.joinConst=function(){var w=q.cs;if(w){var t=[],u;for(u in w){t.push(w[u].v);}return t.join(",");}};}var E="<span {@ttpCssText}>{@content}</span>";function D(){if(this.staticStatus){return null;}var u=this.ghost;if(!u){var z=this.containerNode.cloneNode(true),x=z.childNodes;W.addClass(z,["gh"]);u=this.ghost={containerNode:z,lowerRange:x[0],handle1Node:x[1],thumbNode:x[2],handle2Node:x[3],upperRange:x[4]};this.sdcNode.appendChild(z);}var s=this.orCfg,q=s.posCssP,t=s.lenCssP,w=this.id;mstrmojo.array.forEach(["lowerRange","containerNode","thumbNode","upperRange"],function(AE,AA){var AD=mstrmojo.all[w],AC=AD[AE].style,AB=u[AE].style;if(AA){AB[q]=AC[q];}AB[t]=AC[t];});u.containerNode.style.display="block";return u;}mstrmojo.MetricSlider=mstrmojo.declare(mstrmojo.Slider,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricSlider",markupString:'<div><div class="mstrmojo-Slider-summary"></div><div class="mstrmojo-Slider {@cssClass} {@clsType} {@clsOrientation}" style="{@cssText}" ><div class="cont" style=""><div class="sdc" style="position:absolute;{@sdcCssText}"><div class="sd" style="{@sdCssText}"><div class="bk left" style="{@lowerRangeCssText}"></div><div class="t1" style="{@handle1CssText}" mstrAttach:mouseover,mouseout,click></div><div class="t2 bk" style="{@thumbCssText}"></div><div class="t3" style="{@handel2CssText}" mstrAttach:mouseover,mouseout,click></div><div class="bk right" style="{@upperRangeCssText}"></div></div></div><div class="mstrmojo-Label" style="margin-top:9px;float:left;"></div><div class="mstrmojo-Label" style="margin-top:9px;float:right;"></div></div></div></div>',markupSlots:{summaryNode:function(){return this.domNode.childNodes[0];},sliderNode:function(){return this.domNode.childNodes[1];},dndNode:function(){return this.domNode.childNodes[1].childNodes[0];},sdcNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},containerNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0];},lowerRange:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0];},handle1Node:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[1];},thumbNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[2];},handle2Node:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[3];},upperRange:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[4];},tooltipNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},lowNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[1];},highNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[2];},editValueNode:function(){return this.domNode;}},markupMethods:{onlowTextChange:function(){this.lowNode.innerHTML=this.lowText||"";},onhighTextChange:function(){this.highNode.innerHTML=this.highText||"";},onfontChange:function(){this.lowNode.style.font=this.highNode.style.font=String(this.font);}},init:function h(q){this._super(q);this.handleSize=mstrmojo.MetricSlider.METRICSLIDERTHUMBWIDTH;this.clsType="scm";this.typeHelper=new O(this);this.useRichTooltip=false;},typeHelper:null,unSet:false,preBuildRendering:function A(){var u=this.orCfg,t=this.isHoriz;u.cPosCssP=t?"right":"bottom";u.cLenCssP=t?"height":"width";var z=u.lenCssP,x=this[z],w=parseInt(x,10),s=this.handleSize;var q=this._length=(isNaN(w))?0:(w-s-a);if(q<=0){q=this._length=mstrmojo.MetricSlider.METRICSLIDERDEFAULTWIDTH-s;}if(x){this.bkCssText=z+":"+d(w-(2*this.cssBkBW),0)+"px;";this.sdcCssText=u.posCssP+":"+a+"px;"+z+":"+q+"px;"+u.opPosCssP+":0px;";}this.typeHelper.initialMetricSlider();this.typeHelper.updateThumb();},postBuildRendering:function R(){this._super();if(!this.staticStatus&&!this.da.nov){var s=this.lowNode,q=parseInt(s.style.fontSize,10);if(isNaN(q)){s.style.fontSize=8*this.parent.model.getZoomFactor()+"pt";}this.updateSummary();}this.lowNode.style.marginLeft=a+"px";this.highNode.style.marginRight=a+"px";this.sliderNode.style.height="0px";},onmouseover:function G(q){this.showTooltip(q.e,self);},onmouseout:function g(q){this.hideTooltip(q.e,self);},summaryLabels:{db:J(8153,"Between ## and ###"),dnb:J(8154,"Not between ## and ###"),din:J(587,"In"),dnin:J(2204,"Not in"),dnull:J(2202,"Is Null"),dnnull:J(2203,"Is not Null"),req:J(8155,"Rank ="),rneq:J(8156,"Rank <>").replace("<>",String.fromCharCode(8800)),rexb:J(8157,"Rank exclude bottom"),rext:J(8158,"Rank exclude top"),rb:J(8159,"Rank bottom"),rt:J(8160,"Rank top"),rbt:J(8161,"Rank between ## and ###"),rnbt:J(8162,"Rank not between ## and ###"),rin:J(8163,"Rank in"),rnin:J(8164,"Rank not in"),peq:J(8165,"Percent ="),pneq:J(8166,"Percent <>").replace("<>",String.fromCharCode(8800)),pexb:J(8167,"Exclude bottom"),pext:J(8168,"Exclude top"),pb:J(7576,"Bottom"),pt:J(7575,"Top"),pbt:J(8153,"Between ## and ###"),pnbt:J(8154,"Not between ## and ###"),pin:J(8169,"Percent in"),pnin:J(8170,"Percent not in")},formatNumber:function j(z){var u=this,AD=Math.abs(z),AC=u.numFmts.cat,t=1000,AE=["K","M","B","T","P","E","Z","Y"],AA=AE.length,x;if(AD>=t&&(AC===l.Default||AC===l.Fixed||AC===l.General||AC===l.Currency)){for(x=0;x<AA;x++,t*=1000){if(AD<t*1000){var s=AD/t,w=(s*10).toFixed(0)%10>0?1:0,AB=s.toFixed(w)+AE[x];return z<0?"("+AB+")":AB;}}}return S.formatNumber(u.qua,z,u.numFmts);},updateSummary:function L(){if(this.summaryNode&&!this.staticStatus){var AL=this.f,u=this.ft,AK=S,AF=S.FN,t=S.MRPFN,AC="",AI=(this.cs1Vl<this.cs2Vl)?this.cs1Vl:this.cs2Vl,AG=(this.cs1Vl>this.cs2Vl)?this.cs1Vl:this.cs2Vl,AA=this.formatNumber(AI),z=this.formatNumber(AG),x=this.typeHelper,AB=this.summaryLabels,q=parseInt(u,10),w=parseInt(AL,10),AH=(q===AK._GENERIC&&(w===AF.ISNULL||w===AF.ISNOTNULL||w===AF.NOTIN||w===AF.IN))||((q===AK._PERCENT||q===AK._RANK)&&(w===t.INASCENDING||w===t.INDESCENDING||w===t.NOTINDESCENDING||w===t.NOTINASCENDING));if(this.unSet||AI<=this.low&&AG>=this.high&&this.include){AC=mstrmojo.desc(2058,"All");}if(!this.unSet||AH){switch(u){case AK._GENERIC:switch(AL){case AF.EQUALS:AC="= "+AA;break;case AF.NOTEQUALS:AC=String.fromCharCode(8800)+" "+AA;break;case AF.GREATERTHAN:AC="> "+z;break;case AF.GREATERTHANEQUALS:AC=String.fromCharCode(8805)+" "+AA;break;case AF.LESSTHAN:AC="< "+AA;break;case AF.LESSTHANEQUALS:AC=String.fromCharCode(8804)+" "+z;break;case AF.BETWEEN:AC=AA+" - "+z;break;case AF.NOTBETWEEN:AC=mstrmojo.desc(1099)+" "+AA+" - "+z;break;case AF.ISNULL:AC=AB.dnull;break;case AF.ISNOTNULL:AC=AB.dnnull;break;case AF.IN:AC=AB.din+" "+x.joinConst();break;case AF.NOTIN:AC=AB.dnin+" "+x.joinConst();break;}break;case AK._PERCENT:case AK._RANK:var AJ="r";if(parseInt(u,10)===AK._PERCENT){AJ="p";}switch(AL){case t.EQUALSDESCENDING:case t.EQUALSASCENDING:AC=AB[AJ+"eq"]+" "+AA;break;case t.NOTEQUALSDESCENDING:case t.NOTEQUALSASCENDING:AC=AB[AJ+"neq"]+" "+AA;break;case t.GREATERTHANEQUALSASCENDING:AC=AB[AJ+"exb"]+" "+AA;break;case t.GREATERTHANASCENDING:AC=AB[AJ+"exb"]+" "+z;break;case t.GREATERTHANEQUALSDESCENDING:AC=AB[AJ+"ext"]+" "+AA;break;case t.GREATERTHANDESCENDING:AC=AB[AJ+"ext"]+" "+z;break;case t.LESSTHANASCENDING:AC=AB[AJ+"b"]+" "+AA;break;case t.LESSTHANEQUALSASCENDING:AC=AB[AJ+"b"]+" "+z;break;case t.LESSTHANDESCENDING:AC=AB[AJ+"t"]+" "+AA;break;case t.LESSTHANEQUALSDESCENDING:AC=AB[AJ+"t"]+" "+z;break;case t.BETWEENDESCENDING:case t.BETWEENASCENDING:AC=AB[AJ+"bt"].replace("##",AA).replace("###",z);break;case t.NOTBETWEENASCENDING:case t.NOTBETWEENDESCENDING:AC=AB[AJ+"nbt"].replace("##",AA).replace("###",z);break;case t.INASCENDING:case t.INDESCENDING:AC=AB[AJ+"in"]+" "+x.joinConst();break;case t.NOTINDESCENDING:case t.NOTINASCENDING:AC="";AC=AB[AJ+"nin"]+" "+x.joinConst();break;}break;}}var AD=this.summaryNode,AE=(AC!=="")?"":0;AD.innerHTML=AC;AD.style.margin=AE;}},getClientHeight:function U(){return this.dndNode.clientHeight+this.summaryNode.clientHeight+15;},initDrag:function o(w,q){if(!this.staticStatus&&!this.da.nov){q=q||window;var x=V.eventTarget(q,this.dnd.startE);if(x===this.handle1Node||x===this.handle2Node){var u=D.call(this),s=this.orCfg,t=this.dnd;t.initD={handle1:parseFloat(this.handle1,10),handle2:parseFloat(this.handle2,10)-a,length:this._length,contL:u.containerNode[s.lenP],offset:V.getMousePosition(this.dnd.startE,q)[s.offsetP]};t.initD.td=x;W.removeClass(this.domNode.childNodes[1],["invalid"]);}}},ondrag:function K(z,x){if(!this.staticStatus){x=x||window;var AB=this.dnd.initD;if(AB){var AH=this.ghost,AI=AB.handle1,u=AB.handle2,w=this.cs1Idx,t=this.cs2Idx,AF=this.unit,AD=this.gap,s=AB.length;var AE=V.getMousePosition(z,x)[this.orCfg.offsetP]-AB.offset;switch(AB.td){case this.handle1Node:AI=d(H(d(AB.handle1+AE,0),s)-AD,-1);w=d(f(AI/AF+0.5),0);break;case this.handle2Node:u=d(H(d(AB.handle2+AE,0),s)-AD,-1);t=d(B.ceil(u/AF+0.5),0);break;default:return ;}M(this,AH,AI,u);var AA=this.items,q=(AA&&AA.length)||0;if(q&&w>=0&&w<q&&t>=0&&t<q){var AG=false,AC;if(w!==this.cs1Idx){this.cs1Idx=w;AC=this.items[w];this.cs1Vl=AC.v;this.cs1Nm=AC.n;AG=true;}if(t!==this.cs2Idx){this.cs2Idx=t;AC=this.items[t];this.cs2Vl=AC.v;this.cs2Nm=AC.n;AG=true;}if(AG){this.typeHelper.updateThumb();this._updateTooltip(AB.td);}}}}},ondrop:function Z(s){if(!this.staticStatus&&!this.da.nov){this.typeHelper.updateThumb();var q=this.ghost;if(q){q.containerNode.style.display="none";}this.hideTooltip(s,self);var t=this.dnd&&this.dnd.initD;if(this.makeSelection&&t){this.makeSelection({selItem:t.td});}if(this.items&&this.items.length&&this.ghost){this[(V.eventTarget(self,s)===this.ghost.handle1Node)?"frtUst":"ndUst"]=false;this.selectRange();}this.dnd.initD=null;}},selectRange:function Q(){var s=this.typeHelper,u=this.cs1Vl,t=this.cs2Vl,x=this.qua,w=this.numFmts;this.cs1Idx=s.getIdx(u);this.cs2Idx=s.getIdx(t);this.cs1Nm=S.formatNumber(x,u,w);this.cs2Nm=S.formatNumber(x,t,w);s.updateOpCs();this.onselectionChange();this.updateSummary();},onincludeChange:function C(){if(!this.staticStatus){this.changeInclude=true;this.selectRange();}},showTooltip:function p(s,q){var t=V.eventTarget(q,s);this._updateTooltip(t);mstrmojo.tooltip.open(this,s,q);},_updateTooltip:function P(w){if(N.walk("handle1Node",this.ghost)===w||N.walk("handle2Node",this.ghost)===w){return ;}var s=this.orCfg,u=s.posCssP,q,t={contentNodeCssClass:"scm-tooltip",refNode:this.domNode.childNodes[1],posType:this._tooltip_pos};t[s.opPosCssP]=-parseInt(this.font,10)/2;t[u]=w.style[u];q=String((w===this.handle1Node)?this.cs1Nm:this.cs2Nm);t.content=E.replace(/\{@content\}/g,q);this.set("richTooltip",t);},onclick:function b(q){if(!this.staticStatus&&!this.da.nov){var s=V.eventTarget(q.hWin||window,q.e);this.hideTooltip(q.e,self);this.dnd.initD={makeMetricSilderSelectionByClick:true,td:((s===this.handle1Node)?this.handle1Node:((s===this.handle2Node)?this.handle2Node:null))};this.openEditValue({isfrt:(s===this.handle1Node),tgt:s});if(this._onThumb){this._onThumb(q);}}},onselectionChange:function I(q){this._super(q);if(this.dnd.initD&&this.dnd.initD.makeMetricSilderSelectionByClick){this.dnd.initD=null;}},onquaChange:function e(q){var t=S.getFuncInfo(this.opId,q.valueWas),w=S.getFuncInfo(this.opId,q.value),s;if(t.ft!==w.ft){if(!this.staticStatus){this.items=[];this.cs=[];this.f=this.ft=null;this.refresh();s=true;}}else{this.f=S.getFuncInfo(this.opId,q.value).f;s=false;}this.unSet=s||this.unSet;this.changeQual=true;this.selectRange();},updateData:function F(q,s){this.da=q;this.updateExpr(s);},updateExpr:function k(q){if(q){this.cs=q.cs;this.f=q.f;this.ft=q.ft;this.qua=q.qua;}this.refresh();},editValueRef:{cssClass:"edvl",slot:"editValueNode",scriptClass:"mstrmojo.Popup",locksHover:true,onOpen:function(){if(this.tgt){this.set("left",H(d(parseInt(this.tgt.style.left,10),0),parseInt(this.opener.width,10)-90)+"px");this.set("top",this.tgt.style.top);}var t=this.opener,s=this.children[0];if(t){var q=this.isfrt?t.cs1Vl:t.cs2Vl;s.edt.set("value",Y.toLocaleString(q));}},children:[{scriptClass:"mstrmojo.Table",rows:1,cols:2,layout:[{cells:[{cssText:"width: 40px; padding: 3px;"},{cssText:"width: 16px;padding: 3px;"}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.ValidationTextBox",alias:"edt",cssText:"color:black",dtp:mstrmojo.expr.DTP.NUMERIC,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:function(){if(this.parent.apply){this.parent.apply.set("enabled",String(this.value).length!==0);}},onInvalid:function(){if(this.parent.apply){this.parent.apply.set("enabled",false);}},onkeyup:function(s){if(this.parent.apply.enabled){var q=s.hWin,t=s.e||q.event;if(t.keyCode===13){this.parent.apply.onclick();}}}},{slot:"0,1",scriptClass:"mstrmojo.Button",cssClass:"icn apply",alias:"apply",onclick:function(){var s=this.parent.parent,t=s.opener,q=this.parent.edt.value;if(s&&t&&String(q).length>0){t[s.isfrt?"cs1Nm":"cs2Nm"]=q;q=Y.parseNumeric(q);t[s.isfrt?"cs1Vl":"cs2Vl"]=q;}t[s.isfrt?"frtUst":"ndUst"]=true;t.selectRange();t.typeHelper.updateThumb();s.close();}}]}]},openEditValue:function(q){this.openPopup("editValueRef",q);}});mstrmojo.MetricSlider.METRICSLIDERTHUMBWIDTH=14;mstrmojo.MetricSlider.METRICSLIDERDEFAULTWIDTH=95;}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!=this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.ui.TextInput","mstrmojo.ValidationTextBox","mstrmojo.hash");mstrmojo.android.ui.ValidationTextInput=mstrmojo.declare(mstrmojo.android.ui.TextInput,null,{scriptClass:"mstrmojo.android.ui.ValidationTextInput",valProps:null,getTextCfg:function A(){return mstrmojo.hash.copy(this.valProps,{scriptClass:"mstrmojo.ValidationTextBox",onEnter:function(){var D=this.parent,E=D.onEnter;if(E){if(this.isValid()){E.call(D,this.value);}}},onvalidationStatusChange:function(){var D=this.validationStatus,E=D&&D.code,F=this.parent.lblErr,G=E?D.msg:"";F.set("text",G);F.set("visible",!!G);}});},validate:function C(){return this.txt.validate();},isValid:function B(){return this.txt.isValid();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo._IsInputControl","mstrmojo.dom","mstrmojo.num");var J=mstrmojo.validation,C=J.STATUSCODE,F=J.VALIDATOR,D=mstrmojo.expr.DTP,B=0,A=1,I=2,H=3,G=4,E=5;mstrmojo.DICAutoFocusButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.DICAutoFocusButton",markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" tabindex="1" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',postBuildRendering:function(){this._super();var K=this;setTimeout(function(){K.domNode.focus();},200);}});mstrmojo.TextFieldDIC=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.TextFieldDIC",cssClass:"mstrmojo-TextFieldDIC",dtp:D.VARCHAR,validationDelay:0,getInputNode:function(){return this.inputNode;},focus:function(){this.validate();mstrmojo.dom.setCaret(this.domNode,(this.value&&this.value.length||0));},init:function(K){if(this._super){this._super(K);}this.constraints=mstrmojo.hash.copy();var M=K.dic,N=this.constraints={trigger:mstrmojo.validation.TRIGGER.ONKEYUP},L=M.dt;if(M.ml){this.maxLength=M.ml;}if(M.psw){this.type="password";this.value=this.lv="";this.owner.applyPasswordMask&&this.owner.applyPasswordMask();}if(J.isNumeric(L)||J.isInt(L)||J.isString(L)){this.dtp=L;}switch(M.vm){case A:N.validator=F.VALIDATE_PHONENO;break;case I:N.validator=F.VALIDATE_EMAIL;break;case H:N.validator=F.VALIDATE_ZIPCODE;break;case G:N.validator=F.VALIDATE_SSN;break;case E:N.regExp=new RegExp("^"+M.rgx+"$");break;}N.min=M.emin?M.min:null;N.max=M.emax?M.max:null;N.maxLen=(M.ml!==undefined)?M.ml:null;N.minLen=(M.mnl!==undefined)?M.mnl:null;if(M.req){this.required=true;}},onInvalid:function(){if(this.popup){this.popup.set("hasInvalidData",true);}},onValid:function(){if(this.popup){this.popup.set("hasInvalidData",false);}},_set_value:function(L,K){if(this.value===undefined&&K===""){return ;}return this._super(L,K);},applyChanges:function(){this.validate();if(this.isValid()){this._super();}else{if(!this.showByDefault){this.handleInvalid();return false;}}return true;},handleInvalid:function(){if(mstrmojo.all.mojoConfirmx9){return ;}var K=this;mstrmojo.confirm(this.validationStatus.msg+"\n("+mstrmojo.desc(9199)+")",null,{buttons:[{scriptClass:"mstrmojo.DICAutoFocusButton",text:mstrmojo.desc(1442),onclick:function(){K.focus();}},{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(221),onclick:function(){if(K.popup){K.popup.onCancel();}else{K.undoValidate&&K.undoValidate();}}}],title:mstrmojo.desc(7548),cssClass:"mstrmojo-TextFieldDIC-ValidationError"});},cancelChanges:function(){this.inputNode.blur();this.value=this.lv;this.clearValidation();}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(b,Y){var a=this.list,W=a.selectedIndex,V=a.items.length,X=b?V-1:0;if(W===X){a.clearSelect();return ;}if(W===null||W<0){W=b?0:V-1;}else{W+=b?1:-1;}if(Y){var Z=a.items[W];while(Z&&Z.type==="dummy"){if(W===X){a.clearSelect();return ;}W+=b?1:-1;Z=a.items[W];}}a.singleSelect(W);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(V){this.hideSuggestion();},getSearchPattern:function U(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(W){var V=this.getSuggestion(W);if(!this.noCache&&V!==-1){this.updateSuggestion(V);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(V){if(this.suggestionShown){this._lastOpened.nextHighlight(V);}},preHighlight:function H(V){if(this.suggestionShown){this._lastOpened.preHighlight(V);}},getSuggestion:function S(j){var e=this.candidates,b=e&&e.items,Y=e&&e.isComplete,h=this._last_hit;if(!this.noCache&&(e||h)){var g=this.filterCandidates(b,j,this.REQUEST_THRESHOLD),d=g.length,f=this.suggestCount,V=false;if(!Y&&d<f){var W=h&&h.pattern;if(h&&W&&(j.indexOf(W)>-1)){V=true;var l=this.filterCandidates(h.items,j,this.REQUEST_THRESHOLD),Z=l&&l.length,X=mstrmojo.array,k=this.itemField,a;for(a=0;a<Z;a++){if(X.find(g,k,l[a][k])===-1){g.push(l[a]);}}d=g.length;}}if(!Y&&((j.length>2&&d<this.REQUEST_THRESHOLD)||(d<f))){this.requestCandidates(j);return -1;}return(d<f)?g:g.slice(0,f);}this.requestCandidates(j);return -1;},requestCandidates:function A(V){this._request_pattern=V;var Y=this,W=this.getSuggestionTarget(),X={success:function(f){if(!f){return ;}var e=Y.getSuggestionTarget();if(!e||(W!==e)){return ;}var k=e.getSearchPattern(),b=f.items;Y._last_hit={items:b,pattern:V};Y.sz=f.sz;if(!Y.noCache&&b){var g=(Y.candidates&&Y.candidates.items)||[],h=[].concat(b),d=b.length,a;for(a=0;a<d;a++){var Z=h[a];if(mstrmojo.array.indexOf(g,Z)>-1){mstrmojo.array.removeItem(b,Z);}}if(Y.candidates){Y.candidates.items=g.concat(b);}}if((k||k==="")&&k.indexOf(V)>-1){var j=Y.filterCandidates(b,k);Y.updateSuggestion(j);}},failure:function(Z){if(Z.getResponseHeader){mstrmojo.alert(Z.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:V,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},X);},filterCandidates:function Q(Y,X,V){V=V||this.suggestCount;X=mstrmojo.string.regEscape(X);var Z=this.itemField,W=mstrmojo.array.filter(Y,function(a){return(new RegExp("\\s"+X+"|^"+X,"i")).test(a[Z]);},{max:V});return W;},getHighlightedText:function P(X,a){if(!this.highlightPattern||mstrmojo.string.isEmpty(X)){return a;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){a=a.replace(new RegExp("(^|\\s)("+X+")","gi"),"$1<b>$2</b>");}else{var Z=X.split(" "),W,V;for(W=0,V=Z.length;W<V;W++){if(Z[W]!==""){a=a.replace(new RegExp("("+Z[W]+")","gi"),"<b>$1</b>");}}}}catch(Y){}return a;},updateSuggestion:function O(Y){var W=Y&&Y.length,V=this.browseItemVisible;if(W||V){if(V){Y=Y||[];Y.push({n:"Browse...",t:-99,cssClass:(W?"br":"bro")});}this.set("suggestionItems",Y);if(this.suggestionShown){var X=this._lastOpened;if(X&&X.nudge){X.nudge();}if(this.autoSelect&&X){X.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var V=this.opener;if(V&&V.onBrowserClose){V.onBrowserClose();}},onOpen:function(){var V=this.opener;if(V&&V.onBrowserOpen){V.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(V,W){if(this.browseItemVisible&&V.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var X=this.zIndex;this.openPopup("ob",{zIndex:(X&&(X+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(W,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(V);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(V){D.call(this,true,V);},preHighlight:function(V){D.call(this,false,V);},getSelected:function M(){var V=this.list;return V.items[V.selectedIndex];},onOpen:function I(){var V=this.opener;if(V){mstrmojo.css.addClass(this.domNode,V.suggestionPopupCssClss||"");if(V.autoSelect){this.list.singleSelect(0);}if(V.nudge){V.nudge(this);}}},onClose:function F(){this.list.clearSelect();var V=this.opener;if(V){V.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,V.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Magnifier","mstrmojo.hash");var A="xtab-selected-cell";mstrmojo._HasMagnifier={scriptClass:"mstrmojo._HasMagnifier",magnifiedNode:null,magnifier:null,magnifierHelper:null,onmagnifiedNodeChange:function(C){var E=C.valueWas,D=C.value;if(E){mstrmojo.css.removeClass(E,A);}if(D){mstrmojo.css.addClass(D,A);}},displayMagnifier:function B(J,F){var H=this.magnifierHelper,C=H.resolveTouchEvent(J),I,E,D;if(C){E=C.cell;D=C.pos;if(E!=this.magnifiedNode){I=H.resolveInfoToDisplay(C);if(I){this.set("magnifiedNode",E);if(!this.magnifier){var G=this;this.magnifier=mstrApp.showPopup(mstrmojo.hash.copy({scriptClass:"mstrmojo.Magnifier",onClose:function(){G.magnifier=null;G.set("magnifiedNode",null);},helper:H},F),E);}this.magnifier.updateContent();this.magnifier.resizeAndPosition(D);}else{if(this.magnifier){this.magnifier.close();}}}else{if(this.magnifier){this.magnifier.moveTo(D);}}}}};})();(function(){mstrmojo.requiresCls("mstrmojo.android.Popup","mstrmojo.array","mstrmojo.android.TextArea","mstrmojo._TouchGestures","mstrmojo.android.ui.Button","mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.android.nativedialog.AlertDialog");mstrmojo.requiresDescs(1442);var Q=mstrmojo.css,D=mstrmojo.dom,K=mstrmojo.array,M=mstrmojo.hash;var U=mstrmojo.android.Dialog=mstrmojo.declare(mstrmojo.android.Popup,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.Dialog",autoClose:false,btnVisible:true,init:function N(W){this._super(W);var V=["dialog"];if(this.title){V.push("has-ttl");}if(W.anchor){this.curtainPosition=mstrApp.getContentPosition();}Q.addWidgetCssClass(this,V);},preBuildRendering:function A(){var X=this.buttons;if(X&&!this.btnHbox){var V=this,Y=this.id,W=function(){if(!V.manualClose){window.setTimeout(function(){var Z=mstrmojo.all[Y];if(Z){Z.close();}},50);}};K.forEach(X,function(Z){Z.origFn=Z.onclick;Z.onclick=function(a){if(this.origFn){if(this.origFn()===false){return ;}}W();a.e.stopPropagation();a.e.cancelBubble=true;};});}this._super();},postBuildRendering:function O(){if(this.onTitleClick){var V=this.id;D.attachEvent(this.titleNode,"click",function(W){mstrmojo.all[V].onTitleClick(W);});}return this._super();},getResizeHandler:function F(){var W=this.id,V=function(){var X=mstrmojo.all[W];if(X.dialogRefresh){X.dialogRefresh();}else{X.resizeDialog();X.positionDialog();}};return V;},resizeDialog:function C(){this._super();var g=this.buttons&&this.buttons.length;if(g){var W=this.buttonNode,Y=this.btnVisible;if(!Y){this.set("btnVisible",true);}var X=this.btnHbox.children,f=Q.getComputedStyle,V=f(W),d=f(X[0].domNode);var Z=W.clientWidth-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10),e=parseInt(d.paddingLeft,10)+parseInt(d.paddingRight,10)+parseInt(d.borderLeftWidth,10)+parseInt(d.borderRightWidth,10),b=Z-(g*e);var a=Math.floor(b/g);K.forEach(X,function(h){h.set("width",a+"px");});this.set("btnVisible",Y);}},resizeCurtain:function R(){var Y=this.curtainNode,V=document.body,X=Y.style,W=this.curtainPosition;X.width=V.scrollWidth+"px";if(W&&W.h){X.height=W.h+"px";}else{X.height=V.scrollHeight+"px";}if(W&&W.y){X.top=W.y+"px";}this.raiseEvent({name:"resizeCurtain"});},setButtonVisibility:function B(V){this.buttonNode.style.display=V?"block":"none";},createTitleBarButton:function S(W,V,X){var Y=document.createElement("div");Y.className=W;Y.setAttribute("title",X||"");Y[(mstrApp.isTouchApp())?"ontouchend":"onclick"]=V;this.titleNode.appendChild(Y);}});var G=M.copy(U.prototype.markupMethods);G.onbtnVisibleChange=function(){this.buttonNode.style.display=(this.btnVisible)?"block":"none";};U.prototype.markupMethods=G;if(window.mstrConfig&&!window.mstrConfig.simpleDialog){var E=function(V){return[{scriptClass:"mstrmojo.android.TextArea",text:V,cssClass:"mstrmojo-androidAlert",isElastic:true}];};mstrmojo.alert=function L(Y,W,X){var V={title:X||"MicroStrategy Mobile",buttons:[mstrmojo.android.ui.Button.newButton(mstrmojo.desc(1442,"OK"),function(){if(W){W();}})],children:E(Y)};if(mstrApp.useBinaryFormat){M.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.AlertDialog"},V);}mstrApp.showDialog(V);};mstrmojo.confirm=function H(Y,W,X){var V={title:X||"MicroStrategy Mobile",buttons:W,children:E(Y)};if(mstrApp.useBinaryFormat){M.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.AlertDialog"},V);}mstrApp.showDialog(V);};mstrmojo.toast=function I(W,V,X){mstrApp.showToastNotification(W,V||3500);if(X){window.setTimeout(function(){X();},V);}};mstrmojo.mask={show:function P(V){mstrMobileApp.showProgress([V||""],false);},hide:function J(){mstrMobileApp.hideProgress();}};}}());(function(){mstrmojo.requiresCls("mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo._IsInputControl","mstrmojo.css");function A(H){var G=[];E.forEach(H,function(I){G.push(I.n);});return G;}var D=mstrmojo.css,E=mstrmojo.array;mstrmojo.LikertScaleDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsInputControl],{scriptClass:"mstrmojo.LikertScaleDIC",styleCssClass:"scale",init:function(G){this._super(G);this.items=this.getItems();this.titleItems=A(this.items);},getDisplayValue:function C(){return(this.selectedIndex>=0)?this.items[this.selectedIndex].n:this.dv;},getLeftEndTitle:function F(G){return G>=0?(this.dic.mint||""):"";},getRightEndTitle:function(G){return G>=0?(this.dic.maxt||""):"";},postvalueChange:function(){this._super&&this._super();if(this.owner&&this.owner.model){var G=this.owner.model,J=G.getZoomFactor&&G.getZoomFactor()||1;if(J!==1){var I=this.domNode.getElementsByClassName("item_wrapper"),H=[];E.forEach(I,function(K){H.push(K.firstChild);});this.zoomBackground(J,H);}}},postBuildRendering:function(){this._super();if(this.owner&&this.owner.model){var G=this.owner.model;zf=G.getZoomFactor&&G.getZoomFactor()||1;var K=this.domNode.getElementsByClassName("item_title"),H=window.getComputedStyle(K[0],null).getPropertyValue("width");if(H){E.forEach(K,function(L){L.style.width=parseFloat(H)*zf+"px";});}var J=this.domNode.getElementsByClassName("item_wrapper"),I=[];E.forEach(J,function(M,L){M.style.textAlign="center";I.push(M.firstChild);if(K[L]){K[L].controlTo=M;}});this.zoomStyle(zf,I,100,500);}if(!mstrmojo.isDescendant(this.owner,this)&&this.showByDefault){this.set("height",(this.openerStyle.ih||0)+"px");this.set("width",(this.openerStyle.iw||0)+"px");}D.toggleClass(this.domNode,"disabled",!this.enabled);},getItemNodeFromTarget:function B(G){if(G.className==="item_title"){G=G.controlTo;}return this._super(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl","mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var A=mstrmojo.dom,C=mstrmojo.css,E=mstrmojo.hash,D={0:"default",1:"stars_dots"};function B(G){if(G.owner&&G.owner.model){var F=G.owner.model,J=F.getZoomFactor&&F.getZoomFactor()||1;if(J!==1){var I=G.domNode.getElementsByClassName("item_wrapper"),H=[];$A.forEach(I,function(K){H.push(K.firstChild);});G.zoomBackground(J,H);}}}mstrmojo.RatingDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsInputControl],{scriptClass:"mstrmojo.RatingDIC",styleCssClass:"rate",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,mouseover,mouseout><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',lastIdx:null,init:function(F){this._super(F);this.items=this.getItems();this.starCount=this.items&&this.items.length;C.addWidgetCssClass(this,D[this.dic.stl||0]);},setRating:function(F){var H=0,I=this.starCount,G="less_equal";if(this.lastIdx==undefined||this.lastIdx!=F){for(H;H<I;H++){if(H<=F){C.addClass(this._getItemNode(H),G);}else{C.removeClass(this._getItemNode(H),G);}}this.lastIdx=F;B(this);}},onvalueChange:function(){this._super&&this._super();var F=mstrmojo.array.find(this.items,"v",this.value);this.setRating(F);},onmouseover:function(G){this._super&&this._super(G);var H=G.target||A.eventTarget(G.hWin,G.e),F=H&&H.getAttribute("idx");if(F!=undefined){this.setRating(F);}},onmouseout:function(G){this._super&&this._super(G);var F=mstrmojo.array.find(this.items,"v",this.value);this.setRating(F);},postBuildRendering:function(){this._super();if(!mstrmojo.isDescendant(this.owner,this)&&this.showByDefault){this.set("height",(this.openerStyle.ih||0)+"px");this.set("width",(this.openerStyle.iw||0)+"px");}var F=mstrmojo.array.find(this.items,"v",this.value);if(F>-1){this.setRating(F);}if(this.owner&&this.owner.model){var G=this.owner.model;zf=G.getZoomFactor&&G.getZoomFactor()||1;if(zf!==1){var I=this.domNode.getElementsByClassName("item_wrapper"),H=[];$A.forEach(I,function(J){H.push(J.firstChild);});this.zoomStyle(zf,H,42,41);}}C.toggleClass(this.domNode,"disabled",!this.enabled);}});}());(function(){mstrmojo.requiresCls("mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo._IsAndroidInputControl","mstrmojo.css");mstrmojo.android.inputControls.RadioListDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsAndroidInputControl],{scriptClass:"mstrmojo.android.inputControls.RadioListDIC",styleCssClass:"radio",init:function(C){this._super(C);this.items=this.getItems();this.itemsPerRow=this.dic.ipr||0;},ontouchend:function(C){this.onclick(C);},setDirtyFlag:function A(D,C){mstrmojo.css.addClass(this.itemsNode||C,"tx-active");},postBuildRendering:function B(){this._super();var C=this.owner,D=mstrmojo.findAncestor(C,"performCanGrowCanShrink",null,null);if(D){window.setTimeout(function(){D.performCanGrowCanShrink([C],true);},50);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.MobileDateTimePicker","mstrmojo._IsAndroidInputControl","mstrmojo.android._HasPreviewButton","mstrmojo.date","mstrmojo.expr","mstrmojo.locales","mstrmojo.hash");mstrmojo.requiresDescs(2052,2170,7656);var I=mstrmojo.date,F=mstrmojo.desc,C=mstrmojo.hash,K=5,N=6,A=mstrmojo.expr.DTP;mstrmojo.android.inputControls.DateTimePickerDIC=mstrmojo.declare(mstrmojo.ui.MobileDateTimePicker,[mstrmojo._IsAndroidInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.DateTimePickerDIC",cssText:"",valueField:"dtValue",popupTitle:"",init:function M(O){var P=O.dic;if(P.min!==undefined){O.min=I.parseDateAndOrTime(P.min);}if(P.max!==undefined){O.max=I.parseDateAndOrTime(P.max);}O[this.valueField]=C.clone(I.parseDateAndOrTime(O.value));if(P.t===K){O.dtp=P.ict?A.TIMESTAMP:A.DATE;O.popupTitle=P.ict?F(7656,"Date and Time"):F(2052,"Date");}else{if(P.t===N){O.dtp=A.TIME;O.minuteInterval=O.dic.itv;O.popupTitle=F(2170,"Time");}}this._super(O);},getCurValue:function L(X){var U=this[this.valueField]||{},S=this.getDate()||U.date||{year:1970,month:1,day:1},R=this.getTime()||U.time||{hour:0,min:0,sec:0},Q=this.dic,P=parseInt(Q.dt,10),W=mstrmojo.locales.datetime,V=W.TIMEOUTPUTFORMAT,O=W.DATEOUTPUTFORMAT,Z=I.formatDateInfo(S,O),Y=I.formatTimeInfo(R,V);if(X){if(Q.t===K){return Q.ict?(Z+" "+Y):Z;}return Y;}if(P===A.TIMESTAMP){return Z+" "+Y;}if(P===A.TIME){return Y;}return Z;},getTime:function E(){if(!mstrApp.useBinaryFormat){return this._super();}else{return this[this.valueField].time;}},getDate:function D(){if(!mstrApp.useBinaryFormat){return this._super();}else{return this[this.valueField].date;}},updateTime:function H(O){if(mstrApp.useBinaryFormat){var P=this[this.valueField].time;P.hour=O.hour;P.min=O.min;}},updateDate:function G(O){if(mstrApp.useBinaryFormat){var P=this[this.valueField].date;P.year=O.year;P.month=O.month;P.day=O.day;}},updateDateAndTime:function B(O){if(mstrApp.useBinaryFormat){this.updateTime(O.time);this.updateDate(O.date);}},renderPreview:function J(){this.renderPreviewButton(this.openerNode,this.getCurValue(true));}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.inputControls.CheckBoxDIC");mstrmojo.android.inputControls.MarkRowDIC=mstrmojo.declare(mstrmojo.android.inputControls.CheckBoxDIC,null,{scriptClass:"mstrmojo.android.inputControls.MarkRowDIC",isSwitchStyle:false,oncheckedChange:function(){if(this.markAll){var B=this.group&&this.group.widgetsMap,A;for(A in B){if(B.hasOwnProperty(A)){if(B[A].checked!==this.checked){B[A].set("checked",this.checked);}}}}else{this._super();}},postBuildRendering:function(){this._super();this.domNode.style.height="30px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.RatingDIC","mstrmojo._TouchGestures");var C=mstrmojo.dom;mstrmojo.android.inputControls.RatingDIC=mstrmojo.declare(mstrmojo.RatingDIC,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.inputControls.RatingDIC",touchTap:function E(F){F.e=F.e||F.evt;this.onclick(F);},touchSwipeMove:function A(H){var G=document.elementFromPoint(H.pageX,H.pageY),F;if(C.contains(this.domNode,G)){F=G&&G.getAttribute("idx");if(F!=undefined){this.setRating(F);this.ratingSelectedValue=this.items[F].v;}}},touchSwipeEnd:function D(F){if(this.ratingSelectedValue!=undefined&&this.ratingSelectedValue!=this.value){this.set("value",this.ratingSelectedValue);}},setDirtyFlag:function B(G,F){mstrmojo.css.addClass(this.itemsNode||F,"tx-active");}});}());(function(){mstrmojo.requiresCls("mstrmojo.LikertScaleDIC","mstrmojo.css");mstrmojo.android.inputControls.LikertScaleDIC=mstrmojo.declare(mstrmojo.LikertScaleDIC,null,{scriptClass:"mstrmojo.android.inputControls.LikertScaleDIC",lowestLabel:null,hightestLabel:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}<div class="label {@lowestClass}">{@lowestLabel}</div><div class="label {@hightestClass}">{@hightestLabel}</div></div></div>',init:function A(C){this._super(C);var B=this.titleItems&&this.titleItems.length,E=this.dic.mint&&B,D=this.dic.maxt&&B;this.lowestLabel=E?(this.titleItems[0]+": "+this.dic.mint):"";this.lowestClass=E?"":"hidden";this.hightestLabel=D?(this.titleItems[B-1]+": "+this.dic.maxt):"";this.hightestClass=D?"":"hidden";},getLeftEndTitle:function(B){return"";},getRightEndTitle:function(B){return"";},ontouchend:function(B){this.onclick(B);},setDirtyFlag:function(C,B){mstrmojo.css.addClass(this.itemsNode||B,"tx-active");}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.Dialog","mstrmojo.Button");mstrmojo.android.AndroidDICPopup=mstrmojo.declare(mstrmojo.android.Dialog,null,{scriptClass:"mstrmojo.AndroidDICPopup",cssClass:"mstrmojo-AndroidDICPopup",autoClose:false,fadeOnClose:false,init:function D(E){this._super(E);this.addChildren([this.widget]);},close:function C(){this.set("visible",false);if(this.widget.hasRendered){this.widget.unrender();}this.removeChildren(this.widget);this._super();},onpopupResized:function A(E){if(this.widget.onpopupResized){this.widget.onpopupResized(E);}},onkeyup:function B(F){var E=F.hWin,G=F.e||E.event;if(this.widget.applyOnEnter&&G.keyCode===13){this.onApply();}else{if(G.keyCode===27){this.onCancel();}}},onApply:function(){return this.widget.applyChanges();},onCancel:function(){this.widget.cancelChanges();},enableApply:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.XtabBase2","mstrmojo.XtabZone","mstrmojo._TouchGestures","mstrmojo._HasXtabTouchScroll","mstrmojo._XtabSelections","mstrmojo.dom","mstrmojo.hash","mstrmojo.css","mstrmojo._HasMagnifier","mstrmojo.XtabMagnifierHelper");var f=mstrmojo.css,F=mstrmojo.dom;var I=0;var W=1;var Q=2;var g=3;function R(j,k){f.toggleClass(j.firstChild,"tx-active",k);}function C(j){if(j){j.domNode.style.pointerEvents="auto";}}function N(){if(mstrMobileApp.isOnline()){return ;}var q=this.controller,x,w,j,k,AC,o,p,u,s=[],l=[],AA;if(!q.getLinkRequest){return ;}for(x in this.zones){if(x==="_BL"||x==="_BR"){w=this.zones[x];j=w.getNodesByPositions(w.posMap);for(p=0;p<j.length;p++){k=j[p];AC=this.getCellForNode(k);if(AC&&AC.at&&(AC.at&4)){o=this.model.getAction(this.getActionCells(AC),null);if(o){u=o.a;AA=q.getLinkRequest(u);if(AA){s.push(AA);l.push(k);}}}}}}var t=s.length;if(t){var AB=function(AD){var z,AE;for(z=0;z<t;z++){AE=l[z];if(!AD[z]){AE.setAttribute("hl_d",true);f.addClass(AE,"hl_d");}}};if(mstrApp.isHosted()){}else{this.model.getDataService().checkCachedLinkTargets(s,{success:AB,failure:mstrmojo.emptyFn});}}}function b(){if(mstrMobileApp.isOnline()){var p,j,k,o,l;for(p in this.zones){if(p==="_BL"||p==="_BR"){j=this.zones[p];k=j.getNodesByPositions(j.posMap);for(l=0;l<k.length;l++){o=k[l];o.removeAttribute("hl_d");f.removeClass(o,"hl_d");}}}}else{N.call(this);}}mstrmojo.MobileXtab=mstrmojo.declare(mstrmojo.XtabBase2,[mstrmojo._TouchGestures,mstrmojo._HasXtabTouchScroll,mstrmojo._XtabSelections,mstrmojo._HasMagnifier],{scriptClass:"mstrmojo.MobileXtab",frameRate:30,enableMagnifier:true,useSeamlessIncFetch:false,allowToggleSelections:true,markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";},onheightChange:function(){this.domNode.style.height=this.height||"";},onwidthChange:function(){this.domNode.style.width=this.width||"";}},init:function Y(j){this._super(j);this.magnifierHelper=new mstrmojo.XtabMagnifierHelper({xtab:this});this.disposables.push(this.magnifierHelper);},gridPagesRendered:function B(){this._super();N.call(this);},onRender:function G(){this._super();var j=this.interactiveCellsArray;if(j&&j.length>0&&this.controller.getLinkRequest){if(!this.subscr){var l=mstrmojo.publisher;this.subscr=l.subscribe(l.NO_SRC,l.CONNECTIVITY_CHANGED_EVENT,b,this.id);}if((mstrApp.useBinaryFormat||mstrApp.isHosted())&&!mstrMobileApp.isOnline()){var k=this;window.setTimeout(function(){try{N.call(k);}catch(o){}},100);}}},unrender:function a(){if(this.subscr){mstrmojo.publisher.unsubscribe(this.subscr);delete this.subscr;}this._super();},getDataService:function J(j){return this.model.getDataService();},setData:function E(j){this.set("gridData",j);},createZone:function D(j){j=j||{};var k=this.getDataService();j.imgCacheMap=(k&&k.imgCache)||this.imgCacheMap;j.unCachedMap={};return this._super(j);},showDownloadStatus:function d(){},onclick:mstrmojo.emptyFn,setupTNs:function O(){var k=this.contentNode,j=k.rows[1].cells[1].lastChild,l=0;switch(this.lockHeadersCase){case I:this._TSN.x=[j.lastChild.lastChild];this._TSN.y=[j.firstChild];break;case Q:this._TSN.x=[k];this._TSN.y=[j.firstChild];break;case W:this._TSN.x=[j];this._TSN.y=[k];l=-1;break;case g:this._TSN.x=[k.rows[0].cells[1].lastChild,j.firstChild];this._TSN.y=[k.rows[1]];l=2;break;}if(l){this._TSN.x[0].style.zIndex=l;}this.setOffsets();this.attachEventListener("scrolledOut",this.id,this.scrolledOut);},useDomToCalculateOffsets:function P(){return(this.lockHeadersCase===I||(this._super&&this._super()));},setOffsets:function e(AG){var AA=0,k=0;var o=this.lockHeadersCase;if(this.useDomToCalculateOffsets()||AG){var u=this._TSN,AB=u.x[0],p=u.y[0],s=AB.offsetLeft,AD=p.offsetTop;if(AG){if(!!(o&W)){s=0;}if(!!(o&Q)){AD=0;}}AA=s+AB.offsetWidth+(!!(o&W)?this._BL.offsetWidth:0);k=AD+p.offsetHeight+(!!(o&Q)?this._TR.offsetHeight:0);}else{var x=this.zones,w=(this.gridData.rh&&parseInt(this.gridData.rh,10))||0,j=x._TR?x._TR.cp.rc:0,l=x._BR.cp.rc,AF=x._BL?x._BL.totalColWidth:0,AC=x._BR.totalColWidth;k=((o===W)?l:j+l)*w;AA=(o===Q)?AC:AF+AC;}var z=1,q=2,t=this.getGridDimension(q)||0,AE=this.getGridDimension(z)||0;this._TMAX={x:Math.min(t-AA,0),y:Math.min(AE-k,0)};if(this._super){this._super();}},touchTap:function Z(k){if(!this.magnifier){if(this._super){this._super();}if(this.performActionForXtab(k)===false){var j=this.controller;if(j&&j.viewTap){j.viewTap();}}}},performActionForXtab:function X(s){this.deselectCell();var q=F.findAncestorByAttr(s.target,"ei",true,this.domNode);if(!q||!q.value){return false;}var p=q.node,j=this.getCellForNode(p),o=j.at;if(this._super&&this._super(s)){return ;}if(!o){return false;}if((o&4)&&!p.getAttribute("hl_d")){var k=document.createElement("div"),l=k.style;id=this.id;k.className="activeLink on";l.left=p.offsetLeft+"px";l.top=p.offsetTop+"px";l.width=p.offsetWidth+"px";l.height=p.offsetHeight+"px";p.appendChild(k);window.setTimeout(function(){var t=mstrmojo.all[id];if(t&&t.hasRendered){F.attachOneTimeEvent(k,"webkitTransitionEnd",function(){p.removeChild(k);});f.removeClass(k,"on");}},200);}this.defaultAction(p);},selectCell:function L(j){var l=document.createElement("div"),k=l.style;l.className="overlay";k.top=j.offsetTop+"px";k.left=(j.offsetLeft+1)+"px";k.height=(j.clientHeight-2)+"px";k.width=(j.clientWidth-1)+"px";j.appendChild(l);},flagDirtyUnit:function h(j){R(j,true);},clearDirtyUnit:function M(j){R(j,false);},deselectCell:function V(){var j=this._selectedCell;if(j){j.removeChild(j.lastChild);delete this._selectedCell;}},touchSelectBegin:function A(l){if(this.enableMagnifier){var k=this.controller,j;if(k.getMagnifierConfig){j=k.getMagnifierConfig();}this.displayMagnifier(l,j);}},touchSelectMove:function H(k){if(this.enableMagnifier){var j=this;this.latestTouch=k;if(!this._moveMagnifierTimer){this._moveMagnifierTimer=setTimeout(function(){j.displayMagnifier(j.latestTouch);j._moveMagnifierTimer=null;},50);}}},touchSelectCancel:function U(j){C(this.magnifier);},touchSelectEnd:function S(j){C(this.magnifier);},getCaptureDimensions:function K(){var k=this.viewport,j=F.position(this.domNode,true);j.w=Math.min(k.offsetWidth,j.w);j.h=Math.min(k.offsetHeight,j.h);return j;}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidXtabBase","mstrmojo.AndroidXtabZone","mstrmojo._TouchGestures","mstrmojo._HasXtabTouchScroll","mstrmojo._XtabSelections","mstrmojo.dom","mstrmojo.hash","mstrmojo.css","mstrmojo._HasMagnifier","mstrmojo.XtabMagnifierHelper");var f=mstrmojo.css,F=mstrmojo.dom;var I=0;var W=1;var Q=2;var g=3;function R(j,k){f.toggleClass(j.firstChild,"tx-active",k);}function C(j){if(j){j.domNode.style.pointerEvents="auto";}}function N(){if(mstrMobileApp.isOnline()){return ;}var q=this.controller,x,w,j,k,AC,o,p,u,s=[],l=[],AA;if(!q.getLinkRequest){return ;}for(x in this.zones){if(x==="_BL"||x==="_BR"){w=this.zones[x];j=w.getNodesByPositions(w.posMap);for(p=0;p<j.length;p++){k=j[p];AC=this.getCellForNode(k);if(AC&&AC.at&&(AC.at&4)){o=this.model.getAction(this.getActionCells(AC),null);if(o){u=o.a;AA=q.getLinkRequest(u);if(AA){s.push(AA);l.push(k);}}}}}}var t=s.length;if(t){var AB=function(AD){var z,AE;for(z=0;z<t;z++){AE=l[z];if(!AD[z]){AE.setAttribute("hl_d",true);f.addClass(AE,"hl_d");}}};if(mstrApp.isHosted()){}else{this.model.getDataService().checkCachedLinkTargets(s,{success:AB,failure:mstrmojo.emptyFn});}}}function b(){if(mstrMobileApp.isOnline()){var p,j,k,o,l;for(p in this.zones){if(p==="_BL"||p==="_BR"){j=this.zones[p];k=j.getNodesByPositions(j.posMap);for(l=0;l<k.length;l++){o=k[l];o.removeAttribute("hl_d");f.removeClass(o,"hl_d");}}}}else{N.call(this);}}mstrmojo.NativeMobileXtab=mstrmojo.declare(mstrmojo.AndroidXtabBase,[mstrmojo._TouchGestures,mstrmojo._HasXtabTouchScroll,mstrmojo._XtabSelections,mstrmojo._HasMagnifier],{scriptClass:"mstrmojo.NativeMobileXtab",frameRate:30,enableMagnifier:true,useSeamlessIncFetch:false,allowToggleSelections:true,markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";},onheightChange:function(){this.domNode.style.height=this.height||"";},onwidthChange:function(){this.domNode.style.width=this.width||"";}},init:function Y(j){this._super(j);this.magnifierHelper=new mstrmojo.XtabMagnifierHelper({xtab:this});this.disposables.push(this.magnifierHelper);},gridPagesRendered:function B(){this._super();N.call(this);},onRender:function G(){this._super();var j=this.interactiveCellsArray;if(j&&j.length>0&&this.controller.getLinkRequest){if(!this.subscr){var l=mstrmojo.publisher;this.subscr=l.subscribe(l.NO_SRC,l.CONNECTIVITY_CHANGED_EVENT,b,this.id);}if((mstrApp.useBinaryFormat||mstrApp.isHosted())&&!mstrMobileApp.isOnline()){var k=this;window.setTimeout(function(){try{N.call(k);}catch(o){}},100);}}},unrender:function a(){if(this.subscr){mstrmojo.publisher.unsubscribe(this.subscr);delete this.subscr;}this._super();},getDataService:function J(j){return this.model.getDataService();},setData:function E(j){this.set("gridData",j);},createZone:function D(j){j=j||{};var k=this.getDataService();j.imgCacheMap=(k&&k.imgCache)||this.imgCacheMap;j.unCachedMap={};return this._super(j);},showDownloadStatus:function d(){},onclick:mstrmojo.emptyFn,setupTNs:function O(){var k=this.contentNode,j=k.rows[1].cells[1].lastChild,l=0;switch(this.lockHeadersCase){case I:this._TSN.x=[j.lastChild.lastChild];this._TSN.y=[j.firstChild];break;case Q:this._TSN.x=[k];this._TSN.y=[j.firstChild];break;case W:this._TSN.x=[j];this._TSN.y=[k];l=-1;break;case g:this._TSN.x=[k.rows[0].cells[1].lastChild,j.firstChild];this._TSN.y=[k.rows[1]];l=2;break;}if(l){this._TSN.x[0].style.zIndex=l;}this.setOffsets();this.attachEventListener("scrolledOut",this.id,this.scrolledOut);},useDomToCalculateOffsets:function P(){return(this.lockHeadersCase===I||(this._super&&this._super()));},setOffsets:function e(AG){var AA=0,k=0;var o=this.lockHeadersCase;if(this.useDomToCalculateOffsets()||AG){var u=this._TSN,AB=u.x[0],p=u.y[0],s=AB.offsetLeft,AD=p.offsetTop;if(AG){if(!!(o&W)){s=0;}if(!!(o&Q)){AD=0;}}AA=s+AB.offsetWidth+(!!(o&W)?this._BL.offsetWidth:0);k=AD+p.offsetHeight+(!!(o&Q)?this._TR.offsetHeight:0);}else{var x=this.zones,w=(this.gridData.rh&&parseInt(this.gridData.rh,10))||0,j=x._TR?x._TR.cp.rc:0,l=x._BR.cp.rc,AF=x._BL?x._BL.totalColWidth:0,AC=x._BR.totalColWidth;k=((o===W)?l:j+l)*w;AA=(o===Q)?AC:AF+AC;}var z=1,q=2,t=this.getGridDimension(q)||0,AE=this.getGridDimension(z)||0;this._TMAX={x:Math.min(t-AA,0),y:Math.min(AE-k,0)};if(this._super){this._super();}},touchTap:function Z(k){if(!this.magnifier){if(this._super){this._super();}if(this.performActionForXtab(k)===false){var j=this.controller;if(j&&j.viewTap){j.viewTap();}}}},performActionForXtab:function X(t){this.deselectCell();var s=F.findAncestorByAttr(t.target,"ei",true,this.domNode);if(!s||!s.value){return false;}var p=s.node,j=this.getCellForNode(p),o=j.at;if(this._super&&this._super(t)){return ;}if(!o){return false;}var q=!(j&&j._e&&j._e.n);if((o&4)&&!p.getAttribute("hl_d")&&!q){var k=document.createElement("div"),l=k.style;id=this.id;k.className="activeLink on";l.left=p.offsetLeft+"px";l.top=p.offsetTop+"px";l.width=p.offsetWidth+"px";l.height=p.offsetHeight+"px";p.appendChild(k);window.setTimeout(function(){var u=mstrmojo.all[id];if(u&&u.hasRendered){F.attachOneTimeEvent(k,"webkitTransitionEnd",function(){p.removeChild(k);});f.removeClass(k,"on");}},200);}this.defaultAction(p);},selectCell:function L(j){var l=document.createElement("div"),k=l.style;l.className="overlay";k.top=j.offsetTop+"px";k.left=(j.offsetLeft+1)+"px";k.height=(j.clientHeight-2)+"px";k.width=(j.clientWidth-1)+"px";j.appendChild(l);},flagDirtyUnit:function h(j){R(j,true);},clearDirtyUnit:function M(j){R(j,false);},deselectCell:function V(){var j=this._selectedCell;if(j){j.removeChild(j.lastChild);delete this._selectedCell;}},touchSelectBegin:function A(l){if(this.enableMagnifier){var k=this.controller,j;if(k.getMagnifierConfig){j=k.getMagnifierConfig();}this.displayMagnifier(l,j);}},touchSelectMove:function H(k){if(this.enableMagnifier){var j=this;this.latestTouch=k;if(!this._moveMagnifierTimer){this._moveMagnifierTimer=setTimeout(function(){j.displayMagnifier(j.latestTouch);j._moveMagnifierTimer=null;},50);}}},touchSelectCancel:function U(j){C(this.magnifier);},touchSelectEnd:function S(j){C(this.magnifier);},getCaptureDimensions:function K(){var k=this.viewport,j=F.position(this.domNode,true);j.w=Math.min(k.offsetWidth,j.w);j.h=Math.min(k.offsetHeight,j.h);return j;}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextFieldDIC","mstrmojo.android._HasPreviewButton");mstrmojo.android.inputControls.TextFieldDIC=mstrmojo.declare(mstrmojo.TextFieldDIC,[mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.TextFieldDIC",cssClass:"mstrmojo-TextFieldDIC",cssDisplay:"block",onfontChange:mstrmojo.emptyFn,applyChanges:function G(){if(!!this.domNode){this.domNode.blur();}return this._super();},handleInvalid:function A(){mstrmojo.alert(this.validationStatus.msg);},cancelChanges:function E(){this.domNode.blur();this._super();},focus:function B(){this.validate();},onfocus:function F(){if(this.value!=undefined&&this.maxLength!=undefined&&String(this.value).length>this.maxLength){this.set("value","");}window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},renderPreview:function D(){var J=this.openerNode,K=this.group||this,I=(K.openerType===2)||!!this.dic.dm||this.dicChanged;var H=this.type==="password"?"********":this.dv;this.renderPreviewButton(J,I?H:J.innerHTML);},getDisplayValue:function C(){return mstrmojo.string.encodeHtmlString(this.value);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo.android.controllers.SettingsController","mstrmojo.android._HasLingeringListSelections","mstrmojo.android.ui.Button","mstrmojo.ui.MobileCheckList","mstrmojo.android.ui.TextInput","mstrmojo.android.ui.ValidationTextInput","mstrmojo.expr","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.android.nativedialog.EditTextDialog","mstrmojo.android.nativedialog.ListDialog","mstrmojo.android.nativedialog.TimePickerDialog");mstrmojo.requiresDescs(221,1442,7883,9454);var $STYLES=mstrmojo.android.controllers.SettingsController.STYLES,$BTN=mstrmojo.android.ui.Button.newButton,$ARR=mstrmojo.array,$VAL=mstrmojo.validation,$TRIG=$VAL.TRIGGER,$SC=$VAL.STATUSCODE,itemMarkup={},$D=mstrmojo.dom,$TRANS_DURATION=$D.CSS3_TRANSITION_DURATION,$HASH=mstrmojo.hash;mstrmojo.android.ui.SettingsView=mstrmojo.declare(mstrmojo.android.SimpleList,[mstrmojo.android._HasLingeringListSelections],{scriptClass:"mstrmojo.android.ui.SettingsView",init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-AndroidSettings");},allowTouchBubble:false,getList:function getList(){return this;},listHooks:{select:function(el,item,idx){el.style[$TRANS_DURATION]=0;if(item.disabled){return true;}if(item.style!==$STYLES.VIEW_BUTTON){this.setClearHandler(200);}},unselect:function(el,item,idx){el.style[$TRANS_DURATION]="300ms";}},getItemMarkup:function(item){var s=item.style;if(!itemMarkup[s]){var newMarkup="<div><h3>{@ttl}</h3><h4>{@value}</h4></div>";if(s===$STYLES.TEXT_AREA){newMarkup='<div readonly="readonly">{@ttl}</div>';}else{if(s===$STYLES.IMAGE){newMarkup="<h3></h3>";}}itemMarkup[s]=this._super(item).replace("{@en@n}",newMarkup);}return itemMarkup[s];},getItemProps:function getItemProps(item,idx){var value=item.v,props=this._super(item,idx);props.ttl=item.nm;props.value=value||"";var cls=item.cls;if(cls){props.addCls(cls);}var fnTimeNumberText=function(){props.addCls("drop-down");if(item.pwd){props.value="********";}else{if(item.showHint&&value===""){props.value=mstrmojo.desc(9454,"&lt;not set&gt;");}}};switch(item.style){case $STYLES.TEXT_AREA:props.addCls("textarea");break;case $STYLES.HEADER:props.addCls("header");break;case $STYLES.TIME:props.value=new Date((item.v<60000)?item.v*60000:item.v).toJSON().replace(/.*T/,"").replace(/\.[0-9]{3}Z/,"");fnTimeNumberText();break;case $STYLES.NUMBER:case $STYLES.TEXT:fnTimeNumberText();break;case $STYLES.LIST:props.addCls("drop-down");var items=item.items;props.value=items[$ARR.find(items,"v",value)].n;break;case $STYLES.CHECK:props.addCls("check");if(value===item.on){props.addCls("on");}props.value=item.desc;break;}if(item.hidden){props.addCls("hidden");}else{if(item.disabled){props.addCls("disabled");props.value="";}}if(props.value){props.addCls("with-desc");}return props;},touchSelectBegin:function touchSelectBegin(touch){var idx=this.getItemIdxTouch(touch);if(idx>-1){var item=this.items[idx],fnPress=item.fnPress;if(fnPress){fnPress.call(this.controller,item);return false;}}return true;},preselectionChange:function preselectionChange(evt){var added=evt.added;if(!added){return true;}var idx=added[0],item=this.items[idx];if(item.disabled||item.noclick){return false;}if(item.style===$STYLES.HEADER){if(!this._listTarget.getAttribute("hidx")){return false;}}return true;},postselectionChange:function postselectionChange(evt){var added=evt.added;if(!added){return ;}var idx=added[0],item=this.items[idx];var me=this,dialogConfig={title:item.nm},dialogChildren=[],fnOk,dialog,fnUpdateValue=function(item,value){item.fn(value);me.updateItem(idx);};switch(item.style){case $STYLES.HEADER:var headerIdx=this._listTarget.getAttribute("hidx");if(headerIdx){this.controller.jumpTo(parseInt(headerIdx,10),true);}break;case $STYLES.BUTTON:case $STYLES.VIEW_BUTTON:if(item.fn){item.fn();}break;case $STYLES.NUMBER:case $STYLES.TEXT:var isNum=(item.style===$STYLES.NUMBER),tb={scriptClass:"mstrmojo.android.ui."+(isNum?"Validation":"")+"TextInput",alias:"textInput",textValue:item.v,textType:isNum?"number":(item.pwd?"password":"text"),onEnter:function(value){fnUpdateValue(item,value);dialog.close();}};if(isNum){tb.valProps={dtp:mstrmojo.expr.DTP.UNSIGNED,min:item.limits.min,max:item.limits.max,constraints:{trigger:$TRIG.ONKEYUP,validator:function(v){v=parseInt(v,10);var min=this.min,max=this.max,msg=(v>=min&&v<=max)?"":mstrmojo.desc(7883).replace("##",min).replace("###",max);return{code:msg?$SC.INVALID:$SC.VALID,msg:msg};}}};}dialogChildren.push(tb);fnOk=function(){var eb=dialog.textInput;if(eb.validate){eb.validate();if(eb.isValid()){fnUpdateValue(item,eb.getValue());return true;}return false;}fnUpdateValue(item,eb.getValue());return true;};break;case $STYLES.LIST:var items=item.items;var optionList=new mstrmojo.ui.MobileCheckList({items:items,multiSelect:false,isElastic:true,selectedIndex:$ARR.find(items,"v",item.v)});dialogChildren.push(optionList);fnOk=function(){fnUpdateValue(item,items[optionList.selectedIndex].v);};break;case $STYLES.CHECK:fnUpdateValue(item,(item.v===item.on)?item.off:item.on);break;case $STYLES.TIME:var v=(item.v<60000)?item.v*60000:item.v,date=new Date(v),timePicker=new mstrmojo.ui.MobileDateTimePicker({value:{time:{hour:date.getUTCHours(),min:date.getUTCMinutes(),sec:0}},is24HourMode:false,dtp:mstrmojo.expr.DTP.TIME});dialogChildren.push(timePicker);fnOk=function(){var time=timePicker.getTime();fnUpdateValue(item,time.hour*60+time.min);};break;}if(dialogChildren.length){dialogConfig.children=dialogChildren;if(fnOk){dialogConfig.buttons=[$BTN(mstrmojo.desc(221,"Cancel")),$BTN(mstrmojo.desc(1442,"OK"),fnOk)];}if(mstrApp.useBinaryFormat){var positiveButton=dialogConfig.buttons[1],dialogClazz;if(item.style==$STYLES.TEXT||item.style==$STYLES.NUMBER){if(item.style==$STYLES.NUMBER){dialogConfig.validator={min:item.limits.min,max:item.limits.max};}positiveButton.onclick=function(value){fnUpdateValue(item,value);};dialogClazz=mstrmojo.android.nativedialog.EditTextDialog;}if(item.style==$STYLES.LIST){$HASH.copy({onSelectionChange:function(index){fnUpdateValue(item,items[index].v);this.close();}},dialogConfig);dialogClazz=mstrmojo.android.nativedialog.ListDialog;}if(item.style==$STYLES.TIME){positiveButton.onclick=function(value){var time=eval("("+value+")").time;fnUpdateValue(item,time.hour*60+time.min);};dialogClazz=mstrmojo.android.nativedialog.TimePickerDialog;}if(!!dialogClazz){new dialogClazz(dialogConfig).show();return ;}}dialog=mstrApp.showDialog(dialogConfig);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.EditableLabel");var A=mstrmojo.css,E=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",markupMethods:{onenabledChange:function D(){this.txtLabel.set("enabled",this.enabled);this.txtLabel.set("editOnClick",this.enabled);A.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");},updatePreview:function C(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},validateTextInput:function(F){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:E.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;if(!!mstrApp.isWSStyling){this.layoutConfig=null;}this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,maxLength:G.maxLength,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.expr","mstrmojo.Button","mstrmojo.ui._HasListTooltip","mstrmojo.ui.PopupWidget","mstrmojo.ui.Pulldown","mstrmojo.ui.CheckList");var E=mstrmojo.hash,L=mstrmojo.array,K=mstrmojo.dom,G=mstrmojo.Button.newWebButton,F=mstrmojo.expr.TP.DIM;function H(Q){var R=this.parent,S=this.list;if(Q){this.saveSelection();R.submitSelections();}else{S.selectedIndices=E.copy(R.selectedIndices);}this.close();}mstrmojo.ui.PulldownCheckList=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PulldownCheckList",visible:false,itemCssText:"",onOpen:function C(){var Q=this.list;Q.updateScrollbars();},onClose:function N(){this.list.refresh();},adjustCheckListForPopupOverflow:function M(S){var V=this.domNode,U,R,Y=this.list,X=Y&&(Y.scrollNode||Y.scrollboxNode);if(S&&X){U=K.position(V);R=U.y;if(R+U.h>K.position(document.body).h){var Q=V.offsetHeight,W=X&&X.offsetHeight;X.style.maxHeight=K.getMaxScrollHeight()-(Q-W)+"px";Y.updateScrollbars();}}},getItemFromTarget:function O(Q){return this.list.getItemFromTarget(Q);},getItemNodeFromTarget:function B(Q){return this.list.getItemNodeFromTarget(Q);},adjustCornersForPopupOverflow:function J(){var Q=this._super();this.adjustCheckListForPopupOverflow(Q);return Q;},saveSelection:function D(){this.parent.set("selectedIndices",E.copy(this.list.selectedIndices));},postselectionChange:function I(a){var Z=this.list,X=Z.items,Y=a.added||[],V=a.removed||[],U=Z.selectedIndices,Q=this.parent.allIdx,W=X[Q],S=Y.length+V.length,R=false;if(W&&W.t===F&&S===1){if(Q===Y[0]){X.forEach(function(d,b){if(!U[b]){R=true;U[b]=L.indexOf(V,b)===-1;}});}else{if(Q===V[0]){U={};L.forEach(Y,function(b){U[b]=true;});R=true;}else{if(U[Q]){delete U[Q];R=true;}}}}if(R){Z.set("selectedIndices",E.copy(U));Z.refresh();}},onitemsChange:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.ui.CheckList",alias:"list",postBuildRendering:function A(){this.icnCssText=this.parent.itemCssText||this.icnCssText;this.parent.adjustCheckListForPopupOverflow();},postselectionChange:function I(Q){this.parent.postselectionChange(Q);},onitemsChange:function P(Q){this.parent.onitemsChange(Q);}},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Buttons",children:[G(mstrmojo.desc(1442,"Ok"),function(){H.call(this.parent.parent,true);},true,{cssDisplay:"inline-block"}),G(mstrmojo.desc(2140,"Cancel"),function(){H.call(this.parent.parent,false);},false,{cssDisplay:"inline-block"})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var K=mstrmojo.array,H=mstrmojo.dom,D=mstrmojo.hash,A=mstrmojo.Enum_Keys,C=19,M=A.ENTER,E=A.ESCAPE,N=A.DOWN_ARROW,F=A.UP_ARROW;mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,editOnClick:false,init:function P(V){this._super(V);var Q=this.getPopupList();Q.renderOnScroll=this.renderOnScroll||Q.renderOnScroll;Q.renderBlockSize=this.renderBlockSize||Q.renderBlockSize;var U=[];if((mstrApp.isWorkstation&&H.isMac())||H.isSafari){U=["clip-safari"];}mstrmojo.css.addWidgetCssClass(this,["mstrmojo-ui-SearchablePulldown"].concat(U));var S=Q.constructor.prototype,R=Q.getItemProps||S.getItemProps,W=Q.getItemMarkup||S.getItemMarkup;Q.getItemProps=function(b,Y){var Z=this._spft||"",e=b.n,a=e?e.toUpperCase().indexOf(Z):-1,X=function(g){var f=[],h;K.forEach(g.split(";"),function(j){h=j.split(":");if(h.length===2&&h[0].toLowerCase()!=="color"){f.push(j);}});return f.join(";");};if(a===-1){Z="";}var d=R.call(this,b,Y);if(this.selectedIndices[Y]){d.style=X(d.style);}if(e){d.before=e.slice(0,a);d.input=e.substring(a,a+Z.length);d.after=e.slice(a+Z.length,e.length);}return d;};Q.getItemMarkup=function(Z,X){var Y=W.call(this,Z,X);if(Z.n&&Z.v!=="u;"){return Y.replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");}return Y;};this._originalFocusOnPopup=this.focusOnPopup;this.focusOnPopup=false;},onclick:function O(Q){if(this._originalFocusOnPopup!==undefined){this.focusOnPopup=false;}if(this.isClickingAnchorSlot(Q)){var S=Q.e.offsetX>=(this.selectedNode.offsetWidth-C),R=this.getPopupWidget().visible;if(!R||(R&&S)){this.set("isEditing",!R);this._super(Q);}else{if(!this.isEditing){this.set("isEditing",true);}}}},setDefaultListAndIndex:function(V,W){var U=this.getPopupList(),R=this.text,Q=K.find(V,"n",R);if(Q===-1&&!this.allowCustomText){var S=U.items[0]||V[0];Q=K.find(V,"n",S.n);}U.set("items",V);if(W){this.set("selectedIndex",Q);}},onPopupWidgetClosed:function I(Q){this.set("isEditing",false);var R=this.getPopupList(),S=R._oldItems;delete R._oldItems;if(S){this.setDefaultListAndIndex(S,Q&&Q.pressingEnter);}},_set_selectedIndex:function G(S,Q){if(this.allowCustomText&&Q===-1){this.selectedIndex=-1;this.onitemSelected(null,Q);}else{this.isSearching=false;this._super(S,Q,true);if(this.hasRendered){var R=this.selectedNode;this.text=R.innerText||R.textContent;}}return true;},onkeydown:function J(S){this._super(S);var R=window.event||S.e,U=R.keyCode,Q=this.getPopupWidget();if(U===M){Q.close({pressingEnter:true});}else{if(this._originalFocusOnPopup&&(U===N||U===F)){this.focusOnPopup=true;if(Q.focus){Q.focus();}Q.raiseEvent(S);}}},onkeyup:function B(S){var Q=window.event||S.e,U=Q.keyCode,R=this.getPopupWidget();this._super(S);if(U===E||U===M){R.close();}else{if(U!==N&&U!==F){this.processSearch();}}},processSearch:function L(){this.isSearching=true;this.hideTooltip();var Q=[],S=this.getPopupList(),V=this.selectedNode.innerHTML,W=S._oldItems||S.items,R=V.toUpperCase(),U;R=R.replace(/<BR>/,"");if(R.length>0){K.forEach(W,function(X){U=X.n;if(U&&U.toUpperCase().indexOf(R)>-1){Q.push(D.clone(X));}},this);}else{Q=W;}S._spft=R;if(this.customizeSearchResult){this.customizeSearchResult(Q);}S.set("items",Q);if(S.adjustCornersForPopupOverflow){S.adjustCornersForPopupOverflow();}delete S._spft;S._oldItems=W;S.set("visible",S.items.length!==0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.ui.menus.MenuConfig");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var S={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};mstrmojo.AndroidVisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.AndroidVisBase",updated:false,waitingForData:false,node:null,skipReRender:false,updateFormatsOnUpdate:true,setModel:function L(Z){this.set("model",Z);},destroy:function W(){var Z=this.model;if(Z&&Z.destroy){Z.destroy();delete this.model;}this._super();},resize:function X(){var Z=this.getFormats();if(parseInt(Z.height,10)===0||parseInt(Z.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(Z.height,Z.width);this.domNode.style.display="";}},setDimensions:function N(b,a){var Z=this._super(b,a);if(Z&&this.hasRendered&&!this.skipReRender){this.reRender();}return Z;},reRender:function F(){this.unrender();this.render();},getWidth:function B(){return parseInt(this.width,10);},getHeight:function I(){return parseInt(this.height,10);},getLeft:function Q(){return parseInt(this.left,10);},getTop:function A(){return parseInt(this.top,10);},buildRendering:function H(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function V(){},postBuildRendering:function(){var Z=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:Z,controls:this.getVisEmptyMsgControls()});return !Z;},update:function G(d){d=d||this.node;if(d){var Z=d.data;if(Z){this.model.set("data",Z);}this.waitingForData=!!Z.nsj;if(this.waitingForData){var a="ServerJsonRWDStyle";var f=this.model,b=f.getDataService(),g={host:this,nodes:[this.k]};if(Z.wid!==undefined){g.slices=[Z.wid];}b.retrieveServerJson(g,mstrmojo.func.wrapMethods(f.docModel.getUpdateColorMapCallback(),f.docModel.getUpdateThemePaletteCallback(),f.controller._getXtabCallback(this)),{preserveUndo:true,style:{name:a,params:{treesToRender:3}},params:{styleName:a}});this.updated=true;return false;}if(this.updateFormatsOnUpdate){var j=d.defn.fmts||d.defn.units[this.model.k].fmts;if(j){for(var e in S){if(S.hasOwnProperty(e)){var l=S[e];if(e in j){this[l]=j[e];}}}}}}if(this.model){var o=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(o&&o.getDocBuilder){var h=o.getDocBuilder().getMojoVisName(d);if(h){d.data.visName=h;}}}this.updated=true;if(this._super){return this._super(d);}return true;},isEmpty:function K(){return false;},getVisEmptyMsgControls:function D(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function M(){return this.model;},getData:function J(){return this.model.data;},getRowsAndCols:function(){var Z=this.model.data.gts;return(Z.row||[]).concat(Z.col||[]);},getExp:function(){var Z=this.model.data,a=Z&&Z.sc&&Z.sc.exp;return a;},getDocModel:function R(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function U(){return mstrmojo.emptyFn;},renderErrorMessage:function Y(Z){this.domNode.innerHTML='<div class="mstrmojo-message">'+Z+"</div>";},getMessageID:function E(){return this.model.docModel.mid||this.model.mid;},performAction:function P(Z){var b=this.model.getAction(Z),a=b&&b.h;if(a&&this.controller[a]){this.controller[a](this,b.a);return true;}return false;},deleteSelectorControl:function C(){var Z=this.getData(),a=Z.sc;if(a&&parseInt(a.ct,10)===6){delete Z.sc;}},findSelectorControl:function O(){var a=this.getData(),Z=a&&a.sc;if(Z&&parseInt(Z.ct,10)===6){this.selectorControl=Z;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.ME.MetricDataService");mstrmojo.requiresDescs(3224);var Z=["(",")","{","}","-","+","*","/","<",">","|","~",","],I={" ":true,"@":true},Y=null,X=mstrmojo.dom,K=mstrmojo.css,H=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,a=mstrmojo.ME.MetricDataService;function O(f){if(!Y){Y={};var e,d;for(e=0,d=Z.length;e<d;e++){Y[Z[e]]=true;}}return Y.hasOwnProperty(f);}function b(f){if(!f){return false;}var d=f.length,e,g;for(e=0;e<d;e++){g=f.charAt(e);if(g==="["){return false;}if(O(g)||I[g]){return true;}}return false;}function A(d){return b(d)?"["+d+"]":d;}function M(h){if(!h){return null;}var d=h.length,g=h.split("["),f=g.length,k,j;if(f===1){return h.split("@");}else{if(f===3){k=g[1];k="["+k.substring(0,k.length-1);j="["+g[2];}else{if(g[0].length===0){var l=g[1],e=l.indexOf("]");k="["+l.substring(0,e+1);if(e===l.length-1){return[k];}else{j=l.substring(e+2);}}else{var l=g[0];k=l.substring(0,l.length-1);j="["+g[1];}}}return[k,j];}var R={8:true,9:true,10:true};var C=function(e,d){return R[e]&&!/^\".*\"$/.test(d)?'"'+d+'"':d;};var F=function(e,d,f){var g=typeof f==="undefined"?true:R[f];if(d.length===2&&d==='""'){return d;}return e.tp===261&&d.length>=2&&g?(/^\s+$/.test(d.substr(1,d.length-2))?d:d.substr(1,d.length-2)):d;};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}" mstrAttach:contextmenu></span>',active:false,markupMethods:{ondataChange:function(){var f=this.data,g=this.isEmbeddedFilter(),e=g?"&nbsp;":mstrmojo.string.encodeHtmlString(String(f.v));if(f.v===","){this.domNode.innerHTML=e+"&nbsp;";}else{if(f.tp===259&&f.v==="Desc"){this.domNode.innerHTML="&nbsp;"+e;}else{if(a.isLogicOrCompFunc(f)){this.domNode.innerHTML="&nbsp;"+e+"&nbsp;";}else{this.domNode.innerHTML=e;}}}K.toggleClass(this.domNode,["mstr"],this.isMstrO());K.toggleClass(this.domNode,["nfn"],!this.isFunction());K.toggleClass(this.domNode,["invalid"],f.sta===-1);K.toggleClass(this.domNode,["embeddedFilter"],g);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},oncontextmenu:function V(d){this.closePopup();if(this.isEmbeddedFilter()){var f=new mstrmojo.ui.menus.MenuConfig({position:X.getMousePosition(d.e,d.hWin),isHostedWithin:false,alignWithAnchor:true});var e=this;f.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){var g=e.parent;if(g&&g.editEmbeddedFilterToken){g.editEmbeddedFilterToken(e);}});this.openPopup(f.newInstance());}},isMstrO:function W(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t===H.Function);},isEmbeddedFilter:function J(){var f=this.data.oi,e=f&&f.t,d=f&&f.st;return this.isMstrO()&&e===H.Filter&&d===D.Filter&&f.isEmbedded;},brackets:A,length:function E(){return this.isEmbeddedFilter()?1:this.data.v.toString().length;},isDelimiter:function U(){return this.data.isDelimiter||(this.length()===1&&O(this.data.v));},split2Tokens:function L(h){var g=this.data,f=g&&g.v.toString(),j=f.substring(0,h),e=f.substring(h);return[{v:j,isNew:true},{v:e,isNew:true}];},mergeTo:function N(f){var h=this.data,g=h&&h.v.toString(),e=f.data.v.toString();return{v:g+e,isNew:true};},brackets:A,setItemInfo:function S(e){var f=this.data;f.v=this.brackets(e.n);f.oi=e;f.sta=1;f.isNew=true;this.set("data",f);this.paint();},spliceContent:function P(l,j,f){var k=this.data,h=k&&k.v.toString(),o=h.substring(0,l);j=(j===null||j===undefined)?(h.length-l):j;var e=h.substring(l+j),g=o+(f||"")+e;k.v=g;k.isNew=true;k.sta=1;k.ift=(this.isAttributeToken()||k.at)&&(k.v.indexOf("@")>=0);if(k.ift){k.at=k.oi||k.at;}else{delete k.at;}delete k.oi;delete k.exv;delete k.extp;delete k.tp;this.set("data",k);this.paint();},isAttributeToken:function G(){return this.data&&this.data.oi&&this.data.oi.t===H.Attribute;},setFormInfo:function Q(f){var g=this.data,e=g.oi||g.at;g.v=this.brackets(e.n)+"@"+this.brackets(f.n);g.exv=f.did;g.extp=8;g.sta=1;g.isNew=true;g.oi=g.at;delete g.at;this.set("data",g);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=O;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.splitAttrAndAttrForm=M;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=F;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=R;mstrmojo.ME.MetricToken.argDelimiter={".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",";})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi._MonitorsLayoutMode","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.css");var A=mstrmojo.css,N=mstrmojo.dom,M="draggedTab",J="stopDragging",p=1,L=2,u=4,G=8,o=16;function q(w){return function(){A.toggleClass(this.tabStripMenuNode,"active",w);};}function j(AH){var AC=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:N.getMaxScrollHeight()}),w=this.getMenuActions(),AF=this.index,z=this.id,AA=this.total,AD=this.parent,x=function(){var AI=AD&&AD.getTabs();return AI&&AI.length>AF?AI[AF]:mstrmojo.all[z];};if((w&o)>0){this.addNewTabMenuItem(AC);}if((w&u)>0){var AE=mstrmojo.desc(3397,"Duplicate"),AG=this.parent.scriptClass;if(AG.indexOf("LayoutTabStrip")>=0){AE=mstrmojo.desc(15022,"Duplicate Chapter");}else{if(AG.indexOf("PanelTabStrip")>=0){AE=mstrmojo.desc(14923,"Duplicate Page");}}AC.addMenuItem(AE,"dup",function(){x().tabDuplicated();});}if((w&L)>0){if(AF){AC.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){x().tabMoved(true);});}if(AF<AA-1){AC.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){x().tabMoved(false);});}}AC.addSeparator();if((w&p)>0){AC.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){x().lbl.set("isEditing",true);});}if((w&G)>0){if(AA>1){AC.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){x().tabDeleted();});}}var AB=this.getCustomMenu();if(AB&&AB.hasMenuItems()){AC.addSeparator();AC.absorbMenuItems(AB);}AC.addPopupHandlers(this.id,q(true),q(false));this.showTabMenu(this.updateMenuCfg(AC),AH);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState,mstrmojo.vi._MonitorsLayoutMode],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:contextmenu,click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function S(){return this.domNode.firstChild.firstChild;},menuBtnNode:function t(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function I(){this.lbl.set("text",this.title);},onisSelectedChange:function k(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function l(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,isCutoff:false,isHidden:false,isLeftMost:false,isRightMost:false,leftEdgeHiddenWidth:0,rightEdgeHiddenWidth:0,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function W(x,w){if(x){this.parent.titleEdited(this.text,w);}}}],postBuildRendering:function Q(){var w=this.isValidMode();if(!w||(mstrApp.isLayoutModePreview&&mstrApp.isLayoutModePreview())){this.draggable=false;}this.lbl.set("editOnDoubleClick",w);this._super();},oncontextmenu:function b(w){this.onclick(w);w.preventDefault();},onclick:function f(w){var z=this.domNode;if(A.hasClass(z,J)){A.removeClass(z,J);return ;}var x=function(){if(this.isValidMode()){this.postTabClicked(this,w);}};if(!this.isSelected){this.tabSelected({success:x.bind(this)});}else{x.call(this);}},postTabClicked:function s(AA,x){AA=this.findSelectedTab(this)||AA;var w=AA.menuBtnNode,AB=x.getTarget().className===w.className,z;if(AB){z=N.position(w);}if(x.name==="contextmenu"||(AB&&!(z.x||z.y))){z={x:x.e.clientX,y:x.e.clientY};}if(z){j.call(AA,z);}},getMenuActions:function e(){return 0;},getCustomMenu:function Y(){return null;},isDragValid:function R(){return this.parent.children.length>1&&!this.lbl.isEditing&&this.isValidMode();},createAvatar:function U(){var w=document.createElement("div");w.appendChild(this.domNode.cloneNode(true));w.style.margin="-5px 0 0 10px";return w;},addTabDnDStyle:function X(){var w=this.lbl.domNode;if(w&&!this.isSelected){A.addClass(w,M);}},clearTabDnDStyle:function F(){var w=this.lbl.domNode;if(w&&!this.isSelected){A.removeClass(w,M);}},allowDrop:function D(w){var x=w.src.widget;return x&&x.parent===this.parent;},dropTab:function K(w){var AA=w.src,z=AA.data,x=AA.widget;x.clearTabDnDStyle();this.parent.moveTab(z.idx,this.index,z.fromIdx);},ondragenter:function H(x){this._super(x);var AA=x.src.data,z=x.src.widget,w=this.index;this.parent.moveTab(AA.idx,w);AA.idx=w;},ondragover:function a(z){var w=z.tgt.node,x=z.tgtData,AA=x&&x.node,AB=z.src.widget;if(!x||AA!==w){z.tgtData={node:w};}if(AB&&!AB.isSelected){AB.addTabDnDStyle();}},ondragleave:function P(w){this._super(w);var x=w.src.widget;if(x&&!x.isSelected){x.addTabDnDStyle();}},ondragend:function C(w){this._super(w);A.addClass(this.domNode,J);this.dropTab(w);},getDragData:function d(){var z=this.id,w=this.index;return{setAvatarClass:function x(AA){var AD=mstrmojo.all[z],AB=AD.avatar;if(AB){var AC=[AD.avatarCssClass,"hasOwnAvatar",AA];AB.className=AC.join(" ");}},fromIdx:w,idx:w};},getDropAvatarIcon:function B(){return"pivot";},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},cleanUpAfterTarget:function g(w){this.clearTabDnDStyle();this._super(w);},onAppStateChange:function h(x){var AA=this.lbl,z=this.isValidMode(),w=mstrApp.isLayoutPreview(x.value);AA.set("isEditing",false);AA.set("editOnDoubleClick",z);this.draggable=z&&!w;},onLayoutModeChange:function O(x){var z=this.isValidMode(),w=mstrApp.isLayoutPreview(x.value);this.draggable=z&&!w;},addNewTabMenuItem:function V(w){this.throwAbstractMethodError("addNewTabMenuItem");},findSelectedTab:mstrmojo.emptyFn,tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function Z(w){return w;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:o,RENAME:p,MOVE:L,DUPLICATE:u,DELETE:G};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.GraphBase","mstrmojo._Formattable","mstrmojo._IsSelectorTarget","mstrmojo.tooltip","mstrmojo.vi.enums.EnumFeatures");var S=mstrmojo.dom,L=mstrmojo.array,J=mstrmojo.mstr.EnumDSSXMLDrillType,R={SORT:8},C=mstrmojo.vi.enums.EnumFeatures;function B(Z){var a=Z.getFormats();if(!a.width&&"gp" in a){a=a.gp;}Z.resizeForDisplayState(parseInt(a.height,10),parseInt(a.width,10),false);}function V(a){var Z="";switch(a){case J.DssXmlDrillToChild:Z="drillDown";break;case J.DssXmlDrillToParent:Z="drillUp";break;case J.DssXmlDrillToTemplate:Z="drillTemplate";break;}return Z;}function F(a){var Z=S.position(this.domNode,true),b=S.getMousePosition(a);return{x:b.x-Math.floor(Z.x),y:b.y-Math.floor(Z.y)};}function M(Z,b){var d={x:b.offsetX,y:b.offsetY},a=Z.coords.split(",");switch(Z.shape){case"rect":case"poly":d=F.call(this,b);break;case"circle":d.x=a[0];d.y=a[1];break;}return{x:parseInt(d.x,10),y:parseInt(d.y,10)};}function I(h,g){var b=S.eventTarget(g,h),f=b&&b.parentNode,j=f&&f.children,Z=[],d=b.getAttribute("coords");if(j&&!!d){for(var a=0;a<j.length;++a){if(j[a]&&j[a].getAttribute&&j[a].getAttribute("coords")==d){Z.push(j[a]);}}}return Z;}function E(d,f,b,a,Z){return function(){var h=F.call(d,f),g={taskId:"getElementFromGraph",msgID:d.model.docModel.mid,nodeKey:d.node.k,sliceID:d.node.data.sid,x:parseInt(h.x),y:parseInt(h.y)},e={success:function(k){var j={mix:a,els:k.els},l=d.model.getLinkActionImpl(j,b,Z);d.controller.onLink(d,l);},failure:function(j){}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,e,g);};}function N(a,Z){return((((a&&a.actions)||0)&Z)>0);}mstrmojo.DocXtabGraph=mstrmojo.declare(mstrmojo.GraphBase,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.DocXtabGraph",cssClassPrefix:"mstrmojo-DocXtabGraph",areaMarkup:'<area shape="{@shape}" coords="{@coords}" ttl="{@tooltip}" aid="{@aid}" onclick="mstrmojo.all[\'{@id}\'].onClickArea(this, event);" oncontextmenu="mstrmojo.all[\'{@id}\'].onContextMenu(this, event);" onmousemove="mstrmojo.all[\'{@id}\']._updateTooltip(event, self);" {@extra}/>',_att:"",markupSlots:{imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["RW","B","background-color","fx"]},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";}},onClickArea:function U(b,f){f=f||window.event;var l=F.apply(this,[f]),g=this.defn,Z=S.position(this.domNode,true),a=this.as[b.getAttribute("aid")],k=this.k,j=l.x,h=l.y,d={getBoundingClientRect:function(){var o=Z.x+j,e=Z.y+h;return{left:o,top:e,right:o+1,bottom:e+1};},w:this};this.showInfoWin(a.ifw,a.tks,d);this.model.docModel.slice({type:parseInt(g.t,10)||mstrmojo.EnumRWUnitType.GRAPH,src:k,ck:g.ck,gk:k,tks:a.tks,cks:a.cks,sid:this.node.data.sid,x:j,y:h,anchor:d,tty:a.tty});},onContextMenu:function Q(f,l){l=l||window.event;var p=this,t=this.getFormats(),Z=parseInt(t.height,10),j=parseInt(t.width,10),d=this.as[f.getAttribute("aid")],o=d.lm||[],h=d.dp||[];mstrmojo.dom.preventDefault(window,l);var k=new mstrmojo.ui.menus.MenuConfig({hostId:this.id,isHostedWithin:false,hostElement:this,position:{x:l.pageX,y:l.pageY}});if(o.length!==0){k.addPopupMenuItem(mstrmojo.desc(5752,"Links"),this.id,function(){var x=new mstrmojo.ui.menus.MenuConfig();for(var w=0;w<o.length;w++){var e=o[w].links;for(var u=0;u<e.length;u++){x.addMenuItem(e[u].n||e[u].url||(e[u].target&&(e[u].target.n||e[u].target.did)),"",E(p,l,d,w,u));}}return x;});}var s=function s(x){var w=x.onDemandDrillItems;var u=x.onDemandDrillDynamicItems;if((!x.onDemandDrillItems||x.shouldUpdateDrillMenus)&&!x.loadingDCM){x.loadingDCM=true;delete x.shouldUpdateDrillMenus;var AA=new mstrmojo.SimpleXHR({async:false});AA.request("POST",mstrConfig.taskURL,{success:function z(AC){var AB=AC.dynamicMenus[0];if(AB&&AB.items){u=AB.items;}w=AC.menuItems;x.onDemandDrillItems=w||[];x.onDemandDrillDynamicItems=u||[];delete x.loadingDCM;}},{taskId:"RWOnDemandDrill",styleName:"OndemandDrillContextMenusStyle",viewMode:2,docGridKey:x.k,rwb:mstrApp.docModel.bs});}var e=[];L.forEach(u,function(AF){var AB=AF.idx,AC=w[AB],AE=JSON.parse(AC.subMenuIndices||"[]");if(AE.length>0){var AD=[];mstrmojo.array.forEach(AE,function(AG){AD.push(w[AG]);});AC.items=AD;}e.push(AC);});return e;};var g=s(this.model.xtab);if((h.length>0||g.length>0)&&mstrmojo.resolveFeature(C.WEB_DRILL_AND_LINK)){var q=M.call(this,d,l);var b=this.model.data.sid;k.addPopupMenuItem(mstrmojo.desc(145,"Drill"),this.id,function(){var u=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"drill",isHostedWithin:false,supportsScroll:true,maxHeight:mstrmojo.dom.windowDim().h-50});L.forEach(h,function(x){if(mstrApp.isDossier&&!x.dwi){return ;}u.addMenuItem(x.n,V(x.tp),function w(){p.model.xtab.shouldUpdateDrillMenus=true;p.controller.onDrillGraph(p,{displayType:x.displayMode||2,drillPathKey:this.ctxt.key,x:q.x,y:q.y,graphHeight:Z,graphWidth:j,n:this.ctxt.n,isWithin:this.ctxt.dwi,sliceId:b},{});},x);});var e=function(){p.model.xtab.onDemandDrillItems=null;p.model.xtab.onDemandDrillDynamicItems=null;};L.forEach(g,function(w){if(mstrApp.isDossier&&!L.some(w.items,function(x){return(x.within);})){return ;}u.addPopupMenuItem(w.n,"",function(){var x=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"drill",isHostedWithin:false,supportsScroll:true,maxHeight:350});L.forEach(w.items,function(z){if(mstrApp.isDossier&&!z.within){return ;}x.addMenuItem(z.n,V(z.dt),function(){p.model.xtab.shouldUpdateDrillMenus=true;var AA=this.ctxt;p.controller.onDrillGraph(p,{displayType:z.displayMode||2,drillPathKey:AA.k,x:q.x,y:q.y,graphHeight:Z,graphWidth:j,n:this.ctxt.n,isWithin:AA.within,sliceId:b},{});e();},z);});return x;});});return u;});}if(N(this.model.data,R.SORT)){if(!mstrApp.isDossier){k.addMenuItem(mstrmojo.desc(6089,"Sort graph"),this.id,function(){p.controller.onGetAdvSortData(p,1,-1);});}}if(mstrmojo.resolveFeature("use-view-filter-editor")){k.addMenuItem(mstrmojo.desc(3938,"edit view filter..."),this.id,function(){p.controller.onShowFilterEditor(p);});}if(k.hasMenuItems()){var a=k.newInstance();if(this._lastOpened){mstrmojo.css.removeClass(this._lastOpened?this._lastOpened.popupConfig.hostElement:null,"open");mstrmojo._HasPopup.closePopup.call(this);}mstrmojo._HasPopup.openPopup.call(this,a);mstrmojo.css.addClass(a?a.popupConfig.hostElement:null,"open");}return false;},showInfoWin:function P(e,f,a){var Z=this.model.docModel,d=[].concat(Z.getTargetInfoWin(e)).concat(Z.getTargetInfoWin(f));if(d&&d.length){for(var b=0;b<d.length;b++){Z.showInfoWin(d[b],a,"h");}}},showTooltip:function D(b,a){this._updateTooltip(b,a);var Z=I(b,a);if(Z&&Z.length>1){mstrmojo.DocXtabGraph.multiTooltip.open(this,b,a,Z);}else{this._super(b,a);}},_updateTooltip:function O(Z,a){this.updatingTooltipHelper(S.eventTarget(a,Z),F.apply(this,[Z]));},hideTooltip:function H(d,b){var a=S.eventTarget(b,d);if(a.getAttribute("aid")===this.cAreaIdx){this.cAreaIdx=-1;var Z=I(d,b);if(Z&&Z.length>1){mstrmojo.DocXtabGraph.multiTooltip.close(this,d,b,Z);}else{this._super(d,b);}}},update:function K(Z){this.node.data=Z.data;this.as=Z.data.as;var s="\u001E",d=this.model.docModel,o=d.getCGBMap&&d.getCGBMap(),b=this.as||[],h,f;for(h=0;h<b.length;h++){var p=b[h],g=p&&p.tgbs;if(g){var l=g.split(s);var q={};for(f=0;f<l.length;f++){var e=o&&o[l[f]];if(e){q[e]=true;}else{q[l[f]]=true;}}p.tks=mstrmojo.hash.keyarray(q).join(s);}}this.eg=Z.data.eg;this.gridInfo=Z.data.gsi;if(Z.defn&&Z.defn.tooltip){this.defaultTooltip=Z.defn.tooltip;}var d=this.model;if(d){d.set("data",Z.data);}},retrieveGraphSrc:function G(a,Z){var d=mstrConfig.taskURL+"?taskId=getRWGraphImage&taskEnv=xhr&__ts__="+(new Date().getTime())+"&messageID="+this.model.docModel.mid+"&nodeKey="+this.k+"&sliceID="+parseInt(this.node.data.sid,10)+"&imgType=4&width="+parseInt(Z,10)+"&height="+parseInt(a,10),b=this.imgNode;if(b.src!==d){b.src=d;}},resize:function(){B(this);},resizeForDisplayState:function Y(b,a,g){var e=this.getFormats(),d=this.imgNode;if(g){var Z=this.domNode.style;Z.top=e.top;Z.left=e.left;Z.height=e.height;Z.width=e.width;}if(d){d.style.height=b+"px";}if(this.eg===undefined){if(b){this.retrieveGraphSrc(b,a);this.refreshMap();}}}});function X(Z){var b=Z&&Z.getAttribute&&Z.getAttribute("coords");b=(b&&b.split(","))||[];switch(b.length){case 3:return b[2]*2;case 4:return b[2]-b[0];default:return 10;}}function A(b){var a=[],g=document.body.offsetWidth,Z=document.body.offsetHeight,h=0,e=0,k=W[0]&&W[0].domNode?W[0].domNode.offsetLeft:0,j=W[0]&&W[0].domNode?W[0].domNode.offsetTop:0,q=Math.ceil(W.length/2),d=5,o=function(s,p){if(s+b+p+d>g){return g-b-p-d;}else{if(W.length>1&&s-p-d<0){return p+d;}}return s;},l=function(u,s,p){u+=s;var t=p==1?s:(p*s+(p-1)*d)/2;if(t>u){return 0;}else{if(t+u>Z){return Z-t*2;}else{return u-t;}}};for(var f=0;f<W.length;++f){h=Math.max(h,W[f].containerNode.offsetWidth);e=Math.max(e,W[f].containerNode.offsetHeight);}k=o(k,h);j=l(j,e,q);for(var f=0;f<W.length;++f){if(f%2==0){a.push({l:k+b+d,t:j});}else{a.push({l:k-W[f].containerNode.offsetWidth-d,t:j});j+=e+d;}}return a;}var W=[];mstrmojo.DocXtabGraph.multiTooltip={_posMultiTp:function(a){for(var Z=0;Z<W.length;++Z){W[Z].domNode.style.left=a[Z].l+"px";W[Z].domNode.style.top=a[Z].t+"px";}},open:function(l,h,g,a,Z){if(!Z){Z={};}Z.e=h;Z.win=g;var d=0;if(a&&a.length){d=X(a[0]);}for(var b=0;b<a.length;++b){var k=W[b];if(!k||!mstrmojo.all[k.id]){k=new mstrmojo.Tooltip();var f=0,j=this;k.optimizePos=function(){f++;if(f>=W.length){f=0;j._posMultiTp(A(d));}};W.push(k);}l.richTooltip.content=a[b]&&a[b].getAttribute("ttl");k.open(l,Z);}},close:function(){for(var Z=W.length-1;Z>=0;--Z){W[Z].close();}W=[];}};}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.string","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList","mstrmojo.DI.DIConstants");var Q=mstrmojo.hash,Z=mstrmojo.func,A=mstrmojo.string,M=mstrmojo.meta.TP,G="5CECE58CC1D549F890EB61C4DB2156A3",W="E0CCB9CF22104A489CBE78D974AFD19E",S=mstrmojo.chart.model.enums.EnumDSSObjectType,L=mstrmojo.array,E=mstrmojo.dom,P=mstrmojo.DI.DIConstants,b=function(l,o,f){var j=l.scrollableIncFetch,h=j?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",k={scriptClass:h,items:o.items,multiSelect:f};if(j){k.browseConfig={blockBegin:o.bb,blockCount:o.bc,totalSize:o.sz,folderLinksContextId:l.folderLinksContextId,rootFolderID:o.did,browsableTypes:l.browsableTypes,browsableViewMedias:l.browsableViewMedias,dataProvider:l.dataProvider};k.onwaitingChange=function(){if(l.booklet){l.booklet.set("waiting",this.waiting);}};}var g=mstrmojo.insert(k);g.render();return g;},B=function(j,k,f){var g=mstrmojo.ObjectBrowser.widgetHandler||b;return g(j,k,f);},O={success:function(h){var j=this.ob,g=h.items,k=j.pageCache[j.currentPage],f=k._w;k.items=g;f.set("items",g);this.ob=null;this.item=null;window.clearTimeout(j._btm);j.booklet.set("waiting",false);if(j.scrollableIncFetch&&f.scrollNode){f.initScroll();f.updateScrollbars();}},failure:function(f){window.alert(f.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},V=function(l,k,h){var j=h?-1:1,g=l.pageCache.length,o;for(o=l.currentPage+j;o<g&&o>=0;o+=j){var f=l.pageCache[o];if(f._k===k.k){return{steps:o-l.currentPage,cache:f};}}return null;},D=function(k,j,h,o){var p=k.currentPage+1,g=k.pageCache.length,f;for(f=p;f<g;f++){k.pageCache[f]._w.destroy();delete k.pageCache[f].items;}k.pageCache=k.pageCache.slice(0,p);o._w=h;o._k=j.k;k.pageCache[p]=o;k.cacheChange();},I=function(g){var f=mstrmojo.hash.walk("anc.items.0.items",g);this.set("canGoUp",!(!g.pf||!f));},J=function(k,j,l,h,g){delete k._btm;var f;if(!h){f=B(k,l,k.multiSelect);f.attachEventListener("change",k.id,"navigate");if(k.useDblSelect||k.useBothSglDblSelect){f.attachEventListener("dblclick",k.id,"dblselect");}}else{f=l._w;}k.obList=f;k.booklet.turn(f,g>0);window.setTimeout(function(){k.onBrowsing=false;},300);if(!h){D(k,j,f,l);}k.set("currentFolder",l);k.set("currentPage",k.currentPage+g);k.updateUpButton(l);if(k.scrollableIncFetch&&f.scrollNode){f.initScroll();f.updateScrollbars();}},R=function(h,g,f){var j=V(h,g,false);j=j||V(h,g,true);if(!j){window.clearTimeout(h._btm);h._btm=window.setTimeout(function(){h.booklet.set("waiting",true);},300);f.ob=h;f.item=g;h.getDataProvider().fetchFolderContents(h,g,f);}else{J(h,g,j.cache,true,j.steps);}},C=function(g,h,j,f){R(g,{fid:g.pageCache[g.currentPage].did,blockBegin:h,searchPattern:j,recursive:f},O);},K={success:function(g){var h=this.ob;if(h){window.clearTimeout(h._btm);if(!g.items){g.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var f=function k(l){var q=l.length,o;for(o=0;o<q;o++){var p=l[o];if(p.did===G||p.did===W){p.n=(p.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(p.items){f(p.items);}}};if(g.did===G||g.did===W){g.n=(g.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(g.anc&&g.anc.items){f(g.anc.items);}}if(g&&g.items&&h.browsableViewMedias){var j={};L.forEach(h.browsableViewMedias.split(","),function(l){j[parseInt(l,10)]=true;});g.items=L.filter(g.items,function(l){return(l.t!==S.DssTypeDocumentDefinition)||j[l.dvm];});}if(g&&g.items&&mstrApp&&mstrApp.isSingleTier){g.items=L.filter(g.items,function(l){return(l.st!==772);});}if(h.isImportFromCube){g.items=L.filter(g.items,function(l){return(l.et!==P.DSSExType.DSSEXDISPARK);});}if(g.did&&this.item.k!==g.did){this.item.k=g.did;}J(h,this.item,g,false,1);this.ob=null;this.item=null;}},failure:function(f){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(f);}else{if(f.getResponseHeader){mstrmojo.alert(f.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(f.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},e=function(h){var g=h.pageCache.length,f;for(f=0;f<g;f++){h.pageCache[f]._w.destroy();}h.pageCache=[];h.currentPage=-1;h.cacheChange();},N=function(j,h,k){var f=j.onBrowseFolder;if(f){f[0][f[1]](h);}if(h&&parseInt(h.acg,10)===33){return ;}var g={};if(h){g.k=h.did;g.fid=h.did;}else{if(j.rootFolderID){g.k=j.rootFolderID;g.fid=j.rootFolderID;}else{if(j.rootFolderType){g.k=j.rootFolderType;g.fty=j.rootFolderType;}else{if(j.folderLinksContextId){g.k=j.folderLinksContextId;}}}}R(j,g,Z.wrapMethods(k,Q.copy(K)));},Y=function(l,f,h){if(!h){return f;}var j=l.showCompletePath,p=f[0],k,g;while(p){var o;for(o=h.length-1;o>=0;o--){if(p.did===h[o].did){h.splice(o,1);p._isSc=true;}}g=p;p._open=true;p=p.items;p=p&&p[0];if(!p){g.lastLeaf=true;}}if(!j){p=f[0];while(p){if(p._isSc){f[0]=p;break;}p=p.items;p=p&&p[0];}}return f.concat(h);},X=function(g,f,h){g._naviInfo=Y(g,f,h);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",alias:"popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var f=this.opener.parent.parent,j=this.tree,h=f._naviInfo,g=this.parent.parent.parent.extraDDItems;if(j.items!==h){j._pup=this;this.ob=f;if(g){L.forEach(g,function(k){k.isExtra=true;});h=h.concat(g);}j.set("items",h);}if(f.getRecents&&!mstrApp.isSingleTier){f.getRecents(this);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(k,f,g){var j=mstrmojo.WidgetTree.prototype.itemFunction(k,f,g);if(k.isExtra){if(k.cssClass){j.cssClass=k.cssClass;}j.onmousedown=k.onmousedown||mstrmojo.emptyFn;return j;}if(k._open){j.state=1;}j._ll=!!k.lastLeaf;j._pup=g._pup;j.onmousedown=function(l){var o=mstrmojo.dom.eventTarget(l.hWin,l.e),q=this._pup;if(o===this.domNode||o===this.textNode){if(!this._ll){N(q.ob,this.data);}q.close();}};j.markupMethods=Q.copy(j.markupMethods);j.markupMethods.onstateChange=function(){var l=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[l]||"closed");this.itemsContainerNode.style.display=(l===1)?"block":"none";};j.useRichTooltip=true;var h=j.postBuildRendering;j.postBuildRendering=function(){if(h){h.call(j);}if(j.textNode.parentNode.clientWidth){j.textNode.style.width=(j.textNode.parentNode.clientWidth-20)+"px";}};j.premouseover=function(p){if(this.useRichTooltip){var o=this.textNode;if(o.clientWidth<o.scrollWidth){var l=E.position(o);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:A.encodeHtmlString(this.data[this.itemDisplayField]),top:l.y-2,left:l.x+l.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(p.hWin,p.e);}return true;};return j;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(f,g){this.parent.parent.getDataProvider().serverRequest(f,g);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},postBuildRendering:function a(){if(this._super){this._super();}this.inputNode.setAttribute("placeholder"," "+mstrmojo.desc(12666,"Search..."));},onUpdateSearchParams:function H(h){var g=this.parent.parent,f=g.sId;if(f){h.sessionState=f;}if(g.useOldSearch){h.quickSearch=0;h.nameWildcards=1;h.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(g){var k=parseInt(this.height,10),f=this.np>1,j={target:this.domNode,props:{height:{start:(f?0:k),stop:(f?k:0),suffix:"px"}},onEnd:function(){if(f){this.target.style.overflow="visible";}}},l=new mstrmojo.fx.AnimateProp(j);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);l.play();},onifsChange:function(f){var g=this.np;mstrmojo.hash.copy(f.value,this);if(this.np>1){this.children=null;this.refresh();}if((g<=1&&this.np>1)||(g>1&&this.np<=1)||(g===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function d(){e(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var h=this.searchUpBar;if(h&&h.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var f=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){f.attachEventListener("ifsChange",this.id,function(j){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",j.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var g=this.obIncFetch;g.attachEventListener("fetch",this.id,function(j){g.cp=j.v;g.children=null;g.refresh();C(this,(j.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(g){var h=g.value,f=this.pageCache[this.currentPage]._w;if(!h||h.length===0){h=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var j={};L.forEach(this.browsableViewMedias.split(","),function(k){j[parseInt(k,10)]=true;});h=L.filter(h,function(k){return(k.t!==S.DssTypeDocumentDefinition)||j[k.dvm];});}}f.set("items",h);},navigate:function(p){var f=p.src,q=f.selectedItem,h=this.multiSelect,l=h&&f.getSelectedItems(),o=this,g=p.added&&p.added.length,k=p.removed&&p.removed.length,j=h?l.length===1&&(!k||g):!!q;if(j&&q.did==="empty"){return ;}if(j&&parseInt(q[M],10)===8){if(!this.onBrowsing){this.onBrowsing=true;N(this,q);}}else{if((q&&(!this.useDblSelect||this.useBothSglDblSelect))||l){this.select(h?l:q);}}},browseFolder:function(f,g){N(this,{did:f,n:g});},onFishEyeChange:function(f){this.goToPage(f.value);},goToPage:function(f){if(f<this.pageCache.length&&f!==this.currentPage){var h=f>this.currentPage,g=this.pageCache[f];this.set("currentPage",f);this.booklet.turn(g._w,h);this.set("currentFolder",g);I.call(this,g);}},oncurrentPageChange:function(f){if(this.fishEye){this.fishEye.setSelectedIndex(f.value);}var g=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(g.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",g.items||[]);this.obSearchBox.set("totalSize",g.sz);this.obSearchBox.set("rootID",g.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(g.sz/g.bc)+((g.sz%g.bc>0)?1:0),cp:Math.floor(g.bb/g.bc)+((g.bb%g.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(g,f){Q.copy(g,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}e(this);N(this,undefined,f);},close:function(){var g=this.ctx||this,f=g.onCloseCB;if(f){f[0][f[1]]();}g.set("visible",false);},select:function(g){var f=this.onSelectCB;if(f){f[0][f[1]](g);}if(this.closeOnSelect){this.close();}},dblselect:function U(g){var h=g&&g.src.selectedItem;if(!h||(h&&h.did==="empty")||h[M]===8){return ;}if(this.useBothSglDblSelect){var f=this.onDblSelectCB;if(f){f[0][f[1]](h);}if(this.closeOnSelect){this.close();}}else{this.select(h);}},goUp:function(){if(this.canGoUp){N(this,{did:this.currentFolder.pf});}},updateUpButton:function F(f){I.call(this,f);},oncurrentFolderChange:function(f){var g=f.value;X(this,g.anc.items,g.sc);},refreshContent:function(f){C(this,f);},onError:null,onheightChange:function(){var f=["titleBar","fishEye","searchUpBar","obIncFetch"],j=0,g;for(g in f){j+=parseInt(this[f[g]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-j+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.desc","mstrmojo.android.ui.Button","mstrmojo.android.controllers._HasSelectBoxDialog");mstrmojo.requiresDescs(221,1442,5136,2941);var D=mstrmojo.hash,G=mstrmojo.array,F=mstrmojo.desc,B=mstrmojo.android.ui.Button.newButton;function A(V,U){var X=D.clone(this.pageByData),W=X.es,M={title:V,dialogRefresh:function(){this.refresh();}},I=this,S=0,R,Q,J,L,P,O,N,H,K;P=function(a){var Y=L.shift(),Z=a.ph.h[Y];delete Z.cet;if(Z.ph){P(Z);}};O=function(a){var d=a.ph;if(!d){return ;}var Y=[],b;G.forEach(d.h,function(g,e){var f=g.ix,j=g.cet||0;var h=W[f];Y[e]={n:h.en,v:f,on:j};if(j){J[R]=Y[e];L[R]=e;b=g.ph;}});var Z=J[R];Q.push({n:d.n,items:Y,v:Z.n});R++;O(D.copy(Z,{ph:b}));};N=function(){R=0;Q=[];J=[];L=[];O(X);S=Q.length;};H=function(Z){var Y=X.ph;G.forEach(J,function(a){var d=Y.h,b=G.find(d,"ix",a.v),e;if(b<0){b=(U&&d.length>1)?1:0;}e=d[b];Z(e,Y);Y=e.ph;});};K=function(){var Y=[];H(function(a,Z){Y.push({id:Z.id||"m",tp:Z.tp,v:W[a.ix].ei});});I.pageByData=X;I.onPageBy(Y);};N();if(S>1){M.buttons=[B(F(221,"Cancel")),B(F(1442,"OK"),function(){K();})];}this.showSelectBoxDialog(Q,function(Y,Z){P(X);J[Y]=Z;H(function(a){a.cet=1;});N();if(S>1){if(!!this.isNative){this.update(Q);}else{this.set("items",Q);}}else{K();}return(S>1);},M);}mstrmojo.android.controllers._HasPageBy=mstrmojo.provide("mstrmojo.android.controllers._HasPageBy",D.copy(mstrmojo.android.controllers._HasSelectBoxDialog,{_mixinName:"mstrmojo.android.controllers._HasPageBy",showGroupByDialog:function E(){A.call(this,mstrmojo.desc(2941,"Grouping"),true);},showPageByDialog:function C(){A.call(this,mstrmojo.desc(5136,"Page By"),false);}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.dom","mstrmojo.array","mstrmojo._ResultSetXt","mstrmojo._ReportDataService","mstrmojo._ImageHelper");function B(U,V,Q,R){var S=this;mstrApp.serverRequest(U,{success:function(W){S.msgId=W.id;S.visName=W.visName;S.getResults(R,V);},failure:function(W){if(V.failure){V.failure(W);}},canceled:function(){if(V.canceled){V.canceled();}}},Q);}function C(S,R){var Q={hideWait:!S,delay:true};Q["show"+(R?"Progress":"Wait")]=true;return Q;}var F={objectType:3};var G=mstrmojo.hash.copy,J=mstrmojo.array;function L(){var Q="MojoXtabStyle",S=this.visName;if(S){var R=mstrmojo.AndroidVisList.getVis(S);Q=(R&&R.s)||Q;}return Q;}mstrmojo.XtabDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._ResultSetXt,mstrmojo._ReportDataService,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.XtabDataService",execute:function K(W,Y,U){var X=this.id;var S=this.controller.ab;if(S){var V=S.split("|"),Q=mstrApp.isTablet()?"73^":"72^";J.forEach(V,function(d,a,Z){var b=d.indexOf(Q);if(b>=0){mstrmojo.all[X].visName=d.substring(b+3);return false;}});}var R=mstrmojo.hash.copy(W,{});R.taskId=R.taskId||"reportExecute";R.reportID=R.reportID||this.dssId;R.styleName=mstrApp.isTablet()?"AndroidTabletMessageResultStyle":"AndroidMessageResultStyle";if(W){if(W.dssId){R.reportID=W.dssId;}}this.dssId=R.reportID;this._super(R,Y,U);},getResults:function A(X,Z){var W=L.call(this),V=mstrMobileApp.getDeviceDPI(),a=160;if(V<160){a=80;}else{if(V>240){a=230;}}var Y={taskId:"iPhoneGetReportResults",styleName:W,zoomFactor:a,deviceMode:mstrApp.isTablet?(mstrApp.isTablet()?73:72):0};if(X){var S=X.pbUnits,U=X.yPos,R=X.colsPerPage,Q=X.rowsPerPage;if(S){Y.pageByKeys=this.pageByUnitsToKeys(S);}if(U){Y.yPos=U;}if(R){Y.colsPerPage=R;}if(Q){Y.rowsPerPage=Q;}}this._super(Y,Z);},answerPrompts:function I(Q,R){this._super(Q,R,G(F));},loadPrompts:function H(R,Q){this._super(R,G(F,Q));},drill2Grid:function D(R,S){var Q={taskId:"RWGridDrillToReport",msgID:R.srcMsgId,displayMode:-1,retainParent:3,retainThreshold:3,drillPathKey:R.drillPathKey,drillPathIndex:R.drillPathIndex,elementList:R.drillElements,nodeKey:R.nodeKey,rwGroupByElements:R.rwGroupByElements};if(R.sliceId){Q.sliceId=R.sliceId;}B.call(this,Q,S,C(true,true));},drillGrid:function P(Q,R){B.call(this,{taskId:"gridDrill",msgID:Q.srcMsgId,drillPathKey:Q.drillPathKey,drillPathIndex:Q.drillPathIndex,elementList:Q.drillElements},R,C(true,true));},pageBy:function M(R,U){var S=mstrApp,Q={taskId:"changePageBy",messageID:this.msgId,pageByKeys:this.pageByUnitsToKeys(R)};if(!S.useBinaryFormat){Q.taskId="iPhoneGetReportResults";Q.styleName=L.call(this);Q.zoomFactor=200;}mstrApp.serverRequest(Q,U,C());},sort:function E(Q,R){B.call(this,{taskId:"gridSort",msgID:this.msgId,sortKey:Q.sortKey,sortOrder:((Q.isAsc)?1:0),subtotalPos:Q.subTotalsPos,clearSorts:1},R,C());},pivot:function N(R,S){var Q={taskId:"gridPivot",msgID:this.msgId,objectId:R.objectId,pos:R.pos,objectType:R.objectType};if(R.axis){Q.axis=R.axis;}B.call(this,Q,S,C());},downloadGridData:function O(Q,R){mstrApp.serverRequest({taskId:"DocXtabIncrementalFetch",nodeKey:"",rowPosition:Q.rowPosition,maxRows:Q.maxRows,colPosition:-1,maxColumns:-1},R);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo._ResultSetXt","mstrmojo._ReportDataService","mstrmojo._IsGraphDataService");var D={objectType:3},C={showWait:true,hideWait:true},E=mstrmojo.hash.copy;function B(){var J=mstrApp.getContentDimensions(true);return{taskId:"getReportGraphImage",height:0,width:0,availHeight:J.h,availWidth:J.w,imgType:4,showTooltips:true};}mstrmojo.GraphDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._ResultSetXt,mstrmojo._ReportDataService,mstrmojo._IsGraphDataService],{scriptClass:"mstrmojo.GraphDataService",execute:function H(K,L){var J=mstrmojo.hash.copy(K,{});J.taskId=J.taskId||"reportExecute";J.reportID=J.reportID||(K&&K.dssId)||this.dssId;this.dssId=J.reportID;this._super(J,L);},getResults:function A(J,K){this._super(B(),K);},answerPrompts:function G(J,K){this._super(J,K,E(D));},loadPrompts:function F(K,J){this._super(K,E(D,J));},pageBy:function I(K,M){var L=mstrApp,J={taskId:"changePageBy",messageID:this.msgId,pageByKeys:this.pageByUnitsToKeys(K)};if(!L.useBinaryFormat){E(B(),J);}mstrApp.serverRequest(J,M,C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocDataService","mstrmojo._ResultSetXt");var F={objectType:55};var B=mstrmojo.hash.copy;mstrmojo.DocDataServiceXt=mstrmojo.declare(mstrmojo.DocDataService,[mstrmojo._ResultSetXt],{scriptClass:"mstrmojo.DocDataServiceXt",execute:function E(I,J,H){var G=mstrmojo.hash.copy(I,{});G.taskId="RWExecute";if(!G.objectID){G.objectID=(I&&I.dssId)||this.dssId;}this.dssId=G.objectID;this._super(G,J,H);},getResults:function D(H,I){H=H||{};H.taskId=H.taskId||"androidRWExecute";H.styleName=H.styleName||"RWDocumentMobileStyle";H.useTerseElementId=H.useTerseElementId||1;var G=this.model.controller.getContentDimensions();H.availableWidth=G.w;H.availableHeight=G.h;H.executionOrientation=mstrMobileApp.getOrientation();this._super(H,this.wrapCallback(I));},answerPrompts:function A(G,H){this._super(G,this.wrapCallback(H),B(F));},loadPrompts:function C(H,G){this._super(this.wrapCallback(H),B(F,G));}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ResultSetController","mstrmojo._IsDocController","mstrmojo.android.controllers._SupportsQueuedTransactions","mstrmojo.android.controllers._HasPageBy","mstrmojo.ui.MobileCheckList","mstrmojo.android.EnumMenuOptions","mstrmojo.string","mstrmojo.array","mstrmojo.hash","mstrmojo.android.nativedialog.LayoutDialog");mstrmojo.requiresDescs(1089,1917,2941,6189,9233,9254,9255,9256,9257);var K=mstrmojo.hash,e=mstrmojo.array,b=mstrmojo.android.EnumMenuOptions,C=b.DOC_LAYOUTS,U=b.GROUP_BY,d=b.REPROMPT,AI=b.SHARE,B=b.ANNOTATION,w="\u001F",z=1;function s(AO){var AM=AO.model,AL=AM.data.layouts,AN=e.find(AL,"k",AM.currlaykey);return AN>=0?AL[AN]:null;}function o(AO,AM){var AP=AO.getGroupByElements(AM),AN=[],AL=s(AO),AS=AL&&AL.gbys&&AL.gbys.groupbys,AR=AP&&AP.length;if(AR&&AS){for(i=0;i<AR;i++){var AQ=AS[i].unit.target;AN.push(AQ.did);AN.push(AQ.t);AN.push(AP[i]);}}return AN.join(w);}function x(AR,AL){var AQ=AR.desiredUnits||{},AP=s(AR),AM=AL&&AL.length;if(AP&&AP.gbys){var AO=AP.gbys.groupbys,AT=AO.length;for(i=0;i<AT;i++){var AS=AO[i].unit,AN;if(AL){if(i<AM){AN=AL[i];}else{break;}}else{AN=AS.elms[AS.idx].v;}AQ[AS.target.did]=AN;}}return AQ;}function W(AL){var AO="",AN=0,AM;for(AM in AL){if(AN>0){AO+=w;}AO+=AM+w+AL[AM];AN++;}return AO;}function S(){if(this.refreshTimer){clearInterval(this.refreshTimer);delete this.refreshTimer;}}function D(){var AM=this.model.rf;if(AM&&AM>0){var AL=this;this.refreshTimer=self.setInterval(function(){AL.checkCache(null,null,null,2);},AM*1000);}}function t(){var AL=this._previousOr;if(AL===-1){return ;}if(AL===0){window.setTimeout(function(){mstrMobileApp.releaseOrientation();});}else{if(AL>0){mstrMobileApp.lockOrientation(AL);}}this._previousOr=-1;}function AE(){return mstrApp.getTransactionNotificationController();}function A(AL,AM){var AN={srcMsgId:this.model.mid,desiredUnits:x(this,this.getGroupByElements(AM))};K.forEach(AL,function(AP,AO){AP=AP.replace(/\+/g," ");AN[AO]=decodeURIComponent(AP);});return AN;}function AG(AS){var AR=AS.txData.split(";"),AQ,AP=AR.length;for(AQ=0;AQ<AP;AQ++){var AO=AR[AQ],AN=AO.split(","),AM=decodeURIComponent(AN[1]),AL=this.model.getFirstUnitInstanceByName(AN[0]);if(AL){AL.dataChanged(0,AL.v,{dv:AM,v:AM},AL.valueNode);}}}mstrmojo.android.controllers.DocumentController=mstrmojo.declare(mstrmojo.android.controllers.ResultSetController,[mstrmojo.android.controllers._SupportsQueuedTransactions,mstrmojo._IsDocController,mstrmojo.android.controllers._HasPageBy],{scriptClass:"mstrmojo.android.controllers.DocumentController",initModel:function I(AL){return mstrApp.modelFactory.newModel("Document",K.copy(AL,{controller:this}));},hasTxChanges:false,start:function R(AN,AO){var AM=this.desiredUnits=AN.desiredUnits;if(AM){var AL=W(AM);if(AL){AN.desiredElements=AL;}delete AN.desiredUnits;}this.sub_id=AN.sub_id;this.hasTxChanges=!!AN.hasTxChanges;this._super(AN,AO);},createView:function N(AR,AM){var AU=AR.defn.layouts,AP=mstrMobileApp.getLockedOrientation(),AN=-1,AV=-1,AO=true,AL=AU.length,AQ;for(AQ=0;AQ<AL;AQ++){if(AU[AQ].iw){continue;}var AS=AU[AQ].or;if(AN===-1){AN=AS;}if(AS!==AN||AS===3){AO=false;break;}}if(AP>0){if(AO){if(AN!==AP){AV=AN;}}else{AV=0;}}else{if(AO){AV=AN;}}if(AV>-1){if(AV===0){mstrMobileApp.releaseOrientation();}else{mstrMobileApp.lockOrientation(AV);}this._previousOr=AP;}var AT=this.view=this.newView("Document",AM);AT.set("model",this.model);AT.buildChildren();return AT;},afterReprompt:function a(AM){var AL=this.view;AL.unloadLayouts(null,false);AL.model.loadLayout(AM,true);this._super(AM);},onPageBy:function Q(AL){var AM=[];e.forEach(AL,function(AO,AN){AM.push({key:AO.id,value:AO.v});});this.onGroupBy({gbUnits:AM});},hasPageBy:function h(){var AL=this.view,AM=AL&&AL.getLayouts()&&AL.getCurrentLayout();return !!(AM&&AM.gb&&AM.defn.dpb);},onGroupBy:function u(AO,AP,AN){var AL=this.view,AM=this.model;AN=AN||{};AN.showWait=true;AN.hideWait=true;AN.delay=true;AP=mstrmojo.func.wrapMethods(AP,{success:function(AQ){AL.unloadLayouts(null,true);AM.loadLayout(AQ);}});AM.getDataService().changeDocGroupBy(AO,AP,AN);},setData:function P(AL,AM){this._super(AL,AM);if(AL.rf!=this.old_rf){S.call(this);D.call(this);}this.rootCtrl.updateContent(null,this.model.n,false);},onDrill:function j(AL,AM){if(!this.isInRequest()){if(AM.isWithin){AL.model.drillGrid(this._addNodeKeyToAction(AL,AM),this._getXtabCallback(AL));}else{AM.rwGroupByElements=o(this,AL);this._super(this._addNodeKeyToAction(AL,AM));}}},onDownloadGridData:function M(AL,AM){this.model.downloadGridData(this._addNodeKeyToAction(AL,AM));},onExecuteNewObject:function O(AL,AM){this._super(AM);},onReExecute:function AC(AL){this.reExecute(AL);},refresh:function AJ(AL,AN){var AM=this.id;this.model.getDataService().refresh(AL,mstrmojo.func.wrapMethods({success:function(AO){mstrmojo.all[AM].setData(AO,true);}},AN));},invalidClientCache:function(){if(mstrApp.useBinaryFormat){mstrMobileApp.removeLiveCache(mstrApp.getCurrentProjectId(),this.model.ci.cid);}},onTransactionUpdates:function l(AL,AN,AM){var AO=this.model,AQ;if(mstrApp.useBinaryFormat){AQ=AO.newCallback({success:function(){AL.clear();AO.clearTxDeltaUpdate();if(AM){setTimeout(function(){AL.autoRefresh();},250);}}});var AP=AO.getDataService();if(AN.manipulation===z){AP.txMarkRows(AN,AQ);}else{AP.txChangeData(AN,AQ);}}else{if(AM){AL.autoRefresh();}}this.hasTxChanges=true;},onLink:function F(AL,AO){if(!AO.url){return this._super(AL,AO);}var AN=mstrmojo.string.parseUri(AO.url),AQ=AN.authority,AP=AN.path;if(AN.protocol==="mstr"){this.handleSpecialLink(AN,AO);}else{if(AQ==="mstrWeb"||AQ==="Main.aspx"||(/mstrWeb$/.test(AP))||(/Main\.aspx$/.test(AP))){this._super(AL,A.call(this,AN.queryKey,AO.src));}else{var AM=mstrMobileApp.openLink(AN.source,AO.target);if(AM){mstrApp.onerror({message:AM});}}}},getLinkRequest:function g(AQ){var AL;if(!AQ.url){AL=this.buildLinkParams(AQ);}else{var AP=mstrmojo.string.parseUri(AQ.url),AO=AP.queryKey,AS=AP.authority,AR=AP.path;if(AP.protocol!=="mstr"&&(AS==="mstrWeb"||AS==="Main.aspx"||(/mstrWeb$/.test(AR))||(/Main.aspx$/.test(AR)))){AL=this.buildLinkParams(A.call(this,AO,AQ.src));if(AL){switch(parseInt(AO.evt,10)){case 4001:AL.taskID="reportExecute";AL.styleName="AndroidMessageResultStyle";break;case 2048001:AL.taskID="RWExecute";AL.objType=55;var AN=AL.desiredUnits;if(AN){var AM=W(AN);if(AM){AL.desiredElements=AM;}delete AL.desiredUnits;}break;}}}}if(AL&&AL.link){AL.linkAnswers=AL.link.toXml();delete AL.link;}return AL;},getDesiredElements:function f(AP){var AO=this.model.gbElements,AN="";if(AO){var AQ=AO.split(";"),AM=AQ.length,AL;for(AL=0;AL<AM;AL+=3){if(AL>0){AN+=w;}AN+=AQ[AL]+w+AQ[AL+2];}}else{AN=W(x(this,AP));}return AN;},confirmMsgBeforeSubmit:function E(){var AM=this.model,AL=AE(),AN;if(this.hasTxChanges&&AL&&AL.hasPendingTransactions(this.did)){if(AM.txrcd){AN=mstrmojo.desc(9254,"Pending transaction exists")+". "+mstrmojo.desc(9255,"You are about to replace a pending transaction.");}else{AN=mstrmojo.desc(9256,"There are one or more pending submissions in the transaction queue for this document.")+" "+mstrmojo.desc(9257,"Continuing will submit a new transaction.");}}return AN;},offlineTransactionsSubmitted:function AF(AM){var AL=AE();if(AL){AL.setOfflineRecords(this.did);}this.hasTxChanges=false;},openOfflineTransactions:function AH(){var AL=AE();if(AL){AL.showNotificationBoard(this,this.did,this.ttl);}},transactionDiscarded:function X(AL){this.hasTxChanges=false;},destroy:function AD(){t.call(this);this._super();},nudgeWidget:function L(AM,AL){if(mstrMobileApp!==undefined&&mstrMobileApp.nudgeWidget){mstrMobileApp.nudgeWidget(AM,JSON.stringify(AL));}},resetOrientation:function AK(){t.call(this);},checkCache:function H(AN,AP,AL,AO,AM){this.old_rf=this.model.rf;this._super(AN||{ifc:true,ci:this.model.ci},AP,AL,AO,AM);},beforeViewHidden:function G(AL){this._super(AL);if(AL){mstrmojo.GraphBase.hideTooltips();this.resetOrientation();}S.call(this);},afterViewVisible:function V(){this._super();var AL=this.view;if(AL&&AL.afterViewVisible){AL.afterViewVisible();}if(!this.isSubscription){D.call(this);}},hasFullScreenInfoWindow:function AB(){var AL=this.view;return AL&&AL.fullScreenInfoWindow;},updateActionToolbar:function q(AO){if(!this.hasFullScreenInfoWindow()){this.getTxnToolbarButton(AO);this.addFullScreenButton(AO);if(mstrMobileApp.isOnline()){var AN=this.model,AL=AN.docModel||AN,AM=AL.prompts,AP=AL.getCurrentLayoutDef&&AL.getCurrentLayoutDef(),AR=(AP&&AP.dri);if(AM&&AM.hasSupported()&&(AR===undefined||AR)){AO.addToolbarBtn(d,mstrmojo.desc(6189,"Filter"),d,true,3);}}if(this.hasPageBy()){AO.addToolbarBtn(U,mstrmojo.desc(2941,"Grouping"),U,true,2);}var AQ=this.view&&this.view.getSupportedLayouts();if(AQ&&(AQ.length>1)){AO.addToolbarBtn(C,mstrmojo.desc(4174,"Layouts"),C,false,8);}}return this._super(AO);},handleMenuItem:function k(AR,AM){if(AR!==AI&&AR!==B){mstrmojo.GraphBase.hideTooltips();if(mstrApp.isTablet()){this.view.closeInfoWindowsOnTablet();}}switch(AR){case C:var AN=this.view,AL=this,AP=function(){var AS=AN.getSupportedLayouts();return{l:AS,idx:e.indexOf(AS,AN.getCurrentLayout())};},AQ=AP(),AO={title:mstrmojo.desc(4174,"Layouts"),children:[{scriptClass:"mstrmojo.ui.MobileCheckList",isElastic:true,multiSelect:false,items:AQ.l,selectedIndex:AQ.idx,postselectionChange:function(AS){var AT=AS.added;if(AT){if(AN.showLayout(this.items[AT[0]])){mstrApp.closeDialog();}}},postCreate:function(){mstrApp.rootController.attachEventListener("rootOrientationChange",this.id,function(){var AS=AP();this.set("items",AS.l);this.select(AS.idx);this.parent.resizeDialog();});}}]};if(mstrApp.useBinaryFormat){K.copy({isNative:true,scriptClass:"mstrmojo.android.nativedialog.LayoutDialog",onSelectionChange:function(AS){AL.onLayoutChange(AS);this.close();},postCreate:function(){mstrApp.rootController.attachEventListener("rootOrientationChange",this.id,function(){var AS=AP();this.update(AS.l,AS.idx);});}},AO);}mstrApp.showDialog(AO);return ;case U:this.showGroupByDialog();return ;case d:this.reprompt();return ;}return this._super(AR,AM);},makeCurrent:function Z(AL){this.isBack=true;this._super(AL);delete this.isBack;},handleSpecialLink:function Y(AR,AU){var AT=AR.queryKey,AX=this.view,AM=AT.evt;if(AM==="2048500"){var AN=AT.panelName,AV=AX.model,Aa=AV.getInfoWindow(AN);if(Aa){AX.showInfoWindow(Aa.id,Aa.k,AU.src.domNode);}}else{if(AM==="2048030"){var AZ=!!AT.useCache&&AT.useCache==="0",AP={fresh:AZ,useRefreshProgress:mstrApp.isTablet()};this.refresh(AP);}else{if(AM==="2048258"){AG.call(this,AT);}else{if(AM==="3037"){this.share(AT.emailSubject,true);}else{if(AM==="3175"){this.startAnnotate();}else{if(AR.authority==="gb"){var AW=this,AS=AX.getSelectedLayoutWidget(),AO=AS.gb,AY=AT.a,AQ=AT.e,AL=e.forEach;AL(AO.groupbys,function(Ae){var Ac=Ae.unit,Ad=Ac.target;if(Ad.did===AY){var Ab=function(){var Ag=Ac.elms,Af=[];AL(Ag,function(Ai,Ah){Af.push(K.copy(Ai,{k:Ae.k,on:(Ah===Ac.idx)}));});mstrApp.showDialog({title:Ad.n,children:[{scriptClass:"mstrmojo.ui.MobileCheckList",selectionPolicy:"reselect",items:Af,multiSelect:false,isElastic:true,selectedIndex:Ac.idx,preselectionChange:function(Ah){if(Ah.added[0]===Ah.removed[0]){mstrApp.closeDialog();return false;}if(this._super){return this._super(Ah);}},postselectionChange:function(Ah){mstrApp.closeDialog();var Ai=Af[Ah.added[0]];AW.onGroupBy({groupbyKey:Ai.k,elementId:Ai.v});}}]});};if(AQ&&parseInt(AQ,10)!==0){this.onGroupBy({groupbyKey:Ae.k,elementId:AQ},{failure:Ab},{noErrorMessage:true});}else{Ab();}return false;}});}else{this._super(AR,AU);}}}}}}},getContentDimensions:function AA(){var AL=mstrApp.getContentDimensions();return{w:AL.w,h:AL.h};},canDelegateToolBar:function J(){if(this.hasFullScreenInfoWindow()){return false;}return this._super();},onLayoutChange:function p(AL){this.view.showLayout(this.view.getSupportedLayouts()[AL]);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.desc","mstrmojo.android.EnumMenuOptions","mstrmojo.android.controllers._HasPageBy");mstrmojo.requiresDescs(5136,6189);var C=mstrmojo.android.EnumMenuOptions,G=C.PAGE_BY,F=C.REPROMPT;var E=mstrmojo.hash,H=mstrmojo.desc;mstrmojo.android.controllers._IsReportController=mstrmojo.provide("mstrmojo.android.controllers._IsReportController",E.copy(mstrmojo.android.controllers._HasPageBy,{_mixinName:"mstrmojo.android.controllers._IsReportController",hasPageBy:function B(){var J=this.gridData,I=J&&J.ghs;return !!(I&&I.phs);},updateActionToolbar:function A(L){this.addFullScreenButton(L);var I=this.view;if((I&&I.hasPageBy&&I.hasPageBy())||this.hasPageBy()){L.addToolbarBtn(G,H(5136,"Page By"),G,true,1);}if(mstrMobileApp.isOnline()){var K=this.xtabModel||this.model,J=K.prompts;if(J&&J.hasSupported()){L.addToolbarBtn(F,H(6189,"Filter"),F,true,3);}}return this._super(L);},handleMenuItem:function D(J,I){switch(J){case G:this.showPageByDialog();break;case F:this.reprompt();break;default:return this._super(J,I);}return false;}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");var H=mstrmojo.array;var E=[257,1024,3072,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:H.hash(E),item:null,OKFn:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+E.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:false,scrollableIncFetch:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",isImportFromCube:"this.parent.isImportFromCube",}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function C(){var J=this.parent.parent;this.parent.parent.close({item:J.item});var I=J.OKFn;if(I){I(J.item);}J.set("item",null);},bindings:{enabled:function B(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancle"),onclick:function C(){var I=this.parent.parent;this.parent.parent.close();I.set("item",null);}}]}],preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function D(){if(this._super){this._super();}this.browse();},onOBSelect:function F(I){this.set("item",((this.supportedTypes[I.t]||this.supportedTypes[I.st])?I:null));},browse:function G(){this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocXtabGraph","mstrmojo.TouchScroller","mstrmojo.graph._MobileGraphAreaHelper","mstrmojo._TouchGestures");var F=mstrmojo.dom;function C(O,L,R){var N=mstrmojo.dom.position(O.domNode,false),Q=0,P=0,M=O.node;if(N){Q=N.x;P=N.y;}O.model.getDataService().handleUserSingleTap(M.data.sid,M.k,L-Q,R-P,false,{success:function(S){O.displayTooltips(S.Areas,Q,P);}});}function J(P){var O="",L=[],S,R,M,N,Q,U;if(!P){return O;}S=P.currlaykey;O=S+"_";R=P.data&&P.data.layouts;for(Q=0;Q<(R.length||0);Q++){N=R[Q];if(N.k===S){M=N;break;}}if(M){if(M.gbys){L=M.gbys.groupbys;for(Q=0;Q<(L.length||0);Q++){U=L[Q];O=O+U.k+":"+U.lvl;if(U.unit){O=O+":"+U.unit.idx;}O=O+"_";}}}return O;}function K(S){this.displayTooltips([],0,0);var N=this,O=this.model.getDataService(),R=mstrmojo.dom.position(this.domNode,true),L=S.pageX-R.x,Q=S.pageY-R.y,M={getBoundingClientRect:function(){var V=S.pageX,U=S.pageY;return{left:V,top:U,right:V+1,bottom:U+1};}},P={success:function(W){var V=W.Areas,X=N.defn,U=N.k,Z=W.tks,Y=false;if(V&&V.length>0){if(V[0].Selectable===1){N.highlightArea(N.selectionNode,V);}else{if(V[0].Selectable===-1){N.highlightedAreas=[];N.clearHighlightArea(N.selectionNode);}}if(Z){N.showInfoWin(Z,M);}Y=V[0].Selectable!==undefined;}else{Y=W.Selectable!==undefined;N.highlightedAreas=[];N.clearHighlightArea(N.selectionNode);}window.setTimeout(function(){mstrMobileApp.forceRepaint();N.model.slice({type:parseInt(X.t,10)||mstrmojo.EnumRWUnitType.GRAPH,src:U,ck:X.ck,gk:U,sid:N.node.data.sid,x:L,y:Q,tks:Z,anchor:M,tty:W.tty,showLoadingIcon:Y});},0);}};O.handleUserSingleTap(N.node.data.sid,N.k,L,Q,true,P);}function A(M){var L=this.imgNode;if(L.src!==M){L.src=M;F.translate(L,0,0,0);}}mstrmojo.MobileDocXtabGraph=mstrmojo.declare(mstrmojo.DocXtabGraph,[mstrmojo._TouchGestures,mstrmojo.graph._MobileGraphAreaHelper],{scriptClass:"mstrmojo.MobileDocXtabGraph",areaMarkup:'<area shape="{@shape}" coords="{@coords}" ttl="{@tooltip}" aid="{@aid}" {@extra}/>',retrieveGraphSrc:function G(N,L){var O=this.id,M=this.model;if(parseInt(N,10)>0&&parseInt(L,10)>0){M.getDataService().getRWGraphImage({w:L,h:N,k:this.k,sid:this.node.data.sid,gbk:J(M)},M.newCallback({success:function(P){A.call(mstrmojo.all[O],P);}}));}},invalidate:function E(){A.call(this,"");},showTooltip:function I(){},touchSelectBegin:function D(L){this.restoreDefaultTouches(false);C(this,L.pageX,L.pageY);},touchSelectMove:function H(L){this.restoreDefaultTouches(false);C(this,L.pageX,L.pageY);},touchTap:function B(L){this.restoreDefaultTouches(false);K.call(this,L);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.css");var N=mstrmojo.dom,b=mstrmojo.array,B=mstrmojo.css,j="animate",k="90px",s="70px",F="52px",AB=200,Q=700,A=750;function D(){var AJ=window.Modernizr,AI="transition";if(AJ&&AJ.testProp(AI)){return N.transEndEvtNames[AJ.prefixed(AI)];}return null;}function AD(AI){return function(){this.menuNode.style.display=AI?"block":"none";};}function P(AI){return Math.min(AI.offsetWidth-AI.firstChild.offsetWidth,0);}function AC(AI){return AI.isAlignRight?"right":"left";}function AG(AI,AJ){return parseInt(AI.style[AC(AJ)],10)||0;}function L(){var AM=this.tabContainerNode,AL=false,AK=false,AN=false,AO=this.leftBtnNode,AI=this.rightBtnNode,AJ=this.isValidMode();window.setTimeout(function(){if(P(AM)<0){var AQ=N.position(AM),AP=N.position(AM.firstChild);AL=(AP.x<AQ.x);AK=(AP.x+AP.w>AQ.x+AQ.w+1);}AN=AL||AK;B.toggleClass(this.btnBarNode,"highlightBar",AN);AO.style.display=AI.style.display=AN?"block":"none";AO.disabled=!AL;AI.disabled=!AK;B.toggleClass(AO,"disable",!AL);B.toggleClass(AI,"disable",!AK);if(this.domNode){this.addBtnNode.style.display=this.tabStripMenuNode.style.display=AJ?"block":"none";this.bufferNode.style.display=AJ?"none":"block";this.floaterNode.style.display=this.hasFloater&&AL?"block":"none";}this.widgetResized();}.bind(this),AB);}function U(AI,AJ){AI=(AI||[]);if(!AI.filter){return b.filter(AI,AJ);}return AI.filter(AJ);}function X(AI,AJ){AI=(AI||[]);if(!AI.map){return b.map(AI,AJ);}return AI.map(AJ);}function x(AY,AK,AL){var AW=this.tabContainerNode,AP=this.domNode;if(this.isStatic||!AW||!AP||AP.style.display==="none"){return ;}var AR=AW.firstChild,AX=P(AW),AO=AG(AR,this),AI=Math.max(AO,AX),AV=U(this.children,function(AZ){return AZ.isSelected;})[0],AT=AL&&AL.domNode||AV&&AV.domNode;if(AY&&AT){if(AX<0){var AQ=N.position(AT),AM=N.position(AW),AS=Math.floor(AQ.x-AM.x),AU=Math.floor(AQ.x+AQ.w-(AM.x+AM.w));if(AL){var AJ=Math.ceil(AT.offsetWidth);AS=AS===0?Math.max(AX,-AJ):AS;AU=AU===0?Math.min(-AX,AJ):AU;}var AN=AS<0?AS:(AU>0?AU:0);AI=this.isAlignRight?AI+AN:AI-AN;}}if(AI!==AO){if(AK){this.setAnimation(AR);}AR.style[AC(this)]=Math.max(AX,Math.min(AI,0))+"px";}L.call(this);}function C(AI){return AI.hasOwnProperty("index");}function J(){var AJ=this.tabContainerNode,AK=N.position(AJ),AI=this.isAlignRight;b.forEach(this.children||[],function(AM){var AS=AM.domNode,AT=N.position(AS),AP=Math.floor(AT.x-AK.x),AQ=Math.floor(AT.x+AT.w-(AK.x+AK.w)),AL=AM.isSelected,AR=Math.ceil(AS.offsetWidth),AN=0;AM.isCutoff=AM.isHidden=AM.isLeftMost=AM.isRightMost=false;AM.leftEdgeHiddenWidth=AM.rightEdgeHiddenWidth=0;if(AP<0){var AO=Math.abs(AP);AN=AR-AO;AM.isLeftMost=AN>=0;AM.isCutoff=AM.isLeftMost&&AO>0&&AN>0;AM.isHidden=AN<=0;AM.leftEdgeHiddenWidth=AO;}else{if(AQ>0){AN=AR-AQ;AM.isRightMost=AN>=0;AM.isCutoff=AM.isRightMost&&AQ>0&&AN>0;AM.isHidden=AN<=0;AM.rightEdgeHiddenWidth=AQ;}}});}function Z(){var AI=this.children,AJ=0;(AI||[]).every(function(AL,AK){if(!C(AL)){return false;}AJ++;AL.index=AK;return true;});(AI||[]).every(function(AK){if(!C(AK)){return false;}AK.total=AJ;return true;});}function h(AO,AK){var AN=AO.ENUM_CORNERS,AP=[AN.TOP_LEFT,AN.BOTTOM_LEFT],AJ=this.parent;if(AJ.position!=="bottom"){AP.reverse();}AO.setAlignment(AP[0],AP[1]);var AI=N.position(AJ.domNode),AM=AJ.menuNode;var AL=AM.style;AL.top=(AK.y-AI.y)+"px";AL.left=(AK.x-AI.x)+"px";AO.addPopupHandlers(AJ.id,AD(true),AD(false));AO.hostId=AJ.id;AO.hostElement=AM;AO.isHostedWithin=false;AJ.openPopup(AO.newInstance());}function l(AI){AI.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" ><div class="mstrmojo-VITabStrip-menu" mstrAttach:click><div id="tabCommonIcon" class="mstrmojo-VITabStrip-menuIcon"></div><div id="tabCommonButton" class="mstrmojo-VITabStrip-menuButton"></div><div id="tabCommonMenuHost" class="mstrmojo-VITabStrip-menuButtonHost"></div></div><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-buffer"></div><div class="mstrmojo-VITabStrip-btnBar"><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div class="mstrmojo-VITabStrip-addBtn-Img"></div><div class="mstrmojo-VITabStrip-addBtn-Text"></div></div><div class="mstrmojo-VITabStrip-navBtns"><div id="tabRightButton" class="mstrmojo-VITabStrip-rightBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div><div id="tabLeftButton" class="mstrmojo-VITabStrip-leftBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div></div></div><div class="mstrmojo-VITabStrip-floater"></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabStripMenuNode:function(){return this.domNode.firstChild;},menuImgNode:function(){return this.domNode.firstChild.firstChild;},menuBtnNode:function(){return this.domNode.firstChild.childNodes[1];},menuBtnHostNode:function(){return this.domNode.firstChild.lastChild;},tabContainerNode:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},bufferNode:function(){return this.domNode.childNodes[2];},btnBarNode:function(){return this.domNode.childNodes[3];},addBtnNode:function(){return this.domNode.childNodes[3].firstChild;},addBtnImgNode:function(){return this.domNode.childNodes[3].firstChild.firstChild;},addBtnTxtNode:function(){return this.domNode.childNodes[3].firstChild.lastChild;},navBtnsNode:function(){return this.domNode.childNodes[3].lastChild;},rightBtnNode:function(){return this.domNode.childNodes[3].lastChild.firstChild;},leftBtnNode:function(){return this.domNode.childNodes[3].lastChild.lastChild;},floaterNode:function(){return this.domNode.childNodes[4];},menuNode:function(){return this.domNode.childNodes[5];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isAlignRight:true,tabStripMenuNode:null,menuImgNode:null,menuBtnNode:null,menuBtnHostNode:null,tabContainerNode:null,addBtnNode:null,bufferNode:null,navBtnsNode:null,leftBtnNode:null,rightBtnNode:null,menuNode:null,position:"bottom",selectMovedTab:false,hasFloater:false,tabObjects:null,layoutConfig:{w:{tabContainerNode:"100%",bufferNode:"6px",addBtnNode:k,navBtnsNode:F,tabStripMenuNode:s},xt:true},onAppStateChange:function u(AP){var AN=mstrmojo.vi.VisualInsightApp.APP_STATES,AO=AN.PRESENTATION,AI=AN.SELECTOR_TARGETING,AJ=AP.value,AQ=AP.valueWas,AM=this.isValidMode();if(AJ&AO||AQ&AO||AJ&AI||AQ&AI){var AK=this.addBtnNode,AL=this.tabStripMenuNode;if(AK&&AL){AK.style.display=AL.style.display=AM?"block":"none";this.bufferNode.style.display=AM?"none":"block";this.doLayout();}}},setStatic:function R(AI,AJ){this.isStatic=AI;if(!AI){x.call(this,true,AJ);}},setTabs:function t(AK,AI){this.removeChildren();this.tabObjects=AK;var AL=this,AJ=(AK&&AK.length)||0;this.addChildren(X(AK,function(AO,AM){var AN=AO.k;return AL.getTabCfg(AK,AO,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:AM,total:AJ,draggable:!!AJ,dropZone:!!AJ,k:AN,isSelected:AN===AI,showTabMenu:h,tabMoved:function(AQ){var AP=this.index;AL.moveTab(AP,AP+(AQ?-1:1),AP);}});}));x.call(this,true);l(this);},getTabs:function o(){return U(this.children,C);},getTabCfg:function AH(AJ,AK,AI){return AI;},deleteTab:function I(AI){var AO=this.id,AN=this.children[AI],AM=D(),AL=function(){var AP=mstrmojo.all[AO];AP.removeChildren(AN);AN.destroy();Z.call(AP);L.call(AP);l(AP);};if(AM){var AK=AN.domNode.firstChild,AJ=AK.style;AJ.width=AK.offsetWidth+"px";window.setTimeout(function(){B.addClass(AK,j);N.attachOneTimeEvent(AK,AM,AL);AJ.width=0;},0);}else{AL();}},buildRendering:function d(){this._super();B.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function V(){var AI=this._super();x.call(this,true);return AI;},doLayout:function K(){this._super();x.call(this,true);},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},setSelectedTab:function S(AI){b.forEach(this.children||[],function(AJ){AJ.set("isSelected",AJ.k===AI);});l(this);},getSelectedTab:function g(){var AK=null,AJ=this.children||[],AI;for(AI=0;AI<AJ.length;AI++){if(AJ[AI].isSelected){AK=AJ[AI];break;}}return AK;},onclick:function q(AI){if(!this.isValidMode()){return ;}if(AI.getTarget()===this.addBtnImgNode||AI.getTarget()===this.addBtnTxtNode){this.addTab();}},addTab:mstrmojo.emptyFn,clearBtnTooltips:function O(AK){var AI=(AK===this.leftBtnNode),AJ=(AK===this.rightBtnNode);if(AI||AJ){this.clearTooltips();return true;}return false;},showBtnTooltips:function G(AI){var AK=AI.getTarget().parentNode,AJ=this.clearBtnTooltips(AK);if(AJ){this.toggleTooltip(AK);}},onmouseout:function z(AI){var AJ=AI.getTarget().parentNode;this.clearBtnTooltips(AJ);},onmouseover:function H(AI){this.showBtnTooltips(AI);},onmouseup:function a(AI){window.setTimeout(function(){this.showBtnTooltips(AI);}.bind(this),AB);},onmousedown:function f(AR){var AN=AR.getTarget().parentNode,AS=(AN===this.leftBtnNode),AL=(AN===this.rightBtnNode);if(AS||AL){var AQ=this.tabContainerNode,AM=AQ.firstChild,AI=this.id,AO=this,AK;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}B.addClass(AN,"active");var AP=function(){window.clearInterval(AK);B.removeClass(AN,"active");L.call(mstrmojo.all[AI]);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}};N.attachOneTimeEvent(document.body,"mouseup",AP);var AJ=function(){var AV=P(AQ),AY=AG(AM,AO),AZ=AY-AV,AX=0-AY;J.call(AO);AO.setAnimation(AM);var AT=AO.getCornerTabs()||[],AW=U(AT,function(Aa){if(AS&&Aa.isLeftMost||AL&&Aa.isRightMost){return Aa;}})[0],AU=0;if(AW){AU=AW.isCutoff?(AS?AW.leftEdgeHiddenWidth:AW.rightEdgeHiddenWidth):Math.ceil(AW.domNode.offsetWidth);AU=Math.min(AU,AS?AX:AZ);AU=AO.isAlignRight?(AS?-AU:AU):(AS?AU:-AU);}AM.style[AC(AO)]=parseInt(AM.style[AC(AO)]||0)+AU+"px";};AJ();AK=window.setInterval(function(){AJ();},A);}},getCornerTabs:function e(){return U(this.children,function(AI){return AI.isLeftMost||AI.isRightMost;});},setAnimation:function Y(AI){var AJ=D();if(AJ){B.addClass(AI,j);N.attachOneTimeEvent(AI,AJ,function(){B.removeClass(AI,j);});}},createTooltip:function AE(AJ){var AL=document.createElement("div");AL.className="navBtnTooltip";AL.appendChild(document.createTextNode(AJ.getAttribute("tooltip")||""));var AO=document.body.firstChild;AO.parentNode.insertBefore(AL,AO);var AM=5,AP=AL.offsetWidth-25,AK=AJ.getBoundingClientRect(),AN=AL.getBoundingClientRect(),AI=AK.top-(AN.height+AM);AL.style.top=AI+"px";AL.style.left=(AK.left-AP)+"px";return AL;},clearTooltips:function p(){window.clearTimeout(this._tooltipTimeOut);var AI=document.querySelectorAll(".navBtnTooltip");b.forEach(AI||[],function(AJ){AJ.parentNode.removeChild(AJ);});},toggleTooltip:function AF(AI){window.clearTimeout(this._tooltipTimeOut);if(AI.disabled){this._tooltipTimeOut=window.setTimeout(function(){this.createTooltip(AI);}.bind(this),Q);}},moveTab:function M(AI,AQ,AO,AN){var AJ=this.children,AR=AJ.splice(AI,1)[0];AJ.splice(AQ,0,AR);Z.call(this);this.setAnimation(this.tabContainerNode.firstChild);var AK=this.containerNode,AL=AK.childNodes,AP=AK.removeChild(AL[AI]),AM=AL[AQ];if(AM){AK.insertBefore(AP,AM);}else{AK.appendChild(AP);}if(this.selectMovedTab||AR.isSelected){x.call(this,true,true,AR);}if(!AN&&AO!==undefined&&AO!==AQ){this.commitTabMove(AO,AQ);l(this);}},commitTabMove:function AA(AI,AJ){throw new Error(this.scriptClass+" must implement commitTabMove.");},updateTabTable:function w(){if(!this.isStatic){x.call(this,true);}},setLinkIcon:function W(AI,AL){var AK,AJ;if(AI){if(AL){AJ="src";b.some(this.getTabs(),function(AM){if(AM.k===AL){AK=AM;}return AK;});if(!AK){return ;}}else{AJ="tgt";AK=this.getSelectedTab();}B.addClass(AK.domNode,AJ);}else{AJ=AL?["src","tgt"]:"tgt";b.forEach(this.children,function(AM){B.removeClass(AM.domNode,AJ);});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var R=mstrmojo.dom,U=mstrmojo.css,AN=mstrmojo.Enum_Keys,H=mstrmojo.range,o=H.EDGE,AF=mstrmojo.ME.MetricToken.isDelimiter,Q=mstrmojo.expr,x=mstrmojo.array,K=mstrmojo.hash;var M=R.isIE||R.isIEW3C;function AV(E){return E.ctrlKey||R.isMetaKey(window,E)||(E.charCode||E.keyCode)===AN.CTRL;}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.ME.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function S(E){var AW=E.ownerDocument,AX=AW.createElement("span");return AX;},_iw2idx:function V(AW,AZ,AY){var AX=this.wrapperNodes(AZ),E=mstrmojo.array.indexOf(AX,AY);return E===-1?AX.length:E;},itemOffsetLeft:function k(AW,Aa,E,AY){if(!AY){var AX=this.wrapperNodes(Aa);AY=AX&&AX[E];if(!AY){return 0;}}var AZ=Aa.firstChild;if(!AZ||(AZ===AY)){return 0;}return AY.offsetLeft-AZ.offsetLeft;},whereDrop:function AU(Ae,E,AY,Ad,AW){var Aa=this._nd2iw(Ae,E,AY),Af,Ac,AZ,Ab,AX;if(Aa){Ac=this._iw2idx(Ae,E,Aa);Af=Ac;AZ=this.itemOffsetLeft(Ae,E,null,Aa);Ab=Aa.offsetTop;AX=Aa.offsetWidth;if(Ad.x>AW.left+AZ+AX/2){Af++;AZ+=AX;}}else{return Ae.dropCuePos;}return{left:AZ,top:Ab,idx:Af,idxActual:Ac};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function G(E){var AW=E.src.data;return !!AW;},createToken:function A(E){return{v:mstrmojo.ME.MetricToken.brackets(E.n),oi:K.copyProps(["did","n","t"],E),isNew:true};},ondrop:function(AW){AW.src.data=this.createToken(AW.src.data.item);if(this.prepareDropItem){this.prepareDropItem(AW);}var E=this.insertTokens([AW.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");return E;},ondragenter:function I(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function W(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function Y(AW){var AX=AW.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AX){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "return false;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" onblur = "return mstrmojo.all.{@id}.handleblur(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function J(AX,E,AW){return new mstrmojo.ME.MetricToken({data:AX,parent:AW});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function X(AW,E){if(this._super){this._super(AW,E);}if(this.oi){this.oi.tks.items=this.items;}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:AF,postBuildRendering:function f(){if(this._super){this._super();}this._eros=false;if(R.isFF){document.body.spellCheck=false;}mstrmojo.dom.attachEvent(this.editNode,"compositionstart",function(){this.saveStateForIME();this.composing=true;this.toggleIMEStatusBar(true);}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionupdate",function AW(AX){if(R.isIEW3C){this.lastImeChar=AX.data||(M&&this.lastImeChar);}else{this.lastImeChar=AX.data||this.lastImeChar;}}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionend",function E(AZ){this.composing=false;if(R.isIE9||R.isIE10){var AY=H.getRangeInfo();this.imeBuffer=AY.startContainer.data.slice(this.prev_rInfo.startOffset,AY.startOffset).split("");}else{if(R.isIEW3C){var AY=H.getRangeInfo();this.imeBuffer=AY.startContainer.data.slice((this.prev_rInfo.startOffset-1)<0?0:this.prev_rInfo.startOffset,AY.startOffset).split("");}else{if(R.isEdge){var AX=AZ.data||"";this.imeBuffer=(this.imeBuffer||[]).concat(AX.split(""));}else{var AX=AZ.data||this.lastImeChar||"";this.imeBuffer=(this.imeBuffer||[]).concat(AX.split(""));}}}}.bind(this));},fnContextMenu:function N(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},saveStateForIME:function j(){if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=H.getRangeInfo();this.prev_items=this.items;}},handleblur:function L(){if(this.doubleByte){this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}},processDeleteKeyDown:function D(AW){if(!this.doubleByte){try{this.widgetHandleDelete(AW);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(E){}return true;}},processBackspaceKeyDown:function AT(AW){if(!this.doubleByte){try{this.widgetHandleBackspace(AW);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}return true;}},handlekeydown:function b(AY){AY=AY||window.event;var E=AY.keyCode||AY.charCode,AW=false,AX=H.getRangeInfo();if((E===AN.LEFT_ARROW||E===AN.RIGHT_ARROW||E===AN.BACKSPACE)&&this.doubleByte){if(this.composing){return ;}this.doubleByte=false;if(E===AN.BACKSPACE){this.imeBuffer.pop();}this.widgetHandleImeInput(this.prev_rInfo);mstrmojo.dom.stopPropogation(window,AY);mstrmojo.dom.preventDefault(window,AY);return false;}switch(E){case AN.DELETE:AW=this.processDeleteKeyDown(AX);break;case AN.BACKSPACE:AW=this.processBackspaceKeyDown(AX);break;case AN.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case AN.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AW=true;break;case AN.ESCAPE:this.endTokenSuggestion();AW=true;break;case 86:if(AV(AY)){this.handlePasteTriggeredDeletion();AW=false;}break;case 89:if(AV(AY)){this.widgetHandleUndoRedo("redo");AW=true;}break;case 90:if(AV(AY)){this.widgetHandleUndoRedo("undo");AW=true;}break;case 229:this.saveStateForIME();break;default:}if(AW){R.stopPropogation(window,AY);R.preventDefault(window,AY);return false;}return true;},handlePasteTriggeredDeletion:function F(){this.set("_saveRangeInfo",H.getRangeInfo());if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this.set("_saveRangeInfo",H.getRangeInfo());}this.clipboardNode.focus();},getCharacter:function AP(AW){var E=(R.isIE&&!R.isIE9)?AW.keyCode:AW.charCode;return(E>0)?String.fromCharCode(E):null;},handleCharacter:function AG(AY){var AZ=this.getCharacter(AY),AW=false;if(AZ&&!((AZ==="c"||AZ==="a")&&AV(AY))){try{this.widgetHandleInput(H.getRangeInfo(),AZ);this.raiseChangeEvent({type:"input",character:AZ});if(!this.isDelimiter(AZ)){if(this.useKeyDelay){var AX=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AX.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AW=true;}return AW;},handlekeypress:function B(E){E=E||window.event;if(this.doubleByte){this.toggleIMEStatusBar(false);this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);window.setTimeout(function(){this.handleCharacter(E);}.bind(this),10);return false;}if(this.handleCharacter(E)){R.stopPropogation(window,E);R.preventDefault(window,E);return false;}return true;},handlekeyup:function h(AX){var E=AX.keyCode||AX.charCode,AW;if(E===AN.LEFT_ARROW||E===AN.RIGHT_ARROW){AW=this.findObjectToken();if(AW&&AW===this._saveActiveToken){this.startTokenSuggestion(AW);}else{this.endTokenSuggestion();}}else{if(E===AN.UP_ARROW){this.preHighlight();}else{if(E===AN.DOWN_ARROW){this.nextHighlight();}else{if(E===AN.BACKSPACE&&this.doubleByte){if(E===AN.BACKSPACE&&!this.composing&&!R.isIE9){this.doubleByte=false;this.imeBuffer.pop();this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}}}}}this.set("_saveRangeInfo",H.getRangeInfo());},handlemouseup:function u(AY){if(this.dropCuePos){return false;}var AW=this.findObjectToken();if(AW&&AW===this._saveActiveToken){this.startTokenSuggestion(AW);}else{this.endTokenSuggestion();}var AX=H.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var E=this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;AW=R.findWidget(AX.startContainer);if(AW){this._delaySetTextCaretPos(AW.domNode,AX.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AX.startOffset-1);}this.prev_rInfo=AX;}this.set("_saveRangeInfo",AX);},handlepasteDirect:function AK(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlepaste(E);R.stopPropogation(window,E);R.preventDefault(window,E);this.handlePasteTriggeredDeletion();return false;},handlepaste:function s(Aa){var AW=this.clipboardNode.value;this.clipboardNode.value="";var AZ=[],E=AW&&AW.length,AY,AX="",Ab;if(E>0){for(AY=0;AY<E;AY++){Ab=AW.charAt(AY);if(this.isDelimiter(Ab)){if(!mstrmojo.string.isEmpty(AX)){AZ.push({v:AX,isNew:true});AX="";}AZ.push({v:Ab,isDelimiter:true,isNew:true});}else{AX=AX+Ab;}}if(!mstrmojo.string.isEmpty(AX)){AZ.push({v:AX,isNew:true});AX="";}this.insertTokens(AZ);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AS(){var AW=[],AY=this.items,AX,E;for(AX=0,E=AY.length;AX<E;AX++){AW[AX]=AY[AX].v;}return AW.join("| ");},replaceErrorToken:function w(AY){var AX=this.items||[],AZ=mstrmojo.array.find(AX,"sta",-1),AW,Aa=function(Ag,Ae,Ah){var Ad=(Ag&&Ag.items)||[],Ac=x.find(Ad,"did",Ae),Ab,Af;if(Ac>-1){Ab=Ad[Ac].fs;Af=x.filterOne(Ab,function(Ai){return Ai.fnm&&Ai.fnm.toUpperCase()===Ah.toUpperCase();});}return Af;},E=function(Ag,Ae,Af){var Ab={v:Ae.n,oi:Ae,isNew:true},Ad=Ag.v&&Ag.v.split("@"),Ac;if(Ad&&Ad.length>1){Ac=Aa(Af,Ae.did,Ad[1]);if(Ac){Ab.exv=Ac.fmdid||Ac.fid;Ab.extp=8;Ab.v=mstrmojo.ME.MetricToken.brackets(Ae.n)+"@"+Ac.fnm;}}return Ab;};if(AZ>-1){AW=E(AX[AZ],AY,this.candidates);this.remove(AZ);this.add([AW],AZ);}},widgetHandleDelete:function g(AZ){if(AZ.collapsed){var AY,AX,E,Aa=AZ.startOffset,AW=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AZ.startContainer,false,document.body)){H.collapseOnNode(this.editNode,false);return ;}AY=H.getEdgeInfo(AZ.startContainer,AZ.startOffset);AX=R.findWidget(AZ.startContainer);E=this.itemIndex(AX.data);if(AY===o.EDGE_END){E++;AX=AW[E];Aa=0;}if(!AX){H.collapseOnNode(this.editNode,false);return ;}if(AX.length()===1){this.remove(E);AX=AW[E];if(AX){H.collapseOnNode(AX.domNode,true);}else{H.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AX.spliceContent(Aa,1);H.collapseOnTextNode(AX.domNode,Aa);}}else{this.widgetDeleteTokens(AZ);}},widgetHandleBackspace:function AE(AZ){if(AZ.collapsed){var AY,AX,E,Aa=AZ.startOffset,AW=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AZ.startContainer,false,document.body)){if(AZ.startOffset>0&&R.isFF){AX=AW[this.items.length-1];H.collapseOnNode(AX.domNode,false);AZ=H.getRangeInfo();AY=H.getEdgeInfo(AZ.startContainer,AZ.startOffset);}else{H.collapseOnNode(this.editNode,true);return ;}}AY=H.getEdgeInfo(AZ.startContainer,AZ.startOffset);AX=R.findWidget(AZ.startContainer);E=this.itemIndex(AX.data);if(AY===o.EDGE_BEGIN){E--;AX=AW[E];Aa=AX.length();}if(!AX){H.collapseOnNode(this.editNode,true);return ;}if(AX.length()===1){this.remove(E);AX=AW[E-1];if(AX){H.collapseOnNode(AX.domNode,false);this.checkMergeTwoTokens(E-1,E);AX=AW[E-1];}else{H.collapseOnNode(this.editNode,true);}}else{AX.spliceContent(Aa-1,1);H.collapseOnTextNode(AX.domNode,Aa-1);}}else{this.widgetDeleteTokens(AZ);}},widgetHandleInput:function AH(Aa,Ab){if(!Aa.collapsed){this.widgetDeleteTokens(Aa);Aa=H.getRangeInfo();}var AX,Ac,Ad,Ae,E,AW,AY=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,Aa.startContainer,false,document.body)){this.add([{v:Ab,isDelimiter:this.isDelimiter(Ab),isNew:true}],0);Ac=AY[0];H.collapseOnTextNode(Ac.domNode,1);return ;}AX=H.getEdgeInfo(Aa.startContainer,Aa.startOffset);Ac=R.findWidget(Aa.startContainer);Ad=this.itemIndex(Ac.data);if(this.isDelimiter(Ab)){Ae={v:Ab,isDelimiter:true,isNew:true};if(AX===o.EDGE_MIDDLE){var AZ=Ac.split2Tokens(Aa.startOffset);this.remove(Ad);this.add([AZ[0],Ae,AZ[1]],Ad);Ad=Ad+1;}else{Ad=(AX===o.EDGE_BEGIN)?Ad:Ad+1;this.add([Ae],Ad);}Ac=AY[Ad];H.collapseOnTextNode(Ac.domNode,(Ac.domNode.innerText||Ac.domNode.textContent).length);}else{AW=Aa.startOffset;if(Ac.isDelimiter()){E=AY[(AX===o.EDGE_BEGIN)?Ad-1:Ad+1];if(E&&!E.isDelimiter()){Ac=E;AW=(AX===o.EDGE_BEGIN)?Ac.length():0;}}if(!Ac.isDelimiter()){Ac.spliceContent(AW,0,Ab);H.collapseOnTextNode(Ac.domNode,AW+1);}else{this.add([{v:Ab,isNew:true}],(AX===o.EDGE_BEGIN)?Ad:Ad+1);Ac=AY[(AX===o.EDGE_BEGIN)?Ad:Ad+1];H.collapseOnNode(Ac.domNode,false);}}},widgetHandleImeInput:function AH(AZ,Aa){Aa=Aa||this.imeBuffer.join("");this.imeBuffer=[];this.lastImeChar=null;if(!Aa){return ;}if(!AZ.collapsed){this.widgetDeleteTokens(AZ);AZ=H.getRangeInfo();}var AX,Ab,Ac,Ad,E,AW,AY=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AZ.startContainer,false,document.body)||this.items.length==0){this.clearTokens();this.add([{v:Aa,isDelimiter:this.isDelimiter(Aa),isNew:true}],0);AY=this.ctxtBuilder.itemWidgets;Ab=AY[0];H.collapseOnTextNode(Ab.domNode,1);this._delaySetCaretPos(Ab.domNode,false);return ;}AX=H.getEdgeInfo(AZ.startContainer,AZ.startOffset);Ab=R.findWidget(AZ.startContainer);Ac=this.itemIndex(Ab.data);AW=AZ.startOffset;if(Ab.isDelimiter()){this.clearTokens();this.add(this.prev_items);AY=this.ctxtBuilder.itemWidgets;E=AY[(AX===o.EDGE_BEGIN)?Ac-1:Ac+1];if(E&&!E.isDelimiter()){Ab=E;AW=(AX===o.EDGE_BEGIN)?Ab.length():0;}}if(!Ab.isDelimiter()){Ab.spliceContent(AW,0,Aa);this._delaySetTextCaretPos(Ab.domNode,AW+Aa.length);}else{this.add([{v:Aa,isNew:true}],(AX===o.EDGE_BEGIN)?Ac:Ac+1);Ab=AY[(AX===o.EDGE_BEGIN)?Ac:Ac+1];this._delaySetCaretPos(Ab.domNode,false);}this.startTokenSuggestion();return Ab;},findObjectToken:function C(){var AZ=H.getRangeInfo(),AX=R.findWidget(AZ.startContainer);if(!R.contains(this.editNode,AZ.startContainer,false,document.body)){return null;}if(!AX||AX===this||!AX.isDelimiter){return null;}if(AX&&!AX.isDelimiter()){return AX;}var AY=H.getEdgeInfo(AZ.startContainer,AZ.startOffset),AW=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AX.data);AX=AW[(AY===o.EDGE_BEGIN)?E-1:E+1];if(AX&&!AX.isDelimiter()){return AX;}return null;},checkMergeTwoTokens:function AC(AZ,AX){var AY=this.ctxtBuilder.itemWidgets,AW=AY[AZ],E=AY[AX];if((AW&&!AW.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AZ,AX]);this.add([AW.mergeTo(E)],AZ);H.collapseOnTextNode(AY[AZ].domNode,AW.length());}},insertTokens:function AJ(Aa){var Ad=0,Ac=this.editNode;var AX=this._saveRangeInfo||H.getRangeInfo();if(!AX||!R.contains(Ac,AX.startContainer,false,document.body)){this.add(Aa);Ad=this.items.length-1;if(Ad===0){this._delaySetTextCaretPos(Ac,(Ac.innerText||Ac.textContent).length);}else{var E=this.ctxtBuilder.itemWidgets[Ad].domNode;this._delaySetTextCaretPos(E,(E.innerText||E.textContent).length);}}else{var AW=H.getEdgeInfo(AX.startContainer,AX.startOffset),Ab=R.findWidget(AX.startContainer);Ad=this.itemIndex(Ab.data);if(AW===o.EDGE_MIDDLE){var AY=Ab.split2Tokens(AX.startOffset);this.remove(Ad);Aa.unshift(AY[0]);Aa.push(AY[1]);this.add(Aa,Ad);}else{Ad=(AW===o.EDGE_BEGIN?Ad:Ad+1);this.add(Aa,Ad);}Ad=Ad+Aa.length-1;Ab=this.ctxtBuilder.itemWidgets[Ad];this._delaySetCaretPos(Ab.domNode,false);}this.raiseChangeEvent({type:"insert"});var AZ=this;window.setTimeout(function(){AZ.set("_saveRangeInfo",H.getRangeInfo());},50);return Ad;},insertParenthesisTokens:function AM(AW){var E=this;window.setTimeout(function(){var AX=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AX-1],1);},AW||50);},clearTokens:function AB(E){this.set("items",E||[]);this.set("_saveRangeInfo",null);this._delaySetCaretPos(this.editNode,false);},focus:function AI(){var AW=this.ctxtBuilder.itemWidgets,E=AW.length;this._delaySetCaretPos(E>0?AW[E-1].domNode:this.editNode,false);},startTokenSuggestion:function AO(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[Q.TP.FOLDER,Q.TP.FACT,Q.TP.ATTR,Q.TP.FUNCTION,Q.TP.FILTER,Q.STP.PROMPT_OBJECTS,Q.TP.ATTR,Q.TP.DIM,Q.TP.METRIC,Q.TP.ROLE].join(","),getSearchPattern:function a(){var AW=this._saveActiveToken,AY=AW&&AW.data.v,E=AY&&AY.length;if(E>2){if(AY.charAt(0)==="["){AY=AY.substring(1);}if(AY.charAt(AY.length-1)==="]"){AY=AY.substring(0,AY.length-1);}}if(AW&&AW.data.ift){var AX=AW.data.v,AZ=AX&&AX.indexOf("@");if(AZ>=0){AY=AX.substring(AZ);}}return AY||"";},getSuggestionPos:function l(){var E=this._saveActiveToken,AW=null,AY,AX;if(E){AY=E.data&&E.data.ift;AX=mstrmojo.dom.position(E.domNode,true);AW={left:Math.round(AX.x+(AY?AX.w:0))+"px",top:Math.round(AX.y+AX.h)+"px",zIndex:100};}return AW;},item2textCss:function O(AW){var E=(this._super&&this._super(AW))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AW.t]||"";E+=AW.da?" da":"";E+=(AW.dm||AW.um)?" dm":"";E+=AW.de?" de":"";E+=AW.fs&&AW.fs.length&&AW.fs.some(function(AX){return AX.fgr>0;})?" g":"";return E;},onBrowserOpen:function AD(){this.editNode.blur();},onSuggestionItemSelect:function AL(AW){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AW.t===21){E.setFormInfo(AW);}else{E.setItemInfo(AW);if(AW.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function AQ(E,AX){var AW=this.editNode,AY=this,AZ=function(){AW.focus();AW.focus();H.collapseOnNode(E,AX);AY.set("_saveRangeInfo",H.getRangeInfo());};window.setTimeout(AZ,0);},_delaySetTextCaretPos:function AQ(E,AZ){var AW=this.editNode,AX=this,AY=function(){AW.focus();AW.focus();H.collapseOnTextNode(E,AZ);AX.set("_saveRangeInfo",H.getRangeInfo());};window.setTimeout(AY,0);},getCandidatesThroughTaskCall:function e(AW,E){AW.objectType="11,12,13,43,4";AW.rootFolderType=39;AW.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AW,E);},filterCandidates:function AA(AZ,AY,E){var AW=this._saveActiveToken,Aa=AW&&(AW.data.oi||AW.data.at),AX;if(Aa&&AW.data.ift){E=E||this.suggestCount;AY=mstrmojo.string.regEscape(AY);AX=x.filter(AZ,function(Ab){return Ab.t===21&&Ab.attid===Aa.did&&(new RegExp("^"+AY,"i")).test("@"+Ab.n);},{max:E});}else{AX=x.filter(AZ,function(Ab){return Ab.t!==21;});AX=this._super(AX,AY,E);}return AX;},endTokenSuggestion:function AR(AW){var E=this._saveActiveToken;if(E){if(AW){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function t(Ae){var AW=Ae.startOffset,E=Ae.endOffset,Ah=R.findWidget(Ae.startContainer),Af=R.findWidget(Ae.endContainer),Aa=this.itemIndex(Ah.data),AY=this.itemIndex(Af.data),Ab=[],Ac=H.getEdgeInfo(Ae.startContainer,AW),Ag=H.getEdgeInfo(Ae.endContainer,E),Ad=(Ac===o.EDGE_BEGIN?Aa:Aa+1),AX=(Ag===o.EDGE_END?AY:AY-1),AZ;if(Ah===Af){if((Ac===o.EDGE_BEGIN)&&(Ag===o.EDGE_END)){this.remove(Aa);Af=this.ctxtBuilder.itemWidgets[Aa===0?Aa:Aa-1];if(Af){H.collapseOnNode(Af.domNode,Aa===0);}else{H.collapseOnNode(this.editNode,true);}}else{Ah.spliceContent(AW,E-AW);H.collapseOnTextNode(Af.domNode,AW);}}else{for(AZ=Ad;AZ<=AX;AZ++){Ab.push(AZ);}this.remove(Ab);if(Ac===o.EDGE_MIDDLE){Ah.spliceContent(AW);}if(Ag===o.EDGE_MIDDLE){Af.spliceContent(0,E);}if(Ac===o.EDGE_BEGIN){Ah=this.ctxtBuilder.itemWidgets[Aa===0?Aa:Aa-1];}if(Ah){H.collapseOnNode(Ah.domNode,Aa===0);}else{H.collapseOnNode(this.editNode,false);}Aa=(Ac===o.EDGE_BEGIN)?Aa-1:Aa;this.checkMergeTwoTokens(Aa,Aa+1);}this.editNode.focus();},oncandidatesChange:function z(){var AW=this.candidates,E=(AW&&AW.items)||[];if(!this.noCache&&AW&&AW.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AW=this.getSuggestionPos();if(AW){E.set("left",AW.left);E.set("top",AW.top);}},pretokensModify:function P(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:K.clone(this.items),rInfo:H.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function q(AX){var AY,E,AW=function(Aa){if(!Aa){return ;}Aa=Aa||{};this.set("items",K.clone(Aa.items));var Ad=this.ctxtBuilder.itemWidgets,AZ=Ad[Aa.idx],Ac=AZ&&AZ.domNode||this.editNode,Ab=Aa.rInfo;this._delaySetTextCaretPos(Ac,Ab&&Ab.startOffset||0);};switch(AX){case"undo":AY=--this.tokensCachePointer;if(AY>-1){E=this.tokensCache[AY-1];AW.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AY=this.tokensCachePointer++;if(AY>-1&&AY<this.tokensCache.length){E=this.tokensCache[AY];AW.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function Z(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;},toggleIMEStatusBar:function d(E){if((R.isIE9||R.isIE10||R.isIEW3C||R.isEdge)&&this.detectKoreanLocale()){if(E){if(!this.elStatus||!this.elStatus.offsetParent){var AW=this.elStatus=document.createElement("div");AW.innerText=mstrmojo.desc(15003,"Please enter space key to finish IME typing");AW.className="mstrmojo-TokenInputBox-status";this.domNode.appendChild(AW);}}else{this.domNode.removeChild(this.elStatus);delete this.elStatus;}}},detectKoreanLocale:function p(){var E=window.navigator;if(window.mstrConfig&&(window.mstrConfig.browserLang||[]).indexOf("ko")>=0){return true;}else{if(E.userLanguage=="ko"||E.userLanguage=="ko-KR"||E.browserLanguage=="ko"||E.browserLanguage=="ko-KR"){return true;}}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidVisBase","mstrmojo.DocPortlet");var L={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"},P,B;mstrmojo.AndroidVis=mstrmojo.declare(mstrmojo.AndroidVisBase,null,{scriptClass:"mstrmojo.AndroidVis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,reRenderOnDimensionChg:true,isVis:function(){return true;},setModel:function Q(R){this._super(R);if(R.data){this.set("model",R.data);}this.xtabModel=R;if(this.controller&&typeof (this.controller.getPageByTree)!="undefined"){this.controller.getPageByTree(false);}},destroy:function O(){this._super();var R=this.xtabModel;if(R&&R.destroy){R.destroy();delete this.xtabModel;}},setDimensions:function N(U,S){var R=this._super(U,S);if(R&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return R;},buildRendering:function M(){if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function G(){P=this.width;B=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function E(){var R=this.domNode,S={top:0,left:0};if(typeof (mstr)!="undefined"){S.top=mstr.utils.BoxModel.getElementSumOffsetTop(R);S.left=mstr.utils.BoxModel.getElementSumOffsetLeft(R);}else{if(typeof (mstrmojo)!="undefined"){S=mstrmojo.boxmodel.offset(R);}}this.offsetTop=S.top;this.offsetLeft=S.left;},update:function F(W){W=W||this.node;if(W){if(W.data){this.set("model",W.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",W.data);}this.model=W.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(W.data.extProps,this);}var U=this.controller,S=U.view,Y=(S.hasRendered&&S.getCurrentLayout&&S.getCurrentLayout());if(U.view.fullScreenInfoWindow&&(Y&&Y.defn.visName)){var X=mstrApp.rootView.getContentDimensions();this.height=X.h+"px";this.width=X.w+"px";}else{this.fmts=W.defn.fmts||W.defn.units[this.model.k].fmts;var R=this.fmts;if(R){for(var V in L){v=L[V];if(V in R){this[v]=R[V];}}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;return true;},getModel:function A(S){if(S){var R=mstrmojo.AndroidVis.getVisGrid(this.layoutModel,this.layoutNode,S);if(R){return R.data;}else{alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));return{};}}else{return this.model;}},getDataParser:function K(R){return new mstrmojo.AndroidVis.DataParser(this.getModel(R));},renderErrorMessage:function H(R){this.domNode.innerHTML='<div class="mstrmojo-message">'+R+"</div>";},getMessageID:function J(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function D(V){var d=this.xtabModel,b=(d&&d.docModel);var e=false;if(b){var a=b.defn&&b.defn.layouts,U=null;var S;if(a){for(S in a){if(a[S].loaded){U=a[S];break;}}}var W=U&&U.units;this.selectorTargets={};if(W&&V.scObjList){for(var S=0;S<V.scObjList.length;S++){var X=V.scObjList[S];var Y=X.sc.tks.split("\x1E");for(var R=0;R<Y.length;R++){var Z=W[Y[R]];if(Z){this.selectorTargets[Y[R]]=Z;if(!this.isChildOfIfw(W,Z)){e=true;}}}}}}return e;},isChildOfIfw:function I(R,S){while(S){if(S.ifw){return true;}S=R[S.pnk];}return false;},performAction:function C(R){var U=this.xtabModel.getAction(R),S=U&&U.h;if(S&&this.controller[S]){this.controller[S](this,U.a);return true;}return false;}});mstrmojo.AndroidVis.getVisGrid=function(R,Z,S){var X=Z;var V=R.getChildren(Z,false);for(var U=0;U<V.length;U++){var Y=V[U];if(Y.k==S){return Y;}else{var W=mstrmojo.AndroidVis.getVisGrid(R,Y,S);if(W){Z=X;return W;}}}};mstrmojo.AndroidVis.DataParser=function(U){var b=mstrmojo.AndroidVis;return{getRowTitles:function(){return new b.Titles(U,true);},getColTitles:function(){return new b.Titles(U,false);},findMetricValue:function(g,l){var k=U.ghs.rhs.items;for(var h in k){var j=k[h].items;var f=true;for(var d in g){if(g[d]!=j[d].idx){f=false;break;}}if(f){return new mstrmojo.AndroidVis.MetricValue(U.gvs.items[h].items[l]);}}},getTotalRows:function X(){var d=U.ghs&&U.ghs.rhs&&U.ghs.rhs.items;return(U.eg||!d)?0:d.length;},getTotalColHeaderRows:function V(){return(!U.ghs.chs.items?0:U.ghs.chs.items.length);},getTotalCols:function R(){return this.getColHeaders(0).size();},getRowHeaders:function a(d){return new b.Headers(U,d,true);},getColHeaders:function Z(d){return new b.Headers(U,d,false);},getMetricValue:function Y(e,d){return new b.MetricValue(U,U.gvs.items[e].items[d]);},getColumnHeaderCount:function W(){return U.gvs.items[0].items.length;},getCSSString:function S(){return U.cssString;}};};mstrmojo.AndroidVis.Titles=function(R,X){var W=(X)?R.gts.row:R.gts.col;return{size:function V(){return W.length;},getTitle:function U(Y){return new mstrmojo.AndroidVis.Title(W[Y]);},getCSS:function S(Y){return R.css[W[Y].cni].n;}};};mstrmojo.AndroidVis.Headers=function(S,U,Y){var Z=(Y)?S.gts.row:S.gts.col;var X=(Y)?S.ghs.rhs:S.ghs.chs;var V=X.items&&X.items[U].items;return{size:function a(){return(!V?0:V.length);},getHeader:function R(b){return V&&V[b]&&new mstrmojo.AndroidVis.Header(V[b],Y?Z[b]:Z[U]);},getCSS:function W(b){return V&&S.css[V[b].cni].n;},getHeaderCell:function(b){return V&&V[b];}};};mstrmojo.AndroidVis.Title=function(S){return{getActionType:function(){return S.at;},getDrillPath:function(){return S.dp;},getHeaderValues:function R(){return S.es;},getHeaderName:function U(W){return S.es[W].n;},getHeaderId:function U(W){return S.es[W].id;},getForms:function V(){return S.fs;},getFormId:function(){return S.fid;},getFormType:function(){return S.ftp;},getUnitId:function(){return S.id;},getLinkMap:function(){return S.lm;},getName:function(){return S.n;},getUnitDssType:function(){return S.otp;},getSelectorControl:function(){return S.sc;}};};mstrmojo.AndroidVis.Header=function(U,R){return{getName:function W(){return(U.idx===-1)?"":R.es[U.idx].n;},getElementId:function Z(){return(U.idx===-1)?"":R.es[U.idx].id;},getObjectId:function V(){return(U.idx===-1)?"":R.es[U.idx].oid;},getElementIndex:function S(){return U.idx;},getActionType:function Y(){return U.at;},isTotal:function X(){return U.otr===1;}};};mstrmojo.AndroidVis.MetricValue=function(R,Z){var Y=Z;return{getValue:function S(){return Y.v;},getThresholdType:function U(){return Y.ty;},getRawValue:function X(){return Y.rv;},getCSS:function V(){return R.css[Y.cni].n;},getThresholdValue:function a(b){if(Y.ti==undefined){return b;}return R.th[Y.ti].n;},getFillColor:function W(b){if(Y.ci==undefined){return b;}return R.fc[Y.ci].n;}};};})();(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var R=mstrmojo.array,V=mstrmojo.css,N=mstrmojo.hash,O=mstrmojo.func,M=mstrmojo.Button.newWebButton,P=mstrmojo.dom,U="mstrmojo-link-validation",Q="mstrmojo-link-vt",F=function F(W){if(W.old){this.removedLinks.push(W);}this.links.removeChildren(W);},S=function S(){var AA=this.dsMap,u=this.docModel,Z=u.datasets,AC=function AC(j,x,a){var k={n:a||"",did:x||null,parent:j||null,lv:(j?j.lv+1:-1),children:[]};if(j){j.children.push(k);}return k;},g=AC(),Y,X,W,l,b,w,p,AB,z,t,s,q,e,d,f,o,h;N.forEach(Z,function(a){if(u.isMDXDataset(a)){b=a.tables;for(t=0,d=b.length;t<d;t++){w=b[t];Y=AC(g,w.did,w.n);Y.isMDX=true;for(s=0,f=w.dimensions.length;s<f;s++){p=w.dimensions[s];X=AC(Y,p.did,p.n);for(q=0,o=p.hierarchies.length;q<o;q++){AB=p.hierarchies[q];W=AC(X,AB.did,AB.n);for(e=0,h=AB.att.length;e<h;e++){z=AB.att[e];l=AC(W,z.did,z.n);l.att=z;AA[w.did+":"+z.did]=l;}}}}}else{Y=AC(g,a.did,a.name);Y.isMDX=false;R.forEach(a.att,function(j){l=AC(Y,j.did,j.n);l.att=j;AA[a.did+":"+j.did]=l;});}});return g;},B=function B(d,e){d=R.ensureArray(d);var b=this,a=this.attribute.did,f=this.docModel,Y=this.datasetId,X="\u001F",W={success:function(h){var k=h.als,g=(f.als&&f.als.links)||{},j=b.dsTree;R.forEach(d,function(w,p){var x={},l={},o=[],q={},u=a+" "+w,s=R.filter(k[p].ats,function(z){return !f.isInDataset(Y,z.at,["att"]);}),t=function t(z,AA){if(!q[z]){q[z]={};}if(!q[z][AA]){q[z][AA]=true;}};R.forEach(s,function(AB){var z=AB.at,AA=AB.fms;x[z]=true;if(AA){R.forEach(AA,function(AC){t(z,AC.fm);});}});N.keyarray(g).forEach(function(z){if(z===u){R.forEach(g[z],function(AA){AA=AA.split(" ");x[AA[0]]=true;t(AA[0],AA[1]);});}});if(N.keyarray(x).length>0){R.forEach(j.children,function(AA){var z=function(AB){var AC;if(!AB.att){return ;}AB=AB.att;if(x[AB.did]){if(!l[AB.n]){l[AB.n]={};}if(!l[AB.n][AB.did]){l[AB.n][AB.did]=[];}l[AB.n][AB.did].push(AA.n);AC=N.copy(AB,AC);AC.dsId=AA.did;o.push(AC);}};if(AA.isMDX){R.forEach(AA.children,function(AB){R.forEach(AB.children,function(AC){R.forEach(AC.children,z);});});}else{R.forEach(AA.children,z);}});}b.tgtAttrs[w]=o;b.tgtForms[w]=q;b.namesHash[w]=l;});}},Z={taskId:"validateDocumentLinks",msgID:f.mid,action:1,attributeList:a,attributeFormList:d.join(X)};mstrApp.serverRequest(Z,O.wrapMethods(W,e));},E=function(Z,b,X,a){Z.richTooltip=null;if(!Z.isSearching){var Y=b&&b.scrollWidth>b.clientWidth;X=Y?mstrmojo.desc(14648,"## from ###").replace("##",X):"";if(a){if(!Y){X=mstrmojo.desc(14640,"From ###");}X=X.replace("###",a);}var W=mstrmojo.dom.position(b);Z.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:X,top:W.y-6,left:W.x};}},D=function D(e){var f=this,h=function(s){var p=s.fs,t=s.de,q=[];(p||[]).forEach(function(u){if(u.obf&&(!t||u.idf)){q.push({n:u.fnm,v:u.fid,idf:u.idf});}});return q;},j=h(this.attribute),a=function(t,q){var p=h(t);var u=(f.tgtForms[q]&&f.tgtForms[q][t.did])||{};var s=[];R.forEach(p,function(w){if(u[w.v]){s.push(w);}});return s;},d=function d(q){var p=[];R.forEach(f.tgtAttrs[q],function(s){if(a(s,q||f.idFormId).length>0){var u=f.namesHash[q],t=s.n;if(u[s.n]&&N.keyarray(u[s.n]).length>1){t=t+" ("+u[s.n][s.did].join(",")+")";}p.push({n:s.n,v:s,tt:t});}});if(p.length===0){p.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return p;},k=d((e&&e.srcFormId)||this.idFormId),l=function(p,q){return R.find(p.fs,q?"fid":"idf",q||true);},o=function(q){var p=-1;k.forEach(function(t,s){if(t.v.did===q){p=s;}});return p;},X=function(q){var p=k[q];if(!p){return mstrmojo.desc(13397,"Select an attribute");}else{return p.n;}},Y=function(q){var s=q.items,p=q.selectedIndex;if(p>=0){if(s[p].idf){return ;}}s.forEach(function(u,t){if(u.idf){q.set("selectedIndex",t);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!e,oldMeta:e,getMeta:function(){var p=this.linkFromForm,s=this.linkToAtt,q=this.linkToForm;return{srcAttrId:f.attribute.did,srcFormId:p.items[p.selectedIndex].v,tgtAttrId:s.items[s.selectedIndex]&&s.items[s.selectedIndex].v.did,tgtFormId:q.items[q.selectedIndex]&&q.items[q.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:f.attribute.n,useRichTooltip:true,updateTooltipConfig:function(u){var t=u.target,p=this.text,q=f.datasetId,s=q?f.docModel.datasets[q].name:"";E(this,t,p,s);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:j,selectedIndex:l(f.attribute,e&&e.srcFormId),onitemSelected:function(q){var p=this,s=function(){var u=p.parent.linkToAtt;k=d(q.v);u.set("items",k);u.set("selectedIndex",-1);u.set("text",mstrmojo.desc(13397,"Select an attribute"));V.addClass(u.selectedNode,"nvo");},t={success:s};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!q.idf){Y(this.parent.linkToForm);if(!f.tgtForms[q.v]){B.call(f,q.v,t);return ;}}s();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:k,text:X(o(e&&e.tgtAttrId)),selectedIndex:o(e&&e.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(w){var u=w.target,p=u.getAttribute("tt"),s=this.getSelectedItem(),q=s?s.v.dsId:null,t=q?f.docModel.datasets[q].name:"";if(this.selectedNode===u&&s){p=s.tt;}E(this,u,p,t);},onitemSelected:function(u){if(!u||u.v.did===null){return ;}var t=this.parent.linkToForm,s=this.parent.linkFromForm,q=a(u.v,s.items[s.selectedIndex].v),w=function w(x,AA){var z=R.find(x,AA?"v":"idf",AA||true);if(z===-1&&x.length>0){z=0;}return z;},p;R.forEach(q,function(x){if(x.idf){p=false;return false;}});if(p){K.call(f,true);}t.set("items",q);t.set("selectedIndex",w(q,!this.hasRendered&&e&&e.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}J.call(f);},onPopupWidgetOpened:function b(){if(this.selectedIndex===-1){this.set("text","");}V.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function g(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));V.addClass(this.selectedNode,"nvo");}else{V.removeClass(this.selectedNode,"nvo");}this.hideTooltip();R.forEach(f.collapseTargets,function(p){p.className="arrow-b";V.removeClass(p.parentNode.parentNode,"collapse");});R.forEach(f.collapseTreeNodes,function(p){delete p.collapse;});R.forEach(this.list.itemsContainerNode.childNodes,function(p){p.style.display="";});},postBuildRendering:function W(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){V.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function Z(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function p(x,z,w){this.parent.set("selectedIndex",w);this.close();}},onclick:function q(AF){try{var x=AF.getTarget(),AG=this.getItemFromTarget(x),AC=P.findAncestorByAttr(x,"idx",true,this.domNode),AB=this.items;if(AB){this.parent.set("items",AB);}if(AG){AF.cancel();if(x.className==="arrow-b"||x.className==="arrow-r"){var w=this.itemsContainerNode.childNodes,AA=function AA(AI){var AH;while(AI){AH=AI.className||"";if(AH.indexOf("lv")===0){return window.parseInt(AH.substring(2),10);}AI=AI.firstChild;}return null;},AE=function AE(AH,AK){var AJ=f.dsMap,AI=AJ[AH.dsId+":"+AH.did];while(AI){if(AI.lv===AK){return AI;}AI=AI.parent;}return null;},AD=function AD(){var AQ=(x.className==="arrow-b"),AK=x.parentNode.parentNode,AH=AA(AK),AL=AG._renderIdx,AI=AE(AG.v,AH),AO=AB.length,AN,AJ,AM,AP,AS,AR;x.className=AQ?"arrow-r":"arrow-b";if(!f.collapseTargets){f.collapseTargets=[];}f.collapseTargets.push(x);V.toggleClass(AK,"collapse",AQ);AI.collapse=AQ;if(!f.collapseTreeNodes){f.collapseTreeNodes=[];}f.collapseTreeNodes.push(AI);for(AN=AL+1;AN<AO;AN++){AJ=w[AN];AM=AA(AJ);if(AM<=AH){break;}AP=AE(AB[AN].v,AM);AS=AP.parent;AR=true;while(AS){if(AS.collapse){AR=false;break;}AS=AS.parent;}AJ.style.display=(AR?"":"none");}};AD();}else{if(AC&&AC.node.className.indexOf("item")!==-1){this.doItemSelect(AG,AF||{});}}}}catch(z){mstrApp.onerror(z);}},getItemProps:function s(z,w){var x=mstrmojo._IsList.getItemProps.call(this,z,w);var AA=z.cls;if(AA){x.addCls(AA);}return x;},getItemMarkup:function u(AH,AG){if(AH.v.did===null){return'<{@tag} class="item {@cls}" did="'+AH.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AI=[],AE=AH.v.did,z=AH.v.dsId,AA=z?f.docModel.datasets[z]:null,x=AA?AA.name:"",AF=AG>0&&this.items[AG-1].v,AC=f.dsMap,AB=AC[AH.v.dsId+":"+AE],w=AC[(AF&&(AF.dsId+":"+AF.did))];AI.push("</div>");while(AB){if(AB.lv===-1){break;}if(AB.att){var AD=AB.att.da?"derived-attr":"attr";AI.push('<div class="lv'+AB.lv+' dim item {@cls}" tt="'+AH.tt+'" did="'+AE+'" dsName="'+x+'" idx="{@idx}" style="{@style}"><div><div class="'+AD+'"></div></div>{@n}</div>');}else{if(AB!==w){AI.push('<div class="lv'+AB.lv+' dim" dtt="'+AB.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+AB.n+"</div>");}else{break;}}AB=AB.parent;w=(w&&w.parent)||null;}AI.push("<div>");return AI.reverse().join("");},updateTooltipConfig:function t(AC){var AB=AC.target,z=AB.getAttribute("tt"),x=AB.getAttribute("dtt"),AA=AB.getAttribute("dsName"),w=z||x;if(w){E(this,AB,w,AA);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(p){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!p.idf){Y(this.parent.linkFromForm);}}}},M("",function(){F.call(f,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},K=function(W){V.toggleClass(this.editorNode,"mstrmojo-advanced",W);},L=function(Z){var X=this,a=U,W;try{mstrmojo.all[a].destroy();}catch(Y){}W={scriptClass:"mstrmojo.Editor",id:a,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[M(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[a].destroy();H.call(X);},true)],children:[{scriptClass:"mstrmojo.Label",text:Z}],visible:true,zIndex:1000};mstrmojo.insert(W).render();},H=function(){var Y=this,X=this.illLinks,W=this.links.children,Z=Q;R.forEach(X,function(a){a=a.al;R.forEach(W||[],function(d){var f=d.getMeta(),g=d.linkToAtt,b,e;if(f.srcAttrId===a.alaid1&&f.tgtAttrId===a.alaid2){if(!mstrmojo.all[Z]){e=new mstrmojo.Tooltip({id:Z,cssClass:Y.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});P.attachEvent(Y.editorNode,"click",function(){e.close();V.toggleClass(g.selectedNode,"mstrmojo-Warning",false);});}else{e=mstrmojo.all[Z];}e.close();b=mstrmojo.dom.position(g.selectedNode);e.set("top",b.y-6);e.set("left",b.x);e.set("content",a.alstmsg);V.toggleClass(g.selectedNode,"mstrmojo-Warning",true);e.open();return false;}});});},A=function(){var W=mstrmojo.all[Q];if(W){W.close();}},J=function J(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},G=function G(){var W=this,X=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){D.call(W);A.call(W);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){K.call(W,true);A.call(W);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){K.call(W,false);A.call(W);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(X);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var Z=this,X=this.docModel,Y=function(){var a=(X.als&&X.als.links)||{},b=[];N.keyarray(a).forEach(function(d){if(d.indexOf(Z.attribute.did+" ")===0){a[d].forEach(function(e){b.push({srcAttrId:d.split(" ")[0],srcFormId:d.split(" ")[1],tgtAttrId:e.split(" ")[0],tgtFormId:e.split(" ")[1]});});}});return b;},W;this.set("buttons",[M(mstrmojo.desc(1442,"OK"),function(){var j=[],b=Z.links.children,a=function(){var k=X.controller,l=X.controller.getRefreshCallback();if(j.length>0){k.cmdMgr.execute({execute:function(){this.submit(j,l,{style:{params:{treesToRender:3}}});},urInfo:{callback:l}});}Z.close();},h=false,e,f;Z.removedLinks.forEach(function(k){e=N.copy(k.oldMeta,{act:"applyAttributeLinking",unlink:true});j.push(e);});(b||[]).forEach(function(k){if(k.old&&k.oldUpdated){e=N.copy(k.oldMeta,{act:"applyAttributeLinking",unlink:true});j.push(e);}if(!k.old||(k.old&&k.oldUpdated)){f=k.getMeta();if(!f.tgtAttrId){return ;}e=N.copy(f,{act:"applyAttributeLinking",unlink:false});j.push(e);}});R.forEach(j,function(k){if(!k.unlink){h=true;return false;}});if(!h){a();return ;}var g={taskId:"validateDocumentLinks",msgID:X.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(j)+"}"},d={success:function(k){if(k.als&&k.als.length>0){var l="";R.forEach(k.als,function(o){l+=o.al.alstmsg+"\n";});Z.illLinks=k.als;L.call(Z,l);return ;}a();}};mstrApp.serverRequest(g,d);},true,{enabled:false}),M(mstrmojo.desc(221,"Cancel"),function(){Z.close();})]);G.call(this);W=Y(this.attribute.did);if(W.length>0){W.forEach(function(a){D.call(Z,a);});J.call(this);}else{D.call(this);}this._super();},close:function I(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(d){var X=mstrmojo.insert(N.copy(d,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),a=X.attribute,e=a.did,W=X.docModel,Z=(W.als&&W.als.links)||{},Y=[],b={success:function(){X.set("visible",true);X.render();}};R.forEach(a.fs,function(g){if(g.idf){X.idFormId=g.fid;return false;}});N.keyarray(Z).forEach(function(g){var f=g.split(" ");if(f[0]===e){Y.push(f[1]);}});if(R.indexOf(Y,X.idFormId)===-1){Y.push(X.idFormId);}X.dsMap={};X.dsTree=S.call(X);B.call(X,Y,b);};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Label","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.ui.PulldownCheckList");var G=mstrmojo.array,A=mstrmojo.hash,D=mstrmojo.mstr.EnumDSSXMLObjectTypes.Dimension;mstrmojo.ui.SearchablePulldownCheckList=mstrmojo.declare(mstrmojo.ui.PulldownCheckList,null,{scriptClass:"mstrmojo.ui.SearchablePulldownCheckList",_changeList:null,useRichTooltip:true,showTooltipForLargeText:true,children:[{scriptClass:"mstrmojo.Label",alias:"noResults",cssClass:"nores",text:mstrmojo.desc(15559,"No result matches your search.")}].concat(mstrmojo.ui.PulldownCheckList.prototype.children),onOpen:function B(){var L=this.parent;if(this._super){this._super();}this._changeList=A.copy(L.selectedIndices);},onClose:function I(L){if(this._super){this._super(L);}this._changeList=null;},showTooltip:function J(L,N){var M=L.target||mstrmojo.dom.eventTarget(L.hWin,L.e);M=this.getItemNodeFromTarget(M);if(M){L=A.copy(L);L.srcElement=M;}this._super(L,N);},saveSelection:function C(){this.toggleCacheMode(true);this.parent.set("selectedIndices",A.copy(this._changeList));this.toggleCacheMode(false);},getChanges:function F(){return this._changeList;},onclearSelection:function(){var Q=this.list,O=this._changeList,M=Q.selectedIndices,P=this.parent.items,N=Q.items,L;if(A.isEmpty(M)){M={};A.forEach(O,function(S,R){if(S){L=G.find(N,"v",P[R].v);if(L>=0){M[L]=O[R];}}});Q.selectedIndices=M;}},onvisibleChange:function(){this.list.set("visible",this.visible);},postselectionChange:function E(W){if(this._super){this._super(W);}if(this._restoreSelection){delete this._restoreSelection;return ;}var P=this.parent.items,R=this.list.items,O=(P.length===R.length),S=W.added||[],N=W.removed||[],V=this._changeList,L=this.parent.allIdx,Q=R[L],U,M=function(){G.forEach(S,function(X){U=G.find(P,"v",R[X].v);V[U]=true;});G.forEach(N,function(X){U=G.find(P,"v",R[X].v);delete V[U];});};if(!V){return ;}if(Q&&(Q.t===D)){if(L===S[0]){G.forEach(R,function(X){if(X.t!==D||O){U=G.find(P,"v",X.v);if(U!==-1&&!V[U]){V[U]=true;}}});return ;}if(L===N[0]){G.forEach(R,function(X){U=G.find(P,"v",X.v);if(U!==-1&&V[U]){delete V[U];}});return ;}}if(V[L]){delete V[L];}M();},onitemsChange:function K(){var L=this.list.items;this.noResults.set("visible",L&&L.length===0);},toggleCacheMode:function H(L){this._restoreSelection=L;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.PopupButton","mstrmojo.ui.PulldownCheckList");var G=mstrmojo.css,D=mstrmojo.hash,E={0:true};function B(){var O=this.selectedIndices=D.copy(this.getPopupList().selectedIndices),K=this.items,N=[],M=this.allIdx,L=this.noneIdx;if(K){if(O[M]){N.push(K[M].n);}else{if(O[L]){N.push(K[L].n);}else{mstrmojo.array.forEach(K,function(Q,P){if(O[P]){N.push(Q.n);}});}}}this.set("value",N.join(", "));}mstrmojo.ui.MultiSelectPulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.MultiSelectPulldown",isHostedWithin:false,popupWidget:undefined,init:function J(K){this._super(K);G.addWidgetCssClass(this,"multi");this.hostedCSSClass=this.hostedCSSClass+" multi";},submitSelections:function A(){B.call(this);this.onchange();},_set_selectedIndices:function F(M,K){var L=this.selectedIndices=D.copy(K||this.selectedIndices||E);this.getPopupList().set("selectedIndices",L);B.call(this);return true;},select:function H(K){this.getPopupList().select(K);},getPopupWidget:function C(){return this.popupWidget;},getPopupList:function I(){return this.popupWidget.list;},children:[{scriptClass:"mstrmojo.ui.PulldownCheckList",alias:"popupWidget",useRichTooltip:true,showTooltipForLargeText:true}]});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.fx","mstrmojo.locales","mstrmojo.expr","mstrmojo.Button","mstrmojo.date","mstrmojo.ui.editors.controls.Stepper","mstrmojo.css");var AI=function(){return mstrmojo.locales.datetime;},l=mstrmojo.dom,k=mstrmojo.expr,AF=k.DTP,a=mstrmojo.date,J=mstrmojo.publisher,g=mstrmojo.hash,p=mstrmojo.array,N=p.removeIndices,o=mstrmojo.css;var AH=0,C=3,M=4,t=5,Q=6;var AJ="month",e="day",W="year",Y="hour",AM="minute",AC="second";var G='<table border="0" cellpadding="0" cellspacing="0">',AB="</table>";function O(AN){return'<table border="0" cellpadding="0" cellspacing="0" style="'+AN+'">';}function H(AQ,AN,AO){var AP=a.getFirstDateOfMonth(AQ,AN);return(AP.getDay()-AO+8)%7;}function q(AQ){var AP=a.parseDateAndOrTime(AQ),AR,AN,AO;if(AP){AO={};AR=AP.date;AN=AP.time;if(AR){g.copy(AR,AO);}if(AN){g.copy(AN,AO);}}return AO;}function F(AO,AR,AQ,AP,AN){var AS=a.formatDateInfo({day:AO,month:AR,year:AQ},AI().DATEOUTPUTFORMAT);return a.inDateTimeRange(AS,AP,AN)===0;}function U(AR,AQ,AP){var AO=AR.decreaseButton,AN=AR.increaseButton,AS="mstrmojo-Calendar";AO.className=(AS+"-decrease");AN.className=(AS+"-increase");}function X(AR,AO,AT,AQ){var AP=0,AN=AR.length,AS;for(AP=0;AP<AN;AP++){AS=AR[AP];if(AS&&AS.day===AO&&AS.month===AT&&AS.year===AQ){return AP;}}return -1;}function u(AN,AP,AO){var AQ=new Date();return(AQ.getFullYear()===AO)&&((AQ.getMonth()+1)===AP)&&(AQ.getDate()===AN);}function AA(AU,AV){var AZ=AU.dayView.getElementsByTagName("div"),AX=AU.selectedDates,AP=AX[AV],AY=AU.browseYear,AO=AU.browseMonth,AR=a.getDaysOfMonth(AY,AO),AQ=a.getPreMonth(AY,AO),AT=a.getDaysOfMonth(AQ.y,AQ.m),AN=H(AY,AO,AU.firstDayOfWeek),AS=((AP.month===AO)?AP.day+AN-1:(AP.month>AO?AP.day+AN+AR-1:AN-AT+AP.day-1)),AW=AZ[AS];if(AW){d(AW,AU,false);}N(AX,AV,1);}function B(AN){var AO=AN.selectedDates;while(AO.length){AA(AN,0);}}function AL(AP,AN){var AO=K(AP,AN),AQ=AP.selectedDates;AQ.push({day:AO.d,month:AO.m,year:AO.y});d(AN,AP,true);}function s(AP,AQ){if(!AQ||!AQ.length){return null;}var AS=AP.selectedDates;for(var AO=0,AN=AQ.length;AO<AN;AO++){var AR=AQ[AO],AT=w(AP,AR);AS.push({day:AR.d,month:AR.m,year:AR.y});if(AT){d(AT,AP,true);}}}function w(AV,AX){var AZ=AV.dayView.getElementsByTagName("div"),AQ=AZ.length,AY=AV.browseYear,AO=AV.browseMonth,AR=a.getPreMonth(AY,AO),AS=a.getDaysOfMonth(AR.y,AR.m),Ad=a.getNextMonth(AY,AO),AP=a.getDaysOfMonth(AY,AO),AN=H(AY,AO,AV.firstDayOfWeek);var AT=AN>0?{y:AR.y,m:AR.m,d:AZ[0].innerHTML}:{y:AY,m:AO,d:AZ[0].innerHTML},Ab=(AZ.length-AP-AN)>0?{y:Ad.y,m:Ad.m,d:AZ[AQ-1].innerHTML}:{y:AY,m:AO,d:AZ[AQ-1].innerHTML},Ac=S(AT,AX),AU=S(AX,Ab),AW=null;if(Ac>=0&&AU>=0){var Aa=0;if(Ac<AN){Aa=-1;}if(AU<(AZ.length-AN-AP)){Aa=1;}AW=((Aa===0)?AX.d+AN-1:(Aa===1?AX.d+AN+AP-1:AN-AS+AX.d-1));return AZ[AW];}else{return null;}}function h(AV,AN){var AX=AV.selectedDates,AP=AX.length;if(!AP){return null;}var AO=AX[AP-1],AQ=K(AV,AN),Aa=S({y:AO.year,m:AO.month,d:AO.day},AQ),Ab=[],AS=Aa>0,AY=Math.abs(Aa);for(var AU=0;AU<=AY;AU++){var AT=new Date(AQ.y,AQ.m-1,AQ.d);AT.setDate(AT.getDate()+(AS?-AU:AU));var AZ=AT.getFullYear(),AR=AT.getMonth()+1,AW=AT.getDate();if(AV.isDateDisabled(AW,AR,AZ,AV.min,AV.max)&&!AV.canSelectDisabledDate){continue;}Ab.push({y:AZ,m:AR,d:AW});}return Ab;}function S(AQ,AP){var AN=new Date(AQ.y,AQ.m-1,AQ.d),AO=new Date(AP.y,AP.m-1,AP.d);return(AO-AN)/1000/3600/24;}function K(AP,AN){var AQ=AP.browseYear,AS=AP.browseMonth,AR=parseInt(AN.innerHTML,10),AT=parseInt(AN.getAttribute("m"),10),AO=null;AO=(AT===0)?{y:AQ,m:AS}:(AT===1?a.getNextMonth(AQ,AS):a.getPreMonth(AQ,AS));AO.d=AR;return AO;}function j(AN){var AP=AN.selectedDates,AO=AP.length;return(AO===0)?null:AP[AO-1];}function d(AO,AP,AN){var AQ=AP.selectedColor;o.toggleClass(AO,["selected",AP.selectedCssStyle],AN);AO.parentNode.style.backgroundColor=AN?AQ:"";AO.style.backgroundColor=AN?AQ:"";}function AE(AN){return AN.selectedColor?('style="background-color:'+AN.selectedColor+';"'):"";}function P(AN){return(AN.tagName.toLowerCase()==="td")?AN.firstChild:AN;}function R(AO,AP){var AQ=a.getDateJson(AO),AN=a.formatDateInfo(AQ,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);if(AP===AF.TIMESTAMP){AN+=" "+a.formatTimeInfo(this.timeVal,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return AN;}function x(AS,AP){var AN=this.advancedValues,AO=null;AN.set(AS,AP);switch(AN.baseDate){case C:AO=new Date();break;case M:break;case t:break;case Q:break;default:return ;}var AQ=AN.monthsToAdjust;if(AQ>0){AO.setMonth(AO.getMonth()+(AN.toAddMonths?AQ:-AQ));}var AR=AN.daysToAdjust;if(AR>0){AO.setDate(AO.getDate()+(AN.toAddDays?AR:-AR));}this.set("value",R.call(this,AO,this.dtp));}function V(){var AN=this.advancedValues,AO=["isDyn"];if(AN.baseDate===AH){return null;}AO.push(AN.baseDate);AO.push(AN.toAddDays?AN.daysToAdjust:-AN.daysToAdjust);AO.push(AN.toAddMonths?AN.monthsToAdjust:-AN.monthsToAdjust);AO.push(0);AO.push(0);AO.push(0);AO.push(0);AO.push(this.value);AO.push(this.timeVal.hour);AO.push(this.timeVal.min);AO.push(this.timeVal.sec);return AO.join("::");}function AK(AN){if(AN.value!==undefined&&this.hasRendered){this.updateSelectedDate();}}function I(AP,AO){var AQ=this,AN=function(AR){return AR[0].toUpperCase()+AR.substring(1);};return{scriptClass:"mstrmojo.HBox",cssClass:"dateAdjustBox",alias:AP+"AdjustBox",children:[{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:AO>0?0:1,onitemSelected:function(AS,AR){x.call(AQ,"toAdd"+AN(AP),AR===0);},items:[{did:0,n:mstrmojo.desc(9424,"plus")},{did:1,n:mstrmojo.desc(9425,"minus")}]},{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:null,height:null,provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,min:0,value:Math.abs(AO)},onTraverse:function(){x.call(AQ,AP+"ToAdjust",this.curVal);}})},{scriptClass:"mstrmojo.Label",text:AP==="days"?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months")}]};}function Z(){this.buttonsNode.style.display=(this.wasAdvanced||this.changeValueOnOK||(this.showAdvanced&&this.isAdvanced)?"block":"none");this.advancedNode.style.display=this.showAdvanced?"block":"none";}mstrmojo.Calendar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Calendar",cssPrefix:"",browseMonth:null,browseYear:null,yearRangStart:null,selectedDates:null,selectedColor:"",isMultiSelect:false,hilightToday:false,yearViewSize:5,cssTextDay:"",cssTextMonth:"",cssTextYear:"",cssTextWeekDay:"",cssTextHeader:"",cssTextMonthYearLabel:"",forceNonEmptySelection:false,showCurMonthDatesOnly:false,currentView:e,duration:600,timeDelimiter:":",dtp:AF.DATE,value:"",firstDayOfWeek:1,changeValueOnOK:false,wasAdvanced:false,showAdvanced:false,isAdvanced:false,dynDateValue:null,canSelectDisabledDate:false,monthNames:function(AN){return AI().MONTHNAME_SHORT[AN];},dayNames:function(AN){return AI().dayShortNames[AN];},min:null,max:null,supportedViews:{day:true,month:true,year:true,hour:true,minute:true,second:true},sDirMatrix:{day:{month:"down",year:"down",hour:"up",minute:"up",second:"up"},month:{day:"up",year:"left",hour:"up",minute:"up",second:"up"},year:{day:"up",month:"right",hour:"up",minute:"up",second:"up"},hour:{day:"down",month:"down",year:"down",minute:"left",second:"left"},minute:{day:"down",month:"down",year:"down",hour:"right",second:"left"},second:{day:"down",month:"down",year:"down",hour:"right",minute:"right"}},markupString:'<div id="{@id}" class="{@cssPrefix} mstrmojo-Calendar {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,mouseover,mouseout><div class="mstrmojo-Calendar-header" style="{@cssTextHeader}"><div class="mstrmojo-Calendar-decrease"></div><div class="mstrmojo-Calendar-increase"></div><div class="mstrmojo-Calendar-title"><span class="mstrmojo-Calendar-monthLabel" style="{@cssTextMonthYearLabel}">{@browseMonth}</span><span class="mstrmojo-Calendar-yearLabel" style="{@cssTextMonthYearLabel}">{@browseYear}</span></div></div><div class="mstrmojo-Calendar-body" style="{@cssTextBody}"><div class="mstrmojo-Calendar-dayView"></div></div><div class="mstrmojo-Calendar-timePart"><span class="mstrmojo-Calendar-hourLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-minuteLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-secondLabel">00</span><span class="mstrmojo-Calendar-AMPMLabel">AM</span></div><div class="mstrmojo-Calendar-advanced"></div><div class="mstrmojo-Calendar-buttons cf"></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onbrowseMonthChange:function(){this.monthLabel.innerHTML=this.monthNames(this.browseMonth-1);},onbrowseYearChange:function(){this.yearLabel.innerHTML=this.browseYear;},ondtpChange:function(){this.timePart.style.display=(this.dtp===AF.TIMESTAMP||this.dtp===AF.TIME)?"block":"none";this.advancedNode.style.display=this.showAdvanced?"block":"none";},onvalueChange:function(){if(this.lastValue===undefined||this.value!==this.lastValue){this.updateSelectedDate();}},onchangeValueOnOKChange:Z,onisAdvancedChange:Z},markupSlots:{monthLabel:function(){return this.domNode.firstChild.lastChild.firstChild;},yearLabel:function(){return this.domNode.firstChild.lastChild.lastChild;},decreaseButton:function(){return this.domNode.firstChild.firstChild;},increaseButton:function(){return this.domNode.firstChild.childNodes[1];},bodyContainer:function(){return this.domNode.childNodes[1];},dayView:function(){return this.domNode.childNodes[1].firstChild;},monthView:function(){return this.domNode.childNodes[1].firstChild;},yearView:function(){return this.domNode.childNodes[1].firstChild;},hourView:function(){return this.domNode.childNodes[1].firstChild;},minuteView:function(){return this.domNode.childNodes[1].firstChild;},secondView:function(){return this.domNode.childNodes[1].firstChild;},timePart:function(){return this.domNode.childNodes[2];},hourLabel:function(){return this.domNode.childNodes[2].firstChild;},minuteLabel:function(){return this.domNode.childNodes[2].childNodes[2];},secondLabel:function(){return this.domNode.childNodes[2].childNodes[4];},AMPMLabel:function(){return this.domNode.childNodes[2].childNodes[5];},advancedNode:function(){return this.domNode.childNodes[3];},buttonsNode:function(){return this.domNode.childNodes[4];}},init:function AG(AN){if(this._super){this._super(AN);}if(this.duration<1){this.duration=1;}if(!this.selectedDates){this.selectedDates=[];}this.timeVal={hour:0,min:0,sec:0};},ondynDateValueChange:function z(AN){if(AN.value!==undefined&&this.hasRendered){this.updateSelectedDate();this.buildChildren();}},onminChange:AK,onmaxChange:AK,buildChildren:function b(){var AT=this;if(this.showAdvanced){var AQ=this.dynDateValue,AP=this.advancedValues||this.addDisposable(new mstrmojo.Model({})),AW=AQ&&AQ.split("::")||[],AS=AW[1]||AH,AO=AW[2]||0,AX=AW[3]||0,AU=function AU(){if(AT.isAdvanced){AT.wasAdvanced=true;AT.changeValueOnOK=true;}AT.set("isAdvanced",!AT.isAdvanced);mstrmojo.css.toggleClass(AT.markupSlots.dayView.call(AT),["ddSelected"],AT.isAdvanced);x.call(AT,"baseDate",AT.isAdvanced?3:0);if(AT.parent&&AT.parent.nudge&&AT.isAdvanced){AT.parent.nudge();}};this.advancedValues=AP;AP.baseDate=parseInt(AS);AP.toAddDays=AO>=0;AP.daysToAdjust=Math.abs(AO);AP.toAddMonths=AX>=0;AP.monthsToAdjust=Math.abs(AX);this.isAdvanced=!!this.dynDateValue;if(this.domNode){mstrmojo.css.toggleClass(this.markupSlots.dayView.call(this),["ddSelected"],this.isAdvanced);}if(this.isAdvanced&&this.value){var AN=q(this.value),AR=this.timeVal;if(AN&&AN.hour!==undefined){AR.hour=AN.hour;AR.min=AN.min;AR.sec=AN.sec;}}x.call(AT,"baseDate",this.isAdvanced?3:0);this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.HBox",alias:"checkLabel",slot:"advancedNode",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",checked:!!AT.isAdvanced,oncheckedChange:AU},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13844,"Dynamic Date"),onclick:function AV(){this.parent.checkbox.onclick();}}]},{scriptClass:"mstrmojo.Box",alias:"advancedPanel",slot:"advancedNode",bindings:{visible:"this.parent.isAdvanced"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today"),cssClass:"tdLabel"},I.call(this,"days",AO),I.call(this,"months",AX)]},]);}else{this.destroyChildren(false);}this.addChildren([mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){AT.parent.close();},false,{slot:"buttonsNode"}),mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(){if(AT.changeValueOnOK||AT.isAdvanced||AT.wasAdvanced){AT.updateValue(true);}},true,{slot:"buttonsNode"})]);},preBuildRendering:function A(){this.buildChildren();return this._super();},getSelectedDatesAsString:function E(AO){var AN=[];p.forEach(this.selectedDates,function(AP){AN.push(a.formatDateInfo(AP,AO||AI().DATEOUTPUTFORMAT));});return AN;},updateSelectedDate:function L(AS){var AN=this.value,AP=this.timeVal,AR=this.selectedDates,AQ,AT=function(AV,AU){AV.set("browseYear",AU.year);AV.set("browseMonth",AU.month);AV.updateTimePart();AV.updateView(AV.currentView);if(!AV.changeValueOnOK&&AV.hasRendered&&AV.closeOnValueChange!=true){AV.updateValue();}};if(this.wasAdvanced){this.wasAdvanced=false;this.changeValueOnOK=false;}if(AN){AQ=q(AN);if(AQ&&AQ.hour!==undefined){AP.hour=AQ.hour;AP.min=AQ.min;AP.sec=AQ.sec;if(this.dtp===AF.TIME&&(AQ.year===undefined||AQ.month===undefined||AQ.day===undefined)){var AO=a.getDateJson(new Date());AQ.year=AO.year;AQ.month=AO.month;AQ.day=AO.day;}}}if((AQ&&!this.isMultiSelect)||AS){B(this);}if(AR.length===0){if(!AQ){if(this.parent.opener&&this.parent.opener.defaultDate){AQ=q(this.parent.opener.defaultDate);}else{AQ=a.getDateJson(new Date());}}if(!this.canSelectDisabledDate&&this.isDateDisabled(AQ.day,AQ.month,AQ.year,this.min,this.max)){if(this.min&&a.compareDate(AQ,this.min)<0){AQ=q(this.min);}else{if(this.max&&a.compareDate(AQ,this.max)>0){AQ=q(this.max);}}}AR.push(AQ);AT(this,AQ);}else{AQ=AR[0];if(this.value!==null){AT(this,AQ);}}},updateValue:function f(AN){var AP=j(this),AO="";if(AP){AO=a.formatDateInfo(AP,AI().DATEOUTPUTFORMAT);if(this.dtp!==AF.DATE){var AQ=a.formatTimeInfo(this.timeVal,AI().TIMEOUTPUTFORMAT);if(this.dtp===AF.TIME){AO=AQ;}else{AO+=" "+AQ;}}}this.lastValue=AO;this.set("value",AO);if(this.showAdvanced){this.set("dynDateValue",AN?V.call(this):null);}if(this.onValueUpdate){this.onValueUpdate();}},updateTimePart:function AD(){var AO=this.timeVal,AN=AO.hour||0,AP=(AN%12===0)?12:(AN%12);this.hourLabel.innerHTML=AP;this.minuteLabel.innerHTML=a.formatInteger(AO.min||0,2);this.secondLabel.innerHTML=a.formatInteger(AO.sec||0,2);this.AMPMLabel.innerHTML=AN<12?" "+AI().AM_NAME:" "+AI().PM_NAME;},premousedown:function(AN){var AP=AN.e,AO=l.eventTarget(AN.hWin,AP);if(AO===this.decreaseButton||AO===this.increaseButton){if(l.isFF){l.stopPropogation(window,AP);}return true;}else{return this.processEvent(AO,AP);}},premouseup:function(AN){var AP=AN.e;if(AP.ctrlKey||AP.shiftKey){l.clearBrowserHighlights();}var AO=l.eventTarget(AN.hWin,AP);if(AO===this.decreaseButton&&!AO.disabled){this.decrease();return true;}if(AO===this.increaseButton&&!AO.disabled){this.increase();return true;}},processEvent:function(AY,Af){var AQ=this.currentView,AR=this.selectedDates,AV,Aa,Ag,AN,AX;if(AY===this.monthLabel){if(AQ!==AJ){this.switchViewTo(AJ);}return true;}if(AY===this.yearLabel){if(AQ!==W){this.adjustYearStart();this.switchViewTo(W);return true;}}if(AY===this.hourLabel){if(AQ!==Y){this.switchViewTo(Y);}return true;}if(AY===this.minuteLabel){if(AQ!==AM){this.switchViewTo(AM);}return true;}if(AY===this.secondLabel){if(AQ!==AC){this.switchViewTo(AC);}return true;}if(AY===this.AMPMLabel){if(AQ!==Y){this.switchViewTo(Y);}return true;}if(AQ===Y){var AT=AY.getAttribute("h");AX=parseInt(AY.innerHTML,10);if(!isNaN(AT)&&!isNaN(AX)){AT=parseInt(AT,10);this.timeVal.hour=AX%12+AT*12;this.updateTimePart();this.switchViewTo(e);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AQ===AM){AX=parseInt(AY.innerHTML,10);if(!isNaN(AX)){this.timeVal.min=AX;this.updateTimePart();this.switchViewTo(e);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AQ===AC){AX=parseInt(AY.innerHTML,10);if(!isNaN(AX)){this.timeVal.sec=AX;this.updateTimePart();this.switchViewTo(e);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AQ===e){var Ae=this.browseYear,AO=this.browseMonth,AP;AY=P(AY);Ag=parseInt(AY.innerHTML,10);AN=parseInt(AY.getAttribute("m"),10);if(!isNaN(Ag)&&!isNaN(AN)){AP=(AN===0)?{y:Ae,m:AO}:(AN===1?a.getNextMonth(Ae,AO):a.getPreMonth(Ae,AO));if((!this.canSelectDisabledDate&&this.isDateDisabled(Ag,AP.m,AP.y,this.min,this.max))||Af.button===2){return true;}if(this.isAdvanced){return true;}var Ab=X(AR,Ag,AO,Ae),AZ=AR.length>1,AW=this.forceNonEmptySelection,Ac=this.isMultiSelect,AU=Ac&&Af.ctrlKey,Ad=Ac&&Af.shiftKey,AS=null;if(Ad){AS=h(this,AY);B(this);s(this,AS);}else{if(AU){if(Ab===-1){AL(this,AY);}else{if(!AW||AZ){AA(this,Ab);}}}else{B(this);if(AZ||Ab===-1||AW){AL(this,AY);}}}if(this.onselect||J.hasSubs(this.id,"select")){this.raiseEvent({name:"select",value:this.selectedDates});}if(AN===1){this.increase();}else{if(AN===-1){this.decrease();}}if(!this.changeValueOnOK){this.updateValue();}else{if(this.showAdvanced){this.checkLabel.checkbox.set("checked",false);x.call(this,"baseDate",0);}}}return true;}if(AQ===AJ){AY=P(AY);Aa=parseInt(AY.getAttribute("m"),10);if(!isNaN(Aa)){this.set("browseMonth",Aa+1);this.switchViewTo(e);}return true;}if(AQ===W){AY=P(AY);AV=parseInt(AY.innerHTML,10);if(!isNaN(AV)){this.set("browseYear",AV);this.switchViewTo(e);}return true;}return true;},decrease:function(){var AP=this.currentView,AS=AP,AR=this.browseYear,AN=this.browseMonth,AO=this.yearRangStart,AQ;switch(AP){case e:AQ=a.getPreMonth(AR,AN);this.set("browseMonth",AQ.m);this.set("browseYear",AQ.y);break;case AJ:this.set("browseYear",AR-1);break;case W:this.yearRangStart=AO-this.yearViewSize*this.yearViewSize;break;case Y:AS=AC;break;case AM:AS=Y;break;case AC:AS=AM;break;}this.switchViewTo(AS,"right");},increase:function(){var AP=this.currentView,AS=AP,AR=this.browseYear,AN=this.browseMonth,AO=this.yearRangStart,AQ;switch(AP){case e:AQ=a.getNextMonth(AR,AN);this.set("browseMonth",AQ.m);this.set("browseYear",AQ.y);break;case AJ:this.set("browseYear",AR+1);break;case W:this.yearRangStart=AO+this.yearViewSize*this.yearViewSize;break;case Y:AS=AM;break;case AM:AS=AC;break;case AC:AS=Y;break;}this.switchViewTo(AS,"left");},updateView:function(AN){var AO=this[AN+"ViewHTML"]();this[AN+"View"].innerHTML=AO;},adjustYearStart:function(){this.yearRangStart=this.browseYear-10-this.browseYear%5;},switchViewTo:function(AO,AQ){var AU="mstrmojo-Calendar-"+AO+"View",AT=document.createElement("div"),AN=this[this.currentView+"View"],AR=AO+"ViewHTML",AS=this[this.currentView+"Label"],AP=this[AO+"Label"];if(!this.supportedViews[AO]){return ;}if(!AQ){AQ=this.sDirMatrix[this.currentView][AO];}AT.className=AU;AT.innerHTML=this[AR]();this.currentView=AO;this[AO+"View"]=AT;mstrmojo.css.toggleClass(AT,["ddSelected"],this.isAdvanced);this._slideIntoView(AN,AT,AQ);},_slideIntoView:function(AR,AV,AP){var AN=this.bodyContainer,AT=(AP==="left"||AP==="right")?AR.offsetWidth:AR.offsetHeight,AO=(AP==="left"||AP==="right")?"left":"top",AU=(AP==="left"||AP==="up")?AT:-AT,AS=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AR,onEnd:function(){AN.removeChild(AR);}}),AQ=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AV});AV.style[AO]=AU+"px";AN.appendChild(AV);AS.props[AO]={start:0,stop:-AU,suffix:"px"};AQ.props[AO]={start:AU,stop:0,suffix:"px"};AS.play();AQ.play();},dayViewHTML:function(){var AS=this.browseYear,AV=this.browseMonth,Aa=a.getDaysOfMonth(AS,AV),Ae=a.getPreMonth(AS,AV),AP=a.getDaysOfMonth(Ae.y,Ae.m),AO=a.getNextMonth(AS,AV),AW=H(AS,AV,this.firstDayOfWeek),AT=[],AQ=AE(this),Ag=0,AN=this.selectedDates,AY=this.min,Ac=this.max,Ah,AZ,Ad,Ab,Af=this.showCurMonthDatesOnly?'style="visibility:hidden;"':"";U(this,{d:AP,m:Ae.m,y:Ae.y},{d:1,m:AO.m,y:AO.y});AT.push(O(this.cssTextDay));AT.push(this._dayViewTHead());AT.push("<tr>");for(Ad=0;Ad<AW;Ad++){Ah=AP-AW+Ad+1;AZ=this.isDateDisabled(Ah,Ae.m,Ae.y,AY,Ac)?"disabled":"";AT.push("<td "+Af+'><div class="mstrmojo-Calendar-day-pre '+AZ+'" m="-1">');AT.push(Ah);AT.push("</div></td>");Ag++;}for(Ad=0;Ad<Aa;Ad++){Ah=Ad+1;AZ=this.isDateDisabled(Ah,AV,AS,AY,Ac)?" disabled":"";var AR=u(Ah,AV,AS),AU=AR?" today":"",AX=X(AN,Ah,AV,AS)!==-1;AU=(this.hilightToday&&AR)?" hilightToday":AU;AT.push("<td "+(AR?('class="'+AU+'" '):" ")+(AX?AQ:"")+'><div class="mstrmojo-Calendar-day-cur'+(AX?(" selected "):"")+AZ+'" m="0"'+(AX?AQ:"")+">");AT.push(Ad+1);AT.push("</div></td>");if((++Ag)%7===0){AT.push("</tr><tr>");}}for(Ab=Ag;Ab<42;Ab++){Ah=Ag-Aa-AW+1;AZ=this.isDateDisabled(Ah,AO.m,AO.y,AY,Ac)?"disabled":"";AT.push("<td "+Af+'><div class="mstrmojo-Calendar-day-next '+AZ+'" m="1">');AT.push(Ah);AT.push("</div></td>");if((++Ag)%7===0&&Ag!==42){AT.push("</tr><tr>");}}AT.push("</tr>");AT.push(AB);return AT.join("");},_dayViewTHead:function(){var AQ=[],AR='<thead><tr class="mstrmojo-Calendar-thead" style="'+this.cssTextWeekDay+';">',AP="</tr></thead>",AO=this.firstDayOfWeek-1,AS=this.dayNames,AN;AQ.push(AR);for(AN=AO;AN<AO+7;AN++){AQ.push("<td>");AQ.push(AS(AN%7));AQ.push("</td>");}AQ.push(AP);return AQ.join("");},monthViewHTML:function(){var AO=[],AQ=this.browseMonth-1,AP=this.browseYear,AN;U(this,{d:31,m:12,y:AP-1},{d:1,m:1,y:AP+1});AO.push(O(this.cssTextMonth));AO.push("<tr>");for(AN=0;AN<12;AN++){AO.push("<td "+((AN===AQ)?AE(this):"")+'><div class="mstrmojo-Calendar-month'+((AN===AQ)?" selected":"")+'" m="');AO.push(String(AN));AO.push('">');AO.push(this.monthNames(AN));AO.push("</div></td>");if(AN%3===2){AO.push("</tr><tr>");}}AO.pop();AO.push("</tr>");AO.push(AB);return AO.join("");},yearViewHTML:function(){var AS=this.yearRangStart,AO=[],AQ=this.browseYear,AR,AN,AP=this.yearViewSize;U(this,{d:31,m:12,y:AS-1},{d:1,m:1,y:AS+AP*AP});AO.push(O(this.cssTextYear));AO.push("<tr>");for(AN=0;AN<AP*AP;AN++){AR=AS+AN;AO.push("<td "+((AQ===AR)?AE(this):"")+'><div class="mstrmojo-Calendar-year'+((AQ===AR)?" selected":"")+'">');AO.push(AR);AO.push("</div></td>");if(AN%AP===(AP-1)){AO.push("</tr><tr>");}}AO.pop();AO.push("</tr>");AO.push(AB);return AO.join("");},hourViewHTML:function(){var AP=[],AO=this.timeVal.hour,AN;AP.push(G);AP.push('<tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AP.push(AI().AM_NAME);AP.push("</div></td></tr>");for(AN=0;AN<12;AN++){AP.push('<td><div class="mstrmojo-Calendar-hour'+((AN===AO)?" selected":"")+'" h="0">');AP.push((AN===0)?12:AN);AP.push("</div></td>");if(AN===5){AP.push("</tr><tr>");}}AP.push('</tr><tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AP.push(AI().PM_NAME);AP.push("</div></td></tr>");for(AN=0;AN<12;AN++){AP.push('<td><div class="mstrmojo-Calendar-hour'+(((12+AN)===AO)?" selected":"")+'" h="1">');AP.push((AN===0)?12:AN);AP.push("</div></td>");if(AN===5){AP.push("</tr><tr>");}}AP.push("</tr>");AP.push(AB);return AP.join("");},minuteViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.min,"mstrmojo-Calendar-minute");},secondViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.sec,"mstrmojo-Calendar-second");},_minuteSecondViewHTML:function(AP,AQ){var AO=[],AN;AO.push(G);AO.push("<tr>");for(AN=0;AN<60;AN++){AO.push('<td><div class="');AO.push(AQ);AO.push((AN===AP)?' selected">':'">');AO.push(AN);AO.push("</div></td>");if(AN%10===9){AO.push("</tr><tr>");}}AO.pop();AO.push("</tr>");AO.push(AB);return AO.join("");},isDateDisabled:function(AN,AP,AO){return !F(AN,AP,AO,this.min,this.max);},unrender:function D(AN){delete this.lastValue;this._super(AN);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.dom","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.vi.util.NumberFormatUtility");var M=mstrmojo.hash,d=mstrmojo.array,G=mstrmojo.num,J=mstrmojo._FormatDefinition,B=mstrmojo.css,a=mstrmojo.mstr.EnumFunction,L=mstrmojo.locales,H=mstrmojo.Button.newIconButton,O=mstrmojo.date,I=mstrmojo.vi.util.NumberFormatUtility,x="1234.12",E=J.NumberFormatCategory,u=J.FixedNegative,F=J.CurrencyNegative,g=J.PercentNegative,K=J.DefaultFormat.FormattingNumber,s="nf-MiddleRow ",X="nf-MiddleRow nf-HasWidget ",Z,U,f=function f(AA,z){return{cls:this.value===AA.v?"selected":"",v:AA.v||"",n:AA.n||"",style:AA.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===z?"selected":""};},t={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};var S=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(J.Category.slice(2)),e=[{n:"$"},{n:"£"},{n:"€"},{n:"¥"},{n:"fr."}];function D(AB,AA){var z=d.find(AB,"v",AA);return z===-1?"":AB[z].f;}function N(z){var AB=this.parent.parent.parent.myData,AA=z.v;AB.set("format",D(this.items,AA));AB.set("negativeNumbers",AA);B.toggleClass(this.selectedNode,"red",z.r);}function Y(AB,AC,z){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:AB,onitemSelected:function AA(AD){var AE=this.parent;while(AE&&(!AE.data||typeof AE.data[AC]==="undefined")){AE=AE.parent;}if(AE){AE.data.set(AC,AD.v);if(z){AE.children[0].preview.preview_label.set("text",AD.n);}}}};}function k(AJ,AE,AD,AM,AI){var AL=M.clone(AJ),AA=AE>0?L.number.DECIMALSEPARATOR:"",AB=AE>0?".":"",AC=J.DefaultFormat.FormattingNumber,AK=new RegExp("\\"+L.number.THOUSANDSEPARATOR,"g"),z=new RegExp("\\"+L.number.DECIMALSEPARATOR+"\\d{2}","g"),AG;for(AG=0;AG<AE;AG++){AA+=AG%9;AB+="0";}for(AG=0;AG<AL.length;AG++){var AH=AL[AG];AH.n=AH.n.replace(/,/g,"@");AH.n=AH.n.replace(/\./g,L.number.DECIMALSEPARATOR);AH.n=AH.n.replace(/@/g,L.number.THOUSANDSEPARATOR);if(AD){AH.n=AH.n.replace(AK,"");AH.f=AH.f.replace(/,/g,"");}if(AM&&AM!==AC.CurrencyPosition){switch(AM){case t.RIGHT:AH.n=AH.n.replace(/\$/g,"").replace(z,L.number.DECIMALSEPARATOR+"12$");AH.f=AH.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case t.LEFT_WITH_SPACE:AH.n=AH.n.replace(/\$/g,"$ ");AH.f=AH.f.replace(/\$/g,"$ ");break;case t.RIGHT_WITH_SPACE:AH.n=AH.n.replace(/\$/g,"").replace(z,L.number.DECIMALSEPARATOR+"12 $");AH.f=AH.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}AH.n=AH.n.replace(z,AA);AH.f=AH.f.replace(/\.\d{2}/g,AB);if(AI&&AI!==AC.CurrencySymbol){var AF=AI.replace(/\$/g,"$$$$");AH.n=AH.n.replace(/\$/g,AF);AH.f=AH.f.replace(/\$/g,AF);}AH.cls=AH.r?"red":null;}return AL;}function V(AB){var z="1"+(AB>0?".":"").toString(),AC="0"+(AB>0?".":"").toString(),AA;for(AA=0;AA<AB;AA++){z+=AA%10;AC+="0";}return[z+"E+03",AC+"E+0#"];}function R(AM,AO){var AG="\u00A4",AK=/"[^"]*"/g,AB=AM.match(AK),AP="\u0091",AL=/\[[^\]]*\]/g,z=AM.match(AL),AJ,AN;AJ=AM.replace(AK,AG);AJ=AJ.replace(AL,AP);var AD=AM.indexOf("."),AI=G.getDecimalLength(AM),AF=Math.max(0,AI+AO),AC=AM.match(/\d(?!((\d)|(,\d)))/g),AA=AD!==-1?AM.charAt(AD-1):AC&&AC[0],AH=(AA||"0")+(AF>0?".":"").toString();for(var AE=0;AE<AF;AE++){AH+="0";}AJ=AJ.replace(AI===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,AH);AJ=AJ.split(AG);AN=AJ[0];d.forEach(AB,function(AR,AQ){AN+=AR+AJ[AQ+1];});AJ=AN.split(AP);AN=AJ[0];d.forEach(z,function(AR,AQ){AN+=AR+AJ[AQ+1];});return AN;}function P(AG,z,AF,AE,AB,AA){var AD=AG.parent.parent.parent,AC=k(z,AF.decimalPlaces,AE,AB,AA);AF.set("format",D(AC,AF.negativeNumbers.toString()));AG.set("items",AC);AG.set("selectedIndex",d.find(AC,"v",AF.negativeNumbers.toString()));AD.preview.preview_label.set("text",I.applyFormatToNumber(AD.myData.format,x.replace(/\./g,L.number.DECIMALSEPARATOR)));}function p(){var AH=this.parent.parent,AL=AH.myData,AC=AH.formatterContainer,AA=S[AH.categoryPicker.selectedIndex].v,AO=this.funcType===a.FunctionLeftStr?1:-1,AE=null,AG=null,AD=false,AN=0,AI=null,AB=false,AK;switch(AA){case E.Fixed:AE=AC.fixed_hBox.negativeDDL;AG=u;AD=!AL.thousandSeparator;break;case E.Currency:AE=AC.currency_hBox2.negativeDDL;AG=F;AN=AL.currencyPosition;AI=AL.currencySymbol;break;case E.Percentage:AE=AC.percentage_hBox.negativeDDL;AG=g;break;case E.Scientific:AB=true;break;case E.Custom:AK=true;break;default:return ;}if(AK){var AM=R(AL.format,AO);AH.preview.preview_label.set("text",I.applyFormatToNumber(AM,x.replace(".",L.number.DECIMALSEPARATOR)));AH.formatterContainer.custom_text.set("value",AM);return ;}var AF=AL.decimalPlaces,z=AF+AO;z=Math.max(0,z);z=Math.min(J.MaxNegativeDidigts,z);AL.set("decimalPlaces",z);if(AB){var AJ=V(z);AL.set("format",AJ[1]);AH.preview.preview_label.set("text",AJ[0]);}else{P(AE,AG,AL,AD,AN,AI);}}function w(z,AA){return Math.max(d.find(z,"v",AA),0);}function C(AB){var AA=this.parent.parent.categoryPicker,z=S.map(function(AC){return AC.v;}).indexOf(AB);AA.set("selectedIndex",z);}function q(z,AA,AC,AB){return H(undefined,z,AA,undefined,M.copy(AB,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:AC,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function b(){if(mstrApp.isSingleTier&&!mstrmojo.dom.isMac()){var AE=this.formatterContainer,AD=L.datetime,z={day:7,month:4,year:1998},AB={hour:9,min:41,sec:46},AC=AD&&AD.DATEINPUTFORMATS,AA=AD&&AD.TIMEINPUTFORMATS;Z=[];U=[];AC.forEach(function(AF){Z.push({v:AF,n:O.formatDateInfo(z,AF)});});AA.forEach(function(AF){U.push({v:AF,n:O.formatTimeInfo(AB,AF)});});AE.date_ddl.set("items",Z);AE.time_ddl.set("items",U);}else{Z=J.Date;U=J.Time;}}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}b.call(this);var z=this.formatterContainer;if(this.formatValue){z.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;z.fixed_btn.checked=!!this.formatValue.thousandSeparator;B.addWidgetCssClass(z.fraction_ddl,g[d.find(g,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function Q(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",w(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[M.copy({alias:"categoryPicker",cssClass:"nf-category",onitemSelected:function o(AM){if(!this.hasRendered){return ;}var AH=this,AK=AH.parent,AC=AK.formatterContainer,z=AK.shortcutRow,AL=AK.preview.preview_label,AJ=AM.v,AE=AJ===E.Automatic,AB=AJ===E.Scientific,AA=[],AG=AK.myData;d.forEach(AC.children,function(AN){AN.set("visible",false);});AK.border.set("visible",!AE);AK.preview.set("visible",!AE);AK.borderBottom.set("visible",!(!mstrApp.isWSStyling||AE||AB));["border","moveLeftBtn","moveRightBtn"].forEach(function(AN){z[AN].set("visible",!AE);});AG.set("category",AJ);AG.set("thousandSeparator",AJ?K.ThousandSeparator:AK.formatValue.thousandSeparator);switch(AJ){case E.Currency:P(AC.currency_hBox2.negativeDDL,F,AG,false,AG.currencyPosition,AG.currencySymbol);AC.currency_hBox1.currency_position.set("selectedIndex",w(J.CurrencyPosition,AG.currencyPosition.toString()));AA=["currency_hBox1","currency_hBox2"];break;case E.Date:AC.date_ddl.set("selectedIndex",w(Z,AG.format));AA=["date_ddl"];break;case E.Time:AC.time_ddl.set("selectedIndex",w(U,AG.format));AA=["time_ddl"];break;case E.Percentage:P(AC.percentage_hBox.negativeDDL,g,AG,false,0,null);AA=["percentage_hBox"];break;case E.Fraction:AC.fraction_ddl.set("selectedIndex",w(J.Fraction,AG.format));AA=["fraction_ddl"];break;case E.Scientific:var AF=V(AG.decimalPlaces||0);AG.set("format",AF[1]);AL.set("text",AF[0]);break;case E.Custom:var AD=AG.customText||AG.format,AI=AC.custom_text;AG.set("format",AD);AI.value=AD;AI.refresh();AL.set("text",I.applyFormatToNumber(AD,x.replace(".",L.number.DECIMALSEPARATOR)));AA=["custom_condense","custom_text"];break;case E.Fixed:P(AC.fixed_hBox.negativeDDL,u,AG,!AG.thousandSeparator,0,null);AA=["fixed_hBox","fixed_btn"];break;}d.forEach(AA,function(AN){AC[AN].set("visible",true);});AK.adjustAfterCategoryChange();}},Y(S,"category")),{scriptClass:"mstrmojo.Box",cssClass:s+"nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,moveRightBtn:null,children:[q("nf-shortcut-currency",function j(){C.call(this,E.Currency);},mstrmojo.desc(2051,"Currency"),undefined),q("nf-shortcut-percentage",function j(){C.call(this,E.Percentage);},mstrmojo.desc(2053,"Percentage"),undefined),q("nf-shortcut-fixed",function j(){C.call(this,E.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),undefined),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},q("nf-MoveDecimalPoint left",function j(){p.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{funcType:a.FunctionLeftStr,alias:"moveLeftBtn"}),q("nf-MoveDecimalPoint right",function j(){p.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{funcType:a.FunctionRightStr,alias:"moveRightBtn"})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function W(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:X,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:f,onitemSelected:function o(z){N.call(this,z);}},Y([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:s,label:"",onclick:function j(){var z=this.parent.parent;z.myData.set("thousandSeparator",this.checked?-1:0);P(this.parent.fixed_hBox.negativeDDL,u,z.myData,!this.checked,0,null);},preBuildRendering:function A(){this.set("label",mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",L.number.THOUSANDSEPARATOR));}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:X,visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",items:e,postselectedValueChange:function l(z){var AD=this,AC=AD.parent.parent.parent,AB=z.value,AA=AC.myData;AA.set("currencySymbol",AB);P(this.parent.parent.currency_hBox2.negativeDDL,F,AA,false,parseInt(AA.currencyPosition,10),AB);}},M.copy({cssClass:"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function o(z){var AC=this,AB=AC.parent.parent.parent,AA=z.v;AB.myData.set("currencyPosition",parseInt(AA,10));P(this.parent.parent.currency_hBox2.negativeDDL,F,AB.myData,false,parseInt(AA,10),AB.myData.currencySymbol);}},Y(J.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:X,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:f,onitemSelected:function o(z){N.call(this,z);}},Y([],"format"))]},M.copy({alias:"date_ddl",cssClass:X},Y(J.Date,"format",true)),M.copy({alias:"time_ddl",cssClass:X},Y(J.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:X,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:f,onitemSelected:function o(z){N.call(this,z);}},Y([],"format"))]},M.copy({alias:"fraction_ddl",cssClass:X},Y(J.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0;[<=-1000000]#,##0,,"M";[<=-1000]#,##0,"K"');},false,{cssClass:"nf-condense",alias:"custom_condense"}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",cssClass:"nf-custom",onvalueChange:function h(){var AB=this,AA=AB.parent.parent,z=AB.value;AA.myData.set("format",z);AA.myData.set("customText",z);AB.parent.parent.preview.preview_label.set("text",I.applyFormatToNumber(z,x.replace(".",L.number.DECIMALSEPARATOR)).replace(/\s/g,"&nbsp;"));}}]},{scriptClass:"mstrmojo.Label",alias:"borderBottom",cssClass:"nf-border"},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:s+"nf-PreviewRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right preview-info-label",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.NativeMobileXtab","mstrmojo.array","mstrmojo.hash");function B(){var K=this.xtabStyleSheet,J=K&&K.parentNode;if(J){J.removeChild(K);delete this.xtabStyleSheet;}}mstrmojo.NativeAndroidXtab=mstrmojo.declare(mstrmojo.NativeMobileXtab,null,{scriptClass:"mstrmojo.NativeAndroidXtab",scrollerFriction:0.0015,preBuildRendering:function G(){B.call(this);this.updateXtabStyles(this.model.data.cssString);this._super();},onwidthChange:function D(){if(this.gridData.afw){var K=this.scrollboxNode,J=this.width;if(K){K.style.width=J;}else{this.scrollboxNodeCssText="width: "+J;}}if(this._super){this._super();}},updateXtabStyles:function E(J){if(!this.xtabStyleSheet){this.xtabStyleSheet=document.getElementsByTagName("head")[0].appendChild(document.createElement("style"));}this.xtabStyleSheet.appendChild(document.createTextNode(J));},unrender:function F(J){this._super(J);B.call(this);},getMaskNode:function C(){var J=document.createElement("div");J.appendChild(this.xtabStyleSheet.cloneNode(true));J.appendChild(this.domNode.cloneNode(true));return J;},updateActionMenu:function A(J,K){this._selectionActions=K;return true;},setModel:function I(J){this._super(J);this.controller.getPageByTree(false);},deselectCell:function H(){this._super();delete this._selectionActions;}});}());(function(){mstrmojo.requiresCls("mstrmojo.MobileXtab","mstrmojo.array","mstrmojo.hash");function B(){var K=this.xtabStyleSheet,J=K&&K.parentNode;if(J){J.removeChild(K);delete this.xtabStyleSheet;}}mstrmojo.AndroidXtab=mstrmojo.declare(mstrmojo.MobileXtab,null,{scriptClass:"mstrmojo.AndroidXtab",scrollerFriction:0.0015,preBuildRendering:function G(){B.call(this);this.updateXtabStyles(this.model.data.cssString);this._super();},onwidthChange:function D(){if(this.gridData.afw){var K=this.scrollboxNode,J=this.width;if(K){K.style.width=J;}else{this.scrollboxNodeCssText="width: "+J;}}if(this._super){this._super();}},updateXtabStyles:function E(J){if(!this.xtabStyleSheet){this.xtabStyleSheet=document.getElementsByTagName("head")[0].appendChild(document.createElement("style"));}this.xtabStyleSheet.appendChild(document.createTextNode(J));},unrender:function F(J){this._super(J);B.call(this);},getMaskNode:function C(){var J=document.createElement("div");J.appendChild(this.xtabStyleSheet.cloneNode(true));J.appendChild(this.domNode.cloneNode(true));return J;},updateActionMenu:function A(J,K){this._selectionActions=K;return true;},setModel:function I(J){this._super(J);this.controller.getPageByTree(false);},deselectCell:function H(){this._super();delete this._selectionActions;}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidXtab");mstrmojo.AndroidXtabStandalone=mstrmojo.declare(mstrmojo.AndroidXtab,null,{scriptClass:"mstrmojo.AndroidXtabStandalone"});}());(function(){mstrmojo.requiresCls("mstrmojo.NativeAndroidXtab","mstrmojo._IsInteractiveGrid");mstrmojo.AndroidInteractiveGridXtab=mstrmojo.declare(mstrmojo.NativeAndroidXtab,[mstrmojo._IsInteractiveGrid],{scriptClass:"mstrmojo.AndroidInteractiveGridXtab"});}());(function(){mstrmojo.requiresCls("mstrmojo.NativeAndroidXtab","mstrmojo._IsInteractiveGrid","mstrmojo._Formattable","mstrmojo.nativeandroid._IsAndroidDocXtab");mstrmojo.DocInteractiveGridXtab=mstrmojo.declare(mstrmojo.NativeAndroidXtab,[mstrmojo._IsInteractiveGrid,mstrmojo._Formattable,mstrmojo.nativeandroid._IsAndroidDocXtab],{scriptClass:"mstrmojo.DocInteractiveGridXtab",formatHandlers:{domNode:["RW","T","font"],msgNode:["D"],viewport:["D","B","fx"]}});}());(function(){mstrmojo.requiresCls("mstrmojo.Calendar","mstrmojo._TouchGestures");mstrmojo.MobileCalendar=mstrmojo.declare(mstrmojo.Calendar,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.MobileCalendar",cssPrefix:"mobile-calendar",monthNames:function(C){return mstrmojo.locales.datetime.MONTHNAME_FULL[C];},supportedViews:{day:true,month:true,year:true},premousedown:function A(C){if(!mstrApp.isTouchApp()){return this._super(C);}},touchTap:function B(C){this.processEvent(document.elementFromPoint(C.pageX,C.pageY));return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.ui.SearchablePulldownCheckList","mstrmojo.ui.SearchablePulldown");var I=mstrmojo.array,K=mstrmojo.css,G=mstrmojo.dom,E=mstrmojo.hash,M=mstrmojo.string,F={0:true};function C(){var V=this.selectedIndices=E.copy(this.getPopupList().selectedIndices),P=this.items,S=[],U,R=this.allIdx,Q=this.noneIdx;if(P&&P.length){if(V[R]){S.push(P[R].n);}else{if(V[Q]){S.push(P[Q].n);}else{I.forEach(P,function(X,W){if(V[W]){S.push(X.n);}});}}}U=S.join(", ");this.set("value",U);this.set("text",U);this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-C",content:M.encodeHtmlString(U)});}mstrmojo.ui.MultiSelectSearchablePulldown=mstrmojo.declare(mstrmojo.ui.SearchablePulldown,[],{scriptClass:"mstrmojo.ui.MultiSelectSearchablePulldown",isHostedWithin:false,init:function O(P){this._super(P);K.addWidgetCssClass(this,"multi");this.hostedCSSClass=this.hostedCSSClass+" multi";},submitSelections:function B(){this.onchange();},_set_selectedIndices:function H(S,Q){var P=this.getPopupList(),R=E.copy(this.selectedIndices);P.set("selectedIndices",Q||R||F);C.call(this);return true;},select:function L(P){this.getPopupList().select(P);},getPopupWidget:function D(){return this.popupWidget;},getPopupList:function N(){return this.popupWidget.list;},getPopupListConfig:function A(){return[{scriptClass:"mstrmojo.ui.SearchablePulldownCheckList",alias:"popupWidget",_unlockHoverCheck:function P(U,Q){var S=G.eventTarget(Q,U),R=this.opener;if(G.contains(R.domNode,S,true,document.body)){R.set("isEditing",true);}else{if(!G.contains(this.domNode,S,true,document.body)){this.close();}}},bindings:{itemCssText:function(){return(this.parent&&this.parent.itemCssText)||"";}}}];},processSearch:function J(){var P=this.getPopupWidget();P.toggleCacheMode(true);if(this._super){this._super();}P.toggleCacheMode(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidVis","mstrmojo._TouchGestures","mstrmojo.TouchScroller","mstrmojo._HasTouchScroller");var d="bold 14px Roboto",X="bold 18px Roboto",O=30,N=1;function E(f){N=f;d="bold "+Math.round(14*N)+"px Roboto";X="bold "+Math.round(18*N)+"px Roboto";O=Math.round(30*N);}function a(g){var f=mstrmojo.dom.findAncestorByAttr(g.target,"clk",true,this.domNode);return f||null;}function C(){var f=this._scroller;var g=this.height-this.legendBarSwitcher.height-15*N;var h=this.legendListDiv.offsetHeight;if(h>g){this.scrollPast=true;}var k=h>g?h-g:0;f.origin={x:0,y:0};f.showScrollbars=true;f.noVScroll=false;f.vScroll=(k!==0&&f.noVScroll!==true)||this.scrollPast;if(f.vScroll){f.offset={y:{start:0,end:k},scrollPast:this.scrollPast};}var j=this.legendListDiv;this.utils.translateCSS(0,0,false,j);}mstrmojo.VisTimeSeriesLegend=mstrmojo.declare(mstrmojo.AndroidVis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisTimeSeriesLegend",scrollerConfig:{bounces:false,showScrollbars:true,useTranslate3d:true},multiTouch:true,scrollPast:false,isAndroidTab:false,legendBarWidth:30,isLegendBarOpen:false,isLegendSelected:false,legendSelectedIndex:-1,maxLegendAttrLength:0,widget:null,y_axis_interval:25,markupString:'<div id="{@id}-legend-bar" style="position:absolute;top:{@top}px;right:{@right};z-index:{@zIndex};" ><div id="{@id}-legend-switcher" class="mstrmojo-timeseries-legend-switcher" clk="S"><canvas id="{@id}-legend-triangle" width="15px" height="17px" style="position:absolute;" ></canvas><div id="{@id}-legend-shadow" class="timeseries-legend-switcher-shadow" style="height:0px; width:0px;position:absolute"></div></div><div class="mstrmojo-timeseries-legend-List-Div" style="overflow:hidden;"><div id="{@id}-legend-List" ></div></div><canvas style="z-index:-1;" clk="C"></canvas></div>',markupSlots:{legendBarDiv:function(){return this.domNode;},legendBarSwitcher:function(){return this.domNode.firstChild;},triangle:function(){return this.domNode.firstChild.firstChild;},legendListDivContainer:function(){return this.domNode.childNodes[1];},legendListDiv:function(){return this.domNode.childNodes[1].firstChild;},legendCanvas:function(){return this.domNode.childNodes[2];}},switchLegendBar:function S(){this.isLegendBarOpen=!this.isLegendBarOpen;this.calculateAndSetLegendWidth();this.widget.reDrawSlaveChartImpl();this.renderLegend(true);C.call(this);},enableLegendGlowEffect:function P(h,g){var j=this.legendListDiv.childNodes[h];var f=g||j.style.color;j.style.font=X;},hiddenLegendGlowEffect:function A(f){var g=this.legendListDiv.childNodes[f];g.style.textShadow="none";g.style.font=d;},toggleTriangle:function e(j){var h=this.triangle,o=h.style,g=h.getContext("2d"),l=this.widget;var k=Math.round(17*N),f=Math.round(15*N);h.height=k;h.width=f;o.top=Math.round(7*N)+"px";o.left=Math.round(8*N)+"px";g.save();g.fillStyle=l.utils.rgb2rgbStr(l.formatProp.textClr,0.75);g.beginPath();if(j){g.moveTo(0,0);g.lineTo(f,k/2);g.lineTo(0,k);g.lineTo(0,0);}else{g.moveTo(0,k/2);g.lineTo(f,0);g.lineTo(f,k);g.lineTo(0,k/2);}g.closePath();g.fill();g.restore();},renderLegend:function G(u){var t=this.model,AD=t.series,o=AD&&AD.length||0,q=this.height,AC=this.utils,g=t.colHeaders,j=this.legendCanvas.getContext("2d"),AA=this.legendListDiv,k=this.legendBarSwitcher;this.legendBarDiv.style.width=this.legendBarWidth+"px";this.legendBarDiv.style.height=q+"px";AA.style.width=this.legendBarWidth+"px";k.width=this.legendBarWidth;k.height=O;k.style.width=this.legendBarWidth+"px";this.legendCanvas.width=this.legendBarWidth;this.legendCanvas.height=q;if(this.isLegendSelected&&this.legendSelectedIndex>=o){this.legendSelectedIndex=0;this.widget.setLegendSelected(this.isLegendSelected,this.legendSelectedIndex);}if(AA.childNodes.length==0){for(var p=0;p<o;p++){var l=document.createElement("div");l.id="legendAttr"+p;l.style.font=d;l.className="timeseries-legendAttr";l.innerHTML=this.widget.getLegendName(g,AD,p);l.setAttribute("clk","LA");l.setAttribute("vIndex",p);l.style.color=this.widget.getSerieColor(p);AA.appendChild(l);AC.changeElementSize(l,"height",AC.getScreenZoomFactor());}this.y_axis_interval=Math.max(l.offsetHeight,25);}if(this.isLegendBarOpen){this.toggleTriangle(true);AA.style.display="block";this.legendListDivContainer.style.height=(q-k.height-15*N)+"px";this.legendListDivContainer.style.weight=this.legendBarWidth+"px";this._scroller.updateScrollBars();this.utils.translateCSS(0,k.height,false,this.legendListDivContainer);if(this.isLegendSelected){this.enableLegendGlowEffect(this.legendSelectedIndex);}this.legendCanvas.height=q;this.legendCanvas.style.position="absolute";this.legendCanvas.style.top="0px";this.legendCanvas.style.left="0px";this.drawLegendOutline(q,k.height,j);}else{this.toggleTriangle(false);AA.style.display="none";this.legendCanvas.height=q;this.legendCanvas.style.position="absolute";this.legendCanvas.style.top="0px";this.legendCanvas.style.left="0px";this.drawLegendOutline(q,k.height,j);j.save();var AB=this.legendBarWidth/2;var z=this.y_axis_interval/2;var f=Math.round(5*N);for(var p=0;p<o&&z+this.y_axis_interval<q-15*N;p++){j.fillStyle=this.widget.getSerieColor(p);z+=this.y_axis_interval;AC.drawArc(this,AB,z,f,0,Math.PI*2,true,true,j);}j.restore();}var w=this.legendBarSwitcher.lastChild;if(u){w.className="timeseries-legend-switcher-shadow";w.style.left=Math.round(15*N)+"px";w.style.top=Math.round(15*N)+"px";w.style.display="";w.style.visibility="visible";}else{w.className="";w.style.visibility="hidden";}},reRender:function K(){this.calculateAndSetLegendWidth();this.height=this.calculateHeight();this.renderLegend(false);this.legendBarDiv.style.top=this.widget.margin.t+"px";C.call(this);},hiddenSwitcherArrowGlowEffect:function I(){var f=this.legendBarSwitcher.lastChild;f.innerHTML="";f.style.visibility="hidden";},drawLegendOutline:function D(f,l,h){var q=this.utils,p=this.widget.formatProp;h.save();h.globalAlpha=0.5;h.strokeStyle=q.rgb2rgbStr(p.textClr);h.lineWidth=2;q.drawHalfRoundedRectangle(this,1,1,this.legendBarWidth,f-2,Math.round(10*N),false,h);h.globalAlpha=1;var o=h.createLinearGradient(0,0,this.legendBarWidth-2,0);var g=q.rgb2rgbStr(p.textClr,0.5)||"#58595B";var k=q.rgb2rgbStr(p.textClr,0.13)||"#222222";o.addColorStop(0,g);o.addColorStop(1,k);h.strokeStyle=o;h.lineWidth=1;var j=l-0.5;q.drawLineSet(this,[{x:2,y:j},{x:this.legendBarWidth,y:j}],false,h);h.restore();},calculateMaxLegendAttrLength:function M(p){var l=this.model,q=l.series,h=q.length,f=l.colHeaders;for(var k=0;k<h;k++){var g=0;var o=this.widget.getLegendName(f,q,k);var j=p?X:d;g=this.widget.getTextWidth(o,j,undefined,["timeseries-legendAttr"]);this.maxLegendAttrLength=Math.max(this.maxLegendAttrLength,g);}},calculateAndSetLegendWidth:function W(){if(this.isLegendBarOpen){var f=(this.widget.getWidth()-50)*0.3+20;this.legendBarWidth=Math.min(f,this.maxLegendAttrLength);}else{this.legendBarWidth=Math.round(40*N);}this.widget.setlegendStatus(this.isLegendBarOpen,this.legendBarWidth);},calculateHeight:function F(){var f=this.widget.margin;return this.widget.getHeight()-this.widget.masterChartHeight-f.t-f.b;},postBuildRendering:function J(){E(this.utils.getScreenZoomFactor());this.height=this.calculateHeight();var f=this.model.series&&this.model.series.length;if(f==1){this.isLegendSelected=true;this.legendSelectedIndex=0;this.widget.setLegendSelected(this.isLegendSelected,this.legendSelectedIndex);}this.calculateMaxLegendAttrLength(f==1);this.calculateAndSetLegendWidth();this.scrollerConfig.scrollEl=this.legendListDiv;if(this._super){this._super();}this.renderLegend(false);C.call(this);},initScroller:function V(f){f.vScroll=true;this._super(f);},touchBegin:function U(h){this.widget.hiddenTooltipAndShowTimeSelector();var f=a.call(this,h);if(f){var g=f.value;if(g==="S"){this.switchLegendBar();}else{if(!this.isLegendBarOpen&&g==="C"){this.switchLegendBar();}}}},touchTap:function Z(j){var g=a.call(this,j);if(g){var h=g.value;if(h==="LA"){var f=mstrmojo.dom.findAncestorByAttr(j.target,"vIndex",true,this.domNode);if(f){this.handleLegendItemTap(parseInt(f.value,10));}}}},touchEnd:function H(g){var f=this;f.hiddenSwitcherArrowGlowEffect();},touchSelectBegin:function B(o){var g=a.call(this,o);if(g){var h=g.value;if(h==="LA"){var f=mstrmojo.dom.findAncestorByAttr(o.target,"vIndex",true,this.domNode);if(f){var k=(f.value==this.legendSelectedIndex)?X:d;var j=this.widget.getTextWidth(g.node.innerHTML,k);if(j>this.legendBarWidth-12){var l=g.node.offsetTop-this._scroller.origin.y+this.widget.margin.t+this.legendBarSwitcher.height-5;this.widget.showLegendTooltip(g.node);}}}}},touchSelectEnd:function R(f){this.widget.hiddenLegendTooltip();},touchMultiBegin:function Q(f){this.touchSelectEnd(f);},onCrossWidgetMultitouch:function Y(){this.widget.hiddenLegendTooltip();this.hiddenSwitcherArrowGlowEffect();},handleLegendItemTap:function L(f){if(this.model.series.length==1){return ;}if(this.isLegendSelected){if(this.legendSelectedIndex===f){this.isLegendSelected=false;this.hiddenLegendGlowEffect(f);this.legendSelectedIndex=-1;}else{this.hiddenLegendGlowEffect(this.legendSelectedIndex);this.legendSelectedIndex=f;this.enableLegendGlowEffect(f);}}else{this.isLegendSelected=true;this.legendSelectedIndex=f;this.enableLegendGlowEffect(f);}this.widget.setLegendSelected(this.isLegendSelected,this.legendSelectedIndex);this.widget.reDrawSlaveChart();},destroy:function b(){if(this._super){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndroidVis");var H=1;var D=2;var F=3;var J=4;mstrmojo.VisMicroChartBullet=mstrmojo.declare(mstrmojo.AndroidVis,null,{scriptClass:"mstrmojo.VisMicroChartBullet",isDrawAxis:false,margin:{t:0,r:5,b:0,l:5},showHighlightLine:false,themeColor:"#FFFFFF",noBackground:true,isAnimateLines:false,toolTipMain:null,mainWidth:0,mainLeftPos:0,showMinLabel:false,markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:relative;"  mstrAttach:mousedown,mouseup,mousemove,click ><canvas width="{@width}px" height="{@height}px"></canvas><div style="position:absolute;left:0px;bottom:0px;display:none;font:7px Arial;text-align:left;line-height:7px;"></div><div style="width:100%;height:{@height}px;top:0px;left:0px;position:absolute;display:none;font:10pt Arial;overflow: hidden; text-overflow: ellipsis; white-space:nowrap"></div></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;},minLabel:function(){return this.domNode.childNodes[1];},errorMsg:function(){return this.domNode.childNodes[2];}},postBuildRendering:function C(){if(this._super){this._super();}this.browserSupportsHtml5=this.canvas.getContext;if(!this.browserSupportsHtml5){var K=window.getLocaleString?window.getLocaleString("YOUR_BROWSER_NOT_SUPPORT_HTML5","Your browser does not support HTML5"):mstrmojo.desc(8126,"Your browser does not support HTML5");this.renderErrorMessage(K);return ;}if(!this.model){var K=window.getLocaleString?window.getLocaleString("NO_MODEL_PROVIDED","No model provided"):mstrmojo.desc(8426,"No model provided");this.renderErrorMessage(K);return ;}if(this.model.err||this.model.eg){this.renderErrorMessage(this.model.err||this.model.eg);return ;}this.context=this.canvas.getContext("2d");this.setColorByTheme();this.drawChart();},setColorByTheme:function G(){var L=this.config;var K=mstrMobileApp&&mstrMobileApp.getDeviceDPI()||160;if(this.theme==H){this.bandColor1="#494949";this.bandColor2="#595959";this.bandColor3="#727272";this.refLinePosColor="#FF781D";this.refLineNegColor="#FF781D";this.refLineWidth=K>=160?2:1;this.blueBarPosColor="#00BDFF";this.blueBarNegColor=L.mwNegCol;}else{if(this.theme==D){this.bandColor1="#A5A5A5";this.bandColor2="#B3B3B3";this.bandColor3="#BCBCBC";this.refLinePosColor="#FF781D";this.refLineNegColor="#FF781D";this.refLineWidth=K>=160?2:1;this.blueBarPosColor="#00BDFF";this.blueBarNegColor=L.mwNegCol;}else{this.bandColor1=L.mwBand1||"#999999";this.bandColor2=L.mwBand2||"#BBBBBB";this.bandColor3=L.mwBand3||"#DEDEDE";this.refLinePosColor=L.mwRefLineCol||"#0066ff";this.refLineNegColor=L.mwRefLineCol||"#0066ff";this.blueBarPosColor=L.mwPosCol||"#000066";this.blueBarNegColor=L.mwNegCol||"#ff0000";}}},showTooltip:function A(Q,P){if(!this.config.mbShowTooltip){return false;}var R=this.config.mfMinValue;var W=this.refv;var b=W[2].rv-R;var Z=W[3].rv-R;var M=this.widget._tooltip;var L=this.model;var V=L.mtrcs.items;var X=this.config;if(this.tooltipErrMsg){M.renderErrMsg(this.tooltipErrMsg);M.toggle(true);}else{var U=[];var S;if(X.mstrAssMetric){S=X.mstrAssMetric;}else{S=V[2];}if(X.mbRefLine){U.push({n:'<div><div style="float:left;margin-right:5px;width:12px;height:10px;background-color:'+this.targetColor+';"></div><div style="float:left;">'+S+":</div></div>",v:W[2].v});}else{U.push({n:'<div><div style="float:left;margin-right:5px;width:12px;height:10px;background-color:'+this.targetColor+';"></div><div style="float:left;">'+S+":</div></div>",v:W[2].v});}if(X.mbRefLine){U.push({n:'<div ><div style="float:left;margin-right:10px;width:2px;height:10px;background-color:'+this.refLineColor+';"></div><div style="float:left;">'+V[6]+":</div></div>",v:W[6].v});}M.displayInfo(U,null,true);M.toggle(true);M.setBorderColor(this.targetColor);M.domNode.style.visibility="hidden";M.adjustBulletNameDisplay();}var N=mstrmojo.dom.position(this.domNode,true);var K=mstrmojo.dom.position(this.widget._leftChart.domNode,true);var a=M.domNode.offsetHeight,d=M.domNode.offsetWidth;var Y=0;if((this.getHeight()-a)%2==0){Y=(N.y-K.y+(this.getHeight()-a)/2);}else{Y=(N.y-K.y+(this.getHeight()-a-1)/2);}if(Y<0){Y=0;}if(Y+a>this.widget.getHeight()){Y=this.widget.getHeight()-a-5;}var O=0;if(N.x+N.w/2>(K.x+K.w/2)){O=N.x-K.x-d-10;}else{O=N.x-K.x+N.w+10;}if(O<0){O=0;}M.posTo({x:O,y:Y});M.domNode.style.visibility="visible";return true;},drawChart:function I(){var AB=this.config;var M=AB.mfMinValue;var t=this.refv;var h,g,f,e,d;var AD,AC,z,x,u;AD=parseFloat(t[2].rv);AC=parseFloat(t[3].rv);z=parseFloat(t[4].rv);x=parseFloat(t[5].rv);u=parseFloat(t[6].rv);h=AD-M;g=AC-M;f=z-M;e=x-M;d=u-M;var Z=AB.mbInvertAxis;var b=AB.mbRefLine;var K=AB.mbRefBands;var o=AB.mbShowTooltip;var a=this.context;var X;var L;var P=7,k;var Q=0,V=5;if(isNaN(h)||isNaN(g)||isNaN(f)||isNaN(e)){var s=window.getLocaleString?window.getLocaleString("MICROCHARTS_BULLET_METRIC_INSUFFICIENT","Insufficient data to plot the graph"):mstrmojo.desc(10860,"Insufficient data to plot the graph");this.errorMsg.innerHTML=s;this.errorMsg.style.display="block";this.minLabel.style.display="none";this.tooltipErrMsg=s;return ;}else{if(h*g>0&&Math.abs(h)>Math.abs(g)||g===0){var j="Metric of Bullet is out of the max graph range";var AE=window.getLocaleString?window.getLocaleString("METRIC_OF_BULLET_OUT_OF_MAX_GRAPH_RANGE",j):mstrmojo.desc(10381,j);var s=AE;this.errorMsg.innerHTML=s;this.errorMsg.style.display="block";this.minLabel.style.display="none";this.tooltipErrMsg=s;return ;}else{this.errorMsg.style.display="none";this.tooltipErrMsg=null;}}var p;var w,AA,l;var S,R;var W,O;if(h<=0&&g>=0){X=(this.getWidth()-2*Q)/(g-h);p=Q-h*X;L=this.getHeight()-P-2*V-2;if(K){W=L;O=this.getWidth()-2*Q;S=Q;R=(L)/2-W/2+V;a.fillStyle=this.bandColor3;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);if(e>h&&e<g){O=(e-h)*X;S=Q;a.fillStyle=this.bandColor2;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}if(f>h&&f<g){O=(f-h)*X;S=Q;a.fillStyle=this.bandColor1;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}}W=L/2;O=Math.abs(h)*X;S=Q;R=(L)/2-W/2+V;a.fillStyle=this.targetColor=AD>=0?this.blueBarPosColor:this.blueBarNegColor;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);if(b&&d>=h&&d<=g){W=L;O=2;S=p+d*X;R=(L)/2-W/2+V;a.fillStyle=this.refLineColor=AD>=0?this.refLinePosColor:this.refLineNegColor;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}}else{if(h<=0&&g<0){X=(this.getWidth()-2*Q)/(Math.abs(g));p=Q;L=this.getHeight()-P-2*V-2;Z=!Z;if(K){W=L;O=this.getWidth()-2*Q;S=Q;R=(L)/2-W/2+V;a.fillStyle=this.bandColor3;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);if(e<0&&e>g){O=Math.abs(e)*X;S=Q;a.fillStyle=this.bandColor2;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}if(f<0&&f>g){O=Math.abs(f)*X;S=Q;a.fillStyle=this.bandColor1;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}}W=L/2;O=Math.abs(h)*X;S=Q;R=(L)/2-W/2+V;a.fillStyle=this.targetColor=AD>=0?this.blueBarPosColor:this.blueBarNegColor;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);if(b&&d<=0&&d>=g){W=L;O=2;S=p+Math.abs(d)*X;R=(L)/2-W/2+V;S=this.getWidth()-S-O;a.fillStyle=this.refLineColor=AD>=0?this.refLinePosColor:this.refLineNegColor;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}}else{if(h>=0&&g>0){if(this.showMinLabel){V=9.5;}else{V=5;}X=(this.getWidth()-2*Q)/g;p=Q;L=this.getHeight()-2*V;if(K){W=L;O=this.getWidth()-2*Q;S=Q;R=(L)/2-W/2+V;a.fillStyle=this.bandColor3;this.drawRect(a,S,R,O,W);if(e>0&&e<g){O=e*X;S=p;if(Z){S=this.getWidth()-S-O;}a.fillStyle=this.bandColor2;this.drawRect(a,S,R,O,W);}if(f>0&&f<g){O=f*X;S=p;if(Z){S=this.getWidth()-S-O;}a.fillStyle=this.bandColor1;this.drawRect(a,S,R,O,W);}}W=L/2;O=h*X;R=(L)/2-W/2+V;S=p;if(Z){S=this.getWidth()-S-O;}a.fillStyle=this.targetColor=AD>=0?this.blueBarPosColor:this.blueBarNegColor;this.drawRect(a,S,R,O,W);if(b&&d>=0&&d<=g){W=L;O=2;S=p+d*X;R=(L)/2-W/2+V;a.fillStyle=this.refLineColor=AD>=0?this.refLinePosColor:this.refLineNegColor;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}}else{if(h>=0&&g<=0){X=(this.getWidth()-2*Q)/(h-g);L=this.getHeight()-P-2*V-2;p=Q-g*X;Z=!Z;if(K){W=L;O=this.getWidth()-2*Q;S=Q;R=(L)/2-W/2+V;a.fillStyle=this.bandColor3;this.drawRect(a,S,R,O,W);if(e<h&&e>g){O=(h-e)*X;S=Q;S=this.getWidth()-S-O;a.fillStyle=this.bandColor2;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}if(f<h&&f>g){O=(h-f)*X;S=Q;S=this.getWidth()-S-O;a.fillStyle=this.bandColor1;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}}W=L/2;O=Math.abs(h)*X;S=p;R=(L)/2-W/2+V;a.fillStyle=this.targetColor=AD>=0?this.blueBarPosColor:this.blueBarNegColor;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);if(b&&d<=h&&d>=g){W=L;O=2;S=p+d*X;R=(L)/2-W/2+V;a.fillStyle=this.refLineColor=AD>=0?this.refLinePosColor:this.refLineNegColor;if(Z){S=this.getWidth()-S-O;}this.drawRect(a,S,R,O,W);}}}}}if(h<0){W=L;O=2;S=p;R=V;w=0;AA=0;l=0;if(Z){S=this.getWidth()-S-O;}a.fillStyle="#000000";this.drawRect(a,S,R,O,W);M=M+"";var Y=(M=="0")?"":"$";var N=0;for(var q=0;q<M.length;q++){if(M[q]=="."){break;}N++;}for(var q=0;q<M.length;q++){Y+=M[q];N--;if(N%3==0&&N>0){Y+=",";}}M=Y;var U=this.widget.getTextWidthByCanvas(M,this.minLabel);k=U-1;S=p;if(Z){S=this.getWidth()-S-O;}if(S-k/2<=Q){this.minLabel.style.paddingLeft=Q;}else{if(S+k/2<=this.getWidth()-Q){this.minLabel.style.paddingLeft=Math.round(S-k/2)+"px";}else{this.minLabel.style.paddingLeft=Math.round((this.getWidth()-Q-k))+"px";}}this.minLabel.style.bottom=V+"px";this.minLabel.style.fontSize="7pt";if(this.labelColorRGB){this.minLabel.style.color="rgb("+this.labelColorRGB[0]+","+this.labelColorRGB[1]+","+this.labelColorRGB[2]+")";}else{this.minLabel.style.color="";}this.minLabel.innerHTML=M;this.minLabel.style.display="block";}else{this.minLabel.style.display="none";}},convertColor:function E(Q){var O="#";var M=parseInt("0xff");var P=Q&M;M=parseInt("0xff00");var K=((Q&M)>>8);M=parseInt("0xff0000");var S=((Q&M)>>16);var R=S.toString(16);if(R.length<2){R="0"+R;}var N=K.toString(16);if(N.length<2){N="0"+N;}var L=P.toString(16);if(L.length<2){L="0"+L;}O+=R;O+=N;O+=L;return O;},drawRect:function(M,L,O,N,K){L=Math.round(L);O=Math.round(O);N=Math.round(N);K=Math.round(K);M.fillRect(L,O,N,K);},reDrawChart:function B(){var M=this.context,L=this.canvas,N=L.width,K=L.height;M.clearRect(0,0,N,K);this.postBuildRendering();}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndroidVis","mstrmojo._TouchGestures","mstrmojo.TouchScroller","mstrmojo._HasTouchScroller","mstrmojo.css");var L=mstrmojo.css;var N=15;function K(R){var Q=mstrmojo.dom.findAncestorByAttr(R.target,"clk",true,this.domNode);return Q||null;}function J(){var R=this._scroller;var U=this.timeSelectorListContainer.width;var Q=this.timeSelectorList.offsetWidth;if(Q>U){this.scrollPast=true;}var V=Q>U?Q-U:0;R.origin={x:0,y:0};R.showScrollbars=true;R.noHScroll=false;R.hScroll=(V!==0&&R.noHScroll!==true)||this.scrollPast;if(R.hScroll){R.offset={x:{start:0,end:V},scrollPast:this.scrollPast};}var S=this.timeSelectorList;this.widget.utils.translateCSS(0,0,false,S);}mstrmojo.VisTimeSeriesTimeSelector=mstrmojo.declare(mstrmojo.AndroidVis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisTimeSeriesTimeSelector",scrollerConfig:{bounces:false,showScrollbars:true,useTranslate3d:true},scrollPast:false,isAndroidTab:false,offsetx:0,widget:null,markupString:'<div id="{@id}-TimeSelector-Container" class="mstrmojo-timeseries-timeselector-div" style="position:absolute; left:{@offsetx}px; overflow:hidden;"><div id="{@id}-TimeSelector-List" style="position:absolute;left:0;top:0"></div></div>',markupSlots:{timeSelectorListContainer:function(){return this.domNode;},timeSelectorList:function(){return this.domNode.firstChild;}},toggleSelected:function C(V,U){if(!V){return ;}var S=V.style;var W=this.widget;var R=W.utils.rgb2rgbStr(W.formatProp.textClr);var Q=W.utils.rgb2rgbStr(W.formatProp.backgroundClr);if(U){S.backgroundColor=R;S.color=Q;}else{S.backgroundColor="";S.color=R;}},toggleGlowEffect:function B(Q,R){if(!Q){return ;}if(R){L.applyShadow(Q,0,0,20,this.widget.glowColor);}else{L.removeShadow(Q);}},drawTimeSelectorLabels:function H(){var W=this.widget.baseModel.vp.rl;var e=this.chartStatus;if(W){var Z=this.widget,X=Z.margin,f=Z.utils,R=Z.getWidth(),V=0;this.timeSelectorListContainer.width=R-X.l-X.r;this.timeSelectorListContainer.style.width=(R-X.l-X.r)+"px";this.timeSelectorListContainer.style.height=X.t+"px";var Y=W.length;var b=(R-X.l-X.r)/(Y+1);var Q=Z.id,S=this.timeSelectorList;if(S.childNodes.length==0){Z.currSelection=null;for(var U=0;U<Y;U++){var a=document.createElement("div");a.id="timeseries-intervals";a.className="timeseries-intervals";a.style.fontWeight="bold";a.style.fontFamily="Roboto";a.style.fontSize=N+"px";a.innerHTML=W[U].n;a.setAttribute("clk","S");a.setAttribute("value",U);a.style.position="relative";a.style.whiteSpace="nowrap";a.style.cssFloat="left";if(U===0&&e.currSelectionIdx==-1&&!e.usingCustomInterval){this.toggleSelected(a,true);Z.currSelection=a;}else{if(!e.usingCustomInterval&&e.currSelectionIdx==U){this.toggleSelected(a,true);Z.currSelection=a;}else{this.toggleSelected(a,false);}}S.appendChild(a);offsetWidth=a.offsetWidth;V+=offsetWidth;spaceWidth=offsetWidth<b?b-offsetWidth:20;V+=spaceWidth;if(U==0){S.insertBefore(this.createWhiteSpace(spaceWidth),S.firstChild);V+=spaceWidth;}S.appendChild(this.createWhiteSpace(spaceWidth));}}else{var h=S.childNodes;var g=h.length;for(var U=0;U<g;U++){var a=h[U];offsetWidth=a.offsetWidth;V+=offsetWidth;if(U==0){continue;}spaceWidth=offsetWidth<b?b-offsetWidth:20;V+=spaceWidth;if(U==1){h[0].style.paddingLeft=spaceWidth+"px";}U++;h[U].style.paddingLeft=spaceWidth+"px";}}this.timeSelectorList.style.width=V+"px";}},postBuildRendering:function E(){N=Math.round(15*this.widget.utils.getScreenZoomFactor());this.scrollerConfig.scrollEl=this.timeSelectorList;if(this._super){this._super();}this.drawTimeSelectorLabels();J.call(this);},reRender:function I(){this.drawTimeSelectorLabels();J.call(this);},createWhiteSpace:function F(R){var Q=document.createElement("div");Q.style.height="30px";Q.style.position="relative";Q.style.whiteSpace="nowrap";Q.style.cssFloat="left";Q.style.paddingLeft=R+"px";return Q;},initScroller:function M(Q){Q.hScroll=true;this._super(Q);},touchBegin:function D(Q){this.widget.hiddenTooltipAndShowTimeSelector();},touchSelectEnd:function P(R){var Q=this.widget.currSelection;if(Q){this.toggleGlowEffect(Q,false);}},touchSelectBegin:function G(S){var Q=K.call(this,S);if(Q){var R=Q.value;if(R==="S"){this.widget.timeSelectorOnClick(Q);}}},touchTap:function A(S){var Q=K.call(this,S);if(Q){var R=Q.value;if(R==="S"){this.widget.timeSelectorOnClick(Q);}}this.toggleGlowEffect(this.widget.currSelection,false);},destroy:function O(){if(this._super){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndroidVis","mstrmojo.dom","mstrmojo.VisHeatMapColorTheme","mstrmojo.VisHeatMapPopup","mstrmojo.VisHeatMapTree","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.num","mstrmojo._HasWaitIcon","mstrmojo.EnumReadystate","mstrmojo.css","mstrmojo.VisHeatMapCanvas");var o="#AAAAAA";var t=mstrmojo.EnumReadystate;var O=1,s=2,AX=4,p=4;var Aj=mstrmojo.css,Aa="heatmap-show";var f={On:0,Off:1,Proportional:2};var Z={Sum:0,Avg:1,Cnt:2,Max:3,Min:4,GeoAvg:5};var w={LeftToRight:0,RightToLeft:1,Center:2,None:3};var AM={Squarified:0,PivotByMiddle:1,SliceAndDice:2};var AT={Padding:6,MaxLegendHeight:60,LegendMenuEditorWidth:70,LegendTickCount:5,LegendMinWidth:15,LegendTickLength:4,LegendMaxBandWidth:400,LegendWidthPercent:0.9,LegendMinPadding:15,LegendBottomPadding:3,LegendGutter:5,LegendBandAspect:10,MinShowLabelDimension:6,DeletedListHeight:500,EditorDialogWidth:565,EditorDialogHeight:574,EditButtonWidth:60,EditButtonHeight:40,EditButtonRight:10,WaitIconWidth:205,WaitIconHeight:105,WaitIconMargin:10,WaitIconFontSize:20};var AP={heatmap_popup_panel_title:{font_size:{value:18,unit:"pt"}},heatmap_gray_label:{padding_bottom:{value:7,unit:"px"},font_size:{value:10,unit:"pt"},height:{value:32,unit:"px"},padding_left:{value:22,unit:"px"}},heatmap_tree_button:{font_size:{value:12,unit:"pt"}},heatmap_one_level_1:{font_size:{value:14,unit:"pt"}},heatmap_multi_level_1:{font_size:{value:24,unit:"pt"}},heatmap_two_level_2:{font_size:{value:14,unit:"pt"}},heatmap_multi_level_2:{font_size:{value:20,unit:"pt"}},heatmap_multi_level_3:{font_size:{value:10,unit:"pt"}},heatmap_size_legend:{font_size:{value:12,unit:"pt"}},heatmap_color_legend:{font_size:{value:12,unit:"pt"}},heatmap_color_legend_label:{font_size:{value:12,unit:"pt"}},heatmap_color_legend_tooltip:{font_size:{value:12,unit:"pt"}},heatmap_color_legend:{font_size:{value:12,unit:"pt"}},heatmap_editor_button:{font_size:{value:12,unit:"pt"}},heatmap_tooltip_gray_bold:{font_size:{value:14,unit:"pt"}},heatmap_tooltip_gray:{font_size:{value:14,unit:"pt"}},heatmap_tooltip_black_bold:{font_size:{value:14,unit:"pt"}},heatmap_tooltip_black:{font_size:{value:14,unit:"pt"}},heatmap_tree_div:{font_size:{value:18,unit:"pt"}},heatmap_tree_root__heatmap_tree_div:{font_size:{value:14,unit:"pt"}}};var X="--";var C=16119287;var R="OA:(All)";function Ap(As,Ar){var At=149,Au=160;if(Ar){Au=149;}if(this.enableMultiDPI||Ar){At=this.DPIX;}return parseInt(As*(At/Au));}function AG(Aw){var As=this.colorMetricIndex,Ar=this.model,Au=Ar.gvs&&Ar.gvs.items||[];var Av=(Au.length>Aw&&Au[Aw].items)||[];var At=Av.length>As&&Av[As];return Y.call(this,At,As);}Y:function Y(Aw,A0){var Ax=this.cssDiv,At=null,As=null,Ay,Az,Au=this.model;if(Au.hasOwnProperty("css")){At=Au.css;}if(Au.hasOwnProperty("th")){As=Au.th&&Au.th[A0];}if(At&&As&&Aw&&Aw.hasOwnProperty("ty")){var Av=parseInt(Aw.ty,10),Ar=Aw.hasOwnProperty("ti")?parseInt(Aw.ti,10):undefined;if(Av===2&&Ar!==undefined&&As.length>Ar&&As[Ar].udbg===1){Ay=As[Ar].cni;Ax.className=Ay!==undefined&&At[Ay]&&At[Ay].n;Az=mstrmojo.css.getComputedStyle(Ax);if(Az.hasOwnProperty("backgroundColor")){return Az.backgroundColor;}}}return o;}function M(Ar){var At=16777216+Ar;var As="#"+At.toString(16).substring(1).toUpperCase();return As;}function Ao(As,Ar){return Math.round(As*Math.pow(10,Ar))/Math.pow(10,Ar);}function e(Ar,Aw,At,Au,Av,As){As.beginPath();As.moveTo(Ar+Av,Aw);As.lineTo(Ar+At-Av-1,Aw);As.quadraticCurveTo(Ar+At-1,Aw,Ar+At-1,Aw+Av);As.lineTo(Ar+At-1,Aw+Au-Av-1);As.quadraticCurveTo(Ar+At-1,Aw+Au-1,Ar+At-Av-1,Aw+Au-1);As.lineTo(Ar+Av,Aw+Au-1);As.quadraticCurveTo(Ar,Aw+Au-1,Ar,Aw+Au-Av-1);As.lineTo(Ar,Aw+Av);As.quadraticCurveTo(Ar,Aw,Ar+Av,Aw);As.closePath();}function k(As,At,Ar){if(Ar&&As.total===undefined){As.avgTotal=As.total=As.geomProduct=As.max=As.min=As.value;As.count=isNaN(As.value)?0:1;As.positiveCount=As.value>0?1:0;}As.value=At;As.allChildrenCount++;if(!isNaN(At)){if(isNaN(As.total)){As.total=At;}else{As.total+=At;}if(isNaN(As.avgTotal)){As.avgTotal=At;}else{As.avgTotal+=At;}if(isNaN(As.max)){As.max=At;}else{As.max=Math.max(As.max,At);}if(isNaN(As.min)){As.min=At;}else{As.min=Math.min(As.min,At);}if(isNaN(As.geomProduct)){if(At>0){As.geomProduct=At;As.positiveCount++;}}else{if(At>0){As.geomProduct*=At;As.positiveCount++;}}As.count++;}}function H(As,Ar){var At=Ar.total;if(!isNaN(At)){if(isNaN(As.total)){As.total=At;}else{As.total+=At;}As.count++;}At=Ar.avg;if(!isNaN(At)){if(isNaN(As.avgTotal)){As.avgTotal=At;}else{As.avgTotal+=At;}}At=Ar.max;if(!isNaN(At)){if(isNaN(As.max)){As.max=At;}else{As.max=Math.max(As.max,At);}}At=Ar.min;if(!isNaN(At)){if(isNaN(As.min)){As.min=At;}else{As.min=Math.min(As.min,At);}}At=Ar.geomAvg;if(!isNaN(At)){if(isNaN(As.geomProduct)){if(At>0){As.geomProduct=At;As.positiveCount++;}}else{if(At>0){As.geomProduct*=At;As.positiveCount++;}}}}function AQ(Ar){return Ar.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');}var J={dftUnDel:0,dftDel:1,usrDel:2};function B(A2){var Av=new DOMParser(),A3=Av.parseFromString(AQ(A2),"text/xml"),Ax=0,Ar=A3.childNodes[0],Au=A3.childNodes[0].childElementCount;if(Au==0){return{};}var A0=Ar.firstElementChild,As=A0.attributes,Ay=As.length,Az=this.props.deletedList||{},At=Az,A1;while(Ax<Au){At=Az;As=A0.attributes;for(var Aw=0;Aw<Ay;Aw++){A1=As[Aw].value;if(Aw===(Ay-1)){At[A1]=J.dftDel;}else{if(!At[A1]){At[A1]={};}At=At[A1];}}Ax++;A0=A0.nextElementSibling;}return Az;}function Ac(){var Az=this.props,Ay=this.controller.view.model.session;if(Ay){if(Ay.db!==undefined){Az.delButtonEnabled=Ay.db;}if(Ay.dl!==undefined){Az.deletedList=Ar(Az.deletedList,Ay.dl);}if(isNaN(Ay.navigatingIndex)){Az.navigatingIndex=Ay.navigatingIndex;}if(Ay.entitiesWithStates){var A1=Ay.entitiesWithStates;this.entitiesWithStates={};var Av=this.entitiesWithStates;for(var A2 in A1){Av[A2]=[];var Au=A1[A2]||[],Aw=Au.length,At;for(At=0;At<Aw;At++){var Ax=Au[At];var As=A0.call(this,Ax.pathName);As.isExpanded=Ax.isExpanded;As.isSelected=Ax.isSelected;Av[A2].push(As);}}}if(Ay.dialogScrollerPosition){this.dialogScrollerPosition=Ay.dialogScrollerPosition;}this.isUsingSavedColorTheme=Ay.isUsingSavedColorTheme;this.isUsingDefaultColorTheme=Ay.isUsingDefaultColorTheme;}function A0(BA){var A5=this.root;for(var A9=0,A3=BA.length;A9<A3;A9++){var A8=A5.entityChildren;for(var A7=0,A4=A8.length;A7<A4;A7++){var A6=null;if(this.getEntityDisplayName(A8[A7])===BA[A9]){A6=A8[A7];A5=A6;break;}}}return A6;}function Ar(A5,A4){function A6(A9,A8){var BC=Object.keys(A8),A7=BC.length;for(var BB=0;BB<A7;BB++){var BA=BC[BB];if(typeof A8[BA]!=="object"){A9[BA]=A8[BA];}else{if(A9[BA]===undefined){A9[BA]={};}A6(A9[BA],A8[BA]);}}}var A3={};A6(A3,A5);A6(A3,A4);return A3;}}function Ak(){var A0=this.controller.view.model,Ay={},Az=this.props;A0.session=Ay;if(Az.delButtonEnabled!==undefined){Ay.db=Az.delButtonEnabled;}if(Az.deletedList!==undefined){Ay.dl=Az.deletedList;}if(isNaN(this.props.navigatingIndex)){Ay.navigatingIndex=Az.navigatingIndex;}if(this.entitiesWithStates){var A1=this.entitiesWithStates;var Av={};Ay.entitiesWithStates=Av;for(var A2 in A1){Av[A2]=[];var Au=A1[A2]||[],Aw=Au.length,At;for(At=0;At<Aw;At++){var As=Au[At],Ax={};Ax.pathName=Ar.call(this,As);Ax.isExpanded=As.isExpanded;Ax.isSelected=As.isSelected;Av[A2].push(Ax);}}}if(this.dialogScrollerPosition){Ay.dialogScrollerPosition=this.dialogScrollerPosition;}Ay.isUsingSavedColorTheme=this.isUsingSavedColorTheme;Ay.isUsingDefaultColorTheme=this.isUsingDefaultColorTheme;function Ar(A3){var A4=[];while(A3.parentEntity){A4.push(this.getEntityDisplayName(A3));A3=A3.parentEntity;}return A4;}}function Q(At){if(At){return this.model.vp&&!!this.model.vp.gradientColors&&this.model.vp.gradientColors!=="";}else{var Ar=this.model,As=Ar.ghs&&Ar.ghs.chs&&Ar.ghs.chs.items&&Ar.ghs.chs.items[0],Au=!!As?As.items.length:0;this.colorMetricIndex=Au>1?1:0;return this.model.th&&this.model.th[this.colorMetricIndex]!==undefined;}}function g(){this.props={};var Au=this.props,Ar=this.model,Av=Ar.vp?Ar.vp:{},At;Au.deletedList={};Au.delButtonEnabled=false;Au.showMetricValues=false;Au.refreshType=0;Au.labelSize=f.On;Au.showLegend=true;Au.sizeMetricEnabled=true;Au.colorMetricEnabled=true;Au.layout=AM.Squarified;Au.legendAsc=true;this.userDefinedThresholdForNonFlashMode=Q.call(this,false);this.userDefinedThresholdForFlashMode=Q.call(this,true);this.userDefinedThreshold=this.userDefinedThresholdForFlashMode||this.userDefinedThresholdForNonFlashMode;var As=mstrmojo.VisHeatMapColorTheme.newInstance();As.initialize();this.colorTheme=As;if(Av.dl){Au.deletedList=B.call(this,Av.dl);}if(Av.ed){Au.delButtonEnabled=(Av.ed=="true"?true:false);}if(Av.mv){Au.showMetricValues=(Av.mv=="true"?true:false);}if(Av.rt!=""){Au.refreshType=parseInt(Av.rt);}if(Av.ml){At=Av.ml.split(",");if(At.length>=2){Au.sizeMetricID=At[0];Au.colorMetricID=At[1];}}if(Av.lb){At=Av.lb;if(At=="Off"){Au.labelSize=f.Off;}else{if(At=="Proportional"){Au.labelSize=f.Proportional;}}}if(Av.lg||Av.showLegend){Au.showLegend=((Av.lg=="true"||Av.showLegend=="true")?true:false);}if(Av.rlp=="false"&&Av.abs){this.colorTheme.convertAbsoluteToBlend(this,Av);}if(Av.blc){this.colorTheme.isBlend=(Av.blc=="true"?true:false);}if(this.userDefinedThreshold){if(Av.gradientColors){this.colorTheme.createBlendDataProviderFromString(Av.gradientColors);}if(Av.bandColors){this.colorTheme.createBandDataProviderFromString(Av.bandColors);}this.colorTheme.useDefault=false;}if(Av.la){Au.layout=parseInt(Av.la,10);}if(Av.thresholdType){Au.thresholdType=parseInt(Av.thresholdType,10);}if(Av.rlp=="false"&&Av.abs){this.colorTheme.convertAbsoluteToBlend(this,Av);if(this.userDefinedThreshold){if(Av.gradientColors){this.colorTheme.createBlendDataProviderFromString(Av.gradientColors);}if(Av.bandColors){this.colorTheme.createBandDataProviderFromString(Av.bandColors);}this.colorTheme.useDefault=false;}}}function An(){var At=parseInt(this.width,10),As=parseInt(this.height,10),Au=At-2*this.LayoutProperties.Padding,Ar=0,Av;if(this.model.gvs.items.length<=0){this.props.showLegend=false;}if(this.props.showLegend){Ar=Math.min(Math.floor(0.2*(As-2*this.LayoutProperties.Padding)),this.LayoutProperties.MaxLegendHeight);Av=As-Ar-3*this.LayoutProperties.Padding;}else{Av=As-2*this.LayoutProperties.Padding;}this.heatMapSize={x:0,y:0,w:Au,h:Av};this.legendSize={x:0,y:As-2*this.LayoutProperties.Padding-Ar,w:At,h:Ar};this.infoWindowSize={maxWidth:parseInt(this.width)-60,maxHeight:parseInt(this.heOight)-60};this.maxScale=10;}function A(){var At=this.model,Au=At.ghs.chs.items[0]?At.ghs.chs.items[0].items.length:0,Ar=this.props.sizeMetricID,Ax=this.props.colorMetricID,Ay=[];this.metricArray=Ay;for(var Aw=0;Aw<Au;Aw++){Ay.push(l.call(this,Aw));}Ay.push(X);Au++;this.sizeMetricIndex=0;this.colorMetricIndex=Au>2?1:0;for(var Aw=0;Aw<Au;Aw++){if(Ar!==X&&Ar==Ay[Aw]){this.sizeMetricIndex=Aw;}if(Ax!==X&&Ax==Ay[Aw]){this.colorMetricIndex=Aw;}}if(Ar===undefined){Ar=Ay[this.sizeMetricIndex];this.props.sizeMetricID=Ar;}if(Ax===undefined){Ax=Ay[this.colorMetricIndex];this.props.colorMetricID=Ax;}var Av=At.gvs&&At.gvs.items,As=Av&&Av.length,Aw,Az=this.sizeMetricIndex,A1=this.colorMetricIndex;this.sizeByMetricMissing=true;this.colorByMetricMissing=true;for(Aw=0;Aw<As;Aw++){var A0=Av[Aw]&&Av[Aw].items;if(A0[Az]===undefined||A0[Az].rv!==""){this.sizeByMetricMissing=false;break;}}for(Aw=0;Aw<As;Aw++){var A0=Av[Aw]&&Av[Aw].items;if(A0[A1]===undefined||A0[A1].rv!==""){this.colorByMetricMissing=false;break;}}if(Ar===X){this.sizeByMetricMissing=true;}if(Ax===X){this.colorByMetricMissing=true;}if(this.sizeByMetricMissing){this.props.sizeMetricEnabled=false;this.sizeMetricIndex=Ay.length-1;this.props.sizeMetricID=Ay[this.sizeMetricIndex];}if(this.colorByMetricMissing){this.props.colorMetricEnabled=false;}if(this.props.sizeMetricID===X){this.props.sizeMetricEnabled=false;}if(this.props.colorMetricID===X){this.props.colorMetricEnabled=false;this.colorTheme.hasNoColorMetric=true;}if(this.props.sizeMetricEnabled==false&&this.props.colorMetricEnabled==false){this.props.showLegend=false;}}function U(){this.aggFunctions=[];var Az=this.props,Ay=Az.colorMetricID,A1=this.aggFunctions,Au=this.model,As=Au.vp?Au.vp:{},Av=this.metricArray,Aw=Av.length-1;if(Ay!=X){var A0=(As["mle"+Ay]=="true")?true:false;if(A0){var At=parseFloat(As["mlma"+Ay]);if(!isNaN(At)){this.mlmax=At;}At=parseFloat(As["mlmi"+Ay]);if(!isNaN(At)){this.mlmin=At;}}}for(var Ax=0;Ax<Aw;Ax++){var Ar="agf"+Av[Ax];if(As[Ar]!==undefined){A1.push(parseInt(As[Ar]));}else{A1.push(Z.Sum);}}}function AR(At){for(var Ar=0;Ar<At.length;Ar++){var As=At[Ar].etk;if(As==-1||As=="-1"){return true;}}return false;}function N(){A.call(this);U.call(this);var A9=this.model,Au=this.props.deletedList,A8=A9.gts&&A9.gts.row||[],BH=A8.length,A5=A9.gvs&&A9.gvs.items||[],As=A9.ghs&&A9.ghs.rhs&&A9.ghs.rhs.items||[],A3=As.length,BE=A5[0]&&A5[0].items&&A5[0].items.length||0;if(BH<=0){var BL="The Heat Map requires at least one attribute on row axis to render properly; it is recommended that two metrics be placed on the column axis as well.";var BG=window.getLocaleString?window.getLocaleString("HEATMAP_VALIDATION",BL):mstrmojo.desc(11147,BL);A9.err=BG;return ;}this.singleSelection=false;this.hasNegativeSizeValue=false;this.levelAttributes=[];this.root={aggValues:[],entityChildren:[],level:0};for(var BD=0;BD<BH;BD++){this.levelAttributes[BD]={index:BD,order:BD+1,isInLOA:BD+1>0?true:false};}var BJ={},A4=[];for(var BD=0;BD<BH;BD++){var A6=A8[BD].fs;A4[BD]=Math.max(1,A6?A6.length:1);}this.attSpan=A4;var Ay=0,BN;for(var BD=0;BD<A3;BD++){var BM=As[BD].items,BB;if(AR(BM)){continue;}var BF="",A2=Au,Az=this.root,Av=0,A1,A7,At=0;for(var BC=0;BC<BH;BC++){var Ax;A7="";for(var BB=0;BB<A4[BC];BB++,Av++){Ax=BM[Av].idx;if(Ax==-1){continue;}A7+=A8[BC].es[Ax].n+" ";if(BB==0){BF+=Ax;}}A7=A7.substring(0,A7.length-1);if(A2){A2=A2[AQ(A7)];}if(BC!=BH-1){if(BJ[BF]!==undefined){Az=BJ[BF];}else{var Ar={aggValues:[],entityChildren:[],parentEntity:Az};var BK=Az.entityChildren;BK.push(Ar);BJ[BF]=Ar;Az=Ar;Ar.deleted=false;Ar.text=A7;Ar.label=A7;Ar.level=BC;Ar.index=BD;}BF+=":";}else{if(BJ[BF]!==undefined){A1=BJ[BF];var Aw=A1.indices;Aw.push(BD);for(var BB=0;BB<BE+1;BB++){var BI=A1.aggValues[BB];var BA;if(BB==BE){BA=1;}else{BA=A5[BD].items[BB].rv;}k(BI,parseFloat(BA),true);if(!isNaN(BA)){this.aggregated=true;}}}else{A1={indices:[],aggValues:[],parentEntity:Az,rowIndex:BD};var Aw=A1.indices;Aw.push(BD);var A0=A1.aggValues;for(var BB=0;BB<BE+1;BB++){var BI={};A0[BB]=BI;var BA;if(BB==BE){BA=1;}else{BA=A5[BD].items[BB].rv;}BI.value=parseFloat(BA);BI.allChildrenCount=1;}this.aggregated=false;if(A2){A1.deleted=true;this.colorTheme.useDefault=false;}var BK=Az.entityChildren;BK.push(A1);A1.level=BH-1;A1.text=A7;A1.label=A7;BJ[BF]=A1;}}if(BM[BC].cet!=undefined){At++;if(At>Ay){Ay=At;BN=BJ[BF];}}}}this.previousSelected=BN;D.call(this);AO.call(this);}function E(){this.cmax=NaN;this.cmin=NaN;this.smax=NaN;this.smin=NaN;}function AO(){this.hasLinkDrill=false;var Av=this.model.gts.row,Ay=Av.length;for(var At=0;At<Ay;At++){var Ax=Av[At];if(Ax.lm){for(var As=0;As<Ax.lm.length;As++){if(Ax.lm[As].links){break;}}if(As!=Ax.lm.length){this.hasLinkDrill=true;this.firstRowLinkDrillIndex=At;break;}}}var Au=this.model.gts.col[0];if(!Au){return ;}var Aw=Au.es.length;for(var At=0;At<Aw;At++){var Ar=Au.es[At],Az=Au.lm[At];if(Az&&Az.links){this.hasLinkDrill=true;this.firstColLinkDrillIndex=At;break;}}}function D(){this.hasSelector=false;var As=this.model,Ar=As.gts.row,Ay=Ar.length;var A3=this.xtabModel,A2=(A3&&A3.docModel),A0=(A2&&A2.defn&&A2.defn.layouts),A1;for(var Au=0;A0&&Au<A0.length;Au++){if(A0[Au].loaded==true){A1=A0[Au];break;}}var Ax=(A1&&A1.units);for(var Au=0;Au<Ay;Au++){var Az=Ar[Au];if(Az.otp!=-1&&Az.sc!==undefined){this.hasSelector=true;var Aw=Az.sc.tks;if(typeof Aw!="string"){continue;}Aw=Aw.split("\x1E");var Av=Aw.length;this.hasGridTarget=false;for(var At=0;At<Av;At++){if(Aw[At]==""){continue;}targetName=Aw[At];if(Ax&&Ax[targetName]&&!Ax[targetName]["ifw"]){this.hasGridTarget=true;return ;}}}}}function AE(){var Au=this.width-2*this.LayoutProperties.Padding;var Az=0;if(this.props.showLegend){Az=Math.min(Math.floor(0.2*(parseInt(this.height)-2*this.LayoutProperties.Padding)),this.LayoutProperties.MaxLegendHeight);}var As=this,At=h(this.heatMapSize);At.w*=this.scaleFactor;At.h*=this.scaleFactor;var Ax=Math.min(At.w,At.h);var Ar=this.root.entityChildren;switch(this.props.layout){case AM.Squarified:var Ay=Ar.slice(0);Ay.sort(function Av(A1,A0){var A3=I(A1,As);var A2=I(A0,As);if(isNaN(A3)){if(isNaN(A2)){return 0;}return 1;}else{if(isNaN(A2)){return -1;}return A3<A2?1:-1;}return 0;});Aq.call(this,Ay,{r:[]},Ax,At);break;case AM.SliceAndDice:AZ.call(this,Ar,At);break;case AM.PivotByMiddle:var Ay=q.call(this,Ar),Aw=Ay.length;if(Aw>0){Ah.call(this,Ay,0,Aw-1,At);}break;}}function Aq(A4,Ar,Au,A0,A1){var Av=[[this,A4,Ar,Au,A0,A1]];while(Av.length){var At=Av.pop();var Az=At[0];A4=At[1];Ar=At[2];Au=At[3];A0=At[4];A1=At[5];var A3=false;if(A4.length==0){P.call(Az,Ar,A0);}else{var As=A0.w*A0.h;var A2;if(A1!==undefined){A2=A1;}else{A2=AI.call(Az,Ar,Au,As);}var Aw=A4[0],Ax=Ar.r;Ax.push(Aw);var Ay=AI.call(Az,Ar,Au,As);if(A2>=Ay||A2==-1){A4.shift();Av.push([Az,A4,Ar,Au,A0,Ay]);}else{Ar.r.pop();P.call(Az,Ar,A0);Au=Math.min(A0.w,A0.h);if(Ar.t===undefined){Av.push([Az,A4,{r:[]},Au,A0]);}else{Av.push([Az,A4,{r:[],t:Ar.t},Au,A0]);}}}}}function AB(Au,At){var As,Av,Ar=At.levelAttributes.length;if(Ar==1){if(Au==0){Av="heatmap-one-level-1";As=this.Spec.heatmap_one_level_1.font_size.value;}}else{if(Ar==2){if(Au==0){Av="heatmap-multi-level-1";As=this.Spec.heatmap_multi_level_1.font_size.value;}else{if(Au==1){Av="heatmap-two-level-2";As=this.Spec.heatmap_two_level_2.font_size.value;}}}else{if(Ar>=3){if(Au==0){Av="heatmap-multi-level-1";As=this.Spec.heatmap_multi_level_1.font_size.value;}else{if(Au==1){Av="heatmap-multi-level-2";As=this.Spec.heatmap_multi_level_2.font_size.value;}else{Av="heatmap-multi-level-3";As=this.Spec.heatmap_multi_level_3.font_size.value;}}}}}return{css:Av,size:As};}function W(As){var At=function(){var Aw=As,Ax=As.level,Av=this.levelAttributes.length;if(Av==1){return 1;}if(Av==2){if(Ax==0){return 3;}return 1;}if(Av==3){if(Ax==0){return 6;}if(Ax==1){return 3;}return 1;}else{if(Ax==0){return 8;}if(Ax==1){return 4;}if(Ax==2){return 2;}return 1;}};var Ar,Au=At.call(this);if(this.DPI>160){Ar=Ap.call(this,Au);}else{Ar=Au;}if(Ar<=0){Ar=1;}return Ar;}function V(Ar){return Ar.w>0&&Ar.h>0;}function AD(Au,As){var Ar=Math.max(Au.x,As.x);var Aw=Math.max(Au.y,As.y);var At=Math.min(Au.x+Au.w,As.x+As.w)-Ar;var Av=Math.min(Au.y+Au.h,As.y+As.h)-Aw;if(At<0||Av<0){return{x:NaN,y:NaN,w:NaN,h:NaN};}return{x:Ar,y:Aw,w:At,h:Av};}function Ad(As,Ar){if(As.x==Ar.x&&As.y==Ar.y&&As.w==Ar.w&&As.h==Ar.h){return true;}else{return false;}}function a(As,Ar){var At=AD(As,Ar);return Ad(At,Ar);}function G(As,Ar,Av){var Au=[{x:Ar.x-As.w,y:Ar.y+Ar.h/2-As.h/2,w:As.w,h:As.h},{x:Ar.x+Ar.w,y:Ar.y+Ar.h/2-As.h/2,w:As.w,h:As.h},{x:Ar.x+Ar.w/2-As.w/2,y:Ar.y-As.h,w:As.w,h:As.h},{x:Ar.x+Ar.w/2-As.w/2,y:Ar.y+Ar.h,w:As.w,h:As.h}];for(var At=0;At<4;At++){if(a(Av,Au[At])){return{rect:Au[At],index:At};}}}function AU(Ar){var As=Ar.x;Ar.x=Ar.y;Ar.y=As;As=Ar.w;Ar.w=Ar.h;Ar.h=As;return Ar;}function h(As){var Ar={};Ar.x=As.x;Ar.y=As.y;Ar.w=As.w;Ar.h=As.h;return Ar;}function AI(Ay,A0,A8){var A1,Ar=Ay.r,A3=Ar.length;if(A3>0&&A8>0){var A7=Ar[0];var Az=I(A7.parentEntity,this);if(isNaN(Az)||Az<=0){return -1;}var A2,A4,As=0,A9,A7,A6=false;for(var A5=0;A5<A3;A5++){A7=Ar[A5];if(!A7.deleted){A9=I(A7,this);if(!isNaN(A9)){if(A6==false){A4=A2=A9;A6=true;}else{A4=Math.max(A9,A4);A2=Math.min(A9,A2);}As+=A9;}}}var At=A8*As/Az,Aw=At/A0,Ax=(A0<Aw)?A0:Aw;A4=A8*A4/Az;A2=A8*A2/Az;var Av=A4/(Ax*Ax);var Au=A2/(Ax*Ax);Av=(Av>1)?Av:(1/Av);Au=(Au>1)?Au:(1/Au);A1=Math.max(Av,Au);}else{A1=-1;}return A1;}function d(A2,BE,A6,Av,BG){var A7,A3,A0=A2.r,A9=A0.length,Az,BB,A4,BF=false;if(A9==0){return ;}if(A6<BE.h){Az=A6;BB=BE.h;A4=BE;}else{Az=BE.h;BB=A6;var A4=h(BE);AU(A4);BF=true;}var Ay=A4.x,Ax=A4.y,As={x:Ay,y:Ax,w:Az,h:BB};var A5=W.call(this,A0[0]);for(var BA=0;BA<A9;BA++){var BD,Au,A1;BD=A0[BA];if(BD.deleted){if((BG==true&&BF!=true)||(BG==false&&BF==true)){BD.size={x:Ax,y:Ay,w:0,h:0};}else{BD.size={x:Ay,y:Ax,w:0,h:0};}continue;}var A8=I(BD,this);A3=(Av<=0||BD.deleted)?0:Math.ceil(BB*A8/Av);A7=Az;if(BD.entityChildren!==undefined){if(A8<Av){if(BA==0){if(A5>1){A3-=(A5>>1);}else{A3--;}}else{if(BA<A9-1){if(A5>1){A3-=A5;}else{A3--;}}else{A3=BB+A4.y-Ax;}}}var Aw={x:Ay,y:Ax,w:A7,h:A3};Au=AD(Aw,As);if((BG==true&&BF!=true)||(BG==false&&BF==true)){AU(Aw);AU(Au);}if(V(Au)){BD.size=Au;}else{BD.size={x:Au.x,y:Au.y,w:0,h:0};}A1=Math.min(Au.w,Au.h);var At=this;var Ar=BD.entityChildren.slice(0);Ar.sort(function BC(BI,BH){var BK=I(BI,At);var BJ=I(BH,At);if(isNaN(BK)){if(isNaN(BJ)){return 0;}return 1;}else{if(isNaN(BJ)){return -1;}return BK<BJ?1:-1;}return 0;});Aq.call(this,Ar,{r:[]},A1,Aw);Ax+=A3+A5;}else{if(A8<Av){if(BA==0||BA==A9-1){if(A5>1){if(A3>(A5>>1)){A3-=(A5>>1);}}else{if(A3>1){A3--;}}}else{if(A3>A5){A3-=A5;}}}A7=Math.max(0,A7);A3=Math.max(0,A3);var Au=AD({x:Ay,y:Ax,w:A7,h:A3},As);Au.x=Ay;Au.y=Ax;Ax+=A3+A5;if(Ax>=A4.y+BB){Au.h=A4.y+BB-Au.y;}if((BG==true&&BF!=true)||(BG==false&&BF==true)){Au=AU(Au);}if(V(Au)){BD.size=Au;}else{BD.size={x:Au.x,y:Au.y,w:0,h:0};}}}}function P(A0,BB){var At=0,Ar=A0.r,A4=Ar.length;if(A4==0){return ;}var A5,A2=Ar[0].parentEntity,Ay=A2.entityChildren,Av=Ay.length;for(var A6=0;A6<A4;A6++){var A8=Ar[A6],Aw=I(A8,this);if(!A8.deleted&&Aw>0){At+=Aw;}}if(A0.t===undefined){var Az=0;for(var A6=0;A6<Av;A6++){var A8=Ay[A6],Aw=I(A8,this);if(!A8.deleted&&Aw>0){Az+=Aw;}}A0.t=Az;}var A8=Ar[0],A1=W.call(this,A8),As={x:0,y:0,w:0,h:0};if(A8==this.root){A5=this.heatMapSize.w*this.scaleFactor*this.heatMapSize.h*this.scaleFactor;As.w=this.heatMapSize.w*this.scaleFactor;As.h=this.heatMapSize.h*this.scaleFactor;}else{if(A2==this.root){A5=this.heatMapSize.w*this.scaleFactor*this.heatMapSize.h*this.scaleFactor;As.w=this.heatMapSize.w*this.scaleFactor;As.h=this.heatMapSize.h*this.scaleFactor;}else{var BD=A2.size;A5=BD.w*BD.h;As=h(BD);}if(A0.t==0){A5=0;}else{A5*=At/A0.t;}}var Ax=BB.w,A7=BB.h,BC=false;if(BB.h<BB.w){}else{BC=true;AU(BB);AU(As);var A9=Ax;Ax=A7;A7=A9;}if((As.x<BB.x)||(As.x+As.w>BB.x+BB.w)){if(A1>1){Ax+=(A1>>1);}}if((As.y<BB.y)||(As.y+As.h>BB.y+BB.h)){if(A1>1){A7+=(A1>>1);}}var A3=A7==0?0:Math.min(BB.w,Math.ceil(A5/A7));if(At<A0.t&&At>0){if(BB.x+A3<As.x+As.w){if(A1>1){A3-=(A1>>1);}else{A3--;}}}d.call(this,A0,BB,A3,At,BC);var BA=BB.x+A3,Au=BB.w-A3;if(At<A0.t&&At>0){if(BB.x+A3<As.x+As.w){if(A1>1){BA+=A1;Au-=A1;}else{BA++;Au--;}}}BB.x=BA;BB.w=Math.max(0,Au);if(BC){AU(BB);}}function q(At){if(At==null){return[];}var Ar=At.slice(0),Av=0,As=Ar.length;Ar.t=[];for(var Au=0;Au<As;Au++){var Aw=Ar[Au],Ax=I(Aw,this);if(Aw.deleted||isNaN(Ax)||Ax<=0){Ar.splice(Au,1);Au--;As--;continue;}Av+=Ax;Ar.t[Au]=Av;}return Ar;}function Ah(A0,BC,A2,BI){var BJ=[[this,A0,BC,A2,BI]];while(BJ.length){var Aw=BJ.pop();var BE=Aw[0];A0=Aw[1];BC=Aw[2];A2=Aw[3];BI=Aw[4];var BG=A0[0],A8=W.call(BE,BG),BA,BD,Au,Av,Ay,BM=false,A9=A2-BC+1,Ax=(A9>2?((A9-1)>>1):(A9>>1))+BC,A6;A6=h(BI);if(A6.w>A6.h){}else{AU(A6);BM=true;}BA=h(A6);BD=h(A6);if(BC==A2){BG=A0[BC];S.call(BE,BG,A6,BM,BJ);continue;}if(BC+1==A2){BG=A0[BC];Au=I(BG,BE);BG=A0[A2];Av=I(BG,BE);}else{if(BC==0){Au=A0.t[Ax-1];}else{Au=A0.t[Ax-1]-A0.t[BC-1];}if(Ax==0){Av=A0.t[A2];}else{Av=A0.t[A2]-A0.t[Ax-1];}}Ay=Au/(Au+Av);BA.w=Math.ceil(BA.w*Ay);if(BA.w<BI.w){if(A8>1){if(BA.w>(A8>>1)){BA.w-=(A8>>1);}}else{if(BA.w>1){BA.w--;}}}if(BC+1==A2){BD.w-=BA.w+A8;BD.x+=BA.w+A8;BG=A0[BC];S.call(BE,BG,BA,BM,BJ);BG=A0[A2];S.call(BE,BG,BD,BM,BJ);continue;}var BO=h(A6),A1,A5,At=0,BH=-1,BB=1,A7;if(Ax>BC){var Az=h(BA);if(BM){AU(Az);}BJ.push([BE,A0,BC,Ax-1,Az]);}BO.w-=BA.w+A8;BO.x+=BA.w+A8;BD.w=BO.w;BD.x=BO.x;A1=BO.w/BO.h;BG=A0[Ax];A7=I(BG,BE);A5=A7/Av;for(var BF=Ax;BF<=A2;BF++){BG=A0[BF];At+=I(BG,BE);if(BF==A2-1){continue;}var As=At/Av,BN=A7/At,BL=As/BN*A1;if(BL>=1){if(BB<1&&BB*BL>1){BH=(BF==A2)?BF-2:BF-1;}else{BH=BF;}break;}BB=BL;}BH=BH<0?A2:BH;var A4,A3,BK;if(Ax==0){A4=A0.t[BH];}else{A4=A0.t[BH]-A0.t[Ax-1];}A3=Math.ceil(BO.w*(A4/Av));BK=Math.ceil(BO.h*(A7/A4));if(A3<BO.w){if(A8>1){if(A3>(A8>>1)){A3-=(A8>>1);}}else{if(A3>1){A3--;}}}if(BK<BO.h){if(A8>1){if(BK>(A8>>1)){BK-=(A8>>1);}}else{if(BK>1){BK--;}}}var Ar={x:BO.x,y:BO.y,w:A3,h:BK};BG=A0[Ax];S.call(BE,BG,Ar,BM,BJ);if(Ax<BH){BO.y+=BK+A8;BO.w=A3;BO.h-=BK+A8;if(BM){AU(BO);}BJ.push([BE,A0,Ax+1,BH,BO]);}if(BH<A2){BD.x+=A3+A8;BD.w-=A3+A8;if(BM){AU(BD);}BJ.push([BE,A0,BH+1,A2,BD]);}}}function S(Av,Ay,Ax,Aw){var At=h(Ay);if(Ax==true){AU(At);}if(V(At)){Av.size=At;}else{Av.size={x:At.x,y:At.y,w:0,h:0};}var Au=Av.entityChildren;if(Au!==undefined){var Ar=q.call(this,Au),As=Ar.length;if(As>0&&Aw){Aw.push([this,Ar,0,As-1,At]);}}}function AZ(Ay,A7){var A8=[[this,Ay,A7]];while(A8.length){var As=A8.pop();var A3=As[0];Ay=As[1];A7=As[2];if(Ay==null||Ay.length==0){continue;}var Ax=0,A6=Ay[0],BA,A0=W.call(A3,A6),A9=false,A2=Ay.length,Av,Au,Aw,A5;for(var A4=0;A4<A2;A4++){A6=Ay[A4],BA=I(A6,A3);if(!A6.deleted&&BA>0){Ax+=BA;}}if(A7.w<A7.h){}else{A9=true;AU(A7);}Aw=A7.w;A5=A7.h;Av=A7.x;Au=A7.y;for(var A4=0;A4<A2;A4++){A6=Ay[A4],BA=I(A6,A3);if(!A6.deleted&&BA>0){var A1,Az;Az=Ax<=0?0:Math.ceil(BA/Ax*A5);A1=Aw;if(BA<Ax){if(A4==0||A4==A2-1){if(A0>1){if(Az>(A0>>1)){Az-=(A0>>1);}}else{if(Az>1){Az--;}}}else{if(Az>A0){Az-=A0;}}}A1=Math.max(0,A1);Az=Math.max(0,Az);var At={x:Av,y:Au,w:A1,h:Az},Ar=AD(At,A7);Au+=Az+A0;if(Au>=A7.y+A5){Ar.h=A7.y+A5-Ar.y;}if(A9){AU(Ar);}if(V(Ar)){A6.size=Ar;}else{A6.size={x:Ar.x,y:Ar.y,w:0,h:0};}if(A6.entityChildren!==undefined){A8.push([A3,A6.entityChildren,Ar]);}}else{A6.size={};if(A9){A6.size={x:Au,y:Av,w:0,h:0};}else{A6.size={x:Av,y:Au,w:0,h:0};}continue;}}if(A9){AU(A7);}}}function AK(A9,A0,Ax,Ar,Au,Az,A5){if(Au.entityChildren!==undefined){var Ay=Au.parentEntity,Aw=true,A1=false,As=[],A6=Au.entityChildren,A3=A6.length;for(var A4=0;A4<A5;A4++){As[A4]={count:0,allChildrenCount:0,positiveCount:0};}for(var A4=0;A4<A3;A4++){var Av=A6[A4];AK(A9,A0,Ax,Ar,Av,Az,A5);if(!Av.deleted){Aw=false;}if(Av.entityChildren===undefined){if(Av.deleted){A1=true;}}else{if(Av.hasChildDeleted){A1=true;}}if(!Av.deleted){F(Au,Av,As,Az,A5);}}Au.deleted=Aw;Au.hasChildDeleted=A1;for(var A4=0;A4<A5;A4++){var A8=Au.aggValues[A4];if(A8==null){A8={};Au.aggValues[A4]=A8;}var A7=As[A4];A8.total=A7.total;A8.avg=A7.count==0?0:A7.avgTotal/A7.count;A8.geomAvg=A7.positiveCount==0?NaN:Math.pow(A7.geomProduct,1/A7.positiveCount);A8.min=A7.min;A8.max=A7.max;A8.count=A7.count;A8.positiveCount=A7.positiveCount;}}else{if(Au.deleted){return ;}var A2=I(Au,Az);if(!isNaN(A2)){if(isNaN(Az.smax)){Az.smax=Az.smin=A2;}else{if(A2>Az.smax){Az.smax=A2;}if(A2<Az.smin){Az.smin=A2;}}}var At=AV(Au,Az);if(!isNaN(At)){if(isNaN(Az.cmax)){Az.cmax=Az.cmin=At;}else{if(At>Az.cmax){Az.cmax=At;}if(At<Az.cmin){Az.cmin=At;}}}}}function F(Av,Ar,Aw,Az,At){var Ax,Ay=Ar.aggValues;if(Ar.entityChildren!==undefined){Ax=AH(Ar,Az.sizeMetricIndex);if(Ax!==null){var As=Ax.count;if(As>0){for(var Au=0;Au<At;Au++){Ax=Aw[Au];H(Ax,Ay[Au]);}}}}else{if(I(Ar,Az)>0&&!Ar.deleted){for(var Au=0;Au<At;Au++){Ax=Aw[Au];k(Ax,Ae(Ar,Au,Az));}}}}function AH(At,As){var Ar=At.aggValues;if(As>=Ar.length){return NaN;}return Ar[As];}function AV(At,As){var Ar=As.colorMetricIndex;return Ae(At,Ar,As);}function I(At,As){var Ar=As.sizeMetricIndex,Au=Ae(At,Ar,As);if(Au<0){As.hasNegativeSizeValue=true;return Math.abs(Au);}return Au;}function AY(At,As){var Ar=As.sizeMetricIndex;return Ae(At,Ar,As);}function Ae(Aw,Au,As){var Ar=Aw.aggValues;if(Au>=Ar.length){return NaN;}var Av=Ar[Au],At=As.aggFunctions[Au];if(Aw.entityChildren!==undefined){switch(At){case Z.Sum:return Av.total;case Z.Avg:return Av.avg;case Z.Cnt:return Av.count;case Z.Max:return Av.max;case Z.Min:return Av.min;case Z.GeoAvg:return(Av.positiveCount>0)?Av.geomAvg:0;default:return Av.total;}}else{if(Av.allChildrenCount==1){return Av.value;}switch(At){case Z.Sum:return Av.total;case Z.Avg:return Av.count==0?0:Av.avgTotal/Av.count;case Z.Cnt:return Av.count;case Z.Max:return Av.max;case Z.Min:return Av.min;case Z.GeoAvg:return Av.positiveCount>0?NaN:Math.pow(Av.geomProduct,1/Av.positiveCount);default:return Av.total;}}}function Am(){if(!isNaN(this.mlmax)||!isNaN(this.mlmin)){if(!isNaN(this.mlmax)){this.cmax=this.mlmax;if(isNaN(this.mlmin)&&(this.mlmax<this.cmin)){this.cmin=this.mlmax;}}if(!isNaN(this.mlmin)){this.cmin=this.mlmin;if(isNaN(this.mlmax)&&(this.mlmin>this.cmax)){this.cmax=this.mlmin;}}}if(!isNaN(this.mlmax)&&this.cmax>this.mlmax){this.cmax=this.mlmax;}if(!isNaN(this.mlmin)&&this.cmin<this.mlmin){this.cmin=this.mlmin;}this.colorTheme.min=this.cmin;this.colorTheme.max=this.cmax;this.colorTheme.checkMinMax();}function l(Az){var Ay="",Au=this.model,At=Au.ghs.chs.items,As=At.length,Av=At[0].items.length,A1=Au.gts.col;if(Az<0||Az>=Av){return"";}for(var Aw=0;Aw<As;Aw++){var Ax=At[Aw].items[Az].idx;var A0=A1[Aw].es[Ax];var Ar=(A0.oid!==undefined)?A0.oid:A0.id;Ay+=Ar+" ";}return Ay.slice(0,Ay.length-1);}function K(As){var Ar;if(this.props.legendAsc){Ar=this.cmin+(this.cmax-this.cmin)*As/this.legendTickCount;}else{Ar=this.cmax+(this.cmin-this.cmax)*As/this.legendTickCount;}if(this.props.legendRounded){Ar=Math.floor(Ar);}return Ar;}function Al(A9,Aw){var As=A9.level,Au=(A9.index===undefined)?A9.indices[0]:A9.index,A2=0,A3="",BD="",A0=Aw.attSpan,Ar=Aw.model.ghs.rhs.items,BC=Ar[Au].items,A5=Aw.model.gts.row,Az=Aw.model.gvs.items,A8=Az[0]?Az[0].items.length:0,A4,At;for(var A7=0;A7<As;A7++){A4=A5[A7];BD+='<div class="heatmap-inline"><div class = "heatmap-tooltip-gray-bold">'+A4.n+'</div><div class="heatmap-tooltip-gray-bold"><p>:&nbsp;</p></div>';A3="";for(var A6=A2;A6<A2+A0[A7];A6++){var Ay=BC[A6].idx;if(Ay==-1){continue;}A3+=A4.es[Ay].n+" ";}A3=A3.substring(0,A3.length-1);BD+='<div class = "heatmap-tooltip-gray">'+A3+"</div></div>";A2+=A0[A7];}A4=A5[As];BD+='<div class="heatmap-inline"><div class = "heatmap-tooltip-black-bold">'+A4.n+'</div><div class="heatmap-tooltip-black-bold"><p>:&nbsp;</p></div>';A3="";for(var A7=A2;A7<A2+A0[As];A7++){var Ay=BC[A7].idx;if(Ay==-1){continue;}A3+=A4.es[Ay].n+" ";}A3=A3.substring(0,A3.length-1);BD+='<div class = "heatmap-tooltip-black">'+A3+"</div></div>";var BB=Aw.sizeMetricIndex,Av=Aw.colorMetricIndex,A1,Ax;if(BB!=A8){A1=Aw.getMetricName(BB);if(A9.entityChildren!==undefined||Aw.aggregated){var BA=Aw.aggFunctions[BB];A1=x(A1,BA);Ax=AY(A9,Aw);if(isNaN(Ax)){Ax="-";}else{if(Z.Cnt!=BA){At=Aw.getFormatString(BB);Ax=Aw.nf.formatByMask(At,Ax);}}}else{Ax=Az[Au].items[BB].v;}BD+='<div class="heatmap-inline"><div class = "heatmap-tooltip-black-bold">'+A1+'</div><div class="heatmap-tooltip-black-bold"><p>:&nbsp;</p></div>';BD+='<div class = "heatmap-tooltip-black">'+Ax+"</div></div>";}if(A9.entityChildren===undefined&&Av!=A8&&BB!=Av){A1=Aw.getMetricName(Av);if(A9.entityChildren!==undefined||Aw.aggregated){var BA=Aw.aggFunctions[Av];A1=x(A1,BA);Ax=AV(A9,Aw);if(isNaN(Ax)){Ax="-";}else{if(Z.Cnt!=BA){At=Aw.getFormatString(Av);Ax=Aw.nf.formatByMask(At,Ax);}}}else{Ax=Az[Au].items[Av].v;}BD+='<div class="heatmap-inline"><div class = "heatmap-tooltip-black-bold">'+A1+'</div><div class="heatmap-tooltip-black-bold"><p>:&nbsp;</p></div>';BD+='<div class = "heatmap-tooltip-black">'+Ax+"</div></div>";}for(var A7=0;A7<A8;A7++){if(A7==BB){continue;}if(A7==Av&&A9.entityChildren===undefined&&BB!=Av){continue;}A1=Aw.getMetricName(A7);if(A9.entityChildren!==undefined||Aw.aggregated){var BA=Aw.aggFunctions[A7];A1=x(A1,BA);Ax=Ae(A9,A7,Aw);if(isNaN(Ax)){Ax="-";}else{if(Z.Cnt!=BA){At=Aw.getFormatString(A7);Ax=Aw.nf.formatByMask(At,Ax);}}}else{Ax=Az[Au].items[A7].v;}BD+='<div class="heatmap-inline"><div class = "heatmap-tooltip-gray-bold">'+A1+'</div><div class="heatmap-tooltip-gray-bold"><p>:&nbsp;</p></div>';BD+='<div class = "heatmap-tooltip-gray">'+Ax+"</div></div>";}return BD;}function x(At,Ar){var As;switch(Ar){case Z.Sum:As="Sum of {0}";break;case Z.Avg:As="Average of {0}";break;case Z.Cnt:As="Count of {0}";break;case Z.Max:As="Maximum of {0}";break;case Z.Min:As="Minimum of {0}";break;case Z.GeoAvg:As="Geometry Average of {0}";break;default:As="Sum of {0}";}return As.replace("{0}",At);}function u(Av,Ar){if(Av.eventOwner==Ar){return ;}var As=mstrmojo.dom,Au=[As.TOUCHSTART,As.TOUCHMOVE,As.TOUCHEND,As.TOUCHCANCEL];for(var At=0;At<Au.length;At++){if(Au[At]==""){continue;}if(document.createTouch){Av["on"+Au[At]]=function(Ay){var Aw=document.createEvent("TouchEvent"),Ax=Ay.touches[0];if(!Ax){Ax={};}Aw.initTouchEvent(Ay.touches,Ay.targetTouches,Ay.changedTouches,Ay.type,Ay.view,Ax.screenX,Ax.screenY,Ax.clientX,Ax.clientY,Ay.ctrlKey,Ay.altKey,Ay.shiftKey,Ay.metaKey);Ar.dispatchEvent(Aw);};}else{Av["on"+Au[At]]=function(Ax){var Aw=document.createEvent("MouseEvent");Aw.initMouseEvent(Ax.type,Ax.bubbles,Ax.cancelable,Ax.view,Ax.detail,Ax.screenX,Ax.screenY,Ax.clientX,Ax.clientY,Ax.ctrlKey,Ax.altKey,Ax.shiftKey,Ax.metaKey,Ax.button,Ax.relatedTarget);Ar.dispatchEvent(Aw);};}}Av.eventOwner=Ar;}mstrmojo.VisHeatMap=mstrmojo.declare(mstrmojo.AndroidVis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisHeatMap",scrollerConfig:{bounces:false,showScrollbars:false,useTranslate3d:true,vScroll:true,hScroll:true,offset:{y:{start:0,end:0},x:{start:0,end:0}},origin:{x:0,y:0}},selectedStyle:"background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #058CF5), color-stop(1, #015DE6));color:#FFFFFF;",selectedClass:"",insertedStyles:[],LayoutProperties:{},userDefinedThresholdForNonFlashMode:false,userDefinedThresholdForFlashMode:false,userDefinedThreshold:false,highlightBoxWidth:3,waitIconString:window.getLocaleString?window.getLocaleString("LOADING","Loading"):mstrmojo.desc("8445","Loading"),markupString:'<div id="{@id}" class="mstrmojo-{@cssClass}" style="background-color:#333333;width:{@width}px;height:{@height}px; left:{@left}px; top:{@top}px; z-index: {@zIndex}; position:absolute;" mstrAttach:mousedown,mouseup,mousemove,click><div class="heatmap-canvas-outer-container" style="padding: {@LayoutProperties.Padding}px; height:{@heatMapSize.h}px; width:{@heatMapSize.w}px"><div id ="{@id}-heatmap-canvas-container" class="heatmap-canvas-container" style="left: {@LayoutProperties.Padding}px; top: {@LayoutProperties.Padding}px; height:{@heatMapSize.h}px; width:{@heatMapSize.w}px"><div><div></div><div class="heatmap-selection-highlight-box heatmap-round-corner" style="border: {@highlightBoxWidth}px solid white;"></div></div></div></div><div class="heatmap-legend" style="left:{@legendSize.x}px; top:{@legendSize.y}px; height:{@legendSize.h}px; width:{@legendSize.w}px"><div  class="heatmap-size-legend"><div class="heatmap-size-legend-title">Rectangle Size:</div><div id="{@id}-color-legend-ticker" class="heatmap-size-legend-label" ></div></div><div  class="heatmap-color-legend"><div class="heatmap-color-legend-title">Rectangle Color:</div><table cellpadding="4" class="heatmap-color-legend-label"><tbody><tr><td class="heatmap-color-legend-label-td"></td></tr></tbody></table><div style="position:relative;"><canvas id="{@id}-color-legend-band" class="heatmap-color-legend-band"></canvas><div id="{@id}-legend-tooltip" class="heatmap-color-legend-tooltip"></div></div></div><div id="{@id}-editor-div" class="heatmap-editor-button" style="width: {@LayoutProperties.EditButtonWidth}px; height:{@LayoutProperties.EditButtonHeight}px; right:{@LayoutProperties.EditButtonRight}px"></div></div><span id="textSpan" class="heatmap-measure-text"></span><div class="mojo-overlay-wait" style="display: -webkit-box; -webkit-box-align:center; -webkit-box-pack:center; position: absolute; left: -100000px; top: -100000px"><div class="overlay"></div><div style="width:{@LayoutProperties.WaitIconWidth}px; height:{@LayoutProperties.WaitIconHeight}px; background-color: black; opacity: 0.8; display: -webkit-box"><div style="display: -webkit-box; -webkit-box-align: center; -webkit-box-pack: center; -webkit-box-flex:1;  margin: {@LayoutProperties.WaitIconMargin}px; border: 1px solid white; color: white; font-family: Helvetica; font-weight: bold; font-size:{@LayoutProperties.WaitIconFontSize}pt">{@waitIconString}</div></div></div><div></div><div id="{@id}-css" style="display:none"></div></div>',markupSlots:{canvas:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0].childNodes[0];},canvasContainer:function(){return this.domNode.childNodes[0].childNodes[0];},canvasOuterContainer:function(){return this.domNode.childNodes[0];},scrollNode:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0];},selectionHighlightBox:function(){return this.domNode.childNodes[0].childNodes[0].childNodes[0].childNodes[1];},legend:function(){return this.domNode.childNodes[1];},sizeLegend:function(){return this.domNode.childNodes[1].childNodes[0];},sizeLegendTitle:function(){return this.domNode.childNodes[1].childNodes[0].firstChild;},sizeLegendLabel:function(){return this.domNode.childNodes[1].childNodes[0].lastChild;},colorLegend:function(){return this.domNode.childNodes[1].childNodes[1];},colorLegendTitle:function(){return this.domNode.childNodes[1].childNodes[1].firstChild;},colorLegendLabel:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[1];},colorLegendBand:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[2].firstChild;},legendTooltip:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[2].childNodes[1];},editorButton:function(){return this.domNode.childNodes[1].lastChild;},textSpan:function(){return this.domNode.childNodes[2];},waitIcon:function(){return this.domNode.childNodes[3];},infoBoxPuppet:function(){return this.domNode.childNodes[4];},cssDiv:function(){return this.domNode.lastChild;}},addCSSToHead:function(){var Ar={text:".heatmap-popup-panel-title {  font-size: "+Ap.call(this,22,true)+"pt !important;  height: "+Ap.call(this,65,true)+"px !important;}.heatmap-gray-label {        padding-bottom: "+Ap.call(this,7,true)+"px !important;        font-size: "+Ap.call(this,14,true)+"pt !important;  height: "+Ap.call(this,32,true)+"px !important;  padding-left: "+Ap.call(this,22,true)+"px !important;  line-height: "+Ap.call(this,40,true)+"px !important;}.heatmap-tree-text {  font-size: "+Ap.call(this,18,true)+"pt !important;  line-height: "+Ap.call(this,65,true)+"px !important;}.heatmap-tree-div {  font-size: "+Ap.call(this,18,true)+"pt !important;  line-height: "+Ap.call(this,40,true)+"px !important;}.heatmap-tree-button {  font-size: "+Ap.call(this,16,true)+"pt !important;}.heatmap-apply-button > .mstrmojo-Button-text {  font-size: "+Ap.call(this,14,true)+"pt !important;  line-height: "+Ap.call(this,24,true)+"px !important;   height: "+Ap.call(this,24,true)+"px !important; }.heatmap-tree.root > .heatmap-tree-div > div {  font-size: "+Ap.call(this,14,true)+"pt !important;  line-height: "+Ap.call(this,40,true)+"px !important;  height: "+Ap.call(this,40,true)+"px !important;}.heatmap-one-level-1 {  font-size: "+Ap.call(this,14)+"pt !important;}.heatmap-multi-level-1 {  font-size: "+Ap.call(this,24)+"pt !important;}.heatmap-two-level-2 {  font-size: "+Ap.call(this,14)+"pt !important;}.heatmap-multi-level-2 {  font-size: "+Ap.call(this,20)+"pt !important;}.heatmap-multi-level-3 {  font-size: "+Ap.call(this,10)+"pt !important;}.heatmap-size-legend {  font-size: "+Ap.call(this,12)+"pt !important;}.heatmap-color-legend {  font-size: "+Ap.call(this,12)+"pt !important;}.heatmap-color-legend-label {  font-size: "+Ap.call(this,10)+"pt !important;}.heatmap-color-legend-tooltip {  font-size: "+Ap.call(this,12)+"pt !important;}.heatmap-legend {  font-size: "+Ap.call(this,12)+"pt !important;}.heatmap-editor-button {  font-size: "+Ap.call(this,12)+"pt !important;}.heatmap-tooltip-gray-bold {  font-size: "+Ap.call(this,14)+"pt !important;}.heatmap-tooltip-gray {  font-size: "+Ap.call(this,14)+"pt !important;}.heatmap-tooltip-black-bold {  font-size: "+Ap.call(this,14)+"pt !important;}.heatmap-tooltip-black {  font-size: "+Ap.call(this,14)+"pt !important;}"};this.addAdjustedClassToDocument(Ar.text);},addAdjustedClassToDocument:function(Av){var At=Av.indexOf(".");if(At==-1){return ;}var Aw=document.getElementsByTagName("head")[0];this.CSSParent=Aw;for(var Ar=At;Ar<Av.length;){var Au=Ar+Av.substring(Ar).indexOf("}");if(Au==-1){break;}var As=document.createElement("style");As.type="text/css";As.innerHTML=Av.substring(Ar,Au+1);this.insertedStyles.push(As);Aw.appendChild(As);Ar=Au+1;}},isMultipleDPIEnabled:function(){var Av=this.xtabModel,Ar=(Av&&Av.docModel),As=false,Ax=false;if(Ar){As=Ar.zt&&(Ar.zt==2);var Aw=(Ar&&Ar.defn&&Ar.defn.layouts),Au;var At;for(At in Aw){if(Aw[At].loaded){Au=Aw[At];break;}}if(Au&&Au.hasOwnProperty("fch")){Ax=Au.fch;}}if(As&&Ax){return true;}else{return false;}},init:function(As){if(this._super){this._super(As);}var Ar=document.createElement("canvas");browserSupportsHtml5=Ar.getContext;if(!browserSupportsHtml5){this.error=window.getLocaleString?window.getLocaleString("YOUR_BROWSER_NOT_SUPPORT_HTML5","Your browser does not support HTML5"):mstrmojo.desc(8126,"Your browser does not support HTML5");return ;}},preBuildRendering:function(){delete this.error;if(this._super){this._super();}this.dpiAdjusted=true;this.DPI=mstrMobileApp.getDeviceDPI();if(mstrMobileApp.getDeviceDPIX){this.DPIX=mstrMobileApp.getDeviceDPIX();}else{this.DPIX=149;}if(this.isMultipleDPIEnabled()){this.enableMultiDPI=true;}else{this.enableMultiDPI=false;}this.adjustLocalDPI();this.addCSSToHead();this.zIndex=null;this.loadDefinedFormat();g.call(this);Ac.call(this);if(!this.model){var As=window.getLocaleString?window.getLocaleString("NO_MODEL_PROVIDED","No model provided"):mstrmojo.desc(8426,"No model provided");this.error=As;return ;}var Ar=this.model.err||this.model.eg;if(Ar){this.error=Ar;return ;}N.call(this);if(this.userDefinedThreshold){this.isUsingDefaultColorTheme=false;this.isUsingSavedColorTheme=true;this.colorTheme.isDefault=false;}else{this.isUsingDefaultColorTheme=true;this.isUsingSavedColorTheme=false;this.colorTheme.isDefault=true;}var Ar=this.model.err||this.model.eg;if(Ar){this.error=Ar;return ;}An.call(this);this.calculateValuesInTree();AE.call(this);Am.call(this);this.nf=mstrmojo.num;if(this.editorDialog){this.editorDialog.destroy();this.editorDialog=null;}},displayColorLegend:function(){return this.isUsingDefaultColorTheme||(this.userDefinedThresholdForFlashMode&&!this.userDefinedThresholdForNonFlashMode);},createInfoBox:function(){var Ar='<div id="'+this.id+'-infobox" class="heatmap-infobox" style="position:absolute; left:0px; top:0px;"><div class="heatmap-highlight-box heatmap-round-corner" style="border: '+this.highlightBoxWidth+'px solid white;"></div><div class="heatmap-shadow-box heatmap-round-corner"></div><div class="heatmap-triangle"></div><div class="heatmap-tooltip-box heatmap-round-corner" style="max-width: '+document.body.offsetWidth+"px; max-height: "+document.body.offsetHeight+'px; "></div><div class="heatmap-delete-button"></div><div class="heatmap-tooltip-shelter heatmap-round-corner"></div></div>';var As=document.createElement("div");As.innerHTML=Ar;this.infoBox=As.childNodes[0];this.highlightBox=this.infoBox.childNodes[0];this.shadowBox=this.infoBox.childNodes[1];this.triBox=this.infoBox.childNodes[2];this.tooltipBox=this.infoBox.childNodes[3];this.deleteButton=this.infoBox.childNodes[4];this.shelter=this.infoBox.childNodes[5];As.style.cssText="position: absolute; left: 0px; top: 0px";u(As,this.infoBoxPuppet);document.body.appendChild(As);},postBuildRendering:function AS(){if(this.error===""){return ;}else{if(this.error){me.renderErrorMessage(this.error);return ;}}var Au=this;var At=this.controller.onorientationChange;this.controller.onorientationChange=function(){At.call(Au.controller);Au.onorientationChange();};this._onorientationChange=At;this.enableGlobalDismiss();this.setupScroller();if(this._super){this._super();}var As=this._tsCallback;this._tsCallback=function(Ay){if(Au.isInfoWindowDisplayed()){Au.infoWindowMode=true;}else{Au.infoWindowMode=false;}As.call(Au,Ay);};var Ax=mstrmojo.dom.attachEvent,Av=mstrmojo.dom.detachEvent,Ar=mstrmojo.dom.TOUCHSTART;Av(this._tn,Ar,As);Ax(this._tn,Ar,this._tsCallback);if(this.isUsingSavedColorTheme){this.useSavedColorTheme();}if(this.isUsingDefaultColorTheme){this.useDefaultColorTheme();}try{this.initCanvas();}catch(Aw){this.renderErrorMessage(Aw);return ;}this.renderLegend();if(!this.infoBox){this.createInfoBox();}if(this.props.delButtonEnabled){this.deleteButton.style.display="block";}if(this.previousSelected&&this.previousSelected.parentEntity){this.highlightEntity(this.selectionHighlightBox,this.previousSelected);}},unrender:function(){Ak.call(this);if(this._scroller){this._scroller.detachEventListener(this._scrollMovedHandler);this._scroller.detachEventListener(this._scrollDoneHandler);}this.disableGlobalDismiss();var At=mstrmojo.dom.attachEvent,As=mstrmojo.dom.detachEvent,Ar=mstrmojo.dom.TOUCHSTART;As(this._tn,Ar,this._tsCallback);if(this.infoBox&&this.infoBox.parentNode&&this.infoBox.parentNode.parentNode){this.infoBox.parentNode.parentNode.removeChild(this.infoBox.parentNode);}delete this.infoBox;delete this.editorDialog;if(this.canvasObject){this.canvasObject.unrender();}if(this._super){this._super();}},hasPageBy:function Ag(){if(this.model&&this.model.phs&&this.model.phs.show){return true;}return false;},getFirstInfowindow:function L(){var Av=this,At=Av.model,Au=Av.xtabModel,Ar=(Au&&Au.docModel),Ax=At&&At.gts&&At.gts.row,Aw;if(Ax&&Ax.length>0){Aw=Ax[0]&&Ax[0].sc&&Ax[0].sc.tks;}if(Ar&&Aw){ifws=Ar.getTargetInfoWin(Aw);if(ifws&&ifws.length){var As=Ar.getInfoWinByKey(ifws[0]);var Ay=As&&(As.id+"_ifw");return mstrmojo.all[Ay];}}},isInfoWindowDisplayed:function(){var Ar=this.getFirstInfowindow();if(Ar){Ar=Ar.domNode;}if(!Ar){return false;}if(Ar.style.display=="block"){return true;}else{return false;}},globalListener:function(){var Ar=window.heatMap;if(!Ar){return ;}Ar.hideInfoBox();if(!Ar.selectAll){Ar.doSelection(Ar.previousSelected);}},addGlobalListener:function(){window.heatMap=this;var Ar=document.getElementsByClassName("mstrmojo-DocLayoutViewer-layout")[0];if(Ar){Ar.addEventListener(mstrmojo.dom.TOUCHSTART,window.heatMap.globalListener,false);}},removeGlobalListener:function(){var Ar=document.getElementsByClassName("mstrmojo-DocumentView")[0];if(Ar){Ar.removeEventListener("click",this.globalListener,false);}delete window.heatMap;},addCurtain:function(){var As=document.getElementsByClassName("mstrmojo-DocLayoutViewer-layout")[0];var At=document.createElement("div"),Ar=this;At.style.width=As.offsetWidth+"px";At.style.height=As.offsetHeight+"px";At.style.position="absolute";At.style.zIndex=-1;At.id=this.id+"curtain";At.onclick=this.globalListener;As.appendChild(At);},removeCurtain:function(){var Ar=document.getElementById(this.id+"curtain");if(Ar){Ar.parentNode.removeChild(Ar);}},renderErrorMessage:function AN(Au){var At=this.domNode,As=At.parentNode,Av=document.createElement("div"),Ar=document.createElement("div");if(At){Av.style.width=At.offsetWidth-2+"px";Av.style.height=At.offsetHeight-2+"px";Av.style.left=At.offsetLeft+"px";Av.style.top=At.offsetTop+"px";Av.style.zIndex=this.zIndex;}else{Av.style.width=parseInt(this.width)-2+"px";Av.style.height=parseInt(this.height)-2+"px";Av.style.left=this.left;Av.style.top=this.top;Av.style.zIndex=this.zIndex;}Av.style.cssText+="background-color:#F5F5F2; position:absolute; display:-webkit-box; -webkit-box-pack:center; -webkit-box-align:center; -webkit-box-orient:vertical; border-style:solid; border-color:#A7A7A7; border-width:1px; ";Ar.className="mstrmojo-message";Ar.innerText=Au;Av.appendChild(Ar);if(At){As.replaceChild(Av,At);}else{As.appendChild(Av);}},convertDPI:function(At){if(typeof At!="object"){if(typeof At=="number"&&At%1==0){return Ap.call(this,At);}else{return At;}}else{var Ar={};for(var As in At){Ar[As]=this.convertDPI(At[As]);}return Ar;}},adjustLocalDPI:function(){this.LayoutProperties=this.convertDPI(AT);this.LayoutProperties.LegendTickCount=5;this.LayoutProperties.LegendWidthPercent=0.9;this.LayoutProperties.LegendBandAspect=10;this.LayoutProperties.EditorDialogWidth=Ap.call(this,565,true);this.LayoutProperties.EditorDialogHeight=Ap.call(this,574,true);var As=document.body.offsetHeight,Au=this.LayoutProperties.EditorDialogHeight,Ar=As/Au,At=1;if(Ar<1){At=Ar;At*=0.9;this.LayoutProperties.EditorDialogHeight=parseInt(Au*At);}this.LayoutProperties.DeletedListHeight=Ap.call(this,500*At,true);this.LayoutProperties.EditButtonWidth=Ap.call(this,60);this.LayoutProperties.EditButtonHeight=Ap.call(this,40);this.LayoutProperties.EditButtonRight=Ap.call(this,10);},onorientationChange:function(){if(this.editorDialog){var As=this.editorDialog.domNode;if(As&&As.firstChild){var At=As.firstChild,Ar=At.firstChild.firstChild;At.style.marginTop=parseInt((document.body.offsetHeight-this.LayoutProperties.DeletedListHeight-Ar.offsetHeight)/2)+"px";}}},loadDefinedFormat:function(){if(this.defn&&this.defn.fmts){var As=this.defn.fmts,Ar=As&&As.p_fmts&&As.p_fmts.height;if(As.height){this.height=As.height;}if(!this.isFullScreenWidget){if(As.width){this.width=As.width;}}if(As["z-index"]){this.zIndex=As["z-index"];}}},checkErrors:function(){var Ar=this.error;if(Ar){this.renderErrorMessage(Ar);return true;}if(!this.model){var As=window.getLocaleString?window.getLocaleString("NO_MODEL_PROVIDED","No model provided"):mstrmojo.desc(8426,"No model provided");this.renderErrorMessage(As);return true;}var Ar=this.model.err||this.model.eg;if(Ar){this.renderErrorMessage(Ar);return true;}return false;},setupScroller:function(){var Ar=this.scrollerConfig;Ar.scrollEl=this.scrollNode;Ar.offset.x.start=0;Ar.offset.x.end=this.heatMapSize.w*(this.scaleFactor-1);Ar.offset.y.start=0;Ar.offset.y.end=this.heatMapSize.h*(this.scaleFactor-1);if(Ar.origin.x>Ar.offset.x.end){Ar.origin.x=Ar.offset.x.end;}if(Ar.origin.y>Ar.offset.y.end){Ar.origin.y=Ar.offset.y.end;}},refreshLabelInTree:function(){var Ar=function(At,As){if(At==this.root){return ;}var Au=this.getLabelForEntity(At);At.text=Au;At.idx=As;};this.dfs(this.root,Ar,"");},refreshColorInTree:function(){var Ar=function(At){if(At.EntityChildren||At==this.root){return ;}var As;if(this.userDefinedThresholdForNonFlashMode){As=AG.call(this,At.rowIndex);}else{As=M(this.colorTheme.getColor(AV(At,this)));}At.color=As;};this.dfs(this.root,Ar,"");},dfs:function(At,Aw,Au){if(At.deleted){return ;}if(Au===undefined){Aw.call(this,At);}else{Aw.call(this,At,Au);}if(At.entityChildren===undefined){return ;}var Ar=At.entityChildren,As=Ar.length;for(var Av=0;Av<As;Av++){var Ax=Ar[Av];if(Au===undefined){this.dfs(Ax,Aw);}else{var Ay=Au;if(!Ay){Ay=Av.toString();}else{Ay=Ay+":"+Av;}this.dfs(Ax,Aw,Ay);}}},traverseBFS:function AA(){var As=this,Ar=this.textCanvas,Au=function(Aw,Av){},At=function(Aw){var Av=Aw-As.levelToShowText;if(Av>=3){return false;}return true;};},initCanvas:function(){var As=this;this.refreshColorInTree();this.refreshLabelInTree();var Ar={colorTheme:this.colorTheme,placeholder:this.canvas,root:this.root,width:this.heatMapSize.w,height:this.heatMapSize.h,scale:this.scaleFactor,attributes:this.levelAttributes,showMetric:this.props.showMetricValues,labelSetting:this.props.labelSize};this.canvasObject=new mstrmojo.VisHeatMapCanvas(Ar);this.canvasObject.render();this.canvasObject.updateOffsets(this._scroller.origin.x,this._scroller.origin.y);this.canvas=this.canvasObject.domNode;},renderRectangles:function(){this.refreshColorInTree();this.refreshLabelInTree();this.canvasObject.scale=this.scaleFactor;this.canvasObject.offsetX=this._scroller.origin.x;this.canvasObject.offsetY=this._scroller.origin.y;try{this.canvasObject.draw();}catch(Ar){this.renderErrorMessage(Ar);}},renderLegend:function Ai(){if(this.props.showLegend==false){this.editorButton.style.height="";this.editorButton.style.width="";this.editorButton.style.right="";this.editorButton.style.bottom="";this.editorButton.className="heatmap-editor-legend-unshown";this.editorButton.innerHTML="";this.editorButton.style.top="";this.sizeLegend.style.display="none";this.colorLegend.style.display="none";this.legend.style.left="";this.legend.style.top="";this.legend.style.right="0px";this.legend.style.bottom="0px";this.legend.style.zIndex="100";return ;}var Au=window.getLocaleString?window.getLocaleString("EDIT_ALL_CAPITAL","EDIT"):mstrmojo.desc(11158,"EDIT"),BE=window.getLocaleString?window.getLocaleString("HEATMAP_RECT_SIZE","Rectangle Size:"):mstrmojo.desc(10079,"Rectangle Size:"),Az=window.getLocaleString?window.getLocaleString("HEATMAP_RECT_COLOR","Rectangle Color:"):mstrmojo.desc(10080,"Rectangle Color:");this.editorButton.className="heatmap-editor-button";this.editorButton.innerHTML=Au;var Ay=parseInt(this.width),A6=parseInt(this.height),At=this.heatMapSize.h,Aw=window.getComputedStyle(this.editorButton,null),A2=parseInt(Aw.height),A7=parseInt(Aw.width),Av=this.legendSize.h,A1=this.legendSize.w-A7-parseInt(Aw.right),BB=this.getFormatString(this.sizeMetricIndex);this.legend.style.top=this.heatMapSize.h+2*this.LayoutProperties.Padding+"px";this.editorButton.style.top=((Av-A2)>>1)+"px";this.editorButton.style.bottom="";if(this.props.showEditor){A1-=this.LayoutProperties.LegendMenuEditorWidth;}var A3={w:0,h:0},A9={w:0,h:0},A8={w:0,h:0},Ar,A0,As,A5;if(this.props.sizeMetricEnabled){var BF="<span style='font-weight: bold'>"+BE+"</span>";var BD=this.checkMetricValid(this.sizeMetricIndex),A4=this.getMetricName(this.sizeMetricIndex);if(this.hasNegativeSizeValue){A4="Absolute value of "+A4;}if(isNaN(this.smin)){this.smin=0;}if(isNaN(this.smax)){this.smax=0;}var Ax="<div>"+(BD?this.nf.formatByMask(BB,this.smin):"0")+" < </div><div class='heatmap-flex'>"+A4+"</div><div> < "+(BD?this.nf.formatByMask(BB,this.smax):"0")+"</div>";this.sizeLegendTitle.innerHTML=BF;this.sizeLegendLabel.innerHTML=Ax;A8={w:Math.max(this.sizeLegendTitle.offsetWidth,this.sizeLegendLabel.offsetWidth),h:this.sizeLegendTitle.offsetHeight};}else{this.sizeLegend.style.display="none";}if(this.props.colorMetricEnabled&&this.displayColorLegend()){var BC;if(this.props.sizeMetricEnabled){BC=Az+" <span style='font-weight:normal;'>"+this.getMetricName(this.colorMetricIndex)+"</span>";}else{BC="<span style='font-weight:bold'>"+this.getMetricName(this.colorMetricIndex)+"</span>";}Ar=this.LayoutProperties.LegendTickCount;if(isNaN(this.cmin)||this.cmin>=this.cmax){Ar=1;}this.legendTickCount=Ar;As=Math.min(this.LayoutProperties.LegendMaxBandWidth,this.LayoutProperties.LegendWidthPercent*(A1-A8.w));A0=Math.floor((A1-A8.w-As)/3);var BH=this.renderTickLabels(As,BG,Ar);if(A0>=this.LayoutProperties.LegendMinPadding+BH.l+BH.r){As+=BH.l+BH.r;A0-=((BH.l+BH.r)>>1);}else{if(A0<this.LayoutProperties.LegendMinPadding){A0=this.LayoutProperties.LegendMinPadding;var BA=((A1-3*A0)>>1);if(BA>A8.w){As=A1-3*A0-A8.w;}else{A8.w=BA;As=A8.w;}}}A5=Math.min(Math.floor(As/this.LayoutProperties.LegendBandAspect),Math.floor(Av/3))-this.LayoutProperties.LegendBottomPadding;this.colorLegend.style.display="";this.colorLegendTitle.innerHTML=BC;}else{A0=((A1-A8.w)>>1);this.colorLegend.style.display="none";}if(this.props.sizeMetricEnabled){this.sizeLegend.style.left=A0+"px";this.sizeLegend.style.width=A8.w+this.LayoutProperties.LegendGutter+2*this.LayoutProperties.Padding+"px";this.sizeLegend.style.height=Av+"px";}else{this.sizeLegend.style.left="0px";this.sizeLegend.style.width="0px";this.sizeLegend.top="0px";this.sizeLegend.style.height="0px";this.sizeLegendLabel.style.marginTop="0px";A0=((A1-As)>>1);}if(this.props.colorMetricEnabled&&this.displayColorLegend()){if(this.props.sizeMetricEnabled){this.colorLegend.style.left=A8.w+2*A0+"px";}else{this.colorLegend.style.left=A8.w+A0+"px";}this.colorLegend.style.width=As+"px";this.colorLegend.style.height=Av+"px";A3={w:this.colorLegendTitle.offsetWidth,h:this.colorLegendTitle.offsetHeight};var BG=Av-A5-A3.h-2*this.LayoutProperties.LegendBottomPadding;this.colorLegendLabel.style.width=As+"px";this.colorLegendLabel.style.height=BG+"px";this.colorLegendBand.width=As;this.colorLegendBand.height=A5+10;var BH=this.renderTickLabels(As,BG,Ar);this.colorTheme.tooltipInfo=null;this.legendBand={x:BH.l,y:0,w:As-BH.r-BH.l,h:A5};this.colorLegendBand.parentNode.style.width=As+"px";this.colorLegendBand.parentNode.style.height=A5+"px";this.renderGradientBand(this.legendBand);}},renderTickLabels:function z(A5,A2,A7){var A3=A7+1;var Aw=this.colorLegendLabel.firstChild.firstChild,Av=Aw.childNodes,At=Av.length,Au=Aw.lastChild,A4=At-A3,As=this.getFormatString(this.colorMetricIndex);Au.style.display="";Au.style.width="";Au.style.textAlign="center";if(A4<0){for(var A0=0;A0<Math.abs(A4);A0++){var Ay=Au.cloneNode(true);Aw.insertBefore(Ay,Au.nextSibling);Au=Ay;}}else{for(var A0=0;A0<A4;A0++){if(A7==0&&A0==A4-1){Au.style.display="none";break;}Aw.removeChild(Aw.lastChild);}}Aw.firstChild.style.textAlign="left";Aw.lastChild.style.textAlign="right";var Ar=true;if(isNaN(this.cmax)||isNaN(this.cmin)){Ar=false;}for(var A0=0;A0<A3;A0++){Ay=Av[A0];var A6="Null";if(Ar){A6=K.call(this,A0);}Ay.innerHTML='<div style="display: inline-block; overflow: hidden; text-overflow: ellipsis; max-width: 100%; white-space: nowrap;">'+this.nf.formatByMask(As,A6)+"</div>";if(this.props.legendRounded){}}var Az=Aw.firstChild.innerHTML,Ax=Aw.lastChild.innerHTML,A1={w:Aw.firstChild.firstChild.offsetWidth,h:Aw.firstChild.firstChild.offsetHeight};lSize={w:Aw.lastChild.firstChild.offsetWidth,h:Aw.lastChild.firstChild.offsetHeight};left=Math.min(A5/A3,A1.w)>>1,right=Math.min(A5/A3,lSize.w)>>1;return{l:left,r:right};},renderGradientBand:function AL(As){var A0=As.x,Az=As.y,A1=As.w,Aw=As.h,A2=this.colorLegendBand.getContext("2d");A2.clearRect(A0,Az,A1+2,Aw);var At=A2.createLinearGradient(A0,Az,A1+A0,Az);At.addColorStop(0,"#333333");var Ay=this.colorTheme.getGradientFillInfo(this.cmin,this.cmax);var Ax=Ay.c,Ar=Ay.r,Au=Ax.length;for(var Av=0;Av<Au;Av++){At.addColorStop(Ao(Ar[Av],2),M(Ax[Av]));}A2.fillStyle=At;e(A0,Az,A1,Aw,0,A2);A2.fill();},renderHilightedBand:function AW(Au){var Ax=this.legendBand,Aw=this.colorTheme.tooltipInfo[Au],Ar=Ax.x,Ay=Ax.y,At=Ax.w,Av=Ax.h,As=this.colorLegendBand.getContext("2d");this.renderGradientBand(Ax);this.selectedBandIndex=Au;As.strokeStyle="#FFFFFF";As.lineWidth=2;As.strokeRect(Aw.r.x+Ar+1,Ay+1,Aw.r.w-1,Av-3);},getTextSize:function b(Aw,Au,Av,At,Ax){this.textSpan.style="";this.textSpan.style.fontFamily=Au;this.textSpan.style.fontSize=isNaN(Av)?Av:Av+"px";this.textSpan.style.fontWeight=At?"bold":"normal";this.textSpan.style.fontStyle=Ax?"italic":"normal";this.textSpan.innerHTML=Aw;var Ar=this.textSpan.offsetWidth,As=this.textSpan.offsetHeight;return{w:Ar,h:As};},reRender:function AJ(){if(this.model.err||this.model.eg){return ;}if(this._super){this._super();}},useDefaultColorTheme:function(A0){if(this.entitiesWithStates){var Ay=this.entitiesWithStates;for(var Az in Ay){var At=Ay[Az]||[],Av=At.length,As;for(As=0;As<Av;As++){var Aw=At[As];Aw.pathName=undefined;Aw.isExpanded=undefined;Aw.isSelected=undefined;}}}this.entitiesWithStates=undefined;this.dialogScrollerPosition=undefined;var Ax=this.colorTheme,Ar=false;if(Ax.useDefault==false){Ar=true;Ax.isBlend=true;Ax.setDefaultDataProvider();}if(this.scaleFactor!=1){Ar=true;this.scaleFactor=1;}function Au(A1){for(var A2 in A1){var A3=A1[A2];if(typeof A3==="object"){if(Object.keys(A3).length===0){delete A1[A2];}else{Au(A3);}}else{if(A3===J.dftDel){Ar=true;A1[A2]=J.dftUnDel;}else{if(A3===J.usrDel){Ar=true;delete A1[A2];}}}}}Au(this.props.deletedList);this.loadDeleteStatus(this.root,this.props.deletedList);if(Ar){Ax.tooltipInfo=null;this.refreshWidget();}if(A0){A0();}},loadDeleteStatus:function(Av,Ar){if(!Av.entityChildren){if(Ar===J.dftDel||Ar===J.usrDel){Av.deleted=true;}else{delete Av.deleted;}return ;}if((!Ar||Object.keys(Ar).length===0)&&!Av.hasChildDeleted){return ;}var Au=Av.entityChildren;for(var At=0;At<Au.length;At++){var Ax=Au[At];var As=this.getEntityDisplayName(Ax);var Aw=Ar&&Ar[As];this.loadDeleteStatus(Ax,Aw);}},useSavedColorTheme:function(Av){var At=this.colorTheme,As=false;if(At.useDefault==true){As=true;var Au=this.model.vp;if(Au){At.isBlend=((Au.blc===undefined||Au.blc=="true")?true:false);}if(Au.gradientColors){At.createBlendDataProviderFromString(Au.gradientColors);}if(Au.bandColors){At.createBandDataProviderFromString(Au.bandColors);}At.useDefault=false;}if(this.scaleFactor!=1){As=true;this.scaleFactor=1;}function Ar(Aw){for(var Ax in Aw){var Ay=Aw[Ax];if(typeof Ay==="object"){if(Object.keys(Ay).length===0){delete Aw[Ax];}else{Ar(Ay);}}else{if(Ay===J.dftUnDel){As=true;Aw[Ax]=J.dftDel;}else{if(Ay===J.usrDel){As=true;delete Aw[Ax];}}}}}Ar(this.props.deletedList);this.loadDeleteStatus(this.root,this.props.deletedList);if(As){At.tooltipInfo=null;this.refreshWidget();}if(Av){Av();}},getFormatString:function AF(As){var Ar=this.model,At=Ar.gvs.items[0]?Ar.gvs.items[0].items:[],Au=At.length;if(As>=0&&As<Au){var Av=At[As];if(Av.formatstring!==undefined){return Av.formatstring.replace(/\'/g,'"');}return"";}return"";},checkMetricValid:function j(As){var Aw="",Ar=this.model,Au=Ar.ghs.chs.items,Av=Au.length,Ax=Au[0]?Au[0].items.length:0,At=Ar.gts.col;if(As<0||As>=Ax){return false;}return true;},getMetricName:function Af(Ay){var Ax="",Au=this.model,At=Au.ghs.chs.items,As=At.length,Az=Au.gts.col;if(!this.checkMetricValid(Ay)){return X;}for(var Av=0;Av<As;Av++){var Aw=At[Av].items[Ay].idx;var Ar=Az[Av].es[Aw].n;Ax+=Ar+" ";}return Ax.slice(0,Ax.length-1);},getEntityDisplayName:function AC(Ax){var Ar=Ax.level,Au=(Ax.index===undefined)?Ax.indices[0]:Ax.index,A1=0,Az="",As=this.attSpan,Aw=this.model.ghs.rhs.items,Av=Aw[Au].items,Ay=this.model.gts.row[Ar];for(var At=0;At<Ar;At++){A1+=As[At];}Az="";for(var At=A1;At<A1+As[Ar];At++){var A0=Av[At].idx;if(A0==-1){continue;}Az+=Ay.es[A0].n+" ";}Az=Az.substring(0,Az.length-1);return Az;},previousTooltip:null,previousSelected:null,highlightEntity:function(Av,Au){if(!Au||!Av){return ;}var A1=this.canvasContainer.offsetWidth,Aw=this.canvasContainer.offsetHeight,A2=Au.size,A0=this._scroller.origin,At=this.highlightBoxWidth,As=mstrmojo.dom.position(this.canvasContainer,true);var Ar={x:A0.x,y:A0.y,w:A1,h:Aw};var Ay={x:0,y:0,w:Math.ceil(this.heatMapSize.w*this.scaleFactor),h:Math.ceil(this.heatMapSize.h*this.scaleFactor)};var Az={x:A2.x-At,y:A2.y-At,w:A2.w+2*At,h:A2.h+2*At};var Ax=AD(Az,Ay);if(Av==this.highlightBox){Ax=AD(Ax,Ar);this.previousHighlighted=Au;}if(isNaN(Ax.x)){return null;}Ax.x+=(At-A0.x);Ax.y+=(At-A0.y);Ax.w-=2*At;Ax.h-=2*At;if(Av==this.highlightBox){Av.style.left=Ax.x-At+As.x+"px";Av.style.top=Ax.y-At+As.y+"px";Ax.x+=As.x;Ax.y+=As.y;}else{Av.style.left=Ax.x-At+A0.x+"px";Av.style.top=Ax.y-At+A0.y+"px";}Av.style.width=Ax.w+"px";Av.style.height=Ax.h+"px";Av.style.display="block";return Ax;},getLowestLevelRectangle:function(As){target=document.elementFromPoint(As.pageX,As.pageY);var Ar=[];while(!this.isLowestLevelRectangle(target)){target.style.display="none";Ar.push(target);target=document.elementFromPoint(As.pageX,As.pageY);}while(Ar.length){Ar.pop().style.display="block";}return target;},getEntityByTouch:function(Ax,A4){var Av=null;var Au=Ax.pageX,At=Ax.pageY;console.log("#getEntityByTouch#pageX:"+Au+" pageY:"+At);var A0=document.elementFromPoint(Au,At),A2=[];if(!A0){console.log("target is null! at elementFromPoint.");return null;}var Ar=A0;while(!this.isRectangle(A0)&&A0!=this.domNode){A2.push(A0);A0.style.visibility="hidden";A0=document.elementFromPoint(Au,At);if(!A0||A0==Ar){break;}Ar=A0;}if(A4){Ar=A0;while(A0!=this.domNode&&A0.tagName.toLowerCase()!="img"){A2.push(A0);A0.style.visibility="hidden";A0=document.elementFromPoint(Au,At);if(!A0||A0==Ar){break;}Ar=A0;}}var A3=A2.length;while(A2.length>0){var As=A2.pop();As.style.visibility="visible";}if(!A0){console.log("target is null. At backups.");return null;}if(A0!=this.domNode){if(A0.getAttribute("idx")&&!A4){var Av=this.getIdxObjectByTarget(A0);}else{var A1=mstrmojo.dom.position(this.canvas,true),Az=Au-A1.x,Aw=At-A1.y;var Ay={x:Az,y:Aw},Av=this.canvasObject.getEntity(Ay);}}else{}return Av;},getLabelForEntity:function(Ay){if(!this.props.showMetricValues||Ay.entityChildren!==undefined){return this.getEntityDisplayName(Ay);}var Ax=(Ay.index===undefined)?Ay.indices[0]:Ay.index,A0="",Aw=this.sizeMetricIndex,A2=this.colorMetricIndex,A1=this.model.gvs.items,As=A1[0].items.length,Ar,Az,Av=this.getEntityDisplayName(Ay);A0='<span style="font-weight:bold;">';if(Av!==""){A0+=Av+"<br>";}if(Aw!=As){if(Ay.entityChildren!==undefined||this.aggregated){var Au=this.aggFunctions[Aw];Az=I(Ay,this);if(isNaN(Az)){Az="-";}else{if(Z.Cnt!=Au){fs=this.getFormatString(Aw);Az=this.nf.formatByMask(fs,Az);}}}else{Az=A1[Ax].items[Aw].v;}if(Az!==""){A0+=Az+"<br>";}}if(Ay.entityChildren===undefined&&A2!=As&&Aw!=A2){if(Ay.entityChildren!==undefined||this.aggregated){var Au=this.aggFunctions[A2];Az=AV(Ay,this);if(isNaN(Az)){Az="-";}else{if(Z.Cnt!=Au){fs=this.getFormatString(A2);Az=this.nf.formatByMask(fs,Az);}}}else{Az=A1[Ax].items[A2].v;}if(Az!==""){A0+=Az+"<br>";}}A0+='</span><span style="font-weight:normal;">';for(var At=0;At<As;At++){if(At==Aw){continue;}if(At==A2&&Ay.entityChildren===undefined&&Aw!=A2){continue;}if(Ay.entityChildren!==undefined||this.aggregated){var Au=this.aggFunctions[At];Ar=x(Ar,Au);Az=Ae(Ay,At,this);if(isNaN(Az)){Az="-";}else{if(Z.Cnt!=Au){fs=this.getFormatString(At);Az=this.nf.formatByMask(fs,Az);}}}else{Az=A1[Ax].items[At].v;}if(Az!==""){A0+=Az;if(At!==As-1){A0+="<br>";}}}A0+="</span>";return A0;},multiTap:true,touchBegin:function(Ar){},touchTap:function(Az){if(Az.count>=2){if(this.scaleFactor>1){this.scaleFactor=1;this._scroller.offset.x.start=0;this._scroller.offset.x.end=0;this._scroller.offset.y.start=0;this._scroller.offset.y.end=0;this._scroller.scrollTo(0,0,0);this.refreshWidget();}return ;}var A2=Az.target;if(A2==this.infoBoxPuppet){A2=document.elementFromPoint(Az.pageX,Az.pageY);}if(this.touchLegendTooltipValid(Az)){this.showLegendTooltip(Az);}else{this.hideLegendTooltip();}switch(A2){case this.editorButton:A2.style.backgroundColor="rgba(51, 181, 229, 0.6)";var A5=function(){mstrmojo.VisHeatMapAnimation.animate(A2,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};var A1=this;setTimeout(function(){setTimeout(function(){try{A1.popupEditor(A2);}catch(A6){}finally{A5();}},0);},0);return ;case this.deleteButton:if(this.previousTooltip){var Ax=this.props.deletedList;var Aw=this.previousTooltip;var At=[];var As=Aw;do{At.push(this.getEntityDisplayName(As));As=As.parentEntity;}while(As.parentEntity);var A0,A4;for(var Ay=At.length-1;Ay>=0;Ay--){A0=Ax;A4=At.pop();var Ar=Ax[A4];if(!Ar){Ax[A4]={};Ar=Ax[A4];}Ax=Ar;}this.deleteNode(Aw,Ax,A0,A4);this.hideInfoBox();this.refreshWidget();var A3=this.id+"-deleteTree";var Au=mstrmojo.all[A3];if(Au){Au.needRefresh=true;}}this.previousTooltip=null;break;case this.selectionHighlightBox:if(this.hasSelector){this.doSelection(this.previousSelected);break;}else{if(this.hasLinkDrill){var Av=this.getEntityByTouch(Az);this.doLinkDrill(Av);break;}}case this.highlightBox:this.hideInfoBox();var Av=this.previousHighlighted;if(this.hasSelector){if(!this.previousHighlighted.entityChildren){this.doSelection(Av);}}else{if(this.hasLinkDrill){this.doLinkDrill(Av);}}break;default:if(this.isRectangle(A2)){if(this.hasSelector){this.hideInfoBox();var Av=this.getEntityByTouch(Az,true);this.doSelection(Av);}else{if(this.hasLinkDrill){var Av=this.getEntityByTouch(Az);this.doLinkDrill(Av);}else{var Av=this.getEntityByTouch(Az);this.showInfoBox(Av);}}break;}else{if(A2.parentNode==this.infoBox){this.hideInfoBox();}else{this.hideInfoBox();if(!this.selectAll){this.doSelection(this.previousSelected);}}}}},isRectangle:function(Ar){if(this.canvasObject.domNode==Ar.parentNode||(Ar.parentNode&&this.canvasObject.domNode==Ar.parentNode.parentNode)||Ar.tagName.toLowerCase()=="img"){return true;}else{return false;}},isLowestLevelRectangle:function(Ar){if(Ar.getAttribute&&Ar.getAttribute("idx")&&!(Ar.innerHTML)){return true;}else{return false;}},doLinkDrill:function(As){if(!As){return ;}var Ar=this.getActionObj({entity:As,type:AX});if(Ar){this.highlightEntity(this.selectionHighlightBox,As);this.performAction([Ar]);}},getActionObj:function(At){if(!At){return null;}var BB=function(BR,BZ){var BU=null,BY=BZ.length>0&&BZ[0]&&BZ[0].ans,BP=BY&&BY.length>0&&BY[0].dunits;if(BP&&BP.length>0&&BP[0].id){var BO=BP[0].id,BW=this.model.gts.row,BX=BR.level,BV,BT,BM,BN;for(BT=0;BT<=BX;BT++){if(BO===BW[BT].id){BV=BT;break;}}if(!isNaN(BV)){if(BR.level===BV){BN=BR.text;}else{while(BR.parentEntity){BR=BR.parentEntity;if(BR.level===BV){BN=BR.text;break;}}}if(BN!==undefined){var BL=BW[BV].es,BS=BL.length,BQ;for(BQ=0;BQ<BS;BQ++){if(BL[BQ].n===BN){BM=BL[BQ].id;break;}}}if(BN!==undefined&&BM!==undefined){BU={id:BM,n:BN};}}}return BU;};var A1=At.type,A6=At.entity,A9=null;switch(A1){case AX:var Ax=this.model.gts.row,A7=Ax.length,Au=A6.level,Aw;for(var BH=0;BH<=Au;BH++){var BF=Ax[BH];if(BF.lm){for(var BG=0;BG<BF.lm.length;BG++){if(BF.lm[BG].links){break;}}if(BG!=BF.lm.length){Aw=BH;break;}}}var A2=(A6.index===undefined)?A6.indices[0]:A6.index,BJ=this.model.ghs;if(!isNaN(Aw)){var BF=this.model.gts.row[Aw];linkDrillNode={};linkDrillNode.titleInfo=BF;linkDrillNode._e=BF.es[BJ.rhs.items[A2].items[Aw].idx];A9={at:A1,k:this.getModelKey(),node:linkDrillNode};break;}Az=this.firstColLinkDrillIndex;if(!isNaN(Az)){var BA=this.model.gts.col[0],BC=BA.es[Az],A3=BA.lm[Az];if(A3&&A3.links){linkDrillNode={};linkDrillNode.titleInfo=BA;linkDrillNode.mix=Az;A9={at:A1,k:this.getModelKey(),node:linkDrillNode};}break;}break;case s:var A6=At.entity,A0=At.anchor;if(!A6||!A0){break;}if(A6){var BE=this.model,A8=BE.gts.row,A7=A8.length,Ar=BE.ghs.rhs.items,Az=(A6.index===undefined)?A6.indices[0]:A6.index,Ay=Ar[Az].items,BK=[];for(var BH=0;BH<A7;BH++){var BD=A8[BH],As=BD.sc;if(BD.otp!=-1&&As!==undefined){var Av=Ay[BH].idx,A4=BD.es[Av].id,BI=BD.es[Av].n,A5;if(!A4||A4.substring(0,1)==="D"){continue;}if(As.all!="false"&&As.all!=false&&At.needSelectAll){A5=R;}else{A5=BD.es[Av].id;}BK.push({sc:As,es:BI,eid:A5});}}A9={at:A1,k:this.getModelKey(),scObjList:BK,anchor:A0};}break;case p:var A6=At.entity,A0=At.anchor;if(!A6||!A0){break;}if(A6){var BE=this.model,A8=BE.gts.row,A7=A8.length,Ar=BE.ghs.rhs.items,Az=(A6.index===undefined)?A6.indices[0]:A6.index,Ay=Ar[Az].items,BK=[];for(var BH=0;BH<A7;BH++){var BD=A8[BH],As=BD.sc;if(BD.otp!=-1&&As!==undefined){var Av=Ay[BH].idx,A4=BD.es[Av].id,BI=BD.es[Av].n,A5;if(!A4||A4.substring(0,1)==="D"){continue;}if(As.all!="false"&&As.all!=false&&At.needSelectAll){A5=R;}else{A5=BD.es[Av].id;}BK.push({sc:As,es:BI,eid:A5});}}A9={at:A1,k:this.getModelKey(),scObjList:BK,anchor:A0};}break;default:break;}return A9;},getModelKey:function(){return this.model&&this.model.k;},deleteNode:function(Aw,Ar,Av,Au){if(!(Aw.size&&Aw.size.w&&Aw.size.h)){return ;}if(!Aw.entityChildren){Aw.deleted=true;if(Av&&Au){if(Ar===J.dftUnDel||Ar===J.dftDel){Av[Au]=J.dftDel;}else{Av[Au]=J.usrDel;}}return ;}else{Av=Ar;for(var As in Aw.entityChildren){var At=Aw.entityChildren[As];Au=this.getEntityDisplayName(At);var Ax=Av[Au];if(!Ax){Av[Au]={};Ax=Av[Au];}this.deleteNode(At,Ax,Av,Au);}}},toggleSelectAll:function(Ar){var As=this.model.gts.row[Ar.level].sc;if((As&&As.all!="false"&&As.all!=false)||!this.hasGridTarget){if(this.selectAll){this.selectAll=false;}else{this.selectAll=true;}return true;}return false;},doSelection:function(Ar){if(!Ar){return ;}if(Ar==this.previousSelected){if(!this.toggleSelectAll(Ar)){return ;}var As=this.selectionHighlightBox,At={entity:Ar,type:s,needSelectAll:this.selectAll,anchor:As};Au=this.getActionObj(At);if(this.selectAll){this.selectionHighlightBox.style.display="none";delete Au.anchor;}else{this.highlightEntity(this.selectionHighlightBox,Ar);}this.performAction([Au]);}else{this.selectAll=false;var As=this.selectionHighlightBox,At={entity:Ar,type:s,needSelectAll:this.selectAll,anchor:As};this.previousSelected=Ar;this.highlightEntity(this.selectionHighlightBox,Ar);var Au=this.getActionObj(At);this.performAction([Au]);}},getObjectByIdx:function(Ar){if(Ar){var As=Ar.split(":");var Au=this.root;for(var At=0;At<As.length;At++){Au=Au.entityChildren[As[At]];}return Au;}return null;},toggleDeleteButton:function(){if(!this.infoBox){return ;}if(this.props.delButtonEnabled){this.deleteButton.style.display="none";this.props.delButtonEnabled=false;}else{this.deleteButton.style.display="block";this.props.delButtonEnabled=true;}},editorDialog:null,popupEditor:function(Ay){this.hideInfoBox();var A6=this.id;var A0=A6+"-deleteTree";var A5=A6+"-editor";var Az=this;var Ar=0;if(this.props.delButtonEnabled){Ar=1;}var Av=window.getLocaleString?window.getLocaleString("SETTINGS","Settings"):mstrmojo.desc(7831,"Settings"),A4=window.getLocaleString?window.getLocaleString("DELETED_ITEMS","Deleted Items"):mstrmojo.desc(10081,"Deleted Items"),A2=window.getLocaleString?window.getLocaleString("REFRESH_ALL_CAPITAL","REFRESH"):mstrmojo.desc(10378,"REFRESH"),A3=window.getLocaleString?window.getLocaleString("HEATMAP_RTSC","Refresh to saved configuration"):mstrmojo.desc(10082,"Refresh to saved configuration"),A1=window.getLocaleString?window.getLocaleString("HEATMAP_RTDC","Refresh to default configuration"):mstrmojo.desc(10083,"Refresh to default configuration"),A8=window.getLocaleString?window.getLocaleString("CAPITAL_APPLY","APPLY"):mstrmojo.desc(10379,"APPLY"),Au=window.getLocaleString?window.getLocaleString("DELETE_ALL_CAPITAL","DELETE"):mstrmojo.desc(10380,"DELETE"),A7=window.getLocaleString?window.getLocaleString("HEATMAP_ENABLE_DELETED_BUTTON","Enable Delete"):mstrmojo.desc(10085,"Enable Delete"),As=window.getLocaleString?window.getLocaleString("PLEASE_SELECT_ELEMENTS_YOU_WANT_TO_RESTORE","Please select elements that you want to restore"):mstrmojo.desc(10084,"Please select elements that you want to restore"),Aw=window.getLocaleString?window.getLocaleString("IG_CANCEL_BUTTON_TEXT","Cancel"):mstrmojo.desc(221,"Cancel"),Ax=window.getLocaleString?window.getLocaleString("HEATMAP_APPLY_BUTTON","Apply"):mstrmojo.desc(134,"Apply");var At={anchor:this.editorButton,title:"Heat Map",id:A5,anchorOrientation:"h",owner:this,width:this.LayoutProperties.EditorDialogWidth+"px",contentMaxHeight:this.LayoutProperties.DeletedListHeight,defaultIndex:this.props.navigatingIndex,panels:[{title:Av,scriptClass:"mstrmojo.VisHeatMapPopupPanel",width:"100%",height:"100%",children:[{scriptClass:"mstrmojo.Label",text:A2,cssDisplay:"-webkit-box",cssClass:"heatmap-gray-label"},{scriptClass:"mstrmojo.VisHeatMapTree",showIndicators:false,isSelectable:false,cssClass:"simple-tree",cssText:"padding-left:15px;padding-right:15px;",buttonNodeCss:"",items:[{n:A3,buttonNodeWidget:{scriptClass:"mstrmojo.Button",text:A8,cssClass:"heatmap-apply-button",onclick:function(){Az.isUsingSavedColorTheme=true;Az.isUsingDefaultColorTheme=false;var A9=this.domNode;A9.style.backgroundColor="rgba(51, 181, 229, 0.6)";Az.hideInfoBox();Az.hideLegendTooltip();Az._scroller.offset.x.start=0;Az._scroller.offset.x.end=0;Az._scroller.offset.y.start=0;Az._scroller.offset.y.end=0;Az._scroller.scrollTo(0,0,0);var BA=function(){mstrmojo.VisHeatMapAnimation.animate(A9,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};setTimeout(function(){setTimeout(function(){Az.useSavedColorTheme(BA);var BB=mstrmojo.all[A0];if(BB){BB.needRefresh=true;}},0);},0);}}},{n:A1,buttonNodeWidget:{scriptClass:"mstrmojo.Button",text:A8,cssClass:"heatmap-apply-button",onclick:function(){Az.isUsingSavedColorTheme=false;Az.isUsingDefaultColorTheme=true;var A9=this.domNode;A9.style.backgroundColor="rgba(51, 181, 229, 0.6)";Az.hideInfoBox();Az.hideLegendTooltip();Az._scroller.offset.x.start=0;Az._scroller.offset.x.end=0;Az._scroller.offset.y.start=0;Az._scroller.offset.y.end=0;Az._scroller.scrollTo(0,0,0);var BA=function(){mstrmojo.VisHeatMapAnimation.animate(A9,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};setTimeout(function(){setTimeout(function(){Az.useDefaultColorTheme(BA);var BB=mstrmojo.all[A0];if(BB){BB.needRefresh=true;}},0);},0);}}}]},{scriptClass:"mstrmojo.Label",text:Au,cssDisplay:"-webkit-box",cssClass:"heatmap-gray-label"},{scriptClass:"mstrmojo.VisHeatMapTree",isSelectable:true,cssClass:"simple-tree",cssText:"margin-left:15px;margin-right:15px;",showIndicators:false,defaultSelectionStatus:Ar,items:[{n:A7,itemFunction:function(){Az.toggleDeleteButton();}}]},]},{title:A4,scriptClass:"mstrmojo.VisHeatMapPopupPanel",cssText:"position: relative",width:"100%",naviAction:function(){var A9=mstrmojo.all[A0];if(A9){A9.refresh();}},children:[{scriptClass:"mstrmojo.Box",cssText:"padding-left:16px;padding-right:16px; maxHeight:"+parseInt(this.LayoutProperties.DeletedListHeight*0.89)+"px",children:[{scriptClass:"mstrmojo.VisHeatMapTree",height:"100%",heightLimit:parseInt(this.LayoutProperties.DeletedListHeight*0.89),showIndicators:true,showScrollbars:true,id:A0,itemDisplayField:"label",itemChildrenField:"entityChildren",draggable:true,showRoot:true,rootText:As,itemIncludeFunction:function(A9){if(A9&&(A9.deleted||A9.hasChildDeleted)){return true;}else{return false;}},apply:function(BC){var BA=function(){if(this.selectionStatus===1&&this.dataProvider&&this.dataProvider.deleted){this.dataProvider.deleted=false;var BG=this.dataProvider;if(!BG.entityChildren){var BD=[];while(BG.parentEntity){BD.push(Az.getEntityDisplayName(BG));BG=BG.parentEntity;}var BE=Az.props.deletedList;while(BD.length>1){BE=BE[BD.pop()];}var BF=BD.pop();if(BE[BF]===J.dftDel){BE[BF]=J.dftUnDel;}else{delete BE[BF];}}}};var BB=function(BF,BD){BD.apply(BF);if(!BF.childTree){return ;}for(var BE=0;BE<BF.childTree.length;BE++){var BG=BF.childTree[BE];BB(BG,BD);}};BB(this,BA);Az.refreshWidget();var A9=this;window.setTimeout(function(){A9.needRefresh=true;A9.refresh();if(BC){BC();}},50);},dataProvider:Az.root,owner:Az}]},{scriptClass:"mstrmojo.Box",cssText:"background-color:whiteSmoke; position:relative; bottom:0px;font:12pt Roboto,Regular;text-align:center;vertical-align:middle;line-height:55px;border-top: 1px solid rgba(34, 34, 34, 0.18);",height:parseInt(this.LayoutProperties.DeletedListHeight*0.11)+"px",width:"100%",children:[{scriptClass:"mstrmojo.Button",text:Aw,cssClass:"heatmap-tree-button",cssDisplay:"inline-block",cssText:"border-right: 1px solid rgba(34, 34, 34, 0.18); position: absolute; left:0px; top: 0px; height:100%;",width:"49.5%",onclick:function(){var A9=this.domNode;A9.style.backgroundColor="rgba(51, 181, 229, 0.6)";mstrmojo.VisHeatMapAnimation.animate(A9,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});setTimeout(function(){mstrmojo.all[A5].close();},100);}},{scriptClass:"mstrmojo.Button",text:Ax,cssClass:"heatmap-tree-button",cssDisplay:"inline-block",cssText:"position: absolute; right:0px; top:0px; height: 100%",width:"50.5%",postBuildRendering:function(){mstrmojo.all[A0].register(this);},notify:function(A9){this.set("enabled",A9);},onclick:function(){var A9=this.domNode;A9.style.backgroundColor="rgba(51, 181, 229, 0.6)";Az.hideInfoBox();var BA=function(){mstrmojo.VisHeatMapAnimation.animate(A9,"background",{r:51,g:181,b:229,a:0.6},{r:255,g:255,b:255,a:0});};setTimeout(function(){setTimeout(function(){mstrmojo.all[A0].apply(BA);},0);},0);}}]}]}]};this.editorDialog=mstrApp.showDialog(At,"HeatMapEditor");},showWaitIcon:function(As){var Ar=this.waitIcon;Ar.style.display="-webkit-box";Ar.style.left="0px";Ar.style.top="0px";},hideWaitIcon:function(){var Ar=this.waitIcon;Ar.style.left="-100000px";Ar.style.top="-100000px";},clearChildren:function(Ar){var As;if(!Ar){return ;}while(As=Ar.firstChild){Ar.removeChild(As);}},calculateValuesInTree:function(){var Ar=this.model.gvs.items[0]?this.model.gvs.items[0].items.length:0;E.call(this);AK(false,false,true,true,this.root,this,Ar+1);},refreshWidget:function(){this.showWaitIcon();var As=this;var Ar=function(){As.calculateValuesInTree();Am.call(As);AE.call(As);As.renderRectangles();As.renderLegend();var At=As.previousSelected;if(At){if(At.deleted){As.selectionHighlightBox.style.display="none";}else{if(!As.selectAll){As.highlightEntity(As.selectionHighlightBox,As.previousSelected);}}}As.hideWaitIcon();};window.setTimeout(Ar,10);},hideInfoBox:function(){if(!this.infoBox){return ;}this.infoBox.style.zIndex="-50";this.infoBox.style.opacity=0;this.previousTooltip=null;},getIdxObjectByTarget:function(Au){var At=mstrmojo.dom.findAncestorByAttr(Au,"idx",true,this.domNode);var As=At&&At.value;if(!As){return null;}var Ar=this.getObjectByIdx(As);return Ar;},showInfoBox:function(Az){if(!Az){return ;}if(!this.infoBox){this.createInfoBox();}var As=Az;if(As===this.previousTooltip){return ;}this.previousTooltip=As;if(this.infoBox.style.display!="block"){this.infoBox.style.display="block";}this.infoBox.style.zIndex="75";this.infoBox.style.opacity=1;var A0=this.highlightBoxWidth,Av=mstrmojo.dom.position(document.body,true),BB=this.highlightEntity(this.highlightBox,As);if(!BB||isNaN(BB.x)){return ;}this.deleteButton.style.left=BB.x+"px";this.deleteButton.style.top=BB.y+"px";this.tooltipBox.style.width="";this.tooltipBox.innerHTML=Al(As,this);var A4={x:BB.x-A0,y:BB.y-A0,w:BB.w+A0*2,h:BB.h+A0*2};this.triBox.style.display="block";var A1=A4.x+(A4.w>>1);var Ay=A4.y+(A4.h>>1);var At=this.triBox.offsetWidth*0.717;var BC=this.tooltipBox.childNodes,A9=BC.length;for(var A6=0;A6<A9;A6++){var A7=BC[A6].childNodes;if(A7[0].offsetWidth+A7[1].offsetWidth+A7[2].offsetWidth>BC[A6].offsetWidth){A7[0].className+=" heatmap-half-width";}}var A2=this.tooltipBox.offsetHeight;var Au=this.tooltipBox.offsetWidth;var Aw=false;var BA=((A1-(Au>>1))>0)&&(A1+(Au>>1))<(Av.w);var Ar=((Ay-(A2>>1))>0)&&(Ay+(A2>>1))<(Av.h);var Ax=10;function A3(BL,BE,BJ,BH){if(BH===undefined){BH=false;}if(!Aw&&(BH||Ar)){if(A4.x-At-Au>=0){Aw=true;BL.style.left=A4.x-At+"px";BE.style.left=A4.x-At-Au+"px";BJ.style.left=BB.x+BB.w+"px";}else{if(A4.x+A4.w+At+Au<=Av.w){Aw=true;BL.style.left=A4.x+A4.w+At+"px";BE.style.left=A4.x+A4.w+At+"px";}}if(Aw){var BD=Ay;var BG=Ay-A2/2;if(BH){if(A2+Ax*2>Av.h){Aw=false;}else{var BM=Ax;var BK=Av.h-Ax-A2;if(BG<BM){BG=BM;}else{if(BG>BK){BG=BK;}}}}BL.style.top=BD+"px";BE.style.top=BG+"px";}}if(!Aw&&(BH||BA)){if(A4.y-At-A2>=0){Aw=true;BL.style.top=A4.y-At+"px";BE.style.top=A4.y-At-A2+"px";BJ.style.top=BB.y+BB.h+"px";}else{if(A4.y+A4.h+At+A2<=Av.h){Aw=true;BL.style.top=A4.y+A4.h+At+"px";BE.style.top=A4.y+A4.h+At+"px";}}if(Aw){var BF=A1;var BN=A1-Au/2;if(BH){if(Au+Ax*2>Av.w){Aw=false;}else{var BI=Ax;var BO=Av.w-Ax-Au;if(BN<BI){BN=BI;}else{if(BN>BO){BN=BO;}}}}BL.style.left=BF+"px";BE.style.left=BN+"px";}}}A3(this.triBox,this.tooltipBox,this.deleteButton,false);this.infoBox.style.display="block";if(!Aw){A4={x:A1,y:Ay,w:0,h:0};this.triBox.style.display="none";At=0;A3(this.triBox,this.tooltipBox,this.deleteButton,true);}if(!Aw){this.triBox.style.display="none";this.tooltipBox.style.left=A1-Au/2+"px";this.tooltipBox.style.top=Ay-A2/2+"px";}this.shadowBox.style.left=this.tooltipBox.style.left;this.shadowBox.style.top=this.tooltipBox.style.top;this.shadowBox.style.width=this.tooltipBox.offsetWidth+"px";this.shadowBox.style.height=this.tooltipBox.offsetHeight+"px";this.shelter.style.left=this.tooltipBox.style.left;this.shelter.style.top=this.tooltipBox.style.top;this.shelter.style.width=this.tooltipBox.offsetWidth+"px";this.shelter.style.height=this.tooltipBox.offsetHeight+"px";var A5=this.tooltipBox.childNodes[0].childNodes[0];var A8=window.getComputedStyle(A5,null);},enableGlobalDismiss:function(){var Ar=mstrmojo.touchManager;var As=this;this._globalTouchListener=Ar.attachEventListener("touchesBegin",this.id,function(At){if(!At||!At.touch||!At.touch.target){return ;}var Aw=At.touch.target,Av=document.getElementsByClassName("mstrmojo-DocLayoutViewer-layout")[0],Au=document.getElementsByClassName("mstrmojo-DocSubsection")[0];if(As.infoBoxPuppet!=Aw&&!mstrmojo.dom.contains(As.infoBox,Aw,true)){As.hideInfoBox();}if(Aw!=Av&&Aw!=Au){return ;}if(!this.selectAll){As.doSelection(As.previousSelected);}});},disableGlobalDismiss:function(){var Ar=mstrmojo.touchManager;if(this._globalTouchListener){Ar.detachEventListener(this._globalTouchListener);delete this._globalTouchListener;}},touchInfoBoxValid:function(As){var Ar=As.target;if(target.id==this.id+"-infobox"){return true;}},touchLegendTooltipValid:function Ab(Aw){var At=Aw.target;if(At.id!=this.id+"-color-legend-band"){return false;}var Au=mstrmojo.dom.position(At,true),Ar=Aw.clientX-Au.x,Av=Aw.clientY-Au.y,As=this.legendBand;if(Ar<As.x||Ar>=As.x+As.w-1){return false;}return true;},showLegendTooltip:function(Au){var A8=Au.target,Ay=mstrmojo.dom.position(A8,true),Aw=Au.clientX-Ay.x,Av=Au.clientY-Ay.y,A1=this.legendBand,Az;var At=this.colorTheme;if(At.tooltipInfo===undefined||At.tooltipInfo===null){At.createTooltipInfo(this.legendTickCount,A1.w,this);this.selectedBandIndex=-1;}var A4=At.getTooltipInfo(Aw-A1.x);if(A4!=this.selectedBandIndex){this.renderHilightedBand(A4);}var Ax=this.colorTheme.tooltipInfo[A4],Ar=this.getFormatString(this.colorMetricIndex),A5=this.getMetricName(this.colorMetricIndex),A7=(Ax.sign===undefined)?" < ":" > ",A3="<div>"+this.nf.formatByMask(Ar,Ax.sv)+A7+"</div><div class='heatmap-flex'>"+A5+"</div><div>"+A7+this.nf.formatByMask(Ar,Ax.ev)+"</div>";this.legendTooltip.innerHTML=A3;this.legendTooltip.style.borderColor=M(Ax.c);this.legendTooltip.style.lineHeight=this.legendTooltip.style.height;this.legendTooltip.style.display="-webkit-box";var A0={w:this.legendTooltip.offsetWidth,h:this.legendTooltip.offsetHeight};var A2=mstrmojo.dom.position(this.colorLegend,true),As=mstrmojo.dom.position(this.canvas,true),A6=Ax.r.x+((Ax.r.w-A0.w)>>1);if(A6<0){A6=0;}else{if(A6>Ay.w-A0.w){A6=Ay.w-A0.w;}}this.legendTooltip.style.left=A6+"px";this.legendTooltip.style.top=-35+"px";},hideLegendTooltip:function(){if(this.selectedBandIndex===undefined||this.selectedBandIndex==-1){return ;}this.renderGradientBand(this.legendBand);this.selectedBandIndex=-1;this.legendTooltip.style.left="-100000px";},touchSelectBegin:function(At){if(At.evt.ctrlKey){this.touchMultiBegin(At);return ;}var As=At.target;if(!As){return ;}this.lastTouchSelectTarget=As;if(this.touchLegendTooltipValid(At)){this.showLegendTooltip(At);this.hideInfoBox();}else{this.hideLegendTooltip();var Ar;if(this.infoWindowMode){Ar=this.getEntityByTouch(At,true);}else{Ar=this.getEntityByTouch(At);}if(!Ar){return ;}if(this.timer){cleatTimeout(this.timer);this.timer=null;}if(this.infoWindowMode){this.doSelection(Ar);}else{this.showInfoBox(Ar);}}},touchSelectMove:function(Au){if(Au.evt.ctrlKey){this.touchMultiMove(Au);return ;}var At=Au.target;if(!At){return ;}if(this.touchLegendTooltipValid(Au)){this.showLegendTooltip(Au);this.hideInfoBox();}else{this.hideLegendTooltip();var Ar;if(this.infoWindowMode){Ar=this.getEntityByTouch(Au,true);}else{Ar=this.getEntityByTouch(Au);}if(!Ar){return ;}var As=this;if(this.timer){clearTimeout(this.timer);this.timer=null;}if(this.infoWindowMode){if(this.previousSelected!=Ar){this.doSelection(Ar);}}else{this.showInfoBox(Ar);}}},touchSelectEnd:function(Ar){if(Ar.evt.ctrlKey){this.touchMultiEnd(Ar);}return ;},initScroller:function(Ar){this._scrollMovedHandler=Ar.attachEventListener("scrollMoved",this.id,function(As){this.hideInfoBox();});this._scrollDoneHandler=Ar.attachEventListener("scrollDone",this.id,function(As){this.canvasObject.updateOffsets(Ar.origin.x,Ar.origin.y);});},multiTouch:true,touchMultiBegin:function(Av){this.hideLegendTooltip();this.hideInfoBox();var At;var As;if(Av.evt.touches&&Av.evt.touches.length==2){At=Av.evt.touches[0];As=Av.evt.touches[1];}else{At=Av;As={pageX:300,pageY:300};}var Au=At.pageX-As.pageX;var Ar=At.pageY-As.pageY;this.initDiffDiff=Au*Au+Ar*Ar;this.initCenterX=((At.pageX+As.pageX)>>1);this.initCenterY=((At.pageY+As.pageY)>>1);this.initScrollX=this._scroller.origin.x;this.initScrollY=this._scroller.origin.y;this.relScaleFactor=1;},touchMultiMove:function(Au){var Aw;var Av;if(Au.evt.touches&&Au.evt.touches.length==2){Aw=Au.evt.touches[0];Av=Au.evt.touches[1];}else{Aw=Au;Av={pageX:300,pageY:300};}var Ay=Aw.pageX-Av.pageX;var Ax=Aw.pageY-Av.pageY;var Az=Ay*Ay+Ax*Ax;var A1=((Aw.pageX+Av.pageX)>>1);var A0=((Aw.pageY+Av.pageY)>>1);var As=Math.sqrt(Az/this.initDiffDiff);var At={x:As*(this.initCenterX+this.initScrollX)-A1,y:As*(this.initCenterY+this.initScrollY)-A0};var Ar={scale:As,offset:At};this.relScaleFactor=As;if(this.relScaleFactor*this.scaleFactor>=this.maxScale&&!this.oldTransform){this.oldTransform=Ar;}this.applyTransform(Ar);},touchMultiEnd:function(At){var Ar=this.relScaleFactor*this.scaleFactor;if(Ar<1){var As={offset:{x:0,y:0},scale:1/this.scaleFactor};this.relScaleFactor=As.scale;this.applyTransform(As,500,this.postScale);}else{if(Ar>this.maxScale){this.relScaleFactor=this.maxScale/this.scaleFactor;this.applyTransform(this.oldTransform,500,this.postScale);delete this.oldTransform;}else{this.postScale();}}},relScaleFactor:1,scaleFactor:1,applyTransform:function(As,At,A0){var Az=this._scroller;if(At===undefined){At=0;}Az.scrollEl.style.webkitTransformOrigin="left top";Az.transform="scale("+As.scale+","+As.scale+")";var Ay=As.offset.x,Ax=As.offset.y,Ar=this.scaleFactor*this.relScaleFactor-1,Au=this.heatMapSize.h*Ar,Aw=this.heatMapSize.w*Ar;Az.offset={y:{start:0,end:Au},x:{start:0,end:Aw}};this._scroller.scrollTo(Ay,Ax,At);if(A0){var Av=this;setTimeout(function(){A0.apply(Av);Av=null;},At);}},postScale:function(){delete this._scroller.transform;this._scroller.scrollTo(this._scroller.origin.x,this._scroller.origin.y,0);this.scaleFactor*=this.relScaleFactor;if(this.scaleFactor>this.maxScale){this.scaleFactor=this.maxScale;}this.refreshWidget();},destroy:function(Ar){if(this.canvasObject){this.canvasObject.destroy();delete this.canvasObject;}if(this.controller){this.controller.onorientationChange=this._onorientationChange;delete this._onorientationChange;}this._super(Ar);if(this.editorDialog){this.editorDialog.destroy();delete this.editorDialog;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndroidVis","mstrmojo.VisChartUtils","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller");function E(P){var O=0;if(P){if(P.length>0){O=P[0].length;}}return O;}mstrmojo.AndroidImageLayout=mstrmojo.declare(mstrmojo.AndroidVis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"AndroidImageLayout",markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="position:absolute;width:{@width};height:{@height};top:{@top};left:{@left}; z-index:{@zIndex}; overflow:hidden;"  mstrAttach:mouseover,mouseout,mousedown,mousemove,mouseup,click,dblclick><div id="{@id}"-scroll-element style="position:absolute;left:0;top:0;width:{@width};height={@height}"><canvas id="{@id}-highlightCanvas" style="position:absolute;left:0;top:0;z-index:1" width="{@width}" height="{@height}"></canvas><canvas id="{@id}-animationCanvas" style="position:absolute;left:0;top:0" width="{@width}" height="{@height}"></canvas></div><div id="{@id}-tooltip" style="z-index:2" class="mstrmojo-ImageLayout-tooltip" clk="clk"><table style="margin:5px 7px"></table></div><div id="{@id}-infowindow-anchor" style="position:absolute;width:18px;height:18px;display:block;z-index:-1;"></div><div id="{@id}-css" style="display:none"></div><div id="{@id}-errMsg" align="center" style="position:absolute; top:35%; word-wrap:break-word;"></div></div>',markupSlots:{scrollableCanvasDiv:function(){return this.domNode.childNodes[0];},highlightCanvas:function(){return this.domNode.childNodes[0].firstChild;},animationCanvas:function(){return this.domNode.childNodes[0].lastChild;},tooltip:function(){return this.domNode.childNodes[1];},infowindowAnchor:function(){return this.domNode.childNodes[2];},cssDiv:function(){return this.domNode.childNodes[3];},errorMessage:function(){return this.domNode.childNodes[4];}},init:function(O){if(this._super){this._super(O);}this.sbwh=0;},scrollerConfig:{bounces:false,showScrollbars:false,useTranslate3d:true,vScroll:true,hScroll:true,offset:{y:{start:0,end:0},x:{start:0,end:0}},origin:{x:0,y:0}},isTablet:true,utils:mstrmojo.VisChartUtils,multiTouch:true,multiTap:true,postBuildRendering:function H(){var Q=this;var P=Q.scrollerConfig;P.scrollEl=Q.scrollableCanvasDiv;P.offset.x.start=0;P.offset.x.end=Q.getWidth()*(Q.scaleFactor-1);P.offset.y.start=0;P.offset.y.end=Q.getHeight()*(Q.scaleFactor-1);if(P.origin.x>P.offset.x.end){P.origin.x=P.offset.x.end;}if(P.origin.y>P.offset.y.end){P.origin.y=P.offset.y.end;}Q.animationCanvas.width=Q.highlightCanvas.width=Q.getWidth()*2;Q.animationCanvas.height=Q.highlightCanvas.height=Q.getHeight()*2;Q.createTooltipTable();Q.attrFormIndices=Q.getAttrFormIndices();Q.areaBubbleAttrIndex=Q.getAreaBubbleAttrIndex();Q.areaBubbleAttrFormCount=E(Q.attrFormIndices);if(this._super){this._super();}if(this._tn){var O=this._tsCallback;this._tsCallback=function(R){Q.savedInfowindowOn=Q.realtimeInfowindowOn;Q.currSelectedObjBackup=Q.currSelectedObj;O.call(this,R);};mstrmojo.dom.detachEvent(this._tn,mstrmojo.dom.TOUCHSTART,O);mstrmojo.dom.attachEvent(this._tn,mstrmojo.dom.TOUCHSTART,this._tsCallback);}Q.fullScreenListener=mstrmojo.touchManager.attachEventListener("fullScreenStateChange",this.id,function(R){Q.adjustWidgetOffsets();});},getAreaBubbleAttrElems:function A(){var Q={},Z=this,R=Z.attrFormIndices,Y=Z.areaBubbleAttrIndex,O=Z.headerIndexLineIndexObj={};if(Y>-1){var X=Z.model,b=X&&X.ghs&&X.ghs.rhs&&X.ghs.rhs.items,e=X&&X.gts&&X.gts.row,a=e&&e.length>Y&&e[Y].es,S,P;if(b&&e&&a){var V;if(e.length===1){for(V=0;V<b.length;V++){S=(b[V].items&&b[V].items.length>0)?b[V].items[0].idx:-1;P=(S>-1&&a.length>S)?a[S].n:null;if(P&&S>-1){Q[P.toLowerCase()]=S;O[S]=V;}}}else{if(e.length>1){var W=b.length;for(V=0;V<W;V++){S=(b[V].items&&b[V].items.length>0)?b[V].items[0].idx:-1;var d=(V+1===W)?-1:((b[V+1].items&&b[V+1].items.length>0)?b[V+1].items[0].idx:-1);if(d>-1){if(S===d){continue;}else{P=(a.length>S)?a[S].n:null;if(P&&S>-1){Q[P.toLowerCase()]=S;O[S]=V;}}}else{if(V>0){var U=(b[V-1].items&&b[V-1].items.length>0)?b[V-1].items[0].idx:-1;if(S!==U){P=(a.length>S)?a[S].n:null;if(P&&S>-1){Q[P.toLowerCase()]=S;O[S]=V;}}}else{if(V===0){P=(a.length>S)?a[S].n:null;if(P&&S>-1){Q[P.toLowerCase()]=S;O[S]=V;}}}}}}}}}return Q;},setFontByDPI:function N(){if(this.setFontByDPIFlag){return ;}var U=this;U.setFontByDPIFlag=true;U.hoverBubbleRadiusLarger=5;U.bubbleStrokeWidth=2;U.baseMaxBubbleSizeAuto=12;U.baseMaxBubbleSizeManual=24;U.polygonStrokeWidth=1;U.highlightPolygonStrokeWidth=2;U.borderSpace=5;U.tooltipFontSize=12;U.tooltipBorderWidth=1;U.tooltipBorderRadius=5;U.errMsgFontSize=16;U.bias=30;U.tooltipRightShadowWidth=4;var b=U.xtabModel,Y=(b&&b.docModel),P=false,O=false;if(Y){P=Y.zt&&(parseInt(Y.zt,10)===2);var X=Y.defn&&Y.defn.layouts,R,Q;for(Q in X){if(X.hasOwnProperty(Q)&&X[Q]&&X[Q].loaded){R=X[Q];break;}}if(R&&R.hasOwnProperty("fch")){O=R.fch;}}if(P&&O){var W=149;if(mstrMobileApp!==undefined){W=mstrMobileApp.getDeviceDPIX();}var V=149;var S=1;if(W>0){S=W/V;}if(S>1){U.hoverBubbleRadiusLarger*=S;U.bubbleStrokeWidth*=S;U.baseMaxBubbleSizeAuto*=S;U.baseMaxBubbleSizeManual*=S;U.polygonStrokeWidth*=S;U.highlightPolygonStrokeWidth*=S;U.borderSpace*=S;U.tooltipFontSize*=S;U.tooltipBorderWidth*=S;U.tooltipBorderRadius*=S;U.errMsgFontSize*=S;U.bias*=S;U.tooltipRightShadowWidth*=S;var a=U.tooltip,Z=a.childNodes[0];a.style.fontSize=U.tooltipFontSize+"px";a.style.borderWidth=U.tooltipBorderWidth+"px";a.style.borderRadius=U.tooltipBorderRadius+"px";a.style.boxShadow=3*S+"px "+3*S+"px "+4*S+"px RGBA(0,0,0,0.45)";Z.style.margin=5*S+"px "+7*S+"px";}}},isTouchedOnWidget:function K(S){if(!S){return false;}var Q=this,P=Q.utils.getTouchXYOnWidget(S.pageX,S.pageY,Q),O=P.touchX,R=P.touchY;if(O>0&&O<Q.getWidth()&&R>0&&R<Q.getHeight()){return true;}return false;},getAttrFormIndices:function F(){var V=this,S=V.model,W=S&&S.gts&&S.gts.row,U,R,Q=[];if(W){var P=0;for(U=0;U<W.length;U++){var O=W[U]&&W[U].fs;Q.push([]);if(O){for(R=0;R<O.length;R++){Q[U].push(P++);}}}}else{Q=null;}return Q;},getAreaBubbleAttrIndex:function J(){var Q=this,P=Q.model,R=P&&P.gts&&P.gts.row,O=-1;if(R&&R.length>0){O=0;}return O;},touchMultiBegin:function(S){this.hideTooltip();var Q,P;if(S.evt.touches&&S.evt.touches.length===2){Q=S.evt.touches[0];P=S.evt.touches[1];}else{Q=S;P={pageX:100,pageY:100};}var R=Q.pageX-P.pageX,O=Q.pageY-P.pageY;this.initDiffDiff=R*R+O*O;this.initCenterX=(Q.pageX+P.pageX)>>1;this.initCenterY=(Q.pageY+P.pageY)>>1;this.initScrollX=this._scroller.origin.x;this.initScrollY=this._scroller.origin.y;this.relScaleFactor=1;},touchMultiMove:function(R){var U,S;if(R.evt.touches&&R.evt.touches.length===2){U=R.evt.touches[0];S=R.evt.touches[1];}else{U=R;S={pageX:100,pageY:100};}var W=U.pageX-S.pageX,V=U.pageY-S.pageY,X=W*W+V*V,Z=(U.pageX+S.pageX)>>1,Y=(U.pageY+S.pageY)>>1;var P=Math.sqrt(X/this.initDiffDiff);var Q={x:P*(this.initCenterX+this.initScrollX)-Z,y:P*(this.initCenterY+this.initScrollY)-Y};var O={scale:P,offset:Q};this.relScaleFactor=P;this.applyTransform(O);},touchMultiEnd:function(P){if(this.relScaleFactor*this.scaleFactor<1){this.relScaleFactor=1/this.scaleFactor;this.applyTransform({scale:this.relScaleFactor},500,this.postScale);}else{if(this.relScaleFactor*this.scaleFactor>2){var O=this.relScaleFactor*this.scaleFactor/2;this.relScaleFactor=2/this.scaleFactor;this.applyTransform({scale:this.relScaleFactor,scaleBack:O},500,this.postScale);}else{this.postScale();}}},applyTransform:function(P,Q,Z){var Y=this._scroller;if(Q===undefined){Q=0;}Y.scrollEl.style.webkitTransformOrigin="left top";Y.transform="scale("+P.scale+","+P.scale+")";var X,W;if(P.offset){X=P.offset.x;W=P.offset.y;}else{var V=P.scaleBack||1;X=this._scroller.origin.x/V;W=this._scroller.origin.y/V;}var O=this.scaleFactor*this.relScaleFactor-1,R=this.getHeight()*O,U=this.getWidth()*O;if(O<0){Y.offset={y:{start:R,end:0},x:{start:U,end:0}};}else{Y.offset={y:{start:0,end:R},x:{start:0,end:U}};}this._scroller.scrollTo(X,W,Q);if(Z){var S=this;setTimeout(function(){Z.apply(S);S=null;},Q);}},postScale:function(){delete this._scroller.transform;this._scroller.scrollTo(this._scroller.origin.x,this._scroller.origin.y,0);this.scaleFactor*=this.relScaleFactor;this.refreshWidget();},refreshWidget:function(){this.drawMap();this.highlightPoint();},initScroller:function L(O){O.vScroll=true;O.hScroll=true;this._super(O);},getWidgetXY:function G(P){var O=this.utils.getTouchXYOnWidget(P.pageX,P.pageY,this);P.widgetX=O.touchX;P.widgetY=O.touchY;},touchSelectBegin:function I(O){console.log("touchSelectBegin");if(O.evt.ctrlKey){this.touchMultiBegin(O);return ;}this.getWidgetXY(O);this.touchSelectBegin_mouseOver(O);},touchSelectMove:function M(O){console.log("touchSelectMove");if(O.evt.ctrlKey){this.touchMultiMove(O);return ;}this.getWidgetXY(O);this.touchSelectMove_mouseMove(O);},touchSelectEnd:function B(O){console.log("touchSelectEnd");if(O.evt.ctrlKey){this.touchMultiEnd(O);return ;}this.getWidgetXY(O);this.touchSelectEnd_mouseOut(O);},touchSwipeBegin:function D(O){console.log("touchSwipeBegin");this.touchSwipeBegin_mouseDown(O);if(this._super){this._super(O);}},touchTap:function C(O){console.log("touchTap");this.getWidgetXY(O);if(O.count===2){this.touchDblTap_dblClick(O);}else{if(O.count===1){this.touchTap_click(O);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo.desc","mstrmojo.ME.TokenInputBox","mstrmojo.mstr.EnumDSSXMLTokenTypes","mstrmojo.ME.Enum","mstrmojo._HasTooltip","mstrmojo.dom","mstrmojo.string");mstrmojo.requiresDescs(221,547,9106,9565,9566,9567,9568,11897,13542,13543,15665);var M=mstrmojo.array,S=mstrmojo.hash,I=mstrmojo.desc,O=mstrmojo.mstr.EnumDSSXMLTokenTypes,N=mstrmojo.ME.Enum.METRIC_EDIT_TYPES,L=mstrmojo.string.escape4HTMLText,E=mstrmojo.dom;var Q={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},R={0:I(9565,"Valid Metric Formula."),1:I(9106,"Require Validation?"),2:I(9566,"Validation in Progress..."),3:I(9567,"Validation Failed with Syntax Error!"),4:I(9568,"Validation Failed with Object Ambiguity!")},U={ERROR:"-2147214845",AMBIGUITY:"-2147214846"},B={};B[U.ERROR]=Q.ERROR;B[U.AMBIGUITY]=Q.AMBIGUITY;function P(a){if(!a){return Q.VALID;}return B[a]||Q.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.MetricEditBox",vStatus:Q.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,validateFunc:null,isObjectVisible:function(a){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var b=this.vStatus,a=this.vStatusNode;a.className="mstrmojo-MEBox-vStatus "+G[b];a.innerHTML=(this.getStatusDesc&&this.getStatusDesc(b))||R[b]||"";if(this.vStatus===Q.VALID){this.set("cValid",true);}},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:"this.parent.browseItemVisible",candidates:"this.parent.candidates"},editEmbeddedFilterToken:function(a){var b=this.parent;if(b.editEmbeddedFilterToken){b.editEmbeddedFilterToken(a);}}}],init:function V(a){var b=this,d=a.validateFunc||this.validateFunc;if(d){b.children=[{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"statusNode",text:I(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton right hoverLink",cssDisplay:"inline-block",onclick:d}].concat(this.children);}if(this._super){this._super(a);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function Z(){return this.inputBox.getSearchPattern();},getHighlightedText:function W(b,a){return this.inputBox.getHighlightedText(b,a);},item2textCss:function K(a){return{4:"m",7:"am",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[a.t]||"";},handleSuggestionItemSelect:function J(a){var b=this.ambiguityDialog;if(a){b.onItemSelect(a);}b.close();},showDesc:true,showPath:true,ambiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",I(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",I(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:"this.parent.opener.suggestionItems"},onclick:function(a){mstrmojo._IsList.onclick.call(this,a);},getItemMarkup:function(e,a){var d=this.parent.opener,b=mstrmojo.string.escape4HTMLText;var g=(d&&d.item2textCss(e))||"";var f="";if(e.path){f='<div class="mstrmojo-object-additional-info" idx="'+a+'">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(e.path)+"</div>";}else{e.standalone=true;}return'<div class="mstrmojo-object-item" idx="'+a+'"><div class="mstrmojo-object-name '+g+'" idx="'+a+'">'+L(e.n)+"</div>"+f+"</div>";},buildTooltip:function(a,b){if(a.standalone){return L(a.path)+"> "+L(a.n);}else{return L(a.n)+'<div class="mstrmojo-object-additional-info">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(a.path)+"</div>";}}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:I(547,"Select"),onclick:function(){var a=this.parent.parent;a.opener.handleSuggestionItemSelect(a.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:I(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",Q.UNKNOWN);this.set("iStatus","");},postBuildRendering:function Y(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function H(a){this.inputBox.set("items",a.items);},replaceErrorToken:function C(a){this.inputBox.replaceErrorToken(a);},clientSideValidation:function A(h){if(!h){return ;}var d=false,g=false,b=h.items;try{d=mstrApp.rootCtrl.docCtrl.model.isMDXDataset(S.any(this.parent.parent.datasets));g=h.met==N.ADVANCED&&b[0].tp==O.SimpPrefixFun&&b[0].v==="ApplySimple";}catch(j){}if(d&&g){var a=M.filterOne(b,function(e){return e.tp===O.DoubleQString;});var f=/(\'|\/\/|\-\-|\/\*|\*\/)/;if(a&&f.test(a.v)){h.vs=Q.ERROR;h.rjec=U.ERROR;h.rjed=I(15665,"MDX pass-through expression should not contain ', //, --, /*, */.");}}},handleValidation:function F(a){if(!a){this.set("vStatus",Q.ERROR);return ;}a.vs=P(a.rjec);this.set("vStatus",a.vs);this.set("iStatus",mstrmojo.string.encodeHtmlString(a.rjed)||"");this.updateInputBoxItems(a);this.inputBox.focus();if(a.vs===Q.AMBIGUITY){var l=this,h=a.items,g=M.find(h,"sta",-1),b=h[g].v,j=function(f){l.replaceErrorToken(f);l.set("iStatus","");l.set("vStatus",Q.UNKNOWN);if(l.continueValidataion){l.continueValidataion();}else{l.set("vStatus",Q.VALID);}};var d=M.filter(a.srfd.items,this.isObjectVisible);var k=this.parent.candidates,e=k&&k.items;if(e){M.forEach(d,function(o){var f=M.find(e,"did",o.did);if(f===-1){if(this.absorbAmbiguity){e.push(o);}}else{o.path=e[f].path;}});}if(d.length===1){j(d[0]);return ;}this.openPopup("ambiguityDialog",{zIndex:100,items:d,ambiguousName:b,onItemSelect:j});}else{if(this.postHandleValidation){this.postHandleValidation();}}},tooltip:"",useRichTooltip:true,updateTooltipConfig:function X(b){var d=b.target||E.eventTarget(b.hWin,b.e),a=E.position(d);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.getTooltipContent(b),top:a.y+a.h,left:a.x+10,cssClass:"vi-regular vi-tooltip-A"};},getTooltipContent:function(a){return this.iStatus;},showTooltip:function D(a,b){if(a.target===this.iStatusNode){this._super(a,b);}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=Q;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS=G;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC=R;}());(function(){mstrmojo.requiresCls("mstrmojo.MobileDocXtabGraph","mstrmojo.graph._CanvasGraph");mstrmojo.graph.MobileDocXtabCanvasGraph=mstrmojo.declare(mstrmojo.MobileDocXtabGraph,[mstrmojo.graph._CanvasGraph],{scriptClass:"mstrmojo.graph.MobileDocXtabCanvasGraph",update:function C(D){delete this.graphData;this._super(D);},setModel:function B(D){this.graphData=D.data;},retrieveGraphSrc:function A(F,D){if(!this.graphData){var H=this.id,E=this._super,G=this.model;if(parseInt(F,10)>0&&parseInt(D,10)>0){this.model.getDataService().getRWGraphImage({w:D,h:F,k:this.k,sid:this.node.data.sid},G.newCallback({success:function(I){var K=mstrmojo.all[H];if(!K){return ;}K.setModel({data:I});E.call(K,F,D);var J=K.parent;if(J&&J.updateScroller){J.updateScroller();}}}));}}else{this._super(F,D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ResultSetController","mstrmojo.android.controllers._IsReportController");function K(N){return{success:function(O){N.setData(O);}};}function E(N,P){P.push(K(this));var O=this.model;O[N].apply(O,P);}mstrmojo.android.controllers.XtabController=mstrmojo.declare(mstrmojo.android.controllers.ResultSetController,[mstrmojo.android.controllers._IsReportController],{scriptClass:"mstrmojo.android.controllers.XtabController",initModel:function D(){return mstrApp.modelFactory.newModel("Xtab",{controller:this});},createView:function C(O,R){var N=this.model.data.visName;if(N){var P=mstrmojo.AndroidVisList.getVis(N);if(P){R.viz=P;}}var Q=this.view=this.newView("Xtab",R);Q.setModel(this.model);return Q;},afterReprompt:function L(N){this.view.set("gridData",N);this._super(N);},setData:function M(N){var P=this.view;P.unrender();P.set("gridData",N);var O=mstrApp.getContentDimensions();P.width=O.w+"px";P.height=O.h+"px";P.render();},hasPageBy:function H(){var P=this.model.data;if(this.view&&this.view.isTimeSeries){var O=P&&P.phs;return !!(O&&O.show);}else{var N=P&&P.ghs;return !!(N&&N.phs);}},checkCache:function I(O,Q,R,P,N){this._super(O||{ifc:true,ci:this.model.data.ci},Q,R,P,N);},onDrill:function J(N,P){var O=this,Q=this._super;this.checkCache(this.model.data,{did:this.did,t:this.t,st:this.ctrlType},function(){Q.call(O,P);},false,{silent:false,showWait:true});},onSort:function A(N){E.call(this,"sort",[N]);},onPivot:function G(N){E.call(this,"pivot",[N]);},onPageBy:function F(N){this.model.pageBy(N,mstrmojo.func.wrapMethods(K(this),{failure:function(O){mstrApp.onerror(O);}}));},onDownloadGridData:function B(N,O){this.model.downloadGridData(O);}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.controllers.ResultSetController","mstrmojo.android.controllers._IsReportController","mstrmojo.android.EnumMenuOptions");var B=mstrmojo.android.EnumMenuOptions,A=B.SHARE,L=B.ANNOTATION;mstrmojo.android.controllers.GraphController=mstrmojo.declare(mstrmojo.android.controllers.ResultSetController,[mstrmojo.android.controllers._IsReportController],{scriptClass:"mstrmojo.android.controllers.GraphController",initModel:function E(){return mstrApp.modelFactory.newModel("Graph",{controller:this});},createView:function D(N,P){var O=this.view=this.newView("Graph",P);O.setModel(this.model);return O;},hasPageBy:function J(){var N=this.model&&this.model.data;return !!(N&&N.gd&&N.gd.pb);},reprompt:function F(){this.repromptOrientation=mstrMobileApp.getOrientation();this._super();},afterReprompt:function M(N){this.view.setGraphData(N);this._super(N);},onPageBy:function G(N){var O=this.view;this.model.pageBy(N,{success:function(){O.refresh();},failure:function(P){mstrApp.onerror(P);}});},setData:function K(N){this.model.setData(N);this.view.refresh();},beforeViewVisible:function I(N){if(this.repromptFlag&&(this.repromptOrientation!==mstrMobileApp.getOrientation())&&N){delete this.repromptFlag;delete this.repromptOrientation;this.refresh();}},beforeViewHidden:function H(N){mstrmojo.GraphBase.hideTooltips();},handleMenuItem:function C(O,N){if(O!==A&&O!==L){this.view.syncTooltips(0,0);}this._super(O,N);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.android.controllers.RootController","mstrmojo.android.controllers.FolderController","mstrmojo.android.controllers.ProjectsController","mstrmojo.android.controllers.SubscriptionsController","mstrmojo.android.controllers.XtabController","mstrmojo.android.controllers.DocumentController","mstrmojo.android.controllers.GraphController","mstrmojo.android.controllers.PromptsController","mstrmojo.android.controllers.PropertiesController","mstrmojo.android.controllers.SettingsController","mstrmojo.android.controllers.TransactionNotificationController");mstrmojo.android.factories.ControllerFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.factories.ControllerFactory",newRootController:function C(M){return new mstrmojo.android.controllers.RootController(M);},newFolderController:function F(M){return new mstrmojo.android.controllers.FolderController(M);},newProjectsController:function K(M){return new mstrmojo.android.controllers.ProjectsController(M);},newSubscriptionsController:function E(M){return new mstrmojo.android.controllers.SubscriptionsController(M);},newXtabController:function A(M){return new mstrmojo.android.controllers.XtabController(M);},newDocumentController:function J(M){return new mstrmojo.android.controllers.DocumentController(M);},newGraphController:function D(M){return new mstrmojo.android.controllers.GraphController(M);},newPromptsController:function G(M){return new mstrmojo.android.controllers.PromptsController(M);},newPropertiesController:function I(M){return new mstrmojo.android.controllers.PropertiesController(M);},newSettingsController:function H(M){return new mstrmojo.android.controllers.SettingsController(M);},newTransactionsController:function L(M){return new mstrmojo.android.controllers.TransactionNotificationController(M);},newController:function B(M,O){var N=this["new"+M+"Controller"](O);N.type=M;return N;}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.Label","mstrmojo.Button","mstrmojo.Pulldown","mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.tooltip","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash","mstrmojo.mstr.EnumDSSXMLBaseFormType");var g=mstrmojo.array,N=mstrmojo.hash,M=mstrmojo.ME.MetricToken.brackets,B=mstrmojo.css,S=mstrmojo.vi.ui.tabs.Tab.ACTIONS,q=S.DELETE+S.RENAME,s=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,t=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS,O=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC,W=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.string,w="This@ID",Y="45C11FA478E745FEA08D781CEA190FE5",V=mstrmojo.mstr.EnumDSSXMLBaseFormType,z=[{n:mstrmojo.desc(959,"Default"),v:V.DssXmlBaseFormReserved},{n:mstrmojo.desc(12276,"String"),v:V.DssXmlBaseFormText},{n:mstrmojo.desc(2052,"Date"),v:V.DssXmlBaseFormDate},{n:mstrmojo.desc(3434,"Number"),v:V.DssXmlBaseFormNumber}],Z=function(){var AD="analytical_engine_version.htm",AC=mstrApp.showHelpTopic;if(AC){AC(AD,"upgrade");}else{window.open(mstrmojo.upgradeHelpPath()+AD,"_blank");}};function H(AC){return{n:AC,k:AC,ftk:[],vs:1,is:"",bft:V.DssXmlBaseFormReserved,bftp:V.DssXmlBaseFormReserved};}function Q(AI,AJ,AC,AG){var AE=AI.forms[AJ]||{},AH=AI.forms[AC],AD=AI.inputBox,AF=AI.statusBox.pulldownBox.pulldown;if(AJ!==AC){AE.vs=AI.vStatus;AE.is=AI.iStatus;AE.bft=AI.formType||AF.getSelectedItem().v;AE.bftp=AI.formType||AF.getSelectedItem().v;AE.ftk=AD.items;AI.set("vStatus",s.UNKNOWN);}AI.set("vStatus",AH.vs);AI.set("iStatus",AH.is);AI.updateInputBoxItems({items:AH.ftk});if(AI.curFormIdx!==AC){AI.curFormIdx=AC;AI.tabstrip.setSelectedTab(AH.k);}AF.set("selectedIndex",g.find(AF.items,"v",AH.bft));AI.raiseEvent({name:"tabSwitch",tks:AH.ftk,vs:AH.vs,is:AH.is,bft:AH.bft,bftp:AH.bftp,oidx:AJ,nidx:AC,toNewTab:AG});}function P(AD){var AC=AD.forms[AD.curFormIdx];if(AC){AC.ftk=AD.inputBox.items;AC.vs=AD.vStatus;AC.is=AD.iStatus;}}var p=0;function d(AC){p=Math.max(AC.length-1,p);}function b(){p=0;}function x(AC){var AD="DESC"+(p?" "+p:"");p++;if(g.find(AC,"n",AD)>=0){return x(AC);}return AD;}function J(AF){var AE={v:M(AF.n),oi:AF,isNew:true},AD,AC;if(AF.t===12){AD=g.filter(AF.fs,function(AG){return AG.obf||AF.da;}).length;if(AD===1){AC=AF.fs[0];AE=N.copy({v:M(AF.n)+"@"+M(AC.fnm),ift:true,exv:AC.fid,extp:8},AE);}else{AE=N.copy({v:M(AF.n)+"@",ift:true},AE);}}return AE;}function E(AD,AC){AD.set("enabled",!AC);var AE="mstrmojo-InlineWaitIcon";if(AD.iconClass){AD.set("iconClass",AD.iconClass.replace(new RegExp(AE),"")+" "+(AC?AE:""));}else{mstrmojo.css.toggleClass(AD.domNode,AE,AC);}}function L(AC){return AC.tp===33||AC.tp===37;}function F(AC){return AC.tp===-1;}var a=function(AI){var AG=AI.items,AD=AG.length,AF,AH,AE=[],AC="";AE.push({v:"!",tp:33,lv:4,sta:2});for(AF=0;AF<AD;AF++){AH=AG[AF];if((AF===0&&L(AH))||F(AH)){continue;}if(AH.isNew&&!AH.oi){AC+=AH.v;}else{if(!D.isEmpty(AC)){AE.push({v:AC,tp:2,lv:1});AC="";}if(AH.v&&AH.v.indexOf(w)>=0){AH.v=AH.v.replace("["+w+"]",w);AH.exv=Y;AH.extp=8;delete AH.oi;}AE.push(AH);}}if(!D.isEmpty(AC)){AE.push({v:AC,tp:2,lv:1});AC="";}AE.push({v:"",tp:-1,lv:4,sta:2});return{items:AE};},h=function(AE){var AC=AE.items||[],AD=AC[AC.length-1];if(AD&&AD.tp===-1){AC.pop();}if(AC[0]&&L(AC[0])){AC.splice(0,1);}g.forEach(AC,function(AF){if(AF.v&&AF.v.indexOf(w)>=0){N.copy({extp:8,exv:Y,oi:{n:"This",did:"This",t:12}},AF);}});},f=function(AC){if(!AC){return s.VALID;}return{"-2147214845":s.ERROR,"-2147214846":s.AMBIGUITY}[AC]||s.ERROR;},U=function(AE){AE=a(AE);var AD={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},AC={getArrItemName:function(){return"tkn";},isSerializable:function(AF){return(AD[AF])?true:false;}};return D.json2xml("tknstrm",AE,AC);},G=function(AE,AH,AG,AD){var AF=U(AH),AI=function(AJ){if(AJ&&AJ.tks){var AK=AJ.tks;h(AK);AK.vs=f(AK.rjec);AK.tokenXML=AF;if(AD){AD(AK);}}},AC=function(AJ){mstrmojo.alert(AJ.message||AJ.getResponseHeader&&AJ.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:AF,localSymbolFolderXML:"",metricXML:"",metricId:AE||"",isNew:true,objectType:12,isIDForm:AG,msgID:mstrApp.getMsgID()},{success:AI,failure:AC});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function X(){if(this._super){this._super();}var AC=this,AD=AC.lbl;AD.editOnDoubleClick=this.editable;AD.onTextEditComplete=function(AF,AE){if(AC.validate(AD.text)){AC.titleEdited(AD.text,AE);}};},onclick:function o(AC){var AD=mstrmojo.dom.eventTarget(AC.hWin,AC.e);if(AD===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(AC){var AD=!/[\[\]\"\\]/g.test(AC);if(!AD){this.lbl.set("isEditing",true);}this.set("valid",AD);return AD;},showErrTooltip:function AB(AG,AE){var AC=mstrmojo.dom.position(this.domNode),AD=this,AF=AD.errTooltip;if(!AF){AD.errTooltip=AF=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(AF);}AF.set("top",AC.y+AC.h+2);AF.set("left",AC.x+AC.w/2-AE);AF.set("content",'<div class="content"><span>'+AG+"</span></div>");AF.open();window.setTimeout(function(){AF.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function l(AF,AG,AH){var AE=g.find(AG,"k",AH.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:AH.n,draggable:false,editable:AE!==0,cssClass:"mstrmojo-AEB-Tab "+(AE===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return q;},tabSelected:function(){Q(AF,AF.curFormIdx,AE);},titleEdited:function AD(AJ,AI){if(AJ!==AI){if(g.find(AF.forms,"n",AJ)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}else{var AK=AF.forms[AE];AK.n=AJ;AF.set("dirty",true);}}},tabDeleted:function AC(){var AI=AF.forms.length,AL=(AF.curFormIdx===AI-1)?0:AF.curFormIdx,AJ=AF.forms.slice(0),AK=AJ[AE];if(AK&&AK.did){AF.delForms.push({n:AK.n,did:AK.did});}AJ.splice(AE,1);AF.curFormIdx=AL;AF.set("forms",AJ);Q(AF,-1,AL);AF.set("dirty",true);}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-AEBox-status {@statusCssClass}"></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var AD=this.vStatus,AH=(AD===s.VALID),AF=(AD===s.UNKNOWN||AD===s.VALIDATING),AE=this.statusBox.infoBox;this.validateBtn.set("visible",AF);AE.set("visible",!AF);if(!AF){AE.infoLabel.set("text",AH?mstrmojo.desc(11655,"Valid formula."):mstrmojo.desc(15953,"Validation failed."));var AG=t[AD],AC=AE.infoIcon.domNode;if(!B.hasClass(AG)){B.removeClass(AC,[t[s.VALID],t[s.ERROR],t[s.AMBIGUITY]]);B.addClass(AC,AG);}}},oniStatusChange:function(){var AE=this.vStatus,AC=(AE===s.ERROR||AE===s.AMBIGUITY),AD=this.statusBox.infoBox.infoIcon;AD.title=AC?(this.getStatusDesc&&this.getStatusDesc(AE))||O[AE]+" "+this.iStatus:"";}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function u(AF){var AG=this,AI=function(){AG.validateCurrentForm();},AE=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function AD(AL,AM,AK){return N.copy(l(AG,AL,AM),AK);},addTab:function AJ(){var AM=AG.forms,AK=AM.length,AN=x(AM),AL=AM.slice(0);AL.push(H(AN));AG.set("forms",AL);Q(AG,AG.curFormIdx,AK,true);AG.set("dirty",true);},clear:function AC(){g.forEach(this.children,function(AK){AK.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(2827,"Clear"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll hoverLink",onclick:function(){AG.inputBox.clearTokens([]);AG.inputBox.raiseChangeEvent({type:"clear"});}},{scriptClass:"mstrmojo.Box",alias:"statusBox",slot:"statusNode",cssClass:"statusBox",children:[{scriptClass:"mstrmojo.Box",alias:"pulldownBox",cssClass:"pulldownBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-AEBox-pulldownLabel AEBox-item",text:mstrmojo.desc(9918,"Data Type")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"pulldown",cssClass:"mstrmojo-AEBox-pulldown AEBox-item",selectedIndex:0,items:z,onitemSelected:function(AN){var AK=AG.curFormIdx,AL=AG.forms,AM=AL&&AL.length>AK&&AL[AK];if(AM){if(AM.bft!==AN.v){AM.bft=AM.bftp=AN.v;AG.set("dirty",true);}}}}]},{scriptClass:"mstrmojo.Box",cssClass:"helpIcon",cssDisplay:"inline-block",richTooltip:{cssClass:"vi-regular vi-tooltip-A A-center AE-tooltip",posType:mstrmojo.tooltip.POS_TOPCENTER,enableHover:true},useRichTooltip:true,tooltipCloseDelay:500,updateTooltipConfig:function AH(){var AL=this.richTooltip,AK=mstrmojo.dom.position(this.domNode);AL.left=AK.x+AK.w-8;AL.top=AK.y+28;AL.content=mstrmojo.desc(16313,"Data Type options for derived attribute forms are only available for data engine version 11.1 and later.");AL.content+="<br /><div class='help-link-label' onclick='mstrmojo.ME.AttributeEditBox.AEHelpFn()'>"+mstrmojo.desc(9849,"Learn More")+"</div>";}},{scriptClass:"mstrmojo.Box",alias:"infoBox",cssClass:"infoBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Button",alias:"infoIcon",cssClass:"mstrmojo-AEBox-infoIcon AEBox-item",title:"",tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var AK=mstrmojo.dom.position(this.domNode);this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(AK.y+26,0),left:Math.max(AK.x+10,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title};}},{scriptClass:"mstrmojo.Label",alias:"infoLabel",cssClass:"mstrmojo-AEBox-infoLabel AEBox-item"}]}]}];this.validateFunc=AI;AG.children=AE.concat(this.children);this._super(AF);},item2textCss:function K(AC){return this._super(AC)||{21:"afm"}[AC.t]||"";},onformsChange:function e(){var AC=this.forms,AD=AC[this.curFormIdx].k;g.forEach(AC,function(AE){h({items:AE.ftk});});this.tabstrip.setTabs(AC,AD);d(AC);},selectFormTab:function A(AC){Q(this,this.curFormIdx,AC);},postBuildRendering:function X(){if(this._super){this._super();}this.clear();var AC=this;this.inputBox.ondrop=function(AG){if(!AG.src.data||!AG.src.data.item){return ;}var AF=AC.inputBox,AI=AF.ctxtBuilder.itemWidgets,AJ=N.copyProps(["did","n","t","fs"],AG.src.data.item),AL=J(AJ),AD,AK,AE;AG.src.data=AL;mstrmojo.ListBase2.prototype.ondrop.call(this,AG);var AH=function(AM){return AM.t===W.Function&&!(!isNaN(AM.fdid)&&AM.fdid<0);};if(AH(AL.oi)){this.insertParenthesisTokens();}if(AC.ontokensModify){AC.ontokensModify();}AD=this.selectedIndices;if(AJ.t===12&&AL.ift&&!AL.exv){for(AK in AD){AE=AI[AK];if(AE){AF.startTokenSuggestion(AE);}}}AF.clearSelect(true);B.removeClass(AF.domNode,"unselectable");};},clear:function k(){this.curFormIdx=0;this.delForms=[];this.attrid=null;b();this.set("forms",[H("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",s.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},validateCurrentForm:function C(AD){var AE=this,AF=this.validateBtn,AC=function(AG){E(AF,false);AE.set("vStatus",AG.vs);AE.set("iStatus",AG.rjed||"");AE.updateInputBoxItems({items:AG.items});AE.statusNode.style.display="block";AE.handleValidation(AG);if(AD){AD(AG.items,AG.vs===s.VALID);}};AE.set("vStatus",s.VALIDATING);E(AF,true);G(this.attrid,{items:this.inputBox.items},AE.curFormIdx===0,AC);},validateAllForms:function AA(AE){var AF=this,AD=AF.forms,AC=0,AG=function(AJ){var AI=(AC===0);if(AJ){var AH=AD[AC-1];AH.ftk=AJ.items;AH.vs=AJ.vs;AH.is=AJ.rjed||"";AH.tokenXML=U({items:AJ.items});if(AJ.vs!==s.VALID){AF.selectFormTab(AC-1);AF.handleValidation(AJ);if(AE){AE(null,false);}return ;}}if(AC===AD.length){if(AE){AE(AD,true);}return ;}G(AF.attrid,{items:AD[AC++].ftk},AI,AG);};P(AF);AG();},continueValidataion:function R(){this.validateCurrentForm();},getStatusDesc:function j(AC){return{0:mstrmojo.desc(11655,"Valid Formula.")}[AC];},onObjectInsert:function I(AF){var AG=this.inputBox,AE=J(AF),AC=AG.insertTokens([AE]),AD;if(AF.t===12&&AE.ift&&!AE.exv){AD=AG.ctxtBuilder.itemWidgets[AC];if(AD){AG.startTokenSuggestion(AD);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=h;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=a;mstrmojo.ME.AttributeEditBox.mapErrorCode=f;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=U;mstrmojo.ME.AttributeEditBox.validateSyntax=G;mstrmojo.ME.AttributeEditBox.prepareInsertToken=J;mstrmojo.ME.AttributeEditBox.AEHelpFn=Z;}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.array","mstrmojo.string","mstrmojo.expr","mstrmojo.date","mstrmojo.ValidationTextBox","mstrmojo.DateTextBox");var U=mstrmojo.array,R=mstrmojo.css,J=mstrmojo.string,Q=mstrmojo.date,P=mstrmojo.expr,B=P.FN,E=mstrmojo.validation;var A={};A[B.BETWEEN]=B.NOT_BETWEEN;A[B.NOT_BETWEEN]=B.BETWEEN;A[B.GREATER_EQUAL]=B.LESS;A[B.LESS]=B.GREATER_EQUAL;A[B.LESS_EQUAL]=B.GREATER;A[B.GREATER]=B.LESS_EQUAL;A[B.SEARCH]=B.SEARCH;function I(V){if(this.value!==this._lastInput){S.call(this,V,true);}}function N(V){mstrmojo.DateTextBox.prototype.onclick.call(this,V);R.addClass(this.calendar&&this.calendar.domNode,mstrApp.getThemeClassName());}function S(V,a){var Z=this.parent.parent;if(!Z._inSyncPhase){var X=this.calendar&&this.calendar.cal,Y=this,W=Z.submitTimer;if(W){window.clearTimeout(W);}if(!mstrApp.isWaiting()){if(a||X&&X.value===this.value){this._lastInput=this.value;Z.submit(Y);}else{Z.submitTimer=window.setTimeout(function(){Y._lastInput=Y.value;Z.submit(Y);},3000);this.set("dynDateValue",null);if(X){X.set("value",this.value);}}}else{if(this._lastInput){this.set("value",this._lastInput);}}}}function L(Y){if(!Y.isDyn){return null;}var X=["isDyn"];X.push(Y.dyt||0);X.push(Y.ddo||0);X.push(Y.dmo||0);X.push(Y.dm||0);X.push(Y.dd||0);X.push(Y.dw||0);X.push(Y.dow||0);X.push(Y.v||"");if(Y.dtp===P.DTP.TIMESTAMP){var W=Q.parseDateAndOrTime(Y.v||""),V=W&&W.time;if(V){Y.dh=V.hour;Y.dmi=V.min;Y.ds=V.sec;}}X.push(Y.dh||0);X.push(Y.dmi||0);X.push(Y.ds||0);return X.join("::");}function C(b,V,Y){return{parent:b,dt:V,f:Y,setDataType:function Z(f){this.dt=f;},setFunction:function d(g){this.f=g;},hasSecTextBox:function W(){var g=this.f;return g!==B.SEARCH;},adjustVisibleFields:function a(){var f=this.parent;if(!this.hasSecTextBox()){f.toBox.set("visible",false);f.fromBox.fromLabel.set("visible",false);}if(V===P.DTP.DATE||V===P.DTP.TIMESTAMP){f.fromBox.fromInput.set("visible",false);f.toBox.toInput.set("visible",false);}else{f.fromBox.fromPicker.set("visible",false);f.toBox.toPicker.set("visible",false);}},setMinMaxToInputs:function e(j,h){if(!this.hasSecTextBox()){return ;}var f=j.value&&j.validationStatus&&j.validationStatus.code===E.STATUSCODE.VALID,g=h.value&&h.validationStatus&&h.validationStatus.code===E.STATUSCODE.VALID;if(j.constraints){j.constraints.min=null;j.constraints.max=g?h.value:null;}if(h.constraints){h.constraints.min=f?j.value:null;h.constraints.max=null;}},passValueToInputs:function X(g){var j=this.parent,l,k,h=this,f=function(o,p){if(h.f===B.SEARCH||o.v!=="*"){p.set("value",o.v);p._lastInput=o.v;if(V===P.DTP.DATE||V===P.DTP.TIMESTAMP){p.set("dynDateValue",L(o));}}};if(V===P.DTP.DATE||V===P.DTP.TIMESTAMP){l=j.fromBox.fromPicker;k=j.toBox.toPicker;}else{l=j.fromBox.fromInput;k=j.toBox.toInput;}if(Y===B.BETWEEN||Y===B.NOT_BETWEEN){if(g&&g[0]){f(g[0],l);}else{l.set("value",l.min||"");l._lastInput=l.min||"";}if(this.hasSecTextBox()&&g&&g[1]){f(g[1],k);}else{k.set("value",k.max||"");k._lastInput=k.max||"";}}else{if(Y===B.GREATER_EQUAL||Y===B.LESS){if(g&&g[0]){f(g[0],l);k.set("value",k.max||"");k._lastInput=k.max||"";}}else{if(Y===B.LESS_EQUAL||Y===B.GREATER){if(g&&g[0]){f(g[0],k);l.set("value",l.min||"");l._lastInput=l.min||"";}}}}this.setMinMaxToInputs(l,k);}};}mstrmojo.vi.ui.rw.selectors.AttrQualInputBox=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.rw.selectors.AttrQualInputBox",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},cssClass:"Attr-Qual-InputBox",children:[{scriptClass:"mstrmojo.Box",alias:"fromBox",cssClass:"from-box",children:[{scriptClass:"mstrmojo.Label",alias:"fromLabel",cssDisplay:"inline-block",cssClass:"input-label",text:"<span>"+mstrmojo.desc(146,"From:")+"</span>",allowHTML:true},{scriptClass:"mstrmojo.ValidationTextBox",alias:"fromInput",cssDisplay:"inline-block",required:false,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onEnter:I,onblur:I,_lastInput:null,bindings:{dtp:"this.parent.parent.dt"}},{scriptClass:"mstrmojo.DateTextBox",alias:"fromPicker",cssDisplay:"inline-block",required:false,calendarToBody:true,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onvalueChange:S,onEnter:I,onblur:I,_lastInput:null,bindings:{dtp:"this.parent.parent.dt",min:"this.parent.parent.min",max:"this.parent.parent.max",defaultDate:"this.parent.parent.min",showAdvanced:"this.parent.parent.showAdvanced",canSelectDisabledDate:"this.parent.parent.canSelectDisabledDate"},onclick:N}]},{scriptClass:"mstrmojo.Box",alias:"toBox",cssClass:"to-box",children:[{scriptClass:"mstrmojo.Label",alias:"toLabel",cssDisplay:"inline-block",cssClass:"input-label",text:"<span>"+mstrmojo.desc(147,"To:")+"</span>",allowHTML:true},{scriptClass:"mstrmojo.ValidationTextBox",alias:"toInput",cssDisplay:"inline-block",required:false,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onEnter:I,onblur:I,_lastInput:null,bindings:{dtp:"this.parent.parent.dt"}},{scriptClass:"mstrmojo.DateTextBox",alias:"toPicker",cssDisplay:"inline-block",required:false,calendarToBody:true,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onvalueChange:S,onEnter:I,onblur:I,_lastInput:null,bindings:{dtp:"this.parent.parent.dt",min:"this.parent.parent.min",max:"this.parent.parent.max",defaultDate:"this.parent.parent.max",showAdvanced:"this.parent.parent.showAdvanced",canSelectDisabledDate:"this.parent.parent.canSelectDisabledDate"},onclick:N}]}],setupScrollNodes:function F(){this.scrollNode=this.supportScrollbar?this.containerNode:null;},widgetResized:function(){var Y=this,V=parseInt(this.width,10),W=["fromBox","toBox"],Z,X,a;if(!this.widgetHelper.hasSecTextBox()){W=["fromBox"];}if(V>368){X=true;}else{X=false;}if(Y.parent.isInFilterPanel()||!this.widgetHelper.hasSecTextBox()){X=false;return ;}window.setTimeout(function(){Z=Y.hasRendered;if(Y.fromBox&&Y.fromBox.domNode){a=Y.fromBox.fromLabel.domNode.children[0].offsetWidth+Y.fromBox.fromPicker.domNode.offsetWidth;a+=Y.toBox.toLabel.domNode.children[0].offsetWidth+Y.toBox.toPicker.domNode.offsetWidth;a+=80;}U.forEach(W,function(b){if(Z){if(a>V){X=false;}R.toggleClass(Y[b].domNode,"onerow",X);Y[b].domNode.style.display=X?"inline-block":"block";}else{if(X){R.addWidgetCssClass(Y[b],"onerow");Y[b].cssDisplay="inline-block";}else{R.removeWidgetCssClass(Y[b],"onerow");Y[b].cssDisplay="block";}}});if(Y.supportScrollbar){Y.updateScrollbars();}},0);},init:function O(V){if(this._super){this._super(V);}if(this.supportScrollbar){mstrmojo.hash.copy({markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"><div style="height: {@height}; width: {@width}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}}},this);}this.widgetHelper=C(this,this.dt,this.f);this.updateWidgetByData();},update:function D(V){if(V){this.cs=V.cs;if(V.f){this.f=V.f;}if(V.ft){this.ft=V.ft;}if(V.fid){this.fid=V.fid;}if(V.min){this.set("min",V.min);}if(V.max){this.set("max",V.max);}}this.updateWidgetByData();},updateWidgetByData:function M(){var V=this.widgetHelper,W=this.cs;this._inSyncPhase=true;V.adjustVisibleFields();V.passValueToInputs(W);this._inSyncPhase=false;},onincludeChange:function G(){this.f=A[this.f];if(!this._inSyncPhase){this.onchange();}},submit:function H(d){var a=this.cs=[],Y=this.parent.include,X=this.widgetHelper,W=(d.validationStatus.code===E.STATUSCODE.VALID),g=this.parent.model,e=d,f=d,Z;if(X.hasSecTextBox()){if(d.alias==="toInput"){Z=this.fromBox.fromInput;}else{if(d.alias==="toPicker"){Z=this.fromBox.fromPicker;}else{if(d.alias==="fromInput"){Z=this.toBox.toInput;}else{if(d.alias==="fromPicker"){Z=this.toBox.toPicker;}}}}e=(d.alias.indexOf("from")===0)?d:Z;f=(d.alias.indexOf("to")===0)?d:Z;X.setMinMaxToInputs(e,f);Z.validate();if(Z.validationStatus.code!==E.STATUSCODE.VALID){W=false;}}if(W){if(X.hasSecTextBox()){var V=e.dynDateValue||e.value,b=f.dynDateValue||f.value;this.unset=J.isEmpty(V)&&J.isEmpty(b);if(!J.isEmpty(V)&&!J.isEmpty(b)){a[0]={v:V};a[1]={v:b};this.f=Y?B.BETWEEN:B.NOT_BETWEEN;}else{if(!J.isEmpty(V)){if(g.isFromSolrCube&&g.isFromSolrCube(this.srcid)){a[0]={v:V};a[1]={v:"*"};this.f=Y?B.BETWEEN:B.NOT_BETWEEN;}else{a[0]={v:V};this.f=Y?B.GREATER_EQUAL:B.LESS;}}else{if(!J.isEmpty(b)){if(g.isFromSolrCube&&g.isFromSolrCube(this.srcid)){a[0]={v:"*"};a[1]={v:b};this.f=Y?B.BETWEEN:B.NOT_BETWEEN;}else{a[0]={v:b};this.f=Y?B.LESS_EQUAL:B.GREATER;}}}}X.setMinMaxToInputs(e,f);}else{a[0]={v:d.value};this.unset=J.isEmpty(a[0].v);this.f=B.SEARCH;}this.onchange();if(this.makeSelection){this.makeSelection({selItem:this.domNode});}}},getSummaryText:function K(){var X=this.cs||[],Y=this.f;if(this.unset||!X.length||J.isEmpty(X[0].v)&&(X.length<=1||J.isEmpty(X[1].v))){return"";}var W="",V=this.parent.include;switch(Y){case B.BETWEEN:case B.NOT_BETWEEN:W=mstrmojo.desc(4804).replace("##",X[0].v).replace("###",X[1].v);break;}if(!V){W=mstrmojo.desc(1099,"Not")+" "+W;}return W;}});}());(function(){mstrmojo.requiresCls("mstrmojo.MobileCalendar","mstrmojo._IsAndroidInputControl","mstrmojo.android._HasPreviewButton");mstrmojo.android.inputControls.CalendarDIC=mstrmojo.declare(mstrmojo.MobileCalendar,[mstrmojo._IsAndroidInputControl,mstrmojo.android._HasPreviewButton],{scriptClass:"mstrmojo.android.inputControls.CalendarDIC",onpopupResized:function A(C){var B=this.domNode;if(B){B.style.zoom=parseInt((95*C.width/B.offsetWidth),10)+"%";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.android.SimpleList","mstrmojo._HasLayout","mstrmojo._SupportsEllipsisText","mstrmojo.date","mstrmojo.string","mstrmojo.num","mstrmojo.hash","mstrmojo.expr","mstrmojo.StringBuffer","mstrmojo.android.ui.ElementsSearchBar","mstrmojo.GeoLocation","mstrmojo.android.ui.Button","mstrmojo.android.ui.TextInput","mstrmojo.ui.MobileSlider","mstrmojo.MobileCalendar","mstrmojo.android.ui.Calendar","mstrmojo.android.ui.ElementsPicker","mstrmojo.android._HasLingeringListSelections","mstrmojo.locales.datetime","mstrmojo.prompt.WebPrompt","mstrmojo.ui.MobileDateTimePicker","mstrmojo.ui.MobileReviewList","mstrmojo.array","mstrmojo.BarcodeReader","mstrmojo.string");mstrmojo.requiresDescs(189,221,1442,6149,8382,8383,8384,8397,8761);var e=mstrmojo.date,O=mstrmojo.desc,P=mstrmojo.prompt.WebPrompt.STYLES,Z=mstrmojo.prompt.WebPrompt.TYPES,H=mstrmojo.num,AA=mstrmojo.android.ui.Button.newButton,R=mstrmojo.hash,j=mstrmojo.array,B=mstrmojo.dom.CSS3_TRANSITION_DURATION,Q=mstrmojo.expr,V={160:10,213:10,240:15,320:20};var b="<em>*</em>",L="item-icon",N="main-btn",q="item-btn",AE="Barcode",U="GeoLocation";var G={};var W=' onclick="mstrmojo.all.{@wid}.clickStepper({@idx}, false);"',x=W.replace("false","true");function AC(AG,AF,AH){try{AG.setAnswerValue.apply(AG,AH);}catch(AI){mstrmojo.alert(AI.message||AI);return false;}this.updateItem(AF);return true;}function a(AH,AG){var AF=[],AI=[];j.forEach(AH,function(AJ){AF[AJ.v]=AJ;AI.push(AJ);});j.forEach(AG,function(AJ){if(AF[AJ.v]){return ;}AI.push(AJ);});return AI;}function S(AH,AL){var AG=[],AF=AL.length,AK=0,AJ=0,AM=0,AI=AH.length;for(AK=0;AK<AI;AK++){for(AJ=AM;AJ<AF;AJ++){if(AH[AK].v===AL[AJ].dssid){AG.push(AL[AJ]);AM=AJ+1;break;}}}return AG;}function AD(AK,AN,AS,AQ,AL,AP,AT,AG){var AR=this,AO={title:O(9755,"Prompt Values")},AI=[],AH,AJ,AM,AU,AF=function(){AO.children=AI;AH=function(){if(AM.deleteAction){var AZ,AX=0,AW;var AY=[].concat(AN);for(AW in AU.selectedIndices){AZ=parseInt(AW,10)-AX++;AS.splice(AZ,1);AY.splice(AZ,1);}AU.set("items",AY);AN=AY;AU.set("height","auto");AM.resizeDialog();AM.setDeleteActions("done");return false;}AC.call(AL,AT,AP,[a.call(this,AT.answer.items||[],AU.items)]);AM.close();};AJ=function(){AM.close();mstrmojo.BarcodeReader.readBarcodes({attributeID:AK.browseElements.source.did,searchForms:AT.prs.LookupForm,multiSelect:AG},AR,null,S(AU.items,AS),AQ);};var AV=AA(O(8473,"Done"),AH);AV.alias="deleteBtn";AO.buttons=[AA(O(221,"Cancel"),AJ),AV];AM=mstrApp.showDialog(AO);AM.setDeleteActions=function(AW){if(AW==="delete"){this.selectionHidden=false;this.deleteAction=true;this.titleNode.lastChild.style.display="block";this.btnHbox.deleteBtn.set("text",O(629,"Delete"));mstrmojo.css.removeClass(AU.domNode,"hidden");}else{this.selectionHidden=true;this.deleteAction=false;this.titleNode.lastChild.style.display="none";this.btnHbox.deleteBtn.set("text",O(8473,"Done"));}};AM.updateTitleBarButtonClass=function(AW){AM.titleNode.lastChild.className="mstrmojo-Editor-titlebar-button "+AW;};AM.createTitleBarButton("mstrmojo-Editor-titlebar-button btnCheckSemi",function(){AU.selectAll();});AM.setDeleteActions("done");return AM;};AU=new mstrmojo.ui.MobileReviewList({controller:this.controller,isElastic:true,multiSelect:true,itemIdField:"v"});AO.useMenu=false;AI.push(AU);AU.set("items",AN);AF();}function D(){return(this._clkTarget.className===L);}function I(AI,AH,AF){var AG=AI.prs;return(AI.getStyle()===AH||(AG&&AG.DisplayStyle===AF));}function h(AF){if(I(AF,P.BARCODE,AE)||I(AF,P.GEO,U)){return(D.call(this))?q:N;}return"";}function g(AF){if(parseInt(AF.promptType,10)===Z.ELEMENTS_PROMPT&&AF.answer){return" ("+AF.getAnswersCount()+")";}return"";}function l(AH,AO){var AQ=this.items[AO];if(AQ.isTtl){return ;}var AP=AH.firstChild.childNodes,AG=AP[0],AF=AP[1],AI=!!AQ.req,AN=g(AQ),AM=this.ellipsisText,AL;if(AI){AG.innerHTML=b+AG.innerHTML.replace(b,"");}var AK=this.ellipsize("h3",AG,false);if(AI){AL=AG.innerHTML.replace(b,"");AG.innerHTML=AK?AL.replace(AL.slice(-1),b+AM):AL+b;}var AJ=this.ellipsize("h4",AF,true);if(AJ&&AN){AF.innerHTML=mstrmojo.string.trim(AF.innerHTML.slice(0,-(AN.length+3)))+AM+AN;}}function o(AF){var AG=["prompts-dialog"];if(mstrApp.isTablet()&&mstrApp.isLandscape()){AG.push("prompts-landscape");}if(AF){AG.push(AF);}return AG.join(" ");}function z(AF){var AG=this.id;return R.copy(AF,{cssClass:o(),onClose:function(){var AH=mstrmojo.all[AG];AH.parent.closePrompt();AH.clearSelect();}});}function f(AH,AI,AG,AK,AF,AL){AH.children=AI;var AJ=[];if(!AF){AJ.push(AA(O(221,"Cancel")));}if(AK){AJ.push(AA(O(1442,"OK"),AK));}AH.buttons=AJ;if(mstrApp.isTablet()){AH.anchor=this._getItemNode(AG);AH.anchorOrientation="h";AH.autoClose=true;AH.anchorOffset=V[mstrMobileApp.getDeviceDPI()];}this.parent.openPrompt(function(){mstrApp.showDialog(AH,AL);});}function w(AG,AF){var AH=this.id;mstrmojo.BarcodeReader.readBarcodes(null,{success:function(AJ){if(AG.promptType===Z.CONSTANT_PROMPT&&AG.dataType===mstrmojo.mstr.EnumDataType.DataTypeBigDecimal){var AI=mstrApp.getLocaleInfo();AJ=AJ.substr(0,1)+((AI&&AI.number.DECIMALSEPARATOR)||".")+AJ.substr(1);}if(!AC.call(mstrmojo.all[AH],AG,AF,[AJ])){return false;}},failure:function(AI){AG.setError(AI);mstrmojo.all[AH].updateItem(AF);}});}function M(AH,AF){var AI=this.id,AG="plTxtInputxz";f.call(this,z.call(this,{title:AH.title}),[{scriptClass:"mstrmojo.android.ui.TextInput",id:AG,alias:"textInput",textValue:AH.getDisplayValue(false,false)||"",onEnter:function(AJ){if(!AC.call(mstrmojo.all[AI],AH,AF,[AJ])){return ;}mstrApp.closeDialog();}}],AF,function(){if(!AC.call(mstrmojo.all[AI],AH,AF,[mstrmojo.all[AG].getValue()])){return false;}});}function Y(AQ,AN){var AI=this.id,AJ=AQ.answer.items||[],AK=AQ.getAvailable(),AO=I(AQ,P.BARCODE,AE),AH=D.call(this),AL=AQ.prs,AG=(AQ.max===""||parseInt(AQ.max,10)>1)&&AL.DisplayStyle!=="Option button",AF=AL.SearchRequired,AM=AF&&AF!=="0";AK.concat=true;var AP=function(){var AT=mstrmojo.all[AI];if(AO&&AH){mstrmojo.BarcodeReader.readBarcodes({attributeID:AK.source.did,searchForms:AQ.prs.LookupForm,multiSelect:AG},{success:function(AY){var AX=JSON.parse(AY),AV=AK.convertElems(AX.items);if(AX.review){var AW=new mstrmojo.android.ui.ElementsPicker({isElastic:true,itemIdField:"v",multiSelect:true});AW.set("browseElements",AK);AW.addSelectedItems(AV);AD.call(this,AW,AV,AX.items,AX.displayKeypadView,AT,AN,AQ,AG);}else{AC.call(AT,AQ,AN,[a.call(this,AJ,AK.convertElems(JSON.parse(AY).items))]);}}});}else{var AS=new mstrmojo.android.ui.ElementsPicker({isElastic:true,itemIdField:"v",multiSelect:AG});AS.set("browseElements",AK);AS.addSelectedItems(AJ);var AU=new mstrmojo.android.ui.ElementsSearchBar({slot:"titleNode",target:AS,browseElements:AK,searchForms:AO?AQ.prs.LookupForm:undefined,searchRequired:AM,canSearch:AQ.canSearch(),title:AQ.title});var AR=function(){var AW;if(AG){AW=function(){AS.syncSelection();return AC.call(AT,AQ,AN,[AS.getSelectedItems()]);};}else{var AV=AS.singleSelect;AS.singleSelect=function(AX,AY){AV.call(this,AX,AY);if(AX!=-1&&!AY){AC.call(AT,AQ,AN,[AS.getSelectedItems()]);this.parent.close();return true;}};}f.call(AT,z.call(AT,{title:O(6149,"Select Elements"),cssClass:o("edtElementPicker"),goBack:function(){return AU.goBack();}}),[AU,AS],AN,AW,false);};if(I(AQ,P.GEO,U)&&AH){AQ.getGeoTargetValue({success:function(AV){var AW=AQ.searchTarget,AX=AU.search.box;AU.initSearchValue=AV;AU.canSearch=true;if(AW){AU.initSearchValue='in "'+AV+'"';AU.searchTarget=AW;AX.searchValue=AV;}AR();}});}else{AR();}}};if(AK.browseConfig){AK.getItems(1,{success:AP});}else{AP();}}function u(AL,AF){var AJ=z.call(this,{title:AL.title,cssClass:o("edtSlider")}),AG=AL.getDisplayValue(true,false),AI=new mstrmojo.Label({text:AG,cssClass:"value"}),AH=new mstrmojo.Label({text:AL.mn,cssClass:"title"}),AM=this.id;var AK=new mstrmojo.ui.MobileSlider({value:H.parseNumeric(AG),max:AL.max,min:AL.min,interval:AL.interval,onvalueChange:function(){AI.set("text",H.toLocaleString(this.value));},onslidingValueChange:function(){AI.set("text",H.toLocaleString(this.slidingValue));},onRender:function(){this.parent.attachEventListener("resizeCurtain",this.id,this.resize);}});f.call(this,AJ,[AI,AH,AK],AF,function(){if(!AC.call(mstrmojo.all[AM],AL,AF,[String(AK.value)])){return false;}});}function AB(AO,AN,AK){var AH=z.call(this,{title:AO.title}),AI=mstrmojo.date,AM=mstrmojo.locales.datetime,AP=AO.answer,AJ=AO.min,AL=AO.max,AF=new mstrmojo.ui.MobileDateTimePicker({value:AI.parseDateAndOrTime(AP||""),min:AI.parseDateAndOrTime(AJ||""),max:AI.parseDateAndOrTime(AL||""),minuteInterval:AO.interval,hideSwitchers:AK==Q.DTP.DATE,dtp:AK||Q.DTP.TIMESTAMP}),AG=this.id;f.call(this,AH,[AF],AN,function(){var AQ=AF.getDateTime(),AT=AQ&&AQ.date,AV=AQ&&AQ.time,AR=(AT&&AI.formatDateInfo(AT,AM.DATEOUTPUTFORMAT))||"",AU=(AV&&AI.formatTimeInfo(AV,AM.TIMEOUTPUTFORMAT))||"",AS=[AR+" "+AU];if(AO.promptType===Z.ELEMENTS_PROMPT){AS=[AS];}if(!AC.call(mstrmojo.all[AG],AO,AN,AS)){return false;}});}function d(AO,AN){var AL={alias:"calendar"},AM=AO.max,AF=this.id,AH,AG,AK=false,AJ=this.parent.domNode,AI=R.copy(z.call(this,{cssClass:o()}),{targetListHeight:AJ.clientHeight,targetListWidth:AJ.clientWidth});switch(AO.promptType){case Z.CONSTANT_PROMPT:AK=true;break;case Z.ELEMENTS_PROMPT:if(1===parseInt(AM,10)){AK=true;break;}AI.title=O(8383,"Select Dates");AL.min=e.parseDate(AO.prs.LocalizedMinDate||"");AL.max=e.parseDate(AO.prs.LocalizedMaxDate||"");AL.selectedDates=AO.getAnswerAsDateArray();AL.isMultiSelect=true;AH=function(){try{AO.setAnswerValue(AG.getSelectedDates());}catch(AP){mstrmojo.alert(AP.message||AP);return false;}AO.syncDateAnswer({success:function(){mstrApp.closeDialog();var AQ=mstrmojo.all[AF];AQ.updateItem(AN);AC.call(AQ,AO,AN,[AG.getSelectedDates()]);},failure:function(AQ){window.setTimeout(function(){mstrmojo.alert(AQ);},0);}});return false;};break;default:throw new Error(O(8397,"Error: Unknown prompt type."));}if(AK){AB.call(this,AO,AN,Q.DTP.DATE);}else{AG=new mstrmojo.android.ui.Calendar(AL);f.call(this,AI,[AG],AN,AH,false,"CalendarDialog");}}function F(AG,AF){var AH=this.id;mstrmojo.confirm(O(8384,'"MicroStrategy" Would Like to use Your Current Location.'),[AA(O(221,"Cancel")),AA(O(1442,"OK"),function(){mstrmojo.GeoLocation.getCurrentLocation({success:function(AK,AI,AJ){AC.call(mstrmojo.all[AH],AG,AF,[AK,AI]);},failure:function(AI){AG.setError(AI);mstrmojo.all[AH].updateItem(AF);}});})]);}function J(AG,AF){AG.toggleSwitch();this.updateItem(AF);}var t={};t[P.BARCODE]=w;t[P.TEXT]=M;t[P.LIST]=Y;t[P.SLIDER]=u;t[P.CALENDAR]=d;t[P.TIME]=AB;t[P.GEO]=F;t[P.SWITCH]=J;mstrmojo.android.ui.PromptsList=mstrmojo.declare(mstrmojo.android.SimpleList,[mstrmojo._SupportsEllipsisText,mstrmojo.android._HasLingeringListSelections],{scriptClass:"mstrmojo.android.ui.PromptsList",listHooks:{select:function(AH,AI,AF){var AG=h.call(this,AI);if(AG){mstrmojo.css.addClass(AH,AG);}AH.style[B]=0;this.setClearHandler(200);},unselect:function(AH,AI,AF){var AG=h.call(this,AI);if(AG){mstrmojo.css.removeClass(AH,AG);}AH.style[B]="300ms";}},getItemMarkup:function(AH){if(AH.isTtl){return'<div class="item {@cls}" idx="{@idx}">{@ttl}</div>';}var AG=AH.getStyle(),AK=I(AH,P.GEO,U)||I(AH,P.BARCODE,AE),AI=AG+String(AH.req)+(AK?"ic":""),AF=G[AI];if(!AF){var AJ=new mstrmojo.StringBuffer();AJ.append('<div class="item {@cls}" idx="{@idx}"><div><h3>{@ttl}'+b+"</h3><h4>{@val}</h4>");if(AG===P.STEPPER){AJ.append('<div class="step"><div'+W+"></div><div>{@v}</div><div"+x+"></div></div>");}else{if(AK||AG===P.SWITCH){AJ.append('<div class="'+L+'"><div></div></div>');}}AF=G[AI]=AJ.toString()+"</div></div>";}return AF;},getItemProps:function k(AJ,AF){var AI=this._super(AJ,AF);AI.ttl=AJ.title;if(AJ.isTtl){AI.addCls("ttl");return AI;}var AH=AJ.getStyle(),AK=(AH===P.STEPPER||AH===P.SWITCH),AG=AJ.getDisplayValue(AK,AK);if(I(AJ,P.BARCODE,AE)){AI.addCls("bar");}else{if(I(AJ,P.GEO,U)){AI.addCls("geo");}}AI.wid=this.id;AI.val=AG||"";AI.addCls("st"+AH);if(AJ.req){AI.addCls("req");}switch(AH){case P.STEPPER:if(!AJ.canStepUp()){AI.addCls("max");}if(!AJ.canStepDown()){AI.addCls("min");}AI.v=AG;AI.val=AJ.mn||"";break;case P.SWITCH:AI.val=AJ.mn||"";if(AG){AI.addCls("on");}break;case P.GEO:if(!AJ.displayLoc){AJ.getDisplayLocation(this,AG);}break;}if(AI.val){AI.addCls("has-ans");}return AI;},updateItem:function p(AF){l.call(this,this._super(AF),AF);},allowTouchBubble:false,onRender:function C(){if(this._super){this._super();}var AF=this.itemsContainerNode.childNodes,AH=AF.length,AG;for(AG=0;AG<AH;AG++){l.call(this,AF[AG],AG);}},clickStepper:function E(AF,AG){this.items[AF]["step"+(AG?"Up":"Down")]();this.updateItem(AF);},postselectionChange:function A(AG){var AI=AG.added;if(!AI){return ;}var AF=AI[0],AJ=this.items[AF],AH=AJ.getStyle();if(AH===P.BARCODE&&!D.call(this)){AH=P.TEXT;}var AK=t[AH];if(AK){AK.call(this,AJ,AF);}},rootOrientationChange:function K(){this.refresh();},touchSelectBegin:function X(AL){var AF=this.getItemIdxTouch(AL);if(AF>-1){var AI=this.items[AF],AG=AI.getStyle(),AK=[];var AH=AI.mn||"";if(AH){AK.push(AH);}if(!(AG===P.SWITCH)&&!(AG===P.STEPPER)){var AJ=AI.getDisplayValue(false,false);if(AJ){AK.push(AJ);}}if(AI.req){AK.push(O(475,"This prompt is required and must be answered."));}if(AK.length){mstrmojo.alert(AK.join("<br /><br />"),null,O(189,"Details"));}return false;}return true;},touchTap:function s(AF){var AG=this.items[this.getItemIdxTouch(AF)];if(AG&&AG.isTtl){return ;}this._clkTarget=AF.target;this._super(AF);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.android.ui.PromptsList","mstrmojo.android.ui.Button");mstrmojo.requiresDescs(2550,3649,3650);var D=mstrmojo.desc,E="100%";function G(J,K){var L=this.parent;if(L[J]){L[J].apply(L,K);return true;}return false;}var C=mstrmojo.android.ui.PromptsView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.android.ui.PromptsView",markupString:'<div id="{@id}" class="mstrmojo-Prompts {@cssClass}" style="{@cssText}"><div class="summary"></div><div class="command"></div></div>',markupSlots:{summaryNode:function(){return this.domNode.firstChild;},cmdNode:function(){return this.domNode.lastChild;}},layoutConfig:{h:{summaryNode:E,cmdNode:"90px"},w:{summaryNode:E,cmdNode:E}},init:function I(M){this._super(M);var L=this.prompts,K=this.supportedPrompts;if(L&&K){var J=mstrmojo.android.ui.Button.newButton((L.host.st===14081)?D(3650,"Run Document"):D(3649,"Run Report"),function(){this.parent.controller.answerPrompts();},{slot:"cmdNode",alias:"cmdButton",cssClass:"mstrmojo-GlowButton",ignoreLayout:true,enabled:mstrMobileApp.isOnline(),glowClass:"glow"});var N=mstrmojo.publisher;N.subscribe(N.NO_SRC,N.CONNECTIVITY_CHANGED_EVENT,function(O){this.cmdButton.set("enabled",O);},this.id);this.addChildren([J]);if(mstrApp.isTablet()){K=[{title:D(2550,"FILTERS"),isTtl:true}].concat(K);}this.promptList.set("items",K);}},rootOrientationChange:function F(){if(!this.ignoreRotation){mstrApp.closeDialog();}},children:[{scriptClass:"mstrmojo.android.ui.PromptsList",slot:"summaryNode",alias:"promptList",canItemLinger:function H(J){return !mstrApp.isTablet()||J.getStyle()===mstrmojo.prompt.WebPrompt.STYLES.SWITCH;}}],openPrompt:function A(L){var J=this.controller;if(!J.prevController&&!J.nextController){return ;}this.ignoreRotation=true;if(!G.call(this,"openPrompt",[L])){L();}var K=this;window.setTimeout(function(){delete K.ignoreRotation;},300);},closePrompt:function B(){G.call(this,"closePrompt");}});mstrmojo.DPIManager.registerClass(C,"h","cmdNode",{160:60,213:60,240:90,320:120});}());(function(){mstrmojo.requiresCls("mstrmojo.android.AndroidDICPopup","mstrmojo.DefaultDIC","mstrmojo.android.inputControls.SliderDIC","mstrmojo.android.inputControls.TextFieldDIC","mstrmojo.android.inputControls.CheckBoxDIC","mstrmojo.android.inputControls.PullDownDIC","mstrmojo.android.inputControls.RadioListDIC","mstrmojo.android.inputControls.LikertScaleDIC","mstrmojo.android.inputControls.CalendarDIC","mstrmojo.android.inputControls.DateTimePickerDIC","mstrmojo.android.inputControls.TextAreaDIC","mstrmojo.android.inputControls.MarkRowDIC","mstrmojo.android.inputControls.ToggleDIC","mstrmojo.android.inputControls.SignatureDIC","mstrmojo.android.inputControls.StepperDIC","mstrmojo.android.inputControls.RatingDIC","mstrmojo.android.inputControls.BarcodeDIC","mstrmojo.android.ui.Button","mstrmojo.android.nativedialog.DICDialogFactory");mstrmojo.requiresDescs(221,1442);var Q=mstrmojo.android.ui.Button.newButton,B=1,I=2,C=3,E=4,L=5,R=6,D=7,F=8,H=9,U=10,G=12,S=13,P=14,K=102;mstrmojo.android.AndroidDICConfig=mstrmojo.provide("mstrmojo.android.AndroidDICConfig",{DICList:{1:mstrmojo.android.inputControls.TextFieldDIC,2:mstrmojo.android.inputControls.CheckBoxDIC,3:{0:mstrmojo.android.inputControls.PullDownDIC,1:mstrmojo.android.inputControls.RadioListDIC},4:mstrmojo.android.inputControls.SliderDIC,5:mstrmojo.android.inputControls.DateTimePickerDIC,6:mstrmojo.android.inputControls.DateTimePickerDIC,7:mstrmojo.android.inputControls.ToggleDIC,8:mstrmojo.android.inputControls.TextAreaDIC,9:mstrmojo.android.inputControls.SignatureDIC,10:mstrmojo.android.inputControls.RatingDIC,11:mstrmojo.DefaultDIC,12:mstrmojo.android.inputControls.StepperDIC,13:mstrmojo.android.inputControls.BarcodeDIC,14:mstrmojo.android.inputControls.LikertScaleDIC,102:mstrmojo.android.inputControls.MarkRowDIC},DICPopup:{getInstance:function(W,X){var V={scriptClass:"mstrmojo.android.AndroidDICPopup",widget:X,buttons:[Q(mstrmojo.desc(221,"Cancel"),function(){this.parent.parent.onCancel();}),Q(mstrmojo.desc(1442,"OK"),function(){return this.parent.parent.onApply();})],title:X.popupTitle||W.parent.title};if(mstrApp.isNativeAndroid){return mstrApp.showPopup(V);}if(mstrApp.useBinaryFormat){mstrmojo.android.nativedialog.DICDialogFactory.showDialog(V);}else{return mstrApp.showPopup(V);}}},getDICClass:function J(V){if(V.t===C){return this.DICList[V.t][V.st||0];}return this.DICList[V.t];},showDICByDefault:function O(W,V){if(W.sbd===undefined){switch(W.t){case C:W.sbd=(!!W.st);break;case L:case R:case B:case S:W.sbd=false;break;case D:case I:case K:case U:case G:case P:W.sbd=true;break;default:W.sbd=(W.dm===1);}}return W.sbd;},hasDICPreview:function N(W,V){return true;},isKeyNavigable:function M(V){if(V.ikn===undefined){V.ikn=false;}return V.ikn;}});mstrmojo.android.AndroidDICConfig.TYPES={TEXTFIELD:B,SWITCH:I,LIST:C,SLIDER:E,CALENDAR:L,TIMEPICKER:R,TOGGLE:D,TEXTAREA:F,SIGNATURE:H,RATING:U,STEPPER:G,LIKERTSCALE:P};var A=mstrmojo.android.AndroidDICConfig;mstrmojo.DICConfig=A;mstrmojo.DICList=A.DICList;mstrmojo.DICPopup=A.DICPopup;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo._FormatDefinition","mstrmojo.num","mstrmojo.locales","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.dom","mstrmojo.ME.AttributeEditBox","mstrmojo.ME.MetricToken","mstrmojo.string","mstrmojo.dom","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var w=mstrmojo.mstr.EnumFunction,a=mstrmojo.hash,AB=mstrmojo.array,D=mstrmojo.css,Y=mstrmojo.dom,AE=mstrmojo.Button.newWebButton,V=mstrmojo.ME.MetricToken.brackets,AK=mstrmojo.ME.MetricToken.argDelimiter,W=mstrmojo._FormatDefinition,z=mstrmojo.models.datasets.DataInterface,K=mstrmojo.vi.models.VIComponentMap.TYPES,X=mstrmojo.chart.model.enums.EnumDSSObjectType,x=mstrmojo.mstr.EnumDSSXMLBaseFormType,AX=mstrmojo.mstr.EnumDSSXMLObjectTypes,N=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,AI=mstrmojo.mstr.EnumDSSConsolidationType;var b={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},h={SUM:{n:b.SUM,t:w.FunctionSum},ADD:{n:b.ADD,t:w.FunctionPlus},AVG:{n:b.AVG,t:w.FunctionAvg},MAX:{n:b.MAX,t:w.FunctionMax},GST:{n:b.GST,t:w.FunctionGreatest},MIN:{n:b.MIN,t:w.FunctionMin},LST:{n:b.LST,t:w.FunctionLeast},TMS:{n:b.MTP,t:w.FunctionTimes},CNT:{n:b.CNT,t:w.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:w.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:w.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:w.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:w.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:w.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:w.FunctionVar}},d=[{n:b.SUM,t:w.FunctionOLAPSum},{n:b.AVG,t:w.FunctionOLAPAvg},{n:b.MIN,t:w.FunctionOLAPMin},{n:b.MAX,t:w.FunctionOLAPMax},{n:b.CNT,t:w.FunctionOLAPCount}],AV=[{n:b.SUM,t:w.FunctionOLAPSum},{n:b.AVG,t:w.FunctionOLAPAvg},{n:b.MIN,t:w.FunctionOLAPMin},{n:b.MAX,t:w.FunctionOLAPMax},{n:b.CNT,t:w.FunctionOLAPCount}],M=[{n:mstrmojo.desc(1058,"Previous"),t:w.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:w.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:w.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:w.FunctionLast}];var AF={YEAR:"Year",QUARTER:"Quarter",CONCAT:"Concat",QUARTERSTARTDATE:"QuarterStartDate",MONTH:"Month",TOSTRING:"ToString",MONTHSTARTDATE:"MonthStartDate",WEEK:"Week",WEEKSTARTDATE:"WeekStartDate",DAYOFMONTH:"DayOfMonth",DAYOFWEEK:"DayOfWeek",DAYOFYEAR:"DayOfYear"};var AO={};AO[AF.YEAR]="6F7DF5F8449111D5BEA300B0D01A55EF";AO[AF.QUARTER]="6F7DF5F7449111D5BEA300B0D01A55EF";AO[AF.CONCAT]="6F7DF5FF449111D5BEA300B0D01A55EF";AO[AF.QUARTERSTARTDATE]="59E10CE2ADDD4A6DAC2416A72999A9ED";AO[AF.MONTH]="6F7DF5F6449111D5BEA300B0D01A55EF";AO[AF.TOSTRING]="D1ED29645DEC4DBF99E8E09ED939074B";AO[AF.MONTHSTARTDATE]="7C63D4E70B2741C3A5B54A2EFD40961B";AO[AF.WEEK]="6F7DF5F5449111D5BEA300B0D01A55EF";AO[AF.WEEKSTARTDATE]="44681336D0DB4E43AC333FFB3CC4400D";AO[AF.DAYOFMONTH]="6F7DF5F2449111D5BEA300B0D01A55EF";AO[AF.DAYOFWEEK]="6F7DF5F3449111D5BEA300B0D01A55EF";AO[AF.DAYOFYEAR]="6F7DF5F4449111D5BEA300B0D01A55EF";var Q="@form";function e(AZ){var Ab=8,Ac=1,AY=AB.find(AZ.fs,"idf",true);if(AY===-1){return null;}var Aa=AZ.fs[AY];return((AZ.da||Aa.obf)&&(Aa.bftp===Ab||Aa.bftp===Ac))?Aa:null;}var AU={Year:{ID:[AF.YEAR,"(",Q,")"]},Quarter:{ID:[AF.YEAR,"(",Q,") * 10 + ",AF.QUARTER,"(",Q,")"],DESC:[AF.CONCAT,'("Q"',AK,AF.QUARTER,"(",Q,")",AK,' ", "',AK,AF.YEAR,"(",Q,"))"],DATE:[AF.QUARTERSTARTDATE,"(",Q,")"]},QuarterOfYear:{ID:[AF.QUARTER,"(",Q,")"],DESC:[AF.CONCAT,'("Q"',AK,"This@ID)"]},Month:{ID:[AF.YEAR,"(",Q,") * 100 + ",AF.MONTH,"(",Q,")"],DESC:[AF.TOSTRING,'<Pattern="mmm yyyy">(',Q,")"],DATE:[AF.MONTHSTARTDATE,"(",Q,")"]},MonthOfYear:{ID:[AF.MONTH,"(",Q,")"],DESC:[AF.TOSTRING,'<Pattern="mmmm">(',Q,")"]},Week:{ID:[AF.YEAR,"(",Q,") * 100 + ",AF.WEEK,"(",Q,")"],DESC:[AF.CONCAT,'("W"',AK,AF.WEEK,"(",Q,")",AK,' ", "',AK,AF.YEAR,"(",Q,"))"],DATE:[AF.WEEKSTARTDATE,"(",Q,")"]},WeekOfYear:{ID:[AF.WEEK,"(",Q,")"]},DayOfMonth:{ID:[AF.DAYOFMONTH,"(",Q,")"]},DayOfWeek:{ID:[AF.DAYOFWEEK,"(",Q,")"],DESC:[AF.TOSTRING,'<Pattern="ddd">(',Q,")"]},DayOfYear:{ID:[AF.DAYOFYEAR,"(",Q,")"]}};function l(Aa,Ac,Ab,AY){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:Aa,selectedIndex:Ac,onitemSelected:function AZ(Ad){var Ae=this.parent;while(!Ae.data||!Ae.data[Ab]){Ae=Ae.parent;}Ae.data.set(Ab,AY?AY(Ad):Ad.v);}};}function AG(Aa,AZ,AY){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:"),cssClass:"menu-info-text"},a.copy(AY,l(Aa,AZ,"breakBy",function(Ab){return{id:Ab.did,type:Ab.t,dmy:Ab.dmy};}))]};}function AS(Ab){var Ac=Ab.metrics,Ad=Ab.propName,Aa=Ab.optionValueField||"id",AY=AB.find(Ac,Aa,Ab.value),Ae=function Ae(Ag){var Af=this.parent;while(!Af.data||!Af.data.hasOwnProperty(Ad)){Af=Af.parent;}Af.data.set(Ad,Ag?{id:Ag[Aa],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,cssClass:"Calculation-PullDown",items:Ac,selectedIndex:AY,useRichTooltip:true,bindings:Ab.bindings,valid:true,allowCustomText:true,allowEmptyText:true,allowHTML:false,onvalidChange:function AZ(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:Ae,onTextEditComplete:function(){Ae.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:Ab.postkeyup};}function U(Ab,Aa,AZ){if(Ab&&Ab.datap){var AY=AB.filterOne(Ab.datap,function(Ad){return Ad.tbid===Aa;}),Ac=AY&&AY.maps.amps;return AB.filterOne(Ac,function(Ad){return AZ===Ad.aimp.atid;});}return null;}function q(AY,Ac){var Aa=AB.filterOne(AY&&AY.afmps,function(Ad){return Ad.fmid===Ac;}),Ab=Aa&&(Aa.sqc?Aa:Aa.col.oi),AZ;if(Ab&&Ab.sqc){AZ={did:Ab.sqc.id,n:mstrmojo.string.decodeHtmlString(Ab.cln),coldtp:Ab.sqc.dt.tp,georole:Ab.geo,timerole:Ab.tim,der:Ab.sqc.der};}else{if(Ab){AZ={did:Ab.did,n:mstrmojo.string.decodeHtmlString(Ab.def.cln),coldtp:Ab.def.dt.tp,georole:Aa.geo,timerole:Ab.def.dicl.time,der:Ab.def.dicl.der};}}return AZ;}function C(Aa,AZ,Ac){var Ab={success:function(Ad){if(Ad&&Ad.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:Ad.msgid,bindingflag:2,previewflag:261,browsetype:5},Ac);}},failure:function(Ad){mstrApp.onerror(Ad);}};var AY=!!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause());mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:AZ,messageID:Aa,skipRebuild:AY},Ab);}function I(Ad,Ae,Ab){var AZ=Ad.srcTableId,Ag=Ad.tgtTableId,AY,Ac,Aa=function(Ak,Aj){var Am="<mpcs><mpc ",Ai,Al;for(Ai in Aj){Al=Aj[Ai];Am+='$ACT="$VAL" '.replace("$ACT",Ai).replace("$VAL",Al);}Am+="/></mpcs>";return{act:"changeEMMAMapping",tbid:Ak,dsid:Ad.dsid,mapping:Am};},Af=function(){var Ai=[],Al={},Aj,Ak;if(!AY||!Ac){return ;}Al[AZ]={};Al[Ag]={};AB.forEach(AY.afmps,function(Ap){var An=AB.find(Ac.afmps,"fmid",Ap.fmid),Aq,Ao,Am;if(An>=0){Aj=q(AY,Ap.fmid);Ak=q(Ac,Ap.fmid);if(Aj.georole!==Ak.georole){Am=(Aj.georole===0)?AZ:Ag;Aq=(Aj.georole===0)?Aj.did:Ak.did;Ao=Aj.georole||Ak.georole;Al[Am][Aq]=a.copy({did:Aq,georole:Ao},Al[Am][Aq]);}if(Aj.timerole!==Ak.timerole){Am=(Aj.timerole===0)?AZ:Ag;Aq=(Aj.timerole===0)?Aj.did:Ak.did;Ao=Aj.timerole||Ak.timerole;Al[Am][Aq]=a.copy({did:Aq,timerole:Ao},Al[Am][Aq]);}if(Aj.der!==Ak.der){Ao=Aj.der|Ak.der;Al[AZ][Aj.did]=a.copy({did:Aj.did,drvflg:Ao},Al[AZ][Aj.did]);Al[Ag][Ak.did]=a.copy({did:Ak.did,drvflg:Ao},Al[Ag][Ak.did]);}}});a.forEach(Al,function(Am,An){a.forEach(Am,function(Ao){Ai.push(Aa(An,Ao));});});Aj=q(AY,AY.afmps[0].fmid);Ai.push(Aa(AZ,{did:Aj.did,oid:Ac.aimp.atid}));if(Ab){Ab(Ai);}},Ah=function(Ak){var Al={success:function(){Af();}},Aj,Ai;AY=U(Ak,AZ,Ad.srcId);Ac=U(Ak,Ag,Ad.tgtId);Aj=q(AY,AY.afmps[0].fmid);Ai=[Aa(AZ,{did:Aj.did,oid:Ac.aimp.atid,fg:1})];Ae.getDataService().submitUpdates(Ai,Al);};C(Ae.mid,Ad.dsid,{success:Ah});}function Z(Ad,Aa,AZ,Ae){var AY=0,Ac=[],Ab=function(Af){var Ag=AZ[AY-1];if(Af&&Af.tks&&Ag){Ac.push({fid:Ag.fid,fnm:Ag.fnm,ftk:Af.tks.items});}if(AY===AZ.length){Ae(Ac);return ;}Ag=AZ[AY++];mstrmojo.ME.MetricDataService.validateMetric({metricId:Aa,formID:Ag.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:Ad},{success:Ab});};Ab();}function AL(AY,AZ){return{v:V(AY.n)+"@"+V(AZ.fnm),tp:275,lv:1,exv:AZ.fid,extp:8,oi:{did:AY.did,t:AY.t,n:AY.n}};}function H(AZ){var Ab=(AZ.t===AX.Filter||AZ.t===AX.Consolidation),Aa=(AZ.t===AX.Attribute&&AZ.de),AY=(AZ.t===AX.Consolidation&&AZ.st===N.ConsolidationManaged);return !!(Ab&&!AY||Aa);}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function AR(AY){return{"12":[[h.AVG,h.CNT,h.MAX,h.MIN,h.STD,h.SUM,h.VAR]],"4":[[h.SUM,h.AVG,h.MIN,h.MAX,h.CNT],[h.GEM,h.MED,h.MOD,h.PDT,h.STD,h.VAR]]}[AY.t];},isAmongFunctions:function B(AZ,AY){return AY.some(function(Aa){return Aa.some(function(Ab){return Ab.t===AZ;});});},getMultiSelectionShortcutMetricFunctions:function J(AY){var AZ=true;AB.forEach(AY,function(Aa){if(4!==Aa.t){AZ=false;return false;}return true;});return AZ?[h.ADD,h.AVG,h.GST,h.LST,h.TMS]:[];},getRelativeReferenceMenu:function g(Ac,Aa,Af,AY){var Ab=0,AZ=M[Ab],Ae=0,Ad=Af&&Af[Ae];return new mstrmojo.ui.menus.EditorConfig({data:{item:Ac,relativeRef:AZ,breakBy:Ad},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:Aa&&Aa.length,text:Aa,cssClass:"menu-info-text"},a.copy({cssClass:"RelativeReferencePullDown"},l(M,Ab,"relativeRef",function(Ag){return Ag.t;}))]},AG(Af,Ae,{cssClass:"RelativeReferencePullDown"})],fnOk:function(Ag){return AY(Ag.item,Ag.relativeRef,[Ag.breakBy]);}});},getMovingTotalMenu:function A(Ai,Ac,Ae){var Aj=1,Ab=AV[Aj].t,Ad=1,AZ=mstrmojo.desc(13289,"Starting previous##rows").split("##"),Ah=0,Aa=Ac&&Ac[Ah];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:Ai,funcType:Ab,windowSize:Ad,breakBy:Aa},contents:[a.copy({cssClass:"MovingTotalPullDown"},l(AV,Aj,"funcType",function(Ak){return Ak.t;})),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix menu-info-text",text:AZ[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function Ag(){this.set("value",Ad);},_ontooltipover:function(){var Ak=mstrmojo.all[this.id];Ak._hovered=true;Ak.showTooltip();},_ontooltipout:function(){var Ak=mstrmojo.all[this.id];Ak._hovered=false;Ak.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var Ak=this.validationStatus.msg,Al=!(this.richTooltip&&Ak===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:Ak};if(this._hovered&&Al){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function Af(){var Ak=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",Ak?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix menu-info-text",text:AZ[1]}]},AG(Ac,Ah,{cssClass:"MovingTotalPullDown BreakByBox"})],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function AY(Ak){if(Ae){Ae(Ai,Ak.funcType,Ak.windowSize,[Ak.breakBy]);}}});},getRunningTotalMenu:function AQ(Ab,Ae,AZ){var Aa=0,AY=d[Aa].t,Ad=0,Ac=Ae&&Ae[Ad];return new mstrmojo.ui.menus.EditorConfig({data:{item:Ab,func:AY,breakBy:Ac},cssClass:"RunningTotal-MenuEditor",contents:[a.copy({cssClass:"RunningTotalPullDown"},l(d,Aa,"func",function(Af){return Af.t;})),AG(Ae,Ad,{cssClass:"RunningTotalPullDown BreakByBox"})],fnOk:function(Af){return AZ(Af.item,Af.func,[Af.breakBy]);}});},getRankMetricEditor:function AH(Ac,Af,Aa){var AY=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],AZ=0,Ab=AY[AZ].v,Ae=0,Ad=Af&&Af[Ae];return new mstrmojo.ui.menus.EditorConfig({data:{item:Ac,order:Ab,breakBy:Ad},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:"),cssClass:"menu-info-text"},a.copy({cssClass:"NewRankMetricPullDown"},l(AY,AZ,"order"))]},AG(Af,Ae,{cssClass:"NewRankMetricPullDown"})],fnOk:function(Ag){return Aa(Ag.item,Ag.order,[Ag.breakBy]);}});},insertAddUnitToFilterMenu:function G(Ad,AZ,AY){var Ab=this,Aa=mstrmojo.desc(2022,"Add to Filter"),Ac=AB.ensureArray(AY).filter(function(Ae){return Ab.isValidAddToFP(AZ,Ae);});if(Ac.length>0){Ad.addMenuItem(Aa,"",function(){AZ.addFilterStackSelectors(Ac);});}else{Ad.addDisabledMenuItem(Aa,"");}},isValidAddToFP:function O(AZ,Ae,Ag){var Aa=AZ.controller.view.builder,Ac=Aa.getLayoutVIMap(AZ.getCurrentLayoutKey()),Ad=Ac.getComponent(K.FILTER_STACK),Af=true;if(!Ag){Af=(!Ad||AB.find(Ad.getFilterDefinitions(),"srcid",Ae.did)===-1);}if(Af&&Ae.lock){var Ab=Ae.fs||[],AY;Af=false;for(AY=0;AY<Ab.length;AY++){if(Ab[AY].iidx){Af=true;break;}}}return Af;},renameItem:function AA(Ad,Ag,AZ,Ab){var Ac=Ad.mstrmojoId,Af=mstrmojo.dom.findWidget(Ad);Ab=Ab||{};if(!Ac){var Ae=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,editOnTwoClicks:true,text:Ag.n,title:Ag.dsc||"",allowEmptyText:Ab.allowEmptyText,allowTrimming:Ab.allowTrimming||false,cssClass:Ab.cssClass||"",placeholder:Ad,onTextEditComplete:function AY(Ah){if(Ah){return AZ(this);}},onmousedown:function Aa(Ah){if(this.isEditing){Ah.cancel();}}});if(Af&&Af.draggable){Ae.parent=Af;}Ae.render();Ac=Ae.id;}mstrmojo.all[Ac].set("isEditing",true);return mstrmojo.all[Ac];},getMultipleMetricsCalculationMenus:function p(Af,AY,Ai){var Ae=new mstrmojo.ui.menus.MenuConfig(),Ak=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(Af),Ac=function(Am,An,Al){return{dsid:AY,funcType:An,funcType2:Al,items:Am};};Ae.useTooltip=true;Ak.forEach(function(Al){Ae.addMenuItem(Al.n,"",function(){Ai(Ac(Af,Al.t));});});if(Af.length===2){var Ad=mstrmojo.mstr.EnumFunction,Ab=Ad.FunctionDivide,AZ=Ad.FunctionMinus,Ah=Af[0],Ag=Af[1],Aj=function(Ap,An,Al,Ao,Am){Ae.addMenuItem(Ap,"",function(){Ai(Ac([An,Al],Ao,Am));});},Aa=[{n:function(Am,Al){return Am.n+"/"+Al.n;},fn:Ab},{n:function(Am,Al){return Am.n+"-"+Al.n;},fn:AZ},{n:function(Am,Al){return"("+Am.n+"-"+Al.n+")/"+Al.n;},fn:AZ,fn2:Ab}];Aa.forEach(function(Al){Ae.addSeparator();Aj(Al.n(Ah,Ag),Ah,Ag,Al.fn,Al.fn2);Aj(Al.n(Ag,Ah),Ag,Ah,Al.fn,Al.fn2);});}return Ae;},getCalculationMetricEditor:function L(Ag,Ah,Af){var Aa=[{n:"",css:"operator-plus",funcType:w.FunctionPlus},{n:"",css:"operator-minus",funcType:w.FunctionMinus},{n:"",css:"operator-multiply",funcType:w.FunctionTimes},{n:"",css:"operator-divide",funcType:w.FunctionDivide},{n:!mstrApp.isWSStyling?"%":"",css:"operator-percent-diff",funcType:w.FunctionMinus,funcType2:w.FunctionDivide}],Ab={m1:Ah.did,m2:Ag[0].did,operator:w.FunctionPlus,u1:{id:Ah.did,type:4},u2:null},AZ=function(Ai){return{}.hasOwnProperty.call(Ai,"cst");},Ae=function(Ai){return typeof Ai==="string"&&!!Ai.length&&!isNaN(Number(Ai));};var AY="this.parent.popupConfig.valid || this.selectedIndex !== -1 || (!!this.selectedNode && this.selectedNode.innerHTML.length === 0)",Ad=function Ad(){var Ai=this.parent.popupConfig;if(Ai){Ai.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[AS({metrics:Ag,value:Ab.m1,propName:"u1",optionValueField:"did",bindings:{valid:AY},postkeyup:Ad}),{scriptClass:"mstrmojo.ButtonListHoriz",items:Aa,selectedIndex:0,postselectionChange:function Ac(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},AS({metrics:Ag,value:null,propName:"u2",optionValueField:"did",bindings:{valid:AY},postkeyup:Ad})],data:Ab,okEnabled:false,bindings:{valid:function(){var Ak=this.data.u1,Aj=this.data.u2,Al=this.data.operator;if(!Ak||!Aj||!Al){return false;}var Ai=!(AZ(Ak)&&AZ(Aj))&&(!AZ(Ak)||Ae(Ak.cst))&&(!AZ(Aj)||Ae(Aj.cst));this.set("okEnabled",Ai);return Ai;}},fnOk:function(Ai){return Af(Ai.u1,Ai.u2,Ai.operator,Ai.operator2);}});},getCfgForAddUnitFromAllObject:function(AY,AZ){var Aa=null,Ab=null,Ac=[],Ad=function(Ae,Af){if(!Af){return false;}return AB.find((Af.att||[]).concat(Af.mx||[]),"did",Ae.did)>-1;};a.forEach(AZ,function(Af,Ae){if(Af.idd){Aa=Ae;Ab=Af;return false;}return true;});if(!Aa){Aa="$GUID_141";Ac.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[Aa]});}AB.forEach(AY,function(Ae){if(!Ad(Ae,Ab)){Ac.push({act:"addUnitToDataset",dsid:Aa,unitId:Ae.did,unitType:Ae.t});}});return{actions:Ac,dsid:Aa};},getAggregateByMenu:function u(Ad,Ab){var AZ=new mstrmojo.ui.menus.MenuConfig(),Aa=function(Ah,Ag){var Aj,Ai;if(Ag){var Af=Ah.mexp.args[0];Aj=Af.did;Ai=Af.t;}else{Aj=Ah.did;Ai=Ah.t;}return{did:Aj,t:Ai};},AY=this.getAvailableShortcutMetricFunctionsGroup(Ad),Ae=Ad.mexp?Ad.mexp.ft:null,Ac=Ad.mexp&&this.isAmongFunctions(Ae,AY);AY.forEach(function(Af,Ag){if(Ag!==0){AZ.addSeparator();}Af.forEach(function(Ah){AZ.addMenuItem(Ah.n,"",function(){Ab(Aa(Ad,Ac),Ah.t);});});});return AZ;},showObjectPicker:function t(AZ,AY){var Aa="object_picker";return function(){var Ab=mstrmojo.all[Aa];if(!Ab){Ab=new mstrmojo.vi.ui.editors.ObjectPicker({id:Aa});if(AY){Ab.supportedTypes=AB.hash(AY);Ab.ob.browsableTypes="8,"+AY.join(",");}Ab.render();}else{if(AY){Ab.supportedTypes=AB.hash(AY);Ab.ob.browsableTypes="8,"+AY.join(",");}Ab.browse();}Ab.OKFn=AZ||mstrmojo.emptyFn;Ab.open();};},getObjectPicker:function t(){var AY="object_picker";return mstrmojo.all[AY];},generateNumberFormat:function AD(Ad){var AY=W.DefaultFormat.FormattingNumber,AZ=W.NumberFormatCategory,Ab=Ad||{},Aa=Ab.nct,Ac=Aa===AZ.General&&Ab.nfs==="General";return{category:(Aa===undefined||Ac)?AZ.Automatic:Aa,decimalPlaces:Ab.ndp===undefined?2:Ab.ndp,thousandSeparator:Ab.nth===undefined?parseInt(AY.ThousandSeparator,10):(Ab.nth?-1:0),currencySymbol:Ab.ncs||AY.CurrencySymbol,currencyPosition:Ab.ncp||AY.CurrencyPosition,format:Ab.nfs||"",negativeNumbers:Ab.nnn||AY.NegativeNumbers};},getNumberFormatEditor:function AJ(Ab,Aa,AZ){var AY=this.generateNumberFormat(Aa),Ac=a.clone(AY),Ae=a.clone(AY);return new mstrmojo.ui.menus.EditorConfig({data:Ac,bindings:{okEnabled:function(){return !(this.data.category===Ae.category&&this.data.format===Ae.format);}},cssClass:"NumberFormat-MenuEditor",contents:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",formatValue:AY,myData:Ac,oldData:Ae,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}}],fnOk:function Ad(Af){if(!(Af.category===Ae.category&&Af.format===Ae.format)){return AZ(Af,Ae);}}});},getHighlightElementHandler:function(Aa,AZ,AY){return function(){D.toggleClass(AZ,AY||"open",Aa);};},getConfDataTypeMenuCfg:function AN(AY,At,Al,A7){var A2="ToString",As="ToNumber",Aq="ToDateTime",Ak="keepOriginal",Ab="Default",A3={ToString:x.DssXmlBaseFormText,ToNumber:x.DssXmlBaseFormNumber,ToDateTime:x.DssXmlBaseFormDate},Ag={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},Ae="_pattern",A5="_func",Ao="_bft",BA="_state",A8={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},Ad={n:"Default",v:"Default"},A0=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},Ad],Aa=[{n:mstrmojo.desc(13772,"Keep Original"),v:Ak},{n:mstrmojo.desc(12276,"String"),v:A2},{n:mstrmojo.desc(2052,"Date"),v:Aq},{n:mstrmojo.desc(3434,"Number"),v:As}];if(mstrApp&&mstrApp.showMultiDataType){Aa=[{n:mstrmojo.desc(13772,"Keep Original"),v:Ak},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3434,"Number"),v:As,bft:x.DssXmlBaseFormNumber},{n:mstrmojo.desc(9920,"Big Decimal"),v:As,bft:x.DssXmlBaseFormBigDecimal},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(2052,"Date"),v:Aq,bft:x.DssXmlBaseFormDate},{n:mstrmojo.desc(9919,"DateTime"),v:Aq,bft:x.DssXmlBaseFormDateTime},{n:mstrmojo.desc(2170,"Time"),v:Aq,bft:x.DssXmlBaseFormTime},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3544,"Text"),v:A2,bft:x.DssXmlBaseFormText},{n:mstrmojo.desc(9921,"HTML Tag"),v:A2,bft:x.DssXmlBaseFormHTMLTag},{n:mstrmojo.desc(8984,"Phone Number"),v:A2,bft:x.DssXmlBaseFormPhoneNumber},{n:mstrmojo.desc(4530,"Symbol"),v:A2,bft:x.DssXmlBaseFormSymbol},{n:mstrmojo.desc(9922,"URL"),v:A2,bft:x.DssXmlBaseFormUrl},{n:mstrmojo.desc(4699,"Email"),v:A2,bft:x.DssXmlBaseFormEmail}];}var Aj=a.clone(Aa).slice(1),Ar=At.fs.filter(function(BC){return At.da||BC.obf;}),BB=Ar.length>1,An=Ar.length>5,Af=false,A1=false,Au=[],Az=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:"),cssClass:"menu-info-text menu-header-text"}],A9={okEnabled:false},A4=function(){var BC=false;Ar.forEach(function(BD){BC=BC||(A9[BD.fnm+A5+BA]!==A8.UNCHANGED)||(A9[BD.fnm+Ae+BA]!==A8.UNCHANGED);});return BC;},Av=function(BE,BD){var BC=0;if(BE.da){AB.forEach([A2,Aq,As],function(BH,BF){var BG=new RegExp("^\\s*"+BH+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(BD.f);if(BG&&BG[2]){BC=BF+1;return false;}});}return BC;},Ay=function(BE,BD){var BC=0;if(BE.da){var BF=BD&&BD.bftp;AB.forEach(Aa,function(BH,BG){if(BH.bft===BF){BC=BG;return false;}});}return BC;},Ax=function(BE,BD){var BF=Ab;if(At.da){var BC=new RegExp("^\\s*"+BD+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(BE.f);if(!mstrmojo.string.isEmpty(BC&&BC[1])){BF=BC[1];}}return BF;},Aw=function(){return An?this.parent.parent.parent:(BB?this.parent.parent:this.parent);},Ap=function(BC){if(An){BC.formList.updateScrollbars();}},Ac=function(BJ,BK,BI){var BC=BK.fnm,BF=An?BJ.formList[BK.fnm+Ae]:BJ[BK.fnm+Ae],BG=BB?BF.children[1]:BF,BH=A9[BC+A5],BE=Af&&(BH===Aq||BH===A2),BD=BF.visible!==BE;if(BD){BF.set("visible",BE);if(BE){Ap(BJ);}else{BG.hideTooltip();}}if(BI){BG.set("text",Ax(BK,BH));BG.set("items",BH===Aq?A0:[Ad]);}},Am=function(BC){var BD=false;Ar.forEach(function(BE){if(A9[BE.fnm+A5]===Aq||A9[BE.fnm+A5]===A2){BD=true;return false;}});BC.advancedLabel.set("visible",BD);},AZ=function(BE,BC,BF){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:BE,alias:BF.fnm+A5,selectedIndex:BC,onPopupWidgetOpened:function(){Ap(Aw.call(this));},onitemSelected:function BD(BK,BI){var BJ=Aw.call(this),BL=BJ.data,BM=BF.fnm,BH=BK.v,BG=function(BN){if(BN){return(BE.length===3?A8.TO_UPDATE:A8.TO_CREATE);}return A8.UNCHANGED;};BL.set(BM+A5,BH);BL.set(BM+Ae,Ax(BF,BH));BL.set(BM+Ao,BH===Ak?BF.bftp:(BK.bft?BK.bft:A3[BH]));BL.set(BM+A5+BA,BG(BI!==BC));BL.set("okEnabled",A4());Ac(BJ,BF,true);Am(BJ);}};},Ai=function(BE,BF,BC){return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,alias:BE.fnm+Ae,useRichTooltip:true,visible:BC,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){Ap(Aw.call(this));},customizeSearchResult:function(BG){if(AB.find(BG,"v","Default")===-1&&this.items.length>0){BG.push(Ad);}},onclick:function(BG){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,BG);this.set("isEditing",true);},updateData:function(BI){var BG=Aw.call(this),BH=BG.data,BJ=BE.fnm;BH.set(BJ+Ae,BI);BH.set(BJ+Ae+BA,BF!==BI?A8.TO_UPDATE:A8.UNCHANGED);BH.set("okEnabled",A4());},onitemSelected:function BD(BG){if(BG){this.updateData(BG.v);}},onkeyup:function(BG){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,BG);var BH=this[this.editableSlot],BI=BH.innerText||BH.textContent;this.updateData(BI);},updateTooltipConfig:function(BH){this.tooltipOpenDelay=BH?500:0;var BG=Y.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:BG.y-2,left:BG.x+BG.w+10};}};},A6=function(BK,BJ,BC,BD,BI){var BF=mstrApp&&mstrApp.showMultiDataType?Ay(BK,BJ):Av(BK,BJ),BH=Ax(BJ,Aa[BF].v),BE=BJ.fnm,BG=Aa;if(BF>0){BG=Aj;BF--;}BD[BE+Ae]="";BD[BE+A5]="";BD[BE+Ao]="";BD[BE+A5+BA]=BD[BE+Ae+BA]=A8.UNCHANGED;if(BI){BC.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:BE+A5,children:[{scriptClass:"mstrmojo.Label",text:BE,useRichTooltip:true,updateTooltipConfig:function(BN){this.tooltipOpenDelay=BN?500:0;var BM=this.domNode;var BL=Y.position(BM);if(BM.scrollWidth>BM.offsetWidth){this.richTooltip={content:BM.innerText,posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:BL.y-BL.h-10,left:BL.x-10};}}},a.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},AZ(BG,BF,BJ,true))]});BC.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:BE+Ae,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern"),cssClass:"menu-info-text"},a.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},Ai(BJ,BH,true))]});}else{BC.push(a.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},AZ(BG,BF,BJ,false)));BC.push(a.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},Ai(BJ,BH,false)));}};AB.forEach(At.fs,function(BC){if(AY.als&&AY.als.links[At.did+" "+BC.fid]){A1=true;return false;}});if(BB){Ar.forEach(function(BC){A6(At,BC,An?Au:Az,A9,true);});}else{A6(At,Ar[0],Az,A9,false);}if(An){Az.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:Au});}Az.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var BD=this.parent,BE,BC,BF=true;Af=!Af;D.toggleClass(this.domNode,"expanded",Af);Ar.forEach(function(BG){Ac(BD,BG,false);BE=An?BD.formList[BG.fnm+Ae]:BD[BG.fnm+Ae];BC=BB?BE.children[1]:BE;if(BE.visible&&BF&&!An){BF=false;BC.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:A9,cssClass:"ConfDataType-MenuEditor",contents:Az,onOpen:function(){Ap(this);},bindings:{okEnabled:"this.data.okEnabled"},fnOk:function Ah(BE){var BC=[],BG=[],BD=false,BF=function(BJ,BK,BI){var BM=[],BL=function(BN){var BO=BN.ftk&&BN.ftk.slice(2,-2);if(!BO){return null;}while((BO.shift()).v!=="("){}return BO;},BH=BL(BI)||[AL(At,BI)];BM.push({v:"!",tp:33,lv:4});if(BJ!==Ak){BM.push({v:BJ,oi:{did:Ag[BJ],t:11,st:2816,n:BJ}});if(!mstrmojo.string.isEmpty(BK)&&BK!==Ab&&(BJ===Aq||BJ===A2)){BM.push({v:'<Pattern="'+BK+'">(',tp:"2",lv:1});}else{BM.push({v:"(",tp:"2",lv:1});}BM=BM.concat(BH);BM.push({v:")",tp:"2",lv:1});}else{BM=BM.concat(BH);}BM.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:BM});};if(A1){BD=true;}else{Ar.forEach(function(BH){if(BE[BH.fnm+A5+BA]===A8.TO_CREATE){BD=true;return false;}else{if(BE[BH.fnm+A5+BA]===A8.TO_UPDATE||(BE[BH.fnm+Ae+BA]===A8.TO_UPDATE&&(BE[BH.fnm+A5]===Aq||BE[BH.fnm+A5]===A2))){BG.push(BH);}}});}if(BD){Ar.forEach(function(BH){BC.push({n:BH.fnm,formula:BF(BE[BH.fnm+A5],BE[BH.fnm+Ae],BH),bft:BE[BH.fnm+Ao]});});A7(BD,BC);}else{if(At.da){Z(AY.mid,At.did,BG,function(BH){BH.forEach(function(BI){BC.push({did:BI.fid,formula:BF(BE[BI.fnm+A5],BE[BI.fnm+Ae],BI),bft:BE[BI.fnm+Ao]});});A7(BD,BC);});}}}});},getCreateTimeDAEditorCfg:function P(Ab,Aa){var AY=e(Ab);if(!AY){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function AZ(){var Ad=false;a.forEach(this.selectedIndices,function(Ae){if(Ae){Ad=true;return false;}});this.parent.data.set("okEnabled",Ad);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function Ac(Ah,Af){var Ag=Af.time_type,Ak=Ag.selectedIndices,Ae=Ag.items,Aj=[],Ad=[],Ai=function(Al,An,Ap){var Ao=[{v:"!",tp:33,lv:4}],Am;Ap.forEach(function(Aq){if(Aq===Q){Ao.push(AL(Al,An));}else{Am=AO[Aq];if(Am){Ao.push({v:Am,oi:{did:Am,t:11,st:2816,n:Am}});}else{Ao.push({v:Aq,tp:"2",lv:1});}}});Ao.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:Ao});};a.forEach(Ak,function(Al,Am){if(Al){Ad=[];a.forEach(AU[Ae[Am].v],function(An,Ao){Ad.push({n:Ao,formula:Ai(Ab,AY,An),bft:(Ao==="DATE"?8:0)});});Aj.push({isTokenStream:true,forms:Ad,name:Ab.n+" ("+Ae[Am].n+")"});}});return Aa(Aj);}});},RefreshAndCloseAllObjectBrowserCallback:function(AZ,AY){return mstrmojo.func.wrapMethods(AY.getDatasetsUpdateCallback(),{success:function(){if(AB.find(AZ,"act","createDataset")!==-1){AY.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function f(AZ,Ab,AY){var Aa=null;a.forEach(AZ,function(Ad){var Ac=Ad.att||[];if(AY===4){Ac=Ad.mx||[];}AB.forEach(Ac,function(Ae){if(Ae.did===Ab){Aa=Ae;return false;}});if(Aa){return false;}});return Aa;},getDatasetFromId:function R(AY,AZ){var Aa=null;a.forEach(AY,function(Ab){if(Ab.did===AZ){Aa=Ab;return false;}});return Aa;},getDatasetFromAttributeId:function R(AY,AZ){var Aa=null;a.forEach(AY,function(Ab){if(AB.find(Ab.att,"did",AZ)>=0){Aa=Ab;return false;}});return Aa;},getSortedDatasetUnits:function E(AY){var AZ=function AZ(Aa){return Aa.t===X.DssTypeMetric?2:1;};AY=AY.concat();AY.sort(function(Ad,Ab){if(!Ad||!Ab){return true;}var Ae=AZ(Ad)-AZ(Ab),Ac=Ad.n.toUpperCase(),Aa=Ab.n.toUpperCase();return Ae!==0?Ae:(Ac!==Aa?Ac.localeCompare(Aa):Ad.n.localeCompare(Ab.n));});return AY;},isGeoAttr:function AP(AY,AZ){return !!(AY.fs&&(AY.fs instanceof Array)&&AY.fs.length&&AY.fs.some(function(Aa){return Aa.fgr>0&&(!AZ||(AZ&&Aa.obf));}));},isTimeAttr:function j(AY){return !!(AY.fs&&e(AY));},getUnitCssClass:function(AZ){var AY=AZ.t;if(this.isGeoAttr(AZ,AZ.useAvailGeoFmsOnly)){AY+="g";}else{if((AZ.dm||AZ.um)||AZ.da){AY+="d";}else{if(AZ.de){AY+="de";}else{if(this.isTimeAttr(AZ)){AY+="t";}}}}if((AZ.t===AX.Consolidation&&AZ.st===N.ConsolidationManaged)||(AZ.t===AX.Attribute&&AZ.st&&AZ.st===N.AttributeRecursive)){AY+=(" st"+AZ.st);}if(AZ.t===AX.Consolidation&&AZ.st===N.ConsolidationManaged&&AZ.ndetype===AI.DssRecursiveDerivedElement){AY+=" nde4ra";}return"ic"+AY;},hasMultiForms:function s(AZ,AY){return z.getFormsByAttrId(AZ,AY).length>1;},getDisplayFormsMenu:function F(An,Al,Af,Ak){var Aj=[],Am=[],Ac=[],Ah=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}];var Ag=Al.model.data,AY=Ag.gts,Ai;var Ab=An.t===AX.Consolidation&&An.st===N.ConsolidationManaged;AB.forEach((AY.row||[]).concat(AY.col||[]),function(Ao){if(Ao.id===An.did){Am=Am.concat(Ao.fs);}});Ai=z.getFormsByAttrId(An.attId||An.did,Af);AB.forEach(Ai||[],function(Ap){var Aq=Ap.fid;if(AB.find(Aj,"id",Aq)<0){Aj.push({id:Aq,n:Ap.fnm});var Ao=AB.find(Am,"id",Aq);if(Ao>-1){Ac[Aj.length-1]=true;}}});var Ad=[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:Aj,selectedIndices:Ac},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:"),cssClass:"menu-info-text"},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:Ah,isHostedWithin:false,selectedIndex:AB.find(Ah,"v",Ag.lnm||0),onitemSelected:function AZ(Ao){this.v=String(Ao.v);}}];if(Al.getChartStyle&&Al.getChartStyle()==="NewGraphMatrixVisualizationStyle"){Ad.splice(-2,2);}if(Ab){Ad.splice(-2,2);}return new mstrmojo.ui.menus.EditorConfig({cssClass:"displayForms",data:{item:An,oldSelected:a.copy(Ac,{})},contents:Ad,okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function Aa(At,Ax){var As=Ax.fs,Aq=As.selectedIndices,Av=As.items,A1=[],Au=[],Ay=[];if(!As.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var Ap=At.oldSelected,A0=Aq,Ar,Aw={},Az={};for(Ar=0;Ar<Av.length;Ar++){if(Ap[Ar]&&!A0[Ar]){Aw[Ar]=true;}else{if(!Ap[Ar]&&A0[Ar]){Az[Ar]=true;}}}a.forEach(Aw,function(A2,A3){if(A2){Au.push({act:"removeForm",unitId:An.did,unitType:An.t,attFormId:Av[A3].id});}});var Ao=Al.model.data.gts;(Ao.row||[]).concat(Ao.col||[]).forEach(function(A2){if(A2.id===An.did){(A2.fs||[]).forEach(function(A3){if(AB.find(Aj,"id",A3.id)<0){Au.push({act:"removeForm",unitId:An.did,unitType:An.t,attFormId:A3.id});}});}});a.forEach(Az,function(A2,A3){if(A2){A1.push({act:"addForm",unitId:An.did,unitType:An.t,attFormId:Av[A3].id,unitPos:0});}});Ay.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:Ax.longNames?Ax.longNames.v:0});if(Ak){Ak([{act:"updateTemplate",keyContext:Al.k,partialRetrieval:{nodes:[Al.k]},actions:Au.concat(A1).concat(Ay)}]);}},onOpen:function Ae(){this.fs.updateScrollbars();}});},getAttributeLinkMenu:function k(Ak,An,Ai,Am,Ad){var Ao=-2147483648,Af=Am.datasets,Ag=Af[Ai],Al=Ag.tables||[],AY={},Ah=[],Ab=(An.fs&&An.fs[0])||{},Aj=[],Ae=779,Aa=An.art>1,AZ=!Aa&&a.keyarray(Af).length>1,Ac=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:An,docModel:Am,datasetId:Ai});};if((Ag.st!==Ae)||Al.length<=1||An.da){if(AZ){Ak.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",Ac);}return ;}AB.forEach(Ag.att,function(Ar){var As=true,Aq=null,Ap=(Ar.fs&&Ar.fs[0])||{};if(Ar.da){return ;}if(Ab.der===Ao||Ap.der===Ao||Ab.fgr===-1||Ap.fgr===-1||Ab.ftr===-1||Ap.ftr===-1){return ;}if(Ab.fgr&&Ap.fgr&&Ab.fgr!==Ap.fgr){return ;}if(Ab.ftr&&Ap.ftr&&Ab.ftr!==Ap.ftr){return ;}AB.forEach(Al,function(At){var Au=AB.find(At.attRefs,"did",An.did),Av=AB.find(At.attRefs,"did",Ar.did);if(Au>=0&&AB.indexOf(Ah,At.did)<0){Ah.push(At.did);}if(Av>=0){Aq=At.did;}if(Au>=0&&Av>=0){As=false;}});if(As&&!Ar.hide){AY[Ar.did]=Aq;Aj.push(Ar);}});if(Aj.length>0&&Ag.hcs!==true&&!Am.isSparkDataset(Ag)){Ak.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:Aj,listHooks:{select:function Ap(Aq,Ar){Am.warnForEditStandaloneDS(Ag,function(){AB.forEach(Ah,function(As){I({dsid:Ai,srcId:An.did,srcTableId:As,tgtId:Ar.did,tgtTableId:AY[Ar.did]},Am,Ad);});});}}}]}]});});}if(AZ){Ak.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",Ac);}},isDocumentLevelItem:function AC(AY){return AY&&(AY.um||AY.da||(AY.t===AX.Consolidation&&AY.st===N.ConsolidationManaged));},isLegalObjectName:function S(AY){var AZ=/["\[\]\\]/g;if(AY.match(AZ)){return false;}return true;},validateName:function o(AZ,Aa,AY){if(this.isLegalObjectName(AZ)){Aa();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),AY,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AW(AY){return AY.att.some(function(AZ){return H(AZ);});},isCGorCon:function AM(AY,Aa){var AZ=AB.filterOne(Aa&&Aa.att,function(Ab){return Ab.did===AY.did;});return H(AZ||AY);},hasOldDEOverDatasets:function(Ab,Aa){var AZ=false,AY;a.forEach(Aa,function(Ac){AY=AB.find((Ac.att||[]),"did",Ab);if(AY!==-1&&Ac.att[AY].de){AZ=true;return false;}});return AZ;},getMarkGeoRoleEditorCfg:function AT(AY,BA,As,Ap,BJ,BL){var Ao=268435456,BG=536870912,Ad=1073741824,A2=268435456,BD=805306368,A8=805306368,Aw=1879048192,BK=-2147483648,BB=0,BC=1,Af=2,An=3,Ar=4,Al=5,BI=6,Ai=7,Au=8,At=9,A4=10,Ab=2,A1=3,A9={v:BB,n:mstrmojo.desc(2057,"None")},BM={v:An,n:mstrmojo.desc(7674,"Country"),der:Ao},A7={v:Af,n:mstrmojo.desc(7676,"State"),parents:[BM],der:BG},Aj={v:At,n:mstrmojo.desc(12919,"County"),parents:[BM,A7]},BE={v:BC,n:mstrmojo.desc(7675,"City"),parents:[BM,A7],der:Ad},Ax={v:Au,n:mstrmojo.desc(7677,"Zip Code"),parents:[BM,A7,BE]},Aq={v:Al,n:mstrmojo.desc(7696,"Latitude")},A5={v:BI,n:mstrmojo.desc(7697,"Longitude")},Am={v:Ar,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},A0={v:A4,n:mstrmojo.desc(12973,"Area Code")},A3={v:Ai,n:mstrmojo.desc(2056,"Custom")},Ak={ID:[A9,BM,A7,Aj,BE,Ax,Aq,A5,Am,A0,A3],ID_NUMERIC:[A9,Ax,A0,Aq,A5],NON_ID:[A9,BM,A7,Aj,BE,Ax,Am,A0,A3],NON_ID_NUMERIC:[A9,Ax,A0]},Ay=AB.filter(BA.fs,function(BN){return(BN.bftp===Ab||BN.bftp===A1)&&BN.der!==BK;});var A6=(Ay.length>1),Aa=AB.find(Ay,"idf",true),Ac=(Aa===-1?0:Aa),Az=Ay[Ac],Ah,AZ,Av,Ae=[],Ag=function(BN){var BO=(BN.idf?"ID":"NON_ID")+(BN.bftp===Ab?"_NUMERIC":"");return Ak[BO];},BH=function(BO,BN){return AB.find(Ag(BN),"v",BO);};if(Ay.length===0||AB.find(BA.fs,"fgr",-1)!==-1||Az.der===BK){return null;}AB.forEach(Ay,function(BP,BN){var BO=a.clone(BP);BO.n=BO.fnm;Ae.push(BO);if(BP.fgr){Az=BO;Ac=BN;}});Ah=Az.fid;Av=Az.fgr||0;AZ=BH(Av,Az);return new mstrmojo.ui.menus.EditorConfig({data:{item:BA,geoForm:Az,geoRole:Av},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:A6},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:Ae,selectedIndex:Ac,alias:"formList",visible:A6,onitemSelected:function BF(BP){var BN=this.parent.data,BO=this.parent.geoRoleList;if(BN.geoForm.fid!==BP.fid){BN.set("geoForm",BP);BN.set("geoRole",BP.fgr);BO.set("items",Ag(BP));BO.set("selectedIndex",BH(BP.fgr,BP));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:A6,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:"),cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:Ag(Az),selectedIndex:AZ,alias:"geoRoleList",onitemSelected:function BF(BT){var BS=this.parent,BN=BS.data,BU=BS.geoDrvList;var BP=[],BR=[],BO=Az.der,BQ;BN.set("geoRole",BT.v);AB.forEach(BT.parents,function(BV,BW){BQ=BV;BP.push({n:BQ.n,der:BQ.der});if((BO&BQ.der)!==0){BR[BW]=true;}});BU.set("items",BP);BU.set("selectedIndices",BR);AB.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(BV){BS[BV].set("visible",BP.length>0);});if(BS.adjustCornersForPopupOverflow){BS.adjustCornersForPopupOverflow();}}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel",cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(BS,BR){var BO=function(BZ){var BY=function(Bd){var Be="<mpcs>";AB.forEach(Bd,function(Bf){Be+='<mpc did="'+Bf.did+'" n="'+Bf.n+'" georole="'+Bf.georole+'" drvflg="'+Bf.drvflg+'" />';});Be+="</mpcs>";return Be;},BU=function(Bd,Bf,Bh,Be){var Bg=function(Bl,Bi,Bk){var Bj=U(BZ,Bl,Bi),Bm=q(Bj,Bk);return Bm&&Bm.did;};BJ.forEach(function(Bi,Bj){var Bk=Bg(Bi.did,BA.did,Bf.fid);if(Bk){Bd[Bj]=Bd[Bj]||[];Bd[Bj].push({did:Bk,n:Bf.fnm,georole:Bh,drvflg:Be});}});},BW=[],Bc=[],Ba=BR.geoDrvList,BV=0,BX=false,Bb={2:A2,1:BD,9:A8,8:Aw}[BS.geoRole]||0;a.forEach(Ba.selectedIndices,function(Be,Bd){if(Be){BV|=Ba.items[Bd].der;}});BV&=Bb;if(Az.fgr!==BS.geoRole||Az.fid!==BS.geoForm.fid||Az.der!==BV){if(A6&&Az.fid!==BS.geoForm.fid){if(Az.fgr!==BB){BU(Bc,Az,BB,0);if(Az.der>0){BX=true;}}}if(BS.geoForm.fgr!==BS.geoRole||BS.geoForm.der!==BV){BU(Bc,BS.geoForm,BS.geoRole,BV);if((BV&BS.geoForm.der)!==BS.geoForm.der){BX=true;}}if(Bc.length>0){Bc.forEach(function(Be,Bd){BW.push({act:"changeEMMAMapping",dsid:As,tbid:BJ[Bd].did,mapping:BY(Be)});});BL(BW,BX);}}},BP=function(){C(AY.mid,As,{success:BO});};var BQ=mstrApp.isAppStatePause();if(!Ap||BQ){var BT,BN=BQ?mstrmojo.desc(212,"Continue"):mstrmojo.desc(219,"Yes");if(Ap){BT=mstrmojo.desc(16237,"The operation requires the dataset to be unloaded from memory. It will be automatically reloaded when you resume data retrieval. Do you want to continue?");}else{BT=BQ?mstrmojo.desc(16236,"The operation requires modifying the dataset and unloading it from memory. It will be automatically reloaded when you resume data retrieval, however the change will also affect other reports, documents, and dossiers that share the dataset. Do you want to continue?"):mstrmojo.desc(15493,"Modifications to this dataset will affect other reports, documents, and dossiers that share the dataset. Do you want to continue?");}mstrmojo.warn(BT,{},{buttons:[AE(BN,function(){BP();},true,{cssText:"min-Width: 60px"}),AE(mstrmojo.desc(221,"Cancel"),function(){})]});}else{BP();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo._FormatDefinition","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.string","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.rw.GhostImageContainer","mstrmojo.vi.ui.rw.FreezingImageContainer");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var N=document.getElementById("vis-measure-canvas"),E=document.getElementById("vis-measure-span"),g={},M={},u={},AH=mstrmojo.dom,e=mstrmojo.elementHelper,AY=mstrmojo.vi.ui.DatasetUnitMenuUtils,V=mstrmojo.VisEnum.EnumColorRankMode,t=mstrmojo.chart.model.enums.EnumDSSObjectType,AQ=mstrmojo.chart.model.enums.EnumDSSBaseFormType,AW=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,Aa=mstrmojo.chart.enums.EnumFontStyle,X=mstrmojo.hash,d=mstrmojo.string,Ah=mstrmojo.func.wrapMethods,Z=mstrmojo.VisEnum,Q=mstrmojo._FormatDefinition,Ak=Z.SERVER_JSON_ERROR_TYPE,AB=mstrmojo.vi.viz.EnumVizStyles,AR=mstrmojo.vi.enums.EnumFeatures,D=mstrmojo.vi.ui.rw.FreezingImageContainer,Af=mstrmojo.vi.ui.rw.GhostImageContainer;var z=64,AJ=128,C=4,AD=5,b=6,F=7,f=mstrmojo,S=f.array,Ai=mstrmojo.array,A=f.desc,k=f.mstr.EnumFunction,U=mstrmojo.vi.enums.EnumDerivedElementType,Ad=f._HasMarkup,Ag=f.css;var P;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869,11819,11827);function Aj(Ap,Ao){var An=mstrmojo.VisUtility;var Aq=An.pluck(Ao,"tid"),Ar=An.pluck(Ao,"eid"),Am=(Ap.getDocModel&&Ap.getDocModel())||An.getPropertyByPath(Ap,"model.docModel");if(An.getPropertyByPath(Am,"getColorBy") instanceof Function){return Am.getColorBy(Aq,Ar);}}function Ae(Am,Ao,Aq){var Ap=Ao.id,An=Ao.getHost();if(An&&An.observableModel){Am.forEach(function(As){var Ar=An.observableModel[As];if(Ar){Ar.attachEventListener("valueChanged",Ap,Aq);}});}}function Al(An){var Am={SINGLE:[{text:A(358,"Absolute"),value:k.FunctionAbs,n:A(358,"Absolute"),v:k.FunctionAbs}],PAIR:[{text:A(6017,"Add"),value:k.FunctionAdd,n:A(6017,"Add"),v:k.FunctionAdd},{text:A(2122,"Average"),value:k.FunctionAverage,n:A(2122,"Average"),v:k.FunctionAverage},{text:A(5868,"Least"),value:k.FunctionLeast,n:A(5868,"Least"),v:k.FunctionLeast},{text:A(5869,"Greatest"),value:k.FunctionGreatest,n:A(5869,"Greatest"),v:k.FunctionGreatest},{text:"A-B",value:k.FunctionMinus+";0",n:"A-B",v:k.FunctionMinus+";0"},{text:"B-A",value:k.FunctionMinus+";1",n:"B-A",v:k.FunctionMinus+";1"},{text:"A/B",value:k.FunctionDivide+";0",n:"A/B",v:k.FunctionDivide+";0"},{text:"B/A",value:k.FunctionDivide+";1",n:"B/A",v:k.FunctionDivide+";1"}],MORE:[{text:A(6017,"Add"),value:k.FunctionAdd,n:A(6017,"Add"),v:k.FunctionAdd},{text:A(2122,"Average"),value:k.FunctionAverage,n:A(2122,"Average"),v:k.FunctionAverage},{text:A(5868,"Least"),value:k.FunctionLeast,n:A(5868,"Least"),v:k.FunctionLeast},{text:A(5869,"Greatest"),value:k.FunctionGreatest,n:A(5869,"Greatest"),v:k.FunctionGreatest}]};return Am[An];}function AV(An,Am){return !!(((An&&An.at)||0)&Am);}function Y(Am){return !Am.cmSelCells.some(function(An){var Ao=Am.getCellForNode(An);return e.isNonGroupNull(Ao)||!AV(Ao,z)||Ao.dei!==undefined||Am.model.isRecursiveAttribute(Ao.tid);});}function o(An){var Am;return !An.cmSelCells.some(function(Ao){Am=An.getCellForNode(Ao);return(e.isNonGroupNull(Am)||!AV(Am,AJ))||An.model.isRecursiveAttribute(Am.tid);});}function W(Ap,Ao,Ar,Aq,An){var Am=Ar&&Ar.func;if((Am===Aq)||(typeof Aq==="string"&&Aq.indexOf(Am)===0&&Aq.indexOf(";0")>0)){return ;}if(An){Ap.editDECalculation(Ao,Aq);}else{Ap.derivedElementCalculation(Ao,Aq);}}function p(Ay,Aw,Au){var Ax=Aw&&Aw.es,Am=(Ax&&Ax.length)||Ay.cmSelCells.length,Ap=(Am===1)?"SINGLE":((Am===2)?"PAIR":"MORE"),Av=Al(Ap),Ao=(Aw&&Aw.func),Aq,Az=Ay.cmSelCells,An,At,As,Ar;if(Ap==="PAIR"){if(Aw){Ar=Ax[0].v>Ax[1].v;if(Ar){As=Ax[0].n;At=Ax[1].n;Av[4]={value:k.FunctionMinus+";1",v:k.FunctionMinus+";1"};Av[5]={value:k.FunctionMinus+";0",v:k.FunctionMinus+";0"};Av[6]={value:k.FunctionDivide+";1",v:k.FunctionDivide+";1"};Av[7]={value:k.FunctionDivide+";0",v:k.FunctionDivide+";0"};}else{At=Ax[0].n;As=Ax[1].n;}}else{At=Au(Az[0]);As=Au(Az[1]);}Av[C].text=At+" - "+As;Av[AD].text=As+" - "+At;Av[b].text=At+" / "+As;Av[F].text=As+" / "+At;Av[C].n=At+" - "+As;Av[AD].n=As+" - "+At;Av[b].n=At+" / "+As;Av[F].n=As+" / "+At;}for(Aq in Av){if(typeof Av[Aq].value==="string"&&Av[Aq].value.indexOf(Ao)===0&&Av[Aq].value.indexOf(";0")>0){An=Av[Aq];break;}if(Av[Aq].value===Ao){An=Av[Aq];break;}}return{items:Av,selectedItem:An};}function AA(Am,Ap){if(!Am){return Am;}if(Ap.length===1){return Am[Ap[0]];}var Ao=(Ap&&Ap.length)||0,An;for(An=0;An<Ao;An++){Am=Am[Ap[An]];if(!Am){break;}}return Am;}function AX(Ao,An,Am){return Ao.every(function(Ap){return Ap.ttp===An||Ap.ttp===Am;});}function G(An,Aq,Ar){var Ap=(Aq&&Aq.length)||0,Ao,Am,As=An;for(Ao=0;Ao<Ap-1;Ao++){Am=Aq[Ao];if(!As[Am]){As[Am]={};}As=As[Am];}As[Aq[Ap-1]]=Ar;}function AG(Au){var Av,At,Ap,Ar,Am,As=this.model.docModel.datasets,An=false,Aq=false,Ao={isDM:false};for(Av in As){if(As.hasOwnProperty(Av)){At=As[Av].mx;S.forEach((At||[]),function(Aw){if(Aw.did===Au){if(Aw.um||Aw.rdm){Aq=true;}An=true;return false;}});if(An){break;}}}if(Aq){Am=this.model.data.gts.col;Ap=(Am&&Am[Am.length-1]);if(Ap&&Ap.otp===-1){Ar=Ap.es;}S.forEach((Ar||[]),function(Aw){if(Aw.oid===Au){Ao={isDM:true,id:Aw.id};return false;}});}return Ao;}function L(Am,Ap){var As=[],Ao={act:"updateElementsPropertiesMap",epm:As},Aq=[],An={},Au=[An],At=this;As.push({epmk:Aq,epmv:Au});Am.forEach(function(Aw){var Ax=Aw.tid,Az=Aw.tp,Av=Ax===-1,Ay={ob:{did:Av?"":Ax,tp:Az}};Aq.push(Ay);});if(Ap&&Ap.indexOf("default")<0){An.v={vv:Ap};}var Ar=[];An.k={chn:Ar};Am.forEach(function(Ax){var Ay=Ax.tid,Av=Ay===-1,Aw;if(Av){Aw=AG.call(At,Ax.eid);if(Aw.isDM){Ar.push({emt:2,ei:Aw.id});}else{Ar.push({emt:2,mt:{did:Ax.eid,tp:4,ql:0}});}}else{Ar.push({emt:1,ei:Ax.eid,at:{did:Ay,tp:Ax.tp,ql:0}});}});return Ao;}function AS(Aq,Ao){var Ap="00000000000000000000000000000000",An=Aq&&Aq.dropZones,Am=S.find(An,"id",Ao);return Am===-1?[]:S.filter(An[Am].items,function(Ar){return Ar.t===4&&Ar.id!==Ap;});}function AM(Ar,Ao,Aq,An,Am){var As=An?Ar:Ar&&Ar.parentNode;while(As&&(As!==Am)){var Ap=As.getAttribute&&As.getAttribute(Ao);if(Ap!==null&&Ap.indexOf(Aq)>=0){return true;}As=As.parentNode;}return false;}function AF(An,Ao){var Am=X.walk("rootCtrl.docCtrl",mstrApp);if(Am&&(typeof Am.selectViPanel==="function")){Am.selectViPanel(Ao);}An.getDocModel().selectVIUnit(An.parent.id,true);}var H={sessions:{},instances:[],init:function AN(){this.supportedEventTypes=[];if(window.TouchEvent){this.supportedEventTypes.push("TouchEvent");}else{if(window.PointerEvent){this.supportedEventTypes.push("PointerEvent");}}if(window.MouseEvent){this.supportedEventTypes.push("MouseEvent");}return this;},startNewSessions:function AK(Am){var Aq=this;var Ao=this;var An=document;var Ap=function(A0){var Av=Am.callbacks.start.bind(Am.callbackThis),Aw=Am.callbacks.change.bind(Am.callbackThis),Ax=Am.callbacks.end.bind(Am.callbackThis),Az=Am.callbacks.context;var As={};As.identifier=A0.identifier;As.context=X.clone(Az);As.clientX=A0.clientX;As.clientY=A0.clientY;var Au=function Au(A1){var A2=this.context;return Av({api:Ao,event:A1,session:this,context:A2});};var Ay=function Ay(A2,A1){var A3=this.context,A5=0,A4=0;A5=A1.clientX-this.clientX;A4=A1.clientY-this.clientY;this.clientX=A1.clientX;this.clientY=A1.clientY;var A6={api:Ao,event:A2,deltaX:A5,deltaY:A4,session:this,context:A3};return Aw(A6);};var At=function At(A1){var A2=this.context;return Ax({api:Ao,event:A1,session:this,context:A2});};As.onStart=Au;As.onChange=Ay;As.onEnd=At;return As;};var Ar=function(At,As){At.listeners={};At.listeners.change=function(Au){var Av=Aq.getChangedSessions(Au);for(var Aw=0;Aw<Av.length;Aw++){if(At.identifier===Av[Aw].identifier){return Aq.sessions[At.identifier].onChange(Au,Av[Aw]);}}};At.listeners.end=function(Av){var Aw=Aq.getChangedSessions(Av);for(var Ax=0;Ax<Aw.length;Ax++){if(At.identifier===Aw[Ax].identifier){if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(As)){An.removeEventListener("touchmove",At.listeners.change);An.removeEventListener("touchend",At.listeners.end);An.removeEventListener("touchcancel",At.listeners.end);}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(As)&&(As.pointerType&&As.pointerType!=="mouse")){An.removeEventListener("pointermove",At.listeners.change);An.removeEventListener("pointerleave",At.listeners.end);An.removeEventListener("pointerup",At.listeners.end);}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(As)&&!As.pointerType){An.removeEventListener("mousemove",At.listeners.change);An.removeEventListener("mouseup",At.listeners.end);}}}var Au=Aq.sessions[At.identifier].onEnd(Av);delete Aq.sessions[At.identifier];return Au;}}};if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(As)){An.addEventListener("touchmove",At.listeners.change);An.addEventListener("touchend",At.listeners.end);An.addEventListener("touchcancel",At.listeners.end);}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(As)&&(As.pointerType&&As.pointerType!=="mouse")){An.addEventListener("pointermove",At.listeners.change);An.addEventListener("pointerleave",At.listeners.end);An.addEventListener("pointerup",At.listeners.end);}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(As)&&!As.pointerType){An.addEventListener("mousemove",At.listeners.change);An.addEventListener("mouseup",At.listeners.end);}}}};return function(Au){var Av=Aq.getChangedSessions(Au),At=Aq.sessions,Aw=Av.filter(function(Ax){if(At[Ax.identifier]){return false;}else{return true;}});Aw.forEach(function(Ax){Aq.sessions[Ax.identifier]=Ap(Ax);Ar(Aq.sessions[Ax.identifier],Au);});var As=[];Aw.forEach(function(Ax){As.push(Aq.sessions[Ax.identifier].onStart(Au));});return As;};},newInstance:function AP(Ap,As,Ar){var Ao,An,Am=this.getInstanceIndex(Ap);if(Am!==-1){for(Ao=0;Ao<this.supportedEventTypes.length;Ao++){An=this.supportedEventTypes[Ao];if(An==="TouchEvent"){Ap.removeEventListener("touchstart",this.instances[Am].starter);}else{if(An==="PointerEvent"){Ap.removeEventListener("pointerdown",this.instances[Am].starter);}else{if(An==="MouseEvent"){Ap.removeEventListener("mousedown",this.instances[Am].starter);}}}}delete this.instances[Am];}var Aq={domNode:Ap,callbacks:As,callbackThis:Ar};Aq.starter=this.startNewSessions(Aq);if(Am!==-1){this.instances[Am]=Aq;}else{this.instances.push(Aq);}for(Ao=0;Ao<this.supportedEventTypes.length;Ao++){An=this.supportedEventTypes[Ao];if(An==="TouchEvent"){Ap.addEventListener("touchstart",Aq.starter);}else{if(An==="PointerEvent"){Ap.addEventListener("pointerdown",Aq.starter);}else{if(An==="MouseEvent"){Ap.addEventListener("mousedown",Aq.starter);}}}}return this;},getInstanceIndex:function J(Am){return S.find(this.instances,"domNode",Am);},getInstance:function s(An){var Am=this.getInstanceIndex(An);return this.instances[Am];},getChangedSessions:function AI(Am){var An=[];if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(Am)){var Aq=Am.changedTouches;for(var Ao=0;Ao<Aq.length;Ao++){var Ap={};Ap.identifier=Aq[Ao].identifier;Ap.clientX=Aq[Ao].clientX;Ap.clientY=Aq[Ao].clientY;An.push(Ap);}}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(Am)&&(Am.pointerType&&Am.pointerType!=="mouse")){An.push({identifier:Am.pointerId,clientX:Am.clientX,clientY:Am.clientY,});}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(Am)&&!Am.pointerType){An.push({identifier:"mouse",clientX:Am.clientX,clientY:Am.clientY,});}}}return An;}};var x=H.init();mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(u);},getUpdateColorMapAction:function(An,Am){return L.call(this,An,Am);},measureTextSize:function(An,Am,Ao){return{width:this.measureTextWidth(An,Am,Ao),height:this.measureTextHeight(An,Am,Ao)};},measureTextWidth:function(Ap,Ao,Aq,An,Am){if(AH.isIE||AH.isIEW3C){return this.measureTextWidthWithSpan(Ap,Ao,Aq,An,Am);}return this.measureTextWidthWithCanvas(Ap,Ao,Aq);},measureTextWidthWithCanvas:function(Ap,Aq,At,Ar){Ar=Ar||false;if(Ap===""){return 0;}if(Ap===" "){Ap="\u00A0";}var As=Aq.fontFamily,Av=Aq.fontSize,Ao=Aq.fontStyle,Au=Aq.fontWeight;if(typeof Av==="number"){Av+="pt";}Ao=Ao||"normal";Au=Au||"normal";At=At||0;var An=Ar?undefined:AA(g,[As,Av,Ao,Au,Ap]);if(!An){if(!N){N=document.createElement("canvas");N.width=0;N.height=0;N.id="vis-measure-canvas";N.style.position="absolute";N.style.top="0";N.style.fontSize="medium";document.body.appendChild(N);}var Am=N.getContext("2d");Am.font=Ao+" "+Au+" "+Av+" "+this.surroundWithQuotes(As);An=Math.ceil(Am.measureText(Ap).width);G(g,[As,Av,Ao,Au,Ap],An);}return An+At;},measureTextWidthQuick:function(Ap,Aq,At,Ar){Ar=Ar||false;if(Ap===""){return 0;}if(Ap===" "){Ap="\u00A0";}var As=Aq.fontFamily,Av=Aq.fontSize,Ao=Aq.fontStyle,Au=Aq.fontWeight;if(typeof Av==="number"){Av+="pt";}Ao=Ao||"normal";Au=Au||"normal";At=At||0;var An=Ar?undefined:AA(g,[As,Av,Ao,Au,Ap]);if(!An){if(!N){N=document.createElement("canvas");N.width=0;N.height=0;N.id="vis-measure-canvas";N.style.position="absolute";N.style.top="0";N.style.fontSize="medium";document.body.appendChild(N);}var Am=N.getContext("2d");Am.font=Ao+" "+Au+" "+Av+" "+this.surroundWithQuotes(As);An=Math.ceil(Am.measureText(Ap).width);G(g,[As,Av,Ao,Au,Ap],An);}return An+At;},measureTextWidthWithSpan:function(Ap,Aq,Au,Aw,Ar,Am){if(Ap===""){return 0;}if(Ap===" "){Ap="\u00A0";}var As=Aq.fontFamily,Ax=Aq.fontSize,Ao=Aq.fontStyle,At=Aq.fontWeight;if(typeof Ax==="number"){Ax+="px";}Ao=Ao||"normal";At=At||"normal";Aw=Aw||"auto";Au=Au||0;Ar=!!Ar;if(typeof Aw==="number"){Aw+="px";}var An=AA(M,[As,Ax,Ao,At,Aw,Ap]);if(!An||Am){var Av;if(!E){E=document.createElement("span");Av=E.style;E.id="vis-measure-span";Av.position="absolute";Av.top="0";Av.visibility="hidden";Av.width="auto";Av.height="auto";if(Ar){Av.whiteSpace="nowrap";}else{Av.whiteSpace="normal";}document.body.appendChild(E);}Av=E.style;if(Ar){Av.whiteSpace="nowrap";}else{Av.whiteSpace="normal";}Av.width="auto";Av.height=Aw;Av.fontFamily=this.surroundWithQuotes(As);Av.fontSize=Ax;Av.fontStyle=Ao;Av.fontWeight=At;E.innerHTML=d.encodeHtmlString(Ap);An=Math.ceil(E.clientWidth);G(M,[As,Ax,Ao,At,Aw,Ap],An);}return An+Au;},measureTextHeight:function(Ao,Ap,Au,Ax,Am,Ar,Aq){if(Ao===""){return 0;}if(Ao===" "){Ao="\u00A0";}var As=Ap.fontFamily,Az=Ap.fontSize,An=Ap.fontStyle,At=Ap.fontWeight,Aw=Ap.lineHeight||"inherit";Am=Am||"normal";Aq=!!Aq;if(typeof Az==="number"){Az+="px";}An=An||"normal";At=At||"normal";Ax=Ax||"auto";Au=Au||0;if(typeof Ax==="number"){Ax+="px";}var Ay=Ar?undefined:AA(u,[As,Az,An,At,Ax,Ao]);if(!Ay){var Av;if(!E){E=document.createElement("span");Av=E.style;E.id="vis-measure-span";Av.position="absolute";Av.top="0";Av.visibility="hidden";Av.width="auto";Av.height="auto";if(Aq){Av.whiteSpace="nowrap";}else{Av.whiteSpace="normal";}document.body.appendChild(E);}Av=E.style;if(Aq){Av.whiteSpace="nowrap";}else{Av.whiteSpace="normal";}Av.heigth="auto";Av.width=Ax;Av.lineHeight=Aw;Av.fontFamily=this.surroundWithQuotes(As);Av.fontSize=Az;Av.fontStyle=An;Av.fontWeight=At;Av.wordBreak=Am;E.innerHTML=d.encodeHtmlString(Ao);Ay=E.clientHeight;if(!Ar){G(u,[As,Az,An,At,Ax,Ao],Ay);}}return Ay+Au;},getVisEmptyMsg:function(Am,An){var Ao="";switch(Am){case"AE_ERROR":Ao='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+(An||this.errorMsg||"")+"</div><div></div></div></div></div></div>";break;case"NODATA_OTHERERROR":Ao='<div class="error-msg"><div class="error-content"><div class="text" style="visibility: visible;padding-top:0px;"><div>'+(this.errorMsg||mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data."))+"</div></div></div></div>";break;default:Ao='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return Ao;},getVisEmptyMsgControls:function B(){var Ao=this.error,At,Ar=this.errorType,An;var Ap=mstrmojo.VisUtility;if(this.excludeData){At=Ap.getVisStyle.call(this);var Aq=Ap.getAttMetricCount.call(this);return[{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",cssClass:At,visName:mstrConfig.pluginsVisList[At]&&mstrConfig.pluginsVisList[At].d,visDropzoneMsg:D.getVisDropzoneMsg(Aq.attCount,Aq.metricCount)}];}if(!this.hasError()){return ;}switch(Ar){case Ak.NO_DATASET:case Ak.NO_TEMPLATE_UNIT:if(mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(AR.SUPPORT_GHOST_IMG)){At=Ap.getVisStyle.call(this);var Au="",As="",Am="";if(At===AB.HEAT_MAP){Au="heatmap";As=mstrmojo.desc(11819,"Heat Map");Am=Af.getVisDesc("heatmap");}else{if(At===AB.NETWORK){Au="network";As=mstrmojo.desc(11827,"Network");Am=Af.getVisDesc("network");}else{if(At===AB.KPICARD){Au="kpicard";As=mstrmojo.desc(15800,"KPI");Am=Af.getVisDesc("kpicard");}}}An=[{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",cssClass:Au,visName:As,visDesc:Am}];}else{An=[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:Ao}];}break;case Ak.AE_ERROR:An=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:Ap.getVisEmptyMsg("AE_ERROR",Ao),markupSlots:{containerNode:function(){return this.domNode;}}}];break;default:An=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:'<div class="{@cssClass}"><div class="error-content" style="visibility: visible">'+Ao+"</div></div>",markupSlots:{containerNode:function(){return this.domNode;}}}];break;}return An;},applyStyles2DomNode:function(Ar,Au){var Am,As=Ar.style;if(Object.prototype.hasOwnProperty.call(Au,"backgroundColor")&&Au.backgroundColor!==""&&Au.backgroundColor!=="transparent"){var Aq=1;if(Object.prototype.hasOwnProperty.call(Au,"opacity")&&Au.opacity!==""){Aq=Au.opacity;}var An=Au.backgroundColor,At=function At(Av){if(isNaN(Av)){Av=0;}Av%=16777216;return{b:Av%256,g:(Av>>8)%256,r:(Av>>16)%256};},Ap="";if(An){var Ao=function Ao(Aw,Ax){if(Aw==="transparent"){return"rgba(0,0,0,0)";}Aw=this.parseCSSColor(Aw,false);var Av=At(Aw);return"rgba("+Av.r+" ,"+Av.g+" ,"+Av.b+" ,"+Ax+" )";}.bind(this);if(An.c1!==undefined&&An.c2!==undefined&&An.or!==undefined){Ap=(Ag.buildGradient(An.or,Ao(An.c1,Aq),Ao(An.c2,Aq))).v;}else{Ap=Ao(An,Aq);}As.background=Ap;}}else{As.backgroundColor="rgba(0,0,0,0)";}for(Am in Au){if(Am!=="backgroundColor"&&Am!=="opacity"&&Object.prototype.hasOwnProperty.call(Au,Am)&&Au[Am]&&Au[Am]!==""){As[Am]=Au[Am];if(Am==="fontFamily"){As[Am]="'"+Au[Am]+"'";}}}},parseCSSColor:function(Aq,An){var Am,Ao;if(Aq.length===7){if(An===true){Am=Aq[5]+Aq[6]+Aq[3]+Aq[4]+Aq[1]+Aq[2];}else{Am=Aq.slice(1);}}else{Am=[];var Ap=Aq.slice(1);if(An===true){for(Ao=2;Ao>=0;Ao--){Am.push(Ap[Ao]);Am.push(Ap[Ao]);}}else{for(Ao=0;Ao<3;Ao++){Am.push(Ap[Ao]);Am.push(Ap[Ao]);}}Am=Am.join("");}return parseInt(Am,16);},positionDomNode:function(Ao,Aq){var An,At,Ar,Ap=["width","height","top","left","right","bottom"],As=Ap.length,Am=Ao.style;for(An=0;An<As;An++){At=Ap[An];Ar=Aq[At];if(Ar!==undefined){if((typeof Ar)==="number"){Ar+="px";}Am[At]=Ar;}}},getComputedFontStyle:function K(Ao){var Am=mstrmojo.css.getComputedStyle(Ao);var Ap={};Ap.fontFamily=Am.fontFamily;Ap.fontSize=Am.fontSize;Ap.fontStyle=Am.fontStyle;Ap.fontWeight=Am.fontWeight;Ap.fontVariant=Am.fontVariant;var An=parseInt(Am.paddingLeft)||0,Aq=parseInt(Am.paddingLeft)||0;Ap.bonus=An+Aq;return Ap;},splitWordIfTooLong:function(Aw,Au,Ap){var As=[];var At=Aw.length;var Aq;for(Aq=0;Aq<At;Aq++){var An=Aw[Aq];while(true){var Ax=this.measureTextWidth(An,Ap);if(Ax>Au){var Av=(Au/Ax)*An.length;var Am=Math.max(Math.round(Av),1);while(Am>0){var Ar=An.substr(0,Am);var Ao=Math.round(this.measureTextWidth(Ar,Ap));if(Ao<=Au||Am===1){As.push(Ar);break;}else{Am--;}}An=An.substr(Am,An.length-Am);}else{As.push(An);break;}}}return As;},truncateTextToLineWithWordWrap:function l(BC,A5,A3,As,A4,Aw){var A0=BC.split(" "),A6=A0.length;if(!Aw){A0=this.splitWordIfTooLong(A0,A3,A5);}var BJ,Ay=[],BE=[],Am=0,Aq=A0.length,BL=this.measureTextWidth(" ",A5),Ap=0,Av=false,A2=(A6===A0.length);BE.push(0);for(BJ=0;BJ<Aq;BJ++){var BA=this.measureTextWidth(A0[BJ],A5);if(!Aw&&BA>A3){var An=A0[BJ];var BH=(A3/BA)*An.length;A0[BJ]=An.substr(0,parseInt(BH,10));BA=A3;}Ay.push(BA);Am+=BA;BE.push(Am);if(BJ!==Aq-1){Am+=BL;}}var BG,BI,A8=As;for(BG=0,BI=0;BI<BE.length;){var Au=BE[BI]-BE[BG];if(BG>0&&BI!==BG){Au-=BL;}var At=BE[BI+1]-BE[BG];if(BG>0&&BI+1!==BG){At-=BL;}if(Au<=A3&&((BI+1===BE.length)||(At>A3))){Ap=Math.max(Ap,Au);A8--;if(A8===0||BI===Aq){break;}else{BG=BI;BI++;}}else{BI++;}}if(BI>Aq){BI=Aq;}var Ax=BE[BI]-BE[BG];if(BG>0&&BI!==BG){Ax-=BL;}var BB;if(BI>=Aq&&Ax<A3){BB=A0.join(" ");}else{Av=true;Ap=A3;BB=A0.slice(0,BI).join(" ");var Az=this.measureTextWidth("...",A5);if(Ax+Az<=A3){if(Ax+BL+Az>A3){BB+="...";}else{var BK=A0[BI],A1;for(var A7=1;A7<BK.length;A7++){A1=this.measureTextWidth(BK.substr(0,A7),A5);if(Ax+BL+A1+Az>A3){break;}}BB+=" "+BK.substr(0,A7-1)+"...";}}else{if(BB.charAt(BB.length-1)===" "){BB=BB.substr(0,BB.length-1);}var A9=BB.lastIndexOf(" ");var Ao=BB.length-1-A9;if(Ao===3){BB=BB.substr(0,BB.length-3)+" ...";}else{var BD=0,Ar="",BF=0;while(BD<Az&&BB.length>BF){BF++;Ar=BB.substr(BB.length-BF,BB.length);BD=this.measureTextWidth(Ar,A5);}BB=BB.substr(0,BB.length-BF)+"...";}}}if(A4){return{text:BB,truncated:Av,maxLineLen:Ap,canWordWrap:A2};}return BB;},measureSuperTextWidth:function AC(An,Ao,Am,Ap){return An?this.measureTextWidth("<sup>"+Ao+"</sup>",Am,Ap):this.measureTextWidth(Ao,Am,Ap);},splitTokenIfTooLong:function j(Ax,Av,Ap){var At=[];var Au=Ax.length;var Aq,An,Ay,As,Az;for(Aq=0;Aq<Au;Aq++){An=Ax[Aq];As=An.isSuper;while(true){Ay=An.v;if(An.textWidth!==undefined){Az=An.textWidth;}else{Az=An.textWidth=this.measureSuperTextWidth(As,Ay,Ap);}if(Az>Av){var Aw=(Av/Az)*Ay.length;var Am=Math.max(Math.round(Aw),1);while(Am>0){var Ar=Ay.substr(0,Am);var Ao=Math.round(this.measureSuperTextWidth(As,Ar,Ap));if(Ao<=Av||Am===1){At.push({v:Ar,isSuper:As,textWidth:Ao});break;}else{Am--;}}An={v:Ay.substr(Am,Ay.length-Am),isSuper:As};}else{At.push(An);break;}}}return At;},truncateTextToLineWithWordWrapForTokens:function Ab(Aw,Aq,BF,A7,BG,A2){var BA=Aw.length;Aw=this.splitTokenIfTooLong(Aw,BF,Aq);var BE,A1=[],Am=0,A5=Aw.length,An=0,A6=false,As=(BA===Aw.length),Au,Az,A8,Ao,BC,Av,A0;if(A2&&!As){return{canWordWrap:As};}A1.push(0);for(BE=0;BE<A5;BE++){Au=Aw[BE];A8=Au.v;Az=Au.isSuper;if(Au.textWidth!==undefined){Ao=Au.textWidth;}else{Ao=Au.textWidth=this.measureSuperTextWidth(Az,A8,Aq);}if(Ao>BF){var BD=(BF/Ao)*A8.length;Au.v=A8.substr(0,parseInt(BD,10));Ao=Au.textWidth=BF;}Am+=Ao;A1.push(Am);}var Ay,A9,Ax=A7;for(Ay=0,A9=0;A9<A1.length;){var At=A1[A9]-A1[Ay];var Ar=A1[A9+1]-A1[Ay];if(At<=BF&&((A9+1===A1.length)||(Ar>BF))){An=Math.max(An,At);Ax--;if(Ax===0||A9===A5){break;}else{Ay=A9;A9++;}}else{A9++;}}if(A9>A5){A9=A5;}var A4=A1[A9]-A1[Ay];var BH;if(A9>=A5&&A4<BF){BH=Aw;}else{A6=true;An=BF;BH=Aw.slice(0,A9);var Ap=this.measureTextWidth("...",Aq);if(A4+Ap<=BF){Av=Aw[A9];A8=Av.v;Az=Av.isSuper;for(BC=1;BC<A8.length;BC++){A0=this.measureSuperTextWidth(Az,A8.substr(0,BC),Aq);if(A4+Ap+A0>BF){break;}}if(BC>1){Au={v:A8.substr(0,BC-1),isSuper:Az};Au.textWidth=this.measureSuperTextWidth(Az,Au.v,Aq);BH.push(Au);BH.push({v:"...",textWidth:Ap});}}else{var A3=0,BB;for(BE=BH.length-1;BE>=0;BE--){Au=BH[BE];A8=Au.v;Az=Au.isSuper;BB=0;for(BC=A8.length-1;BC>=0;BC--){BB=this.measureSuperTextWidth(Az,A8.substr(BC),Aq);if(A3+BB>=Ap){break;}}if(BC>=0){break;}else{A3+=BB;}}if(BE>=0){if(BC>0){Au.v=A8.substr(0,BC);Au.textWidth=this.measureSuperTextWidth(Az,Au.v,Aq);BH=BH.slice(0,BE+1);}else{if(BC===0){BH=BH.slice(0,BE);}}BH.push({v:"...",textWidth:Ap});}else{BH=[{v:"...",textWidth:Ap}];}}}if(BG){return{text:BH,truncated:A6,maxLineLen:An,canWordWrap:As};}return BH;},getRankMode:function O(As){var Au=1,At=2,Ar=3,An=4,Ap=5,Am=6,Aq=7,Ao=V.INVALID;if(As){if(AX(As,Ar,At)){Ao=V.TOP_PERCENT;}else{if(AX(As,Ar,Au)){Ao=V.BOTTOM_PERCENT;}else{if(AX(As,Am,An)){Ao=V.BOTTOM;}else{if(AX(As,Am,Ap)){Ao=V.TOP;}else{if(AX(As,Aq)){Ao=V.VALUE;}}}}}}return Ao;},getColorByTitle:function a(An,Am){if(Am===V.BOTTOM_PERCENT||Am===V.TOP_PERCENT){An=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",An);}else{if(Am===V.BOTTOM||Am===V.TOP){An=mstrmojo.desc(2788,"Rank of ##").replace("'##'",An);}}return An;},getColorByFormatStr:function h(An,Am){if(Am===V.BOTTOM_PERCENT||Am===V.TOP_PERCENT){An="0%;(0%)";}else{if(Am===V.BOTTOM||Am===V.TOP){An="";}}return An;},getColorByItems:function Ac(Am,Aw,A3,Az,Au,As,A0){var Ay=[],A4,Ao,At=mstrmojo.num,Ar,Av;if(Am===undefined||Am.length===0){return Ay;}var A6=true;if(Am.length>1){if(Am[0].ceil===Am[1].flr){A6=false;}else{A6=true;}}for(A4=0;A4<Am.length;A4++){var A5=Am[A4],Aq={},An=A5.ceil,A2=A5.flr;if((A4===0&&A6)||(A4===Am.length-1&&!A6)){if(Aw===V.BOTTOM_PERCENT||Aw===V.TOP_PERCENT){Aq.flr=A2/100;Aq.ceil=1;}else{if(Aw===V.TOP||Aw===V.BOTTOM){A2+=1;Aq.flr=Math.floor(A2);Aq.ceil=Au;}else{Aq.flr=A2;Aq.ceil=A3;}}Av=Aq.ceil;}else{if((A4===0&&!A6)||(A4===Am.length-1&&A6)){if(Aw===V.BOTTOM_PERCENT||Aw===V.TOP_PERCENT){Aq.flr=0;Aq.ceil=An/100;}else{if(Aw===V.TOP||Aw===V.BOTTOM){Aq.flr=0;Aq.ceil=Math.floor(An);}else{Aq.flr=Az;Aq.ceil=An;}}Ar=Aq.flr;}else{if(Aw===V.BOTTOM_PERCENT||Aw===V.TOP_PERCENT){A2=A2/100;An=An/100;}else{if(Aw===V.TOP||Aw===V.BOTTOM){A2+=1;A2=Math.floor(A2);An=Math.floor(An);}}Aq.flr=A2;Aq.ceil=An;}}if(Aw===V.TOP||Aw===V.BOTTOM){Aq.ceil=Aq.ceil>Au?Au:Aq.ceil;}if(As){Aq.label=At.formatByMask(As,Aq.flr);if(Aq.flr!==Aq.ceil){Aq.label+=" - "+At.formatByMask(As,Aq.ceil);}}else{Aq.label=Aq.flr;if(Aq.flr!==Aq.ceil){Aq.label+=" - "+Aq.ceil;}}if(A5.fmt&&A5.fmt.bc){Aq.color=A5.fmt.bc;}else{Aq.color=A0;}Ay.push(Aq);}Ay=Ay.filter(function(A7){return A7.flr<=A7.ceil&&!(A7.flr>Av||A7.ceil<Ar);});if(Aw!==V.VALUE){if(Ay[0]&&(Ay[0].label===0)){Ay.shift();}}if(Aw===V.TOP||Aw===V.BOTTOM){Ao=Au;}else{if(Ay.length>0){if(A6){Ao=Ay[0].ceil-Ay[(Ay.length-1)].flr;}else{Ao=Ay[(Ay.length-1)].ceil-Ay[0].flr;}}}var A1=0,Ax,Ap;for(A4=0;A4<Ay.length;A4++){if(A4===Ay.length-1){Ay[A4].scopePercent=1-A1;}else{if(Aw===V.TOP||Aw===V.BOTTOM){Ap=Ay[A4].ceil-Ay[A4].flr+1;}else{Ap=Ay[A4].ceil-Ay[A4].flr;}Ax=Ap/Ao;Ay[A4].scopePercent=Ax;A1+=Ax;}}return Ay;},getDefaultColorByItems:function(Ap,An,Ao){var Am={};Am.label=Ao+" - "+An;Am.flr=Ao;Am.ceil=An;Am.color=Ap;Am.scopePercent=1;return[Am];},getNumberFormat:function(Ap,An){var Aq=Ap.nf,Ao=Ap.gvs;function Am(){var At=(Ao&&Ao.items&&Ao.items[0]&&Ao.items[0].items)||[],As=At[An]||{},Ar=As.nfs;return typeof Ar==="string"?Ar:"";}if(Aq[An]&&typeof Aq[An].nfs!=="string"){Aq[An].nfs=Am();}return Aq[An]&&Aq[An].nfs;},hasOnlyMetricsOnColumn:function(An){var Am=(An&&An.gts&&An.gts.col)||[];return Am.every(function(Ao){return Ao.otp===t.DssTypeUnknown&&(Ao.es||[]).every(function(Ap){return Ap.otp===t.DssTypeMetric;});});},hasNoMetricOnRow:function(An){var Ao=(An&&An.gts&&An.gts.row)||[],Am=function(Ap){return Ap.otp!==t.DssTypeMetric;};return Ao.every(Am);},getAttMetricCount:function(){var Ap=this.getEditingGridData&&this.getEditingGridData()||this.model&&this.model.data,At=Ap&&Ap.gsi,As=At&&At.rows||[],Ao=At&&At.cols||[],An=[].concat(As).concat(Ao),Ar=At&&At.mx||[],Am=0,Aq=Ar.length;Ai.forEach(An,function(Au){if(Au.t!==t.DssTypeMetric){Am++;}});return{attCount:Am,metricCount:Aq};},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(Au,Am,Ay,As){if(!Au||!Am){return ;}var Ap=Au.nds,At,An,Av,Ax,Aw,Ar,Aq,Ao;Ai.forEach(Ap||[],function(Az){At=Az.nds;Ai.forEach(At||[],function(A0){An=A0.es;Ai.forEach(An||[],function(A1){Ax=A1.v;Ar=As[Ax];if(!Ar){Ar=Ay.getNormalizedFormElementId(Ax);As[Ax]=Ar;}Ai.forEach(Am||[],function(A2){Av=A2.es;Ai.forEach(Av||[],function(A3){Ao=false;Aw=A3.id;if(Aw===Ax){Ao=true;}else{Aq=As[Aw];if(!Aq){Aq=Ay.getNormalizedFormElementId(Aw);As[Aw]=Aq;}if(Ar===Aq){Ao=true;}}if(Ao){A1.v=A3.id;A1.n=A3.n;return false;}});if(Ao){return false;}});});});});},modifyScExpDeprecated:function(As,At,Aq,Ao){if(!As||!At){return ;}var Ap=As.nds,An,Am,Ar;Ai.forEach(Ap||[],function(Au){An=Au.nds;Ai.forEach(An||[],function(Av){Am=Av.es;Ai.forEach(Am||[],function(Aw){Ai.forEach(At||[],function(Ax){Ai.forEach(Ax||[],function(Ay){Ar=Ay.es;Ai.forEach(Ar||[],function(Az){if(Aq.call(Ao,Az.id,Aw.v)){Aw.v=Az.id;Aw.n=Az.n;}});});});});});});},getMouseOffset:function(An){var Am=(An.offsetX!==undefined)?An.offsetX:(An.layerX),Ao=(An.offsetY!==undefined)?An.offsetY:(An.layerY);return{x:Am,y:Ao};},translateLineStyle:function(Am){var Ao=["none","solid","solid","dashed","dotted"],An=["1px","1px","2px","1px","1px"];return{width:An[Am]||"0px",style:Ao[Am]||"none"};},getVisStyle:function(){var Am=mstrmojo.VisUtility;return Am.getPropertyByPath(this,"model.data.visName")||Am.getPropertyByPath(this,"model.data.vis.vn");},getGroupAndCalculationContextMenuForDataPoints:function(Ax,BB){var Az,A1=[],Ao=[],A8=[],At=BB.fnCellName,A3=BB.fnUnique,As=BB.fnMakeNode,A6=Ax.getCellForNode.bind(Ax),BD=BB.selection;var Ar=new f.ui.menus.MenuConfig(),An=new f.ui.menus.MenuConfig(),A5=new f.ui.menus.MenuConfig(),BA=new f.ui.menus.MenuConfig();function BC(BE){Ax.cmSelCells=A1[BE].cmSelCells;Ax.derivedElementGroup(A6(Ax.cmSelCells[0]));}function Au(BG){Ax.cmSelCells=Ao[BG].cmSelCells;var BF=A6(Ao[BG].cmSelCells[0]),BE=Ax.getDEInfo(BF);Ax.derivedElementsEdit(A6(Ax.cmSelCells[0]),BE);}function A2(BF){Ax.cmSelCells=Ao[BF].cmSelCells;var BE=A6(Ao[BF].cmSelCells[0]);Ax.removeQuickDE(BE);}function A0(BF){Ax.cmSelCells=Ao[BF].cmSelCells;var BE=A6(Ao[BF].cmSelCells[0]);Ax.renameDEList(BE);}function A4(BE){W(Ax,A6(Ax.cmSelCells[0]),null,BE,false);}function Am(BE){W(Ax,A6(Ax.cmSelCells[0]),null,BE,true);}function Aq(BF){var BE=A6(Ao[BF].cmSelCells[0]);Ax.removeQuickDE(BE);}function A9(BF){var BE=A6(Ao[BF].cmSelCells[0]);Ax.editDECalculation(BE);}function Av(BF,BE){return function(){var BG=new f.ui.menus.MenuConfig();BG.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);BG.addRadioMenuGroup(null,BF,BE,"checkMark",undefined,true);return BG;};}function Ay(BE){BE=BE||[];function BF(BJ){var BG=BJ.extra||{},BK=BJ.setup||mstrmojo.emptyFn,BH=BJ.action||mstrmojo.emptyFn,BI=[];BK(BI,BG);BH(BI,BG);}BE.forEach(BF);}var Ap=[{name:"group",setup:function(BE){A1.forEach(function(BF){Ax.cmSelCells=A1[BF.v].cmSelCells;if(!Object.prototype.hasOwnProperty.call(Ao,BF.v)&&Y(Ax)){BE.push(BF);}});},action:function(BF){var BE;if(BF.length===1){BE=BF[0].v;Ar.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){Ax.cmSelCells=A1[BE].cmSelCells;Ax.derivedElementGroup(A6(Ax.cmSelCells[0]));});}if(BF.length>1){Ar.addPopupMenuItem(mstrmojo.desc(1911,"Group"),Ax.id,Av(BC,BF),"xt");}}},{name:"edit-group",setup:function(BE){Ao.forEach(function(BI){var BH=A6(Ao[BI.v].cmSelCells[0]),BG=Ax.getDEInfo(BH),BF=BG&&BG.de;if(BF&&BF.t===U.LIST){BE.push(BI);}});},action:function(BF){var BE,BH,BG;if(BF.length===1){BE=Ao[BF[0].v].cmSelCells;BH=A6(BE[0]);BG=Ax.getDEInfo(BH);An.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){Ax.cmSelCells=BE;Ax.derivedElementsEdit(A6(Ax.cmSelCells[0]),BG);});An.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){Ax.cmSelCells=BE;Ax.removeQuickDE(BH);});BA.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){Ax.cmSelCells=BE;Ax.renameDEList(BH);});}if(BF.length>1){An.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),Ax.id,Av(Au,BF),"xt");An.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),Ax.id,Av(A2,BF),"xt");BA.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),Ax.id,Av(A0,BF),"xt");}}},{name:"calculation",setup:function(BE){A8.forEach(function(BH,BG,BF){Ax.cmSelCells=BF[BH.v].cmSelCells;var BJ=A6(Ax.cmSelCells[0]),BI=Ax.getDEInfo(BJ),BK=BI&&BI.de;if(!(BK&&BK.t===U.RESIDUE)&&o(Ax)){BE.push(BH);}});},action:function(BE){if(BE.length===1){Ar.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),Ax.id,function(){var BF=BE[0].v,BG=new f.ui.menus.MenuConfig();Ax.cmSelCells=A8[BF].cmSelCells;BG.addRadioMenuGroup(null,A4,p(Ax,null,At).items,"checkMark",undefined,true);return BG;},"xt");}if(BE.length>1){Ar.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),Ax.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},hasToggleItem:true,contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:BE,selectedIndex:0,onitemSelected:function(BF){var BG=BF.v;Ax.cmSelCells=A8[BG].cmSelCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",p(Ax,null,At).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(BG,BF){W(Ax,A6(Ax.cmSelCells[0]),null,BF.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(BE){Ao.forEach(function(BI){var BH=A6(Ao[BI.v].cmSelCells[0]),BG=Ax.getDEInfo(BH),BF=BG&&BG.de;if(BF&&BF.t===U.CALCULATION&&o(Ax)){BE.push(BI);}});},action:function(BE){function BF(){var BG=BE[0].v;Ax.cmSelCells=Ao[BG].cmSelCells;var BK=A6(Ax.cmSelCells[0]),BJ=Ax.getDEInfo(BK),BL=BJ&&BJ.de,BI=p(Ax,BL,At),BH=new f.ui.menus.MenuConfig();BH.addRadioMenuGroup(BI.selectedItem.value,Am,BI.items,"checkMark",undefined,true);return BH;}if(BE.length===1){A5.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),Ax.id,BF,"xt");A5.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var BG=BE[0].v;Ax.cmSelCells=Ao[BG].cmSelCells;var BH=A6(Ax.cmSelCells[0]);Ax.removeQuickDE(BH);});BA.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var BG=BE[0].v;Ax.cmSelCells=Ao[BG].cmSelCells;var BH=A6(Ax.cmSelCells[0]);Ax.editDECalculation(BH);});}if(BE.length>1){A5.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),Ax.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},hasToggleItem:true,contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:BE,selectedIndex:0,onitemSelected:function(BJ){var BK=BJ.v;Ax.cmSelCells=Ao[BK].cmSelCells;var BI=A6(Ax.cmSelCells[0]),BH=Ax.getDEInfo(BI),BL=BH&&BH.de;var BG=p(Ax,BL,At);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",BG.items);this.parent.checkList.set("selectedItem",BG.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(BH,BG){W(Ax,A6(Ax.cmSelCells[0]),null,BG.checkList.selectedItem.v,true);}});});A5.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),Ax.id,Av(Aq,BE),"xt");BA.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),Ax.id,Av(A9,BE),"xt");}}}];Az=A3(BD);Az.forEach(function(BF){var BH=As(BF),BE=A6(BH),BG,BI,BJ;if(!Ax.model.supportsViewFilterActions(BE.tid)){return ;}BG=BE.dei===undefined?A1:Ao;BI=BE.tid;BJ=Ax.model.getObjectInfo(BI).n;if(BG[BI]===undefined){BG[BI]={};BG[BI].cmSelCells=[];BG.push({n:BJ,v:BI,text:BJ,value:BI});}BG[BI].cmSelCells.push(BH);if(A8[BI]===undefined){A8[BI]={};A8[BI].cmSelCells=[];A8.push({n:BJ,v:BI,text:BJ,value:BI});}A8[BI].cmSelCells.push(BH);});var Aw=mstrmojo.VisUtility;var A7=Aw.getVisStyle.call(Ax);if(A7===AB.HEAT_MAP){Ap.splice(2,2);}Ay(Ap);return{createDe:Ar,editGroup:An,editCalculation:A5,renameDe:BA};},getGroupAndCalculationContextMenu:function(Au,A8,A5){var A7=Au,A1=A5.skipSingleAttrCheck||A7.isSingleAttrSelection(),Ap=false,Ar=A7.isSingleContextMenuSelection(),Av=A7.getDEInfo(A8),Aq=Av&&Av.deObject,A4=Av&&Av.de,Az=Aq&&A7.getOthersDEInfo(Aq),Ax=A7.getContextMenuSelections(),A3=true,At=A5.fnCellName,A6=this.getPropertyByPath(A7,"model.data.visName")||this.getPropertyByPath(A7,"model.data.vis.vn");var As=new f.ui.menus.MenuConfig(),An=new f.ui.menus.MenuConfig(),Ay=new f.ui.menus.MenuConfig(),A2=new f.ui.menus.MenuConfig();A7.cmSelCells=A5.selection;if(Au.model.supportsViewFilterActions(A8.tid)){if((Ap||A1)&&AV(A8,z)&&Y(A7)){As.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){Au.derivedElementGroup(A8);});}if(Ar&&A4&&A4.t===U.LIST){An.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){Au.derivedElementsEdit(A8,Av);});An.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){Au.removeQuickDE(A8);});A2.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){Au.renameDEList(A8);});}var Aw=function(A9){W(A7,A8,A4,A9,false);},A0=function(A9){W(A7,A8,A4,A9,true);};if(Az&&!Ar&&A1){S.forEach(Ax,function(A9){if(A9[0]&&A9[0].eid.indexOf(Az.id)>-1){A3=false;return false;}});}if(A6!=="VIHeatMapVisualizationStyle"&&!(Ar&&A4&&A4.t===U.RESIDUE)&&(Ap||A1)&&AV(A8,AJ)&&o(A7)){var Am=function(){var A9=new f.ui.menus.MenuConfig(),BA=p(A7,null,At);A9.addRadioMenuGroup(null,Aw,BA.items,"checkMark",undefined,true);return A9;};As.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,Am,"xt");}if(Ar&&A4&&A4.t===U.CALCULATION&&o(A7)){var Ao=function(){var A9=new f.ui.menus.MenuConfig(),BA=p(A7,A4,At);A9.addRadioMenuGroup(BA.selectedItem.value,A0,BA.items,"checkMark",undefined,true);return A9;};Ay.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,Ao,"xt");Ay.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){Au.removeQuickDE(A8);});A2.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){Au.editDECalculation(A8);});}}return{createDe:As,editGroup:An,editCalculation:Ay,renameDe:A2};},isHostedPopupNode:function(Ap,Ao,An,Am){return AM(Ap,Ao,"mstrmojo-popup-widget-hosted",An,Am);},isMojoEditorNode:function(Ap,Ao,An,Am){return AM(Ap,Ao,"mstrmojo-Editor",An,Am);},applyStyle2Legend:function(Ap,Ao,An){var Am,Ar={},Aq={};for(Am in Ap){if(Am.indexOf("font")>=0||Am.indexOf("color")>=0||Am.indexOf("textDecoration")>=0){Ar[Am]=Ap[Am];}else{Aq[Am]=Ap[Am];}}if(Ao){Ao.style.background="";this.applyStyles2DomNode(Ao,Aq);}if(An){this.applyStyles2DomNode(An,Ar);}},mergeMenuConfigs:function AL(An,Am){function Ao(Aq,Ar,Ap){if(!Ar){return ;}if(!Ap&&Aq.hasMenuItems()&&Ar.hasMenuItems()){Aq.addSeparator();}if(Ar.hasMenuItems()){Aq.absorbMenuItems(Ar);}}return Am.reduce(function(Ap,Aq){Ao(Ap,An[Aq.name],Aq.noSeparator);return Ap;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(An,Am,Ao){An.addDisposable(Am);An.absorbMenuItems(Am);if(Ao&&Am.menus.length>0){An.addSeparator();}},addWheelListener:(function(){var Ap=mstrmojo.dom,Ao=Ap.attachEvent,An=Ap.preventDefault,Aq;function Am(Au,At,Av,As){var Ar=(Aq==="wheel")?Av:function(Aw){if(!Aw){Aw=window.event;}var Ay={originalEvent:Aw,target:Aw.target||Aw.srcElement,type:"wheel",deltaMode:(Aw.deltaMode!==undefined?Aw.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){An(window,Aw);}},Ax=this;if(Aq==="mousewheel"){Ay.deltaY=-Aw.wheelDelta;if(Aw.wheelDeltaX!==undefined){Ay.deltaX=-Aw.wheelDeltaX;}}else{Ay.deltaY=Aw.detail;}return Av.call(Ax,Ay);};return Ao(Au,At,Ar,As);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){Aq="wheel";}else{Aq=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(As,At,Ar){return Am(As,Aq,At,Ar);};}()),addTouchSupportHelper:function AO(Am,Ao,An,Ar,Aq){Am.style["touch-action"]="none";var Ap={MINDRAG:function(As){return(((As.event.type.indexOf("touch")===0)||(As.event.type.indexOf("pointer")===0))?5:1);},TAPHOLDDELAY:250,DBLCLICKDELAY:300};x.newInstance(Am,{context:Ap,start:An,change:Ar,end:Aq},Ao);},addBasicTouchSupport:function AE(Ar,At,Aw,Aq,Av){function Ax(A1){var A0={left:0,top:0};function Ay(A2){if(A2===window||A2===document||A2===document.body){return A0;}else{return A2.getBoundingClientRect();}}function Az(A5,A6,A3){A6=A6||A5.currentTarget||A5.srcElement;if(!Array.isArray(A3)){A3=[0,0];}var A2=A5.clientX||0;var A7=A5.clientY||0;var A4=Ay(A6);A3[0]=A2-A4.left;A3[1]=A7-A4.top;return A3;}return Az(A1.changedTouches?A1.changedTouches[0]:A1,document.body);}function Ap(Ay,A0){if(Ay.touches.length>1||(Ay.type==="touchend"&&Ay.touches.length>0)){return undefined;}var Az=null,A2=null;switch(Ay.type){case"touchstart":Az="mousedown";A2=Ay.changedTouches[0];break;case"touchmove":Az="mousemove";A2=Ay.changedTouches[0];break;case"touchend":Az="click";A2=Ay.changedTouches[0];break;}if(A0){Az=A0;}var A1={bubbles:Ay.bubbles,cancelable:Ay.cancelable,view:Ay.view,screenX:A2.screenX,screenY:A2.screenY,clientX:A2.clientX,clientY:A2.clientY};if(A0==="contextmenu"){A1.button=2;A1.buttons=2;}return new MouseEvent(A0,A1);}function As(A0,Ay){var Az;if(A0.type.indexOf("touch")===0){Az=Ap(A0,Ay);}else{var A1=Ax(A0),A2={bubbles:A0.bubbles,cancelable:A0.cancelable,view:A0.view,detail:A0.detail,screenX:A0.screenX,screenY:A0.screenY,clientX:A1[0],clientY:A1[1]};if(Ay==="contextmenu"){A2.button=2;A2.buttons=2;}Az=new MouseEvent(Ay,A2);}Az.originEvent=A0;return Az;}function Ao(Ay){if(Ay.stopPropagation){Ay.stopPropagation();}if(Ay.preventDefault){Ay.preventDefault();}Ay.cancelBubble=true;return false;}function Am(Az){var A2=Az.event,Ay=Az.context;Ay.startOffset=Ax(A2);Ay._dragged=false;Ay._dragging=true;Ay._taphold=false;Ay.initialTarget=A2.target;var A1=(new Date()).getTime();if(A1-Ay._mouseDownTime<Ay.DBLCLICKDELAY){Ay.numClicks+=1;}else{Ay.numClicks=1;Ay._mouseDownTime=A1;}Ay.tapholdTimeoutId=setTimeout(function(){if((new Date()).getTime()-Ay._mouseDownTime>Ay.TAPHOLDDELAY&&!Ay._dragged){Ay._taphold=true;}if(!Ay._dragged&&Ay._taphold){Az.session.listeners.end(A2);}},Ay.TAPHOLDDELAY+10);var A0;if(Aw){A0=Aw(Az);}if(A0===undefined||(A0&&A0.pause)){Ao(Az.event);}}function Au(A2){var Ay=A2.event,A1=A2.context,A4=Ax(Ay),A0=A4[0]-A1.startOffset[0],Az=A4[1]-A1.startOffset[1];if(Math.abs(A0)<A1.MINDRAG(A2)){A0=0;}if(Math.abs(Az)<A1.MINDRAG(A2)){Az=0;}if(A0||Az){A1._dragged=true;}if((new Date()).getTime()-A1._mouseDownTime>A1.TAPHOLDDELAY&&!A1._dragged){A1._taphold=true;}var A3;if(Aq){A3=Aq(A2);}if(A3===undefined||(A3&&A3.pause)){Ao(A2.event);}}function An(Az){var Ay=Az.context,A1=Az.event;if(Ay.tapholdTimeoutId){clearTimeout(Ay.tapholdTimeoutId);}if(!Ay._dragging){Ay._dragged=false;return ;}Ay._dragging=false;if((new Date()).getTime()-Ay._mouseDownTime>Ay.DBLCLICKDELAY){Ay.numClicks=Math.max(Ay.numClicks-1,1);}if((new Date()).getTime()-Ay._mouseDownTime>Ay.TAPHOLDDELAY&&!Ay._dragged){Ay._taphold=true;}var A0;if(Av){A0=Av(Az);}if(A1.type.indexOf("mouse")===0){Ay._dragged=false;Ay._taphold=false;return ;}else{if(!Ay._dragged){if(Ay._taphold){Ay.initialTarget.dispatchEvent(As(A1,"contextmenu"));}else{Ay.initialTarget.dispatchEvent(As(A1,"click"));}}Ay._dragged=false;Ay._taphold=false;if(A0===undefined||(A0&&A0.pause)){Ao(Az.event);}}}this.addTouchSupportHelper(Ar,At,Am,Au,An);},isNearZero:function(An,Am){Am=Am||5;var Ao=1/Math.pow(10,Am);return(Math.abs(An)<Ao);},hasMergedRowCells:function(Am){return false;},getMockUpThresholds:function(Ao,Ap){var Am=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];S.forEach(Am,function(Ar){var Aq=Ar.expr.nds[0].m;Aq.did=Ao;Aq.n=Ap;});var An={};An[Ao]=Am;return An;},generateThresholdsInfo:function(Ao,At,Am,Aq){var As=Am.length,An=[],Aw,Ap,Ax=0,Av=0;for(var Ar=0;Ar<As;Ar++){Ap=Math.round(Aq[Ar]*100);Av=Ax;Ax=Ap||100;Aw={tid:Ar+1,n:"threshold "+Ar,scope:1,rtp:2,rtxt:"",fmt:{bc:Am[Ar],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:Ao,n:At},cs:[{v:Ap+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:Ax,flr:Av};An.push(Aw);}var Au={};Au[Ao]=An;return Au;},psPt2CssPt:function(Ao,An){var Am=parseInt(Ao,10)*0.75;if(An instanceof Function){Am=An(Am);}return Am+"pt";},captureEventOnce:function(Ar,Aq,Am,Ap,Ao){function An(As){Aq.call(Am,Ad.newDomEvent(Ar,window,As||window.event),Ao);AH.detachEvent(Ap,Ar,An);}Ao=Ao||{};Ap=Ap||document;AH.attachEvent(Ap,Ar,An);},getPropertyByPath:function(Aq,Ap,Am){var An,Ao;if(typeof Ap!=="string"){return Am;}An=Ap.split(".");Ao=An.every(function(As){var Ar=Aq[As];if(Ar!==undefined){Aq=Ar;return true;}return false;});return Ao?Aq:Am;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(Am,An){if(An){Object.keys(An).forEach(function(Ao){Am[Ao]=An[Ao];});}return Am;},{});},toggleControlEnabled:function(Am,An){[].concat(Am).forEach(function(Ao){Ao.set("enabled",!!An);});},findInArray:function(Ap,Ao,An){var Ar=-1,Aq,Am;if(!Array.isArray(Ap)){return Ar;}for(Aq=An===undefined?0:An,Am=Ap.length;Aq<Am;Aq+=1){if(Ao(Ap[Aq])){return Aq;}}return Ar;},arrayUnique:function(Am,Ao){if(!Array.isArray(Am)){return Am;}var An=mstrmojo.VisUtility;return Am.filter(function(Ap,Aq){return An.findInArray(Am,function(Ar){return Ao(Ap,Ar);},Aq+1)===-1;});},range:function(Am,Aq,Ap){Ap=Ap||1;var Ao,An=[];for(Ao=Am;Ao!==Aq;Ao+=Ap){An.push(Ao);}return An;},drawDashLine:function I(Au,Ao,As,An,Aq,Am,At){var Ar=(Ao===An),Ap;Au.beginPath();Au.moveTo(Ao,As);if(Ar){Ap=0;As+=Am;while(As<=Aq){if(Ap%2===0){Au.lineTo(Ao,As);As+=At;}else{Au.moveTo(Ao,As);As+=Am;}Ap++;}if(Ap%2===0){Au.lineTo(An,Aq);}}else{Ap=0;Ao+=Am;while(Ao<=An){if(Ap%2===0){Au.lineTo(Ao,As);Ao+=At;}else{Au.moveTo(Ao,As);Ao+=Am;}Ap++;}if(Ap%2===0){Au.lineTo(An,Aq);}}Au.stroke();},repeat:function(Ao,Ap){var Am=[],An;Ap=Math.max(0,Ap);for(An=0;An<Ap;An+=1){Am[An]=Ao;}return Am;},isHierarchyObject:function(Am){return(Am&&Am.t)===t.DssTypeDimension;},selectDropZonePanel:function(Am){AF(Am,"editPanel");},selectPropertyPanel:function(An,Ao){AF(An,"propertiesPanel");var Am=An.edtModel;if(Am){Am.selectTargetByValue(Ao);}},pluck:function(An,Am){if(!S.isArray(An)){return An;}return An.map(function(Ao){return Ao&&Ao[Am];});},pick:function(An,Am){return Am.reduce(function(Ap,Ao){Ap[Ao]=An[Ao];return Ap;},{});},isColorManuallySet:function(Ao,An){var Am=Aj(Ao,An);if(Am){return Am.isManual;}},getCombColor:function(Ao,An){var Am=Aj(Ao,An);if(Am){return Am.color;}},setColorPickerShowAutomatic:function(An,Am){An.children[0].fillColor.colorPicker.showAutomatic=Am;},getCharGroupValueChangeCb:function(Am){var An=(function(){var Ao={};Ao[AW.FONT_WEIGHT]=Aa.FS_BOLD;Ao[AW.FONT_STYLE]=Aa.FS_ITALIC;Ao[AW.UNDERLINE]=Aa.FS_UNDERLINE;Ao[AW.LINE_THROUGH]=Aa.FS_STRIKETHROUGH;return function(Ap,Aq){return Ap^Ao[Aq];};}());return function(Ap,Ao){if(Am instanceof Function){Am=Am();}if(!Am){return ;}switch(Ap){case AW.COLOR:Am.fontColor.fill.value.setValue(Ao);break;case AW.FONT_SIZE:Am.fontSize.setValue(Ao);break;case AW.FONT_FAMILY:Am.fontFamily.setValue(Ao);break;case AW.FONT_WEIGHT:case AW.FONT_STYLE:case AW.UNDERLINE:case AW.LINE_THROUGH:Am.fontStyle.setValue(An(Am.fontStyle.getValue(),Ap));break;}};},getMetricsInDropZone:AS,addLegendFontChangeListeners:function(An,Ao){var Am=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];Ae(Am,An,Ao);},addLegendBackgroundChangeListeners:function(An,Ao){var Am=["lgdBgFillClr","lgdBgFillTrans"];Ae(Am,An,Ao);},isValidDropZone:function(Am){if(Am===undefined){return false;}var Ao=Object.keys(Am).filter(function(Ap){return Ap!=="visProp";});var An=X.copyProps(Ao,Am);return Am&&!X.equals(An,{});},unitExistInTemplate:function(Ap,Am){var Ao,Ar,Aq=Am.row,An=Am.col;for(Ao=0,Ar=Aq.length;Ao<Ar;Ao++){if(Aq[Ao].id===Ap){return true;}}for(Ao=0,Ar=An.length;Ao<Ar;Ao++){if(An[Ao].id===Ap){return true;}}return false;},findDisabledUnits:function(Av,Aw){var Ar,An,Ap=Aw.docModel.datasets,Am=Av.gts,At=Av.datasetId,Aq=Ap[At]||{},As=Aq.att||[],Au=[];var Ao=mstrmojo.VisUtility;if(As){for(Ar=0,An=As.length;Ar<An;Ar++){if(!Ao.unitExistInTemplate(As[Ar].did,Am)){Au.push(As[Ar]);}}}return Au;},getDrillCandidates:function(Ar,As){var Au=Ar.modelData,Aw=Ar.model,Aq=Aw.docModel.datasets,Am=Au.gts,Ao=mstrmojo.VisUtility,Ax=Ao.findDisabledUnits(Au,Aw),An=[],Ap=(function(){var Ay;if(As){S.forEach(Am.row.concat(Am.col),function(Az){if(Az.id&&Az.id===As){Ay=Az.dp;}});}return Ay;}()),At=function(Ay,A1){var Az=S.find(Ay,"did",A1.id),A0=Ay[Az];if(A0&&!A0.hide){A1.n=A0.n;return true;}return false;},Av=S.filter(Ap,function(A0){var Ay;for(Ay in Aq){var Az=Aq[Ay];if(At(Az.att,A0)){return true;}}return false;});if(Av){An=S.filter(Ax,function(Az){for(var Ay in Av){if(Av[Ay].n===Az.n){return true;}}return false;});}return An;},getDrillSubMenu:function(Am){if(!Am||!Am.items||!Am.drillAction){return{};}var Aq=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,isHostedWithin:false,alignWithAnchor:true,maxHeight:350}),An=Am.items,Ap=Am.drillAction,Ao=[];if(mstrmojo.resolveFeature("sort-drill-paths")){An.sort(function(As,Ar){if(As.n>Ar.n){return 1;}if(As.n<Ar.n){return -1;}return 0;});}An.forEach(function(At,Ar){if(Ao.indexOf(At.did)===-1){Ao.push(At.did);if(At.att){var As=mstrmojo.VisUtility;var Au={};X.copy(Am,Au);Au.items=An[Ar].att;Aq.addPopupMenuItem(At.n,this.id,As.getDrillSubMenu,"xt",Au);}else{Aq.addMenuItem(At.n,"xt",Ap,X.copy(Am,{drillUnit:At}));}}});return Aq;},getDrillMenu:function(As,At,Ay,Am){var Au=As.model,Ap=mstrmojo.VisUtility,Av=Ap.getDrillCandidates(As,At),Aw=Av.length,Ar=Au.docModel,Ao=Ar.datasets[As.modelData.datasetId],A2,Ax=[],A0=-1,Az,A1,Aq,An;if(Ao&&Ar.isMDXDataset(Ao)){Ap.sortMdxDrillCandidates(Av);A2=Ao.tables[0];A2.dimensions.forEach(function(A3){Aq=true;Az=-1;A3.hierarchies.forEach(function(A4){An=true;A4.att.forEach(function(A5){A1=Ai.findBin(Av,A5,"did",Aw);if(A1!==-1){if(Aq){Ax.push({id:A3.did,did:A3.did,n:A3.n,att:[]});A0++;Aq=false;}if(An){Ax[A0].att.push({id:A4.did,did:A4.did,n:A4.n,att:[]});Az++;An=false;}Ax[A0].att[Az].att.push(Av[A1]);}});});});}else{Ax=Av;}return Ap.getDrillSubMenu(X.copy(Am,{items:Ax,drillAction:Ay}));},sortMdxDrillCandidates:function(Am){Am.sort(function(Ao,An){if(Ao.did<An.did){return -1;}if(Ao.did>An.did){return 1;}return 0;});return Am;},getDrillMenuItemsCallback:function(Ao,Ap,Am,An){return function(){var Ar=mstrmojo.VisUtility;var As=Ar.getDrillCandidates(Ao,An),Aq=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});As.forEach(function(At){Aq.addMenuItem(At.n,"xt",Ap,X.copy(Am,{drillUnit:At}));});return Aq;};},doDrill:function(Ao,A2,Ax,A3){var A4=Ao;function Au(A6){return A6.model.controller.cmdMgr;}function A0(){return{success:function A6(){var A7=mstrmojo.VisUtility;A7.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var An=A4.model,A1=(A4.getDocModel&&A4.getDocModel())||A4.model.docModel,Az=A1.getDataService(),Ar=Az.newUpdate();var At=true;if(A1.prefs&&A1.prefs.rtprnt){At=parseInt(A1.prefs.rtprnt,10)===1;}else{if(An.xtab.defn.tkp!==undefined){At=parseInt(An.xtab.defn.tkp,10)===-1;}}A3=A3||{};A3.keepParent=At;var As=Ax.call(Ao,A2,A3);var Av=A4.zonesModel,A5=Av.getUpdateCallback(),Aw=A4.model.controller||A1.controller,Ap=Aw._getXtabCallback(A4);Ar.add(As,Ah(A5,Ap));var Am=An.getSelectorDataFromTemplateLimit(A4.model.data.tpl).concat({keepOnly:true,data:A4.getContextMenuSelections()}),Ay=A1.getKeepOnlyOrExcludeAction(A4.k,Am);Ar.add(Ay,A0.call(A4));Au(A4).execute({execute:function Aq(){this.submitUpdate(Ar);},urInfo:{callback:Ar.callback}});},strStartsWith:function(Ao,An,Am){Am=Am||0;return Ao.lastIndexOf(An,Am)===Am;},changeWidgetBackground:function(Ao,Ap,An){var Am=Ao.parent;if(Am&&Ap!==An){Am.changeUnitFormats(false,1,Ao.getFormats(),AW.BACKGROUND_COLOR,Ap,An);Am.raiseEvent({name:"BEMFormatChange",propertyName:AW.BACKGROUND_COLOR,value:Ap,isTitle:false});}},translateGridError:function(An,Am){if(Am===undefined){Am=Ak.AE_ERROR;}if(Am===Ak.EMPTY_DATA){An=mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data.");}if(Am===Ak.NO_DATASET||Am===Ak.NO_TEMPLATE_UNIT){An=mstrmojo.desc(11668,"Drag objects here.");}if(!An){An=mstrmojo.desc(13687,"Unknown error");}return{msg:An,type:Am};},hasValidValueInMetric:function(Ap,An){var Am=mstrmojo.VisUtility;var Ao=Am.getPropertyByPath(Ap,"model.data.gsi.mx");if(Ao===undefined||Ao.length<=An||An<0){return false;}var Aq=Ao[An];return["min","max"].every(function(Ar){var As=Aq[Ar];return As!==undefined&&As!==null&&As!=="";});},renderWidgetErrorRSD:function(Ap,Ar,An){var At=document.createElement("div");var As='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+Ar+"</div></div>";At.innerHTML=As;At=At.firstChild;var Am=Ap.width,Ao=Ap.height;if(Am!==undefined){At.style.width=Am+"px";}if(Ao!==undefined){At.style.height=Ao+"px";}var Aq=Ap.domNode;if(Aq){An.forEach(function(Au){Aq["on"+Au]=undefined;});while(Aq.firstChild){Aq.removeChild(Aq.firstChild);}Aq.appendChild(At);}else{Ap.parent.domNode.appendChild(At);}},visPrint:function(){var Am=mstrmojo.VisUtility.enableInVis;if(Am&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(Ap,Am){var Ao=Am&&Am.did,An=Ap.model.data.datasetId||"",Aq=null;if(Ao){Aq=AY.getDatasetFromAttributeId(Ap.model.docModel.datasets,Ao);}else{if(An){Aq=AY.getDatasetFromId(Ap.model.docModel.datasets,An);}}return Aq&&AY.hasCGorCon(Aq);},isCGorCon:function q(Ap,Am){var Ao=Am&&Am.did,An=Ap.model.data.datasetId||"",Aq=null;if(Ao){Aq=AY.getDatasetFromAttributeId(Ap.model.docModel.datasets,Ao);}else{if(An){Aq=AY.getDatasetFromId(Ap.model.docModel.datasets,An);}}return Aq&&AY.isCGorCon(Am,Aq);},findElementsByAttribute:function R(Ao,Aq,Ap,Am){Am=!!Am;var Ar=[];if(Ap.constructor!==Array){Ap=[Ap];}var As=function(At){if(Am){return At.identity&&At.identity.tlOpt&&At.identity.tlOpt[Aq];}else{return At.getAttribute(Aq);}};function An(Av){var At=As(Av),Au;if(Av.hasChildNodes()){Au=Av.firstChild;while(Au){if(Au.nodeType===1){At=As(Au);if(Ap.indexOf(At)!==-1){Ar.push(Au);}else{An(Au);}}Au=Au.nextSibling;}}}An(Ao);return Ar;},restoreEsForUnit:function AU(Aq){if(!Aq){return ;}var Ar=Aq.es,An=Aq.fs,Ap=Aq.otp,Am=An&&An.length||0;function Ao(As){var At=document.createElement("div");At.innerHTML=As;return At.innerText;}if(Ar){S.forEach(Ar,function(At,As){At.n=d.decodeHtmlString(At.n);if(Ap===t.DssTypeAttribute&&Am){switch(An[As%Am].bftp){case AQ.DssBaseFormHTMLTag:At.n=Ao(At.n);break;default:}}});}},isTrue:function AZ(Am){return Am==="true"||Am===true;},getFontFamilyItems:function w(){if(P){return P;}else{P=[];S.forEach(Q.Families.slice(1),function(Am){P.push({n:Am.n,id:Am.n,did:Am.n,preview:!Am.symbolic});});return P;}},surroundWithQuotes:function AT(Am){if(!Am){return"";}return"'"+Am.replace(/^['|"]+/,"").replace(/['|"]+$/,"")+"'";}});mstrmojo.VisUtility.enableInVis=true;}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.VisUtility","mstrmojo.ui.menus.MenuConfig","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.rw._SupportViewFilterInVizBox","mstrmojo.util.FontLoader");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var R={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var L=["background-color","fx"],H={width:"width",height:"height"},Y=mstrmojo.array,K=mstrmojo.hash;mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate,mstrmojo.vi.ui.rw._SupportViewFilterInVizBox,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,excludeData:false,skipReRender:false,updateFormatsOnUpdate:true,bgFormats:{},init:function e(p){this.excludeData=!!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause());if(this._super){this._super(p);}},setModel:function h(p){this.set("model",p);},destroy:function d(){var p=this.model;if(p&&p.destroy){p.destroy();delete this.model;}this._super();},resize:function N(){var p=this.getFormats();if(parseInt(p.height,10)===0||parseInt(p.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(p.height,p.width);this.domNode.style.display="";}},setDimensions:function b(s,q){var p=this._super(s,q);if(p&&this.hasRendered&&!this.skipReRender){this.reRender();}return p;},reRender:function J(){this.unrender();this.render();},getWidth:function j(){return parseInt(this.width,10);},getHeight:function X(){return parseInt(this.height,10);},getLeft:function V(){return parseInt(this.left,10);},getTop:function B(){return parseInt(this.top,10);},getFonts:mstrmojo.emptyFn(),loadFonts:function E(p,q){if(mstrmojo.util.FontLoader.load(p,q)){q.success();}},preBuildRendering:function A(){if(this.requirePreload){var p=function p(){this.requirePreload=false;this.render();};if(mstrmojo.util.FontLoader.load(this.getFonts(),{success:p.bind(this),failure:p.bind(this)})){return this._super();}else{return false;}}return this._super();},buildRendering:function D(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function a(){},postBuildRendering:function(){var p=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:p||this.excludeData,controls:this.getVisEmptyMsgControls()});this.applyBackground();return !p;},applyBackground:function W(){var q=this.bgFormats,t,p,u,s;if(mstrApp.isExpress&&!K.isEmpty(q)){t=this.formatHandlers=this.formatHandlers||{};u=t.domNode=t.domNode||[];p="BG";s=Y.indexOf(u,p);if(s<0){u.push(p);}this.applyCSSFormatToNode("domNode",q);}},parseBgFormats:function G(){var p=this.id;return{success:function(x){var t,AA,w,q,z,s,u=mstrmojo.all[p],AB=u&&u.getDocModel();if(x.defn&&x.defn.layouts&&u&&AB){AA=x.defn.layouts;t=Y.find(AA,"k",AB.getCurrentLayoutKey());w=AA[t];q=w&&w.units&&w.units[u.k];z=q&&q.fmts;if(z){s=u.bgFormats={};Y.forEach(L,function(AC){if(z[AC]){s[AC]=z[AC];}});}}}};},onAppStateChange:function(p){var q=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),s=p.valueWas&mstrmojo.vi.VisualInsightApp.APP_STATES.PAUSE;this.excludeData=!!(mstrConfig.resolveOnly||q);if(this._super){this._super(p);}if(q&&!s||(!q&&s&&!mstrApp.enableUpdate)){this.raiseEvent({name:"toggleCtrlOverlay",visible:this.excludeData||this.isEmpty(),controls:this.getVisEmptyMsgControls()});}},refresh:function k(p){if(this.excludeData){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});return ;}this._super(p);},update:function Z(t){t=t||this.node;if(t){var p=t.data;if(p){this.model.set("data",p);}this.waitingForData=!!p.nsj;if(this.waitingForData){var q="ServerJsonRWDStyle";var u=this.model,s=u.getDataService(),w={host:this,nodes:[this.k]},z;if(p.wid!==undefined){w.slices=[p.wid];}z=mstrmojo.func.wrapMethods(this.parseBgFormats(),u.docModel.getUpdateColorMapCallback(),u.docModel.getUpdateThemePaletteCallback(true),u.controller._getXtabCallback(this,false));s.retrieveServerJson(w,z,{preserveUndo:true,style:{name:q,params:{treesToRender:3}},params:{styleName:q}});this.updated=true;return false;}this.updateContentFormats(t);}if(this.model){var AA=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(AA&&AA.getDocBuilder){var x=AA.getDocBuilder().getMojoVisName(t);if(x){t.data.visName=x;}}}this.updated=true;if(this._super){return this._super(t);}return true;},updateContentFormats:function M(u){var s,w,q,t=u.defn,p=this.builder;if(this.updateFormatsOnUpdate&&t){if(p&&p.isPortlet&&p.isPortlet(t)){w=H;}else{w=R;}q=t.fmts||t.units[this.model.k].fmts;for(s in w){if(w.hasOwnProperty(s)&&q.hasOwnProperty(s)){this[w[s]]=q[s];}}}},isEmpty:function O(){return false;},getVisEmptyMsgControls:function I(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function l(){return this.model;},getData:function Q(){return this.model.data;},getRowsAndCols:function(){var p=this.model.data.gts;return(p.row||[]).concat(p.col||[]);},getExp:function(){var p=this.model.data,q=p&&p.sc&&p.sc.exp;return q;},getDocModel:function f(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function U(){return mstrmojo.emptyFn;},renderErrorMessage:function o(p){this.domNode.innerHTML='<div class="mstrmojo-message">'+p+"</div>";},getMessageID:function S(){return this.model.docModel.mid||this.model.mid;},performAction:function g(p){var q=this.model,u=this.scriptClass==="mstrmojo.heatmap.vi.VisHeatMap",t=u?q.getHMAction(p):q.getAction(p),s=t&&t.h;if(s&&this.controller[s]){this.controller[s](this,t.a);return true;}return false;},deleteSelectorControl:function P(){var p=this.getData(),q=p.sc;if(q&&parseInt(q.ct,10)===6){delete p.sc;}},findSelectorControl:function F(){var q=this.getData(),p=q&&q.sc;if(p&&parseInt(p.ct,10)===6){this.selectorControl=p;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;},displayVizBoxVisFilterIndicator:function C(p,q){if(p&&q&&q.displayVisFilterIndicator){q.displayVisFilterIndicator();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.VisUtility");var R=mstrmojo.css,A=mstrmojo.VisUtility,H=mstrmojo.array,D=mstrmojo.string,I="vis-tooltip",N=20,P=165,L=350,E=350,G="px";function Q(){var V=this.domNode;V.innerHTML="";var S=document.createElement("div");S.className=I+"-container";var W=document.createElement("table");W.className=I+"-table";for(var U=0;U<3;U++){W.appendChild(document.createElement("COL"));}S.appendChild(W);this.domNode.appendChild(S);return W;}function K(U){var S=[],V=false;H.forEach(U,function(W){if(!W.isSuper){S.push(W.v);}else{V=true;S.push("<sup>"+W.v+"</sup>");}});return{hasSuper:V,htmlText:S.join("")};}mstrmojo.AndroidVisTooltip=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.AndroidVisTooltip",init:function O(S){this._super(S);R.addWidgetCssClass(this,I);},toggle:function M(S){if(this.domNode){this.domNode.style.display=S?"block":"none";}},displayInfo:function C(W,e,S){var V=this.domNode,f=Q.call(this),b=false,U=0,d=0,X=8,a=false,Z=f.childNodes[0],Y=f.childNodes[2];W.forEach(function(AA){var AC,o,s,h,u,x,t,AB,g,j,z;if(!a){var w=f.insertRow(-1),p=w.insertCell(-1),l=w.insertCell(-1),k=w.insertCell(-1);w.className=I+"-tr";p.className=I+"-name";l.className=I+"-space";k.className=I+"-value";if(AA===null){R.addClass(w,"separator");b=true;}else{if(b){R.addClass(w,"below-separator");}if(!S){l.innerHTML=":";}AC=AA.n;z=!AA.skipEncode;p.innerHTML=z?D.encodeHtmlString(AC,true):AC;s=A.getComputedFontStyle(p);h=Math.ceil(A.measureTextWidthQuick(AC,s,s.bonus));t=V.offsetHeight>=E?1:2;if(h>P){AB=A.truncateTextToLineWithWordWrap(AC,s,P,t,true);if(AB.canWordWrap){p.innerHTML=z?D.encodeHtmlString(AB.text,true):AB.text;}else{AB=A.truncateTextToLineWithWordWrap(AC,s,P,1);p.innerHTML=z?D.encodeHtmlString(AB,true):AB;}}U=Math.min(Math.max(U,h),P);o=AA.v;j=AA.isTrendLineFuncToken;if(j){g=K(o);}if(!j||!g.hasSuper){if(j){o=g.htmlText;}k.innerHTML=z?D.encodeHtmlString(o,true):o;u=A.getComputedFontStyle(k);x=Math.ceil(A.measureTextWidthQuick(o,u,u.bonus));if(x>P){AB=A.truncateTextToLineWithWordWrap(o,u,P,AA.noTruncate?100:t,true);if(!AB.canWordWrap){AB=A.truncateTextToLineWithWordWrap(o,u,P,1,true);}k.innerHTML=z?D.encodeHtmlString(AB.text,true):AB.text;x=AB.maxLineLen;}d=Math.min(Math.max(d,x),P);}else{k.innerHTML=g.htmlText;u=A.getComputedFontStyle(k);x=0;H.forEach(o,function(AD){AD.textWidth=A.measureSuperTextWidth(AD.isSuper,AD.v,u,u.bonus);x+=AD.textWidth;});x=Math.ceil(x);if(x>P){AB=A.truncateTextToLineWithWordWrapForTokens(o,u,P,AA.noTruncate?100:t,true,true);if(!AB.canWordWrap){AB=A.truncateTextToLineWithWordWrapForTokens(o,u,P,1,true);}k.innerHTML=K(AB.text).htmlText;x=AB.maxLineLen;}d=Math.min(Math.max(d,x),P);}Z.style.width=U+"px";Y.style.width=d+"px";f.style.width=(U+d+X)+"px";b=false;}if(V.offsetHeight>=E){var q=f.lastChild;q&&q.removeChild(q.lastChild);a=true;}}});if(e){this.moveTo(e.x,e.y);}},moveTo:function(b,a){var Z=mstrmojo.dom.position(document.body),X=this.domNode,d=X.offsetWidth,Y=X.offsetHeight,W=Z.x+Z.w,e=Z.y+Z.h,U=b+N,S=a+N;if(U>W-d||S>e-Y){if(U<=W-d){S=e-Y;}else{if(S<=e-Y){U=W-d;}else{U=W-d;S=a-N-Y;}}}var V=X.style;V.left=U+G;V.top=S+G;},doLayout:function B(V){var Z=this.domNode.getElementsByTagName("table")[0];if(!Z){return ;}var a=R.getComputedStyle(this.domNode),Y=V-parseInt(a.paddingLeft,10)-parseInt(a.paddingRight,10);Y-=Z.rows[0].cells[0].offsetWidth;Y-=10;var U=Z.getElementsByClassName(I+"-value"),X=U?U.length:0,W,S;for(W=0;W<X;W++){S=U[W];S.style.maxWidth=Y+G;}},posTo:function J(U){var S=this.domNode.style;S.left=U.x+G;S.top=U.y+G;},renderErrMsg:function F(S){Q.call(this).insertRow(-1).insertCell(-1).innerText=S;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._HasSuggestion","mstrmojo.Enum_Keys","mstrmojo.css","mstrmojo.VisUtility","mstrmojo.hash","mstrmojo.dom");var K=mstrmojo.dom,E=mstrmojo.css,R="srchBoxState",C=mstrmojo.Enum_Keys,S=mstrmojo.VisUtility,M=200,h,H=24,Q={fontFamily:"Arial",fontSize:"11px"};var f={2147762262:mstrmojo.desc(16256,"Please enter a numeric value"),2147762227:mstrmojo.desc(16257,"Unable to perform search with the operators provided")};var P={DEFAULT:1,ADDING:2,EMPTY:3,FULL:4};var o="mstrmojo-SimpleObjectInputBox-del";function F(){var u=this.inputBox,w=u&&u.value;if(w!==""&&(w!==this._lastPattern||!this.suggestionShown)){this.showSuggestion(w);this._isSearching=true;if(this.hitEnterToTest){this.inputBox.blur();}}this._lastPattern=w;delete this._timerHandle;}function D(){var u=this._timerHandle;if(u){window.clearTimeout(u);delete this._timerHandle;}}function A(){if(this.richTooltip){if(this.tooltip){this.tooltip.set("allowOtherTooltips",false);}this.hideTooltip();}}function b(u){var x=this._inputPos,w=!mstrApp.isAppStatePresentation||mstrApp.isAppStatePresentation(),z=this,AA;if(this.richTooltip){AA=this.richTooltip;if(!this.hasOpenTooltip&&!this.suggestionShown){AA.top=(x.h+x.y)+"px";AA.left=x.x+"px";if(!this.hitEnterToTest&&!w){window.setTimeout(function(){var AD=z.tooltip,AC=AD&&AD.contentNode,AE,AB;AE=AC?AC.childNodes:null;if(AE&&AE.length>1){AB=AE[1];AE=AB.childNodes;if(AE&&AE.length>1){AB=AE[1];}else{AB=null;}}if(z.hasOpenTooltip&&AB&&!E.hasClass(AC,"lng")){if(AA.onclick){z.tooltip.onclick=AA.onclick;K.attachMarkupEvent(z.tooltip.id,AB,"click");}E.addClass(AC,"lng");}},3000);}this.showTooltip(u.e,u.hWin);this.set("allowOtherTooltips",!this.hitEnterToTest);}}}function G(){if(window.mstrLocalStorage===undefined){return{};}var u=(mstrLocalStorage.getLocalStorage()||{})[R];return(u&&JSON.parse(u))||{};}function Y(u){if(window.mstrLocalStorage!==undefined){mstrLocalStorage.setItem(R,JSON.stringify(u));}}mstrmojo.SimpleObjectInputBox=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo._HasSuggestion,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.SimpleObjectInputBox",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-SimpleObjectInputBox {@cssClass}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-SimpleObjectInputBox-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}<input type="text" mstrAttach:keydown,keyup,blur,focus style="display: none;" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" /><div class="mstrmojo-SimpleObjectInputBox-empty"><div>{@emptyText}</div></div></div></div>',markupSlots:{itemsContainerNode:function(){return this.domNode.firstChild;},emptyTextNode:function(){return this.domNode.firstChild.lastChild;},inputBox:function(){var u=this.domNode.firstChild.children;return u[u.length-2];},scrollboxNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onmaxItemWidthChange:function e(){var u=this.maxItemWidth;if(!isNaN(u)&&u>0){this.emptyTextNode.style.maxWidth=u+"px";}}},itemField:"n",emptyText:"",state:0,maxItemWidth:"none",useKeyDelay:false,hitEnterToTest:false,maxObjectCount:null,useRichTooltip:true,init:function p(u){this._super(u);if(mstrApp.isWorkstation){Q.fontFamily="Helvetica";}},showTooltip:function t(w,AA){var z=w.target||K.eventTarget(w.hWin,w.e),x=this.getItemFromTarget(z);if(x&&x.n){var AB=this.getItemNodeFromTarget(z).firstChild,u=K.position(AB);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPCENTER,cssClass:"vi-regular vi-tooltip-A A-center",refNode:AB,content:mstrmojo.string.encodeHtmlString(x.n),top:u.h+11,left:u.w/2};this._super(w,AA);}},getItemMarkup:function(u){if(!h){var w=this.itemField;h=this._super(u).replace(">{@en@n}<",'"><div class="elem">{@en@'+w+'}<div class="'+o+'"></div></div><');}return h;},getItemProps:function d(AA,u){var x=this._super(AA,u),AB=this.itemField;var z=this.maxItemWidth;if(!isNaN(z)&&z>0){z=(z-H);}if(!mstrmojo.string.isEmpty(AA[AB])){var w=AA[AB];x[AB]=w;if(z<S.measureTextWidth(w,Q)){x.title=w;}}x.addStyle("max-width:"+z+"px");return x;},getSuggestionPos:function U(){var u=this._inputPos;return{target:this.inputBox,left:u.x+"px",top:u.y+u.h+"px",zIndex:100};},updateSuggestion:function Z(u){var w=G();if(!w.srch){if(this._super){this._super(u);}}this.inputBox.focus();A.call(this);},failMessage:function B(w){var x=f[w.errCode]||w.msg,u=x?[{n:x,t:-101,cls:"nomatch"}]:[];this.updateSuggestion(u);},getSearchPattern:function N(){return this.inputBox?this.inputBox.value:"";},showInfoTooltip:function X(z){var AA=G(),u=this.parent.parent,AB=K.position(u.domNode),w=this.richTooltip,x=this;if(!AA.hasShownInfo&&!mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO){mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO=true;AA.hasShownInfo=true;this.set("richTooltip",{posType:mstrmojo.tooltip.POS_BOTTOMCENTER,cssClass:"vi-regular vi-tooltip-V vi-tooltip-leftcenter",contentNodeCssClass:"srch info",top:AB.y+"px",left:AB.x+AB.w+8+"px",content:mstrmojo.desc(15909,'You can re-enable "Instant Search" from the menu.'),onClose:function(){x.set("richTooltip",w);}});this.showTooltip(window.event,window);if(this.tooltip){this.tooltip.set("allowOtherTooltips",false);}else{this.set("allowOtherTooltips",false);}}AA.srch=z;Y(AA);},onIncrementalFetch:function J(){this.inputBox.blur();},onSuggestionItemSelect:function k(u){D.call(this);this.set("items",this.items.concat(u));this._super();var w=this.id;window.setTimeout(function(){var x=mstrmojo.all[w];if(parseInt(x.state,10)!==P.FULL){x.set("state",P.ADDING);}},0);},onstateChange:function W(w){var x=w.value;this.emptyTextNode.style.display=(x===P.ADDING)?"none":"block";var u=this.inputBox,z=u.style;if(x===P.ADDING){z.display="";this.updateScrollbars();u.focus();this._inputPos=K.position(u,true);}else{D.call(this);z.display="none";u.value="";this._lastPattern="";this.updateScrollbars();if(this.parent.getFormats&&!this.parent.getFormats().height&&this.parent.parent.performCanGrowCanShrink){this.parent.parent.performCanGrowCanShrink(this.parent.parent.children);}}},postBuildRendering:function O(){var u,w=G();M=(mstrApp.getSearchAutoCompleteDelay&&mstrApp.getSearchAutoCompleteDelay())||M;this.state=0;this.setDefaultState();if(w.srch){this.inputBox.value=w.srch;this.set("state",P.ADDING);delete w.srch;Y(w);}u=this._super();return u;},preitemsChange:function L(){this.setDefaultState();},onclick:function g(w){var AA=K.eventTarget(w.hWin,w.e);if(AA&&AA.className===o){var z=K.findAncestorByAttr(AA,"idx",true,this.domNode),u=z&&parseInt(z.value,10);this.hideTooltip();if(u!==null&&!isNaN(u)){var x=this.items.concat();x.splice(u,1);this.set("items",x);}return ;}if(parseInt(this.state,10)!==P.FULL){this.set("state",P.ADDING);}},onblur:function V(){if(this._isSearching||this.tooltip){return ;}D.call(this);A.call(this);if(!this.suggestionShown){this.setDefaultState();}},onfocus:function l(){this._isSearching=false;if(this.suggestionShown){A.call(this);}},prekeydown:function I(w){var AA=w.e;switch(parseInt(AA.keyCode||AA.charCode,10)){case C.DOWN_ARROW:this.nextHighlight();break;case C.UP_ARROW:this.preHighlight();break;case C.TAB:case C.ENTER:K.preventDefault(w.hWin,AA);if(this.suggestionShown){var z=this.getSelected();if(z){this.handleSuggestionItemSelect(z);}else{this.hideSuggestion();}}else{if(this.hitEnterToTest){A.call(this);F.call(this);}}break;case C.ESCAPE:D.call(this);if(this.suggestionShown){this.hideSuggestion();}else{this.setDefaultState();}break;case C.BACKSPACE:if(!this.getSearchPattern()&&!mstrApp.hasRequests()){K.preventDefault(w.hWin,AA);var x=this.items&&this.items.concat();if(x&&x.length){x.splice(x.length-1,1);mstrApp.ignoreBackSpace=true;this.set("items",x);var AC=this.id;window.setTimeout(function(){mstrmojo.all[AC].set("state",P.ADDING);mstrApp.ignoreBackSpace=false;},0);}}break;}var u=this.richTooltip,AB=(u&&u.contentNodeCssClass)||"";if(AB.indexOf("srch info")>-1){A.call(this);}},prekeyup:function s(u){var z=u.e,w=parseInt(z.keyCode||z.charCode,10),x=this.getSearchPattern();if(!x||x!==this._lastPattern){K.preventDefault(u.hWin,u.e);this.hideSuggestion();}if(this.inputBox.value.length&&w!==C.ENTER&&w!==C.TAB&&!this.suggestionShown){b.call(this,u);}else{A.call(this);}if(this.hitEnterToTest){return ;}if(this.useKeyDelay){var AA=this.id;if(!this._timerHandle){this._timerHandle=window.setTimeout(function(){F.call(mstrmojo.all[AA]);},M);}}else{F.call(this);}},widgetResized:function q(){if(this.hasRendered){var z=parseInt(this.width,10),AB=this.items.length,AC=this.itemsContainerNode.childNodes;if(AB<=(AC&&AC.length)){var AA=z-H;for(var x=0;x<AB;x++){var u=AC[x],w=u.textContent;u.style.maxWidth=AA+"px";if(w&&AA<S.measureTextWidth(w,Q)){u.title=w;}else{u.title="";}}}if(this.emptyTextNode){this.emptyTextNode.style.maxWidth=z+"px";}this.updateScrollbars();}},setupScrollNodes:function j(){this.scrollNode=this.scrollboxNode;},setDefaultState:function a(){var x=this.maxObjectCount,u=(this.items&&this.items.length)||0,w=(x!==null&&x!==undefined&&u>=x);this.set("state",!u?P.EMPTY:(w?P.FULL:P.DEFAULT));}});mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO=false;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.elementHelper","mstrmojo.SimpleObjectInputBox","mstrmojo._HasTooltip","mstrmojo.mstr.EnumDSSXMLObjectTypes");var N=mstrmojo.array,H=mstrmojo.dom,B=mstrmojo.Enum_Keys,P=mstrmojo.hash,d=mstrmojo.mstr.EnumDSSXMLObjectTypes,Q=mstrConfig.thousandsSep;if(Q===undefined){Q=",";}var K=2147762227,X=2147762262,I=2147762269,L=140,O=118,Y=350,J=-100,W=-101,C=64;var U;mstrmojo.SearchBoxSelectorList=mstrmojo.declare(mstrmojo.SuggestionList,null,{postBuildRendering:function V(){var g=this._super(),e=this.parent,j=e.id;if(!this.onScroll){this.onScroll=function f(){var k=mstrmojo.all[j],l=k.domNode;if(!k.isFetching&&Math.ceil(l.offsetHeight+l.scrollTop)>=l.scrollHeight){k.isFetching=true;k.opener.getCandidatesThroughTaskCall({isIncFetch:true},{});}};}var h=e.domNode;if(e.supportsIncFetch){H.attachEvent(h,"scroll",this.onScroll);}else{H.detachEvent(h,"scroll",this.onScroll);}return g;},getItemMarkup:function(f,e){if(!U){U=this._super(f,e).replace(">{@"+this.itemField+"}<",">{@"+this.itemField+"}{@weight}<");}return U;},getItemProps:function b(g,e){var f=this._super(g,e),h=g.wt;f.weight=h?"<em>("+mstrmojo.num.addSeparators(h,Q)+" "+this.parent.opener.wtStr+")</em>":"";return f;},onmouseover:function(g,h){var f=g.e.srcElement;if(f.scrollWidth<=f.offsetWidth){f.title="";}},onclick:function(f){var j=this.parent.opener.suggestionItems,e=j.length;this._super(f);if(e<=1){return ;}var g=N.find(j,"t",J),h=this.getItemFromTarget(f.getTarget());if(h&&h.t&&h.t===J){N.forEach(j,function(k,l){if(!this.selectedIndices[l]){this.doItemSelect(k,{});}},this);}else{if(this.selectedIndices[g]){this.doItemSelect(j[g],{});}}}});mstrmojo.SearchBoxSelector=mstrmojo.declare(mstrmojo.SimpleObjectInputBox,[mstrmojo._HasTooltip],{scriptClass:"mstrmojo.SearchBoxSelector",cssClass:"mstrmojo-SearchBoxSelector",srcid:null,srct:d.Attribute,dataSourcesXML:null,useClientForm:false,maxItemWidth:"",wtStr:"likes",suggestionListClass:"mstrmojo.SearchBoxSelectorList",useRichTooltip:false,postCreate:function A(){var e=P.clone(this.suggestionPopup);e.cssClass="mstrmojo-SearchBoxSelector-suggest";e.nudge=function(){var t=this.domNode,j=this.containerNode;if(!t){return ;}var p=Math.min(j&&j.offsetHeight||L,(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||L),f=t.offsetWidth,g=H.windowDim(),h=parseInt(this.left,10),l=parseInt(this.top,10);if(l+p>=g.h){l=Math.max(l-p-(this.target?this.target.offsetHeight:0),0);if(l+p>=g.h){l=5;p=H.getMaxScrollHeight();}}if(h+f>=g.w){h=Math.max(h-f,0);}var s=t.style;s.top=l+"px";s.left=h+"px";s.maxHeight=p+"px";var o=this.opener,q=o&&o.width,k=H.position(t).w;if(q!==undefined&&k<parseInt(q,10)&&s.maxWidth!==q){s.maxWidth=q;this.nudge();}};this.suggestionPopup=e;},preBuildRendering:function D(){var e=this.parent.contentNode.offsetWidth||this.parent.width;this.set("maxItemWidth",parseInt(e,10));this._super();},postBuildRendering:function V(){var e=this.parent.defn.fmts;if(!e.height){this.domNode.style.height="auto";}return this._super();},filterCandidates:function a(f,j,e){var k=f,g=this.suggestCount;if(!this.noCache){e=e||g;if(j==="*"){j="";}else{j=mstrmojo.string.regEscape(j);}var l=this.itemField,h=new RegExp(j,"i");k=N.filter(f,function(o){return h.test(o[l]);},{max:e});}if(k.length){N.forEach(this.items,function(p){var o=N.find(k,"v",p.v);if(o>-1){k.splice(o,1);}});}return k;},getCandidatesThroughTaskCall:function G(AD,AH){var w=this.id,l=this.getSuggestionTarget(),s=AD.pattern||"",q=s,o=this.parent,z=this.srcid,t=AD.isIncFetch,p=this._last_hit,AF=this,AB=false,k;if(t){s=AD.pattern=p.pattern;}if(s===""||s.trim()==="%"){return ;}if(z){var AG={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:z,dataSourcesXML:this.dsrc||"",blockBegin:t?p.loadedCount:1,blockCount:this.items.length+this.suggestCount,searchPattern:s,rawInput:q,browseFlags:1,otp:this.srct},u=null;var g=o.defn;if(g.dsid){u={};u.datasetID=g.dsid;u.messageID=o.model.mid;u.ctlKey=o.ckey;}if(this.srct===d.Consolidation){AG.browseFlags=C;}var AC=g.fs||g.sfs;if(AC){var AA="",j="";N.forEach(AC,function(AI){AA+=j+AI.did;j=";";});AG.searchForms=AA;if(o.model.isnew||this.useClientForm){var AE="",e="",h=o.model,x=N.filterOne(h.getDatasetUnits(["att"]),function(AI){return AI.did===z;}),f=x.fs||[];N.forEach(AC,function(AI){var AJ=N.filterOne(f,function(AK){return AK.fid===AI.did;});AE+=e+AI.did+":"+(AJ&&AJ.bftp||0);e=";";});AG.clientFormPatterns=AE;}}AH.success=function(AQ){var AM=mstrmojo.all[w],AK=AM&&AM.suggestionPopup,AP,AO,AS,AR,AJ=AD.pattern,AI=AM&&AM._searchQueue,AL=!AI||AI.length<=(t?0:1)||!AM.stifleIntermediateSearch;if(AM){if(AQ&&AQ.es){AP=AM.getSuggestionTarget();AO=AQ.es.length;if(!AQ||!AP||(l!==AP)){return ;}AS=AP.getSearchPattern();AR=AQ.es;if(z){AR=mstrmojo.elementHelper.buildElemsTerseID(AR,z,true);}AM._last_hit={items:AR,pattern:AJ,loadedCount:AQ.bb+AO};AK.isFetching=false;if(AL){AK.supportsIncFetch=(AQ.bb+AQ.bc)<AQ.sz;if(AS&&AS.indexOf(AJ)>-1){var AN=AM.filterCandidates(AR,AS);AM.updateSuggestion(t?AM.suggestionItems.concat(AN):AN);}if(AM.inputBox){AM.inputBox.focus();}if(!AM._ListenerProc){AM._ListenerProc=function(){var AT=AM.suggestionPopup;if(AT.visibile){AT.nudge();}};H.attachEvent(window,"resize",AM._ListenerProc);}}}else{if(AL){AM.updateSuggestion([]);}}}};AH.failure=function(AJ){var AL=mstrmojo.all[w],AI=parseInt(AJ.code,10)+4294967296,AK=(AI===K||AI===X||AI===I);if(!AK){mstrmojo.alert(AJ.message);}if(AL&&AL.failMessage){AL.failMessage(AK?{errCode:AI,msg:AJ.message}:{});}};AH.complete=function(){var AJ=AF._searchQueue,AI=AJ&&AJ.pop();mstrApp.hideWait();if(AJ&&AJ.length&&AF.showSuggestion){AF._searchQueue=[];AF.showSuggestion(AI);}};if(this.hitEnterToTest){if(t&&this.onIncrementalFetch){this.onIncrementalFetch();}mstrApp.showWait({message:mstrmojo.desc(15823,'Searching "#"...').replace("#",s)});}else{if(!t){k=this._searchQueue;AB=k&&k.length;if(!k){this._searchQueue=[];}this._searchQueue.push(s);}}if(!AB){mstrmojo.elementHelper.browseElements(AH,AG,u);}}},destroy:function Z(e){if(this._ListenerProc){H.detachEvent(window,"resize",this._ListenerProc);delete this._ListenerProc;}this._super(e);},onsuggestionItemsChange:function F(){var j=this.suggestionItems,f=this.suggestionPopup,h=f.editorNode,p=j&&(j.length>8),o="",k="";if(p){o=(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||L;k="px";}if(h){h.style.maxHeight=o+k;}else{if(p){k+=";";f.cssText=(f.cssText||"")+"max-height:"+o+k;}}if(mstrApp.isExpress){var g=this.parent.contentNode.offsetWidth,e=(g===null||O<g)?O:g,l=(g===null||Y>g)?Y:g;f.cssText=(f.cssText||"")+"min-width:"+e+"px; max-width:"+l+"px;";}},getSuggestionPos:function R(){var e=this._super();if(e){e.lockIW=this;}return e;},updateSuggestion:function S(f){var e=f&&f.length;this.autoSelect=true;this.set("disableClick",false);if(this.parent.defn.multi&&e&&e>1){f=N.filter(f,function(h){return(h.v!=="u;"&&h.t!==14)&&(h.t!==J);});f.unshift({n:mstrmojo.desc(13976,"(All search results)"),t:J});this.autoSelect=false;}if(!e){f=[{n:mstrmojo.desc(13779,"No elements match your search"),t:W,cls:"nomatch"}];}if(f.length===1&&f[0].t===W){this.autoSelect=false;this.set("disableClick",true);}this._super(f);var g=this;g.mw=g.mw||function(l){var h=g._lastOpened;if(!h||!h.visible){H.detachEvent(document,H.isFF?"DOMMouseScroll":"mousewheel",g.mw);return ;}var k=H.eventTarget(self,l);var j=h.domNode;if(!H.contains(j,k,true,document.body)){h.close();H.detachEvent(document,H.isFF?"DOMMouseScroll":"mousewheel",g.mw);}};H.attachEvent(document,H.isFF?"DOMMouseScroll":"mousewheel",g.mw);},handleSuggestionItemSelect:function M(f,g){if(N.isArray(f)||f.t===J){f=N.ensureArray(f);var e=N.filter(f,function(h){return h.t!==J;});if(e.length<f.length){e=N.filter(this.suggestionItems,function(h){return h.t!==J;});}this.onSuggestionItemSelect(e);}else{this._super(f,g);}},prekeydown:function E(q){this._super(q);var l=q.e,s=(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||L,j=8,g=s/j;var h=this.getSelected();if(h){var k=h._renderIdx,f=(k-j+1)*g,p=(k-1)*g,o=this.suggestionPopup.domNode.scrollTop;switch(parseInt(l.keyCode||l.charCode,10)){case B.DOWN_ARROW:if(o<=f){this.suggestionPopup.domNode.scrollTop=f;}else{if(o>p){this.suggestionPopup.domNode.scrollTop=p;}}break;case B.UP_ARROW:if(o<=f||o>p){this.suggestionPopup.domNode.scrollTop=p;}break;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.Enum_Keys","mstrmojo.SimpleObjectInputBox");var D=mstrmojo.array,B=mstrmojo.dom,E=mstrmojo.Enum_Keys,A=mstrConfig.thousandsSep;var H={DEFAULT:1,ADDING:2,EMPTY:3,FULL:4};if(A===undefined){A=",";}var I;mstrmojo.TextBoxSelector=mstrmojo.declare(mstrmojo.SimpleObjectInputBox,null,{cssClass:"mstrmojo-TextBoxSelector",srcid:null,dataSourcesXML:null,maxItemWidth:"",preBuildRendering:function G(){this.set("maxItemWidth",parseInt(this.parent.contentNode.style.width,10));this._super();},prekeydown:function C(J){var L=J.e;switch(parseInt(L.keyCode||L.charCode,10)){case E.TAB:case E.ENTER:B.preventDefault(J.hWin,L);var M=this.inputBox.value;if(M){if(D.find(this.items,"v",M)===-1){this.onSuggestionItemSelect({n:M,v:M});}else{this.setDefaultState();}}break;case E.ESCAPE:this.setDefaultState();break;case E.BACKSPACE:if(!this.getSearchPattern()){B.preventDefault(J.hWin,L);var K=this.items&&this.items.concat();if(K&&K.length){K.splice(K.length-1,1);this.set("items",K);var N=this.id;window.setTimeout(function(){mstrmojo.all[N].set("state",H.ADDING);},0);}}break;}},prekeyup:function F(J){}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidVisTooltip");var B=mstrmojo.css;mstrmojo.VisMicroChartTooltip=mstrmojo.declare(mstrmojo.AndroidVisTooltip,null,{scriptClass:"mstrmojo.VisMicroChartTooltip",show:false,adjustBulletNameDisplay:function D(){this.domNode.getElementsByTagName("tr").forEach(function(E){var F=E.cells[0],L=F.firstChild,H=L.firstChild,G=B.getComputedStyle(H),K=H.style,J=(F.offsetWidth-H.offsetWidth-L.lastChild.offsetWidth-parseInt(G.marginRight,10))+"px",I=Math.round((F.offsetHeight-parseInt(G.height,10))/2)+"px";K.marginLeft=J;K.marginTop=I;});},setBorderColor:function C(E){this.domNode.style.borderColor=E;},toggle:function A(E){this._super(E);this.show=!!E;this.domNode.style.visibility=E?"visible":"hidden";}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.DocPortlet");var L={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"},P,B;mstrmojo.Vis=mstrmojo.declare(mstrmojo.VisBase,null,{scriptClass:"mstrmojo.Vis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,reRenderOnDimensionChg:true,isVis:function(){return true;},setModel:function Q(R){this._super(R);if(R.data){this.set("model",R.data);}this.xtabModel=R;if(this.controller&&typeof (this.controller.getPageByTree)!="undefined"){this.controller.getPageByTree(false);}},destroy:function O(){this._super();var R=this.xtabModel;if(R&&R.destroy){R.destroy();delete this.xtabModel;}},setDimensions:function N(U,S){var R=this._super(U,S);if(R&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return R;},buildRendering:function M(){if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function G(){P=this.width;B=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function E(){var R=mstrmojo.boxmodel.offset(this.domNode);this.offsetTop=R.top;this.offsetLeft=R.left;},update:function F(W){W=W||this.node;if(W){if(W.data){this.set("model",W.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",W.data);}this.model=W.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(W.data.extProps,this);}var U=this.controller,S=U.view,Y=(S.hasRendered&&S.getCurrentLayout&&S.getCurrentLayout());if(U.view.fullScreenInfoWindow&&(Y&&Y.defn.visName)){var X=mstrApp.rootView.getContentDimensions();this.height=X.h+"px";this.width=X.w+"px";}else{this.fmts=W.defn.fmts||W.defn.units[this.model.k].fmts;var R=this.fmts;if(R){for(var V in L){v=L[V];if(V in R){this[v]=R[V];}}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;return true;},getModel:function A(S){if(S){var R=mstrmojo.Vis.getVisGrid(this.layoutModel,this.layoutNode,S);if(R){return R.data;}else{alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));return{};}}else{return this.model;}},getDataParser:function K(R){return new mstrmojo.Vis.DataParser(this.getModel(R));},renderErrorMessage:function H(R){this.domNode.innerHTML='<div class="mstrmojo-message">'+R+"</div>";},getMessageID:function J(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function D(V){var d=this.xtabModel,b=(d&&d.docModel);var e=false;if(b){var a=b.defn&&b.defn.layouts,U=null;var S;if(a){for(S in a){if(a[S].loaded){U=a[S];break;}}}var W=U&&U.units;this.selectorTargets={};if(W&&V.scObjList){for(var S=0;S<V.scObjList.length;S++){var X=V.scObjList[S];var Y=X.sc.tks.split("\x1E");for(var R=0;R<Y.length;R++){var Z=W[Y[R]];if(Z){this.selectorTargets[Y[R]]=Z;if(!this.isChildOfIfw(W,Z)){e=true;}}}}}}return e;},isChildOfIfw:function I(R,S){while(S){if(S.ifw){return true;}S=R[S.pnk];}return false;},performAction:function C(R){var U=this.xtabModel.getAction(R),S=U&&U.h;if(S&&this.controller[S]){this.controller[S](this,U.a);return true;}return false;}});mstrmojo.Vis.getVisGrid=function(R,Z,S){var X=Z;var V=R.getChildren(Z,false);for(var U=0;U<V.length;U++){var Y=V[U];if(Y.k==S){return Y;}else{var W=mstrmojo.Vis.getVisGrid(R,Y,S);if(W){Z=X;return W;}}}};mstrmojo.Vis.DataParser=function(U){var b=mstrmojo.Vis;return{getRowTitles:function(){return new b.Titles(U,true);},getColTitles:function(){return new b.Titles(U,false);},findMetricValue:function(g,l){var k=U.ghs.rhs.items;for(var h in k){var j=k[h].items;var f=true;for(var d in g){if(g[d]!=j[d].idx){f=false;break;}}if(f){return new mstrmojo.Vis.MetricValue(U.gvs.items[h].items[l]);}}},getTotalRows:function X(){var d=U.ghs&&U.ghs.rhs&&U.ghs.rhs.items;return(U.eg||!d)?0:d.length;},getTotalColHeaderRows:function V(){return(!U.ghs.chs.items?0:U.ghs.chs.items.length);},getTotalCols:function R(){return this.getColHeaders(0).size();},getRowHeaders:function a(d){return new b.Headers(U,d,true);},getColHeaders:function Z(d){return new b.Headers(U,d,false);},getMetricValue:function Y(e,d){return new b.MetricValue(U,U.gvs.items[e].items[d]);},getColumnHeaderCount:function W(){return U.gvs.items[0].items.length;},getCSSString:function S(){return U.cssString;}};};mstrmojo.Vis.Titles=function(R,X){var W=(X)?R.gts.row:R.gts.col;return{size:function V(){return W.length;},getTitle:function U(Y){return new mstrmojo.Vis.Title(W[Y]);},getCSS:function S(Y){return R.css[W[Y].cni].n;}};};mstrmojo.Vis.Headers=function(S,U,Y){var Z=(Y)?S.gts.row:S.gts.col;var X=(Y)?S.ghs.rhs:S.ghs.chs;var V=X.items&&X.items[U].items;return{size:function a(){return(!V?0:V.length);},getHeader:function R(b){return V&&V[b]&&new mstrmojo.Vis.Header(V[b],Y?Z[b]:Z[U]);},getCSS:function W(b){return V&&S.css[V[b].cni].n;},getHeaderCell:function(b){return V&&V[b];}};};mstrmojo.Vis.Title=function(S){return{getActionType:function(){return S.at;},getDrillPath:function(){return S.dp;},getHeaderValues:function R(){return S.es;},getHeaderName:function U(W){return S.es[W].n;},getHeaderId:function U(W){return S.es[W].id;},getForms:function V(){return S.fs;},getFormId:function(){return S.fid;},getFormType:function(){return S.ftp;},getUnitId:function(){return S.id;},getLinkMap:function(){return S.lm;},getName:function(){return S.n;},getUnitDssType:function(){return S.otp;},getSelectorControl:function(){return S.sc;}};};mstrmojo.Vis.Header=function(U,R){return{getName:function W(){return(U.idx===-1)?"":R.es[U.idx].n;},getElementId:function Z(){return(U.idx===-1)?"":R.es[U.idx].id;},getObjectId:function V(){return(U.idx===-1)?"":R.es[U.idx].oid;},getElementIndex:function S(){return U.idx;},getActionType:function Y(){return U.at;},isTotal:function X(){return U.otr===1;}};};mstrmojo.Vis.MetricValue=function(R,Z){var Y=Z;return{getValue:function S(){return Y.v;},getThresholdType:function U(){return Y.ty;},getRawValue:function X(){return Y.rv;},getCSS:function V(){return R.css[Y.cni].n;},getThresholdValue:function a(b){if(Y.ti==undefined){return b;}return R.th[Y.ti].n;},getFillColor:function W(b){if(Y.ci==undefined){return b;}return R.fc[Y.ci].n;}};};})();(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.url","mstrmojo._TouchGestures","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Image","mstrmojo._HasTouchScroller");var B=Math,K=mstrmojo.css,H=mstrmojo.dom,Q=30,D=50,E=32;function P(U){var V="container"+U;if(!this[V]){var S=this.domNode,R=parseInt(this[U.toLowerCase()],10);this[V]=(isNaN(R))?S["client"+U]:R;}return this[V];}function J(R){var S,U="";if(R>0){for(S=0;S<R;S++){U+='<col style="width:'+(100/R)+'%" />';}}return"<colgroup>"+U+"</colgroup>";}function C(R){return mstrmojo.url.getAbsoluteURL(R,mstrApp.getConfiguration().getCurrentProjectWebServerUrl());}function O(S,R){S.style[H.CSS3_TRANSITION_DURATION]="500ms";H.translate(S,R,0,0,"",true);}function L(Z,R,W){if(!Z){return ;}var V=Z.clientWidth,X=Z.clientHeight,Y,U,S=false;if(R<V||W<X){S=true;Y=R/V;U=W/X;if(Y<U){Z.width=R;}else{Z.height=W;}}return S;}function I(W){var Z=[],S,Y,U,X,a,R=W.getTotalRows(),V=R>0?W.getRowTitles().size():0;for(S=0;S<R;S++){X=W.getRowHeaders(S);for(Y=0;Y<V;Y++){if(!Z[Y]){Z[Y]=[];}a=X.getHeader(Y);Z[Y].push({n:a.getName()});}}return Z;}mstrmojo.ImageCarousel=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.ImageCarousel",markupString:'<div class="mstrmojo-ImageCarousel {@cssClass}" style="overflow:hidden;{@cssText}"><div class="imageViewer" mstrAttach:click>{@noImageMsg}</div><div class="imageTitle"></div><div class="statusBar" style="overflow:hidden"></div></div>',markupSlots:{viewerNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.childNodes[1];},statusBarNode:function(){return this.domNode.lastChild;}},formatHandlers:{domNode:["RW"]},scrollerConfig:{friction:0.0087,bounces:false,vScroll:false,hScroll:true},selected:-1,children:[{scriptClass:"mstrmojo.HBox",slot:"viewerNode",alias:"viewer",onitemsChange:function(){var Z,W,X,Y=[],S=this.parent.vp,a;Z=this.items;if(!this.hasRendered){var U=this.parent,V=P.call(U,"Width"),R=P.call(U,"Height");if(this.children){this.removeChildren();}X=Z.length;this.colHTML=J(X);this.cssText="width:"+(V*X)+"px;height:"+(R-D)+"px";a=(S&&S.bw)?("border:"+S.bw+"px solid #"+(S.bc||"FFF")):"";for(W=0;W<X;W++){Y.push({scriptClass:"mstrmojo.Image",cssText:a,cssDisplay:"inline-block",src:C(Z[W].n||Z[W].v),onload:function(){L(this.imgNode,V-Q,R-D);}});}this.addChildren(Y);}}},{scriptClass:"mstrmojo.Label",slot:"textNode",alias:"description"},{scriptClass:"mstrmojo.HBox",slot:"statusBarNode",alias:"sb",onitemsChange:function(){var S=this.items,V=[],U,R;if(this.children){this.removeChildren();delete this.numVisibleDots;this.lastSelected=-1;}for(U=0,R=S.length;U<R;U++){V.push({scriptClass:"mstrmojo.Label"});}this.addChildren(V);},lastSelected:0,select:function(R){var V,W,S=this.domNode,U=this.numVisibleDots;if(this.selectedNode){K.removeClass(this.selectedNode.domNode,"selected");}if(this.items.length>0){this.selectedNode=this.children[R];K.addClass(this.selectedNode.domNode,"selected");if(!U){U=this.numVisibleDots=B.floor(P.call(this.parent,"Width")/E);if(this.items.length<U){K.addClass(S,"center");}else{K.removeClass(S,"center");}}V=B.floor(this.lastSelected/this.numVisibleDots);W=B.floor(R/this.numVisibleDots);if(V!==W){O(S,-W*U*E);}this.lastSelected=R;}}}],updateScrollerConfig:function G(){var R=this.viewer.items.length;mstrmojo.hash.copy({scrollEl:this.viewerNode,origin:{x:0,y:0},offset:{x:{start:0,end:((R>0)?(R-1):0)*P.call(this,"Width")}}},this.scrollerConfig);return this._super();},touchSwipeEnd:function N(U){var S=U.delta,R=this.viewer.items.length;if(S&&S.x>0){this.set("selected",Math.max(0,this.selected-1));}else{if(S&&S.x<0){this.set("selected",Math.min(this.selected+1,R));}}},onclick:function(S){var R;if(mstrApp.getScreenDimensions&&this.selectedImage){R={cssClass:"image-FullScreen",onclick:function(){this.close();},resizeDialog:function(){var W=mstrApp.getScreenDimensions(),U=this.domNode,V=U&&U.style;if(W&&V){V.width=W.w+"px";V.height=W.h+"px";}},children:[{scriptClass:"mstrmojo.Image",src:this.selectedImage,onload:function(){var U=mstrApp.getScreenDimensions();if(U){L(this.imgNode,U.w,U.h);this.parent.positionDialog();}}}]};mstrApp.showDialog(R);}},touchTap:function(R){this.onclick(R);},preBuildRendering:function M(){var V=this.getDataParser(),S=I(V),U,R;if(!this.vp){this.vp=this.model.vp;}U=S[0]||[];R=S[1]||[];this.viewer.set("items",U);this.sb.set("items",R);this.selected=-1;if(U.length>0){this.cssClass=this.cssClass?"":this.cssClass.replace(/noImage/,"");this.noImageMsg="";}else{this.cssClass+=this.cssClass?"":" noImage";this.noImageMsg="No Photo Found";}if(this.vp&&this.vp.bgc){this.cssText="background-color:#"+this.vp.bgc+";";}this._super();},postBuildRendering:function A(){this._super();this.set("selected",0);},onselectedChange:function F(){var R=this.selected,U=this.sb,S=this.viewer.items[R],V=U.items[R];if(S){this._scroller.scrollTo(R*P.call(this,"Width"),0,500);this.selectedImage=C((S&&S.n)||"");U.select(R);this.description.set("text",(V&&V.n)||"");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.url","mstrmojo.Vis","mstrmojo._CanSupportTransaction");mstrmojo.PhotoUploader=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._CanSupportTransaction,mstrmojo._TouchGestures],{scriptClass:"mstrmojo.PhotoUploader",photoNum:0,markupString:'<div id="{@id}" class="mstrmojo-PhotoUploader" style="left:{@left};top:{@top};width:{@width};height:{@height}" mstrAttach:click><div class="actionButton" style="line-height:{@height}">{@n}</div><img class="preview"></img><div class="numberBadge"><div class="badgeText"></div></div></div>',markupSlots:{buttonNode:function(){return this.domNode.firstChild;},previewNode:function(){return this.domNode.childNodes[1];},badgeNode:function(){return this.domNode.lastChild;},badgeTextNode:function(){return this.domNode.lastChild.firstChild;}},markupMethods:{onphotoNumChange:function(){mstrmojo.css.toggleClass(this.domNode,"empty",this.photoNum===0);if(this.photoNum>0){this.badgeTextNode.innerHTML=this.photoNum;}}},preBuildRendering:function(){this._super();var E=this.getDataParser(),J=E.getRowTitles(),C=E.getColTitles(),F,I,H,G,D,B;if(J.size()<3&&C.size()<1){mstrmojo.alert("Incorrect grid template structure!");return false;}if(E.getTotalRows()<10){mstrmojo.alert("At least 10 rows required!");return false;}F=E.getRowHeaders(0);I=J.getTitle(0);H=J.getTitle(1);D=I.getUnitId();B=H.getUnitId();G=C.getTitle(0).getHeaderValues()[0];this.cellInfo=[{atid:D,form_id:I.getFormId(),ui:0},{atid:B,form_id:H.getFormId(),ui:(D==B)?0:1},{metric_id:G.oid}];this.photoNum=0;this.n=mstrmojo.desc(8470);return true;},setModel:function(B){this.model=this.txModel=B&&B.docModel;},getKeyContext:function(B){return{o:parseInt(B,10)};},getUpdateObject:function(){var B=this.getUpdatedValues(),H=2,I=[],J=this.cellInfo,F;for(F in B){var D=B[F],C=mstrmojo.string.encodeXMLAttribute(String(D.v[0])),G=mstrmojo.string.encodeXMLAttribute(String(D.v[1])),E="1";I.push({rowOrdinal:D.o,attId:J[0].atid,formId:J[0].form_id,unitIndex:J[0].ui,newValue:C},{rowOrdinal:D.o,attId:J[1].atid,formId:J[1].form_id,unitIndex:J[1].ui,newValue:G},{rowOrdinal:D.o,colOrdinal:0,newValue:E});}return{manipulation:H,nodeKey:this.k,sliceId:this.sid,cells:I,autoRefresh:false};},getUpdates:function A(){var D=[],L=this,E,G,K=false,C=this.getUpdatedValues(),I,J=1,F=2,B=9,H=1,M=this.cellInfo;D.push('<gr rw_tree_type="'+this.defn.tt+'" rw_node_key="'+L.k+'" slice_id="'+(L.sid||0)+'">');for(E in C){if(C.hasOwnProperty(E)){I=C[E];for(G=0;G<2;G++){D.push('<cli ax="1" attribute_id="'+M[G].atid+'" form_id="'+M[G].form_id+'"><updt types="'+J+'" ordinal="'+I.o+'" value="'+I.v[G]+'" dt="'+B+'"/></cli>');}D.push('<cli cordinal="0" metric_id="'+M[2].metric_id+'"><updt types="'+F+'" rordinal="'+I.o+'" value="1" dt="'+H+'"/></cli>');K=true;}}D.push("</gr>");if(!K){D=[];}return D.join("");},photoUploaded:function(B,E){mstrMobileApp.setWaitScreenVisibility(false);var C=mstrmojo.url.getAbsoluteURL(B,mstrApp.getConfiguration().getCurrentProjectWebServerUrl()),F=E,D=this.photoNum;this.previewNode.src=C;this.dataChanged(D,{},{v:[C,F]});this.set("photoNum",D+1);},touchTap:function(){this.onclick();},onclick:function(){if(this.photoNum===10){mstrmojo.alert("can upload at most 10 photos");}else{var B={serverUrl:mstrApp.getConfiguration().getTaskUrlByProject(mstrApp.getCurrentProjectId()),descs:{ADD_PHOTO:mstrmojo.desc(8470),TAKE_NEW_PHOTO:mstrmojo.desc(8471),CHOOSE_FROM_GALLERY:mstrmojo.desc(8472),DONE:mstrmojo.desc(8473),CANCEL:mstrmojo.desc(221)}};mstrMobileApp.uploadPhotos(JSON.stringify(B),'mstrmojo.all["'+this.id+'"].photoUploaded');}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.VisChartUtils","mstrmojo.VisChartData","mstrmojo.boxmodel");function N(S,R){var O="",P=S.length;if(P!==R.hi.length){return S[0].items[R.hi[0]].n;}for(var Q=0;Q<P;Q++){O+=(Q>0?" ":"")+S[Q].items[R.hi[Q]].n;}return O;}mstrmojo.VisChart=mstrmojo.declare(mstrmojo.Vis,null,{scriptClass:"mstrmojo.VisChart",utils:mstrmojo.VisChartUtils,data:mstrmojo.VisChartData,model:null,prevYLabel:{x:0,y:0,h:0},prevXLabel:{x:0,y:0,w:0},context:null,themeColor:"#000000",highlightColor:"#ff8833",margin:{t:50,r:2,b:30,l:2},offsetLeft:null,xLabelPadding:10,yLabelPadding:10,isDrawAxis:true,drawXAxisLabels:true,drawYAxisLabels:true,isHighlightOnTouch:true,isLinearChart:true,showHighlightLine:true,browserSupportsHtml5:true,multiLine:true,drawGridLines:3,drawHorizontalGridLines:1,drawVerticalGridLines:2,switchSeriesOnTouch:true,seriesIndex:-1,displayMode:0,markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:relative;"  mstrAttach:mousedown,mouseup,mousemove,click ><canvas width="{@width}px" height="{@height}px"></canvas><canvas style="position:absolute;left:0;top:0" width="{@width}px" height="{@height}px"></canvas><canvas style="position:absolute;left:0;top:0" width="{@width}px" height="{@height}px"></canvas><div id="{@id}-tooltip" class="mstrmojo-Chart-tooltip"></div></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;},animationCanvas:function(){return this.domNode.childNodes[1];},highlightCanvas:function(){return this.domNode.childNodes[2];},tooltip:function(){return this.domNode.childNodes[3];}},postBuildRendering:function G(){if(this._super){this._super();}this.browserSupportsHtml5=this.canvas.getContext;if(!this.browserSupportsHtml5){var O=window.getLocaleString?window.getLocaleString("YOUR_BROWSER_NOT_SUPPORT_HTML5","Your browser does not support HTML5"):mstrmojo.desc(8126,"Your browser does not support HTML5");this.renderErrorMessage(O);return ;}if(!this.model){var O=window.getLocaleString?window.getLocaleString("NO_MODEL_PROVIDED","No model provided"):mstrmojo.desc(8426,"No model provided");this.renderErrorMessage(O);return ;}if(this.model.err||this.model.eg){this.renderErrorMessage(this.model.err||this.model.eg);return ;}if(this.isLinearChart){this.data.processLinearData(this);}else{this.data.process(this);}this.windowSize=this.model.series[0].rv.length;this.context=this.canvas.getContext("2d");this.highlightContext=this.highlightCanvas.getContext("2d");this.animationContext=this.animationCanvas.getContext("2d");this.utils.fillBackground(this);if(this.windowSize<=1){return ;}this.plot();},getMaxValue:function C(){var O=this.model.mvalues;return O&&O[O.length-1];},getMinValue:function F(){var O=this.model.mvalues;return O&&O[0];},plot:function J(){this.drawChart();if(this.model.err||this.model.eg){return ;}if(this.isDrawAxis){if(this.isTimeSeries||!(this.isAnimateLines&&(!this.multiLine||this.model.series.length===1))){this.drawLabels();}else{this.drawAxis();}}},drawChart:function M(){},drawAxis:function B(){var P=this.utils,S=this.margin,R=this.getWidth(),O=this.canvas.height,Q=this.context;Q.save();Q.strokeStyle=P.getColor(this);Q.lineWidth=2;Q.globalAlpha=0.3;P.drawRectangle(this,S.l,S.t,R-S.l-S.r,O-S.t-S.b);Q.restore();},drawLabels:function E(){if(!this.isDrawAxis||!this.drawYAxisLabels){return ;}var V=this.model,Y=this.utils,S=this.margin,Z=V.mvalues,O=V.ylbls,R=Z.length,Q=this.drawGridLines;this.prevYLabel.x=0;this.prevYLabel.y=0;this.prevYLabel.h=0;for(var U=0;U<R;U++){var X=Y.getYValue(this,Z[U]);var W=Y.addDataLabel(this,O[U],X,this.prevYLabel);var P=Math.floor(X)+0.5;if(W&&(Q&this.drawHorizontalGridLines)&&U>0&&U<R-1){Y.drawHighlightLine(this,P);}if(U==R-1&&this.isTimeSeries&&W&&(Q&this.drawHorizontalGridLines)){Y.drawHighlightLine(this,P);}}},renderTooltip:function A(e,d,b){if(e<0){this.tooltip.style.display="none";return ;}var R=this.model,g=R.series,a=this.utils,U=g.length,X=this.seriesIndex,O=R.colHeaders,f=this.tooltip;var Q="";if(!this.multiLine){Q=N(O,g[0])+": "+g[0].v[e];}else{if(this.showHighlightLine){for(var W=0;W<U;W++){Q+=(W===0?"":"<br/>")+N(O,g[W])+": "+g[W].v[e];}}else{Q=N(O,g[X])+": "+g[X].v[e];}}var Z=this.model.categories.items[e];f.innerHTML=Z+"<br/>"+Q;f.style.display="block";var Y=f.offsetWidth;var S=d-Y/2;var V=this.margin;if(S<V.l){S=V.l;}else{if(S>this.getWidth()-V.r-Y){S=this.getWidth()-V.r-Y;}}if(this.showHighlightLine){a.translateCSS(S,0,false,f);}else{var P=a.getYValue(this,g[X].rv[e])-f.offsetHeight-20;if(P<0){P=a.getYValue(this,g[X].rv[e]);}a.translateCSS(S,P,false,f);}},getTouchValue:function L(P,U){var R=this.model,O=this.margin;var S=R.rne-R.rns>0?R.rne-R.rns>1?R.rne-R.rns:2:this.windowSize;var Q=Math.round(((P-O.l)*(S-1))/(this.getWidth()-O.l-O.r-1));return(Q<S)?Q:null;},highlightPoint:function I(P,O){},handleTouchBegin:function H(P,O){if(!this.isHighlightOnTouch||!this.browserSupportsHtml5){return ;}this.tooltipOn=true;this.adjustWidgetOffsets();this.handleTouchMove(P,O);},handleTouchMove:function D(R,Q){var V=this,P=V.model;if(!V.tooltipOn||!V.isHighlightOnTouch||!this.browserSupportsHtml5||this.windowSize<=1){return ;}var U=V.utils.getTouchXYOnWidget(R,Q,V);R=U.touchX;Q=U.touchY;var W=V.margin;if(R<W.l||Q<W.t||Q>V.canvas.height-W.b){return ;}var S=V.getTouchValue(R,Q);if(S!==null){var O=(P.rne-P.rns>1)?P.rns:P.rns-1;if(V.seriesIndex===-1||V.switchSeriesOnTouch){V.seriesIndex=V.utils.getSeriesIndexAndYValue(V,O+S,Q).si;}if(P.series[V.seriesIndex].rv[O+S]===""){return ;}V.prevHighlight=V.currentHighlight;V.currentHighlight=S;V.renderTooltip(S,R,Q);if(this.isTimeSeries){V.highlightPoint(S,R,Q);}else{V.highlightPoint(S,Q);}}},handleTouchEnd:function K(){if(!this.browserSupportsHtml5){return ;}var O=this;if(O.model.err||this.model.eg){return ;}O.tooltipOn=false;O.seriesIndex=-1;O.currentHighlight=null;O.highlightCanvas.height=O.highlightCanvas.height;O.tooltip.style.display="none";},onmousedown:function(O){if(!this.isAndroid){this.handleTouchBegin(O.e.pageX,O.e.pageY);}},onmouseup:function(O){if(!this.isAndroid){this.handleTouchEnd();}},onmousemove:function(O){if(!this.isAndroid){this.handleTouchMove(O.e.pageX,O.e.pageY);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.hash","mstrmojo.GeoLocation","mstrmojo._TouchGestures");var R="\u001F",J="\u001E",F="\u001D",X="\u001C",Y="\u001B";function O(a,Z){if(!!a&&!!a.imgNode){var b=a.imgNode.style;b.opacity=Z;}}var D=mstrmojo.Image.baseCssClass+"-prv";mstrmojo.maps.androidmap.AndroidMap=mstrmojo.declare(mstrmojo.Vis,null,{scriptClass:"mstrmojo.maps.androidmap.AndroidMap",cssClass:"mstr-googleMapView",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@domNodeCssText}" mstrAttach:touchstart></div>',reRenderOnDimensionChg:false,mapRendered:false,firstScreen:true,children:[{scriptClass:"mstrmojo.Image",alias:"imgPreview",cssClass:"prv",cssText:"position:absolute;left:0;top:0;",firstLoad:false,onload:function(){O(this,1);var Z=this;window.setTimeout(function(){Z.parent.postImageProcessing(Z.firstLoad);Z.firstLoad=false;},300);}}],markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onheightChange:function(){this.domNode.style.height=this.getHeight()+"px";},onwidthChange:function(){this.domNode.style.width=this.getWidth()+"px";}},setModel:function K(Z){this.set("model",Z);this.xtabModel=Z;if(Z.data){this.set("gridData",Z.data);}},postImageProcessing:function W(Z){if(Z&&this.controller&&this.controller.takeScreenShot){this.controller.takeScreenShot();}if(this.imgPreview.src!=""&&mstrMobileApp&&mstrMobileApp.hideMapView){window.setTimeout(function(){mstrMobileApp.hideMapView(0);},100);}},ongridDataChange:function(){this.parser=new mstrmojo.Vis.DataParser(this.gridData);delete this.dataMap;},update:function G(b){b=b||this.node;if(b){if(b.data){this.set("gridData",b.data);var a=this.gridData;if(a.layoutModel){this.layoutModel=a.layoutModel;}if(a.layoutNode){this.layoutNode=a.layoutNode;}delete a.layoutModel;delete a.layoutNode;}var Z=b.defn.fmts||b.defn.units[this.xtabModel.k].fmts;this.width=parseInt(Z.width,10);this.height=parseInt(Z.height,10);this.top=parseInt(Z.top,10);this.left=parseInt(Z.left,10);this.fmts=Z;}if(this.xtabModel){this.initFromVisProps(this.gridData.vp);}this.updated=true;},getMapModel:function(){var Z=mstrApp.getCurrentProjectId(),a=mstrApp.serverProxy.getSessions();return{pid:Z,sessions:a,mapId:this.id,hasTarget:false,hostUrl:mstrApp.getConfiguration().getHostUrlByProject(Z)};},getGridModel:function(){var Z=mstrmojo.hash.copy(this.gridData,{});return Z;},initFromVisProps:function S(Z){this.vp=Z;},dispatchMapData:function C(){var Z=this.getMapModel(),a=this.simplifyGridData();mstrMobileApp.loadMap(JSON.stringify(mstrmojo.hash.copy(Z,{gdProp:a.prop,infoWindow:{dft:true}})),a.es,a.data,"");this.mapRendered=true;},simplifyGridData:function H(){if(this.dataMap){return this.dataMap;}var x=this.gridData,z=[],p=[],Z={row:[],col:[]},g,d,b,w=[],AA=[],l=[],h=[],e=[],a,f,k,t,q,s,u;if(typeof (x.ghs)=="undefined"||(x.gts.row.length==0)){x.eg="no data returned";}if(x.eg){this.dataMap={prop:{},data:"",es:""};}else{for(t=0,f=x.ghs.rhs.items,q=f.length;t<q;t++){for(s=0,k=f[t].items,u=k.length;s<u;s++){h.push(k[s].idx);}z.push(h.join(F));h=[];}for(t=0,f=x.gvs.items,q=f.length;t<q;t++){for(s=0,k=f[t].items,u=k.length;s<u;s++){e.push(k[s].v);e.push(k[s].rv||0);if(k[s].ti!==undefined||k[s].ts!==undefined){v="";if(k[s].ti!==undefined){x.th[k[s].ti].ty=k[s].ty;v=k[s].ti;}v+=Y;if(k[s].ts!==undefined){v+=k[s].ts;}e.push(v);}h.push(e.join(X));e=[];}p.push(h.join(F));h=[];}d=x.gts.row;mstrmojo.array.forEach(d,function(j){g={};mstrmojo.hash.copyProps(["n","id","fid","fs","sc"],j,g);Z.row.push(g);h=[];mstrmojo.array.forEach(j.es,function(o){h.push(o.n);});AA.push(h.join(X));});w.push(AA.join(J));b=x.gts.col;mstrmojo.array.forEach(b,function(j){g={};mstrmojo.hash.copyProps(["n","id","fid"],j,g);Z.col.push(g);h=[];mstrmojo.array.forEach(j.es,function(o){h.push(o.n);});l.push(h.join(X));});w.push(l.join(J));this.dataMap={prop:{vp:x.vp,th:x.th,gts:Z},es:w.join(R),data:z.join(J)+R+p.join(J)};}return this.dataMap;},getModel:function L(){return this.gridData;},handleMarkerSelection:mstrmojo.emptyFn,postBuildRendering:function Q(){this.dispatchMapData();this._super();},rebuildLayout:mstrmojo.emptyFn,resetLayout:mstrmojo.emptyFn,setDimensions:function N(d,b){var e=this.googleMap,Z=e?e.getCenter():null,a=this._super(d,b);if(e){this.map.style.height=this.getHeight()+"px";this.map.style.width=(this.getWidth()-1)+"px";e.setCenter(Z);}return a;},unrender:function P(){this.imgPreview.src="";if(this.mapRendered){this.removeMap();this.mapRendered=false;}this._super();},removeMap:function V(){mstrMobileApp.hideMapView("1");},switchToImage:function B(d,b,a){var Z=this.imgPreview;Z.firstLoad=this.firstScreen;this.firstScreen=false;if(d&&Z.hasRendered){if(Z.src!==d){O(Z,0);Z.domNode.className=D;Z.set("src",d);Z.set("width",b);Z.set("heihgt",a);}else{if(mstrMobileApp&&mstrMobileApp.hideMapView){O(this.imgPreview,1);this.postImageProcessing(false);}}}else{mstrMobileApp.hideMapView(0);}},hidePreview:function M(){O(this.imgPreview,0);},showPreview:function A(){O(this.imgPreview,1);},closeInfoWindow:function E(){do{mstrApp.closeDialog();}while(mstrmojo.all.mstrMapInfoWindow);},ontouchstart:function I(){if(this.mapRendered){mstrMobileApp.showMapView(0);}},destroy:function U(){var Z=this.parent;while(Z){if(Z._scroller&&Z.scrollMoveListener){}Z=Z.parent;}this._super();if(this.mapRendered){mstrMobileApp.navigateAway();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Vis","mstrmojo.array","mstrmojo.hash","mstrmojo.android.EnumMenuOptions","mstrmojo.GeoLocation","mstrmojo._TouchGestures","mstrmojo.android.DropDownList","mstrmojo.Label","mstrmojo._ImageHelper");mstrmojo.requiresDescs(7736,8068,8069,8102,8395,8954);var S=mstrmojo.array,N=mstrmojo.android.EnumMenuOptions,B=N.REPROMPT,D=1000;function K(a,b,X,Z,Y){this.title=a;this._latlng=b;this._rad=X;this._ix=Z;this._color=Y;}function H(){K.prototype=new google.maps.OverlayView();K.prototype.draw=function(){var f=this.div_;if(!f){f=this.div_=document.createElement("DIV");var b=f.style,Z=this._rad,a=Z/2,Y=a+"px "+a+"px",d=this.getPanes(),e=this;b.position="absolute";b.paddingLeft="0px";b.cursor="pointer";b.backgroundColor=this._color;b.opacity=".65";b.borderRadius=Y;b.height=b.width=Z+"px";b.border="2px solid black";google.maps.event.addDomListener(f,"click",function(g){google.maps.event.trigger(e,"click");});d.overlayMouseTarget.appendChild(f);}var X=this.getProjection().fromLatLngToDivPixel(this._latlng);if(X){f.style.left=(X.x-this._rad/2)+"px";f.style.top=(X.y-this._rad/2)+"px";}};K.prototype.remove=function(){var X=this.div_;if(X){X.parentNode.removeChild(X);this.div_=null;}};K.prototype.getPosition=function(){return this._latlng;};}var C=function C(a){var b;if(a.length>0){b=new google.maps.LatLngBounds();for(var Y in a){var X=a[Y],Z=X.getPosition();b.extend(Z);}}return b;};function R(Y,X){return X.replace(/POINT[ ]?\(|\)/g,"").split(" ")[Y=="lat"?1:0];}function F(){return this._mapTypeToGoogleMapTypeId[this.mapType];}mstrmojo.maps.jsmap.AndroidMap=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._TouchGestures,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.maps.jsmap.AndroidMap",cssClass:"mstr-googleMapView",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@domNodeCssText}"><div></div><div class="androidMap-metricSelector"><span class="androidMap-toggleHeader"></span></div><div class="mstr-googleMap" id="map_canvas_{@id}"></div></div>',reRenderOnDimensionChg:false,noMapsMsg:mstrmojo.desc(8954,"Google Maps have not been configured for this device. Please check with your mobile administrator to enable Google Maps in the mobile configuration."),selMetricIx:0,markerArr:[],googleMap:null,bubblesMaxInfo:[],maxBubbleSize:50,minBubbleSize:20,markupSlots:{msg:function(){return this.domNode.childNodes[0];},metricSelector:function(){return this.domNode.childNodes[1];},map:function(){return this.domNode.childNodes[2];}},markupMethods:{onheightChange:function(){this.domNode.style.height=this.getHeight()+"px";},onwidthChange:function(){this.domNode.style.width=this.getWidth()+"px";}},layoutConfig:{h:{metricSelector:"32px",map:"100%"},w:{metricSelector:"200px",map:"100%"}},children:[{scriptClass:"mstrmojo.android.DropDownList",slot:"metricSelector",options:null,onidxChange:function(X){this._super(X);this.parent.onselMetricIxChange(X);this.set("value",this.options[X.value].v);},visible:false,alias:"metricSel"},{scriptClass:"mstrmojo.Box",slot:"map"},{scriptClass:"mstrmojo.Label",cssClass:"androidMap-errorMsg",visible:true,alias:"errorMsg",slot:"msg"}],setModel:function M(X){this.set("model",X);this.xtabModel=X;if(X.data){this.set("gridData",X.data);}},ongridDataChange:function(){this.parser=new mstrmojo.Vis.DataParser(this.gridData);},update:function E(Z){Z=Z||this.node;if(Z){if(Z.data){this.set("gridData",Z.data);var Y=this.gridData;if(Y.layoutModel){this.layoutModel=Y.layoutModel;}if(Y.layoutNode){this.layoutNode=Y.layoutNode;}}var X=Z.defn.fmts||Z.defn.units[this.xtabModel.k].fmts;this.width=parseInt(X.width,10);this.height=parseInt(X.height,10);this.top=parseInt(X.top,10);this.left=parseInt(X.left,10);this.fmts=X;}if(this.xtabModel){this.initFromVisProps(this.gridData.vp);}this.updated=true;},getMapModel:function(){return this.xtabModel;},initFromVisProps:function U(X){if(!X){return ;}if(X.dv){this.mapType=parseInt(X.dv,10);}this.usePt=(X.gr=="1");this.useAttributes=(X.af==="0");this.geoAttr=X.ga;this.markerType=X.mtp;this.attrThresholds=X.at;this.flong=X.flong;this.flat=X.flat;this.fpt=X.fpt;this.mstyl=X.mstyl;this.maxBubbleSize=X.mbs||50;},showErrorMsg:function J(X,Y){this.errorMsg.set("text",Y);this.metricSelector.style.display=X?"none":"block";this.map.style.display=X?"none":"block";this.msg.style.display=X?"block":"none";},postBuildRendering:function Q(){console.log("JSMAP:androiMap:postBuildRendering");this._super();if(typeof this.gridData.eg!=="undefined"){this.showErrorMsg(true,this.gridData.eg);}else{if(typeof google==="undefined"||(google&&typeof google.maps==="undefined")){this.showErrorMsg(true,this.noMapsMsg);}else{this.showErrorMsg(false);var Y=this.children[0];Y.idx=0;Y.unset=true;Y.options=[{v:"-1",n:""}];if((typeof google!=="undefined"&&google.maps)){if(!mstrApp.isInfoWindow){this.markerArr=[];this.bubblesMaxInfo=[];}this._mapTypeToGoogleMapTypeId=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.TERRAIN];H();if(this.gridData){var Z=this.buildMetricSelector(),X=Z?parseInt(this.layoutConfig.h.metricSelector,10):0;this.metricSel.set("visible",Z);this.map.style.height=this.getHeight()+"px";this.map.style.width=(this.getWidth()-1)+"px";this.metricSelector.style.height=X+"px";this.metricSelector.style.display=Z?"block":"none";this.initMap();if(this.map.firstChild){this.map.firstChild.style.zIndex=1;}}}}}},gup:function G(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var Z="[\\?&]"+a+"=([^&#]*)",Y=new RegExp(Z),X=Y.exec(window.location.href);return X==null?"":X[1];},onselMetricIxChange:function(X){var a=function(e,b){for(var d in b){if(b[d].setMap){b[d].setMap(e);}}};if(this.openedInfoWindow){this.openedInfoWindow.close();}var Y=this.getMarkers(X.value),Z=this.getMarkers(X.valueWas);this.selMetricIx=X.value;a(null,Z);a(this.googleMap,Y);},buildMetricSelector:function I(){var a=this.gridData.gts.col,d=false;if(a.length>0){var b=a[0].es;if(b.length>1){var Z=[],Y=-1;S.forEach(b,function(f,e){Z[++Y]={n:f.n,v:Y,id:f.id};});var X=this.children[0];X.set("options",Z);X.set("value",0);d=true;}}return d;},initMap:function(){var Y,g=google.maps,Z=g.event,a=F.call(this)||g.MapTypeId.ROADMAP,b={mapTypeControl:true,mapTypeControlOptions:{position:g.ControlPosition.TOP_LEFT,style:g.MapTypeControlStyle.HORIZONTAL_BAR},streetViewControl:false,mapTypeId:a,navigationControlOptions:{position:g.ControlPosition.RIGHT_BOTTOM,style:g.NavigationControlStyle.ANDROID},zoomControlOptions:{style:g.ZoomControlStyle.LARGE},tilt:0};this.googleMap=Y=new g.Map(this.map,b);this.selMetricIx=this.selMetricIx;var e=this.getMarkers(this.selMetricIx);if(e.length>0){var h=this.mapBounds;if(h){Y.fitBounds(h);Y.setCenter(h.getCenter());}}else{var f=new g.LatLng(38.893444,77.221648);Y.setCenter(f);}var d=30,k=0,j=Y.getZoom(),X=setInterval(function(){j=Y.getZoom();k+=d;if(j!==undefined){if(j>20){Y.setZoom(15);}else{if(j<2){Y.setZoom(2);}}clearTimeout(X);}else{if(k>10*d){clearTimeout(X);Y.setZoom(2);}}},d);},getMarkers:function A(AX){if(!!this.markerArr[AX]){return this.markerArr[AX];}var AC=this.googleMap,AT=this.gridData,l=AT.vp,X=AT.gts,p=X.row,g=this.usePt,AW=(g?1:2),e=this.useAttributes,h=this.geoAttr,w,Y,k,u=-1,x=-1,AG=-1,j=[],s=null;for(var AM=0,AE=p.length,AN=0;AM<AE;++AM){var AR=p[AM],z=AR.id;if(g){if(z==this.fpt){w=Y=AR;u=x=AN;}}else{if(z==this.flong){w=AR;u=AN;}else{if(z==this.flat){Y=AR;x=AN;}}}for(var AS=0,AD=AR.fs.length;AS<AD;++AS){var AV=AR.fs[AS],AP=AV.id;if(g){if(AP==this.fpt){w=Y=AR;u=x=AN+AS;}}else{if(AP==this.flong){w=AR;u=AN+AS;}else{if(AP==this.flat){Y=AR;x=AN+AS;}}}if(AG<0){k=AR;AG=AN+AS;}}AN+=AD;}if(Math.min(u,x,AG)<0){throw new Error(mstrmojo.desc(8395,"Not enough data to display map."));}var AH=AT.ghs.rhs.items,Z=Math.min(AH.length,D),AL=-90,t=90,AO=-180,AA=180;for(var AQ=0;AQ<Z;AQ++){var AK=AH[AQ].items;if(AK.length<AW){continue;}var AJ=w.es[AK[u].idx].n,a=parseFloat(g?R("long",AJ):AJ),AF=parseFloat(g?R("lat",AJ):Y.es[AK[x].idx].n),q=k.es[AK[AG].idx].n,AU,AB=AT.gvs.items[AQ];if(isNaN(AF)||isNaN(a)){continue;}t=(AF<t)?AF:t;AL=(AF>AL)?AF:AL;AA=(a<AA)?a:AA;AO=(a>AO)?a:AO;latLng=new google.maps.LatLng(AF,a);if(this.markerType=="2"){AU=this.getMetricBubble(AT.gvs.items[AQ],q,latLng,AQ,AX);}else{s="../"+this.mstyl;var b=AT.gvs.items[AQ];if(b){var AI=b.items;if(AI){var o=AI[AX];if(o&&(o.ts==4)&&(this.attrThresholds=="1")){s=this.getImage(o.v);}}}AU=new google.maps.Marker({position:latLng,title:q,_ix:AQ,icon:s,zIndex:AQ});}AU.eid=k.es[AK[AG].idx].id;AU.attrid=k.id;AU.setMap(AC);google.maps.event.addListener(AU,"click",function(f,d){return function(){f.handleMarkerClick(AC,d);};}(this,AU));j[j.length]=AU;}this.mapBounds=new google.maps.LatLngBounds(new google.maps.LatLng(t,AA),new google.maps.LatLng(AL,AO));this.markerArr[AX]=j;return j;},handleMarkerClick:function(Y,X){if(this.openedInfoWindow){this.openedInfoWindow.close();this.openedInfoWindow=null;}this.openInfoWindow(Y,X);this.postHandleMarkerClick(Y,X);},postHandleMarkerClick:mstrmojo.emptyFn,getMetricBubble:function W(e,k,Y,h,b){var j=this.gridData,Z=j.gvs.items,q=this.bubblesMaxInfo[b],p=parseFloat(e.items[b].rv),a="red",X=Math.abs(this.maxBubbleSize-this.minBubbleSize);if(!q){for(var g in Z){var o=Z[g].items[b],l=parseFloat(o.rv)||0;if(!q){q=l;}q=Math.max(q,l);}this.bubblesMaxInfo[b]=q;}if(this.attrThresholds=="1"&&(typeof e.items[b].ty!=="undefined")){var f=e.items[b].ty;if(f==2){a=j.th[e.items[b].ti].n;}else{a="#FFF";}}return new K(k,Y,this.minBubbleSize+Math.round((p/q)*X),h,a);},openInfoWindow:function(a,Z){var Y=Z._ix,X=this.getInfoWindow(a,Z);if(X){this.openedInfoWindow=X;X.open(a,Z);}},getInfoWindow:function(Y,X){return this.getDefaultInfoWindow(this.gridData,X);},getDefaultInfoWindow:function L(f,e){var Y=e._ix,j=[],Z=f.gvs.items,g=document.createElement("div"),h='<table><tbody><tr><td colspan="2" class="androidMap-infoWindowTitle" style="padding-right: 20px">'+e.title+"</td></tr>";if(f.gts.col.length!=0){j=f.gts.col[0].es;}for(var b in j){var k=Z[Y].items[b];if(k.ts==4){var l=k.v;if(l.indexOf("http")!==0){l="../"+l;}h+='<tr><td class="androidMap-infoWindowText">'+j[b].n+'</td><td><img src="'+l+'"></td></tr>';}else{var a="black",X="white";if(f.th&&this.attrThresholds=="1"&&(typeof k.ti!=="undefined")){a=f.th[k.ti].n;}h+='<tr><td class="androidMap-infoWindowText">'+j[b].n+'</td><td style="background-color:'+X+";color:"+a+';">'+k.v+"</td></tr>";}}h+="</tbody></table>";g.innerHTML=h;return new google.maps.InfoWindow({content:g});},touchBegin:function(X){X.stop();return false;},rebuildLayout:mstrmojo.emptyFn,setDimensions:function O(a,Z){var b=this.googleMap,X=b?b.getCenter():null,Y=this._super(a,Z);if(b){this.map.style.height=this.getHeight()+"px";this.map.style.width=(this.getWidth()-1)+"px";b.setCenter(X);}return Y;},unrender:function P(X){if(this.googleMap){delete this.googleMap;}this._super(X);},destroy:function V(){if(this.googleMap){delete this.googleMap;}this._super();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.MetricSlider","mstrmojo.MetricQualification","mstrmojo.SearchBoxSelector","mstrmojo.TextBoxSelector","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.string","mstrmojo._IsSelectorTarget","mstrmojo.elementHelper","mstrmojo.MetricSelectorUtility","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi._MonitorsAppState","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSConsolidationType");mstrmojo.requiresDescs(4729,4730,4732,4733,4734,4735,5225,5443,6738,8967,12297);var V=mstrmojo.array,a=mstrmojo.hash,AO=mstrmojo.dom,Av=mstrmojo.expr,Aa=Av.BFTP,As=Av.TP,k=Av.STP,BB=mstrmojo.css,Ab=mstrmojo.MetricSelectorUtility,Ai=mstrmojo.vi.ui.DatasetUnitMenuUtils,Aw=0,Aq=1,A0=2,Ah=3,AK=4,AQ=5,Ak=6,AE=7,Af=8,Am=9,j=10,B=11,l=12,BC=mstrmojo.elementHelper,AC=BC.ELEM_ALL_ID,BE=mstrmojo.func.wrapMethods,Q=mstrmojo.string.escapeIllegalXML,AL=mstrmojo.mstr,H=AL.EnumDSSXMLBaseFormType.DssXmlBaseFormHTMLTag,J=AL.EnumDSSConsolidationType,d=AL.EnumDSSXMLObjectTypes,AX=As.FILTER,Y=As.METRIC,Ag=As.ATTR,A9=As.CONS,Ay=0,A2=k.NDE,An=3076,AD=3077,G=k.CUSTOMGROUP,AF=BC.ELEM_ALL,AS=338;mstrmojo.DocSelectorEvtType=null;var p={};p[AE]="MetricSlider";p[Af]="MetricQualification";p[Am]="SearchBoxSelector";p[j]="TextBoxSelector";var BI=2;var AV=function AV(){var BJ={type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,tks:this.tks,include:this.include,isUConDS:!!this.defn.dsTks};if(this.style===Af||this.style===AE){mstrmojo.hash.copy(BJ,{srcid:this.srcid,srct:this.type,f:this.f,ft:this.ft,qt:this.qt,unset:!!this.unset,cs:this.cs});}return BJ;},Ao=function Ao(){var BK=this.node,BM=BK&&BK.data,BJ=BK&&BK.defn,BL=BJ&&BJ.srct;return((mstrApp.isAppStatePause&&mstrApp.isAppStatePause())||mstrConfig.resolveOnly)&&this.style!==Am&&BL&&this.hasAttrData()&&!BM[C.ELMSREADY]&&!BM[C.ELMSREQUEST]&&parseInt(BJ.ds,10)===Ay&&!BM[C.DISABLED];},Al=function Al(BJ){var BM=this.node.defn,BP=this.node.data,BL=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,BQ={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:BM.srcid||"",dataSourcesXML:BM.dsrc||"",browseFlags:1};if(!BM.srcid){return ;}var BK=function(BU){var BR=this.model,BT=BR.datasets,BS=Object.keys(BT),BW=[],BV;V.forEach(BS,function(BX){BW=BT[BX].att;V.forEach(BW,function(BY){if(BY&&BY.did===BU){BV=BX;return false;}});if(!!BV){return false;}});return BV;};if(!BJ){BQ.datasetID=BM.dsid||BK.call(this,BM.srcid);BQ.messageID=this.model.mid;if(!BQ.datasetID){return ;}}var BO=this,BN={success:function(BR){BO.bGetElems=true;BO.set("wait",false);if(BR&&BR.es){BP.elms=(BM.srcid)?BC.buildElemsTerseID(BR.es,BM.srcid,true):BR.es;if(BL){BO.toggleDisplayAll(BM.showall);}var BS=BO.parent,BT=BS&&BS.parent;if(BM.sec&&BP.ces&&BP.elms&&BP.elms.length>0&&BS){BS.set("count",BC.buildElemsCountStr(BP.ces,BP.elms,BO.isSelectionExcluded()));}if(BO.isInvalid){BO.isInvalid=false;}if(BO.hasRendered){BO.refresh();if(BL&&BS){BB.toggleClass(BS&&BS.domNode,"invalid",false);if(BT){BT.rebuildChild(BS);}}if(BO.isInFilterPanel()){if(BS&&BS.defn&&BS.defn.ttl){BS.updateContentHeight();}if(BT&&BT.refreshFP){BT.refreshFP();}}}}},failure:function(BR){if(BL){BO.model.setDataReady(BO.k,BO.id,C.DISABLED,true);var BS=BO.parent;BO.isInvalid=true;BB.toggleClass(BS&&BS.domNode,"invalid",true);if(BO.isInFilterPanel()){if(BS){BS.canCollapse=false;if(BS.titleBar){BS.titleBar.canCollapse=false;}BS.generateToolbar();}}else{if(BS.hasRendered&&BS.showInvalidMessage){BS.showInvalidMessage();}}return ;}mstrmojo.alert(BR.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){if(BL){BO.node.data[C.ELMSREQUEST]=false;BO.model.setDataReady(BO.k,BO.id,C.ELMSREQUEST,false);if(!mstrApp.isSingleTier){mstrApp.hideWait();}}}};this.set("wait",true);if(BL){BP[C.ELMSREQUEST]=true;this.model.setDataReady(this.k,this.id,C.ELMSREQUEST,true);}if(mstrApp.isSingleTier&&BL){mstrApp.serverRequest(BQ,BN,{hideFailureErr:true});}else{if(BL){mstrApp.showWait();}mstrmojo.xhr.request("POST",mstrConfig.taskURL,BN,BQ,false,null,true);}},q={getWidgetClass:function D(BM,BL,BK){var BJ=p[BL];if(BJ&&BJ.constructor===Array){BJ=BJ[BK?0:1];}return BJ;},getWidgetConfig:function U(BP,BL,BN,BJ){var BQ=BL===2?false:BN.horiz,BO=BP.getFormats(),BR=BO&&BO.height,BM={scriptClass:this.getWidgetClass(BP,BL,BQ),docSelector:BP,enabled:this.enabled,multiSelect:BN.multi,isHoriz:BQ,include:BN.include,itemWidthMode:BN.iwm,allIdx:V.find(BJ,"v",mstrmojo.elementHelper.ELEM_ALL_ID),noneIdx:BN.include?-1:V.find(BJ,"v",mstrmojo.elementHelper.ELEM_ALL_ID),renderAllItems:!BR,onchange:function BK(){if(!BP._inSyncPhase){BP.selectorControlChange(this);}}};if(BM.noneIdx!==-1){BM.allIdx=-1;}if(BO&&BL===mstrmojo.DocSelector.STYLES.PULLDOWN){if(BO.color){BM.itemCssText="color: "+BO.color+";";}if(BO.font){BM.itemCssText=(BM.itemCssText||" ")+"font:"+BO.font;}if(mstrApp.isExpress){BM.cssTextClass="express";}}return BM;},expandOrEditToFetchElements:function e(){var BJ=this.node&&this.node.data;if(BJ&&BJ[C.DISABLED]){BJ[C.DISABLED]=false;}this.model.setDataReady(this.k,this.id,C.disabled,false);this.checkAndFetchAllElemsForDelayed();},checkAndFetchAllElemsForDelayed:function L(BJ){if(BJ||Ao.call(this)){Al.call(this);}},newSelectorWidget:function A5(BU){var BQ=BU.style,BL=BU.node,BT=BL.defn,BO=BL.data,BJ=BO.elms||[],BP=BU.isInFilterPanel(),BK,BS=this.getWidgetConfig(BU,BQ,BT,BJ),BN=BS.scriptClass,BR=function(BX){var BV=this.getPopupList(),BW=this.items;if(BV.items.length!==BW.length){this.selectedIndex=V.find(BW,"v",BX.v);}if(BX){this.set("text",BX.n||mstrmojo.desc(14561,"(null)"));}};if(!BN){BK=new mstrmojo.Label({cssClass:"unsupported",text:"This selector is not supported."});}else{if(BQ===Aw){if(mstrApp&&mstrApp.isVI){BS.useDarkTheme=!BP&&mstrApp.getRootController().isDarkThemeSelected();BS.scrollNodeMaxHeight=AS;BS.focusOnPopup=true;BS.allowEmptyText=true;BS.onitemSelected=BS.onitemSelected?mstrmojo.func.composite([BR,BS.onitemSelected]):BR;BS.customizeSearchResult=function(BX){var Ba,BY=this.allIdx,BW=this.multiSelect,BV=BX.length,BZ={v:"u;",n:mstrmojo.desc(13976,"(All search results)"),t:d.Dimension,_renderIdx:BY};if(BV!==this.items.length){if(BY>=0){Ba=V.find(BX,"v","u;");if(Ba>-1){if(BW&&BV>1){BX.splice(Ba,1,BZ);}else{BX.splice(Ba,1);}}else{if(BW&&BV>0){BX.splice(BY,0,BZ);}}}}};BS.setDefaultListAndIndex=function(BW){var BV=this.getPopupList();BV.set("items",BW);if(!this.multiSelect){BV.set("selectedIndex",this.selectedIndex);this.set("text",BW[this.selectedIndex].n||mstrmojo.desc(14561,"(null)"));}else{this.set("selectedIndices",this.selectedIndices);}};BS.onclearSelection=function(){var BW=this.getSelectedItem(),BV=this.getPopupList();if(BW){BV.set("selectedIndex",V.find(BV.items,"v",BW.v));}};}}delete BS.scriptClass;var BM=a.walk(BN,mstrmojo);BK=new BM(BS);}return BK;},getCekEvtListener:function A1(BK,BJ){return function(BL){var BO=[],BM=this.node.data.elms,BN={};V.forEach(BM,function(BQ,BP){BN[BQ.v]=BP;});V.forEach(BL.value,function(BQ){var BP=BN[BQ];if(BP>-1){BO.push(BP);}});this.handleActionInSyncPhase(function(){if(BJ&&BJ.select){BJ.select(BO);}});};},newAndInitWidget:function AN(BN){var BP,BL=BN._cekEvtListener,BK=BN.node,BJ=BK.defn,BM=BN.id,BO;if(BL){BJ.detachEventListener(BL);delete BN._cekEvtListener;}BP=this.newSelectorWidget(BN);if(BP){BO=this.getCekEvtListener(BN,BP);}BM=BO.cekContextId||BM;BO=BO.cekEvtListener||BO;if(BO){BN._cekEvtListener=BJ.attachEventListener("cekChange",BM,BO);}BN.addChildren(BP);return BP;},updateWidget:function Ax(BK){var BJ=BK.children,BL=BJ&&BJ[0];if(!BL){BL=this.newAndInitWidget(BK);}else{BL.set("enabled",this.enabled);}return BL;}};function At(BJ){return BJ.some(function(BK){return this.style===BK;},this);}function h(){var BJ=this;return BJ.model.getDatasetUnits(["mx"],function(BK){return BK.did===BJ.defn.srcid;})[0]||{};}function AM(BJ,BN,BO,BQ,BT,BM,BK){if(!BJ){return[];}var BS=0,BP,BR=BJ.length-(BM?1:0)-(BN?1:0),BL=[];if(BK){if(BO&&BN){BS++;}else{if(BQ){BS=(BJ.length-1);if(BM){BS--;}}}for(BP=0;BP<BT;BP++){if(BO){if(BS<=BR&&BJ[BS]){BL.push(BJ[BS++]);}}else{if(BQ){if(BS>=(BN?1:0)){BL.push(BJ[BS--]);}}}}}else{if(BO){BS=BT;if(BM){BS--;}}else{if(BQ){BS=0;if(BN){BS++;}}}for(BP=BT+1;BP<=BR;BP++){if(BS<=BR){BL.push(BJ[BS++]);}}}return BL;}mstrmojo.DocSelector=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,q,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.DocSelector",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSelector {@cssClass} {@extCls}" nm="{@en@n}" title="{@tooltip}" style="{@domNodeCssText}"><div class="filter" style="{@filterNodeCssText}"></div><div class="wait" style="display:none;z-index:100;position:absolute;top:0;left:0;width:100%;height:100%"></div><div class="content" style="{@contentNodeCssText}"></div></div>',markupSlots:{filterNode:function(){return this.domNode.firstChild;},contentNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode.lastChild;},wIconNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenableChange:mstrmojo.Widget.enabledMarkupMethod,onincludeChange:function(){BB.toggleClass(this.domNode,"strikeout",!this.include);},onwaitChange:function(){BB.toggleClass(this.domNode,"wait",!!this.wait);this.wIconNode.style.display=((this.wait)?"block":"none");}},_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},ckey:null,ck:null,tks:null,style:0,selIdx:null,extCls:"",min:-1,max:-1,bGetElems:false,n:"",_inSyncPhase:false,toggleDisplayAll:function BA(BJ){var BN=this.node,BO=BN.data,BM=BN.defn,BL=V.filterOne(BO.elms,function(BP){return BP.t===14;});if(BJ&&!BL){BL=AF;BO.elms=V.insert(BO.elms,0,[BL]);}if(!BJ&&BL){BO.elms=V.filter(BO.elms,function(BP){return BP.t!==14;});}if(this.children&&this.children[0]){var BK=V.find(BO.elms,"v",mstrmojo.elementHelper.ELEM_ALL_ID);this.children[0].items=BO.elms;this.children[0].allIdx=BK;this.children[0].noneIdx=BM.include?-1:BK;}BO[C.ELMSREADY]=true;this.model.setDataReady(this.k,this.id,C.ELMSREADY,true,"elms",BO.elms);},init:function AW(BL){this._super(BL);if(mstrmojo.dom.isIE){this.formatHandlers=this._ieformatHandlers;}var BK=BL.node.defn,BJ=BK.style;this.n=BK.n;if(mstrApp.showSelectAllMenuOptionForSelector===1&&BK.multi){switch(BJ){case A0:case AK:case AQ:case Ak:this.spm=true;break;}}},_fetchOnInit4UCOnDS:function Aj(BL){var BJ=!this.bGetElems&&parseInt(this.node.defn.subTp,10)===BI,BK=this.node.data;if(BJ||Ao.call(this)){Al.call(this,BJ);BL=BK.elms;}return BL;},initControlInfo:function K(){var BY=this.node,Bd=BY.data,BL=BY.defn,BW=Bd.elms,Bc=Bd.ces;var BQ=["include","ckey","ck","tks","style","multi","iase","showall"];BW=this._fetchOnInit4UCOnDS(BW,Bd);this.type=BL.ct;var BV=BL.fmts;if(BV){var BT=BV.width;if(!BT||parseInt(BT,10)<=0){BV.width="95px";}}a.copyProps(BQ,BL,this);var BP=this.selIdx={},BN=false,BX=BL.multi;if((BL.style===Aq)||BX){if(!this.oces&&(Bc!==undefined)){this.oces=a.cloneArray(Bc);BN=true;}var BK=BL.showall,Bb=(V.find(Bc,"v",mstrmojo.elementHelper.ELEM_ALL_ID)>-1),Ba=(parseInt(BL.dfm,10)===1),BM=(Bd.unset===true),BZ=(!Ba&&BM&&(Bc&&Bc.length===0)),BJ=(BK&&Bb)||(Bb&&!Ba&&BM)||(BK&&Ba&&BM);if(BJ){Bc=BW;}else{if(BZ){if(!BN&&(BL.sus!==1)){var BU=BL.htot,BR=(BL.sus===2),BS=(BL.sus===4),Be=BL.suc||1;Bc=AM(BW,BK,BR,BS,Be,BU,this.include);}else{if(this.oces){Bc=this.oces;}}}}}if(Bc){var BO={};V.forEach(Bc,function(Bf){BO[Q(Bf.v)]=true;});V.forEach(BW,function(Bg,Bf){if(BO[Q(Bg.v)]){BP[Bf]=true;}});}if(BL.min>=0){this.min=BL.min;}if(BL.max>=0){this.max=BL.max;}if(this.isRecursiveAttributeSelector()){this.levelForms=Bd.lvfs||[];}},resetFormatHandlers:function P(){this.formatHandlers={contentNode:["RW"]};},_getSelectionCount:function z(BJ){return a.keyarray(BJ.selectedIndices).length;},canApply:function M(BN){var BM=this.defn,BO=BM.multi,BL=this.min,BJ=BO?this.max:1,BK=this._getSelectionCount(BN||this.content);return(BL>=0&&BJ>=0&&BL>BJ)||((BL<0||BL<=BK)&&(BJ<0||BJ>=BK));},_buildEvent:mstrmojo.emptyFn,selectorControlChange:function W(BL){var BK=AV.call(this),BR=this.isInFilterPanel()&&this.getFilterPanel(),BO=(BR&&BR.isAutoApply());this._buildEvent(BK,BL);if(!this.canApply(BL)){var BJ=this.getPanelContainer();if(this.isInSearchBoxPanel(BJ)){BJ.set("canApplySbp",false);}if(BO){this.set("err",true);mstrmojo.alert(mstrmojo.desc(12297,"One or more selectors are incorrectly set. Please review the selector(s) and try again."));}if(BR){BR.set("applyEnabled",false);}return ;}if(BO){this.set("err",false);}if(mstrApp.isExpress&&this.node.defn.style===Aw){this.handleExpressPulldown();}if(BK.requireToggle){this.deferredEvt=BK;this.set("include",BK.include);this.deferredEvt=undefined;}else{this.slice(BK);}if(this.node.data.unset===true){this.node.data.unset=null;}var BM=this.model,BN=BM&&BM.controller,BQ=BN&&BN.view,BP=this.k,BS=this.defn&&this.defn._lkz;V.forEach(BQ&&BQ.children,function(BX){var BW=BX.defn,BU=BW&&BW.loaded,BT=BW&&BW.units;if(BU&&BX.k!==BS){for(var BV in BT){if(BV===BP){if(BT[BV].tsk!==""){BW.loaded=false;}break;}}}});},showInfoWin:function w(BO){var BR=this.node&&this.node.defn,BL=BR&&BR.ifw,BK=this.model,BM=[].concat(BK.getTargetInfoWin(BL)).concat(BK.getTargetInfoWin(this.tks));if(BM&&BM.length){var BT=this.defn.horiz,BJ=BO||this.contentNode,BQ=AO.position(BJ),BS=AO.position(this.contentNode),BP=(BT||parseInt(this.defn.style,10)===Aq)?null:{x:BS.x,y:BQ.y,w:BS.w,h:BQ.h},BN;for(BN=0;BN<BM.length;BN++){BK.showInfoWin(BM[BN],BJ,BT?"v":"h",false,a.copy(BP));}}},unrender:function AI(BJ){delete this.formatHandlers;this._super(BJ);},postBuildRendering:function BH(){var BL=this.node.defn.style,BN=this.filterNode.style,BJ=this.contentNode,BK=this.node.defn;if(this.isInFilterPanel()&&!this.isHorizFP()){this.domNode.style.width=this.contentNode.style.width="100%";if(this.formatHandlers.filterNode){this.filterNode.style.width=this.contentNode.style.width="100%";}this.set("visible",parseInt(BK.ds,10)===Ay);}this.handleActionInSyncPhase(this._super,this);if(mstrApp.isExpress&&BL===Aw){this.handleExpressPulldown();}if(this.isInFilterPanel()&&this.parent.adjustFP){this.parent.adjustFP();}if(this.formatHandlers.filterNode){var BM=this.getFormats();if(!BM.width){BN.width=BJ.clientWidth+"px";}if(!BM.height){BN.height=BJ.clientHeight+"px";}}else{BN.display="none";}this.model.attachEventListener("CGBMapChange",this.id,"onCGBMapChange");if(AO.isAndroid&&BL===Aq){BJ.style.overflow="visible";}BB.toggleClass(this.parent.domNode,"invalid",this.isInvalid);return true;},updateHeight:function A4(){this.contentNode.style.height=this.filterNode.style.height=this.content.getClientHeight()+"px";var BJ=this.parent;if(BJ&&(BJ.defn.ttl!==undefined)&&BJ.updateContentHeight){BJ.updateContentHeight();}},handleExpressPulldown:function I(){var BL=this.model.getZoomFactor();if(BL!==1){var BM=this.contentNode.firstChild.firstChild,BN=parseInt(window.getComputedStyle(BM).height),BJ=BN*BL+"px";BM.style.height=BJ;BM.style.lineHeight=BJ;}var BK=document.createElement("DIV");BK.setAttribute("class","mstrmojo-ui-Pulldown-arrow");BK.setAttribute("src","#");this.content.selectedNode.appendChild(BK);},handleActionInSyncPhase:function Az(BL,BK){var BJ=this._inSyncPhase;this._inSyncPhase=true;try{if(BK){BL.call(BK);}else{BL();}}catch(BM){throw ("There was an error handling the selector action in sync phase.");}this._inSyncPhase=BJ;},onCGBMapChange:function A3(BK){var BJ=BK.cgbMap;if(!BJ){return ;}var BL=this.tks;a.forEach(this.defn.cgb,function(BN){var BM=BJ[BN];if(BM&&BL.indexOf(BM)<0){BL+="\u001E"+BM;}});this.tks=BL;},onAppStateChange:function AZ(BS){var BQ=mstrmojo.vi.VisualInsightApp.APP_STATES,BU=BQ.PAUSE,BR=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),BP=this.model,BL=this.node,BO=BL&&BL.data,BT=BP.updateCSKeysforPause,BN=this.k,BJ=this.id;var BK=BS.valueWas&BU;if(BO){if(BR&&!BK){if(this.hasAttrData()){var BW=(V.indexOf(BT,this.ckey)===-1)&&BO.elms&&(BO.elms.length>0),BV=this.style===Am,BM=BW&&!BV;BO[C.ELMSREADY]=BM;BO[C.CESREADY]=BW;BO[C.DISABLED]=!BW&&!BV;BP.setDataReady(BN,BJ,C.ELMSREADY,BM);BP.setDataReady(BN,BJ,C.CESREADY,BW);BP.setDataReady(BN,BJ,C.DISABLED,!BW&&!BV);if(!BM&&this.shouldDisableGdde()){this.isInvalid=true;}}else{if(this.hasQualData()){BO[C.METRICVALUES]=!mstrConfig.resolveOnly;BP.setDataReady(BN,BJ,C.METRICVALUES,!mstrConfig.resolveOnly);BO[C.CSREADY]=true;if(this.isAttrQualSelector()&&this.children&&this.children.length){BP.setDataReady(BN,BJ,C.CSREADY,true,"cs",this.children[0].cs);}else{BP.setDataReady(BN,BJ,C.CSREADY,true);}}}}if(!BR&&BK){if(this.hasAttrData()){BO[C.ELMSREADY]=BO[C.CESREADY]=BO[C.ELMSREQUEST]=BO[C.DISABLED]=false;BP.setDataReady(BN,BJ,C.DISABLED,false);BP.setDataReady(BN,BJ,C.ELMSREADY,false);BP.setDataReady(BN,BJ,C.CESREADY,false);BP.setDataReady(BN,BJ,C.ELMSREQUEST,false);}else{if(this.hasQualData()){BO[C.METRICVALUES]=BO[C.CSREADY]=false;BP.setDataReady(BN,BJ,C.METRICVALUES,false);BP.setDataReady(BN,BJ,C.CSREADY,false);}}}}},update:function t(BX){this._super(BX);var BR=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,BJ=this.node&&this.node.data,BN=this.model;if(BR&&BJ){if(!BX.data){BX.data={};}var BY=BX.data;if(BJ[C.CESREADY]){BY.ces=BJ.ces;BY[C.CESREADY]=BJ[C.CESREADY];}else{if(!this.hasQualData()){BY.ces=BX.defn&&BX.defn.ces;BY[C.CESREADY]=true;BN.setDataReady(this.k,this.id,C.CESREADY,true,"ces",BY.ces);}}if(BJ[C.ELMSREADY]){BY[C.ELMSREADY]=BJ[C.ELMSREADY];BY.elms=BJ.elms;}if(BJ[C.DISABLED]){BY[C.DISABLED]=BJ[C.DISABLED];}if(BJ[C.METRICVALUES]){BY[C.METRICVALUES]=BJ[C.METRICVALUES];Ab.restoreMetricSelectorProps(BY,BJ);}if(BJ[C.CSREADY]){BY[C.CSREADY]=BJ[C.CSREADY];Ab.restoreMetricSelectorSelections(BY,BJ);}}this.node=BX;var BM=this.node.defn,Be=this.node.data,Ba=BM.style,BU=Be.elms,BS=this.parent,BV=(Ba===Aq),BL=(Ba===Am),BW=this.isDynamicAttributeSelector(),Bc,Bb;if(BR){if(Be&&BM){if(this.hasAttrData()){BN.setDataReady(this.k,this.id,C.CESREADY,true);if(BL){Be.elms=Be.ces;Be[C.ELMSREADY]=false;Be[C.DISABLED]=false;BN.setDataReady(this.k,this.id,C.ELMSREADY,false);BN.setDataReady(this.k,this.id,C.DISABLED,false);}else{BN.setDataReady(this.k,this.id,C.DISABLED,!BJ[C.ELMSREADY]);}if(!Be[C.ELMSREADY]&&this.shouldDisableGdde()){this.isInvalid=true;}}else{if(this.hasQualData()){BN.setDataReady(this.k,this.id,C.CSREADY,true);}}}}if(BM.srct===Ag&&BM.srcid&&this.model.getBrowseFormTypes&&this.model.getBrowseFormTypes(BM.srcid).indexOf(H)>-1){Bc=window.document.createElement("span");V.forEach(BU,function(Bf){Bc.innerHTML=Bf.n;Bb=Bc.firstChild;Bf.n=Bb&&(Bb.text||Bb.alt)||Bf.n||"";});Bb=null;Bc=null;}if(BV&&BM.multi){var BT=V.find(BU,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(BT>-1){Be.del={idx:BT,elem:BU[BT]};V.removeIndices(BU,BT,1);}}if(BM.sec){var BZ=[].concat(BX.data.ces||[]);if(BS&&(BS.count!==null&&BS.count!==undefined)){if(BV||BW){BS.set("count","");}else{if((BZ&&BU&&BU.length)||BM.sos){if(!BM.include){var Bd=V.find(BZ,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(Bd>=0){V.removeIndices(BZ,Bd,1);}}var BP={};V.forEach(BU,function(Bf){BP[Bf.v]=true;});BZ=V.filter(BZ,function(Bf){return BP[Bf.v];});var BK=BZ,BQ;if(!BL){if(!BM.multi){BK=BU;}BQ=BU;}if(BX.data.unset){BS.set("count",BC.buildElemsCountStr(BQ,BQ));}else{BS.set("count",BC.buildElemsCountStr(BK,BQ,this.isSelectionExcluded()));}}}}}if(this.content){this.content.allIdx=V.find(this.node.data.elms,"v",AC);}this.initControlInfo();var BO=this.content=this.updateWidget(this);if(!BO){this.set("visible",false);}this.clearCache();},refresh:function Ap(){var BK=this.parent,BJ=this.node&&this.node.defn;if(BK&&BK.generateToolbar){BK.set((this.isInFilterPanel()?"baseTitle":"title"),BJ.ttl);BK.generateToolbar();}this._super();if(BK.fc&&BK.updateContentHeight){BK.updateContentHeight();}},onselectAllChange:function Ae(BS){var BK=this.children&&this.children[0],BQ=BK.items,BJ=BK.allIdx,BM=BK.selectedIndices,BR,BP=[];if(BS.value){if(BM[BJ]){BK.removeSelect(BJ,true);var BO=BK.itemRenderer,BN=BO&&BO.unselect;if(BN){var BL=BK._getItemNode(BJ);if(BL){BN(BL,BQ[BJ],BJ,BK);}}}for(BR=0;BR<BQ.length;BR++){if(BR!==BJ&&!BM[BR]){BP.push(BR);}}BK.addSelect(BP);}else{for(BR in BM){BP.push(parseInt(BR,10));}BK.removeSelect(BP);}},onincludeChange:function AA(BX){var BV=this.node.defn,BL=BX.value,BU=this.model,BP=this.isInFilterPanel()&&this.getFilterPanel(),BT=BU.getDataService().newUpdate(BP);BV.include=this.include=BL;if(BP&&BP._bufferedSlices){BP.applyBufferedSlices(true,BT);}if(this.style!==AE&&this.style!==B){var BN=AV.call(this);BN.ckey=this.ckey;BN.changeInclude=true;if(BV.srct===Ag||BV.srct===A9){var BW=this,BQ=this.model,BR=this.node.k,BO=BQ.getDataService(),BK=BQ.getSliceCallback(BN),BM=this.isDynamicAttributeSelector(),BS=[BO.getSelectorShowAllAction({ck:BV.ck,ckey:BV.ckey,type:BV.type,showAll:BL}),BO.getSelectorIncludeAction({ck:BV.ck,ckey:BV.ckey,type:BV.type,include:BL})],BY=BE(BK,{success:function(BZ){BW.set("wait",false);if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){BW.toggleDisplayAll(BL);}if(!BM){BQ.partialUpdate(BZ.data,BQ.getTargetDefn(BR));}if(!BW.isInFilterPanel()&&BW.parent){BW.parent.selectVIUnit(BW,true);}}});this.showall=this.defn.showall=BX.value;var BJ=this.deferredEvt;if(!!BJ){BQ.sliceDeferred(BT,BJ);}BS=!!BJ?BS.concat(BT.actions):(BT.actions||[]).concat(BS);this.set("wait",true);BQ.controller.cmdMgr.execute({execute:function(){this.submit(BS,BY);},urInfo:{extraPuKeys:BV.ck.split("\u001E").slice(1),treesToRender:3}});}else{this.slice(BN);}}},getSelectorStyleList:function AP(){var BM=[],BP=this.defn.srct;if(this.useAttrStyle()){var BQ=!this.isInFilterPanel();if(this.isRecursiveAttributeSelector()){return[{n:mstrmojo.desc(4733,"Check Boxes"),v:AK},{n:mstrmojo.desc(8967,"Search Box"),v:Am},{n:mstrmojo.desc(4729,"Drop-down"),v:Aw}];}BM=[{n:mstrmojo.desc(4733,"Check Boxes"),v:AK},{n:mstrmojo.desc(4730,"Slider"),v:Aq}];if(BP===Ag){BM.push({n:mstrmojo.desc(8967,"Search Box"),v:Am});}if(BQ){BM=BM.concat([{n:mstrmojo.desc(4735,"Link Bar"),v:Ak},{n:mstrmojo.desc(4734,"Button Bar"),v:AQ}]);}BM=BM.concat([{n:mstrmojo.desc(4732,"Radio Buttons"),v:Ah},{n:mstrmojo.desc(4729,"Drop-down"),v:Aw}]);if(BQ){BM=BM.concat([{n:mstrmojo.desc(6738,"List Box"),v:A0}]);}var BO=Ai.getUnitFromDataset(this.model.datasets,this.defn.srcid,12),BJ=BO&&V.some(BO.fs,function(BR){return(BR.bftp===Aa.DATE||BR.bftp===Aa.DATETIME)&&(BR.istf||BR.idf);});if(BJ&&(BO&&!BO.de)){BM.push({n:mstrmojo.desc(5443,"Calendar"),v:B});}}else{if(BP===Y){var BL=this.node,BK=BL&&BL.defn,BN=BL&&BL.data;if((mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly)&&BK&&BK.style!==AE&&!(BN&&BN.max&&BN.min)){BM=[{n:mstrmojo.desc(5225,"Qualification"),v:Af}];}else{BM=[{n:mstrmojo.desc(4730,"Slider"),v:AE},{n:mstrmojo.desc(5225,"Qualification"),v:Af}];}}}return BM;},supportsInclude:function AU(){var BJ=this.defn;if(this.isRecursiveAttributeSelector()){return !this.isDynamicAttributeSelector();}return((BJ.srct===Ag&&!this.hasDE)||(BJ.srct===Y&&BJ.style===AE))&&!this.isSolrSelector()&&!mstrApp.isInVFConfigMode;},isSelectionExcluded:function f(){return this.isDynamicAttributeSelector()&&!this.defn.include;},isSolrSelector:function F(){return this.model.isFromSolrCube(this.defn.srcid);},isMetricSelector:function A7(){return this.defn.srct===Y;},isRankMetricSelector:function AY(){var BJ=h.call(this).f;return BJ&&typeof BJ==="string"&&BJ.search(/rank/i)===0;},isNumericMetricSelector:function Au(){var BJ=h.call(this).dt;return this.model.isNumericDataType(BJ);},isAttributeSelector:function Ac(){return this.defn.srct===Ag;},supportsShowAllToggle:function BD(){return this.defn.srct===Ag||this.defn.srct===A9||(this.defn.srct===AX&&this.defn.srcst===G);},useAttrStyle:function A(){var BJ=this.defn.srct;return BJ===AX||BJ===Ag||BJ===A9;},hasAttrData:function A6(){return this.useAttrStyle()&&!this.isAttrQualSelector();},hasQualData:function x(){return this.isAttrQualSelector()||this.isMetricSelector();},isDerivedAttributeSelector:function Ar(){return this.defn.srct===Ag&&this.defn.srcst===AD;},isNewDerivedElementSelector:function o(){return this.defn.srct===A9&&this.defn.srcst===A2;},isNewDerivedRecursiveElementSelector:function E(){return this.isNewDerivedElementSelector()&&this.defn.ndetype===J.DssRecursiveDerivedElement;},isAttrQualSelector:function AG(){return this.defn.srct===Ag&&this.defn.style===B;},isRecursiveAttributeSelector:function AB(){var BJ=this.defn;return BJ.srct===Ag&&BJ.srcst===An||this.isNewDerivedRecursiveElementSelector();},isDynamicAttributeSelector:function AT(){return this.isRecursiveAttributeSelector()&&this.isInFilterPanel()&&this.defn.style===AK;},allowsOrientationChange:function Ad(){return !this.isAttrQualSelector()&&!At.call(this,[Am,A0,Aw,Aq,AE,Af]);},isSearchBox:function O(){return At.call(this,[Am]);},isAttrElemListSelector:function A8(){return this.defn.srct===Ag&&this.defn.style!==B;},isCGSelector:function N(){return this.defn.srcst===G;},isGeoSelector:function b(){var BJ=Ai.getUnitFromDataset(this.model.datasets,this.defn.srcid,12);return !!BJ&&Ai.isGeoAttr(BJ);},shouldDisableGdde:function R(){return this.isCGSelector()||this.isGeoSelector();},getInvalidTooltip:function s(){var BK=mstrmojo.desc(15787,"Unable to retrieve the list of elements for this filter")+mstrmojo.desc(1006,"."),BJ=" "+mstrmojo.desc(15931,"Please resume data retrieval to use this filter.");if(this.isCGSelector()){BK=mstrmojo.desc(15924,"This Filter is based on a Custom Group, which is not supported when data retrieval is paused.")+BJ;}else{if(this.isGeoSelector()){BK=mstrmojo.desc(15932,"This filter is based on a Geo Attribute, which is not supported when data retrieval is paused.")+BJ;}}return BK;},slice:function g(BM){var BJ=this.model;if(BM&&BM.eid){BM.eid=Q(BM.eid);}if(BJ.closeSelWarnFlag){BJ.closeSelWarnFlag(this.k);}if(this.isInFilterPanel()){var BK=this.getFilterPanel();if(BK&&!BK.isAutoApply()){BK.bufferSlice(BM);return ;}}var BN=this.getPanelContainer();if(this.isInSearchBoxPanel(BN)){BN.parent.bufferSlice(BM);BN.set("canApplySbp",BN.canApplySearchBoxPanel());return ;}var BL=BN&&BN.parent;if(BL&&BL.bufferSlice&&BL.hasDisabledSelectionApply&&BL.hasDisabledSelectionApply()&&BM&&!BM.forceApply){BL.bufferSlice(BM);return ;}BJ.slice(BM);},isInFilterPanel:function AH(){var BJ=this.parent;return(BJ&&BJ.isInFilterPanel&&BJ.isInFilterPanel())||false;},isHorizFP:function BF(){var BJ=this.parent;return(BJ&&BJ.isHorizFP&&BJ.isHorizFP())||false;},getFilterPanel:function BG(){var BJ=this.parent;return(BJ&&BJ.getFilterPanel&&BJ.getFilterPanel())||null;},isInSearchBoxPanel:function(BJ){var BK=BJ||this.getPanelContainer();return BK&&(BK.isSbp||(BK._isSearchBoxPanel&&BK._isSearchBoxPanel()));},getPanelContainer:function(){var BJ=mstrmojo.EnumRWUnitType,BK;for(BK=this.parent;BK&&BK.defn;BK=BK.parent){if(parseInt(BK.defn.t,10)===BJ.PANEL){return BK;}}return null;},clearSelector:function Z(BJ){var BV=AV.call(this),BR=[AC],BU=this.node.data.elms||[],Be="\u001E",BZ=this.style,BK=this.defn.include,BM=this.isFilterNothing&&this.isFilterNothing(),BO=this.node.defn,Bb=BO.srcst===257||(BO.srct===47&&BO.srcst!==12033),Bf=mstrApp&&mstrApp.getSelectAllForUnsetForVI&&mstrApp.getSelectAllForUnsetForVI(),BY=[AF],BN=C.CESREADY,BP="ces",BW=[],BT=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(BZ===Am){if(Bf){BV.eid=BR.join(Be);BW=BY;}else{BV.ckey=this.ckey;BV.unset=true;}this.defn.set("cek",[]);}else{if(BZ===AE||BZ===Af){BV.cs="";BV.ckey=this.ckey;BV.unset=true;BO.set("cek",{cs:null,qua:this.qua,include:BK,f:null,ft:null});BN=C.CSREADY;BP=["f","ft","cs"];BW=[null,null,""];}else{if(BZ===B){BV.unset=true;BV.ckey=this.ckey;var BS=[{v:""},{v:""}];BO.set("cek",{cs:BS});BN=C.CSREADY;BP="cs";BW=BS;}else{if(Bf){BV.eid=BR.join(Be);BW=BY;}else{BV.ckey=this.ckey;BV.unset=true;}var Bd;if((BK||BZ===Aq)&&this.multi){V.forEach(BU,function(Bh){var Bg=Bh.v;if(BR[0]!==Bg){BR.push(Bg);if(!Bd){Bd=[Bh];}}});}var BQ=BK||BZ===Aq;if(!Bb){BO.set("cek",BQ?BR:[]);BW=BQ?BY:[];}else{if(BT){BO.set("cek",(BQ&&BR.length>1)?[BR[1]]:[]);}BW=Bd||[];}BP="ces";}}}if(this.defn.sec&&BZ!==Aq){this.parent.set("count",BZ===Am?"":BC.buildElemsCountStr(BR,BU,this.isSelectionExcluded()));}BV[BJ?"forceApply":"forceBuffer"]=true;if(BM&&!Bb){BV.ignoreTargetData=true;}BV.retrieveCtrlKey=Bb;if(BT){var Ba=this.model,Bc=Ba.getCurrentLayoutDef(),BX=Bc&&Bc.units,BL=this.k;if(BX&&BX[BL]){BX[BL].cesChange=false;}Ba.setDataReady(BL,this.id,BN,true,BP,BW);}this.slice(BV);},allowsTogglingMultiSelect:function AJ(){return At.call(this,[Aw,AQ,Ak,Am,Aq,A0]);},allowsTogglingAutoSearch:function X(){return !this.isRecursiveAttributeSelector()&&At.call(this,[Am]);},allowsSameSizeItems:function S(){return At.call(this,[AK,Ah,AQ,Ak])&&!this.isRecursiveAttributeSelector();},supportsSetTarget:function AR(){var BJ=this.defn;return this.isAttrElemListSelector()||(BJ.srct===A9||BJ.srcst===G);},supportSelectionColor:function u(){return At.call(this,[A0,Ak]);}});mstrmojo.DocSelector.UC_ON_DS=BI;mstrmojo.DocSelector.STYLES={PULLDOWN:Aw,SCROLLER:Aq,LIST:A0,RADIO:Ah,CHECKBOX:AK,BUTTON:AQ,LINK:Ak,METRIC_SLIDER:AE,METRIC_QUAL:Af,SEARCH_BOX:Am,TEXT_BOX:j,ATTR_QUAL:B,VISUALIZATION:l};mstrmojo.DocSelector.DATAPARAMS={CESREADY:"cesReady",ELMSREADY:"elmsReady",ELMSREQUEST:"elemsRequest",METRICVALUES:"metricValues",CSREADY:"csReady",DISABLED:"disabled"};var C=mstrmojo.DocSelector.DATAPARAMS;}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.boxmodel","mstrmojo.Model","mstrmojo.VisUtility","mstrmojo.elementHelper","mstrmojo._CanProxyCallback","mstrmojo.EnumRWUnitType","mstrmojo.models.template.DataInterface","mstrmojo.StringBuffer","mstrmojo.EnumReadystate","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.vi.viz.EnumWidgetTypes","mstrmojo.DocSelector","mstrmojo.MetricSelectorUtility","mstrmojo.UUID","mstrmojo.ExpressVisList","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.vi.models.VIComponentMap");var BF=mstrmojo.EnumRWUnitType,P=mstrmojo.EnumReadystate,a=mstrmojo.hash,BY=a.forEach,BW=mstrmojo.func.wrapMethods,BR=mstrmojo.Obj.free,R=mstrmojo.array,Ah=mstrmojo.boxmodel,D=mstrmojo.mixin,A2=mstrmojo.VisUtility,l=mstrmojo.elementHelper,BT=mstrmojo.MetricSelectorUtility,Ab=mstrmojo.UUID,Ax=mstrmojo.vi.viz.EnumVizStyles,Bg=mstrmojo.vi.viz.EnumWidgetTypes,C=mstrmojo.DocSelector.DATAPARAMS,p="\u001E";var H={},d={},Bc="76CB9F3E366345DF89811386CBAA82CB",Au=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_STYLE.DEFAULT,S=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807],K=mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK,Ai={ESRIMapVisualizationStyle:"com.microstrategy.web.vf.viewer.EsriMapApplicationViewer",GoogleMapVisualizationStyle:"com.microstrategy.web.vf.viewer.GoogleMapApplicationViewer",MapboxVisualizationStyle:"com.microstrategy.web.vf.viewer.MapboxApplicationViewer",KPICardVisualizationStyle:"com.microstrategy.web.vf.viewer.KPICardApplicationViewer"},u="com.microstrategy.web.vf.viewer.CustomVisApplicationViewer";mstrmojo.MultiRWUnitFormatEventsType=null;var Aj={isObservable:function(Bk){var Bj=Bk&&Bk.t;if((!Bj&&Bj!==BF.LAYOUT)||!this.hasOwnProperty(Bj)||Bk.scriptClass){return false;}return(Bj!==BF.SUBSECTION||!Bk.dt);},makeObservable:function(Bj){var Bk=Bj.audibles=this[Bj.t]||{};if(Bk.hasOwnProperty("readyState")){Bj.readyState=P.IDLE;}return new mstrmojo.Model(Bj);}};Aj[BF.PANELSTACK]={"*":false,selKey:true,readyState:true};Aj[BF.GRID]={"*":false,readyState:true,ds:true};Aj[BF.GRAPH]={"*":false,readyState:true,ds:true};Aj[BF.GRIDGRAPH]={"*":false,qsm:true,ds:true};Aj[BF.SUBSECTION]={"*":false,resize:true,adjustSize:true};Aj[BF.VISUALIZATION]={"*":false,ds:true};Aj[BF.SELECTOR]={"*":false,cek:true,ds:true,readyState:true};Aj[BF.MOJOVISUALIZATION]={"*":false,ds:true};Aj[BF.LAYOUT]={"*":false,readyState:true};var BA={};function BI(Bj){return BA[Bj]||BA["*"];}BA["*"]={update:function AE(Bk,Bl,Bj,Bm){a.copy(Bj,Bl);if(Bj&&!Bj.ck){delete Bl.ck;}if(Bj&&!Bj.fs){delete Bl.fs;}}};BA[BF.PANEL]=D({update:function AE(Bk,Bl,Bj,Bm){delete Bl.layoutXML;if(Bl.isNavigation){delete Bl.exp;}this._super(Bk,Bl,Bj);}},BA["*"]);function z(Bo,Bp){var Bk=Bo&&Bo.layoutMap&&Bo.layoutMap[Bp];if(Bk){if(!Bk.t){Bk.t=BF.LAYOUT;}if(Aj.isObservable(Bk)){Bk=Bo.layoutMap[Bp]=this.addDisposable(Aj.makeObservable(Bk));}return Bk;}var Bj=Bo&&Bo.layouts,Bn=(Bj&&Bj.length)||0,Bm;for(Bm=0;Bm<Bn;Bm++){if(Bj[Bm].k===Bp){var Bl=Bj[Bm];if(!Bl.t){Bl.t=BF.LAYOUT;}if(Aj.isObservable(Bl)){Bj[Bm]=this.addDisposable(Aj.makeObservable(Bl));}return Bj[Bm];}}return null;}function AS(Bm,Bo,Bl,Bk){var Bj=z.call(this,Bm,Bo);if(Bl===Bo){Bj._lkz=Bo;return Bj;}if(Bj){var Bn=Bj.units[Bl];if(Bn){if(parseInt(Bn.t,10)===BF.GRIDGRAPH){if(!Bj.units[Bl+"_0"]){Bj.units[Bl+"_0"]={ck:Bn.ck,fmts:Bn.fmts.gd,txi:Bn.txi,t:BF.GRID};Bj.units[Bl+"_1"]={ck:Bn.ck,fmts:Bn.fmts.gp,t:BF.GRAPH};}}if(!Bk&&Aj.isObservable(Bn)){Bn=Bj.units[Bl]=Aj.makeObservable(Bn);this.disposables.push(Bn);}Bn._lkz=Bo;}}return Bj&&Bj.units[Bl];}function Ap(Bn,Bm,Bl,Bj){var Bk=this.getChildren(Bn,Bm,0);return(mstrApp.isMobile?(R.filter(Bk,function(Bq){var Bo=Bl&&Bl.indexOf(Bq.defn.t),Bp=Bq.defn.dk;return Bj?(Bo>-1&&Bp===-1):(Bo<0||Bp!==-1);})):(Bj?[]:Bk));}var M=function(Bj,Bk){var Bl=new mstrmojo.StringBuffer();if(Bk){Bl.append("*l"+Bk);}Bl.append("*k"+Bj.k);if(Bj.hasOwnProperty("wid")){Bl.append("*x"+Bj.wid);}Bl.append("*t"+this.buildTime);return Bl.toString();};function Ad(Bl){var Bk,Bj,Bo=this.delta,Bm=this.pendingUpdate=this.pendingUpdate||{},Bn=[];if(!a.isEmpty(Bo)){Bn.push("<updates>");for(Bk in Bo){if(Bo.hasOwnProperty(Bk)){Bj=Bo[Bk];Bn.push(Bj.getUpdates());}}Bm[Bl]=Bo;this.delta={};Bn.push("</updates>");}return Bn.join("");}function Be(Bo,Bk){var Bn;if(Bo){var Bj=R.isArray(Bo)?Bo:Bo.split(Bk||p),Bm=Bj.length,Bl;for(Bl=0;Bl<Bm;Bl++){Bn=Bn||{};Bn[Bj[Bl]]=AS.call(this,this.defn,this.currlaykey,Bj[Bl]);}}return Bn;}function AH(Bj,Bk){return mstrmojo.all[M.call(this,{k:Bj,wid:Bk},this.currlaykey)];}function BB(Bk,Bj){var Bl=this.getLayoutUnitDefn(Bk,Bj);return(Bl&&Bl.t===BF.PANELSTACK&&Bl.ifw);}function BD(Bk,Bj){return !Bj||(Bk.wid===Bj);}function x(Bn,Bv){var Bq=this,Bw=Bq.getSliceCallback(Bv),Bl=Bw.shared,Bx=Bv.tks,Bk=Bv.eid,Bt=Bq.getDataService();if(!Bx){return ;}var Bs=AS.call(Bq,Bq.defn,Bq.currlaykey,Bk);if(!Bs){return ;}var Bp=Bk,Br=Bl.tgtDefs[Bx],Bj=function(){Br.set("selKey",Bk);},Bm;Br.newSelKey=Bk;if(Bs.l){var Bo=Bs.dirtyKeys;if(!!Bo){Bp=a.keyarray(Bo).join(",");Bl.orignalTargetDefs=Bl.tgtDefs=Be.call(Bq,Bp,",");Bm=function(){Bj();BY(Bl.dataCacheUpdate.upd,function(By,Bz){var B0=mstrmojo.all[Bz];if(B0&&B0.setDirty){B0.setDirty(false);}});};}else{if(Bv.skipServerCall){Bj();return ;}Bt.requestPanelChangeDeferred(Bn,Bk,null,false,false,Bq.newCallback({method:"slice",success:Bj}));return ;}}else{Bm=function(){Bj();Bs.l=true;};}var Bu=Bw.success;Bw.success=function(Bz){if(!Bq.checkStatus(Bz)){return ;}Bq.updateDefnCache(Bz.defn,[Bk]);Bu(Bz);Bm();var By=AH.call(Bq,Bv.tks,0);if(By){By.clearDirtyChild(Bk);}};Bt.requestPanelChangeDeferred(Bn,Bk,Bp,true,!Bv.hasLoader,Bw);}function Z(Bj,Bk){if(Bk[C.ELMSREADY]){Bj[C.ELMSREADY]=Bk[C.ELMSREADY];Bj.elms=Bk.elms;}if(Bk[C.CESREADY]){Bj[C.CESREADY]=Bk[C.CESREADY];Bj.ces=Bk.ces;}if(Bk[C.ELMSREQUEST]){Bj[C.ELMSREQUEST]=Bk[C.ELMSREQUEST];}if(Bk[C.METRICVALUES]){BT.restoreMetricSelectorProps(Bj,Bk);Bj[C.METRICVALUES]=Bk[C.METRICVALUES];}if(Bk[C.CSREADY]){Bj[C.CSREADY]=Bk[C.CSREADY];BT.restoreMetricSelectorSelections(Bj,Bk);}if(Bk[C.DISABLED]){Bj[C.DISABLED]=Bk[C.DISABLED];}}function g(Bk,Bj){if(Bk.defn&&Bk.defn.t>=BF.GRID){mstrmojo.models.template.DataInterface.inflateGridData(Bk.data);}var Bm=Bk.id,Bl=Bj[Bm]&&Bj[Bm].data;if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()&&Bl&&Bk.defn.t===BF.SELECTOR){if(!Bk.data){Bk.data={};}Z(Bk.data,Bl);}Bj[Bk.id]=Bk;return Bk;}function Am(B4,Bt,Bj,Bp){var Bx=this.currlaykey,Bm;if(B4){Bm=B4.defn;Bx=(Bm&&Bm._lkz)||B4.k;}var CF=this.getLayoutDataCache(Bx),B5=(!Bj&&!a.isEmpty(CF)),CB;if(!B4){CB=this.data;}else{var Bs=B4.data||B4;if(B5){CB=CF[M.call(this,Bs,Bx)];CB=(CB&&CB.data)||CB||Bs;}else{CB=Bs;}}if(!!CB.sections){this._buildingLayoutKey=CB.k;}var Bk=CB?this.extractChildren(CB):[],Bz=[];var B8=(Bk&&Bk.length)||0;if(B8){Bm=this.defn;var B1=!B4,Bv=B4?Bx:null,Bo=(B4&&((B4.defn)?B4.defn.t:AS.call(this,Bm,Bv,B4.k).t));var Bl=(Bo===BF.GRIDGRAPH),B9=(Bo===BF.DETAILS),B7,B6;Bk=Bt(Bk);for(B7=0,B6=Bk.length;B7<B6;B7++){var CD=Bk[B7];if(Bl){CD.k=B4.k;CD.wid=B4.data.wid;}var CH=CD.k,Bw=CD.wid,B3=M.call(this,CD,Bv),CE=!B1&&BB.call(this,CH,Bv),CC;if(!B1&&CE&&(!Bj||!this.getInfoWinByKey(CH))){var CA=this.getLayoutUnitDefn(CH),B0=g({data:CD,defn:CA,id:B3,k:CH,p:CB},CF);if(!this.getInfoWinByKey(CH,Bw)){var Bn=this.infoWindows=this.infoWindows||{};Bn[CA.n]=B0;this.addInfoWinByKey(CH,B0);}continue;}else{if(!B1&&CE&&Bj){var Bq=this.getInfoWinByKey(CH,Bw);if(Bq){this.mergeInfoWin(CD,Bq.data,this.getCurrentLayoutKey());}}}if(Bl){B3+="_"+B7;CC=AS.call(this,Bm,Bv,CD.k+"_"+B7);}else{CC=AS.call(this,Bm,Bv||CD.k,CD.k);}if(B9){CC.dt=true;}if(CF===null&&(CC.t===BF.LAYOUT)){CF=this.getLayoutDataCache(CD.k);}var CG;if(CC.t===BF.PANEL&&CF[B3]&&B5){var Br=this.extractChildren(CD)||[],By=this.extractChildren(CF[B3].data)||[],Bu=false;if(Br.length!=By.length){R.forEach(By,function(CJ){var CI=R.find(Br,"k",CJ.k);if(CI>-1){Br[CI]=CJ;Bu=true;}});if(Bu){By.splice(0,By.length);R.forEach(Br,function(CI){By.push(CI);});}}CG=CD;}else{CG=B5?(CF[B3]&&CF[B3].data)||CD:CD;}var B2={k:CD.k,id:B3,defn:CC,data:CG,p:CB};if(!CF[B3]){g(B2,CF);}Bz.push(B2);}}return Bp?{nodes:Bz,total:B8}:Bz;}function Bf(Bp,Bk,Bo){var Bj=Ah.px2Inches,Bl=this.getZoomProps(),Bn=1,Bm=2;if((Bo&Bn)>0){Bp.FormattingPosition={Left:Bj(Bl,Bk.x||0),Top:Bj(Bl,Bk.y||0)};}if((Bo&Bm)>0){Bp.FormattingSize={Height:Bj(Bl,Bk.h||0),Width:Bj(Bl,Bk.w||0)};}}function AL(Bk){function Bj(Bm,Bl){return Bm<Bl?-1:(Bm>Bl?1:0);}Bk.sort(function(Bm,Bl){var Bn=Bj(Bm.levelID,Bl.levelID);return Bn!==0?Bn:Bj(Bm.elemID,Bl.elemID);});return Bk;}function Bb(Bj,Bk){return Bj.map(function(Bl){return Bl[Bk];}).join(p);}function O(Bj){return Bb(Bj,"levelID");}function Bd(Bj){return Bb(Bj,"elemID");}function Ae(Bk){if(Bk){d={};}H={};var Bj=this.defn&&this.defn.epm;if(Bj){Bj.forEach(function(Bl){Bl.epmv.forEach(function(Bm){var Bo=AL(Bm.k.chn.map(function(Br){var Bq=Br.emt!==2;return{levelID:Bq?Br.at.did:"-1",elemID:Bq?Br.ei:Br.mt.did};})),Bp=O(Bo),Bn=Bd(Bo);if(!H[Bp]){H[Bp]={};}H[Bp][Bn]=JSON.parse(Bm.v.vv);});});}}function o(Bj){if(Bj){Bj=mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters(Bj);}return Bj;}function AW(){var Bk=this.data&&this.data.layouts,Bj=Bk[R.find(Bk,"k",this.getCurrentLayoutKey())],Bm=Bj&&Bj.gbys&&Bj.gbys.groupbys,Bl=false;R.forEach(Bm,function(Bn){if(Bn.unit&&Bn.unit.elms&&Bn.unit.elms[Bn.unit.idx].v==="u;"){Bl=true;return false;}});return Bl;}function BM(Bj,Bl,Bk){Bj=Bj.replace(Bl,function(Bm,Bn){if(Bn==="&"){return(Bk+"&");}return Bk;});if(mstrmojo.dom.isIE){Bj+="&cb"+mstrmojo.now()+"=1";}return Bj;}mstrmojo.DocModel=mstrmojo.declare(mstrmojo.Model,[mstrmojo._CanProxyCallback],{scriptClass:"mstrmojo.DocModel",audibles:{"*":false,data:true,tsp:true},features:null,dataCache:null,searchElemsCache:null,controller:null,sdp:null,dpi:96,keySeed:0,currlaykey:"",init:function Ar(Bj){this._super(Bj);if(!this.features){this.features=new mstrmojo.Model();this.disposables.push(this.features);}this.ondefnChange();Ae.call(this);this.buildTime=mstrmojo.now();},hasFeatures:function Ao(Bn){var Bl=this.features;if(!Bl){return false;}var Bk=Bn.split(","),Bj=Bk.length,Bm;for(Bm=0;Bm<Bj;Bm++){var Bo=Bk[Bm],Bp=Bo.match(/^!/);if(Bp){Bo=Bo.replace("!","");}if(!!Bp===!!Bl[Bo]){return false;}}return true;},makeObservable:function Aq(Bj){return Aj.makeObservable(Bj);},checkStatus:function BS(Bj){if(parseInt(Bj.status,10)===4){Bj.message=mstrmojo.desc(5781,"Request timed out.");mstrmojo.err(Bj);return false;}return true;},getDataService:function A8(){var Bk=this.dataService;if(!Bk){var Bj={rwb:this.bs,msgId:this.mid,stid:this.stid,cbKey:this.cbKey,model:this};if(mstrApp.modelFactory){Bk=mstrApp.modelFactory.newDataService("Document",Bj);}else{Bk=mstrApp.viewFactory.newDocDataService(Bj);}this.dataService=Bk;this.disposables.push(Bk);}return Bk;},getNextKey:function BG(){return"W"+(mstrmojo.resolveFeature("guid-as-node-identifier")?Ab.create():this.keySeed++);},resetKeySeed:function E(Bj){this.keySeed=Bj;},getWidgetId:function L(Bj,Bk){return M.call(this,Bj,Bk||this.getCurrentLayoutKey());},getUIState:function b(){return{};},ondefnChange:function AN(){var Bo=this.defn,Bl=Bo&&Bo.layouts,Bk={};if(Bo){Bo.layoutMap=Bk;var Bn=(Bl&&Bl.length)||0,Bm;for(Bm=0;Bm<Bn;Bm++){var Bj=Bl[Bm];Bk[Bj.k]=Bj;}}},extractChildren:function AO(Bj){return Bj&&(Bj.sections||Bj.subsections||Bj.objects||Bj.panels||Bj.layouts||Bj.children);},getChildren:function V(Bl,Bk,Bo,Bj,Bn){Bo=Bo||0;var Bm=function(Bp){return Bp.slice(Bo,Bo+(Bj||Bp.length));};return Am.call(this,Bl,Bm,Bk,Bn);},getChildrenByKey:function Al(Bl,Bk,Bj,Bn){var Bm=function(Bp){var Bo=[],Bq;R.forEach(Bj,function(Br){Bq=R.find(Bp,"k",Br);if(Bq!==-1){Bo.push(Bp[Bq]);}});return Bo;};return Am.call(this,Bl,Bm,Bk,Bn);},getTargetDefn:function Ak(Bj){return Be.call(this,Bj);},getUnitDefinitions:function(Bk,Bj){return Be.call(this,Bk,Bj);},getUnitInstance:function AJ(Bj,Bk){return mstrmojo.all[M.call(this,{k:Bj,wid:Bk},this.currlaykey)];},getFirstUnitInstanceByName:function AP(Bm){var Bj=z.call(this,this.defn,this.currlaykey);if(Bj){var Bk=Bj.units,Bl;for(Bl in Bk){var Bn=Bk[Bl];if(Bn.n===Bm){return this.getUnitInstance(Bl,1);}}}return null;},getLayoutUnitDefn:function B(Bk,Bj){return AS.call(this,this.defn,Bj||this.currlaykey,Bk);},mergeInfoWin:function N(Bn,Bm,Bj){if(Bn.k&&Bm.k&&Bn.k===Bm.k){var Bl=this;var Bk=this.getLayoutUnitDefn(Bn.k,Bj);if(Bk&&Bk.t===BF.PANELSTACK){R.forEach(Bm.panels,function(Bp){var Bo=R.filterOne(Bn.panels,function(Bq){return Bq.k&&Bq.k===Bp.k;});if(!Bo){Bn.panels.push(Bp);}else{N.call(Bl,Bo,Bp,Bj);}});}else{R.forEach(Bm.objects,function(Bp){var Bo=R.filterOne(Bn.objects,function(Bq){return Bq.k&&Bq.k===Bp.k;});if(!Bo){if(Bn.objects){Bn.objects.push(Bp);}}else{N.call(Bl,Bo,Bp,Bj);}});}}},getRawLayoutUnitDefn:function e(Bk,Bl,Bj){return AS.call(this,Bl||this.defn,Bj||this.currlaykey,Bk,true);},getSelectedKey:function BN(Bj){return(!Bj&&this.currlaykey)||null;},getCurrentLayoutKey:function AI(){return this.currlaykey;},getLayoutKeyByUnitKey:function I(Bn){var Bl=this.defn,Bm=Bl&&Bl.layouts,Bj,Bk=null;R.forEach(Bm,function(Bo){Bj=Bo.units;if(Bj[Bn]&&(!Bj[Bn]._isDeleted)){Bk=Bo.k;return !Bj[Bn];}});return Bk;},getLayoutDefn:function Aw(Bj){var Bk=this.defn,Bl=Bk&&Bk.layouts;return Bl&&Bl[R.find(Bl,"k",Bj)];},getCurrentLayoutDef:function A1(){return this.getLayoutDefn(this.getCurrentLayoutKey());},replaceLayout:function BV(Br,Bk,Bs){var Bo=this.defn,Bn=this.data,Bl=Bk&&Bk.defn,Bj=Bk&&Bk.data,Bt=this.dataCache;if(Bt&&Bt[Br]){Bt[Br]={};}var Bq=(Bn&&Bn.layouts)||(Bo&&Bo.layouts),Bm,Bp=false;for(Bm=(Bq&&Bq.length-1)||0;Bm>=0;Bm--){if(Bq[Bm].k===Br){break;}}if(Bs&&Bm<0){Bm=R.find(Bj.layouts||Bl.layouts,"k",Br);Bp=true;}this.bs=Bk.bs;if(Bj){if(Bp){R.insert(Bn.layouts,Bm,[Bj.layouts[Bm]]);}else{Bn.layouts[Bm]=Bj.layouts[Bm];}Bn.elems=Bj.elems;}if(Bl){if(Bp){R.insert(Bo.layouts,Bm,[Bl.layouts[Bm]]);}else{Bo.layouts[Bm]=Bl.layouts[Bm];}this.ondefnChange();}},loadLayout:function k(Bj,Bl,Bk){this.replaceLayout(Bj.currlaykey,Bj);this.raiseEvent({name:"rebuildLayout",unloadCache:!!Bl,restoreIW:!!Bk});},getLayoutDataNode:function Bi(Bk){var Bj=this.data&&this.data.layouts;return R.filterOne(Bj,function(Bl){return Bl.k===Bk;});},getLayoutDataCache:function AF(Bk){if(!Bk){return null;}var Bj=this.dataCache;if(!Bj){Bj=this.dataCache={};}if(!Bj[Bk]){Bj[Bk]={};}return Bj[Bk];},saveRW:function BJ(Bk,Bm){var Bl=mstrmojo.desc,Bj=this.getDataService();Bj.saveRW({objName:Bk||this.n,folderID:this.pfid,saveAsFlags:1},Bm||{success:function(Bn){mstrmojo.alert(Bl(3819,"Document Saved")+": "+Bn.n);}});},saveAsRW:function Bh(Bn,Bm){var Bl=this,Bk=!!(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig&&mstrConfig.resolveOnly),Bj=Bl.prompt_option;switch(Bj){case 0:Bj=3;break;case 4:Bj=1;break;default:Bj=2;}var Bo=mstrmojo.hash.copy(Bn,{evt:3102,applyChanges:false,executionMode:2,parentFolderID:mstrApp.saveFolderId||Bl.sfid||Bl.pfid,saveFromDesignMode:false,saveAsReportSaveAsFlags:Bj,resolveOnly:Bk,rwb:Bl.bs});if(Bm){Bo.target=Bm;Bo.saveAsOrigin=13;}mstrmojo.form.send(Bo,null,"post");},getDocPropsActions:function Aa(Bj){var Bk={act:"setDocumentProperties",props:Bj};a.forEach(Bj.RWDocumentProperties,function(Bm,Bl,Bn){Bn[Bl]=String(Bm);});return Bk;},saveDocProps:function AZ(Bj,Bl,Bm,Bq){var Bp=this.getDataService(),Bo=Bm?null:mstrmojo.DocDataService.RAPID_EXEC,Bk=mstrmojo.DocDataService.REQUEST_DEFN_DATA,Bn=[this.getDocPropsActions(Bj)];if(Bl){this.controller.cmdMgr.execute({execute:function(){this.submit(Bn,Bq||{},a.copy(Bk,a.copy(Bo,{})));},urInfo:Bl});}else{Bp.submitUpdates(Bn,Bq||{},a.copy(Bk,a.copy(Bo,{preserveUndo:true})));}},partialUpdate:function AU(Bo,Bj,Bm,Bl,Bk){if(Bm){this.updateDefnCache(Bm,Bl,Bk);}if(Bo){if(mstrApp){mstrApp.isPartialUpdate=true;}var Bn=this.updateDataCache(Bo,Bj,undefined,Bk);this.raiseEvent({name:"partialUpdate",tree:Bo,ids:Bn});if(mstrApp){mstrApp.isPartialUpdate=false;}return Bn;}},refreshDefinition:function j(Bm,Bl,Bk,Bn){var Bj=this.getLayoutUnitDefn(Bm,Bk||this.getCurrentLayoutKey());if(!Bj){return ;}BI(Bj.t).update(this,Bj,Bl,Bn);},loadPartialData:function AR(Bo,Bk){var Bm={};Bm[Bk]=AS.call(this,this.defn,this.currlaykey,Bk);var Bl=this.updateDataCache(Bo,Bm),Bj=this.getLayoutDataCache(this.getCurrentLayoutKey()),Bn=this;R.forEach(Bo.layouts,function(Bp){var Bq=Bp&&Bp.xtabStyles;if(Bq){Bn.raiseEvent({name:"updateStyles",key:Bp.k,updatedStyles:Bq});}});BY(Bl,function(Bq,Bp){if(Bp==="upd"){BY(Bq,function(Bs,Bt){var Br=mstrmojo.all[Bt];if(Br&&Br.update){Br.update(Bj[Bt]);}});}});},updateDefnCache:function A(Bk,Bq,Bn){var Bt=this.currlaykey,Bm=z.call(this,Bk,Bt),Bv=z.call(this,this.defn,Bt),Br=function(Bw,Bx){var By;for(By in Bx){if(Bw[By]===undefined){Bw[By]=Bx[By];}}},Bu=Bm&&Bm.units,Bs=Bv&&Bv.units,Bl=Bm&&Bm.cgbMap,Bj=Bv&&Bv.cgbMap,Bo=Bn&&o(Bn).defn,Bp=this;R.forEach(Bq,function(Bw){Bp.refreshDefinition(Bw,Bu&&Bu[Bw],null,Bo&&Bo[Bw]);});if(Bu){Br(Bs,Bu);}if(Bl){Br(Bj,Bl);this.raiseEvent({name:"CGBMapChange",cgbMap:Bj});}},deleteDataCache:function U(Bk){var Bj=this.getLayoutDataCache(this.getCurrentLayoutKey());if(Bj[Bk]){delete Bj[Bk];}},setDataReady:function Ag(Bs,Bp,Bk,Bq,Bj,Bt){var Bn=this.extractChildren(this.data),Bl=this.getLayoutDataCache(this.getCurrentLayoutKey()),Bo=this,Br=false;if(!Bn){return ;}function Bm(Bu){if(!Bu){return ;}R.forEach(Bu,function(Bv){if(Bv.k===Bs){if(Bk){Bv[Bk]=Bq;}if(R.isArray(Bj)&&Bt){R.forEach(Bj,function(Bx,Bw){Bv[Bx]=Bt[Bw];});}else{if(Bj){Bv[Bj]=Bt;}}Br=true;return false;}else{if(!Br){Bm(Bo.extractChildren(Bv));}}});}Bm(Bn);if(!Bl[Bp]){Bl[Bp]={};}Bl[Bp][Bk]=Bq;},updateDataCache:function As(Bu,Bt,Bj,Bn){var Bl=this.getLayoutDataCache(this.getCurrentLayoutKey()),Bk=Bn&&o(Bn).data,Bv={ifws:{},upd:{},tgts:{},def:{},secs:{}},Bp=this,Bs=function(By,Bw){var Bz=Bp.extractChildren(By.data);if(Bz){return ;}var B1=Bp.extractChildren(Bw);for(var Bx in (B1||[])){if(!!B1[Bx]){var B0=B1[Bx];if(B0.k===By.k){if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()&&B1[Bx]&&By.defn&&By.defn.t===BF.SELECTOR){if(!By.data){By.data={};}Z(By.data,B1[Bx]);}B1[Bx]=By.data;}}}},Bo=function(B2,Bx,Bw){var B1=Bl[B2];if(Bk){var B0=mstrmojo.all[B2];if(B0){var By=B1.k,Bz=Bk[By];if(Bz){if(!a.isEmpty(Bz.exclude)){a.copy(Bx.data,B1.data);}else{Bx.data=a.copyProps(Bz.serialized.split(";"),Bx.data,B1.data);}}}}g(Bx,Bl);Bs(Bx,Bw);};function Br(CC,CH,Bx,B0){var B2=false,B9=this.getChildren(CC,true),B7;if(!B9.length){return ;}if(Bx){B7=mstrmojo.all[CC.id];B2=!CC.id||!!B7;}var B1=CC.defn,By=CC.data,CE;if(B1&&B1.t===BF.PANELSTACK&&B1.od){CE=By.selKey;}var CD,B6,CJ=function(CK){return(CK.k===B6);};for(CD in B9){var CA=B9[CD],CB=CA.id,Bz=null,CF;B6=CA.k;if(CH){var B3=this.extractChildren(CH);if(B3){CF=R.filterOne(B3,CJ);if(!CF){B3.push(a.clone(CA.data));}}else{a.copy(a.clone(CC.data),CH);}}if(mstrmojo.all[CB]){B2=true;}if(Bt.hasOwnProperty(B6)){if(BB.call(this,B6)&&BD(CA.data,Bj)){Bo(CB,CA,CH);var CI=this.getInfoWinByKey(B6);if(!B0&&CI){Bv.ifws[B6]=CI.id;}}Bz=B6;if(B2){if(CE&&CE!==B6){continue;}if(!B0){Bv.tgts[CB]=true;}var Bw=B7&&B7.defn,CG=Bw&&Bw.t,B5=Bw&&Bw.ck;if(CG===BF.SUBSECTION&&(B5&&B5.hasOwnProperty(B6))){Bv.secs[B7.id]=true;}}}if((B0||Bz)&&(!CE||CE===B6)){Bo(CB,CA,CH);Bv.def[B6]=true;if(B2){Bv.upd[CB]=true;}}var B4=mstrmojo.all[CB],B1=B4?A2.getPropertyByPath(B4,"node.defn"):null;if(mstrApp.isInVFConfigMode&&B1&&B1.iifp){var B8=this.adjustNodeId(CA.id);if(mstrmojo.all[B8]){CA.id=B8;Bo(B8,CA,CH);CA.id=this.restoreNodeId(B8);Bv.upd[B8]=true;Bv.tgts[B8]=true;}else{if((B1.t===BF.GRID||B1.t===BF.GRAPH)&&B0&&Bt[mstrmojo.all[CA.id].k]){Bv.upd[CA.id]=true;Bv.tgts[CA.id]=true;}}}Br.call(this,CA,CF,B2,B0||Bz);}}if(Bu&&Bu.layouts&&Bt){var Bm=R.filterOne(Bu.layouts,function(Bw){return(Bw.loaded);}),Bq=this.data.layouts;if(Bm){Br.call(this,Bm,Bq[R.find(Bq,"k",Bm.k)],true);}}return Bv;},getDimensionAndPositionAction:function W(Bk,Bj,Bm){var Bl=this.getUnitFormatAction(Bk,null,null,Bm);Bf.call(this,Bl.format,Bj,3);return Bl;},getDimensionAction:function W(Bk,Bj,Bm){var Bl=this.getUnitFormatAction(Bk,null,null,Bm);Bf.call(this,Bl.format,Bj,2);return Bl;},getUnitFormatAction:function t(Br,Bk,Bq,Bm){var Bo=Br.defn,Bs=(Bo&&Bo.t)||1,Bp=Br.k,Bn=[Bp];var Bj={act:"format",unitKey:Bp,unitType:Bs===115?521:Bs,formatType:Bk||1,format:Bq||{}};if(!Bm){Bj.partialRetrieval={nodes:Bn};}if(Bs===BF.SELECTOR){var Bt=Bo.ck;Bj.keyContext=Bt;Bn[0]=this.getDataService().getNodeKeyFromKeyContext(Bt);}if(Bs===BF.TEXTFIELD||Bs===BF.IMAGE||Bs===BF.HTMLCONTAINER){var Bl=Br.nk||Bo.fgk;Bj.fieldKey=Bp;Bj.nodeKey=Bl;Bj.keyContext=Bs+p+Bl+p+Bp;Bn[0]=Bl;}return Bj;},updateUnitFormat:function BE(Bk,Bm,Bn,Bo,Bj){var Bl=this.getUnitFormatAction(Bk,Bm,Bn);this.getDataService().submitUpdates(Bl,Bo,Bj);},selectPanelDeferred:function(Bo,Bn,Bm,Bl,Bk,Bj){x.call(this,Bo,{type:3,tks:Bn,eid:Bm,sid:Bl||1,ck:Bn,hasLoader:Bk,skipServerCall:Bj});},getSearchElemsCache:function BQ(){var Bj=this.searchElemsCache;if(!Bj){Bj=this.searchElemsCache={};}return Bj;},getCGBMap:function A5(){var Bj=z.call(this,this.defn,this.currlaykey);return Bj&&Bj.cgbMap;},getSliceCallback:function AY(Bj){var Bm=this,Bn={};Bn.dataCacheUpdate=null;Bn.tgtDefs=Bj.tks?Be.call(this,Bj.tks):null;Bn.orignalTargetDefs=Bn.tgtDefs;var Bl=Bn.tgtDefs,Bk=function(Bq){var Br=Bl;if(Bj.disablePU){Br=Be.call(Bm,Bm.currlaykey);}BY(Br,function(Bs){if(Bs&&Bs.set){Bs.set("readyState",Bq);}});},Bp=this.newCallback({method:"slice",shared:Bn,submission:function(){Bk(P.WAITING);},success:function(Br){if(!Bm.checkStatus(Br)){return ;}if(Bj.disablePU){Bm.loadLayout(Br,Bj.isUConDS,Bj.restoreIW);return ;}if(Br.pukeys){Bn.tgtDefs=Be.call(Bm,Br.pukeys);}Bn.dataCacheUpdate=Bm.updateDataCache(Br.data,Bn.tgtDefs,Bj&&Bj.sid,Br.puFilters);if(typeof Br==="object"){a.copyProps(["bs","exopt","dty"],Br,Bm);}var Bq={name:"partialUpdate",tree:Br.data,ids:Bn.dataCacheUpdate,unloadCache:Bj.isUConDS};if(!mstrmojo.hash.isEmpty(Bq.ids.ifws)){if(Bj&&!Bj.suppressIW&&(Bj.type===BF.GRID||Bj.type===BF.GRAPH)){Bq.anchor=Bj.anchor;}else{Bq.ids.ifws={};}}if(mstrApp){mstrApp.isPartialUpdate=true;}Bm.raiseEvent(Bq);if(mstrApp){mstrApp.isPartialUpdate=false;}},complete:function(){Bk(P.IDLE);}}),Bo={success:function(){BY(Bn.orignalTargetDefs,function(B2,B0){var B1=AH.call(Bm,B0,1);if(!B1){if(!!Bm.sdp&&!!Bm.sdp[B0]){var Bz=Bm.getLayoutDataCache(Bm.getCurrentLayoutKey());var B3=M.call(Bm,{k:B0,wid:1},Bm.getLayoutKeyByUnitKey(B0));Bm.raiseEvent({name:"secondaryDataSliced",key:B0,data:Bz[B3].data});}return ;}if(Bn.dataCacheUpdate&&!Bn.dataCacheUpdate.def.hasOwnProperty(B0)){if(B1.setDirty){B1.setDirty(true);}}else{if(parseInt(B2.t,10)===BF.PANELSTACK){B1.setDirtyChildren();}}});var By=Bj.events||{K0:Bj},Bu;for(Bu in By){var Bq=AH.call(Bm,By[Bu].ctlKey,1);if(Bq&&Bn.dataCacheUpdate&&!Bn.dataCacheUpdate.upd.hasOwnProperty(Bq.id)){var Bx=(Bq.children&&Bq.children[0].selectedIndices)||{},Bt=Bq.node.data,Br=mstrmojo.DocSelector.STYLES,Bs=[];if(Bq.isDynamicAttributeSelector()){Bt.exp=Bq.expr;if(!Bq.expr&&R.find(Bt.elms,"v",l.ELEM_ALL_ID)>=0){Bs.push(l.ELEM_ALL);}}else{if(Bq.style===Br.SEARCH_BOX){var Bw=(Bq.children&&Bq.children[0].items)||[];R.forEach(Bw,function(Bz){Bs.push(a.clone(Bz));});}else{a.forEach(Bx,function(B0,Bz){if(B0){Bs.push(Bt.elms[Bz]);}});}}var Bv=R.find(Bs,"v",l.ELEM_ALL_ID);if(Bv>-1){Bs=[Bs[Bv]];}Bt.ces=Bs;Bq.selIdx=Bx;}}}};if(Bj.isUConDS||(parseInt(Bj.type,10)===BF.GRAPH&&Bj.tty===1)){Bp.success=function(Bq){Bm.controller.setData(Bq,true);};return Bp;}if((parseInt(Bj.type,10)===3)){return Bp;}return BW(Bp,Bo);},slice:function h(Bj){var Bk=this.getDataService(),Bl=Bk.newUpdateWithoutCmd();this.sliceDeferred(Bl,Bj);if(Bl.actions&&Bl.actions.length>0){Bk.addSuppressData(Bl.extras);Bl.submit();}},sliceDeferred:function(Br,Bu){var Bp={};try{if(!Bu||(!mstrmojo.dom.isAndroid&&!Bu.tks&&!Bu.multiSelect&&(Bu.type===3||(Bu.type===BF.GRAPH&&parseInt(Bu.tty,10)!==1)))){return Bp;}var Bm=this.getSliceCallback(Bu),B0=this,Bv=this.getDataService(),Bt=B0.controller.view;var B1=parseInt(Bu.type,10);if(B1===3){x.call(B0,Br,Bu);return ;}if(Bu.multiSelect){if(Bu.selectorObjects.length>0){Bv.setMultiDocSelectorElements(Bu.selectorObjects,Bu.multiSelect,Bm);}return ;}if(B1===BF.GRAPH){Br.add(Bv.getGraphSelectionAction(Bu.src,Bu.cks,Bu.sid,Bu.x,Bu.y,(Bu.tty===1)),Bm);if(!!Bu.showLoadingIcon){Br.addExtras({config:mstrmojo.DocDataService.PROGRESS_CONFIG});}return ;}var Bj=Bu.events||{K0:Bu},Bs=[],Bz,Bn={config:mstrmojo.DocDataService.PROGRESS_CONFIG},By=Bn.params={},Bw,Bk={},Bl=function(B3,B2){if(B3){Bk[B2]=B3.visName;}};for(Bw in Bj){Bu=Bj[Bw];if(!Bu){break;}if(Bu.hasOwnProperty("eid")){if(Bu.isUConDS){Bu.disablePU=true;}if(AW.call(this)){Bu.disablePU=true;Bu.restoreIW=true;}Bz=Bv.getSelectorElementsAction(Bu);if(B0.sdp){Bk={};BY(B0.sdp,Bl);By.sdpKeys=JSON.stringify(Bk);}if(Bu.disablePU){By.disablePU=true;}}else{if(Bu.fromGM){Bz=Bv.getSelectorFromGMAction(Bu);}else{if(parseInt(Bu.srct,10)===4||Bu.fid){if(Bu.fid&&AW.call(this)){Bu.disablePU=true;}Bz=Bv.getSelectorExpressionAction(Bu);}else{if(Bu.unset){Bz=Bv.getUnsetSelectorAction(Bu);}else{if(Bu.expr){Bz=Bv.getAttributeSelectorExpressionAction(Bu);}else{if(parseInt(Bu.ct,10)===6){Bz=Bv.getMultiUnitSelectorAction(Bu);B0.hasUnitSelector=Bu.selections&&Bu.selections.hasElements;}else{Bz=Bv.getSelectorIncludeAction(Bu);}}}}}}Bs.push(Bz);}Br.add(Bs,Bm,Bn);var Bq=function(B2){B2.extras.style={params:{treesToRender:3}};B2.callback=BW({success:function B3(B4){B0.partialUpdate(B4.data,B0.getUnitDefinitions(Bu.cgb),B4.defn,Bu.cgb,B4.puFilters);}},B2.callback);return B2;};if(Bu.isNavigation){var Bo=(Bt._layouts||[]).filter(function(B2){return B2.k===Bu.layoutKey;})[0];if(Bo){if(!Bt.showLayout(Bo,null,Br,Bu.panelKey)){Br=Bq(Br);Bt.showPanel(Bu.panelKey,Bu.layoutKey,Br);}}else{Bt.loadDocLayout({layoutKey:Bu.layoutKey,panelKey:Bu.panelKey},null,Br);}}else{Br=Bq(Br);}}catch(Bx){mstrmojo.err(Bx);}},getInfoWindow:function AK(Bk){var Bj=this.infoWindows;return Bj&&Bj[Bk];},getTargetInfoWin:function(Bk){var Bj=[],Bl=Be.call(this,Bk);if(Bl){var Bm;for(Bm in Bl){if(Bl[Bm]&&Bl[Bm].ifw){Bj.push(Bm);}}}return Bj;},addInfoWinByKey:function AT(Bk,Bj){if(!this.infoWinByKey){this.infoWinByKey={};}if(!this.infoWinByKey[Bk]){this.infoWinByKey[Bk]=[Bj];return ;}if(R.find(this.infoWinByKey[Bk],"id",Bj.id)===-1){this.infoWinByKey[Bk].push(Bj);}},getInfoWinByKey:function Ba(Bl,Bj){var Bm=null,Bk=this.getCurrentLayoutKey();if(this.infoWinByKey&&this.infoWinByKey[Bl]){R.forEach(this.infoWinByKey[Bl],function(Bn){var Bo=Bn&&Bn.id;if(Bo&&Bo.indexOf(Bl)>-1&&Bo.indexOf(Bk)>-1){if(!Bj||Bo.indexOf("*x"+Bj)>-1){Bm=Bn;return false;}}});}return Bm;},showInfoWin:function AG(Bn,Bm,Bk,Bo,Bp,Bj){var Bl=this.getInfoWinByKey(Bn,Bj);if(Bl===null){return ;}this.raiseEvent({name:"showInfoWin",psId:Bl.id,psKey:Bl.k,anchor:Bm,anchorOrientation:Bk,anchorPosition:Bp,invalidate:Bo});},getSelectedXtabStyles:function AD(Bl){var Bk=Bl||this.currlaykey;var Bn={};var Bj=this.data&&this.data.layouts,Bm;for(Bm in Bj){if(Bj[Bm].k===Bk){Bn=Bj[Bm].xtabStyles;break;}}return Bn;},downloadGridData:function G(Bo,Bp){var Bm=this,Bl=Bo.xtabId,Bk=Bo.memo,Bn=mstrmojo.all[Bl],Bj=this.newCallback({success:function(Bx){function Bq(B1,B3){var B4=Bm.getChildren(B1,true),B2=B4.length,B0;for(B0=0;B0<B2;B0++){var B5=B4[B0];if(B3===B5.id){return B5;}var Bz=Bq(B5,B3);if(Bz){return Bz;}}return null;}var Bu=z.call(Bm,Bx.data,Bm.currlaykey);if(Bu){if(Bm.restoreNodeId){Bl=Bm.restoreNodeId(Bl);}var Bt=Bq(Bu,Bl);if(Bt){mstrmojo.models.template.DataInterface.inflateGridData(Bt.data);if(Bn){Bn.dataDownloaded(Bt,Bk);}}var Bw=Bu.xtabStyles;if(Bw){Bm.raiseEvent({name:"updateStyles",key:Bu.k,updatedStyles:Bw});}}var Bv=AS.call(Bm,Bm.defn,Bm.currlaykey,Bo.nodeKey);if(Bv&&Bv.t===BF.GRIDGRAPH&&Bk.recalculating){var Bs=Bn.parent,By=Bs&&Bs.getGraphWidget();if(By&&Bs.updateGraph){Bs.updateGraph(Bq(Bu,By.id));}}if(Bx.pukeys){var Br=Be.call(Bm,Bx.pukeys);delete Br[Bo.nodeKey];if(!a.isEmpty(Br)){Bm.partialUpdate(Bx.data,Br);}}},failure:Bn.dataDownloadErr||mstrmojo.emptyFn});this.getDataService().downloadGridData(Bo,BW(Bj,Bp));},clearDisposables:function A4(){var Bj=[];R.forEach(this.disposables,function(Bk){if(Bk._lkz){BR(Bk);}else{Bj.push(Bk);}});this.disposables=Bj;},getFixedHeaders:function(Bk,Bj){return Ap.call(this,Bk,Bj,[BF.PAGEHEADER],true);},getFixedFooters:function(Bk,Bj){return Ap.call(this,Bk,Bj,[BF.PAGEFOOTER],true);},getNonFixedSections:function(Bk,Bj){return Ap.call(this,Bk,Bj,[BF.PAGEHEADER,BF.PAGEFOOTER],false);},addAutoWidthID:function AA(Bl){var Bk=this.aws||{},Bj=Bk[this.currlaykey]||[];Bj.push(Bl);Bk[this.currlaykey]=Bj;this.aws=Bk;},getAutoWidthIDs:function Q(){var Bl=this.aws,Bj=this.currlaykey;var Bk=Bl&&Bl[Bj];if(Bk){delete Bl[Bj];}return Bk;},getTransactionUpdates:function AC(Bj){return this.txDiscardTargets?"":Ad.call(this,Bj);},clearTransactionUpdates:function Af(Bj){this.clearTxDeltaUpdate(Bj);},resetTransactionUpdates:function A9(Bj){var Bk=this.pendingUpdate,Bl=this.delta;if(Bk&&Bk[Bj]){BY(Bk[Bj],function(Bm,Bn){if(Bl&&!Bl[Bn]){Bl[Bn]=Bm;}});delete Bk[Bj];}},transactionUpdate:function BP(Bl,Bk){if(!Bl.data){return null;}var Bn;if(Bk&&Bk.tks){Bn=Be.call(this,Bk.tks);}if(Bl.pukeys){Bn=Be.call(this,Bl.pukeys);var Bo;for(Bo in Bn){if(Bn[Bo]&&Bn[Bo].cek){Bn[Bo].cek=null;}}}if(Bl.txrcd){this.txrcd=Bl.txrcd;}else{delete this.txrcd;}var Bm=this.updateDataCache(Bl.data,Bn,Bk&&Bk.sid),Bj={name:"partialUpdate",tree:Bl.data,ids:Bm};if(!a.isEmpty(Bm.ifws)){if(Bk&&Bk.type===BF.GRID){Bj.anchor=Bk.anchor;}else{Bm.ifws={};}}this.raiseEvent(Bj);return Bm;},deltaUpdate:function A7(Bj){var Bk=this.delta;if(!Bk){Bk=this.delta={};}Bk[Bj.id]=Bj;},clearTxDeltaUpdate:function f(Bk){var Bn=this.txDiscardTargets,Bj=!Bn,Bm=this.pendingUpdate,Bl=this;if(!Bj){BY(Bn,function(Bo,Bp){if(Bl.delta&&Bl.delta[Bp]){Bl.delta[Bp].clear();delete Bl.delta[Bp];}});}if(Bm&&Bm[Bk]){BY(Bm[Bk],function(Bo){Bo.clear();});delete this.pendingUpdate[Bk];}},sendTransactionActions:function J(Bk,Bj,Bm){var Bl=this;if(!Bm){Bm={success:function(Bn){Bl.transactionUpdate(Bn);}};}Bl.getDataService().sendTransactionActions({keyContext:Bk,actions:Bj,txrcd:this.txrcd},Bm);},sendTransactionUpdates:function A0(Bj){var Bl=this.getSliceCallback(Bj),Bk=this.getDataService();Bk.submitUpdates([Bk.getUpdateTransactionAction(Bj)],Bl);},addSDP:function BK(Bk,Bj){if(!Bk||!Bj){return ;}if(!this.sdp){this.sdp={};}this.sdp[Bk]={k:Bj.k,visName:Bj.visName};},removeSDP:function BC(Bj){if(!Bj||!this.sdp||!this.sdp[Bj]){return ;}delete this.sdp[Bj];},getUpdateColorMapCallback:function s(){var Bj=this;return{success:function(Bk){Bj.defn.epm=Bk.defn&&Bk.defn.epm;Ae.call(Bj);Bj.raiseEvent({name:"colorMapChanged"});}};},getUpdateThemePaletteCallback:function A6(Bl){var Bm=this,Bj,Bk;if(mstrApp.isInVFConfigMode){mstrApp.requireRestoreVFConfigMode=true;Bj=Bm.getVIMap().getComponent(K);Bk=mstrApp.getRootController();mstrApp.isInVFConfigPage=false;Bk.view.closeInlineDialog();Bm.destroyVisualiztionselector();Bk.restorePanelStatus(Bj);Bk.maskMenuToolbar(false);}return{success:function(Bn){Bm.thm=Bn.thm;Bm.plt=Bn.plt;Bm.defmts=Bn.defmts;Ae.call(Bm,!Bl);Bm.layoutstyle=Bn.layoutstyle;}};},getCurrentPaletteColors:function An(){return(this.plt&&this.plt.colors)||S;},getCurrentPaletteId:function F(){return this.plt&&this.plt.did;},getCurrentDefaultPaletteId:function BL(){return(this.thm&&this.thm.dplt)||Bc;},getCurrentLayoutStyle:function BX(){return this.layoutstyle||Au;},getColorBy:function(Bp,Bj){var Bn=Bj.map(function(Br,Bq){return{levelID:Bp[Bq].toString(),elemID:Br};});if(Bn&&Bn.length>1){AL(Bn);}var Bo=O(Bn),Bm=Bd(Bn),Bl=d[Bo];if(!Bl){Bl=d[Bo]={_currentColorIdx:0};}if(!Bl[Bm]){var Bk=this.getCurrentPaletteColors();Bl[Bm]=Bk[Bl._currentColorIdx];Bl._currentColorIdx=(Bl._currentColorIdx+1)%Bk.length;}if(H[Bo]&&H[Bo][Bm]){return{color:H[Bo][Bm].color,isManual:true};}return{color:Bl[Bm],isManual:false};},getZoomFactor:function AV(){return this.getCurrentLayoutDef().zf||1;},getZoomProps:function Az(){return{dpi:this.dpi,zf:this.getZoomFactor()};},executeLink:function AB(Bj,Bl,Bn){if(Bj.indexOf("prevMsgID")>0){Bj=BM(Bj,/prevMsgID=0($|&)/g,"prevMsgID="+this.mid);}if(Bj.indexOf("originMessageID")>0){Bj=BM(Bj,/originMessageID=[a-zA-Z0-9]*($|&)/g,"originMessageID="+this.mid);}Bj=mstrmojo.addCSRFTokenToURL(Bj);if(Bj.indexOf(mstrApp.name+"=")===-1&&!mstrmojo.isUrlExternal(Bj)){var Bm=mstrApp.servletState||mstrConfig.servletState||"";var Bk=mstrApp.name+"="+window.encodeURIComponent(Bm);if(Bj.indexOf("?")>-1){Bj+="&";}else{Bj+="?";}Bj+=Bk;}this.controller.onLink(this,{url:Bj,target:Bl,src:Bn||null,submitAsPost:!mstrmojo.isUrlExternal(Bj)});},getDatasetUnits:function BO(Bk,Bj,Bm,Bo){var Bn=this.datasets,Bl=[];a.keyarray(Bn).forEach(function(Bq){if(!Bm||Bq===Bm){var Br=Bn[Bq],Bp=Br,Bs=[];Bk.forEach(function(Bt){if(Bo!==undefined){Bp=Br.tables[Bo];}(Bp[Bt]||[]).forEach(function(Bu){if(!Bj||Bj(Bu)){Bs.push(Bu);}});});Bl=Bl.concat(Bs.map(function(Bt){return mstrmojo.hash.copyProps(["did","attId","n","t","st","ndetype","formType","dt","f","hide","usedInDropZones","card","lock","fs","lvfs"],Bt,{ds:Br.name,dsId:Bq,dm:!!Bt.um,da:!!Bt.da,de:!!Bt.de});}));}});return Bl;},getMapLayerKeys:function A3(Bj){if(Bj&&Bj.getSdpKeyArr){return Bj.getSdpKeyArr();}return[];},getDeleteMapLayersActions:function BU(Bl){var Bj,Bm=[],Bk=this;(Bl||[]).forEach(function(Bn){Bj=Bk.getLayoutUnitDefn(Bn);Bm.push({act:"removeUnit",unitKey:Bn,unitType:(Bj&&Bj.t)||522});});return Bm;},syncLayerDefn:function w(Bn,Bl,Bk){var Bm=this.getCurrentLayoutDef(),Bj=(Bm&&Bm.units)||{};(Bl||[]).forEach(function(Bo){if(Bj[Bo]){if(Bk){Bj[Bo]._isDeleted=true;}else{delete Bj[Bo]._isDeleted;}}});if(Bk){mstrApp.primaryScdpMap[Bn]=[];}else{mstrApp.primaryScdpMap[Bn]=Bl;}},getFormatSDPAction:function At(Bl,Bk){var Bj={FormattingWidget:{SecondaryDataProviders:Bk.join(",")}};return this.getUnitFormatAction(Bl,1,Bj,true);},addMapLayerActions:function BH(Bw,Bo,Br,Bq){var Bs=this.getNextKey(),Bm=this.getPanel().k,Bv=Bw.scriptClass==="mstrmojo.mapbox.VisMapbox",Bk=Bv?Ax.MAPBOX:Ax.GOOGLE_MAP,Bj=Bv?Bg.MAPBOX:Bg.GOOGLEMAP,Bu=this.getWidgetClassNameByStyle(Bk,Bj),Bt=this.getMapLayerKeys(Bw),Bl=Bw.defn.tt,Bp={k:Bs,defn:{t:521}},Bn={FormattingAppearance:{Visible:0,Name:Bq}};Bo.push(this.getCopyEmptyTemplateAction(Bs,Bm));Bo.push({act:"updateTemplate",keyContext:Bs,actions:[{act:"createDefaultDropZones",nodeKey:Bs,treeType:Bl,datasetType:3,widgetType:Bj}]});Bo.push(this.getUnitChangeVizAction(Bk,Bu,Bp,Br,Bn));Bo.push({act:"changeGridDisplayMode",nodeKey:Bs,displayMode:1});Bo.push(this.getFormatSDPAction(Bw,Bt.concat(Bs)));return Bs;},removeMapLayerActions:function AM(Bl,Bk,Bm){var Bj=this.getLayoutUnitDefn(Bk);Bm.push({act:"removeUnit",unitKey:Bk,unitType:(Bj&&Bj.t)||522});Bm.push(this.getFormatSDPAction(Bl,this.getMapLayerKeys(Bl)));},getExtraActionsForChangeMapViz:function AQ(Bl,Bk,Bo){var Bm=Bl.parent,Bn,Bj=this;if(Bk&&Bk.length>0){R.forEach(Bk,function(Bp){if(!Bl.isPrimaryKey(Bp)){Bn=Bj.clearVisAsFilterActionForMapLayer(Bm,Bl.fnGetWidget(Bp),true);if(Bn&&Bn.actions){Bo=Bo.concat(Bn.actions);}}});Bo=Bo.concat(this.getDeleteMapLayersActions(Bk));Bo.push(this.getFormatSDPAction(Bl,[]));this.syncLayerDefn(Bl.k,Bk,true);}return Bo;},isMapLayerNode:function q(Bk){var Bj=false;a.forEach(mstrApp.primaryScdpMap,function(Bl){if(Bl.indexOf(Bk)>=0){Bj=true;return false;}});return Bj;},getMapLayersDataByHostKey:function X(Bp){var Bl={},Bo,Bn=this,Bm=mstrApp.primaryScdpMap[Bp],Bk=this.getCurrentLayoutKey(),Bj=this.getLayoutDataCache(Bk);R.forEach(Bm,function(Bq){Bo=Bj[M.call(Bn,{k:Bq,wid:1},Bk)];Bl[Bq]=Bo&&Bo.data;});return Bl;},getNodeDataByKey:function Ac(Bk){var Bl=this.getLayoutKeyByUnitKey(Bk),Bj=this.getLayoutDataCache(this.getCurrentLayoutKey()),Bm=Bj[M.call(this,{k:Bk,wid:1},Bl)];return Bm;},getMapLayerDataByLayerKey:function Ac(Bj){var Bk=this.getNodeDataByKey(Bj);return Bk&&Bk.data;},updatePrimaryScdpMap:function Av(Bn,Bl,Bk){var Bj,Bm=mstrApp.primaryScdpMap[Bn];if(!Bm){Bm=mstrApp.primaryScdpMap[Bn]=[];}Bj=Bm.indexOf(Bl);if(Bk&&Bj<0){Bm.push(Bl);}else{if(!Bk&&Bj>=0){Bm.splice(Bj,1);}}},updateWidgetsProps:function BZ(){this.raiseEvent({name:"updWgtsProps"});},restoreVFConfigMode:function AX(){var Bj=this;return{success:function(){if(mstrApp.requireRestoreVFConfigMode){mstrApp.requireRestoreVFConfigMode=false;var Bn=Bj,Bk=mstrApp.isVFEditingMode,Bm=mstrApp.restoreVFKey,Bl=mstrApp.restoreVFTitle;Bn.checkLargeItemsForVisFilter(Bm,function(){var Bo=Bn.addVisFilterContainer(),Br=Bn.getSelectedViUnit(),Bq;Bn.oldSelectedVizBoxId=Br.id;mstrApp.isInVFConfigMode=true;Bq=Bn.insertVizBox(Bm,Bo,{});Bn.controller.rootCtrl.initPanelStautsInConfigMode();Bn.selectVIUnit(Bq.id,true,{isAddAction:true});mstrApp.getRootController().enterVizFilterConfigMode(Bl,Bk);if(Bk===false){mstrApp.restoreVFCreate=true;var Bp=mstrmojo.all.visualizationFilterToolbar;Bp.toggleSaveBtn(mstrApp.isEnableSaveBtn);}});}}};},getWidgetClassNameByStyle:function Ay(Bl,Bk){var Bj=mstrmojo.ExpressVisList.findWidgetName(Bl)||Ai[Bl];if(!Bj&&parseInt(Bk)===Bg.CUSTOM){Bj=u;}return Bj||"";},clearColorByMap:function Y(){d={};}});mstrmojo.DocModel.fnBuildId=M;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.DocSelector","mstrmojo.ui.MultiSelectPulldown","mstrmojo.ui.MultiSelectSearchablePulldown","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown");var N=mstrmojo.hash,J=mstrmojo.array,D=mstrmojo.dom,Q=mstrmojo.elementHelper,P=mstrmojo.DocSelector.DATAPARAMS,S=mstrmojo.DocSelector.STYLES;var M=0,B=1,C=2,G=4,H=1000;function L(d){var b=null,X=null,a=0,Z,Y;for(Z in d){Y=Number(Z);a++;b=(b===null||b>Y)?Y:b;X=(X===null||X<Y)?Y:X;}return a===0||X-b===a-1;}mstrmojo.ListDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.ListDocSelector",formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P","height"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_buildEvent:function I(AC,b){var s=this.node,a=this.defn,o=s.data.elms,d=[],w=[],AE=b.multiSelect,e=b.selectedIndices,j=b.allIdx,g=!!e[j],x,q,AA=[],h=this.include,k=function(){var AF=this.isInFilterPanel()&&this.getFilterPanel();return AF&&AF.isAutoApply();}.bind(this);if(!AE){var X=o[b.selectedIndex],l=X.v;d=[l];AA=[l+";"+X.n];w=[X];}else{if(g){q=o[j].v;d=[q];AA=[q];w=[o[j]];}else{if(e[j]){e[j]=false;}var z=N.keyarray(e,true).sort(J.numSorter),p={};for(x in z){p[z[x]]=e[z[x]];}e=p;N.forEach(e,function(AG,AF){if(AG&&!o[AF].hid){d.push(o[AF].v);AA.push(o[AF].v+";"+o[AF].n);w.push(o[AF]);}});}}this.defn.set("cek",d);if(d.length>0||!a.nsb||a.nsb===M){if(mstrApp&&mstrApp.isVI&&parseInt(this.style,10)===G&&o&&o.length>H&&d.length>o.length/2&&(k()||!this.isInFilterPanel())){AC.include=!h;AC.forceBuffer=true;AC.requireToggle=true;b.include=!h;var u=[],Z=[];J.forEach(o,function(AG,AF){if(AF!==j&&!e[AF]){u.push(AG.v);Z.push(AG.v+";"+AG.n);}});this.defn.set("cek",u);AC.eid=((parseInt(AC.type,10)===1)?Z:u).join(Q.ELEM_SEPARATOR);}else{AC.eid=((parseInt(AC.type,10)===1)?AA:d).join(Q.ELEM_SEPARATOR);}}else{if(a.nsb===B||!a.showall){AC.unset=true;}else{if(a.nsb===C){AC.eid=Q.ELEM_ALL_ID;w=[o[j]];}}}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){var AB=this.model,AD=AB.getCurrentLayoutDef(),t=AD&&AD.units,Y=this.k;if(t&&t[Y]){t[Y].cesChange=true;}s.data.ces=w;s.data[P.CESREADY]=true;this.model.setDataReady(this.k,this.id,P.CESREADY,true,"ces",w);}var f=D.position(b.domNode,true);if(f){AC.left=f.x;AC.top=f.y;}if(g&&this.multi&&h){J.forEach(o,function(AG){var AF=AG.v;if(d[0]!==AF){d.push(AF);}});}if(a.sec){if(a.style!==mstrmojo.DocSelector.STYLES.SCROLLER){this.parent.set("count",Q.buildElemsCountStr(a.multi?d:o,o,this.isSelectionExcluded()));}}},getCekEvtListener:function W(Z,Y){var X=Z.defn.style;if(X===S.PULLDOWN||X===S.SCROLLER){return function(a){var f=Y.items,g={};if(!Y.multiSelect){var b=Y.selectedIndex=J.find(f,"v",a.value[0]);if(b>-1){g[b]=true;}}else{var e=Y.allIdx,d;if(e>-1&&J.indexOf(a.value,f[e].v)>-1){for(d=0;d<f.length;d++){g[d]=true;}}else{J.forEach(a.value,function(j){var h=J.find(f,"v",j);if(h>-1){g[h]=true;}});}}Z.selIdx=Y.selectedIndices=g;Z.handleActionInSyncPhase(function(){Y.refresh();});};}return this._super(Z,Y);},preBuildRendering:function A(){var Z=this.node.defn.style,Y=N.clone(this.formatHandlers),X=Y.contentNode;if(X){if((Z===S.RADIO||Z===S.CHECKBOX)&&Y.filterNode){X.push("fx");X.push("background-color");delete Y.filterNode;}if(Z===S.LIST){delete X.height;}}this.formatHandlers=Y;return this._super();},getWidgetClass:function U(Z,Y,X){if(Y===S.PULLDOWN){if(mstrApp.isVI&&!D.isMobile){return Z.multi?"ui.MultiSelectSearchablePulldown":"ui.SearchablePulldown";}return Z.multi?"ui.MultiSelectPulldown":"ui.Pulldown";}return this._super(Z,Y,X);},getWidgetConfig:function F(d,a,Z,b){var Y=d.getFormats(),X=this._super(d,a,Z,b);if(a===S.SCROLLER){d.extCls="extSlider";if(mstrApp&&mstrApp.isVI){X.isHoriz=true;}N.copyProps(["height","width"],Y,X);}if(a===S.PULLDOWN&&!Z.multi){X.isHostedWithin=false;X.onitemSelected=X.onchange;X.allowHTML=false;X.focusOnPopup=mstrmojo.App&&mstrmojo.App.isOIVM();}if(this.isRecursiveAttributeSelector()){X.getlevelNames=function(){var e={};J.forEach(d.levelForms,function(f){e[f.lv]=f.lvfn;});return e;};}return X;},updateWidget:function O(a){var b=this._super(a),X=a.selIdx;var Y=b.items=a.node.data.elms;b.selectedIndices=X;b.include=a.defn.include;if(!b.multiSelect&&Y&&Y.length){var Z=N.keyarray(X);if(Z.length===1){b.selectedIndex=Number(Z[0]);}else{b.selectedIndices={};b.selectedIndex=-1;}}return b;},isSelectAll:function E(){var a=this.node.data.elms,Z=this.children&&this.children[0],b=Z.selectedIndices,Y=Z.allIdx,X=!!b[Y],d=(a[Y]&&a[Y].v)||Q.ELEM_ALL_ID;if(this.include){return X||J.filter(a,function(e){return e.v!==d;}).length===N.keyarray(b).length;}else{return N.isEmpty(b);}},isFilterNothing:function K(){var Z=this.children&&this.children[0],a=Z.selectedIndices,Y=Z.allIdx,X=!!a[Y];return X;},destroy:function V(){var X=this.node.data;this._super();if(X.del){J.insert(X.elms,X.del.idx,X.del.elem);delete X.del;}},isValidSelection:function R(){var Z=this.node,a=Z.data,Y=Z.defn,b=a.ces,X=this.model;if(!Y.multi&&b&&b.length>1&&!this.allowsTogglingMultiSelect()){return false;}if(Y.style===mstrmojo.DocSelector.STYLES.SCROLLER&&!L(this.selIdx)){return false;}if(X.isSelWarnFlagOn(this.k)&&b&&b.length===0&&a.elms.length>0){return this.children[0].noneIdx&&this.children[0].noneIdx>-1;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.fe.FilterUtils","mstrmojo.func","mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo.DocDataService");var V=mstrmojo.fe.FilterUtils,M=mstrmojo.array,O=mstrmojo.hash,R=mstrmojo.func,Q=mstrmojo.expr;var K="LEVEL_NUMBER",G=mstrmojo.DocDataService.SUPPRESS_DATA;var H=16,L=1;function C(X){return X.t===47&&X.st===12033;}function B(){return{type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,ckey:this.ckey,tks:this.tks};}mstrmojo.DynamicListDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.DynamicListDocSelector",_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P","height"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_buildEvent:function J(a,Z){var Y=this.node,b=this.getAttrInfo(),X;X=Z.buildSelectionExprJSON(b);Y.defn.set("cek",{expr:X,disablePU:true});a.expr=V.getExprXml(X);if(this.incFetch){a.prKey=this.k;}},initControlInfo:function F(){var X=this.node.data;this._super();O.copy({incFetch:X.inc!==false,levelForms:X.lvfs||[]},this);},getCekEvtListener:function W(Y,X){return function(Z){var a=Z.value;if(a.hasOwnProperty("expr")){Y.expr=a.expr;if(!a.disablePU){Y.handleActionInSyncPhase(function(){X.setSelectionByExprJSON(a.expr);X.refresh();});}}};},updateWidget:function P(b){var d=this._super(b),X=b.getAttrInfo(),Z=b.node,a=Z.data,Y=Z.defn;d.updateItems(a.elms,a.p_relation);if(b.lockSelection){d.setSelectionByExprJSON(b.expr);}else{if(a.unset){d.setSelectionByExprJSON();}else{if(a.exp){d.setSelectionByExprJSON(a.exp);}else{if(a.ces){d.setSelectionByList(a.ces,Y.include);}}}b.expr=d.buildSelectionExprJSON(this.getAttrInfo());}d.browseFlags=H+(C(X)?0:L);return d;},clearSelector:function S(Y){var X=B.call(this);this.node.defn.set("cek",{expr:null});X.unset=true;X[Y?"forceApply":"forceBuffer"]=true;this.slice(X);},getWidgetConfig:function E(d,Z,Y,a){var b=d.levelForms,X=this._super(d,Z,Y,a);if(b.length>0){X.getMaxLevel=function(){return d.getMaxLevel();};X.getLevels=function(){return d.getLevels();};}X.getLevelExpression=function(f){var e=d.getAttrInfo();return d.getLevelExpression(e,f);};X.delegateExpandCollapse=function(e,f){return d.onExpandCollapse(e,f,!d.incFetch);};return X;},onExpandCollapse:function U(d,k,X){var j=this,Z=this.isInFilterPanel()&&this.getFilterPanel(),a=this.node,h=a.defn,f=this.model,Y=f.getDataService(),e=[Y.getRASelectorExpandAction({ck:h.ck,ckey:h.ckey,elementId:d.elementId,isExpand:d.isExpand?1:0})],g=X?k:R.wrapMethods({success:function(o){var l;if(Z){l=Z.getBufferedSlice(h.ckey);}j.lockSelection=true;f.partialUpdate(o.data,f.getTargetDefn(a.k));j.lockSelection=false;if(Z&&l){Z.bufferSlice(l);}}},k),b=X?G:{};f.controller.cmdMgr.execute({execute:function(){this.submit(e,g,b);},urInfo:{extraPuKeys:h.ck.split("\u001E").slice(1),treesToRender:3}});return !X;},getMaxLevel:function A(){var X=0;M.forEach(this.levelForms,function(Y){if(Y.lv>0){X=Math.max(X,Y.lv);}});return X;},getLevels:function D(){return M.map(this.levelForms,function(X){return{v:X.lv,n:X.lvfn};});},getLevelExpression:function I(Y,Z){var X=(Y.fs||[]).filter(function(a){return(a.n||a.fnm)===K;})[0];if(X&&parseInt(Z,10)>=0){return{et:Q.ET.AQ,fn:Q.FN.EQUAL,a:O.copyProps(["did","n","t","st"],Y),fm:{did:X.did||X.fid,n:K,dtp:Q.DTP.INTEGER},cs:[{v:Z,dtp:Q.DTP.INTEGER}]};}return null;},getAttrInfo:function N(X){var a=this.node.defn,Z=this.model.datasets,Y;X=X||a.srcid;O.forEach(Z,function(d){Y=d.att.filter(function(e){return e.did===X;})[0];if(Y){return false;}});if(Y&&C(Y)){var b=this.getAttrInfo(Y.attId);Y.fs=b.fs;Y.lvfs=b.lvfs;}return Y?Y:{};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.DocSelector","mstrmojo._IsSelectorTarget","mstrmojo.Serializer","mstrmojo._IsPanelStack","mstrmojo._HasBuilder","mstrmojo.array","mstrmojo.css","mstrmojo.hash");var H=mstrmojo.array;function E(O,N){var M=H.find(O.node.data.panels,"k",O.selectedKey);M+=(N||0);O.set("selectedIdx",M);}function I(M){M.set("hasNextPanel",(M.selectedIdx<(M.node.data.panels.length-1)));M.set("hasPreviousPanel",(M.selectedIdx>0));}mstrmojo.DocPanelStack=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._HasBuilder,mstrmojo._IsPanelStack],{scriptClass:"mstrmojo.DocPanelStack",markupString:'<div id="{@id}" k="{@k}" title="{@tooltip}" nm="{@n}" class="mstrmojo-DocPanelStack {@cssClass}" style="{@domNodeCssText}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["RW","B","overflow"]},model:null,hasNextPanel:false,hasPreviousPanel:false,applyEnabled:false,clearEnabled:true,renderMode:"onshow",n:"",node:null,selectedIdx:undefined,selectedKey:"",init:function L(M){this._super(M);E(this);this.node.sw=(this.node.data.panels.length>1&&this.defn.sw);this.n=M.node.defn.n;},onselectedKeyChange:function J(N){var O=this._super(N),M=O.on;if(M._delayRefresh){if(!M.defn.dirtyKeys){M.refresh();}delete M._delayRefresh;}E(this);},updateSelectedIdx:function B(M){E(this,M);},onselectedIdxChange:function G(){I(this);},_bufferedSlices:null,canApply:function A(){var O,N,M,P;for(O in this.children){M=this.children[O];if(!M.children){continue;}for(N in M.children){P=M.children[N];if(P.defn&&P.defn.ttl!==undefined){P=P.children[1];}if(P&&P.canApply&&!P.canApply()){return false;}}}return true;},bufferSlice:function F(N){var M=this._bufferedSlices=this._bufferedSlices||[];M.push(N);this.set("applyEnabled",this.canApply());},applyBufferedSlices:function D(){var N=this._bufferedSlices;if(!N){return ;}var M=function(S){var R=[],Q,P=String.fromCharCode(30);mstrmojo.hash.forEach(S,function(V){Q=V.tks;if(Q){var U=H.isArray(Q)?Q:Q.split(P);R=R.concat(U);}});return R;};var O=function(R){var P=false;for(var Q=0;Q<R.length;Q++){if(R[Q].isUConDS){P=true;break;}}return P;};this.model.slice({bufferedSlices:true,tks:M(N),events:N,isUConDS:O(N)});this.clearBuffSlices();},clearBuffSlices:function(){this._bufferedSlices=null;this.set("applyEnabled",false);},_isFPS:function K(){return !!this.defn.ifp;},clearAllFilter:function C(){var R=mstrmojo.DocSelector.STYLES,M=this;if(!M._isFPS()){return ;}if(!(M.children&&M.children.length)){return ;}var Q,O,W,Y,V,N,S;for(Q in M.children){W=M.children[Q];if(!W.children){continue;}for(O in W.children){Y=W.children[O];if(Y.defn.ttl!=="undefined"){Y=Y.children[1];}if(Y.model){V={tks:Y.tks,ck:Y.ck,ckey:Y.ckey,unset:true};M.bufferSlice(V);var U=Y.node.defn,P=Y.node.data;var X=H.filterOne(P.elms,function(Z){return Z.t===14;});if(U.showall&&X){P.ces=[X];U.cek=[X.v];}else{P.ces=[];U.cek=null;}P.unset=true;P.cs=[];N=Y.content;if(parseInt(U.style,10)===R.SCROLLER){N.min=0;S=N.items&&N.items.length;N.max=S?S-1:0;}Y.update(Y.node);Y.refresh();}}}},update:function(O){if(this._super){this._super(O);}var M=O.data&&O.data.selKey;if(M&&M!==this.selectedKey){this.defn.newSelKey=M;}var N=function(P){return P.data&&P.data.panels&&P.data.panels.length;};if(this.children&&(this.children.length!==N(O))){this.rebuildPanels();}},rebuildPanels:function(){this.destroyChildren(false);this.buildChildren(false);},postBuildRendering:function(){this._super();if(this.defn.itb){mstrmojo.css.addClass(this.domNode,"tableControl");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.Button","mstrmojo.form");var V=8,P=16,W=4,S=1,K=2,D=4,R=8,B=16,N=268435456,J=536870912,A=1073741824,I=window.mstrConfig&&!window.mstrConfig.simpleDialog,M=2147755235,L=2147755236;var C="mstrmojo-oivmSprite ";function E(a,Z,Y){if(I){mstrmojo.confirm(a,{confirmBtn:{fn:Z},cancelBtn:{fn:Y}});}else{if(mstrmojo.confirm(a)){if(Z){Z();}}else{if(Y){Y();}}}}function X(Z,Y){if(I){mstrmojo.alert(Z,Y,null,null,null,{allowHTML:true});}else{mstrmojo.alert(Z);Y();}}function O(Y){var Z=mstrmojo.findAncestor(this,"scriptClass","mstrmojo.DocInfoWindow");if(!!Z){Z[Y?"registerLock":"releaseLock"](this);}}mstrmojo._DocActionSelector=mstrmojo.provide("mstrmojo._DocActionSelector",{_mixinName:"mstrmojo._DocActionSelector",extCls:"mstrmojo-ActionSelector",type:V,targets:null,initControlInfo:function G(){var Y=this.node.defn;this.aa=parseInt(Y.aa,10);this.dpTxt=Y.dpTxt||{8:mstrmojo.desc(5369),4:mstrmojo.desc(8233),16:mstrmojo.desc(8232)}[this.aa]||"";this.dpCfm=Y.dpCfm;this.sac=parseInt(Y.sac,10);this.msg=Y.msg;this.rsid=Y.rsid;this.rst=Y.rst;this.node.data.elms=[{n:this.dpTxt,v:this.dpTxt}];if(this._super){this._super();}},selectorControlChange:function(Y){if(Y.selectedIndex!==0){return ;}this.executeAction();Y.select([]);},executeAction:function(){var Z=this.aa,Y=this,a=function(){O.call(Y,false);};O.call(Y,true);if(Z===V){if(this.dpCfm){E(mstrmojo.desc(8313),function(){Y.onCommit();},a);}else{Y.onCommit();}}else{if(Z===W){if(this.dpCfm){E(mstrmojo.desc(8322),function(){Y.onDiscard();},a);}else{Y.onDiscard();}}else{this.onRecalculate();}}},postBuildRendering:function(){this._super();this.domNode.ontouchstart=function(Y){mstrmojo.css.addClass(Y.target,"glow");};this.domNode.ontouchend=function(Y){mstrmojo.css.removeClass(Y.target,"glow");};},onCommit:function(){var b=this,d=this.model,Z=b.controller,Y=mstrApp.useBinaryFormat;O.call(this,false);if(!this.checkValidationStatus()){X(mstrmojo.desc(9205));return ;}if(!Y&&!this.validateRequiredObjects()){X(mstrmojo.desc(9200));return ;}var a=function(e){if((b.sac&J)>0){Z.invalidClientCache();}if((b.sac&B)>0){var f={did:b.rsid,objType:b.rst,forceExec:(b.sac&N)>0};if((b.sac&A)>0){f.linkAnswers='<hl mid="'+d.mid+'" srct="2" aopam="1"><prms></prms></hl>';}Z.onExecuteNewObject(b,f);}else{if((b.sac&R)>0){Z.onReExecute(b);}else{if(mstrApp.isMobile){Z.generateActionToolbar();}d.transactionUpdate(e);}}};mstrmojo.mask.show("Running");d.sendTransactionActions(this.ck,V,d.newCallback({success:function(e){mstrmojo.mask.hide();if(d.txrcd||e.offln){Z.offlineTransactionsSubmitted(b.ck);}if(e.offln){if(Y&&!b.networkToastShowed){b.networkToastShowed=true;mstrmojo.toast(mstrmojo.desc(9258,"No Network Connectivity")+". "+mstrmojo.desc(9259,"Transaction will be submitted when connectivity is resumed."));}d.transactionUpdate(e);}else{if((b.sac&S)>0&&b.msg){if(Y){mstrmojo.toast(b.msg);window.setTimeout(function(){a(e);},100);}else{X(b.msg,function(){a(e);});}}else{a(e);}}},failure:function(g){var e=mstrmojo.all.mojoAlertx9;if(e){e.destroy();}mstrmojo.mask.hide();if(d.txrcd){Z.offlineTransactionsSubmitted(b.ck);}var f=4294967296+parseInt(g.code,10);if(f===M){if(Y){b.validateRequiredObjects();}X(mstrmojo.desc(9200,"You have some required inputs that are not modified."));}else{if(f===L){var h=mstrmojo.desc(9201,"You haven't made any changes to submit.");if(Y){mstrmojo.toast(h);}else{X(h);}}else{X(mstrmojo.base64.decodeHttpHeader(g.message),function(){if(!Y){b.controller.onReExecute(b,true);}});}}}}));},onDiscard:function F(){var Z=this,a=this.model,Y=Z.controller;O.call(this,false);a.txDiscardTargets=this.getTxTargets();a.sendTransactionActions(this.ck,W,{success:function(b){a.transactionUpdate(b);Y.transactionDiscarded(Z.ck);},complete:function(){delete a.txDiscardTargets;if(mstrApp.isMobile){Y.generateActionToolbar();}}});},onRecalculate:function(){O.call(this,false);this.model.sendTransactionActions(this.ck,P);},getTxTargets:function U(){var f=this.tks.split("\u001E"),e,Y,d,g,Z,a,b={};for(e=0,Y=f.length;e<Y;e++){d=f[e];g=1;do{Z=this.model.getUnitInstance(d,g++);if(Z&&Z.checkRequiredObjects){if(Z.isPanelStack){for(a in Z.txWidgets){b[Z.txWidgets[a].id]=1;}}else{b[Z.id]=1;}}else{break;}}while(true);}return b;},validateRequiredObjects:function Q(){var Y=true,Z;for(Z in this.getTxTargets()){Y=mstrmojo.all[Z].checkRequiredObjects()&&Y;}return Y;},checkValidationStatus:function H(){var Y;for(Y in this.getTxTargets()){if(mstrmojo.all[Y].checkValidationStatus&&!mstrmojo.all[Y].checkValidationStatus()){return false;}}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.MetricSelectorUtility","mstrmojo.hash","mstrmojo.array","mstrmojo.expr");var G=mstrmojo.hash,L=mstrmojo.array,D=mstrmojo.DocSelector.DATAPARAMS;mstrmojo.MetricQualDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.MetricQualDocSelector",_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P","height"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},init:function P(Q){this._super(Q);this.spm=true;},initControlInfo:function O(){this._super();var R=mstrmojo.MetricSelectorUtility,U=this.node,V=U.data,S=U.defn;G.copyProps(["srcid","srct"],S,this);this.qua=V.qt;this.dt=V.dt;var Q=R.getOpIdxByfunc(V.f,V.ft);if(Q!==-1){this.include=R.getIncludeByOp(Q);}},canApply:function E(Q){return true;},onquaChange:function J(Q){this.node.data.qt=Q.value;},_buildEvent:function H(S,U){var V=[];var R=false;L.forEach(U.cs,function(a){V.push(a.v);if(S.dtp===undefined){S.dtp=a.dtp;}if(a.dtp===mstrmojo.expr.DTP.BIGDECIMAL){R=true;}});if(R){S.dtp=mstrmojo.expr.DTP.BIGDECIMAL;}if(V.length){S.cs=V.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}var Y=mstrmojo.MetricSelectorUtility.getFuncInfo(U.opId,U.qua);S.f=U.f=Y.f;S.ft=U.ft=Y.ft;S.include=this.defn.include=this.include=U.include;S.ckey=this.ckey;S.srcid=this.srcid;S.srct=this.srct;if(U.forceUnset){S.retrieveCtrlKey=true;}S.unset=U.unSet||U.forceUnset;S.onlyInclude=U.onlyInclude;if(U.changeInclude){S.changeInclude=U.changeInclude;S.forceApply=true;U.changeInclude=false;}if(U.changeQual){S.changeQual=U.changeQual;U.changeQual=false;}S.qt=U.qua;if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){var Z=this.model,W=Z.getCurrentLayoutDef(),X=W&&W.units,Q=this.k;if(X[Q]){X[Q].cesChange=true;}Z.setDataReady(this.k,this.id,D.CSREADY,true,["f","ft","cs"],[U.f,U.ft,U.cs]);}this.node.defn.set("cek",{id:this.id,f:U.f,ft:U.ft,cs:U.cs,qua:U.qua,include:U.include});},preBuildRendering:function M(){var Q=this._super();if(this.isInFilterPanel()&&!this.isHorizFP()){this.children[0].width=this.parent.parent.contentWidth;}return Q;},postBuildRendering:function B(){this._super();if(this.formatHandlers.filterNode){var Q=this.getFormats();if(!Q.height){this.updateHeight();}}},getCekEvtListener:function C(R,Q){return function(S){R.handleActionInSyncPhase(function(){R.set("qua",S.value.qua);if(R.id!==S.value.id){Q.updateExpr(S.value);if(R.style===mstrmojo.DocSelector.STYLES.METRIC_SLIDER){R.set("include",S.value.include);}}});};},updateWidget:function N(V){var W=this._super(V),R=V.node,Q=V.selIdx,U=R.data,S=U.elms;if(W.updateData){W.numFmts=V.defn.numFmts;V.handleActionInSyncPhase(function(){W.updateData({low:U.min,high:U.max,cnt:U.cnt,nov:U.nov},{cs:U.cs,f:U.f,ft:U.ft,qua:U.qt});});}W.items=S;W.selectedIndices=Q;return W;},newAndInitWidget:function K(Q){var R=this._super(Q);Q.attachEventListener("quaChange",R.id,function(S){this.set("qua",S.value);});return R;},getWidgetConfig:function I(W,U,S,V){var R=W.getFormats(),Q=this._super(W,U,S,V);G.copyProps(["height","width","font"],R,Q);G.copyProps(["cs","ft"],S,Q);Q.fmts=S.f;Q.dt=W.dt;Q.qua=W.qua;Q.numFmts=S.numFmts;return Q;},isSelectAll:function A(){var S=mstrmojo.MetricSelectorUtility.OP,R=this.children&&this.children[0],Q=R&&(S._IS_NULL===R.opId||S._IS_NOT_NULL===R.opId);return R===undefined?true:(!R.cs||R.cs.length===0)&&!Q;},isFilterNothing:function F(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.vi.ui.rw.selectors.AttrQualInputBox","mstrmojo.array","mstrmojo.expr","mstrmojo.date","mstrmojo.VisChartUtils","mstrmojo.locales","mstrmojo.elementHelper","mstrmojo.vi.ui.DatasetUnitMenuUtils");var J=mstrmojo.expr,K=J.BFTP,E=mstrmojo.date,P=mstrmojo.VisChartUtils,F=mstrmojo.array,A=mstrmojo.vi.ui.DatasetUnitMenuUtils,R=mstrmojo.locales,L=mstrmojo.DocSelector.DATAPARAMS;function H(U,V){if(!U){return ;}var W=E.getDateJson(new Date(P.convertRawValueToMilliseconds(U))),S=E.formatDateInfo(W,R.datetime.DATEOUTPUTFORMAT);if(V===J.DTP.TIMESTAMP){S+=" "+E.formatTimeInfo(W,R.datetime.TIMEOUTPUTFORMAT);}return S;}mstrmojo.AttrQualDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.AttrQualDocSelector",getWidgetClass:function N(V,U,S){return"vi.ui.rw.selectors.AttrQualInputBox";},newAndInitWidget:function M(S){var U=this._super(S);S.attachEventListener("includeChange",U.id,function(V){this.set("include",V.value);});return U;},_buildEvent:function D(a,Z){a.f=Z.f;a.ft=Z.ft;a.fid=Z.fid;a.ckey=this.ckey;a.srcid=Z.srcid;a.srct=Z.srct;var Y=Z.dt,X=[];F.forEach(Z.cs,function(b){if(!mstrmojo.string.isEmpty(b.v)){X.push(b.v);}});if(X.length){a.cs=X.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}a.dtp=Y;a.unset=Z.unset;if(a.unset||mstrmojo.string.isEmpty(a.cs)){delete a.fid;}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){var U=this.model,W=U.getCurrentLayoutDef(),V=W&&W.units,S=this.k;if(V[S]){V[S].cesChange=true;}U.setDataReady(this.k,this.id,L.CSREADY,true,["f","ft","cs"],[Z.f,Z.ft,Z.cs]);}},getCekEvtListener:function Q(U,S){return function(V){U.handleActionInSyncPhase(function(){S.update(V.value);});};},updateWidget:function I(W){var X=this._super(W),U=W.node,V=U.data;if(X.update){var S={cs:V.cs,f:V.f,ft:V.ft,fid:V.fid,min:H(V.min,V.dt),max:H(V.max,V.dt)};X.update(S);}return X;},getWidgetConfig:function B(h,Z,e,S){var a=h.model,f=h.getFormats(),Y=h.node.data,d=this._super(h,Z,e,S);d={scriptClass:d.scriptClass,cssText:f.height?"height: "+f.height:"",srcid:e.srcid||"",srct:e.srct||"",cs:Y.cs,min:H(Y.min,Y.dt),max:H(Y.max,Y.dt),showAdvanced:true,canSelectDisabledDate:true,f:Y.f,ft:Y.ft||1,fid:Y.fid,dt:Y.dt,onchange:function(){if(!h._inSyncPhase){h.selectorControlChange(this);}}};if(!d.fid||!d.dt){var X=A.getUnitFromDataset(a.datasets,e.srcid,12),b=(X&&X.fs)||[],g=b[0],W,V=function(j){if(!d.fid){d.fid=j.fid;}if(!d.dt){switch(j.bftp){case K.TEXT:d.dt=J.DTP.CHAR;break;case K.DATE:d.dt=J.DTP.DATE;break;case K.DATETIME:d.dt=J.DTP.TIMESTAMP;break;default:d.dt=J.DTP.CHAR;}}};for(W=0;W<b.length;W++){if(b[W].iidx){g=b[W];break;}if(b[W].idf){g=b[W];}}if(g){V(g);}}var U=d.dt;if(d.f===undefined){if(U===J.DTP.CHAR){d.f=J.FN.SEARCH;}else{if(U===J.DTP.DATE||U===J.DTP.TIMESTAMP){d.f=e.include?J.FN.BETWEEN:J.FN.NOT_BETWEEN;}}}if(!(mstrApp.isOIVM&&mstrApp.isOIVM()||e.iifp)){d.supportScrollbar=true;}return d;},isValidSelection:function O(){var U=this.node.data,S=this.model;return !S.isSelWarnFlagOn(this.k)||(U.cs&&U.cs.length);},isSelectAll:function C(){var Z=this.children&&this.children[0];if(Z===undefined){return true;}var U=R.datetime.DATEOUTPUTFORMAT,W=R.datetime.TIMEOUTPUTFORMAT,X=E.parseDateAndOrTime;var S=X.call(E,Z.min,U,W),a=X.call(E,Z.fromBox.fromPicker.value),b=E.compareDate(a&&a.date,S&&S.date);if(b>0){return false;}if(b===0){if(E.compareTime(a&&a.time,S&&S.time)>0){return false;}}var d=X.call(E,Z.max,U,W),Y=X.call(E,Z.toBox.toPicker.value),V=E.compareDate(Y&&Y.date,d&&d.date);if(V<0){return false;}if(V===0){if(E.compareTime(Y&&Y.time,d&&d.time)<0){return false;}}return true;},isFilterNothing:function G(){return this.isSelectAll();}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl","mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights","mstrmojo.hash","mstrmojo.array","mstrmojo.func","mstrmojo.VisUtility","mstrmojo.PerformanceLogOutput");var S=mstrmojo,J=S.hash,V=S.vi.ui.rw,H=S.VisUtility,R=V._HasVisSelections,O=V.selectors._IsMultiUnitControl,E=V.selectors._BrushesAndHighlights,U=mstrmojo.func.wrapMethods,G=S.PerformanceLogOutput;function M(Z){var X,e,b=Z.sc.exp,Y=b&&b.nds,W=Z&&Z.gts,d=Z&&Z.k,a=mstrmojo.DocXtabModel.prototype,f=J.copy(R,{k:d,model:a});if(!Z||!W||!b||!Y||Y.length<=0){return{};}X=(W.row||[]).concat(W.col||[]);H.modifyScExp(b,X,a,{});e=O.getSelectorDataFromExpression(b);f.addSelectionsFromExpression(e);return f.getSelectionHash();}mstrmojo.VisDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.VisDocSelector",postBuildRendering:function Q(){this._super();var Y=this,W=Y.model,X=Y.parent;if(X&&X.refreshFilterSummaryBar){X.refreshFilterSummaryBar();}if(W){this.clearSelectorListener=W.attachEventListener("clearSelector",this.id,function(Z){if(Z.k===Y.k){var a=this.content;if(a){a.updateSummaryText({});}}});}},onAppStateChange:function L(W){var b=mstrmojo.vi.VisualInsightApp.APP_STATES,X=b.PAUSE,Y=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),a=!!(W.valueWas&X);if(Y!==a){var Z=this.parent;if(Z){Z.updateSummaryBar();}}},getWidgetConfig:function D(d,Y,X,a){var Z=d.node&&d.node.data,b=Z&&Z.sc,W=this._super(d,Y,X,a);if(b){W.exp=b&&b.exp;W.include=b.include;}return W;},getSelectionInfo:function C(){var X,W=this.node&&this.node.data,Z=W&&W.sc,Y=Z&&Z.exp;if(Y&&Y.nds){return M(W);}X=R.getSelectionCache.call(this);return X&&X._viSelections;},updateWidget:function K(W){var X=this._super(W);if(X){X.include=this.include;if(X.updateSummaryText){X.updateSummaryText(this.getSelectionInfo());}}return X;},clearSelector:function P(f){G.startTimer({functionName:"VisFilter.unsetFilter",purpose:"from Unset filter to End"},"timerid_VisFilter_unsetFilter");var e,Z=this.parent,W=this.content,a=this.node&&this.node.data,d=a&&a.sc,X=(a&&(a.sid!==undefined))?a.sid:1,Y=this.getSelectionInfo(),b=!Y||Object.keys(Y).length===0;if(Z&&Z.closeVisSelectorPanel){Z.closeVisSelectorPanel();}if(!d||b){return ;}e={ck:d.ck,ct:d.ct,ctlKey:d.ckey,selections:[],sid:X,tks:d.tks,type:521,isNavigation:false,ignoreTargetData:true};e[f?"forceApply":"forceBuffer"]=true;d.exp=null;R.setSelectionCache.call(this,{});E.clearSelections.call(this);this.slice(e);if(W){W.updateSummaryText({});}},update:function I(X){if(mstrApp.isInVFInteractMode){var W=this.parent;if(W){W.updateVizSelectorPanel();}}this._super(X);},supportsInclude:function N(){return true;},applySelections:function A(W){W.include=this.include;this.slice(W);},initControlInfo:function F(){this._super();var W=this.node,X=W&&W.data,Y=X&&X.sc;if(Y){J.copyProps(["allselected","ckey","ck","tks","style","showall","ct","include"],Y,this);}},onincludeChange:function B(h){var Y=h.value,f=this.model,Z=this.isInFilterPanel()&&this.getFilterPanel(),e=f.getDataService().newUpdate(Z);this.include=Y;if(Z&&Z._bufferedSlices){Z.applyBufferedSlices(true,e);}var g=this,b=this.node.k,a=f.getDataService(),X=f.getSliceCallback({type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,tks:this.tks,include:this.include,changeInclude:true}),d=[a.getSelectorIncludeAction({ck:this.ck,ckey:this.ckey,type:this.type,include:Y})],j=U(X,{success:function(k){g.set("wait",false);f.partialUpdate(k.data,f.getTargetDefn(b));}});var W=this.deferredEvt;if(!!W){f.sliceDeferred(e,W);}d[0].partialRetrieval=a.newRetrievalKeysConfig().addNode(b);d=!!W?d.concat(e.actions):(e.actions||[]).concat(d);this.set("wait",true);f.controller.cmdMgr.execute({execute:function(){this.submit(d,j);},urInfo:{extraPuKeys:g.ck.split("\u001E").slice(1),treesToRender:3}});},generateSummaryText:function(W){if(this.include){return W>1?mstrmojo.desc(15291,"## data points included").replace("##",W):mstrmojo.desc(15292,"1 data point included");}else{return W>1?mstrmojo.desc(15293,"## data points excluded").replace("##",W):mstrmojo.desc(15294,"1 data point excluded");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.array","mstrmojo.elementHelper");var I=mstrmojo.array,F=mstrmojo.DocSelector.ELEM_ALL_ID,H=mstrmojo.elementHelper;var C=0,K=1,J=2;var B=1,M=3;function A(O){I.forEach(O,function(P){P.n=P.v;});return O;}mstrmojo.TextBoxDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.TextBoxDocSelector",_ieformatHandlers:{domNode:["font","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["font","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_fetchOnInit4UCOnDS:function G(){},_getSelectionCount:function L(P){var O=P.items;return O?O.length:0;},_buildEvent:function D(R,Q){var O=[],P=this.defn;I.forEach(Q.items,function(S){O.push(S.v);});if(O.length>0||P.nsb===C){R.eid=O.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}else{R.eid="";}if(P.sec){this.parent.set("count",H.buildElemsCountStrByNum(O.length,0));}},updateWidget:function N(Q){var R=this._super(Q),O=Q.node,P=O.data;R.items=P.vs?A(P.vs.concat()):[];return R;},getWidgetConfig:function E(V,R,Q,U){var P=V.getFormats(),S=V.node.data,O=this._super(V,R,Q,U);O={scriptClass:O.scriptClass,cssText:P.height?"height: "+P.height:"",emptyText:mstrmojo.desc(4325,"Search")+" "+(Q.ttl||""),items:S.vs?A(S.vs.concat()):[],srcid:Q.srcid||"",dsrc:Q.dsrc||"",onitemsChange:function(){if(!V._inSyncPhase){V.selectorControlChange(this);}}};if(!Q.multi){O.maxObjectCount=1;}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.maps.jsmap.AndroidMap","mstrmojo.maps.jsmap.AndroidDocMapInfoWindow","mstrmojo.Overlay","mstrmojo.hash","mstrmojo.array","mstrmojo.dom");var F=mstrmojo.dom;mstrmojo.maps.jsmap.AndroidDocMap=mstrmojo.declare(mstrmojo.maps.jsmap.AndroidMap,[mstrmojo._Formattable],{scriptClass:"mstrmojo.maps.jsmap.AndroidDocMap",cssClass:"mstr-googleMapView",formatHandlers:{domNode:["left","top","z-index","height","width","border","border-color","border-style","border-width"]},sc:null,getMapModel:function C(){var O=this.doc,M=O.model,N=mstrApp.getCurrentProjectId(),P=mstrApp.serverProxy.getSessions();return{pid:N,sessions:P,model:this.model,docData:{did:O.did,ttl:O.ttl,st:O.st,mid:M.mid,bs:M.bs,data:M.data,defn:M.defn},cfg:mstrApp.getConfiguration().getConfiguration()};},postBuildRendering:function A(){this._touchListener=mstrmojo.touchManager.attachEventListener("touchesBegin",this.id,function(M){var N=this.openedInfoWindow;if(N){if(!F.contains(this.domNode,M.touch.target,true,document.body)&&!mstrApp.isDialogUp()){N.close();}}});return this._super();},destroy:function J(M){var N=this._touchListener;if(N){mstrmojo.touchManager.detachEventListener(N);delete this._touchListener;}this._super(M);},setModel:function L(M){this.doc=M.controller.view;this._super(M);},initFromVisProps:function I(M){this._super(M);if(!M){return ;}this.iwDocLayout=(parseInt(M.dl,10)===1);if(M.lyt){this.iwLayoutKey=M.lyt;}},findSelectorTarget:function G(R){if(R&&R.tks){var O=this.model.docModel,N=R.tks.split("\u001E"),P=0,M=N.length;for(P=0;P<M;++P){var Q=O.getTargetDefn(N[P]);if(Q[N[P]].ifw){return N[P];}}}},showInfoWindow:function D(O,N,M){this.openedInfoWindow=M;M.open(O,N);},getInfoWindow:function K(P,N){var O=this.gridData;if(this.iwDocLayout){this.getInfoWindowFromLayout(O,P,N,this.showInfoWindow);}else{var Q=this.getInfoWindowSelectorControl(O),M=this.findSelectorTarget(Q);if(!(!!Q&&M)){return this.getDefaultInfoWindow(O,N);}}},getInfoWindowFromLayout:function B(U,N,P,Y){var M=this,W=this.doc,X=W.getLayouts(),O=this.iwLayoutKey,Q=X[mstrmojo.array.find(X,"k",O)],Z="\x1F",S="12",V=P.attrid+Z+S+Z+P.eid;var R={layoutKey:O,groupByIDs:V};W.selectLayout(Q,(O!==W.model.currlaykey),{complete:function(){Q.defn.loaded=false;W.getNewLayout(R,X,false,{complete:function(){mstrApp.hideMessage();},submisson:function(){mstrApp.showMessage();},success:function(k){var b=k.node,e,j=document.createElement("div"),q=j.style,o=b.defn.fmts.width,f=b.defn.fmts.height||b.data.mh;e=new mstrmojo.Overlay({children:[k]});e.set("width",o);e.set("height",f);var l=document.createElement("div");e.placeholder=l;e.render();q.overflow="hidden";j.appendChild(e.domNode);var g=new google.maps.InfoWindow({content:j});M.openedInfoWindow=g;g.open(N,P);var d=300,p=0,a=window.setInterval(function(){var t=j.parentNode;if(t){var h=t.offsetWidth,s=t.offsetHeight;if(h!==parseInt(o,10)||s!==parseInt(f,10)){e.setDimensions(s+"px",h+"px");window.clearTimeout(a);}}p+=d;if(p>10*d){window.clearTimeout(a);}},d);}},true);}});},getInfoWindowSelectorControl:function E(M){if(!this.sc){this.sc=M.gts.row[0].sc;}return this.sc;},postHandleMarkerClick:function H(N,P){var R=this.gridData,S=this.getInfoWindowSelectorControl(R);if(S&&S.tks){var M=this,U=null,Q=M.model.docModel,V=Q.getDataService(),O=V.getSelectorElementsAction({ck:S.ck,eid:P.eid,ctlKey:S.ckey,include:S.include});V.submitUpdates(O,{success:function(z){var x=Q.getTargetDefn(S.tks);if(z.pukeys){x=Q.getTargetDefn(z.pukeys);}U=Q.updateDataCache(z.data,x);var u=M.findSelectorTarget(S);if(u){var d=Q.getTargetDefn(u),W="*l"+z.currlaykey+"*k"+u+"*x1*t"+Q.buildTime,k=W+"_ifw",X=mstrmojo.all[k];if(X){X.destroy();}var a=new mstrmojo.maps.jsmap.AndroidDocMapInfoWindow({id:k,parent:M,builder:M.builder,model:Q,psKey:u,psId:W});var j=d[u].fmts,o=document.createElement("div"),p=o.style,e=j.width,s=j.height;a.set("width",e);a.set("height",s);var b=document.createElement("div");a.placeholder=b;a.render();p.height=s;p.width=e;p.overflow="hidden";o.appendChild(a.domNode);var Y=new google.maps.InfoWindow({content:o});var q=Y.close;Y.close=function(){q.call(Y);a.destroy();delete M.openedInfoWindow;};M.openedInfoWindow=Y;Y.open(N,P);var f=300,g=0,Z=window.setInterval(function(){var w=o.parentNode;if(w){var h=w.offsetWidth,t=w.offsetHeight;if(h!==parseInt(e,10)||t!==parseInt(s,10)){a.setDimensions(t+"px",h+"px");window.clearTimeout(Z);}}g+=f;if(g>10*f){window.clearTimeout(Z);}},f);}var l={name:"partialUpdate",tree:z.data,ids:U};if(!mstrmojo.hash.isEmpty(l.ids.ifws)){delete l.ids.ifws[u];}Q.raiseEvent(l);}},{config:mstrmojo.DocDataService.PROGRESS_CONFIG,params:{onAndroid:true}});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.maps.jsmap.AndroidMap");mstrmojo.maps.jsmap.AndroidRptMap=mstrmojo.declare(mstrmojo.maps.jsmap.AndroidMap,null,{scriptClass:"mstrmojo.maps.jsmap.AndroidRptMap",setModel:function A(B){this._super(B);this.controller.getPageByTree(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.maps.androidmap.AndroidMap","mstrmojo.maps.androidmap.AndroidDocMapInfoWindow","mstrmojo.Image","mstrmojo.DynamicClassFactory","mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.DocPanel","mstrmojo.hash","mstrmojo.array","mstrmojo.dom");var G=mstrmojo.dom;var K;var j=0,N=1,X=mstrmojo.hash;function H(o){if(!o||!o.p_fmts){return o;}var l=o.p_fmts;var p=parseInt(l.top)||0;var q=parseInt(l.height)||0;var k=parseInt(o.height)||0;return{top:(p+q-k)+"px",left:l.left,width:o.width,height:o.height,"z-index":l["z-index"]};}function g(s,q){if(s&&q){if(s["z-index"]>q["z-index"]){return false;}var l=parseInt(s.left),x=parseInt(s.top),p=parseInt(s.width),u=parseInt(s.height),k=parseInt(q.left),w=parseInt(q.top),o=parseInt(q.width)||0,t=parseInt(q.height)||0;return((((l<=k)&&(k<l+p))||((k<l)&&(l<k+o)))&&(((x<=w)&&(w<x+u))||((w<x)&&(x<w+t))));}return false;}function O(){if(!mstrApp.renderingMap||(mstrApp.renderingMap===this.id)){mstrApp.renderingMap=this.id;return true;}else{return false;}}function S(){if(mstrApp.renderingMap===this.id){delete mstrApp.renderingMap;return true;}return false;}mstrmojo.maps.androidmap.AndroidDocMap=mstrmojo.declare(mstrmojo.maps.androidmap.AndroidMap,[mstrmojo._Formattable],{scriptClass:"mstrmojo.maps.androidmap.AndroidDocMap",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@domNodeCssText}" mstrAttach:touchstart></div>',formatHandlers:{domNode:["left","top","z-index","height","width","border","border-color","border-style","border-width"]},sc:null,domNodeCssText:"position:relative;",lastSelectedRow:null,hasTarget:function L(){var k=this.getInfoWindowSelectorControl(this.gridData);return !!(k&&k.tks);},postBuildRendering:function a(){window.mapId=this.id;this._touchListener=mstrmojo.touchManager.attachEventListener("touchesBegin",this.id,function(k){var l=this.openedInfoWindow;if(l){if(!G.contains(this.domNode,k.touch.target,true,document.body)){l.close();}}});return this._super();},destroy:function f(k){var l=this._touchListener;if(l){mstrmojo.touchManager.detachEventListener(l);delete this._touchListener;}if(this.mapRendered){this.removeMap();}this._super(k);},setModel:function P(k){this.doc=k.controller.view;this._super(k);},getController:function d(){return this.doc.controller;},initFromVisProps:function e(k){this._super(k);if(!k){return ;}this.iwDocLayout=(parseInt(k.dl,10)===1);if(k.lyt){this.iwLayoutKey=k.lyt;}},findSelectorTarget:function R(s){if(s&&s.tks){var o=this.xtabModel.docModel,l=s.tks.split("\u001E"),p=0,k=l.length;for(p=0;p<k;++p){var q=o.getTargetDefn(l[p]);if(q[l[p]].ifw){return l[p];}}}return null;},findIntersectingComponents:function D(){var p=this,t,o=this.getFormats();while(p.scriptClass!="mstrmojo.DocSubsection"||p.scriptClass!="mstrmojo.DocInfoWindow"){t=p;p=p.parent;if(!p){break;}var s=p.children,l=(s&&s.length)||0,q=null,k;for(k=0;k<l;k++){q=s[k];if(q!=t&&q.getFormats&&g(H(o),H(q.getFormats()))){return true;}}}return false;},getGridModel:function(){var k=this._super();delete k.layoutModel;delete k.layoutNode;return k;},dispatchMapData:function C(){if(!O.call(this)){this.domNode.innerHTML=mstrmojo.desc(9480,"Only one map visualization is supported at a time");mstrmojo.css.addClass(this.domNode,"noMapVis");return ;}var q=this.doc,k=q.model,o=this.getViewHierarchy(),p=this.getMapModel(),x=this.simplifyGridData(),s=(q.getSupportedLayouts&&q.getSupportedLayouts())||q.getLayouts(),t=!!this.isFullScreenWidget?N:j,w=false,u=q.getCurrentLayout(),l;l=JSON.stringify({did:q.did,ttl:q.ttl,st:q.st,mid:k.mid,ci:k.ci,bs:k.bs,zt:k.zt,defn:k.defn,currlaykey:k.currlaykey});delete p.model;if(u.setMapID){u.setMapID(this.id);}if(!t){w=this.findIntersectingComponents();}mstrMobileApp.loadMap(JSON.stringify(X.copy({fullScreen:t,infoWindow:this.getInfoWindowConfig(),viewTree:o,mapPath:this.mapPath,active:w,docModelId:this.xtabModel.docModel.id,hasTarget:this.hasTarget(),zt:k.zt,gdProp:x.prop},p)),x.es,x.data,l);this.mapRendered=true;},getViewHierarchy:function(){var u=[];var s=this.parent,k=[],t=X.copy(this.fmts,{}),l=this;k.push(t);while(s){t=X.copy(s.fmts,{});t.id=s.id;u.push(t.id);if(s.scriptClass==="mstrmojo.MobileDocLayoutViewer"){delete t.width;delete t.height;}else{if(s instanceof mstrmojo.DocPanel){var q=parseInt(s.domNode.style.left,10);if(q>0){s.parent._scrollOffsetLeft=q;}}else{if(s.scriptClass==="mstrmojo.DocSection"){if(s.domNode.offsetTop){t.top=s.domNode.offsetTop+"px";}}else{if(s.scriptClass==="mstrmojo.DocInfoWindow"){if(s.containerNode){t.top=s.containerNode.offsetTop+"px";t.left=s.containerNode.offsetLeft+"px";}s.onClose=function(){mstrMobileApp.hideMapView(1);};}}}}if(s._scroller){if(!s._scroller.scrollMoveListener){var o=function(p){mstrMobileApp.scrollerUpdated(JSON.stringify({id:this.id,x:p.x-(this._scrollOffsetLeft||0),y:p.y}));};s._scroller.attachEventListener("scrollMoved",s.id,o);s._scroller.attachEventListener("scrollDone",s.id,o);s._scroller.attachEventListener("transformAnim",s.id,o);s._scroller.scrollMoveListener=true;}t.scroller=true;}k.splice(0,0,t);s=s.parent;}this.mapPath=u.join("")+":"+JSON.stringify(k);return k;},getInfoWindowConfig:function Z(){if(!this.iwConfig){if(this.iwDocLayout){this.iwConfig={dft:false};}else{var s=this.gridData,q=this.getInfoWindowSelectorControl(s);if(q){var o=this.xtabModel.docModel,p=o.getTargetDefn(q.tks),l=this.findSelectorTarget(q);if(l){this.iwConfig={dft:false};var k=o.getTargetDefn(l)[l].fmts;this.iwConfig.size={w:parseInt(k.width,10),h:parseInt(k.height,10)};return this.iwConfig;}}this.iwConfig={dft:true};}}return this.iwConfig;},switchToImage:function A(p,o,l){var k=this.imgPreview;if(p&&k.hasRendered){if(k.src!==p){togglePreviewCtrl(k,0);k.domNode.className=PREVIEW_CLS_NAME;k.set("src",p);k.set("width",o);k.set("height",l);k.set("visible",true);}else{if(mstrMobileApp&&mstrMobileApp.hideMapView){togglePreviewCtrl(this.imgPreview,1);window.setTimeout(function(){mstrMobileApp.hideMapView(0);},100);}}}else{mstrMobileApp.hideMapView(0);}},hidePreview:function V(){togglePreviewCtrl(this.imgPreview,0);},resetLayout:function F(){if(this.iwDocLayout&&this.preIWLayout){this.doc.selectLayout(this.preIWLayout,true,null,true);this.preIWLayout=null;}},closeInfoWindow:function E(){do{mstrApp.closeDialog();}while(mstrmojo.all.mstrMapInfoWindow);this.resetLayout();},removeMarkerAnchor:function W(){var k=mstrmojo.all.mstrMapMarkerAnchor;if(k){k.destroy();}k=document.getElementById("mstrMapMarkerAnchor");if(k){k.parentNode.removeChild(k);k.undrender();}k=undefined;var l=this;if(this.iwDocLayout){window.setTimeout(function(){console.log("calling resetLayout");l.resetLayout();},0);}},beforeViewHidden:function J(k){this.unrender();},handleMarkerSelection:function I(u,o,w,p,q){console.log("handleMarkerSlection: ri="+u+"dir="+o+"mH="+w+"mW="+p+"rD="+q);var s=this.anchor,k,t=20,l=this.domNode;if(!s){this.anchor=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"androidMap-anchorBox"});s=this.anchor;}else{mstrmojo.css.removeClass(s.domNode,"bottomAnchor");mstrmojo.css.removeClass(s.domNode,"leftAnchor");s.unrender();}p=(p<(parseInt(l.style.width,10)))?p:(parseInt(l.style.width));w=(w<(parseInt(l.style.height,10)))?w:(parseInt(l.style.height));if(o==="v"){k="bottomAnchor";rP=Math.round((q/w)*100);s.set("width",p+"px");w=(w/2)-q;s.set("height",w+"px");}else{k="leftAnchor";rP=Math.round((q/p)*100);p=(p/2)-q;s.set("width",p+"px");s.set("height",w+"px");}s.set("zoom","1");s.render();mstrmojo.css.addClass(s.domNode,k);l.appendChild(s.domNode);if(this.iwDocLayout){this.handleMarkerInfoWindowLayoutSelection(u,o,s,w,p,q,rP);}else{this.handleMarkerTargetSelection(u,o,s,w,p,q,rP);}},handleMarkerInfoWindowLayoutSelection:function B(z,AD,q,x,p,s,k){var AH=this.gridData,AE=AH.gts.row[0],t=AE.id,AA=AH.ghs.rhs.items[z],AI=AA&&AA.items[0].idx,l=this,w=(AI>=0)?AE.es[AI].id:-1;if(this.iwDocLayout){var AK=this.doc,AF=AK.getLayouts(),u=this.iwLayoutKey,AG=AF[mstrmojo.array.find(AF,"k",u)],AB="\x1F",AC="12",o=t+AB+AC+AB+w;var AJ={layoutKey:u,groupByIDs:o,reload:true};if(!this.preIWLayout){this.preIWLayout=AF[mstrmojo.array.find(AF,"k",this.defn._lkz)];}console.log("Obscuring non map view");mstrMobileApp.obscureNonMapView();(function(AR,AP){var AO=AK,AL=AO.model,AQ=AL.getDataService(),AM=AR.layoutKey,AN=AP[mstrmojo.array.find(AP,"k",AM)];if(AN.defn&&(AR.reload||AN.defn.loaded===false)){AQ.loadDocLayout(AR,{success:function(Am){var AT=l.xtabModel.docModel,Al=u,Ak;Am.key=Al;Am.isSelected=false;AT.replaceLayout(Al,Am);Ak=AK.rebuildLayout(Al,AP);l.lastSelectedRow=z;var Af=Ak.node,AV=mstrApp.getScreenDimensions(),Ab=AV.w*0.85,Aj=AV.h*0.9,AZ=AV.w*0.6,Ah=AV.h*0.5,AY=Af.defn.fmts.width||(AZ+"px"),Ag=Af.defn.fmts.height||Af.data.mh||(Ah+"px"),AX=1,AS=l.domNode,Ai=new mstrmojo.Overlay({cssClass:"iwOverlay",children:[Ak]});AZ=parseInt(q.width,10)>parseInt(AY,10)?parseInt(q.width,10):parseInt(AY,10);Ah=parseInt(q.height,10)>parseInt(Ag,10)?parseInt(q.height,10):parseInt(Ag,10);Ai.set("width",q.width);Ai.set("height",q.height);Ai.render();q.domNode.appendChild(Ai.domNode);var AU=0,Ac=0,Ae,AW=Ai.domNode.getElementsByClassName("mstrmojo-DocLayout")[0],Ad=Ai.domNode.getElementsByClassName("mstrmojo-DocSubsection"),Aa;if(AZ>Ah){AX=(parseInt(q.width,10)/parseInt(AY,10));}else{AX=(parseInt(q.height,10)/parseInt(Ag,10));}AX=(AX<=1)?AX:1;if(AD==="v"){AU=(parseInt(q.width,10)-parseInt(AY,10))/2;AU=AU>0?Math.floor(AU/AX):0;for(Aa=0;Aa<Ad.length;Aa++){Ad[Aa].style.left=AU+"px";}}else{Ac=(parseInt(q.height,10)-parseInt(Ag,10))/2;Ac=Ac>0?Math.floor(Ac/AX):0;for(Aa=0;Aa<Ad.length;Aa++){Ad[Aa].style.top=Ac+"px";}}AW.style.zoom=AX;AK.selectLayout(AN,true);}});}else{AO.selectLayout(AN,true);}})(AJ,AF);return true;}return false;},handleMarkerTargetSelection:function b(z,AB,s,x,q,t,o){var AG=this.gridData,AC=AG.gts.row[0],u=AC.id,AA=AG.ghs.rhs.items[z],AH=AA&&AA.items[0].idx,p=this,w=(AH>=0)?AC.es[AH].id:-1;var k=this.getInfoWindowSelectorControl(AG),AI=this.findSelectorTarget(k);if(k&&k.tks){var l=null,AF=p.xtabModel.docModel,AE=AF.getDataService(),AD=AE.getSelectorElementsAction({ck:k.ck,eid:w,ctlKey:k.ckey,include:k.include});AE.submitUpdates(AD,{success:function(Ad){var Ac=AF.getTargetDefn(k.tks);if(Ad.pukeys){Ac=AF.getTargetDefn(Ad.pukeys);}l=AF.updateDataCache(Ad.data,Ac);var Ab=p.findSelectorTarget(k);if(Ab){var AS=AF.getTargetDefn(Ab),AX=Ab+"_ifw",AT=mstrmojo.all[AX],AJ="*l"+Ad.currlaykey+"*k"+Ab+"*x1*t"+AF.buildTime;if(AT){AT.destroy();}var AP=new mstrmojo.maps.androidmap.AndroidDocMapInfoWindow({id:AX,builder:p.doc.builder,model:AF,psKey:Ab,psId:AJ});var AV=AS[Ab].fmts,AM=parseInt(AV.width,10)||width,AU=parseInt((AV.p_fmts&&AV.p_fmts.height)||AV.height,10)||height,AR=1,AK=p.domNode,AO=s.domNode;AP.set("width",q+"px");AP.set("height",x+"px");AP.render();AO.appendChild(AP.domNode);var AN,AW,AQ=AP.domNode;var Aa=q>AM?q:AM,AL=x>AU?x:AU;if(Aa>AL){AR=(parseInt(s.width,10)/parseInt(AM,10));}else{AR=(parseInt(s.height,10)/parseInt(AU,10));}AR=(AR<=1)?AR:1;if(AB==="v"){if(q>AM){AN=(q-AM)/2;AN=AN>0?AN:0;AQ.style.left=Math.floor(AN/AR)+"px";}}else{if(x>AU){AW=(x-AU)/2;AW=AW>0?AW:0;AQ.style.top=Math.floor(AW/AR)+"px";}}AQ.style.zoom=AR;AQ.style.position="absolute";var AZ=AQ.getElementsByClassName("mstrmojo-DocSubPanel-content")[0];AO.style.backgroundColor=AZ.style.backgroundColor;}var AY={name:"partialUpdate",tree:Ad.data,ids:l,anchor:s.domNode};if(!mstrmojo.hash.isEmpty(AY.ids.ifws)){delete AY.ids.ifws[Ab];}AF.raiseEvent(AY);}},{config:mstrmojo.DocDataService.PROGRESS_CONFIG,params:{onAndroid:true}});}},slice:function U(w,s){console.log("slice method called"+w+" indexes="+s);var x=this.gridData.gts.row,t,k="\x1e",q,p,u,o,l=s.length;t=x[w].sc;if(t===undefined||t.tks===undefined){w=0;t=x[w].sc;if(t===undefined||t.tks===undefined){return ;}}q=[];for(p=0;p<l;p++){q.push(x[w].es[s[p]].id);}u=q.join(k);o={ck:t.ck,ctlKey:t.ckey,eid:u,tks:t.tks,include:true,suppressIW:true,type:mstrmojo.EnumRWUnitType.GRID};this.xtabModel.docModel.slice(o);},ontouchstart:function M(){if(this.mapRendered){mstrMobileApp.showMapView(0);}},getInfoWindowSelectorControl:function Y(k){if(!this.sc&&!k.eg){this.sc=k.gts.row[0].sc;}return this.sc;},afterViewVisible:function Q(){window.setTimeout(function(){mstrMobileApp.showMapView(1);},300);},removeMap:function h(){console.log("remove map");this.closeInfoWindow();this.removeMarkerAnchor();this.resetLayout();if(S.call(this)){console.log("will call hideMapView soon");mstrMobileApp.hideMapView(1);}console.log("done with remove map");},unrender:function(){this.imgPreview.src="";this.lastSelectedRow=null;if(this.anchor){this.anchor.destroy();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.maps.androidmap.AndroidMap");mstrmojo.maps.androidmap.AndroidRptMap=mstrmojo.declare(mstrmojo.maps.androidmap.AndroidMap,null,{scriptClass:"mstrmojo.maps.androidmap.AndroidRptMap",setModel:function A(B){this._super(B);this.controller.getPageByTree(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisChart");var I=1;var E=2;var F=3;var K=4;mstrmojo.VisMicroChartLine=mstrmojo.declare(mstrmojo.VisChart,null,{scriptClass:"mstrmojo.VisMicroChartLine",isDrawAxis:false,margin:{t:5,r:2,b:1,l:2},showHighlightLine:false,themeColor:"#FFFFFF",isDrawRefArea:true,noBackground:true,isAnimateLines:false,toolTipMain:null,mainWidth:0,mainLeftPos:0,reDrawChart:function C(){var N=this.context,M=this.canvas,O=M.width,L=M.height;N.clearRect(0,0,O,L);this.data.processLinearData(this);this.windowSize=this.model.series[0].rv.length;this.utils.fillBackground(this);if(this.windowSize<=1){return ;}this.drawChart();},setColorByTheme:function G(){var L=this.config;if(this.theme===I||this.theme===E){this.startPointColor="#50B5D8";this.endPointColor="#50B5D8";this.otherPointColor="#50B5D8";this.isDrawRefArea=false;this.sparkLineColor="#50B5D8";this.refLineColor="#FF781D";}else{this.startPointColor="#000000";this.endPointColor="#FF0000";this.otherPointColor="#663300";this.isDrawRefArea=L.mbRefArea;this.sparkLineColor=L.mwSeriesLineCol||"#333333";this.refLineColor=L.mwRefLineCol||"#0066ff";}var M=mstrMobileApp.getDeviceDPI();this.sparkLineWidth=M>160?2:1;this.refLineWidth=1;this.startEndPointRadius=M>=320?4:M>=240?3:2;},drawChart:function J(){this.setColorByTheme();var S=this.config;var N=this.context;var O=this.model;var M=O.series;var U=O.mvalues;var V=this.margin;var W=this.getHeight();var Y=this.getWidth();var b=this.utils;var X=U[U.length-1];var P=U[0];var d=U[U.length-1];var e=U[0];this.drawRefLine=false;if(this.refv&&this.refv.length>1&&S.mbRefLine){var a=parseFloat(this.refv[1].rv);if(isNaN(a)){this.drawRefLine=false;}else{this.drawRefLine=true;if(a>X){X=a;if(U.length===1){U[1]=X;}else{U[U.length-1]=X;}}if(a<P){P=a;if(U.length===1){U[1]=U[0];U[0]=X;}else{U[0]=P;}}}}this.themeColor=S.mwRefAreaCol||"#dedede";this.isDrawStartEndPoints=S.mbAllPoints?7:(S.mbEndPoints?3:0);if(this.isDrawStartEndPoints&1&&V.l<this.startEndPointRadius){V.l=this.startEndPointRadius;}if(this.isDrawStartEndPoints&2&&V.r<this.startEndPointRadius){V.r=this.startEndPointRadius-1;}if(O.err){return ;}if(!M){return ;}if(X!==P){this.RTY=(W-V.t-V.b-4)/(X-P);}else{this.RTY=0;}if(this.windowSize!==1){this.RTX=(Y-V.l-V.r-1)/(this.windowSize-1);}else{this.RTX=0;}var L=[];for(var Z=0;Z<this.windowSize;Z++){var f=parseFloat(M[0].rv[Z]);if(isNaN(f)){L[Z]=null;continue;}var R=(Z*this.RTX)+V.l;var Q=b.getYValue(this,f);L[Z]={x:R,y:Q};}if(L.length===0){return ;}d=b.getYValue(this,d);e=b.getYValue(this,e);if(d===undefined||e===undefined){d=W-4-V.b;e=V.t;}if(this.isDrawRefArea){N.fillStyle=this.themeColor;N.fillRect(V.l,e,Y-V.r-V.l,(d-e));}N.lineCap="round";N.lineWidth=this.sparkLineWidth;N.lineJoin="round";N.strokeStyle=this.sparkLineColor;b.drawLineSet(this,L,false,N);if(this.isDrawStartEndPoints){b.drawStartEndPoints(this,L,N,this.isDrawStartEndPoints);}if(this.drawRefLine){var Q=this.utils.getYValue(this,a);if(N.lineWidth%2===1){Q=Math.round(Q+0.5)-0.5;}N.beginPath();N.moveTo(V.l,Q);N.lineTo(Y-V.r,Q);N.lineWidth=this.refLineWidth;N.strokeStyle=this.refLineColor;N.stroke();}},highlightPoint:function H(R,U){var P=this,W=P.highlightContext,V=P.getHeight(),L=P.getWidth(),N=P.margin,O=P.model,S=P.utils;W.clearRect(0,0,L,V);if(R<0){return ;}var M=(R*P.RTX)+N.l;W.globalAlpha=1;W.strokeStyle=this.sparkLineColor;W.fillStyle=W.strokeStyle;var Q=S.getYValue(P,O.series[0].rv[R]);if(M<5){M=5;}if(M>L-5){M=L-5;}if(Q<5){Q=5;}if(Q>V-5){Q=V-5;}W.strokeStyle="FFFFFF";W.fillStyle=W.strokeStyle;W.globalAlpha=0.8;S.drawArc(this,M,Q,5,0,Math.PI*2,true,true,W);W.strokeStyle=this.sparkLineColor;W.fillStyle=W.strokeStyle;W.globalAlpha=1;S.drawArc(P,M,Q,5,0,Math.PI*2,true,false,W);S.drawArc(P,M,Q,2.5,0,Math.PI*2,true,true,W);this.highlightCanvas.id="highLightCav"+this.widget.domNode.id;},renderTooltip:function A(S,U,Q){ttp=this.widget._tooltip;if(S<0){ttp.toggle(false);return ;}var L=document.getElementById("highLightCav"+this.widget.domNode.id);if(L){var P=L.getContext("2d");L.id="";P.clearRect(0,0,1000,1000);}var g=this,a=this.model,W=a.series,R=W[0],e=this.utils,d=W.length,f=this.seriesIndex,V=a.colHeaders,Z=this.baseModel.rowHeaders,Y=this.margin,b=a.mtrcs.items;if(isNaN(this.kpiOffset)){this.kpiOffset=0;}var X=[];X.push({n:a.categories.tn,v:a.categories.items[S]});if(this.widget.sparklineProps.mstrAssMetric){X.push({n:this.widget.sparklineProps.mstrAssMetric,v:R.v[S]});}else{X.push({n:b[this.kpiOffset],v:R.v[S]});}if(this.refv&&this.refv.length>1&&this.config.mbRefLine){X.push({n:b[this.kpiOffset+1],v:this.refv[1].v});}ttp.displayInfo(X);ttp.toggle(true);ttp.setBorderColor(this.sparkLineColor);ttp.domNode.style.visibility="hidden";var M=mstrmojo.dom.position(this.widget.domNode,true),O=this.utils.getScreenZoomFactor(),N=Math.round(45*O);e.positionTooltip(ttp.domNode,{x:U-M.x,y:Q-M.y},this.widget.domNode,N);ttp.domNode.style.visibility="visible";},isTouchPointInGraphRange:function D(M,L){var N=this.margin;if(M<N.l||L<N.t||L>this.canvas.height-N.b){return false;}return true;},showTooltip:function B(W,V){if(!this.config.mbShowTooltip){return false;}var Q=this,L=Q.model;if(L.series[0].rv.length<=1){return false;}var R=mstrmojo.dom.position(this.domNode,true),P=W-R.x,O=V-R.y;if(!this.isTouchPointInGraphRange(P,O)){return false;}var U=Q.getTouchValue(P,O);var M=this.margin;if(U!==null){var S=(U*Q.RTX)+M.l;if(Q.widget.enableSmoothScroll){if(this.domNode.offsetLeft+S<this.widget._scroller.origin.x){return false;}}var N=(L.rne-L.rns>1)?L.rns:L.rns-1;if(Q.seriesIndex===-1||Q.switchSeriesOnTouch){Q.seriesIndex=Q.utils.getSeriesIndexAndYValue(Q,N+U,O).si;}if(L.series[Q.seriesIndex].rv[N+U]===""){return false;}Q.prevHighlight=Q.currentHighlight;Q.currentHighlight=U;if(!Q.widget.tooltipShow||Q.prevHighlight!=Q.currentHighlight){Q.renderTooltip(U,W,V);Q.highlightPoint(U,V);}return true;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.VisChart","mstrmojo.locales");var K=20;var I=-20;var O=25;var E=mstrmojo.hash;var A=null;mstrmojo.VisChartLine=mstrmojo.declare(mstrmojo.VisChart,null,{scriptClass:"mstrmojo.VisChartLine",fillinColor:null,rotateXLabels:false,isFillLinesArea:null,isAnimateLines:true,isDrawStartEndPoints:0,startEndPointRadius:5,startPointColor:null,endPointColor:null,prevLines:null,chartLineColors:["#0099FF","#FFB03C","#F26AE1","#888BF4","#93CA20","#FE2F68"],maxXLabels:6,DSS_XML_BASE_FORM_DATE:"8",drawChart:function L(){var U=this.model;if(U.err){return ;}var S=this.animationContext,V=U.mvalues,R=U.series,W=this.margin,Q=[],P=[],X=this.getHeight(),Y=this.getWidth(),h=this,f=this.utils;if(!R){return ;}var g=R.length;if(this.isDrawAxis&&this.drawYAxisLabels){W.l=f.getLabelWidthForMargin(this,U.mls);}h.RTY=(X-W.t-W.b-5)/(V[V.length-1]-V[0]);h.RTX=(Y-W.l-W.r-1)/(h.windowSize-1);var d=(V[0]+V[V.length-1])/2;var e=f.getYValue(h,d);for(var a=0;a<g;a++){Q=[];var Z=0;for(var b=0;b<h.windowSize;b++){var l=R[a].rv[b];if(l.length===0){continue;}Q[Z]={x:(b*h.RTX)+W.l,y:f.getYValue(h,l)};if(!this.prevLines){P[Z]={x:Q[Z].x,y:e};}Z++;}this.drawChartLine(Q,P,g,a,S);if(!this.multiLine){break;}}this.prevLines=Q;},drawChartLine:function C(a,X,R,U,P,Q){var W=this,Z=W.getHeight(),Y=W.utils;var V={rate:6};P.strokeStyle=Y.getColor(W);P.lineCap="round";P.lineWidth=Q||2;P.lineJoin="round";if(W.isAnimateLines&&(!W.multiLine||R===1)){if(W.prevLines){X=W.prevLines;if(X.length<a.length){for(var S=X.length;S<a.length;S++){X.push(a[X.length-1]);}}}Y.animateLineSet(W,W.prevLines||X,a,V);}else{if(W.multiLine&&R>1){P.strokeStyle=W.chartLineColors[U%6];}Y.drawLineSet(W,a,false,P);if(W.isFillLinesArea){Y.fillLinesArea(W,a.slice(0));}if(W.isDrawStartEndPoints){Y.drawStartEndPoints(W,a,P,W.isDrawStartEndPoints);}}},setMicroChartProperties:function F(){this.isDrawAxis=false;this.margin={t:0,r:5,b:0,l:5};this.showHighlightLine=false;this.isDrawStartEndPoints=3;},initFromVisProps:function J(P){if(!P){return ;}if(P.thc){this.themeColor="#"+P.thc;}if(P.shl==="0"){this.showHighlightLine=false;}if(P.mc==="1"){this.setMicroChartProperties();}},postCreate:function N(){if(this._super){this._super();}if(this.rotateXLabels){this.margin.b=75;}if(typeof (this.isFillLinesArea)==="undefined"&&!this.multiLine){this.isFillLinesArea=true;}},drawLabels:function D(g){if(!this.isDrawAxis){return ;}if(this._super){this._super();}if(!this.drawXAxisLabels){return ;}var z=this,W=z.model.categories,t=W.items,R=W.tp,s=z.utils,u=z.margin,j=t.length,f=null,Z=null,Y=0,p=null,P=z.isTimeSeries,h=z.animationContext,Q=z.drawGridLines;var e=z.prevXLabel;e.x=0;e.y=0;e.w=0;h.save();h.globalAlpha=1;h.strokeStyle=s.rgb2rgbStr(z.formatProp.textClr,0.35);h.lineWidth=1;h.lineCap="round";var U=j>z.maxXLabels?z.maxXLabels:j;var q=null;if(P){q=document.createElement("div");z.xdiv=q;U*=(z.totalChartWidth/(z.chartWidth));}if(z.rotateXLabels){Y=z.canvas.height+I;}else{if(P){Y=z.canvas.height-this.margin.b+5;}else{Y=z.canvas.height-O;}}var d=Math.round(j/U);if(d===0){d=1;}var V=Math.round(d*z.RTX)-z.xLabelPadding;A=null;var S={mn:0,dt:0,yr:0};if(P){var w=-1;this.needRedrawVerticalLine=false;var b=Math.ceil(z.ACrns/d)*d-z.ACrns;for(var k=z.ACrns+b;k<z.ACrne;k+=d){Z=((k-z.ACrns)*z.RTX);var o=t[k];if(w<0&&k>=z.model.rns){w=0;}if(P&&(R.toString()===z.DSS_XML_BASE_FORM_DATE)){if(w==0){A=null;w=1;}o=z.getFormattedDateLabel(o,S);}if(z.rotatXLabels){p=s.addLabel(z,o,Z-K,Y,null,true,e);}else{p=s.addLabel(z,o,Z,Y,null,false,e);}if(p){if(Q&z.drawVerticalGridLines){A=E.clone(S);if(!g){var a=Math.floor(Z)+0.5;s.drawLineSet(z,[{x:a,y:z.canvas.height-u.b},{x:a,y:u.t}],false,h);}}}}}else{for(var k=0;k<j;k+=d){Z=(k*z.RTX)+u.l;var o=t[k];if(P&&(R.toString()===z.DSS_XML_BASE_FORM_DATE)){o=z.getFormattedDateLabel(o,S);}if(z.rotateXLabels){p=s.addLabel(z,o,Z-K,Y,null,true,e);}else{p=s.addLabel(z,o,Z,Y,V,false,e);}if(p){if(Q&z.drawVerticalGridLines){A=E.clone(S);s.drawLineSet(z,[{x:Z,y:z.canvas.height-u.b},{x:Z,y:u.t}],false,h);}}}}if(q){if(this.isTimeSeries){z.xLabelsDiv.innerHTML=q.innerHTML;z.xdiv=null;}else{var X=z.animationCanvas;z.itemsContainerNode.innerHTML=q.innerHTML;z.itemsContainerNode.insertBefore(X,z.itemsContainerNode.firstChild);z.xdiv=null;}}h.restore();},getFormattedDateLabel:function M(W,R){if(isNaN(W)){return W;}var S=W;try{W=this.utils.convertRawValueToMilliseconds(W);var Q=new Date(Number(W));var V=R.mn=mstrmojo.locales.datetime.MONTHNAME_SHORT[Q.getMonth()];var P=R.yr=Q.getFullYear().toString().substring(2);R.dt=Q.getDate();if(!A||(V!==A.mn&&P!==A.yr)){S=V+" "+R.dt+" "+P;}else{if(V!==A.mn){S=V+" "+R.dt;}else{S=R.dt;}}}catch(U){}return S;},removeLabels:function G(){var P=this.domNode.getElementsByClassName("mstrmojo-Chart-lbl");for(var Q=P.length-1;P&&Q>=0;Q--){P[Q].parentElement.removeChild(P[Q]);}},highlightPoint:function H(b,e){var Z=this,g=Z.highlightContext,f=Z.getHeight(),S=Z.margin,Y=Z.model,d=Z.utils,W=Z.seriesIndex;var R=(b*Z.RTX)+S.l;if(this.prevHighlight>=0){var X=(this.prevHighlight*Z.RTX)+S.l;var P=10;var U=8;var a=S.t-U>0?S.t-U:0;g.clearRect(X-P,a,X+P,f-S.b);}if(b<0){return ;}var R=(b*Z.RTX)+S.l;g.shadowBlur=5;g.shadowColor="#000";g.globalAlpha=1;if(Z.showHighlightLine){g.strokeStyle=this.highlightColor;g.fillStyle=this.highlightColor;g.lineWidth=2;g.lineCap="round";d.drawLineSet(Z,[{x:R,y:S.t},{x:R,y:f-S.b}],false,g);}else{g.strokeStyle=d.getColor(Z);g.fillStyle=g.strokeStyle;}var h=Y.series,Q=h.length,a=d.getYValue(Z,h[W].rv[b]);if(!Z.multiLine){d.drawArc(Z,R,a,5,0,Math.PI*2,true,true,g);}else{if(Z.showHighlightLine){if(Q>1){g.strokeStyle=this.chartLineColors[0];g.fillStyle=g.strokeStyle;}for(var V=0;V<Q;V++){g.strokeStyle=this.chartLineColors[V%6];if(V>0){g.fillStyle=g.strokeStyle;}a=d.getYValue(Z,h[V].rv[b]);d.drawArc(Z,R,a,5,0,Math.PI*2,true,true,g);}}else{if(Q>1){g.strokeStyle=this.chartLineColors[W];g.fillStyle=g.strokeStyle;}d.drawArc(Z,R,d.getYValue(Z,h[W].rv[b]),5,0,Math.PI*2,true,true,g);}}},refreshChart:function B(){var P=this.getHeight(),Q=this.getWidth();this.highlightContext.clearRect(0,0,Q,P);this.animationContext.clearRect(0,0,Q,P);this.removeLabels();this.drawChart();this.drawLabels();}});})();(function(){mstrmojo.requiresCls("mstrmojo.VisChart");var J=1;var F=2;mstrmojo.VisMicroChartBar=mstrmojo.declare(mstrmojo.VisChart,null,{scriptClass:"mstrmojo.VisMicroChartBar",isDrawAxis:false,margin:{t:0,r:1,b:0,l:1},showHighlightLine:false,themeColor:"#FFFFFF",noBackground:true,isAnimateLines:false,toolTipMain:null,labelLen:0,mainWidth:0,mainLeftPos:0,markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="width:{@width};height:{@height};top:{@top};left:{@left};position:relative;"  mstrAttach:mousedown,mouseup,mousemove,click ><canvas width="{@width}" height="{@height}"></canvas><canvas style="position:absolute;left:0;top:0" width="{@width}" height="{@height}"></canvas><canvas style="position:absolute;left:0;top:0" width="{@width}" height="{@height}"></canvas><div style="position:absolute;left:0px;top:0px;padding-left:1px;padding-top:1px;text-align:left;-webkit-text-size-adjust: none; font-family: Roboto"></div><div style="position:absolute;left:0px;bottom:0px;padding-left:1px;padding-bottom:1px;text-align:left;-webkit-text-size-adjust: none;font-family: Roboto"></div></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;},animationCanvas:function(){return this.domNode.childNodes[1];},highlightCanvas:function(){return this.domNode.childNodes[2];},minLabel:function(){return this.domNode.childNodes[3];},maxLabel:function(){return this.domNode.childNodes[4];}},postBuildRendering:function C(){if(this._super){this._super();}this.windowSize=this.model.series[0].rv.length;if(this.windowSize===1){this.plot();}},getTouchValue:function L(M){var O=this.model.series[0];var P=0;for(var N=0;N<O.v.length;N++){if(M<this.hightLightPos[N].x){if(N===0){P=N;}else{P=(this.hightLightPos[N].x+this.hightLightPos[N-1].x)/2>M?(N-1):N;}break;}}if(N!==O.v.length){}else{P=N-1;}return P;},isTouchPointInGraphRange:function E(N,M){if(N<=this.labelLen+1||N>=this.getWidth()-1){return false;}return true;},showTooltip:function A(P,O){if(!this.config.mbShowTooltip||this.noDataToShowTtp){return false;}var N=this.model,Q=N.series[0];if(Q.rv.length<1){return false;}var S=mstrmojo.dom.position(this.domNode,true);var X=P-S.x;var W=O-S.y;if(!this.isTouchPointInGraphRange(X,W)){return false;}var V=this.getTouchValue(X,W);var U=this.hightLightPos[V].x;if(this.widget.enableSmoothScroll){if(this.domNode.offsetLeft+U<this.widget._scroller.origin.x){return false;}}this.prevHighlight=this.currentHighlight;this.currentHighlight=V;if(!this.widget.tooltipShow||this.prevHighlight!=this.currentHighlight){X=Math.round(this.hightLightPos[V].x);W=Math.round(this.hightLightPos[V].y);var M=Q.rv[V]*1;var R=this.posBarColor;if(M<0){R=this.negBarColor;}if(Q.thClr&&Q.thClr[V]){R=Q.thClr[V];}this.renderTooltip(V,P,O,R);this.highlightPoint(X,W,R);}return true;},renderTooltip:function A(a,Z,Y,V){var O=this.model,S=this.config,Q=O.series[0],N=this.getWidth(),U=O.mtrcs.items,X=this.utils;var b=this.widget._tooltip;if(isNaN(this.kpiOffset)){this.kpiOffset=0;}var R=[];R.push({n:O.categories.tn,v:O.categories.items[a]});if(this.widget.sparklineProps.mstrAssMetric){R.push({n:this.widget.sparklineProps.mstrAssMetric,v:Q.v[a]});}else{R.push({n:U[this.kpiOffset],v:Q.v[a]});}if(this.refv&&this.refv.length>1&&this.config.mbRefLine){R.push({n:U[this.kpiOffset+1],v:this.refv[1].v});}b.displayInfo(R);b.toggle(true);b.setBorderColor(V);b.domNode.style.visibility="hidden";var W=mstrmojo.dom.position(this.widget.domNode,true),M=this.utils.getScreenZoomFactor(),P=Math.round(45*M);X.positionTooltip(b.domNode,{x:Z-W.x,y:Y-W.y},this.widget.domNode,P);b.domNode.style.visibility="visible";},highlightPoint:function D(Q,N,R){var P=this.highlightContext,S=this.getWidth(),M=this.getHeight(),O=this.utils;P.clearRect(0,0,S,M);P.globalAlpha=1;Q=Q>5?Q:5;if(Q>S-5){Q=S-5;}N=N>5?N:5;if(N>M-5){N=M-5;}P.globalAlpha=0.8;P.strokeStyle="FFFFFF";P.fillStyle=P.strokeStyle;O.drawArc(this,Q,N,5,0,Math.PI*2,true,true,P);P.strokeStyle=R;P.fillStyle=P.strokeStyle;P.globalAlpha=1;O.drawArc(this,Q,N,5,0,Math.PI*2,true,false,P);O.drawArc(this,Q,N,2.5,0,Math.PI*2,true,true,P);this.highlightCanvas.id="highLightCav"+this.widget.domNode.id;},textLen:function I(O){var M=0;for(var N=0;N<O.length;N++){if(O.charCodeAt(N)>255||O.charCodeAt(N<0)){M+=2;}else{M++;}}return M;},handleTouchMove:function(){},reDrawChart:function B(){var O=this.context,N=this.canvas,P=N.width,M=N.height;O.clearRect(0,0,P,M);this.data.processLinearData(this);this.windowSize=this.model.series[0].rv.length;this.utils.fillBackground(this);if(this.windowSize<1){return ;}this.drawChart();},setColorByTheme:function H(){var M=this.config;if(this.theme==J||this.theme==F){this.posBarColor="#598200";this.negBarColor="#CC3A06";this.xAxisLineWidth=1;this.xAxisLineColor="#7F7F7F";this.refLineWidth=1;this.refLineColor="#00A6EF";}else{this.posBarColor=M.mwPosCol||"#009900";this.negBarColor=M.mwNegCol||"#ff0000";this.xAxisLineWidth=1;this.xAxisLineColor="#000000";this.refLineWidth=1;this.refLineColor=M.mwRefLineCol;}},drawChart:function K(){var R=this.model;var P=this.config;if(R.err){this.noDataToShowTtp=true;return ;}this.setColorByTheme();var AG=this.context,AF=R.series,O=this.getHeight(),M=this.getWidth(),k=this,AH=this.utils;var AA=0;var s=this.margin.l;var Y=this.margin.r;var AE=0,q=0,U="",b="",X=R.series[0];for(var AC=0;AC<X.v.length;AC++){var j=parseFloat(X.rv[AC]);if(AC===0){q=AE=j;U=b=X.v[AC];}else{if(j>q){q=j;b=X.v[AC];}else{if(j<AE){AE=j;U=X.v[AC];}}}}if(isNaN(AE)&&isNaN(q)){this.minLabel.innerHTML="";this.maxLabel.innerHTML="";this.noDataToShowTtp=true;return ;}this.noDataToShowTtp=false;if(P.mbShowLegend){var g=Math.ceil(Math.min(12,(O/2)*0.7));var AB=(window.getLocaleString?window.getLocaleString("MICROCHARTS_MIN","Min:"):"Min:")+U.replace(/[ ]/g,"");var W=(window.getLocaleString?window.getLocaleString("MICROCHARTS_MAX","Max:"):"Max:")+b.replace(/[ ]/g,"");this.minLabel.innerHTML=AB;this.maxLabel.innerHTML=W;var Z=M-10;if(Z>M*0.5){Z=Math.floor(M*0.5);}do{this.minLabel.style.fontSize=g+"px";this.maxLabel.style.fontSize=g+"px";var N="Roboto";var V=this.widget.getTextWidth(AB,"",N,g,"px",this.isTextBold);var w=this.widget.getTextWidth(W,"",N,g,"px",this.isTextBold);var x=V>w?V:w;AA=x+s;g-=1;}while(AA>Z&&g>5);g+=1;}else{AA=s;}this.labelLen=AA;if(this.refv&&this.refv.length>1&&P.mbRefLine){var h=this.refv[1].rv*1;if(h<AE){AE=h;}if(h>q){q=h;}}var AD=q-AE;var z=0;var d=5;var a=5;var t=O-d-a;if(AD==0){if(AE==0){z=O/2;t=0;}else{t/=Math.abs(q);if(q<0){z=d;}else{z=O-a;}}}else{if(q<0){z=d;t/=Math.abs(AE);}else{if(AE<0){z=q/AD*t+d;t/=AD;}else{z=O-a;t/=q;}}}var e=M-AA-Y;var f=X.v.length;var l=e*0.4/f;l=l>=1?l:1;var u=e/f-l;this.hightLightPos=[];for(var AC=0;AC<f;AC++){this.hightLightPos[AC]={};var j=X.rv[AC]*1;var p=true;if(j<0){j=0-j;p=false;}var S=j*t;var o=(M-AA)/X.v.length;this.drawBar(AA+(u+l)*AC+l/2,z,u,S,AG,X.thClr&&X.thClr[AC],p,this.hightLightPos[AC]);}AG.strokeStyle=this.xAxisLineColor;AG.lineWidth=this.xAxisLineWidth;if(AG.lineWidth%2===1){z=Math.round(z+0.5)-0.5;}AG.beginPath();AG.moveTo(AA,z);AG.lineTo(M-Y,z);AG.stroke();if(this.refv&&this.refv.length>1&&P.mbRefLine){var h=this.refv[1].rv*1;var Q=z-h*t;if(AG.lineWidth%2===1){Q=Math.round(Q+0.5)-0.5;}AG.beginPath();AG.moveTo(AA,Q);AG.lineTo(M-Y,Q);AG.strokeStyle=this.refLineColor;AG.stroke();}},drawBar:function G(N,U,R,M,Q,P,S,O){if(R>=3){N=Math.round(N);U=Math.round(U);R=Math.round(R);}if(M!=0){M=Math.round(M);if(M<1){M=1;}}if(S){Q.fillStyle=P?P:this.posBarColor;Q.fillRect(N,U-M,R,M);O.x=N+Math.round(R/2);O.y=U-M;}else{Q.fillStyle=P?P:this.negBarColor;Q.fillRect(N,U,R,M);O.x=N+Math.round(R/2);O.y=U+M;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndroidVis","mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo.VisChartUtils","mstrmojo._HasTouchScroller","mstrmojo.color","mstrmojo.css","mstrmojo.VisMicroChartLine","mstrmojo.VisMicroChartBar","mstrmojo.VisMicroChartBullet","mstrmojo._NeedSyncScroller");var S=1;var u=2;var A=3;var X=4;var W=0,e=1,t=2,C=3,AF=4,F=5;var p=0;var AA=1;var AG=2;var AD="width:0px;height:0px;border-left:10px solid black;border-top:5px solid transparent;border-bottom:5px solid transparent;margin-left:auto;margin-right:auto;-webkit-transform:scale(0.8,0.9)";var AC="width:0px;height:0px;border-left:5px solid transparent;border-top:10px solid black;border-right:5px solid transparent;margin-left:auto;margin-right:auto;-webkit-transform:scale(0.9,0.8)";var o=0,U=1;var E=1;var Q=mstrmojo.color,D=mstrmojo.css;var b="microchart-table-text";var R=0;var P=0;function g(AI){AI.innerHTML="";}function f(){var AI=this.backgroundColor;if(!AI){return ;}this.dockedHeaderTable.style.backgroundColor=AI;this.dockedHeaderTable.style.opacity="1";this.dockedHeaderReplaceDiv.firstChild.style.backgroundColor=AI;this.dockedHeaderReplaceDiv.firstChild.style.opacity="1";}function M(AK,AL){var AP=AK.style.height;var AI=AK.style.width;var AQ=AK.style.textDecoration;var AO=AK.style.display;var AR=AK.style.fontSize;var AM=AK.style.paddingLeft;var AJ=AK.style.paddingRight;var AN=AK.style.boxShadow;AK.style.cssText=AL;AK.style.height=AP;AK.style.width=AI;AK.style.textDecoration=AQ;if(AO){AK.style.display=AO;}if(AR){AK.style.fontSize=AR;}if(AM){AK.style.paddingLeft=AM;}if(AJ){AK.style.paddingRight=AJ;}if(AN){AK.style.boxShadow=AN;}}function x(AQ,AP,AL){var AJ=AP.level;var AK="";if(AP.isLeaf){AK=p;}else{if(AP.needExpand){AK=AA;}else{AK=AG;}}var AM=null;var AN=this.bodyFontColorRGB;var AO=this.theme;if(AK==AG){AQ.className="microchart-tree-arrow-close";AM="border-left-color";}else{if(AK==AA){AQ.className="microchart-tree-arrow-open";AM="border-top-color";}else{AQ.className="";AQ.setAttribute("style","");return ;}}var AI="";if(AL){AI=AM+":"+AL;}else{if(AO==u){if(AJ==0){AI=AM+":#4d4d4d";}else{if(AJ==1){AI=AM+":rgba(77,77,77,0.8)";}else{if(AJ>1){AI=AM+":rgba(77,77,77,0.6)";}}}}else{if(AO==S){if(AJ==0){AI=AM+":#c2c2c2";}else{if(AJ==1){AI=AM+":rgba(194,194,194,0.8)";}else{if(AJ>1){AI=AM+":rgba(194,194,194,0.6)";}}}}else{if(AN&&AN.length>2&&(AO==X||AO==A)){if(AJ==0){AI=AM+":rgba("+AN[0]+","+AN[1]+","+AN[2]+",0.8)";}else{if(AJ>0){AI=AM+":rgba("+AN[0]+","+AN[1]+","+AN[2]+",0.7)";}}}}}}AQ.setAttribute("style",AI);}function O(Ax,Ac){var Af=this.widget,An=Af.rows[Ax],AM=An.model,AP=AM.elms,AO=this.rowTemplate,AR=An.treeNode,Ag=this.colInfos,Ax=An.rowIdx,Am=null,AS=Ag.length;var Ae=this.bodyFontColorRGB;var AW=this.headerTable.firstChild.firstChild.childNodes;Am=Ac?Ac.rowRef:An.rowRef;var Aw=null;var Aj=null;if(Am[this.domRefName]){Aw=Am[this.domRefName];}else{Aw=AO.cloneNode(true);Am[this.domRefName]=Aw;}Aw.style.display="";k.call(this,Ac?Ac:An);Aw.setAttribute("rowType",Ac?o:U);var Aj=Aw.childNodes;var AT=null;for(var As=0,AU=0;As<AS;As++,AU++){var Al=Ag[As];var Ah=Al.colIdx;Aj[As].setAttribute("mrow",An.rowIdx);if(Ah==this.treeColumnIdx&&AR){var Ap=Aj[As].firstChild;x.call(this,Ap,AR);if(!AR.isLeaf){Ap.parentNode.setAttribute("CLK","T");}continue;}if(Al.type==W||Al.type==e){if(this.isTreeMode){var Ai="";for(var Aq=0;Aq<AR.es.length;Aq++){Ai+=AR.es[Aq].n;}if(Ai.indexOf("&lt;")>=0){Ai=Ai.replace(/&lt;/g,"<");Ai=Ai.replace(/&gt;/g,">");}Aj[As].innerHTML=Ai;if(AR.level==0){Aj[As].style.fontWeight="bold";}else{Aj[As].style.fontWeight="";}if(AR.level>0&&(this.theme==A||this.theme==X)){if(Ae&&Ae.length>2){Aj[As].style.color="rgba("+Ae[0]+","+Ae[1]+","+Ae[2]+",0.8)";}}else{}}else{AT=AP[Al.order];var Ai=AT?AT.n:"";if(Ai.indexOf("&lt;")>=0){Ai=Ai.replace(/&lt;/g,"<");Ai=Ai.replace(/&gt;/g,">");}Aj[As].innerHTML=Ai;}continue;}if(Al.order=="LineChart"){if(Am[Ah]){var Ak=Am[Ah];if(AM.isTotal&&!this.isTreeMode){Ak.domNode.style.display="none";}else{Ak.domNode.style.display="";Ak.model=AM.model;Ak.refv=AM.refv;Ak.kpiOffset=this.kpiOff*Ax;Ak.reDrawChart();}}else{if(AM.isTotal&&!this.isTreeMode){continue;}var Ad=document.createElement("div");var Aa={placeholder:Ad,model:AM.model,refv:AM.refv,config:Af.sparklineProps,widget:Af,kpiOffset:this.kpiOff*Ax,width:Al.contentWidth,height:P,mainOffsetTop:this.offsetTop,mainLeftPos:parseInt(this.domNode.style.left,0)||0,mainWidth:this.getWidth(),isTreeMode:this.isTreeMode,theme:this.theme};Aj[As].appendChild(Ad);var Ak=new mstrmojo.VisMicroChartLine(Aa);Ak.render();Aj[As].removeAttribute("class");Am[Ah]=Ak;}}else{if(Al.order=="BarChart"){if(Am[Ah]){var Ak=Am[Ah];if(AM.isTotal&&!this.isTreeMode){Ak.domNode.style.display="none";}else{Ak.domNode.style.display="";Ak.model=AM.model;Ak.refv=AM.refv;Ak.kpiOffset=this.kpiOff*Ax;Ak.isTextBold=this.isTreeMode?AR.level==0:false;Ak.reDrawChart();}}else{if(AM.isTotal&&!this.isTreeMode){continue;}var Ad=document.createElement("div");var Aa={placeholder:Ad,model:AM.model,refv:AM.refv,widget:Af,kpiOffset:this.kpiOff*Ax,config:Af.barProps,width:Al.contentWidth,height:P,mainOffsetTop:this.offsetTop,mainLeftPos:parseInt(this.domNode.style.left,0)||0,mainWidth:this.getWidth(),isTreeMode:this.isTreeMode,theme:this.theme,isTextBold:this.isTreeMode?AR.level==0:false};Aj[As].appendChild(Ad);var Ak=new mstrmojo.VisMicroChartBar(Aa);Ak.render();Aj[As].className=this.valueCssClass;Am[Ah]=Ak;}}else{if(Al.order=="GaugeChart"){if(Am[Ah]){var Ak=Am[Ah];Ak.model=AM.model;Ak.refv=AM.refv;Ak.kpiOffset=this.kpiOff*Ax;Ak.labelColorRGB=this.bodyFontColorRGB;Ak.reDrawChart();}else{var Ad=document.createElement("div");var Aa={placeholder:Ad,model:AM.model,refv:AM.refv,widget:Af,config:Af.bulletProps,width:Al.contentWidth,height:P,mainOffsetTop:this.offsetTop,mainLeftPos:parseInt(this.domNode.style.left,0)||0,mainWidth:this.getWidth(),labelColorRGB:this.bodyFontColorRGB,showMinLabel:this.showMinLabel,isTreeMode:this.isTreeMode,theme:this.theme};Aj[As].appendChild(Ad);var Ak=new mstrmojo.VisMicroChartBullet(Aa);Ak.render();Aj[As].removeAttribute("class");Am[Ah]=Ak;}}else{var AI=-1;var Av=-1;if(this.widget.isKPI){Av=parseInt(Al.order)%this.kpiOff;var AI=An.model.metricIdx+Av;}else{if(Al.type==t){AI=parseInt(Al.order);Av=AI;}}var AY="";var AV="";if(!AM.refv[Av]){continue;}if(AM.refv[Av].ti===undefined){if(AM.refv[Av].ts===4){AY="<img src='"+AM.refv[Av].v+"'/>";}else{AY=AM.refv[Av].v;}}else{try{var AL=this.widget.model;var AK=AL.th[""+AI];var AJ=AM.refv[Av].ti;if(AM.refv[Av].ty===4){var Ao;if(AK[AJ]&&AK[AJ].n){Ao=AK[AJ].n;}else{Ao=AM.refv[Av].v;}if(Ao.indexOf(":")>=0){}else{var Ar;try{Ar=mstrApp.getConfiguration().getHostUrlByProject(mstrApp.getCurrentProjectId());}catch(Au){Ar="";}Ao=Ar+Ao;}AY="<img src='"+Ao+"'/>";}else{if(AK[AJ]&&AK[AJ].n&&AK[AJ].cni!==undefined){AY=AK[AJ].n;}else{AY=AM.refv[Av].v;}Aj[As].style.fontSize=this.widget.fontSize;}AV=AL.css[AK[AJ].cni].n;}catch(Au){if(!AY){AY=AM.refv[Av].v;}}}if(AV){Aj[As].className=Al.valueCssClass+" "+AV;}else{if(this.valueCssClass){Aj[As].className=Al.valueCssClass+" "+this.valueCssClass;}else{Aj[As].className=Al.valueCssClass;}}Aj[As].innerHTML=AY;}}}if(this.isTreeMode){if(AR.level==0){Aj[As].style.fontWeight="bold";}else{Aj[As].style.fontWeight="";}}}if(this.isTreeMode){var AX=Af.rows[Ax-1];var AN=AX&&AX.treeNode.level<An.treeNode.level;var AQ=Ac!=undefined;var Ab=Ax==0;if(AN||(AQ&&AR.level>0)){var AZ=Aj.length;for(var At=0;At<AZ;At++){if(this.theme==u||this.theme==X){Aj[At].style.boxShadow="0px 5px 3px -3px rgba(0,0,0,0.2) inset";}else{if(this.theme==S||this.theme==A){Aj[At].style.boxShadow="0px 5px 3px -3px rgba(0,0,0,0.5) inset";}}}Aw.style.borderTop="solid 1px rgba(0, 0, 0, 0)";}else{if((AQ&&AR.level==0||Ab)&&(this.theme==u||this.theme==S)){Aw.style.borderTop="solid 1px rgba(0, 0, 0, 0)";}else{var AZ=Aj.length;for(var At=0;At<AZ;At++){Aj[At].style.boxShadow="";}}}}var Ay=Ac?Ac:An;if(this.isTreeMode){this.widget.highlightRowByRowInfo(Ay,AR.selected);}else{if(this.widget.isAllAttrSelectable){this.widget.highlightRowByRowInfo(An,An.selected[-1]);}else{this.widget.highlightCellsByRowInfo(An);}}return Aw;}function k(AL){var AK=AL.rowRef[this.domRefName],AI=this.utils;if(this.isTreeMode){var AJ=AL.treeNode;var AN=AJ.level;if(AN==0){if(this.theme==u){AK.style.backgroundColor="#f7f7f7";AK.style.color="#333333";AK.style.borderTop="solid 1px rgba(0, 0, 0, 0.15)";}else{if(this.theme==S){AK.style.backgroundColor="#1f1f1f";AK.style.color="#e0e0e0";AK.style.borderTop="solid 1px rgba(255, 255, 255, 0.15)";}else{if(this.theme==A){AK.style.backgroundColor="";AK.style.borderTop="solid 1px rgba(255, 255, 255, 0.1)";}else{if(this.theme==X){AK.style.backgroundColor="";AK.style.borderTop="solid 1px rgba(0, 0, 0, 0.3)";}}}}AK.style.font="bold 12pt Roboto";}else{if(AN==1){if(this.theme==u){AK.style.backgroundColor="#eaeaea";AK.style.color="#333333";AK.style.borderTop="solid 1px rgba(0, 0, 0, 0.2)";}else{if(this.theme==S){AK.style.backgroundColor="#2a2a2a";AK.style.color="#e0e0e0";AK.style.borderTop="solid 1px rgba(255, 255, 255, 0.2)";}else{if(this.theme==A){AK.style.backgroundColor="rgba(255, 255, 255, 0.05)";AK.style.borderTop="solid 1px rgba(255, 255, 255, 0.2)";}else{if(this.theme==X){AK.style.backgroundColor="rgba(0, 0, 0, 0.05)";AK.style.borderTop="solid 1px rgba(0, 0, 0, 0.2)";}}}}AK.style.font="12pt Roboto";}else{if(AN==2){if(this.theme==u){AK.style.backgroundColor="#dedede";AK.style.color="#333333";AK.style.borderTop="solid 1px rgba(0, 0, 0, 0.1)";}else{if(this.theme==S){AK.style.backgroundColor="#363636";AK.style.color="#e0e0e0";AK.style.borderTop="solid 1px rgba(255, 255, 255, 0.1)";}else{if(this.theme==A){AK.style.backgroundColor="rgba(255, 255, 255, 0.1)";AK.style.borderTop="solid 1px rgba(255, 255, 255, 0.1)";}else{if(this.theme==X){AK.style.backgroundColor="rgba(0, 0, 0, 0.1)";AK.style.borderTop="solid 1px rgba(0, 0, 0, 0.1)";}}}}AK.style.font="12pt Roboto";}else{if(AN>2){AN=Math.min(AN,3);var AM=AN/10;if(this.theme==u){AK.style.backgroundColor="#d1d1d1";AK.style.color="#333333";}else{if(this.theme==S){AK.style.backgroundColor="#404040";AK.style.color="#e0e0e0";}else{if(this.theme==A){AK.style.backgroundColor="rgba(255, 255, 255, 0.15)";}else{if(this.theme==X){AK.style.backgroundColor="rgba(0, 0, 0, 0.15)";}}}}AK.style.font="12pt Roboto";AK.style.borderTop="solid 1px rgba(255, 255, 255, 0.1)";}}}}}else{if(this.theme==u){AK.style.backgroundColor="#f7f7f7";AK.style.color="#333333";AK.style.borderBottom="solid 1px #c0c0c0";}else{if(this.theme==S){AK.style.backgroundColor="#1f1f1f";AK.style.color="#e0e0e0";AK.style.borderBottom="solid 1px #3f3f3f";}else{AK.style.borderBottom="solid 1px #808080";}}}}function Y(AI){var AJ=this._scroller,AK=this.chartTable,AL=Math.max(this.chartTableOffsetHeight+this.headerTableOffsetHeight-this.getHeight(),0);AJ.origin={x:AI&&AI.x||0,y:AI&&AI.y||0};AJ.showScrollbars=this.showScrollbars;AJ.vScroll=(AL!==0&&AJ.noVScroll!==true)||this.scrollPast;if(AJ.vScroll){AJ.offset={y:{start:0,end:AL},scrollPast:this.scrollPast};}else{AJ.offset=null;}this.utils.translateCSS(-AJ.origin.x,-AJ.origin.y,false,AK);}mstrmojo.VisMicroChartTable=mstrmojo.declare(mstrmojo.AndroidVis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller,mstrmojo._NeedSyncScroller],{scriptClass:"mstrmojo.VisMicroChartTable",utils:mstrmojo.VisChartUtils,scrollerConfig:{bounces:false,showScrollbars:false,useTranslate3d:false,hScroll:false,vScroll:true},scrollPast:false,colInfos:null,rowTemplate:null,theme:-1,isTreeMode:false,showMinLabel:false,bodyFontColorRGB:null,markupString:'<div id="{@id}-microchart-table" class="mstrmojo-Chart {@cssClass}" style="width:{@width}px;height:{@height}px;z-index:{@zIndex};position:absolute;background-color:{@backgroundColor}"><div id="{@id}-header-bar" class="microchart-header-div" style="width:{@width}px;"><table id="{@id}-header-table" style="width:{@width}px;table-layout:fixed;"><tr ><th style="border:none;text-decoration:none;"></th></tr></table></div><div id="{@id}-chart-table-container" class="microchart-canvas-div" style="position:absolute;overflow:hidden;width:{@width}px;"><table id="{@id}-charts-body" style="width:{@width}px;table-layout:fixed"><tr ><td style="border:none;background:transparent;text-decoration:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:0px;padding-bottom:0px"></td></tr></table></div><div style="position:absolute;z-index:2;"><table id="{@id}-docked-header" style="width:{@width}px;table-layout:fixed;position:relative;background-color:white;"><tbody></tody></table><div id="{@id}-docked-header-replace-div" style="width:{@width}px;position:relative;overflow:hidden"><table id="{@id}-docked-header-replace" style="width:{@width}px;table-layout:fixed;background-color:white;"><tbody></tody></table></div></div></div>',markupSlots:{headerTable:function(){return this.domNode.childNodes[0].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1];},chartTable:function(){return this.domNode.childNodes[1].firstChild;},dockedHeaderTable:function(){return this.domNode.childNodes[2].firstChild;},dockedHeaderReplaceDiv:function(){return this.domNode.childNodes[2].lastChild;}},postBuildRendering:function w(){R=(this.widget.otherProps.mRowHeight-1)+"px";P=(this.widget.otherProps.mRowHeight-2)+"px";E=this.utils.getScreenZoomFactor();this.scrollerConfig.scrollEl=this.chartTable;this.scrollerConfig.indicatorEl=this.widget.indicatorEl;this.scrollerConfig.showScrollbars=this.showScrollbars;this._super();this.renderMicroChart();this.updateRowOffsetHeight();this.updateHeaderTableOffsetH();this.updateChartTableOffsetH();Y.call(this,this.widget.mcStatus&&this.widget.mcStatus.scrollTo);f.call(this);var AJ=this.widget;if(this._tn){var AI=this._tsCallback;this._tsCallback=function(AK){AJ.closedIfwAttr=null;AI.call(this,AK);};mstrmojo.dom.detachEvent(this._tn,mstrmojo.dom.TOUCHSTART,AI);mstrmojo.dom.attachEvent(this._tn,mstrmojo.dom.TOUCHSTART,this._tsCallback);}},renderMicroChart:function L(){var AU=this.colInfos.length;var Ad=this.headerTable;if(this.theme==u){Ad.style.backgroundColor="#B5BDC4";Ad.style.color="#333333";}else{if(this.theme==S){Ad.style.backgroundColor="#1C273A";Ad.style.color="#e0e0e0";}}Ad.style.height=E*32+"px";var AS=Ad.firstChild.firstChild;var AJ=this.chartTable.firstChild;var AZ=AJ.firstChild;var AQ=AS.firstChild;var AM=AZ.firstChild;for(var AV=Ad.childNodes.length;AV<AU;AV++){AS.appendChild(AQ.cloneNode(true));AZ.appendChild(AM.cloneNode(true));}this.rowTemplate=AZ;var Aa=mstrMobileApp.getSDKVersion();var AN=this.widget.isAndroid&&(Aa<19);var Ab=function(Ah,Ag){var Ae=0;var Af=mstrmojo.css.getComputedStyle(Ah);if(Af.paddingLeft){Ae+=parseFloat(Af.paddingLeft);}if(Af.paddingRight){Ae+=parseFloat(Af.paddingRight);}Ah.style.width=(AN?Ag:(Ag-Ae))+"px";Ah.style.height=R;};var AL=AS.childNodes;var AW=AZ.childNodes;for(var AV=0;AV<AU;AV++){var AO=this.colInfos[AV];AO.thRef=AL[AV];AL[AV].innerHTML=AO.title?AO.title:"";if(AO.padding.left!=undefined){AW[AV].style.paddingLeft=AO.padding.left+"px";}if(AO.padding.right!=undefined){AW[AV].style.paddingRight=AO.padding.right+"px";}AL[AV].className=AO.headerCssClass;if(AO.type==F){AL[AV].style.paddingLeft="0px";AL[AV].style.paddingRight="0px";}else{if(this.treeColumnIdx==AO.colIdx){var AT=document.createElement("div");AW[AV].appendChild(AT);AT.style.display="";}else{AW[AV].className=AO.valueCssClass+" "+this.valueCssClass;}}if(AO.type==W||AO.type==e){this.bodyFontColorRGB=this.valueCssClass&&Q.rgbStr2rgb(mstrmojo.css.getStyleValue(AW[AV],"color"));}Ab(AL[AV],AO.colWidth);Ab(AW[AV],AO.colWidth);AL[AV].style.wordBreak="break-word";AL[AV].style.whiteSpace="normal";AW[AV].setAttribute("mcol",AO.colIdx);AL[AV].setAttribute("mcol",AO.colIdx);AL[AV].setAttribute("mrow",-1);}var AX=0;totalColWidth=0;for(var AV=0;AV<AU;AV++){var AO=this.colInfos[AV];console.log(AV+" offsetWidth:"+AL[AV].offsetWidth+", styleWidth:"+AL[AV].style.width+", colWidth:"+AO.colWidth);AX+=AL[AV].offsetWidth;totalColWidth+=AO.colWidth;AO.titleOverflow=this.utils.truncateTextToLineWithWordWrap2(AL[AV],AO.title,this.textCanvas,2);var AY=mstrmojo.css.getComputedStyle(AL[AV]);AO.padding.left=parseInt(AY.paddingLeft);AO.padding.right=parseInt(AY.paddingRight);var Ac=AW[AV].offsetWidth||AO.colWidth;AO.contentWidth=Ac-AO.padding.left-AO.padding.right;AO.styleWidth=AN?Ac:Ac-AO.padding.left-AO.padding.right;}var AK=this.widget.otherProps;this.kpiOff=AK.mnMetricsPerKPI;if(!this.widget.isKPI){this.kpiOff=0;}var AP=this.widget;var AI=document.createDocumentFragment();for(var AV=AP.startCnt;AV<AP.endCnt;AV++){var AR=O.call(this,AV);AI.appendChild(AR);}AJ.appendChild(AI);AZ.style.display="none";if(AK.mbHideColHeaders){this.headerTable.style.display="none";}this.itemsContainerNode.style.top=this.headerTableOffsetHeight+"px";},reRenderRows:function G(AO,AM,AS,AL,AJ){var AN=this.chartTable.firstChild;AN.innerHTML="";var AQ=this.widget;var AP=document.createDocumentFragment();if(AM==undefined){AM=0;AS=0;AL=AQ.startCnt;AJ=AQ.endCnt;}var AR=AQ.rows;if(AM<AL){for(var AK=AM;AK<AS;AK++){var AI=AR[AK].rowRef[this.domRefName];AP.appendChild(AI);}for(var AK=AL;AK<AJ;AK++){var AI=O.call(this,AK);AP.appendChild(AI);}}else{for(var AK=AL;AK<AJ;AK++){var AI=O.call(this,AK);AP.appendChild(AI);}for(var AK=AM;AK<AS;AK++){var AI=AR[AK].rowRef[this.domRefName];AP.appendChild(AI);}}AN.appendChild(AP);this.updateChartTableOffsetH();Y.call(this,AO);},updateHeaderTableOffsetH:function I(){if(this.widget.otherProps.mbHideColHeaders){this.headerTableOffsetHeight=0;}else{this.headerTableOffsetHeight=this.headerTable.offsetHeight;}},updateRowOffsetHeight:function J(){this.rowOffsetHeight=this.chartTable.firstChild.lastChild.offsetHeight;},updateChartTableOffsetH:function AB(){this.chartTableOffsetHeight=this.chartTable.firstChild.offsetHeight;},onScrollDone:function q(AI){if(this._super){this._super(AI);}this.widget.onScrollDone(AI);},onScrollMoved:function AH(AI){if(this._super){this._super(AI);}this.widget.onScrollMoved(AI);},initScroller:function j(AI){if(!AI.offset&&this.scrollPast){AI.offset={scrollPast:this.scrollPast};}AI.vScroll=true;if(this._super){this._super(AI);}var AJ=this;},initDHs:function N(){var AI=this.dockedHeaderTable;AI.parentNode.style.top=this.headerTableOffsetHeight+"px";},addRowsToDH:function B(AJ,AM){var AI=this.widget;var AN=null;if(AM){AN=AI.dockedHeaderReplaceRows;}else{AN=AI.dockedHeaderRows;}var AK=document.createDocumentFragment();for(var AL=AN.length-AJ;AL<AN.length;AL++){var AO=O.call(this,AN[AL].rowIdx,AN[AL]);AN[AL].rowRef[this.domRefName]=AO;AK.appendChild(AO);}if(AM){this.dockedHeaderReplaceDiv.firstChild.firstChild.appendChild(AK);}else{this.dockedHeaderTable.firstChild.appendChild(AK);}},removeRowsFromDH:function H(AK,AJ){var AL=this.dockedHeaderTable,AI=AL.firstChild;var AO=this.dockedHeaderReplaceDiv.firstChild.firstChild;if(AK>AI.childNodes.length){AK=AI.childNodes.length;}if(AK>1){AL.removeChild(AI);for(var AN=0;AN<AK;AN++){AI.removeChild(AI.lastChild);}AL.appendChild(AI);}else{if(AK==1){var AM=AI.lastChild;AI.removeChild(AM);if(AJ){AO.appendChild(AM);}}}},moveRowFromDHRplcTableToDH:function s(){var AK=this.dockedHeaderTable,AJ=AK.firstChild;var AL=this.dockedHeaderReplaceDiv.firstChild.firstChild;var AI=AL.firstChild;if(AI){g(AL);AJ.appendChild(AI);}},removeChildrenForDHReplaceTable:function l(){var AI=this.dockedHeaderReplaceDiv.firstChild.firstChild;g(AI);},showDockedHeader:function Z(){this.dockedHeaderTable.parentNode.style.display="block";},hideDockedHeader:function AE(){this.dockedHeaderTable.parentNode.style.display="none";},setTreeArrow:function d(AM,AI){var AL=AM.rowRef[this.domRefName];var AK=AL.childNodes;var AJ=AK[this.treeColumnIdx].firstChild;x.call(this,AJ,AM.treeNode,AI);},scrollTo:function(AI){var AJ=this.chartTable;this.utils.translateCSS(-AI.x,-AI.y,false,AJ);},shouldTouchBubble:function h(AL){var AI=this._scroller,AJ=AL.isVertical;var AK=!!AI.offset&&AI.offset.y.end!==0;return AJ?!AK:this._super(AL);},multiTap:true,touchTap:function(AI){this.widget.touchTap(AI);},touchSelectBegin:function V(AI){this.bubbleTouchEvent(AI);},touchSelectEnd:function a(AI){this.bubbleTouchEvent(AI);},touchSelectMove:function K(AI){this.bubbleTouchEvent(AI);},multiTouch:true,touchMultiBegin:function(AI){this.bubbleTouchEvent(AI);},touchMultiMove:function(AI){this.bubbleTouchEvent(AI);},touchMultiEnd:function(AI){this.bubbleTouchEvent(AI);},destroy:function z(){var AK=this.colInfos.length;for(var AI=0;AI<AK;AI++){var AJ=this.colInfos[AI];delete AJ.thRef;}delete this.widget;delete this.parent;delete this.rowTemplate;delete this.textSpan;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisChartLine","mstrmojo.EnumRWUnitType","mstrmojo.AndroidVisTooltip","mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo.TouchScroller","mstrmojo._HasTouchScroller","mstrmojo.css","mstrmojo.color","mstrmojo.VisTimeSeriesLegend","mstrmojo.VisTimeSeriesTimeSelector");mstrmojo.requiresDescs(5674,8475,8626);var BY=mstrmojo.css,J=mstrmojo.color;var d=1,Ab=2,BM=4;var AY=1,A1=2;var AU={},Av=0,AO=false,AJ=false,Ah=false,Ax=false,H=0,x=null,G=5;var A8=20;var BL=20;var AI=80;var P=false;var f={t:5,r:A8/2,b:5,l:A8/2};var An=10,q=8;var At=false;var AX=mstrmojo.locales.datetime;function Bc(){AO=false;AJ=false;Ah=false;Ax=false;H=0;x=null;}function Bh(){return[255,255,255];}var AE=0;var j=1;function Az(){var Bk=this.utils;var Bm=Bh.call(this);var Bl=this.formatProp.backgroundAlpha;Bm=Bk.getRGBWithOpacity(Bm,Bl,this.formatProp.backgroundClr);var Bn=(Bm[0]*299+Bm[1]*587+Bm[2]*114)/1000;if(Bn>150){this.theme=AE;}else{this.theme=j;}}function Be(Bk){AU[Bk]={isLegendBarOpen:false,legendBarWidth:30,isLegendSelected:false,legendSelectedIndex:-1,timeSelectedIntervalPosition:{},currSelectionIdx:-1,usingCustomInterval:false};}function Bj(Bq){var Bo=this,Bl=Bo.margin,Bm=Bo.getChartWidthOnScreen();var Bn=Bo.utils.getTouchXYOnWidget(Bq.pageX,Bq.pageY,Bo);var Bk=Bn.touchX,Bp=Bn.touchY;if(Bk<Bl.l||Bk>(Bm+Bl.l)||Bp<Bl.t||Bp>this.canvas.height-Bl.b){return false;}return true;}function Ao(Bo){if(!Bo){return false;}var Bm=this;var Bl=Bm.utils.getTouchXYOnWidget(Bo.pageX,Bo.pageY,Bm);var Bk=Bl.touchX,Bn=Bl.touchY;if((Bk>0&&Bk<Bm.getWidth())&&(Bn>0&&Bn<Bm.getHeight())){return true;}return false;}function R(Bl){var Bk=mstrmojo.dom.findAncestorByAttr(Bl.target,"clk",true,this.domNode);return Bk||null;}function AD(Bl){var Bk=Bl.length;var Bn=0,Bm;while(Bn<Bk){if(Bl[Bn]){Bm=Bl[Bn].y;break;}Bn++;}for(Bn=0;Bn<Bk;Bn++){if(Bl[Bn]){Bm=Math.min(Bm,Bl[Bn].y);}}return Bm;}function Af(Bs){var Bn=this.baseModel;var Bo=AU[this.chartID];this.baseModel=this.getModel(Bs.ds)||this.baseModel;var Bk=this.baseModel;this.checkData(Bk);var Bp=Bk.err||Bk.eg;if(Bp){this.renderErrorMessage(Bp);return false;}var Br=Bk.series,Bl=this.model,Bt=Bl.series,Bm=Br.length,Bv=[],Bq;for(Bq=0;Bq<Bm;Bq++){Bv[Bq]=Br[Bq];}this.model.categories=Bk.categories;this.model.series=Bv;this.model.colHeaders=Bk.colHeaders;var Bu=this.model.series[0].rv.length;if(this.windowSize!==Bu){Bo.rns=0;Bo.rne=Bu;}this.windowSize=Bu;if(!Bk.vp||!Bk.vp.rl||Bk.vp.rl.length<Bn.vp.rl.length){Bk.vp=Bn.vp;}Ah=true;return true;}function BS(){var Bm=this._scroller,Bl=this.model,Bq=this.margin,Bo=AU[this.chartID],Bp=this.animationCanvas,Bn=this.getChartWidthOnScreen(),Br=Math.max(this.acContentWidth-Bn,0);var Bk=(Bo.rns!==0&&Bo.rns+1===Bo.rne)?Bo.rns-1:Bo.rns;Bm.origin={x:parseInt(((Bk-this.ACrns)*this.RTX),10),y:0};Bm.hScroll=(Br!==0&&Bm.noHScroll!==true)||this.scrollPast;if(Bm.hScroll){Bm.offset={x:{start:0,end:Br},scrollPast:this.scrollPast};}this.utils.translateCSS(-(Bm.origin.x),Bm.origin.y,false,this.animationCanvasDiv);this.utils.translateCSS(-(Bm.origin.x)+this.maxYLblWidth,Bm.origin.y,false,this.xLabelsDiv);}function A9(Bm){var Bt=Bm.series,Bk=Bm.colHeaders,Bp=Bk[0].items.length;var Bs=Bt[0].hi,Bq=Bk[Bk.length-1].items[Bs[Bs.length-1]],Bn=Bq.f;var Bo=(Bq&&Bn&&Bn.indexOf(Bq.cs)>=0)?","+Bq.cs:"";if(Bo===""&&Bn){Bo=Bn.indexOf("%")>=0?",%":"";}if(Bo===""&&Bn){var Bl=null;if(Bn.indexOf("'")>=0){Bl="'";}else{if(Bn.indexOf('"')>=0){Bl='"';}}if(Bl){var Br=Bn.substring(Bn.indexOf(Bl)+1);Bo=","+Br.substring(0,Br.indexOf(Bl));}}return Bo;}function a(){var Bm=this.masterSlider,Bp=this.sliderTooltip,Bk=Bp.firstChild,Bl=Bp.lastChild,Bn=Bm.firstChild,Bo=Bm.lastChild;BY.removeClass(Bn,"mstrmojo-timeseries-span-shadow");BY.removeClass(Bo,"mstrmojo-timeseries-span-shadow");Bk.innerHTML="";Bk.style.display="none";Bl.style.display="none";}function O(){var Bl=this,Bk=AU[this.chartID];if(Bk.usingCustomInterval&&Bl.currSelection){Bl._timeSelector.toggleSelected(Bl.currSelection,false);Bl._timeSelector.toggleGlowEffect(Bl.currSelection,false);this.updateIntervalPosition();Bl.currSelection=null;Bk.currSelectionIdx=-1;}if(Ax&&x!=="MS"){Bl.showMessage();this.makeSureMasterSliderNotBeyondTheMargin();this.makeSureSliderOnPoint();this.makeSureSelectedIntervalMoreThanTwo();this.makeSureMasterSliderNoOverlap();this.setMasterSliderLayout();window.setTimeout(function(){Bl.reDrawSlaveChart();},10);}else{x=null;}a.call(this);}function F(Bp){var Bm=this,Bk=Bm.model.categories,Bn=Bk.tp;var Bo=Math.round((Bp-f.l)/Bm.MRTX),Bl=Bk.items[Bo];if(Bn.toString()===Bm.DSS_XML_BASE_FORM_DATE){Bl=Bm.getFormattedDateForTooltip(Bl,true);}return Bl;}function Ae(Bl,Bk){return(Bl.x-Bk.x)*(Bl.x-Bk.x)+(Bl.y-Bk.y)*(Bl.y-Bk.y);}function Bb(Bq,Bk){var Br=this,Bm=AU[Br.chartID],Bo=Br.model,Bt=Br.windowSize,Bl=true,Bn,Bv;if((!Bq&&Bq!==0)||!Bk){Bq=Bm.rns;Bk=Bm.rne;}var Bu=Bk-Bq;Bo.currentRatio=Math.round(Bt/((Bu-1)||1));if(Bo.currentRatio>G){var Bp=(G-1)/2;Bn=Math.max(0,Bq-Bp*(Bu-1));Bv=Math.min(Bt,Bk+Bp*(Bu-1));if(Bn===0){Bv=G*(Bu-1)+1;}else{if(Bv===Bt){Bn=Bv-G*(Bu-1)-1;}}}else{Bn=0;Bv=Bt;var Bs=Bv-Bn;}if(Br.ACrns===Bn&&Br.ACrne===Bv){Bl=false;}else{Br.ACrns=Bn;Br.ACrne=Bv;}return Bl;}function Bf(Bk){var Bm=Bk&&Bk.childNodes&&Bk.childNodes.length,Bl;for(Bl=0;Bl<Bm;++Bl){Bk.removeChild(Bk.firstChild);}}function Ag(){if(this._legend){this._legend.destroy();}if(this._timeSelector){this._timeSelector.destroy();}}mstrmojo.VisTimeSeries=mstrmojo.declare(mstrmojo.VisChartLine,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisTimeSeries",isLinearChart:true,highlightColor:"#ffffff",chartLineColors:["#16b0ff","#ff3729","#04ba22","#ff960e","#ae79de","#cccd25","#19cee0","#a9a9a9","#b3cdef","#ffa796","#98df8a","#ffbf80","#dac3ec","#dac3ec","#a1dfea","#d6d6d6"],switchSeriesOnTouch:false,multiTouch:true,margin:{t:70,r:1,b:50,l:5},SLXP:0,SRXP:0,isTimeSeries:true,maxXLabels:4,scrollerConfig:{bounces:false,showScrollbars:false,useTranslate3d:true},scrollPast:true,isAndroidTab:false,masterContext:null,selectionOrLinkdrillOnRow:false,lastSelectedPoint:null,markupString:'<div id="{@id}" class="mstrmojo-Chart {@cssClass}" style="width:{@width}px;height:{@height}px;left:{@left}px;top:{@top}px;z-index:{@zIndex};position:absolute;-webkit-transition: 0ms; transition: 0ms; -webkit-transform: translate3d(0px, 0px, 0px);"  mstrAttach:mousedown,mouseup,mousemove,click ><canvas width="{@width}px" height="{parseInt(@height) - @masterChartHeight}px"></canvas><div style="overflow:hidden;position:absolute;left:0px;top:0px;"><div id="{@id}-animation-canvas-div" class="mstrmojo-timeseries-animation-canvas" style="position:absolute;left:0px;top:0px;width:{@width}px;height:{@slaveChartHeight}px;"><canvas style="position:absolute;left:0px;top:0px;" width="{@width}px" height="{parseInt(@height) - @masterChartHeight}px"></canvas></div></div><div style="overflow:hidden;position:absolute;left:0px;top:0px;"><div id="{@id}-x-labels-div" class="mstrmojo-timeseries-animation-canvas" style="position:absolute;left:0px;top:0px;width:{@width}px;height={@slaveChartHeight}px"></div></div><canvas id="{@id}-highlight-canvas" style="position:absolute;left:0px;top:0px;" width="{@width}px" height="{parseInt(@height) - @masterChartHeight}"></canvas><div id="{@id}-tooltip"></div><div id="{@id}-time-selector-div"></div><div id="{@id}-legend-bar-div" ></div><div id="{@id}-loading-msg" class="mstrmojo-loading-msg" style="display:none"></div><canvas id="{@id}-master-canvas" style=" position:absolute;left:0px;bottom:0px;" width="{@width}px" height="{@masterChartHeight}"></canvas><div id="{@id}-master-div" class="mstrmojo-master-parent-div" width="{@width}px" style="position:absolute;bottom:5px" ><div id="{@id}-master-cover-span" style="position:absolute;left:0px;" class="mstrmojo-master-cover-span"></div><div id="{@id}-master-slider" class="mstrmojo-master-slider-div" clk="MS"><canvas id="{@id}-master-img-L" width="20" height="20" style="position:absolute;left:0px" class="mstrmojo-timeseries-master-span" clk="L" ></canvas><canvas id="{@id}-master-slider" width="{@width}px" height="{@masterChartHeight}px" style="top:0px;left:0px" class="mstrmojo-master-slider-div-top"></canvas><canvas id="{@id}-master-img-R" width="20" height="20" style="position:absolute;right:0px" class="mstrmojo-timeseries-master-span" clk="R" ></canvas></div><div id="{@id}-master-cover-span" style="position:absolute;right:0px;" class="mstrmojo-master-cover-span"></div></div><div id="{@id}-slider-tooltip" style="position:absolute;left:0;top:0;z-index:150;width:{@width}px;"><div class="timeseries-slider-tooltip"></div><canvas style="position:absolute;left:0px;top:20px;display: none;" width="6px" height="5px"></canvas></div><div id="{@id}-legend-tooltip" class="mstrmojo-Chart-tooltip timeseries-legend-tooltip"></div><span id="textSpan" style="z-index:-10;visibility:hidden;"></span><div id="{@id}-infowindow-anchor" style="position:absolute;width:18px;height:18px;display:block"></div><div id="{@id}-errMsg" class="mstrmojo-message" style="width:{@width}px;height:{@height}px;top:0px;left:0px;position:absolute;display:none; z-index:20;"></div></div>',markupSlots:{canvas:function(){return this.domNode.firstChild;},animationCanvasDiv:function(){return this.domNode.childNodes[1].firstChild;},animationCanvas:function(){return this.domNode.childNodes[1].firstChild.firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1];},xLabelsDiv:function(){return this.domNode.childNodes[2].firstChild;},xLabelsDivContainer:function(){return this.domNode.childNodes[2];},highlightCanvas:function(){return this.domNode.childNodes[3];},tooltip:function(){return this.domNode.childNodes[4];},timeSelectorDiv:function(){return this.domNode.childNodes[5];},legendBarDiv:function(){return this.domNode.childNodes[6];},loadingMsg:function(){return this.domNode.childNodes[7];},masterCanvas:function(){return this.domNode.childNodes[8];},masterSlider:function(){return this.domNode.childNodes[9].childNodes[1];},sliderTooltip:function(){return this.domNode.childNodes[10];},legendTooltip:function(){return this.domNode.childNodes[11];},textSpan:function(){return this.domNode.childNodes[12];},infoWindowAnchor:function(){return this.domNode.childNodes[13];},errorMsg:function(){return this.domNode.childNodes[14];}},getTextWidth:function AB(Bo,Bn,Bm,Bl){this.textSpan.style.font=Bn;if(Bl){BY.addClass(this.textSpan,Bl);}this.textSpan.innerHTML=Bo;if(Bm){this.utils.changeElementSize(this.textSpan,"font",Bm);}var Bk=this.textSpan.offsetWidth;if(Bl){BY.removeClass(this.textSpan,Bl);}return Bk;},getTextWidthByElem:function AS(Bn,Bl){var Bk=mstrmojo.css.getComputedStyle(Bl);var Bm=Bk.fontStyle+" "+Bk.fontWeight+" "+Bk.fontSize+"/"+Bk.fontVariant+" "+Bk.fontFamily;return this.getTextWidth(Bn,Bm);},getTextHeight:function AB(Bn,Bm,Bl){this.textSpan.style.font=Bm;this.textSpan.innerHTML=Bn;if(Bl){this.utils.changeElementSize(this.textSpan,"font",Bl);}var Bk=this.textSpan.offsetHeight;return Bk;},getMaxTextWidth:function(Bm,Bq){var Bp=this,Bl=Bm.length,Bo=0,Bk=0,Bn;for(Bn=1;Bn<Bl;Bn++){Bk=Bp.getTextWidth(Bm[Bn],Bq);Bo=Bk>Bo?Bk:Bo;}return Bo;},getChartWidthOnScreen:function AL(){var Bk=this.margin;return this.getWidth()-Bk.r-Bk.l-AU[this.chartID].legendBarWidth;},drawChartXYAxis:function X(){var Bm=this.utils,Bk=this.margin,Bl=this.getWidth()-AU[this.chartID].legendBarWidth,Bn=this.canvas.height,Bq=this.context;Bq.save();Bq.strokeStyle=Bm.rgb2rgbStr(this.formatProp.textClr);Bq.lineWidth=1;Bq.globalAlpha=0.8;var Bp=Math.floor(Bk.l)-0.5;Bm.drawLineSet(this,[{x:Bp,y:Bk.t},{x:Bp,y:Bn-Bk.b}],false,Bq);var Bo=Math.floor(Bn-Bk.b)+0.5;Bm.drawLineSet(this,[{x:Bk.l-this.maxYLblWidth,y:Bo},{x:Bl-Bk.r,y:Bo}],false,Bq);Bq.restore();},setMasterSlider:function A7(){var Bm=this.getWidth(),Bq=this.masterCanvas.height-f.t-f.b,Bt=this.utils,Bu=this.masterSlider,Bo=Bu.style,Bl=Bu.parentNode,Br=Bl.firstChild.style,Bk=Bl.childNodes[2].style,Bn=this.model,Bs=this.MRTX,Bp=AU[this.chartID];Bl.style.display="block";Bl.style.height=Bq+"px";Bl.style.width=Bm+"px";Bo.height=Bq+"px";Br.height=Bq-2+"px";Bk.height=Bq-2+"px";Br.backgroundColor=Bk.backgroundColor=Bt.rgb2rgbStr(this.formatProp.backgroundClr,this.formatProp.backgroundAlpha*0.5);this.drawMasterChartHandler(Bu.firstChild,A8,BL,true);this.drawMasterChartHandler(Bu.lastChild,A8,BL,false);Bu.firstChild.style.marginTop=Bu.lastChild.style.marginTop=Math.round((Bq-BL)/2)+"px";this.calculateSXP(Bp.rns,Bp.rne,true);this.makeSureMasterSliderNotBeyondTheMargin();this.makeSureMasterSliderNoOverlap();this.setMasterSliderLayout();},drawMasterChartHandler:function Aj(Bn,Bm,Bo,Bp){var Bl=this.utils,Bk=Bn.getContext("2d");Bn.width=Bm;Bn.height=Bo;Bk.save();Bk.fillStyle=Bl.rgb2rgbStr(this.formatProp.backgroundClr,0.76);Bl.drawRoundRect(Bk,0.5,0.5,Bm-1,Bo-1,1,true);Bk.strokeStyle=Bl.rgb2rgbStr(this.formatProp.textClr);Bk.lineWidth=1;Bl.drawRoundRect(Bk,0.5,0.5,Bm-1,Bo-1,1);Bk.beginPath();Bk.lineWidth=2;if(Bp){Bk.moveTo(11,6);Bk.lineTo(7,10);Bk.lineTo(11,14);}else{Bk.moveTo(9,6);Bk.lineTo(13,10);Bk.lineTo(9,14);}Bk.stroke();Bk.restore();},drawMasterChartDiv:function Am(Bs,Bt){var Bl=this.masterSlider.childNodes[1],Bk=this.SRXP-this.SLXP+A8;if(Bl.width==Bk){}else{var Bo=f,Bm=this.masterChartHeight,Bq=Bm-Bo.t-Bo.b,Br=(Bq-BL)/2;Bl.height=Bq;Bl.width=Bk;var Bu=Bl.getContext("2d");Bu.save();Bu.strokeStyle=this.utils.rgb2rgbStr(this.formatProp.textClr);Bu.lineWidth=1;Bu.beginPath();var Bn=0.5+A8/2;var Bp=Bk-0.5-A8/2;Bu.moveTo(Bn,Br);Bu.lineTo(Bn,0);Bu.lineTo(Bp,0);Bu.lineTo(Bp,Br);Bu.moveTo(Bn,Br+BL);Bu.lineTo(Bn,Bq);Bu.lineTo(Bp,Bq);Bu.lineTo(Bp,Br+BL);Bu.stroke();Bu.restore();}},setMasterSliderLayout:function As(){var Bo=this.getWidth(),Bl=this.utils,Bm=this.masterSlider,Bp=Bm.style,Br=Bm.parentNode,Bq=Br.firstChild.style,Bn=Br.childNodes[2].style;Bq.width=(this.SLXP)+"px";Bn.width=(Bo-this.SRXP)+"px";var Bk=(this.SRXP-this.SLXP);Bp.width=(Bk+A8)+"px";Bl.translateCSS(this.SLXP-A8/2,0,false,Bm);this.drawMasterChartDiv();},makeSureMasterSliderNoOverlap:function AV(Bl){var Bk=this.SRXP-this.SLXP;if(Bk<A8){Bk=A8;var Bm=this.getWidth();if(!Bl){Bl=this.SRXP+A8/2===Bm-1?"R":"L";}if(Bl=="L"){this.SRXP=this.SLXP+A8;}else{this.SLXP=this.SRXP-A8;}}},calculateSXP:function AR(Bk,Bl,Bn){if(Bn){this.SLXP=Math.round((this.MRTX*Bk)+f.l);this.SRXP=Math.round((this.MRTX*(Bl-1))+f.l);}else{var Bm=this.SRXP-this.SLXP;this.SLXP=Math.round((this.MRTX*Bk)+f.l);this.SRXP=this.SLXP+Bm;}},makeSureMasterSliderNotBeyondTheMargin:function AP(Bm){var Bl=this.SRXP-this.SLXP;var Bk=this.getWidth();if(this.SLXP<f.l){this.SLXP=f.l;if(Bm){this.SRXP=this.SLXP+Bl;}}if(this.SRXP>Bk-f.r-1){this.SRXP=Bk-f.r-1;if(Bm){this.SLXP=this.SRXP-Bl;}}},makeSureSelectedIntervalMoreThanTwo:function h(){var Bl=this.MRTX,Bk=this.getWidth();if(this.SRXP-this.SLXP<Bl){if(x){if(x==="L"){this.SLXP=this.SRXP-Bl;}else{this.SRXP=this.SLXP+Bl;}}else{if(this.SLXP+Bl<=Bk-f.r){this.SRXP=this.SLXP+Bl;}else{this.SLXP=this.SRXP-Bl;}}}},makeSureSXPNotEqual:function Ar(){var Bl=this.MRTX,Bk=this.getWidth();if(this.SLXP===this.SRXP){if(x){if(x==="L"){this.SLXP-=Bl;}else{this.SRXP+=Bl;}}else{if(this.SRXP+Bl<=Bk-f.r){this.SRXP+=Bl;}else{this.SLXP-=Bl;}}}},makeSureSliderOnPoint:function Ba(){return ;var Bm=this.MRTX,Bl=0,Bk=AU[this.chartID];if(x){Bl=Math.round((this.SRXP-this.SLXP)/Bm);if(x==="L"){this.SLXP=this.SRXP-Bl*Bm;}else{if(x==="R"){this.SRXP=this.SLXP+Bl*Bm;}else{this.calculateSXP(Bk.rns,Bk.rne,true);}}}},initScroller:function BN(Bk){if(!Bk.offset&&this.scrollPast){Bk.offset={scrollPast:this.scrollPast};}this._super(Bk);var Bl=this;this._scrollDoneListener=this._scroller.attachEventListener("scrollDone",Bl.id,function(Bo){var Bn=Bl.model,Bq=AU[Bl.chartID],Br=Bq.rne-Bq.rns,Bm=Bl.ACrns+parseInt(Math.round(Bl._scroller.origin.x/Bl.RTX),10);if(Br===1){Bm++;}var Bp=Bm+Br;if(Bm<0){Bq.rns=0;Bq.rne=Bq.rns+Br;}else{if(Bp>Bn.series[0].rv.length){Bq.rne=Bn.series[0].rv.length;Bq.rns=Bq.rne-Br;}else{Bq.rns=Bm;Bq.rne=Bp;}}Bl.updateRnsRne();P=false;Bl.incFetchChart();});this._scrollMovedListener=this._scroller.attachEventListener("scrollMoved",Bl.id,function(Bp){if(AO){Bl.hiddenTooltipAndShowTimeSelector();}var Bo=Bl.model,Br=AU[Bl.chartID],Bn=Bo.series[0].rv.length,Bs=Br.rne-Br.rns,Bm=Bl.ACrns+Math.round(Bp.x/Bl.RTX),Bq=Math.min(Bm+Bs,Bn);if(Bm<0){Bm=0;}if(Bq-Bm!=Bs){P=true;}Bl.utils.translateCSS(-Bp.x+Bl.maxYLblWidth,-Bp.y,false,Bl.xLabelsDiv);Bl.calculateSXP(Bm,Bq,P);Bl.makeSureSXPNotEqual();Bl.makeSureMasterSliderNoOverlap();Bl.setMasterSliderLayout();});},getAppLevelTheme:function(){this.theme=j;},initFromVisProps:function(Bk){var Bl=Bk?Bk:{};var Bt={};this.getAppLevelTheme();var Bp=this.theme;var Bs=function(Bv,Bu){if(Bp===AE){return Bu;}else{return Bv;}};Bt.backgroundClr=Bl.fbg?J.hex2rgb(Bl.fbg):Bs([31,31,31],[247,247,247]);Bt.textClr=Bl.flt?J.hex2rgb(Bl.flt):Bs([224,224,224],[51,51,51]);Bt.tooltipClr=Bl.ftt?J.hex2rgb(Bl.ftt):Bs([224,224,224],[51,51,51]);Bt.backgroundAlpha=Bl.fbt!=undefined?(1-parseInt(Bl.fbt)/100):1;var Bn=function(Bu){if(Bu==true||Bu=="1"||Bu==1||Bu=="true"){return true;}return false;};Bt.useCustomAxisScale=Bl.fcas?Bn(Bl.fcas):false;var Bm=function(Bu){if(Bu>Number.MAX_VALUE){Bu=Number.MAX_VALUE;}if(Bu<-1*Number.MAX_VALUE){Bu=-1*Number.MAX_VALUE;}return Bu;};Bt.minValue=Bl.fmiav?Bm(parseFloat(Bl.fmiav)):"";Bt.maxValue=Bl.fmaav?Bm(parseFloat(Bl.fmaav)):"";Bt.condenseLabels=Bl.fcl?Bn(Bl.fcl):true;Bt.iconTintClr=Bs([194,194,194],[64,64,64]);Bt.secTextClr=Bs([135,135,135],[140,140,140]);Bt.secBackgroundClr=Bs([48,48,48],[229,229,229]);Bt.tintClr=[43,172,48];this.formatProp=Bt;this.chartLineColors=["#16b0ff","#ff3729","#04ba22","#ff960e","#ae79de","#cccd25","#19cee0","#a9a9a9","#b3cdef","#ffa796","#98df8a","#ffbf80","#dac3ec","#dac3ec","#a1dfea","#d6d6d6"];for(var Bq=0;Bq<this.chartLineColors.length;Bq++){var Br=""+Math.floor(Bq/4)+Bq%4;Br="fs"+Br;var Bo=Bl[Br];if(Bo){this.chartLineColors[Bq]="#"+Bo;}}this.glowColor=this.utils.rgb2rgbStr(this.formatProp.tooltipClr);},getMaxValue:function Aq(){if(typeof this.formatProp.maxValue=="number"){return this.formatProp.maxValue;}else{return this._super();}},getMinValue:function Bg(){if(typeof this.formatProp.minValue=="number"){return this.formatProp.minValue;}else{return this._super();}},preBuildRendering:function Al(){if(this._super){this._super();}this.masterChartHeight=90;this.slaveChartHeight=this.getHeight()-this.masterChartHeight;},buildRendering:function(){this._super();this.slaveChartHeight=this.getHeight()-this.masterChartHeight;},postBuildRendering:function BB(){var Bl=this.model;this.checkData(Bl);var Bo=Bl.err||Bl.eg;var Bn=this.xtabModel,Bk=(Bn&&Bn.docModel);if(Bo===""){this.errorMsg.style.display="none";return ;}else{if(Bo){if(Bk&&Bk.prompts){this.model.docModel=Bk;}this.renderErrorMessage(Bo);return ;}else{this.errorMsg.style.display="none";}}Bc();Az.call(this);this.updateSelectionLinkdrillInfo(Bl);if(this.baseModel&&!Bl.vp){this.model=this.baseModel;}this.chartID=this.getChartID(Bk);if(!AU[this.chartID]){Be(this.chartID);}this.scrollerConfig.scrollEl=this.animationCanvasDiv;this.isAndroidTab=!!mstrApp.isTablet();this.masterContext=this.masterCanvas.getContext("2d");this.renderVisTooltip();this.setMarginTopByTooltipHeight();this.renderLegend();if(this._super){this._super();}this.renderTimeSelector();this.setAnimationCanvasContainer();BS.call(this);if(Bk&&Bk.prompts){this.model.docModel=Bk;}this.drawSliderTooltipPointer();var Bm=this;if(Bk){this._infoWClosedListener=this.xtabModel.docModel.attachEventListener("infoWindowClosed",this.id,function(Bp){var Bq=Bp.psKey;if(!Bm.hasNonifwTarget&&Bm.selectorTargets&&Bm.selectorTargets[Bq]){Bm.lastSelectedPoint=null;Bm.incFetchChart(true);return ;}});}this.fullScreenListener=mstrmojo.touchManager.attachEventListener("fullScreenStateChange",this.id,function(Bp){this.adjustWidgetOffsets();});this.renderLegendTooltip();this.model.processed=true;},ongridDataChange:function BO(Bk){this.model=this.gridData;},getChartID:function N(Bl){var Bm="";var Bk=Bl?Bl:(this.layoutModel?this.layoutModel:(this.model.layoutModel?this.model.layoutModel:null));if(Bk){Bm=Bk.oid+"_"+Bk.currlayKey+"_"+this.model.k;}else{if(this.model.mid){Bm=this.model.mid;}else{Bm=Av++;}}return Bm;},checkData:function Ak(Bm){var Bn=Bm.colHeaders,Bl=Bm.categories;if(!Bn||(Bn&&Bn.length<1)){var Bk="The Time Series widget requires at least one attribute on the row axis and at least one metric on the column axis; optionally, one attribute can be placed above the metrics.";var Bo=window.getLocaleString?window.getLocaleString("TIME_SERIES_TEMPLATE_VALIDATION",Bk):mstrmojo.desc(8626,Bk);this.model.err=Bo;}if(Bn&&Bn.length>=1&&!this.isMetric(Bn[Bn.length-1].items)){var Bk="The Time Series widget requires at least one attribute on the row axis and at least one metric on the column axis; optionally, one attribute can be placed above the metrics.";var Bo=window.getLocaleString?window.getLocaleString("TIME_SERIES_TEMPLATE_VALIDATION",Bk):mstrmojo.desc(8626,Bk);this.model.err=Bo;}if((Bl&&(!Bl.items||Bl.items.length<2))){var Bk="There is not enough data to plot the graph.";var Bo=window.getLocaleString?window.getLocaleString("THERE_IS_NOT_ENOUGH_DATA_TO_PLOT_THE_GRAPH",Bk):mstrmojo.desc(8475,Bk);this.model.err=Bo;}},renderErrorMessage:function A0(Bk){this.errorMsg.innerHTML=Bk;this.errorMsg.style.display="block";},isMetric:function AM(Bk){if(Bk&&Bk.length>0&&Bk[0].cs!=null){return true;}return false;},updateSelectionLinkdrillInfo:function BF(Bl){var Bk=Bl.rowHeaders,Bo=Bk.length;for(var Bm=0;Bm<Bo;Bm++){var Bn=Bk[Bm];if(Bn.sc&&Bn.sc.tks){this.selectionOrLinkdrillOnRow=true;return ;}if(Bn.lm&&Bn.lm[0]&&Bn.lm[0].links){this.selectionOrLinkdrillOnRow=true;return ;}}},hasPageBy:function BW(){if(this.baseModel&&this.baseModel.phs&&this.baseModel.phs.show){return true;}return false;},setlegendStatus:function l(Bk,Bl){AU[this.chartID].legendBarWidth=Bl;AU[this.chartID].isLegendBarOpen=Bk;},setLegendSelected:function BR(Bl,Bk){AU[this.chartID].isLegendSelected=Bl;AU[this.chartID].legendSelectedIndex=Bk;},getLegendBarDiv:function AC(){return this.domNode.childNodes[6];},getTimeSelectorDiv:function BQ(){return this.domNode.childNodes[5];},renderLegend:function BX(){var Bo=this.legendBarDiv;var Bk=this.margin;var Bn=this.chartID;var Bm={placeholder:Bo,model:this.model,utils:this.utils,widget:this,isLegendBarOpen:AU[Bn].isLegendBarOpen,isAndroidTab:this.isAndroidTab,isLegendSelected:AU[Bn].isLegendSelected,legendSelectedIndex:AU[Bn].legendSelectedIndex,top:Bk.t+"px",right:"0px",zIndex:1};var Bl=new mstrmojo.VisTimeSeriesLegend(Bm);Bl.render();this._legend=Bl;},renderTimeSelector:function E(){var Bo=this.timeSelectorDiv;var Bk=this.margin;var Bn=this.chartID;var Bm={placeholder:Bo,offsetx:this.margin.l,widget:this,chartStatus:AU[this.chartID]};var Bl=new mstrmojo.VisTimeSeriesTimeSelector(Bm);Bl.render();this._timeSelector=Bl;},renderVisTooltip:function Bd(){var Bk={placeholder:this.tooltip,cssClass:"timeseries-tooltip"};this._tooltip=new mstrmojo.AndroidVisTooltip(Bk);this._tooltip.render();this._tooltip.toggle(false);},renderLegendTooltip:function AW(){var Bk={placeholder:this.legendTooltip,boundary:this.domNode};this._legendTooltip=new mstrmojo.VisTextTooltip(Bk);this._legendTooltip.render();this._legendTooltip.toggle(false);},setAnimationCanvasContainer:function A4(){var Bl=AU[this.chartID],Bk=this.margin;this.itemsContainerNode.style.left=Bk.l+"px";this.xLabelsDivContainer.style.left=(Bk.l-this.maxYLblWidth)+"px";},updateRnsRne:function BE(Bl,Bm){var Bn=AU[this.chartID],Bk=this.model;if((Bl==0||Bl)&&Bm){Bn.rns=Bl;Bn.rne=Bm;}Bk.rns=Bn.rns;Bk.rne=Bn.rne;},drawPreparation:function t(Bs,Bo,Bk){var Bq=this,Bl=this.margin,Bm=Bq.model,Bt=Bk-Bo,Bv=Bq.getHeight()-Bq.masterChartHeight,Bw=Bq.animationContext;var Bn=Bq.getChartWidthOnScreen();this.chartWidth=Bn;Bb.call(this,Bo,Bk);var Br=Bq.ACrne-Bq.ACrns;if(Bt<Bs){if(Bt>1){Bt--;}if(Br>1){Br--;}Bs--;}this.itemsContainerNode.style.width=Bn+"px";this.itemsContainerNode.style.height=Bv+"px";this.xLabelsDivContainer.style.width=Bq.maxYLblWidth+Bn+"px";this.xLabelsDivContainer.style.height=Bv+"px";totalChartWidth=(Bs/Bt)*Bn;Bq.totalChartWidth=totalChartWidth;var Bp=0;if(Bm.currentRatio>G){Bp=(Br/Bt)*Bn;}else{Bp=totalChartWidth;}this.acContentWidth=Bp;var Bu=G*this.getWidth();if(Bq.animationCanvas.width!==Bu){At=true;}Bq.animationCanvas.width=Bu;Bq.RTX=(totalChartWidth-1)/(this.windowSize-1);},drawChart:function A6(){var Bo=this.model;if(Bo.err){return ;}var Bp=this,Bv=Bo.mvalues,Bl=Bp.getWidth(),Bn=Bp.margin,Bs=Bp.utils,Bt=Bo.series,Bk=Bo.ylbls,Br=Bp.windowSize,Bm=AU[this.chartID];if((!Bm.rns&&Bm.rns!=0)||!Bm.rne||Bm.rns<0||Bm.rne>Br){Bm.rns=Bo.rns;Bm.rne=Bo.rne;if((Bm.rne-Bm.rns)<2){if(Bm.rns>0){Bm.rns=Bm.rne-2;}else{Bm.rne=Bm.rns+2;}}}this.updateRnsRne();var Bq=Bp.masterChartHeight;var Bu=Bp.slaveChartHeight;if(!Bt){return ;}if(Bp.isDrawAxis&&Bp.drawYAxisLabels){Bn.l=Bs.getLabelWidthForMargin(Bp,Bo.mls);}Bp.masterCanvas.height=Bq;Bp.masterCanvas.width=Bl;Bs.fillMasterChartBackground(Bp,0,f.t,Bl,Bq-f.t-f.b,f.b,Bp.masterContext);Bp.MRTY=(Bq-f.t-f.b-1-3)/(Bv[Bv.length-1]-Bv[0]);Bp.MRTX=(Bl-f.l-f.r-1)/(Br-1);Bp.drawSeries(0,Br,Bm.rns,Bm.rne,Bt,Bp.masterContext,true);Bp.setMasterSlider();this.calculateRnsRneFromSXP();if(Bp.canvas.height!=Bu||Bp.animationCanvas.height!=Bu||Bp.highlightCanvas.height!=Bu||Bp.canvas.width!=Bl){Bp.canvas.height=Bp.animationCanvas.height=Bp.highlightCanvas.height=Bu;Bp.canvas.width=Bp.highlightCanvas.width=Bl;At=true;Bs.fillBackground(Bp);}this.maxYLblWidth=this.getMaxTextWidth(Bk,this.mstrmojo_Chart_lbl_font)+5;this.drawPreparation(Br,Bm.rns,Bm.rne);Bp.RTY=(Bu-Bn.t-Bn.b-1-4)/(Bv[Bv.length-1]-Bv[0]);Bp.drawSeries(Bp.ACrns,Bp.ACrne,Bm.rns,Bm.rne,Bt,Bp.animationContext,false);},calculateRnsRneFromSXP:function BZ(Bo){var Bp=this,Bl=Bp.model,Bk,Bn;var Bm=Bl.rne-Bl.rns;Bn=Math.round((Bp.SRXP-f.l)/Bp.MRTX)+1;Bn=Math.min(Bn,Bp.windowSize);if(Bo){Bk=Bn-Bm;}else{Bk=Math.round((Bp.SLXP-f.l)/Bp.MRTX);}this.updateRnsRne(Bk,Bn);},reDrawSlaveChartImpl:function Ac(){var Bo=this,Bl=Bo.model,Bn=AU[this.chartID],Bk=Bl.series,Bm=Bo.animationContext;this.drawPreparation(Bo.windowSize,Bn.rns,Bn.rne);Bo.drawSeries(Bo.ACrns,Bo.ACrne,Bn.rns,Bn.rne,Bk,Bm,false);BS.call(Bo);this.removeLabels();AJ=true;this.drawLabels();AJ=false;},redrawSeries:function K(){var Bq=this,Bn=Bq.model,Bk=Bn.series,Bo=Bq.animationContext,Bm=Bq.windowSize,Bl=Bq.getHeight(),Bp=AU[this.chartID];Bq.animationCanvas.width=Bq.animationCanvas.width;Bq.drawSeries(Bq.ACrns,Bq.ACrne,Bp.rns,Bp.rne,Bk,Bo,false);BS.call(Bq);this.removeLabels();AJ=true;this.drawLabels();AJ=false;},incFetchChart:function BI(Bv){var B2=this,Bo=B2.model,Bs=AU[this.chartID],Bl=Bo.series,Bm=B2.animationContext,By=B2.margin,B1=B2.utils,Bk=[],Bx=B2.getWidth(),Bz=B2.getChartWidthOnScreen(),B0=B2.canvas.height,Bw=B2.windowSize;var Bq=Bl[0].rv.length;var Bu=Bs.rne-Bs.rns;var Bp=Bb.call(this);var Br=Bv||Bp||Bs.isLegendSelected||B2.needRedrawVerticalLine;if(Br){var Bn=B2.ACrne-B2.ACrns;if(Bu<Bq){if(Bu>1){Bu--;}if(Bn>1){Bn--;}Bq--;}totalChartWidth=(Bq/Bu)*Bz;B2.totalChartWidth=totalChartWidth;var Bt=0;if(Bo.currentRatio>G){Bt=(Bn/Bu)*Bz;}else{Bt=totalChartWidth;}this.acContentWidth=Bt;B2.animationCanvas.width=B2.animationCanvas.width;B2.drawSeries(B2.ACrns,B2.ACrne,Bs.rns,Bs.rne,Bl,Bm,false);BS.call(B2);}this.removeLabels();AJ=true;this.drawLabels(!Br);AJ=false;},reDrawSlaveChart:function AH(){var Bk=this;this.calculateRnsRneFromSXP();this.reDrawSlaveChartImpl();Ax=false;x=null;this.hideMessage();},drawSeries:function A(Bk,Bq,Bu,Bm,Bx,Bl,Bz){var Bv=this,Bw=Bv.utils,By=[],Bp=0,Bo=Bx.length;var Bt=Bz?1:(Bm-Bu>180?1:2);for(var Br=Bo-1;Br>=0;Br--){By=[];Bp=0;for(var Bs=Bk;Bs<Bq;Bs++){var Bn=Bx[Br].rv[Bs];if(Bn.length===0){By[Bp++]=null;continue;}By[Bp]={x:Bz?((Bs*Bv.MRTX)+f.l+1):((Bs-Bk)*Bv.RTX),y:Bz?Bw.getMasterYValue(Bv,Bn,f):Bw.getYValue(Bv,Bn)};Bp++;}Bv.drawChartLine(By,Bu-Bk,Bm-Bk,Br,Bl,Bz,Bt);}if(!Bz&&Bv.lastSelectedPoint){Bv.highlightSelectedPoint();}},getSerieColor:function w(Bk){var Bl=this.chartLineColors.length;return this.chartLineColors[Bk%Bl];},drawChartLine:function A5(Bk,Bl,Bt,B3,Bo,Bp,Bs){var B4=this,By=B4.model,Bv=By.series[B3],B2=this.utils,Bu=AU[this.chartID];Bo.save();Bo.lineCap="round";Bo.lineWidth=Bs||2;Bo.lineJoin="round";Bo.beginPath();if(this.formatProp&&this.formatProp.useCustomAxisScale){var Bx;if(!Bp){Bx=B4.margin;Bo.rect(0,Bx.t,B4.animationCanvas.width,B4.slaveChartHeight-Bx.b-Bx.t);}else{Bx=f;Bo.rect(0,Bx.t,B4.getWidth(),B4.masterChartHeight-Bx.b-Bx.t);}Bo.clip();}var Bn=this.getSerieColor(B3),Bw=J.hex2rgb(Bn),Bz=Bk.length,B0=Bt-Bl;Bo.strokeStyle=Bn;if(Bu.isLegendSelected&&!Bp){if(Bu.legendSelectedIndex===B3){var Bm=this.canvas.height-this.margin.b;var Br=Bl,Bq=Bt-1;for(var B1=0;B1<Math.ceil((Bz-1-Bl)/(B0-1));B1++){if(mstrmojo.dom.isIE10){B2.drawLineAreaWithSplit(B4,Bk,Br,Bq,Bm,Bw,Bo,AI);}else{B2.drawLineArea(B4,Bk,Br,Bq,Bm,Bw,Bo);}Br=Bq;Bq=Math.min(Br+B0-1,Bz-1);}Br=Math.max(Bl-B0+1,0),Bq=Bl;for(var B1=Math.ceil((Bl)/(B0-1));B1>0;B1--){if(mstrmojo.dom.isIE10){B2.drawLineAreaWithSplit(B4,Bk,Br,Bq,Bm,Bw,Bo,AI);}else{B2.drawLineArea(B4,Bk,Br,Bq,Bm,Bw,Bo);}Bq=Br;Br=Math.max(Br-B0+1,0);}if(mstrmojo.dom.isIE10){B2.drawLineAreaWithSplit(B4,Bk,Br,Bq,Bm,Bw,Bo,AI);}else{B2.drawLineArea(B4,Bk,Br,Bq,Bm,Bw,Bo);}Bo.globalAlpha=1;Bo.lineWidth=2;}else{Bo.globalAlpha=0.3;Bo.lineWidth=1;}}if(mstrmojo.dom.isIE10){B2.drawLineSetWithSplit(B4,Bk,false,Bo,AI);}else{B2.drawLineSet(B4,Bk,false,Bo);}Bo.restore();},drawLabels:function W(Bk){this.drawChartXYAxis();if(this._super){this._super(Bk);}var Bl=this.xLabelsDiv.offsetHeight;},drawSelector:function V(Bx,Bv,Bw){var Bo=this.model,Bq=Bo.series[0].rv.length,Bl=Bq,Bn=this.baseModel,Bz=Bn.rowHeaders,Bp=AU[this.chartID],Bt=Bp.rns,Bm=Bp.rne;if(Bw){var Br=parseInt(Bv.rs,10);var Bk=Bv.sr;for(var Bs=0;Bs<Bz.length;Bs++){if(Bz[Bs].id===Bk){Bl=Bz[Bs].l*Br;break;}}if(Bl<2){Bl=2;}var Bu=mstrmojo.dom.findAncestorByAttr(Bx,"value",true,this.domNode);var By=Bm;if(By-Bl>=0){Bp.rns=By-Bl;Bp.rne=By;}else{Bp.rns=0;Bp.rne=Bl<Bq?Bl:Bq;}this.updateIntervalPosition();this.updateRnsRne();}this.refreshChart(true,Ah);AJ=false;this.hideMessage();},getTouchValue:function BH(Bl,Bq){var Bo=this.model,Bk=this.margin,Bn=AU[this.chartID];var Bp=Bn.rne-Bn.rns>0?Bn.rne-Bn.rns>1?Bn.rne-Bn.rns:2:this.windowSize;var Bm=Math.round(((Bl-Bk.l)*(Bp-1))/(this.getChartWidthOnScreen()));return(Bm<Bp)?Bm:null;},getNearestPoint:function Aa(Bu,Bt){var Bs=this,Bn=AU[this.chartID],Bo=Bs.margin;var Bp=Bs.utils.getTouchXYOnWidget(Bu,Bt,Bs);Bu=Bp.touchX;Bt=Bp.touchY;if(Bu<Bo.l||Bt<Bo.t||Bt>Bs.canvas.height-Bo.b){return ;}var Bm=this.getTouchValue(Bu,Bt);var Bl=Bm+Bn.rns;var Bk=(Bm*Bs.RTX)+Bs.margin.l;var Bv,Bq;if(Bn.isLegendSelected){Bq=Bn.legendSelectedIndex;Bv=Bs.utils.getYValue(Bs,Bs.model.series[Bq].rv[Bl]);}else{var Br=Bs.utils.getSeriesIndexAndYValue(Bs,Bl,Bt);Bq=Br.si;Bv=Br.y;}return{rowIdx:Bl,serieIdx:Bq,point:{x:Bk,y:Bv}};},highlightPoint:function B(Bu,Bx,Bw){var Bs=this,Bz=Bs.highlightContext,By=Bs.highlightCanvas.height,Br=Bs.margin,Bl=Bs.model,Bv=Bs.utils,Bn=AU[this.chartID],Bp=Bn.isLegendSelected?Bn.legendSelectedIndex:Bs.seriesIndex;this.highlightCanvas.width=this.highlightCanvas.width;if(Bu<0){return ;}var Bo=(Bu*Bs.RTX)+Br.l;Bz.strokeStyle=this.utils.rgb2rgbStr(this.formatProp.textClr);Bz.lineCap="round";Bz.lineWidth=2;Bz.globalAlpha=1;Bv.drawLineSet(Bs,[{x:Bx,y:this._tooltip.domNode.offsetHeight},{x:Bx,y:By-Br.b}],false,Bz);Bz.fillStyle=Bz.strokeStyle;var B0=Bl.series,Bm=B0.length,Bq=(Bn.rns===0||Bn.rne-Bn.rns>1)?Bn.rns:Bn.rns-1,Bk=Bq+Bu,Bt=Bv.getYValue(Bs,B0[Bp].rv[Bk]);if(!AU[this.chartID].isLegendSelected){Bz.strokeStyle=Bs.getSerieColor(Bp);}Bz.fillStyle=Bz.strokeStyle;if(Bt>=Br.t&&Bt<=this.canvas.height-Br.b){Bv.drawArc(Bs,Bo,Bt,5,0,Math.PI*2,true,true,Bz);}this.lastHighlightPoint={rowIdx:Bk,serieIdx:Bp,point:{x:Bo,y:Bt}};},hideTimeSelectorLabels:function BK(){var Bk=this.domNode.getElementsByClassName("timeseries-intervals");for(var Bl=0;Bl<Bk.length;Bl++){Bk[Bl].style.display="none";}},showTimeSelectorLabels:function Q(){var Bk=this.domNode.getElementsByClassName("timeseries-intervals");for(var Bl=0;Bl<Bk.length;Bl++){Bk[Bl].style.display="block";}},getFormattedDateForTooltip:function Ay(Br,Bk){if(isNaN(Br)){return Br;}var Bo=Br;try{Br=this.utils.convertRawValueToMilliseconds(Br);var Bn=new Date(Number(Br)),Bl=mstrmojo.locales.datetime;var Bq=Bk?Bl.MONTHNAME_FULL[Bn.getMonth()]:Bl.MONTHNAME_SHORT[Bn.getMonth()];var Bm=Bn.getFullYear().toString();if(Bk){Bo=Bq+" "+Bn.getDate()+", "+Bm;}else{Bo=Bq+"-"+Bn.getDate()+"-"+Bm.substring(2);}}catch(Bp){}return Bo;},showLegendTooltip:function k(Bk){this._legendTooltip.updateContent(Bk);},hiddenLegendTooltip:function BV(){this._legendTooltip&&this._legendTooltip.toggle(false);},getLegendName:function p(Bl,Bn,Bo){var Bq=Bl.length;var Bp=Bn[Bo].hi.length;if(Bq<1){return"null";}if(Bp==Bq){var Bs="";for(var Bm=0;Bm<Bp;Bm++){var Bk=Bl[Bm];var Bt="";if(Bk.es){Bt=Bk.es[Bn[Bo].hi[Bm]];}else{Bt=Bk.items[Bn[Bo].hi[Bm]].n;}if(Bm>0){Bs+=" ";}if(Bt!=""){Bs+=Bt;}}return Bs;}else{var Br=Bl[0].items;Bs=Br[Bo%Br.length].n;return Bs;}return"null";},getRowHeader:function Ai(Bu){var Bq=this,Bk=Bq.model,Bn=Bk.ri,Bz=Bk.series,Br=Bk.categories,Bt=Br.tp,Bl=AU[this.chartID],By=Bk.rowHeaders,Bw=By.length,Bp=[];var Bo=Br.items[Bu];var Bs=Bn&&Bn[Bu];if(!Bs){return Bp;}if(Bt.toString()===Bq.DSS_XML_BASE_FORM_DATE){Bo=Bq.getFormattedDateForTooltip(Bo,true);var Bx={};Bx.n=By[Bw-1].n;Bx.v=Bo;Bp.push(Bx);}else{for(var Bm=0;Bm<Bw;Bm++){var Bx={};var Bv=By[Bm];Bx.n=Bv.n;Bx.v=Bv.es[Bs[Bm]]||"";Bp.push(Bx);}}return Bp;},setMarginTopByTooltipHeight:function C(){var Bp=this,Bk=Bp.model,Bo=Bp.margin,Bt=Bk.series,Bm=Bk.colHeaders;if(this._tooltip){this._tooltip.displayInfo([{n:"legendName",v:"val"},{n:"rowHeaderName",v:"rowHeaderValue"}]);this._tooltip.toggle(true);var Bs=this._tooltip.domNode.offsetHeight+10;this._tooltip.toggle(false);if(Bp.margin.t<Bs){Bp.margin.t=Bs;}}var Bn=Bp.sliderTooltip,Br=Bn.firstChild,Bl=Bn.lastChild;Br.innerHTML="name: value";Br.style.display="block";var Bq=Br.offsetHeight;Bp.sliderTooltipYPosition=Bp.getHeight()-Bp.masterChartHeight-Bq-7+f.t;Bl.style.top=Bq+"px";Br.style.display="none";},renderTooltip:function BU(Bu,Bv,Bs){if(Bu<0){this._tooltip.toggle(false);return ;}var B4=this,Bz=B4.model,B1=B4.margin,Bx=Bz.series,Bw=AU[this.chartID],B2=Bw.isLegendSelected?Bw.legendSelectedIndex:B4.seriesIndex,Bk=(Bw.rns===0||Bw.rne-Bw.rns>1)?Bw.rns:Bw.rns-1,Bq=Bz.colHeaders;var By=B4.getWidth();if(!AO){B4.hideTimeSelectorLabels();AO=true;var Bo=mstrmojo.touchManager;this._touchListener=Bo.attachEventListener("touchesBegin",this.id,function(B6){if(!Ao.call(B4,B6.touch)){B4.hiddenTooltipAndShowTimeSelector();}});}var Bt=Bk+Bu;var B5=Bx[B2].v[Bt]?Bx[B2].v[Bt]:"null";var Bm=this.getLegendName(Bq,Bx,B2);var Bn=this.getRowHeader(Bt),B3="",Bp="";for(var B0=0;B0<Bn.length;B0++){B3+=Bn[B0].n;Bp+=Bn[B0].v;if(B0<Bn.length-1){B3+=" ";Bp+=" ";}}this._tooltip.displayInfo([{n:Bm,v:B5},{n:B3,v:Bp}]);this._tooltip.toggle(true);this._tooltip.doLayout(By-10);var Bl=this._tooltip.domNode.offsetWidth,Br=Bv-Bl/2;if(Br<5){Br=5;}else{if(Br>By-5-Bl){Br=By-5-Bl;}}this._tooltip.posTo({x:Br,y:5});},handleTouchEnd:function U(){this._super();this._tooltip&&this._tooltip.toggle(false);},showMessage:function AQ(Bn){var Bm=this.loadingMsg,Bl=Bm.style;Bm.innerHTML=Bn||(window.getLocaleString?(window.getLocaleString("LOADING","Loading")+"..."):mstrmojo.desc(5674,"Loading..."));Bl.display="block";Bl.opacity=1;var Bk=Math.round(this.getWidth()/2-Bm.offsetWidth/2);var Bo=Math.round(this.getHeight()/2-Bm.offsetHeight/2);this.utils.translateCSS(Bk,Bo,false,Bm);},hideMessage:function L(){this.loadingMsg.style.opacity=0;},showMasterSliderTooltip:function AK(Bk){BY.addClass(Bk.node,"mstrmojo-timeseries-span-shadow");var Bl=this.sliderTooltip;Bl.firstChild.style.display="block";Bl.lastChild.style.display="block";this.renderSliderTooltip(Bk.value==="L"?this.SLXP:this.SRXP);},unrender:function Ad(Bk){if(this._tooltip){this._tooltip.destroy();delete this._tooltip;}if(this._legend){this._legend.destroy();delete this._legend;}if(this._timeSelector){this._timeSelector.destroy();delete this._timeSelector;}if(this._legendTooltip){this._legendTooltip.destroy();delete this._legendTooltip;}if(this._super){this._super(Bk);}},refresh:function BD(){var Bk=this;Bk.unrender();if(!Bk.model.processed){Bk.lastSelectedPoint=null;}Bk.render();},removeLabels:function D(){var Bl=this;Bl.canvas.width=Bl.canvas.width;Bl.utils.fillBackground(Bl);Bl.xLabelsDiv.innerHTML="";var Bk=Bl.domNode.getElementsByClassName("mstrmojo-chart-ylbl-div")[0];if(Bk){Bk.innerHTML="";}},refreshChart:function BJ(Bk,Bo){var Bn=this,Bm=Bn.getWidth(),Bl=Bn.getHeight();if(Bn.model.err){return ;}Bn.highlightCanvas.width=Bm;Bn.animationCanvas.width=Bn.animationCanvas.width;if(Bk){Bn.context.clearRect(0,0,Bm,Bl);Bn.removeLabels();if(Bo){Bn.data.processLinearData(Bn);}}Bn.drawChart();this.setAnimationCanvasContainer();Bn.drawLabels();BS.call(Bn);},timeSelectorOnClick:function e(Bt){var Bn=AU[this.chartID];if(!AJ){AJ=true;var Br=this,Bs=Bt.value,Bm=Bt.node,Bq=true;if(Bm===Br.currSelection&&!Bn.usingCustomInterval){AJ=false;return ;}if(Bs==="S"){if(Bn.usingCustomInterval){Bn.usingCustomInterval=false;}else{Br.updateIntervalPosition();}if(Br.currSelection){Br._timeSelector.toggleSelected(Br.currSelection,false);Br._timeSelector.toggleGlowEffect(Br.currSelection,false);}Br._timeSelector.toggleSelected(Bm,true);Br._timeSelector.toggleGlowEffect(Bm,true);var Bl=Br.baseModel,Bk=parseInt(Bm.getAttribute("value"));var Bp=Bl.vp.rl[Bk];if((Bl.k&&Bl.k!==Bp.ds)&&Br.layoutModel){var Bo=Af.call(this,Bp);if(!Bo){return ;}}else{Ah=false;}Bq=Bm!==Br.currSelection;Br.currSelection=Bm;Bn.currSelectionIdx=Br.currSelection.getAttribute("value");Br.showMessage();window.setTimeout(function(){Br.drawSelector(Bm,Bp,Bq);},10);}}},moveMasterSlider:function AN(Bl){var Bo=this,Bk=Bo.model,Bn=Bo.getWidth(),Bp=Math.round(Bl-H),Bm=AU[this.chartID];this.SLXP+=Bp;this.SRXP+=Bp;this.SLXP=Math.round(this.SLXP);this.SRXP=Math.round(this.SRXP);this.makeSureMasterSliderNotBeyondTheMargin(true);this.setMasterSliderLayout();this.calculateRnsRneFromSXP(true);BS.call(Bo);if(!Bm.usingCustomInterval&&this.currSelection){this.updateIntervalPosition();}},updateIntervalPosition:function s(){var Bn=this,Bk=Bn.model,Bm=AU[this.chartID];if(Bn.currSelection){var Bl=Bn.currSelection.getAttribute("value");Bm.timeSelectedIntervalPosition[Bl]={rns:Bm.rns,rne:Bm.rne};}},drawSliderTooltipPointer:function Y(){var Bm=this.sliderTooltip.lastChild,Bl=Bm.getContext("2d"),Bn=Bm.width,Bk=Bm.height;Bl.fillStyle="#ffffff";Bl.beginPath();Bl.moveTo(0,0);Bl.lineTo(Bn,0);Bl.lineTo(Bn/2,Bk);Bl.lineTo(0,0);Bl.closePath();Bl.fill();},renderSliderTooltip:function Ap(Bm){var Bq=this,Bo=Bq.sliderTooltip,Bs=Bo.firstChild,Bn=Bo.lastChild,Bl=Bq.getWidth();var Br=Bm;var Bp=F.call(this,Bm);if(Bp==""){Bp="--";}Bs.innerHTML=Bp;var Bt=Bs.offsetWidth,Bk=Bt/2;if(Bm!==this.SLXP){Bm=this.SRXP-Bk;}else{Bm-=Bk;}if(Bm<0){Bm=0;}else{if(Bm+Bt>Bl){Bm=Bl-Bt;}}Bn.style.left=(Br-Bm-3)+"px";Bq.utils.translateCSS(Bm,Bq.sliderTooltipYPosition,false,Bo);},resizeMasterSlider:function b(Bp){var Bo=this,Bl=Bo.getWidth(),Bs=Bo.masterSlider,Br=Bs.style,Bk=Bs.parentNode.firstChild.style,Bm=Bs.parentNode.childNodes[2].style;var Bq=Bo.utils.getTouchXYOnWidget(Bp,0,Bo);Bp=Bq.touchX;var Bn;if(x==="L"){this.SLXP=Bp;Bn="R";}else{this.SRXP=Bp;Bn="L";}Bo.makeSureMasterSliderNotBeyondTheMargin();Bo.makeSureMasterSliderNoOverlap(Bn);this.setMasterSliderLayout();if(x==="L"){Bo.renderSliderTooltip(this.SLXP);}else{Bo.renderSliderTooltip(this.SRXP);}AU[this.chartID].usingCustomInterval=true;Ax=true;},shouldTouchBubble:function AG(Bk){return false;},hiddenTooltipAndShowTimeSelector:function AF(){if(AO){this.handleTouchEnd();AO=false;this.showTimeSelectorLabels();var Bk=mstrmojo.touchManager;Bk.detachEventListener(this._touchListener);delete this._touchListener;}},onCrossWidgetMultitouch:function o(){this.hiddenTooltipAndShowTimeSelector();},touchBegin:function BP(Bm){this.adjustWidgetOffsets();var Bk=this.isMasterSliderTouched(Bm);if(Bk){this.hiddenTooltipAndShowTimeSelector();var Bl=Bk.value;if(Bl==="L"||Bl==="R"||Bl==="MS"){x=Bk.value;H=Bm.pageX;if(Bk.value!=="MS"){this.showMasterSliderTooltip(Bk);}}else{return false;}}else{if(!Bj.call(this,Bm)){this.hiddenTooltipAndShowTimeSelector();if(this.shouldTouchBubble(Bm)){return this.bubbleTouchEvent(Bm);}return false;}}},isMasterSliderTouched:function BT(Bm){var Bt=R.call(this,Bm);if(Bt&&(Bt.value==="L"||Bt.value==="R")){return Bt;}var Bk=45*this.utils.getScreenZoomFactor();var Bn=this.utils.getTouchXYOnWidget(Bm.pageX,Bm.pageY,this);var Br=Bn.touchX,Bq=Bn.touchY;var Bs=this.getHeight();if(Bq>Bs||Bq<Bs-this.masterChartHeight){return null;}if(Br<this.SRXP&&Br>this.SLXP){return{node:this.masterSlider.childNodes[1],value:"MS"};}var Bo=Math.abs(Br-this.SLXP);var Bl=Math.abs(this.SRXP-Br);var Bp=Math.min(Bo,Bl);if(Bp<Bk){if(Bo==Bp){return{node:this.masterSlider.firstChild,value:"L"};}else{if(Bl==Bp){return{node:this.masterSlider.lastChild,value:"R"};}}}else{return null;}return null;},touchSelectBegin:function g(Bl){this.hiddenTooltipAndShowTimeSelector();var Bk=this.isMasterSliderTouched(Bl);if(Bk){if(Bk.value==="L"||Bk.value==="R"||Bk.value==="MS"){x=Bk.value;H=Bl.pageX;}}else{this.handleTouchBegin(Bl.pageX,Bl.pageY);}},touchSelectMove:function A3(Bk){if(x){if(x==="MS"){this.moveMasterSlider(Bk.pageX);}else{this.resizeMasterSlider(Bk.pageX);}H=Bk.pageX;return false;}this.handleTouchMove(Bk.pageX,Bk.pageY);},handleTouchSelectEnd:function Z(Bm){if(x){if(x==="MS"){this.makeSureSliderOnPoint();this.setMasterSliderLayout();this.incFetchChart();}else{O.call(this);}return false;}var Bl=false;if(Bm){var Bk=this.getLastHighlightPoint();Bl=Bk&&this.pointCanBeSelected(Bk.rowIdx,Bk.serieIdx);}if(!Bl){this.handleTouchEnd();if(AO){AO=false;this.showTimeSelectorLabels();}}else{this.seriesIndex=-1;}this.hiddenLegendTooltip();},touchSelectEnd:function BA(Bk){this.handleTouchSelectEnd(Bk);},touchMultiBegin:function A2(Bk){this.handleTouchSelectEnd();},touchSwipeMove:function AT(Bk){if(Bj.call(this,Bk)&&this._super){this._super(Bk);}else{if(x){if(x==="MS"){this.moveMasterSlider(Bk.pageX);}else{this.resizeMasterSlider(Bk.pageX);}H=Bk.pageX;}}},touchSwipeEnd:function Au(Bk){if(x){if(x==="MS"){this.makeSureSliderOnPoint();this.setMasterSliderLayout();this.incFetchChart();}else{O.call(this);}return false;}else{if(this._super){this._super(Bk);}}},touchSelectCancel:function u(Bk){this.touchCancel(Bk);},touchCancel:function Bi(Bk){this.touchSelectEnd(Bk);},touchEnd:function M(Bk){if(x&&!Ax){a.call(this);x=null;}this._legend.hiddenSwitcherArrowGlowEffect();return false;},pointCanBeSelected:function AA(Bk,Bp){if(this.selectionOrLinkdrillOnRow){return true;}var Bv=this,Bn=Bv.model,Bl=Bn.colHeaders,Bs=Bl.length,Bm=Bn.series[Bp].hi,Br=Bm.length;for(var Bo=0;Bo<Bs;Bo++){var Bt=Bl[Bo];if(Bt.es){if(Bt.sc&&Bt.sc.tks){return true;}if(Bt.lm&&Bt.lm[0]&&Bt.lm[0].links){return true;}}else{if(Bt.sc&&Bt.sc.tks){return true;}var Bq=Bt.lm,Bu=Bq&&Bq[Bm[Bo]];if(Bu&&Bu.links){return true;}}}return false;},getModelK:function z(){var Bk=this.baseModel&&this.baseModel.k;return Bk;},getActionObjList:function BC(Bl,B6){var Bn=[];var Bm=[];var Bw=0;var Bn=[];var Bt=null;var Bk=-1;var CA=this,Br=CA.model,B2=Br.ri,B0=B2[Bl.rowIdx],Bp=Br.rowHeaders,B1=Bp.length;for(var B7=0;B7<B1;B7++){var Bu=Bp[B7];if(Bu.sc&&Bu.sc.tks){if(B6&&(Bu.sc.all==="false"||Bu.sc.all===false)){return null;}var Bz={};Bz.sc=Bu.sc;Bz.es=Bu.es[B0[B7]];Bz.eid=B6?"OA:(All)":Bu.eid[B0[B7]];Bm.push(Bz);Bw=Bu.at||0;}if(Bu.lm&&Bu.lm[0]&&Bu.lm[0].links&&!Bt){Bt={};Bt.titleInfo=Bu;Bt._e={id:Bu.eid[B0[B7]],n:Bu.es[B0[B7]]};}}var By=Br.colHeaders,Bs=By.length,Bq=Br.series[Bl.serieIdx].hi,B8=Bq.length;for(var B7=Bs-1;B7>=0;B7--){var Bv=By[B7];if(Bv.es){if(Bv.sc&&Bv.sc.tks){if(B6&&(Bv.sc.all==="false"||Bv.sc.all===false)){return null;}var Bz={};Bz.sc=Bv.sc;Bz.es=Bv.es[Bq[B7]];Bz.eid=B6?"OA:(All)":Bv.eid[Bq[B7]];Bm.push(Bz);Bw=Bv.at||0;}if(Bv.lm&&Bv.lm[0]&&Bv.lm[0].links&&!Bt){Bt={};Bt.titleInfo=Bv;Bt._e={id:Bv.eid[Bq[B7]],n:Bv.es[Bq[B7]]};}}else{if(Bv.sc&&Bv.sc.tks){if(B6&&(Bv.sc.all==="false"||Bv.sc.all===false)){return null;}var Bz={};Bz.sc=Bv.sc;Bz.es=Bv.items[Bq[B7]].n;Bz.eid=B6?"OA:(All)":Bv.items[Bq[B7]].id;Bm.push(Bz);Bw=Bv.at||0;}Bk=B7;}}if(Bm.length>0){Bw=Bw|Ab;this.infoWindowAnchor.style.left=(Bl.point.x-9)+"px";this.infoWindowAnchor.style.top=(Bl.point.y-9)+"px";Bn.push({at:Bw,k:this.getModelK(),scObjList:Bm,anchor:this.infoWindowAnchor});return Bn;}if(!Bt){var B3=By[Bk],B5=B3.items[Bq[Bk]],Bx=B3.lm[Bq[Bk]];if(Bx&&Bx.links){Bt={};Bt.titleInfo=B3;Bt.mix=Bq[Bk];var Bo=Bt;for(var B7=0;B7<B1;B7++){var Bu=Bp[B7];var B9={};B9.titleInfo=Bu;B9._e={id:Bu.eid[B0[B7]],n:Bu.es[B0[B7]]};Bo._lp=B9;Bo.axis=AY;Bo=B9;}Bo=Bt;for(var B7=Bs-1;B7>=0;B7--){var Bv=By[B7];if(Bv.es){var B4={};B4.titleInfo=Bv;B4._e={id:Bv.eid[Bq[B7]],n:Bv.es[Bq[B7]]};Bo._tp=B4;Bo.axis=A1;Bo=B4;}}}}if(Bt){Bw=Bw|BM;Bn.push({at:Bw,k:this.getModelK(),node:Bt});return Bn;}return null;},getLastHighlightPoint:function S(){return this.lastHighlightPoint||null;},performAction:function BG(Bk){this.hasNonifwTarget=this.hasNoninfowindowTarget(Bk[0]);if(this._super){this._super(Bk);}},touchTap:function Aw(Bn){var Bp=this,Bo=this.getLastHighlightPoint(),Bm=Bp.utils.getTouchXYOnWidget(Bn.pageX,Bn.pageY,Bp);var Bl=AO&&Ae({x:Bo.point.x,y:Bo.point.y},{x:Bm.touchX,y:Bm.touchY})<=45*45;if(Bl){Bp.hiddenTooltipAndShowTimeSelector();Bo=this.getLastHighlightPoint();}else{Bo=this.getNearestPoint(Bn.pageX,Bn.pageY);}if(Bj.call(this,Bn)){var Bq=Ae({x:Bo.point.x,y:Bo.point.y},{x:Bm.touchX,y:Bm.touchY})<=45*45,Br=Bp.pointCanBeSelected(Bo.rowIdx,Bo.serieIdx),Bs=Bp.lastSelectedPoint&&(Bo.rowIdx==Bp.lastSelectedPoint.rowIdx&&Bo.serieIdx==Bp.lastSelectedPoint.serieIdx);if(Bq&&Br&&!Bs){if(AO){Bp.hiddenTooltipAndShowTimeSelector();}Bp.lastSelectedPoint=Bo;Bp.incFetchChart(true);var Bk=this.getActionObjList(Bo);Bp.performAction(Bk);}else{if(Bq&&!Br){if(Bl){}else{this.handleTouchBegin(Bn.pageX,Bn.pageY);}}else{if(AO){Bp.hiddenTooltipAndShowTimeSelector();}else{if(Bp.lastSelectedPoint){var Bk=this.getActionObjList(Bo,true);if(Bk){Bp.performAction(Bk);Bp.lastSelectedPoint=null;Bp.incFetchChart(true);}}}}}}},highlightSelectedPoint:function AZ(){var Bp=this,Bn=Bp.animationContext,Bm=Bp.utils,Bl=Bp.lastSelectedPoint,Bk=Bl.point,Bo=AU[this.chartID];Bn.save();if(Bo.isLegendSelected&&Bo.legendSelectedIndex!=Bl.serieIdx){Bn.globalAlpha=0.3;}else{Bn.globalAlpha=1;}var Bq=(Bl.rowIdx-Bp.ACrns)*Bp.RTX;Bn.fillStyle=Bp.getSerieColor(Bl.serieIdx);Bn.lineWidth=1;Bm.drawArc(Bp,Bq,Bk.y,4,0,Math.PI*2,true,true,Bn);if(this.theme==AE){Bn.strokeStyle="#ffffff";Bn.lineWidth=2;Bm.drawArc(Bp,Bq,Bk.y,5,0,Math.PI*2,true,false,Bn);Bn.strokeStyle="#000000";Bn.lineWidth=2;Bm.drawArc(Bp,Bq,Bk.y,7,0,Math.PI*2,true,false,Bn);}else{Bn.strokeStyle="#333333";Bn.lineWidth=2;Bm.drawArc(Bp,Bq,Bk.y,5,0,Math.PI*2,true,false,Bn);Bn.strokeStyle="#ffffff";Bn.lineWidth=2;Bm.drawArc(Bp,Bq,Bk.y,7,0,Math.PI*2,true,false,Bn);}Bn.restore();},destroy:function I(){if(this.currSelection){delete this.currSelection;}if(this._touchListener){mstrmojo.touchManager.detachEventListener(this._touchListener);delete this._touchListener;}if(this._scrollDoneListener){this._scroller.detachEventListener(this._scrollDoneListener);delete this._scrollDoneListener;}if(this._scrollMovedListener){this._scroller.detachEventListener(this._scrollMovedListener);delete this._scrollMovedListener;}if(this._infoWClosedListener){this.xtabModel.docModel.detachEventListener(this._infoWClosedListener);delete this._infoWClosedListener;}if(this.fullScreenListener){mstrmojo.touchManager.detachEventListener(this.fullScreenListener);delete this.fullScreenListener;}if(this.selectorTargets){delete this.selectorTargets;}this._super();if(this._tn){delete this._tn;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.maps.jsmap.AndroidRptMap","mstrmojo.maps.androidmap.AndroidRptMap","mstrmojo.Obj");mstrmojo.maps.AndroidRptMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.maps.AndroidRptMap"});if((typeof (mstrMobileApp)!="undefined")&&(typeof (mstrMobileApp.useNativeMap)!="undefined")&&mstrMobileApp.useNativeMap()){mstrmojo.maps.AndroidRptMap=mstrmojo.maps.androidmap.AndroidRptMap;}else{mstrmojo.maps.AndroidRptMap=mstrmojo.maps.jsmap.AndroidRptMap;}})();(function(){mstrmojo.requiresCls("mstrmojo.maps.jsmap.AndroidDocMap","mstrmojo.maps.androidmap.AndroidDocMap");mstrmojo.maps.AndroidDocMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.maps.AndroidDocMap"});if((typeof (mstrMobileApp)!="undefined")&&(typeof (mstrMobileApp.useNativeMap)!="undefined")&&mstrMobileApp.useNativeMap()){mstrmojo.maps.AndroidDocMap=mstrmojo.maps.androidmap.AndroidDocMap;}else{mstrmojo.maps.AndroidDocMap=mstrmojo.maps.jsmap.AndroidDocMap;}}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.TextBoxDocSelector","mstrmojo.array","mstrmojo.string","mstrmojo.elementHelper","mstrmojo.mstr.EnumDSSXMLObjectTypes");var H=mstrmojo.array,G=mstrmojo.string,J=mstrmojo.elementHelper,N=mstrmojo.DocSelector.DATAPARAMS,U=mstrmojo.mstr.EnumDSSXMLObjectTypes,M=J.ELEM_ALL_ID;var K=0,B=1,C=2;var Q=1,R=3;var O=J.ELEM_ALL;mstrmojo.SearchBoxDocSelector=mstrmojo.declare(mstrmojo.TextBoxDocSelector,null,{scriptClass:"mstrmojo.SearchBoxDocSelector",filterElemALL:false,_buildEvent:function F(W,a){var e=[],X,Z=[],d=this.defn;H.forEach(a.items,function(h){h.n=mstrmojo.string.multiReplace(h.n,{";":"\\;"});e.push(h.v+";"+G.decodeHtmlString(h.n));Z.push(h);});X=e.length;if(!X){e.push(M);}if(e.length>0||!d.nsb||d.nsb===K){W.eid=e.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}else{if(d.nsb===B||!d.showall){W.unset=true;}else{if(d.nsb===C){W.eid=M;Z=[O];}}}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){var g=this.model,Y=this.node,f=g.getCurrentLayoutDef(),b=f&&f.units,V=this.k;if(b[V]){b[V].cesChange=true;}Y.data.elms=Y.data.ces=Z;Y.data[N.CESREADY]=true;g.setDataReady(this.k,this.id,N.CESREADY,true,"ces",Z);g.setDataReady(this.k,this.id,"elms",Z);}if(d.sec){if(d.multi){this.parent.set("count",J.buildElemsCountStrByNum(X,0));}else{this.parent.set("count",J.buildElemsCountStrByNum(0,0));}}},updateWidget:function L(e){var W=this._super(e),X=e.node,d=X.defn,a=X.data,V=a.elms;if(V&&!d.sos){W.candidates=this.setupCandidates(d,V);}if(d.srcid){var Y=[],b,Z=H.filter(a.ces,function(g){return g.v!=="u;";});if(Z&&Z.constructor===Array){if(d.dfm===Q){for(b=0;b<Z.length;b++){if(Z[b].t!==R){Y.push(Z[b]);}}}else{Y=Z.concat();}}if(!d.sos){var f=[];H.forEach(Y,function(g){if(H.find(W.candidates.items,"v",g.v)>-1){f.push(g);}});Y=f;}W.items=Y;}return W;},getCekEvtListener:function S(W,V){return function(X){W.handleActionInSyncPhase(function(){V.set("items",X.value);});};},getWidgetConfig:function D(g,Z,d,V){var f=g.getFormats(),Y=g.node.data,b=this._super(g,Z,d,V),W=100,a=mstrApp.isVI,X=a&&(g.isRecursiveAttributeSelector()||g.node.defn.iase===false),e=this,h=X?{posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular pulldown",contentNodeCssClass:"srch htEnter",content:mstrmojo.desc(15764,"Hit Enter to search")}:{posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular pulldown",contentNodeCssClass:"srch",onclick:function(){var k=e.content,o=k.getSearchPattern(),l=e.id;e.model.changeFilterStyle(e,e.style,e.multi,false);this.set("allowOtherTooltips",false);k.hideTooltip();if(mstrApp.isWaiting()){var j=mstrApp.getWaitBox();var p=j.attachEventListener("visibleChange",j.id,function(q){if(q.value===false){mstrmojo.all[l].content.showInfoTooltip(o);p.clear();}});}},content:'<div class="auto">'+mstrmojo.desc(15910,"Searching...")+'</div><div class="separator"><div class="wait">'+mstrmojo.desc(15911,"Tired of waiting?")+'</div><div class="actn">'+mstrmojo.desc(15912,"Disable Instant Search")+"</div></div>"};b={scriptClass:b.scriptClass,cssText:f.height?"height: "+f.height:"",emptyText:mstrmojo.desc(4325,"Search")+" "+(d.ttl||""),richTooltip:a?h:null,items:d.srcid?(Y.ces?Y.ces.concat():[]):[],REQUEST_THRESHOLD:(mstrApp&&mstrApp.SEARCH_REQUEST_THRESHOLD)||55,suggestCount:(mstrApp&&mstrApp.SEARCH_SUGGESTION_LENGTH)||W,hitEnterToTest:X,stifleIntermediateSearch:true,srcid:d.srcid||"",srct:d.srct||U.Attribute,dsrc:d.dsrc||"",useClientForm:d.srct===U.Consolidation,onitemsChange:function(){if(!g._inSyncPhase){g.showInfoWin();g.selectorControlChange(this);}}};if(V&&!d.sos){b.candidates=this.setupCandidates(d,V);}else{b.useKeyDelay=true;b.noCache=true;}if(!d.multi){b.maxObjectCount=1;}return b;},isSelectAll:function E(){var V=this.children&&this.children[0];return V===undefined?true:(!V.items||V.items.length===0);},isFilterNothing:function I(){return this.isSelectAll();},setupCandidates:function A(W,X){var V=W.srcid?X:[];if(this.filterElemALL){V=H.filter(V,function(Y){return Y.v!=="u;";});}return{isComplete:true,items:V};},isValidSelection:function P(){var W=this.node.data,V=this.model;if(V.isSelWarnFlagOn(this.k)&&W.ces&&W.ces.length===0){return W.elms.length!==0;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.MetricQualDocSelector");mstrmojo.MetricSliderDocSelector=mstrmojo.declare(mstrmojo.MetricQualDocSelector,null,{scriptClass:"mstrmojo.MetricSliderDocSelector",_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},newAndInitWidget:function B(E){var F=this._super(E);E.attachEventListener("includeChange",F.id,function(G){this.set("include",G.value);});return F;},getWidgetConfig:function D(I,G,F,H){var E=this._super(I,G,F,H);I.extCls="extSlider";E.isHoriz=true;E.include=F.include;return E;},isSelectAll:function C(){var E=this.children&&this.children[0];return E===undefined?true:E.unSet;},isFilterNothing:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayout","mstrmojo.DocLayoutHoriz","mstrmojo.DocSectionHoriz","mstrmojo.DocSection","mstrmojo.DocSubsection","mstrmojo.DocPanelStack","mstrmojo.DocPanel","mstrmojo.DocTextfield","mstrmojo._CanSupportTransaction","mstrmojo._IsEditableTextfield","mstrmojo._HasDocLink","mstrmojo.DocImage","mstrmojo.DocLine","mstrmojo.DocRectangle","mstrmojo.DocRoundRectangle","mstrmojo.EnumRWUnitType","mstrmojo.DynamicClassFactory","mstrmojo.Button","mstrmojo.ToolBar","mstrmojo.DocSelector","mstrmojo.FilterPanelMenu","mstrmojo.DocPortlet","mstrmojo.DocResizablePortlet","mstrmojo.DocXtabGraph","mstrmojo.DocGridGraph","mstrmojo.DocVisualization","mstrmojo.DocXtabModel","mstrmojo.hash","mstrmojo.dom");var H=mstrmojo.hash,E=mstrmojo.dom,A=mstrmojo.EnumRWUnitType,N=mstrmojo.DynamicClassFactory.newComponent,R=mstrmojo.elementHelper,S=mstrmojo.Button.newIconButton,L={};function K(X){return function(){return this.parent.parent["on"+X]();};}var M=K("maximize"),U=K("restore"),G=K("minimize");function W(Y,b,Z,X,a){return S(Y,b,Z,null,{ds:X,visible:(a!==X)});}function I(X,b,a){var Z=this.classMap[b].n+(a?"Hover":""),Y=L[Z];if(!Y){Y=L[Z]=N(X,[mstrmojo._HasDocLink].concat(this.getLinkDrillMixins(a)));}return Y;}function Q(f,a,Z){var b=H.walk(Z.scriptClass,window),d=a&&a.defn,Y=a&&a.data,j=(d&&d.t),h=(j===A.TEXTFIELD&&((d&&d.dpst)));if(j===A.TEXTFIELD||j===A.IMAGE){var g=Y.dl,e=d.dl,X=(g&&g.items&&g.items.length)||(e&&e.items&&e.items.length>0);if(X||Y.url||d.url||d.ifw){b=I.call(this,b,j+(h?"B":""),X);}else{if((j===A.TEXTFIELD)&&d.txi){b=N(b,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableTextfield]);}else{if(j===A.TEXTFIELD&&a.defn.iifs){b=mstrmojo.DocSummaryTextfield;}}}}return this.newRWUnitInstance(f,a,b);}mstrmojo.rw._IsReportServicesDocBuilder=mstrmojo.provide("mstrmojo.rw._IsReportServicesDocBuilder",{_mixinName:"mstrmojo.rw._IsReportServicesDocBuilder",createClassMap:function B(){var X=this._super();X[A.LAYOUT]={n:"Layout"};X[A.SUBSECTION]={scriptClass:"mstrmojo.DocSubsection"};X[A.PANELSTACK]={n:"PanelStack",scriptClass:"mstrmojo.DocPanelStack"};X[A.PANEL]={n:"Panel",scriptClass:"mstrmojo.DocPanel"};X[A.TEXTFIELD]={n:"Textfield",scriptClass:"mstrmojo.DocTextfield"};X[A.IMAGE]={n:"Image",scriptClass:"mstrmojo.DocImage"};X[A.LINE]={n:"Line",scriptClass:"mstrmojo.DocLine"};X[A.RECTANGLE]={n:"Rectangle",scriptClass:"mstrmojo.DocRectangle"};X[A.ROUNDEDRECTANGLE]={n:"RoundedRectangle"};X[A.GRAPH]={n:"XtabGraph",scriptClass:"mstrmojo.DocXtabGraph"};X[A.GRIDGRAPH]={n:"GridGraph",scriptClass:"mstrmojo.DocGridGraph"};X[A.VISUALIZATION]={n:"Visualization",scriptClass:"mstrmojo.DocVisualization"};return X;},getLayoutViewerClass:function D(X){this.throwAbstractMethodError("getLayoutViewerClass");},newLayout:function V(d,a){var Z=[],Y=a.data,b=a.defn,X=this.getLayoutViewerClass(a),g=new X({n:b.title,model:d,node:a,controller:this.parent.controller,tbc:b.tbc,slot:"containerNode",visible:false,ifs:Y.ifs,gb:Y.gbys});var e=g.defn=H.copy(b);e.fmts=H.copy(b.fmts);function h(o,p){var j=o.length;if(j){for(var k=0;k<j;k++){var l=this.build([o[k]],d)[0];l.slot=p;Z.push(l);}}}h.call(this,d.getFixedHeaders(a),"fixedHeaderNode");var f=b.horiz?mstrmojo.DocLayoutHoriz:mstrmojo.DocLayout;Z.push(new f({slot:"layout",id:a.id,k:a.k,minHeight:Y.mh,formatResolver:d.formatResolver,rules:b.rules,builder:this,node:a,defn:b,model:d}));h.call(this,d.getFixedFooters(a),"fixedFooterNode");g.addChildren(Z);return g;},newSection:function O(X,Y){return this.newRWUnitInstance(X,Y,(Y.defn.horiz&&Y.data.subsections.length>1)?mstrmojo.DocSectionHoriz:mstrmojo.DocSection);},newPanelStack:function F(Y,Z,X){return this.newRWUnitInstance(Y,Z,X.cls||H.walk(X.scriptClass,window));},newTextfield:Q,newImage:Q,newButton:Q,newRoundedRectangle:function J(X,Y){return this.newRWUnitInstance(X,Y,E.supports(E.cssFeatures.ROUND_CORNERS)?mstrmojo.DocRectangle:mstrmojo.DocRoundRectangle);},getPortletExportGridToolbar:mstrmojo.emptyFn,createPortlet:function C(AK,u,AH){var AP=u.defn,b=AP.ds,AG=(AP.iifp||!(AK===A.PANELSTACK||(AP.ttl===undefined&&AP.qsm)||AK===A.SELECTOR)),f=(AK===A.GRAPH||AK===A.GRIDGRAPH),o=[],AL="",z="",q="",Y=(AK===A.GRID||f||AK===A.VISUALIZATION||AK===A.MOJOVISUALIZATION)&&parseInt(AP.eo,10)!==2,X=[],AI="mstrmojo-oivmSprite ",AB=false,a;if(AP.qsm){AL="qks";var d=function(AS,t,w){return S(AS,AI+t,function(){return this.parent.parent.content.quickSwitch();},{visible:"this.parent.parent.defn.qsm !== this.qsm"},{qsm:w});};o.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",cssClass:(!AG)?"grouped":"",children:[d(mstrmojo.desc(3547,"View: Grid"),"tbGrid",1),d(mstrmojo.desc(3548,"View: Graph"),"tbGraph",2)]});}if(Y){a=this.getPortletExportGridToolbar(AH);if(a){z=a.css;X=a.node;o.push(X);}}if(AG){if(AP.iifp){AL="wrap";o.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",children:[W(mstrmojo.desc(8973,"Collapse"),"co",null,1,b),W(mstrmojo.desc(8972,"Expand"),"ex",null,0,b)]});}else{var AD=[W(mstrmojo.desc(4539,"Minimize"),"mn",G,1,b),W(mstrmojo.desc(4540,"Restore"),"rs",U,0,b),W(mstrmojo.desc(4541,"Maximize"),"mx",M,2,b)];if(Y&&a){X.children=(X.children||[]).concat(AD);}else{z="resize";o.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:AD});}}}AH.slot="contentNode";AH.alias="content";AH.title=AP.ttl||"";if(AP.sec){var AM=u.data.elms,l=u.data.ces,AA=u.data.unset,AO=(l&&l.length)||0,AQ=(AM&&AM.length)||0,AN;if(AP.sos){AH.contentClass="fpsb";for(AN=AO-1;AN>=0;AN--){if(l[AN]._did_){AO--;}}AH.count=R.buildElemsCountStrByNum(AO,AQ);}if(l&&AM&&AM.length&&AP.style!==mstrmojo.DocSelector.STYLES.SCROLLER){if(AP.multi){if(AA){AH.count=R.buildElemsCountStr(AM,AM);}else{AH.count=R.buildElemsCountStr(l,AM,!AP.include);}}else{AH.count=R.buildElemsCountStr(AM,AM);}}}o.push(AH);if(AK===A.PANELSTACK){var h=function(AT,w,AS,t){return S(AT,AI+w,function(){return this.parent.parent.content.switchToPanel(t);},{enabled:"this.parent.parent."+AS});},k=[],Z=[],s=!!u.sw,j=!!AP.ifw,e=!!AP.ifp;if(s){Z.push(h(mstrmojo.desc(1058,"Previous"),"tbPrev","prevEnabled",-1));k.push(h(mstrmojo.desc(2917,"Next"),"tbNext","nextEnabled",1));}if(j){k.push(S(mstrmojo.desc(2102,"Close"),AI+"mstrmojo-DocInfoWindow-close",function(){this.parent.parent.parent.close();}));}if(e){q="ifp";var AE=mstrmojo.desc(2164,"Apply");o.push({scriptClass:"mstrmojo.HBox",slot:"buttonbarNode",alias:"buttonbar",cssClass:"buttonBox",children:[{scriptClass:"mstrmojo.Button",alias:"resetBtn",title:mstrmojo.desc(8329,"Unset"),text:mstrmojo.desc(8329,"Unset"),cssClass:"mstrmojo-FilterPanel-Btn apply",bindings:{visible:function(){return !AP.cas;},enabled:function(){return this.parent.parent.clearEnabled;}},onclick:function AF(){if(AH&&AH.clearBuffSlices){AH.clearBuffSlices();AH.clearAllFilter();AH.applyBufferedSlices();}}},{scriptClass:"mstrmojo.Button",alias:"applyNow",title:AE,text:AE,cssClass:"mstrmojo-FilterPanel-Btn apply",bindings:{visible:function(){return !AP.cas;},enabled:function(){return this.parent.parent.applyEnabled;}},onclick:function AF(){if(AH&&AH.applyBufferedSlices){AH.applyBufferedSlices();}}}]});k.push({scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-oivmSprite tbDown",alias:"btnMenu",onclick:function AF(){this.openPopupMenu();},openPopupMenu:function(){var t=mstrmojo.findAncestor(this,"openPopupMenu");if(t){t.openPopupMenu("mstrmojo.FilterPanelMenu",{openerButton:this,fps:AH,cmPos:this.cmPos,lockIW:AH});}}});AB=true;}if(j||e){var AR=[];if(s){AR[0]="pst-l";}if(e){AR.push("ifp");}Z.push({scriptClass:"mstrmojo.Box",cssClass:AR.join(" ")});}if(j||s||e){var x=j?"ifw ":"",AJ=e?"ifp ":"",g=!AP.cas?"cas ":"";z=(s?"pst-r ":"")+x+AJ+g;AL=(s?"pst-l ":"")+x+AJ+g;o.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",children:Z});o.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:k});}}if(AK===A.SELECTOR&&AH.spm){z="spm";o.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-oivmSprite tbDown",alias:"btnMenu",onclick:function AF(t){t.cancel();this.openPopupMenu();},openPopupMenu:function(){var t=mstrmojo.findAncestor(this,"openPopupMenu");if(t){t.openPopupMenu("mstrmojo.SelectorMenu",{openerButton:this,selector:AH,cmPos:this.cmPos});}}}]});AB=true;}var AC=AG?mstrmojo.DocResizablePortlet:mstrmojo.DocPortlet,p={k:AH.k,defn:AH.defn,model:AH.model,children:o,title:AH.title,count:AH.count,floatingTitle:(AP.ttl===undefined&&AP.qsm),leftToolbarNodeClass:AL,loadDataOnResize:f,toolbarNodeClass:z,buttonbarNodeClass:q,attachContextMenuEvent:AB};if(AK===A.PANELSTACK){p.bindings={title:"this.children[0].title"};if(u.sw){p.bindings.prevEnabled=function(){return this.children[0].hasPreviousPanel;};p.bindings.nextEnabled=function(){return this.children[0].hasNextPanel;};}if(AP.ifp){p.bindings.applyEnabled=function(){return this.children[0].applyEnabled;};p.bindings.clearEnabled=function(){return this.children[0].clearEnabled;};}}if(AP.iifp){p.onclicktitle=function(){if(AH.defn.ds===1){AH.parent.onexpand();}else{AH.parent.oncollapse();}};}return new AC(p);},newXtabModel:function P(X){return new mstrmojo.DocXtabModel(X);}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocModel","mstrmojo.func","mstrmojo.hash");var B=mstrmojo.func.wrapMethods,C=mstrmojo.hash;function G(M){var L=this;return B({success:function(N){mstrmojo.hash.copy(N,L);}},M);}function I(L,M){var N=this.getDataService();N[L].apply(N,M);}function D(){var L=this;return function(M){L.setPrompts(L.getDataService().getPrompts());};}mstrmojo.ResultSetDocumentModel=mstrmojo.declare(mstrmojo.DocModel,null,{scriptClass:"mstrmojo.ResultSetDocumentModel",setPrompts:function E(L){this.prompts=L;if(L){L.host=this;}},execute:function J(P,Q,N){var M=this,O=C.copy(P,{dssId:P.did}),L;O.objType=P.objType||P.t;if(P.forceExec){O.freshExec=true;O.doNotUpdateCaches=true;}L=B({success:function(R){C.copy(R,M);M.setPrompts(M.getDataService().getPrompts());},prompts:D.call(M)},Q);I.call(this,"execute",[O,M.newCallback(C.copy({method:"execute"},L)),N]);},open:function F(M,N){var L=this;if(M.data){C.copy(M.data,L);}if(N.success){N.success(L);}if(N.complete){N.complete(L);}},answerPrompts:function H(L){I.call(this,"answerPrompts",[this.prompts,G.call(this,L)]);},linkToObject:function A(O,P){var M=this,L=B({prompts:D.call(this)},P),N=L.success;L.success=function(Q){C.copy(Q,M);M.setPrompts(M.getDataService().getPrompts());M.gbElements=O.groupByElements;N(Q);delete M.gbElements;};I.call(this,"linkToObject",[O,L]);},getPageByTree:function K(L){this.getDataService().getPageByTree(L);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.FolderDataService","mstrmojo.XtabDataService","mstrmojo.DocDataServiceXt","mstrmojo.GraphDataService","mstrmojo.RptXtabModel","mstrmojo.ResultSetDocumentModel","mstrmojo.GraphModel","mstrmojo.prompt.WebPrompts","mstrmojo.maps.AndroidMapModel","mstrmojo.mstr.ElementDataService","mstrmojo.SubscriptionsDataService");mstrmojo.android.factories.ModelFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.factories.ModelFactory",newFolderDataService:function A(N){return new mstrmojo.FolderDataService(N);},newXtabDataService:function H(N){return new mstrmojo.XtabDataService(N);},newGraphDataService:function G(N){return new mstrmojo.GraphDataService(N);},newDocumentDataService:function D(N){return new mstrmojo.DocDataServiceXt(N);},newElementDataService:function B(){return mstrmojo.mstr.ElementDataService;},newSubscriptionsDataService:function J(){return new mstrmojo.SubscriptionsDataService();},newXtabModel:function L(N){return new mstrmojo.RptXtabModel(N);},newDocumentModel:function C(N){return new mstrmojo.ResultSetDocumentModel(N);},newGraphModel:function K(N){return new mstrmojo.GraphModel(mstrmojo.hash.copy(N,{dataService:this.newGraphDataService()}));},newPromptsModel:function M(N,O){var P=new mstrmojo.prompt.WebPrompts({rsl:N});if(O){P.populateAnswers(O);}return P;},newMapModel:function F(N){return new mstrmojo.maps.AndroidMapModel(N);},newDataService:function E(N,O){return this["new"+N+"DataService"](O);},newModel:function I(N,O){return this["new"+N+"Model"](O);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.DynamicClassFactory","mstrmojo.ListDocSelector","mstrmojo.TextBoxDocSelector","mstrmojo.SearchBoxDocSelector","mstrmojo.MetricQualDocSelector","mstrmojo.MetricSliderDocSelector","mstrmojo.AttrQualDocSelector","mstrmojo.VisDocSelector","mstrmojo.DynamicListDocSelector","mstrmojo._DocActionSelector","mstrmojo._IsThresholdConditionTarget");var B=4,G=12,E=47,I=12033,C=3076;var D={"default":"ListDocSelector",dynamic:"DynamicListDocSelector",7:"MetricSliderDocSelector",8:"MetricQualDocSelector",9:"SearchBoxDocSelector",10:"TextBoxDocSelector",11:"AttrQualDocSelector",12:"VisDocSelector"};function H(J){return J.srct===G&&J.srcst===C||J.srct===E&&J.srcst===I&&J.ndetype===2;}mstrmojo.DocSelectorViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.DocSelectorViewFactory",getDocSelectorClass:function F(L,O,K,P){var N=O.defn,M=N.style,J=D[M]||D["default"];if(H(N)&&M===B&&N.iifp){J=D.dynamic;}if(O.defn.ct==="4"){return(mstrmojo.DynamicClassFactory.newComponent(mstrmojo[J],[mstrmojo._DocActionSelector,mstrmojo._IsThresholdConditionTarget],{scriptClass:"mstrmojo.DocActionXSelector"}));}return mstrmojo[J];},newDocSelector:function A(K,M,J,O){var N=this.getDocSelectorClass(K,M,J,O),L={id:M.id,node:M,model:K};return new N(L);}});mstrmojo.DocSelectorViewFactory.CLASS_MAP=D;}());(function(){mstrmojo.requiresCls("mstrmojo.VisTimeSeries");mstrmojo.AndroidVisTimeSeries=mstrmojo.declare(mstrmojo.VisTimeSeries,null,{scriptClass:"mstrmojo.AndroidVisTimeSeries"});}());(function(){mstrmojo.requiresCls("mstrmojo.VisTimeSeries");mstrmojo.DocVisTimeSeries=mstrmojo.declare(mstrmojo.VisTimeSeries,null,{scriptClass:"mstrmojo.DocVisTimeSeries"});}());(function(){mstrmojo.requiresCls("mstrmojo.AndroidVis","mstrmojo.VisMicroChartTable","mstrmojo.dom","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.VisTextTooltip","mstrmojo.VisMicroChartTooltip","mstrmojo.hash","mstrmojo.color","mstrmojo.css","mstrmojo.array");var AJ=mstrmojo.color,BY=mstrmojo.css,Ai=mstrmojo.hash,BT=Ai.forEach,B5=Math,CB=mstrmojo.dom,Av=mstrmojo.array;var Bw=1;var Bo=5;var Ag=30;var Bc=0;var CA=1;var CO=2;var z=0,D=1,CK=2,BZ=3,BC=4,CS=5;var AI={NORMAL:0,ASCENDING:1,DESCENDING:2};var AR="border:none;background:transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:0px;padding-bottom:0px;";var K="border:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:0px;padding-bottom:0px;";var k=2;var AZ=3;var w=0,t=1;var BN=1,AE=2;var BJ=1,e=2,CF=4;var p=0;var BR=0;var C=[];var An={};var Ba={};var AQ=[];var CT=[];var P="leftRow";var BX="rightRow";var CR=1;var CG=0;var AP={left:"microchart-table-text-L",center:"microchart-table-text-M",right:"microchart-table-text-R"};function BU(){var CV=this.domNode.parentNode,CZ;while(CV){var CW=mstrmojo.css.getComputedStyle(CV);CZ=CW.backgroundColor;if(CZ){if(CZ.indexOf("rgba")>=0){var CY=this.utils.rgbaStr2rgba(CZ);if(CY&&CY[4]){return CY;}}else{if(CZ.indexOf("rgb")>=0){var CX=AJ.rgbStr2rgb(CZ);return CX;}}}CV=CV.parentNode;}CZ=this.model["background-color"];if(CZ){return AJ.hex2rgb(CZ);}return[255,255,255];}var A9=1;var G=2;var BM=3;var Ab=4;function AH(){var CY=this.model.vp.ct;if(!CY||CY===""){var CX=Object.keys(this.model.vp).length===0;if(CX){CY="2";}else{CY="0";}}this.theme=parseInt(CY,10);if(this.theme===0){var CW=AJ.hex2rgb(this.utils.getAncestorBgColor(this)||"#fff");var CV=this.otherProps.mfBkgOpacity;CW=this.utils.getRGBWithOpacity(CW,CV);this.backgroundColor=this.utils.rgb2rgbStr(CW);var CZ=(CW[0]*299+CW[1]*587+CW[2]*114)/1000;if(CZ>150){this.theme=Ab;}else{this.theme=BM;}}else{if(this.theme===1){this.backgroundColor="#333333";}else{if(this.theme===2){this.backgroundColor="#f9f9f9";}}}this.domNode.style.backgroundColor=this.backgroundColor;}var Ae=[5,8,10];var J=[100,150,200];var Bf=[120,150,180];var Ap=[100,150,200];var Aj=[20,40,80];function AF(){Bw=this.utils.getScreenZoomFactor();var CV=this.otherProps;CV.mRowHeight=Math.round(Bw*CV.mRowHeight);Ag=Math.round(Bw*36);this.dropShadowWidth=Math.round(Bw*5);Ae=[Math.round(5*Bw),Math.round(8*Bw),Math.round(10*Bw)];J=[Math.round(100*Bw),Math.round(150*Bw),Math.round(200*Bw)];Bf=[Math.round(120*Bw),Math.round(150*Bw),Math.round(180*Bw)];Ap=[Math.round(100*Bw),Math.round(150*Bw),Math.round(200*Bw)];Aj=[Math.round(20*Bw),Math.round(40*Bw),Math.round(80*Bw)];}function Bi(CY){if(this.enableSmoothScroll){var CW=this.utils.getTouchXYOnWidget(CY.pageX,CY.pageY,this);var CV=CW.touchX,CX=CW.touchY;if(CV<this.leftWidth){return false;}return true;}else{return true;}}function BW(CY,CZ){var Cd=CY.style.height;var CV=CY.style.width;var Ce=CY.style.textDecoration;var Cb=CY.style.display;var Cf=CY.style.fontSize;var Cc=CY.style.fontWeight;var CX=CY.style.paddingLeft;var CW=CY.style.paddingRight;var Ca=CY.style.boxShadow;CY.style.cssText=CZ;CY.style.height=Cd;CY.style.width=CV;CY.style.textDecoration=Ce;if(Cb){CY.style.display=Cb;}if(Cf){CY.style.fontSize=Cf;}if(Cc){CY.style.fontWeight=Cc;}if(CX){CY.style.paddingLeft=CX;}if(CW){CY.style.paddingRight=CW;}if(Ca){CY.style.boxShadow=Ca;}}function CH(CV){AQ=[];Ba={};An={};C=[];CT=[];CR=1;CG=0;p=0;BR=0;}function Ah(){var CW=this.sparklineProps={};CW.mbShow=true;CW.mbAllPoints=false;CW.mbEndPoints=true;CW.mbRefLine=true;CW.mbRefArea=true;CW.mbAssMetric=true;CW.mbShowTooltip=true;CW.mwSeriesLineCol="#333333";CW.mwRefLineCol="#0066FF";CW.mwRefAreaCol="#DEDEDE";CW.mstrHeader="["+(window.getLocaleString?window.getLocaleString("MICROCHARTS_SPARKLINE","Sparkline"):"Sparkline")+"]";CW.mstrAssMetric="";var CX=this.barProps={};CX.mbShow=false;CX.mbShowLegend=true;CX.mbRefLine=true;CX.mbShowTooltip=true;CX.mwPosCol="#66CC00";CX.mwNegCol="#FF0000";CX.mwRefLineCol="#0066FF";CX.mstrHeader="["+(window.getLocaleString?window.getLocaleString("MICROCHARTS_BAR","Bar"):"Bar")+"]";var CY=this.bulletProps={};CY.mbShow=true;CY.mbRefLine=true;CY.mbRefBands=true;CY.mbShowLegend=true;CY.mbAssMetric=true;CY.mbInvertAxis=false;CY.mbShowTooltip=true;CY.mfMinValue=0;CY.mwPosCol="#000066";CY.mwNegCol="#FF0000";CY.mwRefLineCol="#0066FF";CY.mwBand1="#999999";CY.mwBand2="#BBBBBB";CY.mwBand3="#DEDEDE";CY.mstrHeader="["+(window.getLocaleString?window.getLocaleString("MICROCHARTS_BULLET","Bullet"):"Bullet")+"]";CY.mstrAssMetric="";CY.mstrBand1=window.getLocaleString?window.getLocaleString("MICROCHARTS_LOW","Low"):"Low";CY.mstrBand2=window.getLocaleString?window.getLocaleString("MICROCHARTS_MEDIUM","Medium"):"Medium";CY.mstrBand3=window.getLocaleString?window.getLocaleString("MICROCHARTS_HIGH","High"):"High";var CV=this.otherProps={};CV.mfBkgOpacity=1;CV.mnMetricsPerKPI=1;CV.mbHideColHeaders=false;CV.mbHideTextColumns=false;CV.mbLockLayout=false;CV.mbShowForHiddenGraphs=true;CV.mbInheritFromGridGraph=false;CV.mbInSingleColumnMode=false;CV.mpColumnIDs=[];CV.mpColumnIDsInTreeMode=[];CV.mpColumnPositions=null;CV.mpColumnWidths=null;CV.mpSortKey=null;CV.mbSortDescend=true;CV.mRowHeight=36;}function H(CZ){if(!CZ){return false;}var CW=this;var CY=mstrmojo.dom.position(this.domNode);var CV=CZ.pageX-CY.x,CX=CZ.pageY-CY.y;if((CV>0&&CV<CW.getWidth())&&(CX>0&&CX<CW.getHeight())){return true;}return false;}function Bn(CY){var CW=parseInt(CY).toString(16);var CV=CW.length;for(var CX=CV;CX<6;CX++){CW="0"+CW;}CW="#"+CW;return CW;}function Aa(){this.rows=[];for(var CV=0;CV<CT.length;CV++){this.rows[CV]={model:CT[CV],rowIdx:CV,selected:{},rowRef:{}};}}function o(CY){var CV={isSubTtl:false,hasSubTtlAttr:false,firstSubTtlIdx:-1};for(var CX=0;CX<CY.length;CX++){if(CY[CX].etk!=undefined&&CY[CX].etk<0){CV.firstSubTtlIdx=CX;CV.hasSubTtlAttr=true;for(var CW=CX+1;CW<CY.length-1;CW++){if(CY[CW].etk!=undefined&&CY[CW].etk<0){}else{break;}}CV.isSubTtl=CW==CY.length-1?true:false;break;}}return CV;}function BA(CY){var CW=CY.attrIDArray;var CV=CY.model,CX=CV.gts,Ca=CX.row;var Cb=Ca[0].id;CW[0]=Cb;for(var CZ=1;CZ<Ca.length;CZ++){if(Cb==Ca[CZ].id||Cb==Ca[CZ].id+":CG"){}else{Cb=Ca[CZ].id;CW[CZ]=Cb;}}}function F(CW,Ca){var CX=Ca.split("_");var CZ=CW;for(var CY=0;CY<CX.length;CY++){var CV=CX[CY];CZ=CZ.childrenTreeNodeList[CV];}return CZ;}function V(CW,Cb){var CX=Cb.split("_");var Ca=CX[CX.length-1];if(Ca>0){CX[CX.length-1]=Ca-1;var CZ=CW;for(var CY=0;CY<CX.length;CY++){var CV=CX[CY];CZ=CZ.childrenTreeNodeList[CV];}return CZ;}else{return null;}return null;}function A7(CW,Ca,Cb){var CX=Ca.split("_");var CZ=CW;for(var CY=0;CY<=Cb;CY++){var CV=CX[CY];CZ=CZ.childrenTreeNodeList[CV];}return CZ;}function Ay(CV){if(CV===true||CV==="true"){return true;}return false;}function Br(CV,CY){if(!CV){return ;}if(CV.level<=CY){CV.needExpand=true;}else{CV.needExpand=false;}var CX=CV.childrenTreeNodeList;for(var CW=0;CW<CX.length;CW++){Br(CX[CW],CY);}}function U(){this.tree={};this.tree.childrenTreeNodeList=[];this.tree.needExpand=true;this.tree.treePath="";this.tree.level=-1;this.attrIDArray=[];this.currSelectedObj=[];this.lastSelectedObj=[];this.initDockedHeadersDone=false;}function B9(CY,CW){var CX=CY.length;if(CW.length!=CX){return false;}for(var CV=0;CV<CX-1;CV++){if(CY[CV]!=CW[CV].idx){return false;}}return true;}function Ao(Cx){var C8=this.tree.childrenTreeNodeList,CV=this.model,Cs=CV.ghs.rhs,CY=CV.gts.row,Ch=CV.gvs,Cy=CV.vp.exps&&CV.vp.exps.tree,C7,Cl,Ca,Ct,Cm;var Cf=Cy&&Ay(Cy.allExpanded);var C3=this.mcStatus;var Cp=-1;var CX=C3?C3.expandedEntryArray:Cy&&Cy.expandedEntry;this.attrIDArray=[];var Ci=this.attrMapIdx;BA(this);var CW=Cs.items&&Cs.items[0]&&Cs.items[0].items&&Cs.items[0].items.length;var Cb=Ci.length-1;this.maxTreeLevel=Cb-2;Cp=C3?C3.expandToLevel:Cf?this.maxTreeLevel-1:-1;var C1=[],Cu=[];for(var C6=0;C6<CW;C6++){C1.push(-1);}var Cw=-1;var Cj=Cs.items.length;if(this.mcStatus&&this.mcStatus.currSelectedObj){this.currSelectedObj=this.mcStatus.currSelectedObj;}for(var C6=0;C6<Cj;C6++){var Cc=Cs.items[C6].items;var Co=B9(Cu,Cc);if(!Co){Cw++;}else{continue;}var CZ=o(Cc),Cv=CZ.isSubTtl,Cr=CZ.hasSubTtlAttr;ignoreRow=Cr&&!Cv;if(!ignoreRow){Ca=Cv?CZ.firstSubTtlIdx:Cb;for(var C5=0;C5<Cb-1;C5++){var Cz=Ci[C5];var Cg=this.currSelectedObj[C5];if(C1[Cz]!=Cc[Cz].idx&&Ca>Cz){Ca=Cz;}if(Cz>=Ca){C7=C8;Ct=null;Cl="";for(var C4=1;C4<=C5;C4++){Cm=C7.length-1;if(C4==C5){Ct=C7[Cm];}C7=C7[Cm].childrenTreeNodeList;Cl+=Cm;Cl+="_";}if(Cv&&Ct){Ct.model=CT[Cw];break;}else{var Cn={};Cn.es=[];Cn.es.push(CY[C5].es[Cc[Cz].idx]);var C2=CY[C5].es[Cc[Cz].idx];Cn.id=C2.id;Cn.n=C2.n;Cn.model=CT[Cw];Cn.selected=false;Cn.childrenTreeNodeList=[];Cn.attrElemIdx=Cc[Cz].idx;Cn.isLeaf=(C5==this.maxTreeLevel);Cn.level=C5;var Cq=C7.length;Cn.preSiblingCount=Cq;Cn.preSibling=Cq>0?C7[Cq-1]:null;Cl+=C7.length;Cn.treePath=Cl;C7.push(Cn);Cn.needExpand=C5<=Cp?true:false;if(Cg==Cn.id){this.currSelectedObj[C5]=Cn;}}}}for(var C5=0;C5<CW;C5++){C1[C5]=Cc[C5].idx;}}for(var C5=0;C5<CW;C5++){Cu[C5]=Cc[C5].idx;}}if(Cp<0&&CX){for(var C6=0;C6<CX.length;C6++){var Ck=CX[C6];var Cd=this.tree;for(var C5=0;C5<Ck.length;C5++){var DA=Ck[C5].element;var C9=mstrmojo.array.find(Cd.childrenTreeNodeList,"id",DA);if(C9<0){break;}Cd=Cd.childrenTreeNodeList[C9];}Cd.needExpand=true;}}var Ce=[];Ce.push(this.tree);var Cd=null;while(Ce.length>0){Cd=Ce.pop();var C8=Cd.childrenTreeNodeList;var C0=C8.length;for(var C6=C0-1;C6>=0;C6--){Cd=C8[C6];Ce.push(Cd);Cd.postSiblingCount=C0-Cd.preSiblingCount;Cd.isLeaf=Cd.childrenTreeNodeList.length==0;}}}function BO(CZ,CY){var Ca=CZ.length;var CV=0;for(var CW=0;CW<Ca;CW++){if(CZ[CW].type==BC){CY-=Ag;}else{CV+=CZ[CW].colWidth;}}var CX=CY/CV;for(var CW=0;CW<Ca;CW++){if(CZ[CW].type==BC){CZ[CW].colWidth=Ag;}else{CZ[CW].colWidth=Math.round(CZ[CW].colWidth*CX);}}return CX;}function Ak(Cf,CV,Ci){var Cc=Cf[CV],Cm=Cc.model,Ch=Cm.elms,Cn=Cc.treeNode,CY=this.colInfos,CV=Cc.rowIdx,Ck=CY.length,Cg=CY[Ci],Ci=Cg.colIdx;if(Cg.type==z||Cg.type==D){if(this.isTreeMode){var Cp="";for(var Co=0;Co<Cn.es.length;Co++){Cp+=Cn.es[Co].n;}if(Cp.indexOf("&lt;")>=0){Cp=Cp.replace(/&lt;/g,"<");Cp=Cp.replace(/&gt;/g,">");}return this.getTextWidth(Cp,Cg.valueCssClass,null,null,null,Cn.level==0?true:false);}else{attr=Ch[Cg.order];var Cp=attr?attr.n:"";if(Cp.indexOf("&lt;")>=0){Cp=Cp.replace(/&lt;/g,"<");Cp=Cp.replace(/&gt;/g,">");}return this.getTextWidth(Cp,Cg.valueCssClass,null,null,null,false);}}if(Cg.type==CK){var Cq=-1;var Cj=-1;if(this.isKPI){Cj=parseInt(Cg.order)%this.otherProps.mnMetricsPerKPI;var Cq=Cc.model.metricIdx+Cj;}else{if(Cg.type==CK){Cq=parseInt(Cg.order);Cj=Cq;}}var Cd="";var Ce="";if(Cm.refv[Cj].ti===undefined){if(Cm.refv[Cj].ts===4){Cd="<img src='"+Cm.refv[Cj].v+"'/>";}else{Cd=Cm.refv[Cj].v;}}else{try{var CX=this.model;var Cb=CX.th[""+Cq];var Ca=Cm.refv[Cj].ti;if(Cm.refv[Cj].ty===4){var Cl;if(Cb[Ca]&&Cb[Ca].n){Cl=Cb[Ca].n;}else{Cl=Cm.refv[Cj].v;}if(Cl.indexOf(":")>=0){}else{var Cr;try{Cr=mstrApp.getConfiguration().getHostUrlByProject(mstrApp.getCurrentProjectId());}catch(CZ){Cr="";}Cl=Cr+Cl;}Cd="<img src='"+Cl+"'/>";}else{if(Cb[Ca]&&Cb[Ca].n&&Cb[Ca].cni!==undefined){Cd=Cb[Ca].n;}else{Cd=Cm.refv[Cj].v;}}Ce=CX.css[Cb[Ca].cni].n;}catch(CZ){if(!Cd){Cd=Cm.refv[Cj].v;}}}var CW="";if(Ce){CW=Cg.valueCssClass+" "+Ce;}else{if(this.valueCssClass){CW=Cg.valueCssClass+" "+this.valueCssClass;}else{CW=Cg.valueCssClass;}}return this.getTextWidth(Cd,CW,null,null,null,this.isTreeMode&&Cn.level==0?true:false);}return 0;}function AO(){var CY=this.colInfos,Co=this.getWidth();if(this.enableSmoothScroll){var Cf=this.isTreeMode?E.call(this,true,50):this.rows;var Ch=Math.min(Cf.length,50);var Cj=this.metricColumnsSpacing;var Cw=Ae[Cj];for(var Ct=0;Ct<this.colInfos.length;Ct++){var Cg=this.colInfos[Ct];if(Cg.type==z||Cg.type==D||Cg.type==CK){var CZ=0;for(var Cv=0;Cv<Ch;Cv++){var Cp=Ak.call(this,Cf,Cv,Ct);if(Cp>CZ){CZ=Cp;}}var CX=Cg.title;var Cn=Math.round(CX.length/2);var Cx=CX.slice(0,Cn);var Ce=CX.slice(Cn);var Cu=this.getTextWidth(Cx,Cg.headerCssClass,null,null,null,true,false);var Cb=this.getTextWidth(Ce,Cg.headerCssClass,null,null,null,true,false);var Cd=Math.max(Cu,Cb);var CW=0;if(CZ>Cd){CW=Math.min(CZ,Ap[Cj]);}else{CW=Math.min(CZ+Aj[Cj],Cd,Ap[Cj]);}Cg.colWidth=Math.round(CW+Cw);Cg.padding.left=Math.floor(Cw/2);Cg.padding.right=Math.ceil(Cw/2);}else{if(Cg.type==BC){Cg.colWidth=Math.round(Ag);}else{if(Cg.type==CS){Cg.colWidth=Math.round(this.dropShadowWidth);}else{Cg.colWidth=Math.round(J[Cj]+Cw);Cg.padding.left=Math.floor(Cw/2);Cg.padding.right=Math.ceil(Cw/2);}}}}this.leftWidth=0;for(var Cv=0;Cv<this.attrColumnCount;Cv++){this.leftWidth+=CY[Cv].colWidth;}this.rightWidth=0;var Ca=0;for(var Cv=this.attrColumnCount;Cv<CY.length;Cv++){this.rightWidth+=CY[Cv].colWidth;if(CY[Cv].colWidth>Ca){Ca=CY[Cv].colWidth;}}if(this.leftWidth+this.rightWidth<this.getWidth()){var Cl=BO(this.colInfos,this.getWidth());this.dropShadowDiv.style.display="none";this.enableSmoothScroll=false;this.scrollerConfig.hScroll=false;this.leftWidth=this.getWidth();this.rightWidth=0;this.leftChart.style.width=this.getWidth()+"px";}else{if(this.attrColumnCount>=0){var Cs={order:"",type:CS,title:"",titleAlign:AP.center,colWidth:this.dropShadowWidth,padding:{l:0,r:0},headerCssClass:this.headerCssClass,valueCssClass:"",colIdx:this.colInfos.length};this.colInfos.splice(this.attrColumnCount,0,Cs);this.rightWidth+=this.dropShadowWidth;}var Cc=this.leftWidth+Ca+this.dropShadowWidth;if(this.getWidth()<Cc){var Cm=Math.min(Ca+this.dropShadowWidth,0.75*this.getWidth());this.leftWidth=this.getWidth()-Cm;var Ci=this.treeColumnIdx>-1?(this.leftWidth-Ag)/(this.attrColumnCount-1):this.leftWidth/this.attrColumnCount;for(var Cv=0;Cv<this.attrColumnCount;Cv++){CY[Cv].colWidth=CY[Cv].type==BC?Ag:Ci;}}this.dropShadowDiv.style.display="block";this.scrollerConfig.hScroll=true;this.leftChart.style.width=this.leftWidth+"px";this.rightChart.style.width=this.rightWidth+"px";this.itemsContainerNode.style.width=(this.getWidth()-this.leftWidth)+"px";this.itemsContainerNode.style.left=this.leftWidth+"px";}var CV=[];var CY=this.colInfos,Ck=CY.length;for(var Cv=0;Cv<Ck;Cv++){CV[CY[Cv].colIdx]=Cv;}for(var Cv=0;Cv<Ck;Cv++){var Cg=CY[Cv];Cg.colIdx=Cv;if(this.colInfos[Cv].type==BC){this.treeColumnIdx=Cv;}if(Cg.rowH){Cg.rowH.colIdx=Cv;}if(Cg.CGColIdx){Cg.CGColIdx=CV[Cg.CGColIdx];}if(Cg.associateAttr){for(var Ct=0;Ct<Cg.associateAttr.length;Ct++){Cg.associateAttr[Ct]=CV[Cg.associateAttr];}}}}else{var Cr=CY.length;if(this.otherProps.mpColumnWidths.length>0){BO(this.colInfos,Co);}else{if(this.treeColumnIdx>-1){Cr--;Co-=Ag;}var Cq=Math.round(Co/Cr);for(var Cv=0;Cv<CY.length;Cv++){if(CY[Cv].type==BC){CY[Cv].colWidth=Ag;}else{CY[Cv].colWidth=Cq;}}}}}function f(Cv){var Cp=this.model,Cf=Cp.gts.row,Ch=Cp.gts.col,CZ=Ch[Cv].es,Cc=Cp.vp?Cp.vp:{},Cn=this.getWidth(),CW=this.otherProps;CW.mpColumnWidths=Cc.cw?Cc.cw.split(","):(Cc.tcw?Cc.tcw.split(","):[]);var Ci=CW.mpColumnWidths;if(Ci.length!=C.length){Ci=[];CW.mpColumnWidths=[];}this.colInfos=[];this.showGauge=false;for(var Cr=0;Cr<C.length;Cr++){if(C[Cr]=="GaugeChart"){this.showGauge=true;}}this.isAllAttrSelectable=true;for(var Cr=0,Cu=0;Cr<C.length;Cr++){var CV=C[Cr];var Cg={order:CV,colWidth:0,padding:{},headerCssClass:" ",valueCssClass:" ",sortOrder:AI.NORMAL};if(CV=="LineChart"){Cg.type=BZ;Cg.title=this.sparklineProps.mstrHeader;Cg.titleAlign=AP.center;Cg.padding.left=Math.round(3*Bw);Cg.padding.right=Math.round(3*Bw);}else{if(CV=="BarChart"){Cg.type=BZ;Cg.title=this.barProps.mstrHeader;Cg.titleAlign=AP.center;Cg.padding.left=Math.round(3*Bw);Cg.padding.right=Math.round(3*Bw);}else{if(CV=="GaugeChart"){Cg.type=BZ;Cg.title=this.bulletProps.mstrHeader;Cg.titleAlign=AP.center;Cg.padding.left=Math.round(3*Bw);Cg.padding.right=Math.round(3*Bw);}else{if(CV=="Metric"){if(CW.mbHideTextColumns){this.treeColumnIdx=-1;continue;}Cg.type=D;Cg.title=window.getLocaleString?window.getLocaleString("METRICS","Metrics"):mstrmojo.desc(1158,"Metrics");Cg.titleAlign=AP.left;Cg.valueCssClass+=" "+this.valueCssClass;if(Ch[Cv].lm&&Ch[Cv].lm.length>0){Cg.lm=Ch[Cv];p++;}}else{if(CV!=parseInt(CV)){if(CW.mbHideTextColumns){this.treeColumnIdx=-1;continue;}Cg.associateAttr=[];Cg.type=z;Cg.title=An[CV];Cg.titleAlign=AP.left;Cg.valueCssClass+=" "+this.valueCssClass;if(this.isTreeMode){this.treeColumnIdx=Cu;this.colInfos[Cu]={order:CV,type:BC,title:"",titleAlign:AP.center,colWidth:0,padding:{},headerCssClass:this.headerCssClass,valueCssClass:"",colIdx:this.treeColumnIdx};Cg.associateAttr.push(Cu);Cu++;}else{for(var Cq=0;Cq<Cf.length;Cq++){var Ce=Cf[Cq];var Co=(CV==Ce.id)||(CV==Ce.id+":"+Ce.fid),Cm=(CV==Ce.id+":CG");isAttrForm=false;var Ca=Ce.fs;for(var Ck=0;Ck<Ca.length;Ck++){if(CV==Ce.id+":"+Ca[Ck].id){isAttrForm=true;break;}}if(Cm&&Ce.colIdx>=0){this.colInfos[Ce.colIdx].CGColIdx=Cr;this.colInfos[Ce.colIdx].isFirstCGCol=true;Cg.CGColIdx=Ce.colIdx;}if(Co||isAttrForm){Ce.colIdx=Cu;Cg.rowH=Ce;Cg.id=Ce.id.split(":")[0];Cg.fid=Ce.fid;if(CW.mbInheritFromGridGraph&&Ce.cni!==undefined&&Cp.css.length>Ce.cni){Cg.titleAlign=Cp.css[Ce.cni].n;}var Ct=(CV==Ce.id+":"+Ce.fid);if(Ct){BR++;}if(Ce.sc&&Ce.sc.tks&&Ce.sc.tks!=""){Cg.sc=Ce.sc;}else{this.isAllAttrSelectable=false;}if(Ce.lm&&Ce.lm.length>0&&Ce.lm[0].links){Cg.lm=Ce;if(Ct){p++;}}var Ca=Ce.fs;for(var Ck=0;Ck<Ca.length;Ck++){var CX=Ce.id+":"+Ca[Ck].id;if(CX==CV){Cg.fid=Ca[Ck].id;continue;}else{for(var Cl=0;Cl<C.length;Cl++){if(C[Cl]==CX){Cg.associateAttr.push(Cl);break;}}}}break;}}}}else{Cg.type=CK;var Cb=parseInt(CV);if(Cb>=CZ.length){continue;}Cg.mid=CZ[Cb].oid;if(CW.mbInheritFromGridGraph&&CZ[Cb].cni!==undefined&&Cp.css.length>CZ[Cb].cni){Cg.titleAlign=Cp.css[CZ[Cb].cni].n;}else{Cg.titleAlign=AP.right;}if(CV=="0"){if(this.sparklineProps.mstrAssMetric){Cg.title=this.sparklineProps.mstrAssMetric;}else{if(this.isKPI){Cg.title="";}else{Cg.title=CZ[Cb].n;}}}else{if(CV=="2"){if(this.bulletProps.mstrAssMetric){Cg.title=this.bulletProps.mstrAssMetric;}else{if(this.isKPI&&this.showGauge){Cg.title="";}else{Cg.title=CZ[Cb].n;}}}else{Cg.title=CZ[Cb].n;}}if(Ch[Cv].lm[Cb].links){Cg.lm=Ch[Cv];p++;}}}}}}Cg.valueCssClass+=" microchart-table-text "+Cg.titleAlign;Cg.headerCssClass+=" microchart-table-text "+Cg.titleAlign+" "+this.headerCssClass;if(Ci.length>0){Cg.colWidth=parseFloat(Ci[Cr]);}Cg.colIdx=Cu;this.colInfos[Cu++]=Cg;}var CY=this.colInfos;if(C.length==0){CY[0].title=Cf[0].n;for(var Cr=1;Cr<Cf.length-CR;Cr++){CY[Cr].title=Cf[Cr].n;}}if(this.enableSmoothScroll){var Cs=function(Cw){switch(Cw){case z:return -1;case BC:return -1;case D:return -1;default:return 1;}};var Cd=function(Cx,Cw){if(Cs(Cx.type)*Cs(Cw.type)>0){return Cx.colIdx<Cw.colIdx?-1:1;}else{return Cs(Cx.type);}};CY.sort(Cd);var Cj=CY.length;for(var Cr=0;Cr<Cj;Cr++){if(Cs(CY[Cr].type)>0){this.attrColumnCount=Cr;break;}}}}function L(Ca){this.initModel();var Cx=this.model,Ci=Cx.gts.col,Cc=Cx.gts.col[0].es.length,C2=Cx.gts.row,Cg=C2.length,Cq=Cx.gvs.items.length,Ce=Cx.vp?Cx.vp:{};if(Cg===0||Cc===0||Ci.length>1){var Cp="The widget requires at least two attributes on row axis and one metrics in column axis OR exactly one attribute on row axis and at least one metric on column axis for KPI List mode.";var C6=window.getLocaleString?window.getLocaleString("MICROCHART_TEMPLATE_REQUIREMENT",Cp):mstrmojo.desc(8424,Cp);Cx.err=C6;return ;}if(this.isTreeMode){if(C2.length<3){this.isTreeMode=false;}}var Ck=C2.length;var Cb=C2[Ck-1].id;Ck=Ck-2;while(Ck>=0){if(Cb==C2[Ck].id){CR++;Ck--;}else{break;}}if(Cg<=CR){this.isKPI=true;}for(var C0=0;C0<C2.length;C0++){if(C2[C0].otp==1){C2[C0].otp=-1;while(++C0<C2.length&&C2[C0].otp==1){C2[C0].id+=":CG";C2[C0].n=" ";C2[C0].otp=-1;}}}for(var C0=0;C0<C2.length;C0++){if(C2[C0].fs&&C2[C0].fs.length>0){for(var Cv=0;Cv<C2[C0].fs.length;Cv++){if(Cv==0){An[C2[C0].id+":"+C2[C0].fs[Cv].id]=C2[C0].n;}else{An[C2[C0].id+":"+C2[C0].fs[Cv].id]=" ";}}}if(C2[C0].fid&&C2[C0].fid.length>0){var CW;CW=C2[C0].n;An[C2[C0].id]=CW;An[C2[C0].id+":"+C2[C0].fid]=CW;}else{An[C2[C0].id]=C2[C0].n;}}var CX=-1;for(var C0=0;C0<Ci.length;C0++){if(Ci[C0].n="Metrics"){CX=C0;var Cd=Ci[C0].es;for(var Cz=0;Cz<Cd.length;Cz++){An[Cd[Cz].oid]=Cd[Cz].n;Ba[Cd[Cz].n]=Cz;Ba[Cd[Cz].oid]=Cz;AQ[Cz]=Cd[Cz].n;}}}var C7=true;if(!Ce.co&&!Ce.tco){C7=false;}else{C=Ce.tco?Ce.tco.split(","):Ce.co.split(",");C7=Q.call(this);if(!C7){Ce.cw=null;Ce.tcw=null;}}if(!C7){C=[];if(!this.isKPI){BF.call(this);}else{B8.call(this);}}var C5=this.otherProps;if(!this.enableSortOnMobile){if(C5.mpSortKey&&C5.mpSortKey.length>0){var Cw="";for(var C0=0;C0<C5.mpSortKey.length;C0++){if(C5.mpSortKey[C0]=="_"){break;}Cw+=C5.mpSortKey[C0];}var Cl=Ba[Cw];if(Cl>=0){C5.mpSortKey=Cl;}else{for(var Cr in An){if(An[Cr]==Cw){C5.mpSortKey=Cr;break;}}if(!An[C5.mpSortKey]){C5.mpSortKey=null;}}}else{C5.mpSortKey=null;}}if(C5.mbInheritFromGridGraph&&(this.theme==BM||this.theme==Ab)){try{var CV=Cx.headercni?Cx.headercni:0;var CZ=Cx.valuecni?Cx.valuecni:(Cx.css.length-1);var Cf=function(C8){if(C8){return C8;}return"";};this.headerCssClass=Cf(Cx.css[CV].n);this.valueCssClass=Cf(Cx.css[CZ].n);if(this.valueCssClass&&this.valueCssClass.length>0){var Cu=this.textSpan;Cu.className=this.valueCssClass;Cu.style.font="";this.fontSize=mstrmojo.css.getStyleValue(Cu,"fontSize");}var C1=this.getTextHeight("a",this.valueCssClass,true);if(C1>C5.mRowHeight){C5.mRowHeight=C1;}}catch(C3){}}var CY=function(C9,C8,DC,DA,DD){var DE=DC;var DB;if(DA){DE="["+DC+"]";}if(C9[C8]===DE){DB=window.getLocaleString?window.getLocaleString("",DC):mstrmojo.desc(DD,DC);if(DA){DB="["+DB+"]";}C9[C8]=DB;}};if(Ca){var Cs=this.colInfos,Ch=Cs.length;for(var C0=0;C0<Ch;C0++){var Ct=Cs[C0],Cm=Ct.order,Cy=Ct.rowH;if(Cy){for(var Cz=0;Cz<C2.length;Cz++){var Cj=C2[Cz];var Co=(Cy.id==Cj.id)&&(Cy.fid==Cj.fid);if(Co){Cj.colIdx=Cy.colIdx;Ct.rowH=Cj;if(Cj.sc&&Cj.sc.tks&&Cj.sc.tks!=""){Ct.sc=Cj.sc;}if(Cj.lm&&Cj.lm.length>0&&Cj.lm[0].links){Ct.lm=Cj;}break;}}}if(Ct.type==BC){this.treeColumnIdx=C0;}}}else{f.call(this,CX);}if(!this.isKPI){AV(this);}else{CL(this);}var C4=C5.mnMetricsPerKPI;var Cx=this.model;if(this.isKPI&&Cc<C4){var Cn="Metric per KPI should be at least 1 or less than or equal to the total number of Metrics in the widget";Cx.err=Cn;return ;}if(CT.length==0){var Cn="No data returned for this view, this might be because the applied filter excludes all data";Cx.err=Cn;return ;}this.showMinLabel=B4.call(this);this.buildRows();Cx.processed=true;}function Q(){for(var Cb=0;Cb<C.length;Cb++){if(C[Cb]=="LineChart"||C[Cb]=="BarChart"||C[Cb]=="GaugeChart"||C[Cb]=="Metric"){continue;}if(C[Cb].length<3){return false;}var CV=C[Cb];var Cd=CV.length;if(CV[Cd-2]=="|"){C[Cb]=CV=CV.substring(0,Cd-2);}if(!An[CV]){return false;}else{if(Ba[CV]!==undefined){C[Cb]=Ba[CV]+"";}else{if(this.isKPI){C[Cb]="0";}}}}if(this.enableSmoothScroll){return false;}var CX=this.model,CY=CX.gts.col[0].es;var Cc=[],Ca=[];if(this.isTreeMode){Cc=this.otherProps.mpColumnIDsInTreeMode;if(Cc.length==1){return false;}for(var Cb=0;Cb<CY.length;Cb++){var Cg=CY[Cb].oid;Ca.push(Cg);}}else{Cc=this.otherProps.mpColumnIDs;if(this.isKPI){if(Cc.length<=1){return false;}Ca.push("Metric");var CW=this.otherProps.mnMetricsPerKPI;if(CW>2){for(var Cb=0;Cb<CW;Cb++){if(Cb%CW<=1){continue;}var Cg=CY[Cb].oid;Ca.push(Cg);}}}else{if(Cc.length==1){return false;}var Cj=CX.gts.row,Cf=Cj.length-1,Ch=0;for(var Cb=0;Cb<Cf;Cb++){var Ce=Cj[Cb],Ci=Ce.fs&&Ce.fs.length;Ca.push(Ce.id);for(var CZ=1;CZ<Ci;CZ++){Ca.push(Ce.fs[CZ].id);}Ch+=Ci;}for(var Cb=0;Cb<CY.length;Cb++){var Cg=CY[Cb].oid;Ca.push(Cg);}}}if(Ca.length!=Cc.length){return false;}for(var Cb=0;Cb<Ca.length;Cb++){var Cg=Ca[Cb];if(mstrmojo.array.indexOf(Cc,Cg)==-1){return false;}}return true;}function B8(){var Cb=0;var CW=this.otherProps,CX=this.sparklineProps,CZ=this.barProps,Ca=this.bulletProps;C[Cb++]="Metric";var Cc=CW.mnMetricsPerKPI;if(isNaN(Cc)){Cc=1;}var CV=false;if(CX.mbShow){CV=true;C[Cb++]="LineChart";}if(CZ.mbShow){CV=true;C[Cb++]="BarChart";}if((!CV&&CW.mbShowForHiddenGraphs)||(CV&&CX.mbAssMetric)){C[Cb++]="0";}if(Cc>=7){if(Ca.mbShow){if(Ca.mbAssMetric){C[Cb++]="2";}C[Cb++]="GaugeChart";}else{if(CW.mbShowForHiddenGraphs){for(var CY=3;CY<=Cc&&CY<=7;CY++){C[Cb++]=""+(CY-1);}}}for(var CY=8;CY<=Cc;CY++){C[Cb++]=""+(CY-1);}}else{for(var CY=3;CY<=Cc;CY++){C[Cb++]=""+(CY-1);}}}function BF(){var Ca=0;var CV=this.model,CZ=CV.gts.row,Cc=CV.gts.col;var Cb=0;if(this.isTreeMode){C[Ca++]=CZ[0].id;}else{for(var CX=0;CX<CZ.length-CR;CX++){if(CZ[CX].fs&&CZ[CX].fs.length>0){for(var CY=0;CY<CZ[CX].fs.length;CY++){C[Ca++]=CZ[CX].id+":"+CZ[CX].fs[CY].id;}}else{if(CZ[CX].fid&&CZ[CX].fid.length>0){C[Ca++]=CZ[CX].id+":"+CZ[CX].fid;}else{C[Ca++]=CZ[CX].id;}}}}for(var CX=0;CX<Cc.length;CX++){if(Cc[CX].n="Metrics"){Cb=Cc[CX].es.length;}}var CW=false;if(this.sparklineProps.mbShow){CW=true;C[Ca++]="LineChart";}if(this.barProps.mbShow){CW=true;C[Ca++]="BarChart";}if((!CW&&this.otherProps.mbShowForHiddenGraphs)||(CW&&this.sparklineProps.mbAssMetric)){C[Ca++]="0";}if(Cb>=7){if(this.bulletProps.mbShow){if(this.bulletProps.mbAssMetric){C[Ca++]="2";}C[Ca++]="GaugeChart";}else{if(this.otherProps.mbShowForHiddenGraphs){for(var CX=3;CX<=7&&CX<=Cb;CX++){C[Ca++]=""+(CX-1);}}}for(var CX=8;CX<=Cb;CX++){C[Ca++]=""+(CX-1);}}else{for(var CX=3;CX<=Cb;CX++){C[Ca++]=""+(CX-1);}}}function AV(C8){var DE=C8.model,C3=DE.gts.col[0].es,DK=DE.gts.row,Cq=DE.gvs.items,C1=DE.gvs.items.length,C0=DE.ghs.rhs.items;var Cf=DK.length;var C7=DK.length-CR;var DM=C7-1;var Co=0;C8.attrMapIdx=[];var C6=C8.attrMapIdx;for(var DB=0;DB<Cf;DB++){C6[DB]=Co;if(!DK[DB].fs||DK[DB].fs.length==0){Co++;}else{Co+=DK[DB].fs.length;}}C6[Cf]=Co;var C4=DK[C7].dn||DK[C7].n;for(var DB=0;DB<=C7;DB++){var Cl=DK[DB],CZ=Cl.sc&&Cl.sc.tks&&Cl.sc.tks!="";if(CZ){Cl.ctlMatrix={map:[],selectedIdx:{}};}}var Cc=function(DT,DS){var DQ=[];for(var DR=0;DR<DT.length;DR++){DQ[DR]=DT[DR];}return DQ;};var DA=[];var DI=0,DG=0;var CY=[];var Cz=0;for(DI=0;DI<C0.length;DI++){if(DI===0){DA[0]=[];for(DG=0;DG<C0[DI].items.length;DG++){DA[0][DG]=C0[0].items[DG].idx;if(DA[0][DG]<0&&DK[DG].otp==-1){DA[0][DG]=DK[DG].es.length+DA[0][DG-1];}if(C0[0].items[DG].cet){var C2=C0[0].items[DG].cet;var DL=DK[DG].ctlMatrix;if(DL){DL.selectedIdx[DA[0][DG]]=true;}}}CY=Cc(DA[0]);Cz=CY.length;continue;}var Cy=C0[DI].items;var DH=Cy.length;for(DG=1;DG<=DH;DG++){CY[Cz-DG]=Cy[DH-DG].idx;if(CY[Cz-DG]<0&&DK[Cz-DG].otp==-1){var DF=0;for(;DF<C6.length;DF++){if(Cz-DG<C6[DF]){break;}}CY[Cz-DG]=DK[DF-1].es.length+Cy[DH-DG-1].idx;}if(Cy[DH-DG].cet){var C2=Cy[DH-DG].cet;if(C[DH-DG]==C2+":CG"){C2+=":CG";}var DL=DK[DH-DG].ctlMatrix;if(DL){DL.selectedIdx[CY[Cz-DG]]=true;}}}DA[DI]=Cc(CY);}var Ce=function(DW){var DS={};var DQ=0;for(var DU=0;DU<DK.length-CR;DU++){var DR=DK[DU].fs.length;if(DR<1){DR=1;}var DY=DK[DU].id;if(DA[DW][DQ]<0){DS[DY]="";}else{DS[DY]=DK[DU].es[DA[DW][DQ]];}if(DS[DY]==undefined){DS[DY]={n:""};}var DX=DK[DU].fid;if(DX&&DX.length>0){DS[DY+":"+DX]=DK[DU].es[DA[DW][DQ]];}for(var DT=0;DT<DR;DT++){var DZ="";if(DK[DU].fs&&DK[DU].fs[DT]){DZ=DK[DU].fs[DT].id;}if(DZ&&DZ.length>0){var DV=DY+":"+DZ;DS[DV]=DK[DU].es[DA[DW][DQ]];}DQ++;}}return DS;};var C9={v:[],rv:[],thClr:[],hi:[0]};var Ch=[];var Cr=null;var Cx=[{items:[{n:C3[0].n}]}];var DO=[],Ci=[],DG=0,Cm=0,DN=false,Cp=false;function Cg(DQ,DR){if(DQ.length!=DR.length){return true;}var DT=C6[C7]-1;if(DT>=DQ.length){DT=DQ.length-1;}for(var DS=DT;DS>=0;DS--){if(DQ[DS]!=DR[DS]){return true;}}return false;}for(var DI=0;DI<=C1;DI++){if(DI===0){Ci=DA[DI];}else{if((Cp=(DI===C1||Cg(Ci,DA[DI])))||DN){if(DN&&!Cp){}else{if(!C8.isTreeMode){for(var C5=0;C5<C7;C5++){var DL=DK[C5].ctlMatrix;if(DL){DL.map[Cm]=DA[DI-1][C5];}}}CT[Cm]={isTotal:DN,refv:Ch,elms:Cr,tr:C9.v[C9.v.length-1],model:{categories:{items:DO,tn:C4},mtrcs:{items:AQ},colHeaders:Cx,series:[C9],rowHeaders:[{n:DK[C7].n}]}};Cm++;if(DI===C1){break;}}C9={v:[],rv:[],thClr:[],hi:[0]};Ch=[];DO=[];Ci=DA[DI];DG=0;DN=false;}}var DP=C8.otherProps;for(var DC=0;DC<Cq[DI].items.length;DC++){if(!Ch[DC]){Ch[DC]={};}Ch[DC]=Cq[DI].items[DC];}Cr=Ce(DI);if(!C8.enableSortOnMobile){if(DP.mpSortKey!=null){var Ct=(DP.mpSortKey!=parseInt(DP.mpSortKey));if(Ct){sortValue=Cr[DP.mpSortKey].n;}else{sortValue=parseFloat(Ch[DP.mpSortKey].rv);}}}if(!C8.isTreeMode){var Cs=function(DQ){return(DQ.id&&DQ.id.substring(0,1)==="D")||(DQ.id===undefined&&DQ.n==="Total");};for(var DF=DM;DF>=0;DF--){var Ck=DK[DF].es[DA[DI][C6[DF]]];if(Ck&&Cs(Ck)){DN=true;break;}}if(DN){continue;}var Cj=DK[C7].es[DA[DI][C6[C7]]];if(Cj&&Cs(Cj)){continue;}}var CV="";var Cw=C6[C7];var DD=null;var Cn=1;try{for(var DC=0;DC<CR;DC++){DD=DK[C7+DC];if(DD.fs&&DD.fs.length>0){Cn=DD.fs.length;}else{Cn=1;}for(var Cd=0;Cd<Cn;Cd++){CV+=" "+DD.es[DA[DI][Cw]].n;Cw++;}}}catch(DJ){}DO[DG]=CV;var Cv=Cq[DI].items[0];C9.v[DG]=Cv.v;C9.rv[DG]=Cv.rv;var CX=DE.th&&DE.th["0"];var CW=Cv.ti;if(CW!=undefined&&Cv.ty==2&&CX[CW].cni!=undefined&&DP.mbInheritFromGridGraph){this.textSpan.className=DE.css[CX[CW].cni].n;var Cu=mstrmojo.css.getComputedStyle(this.textSpan);C9.thClr[DG]=Cu.backgroundColor;if(C9.thClr[DG]=="rgba(0, 0, 0, 0)"){C9.thClr[DG]=null;}}else{C9.thClr[DG]=null;}DG++;}if(!C8.enableSortOnMobile){if(DP.mpSortKey!=null){if(C8.isTreeMode){}else{var Cb=CT.length;for(var DI=0;DI<Cb;DI++){for(var DG=0;DG<Cb-1;DG++){if((DP.mbSortDescend&&CT[DG].sortV<CT[DG+1].sortV)||(!DP.mbSortDescend&&CT[DG].sortV>CT[DG+1].sortV)){var Ca=CT[DG];CT[DG]=CT[DG+1];CT[DG+1]=Ca;}}}}}}if(C8.isTreeMode){Ao.call(C8,DA);}}function CL(Ce){var Cm=Ce.model,Cc=Cm.gts.row,Cf=Cm.gts.col,CY=Cc[Cc.length-1].es,Cu=Cf[0].es,Cj=Cm.ghs.rhs.items,Cl=Cj.length,Cg=Cm.gvs.items,Ch=[];for(var Cr=0;Cr<Cu.length;Cr++){if(!Ch[0]){Ch[0]={items:[]};}Ch[0].items[Cr]=[{n:Cu[Cr].n}];}var Cw=Cg[0].items.length;var Cd=[];var Cx=[];var Cq=Cm.gts.row[0].dn||Cm.gts.row[0].n;var Ck=[];var CW=Ce.otherProps.mnMetricsPerKPI;if(isNaN(CW)){CW=1;}var Cs=0;var Ca=[];for(var Cr=0;Cr+CW<=Cw;Cr=Cr+CW){var CX=[];var CZ=[];Cd[Cs]={v:CX,rv:CZ,hi:[0]};var Cp=[];Ck[Cs]={refv:Cp};for(var Co=0;Co<CW;Co++){Ck[Cs].refv[Co]=Cg[Cl-1].items[Cr+Co];}Ca[Cs]=Cr;Cs++;}for(var Cr=0;Cr<Cl;Cr++){var Ct=Cj[Cr].items;var Ci=Ct[Ct.length-1].idx;if(isNaN(Ci)){console.log("idx is not a number!"+Ci);Cx[Cr]=CY[Cr].n;}else{if(Ci<0){Cx[Cr]="";}else{Cx[Cr]=CY[Ci].n;}for(var Cn=2;Cn<=Ct.length&&Cn<=Cc.length;Cn++){var Cy=Ct[Ct.length-Cn].idx;if(!isNaN(Cy)){Cx[Cr]=Cc[Cc.length-Cn].es[Cy].n+" "+Cx[Cr];}}}var Cb=0;for(var Co=0;Co+CW<=Cw;Co=Co+CW){Cd[Cb].v[Cr]=Cg[Cr].items[Co].v;Cd[Cb].rv[Cr]=Cg[Cr].items[Co].rv;Cb++;}}var Cv=Cd.length;for(var Cr=0;Cr<Cv;Cr++){var CV={};CV[Cm.gts.row[0].id]=Ch[0].items[Cr*CW][0];if(Cm.gts.row[0].fid){CV[Cm.gts.row[0].id+":"+Cm.gts.row[0].fid]=Ch[0].items[Cr*CW][0];}CV.Metric=Ch[0].items[Cr*CW][0];CT[Cr]={refv:Ck[Cr].refv,elms:CV,tr:Cd[Cr].v[Cd[Cr].v.length-1],model:{categories:{items:Cx,tn:Cq},mtrcs:{items:AQ},series:[Cd[Cr]],colHeaders:[{items:Ch[0].items[Cr]}],rowHeaders:[{n:Cc[0].n}]},metricIdx:Ca[Cr]};}}function B4(){var Ca=false;var CW=this.otherProps;if(this.showGauge){var CZ=this.bulletProps.mfMinValue;var CY=CT.length;for(var CX=0;CX<CY;CX++){var CV=CT[CX].refv[2];if(CV&&CV.rv<CZ){Ca=true;CW.mRowHeight=CW.mRowHeight>36?CW.mRowHeight:36;break;}}}return Ca;}function j(CY){var CV=this.getChartWithScrollBar()._scroller;var Cb=CY!=undefined?CY:CV&&CV.origin&&CV.origin.y;var Ca=this.rowOffsetHeight;var CX=this.startCnt+parseInt(Cb/Ca)+this.dockedHeaderRows.length;var CW=Cb%Ca;var CZ=B6.call(this,CX);return{rowInfo:CZ,treeNode:CZ.treeNode,pastOffset:CW,rowIdx:CX};}function B6(CW){if(CW<0){CW=0;}var CV=this.rows.length-1;if(CW>CV){CW=CV;}return this.rows[CW];}function E(CV,CZ){var CW=[];var Cb=null;var Cd=[];var Ce=this.tree.childrenTreeNodeList;var CX=Ce.length;for(var CY=CX-1;CY>=0;CY--){CW.push(Ce[CY]);}var Ca=0;while(CW.length>0){Cb=CW.pop();var Cc={treeNode:Cb,model:Cb.model,rowIdx:Ca,selected:Cb.selected,rowRef:{}};Cd.push(Cc);if(!CV){Cb.rowIdx=Ca++;}if(CZ&&Ca>=CZ){break;}if(Cb.needExpand||CV){Ce=Cb.childrenTreeNodeList;CX=Ce.length;for(var CY=CX-1;CY>=0;CY--){CW.push(Ce[CY]);}}}return Cd;}function O(){var Cd=this.getChartWithScrollBar()._scroller;var Cb=Cd&&Cd.origin&&Cd.origin.y;var CV=this.rowOffsetHeight;var CX=this.startCnt+parseInt(Cb/CV);var CW=Math.min(this.chartTableMaxHeight,parseInt(this._leftChart.itemsContainerNode.style.height));var Cc=this.startCnt+parseInt((Cb+CW)/CV);if(CX<0){CX=0;}if(Cc>=this.rows.length){Cc=this.rows.length-1;}var Ca=-1;for(var CY=CX;CY<=Cc;CY++){var CZ=this.rows[CY].treeNode.level;if(CZ>Ca){Ca=CZ;}}return Ca;}function Bd(CV){var CX=CV&&CV.childNodes&&CV.childNodes.length;for(var CW=0;CW<CX;++CW){CV.removeChild(CV.firstChild);}}function Bu(CV){return CV<0;}function AB(CW,CV,CX){if(this.expandToLevel==CW){return ;}Br(this.tree,CW);this.expandToLevel=CW;this.rowsNeedRebuild=true;this.reRenderChartWithAnchor(CV,CX);Aq.call(this);this.reBuildDH(CW);}function At(CX,Cc){var Cd=CX.treeNode;Cd.needExpand=true;this.expandToLevel=-1;var Ce=this.getChartWithScrollBar()._scroller;var CW=CX.rowIdx;this.reRenderChart(Ce.origin);Aq.call(this);if(CW==this.startCnt+parseInt(Ce.origin.y/this.rowOffsetHeight)+this.dockedHeaderRows.length){var Ca=[];var CZ=CX.treeNode;while(CZ.needExpand){Ca.push(CW);CZ=B6.call(this,++CW).treeNode;}this.addRowsToDH(Ca);}var CY=this.rowOffsetHeight;var Cf=this.startCnt+Math.round((Ce.origin.y+this.chartTableHeight)/CY)-1;if(CW==Cf){var Cb=Ce;var CV=Math.min(Ce.origin.y+2*CY,Ce.offset.y.end);Ce.origin.y=CV;this._leftChart.scrollTo(Ce.origin);if(this._rightChart){this._rightChart.scrollTo(Ce.origin);}this.onScrollMoved({y:CV});}}function CD(CY,CX){var CV=CY.length;for(var CW=0;CW<CV;CW++){var CZ=CY[CW];if(CZ.rowIdx==CX){return CW;}}return -1;}function CQ(Ca,CX){var CY=Ca.treeNode;CY.needExpand=false;this.expandToLevel=-1;var CW=this.getChartWithScrollBar()._scroller;if(CX==w){var CZ=0;var CV=this.dockedHeaderRows.length;var Cb=CD(this.dockedHeaderRows,Ca.rowIdx);if(Cb>=0){this.removeRowsFromDH(CV-Cb);this.removeChildrenForDHReplaceTable();this.dockedHeaderStatus=k;}else{Cb=CD(this.dockedHeaderReplaceRows,Ca.rowIdx);if(Cb<0){return ;}Cb+=CV;CZ=CW.origin.y%this.rowOffsetHeight;this.removeChildrenForDHReplaceTable();this.dockedHeaderStatus=k;}var CV=this.startCnt+parseInt(CW.origin.y/this.rowOffsetHeight)+Cb-Ca.rowIdx;this.reRenderChart(CW.origin,CV,CZ);}else{if(CX==t){this.reRenderChart(CW.origin);}}Aq.call(this);}function Aq(){if(!this._leftChart){return ;}var Ca=(this.otherProps.mbHideTextColumns&&this.enableSmoothScroll)?this._rightChart.chartTableOffsetHeight:this._leftChart.chartTableOffsetHeight;var CW=(this.otherProps.mbHideTextColumns&&this.enableSmoothScroll)?this._rightChart.headerTableOffsetHeight:this._leftChart.headerTableOffsetHeight;this.headerTableOffsetHeight=CW;var CY=0;if(Ca>=this.chartTableMaxHeight||Ca===0){CY=this.chartTableMaxHeight;}else{CY=Ca;}CY+=1;this._leftChart.itemsContainerNode.style.height=CY+"px";if(this._rightChart){this._rightChart.itemsContainerNode.style.height=CY+"px";}this.legend.style.top=(CW+CY)+"px";this.dropShadowDiv.style.height=(CW+CY)+"px";this.indicatorEl.parentNode.style.top=CW+"px";this.indicatorEl.parentNode.style.height=CY+"px";this.chartTableHeight=CY;var CX=this.getChartWithScrollBar()._scroller;var CZ=CX.origin.y;var CV=Ca-CY+2;var Cb=this.rowOffsetHeight;if(CZ>CV){if(CX.vScroll){CX.origin.y=CV;this._leftChart.scrollTo(CX.origin);if(this._rightChart){this._rightChart.scrollTo(CX.origin);}while((CZ=CZ-Cb)>CV){this.updateDockedHeadersByOneRow(CZ,true);}this.updateDockedHeadersByOneRow(CV);this.firstRowIdxOnScrn=parseInt(this.startCnt+CX.origin.y/Cb);}else{CX.origin.y=0;this._leftChart.scrollTo(CX.origin);if(this._rightChart){this._rightChart.scrollTo(CX.origin);}this.firstRowIdxOnScrn=parseInt(this.startCnt+CX.origin.y/Cb);}}this.updateWindowRatio();this.updateScrollBarPosition();}function AW(CV){var CW=this._scroller,CX=this.rightChart,CY=this.rightChart.offsetWidth-(this.getWidth()-this.leftWidth);CW.origin={x:CV&&CV.x||0,y:CV&&CV.y||0};CW.showScrollbars=true;CW.hScroll=(CY!==0&&CW.noHScroll!==true)||this.scrollPast;if(CW.hScroll){CW.offset={x:{start:0,end:CY},scrollPast:this.scrollPast};}this.utils.translateCSS(-CW.origin.x,-CW.origin.y,false,CX);}function Aw(CZ){var Ca=this;if(Ca.isTreeMode){var Cb=Ca.lastSelectedObj[Ca.lastSelectedObj.length-1];if(Cb&&Cb.treePath){Ca.closedIfwAttr=Cb.treePath;Ca.currSelectedObj=[];if(!CZ){Ca.updateSelectedStatus(Ca.tree);Ca.updateHighlightForCurrRenderRows();}Ca.lastSelectedObj=[];}}else{if(Ca.isAllAttrSelectable){Ca.closedIfwAttr=Ca.prevSelected.mrow;Ca.prevSelected={mrow:-2,mcol:-1};Ca.unselectedRemainCells=[];Ca.updateUnselectedRemainCells();if(!CZ){Ca.updateSelectedStatus();Ca.updateHighlightForCurrRenderRows();}}else{var Cc=Ca.prevSelected&&Ca.prevSelected.mcol,Cd=Ca.getCGColInfo(Cc,true);if(!Cd){return ;}var CY=Cd.rowH.ctlMatrix,CX=this.getCGColInfo(Cc),CV=CX&&CX.rowH.ctlMatrix;var CW=Object.keys(CY.selectedIdx)[0];Ca.closedIfwAttr=Cd.rowH.es[CW].id;CY.selectedIdx={};if(CV){CV.selectedIdx={};}if(!CZ){Ca.updateSelectedStatus();Ca.updateHighlightForCurrRenderRows();}}}}mstrmojo.VisMicroChart=mstrmojo.declare(mstrmojo.AndroidVis,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.VisMicroChart",utils:mstrmojo.VisChartUtils,scrollerConfig:{bounces:false,showScrollbars:true,vScroll:false,hScroll:true,useTranslate3d:false},scrollPast:false,legendHeight:30,selectedStyle:"background-color:#015DE6;color:#FFFFFF;",selectedClass:"",isAllAttrSelectable:false,prevSelected:{mrow:-2,mcol:-1},rows:[],dockedHeaderRows:[],dockedHeaderReplaceRows:[],rowsReusePool:[],unselectedRemainCells:[],isTreeMode:false,isKPI:false,showMinLabel:false,rowsNeedRebuild:true,lastScrollPosition:{y:0},startCnt:-1,endCnt:-1,firstRowIdxOnScrn:0,pageSize:10,mcStatus:null,fontSize:"10pt",headerCssClass:"",valueCssClass:"",enableSmoothScroll:false,metricColumnsSpacing:CA,attrColumnCount:0,dropShadowWidth:5,enableSortOnMobile:true,markupString:'<div id="{@id}-microchart" class="mstrmojo-Chart {@cssClass}" style="width:{@width}px;height:{@height}px;left:{@left}px;top:{@top}px;z-index:{@zIndex};position:absolute"  mstrAttach:mousedown,mouseup,mousemove,click ><div id="{@id}-microchart-left" style="width:{@leftWidth}px;height:{@height}px;left:0px;right:0px;position:absolute;z-index:1;" > </div><div id="{@id}-microchart-smoothscroll-container" class="mstrmojo-Chart {@cssClass}" style="width:{@rightWidth}px;height:{@height}px;left:{@leftWidth}px;top:0;position:absolute;overflow:hidden;"><div id="{@id}-microchart-right" style="width:{@rightWidth}px;position:absolute;" > </div><div id="{@id}-drop-shadow-ss" style="position:absolute;left:0px;width:{@dropShadowWidth}px" > </div></div><div style="display:none;position:absolute;right:0;z-index:5;height:{@legendHeight}px;width:{@width}px;border:none;background:transparent;text-decoration:none;" class="microchart-lengend-text"><div style="position:absolute;right:0;top:0;padding-bottom:7px"><div style="float:left;padding-top:7px;"><div class="microchart-legend-band" ></div><div style="float:right;margin-right:10px;margin-left:10px;">Low</div></div><div style="float:left;padding-top:7px;"><div class="microchart-legend-band"></div><div style="float:right;margin-right:10px;margin-left:10px;">Mid</div></div><div style="float:left;padding-top:7px;"><div class="microchart-legend-band"></div><div style="float:right;margin-right:10px;margin-left:10px;">High</div></div></div></div><span id="textSpan" style="z-index:-10;visibility:hidden;-webkit-text-size-adjust: none;"></span><div id="{@id}-loading-msg" class="mstrmojo-loading-msg" style="display:none;z-index:10"></div><canvas id="textCanvas" width="900" height="500" style="z-index:-11;visibility:hidden;-webkit-text-size-adjust: none;"></canvas><div id="{@id}-tooltip"></div><div id="{@id}-text-tooltip" class="mstrmojo-Chart-tooltip timeseries-legend-tooltip" style="z-index:10"></div><div id="{@id}-errMsg" class="mstrmojo-message" style="width:{@width}px;height:{@height}px;top:0px;left:0px;position:absolute; display:none; z-index:30;"><div style="width:{@width}px;position:absolute;top:50%;text-align:center"></div></div><div id="{@id}-indicatorEl-container"  style="width:{@width}px;height:{@height}px;top:0px;left:0px;position:absolute;z-index:-5"><div></div></div><canvas id="{@id}-sort-arrow" width="8" height="15" style="position:absolute"></canvas></div>',markupSlots:{leftChart:function(){return this.domNode.childNodes[0];},rightChart:function(){return this.domNode.childNodes[1].firstChild;},dropShadowDiv:function(){return this.domNode.childNodes[1].childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[1];},textSpan:function(){return this.domNode.childNodes[3];},loadingMsg:function(){return this.domNode.childNodes[4];},textCanvas:function(){return this.domNode.childNodes[5];},tooltip:function(){return this.domNode.childNodes[6];},textTooltip:function(){return this.domNode.childNodes[7];},errorMsg:function(){return this.domNode.childNodes[8];},indicatorEl:function(){return this.domNode.childNodes[9].firstChild;},sortArrowCanvas:function(){return this.domNode.childNodes[10];},legend:function(){return this.domNode.childNodes[2];},legendLow:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[0];},legendLowFont:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[0].childNodes[1];},legendLowBand:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[0].childNodes[0];},legendMid:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[1];},legendMidFont:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[1].childNodes[1];},legendMidBand:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[1].childNodes[0];},legendHigh:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[2];},legendHighFont:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[2].childNodes[1];},legendHighBand:function(){return this.domNode.childNodes[2].childNodes[0].childNodes[2].childNodes[0];}},renderErrorMessage:function BE(CX){var CV=this.errorMsg.firstChild;CV.innerHTML=CX;this.errorMsg.style.display="block";var CW=CV.offsetHeight;CV.style.marginTop=-0.5*CW;},getTextWidthByCanvas:function BK(Cd,CX,Cc){var CW=this.textCanvas;var CV=CW.getContext("2d");var Cb=mstrmojo.css.getComputedStyle(CX),CY=this.utils.getComputedFontStyle(Cb);CV.font=CY;CV.textAlign="center";CV.fillStyle="blue";var Ca=CV.measureText(Cd);var Ce=Ca.width;if(Cc){var CZ=function(Cf){if(Cb[Cf]){Ce+=parseInt(Cb[Cf]);}};CZ("paddingLeft");CZ("paddingRight");}return Ce;},getTextDimesion:function BK(Ca,CX){var CY=this.textSpan;var CW=mstrmojo.css.getComputedStyle(CX),CZ=this.utils.getComputedFontStyle(CW);CY.style.font=CZ;CY.innerHTML=Ca;var CV={width:CY.offsetWidth,height:CY.offsetHeight};CY.style.font="";return CV;},getTextWidth:function Bx(Cd,Cb,CV,Ce,CW,Cc,Ca){var CY=this.textSpan;if(CY.className!==Cb||""){CY.className=Cb||"";}if(CY.style.fontFamily!==CV||""){CY.style.fontFamily=CV||"";}var CX=CW||"pt";if(Ce){CY.style.fontSize=Ce+CX;}else{CY.style.fontSize="";}if(Cc){if(CY.style.fontWeight!=="bold"){CY.style.fontWeight="bold";}}else{if(CY.style.fontWeight!==""){CY.style.fontWeight="";}}if(Ca){CY.style.padding="0px 0px";}else{CY.style.padding="";}CY.innerHTML=Cd;var CZ=CY.offsetWidth;return CZ;},getTextHeight:function B7(CZ,CX,CW,CV,CY){this.textSpan.style.fontFamily=CV||"";this.textSpan.style.fontSize=CY||"";if(CW){this.textSpan.style.fontWeight="bold";}else{this.textSpan.style.fontWeight="";}this.textSpan.className=CX;this.textSpan.innerHTML=CZ;return this.textSpan.offsetHeight;},removeMCStatus:function Bb(){this.mcStatus=null;if(this.controller&&this.controller.view&&this.controller.view.model&&this.controller.view.model.mcStatus){delete this.controller.view.model.mcStatus[this.getModelK()];}},restoreMCStatus:function W(){if(this.isTreeMode&&this.mcStatus&&this.mcStatus.currSelectedObj&&this.mcStatus.currSelectedObj.length>0){this.lastSelectedObj=Ai.clone(this.currSelectedObj);}if(this.mcStatus&&this.mcStatus.startCnt!=undefined&&this.mcStatus.endCnt!=undefined){this.startCnt=this.mcStatus.startCnt;this.firstRowIdxOnScrn=this.mcStatus.firstRowIdxOnScrn;var CY=Math.max(this.mcStatus.endCnt-this.mcStatus.firstRowIdxOnScrn,this.minPageSize);this.endCnt=Math.min(this.mcStatus.firstRowIdxOnScrn+CY,this.rows.length);}if(this.isTreeMode&&this.mcStatus){this.replacingStartRowIdx=this.mcStatus.replacingStartRowIdx;this.needReplaceCount=this.mcStatus.needReplaceCount;this.lastFirstRowIdxOnScrn=this.mcStatus.lastFirstRowIdxOnScrn;this.dockedHeaderStatus=this.mcStatus.dockedHeaderStatus;this.lastScrollPosition=this.mcStatus.lastScrollPosition;}if(this.model.prevSelected){this.prevSelected=this.model.prevSelected;}if(this.model.unselectedRemainCells){this.unselectedRemainCells=this.model.unselectedRemainCells;}if(this.model.ctlMatrixs){var Cb=this.colInfos;for(var CX=0;CX<Cb.length;CX++){var Ca=this.model.ctlMatrixs[CX];if(Ca&&Cb[CX].rowH){Cb[CX].rowH.ctlMatrix=Ca;}}var Cb=this.colInfos;for(var CX=0;CX<Cb.length;CX++){var CZ=Cb[CX].rowH,Ca=CZ&&CZ.ctlMatrix,CV=CZ&&this.model.ctlMatrixs&&this.model.ctlMatrixs[CZ.id];if(Ca&&CV){for(var CW=0;CW<CZ.es.length;CW++){var Cc=CZ.es[CW].id;if(CV[Cc]){Ca.selectedIdx[CW]=true;}}}}}},storeMCStatus:function AL(Cb){if(this.startCnt<0){return ;}this.mcStatus={};if(this.isTreeMode){this.mcStatus.expandToLevel=this.expandToLevel||-1;this.mcStatus.expandedEntryArray=[];if(this.mcStatus.expandToLevel<0){this.addTreeNodeToExpanedEntry(this.tree.childrenTreeNodeList,[]);}this.mcStatus.currSelectedObj=[];for(var CY=0;CY<this.currSelectedObj.length;CY++){var Ce=this.currSelectedObj[CY];this.mcStatus.currSelectedObj[CY]=Ce&&Ce.id;}if(!Cb){this.mcStatus.dHRowIdxList=[];var Cd=this.dockedHeaderRows;for(var CY=0;CY<Cd.length;CY++){this.mcStatus.dHRowIdxList.push(Cd[CY].rowIdx);}this.mcStatus.dHReplaceRowIdxList=[];var Cd=this.dockedHeaderReplaceRows;for(var CY=0;CY<Cd.length;CY++){this.mcStatus.dHReplaceRowIdxList.push(Cd[CY].rowIdx);}this.mcStatus.replacingStartRowIdx=this.replacingStartRowIdx;this.mcStatus.needReplaceCount=this.needReplaceCount;this.mcStatus.lastFirstRowIdxOnScrn=this.lastFirstRowIdxOnScrn;this.mcStatus.dockedHeaderStatus=this.dockedHeaderStatus;this.mcStatus.lastScrollPosition=this.lastScrollPosition;}}else{if(this.model.processed){this.model.prevSelected=this.prevSelected;this.model.unselectedRemainCells=this.unselectedRemainCells;this.model.ctlMatrixs={};var CV=this.colInfos;for(var CY=0;CY<CV.length;CY++){var Cg=CV[CY].rowH,CZ=Cg&&Cg.ctlMatrix;if(CZ){var Cc={};for(var CX in CZ.selectedIdx){var CW=Cg.es[CX].id;Cc[CW]=true;}this.model.ctlMatrixs[Cg.id]=Cc;}}}}if(!Cb){this.mcStatus.startCnt=this.startCnt;this.mcStatus.endCnt=this.endCnt;this.mcStatus.firstRowIdxOnScrn=this.firstRowIdxOnScrn;var Ca=this.getChartWithScrollBar();this.mcStatus.scrollTo=Ca&&Ca._scroller.origin||{x:0,y:0};}if(this.enableSmoothScroll&&this._scroller&&this._scroller.origin){this.mcStatus.hScrollPos=this._scroller.origin.x/this.rightWidth;}if(this.controller&&this.controller.view&&this.controller.view.model){if(!this.controller.view.model.mcStatus){this.controller.view.model.mcStatus={};}var Cf=this.getModelK();if(this.controller.view.model.mcStatus){this.controller.view.model.mcStatus[Cf]=this.mcStatus;}}if(this.sortKeyIdx!=undefined){this.mcStatus.sortKeyIdx=this.sortKeyIdx;this.mcStatus.sortOrder=this.colInfos[this.sortKeyIdx].sortOrder;}},addTreeNodeToExpanedEntry:function Bh(CW,CX){var Cb=this.mcStatus.expandedEntryArray;var Ca=CW.length;for(var CV=0;CV<Ca;CV++){var CZ=CW[CV];if(CZ.needExpand){var CY=Ai.clone(CX);CY.push({element:CZ.id});Cb.push(CY);this.addTreeNodeToExpanedEntry(CZ.childrenTreeNodeList,CY);}}},unrender:function I(CV,CX){if(!this.mcStatus){this.storeMCStatus(CX);}this.destroyChartWidget();if(this._scroller){delete this._scroller._scrollBarEls;}var CW=this._touchListener;if(CW){mstrmojo.touchManager.detachEventListener(CW);delete this._touchListener;}if(this._infoWClosedListener){mstrmojo.touchManager.detachEventListener(this._infoWClosedListener);delete this._infoWClosedListener;}this.destroyChartWidget();if(this._leftChart){this._leftChart.destroy();delete this._leftChart;}if(this._rightChart){this._rightChart.destroy();delete this._rightChart;}if(this._textTooltip){this._textTooltip.destroy();delete this._textTooltip;}if(this._tooltip){this._tooltip.destroy();delete this._tooltip;}if(this._super){this._super(CV);}},refresh:function AT(){this.unrender(null,true);this.render();},reRender:function N(){this.unrender();if(this.model){this.initFromVisProps(this.model.vp);}this.render();},initScroller:function d(CV){if(this._super){this._super(CV);}if(this.enableSmoothScroll){this._scrollDoneListener=this._scroller.attachEventListener("scrollDone",this.id,function(){this.updateScrollBarPosition();var CW=this._scroller;if(CW){CW.toggleScrollBars(false);}});this._scrollMovedListener=this._scroller.attachEventListener("scrollMoved",this.id,function(CW){if(this.sortKeyIdx>=this.attrColumnCount){this.utils.translateCSS(-CW.x,-CW.y,false,this.sortArrowCanvas);}});}},updateScrollBarPosition:function Al(){var CV=this._rightChart&&this._rightChart._scroller;var CW=CV&&CV._scrollBarEls&&CV._scrollBarEls.y;if(CW){CW.style.left=(this._scroller.origin.x+this.getWidth()-this.leftWidth-9)+"px";}CV=this._scroller;CW=CV&&CV._scrollBarEls&&CV._scrollBarEls.x;if(CW){CW.style.top=(this.chartTableHeight+this._leftChart.headerTableOffsetHeight-9)+"px";}},onScrollDone:function AA(CV){var CW=this.getChartWithScrollBar()._scroller;CW.toggleScrollBars(false);if(this.partialRender){this.firstRowIdxOnScrn=parseInt(this.startCnt+CV.y/this.rowOffsetHeight);if((this.firstRowIdxOnScrn-this.startCnt<=this.pageSize&&this.firstRowIdxOnScrn>=this.pageSize)||this.endCnt-1-this.firstRowIdxOnScrn<=this.pageSize&&this.endCnt!=this.rows.length){this.reRenderChartWhenScrollDone(CW.origin);Aq.call(this);}}},onScrollMoved:function AS(CV){this.hideChartTooltip();if(this.isTreeMode){if(Bu(CV.y)){this._leftChart.hideDockedHeader();if(this._rightChart){this._rightChart.hideDockedHeader();}}else{this._leftChart.showDockedHeader();if(this._rightChart){this._rightChart.showDockedHeader();}}var CY=this.rowOffsetHeight;this.firstRowIdxOnScrn=this.startCnt+parseInt(CV.y/CY);var CX=CV.y;var CW=this.lastScrollPosition.y;if(CW>CX){while((CW-=CY)>CX){this.updateDockedHeadersByOneRow(CW,true);}this.updateDockedHeadersByOneRow(CX);}else{while((CW+=CY)<CX){this.updateDockedHeadersByOneRow(CW,true);}this.updateDockedHeadersByOneRow(CX);}}},initDockedHeaders:function A2(){this._leftChart.initDHs();if(this._rightChart){this._rightChart.initDHs();}this.clearDockedHeader();var CX=0;var CV=[];var CW=B6.call(this,CX);while(CW&&CW.treeNode.needExpand){CV.push(CX);CW=B6.call(this,++CX);}this.addRowsToDH(CV);this.lastFirstRowIdxOnScrn=CX;this.lastScrollPosition={x:0,y:0};this.dockedHeaderStatus=k;},clearDockedHeader:function BG(){this.removeRowsFromDH(this.dockedHeaderRows.length);this.removeChildrenForDHReplaceTable();},reBuildDH:function AY(CV){this.clearDockedHeader();var Cd=this.rows;var Cc=this.firstRowIdxOnScrn+CV;if(Cc<0||Cc>=Cd.length){return ;}var CY=Cd[Cc].treeNode;if(CY.level>CV){var CW=[];for(var CX=0;CX<=CV;CX++){var Cb=A7(this.tree,CY.treePath,CX);CW.push(Cb.rowIdx);}this.addRowsToDH(CW);}else{if(CY.level==CV){var CW=[];for(var CX=0;CX<CV;CX++){var Cb=A7(this.tree,CY.treePath,CX);CW.push(Cb.rowIdx);}CW.push(CY.rowIdx);this.addRowsToDH(CW);}else{if(CY.level<CV){var Ca=V(this.tree,CY.treePath);while(!Ca){Cc--;var CY=Cd[Cc].treeNode;Ca=V(this.tree,CY.treePath);}var CW=[];for(var CX=0;CX<CY.level;CX++){var Cb=A7(this.tree,CY.treePath,CX);CW.push(Cb.rowIdx);}CW.push(Ca.rowIdx);var CZ=CY.rowIdx-this.firstRowIdxOnScrn;Cc--;var CY=Cd[Cc].treeNode;for(var CX=CW.length;CX<CZ;CX++){var Cb=A7(this.tree,CY.treePath,CX);CW.push(Cb.rowIdx);}this.addRowsToDH(CW);}}}this.dockedHeaderStatus=k;},updateDockedHeadersByOneRow:function BD(CY,Ch){var Cb=this.getChartWithScrollBar()._scroller;if(!Cb.vScroll||CY>Cb.offset.y.end||CY<0){return ;}var Ce;var Ca=j.call(this,CY);this.firstRowIdxOnScrn=Ca.rowIdx-this.dockedHeaderRows.length;if(this.dockedHeaderStatus==AZ){var Ci=this.firstRowIdxOnScrn-this.replacingStartRowIdx;if(Ci>=0){if(Ci<this.needReplaceCount){Ce=this.dockedHeaderRows[this.dockedHeaderRows.length-1];if(this.firstRowIdxOnScrn>this.lastFirstRowIdxOnScrn){this.removeChildrenForDHReplaceTable();this.shiftDockedHeaderWithRow(0,Ch);if(Ce){this.removeRowsFromDH(1,true);}}else{if(this.firstRowIdxOnScrn<this.lastFirstRowIdxOnScrn){this.dockedHeaderStatus=k;this.moveRowFromDHRplcTableToDH();Ca=j.call(this,CY);}}this.shiftDockedHeaderWithRow(-Ca.pastOffset,Ch);}else{this.dockedHeaderStatus=k;this.removeChildrenForDHReplaceTable();this.shiftDockedHeaderWithRow(0,Ch);Ca=j.call(this,CY);}}else{this.dockedHeaderStatus=k;this.moveRowFromDHRplcTableToDH();Ca=j.call(this,CY);}}if(this.dockedHeaderStatus==k&&Ca.treeNode){var Cc=Ca.treeNode.level;Ce=this.dockedHeaderRows[this.dockedHeaderRows.length-1];var CW=Ce?Ce.treeNode.level:-1;if(CY>this.lastScrollPosition.y){if(Cc<=CW){if(Ce){this.removeRowsFromDH(1,true);}this.replacingRowTreeNode=Ca.treeNode;this.replacingStartRowIdx=this.firstRowIdxOnScrn;this.needReplaceCount=CW-Cc+1;this.dockedHeaderStatus=AZ;this.shiftDockedHeaderWithRow(-Ca.pastOffset,Ch);}else{if(Cc>CW){var CV=Ca.rowIdx;var CZ=[];var CX=Ca.treeNode;while(CX.needExpand){CZ.push(CV);CX=B6.call(this,++CV).treeNode;}this.addRowsToDH(CZ);}}}else{if(CY<this.lastScrollPosition.y){if(Cc==CW){var Cd=Ca.treeNode.preSibling;var CV=Ca.rowIdx;var Cf=0;while(!Cd){Cf++;Ca=B6.call(this,--CV);Cd=Ca&&Ca.treeNode.preSibling;}this.removeRowsFromDH(Cf);Ce=this.dockedHeaderRows[this.dockedHeaderRows.length-1];if(Ce){this.removeRowsFromDH(1);}if(Cd.needExpand){var CZ=[Cd.rowIdx];this.addRowsToDH(CZ,true);}else{}this.replacingStartRowIdx=this.firstRowIdxOnScrn;this.replacingRowTreeNode=Cd;this.needReplaceCount=1;this.dockedHeaderStatus=AZ;var Cg=CY%this.rowOffsetHeight;this.shiftDockedHeaderWithRow(-Cg,Ch);}else{if(Cc>CW+1){var Cd=A7(this.tree,Ca.treeNode.treePath,CW+1);var CZ=[Cd.rowIdx];this.addRowsToDH(CZ,true);this.replacingStartRowIdx=this.firstRowIdxOnScrn;this.replacingRowTreeNode=Cd;this.needReplaceCount=Cc-CW-1;this.dockedHeaderStatus=AZ;this.shiftDockedHeaderWithRow(-Ca.pastOffset,Ch);}}}}}this.lastScrollPosition.y=CY;this.lastFirstRowIdxOnScrn=this.firstRowIdxOnScrn;},checkParentBeforeAddToDH:function Bv(CV){var CY=this.rows[CV];var CX=CY&&CY.treeNode;var CW=this.dockedHeaderRows.length;if(CW!=CX.level){}},addRowsToDH:function AX(CW,Ca){var Cb=this.rows;var CV=CW.length;if(CV<=0){return ;}var CY=null;if(Ca){CY=this.dockedHeaderReplaceRows;}else{CY=this.dockedHeaderRows;}for(var CX=0;CX<CV;CX++){var CZ=CW[CX];var Cc=Cb[CZ];CY.push({rowIdx:CZ,treeNode:Cc.treeNode,rowRef:this.popFromReusePool()});}this._leftChart.addRowsToDH(CV,Ca);if(this._rightChart){this._rightChart.addRowsToDH(CV,Ca);}},removeRowsFromDH:function AN(CW,CV){if(this._leftChart){this._leftChart.removeRowsFromDH(CW,CV);}if(this._rightChart){this._rightChart.removeRowsFromDH(CW,CV);}if(CW>this.dockedHeaderRows.length){CW=this.dockedHeaderRows.length;}for(;CW>0;CW--){var CX=this.dockedHeaderRows.pop();if(!CV){this.pushRowRefToReusePool(CX);}else{this.dockedHeaderReplaceRows.push(CX);}}},moveRowFromDHRplcTableToDH:function BB(){this._leftChart.moveRowFromDHRplcTableToDH();if(this._rightChart){this._rightChart.moveRowFromDHRplcTableToDH();}this.shiftDockedHeaderWithRow(0);var CV=this.dockedHeaderReplaceRows.pop();if(CV){this.dockedHeaderRows.push(CV);}},removeChildrenForDHReplaceTable:function M(){if(this._leftChart){this._leftChart.removeChildrenForDHReplaceTable();}if(this._rightChart){this._rightChart.removeChildrenForDHReplaceTable();}var CV=this.dockedHeaderReplaceRows.length;for(;CV>0;CV--){var CW=this.dockedHeaderReplaceRows.pop();this.pushRowRefToReusePool(CW);}},pushRowRefToReusePool:function x(CW){if(!CW){return ;}var CV=CW.rowRef;this.rowsReusePool.push(CV);CW.rowRef={};},shiftDockedHeaderWithRow:function BI(CW,CV){if(CV){return ;}if(this._leftChart){this.utils.translateCSS(0,CW,0,this._leftChart.dockedHeaderReplaceDiv.firstChild);}if(this._rightChart){this.utils.translateCSS(0,CW,0,this._rightChart.dockedHeaderReplaceDiv.firstChild);}},init:function CH(CV){this._super(CV);this.rowsReusePool=[];this.dockedHeaderRows=[];this.dockedHeaderReplaceRows=[];this.sortID=0;},initFromVisProps:function(CW){Ah.call(this);var Cb=CW?CW:{},CX=this.sparklineProps,CY=this.barProps,CZ=this.bulletProps,CV=this.otherProps;this.isTreeMode=Ay(Cb.itd);if(Cb.lsh){CX.mbShow=(Cb.lsh==="true");}if(Cb.lap){CX.mbAllPoints=(Cb.lap==="true");}if(Cb.lep){CX.mbEndPoints=(Cb.lep==="true");}if(Cb.lrl){CX.mbRefLine=(Cb.lrl==="true");}if(Cb.lra){CX.mbRefArea=(Cb.lra==="true");}if(Cb.lmsh){CX.mbAssMetric=(Cb.lmsh==="true");}if(Cb.let){CX.mbShowTooltip=(Cb.let==="true");}if(Cb.llsc){CX.mwSeriesLineCol=Bn(Cb.llsc);}if(Cb.lrlc){CX.mwRefLineCol=Bn(Cb.lrlc);}if(Cb.lrac){CX.mwRefAreaCol=Bn(Cb.lrac);}if(Cb.lh){CX.mstrHeader=Cb.lh;}if(Cb.lam){CX.mstrAssMetric=Cb.lam;}if(Cb.bsg){CY.mbShow=(Cb.bsg==="true");}if(Cb.bl){CY.mbShowLegend=(Cb.bl==="true");}if(Cb.brl){CY.mbRefLine=(Cb.brl==="true");}if(Cb.bet){CY.mbShowTooltip=(Cb.bet==="true");}if(Cb.bpv){CY.mwPosCol=Bn(Cb.bpv);}if(Cb.bnv){CY.mwNegCol=Bn(Cb.bnv);}if(Cb.brlc){CY.mwRefLineCol=Bn(Cb.brlc);}if(Cb.bh){CY.mstrHeader=Cb.bh;}if(Cb.gsh){CZ.mbShow=(Cb.gsh==="true");}if(Cb.grl){CZ.mbRefLine=(Cb.grl==="true");}if(Cb.gra){CZ.mbRefBands=(Cb.gra==="true");}if(Cb.gl){CZ.mbShowLegend=(Cb.gl==="true");}if(Cb.gmsh){CZ.mbAssMetric=(Cb.gmsh==="true");}if(Cb.gia){CZ.mbInvertAxis=(Cb.gia==="true");}if(Cb.get){CZ.mbShowTooltip=(Cb.get==="true");}if(Cb.gmm){CZ.mfMinValue=parseFloat(Cb.gmm);}if(Cb.ggc){CZ.mwPosCol=Bn(Cb.ggc);}if(Cb.gnv){CZ.mwNegCol=Bn(Cb.gnv);}if(Cb.grlc){CZ.mwRefLineCol=Bn(Cb.grlc);}if(Cb.gpc){CZ.mwBand1=Bn(Cb.gpc);}if(Cb.grc){CZ.mwBand2=Bn(Cb.grc);}if(Cb.gsc){CZ.mwBand3=Bn(Cb.gsc);}if(Cb.gh){CZ.mstrHeader=Cb.gh;}if(Cb.gtam){CZ.mstrAssMetric=Cb.gtam;}if(Cb.glt){CZ.mstrBand1=Cb.glt;}if(Cb.gmt){CZ.mstrBand2=Cb.gmt;}if(Cb.ght){CZ.mstrBand3=Cb.ght;}if(Cb.wa){var Ca=parseFloat(Cb.wa);if(Cb.wa.indexOf("%")){Ca/=100;}CV.mfBkgOpacity=Ca;}if(Cb.metkpi){CV.mnMetricsPerKPI=parseInt(Cb.metkpi);}if(Cb.hch){CV.mbHideColHeaders=(Cb.hch==="true");}if(Cb.htc){CV.mbHideTextColumns=(Cb.htc==="true");}if(Cb.ll){CV.mbLockLayout=(Cb.ll==="true");}if(Cb.gam){CV.mbShowForHiddenGraphs=(Cb.gam==="true");}if(Cb.igf){CV.mbInheritFromGridGraph=(Cb.igf==="true");}if(Cb.scm){CV.mbInSingleColumnMode=(Cb.scm==="true");}if(Cb.cid){CV.mpColumnIDs=Cb.cid.split(",");}if(Cb.tcid){CV.mpColumnIDsInTreeMode=Cb.tcid.split(",");}if(Cb.co){CV.mpColumnPositions=Cb.co.split(",");}if(Cb.sc){CV.mpSortKey=Cb.sc;}if(Cb.so){CV.mbSortDescend=(Cb.so!=="false");}if(Cb.rh){CV.mRowHeight=parseFloat(Cb.rh);}CV.mRowHeight=CV.mRowHeight>27?CV.mRowHeight:27;AF.call(this);},preBuildRendering:function S(){if(this._super){this._super();}var CV=this.model;if(!CV){CV.err=window.getLocaleString?window.getLocaleString("NO_MODEL_PROVIDED","No model provided"):mstrmojo.desc(8426,"No model provided");return ;}this.isTablet=!!mstrApp.isTablet();this.isAndroidTab=CB.isAndroid?this.isTablet:false;var CY=CV.vp||{};var CX=this.controller&&(this.controller instanceof mstrmojo.android.controllers.XtabController);var CW=this.isFullScreenWidget||CX;this.enableSmoothScroll=(!this.isTablet&&CW)?true:Ay(CY.ss);if(CY.mcs){this.metricColumnsSpacing=parseInt(CY.mcs);}else{this.metricColumnsSpacing=!this.isTablet?(mstrApp.isLandscape()?CA:Bc):-1;}if(this.enableSmoothScroll){this.leftWidth=this.getWidth()/3;this.rightWidth=this.getWidth()/3*2;}else{this.leftWidth=this.getWidth();this.rightWidth=0;this.scrollerConfig.hScroll=false;}},buildRows:function BS(){if(this.rowsNeedRebuild){if(this.isTreeMode){this.rows=E.call(this);}else{Aa.call(this);}this.rowsNeedRebuild=false;}},pushToReusePool:function CC(CY,Ca){var CV=CY!=undefined?CY:this.startCnt;var CX=Ca!=undefined?Ca:this.endCnt;var CZ=null;for(var CW=CV;CW<CX;CW++){CZ=this.rows[CW];this.rowsReusePool.push(CZ.rowRef);CZ.rowRef={};}},popFromReusePool:function Az(){var CV=this.rowsReusePool.pop();return CV||{};},reRenderChart:function B2(CX,CW,CV){this.pushToReusePool();this.buildRows();var Ca=this.rowOffsetHeight;if(!CW){CW=0;}this.firstRowIdxOnScrn=parseInt(this.startCnt+CX.y/Ca)-CW;this.getCurrRenderRowCount();if(CV==undefined){CV=CX.y%Ca;}CX.y=(this.firstRowIdxOnScrn-this.startCnt)*Ca+CV;this.lastScrollPosition.y=CX.y;this.lastFirstRowIdxOnScrn=this.firstRowIdxOnScrn;var CZ=this.rows;for(var CY=this.startCnt;CY<this.endCnt;CY++){CZ[CY].rowRef=this.popFromReusePool();}if(!this.enableSmoothScroll){this._leftChart.reRenderRows(CX);}else{this._leftChart.reRenderRows(CX);this._rightChart.reRenderRows(CX);}},reRenderChartWhenScrollDone:function CE(Cb){var CX=this.startCnt;var Cc=this.endCnt;var CV=this.rowOffsetHeight;this.firstRowIdxOnScrn=parseInt(this.startCnt+Cb.y/CV);this.getCurrRenderRowCount();var Cd,Ca,CZ,CW;if(this.startCnt<Cc&&this.startCnt>CX){Cd=CX;Ca=this.startCnt;firstRowRemain=this.startCnt;lastRowRemain=Cc;CZ=Cc;CW=this.endCnt;}else{if(CX<this.endCnt&&CX>this.startCnt){Cd=this.endCnt;Ca=Cc;firstRowRemain=CX;lastRowRemain=this.endCnt;CZ=this.startCnt;CW=CX;}else{Cd=CX;Ca=Cc;firstRowRemain=0;lastRowRemain=0;CZ=this.startCnt;CW=this.endCnt;}}this.pushToReusePool(Cd,Ca);Cb.y=(this.firstRowIdxOnScrn-this.startCnt)*CV+Cb.y%CV;this.lastScrollPosition.y=Cb.y;this.lastFirstRowIdxOnScrn=this.firstRowIdxOnScrn;var Ce=this.rows;for(var CY=CZ;CY<CW;CY++){Ce[CY].rowRef=this.popFromReusePool();}if(!this.enableSmoothScroll){this._leftChart.reRenderRows(Cb,firstRowRemain,lastRowRemain,CZ,CW);}else{this._leftChart.reRenderRows(Cb,firstRowRemain,lastRowRemain,CZ,CW);this._rightChart.reRenderRows(Cb,firstRowRemain,lastRowRemain,CZ,CW);}},reRenderChartWithAnchor:function BH(CV,CZ){this.pushToReusePool();this.buildRows();var Ca=this.rowOffsetHeight;var CX=-1;for(var CW=0;CW<this.rows.length;CW++){if(this.rows[CW].treeNode.treePath==CV.treePath){CX=CW;break;}}this.firstRowIdxOnScrn=CX-CZ;if(this.firstRowIdxOnScrn<0){this.firstRowIdxOnScrn=0;}this.getCurrRenderRowCount();scrollTo.y=(this.firstRowIdxOnScrn-this.startCnt)*Ca;this.lastScrollPosition.y=scrollTo.y;this.lastFirstRowIdxOnScrn=this.firstRowIdxOnScrn;var CY=this.rows;for(var CW=this.startCnt;CW<this.endCnt;CW++){CY[CW].rowRef=this.popFromReusePool();}if(!this.enableSmoothScroll){this._leftChart.reRenderRows(scrollTo);}else{this._leftChart.reRenderRows(scrollTo);this._rightChart.reRenderRows(scrollTo);}},getCurrRenderRowCount:function CU(){var CV=this.pageSize*Bo;if(this.rows.length<=CV){this.partialRender=false;this.startCnt=0;this.endCnt=this.rows.length;}else{this.partialRender=true;this.startCnt=Math.round(this.firstRowIdxOnScrn-this.pageSize*(Bo-1)/2);if(this.startCnt<0){this.startCnt=0;}this.endCnt=this.startCnt+CV;if(this.endCnt>this.rows.length){this.endCnt=this.rows.length;}}},getChartWithScrollBar:function(){if(this.enableSmoothScroll){return this._rightChart;}else{return this._leftChart;}},updateWindowRatio:function A5(){var CW=this.getChartWithScrollBar(),CV=CW._scroller;CV.chartTableRenderRatio=(this.endCnt-this.startCnt)/this.rows.length;CV.topUnRenderedRatio=this.startCnt/this.rows.length;CV.updateScrollBars();},initModel:function Bq(){this.prevSelected={mrow:-2,mcol:-1};if(this.isTreeMode){U.call(this);}this.treeColumnIdx=-1;this.rowsNeedRebuild=true;this.rows=[];this.unselectedRemainCells=[];this.errorMsg.style.display="none";this.isKPI=false;this.showMinLabel=false;AQ=[];Ba={};An={};C=[];CT=[];CR=1;CG=0;p=0;BR=0;this.infoWindowsShown={};},renderMicroChart:function Bg(){var Ca=this;this.buildRows();AO.call(this);Ca.renderLegend();Ca.getCurrRenderRowCount();Ca.restoreMCStatus();if(!Ca.enableSmoothScroll){Ca.itemsContainerNode.style.display="none";var CZ={placeholder:Ca.leftChart,colInfos:Ca.colInfos,theme:Ca.theme,isTreeMode:Ca.isTreeMode,showMinLabel:Ca.showMinLabel,width:Ca.leftWidth+"px",height:(Ca.getHeight()-Ca.legendHeight)+"px",textSpan:Ca.textSpan,textCanvas:Ca.textCanvas,headerCssClass:Ca.headerCssClass,valueCssClass:Ca.valueCssClass,isAndroidTab:Ca.isAndroidTab,widget:Ca,treeColumnIdx:Ca.treeColumnIdx,backgroundColor:Ca.backgroundColor,domRefName:P,showScrollbars:true};var CX=new mstrmojo.VisMicroChartTable(CZ);CX.render();Ca._leftChart=CX;CX.parent=Ca;Ca.replaceScrollerUpdate(CX);}else{var CZ={placeholder:Ca.leftChart,colInfos:Ca.colInfos.slice(0,this.attrColumnCount),theme:Ca.theme,isTreeMode:Ca.isTreeMode,showMinLabel:Ca.showMinLabel,width:Ca.leftWidth+"px",height:(Ca.getHeight()-Ca.legendHeight)+"px",textSpan:Ca.textSpan,textCanvas:Ca.textCanvas,headerCssClass:Ca.headerCssClass,valueCssClass:Ca.valueCssClass,isAndroidTab:Ca.isAndroidTab,widget:Ca,treeColumnIdx:Ca.treeColumnIdx,backgroundColor:Ca.backgroundColor,domRefName:P,showScrollbars:false,zIndex:1};var CX=new mstrmojo.VisMicroChartTable(CZ);CX.render();Ca._leftChart=CX;CX.parent=Ca;Ca.leftChart=CX.domNode;var CZ={placeholder:Ca.rightChart,colInfos:Ca.colInfos.slice(this.attrColumnCount),theme:Ca.theme,isTreeMode:Ca.isTreeMode,showMinLabel:Ca.showMinLabel,width:Ca.rightWidth+"px",height:(Ca.getHeight()-Ca.legendHeight)+"px",textSpan:Ca.textSpan,textCanvas:Ca.textCanvas,headerCssClass:Ca.headerCssClass,valueCssClass:Ca.valueCssClass,isAndroidTab:Ca.isAndroidTab,widget:Ca,treeColumnIdx:Ca.treeColumnIdx,backgroundColor:Ca.backgroundColor,domRefName:BX,showScrollbars:true};var CV=new mstrmojo.VisMicroChartTable(CZ);CV.render();Ca._rightChart=CV;CV.parent=Ca;Ca.rightChart=CV.domNode;Ca.replaceScrollerUpdate(CV);if(this.theme==G||this.theme==Ab){Ca.dropShadowDiv.style.backgroundImage="-webkit-gradient(linear, left top, right top, color-stop(0, rgba(0,0,0,0.25)), color-stop(1, rgba(0,0,0,0)))";}else{Ca.dropShadowDiv.style.backgroundImage="-webkit-gradient(linear, left top, right top, color-stop(0, rgba(0,0,0,0.5)), color-stop(1, rgba(0,0,0,0)))";}CV.addSyncScroller(CX);CX.addSyncScroller(CV);var CW=Math.max(Ca._leftChart.headerTableOffsetHeight,Ca._rightChart.headerTableOffsetHeight);Ca._leftChart.headerTable.style.height=CW+"px";Ca._rightChart.headerTable.style.height=CW+"px";Ca._leftChart.updateHeaderTableOffsetH();Ca._rightChart.updateHeaderTableOffsetH();Ca.scrollerConfig.scrollEl=Ca.rightChart;Ca.updateScroller();var CY=null;if(this.mcStatus&&this.mcStatus.hScrollPos!=undefined){var Cc=Math.min(this.mcStatus.hScrollPos*this.rightWidth,this.rightWidth+this.leftWidth-this.getWidth());CY=this._scroller.origin={x:Cc,y:0};}AW.call(Ca,CY);}Ca.rowOffsetHeight=((Ca.otherProps.mbHideTextColumns&&this.enableSmoothScroll)?CV.rowOffsetHeight:CX.rowOffsetHeight)||30;if(Ca.isTreeMode){if(Ca.mcStatus&&Ca.mcStatus.dHRowIdxList){Ca._leftChart.initDHs();if(Ca._rightChart){Ca._rightChart.initDHs();}Ca.addRowsToDH(Ca.mcStatus.dHRowIdxList);if(Ca.mcStatus.dHReplaceRowIdxList.length>0){Ca.addRowsToDH(Ca.mcStatus.dHReplaceRowIdxList,true);var Cb=Ca.mcStatus.scrollTo.y%Ca.rowOffsetHeight;Ca.shiftDockedHeaderWithRow(-Cb);}}else{Ca.initDockedHeaders();}}Ca.getDefaultHighlightRow();Ca.updateSelectedStatus(Ca.tree);Ca.updateHighlightForCurrRenderRows();Ca.chartTableMaxHeight=Ca.getHeight()-Ca._leftChart.headerTableOffsetHeight;if(Ca.legendDis){Ca.chartTableMaxHeight-=Ca.legendHeight;}Ca.pageSize=Math.max(Math.min(parseInt(Ca.chartTableMaxHeight/Ca.rowOffsetHeight)+1,20),Ca.minPageSize);Aq.call(Ca);},ongridDataChange:function A8(CV){this.model=this.gridData;},postBuildRendering:function B1(){console.log("in postb");var Cb=this,CX=Cb.model;var Ca=CX.err||CX.eg;if(Ca===""){return ;}else{if(Ca){Cb.renderErrorMessage(Ca);return ;}}if(Cb.controller&&Cb.controller.view&&Cb.controller.view.model&&Cb.controller.view.model.mcStatus){if(!Cb.mcStatus&&Cb.controller.view.model.mcStatus[this.getModelK()]){Cb.mcStatus=Cb.controller.view.model.mcStatus[this.getModelK()];console.log("found stored mcStatus with key:"+this.getModelK());}}Cb.highlightEntireRow=Cb.isTreeMode||Cb.isAllAttrSelectable;AH.call(Cb);L.call(Cb);Ca=CX.err||CX.eg;if(Ca){Cb.renderErrorMessage(Ca);return ;}if(this._super){this._super();}if(this.otherProps.mbInheritFromGridGraph){this.selectedClass="sc_"+this.getModelK();}else{this.selectedClass="";}this.minPageSize=Math.ceil((this.getHeight()/this.otherProps.mRowHeight)*3/Bo);this.pageSize=this.minPageSize;var Cc={success:function(Ce){var Cd=Cb.getModelK();Cb.model=Ce;Cb.model.k=Cd;Cb.rowsNeedRebuild=true;L.call(Cb);Cb.renderMicroChart();Cb.toggleSortOrderAndArrow(Cb.sortKeyIdx,Cb.sortOrder);}};if(this.enableSortOnMobile){var CW=this.otherProps;if(this.mcStatus&&this.mcStatus.sortKeyIdx!=undefined){this.sortKeyIdx=this.mcStatus.sortKeyIdx;this.sortOrder=this.mcStatus.sortOrder;this.renderMicroChart();this.toggleSortOrderAndArrow(this.sortKeyIdx,this.sortOrder);}else{if(CW.mpSortKey&&CW.mpSortKey.length>0){var CZ=Av.find(this.colInfos,"title",CW.mpSortKey);if(CZ>-1){this.sortKeyIdx=CZ;this.sortOrder=CW.mbSortDescend?AI.DESCENDING:AI.ASCENDING;this.renderMicroChart();this.toggleSortOrderAndArrow(this.sortKeyIdx,this.sortOrder);}else{this.renderMicroChart();}}else{this.renderMicroChart();}}}else{this.renderMicroChart();}Cb.removeMCStatus();var CY=Cb.xtabModel,CV=(CY&&CY.docModel);if(CV){Cb._infoWClosedListener=Cb.xtabModel.docModel.attachEventListener("infoWindowClosed",this.id,function(Cd){var Ce=Cd.psKey;if(!Cb.hasNonifwTarget&&Cb.infoWindowsShown&&Cb.infoWindowsShown[Ce]){window.setTimeout(function(){Aw.call(Cb);},10);}Cb.infoWindowsShown[Ce]=false;});}this.renderTextTooltip();this.renderVisTooltip();},renderTextTooltip:function As(){var CV={placeholder:this.textTooltip,boundary:this.domNode};this._textTooltip=new mstrmojo.VisTextTooltip(CV);this._textTooltip.render();this._textTooltip.toggle(false);},renderVisTooltip:function BL(){var CV={placeholder:this.tooltip,cssClass:"timeseries-tooltip mstrmojo-MicroChart-tooltip"};this._tooltip=new mstrmojo.VisMicroChartTooltip(CV);this._tooltip.render();this._tooltip.toggle(false);},replaceScrollerUpdate:function X(CW){CW._scroller.updateScrollBars=function CV(CZ,Ce){var Cg=this.scrollEl;if(!this.showScrollbars||!Cg){return ;}var Cf=this._scrollBarEls;var CY=this.chartTableRenderRatio||1;var Cc=this.topUnRenderedRatio||0;if(!Cf){var Cd=this;Cf=this._scrollBarEls={x:"hScroll",y:"vScroll"};BT(Cf,function(Ch,Ci){if(Cd[Ch]){var Cj=document.createElement("div");Cj.className="mstrmojo-touch-scrollBar "+Ci+"Axis";(Ce||Cg.parentNode).appendChild(Cj);Cf[Ci]=Cj;}else{delete Cf[Ci];}});}if(!CZ){var Cb=this.scrollEl.parentNode;CZ={top:0,right:Cb.clientWidth,bottom:Cb.clientHeight,left:0};}var Ca=9,CX={x:{left:CZ.left,top:CZ.bottom-Ca,x:CZ.right-CZ.left,d:"Width"},y:{left:CZ.right-Ca,top:CZ.top,x:CZ.bottom-CZ.top,d:"Height"}};var Cd=this;BT(Cf,function(Cy,Ci){var Cw=Cy.style,Cx=CX[Ci],Cz=Cx.d,Cq=Cy.parentNode,Cr=Cx.x;var Cl=Cx.left,Cv=Cx.top+Cr*Cc,Co=Cr/Cg["offset"+Cz]*CY,Ck=Math.min(Math.round(Cr*Co),Cr);Cy.baseLeft=Cl;Cy.baseTop=Cv;Cy.ratio=Co;Cy.viewportSize=B5.round(Cr*CY);Cy.length=Ck;Cw.left=Cl+"px";Cw.top=Cv+"px";Cw[Cz.toLowerCase()]=Ck+"px";var Cp=(Ci==="x"),C2=Cp?"hScroll":"vScroll";if(Cd[C2]){var C4=Cd.origin,C5=C4&&C4[Ci]||0,Ch=Cy.viewportSize,C0=6/Ck,Cn=Cy["base"+((Cp)?"Left":"Top")],Cm=Cn+Ch-Ck,Cj=B5.round(Cn+(Co*C5));if(Cj<Cn){Cj=Cn-C5;Ck+=C5;}else{if(Cj>Cm){var C1=(C5-Cd.offset[Ci].end)*Co;Cj=B5.min(Cm+C1,Ch+Cn-6)-1;Ck-=C1;}}var Ct=0,Cs=[Ct,Ct,Ct],C3=[1,1,1],Cu=(Cp)?0:1;Cs[Cu]=(Cj-Cn);C3[Cu]=B5.min(B5.max(Ck/Cy.length,C0),1);CB.translate(Cy,Cs[0],Cs[1],Cs[2]," scale3d("+C3.join(",")+")");}});};},setElementDimension:function Au(CY,CX){var CV=0;var CW=mstrmojo.css.getComputedStyle(CY);if(CW.paddingLeft){CV+=parseFloat(CW.paddingLeft);}if(CW.paddingRight){CV+=parseFloat(CW.paddingRight);}CY.style.width=(CX-CV)+"px";},setColorByTheme:function Bk(){var CV=this.bulletProps;if(this.theme==A9){this.bandColor1="#494949";this.bandColor2="#595959";this.bandColor3="#727272";this.refLinePosColor="#FF781D";this.refLineNegColor="#FF781D";this.refLineWidth=2;this.blueBarPosColor="#00BDFF";this.blueBarNegColor="#00BDFF";this.legendTextColor="white";}else{if(this.theme==G){this.bandColor1="#A5A5A5";this.bandColor2="#B3B3B3";this.bandColor3="#BCBCBC";this.refLinePosColor="#FF781D";this.refLineNegColor="#FF781D";this.refLineWidth=2;this.blueBarPosColor="#00BDFF";this.blueBarNegColor="#00BDFF";}else{this.bandColor1=CV.mwBand1||"#999999";this.bandColor2=CV.mwBand2||"#BBBBBB";this.bandColor3=CV.mwBand3||"#DEDEDE";this.refLinePosColor=CV.mwRefLineCol;this.refLineNegColor=CV.mwRefLineCol;this.blueBarPosColor=CV.mwPosCol;this.blueBarNegColor=CV.mwNegCol;}}},renderLegend:function Be(){var CY=this.bulletProps;this.setColorByTheme();this.legendDis=this.showGauge&&this.bulletProps.mbShowLegend;if(this.legendDis){this.legend.className+=" "+this.valueCssClass;this.legend.style.display="block";this.legend.style.fontSize=Math.round(11*Bw)+"pt";this.setElementDimension(this.legend,this.getWidth());if(this.legendTextColor){this.legend.style.color=this.legendTextColor;}if(CY.mstrBand1){this.legendLowFont.innerHTML=CY.mstrBand1;}this.legendLowBand.style.backgroundColor=this.bandColor1;if(CY.mstrBand2){this.legendMidFont.innerHTML=CY.mstrBand2;}this.legendMidBand.style.backgroundColor=this.bandColor2;if(CY.mstrBand3){this.legendHighFont.innerHTML=CY.mstrBand3;}this.legendHighBand.style.backgroundColor=this.bandColor3;var CW=this.legendLow.offsetWidth,CX=this.legendMid.offsetWidth,CV=this.legendHigh.offsetWidth;if(CW+CX+CV>this.getWidth()){if(CW+CX>this.getWidth()){this.legendLow.style.width=this.width;if(CX+CV>this.getWidth()){this.legendMid.style.width=this.width;this.legendHigh.style.width=this.width;}else{this.legendMid.style.width=(this.getWidth()-CV)+"px";}}else{this.legendLow.style.width=(this.getWidth()-CX)+"px";this.legendHigh.style.width=this.width;}}this.legendHeight=this.legend.firstChild.offsetHeight;this.legend.style.height=this.legendHeight+"px";}else{this.legend.style.display="none";this.legendHeight=0;}},showChartTooltip:function Ac(CV,Ca){var CY=this;var CX=!this._tooltip.show;CV.showTooltip(Ca.pageX,Ca.pageY);var CZ=this._tooltip.show;this.tooltipShow=CZ;if(CX&&CZ){var CW=mstrmojo.touchManager;this._touchListener=CW.attachEventListener("touchesBegin",this.id,function(Cb){if(!H.call(CY,Cb.touch)){this.hideChartTooltip();}});}},hideChartTooltip:function Bj(){if(this._tooltip.show){var CX=document.getElementById("highLightCav"+this.domNode.id);if(CX){CX.id="";var CW=CX.getContext("2d");CW.clearRect(0,0,CX.width,CX.height);}this._tooltip.toggle(false);this.tooltipShow=false;if(this._touchListener){var CV=mstrmojo.touchManager;CV.detachEventListener(this._touchListener);delete this._touchListener;}}},touchSelectBegin:function AU(CX){if(CX.evt.ctrlKey){this.touchMultiBegin(CX);return ;}var Cb=this;this.hideChartTooltip();var CW=mstrmojo.dom.findAncestorByAttr(CX.target,"mcol",true,this.domNode);if(CW&&CW.node){var CY=CW.node.getAttribute("mrow");var Cd=CW.node.getAttribute("mcol");if(CY==-1){this.showTextTooltip(CW.node,Cd,true);}else{var Ca=CW.node.parentNode;var CV=null;if(Ca.getAttribute("rowType")==w){var CZ=CD(this.dockedHeaderRows,CY);if(CZ>=0){CV=this.dockedHeaderRows[CZ];}else{CZ=CD(this.dockedHeaderReplaceRows,CY);CV=this.dockedHeaderReplaceRows[CZ];}}else{CV=this.rows[CY];}var Ce=this.colInfos[Cd];if(Ce.type==BZ){var Cc=CV&&CV.rowRef&&CV.rowRef[Cd];if(Cc){this.showChartTooltip(Cc,CX);this.currSelectedWidget={mrow:CY,mcol:Cd};}}else{if(Ce.type==z||Ce.type==CK||Ce.type==D){this.showTextTooltip(CW.node,Cd);}}}}},showTextTooltip:function By(CY,CX,CV){if(CV){var Ca=this.colInfos[CX],CZ=Ca.title;if(Ca.titleOverflow&&this._textTooltip){this._textTooltip.updateContent(CY,CV?"title":"content",CZ);}}else{var CZ=CY.innerText;var CW=this.getTextWidthByCanvas(CZ,CY,true);if(CW>CY.offsetWidth&&this._textTooltip){this._textTooltip.updateContent(CY,CV?"title":"content",CZ);}}},hideTextTooltip:function R(){if(this._textTooltip){this._textTooltip.toggle(false);}},touchSelectEnd:function B(CV){if(CV.evt.ctrlKey){this.touchMultiEnd(CV);return ;}this.currSelectedWidget=null;this.hideTextTooltip();},touchSelectMove:function l(CY){if(CY.evt.ctrlKey){this.touchMultiMove(CY);return ;}if(!this.currSelectedWidget){return ;}this._tooltip.toggle(false);var Ca=CY.target;var Cf=-1,Cg=null;var Cb=true;var CX=mstrmojo.dom.findAncestorByAttr(Ca,"mcol",true,this.domNode);CX=CX&&CX.node;if(CX){Cf=CX.getAttribute("mcol");Cg=this.colInfos[Cf];if(Cg.order=="GaugeChart"){Cb=false;}}else{Cb=false;}if(Cb===false){Ca=document.elementFromPoint(CY.pageX,CY.pageY);CX=mstrmojo.dom.findAncestorByAttr(Ca,"mcol",true,this.domNode);CX=CX&&CX.node;if(!CX){return ;}Cf=CX.getAttribute("mcol");Cg=this.colInfos[Cf];}var CZ=CX.getAttribute("mrow");var Cd=CX.parentNode;var CV=null;if(Cd.getAttribute("rowType")==w){var Cc=CD(this.dockedHeaderRows,CZ);if(Cc>=0){CV=this.dockedHeaderRows[Cc];}else{Cc=CD(this.dockedHeaderReplaceRows,CZ);CV=this.dockedHeaderReplaceRows[Cc];}}else{CV=this.rows[CZ];}var Ce=CV&&CV.rowRef&&CV.rowRef[Cf];var CW;if(Ce){if(Cg.order=="LineChart"||Cg.order=="BarChart"){if(CZ==this.currSelectedWidget.mrow&&Cf==this.currSelectedWidget.mcol){CW=Ce.showTooltip(CY.pageX,CY.pageY);this.currSelectedWidget={mrow:CZ,mcol:Cf};}}else{if(Cf==this.currSelectedWidget.mcol&&CZ!=this.currSelectedWidget.mrow){CW=Ce.showTooltip(CY.pageX,CY.pageY);this.currSelectedWidget={mrow:CZ,mcol:Cf};}}}if(CW){this.tooltipShow=true;}if(this.tooltipShow){this._tooltip.toggle(true);}},touchSwipeBegin:function Bs(CV){this.hideChartTooltip();if(Bi.call(this,CV)&&this._super){this._super(CV);}else{this._touchCanceled=true;}},touchSwipeMove:function AK(CV){if(!this._touchCanceled&&this._super){this._super(CV);}},touchSwipeEnd:function Af(CV){if(!this._touchCanceled&&this._super){this._super(CV);}},buildLeftParent:function BV(CY,Cd,Ce){var CW=this.colInfos,Cg=CW.length;if(!this.isKPI){if(Cd==-1){var CX=this.model.gts;var Cb=mstrmojo.array.find(CX.col,"n","Metrics");CY._e=CX.col[Cb].es[CW[Ce].order]||{id:"",n:""};CY.v=CY._e.n;}else{var Ci=this.model.gts.row;var Ca=CY;for(var CZ=Cg-1;CZ>=0;CZ--){var Ch=CW[CZ];if(Ch.type==BZ){continue;}if(Ch.type==z){var CV={};var Cc=mstrmojo.array.find(Ci,"id",Ch.order.split(":")[0]);CV.titleInfo=Ci[Cc];CV._e=this.rows[Cd].model.elms[Ch.order]||{id:"",n:""};CV.v=CV._e.n;CV.axis=BN;Ca._lp=CV;Ca=CV;}}}}else{if(Ce==0){var CX=this.model.gts;var Cb=mstrmojo.array.find(CX.col,"n","Metrics");CY._e=CX.col[Cb].es[Cd]||{id:"",n:""};CY.v=CY._e.n;}else{var Ci=this.model.gts.row;var Ca=CY;for(var CZ=0;CZ<Ci.length;CZ++){var CV={};CV.titleInfo=Ci[CZ];var Cf=Ci[CZ].es.length;CV._e=Ci[CZ].es[Cf-1]||{id:"",n:""};CV.v=CV._e.n;CV.axis=BN;Ca._lp=CV;Ca=CV;}}}},getModelK:function Z(){var CV=this.model&&this.model.k;return CV;},getDataService:function Bp(){var CW=this.xtabModel,CV=CW&&CW.docModel,CX=CV&&CV.getDataService();if(!CX){CX=CW&&CW.getDataService();}return CX;},addSCObjToList:function A1(CW,CX,CZ,CY){var CV={};CV.sc=CX.sc;CV.es=CZ;CV.eid=CY;CW.push(CV);},getSelectionObjForTreeMode:function a(Co){var CX=this.attrMapIdx;var Cv=this,Ce=Cv.model,CV=Ce.gts,Ck=CV.row;var CZ=[];var Cg=0;var Cr=false;var Cp=Co.treeNode;var Cm=Cp.treePath;var Cd=Cm.split("_");var Cf=Cd.length-1;var Ca=this.isAttrSelectable(Cf);if(this.closedIfwAttr==Cm&&this.isTablet){return null;}if(Ca){var Cl=this.lastSelectedObj&&this.lastSelectedObj[Cf]&&(this.lastSelectedObj[Cf].treePath==Cm);if(!Cl){this.currSelectedObj=this.getSelectedTreeNodeListFromTreePath(Cd);var Ct=false;var Ci=this.currSelectedObj[Cf];for(var Cu=Cf+1;Cu<this.lastSelectedObj.length;Cu++){var Ch=this.isAttrSelectable(Cu);var CY=!!this.lastSelectedObj[Cu];if(!Ch||!CY){Ct=true;this.currSelectedObj[Cu]=null;Ci=Ci.childrenTreeNodeList[0];continue;}if(!Ct){var Cb=this.lastSelectedObj[Cu].id;var CW=Ci.childrenTreeNodeList;for(var Cs=0;Cs<CW.length;Cs++){if(Cb==CW[Cs].id){this.currSelectedObj[Cu]=CW[Cs];break;}}if(Cs==CW.length){Ct=true;}}if(Ct){this.currSelectedObj[Cu]=Ci.childrenTreeNodeList[0];}Ci=this.currSelectedObj[Cu];}Cr=false;for(var Cu=0;Cu<this.currSelectedObj.length;Cu++){var Cp=this.currSelectedObj[Cu];if(Cp){var Cj=CX[Cu];rowH=Ck[Cj];this.addSCObjToList(CZ,rowH,Cp.n,Cp.id);}else{continue;}}}else{for(var Cu=Cf;Cu<this.lastSelectedObj.length;Cu++){var Cp=this.currSelectedObj[Cu];if(!Cp){continue;}var Cj=CX[Cu];rowH=Ck[Cj];var Cn=rowH.sc&&!(rowH.sc.all==="false"||rowH.sc.all===false);if(Cp&&!Cn){break;}else{this.addSCObjToList(CZ,rowH,Cp.n,"OA:(All)");this.currSelectedObj[Cu]=null;}}if(Cu==Cf){return{at:0};}while(this.currSelectedObj.length>0&&!this.currSelectedObj[this.currSelectedObj.length-1]){this.currSelectedObj.pop();}for(;Cu<this.currSelectedObj.length;Cu++){var Cp=this.currSelectedObj[Cu];if(Cp){var Cj=CX[Cu];rowH=Ck[Cj];this.addSCObjToList(CZ,rowH,Cp.n,Cp.id);}else{continue;}}Cr=true;}}if(CZ.length>0){Cg=Cg|e;var Cc=this.hasInfoWOnNode(Ck[CX[Cf]]);var Cq=Cr?null:Cc?Co.node:null;return{at:Cg,k:this.getModelK(),scObjList:CZ,anchor:Cq};}return null;},hasOnlyInfoWTarget:function b(CV){return this.hasInfoWOnNode(CV,true);},hasInfoWOnNode:function Ar(CX,CY){var CV=CX.sc.tks.split("\x1E"),CW=this.findInfoWInTargets(CV);if(CY){return CV&&CW&&CV.length===CW.length;}else{return CW&&CW.length>0;}},hasNoninfowindowTarget:function B0(CY){var CZ=CY&&CY.scObjList,CV=CZ&&CZ.length,Ce=false;for(var CX=0;CX<CV;CX++){var Ca=CZ[CX],Cb=Ca.sc.tks.split("\x1E"),Cc=this.findInfoWInTargets(Cb);if(Cb.length>Cc.length){Ce=true;}for(var CW=0;CW<Cc.length;CW++){var Cd=Cc[CW];this.infoWindowsShown[Cd]=true;}}return Ce;},findInfoWInTargets:function Ar(CZ){var Ce=this.xtabModel,Cd=(Ce&&Ce.docModel),Cf=[];if(Cd){var Cb=Cd.defn&&Cd.defn.layouts,CX=null;var CW;if(Cb){for(CW in Cb){if(Cb[CW].loaded){CX=Cb[CW];break;}}}var CY=CX&&CX.units;if(CY&&CZ){for(var CV=0;CV<CZ.length;CV++){var Cc=CZ[CV],Ca=CY[Cc];if(Ca){if(this.isChildOfIfw(CY,Ca)){Cf.push(Cc);}}}}}return Cf;},getSelectionObjForNonTreeMode:function CI(Cr){var Cl=Cr.mcol,Co=Cr.mrow,Cb=this.colInfos;var CW=this.attrMapIdx;var C0=this,Ca=C0.model,CV=Ca.gts,Cj=CV.row;var CX=[];var Ch=0;var Cv=false;var Cs=Cb[Cl].order;if(this.isAllAttrSelectable){if(this.closedIfwAttr==Co&&this.isTablet){return null;}var Cp=this.updateUnselectedRemainCells({mrow:Co,mcol:Cl});if(Cp){return null;}var Cd=(Co==this.prevSelected.mrow),Cz=false;for(var Cx=0;Cx<Cb.length;Cx++){var Ci=Cb[Cx];if(Ci.sc&&(Ci.sc.all==="true"||Ci.sc.all===true)){Cz=true;break;}}if(Cd&&!Cz){for(var Cx=0;Cx<Cb.length;Cx++){var Ci=Cb[Cx];if(Ci.sc){var Ct=Ci.sc.tks.split("\x1E"),Cg=C0.findInfoWInTargets(Ct);for(var Cw=0;Cw<Cg.length;Cw++){var C2=Cg[Cw];if(!C0.infoWindowsShown[C2]){Cd=false;}}}}}if(Cd){for(var Cx=0;Cx<Cb.length;Cx++){var Ci=Cb[Cx];if(!Ci.sc){continue;}if(Ci.sc.all==="false"||Ci.sc.all===false){this.unselectedRemainCells.push({mrow:Co,mcol:Cx});continue;}var Cn=Ci.rowH.ctlMatrix,CZ=Cn.map[Co],Ck=Ci.rowH.es[CZ].id;if(!Ck||Ck.substring(0,1)==="D"){continue;}Cv=true;this.addSCObjToList(CX,Ci.rowH,"","OA:(All)");}if(CX.length>0){this.prevSelected={mrow:-2,mcol:-1};this.updateUnselectedRemainCells();Ch=Ch|e;var Cu=Cv?null:Cr.node;return{at:Ch,k:this.getModelK(),scObjList:CX,anchor:Cu};}else{this.unselectedRemainCells=[];}return{at:Ch};}else{this.updateUnselectedRemainCells();this.unselectedRemainCells=[];}for(var Cx=0;Cx<Cb.length;Cx++){var Ci=Cb[Cx];if(!Ci.sc){continue;}var Cc=Ci.rowH.ctlMatrix,CZ=Cc.map[Co];if(Ci.rowH.es[CZ]){var Ck=Ci.rowH.es[CZ].id;if(!Ck||Ck.substring(0,1)==="D"){continue;}this.addSCObjToList(CX,Ci.rowH,"",Ck);}}if(CX.length>0){this.prevSelected={mrow:Co,mcol:-1};Ch=Ch|e;var Cu=Cv?null:Cr.node;return{at:Ch,k:this.getModelK(),scObjList:CX,anchor:Cu};}}else{var Ci=this.getCGColInfo(Cl,true);if(Ci.sc){var Cc=Ci.rowH.ctlMatrix,CY=this.getCGColInfo(Cl),Cq=CY&&CY.rowH.ctlMatrix,C1=this.colInfos[Cl].order,Cf=C1.indexOf(":CG")===C1.length-3&&C1.length>=3;var Ck="";var Ce=false;var CZ=Cc.map[Co];if(Ci.rowH.es[CZ]){Ck=Ci.rowH.es[CZ].id;if(!Ck||Ck.substring(0,1)==="D"){return ;}if(this.closedIfwAttr==Ck&&this.isTablet){return null;}}var Cz=!(Ci.sc.all==="false"||Ci.sc.all===false);var C0=this;var Cy=function(){var C3=Cc.selectedIdx[CZ];if(Cq){if(Cq.selectedIdx[-1]){}else{C3=C3&&Cq.selectedIdx[Cq.map[Co]];}}if(C3&&!Cz){var C6=Ci.rowH.sc.tks.split("\x1E"),C7=C0.findInfoWInTargets(C6);for(var C5=0;C5<C7.length;C5++){var C4=C7[C5];if(!C0.infoWindowsShown[C4]){C3=false;}}}return C3;};if(Cy()){var Cz=!(Ci.sc.all==="false"||Ci.sc.all===false);if(Cz){Ck="OA:(All)";Cv=true;Cc.selectedIdx={};if(Cq){Cq.selectedIdx={};}this.prevSelected={mrow:-2,mcol:-1};}else{return null;}}else{Cc.selectedIdx={};Cc.selectedIdx[CZ]=true;if(Cq){Cq.selectedIdx={};if(Cf){Cq.selectedIdx[Cq.map[Co]]=true;if(Cq.map[Co]<CY.rowH.es.length){Ck=CY.rowH.es[Cq.map[Co]].id;}}else{Cq.selectedIdx[-1]=true;}}this.prevSelected={mrow:Co,mcol:Cl};}var Cm={};Cm.sc=Ci.sc;Cm.eid=Ck;CX.push(Cm);}if(CX.length>0){Ch=Ch|e;var Cu=Cv?null:Cr.node;return{at:Ch,k:this.getModelK(),scObjList:CX,anchor:Cu};}}return null;},getLinkDrillObjForTreeMode:function AG(Cn){var Ce=0;var Cb=null;var CZ=this.model,CV=CZ.gts,Cr=CV.row;var Ci=Cn.mcol,Cj=Cn.mrow,Ca=this.colInfos;var Cp=Cn.treeNode;var Cl=Cp.treePath;var CY=Cl.split("_");var Cc=CY.length-1;var CW=this.attrMapIdx;var Co=null;var Cg=Ca[Ci];var Cs=Cg&&Cg.type;if(Cs==z){if(Cj==-1){}else{var Cd=Cr[CW[Cc]];if(Cd.lm&&Cd.lm[0]&&Cd.lm[0].links){Cb={};Cb.titleInfo=Cd;var Cp=F(this.tree,Cl);Cb._e=Cp.es[0]||{n:"",id:""};Cb.v=Cb._e.n;}}}else{if(Cs==CK){if(Cg.lm){Co=Cg.order;var Ch=parseInt(Co);var Cm=CV.col[0];if(Cm){Cb={};Cb.mix=Ch;Cb.titleInfo=Cm;if(Cj==-1){Cb._e=Cm.es[Ch]||{n:"",id:""};Cb.v=Cb._e.n;}else{var CX=Cb;var Cp=this.tree;for(var Cq=0;Cq<CY.length;Cq++){var Ck=CY[Cq];Cp=Cp.childrenTreeNodeList[Ck];var Cf=CW[Cq];Cd=Cr[Cf];var Ct={};Ct.titleInfo=Cd;Ct._e=Cp.es[0]||{n:"",id:""};Ct.v=Ct._e.n;CX._lp=Ct;CX.axis=BN;CX=Ct;}}}}}}if(Cb){this.highlightEntireRow=false;Ce=Ce|CF;if(Cb.mix!=undefined){return{at:Ce,k:this.getModelK(),node:Cb,mix:Ch};}else{return{at:Ce,k:this.getModelK(),node:Cb};}}},getLinkDrillObjForNonTreeMode:function AM(Cj){var CY=0;var Ca=this.model,CW=Ca.gts,Ci=CW.row;var Ce=Cj.mcol,Cb=Cj.mrow,CV=this.colInfos;var CX=Cj.node,CZ;this.highlightEntireRow=false;var Cg=this.attrMapIdx;var Ch=CV[Ce];if(!this.isKPI){if(p===1&&BR===1&&Cb!=-1){for(var Cf in CV){var Cc=CV[Cf];if(Cc.lm&&Cc.type==z){this.highlightEntireRow=true;var CZ=Cc.lm;CY=CZ&&CZ.at||CF;CX._e=this.rows[Cb].model.elms[Cc.order]||{id:"",n:""};CX.v=CX._e.n;break;}}}if(!this.highlightEntireRow){if(Ch.type==BZ){return null;}var CZ=Ch.lm;if(CZ){CY=CZ&&CZ.at;if(Ch.type==z){if(Cb===-1){CX._e={};CX._e.onTitle=true;CX._e.id=CZ.id;CX._e.n=CZ.n;CX.v=CZ.n;}else{CX._e=this.rows[Cb].model.elms[Ch.order]||{id:"",n:""};CX.v=CX._e.n;}}else{if(Ch.type==CK){CX.mix=Ch.order;CX.axis=BN;this.buildLeftParent(CX,Cb,Ce);CY=this.rows[Cb==-1?0:Cb].model.refv[Ch.order].at||CF;}}}}}else{if(Ch.type==BZ){return null;}var CZ=Ch.lm;var Cd=this.rows[Cb].model.metricIdx;if(CZ&&CZ.lm&&CZ.lm[Cd]&&CZ.lm[Cd].links){CX.mix=""+Cd;CX.axis=BN;this.buildLeftParent(CX,Cd,Ce);CY=this.rows[Cb].model.refv[0].at||CF;}else{CZ=null;}}if(CZ){CX.titleInfo=CZ;CY=CY|CF;if(CX.mix!=undefined){return{at:CY,mcol:Ce,mrow:Cb,k:this.getModelK(),node:CX,mix:CX.mix};}else{return{at:CY,mcol:Ce,mrow:Cb,k:this.getModelK(),node:CX};}}return null;},getActionObj:function BP(CW){var CX=[];if(CW.mrow==-1){return null;}var CV=null;if(this.isTreeMode){CV=this.getSelectionObjForTreeMode(CW);}else{CV=this.getSelectionObjForNonTreeMode(CW);}if(CV){CX.push(CV);return CX;}else{if(this.isTreeMode){CV=this.getLinkDrillObjForTreeMode(CW);}else{CV=this.getLinkDrillObjForNonTreeMode(CW);}CX.push(CV);}return CX;},getDefaultHighlightRow:function A4(){var CV=this.attrMapIdx,Cc=this.model.gts.row,CX=this.colInfos,Cf=CX.length,Cg=null,Ce=null,CW=true;if(!this.isTreeMode){if(this.isAllAttrSelectable){for(var Ck=0;Ck<Cf;Ck++){var Cd=this.colInfos[Ck],CZ=Cd.rowH;if(!Cd.sc||!CZ){continue;}Cg=CZ.ctlMatrix;if(Cg){if(!this.hasOnlyInfoWTarget(CZ)){CW=false;}if(!Ce){Ce={};for(var Cj=0;Cj<Cg.map.length;Cj++){if(Cg.selectedIdx[Cg.map[Cj]]){Ce[Cj]=true;}}}else{for(var Cj in Ce){if(!Cg.selectedIdx[Cg.map[Cj]]){delete Ce[Cj];}}}}}if(CW||!Ce||Object.keys(Ce).length!==1){}else{var Cl=parseInt(Object.keys(Ce)[0]);this.prevSelected={mrow:Cl,mcol:-1};}for(var Ck=0;Ck<Cc.length;Ck++){if(Cc[Ck].ctlMatrix){Cc[Ck].ctlMatrix.selectedIdx={};}}}else{for(var Ck=0;Ck<Cc.length;Ck++){var CZ=Cc[Ck],Cg=CZ.ctlMatrix,CY=(Cg&&Object.keys(Cg.selectedIdx).length>0)?true:false;if(CY&&!this.hasOnlyInfoWTarget(CZ)){CW=false;break;}}if(CW){for(var Ck=0;Ck<Cc.length;Ck++){if(Cc[Ck].ctlMatrix){Cc[Ck].ctlMatrix.selectedIdx={};}}}}}else{if(this.currSelectedObj&&this.currSelectedObj.length<=0){this.currSelectedObj=[];var Cb=function(Cp,Cn){var Cr=Cp.length;for(var Co=0;Co<Cr;Co++){var Cq=Cp[Co];if(Cq.attrElemIdx==Cn){return Cq;}}return null;};var Cm=this;var Ch=function(Cn,Cu){Cg=Cc[Cm.attrMapIdx[Cu]].ctlMatrix;var Cq=Cn.childrenTreeNodeList;var Ct=Cq.length;if(Ct<=0){return ;}var Cr=null;if(Cg){for(var Cp in Cg.selectedIdx){Cr=Cb(Cq,Cp);}if(Cr){Cm.currSelectedObj[Cu]=Cr;Ch(Cr,Cu+1);return true;}}else{Cm.currSelectedObj[Cu]=null;for(var Co=0;Co<Ct;Co++){var Cs=Ch(Cq[Co],Cu+1);if(Cs){return true;}}}return false;};Ch(this.tree,0);while(this.currSelectedObj.length>0&&!this.currSelectedObj[this.currSelectedObj.length-1]){this.currSelectedObj.pop();}for(var Ck=0;Ck<this.currSelectedObj.length;Ck++){var Ci=this.currSelectedObj[Ck];if(Ci){var Ca=CV[Ck];CZ=Cc[Ca];if(!this.hasInfoWOnNode(CZ,true)){CW=false;break;}}else{continue;}}if(CW){this.currSelectedObj=[];}this.lastSelectedObj=Ai.clone(this.currSelectedObj);return ;}}},getCGColInfo:function AD(CX,CW){var CZ=this.colInfos[CX],CV=CZ.CGColIdx>=0?true:false,CY=CZ&&(CV?this.colInfos[CZ.CGColIdx]:null);if(CW){if(CV){return CZ.isFirstCGCol?CZ:CY;}else{return CZ;}}else{if(CV){return CZ.isFirstCGCol?CY:CZ;}else{return null;}}},updateSelectedStatus:function B3(Ce){if(this.isTreeMode){this.updateTreeSelection(Ce);}else{if(this.isAllAttrSelectable&&this.unselectedRemainCells.length==0){var Cc=this.rows,CZ=Cc.length,Cd=this.prevSelected.mcol==-1?this.prevSelected.mrow:-2;for(var CY=0;CY<CZ;CY++){var CW=Cc[CY];if(CY==Cd){CW.selected[-1]=true;}else{CW.selected[-1]=false;}}}else{var CV=this.colInfos,Ca=CV.length;var CX=function(Ci){var Cn=this.getCGColInfo(Ci,true);ctlMatrix=Cn.rowH.ctlMatrix,colInfoCG=this.getCGColInfo(Ci),ctlMatrixCG=colInfoCG&&colInfoCG.rowH.ctlMatrix;if(ctlMatrixCG&&!ctlMatrixCG.selectedIdx[-1]){ctlMatrix=ctlMatrixCG;}var Cg=ctlMatrix.map,Co=this.rows,Ck=Co.length,Ch=ctlMatrix.selectedIdx,Cm=Cn.associateAttr;for(var Cj=0;Cj<Ck;Cj++){var Cf=Co[Cj];if(Ch[Cg[Cj]]){Cf.selected[Ci]=true;for(var Cl in Cm){Cf.selected[Cm[Cl]]=true;}}else{Cf.selected[Ci]=false;for(var Cl in Cm){Cf.selected[Cm[Cl]]=false;}}}};for(var CY=0;CY<Ca;CY++){var Cb=CV[CY];if(Cb.rowH&&Cb.rowH.ctlMatrix){CX.call(this,CY);}}}}},performActionAndDoHighlight:function BQ(CY,CW){var CV=CY&&CY[0];this.hasNonifwTarget=this.hasNoninfowindowTarget(CV);if(CV.at&e){if(this.isTreeMode){this.updateSelectedStatus(this.tree);this.updateHighlightForCurrRenderRows();this.lastSelectedObj=Ai.clone(this.currSelectedObj);}else{this.updateSelectedStatus();this.updateHighlightForCurrRenderRows();}var CX=CB.isAndroid&&!this.isTablet;var Ca=CX&&!this.hasNonifwTarget;if(Ca){var CZ=this;window.setTimeout(function(){CZ.performAction(CY);},100);}else{this.performAction(CY);}}else{if(CV.at&CF){this.highlightForLD(CW.mrow,CW.mcol,CW.node,true);this.performAction(CY);this.highlightForLD(CW.mrow,CW.mcol,CW.node,false);}}},updateUnselectedRemainCells:function AC(Ch){var Cd=false;for(var Ca=this.unselectedRemainCells.length-1;Ca>=0;Ca--){var Ci=this.unselectedRemainCells[Ca],Cg=Ci.mcol,Cc=Ci.mrow,Cj=this.getCGColInfo(Cg,true);if(Cj.sc){var Cb=Cj.rowH.ctlMatrix,CZ=this.getCGColInfo(Cg),CW=CZ&&CZ.rowH.ctlMatrix,Cf=this.colInfos[Cg].order,CV=Cf.indexOf(":CG")===Cf.length-3&&Cf.length>=3;var CY=Cb.map[Cc];elementId=Cj.rowH.es[CY].id;if(!elementId||elementId.substring(0,1)==="D"){continue;}else{if(Cb.selectedIdx[CY]){if(Ch){if(Cg==Ch.mcol){var CX=CV?CW:Cb,Ce=CX&&CX.map[Ch.mrow];if(Ce==CY){Cd=true;}}continue;}Cb.selectedIdx={};if(CW){CW.selectedIdx={};}}else{Cb.selectedIdx={};Cb.selectedIdx[CY]=true;if(CW){CW.selectedIdx={};if(CV){CW.selectedIdx[CW.map[Cc]]=true;}else{CW.selectedIdx[-1]=true;}}}}}}return Cd;},highlightCellsByRowInfo:function CJ(CV){var Cb=CV.rowRef;if(!Cb){return ;}var CX=Cb[P];var Cf=Cb[BX];var CW=CX&&CX.childNodes;var Ce=Cf&&Cf.childNodes;var Ca=CW&&CW.length||0,Cd=Ce&&Ce.length||0;var Cc=Ca+Cd;for(var CZ=0;CZ<Cc;CZ++){var CY=CZ<Ca?CW[CZ]:Ce[CZ-Ca];this.highlightCell(CY,CV.selected[CZ]);}},setSelectedStyle:function A6(CV){if(CV==0){this.selectedStyle="background-color:#015DE6;color:#FFFFFF;";}else{if(CV==1){this.selectedStyle="background-color:rgba(1,93,230, 0.7);color:#FFFFFF;";}else{this.selectedStyle="background-color:rgba(1,93,230, 0.5);color:#FFFFFF;";}}},highlightTreeArrow:function u(CW,CV){if(this.treeColumnIdx>-1&&this._leftChart){if(CV){this._leftChart.setTreeArrow(CW,"white");}else{this._leftChart.setTreeArrow(CW);}}},highlightCell:function q(CW,CV){if(CV){BW(CW,K+this.selectedStyle);if(this.selectedClass&&this.selectedClass.length>0){BY.addClass(CW,this.selectedClass);}}else{BW(CW,AR);if(this.selectedClass&&this.selectedClass.length>0){BY.removeClass(CW,this.selectedClass);}}},highlightForLD:function CP(CW,CZ,CY,CX){if(this.highlightEntireRow&&!this.isTreeMode){this.highlightRowByRowInfo(this.rows[CW],CX);}else{if(CY){this.highlightCell(CY,CX);}var Cc=this.colInfos[CZ],Ca=Cc.associateAttr;var Cb=CY.parentNode.childNodes;for(var CV in Ca){this.highlightCell(Cb[Ca[CV]],CX);if(this.treeColumnIdx==CV){this.highlightTreeArrow(this.rows[CW],CX);}}}},highlightRowByRowInfo:function Am(CX,CW){var CV=CX.rowRef;if(!CV){return ;}var CY=CX.treeNode?CX.treeNode.level:0;this.setSelectedStyle(CY);if(CV[P]){this.highlightRow(CV[P],CW);}if(CV[BX]){this.highlightRow(CV[BX],CW);}this.highlightTreeArrow(CX,CW);},highlightRow:function CM(CY,CV){var CX=CY.childNodes;for(var CW=0;CW<CX.length;CW++){if(CV){BW(CX[CW],K+this.selectedStyle);if(this.selectedClass&&this.selectedClass.length>0){BY.addClass(CX[CW],this.selectedClass);}}else{BW(CX[CW],AR);if(this.selectedClass&&this.selectedClass.length>0){BY.removeClass(CX[CW],this.selectedClass);}}}},isAttrSelectable:function CN(CW){var CV=this.attrMapIdx[CW];var CX=this.model.gts.row[CV].ctlMatrix;if(CX){return true;}return false;},updateTreeSelection:function Ad(CV){this.selectOrClearTreeNodes(CV,true,0);this.selectOrClearTreeNodes(CV,false,0);},findTheTreeNodeWithSameID:function g(CW,CZ){var CY=CW.length;for(var CV=0;CV<CY;CV++){var CX=CW[CV];if(CX.id==CZ){return CX;}}return null;},selectOrClearTreeNodes:function A0(Ca,CV,CY){if(!Ca){return ;}if(CV&&this.lastSelectedObj.length<=CY){return ;}if(!CV&&this.currSelectedObj.length<=CY){return ;}var CW=null;if(CV){CW=this.lastSelectedObj[CY];}else{CW=this.currSelectedObj[CY];}var CZ=Ca.childrenTreeNodeList,Cb=CZ.length;if(CW){Ca=this.findTheTreeNodeWithSameID(CZ,CW.id);if(Ca){Ca.selected=CV?false:true;this.selectOrClearTreeNodes(Ca,CV,CY+1);}}else{for(var CX=0;CX<Cb;CX++){this.selectOrClearTreeNodes(CZ[CX],CV,CY+1);}}},updateHighlightForCurrRenderRows:function A3(){var CX=this.rows;var CV=CX.length,CY=null;for(var CW=this.startCnt;CW<this.endCnt;CW++){CY=CX[CW];if(this.isTreeMode){this.highlightRowByRowInfo(CY,CY.treeNode.selected);}else{if(this.isAllAttrSelectable&&this.unselectedRemainCells.length==0){this.highlightRowByRowInfo(CY,CY.selected[-1]);}else{this.highlightCellsByRowInfo(CY);}}}if(this.isTreeMode){CX=this.dockedHeaderRows;CV=CX.length;for(var CW=0;CW<CV;CW++){CY=CX[CW];this.highlightRowByRowInfo(CY,CY.treeNode.selected);}CX=this.dockedHeaderReplaceRows;CV=CX.length;for(var CW=0;CW<CV;CW++){CY=CX[CW];this.highlightRowByRowInfo(CY,CY.treeNode.selected);}}},getSelectedTreeNodeListFromTreePath:function h(CV){if(!CV){return[];}var CX=[];var CZ=this.tree;for(var CW=0;CW<CV.length;CW++){var CY=CV[CW];CZ=CZ.childrenTreeNodeList[CY];if(!CZ){break;}if(this.isAttrSelectable(CW)){CX[CW]=CZ;}else{CX[CW]=null;}}return CX;},sortOnTap:function Bz(CX){if(this.isKPI){return ;}var Ca=this.colInfos[CX];if(Ca.type==BZ||Ca.type==BC||Ca.type==CS){return ;}if(CX!=this.sortKeyIdx&&this.sortKeyIdx!=undefined){this.toggleSortOrderAndArrow(this.sortKeyIdx,AI.NORMAL);}var CY=(Ca.sortOrder+1)%3;this.toggleSortOrderAndArrow(CX,CY);this.sortKeyIdx=CX;var CW=this,CV=++this.sortID;var CZ={success:function(Ce){if(CV!=CW.sortID){console.log("current sortID:"+CW.sortID+", this sortID:"+CV+", obsolete data, ignore");return ;}var Cc=CW.getModelK();if(Ce.eg){return ;}CW.model=Ce;CW.model.k=Cc;CW.storeMCStatus(true);CW.pushToReusePool();CW.rowsNeedRebuild=true;L.call(CW,true);CW.restoreMCStatus();CW.firstRowIdxOnScrn=0;CW.getCurrRenderRowCount();var Cf=CW.rows;for(var Cd=CW.startCnt;Cd<CW.endCnt;Cd++){Cf[Cd].rowRef=CW.popFromReusePool();}var Cb={x:0,y:0};if(!CW.enableSmoothScroll){CW._leftChart.reRenderRows(Cb);}else{CW._leftChart.reRenderRows(Cb);CW._rightChart.reRenderRows(Cb);}CW.getDefaultHighlightRow();CW.updateSelectedStatus(CW.tree);CW.updateHighlightForCurrRenderRows();if(CW.isTreeMode){CW.initDockedHeaders();}}};this.doSort(CY,CZ);},toggleSortOrderAndArrow:function A(Cp,Cf){var Cl=this.colInfos[Cp],Cc=Cl.thRef,Ch=Cl.sortOrder;if(!Cc){return ;}Cl.sortOrder=Cf;var Ca=this.isAndroid;var Cr=BY.getComputedStyle(Cc),Cb=Cr["text-align"],Cs=Math.round(4*Bw),Ct=Math.round(15*Bw),Ce=Cs*2,Co,Cj,Cq=this.getTextDimesion(Cc.innerHTML,Cc),CW=Cq.height>Ct?Ct:Cq.height||Ct,CY=Cq.width>parseInt(Cl.contentWidth)?2:1;if(Cb=="left"||Cb=="center"){Co="padding-left";Cj="left";}else{Co="padding-right";Cj="right";}var Cm=Ch==AI.NORMAL&&Cf!==AI.NORMAL,Cu=Ch!==AI.NORMAL&&Cf==AI.NORMAL;if(Cm){Cc.style[Co]=(parseInt(Cr[Co])+Ce)+"px";if(!Ca){Cc.style.width=(Cl.styleWidth-Ce)+"px";}}else{if(Cu){Cc.style.width=Cl.styleWidth+"px";Cc.style[Co]=Cl.padding[Cj]+"px";}}Cl.titleOverflow=this.utils.truncateTextToLineWithWordWrap2(Cc,Cl.title,this.textCanvas,CY);Cq=this.getTextDimesion(Cc.innerHTML,Cc);var CZ=this.sortArrowCanvas;var Cd=CB.position(Cc),Cg,Cw,Cx=this.enableSmoothScroll&&Cp>=this.attrColumnCount;if(Cx){Cg=CB.position(this._rightChart.domNode);Cw=Cd.x-Cg.x+this._leftChart.domNode.offsetWidth;}else{Cg=CB.position(this.domNode);Cw=Cd.x-Cg.x;}var CX=Cq.width;if(Cb=="left"){CZ.style.left=(Cw+Cl.padding[Cj])+"px";}else{if(Cb=="center"){CZ.style.left=Math.round(Cw+(Cl.colWidth-Cl.padding.left-Cl.padding.right-Ce-CX)/2+Cl.padding[Cj])+"px";}else{CZ.style.left=(Cw+Cl.colWidth-Cl.padding[Cj]-Ce)+"px";}}if(Cx){var Cv=this._scroller.origin;this.utils.translateCSS(-Cv.x,-Cv.y,false,CZ);CZ.style.zIndex=0;}else{this.utils.translateCSS(0,0,false,CZ);CZ.style.zIndex=1;}var CV=Cq.height;if(CY>1){CZ.style.top=Math.round((this.headerTableOffsetHeight-CV*CY)/2+CV*(CY-1)+(CV-CW)/2)+"px";}else{CZ.style.top=Math.round((this.headerTableOffsetHeight-CW)/2)+"px";}var Ci=Cj=="left"?0:Ce-Cs,Ck=Math.round(3*Bw);CZ.height=CW;CZ.width=Ce;var Cn=CZ.getContext("2d");Cn.save();Cn.fillStyle=Cr.color;Cn.strokeStyle=Cr.color;if(Cf==AI.ASCENDING){Cn.beginPath();Cn.moveTo(Ci+0,Ck);Cn.lineTo(Ci+Cs/2,0);Cn.lineTo(Ci+Cs,Ck);Cn.lineTo(Ci+0,Ck);Cn.closePath();Cn.fill();Cn.lineWidth=1;Cn.moveTo(Ci+Cs/2,Ck);Cn.lineTo(Ci+Cs/2,CW);Cn.stroke();}else{if(Cf==AI.DESCENDING){Cn.beginPath();Cn.moveTo(Ci+0,CW-Ck);Cn.lineTo(Ci+Cs/2,CW);Cn.lineTo(Ci+Cs,CW-Ck);Cn.lineTo(Ci+0,CW-Ck);Cn.closePath();Cn.fill();Cn.lineWidth=1;Cn.moveTo(Ci+Cs/2,0);Cn.lineTo(Ci+Cs/2,CW-Ck);Cn.stroke();}}Cn.restore();this.sortKeyIdx=Cp;},doSort:function(Ca,CY){var Cg=this.sortKeyIdx,CX=this.colInfos[Cg],Ck=[],CZ,Cf="",CW="";var Cj=Ca==AI.ASCENDING?true:false;if(this.isTreeMode){CZ=3;}else{CZ=2;}if(CX.type==z){if(Ca==AI.NORMAL){}else{if(this.isTreeMode){var CV=this.attrMapIdx,Ce=this.model.gts.row;for(var Ci=0;Ci<CV.length-2;Ci++){var Cd=CV[Ci],Cb=Ce[Cd];Cf=Cb.id;CW=Cb.fid;}}else{var Cb=CX.rowH;Cf=CX.id;CW=CX.fid;}}}else{if(CX.type==CK){if(Ca==AI.NORMAL){}else{Cf=CX.mid;CW="";}}}if(mstrApp.isNativeAndroid&&mstrMobileTransport){var Cm=0,Cc=0;if(this.enableSmoothScroll){var Cl=this._scroller.origin;Cm=Cl.x;Cc=Cl.y;}mstrMobileTransport.applySorts(this.getModelK(),CZ,Cf,CW,Cj,Cg,Ca,Cm,Cc);}else{var Ch=this.getDataService();Ck.push({id:Cf,fid:CW,asc:Cj});Ch.applySorts(this.getModelK(),CZ,Ck,CY);}},smoothScrollTo:function Bm(CV,CW){if(this.enableSmoothScroll&&this._scroller){this._scroller.scrollTo(CV,CW);}},multiTap:true,touchTap:function(CY){var CZ=this;if(CZ._tooltip.show){this.hideChartTooltip();return ;}var CX=mstrmojo.dom.findAncestorByAttr(CY.target,"mcol",true,this.domNode);if(!CX){this._leftChart.dockedHeaderReplaceDiv.style.display="none";CY.target=document.elementFromPoint(CY.pageX,CY.pageY);CX=mstrmojo.dom.findAncestorByAttr(CY.target,"mcol",true,this.domNode);this._leftChart.dockedHeaderReplaceDiv.style.display="";}if(CX&&CX.node){var Cc=parseInt(CX.node.getAttribute("mrow"));var Ci=parseInt(CX.node.getAttribute("mcol"));if(Cc==-1){if(this.enableSortOnMobile){this.sortOnTap(Ci);}return ;}if(this.isTreeMode){if(Cc>=0){var CV=this.rows[Cc];var Ch=CV&&CV.treeNode;if(CY.count==2||(CY.count==1&&Ci==this.treeColumnIdx)){if(!Ch.isLeaf){this.rowsNeedRebuild=true;var Cb=CX.node.parentNode.getAttribute("rowType");if(Ch.needExpand){CQ.call(this,CV,Cb);}else{At.call(this,CV,Cb);}}return ;}}var Cj={node:CX.node,treeNode:Ch,mcol:Ci,mrow:Cc};var CW=this.getActionObj(Cj);var Ca=CW&&CW[0];if(Ca){this.performActionAndDoHighlight(CW,Cj);return ;}}else{var Cj={node:CX.node,mcol:Ci,mrow:Cc};var CW=this.getActionObj(Cj);var Ca=CW&&CW[0];if(Ca){this.performActionAndDoHighlight(CW,Cj);return ;}}var Cf=this;var Ce=CX.node.parentNode;var CV=null;if(Ce.getAttribute("rowType")==w){var Cd=CD(this.dockedHeaderRows,Cc);if(Cd>=0){CV=this.dockedHeaderRows[Cd];}else{Cd=CD(this.dockedHeaderReplaceRows,Cc);CV=this.dockedHeaderReplaceRows[Cd];}}else{CV=this.rows[Cc];}var Cg=CV&&CV.rowRef&&CV.rowRef[Ci];if(Cg){this.showChartTooltip(Cg,CY);}}},shouldTouchBubble:function s(CW){var CV=CW.isVertical;return CV?this._super(CW):this.enableSmoothScroll&&Bi.call(this,CW)?false:true;},multiTouch:true,touchMultiBegin:function(Cb){this.hideChartTooltip();this.initTouchObj=Cb;var CZ;var CY;if(Cb.evt.touches&&Cb.evt.touches.length==2){CZ=Cb.evt.touches[0];CY=Cb.evt.touches[1];}else{CZ=Cb;CY={pageX:100,pageY:100,target:Cb.target};}var Ca=CZ.pageX-CY.pageX;var CX=CZ.pageY-CY.pageY;this.initDiffDiff=Ca*Ca+CX*CX;this.relScaleFactor=1;var CW=mstrmojo.dom.findAncestorByAttr(CZ.target,"mrow",true,this.domNode);var CV=mstrmojo.dom.findAncestorByAttr(CY.target,"mrow",true,this.domNode);if(CW&&CW.value&&CV&&CV.value){this.centerRowIdx=Math.round((parseInt(CW.value)+parseInt(CV.value))/2);}else{this.centerRowIdx=this.firstRowIdxOnScrn;}},touchMultiMove:function(CZ){var CX;var CW;if(CZ.evt.touches&&CZ.evt.touches.length==2){CX=CZ.evt.touches[0];CW=CZ.evt.touches[1];}else{CX=CZ;CW={pageX:100,pageY:100};}var CY=CX.pageX-CW.pageX;var CV=CX.pageY-CW.pageY;this.curDiffDiff=CY*CY+CV*CV;},touchMultiEnd:function(CV){if(this.isTreeMode){if(this.curDiffDiff>this.initDiffDiff){this.onPinchOpen();}else{if(this.curDiffDiff<this.initDiffDiff){this.onPinchClose();}}}},onPinchOpen:function Ax(){var CW=O.call(this);var CX=CW;if(CX>=this.maxTreeLevel){CX=this.maxTreeLevel-1;}var CV=this.rows[this.centerRowIdx].treeNode;var CY=this.centerRowIdx-this.firstRowIdxOnScrn;AB.call(this,CX,CV,CY);},onPinchClose:function Bl(){var CW=O.call(this);var CX=CW-2;if(CX<-1){CX=-1;}var CV=this.rows[this.centerRowIdx].treeNode;if(CV.level>CX+1){CV=A7(this.tree,CV.treePath,CX+1);}var CY=this.centerRowIdx-this.firstRowIdxOnScrn;AB.call(this,CX,CV,CY);},destroyChartWidget:function Bt(){if(this.rows&&this.rows.length>0&&this.rowsReusePool){this.pushToReusePool();}if(this.dockedHeaderRows&&this.dockedHeaderReplaceRows){this.clearDockedHeader();}if(this.rowsReusePool&&this.rowsReusePool.length>0){var Cb=this.rowsReusePool,CX=Cb.length,Cc=this.colInfos,Ca=Cc.length;for(var CZ=0;CZ<CX;CZ++){var CW=Cb[CZ];if(CW[P]){delete CW[P];}if(CW[BX]){delete CW[BX];}for(var CY=0;CY<Ca;CY++){var CV=CW[Cc[CY].colIdx];if(CV&&CV.destroy){CV.destroy();delete CW[Cc[CY].colIdx];}}}this.rowsReusePool=[];}},destroy:function Y(){if(this.rows){delete this.rows;}if(this.rowsReusePool){delete this.rowsReusePool;}if(this.dockedHeaderRows){delete this.dockedHeaderRows;}if(this.dockedHeaderReplaceRows){delete this.dockedHeaderReplaceRows;}if(this.selectorTargets){delete this.selectorTargets;}this._super();}});})();(function(){mstrmojo.requiresCls("mstrmojo.DynamicClassFactory","mstrmojo._CanSupportTransaction","mstrmojo._IsEditableXtab","mstrmojo.AndroidInteractiveGridXtab","mstrmojo.DocXtabModel","mstrmojo.DocInteractiveGridXtab","mstrmojo.AndroidVisTimeSeries","mstrmojo.DocVisTimeSeries","mstrmojo.VisMicroChart","mstrmojo.maps.AndroidRptMap","mstrmojo.maps.AndroidMapModel","mstrmojo.maps.AndroidDocMap","mstrmojo.ImageCarousel","mstrmojo.PhotoUploader","mstrmojo.AndroidImageLayout","mstrmojo.VisHeatMap");var B={AndroidImageMapStyle:{s:"ImageMapVisualizationDataStyle",c:"AndroidImageLayout"},ImageViewerVisualizationStyle:{s:"VisualizationDataStyle",c:"ImageCarousel"},AndroidPhotoUploaderStyle:{s:"VisualizationDataStyle",c:"PhotoUploader"},MicroChartsVisualizationStyle:{s:"MicroChartVisualizationDataStyle",c:"VisMicroChart"},HeatMapVisualizationStyle:{s:"HeatMapVisualizationDataStyle",c:"VisHeatMap"},TimeSeriesAjaxVisualizationStyle:{s:"TimeSeriesVisualizationDataStyle",c:"AndroidVisTimeSeries",dc:"DocVisTimeSeries"},AndroidMapStyle:{s:"MapVisualizationDataStyle",c:"maps.AndroidRptMap",m:"maps.AndroidMapModel",dc:"maps.AndroidDocMap"},InteractiveGridAjaxVisualizationStyle:{s:"InteractiveGridDataStyle",c:"AndroidInteractiveGridXtab",m:"DocXtabModel",dc:"DocInteractiveGridXtab"}};mstrmojo.AndroidVisList=mstrmojo.provide("mstrmojo.AndroidVisList",{getVis:function C(D){return B[D]||(mstrConfig&&mstrConfig.pluginsVisList&&mstrConfig.pluginsVisList[D])||null;},getVisClass:function A(D,E){if(E.txi&&E.t===115){D=mstrmojo.DynamicClassFactory.newComponent(D,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableXtab]);}return D;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelectorViewFactory","mstrmojo.android.DropDownList","mstrmojo.android.selectors.CheckList","mstrmojo.android.selectors.ListBox","mstrmojo.android.selectors.LinkBar","mstrmojo.android.selectors.ButtonBar","mstrmojo.android.selectors.Slider","mstrmojo.array");var E=mstrmojo.DocSelector.STYLES;var C={};C[E.RADIO]="CheckList";C[E.CHECKBOX]="CheckList";C[E.LIST]="ListBox";C[E.LINK]="LinkBar";C[E.BUTTON]="ButtonBar";C[E.SCROLLER]="Slider";C["9"]="LinkBar";var B=function B(I){var H=I.node.defn;if(H.ct==="3"){var G=I.tks;if(G&&I.defn.dk){I.model.getLayoutUnitDefn(G).dk=true;return false;}}return true;};var D=function D(H){if(H.defn.ct==="3"&&this.isSelectorSupported(H)){if(!H._panelEvtListener){var G=H.model.getUnitInstance(H.tks,1);if(G){H._panelEvtListener=G.attachEventListener("panelSelected",H.id,function(I){this._inSyncPhase=true;this.content.singleSelectByField(I.key,"v");this._inSyncPhase=false;});}}}};var F=function F(G){return new mstrmojo.android.DropDownList({postvalueChange:function(){if(!G._inSyncPhase){G.selectorControlChange(this);}}});};mstrmojo.android.DocSelectorViewFactory=mstrmojo.declare(mstrmojo.DocSelectorViewFactory,null,{scriptClass:"mstrmojo.android.DocSelectorViewFactory",getDocSelectorClass:function A(J,M,I,N){var H=this._super(J,M,I,N);return mstrmojo.DynamicClassFactory.newComponent(H,{_mixinName:"_androidDocSelector",updateWidget:function L(O){if(!B(O)){return null;}return this._super(O);},postBuildRendering:function K(){D(this);},newPulldown:F,getWidgetClass:function G(R,P,O){var Q=C[P];return(Q&&"android.selectors."+Q)||this._super(R,P,O);}},null);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.DocBuilder","mstrmojo.rw._IsReportServicesDocBuilder","mstrmojo.MobileDocLayoutViewer","mstrmojo.MobileDocXtabGraph","mstrmojo._XtabSeamlessIncrementalFetch","mstrmojo._HasScrollbox","mstrmojo.MobileXtab","mstrmojo.graph.MobileDocXtabCanvasGraph","mstrmojo.DynamicClassFactory","mstrmojo.android.DocSelectorViewFactory","mstrmojo.android.DocPanelStack","mstrmojo.android.AndroidDocPanel","mstrmojo.android.ui.DocButton","mstrmojo.android.HTMLContainer","mstrmojo._HasRelativeUrls","mstrmojo._Formattable","mstrmojo._IsDocXtab","mstrmojo._IsSelectorTarget","mstrmojo._IsInteractiveGrid","mstrmojo.DocInfoWindow","mstrmojo.android.AndroidDICConfig","mstrmojo.AndroidVisList","mstrmojo.array","mstrmojo.hash","mstrmojo.maps.AndroidDocMap","mstrmojo.maps.MobileMapInfoWindowLayoutViewer","mstrmojo.android.ui._IsTouchLink","mstrmojo.android.DocTextfield","mstrmojo.DocVisModel","mstrmojo._CanSupportTransaction","mstrmojo._IsEditableXtab","mstrmojo._HasDrillLinks","mstrmojo.DocHTMLContainer");var N=mstrmojo.DynamicClassFactory.newComponent,G=mstrmojo._HasRelativeUrls,A=mstrmojo.Obj.free,M=mstrmojo.EnumRWUnitType,J=mstrmojo.array,L=mstrmojo.hash;mstrmojo.DocXtab=N(mstrmojo.MobileXtab,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._IsDocXtab],{scriptClass:"mstrmojo.DocXtab",scrollerConfig:{scrollPast:false}});var I=(!!mstrMobileApp&&!!mstrMobileApp.useNativeMap&&mstrMobileApp.useNativeMap())?"androidmap":"jsmap";mstrmojo.maps.AndroidDocLayoutMap=N(mstrmojo.maps[I].AndroidDocMap,null,{scriptClass:"mstrmojo.maps.AndroidDocLayoutMap"});mstrmojo.MobileDocImage=N(mstrmojo.DocImage,[G],{scriptClass:"mstrmojo.MobileDocImage",relativeUrls:["v"]});mstrmojo.MobileDocHTMLContainer=N(mstrmojo.DocHTMLContainer,[G],{scriptClass:"mstrmojo.MobileDocHTMLContainer",relativeUrls:["v"]});var K=mstrmojo.DocLayout.prototype.formatHandlers.domNode;J.removeItem(K,"border");J.removeItem(K,"background-color");mstrmojo.MobileDocBuilder=mstrmojo.declare(mstrmojo.DocBuilder,[mstrmojo.rw._IsReportServicesDocBuilder],{scriptClass:"mstrmojo.MobileDocBuilder",visList:mstrmojo.AndroidVisList,createSelectorFactory:function P(){return new mstrmojo.android.DocSelectorViewFactory();},createClassMap:function C(){var S=this._super();S[M.TEXTFIELD+"B"]={n:"Button",scriptClass:"mstrmojo.android.ui.DocButton"};S[M.HTMLCONTAINER]={n:"HTMLContainer"};S[M.GRAPH]=(mstrApp.onMobileDevice()&&mstrApp.useBinaryFormat)?{n:"graph.MobileDocXtabCanvasGraph",scriptClass:"mstrmojo.graph.MobileDocXtabCanvasGraph"}:{n:"MobileDocXtabGraph",scriptClass:"mstrmojo.MobileDocXtabGraph"};S[M.IMAGE]={n:"MobileDocImage",scriptClass:"mstrmojo.MobileDocImage"};S[M.PANELSTACK]={n:"PanelStack",scriptClass:"mstrmojo.android.DocPanelStack"};S[M.PANEL]={n:"Panel",scriptClass:"mstrmojo.android.AndroidDocPanel"};S[M.TEXTFIELD]={n:"Textfield",scriptClass:"mstrmojo.android.DocTextfield"};return S;},getDefaultMojoVisModel:function H(){return mstrmojo.DocVisModel;},getLayoutViewerClass:function D(U){if(U.defn.iw){var S="MapInfoWindowLayoutViewer";if(mstrApp.onMobileDevice()){S="Mobile"+S;}return mstrmojo.maps[S];}return mstrmojo.MobileDocLayoutViewer;},newLayout:function Q(Y,V){var S=V.defn.visName;if(S){var k=V.data.gbys;var U=Y,W=L.clone(V);var f=mstrmojo.Vis.getVisGrid(Y,V,V.defn.visGK);if(f){V.data=f.data;if(V.defn.vp&&Object.keys(V.defn.vp).length>0){f.data.vp=V.defn.vp;}V.data.layoutModel=U;V.data.layoutNode=W;V.data.gbys=k;}if(V.data.gts!==undefined||V.data.series!==undefined){V.defn=Y.makeObservable(V.defn);this.addDisposable(V.defn);var a=this.visList.getVis(S),Z=(a.dc!==undefined)?a.dc:a.c,h,j;try{if(/AndroidDocMap/.test(Z)){Z="maps.AndroidDocLayoutMap";}var g=L.walk(Z,mstrmojo),d=L.walk(a.m||"DocVisModel",mstrmojo),X=this.parent.controller;h=new g({id:(f&&f.id)||V.id,node:V,n:V.defn.title,controller:X,gb:V.data.gbys,isFullScreenWidget:true});j=new d({xtab:h,controller:X,docModel:Y});h.setModel(j);}catch(b){h=A(h);j=A(j);throw b;}return h;}}return this._super(Y,V);},newHTMLContainer:function(S,V){var U=(V.defn.ht===0)?"MobileDocHTMLContainer":"android.HTMLContainer",W=mstrmojo.hash.walk(U,mstrmojo);return new W({id:V.id,node:V,model:S});},newInfoWindow:function R(S){return new mstrmojo.DocInfoWindow(S);},getLinkDrillMixins:function O(){return[mstrmojo.android.ui._IsTouchLink,mstrmojo._HasDrillLinks];},createPortlet:function E(U,V,S){if(V.defn.ifw){var X=S.selectedKey,Y=(S.model.getUnitDefinitions(X)||{})[X],W=Y&&Y.ttl;S.defn.ttl=((S.titleSrc===S.TTL_SRC_PANEL)?W:S.defn.ttl)||"";if(!mstrApp.isTablet()){S.title=S.defn.ttl;return S;}}return this._super(U,V,S);},getEditableXtab:function F(){if(!mstrmojo.EditableXtab){mstrmojo.EditableXtab=N(mstrmojo.DocXtab,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableXtab],{scriptClass:"mstrmojo.EditableXtab"});}return mstrmojo.EditableXtab;},getDefaultXtab:function B(){return mstrmojo.DocXtab;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.android.ui.RootView","mstrmojo.android.ui.ViewSwitcher","mstrmojo.android.ui.ActionBar","mstrmojo.android.ui.FolderView","mstrmojo.android.ui.ResultSetView","mstrmojo.android.ui.DocumentView","mstrmojo.graph.MobileXtabCanvasGraph","mstrmojo.android.ui.PromptsView","mstrmojo.android.ui.PropertiesView","mstrmojo.android.ui.SettingsView","mstrmojo.AndroidXtabStandalone","mstrmojo.MobileDocBuilder","mstrmojo.MobileGraph","mstrmojo.hash","mstrmojo.android.ui.NoProjectsView");mstrmojo.android.factories.ViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.android.factories.ViewFactory",newRootView:function J(N){return new mstrmojo.android.ui.RootView(N);},newActionBarView:function G(N){return new mstrmojo.android.ui.ActionBar(N);},newSwitcherView:function F(N){return new mstrmojo.android.ui.ViewSwitcher(N);},newFolderView:function K(N){return new mstrmojo.android.ui.FolderView(N);},newResultSetView:function M(N){return new mstrmojo.android.ui.ResultSetView(N);},newXtabView:function I(P){var N=P.viz,O=mstrmojo.hash.walk((N)?N.c:"AndroidXtabStandalone",mstrmojo);return new O(P);},newDocumentView:function C(O){var N=new mstrmojo.android.ui.DocumentView(mstrmojo.hash.copy(O,{cssClass:"mstrmojo-DocumentView"}));N.builder=new mstrmojo.MobileDocBuilder({parent:N});return N;},newGraphView:function A(O){var N=(mstrApp.onMobileDevice()&&mstrApp.useBinaryFormat)?mstrmojo.graph.MobileXtabCanvasGraph:mstrmojo.MobileGraph;return new N(O);},newPromptsView:function E(N){return new mstrmojo.android.ui.PromptsView(N);},newPropertiesView:function L(N){return new mstrmojo.android.ui.PropertiesView(N);},newSettingsView:function B(N){return new mstrmojo.android.ui.SettingsView(N);},newCalendarDialogView:mstrmojo.emptyFn,newNoProjectsView:function H(N){return new mstrmojo.android.ui.NoProjectsView(N);},newHeatMapEditorView:function(N){return new mstrmojo.VisHeatMapPopup(N);},newView:function D(N,O){return this["new"+N+"View"](O);}});}());