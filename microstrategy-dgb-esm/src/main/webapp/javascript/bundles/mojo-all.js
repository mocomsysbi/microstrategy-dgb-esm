var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;function ControlVersion(){var A;var B;var C;try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");A=B.GetVariable("$version");}catch(C){}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");A="WIN 6,0,21,0";B.AllowScriptAccess="always";A=B.GetVariable("$version");}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");A=B.GetVariable("$version");}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");A="WIN 3,0,18,0";}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");A="WIN 2,0,0,11";}catch(C){A=-1;}}return A;}function GetSwfVer(){var G=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var F=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var A=navigator.plugins["Shockwave Flash"+F].description;var E=A.split(" ");var C=E[2].split(".");var H=C[0];var B=C[1];if(E[3]!=""){tempArrayMinor=E[3].split("r");}else{tempArrayMinor=E[4].split("r");}var D=tempArrayMinor[1]>0?tempArrayMinor[1]:0;var G=H+"."+B+"."+D;}}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1){G=4;}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1){G=3;}else{if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1){G=2;}else{if(isIE&&isWin&&!isOpera){G=ControlVersion();}}}}}return G;}function DetectFlashVer(F,D,C){versionStr=GetSwfVer();if(versionStr==-1){return false;}else{if(versionStr!=0){if(isIE&&isWin&&!isOpera&&(versionStr.indexOf(" ")!=-1)){tempArray=versionStr.split(" ");tempString=tempArray[1];versionArray=tempString.split(",");}else{versionArray=versionStr.split(".");}var E=versionArray[0];var A=versionArray[1];var B=versionArray[2];if(E>parseFloat(F)){return true;}else{if(E==parseFloat(F)){if(A>parseFloat(D)){return true;}else{if(A==parseFloat(D)){if(B>=parseFloat(C)){return true;}}}}}return false;}}}function AC_AddExtension(C,B){if(C.indexOf("?")!=-1){var A=false;if(B.indexOf("?")==(B.length-1)){A=true;}return C.replace(/\?/,B+(A?"":"?"));}else{return C+B;}}function AC_Generateobj(F,E,A,D){var C="";if(isIE&&isWin&&!isOpera){C+="<object ";for(var B in F){C+=B+'="'+F[B]+'" ';}for(var B in E){C+='><param name="'+B+'" value="'+E[B]+'" /> ';}C+="></object>";}else{C+="<embed ";for(var B in A){C+=B+'="'+A[B]+'" ';}C+="> </embed>";}if(typeof (D)!="undefined"){var G=(typeof D=="string")?document.getElementById(D):D;G.innerHTML=C;}else{document.write(C);}}function AC_FL_RunContent(){var B=".swf";if(typeof (microstrategy)!="undefined"){B+="?"+microstrategy.getVersion();}else{if(typeof (mstrmojo)!="undefined"&&mstrmojo.App){B+="?"+mstrmojo.App.getVersion();}}var A=AC_GetArgs(arguments,B,"movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");AC_Generateobj(A.objAttrs,A.params,A.embedAttrs,A.parentDiv);}function AC_GetArgs(H,B,D,F,A){var G=new Object();G.embedAttrs=new Object();G.params=new Object();G.objAttrs=new Object();for(var E=0;E<H.length;E=E+2){var I=H[E].toLowerCase();switch(I){case"classid":break;case"parentdiv":G.parentDiv=H[E+1];case"pluginspage":G.embedAttrs[H[E]]=H[E+1];break;case"src":case"movie":var C=AC_AddExtension(H[E+1],B);if(mstrmojo){if(!mstrmojo.url){mstrmojo.requiresCls("mstrmojo.url");}if(mstrmojo.url){C=mstrmojo.url.getFullPath(C);}}H[E+1]=C;G.embedAttrs.src=H[E+1];G.params[D]=H[E+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblClick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":G.objAttrs[H[E]]=H[E+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":G.embedAttrs[H[E]]=G.objAttrs[H[E]]=H[E+1];break;default:G.embedAttrs[H[E]]=G.params[H[E]]=H[E+1];}}G.objAttrs.classid=F;if(A){G.embedAttrs.type=A;}return G;}AC_OETagsObj.prototype=new Object();function AC_OETagsObj(){}(function(){var E=new RegExp("^[A-Z0-9]{8}[A-Z0-9]{4}[A-Z0-9]{4}[A-Z0-9]{4}[A-Z0-9]{12}$","i");var A=2147483648;var G=Array.apply(null,Array(256)).map(function(H,I){return(I<16?"0":"")+I.toString(16).toUpperCase();});var F=(window.crypto&&window.crypto.getRandomValues)?function(){var H=new Uint32Array(4);window.crypto.getRandomValues(H);return{d0:H[0],d1:H[1],d2:H[2],d3:H[3]};}:function(){return{d0:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d1:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d2:Math.abs(Math.floor(Math.random()*A)^(+new Date())),d3:Math.abs(Math.floor(Math.random()*A)^(+new Date()))};};function D(H){var L=H.d0,K=H.d1,J=H.d2,I=H.d3;return G[L&255]+G[L>>8&255]+G[L>>16&255]+G[L>>24&255]+G[K&255]+G[K>>8&255]+G[K>>16&15|64]+G[K>>24&255]+G[J&63|128]+G[J>>8&255]+G[J>>16&255]+G[J>>24&255]+G[I&255]+G[I>>8&255]+G[I>>16&255]+G[I>>24&255];}mstrmojo.UUID=mstrmojo.provide("mstrmojo.UUID",{create:function C(){return D(F());},isUUID:function B(H){return H&&E.test(H.toString());}});mstrmojo.UUID.EMPTY="00000000000000000000000000000000";}());(function(){mstrmojo.models.template.MetricValue=mstrmojo.declare(null,null,{init:function G(H){this.data=H.data;this.value=H.value;},getValue:function B(){return this.value.v;},getThresholdType:function D(){return this.value.ty;},getRawValue:function A(){return this.value.rv;},getCSS:function C(){return this.data.css[this.value.cni].n;},getThresholdValue:function F(H){if(this.value.ti===undefined){return H;}return this.data.th[this.value.ti].n;},getFillColor:function E(H){if(this.value.ci===undefined){return H;}return this.data.fc[this.value.ci].n;}});}());(function(){function A(C){return function B(H){if(!this.domNode){return 0;}var G=this.children;if(H!==undefined&&!isNaN(H)){G=(G&&[G[H-1]]);}var E=(G&&G.length)||0,D=0,F;for(F=0;F<E;F++){D+=G[F]["get"+C]();}return D;};}mstrmojo._CanMeasureChildren=mstrmojo.provide("mstrmojo._CanMeasureChildren",{getHeight:A("Height"),getWidth:A("Width")});}());mstrmojo.warehouse.EnumObjectTypes={FILTER:1,METRIC:4,ATTRIBUTE:12,FACT:13,DIMENSION:14,TABLE:15,TABLE_LOGICAL_VIEW:151,TABLE_PARTITION:152,FORM:21,COLUMN:26,DBROLE:29,PROJECT:32,TRANSFORMATION:43,DBTABLE:53,LAYER:70,RELATIONSHIP:99,COMPOUND_FORM:1001,RELATIONSHIP_ATTRIBUTE:1002};(function(){mstrmojo.FlexHelper=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.FlexHelper",getWidget:function C(D){var E=D.split("x");return mstrApp.docModel.getUnitInstance(E[0],E[1]);},getZoomFactor:function A(){return mstrApp.docModel.getZoomFactor()*100;}});var B=new mstrmojo.FlexHelper();window.getFlexHelper=function(){return B;};})();mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle",NEW_GRAPH_MATRIX:"NewGraphMatrixVisualizationStyle",MAPBOX:"MapboxVisualizationStyle",KPICARD:"KPICardVisualizationStyle"};mstrmojo.EnumAuthenticationModes={DEFAULT:0,STANDARD:1,NTCREDENTIAL:2,PASSTHRU:4,ANONYMOUS:8,LDAP:16,DATABASE:32,PLUGIN:64,INTEGRATED:128,USHER:256};mstrmojo.mstr.EnumDSSXMLBaseFormType={DssXmlBaseFormReserved:0,DssXmlBaseFormHidden:-1,DssXmlBaseFormDateTime:1,DssXmlBaseFormNumber:2,DssXmlBaseFormText:3,DssXmlBaseFormPicture:4,DssXmlBaseFormUrl:5,DssXmlBaseFormEmail:6,DssXmlBaseFormHTMLTag:7,DssXmlBaseFormDate:8,DssXmlBaseFormTime:9,DssXmlBaseFormSymbol:10,DssXmlBaseFormBigDecimal:11,DssXmlBaseFormPhoneNumber:12};mstrmojo.mstr.EnumDSSXMLBaseFormType.convertDataType2BaseFormType=function(B){var A={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2};return A[B]||0;};(function(){mstrmojo.vi._MonitorsLayoutMode=mstrmojo.provide("mstrmojo.vi._MonitorsLayoutMode",{onLayoutModeChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("layoutModeChange",this.id,"onLayoutModeChange");}}});}());mstrmojo.mstr.EnumNodeProperties={NORMAL:0,DRILL:1,CONDITION:2};(function(){function D(K){var J=this.h.idx;if(J!==-1){return this.t.es[J][K];}return"";}mstrmojo.models.template.Header=mstrmojo.declare(null,null,{init:function H(J){this.h=J.h;this.t=J.t;},getName:function A(){return D.call(this,"n");},getElementId:function I(){return D.call(this,"id");},getObjectId:function B(){return D.call(this,"oid");},getElementIndex:function G(){return this.h.idx;},getActionType:function F(){return this.h.at;},isTotal:function E(){return this.h.otr===1;},getFormIndex:function C(){return this.h.fi;}});}());mstrmojo.mstr.EnumDSSXMLDrillType={DssXmlDrillReserved:0,DssXmlDrillToParent:1,DssXmlDrillToChild:2,DssXmlDrillToUnit:3,DssXmlDrillToTemplate:4,DssXmlDrillToForm:5,DssXmlDrillToDetails:6,DssXmlDrillToMetric:7,DssXmlDrillFixTemplate:8,DssXmlDrillRemoveMetric:9,DssXmlDrillRemoveUnit:10,DssXmlDrillToGraphCoordinates:11};mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7,MAPBOX:8,KPICARD:9};(function(){mstrmojo.requiresDescs(5774,2266,2287,2496,2495,2493,2267,2498,2500,2279,2491,2476,2271,2478,2268,2492,2273,2280,2490,2488,2494,2487,2269,2477,2499,2292,2489,2281,2484,2483,2480,2497,2274,2485,2486,2282,2481,2479,2482,2290,2293);var A=[{n:mstrmojo.desc(5774,"No Fill"),id:"transparent"},{n:mstrmojo.desc(2266,"Black"),id:"#000000"},{n:mstrmojo.desc(2287,"Brown"),id:"#993300"},{n:mstrmojo.desc(2496,"Olive Green"),id:"#333300"},{n:mstrmojo.desc(2495,"Dark Green"),id:"#003300"},{n:mstrmojo.desc(2493,"Dark Teal"),id:"#003366"},{n:mstrmojo.desc(2267,"Dark Blue"),id:"#000080"},{n:mstrmojo.desc(2498,"Indigo"),id:"#333399"},{n:mstrmojo.desc(2500,"Grey-80%"),id:"#333333"},{n:mstrmojo.desc(2279,"Dark Red"),id:"#800000"},{n:mstrmojo.desc(2491,"Orange"),id:"#ff6600"},{n:mstrmojo.desc(2476,"Dark Yellow"),id:"#808000"},{n:mstrmojo.desc(2271,"Green"),id:"#008000"},{n:mstrmojo.desc(2478,"Teal"),id:"#008080"},{n:mstrmojo.desc(2268,"Blue"),id:"#0000ff"},{n:mstrmojo.desc(2492,"Blue-Grey"),id:"#666699"},{n:mstrmojo.desc(2273,"Grey-50%"),id:"#808080"},{n:mstrmojo.desc(2280,"Red"),id:"#ff0000"},{n:mstrmojo.desc(2490,"Light Orange"),id:"#ff9900"},{n:mstrmojo.desc(2488,"Lime"),id:"#99cc00"},{n:mstrmojo.desc(2494,"Sea Green"),id:"#339966"},{n:mstrmojo.desc(2487,"Aqua"),id:"#33cccc"},{n:mstrmojo.desc(2269,"Light Blue"),id:"#3366ff"},{n:mstrmojo.desc(2477,"Violet"),id:"#800080"},{n:mstrmojo.desc(2499,"Grey-40%"),id:"#969696"},{n:mstrmojo.desc(2292,"Pink"),id:"#ff00ff"},{n:mstrmojo.desc(2489,"Gold"),id:"#ffcc00"},{n:mstrmojo.desc(2281,"Yellow"),id:"#ffff00"},{n:mstrmojo.desc(2484,"Bright Green"),id:"#00ff00"},{n:mstrmojo.desc(2483,"Turquoise"),id:"#00ffff"},{n:mstrmojo.desc(2480,"Sky Blue"),id:"#00ccff"},{n:mstrmojo.desc(2497,"Plum"),id:"#993366"},{n:mstrmojo.desc(2274,"Grey-25%"),id:"#c0c0c0"},{n:mstrmojo.desc(2485,"Rose"),id:"#ff99cc"},{n:mstrmojo.desc(2486,"Tan"),id:"#ffcc99"},{n:mstrmojo.desc(2282,"Light Yellow"),id:"#ffff99"},{n:mstrmojo.desc(2481,"Light Green"),id:"#ccffcc"},{n:mstrmojo.desc(2479,"Light Turquoise"),id:"#ccffff"},{n:mstrmojo.desc(2482,"Pale Blue"),id:"#99ccff"},{n:mstrmojo.desc(2290,"Lavender"),id:"#cc99ff"},{n:mstrmojo.desc(2293,"White"),id:"#ffffff"}];var E=[];mstrmojo.util.ui.ColorPicker={getBasicColors:function B(){return A.slice();},getCustomColors:function D(){return E.slice();},addCustomColor:function C(G){var F=function(H){return H.id===G;};if(!A.filter(F)[0]&&!E.filter(F)[0]){E.push({n:G,id:G});if(E.length>8){E.shift();}}}};}());(function(){if(!mstrmojo.PerformanceLogOutput){var G={},D=true;mstrmojo.PerformanceLogOutput=mstrmojo.provide("mstrmojo.PerformanceLogOutput",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function C(L,K){if(this.mUseTimer){if(K&&this.getTimerIdByName(K)>=0){return ;}var J=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:J,desc:L.functionName+": "+L.purpose});if(K){G[K]=J;}return J;}},getTimerIdByName:function F(J){var K=G[J];return isNaN(K)?-1:K;},endTimer:function A(M){var K;if(typeof M==="string"){K=this.getTimerIdByName(M);}else{K=M;}if(this.mUseTimer){var J,P=this.mTimers;if(K===undefined){J=P.pop();}else{var L,R;for(L=0;L<P.length;L++){R=P[L];if(R.timerId===K){J=R;P.splice(L,1);break;}}}if(J){var O=J.desc;var N=new Date()-J.timeStamp;var Q=[O,N];this.visPrint("%c"+J.desc+": "+N+"ms","color: blue");H(Q);delete G[M];}}},visPrint:function I(){if(D&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},recordJSHeapMemory:function E(L){var N=window.performance,M=N&&N.memory;if(this.mUseTimer&&M){L=L?(L+": "):"";var K=["usedJSHeapSize","totalJSHeapSize","jsHeapSizeLimit"],J=this;K.forEach(function(P){var Q=L+P,O=M[P]/1000;J.visPrint("%c"+Q+": "+O+"KB","color: blue");H([Q,O]);});}},exportToCsv:function B(){var K=mstrApp.rootCtrl.docCtrl.model.n+".csv",P=window.perfResults;var Q=function(V,T){var U="";var S=V[T]===null?"":V[T].toString();if(V[T] instanceof Date){S=V[T].toLocaleString();}var R=S.replace(/"/g,'""');if(R.search(/("|,|\n)/g)>=0){R='"'+R+'"';}U+=R;return U+",";};var O="";for(var M=0;M<P.length;M++){O+=Q(P[M],0);}O+="\n";for(var M=0;M<P.length;M++){O+=Q(P[M],1);}O+="\n";var J=new Blob([O],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob){navigator.msSaveBlob(J,K);}else{var N=document.createElement("a");if(N.download!==undefined){var L=URL.createObjectURL(J);N.setAttribute("href",L);N.setAttribute("download",K);N.style.visibility="hidden";document.body.appendChild(N);N.click();document.body.removeChild(N);}}window.perfResults=[];}});function H(K){var J=window.perfResults;if(!J){J=window.perfResults=[];}J.push(K);}}})();mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){function G(O,U,T,Q,S,P,R){if(U>P){return false;}return(!R)||(O===0)||((O<Q)&&(U>=S-(P-S)));}function M(R,O,V,U,Q,T,P,S){if(V>P){return false;}return(!S)||((O<Q)&&(V>=T-R.getHeight()));}function N(O,Q,P){O.renderMode="scroll";O.render();O.numChildrenRendered=0;Q.numChildrenRendered++;if(P&&!O.builtChildren){O.buildChildren();}}function E(){return this.useScrollBuffer?this.scrollBuffer:0;}mstrmojo._CanRenderDocOnScroll=mstrmojo.provide("mstrmojo._CanRenderDocOnScroll",{_mixinName:"mstrmojo._CanRenderDocOnScroll",renderMode:"scroll",scrollBuffer:0,preBuildRendering:function K(){if(!!mstrApp.features["ignore-incremental-rendering"]){this.renderMode=null;}if(this._super){this._super();}},postBuildRendering:function B(){if(this.renderMode===null){return this._super();}this.renderChildren();return true;},childRenderOnAddCheck:function(O){if(this.renderMode===null){return this._super(O);}return false;},renderChildren:function L(){var P;if(this.renderMode==="scroll"){var Q=this;while(Q){if(Q.scrollboxNode&&(Q.scrollboxWidthFixed||Q.scrollboxHeightFixed)&&Q.connectScrollbox){P=Q;break;}Q=Q.parent;}}if((this.renderMode!=="scroll")||!P){this._super();return ;}if(this.containerNode){this.scrollboxOwner=P;P.connectScrollbox(this);this.numChildrenRendered=0;var O=this.numChildren;if(O===undefined){this.numChildren=O=this._getModelChildNodes(this.node,false,0,0,true).total;}this.sectionsToRender=O;this.subsectionsToRender=0;if(O){this._startSubsectionThread(false);}}if(this.resizeOrReposition){this.resizeOrReposition();}},onscroll:function I(){if(!this.renderingSubsections){this.useScrollBuffer=true;this._startSubsectionThread(true);}},_startSubsectionThread:function A(R){var P=this;var Q=function(T,S){if(P[T]){if(S){self.clearTimeout(P[T]);}else{self.clearInterval(P[T]);}delete P[T];}};var O=function(T){P.renderingSubsections=false;var S=function(){Q("renderCtlsTimer");P.showRenderStatus(false);P.renderCtrlsInViewport();P.raiseEvent({name:"afterScroll"});P=null;};if(T){P.renderCtlsTimer=self.setTimeout(S,P.scrollboxOwner.scrollInterval+1);}else{S();}};Q("renderSubsTimer");Q("renderCtlsTimer",true);this.renderingSubsections=true;if((this.sectionsToRender||this.subsectionsToRender)&&!this._renderSubsectionsToScroll()){this.showRenderStatus(true);this.renderSubsTimer=self.setInterval(function(){if(P._renderSubsectionsToScroll()){Q("renderSubsTimer");O(R);}else{P.showRenderStatus(true);}},this.scrollboxOwner.scrollInterval);}else{O(R);}},showRenderStatus:function F(P,U){var T=this.parent;if(!T||!T.showStatus){return ;}var O=U,Q;if(P){var R=this.numChildrenRendered,S=this.numChildren;Q=S&&parseInt(100*R/S,10);O="*Rendering section "+R+" of "+S+".*";}T.showStatus(P,O,Q);},_renderSubsectionsToScroll:function J(){var Z=this.scrollboxOwner,a=Z.scrollboxTop,R=Z.scrollboxLeft,U=Z.scrollboxBottom+E.call(this),m=Z.scrollboxRight,b=U-a,X=0,W=0,V=null,c=null,Y,h;U+=1;function j(){V=W;c=V+b;}var O=this.numChildren,T=this.children||[],Q=this.model,f=this.node,e=false;for(h=0;h<O;h++){var l=T[h];if(!l){l=this.addChildren(this.builder.build(this._getModelChildNodes(f,false,h,1,true).nodes,Q))[0];T=this.children||[];}var P=e;e=!!l.defn.horiz;Y=(h>0&&l.node.data.bh);if((!e&&P)||(Y&&P)){X=0;W+=T[h-1].getHeight();if(W>U){return true;}if((c!==null)&&(W>c)){return false;}}if(!l.hasRendered){if(!G(X,W,R,m,a,U,e)){if(e){continue;}else{return true;}}this._renderSection(l,h);this.sectionsToRender--;this.subsectionsToRender+=(l.children&&l.children.length)||0;if(V===null){j();}}var S=l.children||[],g=null,d,k;for(d=0,k=S.length;d<k;d++){g=S[d];if(!g.hasRendered){if(!M(g,X,W,R,m,a,U,e)){if(e){break;}else{return true;}}N(g,l);this.subsectionsToRender--;if(V===null){j();}}if(e){X+=g.getWidth();if(X>m){break;}}else{W+=g.getHeight();if(W>U){return true;}if((c!==null)&&(W>c)){return false;}}}}return true;},_renderSection:function H(O,P){N(O,this,true);},_getModelChildNodes:function(Q,P,S,O,R){return this.model.getChildren(Q,P,S,O,R);},renderCtrlsInViewport:function D(){var X=this.scrollboxOwner,Z=X.scrollboxTop,P=X.scrollboxLeft,S=X.scrollboxBottom+E.call(this),n=X.scrollboxRight,U=0,T=0,e=false,R=this.children||[],O,V,h,Y;var d=function(c){if(e){U+=c.getWidth();}else{T+=c.getHeight();}};var l=function(u,c,t,w,r){var q=parseInt(c,10)||0,v=parseInt(t,10);return(isNaN(v))?(u+q<=r):mstrmojo.boxmodel.rangeIntersect(u+q,u+q+v,w,r);};for(h=0,Y=(R&&R.length)||0;h<Y;h++){var o=R[h];O=e;e=!!o.defn.horiz;V=(h>0&&o.node.data.bh);if((!e&&O)||(V&&O)){U=0;T+=R[h-1].getHeight();if(T>S){return ;}}if(!o.hasRendered){if(!e){return ;}continue;}var k=o.children,Q=(k&&k.length)||0,b,g;for(b=0;b<Q;b++){g=k[b];if(!g.hasRendered){break;}if(g.builtChildren&&(g.numChildrenRendered===((g.children&&g.children.length)||0))){d(g);}else{if((T+g.getHeight()>=Z)&&(!e||(U+g.getWidth()>=P))){var p=g.children,a=(p&&p.length)||0;if(!a&&!g.builtChildren){g.buildChildren();p=g.children;a=(p&&p.length)||0;}var f=[],j;for(j=0;j<a;j++){var m=p[j];if(m.hasRendered){continue;}var W=m.getFormats()||{};if(l(T,W.top,W.height,Z,S)&&l(U,W.left,W.width,P,n)){m.render();f.push(m);}}g.performCanGrowCanShrink(f,true);}d(g);}if((e&&U>n)||(!e&&T>S)){break;}}}},unrender:function C(P){var O=this.scrollboxOwner;if(O){O.disconnectScrollbox(this);}this._super(P);}});}());(function(){var A=400,B=1500;mstrmojo._CanHandleTwoClicks=mstrmojo.provide("mstrmojo._CanHandleTwoClicks",{firstClickTimeStamp:undefined,firstClickTarget:undefined,onclick:function(C){var D=new Date();timeStamp=D.getTime();if(D-this.firstClickTimeStamp<B&&D-this.firstClickTimeStamp>A){C.secondTarget=C.getTarget();C.firstTarget=this.firstClickTarget;this.onTwoClicks(C);C.cancel();}else{this.firstClickTarget=C.getTarget();this.firstClickTimeStamp=timeStamp;}if(this._super){this._super(C);}},onTwoClicks:mstrmojo.emptyFn});}());(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());mstrmojo.requiresDescs(5547,5217,5218,5219,5220,5221);var EnumWebPromptsList=[{n:"Hierarchy Qualification Prompt",desc:"Hierarchy Qualification prompt",descId:5547,value:"editPrompt",name:"hierarchyPrompt",params:{evt:3004,target:"editPrompt",promptType:3,promptExpressionType:16}},{n:"Attribute Qualification Prompt",desc:"Attribute Qualification prompt",descId:5217,name:"aqPrompt",value:"editPrompt",params:{evt:3004,target:"editPrompt",promptType:3,promptExpressionType:17}},{n:"Attribute Element List",desc:"Att Element List prompt",descId:5218,value:"editPrompt",name:"attributePrompt",params:{evt:3004,target:"editPrompt",promptType:2}},{n:"Metric Qualification Prompt",desc:"Metric Qualification prompt",descId:5219,value:"editPrompt",name:"mqPrompt",params:{evt:3004,target:"editPrompt",promptType:3,promptExpressionType:10}},{n:"Object Prompt",desc:"Object",descId:5220,value:"editPrompt",name:"objectPrompt",params:{evt:3004,target:"editPrompt",promptType:4,}},{n:"Value Prompt",desc:"Value",descId:5221,value:"editPrompt",name:"valuePrompt",params:{evt:3004,target:"editPrompt",promptType:1,constDataType:14}}];mstrmojo.mstr.ui.EnumWebPromptsList={get:function(){var A=mstrApp.servletName||mstrApp.name;return mstrmojo.array.map(EnumWebPromptsList,function(B){B.src=A+B.evt;return B;});}};mstrmojo.mstr.EnumNodeDimty={NodeDimtyReserved:0,NodeDimtyNone:1,NodeDimtyContinuation:2,NodeDimtyExclusiveContinuation:3,NodeDimtyOutputLevel:4,NodeDimtyBreakBy:5,NodeDimtyEmbedded:6,NodeDimtyUnspecified:7};(function(){function B(J,E){if(!E.domNode){return 0;}var K="_fixed"+J;if(E[K]){return E[K];}var H=E.getFormats(),I=J.toLowerCase();if(H&&H.hasOwnProperty(I)){var F=H[I];if(F.charAt(F.length-1)!=="%"){var G=parseInt(F,10);if(!isNaN(G)){E[K]=G;return G;}}}return(E.domNode["client"+J]||0);}mstrmojo._ContainsDocObjects=mstrmojo.provide("mstrmojo._ContainsDocObjects",{getHeight:function D(){return B("Height",this);},getWidth:function A(){return B("Width",this);},getMaxZIndex:function C(){var F=0;mstrmojo.array.forEach(this.children,function E(G){F=Math.max(F,G.getFormats()["z-index"]);});return F;}});}());mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};(function(){mstrmojo._Fetchable=mstrmojo.provide("mstrmojo._Fetchable",{_mixinName:"mstrmojo._Fetchable",blockBegin:1,blockCount:-1,concat:false,items:null,size:function A(){var B=this.items;return(B&&B.length)||0;},next:function(B){if(this.hasNext()){this.getItems(this.blockBegin+this.blockCount,B);}},previous:function(B){if(this.hasPrevious()){var C=this.blockBegin-this.blockCount;C=C<0?0:C;this.getItems(C,B);}},getItems:function(H,F,B){F=F||{};var E=this,D=mstrmojo.emptyFn,C=F.success||D,G=F.failure||D,I=F.complete||D;this._retrieveItems(H,{success:function(J){E.blockBegin=H;E.blockCount=J.bc||30;E.set("items",(E.concat?(E.items||[]).concat(J.items||[]):(J.items||[])));if(J.totalSize){E.totalSize=J.totalSize;}C(J);},failure:function(J){G(J);},complete:function(J){I(J);}},B);},_retrieveItems:function(D,C,B){alert("Object which mixes in this mixin has not implemented this method - _retrieveItems().");},hasNext:function(){return(((this.concat?1:this.blockBegin)+((this.items&&this.items.length)||0))<((mstrApp.isAppStatePause&&mstrApp.isAppStatePause())?this.totalSize:(this.totalSize+1)));},hasPrevious:function(){return this.blockBegin>1;}});}());(function(){mstrmojo._HasDrillLinks=mstrmojo.provide("mstrmojo._HasDrillLinks",{_mixinName:"mstrmojo._HasDrillLinks",update:function A(E){this._super(E);var B=E.defn.dl,F=E.data.dl,D=this.drillLinkItems=((B&&B.items)||[]).concat((F&&F.items)||[]).sort(function(H,G){return H.index-G.index;}),C;for(C=D.length-1;C>=0;C--){if(C&&D[C].index===D[C-1].index){D.splice(C,1);}}if(B&&B.target){for(C=0;C<D.length;C++){D[C].target=B.target;}}}});}());(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,e){var Z=null,k,c=this.getRange(),b;if(X&&X===c.startContainer){var g=c.startContainer.firstChild,U=g&&g.firstChild,d=U&&U.firstChild;if(d){c.setStart(d,c.startOffset);c.setEnd(d,c.endOffset);}}if(window.getSelection){var W=function(m,o,n){var l=m.cloneRange();l.collapse(n);l.setStartBefore(o);return l.toString().length;},S=c.startContainer,f=c.startOffset;if(S.nodeType===1){f=W(c,S,true);}Z={collapsed:c.collapsed,startContainer:S,startOffset:e?e.startOffset:f};if(!c.collapsed){var V=c.endContainer,R=c.endOffset;if(V.nodeType===1){R=W(c,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=c;}else{var j,a,Y=function(o,p){var n=o.duplicate(),l=document.body.createTextRange(),m;n.collapse(p);m=n.parentElement();l.moveToElementText(m);l.setEndPoint("EndToStart",n);return{container:m,offset:l.text.length};},h=Y(c,true),T;Z={collapsed:(c.compareEndPoints("StartToEnd",c)===0),startContainer:h.container,startOffset:h.offset};if(!Z.collapsed){T=Y(c,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());mstrmojo.vi.enums.EnumFeatures={SUPPORT_RESPONSIVE:"support-responsive",SUPPORT_RESPONSIVE_RESIZING:"support-responsive-resizing",SUPPORT_GHOST_IMG:"support-ghost-img",SUPPORT_NLP:"use-natural-language",SUPPORT_CONDITION_METRIC:"support_condition_metric",USE_WORKSTATION_NAMING_STYLE:"use-workstation-naming-style",SUPPORT_TOC_UPDATEPOISITION:"support-toc-updatePosition",SUPPORT_LIVEMODE:"support-livemode",NUMBER_FORMATTING:"number-formatting",SAVE_ANALYSIS:"save-analysis",INSERT_NEW_METRIC:"insert-new-metric",DATA_ENGINE_VERSION:"data-engine-version",WEB_DRILL_AND_LINK:"web-drill-and-link",WEB_IMPORT_DATABASE:"web-import-database"};mstrmojo.vi.enums.EnumHiddenSections={NONE:0,HEADER:1,PATH:2,DOCKTOP:4,DATASETS:8,GALLERY:16,DOCKLEFT:32,EDITOR:64,FILTER:128,PROPERTIES:256,TOV:512,VIPANE:64+128+256};(function(){mstrmojo.vi.ui.theme=mstrmojo.provide("mstrmojo.vi.ui.theme",{getThemeClass:function A(){var D=this.parent||this.opener,C="",B;while(D){var E=D.themeClassName;if(E){C=E;break;}B=D.parent||D.opener;if(B===D){break;}D=B;}return C;}});}());(function(){mstrmojo.mstr.search._IconCssClassBuilder=mstrmojo.provide("mstrmojo.mstr.search._IconCssClassBuilder",{_mixinName:"mstrmojo.mstr.search._IconCssClassBuilder",getIconCssClass:function A(B){B=B||this.data;return B.ccss||("t"+B.t+(B.st?" st"+B.st:"")+(B.isc?" isc":"")+(B.dvm?" dvm"+B.dvm:""));}});}());(function(){mstrmojo._IsSelectorTarget=mstrmojo.provide("mstrmojo._IsSelectorTarget",{_mixinName:"mstrmojo._IsSelectorTarget",setDirty:function A(C){var D=(C?"add":"remove")+"DirtyKey",B=this.parent;if(B&&B[D]){this.parent[D](this.k);}}});}());(function(){var B={NetworkVisualizationStyle:{b:"vi-network.js",s:"VisualizationServerJsonDataStyle",c:"netviz.VisNetwork",oivmb:"oivm-network.js",vib:"vi-network.js"},ReportTimelineAjaxVisualizationStyle:{s:"TimelineMojoVisualizationDataStyle",c:"VisTimeline"},visAjaxDatePicker:{s:"AjaxDatePickerReportStyle",c:"VisDateSelection"},SurveyVisualizationStyle:{s:"VisualizationDataStyle",c:"SurveyVis"},VIHeatMapVisualizationStyle:{b:"vi-heatmap.js",s:"VisualizationServerJsonDataStyle",c:"heatmap.vi.VisHeatMap",oivmb:"oivm-heatmap.js",vib:"vi-heatmap.js"},KPICardVisualizationStyle:{b:"vi-kpi.js",s:"VisualizationServerJsonDataStyle",c:"kpicard.VisKPICard",lib:'[["libraries/echarts.common.min.js"],["libraries/slick/slick.min.js"]]'},GraphMatrixVisualizationStyle:{b:"vi-gm.js",s:"VisualizationServerJsonDataStyle",c:"gm.VisGraphMatrix",oivmb:"oivm-gm.js",vib:"vi-gm.js"},ESRIMapVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"VisMapBase"},MapboxVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"mapbox.VisMapbox",lib:'[["libraries/mapbox/mapbox-gl.js"],["libraries/mapbox/supercluster.min.js"],["libraries/mapbox/turf.min.4.7.3.js"]]'},NewGraphMatrixVisualizationStyle:{b:"vi-ngm.js",s:"VisualizationServerJsonDataStyle",c:"ngm.VisNewGraphMatrix",lib:'[["../VisFramework/ngm/dist/bundle/ngm.js"]]',oivmb:"oivm-ngm.js",vib:"vi-ngm.js"},GoogleMapVisualizationStyle:{b:"mojo-map.js",s:"MojoXtabMapStyle",c:"VisMapBase"}};var E={"com.microstrategy.web.vf.viewer.EsriMapApplicationViewer":"ESRIMapVisualizationStyle","com.microstrategy.web.vf.viewer.HeatMapApplicationViewer":"VIHeatMapVisualizationStyle","com.microstrategy.flex.viewer.GraphMatrixViewer":"GraphMatrixVisualizationStyle","com.microstrategy.flex.viewer.NewGraphMatrixViewer":"NewGraphMatrixVisualizationStyle","com.microstrategy.web.vf.viewer.DatePickerApplicationViewer":"visAjaxDatePicker","com.microstrategy.flex.viewer.NetViz":"NetworkVisualizationStyle"};mstrmojo.ExpressVisList=mstrmojo.provide("mstrmojo.ExpressVisList",{getVis:function D(F){return B[F]||(mstrConfig&&mstrConfig.pluginsVisList&&mstrConfig.pluginsVisList[F])||null;},findVisName:function(F){return E[F]||(mstrConfig&&mstrConfig.pluginsWidgetVisMap[F])||null;},findWidgetName:function C(H){var G;for(var F in E){if(E.hasOwnProperty(F)&&E[F]===H){G=F;break;}}if(!G&&mstrConfig&&mstrConfig.pluginsWidgetVisMap){for(var F in mstrConfig.pluginsWidgetVisMap){if(mstrConfig.pluginsWidgetVisMap.hasOwnProperty(F)&&mstrConfig.pluginsWidgetVisMap[F]===H){G=F;break;}}}return G;},getVisClass:function A(F,G){if(G.txi&&G.t===115){F=mstrmojo.DynamicClassFactory.newComponent(F,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableXtab]);}return F;}});}());(function(){mstrmojo._CanRenderChildrenOnShow=mstrmojo.provide("mstrmojo._CanRenderChildrenOnShow",{_subs_renderOnShow:null,childRenderCheck:function B(D){if(this.renderMode!=="onshow"){return this._super(D);}if(D.visible){return this._super(D);}var C=this._subs_renderOnShow;if(!C){C={};this._subs_renderOnShow=C;}if(!C[D.id]){C[D.id]=D.attachEventListener("visibleChange",this.id,"_on_child_visibleChange");}return false;},_on_child_visibleChange:function A(C){if(this.hasRendered){var E=C&&C.src;if(E&&this.childRenderCheck(E)){var D=this._subs_renderOnShow;if(D){E.detachEventListener(D[E.id]);delete D[E.id];}E.render();}}}});}());mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5,TOC_CHAPTER:6,TOC_PAGES_LIST:7,VIZ_LAYER:8};mstrmojo.chart.model.enums.EnumDSSBaseFormType={DssBaseFormReserved:0,DssBaseFormDateTime:1,DssBaseFormNumber:2,DssBaseFormText:3,DssBaseFormPicture:4,DssBaseFormUrl:5,DssBaseFormEmail:6,DssBaseFormHTMLTag:7,DssBaseFormDate:8,DssBaseFormTime:9,DssBaseFormSymbol:10,DssBaseFormBigDecimal:11};(function(){var A={};mstrmojo.NumberFormat={getInstance:function B(F,G){var E=F+"--"+G;if(E in A){return A[E];}var C={parse:function(H){},format:function(H){}};if(F==="."&&G===","){C.parse=function(H){if(!H){return NaN;}var I=H.replace(/,/g,"");return Number(I);};C.format=function(H){return Number(H).toString();};}else{var D=new RegExp("\\"+G,"g");C.parse=function(I){if(!I){return NaN;}var H=I.replace(D,"").replace(F,".");return Number(H);};C.format=function(I){var H=Number(I).toString();return H.replace(".",F);};}A[E]=C;return C;}};})();(function(){mstrmojo.requiresDescs(9380,9381,9382,9383,9384,9385,9379,15106,15107,10639,10159,9705,9704);mstrmojo.DI.DIConstants=mstrmojo.provide("mstrmojo.DI.DIConstants",{invalidObjectNameChars:'\\"[]',invalidObjectNameCharsRegex:/[\\"\[\]]/,sourceItemLinkType:{dbList:0,oauthPara:1},setDefaultOAuthParamCMD:"MSTR_DEFAULT_OAUTH_PARAMS",actions:{none:0,importSource:1,editImport:2,transform:3,changeSheet:4,publish:5,changeMappings:6,refine:7,quickPreview:8,savePublish:9,getFlatPreview:10,refreshData:11,mergeCube:12},localStorageKey:{HGOSFileTypeTooltipPop:"HGOSFileTypeTooltipPop"},requestFlag:{mapping:1,preview:2,sourceInfo:4,refineSourceInfo:8,sheets:16,crb:32,transformations:64,transformedPreview:128,relationship:256,stateInfo:512,anyState:268435456,fullData:1024,refineInnerData:2048},formMappingFlag:{formMappingFlagReserved:0,formMappingFlagRemoveGeoRole:1,formMappingFlagRemoveTimeRole:2,formMappingFlagRemoveDeriveFlags:4},browseFlag:{reportBindingTable:1,dataPreview:4,publish:16,cubeConfig:68,reportLevelProperty:256},importBehaviorFlag:{reserved:0,newColumnsSilent:1,dataTypeSilent:2},saveAsFlags:{saveAsOverWrite:32,saveAsManaged:524288,saveAsDDA:33554432,saveAsInMemory:67108864,saveAsWithPrompts:4096,saveAsWithAnswers:4},connectLiveSupport:{connectLiveSupportUnknown:0,connectLiveSupportDDAOrInMemory:1,connectLiveSupportInMemoryOnly:2,connectLiveSupportDDAOnly:3},xdaType:{excel:272,text:288,refine:384,salesforce:337,querybuilder:352,ffsql:304,mdx:2,customFreeFormSQL:3,googleAnalytics:390,googleBigQuery:341,googleBigQueryFFSQL:342,googleBigQuerySingleTable:345,qbSingleTable:368,twitter:343,facebook:344,dataImport:256,projectsImport:400,sparkDataset:416,dataImportFileExcel:16|256,dataImportFileText:32|256,dataImportCustomSQL:48|256,dataImportTable:64|256,dataImportOAuth:80|256,dataImportBISource:144|256,dataImportOAuthSalesforce:1|336,dataImportOAuthGDocs:2|336,dataImportOAuthGDrive:2|336,dataImportOAuthDropbox:3|336,dataImportOAuthGAnalytics:4|336,dataImportOAuthGBigQuery:5|336,dataImportOAuthGBigQueryFFSQL:6|336,dataImportOAuthGBigQuerySingleTable:9|336,spark:160|256},fileTypes:[{n:"CSV/TXT",v:"CSV"},{n:"PARQUET",v:"PARQUET"},{n:"AVRO",v:"AVRO"},{n:"ORC",v:"ORC"},{n:"JSON",v:"JSON"},{n:"PARQ",v:"PARQUET",visible:false}],sourceInfoDesc:{json:"DB_FILE_TYPE_JSON"},sourceType:{file:1,salesforce:2,dropbox:3,googleDrive:4,googleAnalytics:5,googleBigQuery:6,querybuilder:7,mstrFile:8,mdx:9,hadoop:10,twitter:11,facebook:12,bisource:13,remoteProject:14,importfromcube:15,dataFromPushApi:16,newConnector:17,cloudElement:18},sourceSubtype:{localFile:1,url:2,salesforce:3,dropbox:4,googleDrive:5,googleAnalytics:6,googleBigQuery:7,querybuilder:8,samplefile:9,clipboard:10,googleBigQueryFFSQL:11,searchOnSource:12,mdx:13,hadoop:14,twitter:15,facebook:16,bisource:17,remoteProject:18,googleBigQuerySingleTable:19,hanaSingleTable:20,publicData:21,importfromcube:22,dataFromPushApi:23,cloudElement:24,},backendSourceSubtype:{localFile:65537,url:65539,samplefile:65540,clipboard:65538,newConnector:65544,cloudElement:65552,hadoopFileBrowser:65541,customSQL:131073,customSQLWizard:131074,singleTable:131075,bISources:131076,searchAsASource:131078,salesforce:196609,dropbox:196610,facebook:196611,twitter:196612,googleDrive:196613,googleAnalytics:196614,googleBigQuery:196615,googleBigQueryFFSQLModel:196616,googleBigQuerySingleTable:196617,OLAPSources:327681,publicData:65542,dataFromPushApi:65543,dataFromPushApiV2:65545,cloudElement:65552,},sourceItemType:{file:0,url:1,database:2,hadoop:3,olap:4,publicData:5,salesforce:6,googleAnalytics:7,googleBigQuery:8,googleDrive:9,dropbox:10,searchAsASource:11,clipboard:12,bISources:13,facebook:14,twitter:15,samplefile:16,importFromCube:17,addNewConnector:18,newConnector:19,cloudElement:20,unknow:-1},columnState:{reserved:0,unchanged:1,newColumn:2,missing:4,changed:8},operationMode:{create:0,edit:1,refresh:2,subscribe:3,enterCredentials:4,oauth:5,pickTable:6,hadoopPickTable:7,ffsql:8,hadoopFFsql:9},statusCode:{obtainSource:-2147071874,xformsError:-2147071872,mappingError:-2147071871,edit:1,republish:2,schedule:3,enterCredentials:4,pickTable:5,hadoopPickTable:6,ffsql:7,hadoopFFsql:8},pageType:{intro:0,file:1,database:2,emmaPreview:3,redirect:4,analytics:5,dataSelection:6,suggestNewSource:7,sourceIntro:8,sourceObjects:10,sampleFiles:11,dataset:12,externalPage:13,preview:14,clipboard:15,refine:16,parse:17,mstrFile:18,allProjectSource:19,hadoop:20,twitter:21,facebook:22,sourceObjectsDnD:23,schedule:24,publicData:25,republish:26,sourceAdmin:27,importFromCube:28,addNewConnector:29,newConnector:30,addConnectorList:31,cloudElement:32},backendError:{overwriteObject:-2147212339,noPermission:-2147214579,invalidObjectName:-2147213715,unexpectedDataType:-2147212539,noExternalSession:-2147071844,noPrivilege:-2147212082,salesforceUnsavedReport:-2147212081,salesforceObsoleteReport:-2147212080,maxSizeExceeded:-2147212076,maxSizeExceededURL:-2147212121,salesforceUnresolvedFilter:-2147212074,incrementalRefresh:-2147212287,invalidUrl:-2147212062,fileVersionError:-2147212064,emptySheet:-2147212144,refreshTokenUnavailable:-2147202875,cubeQuotaExceeded:-2147071825,notEnoughSpace:-2147071811,importedURLInvalid:-2147212122,unsupportedFileFormat:-2147212063,objectNameTooLong:-2147217407,noExternalSourceInfo:-2147215346,memoryConsumptionExceeded:-2147215346,cubeQuotaReached:-2147071870,switchingFileType:-2147212140,memoryGovernSizeExceeded:-2147181051,stringTooLong:-2147213718,missingColumn:-2147071871,dataDiscoveryError:-2147211998,refineApplyError:-2147202299,serverOutOfMemory:-2147212055,columnCountMatchError:-2147467259,incompatibleDataTypeError:-2147211983,reportTimeout:-2147212335,requestTimeout:-2147206497,databaseCredentialsNotAvailable:-2147212037,ddasupportIncompatible:-2147215326,mergeInvalidXdatype:-2147215325,notFullyControl:-2147214579,shouldBeIgnored:-2147212123,CECredentialNotAvailable:-2147215317,AuthenticationError:-2147215346,queryEngineGeneralError:-2147212544},transformation:{xtab:1,delimiter:2},application:{platform:"Platform",cloudPersonal:"Personal",cloudProfessional:"Professional"},refreshOptions:{replace:1,append:2,update:4},cubeRefreshType:{dummy:-1,reserved:0,add:1,remove:2,update:3,upsert:4,addNewTable:5,deleteTable:6,replaceTable:7,preserve:8},tableStatsExecutionAction:{reserved:0,forceExecution:1,ignore:4,requireFreshData:268435456},sourcesInfoFlags:{none:0,getReports:1,getUserName:2,getTokensInfo:4,revokeSession:8,getGAnalyticsAccount:64},queryBuilderType:{individualTable:1,multipleTables:2,queryScript:3},relationshipEditType:{create:1,changeERType:2,remove:3,flip:8001},ERType:{reserved:0,ERType11:1,ERType1M:2,ERTypeM1:3,ERTypeMM:4,ERTypeParallel:5,ERTypePerpendicular:6},RSType:{reserved:0,auto:1,geo:2,defined:3},tableStates:{newly:1,old:2},behaviorChangeFlag:{multiSheet:4,remapping:8,refreshData:16},menuItems:{SEPARATOR:-1,NONE:0,TABLE_RENAME:1,DO_NOT_IMPORT:2,FLIP_ORDER:3,DELETE:4,RELATIONSHIP_TYPE:5,ONE_TO_ONE:6,ONE_TO_MANY:7,MANY_TO_ONE:8,MANY_TO_MANY:9,REMOVE:10,REFRESH_DATA:11,REFINE:12,CANCEL_REFINE:13,UNLINK:14,CHANGE_DATA_TYPE:15,MARK_GEO_ROLES:16,CREATE_TIME_ATTRIBUTES:17,TO_METRIC:18,TO_ATTRIBUTE:19,MAP_TO_PROJECT_ATTRIBUTE:20,UNMAP:21,MODIFY_ATTRIBUTE_GROUP:22,CREATE_ATTRIBUTE_GROUP:23,HIDE_ALL_ATTRIBUTE_FORMS:24,DEFINE_RELATIONSHIPS:25,LINK:26,ITEM_RENAME:27,CREATE_MULTIFORM_ATTRIBUTE:28,EDIT_MULTIFORM_ATTRIBUTE:29,ADDTO_MULTIFORM_ATTRIBUTE:30,SHOW_ALL_ATTRIBUTE_FORMS:31,SHOW_ALL_COLUMNS:32,PARTITION:33,REFINE_RENAME:34,REFINE_DELETE:35,REFINE_DELETE_ALL:36,REFINE_RESET:37,REFINE_RESET_ALL:38,PARSE:39,IMPORT:40,UNLINK_ALL:41,CREATE_HIERARCHY_ATTRIBUTE:42,EDIT_HIERARCHY_ATTRIBUTE:43,RESET_HIERARCHY_ATTRIBUTE:44},dataTypeMenuItems:{DATE_TIME:"1",NUMBER:"2",TEXT:"3",URL:"5",EMAIL:"6",HTML_TAG:"7",DATE:"8",TIME:"9",SYMBOL:"10",BIG_DECIMAL:"11",PHONE_NUMBER:"12"},columnDataTypes:{reserved:0,integer:1,unsigned:2,numeric:3,decimal:4,real:5,dtdouble:6,dtfloat:7,dtchar:8,varChar:9,longVarChar:10,binary:11,varBin:12,longVarBin:13,date:14,dttime:15,timeStamp:16,nChar:17,nVarChar:18,nlong:22,bigDecimal:30,cellFormatData:31,utf8Char:33,int64:34},formsOptions:{CREATE_MULTIFORM_ATTRIBUTE:1,EDIT_MULTIFORM_ATTRIBUTE:2,ADDTO_MULTIFORM_ATTRIBUTE:3},hierarchyOptions:{CREATE_HIERARCHY_ATTRIBUTE:1,EDIT_HIERARCHY_ATTRIBUTE:2,RESET_HIERARCHY_ATTRIBUTE:3},rdcsFlag:{ID:1,JOIN_ID:2,FILTER_ID:3,DISTANCE:4},timeRoles:{NONE:0,DATE:1,DATE_TIME:2,TIME:3,SECOND:4,MINUTE:5,HOUR:6,DAY:7,WEEK:8,MONTH:9,QUARTER:10,YEAR:11},contextMenuType:{ITEM_MENU:0,TABLE_MENU:1,PREVIEW_ITEM_MENU:2,LINK_MENU:3},dialogType:{fixRefreshErrorDialog:1,allObjectsViewDialog:2,missingColumnsDialog:3,diPageDialog:4,refreshHistoryDialog:5,alternateSourceValidateDialog:6,ddaConfirmDialog:7,publishStatusDialog:8,saveAsDialog:9,cubesList:10,refinePage:11,multiFormEditor:12,sheetsSelectionDialog:13,partitionGroupDialog:14,parseDataDialog:15,errorDialog:16,warningDialog:17,relationDefineDialog:18,qbImportOptionDialog:19,previewRenameDialog:20,mapProjectsAttributeDialog:21,setOAuthParaDialog:22,objectPicker:23,refineClusteringPage:24,refineExtractDialog:25,refineImportDialog:26,twitterAdvOptDialog:27,credentialsDialog:28,mapProjectsAttributeDialog2:29,setWhiteListDialog:30,binaryUploadDialog:31,authenticationDialog:32,sharingDialog:33,hadoopGatewayManagerDialog:34,hadoopGatewayDialog:35,addConnectorDialog:36,hierarchyAttributeDialog:37,hierarchyAttributeResetDialog:38},dataEvents:{DATA_PREVIEW_EVENT:"dataReturned",NO_DATA_RETURNED_EVENT:"noDataReturned"},cubeSchedStatus:{unexecuted:1,successful:2,unscheduled:3,failed:4},privilegeType:{accessDatabase:1,accessFile:2,accessCloud:3},dbType:{MS_ACCESS:100,ORACLE:200,SQL_SERVER:300,INFORMIX:400,SYBASE:500,REDBRICK:600,DB2:700,TANDEM:800,TERADATA:900,UNKNOWN:1000,GENERIC:1100,SAP:1200,NETEZZA:1300,EXCEL:1400,MSFT_AS:1500,ESSBASE:1600,MYSQL:1700,POSTGRESQL:1800,HPNEOVIEW:1900,METAMATRIX:2000,DATALLEGRO:2100,COMPOSITE:2200,ASTER:2300,VERTICA:2400,OPENACCESS:2500,SYBASE_SQL_ANY:2600,SYBASE_IQ:2700,PARACCEL:2800,TM1:2900,XQUERY:3000,HIVE:3100,SAND:3200,SALESFORCE:3300,HIVETHRIFT:3400,VECTORWISE:3500,ENTERPRISEDB:3600,KOGNITIOWX2:3700,EXASOLUTION:3800,INFORMATICA:3900,SAPHANA:4000,IMPALA:4100,AMAZON_REDSHIFT:4200,DENODO:4300,GOOGLE_DRIVE:4400,DROPBOX:4500,GOOGLE_ANALYTICS:4600,GOOGLE_BIGQUERY:4700,CONNECTION_CLOUD:4800,GOOGLE_BIG_QUERY_FFSQL_MODEL:4900,PARSTREAM:5100,MONGODB:5200,MARKLOGIC:5300,BIG_DATA_ENGINE:5400,SEARCH_ENGINE_SOLR:5500,SPLUNK:5600,TWITTER:5700,FACEBOOK:5800,PIG:6400,URL:7700,newConnector:7900,LOACLFILE:8200},getCubeQuotaAndInfosOptions:{GetCubeQuotaAndInfosReserved:0,GetCubeQuotaAndInfosDefault:1,GetCubeQuotaAndInfosQuotaOnly:2,GetCubeQuotaAndInfosAll:3,GetCubeQuotaAndInfosVI:4},homepageViewMode:{GRID_VIEW:0,LIST_VIEW:1},datasetServeMode:{inMemory:1,dda:2,unknow:3},cubePollStatus:{msgID:0,result:1,prompt:2,error:3,xmlResult:21},ibmDb2Versions:[17,18,21,22,23,24,25,37,45,46,47,48,63,66,74,89,92,101,103,105,123,134,157,172,202,232],hadoopDbTypes:[3100,1100,700,4100,7300,6800,6400,8100],formCategory:{longitude:"2345134F4F5E261C3BB902A874467080",latitude:"B191051C48221A6AE44CA2B65B1B65E3"},urlAuthDBRoles:{anonymous:"CB1CB472A07E41D5AE038232839F2064",windows:"95A5ACC02FE94CBABCB65E4F2D2415B2",kerberos:"317D6F016D784836A724AD4D739E1E9C",integrated:"E966E1A0A4C949108287B2E5086B68EB"},urlAuthDBMSId:"497F2406FA154B86810C71EA3D401D6D",newConnectorDBMSId:"565D5DC3A1124726B85FE53EF992472A",hadoopGateWay:{HGoS_CONFIG_HAS_EXIT:1510,CONNOT_AUTHENTICATE:1511,SPACE_OVER:1512,FAIL_COPY_TO_HOST:1513,INSUFFICIENT:1514,DIRECTORY_NO_EXIST:1515,HGOS_DEPLOYED:1518,HGOS_DEPLOYING:1519,CONNOT_AUTHENTICATE2:1520,HGOS_RUNNING:1521,HGOS_STOPPED:1522,HGOS_NOT_DEPLOYING:1523,HGOST_TAR_NOT_EXIST:1524,HGOS_CONF_NOT_EXIST:1530},workstation:{filerBreakLine:new RegExp("[\r\n]","g"),utils:{shouldShowTitleBar:function(){var A=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&(!!mstrApp.isPopup||!!A);},setNativeWindow:function(C,F){var B=1110,E=590,D=parseInt(C,10),A=parseInt(F,10);if(!window.FormWrapper||!window.FormWrapper.setWindowFrame){return ;}if(C.match(/%$/)&&F.match(/%$/)){window.FormWrapper.setWindowContentSize(1200,680);}else{D=D<B?B:D;A=A<E?E:A;window.FormWrapper.setWindowContentSize(D,A);}},lockResize:function(){if(!window.FormWrapper||!window.FormWrapper.lockResize){return ;}window.FormWrapper.lockResize();},unlockResize:function(){if(!window.FormWrapper||!window.FormWrapper.unlockResize){return ;}window.FormWrapper.unlockResize();}}},authMode:{ANONYMOUS:0,USERNAME:1,OAUTH:2},authModePrefix:{ANONYMOUS:"AuthMode=Anonymous;URL=",USERNAME:"AuthMode=Basic;URL=",OAUTH:"AuthMode=OAuth;URL="},sdkUrl:{MARKPLACE_URL:"https://community.microstrategy.com/s/gallery?tabset-89baf=202df",QUICK_START_URL:"https://lw.microstrategy.com/msdz/MSDL/GARelease_Current/docs/projects/DataConnectorSDK/Content/topics/Quick_Start_Guide.htm"},originalConnector:{elastic:"DE4A8E15405A36D80BF1E1A2BA6F9B66",tapClicks:"1E8ADD3975DA4609B8D00E6211ACAB6A"},googleAnalyticsUrl:{queryExplorer:"https://ga-dev-tools.appspot.com/query-explorer/"},weekDay:[{n:mstrmojo.desc(9380,"Monday"),v:0},{n:mstrmojo.desc(9381,"Tuesday"),v:1},{n:mstrmojo.desc(9382,"Wednesday"),v:2},{n:mstrmojo.desc(9383,"Thursday"),v:3},{n:mstrmojo.desc(9384,"Friday"),v:4},{n:mstrmojo.desc(9385,"Saturday"),v:5},{n:mstrmojo.desc(9379,"Sunday"),v:6}],dateMon:[{n:mstrmojo.desc(15106,"1st day"),v:"1"},{n:mstrmojo.desc(15107,"15th day"),v:"15"}],timeOfDay:[{n:"12:00AM",v:"12:00AM"},{n:"1:00AM",v:"1:00AM"},{n:"2:00AM",v:"2:00AM"},{n:"3:00AM",v:"3:00AM"},{n:"4:00AM",v:"4:00AM"},{n:"5:00AM",v:"5:00AM"},{n:"6:00AM",v:"6:00AM"},{n:"7:00AM",v:"7:00AM"},{n:"8:00AM",v:"8:00AM"},{n:"9:00AM",v:"9:00AM"},{n:"10:00AM",v:"10:00AM"},{n:"11:00AM",v:"11:00AM"},{n:"12:00PM",v:"12:00PM"},{n:"1:00PM",v:"1:00PM"},{n:"2:00PM",v:"2:00PM"},{n:"3:00PM",v:"3:00PM"},{n:"4:00PM",v:"4:00PM"},{n:"5:00PM",v:"5:00PM"},{n:"6:00PM",v:"6:00PM"},{n:"7:00PM",v:"7:00PM"},{n:"8:00PM",v:"8:00PM"},{n:"9:00PM",v:"9:00PM"},{n:"10:00PM",v:"10:00PM"},{n:"11:00PM",v:"11:00PM"}],schedule:{DAILY:"Daily",WEEKDAY:"Weekday",WEEKLY:"Weekly",MONTHLY:"Monthly"},mainPage:{GRID_MODE:0,LIST_MODE:1},sourceIconClsName:{0:"ds-Generic",1:"ds-DB2",2:"ds-DB2",3:"ds-DB2",4:"ds-InformixWire",5:"ds-InformixXPS",6:"ds-PostgreSQL",7:"ds-SAP",8:"ds-SAP",9:"ds-Oracle",10:"ds-MicroSoft",11:"ds-Teradata",12:"ds-MySQL",13:"ds-GreenPlum",14:"ds-Netezza",15:"ds-WebServices",17:"ds-Infobright",18:"ds-Salesforce",19:"ds-MicroSoft",20:"ds-Actian-n",21:"ds-Amazon-Redshift",22:"ds-Impala",23:"ds-Aster",25:"ds-Actian-n",26:"ds-EnterpriseDB",27:"ds-Vertica",28:"ds-Denodo",29:"ds-CiscoDataVirtualization",31:"ds-MicroSoft",32:"ds-GoogleBigQuery",33:"ds-SAP",35:"ds-IBMBigInsights",39:"ds-TM1",41:"ds-WebServices",43:"ds-Amazon-EMR",44:"ds-Apache-Hive",45:"ds-ClouderaHive",46:"ds-HortonworksHive",47:"ds-MapRHive",48:"ds-apache",49:"ds-SharkSpark",50:"ds-MongoDB",52:"ds-MariaDB",51:"ds-MarkLogic",54:"ds-Splunk",55:"ds-DataDirectCloud",56:"ds-ParStream",58:"ds-Phoenix",59:"ds-MicroSoft",60:"ds-DB2",61:"ds-Oracle",62:"ds-Teradata",63:"ds-SAP",65:"ds-PostgreSQL",66:"ds-MySQL",67:"ds-MariaDB",68:"ds-Amazon-EMR",69:"ds-Apache-Hive",70:"ds-ClouderaHive",71:"ds-HortonworksHive",72:"ds-MapRHive",73:"ds-SharkSpark",75:"ds-Amazon-Redshift",76:"ds-PIVOTALHAWQ",77:"ds-MemSQL",78:"ds-Arcadia-Platform",79:"ds-Altibase",80:"ds-MongoDB",81:"ds-Presto",82:"ds-DB2",83:"ds-DB2",84:"ds-InformixWire",85:"ds-SAP",86:"ds-MicroSoft",87:"ds-MicroSoft",88:"ds-MemSQL",90:"ds-GreenPlum",91:"ds-PIVOTALHAWQ",92:"ds-Netezza",93:"ds-Infobright",94:"ds-Actian-n",95:"ds-Impala",96:"ds-IBMBigInsights",97:"ds-Aster",99:"ds-Actian-n",100:"ds-EnterpriseDB",101:"ds-Vertica",102:"ds-Denodo",103:"ds-CiscoDataVirtualization",105:"ds-DataDirectCloud",106:"ds-ParStream",107:"ds-Arcadia-Platform",109:"ds-Presto",110:"ds-Phoenix",111:"ds-Kognitio",112:"ds-Kognitio",113:"ds-Informatica",114:"ds-Informatica",115:"ds-Apache-Cassandra-JDBC",116:"ds-SAP",117:"ds-Actian",118:"ds-Actian",119:"ds-InformixXPS",120:"ds-Apache-Cassandra-JDBC",121:"ds-MapRDrill",122:"ds-Cirro",123:"ds-EXASolution",124:"ds-EXASolution",125:"ds-Oracle",126:"ds-Oracle",127:"ds-Snowflake",128:"ds-Snowflake",129:"ds-Amazon-Aurora",130:"ds-Amazon-Aurora",131:"ds-Amazon-Athena",132:"ds-Amazon-Athena",133:"ds-MapRDrill",134:"ds-Druid",135:"ds-Druid",139:"ds-MongoBI",157:"ds-GoogleBigQuery",161:"ds-MapD",168:"ds-HortonworksSpark",169:"ds-HortonworksSpark",170:"ds-Yellowbrick",},dispTag:{1:"Database",2:"OLAP",4:"BigData",8:"Database",16:"BigData",32:"BigData"},searchTags:{100:["Database","ODBC"],200:["Database","ODBC"],300:["Database","ODBC"],400:["Database","ODBC"],500:["Database","ODBC"],600:["Database","ODBC"],700:["Database","ODBC"],900:["Database","ODBC"],1100:["Database","ODBC"],1200:["OLAP","Cube"],1300:["Database","ODBC"],1400:["Database"],1500:["OLAP","Cube"],1600:["OLAP","Cube"],1700:["Database","ODBC"],1800:["Database","ODBC"],2200:["Database","ODBC"],2300:["Database","ODBC"],2400:["Database","ODBC"],2800:["Database","ODBC"],2900:["OLAP","Cube"],3000:["Database"],3100:["Database","BigData","Hadoop"],3300:["Cloud"],3500:["Database","ODBC"],3600:["Database","ODBC","BigData"],3800:["Database"],3900:["Database"],4000:["Database","ODBC"],4100:["Database","BigData","Hadoop"],4200:["Database","ODBC"],4300:["Database","ODBC"],4700:["Database","Cloud","BigData"],4800:["Cloud"],5200:["Database","NoSQL"],5300:["Database","NoSQL"],5400:["Hadoop"],6400:["Database","BigData","Hadoop"],6600:["Database"],6700:["Database"],6800:["BigData"],6900:["BigData"],7100:["NoSQL"],7200:["Database"],7300:["BigData","Hadoop"],7500:["Database"],7600:["Database"],8000:["Database"],8100:["BigData"],},srcItemTypes:{ALL_SOURCES:"ALL_SOURCES",STATIC_SOURCE:"STATIC_SOURCE",DBTYPE_SOURCE:"DBTYPE_SOURCE",CUSTOM_CONNECTOR:"CUSTOM_CONNECTOR",CLOUDELEMENT_CONNECTOR:"CLOUDELEMENT_CONNECTOR"},combination:{BigData:["BigData","NoSQL","Search","Hadoop"],Apps:["Apps","oAuth","Cloud","Social","BI","PublicData","CE"]},GenericDBStr:"Generic",dataSourceType:{MONGODB:"mongodb",FILE_URL:"fileUrl",FILE_LOCAL:"fileLocal",ES:"elasticsearch",DROPBOX:"dropbox",GOOGLE_DRIVE:"googleDrive",GOOGLE_ANALYTICS:"googleAnalytics",GOOGLE_BIGQUERY:"googleBigQuery",SALESFORCE:"salesforce",FILE:"file",GENERIC_JDBC:"genericJdbc"},ERDF:{ENUM_LOAD_REPORT_BROWSE_TYPE_BINDINGTABLE:1,ENUM_LOAD_REPORT_BROWSE_TYPE_DATAPREVIEW:4,ENUM_LOAD_REPORT_BINDING_FLAG_ALL:15,ENUM_LOAD_REPORT_PREVIEW_FLAG_MappingInfo:1,ENUM_LOAD_REPORT_PREVIEW_FLAG_DataInfo:2,ENUM_LOAD_REPORT_PREVIEW_FLAG_SourceInfo:4,ENUM_LOAD_REPORT_PREVIEW_FLAG_InnerDataInfo:2048,},DSSSubType:{DSSSUBTYPEATTRIBUTE:3072,DSSSUBTYPEATTRIBUTEROLE:3073,DSSSUBTYPEATTRIBUTETRANSFORMATION:3074,DSSSUBTYPEATTRIBUTEABSTRACT:3075,DSSSUBTYPEATTRIBUTERECURSIVE:3076},DSSExType:{DSSEXDISPARK:416},URLMode:{NormalUrl:0,NewConnector:1,NewConnectorEdit:2,CloudElement:3},disableFeatures:{DISABLE_CUSTOM_CONNECTOR:"disableCustomerConnector",DISABLE_DDA:"disableDDA",DISABLE_QUOTA:"disableQuota",DISABLE_HADOOP:"disableHadoop",DISABLE_BI_TOOLS:"disableBITools",DISABLE_CLIP_BOARD:"disableClipboard",DISABLE_FACE_BOOK:"disableFacebook",DISABLE_TWITTER:"disableTwitter",DISABLE_SAMPLE_FILES:"disableSampleFiles",DISABLE_PUBLIC_DATA:"disablePublicData",DISABLE_MERGE_CUBE:"disableMergeCube",DISABLE_CE_SOURCE:"disableCESource",DISABLE_FLATTERN_DB_SOURCE:"disabledSources"},DssXmlPrivileges:{DssXmlPrivilegesUseDatabaseInstanceManager:57},Enum_SourceCategoryType:{File:1,BigData:2,Database:3,OLAP:4,Customized:5,Apps:6,}});}());(function(){mstrmojo.StringBuffer=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.StringBuffer",append:function A(C){if(!this.buf){this.reset();}this.buf[++this.len]=C;return this;},reset:function B(){this.buf=[];this.len=-1;}});mstrmojo.StringBuffer.prototype.toString=function(D){var C=this.buf;return(C&&C.join(D||""))||"";};}());(function(){function A(C){return C.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");}mstrmojo._ImageHelper=mstrmojo.provide("mstrmojo._ImageHelper",{getImage:function B(D){var E=mstrApp,C=E.getConfiguration();if(D){if(D.indexOf("\\")>=0){D=D.replace(/\\/g,"/");}D=A(D);if(D===decodeURI(D)){D=encodeURI(D);}}if(C&&D&&D.indexOf("://")===-1){D=C.getHostUrlByProject(E.getCurrentProjectId())+D;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(D)):D;}});}());mstrmojo.mstr.EnumWebAPIErrorCodes={MSI_INBOX_MSG_NOT_FOUND:-2147468986,POOL_OBJECT_NOT_FOUND_BY_ID:-2147467398,DOCDATA_PREPARE_TASK_REPORT_INCOMP:-2147466604,AUTHEN_E_LOGIN_FAIL_EXPIRED_PWD:-2147216963,AUTHEN_E_LOGIN_FAILED_NEW_PASSWORD_REQD:-2147216960,AUTHEN_E_LOGIN_FAIL:-2147216959,E_INVALID_EXPRESSION:-2147214839,MSI_ADDUSERJOB_ERROR:-2147209185,E_MSI_USERMGR_USER_NOTFOUND:-2147209051,MSI_SERVER_NOT_FOUND:-2147206923,DFC_QRYENG_RES_TRUNC:-2147205488,MSI_CUBE_NOT_PUBLISHED:-2147072488,ERROR_CREATE_REPORT_INSTANCE:-2147216373,E_UNUSED:4294967295,UICMD_DEFAULT_ERROR:10};mstrmojo.EnumReadystate={IDLE:1,WAITING:3,ERROR:4,SUCCESS:5,CANCELLED:6,TIMEOUT:7};(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}this.destroy();}});}());mstrmojo.EnumSelectionType={ALL:0,ELEMENT:1,BRANCH:2,LEVEL:3,BRANCH_LEVEL:4};(function(){var B=1,C=2,A=4;mstrmojo._IsThresholdConditionTarget=mstrmojo.provide("mstrmojo._IsThresholdConditionTarget",{_mixinName:"mstrmojo._IsThresholdConditionTarget",update:function D(G){var E=G.data.tta;var F=(E&B)>0,H=(E&C)>0;if(F&&this.preservedEnabled===undefined){this.preservedEnabled=!!this.enabled;}if(H&&this.preservedVisible===undefined){this.preservedVisible=!!this.visible;}this.set("enabled",F?false:this.preservedEnabled!==undefined?this.preservedEnabled:this.enabled);this.set("visible",H?false:this.preservedVisible!==undefined?this.preservedVisible:this.visible);this.set("required",(E&A)>0);if(this._super){this._super(G);}}});}());mstrmojo.EnumRWUnitType={LAYOUT:0,HEADER:2,FOOTER:3,SUBSECTION:4,DETAILS:5,PAGEHEADER:6,PAGEFOOTER:7,PANELSTACK:8,PANEL:9,UNITCONTAINER:11,GRID:521,GRAPH:522,GRIDGRAPH:527,RECTANGLE:101,IMAGE:102,LINE:105,TEXTFIELD:106,HTMLCONTAINER:107,SELECTOR:111,ROUNDEDRECTANGLE:112,VISUALIZATION:114,MOJOVISUALIZATION:115};mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};(function(){mstrmojo.ui.editors._HostsControls=mstrmojo.provide("mstrmojo.ui.editors._HostsControls",{_mixinName:"mstrmojo.ui.editors._HostsControls",setFormatSource:function C(E){this.throwAbstractMethodError("setFormatSource");},syncControls:function A(E){var F=this._sync;this._sync=true;E.call(this);this._sync=F;},raiseFormatValueChange:function D(F,G,E){if(this._sync){return false;}this.onGroupValueChange(F,G,E);return true;},onGroupValueChange:function B(F,G,E){}});}());mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7,HISTOGRAM:8,BOXPLOT:9,WATERFALL:10};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={UNDEFINED:-1,NONE:0,HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",VIS_TYPE:"visType",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",DATA_LABEL_FONT_SIZE_CONSTRAINT:"DataLabelFontSizeConstraint",DATA_LABEL_TEXT_ANGLE:"DataLabelTextAngle",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn",SHOW_BOTH_TOTALS:"totalShw:intSumShw"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_NGM_GRID_LINES_SHOW:"allNGMGridLnShw",X_GRID_LINES_SHOW:"xGridLnShw",Y_GRID_LINES_SHOW:"yGridLnShw",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr",SELECTION_LIMIT:"slctnLmt",CONTAINER_FIT_MODE:"cntrFitMode",SHOW_MODEBAR:"showModeBar",MEAN_SD:"meanSD",POINT_SIZE:"ptSize",PTSZ_TYPE:"ptSzType",JITTER:"jitter",JTR_TYPE:"jtrType",POINT_POS:"ptPos",PTPOS_TYPE:"ptPosType",SHOW_OUTLIERS:"shwOutliers",CUSTOM_BINS_MODE:"custMode",MANUAL_BINS_MODE:"manualBinsMode",RANGE_TYPE:"rangeType",NUM_BINS:"numBins",XBINS_START:"xBinsStart",XBINS_END:"xBinsEnd",XBINS_SIZE:"xBinsSize",HAS_UNCHECKED_AUTO:"hasUncheckedAuto",HAS_UNCHECKED_DATASET_RANGE:"hasUncheckedDstRng",TOTAL_SHOW:"totalShw",TOTAL_LABEL:"totalLabel",INT_SUM_SHOW:"intSumShw",POSITIVE_COLOR:"posClr",NEGATIVE_COLOR:"negClr",TOTAL_COLOR:"totalClr",INT_SUM_COLOR:"intSumClr",INT_SUM_FULL:"intSumFull"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={NONE:1,AUTOMATIC:2,COMPACT:3,MANUAL:4};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.EnumNGMGridLines={SHOW_Y:1,SHOW_X:2,SHOW:3,HIDE:4,AUTO:5};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.gm.EnumNGMSubtype={CLUSTERED:0,STACKED:1,PERCENT:2};mstrmojo.gm.EnumBoxPlotMean={NO_MEAN:0,ONLY_MEAN:1,MEAN_STDEV:2};mstrmojo.gm.EnumBoxPlotOutliers={OUTLIERS:0,ALL_POINTS:1,JITTER:0,JTR_MAN:0.5,POINT_POS:0,POS_MAN:-1.8,POINT_SIZE:6,SIZE_MAN:10,MANUAL:1};mstrmojo.gm.EnumHistogram={AUTOMATIC:1,MANUAL:0,CUST_INPUT:2,DATASET:3,BY_BIN_SIZE:4,BY_BIN_NUMBER:5};mstrmojo.gm.EnumContainerFitModes={AUTOMATIC:0,FIT_TO_CONTAINER:1,FIT_TO_CONTENT:2};(function(){mstrmojo.url=mstrmojo.provide("mstrmojo.url",{isAbsoluteURL:function(B){return(/^(http|https|ftp|file):\/\//i.test(B));},getAbsoluteURL:function(B,C){if(this.isAbsoluteURL(B)){return B;}if(C){return C+(/\/$/.test(C)?"":"/")+B;}return"http://"+B;},getWebServerUrl:function(F){var J=null;if(F){if(mstrApp!==undefined&&mstrApp.getConfiguration){J=mstrApp.getConfiguration().getCurrentProjectWebServerUrl();}}else{var D=document.location&&document.location.href;if(D){var E=D.toLowerCase();var C="/app/",L="/servlet/",K="/asp/";var B=E.indexOf(C),H=E.indexOf(L),I=E.indexOf(K);if(B>=0){J=D.substr(0,B+1);}else{if(H>=0){if(I<0){J=D.substr(0,H+1);}else{if(I>=0){var G=(H>I)?I:H;J=D.substr(0,G+1);}}}else{if(H<0){if(I>=0){J=D.substr(0,I+1);}}}}}}return J;},getFullPath:function A(J){var E=J,C=/^[A-z]:\/\//,I,D;if(!(mstrApp&&mstrApp.isDossier)||!J||J.indexOf("data:image")===0){return J;}if(C.test(J)){E=J;}else{var H=/^(\.\.\/|\.\.\\)/;var G=/^(\.\/|\.\\)/;var F=/^(\/|\\)/;J=J.replace(H,"");J=J.replace(G,"");J=J.replace(F,"");if(mstrApp&&mstrApp.getConfiguration){var B=this.getWebServerUrl(this.isTablet);if(!B){E=J;}else{E=this.getAbsoluteURL(J,B);}}}return E;}});}());mstrmojo.vi.enums.EnumVisFilterType={KEEP_ONLY:0,ADV_QUALIFICATION:1,LINKING:2,DRILLING:3};mstrmojo.mstr.EnumDSSConsolidationType={DssNormal:0,DssDerivedElement:1,DssRecursiveDerivedElement:2};mstrmojo.mstr.EnumDSSXMLTokenTypes={EndOfInput:-1,Reserved:0,Error:1,Unknown:2,Empty:3,ExclamationPoint:33,NumberSign:35,Dollar:36,Percent:37,Ampersand:38,LeftParen:40,RightParen:41,Asterisk:42,PlusSign:43,Comma:44,MinusSign:45,Dot:46,FwdSlash:47,Colon:58,Semicolon:59,LeftAngleBracket:60,EqualSign:61,RightAngleBracket:62,QuestionMark:63,AtSign:64,LeftSquareBracket:91,RightSquareBracket:93,Caret:94,Underscore:95,LeftAccolade:123,VerticalBar:124,RightAccolade:125,Tilda:126,Literal:258,Identifier:259,Reserved1:260,DoubleQString:261,Integer:262,Float:263,AttrRef:264,DimRef:265,MetricRef:266,AggMetricRef:267,FactRef:268,ReportRef:269,FilterRef:270,RoleRef:271,TableRef:272,PromptRef:273,ColumnRef:274,AttrFormRef:275,DimFormRef:276,SimpInfixFun1:277,SimpInfixFun2:278,SimpPrefixFun:279,AggFun:280,RelativeFun:281,CompareFun:282,AndFun:283,OrFun:284,NotFun:285,BoolPrefixFun:286,IntersectFun:287,Reserved2:288,InSetFun:289,BetweenFun:290,LikeFun:291,EnhCompareFun:292,EnhBetweenFun:293,ArrowUp:294,ArrowDown:295,ArrowUpDown:296,AggFirstInFact:297,AggLastInFact:298,KwdTrue:299,KwdFalse:300,KwdBreakBy:301,KwdSortBy:302,KwdFactID:303,DateTime:304,CaseFun:305,FreeVariable:306,LongNumber:307,RWMetricRef:308,CSQLRef:309,ConsolidationRef:310,DssTokenTypeKwdCSIUpdate:312,DssTokenTypeKwdCSISet:313,DssTokenTypeKwdCSIInsert:314,DssTokenTypeKwdCSIDelete:315,DssTokenTypeKwdCSIWhere:316,DssTokenTypeKwdCSIInto:317,DssTokenTypeKwdCSIValues:318,DssTokenTypeKwdCSIFrom:319,DssTokenTypeCSIFieldUnit:321,Elements:323,ConsolidationElementRef:324,EndOfTypes:340};(function(){function E(H,G,F){return H>=G&&H<=F;}function A(G,F){return{start:G,end:F};}function C(I,G){var L=this.renderedRowsArr,K=B.call(this,I,1),J=K.index,H=L[J],F;if(!K.between){if(H&&I>H.end+1){J++;L.splice(J,0,A(I,G));}else{L.splice(J,0,A(I,G));}H=L[J];}else{H.end=Math.max(H.end,G);}while(J<L.length-1){J++;F=L[J];if(H.end+1>=F.start){H.end=Math.max(H.end,F.end);L.splice(J,1);J--;}else{break;}}}function B(G,L){var K=this.renderedRowsArr,H=0,I=K.length-1,F,J;while(H<=I){F=(H+I)/2|0;J=K[F];if(E(G,J.start,J.end+L||0)){return{between:true,index:F};}else{if(G<J.start){I=F-1;}else{H=F+1;}}}return{between:false,index:F};}mstrmojo._RowRendTracker=mstrmojo.provide("mstrmojo._RowRendTracker",{_mixinName:"mstrmojo._RowRendTracker",renderedRowsArr:undefined,init:function D(F){this._super(F);this.renderedRowsArr=[];},markPages:function(G,F){C.call(this,G,F);},searchRow:function(H){var G=B.call(this,H,0),F;if(G.between){F=this.renderedRowsArr[G.index];return{rendered:true,min:F.start,max:F.end};}return null;},unMarkAllPages:function(){this.renderedRowsArr.length=[];}});}());mstrmojo.mstr.EnumDSSXMLObjectSubTypes={Unknown:-1,Reserved:0,Filter:256,CustomGroup:257,Template:512,ReportGrid:768,ReportGraph:769,ReportEngine:770,ReportText:771,ReportDatamart:772,ReportBase:773,ReportGridAndGraph:774,ReportNonInteractive:775,ReportCube:776,ReportIncrementalRefresh:777,ReportTransaction:778,ReportEmmaCube:779,ReportEmmaIncrementalRefresh:780,Metric:1024,SubtotalDefinition:1025,SystemSubtotal:1026,MetricDMX:1027,DssSubTypeMetricTraining:1028,Style:1536,AggMetric:1792,Folder:2048,Device:2304,Prompt:2560,PromptBoolean:2561,PromptLong:2562,PromptString:2563,PromptDouble:2564,PromptDate:2565,PromptObjects:2566,PromptElements:2567,PromptExpression:2568,PromptExpressionDraft:2569,PromptDimty:2570,PromptBigDecimal:2571,Function:2816,Attribute:3072,AttributeRole:3073,AttributeTransformation:3074,AttributeAbstract:3075,AttributeRecursive:3076,Fact:3328,DimensionSystem:3584,DimensionUser:3585,DimensionOrdered:3586,DimensionUserHierarchy:3587,Table:3840,TablePartitionMD:3841,TablePartitionWH:3842,DatamartReport:4096,FactGroup:4352,Resolution:4864,AttributeForm:5376,FormSystem:5377,FormNormal:5378,Schema:5632,Format:5888,Catalog:6144,CatalogDefn:6400,Column:6656,PropertyGroup:6912,PropertySet:7168,DBRole:7424,DBRoleDataImport:7425,DBRoleOAuth:7427,DBRoleGenericDataConnector:7430,DBLogin:7680,DBConnection:7936,Project:8192,ServerDef:8448,User:8704,UserGroup:8705,Transmitter:8705,Configuration:9216,Request:9472,Search:9984,SearchFolder:10240,Datamart:10496,FunctionPackageDefinition:10752,Role:11008,RoleTransformation:11009,SecurityRole:11264,InBox:11520,InBoxMsg:11776,Consolidation:12032,ConsolidationManaged:12033,ConsolidationElement:12288,ScheduleEvent:12544,ScheduleObject:12800,ScheduleTrigger:13056,Link:13312,DBTable:13568,DBTablePMT:13569,TableSource:13824,DocumentDefinition:14080,ReportWritingDocument:14081,DocumentTheme:14082,DrillMap:14336,DBMS:14592,MDSecurityFilter:14848,MonitorPerformance:15104,MonitorJobs:15105,MonitorUserConnections:15106,MonitorDBConnections:15107,PromptAnswer:15232,PromptAnswers:15360,PromptAnswerBoolean:15233,PromptAnswerLong:15234,PromptAnswerString:15235,PromptAnswerDouble:15236,PromptAnswerDate:15237,PromptAnswerObjects:15238,PromptAnswerElements:15239,PromptAnswerExpression:15240,PromptAnswerExpressionDraft:15241,PromptAnswerDimty:15242,PromptAnswerBigDecimal:15243,PromptAnswerInt64:15244,GraphStyle:15616,ChangeJournalSearch:15872,BlobUnknown:16128,BlobOther:16129,BlobImage:16130,BlobProjectPackage:16131,BlobExcel:16132,BlobHTMLTemplate:16133,DashboardTemplate:16384,Flag:16640,ChangeJournal:16896,ExternalShortcutUnknown:17152,ExternalShortcutURL:17153,ExternalShortcutSnapshot:17154,ExternalShortcutTarget:17408,Reconciliation:17664,DerivedAttribute:3077,PaletteSystem:17920,PaletteCustom:17921,Thresholds:18432,SubscriptionAddress:65281,SubscriptionContact:65282,SubscriptionInstance:65283};(function(){mstrmojo.models.template.Title=mstrmojo.declare(null,null,{init:function G(J){this.title=J.title;},getActionType:function(){return this.title.at;},getDrillPath:function(){return this.title.dp;},getHeaderValues:function B(){return this.title.es;},getHeaderName:function F(J){return this.title.es[J].n;},getHeaderId:function F(J){return this.title.es[J].id;},getForms:function E(){return this.title.fs;},getFormId:function D(){return this.title.fid;},getFormType:function I(){return this.title.ftp;},getUnitId:function H(){return this.title.id;},getLinkMap:function C(){return this.title.lm;},getName:function A(){return this.title.n;},getUnitDssType:function(){return this.title.otp;},getSelectorControl:function(){return this.title.sc;}});}());mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionConcatAgg:177,FunctionTuple:1000};(function(){mstrmojo.cookies={};var C="%26",E="%3D",B=mstrmojo.cookies,D=function(){var F=document.cookie;if(!F||!(typeof F==="string")||F.indexOf("bSet")<0){return false;}return true;},A=function(){var F=document.cookie;F=F.split(";");for(s in F){if(F[s].indexOf("bSet")>=0){return F[s];}}return null;};mstrmojo.cookies.updateCookieSetting=function(H,N,J){try{if(!D()&&!J){return ;}var K=document.cookie,M=H+E+N+C;if(K.indexOf(H)>=0){var F=H+E,G=F+(B.getCookieSetting(H)||0),I=F+N;if(I!=G){document.cookie=K.replace(G,I);}}else{if(K.indexOf("bSet")>=0){document.cookie=K.replace("bSet=","bSet="+M);}else{if(J){document.cookie="bSet="+M+";"+K;}}}}catch(L){mstrmojo.alert(L);return ;}};mstrmojo.cookies.getCookieSetting=function(F){try{return B.getCookieList()[F];}catch(G){mstrmojo.alert(G);return ;}};mstrmojo.cookies.getCookieList=function(){try{if(!D()){return[];}var G=A(),F={},H=null;G=G.replace("bSet=","").split(C);for(H in G){H=G[H].split(E);F[H[0]]=H[1];}return F;}catch(I){mstrmojo.alert(I);return ;}};mstrmojo.cookies.enabledCookieOnBrowser=function(){var F=document.cookie;if(!F||!(typeof F==="string")){return false;}return true;};})();mstrmojo.vi.models.EnumFieldTypes={TEXT:3,IMAGE:2,HTML_CONTAINER:10};(function(){mstrmojo._IsGraphDataService=mstrmojo.provide("mstrmojo._IsGraphDataService",{handleUserSingleTap:function A(D,E,B,G,C,F){if(mstrApp.onMobileDevice()){mstrApp.serverRequest({taskId:"handleUserSingleTap",sliceID:D,nodekey:E,x:B,y:G,selectable:C},F);}}});}());mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b",KPI_V_SCROLLBAR:"kpi-vertical-scrollbar",KPI_H_SCROLLBAR:"kpi-horizontal-scrollbar"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000,AREA_MAP:1000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumSingleLegendMode:{RESTORE:1,COLLAPSE:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};(function(){mstrmojo.requiresCls("mstrmojo.cookies");mstrmojo.requiresDescs(14356,11866);mstrmojo.mstr._RecentObjectsHelper=mstrmojo.provide("mstrmojo.mstr._RecentObjectsHelper",{_mixinName:"mstrmojo.mstr._RecentObjectsHelper",handleRecentObjects:function B(){var F=this.recentObjects();var D=Math.min(F.length,10);var C=-1;for(i=0;i<D;i++){if(F[i].lastRecovered!==undefined&&F[i].lastRecovered===true){F[i].iconClass="mstrIcon-lv mstrIcon-recover";F[i].recoveryName=mstrmojo.desc(11866,"Recover #").replace("#",F[i].recoveryName);F[i].itemClass="mstr-recent-item";C=i;}else{F[i].itemClass="mstr-recent-item";F[i].iconClass="mstrIcon-lv "+F[i].iconClass;}}if(C!=-1){F[C].cssText="border-bottom: 1px solid #D6D6D6;";}var E={};if(D==0){E.recoveryURL="";E.recoveryName=mstrmojo.desc(14356,"No recent items");E.iconClass="";E.lastRecovered=false;F.push(E);}return F;},recentObjects:function A(){try{var J=window.localStorage,P=window.sessionStorage;if(!J||!window.JSON){return ;}var E=[];var N=function(U){var V="";switch(U){case 3:V="reportID=";break;case 55:V="documentID=";break;default:V="messageID=";break;}return V;};var H=function(Y){var X=Y.ty;var U="";switch(X){case 55:var W=Y.vm;switch(W){case 8192:case 2048:U="mstrIcon-lv-rw avm";break;case 1:default:U="mstrIcon-lv-rw";break;}break;case 3:var V=Y.viewMode;switch(V){case 1:U="mstrIcon-lv-g";break;case 2:U="mstrIcon-lv-gp";break;case 3:U="mstrIcon-lv-gpgs";break;default:U="";break;}break;}return U;};var T=JSON.parse(J.getItem("recentObjects"+mstrConfig.lastMsgKey));try{var S=mstrConfig.lastMsgKey,D="lastMsgID"+S,G=(JSON.parse(decodeURIComponent(mstrmojo.cookies.getCookieSetting("lastMsgID")||"{}")))[S],I=function(U){return U&&(U.length===32)&&/^[A-Z0-9]{32}$/.test(U);};}catch(R){}if(I(G)){var K={};var O="lastMsgRecoveryInfo"+S,C=J.getItem(O);if(C){var C=JSON.parse(C);K.recoveryInfo=C;K.recoveryURL=mstrmojo.addCSRFTokenToURL("?"+C.url.replace(/messageID.*/,"messageID="+G)),K.recoveryName=C.n;K.recoveryType=C.ty;K.did=C.did;K.iconClass=H(C);K.lastRecovered=true;E.push(K);}}for(var Q in T){var L=T[Q];if(L===""){continue;}var K={};var C=JSON.parse(L);K.recoveryInfo=C;K.recoveryURL=mstrmojo.addCSRFTokenToURL("?"+C.url.replace(/messageID.*/,N(C.ty)+C.did));K.recoveryName=C.n;K.recoveryType=C.ty;K.did=C.did;K.iconClass=H(C);K.lastRecovered=false;var M=mstrmojo.array.find(E,"did",K.did);if(M===-1){E.push(K);}else{E[M].recoveryInfo.imgData=K.recoveryInfo.imgData;}}return E;}catch(F){mstrmojo.errors.log(F);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Title");mstrmojo.models.template.Titles=mstrmojo.declare(null,null,{init:function D(G){var F=this.gridData=G.data,E=F.gts;this.titles=G.isRow?E.row:E.col;},size:function C(){return this.titles.length;},getTitle:function B(E){return new mstrmojo.models.template.Title({title:this.titles[E]});},getCSS:function A(E){return this.gridData.css[this.titles[E].cni].n;}});}());mstrmojo.requiresCls("mstrmojo.gm.GMEnums");var $GM=mstrmojo.gm,CHART_TYPE=$GM.EnumGraphType,PRP_DATA_LABELS=$GM.EnumDataLabels,PRP_LEGEND=$GM.EnumLegend,PRP_MIN_SIZE_TYPE=$GM.EnumMinSizeType,PRP_FIT_TO=$GM.EnumFitTo,ENUM_FIT_MODES=$GM.EnumContainerFitModes,NGM_GRID_LINE=$GM.EnumNGMGridLines;var ARIAL="Arial",OPEN_SANCE="Open Sans",ALL="ALL";var ENUM_LAYOUT_THEME={DEFAULT:"spatial",CLASSIC:"classic"};var classicProps={THEME_STYLE:ENUM_LAYOUT_THEME.CLASSIC,LAYOUT:{allFF:ARIAL,titleFF:ARIAL,dlvPadding:2,dlvMargin:4,dlvLOH_Compensation:1,ucTBLOHeight:1,drpChildPadding:4,drpLOHW_Compensation:0,cueBottomOffset:1},GRID:{paddingSize:5,mRatio:2,lRatio:3,gridTemplateVisible:false},HEATMAP:{smallGap:2,middleGap:4,largeGap:6,largerGap:8},NGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={cntrFitMode:ENUM_FIT_MODES.AUTOMATIC};return A;}())},OGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE,minRowHeight:20,fitTo:PRP_FIT_TO.AUTOMATIC};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={};A[CHART_TYPE.BAR]={shpBdrThk:1,shpBdrStyle:0};A[CHART_TYPE.PIE]={shpBdrThk:1,shpBdrStyle:0};A[CHART_TYPE.GRID]={shpFillTrans:70};return A;}())},KPI:{fontFamily:ARIAL,defaultFontClr:{1:"#444649",2:"#FFFFFF",3:"#FFFFFF",4:"#FFFFFF"}}},defaultProps={THEME_STYLE:ENUM_LAYOUT_THEME.DEFAULT,LAYOUT:{allFF:OPEN_SANCE,titleFF:OPEN_SANCE,dlvPadding:0,dlvMargin:0,dlvLOH_Compensation:0,ucTBLOHeight:0,drpChildPadding:12,drpLOHW_Compensation:12,cueBottomOffset:-2},GRID:{paddingSize:4.52,mRatio:1050/452,lRatio:1205/452,gridTemplateVisible:true},HEATMAP:{smallGap:1,middleGap:3,largeGap:5,largerGap:5,cellTextSize:11,fontFamily:"Open Sans SemiBold",leftPadding:10,topPadding:8,lineHeightTime:1.3,marginTop:"3px"},NGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE};A[CHART_TYPE.WATERFALL]={dataLabels:PRP_DATA_LABELS.HIDE};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={cntrFitMode:ENUM_FIT_MODES.FIT_TO_CONTENT,dlFntFml:OPEN_SANCE,rfLnFntFml:OPEN_SANCE,lgdFntFml:OPEN_SANCE,xAxTtFntFml:OPEN_SANCE,xAxLbFntFml:OPEN_SANCE,yAxTtFntFml:OPEN_SANCE,yAxLbFntFml:OPEN_SANCE,allTxtFntFml:OPEN_SANCE,rwHdrTxtFntFml:OPEN_SANCE,colHdrTxtFntFml:OPEN_SANCE,rwVlTxtFntFml:OPEN_SANCE,colVlTxtFntFml:OPEN_SANCE,ttlFntFml:OPEN_SANCE,dlFntSz:"9pt",rfLnFntSz:"9pt",lgdFntSz:"9pt",xAxTtFntSz:"9pt",xAxLbFntSz:"9pt",yAxTtFntSz:"9pt",yAxLbFntSz:"9pt",allTxtFntSz:"9pt",rwHdrTxtFntSz:"9pt",colHdrTxtFntSz:"9pt",rwVlTxtFntSz:"9pt",colVlTxtFntSz:"9pt",ttlFntSz:"9pt"};A[CHART_TYPE.WATERFALL]={yGridLnShw:NGM_GRID_LINE.AUTO,xGridLnShw:NGM_GRID_LINE.AUTO};return A;}())},OGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE,minRowHeight:20,fitTo:PRP_FIT_TO.NONE};A[CHART_TYPE.PIE]={legend:PRP_LEGEND.HIDE,legendShow:false,dataLabels:PRP_DATA_LABELS.SHOW_TEXT_ONLY};A[CHART_TYPE.SCATTER]={minSizeType:PRP_MIN_SIZE_TYPE.AUTO};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={rwHdrShw:false,colHdrShw:false,dlFntFml:OPEN_SANCE,rfLnFntFml:OPEN_SANCE,lgdFntFml:OPEN_SANCE,xAxTtFntFml:OPEN_SANCE,xAxLbFntFml:OPEN_SANCE,yAxTtFntFml:OPEN_SANCE,yAxLbFntFml:OPEN_SANCE,allTxtFntFml:OPEN_SANCE,rwHdrTxtFntFml:OPEN_SANCE,colHdrTxtFntFml:OPEN_SANCE,rwVlTxtFntFml:OPEN_SANCE,colVlTxtFntFml:OPEN_SANCE,ttlFntFml:OPEN_SANCE,dlFntClr:3815477,rfLnFntClr:3815477,lgdFntClr:3815477,xAxTtFntClr:3815477,xAxLbFntClr:3815477,yAxTtFntClr:3815477,yAxLbFntClr:3815477,allTxtFntClr:3815477,rwHdrTxtFntClr:3815477,colHdrTxtFntClr:3815477,rwVlTxtFntClr:3815477,colVlTxtFntClr:3815477,ttlFntClr:3815477,yAxTtFntStyle:1,xAxTtFntStyle:1,rwHdrTxtFntStyle:1,colHdrTxtFntStyle:1,dlFntSz:"9pt",rfLnFntSz:"9pt",lgdFntSz:"9pt",xAxTtFntSz:"9pt",xAxLbFntSz:"9pt",yAxTtFntSz:"9pt",yAxLbFntSz:"9pt",allTxtFntSz:"9pt",rwHdrTxtFntSz:"9pt",colHdrTxtFntSz:"9pt",rwVlTxtFntSz:"9pt",colVlTxtFntSz:"9pt",ttlFntSz:"9pt"};A[CHART_TYPE.AREA]={shpBdrThk:1,shpFillTrans:100,shpBdrClr:15461355};A[CHART_TYPE.BAR]={shpBdrClr:15461355,shpBdrStyle:0,shpBdrThk:1,shpFillTrans:100};A[CHART_TYPE.LINE]={shpFillTrans:100};A[CHART_TYPE.PIE]={shpBdrThk:1,shpBdrStyle:0,shpFillTrans:100,shpBdrClr:15461355};A[CHART_TYPE.SCATTER]={shpBdrStyle:99,shpFillTrans:40};A[CHART_TYPE.BUBBLE]={shpBdrStyle:99,shpFillTrans:40};A[CHART_TYPE.GRID]={shpBdrThk:1,shpFillTrans:100};return A;}())},KPI:{fontFamily:OPEN_SANCE,defaultFontClr:{1:"#35383A",2:"#FFFFFF",3:"#FFFFFF",4:"#FFFFFF"}}};mstrmojo.vi.enums.EnumThemeProperties={CLASSIC_THEME_PROPS:classicProps,DEFAULT_THEME_PROPS:defaultProps};mstrmojo.vi.enums.EnumThemeProperties.SUBTYPE={GRID:"GRID",LAYOUT:"LAYOUT",HEATMAP:"HEATMAP"};mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME=ENUM_LAYOUT_THEME;mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_STYLE={DEFAULT:0,CARD:1,FLAT:2};(function(){mstrmojo.requiresCls("mstrmojo.EnumReadystate");var C=mstrmojo.EnumReadystate;function E(G){return(G.getKey&&G.getKey())||G.k;}mstrmojo._IsDocController={_mixinName:"mstrmojo._IsDocController",_getXtabCallback:function(L,H){var G={},J=G[E(L)]=L.defn,K=this,I=K.model;return I.newCallback({submission:function(){if(J.set){J.set("readyState",C.WAITING);}},success:function(N){var M=N.pukeys,O=M&&M.split("\u001E");if(M){G=I.getUnitDefinitions(M);}I.partialUpdate(N.data,G,H===false?undefined:N.defn,O,N.puFilters);},failure:function(M){if(!(mstrApp.isSingleTier&&M.code===403)){mstrmojo.alert(M.code+": "+M.message);}},complete:function(){if(J.set){J.set("readyState",C.IDLE);}K.docRequestComplete();}});},_addNodeKeyToAction:function(G,H){H.nodeKey=E(G);return H;},onGridSelector:function(H,K){var G=this.model,J=[].concat(G.getTargetInfoWin(K.ifw)).concat(G.getTargetInfoWin(K.tks));K.sid=H.sid;if(H.isInFilterPanel&&H.isInFilterPanel()&&H.filterCtrl){H.filterCtrl.cacheUpdateAction(K);}else{G.slice(K);}if(J&&J.length){var I;for(I=0;I<J.length;I++){G.showInfoWin(J[I],K.anchor,"h",true,null,K.sid);}}},onVisSelector:function(H,J){if(J.anchor){var G=this.model,I=G.getTargetInfoWin(J.tks);if(I&&I.length){G.showInfoWin(I[0],J.anchor,"h",true);}}if(H.xtabModel&&H.xtabModel.docModel&&H.xtabModel.docModel.slice){H.xtabModel.docModel.slice(J);}},isInRequest:function D(){var G=!!this._inProcess;if(!G){this._inProcess=true;}return G;},docRequestComplete:function F(){this._inProcess=false;},nudgeWidget:mstrmojo.emptyFn,getGroupByElements:function B(I){var M=[],L;while(I){L=I.node&&I.node.data&&I.node.data.pbes;if(L){break;}I=I.parent;}if(L){var J=this.model.data.elems;var H=L.length,K;for(K=0;K<H;K++){var G=L[K];M.push(isNaN(G)?G:J&&J[G]);}}return M;},setData:function A(H,J){var G=this.view,I=J;if(J&&G&&G.unloadLayouts){G.unloadLayouts(null,false);I=false;}this.model.loadLayout(H,I);if(this.hasPageBy&&this.hasPageBy()){this.getPageByTree(true);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.EnumReadystate");var D=mstrmojo.EnumReadystate;var A=1200;var C=function(F,E){if(E){E.style.display=F?"block":"none";}};mstrmojo._HasWaitIcon={waitHandle:null,postBuildRendering:function B(){if(!this._rsl){var E=this.id;this._rsl=this.defn.attachEventListener("readyStateChange",E,function(G){if(!this.hasRendered){return ;}switch(G.value){case D.WAITING:if(!this.waitIcon&&this.domNode){var H=document.createElement("div");H.className="mojo-overlay-wait";H.innerHTML='<div class="overlay"></div><div class="icon"></div>';this.domNode.appendChild(H);this.addSlots({waitIcon:H});}var F=this.waitIcon;if(A){this.waitHandle=window.setTimeout(function(){if(mstrmojo.all[E]){mstrmojo.all[E].waitHandle=null;}C(true,F);},A);}else{C(true,F);}break;case D.IDLE:if(this.waitHandle){window.clearTimeout(this.waitHandle);this.waitHandle=null;}C(false,this.waitIcon);break;}});}return this._super();}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.StringBuffer");var G=mstrmojo.dom,T=mstrmojo.hash,P=mstrmojo.array;function X(){T.forEach(this.ifwMap,function(a){a.destroy();});this.ifwMap={};}function A(){var a=[],c=null,b=null;T.forEach(this.ifwMap,function(d){if(d.visible){a.push({psId:d.psId,psKey:d.psKey,autoCloseLocks:d.autoCloseLocks,lockInfoWinId:d.lockIW?d.lockIW.id:false,anchorPos:d.anchorPosition||G.position(d.anchor,true),anchorOrn:d.anchorOrientation});}});if(a.length>0){c=this.getSelectedLayoutWidget();b=c&&c.getScrollPos();}return{ifwRecords:a,docScrollRecord:b};}function O(j){var b=(j&&j.ifwRecords)||[],g=j&&j.docScrollRecord,e=this.getSelectedLayoutWidget(),f=this,h={};if(b.length>0){if(g&&e){e.scrollTo(g);}var c=this.model,d=c.getCurrentLayoutKey(),a=c.getLayoutDataCache(d);P.forEach(b,function(k){if(k.lockInfoWinId){h.lockInfoWinId=k.lockInfoWinId;}var l=window.setInterval(function(){if(a[k.psId]){window.clearInterval(l);f.showInfoWindow(k.psId,k.psKey,h,null,k.anchorOrn,k.anchorPos,k.autoCloseLocks);}},10);});}}function K(){if(mstrmojo.DICPopup&&mstrmojo.DICPopup.cancel){mstrmojo.DICPopup.cancel();}}function S(){P.forEach(this.xtabStyleSheets,function(b){var a=b.parentNode;if(a){a.removeChild(b);}});}function Z(b,e){var c=this.getLayout(b),a=c.docGroupBy,d=this.controller;if(a){a.set("data",e.groupbys);c.gb=e;}if(d.getPageByTree){d.getPageByTree(true);}}mstrmojo._IsRwDocument=mstrmojo.provide("mstrmojo._IsRwDocument",{_mixinName:"mstrmojo._IsRwDocument",updateXtabStyles:function M(g,c){var n=this.xtabStyleSheets&&this.xtabStyleSheets[0],m=this.styleList||{},b=function(u,r){var t;for(t in r){var q=r[t].css||"";if(r[t].app){q=(u[t]||"")+q;}u[t]=q;}return u;},o=document;if(!m[g]){m[g]=b({},this.model.getSelectedXtabStyles(g));}b(m[g],c);if(!this.xtabStyleSheets){this.xtabStyleSheets=[];n=this.xtabStyleSheets[0]=o.getElementsByTagName("head")[0].appendChild(o.createElement("style"));}var p=new mstrmojo.StringBuffer(),e,f;for(e in m){for(f in m[e]){p.append(m[e][f]);}p.append("\n");}var d=p.toString();if(n&&d){n=n.styleSheet||n;if(G.isWK){var l=n.firstChild;if(l){l.nodeValue=d;}else{n.appendChild(o.createTextNode(d));}}else{if(G.isIE6||G.isIE7||G.isIE8||G.isIE9){n.cssText=d;var k,j,a,h;for(k=1;n.rules.length===4095&&o.styleSheets.length<31;k++){j=n.rules[4094];a=new RegExp(j.selectorText,"i");h=d.search(a);if(h===-1){break;}h=d.indexOf("}",h+1);d=d.slice(h+1);if(!this.xtabStyleSheets[k]){this.xtabStyleSheets[k]=o.getElementsByTagName("head")[0].appendChild(o.createElement("style"));}n=this.xtabStyleSheets[k].styleSheet;n.cssText=d;}}else{n.innerHTML=d;}}}this.styleList=m;},postBuildRendering:function W(){var a=document.getElementsByTagName("head")[0];P.forEach(this.xtabStyleSheets,function(b){a.appendChild(b);});return this._super();},buildChildren:function B(e){var j;try{var f=this.model;if(f){var g=this.buildSubs||{},p=f.id+"-partialUpdate",b=f.id+"-rebuildLayout",l=f.id+"-updateStyles",d=f.id+"-showInfoWin",c=this.id;var k=this,o=function(){P.forEach(k.getLayouts(),function(m){if(m.k!==f.currlaykey){m.defn.loaded=false;}});};if(g[p]===undefined){var n=function a(z){var t=this.model,r=t&&t.getLayoutDataCache(t.getCurrentLayoutKey()),q=z&&z.ids;if(T.isEmpty(r)||!q){return ;}P.forEach(z&&z.tree&&z.tree.layouts,function(m){if(m.k===t.currlaykey){this.updateXtabStyles(m.k,m.xtabStyles);if(m.gbys){Z.call(this,m.k,m.gbys);}return false;}return true;},this);var v=T.forEach,AA=false,w={update:q.upd,refresh:q.tgts,adjustSectionSize:q.secs};v(q.ifws,function(AC,AB){var m=mstrmojo.all[AC+"_ifw"];if(m&&m.visible){this.updateInfoWindowPS(AC,AB);}},this);v(w,function(AB,m){v(AB,function(AE,AI){var AD=mstrmojo.all[AI],AH;if(AD&&AD[m]!==undefined){var AG=r[AI],AC=(m==="update"?AG:null),AF=m;if(m==="update"){if(AD.updateForPU){AF="updateForPU";}else{AD.node=AG;}}else{if(m==="refresh"&&AD.refreshForPU){AF="refreshForPU";}}AH=AD[AF](AC);if(m==="adjustSectionSize"&&AH){AA=AA||(!!AH.heightReduced);}}},this);},this);var u=this.getSelectedLayoutWidget();if(AA){u.notifyScrollListeners();}var x=u.docLayout;if(x){x.resizeOrReposition();}if(z&&z.unloadCache){o();}};g[p]=f.attachEventListener("partialUpdate",c,n);}g[b]=g[b]||f.attachEventListener("rebuildLayout",c,function(m){var r=m&&m.restoreIW,q;if(r){q=A.call(this);this.model.aws=null;}this.onLayoutRebuilt(this.rebuildLayout(m.src.currlaykey,this.getLayouts()));if(m&&m.unloadCache){o();}if(r){O.call(this,q);}});g[l]=g[l]||f.attachEventListener("updateStyles",c,function(m){this.updateXtabStyles(m.key,m.updatedStyles);});g[d]=g[d]||f.attachEventListener("showInfoWin",c,function(m){this.showInfoWindow(m.psId,m.psKey,m.anchor,m.invalidate,m.anchorOrientation,m.anchorPosition);});this.updateXtabStyles(f.getCurrentLayoutKey());f.attachEventListener("refresh",this.id,function(){this.refresh();});}j=this._super(e);}catch(h){mstrmojo.err(h);}return j;},updateInfoWindowPS:mstrmojo.emptyFn,showInfoWindow:function J(b,t,k,m,p,q,AC){var d=this.model,g=d.getLayoutDataCache(d.getCurrentLayoutKey()),w=this.builder,a=g[b]&&g[b].defn,f=a&&a.iwpl,v=b+"_ifw",AB=mstrmojo.all[v],x=this.domNode,c=mstrmojo.DocInfoWindow.PLACEMENT.FIXED,z=function(AD,AE,AF,AH,AG){if(f===c){if(AE){var AI=G.delta(AE,x);AD.popPosition={left:(AI&&AI.x)?AH+AI.x:AH,top:(AI&&AI.y)?AG+AI.y:AG};}else{if(AF){AD.popPosition={left:(AF.scrollboxLeft)?AH-AF.scrollboxLeft:AH,top:(AF.scrollboxTop)?AG-AF.scrollboxTop:AG};}else{AD.popPosition={left:AH,top:AG};}}}};var o=this.getLayout(d.getCurrentLayoutKey());if(AB){if(m){AB.refresh();}AB.anchorOrientation=p;AB.anchorPosition=q;if(f===c){if(!AB._ifwpdn){var l=g[b]&&g[b].p,r=l&&d.getUnitInstance(l.k,l.wid);AB._ifwpdn=r&&r.domNode;}else{if(AB._ifwpdn.style.display==="none"){AB._ifwpdn=document.getElementById(AB._ifwpdn.id);}}}z(AB,AB._ifwpdn,o,AB._ifwfl,AB._ifwft);AB.open(this,{anchor:k,boundary:x});}else{var h={opener:this,anchor:k,anchorOrientation:p,boundary:x,parent:this,builder:w,model:this.model,psKey:t,psId:b,id:v,autoCloses:true,locksHover:true,closeOnClick:false,autoCloseLocks:AC,anchorPosition:q};if(f){f=parseInt(f,10);h.placement=f;if(f===c){var j=a.fmts,e=h._ifwfl=j&&j.left&&parseInt(j.left.replace("px",""),10),u=h._ifwft=j&&j.top&&parseInt(j.top.replace("px",""),10),l=g[b]&&g[b].p,r=l&&d.getUnitInstance(l.k,l.wid),n=h._ifwpdn=r&&r.domNode;z(h,n,o,e,u);}}AB=w.newInfoWindow(h);this.renderInfoWindow(AB);var AA=this.ifwMap=(this.ifwMap||{});AA[b]=AB;}},renderInfoWindow:function L(a){a.render();},_lockInfoWinContainer:function I(c){var f=this.ifwMap,b=function(g,h){return function(){g.releaseLock(h);};},a;for(a in f){var d=f[a],e=c.xtab;if(d&&e&&G.contains(d.infoNode,e.domNode,true,document.body)){d.registerLock(e);c.onClose=b(d,e);break;}}},unrender:function V(a){X.call(this);this._super(a);S.call(this);},getLayouts:function Q(){return this._layouts;},getLayout:function U(a){a=a||this.model.getCurrentLayoutKey();var b=this.getLayouts();return b[P.find(b,"k",a)];},getSelectedLayoutWidget:mstrmojo.emptyFn,needLoadLayout:function R(a,b){return a.defn&&(b&&b.reload||(!!(b&&b.panelKey))||(a.defn.loaded===false)||(this.model.zt&&(window.mstrMobileApp!==undefined)&&(a.defn.lastOrientation!==mstrMobileApp.getOrientation())));},getNewLayout:function F(b,g,a,k,c){var f=this,d=f.model,j=b.layoutKey,e=g[P.find(g,"k",j)];if(this.needLoadLayout(e,b)){var h=k.success;k.success=function(l){d.replaceLayout(j,l,false);d.currlaykey=j;if(a){f.selectLayout(e,false,null,c);}var m=f.rebuildLayout(j,g,false);if(f.controller.getPageByTree){f.controller.getPageByTree(true);}h(m);};this.loadDocLayout(b,k,c);}else{if(a){this.selectLayout(e,true,{success:function(l){T.copyProps(["bs"],l,d);}},c);}if(!e.hasRendered){e=this.rebuildLayout(j,g);if(f.controller.getPageByTree){f.controller.getPageByTree(true);}}k.success(e);}},selectLayout:function E(d,e,g,f){var a=this.model,b=d.k,c=(b!==a.currlaykey);a.currlaykey=b;if(this.controller){this.controller.updateZoom();}this.restoreLayoutState(d);if(e&&c){this.setCurrentDocLayout(b,g,f);}else{if(g&&g.complete){g.complete();}}return d;},rebuildLayout:function C(b,j,l){var e=this.model,d=P.find,f=j[d(j,"k",b)],a=e.getChildren(this.node,false);var g=a[d(a,"k",b)];if(window.mstrMobileApp!==undefined){g.defn.lastOrientation=mstrMobileApp.getOrientation();}var h=this.replaceLayout(f,g);this.updateXtabStyles(b,e.getSelectedXtabStyles(b));if(l!==false){X.call(this);}K();return h;},destroy:function Y(){X.call(this);if(this._super){this._super();}S.call(this);},replaceLayout:mstrmojo.emptyFn,restoreLayoutState:mstrmojo.emptyFn,onLayoutRebuilt:mstrmojo.emptyFn,unloadGbLayuts:function H(c){var h=this.getLayouts(),e=this.model.getCurrentLayoutKey(),g,f,j,b,d,a;g=this.getLayout();b=g.gb&&g.gb.groupbys;for(d=0;d<b.length;d++){j=b[d];if(j.k===c){a=j.unit.target.did;break;}}for(f=0;f<h.length;f++){g=h[f];if(g.k===e){continue;}b=g.gb&&g.gb.groupbys;if(b&&b.length){for(d=0;d<b.length;d++){j=b[d];if(j.unit.target.did===a){g.defn.loaded=false;break;}}}}},loadDocLayout:function N(a,c,b){this.model.getDataService().loadDocLayout(a,c,b);},setCurrentDocLayout:function D(a,c,b){this.model.getDataService().setCurrentDocLayout(a,c,b);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash");var E=mstrmojo.func.wrapMethods;function B(L,I,K,H,J){return E({success:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("success",I.target,JSON.stringify(I.memo),JSON.stringify(M));}},complete:function(){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("complete",I.target,JSON.stringify(I.memo));}J.removeCallback(K,H);},failure:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("failure",I.target,JSON.stringify(I.memo),JSON.stringify(M));}}},L);}mstrmojo._CanProxyCallback=mstrmojo.provide("mstrmojo._CanProxyCallback",{_mixinName:"mstrmojo._CanProxyCallback",callbacks:null,isCallbackReceiver:false,newCallback:function D(O){return O;var K=this.callbacks,I=mstrmojo.hash.copy(O),P=(O.index!==undefined)?String(O.index):"index",N=arguments.callee.caller.arguments,L,J,M,H=O.method||"anonymous";if(!K){K=this.callbacks={};}if(!K[H]){K[H]={};}if(!this.isCallbackReceiver){for(J=0,M=N.length;J<M;J++){L=N[J];if(L&&L.target){I=B(I,L,H,P,this);break;}}}if(!O.method){I.proxy=this.getCallbackMemo();}K[H][P]=I;return I;},anonymous:function(J,K,I,H){if(!this.isCallbackReceiver){K=B(K,H,"anonymous","index",this);mstrApp.serverRequest(J,K,I);}},getCallback:function C(K,J){var H=J||"index",I=this.callbacks;return I&&I[K]&&I[K][H];},removeCallback:function G(K,J){var H=J||"index",I=this.callbacks;if(I&&I[K]){delete I[K][H];if(mstrmojo.hash.isEmpty(I[K])){delete I[K];}}},getCallbackMemo:function F(I,H){return{target:'mstrmojo.all["'+this.id+'"].receiveCallback',memo:{method:I||"anonymous",index:H||"index"}};},receiveCallback:function A(L,J,K){var M=J.method,I=J.index,H=this.getCallback(M,I);if(H&&L&&H[L]){H[L](K);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.func");mstrmojo.ACL.UserDataService=mstrmojo.provide("mstrmojo.ACL.UserDataService",{topgroups:null,userCandidates:null,getMembers:function(G,E){var F={taskId:"getUserEntityInfo",blockBegin:G.blockBegin,blockCount:G.blockCount,userEntityID:G.data.did,userEntityName:G.data.n||"",incremental:true,outputElements:G.outputElements||3};mstrmojo.xhr.request("POST",mstrConfig.taskURL,E,F);},getTopLevelGroups:function D(G,F){var E=this;if(this.topgroups){F.success({items:this.topgroups});return ;}F.success=mstrmojo.func.composite([F.success,function(H){E.topgroups=H.items;}]);this.getUsers({topGroupsOnly:true},F);},searchUserCandidates:function C(F,I,G,E){var H={blockBegin:1,blockCount:G,searchPattern:F,nameWildcards:I?4:2};this.getUsers(H,E);},getUserCandidates:function B(H,G){if(this.userCandidates){G.success(this.userCandidates);return ;}var E=G.success,F=this;G.success=function(J){F.userCandidates={items:J.items,isComplete:(parseInt(J.bc,10)===-1||(J.bb+J.bc>J.sz))};E(F.userCandidates);};var I={blockBegin:1,blockCount:H,nameWildcards:1};this.getUsers(I,G);},getUsers:function A(G,E){var F={taskId:"getUserServices"};mstrmojo.hash.copy(G,F);mstrmojo.xhr.request("POST",mstrConfig.taskURL,E,F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var J=mstrmojo.dom;var Y=5;var k=1;var V=2;var N=4;var j=0;var O=true;var I=0;var F=86400000;mstrmojo.VisChartUtils=mstrmojo.provide("mstrmojo.VisChartUtils",{getScreenZoomFactor:function Z(){if(I==0){if(mstrMobileApp){var o=mstrMobileApp.getDeviceDPI();console.log("dpi:"+o);I=o/160;}else{I=1;}}return I;},changeElementSize:function a(r,w,v){if(w=="fontSize"||w=="height"||w=="line-height"){var u=mstrmojo.css.getStyleValue(r,w);var q=Math.round(v*parseInt(u));r.style[w]=q+"px";}else{if(w=="font"){var t=mstrmojo.css.getStyleValue(r,"fontSize");var q=Math.round(v*parseInt(t));var p=mstrmojo.css.getStyleValue(r,"fontWeight");var o=mstrmojo.css.getStyleValue(r,"fontFamily");r.style.font=p+" "+q+"px "+o;}}},rgbaStr2rgba:function L(o){var q=null;o=o.replace(/ /g,"");var p=o.indexOf("rgba");if(p>=0){o=o.substring(p+5,o.length-1);q=o.split(",");}return q;},fillBackground:function b(r,o,AB,p,u){var t=p||r.context,q=o||r.canvas.width,x=AB||r.canvas.height,z=r.themeColor||"#000000",w=null,AA=u||1;if(!t){t=r.canvas.getContext("2d");if(!t){return ;}}t.save();if(r.noBackground){}else{if(!r.isAndroid&&!r.isTimeSeries){w=t.createLinearGradient(0,0,0,x/2);t.fillStyle=z;t.fillRect(0,0,q,x);t.globalAlpha=0.4;w.addColorStop(0,"#fff");w.addColorStop(0.1,"#fff");w.addColorStop(1,z);t.fillStyle=w;t.rect(0,0,q,x/2);t.fill();t.globalAlpha=0.1;t.fillStyle="#fff";t.fillRect(0,0,q,x/2);}else{if(r.isTimeSeries){var v=r.formatProp;w=t.createLinearGradient(0,0,0,x);t.globalAlpha=v.backgroundAlpha;t.fillStyle=this.rgb2rgbStr(v.backgroundClr)||"#000000";t.rect(0,0,q,x);t.fill();}else{t.globalAlpha=AA;t.fillStyle=z;t.fillRect(0,0,q,x);}}}t.restore();},rgb2rgbStr:function W(p,q){var o="";if(!p||p.length!=3){return o;}if(q||q==0){o="rgba("+p[0]+","+p[1]+","+p[2]+","+q+")";}else{o="rgb("+p[0]+","+p[1]+","+p[2]+")";}return o;},getRGBWithOpacity:function R(p,o,q){if(isNaN(o)){return ;}if(!q){q=[255,255,255];}var r=[];for(color in p){r[color]=parseInt(p[color]*(1-o)+q[color]*o);}return r;},fillMasterChartBackground:function S(w,p,o,r,AD,v,t){var x=t||w.context,u=r||w.canvas.width,AB=AD||w.canvas.height,AC=w.themeColor,AA=null;var z=w.formatProp;x.save();x.globalAlpha=z.backgroundAlpha;x.fillStyle=this.rgb2rgbStr(z.backgroundClr)||"#000000";x.fillRect(0,0,u,o+AD+v);x.globalAlpha=1;x.strokeStyle=this.rgb2rgbStr(w.formatProp.textClr,0.5);x.lineWidth=1;var q=o+0.5;this.drawLineSet(this,[{x:p,y:q},{x:p+u,y:q}],false,x);q=o+AB-0.5;this.drawLineSet(this,[{x:p,y:q},{x:p+u,y:q}],false,x);x.restore();},drawLineSetWithSplit:function(u,z,x,p,v){var q=z.length,w=Math.ceil(q/v),o,r;for(var t=0;t<w;t++){o=t*v;r=Math.min(o+v+1,q);this.drawLineSet(u,z.slice(o,r),x,p);}},drawLineSet:function M(t,AA,z,o){var u=null,q=AA.length,x=null;if(o){u=o;}else{u=t.context;}var v=null,p=false;u.beginPath();var r=0;while(r<q){if(AA[r]){u.moveTo(AA[r].x,AA[r].y);v=AA[r];p=true;r++;break;}r++;}var w=false;for(;r<q;r++){x=AA[r];if(x){if(!w){u.lineTo(x.x,x.y);p=false;}else{u.moveTo(x.x,x.y);p=true;v=x;w=false;}}else{if(!w){w=true;if(p){u.arc(v.x,v.y,1,0,Math.PI*2,false);}}}}if(z){u.closePath();u.fill();}else{u.stroke();}},getMinYPosition:function H(p,t,o){var r=t,q;while(r<=o){if(p[r]){q=p[r].y;break;}r++;}for(r=t;r<=o;r++){if(p[r]){q=Math.min(q,p[r].y);}}return q;},drawLineAreaWithSplit:function(v,AC,o,t,r,w,p,x){var q=t-o+1,AA=Math.ceil(q/x),AB,z;for(var u=0;u<AA;u++){AB=o+u*x;z=Math.min(AB+x,o+q-1);this.drawLineArea(v,AC,AB,z,r,w,p);}},drawLineArea:function M(u,o,x,t,w,AC,q){var AB=null,AF=o.length,AA=null,AG=0,z=0;if(q){AB=q;}else{AB=u.context;}var r=null,AE=false;AB.save();AB.lineWidth=0;AB.beginPath();var AH=x,v;while(AH<=t){if(o[AH]){AG=o[AH].x;AB.moveTo(AG,w);r=o[AH];AE=true;break;}AH++;}v=AH;var AD=false;for(;AH<=t;AH++){AA=o[AH];if(AA){if(!AD){AB.lineTo(AA.x,AA.y);AE=false;z=AA.x;}else{AG=AA.x;AB.moveTo(AG,w);if(AH+1<=t&&o[AH+1]){AB.lineTo(AA.x,AA.y);}r=AA;AD=false;v=AH;}}else{if(!AD){AD=true;if(!AE){AB.lineTo(z,w);AB.lineTo(AG,w);var p=this.getMinYPosition(o,v,AH)||0;AB.fillStyle=this.rgb2rgbStr(AC,1);AB.globalAlpha=0.65;AB.fill();}}}}if(!AE){AB.lineTo(z,w);AB.lineTo(AG,w);var p=this.getMinYPosition(o,v,t)||0;AB.closePath();AB.fillStyle=this.rgb2rgbStr(AC,1);AB.globalAlpha=0.65;AB.fill();}AB.restore();},drawRectangle:function l(u,o,z,q,t,v,r){var p=null;if(r){p=r;}else{p=u.context;}if(v){p.fillRect(o,z,q,t);}else{p.strokeRect(o,z,q,t);}},drawArc:function Q(r,z,w,u,v,p,q,AA,o){var t=null;if(o){t=o;}else{t=r.context;}t.beginPath();t.arc(z,w,u,v,p,q);if(AA){t.fill();}else{t.stroke();}},drawRoundRect:function K(q,o,z,p,t,u,v){u=Math.min(p/2,t/2,u);q.beginPath();q.moveTo(o+u,z);q.arcTo(o+p,z,o+p,z+t,u);q.arcTo(o+p,z+t,o,z+t,u);q.arcTo(o,z+t,o,z,u);q.arcTo(o,z,o+p,z,u);q.closePath();if(v){q.fill();}else{q.stroke();}},drawHalfRoundedRectangle:function n(q,z,v,AA,t,o,AB,p){var u=null;if(p){u=p;}else{u=q.context;}u.beginPath();u.moveTo(z+AA,v);u.lineTo(z+o,v);u.arcTo(z,v,z,v+o,o);u.lineTo(z,v+t-o);u.arcTo(z,v+t,z+o,v+t,o);u.lineTo(z+AA,v+t);if(AB){u.fill();}else{u.stroke();}},drawStartEndPoints:function X(w,AD,p,t){var q=AD.length;var x=null,o=w.startEndPointRadius;if(p){x=p;}else{x=w.context;}x.save();var AA="#f0f43e",z="#f0f43e",AB="#663300";if(w.startPointColor){AA=w.startPointColor;}if(w.endPointColor){z=w.endPointColor;}else{var AC=AD[0].y,v=AD[q-1].y;if(AC>v){z="#008000";}else{if(AC<v){z="#8d1616";}else{z=AA;}}}if(w.otherPointColor){AB=w.otherPointColor;}if(t&k&&AD[0]){x.strokeStyle=AA;x.fillStyle=AA;this.drawArc(this,AD[0].x,AD[0].y,o,0,Math.PI*2,true,true,x);}if(t&V&&AD[q-1]){x.strokeStyle=z;x.fillStyle=z;this.drawArc(this,AD[q-1].x,AD[q-1].y,o,0,Math.PI*2,true,true,x);}if(t&N){x.strokeStyle=AB;x.fillStyle=AB;for(var u=1;u<q-1;u++){if(AD[u]){this.drawArc(this,AD[u].x,AD[u].y,o,0,Math.PI*2,true,true,x);}}}x.restore();},getColor:function T(o){return(parseInt(o.themeColor.substr(1),16)>8388607)?"#000000":"#ffffff";},drawHighlightLine:function d(p,u){var o=p.context,t=p.margin,r=t.l,q=p.isTimeSeries?p.chartWidth+t.l:p.getWidth()-t.r;o.save();o.globalAlpha=1;o.strokeStyle=this.rgb2rgbStr(p.formatProp.textClr,0.35);o.lineWidth=1;o.lineCap="round";while(r<q){o.beginPath();o.moveTo(r,u);r+=2;o.lineTo(r,u);o.stroke();r+=3;}o.restore();},addLabel:function m(AG,AH,AF,AD,p,z,AA){var AC=document.createElement("div");AC.className="mstrmojo-Chart-lbl";AC.style.color=this.rgb2rgbStr(AG.formatProp.textClr,0.8);AC.innerHTML=AH;if(p){AC.style.width=p+"px";}var t=null;var AB=0;if(AG.isTimeSeries){if(AA.w>=0){t=AG.xdiv;AB=AG.animationCanvas.width;}else{t=AG.domNode.getElementsByClassName("mstrmojo-chart-ylbl-div")[0];if(!t){t=document.createElement("div");t.id="mstrmojo-chart-ylbl-div";t.className="mstrmojo-chart-ylbl-div";AG.domNode.appendChild(t);}t.style.width=AG.margin.l-1+"px";}}else{t=AG.domNode;AB=AG.getWidth();}t.appendChild(AC);var r=AC.offsetWidth||(AG.getTextWidth&&AG.getTextWidthByElem(AH,AC));var AE=AC.offsetHeight||22*(I||1);var q=p||r||100;var v=AG.xLabelPadding/2;var u=AG.yLabelPadding/2;if(AA.w>=0&&AG.isTimeSeries&&AG._scroller.origin){var AI=AF-AG._scroller.origin.x;if(AI<=0&&(AI+r/2>-AG.maxYLblWidth)){AG.needRedrawVerticalLine=true;t.removeChild(AC);return null;}var o=AI-AG.getChartWidthOnScreen();if((o-r/2)<=0&&o>=0){AG.needRedrawVerticalLine=true;t.removeChild(AC);return null;}}if(AA.w>=0){AF=AF-q/2;}if(AA.h>=0&&((AD>=AA.y-u&&AD<=AA.y+AA.h)||(AD+AE>=AA.y-u&&AD+AE<=AA.y+AA.h)||(AD+AE>=AG.canvas.height-AG.margin.b))){t.removeChild(AC);return null;}if(AA.w>=0&&(((AF>=AA.x&&AF<AA.x+AA.w+v))||AF<AA.x||AF<AG.margin.l||AF+q>AB)){t.removeChild(AC);return null;}if(AG.isTimeSeries&&AA.h>=0){t.style.top=(AG.margin.t-AE/2)+"px";t.style.height=(AG.canvas.height-AG.margin.t-AG.margin.b-1+AE/2)+"px";this.translateCSS(AF,(AD-AG.margin.t)+AE/2,z,AC);}else{this.translateCSS(AF,AD,z,AC);AC.style.maxHeight=AE+"px";}AA.x=AF;AA.y=AD;if(AA.h>=0){AA.h=AE;}if(AA.w>=0){AA.w=q;AC.style.textAlign="center";}return AC;},addDataLabel:function m(p,r,u,q){var o=(p.margin.l>p.margin.r)?Y:p.getWidth()-p.margin.r+Y,t=(p.margin.l>p.margin.r)?p.margin.l:p.margin.r;return this.addLabel(p,r,o,u-10,t-Y*2,false,q);},translateCSS:function f(o,t,p,r){var q="translate("+o+"px,"+t+"px)";if(p){q+=" rotate(45deg)";}r.style[J.CSS3_TRANSFORM]=q;},getTouchXYOnWidget:function B(p,o,t){var r=mstrmojo.TouchScroller,q=(r&&t.parent&&r.getScrollPositionTotals(t.parent))||{x:0,y:0};p=p-t.offsetLeft+q.x;o=o-t.offsetTop+q.y;return{touchX:p,touchY:o};},getYValue:function A(t,p){var o=t.canvas.height,r=t.margin,q=t.model.mvalues;return o-r.b-4-((parseFloat(p)-q[0])*t.RTY);},getMasterYValue:function e(r,p,t){var o=r.masterCanvas.height,q=r.model.mvalues;return o-t.b-3-((parseFloat(p)-q[0])*r.MRTY);},getSeriesIndexAndYValue:function C(x,o,z){var AA=x.model.series,r=AA.length,u=0;y=this.getYValue(x,AA[u].rv[o])||0;var v=z-y<0?-(z-y):z-y,p=v;for(var t=1;t<r;t++){var q=this.getYValue(x,AA[t].rv[o])||0;v=z-q<0?-(z-q):z-q;if(v<p){y=q;p=v;u=t;}}return{y:y,si:u};},getLabelWidthForMargin:function h(o,r){var q=document.createElement("div");q.className="mstrmojo-Chart-lbl";q.innerHTML=r;o.domNode.appendChild(q);var p=q.offsetWidth||60;o.domNode.removeChild(q);return p+Y*2;},animateLineSet:function U(AB,q,z,u){var AC=[],AA=AB.animationContext,r=z.length;AA.clearRect(0,0,AB.getWidth(),AB.canvas.height);if(!u.index){u.index=0;}else{if(u.index>=u.rate){this.drawLineSet(AB,z,false,AA);AB.drawLabels();if(AB.isFillLinesArea){this.fillLinesArea(AB,z.slice(0));}if(AB.isDrawStartEndPoints){this.drawStartEndPoints(AB,z,AA,AB.isDrawStartEndPoints);}return ;}}for(var t=0;t<r;t++){var p=z[t],o=q[t];AC[t]={x:(u.index*(p.x-o.x)/u.rate)+o.x,y:(u.index*(p.y-o.y)/u.rate)+o.y};}this.drawLineSet(AB,AC,false,AA);var v=this;u.index++;window.setTimeout(function(){v.animateLineSet(AB,q,z,u);},40);},fillLinesArea:function G(p,t){var q=p.canvas.height;t.push({x:p.getWidth()-p.margin.r,y:q-p.margin.b});t.push({x:p.margin.l,y:q-p.margin.b});var u=new Array();if(p.fillinColor){mstrmojo.requiresCls("mstrmojo.color");var r=mstrmojo.color.hex2rgb(p.fillinColor).join(",");u[0]="rgba("+r+", 0.8)";u[1]="rgba("+r+", 0.2)";}else{u=["rgba(255,128,0,0.8)","rgba(255,128,0,0.2)"];}var o=p.animationContext;var r=o.createLinearGradient(0,0,0,q);r.addColorStop(0,u[0]);r.addColorStop(0.75,u[1]);o.fillStyle=r;this.drawLineSet(p,t,true,o);},convertRawValueToMilliseconds:function g(q){var r=Number(q),o=r-((new Date("1/1/1970").getTime()-new Date("12/30/1899").getTime())/F)-j,p=new Date(o*F);return new Date(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()).getTime();},getAncestorBgColor:function D(q){var v=null,u=q,AA=u.modelData?u.modelData:u.model,z=null;if(u.hasOwnProperty("xtabModel")&&u.xtabModel.hasOwnProperty("docModel")){z=u.xtabModel.docModel;}if(z&&z.defn&&z.defn.layouts&&z.defn.layouts.length>0){var x=z.defn.layouts,r;var p;for(p in x){if(x[p].loaded){r=x[p];}}if(r&&r.hasOwnProperty("units")){var t=r.units;var w=AA.parent;while(w){var o=w.k||null;if(t[o]&&t[o].fmts&&t[o].fmts["background-color"]){v=t[o].fmts["background-color"];break;}else{w=w.parent||null;}}if(!v){if(r.fmts&&r.fmts["background-color"]){v=r.fmts["background-color"];}}}}return v;},isLightColor:function c(u){var p=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,v,o,w,AA,z,t=false;if(u){var AB,x;if(/^(rgba|RGBA)/.test(u)){x=u.replace(/rgba\(|RGBA\(/,"");x=x.replace(")","");AB=x.split(",");o=AB[0];w=AB[1];AA=AB[2];}else{if(/^(rgb|RGB)/.test(u)){x=u.replace(/rgb\(|RGB\(/,"");x=x.replace(")","");AB=x.split(",");o=AB[0];w=AB[1];AA=AB[2];}else{if(p.test(u)){if(u.length===4){AB="#";for(v=1;v<4;v++){AB+=u.slice(v,v+1).concat(u.slice(v,v+1));}u=AB;}var q=[];for(v=1;v<7;v+=2){q.push(parseInt("0x"+u.slice(v,v+2)));}o=q[0];w=q[1];AA=q[2];}}}z=(o*299+w*587+AA*114)/1000;if(z>150){t=true;}}return t;},getPointDistanceSquare:function E(p,o){return(p.x-o.x)*(p.x-o.x)+(p.y-o.y)*(p.y-o.y);},truncateTextToLine:function(p,AB,AF){AB.className=p.className;AB.style.whiteSpace="nowrap";var v=AB.innerHTML=p.innerHTML;var r=parseInt(p.offsetWidth)-parseInt(p.style.width);var AD=AF*parseInt(p.style.width)+r;var t=v;if(AB.offsetWidth>AD){var w=0,q=v.length-1;while(w<=q){var AA=Math.round((w+q)/2);var AE=v.substr(0,AA+1);var AC=v.substr(0,AA+2);AB.innerHTML=AE;var z=AB.offsetWidth;AB.innerHTML=AC;var u=AB.offsetWidth;if(z<=AD&&u>AD){break;}else{if(z>AD){q=AA-1;}else{if(u<=AD){w=AA+1;}}}}t=v.substr(0,AA+1);if(t.length<v.length){if(t.charAt(t.length-1)===" "){t=t.substr(0,t.length-1);}var x=t.lastIndexOf(" ");var o=t.length-1-x;if(o>=2&&o<=8){t=t.substr(0,t.length-o-1)+"...";}else{t=t.substr(0,t.length-3)+"...";}}}p.innerHTML=t;},getLen:function(r,q,p,o){q.innerHTML=r;var t=q.offsetWidth+p-o;return t;},splitWordIfTooLong:function(t,AE,AB,w,z){var AD=t.split(" ");var x=[];var AA=AD.length;var u=0;var r=0;for(u=0;u<AA;u++){var p=AD[u];while(true){var AF=this.getLen(p,AE,z,w);if(AF>AB){var AC=(AB/AF)*p.length;var o=Math.round(AC);while(o>0){var v=p.substr(0,o);var q=this.getLen(v,AE,z,w);if(q<=AB){x.push(v);break;}else{o--;}}p=p.substr(o,p.length-o);}else{x.push(p);break;}}}return x.join(" ");},truncateTextToLineWithWordWrap:function(AO,AK,AH){AK.className=AO.className;AK.style.whiteSpace="nowrap";var AG=7;var x=-1;if(AO.style&&AO.style.width&&AO.style.width.length>0){x=parseFloat(AO.style.width);}if(x<0){x=parseFloat(mstrmojo.css.getComputedStyle(AO).width);}var AI=AO.innerHTML;var AN=parseFloat(AO.offsetWidth)-x;AI=this.splitWordIfTooLong(AI,AK,x,AN,AG);var AA=AI.split(" ");var t=[];var AD=[];var AM=0;var o=0;var AF=AA.length;AK.innerHTML="&nbsp;";var AP=AK.offsetWidth-AN;AD.push(0);for(AM=0;AM<AF;AM++){var p=this.getLen(AA[AM],AK,AG,AN);if(p>x){var z=AA[AM];var AL=(x/p)*z.length;AA[AM]=z.substr(0,parseInt(AL));p=x;}t.push(p);o+=p;AD.push(o);if(AM!==AF-1){o+=AP;}}var AC=0,AJ=0;var AB=AH;for(;AJ<AD.length;){var w=AD[AJ]-AD[AC];if(AC>0&&AJ!=AC){w-=AP;}var v=AD[AJ+1]-AD[AC];if(AC>0&&AJ+1!=AC){v-=AP;}if(w<=x&&((AJ+1==AD.length)||(v>x))){AB--;if(AB==0||AJ===AF){break;}else{AC=AJ;AJ++;}}else{AJ++;}}if(AJ>AF){AJ=AF;}var AE=AD[AJ]-AD[AC];if(AC>0&&AJ!=AC){AE-=AP;}var AQ;if(AJ>=AF&&AE<x){AQ=AA.join(" ");}else{AQ=AA.slice(0,AJ).join(" ");var r=this.getLen("...",AK,AG,AN);if(AE+r<=x){AQ+="...";}else{if(AQ.charAt(AQ.length-1)===" "){AQ=AQ.substr(0,AQ.length-1);}var u=AQ.lastIndexOf(" ");var q=AQ.length-1-u;if(q===3){AQ=AQ.substr(0,AQ.length-3)+" ...";}else{AQ=AQ.substr(0,AQ.length-3)+"...";}}}AO.innerHTML=AQ;},getLen2:function(v,p,o){var q=o;var r=q.getContext("2d");r.font=p;r.textAlign="center";r.fillStyle="blue";var u=r.measureText(v);var t=u.width;return t;},splitWordIfTooLong2:function(u,AB,t,v){var AD=u.split(" ");var z=[];var AA=AD.length;var w=0;var r=0;for(w=0;w<AA;w++){var p=AD[w];while(true){var AE=this.getLen2(p,t,v);if(AE>AB){var AC=(AB/AE)*p.length;var o=Math.max(Math.round(AC),1);while(o>0){var x=p.substr(0,o);var q=this.getLen2(x,t,v);if(q<=AB||o==1){z.push(x);break;}else{o--;}}p=p.substr(o,p.length-o);}else{z.push(p);break;}}}return z.join(" ");},getComputedFontStyle:function P(o){var p=o.fontStyle+" "+o.fontWeight+" "+o.fontSize+"/"+o.fontVariant+" "+o.fontFamily;return p;},truncateTextToLineWithWordWrap2:function(AR,AK,AB,AJ){var AA=-1;if(AR.style&&AR.style.width&&AR.style.width.length>0){var AO=0;var AQ=mstrmojo.css.getComputedStyle(AR);if(AQ.paddingLeft){AO+=parseFloat(AQ.paddingLeft);}if(AQ.paddingRight){AO+=parseFloat(AQ.paddingRight);}var AP=AR.offsetWidth;AA=AP?AP-AO:parseInt(AR.style.width);}if(AA<0){AR.innerHTML="...";return ;}var w=mstrmojo.css.getComputedStyle(AR);var q=this.getComputedFontStyle(w);AK=this.splitWordIfTooLong2(AK,AA,q,AB);var AD=AK.split(" ");var u=[];var AG=[];var AN=0;var o=0;var AI=AD.length;var AS=this.getLen2(" ",q,AB);AG.push(0);for(AN=0;AN<AI;AN++){var p=this.getLen2(AD[AN],q,AB);if(p>AA){var AC=AD[AN];var AM=(AA/p)*AC.length;AD[AN]=AC.substr(0,parseInt(AM));p=AA;}u.push(p);o+=p;AG.push(o);if(AN!==AI-1){o+=AS;}}var AF=0,AL=0;var AE=AJ;for(;AL<AG.length;){var z=AG[AL]-AG[AF];if(AF>0&&AL!=AF){z-=AS;}var x=AG[AL+1]-AG[AF];if(AF>0&&AL+1!=AF){x-=AS;}if(z<=AA&&((AL+1==AG.length)||(x>AA))){AE--;if(AE==0||AL===AI){break;}else{AF=AL;AL++;}}else{AL++;}}if(AL>AI){AL=AI;}var AH=AG[AL]-AG[AF];if(AF>0&&AL!=AF){AH-=AS;}var AT;if(AL>=AI&&AH<AA){AT=AD.join(" ");}else{AT=AD.slice(0,AL).join(" ");var t=this.getLen2("...",q,AB);if(AH+t<=AA){AT+="...";}else{if(AT.charAt(AT.length-1)===" "){AT=AT.substr(0,AT.length-1);}var v=AT.lastIndexOf(" ");var r=AT.length-1-v;if(r===3){AT=AT.substr(0,AT.length-3)+" ...";}else{AT=AT.substr(0,AT.length-3)+"...";}}}AR.innerHTML=AT;return AT.indexOf("...")>-1;},truncateDivContent:function(u,z,q){z.innerHTML=u;if(z.offsetHeight>q){var v=0,p=u.length-1;while(v<=p){var AA=Math.round((v+p)/2);var AC=u.substr(0,AA+1);var AB=u.substr(0,AA+2);z.innerHTML=AC;var x=z.offsetHeight;z.innerHTML=AB;var t=z.offsetHeight;if(x<=q&&t>q){break;}else{if(x>q){p=AA-1;}else{if(t<=q){v=AA+1;}}}}var r=u.substr(0,AA+1);if(r.length<u.length){if(r.charAt(r.length-1)===" "){r=r.substr(0,r.length-1);}var w=r.lastIndexOf(" ");var o=r.length-1-w;if(o>=2&&o<=8){r=r.substr(0,r.length-o-1)+"...";}else{r=r.substr(0,r.length-3)+"...";}}return r;}else{return u;}},positionTooltip:function(AH,q,AM,w){if(!AH||!q||!AM){return ;}if(isNaN(w)){w=45;}var AJ=AM.offsetWidth,x=AM.offsetHeight,u=AH.offsetWidth,AG=AH.offsetHeight,AC=AH.style,z=0,AK=0;function v(){return u+w<q.x&&AG<x;}function r(){return AG+w<q.y&&u<AJ;}function t(){return q.x+w+u<AJ&&AG<x;}function AB(){return q.y+w+AG<x&&u<AJ;}function p(){return q.x>u/2&&(AJ-q.x)>u/2;}function o(){return q.y>AG/2&&(x-q.y)>AG/2;}function AL(){return r()&&v();}function AI(){return r()&&p();}function AF(){return r()&&t();}function AN(){return v()&&o();}function AE(){return AB()&&v();}function AO(){return t()&&o();}function AD(){return AB()&&p();}function AA(){return AB()&&t();}if(AL()){z=q.x-w-u;AK=q.y-w-AG;}else{if(AI()){z=q.x-u/2;AK=q.y-w-AG;}else{if(AF()){z=q.x+w;AK=q.y-w-AG;}else{if(AN()){z=q.x-w-u;AK=q.y-AG/2;}else{if(AE()){z=q.x-w-u;AK=q.y+w;}else{if(AO()){z=q.x+w;AK=q.y-AG/2;}else{if(AD()){z=q.x-u/2;AK=q.y+w;}else{if(AA()){z=q.x+w;AK=q.y+w;}}}}}}}}AC.left=z+"px";AC.top=AK+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var B=mstrmojo.dom;mstrmojo.ui.pathbar._PreAppExit=mstrmojo.provide("mstrmojo.ui.pathbar._PreAppExit",{_mixinName:"mstrmojo.ui.pathbar._PreAppExit",onmouseover:function C(E){if(this._super){this._super(E);}if(this.handleMouseOver){var H=E.target||B.eventTarget(E.hWin,E.e),F=B.findAncestorByAttr(H,"idx",true,this.domNode),D=F&&parseInt(F.value,10),G=this.items[D];this.handleMouseOver(E,G);}},onclick:function A(E){var J=E.target||B.eventTarget(E.hWin,E.e),H=B.findAncestorByAttr(J,"idx",true,this.domNode),D=H&&parseInt(H.value,10),I=this.items[D];if(this.handleClick){var F=this.handleClick(E,I);if(F){E.cancel();return ;}}if(this._super){this._super(E);}if(!J.attributes.menu&&I&&I.en!==false){var G=function(){mstrmojo.form.sendLink(I.href,I.target);};if(mstrApp.onNavigateOut(I,G)!==true){G();}return false;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array");var H=mstrmojo.array,G=mstrmojo.dom;mstrmojo._IsDocXtab={_mixinName:"mstrmojo._IsDocXtab",isDocXtab:true,formatHandlers:{domNode:["RW","T","font"],msgNode:["height","background-color"],viewport:["D","background-color","B","fx"]},preBuildRendering:function B(){var I=this.getFormats(),L="",K=function K(M){if(I[M]){var N=this[M]||I[M];this[M]=N;if(this.isFullScreenWidget){I[M]=N;}this[M+"Limit"]=parseInt(N,10);}};K.call(this,"height");K.call(this,"width");var J=function(P,O){var M=I[P];if(M&&M.charAt(M.length-1)!=="%"){var N=parseInt(M,10);if(!isNaN(N)){if(O){N-=O;}L+=P+":"+N+"px;";}}return null;};J("height",0);J("width",0);this.scrollboxNodeCssText=L;return this._super();},postBuildRendering:function D(){var J=this._super();var I=this.gridData;if((I.afw||I.afc)&&this.hasCustomScrollbar&&!this.node.data.eg&&this.scrollboxNode.firstChild){this.scrollboxNode.firstChild.style.width=this.getFormats().width;}return J;},resize:function A(){this.clearCache();var K=this.getFormats(),J=parseInt(K.height,10),I=parseInt(K.width,10);if(I>0&&J>0){if(!this.visible&&this.forcedHidden){this.set("visible",true);this.forcedHidden=false;}H.forEach([this.scrollboxNode,this.viewport],function(M){var L=M.style;L.height=J+"px";L.width=I+"px";});if(this.scrollboxNode){this.scrollboxHeightFixed=J&&(J!=="auto");if(this.scrollboxHeightFixed){this.scrollboxHeight=parseInt(J,10);this.heightLimit=this.scrollboxHeight;this.scrollboxBottom=this.scrollboxTop+J;}if(I>0){this.widthLimit=I;}if(this.lockHeadersCase){this.resizeScrollBox(G.isIE);}}this.delegateGridAction(function(L){if(L&&L.onscroll){L.onscroll();}},"scrollOnResize");if(!(this.gridData&&this.gridData.eg!==undefined)){this.onGridWidthChanged();this.refreshResizeHandlers();}if(this.lockHeadersCase){this._refreshClonedNodes();}}else{if(this.visible){this.set("visible",false);this.forcedHidden=true;}}},renderPortalState:function E(){this.clearCache();this.unrender();this.render();},unrender:function F(I){this.clearCache();if(this._super){this._super(I);}},defaultAction:function C(N,I){if(this._super(N,I)){var M=this.model.sti,L=M&&M.titleId,K=M&&M.deselectCurrent;this._currentSelectedTD=K?undefined:N;if(L){var J=this.zone;this.delegateGridAction(function(P){var O=P.domNode,Q=O&&O.firstChild;if(!J&&Q&&(N.offsetParent===Q||N.offsetParent===O)){J=P;}},"defaultClickAction");if(J){J.clearHilites(L);if(!K){J.setHilites(L,N);}J.hiliteKey=L;this.model.sti=null;}}return true;}return false;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",O="mousemove",Q="mouseup";function G(X){if(E.isPrimaryMouseBtn(X)){B.startDragCheck(self,X);}}var U,P,A="mstrmojo-dnd-avatar",T;function F(Y,X){if(X!==undefined&&X!==null){P.innerHTML=X;}T.left=Y.x+"px";T.top=Y.y+"px";}function L(Y,X){if(!U){U=I.createElement("div");T=U.style;U.className=A;U.innerHTML='<div class="'+A+'-inner"></div>';P=U.firstChild;I.body.appendChild(U);}F(Y,X);T.display="block";}function R(){if(T){T.display="none";}}function H(X){var Y=++B.ctxt.moveCount;if(Y>=B.minMoves){B.stopDragCheck();if((X.buttons===1||X.buttons===undefined||E.isIE9)&&(X.which===1||X.button===0||E.isIE8)){B.startDrag(self,X);}}}function N(X){if(E.isPrimaryMouseBtn(X)){B.stopDragCheck();delete B.ctxt;}}function D(X){B.onDragMove(self,X);}function C(X){if(E.isPrimaryMouseBtn(X)){B.stopDrag(window,X);}}function J(Y){var X=E.findWidget(Y);while(X){if(X.draggable){return X;}X=X.parent;}return null;}function S(X){var Z=X.src,Y=J(Z.node);if(!Y){return null;}if(Y.getDragAction){X.action=Y.getDragAction(X);}Z.widget=Y;Z.data=Y.getDragData&&Y.getDragData(X);if(Y.isDragValid){if(!Y.isDragValid(X)){if(!mstrApp.isInVFInteractMode&&(!Y.shouldDragBubble||Y.shouldDragBubble(X)===true)){X.src.node=Y.domNode.parentNode;return S(X);}return null;}}if(Y.ondragstart){Y.ondragstart(X);}return Y;}function W(Z,Y){var X=E.findWidget(Z),a=Y.tgt&&Y.tgt.widget;while(X){if(X.dropZone){if(X===a){return X;}if(X.allowDrop&&X.allowDrop(Y)){return X;}}X=X.parent;}return null;}function V(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(X,Y){delete this.ctxt;var Z=E.captureEventInfo({hWin:X,e:Y});this.ctxt={src:Z,moveCount:0,last:M.copy(Z.pos),getDirection:function(a){return !!this.dir[a];},getCtxtDragData:function(){var a=this.src;return(a&&a.data)||{};},getCtxtDropData:function(){var a=this.tgt;return(a&&a.data)||{};}};if(this.minMoves){E.attachEvent(I,O,H);E.attachEvent(I,Q,N);}else{this.startDrag(X,Y);}},stopDragCheck:function(){E.detachEvent(I,O,H);E.detachEvent(I,Q,N);},startDrag:function(X,a){var Y=this.ctxt;Y.id=mstrmojo.now();var Z=S(Y);if(!Z){return ;}E.clearBrowserHighlights(X);E.preventDefault(self,a);E.attachEvent(I,O,D);E.attachEvent(I,Q,C);var c=window.mstrApp;if(c&&c.setInteractive){this._changeAppStatus=c.setInteractive(false);}if(!Z.ownAvatar){var b=Y.src;L(b.pos,b.data&&b.data.html);}},stopDrag:function(X,d){E.detachEvent(I,O,D);E.detachEvent(I,Q,C);var a=this.ctxt,Z=a.tgt||{},Y=E.captureEventInfo({hWin:X,e:d,data:Z.data}),c=W(Y.node,a);Y.widget=c;a.tgt=Y;if(c){if(c.ondrop){c.ondrop(a);}else{V.call(c);}}var b=a.src.widget;if(b&&b.ondragend){b.ondragend(a);}if(b&&!b.ownAvatar){R();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(b,d){if(E.isSafari){E.clearBrowserHighlights();}var X=this.ctxt,a=X.tgt||{},Y=a.widget,c=E.captureEventInfo({hWin:b,e:d,data:a.data}),h=c.widget=W(c.node,X),g=X.last,Z=c.pos;X.dir={x:Z.x>g.x,y:Z.y>g.y};X.last=M.copy(c.pos);X.tgt=c;if(Y!==h){if(Y){if(Y.ondragleave){Y.ondragleave(X);}else{V.call(Y);}}if(h){X.tgt.data=(h.getDropData&&h.getDropData(X))||{};if(h.ondragenter){h.ondragenter(X);}else{if(h.set){h.set("allowingDrop",true);}}}}if(h){if(h.ondragover){h.ondragover(X);}}var f=X.src.widget;if(f&&f.ondragmove){f.ondragmove(X);}if(f&&!f.ownAvatar){F(c.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var D=mstrmojo.dom;mstrmojo._FillsBrowser=mstrmojo.provide("mstrmojo._FillsBrowser",{_mixinName:"mstrmojo._FillsBrowser",getBrowserDimensions:function F(H){if(H){return{w:H.innerWidth,h:H.innerHeight};}var G=D.windowDim(),I=(D.isFF||D.isWK)?0:2;return{w:Math.max(G.w,0)+"px",h:Math.max(G.h-I,0)+"px"};},preBuildRendering:function B(){var I=this._super(),H=this.getBrowserDimensions();if(!this.browserResized||this.browserResized(H)!==true){this.height=H.h;this.width=H.w;}if(!this._listenerProc){var K=this.id,J=null,G=this._listenerProc=function(M){if(mstrApp&&mstrApp.isExporting){var L=M||window.event;mstrmojo.all[K].monitorWindow(L);}else{window.clearTimeout(J);J=window.setTimeout(function(){var N=M||window.event;mstrmojo.all[K].monitorWindow(N);},150);}};D.attachEvent(window,"resize",G);}return I;},destroy:function C(G){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);}this._super(G);},getResizeDimensions:function A(G){var J=G.currentTarget,I=this.getBrowserDimensions(),H={w:(J?J.innerWidth+"px":I.w),h:(J?J.innerHeight+"px":I.h)};return H;},monitorWindow:function E(G){var H=this.getResizeDimensions(G);if((H.h===this.height&&H.w===this.width)||parseInt(H.h,10)<=20||parseInt(H.w,10)<=20){return ;}if(!this.browserResized||this.browserResized(H,true)!==true){if(H.h!==this.height){this.set("height",H.h);}if(H.w!==this.width){this.set("width",H.w);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var I=this.ifDataHelper,H=this,G=this.scrollNode||this.domNode;this.supportsIncFetch=I&&I.hasNext();if(I&&this.supportsIncFetch){this._scroll=function F(){var J=this.scrollNode||this.domNode||G;if(Math.ceil(J.offsetHeight+J.scrollTop)>=J.scrollHeight){H.raiseEvent({name:"incFetch",id:H.id});}};E.attachEvent(G,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(J){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);I.next({complete:function(K){if(H.postNext){H.postNext();}H.set("isFetching",false);},success:function(K){H.addItems(K.items||null);},failure:function(K){H.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+K);}});});}},unrender:function D(F){var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);this._super(F);},render:function C(){this._super();if(this.supportsIncFetch){var F=this.scrollNode||this.domNode;E.attachEvent(F,"scroll",this._scroll);}},addItems:function B(F){if(this._super){this._super(F);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B="mstrmojo-floating-toolbar-lightbox";var G="mstrmojo-floating-toolbar";var M="mstrmojo-floating-toolbar-cell";var I="mstrmojo-fixed-toolbar-lightbox";var A="mstrmojo-fixed-toolbar";var N="mstrmojo-fixed-toolbar-cell";var H=" hasToolBar";var E="mstrmojo-Button mstrmojo-InteractiveButton mstrmojo-oivmSprite ";var D="mstrmojo-Button-text";var L=27;mstrmojo._HasToolbar=mstrmojo.provide("mstrmojo._HasToolbar",{_mixinName:"mstrmojo._HasToolbar",postBuildRendering:function C(){this._super();var O=this.getToolbarCfg();if(!O||this.defn.ttl){return ;}var S=this.containerNode;if(S){var Q=this._createToolbar(G,M);Q.className=B;S.className+=H;S.insertBefore(Q,S.firstChild);var P=this.domNode,R=mstrmojo.boxmodel.offset(P,this.parent&&this.parent.domNode);if(R.top<L){Q.style.top=(L-R.top)+"px";}}},_createToolbar:function F(V,a){var S=this.getToolbarCfg(),Y=this,W=document,P=W.createElement("div"),U=W.createElement("table"),X=W.createElement("tr"),R=W.createElement("td");P.appendChild(U);U.className=V;R.className=a;X.appendChild(R);U.appendChild(X);var Z=function(b){Y.onClick(b);},T;for(T in S){var O=W.createElement("div");O.className=E+S[T].css[0];var Q=W.createElement("div");Q.className=D;Q.nodeValue="&nbsp;";Q.setAttribute("ix",T);Q.setAttribute("cix","0");O.appendChild(Q);R.appendChild(O);O.onclick=Z;}return P;},renderToolbar:function K(Q){if(!this.getToolbarCfg()){return ;}var P=Q.firstChild,O=this._createToolbar(A,N);O.className=I;if(P){Q.insertBefore(O,P);}else{Q.appendChild(O);}},onClick:function J(U,P){var V=mstrmojo.dom,O=V.eventTarget(P,U),S=O.getAttribute("cix"),R=O.getAttribute("ix");var Q=this.toolbarCfg[R],T=Q.callback;if(T&&this[T]&&this[T]()){S=++S%Q.css.length;O.parentNode.className=E+Q.css[S];O.setAttribute("cix",S);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var G=mstrmojo.dom,H=Math;var D=1,F=2,J=4,E=5,A=6;function B(q){var M=this.anchor;if(!M){return false;}var V=this.baseTipClass,W=this[this.tipNodeName];W.className=V+" top";var h=this[this.boundaryNodeName],v=this[this.popupNodeName],f=this.anchorOffset,t=this.anchorOrientation,p=this.hasScrollbars(),c=mstrmojo.hash.copy(this.anchorPosition||G.position(M,true)),P=G.position(h,true),AA=P.w,N=P.h,j=v.offsetWidth,R=v.offsetHeight,Z=j/2,K=R/2,b=G.position(W),n=H.min(b.h,b.w),T=H.max(b.h,b.w)/2,l=parseInt(this.placement,10);if(q){c=G.position(M,true);}if(p){AA-=15;N-=15;}var d=G.contains(h,v),o=d?0:P.y,z=AA/2-Z,U=N/2-K+o,u=-1000,AB=-1000,O,m=["borderBottomColor","borderTopColor","borderRightColor","borderLeftColor"],AC=0;if(d){c.x=c.x-P.x;c.y=c.y-P.y;}var k=c.y+c.h,Q=c.x+c.w,w=((Q+j)<AA),X=c.y>R,r=((k+R)<N),a=function(AD,AF,AE){return H.min(H.max(AD,AE),H.max(AF,0));},S=function(){if((c.x<AA)&&(r||X)){var AD=c.x+(c.w/2),AE=(l===J&&r)||!X;if(AE){O="top";AB=k;AC=0;U=k+n-f;}else{O="bottom";AB=c.y-n;AC=1;U=AB-R+f;}z=a(0,AA-j,AD-Z);u=a(c.x,Q,AD)-T;return true;}return false;},g=function(){if((c.y<N)&&(w||c.x>j)){var AD=c.y+(c.h/2),AE=!(l===E&&c.x>j)&&w;if(AE){O="left";u=Q;AC=2;z=Q+n-f;}else{O="right";u=c.x-n;AC=3;z=u-j+f;}U=a(o,N-R,AD-K);AB=a(c.y,k,AD)-T;return true;}return false;},Y=[S,g],x=0;if(l===F){U=this.popPosition.top;z=this.popPosition.left;AB=-1000;u=-1000;O=null;}else{if(l===E||l===A||(l===D&&t==="h")){Y.reverse();}for(x;x<2;x++){if(Y[x]()){break;}}U=H.round(U);z=H.round(z);AB=H.round(AB);u=H.round(u);}W.className=V+" "+(O||"hidden");var e=W.style,L=v.style;e.top=AB+"px";e.left=u+"px";if(this.tipNodeColor){mstrmojo.array.forEach(m,function(AD){e[AD]="";});e[m[AC]]=this.tipNodeColor;}L.top=U+"px";L.left=z+"px";return true;}mstrmojo._IsAnchorable={anchor:null,anchorPosition:null,boundaryNodeName:"curtainNode",popupNodeName:"editorNode",tipNodeName:"tipNode",baseTipClass:"mstrmojo-Editor-tip",anchorOffset:25,anchorOrientation:"v",placement:D,popPosition:null,hasScrollbars:function C(){return(!mstrApp.isTouchApp||!mstrApp.isTouchApp());},prepareAnchor:mstrmojo.emptyFn,positionDialog:function I(K){this.prepareAnchor();if(!B.apply(this,[K])){if(typeof this._super==="function"){this._super();}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var J=mstrmojo.dom;var I=1,C=2;function E(P){var Q=this.defn,R=Q.vc,S=Q.hc;if(!P||P.length===0||(!R&&!S)){return{};}return{v:!!R,h:!!S};}function B(P){return parseInt(this.getFormats()[(P===I)?"height":"width"],10);}function H(Q){var P=this.getFormats()["max-"+((Q===I)?"height":"width")];return P&&parseInt(P,10);}function G(T,S){var Q=this.defn,R=T&&(T.dimNode||T.domNode),P=Q.ck&&Q.ck[T&&(T.k||T.content.k)];if(R&&P&&(P&S)>0){return R;}return null;}function F(Q,T,S,Y){var P=parseInt(S.style[(T===I)?"top":"left"],10)||(Q.fmts&&parseInt(Q.fmts[(T===I)?"top":"left"],10))||0;if(!!Y){return P+Y;}var R=(Q.fmts&&Q.fmts.fx)||{},U=(!J.isIE7&&(R.rt===1||R.rt===3))?((T===I)?C:I):T,W=(U===I)?"Height":"Width";Y=S["offset"+W]+(R.ds||0);if(!J.isDXIE&&((T===I&&R.rt===3)||(T===C&&R.rt===1))){P=P-Y;}var V=P+Y;if(J.isIE7&&W==="Width"&&Q instanceof mstrmojo.XtabBase){var X=Q.contentNode.offsetWidth;if(V<X){V+=X;}}return V;}function L(P,Q,R){if(P>Q){if(R){P=Math.min(P,R);}return P;}return Q;}function D(V,T,U){var P=this.getCanGrowShrinkNode(),R=(V===I)?"Height":"Width",Q=R.toLowerCase(),S=parseInt(P.style[Q],10);if(T&&T!==S&&!(T<S&&!!U)){S=T;P.style[Q]=S+"px";this.afterCanGrowShrink();}this["_fixed"+R]=S;}function A(W,S,U){var V=H.call(this,S),X=B.call(this,S),T=W.length,Q;for(Q=0;Q<T;Q++){var P=W[Q],R=G.call(this,P,S);if(!R){continue;}X=L(F.call(this,P,S,R),X,V);if(X===V){break;}}D.call(this,S,X,U);}function O(U,T,Q,S){var R=G.call(this,U,T);if(!R){return ;}var P=F.call(this,U,T,R,Q);D.call(this,T,L(P,B.call(this,T),H.call(this,T)),S);}mstrmojo._CanGrowOrShrink=mstrmojo.provide("mstrmojo._CanGrowOrShrink",{getCanGrowShrinkNode:function N(){return this.domNode;},performCanGrowCanShrink:function M(Q,R){var P=E.call(this,Q);if(P.v){A.call(this,Q,I,R);}if(P.h){A.call(this,Q,C,R);}},fixedSizeCanGrowShrink:function K(V,P,T,U){var R=E.call(this,V&&[V]);var S=parseInt(P,10),Q=parseInt(T,10);if(R.v&&!isNaN(S)){O.call(this,V,I,S,U);}if(R.h&&!isNaN(Q)){O.call(this,V,C,Q,U);}},afterCanGrowShrink:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.requiresDescs(2213,3326,3327,3329,4531,13283,13284,13285,13286);mstrmojo.ME.Enum={METRIC_ACTIONS:{ADD:"add",EDIT:"edit",EDIT_NEW:"editNew"},EDITOR_IDS:{ADVANCED:"mstrME",FORMULA:"mstrME",WIZARD:"mstrFE",SIMPLE:"mstrSME",SELECOTR:"mstrFSE"},EDITOR_TYPES:{ADVANCED:"ADVANCED",FUNCTION:"FUNCTION",SIMPLE:"SIMPLE",SELECTOR:"SELECTOR"},METRIC_EDIT_TYPES:{ADVANCED:65536,SIMPLE:131072,FUNCTION:196608},METRIC_TYPES:{65536:"ADVANCED",131072:"SIMPLE",196608:"FUNCTION"},NEW_METRIC_DEFINITION:{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}},getNewDefinition:function(){return{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}};},FBFlag:{Automatic:0,Manual:3},AFB:{Automatic:-1,False:0,True:1},SFB:{Automatic:-1,False:1,True:2},UI_OBJECT_TYPE:{Dimty:-1,Sub_Expression:-2,Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},UI_DATA_TYPE:{Sortby:-1,Breakby:-2,Level:-4,Condition:-5,Transformation:-6},SHORTCUT_FUNCTIONS:{Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},DYNAMIC_DIMTY:{CODES:{auto:{n:mstrmojo.desc(4531,"Automatic"),did:"@auto",t:-1},page:{n:mstrmojo.desc(3329,"Grand Total"),did:"@p",t:-1},byCol:{n:mstrmojo.desc(3326,"By Columns"),did:"@cols",t:-1},byRow:{n:mstrmojo.desc(3327,"By Rows"),did:"@rows",t:-1},byCell:{n:mstrmojo.desc(13283,"By Cell"),did:"@cell",t:-1},byShape:{n:mstrmojo.desc(13284,"By Shape"),did:"@shape",t:-1},downCross:{n:mstrmojo.desc(13285,"Down, Then Across"),did:"@cr",t:-1},crossDown:{n:mstrmojo.desc(13286,"Across, Then Down"),did:"@rc",t:-1}},getItems:function D(G){var F=this.CODES,E=[];switch(G){case"breakby":E=[F.auto,A.copy({n:mstrmojo.desc(2057,"None")},A.copy(F.page)),A.copy({n:mstrmojo.desc(122,"Columns")},A.copy(F.byCol)),A.copy({n:mstrmojo.desc(2968,"Rows")},A.copy(F.byRow)),A.copy({n:mstrmojo.desc(13399,"Cell")},A.copy(F.byCell)),A.copy({n:mstrmojo.desc(2923,"Shape")},A.copy(F.byShape))];break;case"level":E=[F.auto,F.page,F.byCol,F.byRow,F.byCell,F.byShape];break;case"sortby":E=[F.auto,F.downCross,F.crossDown];}return E;},getAutomaticDimtyObject:function C(){return A.copy(this.CODES.auto);},getDimtyObject:function B(E,H){var F=null;var G=false;if(H){A.forEach(mstrmojo.ME.Enum.DYNAMIC_DIMTY.CODES,function(I){if(I.did===E){F=A.copy(I);G=true;return false;}});}if(!G){F={n:E,t:-1,dimty:true};}return F;}},NonExposableParams:["IsNewOLAP","OLAPPattern","OLAPHasWindow"]};mstrmojo.ME.Enum.DEFAULT_MPS={mps:{afb:mstrmojo.ME.Enum.AFB.False,sfb:mstrmojo.ME.Enum.SFB.False,fbf:mstrmojo.ME.Enum.FBFlag.Automatic}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var H=mstrmojo.array,B=mstrmojo.hash,J=B.isEmpty;var G=1;function D(Q){return(typeof Q==="object")?Q:{};}function E(R,Q){B.forEach(Q,function(S,V){var T=R[V];if(T===undefined){delete Q[V];return true;}S=Q[V]=D(S);T=R[V]=D(T);if(J(S)&&J(T)){throw (G);}else{if(J(T)){delete R[V];if(J(R[V])){E(R,Q);}}else{if(J(S)){delete R[V];if(J(R[V])){E(R,Q);}}else{try{E(R[V],Q[V]);}catch(U){switch(U){case G:R[V]=Q[V]={};break;}}}}}});}function I(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=U.include,W=U.exclude;if(J(T)||J(W)){return true;}if(!J(T)&&!J(W)){try{E(W,T);}catch(V){switch(V){case G:R[S]={};break;}}}});});return Q;}function F(S,R,Q){B.forEach(S,function(U,T){if(U===true||J(U)){Q.push(R+T);}else{F(U,R+T+".",Q);}});return Q;}function P(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=[];F(U.include,"",T);F(U.exclude,"!",T);R[S]=T.join(";");});});return Q;}function K(Q,R){B.forEach(Q,function(S,U){var T=R[U];if(T!==undefined){if(S!==true&&T!==true){K(S,T);}else{if(S===true&&T!==true){R[U]=true;}else{if(S!==true&&T===true){Q[U]=true;}}}}});}function L(R,S){var Q=true;B.forEach(R,function(Y,T){var W=S[T];if(W){var U=Y.include,Z=Y.exclude,X=W.include,V=W.exclude;if(!J(V)&&!J(Z)){Q=false;return Q;}if(!J(X)&&!J(U)){K(X,U);}}return Q;});return Q;}function C(S,Q){Q=Q||{};if(S){var R=Q;H.forEach(S.split("."),function(W,U,T,V){R[W]=V?true:{};R=R[W];});}return Q;}mstrmojo.rw.model.RetrievalKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.RetrievalKeysConfig",init:function M(){this.nodes=[];this.filters={};},addNode:function A(R,T){var S=this.filters,Q=S[R];if(!Q){this.nodes.push(R);Q=S[R]={data:{},defn:{}};}if(T){if(L(Q,T)){S[R]=B.mergeHashes(Q,T);}else{throw ("The new filters for node key ## cannot be merged with the filters currently defined".replace("##",R));}}return this;}});mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig=function O(T){var Q={},U={},S={};H.forEach(T,function R(W){var V=W.partialRetrieval;if(V){H.forEach(V.nodes,function(X){U[X]=true;});S=B.mergeHashes(S,V.filters);delete W.partialRetrieval;}H.forEach(W.actions,R);});if(!J(U)){Q.nodes=B.keyarray(U);}if(!J(S)){Q.filters=P(I(S));}return Q;};mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters=function N(R){var Q=function(T){var S={};B.forEach(T,function(W,V){var U=S[V]={serialized:W,include:{},exclude:{}};H.forEach(W.split(";"),function(Y){var X=Y.indexOf("!")===0;Y=X?Y.slice(1):Y;C(Y,X?U.exclude:U.include);});});return S;};return{data:Q(R.data),defn:Q(R.defn)};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash,A=null;function B(D){return mstrmojo.DICFactory.createDIC(C.copy({dic:this.dic,owner:this.owner,group:this},D));}mstrmojo.DICFactory=mstrmojo.provide("mstrmojo.DICFactory",{createDIC:function(G){var E=G.dic,F=mstrmojo.DICConfig.getDICClass(E),D;if(F){if(G.k===undefined){G.k=G.opener&&G.opener.id;}G.showByDefault=mstrmojo.DICConfig.showDICByDefault(G.dic,G.openerType);G.hasPreview=mstrmojo.DICConfig.hasDICPreview(G.dic,G.openerType);G.canSlice=mstrmojo.DICConfig.canSlice(G.dic,G.openerType);D=new F(G);}return D;},createDICPopup:function(D,E){return mstrmojo.DICPopup.getInstance(D,E);},createDICGroup:function(F){var I=C.copy(F,{scriptClass:"mstrmojo.Widget",widgetsMap:{},dic:null,owner:null,groupMembers:{},postCreate:function(){var L=this.dic,K=this.openerType,J=mstrmojo.DICConfig;this.showByDefault=J.showDICByDefault(L,K);this.hasPreview=J.hasDICPreview(L,K);},addDIC:function D(J,K){this.groupMembers[J]=K;},showPopupDIC:function H(K){if(!this.showByDefault){var J=this.widgetsMap[K],L=this.groupMembers[K];if(!L){return ;}if(!J){J=this.widgetsMap[K]=B.call(this,L);}J.showInPopup();}},render:function G(){if(this.showByDefault||this.hasPreview){var L=this.groupMembers,K=this,J;C.forEach(L,function(N,M){if(!N.hasRendered){K.widgetsMap[M]=J=B.call(K,N);if(K.showByDefault){J.render();}else{if(K.hasPreview&&J.enabled){J.renderPreview();}}N.hasRendered=true;}});}},destroy:function E(){C.forEach(this.widgetsMap,function(J){J.destroy();});this.widgetsMap={};}});return mstrmojo.insert(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array;function A(E){var D=(E&&E.gts&&E.gts.col)||[],G=(E&&E.gts&&E.gts.row)||[];var F=C.filter(D.concat(G),function(H){return H.otp===-1;})[0];return{tpltProp:E.prop,mxProp:C.map((F&&F.es)||[],function(H){var I={};I[H.oid]=mstrmojo.hash.copy(H.prop,{n:H.n,t:H.otp});return I;})};}mstrmojo._IsDocumentTemplate=mstrmojo.provide("mstrmojo._IsDocumentTemplate",{_mixinName:"mstrmojo._IsDocumentTemplate",gridInfo:null,tmsProps:null,update:function B(D){if(D&&D.data){this.gridInfo=D.data.gsi;this.tmsProps=A(D.data);}if(this._super){return this._super(D);}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash;mstrmojo._CanSupportTransaction={_mixinName:"mstrmojo._CanSupportTransaction",updatedCellsMap:null,getUpdates:mstrmojo.emptyFn,getUpdateObject:mstrmojo.emptyFn,getKeyContext:mstrmojo.emptyFn,autoRefresh:mstrmojo.emptyFn,editNext:mstrmojo.emptyFn,buildConditions:mstrmojo.emptyFn,dataChanged:function A(G,H,F,I,D){var E=this.updateValue(G,F);this.updatedCellsMap[G]={r:H,v:F};this.controller.onTransactionUpdates(this,this.getUpdateObject(),E,D);},postBuildRendering:function B(){if(this._super){this._super();}if(!this.txModel){this.txModel=this.model.docModel||this.model;}this.updatedCellsMap=this.updatedCellsMap||{};},updateValue:function(E,D){if(this.txModel.deltaUpdate){this.txModel.deltaUpdate(this);}return false;},getUpdatedValues:function(){var E=this.updatedCellsMap,F,D,G=[];for(F in E){if(E.hasOwnProperty(F)){D={};D.v=E[F].v.v;G.push(C.copy(this.getKeyContext(F),D));}}return G;},clear:function(){this.updatedCellsMap={};},registerTxWidget:function(){function E(F,H){var G=F.node.data.k;H.txWidgets=H.txWidgets||{};H.txWidgets[G]=F;return false;}var D=this.parent;while(D){if(D.isPanelStack===true){E(this,D);}D=D.parent;}}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");mstrmojo.vi.ui.rw.SelectionType={EMPTY:"empty",ATTS:"att",METRICS:"metric",COL_HEADERS:"col-headers",ROW_HEADERS:"row-headers",METRIC_VALUES:"metric-values"};var A=function(z){var w=(mstrApp&&mstrApp.docModelData&&mstrApp.docModelData.mid)||"",x=z.k||z.key;return x+"-"+w;},F={},n={},R=mstrmojo.hash,W=mstrmojo.array,L=function(z){var w=R.keyarray(z).sort(),x=[],AA;W.forEach(w,function(AB){AA=[];W.forEach(z[AB],function(AC){AA.push(this.model.getNormalizedFormElementId(AC.id));},this);x.push(AB+"-"+AA.sort().join("@"));},this);return x.join("#");},K=function(w){var x=L.call(this,w);if(!this._viSelections[x]){this._viSelections[x]=w;if(mstrApp&&mstrApp.isInVFConfigMode){return ;}F[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}},v=function(w){var x=L.call(this,w);if(!this._viContextMenuSelections[x]){this._viContextMenuSelections[x]=w;}},l=function(x){var z=L.call(this,x),w=this._viSelections[z];if(w){delete this._viSelections[z];if(mstrApp&&mstrApp.isInVFConfigMode){return ;}F[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}return w;},b=function(x){var z=L.call(this,x),w=this._viContextMenuSelections[z];if(w){delete this._viContextMenuSelections[z];}return w;},h=function(){var w=A(this);n=n||{};if(F[w]){n[w]=R.clone(F[w]);}},u=function(AA,z,AE,AB,w,AD,x){var AC={};AC[AA]=[{id:z,n:AE,fm:x,ui:AB,o:w,axis:AD}];return AC;},G=mstrmojo.vi.ui.rw.SelectionType;mstrmojo.vi.ui.rw._HasVisSelections=mstrmojo.provide("mstrmojo.vi.ui.rw._HasVisSelections",{_mixinName:"mstrmojo.vi.ui.rw._HasVisSelections",init:function(w){if(this._super){this._super(w);}this._viSelections={};},update:function a(x){var w=true;if(this._super){w=this._super(x);}if(!mstrApp.isInVFConfigMode){R.copy(F[A(this)],this);}if(!this.updateForInteractiveMode){h.call(this);}return w;},onSelectionChange:function J(w){if(this._super){this._super(w);}},_viSelections:{},_viContextMenuSelections:{},_selectionType:G.EMPTY,_contextMenuSelectionType:G.EMPTY,_cellSelections:[],getSelectionType:function(){return this._selectionType;},getContextMenuSelectionType:function(){return this._contextMenuSelectionType;},isSingleAttrSelection:function(){var x=null,w;if(this.getSelectionType()===G.ATTS){w=this.getSelections();if(w.length>1){return !w.some(function(z){if(!x){x=z[0].tid;return false;}return x!=z[0].tid;},this);}return true;}return false;},isSingleContextMenuAttrSelection:function(){var x=null,w;if(this.getContextMenuSelectionType()===G.ATTS){w=this.getContextMenuSelections();if(w.length>1){return !w.some(function(z){if(!x){x=z[0].tid;return false;}return x!=z[0].tid;},this);}return true;}return false;},isSingleSelection:function(){return(this._viSelections&&R.keyarray(this._viSelections).length===1);},isSingleContextMenuSelection:function(){return(this._viContextMenuSelections&&R.keyarray(this._viContextMenuSelections).length===1);},getSelectionSize:function o(){return(this._viSelections&&R.keyarray(this._viSelections).length)||0;},getCxtMnuSelectionSize:function C(){return(this._viContextMenuSelections&&R.keyarray(this._viContextMenuSelections).length)||0;},getSelectionHash:function Q(){return this._viSelections;},getContextMenuSelectionHash:function g(){return this._viContextMenuSelections;},getSelectionCache:function B(){return F[A(this)];},setSelectionCache:function U(w){F[A(this)]=w;},getPrevSelectionInfo:function I(){return n[A(this)];},getSelections:function k(){var w=[],x;R.forEach(this.getSelectionHash(),function(z){x=[];w.push(x);R.forEach(z,function(AA,AB){W.forEach(AA,function(AC){x.push({tid:AB,eid:AC.id,v:AC.n,level:AC.level});});});});return w;},getContextMenuSelections:function Z(){var w=[],x;R.forEach(this.getContextMenuSelectionHash(),function(z){x=[];w.push(x);R.forEach(z,function(AA,AB){W.forEach(AA,function(AC){x.push({tid:AB,eid:AC.id,fm:AC.fm,v:AC.n,axis:AC.axis,o:AC.o,ui:AC.ui});});});});return w;},isMetricValueSelected:function q(w){return !!this._viSelections[L.call(this,w)];},isAttSelected:function S(x,w){return this.isMetricValueSelected(u(x,w));},addAttributeSelection:function e(x,w,z){if(this._selectionType!==G.ATTS){this.clearSelections();this._selectionType=G.ATTS;}var AA=u.call(this,x,w,z);K.call(this,AA);return AA[x];},addContextMenuAttributeSelection:function c(AA,z,AD,AB,w,AC,x){if(this._contextMenuSelectionType!==G.ATTS){this.clearCxtMnuSelection();this._contextMenuSelectionType=G.ATTS;}var AE=u.call(this,AA,z,AD,AB,w,AC,x);v.call(this,AE);return AE[AA];},removeAttributeSelection:function H(x,w){return l.call(this,u.call(this,x,w));},removeContextMenuAttributeSelection:function T(x,w){return b.call(this,u.call(this,x,w));},addMetricValueSelection:function j(w){if(this._selectionType!==G.METRICS){this.clearSelections();this._selectionType=G.METRICS;}K.call(this,w);},addContextMenuMetricValueSelection:function j(w){if(this._contextMenuSelectionType!==G.METRICS){this.clearCxtMnuSelection();this._contextMenuSelectionType=G.METRICS;}v.call(this,w);},addAttrOrMetricCellSelection:function r(z,x,w){this._cellSelections.push({parentElementIds:z,target:{selectionType:w?G.ATTS:G.METRICS,id:x}});},getCellSelections:function f(){var w=this;w.clearCellSelections();var x=function(AA,z){var AB=[];if(AA){while(z.hasOwnProperty("_p")){AB.push(z._p._e.id);z=z._p;}}else{var AC=w.model.getCellDataUnion(z);W.forEach(AC,function(AD){AB.push(AD.eid);});}return AB;};W.forEach(w.highlights,function(AD){var z=w.getCellForNode(AD),AE=!z.hasOwnProperty("mix")&&z._e&&!z.fi,AC=x(AE,z);if(AE){var AA=z._e.id;w.addAttrOrMetricCellSelection(AC,AA,true);}else{var AB=z._tp._e.oid;w.addAttrOrMetricCellSelection(AC,AB,false);}});return this._cellSelections;},removeMetricValueSelection:function M(w){return l.call(this,w);},removeContextMenuMetricValueSelection:function N(w){return b.call(this,w);},clearSelections:function Y(){if(this._super){this._super();}this._viContextMenuSelections={};this._contextMenuSelectionType=G.EMPTY;this._viSelections={};this._selectionType=G.EMPTY;if(typeof this.clearSelectedGraphicInfo==="function"){this.clearSelectedGraphicInfo();}},clearCxtMnuSelection:function p(){if(this._super){this._super();}this._viContextMenuSelections={};this._contextMenuSelectionType=G.EMPTY;},clearCellSelections:function O(){this._cellSelections=[];},clearSelectionsCache:function P(){F={};},clearUnitSelections:function Y(x){if(this._super){this._super();}var w={};R.forEach(this._viSelections,function(AA,z){if(R.keyarray(AA)[0]!==x){w[z]=AA;}});this._viSelections=w;},clearAllSelectionsAndHighlight:function d(){this.clearSelections(true);this.endSelections();},endSelections:function E(){if(mstrApp&&mstrApp.isInVFConfigMode){return ;}F[A(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};this.raiseGraphicsSelectedEvent(this);if(this.isInFilterPanel()&&mstrApp&&mstrApp.isDossier){this.raiseGraphicsSelectionChangeEvent();return ;}this.onSelectionChange(this.getSelectionHash());},isInFilterPanel:function D(){var w=this.node&&this.node.defn;return w.iifp;},addSelectionsFromExpression:function t(z){this.clearSelections();this._selectionType=z.type;var w=this,x=function(AF){var AG=20,AD=19,AE=function(AH){return AH.nds.length===1?AG:AH.fn;},AC=function(AH){return parseInt(AH.et,10)===5||parseInt(AE(AH),10)===AD;},AA=function(AH){W.forEach(AH.es,function(AI){w.addAttributeSelection(AH.a.did,AI.v,AI.n);});},AB=function(AJ){var AI={},AH=function(AK){W.forEach(AK.es,function(AL){R.copy(u.call(w,AK.a.did,AL.v,AL.n),AI);});};if(AJ.nds){W.forEach(AJ.nds,AH);}else{if(AJ.es){AH(AJ);}}w.addMetricValueSelection(AI);};if(AC(AF)){AF={nds:[AF]};}W.forEach(AF.nds,function(AH){if(AC(AH)){if(z.type===G.ATTS){AA(AH);}else{AB(AH);}}else{x(AH);}});};x(z.data);},raiseGraphicsSelectedEvent:function m(){if(window.mstrApp&&window.mstrApp.isEmbedded){var AD=this,AC=AD.model,AB=AC&&AC.data,z=AB&&AB.k,w=AB&&AB.gts,AH=w&&w.row,AA=w&&w.col,AE=W.ensureArray(AH).concat(AA||[]),x=function(AJ){var AI;W.forEach(AE,function(AK){if(AK&&AK.id===AJ){AI=AK.n;return false;}});return AI;},AF=[],AG=this.getSelectionHash();R.forEach(AG,function(AJ){var AI=[];R.forEach(AJ,function(AM,AL){var AK=x(AL);W.forEach(AM,function(AN){AI.push({n:AK,nid:AL,v:AN.n,vid:AN.id});});});AF.push(AI);});mstrApp.raiseEvent({name:"graphicsSelected",value:{graphics:AF,vizKey:z}});}},raiseGraphicsSelectionChangeEvent:function X(){if(mstrApp&&(typeof mstrApp.raiseEvent==="function")){mstrApp.raiseEvent({name:"graphicsSelectionChange",value:{selections:F[A(this)],vizKey:this.k}});}}});mstrmojo.vi.ui.rw._HasVisSelections.VisSelectionType=null;mstrmojo.vi.ui.rw._HasVisSelections.clearAllSelectionsCache=function V(){F={};n={};};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],t=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-t.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=t.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,B=mstrmojo.hash;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function A(F,E){var D=[];E=E||[];B.forEach(E,function(G){C.forEach(G.att||[],function(H){if(H.did===F){D=D.concat(H.fs||[]);return false;}});});D=C.filter(D,function(G){return !!G.obf;});return C.distinct(D,"fid");}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var C=mstrmojo.hash,E=mstrmojo.array;function D(F){return function(G){F[G]=true;};}mstrmojo.rw.model.UpdateKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.UpdateKeysConfig",init:function B(){this.nodes=[];this.selectors={};this.objects={};}});mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig=function A(J){var F={},K={},G={},I={};E.forEach(J,function H(M){var L=M.partialUpdate;if(L){E.forEach(L.nodes,D(K));E.forEach(L.selectors,D(G));E.forEach(L.objects,function(N){if(!I[N.id]||N.flag>I[N.id].flag){I[N.id]=N;}});delete M.partialUpdate;}E.forEach(M.actions,H);});if(!C.isEmpty(K)){F.nodes=C.keyarray(K);}if(!C.isEmpty(G)){F.selectors=C.keyarray(G);}if(!C.isEmpty(I)){F.objects=C.valarray(I);}return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";ELEM_HIDDEN_PROP="hid";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(R,Q,U){var P,O;for(O in R){P=R[O];if(P.v){var S=P.v.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f");var T=S.split(";");if(T&&T.length>1){T[1]=Q;if(U&&T.length>2){T.pop();}P.v=T.join(";").replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");}}}return R;},buildElemsCountStr:function K(T,Q,P){T=(!T||!T.length)?[]:T;Q=(!Q||!Q.length)?[]:Q;function S(U){return U.filter(function(V){return !V[ELEM_HIDDEN_PROP];});}var R=S(T).length,O=S(Q).length;if(I.find(Q,"v",D)>-1){O-=1;}if(I.find(Q,"v",C)>-1){O-=1;}if(P){R=(R<O)?O-R:0;}if(I.find(T,"v",D)>-1||I.indexOf(T,D)>-1){R=O;}return this.buildElemsCountStrByNum(R,O);},buildElemsCountStrByNum:function K(P,O){if(P===O){if(O===0){return"";}return O.toString();}else{if(O===0){return P+" "+mstrmojo.desc(514);}else{if(P>O){return"("+O+")";}}}return mstrmojo.desc(4891,"").replace("##",String(P)).replace("###",String(O));},browseElements:function G(Q,R,P){var O={doNotHold:!(P&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(P,R),Q,O);},getIdPresentation:function J(R){if(!!R){var Q=R.charAt(0),O,P,S;if((Q>="g"&&Q<="w")||(Q>="V"&&Q<="Z")){P=false;for(S=1;S<R.length;++S){if(P){P=false;}else{switch(R.charAt(S)){case";":return"terseLong";case"\\":P=true;break;}}}return"terse";}if(Q>="B"&&Q<="Q"){if(R.length>2){O=R.charAt(1);if(O>="A"&&O<="Q"){if(R.charAt(2)===":"){return"oldLong";}}}}if(R.length>=33&&R.charAt(32)===":"){return"old";}}return null;},terseLong2OldShort:function N(P){if(this.getIdPresentation(P)!=="terseLong"){return P;}var O=P.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f"),Q=O.substring(1,O.length).split(";");return(Q[1]+":"+Q[0]).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");},oldShort2terseLong:function L(P,S){if(this.getIdPresentation(P)!=="old"){return P;}var O=P.replace(/\\\\/g,"\u001e").replace(/\\\:/g,"\u001f"),R=O.split(":"),Q=R.shift();return(S||"h")+(R.join(":")+";"+Q).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\:");},isNullElem:function H(O){if(!O){return true;}var R=this.getIdPresentation(O),P=false,Q;switch(R){case"terse":case"terseLong":Q=O.substring(1,O.length).split(";");P=Q[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":P=O.indexOf(this.OLD_NULL)>-1;break;}return P;},isNonGroupNull:function(Q){var O=Q.eid||(Q._e&&Q._e.id),P=O&&O.split(":")[0];return P&&P===this.NON_GROUP_NULL;},getAttributeId:function M(Q){var P,O;if(Q){O=Q.split(";");P=O[1];}return P;},getElementValue:function A(P){var Q,O;if(P){O=P.split(";");if(O.length>2){Q=O[0]+" "+O[2];}else{Q=O[0];}}return Q;},isAttributeIdsLinked:function E(P,O,Q){var S=false,R=B.keyarray(Q);I.forEach(R,function(T){if(T===P){I.forEach(Q[T],function(U){if(U===O){S=true;return false;}});}if(S){return false;}});return S;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000",ELEM_ALL:{t:mstrmojo.chart.model.enums.EnumDSSObjectType.DssTypeDimension,v:"u;",n:"(All)"}});}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Header");mstrmojo.models.template.Headers=mstrmojo.declare(null,null,{init:function D(K){var O=this.isRow=K.isRow,J=this.data=K.data,L=J.gts,G=J.ghs,F=this.hs=O?G.rhs:G.chs,M=this.i=K.i,N=0,I;this.titles=O?L.row:L.col;this.headers=F.items&&F.items[M]&&F.items[M].items;this.missingTitles=this.titles&&this.headers?(this.headers.length-this.titles.length):0;if(O&&this.headers){N=this.titles.length-this.headers.length;if(N){for(I=M-1;I>=0;I--){var E=F.items[I].items,H=E.length-this.headers.length;if(H>0){this.headers=E.slice(0,H).concat(this.headers);if(this.titles.length===this.headers.length){break;}}}}}},size:function B(){var E=this.headers;return(!E?0:E.length);},getHeader:function C(H){var F=this.headers,G=F&&F[H],E=H;if(G&&this.missingTitles){E=isNaN(G.tui)?G.ui:G.tui;}return G&&new mstrmojo.models.template.Header({h:G,t:this.titles[this.isRow?E:this.i]});},getCSS:function A(F){var E=this.headers;return E&&this.data.css[E[F].cni].n;},getHeaderCell:function(F){var E=this.headers;return E&&E[F];}});}());(function(){mstrmojo.requiresCls("mstrmojo.EnumAuthenticationModes");var A=mstrmojo.EnumAuthenticationModes;function C(G){var H,F,E={success:function(I){H=I.identityToken;},complete:function(){if(H){G=G+"?idToken="+H;}F.location.href=G;}};if(mstrConfig.seamlessLoginEnabled){if(mstrConfig.authMode===A.INTEGRATED.toString()){G+="?loginMode="+A.INTEGRATED;window.open(G,"_blank");}else{F=window.open();mstrmojo.xhr.request("GET",mstrConfig.taskURL,E,{taskId:"createIdentityToken"});}}else{window.open(G,"_blank");}}function D(){return mstrConfig&&mstrConfig.features&&mstrConfig.features["show-dossier-library-link"]&&!!mstrConfig.libraryWebBaseURL;}function B(F){var E=mstrConfig.libraryWebBaseURL+"app";if(F){E+="/"+mstrConfig.projectId+"/"+F;}return E;}mstrmojo.util.LibraryHelper=mstrmojo.provide("mstrmojo.util.LibraryHelper",{createTokenAndOpenLink:C,isLibraryConfigured:D,constructLibraryUrl:B});})();(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array;function B(){var H=this.buildConfig=this.buildConfig||{};H.pk=this.k;H.fgk=this.defn&&this.defn.fgk;return H;}mstrmojo._HasBuilder={builder:null,postBuildRendering:function D(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function F(){return this.model.getChildren(this.node,false);},buildChildren:function E(H){if(!this.builder||!this.model){return false;}var J=this.children;if(J&&J.length){this.set("children",[]);}var I=this.builder.build(this.getChildren(),this.model,B.call(this));if(!H){this.addChildren(I);}this.builtChildren=true;return H?I:true;},rebuildChildren:function C(J){var P=this.children.slice(0),L=this.model,K=[],I,H=this,M=mstrApp.restoreVFKey,N,O;J=J||P.slice(0);J.forEach(function(S){var Q=G.indexOf(P,S),R=S.k;if(Q===-1){throw new Error("Invalid child requested rebuild in mstrmojo._HasBuilder::rebuildChild.");}this.removeChildren(S);S.destroy();K.push(R);},this);if(mstrApp.isInVFConfigMode&&(mstrApp.showBandingInVFConfigMode||mstrApp.showOutlineInVFConfigMode)&&!!J&&J.length===1&&!!J[0]&&J[0].k===M){delete mstrApp.showBandingInVFConfigMode;delete mstrApp.showOutlineInVFConfigMode;N=L.insertVizBox(M,H,{});L.selectVIUnit(N.id,true,{});I=[N];}else{O=L.getChildrenByKey(this.node,false,K);I=this.builder.build(O,L,B.call(this));this.addChildren(I);}return I;},rebuildChild:function A(H){return this.rebuildChildren([H])[0];}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo.array;mstrmojo.fe._IsRelationTreeNode=mstrmojo.provide("mstrmojo.fe._IsRelationTreeNode",{createSetHtml:'<span class="mstrmojo-textset mstrmojo-create-set-text" mstrAttach:click >'+mstrmojo.desc(12034,"Create a Set")+"</span>",syncRootOperator:function(){var F=this.parent,H=function(){var J=this.parent,I=[];if(J){I=J.ctxtBuilder.itemWidgets;}return I;},E,D,B,C,G;if(F){E=H.call(this);B=E.length;D=A.find(E,"noRelationOperator",true)!==-1;for(C=0;C<B;C++){G=E[C];G&&G.set("noRelationOperator",D);}this.set("noRelationOperator",D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var B=mstrmojo.array;mstrmojo._HasConditionLogicDIC=mstrmojo.provide("mstrmojo._HasConditionLogicDIC",{_mixinName:"mstrmojo._HasConditionLogicDIC",target:null,owner:null,applyChanges:function(){this._super&&this._super();var F=this.target||[],D=F.length,E;for(E=0;E<D;E++){F[E].triggerValidateCondition();}},onvisibleChange:function(){this._super&&this._super();var F=this.target||[],D=F.length,E;for(E=0;E<D;E++){F[E].triggerValidateCondition();}},updateCellsMap:function(E){var I="",G=this.getCurValue?this.getCurValue():this.value,H=this.getDisplayValue?this.getDisplayValue():G,F=this.k,D=this.owner;if(E){D.updatedCellsMap[F]={r:I,v:{dv:H,v:G}};}else{if(D.updatedCellsMap[F]){delete D.updatedCellsMap[F];}}}});mstrmojo._CanRespondConditionChange=mstrmojo.provide("mstrmojo._CanRespondConditionChange",{_mixinName:"mstrmojo._CanRespondConditionChange",src:null,childDICs:null,owner:null,postBuildRendering:function(){var D=this.owner;if(D){D.buildConditions(this);}if(this.src){this.childDICs=[];A.call(this,this.childDICs);this.triggerValidateCondition();}this._super();},onvisibleChange:function(){this._super&&this._super();var J=this.childDICs||[],F=J.length,E,H,G,D,I;for(I=0;I<F;I++){E=J[I].owner.dics;H=J[I].k;D=B.find(E,"k",H);if(D>-1){G=E[D].mdf;if(G){J[I].updateCellsMap(this.visible);}}J[I].set("visible",this.visible);}},triggerValidateCondition:function(){var D=true;B.forEach(this.src,function(E){if(!C(E)){D=false;}});this.applyConditionAction(D);},applyConditionAction:mstrmojo.emptyFn});function A(G){var F=this.children||[],D=F.length,E;for(E=0;E<D;E++){if(F[E].dic){G.push(F[E]);}else{A.call(F[E],G);}}}function C(H){var M=H.dic,D=M.value,J=M.visible,F=H.logic,I=[],G,E,L=null;try{if(F[0]==="/"){I=F.split("/");G=I.pop();I.shift();E=I.join("/");L=new RegExp(E,G);}else{L=new RegExp(F);}if(!J||!L.test(D)){return false;}}catch(K){return false;}return true;}})();(function(){mstrmojo.requiresCls("mstrmojo.array");var G=function(W){var V=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return W.k+"-"+V;},O={},K=mstrmojo.array;mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",{_mixinName:"mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",postBuildRendering:function J(){this._super();this.setup();this.initialHighlight();},initialHighlight:function B(){if(!this.getExp()){if(O[G(this)]){this.highlight.apply(this,O[G(this)]);}else{if(this.isVisMap){this.highlight("allLayers",this.genSelectionMapping(),true);}else{this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}}},getExp:function(){var V=this.model.data,W=V&&V.sc&&V.sc.exp;return W;},clearsBrushingOnHighlight:true,brushSub:null,clearSub:null,getAssociatedNodes:function U(){var V=this.defn&&this.defn.an;return V&&V.length>0?V:[];},hasAssociatedNodes:function M(){var V=this.getAssociatedNodes();return V.length>0;},getDocModelForEvent:function H(){return this.model&&this.model.docModel;},setup:function Q(){var V=this.getDocModelForEvent(),W=this.id;if(V){[this.brushSub,this.clearSub].forEach(function(X){if(X){X.clear();}});this.brushSub=V.attachEventListener("brushing",W,this.onBrushing);this.clearSub=V.attachEventListener("clearBrush",W,this.onClearBrushing);}},handlesMultiSelection:function F(){return(this._super&&this._super())||this.getAssociatedNodes().length>0;},getHighlightKeys:function P(){var W=[],V=this.getAssociatedNodes();V.forEach(function(X){W.push(X.k);});return W;},onSelectionChange:function L(V){var W=false;if(this._super){W=this._super(V);}return this.clearHighlightForSelectionChange(W);},onContextMenuSelectionChange:function I(V){var W=false;if(this._super){W=this._super(V);}return this.clearHighlightForSelectionChange(W);},clearHighlightForSelectionChange:function T(W){var V=this.getDocModelForEvent();if(this.clearsBrushingOnHighlight){V.raiseEvent({name:"clearBrush",from:this});}if(this.handlesMultiSelection()&&!W){V.raiseEvent({name:"brushing",from:this,keys:this.getHighlightKeys()});return true;}return false;},onBrushing:function A(W){var V=W.keys.slice();if(V.indexOf(this.k)!==-1){if(this.highlight){var X=W.from;this.highlight(X.getSelectionType(),X.getSelectionHash());V.push(X.k);this.getDocModelForEvent().raiseEvent({name:"clearBrush",from:this,excludeKeys:V});}else{throw new Error(this.scriptClass+" must implement highlight method.");}}},onClearBrushing:function S(W){var V=false;if(K.indexOf(W.excludeKeys,this.k)===-1){if(this._super){V=this._super(W);}if(!V){var X=this.getAssociatedNodes();if(K.find(X,"k",W.from.k)!==-1){this.clearSelections(true);}}}return true;},highlight:function E(){O[G(this)]=arguments;if(this._super){this._super.apply(this,arguments);}},clearSelections:function C(){delete O[G(this)];if(this._super){this._super.apply(this,arguments);}},clearCxtMnuSelection:function D(){if(this._super){this._super.apply(this);}},clearHighlightsCache:function R(){delete O[G(this)];},updateAssociatedNodesOnMove:function N(){this.clearSelections(true);this.endSelections();if(this.isLinkedFilter&&this.isLinkedFilter()){return ;}delete this.defn.an;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var I=mstrmojo.array,Q=mstrmojo.desc(2412,"Default"),P=mstrmojo.desc(3433,"Font"),K=mstrmojo.desc(3434,"Number"),D=mstrmojo.desc(3435,"Alignment"),N=mstrmojo.desc(2886,"Borders"),E=mstrmojo.desc(3905,"Background"),R="-1,234.12",C="1,234.12",M="(1,234.12)",H="-$1,234.12",B="$1,234.12",J="($1,234.12)";var O=[{n:Q,v:"pru"}];I.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Bookshelf Symbol 1","Bookshelf Symbol 2","Bookshelf Symbol 3","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Open Sans SemiBold","Open Sans","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Wingdings 2","Wingdings 3"],function(S){O.push({n:S,v:S,symbolic:true});});function G(T,S,U){return(S&&S>=T)?G(T,S-U,U).concat(S):[];}var A=G(2,12,1);A=A.concat(G(14,24,2));A=A.concat(G(36,48,12));A=A.concat(G(72,72,1));var F=[{n:Q,v:"pru"}];I.forEach(A,function(S){F.push({n:String(S),v:String(S)});});mstrmojo._FormatDefinition={Formats:[{n:P},{n:K},{n:D},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:K},{n:D},{n:P},{n:N},{n:E}],MetricHeaderFormats:[{n:K},{n:D},{n:P},{n:N},{n:E},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:O,Sizes:F,SizesInVI:F.slice(7,19),Styles:[{n:Q,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:Q,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:R,v:1,f:"#,##0.00"},{n:R,r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:C,r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:M,v:3,f:"#,##0.00;(#,##0.00)"},{n:M,r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:H,v:1,f:'"$"#,##0.00'},{n:H,r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:B,r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:J,v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:J,r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/7"),v:"m/d"},{n:mstrmojo.desc(2232,"04/07"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/7/98"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/07/98"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/07/1998"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236,"7-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"7-Apr-98"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-98"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '98"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 1998"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 7, 1998"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/07/98 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/07/98 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:Q,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:Q,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(15361,"Double"),v:6}],extractModel:function(U,W,T){var Y=T||this.DefaultFormat,X;for(X in U){var S=U[X];if(!S.attachEventListener){if(!mstrmojo.hash.isEmpty(S)){W[X]=S;}}else{var V;for(V in S){if(Y[X]&&Y[X][V]){if(!W[X]){W[X]={};}W[X][V]=S[V];}}}}},getAvailableFonts:function L(){var S={success:function(U){if(U.name==="fontPicker"){var T=[{n:Q,v:"pru"}];I.forEach(U.shortcuts,function(W){var X=W.attributes,Y=I.filterOne(X,function(Z){return Z.value;}),V=I.filterOne(X,function(Z){return Z.symbolic;});T.push({n:Y&&Y.value,v:Y&&Y.value,symbolic:(V&&V.symbolic||"false").toUpperCase()==="TRUE"});});mstrmojo._FormatDefinition.Families=T;}}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,S,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);},getStandardFormat:function(T,S){var V=mstrmojo.hash.clone(S||this.DefaultFormat),U;T=T||{};for(U in V){T[U]=T[U]||{};}for(U in T){if(!T[U].attachEventListener){T[U]=mstrmojo.hash.make(T[U],mstrmojo.Obj);}}return T;},saveFormatModel:function(W,c,T,d){var b=d||this.DefaultFormat,Y,S;for(Y=0;Y<T.length;Y++){var X=T[Y],V=c[X]||null,a=W[X];if(a===undefined){delete c[X];continue;}for(S in b){var Z=b[S],U;if((!V&&!a)||(V&&!V[S]&&!a[S])){continue;}for(U in Z){if(a[S]===undefined||a[S]===""||a[S][U]==="pru"||a[S][U]===undefined){if(V&&V[S]&&(V[S][U]!==undefined&&V[S][U]!==null&&V[S][U]!=="pru")){V[S][U]="pru";}}else{V=V||{};V[S]=V[S]||{};V[S][U]=a[S][U];}}}if(V){c[X]=V;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var E=mstrmojo.array;mstrmojo._BindTargetChildren=mstrmojo.provide("mstrmojo._BindTargetChildren",{target:null,targetProps:null,addTabButtons:null,removeTabButtons:null,clearButtons:null,ontargetChange:function D(L){var M=L&&L.valueWas;if(M){var J=this._targetSubs;if(J){M.detachEventListener(J.add);M.detachEventListener(J.rem);M.detachEventListener(J.sel);}this.clearButtons();}var N=this.target;if(N){var I=this.targetProps,H=(I&&I.children)||"children",F=N[H];this.addTabButtons(F,0);this._onTargetSelChg();if(N.attachEventListener){var G=this.id,K="attachEventListener";this._targetSubs={add:N[K]("addChild",G,"_onTargetAddChild"),rem:N[K]("removeChild",G,"_onTargetRemoveChild"),sel:N[K]("selectedChange",G,"_onTargetSelChg")};}}this._ontargetChange();},_ontargetChange:mstrmojo.emptyFn,_onTargetAddChild:function A(F){var G=F&&F.value;if(G&&G.length){this.addTabButtons(G,F.index);}this._postTargetAddChild();},_postTargetAddChild:mstrmojo.emptyFn,_onTargetRemoveChild:function B(G){var F=G&&G.value,H;for(H=((F&&F.length)||0)-1;H>-1;H--){this.removeTabButton(F[H]);}this._postTargetRemoveChild();},_postTargetRemoveChild:mstrmojo.emptyFn,_onTargetSelChg:function C(L){var G=this.targetProps||{},F=this[G.names||"children"],J=function(O,P){if(O.set){O.set("selected",P);}else{O.selected=P;}};if(L){var H=L.valueWas,K=H?E.find(F,"target",H):-1;if(K>-1){J(F[K],false);}}var M=this.target,N=M&&M.selected,I=N?E.find(F,"target",N):-1;if(I>-1){J(F[I],true);}this._postTargetSelChg();},_postTargetSelChg:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var B=mstrmojo.array;function A(C){if(C.parent){if(C.parent.shouldEllipsizeChildren===undefined){mstrmojo.mixin(mstrmojo._HasEllipsis,C.parent);}C.parent.set("shouldEllipsizeChildren",true);}}mstrmojo._HasEllipsis=mstrmojo.provide("mstrmojo._HasEllipsis",{shouldEllipsize:false,shouldEllipsizeChildren:false,doEllipsize:function(){if(this.shouldEllipsizeChildren){B.forEach(this.children,function(D,C){if(D.hasRendered&&D.doEllipsize){D.doEllipsize();}});}},onshouldEllipsizeChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsize,this.shouldEllipsizeChildren);},onshouldEllipsizeChildrenChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsizeChildren,this.shouldEllipsize);},_onEllipsizeFlagChange:function(D,C){if(D&&!C){A(this);this.markupMethods=mstrmojo.mixin({onvisibleChange:function(){if(this._super){this._super();}if(this.visible&&this.hasRendered){this.doEllipsize();}}},mstrmojo.hash.copy(this.markupMethods));}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var F=mstrmojo.array;mstrmojo._IsPanelStack=mstrmojo.provide("mstrmojo._IsPanelStack",{_mixinName:"mstrmojo._IsPanelStack",TTL_SRC_PANEL:0,model:null,selectedIdx:undefined,init:function K(P){this._super(P);var O=this.defn;if(!O){O=this.defn=this.node&&this.node.defn;this.titleSrc=this.titleSrc||O.ttlSrc;}var N=this.selectedKey=this.defn.selKey=this.node.data.selKey;this.set("selectedIdx",F.find(this.node.data.panels,"k",N));O.attachEventListener("selKeyChange",this.id,function(Q){this.set("selectedKey",Q.value);});},addChildren:function M(P,V,T){var U=this.getFormats(),R=U&&U.overflow,Q=P.length,S;for(S=0;S<Q;S++){var O=P[S],W=O.k;if(W){O.selected=O.visible=W===this.selectedKey;if(R){var N=O.getFormats()||O.createEmptyFormats();if(N){N.overflow=R;}}}}return this._super(P,V,T);},refresh:function G(){if(this.hasRendered){var N=this.defn.newSelKey||this.selectedKey,P=this.selectedVisFilterContainerKey,O;F.forEach(this.children,function(R){var Q=R.k;if(Q){R._delayRefresh=(Q!==N);O=mstrApp.isInVFConfigMode&&Q===P;if(!R._delayRefresh&&!O){R.refresh();}}});}delete this.defn.newSelKey;},selectPanel:function B(O,P,N){var Q=this.model.getDataService(),R=Q.newUpdateWithoutCmd();this.selectPanelDeferred(R,O,P,N);if(R.actions&&R.actions.length>0){Q.addSuppressData(R.extras);R.submit();}},selectPanelDeferred:function(Q,O,P,N){if(O!==this.selectedKey){this.defn.set("selKeyChange",O);this.model.selectPanelDeferred(Q,this.k,O,this.node.data.wid,P,N);}},onselectedKeyChange:function L(O){var P=0,S,N,Q;F.forEach(this.children||this.node.data.panels,function(U,T){var V=U.k;if(V){if(O.value===V){N=U;Q=T-P;if(U.set){U.set("visible",true);U.set("selected",true);}}else{if(O.valueWas===V){S=U;if(U.set){U.set("selected",false);U.set("visible",false);}}}if(N&&S){return false;}}else{P++;}return true;});if(this.titleSrc===this.TTL_SRC_PANEL&&this.title){var R=N&&N.title;this.set("title",R);this.defn.ttl=R;}this.prevSelectIdx=this.selectedIdx;this.set("selectedIdx",Q);this.raiseEvent({name:"panelSelected",key:N.k});return{on:N,off:S};},getSelectedPanel:function D(){var N=0,O=this.selectedIdx,P;F.forEach(this.children,function(R,Q){if(R.k){if(Q-N===O){P=R;return false;}}else{N++;}return true;});return P;},setDirtyChildren:function I(N){var O=this.selectedKey;F.forEach(this.children,function(Q){var P=Q.k;if(P){Q[((N||P!==O)?"add":"remove")+"DirtyKey"](P);}});},clearDirtyChild:function J(P){var O=this.children,N=O[F.find(O,"k",P)];if(N){N.removeDirtyKey(N.k);}},isPanelStack:true,checkRequiredObjects:function C(){var N=this.txWidgets||{},O=true,P;for(P in N){O&=!!N[P].checkRequiredObjects();}return O;},isAutoApply:function E(){return this.defn.cas;},updateSelectedIdx:mstrmojo.emptyFn,unrender:function H(N){delete this.defn.newSelKey;this._super(N);},switchToPanel:function A(N,O){if(O!==undefined){this.set("selectedIdx",O);}else{this.updateSelectedIdx(N);}this.children[this.selectedIdx]&&this.selectPanel(this.children[this.selectedIdx].k);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");function C(G,H,E){var F=G.createElement("input");F.name=H;F.type="hidden";F.value=E;return F;}function B(K,J){J=J.substring(J.indexOf("?")+1,J.length);var M=J.split("&"),L="",G="";var N=/\+/g,H,E;for(H=0,E=M.length;H<E;H++){var I=M[H].indexOf("=");if(I>=0){L=M[H].substring(0,I);G=M[H].substring(I+1);}else{L=M[H];G="";}if(G){G=decodeURIComponent(G.replace(N," "));}var F=document.createElement("INPUT");F.type="HIDDEN";F.name=L;F.value=G;K.appendChild(F);}return false;}mstrmojo.form={createDynamicForm:function A(E,H){var F=document.createElement("FORM"),G=E.indexOf("?")>0;F.name="dynamic_form";F.method=H||"POST";F.action=(G?E.substring(0,E.indexOf("?")):E);if(G){B(F,E);}document.body.appendChild(F);return F;},sendLinkAsForm:function(E,G,H){var F=this.createDynamicForm(E,H);this.send({},F.action,F.method,G,null,null,F);},sendLink:function(E,H,I){var G=mstrmojo.array.indexOf(["_new","_blank"],H)>-1,F=!mstrmojo.isUrlExternal(E);if(!G&&F){mstrApp.showWait&&mstrApp.showWait({showCancel:true,onCancel:mstrApp.hideWait});}if(!mstrmojo.isUrlExternal(E)){mstrmojo.form.sendLinkAsForm(E,H,I);}else{if(G){window.open(E);}else{window.location.href=E;}}},send:function D(L,M,F,O,J,H,G){var Q=((J&&J.hWin)||window).document,N=G||Q.createElement("form"),K=mstrApp;L=mstrmojo.addCSRFTokenToTaskParams(L);N.method=F||"POST";if(O){N.target=O;}N.action=M||K.name;H=(H!==undefined)?H:!(N.action&&N.action.indexOf("aspx")>0)&&mstrConfig.addTimeStampToPreventCaching;if(!!K.addJSessionIdToURL&&K.httpSessionId){N.action+=";jsessionid="+K.httpSessionId;}if(H){N.action+=";uxts"+mstrmojo.now();}N.appendChild(C(Q,"xts",String(mstrmojo.now())));var R,E=K.persistTaskParams||microstrategy.persistParams;for(R in E){L[R]=E[R];}if(K.servletState&&K.name){L[K.name]=K.servletState;}if(L){var I;for(I in L){if(L[I].constructor===Array){mstrmojo.array.forEach(L[I],function(S){N.appendChild(C(Q,I,S));});}else{N.appendChild(C(Q,I,L[I]));}}}Q.body.appendChild(N);try{N.submit();}catch(P){if(O&&P.result===2147500037&&!window.open("","","width=1,height=1,left=0,top=0,scrollbars=no")){mstrmojo.alert("*This action requires popups to be allowed in the browser.*");}else{mstrmojo.err("Form submission failed for an unknown reason.");}}Q.body.removeChild(N);},addURLAsHiddenInputsToForm:B};}());(function(){mstrmojo.requiresCls("mstrmojo.form");mstrmojo.vi.util.NavUtility=mstrmojo.provide("mstrmojo.vi.util.NavUtility",{checkSessionAndSendForm:function(C,A,E,B){var D=mstrApp.sessionManager;if(D&&D.sessionTimedout){D.openLoginEditor({success:function(){if(B!=="_blank"&&B!=="mstrExportWindow"){mstrApp.showWait();}mstrmojo.form.send(C,A,E,B);}});}else{if(B!=="_blank"&&B!=="mstrExportWindow"&&C.evt!==3198){mstrApp.showWait();}mstrmojo.form.send(C,A,E,B);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.form");var F=mstrmojo.dom;var A=mstrmojo.form;function C(J,I,H,L){var G=J.getElementsByTagName(I);var K=mstrmojo.array.filter(G,function(M){return M.getAttribute(H)===L;});return K[0];}function B(M){var K=document.getElementById(M),J=C(K,"input","name","myFile"),I=J.value,L=function(){if(F.isIE){var N=document.createElement("form");J.parentNode.insertBefore(N,J);N.appendChild(J);N.reset();N.removeNode(false);}};if(I===""){return ;}else{if(/\.mstr$/.test(I.toLowerCase())){mstrApp.showWait(true);A.addURLAsHiddenInputsToForm(K,mstrmojo.addCSRFTokenToURL(mstrApp.name+"="+encodeURIComponent(mstrApp.servletState)));if(mstrApp.currentFolderId){var H=document.getElementById("import_folderID");H.value=mstrApp.currentFolderId;}if(!C(K,"input","name","formId")){var G=document.createElement("input");G.type="hidden";G.name="formId";G.value=K.id;K.appendChild(G);}K.submit();K.reset();}else{mstrmojo.alert(mstrmojo.desc(11227),null,mstrmojo.desc(11226));}}L();}function E(Q){var V=Q.status===200,K=Q.content,J=mstrApp.name,L=function(a){mstrApp.showWait();var Z=document.getElementById(K.formId||"import_form"),Y=[],X=0,W;mstrmojo.hash.forEach(a,function(d,c){if(c==="folderId"){if(F.isIE8){var b=document.getElementById("import_folderID");if(b){b.value=d;}}}else{W=document.createElement("input");W.type="hidden";W.name=c;W.value=d;Z.appendChild(W);Y[X++]=W;}});window.setTimeout(function(){Z.submit();for(var b=0;b<Y.length;b++){Z.removeChild(Y[b]);}},0);};if(K&&K.messageID){var I=(K.fdid?K.fdid:"");if(K.isConflict){var P=function(){L({messageID:K.messageID,resume:true});},M=function(){var W=mstrmojo.insert({scriptClass:"mstrmojo.ui.editors.RenameEditor",renameText:mstrmojo.string.decodeHtmlString(K.n),title:mstrmojo.desc(13052,"Upload"),zIndex:1002,onRename:function(X){if(mstrmojo.string.isEmpty(X)){mstrmojo.alert("Please enter a valid name",null,null,1004);return false;}else{L({messageID:K.messageID,resume:true,dashboardName:X});var Y=mstrmojo.all.ImportNameConflictDialog;if(Y){Y.destroy();}}}});W.open();return false;},H=function(){mstrApp.hideWait();};H();mstrmojo.confirm(mstrmojo.desc(15454,"The Dossier ## already exists. Do you want to replace the existing Dossier?").replace("##",("<strong>"+K.n+"</strong>")),null,{id:"ImportNameConflictDialog",title:mstrmojo.desc(13052,"Upload"),allowHTML:true,buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(219,"Yes"),P,true),mstrmojo.Button.newWebButton(mstrmojo.desc(3167,"Save As"),M,true),mstrmojo.Button.newWebButton(mstrmojo.desc(3416,"Cancel"),H)],onPreClose:function(){H();return true;}});}else{L({messageID:K.messageID,folderId:I});}}else{if(V){var O=mstrmojo.addCSRFTokenToURL(J+"?evt=2001&src="+J+".2001"+((K&&K.fdid)?("&folderID="+K.fdid):"&systemFolder=20")),G=D(K.did),U=function(W){if(this.parent===null&&this.close){this.close();}else{this.parent.parent.close();}if(W){location.href=W;}},S=mstrmojo.emptyFn,R=function(){mstrmojo.mstr._ObjectActions.openSharingEditor(K.servletPath+G,{objectName:K.n,objId:K.did,objType:"55",mid:-1},false,{showLinkOnOpen:true});};if(!mstrmojo.resolveFeature("flashvi")&&(F.isIE8)){S=function(){U.call(this);mstrmojo.alert(mstrmojo.desc(15474));};}else{S=function(){U.call(this,G);};}var T=mstrApp.currentFolderName&&mstrApp.currentFolderName();var N=mstrmojo.insert({scriptClass:"mstrmojo.onetier.vi.ui.UploadResultEditor",folderName:T||"My Reports",dashboardName:K.n,okFn:function(){U.call(this,T&&O);},viewDashboardFn:S,shareDashboardFn:R});N.open();}else{mstrmojo.error({longDesc:Q.errorMsg});}mstrApp.hideWait(true);}}function D(K){var I=mstrApp.name,J,L;if(mstrmojo.resolveFeature("flashvi")){J=2048001;L={visMode:0};}else{J=3140;L={};}L.documentID=K;L.evt=J;L.src=I+"."+J;var G=[];for(var H in L){if(!L.hasOwnProperty(H)){continue;}G.push(encodeURIComponent(H)+"="+encodeURIComponent(L[H]));}return mstrmojo.addCSRFTokenToURL(I+"?"+G.join("&"));}mstrmojo.mstr.ui.MstrFileUploadHelper={uploadDashboardFile:B,uploadCallback:E};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.models.template.Titles","mstrmojo.models.template.MetricValue","mstrmojo.models.template.Headers","mstrmojo.models.datasets.DataInterface");var X=mstrmojo.array,K=mstrmojo.hash,h=mstrmojo.string,U=mstrmojo.models.datasets.DataInterface,L=h.decodeHtmlString;var P=-1,f=1,S=2,E=3;var H=1,e=2,C=3;var I="0";function J(l){var m={};K.forEach(l,function(p,o){var n=[];X.forEach(p,function(q){n.push({fillColor:q.fillclr,text:q.n});});m[o]=n;});return m;}function T(o){var AA=this.getTotalRows(),q=this.data,u=[],w=q.gts.col[0],n=w?w.es:[],z=n.length,r=0;o=K.copy(o,{minAttribute:1,minMetric:1});if(AA<o.minAttribute||z<o.minMetric){throw"Error";}do{var m=this.getRowHeaders(r),p,l={},v=m.size();for(p=0;p<v;p++){while(p<v&&m.getHeader(p).getFormIndex()!==undefined){p++;}if(p<v){var t=m.getHeader(p);l[t.t.n]=t.getName();}}for(p=0;p<n.length;p++){var x=this.getMetricValue(r,p).value;l[n[p].n]={v:x.v,rv:x.rv};}u.push(l);r++;}while(r<AA);return u;}function B(m){var l=[],n=this.data.gts.row;X.forEach(n,function(p,o){X.forEach(m,function(q){if(p.id===q.id){l[o]=true;}});});return l;}function d(AP){var w=this.getTotalRows(),AR=this.data,v=[],z=AR.gts.col[0],q=z?z.es:[],AG=q.length,u,AK=0;AP=K.copy(AP,{minAttribute:1,minMetric:1,colorByInfo:[],hasTitleName:false,hasSelection:false,needDecode:false});if(w<AP.minAttribute||AG<AP.minMetric){throw"Error";}var l=AP.needDecode,AM=AP.hasTitleName,AL=AP.hasSelection,AS=AP.hasThreshold,AE=AP.colorByInfo;var AQ=AS?J(AR.th):undefined;u=B.call(this,AE);do{var n=this.getRowHeaders(AK),p={},AI,AH=[],AO=AE.length,m={headers:[],values:[],colorInfo:[]};for(AI=0;AI<n.size();AI++){var AJ=n.getHeader(AI),AB=AJ.getName(),AU=AJ.t,t={name:l?L(AB):AB};if(AM){var AT=AU&&AU.n;t.tname=l?L(AT):AT;}if(AL){var AD=AU&&AU.id,x=AJ.getElementId();t.attributeSelector={n:AB,tid:AD,eid:x,isSelectAttr:true};p[AD]=[{n:AB,id:x}];}if(AO&&u[AI]===true){var AA=AJ.getElementId();AH.push(AA);}m.headers.push(t);}if(AO){m.colorInfo=AH;}for(AI=0;AI<q.length;AI++){var AF=this.getMetricValue(AK,AI).value,AN={v:AF.v,rv:AF.rv};if(AS){var r=AQ[AI],o=r&&r[AF.ti];if(o){AN.threshold=o;}}if(AM){var AC=this.getColTitles().titles[0].es[AI].n;AN.name=l?L(AC):AC;}m.values.push(AN);}if(AL){m.metricSelector=p;}v.push(m);AK++;}while(AK<w);return v;}function O(AF){var AI=this.data,p=this.getTotalRows(),q=AI.gts.col[0],n=q?q.es:[],u=n.length,v={},w=[],z,AA=0,x;AF=K.copy(AF,{minAttribute:1,minMetric:1,descKey:"name",childrenKey:"children",hasTitleName:false,hasSelection:false,needDecode:false,nestedLevel:undefined,colorByInfo:[]});if(p<AF.minAttribute||u<AF.minMetric){throw"Error";}var o=AF.descKey,r=AF.childrenKey,l=AF.needDecode,AC=AF.hasTitleName,AB=AF.hasSelection,m=AF.nestedLevel||0,AH=AF.hasThreshold,t=AF.colorByInfo,AD=t.length;var AG=AH?J(AI.th):undefined;v[o]="root";z=B.call(this,t);var AE=function(Ae,AL,AV,AY,AO){var AS=(Ae[r]=Ae[r]||[]),Af=AL.getHeader(AV),Aj=Af&&Af.t,Ac=Aj&&Aj.id,Aa=(Af&&Af.getName())||"",AW=AL&&AL.headers&&AL.headers.length||0,Ag,AZ=Af&&Af.getElementId(),AK=X.filterOne(AS,function(Ak){return(Ak._eid===AZ);});Ag=X.some(z,function(Al,Ak){return Al&&((AV-Ak)%AW===0);});var Ah=AV+1,AQ=[Aa];while(Ah<AL.size()){var AP=AL.getHeader(Ah),AJ=AP&&AP.t,AR=AJ&&AJ.id;if(AR===Ac){AV++;if(AP&&AP.getName()){AQ.push(AP.getName());}}else{break;}Ah++;}Aa=AQ.join(" ");if(AD&&Ag){w.push(AZ);}if(!AK||(AV===m-1)){AK={_eid:AZ};var AU=(Af!==undefined);if(AU){AK[o]=l?L(Aa):Aa;}if(AC&&AU){var Ai=Aj&&Aj.n;AK.tname=l?L(Ai):Ai;}if(AB&&AU){AK.attributeSelector={n:Aa,tid:Ac,eid:AZ,isSelectAttr:true};}AS.push(AK);}if(AB&&AU){AO[Ac]=[{n:Aa,id:AZ}];}if(AV<AL.size()-1&&(!m||(AV<m-1))){AE.call(this,AK,AL,AV+1,AY,AO);}else{var AX=this.getMetricValue(AY,0).value;if(AX){AK.value=AX.rv;AK.formattedValue=AX.v;}if(AD){AK.colorInfo=w;w=[];}AK.values=[];for(x=0;x<n.length;x++){var Ad=this.getMetricValue(AY,x).value,AM={v:Ad.v,rv:Ad.rv};if(AH){var AT=AG[x],AN=AT&&AT[Ad.ti];if(AN){AM.threshold=AN;}}if(AC){var Ab=this.getColTitles().titles[0].es[x].n;AM[o]=l?L(Ab):Ab;}AK.values.push(AM);}if(AB){AK.metricSelector=AO;}}};do{AE.call(this,v,this.getRowHeaders(AA),0,AA,{});AA++;}while(AA<p);return v;}function W(l,m){var n=[];X.forEach((l.row||[]).concat(l.col||[]),function(o){if((o.id===m)&&(o.fs)){n=n.concat(o.fs);}});return n;}mstrmojo.models.template.DataInterface=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.models.template.DataInterface",data:null,init:function(l){this.data=l;},getRowTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:true});},getColTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:false});},getTotalRows:function a(){if(this.data.eg){return 0;}var n=this.data,m=n&&n.ghs,l=m&&m.rhs,o=l&&l.items;return(o&&o.length)||0;},getTotalColHeaderRows:function b(){var l=this.data.ghs.chs.items;return(l&&l.length)||0;},getTotalCols:function D(){return this.getColHeaders(0).size();},getRowHeaders:function V(l){return new mstrmojo.models.template.Headers({data:this.data,i:l,isRow:true});},getColHeaders:function Y(l){return new mstrmojo.models.template.Headers({data:this.data,i:l,isRow:false});},getMetricValue:function F(n,l){var m=this.data;return new mstrmojo.models.template.MetricValue({data:m,value:m.gvs.items&&m.gvs.items[n].items[l]});},getColumnHeaderCount:function N(){var l=this.data.gvs.items;return l?l[0].items.length:0;},getCSSString:function Z(){return this.data.cssString;},isEmpty:function M(){var l=this.data.gsi;return !l||(!l.rows.length&&!l.cols.length&&!l.mx.length);},getAggregatePadding:function G(){var m=this.data.gsi&&this.data.gsi.fmts,n=function(p,o){return p+o;},l=function(p){var o=0;return["ch","rh","va"].map(function(q){var r=false;return p.map(function(t){if(m[q]&&m[q].hasOwnProperty(t)){if(!r){r=true;o++;}return m[q][t];}return 0;}).reduce(n)/p.length;}).reduce(n)/(o||1);};if(!m){return null;}return{v:l(["tp","bp"]),h:l(["rp","lp"])};},getColResizeScenario:function g(){var l=this.data;if(l.afw){return f;}else{if(l.afc===false){return E;}else{return S;}}},getColResizeInfo:function c(q){var r=this.data,o={v:this.getColResizeScenario(),widths:null};var t=r.gsi,m=r.gts||{},w=[],p=r.twm||{},u=p.top||[],v=p.bottom||[],n=0,l=function(z,x){if(t){t[z].every(function(AB){var AC=AB.did,AD=W(m,AC),AA=U.getFormsByAttrId(AC,q);(AD.length?AD:[]).forEach(function(AG,AF){var AH=AA[X.find(AA,"fid",AG.id)],AE=(v&&v[n])||{};w.push({n:AB.n+(AA.length?(" - "+AH.fnm):""),did:AC,depth:AF+1,t:AB.t||4,width:parseInt(AE.w||0,10),widthModel:{top:(u&&u[n])||{},bottom:AE}});n++;});return !x;});}};l("rows",false);if(w.length===0){l("cols",false);}l("mx",t.tma===1);o.widths=w;return o;},getRowResizeScenario:function Q(){return !!this.data.rh?E:S;},getRowResizeInfo:function A(){var m=this.data,l=m.rh;return{v:this.getRowResizeScenario(),height:(l===undefined||l==="")?m.xrh:l};},getColumnHeaderData:function R(x){var r=this.data,AA=r.gts,z=r.gts.rec,AB=[],m=[],v=AA.row,t=r.gsi.prop.rows.shw===I&&x;X.forEach(v,function(AD){var AC=AD.fs,AE=AD.otp===P;if(!t){if(AC&&AC.length>1){X.forEach(AC,function(){AB.push(AD);});}else{AB.push(AD);}}if(AE){m=AD.es;}});var q=AA.col;if(q&&q.length>0){var p=r.ghs,n=p.chs,l=n.items,w=l[l.length-1].items,o=function o(AC){var AD=AC.pi,AE=AD&&AD.ci,AF=AD&&AD.ri;if(AC.mix!==undefined){return AC;}if(AF===undefined||AE===undefined){return ;}return o(l[AF].items[AE]);};X.forEach(q,function(AC){var AD=AC.otp===P;if(!t&&(AD&&(!z||v.length===0))){AB.push(AC);}if(AD){m=AC.es;}});var u=AB.length;X.forEach(w,function(AC){delete AC._ridx;});if(m.length>0){X.forEach(w,function(AF){var AC=o(AF);var AG=AC?AC.idx:(AF.pi?0:AF.idx),AE=m[AG]||m[0];var AD=AE._ridx=AE._ridx||[];if(AD.length===0){X.forEach(w,function(AI,AJ){var AH=o(AI);if(!AC||AH.mix===AG){AD.push(u+AJ);}});}AB.push(AE);});}}else{if(m.length>0){AB.push(m[0]);}}return AB;},getUnitById:function j(n){var m=this.data.gsi,l=null;[m.rows,m.cols,m.mx].some(function(o,p){if(p===2){p=-2;}o.some(function(q,r){if(q.did===n){l={axis:p+1,depth:r+1,unit:q};}return !!l;});return !!l;});return l;},getRawData:function k(l,m){switch(l){case e:return T.call(this,m);case C:return d.call(this,m);}return O.call(this,m);}});mstrmojo.models.template.DataInterface.inflateGridData=function(n){var o=n.gvs,m=n.ghs;if(n.egt===undefined&&(n.eg===undefined||n.eg===null)&&!!o&&K.isEmpty(o)){var l={v:"",rv:""},p={items:(m.chs.cws||[0]).map(function(){return l;})};o.items=m.rhs.items?m.rhs.items.map(function(){return p;}):[];o.show=true;}};mstrmojo.models.template.DataInterface.ENUM_GRID_RESIZE={FIT_TO_WINDOW:f,FIT_TO_CONTENTS:S,FIXED:E};mstrmojo.models.template.DataInterface.ENUM_RAW_DATA_FORMAT={TREE:H,ROWS:e,ROWS_ADV:C};}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.array");var H=mstrmojo,F=H.array,A="00000000000000000000000000000000",E=-1;function J(K){return K&&K.t===4&&K.id!==A;}function G(L){var K,M=(L&&L.length)||0;if(M===0){return false;}for(K=0;K<M;K++){if(!J(L[K])){return false;}}return true;}mstrmojo.VisProps=null;mstrmojo.vi.viz.DropZoneHelper=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.vi.viz.DropZoneHelper",getXml:function B(){return"";},setData:function I(K){},isMetric:function(K){return J(K);},isMetricZone:function(K){return G(K);},getMetricCountInZone:function D(L){var K=0;F.forEach(L,function(M){if(J(M)){K++;}});return K;}});mstrmojo.vi.viz.DropZoneHelper.METRIC_NAMES_ID=A;mstrmojo.vi.viz.DropZoneHelper.isMetricNames=function C(K){return(parseInt(K.did,10)===E)||(K.id===A)||(K.did===A);};}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasDrillLinks","mstrmojo.registry","mstrmojo.hash","mstrmojo.dom");var C=mstrmojo.dom;var A="openDrillLinkMenu";mstrmojo._HasHoverButton=mstrmojo.provide("mstrmojo._HasHoverButton",mstrmojo.hash.copy(mstrmojo._HasDrillLinks,{_mixinName:"mstrmojo._HasHoverButton",buttonNodeMarkup:'<div class="mstrmojo-LinkInfo-buttonNode"></div>',init:function D(E){this._super(E);this.markupSlots.buttonNode=function(){return this.domNode.lastChild;};},hoverBtn:null,postBuildRendering:function B(){if(!this.hoverBtn){this.addChildren(mstrmojo.registry.ref({scriptClass:"mstrmojo.Button",slot:"buttonNode",alias:"hoverBtn",onclick:function H(){if(this.parent.url){this.openPopup();}},openPopup:function E(){var J=mstrmojo.findAncestor(this,A);if(J){J.openDrillLinkMenu({openerButton:this,drillLinkItems:this.parent.drillLinkItems,cmPos:this.cmPos});}},closePopup:function F(){var J=mstrmojo.findAncestor(this,A);if(J){J.closePopup();}}}));}var G=this._super();var I=this.id;C.attachEvent(this.domNode,"contextmenu",function(J){mstrmojo.all[I].oncontextmenu(J,self);});return G;},oncontextmenu:function(G,E){var F=this.hoverBtn;F.cmPos=C.getMousePosition(G,E);F.openPopup();F.cmPos=null;C.preventDefault(E,G);}}));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ListSelector");var A=mstrmojo.dom;mstrmojo.TreeBrowserSelector=mstrmojo.provide("mstrmojo.TreeBrowserSelector",mstrmojo.hash.copy({premousedown:function B(F,I,E){if(A.isPrimaryMouseBtn(E.e)){var D=E.hWin,H=E.e,G=A.eventTarget(D,H),C=F.listMapper.findIndex(F,I,G);if(C>-1){F.toggleSelect(C);}}}},mstrmojo.hash.copy(mstrmojo.ListSelector)));})();(function(){mstrmojo.requiresCls("mstrmojo.vi.enums.EnumThemeProperties");var A=mstrmojo.vi.enums.EnumThemeProperties,B=A.ENUM_LAYOUT_THEME;mstrmojo.util.ThemeHelper=mstrmojo.provide("mstrmojo.util.ThemeHelper",{getThemePropConfig:function C(E){var F=E&&E.layoutTheme,D=E&&E.layoutstyle;if(!F){F=!!D?B.DEFAULT:B.CLASSIC;}return F===B.DEFAULT?A.DEFAULT_THEME_PROPS:A.CLASSIC_THEME_PROPS;}});})();(function(){mstrmojo.requiresClsP("mstrmojo","dom","hash","array","css","func","desc");var P=mstrmojo.dom,C=mstrmojo.css,Q=mstrmojo.hash,b=mstrmojo.array,n=mstrmojo.func,L=mstrmojo.desc;var K,F=[],z="moving";mstrmojo.requiresDescs(15934,15935,15936,15937,15938,15939,15940,1006);function R(AD,AC){var AB=AD&&AD.length||0;AC=AC===undefined?30:AC;return AD+Array(Math.max(AC-AB,0)+1).join(" ");}function B(AB){if(K){window.clearTimeout(K);K=null;}G();b.forEach(AB,function(AC){C.toggleClass(AC,z,true);});F=[].concat(AB);K=window.setTimeout(G,1000);}function G(){b.forEach(F,function(AB){C.toggleClass(AB,z,false);});F=[];}function g(AJ,AH,AB,AF){var AK=AJ.rows,AC=AK.length,AE;if(AH<0||AH>=AC||AB<0||AB>AC){AE=false;}else{if(AB===AH||AB===AH+1){AE=true;}else{var AG=AK[AH],AD=AJ.insertRow(AB);P.replace(AD,AG);if(mstrmojo.debugBundles&&console){console.log("move "+R('"'+AG.cells[0].textContent.trim()+'"')+' after "'+AJ.rows[AG.rowIndex-1].textContent.trim()+'"');}if(!AF){B(Array.apply(null,AG.cells));}if(AH===1||AB===1){var AI=this.getViz();AI.offsetCellNode=S.call(this).rows[1].cells[0];}AE=true;}}return AE;}function w(AB){var AC=P.findAncestorByName(AB,"tr");return AC&&AC.rowIndex;}function H(AD,AE){var AB;if(AD){var AF=P.findAncestorByName(AD,"tr"),AC=AF&&AF.rowIndex;AB=AC+(AE?0:1);}else{if(AE){AB=S.call(this).rows.length;}else{AB=1;}}return AB;}function q(AD,AC){var AB;if(AD){AB=AD.ordinal;}else{if(AC){AB=X.call(this)-1;}else{AB=0;}}return AB;}function X(){var AB=this.getViz();dataBlocks=AB.dataBlocks,tc=0;b.filterOne(dataBlocks,function(AC){tc=AC&&AC.rw.row.tc;return tc!==undefined;});return tc;}function AA(AI,AC){var AJ=t.call(this),AM=AJ.rowsPerPage,AK=Math.ceil((AI+2)/AM)-1,AE=AJ.pageStatus[AK],AD=[],AF;for(AF=AJ.numPagesRendered;AF<AK;AF++){AD.push({idx:AF,fill:false});}var AH,AB;if(!AE||!AE.filled){if(AE&&AE.isOnDemand()){if(!AE.isDownloading&&!AJ.isDownloading){var AL=AK*AM-1,AG=(AK+1)*AM-2;AE.isDownloading=true;AJ.isDownloading=true;AJ.cp.download(AL,AG);AH=true;AB=AG-AL+1;if(mstrmojo.debugBundles&&console){console.log("load data from orddinal "+AL+" to "+AG+" for page index "+AK+" and ordinal "+AI);}}AD.push({idx:AK,fill:false});}else{AD.push({idx:AK,fill:true});}}if(AH&&AC){AJ.parent.showDownloadStatus(AB);}else{AJ.parent.closeDownloadStatus();}return AD;}function S(){var AB=t.call(this);return AB.tableNode;}function t(){var AB=this.getViz();return AB.zone;}function Z(AE){var AC=this.getViz(),AB=AC.scrollboxLeft,AD=AC.scrollboxTop;if(AB!==AE.x||AD!==AE.y){AC.scrollTo(AE);}}mstrmojo.vi.controllers.CustomSortModeActionMgr=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.CustomSortModeActionMgr",actions:null,pos:-1,historicalUnsilentActions:null,csDisplayPanel:null,init:function o(AB){Q.copy(AB,this);this.actions=[];this.historicalUnsilentActions=[];},appendHistUnsilentActions:function c(AB){this.historicalUnsilentActions=this.historicalUnsilentActions.concat(AB);},getViz:function a(){return this.csDisplayPanel.getVizBox().boxContent;},wrapCustomSortAction:function I(AC,AE,AB){var AF=this,AD=this.getViz();return{silent:true,submitAction:AC,srcEle:this.getOrdinalInfo(AE),tgtEle:this.getOrdinalInfo(AB),srcRefOrdinal:this.getRefOrdinal(AE),perform:function(AL,AO,AM){var AI=this,AK=AI.srcEle,AH=AI.tgtEle,AJ=AI.submitAction.before,AP=function(){var AU=AF.getNodeForOrdinal(AK.ordinal),AT=AF.getViz(),AR=AT.getCellForNode(AU),AQ=AH&&AF.getNodeForOrdinal(AH.ordinal),AS=AQ&&AT.getCellForNode(AQ);if(AF.hasFailedSorts()||AR._e.id!==AK.id||AS&&AS._e.id!==AH.id){AF.addFailedSorts(AK.n,AH&&AH.n,AJ);}else{g.call(AF,S.call(AF),w(AU),H.call(AF,AQ,AJ),AM);if(!AL){Z.call(AF,{x:AT.scrollboxLeft||0,y:AF.getScrollYForGoldenSectionPoint(AU)});}}if(AO){AO();}};if(AL){AF.resetFailedSorts();AP();}else{var AG=AI.srcEle.ordinal,AN=q.call(AF,AI.tgtEle,AJ);if(AF.hasFailedSorts()){AF.addFailedSorts(AK.n,AH&&AH.n,AJ);if(AO){AO();}}else{AF.prepareDataAndPages([AG,AN],AP);}}},undo:function(){var AK=AF.getNodeForOrdinal(this.srcEle.ordinal),AI=w(AK),AH=AF.getNodeForOrdinal(this.srcRefOrdinal),AG=H.call(AF,AH,false),AJ=S.call(AF);g.call(AF,AJ,AI,AG);Z.call(AF,{x:AF.getViz().scrollboxLeft||0,y:AF.getScrollYForGoldenSectionPoint(AK)});}};},prepareDataAndPages:function M(AG,AI){var AE=0,AB=AG.length,AC=t.call(this),AF=this,AH=0;var AD=function(){self.setTimeout(function(){try{var AJ=AA.call(AF,AG[AE]);if(AJ.length>0){mstrApp.showWait();AC.preRenderPages();AC.renderPages(AJ);AC.postRenderPages();AC._postPagesClearup=true;}else{if(AC._postPagesClearup){AC.postRenderPagesCleanup();AC.configureActions();AC._postPagesClearup=false;}if(AC.isRenderingComplete()){AC.postRenderingCleanup();}AE++;}if(AJ.length>0||AE<AB){AH=AC.renderPause;AD();}else{AF.dpPreparingCleanUp();if(AI){AI();}}}catch(AK){AF.dpPreparingCleanUp();mstrApp.hideWait(true);throw AK;}},AH);};AC.renderingRows=true;AD();},dpPreparingCleanUp:function E(){t.call(this).renderingRows=false;},getRefOrdinal:function Y(AD){var AF=this.getViz(),AB=AF.zone.tableNode.getElementsByTagName("tr"),AC=AD.cellIndex,AG=AD.parentElement.rowIndex,AE=AB[AG-1].cells[AC];return AF.getCellForNode(AE).o;},getOrdinalInfo:function x(AC){var AB=this.getViz().getCellForNode(AC);if(AB&&AB._e){return{id:AB._e.id,n:AB._e.n,ordinal:AB.o};}},getNodeForOrdinal:function p(AB){var AE=S.call(this).rows;if(AB>=0){var AC=AB+1,AD;AD=b.filterOne(AE,function(AF){return parseInt(AF.firstElementChild.getAttribute("r"),10)===AC;});return AD.firstElementChild;}else{return AE[0].firstElementChild;}},getScrollYForGoldenSectionPoint:function T(AF){var AC=0.618,AH=this.getViz(),AB=AH.tableContainerNode.getBoundingClientRect(),AE=AB.top+AB.height*(1-AC),AD=AF.getBoundingClientRect(),AG=AD.top+AD.width/2;return(AH.scrollboxTop||0)+AG-AE;},wrapUnsilentAction:function V(AC,AB,AE,AD){var AF=this;return{silent:false,needDataReady:!!(AD&&AD.needDataReady),submitActions:b.ensureArray(AC),undoCallback:AB,perform:function(AH,AJ){var AG=[],AH=b.ensureArray(AH),AK=AF.getViz(),AL=AK.model.getDataService(),AI;if(AH.length>0){AG=AG.concat(AH);}AG=AG.concat(this.submitActions);AI=AK.controller._getXtabCallback(AK,Q.copy(AB));if(AJ){AI=n.wrapMethods(AI,AJ);}AE=Q.copy(AE||{});AE.hideCancel=true;AE.noUpdate=true;AE.preserveStid=true;AE.noDeltaXML=true;AL.submitUpdates(AL.getUpdateTemplateAction(AK.k,AG),AI,AE);}};},addAction:function u(AB){var AC=this.actions,AD=this.pos;AC.splice(AD+1);AC.push(AB);this.pos=AC.length-1;this.csDisplayPanel.updateStatus();},execute:function e(AC){this.addAction(AC);if(AC.silent){AC.perform(true);}else{var AB=this.getCustomSortActAhead();AC.perform(b.ensureArray(AB));}},undo:function U(){var AC=this.actions[this.pos];if(!AC){return ;}this.pos--;this.csDisplayPanel.updateStatus();if(AC.silent){AC.undo();}else{var AB=this.getActionParts4Undo();this.csDisplayPanel.recreateCSVizForUndo(AB.splitUTActions,AB.silentActions,AC.undoCallback);}},getActionParts4Undo:function l(){var AH=[],AJ=[AH],AG=[],AE=this.actions,AF=this.pos,AC,AI;while(AF>=0){AC=AE[AF];if(AC&&AC.silent){AG=[AC].concat(AG);}else{break;}AF--;}while(AF>=0){AC=AE[AF];if(AC){if(AC.silent){AI=this.getCustomSortActAhead(AF+1);AH.unshift(AI);AF=AF-(AI.actions.length-1);}else{AH.unshift.apply(AH,AC.submitActions);if(AC.needDataReady){AH=[];AJ.unshift(AH);}}}AF--;}var AD=this.historicalUnsilentActions,AB;AF=AD.length-1;while(AF>=0){AB=AD[AF];AH.unshift.apply(AH,AB.submitActions);if(AB.needDataReady){AH=[];AJ.unshift(AH);}AF--;}return{splitUTActions:AJ,silentActions:AG};},redo:function O(){var AC=this.actions[this.pos+1];if(!AC){return ;}this.pos++;this.csDisplayPanel.updateStatus();if(AC.silent){this.resetFailedSorts();var AB=this;AC.perform(false,function(){mstrApp.hideWait(true);if(AB.hasFailedSorts()){AB.actions.splice(AB.pos);AB.pos--;AB.csDisplayPanel.updateStatus();AB.showFailedSortsAndReset();}});}else{AC.perform(this.getCustomSortActAhead());}},getContSlientActionsBehind:function W(){var AB=this.actions.length,AC,AD=[],AE;for(AC=this.pos+1;AC<AB;AC++){AE=this.actions[AC];if(AE&&AE.silent){AD.push(AE);}else{break;}}return AD;},getContSlientActionsBefore:function d(){var AE=this.actions,AB,AC=[],AD;for(AB=this.pos;AB>=0;AB--){AD=AE[AB];if(AD&&AD.silent){AC=[AD].concat(AC);}else{break;}}return AC;},getSlientActionsBefore:function A(){var AB=this.actions.slice(0,this.pos+1);return b.filter(AB,function(AC){return AC&&AC.silent;});},getUnslientActionsBefore:function k(){var AB=this.actions.slice(0,this.pos+1);return b.filter(AB,function(AC){return AC&&!AC.silent;});},getCustomSortActAhead:function j(AF){var AB=[],AC=(AF===undefined?this.pos:AF)-1,AE=this.actions;while(AC>=0){var AD=AE[AC];if(AD.silent){AB=[AD.submitAction].concat(AB);}else{break;}AC--;}if(AB.length>0){return this.csDisplayPanel.wrapCustomSortAction(AB,true);}},isCurrentActionSilent:function N(){return this.actions[this.pos]&&this.actions[this.pos].silent;},reset:function h(){this.actions=[];this.pos=-1;this.csDisplayPanel.updateStatus();},getActionsCount:function r(){return(this.actions||[]).length;},getFailedSortsCount:function f(){return(this.failedSorts||[]).length;},resetFailedSorts:function m(){this.failedSorts=[];},hasFailedSorts:function J(){return(this.failedSorts||[]).length>0;},addFailedSorts:function D(AC,AD,AB){this.failedSorts=this.failedSorts||[];this.failedSorts.push({srcName:AC,tgtName:AD,isPost:AB});},showFailedSortsAndReset:function v(){if(this.hasFailedSorts()){var AC=this.failedSorts.length,AE,AH,AB,AF,AG=L(15934,"Below sorting manipulations fail due to change in source data:")+" ";for(var AD=0;AD<AC;AD++){AE=this.failedSorts[AD];AH=AE.srcName;AB=AE.tgtName;AF=AE.isPost;if(AB){AG+=AF?L(15935,'move "#" before "##"').replace("#",AH).replace("##",AB):L(15936,'move "#" after "##"').replace("#",AH).replace("##",AB);}else{AG+=AF?L(15937,'move "#" to the end').replace("#",AH):L(15938,'move "#" to the top').replace("#",AH);}if(AD===AC-1){AG+=L(1006,".")+" ";}else{AG+=L(15939,",")+" ";}}AG+=L(15940,"Please manually do these sortings if necessary.");mstrmojo.err({message:AG});this.resetFailedSorts();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.color","mstrmojo.css","mstrmojo.hash");var A=mstrmojo.color,C=mstrmojo.css,H=mstrmojo.hash;function B(I){I=G(I);if(isNaN(I)){I=0;}I%=16777216;return{b:I%(1<<8),g:(I%(1<<16))>>8,r:(I%(1<<24))>>16};}function F(M,N,L){M=G(M);L=H.copy(L,{retainGradientObject:false});if(D(M)){var K=F(M.c1,N),I=F(M.c2,N);if(L.retainGradientObject){return{c1:K,c2:I,or:M.or};}return C.buildGradient(M.or,K,I).v;}if(typeof N==="number"){var J=B(M);if(isNaN(M)){N=0;}return"rgba("+J.r+" ,"+J.g+" ,"+J.b+" ,"+N+" )";}else{if(isNaN(M)){M=0;}return"#"+(16777216+M%16777216).toString(16).substring(1,7);}}function G(K){var J=K.c1,I=K.c2;if(D(K)){return{c1:G(J),c2:G(I),or:K.or};}if(typeof K==="number"){return K;}if(typeof K!=="string"){return NaN;}if(K[0]!=="#"){return parseInt(K,10);}if(K.length===4){K=K[0]+K[1]+K[1]+K[2]+K[2]+K[3]+K[3];}return parseInt(K.substring(1,7),16);}function E(K,I){var N=K.value,P=K.opacity;if(D(N)){return["c1","c2"].reduce(function(U,V,T){var W=E({value:N[V],opacity:P},I);U.value[V]=W.value;if(T===0){U.opacity=W.opacity;}return U;},{value:{or:N.or}});}if(N==="transparent"){K.value=I.value;}var M=A.hex2rgb(F(K.value)),L=A.hex2rgb(F(I.value)),S=K.opacity,R=I.opacity,Q=1-S,O,J;J=S+R*Q;O=M.map(function(T,U){return(T*S+L[U]*R*Q)/J;});return{value:"#"+A.rgb2hex.apply(undefined,O),opacity:J};}function D(I){return I&&["c1","c2","or"].every(function(J){return I.hasOwnProperty(J);});}mstrmojo.util.color=mstrmojo.provide("mstrmojo.util.color",{getCSSColorString:F,getColorValue:G,mix:E,isGradientColor:D,getRGB:B,createCanvasFillPattern:function(K,Q,J,P,I,O){var L=K.value,N=K.opacity,M;if(D(L)){M=Q.createLinearGradient(J,P,I,O);M.addColorStop(0,F(L.c1,N));M.addColorStop(1,F(L.c2,N));}else{M=F(L,N);}return M;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom");var D=mstrmojo.dom,H=D.position,I=Math;function F(U,P,N){var O=this._ellTestNodes||{},K=O[U],M=mstrmojo.css.getComputedStyle(P),J=["width","height"];if(N){J.reverse();}var S=J[0],Q=J[1];if(!K||!D.contains(this.domNode,K.n,true,document.body)){var L=P.cloneNode(true);L.removeAttribute("id");L.removeAttribute("onclick");var T=L.style;T.position="absolute";T.top="-10000px";T.maxHeight=T.maxWidth="none";T[S]="auto";P.parentNode.appendChild(L);var R=parseInt(M["max-"+S],10);if(isNaN(R)){R=parseInt(M[S],10);}K=O[U]={n:L,m:R,d:S.substr(0,1)};if(K.m>0){this._ellTestNodes=O;}}else{K.n.innerHTML=P.innerHTML;}K.n.style[Q]=M[Q];return K;}function B(K,L){var M=this.ellipsisText;switch(this.ellipsisPosition){case"middle":var J=I.floor(L/2);return K.slice(0,J).join("")+M+K.slice(-J).join("");case"end":return K.slice(0,L).join("")+M;default:return K.join("");}}var G=4;mstrmojo._SupportsEllipsisText=mstrmojo.provide("mstrmojo._SupportsEllipsisText",{_mixinName:"mstrmojo._SupportsEllipsisText",ellipsisText:"\u2026",ellipsisPosition:"end",ellipsize:function A(U,P,O){var V=P.innerHTML;if(!V){return false;}var K=F.call(this,U,P,O),M=function(){var W=H(K.n)[K.d];return(W<=K.m);};if(M()){return false;}var L=K.n,J=V.split(""),R=0,N=J.length,Q,S;while(R<N){var T=I.floor((R+N)/2);V=L.innerHTML=B.call(this,J,T);if(M()){R=T+1;}else{N=T-1;}if(N-R<G){for(S=R-1;S<N+1;S++){V=L.innerHTML=B.call(this,J,S);if(!M()){break;}Q=V;}}if(Q){P.innerHTML=Q;break;}}return true;},ellipsizeElements:function C(T,O,N){var L=F.apply(this,arguments),M=function(){var U=H(L.n)[L.d];return(U<=L.m);};if(M()){return false;}var Q=this.ellipsisText;var P=this;var K=document.createElement("span");K.innerHTML=Q;var J=function(Y,X){var U=Y.slice(0,X).concat([K]);var W=document.createElement("div");for(var V=0;V<U.length;V++){W.appendChild(U[V]);}return W.innerHTML;};var S=function(V,Z,Y,U){var b=0,W=Z.length,a,e,c;var X=function(f){while(f.hasChildNodes()){f.removeChild(f.lastChild);}};while(b<W){var d=I.floor((b+W)/2);if(U){e=Y.call(P,Z,d);V.nodeValue=e;}else{X(V);e=Y.call(P,Z,d);V.innerHTML=e;}if(M()){b=d+1;}else{W=d-1;}if(W-b<G){c=b==0?0:b-1;for(;c<W+1;c++){if(U){e=Y.call(P,Z,c);V.nodeValue=e;}else{X(V);e=Y.call(P,Z,c+1);V.innerHTML=e;}if(!M()){if(!U){V.removeChild(V.lastChild);a=e=V.innerHTML;}break;}if(!U){V.removeChild(V.lastChild);e=V.innerHTML;}a=e;}}if(a){if(U){V.nodeValue=a;}else{V.innerHTML=a;}break;}}};var R=function(X){if(X.nodeType==3){var Y=X.nodeValue;if(!Y){return false;}S(X,Y.split(""),B,true);return true;}else{var V=X.childNodes;if(!V||V.length===0){return false;}var W=[];for(var U=0;U<V.length;U++){W[U]=V[U];}if(W.length!=1||W[0].nodeType!=3){S(X,W,J,false);}return R(X.lastChild);}};O.style.visibility="visible";L.n.style.visibility="hidden";R(L.n);O.style.visibility="hidden";L.n.style.visibility="visible";return true;},unrender:function E(J){delete this._ellTestNodes;this._super(J);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","hash","css","array","desc");var R=mstrmojo.hash,l=mstrmojo.func,B=mstrmojo.css,e=mstrmojo.array;var E={lv:-1,hcd:false,epd:false,hid:false,dhid:false,children:[],displayChildren:[],parent:null,displayParent:null},j={rootItems:{},items:[],itemMap:{}};var k="hidden",C="expanded",p="collapsed",J="hierarchy",b="hasChildren",o="u;",W=10,M=7,n=32;mstrmojo.ui._IsHierarchyList=mstrmojo.provide("mstrmojo.ui._IsHierarchyList",{_mixinName:"mstrmojo.ui._IsHierarchyList",itemValueField:"v",init:function m(q){this._super(q);this.clearItems();},getItemProps:function f(t,q){var r=this._super(t,q),u=0;if(t.hcd){r.addCls(b);}if(t.v===o){r.addCls(k);}if(this.isHiearachyDisplay()){r.addCls(J);if(t.hid){r.addCls(k);}u=t.lv>=0?t.lv*W:0;}r.indent=u;return r;},_getItemNode:function S(q){var r=this.itemsContainerNode;return e.filterOne(r&&r.childNodes,function(t){return parseInt(t.getAttribute("idx"),10)===q;});},_buildItemsMarkup:function h(x,r,t,u,v,w){var q;if(this.isHiearachyDisplay()){q=this._buildDescendantsMarkup();}else{q=this._super(x,r,t,u,v,w);}return q;},_buildDescendantsMarkup:function Z(x,v){var AB=[],w=this.itemRenderer&&this.itemRenderer.render,z=x?(v?[x]:x.displayChildren):(this.raad?this.getDisplayRoots():this.getRootItems()),r=this.blockCount,u=function(AC){if(!AC.hid&&!AC.dhid){AB.push(w(AC,AC.idx,this));}if(AC.epd||AC.hid){e.forEach(AC.displayChildren,function(AE,AD){return AA.call(this,AE,AD);},this);}},AA=function(AD,AC){if(this.raad&&AC>=r){var AE=this.createRenderer(AD.lv,AD.displayParent,AD.parent,this.items.length,AC);this.items.push(AE);if(AE.displayParent){AE.displayParent.displayChildren.push(AE);}if(AE.parent){AE.parent.children.push(AE);}u.call(this,AE);return false;}else{u.call(this,AD);}};if(w&&typeof w==="function"){if(this.raad&&!x){if(z.length>r){var q=z.slice(0,r),t=this.createRenderer(z[r-1].lv,null,null,this.items.length,r);this.items.push(t);z.push(t);q.push(t);AB=this._buildSiblingsMarkup(q);}else{AB=this._buildSiblingsMarkup(z);}}else{e.forEach(z,function(AD,AC){return AA.call(this,AD,AC);},this);}}return AB;},getItems:function T(){return this.items;},getItemByValue:function D(q){return this.itemMap[q];},isRootItem:function(q){return q.lv>=0&&q.v!==o&&!q.pid&&!q.parent;},getRootItems:function c(){return R.valarray(this.rootItems);},getDisplayRoots:function X(){if(!this.displayRoots){var t=this.displayRoots=[],q=this.getRootItems(),r=function(u){e.forEach(u,function(v){if(!v.hid){t.push(v);}if(v.epd||v.hid){r(v.displayChildren);}});};r(q);}if(!this.initialDisplayRoots){this.initialDisplayRoots=t.slice();}return this.displayRoots;},getInitialDisplayRoots:function A(){if(!this.initialDisplayRoots){this.initialDisplayRoots=(this.getDisplayRoots()||[]).slice();}return this.initialDisplayRoots;},createRenderer:function I(v,r,u,q,t){return{n:mstrmojo.desc(1005,"More..."),lv:v,displayParent:r,parent:u,idx:q,fetcher:true,fake:true,config:{nextSiblingIdx:t}};},getItemAncestorMap:function F(r){var q=this.itemValueField,t={};while(r&&r[q]){t[r[q]]=true;r=r.parent;}return t;},getItemDescendantMap:function Y(t){var q=this.itemValueField,u={},r=function(v){u[v[q]]=true;e.forEach(v.children,function(w){r(w);});};r(t);return u;},clearItems:function g(){var q=this.itemsContainerNode;R.copy(R.clone(j),this);if(q){q.innerText="";this.updateScrollbars();}},addItems:function d(w,t){var r=this.items,v=this.itemMap,q=this.rootItems,u=this.itemValueField,z=[];e.forEach(w,function(AA){var AD=AA[u],AB=this.getItemByValue(AD),AC=R.copy(AA,(AB?AB:R.clone(E)));if(!AB){AC.idx=r.length;r.push(AC);if(AD){v[AD]=AC;}}if(this.isRootItem(AC)){q[AD]=AC;}z.push(AC);},this);e.forEach(z,function(AC){var AA=this.getItemByValue(AC.pid),AB=this.getItemByValue(AC.dpid)||AA;if(AA){if(!AC.parent){AC.parent=AA;AA.children.push(AC);}if(!AC.hid&&!AC.dhid&&!AC.displayParent){AB.hcd=true;AC.displayParent=AB;AB.displayChildren.push(AC);}}delete AC.pid;delete AC.dpid;},this);if(!t){if(this.postAddItems){this.postAddItems(z);}var x=this.itemsContainerNode;if(x){if(this.isHiearachyDisplay()){this.refresh();}else{x.innerHTML+=this._buildSiblingsMarkup(this.getFlatDisplayItems(z)).join("");this.updateScrollbars();}}}return z;},addSiblingItems:function G(z,v){var u=this.getItemByValue(v),r;if(u){e.forEach(z,function(AB){if(AB.v!==v){AB.pid=AB.pid||v;}});}r=this.addItems(z,true);if(this.postAddSiblingItems){this.postAddSiblingItems(r,u);}var w=this.itemsContainerNode;if(w&&this.isHiearachyDisplay()){var x=this._buildSiblingsMarkup(r).join("");if(!v){w.innerHTML+=x;}else{if(u){var AA={},t=this._getItemNode(u.idx),q;if(t){AA[u.v]=true;while(t.nextSibling){q=this.getItemFromTarget(t.nextSibling);if(q&&q.displayParent&&AA[q.displayParent.v]){AA[q.v]=true;t=t.nextSibling;}else{break;}}t.outerHTML+=x;}}}this.updateScrollbars();}return r;},addBranchItems:function L(r,v){var q=this.getItemByValue(v),u;if(q){e.forEach(r,function(x){x.pid=x.pid||v;});}u=this.addItems(r,true);if(this.postAddBranchItems){this.postAddBranchItems(u,q);}var t=this.itemsContainerNode;if(t&&this.isHiearachyDisplay()){if(!v){e.forEach(u,function(x){if(this.isRootItem(x)){t.innerHTML+=this._buildDescendantsMarkup(x,true).join("");}},this);}else{if(q){var w=this._getItemNode(q.idx);if(w){w.outerHTML+=this._buildDescendantsMarkup(q).join("");}}}this.updateScrollbars();}return u;},updateItems:function H(q,r){if(r){e.forEach(q,function(x,u,v){var w=r[u],t=v[w.p_index];if(t){x.pid=t.v;}});}this.handleOriginalParent(q,r);this.setDisplayParent(q,r);this.clearItems();this.addItems(q,true);},handleOriginalParent:function P(q,r){if(r){e.forEach(q,function(z,u,v){var x=r[u],t=v[x.p_index],w=v[x.original_p_index];if(t&&t.t===M&&z.lv!==t.lv&&w&&w.pid===t.v){z.pid=w.v;}});}},setDisplayParent:function K(q,v,u){if(u){this.idMap=this.idMap||{};e.forEach(q,function(x){this.idMap[x.v]=x;},this);}var t=this,r=function(AA,z){var x;if(!u&&v){var AB=v[z].p_index;x=q[AB];}else{if(u){x=t.idMap[AA.pid];}}return x;};e.forEach(q,function w(AB,z,AA){var x=r(AB,z);if(!x||t.isRootItem(AB)){return AB.v;}if(!AB.dpid){AB.dpid=x.hid?w(x,v&&v[z]&&v[z].p_index,AA):x.v;}return AB.dpid;});},fetchItems:function U(u,x){if(this.raad&&this.isHiearachyDisplay()&&(this.items||[]).length>0){return ;}u=u||{};var r=this,q=u.branch,w=u.browseFlags&n,v=parseInt(u.level,10),t=v>=0;this.fetchItemsThroughTaskCall(u,l.wrapMethods(x,{success:function(z){if(r.raad===undefined&&z&&r.isHiearachyDisplay()){r.raad=z.raad;}if(z&&z.es){var AA=z.es;if(v===(q&&q.lv+1||0)||(w&&!r.raad)){r.addSiblingItems(AA,q&&q.v);}else{if(q&&!t){r.addBranchItems(AA,q.v);}else{r.addItems(AA);}}}}}));},updateItemNodesStatus:function V(){var q=this.itemsContainerNode&&this.itemsContainerNode.childNodes;e.forEach(q,function(t){var r=this.getItemFromTarget(t);if(r){B.toggleClass(t,CSS_SELECTED,r.isSelected);}},this);},_buildSiblingsMarkup:function O(t){var q=[],r=this.itemRenderer&&this.itemRenderer.render;if(r&&typeof r==="function"){e.forEach(t,function(u){q.push(r(u,u.idx,this));},this);}return q;},toggleCollapseExpandCss:function Q(r,q){B.toggleClass(r,p,!q);B.toggleClass(r,C,q);},doExpandCollapse:function a(q,AA){var AB=!AA.epd;AA.epd=AB;this.toggleCollapseExpandCss(q,AB);if(!this.isHiearachyDisplay()){return ;}var x=this.getItemDescendantMap(AA),t,z;if(AB){var r=AA.displayChildren&&AA.displayChildren[0];if(r){var v=this.getItemFromTarget(q.nextSibling);if(v&&v.displayParent===AA){var w={},u;t=q.nextSibling;while(t){z=this.getItemFromTarget(t);u=z&&z.displayParent;if(!u||!x[z.v]){break;}if(w[u.v]){B.addClass(t,k);w[z.v]=true;}else{B.removeClass(t,k);if(!z.epd){w[z.v]=true;}}t=t.nextSibling;}}else{q.outerHTML+=this._buildDescendantsMarkup(AA).join("");}}else{this.fetchItems({branch:AA,level:AA.lv+1});}}else{t=q.nextSibling;while(t){z=this.getItemFromTarget(t);if(!z||!x[z.v]){break;}B.addClass(t,k);t=t.nextSibling;}}this.updateScrollbars();},isHiearachyDisplay:function N(){return true;},fetchItemsThroughTaskCall:mstrmojo.emptyFn,getFlatDisplayItems:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var E=mstrmojo.dom,Q=mstrmojo.css,B=mstrmojo.string,I="selected",L="hidden";function P(V,W,X,U,Z){var Y=Z.listHooks[V];if(Y&&Y.call(Z,W,X,U)){return ;}Q.toggleClass(W,I,V==="select");}function G(X,W,V){var Y=this[X],U=Y?Y.split(W):[];this[X]=mstrmojo.array.distinct(U.concat(V.split(W))).join(W);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function N(U){this._super(U);this._shiftStartIndex=-1;},getItemMarkup:function D(V,U){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function M(U){return U.n||"";},getItemProps:function R(Y,U){var V=!!this.selectedIndices[U],Z={tag:"div",sel:V,cls:"",n:this.getItemDisplayName(Y),style:"",idx:U,addCls:function W(b){G.call(this,"cls"," ",b);},addStyle:function X(b){G.call(this,"style",";",b);},title:Y.title||""};if(Z.n&&B.isEmpty(Z.n)){Z.n=B.decodeHtmlString("<br/>");}if(V){Z.addCls(I);}var a=Y.cls;if(a){Z.addCls(a);}if(Y.hid){Z.addCls(L);}return Z;},itemRenderer:{render:function S(V,U,W){V._renderIdx=U;return mstrmojo.string.apply(W.getItemMarkup(V,U),W.getItemProps(V,U));},select:function K(V,W,U,X){P("select",V,W,U,X);},unselect:function H(V,W,U,X){P("unselect",V,W,U,X);}},onclick:function T(U){try{var W=this.getItemFromTarget(U.getTarget());if(W){U.cancel();this.doItemSelect(W,U||{});}}catch(V){mstrApp.onerror(V);}},doItemSelect:function C(k,j){var b=j.hWin,c=j.e,g=k._renderIdx,d=k._positionIdx,V=E.isMetaKey(b,c),a=E.shiftKey(b,c),W=this.multiSelect,Z=this.useListModKeys,h=this._shiftStartIndex,X=this.selectedIndices;if(W&&Z&&a&&h>-1){var U=[],Y=[];this.processContinuousSelection(U,Y,g);this.addSelect(U);this.removeSelect(Y);}else{if(W&&(!Z||V)){var f=(X[g])?"remove":"add";this[f+"Select"](g,false,d);}else{this.singleSelect(g,false,d);}this._shiftStartIndex=g;}},processContinuousSelection:function J(W,V,U){var b=this._shiftStartIndex,a=this.selectedIndices,Z=Math.min(b,U),Y=Math.max(b,U),X;for(X=0;X<this.items.length;X++){if(Z<=X&&X<=Y){if(!a[X]){W.push(X);}}else{if(a[X]){V.push(X);}}}},onclearSelection:function A(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function F(V){var U=E.findAncestorByAttr(V,"idx",true,this.domNode);return(U&&U.node)||null;},getItemFromTarget:function O(W){var V=this.getItemNodeFromTarget(W),U=V&&parseInt(V.getAttribute("idx"),10);if(U!==null&&!isNaN(U)&&this.items){return this.items[U];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=I;mstrmojo._IsList.HIDDEN_CLS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var J={T:["top","left"],D:["height","width"],B:["border","border-color","border-style","border-width"],F:["font","color","text-decoration"],P:["padding"],BG:["background-color","fx"],RW:[]};J.RW=["z-index"].concat(J.T.concat(J.D));var D=mstrmojo.dom,O=mstrmojo.css;function N(T,V,S){var U=T[V]||[];U.push(S);T[V]=U;}function L(W,V){var U=((W&&W.fmts)||null);if(V){var Y=W.thresholds,T=Y&&Y[V];if(T){var X={},Z;for(Z in U){X[Z]=T[Z]||U[Z];}for(Z in T){var S=T[Z];X[Z]=(typeof S==="string")?(S+" !important"):S;}U=X;}}return U;}mstrmojo._Formattable=mstrmojo.provide("mstrmojo._Formattable",{_mixinName:"mstrmojo._Formattable",formatHandlers:null,thresholdId:null,getCacheKey:function E(){return"css_cache"+(this.thresholdId||"");},update:function G(T){var S=true;this.invisible=!!(T&&T.data&&T.data.invisible);if(this._super){S=this._super(T);}return S;},buildCSSFormatString:function H(U,d){var h=this.formatHandlers[U],k=h.src?d[h.src]:d;if(!k){return null;}var b=h.props||h;if(!b){return null;}var X=[],g=-1;var V=b.length-1;for(V;V>=0;V--){var j=b[V];var c=J[j]||[j];var a=c.length-1;for(a;a>=0;a--){j=c[a];var T=k[j];if(T!==undefined){if(j==="fx"){var Y=T,S={};var e=Y.gd;if(e){this.formatGradient(e,S);}var W=parseInt(Y.rt,10);if(W){if(W===1||W===3){this.formatTextRotation(Y.rt,S);}}if(Y.ds){this.formatDropShadow(Y,S);}var Z;for(Z in S){X[++g]=Z+":"+S[Z].join(" ");}}else{X[++g]=j+":"+T;}}}}if(this.invisible){X.push("visibility:hidden");}return X.join(";")+";";},applyCSSFormatToNode:function I(U,S){var V=this[U],T=V&&V.style;if(T){this.buildCSSFormatString(U,S).split(";").forEach(function(W){var X=W.split(":");T[O.convertCssToCamelCase(X[0])]=X[1];});}},clearSlotBackgroundCSS:function F(T){var U=this[T],S=U&&U.style;if(S){S.background="transparent none 0 0 no-repeat";S.filter="none";}},preBuildRendering:function B(){this._super();var V=this.formatHandlers,S=this.getFormats();if(V&&S){var W=this.defn=this.defn||{},X=this.getCacheKey(),U=W[X];if(!U){U=W[X]={};for(var T in V){var Z=T+"CssText";this[Z]=U[Z]=this.buildCSSFormatString(T,S)||"";}}else{var Y;for(Y in U){this[Y]=U[Y];}}}return true;},formatGradient:function P(S,U){var T=O.buildGradient(S.t,S.sc,S.ec);if(T){N(U,T.n,T.v);}},formatDropShadow:function K(W,U){if(D.supports(D.cssFeatures.DROP_SHADOW)){var V=W.ds;if(D.isDXIE){N(U,"filter","progid:DXImageTransform.Microsoft.DropShadow(Color='#66000000',Positive='true',OffX="+V+",OffY="+V+")");}else{var S=[V,V],T=parseInt(W.rt,10);if(T===1||T===3){S[((T===1)?1:0)]=-V;}N(U,(D.isWK?"-webkit-":"")+"box-shadow",S.join("px ")+"px 3px 0px #888");}}},formatTextRotation:function C(T,S){if(D.supports(D.cssFeatures.TEXT_ROTATION)){if(D.isDXIE){N(S,"filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+T+")");}else{var U=(T===1)?90:-90;N(S,D.CSS3_PREFIX+"transform-origin","top left");N(S,D.CSS3_PREFIX+"transform","rotate("+U+"deg)");}}},getFormats:function R(){if(!this.fmts){this.fmts=L.call(this,this.defn,this.thresholdId);}return this.fmts;},clearFormats:function A(){this.fmts=undefined;},createEmptyFormats:function(){return(this.fmts=this.fmts||{});},clearCache:function Q(){delete this.defn[this.getCacheKey()];},unrender:function M(S){if(this.thresholdId){this.fmts=null;}this._super(S);}});mstrmojo._Formattable.getBorderWidths=function(W){var V=W.getFormats(),S=(V.border)?V.border.match(/(\d*|\d*\.\d*)pt/)[0]:V["border-width"],U=W.model,T=U.docModel;return O.getBorderWidths(S,(T&&T.dpi)||U.dpi);};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var W=mstrmojo.dom,U=mstrmojo.hash,X=mstrmojo.array,K=function K(x,v){var w=this.getCellForNode(x),u=this.getCellForNode(v);return !w||!u||w.hasOwnProperty("mix")===u.hasOwnProperty("mix");},H=function H(z){var x=[],v=this.clonedRowHeader&&this.clonedRowHeader.getTableNode()&&this.clonedRowHeader.getTableNode().tBodies,w=[],u;w.push(this.zone.tableNode.tBodies);if(v){w.push(v);}X.forEach(w,function(AA){X.forEach(AA,function(AB){for(u=0;u<AB.childNodes.length;u++){x.push(AB.childNodes[u]);}if(z&&AB.childNodes.length<this.zone.rowsPerPage){x.push.apply(x,new Array(this.zone.rowsPerPage-AB.childNodes.length));}},this);},this);return x;},C=function C(v,z){var w=H.call(this,true)[z],u;for(u=0;u<w.childNodes.length;u++){if(m.call(this,w.childNodes[u])>v){return null;}if(m.call(this,w.childNodes[u])===v){return w.childNodes[u];}}},m=function m(u){var v=this.getCellForNode(u);return v&&v.colIx||0;},A={REPLACE_ALL:1,REMOVE:2,APPEND:3,TOGGLE:4},j={CONTROL:"Ctrl",SHIFT:"Shft",SINGLE:"Single"},c=function c(){return this.rhsCP.startIndexInContainer;},M=function M(v,w){var u=this.rhsCP.getUnmergedCells(v)||[];if(u.length>w){return u[w];}else{return this.rhsCP.getCell(v,w-u.length);}},Q=function Q(AF,AB,u){var AA=AF.o,v=AA,x=AF._gd,AE=AF._e&&AF._e.id,AD,AC=this.zone.searchRow(AA+AB),z,w=AF.colIx;if(AC!==null){z=u===1?AC.max-AB:AC.min;while(Math.abs(AA-z)>0){AD=M.call(this,AA+u,w);if(!AD||AE!==(AD._e&&AD._e.id)||(v!==AD.o&&x===AD._gd)){break;}AA+=u;}return AA+AB;}else{return null;}},a=function(u){var x=this.model.getCellDataUnion(u),v={},w;X.forEach(x,function(z){w=z.v;if(v[z.tid]&&v[z.tid][0]&&v[z.tid][0].n){w=v[z.tid][0].n+":"+z.v;}v[z.tid]=[{id:z.eid,n:w}];});return v;},g=function g(AK){if(!AK){return null;}if(!this.selectSiblings(AK)){return[AK];}var AG=[],AA=this.getCellForNode(AK),AJ=this.gridData,AI=AJ.gsi,AF,x,AE,AL,u,v,AB,z,AH,AC,AD=function(AN,AM){var AO=true;if(AN.length===AM.length){X.forEach((AN||[]),function(AP){AO=AO&&X.find(AM,"id",AP.id)!==-1;return AO;});return AO;}return false;},w=this.model.getCellInfo(AA);if(w.isMetric){if(AI.tma===2){AF=AK.parentNode.childNodes;for(x=0;x<AF.length;x++){z=true;AE=this.getCellForNode(AF[x]);if(AE&&AE.hasOwnProperty("mix")){AH=a.call(this,AE);AC=a.call(this,AA);v=U.keyarray(AH);AB=U.keyarray(AC);if(!!v.length&&v.length===AB.length){X.forEach((v||[]),function(AM){z=z&&AD(AH[AM],AC[AM]);return z;},this);}else{z=false;}if(z){AG.push(AF[x]);}}}}else{AG.push(AK);}}else{if(this.isSelectAllCell(AK)){AG.push(AK);}else{if(AA&&AA._e&&AA.axis===1){AL=H.call(this,false);X.forEach((AL||[]),function(AM){for(x=0;x<=AM.childNodes.length;x++){u=AM.childNodes[x];AE=this.getCellForNode(u);if(AE&&AE._e){if(this.model.compareElementsId(AA._e.id,AE._e.id)){AG.push(u);}}}},this);}else{if(AA&&AA._e&&AA.axis===2){AF=AK.parentNode.childNodes;for(x=0;x<AF.length;x++){z=true;AE=this.getCellForNode(AF[x]);if(AE&&AE._e){if(AA._e.id===AE._e.id){AG.push(AF[x]);}}}}}}}return AG;},d=function d(){this.selCells=[];this.clearSelections();},S=function S(w){var v=this,u=v.getCellForNode(w);this.selCells=X.filter(this.selCells,function(z){var x=v.getCellForNode(z);return x&&u&&(x.tui||x.ui)!==(u.tui||u.ui);});this.clearUnitSelections(this.model.data.gts[u.axis===1?"row":"col"][u.tui||u.ui].id);},q=function q(w){var v=this.isSelectAllCell(w),x=this.getCellForNode(w),z=this.model.getCellInfo(x),u=this.model.getCellTitleInfo(x);if(!x){return ;}if(!v){if(X.indexOf(this.selCells,w)===-1){this.selCells.push(w);}}else{if(!x.hasOwnProperty("mix")){var AA=z.isMetric?"Metrics":(u.title&&u.title.id),AC=this.model.scm,AB=AA&&AC&&AC[AA];if(AB&&(AB.all||AB.showall)){this.addAttributeSelection(u.title.id,"OA:(All)","all");}}return ;}if(x.hasOwnProperty("mix")){this.addMetricValueSelection(a.call(this,x));}else{this.addAttributeSelection(u.title.id,x._e.id,x._e.n);}},I=function I(u){var w=this.selCells.indexOf(u),v=this.getCellForNode(u);this.selCells.splice(w,1);if(v.hasOwnProperty("mix")){this.removeMetricValueSelection(a.call(this,v));}else{this.removeAttributeSelection(this.model.getCellTitleInfo(v).title.id,v._e.id);}},V=function V(){this.clearContextMenuHighlights();this.cmSelCells=[];this.clearCxtMnuSelection();},p=function p(v,x){var w=this.getCellForNode(v),u=this.model.getCellTitleInfo(w);if(X.indexOf(this.cmSelCells,v)===-1){this.cmSelCells.push(v);if(w.hasOwnProperty("mix")){this.addContextMenuMetricValueSelection(a.call(this,w));}else{this.addContextMenuAttributeSelection(u.title.id,w._e.id,x.n,undefined,undefined,undefined,x.fm);}}},F=function(AF){var AD=this,z={n:"",fm:""},AC,v=[],w,u,AE,AB,x=[],AA=0;if(AF.length){X.forEach(AF,function(AG){AC=AD.getCellForNode(AG);u=AC._e;w=u&&u.n;if(w){v.push(w);}});if(u){AE=u.id.split(";");AB=AE[1];x=X.map(AD.model.getAttributeFormsInTemplate(AB),function(AG){return AG.bfid;});z.fm=x.join(";");AA=x.length;}if(v.length){z.n=v.slice(0,AA).join(" ");}}return z;},b=function b(){var x=this,v,u,w;V.call(this);this.cmSelCells=this.selCells.slice(0);X.forEach(this.cmSelCells,function(z){w=F.call(x,g.call(x,z));v=x.getCellForNode(z);u=x.model.getCellTitleInfo(v);if(v.hasOwnProperty("mix")){x.addContextMenuMetricValueSelection(a.call(x,v));}else{x.addContextMenuAttributeSelection(u.title.id,v._e.id,w.n,undefined,undefined,undefined,w.fm);}});},B=function B(v){var u=this.getCellForNode(v);if(u){return X.some(this.model.getCellDataUnion(u),function(w){return w.isSubtotal;});}return false;},T=function T(w,z,v){var x,u,AA=this;if(U.isEmpty(w)&&(!v&&this.clearAllSelections&&this.clearAllSelections())){d.call(this);}w=X.filter((w||[]),function(AB){return !B.call(AA,AB);});X.forEach(w,function(AB){u=z;x=~X.indexOf(this.selCells,AB);if(A.TOGGLE===u){u=x?A.REMOVE:A.APPEND;}if(A.REPLACE_ALL===u){if(v){S.call(this,AB);}else{d.call(this);}z=u=A.APPEND;}switch(u){case A.APPEND:q.call(this,AB);break;case A.REMOVE:I.call(this,AB);break;}},this);},Z=function Z(u){var w=this,v;u=X.filter((u||[]),function(x){return !B.call(w,x);});V.call(this);v=F.call(this,u);X.forEach(u,function(x){p.call(this,x,v);},this);},J=function J(AB,AC,v,z){var w=Math.min(AC,z),AA=Math.min(AB,v),AH=Math.max(AC,z),u=Math.max(AB,v),AE,AD,AG=[],AF=function(x,AI){X.forEach((AI||[]),function(AJ){if(X.indexOf(x,AJ)===-1){x.push(AJ);}});};for(AE=AA;AE<=u;AE++){for(AD=w;AD<=AH;AD++){AF(AG,g.call(this,C.call(this,AE,AD)));}}T.call(this,AG,A.APPEND);},Y=function Y(u,AB){var AC,z=this.selectorControl&&this.selectorControl.showall,AD=!!this.defn.msuc,v=this.isSelectAllCell(AB),AE=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),w=!this.selectorControl&&(AE&&AE.length>0),AF,x,AH,AA,AG=this.parent&&this.parent.defn&&this.parent.defn.t===527;if(AG){AD=!!this.parent.defn.msuc;}if(w){if(!AD){u=j.SINGLE;}AH=this.getCellForNode(AB);x=AH&&AH.id;AA=X.find(AE,"did",x);if(AA>=0){AF=AE[AA].sc;z=AF.showall||AF.all;}}if(AB.attributes.getNamedItem("ei")!==null&&(w||(!B.call(this,AB)&&(z||!v)))){AC=this.getSelectionHash();if(U.isEmpty(AC)){this.selCells=[];}if(AB.className.indexOf(this.CELL_HIGHLIGHT)!==-1&&this.selCells.length>0){if(z===false&&(u===j.SINGLE||u===j.CONTROL)&&k.call(this,AB)){return ;}if(u===j.SINGLE&&k.call(this,AB)){u=j.CONTROL;this.xTabHiddenTextArea.blur();}}this.clearHighlights();this["on"+u+"Select"](AB,w);this.lastSelectedCell=AB;if(u!==j.SHIFT){this.shiftInfo={lastCell:AB,selCells:[].concat(this.selCells)};}this.markSelections();this.endSelections();}else{if(z===true&&AB.attributes.getNamedItem("ei")===null&&!this.cellMenuOnCloseFlag){d.call(this);this.markSelections();this.endSelections();}}},t=function t(w){var v=false,u=this.isSelectAllCell(w);if(w.attributes.getNamedItem("ei")!==null&&!u){v=this.isSelected(w);if(v){b.call(this);}else{Z.call(this,g.call(this,w));}this.markContextMenuSelections();}},k=function k(AB){var w=this.selCells,z=true;if(this.selectSiblings(AB)){var v=this.getCellForNode(w[0]),u=this.model.getCellInfo(v).isMetric,x=u?v._ei:v._e&&v._e.id,AA=u?v._tp&&v._tp._e&&v._tp._e.id:undefined;z=!X.some(w,function(AC){AC=this.getCellForNode(AC);if(u){return AC._tp._e.id===AA&&AC._ei!==x;}else{return AC._e&&AC._e.id!==x;}}.bind(this));}else{if(w.length>1){z=false;}}return z;};mstrmojo.vi.ui.rw._IsMultiselectXtab=mstrmojo.provide("mstrmojo.vi.ui.rw._IsMultiselectXtab",{_mixinName:"mstrmojo.vi.ui.rw._IsMultiselectXtab",selCells:[],cmSelCells:[],cellMenuOnCloseFlag:false,lastSelectedCell:null,isMultiSelect:false,getLastSelectedCell:function G(){return this.lastSelectedCell;},onCtrlSelect:function e(u,v){T.call(this,g.call(this,u),A.TOGGLE,v);},onShftSelect:function r(AK,w){if(w){return this.onSingleSelect(AK,w);}var v=this.shiftInfo.lastCell;if(K.call(this,AK,v)){this.selCells=[].concat(this.shiftInfo.selCells);var AF=c.call(this),AG,z,AD,x,AE,AI,AH=m.call(this,v),AC=m.call(this,AK),u=parseInt(v.getAttribute("r"),10),AJ=parseInt(AK.getAttribute("r"),10),AB=this.model.getCellInfo(this.getCellForNode(AK));if(AB.isMetric){AG=u;z=AJ;}else{if(AH===AC){AE=this.getCellForNode(v);AI=this.getCellForNode(AK);}else{var AA=Math.min(AH,AC);AE=M.call(this,u-AF,AA);AI=M.call(this,AJ-AF,AA);if(this.zone.searchRow(AE.o+AF)===null){AE=this.getCellForNode(v);}if(this.zone.searchRow(AI.o+AF)===null){AI=this.getCellForNode(AK);}}AD=(AE.o<AI.o)?AE:AI;AG=Q.call(this,AD,AF,-1);x=(AE.o>AI.o)?AE:AI;z=Q.call(this,x,AF,1);}J.call(this,AH,AG,AC,z);}},onSingleSelect:function P(u,v){T.call(this,g.call(this,u),A.REPLACE_ALL,v);},handleSelection:function E(z,u,x){var w=x&&W.findAncestorByName(x,"td",true,this.viewport),v=K.call(this,w,this.lastSelectedCell),AA;if(!W.isRMC(z,u)){if(W.isMetaKey(u,z)&&v){AA=j.CONTROL;}else{if(W.shiftKey(u,z)&&v){AA=j.SHIFT;}else{AA=j.SINGLE;}}Y.call(this,AA,w);}else{if(!(W.isMetaKey(u,z)||W.shiftKey(u,z))){t.call(this,w);}}},markSelections:function D(){this.highlightCells(this.selCells);},markContextMenuSelections:function R(){this.highlightCellsWithContextMenuSelection(this.cmSelCells);},handlesMultiSelection:function h(u){return(this._super&&this._super(u))||this.isMultiSelect;},isSelected:function o(u){return X.indexOf(this.selCells,u)!==-1;},addSelection:function O(u){if(!this.isSelected(u)){Y.call(this,j.CONTROL,u);}},onclick:function f(v){W.clearBrowserHighlights();V.call(this);var x=v.getTarget&&v.getTarget();if(this.handlesMultiSelection(v)){if(mstrApp.isExpress){var w=x&&W.findAncestorByName(x,"td",true,this.viewport),u=W.findAncestorByName(x,"span",true,w);if(u){this.handleSelection(v.e,v.hWin,x);}}else{this.handleSelection(v.e,v.hWin,x);}}else{this._super(v);}this.cellMenuOnCloseFlag=false;},singleUnitSelect:function l(){var v=this.lastSelectedCell,u=this.getCellForNode(v);this.defaultAction(v,u);},getActionCells:function L(u){var w=this,v=X.map(X.filter(this.selCells,function(z){var x=w.getCellForNode(z);return x&&u&&(x.tui||x.ui)===(u.tui||u.ui);}),function(x){return w.getCellForNode(x);});if((v.length===0)||!this.model.getCellTitleInfo(u).isSrcTitle){v=this._super(u);}return v;},openXtabCellMenu:function N(z){var v=mstrmojo.findAncestor(this,"openXtabCellMenu"),w=this,u=null;if(this.isInFilterPanel()&&mstrApp&&mstrApp.isInVFInteractMode){v=this.controller&&this.controller.view;}if(v){if(z.evt){if(W.isMetaKey(z.hWin,z.evt)){var x=z.td&&W.findAncestorByName(z.td,"td",true,this.viewport);this.addSelection(x);}}u=v.openXtabCellMenuWithSelectionStyleControl(z);if(u){u.onCloseMenuCallBack=function(){w.clearContextMenuHighlights();w.cellMenuOnCloseFlag=true;};}if(this.parent&&this.parent.selectVIUnit){this.parent.selectVIUnit();}}},highlightCells:function(v,u){if(this._super){this._super(v,u);}if(u){this.selCells=v;}},selectSiblings:function(){return true;},isSelectAllCell:function n(w){var u=this.getCellForNode(w),v=u&&this.model.getCellDataUnion(u);return !!u&&(v.length===0||(v.length===1&&!v[0].eid));}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");function B(){var D=this.maskNode,E=this.isMasked;D.style.display=E?"block":"none";mstrmojo.css.toggleClass(D,"masked",E);}mstrmojo.vi.ui._HasMask=mstrmojo.provide("mstrmojo.vi.ui._HasMask",{_mixinName:"mstrmojo.vi.ui._HasMask",isMasked:false,postBuildRendering:function C(){if(this._super){this._super();}B.call(this);},onisMaskedChange:function A(){if(!this.hasRendered){return ;}B.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});mstrmojo.ui._HasUITheme.EnumThemeNames={LIGHT_THEME:"mojo-theme-light",DARK_THEME:"mojo-theme-dark"};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.DICFactory");var P=3,A=8,W=2,Y=2,U=mstrmojo.css,B="********",S=mstrmojo.hash,N=mstrmojo.array,D=mstrmojo.string;var L=null;function I(e,b){if(e){var Z=this.dicWidget;if(Z&&Z.setDirtyFlag){Z.setDirtyFlag(e,b);}else{if(e.className!=="flag-container"){var a=document.createElement("div");a.className="flag-container";a.style.right="10px";a.innerHTML='<div class="dirty-cell"/>';b.insertBefore(a,e);}}}}function T(a,Z){if(a.className==="flag-container"){Z.removeChild(a);}}function F(c,a,b,Z){return'<rwf rw_tree_type="'+this.tt+'" rw_node_key="'+this.fgk+'" rw_field_key="'+this.k+'" key="'+this.key+'" columns="'+this.cls+'" types="'+b+'" '+a+Z+' dt="'+c.dt+'" />';}mstrmojo._IsEditableTextfield={_mixinName:"mstrmojo._IsEditableTextfield",preBuildRendering:function V(){if(!this.edb){var b=this.node.data,Z=this.node.defn,a=b.dic||Z.txi.dic,c=(this.rv==="")?this.value:this.rv;if(a.psw){this.v=B;c=this.rv="";}if(a.ipt===Y){a.vls=this.vls||[];this.dk=a.k;this.ddic=true;}this.dt=a.dt;this.dicWidget=mstrmojo.DICFactory.createDIC({dic:S.copy(a,{req:this.req}),enabled:!!this.enabled,owner:this,k:0,dv:this.value,value:c,openerType:W,popupTitle:Z.n});if(this.shouldReplaceValueNode()){if(!L){L=S.clone(this.formatHandlers);}this.formatHandlers.domNode=["T","z-index","D","B","F","P","text-align","background-color","fx","white-space","overflow"];delete this.formatHandlers.valueNode;}}this.set("cssClass",this.edb?"":"editable-field");this._super();},shouldReplaceValueNode:function R(){return this.dicWidget.showByDefault||this.dicWidget.hasPreview;},postBuildRendering:function M(){this._super();if(this.edb){return ;}var Z=this.dicWidget,b=this.valueNode.innerHTML;if(D.isEmpty(b)){this.valueNode.innerHTML=b+"1";this.valueNode.style.height=this.valueNode.clientHeight+"px";this.valueNode.innerHTML=b;}if(Z.showByDefault){Z.render();}else{if(this.enabled){if(Z.hasPreview){Z.openerNode=this.domNode;Z.renderPreview(this.value);}else{Z.openerNode=this.valueNode;}mstrmojo.dom.attachEvent(Z.openerNode,mstrApp.isMobile?mstrmojo.dom.TOUCHEND:"click",function(){Z.showInPopup();});}else{U.addClass(this.domNode,"disabled");return ;}}if(this.shouldReplaceValueNode()){S.copy(L,this.formatHandlers);}this.registerTxWidget();this.addToTraversalList();if(this.mdf&&this.sci){var a=this.domNode;I.call(this,a.firstChild,a);}},getKeyContext:function G(){return{dt:this.dt||0,k:this.dk||undefined};},getUpdates:function E(){var e=this.getUpdatedValues()[0],Z=N.find(this.vls,"v",e.v),a=this.dicWidget,d=this.ddic&&(Z===-1),b,c="";if(a.canSlice||d){c=F.call(this,e,"",A,"");}if(!d){b=e.k?('rw_control_key="'+e.k+'" element_id="'+D.encodeXMLAttribute(this.vls[Z].eid)+'" '):"";c+=F.call(this,e,b,P,'value="'+D.encodeXMLAttribute(String(e.v))+'"');}return c;},updateValue:function O(g,a){if(this._super){this._super(g,a);}var j=this.valueNode,e=this.domNode,f=this.dicWidget,h=a.v,Z=a.dv,c=N.find(this.vls,"v",h),b=this.ddic&&(c===-1);if(this.rv!==h){if(this.req){U.removeClass(e,"required");}this.rv=h;this.v=Z;this.mdf=b?0:1;if(!f.showByDefault){if(f.hasPreview){f.renderPreview();}else{j[j.innerText!==undefined?"innerText":"textContent"]=this.psw?B:(!Z?"\u00a0":D.decodeHtmlString(Z,false));}}if(this.req){U.removeClass(e,"required");}if(this.sci&&!b){I.call(this,e.firstChild,e);}else{T.call(this,e.firstChild,e);}}if(this.txar){return true;}return false;},applyPasswordMask:function Q(){this.psw=true;this.v=B;this.rv="";},getUpdateObject:function J(){var b={fieldKey:this.k,wid:this.wid,newValue:D.encodeXMLAttribute(String(this.rv)),dataType:this.dt},Z=-1,a=this.getUpdatedValues()[0];if(a.k!==undefined){b.controlKey=a.k;Z=mstrmojo.array.find(this.vls,"v",a.v);b.elementId=Z>=0?this.vls[Z].eid:"";}return{nodeKey:this.fgk,cells:[b],retrieveData:false,autoRefresh:false};},autoRefresh:function(Z){this.model.sendTransactionUpdates(Z);},update:function K(Z){if(this._super){this._super(Z);}var b=Z.data,a=Z.defn;if(b.vls){this.vls=b.vls;}else{delete this.vls;}this.cell=Z.data;this.value=b.v||"";this.rv=(b.rv===undefined)?this.value:b.rv;this.tca=b.tca||0;this.dt=b.dt;this.key=b.key||"";this.cls=b.cls||"";this.wid=b.wid;this.edb=b.edb;this.mdf=b.mdf;this.sci=a.txi.sci;this.req=this.required||a.txi.dic.req;this.tt=a.tt;this.fgk=a.fgk;this.txar=a.txi.txar;this.txck=a.txi.dic.ckey;},addToTraversalList:function X(){if(mstrmojo.DICConfig.isKeyNavigable(this.dicWidget.dic)){var b=this.parent.traversalList,c=this.domNode;if(!b){b=this.parent.traversalList=[];}var Z=this.k,a=false;N.forEach(b,function(d){if(d.refField.k===Z){a=true;return false;}});if(!a){b.push({x:c.offsetLeft,y:c.offsetTop,h:c.offsetHeight,refField:this});}}},editNext:function H(){var e=this.parent.traversalList,c,Z,b,d=0;if(!e){return false;}if(!e.isSorted){for(c=0,Z=e.length;c<Z;c++){d+=e[c].h;}b=d/Z;e.sort(function(h,f){var j=Math.floor(h.y/b),g=Math.floor(f.y/b);if(j<g){return -1;}if(j>g){return 1;}if(h.x<f.x){return -1;}if(h.x>f.x){return 1;}return(h.y<f.y)?-1:1;});e.isSorted=true;}for(c=0,Z=e.length;c<Z;c++){if(e[c].refField.k===this.k){break;}}if(c<Z){do{c++;if(c>=Z){c%=Z;}if(c===parseInt(this.k,10)){return false;}var a=e[c].refField.dicWidget;if(a){if(!a.showByDefault){a.showInPopup();}else{a.focus();}return true;}}while(true);}},checkRequiredObjects:function C(){if(this.req&&!this.mdf&&!this.edb){U.addClass(this.domNode,"required");return false;}return true;}};}());(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){if(this.avatar){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(T){if(this._editComplete){return ;}var X,R=false,W=this.text,U=false;if(T===C){X=W;U=true;R=true;}if((!T&&T!==0)||(!this.allowNewLine&&T===L)){var S=this[this.editableSlot],V=S.innerText||S.textContent||"";if(!this.allowNewLine){X=V.replace(/\n/g,"");}else{X=V;}R=true;if(!this.allowEmptyText&&X.length===0){X=W;U=true;}}if(R){this._editComplete=true;X=X.replace(/\u00A0/g,"\u0020");this.text=X;this.set("isEditing",false);this.onTextEditComplete(X!==W,W);delete this._editComplete;}if(U){this.refresh();}}function E(R){var S={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[S[R.name]]||(R.name==="click"&&this.editOnTwoClicks)&&R.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(T,S,R){if(typeof S["on"+R]!=="function"){H.attachMarkupEvent(T,S,R);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,editOnTwoClicks:false,firstClickTime:undefined,allowEmptyText:false,allowTrimming:true,allowNewLine:false,editOnDoubleClick:false,onTextEditBegin:mstrmojo.emptyFn,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var T=this.editableSlot,R=this[T],U=this[this.editButtonSlot||T];K.addClass(R,"hasEditableText");this.text=this.text||R.innerText||R.textContent||"";R.innerHTML=this.getEditableTextInnerHTML();var S=this.id;if(this.editOnClick||this.editOnTwoClicks){F(S,U,"click");}F(S,U,"dblclick");F(S,R,"blur");F(S,R,"keyup");F(S,R,"keydown");},getEditableTextInnerHTML:function Q(){return N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");},onclick:function P(R){if(this.editOnClick){E.call(this,R);}if(this._super){this._super(R);}},onTwoClicks:function(R){if(this.editOnTwoClicks){E.call(this,R);}if(this._super){this._super(R);}},ondblclick:function G(R){E.call(this,R);},onblur:function M(){I.call(this);},onkeyup:function B(S){var R=window.event||S.e;I.call(this,R.keyCode);},onkeydown:function J(S){var R=window.event||S.e;if(R.keyCode===L){I.call(this,R.keyCode);S.cancel();}},_set_text:function D(T,R){var S=this.text;this.text=R;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(R||"",true);}return(S!==R);},onisEditingChange:function O(){if(this.hasRendered){var R=this[this.editableSlot],S=!!this.isEditing;R.contentEditable=S;R.spellcheck=false;K.toggleClass(R,"editable",S);if(S){R.focus();H.setElementSelection(R);this.onTextEditBegin();}else{R.blur();R.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var d=mstrmojo.css,J=mstrmojo.dom,R=mstrmojo.array,N={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},b="scrollingMode",U="scrolling",g=3;var O=J.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function M(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function V(m,j){var l=this.scrollNode,h=M.call(this),k={v:m,h:j};R.forEach(["v","h"],function(o){var n=N[o];d.toggleClass(h,n.hostCls,k[o]);d.toggleClass(l,n.scrollNodeCls,k[o]);});}function S(j,h){var o=J.eventTarget(h,j),m=this.scrollNode,l=J.position(m),n=this.scrollTrackNodes,k=this.scrollBarNodes,p=function p(z){var w=o===n[z];if(w){var AA=N[z],q=k[z],AB=J.position(q),t=J.getMousePosition(j,h)[AA.position],u=t-AB[AA.position],r=u>0?1:-1,x=m[AA.scrollDimension],AC=Math.abs(u-(AB.h/2))*(x/l[AA.dimension]),v={};v[AA.scroll]={isStyle:false,start:m[AA.scroll],stop:m[AA.scroll]+(r*Math.min(x/3,500,AC)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:v,duration:200,interval:10,target:m})).play();}};p.call(this,"h");p.call(this,"v");}function C(j,h){var m=this.scrollNode,l=j.type==="mousewheel",k=l?-1:1;mstrmojo.array.forEach(["h","v"],function(u){var r=N[u],o=l?"wheelDelta":"delta",q=j[o+{h:"X",v:"Y"}[u]]*k,p=Math.abs(q),n=q/p,t=p===3&&J.isFF&&!O;m[r.scroll]+=t?n*40:q;});J.stopPropogation(h,j);J.preventDefault(h,j);}function f(n){var m=N[n],l=this.scrollNode,k=J.position(l),j=k[m.dimension],o=l[m.scrollDimension],h=Math.ceil(j)/o;return A(h,j,o);}function A(j,h,k){return(!isNaN(j)&&j<1)&&(Math.abs(h-k)>g);}function D(AI){var AB="px",t=N[AI],m=this.scrollNode,u=M.call(this),AK=J.position(m),v=AK[t.dimension],AD=m[t.scrollDimension],l=Math.ceil(v)/AD,AH=this.scrollBarNodes,q=AH[AI],z=this.scrollTrackNodes,AA=z[AI],AF=A(l,v,AD),n=t.cls;if(!q){AA=z[AI]=document.createElement("div");var o=this,x=function(AM){S.call(o,AM);},r=function(AM){C.call(o,AM);},AE=function(AO,AM,AN){J.attachEvent(AO,AM,AN);o.installedEventListeners.push({e:AO,evt:AM,fn:AN});};AE(AA,"click",x);AA.className="mstrmojo-scrolltrack "+n;q=AH[AI]=document.createElement("div");q.className="mstrmojo-scrollbar "+n;AA.appendChild(q);u.appendChild(AA);var AG=mstrApp.isSingleTier?"mousewheel":"wheel";AE(AA,AG,r);AE(q,AG,r);}var AL=q.style,p=(m[t.scroll]/m[t.scrollDimension]),j=J.delta(m,M.call(this))[t.position],AC=AA.style;if(AF){AC[t.styleDir]=j+AB;var k=l*v,w=35,AJ=v*p,h=v-35;AL[t.styleDim]=(k<w?w:k)+AB;AL[t.styleDir]=(AJ>h?h:AJ)+AB;}return AF;}function I(){return !(mstrApp.isSingleTier&&O);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function X(h){this._super(h);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=I();}this.installedEventListeners=[];},onRender:function L(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function G(){var j=this.scrollNode,k=J.isFF&&!O;if(j){var h=J.attachMarkupEvent(this.id,j,"scroll");this.installedEventListeners.push({e:j,evt:"scroll",fn:h});}if(k){d.addClass(j,"firefox-on-windows");}else{if(J.isEdge){d.addClass(j,"ms-edge");}}if(!this.hasCustomScrollbar){d.addClass(M.call(this),"mstrmojo-sb-host-show-default");d.addClass(j,"mstrmojo-sb-show-default");return ;}if(j){d.addClass(M.call(this),"mstrmojo-scrollbar-host");d.addClass(j,"mstrmojo-scrollNode");}},updateScrollbars:function e(){if(!this.hasRendered){return ;}this.setupScrollNodes();var h,k=false;if(!this.hasCustomScrollbar){if(this.scrollNode){h=this.scrollNode.style;h.overflowY=f.call(this,"v")?"scroll":"hidden";h.overflowX=f.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};V.call(this,k,k);h=this.scrollNode.style;var l=D.call(this,"v"),j=D.call(this,"h");h.overflowY=l?"scroll":"hidden";h.overflowX=j?"scroll":"hidden";V.call(this,l,j);}},onscroll:function a(){var p=this.scrollNode;if(p&&this.hasCustomScrollbar){var m=function m(q){var r=parseInt(q);return r===null||isNaN(r)?0:r;},n=J.position(p),o=n.h-m(d.getStyleValue(p,"padding-bottom")),j=n.w-m(d.getStyleValue(p,"padding-right")),l=this.scrollBarNodes,k=l.v,h=l.h;if(p.scrollHeight-o>0){k.style.top=((o-J.position(k).h)*(p.scrollTop/(p.scrollHeight-o)))+"px";}if(p.scrollWidth-j>0){h.style.left=((j-J.position(h).w)*(p.scrollLeft/(p.scrollWidth-j)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function F(j){var m=this.scrollNode,l=J.position(m),k=j.src.node,h=this.scrollBarNodes;if(this.isDraggingScrollBar(j)){return{isScrollBar:true,direction:k===h.v?"v":"h",scrollTop:m.scrollTop,scrollLeft:m.scrollLeft,conversionRatio:{y:m.scrollHeight/l.h,x:m.scrollWidth/l.w}};}return(this._super&&this._super(j));},isDragValid:function E(h){return this.isDraggingScrollBar(h)||(this._super&&this._super(h))||false;},isDraggingScrollBar:function W(j){var k=j.src.node,h=this.scrollBarNodes;return !!h&&(k===h.v||k===h.h);},ondragstart:function c(h){if(this.isDraggingScrollBar(h)){d.addClass(h.src.node,U);d.addClass(M.call(this),b);}if(this._super){this._super(h);}},shouldDragBubble:function T(h){var j=h.src.node,k=this.scrollTrackNodes;return !(!!k&&(j===k.v||j===k.h));},ondragmove:function Q(j){if(this.isDraggingScrollBar(j)){var r=j.tgt,h=j.src,t=r.pos,k=h.pos,o=h.node,n=this.scrollNode,q=this.scrollBarNodes,p=h.data,m={y:(t.y-k.y),x:(t.x-k.x)},l=p.conversionRatio;if(o===q.v){n.scrollTop=p.scrollTop+(m.y*l.y);}else{n.scrollLeft=p.scrollLeft+(m.x*l.x);}}if(this._super){this._super(j);}},ondragend:function K(h){if(this.isDraggingScrollBar&&this.isDraggingScrollBar(h)){d.toggleClass(h.src.node,U,false);d.toggleClass(M.call(this),b,false);}if(this._super){this._super(h);}},widgetResized:function P(){if(this._super){this._super();}this.updateScrollbars();},unrender:function Y(h){R.forEach(this.installedEventListeners,function(j){J.detachEvent(j.e,j.evt,j.fn);});this.installedEventListeners=[];delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(h);},getDefaultScrollBarProps:function Z(h){return N[h];},disableScroll:function B(h,l){var k=this.scrollNode,j=M.call(this);R.forEach(["v","h"],function(n){var m=N[n];d.toggleClass(j,m.hostCls,false);d.toggleClass(k,m.scrollNodeCls,false);});if(k){if(l||l===undefined){k.style.overflowY="hidden";}else{if(k.style.overflowY==="hidden"){k.style.overflowY="auto";}}if(h||h===undefined){k.style.overflowX="hidden";}}},enableScroll:function H(){this.updateScrollbars();if(!this.hasCustomScrollbar&&this.scrollNode){this.scrollNode.style.overflowY=f.call(this,"v")?"scroll":"hidden";}},scrollIntoViewIfNeeded:function(l){var q=this.scrollNode,n=l.clientHeight,m=q.clientHeight,j=J.position(l).y,o=J.position(q).y,k=j-o,h=k<0,p=k+n>m;if(h||p){q.scrollTop+=k+n/2-m/2;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,l){var m=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=m+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},o=function n(k,j){for(var p=k;p<j;p++){Y[W++]=m;var q=b.build(h,d,e[p],p);if(V[p]){q=q.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=q;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){o(0,a);}l=l&&b?Math.min(l,c-a):0;var f=c-l;for(var X=a;X<f;X++){Y[W++]=Z;}if(l){o(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css");var G=mstrmojo.array,F=mstrmojo.expr,H=mstrmojo.css;mstrmojo._IsExprNode=mstrmojo.provide("mstrmojo._IsExprNode",{ind:function B(){var L=this.parent;if(L&&L.indent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.indent(K);}}},out:function D(){var L=this.parent;if(L&&L.outdent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.outdent(K);}}},andOrTxt:function A(){var M=this.parent,K=M&&M.data,L="",N=this.data;if(K&&(K.et===F.ET.ANDOR)&&K.fn){L=K.fn+(N&&N.not?"_"+F.FN.NOT:"");L=F.BRANCH_FNS[L];}return'<span class="mstrmojo-text mstrmojo-andor">'+L+"</span>";},getPrefixAndOrToolsMarkup:function(){return('<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5896,"Ungroup Conditions")+"</span>");},premousedown:function J(K){var L=mstrmojo.dom.eventTarget(K.hWin,K.e);if(this.prefixHoverNode&&mstrmojo.dom.contains(this.prefixHoverNode,L,false)){mstrmojo.dom.stopPropogation(K.hWin,K.e);return ;}if(this._super){this._super(K);}},isSelectableArea:function E(K){return true;},childIndex:function I(){var M=this.parent,K=M&&M.data,L=K&&K.nds,N=this.data;if(L&&N){return G.indexOf(L,N);}return -1;},toggleGroupBorder:function C(K){H.toggleClass(this.parent.itemsContainerNode.childNodes[this.childIndex()-1].firstChild,"upgroup",K);H.toggleClass(this.domNode,"downgroup",K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.fx.AnimateProp");var S=mstrmojo.css;var Q=10;function C(W,Z,Y){W.pauseScrollRendering(true);var X=W.scrollboxNode,V=W.animate?W.scrollEffect:null;if(V&&V.play){if(V.isPlaying){V.cancel();}V.props={scrollTop:{start:X.scrollTop,stop:Z,isStyle:false}};V.onEnd=function(){W.pauseScrollRendering(false,null,Y);};V.play();}else{X.scrollTop=Z;W.pauseScrollRendering(false,null,Y);}}function K(c,e,V){var W=4;if(!V){V=0;}var f=Math.round(c.renderBlockSize/2);c.fillAt(Math.max(0,e-f),e+f);var b=c.itemsContainerNode,a=b.childNodes[e],Z=c.listMapper.itemOffsetTop(c,b,null,a),d=parseInt(c.scrollboxNode.clientHeight/2,10)-a.offsetHeight/2,X=Math.max(0,c.spacerMargin+Z-d);if(Math.abs(c.scrollboxNode.scrollTop-X)>2){C(c,X,c.renderOnScroll?function(){if(V<=W){K(c,e,V++);}}:null);}else{var Y=c.animate?c.scrollEffect:null;if(Y&&Y.isPlaying&&Y.cancel){Y.cancel();c.pauseScrollRendering(false);}}}function J(X){var Y=X.itemsContainerNode,V=Y.lastChild,W=V?V.offsetTop+V.offsetHeight-Y.firstChild.offsetTop:0;return W;}function U(W){var V=J(W),X=Math.max(0,parseInt((W.scrollboxNode.clientHeight-V)/2,10));C(W,Math.max(0,W.spacerMargin-X));}function H(X){var V=X.selectedIndex,W=V>-1;X.set("hasSelection",W);if(!X.domNode){return ;}if(W){K(X,V);}else{U(X);}}function E(W){var Y=W.scrollboxNode,V=J(W),X=V>Y.clientHeight/2;S.toggleClass(W.upArrowNode,["enabled"],X);S.toggleClass(W.downArrowNode,["enabled"],X);}function N(V,W){var X=V.scrollboxNode;X.scrollTop=Math.min(Math.max(X.scrollTop+W,0),X.scrollHeight-X.offsetHeight);}function B(W,V){if(!W._scrollInter){var X=Q*(V?-1:1);W._scrollInter=window.setInterval(function(){N(W,X);},50);}}function R(V){if(V._scrollInter){window.clearInterval(V._scrollInter);V._scrollInter=null;}}mstrmojo._IsDial=mstrmojo.provide("mstrmojo._IsDial",{markupString:'<div id="{@id}" class="mstrmojo-Dial {@cssClass}" style="position:relative;"><div class="mstrmojo-Dial-uparrow"  onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], true)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], true)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"></div><div class="mstrmojo-Dial-scrollbox {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-Dial-spacer" style="{@spacerCssText}"><div class="mstrmojo-Dial-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div></div></div><div class="mstrmojo-Dial-dnarrow" onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], false)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], false)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.childNodes[1];},spacerNode:function(){return this.domNode.childNodes[1].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},upArrowNode:function(){return this.domNode.childNodes[0];},downArrowNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){S.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);}},animate:true,itemsEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:500,interval:25,slot:"itemsContainerNode",preStart:function(){var W=this.widget[this.slot],V=(W&&W.offsetWidth)||0;this.props=V?{left:{start:-V,stop:0,suffix:"px",isStyle:true}}:{};},revertOnCancel:false},scrollEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:250,interval:25,slot:"scrollboxNode",revertOnCancel:false},multiSelect:false,holdJumpOnly:true,audibles:{"*":true,hasSelection:false},initSpacer:function I(){var V=(this.cssText||"").match(/height:\s*(\d*)px/);if(V){this.spacerMargin=parseInt(Number(V[1])/2,10);var W=this.spacerMargin+"px";this.spacerCssText="padding-top: "+W+"; padding-bottom: "+W+";";}else{this.spacerMargin=0;delete this.spacerCssText;}},center:function T(){H(this);},preBuildRendering:function(){this.initSpacer();return this._super();},postBuildRendering:function D(){this._super();this.center();E(this);},refreshScroll:function G(){this.center();E(this);},prechange:function O(V){this._super(V);if(this.hasRendered){if(!this.multiSelect||(V&&V.added&&V.added.length)){this.center();}}},onclickarrow:function A(X,W,V){N(this,Q*(V?-1:1));},onmouseoverarrow:function L(X,W,V){if(!this.holdJumpOnly){B(this,V);}},onmouseoutarrow:function M(X,W,V){R(this);},onmousedownarrow:function F(X,W,V){if(this.holdJumpOnly){B(this,V);}},onmouseuparrow:function P(X,W,V){R(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.num","mstrmojo.color","mstrmojo.hash","mstrmojo.array");var AK=mstrmojo.color,Z=mstrmojo.hash,BW=mstrmojo.array,BR=mstrmojo.css,l=mstrmojo.num;var BU=1,Aw=2,Ay=3,BD=4,Ae=5,Af=6;var Be="FormattingFont",L="FormattingAppearance",b="FormattingAlignment",Al="FormattingSize",U="FormattingPatterns",I="FormattingBorder",BC="FormattingOrder",H="FormattingView",S="FormattingSelector",A0="Template Formatting",P="FormattingPadding",Au="AnalyticalEngineProperties",A4="RWDocumentProperties",BM="FormattingPage",R="Mobile",X="VLDB Select",AE="FormattingNumber",AZ="RWDExecution";var At=1;var o="n",Q="h",BX="w",AI="wm",BJ="pw",a="ml",BK="mr",AA="upwalw",w="ff",Ao="fsz",BP="fw",AJ="fit",BQ="fun",u="fst",z="fc",Y="alh",x="alv",Ai="atw",AQ="atd",g="textOverflow",As="bc",E="bgs",K="btc",Ar="brc",Ab="bbc",v="blc",q="bts",BZ="brs",BE="bbs",Ah="bls",AW="borderColor",BA="borderStyle",j="zIndex",AY="showTitleBar",p="title",A8="ctrlStyle",AC="ctrlOrientation",A7="ctrlOrientationBehavior",n="ctrlMultiselect",k="ctrlAutoSearchEnabled",C="ciwm",BL="cmcy",A9="sec",t="easow",AP="layoutXml",M="lockAspectRatio",Aq="ism",m="shw",BB="mg",BY="lhv",d="gridVPadding",An="gridHPadding",Am="ln",AO="sar",B="hnv",Ak="iw",Ag="ih",AS="tsp",Ac="visible",V="rf",Bd="jad",Av="jdc",AL="ode",BF="fs",BI="ssc",h="sstyle",AH="hgl",Ax="nct",A6="ncp",e="ncs",BN="ndp",G="nfs",D="nnn",BT="nth",Bc="gi",A2="stfurh",c="stfuch",Ba="stfuva",N="olm",BO="gdc",Bb="gda",AX="layoutstyle";function T(Bf){return Bf;}function AU(Bf){return parseInt(Bf,10);}var AG={name:"encode",_def:T};AG[Ay]=function(Bf){return Bf?1:0;};AG[Aw]=function(Bf){if(Bf==="transparent"){return -1;}if(Bf.length===4){Bf=Bf.replace(/([0-9a-f])/ig,"$1$1");}Bf=AK.rgbStr2hex(Bf);return parseInt(Bf.substring(5)+Bf.substring(3,5)+Bf.substring(1,3),16);};AG[BD]=AU;AG[BU]=function(Bf){if(typeof Bf==="number"){return l.toLocaleString(Bf);}return T(Bf);};AG[Af]=function(Bh){if(Bh==="none"){return 0;}var Bg=Bh.match(/([0-9]+[,\.]?[0-9]*pt)/)[0],Bf=Bh.match(/pt ([\w\W]*)/)[1];if(Bg==="2pt"){return 5;}switch(Bf){case"solid":return 1;case"dashed":return 3;case"dotted":return 4;default:throw new Error("Invalid border style value in FormatModel::encodeValue.");}};var BV={name:"decode",_def:T};BV[Ay]=function(Bf){return parseInt(Bf,10)===1;};BV[Aw]=function(Bf){if(Bf===-1){return"transparent";}if(typeof Bf==="number"){return AK.decodeColor(Bf);}if(Bf.length===4){return Bf.replace(/([0-9a-f])/ig,"$1$1");}return AK.rgbStr2hex(Bf);};BV[BD]=AU;BV[Af]=function(Bh){if(Bh===undefined||Bh===0){return"none";}var Bg="1pt",Bf="solid";if(Bh===5){Bg="2pt";}if(Bh===3){Bf="dashed";}else{if(Bh===4){Bf="dotted";}}return Bg+" "+Bf;};function BG(){return this.pn.toLowerCase();}function AR(Bf,Bh,Bi){var Bg=document.createElement("div");Bg.style[Bi||Bh]=Bf[Bh];return Bg;}function J(Bf){return function(){return AK.rgbStr2hex(Bf.apply(this,arguments));};}function Ap(){var Bf=BG.call(this);return Bf==="underline"?Bf:"line-through";}var A3={name:"extract"},W=A3._def=function(Bf,Bh,Bi){var Bg=AR(Bf,Bh||this.getFormatBlockName(),Bi);return Bg.style[this.getCssName()];};A3[Aw]=J(W);function AB(Bf){return W.call(this,Bf,this.getFormatBlockName())===BG.call(this);}function A(Bf){var Bg=W.call(this,Bf,this.getFormatBlockName(),this.getCssName());return Bg.indexOf(Ap.call(this))>-1;}function A1(Bf){var Bg=this.getFormatBlockName();return AK.rgbStr2hex(W.call(this,Bf,Bg,Bg+this.pn));}var BS={name:"resolve"},f=BS._def=function(Bf,Bi,Bh,Bj){Bh=Bh||this.getFormatBlockName();var Bg=AR(Bf,Bh);Bg.style[Bj||this.getCssName()]=Bi;return Bg.style[BR.convertCssToCamelCase(Bh)];};BS[Aw]=function(Bf,Bh,Bg,Bi){if(Bh.or!==undefined){return Bh;}return AK.rgbStr2hex(f.call(this,Bf,Bh,Bg,Bi));};function Aa(Bf,Bg){return f.call(this,Bf,Bg?BG.call(this):"normal");}function AV(Bg,Bi){var Bh=(Bg[this.getFormatBlockName()]||"").split(" "),Bf=Ap.call(this);if(Bi){if(Bh.indexOf(Bf)===-1){Bh.push(Bf);}}else{Bh=Bh.filter(function(Bj){return Bj!==Bf;});}return f.call(this,Bg,Bh.join(" "));}var Aj={name:"update"},BH=Aj._def=function(Bf,Bg){Bf[this.getFormatBlockName()]=this.resolve(Bf,Bg);return Bf;};var AT={};AT[o]={ps:L,pn:"Name",pt:BU};AT[Q]={ps:Al,pn:"Height",pt:BU};AT[BX]={ps:Al,pn:"Width",pt:BU};AT[AI]={ps:Al,pn:"WidthMode",pt:BD};AT[BJ]={ps:BM,pn:"PageWidth",pt:BU};AT[a]={ps:BM,pn:"MarginLeft",pt:BU,fn:"margin-left"};AT[BK]={ps:BM,pn:"MarginRight",pt:BU,fn:"margin-right"};AT[AA]={ps:BM,pn:"UsePageWidthAsLayoutWidth",pt:Ay};AT[w]={ps:Be,pn:"Name",pt:BU,fn:"font",cn:"fontFamily",extract:function(){return W.apply(this,arguments).replace(/['"]/g,"");},resolve:function(Bf,Bh){var Bg=AR(Bf,"font");Bg.style.fontFamily="'"+Bh+"'";return Bg.style.font;}};AT[Ao]={ps:Be,pn:"Size",pt:BD,fn:"font",cn:"fontSize"};AT[BP]={ps:Be,pn:"Bold",pt:Ay,fn:"font",cn:"fontWeight",extract:AB,resolve:Aa};AT[AJ]={ps:Be,pn:"Italic",pt:Ay,fn:"font",cn:"fontStyle",extract:AB,resolve:Aa};AT[BQ]={ps:Be,pn:"Underline",pt:Ay,fn:"text-decoration",extract:A,resolve:AV};AT[u]={ps:Be,pn:"Strikeout",pt:Ay,fn:"text-decoration",extract:A,resolve:AV};AT[z]={ps:Be,pn:"Color",pt:Aw};AT[Y]={ps:b,pn:"Horizontal",pt:BD,fn:"text-align"};AT[Ai]={ps:b,pn:"TextWrap",pt:Ay,fn:"white-space"};AT[AQ]={ps:b,pn:"TextDirection",pt:BD};AT[x]={ps:b,pn:"Vertical",pt:BD};AT[g]={ps:Al,pn:"TextOverflow",pt:Ay};AT[As]={ps:U,pn:"FillColor",pt:Aw,x:At,fn:"background-color",update:function(Bf,Bh){var Bg=Bf.fx;if(Bh.or!==undefined){if(!Bg){Bg=Bf.fx={};}var Bi=Bg.gd=Bg.gd||{};Bi.ec=Bh.c2;Bi.sc=Bh.c1;Bi.t=Bh.or;delete Bf[this.getFormatBlockName()];Bf.fx=Bg;}else{if(Bg){delete Bg.gd;}BH.call(this,Bf,Bh);}return Bf;}};AT[E]={ps:U,pn:"FillStyle",pt:BD};AT[BI]={ps:U,pn:"SelectorSelectionColor",pt:Aw};AT[h]={ps:U,pn:"SelectorSelectionFillStyle",pt:BD};AT[K]={ps:I,pn:"TopColor",pt:Aw,fn:"border",extract:A1};AT[Ar]={ps:I,pn:"RightColor",pt:Aw,fn:"border",extract:A1};AT[Ab]={ps:I,pn:"BottomColor",pt:Aw,fn:"border",extract:A1};AT[v]={ps:I,pn:"LeftColor",pt:Aw,fn:"border",extract:A1};AT[AW]={ps:I,pn:["TopColor","RightColor","BottomColor","LeftColor"],pt:Aw,fn:"border",extract:A1,resolve:J(function(Bf,Bh){var Bi=this.getFormatBlockName(),Bg=f.call(this,Bf,Bh,Bi,Bi+"Color"),Bj=Bg.indexOf("rgb");if(Bj>-1){Bg=Bg.slice(0,Bj)+AK.rgbStr2hex(Bg.slice(Bj));}return Bg;})};AT[BA]={ps:I,pn:["TopStyle","RightStyle","BottomStyle","LeftStyle"],pt:Af,fn:"border",extract:A1,resolve:function(Bf,Bi){var Bg=Bi.split(" "),Bj=this.getFormatBlockName();if(!Bf[Bj]){Bf[Bj]="transparent";}Bf[Bj]=f.call(this,Bf,Bg[0],Bj,Bj+"Width");var Bh=f.call(this,Bf,Bg[1]||"none",Bj,Bj+"Style"),Bk=Bh.indexOf("rgb");if(Bk>-1){Bh=Bh.slice(0,Bk)+AK.rgbStr2hex(Bh.slice(Bk));}return Bh;}};AT[q]={ps:I,pn:"TopStyle",pt:Af,fn:"border",extract:A1};AT[BZ]={ps:I,pn:"RightStyle",pt:Af,fn:"border"};AT[BE]={ps:I,pn:"BottomStyle",pt:Af,fn:"border",extract:A1};AT[Ah]={ps:I,pn:"LeftStyle",pt:Af,fn:"border",extract:A1};AT[j]={ps:BC,pn:"ZIndex",pt:BD,fn:"z-index"};AT[AY]={ps:H,pn:"ShowTitleBar",pt:Ay};AT[p]={ps:H,pn:"Title",pt:BU};AT[A8]={ps:S,pn:"Style",pt:BD};AT[AC]={ps:S,pn:"Orientation",pt:BD};AT[A7]={ps:S,pn:"OrientationBehavior",pt:BD};AT[n]={ps:S,pn:"Multiselect",pt:Ay};AT[k]={ps:S,pn:"AutoSearchEnabled",pt:Ay};AT[C]={ps:S,pn:"ItemWidthMode",pt:BD};AT[BL]={ps:S,pn:"MetricConditionType",pt:BD};AT[A9]={ps:S,pn:"ShowElementCount",pt:BD};AT[t]={ps:S,pn:"ExportAsShownOnWeb",pt:BD};AT[AP]={ps:Al,pn:"LayoutXML",pt:Ae};AT[M]={ps:Al,pn:"LockAspectRatio",pt:Ay};AT[Aq]={ps:Al,pn:"ImageSizeMode",pt:BD};AT[Ag]={ps:Al,pn:"ImageHeight",pt:BU};AT[Ak]={ps:Al,pn:"ImageWidth",pt:BU};AT[AS]={ps:A4,pn:"layoutBarPosition",pt:BU};AT[BF]={ps:A4,pn:"ExecutionFullScreenMode",pt:Ay};AT[AX]={ps:A4,pn:"LayoutStyle",pt:BD};AT[Ac]={ps:L,pn:"Visible",pt:Ay};AT[Am]={ps:A0,pn:"LongNames",pt:BU};AT[N]={ps:A0,pn:"Indented",pt:BD};AT[AO]={ps:Au,pn:"ShowAllRows",pt:BU};AT[B]={ps:Au,pn:"HideNullZeroValues",pt:BU};AT[An]={ps:P,pn:["LeftPadding","RightPadding"],pt:BU};AT[d]={ps:P,pn:["TopPadding","BottomPadding"],pt:BU};AT.rowsshw={ps:A0,pn:"ShowRowHeaders",pt:BU};AT.rowsmg={ps:A0,pn:"MergeCells",pt:BU};AT.rowslhv={ps:A0,pn:"LockRowHeaders",pt:BU};AT.colsshw={ps:A0,pn:"ShowColumnHeaders",pt:BU};AT.colsmg={ps:A0,pn:"MergeColumnCells",pt:BU};AT.colslhv={ps:A0,pn:"LockColumnHeaders",pt:BU};AT[A2]={ps:A0,pn:"SubtotalFormatUseRowHeaders",pt:BU};AT[c]={ps:A0,pn:"SubtotalFormatUseColumnHeaders",pt:BU};AT[Ba]={ps:A0,pn:"SubtotalFormatUseValues",pt:BU};AT[V]={ps:R,pn:"RefreshFrequency",pt:BD};AT[Bd]={ps:X,pn:"Join Across Datasets",pt:BD};AT[Av]={ps:X,pn:"MCE Join To Get Data Combination",pt:BD};AT[AL]={ps:AZ,pn:"OnDemandEvaluation",pt:BD};AT[AH]={ps:L,pn:"Highlight",pt:BD};AT[Ax]={ps:AE,pn:"Category",pt:BD};AT[G]={ps:AE,pn:"Format",pt:BU};AT[e]={ps:AE,pn:"CurrencySymbol",pt:BU};AT[BN]={ps:AE,pn:"DecimalPlaces",pt:BD};AT[A6]={ps:AE,pn:"CurrencyPosition",pt:BD};AT[D]={ps:AE,pn:"NegativeNumbers",pt:BD};AT[BT]={ps:AE,pn:"ThousandSeparator",pt:BD};AT[Bc]={ps:L,pn:"GroupInfo",pt:BU};AT[BO]={ps:U,pn:"GradientColor",pt:Aw};AT[Bb]={ps:U,pn:"GradientAngle",pt:BD};BW.forEach(Z.keyarray(AT),function(Bf){var Bg=AT[Bf];Bg.getFormatBlockName=function(){var Bi=this.fn;if(!Bi){var Bh=this.pn;Bi=Bh.charAt(0).toLowerCase()+Bh.substr(1);}return Bi;};Bg.getCssName=function(){var Bh=this.getFormatBlockName.call(this),Bi=this.cn;if(!Bi){Bi=BR.convertCssToCamelCase(Bh);}return Bi;};BW.forEach([AG,BV,A3,BS,Aj],function(Bh){var Bi=Bh.name;Bg[Bi]=Bg[Bi]||Bh[Bg.pt]||Bh._def;});});function A5(Bi,Bh,Bf){var Bg=Bf[Bi.ps]=Bf[Bi.ps]||{};Bh=Bi.encode(Bh);BW.forEach([].concat(Bi.pn),function(Bj){Bg[Bj]=Bh;});return Bf;}function AN(Bl,Bk,Bf){var Bj=Bl.x;if(Bj){if((Bj&At)>0){var Bi=!!Bk.c1,Bh=0;if(Bi){A5(Bl,Bk.c1,Bf);var Bg=Bf[U];Bg.GradientColor=Bl.encode(Bk.c2);Bg.GradientAngle=Bk.or?0:90;Bg.GradientXOffset=0;Bg.GradientYOffset=0;Bh=2;}else{if(Bl.encode(Bk)===-1){Bh=1;}else{A5(Bl,Bk,Bf);}}return A5(AT[E],Bh,Bf);}}return null;}mstrmojo.models.FormatModel={getFormatUpdate:function Ad(Bg,Bj,Bf){var Bi=AT[Bg];if(!Bi){throw new Error("Invalid property "+Bg+" in FormatModel::getFormatUpdate.");}Bf=Bf||{};var Bh=AN.call(this,Bi,Bj,Bf);if(Bh){return Bh;}return A5(Bi,Bj,Bf);},getFormatPropertyInfo:function r(Bf){return AT[Bf];},getValueFromUpdate:function O(Bg,Bh){var Bj=AT[Bg],Bf=null;try{Bf=Bh[Bj.ps][Bj.pn];}catch(Bi){}return Bf;},getGradientValues:function AM(Bg){var Bf=Bg.fx&&Bg.fx.gd;if(Bf){var Bi={c1:Bf.sc,c2:Bf.ec,or:Bf.t};return Bi;}if(Bg[E]===2){if(!!Bg.bc.c1){return Bg.bc;}var Bh={c1:Bg.bc,c2:Bg.gdc,or:Bg.gda===90?0:1};return Bh;}return null;},decodeGradientValue:function F(Bf){if(Bf&&Bf.c1){Bf.c1=this.decodeValue(BO,Bf.c1);Bf.c2=this.decodeValue(BO,Bf.c2);return Bf;}return null;},decodeValue:function AF(Bf,Bg){return AT[Bf].decode(Bg);},updateFormatBlock:function Az(Bf,Bg,Bh){return AT[Bg].update(Bf,Bh);},getFormatBlockValue:function AD(Bf,Bg){return AT[Bg].extract(Bf);},GradientType:null,FormatObjectType:null,PROPERTY_INFO_TYPE:null,ENUM_PROPERTY_NAMES:{NAME:o,HEIGHT:Q,WIDTH:BX,WIDTH_MODE:AI,PAGE_WIDTH:BJ,MARGIN_LEFT:a,MARGIN_RIGHT:BK,USE_PAGE_WIDTH_AS_LAYOUT_WIDTH:AA,FONT_FAMILY:w,FONT_SIZE:Ao,FONT_WEIGHT:BP,FONT_STYLE:AJ,UNDERLINE:BQ,LINE_THROUGH:u,COLOR:z,TEXT_ALIGN:Y,VERTICAL_ALIGN:x,TEXT_WRAP:Ai,TEXT_DIRECTION:AQ,TEXT_OVERFLOW:g,BACKGROUND_COLOR:As,FILL_STYLE:E,GRADIENT_COLOR:BO,GRADIENT_ANGLE:Bb,BORDER_TOP_COLOR:K,BORDER_RIGHT_COLOR:Ar,BORDER_BOTTOM_COLOR:Ab,BORDER_LEFT_COLOR:v,BORDER_TOP_STYLE:q,BORDER_RIGHT_STYLE:BZ,BORDER_BOTTOM_STYLE:BE,BORDER_LEFT_STYLE:Ah,BORDER_COLOR:AW,BORDER_STYLE:BA,Z_INDEX:j,SHOW_TITLE_BAR:AY,TITLE:p,CONTROL_STYLE:A8,CONTROL_ORIENTATION:AC,CONTROL_ORIENTATION_BEHAVIOR:A7,CONTROL_MULTISELECT:n,CONTROL_AUTOSEARCH:k,CONTROL_ITEM_WIDTH_MODE:C,CONTROL_METRIC_CONDITION_TYPE:BL,CONTROL_SHOW_ELEMENT_COUNT:A9,CONTROL_EXPORT_AS_SHOWN_ON_WEB:t,LAYOUT_XML:AP,LOCK_ASPECT_RATIO:M,IMAGE_SIZE_MODE:Aq,SHOW_HEADER:m,MERGE_HEADER:BB,LOCK_HEADER:BY,LONG_NAME:Am,SHOW_ALL_ROWS:AO,HIDE_NULL:B,IMAGE_WIDTH:Ak,IMAGE_HEIGHT:Ag,VISIBLE:Ac,LAYOUT_TAB_POSITION:AS,GRID_VERTICAL_PADDING:d,GRID_HORIZONTAL_PADDING:An,REFRESH:V,JOIN_ACROSS_DATASET:Bd,MCE_JOIN_TO_GET_DATA_COMBINATION:Av,ON_DEMAND_EVALUATION:AL,FULL_SCREEN_MODE:BF,SELECTOR_SELECTION_COLOR:BI,SELECTOR_SELECTION_FILL_STYLE:h,VIZ_HIGHLIGHTING:AH,GROUP_INFO:Bc,SUBTOTAL_FORMAT_USE_ROWHEADERS:A2,SUBTOTAL_FORMAT_USE_COLUMNHEADERS:c,SUBTOTAL_FORMAT_USE_VALUES:Ba,OUTLINE:N,LAYOUT_STYLE:AX},ENUM_PROPERTY_SETS:{FORMATTING_NUMBER:AE},ENUM_NUMBER_FORMAT_KEYS_OBJ:{CATEGORY:Ax,CURRENCY_POSITION:A6,CURRENCY_SYMBOL:e,DECIMAL_PLACES:BN,FORMAT:G,NEGATIVE_NUMBERS:D,THOUSAND_SEPARATOR:BT}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash");var K=1,B=2;function N(Q,P){return D(Q,P)&&Q.o===P.o;}function D(Q,P){return Q&&P&&Q.ui===P.ui&&Q.axis===P.axis&&Q.mix===P.mix;}function A(T,Q,R){var S=R.getCellTitleId(Q),P=R.getCellUnitIndex(Q);R.selections[S]=R.selections[S]||{};R.selections[S][P]=R.selections[S][P]||[];R.selections[S][P].push(T);M(T,Q,R);}function M(T,Q,R){if(Q){var S=R.getCellTitleId(Q),P=R.getCellUnitIndex(Q);if(!R.selectionsForCopy){R.selectionsForCopy={};}R.selectionsForCopy[S]=R.selectionsForCopy[S]||{};R.selectionsForCopy[S][P]=R.selectionsForCopy[S][P]||[];R.selectionsForCopy[S][P].push(T);C(T);}}function O(Q){var U=Q.selectionsForCopy;for(var T in U){for(var S in U[T]){for(var R=0,P=U[T][S].length;R<P;R++){J(U[T][S][R]);}}}Q.selections={};Q.selectionsForCopy={};}function C(P){mstrmojo.css.setOpacity(P,50);if(P.nodeName.toLowerCase()==="td"&&mstrmojo.dom.isIE8){mstrmojo.css.addClass(P,"showGridBorder");}}function J(P){mstrmojo.css.setOpacity(P,100);if(P.nodeName.toLowerCase()==="td"&&mstrmojo.dom.isIE8){mstrmojo.css.addClass(P,"showGridBorder");}}function F(R,S){if(R.mix===undefined){var V=S.gridData.gts[R.axis===K?"row":"col"],Q=V[R.tui||R.ui],U=0;for(var T=0,P=V.length;T<P;T++){if(V[T].id===Q.id){U++;}}return U;}return 0;}function H(){var Q="_xtabSelectionsHiddenField",P;P=document.getElementById(Q);if(!P){P=document.createElement("textarea");P.id=Q;P.style.opacity=0;P.style.position="absolute";P.style.top=0;P.style.height=0;P.style.width=0;document.body.appendChild(P);}return P;}function G(){var W="",Y={},R,b=[],f=[],Q={},S={},P=this.selectionsForCopy,V=mstrmojo.hash,X=mstrmojo.array,d=function(g,h){if(g.hasOwnProperty("mix")){return h.es[g.mix].n;}else{return h.n;}},T,Z,U,e,c,a=0;V.forEach(P,function(g){V.forEach(g,function(h){X.forEach(h,function(j){a++;Z=j.offsetLeft;U=j.offsetTop;if(!Y[Z]){Y[Z]={};}R=Y[Z];R[U]=j.innerText;if(X.indexOf(b,Z)===-1){b.push(Z);}if(X.indexOf(f,U)===-1){f.push(U);}e=this.getCellForNode(j);c=this.model.getCellTitleInfo(e).title;if((!c.id&&c.axis===K)||(c.id&&c.axis===B)){S[U]=d.call(this,e,c);}else{Q[Z]=d.call(this,e,c);}},this);},this);},this);b.sort(function(h,g){return h-g;});f.sort(function(h,g){return h-g;});if(a>1&&!V.isEmpty(S)){W="\t";}if(a>1&&!V.isEmpty(Q)){X.forEach(b,function(g){W+=(Q[g]||"")+"\t";});W+="\n";}X.forEach(f,function(g){if(a>1&&!V.isEmpty(S)){W+=(S[g]||"")+"\t";}X.forEach(b,function(h){W+=(Y[h][g]||"")+(a>1?"\t":"");});if(a>1){W+="\n";}});T=H();T.value=W;T.focus();T.select();}mstrmojo._XtabSelections={lastSelectedTD:null,singleSelectForCopy:function I(P){var U=this.getCellForNode(P),b,c,Z,a=U&&U.mix!=undefined,S=function(e,d){d=d||{};e=e||{};if(a){return e.mix==d.mix;}else{return e.mix==d.mix&&e.ui==d.ui;}};Z=mstrmojo.dom.findAncestorByName(P,"table",false);c=Z.rows;for(var V=0,W=c.length;V<W;V++){var Y=c[V].cells;for(var T=0,R=Y.length;T<R;T++){var Q=Y[T],X=this.getCellForNode(Q);if(Q!=P&&S(X,U)){M(Q,X,this);}}}},singleSelect:function E(Q,Y){var W=this.getCellForNode(Q),f=Q.parentNode;if(Y){var V=this.getCellTitleId(W),b=this.getCellUnitIndex(W);selectedTitle=this.selections[V];selectedUnit=selectedTitle&&selectedTitle[b];if(selectedUnit){for(var X=0,Z=selectedUnit.length;X<Z;X++){J(selectedUnit[X]);}delete selectedTitle[b];return ;}}var U=F(W,this);if(W.axis===K){for(var X=0,P=0,Z=f.cells.length;X<Z&&P<U;X++){var S=f.cells[X],a=this.getCellForNode(S);if(N(a,W)){A(S,a,this);P++;}}}else{if(W.axis===B){var d=mstrmojo.dom.findAncestorByName(Q,"table",false),e=d.rows;for(var X=0,P=0,Z=e.length;X<Z&&P<U;X++){var c=e[X].cells;for(var T=0,R=c.length;T<R;T++){var S=c[T],a=this.getCellForNode(S);if(N(a,W)){A(S,a,this);P++;break;}}}}else{A(Q,W,this);}}},rangeSelect:function L(h,k){var e=this.getCellForNode(h),P=this.getCellForNode(k);if(D(e,P)){if(e.o>P.o||e._ei>P._ei){var n=h;h=k;e=this.getCellForNode(h);k=n;P=this.getCellForNode(k);}var a=F(e,this),Q=e.axis,l=mstrmojo.dom.findAncestorByName(h,"table",false),X=l.rows,f=h.parentNode,o=f.rowIndex,Z=f.cells,c=k.parentNode.rowIndex;if(Q===K){for(var d=o;d<=c;d++){var R=X[d].cells,S=false;for(var b=0,g=R.length,T=0;b<g&&T<a;b++){var V=R[b],Y=this.getCellForNode(V);if(D(Y,e)){A(V,Y,this);T++;}}}}else{if(Q===B){for(var d=0,g=X.length,m=0;d<g&&m<a;d++){var R=X[d].cells,W=false;for(var b=0,U=R.length;b<U;b++){var V=R[b],Y=this.getCellForNode(V);if(N(Y,e)){W=true;}if(W){A(V,Y,this);}if(N(Y,P)){break;}}if(W){m++;}}}else{if(o==c){for(var d=h.cellIndex,g=k.cellIndex;d<=g;d++){var V=Z[d],Y=this.getCellForNode(V);A(V,Y,this);}}else{for(var d=o,g=c;d<=g;d++){var R=X[d].cells;for(var b=0,U=R.length;b<U;b++){var V=R[b],Y=this.getCellForNode(V);if(D(Y,e)){A(V,Y,this);break;}}}}}}}},doSelection:function(W,V,T){var X=mstrmojo.dom,P=X.isMetaKey(V,W),Q=X.shiftKey(V,W);if(!P){O(this);}this.clearAllHighlights();var U=this.getCellForNode(T);var R=U&&(U.mix===undefined&&U.o!==undefined),S=U&&(U.mix!==undefined&&(U._lp||U._tp));if(R||S){if(Q){this.rangeSelect(this.lastSelectedTD,T);}else{this.singleSelect(T,P);this.lastSelectedTD=T;}}else{this.singleSelectForCopy(T,P);}G.call(this);},clearAllHighlights:function(){var Q=this.getCellForNode(this.lastSelectedCell),S=Q&&this.gridData.gts[Q.axis===1?"row":"col"],P=S&&S[Q.tui||Q.ui];var R=P&&P.sc&&P.sc.tks&&P.sc.tks.split("\x1E");if(R&&this.model.docModel.getTargetInfoWin(R).length==R.length){this.clearHighlights();}}};})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo._HasMarkup");var J=mstrmojo.dom,D=mstrmojo._HasMarkup,P,Q=mstrmojo.global.document,K,A="touchstart",C="touchmove",I="touchend",N="contextmenu";function O(S){var R=J.findWidget(S);while(R){if(R.hasContextMenuEvent){return R;}R=R.parent;}return null;}function M(R){var T=R.src,S=O(T&&T.node);if(!S){return null;}return S;}H:function H(R){if(R&&R.touches.length===1){P.startTapHoldCheck(self,R);}}B:function B(){var R=++P.ctxt.moveCount;if(R>P.minMoves){P.stopTapHoldCheck();if(K){window.clearTimeout(K);}}}L:function L(){P.stopTapHoldCheck();if(K){window.clearTimeout(K);}}mstrmojo.taphold=mstrmojo.taphold||mstrmojo.provide("mstrmojo.taphold",{timeThreshold:750,minMoves:3,startTapHoldCheck:function G(R,S){delete this.ctxt;var T=J.captureEventInfo({hWin:R,e:S});this.ctxt={src:T,moveCount:0};J.attachEvent(Q,C,B);J.attachEvent(Q,I,L);S.name=N;K=window.setTimeout(function(){P.stopTapHoldCheck();var U=D.newDomEvent(N,window,S),V;for(V in S){if(!U[V]){U[V]=S[V];}}U.type=N;P.triggerContextMenu(U);},this.timeThreshold);},triggerContextMenu:function F(R){var S=this.ctxt,T=M(S);if(!T){return ;}if(T.raiseEvent){T.raiseEvent(R);}},stopTapHoldCheck:function E(){J.detachEvent(Q,C,B);J.detachEvent(Q,I,L);},enable:function(){if(J.isIOSTouch){J.attachEvent(Q,A,H);}},disable:function(){J.detachEvent(Q,A,H);}});P=mstrmojo.taphold;P.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");if(F.params&&!F.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){F.params.sessionState=mstrApp.sessionState;}H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){if(typeof J==="string"&&J[0]==="{"){try{J=JSON.parse(J);}catch(K){}}if(J.mstrerr){J.code=J.mstrerr.code;J.message=J.mstrerr.message;}E&&E.response(G,true,J);},failure:function(L){var M=L.status,K=L.getResponseHeader("X-MSTR-TaskErrorCode"),J;if(M===0){M=K||M;J=mstrmojo.desc(15666,"The connection to the MicroStrategy Web Server failed. Please wait a few minutes and then attempt to reload the page. If the condition persists, please contact your administrator.");}else{M=K||M||"-999";J=L.getResponseHeader("X-MSTR-TaskFailureMsg")||L.responseText||"Unexpected error, please contact your administrator";}E&&E.response(G,false,{code:M,message:J});},complete:function(){delete D[G];},textResponse:F.callback.textResponse},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"POST",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(L){K.response=L;if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(l,m){var h=l.dtp,k=l.constraints,o=k.allowedFormatChars||"",g=(A[h]===1),d=H.isNumeric(h),e=(A[h]===6),n=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,j;if(g){if(!l._intRegExp){o+="0-9-"+(l.isList?L:"")+n;l._intRegExp=new RegExp("[^"+o+"]");}j=l._intRegExp;}if(d){if(!l._numericRegExp){o+="0-9-#"+(l.isList?L:"")+f+n;l._numericRegExp=new RegExp("[^"+o+"]");}j=l._numericRegExp;}return !!j&&j.test(m);}function c(l,n){var h=l.dtp,k=l.constraints,g=(A[h]===1),d=H.isNumeric(h),e=(A[h]===6),f=k.min,m=k.max,j;if(f===undefined&&m===undefined){return false;}if(g||d){if(Z.isBigDecimal(n)){return Z.inNumericRange(Z.parseBigDecimal(n),f,m)!==0;}return Z.inNumericRange(n,f,m)!==0;}if(e){return F.inDateTimeRange(n,f,m)!==0;}return false;}function K(e,d){return !Z.isNumeric(d)&&!Z.isBigDecimal(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(j,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,o=this.value||"",e=this.isList?o.split(l):[o],n=j===14,m=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){o=e[h];d=F.parseDateAndOrTime(o);if(d){if(n&&d.date){m.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{m.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(q){var n=this.constraints,o=n.regExp,f=n.validator,d={id:this.id,code:b.VALID,msg:""},m=this.dtp,l=(A[m]===1),e=H.isNumeric(m),g=(A[m]===3),h=(A[m]===6),k=U.isEmpty(q),p=String(q).length,j="",u=mstrmojo.locales.validation;if(this.required&&k){d.code=b.INVALID_EMPTY;d.msg=u.requiredFieldError;return d;}q=U.trim(q);if(!k&&P(this,q)){if(l){j=u.integerDataType;}if(e){j=u.numericDataType;}if(h){j=u.dateDataType;}d.code=b.INVALID_CHAR;d.msg=u.invalidCharError.replace("#",j);return d;}if(!k&&h&&R(this,q)){d.code=b.INVALID_BAD_DATESTRING;d.msg=u.invalidDateStringError;return d;}if(!k&&(e||l)&&K(this,q)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=u.invalidNumericFormatError;return d;}if(!k&&(l||e||h)&&c(this,q)){d.code=b.INVALID_OUTOFRANGE;if(n.min!==null&&n.max!==null){j=u.outofRangeError.replace("# ","").replace("##",Z.toLocaleString(n.min)).replace("###",Z.toLocaleString(n.max));}else{if(n.min!==null){j=u.noLessMinError.replace("##",Z.toLocaleString(n.min)).replace("# ","");}else{if(n.max!==null){j=u.noGreaterMaxError.replace("###",Z.toLocaleString(n.max)).replace("# ","");}}}d.msg=j;return d;}if(g&&n.minLen!==null&&n.maxLen!==null){if(p<n.minLen||p>n.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,n.minLen).replace(/##/,n.maxLen);return d;}}if(o&&!o.test(q)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var t=f&&f.apply(this,[q]);if(t){d.code=t.code;d.msg=t.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.expr","mstrmojo.array","mstrmojo.hash");mstrmojo.requiresDescs(308,5923,7930,5282,5283,2793,2787,2788,12298);var D=mstrmojo.string,S=mstrmojo.expr,M=S.ET,L=mstrmojo.array,R=mstrmojo.hash;var U=S.FN,K=S.BRANCH_FNS[U.NOT],Y=mstrmojo.mstr.EnumDSSXMLObjectTypes,H=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,N=mstrmojo.mstr.EnumDSSConsolidationType;function C(Z){return D.htmlAngles(Z)||"";}var A={betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),andText:mstrmojo.desc(5282,"AND"),orText:mstrmojo.desc(5283,"OR"),boldandText:"<span style='font-weight:bold;'>"+mstrmojo.desc(5282,"AND")+"</span>",boldorText:"<span style='font-weight:bold;'>"+mstrmojo.desc(5283,"OR")+"</span>",whereText:mstrmojo.desc(2793,"Where (##)"),notText:mstrmojo.desc(12298,"NOT")};var X={"*":function(a,Z){return{html:a?('<span class="mstrmojo-unknown">'+(C(a.n||a.xml)||"...")+"</span>"):null,text:a?(C(a.n||a.xml)||"..."):null};}};function V(Z){return !!Z.not||Z.fn===U.NOT_EQUAL||Z.fn===U.NOT_IN_LIST||Z.fn===U.NOT_BETWEEN||Z.fn===U.NOT;}function I(Z){if(Z&&Z.not){return{html:'<span class="mstrmojo-text mstrmojo-not">'+K+"</span>",text:K+" "};}return{html:"",text:""};}function T(b,a){var Z=b&&((a?'<span class="mstrmojo-ListIcon t'+a+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+C(b)+"</span>");return{html:Z,text:b&&((a?a+" ":"")+C(b))};}function Q(Z,b){var a=b&&b.trim().split(" ")||[];if(Z.t===Y.Attribute&&Z.st===H.AttributeRecursive){a.push("recursive");}else{if(Z.t===Y.Consolidation&&Z.st===H.ConsolidationManaged){a.push("derived");if(Z.ndetype===N.DssRecursiveDerivedElement){a.push("recursive");}}}return a.join(" ");}function G(a,Z){var b=C(a.n);return{html:'<span class="mstrmojo-text mstrmojo-attr '+Q(a,Z)+'">'+b+"</span>",text:b};}X[M.R]=function(a,Z){return T(a.r&&a.r.n,a.r&&a.r.t);};X[M.F]=function(a,Z){return T(a.f&&a.f.n,a.f&&a.f.t);};X[M.XML]=function(a,Z){return T(a.n||a.p&&a.p.n||a.xml,a.p&&a.p.t);};X[M.AE]=function(p,c){var m=[],j=[],b=(c&&c.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")";if(p&&p.a&&p.a.n){var a=G(p.a);m.push(a.html);j.push("{"+a.text+"}");var Z=C(S.fnName(p.et,p.fn,p.fnt));m.push('<span class="mstrmojo-text mstrmojo-fn">'+Z+"</span>");j.push(" "+Z+" ");var q=p.es,f=q&&q.length||0;if(f){m.push('<span class="mstrmojo-elems">');j.push("[");var g=m.length,o="";for(var n=0;n<f;n++){m[g++]='<span class="mstrmojo-text mstrmojo-elem">';o=C(q[n].n);m[g++]=o;j.push(o);if(n<f-1){m[g++]=", ";j.push(", ");}m[g++]="</span>";}m[g++]="</span>";j.push("]");}else{m.push('<span class="mstrmojo-text mstrmojo-emptyelems">'+b+"</span>");j.push(b);}}return{html:m.join(""),text:j.join("")};};X[M.AQ]=function(v,x){var r=[],g=[];if(v&&v.a&&v.a.n){var c=G(v.a);r.push(c.html);g.push("{"+c.text+"}");if(v.fm&&v.fm.n){var z=C(v.fm.n);r.push('<span class="mstrmojo-text mstrmojo-form">'+z+"</span>");g.push("("+z+")");if(v.fn!=null){var j=C(S.fnName(v.et,v.fn,v.fnt,v.fm.dtp));r.push('<span class="mstrmojo-text mstrmojo-fn">'+j+"</span>");g.push(" "+j+" ");var k=S.fnCstCount(v.fn,v.fnt);if(v.et===M.AC){if(k>=1){if(v.a2&&v.a2.n){var o=C(v.a2.n);r.push('<span class="mstrmojo-text mstrmojo-attr2">'+o+"</span>");g.push("{"+o+"}");if(v.fm2&&v.fm2.n){var u=C(v.fm2.n);r.push('<span class="mstrmojo-text mstrmojo-form2">'+u+"</span>");g.push("("+u+")");}}if(k>1){r.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");g.push(" "+A.betweenText+" ");if(v.a3&&v.a3.n){var a=C(v.a3.n);r.push('<span class="mstrmojo-text mstrmojo-attr3">'+a+"</span>");g.push("{"+a+"}");if(v.fm3&&v.fm3.n){var b=C(v.fm3.n);r.push('<span class="mstrmojo-text mstrmojo-form3">'+b+"</span>");g.push("("+b+")");}}}}}else{if(v.et===M.AL){var Z=v.cs||[],e=[];for(var p=0,q=Z.length;p<q;p++){e.push(Z[p].v);}var m=e.join(mstrConfig.listSep);r.push('<span class="mstrmojo-text mstrmojo-c1">'+m+"</span>");g.push("["+m+"]");}else{if(k>=1){var Z=v.cs,n=Z&&Z[0];var w=C(n&&n.p&&n.p.n||n&&n.v);r.push('<span class="mstrmojo-text mstrmojo-c1">'+w+"</span>");g.push(w);if(k>1){var l=Z&&Z[1];r.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");g.push(" "+A.betweenText+" ");var f=C(l&&l.p&&l.p.n||l&&l.v);r.push('<span class="mstrmojo-text mstrmojo-c1">'+f+"</span>");g.push(f);}}}}}}}return{html:r.join(""),text:g.join("")};};X[M.AC]=X[M.AQ];X[M.AL]=X[M.AQ];X[M.MQ]=function(x,z){var w=[],m=[],q=x&&x.m,AB=q&&q.n;if(AB){var a=x.fnt,f=S.FNT.PER,v=S.FNT.RANK;AB=a===f?mstrmojo.desc(2787,"Percentage of ##").replace("##",AB):a===v?mstrmojo.desc(2788,"Rank of ##").replace("##",AB):AB;w.push('<span class="mstrmojo-text mstrmojo-metric">'+C(AB)+"</span>");m.push(C(AB));if(x.fn!=null){var n=C(S.fnName(x.et,x.fn,a,S.DTP.REAL));w.push('<span class="mstrmojo-text mstrmojo-fn">'+n+"</span>");m.push(" "+n+" ");var o=S.fnCstCount(x.fn,a);if(x.et==S.ET.MC){if(o>=1){var AA=(x.m2&&x.m2.n)||(x.c2&&x.c2.v)||"?";w.push('<span class="mstrmojo-text mstrmojo-m2">'+C(AA)+"</span>");m.push(C(AA));if(o>1){w.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");m.push(" "+A.betweenText+" ");var c=(x.m3&&x.m3.n)||(x.c3&&x.c3.v)||"?";w.push('<span class="mstrmojo-text mstrmojo-m3">'+C(c)+"</span>");m.push(C(c));}}}else{if(o>=1){var b=x.cs,r=b&&b[0];var Z=function(h){var d=h.v;if(x.fnt==f){if(d.replace){h.v=d.replace(/%$/,"");}d=h.v+"%";}return d;};var k=C(r&&r.p&&r.p.n||r&&r.v&&Z(r));w.push('<span class="mstrmojo-text mstrmojo-c1">'+k+"</span>");m.push(k);if(o>1){var p=b&&b[1],l=C(p&&p.p&&p.p.n||p&&p.v&&Z(p));w.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");m.push(" "+A.betweenText+" ");w.push('<span class="mstrmojo-text mstrmojo-c2">'+l+"</span>");m.push(l);}}}var t=x.dmy&&x.dmy.uts,j=t&&t.length;if(j){w.push('<span class="mstrmojo-text mstrmojo-at">'+A.atText+"</span>");m.push(" "+A.atText+" ");w.push('<span class="mstrmojo-dmy">');for(var g=0;g<j;g++){var e=t[g];w.push('<span class="mstrmojo-text mstrmojo-dmyunit">');w.push(C(e.utgt?e.utgt.n:e.n));m.push(C(e.utgt?e.utgt.n:e.n));if(g<j-1){w.push(",");m.push(",");}w.push("</span>");}w.push("</span>");}}}return{html:w.join(""),text:m.join("")};};X[M.MC]=X[M.MQ];X[M.ANDOR]=function(k,b){var g=[],f=[],a=(b&&b.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")",c=R.valarray(S.findTargets(k,"did"))[0],e=true;function l(d){if(!e){g.push('<span class="spliter"></span>');f.push(", ");}e=false;if(d){f.push(mstrmojo.desc(12298,"NOT")+" ");}}if(!c){return{html:'<span class="mstrmojo-text mstrmojo-emptyelems">'+a+"</span>",text:a};}var Z=G(c,"andor");g.push(Z.html);f.push("{"+Z.text+"}");g.push("<span>:</span>");f.push(" : ");g.push('<span class="mstrmojo-elems">');f.push("[");L.forEach(k.nds,function j(m){if(!m){return ;}var d=V(m),t=m.fm,p=m.cs,n,q,h,o;switch(m.et){case M.ANDOR:L.forEach(m.nds,j);break;case M.AE:switch(m.fn){case U.IN_LIST:case U.NOT_IN_LIST:L.forEach(m.es,function(u){l(d);n=d?" not":"";q=C(u.n);g.push('<span class="mstrmojo-text mstrmojo-elem single'+n+'">'+q+"</span>");f.push(q);});break;case U.DESCENDANT:var r=(m.es||[]).slice();if(r.length===0){r.push({n:a});}L.forEach(r,function(v){l(d);n=d?" not":"";q=C(v.n);if(p&&p[0]){var u;o=p[0].v;if(isNaN(o)){h=o.substr(o.indexOf(";")+1);}else{h=mstrmojo.desc(493,"Level")+" "+(parseInt(o,10)+1);}u=h+" "+mstrmojo.desc(12853,"of")+" "+q;g.push('<span class="mstrmojo-text mstrmojo-elem level'+n+'">');g.push(u);f.push(u);}else{g.push('<span class="mstrmojo-text mstrmojo-elem descendant'+n+'">');g.push(C(v.n));f.push(q);}g.push("</span>");});break;}break;case M.AQ:L.forEach(m.cs,function(u){l(d);n=d?" not":"";o=u.v;h=(t&&t.n)?C(t.n+" "+o):"";if(t&&t.n==="LEVEL_NUMBER"){n+=" level";if(isNaN(o)){h=o.substr(o.indexOf(";")+1);}else{h=mstrmojo.desc(493,"Level")+" "+(parseInt(o,10)+1);}}g.push('<span class="mstrmojo-text mstrmojo-elem constant'+n+'">'+h+"</span>");f.push(h);});break;}});g.push("</span>");f.push("]");return{html:g.join(""),text:f.join("")};};function O(e,d){var b=X[e&&e.et]||X["*"],a=I(e),c=b&&b(e,d),Z=d&&d.emptyText||A.emptyText;return{html:a&&a.html+((c&&c.html)||('<span class="mstrmojo-text empty-cond">'+Z+"</span>")),text:a&&a.text+((c&&c.text)||Z)};}function F(Z){return O(Z).text;}function J(d,c,a){if(!d){return null;}var n=d.et,k=d.fn,Z=d.nds;if(n===M.ANDOR){var o=a?"bold":"";splitter=k===U.AND?A[o+"andText"]:(k===U.OR?A[o+"orText"]:"");Z=[].concat(Z);if(Z.length<1){return null;}var j=[],p;L.forEach(Z,function(q){p=J(q,false,a);if(p){j.push(p);}});var m,l=j.length;if(l<1){return null;}else{if(l===1){m=j[0];}else{m=j.join(" "+splitter+" ");}}m=c||d.not?m:"("+m+")";return d.not?A.notText+" "+m:m;}else{if(n===M.RLS){var h=d.dmy&&d.dmy.uts||[],f=[],e;L.forEach(h,function(q){f.push("{"+q.n+"}");});e=f.join(", ");var b=d.nds&&d.nds[0],g=J(b,false,a);if(g){return"("+e+" "+A.whereText.replace(/\(##\)/g,"").replace(/'##'/g,"")+g+")";}return null;}else{return F(d);}}}function B(Z){if(mstrmojo.fe.FilterUtils.isExprEmpty(Z)){return{et:14,fn:19};}else{((Z&&Z.nds)||[]).forEach(function(b,a){Z.nds[a]=B(b);});return Z;}}mstrmojo.fe.FilterUtils=mstrmojo.provide("mstrmojo.fe.FilterUtils",{getExprXml:function(f){var a="<exp>",Z="</exp>",d={a:true,a2:true,a3:true,agg:true,cc:true,ce:true,cgp:true,cs:true,conid:true,desc:true,did:true,attId:true,dmt:true,dmy:true,dtp:true,es:true,et:true,expr:true,f:true,flat:true,flt:true,fm:true,fm2:true,fm3:true,fn:true,fnt:true,fres:true,gb:true,isp:true,items:true,m:true,m2:true,m3:true,n:true,nds:true,not:true,pf:true,p:true,r:true,rps:true,st:true,t:true,utgt:true,utp:true,uts:true,v:true,xml:true,relation:true,applySubExpr:true,useSchema:true,guide:true,rsTp:true,joTp:true,paTp:true,erTp:true,exp:true,joAttrs:true,ph:true,idx:true,idc:true,idcsi:true,ucfg:true,node:true},c={getArrItemName:function(g){return g.substr(0,g.length-1);},isSerializable:function(r,p,o){if(r==="xml"){var j=p[o].xml;return{att:'hasXML = "-1"',child:j};}else{if(mstrmojo.array.indexOf(["header_format","grid_format","child_header_format","child_grid_format"],r)>-1){var t=p[o][r];if(!t){return{};}var l="<"+r+">";for(var q in t){l+="<prs n='"+q+"'>";var k=t[q];for(var g in k){var n=k[g];l+="<pr n='"+g+"' v='"+(n==="pru"?"":n)+"'";l+=n==="pru"?' pru="1"':"";l+="/>";}l+="</prs>";}l+="</"+r+">";return{child:l};}else{if(r==="cs"){var h=p[o],m=p[o][r];if(h&&h.fnt&&h.fnt==S.FNT.PER&&m){if(m[0]){m[0].v+="%";}if(m[1]){m[1].v+="%";}}return true;}else{if(r==="c2"||r==="c3"){var h=p[o];if(h&&h.et==S.ET.MC&&(h.fn==S.FN.BETWEEN||h.fn==S.FN.NOT_BETWEEN)){return true;}else{return false;}}}}}return(d[r])?true:false;},skipNull:true},b=B(f);if(!b||b.et!=M.ANDOR||b.fn===U.NOT||b.not){b={et:M.ANDOR,fn:S.FN.AND,nds:b?[b]:[]};}var e=D.json2xml("nd",[{},b],c);return a+e+Z;},isExprEmpty:function(Z){return(!Z||(Z.et===M.ANDOR&&(Z.nds||[]).length<1));},getExprConditionNodeHtml:function E(Z){return O(Z).html;},getExprConditionNodeText:function F(Z){return O(Z).text;},getExprNodeHtmlAndText:function P(a,Z){return O(a,Z);},getExprText:function W(a,Z){return J(a,true,Z);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.expr","mstrmojo.elementHelper","mstrmojo.mstr.EnumNodeProperties","mstrmojo.EnumSelectionType");var j=mstrmojo.array,T=mstrmojo.hash,Q=mstrmojo.expr,e=mstrmojo.elementHelper,Y=Q.ET,E=Q.FN,l=Q.DTP,C=mstrmojo.mstr.EnumNodeProperties,b=mstrmojo.EnumSelectionType;var AD=0,F=1,M=2,K=3,c=4,t=5;var m=0,AE="u;",X="LEVEL_NUMBER",W=false,J=7;function AC(AG){return AG.t===47&&AG.st===12033;}function S(AG,AH){if(AG&&AH&&AH.t===J){return AG.parent===AH&&AG.lv===AH.lv;}return false;}function k(AG){if(AG&&AG.t===J){return j.filter(AG.children,function(AH){return AH.lv===AG.lv;});}return[];}function AB(AG){return !!AG.not||AG.fn===E.NOT_IN_LIST||AG.fn===E.NOT_EQUAL;}function x(AG){return T.copyProps(["did","n","t","st"],AG);}function P(AJ,AG){var AI=AC(AG),AK=AI?AJ.v:e.terseLong2OldShort(AJ.v),AH={v:AK.replace(/\\:/g,"*:"),n:AJ.n};if(AI){AH.t=AJ.t;AH.conid=AG.did;}return AH;}function R(AJ,AH){if(parseInt(AJ,10)>=0){var AI=AH.lvfs||[],AG=AI[AJ]&&AI[AJ].lvfn||"";return{v:AG?AJ+";"+AG:AJ,dtp:AG?l.CHAR:l.INTEGER};}return null;}function w(AJ,AL,AI){var AG=e.getIdPresentation(AJ),AH=AC(AI);AJ=AJ.replace(/\*:/g,"\\:");switch(AL){case"old":case"oldLong":switch(AG){case"old":case"oldLong":return AJ;case"terse":case"terseLong":switch(AJ[0]){case"V":return AJ.substring(1).split(";")[0];case"n":return"HF:"+ +e.terseLong2OldShort(AJ)+":47";default:return e.terseLong2OldShort(AJ);}}break;case"terse":case"terseLong":switch(AG){case"old":return AH?("V"+AJ+";"+AI.did):e.oldShort2terseLong(AJ,"h");case"oldLong":switch(AJ.substring(0,2)){case"HF":var AK=AJ.substr(3).split(":");if(AK.length>3){AK.pop();}return e.oldShort2terseLong(AK.join(":"),"n");default:return AJ;}case"terse":case"terseLong":return AJ;}break;default:return AJ;}}function r(AG){if(isNaN(AG)&&typeof AG==="string"){return parseInt(AG.split(";")[0],10);}return parseInt(AG,10);}function n(AG){return !AG||AG.lv>0&&!AG.parent;}function Z(AG,AO,AN){var AL=AN.item,AI=AN.ancestorMap,AM=AN.descendantMap,AH=this.getItemByValue(AG.itemValue),AK=this.getItemByValue(AO.itemValue),AJ=function(AP,AQ){if(AL&&AL===AP&&AM){return AM[AQ.v];}if(AL&&AL===AQ&&AI){return AI[AP.v];}while(AQ){if(AP===AQ){return true;}AQ=AQ.parent;}return false;};switch(AG.func){case b.ALL:return AO.func===b.ALL?AD:K;case b.ELEMENT:switch(AO.func){case b.ALL:return M;case b.ELEMENT:return AH===AK?AD:S(AH,AK)?M:S(AK,AH)?K:t;case b.BRANCH:return AJ(AK,AH)?M:S(AK,AH)?c:n(AH)?F:t;case b.LEVEL:return AH.lv===AO.level?M:t;case b.BRANCH_LEVEL:return AH.lv!==AO.level?t:n(AH)?F:AJ(AK,AH)?M:t;}break;case b.BRANCH:switch(AO.func){case b.ALL:return M;case b.ELEMENT:return AJ(AH,AK)?K:S(AH,AK)?c:n(AK)?F:t;case b.BRANCH:return AH===AK?AD:(n(AH)||n(AK))?F:AJ(AK,AH)?M:AJ(AH,AK)?K:t;case b.LEVEL:return AH.lv<=AO.level?c:t;case b.BRANCH_LEVEL:return AH===AK?K:(n(AH)||n(AK))?F:AJ(AH,AK)?K:(AJ(AK,AH)&&AO.level>=AH.lv)?c:t;}break;case b.LEVEL:switch(AO.func){case b.ALL:return M;case b.ELEMENT:return AK.lv===AG.level?K:t;case b.BRANCH:return AK.lv<=AG.level?c:t;case b.LEVEL:return AG.level===AO.level?AD:t;case b.BRANCH_LEVEL:return AG.level===AO.level?K:t;}break;case b.BRANCH_LEVEL:switch(AO.func){case b.ALL:return M;case b.ELEMENT:return AK.lv!==AG.level?t:n(AK)?F:AJ(AH,AK)?K:t;case b.BRANCH:return AH===AK?M:(n(AH)||n(AK))?F:AJ(AK,AH)?M:(AJ(AH,AK)&&AG.level>=AK.lv)?c:t;case b.LEVEL:return AG.level===AO.level?M:t;case b.BRANCH_LEVEL:return AG.level!==AO.level?t:AH===AK?AD:(n(AH)||n(AK))?F:AJ(AK,AH)?M:AJ(AH,AK)?K:t;}break;}return F;}function D(AH,AL,AI,AM,AG){var AK=(AH.fs||[]).filter(function(AN){return(AN.n||AN.fnm)===X;})[0],AJ=j.ensureArray(AI).map(function(AN){return P(AN,AH);});switch(AL){case b.ELEMENT:if(AJ.length>0){return{et:Y.AE,fn:AG?E.NOT_IN_LIST:E.IN_LIST,a:x(AH),es:AJ};}break;case b.BRANCH:if(AJ.length>0){return{et:Y.AE,fn:E.DESCENDANT,not:AG,a:x(AH),es:AJ};}break;case b.LEVEL:if(AK&&parseInt(AM,10)>=0){return{et:Y.AQ,fn:E.EQUAL,not:AG,a:x(AH),fm:{did:AK.did||AK.fid,n:X,dtp:Q.mapBaseFormTypeToDataType(AK.bftp)},cs:[R(AM,AH)]};}break;case b.BRANCH_LEVEL:if(AJ.length>0&&parseInt(AM,10)>=0){return{et:Y.AE,fn:E.DESCENDANT,not:AG,a:x(AH),es:AJ,cs:[R(AM,AH),{v:18,dtp:l.INTEGER}]};}break;}return null;}function B(){var AG={};this.selectionList.forEach(function(AI,AH){if(AI.func===b.ELEMENT){AG[AI.itemValue]=AH;var AJ=this.getItemByValue(AI.itemValue);j.forEach(k(AJ),function(AK){AG[AK.v]=AH;});}},this);return AG;}function u(){var AG={};this.selectionList.forEach(function(AI,AH){if(AI.func===b.BRANCH){AG[AI.itemValue]=AH;}});return AG;}function A(){var AG={};this.selectionList.forEach(function(AI,AH){if(AI.func===b.LEVEL){AG[AI.level]=AH;}});return AG;}function h(){var AG={};this.selectionList.forEach(function(AJ,AH){if(AJ.func===b.BRANCH_LEVEL){var AK=AJ.itemValue,AL=AJ.level,AI=AG[AK];if(!AI){AI=AG[AK]={};}AI[AL]=AH;}});return AG;}function V(AI){var AH=u.call(this),AG=m;while(AI&&AI.v){AG=Math.max(AG,AH[AI.v]||m);AI=AI.parent;}return AG;}function p(AI,AK){var AG=h.call(this),AJ=A.call(this),AH=AK?m:V.call(this,AI),AM=AI&&AI.lv||0,AL={};if(!AK){T.forEach(AJ,function(AO,AN){if(AN>=AM&&AO>AH){AL[AN]=AO;}});}while(AI&&AI.v){T.forEach(AG[AI.v],function(AO,AN){if(AN>=AM&&AO>AH){AL[AN]=Math.max(AO,AL[AN]||AH);}});AI=AI.parent;}return AL;}mstrmojo.ui._HierarchyListSelection=mstrmojo.provide("mstrmojo.ui._HierarchyListSelection",{_mixinName:"mstrmojo.ui._HierarchyListSelection",init:function v(AG){this._super(AG);this.clearSelections();},getAllSelection:function I(){return !this.selectionList[m].isNot;},setAllSelection:function f(AG){this.selectionList[m].isNot=!AG;},clearSelections:function g(){this.selectionList=[{func:b.ALL,isNot:!W}];return this.selectionList;},addSelection:function U(AG){var AK=this.selectionList,AI=this.getItemByValue(AG.itemValue),AH={item:AI,ancestorMap:AI&&this.getItemAncestorMap(AI),descendantMap:AI&&this.getItemDescendantMap(AI)},AJ=true;if(!AI&&(AG.func===b.ELEMENT||AG.func===b.BRANCH||AG.func===b.BRANCH_LEVEL)){return ;}AK=this.selectionList=AK.filter(function(AL){var AN=Z.call(this,AL,AG,AH),AM=AL.isNot===AG.isNot;if(AN===K||AN===c&&!AM){AJ=!AM;}return !(AN===AD||AN===M);},this);if(AJ){AK.push(AG);}},updateSiblingItemSelection:function o(AH){var AJ=this.selectionList,AG=B.call(this),AI=u.call(this);j.forEach(AH,function(AO){var AL=AO.parent,AK=AL?V.call(this,AL):m,AM=AL?p.call(this,AL):A.call(this),AN=Math.max(AI[AO.v]||m,AK),AP=Math.max(AG[AO.v]||m,AN,AM[AO.lv]||m);AO.isSelected=!AJ[AP].isNot;AO.isBranchSelected=!AJ[AN].isNot;},this);},updateItemSelection:function N(AH){var AP=this.selectionList,AI=B.call(this),AQ=u.call(this),AL=A.call(this),AM=h.call(this),AJ=AH?[AH]:this.getRootItems(),AK=AH?[]:this.getItems().filter(function(AR){return AR&&n(AR);}),AG=AH?V.call(this,AH):m,AO=AH?p.call(this,AH,true):{};(AJ.concat(AK)).forEach(function AN(AV){var AT=AG,AS=T.copy(AO);AG=Math.max(AG,AQ[AV.v]||m);T.forEach(AM[AV.v],function(AY,AX){AO[AX]=Math.max(AY,AO[AX]||m);});var AW=Math.max(AI[AV.v]||m,AL[AV.lv]||m,AG,AO[AV.lv]||m);AV.isSelected=!AP[AW].isNot;AV.isBranchSelected=!AP[AG].isNot;j.forEach(AV.children,function(AX){AN.call(this,AX);},this);var AU=k(AV);if(AU.length>0){var AR=j.find(AU,"isSelected",true)>=0;if(AV.isSelected!==AR){this.addSelection({func:b.ELEMENT,itemValue:AV.v,isNot:!AR});AV.isSelected=AR;}}AG=AT;AO=AS;},this);},updateDescendantsStatus:function AF(){var AL=this.selectionList,AG=this.getMaxLevel(),AJ=u.call(this),AH=h.call(this),AI=m,AM=A.call(this);this.getRootItems().forEach(function AK(AW){var AO=AW.children||[],AS=AW.displayChildren||[],AU=AI,AV=T.copy(AM),AP=false;AI=Math.max(AI,AJ[AW.v]||m);T.forEach(AH[AW.v],function(AY,AX){AM[AX]=Math.max(AY,AM[AX]||m);});AO.forEach(function(AX){if(AK(AX)||!AX.hid&&AX.isSelected){AP=true;}});if(AW.hcd&&AS.length===0){var AQ=!AL[AI].isNot,AT,AN;for(var AR=AW.lv+1;AR<=AG;AR++){AT=AM[AR]||m;AN=AT>AI&&!AL[AT].isNot;if(AN||AQ&&AT<=AI){AP=true;break;}}}AW.hasDsctSelected=AP;AI=AU;AM=AV;return AP;});},getMaxLevel:function a(){var AG=0;this.getItems().forEach(function(AH){var AI=AH.lv;if(AI>AG&&!AH.hid){AG=AI;}});this.selectionList.forEach(function(AH){if(AH.func===b.LEVEL||AH.func===b.BRANCH_LEVEL){AG=Math.max(AG,AH.level);}});return AG;},getLevelSelection:function G(AG){var AK=this.selectionList,AI=AG?p.call(this,AG):A.call(this),AH=AG?AG.isBranchSelected:this.getAllSelection(),AJ={};T.forEach(AI,function(AN,AM){var AL=!AK[AN].isNot;if(AL!==AH){AJ[AM]=AL;}});return T.copy({allLevel:AH,isLevelSelected:function(AL){return this[AL]||this.allLevel&&this[AL]!==false;}},AJ);},buildSelectionExprJSON:function d(AI){var AK=this.getAllSelection(),AH=[],AL=null,AJ={selected:[],unselected:[]},AG=function(AM,AN){if(!T.isEmpty(AN)&&(AM.length>0||AK===AB(AN))){AM.push(AN);}};this.selectionList.forEach(function(AN){var AP=AN.func,AM=AN.isNot,AR=AN.level,AQ=AN.itemValue,AO=AQ?this.getItemByValue(AQ):null;if((AO||{}).fetcher){return ;}if(AN.func===b.ELEMENT&&!n(AO)){AJ[AM?"unselected":"selected"].push(AO);}else{if(AN.func!==b.ALL){AG(AH,D(AI,AP,AO,AR,AM));}}},this);AG(AH,D(AI,b.ELEMENT,AJ.selected));AG(AH,D(AI,b.ELEMENT,AJ.unselected,null,true));if(AH.length>0){AL=AH[0];AH.forEach(function(AP,AM,AO){var AN=AB(AP);if(AM>0){if(AN===AB(AO[AM-1])&&AL.nds){AL.nds.push(AP);}else{AL={et:Y.ANDOR,fn:AN?E.AND:E.OR,nds:[AL,AP]};}}});}if(AL){if(AL.et===Y.ANDOR){AL.node=C.CONDITION;}else{AL={et:Y.ANDOR,fn:E.AND,nds:[AL],node:C.CONDITION};}}return AL;},setSelectionByExprJSON:function q(AI){var AJ=this.clearSelections(),AH=false,AG=this.getItems(),AL=e.getIdPresentation(AG[0]&&AG[0].v),AK=function(AN,AO){if(T.isEmpty(AN)){return ;}if(AN.et===Y.ANDOR){(AN.nds||[]).forEach(function(AP){AK.call(this,AP,AO);},this);}else{var AM=AB(AN);if(!AH){AH=true;this.setAllSelection(AM);}if(AN.et===Y.AQ&&AN.fm&&AN.fm.n===X){(AN.cs||[]).forEach(function(AQ){var AP=r(AQ.v);if(AP>=0){AO.push({func:b.LEVEL,level:AP,isNot:AM});}});}if(AN.et===Y.AE){(AN.es||[]).forEach(function(AP){var AQ=w(AP.v,AL,AN.a),AR=r(AN.cs&&AN.cs[0].v);if(!this.getItemByValue(AQ)){this.addItems([T.copy({v:AQ,dhid:true},T.clone(AP))],true);}if(AN.fn===E.DESCENDANT){if(AR>=0){AO.push({func:b.BRANCH_LEVEL,itemValue:AQ,level:AR,isNot:AM});}else{AO.push({func:b.BRANCH,itemValue:AQ,isNot:AM});}}else{AO.push({func:b.ELEMENT,itemValue:AQ,isNot:AM});}},this);}}};AK.call(this,AI,AJ);this.updateItemSelection();},setSelectionByList:function L(AH,AG){var AI=[],AJ=false;j.forEach(AH,function(AK){var AL=AK.v;if(AL===AE){AJ=true;return false;}if(!this.getItemByValue(AL)){this.addItems([AK],true);}AI.push({func:b.ELEMENT,itemValue:AL,isNot:!AG});},this);this.clearSelections();if(!AJ){this.setAllSelection(!AG);this.selectionList=this.selectionList.concat(AI);}this.updateItemSelection();},onSelectionChange:function O(AH,AG,AI,AJ){if(AH===b.ALL){this.clearSelections();this.setAllSelection(AG);}else{this.addSelection({func:AH,itemValue:AI&&AI.v,level:AJ,isNot:!AG});}if(this.postSelectionChange){this.postSelectionChange();}},postAddItems:function H(AG){this.updateItemSelection();},postAddSiblingItems:function AA(AH,AG){this.updateSiblingItemSelection(AH);},postAddBranchItems:function z(AH,AG){this.updateItemSelection(AG);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.num","mstrmojo.array","mstrmojo.DICFactory");var F=1,J=0,M=1,O=2,G=".",I=mstrmojo.dom,K=mstrmojo.css,E=mstrmojo.hash,D=mstrmojo.Enum_Keys.TAB,H=function(R){return(R>=1&&R<=7)||R==21||R==22||R==30;},C=function(U,S){if(I.isIE&&!/px$/.test(S)){var R=document.createElement("img"),T;R.style.zIndex=-1;R.style.left=S;U.appendChild(R);T=R.style.pixelLeft;U.removeChild(R);return T+"px";}return S;},B=function(R,S){return parseInt(C(R,K.getStyleValue(R,S)),10)||0;},N=function(R){return{lp:B(R,"paddingLeft"),rp:B(R,"paddingRight"),tp:B(R,"paddingTop"),bp:B(R,"paddingBottom")};},Q=function(S){var R=K.getComputedStyle(S)||S.currentStyle;return{fontFamily:R.fontFamily,fontSize:C(S,R.fontSize),fontStyle:R.fontStyle,fontVariant:R.fontVariant,fontWeight:R.fontWeight,textAlign:R.textAlign};},P=function(T,R){var S=mstrmojo.findAncestor(T,"scriptClass","mstrmojo.DocInfoWindow");if(!!S){S[R?"registerLock":"releaseLock"](this);}};mstrmojo._IsInputControl={_mixinName:"_IsInputControl",dic:null,owner:null,openerNode:null,popupStyle:J,items:null,applyOnEnter:true,lv:null,init:function(U){if(this._super){this._super(U);}var W=this.dic,V=W.dt,T=mstrmojo.expr.DTP,S,R=[];if(mstrApp.useBinaryFormat){if(V==T.DATE||V==T.TIME||V==T.TIMESTAMP){S=mstrmojo.date.parseDateAndOrTime(this.value);if(S){if(V!=T.TIME){R.push(mstrmojo.date.formatDateInfo(S.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}if(V!=T.DATE){R.push(mstrmojo.date.formatTimeInfo(S.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}this.value=R.join(" ");}}}this.lv=this.value;if(W.wm&&W.w===undefined){W.wm=0;}},showByDefault:false,hasPreview:false,getItems:function(){var Y=this.dic,S=[],W,U,R=0,V=String(Y.itv),T=V&&V.indexOf(G),X=H(Y.dt);if(T>=0){R=V.substring(T+1).length;}if(parseInt(Y.ipt,10)===0){for(W=0,U=Y.min;U<Y.max+0.00001;W++,U+=Y.itv){S[W]={n:mstrmojo.num.toLocaleString(R>0?U.toFixed(R):U),v:U};}}else{S=Y.vls;mstrmojo.array.forEach(S,function(Z){if(Z.n===undefined){Z.n=X?mstrmojo.num.toLocaleString(Z.v):Z.v;}});}return S;},font:null,onfontChange:function(){if(this.getInputNode){var R=this.getInputNode(),S=this.font;E.forEach(S,function(U,T){R.style[T]=U;});}},getOpenerNodeStyle:function(){var R=this.group&&this.group.ons,S=this.openerNode;if(!R){R=N(S);R.hp=R.lp+R.rp;R.vp=R.tp+R.bp;R.iw=Math.max(0,S.clientWidth-R.hp);R.ih=Math.max(0,S.clientHeight-R.vp);if(this.group){this.group.ons=R;}}return R;},onvalueChange:function(){if(this._super){this._super();}this.dicChanged=true;if(this.showByDefault&&(!this.isDicWidgetReady||this.isDicWidgetReady())){this.applyChanges();}else{if(this.popupStyle!==J&&this.popup&&this.popup.enableApply){this.popup.enableApply();}}},preBuildRendering:function(){if(this._super){this._super();}this.openerNode=this.openerNode||this.owner.domNode;if(this.showByDefault){this.openerStyle=this.getOpenerNodeStyle();if(this.inlineExtraCssText){this.cssText+=" "+this.inlineExtraCssText;}}if(!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}},postBuildRendering:function(){var U=this.openerNode;if(this._super){this._super();}if(!mstrmojo.isDescendant(this.owner,this)){if(this.showByDefault){var T=this.domNode;if(!(this.handleDisable()||this.enabled)){var R=document.createElement("div"),S=document.createElement("div");R.className="DIC-Container";S.className="curtain";R.appendChild(T);R.appendChild(S);T=R;}U.innerHTML="";U.appendChild(T);}if(this.dic.t===1||this.dic.t===8){this.set("font",Q(U));}}if(mstrmojo.DICConfig.isKeyNavigable(this.dic)){this.registerKeyEvents(this.domNode);}},applyChanges:function(){var X=this.lv,R=this.getCurValue?this.getCurValue():this.value,W=this.openerNode,T=this.getDisplayValue?this.getDisplayValue():R,V=this.dic.dt,S=mstrmojo.expr.DTP,U=mstrmojo.locales.datetime;if(String(R)!==String(X)){if(mstrApp.useBinaryFormat){if(V==S.TIME||V==S.TIMESTAMP){R=R.replace(new RegExp(U.AM_NAME),"AM").replace(new RegExp(U.PM_NAME),"PM");}}this.lv=R;this.dv=T;if(this.owner&&this.owner.dataChanged){this.owner.dataChanged(this.k,X,{dv:T,v:R},W,this.dic.k);}}return true;},cancelChanges:function A(){this.value=this.lv;},isElementVisible:function L(R){const S=R.getBoundingClientRect();return(S.top>=0)&&(S.left>=0)&&(S.bottom<=(window.innerHeight||document.documentElement.clientHeight))&&(S.right<=(window.innerWidth||document.documentElement.clientWidth));},showInPopup:function(){var S=this.owner;var R=this.openerNode;if(!this.isElementVisible(R)){R.scrollIntoView({block:"nearest"});}this.popup=mstrmojo.DICFactory.createDICPopup(S,this);this.popup.open(S,{widget:this});if(this.focus&&!mstrApp.useBinaryFormat){this.focus();}this.setInfoWindowLock(true);},lockPopup:function(){this.setInfoWindowLock(false);},renderPreview:null,onTabDown:function(R){mstrmojo.dom.preventDefault(window,R);if(this.applyChanges()!==false){if(this.popup){this.popup.close();}this.owner.editNext(this.k);this.cleanup();}},cleanup:mstrmojo.emptyFn,registerKeyEvents:function(S){var R=this;I.attachEvent(S,"keydown",function(T){var U=T||window.event;if(U.keyCode===D){R.onTabDown(T);}});if(I.isIE){I.attachEvent(S,"keyup",function(T){var U=T||window.event;if(U.keyCode===D){R.focus();}});}},setInfoWindowLock:function(R){P.call(this,this.owner,R);},handleDisable:function(){return true;}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.num","mstrmojo.locales");var D=mstrmojo.array,A=mstrmojo.num,B=mstrmojo.locales;mstrmojo.vi.util.NumberFormatUtility=mstrmojo.provide("mstrmojo.vi.util.NumberFormatUtility",{applyFormatToNumber:function C(P,Q,G){var H="\u00A4",L=/"[^"]*"/g,F=P.match(L),K=P.replace(L,H),O=["m","y","d","h","s"],N=G||false,E=new Date(),M=E.getFullYear(),J=E.getMonth(),I=E.getDay(),S=B.datetime,R;D.forEach(O,function(T){N=N||K.indexOf(T,0)!==-1;});if(N){K=K.replace(/y{3,}/g,M).replace(/y{1,2}/g,M.toString().slice(2,4));K=K.replace(/m{4,}/g,S.MONTHNAME_FULL[J-1]).replace(/m{3}/g,S.MONTHNAME_SHORT[J-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");K=K.replace(/d{4,}/g,S.dayNames[I-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");K=K.replace(/hh/g,"08").replace(/h/g,"8");K=K.replace(/ss/g,"04").replace(/s/g,"4");K=K.split(H);R=K[0];D.forEach(F,function(U,T){R+=U+K[T+1];});return R;}if(A.isNumeric(Q)){return A.formatByMask(P,A.parseNumeric(Q));}return Q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.hash","mstrmojo.string","mstrmojo.array","mstrmojo._FormatDefinition");var B=mstrmojo.num,G=mstrmojo.hash,F=mstrmojo.string,C=mstrmojo.array,E=mstrmojo._FormatDefinition.NumberFormatCategory;mstrmojo.MetricSelectorUtility=mstrmojo.provide("mstrmojo.MetricSelectorUtility",{_GENERIC:1,_RANK:2,_PERCENT:3,OP:{_EQUALS:0,_NOT_EQUALS:1,_GREATER:2,_GREATER_EQUAL:3,_LESS:4,_LESS_EQUAL:5,_BETWEEN:6,_NOT_BETWEEN:7,_IN:8,_NOT_IN:9,_IS_NULL:10,_IS_NOT_NULL:11},OP_NAMES:[{n:mstrmojo.desc(2795,"Equals"),v:0},{n:mstrmojo.desc(2796,"Does not equals"),v:1},{n:mstrmojo.desc(521,"Greater than"),v:2},{n:mstrmojo.desc(522,"Greater than or equal to"),v:3},{n:mstrmojo.desc(523,"Less than"),v:4},{n:mstrmojo.desc(524,"Less than or equal to"),v:5},{n:mstrmojo.desc(696,"Between"),v:6},{n:mstrmojo.desc(746,"Not between"),v:7},{n:mstrmojo.desc(587,"In"),v:8},{n:mstrmojo.desc(2204,"Not In"),v:9},{n:mstrmojo.desc(2202,"Is null"),v:10},{n:mstrmojo.desc(2203,"Is not null"),v:11}],RANK_OP_NAMES:[{n:mstrmojo.desc(529,"Highest"),v:1},{n:mstrmojo.desc(530,"Lowest"),v:2},{n:mstrmojo.desc(4407,"Highest %"),v:3},{n:mstrmojo.desc(4406,"Lowest %"),v:4}],Q:{_G:0,_RT:1,_RB:2,_PT:3,_PB:4},MRPFN:{TOP:1,BOTTOM:2,BETWEEN:3,EXCLUDETOP:4,EXCLUDEBOTTOM:5,NOTBETWEEN:6,EQUALS:7,DIFFERENTFROM:8,EQUALSDESCENDING:15,NOTEQUALSDESCENDING:16,GREATERTHANDESCENDING:4,GREATERTHANEQUALSDESCENDING:18,LESSTHANDESCENDING:20,LESSTHANEQUALSDESCENDING:1,BETWEENDESCENDING:13,NOTBETWEENDESCENDING:14,INDESCENDING:22,NOTINDESCENDING:24,EQUALSASCENDING:7,NOTEQUALSASCENDING:8,GREATERTHANASCENDING:5,GREATERTHANEQUALSASCENDING:17,LESSTHANASCENDING:19,LESSTHANEQUALSASCENDING:2,BETWEENASCENDING:3,NOTBETWEENASCENDING:6,INASCENDING:21,NOTINASCENDING:23},FN:{EQUALS:6,NOTEQUALS:7,GREATERTHAN:8,GREATERTHANEQUALS:10,LESSTHAN:9,LESSTHANEQUALS:11,BETWEEN:17,NOTBETWEEN:44,ISNULL:54,ISNOTNULL:55,IN:22,NOTIN:57,CONTAINS:76,NOTCONTAINS:79,BEGINSWITH:77,NOTBEGINSWITH:80,ENDSWITH:78,NOTENDSWITH:81,LIKE:18,NOTLIKE:43,AND:19,OR:20,NOT:21,RANK:23,RANKPERCENT:59,TUPLE:1000},F:[[6,7,8,10,9,11,17,44,22,57,54,55],[15,16,4,18,20,1,13,14,22,24],[7,8,5,17,19,2,3,6,21,23]],EnumNumberCategory:{Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10},typeHelperCls:{0:"MetricValueSliderHelper",defaultCls:"MetricRankSliderHelper"},ErrorType:{_GENERIC:mstrmojo.desc(11689,"Invalid Number"),_RANK:mstrmojo.desc(11856,"Please enter value between ## and ###.")},ErrorCode:{EmptyValue:"emptyValueVIWarning",InvalidValue:"invalidValueVIWarning",OutOfRange:"outOfRangeVIWarning",NotInteger:"notIntegerVIWarning"},getQuaByFunc:function(L,M){var I=this.F,H=this.Q,K=H._G,J=function(N){return C.indexOf(I[1],N)!==-1;};if(J(L)){K=(M===this._RANK)?H._RT:H._PT;}else{K=(M===this._RANK)?H._RB:H._PB;}return K;},getFuncInfo:function(K,L){var J={},I=this.Q,H=this.F;J[I._G]={ft:this._GENERIC,f:H[0][K]};J[I._RT]={ft:this._RANK,f:H[1][K]};J[I._RB]={ft:this._RANK,f:H[2][K]};J[I._PT]={ft:this._PERCENT,f:H[1][K]};J[I._PB]={ft:this._PERCENT,f:H[2][K]};return J[L]||{};},getOpIdxByfunc:function(J,K){if(!J||!K){return -1;}var H=this.F,I=-1;switch(K){case this._GENERIC:I=C.indexOf(H[0],J);break;case this._RANK:case this._PERCENT:I=C.indexOf(H[1],J);if(I===-1){I=C.indexOf(H[2],J);}break;}return I;},getIncludeByOp:function(I){var H=this.OP;return I===H._EQUALS||I===H._GREATER_EQUAL||I===H._LESS_EQUAL||I===H._BETWEEN||I===H._IN;},formatNumber:function(J,L,I){var M,K=this.Q,N=I.fm,H=I.cat;if(!B.validateFormat(N)){N="#,##0.00;(#,##0.00)";}if(J===K._G){M=(N)?B.formatByMask(N,L):B.format(I.cat,I.dp,I.curr,L);}else{if(J===K._RB||J===K._RT){M=String(parseInt(L,10));}else{if(J===K._PB||J===K._PT){M=parseFloat(L)+"%";}}}if((H===E.Fixed||H===E.Currency||H===E.Percentage)&&L<0&&!F.startsWith(M,"(")&&!F.startsWith(M,"-")){M="-"+M;}return M;},doValidation:function(T,L,P,N){var O=L.qua,R=L.low,K=L.high,M=this.Q,U=O===M._RT||O===M._RB,H=O===M._PT||O===M._PB,S="",J,I=this.ErrorCode;if(F.isEmpty(T)){S=I.EmptyValue;}else{if(!(B.isNumeric(T)||(H&&String(T).match(/^\d+(\.\d+)?%$/))||(N&&!H&&B.isBigDecimal(T)))){S=I.InvalidValue;}else{if((O===M._PT||O===M._PB)&&B.inNumericRange(parseFloat(T),R,K)){S=I.OutOfRange;J=H?["0","100%"]:[R,K];}else{if(U&&(!B.isInt(T)||B.parseInteger(T,10)<0)){S=I.NotInteger;}}}}return G.copy(P,{invalid:!!S,errorCode:S,args:J||[]});},restoreMetricSelectorProps:function D(I,H){if(!I||!H){return ;}G.copyProps(["max","min","cnt","dt","nov"],H,I);},restoreMetricSelectorSelections:function A(I,H){if(!I||!H){return ;}G.copyProps(["f","ft","cs"],H,I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.expr","mstrmojo.func","mstrmojo.css","mstrmojo.UUID","mstrmojo.fe.FilterUtils","mstrmojo.desc");var Q=mstrmojo.func,L=mstrmojo.hash,J=mstrmojo.array,N=mstrmojo.expr,T=mstrmojo.css,R=N.DTP,F=mstrmojo.UUID,U=mstrmojo.fe.FilterUtils,T=mstrmojo.css;var H=16,E=32;function O(Z,Y,b){var W=L.copyProps(["did","t","st","n"],Z),X=(Z.fs||[]).filter(function(c){return c.fnm==="LEVEL_NUMBER"||c.n==="LEVEL_NUMBER";})[0],a;if(Y){a={et:N.ET.AE,fn:N.FN.DESCENDANT,a:W,es:[{v:Y.v,n:Y.n}]};if(parseInt(b,10)>=Y.lv){a.cs=[{v:b-Y.lv,dtp:R.INTEGER},{v:2,dtp:R.INTEGER}];}}else{if(parseInt(b,10)>=0&&X){a={et:N.ET.AQ,fn:N.FN.EQUAL,a:W,fm:{did:X.did||X.fid,n:X.n||X.fnm,dtp:R.INTEGER},cs:[{v:b,dtp:R.INTEGER}]};}}return a?U.getExprXml(a):"";}mstrmojo.ui._IsIncFetchHierarchyList=mstrmojo.provide("mstrmojo.ui._IsIncFetchHierarchyList",{_mixinName:"mstrmojo.ui._IsIncFetchHierarchyList",blockCount:500,getDataHelper:mstrmojo.emptyFn,getAttribute:mstrmojo.emptyFn,isHiearachyDisplay:mstrmojo.emptyFn,getItemMarkup:function C(Y,W){var X;if(Y.fetcher){X='<{@tag} class="item fetcher {@cls}" idx="{@idx}" style="{@style}"><span class="indent" style="padding-left: {@indent}px;"></span><span class="text">{@en@n}</span></{@tag}>';}else{X=this._super(Y,W);}return X;},isFetcher:function K(W){if(W instanceof HTMLElement){W=this.getItemFromTarget(W);}return W&&W.fetcher;},fetchItems:function I(W,X){this._super(W,Q.wrapMethods(this.getFetchItemsCallback(W),X));},fetchItemsThroughTaskCall:function P(a,f){var Z=this.getDataHelper(),Y=this.getAttribute();if(Z&&Y&&!this.isFetching){this.set("isFetching",true);var c=this,d=a.branch,W=parseInt(a.level,10),b=a.blockBegin||1,e=a.blockCount||this.blockCount,X=a.browseFlags||0;Z.set("browseConfig",L.copy({blockBegin:b,blockCount:e,browseFlags:X,expressionXML:(d||W>=0)?O(Y,d,W):"",otp:Y.t,compress:1},L.copy(Z.browseConfig)));Z.getItems(b,Q.wrapMethods({success:function(g){if(g){L.copy({bb:b,bc:e},g);J.forEach(g.es,function(h){if(!h.pid&&h.pi>-1){h.pid=g.es[h.pi].v;delete h.pi;}L.copy({lv:h.lv||0,hcd:!!h.hcd,hid:!!h.hid,dhid:!!h.hid,pid:h.pid||""},h);});}}},f,{complete:function(g){c.set("isFetching",false);}}),{hideFailureErr:f.failure});}},getFlatDisplayItems:function B(W){return W.filter(function(X){var Y=X.fhid;delete X.fhid;return !Y;});},getFetchItemsCallback:function M(Z){var Y=this,X=Z.branch,a=parseInt(Z.level,10),W=this.isHiearachyDisplay();return{success:function(b){if(b&&b.es){var d=b.es,c=b.bb+b.bc-1;if(b.sz>c&&!b.raad){d.push({v:"fetcher"+F.create(),n:mstrmojo.desc(1005,"More..."),fetcher:true,lv:W?(a>=0?a:(X?X.lv+1:0)):-1,config:L.copy({blockBegin:c+1},L.copy(Z))});}if(!W){d.forEach(function(g){var h=g.hid,f=Y.getItemByValue(g.v);delete g.epd;delete g.hid;if(f){delete g.hcd;}L.copy({fhid:h,dhid:!f||f.dhid},g);});}if(Y.setDisplayParent){Y.setDisplayParent(d,null,true);}}}};},getMaxLevel:function A(){var W=this.getAttribute(),X=(W&&W.lvfs||[]).length;if(X>0){return X-1;}return this._super?this._super():0;},getLevels:function D(){var W=this.getAttribute(),X=W&&W.lvfs||[];return X.map(function(Z,Y){return{v:Y,n:Z.lvfn};});},initElements:function S(b){if(this.isHiearachyDisplay()){delete this.displayRoots;var Y=this.getItems(),X=Y.length,a,W;if(X>0){if(this.raad){for(var Z=X-1;Z>-1;Z--){a=Y[Z];if(a.fetcher&&a.fake){a.hid=true;W=J.find(a.parent&&a.parent.children,"idx",a.idx);if(W>-1){a.parent.children.splice(W,1);}W=J.find(a.displayParent&&a.displayParent.displayChildren,"idx",a.idx);if(W>-1){a.displayParent.displayChildren.splice(W,1);}}}}this.refresh();}else{this.fetchItems({browseFlags:E},b);}}else{this.clearItemsNode();this.fetchItems({blockCount:500,browseFlags:H},b);}},clearItemsNode:function G(){var W=this.itemsContainerNode;if(W){W.innerText="";this.updateScrollbars();}},onclick:function V(g){var d=g.getTarget(),X=this.getItemNodeFromTarget(d),h=this.getItemFromTarget(d);if(h&&h.fetcher){if(T.hasClass(d,"text")){if(h.fake){var c=function(j){if(j.displayParent){if(!j.displayParent.hid){return j.displayParent;}else{return c(j.displayParent);}}},a=c(h),Z=a?a.displayChildren:this.getDisplayRoots(),e=this.items,W=h.config.nextSiblingIdx,b=this.blockCount,Y=W+b,f;if(Z.length-1>Y){f=Z.slice(W,Y);h.config.nextSiblingIdx+=b;h.lv=f[f.length-1].lv;f.push(h);}else{Z.pop();if(h.parent){h.parent.children.pop();}e.splice(J.find(e,"idx",h.idx),1);f=Z.slice(W,Z.length);}X.outerHTML=this._buildSiblingsMarkup(f).join("");this.updateScrollbars();}else{this.fetchItems(h.config,{success:function(j){h.hid=true;X.outerHTML="";}});}}g.cancel();}else{this._super(g);}},});}());(function(){mstrmojo.requiresCls("mstrmojo.StringBuffer","mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo._IsGraphDataService","mstrmojo.func","mstrmojo._ImageHelper","mstrmojo.fe.FilterUtils","mstrmojo.rw.model.RetrievalKeysConfig","mstrmojo.rw.model.UpdateKeysConfig");var d=mstrmojo.hash,B=d.copy,U=mstrmojo.array,AX=mstrmojo.dom,x=mstrmojo.func,AN=[mstrmojo.desc(8445,"Loading")],AE=mstrmojo.fe.FilterUtils.getExprXml,Aq=mstrmojo.array.ensureArray,P=0;function W(BU){BU=BU||{};BU.preserveUndo=true;return BU;}function An(BY,BZ,BU){if(this.blockRequests){throw ("The data service is currently ignoring all requests to the server.");}var BV=P++,BX=this.getTxUpdates(BV);BU=BU||{};BU.src=An.caller.name;if(!mstrmojo.string.isEmpty(BX)){BY.updateChanges=BX;}BY.zoomFactor=this.model.getZoomFactor();var BW=this.cmdMgr;if(!BU.preserveUndo&&BW){BW.onSubmitUpdates();}mstrApp.serverRequest(BY,this.wrapCallback(BZ,BV,BU.preserveStid),BU);}function N(BW,BV,BU){d.copy({unitType:BV.defn&&BV.defn.t,unitKey:BV.k},BW);if(BU.layoutKey){d.copy({toKey:BU.layoutKey,analysisSectionType:BU.analysisSectionType},BW);}else{d.copy({toKey:BU.parentKey},BW);}return BW;}function At(BV){BV=BV||{};if(mstrApp.optimizeFitToPage){var BU=window.mstrMobileApp?this.model.controller.getContentDimensions():mstrApp.getContentDimensions();if(BU){BV.styleName="RWDocumentMobileStyle";BV.availableWidth=BU.w;BV.availableHeight=BU.h;}else{BV.innerWidth=mstrmojo.dom.windowDim().w;BV.innerHeight=mstrmojo.dom.windowDim().h;}}return BV;}function BP(BV){var BU=BV&&BV.style,BW=BU&&BU.params;return BW&&BW.treesToRender;}function C(BU,BV){return{act:"moveUnit",toKey:BU,unitType:BV};}function As(BU){return BU.split("\u001E")[2];}function M(BV,BZ){if(BV!==mstrmojo.DocDataService.UNDO_KEY){return BV;}if(!this.undoSectionKey){var BY=this.undoSectionKey=this.model.getNextKey(),BW=this.undoFGKey=this.model.getNextKey();BZ.addActions({act:"addUndoSection",cbKey:this.cbKey,nodeKey:BY,fgKey:BW});var BX=this;BZ.addCallbacks({failure:function BU(){delete BX.undoSectionKey;}});}return this.undoSectionKey;}function Am(BW,BV){var BU={dsid:BW.dsid,formula:BW.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BW.tokenStreamXML),name:BW.alias,afb:BW.afb,sfb:BW.sfb};if(BV){BU.Ids=["$GUID_135"];}return this.getAddDerivedMetricToDatasetAction(BU);}function L(BV){var BU="USE_DEFAULT_INDICATOR";BV=BV||{};BV.mptso=BV.mptso||{pru:true};BV.mptsim=BV.mptsim||{pru:true};BV.mptfms=BV.mptfms||"";return{MDXPassThrough:{SolveOrder:BV.mptso.pru?BU:BV.mptso.v,ScopeIsolationMode:BV.mptsim.pru?BU:BV.mptsim.v,FormatString:BV.mptfms}};}function AJ(BU,BV){return{act:"formatDerivedMetric",dsid:BU.dsid||"",mid:(BV||!BU.did)?"$GUID_135":BU.did,format:L(BU.mptf),};}function AM(BX,Ba,BV,Bb,BU,BW){var BY=[this.getNodeKeyFromKeyContext(Ba)];if(!BW){BY=Aq(Bb).concat(BY);}var BZ={act:BX,keyContext:Ba,tgtKey:BV,partialRetrieval:{nodes:BY}};if(!BU){BZ.partialUpdate={selectors:[As(Ba)]};}return BZ;}function m(BW){var BY=false;if(BW===1||BW===2){var BV=this.model,BU=BV.controller,BZ=BU.getRequiredZoomFactor&&BU.getRequiredZoomFactor(BW),BX=BV.getZoomFactor();if(isNaN(BZ)||parseInt(Math.abs((BZ-BX)*100),10)<=2){BY=false;}else{BY=true;}}return BY;}mstrmojo.DocDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsGraphDataService,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.DocDataService",defaultStyle:{params:{treesToRender:2}},cmdMgr:null,stid:-1,blockRequests:false,clientAuto:false,init:function Ak(BU){this._super(BU);this.cmdMgr=this.model.controller&&this.model.controller.cmdMgr;},wrapCallback:function Ad(BZ,BW,BV){var BX=this;return x.wrapMethods({success:function BY(Ba){if(Ba){BX.model.bs=BX.rwb=Ba.bs||BX.rwb;BX.msgId=Ba.mid||BX.msgId;BX.cbKey=Ba.cbKey||BX.cbKey;if(Ba.stid!==undefined&&!BV){BX.stid=Ba.stid;}if(Ba.clientAuto!==undefined){BX.clientAuto=Ba.clientAuto;}if(mstrApp.parseSecondaryDataProviders){mstrApp.parseSecondaryDataProviders(Ba);}}BX.clearTxUpdates(BW);},failure:function BU(){BX.resetTxUpdates(BW);}},BZ);},getNodeKeyFromKeyContext:function Y(BU){return BU.split("\u001E")[1];},refresh:function A0(BW,BX){var BV=!!BW.useRefreshProgress,BU=BV?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:AN;delete BW.useRefreshProgress;BW=At.call(this,BW);An.call(this,B(BW,{taskId:"docRefresh",rwb:this.rwb,rePrompt:false,fresh:false,regenerate:false,displayNoResErr:true,compress:1}),BX,{showProgress:true,hideProgress:true,progressStateText:BU,useRefreshProgress:BV});},saveRW:function A4(BU,BV){An.call(this,B(BU,{taskId:"saveRW",msgID:this.msgId}),BV);},saveThresholds:function h(BV,BW,BU){An.call(this,B(BV,{taskId:"saveThresholds"}),BW,BU);},getThresholds:function BI(BV,BW,BU){An.call(this,B(BV,{taskId:"getThresholds"}),BW,BU);},browseElements:function AI(BV,BW,BU){An.call(this,B(BV,{taskId:"browseElements",styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30}),BW,BU);},removeUnit:function X(BV,BW){var BU=B(BV,{act:"removeUnit"});this.submitTemplateUpdates(BU.nodeKey,BU,BW);},removeLayout:function AR(BV,BU,BW){this.submitUpdates({act:"removeLayout",unitKey:BV,isCurrent:BU},BW);},moveLayout:function v(BW,BU,BV){this.submitUpdates(this.getMoveNodeAction(BW,BU,BV),mstrmojo.DocDataService.EMPTY_CALLBACK,mstrmojo.DocDataService.SUPPRESS_DATA);},getMacroCopyNodeAction:function Ao(BV,BU,BX){var BW={act:"macroCopyUnit",newKey:BX,partialRetrieval:this.newRetrievalKeysConfig().addNode(BX)};N(BW,BV,BU);return BW;},getMacroMoveNodeAction:function AD(BV,BU){var BW={act:"macroMoveUnit",partialRetrieval:this.newRetrievalKeysConfig().addNode(BV.k)};N(BW,BV,BU);return BW;},getMoveNodeAction:function q(BY,BU,BV){var BX=BY.defn,BW=BX?BX.t:mstrmojo.EnumRWUnitType.LAYOUT;return this.getMoveNodeActionUsingKey(BY.k,BW,BU,BV);},getMoveNodeActionUsingKey:function A7(BY,BW,BU,BV){var BX=C(BU,BW);BX.unitKey=BY;if(BV!==undefined){BX.index=BV;}return BX;},getMoveControlAction:function c(BX,BV,BU){var BW=C(BV,mstrmojo.EnumRWUnitType.SELECTOR);BW.keyContext=BX;if(BU){BW.partialRetrieval={nodes:Aq(BU)};}return BW;},addMoveControlAction:function I(BX,BW,BV,BU){BX.addActions(this.getMoveControlAction(BW,M.call(this,BV,BX),BU));},getSetCtrlSourceAction:function AK(BV,BX,BU,BW){return{act:"setControlSource",keyContext:BV,unitId:BX,unitType:BU,removeCGB:BW||[],partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BV)),partialUpdate:{selectors:[As(BV)]}};},getRemoveCtrlTargetAction:function G(BW,BV,BX,BU){return AM.call(this,"removeControlTarget",BW,BV,BX,BU);},getClearCtrlTargetAction:function BE(BU){return{act:"clearControlTarget",keyContext:BU};},getAddCtrlTargetAction:function Ay(BY,BV,BZ,Ba,BU,BW){var BX=AM.call(this,"addControlTarget",BY,BV,BZ,BU,BW);BX.isUC=!Ba;return BX;},getAddCtrlTargetDatasetAction:function BB(BV,BU){return{act:"addControlTargetDataset",keyContext:BV,tgtDid:BU};},getRemoveCtrlTargetDatasetAction:function g(BV,BU){return{act:"removeControlTargetDataset",keyContext:BV,tgtDid:BU};},getClearCtrlTargetDatasetAction:function AQ(BU){return{act:"clearControlTargetDataset",keyContext:BU};},getChangeControlElementSource:function BO(BV,BU){return{act:"changeControlElementSource",keyContext:BV,ctlElementSrc:BU};},getSetAttributesJoinTypeAction:function Ah(BU,BV){return{act:"setAttributesJoinType",nodeKey:BU,value:BV,partialRetrieval:this.newRetrievalKeysConfig().addNode(BU)};},getSetMetricJoinTypeAction:function AZ(BW,BY,BU,BV,BX){return{act:"setMetricJoinType",nodeKey:BW,unitId:BY,dataType:BU,unitType:BV,value:BX,partialRetrieval:this.newRetrievalKeysConfig().addNode(BW)};},getTxUpdates:function AW(BV){var BU=this.model;return BU&&BU.getTransactionUpdates&&BU.getTransactionUpdates(BV);},clearTxUpdates:function Al(BV){var BU=this.model;if(BU&&BU.clearTransactionUpdates){BU.clearTransactionUpdates(BV);}},resetTxUpdates:function D(BV){var BU=this.model;if(BU&&BU.resetTransactionUpdates){BU.resetTransactionUpdates(BV);}},loadDocLayout:function K(BY,Ba,BZ){var BX={act:"setCurrentLayout",unitKey:BY.layoutKey,disablePU:true,panelUnitKey:BY.panelKey},BW={style:{params:{treesToRender:3}},params:At.call(this,BY)},BU=this.model,BV=!!BZ;if(!BZ){BZ=BU.getDataService().newUpdateWithoutCmd();}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){BU.applyBufferedSelections(BZ);}BZ.add(BX,Ba,BW);if(!BV){this.submitUpdates(BX,Ba,BW);}},checkMissingCredentials:function z(BU,BV){An.call(this,B(BU,{taskId:"checkMissingCredentials"}),BV);},setCurrentDocLayout:function Av(BW,Ba,BZ){var BY={act:"setCurrentLayout",unitKey:BW},BX={config:{silent:(Ba===null)&&(!!BZ&&Object.keys(BZ.callback||{}).length===0)}},BU=this.model,BV=!!BZ;Ba=Ba||null;if(!BZ){BZ=BU.getDataService().newUpdateWithoutCmd();}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){BU.applyBufferedSelections(BZ);}BZ.add(BY,Ba,BX);if(!BV){BZ.submit();}if(window.mstrMobileApp!==undefined){mstrMobileApp.clearWebViewCache(false);}},fetchDocPage:function BF(BU,BV){An.call(this,{taskId:"fetchDocPage",rwb:this.rwb,pos:BU},BV);},requestPanelChangeDeferred:function BN(Ba,BZ,BU,BV,BX,BY){var BW={act:"setCurrentPanel",unitKey:BZ};if(BU){BW.partialRetrieval={nodes:BU.split(",")};}Ba.add(BW,BY,{config:{showProgress:BX,hideProgress:BX,progressStateText:AN},style:{params:{treesToRender:BV?3:0}}});},getGraphSelectionAction:function E(BY,BU,BW,Bb,Ba,BV){var BZ=this.model.getCurrentLayoutDef(),Bc=(BZ&&BZ.dzf)||1,BX={act:"graphSelector",nodeKey:BY,sliceID:BW,x:Math.round(Bb/Bc),y:Math.round(Ba/Bc)};if(BV){BX.usePartialUpdate="0";}else{BX.partialUpdate={selectors:BU.split("\u001E")};}return BX;},getSelectorElementsAction:function r(BW){var BV={act:"setSelectorElements",keyContext:BW.ck,ctlKey:BW.ctlKey,elemList:mstrmojo.string.decodeHtmlString(BW.eid),isVisualization:!!BW.isDocVis},BU=BW.include;if(BU!==undefined){BV.include=!!BU;}if(BW.tks){BV.tks=BW.tks;}if(BW.disablePU){BV.usePartialUpdate="0";}else{if(BW.ignoreTargetData){BV.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BW.ck));}else{BV.partialUpdate={selectors:BW.ctlKey.split("\u001F")};}}return BV;},getUpdateTransactionAction:function BS(BV){var BU={act:"updateTransaction"};if(BV){if(BV.ctlKey){BU.partialUpdate={selectors:[BV.ctlKey]};}}return BU;},getSelectorFromGMAction:function n(BV){var BU={act:"setSelectorFromGM",keyContext:BV.ck,ctlKey:BV.ctlKey,keepOnly:!!BV.keepOnly,selectorObjects:BV.selectorObjects,isVisualization:!!BV.isDocVis,include:!!BV.include};if(BV.tks){BU.tks=BV.tks;}if(BV.disablePU){BU.usePartialUpdate="0";}else{BU.partialUpdate={selectors:[BV.ctlKey]};}return BU;},getGMViewFilterAction:function AH(BV){var BU={act:"keepOnlyGM",selectorObjects:BV.selectorObjects,isVisualization:!!BV.isDocVis,keepOnly:!!BV.keepOnly};if(BV.tks){BU.tks=BV.tks;}if(BV.disablePU){BU.usePartialUpdate="0";}else{BU.partialUpdate={selectors:[BV.ctlKey]};}return BU;},browseControlElements:function BJ(BY,Bh,BV){var BX=BY.searchPattern,Be=BY.attributeId,Ba=this.model;if(!BX||BX===""){return ;}var Bb={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:Be,expressionXML:BY.expressionXML||"",dataSourcesXML:BY.dataSourcesXML||"",blockBegin:BY.blockBegin,blockCount:BY.blockCount,searchPattern:BX,rawInput:BX,browseFlags:BY.browseFlags||0,otp:BY.objectType};if(BY.datasetId){B({datasetID:BY.datasetId,messageID:Ba.mid,ctlKey:BY.controlKey},Bb);}var Bg=BY.searchForms;if(Bg){var BW="",BZ="";U.forEach(Bg,function(Bi){BW+=BZ+Bi.did;BZ=";";});Bb.searchForms=BW;if(Ba.isnew||BY.useClientForm){var BU="",Bd="",Bc=U.filterOne(Ba.getDatasetUnits(["att"]),function(Bi){return Bi.did===Be;}),Bf=Bc.fs||[];U.forEach(Bg,function(Bi){var Bj=U.filterOne(Bf,function(Bk){return Bk.fid===Bi.did;});BU+=Bd+Bi.did+":"+(Bj&&Bj.bftp||0);Bd=";";});Bb.clientFormPatterns=BU;}}An.call(this,Bb,Bh,BV);},setMultiDocSelectorElements:function AF(BU,BV,BX){var BW={taskId:"setMultiDocSelectorElements",rwb:this.rwb,multiSelect:BV,selectorObjects:BU};An.call(this,BW,BX,{showWait:true,hideWait:true,delay:true});},setDocSelectorTexts:function T(BZ,Bb,Bd,Ba,Bc,BV,BU,BW,BY){var BX={taskId:"setDocSelectorTexts",rwb:this.rwb,unitKeyContext:BZ,ctlTexts:Bb,ctlKey:Bd,zoomFactor:BV};if(AX.isAndroid||BU){BX.taskId="androidSetDocSelectorElements";}if(Ba!==null&&Ba!==undefined){BX.include=Ba;}if(BW!==null&&BW!==undefined){BX.usePartDisplay=BW;}if(BY!==null&&BY!==undefined){BX.treesToRender=BY;}An.call(this,BX,Bc);},getSelectorExpressionAction:function t(BW){var BV={act:"setSelectorExpression",keyContext:BW.ck,ctlType:BW.type,objId:BW.srcid,objType:BW.srct,expFunction:BW.f,expFunctionType:BW.ft,include:!!BW.include,qt:BW.qt,unset:!!BW.unset};if(BW.disablePU){BV.usePartialUpdate="0";}else{BV.partialUpdate={selectors:[BW.ckey]};if(BW.retrieveCtrlKey){BV.partialRetrieval=this.newRetrievalKeysConfig().addNode(BW.ctlKey);}}if(BW.changeQual){BV.changeQual=BW.changeQual;}var BU=BW.cs;if(BU!==null&&BU!==undefined){BV.expConstants=BU;BV.dataType=BW.dtp;}if(BW.fid){BV.fid=BW.fid;}return BV;},getAttributeSelectorExpressionAction:function Ax(BV){var BU={act:"setAttributeSelectorExpression",keyContext:BV.ck,ctlKey:BV.ctlKey,ctlType:BV.type,expr:BV.expr,partialUpdate:{selectors:[BV.ctlKey]}};if(BV.tks){BU.tks=BV.tks;}return BU;},getMultiUnitSelectorAction:function BL(BU){return{act:"multiUnitSelection",keyContext:BU.ck,include:BU.include!==false,sels:BU.selections,partialUpdate:{selectors:[BU.ctlKey]}};},getRemoveCtrlAction:function Ap(BV,BU){return{act:"removeControl",key:BV,partialUpdate:{selectors:[BV]},partialRetrieval:{nodes:Aq(BU)}};},getAddCtrlAction:function Ag(Bb,BZ,BV,Ba,BW,Bc,BU,BX,Bd){if(isNaN(Bd)){Bd=1;}var BY={act:"addControl",parentKey:Bb,nodeKey:BZ,ctlKey:BV,isUC:!!BW,unitType:Bc||-1,unitId:BU||"",targetKeys:Aq(BX),ctlType:Bd,gpType:Bd,partialRetrieval:{nodes:Aq(Ba)}};if(!BY.isUC){BY.partialUpdate={selectors:[BV]};}return BY;},getReplaceCtrlAction:function S(BW,BZ,BU,BY,BV,BX){return{act:"replaceControl",nodeKey:this.getNodeKeyFromKeyContext(BW),ctlKey:BZ,ctlType:BU,unitId:BY,unitType:BV,partialUpdate:{selectors:[BZ]},partialRetrieval:{nodes:Aq(BX)}};},getSaveGraphPropertiesAction:function l(BU,BV){return{act:"saveGraphProperties",nodeKey:BU,properties:BV};},getSelectorIncludeAction:function A6(BV){var BU=BV.ckey;return{act:"setSelectorInclude",keyContext:BV.ck,ctlKey:BU,ctlType:BV.type,include:BV.include,partialUpdate:{selectors:[BU]}};},getSelectorShowAllAction:function Q(BU){return{act:"setSelectorShowAll",keyContext:BU.ck,ctlKey:BU.ckey,ctlType:BU.type,showAll:BU.showAll,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BU.ck))};},getUnsetSelectorAction:function f(BX){var BW=BX.ckey,BU=BX.ck,BV={act:"unsetSelector",keyContext:BU,ctlKey:BW,ctlType:BX.type};if(BX.ignoreTargetData){BV.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BU));}else{BV.partialUpdate={selectors:[BW]};}if(BX.retrieveCtrlKey){BV.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BU));BV.partialRetrieval=BV.partialRetrieval.addNode(BW);}return BV;},getRASelectorExpandAction:function p(BV){var BU=BV.ckey;return{act:"raSelectorExpandCollapse",keyContext:BV.ck,ctlKey:BU,ctlType:BV.type,elementId:BV.elementId,isExpand:BV.isExpand,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BV.ck))};},getChangeFilteringAction:function A2(BU,BX,BW,BV){return{act:"changeFiltering",nodeKey:BU,filterMode:BX,isUC:BW,partialRetrieval:{nodes:(BV?Aq(BV):[])}};},getAddDerivedMetricToDatasetAction:function BA(BU){return{act:"addDerivedMetricToDataset",dsid:BU.dsid,formula:BU.formula,isTokenStream:BU.isTokenStream,name:BU.name,newObjectIds:BU.Ids,afb:BU.afb,sfb:BU.sfb};},getSetMDXPassThroughOptionsForCMAction:function A(BU){var BV={act:"formatDerivedElement",format:L(BU.mptf)};if(BU.cid){BV.cid=BU.cid;}if(BU.ceid){BV.ceid=BU.ceid;}return BV;},getEditDocUnitPropAction:function AC(BU){return{act:"editDocUnitProp",dsid:BU.dsid,formId:BU.formId,unitId:BU.unitId,unitType:BU.unitType,prop:BU.prop,value:BU.value};},getRWGraphImage:function BR(BY,Bc){if(mstrApp.isExpress&&!mstrApp.optimizeFitToPage&&m.call(this,this.model.zt)){return ;}var BX=mstrApp,BU=this.id,BV={taskId:"getRWGraphImage",taskEnv:"xhr",imgType:4,messageID:this.msgId,nodeKey:BY.k,sliceID:parseInt(BY.sid,10),width:parseInt(BY.w,10),height:parseInt(BY.h,10)};if(BY.needCoordinate){BV.needCoordinate=1;}if(BX.onMobileDevice()&&BX.useBinaryFormat){window.setTimeout(function(){An.call(mstrmojo.all[BU],BV,Bc,W());},0);}else{if(BY.encodeImage){BV.taskContentEncoding="base64";delete BV.taskEnv;An.call(this,BV,{success:function Bd(Be){Bc.success(Be);},failure:function BW(Be){(Bc.failure||BX.onerror)(Be);}},W());}else{var Ba=BX.getConfiguration(),BZ=BX.getCurrentProjectId(),Bb=new mstrmojo.StringBuffer();BV.__ts__=new Date().getTime();BV.sessionState=BX.getSessionState(BZ);d.forEach(BV,function(Be,Bf){Bb.append(Bf+"="+encodeURIComponent(Be));});Bc.success(Ba.getTaskUrlByProject(BZ)+"?"+Bb.toString("&"));}}},getImage:function BQ(BV){var BW=mstrApp,BU=BW.getConfiguration();if(BU&&BV&&BV.indexOf("://")===-1){BV=BU.getHostUrlByProject(BW.getCurrentProjectId())+BV;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(BV)):BV;},setGridDisplayMode:function u(BW,BV,BX,BU){d.copy(mstrmojo.DocDataService.RAPID_EXEC,BU);this.submitUpdates({act:"setGridDisplayMode",unitKey:BW,displayMode:BV},BX,BU);},setDocZoom:function H(BU,BV){this.submitUpdates(B(BU,{act:"setDocZoom",disablePU:true}),BV,{style:{params:{treesToRender:3}}});},sortGrid:function AO(BU,BV){this.submitTemplateUpdates(BU.nodeKey,B({act:"sort"},BU),BV);},getAdvSortData:function Aj(BU,BV){this.rwExecute(B(BU,{styleName:"RWGridStyle"}),BV);},getFilterExpression:function AT(BW,BV){var BX=BW&&BW.expr,BU=this.model;if(BX&&BU&&BU.getVfexprWithUpdatedVf){BX=BU.getVfexprWithUpdatedVf(BV,BX);}return AE(BX);},saveViewFilter:function Aw(BZ,Ba){var BY=this.msgId,BU=BZ&&BZ.nodeKeys,BX=this,BW=U.map(BU,function(Bb){return{act:"saveViewFilter",messageID:BY,nodeKey:Bb,expr:BX.getFilterExpression(BZ.filterModel,Bb),partialUpdate:{nodes:[Bb]}};}),BV=U.map(BU,function(Bb){return{act:"saveViewFilterLimit",messageID:BY,nodeKey:Bb,limitExp:BZ.limitExp,limitToRemove:BZ.limitMdxToRemove||[]};});this.submitUpdates(BW.concat(BV),Ba);},getViewFilter:function AP(BV,BW){var BU=this.model;if(BU.getViewFilter){BU.getViewFilter(BV,BW);}else{An.call(this,{taskId:BV.taskId,rwb:BV.rwb,msgID:BV.msgID,nodeKey:BV.nodeKey},BW);}},createEmbeddedFilter:function Ar(BW,BZ){var BU=BW.filterId,BX=BW.expJson,BY={act:"createEmbeddedFilter",messageID:this.msgId,expr:BW.expr,filterId:BU,filterName:BW.filterName};var BV=this.model;x.wrapMethods({success:function(){var Ba=BV.defn.efs||[];Ba.push({did:BU,exp:BX});BV.defn.efs=Ba;}},BZ);this.submitUpdates([BY],BZ,{style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.NONE}},params:{suppressData:true}});},rwExecute:function BH(BU,BV){An.call(this,B(BU,{taskId:"RWExecute",rwb:this.rwb,messageID:this.msgId}),BV);},pivot:function o(BU,BV){this.submitTemplateUpdates(BU.nodeKey,{act:"pivot",unitId:BU.unitId,unitType:BU.unitType,attFormId:BU.attFormId,axis:BU.axis,unitPos:BU.unitPos},BV);},resizeXtabColumn:function BD(BU,BV){this.submitUpdates([this.getUpdateTemplateAction(BU.nodeKey,BU),{act:"format",unitType:52,unitKey:BU.nodeKey,formatType:1,format:{FormattingSize:{WidthMode:2}}}],BV);},showTotals:function V(BU,BV){this.submitTemplateUpdates(BU.nodeKey,{act:"showTotals",unitId:BU.unitId,unitType:BU.unitType,subtotalType:BU.subtotalType,clearSubtotalType:BU.clearSubtotalType},BV);},drillGrid:function AL(BU,BV){this.submitUpdates(this.getDrillGridAction(BU),BV,{config:{showProgress:true,hideProgress:true,progressStateText:AN,delay:true}});},getDrillGridAction:function BK(BV){var BU={act:"gridDrillWithin",messageID:this.msgId,nodeKey:BV.nodeKey,sliceId:BV.sliceId,drillPathIndex:BV.drillPathIndex,drillPathKey:BV.drillPathKey,elementList:BV.drillElements,retainParent:BV.retainParent,partialUpdate:{nodes:Aq(BV.updateNodeKey||BV.nodeKey)}};if(BV.x){BU.x=BV.x;BU.y=BV.y;}return BU;},changeDocGroupBy:function O(BW,BX,BU){var BV={act:"changeDocGroupBy",disablePU:true};if(BW.flags){BV.flags=BW.flags;}if(BW.groupbyKey){BV.gbKey=BW.groupbyKey;BV.elemId=BW.elementId;}else{BV.gbUnits=BW.gbUnits;}this.submitUpdates(BV,BX,{config:BU,style:{params:{treesToRender:3}},params:At.call(this,BW)});},setOutlineExpanding:function A3(BW,BX,BU){var BV={act:"updateTemplate",keyContext:BW.unitKey,actions:[{act:"setOutlineExpanding",prs:"Template Formatting",pr:"OutlineLevelExpanding",v:BW.outlineLevel}]};this.submitUpdates(BV,BX,d.copy(mstrmojo.DocDataService.RAPID_EXEC,{config:{silent:true},style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}}));},retrieveServerJson:function e(BW,Bg,BX){if(mstrApp.isExpress&&!mstrApp.optimizeFitToPage&&m.call(this,this.model.zt)){return ;}var BZ=this.model,Ba=BZ.controller,Be={},BU,BV,Bc;var Bd=BW.nodes;if(Bd){Be.partialRetrieval=Bd;}var Bf=BW.slices;if(Bf){Be.slices=Bf;}if(BX){BU=BX.style;BV=BX.config;Bc=BX.params;}if(!BV){BV={showProgress:true,hideProgress:true,progressStateText:AN};}var Bh=BW.style=d.clone(this.defaultStyle),Bb=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();B(BU.params,Bh.params);var BY={taskId:"getServerJSONResults",styleName:"ServerJsonRWDStyle",compress:1,rwb:this.rwb,messageID:this.msgId,stateID:-1,excludeData:!!(Bb||mstrConfig.resolveOnly),params:JSON.stringify(Be),treesToRender:Bh.params.treesToRender};B(Bc,BY);BV.preserveUndo=(BX&&BX.preserveUndo)||false;An.call(this,BY,Bg,BV);},downloadGridData:function J(BX,BY){var BW={act:"gridIncrementalFetch",nodeKey:BX.nodeKey,rowPosition:BX.rowPosition,maxRows:BX.maxRows,colPosition:BX.colPosition,sliceId:BX.sliceId,maxColumns:BX.maxColumns,rowMode:BX.rowMode||1,partialRetrieval:this.newRetrievalKeysConfig().addNode(BX.nodeKey)};if(BX.partialUpdate){BW.partialUpdate=BX.partialUpdate;}var BV=mstrmojo.all[BX.xtabId],BU=BV&&BV.isCustomSort;this.submitUpdates(BW,BY,d.copy(W(),{noUpdate:true,preserveStid:BU,config:{silent:true}}));},txMarkRows:function AV(BU,BV){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionMarkRow(BU.nodeKey,BU.sliceId,BU.rowOrdinal,BU.actionType);}else{An.call(this,{taskId:"markRow",rwb:this.rwb,nodeKey:BU.nodeKey,sliceId:BU.sliceId,rowOrdinal:BU.rowOrdinal,actionType:BU.actionType},BV);}},txChangeData:function w(BU,BV){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionDataChange(BU.nodeKey,BU.sliceId,JSON.stringify(BU.cells),BU.autoRefresh);}else{An.call(this,{taskId:"changeData",rwb:this.rwb,nodeKey:BU.nodeKey,sliceId:BU.sliceId,cells:BU.cells,autoRefresh:BU.autoRefresh},BV);}},sendTransactionActions:function b(BV,BW){var BU={taskId:"DocTransaction",rwb:this.rwb,keyContext:BV.keyContext,actions:BV.actions,messageID:this.msgId};if(BV.txrcd){BU.isPending=BV.txrcd.pending;BU.timestamp=BV.txrcd.timestamp;}An.call(this,BU,BW,{silent:!!BW});},newUpdate:function A9(BW,BV){var BU=new mstrmojo.DocDataService.Update(BV);BU.ds=this;BU.cmd=BW;return BU;},newUpdateWithoutCmd:function k(BV){var BU=new mstrmojo.DocDataService.Update(BV);BU.ds=this;return BU;},newRetrievalKeysConfig:function Af(){return new mstrmojo.rw.model.RetrievalKeysConfig();},newUpdateKeysConfig:function R(){return new mstrmojo.rw.model.UpdateKeysConfig();},submitCmd:function BG(BV,BU){this.newUpdate(BV,BU).submit();},submitUpdates:function Ai(Bd,Bj,Ba){Bd=Aq(Bd);var BZ={actions:Bd},BU,BX,Bg,BW=false;U.forEach(Bd,function Bc(Bl){if(Bl.disablePU){BW=true;delete Bl.disablePU;}U.forEach(Bl.actions,Bc);return !BW;});if(!BW){var BV=mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig(Bd),Bi=mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig(Bd);if(!d.isEmpty(BV)){BZ.partialRetrieval=BV;}if(!d.isEmpty(Bi)){BZ.partialUpdate=Bi;}}if(Ba){BU=Ba.style;BX=Ba.config;Bg=Ba.params;}if(!BX){BX={showProgress:true,hideProgress:true,progressStateText:AN};}if(!BU){BZ.style=this.defaultStyle;}else{var Bk=BZ.style=d.clone(this.defaultStyle);B(BU.params,Bk.params);}BZ.style.name=(BU&&BU.name)||mstrApp.styleName;var Bb={taskId:"mojoRWManipulation",rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(BZ)};B(Bg,Bb);BX.preserveUndo=(Ba&&Ba.noUpdate)||false;BX.preserveStid=(Ba&&Ba.preserveStid)||false;var Bf=this,Bh=true,BY=x.override({success:function(Bl,Bm){if(Bl.status===2){Bh=false;Bf.submitUpdates([],Bj,Ba);}else{Bh=true;return this._super(Bl,Bm);}},complete:function(){if(this._super&&Bh){this._super();}}},B(Bj));if(!(Ba&&Ba.hideCancel)){BX.waitBoxCfg=d.copy({showCancel:true},BX.waitBoxCfg);}if(Ba&&Ba.message){BX.waitBoxCfg=d.copy({message:Ba.message},BX.waitBoxCfg);}var Be=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(Ba&&Ba.resolveOnly!==undefined){Bb.resolveOnly=Ba.resolveOnly;}else{if(Be){Bb.resolveOnly=true;}}if(Ba&&Ba.excludeData!==undefined){Bb.excludeData=Ba.excludeData;}else{if(Be){Bb.excludeData=true;}}if(Ba&&Ba.noDeltaXML!==undefined){Bb.noDeltaXML=Ba.noDeltaXML;}if(Bb.resolveOnly&&Bb.excludeData){mstrApp.enableUpdate=true;}An.call(this,Bb,BY,BX);},submitTemplateUpdates:function AA(BU,BW,BX,BV){this.submitUpdates(this.getUpdateTemplateAction(BU,BW),BX,BV);},getUpdateTemplateAction:function Ac(BU,BW,BV){return{act:"updateTemplate",keyContext:BU,partialRetrieval:this.newRetrievalKeysConfig().addNode(BU,BV),partialUpdate:{selectors:BW.selectors},actions:Aq(BW)};},addUpdateTemplateAction:function BM(BW,BU,BV){BW.addActions(this.getUpdateTemplateAction(BU,BV));},applySegment:function AS(BV,BU,BW){An.call(this,{taskId:"applySegment",rwb:this.rwb,segmentID:BV,nodeKey:BU},BW);},getPageByTree:function AU(BU){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},BU);},getUserDICubeInfo:function Z(BU,BV){An.call(this,{taskId:"getUserDICubeInfo",cubeIds:BU.join(",")},BV);},applySorts:function A8(BV,BW,BU,BX){An.call(this,{taskId:"applySorts",key:BV,sortType:BW,sortList:BU},BX,mstrmojo.DocDataService.PROGRESS_CONFIG);},getAddNewDerivedMetricToDatasetSubmitFunc:function A5(BV){var BU=this;return function(BY){var BZ=BU.model,BX=BZ.controller,BW=d.copy(BY,BV),Ba=[Am.call(BU,BW,true)],Bb=BZ.getDatasetsUpdateCallback();if((BW.mptf||{}).dirty||this.enablePTO){Ba.push(AJ(BW));}BX.submitUndoRedoUpdates(Ba,null,Bb,{style:{params:{treesToRender:1}}});};},getAddNewDerivedMetricToXtabSubmitFunc:function Au(BV){var BU=this;return function(BZ){var Ba=BU.model,BY=Ba.controller,BX=d.copy(BZ,BV),BW=BX.idx,Bc=[],Bd=x.wrapMethods(Ba.getDatasetsUpdateCallback(),BY._getXtabCallback(BX.host));Bc.push(Am.call(BU,BX,true));if((BX.mptf||{}).dirty||this.enablePTO){Bc.push(AJ(BX,true));}if(BX.replace){Bc.push(BU.getUpdateTemplateAction(BX.nodeKey,[BX.host.model.getRemoveTemplateUnitAction({did:BX.replace.did,t:BX.replace.t})]));}else{BW++;}var Bb=BU.getUpdateTemplateAction(BX.nodeKey,[BX.host.model.getAddTemplateUnitAction({did:"$GUID_135",t:4},BX.dsid,BX.zoneid,BW),{act:"renameUnit",id:"$GUID_135",type:4,name:BX.alias,isDynamicAlias:false}]);Bc.push(Bb);BY.submitUndoRedoUpdates(Bc,null,Bd);};},getAddNewDerivedMetricToDropzoneSubmitFunc:function AG(BV){var BU=this;return function(Bb){var Bc=BU.model,Bd=Bc.controller,Bf=d.copy(Bb,BV),Bh=Bf.host.zonesModel,Bi=Bf.idx,Ba=[],BW=[],Bg={id:Bf.zoneid},Be={did:"$GUID_135",t:4},Bj=x.wrapMethods(Bc.getDatasetsUpdateCallback(),Bd._getXtabCallback(Bf.host));Ba.push(Am.call(BU,Bf,true));if((Bf.mptf||{}).dirty||this.enablePTO){Ba.push(AJ(Bf));}if(Bf.replace){var BY={did:Bf.replace.did,t:Bf.replace.t};Array.prototype.push.apply(BW,Bh.getRemoveDropZoneUnitActions(Bg,BY));}else{Bi++;}BW.push(Bh.getAddDropZoneUnitAction(Bg,Be,Bi,{datasetId:Bf.dsid}));if(Bf.extraZone){BW.push(Bh.getAddDropZoneUnitAction({id:Bf.extraZone.id},Be,Bf.extraZone.idx,{datasetId:Bf.dsid}));}if(!Bf.replace){var BX=(BV.zoneid===4)?1:2,BZ=Bh.getAddMetricNameAction(BV.host,BX);if(BZ){Ba.push(BZ);}}if(!Bf.replace&&Bh.gmZones){BZ=Bh.gmZones.getUpdateGroupInfoActionForNewMetric(BV.zoneid,Bi,true);if(BZ){Ba.push(BZ);}}Bh.checkAndAddThresholdAction(Bf.zoneid,Be,BW);Ba.push(BU.getUpdateTemplateAction(Bf.nodeKey,BW));Bd.submitUndoRedoUpdates(Ba,null,Bj);};},getEditDerivedMetricSubmitFunc:function j(BV){var BU=this;return function(BY){var Ba=BU.model,BX=Ba.controller,BW=d.copy(BY,BV),BZ=BV.nodeKey,Bb={act:"editDM",formula:BW.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BW.tokenStreamXML),afb:BV.afb,sfb:BV.sfb,dsid:BW.dsid||"",did:BW.did},Bc=[Ba.addUpdateObjects(Bb,{id:BW.did,type:4,flag:mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS.DATA_CHANGE})],Bd=x.wrapMethods(Ba.getDatasetsUpdateCallback(),BX.getPartialUpdateCallback());if(mstrApp.isSingleTier&&BV.originTokenStream){Bb.originFormula=BV.originTokenStream;Bb.originAfb=BV.originAfb;Bb.originSfb=BV.originSfb;}if((BW.mptf||{}).dirty){Bc.push(AJ(BW));}if(BZ){Bc.push(BU.getUpdateTemplateAction(BZ,[{act:"renameUnit",id:BW.did,type:4,name:BW.alias,isDynamicAlias:false}]));}else{Bb.name=BW.alias;}BX.submitUndoRedoUpdates(Bc,null,Bd,{style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}});};},resetSelections:function BC(BV,BU,BW){An.call(this,{taskId:"resetSelections",rwb:this.rwb,unitKeyContext:BV||"",usePartDisplay:BU?"0":"1",treesToRender:BU?3:2},BW);},setPreference:function F(BU,BV){An.call(this,{taskId:"setPreference",prefs:BU},BV);},getObjectInfo:function Aa(BU,BV){An.call(this,B(BU,{taskId:"getObjectInfo"}),BV,W());},addSuppressData:function Az(BU){if(BP(BU)===mstrmojo.DocDataService.EnumTreesToRender.NONE){d.copy({params:{suppressData:true}},BU);}},uploadImageToServer:function(BW,BX){var BV={taskId:"importImage",imageFieldName:"imageData",isEdit:1,fieldKey:BW.fieldKey,fieldName:BW.fieldName,imageName:encodeURIComponent(BW.imageName),imageSize:BW.imageSize,nodeKey:BW.nodeKey,sectionKey:BW.sectionKey,msgID:this.msgId||""};if(mstrApp.isSingleTier){var BU=";base64,";BV.rwNodeKey=BW.fieldGroupKey;BV.imageData=BW.base64Str.split(BU)[1]||BW.base64Str;mstrApp.serverRequest(BV,BX);}else{BV.imageData=BW.imageData;mstrmojo.xhr.upload("POST",mstrConfig.taskURL,BX,BV);}}});mstrmojo.DocDataService.Update=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DocDataService.Update",actions:null,callback:null,extras:null,init:function Ak(BU){B(BU,this);this.actions=this.actions||[];this.callback=this.callback||{};this.extras=this.extras||{};},addActions:function Ae(BU){this.actions=this.actions.concat(Aq(BU));},addCallbacks:function A1(BU){this.callback=x.wrapMethods(this.callback,BU);},addExtras:function AY(BV){var BU=BP(BV),BW=BP(this.extras);this.extras=B(BV,this.extras);if(BU!==undefined&&BW!==undefined){this.extras.style.params.treesToRender|=BW;}},addUpdate:function Ab(BU){this.add(BU.actions,BU.callback,BU.extras);},setTreesToRender:function BT(BU){if(BU){this.addExtras({style:{params:{treesToRender:BU}}});}return this.extras.style.params.treesToRender;},add:function a(BV,BW,BU){if(BV){this.addActions(BV);}if(BW){this.addCallbacks(BW);}if(BU){this.addExtras(BU);}},submit:function AB(){var BV=this.actions,BW=this.callback,BU=this.extras;if(this.cmd){this.cmd.submit(BV,BW,BU);}else{this.ds.submitUpdates(BV,BW,BU);}}});mstrmojo.DocDataService.PUInfoType=null;mstrmojo.DocDataService.ExtrasType=null;mstrmojo.DocDataService.PROGRESS_CONFIG={showProgress:true,hideProgress:true,progressStateText:AN,delay:true};mstrmojo.DocDataService.UNDO_KEY="undo";mstrmojo.DocDataService.REQUEST_DEFN_DATA={style:{params:{treesToRender:3}}};mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION={style:{params:{treesToRender:1}}};mstrmojo.DocDataService.REQUEST_ONLY_DATASETS={style:{params:{treesToRender:0}}};mstrmojo.DocDataService.SUPPRESS_DATA={params:{suppressData:true}};mstrmojo.DocDataService.RAPID_EXEC={params:{suppressData:true,rapidExec:true}};mstrmojo.DocDataService.EMPTY_CALLBACK={success:mstrmojo.emptyFn};mstrmojo.DocDataService.CopyMoveDestinationType=null;mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS={FORMAT_CHANGE:1,DATA_CHANGE:2};mstrmojo.DocDataService.EnumTreesToRender={NONE:0,DEFN:1,DATA:2,BOTH:3};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.taphold");var A=false,Q=mstrmojo.dom,U=16;mstrmojo._HasContextMenu=mstrmojo.provide("mstrmojo._HasContextMenu",{cm:null,cmPos:null,itemField:"n",itemIdField:"did",itemChildrenField:"items",dynamicUpdate:false,queryChecked:function(V){return false;},queryEnabled:function(V){return true;},queryVisible:function(V){return true;},executeCommand:function P(V){},item2textCss:function E(V){return V.cssClass||V.cmdId||("cmd"+V[this.itemIdField]);},showContextMenu:function J(){if(!A){mstrmojo.requiresCls("mstrmojo.ContextMenu");A=true;}var b=this._subMenu,Z=this.getMenuPosition();if(!b){var d=(this.menuZIndex||this.zIndex||10)+1,X={left:Z.x+"px",top:Z.y+"px",zIndex:d,visible:false,dynamicUpdate:this.dynamicUpdate,itemField:this.itemField,itemIdField:this.itemIdField,itemChildrenField:this.itemChildrenField,_cmSource:this.getContextMenuSource(),items:this.getContextMenuItems(),cssClass:this.getContextMenuCssClass(),placeholder:document.body.appendChild(document.createElement("div")),parent:this};b=new mstrmojo.ContextMenu(X);b.render();this._subMenu=b;}else{b.set("left",Z.x+"px");b.set("top",Z.y+"px");}if(this.dynamicUpdate){var W=b.ctxtBuilder.itemWidgets,Y=W&&W.length,V,a,c=this.getContextMenuSource();for(V=0;V<Y;V++){a=W[V];if(c.queryVisible){a.set("visible",c.queryVisible(a.data));}if(c.queryChecked){a.set("checked",c.queryChecked(a.data));}if(c.queryEnabled){a.set("enabled",c.queryEnabled(a.data));}}}b.set("visible",true);this.callOnContextMenuOpen();this.adjustMenuPosition();this.attachMousedownEvent();},hideContextMenu:function I(){var V=this._subMenu;if(V&&V.visible){this._subMenu.set("visible",false);this.callOnContextMenuClose();}},adjustMenuPosition:function O(){var V=this._subMenu,Y=this._subMenu.domNode,X=Y.offsetHeight,W=Y.offsetWidth,b=Q.windowDim(),a=Q.position(Y,false),Z=Q.position(Y,true);if((a.x+W+U)>b.w){V.set("left",(b.w-W-U+(Z.x-a.x))+"px");}if((a.y+X+U)>b.h){V.set("top",(b.h-X-U+(Z.y-a.y))+"px");}},attachMousedownEvent:function M(){var V=this;if(!this._close_handler){this._close_handler=function(W){V.closeMenuHandler(W);};}Q.attachEvent(document.body,"mousedown",this._close_handler);},closeMenuHandler:function R(V){if(!this.isOnMySubmenu(Q.eventTarget(self,V))){this.closeMenuTree();}},isOnMySubmenu:function N(Z){var W=this._subMenu;if(!W){return false;}if(Q.contains(W.domNode,Z,true,document.body)){return true;}var a=W.ctxtBuilder.itemWidgets,V=a&&a.length,Y,X;for(Y=0;Y<V;Y++){X=a[Y];if(X.isOnMySubmenu(Z)){return true;}}return false;},oncmChange:function K(){delete this._subMenu;},callOnContextMenuOpen:function D(){if(this.onContextMenuOpen){this.onContextMenuOpen();}},callOnContextMenuClose:function C(){if(this.onContextMenuClose){this.onContextMenuClose();}},getContextMenuItems:function T(){return this.cm;},getContextMenuCssClass:function B(){return this.cmCssClass||"";},getContextMenuSource:function H(){return this;},getMenuPosition:function F(){if(this.cmPos){return this.cmPos;}var V=Q.position(this.domNode,true);return{x:Math.round(V.x),y:Math.round(V.y+V.h)};},isSeparatorItem:function G(V){return V[this.itemIdField]===-1||V[this.itemField]==="-";},hasSubmenu:function L(V){return !!V[this.itemChildrenField];},closeMenuTree:function S(X){var W=this.activeMenuItem,V=this._cmSource||this;if(!W){if(X){this.activeMenuItem=X;}else{V.hideContextMenu();}return ;}if(W===X){return ;}if(X){this.activeMenuItem=X;if(X.parent.parent===W){return ;}if(X.parent===W.parent){W.hideContextMenu();return ;}}else{X=V;this.activeMenuItem=null;}W.hideContextMenu();while(W!==V){W=W.parent.parent;if(W!==X||V===X){W.hideContextMenu();if(V===X){Q.detachEvent(document.body,"mousedown",this._close_handler);}}if(W.parent===X.parent){break;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.vi.ui.rw._IsMultiselectXtab");var Y=mstrmojo.dom,b=mstrmojo.css;function N(){var d=this._outlineRenderTimer;if(d){self.clearInterval(d);delete this._outlineRenderTimer;this.renderingRows=false;}}function P(d,j,m,f,h,g,l){var k=this,e=this.id;this.renderingRows=true;this._outlineRenderTimer=self.setInterval(function(){try{if(!d){return ;}var n=[],p=d.pageStatus[j],r=0,q=d.rowsPerPage;if(!p||!p.filled){n.push({idx:j,fill:true});}if(n.length>0){d.preRenderPages();d.renderPages(n);d.postRenderPages();d._postPagesClearup=true;}else{if(d._postPagesClearup){d.postRenderPagesCleanup();d.configureActions();d._postPagesClearup=false;}N.call(k);if(d.isRenderingComplete()){d.postRenderingCleanup();}if(g){j++;if(d.pageStatus[j]){P.call(k,d,j,m,f,h,g);}else{U.call(k);k.domNode.style.visibility="visible";}}else{if(l){W.call(k,m,f,h,l);}else{C.call(k,m,f,h,l);}}}}catch(o){N.call(k);throw o;}},d.renderPause);}function a(){var f=this.scrollboxNode;if(!this.heightLimit){f.style.height=f.firstChild.offsetHeight+(f.offsetHeight-f.clientHeight)+"px";}var e=this.xtabClonedNodes,d;for(d in e){e[d].refreshNode();}this._adjustClipSize();this.alignLockNodes(this.scrollboxLeft,this.scrollboxTop);}function G(){var d=this.getTargetZone();if(d&&d.onscroll){d.onscroll();}}function U(){b.removeClass(this.domNode,"outlineBusyCursor");var d=this.scrollboxNode;if(!this.heightLimit){d.style.height=d.firstChild.offsetHeight+(d.offsetHeight-d.clientHeight)+"px";this.refreshResizeHandlers();}if(!this.widthLimit){this.scrollboxNode.firstChild.style.position="relative";this.onGridWidthChanged();}if(this.scrollboxHeightFixed){a.call(this);this._refreshClonedNodes();}this.refreshResizeHandlers();G.call(this);this.updateScrollbars&&this.updateScrollbars();}function D(e,d){if(!e){return ;}if(d){e.className="icon-outline-span outline-expand";e.setAttribute("collapsed",true);}else{e.className="icon-outline-span outline-collapse";e.setAttribute("collapsed",false);}}function X(){if(this.allPagesLoaded){return true;}var f=0,j=this.children[0].pageStatus,d=j.length;for(f=0;f<d;f++){if(!j[f].filled){return false;}}this.allPagesLoaded=true;var m=this.getTargetZone().tableNode,l=m.rows,k=this.gridData.maxLevel,g,h,e;d=l.length;Q.call(this,k,true);for(f=0;f<d;f++){e=l[f].getElementsByClassName("icon-outline-span")[0];h=(e&&parseInt(e.getAttribute("dpt"),10))||0;if(h>0){h=parseInt(e.getAttribute("dpt"),10);g="depth"+(h-1);this.maxIndividualCollapseCount[g]+=1;if(e.getAttribute("collapsed")==="true"){this.individualCollapseCount[g]+=1;}}}return true;}function L(d){d.setAttribute("collapsed","true");d.className="icon-outline-span outline-expand";}function C(n,g,l,m){var p=n.rows,j=p.length,d=this.getTargetZone(),o,k,f,e=0,h=true;for(f=l+1;f<j;f++){o=p[f];k=parseInt(o.getAttribute("level"),10);if(isNaN(k)){e=parseInt(o.parentElement.getAttribute("n")||1,10);if((l===f-1)&&d.pageStatus[e].filled===true){f++;}break;}if(k<=g){e=parseInt(o.parentElement.getAttribute("n")||0,10)+1;if(e<d.totalPages&&d.pageStatus[e].filled){h=false;}delete this.outlineState.collapseToLevel;break;}}if(f===j){e=parseInt(p[j-1].parentElement.getAttribute("n")||0,10)+1;if(e<d.totalPages&&d.pageStatus[e].filled===true){e++;}}if(h&&e<d.totalPages){P.call(this,d,e,n,g,f-1,false,m);}else{M.call(this,n,g,this.startCollapseRowIndex||l,m);if(this.isAutoTableLayout()){a.call(this);}delete this.startCollapseRowIndex;delete this.outlineState.collapseToLevel;}}function W(n,g,l,m){var p=n.rows,j=p.length,d=this.getTargetZone(),o,k,f,e=d.pageStatus.length,h=true;for(f=l+1;f<j;f++){o=p[f];k=parseInt(o.getAttribute("level"),10);if(isNaN(k)){e=parseInt(o.parentElement.getAttribute("n")||1,10);if(d.pageStatus[e].filled===true){d.pageStatus[e].filled=false;f++;}break;}if(k<=g){e=parseInt(o.parentElement.getAttribute("n")||0,10)+1;if(e<d.totalPages&&d.pageStatus[e].filled){h=false;}delete this.outlineState.collapseToLevel;break;}}if(h&&e<d.totalPages){P.call(this,d,e,n,g,f-1,false,m);}else{M.call(this,n,g,this.startCollapseRowIndex||l,m);if(this.isAutoTableLayout()){a.call(this);}delete this.startCollapseRowIndex;delete this.outlineState.collapseToLevel;}}function M(AB,g,m,e){var AC=this,q=AB.rows,z=q.length,n,f,h,v,u,p="outlineMode "+(e?"":" hiddenRow"),AA=AC.getStickedTableNodes(),d=AC.children[0],t=this.outlineState,x,k,o=d.rowsPerPage;for(v=m+1;v<z;v++){n=q[v];h=parseInt(n.getAttribute("level"),10);if(h<=g){break;}if(e&&h>g+1){continue;}n.className=p;k=n.getAttribute("ei");x=n.getElementsByClassName("icon-outline-span")[0];if(!e){t[k]={expanded:false,hidden:true};if(x&&x.getAttribute("collapsed")!=="true"){AC.individualCollapseCount["depth"+(h-1)]+=1;L(x);}}else{t[k]={expanded:false,hidden:false};}for(u=0;u<AA.length;u++){f=AA[u].rows[v];if(f){f.className=p;if(!e){x=f.getElementsByClassName("icon-outline-span")[0];if(x){L(x);}}}}}U.call(AC);var l="depth"+(g-1);if(X.call(AC)){if(AC.individualCollapseCount[l]===0){S.call(AC,g+1,true);}else{if(!e&&this.maxIndividualCollapseCount[l]===this.individualCollapseCount[l]){R.call(AC,g);}}}var r=mstrmojo.findAncestor(this,"adjustAutoWidth",null,mstrmojo.grid);if(r){r.adjustAutoWidth(this);}}function S(h,e){if(!this.gridData.gts.show){return ;}var g=this.getTargetZone().tableNode,j=this.getStickedTableNodes(),d=h-1,k,f;j.push(g);mstrmojo.array.forEach(j,function(l){var m=l.rows[0].getElementsByClassName("icon-outline-span");for(f=0;f<m.length;f++){k=m[f];if(f<d){k.setAttribute("collapsed",0);b.removeClass(k,"outline-expand");b.addClass(k,"outline-collapse");}else{if(!e){k.setAttribute("collapsed",1);b.removeClass(k,"outline-collapse");b.addClass(k,"outline-expand");}}}});}function R(e){if(e===this.gridData.maxLevel){return ;}var d="depth"+(e-1);if(this.individualCollapseCount[d]===this.maxIndividualCollapseCount[d]){S.call(this,e);}else{R.call(this,e+1);}}function Q(j,e){var g=this.gridData,d=g.maxLevel||(g.gts&&g.gts.row&&g.gts.row.length)||0,h,f;for(f=0;f<d;f++){h="depth"+f;if(e){this.maxIndividualCollapseCount[h]=0;}if(f>=j){this.individualCollapseCount[h]=this.maxIndividualCollapseCount[h];}else{this.individualCollapseCount[h]=0;}}}function J(){var e=this.gridData,d=e.gts.show?1:0;if(e.gts.col&&e.gts.col.length>1){d=e.gts.col.length;}return d;}function T(){this.outlineState={};if(mstrApp.outlineStates[this.id]){delete mstrApp.outlineStates[this.id];}}function O(){this.retainOutlineState=true;if(!mstrApp.outlineStates[this.id]){mstrApp.outlineStates[this.id]=this.outlineState;}}mstrmojo.vi.ui.rw._IsOutlineXtab=mstrmojo.provide("mstrmojo.vi.ui.rw._IsOutlineXtab",{_mixinName:"mstrmojo.vi.ui.rw._IsOutlineXtab",onclick:function c(p){var m=this,l=p.getTarget&&p.getTarget(),j=l&&Y.findAncestorByName(l,"td",true,this.viewport),f=j&&Y.findAncestorByName(l,"span",true,j),k=f&&parseInt(f.getAttribute("expandTo"),10);if(f&&(f.getAttribute("sty")==="outimg"||k>=1)){var q=j.parentElement;if(f&&!p.shiftKey&&!p.ctrlKey){var r=this.getTargetZone().tableNode;if(this.renderingRows){return ;}if(k>=1){T.call(this);this.scrollboxNode.scrollTop=0;var n=this.gridData,d=m.model.getDataService(),h=parseInt(f.getAttribute("collapsed"),10)||0;k+=h?1:0;S.call(this,k);n.lvlepd=k=k<n.maxLevel?k:-1;d.setOutlineExpanding({unitKey:m.node.k||m.node.data.k,outlineLevel:k});window.setTimeout(function(){m.refresh();},10);}else{if(f.getAttribute("sty")==="outimg"){b.addClass(this.domNode,"outlineBusyCursor");var g=parseInt(f.getAttribute("dpt"),10),o=l.getAttribute("collapsed")==="true",e=q.getAttribute("ei");this.outlineState[e]={expanded:o,hidden:false};if(o){l.className="icon-outline-span outline-collapse";l.setAttribute("collapsed","false");this.individualCollapseCount["depth"+(g-1)]-=1;window.setTimeout(function(){m.outlineState.isExpanding=true;m.outlineState.collapseToLevel=g+1;m.startCollapseRowIndex=q.rowIndex;W.call(m,r,g,q.rowIndex,true);},10);}else{l.className="icon-outline-span outline-expand";l.setAttribute("collapsed","true");this.individualCollapseCount["depth"+(g-1)]+=1;window.setTimeout(function(){m.outlineState.isExpanding=false;m.outlineState.collapseToLevel=g;m.startCollapseRowIndex=q.rowIndex;C.call(m,r,g,q.rowIndex,false);},10);}}}}}else{this._super(p);}},refresh:function I(d,m){var k=this;if(m){var j=this.getTargetZone(),p=j&&j.tableNode,n=this.gridData;if(!n||!j||!p){return this._super(d);}var l=this.getFormats(),g=j.gridContainerNode,f=this.xtabClonedNodes||[],e=(l&&l.width)||g.style.width,o=(l&&l.height)||this.scrollboxNode.style.height,h=parseInt(e,10);if(n.afc){h=Math.max(p.offsetWidth,h);}g.style.width=h+"px";mstrmojo.array.forEach(f,function(q){if(q.domNode){q.domNode.firstChild.style.width=h+"px";}});this.widthLimit=h;this.heightLimit=parseInt(o,10);this.scrollboxNode.style.height=o;this.resize();this.updateScrollbars();return ;}if(!this.retainOutlineState){T.call(this);}else{this.retainOutlineState=false;}this._super(d);},postBuildRendering:function Z(){var h=this.gridData;this.isOutlineMode=(h&&h.olm&&!(h.rw&&h.rw.row.bc>0)&&!this.defn.txi);if(!mstrApp.outlineStates){mstrApp.outlineStates=[];}if(mstrApp.outlineStates[this.id]){this.outlineState=mstrApp.outlineStates[this.id];}else{if(!this.outlineState){this.outlineState={};}}this._super();var f=this.getTargetZone(),g=f&&f.tableNode;if(!h||!f||!g){return ;}var j=h.lvlepd||0,e=h.maxLevel||(h.gts&&h.gts.row&&h.gts.row.length)||0,d=h.olm&&!(h.rw&&h.rw.row.bc>0)&&(j>=1&&j<e);this.allPagesLoaded=false;this.individualCollapseCount={};this.maxIndividualCollapseCount={};Q.call(this,e,true);if(d){f._defaultPageHeight=Math.min(g.tBodies[0].offsetHeight,f._defaultPageHeight);f.gridContainerNode.style.minHeight=f._defaultPageHeight*f.totalPages+"px";S.call(this,j);this.scrollboxNode.scrollTop=0;G.call(this);}},gridPagesRendered:function B(){this._super();if(X.call(this)&&!this.outlineState.isExpanding){R.call(this,1);}},isOutlineMode:true,showBanding:function A(d){O.call(this);this._super(d);},formatGridZone:function V(f,e,d){O.call(this);this._super(f,e,d);},batchFormatGridZones:function E(f,e,d){O.call(this);this._super(f,e,d);},formatPadding:function K(e,f,d){O.call(this);this._super(e,f,d);},updateRelatedColWidths:function F(d){O.call(this);this._super(d);},updateScenario:function H(d){O.call(this);this._super(d);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var M=mstrmojo.DI.DIConstants,H=mstrmojo.array,D=M.dbType,F=M.xdaType,I=M.sourceType,K=M.backendSourceSubtype;mstrmojo.DI.DIDatabaseHelper=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIDatabaseHelper.getImportOptionByDBType=function A(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:case D.PIG:return false;default:return true;}};mstrmojo.DI.DIDatabaseHelper.getSourceTypeByDBType=function E(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:return F.mdx;case D.PIG:return F.ffsql;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType=function(N){switch(N){case D.MS_ACCESS:return 9149;case D.ORACLE:return 8545;case D.SQL_SERVER:return 8552;case D.INFORMIX:return 12995;case D.SYBASE:return 12998;case D.REDBRICK:return 10059;case D.DB2:return 8516;case D.TERADATA:return 8553;case D.SAP:return 13107;case D.NETEZZA:return 8558;case D.EXCEL:return 3958;case D.MSFT_AS:return 13225;case D.ESSBASE:return 13224;case D.MYSQL:return 8556;case D.POSTGRESQL:return 8541;case D.COMPOSITE:return 12991;case D.ASTER:return 10058;case D.VERTICA:return 10062;case D.PARACCEL:return 10056;case D.TM1:return 13223;case D.XQUERY:return 8560;case D.HIVE:return 8561;case D.SALESFORCE:return 9213;case D.SAPHANA:return 12997;case D.GOOGLE_BIGQUERY:return 12450;default:return 4444;}};mstrmojo.DI.DIDatabaseHelper.getOASTFromBEST=function L(N){switch(N){case K.googleBigQuery:case K.googleBigQueryFFSQLModel:case K.googleBigQuerySingleTable:return I.googleBigQuery;case K.dropbox:return I.dropbox;case K.googleAnalytics:return I.googleAnalytics;case K.googleDrive:return I.googleDrive;case K.facebook:return I.facebook;case K.twitter:return I.twitter;case K.salesforce:return I.salesforce;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.isOAuthSourceType=function C(N){var O=[I.googleBigQuery,I.dropbox,I.googleAnalytics,I.googleDrive,I.facebook,I.twitter,I.salesforce];return H.indexOf(O,N)!==-1;};mstrmojo.DI.DIDatabaseHelper.filterDBById=function B(P,N,O){return H.filter(P,function(S){var R=H.indexOf(N,S.id),Q;if(R>-1){Q=O;}else{Q=!O;}return Q;});};mstrmojo.DI.DIDatabaseHelper.filterDBByDispOption=function B(P,N,O){return H.filter(P,function(R){var Q=false;if((R.disp&N)===N){H.forEach(O,function(S){if(R.id===S){Q=true;return false;}});return !Q;}});};mstrmojo.DI.DIDatabaseHelper.getDBIds=function J(O){var N=[];H.forEach(O,function(P){N=N.concat(P.id);});return N;};mstrmojo.DI.DIDatabaseHelper.getUniqueDBTypes=function G(P){var O=[],N;H.forEach(P,function(Q){N=H.indexOf(O,Q.dbType);if(N<0){O.push(Q.dbType);}});return O;};mstrmojo.DI.DIDatabaseHelper.filterDBByAdminConfig=function(O,N){return H.filter(O,function(R){var P=H.indexOf(N,R.id),Q=true;if(P>=0){Q=false;}return Q;});};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");mstrmojo.touchManager=new mstrmojo.Obj({notify:function(r,t){return this.raiseEvent({name:"touchesBegin",srcId:r,touch:t});}});var V=mstrmojo.dom,o=V.attachEvent,p=V.detachEvent,B=Math,W=window.mstrConfig,Q=false,J=null,h=W&&W.allowDefaultTouches;var g=10,D=250,F=400,Y=100;var f="Begin",N="End",c="Move",S="Cancel";var l=1,m=2,C=3,P=4;var K={};K[l]="Select";K[m]="Swipe";K[C]="Multi";K[P]="Tap";o(document.body,"touchmove",function(r){if(!W||!W.allowDefaultTouches){if(r.preventDefault){r.preventDefault();return false;}}return true;});function X(r){var t=r.identifier;return(t===undefined)?1:t;}function j(v,w,u,t){if(Q){var r=t?X(t)+" ":"";window.console.log(v+":"+(u?" "+u.scriptClass+" "+u.id:"")+" "+r+(w||""));}}function k(r){return(J===r);}function T(r){if(!k(r)){return ;}j("detachWinEvts","",r);p(window,V.TOUCHMOVE,r._tmCallback,true);p(window,V.TOUCHEND,r._teCallback,true);p(window,V.TOUCHCANCEL,r._teCallback,true);J=null;}function U(r){if(k(r)){return ;}var t=J;if(t){j("forced deactivation","",t);T(t);}j("attachWinEvts","",r);o(window,V.TOUCHMOVE,r._tmCallback,true);o(window,V.TOUCHEND,r._teCallback,true);o(window,V.TOUCHCANCEL,r._teCallback,true);J=r;}function M(t,r){return"touch"+((r&&K[r])||"")+(t||"");}function Z(u,v,t){var r=M(v,t);return(u[r]!==undefined)?r:"";}function n(v,x,z,u,t){t=t||v.gestures[z.id];var w=(t&&t.bubbleTarget)||v,r=Z(w,x,u);if(r){j("fire",r,w);z.methodName=r;return w[r](z);}j("no handler",M(x,u),w);return true;}function d(AB,AC,r,w){var x=r.pageX,v=r.pageY,z=AB.timeStamp,t=X(r),AG={x:B.round(x-AC.pageX),y:B.round(v-AC.pageY)};var AF={id:t,evt:AB,pageX:x,pageY:v,clientX:r.clientX,clientY:r.clientY,target:r.target,delta:AG,date:z,stop:function(){j("event stopped",t);AB.stopPropagation();AB.cancelBubble=true;}};if(w){var u=z-w.date,AE=w.delta,AA={x:B.abs(AG.x-AE.x),y:B.abs(AG.y-AE.y)};AF.velocity={x:AA.x/u,y:AA.y/u};AF.isVertical=(AA.y>AA.x);AF.accelDelta=AA;var AD=AF.direction={};if(x!==w.pageX){AD.x=(x<w.pageX);}else{if(x!==AC.pageX){AD.x=(x<AC.pageX);}}if(v!==w.pageY){AD.y=(v<w.pageY);}else{if(x!==AC.pageX){AD.y=(v<AC.pageY);}}}return AF;}function I(v,r,u,t){return{s:v,p1:r,p2:u,evt:t,target:t.target};}function L(t,r){if(t){t.gestures[r]=null;}}function a(t,r){T(t);n(t,N,r);}function G(r){if(r._selectHandle){window.clearTimeout(r._selectHandle);delete r._selectHandle;j("cancelSelect","",r);}}function H(z,AB){var w=AB.which;if(w&&w===3){j("ignore","right mouse click",z);return ;}var AA=z.gestures,x=AB.touches||[AB],r=(AB.changedTouches&&AB.changedTouches[0])||AB,AE=k(z),AF=d(AB,r,r),AD=I(AF,AF,AF,AB);j("touchBegin","",z,r);if(x.length>1){if(!AE){AF.stop();j("ignore","cross widget multitouch",z,r);var v=J;if(v&&v.onCrossWidgetMultitouch!==undefined){j("call onCrossWidgetMultitouch for","",v);v.onCrossWidgetMultitouch();}return false;}}else{if(AE){j("forced deactivation","",z,r);T(z);AE=false;}}if(z.singleNode&&r.target!==z._tn){j("ignore","target is not touch node",z,r);return ;}if(mstrmojo.touchManager.notify(z.id,AF).ignore){AF.stop();return ;}if(!AE){var u=AF.target.tagName;u=u&&u.toLowerCase();if(u==="select"||u==="input"){j("ignore","target is input or select",z,r);if(z.monitorInputs){n(z,null,AF,P);}return ;}}AA[AF.id]=AD;if(AE){if(!z.multiTouch){G(z);var t=x[x.length-2],AC=AA[X(t)];n(z,S,t,AC.action,AC);}else{AD.action=C;if(z._singleTouch){G(z);z._singleTouch.action=C;delete z._singleTouch.bubbleTarget;delete z._singleTouch;n(z,f,AF,C);}}AF.stop();return ;}if(!V.contains(z._tn,AB.target,true,z.domNode)){delete AA[AF.id];return ;}z._singleTouch=AD;if(n(z,f,AF)===false){return ;}AF.stop();if(Z(z,f,l)){z._selectHandle=window.setTimeout(function(){AD.action=l;if(n(z,f,AF,l)===false){a(z,AF);}delete z._selectHandle;},F);}U(z);}function q(w,x){var AA=(x.changedTouches&&x.changedTouches[0])||x,t=w.gestures[X(AA)];if(!t){return ;}var u=d(x,t.s,AA,t.p2),v=t.action;t.p2=t.p1;t.p1=u;if(!v&&(B.abs(u.delta.x)>g||B.abs(u.delta.y)>g)){v=t.action=m;G(w);if(!Z(w,f,v)&&!Z(w,c,v)){u.methodName=M(f,v);return w.bubbleTouchEvent(u);}if(n(w,f,u,v)===false){a(w,u);return ;}}if(v){var r=t.lastMove||t.s.date,z=u.date-r;if(!mstrApp.isTouchApp()||z>=Y){t.lastMove=u.date;n(w,c,u,v);}}}function E(w,z){var r=(z.changedTouches&&z.changedTouches[0])||z,AA=(z.touches&&z.touches.length)||0,x=w.gestures,AD=X(r),AC=x[AD];if(!AC){j("No gesture",AD,w,r);return ;}var v=AC.action,AE=d(z,AC.s,r,AC.p2);if(!v){G(w);if(!AC.wasMulti){v=P;}}if(AA===0){T(w);w.gestures=[];j("gestures","clear all",w,r);}else{x[AD]=null;j("gestures","clear single",w,r);}L(AC.bubbleTarget,AD);switch(v){case m:case l:AE.stop();n(w,N,AE,v,AC);break;case C:if(AA<2){n(w,N,AE,v,AC);if(AA===1){var u=z.touches[0],AB=d(z,u,u),t=I(AB,AB,AB,z);t.wasMulti=true;x[X(u)]=t;w._singleTouch=t;}}if(AA>0){return ;}break;case P:if(!Z(w,null,v)){break;}var AF=w._tapHandler;if(AF){window.clearTimeout(AF.h);}if(AE.date-AC.s.date<F){if(n(w,"Before",AE,v,AC)===false){break;}if(!w.multiTap){AE.count=1;n(w,null,AE,v,AC);}else{if(AF){AF.count++;}else{AF=w._tapHandler={count:1};}AF.h=window.setTimeout(function(){AE.count=AF.count;n(w,null,AE,v,AC);delete w._tapHandler;},D);}}else{delete w._tapHandler;}break;}n(w,N,AE,undefined,AC);}function b(t){var r=t._tn;if(!r){return ;}if(!t._tmCallback){t._tsCallback=function(u){H(t,u);};t._tmCallback=function(u){q(t,u);};t._teCallback=function(u){E(t,u);};}o(r,V.TOUCHSTART,t._tsCallback);}mstrmojo._TouchGestures=mstrmojo.provide("mstrmojo._TouchGestures",{_mixinName:"mstrmojo._TouchGestures",singleNode:false,multiTouch:false,touchNode:null,multiTap:false,monitorInputs:false,postBuildRendering:function O(){if(this._super){this._super();}this._tn=this.touchNode||this.domNode;this.gestures=[];b(this);},bubbleTouchEvent:function e(z){var v=z.methodName,r=z.id,t=this.gestures[r],u=this.parent;while(u){var x=u[v],w=u.touchBegin;if(x&&(!w||n(u,f,z)!==false)){z.methodName=v;L(t.bubbleTarget,r);t.bubbleTarget=u;u.gestures[r]=t;j("bubble",((this.k)?" "+this.k:"")+"] bubbled "+v+" to ["+u.scriptClass+((u.k)?" "+u.k:"")+"]",this,z);return x.call(u,z);}u=u.parent;}return false;},unrender:function A(t){if(k(this)){T(this);}var r=this._tn;if(r){V.detachEvent(r,V.TOUCHSTART,this._tsCallback);}this._super(t);},restoreDefaultTouches:function R(r){if(W){W.allowDefaultTouches=r&&h;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var C=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(D,E){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(D,E,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,E,D,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(D,E,H){var F=D.blockCount,G={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:F,includeAncestorInfo:"true",includeObjectDesc:D.includeObjectDesc,encodeObjectInfo:false};if(D.folderLinksContextId){G.folderLinksContextId=D.folderLinksContextId;}if(D.sId){G.sessionState=D.sId;}if(E.fid){G.rootFolderID=E.fid;}else{if(E.fty){G.rootFolderType=E.fty;}}if(D.browsableTypes){G.objectType=D.browsableTypes;}if(E.blockBegin){G.blockBegin=E.blockBegin;}if(E.searchPattern){if(D.enableQuickSearch){G.quickSearch=D.enableQuickSearch;}G.searchPattern=E.searchPattern;if(E.recursive){G.recursive=E.recursive;}}this.serverRequest(G,H);},newFolder:function(G,H,F,D){var E={taskId:"createFolder",taskContentType:"json",folderID:G,name:H,description:F};this.serverRequest(E,D);},loadObjects:function B(H,I,D,G){var E=[],F=[];C.forEach(H,function(J){E.push(J.did);F.push(J.t);});if(H.length>0&&G){this.serverRequest({taskId:"getObjectInfo",objectIDs:E.join(","),objectTypes:F.join(","),includeDetails:true},I,D);}else{I.success();}},loadRecentSaveAsFolders:function A(E){var D={taskId:"getRecentSaveAsFolders"};this.serverRequest(D,E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var F=mstrmojo.hash;var D={SOLID_COLOR:0,NO_FILL:1,GRADIENT:2};mstrmojo.threshold.PropertyModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.PropertyModel",threshold:undefined,gridValueFormat:undefined,submitChange:function G(){this.raiseEvent({name:"propertyModelChange",threshold:this.threshold});},updateControl:function E(I){var H=this.threshold,J=F.copy(H.fmt,this.gridValueFormat);I.textGroup.setFormatSource(H);I.charGroup.setFormatSource(J);I.containerGroup.setFormatSource(J);},changeFormatProperty:function B(I,J,L){var H=this.threshold,K=I==="threshold"?H:H.fmt;if(!K&&I==="fmt"){K=H.fmt={};}K[J]=L;if(J==="bc"){if(typeof (L)==="string"){K.bgs=D.SOLID_COLOR;delete K.gdc;delete K.gda;}else{if(L===-1){K.bgs=D.NO_FILL;}else{K.bgs=D.GRADIENT;}}}},getReplaceTypeName:function A(){return"rtp";},getReplaceTextName:function C(){return"rtxt";}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var D={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};var C={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:D,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,useDarkTheme:false,init:function H(I){this.clear();this._super(I);},setAlignment:function E(I,J){this.alignment={host:I,popup:J};},addPopupHandlers:function F(I,K,J){this.popupHandlers[I]={open:K,close:J};},clear:function B(){this.popupHandlers={};var I=this.ENUM_CORNERS;this.alignment={host:I.BOTTOM_LEFT,popup:I.TOP_LEFT};},destroy:function(I){this.anchorElement=null;this.hostElement=null;if(this._super){this._super(I);}}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=D;mstrmojo.ui.PopupConfig.directionCfg={menuDirection:C.LEFT_TO_RIGHT,isRightToLeft:function G(){return this.menuDirection===C.RIGHT_TO_LEFT;},setDirection:function A(I){this.menuDirection=I?C.RIGHT_TO_LEFT:C.LEFT_TO_RIGHT;}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Obj","mstrmojo.string","mstrmojo.hash","mstrmojo.expr","mstrmojo.num","mstrmojo.mstr.EnumNodeDimty");var G=mstrmojo.array,S=mstrmojo.expr,L=S.ET,K=S.TP,D=S.DTP,M=mstrmojo.mstr.EnumNodeDimty,P=S.ET2TGT,O=S.ET2COND,C=mstrmojo.meta.TP,B=mstrmojo.num;function Q(V,A){var U=(A&&A.did)?A.did.split(S.FN_SEP):null,E=U&&parseInt(U[0],10),T=U&&parseInt(U[1],10),W=V.et;V.fnt=E;V.fn=T;if(W!=L.AE&&S.fn_List(T,E)){V.et=L.AL;V.a2=null;V.cs=null;}else{if(W==L.AL&&!S.fn_List(T,E)){V.et=L.AQ;V.cs=null;}else{if(W==L.MC&&!S.fn_AC_MC(T,E)){V.et=L.MQ;V.m2=null;}else{if(W==L.AC&&!S.fn_AC_MC(T,E)){V.et=L.AQ;V.a2=null;}}}}switch(T){case S.FN.IS_NULL:case S.FN.IS_NOT_NULL:V.a2=null;V.a3=null;V.fm2=null;V.fm3=null;V.m2=null;V.m3=null;V.cs=null;break;case S.FN.BETWEEN:case S.FN.NOT_BETWEEN:break;default:V.a3=null;V.fm3=null;V.m3=null;while(V.cs&&V.cs.length>1){V.cs.pop();}}}function H(Y,Z,a){var E=2+Z,W;if(B.isBigDecimal(a.v)){a.dtp=D.BIGDECIMAL;}switch(a.t){case K.PROMPT:W=Y.cs;var X;if(!W){W=[];Y.cs=W;}W[Z]={};X=W[Z];X.p=a;Y["a"+E]=null;Y["m"+E]=null;switch(Y.et){case L.AC:Y.et=L.AQ;break;case L.MC:Y.et=L.MQ;break;}break;case K.METRIC:Y["a"+E]=null;Y.cs=null;Y.et=L.MC;Y["m"+E]=a;break;case K.ATTR:Y["m"+E]=null;Y.cs=null;Y.et=L.AC;Y["a"+E]=a;Y["fm"+E]=null;break;default:Y["a"+E]=null;Y["m"+E]=null;W=Y.cs;if(!W){W=[];Y.cs=W;}if("did" in a){Y["a"+E]=null;Y["fm"+E]=null;Y["m"+E]=null;if(W[Z]&&W[Z].p){W[Z].p=null;}}else{if(a&&a.v!=null){W[Z]=a;}else{if(W[Z]&&Y.et!==L.AL){W=W.splice(Z,1);}}}if(!a.skipET){switch(Y.et){case L.MC:if((!Y.c2||!Y.m3)&&(!Y.m2||!Y.c3)){Y.et=L.MQ;}break;case L.AC:Y.et=L.AQ;break;case L.AL:if(!("did" in a)&&a.v){var A,U=a.dtp;W=[];A=a.v.split(mstrConfig.listSep);for(var T=0,V=A.length;T<V;T++){W.push({v:mstrmojo.string.trim(A[T]),dtp:U});}Y.cs=W;}break;}}}}var J={};J[L.AQ]={target:1,fm:1,fn:1,cs:1};J[L.AL]={target:1,fm:1,fn:1,cs:1};J[L.AE]={target:1,fn:1,es:1};J[L.AC]={target:1,a2:1,a3:1,fm:1,fm2:1,fm3:1,fn:1};J[L.MQ]={target:1,fn:1,cs:1,dmy:1};J[L.MC]={target:1,fn:1,m2:1,m3:1,dmy:1};J[L.F]={target:1};J[L.R]=J[L.F];J[L.XML]={target:1};J[L.ANDOR]={target:1};var I=function(A){return A!==null&&A!==undefined;};var N=function(Z){if(Z.data){return true;}if(!Z||!I(Z.et)){return false;}var Y=true,A=J[Z.et],W=Z.cs,V;Y=Y&&(!A.target||Z[P[Z.et]]);Y=Y&&(!A.fm||Z.fm);Y=Y&&(!A.fn||I(Z.fn));var U=S.fnCstCount(Z.fn,Z.fnt);if(Y&&A.cs){for(V=0;V<U;V++){Y=Y&&W&&I(W[V]);}}if(Y){var X=[P[Z.et],"fm"];for(var E=0;E<2;E++){for(V=0;V<U;V++){var a=X[E]+(2+V);Y=Y&&(!A[a]||Z[a]);}}}Y=Y&&(!A.es||Z.es&&(Z.es.length>0));var T=Z.dimtyTypes;Y=Y&&(!A.dmy||T[M.NodeDimtyUnspecified]||T[M.NodeDimtyNone]||(T[M.NodeDimtyOutputLevel]&&Z.dmy&&Z.dmy.uts&&(Z.dmy.uts.length>0)));return Y;};mstrmojo.ConditionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ConditionModel",data:null,completed:false,defaultETAttr:L.AQ,init:function(A){if(this._super){this._super(A);}this._updateCompleted();},edit:function R(o,e,AB){var V=this[o];if(V===e){return ;}this.etWas=this.et;switch(o){case"not":e=!!(e&&e.did===S.FN.NOT);V=!!this.not;if(e===V){return ;}this.not=!!e||null;break;case"target":var AF=this.et;if(e){switch(e[C]){case K.ATTR:case K.CONS:V=this.a;if(AF!==L.AQ&&AF!==L.AE&&AF!==L.ANDOR){this.et=this.defaultETAttr;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}if(AF!==L.AE){this.fn=null;this.fnt=null;}this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case K.METRIC:V=this.m;if((AF!==L.MQ)&&(AF!==L.MC)){this.et=L.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.r=null;this.f=null;this.cs=null;this.dmt=M.NodeDimtyUnspecified;}this.m2=null;break;case K.REPORT:V=this.r;if(AF!==L.R){this.et=L.R;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.f=null;}break;case K.FILTER:V=this.f;if(AF!==L.F){this.et=L.F;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;}break;case K.PROMPT:V=this.prms&&this.prms[0];if(AF!==L.XML){this.et=L.XML;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}break;}}this.es=null;this.data=null;this[P[this.et]]=e;break;case"fm":if(e&&e[C]==="fn"){this.et=L.AE;this.fm=null;Q(this,e);}else{this.fm=e;if(e&&(this.et==L.AE)){this.et=L.AQ;}this.fnt=null;this.fn=null;this.cs=null;this.a2=null;this.fm2=null;}break;case"fm2":case"fm3":this[o]=e;break;case"fn":Q(this,e);break;case"es":var AI=this.es;if(e&&e.removed&&AI){G.removeItems(AI,e.itemIdField,e.removed);}if(e&&e.added){if(!AI){AI=e.added.concat();this.es=AI;}else{G.insert(AI,AI.length,e.added);}}break;case"c0":H(this,0,e);break;case"c1":H(this,1,e);break;case"dmy":var AC=this.dmy;if(!AC){AC={cc:true,fres:true,uts:[]};this.dmy=AC;}var x=AC&&AC.uts;if(!x){x=[];AC.uts=x;this.dmt=M.NodeDimtyOutputLevel;}var T={};T[S.TP.ATTR]=true;T[S.TP.DIM]=true;if(e&&e.removed){var j=[],A=false,Z=[],U=false;for(var m=0,W=e.removed,E=W.length;m<E;m++){var Y=W[m],AE=Y[C] in T;if(AE){U=true;}else{A=true;}var l=AE?Z:j;l.push(Y);}if(A){G.removeItems(x,"did",j);}if(U){var AH={};for(var g=0,f=x&&x.length;g<f;g++){var d=x[g];if(d&&d.utgt){AH[d.utgt.did]=g;}}var X=[];for(var AD=0,AA=Z.length;AD<AA;AD++){var k=AH[Z[AD].did];if(k>-1){X.push(k);}}X.sort(G.numSorter);for(var w=X.length-1;w>-1;w--){x.splice(X[w],1);}}}if(e&&e.added){var AJ=[],p=S.DMY_TP.DIM,t=S.DMY_TP.ATTR;for(var AG=0,z=e.added,h=z.length;AG<h;AG++){var q=z[AG];AJ.push((q[C] in T)?{utgt:q,utp:q[C]===K.DIM?p:t,agg:1,flt:2,gb:true,rps:0,n:q.n}:q);}G.insert(x,x.length,AJ);}break;case"data":this.data=e;break;}this._updateCompleted();if(!AB){this.raiseEvent({name:"edit",prop:o,value:e,valueWas:V});}},get:function F(){var A=this.data?this.data:this;var E=O[A.et]||[];E.push("et");return mstrmojo.hash.copyProps(E,A);},_updateCompleted:function(){this.set("completed",N(this));}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj");function B(J,I){this.raiseEvent({name:"viCompBuilt",type:J,widget:I});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function G(I){this._super(I);this.relativePanels={};this.comps={};},addRelativePanel:function H(I){this.relativePanels[I]=true;},isRelativePanel:function F(I){return !!this.relativePanels[I];},isComponent:function C(J,I){return this.getComponentKey(J)===I;},getComponent:function A(I){return this.comps[I];},getComponentKey:function D(J){var I=this.getComponent(J);return(I&&I.k)||"";},createComponent:function E(L,K,J){B.call(this,L);var I=new K(J);this.comps[L]=I;B.call(this,L,I);return I;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo._Fetchable");var A=mstrmojo.hash;mstrmojo.mstr.DocElementDataHelper=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._Fetchable],{scriptClass:"mstrmojo.mstr.DocElementDataHelper",source:null,items:null,browseConfig:null,concat:true,init:function(B){var C=B&&B.browseConfig;this.blockBegin=(C&&C.blockBegin)||1;this.blockCount=(C&&C.blockCount)||mstrApp.elementsBlockCount||30;if(this._super){this._super(B);}},getBrowseConfig:function(){if(!this.browseConfig){this.browseConfig={blockBegin:this.blockBegin,blockCount:this.blockCount};}return this.browseConfig;},_retrieveItems:function(E,C,B){var D=this.getBrowseConfig();D.blockBegin=E;mstrmojo.func.override({success:function(F){if(this._super){this._super(mstrmojo.hash.copy(F,{items:F.es,totalSize:F.sz}));}}},C);this.source.browseElements(D,C,B);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func");var A=mstrmojo.string;mstrmojo.ResSetLink=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ResSetLink",SAME_PROMPT:1,DO_NOT_ANSWER:2,CLOSE:3,DYNAMIC:4,STATIC:5,CURRENT_UNIT:6,ALL_VALID_UNITS:7,USE_DEFAULT_ANSWER:8,DYNAMIC_OR_SAME_PROMPT:9,toXml:function B(){var M=this,E=function(S,T){return" "+S+'="'+T+'"';},D=function(S,T){return E(S,mstrmojo.string.encodeXMLAttribute(T));},H=new mstrmojo.StringBuffer(),F=function(T,U){var S=mstrmojo.string.multiReplace(U.disp_n,{"&nbsp;":" "});T.append("<e"+D("ei",A.decodeXMLAttribute(U.ei))+D("disp_n",A.decodeXMLAttribute(S))+E("emt",U.emt)+"/>");};var K=this.prms,C=K&&K.length;if(C||M.aopam!=M.DO_NOT_ANSWER){H.append("<hl"+E("mid",M.mid)+E("srct",M.srct)+E("aopam",M.aopam)+">");if(C){H.append("<prms>");for(var G=0;G<C;G++){var R=K[G];H.append("<prm"+E("id",R.id)+E("am",R.am)+E("pt",R.pt));if(R.orid){H.append(E("orid",R.orid)+E("ortp",R.ortp));}H.append(">");switch(R.am){case M.DO_NOT_ANSWER:case M.CLOSE:case M.USE_DEFAULT_ANSWER:case M.SAME_PROMPT:break;case M.STATIC:H.append('<pa ia="1"><es>');var Q=R.pa.es,P=Q&&Q.length||0;for(var L=P-1;L>=0;--L){var J=Q[L];F(H,J);}H.append("</es></pa>");break;case M.DYNAMIC:case M.CURRENT_UNIT:case M.DYNAMIC_OR_SAME_PROMPT:var O=R.pa;if(O){H.append('<pa ia="1">');var N=O.a;if(N){H.append("<a"+E("id",N.id)+D("n",N.n)+">");}if(R.pt===1){H.append(mstrmojo.string.encodeXMLAttribute(O.v));}else{H.append("<es"+E("dispForms",N&&N.dispForms>=0?N.dispForms:"")+">");var Q=O.es;P=Q&&Q.length||0;for(var L=P-1;L>=0;--L){var J=Q[L];F(H,J);}H.append("</es>");if(N){H.append("</a>");}}H.append("</pa>");}break;case M.ALL_VALID_UNITS:var O=R.pa;if(O){H.append('<pa ia="1">');var N=O.a,I=(N&&N.length)||0,G;if(I===0&&R.pt===1){H.append(mstrmojo.string.encodeXMLAttribute(O.v));}else{H.append("<attGroups><attGroup>");for(G=0;G<I;G++){H.append("<a"+E("id",N[G].id)+D("n",N[G].n)+">");if(R.pt===1){H.append(mstrmojo.string.encodeXMLAttribute(O.v));}else{H.append("<es"+E("dispForms",N[G].dispForms>=0?N[G].dispForms:"")+">");F(H,O.es[G]);H.append("</es>");}H.append("</a>");}H.append("</attGroup></attGroups>");}H.append("</pa>");}}H.append("</prm>");}H.append("</prms>");}else{H.append("<prms/>");}H.append("</hl>");}return H.toString();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.dom","mstrmojo.array");var R=Math,U=mstrmojo.publisher.hasSubs,Q=mstrmojo.hash,F=Q.forEach,a=mstrmojo.dom;var S=0.15;var d=1,T=2;var B={y:{edge:["top","bottom"],size:0},x:{edge:["left","right"],size:0},clsName:"mstrmojo-touch-scroll-indicator",init:function Y(){var h=this.y,g=this.x;if(!h.i){var j=h.i=document.createElement("div");j.className=this.clsName;var k=g.i=j.cloneNode(false);document.body.appendChild(j);document.body.appendChild(k);}},setGradient:function Z(o,j,p,l){var n=o.i,h=o.edge[j?1:0];var m=R.min(R.round(R.min(R.abs(p)/200,1)*100),l/2),g="left top",k="left bottom";if(j){k=g;if(h==="bottom"){g="left bottom";}else{g="right top";}}else{if(h==="left"){k="right top";}}if(m!==o.size){n.style.background="-webkit-gradient(linear, "+g+", "+k+", from(rgba(39, 104, 162, .4)), to(rgba(39, 104, 162, 0)), color-stop("+(m/100)+", rgba(39, 104, 162, 0)))";o.size=m;}},scrollAxis:function D(k,u,m,r,j){var AA=u-m,h=j[k]=(AA!==0);if(!h){this.hide(k);return ;}var n=this[k],q=n.i,g=q.style,o=(k==="y"),p=(AA>0),t=this.clsName+" "+n.edge[p?1:0];if(!n.size||q.className!==t){q.className=t;var v="px",AB=3,w=r.y,l=r.x,x=100,z=r.w;if(o){if(p){w+=r.h-x-AB;}}else{z=x;x=r.h;if(p){l+=r.w-z-AB;}}g.top=w+v;g.left=l+v;g.width=z+v;g.height=x+v;g.display="block";}this.setGradient(n,p,AA,o?r.h:r.w);},scroll:function D(k,j,n,m,q){var p=j.x,o=j.y;if(p!==n||o!==m){this.init();var l=this._widgetPosition;if(!l){var g=k.indicatorEl||q;l=mstrmojo.dom.position(g.parentNode);}var h=k._outOfBounds||{};this.scrollAxis("y",o,m,l,h);this.scrollAxis("x",p,n,l,h);this._widgetPosition=l;k._outOfBounds=h;}else{this.hideAll();delete k._outOfBounds;}},hide:function M(h){var g=this[h];if(g.size!==undefined){g.i.style.display="none";g.i.className=this.clsName;g.size=0;}},hideAll:function b(){this.hide("y");this.hide("x");delete this._widgetPosition;}};function W(g,h){return h?R.max(R.min(R.round(g),h.end),h.start):g;}function O(g,j,h){h.name=j;h.id=g.identifier;g.raiseEvent(h);}function G(){var h="scrollDone",g=this.origin;if(U(this.id,h)&&g){O(this,h,{x:g.x,y:g.y});}this.stopDeceleration();}function I(j,h,m){var l=j.scrollEl;if(!l){G.call(j);return ;}var k={x:h.x||0,y:h.y||0};F(j._scrollBarEls,function(AA,t){var AF=(t==="x"),z=k[t],n=AA.length,AB=AA.ratio,w=AA.viewportSize,r=6/n,q=AA["base"+(AF?"Left":"Top")],x=q+w-n,p=R.round(q+(AB*z));if(p<q){p=q-z;n+=z;}else{if(p>x){var AE=(z-j.offset[t].end)*AB;p=R.min(x+AE,w+q-6)-1;n-=AE;}}var AD=0,o=[AD,AD,AD],u=[1,1,1],AC=AF?0:1;o[AC]=(p-q);u[AC]=R.min(R.max(n/AA.length,r),1);a.translate(AA,o[0],o[1],o[2]," scale3d("+u.join(",")+")");});if(m){m+="ms";}if(j._isHosted){var g=l.parentNode;g.scrollTop=k.y;g.scrollLeft=k.x;}else{l.style[a.CSS3_TRANSITION_DURATION]=m||"0";a.translate(l,-k.x,-k.y,0,j.transform,j.useTranslate3d);}if(U(j.id,"scrollMoved")){O(j,"scrollMoved",{x:h.x,y:h.y});}}function J(g,h,j){return R.ceil(1+R.log(g/R.abs(h))/R.log(1-j));}function E(g,l,j,h,k){return g+(l*(j*(1-R.pow(1-k,h))/k));}function N(AF,AP,m,AL,w,AK,r){var q=AF.offset[m];if(!q){return AP;}var l=AF._outOfBounds,h=l&&l[m],u=q.incFetch,v=AF.friction,p=q.start,o=q.end,AG=AL?o:p;w=R.abs(w);if(h){AL=(AP<p);AG=AL?p:o;}var AO=AL?1:-1;if(h&&(AL||!u)){var t=S*3,AN=1/(1-v),k=t/R.pow((1-v),(R.log(1-R.abs(AP-AG)*(1-AN)/t)/R.log(AN))-1);var AD=R.round(E(AP,AO,k,AK,v));if(AL?(AD>=AG):(AD<=AG)){G.call(AF);return AG;}return AD;}var AJ=q.pageSize,AI=q.supportedEdges;var n=E(AP,AO,w,AK,v),x=(n<=p),j=(n>=o);if(x||j){if(u&&((x&&((AI&d)>0))||(j&&((AI&T)>0)))){if(n-o>=AJ){n=o+AJ;AG=n;}if(!AF.STATUS_INC_FETCH){AF.STATUS_INC_FETCH=true;O(AF,"incFetch",{edge:j?T:d});}}else{if(AF.bounces){var AM=v*2,z=AF.bounceVelocity,g=AF.bounceTime,AH=AF.bounceDistance;if(!AF.hasBounced){z[m]=R.abs(S/R.pow(1-v,r-AK-1));g[m]=J(S,z[m],AM);AH[m]=R.abs(E(n,AO,z[m],g[m],AM)-n);AF.raiseEvent({name:"bounceOut",id:AF.identifier,axis:m,direction:AL,value:R.round(n)});AF.hasBounced=true;}var AC=Math.floor(AH[m]/2);var AB=E(AG,AO,z[m],AK,AM),AE=R.abs(AB-AG);if(R.abs(AE)<AC){return AB;}if(R.abs(AE)>=AH[m]){G.call(AF);return AG;}var AA=AC-(AE-AC);return R.round(AG-(AL?-AA:AA));}n=AG;}}return R.round(n);}function P(h){var g=this._scrollListener;if(g){if(!h||h!==g.el){a.detachEvent(g.el,"scroll",g.fn);delete this._scrollListener;return true;}return false;}return true;}mstrmojo.TouchScroller=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.TouchScroller",scrollEl:null,identifier:"",hScroll:false,vScroll:false,offset:null,origin:null,transform:"",friction:0.0015,frameRate:60,bounces:true,hasBounced:false,bounceDistance:{},bounceTime:{},bounceVelocity:{},showScrollbars:false,showIndicators:true,useTranslate3d:true,STATUS_INC_FETCH:false,init:function Y(g){this._super(g);B.init();},initScroller:function X(h){Q.copy(h,this);var l=this.scrollEl;if(l){var k=this._isHosted=false;if(k){var g=l.parentNode;if(P.call(this,g)){g.style.overflow="auto";var m=this.id,j=this._scrollListener={el:g,fn:function(n){var o=mstrmojo.all[m].origin,p=n.target;o.x=p.scrollLeft;o.y=p.scrollTop;}};a.attachEvent(g,"scroll",j.fn);}this.showScrollbars=false;}}},canScroll:function L(){return this.vScroll||this.hScroll;},updateScrollBars:function H(o,k){var m=this.scrollEl;if(!this.showScrollbars||!m){return ;}var h=this._scrollBarEls;if(!h){var l=this;h=this._scrollBarEls={x:"hScroll",y:"vScroll"};F(h,function(p,q){if(l[p]){var r=document.createElement("div");r.className="mstrmojo-touch-scrollBar "+q+"Axis";(k||m.parentNode).appendChild(r);h[q]=r;}else{delete h[q];}});}if(!o){var g=this.scrollEl.parentNode;o={top:0,right:g.clientWidth,bottom:g.clientHeight,left:0};}var n=9,j={x:{left:o.left,top:o.bottom-n,x:o.right-o.left,d:"Width"},y:{left:o.right-n,top:o.top,x:o.bottom-o.top,d:"Height"}};F(h,function(v,r){var AC=v.style,AA=j[r],t=AA.d,u=v.parentNode,AB=AA.x;var q=AA.left,z=AA.top,w=AB/m["offset"+t],p=Math.min(Math.round(AB*w),AB);v.baseLeft=q;v.baseTop=z;v.ratio=w;v.viewportSize=AB;v.length=p;AC.left=q+"px";AC.top=z+"px";AC[t.toLowerCase()]=p+"px";});},toggleScrollBars:function C(g){F(this._scrollBarEls,function(h){h.style.opacity=g?1:0;});},scrollTo:function(h,m,k){if(!this.canScroll()&&!(h===0&&m===0)){I(this,{x:0,y:0});return ;}var l=this.offset,j=this.origin,g={x:(this.hScroll)?W(h,l.x):0,y:(this.vScroll)?W(m,l.y):0};I(this,g,k);j.x=g.x;j.y=g.y;},scrollToEnd:function(h,m,k){var j=this.origin,l=this.offset,g={x:0,y:0};if(j&&l){mstrmojo.array.forEach([h,m],function(o,n){var q=n?"y":"x",p=l[q];g[q]=o?(p&&p.end)||0:j[q];});}this.scrollTo(g.x,g.y,k);},scroll:function D(m){if(this._isHosted){return ;}var k=this.offset,u=this.scrollEl,w=m.delta,x=w.x,v=w.y;if(!u){return ;}if(!k&&this.showIndicators){B.scroll(this,{x:(this.noHScroll)?0:-x,y:(this.noVScroll)?0:-v},0,0,u);return ;}var t=this.origin,n={x:(this.hScroll)?R.round(t.x-x):0,y:(this.vScroll)?R.round(t.y-v):0},q=W(n.x,k.x),p=W(n.y,k.y);if(!k.scrollPast){if(this.showIndicators){B.scroll(this,n,q,p,u);}n.x=q;n.y=p;}else{var l=(q!==n.x),o=(p!==n.y),g=(l||o),j=this._outOfBounds,h="";if(j){if(l!==(j.x===true)||o!==(j.y===true)){h="scrollIn";}}else{if(g){h="scrollOut";}}if(h){if(U(this.id,h)){var r=m.direction;O(this,h,{x:{position:n.x,direction:r.x},y:{position:n.y,direction:r.y}});}if(g){this._outOfBounds={x:l,y:o};}else{delete this._outOfBounds;}}}I(this,n);},scrollEnd:function V(v){B.hideAll();if(!this.canScroll()||this._isHosted){return ;}var AE=this.id,w=this.friction,AM=1/(1-w),AF=this.origin,k=v.velocity,AK=v.direction,AD=new Date(),l=this._outOfBounds,r=this.offset,AL={x:this.hScroll,y:this.vScroll},x={},AO={},AN={},t={},n={},u={},p={},o={},AH={},AJ=function(AR){u[AR]=S;var AQ=r[AR],AP=(l&&l[AR]),AS=(AP&&(!AQ||!r.scrollPast));AO[AR]=(AL[AR]&&!AS)?AF[AR]-v.delta[AR]:AF[AR];if(AQ){p[AR]=AQ.start;o[AR]=AQ.end;if(AP){if(!AS){AK[AR]=(AO[AR]<p[AR]);AH[AR]=(AK[AR])?p[AR]:o[AR];if(AK[AR]||!AQ.incFetch){u[AR]=S*3;k[AR]=u[AR]/R.pow((1-w),(R.log(1-R.abs(AO[AR]-AH[AR])*(1-AM)/u[AR])/R.log(AM))-1);}}else{AO[AR]=W(AF[AR]-v.delta[AR],AQ);}}}x[AR]=(AL[AR]&&!AS)?R.abs(k[AR]):0;AN[AR]=(AK[AR]||false)?1:-1;t[AR]=J(u[AR],x[AR],w);n[AR]=E(AO[AR],AN[AR],x[AR],t[AR],w);};AJ("x");AJ("y");AF.x=AO.x;AF.y=AO.y;var AB=(x.x>0),AA=(x.y>0);if(!r.scrollPast&&!AB&&!AA){G.call(this);var m,AG,z,j,AI;for(m in r){AG=r[m];AI=AG.supportedEdges;z=((AG.start===AO[m])&&((AI&d)>0));j=((AG.end===AO[m])&&((AI&T)>0));if(AG.incFetch&&(z||j)){this.STATUS_INC_FETCH=true;O(this,"incFetch",{edge:j?T:d});}}return ;}this.hasBounced=false;this.bounceDistance={};this.bounceTime={};this.bounceVelocity={};this.decelerating=true;var h=Math.round(1000/this.frameRate),q=AD,AC,g={x:AB,y:AA};this.decelerationTimer=window.setTimeout(function(){var AP=mstrmojo.all[AE],AQ=AP.origin,AU=new Date(),AV=(AU-AD),AT;if(AP._halt){G.call(AP);return ;}AC=AU-q;q=AU;if(AC>(h+5)){h=h+R.round((AC-h)/2);}for(AT in g){if(g[AT]){var AS=N(AP,AO[AT],AT,AK[AT],x[AT],AV,t[AT]);if(!isNaN(AS)){AQ[AT]=AS;}}}I(AP,AQ);var AR=(AV>t.x&&AV>t.y);if(!AR&&!AP.bounces){AR=true;mstrmojo.hash.forEach(r,function(AY,AX){var AW=AQ[AX];if(AW!==AY.end&&AW!==AY.start){AR=false;return false;}});}if(AR){G.call(AP);}else{if(AP.decelerating){AP.decelerationTimer=window.setTimeout(arguments.callee,h);}}},h);},stopDeceleration:function A(){var g=!!this.decelerating;if(g){if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}delete this.decelerating;this.toggleScrollBars(false);}delete this._outOfBounds;delete this.hasBounced;delete this.bounceDistance;delete this.bounceTime;delete this.bounceVelocity;delete this._halt;return g;},haltScroller:function K(){this._halt=!!this.decelerating;},unrender:function c(){delete this.scrollEl;},destroy:function e(){this.stopDeceleration();P.call(this);this._super();}});mstrmojo.TouchScroller.getScrollPositionTotals=function f(l){var j=l.parent,g=l._scroller,h=mstrmojo.hash.copy((g&&g.origin)||{x:0,y:0});if(j){var k=mstrmojo.TouchScroller.getScrollPositionTotals(j);h.x+=k.x;h.y+=k.y;}return h;};mstrmojo.TouchScroller.ScrollIndicators=B;mstrmojo.TouchScroller.EnumIncFetchEdges={start:d,end:T};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var K=mstrmojo.hash;var P=0;var F=[];var J={};var L=false;function I(T){var U=T.callback;if(U.submission){U.submission(T.id,this.userInteractionRequired(T),T);}this.submitRequest(T);}function G(){if(F.length&&!L){I.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(d,a,U,V){if(U){this.cancelRequests();}var X=this.id,Y=this.transport,T=mstrmojo.now()+a.taskId+P++,W=d.canceled||mstrmojo.emptyFn;d.canceled=function(e){W();d.complete(true);return Y.cancelRequest(e);};d=mstrmojo.func.wrapMethods(d,{complete:function(e){mstrmojo.all[X]&&mstrmojo.all[X].deleteRequest(e);}});var Z=!K.isEmpty(this._requests),b=this.createRequest(T,d,a,V),c=(L||Z)&&!V.doNotHold;if(c){F.push(b);}else{I.call(this,b);}return T;},hasRequests:function O(){return !K.isEmpty(this._requests)||L;},createRequest:function Q(V,X,W,T){var U=this._requests;if(!U){U=this._requests={};}U[V]={id:V,callback:X,params:W,config:T};return U[V];},submitRequest:function M(T){this.transport.serverRequest(this.id,T.id,T);},cancelRequests:function S(){var T=false;K.forEach(this._requests,function(U){if(U.gotResponse===undefined){T|=U.callback.canceled(U.id);}});this._requests={};F=[];return T;},cancelRequest:function B(X){var U=false,W=this._requests[X],V,T=F.length;for(V=0;V<T;V++){if(F[V]===W){break;}}if(V<T){F.splice(V,1);delete this._requests[X];U|=W.callback.canceled(W.id);}return U;},response:function A(X,T,V){$MAPF(false,"AndroidServerTransport","transportRequest");var W=this.getRequest(X);if(W){W.gotResponse=true;var Y=W.callback,U=(T&&!V.mstrerr)?"success":"failure";try{if(Y[U]){Y[U](V,W);}}finally{Y.complete(X);}}G.call(this);},deleteRequest:function N(U){var T=this._requests;delete T[U];},getRequest:function H(U){var T=this._requests;return T&&T[U];},userInteractionRequired:function C(T){return false;},addLoadingGraph:function D(T){J[T]=true;L=true;},removeLoadingGraph:function R(T){delete J[T];if(K.isEmpty(J)){L=false;G.call(this);}},_serverRequestParallel:function(U,W,X,T){var V=T||new mstrmojo.SimpleXHR();V.request("POST",U,{success:function(Y){if(X.success){X.success(Y);}},failure:function(Y){if(X.failure){X.failure({code:Y.getResponseHeader("X-MSTR-TaskErrorCode"),message:Y.getResponseHeader("X-MSTR-TaskFailureMsg")});}},complete:function(){if(X.complete){X.complete();}}},W);},serverRequestParallel:function(U,V,T){this._serverRequestParallel(mstrConfig.taskURL,U,V,T);},upload:function(Z,Y,X,U,W,V,T){mstrmojo.xhr.upload("POST",mstrConfig.taskURL,Z,Y,X,U,W,V,T);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.color","mstrmojo.hash","mstrmojo.num","mstrmojo.array","mstrmojo.date");mstrmojo.requiresClsP("mstrmojo.mstr");var j=1,g=2,p=3,I=4,Z=5,k=6,h=7,A=-1,J=-2,G=mstrmojo.color,M=mstrmojo.hash,c=mstrmojo.array,F=mstrmojo.num,O=mstrmojo.date,K,Y,r=mstrmojo.mstr.EnumDSSXMLObjectTypes;function o(AA,z){return AA.every(function(AB){return z(AB);});}function e(AB,AA,z){return o(AB,function(AC){return AC.ttp===AA||AC.ttp===z;});}function b(AA){var z=AA.toFixed(2);return parseFloat(z);}function n(z){this.raiseEvent(M.copy(z,{name:"modelEdit"}));}function t(z){this.raiseEvent(M.copy(z,{name:"selectedThresholdsChange"}));}function S(){var z=this.basedOnId||this.metricId;return c.filterOne(this.data.gsi.mx,function(AA){return AA.did===z;});}function l(AC){var z=AC.expr.nds,AA=z.length;if(AA!==1){return false;}var AB=z[0],AL=AB.cs;if(!AB.m||!AL){return false;}var AK=AB.fnt,AF=AB.fn,AJ=AL[0],AH=AL[1],AE=AJ&&AJ.v,AD=AH&&AH.v,AI=F.parseNumeric(AE)||parseFloat(AE),AG=F.parseNumeric(AD)||parseFloat(AD);switch(AK){case 2:case 3:switch(AF){case 1:case 2:AC.flr=AK===2?-Infinity:0;AC.ceil=AI;AC.ttp=AK===2?(AF===1?Z:I):(AF===1?g:j);break;case 3:case 4:case 5:case 13:AC.flr=AI;AC.ceil=isNaN(AG)?(AK===2?Infinity:100):AG;AC.ttp=AK===2?(AF===4?Z:(AF===5?I:k)):(AF===4?g:(AF===5?j:p));break;default:return false;}break;default:switch(AF){case 11:AC.flr=-Infinity;AC.ceil=AI;AC.ttp=h;break;case 17:case 10:AC.flr=AI;AC.ceil=isNaN(AG)?Infinity:AG;AC.ttp=h;break;default:return false;}}return true;}mstrmojo.threshold.MetricThresholdData=null;mstrmojo.threshold.ThresholdModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.ThresholdModel",data:undefined,thresholds:undefined,orgThresholds:undefined,selectedThresholds:[],metricId:undefined,basedOnId:undefined,editorMode:0,init:function q(AA){this._super(AA);var z=mstrApp.customization.getCustomThresholds();K=K||z.color;Y=Y||z.image;},ondataChange:function m(){this.thresholds=this.data.gsi.thresholds;this.saveOriginalData();},isAdvanced:function E(AD){var AA=this.thresholds;if(AA){var AG=AA[AD]||[],AU=false,AT,AN,AR="The expression is not supported by the Simple Threshold Exception Parser.";if(AG.length===0){return false;}if(AG.some(function(Aa){if(Aa.ttp===A){return true;}try{if(!l(Aa)){throw AR;}AN=Aa.expr.nds[0].m.did;}catch(AZ){return true;}if(AT&&AT!==AN){return true;}AT=AN;var AY=Aa.rtp;if(AY===3||AY===10){return true;}var AV=Aa.scope;if(AV&&AV!==1){return true;}var AX=Aa.fmt||{};for(var AW in AX){if(AW!=="bc"&&AW!=="bgs"){return true;}else{AU=true;}}return false;})){return true;}if(AU&&!o(AG,function(AV){return AV.fmt&&(AV.fmt.bc||AV.fmt.bgs);})){return true;}this.basedOnId=AT;var AO=false,AM=this.getSimpleThresholdType(AD),AF=AG.length;if(AF>0&&AM!==J){var AQ,AI,AK;for(AQ=0;AQ<AF-1;AQ++){AI=AG[AQ];AK=AG[AQ+1];if(AI.ceil!==AK.flr&&AI.flr!==AK.ceil){AO=true;break;}}if(!AO){var z=AG[0],AB=AG[AF-1],AJ=z.flr,AP=AB.ceil,AC=z.ceil,AE=AB.flr,AH=this.getMetricsCount(),AL=this.getMetricsMinValue(),AS=this.getMetricsMaxValue();switch(AM){case Z:case I:AO=!(((AJ===0||AJ===-Infinity)&&(AP===AH||AP===Infinity))||((AC===AH||AC===Infinity)&&(AE===0||AE===-Infinity)));break;case g:case j:AO=!((parseInt(AJ,10)===0&&parseInt(AP,10)===100)||(parseInt(AC,10)===100&&parseInt(AE,10)===0));break;case h:AO=!(((AJ===AL||AJ===-Infinity)&&(AP===AS||AP===Infinity))||((AC===AS||AC===Infinity)&&(AE===AL||AE===-Infinity)));break;}}return AO;}else{return true;}}return false;},getSimpleThresholdType:function(AA){var AB=this.thresholds&&this.thresholds[AA],z=J;if(AB){if(e(AB,p,g)){z=g;}else{if(e(AB,p,j)){z=j;}else{if(e(AB,k,I)){z=I;}else{if(e(AB,k,Z)){z=Z;}else{if(e(AB,h)){z=h;}}}}}}return z;},isImageBasedType:function N(z){var AA=this.thresholds&&this.thresholds[z];return AA&&!AA.some(function(AB){return AB.rtp!==4;});},getMetricsMaxValue:function(){var z=S.call(this).max;return(z===undefined)?3000000:z;},getMetricsMinValue:function(){var z=S.call(this).min;return(z===undefined)?-3000000:z;},getMetricsCount:function(){var z=S.call(this).cnt;return z===undefined?100:z;},getServerThresholdValues:function B(){var z=this.basedOnId||this.metricId,AA=this.thresholds&&z in this.thresholds&&this.thresholds[z];if(c.isArray(AA)&&AA.length>0&&AA[0].ttp===h){AA.sort(function(AC,AB){return AC.flr-AB.flr;});return{min:AA[0].ceil,max:AA[AA.length-1].flr};}return{min:undefined,max:undefined};},getFormatString:function(){var AB=this.data.nf,AA=this,z=c.filterOne(AB,function(AC){return AC.id===AA.basedOnId;})||{};return z.nfs||"";},getDefaultColors:function w(){return K;},getDefaultImages:function L(){return Y;},getNormalizedValue:function(AE,AC,AB,AG){var AA=null;if(AC===p||AC===g||AC===j){AA=AE/100;}else{if(AC===k||AC===Z||AC===I){AA=AE/(this.getMetricsCount());}else{if(AC===h){var AD=this.globalMinMax(AB,AG),z=AD.min,AF=AD.max;if(AG!==undefined&&AG<AF){AF=Math.max(AG,this.getMetricsMaxValue());}if(AB!==undefined&&AB>z){z=Math.min(AB,this.getMetricsMinValue());}if(AF===z){return 1;}AA=(AE-z)/(AF-z);}}}if(AA<0){AA=0;}if(AA>1){AA=1;}return AA;},getRealValue:function(AD,AB,AA,AF){if(AB===p||AB===g||AB===j){return b(AD*100);}if(AB===k||AB===Z||AB===I){return b(AD*this.getMetricsCount());}if(AB===h){var AC=this.globalMinMax(AA,AF),z=AC.min,AE=AC.max;if(AF!==undefined&&AF<AE){AE=Math.max(AF,this.getMetricsMaxValue());}if(AA!==undefined&&AA>z){z=Math.min(AA,this.getMetricsMinValue());}return z+AD*(AE-z);}return null;},globalMinMax:function d(AA,AE){var z=(AA!==undefined&&AA!==-Infinity)?AA:Infinity,AD=(AE!==undefined&&AE!==Infinity)?AE:-Infinity,AB=this.getServerThresholdValues(),AC=AB.min,AF=AB.max;AC=(AC===undefined)?Infinity:AC;AF=(AF===undefined)?-Infinity:AF;return{min:Math.min(z,this.getMetricsMinValue(),AC),max:Math.max(AD,this.getMetricsMaxValue(),AF)};},getColorScheme:function(AA){var z="custom",AB,AC,AD;K.forEach(function(AE){AD=AE.bands;AC=AA.length;if(AC!==AD.length){return ;}for(var AF=0;AF<AC;AF++){AB=mstrmojo.color.fixFullHexValue(AA[AF]);if(AD[AF].bc!==AB&&AD[AC-AF-1].bc!==AB){return ;}}z=AE.id;});return z;},getImageSetName:function X(AD){var AC=Y[0].id,z,AB=function(AE){return AE===z.bands[0].url;};for(var AA=0;AA<Y.length;AA++){z=Y[AA];if(AD.some(AB)){AC=z.id;break;}}return AC;},getGridValueFormat:function P(){return this.data.gsi.fmts.va;},isMapReversed:function Q(AB,z,AD){var AC=(AD?Y:K).filter(function(AE){return AE.id===AB;})[0],AA=z[0];if(!AD){AA=G.fixFullHexValue(AA);}return AC&&AC.bands[0][AD?"url":"bc"]!==AA;},setConditionData:function T(AC,AA){var AB=AC.data,z=AB.isNew;M.copy(AA,M.clear(AB));delete AB.isNew;AC.paint();AC.tree.onConditionEdit(AC,z);},hasSelectedThresholds:function v(){return this.selectedThresholds.length>0;},isThresholdSelected:function f(z){return this.selectedThresholds.indexOf(z)!==-1;},toggleThresholdSelected:function a(z,AB){var AF=this.selectedThresholds,AE=AF.indexOf(z),AA=AE!==-1,AD=this.thresholds[this.metricId],AC=AD.indexOf(z)!==-1;if(AC){if(AB&&!AA){AF.push(z);}else{if(!AB&&AA){AF.splice(AE,1);}}t.call(this);}},addThresholds:function W(z){var AA=this.thresholds[this.metricId];this.thresholds[this.metricId]=(AA||[]).concat(z);n.call(this);},duplicateThreshold:function u(AA){var AC=this.thresholds[this.metricId],z=AC[AA],AB=M.clone(z);AC.push(AB);if(this.isThresholdSelected(z)){this.toggleThresholdSelected(AB,true);}n.call(this);},deleteThreshold:function x(z){var AB=this.thresholds[this.metricId];var AA=AB.indexOf(z);if(AA!==-1){this.toggleThresholdSelected(z,false);AB.splice(AA,1);}n.call(this);},moveThreshold:function D(AA,AC){var AB=this.thresholds[this.metricId],z=AB.splice(AA,1);this.thresholds[this.metricId]=AB.slice(0,AC).concat(z,AB.slice(AC,AB.length));n.call(this);},cleanUp:function R(){this.selectedThresholds=[];this.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.AUTO;},clearData:function V(){var z=this.thresholds;if(z){z[this.metricId]=undefined;}},saveOriginalData:function U(){this.orgThresholds=M.clone(this.thresholds);},setAttIdToNDE:function C(AB){if(!(AB instanceof Array)){AB=[AB];}var AA,AG,AC,z,AF,AD=function(AH){AH.att.forEach(function(AI){if(AI.did===AF.did){AF.attId=AI.attId;}});},AE=function(AH){AH.conid=AF.did;};for(AA=0;AA<AB.length;AA++){z=AB[AA];for(AG in z){AF=z[AG];if(typeof AF==="function"||!(AF instanceof Object)){continue;}else{if(AG==="a"){if(AF.t===47&&AF.st===12033){M.forEach(this.controller.datasets,AD);AC=z.fn;if(AC===22||AC===57){(z.es||[]).forEach(AE);}}}else{this.setAttIdToNDE(z[AG]);}}}}},showNumberFormat:function H(){var AA=S.call(this),AB=AA&&AA.min,z=AA&&AA.max;return(typeof (AB)==="number"||typeof (z)==="number")||(O.isDate(AB)||O.isDate(z));}});mstrmojo.threshold.ThresholdModel.SLIDER_MODE={COLOR_BASED:0,IMAGE_BASED:1};mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL=[{n:"&#9679;",v:"1"},{n:"&#9632;",v:"2"},{n:"&#9830;",v:"3"},{n:"&#9670;",v:"4"},{n:"&#10070;",v:"5"},{n:"&#9784;",v:"6"},{n:"&#10047;",v:"7"},{n:"&#8984;",v:"8"},{n:"&#8680;",v:"29"},{n:"&#8679;",v:"30"},{n:"&#8681;",v:"31"}];mstrmojo.threshold.ThresholdModel.FEATURES={SHOW_ADVANCED_EDITOR:1,SHOW_BASED_ON:2,SHOW_IMAGE:3,SHOW_VALUE_ITEM:4};mstrmojo.threshold.ThresholdModel.EDITOR_TYPES={AUTO:0,ADVANCED_EDITOR:1,SIMPLE_EDITOR:2};mstrmojo.threshold.ThresholdModel.BASED_ON_TYPES={LOWEST_PERCENT:j,HIGHEST_PERCENT:g,BETWEEN_PERCENT:p,LOWEST:I,HIGHEST:Z,BETWEEN:k,VALUE:h,COMPLEX:A,NONE:J};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.array","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.mstr.EnumFunction");var l=mstrmojo.array,f=mstrmojo.mstr.EnumFunction;var N={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},Q={"8107C326DD9911D3B98100C04F2233EA":"Rank"},w={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},x={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},p={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},W={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"},H={"8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31CDD9911D3B98100C04F2233EA":"Count",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C32DDD9911D3B98100C04F2233EA":"Median","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode","8107C32CDD9911D3B98100C04F2233EA":"Product","8107C32FDD9911D3B98100C04F2233EA":"Stdev","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31BDD9911D3B98100C04F2233EA":"Sum","8107C330DD9911D3B98100C04F2233EA":"Var",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",A202C23DDD9D11D3B98100C04F2233EA:"Fvschedule",A202C23CDD9D11D3B98100C04F2233EA:"IRR",A202C240DD9D11D3B98100C04F2233EA:"MIRR",A202C23EDD9D11D3B98100C04F2233EA:"NPV","8107C34ADD9911D3B98100C04F2233EA":"Percentile","9C374203DD9F11D3B98100C04F2233EA":"AvgDev","9C374228DD9F11D3B98100C04F2233EA":"ChiSquareTest","9C374225DD9F11D3B98100C04F2233EA":"Correlation","9C374224DD9F11D3B98100C04F2233EA":"Covariance","9C374237DD9F11D3B98100C04F2233EA":"ForecastV","9C37422FDD9F11D3B98100C04F2233EA":"FTest","9C374234DD9F11D3B98100C04F2233EA":"GrowthV","9C37422EDD9F11D3B98100C04F2233EA":"HeteroscedasticTTest","9C37422DDD9F11D3B98100C04F2233EA":"HomoscedasticTTest","9C37422ADD9F11D3B98100C04F2233EA":"Intercept","9C374204DD9F11D3B98100C04F2233EA":"Kurtosis","9C374222DD9F11D3B98100C04F2233EA":"MeanTTest","9C37422CDD9F11D3B98100C04F2233EA":"PairedTTest","9C374226DD9F11D3B98100C04F2233EA":"Pearson","9C374227DD9F11D3B98100C04F2233EA":"RSquare","9C374205DD9F11D3B98100C04F2233EA":"Skew","9C374229DD9F11D3B98100C04F2233EA":"Slope","9C37422BDD9F11D3B98100C04F2233EA":"SteYX","9C374231DD9F11D3B98100C04F2233EA":"TrendV","9C374223DD9F11D3B98100C04F2233EA":"VarTest","4A99DC7BC5254A319F6B8098E7D652C1":"ConcatAgg"},Y={AND283:"And",OR284:"Or",NOT285:"Not",IF305:"If"},n={BEGINSWITH279:"Begins with",ENDSWITH279:"Ends with",IN289:"In",BETWEEN290:"Between",CONTAINS291:"Contains",LIKE291:"Like"};function P(AD){var AB=function(AF,AE){return mstrmojo.array.stringSorter(AF.n,AE.n);},AC,AA;AD=AD.sort(AB);for(AC=0,AA=AD.length;AC<AA;AC++){AD[AC].fns=AD[AC].fns.sort(AB);}return AD;}function X(AD,AE){var AA=AD.length,AC;for(AC=0;AC<AA;AC++){var AB=AD[AC].fns;if(mstrmojo.array.find(AB,"did",AE)>-1){return AC;}}return -1;}function M(AB){var AA=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();AB=mstrmojo.hash.copy(AB,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(AA){AB.quickSearch=AA;AB.nameWildcards=16;AB.sortKey=-1;}return AB;}function I(AB,AA){if(mstrApp.serverRequest){mstrApp.serverRequest(AA,AB);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(AB,AA,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function F(){if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}return this.serverProxy;},getMetricDefintion:function S(AC,AA){var AB={taskId:"getMetricDefinition",metricId:AC.id,outputFlags:65599};if(AC.msgID){AB.msgID=AC.msgID;}I.call(this,AA,AB);},validateMetric:function d(AC,AA){var AB={taskId:"validateMetric",metricId:AC.metricId,tokenStreamXML:AC.tokenStreamXML,metricXML:AC.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(AC.metricId)){AB.isNew=true;}if(AC.msgID){AB.msgID=AC.msgID;}if(AC.formID){AB.frmid=AC.formID;}if(AC.isIDForm){AB.isIDForm=AC.isIDForm;}if(AC.objectType){AB.objectType=AC.objectType;}I.call(this,AA,AB);},getMetricComponents:function B(AE,AB){var AA=this,AC=this.metricComponents;if(!this.noCache&&AC&&AC.items.length==AC.sz){AB.success(AC);return ;}AB.success=mstrmojo.func.composite([AB.success,function(AF){if(AA.metricComponents&&AA.metricComponents.items){AA.metricComponents.items.push(AF.items);}else{AA.metricComponents=AF;}}]);var AD=M({blockBegin:AE.blockBegin,blockCount:AE.blockCount,searchPattern:AE.pattern,rootFolderType:AE.rootFolderType||24,objectType:AE.objectType||"12,13,43"});I.call(this,AB,AD);},getAttributes:function R(AC,AA){var AB=M({blockBegin:AC.blockBegin,blockCount:AC.blockCount,searchPattern:AC.pattern,rootFolderType:AC.rootFolderType||26,objectType:12});I.call(this,AA,AB);},getFacts:function L(AC,AA){var AB=M({blockBegin:AC.blockBegin,blockCount:AC.blockCount,searchPattern:AC.pattern,rootFolderType:AC.rootFolderType||29,objectType:13});I.call(this,AA,AB);},getMetrics:function G(AC,AA){var AB=M({blockBegin:AC.blockBegin,blockCount:AC.blockCount,searchPattern:AC.pattern,rootFolderType:AC.rootFolderType||5,objectType:4});if(AC.isVerify){AB.nameWildcards=2;}I.call(this,AA,AB);},getFunctions:function T(AF){var AH=this,AI=window.sessionStorage,AE=this.functions||(AI&&AI.getItem("functions")),AG=AI&&AI.getItem("mstrLocaleId"),AC=mstrApp&&mstrApp.localeId;if(AE&&AG==AC){AE=P(JSON.parse(AE).fncs);AF.success(AE);}else{var AB={failure:AF.failure,textResponse:true},AD={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};var AA=function(AJ){l.forEach(AJ,function(AL){var AK=AL&&AL.fns;l.forEach(AK,function(AN){var AM=AN.pros;var AO=l.filterOne(AM,function(AP){return AP.n==="UseLookupForAttributes";});if(AO){AO.dfv="0";}});});};AB.success=function(AJ){if(typeof AJ==="string"||!mstrApp.isSingleTier){AJ=AJ.replace(/\\'/g,"'");var AL=JSON.parse(AJ),AK=AL.fncs;AA(AK);AJ=JSON.stringify(AL);if(AI){AI.setItem("functions",AJ);AI.setItem("mstrLocaleId",AC);}AH.functions=AJ;AE=P(JSON.parse(AJ).fncs);}else{AA(AJ.fncs);AE=P(AJ.fncs);AH.functions=JSON.stringify(AJ);}AF.success(AE);};I.call(this,AB,AD);}},getAggFunctions:function C(){if(this._aggFunctions){return this._aggFunctions;}var AA=this.parseFuncStr();AA=mstrmojo.array.filter(AA[this.getBasicCategoryIndex(AA)].fns,function(AC){var AB=AC.did,AD;if(AB!=="B2C0FA4020C711D6AD1400C04F0423DE"&&AB!=="B2C0FA4120C711D6AD1400C04F0423DE"){AD=N[AB];}return AD;});return AA;},getOLAPAggFunctions:function E(AA){var AB=this.parseFuncStr();AB=mstrmojo.array.filter(AB[this.getOLAPCategoryIndex(AB)].fns,function(AC){switch(AA){case"moving":return x[AC.did];case"running":return p[AC.did];case"olap":default:return w[AC.did];}return false;});return AB;},getFunctionCatList:function r(){if(this._functionCatList){return this._functionCatList;}var AA=this.parseFuncStr();AA=mstrmojo.hash.make(AA,mstrmojo.Arr);this._functionCatList=AA;return AA;},getCategoryIndex:function q(AB,AA){return X(AA||this.getFunctionCatList(),AB);},getBasicCategoryIndex:function J(AB){var AA="B2C0FA4020C711D6AD1400C04F0423DE";return X(AB||this.getFunctionCatList(),AA);},getDataMiningCatIndex:function j(AA){var AB="F17CD4F3FF134D91B80DDAB9CA73C919";return X(AA||this.getFunctionCatList(),AB);},getDateTimeCategoryIndex:function v(AB){var AA="C50F2A4F75AE49D6B20E00224967B500";return X(AB||this.getFunctionCatList(),AA);},getStringCategoryIndex:function g(AB){var AA="6F7DF5FF449111D5BEA300B0D01A55EF";return X(AB||this.getFunctionCatList(),AA);},getOLAPCategoryIndex:function J(AB){var AA="D221F90EB35540E3A1204ED6CC9A8267";return X(AB||this.getFunctionCatList(),AA);},getInternalCategoryIndex:function U(AB){var AA="8107C337DD9911D3B98100C04F2233EA";return X(AB||this.getFunctionCatList(),AA);},getFunctionDetails:function t(AC,AA){var AB={taskId:"getSystemFunctions",functionId:AC.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};I.call(this,AA,AB);},getTransformations:function O(AC,AA){var AB=M({blockBegin:AC.blockBegin,blockCount:AC.blockCount,searchPattern:AC.pattern,rootFolderType:AC.rootFolderType||38,objectType:43});I.call(this,AA,AB);},getFilters:function k(AC,AA){var AB=M({blockBegin:AC.blockBegin,blockCount:AC.blockCount,searchPattern:AC.pattern,rootFolderType:AC.rootFolderType||4,objectType:1});I.call(this,AA,AB);},getAttributeForms:function e(AC,AA){var AB={taskId:"getAttributeForms",attributeID:AC.attributeID,displayedForms:AC.displayedForms,styleName:"WidgetElementListStyle"};I.call(this,AA,AB);},getSubtotalFunctions:function V(AC,AA){var AB=M({objectType:"1025,1026",searchPattern:""});I.call(this,AA,AB);},isBasicAggMap:function m(AA){var AB=!!N[AA];if(AA==="B2C0FA4020C711D6AD1400C04F0423DE"||AA==="B2C0FA4120C711D6AD1400C04F0423DE"){AB=false;}return AB;},isOLAPAgg:function z(AA){return !!w[AA];},isMovingAgg:function Z(AA){return !!x[AA];},isRunningAgg:function c(AA){return !!p[AA];},isBanding:function h(AA){return !!W[AA];},isOLAP:function K(AB){var AC=this.getFunctionCatList(),AA=AC[this.getOLAPCategoryIndex(AC)].fns;return mstrmojo.array.find(AA,"did",AB)>-1;},isRank:function D(AA){return !!Q[AA];},isScalar:function b(AA){return(AA||{}).sqt===3;},hasLookupForAttributesProps:function(AA){return !!H[AA];},getFunctionHelpTopic:function o(AA){var AB="<div class='func-details' onclick='mstrmojo.ME.MetricDataService.showFunctionHelpTopic(\"##HELPTOPIC##\")'>"+mstrmojo.desc(5811,"Details...")+"</div>";AB=AB.replace("##HELPTOPIC##",AA);return AB;},showFunctionHelpTopic:function u(AB){var AC=mstrApp.isSingleTier,AA=((mstrApp.helpUrl||"../help/")+"FunctionsRef/");if(AC){AA=AA+"index.htm#cshid="+(AB||"");window.FormWrapper.openPage(AA);}else{if(AB){AA=AA+"Content/"+AB+".htm";}else{AA=AA+"index.htm";}window.open(AA);}return false;},sortFunctions:function A(AB){var AC={},AA=function(AE,AD){return mstrmojo.array.stringSorter(AE.n,AD.n);};mstrmojo.array.forEach(AB,function(AD){mstrmojo.array.forEach(AD&&AD.fns,function(AE){if(AE&&AE.did){AC[AE.did]=AE;}});});return mstrmojo.hash.valarray(AC).sort(AA);},parseFuncStr:function a(){var AA=window.sessionStorage,AB=this.functions||AA&&AA.getItem("functions");if(AB){return P(JSON.parse(AB).fncs);}},isValEqual:function(AD,AC){if(AD===AC){return true;}var AA=[-1,"-1","True",true],AB=[0,"0","False",false];if(AA.indexOf(AD)>-1&&AA.indexOf(AC)>-1){return true;}else{if(AB.indexOf(AD)>-1&&AB.indexOf(AC)>-1){return true;}}return false;},isFuncHasUseLookupForAttributeProp:function(AB){var AA=[f.FunctionSum,f.FunctionCount,f.FunctionAvg,f.FunctionMin,f.FunctionMax,f.FunctionProduct,f.FunctionMedian,f.FunctionMode,f.FunctionStdev,f.FunctionVar,f.FunctionGeomean,f.FunctionPercentile,f.FunctionStdevP,f.FunctionVarP,f.FunctionFirst,f.FunctionLast,f.ConcatAgg];return AA.indexOf(AB)>-1;},isLogicOrCompFunc:function(AB){var AA=AB.v.toUpperCase()+AB.tp;return !!Y[AA]||!!n[AA];}});}());(function(){mstrmojo.requiresCls("mstrmojo.ServerProxy");mstrmojo.QueueNative=mstrmojo.declare(mstrmojo.ServerProxy,null,{scriptClass:"mstrmojo.QueueNative",queue:[],requestCount:0,transport:null,createRequest:function(C,E,D,B){return this._super(C,E,D,B);},advance:function(){var B=this.queue.shift();if(B){this.request(B.callback,B.params,false,{});}},queueHandle:function(B,C){if(this.requestCount>0){this.queue.push({callback:C,params:B});this.requestCount++;}else{this.requestCount++;this.request(C,B,false,{});}},response:function A(F,B,D){var E=this.getRequest(F);if(E){E.gotResponse=true;var G=E.callback,C=(B&&!D.mstrerr)?"success":"failure";try{if(G[C]){G[C](D,E);}}finally{G.complete(F);}this.requestCount--;this.advance();}},});}());(function(){mstrmojo.requiresCls("mstrmojo.TouchScroller","mstrmojo.hash");var H=mstrmojo.hash;mstrmojo._HasTouchScroller=mstrmojo.provide("mstrmojo._HasTouchScroller",{_meta_usesSuper:true,scrollerConfig:{},allowTouchBubble:true,scrollerSetupDelay:undefined,init:function M(S){this._super(S);this.scrollerConfig=H.clone(this.scrollerConfig);},updateScrollerConfig:function P(){return this.scrollerConfig;},updateScroller:function F(V,W){var S=this._scroller;if(S){var T=this.updateScrollerConfig();S.initScroller(T);if(!V){var U=T.origin;if(U){S.scrollTo(U.x,U.y,W);}}S.updateScrollBars();}},initScroller:mstrmojo.emptyFn,useSelectScroll:false,postBuildRendering:function Q(){var S=this._scroller;if(!S){S=this._scroller=new mstrmojo.TouchScroller();this.initScroller(S);}else{S.haltScroller();}if(!this.layoutConfig){var U=this.id,T=this.scrollerSetupDelay;if(!isNaN(T)){window.setTimeout(function(){mstrmojo.all[U].updateScroller();},T);}else{this.updateScroller();}}this._super();},afterLayout:function G(){this._super();this.updateScroller();},getScrollPos:function A(){return H.copy(this._scroller.origin||{x:0,y:0});},shouldTouchBubble:function I(V){if(!this.allowTouchBubble){return false;}var S=this._scroller,U=V.isVertical,T=U?"y":"x";return(!S[(U?"v":"h")+"Scroll"]||S.offset[T][V.direction[T]?"end":"start"]===S.origin[T]);},touchBegin:function L(S){this._scroller.haltScroller();return(this._super&&this._super(S))||true;},touchSwipeBegin:function J(S){if(this.shouldTouchBubble(S)){if(this.bubbleTouchEvent(S)===false){this._touchCanceled=true;}return ;}if(this._super){this._super(S);}this._scroller.toggleScrollBars(true);},touchSelectBegin:function B(S){if(this._super){this._super(S);}if(this.useSelectScroll){this.touchSwipeBegin(S);}},touchSwipeMove:function C(S){if(!this._touchCanceled){if(this._super){this._super(S);}}this._scroller.scroll(S);},touchSelectMove:function E(S){if(!this._touchCanceled){if(this._super){this._super(S);}}if(this.useSelectScroll){this.touchSwipeMove(S);}},touchSwipeEnd:function N(S){S.evt.handled=true;if(!this._touchCanceled){if(this._super){this._super(S);}}this._scroller.scrollEnd(S);},touchSelectEnd:function K(S){if(this._touchCanceled){return ;}if(this._super){this._super(S);}if(this.useSelectScroll){this.touchSwipeEnd(S);}},touchEnd:function D(S){if(this._touchCanceled){delete this._touchCanceled;return ;}if(this._super){this._super(S);}},unrender:function O(T){var S=this._scroller;if(S){S.unrender();}delete this.scrollerConfig.scrollEl;this._super(T);},destroy:function R(){if(this._scroller){this._scroller.destroy();delete this._scroller;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.StringBuffer","mstrmojo.ResSetLink");var j=1,T=2;var E=2,L=4,D=5;var W=1,O=4;var g=mstrmojo.array;function H(k,l){return k[((l===j)?"row":"col")];}function B(k,m){var l=m.lm;return l&&l[k.mix||0];}function c(l,q,x){var v=new mstrmojo.ResSetLink({mid:this.getMessageId(),srct:q.target.t||2,aopam:q.daMode});var r=q.ans,w=r&&r.length;if(w){var t=v.prms=[],m=0;for(m=0;m<w;m++){var AC=r[m];var n=AC.pid,p=parseInt(AC.m,10),AB={id:n,am:p,pt:AC.pt};t.push(AB);if(AC.po){AB.orid=AC.po.did;AB.ortp=AC.po.t;}switch(p){case v.DO_NOT_ANSWER:case v.CLOSE:case v.USE_DEFAULT_ANSWER:case v.SAME_PROMPT:break;case v.STATIC:var k=AC.es,AA=(k&&k.length)||0,u;AB.pa={es:[]};for(u=AA-1;u>=0;--u){var o=k[u];AB.pa.es.push({ei:o.id,disp_n:o.n,emt:1});}break;case v.DYNAMIC:case v.ALL_VALID_UNITS:case v.CURRENT_UNIT:case v.DYNAMIC_OR_SAME_PROMPT:if(x.els){A.call(this,AC,x,AB,p,v);}else{K.call(this,AC,x,AB,p,v);}break;}}}return v;}function A(r,l,k,q,p){var o=r.dunits,m=l.els,n=k.pa={};g.forEach(m,function(t){if(g.find(o,"id",t.id)>=0){if(q!==p.DYNAMIC&&q!==p.DYNAMIC_OR_SAME_PROMPT){n.a={id:t.id,n:t.disp_n,dispForms:t.dfi};}if(r.pt===1){n.v=t.v;}else{n.es=[];n.es.push({ei:t.ei,emt:t.emt,disp_n:t.disp_n});}}});}function K(AA,w,z,o,q){var r=AA.dunits,u=AA.dsUnits;if(r&&r.length&&w){var t=z.pa={};var n=w,m=(w.mix!==undefined)&&(w._lp||w._tp);if(m){n=w._lp||w._tp;}var l=parseInt(n.axis,10);while(n){var x=this.getPTitle(n,l);if(x&&g.find(r,"id",x.id)>=0){var p={id:x.id,n:x.n,dispForms:x.dfi};if(o===q.ALL_VALID_UNITS){t.a=(t.a||[]).concat(p);}else{if(o!==q.DYNAMIC&&o!==q.DYNAMIC_OR_SAME_PROMPT){t.a=p;}}if(AA.pt===1){var k=AA.formMap;t.v=k&&k[n.fmi]?k[n.fmi]:n.v;break;}else{var v={ei:n._e.id,emt:1,disp_n:n._e.n};if(o===q.ALL_VALID_UNITS){t.es=(t.es||[]).concat(v);}else{t.es=[].concat(v);}}if(o===q.CURRENT_UNIT){break;}}n=this.getPCellParentNode(n,l);if(m&&!n&&l===j){l=T;n=w._tp;}}}else{if(u&&u.length&&w){z.pa={es:u};}}}function R(m){var l=this.getCellTitleInfo(m[0]),o=[],q=function(r){if(r){if(mstrApp.useBinaryFormat){if(r._e){o.push(r.axis+"A"+(r.ui+1)+"A"+r._e.id);}q(r._p);}else{o.push(r.axis+"A"+(r.ui+1)+"A"+r.o);}}},n,k;if(!l.isSrcTitle){for(n=0,k=m.length;n<k;n++){var p=m[n];if(p.mix!==undefined&&(p._lp||p._tp)){q(p._lp);q(p._tp);}else{q(p);}}}return(mstrApp.useBinaryFormat)?o:o.join(",");}function J(o,n,l){var m=true,k=l.length;while(o<k){if(l[o].id!==n.id){m=false;break;}o++;}return m;}mstrmojo.XtabModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.XtabModel",getMessageId:function S(){return this.data.mid;},getCellTitleInfo:function d(l,o){var m=o?o.gts:this.data.gts;var n=null;if(m){if(l&&l.mix===undefined){n=H(m,l.axis)[l.tui||l.ui];}else{var k=function(r){var p=(r&&r.length)||0,q;for(q=p-1;q>=0;--q){if(parseInt(r[q].otp,10)===-1){return r[q];}}return null;};n=k(m.col)||k(m.row);}}return{isSrcTitle:!!l&&(l.o===undefined)&&!((l.mix!==undefined)&&(l._lp||l._tp)),title:n};},getCellInfo:function I(l){var k=this.getCellTitleInfo(l),m={isTitle:false,isHeader:false,isMetric:false};if(l&&(l.hasOwnProperty("mix")||l.otp===-1)){m.isMetric=true;if(l._e){m.isHeader=true;}}if(k.isSrcTitle){m.isTitle=true;}return m;},getCellLinksInfo:function f(l,m){if(!m){var k=this.getCellTitleInfo(l);m=k&&k.title;}return B(l,m);},getAllDrillPathsForCell:function a(l,n){if(!n){var k=this.getCellTitleInfo(l);n=k&&k.title;}var m=g.filter(n.dp,function(p){var o=p&&p.oid;if(o&&l._e&&l._e.oid){return o===l._e.oid;}return true;});return m;},getCellDrillsInfo:function G(k,m){var l=this.getAllDrillPathsForCell(k,m);return l&&l[k.mix||0];},getLinkDrillAction:function P(k){return this.getActionObject(k);},getAction:function V(k){return this.getActionObject(k);},getActionObject:function M(l){var k=l[0]&&l[0].at,m=null;if(k){if((k&O)>0){m={h:"onLink",a:this.getLinkAction(l[0])};}else{if((k&W)>0){m={h:"onDrill",a:this.getDrillAction(l)};}}}return m;},getSortAction:function F(AA,t){var o=this.getCellTitleInfo(AA),w=o.title,l=[],n=o.isSrcTitle?w.axis:(g.find(this.data.gts.col,"otp",-1)>-1?j:T),z=this.data.gts[((n===j)?"row":"col")+"SubPos"],q,v,u,x,AB;t=(t===null||t===undefined)?!(AA&&AA.so):t;if(o.isSrcTitle){q=E;v=w.id;u=w.otp;x=w.fid;}else{q=L;u=4;AB=w.stt;var r,k;do{r=AA._e;if(r){if(r.oid){v=r.oid;}else{k=r.id.replace(/;/g,"\\;");l.push(k);}}AA=AA._p;}while(AA);}var p={sortType:q,axis:n,isAsc:t,unitID:v,unitType:u,elementList:l.join(";"),subTotalsPos:z};if(v){p.unitID=v;}if(x){p.formId=x;}if(AB){p.sortType=D;p.stt=AB;}var m;if((q===L)||(q===D)){m=["","",p.elementList||"",p.axis];}else{m=[p.formId,"21","",p.axis];}m=[p.unitType,p.unitID].concat(m);p.sortKey=m.join("!");return p;},getSubTotalsPos:function Y(){var k=this.data.gts;if(k){return[k.rowSubPos,k.colSubPos];}return[0,0];},getPivotAction:function N(l,t){var n=false,m=l.hasOwnProperty("mix"),u=m?null:l.axis,q=(m?l.idx:l.ui)+1,AA=(l.otp===-1);if(!isNaN(t)){u=parseInt(t,10);q=1;if(m){m=false;AA=true;}}else{var x=(t==="u"||t==="l"||t==="b");if(!m){var o=H(this.data.gts,u),AC=0,AF={},k=false;mstrmojo.array.forEach(o,function(AG){if(AF[AG.id]){AF[AG.id].frm++;}else{AC++;AF[AG.id]={pos:AC,frm:1};if(AG.id===l.id){k=true;}else{if(k){return false;}}}});q=AF[l.id].pos;var z=l.fix;if(z){if((!x||z>1)&&!this.xtab.isOutlineMode){if(x||z!==AF[l.id].frm){q=z;n=true;}}}}else{var AD=H(this.data.gts,l.axis),w=AD[l.ui].es,r=this.data.gsi.mx;if(w.length!==r.length){var v=w[q+(x?-1:1)-1];if(v){var p=g.find(r,"did",v.oid);if(p!==-1){q=p+(x?1:-1)+1;}}}}if(t==="b"){q=1;}else{q=q+(x?-1:1);}}var AB={act:"pivot",unitPos:q};if(n){AB.attFormId=l.fid;}else{if(!m){AB.axis=u;}}if(!AA){var AE=m?l._e:l;if(!n){AB.unitType=AE.otp;}AB.unitId=m?AE.oid:l.id;}return AB;},isPvtButtonVisible:function e(r,m){var o=r.axis,n=H(this.data.gts,o),q=r.ui,l=r.hasOwnProperty("mix");if(m==="b"&&q===0){return false;}if(!isNaN(m)){if(parseInt(m,10)===o){return false;}if(l){return !!n[r.ui]._hid;}return true;}var p=n[r.ui].es,k=l?p.length:n.length;if(k===1){return false;}if(o===(l?T:j)){if(m==="u"||m==="d"){return false;}}else{if(m==="l"||m==="r"){return false;}}if(l?r._e===p[0]:q===0){if(m==="l"||m==="u"){return false;}}if(l?r._e===p[k-1]:(this.xtab.isOutlineMode&&r.fix)?J(q+1,r,n):q===k-1){if(m==="r"||m==="d"){return false;}}return true;},getDrillAction:function C(k,m){var l=m||this.getCellDrillsInfo(k[0]);return{srcMsgId:this.data.mid,sliceId:this.xtab.sid,isWithin:l.within,drillPathKey:l.k,drillPathIndex:l.dpi,drillElements:R.call(this,k)};},isVis:function b(){if(this.xtab){return this.xtab.isVis&&this.xtab.isVis();}else{var k=this.controller&&this.controller.view;if(k&&k.isVis){return k.isVis();}}return false;},getPTitle:function h(m,l){var k;if(this.isVis()){k=m.titleInfo;}else{k=H(this.data.gts,l)[m.tui];}return k;},getPCellParentNode:function Q(m,l){var k;if(this.isVis()){k=(l===j)?m._lp:m._tp;}else{k=m._p;}return k;},getLinkAction:function U(m,l){var k,n;if(this.isVis()){m=m.node;n=m.titleInfo;}else{k=this.getCellTitleInfo(m);n=k.title;}return this.getLinkActionImpl(m,n,l);},getLinkActionImpl:function Z(x,t,v){var m=B(x,t),u=m&&m.links,z=(m&&m.onw)?"_blank":"";if(v===null||v===undefined){v=(m&&m.di)||0;}var p=u&&u[v];if(!p){return null;}var n={linkInfo:p,linkTarget:z};var k=p.url;if(k){var o="&CurrentElement";if(x&&t&&k.indexOf(o)>-1){k=k.replace(o,x._e.id);}n.url=k;}else{var q=p.target,w,l;switch(parseInt(q&&q.t,10)){case 55:if(parseInt(q.st,10)===14081){if(q.dvm&(8192|2048)&&!((q.dvm&2048&&mstrApp.features["run-vi-flash"]))){w=3140;if(mstrmojo.dom.isIE6||mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){mstrmojo.alert(mstrmojo.desc(15474,"To work with HTML5 dossiers, please turn off your browser Compatibility View or update your browser to one of the following browser versions: Chrome, Firefox, Safari, Internet Explorer 9 or above."));return null;}l="objectID";}else{w=2048001;l="documentID";}}else{w=32001;l="documentID";}break;case 3:w=4001;l="reportID";n.reportViewMode=((parseInt(q.st,10)===769)?2:1);break;default:return null;}n.evt=w;n[l]=q.did;n.srcMsgId=this.getMessageId();var r=c.call(this,m,p,x);if(r){n.link=r;}return n;}},getDownloadAction:function X(n,l,p,m,o,k,q){return{xtabId:o,rowPosition:n,maxRows:l,colPosition:p,maxColumns:m,rowMode:q,memo:k};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Model","mstrmojo._HasPopup","mstrmojo.string","mstrmojo.taphold");var D=mstrmojo.dom,B=mstrmojo.string,O=D.isIOSTouch;var L=1,C=2,J=4,U=8,T=16,K=512;function N(a,W){var Z=a.getCellForNode(W),V=Z&&Z.at,Y=0;if(V){Y=(V&C)||(V&J)||(V&L);}if(Y===J){var d=a.model.getCellLinksInfo(Z);if(!d||isNaN(d.di)){return"";}var c=d.links[d.di];return c.n;}if(Y===L){var b=a.model.getCellDrillsInfo(Z);return b&&(mstrmojo.desc(183,"Drill to")+" "+b.n)||"";}if(Z){var X=("mix" in Z)?Z._e:Z;if(X&&X.desc){return B.decodeHtmlString(X.desc);}}return a.tooltip||"";}function I(b,W){var a=b.getCellForNode(W),V=a&&a.at;if((V&U)>0||(V&T)>0||(V&K)>0){return true;}var X=0;if((V&L)>0&&a.sdm===undefined){return true;}if((V&J)>0){X++;}if((V&C)>0){X++;}if(X>1){return true;}if((V&J)>0){var d=b.model.getCellLinksInfo(a),c=d&&d.links,Z=a.v?B.decodeHtmlString(a.v):a.v;var Y=(c&&c.length)||0;if(d&&!isNaN(d.di)&&!B.isEmpty(Z)){Y--;}if(Y>0){return true;}}return false;}function H(V){return V.viewport.clientWidth-(V.scrollboxNode.offsetWidth-V.scrollboxNode.clientWidth);}mstrmojo._XtabCellHoverMgr=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo._XtabCellHoverMgr",parent:null,td:null,audibles:{"*":false},startup:function E(){var W=this.parent;if(W&&W.getCellForNode){var V=W.zones,X;for(X in V){this.addMgrElement(X);}if(!this._sub_ihc){this._sub_ihc=W.attachEventListener("ignoreHoverChange",this.id,"onChangeIgnoreHover");}window.setTimeout(function(){W._pl=H(W);},0);}},addMgrElement:function Q(X){var a=this.parent,Z=this,b=a&&a.zones[X].tableNode;if(b&&a&&a.getCellForNode){if(!this.fCtxMenu){this.fCtxMenu=function(c){Z.oncontextmenu(c,self);};}if(!this.fOver){this.fOver=function(c){Z.onhover(c,self);};}if(!this.fOut){this.fOut=function(c){Z.onunhover(c,self);};}var Y=this.fCtxMenu,W=this.fOver,V=this.fOut;D.attachEvent(b,"mouseover",W);D.attachEvent(b,"mouseout",V);D.attachEvent(b,"contextmenu",Y);if(O){this.xtabContextMenuListener=a.attachEventListener("contextmenu",b.id,Y);a.hasContextMenuEvent=true;}}},shutdown:function A(){var X=this.parent,W=X&&X.zones,Y;for(Y in W){var V=W[Y].tableNode;if(V){D.detachEvent(V,"mouseover",this.fOver);D.detachEvent(V,"mouseout",this.fOut);D.detachEvent(V,"contextmenu",this.fCtxMenu);}}if(O&&X&&this.xtabContextMenuListener){X.detachEventListener(this.xtabContextMenuListener);X.hasContextMenuEvent=false;}},onXtabWidthChanged:function(){var V=this.parent;V._pl=H(V);},onChangeIgnoreHover:function(){var V=this.parent;if(!V.ignoreHover&&this._ignored){this.onhover(null,null,this._ignored);}},onhover:function F(Y,V,X){if(this.parent.ignoreHover){this._ignored=D.eventTarget(V,Y);return ;}var W=this.parent,Z=this.getEvtTargetCell(Y,V,W,X);if(Z&&W){Z.title=N(W,Z);}if(this.showHvrBtn(W,Z)){this.td=Z;if(!W._pl){W._pl=H(W);}W.openPopup("cellHoverPopupRef",{xtab:W,td:Z});}else{this.onunhover(Y,V,X);}},onunhover:function M(){if(this.parent.ignoreHover){return ;}var W=this.parent,V=W._lastOpened;if(!V){return ;}if(V.autoCloses){V.autoClose();}else{W.closePopup();}},getEvtTargetCell:function G(Z,V,Y,X){var W=X||D.eventTarget(V,Z);return W&&D.findAncestorByName(W,"td",true,Y.viewport);},oncontextmenu:function P(Y,V,X){var W=this.parent,Z=this.getEvtTargetCell(Y,V,W,X);this.processRightClick(Y,V,Z);if(Z&&this.shouldShowPopup(W,Z,true)){if(!(D.isMetaKey(V,Y)||D.shiftKey(V,Y))){W.openPopup("cellHoverPopupRef",{xtab:W,td:Z,cmPos:D.getMousePosition(Y,V)});W.cellHoverPopupRef.btn.openPopup();}W.closePopup();D.preventDefault(V,Y);D.stopPropogation(V,Y);}},processRightClick:mstrmojo.emptyFn,shouldShowPopup:function S(X,Y,W){var V=Y.mstrShowPopup;if(V!==undefined){return V;}V=I(X,Y);Y.mstrShowPopup=V;return V;},showHvrBtn:function R(V,W){if(mstrApp.isDossier||mstrApp.isVI){return false;}return this.shouldShowPopup(V,W,false);}});}());(function(){mstrmojo.ToolBarModel=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.ToolBarModel",getChildren:function A(C,B){return(C||this.n||this).items;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.locales","mstrmojo.date","mstrmojo.DI.DIConstants","mstrmojo.DI.DIDatabaseHelper");mstrmojo.requiresDescs(2052,2170,2265,3434,3544,4530,4699,8002,8984,9614,9919,9920,9921,9922,12491,12492,12493,12494,12495,12509,12771,13031,13131,13132,13980,13981,8536);var T=mstrmojo.DI.DIConstants,O=T.dataTypeMenuItems,L=T.rdcsFlag,D=mstrmojo.dom,J=mstrmojo.array;mstrmojo.DI.DIHelpers=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIHelpers.isIE7=function N(){return mstrmojo.dom.isIE7;};mstrmojo.DI.DIHelpers.isIE=function(){return D.isIE||!!D.userAgent.match(/Trident\/7\.0/);};mstrmojo.DI.DIHelpers.isIEOrEdge=function(){return mstrmojo.dom.isEdge||this.isIE();};mstrmojo.DI.DIHelpers.getURLCaption=function(){var U="";if(mstrApp.diParams&&mstrApp.diParams.EnableURLImport){if(mstrApp.diParams.EnableFileImport){if(mstrApp.isSingleTier){if(window.FormWrapper!==window.client){U+="File://";}}else{U+="File://";}}if(mstrApp.diParams.EnableHttpImport){if(U!==""){U+=", ";}U+="Http://, Https://";}if(mstrApp.diParams.EnableFTPImport){if(U!==""){U+=", ";}U+="Ftp://";}}return U;};mstrmojo.DI.DIHelpers.getUrlTooltip=function C(){var U="";if(!mstrApp.diParams){return U;}if(!mstrApp.diParams.EnableURLImport){U=mstrmojo.desc(12491,"URL file uploads are currently disabled. Please contact your administrator.");}else{U=mstrmojo.desc(12492,"Use one of the following URL formats to upload your file:")+" ";U+=mstrmojo.DI.DIHelpers.getURLCaption();if(mstrApp.enableFileImport){U+="\r\r";U+=mstrmojo.desc(12493,"'File://' format allows you to upload files in your local machine. For example: File://ComputerName/path/FileName.");}if(mstrApp.enableHttpImport||mstrApp.enableHttpsImport){U+="\r\r";if(mstrApp.enableFileImport){U+=mstrmojo.desc(12494,"Some other examples are:");}else{U+=mstrmojo.desc(12495,"Some examples are:");}}if(mstrApp.enableHttpImport){U+="\r";U+="http://host/path/FileName";U+="\r";U+="https://user:password@host/path/FileName";}if(mstrApp.enableFtpImport){U+="\r";U+="ftp://user:password@host/path/FileName";U+="\r";U+="ftp://user:password@host:port/path/FileName";}}return U;};mstrmojo.DI.DIHelpers.createMSTRObjects=function(W,Y){var U,X,V;if(W.constructor===Array){U=W;for(V=0;V<U.length;V++){U[V]=mstrmojo.DI.DIHelpers.createMSTRObjects(W[V],Y);}}else{if(typeof W==="object"){U=new mstrmojo.Obj(W);for(X in W){if(!Y||Y.indexOf(X)===-1){if(W.hasOwnProperty(X)){U.set(X,mstrmojo.DI.DIHelpers.createMSTRObjects(W[X],Y));}}}}else{U=W;}}return U;};mstrmojo.DI.DIHelpers.getURLParameters=function(U){var V;var Y;var X=[];if(U){if(U.indexOf("?")>0){U=U.substr(U.indexOf("?")+1);}Y=U.split("&");for(V=0;V<Y.length;V++){var W=Y[V].split("=");if(W.length===2){X[W[0]]=W[1];}}}return X;};mstrmojo.DI.DIHelpers.getBackendSourceType=function(U){var V=T.backendSourceSubtype.localFile;switch(U){case T.sourceSubtype.dropbox:V=T.backendSourceSubtype.dropbox;break;case T.sourceSubtype.bisource:V=T.backendSourceSubtype.bISources;break;case T.sourceSubtype.clipboard:V=T.backendSourceSubtype.clipboard;break;case T.sourceSubtype.facebook:V=T.backendSourceSubtype.facebook;break;case T.sourceSubtype.googleAnalytics:V=T.backendSourceSubtype.googleAnalytics;break;case T.sourceSubtype.googleBigQuery:V=T.backendSourceSubtype.googleBigQuery;break;case T.sourceSubtype.googleBigQueryFFSQL:V=T.backendSourceSubtype.googleBigQueryFFSQLModel;break;case T.sourceSubtype.googleBigQuerySingleTable:V=T.backendSourceSubtype.googleBigQuerySingleTable;break;case T.sourceSubtype.googleDrive:V=T.backendSourceSubtype.googleDrive;break;case T.sourceSubtype.hadoop:V=T.backendSourceSubtype.hadoopFileBrowser;break;case T.sourceSubtype.localFile:V=T.backendSourceSubtype.localFile;break;case T.sourceSubtype.mdx:V=T.backendSourceSubtype.OLAPSources;break;case T.sourceSubtype.salesforce:V=T.backendSourceSubtype.salesforce;break;case T.sourceSubtype.samplefile:V=T.backendSourceSubtype.samplefile;break;case T.sourceSubtype.searchOnSource:V=T.backendSourceSubtype.searchAsASource;break;case T.sourceSubtype.twitter:V=T.backendSourceSubtype.twitter;break;case T.sourceSubtype.url:V=T.backendSourceSubtype.url;break;case T.sourceSubtype.publicData:V=T.backendSourceSubtype.publicData;break;case T.sourceSubtype.cloudElement:V=T.backendSourceSubtype.cloudElement;break;}return V;};mstrmojo.DI.DIHelpers.getStateParameters=function(V){var U;var Y;var W=[];if(V.indexOf(":")>=0){Y=V.split(":");}else{Y=V.split("%3A");}for(U=0;U<Y.length;U++){var X=Y[U];if(X.substr(2,1)==="_"){W[X.substr(0,2)]=X.substr(3);}}return W;};mstrmojo.DI.DIHelpers.getExtensionType=function(W){var V=W.toLowerCase(),U;if(V===".xls"||V===".xlsx"||V===".xlsm"){U=T.xdaType.excel;}else{if(V===".txt"||V===".csv"||V===".tsv"||V===".prn"){U=T.xdaType.text;}else{U=0;}}return U;};mstrmojo.DI.DIHelpers.setTablesrc=function(U,W,V){if(W){if(!U.tablesSrc[W]){U.tablesSrc[W]=[];}U.tablesSrc[W].push(V);}};function S(U){var W={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2},Z={1:T.columnDataTypes.integer,2:T.columnDataTypes.integer,6:T.columnDataTypes.dtdouble,7:T.columnDataTypes.dtfloat,21:T.columnDataTypes.integer,22:T.columnDataTypes.nlong,30:T.columnDataTypes.bigDecimal,34:T.columnDataTypes.int64},V=W[U],Y=Z[U],X="";switch(V.toString()){case T.dataTypeMenuItems.NUMBER:switch(Y){case T.columnDataTypes.integer:X=mstrmojo.desc(9614,"Integer");break;case T.columnDataTypes.nlong:X=mstrmojo.desc(13131,"Long");break;case T.columnDataTypes.int64:X=mstrmojo.desc(13132,"Big Integer");break;case T.columnDataTypes.dtfloat:X=mstrmojo.desc(8002,"Float");break;case T.columnDataTypes.dtdouble:X=mstrmojo.desc(2265,"Double");break;case T.columnDataTypes.bigDecimal:X=mstrmojo.desc(9920,"Big Decimal");break;default:X=mstrmojo.desc(3434,"Number");break;}break;case T.dataTypeMenuItems.DATE:X=mstrmojo.desc(2052,"Date");break;case T.dataTypeMenuItems.DATE_TIME:X=mstrmojo.desc(9919,"DateTime");break;case T.dataTypeMenuItems.TIME:X=mstrmojo.desc(2170,"Time");break;case T.dataTypeMenuItems.TEXT:X=mstrmojo.desc(3544,"Text");break;case T.dataTypeMenuItems.HTML_TAG:X=mstrmojo.desc(9921,"HTML Tag");break;case T.dataTypeMenuItems.PHONE_NUMBER:X=mstrmojo.desc(8984,"Phone Number");break;case T.dataTypeMenuItems.SYMBOL:X=mstrmojo.desc(4530,"Symbol");break;case T.dataTypeMenuItems.URL:X=mstrmojo.desc(9922,"URL");break;case T.dataTypeMenuItems.EMAIL:X=mstrmojo.desc(4699,"Email");break;}return X;}mstrmojo.DI.DIHelpers.getDataTypeString=S;mstrmojo.DI.DIHelpers.parseAlternateSourceValidationResults=function M(c){var a=[],Y,Z,b,d,U,W,X,V;J.forEach(c,function(e){Y=Z=b=d="";W=(e.vt===3)?1:0;switch(e.vt){case 0:case 1:case 2:case 3:Y=e.n;Z=S(e.ddt);U=e.src;b=U.n;d=S(U.ddt);break;case 4:Y=e.n;Z=S(e.ddt);break;case 8:U=e.src;b=U.n;d=S(U.ddt);break;}X=Z?Y+"("+Z+")":Y;V=d?b+"("+d+")":b;a.push([X,W,V]);});return a;};mstrmojo.DI.DIHelpers.getURLFileName=function(V){var U=V.lastIndexOf("/");return U>=0&&U+1!==V.length?V.substr(U+1):V;};mstrmojo.DI.DIHelpers.isOperationMode=function(U){return U!==undefined&&U!==null;};mstrmojo.DI.DIHelpers.isCtrlKey=function(U,W){var V=W||(U||window).event;return V.ctrlKey||V.metaKey;};mstrmojo.DI.DIHelpers.isRefreshable=function(V){var U,W=0;for(U in V.importSources){var X=V.importSources[U];if(X.type===T.sourceType.file&&(X.subtype===T.sourceSubtype.url||X.subtype===T.sourceSubtype.publicData)){if(!X.sourceInfo||X.sourceInfo.url.indexOf("http://mirror.microstrategy.com/datahub/samples")!==0){W++;}}}if(V.getAllTableID().length===W&&!mstrApp.diParams.EnableHttpImport&&!mstrApp.diParams.EnableFTPImport&&!mstrApp.diParams.EnableFileImport&&!mstrApp.diParams.EnableURLImport){return false;}return true;};mstrmojo.DI.DIHelpers.strStartsWith=function(V,U){return V.indexOf(U)===0;};mstrmojo.DI.DIHelpers.adjustDataIdx=function(X,W){var U=[],V;if(!X||X.length===0){return ;}J.forEach(X,function(Y){V=Y.subColumns;if(V&&V.length>1){U=U.concat(V);}else{U.push(Y);}});U.sort(function(Z,Y){return Z[W]-Y[W];});};mstrmojo.DI.DIHelpers.setDataIdx=function(W,V,U){if(!V||V.length===0){return ;}if(V[0].hasOwnProperty("clix")){J.forEach(W,function(Y){var X=Y.ix;Y[U]=J.find(V,"clix",X);if(Y.isMultiForm){J.forEach(Y.subColumns,function(Z){Z[U]=J.find(V,"clix",Z.ix);});}});}if(V[0].hasOwnProperty("did")){J.forEach(W,function(Z){var Y=Z.did;var X=J.find(V,"did",Y);if(X!==-1){Z[U]=X;}if(Z.isMultiForm){J.forEach(Z.subColumns,function(a){X=J.find(V,"did",a.did);if(X!==-1){a[U]=X;}});}});}};mstrmojo.DI.DIHelpers.encodeData=function(U){var V="";if(U!==undefined){if(typeof U==="number"){V=U;}else{V=mstrmojo.string.encodeHtmlString(U,false,true);}}return V;};var E={0:"Bytes",1:"KB",2:"MB",3:"GB",4:"TB",5:"PB"};function P(U){return E[U]||"unknown";}mstrmojo.DI.DIHelpers.getRoundSize=function I(V){var U;for(U=0;(V/1024)>1;U++){V=V/1024;}V=V.toPrecision(3);return V+P(U);};mstrmojo.DI.DIHelpers.findNewElements=function(W,X){var V=[],U;if(W&&W.length){J.forEach(X,function(Y){U=J.indexOf(W,Y);if(U===-1){V.push(Y);}});}else{if(X&&X.length){V=[].concat(X);}}return V;};mstrmojo.DI.DIHelpers.generateCubeName=function(V){var U,W,X=50;U=V.join(" ");if(U.length>X){U=U.slice(0,X)+"...";}W=V.length;if(W>1){U+=" ("+W+" tables)";}return U;};mstrmojo.DI.DIHelpers.parseValidateSourceResults=function(V){var U={isValidate:true,hasError:false,tbids:[],tableValidate:[],missingColumnTbids:[],mismatchedDatatypeTbids:[],missingTableTbids:[],errorTableTbids:[],missingColumns:{},mismatchedDatatypeColumns:{},missingTablesColumns:{},errorTableErrCode:{},errorTableErrMsg:{}},W=V&&V.vts;J.forEach(W,function(e){var X=e.tbid,f=e.vt,Z=e.emsg,c=e.cols||[],Y=true,d=false,b,g=[],a=[];if(f===1){Y=true;}else{switch(f){case T.backendError.switchingFileType:case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:case T.backendError.shouldBeIgnored:d=true;break;}J.forEach(c,function(h){var j=h.vt;switch(j){case 1:a.push(h);break;case 4:g.push(h);break;}});}if(d){U.errorTableTbids.push(X);U.errorTableErrCode[X]=f;U.errorTableErrMsg[X]=Z;U.isValidate=false;U.hasError=true;}b=g.length>0&&g.length===c.length;if(g.length>0||a.length>0){Y=false;}else{Y=true;}if(Y===false){U.isValidate=false;}U.tbids.push(X);U.tableValidate.push(Y);if(g.length>0){if(b){U.missingTableTbids.push(X);U.missingTablesColumns[X]=g;}else{U.missingColumnTbids.push(X);U.missingColumns[X]=g;}}if(a.length>0){U.mismatchedDatatypeTbids.push(X);U.mismatchedDatatypeColumns[X]=a;}});return U;};mstrmojo.DI.DIHelpers.truncate=function(W,Y,U){if(W&&W.length>Y){var a=3,V=Y-a,Z=Math.ceil(V/2),X=Math.floor(V/2);if(U){return W.substr(0,V)+"...";}else{return W.substr(0,Z)+"..."+W.substr(W.length-X);}}else{return W;}};mstrmojo.DI.DIHelpers.getAbsoluteFileName=function(U){var V,W=U.lastIndexOf("\\");if(W===-1){W=U.lastIndexOf("/");}V=U.substring(W+1,U.length);return V;};mstrmojo.DI.DIHelpers.reevaluatePopupPosition=function(U){if(U){var V=U.style,Y=V.display,X=V.left,W=V.top;V.display="block";if(parseInt(X.substring(0,X.length-2))<0){V.left="0px";}if(parseInt(W.substring(0,W.length-2))<0){V.top="0px";}V.display=Y;}};mstrmojo.DI.DIHelpers.expandNode=function(V){var U=V.visible;V.set("visible",!U);return !U;};mstrmojo.DI.DIHelpers.normalizeTimestamp=function(W){var V=W.replace(/-/g,"/");var U=V.indexOf(".");if(U>0){V=V.substring(0,U);}return V;};mstrmojo.DI.DIHelpers.getBackendErrorStr=function(V,U){var W="";switch(V){case T.backendError.switchingFileType:W=mstrmojo.desc(12509,"Switching the file type is not allowed during republishing or editing the cube.");break;case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:W=mstrmojo.desc(14392,"We do not have the credentials needed to get the data for this table. Please provide the credentials to proceed publishing this table.");break;}return W;};mstrmojo.DI.DIHelpers.getCommonElements=function(X,Z,Y){var V=[],W,U;for(W=0;X&&W<X.length;W++){for(U=0;Z&&U<Z.length;U++){if(Y(X[W],Z[U])){V.push(X[W]);break;}}}return V;};mstrmojo.DI.DIHelpers.formatDateAndTime=function(c,X){var b=mstrmojo.date;var V=mstrmojo.locales;var W,d,a,Z,U,Y;W=b.parseDateAndOrTime(c);d=W.date;a=W.time;if(X){Y=new Date(Date.UTC(d.year,d.month-1,d.day,a.hour,a.min,a.sec));W=b.getDateJson(Y);d=W;a=W;}Z=b.formatDateInfo(d,V.datetime.DATEDISPLAYFORMAT);U=b.formatTimeInfo(a,V.datetime.TIMEDISPLAYFORMAT);return Z+" "+U;};mstrmojo.DI.DIHelpers.isServerBasedWS=function(){return !!mstrApp.isWorkstation&&!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isLocalWS=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isDIinVI=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier&&!!mstrApp.isPopup;};mstrmojo.DI.DIHelpers.extractFileNameFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W;};mstrmojo.DI.DIHelpers.extractFileExtensionFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W.substring(W.lastIndexOf(".")+1);};mstrmojo.DI.DIHelpers.isWS=function(){return !!mstrApp.isWorkstation;};mstrmojo.DI.DIHelpers.getEnvObj=function(){var X=(navigator.platform.indexOf("Win")!==-1?"Win":"Mac"),U=!!mstrApp.isWorkstation?"WS":"Web",V=[];V.push(U,X);return{ENV:V.join("-"),isWSClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return !window.FormWrapper.isDesktop();},isDesktopClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return window.FormWrapper.isDesktop();},isWeb:function(){return U==="Web";},isWS:function(){return U==="WS";},isWin:function(){return X==="Win";},isMac:function(){return X==="Mac";},isDataSet:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp"||mstrApp.placeholder==="QBApp";},isDIinVI:function(){return !!mstrApp.isFromVI;},isInDI:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp";},isInQB:function(){return mstrApp.placeholder==="QBApp";},isAppSchema:function(){return !!window.mstrAppSchema;},isWebWin:function(){return this.isWeb()&&this.isWin();},isWebMac:function(){return this.isWeb()&&this.isMac();},isWebDataSet:function(){return this.isWeb()&&this.isDataSet();},isWebDossier:function(){return this.isWeb()&&this.isDIinVI();},isWSWin:function(){return this.isWS()&&this.isWin();},isWSMac:function(){return this.isWS()&&this.isMac();},isWSDataSet:function(){return this.isWS()&&this.isDataSet();},isServerBasedWS:mstrmojo.DI.DIHelpers.isServerBasedWS,isWSDossier:function(){return this.isWS()&&this.isDIinVI();},isWSLiveMode:function W(){return this.isWS()&&parseInt(window.FormWrapper.isWSLiveMode(),10)===1;},isWSDossierLocalMode:function(){return this.isWSDossier()&&!this.isWSLiveMode();},isWebWinDataSet:function(){return this.isWeb()&&this.isWin()&&this.isDataSet();},isWebMacDataSet:function(){return this.isWeb()&&this.isMac()&&this.isDataSet();},isWebWinDossier:function(){return this.isWeb()&&this.isWin()&&this.isDIinVI();},isWebMacDossier:function(){return this.isWeb()&&this.isMac()&&this.isDIinVI();},isWSWinDataSet:function(){return this.isWS()&&this.isWin()&&this.isDataSet();},isWSMacDataSet:function(){return this.isWS()&&this.isMac()&&this.isDataSet();},isWSWinDossier:function(){return this.isWS()&&this.isWin()&&this.isDIinVI();},isWSMacDossier:function(){return this.isWS()&&this.isMac()&&this.isDIinVI();},isStandaloneDataSet:function(){return !this.isDIinVI()&&this.isDataSet();}};};mstrmojo.DI.DIHelpers.isOnetier=function(){return !!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.getHierarchyMappingXML=function(Z,a){var W="";var V=0,X=1,Y=12;if(a&&a[L.ID]){W+="<mpcs>";W+="<mpc ";W+='did="'+a[L.ID].did+'" drvflg="'+V+(a[L.ID].n?('" n="'+a[L.ID].n+'" ot="'):"")+Y+'" recurisve="'+X+'" ';if(!!Z&&Z!==""){W+='oid="'+Z+'" ';}W+=">";if(a[L.JOIN_ID]){W+="<rdcs>";}for(var U=L.JOIN_ID;U<=L.DISTANCE;U++){if(a[U]!==undefined){W+='<rdc did="'+a[U].did+'" fg="'+U+'"/>';}}if(a[L.JOIN_ID]){W+="</rdcs>";}W+="</mpc>";W+="</mpcs>";}return W;};mstrmojo.DI.DIHelpers.getOperationMode=function(){return mstrApp.getRootController().getModel().operationMode;};mstrmojo.DI.DIHelpers.standardizeDBRolesFormat=function Q(c){var W=["att","dbRole","tableMap"],d,f,Z,U,X,V,a,Y,e,g,b=(function(){var h="list",k="number",j="text";function l(m,r,q,p,o,n){if(m&&q){if(n){m.push({field:r,fieldV:q,IDS:p,options:n,tp:o});}else{m.push({field:r,fieldV:q,IDS:p,tp:o});}}}return{authenticationmethod:function(m,n){l(m,"auth",n,7776,h,[{IDS:13980,n:mstrmojo.desc(13980),v:"1"},{IDS:13981,n:mstrmojo.desc(13981),v:"4"}]);},databasename:function(m,n){l(m,"db",n,8519,j);},hostname:function(m,n){l(m,"host",n,8533,j);},port:function(m,n){l(m,"port",n,8534,k);},server:function(m,n){l(m,"svr",n,8536,j);}};}());c=Object.keys(c).map(function(h){return mstrmojo.DI.DIHelpers.createMSTRObjects(c[h],W);});J.forEach(c,function(h){J.forEach(h.tables,function(j){j.dbRole=(j.dbRole&&j.dbRole.oi)||j.dbRole;j.dbmsObj=j.dbmsObj&&j.dbmsObj.oi;f=j.dbRole;if(f){f.dbmsObj=j.dbmsObj;Z=f.dbmsObj;if(!f.dbms){f.dbms=f.def&&f.def.dbms&&f.def.dbms.did;}}if(!Z||Z.DBInfo){return ;}Z.DBInfo={};d=Z.DBInfo;U=f.efd;if(!U){return ;}U.forEach(function(k){X=k.oi&&k.oi.def;if(!X){return ;}g=X.dbtp;if(g){f.db_type=g;d.dbTypes={dbt:{v:g,n:mstrmojo.desc(mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType(g))}};}V=X.cnsr;if(!V){return ;}e=[];Y=null;f.connstr=V;V.split(";").forEach(function(l){a=l.split("=");a[0]=a[0].toLowerCase().trim();if(a[0]==="driver"){d.driverInstalled=true;}else{if(a[0]==="authenticationmethod"){Y=a;}else{if(b[a[0]]){b[a[0]](e,a[1]);}}}});if(Y){b[Y[0]](e,Y[1]);}});});});return c;};mstrmojo.DI.DIHelpers.filterDisableSources=function A(U){return J.indexOf(mstrApp.diParams.disabledSources,U)<0;};mstrmojo.DI.DIHelpers.getPopupWindowOptions=function R(){var Y={};var W=window.screenX||window.screenLeft||0,V=window.screenY||window.screenTop||0,X=800,U=600,Z;if(document.body&&document.body.offsetWidth){X=document.body.offsetWidth;U=document.body.offsetHeight;}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){X=document.documentElement.offsetWidth;U=document.documentElement.offsetHeight;}if(window.innerWidth&&window.innerHeight){X=window.innerWidth;U=window.innerHeight;}if(window.outerWidth){X=window.outerWidth;}if(window.outerHeight){U=window.outerHeight;}Y.height=U*0.5;Y.width=X*0.8;if(Y.height<600||isNaN(Y.height)){Y.height=600;}if(Y.width<800||isNaN(Y.width)){Y.width=800;}Y.left=W+(X-Y.width)/2;Y.top=V+(U-Y.height)/8;if(this.getEnvObj().isWSWin()&&this.getEnvObj().isDIinVI()){Y.left=(window.screen.width-Y.width)/2;Y.top=(window.screen.height-Y.height)/2;}Z="width="+Y.width+",height="+Y.height;Z+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";Z+=",left="+Y.left+",top="+Y.top;return Z;};mstrmojo.DI.DIHelpers.createPopupWindow=function G(V,U){var W,X;X=this.getPopupWindowOptions();if(!V){V="";}W=window.open(V,U,X);return{wnd:W};};mstrmojo.DI.DIHelpers.openPopupWindow=function H(X,V,U){var W;if(X&&!X.closed){X.location=U;X.focus();}else{W=this.createPopupWindow(U);X=W.wnd;if(X){X.focus();}}return X;};mstrmojo.DI.DIHelpers.sendResponse2Window=function B(V,U,Y){var X;if(Y){X=Y;}else{X=window.opener;}if(X){if(U===undefined){U=window.location.origin;if(!U){U=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");}}try{if(this.isIE()&&X.postMessagePassthrough){X.postMessagePassthrough(V,U);try{window.open("","_self","");window.close();}catch(Z){window.close();}}else{X.postMessage(V,U);}}catch(W){console.log("postMessage error: "+W);}}};mstrmojo.DI.DIHelpers.convertDataSourceType2SourceType=function F(U){switch(U){case T.dataSourceType.DROPBOX:return T.sourceType.dropbox;case T.dataSourceType.GOOGLE_DRIVE:return T.sourceType.googleDrive;case T.dataSourceType.GOOGLE_ANALYTICS:return T.sourceType.googleAnalytics;case T.dataSourceType.SALESFORCE:return T.sourceType.salesforce;case T.dataSourceType.GOOGLE_BIGQUERY:return T.sourceType.googleBigQuery;default:return -1;}};mstrmojo.DI.DIHelpers.highlightKeyWords=function K(c,d,U){var W="\\*.?+$^[](){}|/",e=c,a,X;if(c===""){return d;}for(X in W){if(W.hasOwnProperty(X)){a=W[X];e=e.replace(new RegExp("\\"+a,"g"),"\\"+a);}}var b=new RegExp("("+e+")","ig");var V="\u001E",Z=mstrmojo.string.encodeHtmlString,Y;if(b.test(d)){d=d.replace(b,function(f){return V+f+V;});Y=J.map((d||"").split(V),function(g,f){return(f%2===0)?Z(g):('<span class="'+U+'">'+Z(g)+"</span>");});return Y.join("");}};mstrmojo.DI.DIHelpers.detectCustomImg=function(X,W){if(!X||!(W.nodeType&&W.nodeType===window.Node.ELEMENT_NODE)){return ;}var U=X.replace?X.replace(/\s+/g,""):"";var Y=document.getElementsByTagName("head")[0];var V=document.createElement("img");V.src="../javascript/mojo/css/images/DI/connectors/"+U+".png";V.onload=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/"+U+".png) no-repeat";Y.removeChild(V);};V.onerror=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/default.png) no-repeat";Y.removeChild(V);};Y.appendChild(V);};mstrmojo.DI.DIHelpers.spliceUrlBySeparator=function(V){var U=V.split("#");return U.slice(U.length/2+1).join("#");};mstrmojo.DI.DIHelpers.isOriginalConnector=function(V){var U=T.originalConnector;if(U.elastic===V||U.tapClicks===V){return true;}return false;};mstrmojo.DI.DIHelpers.acceptEventFromAncestor=function(U){if(!U){return true;}if(!this.domNode||typeof U.contains!=="function"||!this.hasRendered){return false;}return U.contains(this.domNode);};mstrmojo.DI.DIHelpers.isdbRoleWritable=function(U){if(mstrmojo.DI.DIHelpers.isOnetier()){return true;}else{return U.writable==="1"&&mstrApp.rootController.hasPrivilege(T.DssXmlPrivileges.DssXmlPrivilegesUseDatabaseInstanceManager);}};mstrmojo.DI.DIHelpers.isdbRoleUsable=function(U){return mstrmojo.DI.DIHelpers.isOnetier()?true:U.usable==="1";};mstrmojo.DI.DIHelpers.applyDriverSuffix=function(W){if(!W||!W.Preferences){return ;}var U=JSON.stringify(W),V=W.Preferences.driverNameSuffix,Y=this.getEnvObj();var X="Platform";if(Y.isDesktopClient()){X=Y.isMac()?"DesktopMac":"DesktopWin";}else{if(Y.isWSClient()){X=Y.isMac()?"WorkstationMac":"WorkstationWin";}}var Z=V[J.find(V,"n",X)];return JSON.parse(U.replace(/!#DRIVERSUFFIX#!/g,Z?Z.value:""));};mstrmojo.DI.DIHelpers.isGeo=function(U){return U.georole&&U.georole>0;};mstrmojo.DI.DIHelpers.isTime=function(U){return U.dtp===parseInt(O.DATE,10)||U.dtp===parseInt(O.DATE_TIME,10)||U.dtp===parseInt(O.TIME,10);};}());mstrmojo.ToolSeparator=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ToolSeparator",markupString:'<div class="mstrmojo-ToolSeparator {@cssClass}" style="{@cssText}"></div>',markupSlots:{},markupMethods:{}});(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl");mstrmojo.DefaultDIC=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DefaultDIC",isDummy:true,showInPopup:function(){mstrmojo.alert("The control style has not been supported yet.");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,A="selected";mstrmojo.ButtonSwitch=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ButtonSwitch",markupString:'<div id="{@id}" class="mstrmojo-ButtonSwitch {@cssClass}" style="{@cssText}" mstrAttach:click><div class="left selected" > {@label1} </div><div class="right"> {@label2} </div></div>',markupSlots:{left:function(){return this.domNode.children[0];},right:function(){return this.domNode.children[1];}},switchFn:mstrmojo.emptyFn,onselectedChange:function(){var D;for(D=0;D<2;D++){C.toggleClass(this.domNode.children[D],A,this.selected===D);}this.switchFn();},onclick:function B(D){this.set("selected",(D.getTarget()===this.left)?0:1);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.registry","mstrmojo._HasContextMenu","mstrmojo.Widget");var F=mstrmojo.dom,K=mstrmojo.css,N=16;mstrmojo.ContextMenuItem=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasContextMenu],{scriptClass:"mstrmojo.ContextMenuItem",SUBMENU_SHIFT:3,visible:true,checked:false,enabled:true,buildDom:function(){var U=document.createElement("tr"),V=this.data,Y=this._cmSource,R,S;U.id=this.id;U.className="mstrmojo-ContextMenuItem "+(Y.isSeparatorItem(V)?"separator":Y.item2textCss(V));var W=this,X=function(){W.handleMouseOver();},T=function(){W.handleMouseOut();},Q=function(){W.handleClick();};F.attachEvent(U,"mouseover",X);F.attachEvent(U,"mouseout",T);F.attachEvent(U,"click",Q);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-left";S=document.createElement("img");S.src="../images/1ptrans.gif";R.appendChild(S);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-text";if(Y.isSeparatorItem(V)){S=document.createElement("img");S.src="../images/1ptrans.gif";}else{S=document.createElement("div");S.className="mstrmojo-CMI-content";R.innerHTML=V.itemWidget?"&nbsp":V[this.itemField];}R.appendChild(S);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-right "+(this.hasSubmenu?"sm":"");S=document.createElement("img");S.src="../images/1ptrans.gif";R.appendChild(S);return U;},buildRendering:function L(){this._super();var Q=this.data.itemWidget;if(Q){Q.placeholder=this.domNode.cells[1].children[0];Q.data=this.data;Q=mstrmojo.insert(Q);Q.render();Q.parent=this;this.itemWidget=Q;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"":"none";},oncheckedChange:function(){K.toggleClass(this.domNode,["checked"],this.checked);},onenabledChange:function(){K.toggleClass(this.domNode,["disabled"],!this.enabled);}},getMenuPosition:function I(){var Q=F.position(this.domNode,true);return{x:Math.round(Q.x+Q.w-this.SUBMENU_SHIFT),y:Math.round(Q.y)};},getContextMenuItems:function B(){return this.data[this.itemChildrenField];},getContextMenuCssClass:function D(){return this.data.cmCssClass||"";},callOnContextMenuOpen:function M(){var Q=this.data;if(Q.onContextMenuOpen){Q.onContextMenuOpen.apply(this,[]);}},callOnContextMenuClose:function A(){var Q=this.data;if(Q.onContextMenuClose){Q.onContextMenuClose.apply(this,[]);}},attachMousedownEvent:function J(){},getContextMenuSource:function P(){return this._cmSource;},adjustMenuPosition:function G(){var Q=this._subMenu,T=this._subMenu.domNode,S=T.offsetHeight,R=T.offsetWidth,W=F.windowDim(),V=F.position(T,false),U=F.position(T,true);if((V.x+R+N)>W.w){Q.set("left",(F.position(this.domNode,true).x-R)+"px");}else{Q.set("left",(F.position(this.domNode,true).x+this.domNode.offsetWidth)+"px");}if((V.y+S+N)>W.h){Q.set("top",(W.h-S-N+(U.y-V.y))+"px");}},handleMouseOver:function O(){var Q=this,R=function(){if(Q.hasSubmenu){Q.showContextMenu();}Q._cmSource.closeMenuTree(Q);Q._mouseOverTimer=null;};if(this._cmSource.activeMenuItem!==this){this._mouseOverTimer=window.setTimeout(R,80);}},handleMouseOut:function H(){if(this._mouseOverTimer){window.clearTimeout(this._mouseOverTimer);this._mouseOverTimer=null;}},closeMenuTree:function C(){this._cmSource.closeMenuTree();},handleClick:function E(){if(this.hasSubmenu){return ;}var Q=this._cmSource,R=this.data;if(!this.itemWidget){if(!Q.isSeparatorItem(R)&&Q.queryEnabled(R)){if(Q.executeCommand){Q.executeCommand(this.data);}Q.closeMenuTree();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._RowRendTracker","mstrmojo.array","mstrmojo.dom","mstrmojo.url","mstrmojo.chart.model.enums.EnumDSSBaseFormType");var L="<tr>";var X=mstrmojo.dom;var g=['<table cellspacing="0" cellpadding="0" style="table-layout:',null,";width:",null,';mstr-tablestyle-slot" ',null,">",null,"<tbody>"];var T="&nbsp;";var f="fsbp_1 ";var W="fsbp_2 ";var Q="fsbp_3 ";var d=1,e=2,G=3,c=4,l=5,S={1:" stack-top",2:" stack-middle",3:" stack-bottom",4:" stack-bottom-last",5:" no-stack",6:" stack-full"},K=1,j=3;var B=mstrmojo.css,Z=mstrmojo.array,P=mstrmojo.chart.model.enums.EnumDSSBaseFormType;var N=4;function Y(p,q,m){var o=true,n=0;if(m.cs>1){for(n=0;n<m.cs;n++){o=o&&p[q+m.cs-n-1];}}else{o=p[q];}return o;}function U(o,n){for(var p=0,m=o.length;p<m;p++){var r=o[p];var q=n.rows[r.rows].cells[r.cells];if(q){mstrmojo.css.addClass(q,f);}}}function b(o){var q=o.indexOf('src="');if(q<0){return o;}var p=o.substring(q+5),n=p.indexOf('"'),r;p=p.substring(0,n);r=p;if(mstrApp.isDossier){r=mstrmojo.url.getFullPath(p);}else{var m=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(m&&m.getImage){r=m.getImage(p);}}return o.replace(p,r);}function k(q,p){var m="",r="#srcend",n=-1,o,t=q.split("#srcstart");t.forEach(function(u){n=u.indexOf(r);o=u.split(r);o.forEach(function(w,v){if(v===0&&n!==-1){w=w.substring(0,n);m+='<img src="'+w+'" '+p+">";}else{m+=w;}});});return m;}function D(o,n,m){var u=o.outLvl,p="outlineMode",t=this.parent.outlineState,r=o._ei,q=r?(' ei="'+r+'"'):"";if(t&&t[r]){p+=o.hidden?" hiddenRow":"";}else{if((m>0&&u>m)){p+=" hiddenRow";}}if(this.parent.hasEmptyTBody&&p.indexOf("hiddenRow")===-1){this.parent.hasEmptyTBody=false;}return' level="'+u+'" class="'+p+'"'+q+">";}var J=(function(){var p=/\n/g,u="<br/>",AA=/<a\s[^>]+>/gi,z="<a ",AI='<a target="_blank" ',n="target=";var x='<a href="',v="",r="</a>",o="<span>",m="</span>",AF="<div>",AE="</div>",AC='<span class="text">',AB="</span>",w='<span rabtn class="raBtn ',t='"></span>',AD="iconRA-expand",q="iconRA-collapse",AH="<span>",AG="</span>";return function(AK,AU,AS){var AX=AK.v||AK.n||T,AO=AK.ts===P.DssBaseFormUrl,AR=AK.ts===P.DssBaseFormHTMLTag,AW=AK.lv!==undefined;AX=(AK.ts===P.DssBaseFormText||AK.mdf===1)?AX.replace(p,u):AX;if(AO){if(!v){v=AU?'" target="_blank">':'">';}AX=x+AX+v+AX+r;}else{if(AR&&AU){(AX.match(AA)||[]).forEach(function(Ab){if(Ab.indexOf(n)===-1){AX=AX.replace(Ab,Ab.replace(z,AI));}});}}if(AR){var AL=document.createElement("div");AL.innerHTML=AX;var AP=AL.querySelectorAll("img");Z.forEach(AP,function(Ac){Ac.onload=function Ab(){var Ad=mstrmojo.all[AS];if(Ad){if(Ad._updateScrollbarTimer){clearTimeout(Ad._updateScrollbarTimer);}Ad._updateScrollbarTimer=setTimeout(function(){Ad.updateScrollbars();},100);}};});AX=AL.innerHTML;}if((AK.css&&AK.css.indexOf("hl")>-1)||AO){AX=o+AX+m;}if(AW){var AZ=AK.lv,Aa="&nbsp;&nbsp;&nbsp;&nbsp;",AN="",AJ="",AT="",AV;for(AV=0;AV<AZ;AV++){AN+=Aa;}if(AK.hcd&&AK.fi===undefined){AT=w+(AK.epd?q:AD)+t;}else{AN+=Aa;}if(AK.axis===1){AJ=AH+AN+AG;}AX=AF+AJ+AT+AC+AX+AB+AE;}else{if(AK.outLvl&&AK.cs>1&&!AK.isLeaf){var AY=(AK.stt&&!AK.dpt),AM=AY?"":"icon-outline-span"+(AK.epd?" outline-expand":" outline-collapse"),AQ=!AY&&AK.epd?' collapsed="true"':"";AX='<span class="'+AM+'"  sty="outimg" dpt="'+AK.outLvl+'"'+AQ+"></span>"+AX;}else{if(AK.expandLevel){AX='<span class="icon-outline-span outline-collapse" expandTo="'+AK.expandLevel+'" title=""></span>'+AX;}else{if(AK.fillerCell&&AX==T){AX="";}}}}return AX;};}());mstrmojo.GridBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._RowRendTracker],{scriptClass:"mstrmojo.GridBase",markupString:'<span id="{@id}" class="mstrmojo-Grid {@cssClass}" style="{@cssText}"></span>',markupSlots:{gridContainerNode:function(){return this.domNode;}},autoFitWindow:false,tableLayout:null,numAutoHeightRows:0,cp:null,rc:0,cc:0,cws:null,rh:null,totalColWidth:0,start:0,end:0,forceFixedSizes:true,hiliteCellsMap:null,eiMap:null,init:function C(m){this._super(m);},numColumnCanMerge:0,preBuildRendering:function A(){var m=this.cp;if(!m){return ;}m.initContent();this.rc=m.rc||0;this.cws=m.colWidths||[];this.cc=this.cws.length;this.tdWidths=m.tdWidths||[];this.tdCnt=this.tdWidths?this.tdWidths.length:0;this.start=0;this.end=this.rc-1;this.numAutoHeightRows=m.getNumAutoHeightRows&&m.getNumAutoHeightRows()||0;this.hiliteCellsMap={};this.eiMap={};this.posMap=[];this.thPosMap=[];this.totalColWidth=0;},buildRendering:function a(n){var m=this._super(n);this.renderGrid();return m;},renderGrid:function F(n){var m=this.getGridContainer();this.preBuildGridTable();this.buildGridTable(m,n);this.postBuildGridTable();},getGridContainer:function H(){return this.gridContainerNode;},buildGridTable:function M(o,m){var n=this.getTableStartMarkup();var v=this.getTableEndMarkup();if(m){this.mergeHdrsAcrossBlks=true;}var t=this.buildTableRowsMarkup(this.start,this.end,n,v).join("");if(m){var q=document.createElement("div");q.innerHTML=t;var u=o.firstChild,w=u&&u.tBodies,p=q.firstChild.tBodies[0],r=this.matchedHdrsAcrossBlks;u.appendChild(p);if(r&&r.length>0){U(r,w[w.length-2]);}}else{o.innerHTML=t;}this.markPages(this.start,this.end);},getTableStartMarkup:function E(){var n=this._getGridWidths(),m=g;m[1]=n.tableLayout;m[3]=n.totalColWidths;m[5]=this.tableCssClass?"class="+this.tableCssClass:"";m[7]="<colgroup>"+n.colgroup+"</colgroup>";if(this.tbodyStyle){m[8]='<tbody style="'+this.tbodyStyle+'">';}return m.join("");},getTableEndMarkup:function O(){return"</tbody></table>";},_getGridWidths:function R(){var v={};var q="",o=[],u="fixed",n=this.cws,r=n.length;if(r){q=0;o=[];for(var p=0;p<r;p++){if(n[p].w!==""){q+=parseInt(n[p].w,10);}}for(p=0;p<r;p++){var m=n[p];if(m.w!==""&&!this.autoFitWindow&&!this.autoFitContent){var t=parseInt(m.w,10);if(mstrmojo.dom.isIE7){if(t===0){o.push('<col style="width:0%;display:none"></col>');}else{o.push('<col style="width:'+(t/q*100)+'%"></col>');}}else{if(mstrmojo.dom.isWK&&t===0){o.push('<col style="width:-1px"></col>');}else{o.push('<col style="width:'+m.w+'"></col>');}}}else{o.push("<col />");u="auto";}}this.totalColWidth=q;}v.colgroup=o.join("");u=this.tableLayout||u;if(this.autoFitWindow){u=this.tableLayout||u||"fixed";q="100%";}else{if(u==="fixed"){q+="px";}else{q="auto";}}v.totalColWidths=q;v.tableLayout=u;return v;},_CELL_MARKUP:['<td rowSpan="',null,'" colSpan="',null,'" class="',null,'" ei="',null,'" style="',null,'" r="',null,'">',null,"</td>"],buildTableRowsMarkup:function I(AI,Ad,AB,w,o){var Av=[],Ac=0;Av[Ac++]=AB||"<table><tbody>";var AU=this.cp,Au=this.acws,Ax=this.rowMerge,A8=this.headerOffset,A9=this.mxPos,A1=!!AU.gemh,BC=AU.getRowHeight(),n=this._CELL_MARKUP,BA=BC?'<tr style="height:'+(BC?BC+"px":"")+'">':L;var A0=true,A5=true,AY=[],BF;var Ak=function Ak(r){var m=-1;mstrmojo.array.forEach(Au,function(BG,v){r=r-BG;if(r<0){m=v;return false;}});return m;};var AN=function AN(v,r){var m=-1;mstrmojo.hash.forEach(AU.gemh,function(BG,BH){if(v<=BH&&v+r>BH){m=BH;return false;}});return m;};var AH=function AH(BH,BI,BG){var v="",r,m;m=BH.gemh&&BH.gemh[BI];if(m){r=Ak(BG);if(m[r]&&m[r].v===0||A9===BG){v+=f;}}m=BH.gsmh&&BH.gsmh[BI];if(m){r=Ak(BG);if(m[r]&&m[r].v===0||A9===BG){v+=Q;}}return v;};var Ay,AR,Ao,AS=[],Ab,AW,u=0,Ai=0,AZ,AD,t=AU.colWidths&&AU.colWidths.length,BD=0,Ar=0,Am=o||((AB&&AB.indexOf("table-layout:fixed;")!==-1)?"fixed":"auto"),AL=mstrApp.isSingleTier;if(Au&&A1){for(Ab=0;Ab<Au.length-1;Ab++){Ar+=Au[Ab];}}Ar=Ar||this.numColumnCanMerge;if(Am==="fixed"){Ay=[];for(AR=0,Ao=this.cws.length;AR<Ao;AR++){if(window.parseFloat(this.cws[AR].w)<=0){Ay[AR]=true;}else{Ay[AR]=false;}}}this.matchedHdrsAcrossBlks=[];var z=Ad,BB=this.parent.isOutlineMode,An=this.parent.gridData,A7=An.maxLevel,Ae=An.lvlepd,AA=this.parent.id,AV=0;AU.renderingNewPage=true;for(var AX=AI;AX<=Ad;AX++){u=0;BF=Ac++;Av[BF]=AX<this.numAutoHeightRows?L:BA;var p=AU.updateCounter,Af=AU.getRowCells(AX);if(BB&&window.mstrApp&&mstrApp.isExporting){var AK=AU.updateCounter-p;if(AK>0){AV=AK;}if(AV>0){AV--;Av[BF]=Av[BF].substr(0,Av[BF].length-1)+' extra="1">';}}var Ah=Ad+1-AX;var AP=0;AD=Ax;AZ="";if(!this.mergeHdrsAcrossBlks){if(A0&&AI>0&&Af.length<AU.colWidths.length){var Ap=AU.getUnmergedCells(AI),Al;if(Ap){AP=Ap.length;}for(Ab=0,Ao=AP;Ab<Ao;Ab++){var At=Ap[Ab],A6=At.rs;if(A6>Ah){n[1]=Ah;n[5]=W+At.css;}else{n[1]=A6||1;n[5]=Q+At.css;}if(Ay&&Ay[Ai+u]){n[5]+=" nwFixedWidth0 ";}if(A6&&A6>1){AS.push(A6);}u+=At.cs||1;if(At.cet){n[5]+=" mstrmojo-selected-cell";this.addHilitePosition(At.cet,AX,Ab);}if(At._ei){this.addExtraInfoMap(At._ei,AX,Ab);n[5]+=" pt";}n[9]="";n[13]=T;n[3]=At.cs;if(At._ei===undefined){Al=AU.getRowCells(At.o+(AU.cps[0]&&AU.cps[0].rc||0),true);At=Z.filterOne(Al,function(m){return m.dpt===At.dpt&&m.idx===At.idx;});}n[7]=At._ei;n[11]=AX;if(A1){if(AD){AZ=AH(AU,AX-A8,Ab);}if(!!AZ){n[5]=AZ+n[5];}else{AD=false;}AZ=AH(AU,AN(AX-A8,n[1]),Ab);if(!!AZ){n[5]=f+n[5];AD=true;}}Av[Ac++]=n.join("");}A0=false;}}BD=t;Ao=Af.length;var Ag;for(Ag=0;Ag<Ao;Ag++){BD-=Af[Ag].cs||1;}for(Ag=0;Ag<Ao;Ag++){var AQ=Af[Ag],A4;if(AQ.outLvl){var A2=D.call(this,AQ,A7,Ae);Av[BF]=Av[BF].replace(">",A2);if(AU.updateCounter>0){Ad=z+AU.updateCounter;}}AQ.colIx=BD;if(AQ.rs&&AQ.rs>Ah){n[1]=Ah;n[5]=f+AQ.css;if(AQ._ei){this.addExtraInfoMap(AQ._ei,AX,Ag);}}else{n[1]=AQ.rs||1;n[5]=AQ.css;}if(Ay&&Ay[BD]){if(AQ.cs==undefined||Y(Ay,BD,AQ)){n[5]+=" nwFixedWidth0 ";}}if(AQ.rs&&AQ.rs>1){AS.push(AQ.rs);}u+=AQ.cs||1;if(AQ.rowType!==d){n[5]+=" xtab-td ";}if(AQ.cet){n[5]+="sc_"+this.parent.k;this.addHilitePosition(AQ.cet,AX,Ag);}if(AQ.lv!==undefined){n[5]+=" ra ";}A4=AQ.rowType;if(A4){n[5]+=S[A4]||"";var AT=AU.getRowHeight(A4);if(AT){Av[BF]='<tr style="height:'+(AT?AT+"px":"")+'">';}}n[3]=AQ.cs||1;n[7]=AQ._ei!==undefined?AQ._ei:"";if(AQ.fs||AQ._e){this.addTitleHeaderPositionMap(AX,Ag+AP,AQ);}if(AQ._ei!=null){this.addPositionMap(AQ._ei,AX,Ag+AP);}n[11]=AX;if(AQ.ts===N){if(mstrApp.isDossier){AQ.v=mstrmojo.url.getFullPath(AQ.v);}var Aw=AQ.v;if(this.imgCacheMap){var Aa=this.imgCacheMap,AW=Aw&&Aw.replace(/\\/g,"/");if(Aa.cachedImg[AW]){AQ.v=Aw=Aa.baseURL+Aa.cachedImg[AW];}else{if(AW&&!Aa.unCachedImg[AW]){Aa.unCachedImg[AW]=AW;}}}else{var AC=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model.dataService;if(AC&&AC.getImage){Aw=AC.getImage(Aw);}}if(AQ.rowType){var AJ=(AU.getRowHeight(AQ.rowType)||AU.rh||BC),AM=AJ,BE=this.tdWidths,AF=AQ.colIdx,x=0,AE=0;var Aj=AU.getPadding(K),Az=AU.getPadding(j);if(AQ.rowType===d||AQ.rowType===c){AE=AJ>(Aj+Az)?(AJ-Aj-Az):0;}else{if(AQ.rowType===e||AQ.rowType===G){AE=AJ>2*Az?(AJ-2*Az):0;}else{if(AQ.rowType===l){AE=AJ>(Az*2)?(AJ-Az*2):0;}}}if(AF!=="undefined"&&AF>-1&&BE&&BE.length>AF){var AO=BE[AF]&&BE[AF].w;if(AO!=="undefined"){x=parseInt(AO,10);}}var q=x>30?(x-30):0;n[13]='<div><div style="top:'+(-parseInt(AM/2,10))+"px;height:"+(AJ-1)+"px;line-height:"+(AJ-1)+'px !important;">&nbsp;<img style="max-height:'+AE+"px; max-width: "+q+'px;" src="'+Aw+'"></img></div></div>';}else{n[9]="";var Aq="",AG=this.parent&&this.parent.controller&&this.parent.controller.model&&this.parent.controller.model,As=AG.getZoomFactor();if(As!=1){Aq='onload="this.style.height='+As+"*this.offsetHeight+'px';\"";}if(BB){if(Aw.indexOf("#srcstart")!==-1){AQ.v=k(Aw,Aq);}else{AQ.v='<img src="'+Aw+'" '+Aq+"></img>";}n[13]=J(AQ,AL,AA);}else{n[13]='<img src="'+Aw+'" '+Aq+"></img>";}if(AQ.css&&AQ.css.indexOf("hl")>-1){n[13]="<span>"+n[13]+"</span>";}}}else{n[9]="";if(BB&&AQ.v&&AQ.v.indexOf("#srcstart")>=0){AQ.v=k(AQ.v,"");n[13]=J(AQ,AL,AA);}else{if((mstrApp.isDossier||mstrApp.useBinaryFormat)&&AQ.v&&AQ.v.indexOf("img")>=0){AQ.v=b.call(this,AQ.v);}n[13]=J(AQ,AL,AA);}}if(Ag<Ar){if(AX===AI&&this.mergeHdrsAcrossBlks){var A3=this.rowHdsAcrossBlks;if(A5&&AQ.v&&A3&&A3[Ag]){if(AQ.v===A3[Ag].v){n[1]=AQ.rs||1;n[5]=Q+AQ.css;n[13]="";this.matchedHdrsAcrossBlks.push(A3[Ag]);}else{A5=false;}}}if(A1){if(AD){AZ=AH(AU,AX-A8,BD);if(!!AZ){n[5]=AZ+n[5];if(AZ.indexOf(Q)>=0&&AX-A8>1){n[13]=T;}}else{AD=false;}AZ=AH(AU,AN(AX-A8,n[1]),BD);if(!!AZ){n[5]=f+n[5];AD=true;}}}if(n[1]>=Ah&&AQ.v){AY.push({rows:AX-AI,cells:Ag,v:AQ.v});}}BD+=AQ.cs||1;Av[Ac++]=n.join("");}Av[Ac++]="</tr>";for(Ag=AS.length-1;Ag>=0;Ag--){AW=AS[Ag];if(AW<=1){AS.pop();}else{AS[Ag]=--AW;}}Ai=AS.length;}Av[Ac++]=w||"</tbody></table>";this.rowHdsAcrossBlks=AY;return Av;},addHilitePosition:function(n,o,m){var p=this.hiliteCellsMap[n];if(!p){this.hiliteCellsMap[n]={pos:[],nodes:[]};}this.hiliteCellsMap[n].pos.push({row:o,cell:m,page:0});},addExtraInfoMap:function(n,m,o){if(!this.eiMap[n]){this.eiMap[n]=[];}this.eiMap[n].push({row:m,cell:o,page:0});},addPositionMap:function(n,m,o){if(!this.posMap[n]){this.posMap[n]={row:m,cell:o,page:0};}},addTitleHeaderPositionMap:function(m,p,n){this.thPosMap.push({row:m,cell:p,page:0,obj:n});},clearHilites:function(p){var u=this.hiliteCellsMap[p],r=u&&u.nodes,q=this.parent;if(r){if(r.length==0&&u.pos){r=this.getNodesByPositions(u.pos);}for(var o=0,n=r.length;o<n;o++){var t=r[o],m=q.getCellForNode(t);if(m){delete m.cet;}B.removeClass(t,"sc_"+q.k);}this.hiliteCellsMap[p].nodes=[];}},setHilites:function(n,o){B.addClass(o,"sc_"+this.parent.k);if(!this.hiliteCellsMap[n]){this.hiliteCellsMap[n]={pos:[],nodes:[]};}this.hiliteCellsMap[n].nodes.push(o);var m=this.parent.getCellForNode(o);if(m){m.cet=n;}},getNodesByPositions:function(q){var p=this.tableNode,m=[];for(var o in q){var n=q[o];m.push(p.tBodies[0].rows[n.row].cells[n.cell]);}return m;},preBuildGridTable:function V(){},postBuildGridTable:function h(){this.addSlots({tableNode:this.gridContainerNode&&this.gridContainerNode.firstChild});if(this.tableNode&&mstrApp&&mstrApp.isSingleTier){X.redirectUrlToFormWrapper(this.tableNode);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(j,l,h){var k=j.listSelector;if(k){k[l](j,j.itemsContainerNode,h);}}function L(j,h){var k=j.lastPagePos;if(!k||k.dragId!==h){k=e.offset(j.itemsContainerNode);k.dragId=h;j.lastPagePos=k;var l=j.scrollboxNode;j.lastScrollPos={left:l.scrollLeft,top:l.scrollTop,width:l.clientWidth,height:l.clientHeight};}}function O(l,o,j){var k=o&&o.node;if(k===l.dropCueNode||k===l.dropCueNode.firstChild){return l.dropCuePos;}var m=l.listMapper;var h=m&&m.whereDrop(l,l.itemsContainerNode,k,o.pos,{left:l.lastPagePos.left-l.lastScrollPos.left,top:l.lastPagePos.top-l.lastScrollPos.top,width:l.lastScrollPos.width,height:l.lastScrollPos.height});var n=l.dropCuePos;return((j!==false)&&n&&h&&(n.idx===h.idx)&&(n.left===h.left)&&(n.top===h.top))?n:h;}var g="attachEventListener";function D(j,h){if(j.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,j.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(j,h){if(h&&h[g]){j._sub_its=h;j._sub_add=h[g]("add",j.id,"preadd");j._sub_rmv=h[g]("remove",j.id,"preremove");}}function G(h){if(h._sub_its){var j=mstrmojo.publisher;j.unsubscribe(h._sub_add);j.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var j=this.dropCueNode,h=j&&j.style;if(!h){return ;}var l=this.dropCuePos,k=!!l;if(k){h.left=l.left+"px";h.top=l.top+"px";}h.display=k?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var m=this.listBuilder,p=m.newContext(this);this.ctxtBuilder=p;var j=this.markupSlots,l=!!(this.renderOnScroll&&this.renderBlockSize&&j&&j.scrollboxNode),k=this.items,h=(k&&k.length)||0,n=l?this.firstRenderBlockSize:h,o=l?this.firstRenderBlockSize:0;this._eros=l;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(k,m,this,p,n,o).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var n=mstrmojo.all[p];n.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(k,h,j){if(k!==false){k=true;}if(this.paused===!!k){return ;}this.paused=!!k;if(k){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,j);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,m){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var n=(this.items&&this.items.length)||0;if(!n){if(m){m();}}else{var k=this.scrollboxNode,o=this.itemsContainerNode,l=mstrmojo.boxmodel.offset(o,k),q=this.listMapper,p=q.findScrollRange(o,n,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||k.scrollTop,k.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||k.scrollLeft,k.clientWidth,l.left,l.top);if(this.fillAt(p.start,p.end)){if(h){h();}var j=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[j].fill(h,m);},100);}else{if(m){m();}}}},fillAt:function M(k,j){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,k,j,this.renderBlockSize);}else{return false;}},add:function R(j,h){if(!j||!j.length){return -1;}var k=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(k&&k.length)||0;}if(k&&k.add){k.add(j,h);}else{this.set("items",k?f.insert(k.concat(),h,j):j);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(k){var j=this.items;if(!j||(k==null)){return -1;}var h;if(!isNaN(k)){h=k;}else{h=this.itemIndex(k);}if(h>-1){if(j.remove){j.remove(h,1);}else{j=j.concat();j.splice(h,1);this.set("items",j);}}return h;},duplicate:function Y(n,j,k){var l=this.items,h=-1;if(!l||(n==null)){return -1;}if(!isNaN(n)){if(j===null||j===undefined){j=n+1;}n=l[n];}else{if(j===null||j===undefined){j=this.itemIndex(n)+1;}}if(n){var m;m=a.copy(k,a.clone(n));h=this.add([m],j);}return h;},preremove:function N(j){if(this.hasRendered){var l=this.listMapper;if(l){l.onremove(this,this.itemsContainerNode,this.ctxtBuilder,j);}var k=this.listBuilder;if(k){k.onremove(this,this.ctxtBuilder,j);}var h=this.listSelector;if(h){h.onremove(this,j);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(j);}if(this._super){this._super(j);}},move:function S(l,q){function o(t,r){return q>=t&&q<=t+r;}var p=(this.items&&this.items.length)||0;if(q===-1||q==null||isNaN(q)){q=p;}else{q=Math.min(q,p);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(o(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(o(h,1)){return false;}}else{h=l;n=[l];m=1;if(o(h,1)){return false;}k=[this.items[h]];}}for(var j=0;j<m;j++){if(n[j]<=q){q--;}}if(k[0]!=null){this.remove(h);this.add(k,q);}return true;},itemIndex:function F(h){if(h==null){return -1;}var j=this.itemIdField;return j?f.find(this.items,j,h[j]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(o,h){var m=this.items;h=this.initItems(h);this.items=h;if(m!==h){var l=this,k=function(){if(l.autoHide){l.set("visible",!!(h&&h.length));}l=null;},j=this.hasRendered;if(j){this.refresh(k);}else{k();}}return m!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(j){var h,k=this.listMapper;if(k&&k.toItem){if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>=0){k.toItem(this,h);}}},draggable:false,getDragData:function(m){L(this,m.id);var k=O(this,m.src),j=k&&k.idxActual;if((j>-1)&&this.selectedIndices[j]){var l=this.sortSelectedIndices(),h=f.get(this.items,l)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:l[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:l},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(l){var j=l&&l.tgt,h=j&&j.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(j.hWin,j.e)){var k=l.src&&l.src.data;if(k&&(k.indices||(k.index!==null))){this.remove(k.indices||k.index);}}}}},ondrop:function(q){var u=q&&q.src,p=u&&u.data;if(p){var k=O(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;r=Math.min(r,n&&n.length)||0;var t=true;if(u.widget===this){t=this.move(j,r);f.forEach(j,function(v){if(v<=r){r--;}});}else{this.add(l?p:[p],r);}if(t){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocHTMLContainer=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocHTMLContainer",scrolling:"auto",markupString:'<iframe id="{@id}" k="{@k}" class="mstrmojo-DocHTMLContainer" title="{@tooltip}" style="{@domNodeCssText}" src="{@v}" scrolling="{@scrolling}"></iframe>',formatHandlers:{domNode:["RW","B","F","background-color","text-align","white-space","fx"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function A(B){this.v=B.data.v;if(mstrApp&&mstrApp.isTouchApp()){this.scrolling="no";}if(this.thresholdId||B.data.tid){delete this.fmts;}this.thresholdId=B.data.tid;this.set("visible",!B.data.hidden);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocRoundRectangle=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocRoundRectangle",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocRoundRectangle" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocRoundRectangle-l1" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l2" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l3" style="{@tCornersCssText}{@tCornersCssGradText}"></div><div style="{@rectNodeCssText}{@rectNodeGradCssText}"></div><div class="mstrmojo-DocRoundRectangle-l3" style="{@bCornersCssText}{@bCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l2" style="{@bCornersCssText}{@bCornersCssGradText}"></div><div class="mstrmojo-DocRoundRectangle-l1" style="{@bCornersCssText}{@bCornersCssGradText}"></div></div>',markupSlots:{rectNode:function(){return this.domNode.childNodes[3];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["top","left","width","z-index","fx"],rectNode:["height","background-color"],tCorners:["background-color"],bCorners:["background-color"]},update:function C(D){if(this.thresholdId||D.data.tid){delete this.fmts;}this.thresholdId=D.data.tid;this.set("visible",!D.data.hidden);},preBuildRendering:function B(){var F=this._super();var G=this.getFormats(),D=!!this.defn.topc,I=D?4:8,H="(\\d*px)",E=Math.max(parseInt(G.height,10)-I,0);if(G.height==="100%"){H="(100%)";E=this.parent.getHeight()-I;}this.rectNodeCssText=this.rectNodeCssText.replace(new RegExp("(.*height:)"+H+"(.*)"),"$1"+E+"px$3");if(D){this.bCornersCssText="display:none;";}return F;},formatGradient:function A(E,H){var F=mstrmojo.css.buildGradient(E.t,E.sc,E.ec);if(!F){return ;}var D=F.n+":"+F.v+";",G="background-color:";this.rectNodeGradCssText=D;if(E.t===0){this.tCornersCssGradText=G+E.sc+";";this.bCornersCssGradText=G+E.ec+";";}else{this.tCornersCssGradText=this.bCornersCssGradText=D;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Widget");var A=mstrmojo.css;mstrmojo.TabButton=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.TabButton",markupString:'<span id="{@id}" class="mstrmojo-TabButton {@cssClass}" style="{@cssText}" mstrAttach:click></span>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},ontitleChange:function(){this.domNode.innerHTML=this.title||"";},onbackgroundColorChange:function(){this.domNode.style.backgroundColor=this.backgroundColor||"";},onselectedChange:function(){A.toggleClass(this.domNode,["selected"],!!this.selected);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(H,I);}else{mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);}},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var C=mstrmojo.css,A=mstrmojo.dom,F=mstrmojo.string,E=function(H){this._super&&this._super(H);A.stopPropogation(H.hWin,H.e);},G=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.DynamicNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.fe.DynamicNode",markupString:'<div id="{@id}" class="mstrmojo-dynamic {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-dynamic-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-dynamic-prefix-text"  mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">'+G+'<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-onhoverparent mstrmojo-dynamicNode" title="'+mstrmojo.desc(13229,"Add this condition to the target list of a selector.")+'"><span class="mstrmojo-dynamicNode-info"><span class="mstrmojo-textset"></span></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" ></img></span><span class="mstrmojo-textset mstrmojo-rename-text" mstrAttach:click >'+mstrmojo.desc(1388,"Rename")+"</span>"+G+"</div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},dynamicNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.lastChild.firstChild.lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},createSetNode:function(){return this.domNode.lastChild.lastChild;},renameNode:function(){return this.domNode.lastChild.childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){C.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){C.toggleClass(this.dynamicNode,["selected"],this.selected);},onisEditingChange:function(){C.toggleClass(this.domNode,["renaming"],this.isEditing);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=this.data.ph.n;},onglowChange:function(){var H=this;C.toggleClass(H.dynamicNode,["glow"],this.glow);if(this.glow){setTimeout(function(){C.toggleClass(H.dynamicNode,["glow"],false);H.glow=false;},1000);}},onnoRelationOperatorChange:function(){C.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){C.toggleClass(this.dynamicNode,["noRelation"],this.noRelation);}},editableSlot:"textNode",editButtonSlot:"renameNode",init:function(H){var J=H.data;if(J){var I=H.tree.nameFactory;if(J.ph.n){I.setName(J.ph.n,this);}else{J.ph.n=I.getNewName(this,mstrmojo.desc(12033,"Dynamic Condition")+" ");}}this._super(H);},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;this.text=H.ph.n;}return J;},preclick:function D(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.createSetOptNode,I,true)&&!this.noRelationOperator&&!this.noRelation){J="createSetOpt";}else{if(A.contains(this.createSetNode,I,true)&&!this.noRelation){J="createSet";}else{if(A.contains(this.renameNode,I,true)){this.set("isEditing",true);}}}}H.part=J;},isEmpty:function(){var I=this.data,H=I&&I.ph;return !(H&&H.n);},del:function B(){var I=this.parent,H=this.tree.nameFactory;if(I&&I.remove&&this.data){I.remove(this.data);H.removeName(this.data.ph.n);}},onkeyup:E,onkeydown:E,onTextEditComplete:function(){var J=this.tree,K=J.nameFactory,H=F.trim(this.text||""),I=this.data.ph.n;if(H&&H!==I){if(K.isNameExist(H)){K.names[H].set("glow",true);this.set("isEditing",true);}else{K.changeName(I,H,this);this.data.ph.n=H;}}},isSelectableArea:function(H){return mstrmojo.dom.contains(this.dynamicNode,H,true);},avatarCssCls:"mstrmojo-FE mstrmojo-dynamicNode",getAvatarNode:function(){return this.dynamicNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image class="{@imgCssClass}" src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||"../javascript/mojo/css/images/1ptrans.gif";}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@en@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css");var C=mstrmojo.Widget;mstrmojo.ui.Checkbox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.Checkbox",markupString:'<div id="{@id}" class="mstrmojo-ui-Checkbox {@cssClass}" mstrAttach:click></div>',markupMethods:{onvisibleChange:C.visibleMarkupMethod,oncheckedChange:function B(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},onenabledChange:C.enabledMarkupMethod},checked:false,onclick:function A(){this.set("checked",!this.checked);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocLine=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocLine",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocLine" title="{@tooltip}" style="{@domNodeCssText}"></div>',formatHandlers:{domNode:["RW","border-top","border-left","fx"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function B(C){if(this.thresholdId||C.data.tid){delete this.fmts;}this.thresholdId=C.data.tid;this.set("visible",!C.data.hidden);if(this._super){this._super(C);}},getFormats:function A(){var C=this._super();if(C&&parseInt(C.height,10)===0){C.height="1px";}return C;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.dom");var L=mstrmojo.color,H=mstrmojo.dom;var I=68.5,M=77.5,D=83;function B(O,N){return{x:O.clientX-N.x-M,y:O.clientY-N.y-M};}function K(){var N=this._hsl[1],P=this._hsl[2];var O=this.slHandleNode.style;O.left=Math.round(D*(0.5-N)+M)+"px";O.top=Math.round(D*(0.5-P)+M)+"px";}function F(){var N=this._hsl[0],P=N*2*Math.PI;var O=this.hueHandleNode.style;O.left=Math.round(Math.sin(P)*I+M)+"px";O.top=Math.round(-Math.cos(P)*I+M)+"px";this.slNode.style.backgroundColor=L.hsl2hex(N,1,0.5);}function C(){this._hsl=L.hex2hsl(this.color);if(this.slHandleNode&&this.hueHandleNode){K.call(this);F.call(this);}}mstrmojo.ui.editors.controls.ColorWheel=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.editors.controls.ColorWheel",markupString:'<div id="{@id}" class="mstrmojo-ui-ColorWheel {@cssClass}" style="{@cssText}" mstrAttach:mousedown><div class="cwHue"></div><div class="cwColorField"></div><div class="cwHandle"><div></div></div><div class="cwHandle"><div></div></div></div>',markupSlots:{slNode:function(){return this.domNode.childNodes[1];},hueHandleNode:function(){return this.domNode.childNodes[2];},slHandleNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},slNode:null,hueHandleNode:null,slHandleNode:null,color:"#ffffff",onColorPicked:function G(N){},postBuildRendering:function A(){C.call(this);},oncolorChange:function J(){C.call(this);},onmousedown:function E(Q){var S=this,N=H.position(this.domNode),T=this._hsl,P=Q.e,R=B(P,N),U=Math.max(Math.abs(R.x),Math.abs(R.y))*2>D,O=function(X){var a=B(X,N),W=T[0],Y=T[1],Z=T[2];if(U){W=Math.atan2(a.x,-a.y)/(2*Math.PI);if(W<0){W+=1;}S._hsl=[W,Y,Z];F.call(S);}else{Y=Math.max(0,Math.min(1,-(a.x/D)+0.5));Z=Math.max(0,Math.min(1,-(a.y/D)+0.5));S._hsl=[W,Y,Z];K.call(S);}var V=L.hsl2hex(W,Y,Z);S.color=V;S.onColorPicked(V);H.stopPropogation(window,X);return false;};H.attachMouseMoveEvents(O);O(P);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocRectangle=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocRectangle",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocRectangle" title="{@tooltip}" style="{@domNodeCssText}"></div>',markupMethods:{onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}},onwidthChange:function(){if(this.width){this.domNode.style.width=this.width+"px";}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["RW","B","background-color","fx"]},preBuildRendering:function B(){var E=this._super(),D=this.defn;if(D.r){this.domNodeCssText+=mstrmojo.css.buildRoundCorners(D.r,D.topc);}return E;},postBuildRendering:function(){var F=this._super();var E=this.fmts;if(E){var D=E.border||E["border-width"],G=D&&(parseInt(D,10)/72*this.model.dpi);if(G){if(E.height==="100%"){this.set("height",this.domNode.clientHeight-2*G);}if(E.width==="100%"){this.set("width",this.domNode.clientWidth-2*G);}}}return F;},update:function C(D){if(this.thresholdId||D.data.tid){delete this.fmts;}this.thresholdId=D.data.tid;this.set("visible",!D.data.hidden);if(this._super){this._super(D);}},getFormats:function A(){var D=this._super(),E="z-index";if(D&&this.defn&&this.defn.fmts&&D[E]!=this.defn.fmts[E]){D[E]=this.defn.fmts[E]||D[E];}return D;}});}());(function(){var regExH=/"height", "[0-9.]+"/g;var regExW=/"width", "[0-9.]+"/g;var regExH1=/height="?[0-9.]+"?/g;var regExW1=/width="?[0-9.]+"?/g;mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable","mstrmojo._IsSelectorTarget");mstrmojo.DocVisualization=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget],{scriptClass:"mstrmojo.DocVisualization",markupString:'<div id={@id} class="mstrmojo-docvisualization" title="{@tooltip}" style="{@domNodeCssText}">{@htmlText}</div>',formatHandlers:{domNode:["RW","T","B","fx"]},update:function update(node){if(this._super){this._super(node);}var d=node.data;this.htmlText=d.htmlText;this.jsText=d.jsText;this.selData=d.selData;this.ctrLink=d.ctrLink;this.vp=d.vp;this.eg=d.eg;if(this.eg){this.htmlText=this.eg;}},preBuildRendering:function(){if(this._super){this._super();}var fmts=this.getFormats();if(!fmts){return ;}var h=fmts.height;if(h){h=h.replace("px","");}var w=fmts.width;if(w){w=w.replace("px","");}if(this.jsText){this.jsText=this.jsText.replace(regExH,'"height", "'+h+'"').replace(regExW,'"width", "'+w+'"');}},postBuildRendering:function pstBldRnd(){if(this._super){this._super();}eval(this.jsText);},resize:function(){if(this.eg){return ;}var embedNode=this.domNode.firstChild.firstChild.firstChild;if(!embedNode){return ;}var fmts=this.getFormats();var h=fmts.height;if(h){h=h.replace("px","");}var w=fmts.width;if(w){w=w.replace("px","");}if(mstrmojo.dom.isIE){embedNode.firstChild.setAttribute("height",h);embedNode.firstChild.setAttribute("width",w);}else{embedNode.innerHTML=embedNode.innerHTML.replace(regExH1,'height="'+h+'"').replace(regExW1,'width="'+w+'"');}},makeSelections:function(selections){var shuffledData={},i,j,attId,e;for(i=0;i<selections.length;i++){var attIdI=selections[i].attId;if(!shuffledData[attIdI]){shuffledData[attIdI]=[];}shuffledData[attIdI]=shuffledData[attIdI].concat(selections[i].values);}var sep="\u001E",sep1="\u001F";var ckJoined="",eidJoined="",cklJoined="";var tksArray=[];for(attId in shuffledData){var sd=this.getSelectionData(attId);if(!sd){continue;}var ctrLink=this.ctrLink[attId];var values=shuffledData[attId];if(sd&&values&&values.length>0){sd.sel=values;sd.ias=false;for(e in values){if(e==="u;"){sd.ias=true;break;}}}if(ctrLink.gbTargets){var t=ctrLink.targets=[],gbt=ctrLink.gbTargets,cgbmap=this.model.getCGBMap();for(j=0;j<gbt.length;j++){var targetKey=cgbmap[gbt[j]];if(targetKey){t.push(targetKey);}}delete ctrLink.gbTargets;}ckJoined+=ctrLink.ctxt+sep1;eidJoined+=values.join(sep)+sep1;cklJoined+=ctrLink.ck+sep1;tksArray=tksArray.concat(ctrLink.targets);}ckJoined=ckJoined.substring(0,ckJoined.length-1);eidJoined=eidJoined.substring(0,eidJoined.length-1);cklJoined=cklJoined.substring(0,cklJoined.length-1);if(tksArray.length===0){return ;}var evt={ck:ckJoined,eid:eidJoined,src:this.k,tks:tksArray.join(sep),type:this.defn.t,ctlKey:cklJoined,include:true,isDocVis:true};this.model.slice(evt);},getAllSelectionData:function(){return this.selData;},getSelectionData:function(attId){var selData=this.selData,k;if(selData&&selData.attl){var attl=selData.attl;if(attId){return attl[attId];}return attl[attl.keys()[0]];}},saveVisProps:function(widgetPropsXml){mstrApp.docModel.updateUnitFormat(this,1,{FormattingWidget:{WidgetProps:widgetPropsXml}},{success:function(){}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var F=mstrmojo.array,C=mstrmojo.css,G=mstrmojo.string,B=mstrmojo.dom,A="unselected",D="block";function H(L){var K=mstrApp.getConfiguration();if(L===decodeURI(L)){L=encodeURI(L);}if(K&&L&&L.indexOf("://")===-1){L=K.getHostUrlByProject(mstrApp.getCurrentProjectId())+L;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(L)):L;}mstrmojo.ImageToggle=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ImageToggle",unset:null,useAnimation:true,markupString:'<div class="mstrmojo-ImageToggle {@cssClass}" style="{@cssText}" tabindex="{@tabIndex}"  mstrAttach:click,blur,keydown ></div>',tabIndex:0,markupMethods:{onimageListChange:function(){var P=this.imageList&&this.imageList.slice(),M=this,N=this.unset,L,O,K;if(!G.isEmpty(N)&&P){P.push({n:N,v:N,_ust:true});}if(this.domNode&&P){M.domNode.innerHTML="";M.domNode.style.minHeight=Math.min(20,M.height)+"px";M.domNode.style.minWidth=Math.min(20,M.width)+"px";M._loadedImgs=P.length;mstrmojo.array.forEach(P,function(R,Q){O=document.createElement("div");O.style.cssText="display:none;font-size:0px !important;line-height:"+Math.min(30,M.height)+"px !important;";K=document.createElement("img");K.alt=K.title=R.v;K.style.verticalAlign="middle";K.style.maxHeight=M.height+"px";K.style.maxWidth=(M.width-1)+"px";if(!mstrmojo.dom.isIE){K.onerror=function(){this.src="../images/image_not_found.jpg";};}O.appendChild(K);M.domNode.appendChild(O);K.src=(R.n&&H(R.n))||"../images/image_not_found.jpg";if(R._ust){M.ustImgIdx=Q;}M._imgs[Q]=O;});this._setSelectedValue();}},onvalueChange:function(){this._setSelectedValue();}},imageList:null,value:null,selectedIndex:-1,preBuildRendering:function E(){if(this._super){this._super();}this._imgs=[];},_setSelectedValue:function I(){var M=this,L=this.selectedIndex,O=this.imageList;if(O){if(O[L]){M._imgs[L].style.display="none";}F.forEach(this.imageList,function(P,Q){if(P.v==M.value){C.removeClass(M.domNode,A);M.selectedIndex=Q;M._imgs[Q].style.display=D;return ;}});if(this.selectedIndex===-1){if(!this.unset){C.addClass(this.domNode,A);}else{var N=this._imgs[this.ustImgIdx],K=N.lastChild;K.alt=K.title=this.value;N.style.display=D;}}}},onclick:function J(){var M=this.imageList,N=M&&M.length,O=300,U=this.selectedIndex,L=U,K=this.domNode,S,R,Q,T,P=this;Q=(U===-1&&this.ustImgIdx!==null)?this._imgs[this.ustImgIdx]:this._imgs[U];U=(U+1)%N;T=this._imgs[U];C.removeClass(K,A);this.selectedIndex=U;if(this.useAnimation){R=new mstrmojo.fx.FadeIn({duration:O,interval:(B.isIE8?(O/3):(O/10)),target:T,preStart:function(){this.target.style.display=D;}});S=new mstrmojo.fx.FadeOut({duration:O,interval:(B.isIE8?(O/3):(O/10)),target:Q,onEnd:function(){Q.style.display="none";if(L===-1){P._imgs.splice(P.ustImgIdx,1);K.removeChild(Q);delete P.ustImgIdx;}R.play();}});if(Q){S.play();}else{R.play();}}else{if(Q){Q.style.display="none";if(L===-1){P._imgs.splice(P.ustImgIdx,1);K.removeChild(Q);delete P.ustImgIdx;}}T.style.display=D;}this.value=this.imageList[U].v;},onkeydown:function(L){var K=L.hWin,M=L.e||K.event;if(M.keyCode===mstrmojo.Enum_Keys.SPACE){mstrmojo.dom.preventDefault(K,M);this.onclick();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var E=mstrmojo.Widget;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function D(){return this.domNode.firstChild;},containerNode:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:E.visibleMarkupMethod,onheightChange:E.heightMarkupMethod,onwidthChange:E.widthMarkupMethod,onvalueChange:function F(){this.selectedNode.innerHTML=this.value||"";},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",postBuildRendering:function B(){this._super();this.getPopupList().set("items",this.items);var G=this.selectedIndex,H=this.selectedIndices;if(G!==undefined){this.set("selectedIndex",G);}if(H!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(H||{}));}},onitemsChange:function C(){var G=this.getPopupList();if(G){G.set("items",this.items);}},onPopupWidgetOpened:function(){var G=this.getPopupList();if(G&&(!G.items||G.items.length===0)){G.close();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.css","mstrmojo._IsExprNode","mstrmojo._HasPopup","mstrmojo.Widget","mstrmojo.fe.FilterUtils");var I=mstrmojo.dom,A=mstrmojo.css,E=mstrmojo.fe.FilterUtils,D=E.getExprConditionNodeHtml,B=E.getExprNodeHtmlAndText;function C(J){var K=J.data;return D(K);}mstrmojo.ConditionNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},oneditableChange:function(){A.toggleClass(this.textNode,["editable"],this.editable);},onselectedChange:function(){A.toggleClass(this.condNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();var J=B(this.data);this.textNode.innerHTML=J.html;this.textNode.title=J.text;this.textPostfixNode.innerHTML=this.getConditionTextPostfix();}},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),init:function H(J){this._super(J);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());},getConditionTextPostfix:function(){return"";},del:function G(){var J=this.parent;if(J&&J.remove&&this.data){J.remove(this.data);}},isEmpty:function(){var K=this.data,J=K&&K.et,L=J&&mstrmojo.expr.ET2TGT[J];return !(L&&K[L]);},isSelectableArea:function(J){return I.contains(this.condNode,J,true);},preclick:function F(J){var L=null,K=I.eventTarget(J.hWin,J.e);if(I.contains(this.prefixNode,K,true)){L="andor";}else{if(I.contains(this.textNode,K,true)){L="condition";}else{if(I.contains(this.textPostfixNode,K,true)){I.stopPropogation(J.hWin,J.e);return false;}}}J.part=L;}});mstrmojo.ConditionNode.getFunctionNode=C;})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.DocDataService","mstrmojo.mstr.EnumWebAPIErrorCodes");var G=mstrmojo.hash.copy,S=mstrmojo.func,W=S.wrapMethods,X=mstrmojo.mstr.EnumWebAPIErrorCodes;var K=1,E=2,A=3;var P={FIRST:1,MIDDLE:2,LAST:3};var O={BUSY:1,INTERIM:2,DONE:3,SILENT:4,CANCELED:5};var F=G(mstrmojo.DocDataService.SUPPRESS_DATA,{preserveUndo:true,config:{silent:true}});function B(Y,a,Z){if(a.stid==="undefined"){Z.submission=function(e,b,c){var f=c.params,d=JSON.parse(f.params);d.actions[0].stid=Y.action===K?Y.undoStateId:Y.redoStateId;f.params=JSON.stringify(d);};}return Z;}function H(Z,d){var a=Z.mgr;d.disablePU=true;var c=B(Z,d,{success:function b(){Z.state=O.DONE;},failure:function Y(){a.onFailure();}});Z.state=O.SILENT;a.dataService.submitUpdates(d,c,F);a.onSuccess(Z);}function V(j,d){var h=j.urInfo,g=h.puKeys,o=h.puObjs,e=h.puFilters,k=j.mgr,f=k.model,l=k.dataService;if(g||o){if(g){d.partialRetrieval={nodes:g,filters:e};}if(o){f.addUpdateObjects(d,o);}}else{d.disablePU=true;}var b=B(j,d,{success:function n(){j.state=O.DONE;k.onSuccess(j);f.restoreUIState(j.action===K?j.undoUIState:j.redoUIState);},failure:function a(){k.onFailure();},complete:function Z(){k.resetState();}}),Y=h.callback||f.getRebuildCallback(),m=W(Y,b),c=G(h.extras);if(d.act==="undo"&&c!==undefined){c.hideCancel=true;if(d.killJob){c.message=mstrmojo.desc(14586,"Canceling...");}}j.state=O.BUSY;l.submitUpdates(d,m,c);}function M(b){var Y=b.urInfo,Z=b.mgr.model;if(!Y.extras){var a=(Y.treesToRender!==undefined)?Y.treesToRender:b._treesFromRes;if(!Y.disablePU&&!b._hasFullUpdate&&(!Y.puKeys||!Y.puKeys.length)){a=0;Y.callback=W(Z.getDatasetsUpdateCallback(),Y.callback);}Y.extras={style:{params:{treesToRender:a}}};}}mstrmojo.vi.controllers.UICmd=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmd",mgr:null,redoStateId:null,undoStateId:null,execute:mstrmojo.getMissingFn(),discard:mstrmojo.emptyFn,isUntracked:false,action:null,state:O.INTERIM,urInfo:null,getStateValue:function U(Z,Y){return this.action===K?Y:Z;},init:function Q(Y){G(Y,this);this._treesFromRes=0;this.urInfo=this.urInfo||{};this.submitCount=0;},undoRedo:function I(e){var a=this,c,Z=this.urInfo,Y=Z.silent,f,b=this.mgr,d=b.dataService;if(a.action===A){c={act:"redo",stid:a.redoStateId};f=Z.redo;}else{if(a.action===K){c={act:"undo",stid:a.undoStateId,killJob:e};f=Z.undo;}else{b.handleError();}}if(f){d.blockRequests=true;try{Y=!!f.call(a)||Y;}finally{d.blockRequests=false;}}if(Y){H(a,c);}else{V(a,c);}},submitUpdate:function J(Z,Y){this.submit(Z.actions,Z.callback,Z.extras,Y);},submit:function L(c,n,b,l){var h=this,j=h.mgr,e=j.model,k=j.dataService,g=mstrmojo.array.ensureArray(c);n=n?G(n):e.getRebuildCallback();h.state=O.BUSY;function d(o,p){return !(o&&o[p]&&o[p].length);}if(h._hasFullUpdate||g.some(function(o){return o.disablePU;})||g.every(function(p){var q=p.partialRetrieval,o=p.partialUpdate;return d(q,"nodes")&&d(o,"nodes")&&d(o,"selectors")&&d(o,"objects");})){h._hasFullUpdate=true;}S.override({submission:function a(){if(h.submitCount===0){h.undoStateId=k.stid;}h.submitCount++;},success:function m(t,u){if(h.action!==E){j.handleError();}h.redoStateId=t.stid;var r=!l||l===P.LAST;if(r){h.state=O.DONE;}else{h.state=O.INTERIM;}var q=h.urInfo;if(!q.disablePU){var o=q.puKeys||[],v=t.pukeys&&t.pukeys.split("\u001E");if(v&&v.length){o=o.concat(v);var p=q.extraPuKeys;if(p){o=o.concat(p);delete q.extraPuKeys;}}if(o.length){q.puKeys=o;}}h._treesFromRes|=(t.defn?1:0)|(t.data?2:0);if(this._super){this._super(t,u);}if(r){h.completeSubmit();}},failure:function Z(o,r){var q=(b&&b.skipUICmdMgrOnFailure)||[],p=parseInt(o.code||(o.getResponseHeader&&o.getResponseHeader("X-MSTR-TaskErrorCode")||X.UICMD_DEFAULT_ERROR),10);if(q.indexOf(p)===-1&&q.indexOf(mstrmojo.mstr.EnumWebAPIErrorCodes.E_UNUSED)===-1){j.onFailure();}if(this._super){this._super(o,r);}},canceled:function f(o){if(this._super){this._super(o);}window.setTimeout(function(){h.cancel(true);},0);},complete:function Y(){if(!l||l===P.LAST){j.resetState();}if(this._super){this._super();}}},n);k.submitUpdates(c,n,b);},submitInterim:function R(Z,a,Y){this.submit(Z,a,Y,P.MIDDLE);},resetCmdMgrOnComplete:function C(){this._resetMgr=true;},completeSubmit:function N(){var Z=this,a=Z.mgr,Y=a.model;if(!Z.completed){Z.completed=true;Z.state=O.DONE;a.onSuccess(Z);M(Z);Z.redoUIState=Y.getUIState();if(Z.isUntracked){a.untrackLastCmd();}else{if(Z._resetMgr){a.reset();}}}},cancel:function D(Y){this.state=O.CANCELED;if(this._hasFullUpdate){this._treesFromRes=3;}M(this);this.mgr.onCancel(this,Y);},submitSilent:function T(a){var c=this,d=c.mgr,b=d.model,e=d.dataService;c.state=O.SILENT;d.onSuccess(c);c.redoUIState=b.getUIState();var f={submission:function Z(){c.undoStateId=e.stid;c.submitCount++;},success:function g(h){c.state=O.DONE;c.redoStateId=h.stid;},failure:function Y(){d.onFailure();}};e.submitUpdates(a,f,F);}});mstrmojo.vi.controllers.UICmd.CMD_PHASE=P;mstrmojo.vi.controllers.UICmd.CMD_STATE=O;mstrmojo.vi.controllers.UICmd.CMD_ACT_TYPE={UNDO:K,EXEC:E,REDO:A};}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.DocDataService");mstrmojo.vi.models.PanelFormatSaver=mstrmojo.provide("mstrmojo.vi.models.PanelFormatSaver",{getPanelSaver:function A(C,B,D){return{saveProperty:function E(G,H){var J=B[G];if(J){if(J.convert){H=mstrmojo.boxmodel.px2Inches(C.getZoomProps(),H);}var I={},F=I[J.set]={};F[J.name]=H;C.updateUnitFormat(D||C.getRootNode(),1,I,undefined,mstrmojo.DocDataService.RAPID_EXEC);}}};}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocDataService");mstrmojo.OIVMViewFactory=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.OIVMViewFactory",newDocDataService:function A(B){return new mstrmojo.DocDataService(B);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.PanelFormatSaver");mstrmojo.vi.ui._IsViPanel=mstrmojo.provide("mstrmojo.vi.ui._IsViPanel",{_mixinName:"mstrmojo.vi.ui._IsViPanel",getPanelSaver:function A(){return null;},setOpenStatus:function D(F,E,I,H){if(this.visible!==F){this.set("visible",F);if(!H){this.resetLayout(H);}if(!E){var G=this.getPanelSaver();if(G){G.saveProperty("visible",F);}}mstrApp.rootCtrl.generateToolbar();}},getOpenStatus:function C(){return !!this.visible;},resetLayout:function B(){this.height=this.width="1px";this.parent.doLayout();}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService","mstrmojo.vi.controllers.UICmd");var H=mstrmojo.hash.copy,T=mstrmojo.array.forEach,F=mstrmojo.vi.controllers.UICmd;var O=2,E=1,N=F.CMD_ACT_TYPE.UNDO,G=F.CMD_ACT_TYPE.EXEC,A=F.CMD_ACT_TYPE.REDO;var U=F.CMD_PHASE;var S=F.CMD_STATE;function B(){T(this._delayRemovedCmds,function(c){c.discard();});this._delayRemovedCmds=null;}function D(){this.cmds=this.cmds.concat(this._delayRemovedCmds);this._delayRemovedCmds=null;}function M(d){var c=this.cmds,e=this.pos;this._delayRemovedCmds=c.splice(e+1);if(e>=this.size-1){c.shift().discard();}c.push(d);this.pos=c.length-1;}mstrmojo.vi.controllers.UICmdMgr=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmdMgr",cmds:null,pos:-1,size:20,_delayRemovedCmds:null,controller:null,dataService:null,model:null,state:E,CMD_PHASE:U,init:function V(c){H(c,this);this.cmds=[];},execute:function J(f){if(this.state===O){this.handleError();}try{f=H(f,{mgr:this,undoUIState:this.model.getUIState(),action:G});var c=this.curCmd=new F(f);M.call(this,c);this.state=O;c.execute();}catch(d){this.reset();throw d;}},getInterimCmd:function R(){if(this.state===O){var c=this.cmds[this.pos];if(c&&c.state===S.INTERIM){return c;}}return null;},undo:function a(f){if(this.canUndo()){this.state=O;try{var c=this.curCmd=this.cmds[this.pos--];c.action=N;c.redoUIState=this.model.getUIState();c.undoRedo(f);}catch(d){this.reset();throw d;}}},redo:function P(){if(this.canRedo()){this.state=O;try{var c=this.curCmd=this.cmds[++this.pos];c.action=A;c.undoUIState=this.model.getUIState();c.undoRedo();}catch(d){this.reset();throw d;}}},onSuccess:function I(c){if(this.state===E){this.handleError();}if(c!==this.curCmd){this.handleError("Wrong command");}this.state=E;B.call(this);this.controller.onCmdMgrChanged();},onFailure:function X(){B.call(this);this.reset();},onCancel:function L(d,e){this.state=E;var c=!!d.submitCount;if(c){this.undo(e);}else{this.pos--;}this.cmds.pop();d.discard();if(c){B.call(this);}else{D.call(this);}this.controller.onCmdMgrChanged();},untrackLastCmd:function Z(){var c=this.cmds.pop();c.discard();this.pos--;this.controller.onCmdMgrChanged();},reset:function Z(){T(this.cmds,function(c){c.discard();});this.cmds.length=0;this.pos=-1;this.state=E;this.controller.onCmdMgrChanged();},resetState:function W(){this.state=E;},canUndo:function b(){return this.state===E&&this.pos>=0;},canRedo:function Q(){return this.state===E&&this.pos<this.cmds.length-1;},onSubmitUpdates:function Y(){if(this.state===E){this.cmds.splice(this.pos+1);this.controller.onCmdMgrChanged();}},isUndoRedo:function C(){var c=this.curCmd||{};return(this.state===O&&(c.action===N||c.action===A));},handleError:function K(c){this.reset();throw new Error(c||"Invalid state.");}});mstrmojo.vi.controllers.UICmdMgr.STATES={BUSY:O,IDLE:E};}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}else{if(H===F){break;}}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.dom","mstrmojo.css","mstrmojo.expr");mstrmojo.requiresDescs(1994,5893,7931,15671);var A=mstrmojo.dom,B=mstrmojo.css,D=mstrmojo.expr.ET,E=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /><img class="mstrmojo-lock" src="../images/lock_view.svg"/></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span>"+E+"</div></div>",getPrefixAndOrToolsMarkup:function(){return(E+this._super());},markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},createSetNode:function(){return this.domNode.childNodes[1].lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){B.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noRelation);},onnoCreateSetChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noCreateSet);},onlockedChange:function(){B.toggleClass(this.condNode,["locked"],this.locked);}},mstrmojo.hash.copy(mstrmojo.ConditionNode.prototype.markupMethods)),init:function(I){if(this._super){this._super(I);}var K=this.data&&this.data.et;if(K){this.set("noCreateSet",mstrApp.supportAdvFilter?false:(K===D.MQ||K===D.MC));}var G=this.tree.editor;if(G){var F=G.scriptClass==="mstrmojo.fe.FilterEditor";var H=typeof (G.disableElementsBrowsing)==="function"&&G.disableElementsBrowsing();if(F&&H&&K===D.AE){this.set("locked",true);this.set("editable",false);this.set("useRichTooltip",true);var J=this;this.set("updateTooltipConfig",function(){var L=mstrmojo.dom.position(J.domNode);this.richTooltip={content:mstrmojo.desc(15671,"Edit or remove is only available in workstation"),refNode:J.domNode,enableHover:true,cssClass:"vi-regular vi-tooltip-V V-center",posType:mstrmojo.tooltip.POS_BOTTOMCENTER,left:L.w/2,top:-10};});}}},preclick:function C(F){var I=null,H=A.eventTarget(F.hWin,F.e),G=this._super(F);if(A.contains(this.createSetOptNode,H,true)&&!this.noRelationOperator&&!this.noRelation){I="createSetOpt";}else{if(A.contains(this.createSetNode,H,true)&&!this.noRelation){I="createSet";}else{if(A.contains(this.addConditionNode,H,true)){I="addCondition";}}}F.part=I||F.part;return G;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.dom");var B=mstrmojo.dom;mstrmojo.threshold.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,null,{scriptClass:"mstrmojo.threshold.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),cssClass:"adv-threshold",avatarCssCls:"mstrmojo-thresholdRow",markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass} mstrAttach:mousedown"><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span></div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},preclick:function A(C){var F=null,E=B.eventTarget(C.hWin,C.e),D=this._super(C);if(B.contains(this.addConditionNode,E,true)){F="addCondition";}C.part=F||C.part;return D;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.ImageToggle","mstrmojo._IsInputControl");mstrmojo.ToggleDIC=mstrmojo.declare(mstrmojo.ImageToggle,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.ToggleDIC",init:function(A){this._super(A);this.unset=this.dic.ust;},focus:function(){this.domNode.focus();},onvalueChange:function(){},onblur:function(B){var A=B.e||B,C=this.domNode,D=mstrmojo.boxmodel.offset(C,document.body);if(A.clientX>D.left&&A.clientX<D.left+C.offsetWidth&&A.clientY>D.top&&A.clientY<D.top+C.offsetHeight){this.domNode.focus();}else{this.applyChanges();}},postBuildRendering:function(){if(this._super){this._super();}if(this.showByDefault){var A=this.openerStyle;this.width=A.iw;this.height=A.ih;this.set("imageList",this.dic.vls);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.EnumRWUnitType","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.hash","mstrmojo.Button","mstrmojo.vi.ui.rw._IsOutlineXtab","mstrmojo.css");mstrmojo.requiresDescs(619,1442,15963,16112,16113);var B=mstrmojo.EnumRWUnitType,A=mstrmojo.vi.viz.EnumVizStyles,Q=mstrmojo.hash,C={},N=mstrmojo.array,U=mstrmojo.DynamicClassFactory.newComponent;C[B.HEADER]=C[B.FOOTER]=C[B.PAGEHEADER]=C[B.PAGEFOOTER]=C[B.DETAILS]={n:"Section"};C[B.HTMLCONTAINER]={n:"HTMLContainer"};C[B.SELECTOR]={n:"Selector"};C[B.GRID]={n:"Xtab"};C[B.MOJOVISUALIZATION]={n:"MojoVisualization"};function D(Z){return(Z&&Z.t)||mstrmojo.EnumRWUnitType.LAYOUT;}mstrmojo.DocBuilder=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.DocBuilder",visList:null,selectorFactory:null,classMap:null,init:function T(Z){this._super(Z);var a=this.selectorFactory=this.createSelectorFactory();this.addDisposable(a);this.classMap=this.createClassMap();},createSelectorFactory:function Y(){this.throwAbstractMethodError("getSelectorFactory");},createClassMap:function F(){return Q.copy(C);},getMojoVisName:function V(c){var b=c.data,d=b&&b.visName||"",Z=D(c.defn),a=b&&b.vis;if(!d){if(a&&(Z===B.GRID||Z===B.GRAPH||Z===B.GRIDGRAPH)){if(a.vn&&a.ve&&a.vm===51){d=Q.walk("dz.visProp.fmt.visStyle",b)||a.vn;}else{if(a.we&&a.wcn){d=this.visList.findVisName(a.wcn);}}}}if(d===A.NEW_GRAPH_MATRIX){if(mstrApp.supportFeature&&mstrApp.supportFeature("ngm")){if(mstrApp.supportFeature("ngmPartial")){if(N.indexOf([76,79,80,81,82],Q.walk("data.dz.visProp.fmt.visType",c))<0){d=A.GRAPH_MATRIX;}}}else{d=A.GRAPH_MATRIX;}}return d;},build:function P(Z,g,p){var n=this.classMap,h=[],k=((Z&&Z.length)||0),f,c,d,a,e,b,m,l,o;for(f=0;f<k;f++){c=Z[f];d=c&&c.defn;a=c&&c.data;e=D(d);b=n[e];if(g.isMapLayerNode(c.k)){continue;}if(e===B.TEXTFIELD&&((d&&d.dpst))){b=n[e+"B"];}m=this.getMojoVisName(c);if(m){a.visName=m;b=C[B.MOJOVISUALIZATION];}if((m||e===B.GRID)&&d.iifp){b=C[B.SELECTOR];d.style=mstrmojo.DocSelector.STYLES.VISUALIZATION;}l=(b&&b.n)?"new"+b.n:"";o=undefined;if(this[l]){o=this[l](g,c,b,p);}else{if(b&&b.scriptClass){var j=b.cls;if(!j){j=Q.walk(b.scriptClass,window);}if(j){o=this.newRWUnitInstance(g,c,j);}}}if(o){o.k=c.k;o.builder=this;o.tooltip=a.tooltip||d.tooltip||"";if(d.iifp){o.style=mstrmojo.DocSelector.STYLES.VISUALIZATION;}if(!o.defn){o.defn=d;delete o.defn.destroyed;o.disposables.push(o.defn);}if(o.update){o.update(c);}if(this.isPortlet(d)){o=this.createPortlet(e,c,o,p);}if(!this.extractWidget(o,c)){h.push(o);}}}return h;},createPortlet:function H(a,b,Z,c){return Z;},newRWUnitInstance:function S(Z,b,c,a){return new c(Q.copy(a||{},{id:b.id,node:b,controller:this.parent.controller,model:Z}));},newSection:function W(Z,a){this.throwAbstractMethodError("newSection");},newSelector:function M(b,c,a,d){var Z=this.selectorFactory.newDocSelector(b,c,a,d);Z.controller=this.parent.controller;return Z;},isPortlet:function R(Z){return !!((Z.t!==B.PANEL&&Z.ttl!==undefined)||Z.qsm);},extractWidget:function O(a,Z){return !a;},getDefaultMojoVisModel:function J(){this.throwAbstractMethodError("getDefaultMojoVisModel");},newMojoVisualization:function(e,n){var p=this.visList,a=n.data,w=a.visName===A.ESRI_MAP?A.GOOGLE_MAP:a.visName,o=p.getVis(w),t=o&&((o.dc!==undefined)?o.dc:o.c),x=this;if(!o){var c=a.className,z=false;if(!c){if(!this._widgetNotFound){this._widgetNotFound=[];}N.forEach(this._widgetNotFound,function(AB){if(AB.name===w){z=true;}});if(!z){this._widgetNotFound.push({key:a.k,name:w});}var g=mstrApp.isWorkstation,u=g&&FormWrapper.isDesktop(),j=g&&!(parseInt(FormWrapper.isWSLiveMode(),10)===1),d=j?16113:16112,q=j?'The following custom visualization(s) plug-in(s) used in this dossier are not deployed in $$$$, so the data will be displayed in tabular form:<br>####<br><br>Click on the "plus" button in the Visualizations Gallery to import custom visualization plug-in(s).':"The following custom visualization(s) plug-in(s) used in this dossier are not deployed in your environment, so the data will be displayed in tabular form:<br>####<br><br>Please contact your administrator to deploy these custom visualization plug-in(s).";if(!this._showWarning){this._showWarning=window.setTimeout(function(){var AB=[];N.forEach(this._widgetNotFound,function(AC){AB.push(AC.name);});mstrmojo.warn(mstrmojo.desc(d,q).replace("$$$$",u?mstrmojo.desc(619,"Desktop"):mstrmojo.desc(15963,"Workstation")).replace("####",AB.join("<br>")),{},{buttons:[{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(1442,"OK"),onclick:function(){delete x._widgetNotFound;delete x._showWarning;}}],allowHTML:true});}.bind(this),0);}var AA=this.newXtab(e,n);AA.cssDefault=!!AA.cssDefault?AA.cssDefault+" noVis":"noVis";return AA;}o={dc:c};}var b="mstrmojo."+t,l=o.b;if(mstrApp.isVI&&o.vib){l=o.vib;}else{if(mstrApp.isExpress&&o.oivmb){l=o.oivmb;}}if(l&&!mstrmojo.loader.isLoaded(b)){mstrmojo.requiresBundle(l);}mstrmojo.requiresCls(b);if(o.lib){var v=mstrmojo.getJsRoot();var h=JSON.parse(o.lib);N.forEach(h,function(AB){mstrmojo.requiresDepLib(v+AB[0],AB[1]);});}var Z=this.visList.getVis(w).m,m=Q.walk(t,mstrmojo),r=Z?Q.walk(Z,mstrmojo):this.getDefaultMojoVisModel();if(!m||!r){throw new Error("Missing visualization class.");}m=p.getVisClass(m,n.defn);var k=new m(Q.copy(a.extProps,{id:n.id,node:n,n:n.defn.title,controller:this.parent.controller,gb:a.gbys}));var f=new r({xtab:k,controller:this.parent.controller,docModel:e});k.setModel(f);f.set("data",a);return k;},getModelClassByVisName:function L(b){var Z,c,a=this.visList.getVis(b);if(!a){return null;}Z=a.m;c=Z?Q.walk(Z,mstrmojo):this.getDefaultMojoVisModel();return c;},getEditableXtab:function G(Z){this.throwAbstractMethodError("getEditableXtab");},getDefaultXtab:function E(Z){this.throwAbstractMethodError("getDefaultXtab");},getCustomSortXtab:function I(){this.throwAbstractMethodError("getCustomSortXtab");},newXtab:function K(b,c,a,e){var d=mstrmojo.all[c.id];if(!d){var Z=c.defn.iics?this.getCustomSortXtab():(c.defn.txi?this.getEditableXtab(c):this.getDefaultXtab(e));if(c.data&&c.data.olm&&!(c.data.rw&&c.data.rw.row.bc>0)&&!c.defn.txi){Z=U(Z,[mstrmojo.vi.ui.rw._IsOutlineXtab]);}d=this.newRWUnitInstance(b,c,Z);d.model=this.newXtabModel({xtab:d,docModel:b});}else{d.set("node",c);d.model.set("docModel",b);}return d;},newXtabModel:function X(Z){this.throwAbstractMethodError("newXtabModel");}});mstrmojo.DocBuilder.ClassMapItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton mstrButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton mstrButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.MenuItem=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.MenuItem",markupString:'<div id="{@id}" class="mstrmojo-MenuItem {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-MenuItem-text"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.Checkbox");var A={ROUND:"round",RECT:""};mstrmojo.ui.ToggleButton=mstrmojo.declare(mstrmojo.ui.Checkbox,null,{scriptClass:"mstrmojo.ui.ToggleButton",markupString:'<div id="{@id}" class="mstrmojo-ui-ToggleButton {@cssClass}" mstrAttach:click><div class="container"><div class="slider {@sliderStyle}"></div></div></div>',sliderStyle:A.ROUND});mstrmojo.ui.ToggleButton.EnumStyle=A;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.DropDownList");function D(){var E=new mstrmojo.WaitIcon(),H=function(K){this.controller.onGroupBy(this,{groupbyKey:K.src.k,elementId:K.value},function(L){E.set("visible",L);});};for(var G=0,F=this.data.length;G<F;G++){var I=this.data[G];var J=this.addChildren(new mstrmojo.DropDownList({k:I.k,title:I.unit.target.n+":",idx:I.unit.idx,cssClass:"mstrmojo-DocGroupBy-unit",selectCssClass:"mstrmojo-DocGroupBy-unit-select"}));J.options=I.unit.elms;J.attachEventListener("selectedChange",this.id,H);}this.addChildren(E);}function B(){var H=this.data,G=this.children;if(H.length===G.length-1){for(var F=0,E=H.length;F<E;F++){var I=H[F].unit,J=G[F];J.idx=I.idx;J.options=I.elms;J.refresh();}}}mstrmojo.DocGroupBy=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DocGroupBy",markupString:'<div id="{@id}" class="mstrmojo-DocGroupBy {@cssClass}"><div style="padding-top: 5px;"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},init:function C(E){this._super(E);this.ondataChange();},ondataChange:function A(){if(!this.data||!this.data.length){return ;}if(!this.hasRendered){D.apply(this);}else{B.apply(this);}},areUnitsSetToAll:function(){var E=true;mstrmojo.array.forEach(this.data,function(F){if(F.unit.elms[F.unit.idx].v!=="u;"){E=false;return false;}});return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasMarkup","mstrmojo.Image");mstrmojo.threshold.ImageBand=mstrmojo.declare(mstrmojo.Image,null,{scriptClass:"mstrmojo.threshold.ImageBand",cssClass:"mstrmojo-Image color-band"});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.threshold.ImageBand,{onwidthChange:mstrmojo.Widget.widthMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var A;mstrmojo.ui.editors.controls.ColorList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.editors.controls.ColorList",init:function D(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ColorList");},getItemMarkup:function C(F,E){if(!A){A=this._super(F,E).replace(">{@en@n}<",">{@en@msg}<");}return A;},getItemProps:function B(G,E){var F=this._super(G,E);if(G.id==="transparent"){F.msg=mstrmojo.desc(5774,"No Fill");F.addCls("noFill");}else{F.msg="";G.title=G.n;F.addStyle("background-color:"+G.id);}return F;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.css");var B=mstrmojo.css;var A;var D;mstrmojo.ui.ButtonBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.ButtonBar",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenabledChange:function G(){B.toggleClass(this.domNode,"disabled",!this.enabled);}},cssDisplay:"table",icnCssText:"display:table-row;",items:null,showIcon:true,hasSpacing:false,init:function F(I){this._super(I);var H=["mstrmojo-ui-ButtonBar"];if(this.hasSpacing){H.push("spacing");}if(!this.showIcon){H.push("btn-text");}B.addWidgetCssClass(this,H);},getItemMarkup:function E(H){if(!D){D=this._super(H);}if(!A){A=D.replace(">{@en@n}<",'title="{@en@n}"><div>&nbsp;</div><');}return this.showIcon&&!H.tx?A:D;},getItemProps:function C(J,H){var I=this._super(J,H);var K=J.css;if(K){I.addCls(K);}I.n=J.n||"";return I;}});mstrmojo.ui.ButtonBar.ItemType=null;}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(G,F){if(!A){var H=this.itemField;A=this._super(G).replace('@title}">{@en@n}<',"@en@"+H+'}">{@en@'+H+"}<");}return A;},getItemProps:function C(H,F){var G=this._super(H,F),I=this.itemField;if(!mstrmojo.string.isEmpty(H[I])){G[I]=H[I];}return G;},onclick:function B(F){if(this.disableClick){return false;}var K=this,H=this.parent,J=H.opener,G=D.isMetaKey(F.hWin,F.e);if(G&&!this.multiSelect){this.multiSelect=J.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var M=K.selectedIndices;if(J){J.suggestionShown=false;if(M&&!E.isEmpty(M)){var L=[];E.forEach(K.selectedIndices,function(O,N){L.push(K.items[N]);});J.handleSuggestionItemSelect(L);}H.close();}K.multiSelect=false;});}}this._super(F);if(!this.multiSelect){J.suggestionShown=false;var I=this.selectedItem;if(I){J.handleSuggestionItemSelect(I);}H.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.CheckBox","mstrmojo.array");var E=mstrmojo.hash,A=mstrmojo._FormatDefinition,F=mstrmojo.array;var D=function(G){return mstrmojo.hash.copy(G,{scriptClass:"mstrmojo.TextBox",alias:"decimalPlaces",bindings:{m:G.modelBinding,value:function(){return this.m.DecimalPlaces||"2";},category:function(){var H=this.m.Category;this.onkeyup();}},onkeyup:function(H){if(/^\d{1,2}$/.test(this.value)){var O=this.m.DecimalPlaces,J=this.value;this.m.DecimalPlaces=J;if(O!=J&&this.negative){var K=this.parent[this.negative],M;if(K&&K.refreshFormatList){K.refreshFormatList();}else{M=mstrmojo.hash.clone(A[this.negative]);if(M){var N=J>0?".":"",I=N,L;for(L=0;L<Math.min(J,A.MaxNegativeDidigts);L++){N+=L%9;I+="0";}for(L=0;L<M.length;L++){M[L].n=M[L].n.replace(/\.\d{2}/g,N);M[L].f=M[L].f.replace(/\.\d{2}/g,I);}K.set("items",M);}}}}}});},B=function(G){return mstrmojo.hash.copy(G,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList",itemMarkupFunction:function(J,H,K){var I=J.r?"color: red":"";return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text" style="'+I+'">'+J.n+"</div></div>";},selectionPolicy:"reselect",bindings:{m:G.modelBinding,selectedIndex:function(){var H=F.find(this.items,"v",this.m.NegativeNumbers);if(H===-1){H=F.find(this.items,"f",this.m.Format);}this.singleSelect(H);return H==-1?3:H;},category:function(){var H=this.m.Category;this.onchange();}},onchange:function(H){if(this.parent.idx===F.find(A.Category,"v",this.m.Category)&&this.selectedItem){this.m.NegativeNumbers=this.selectedItem.v;this.m.set("Format",this.selectedItem.f||this.selectedItem.v);}},onmChange:function(H){if(this.m){var M=this.m.DecimalPlaces;if(M!=2){var K=mstrmojo.hash.clone(A[this.alias]);if(K){var L=M>0?".":"",I=L,J;for(J=0;J<Math.min(M,A.MaxNegativeDidigts);J++){L+=J%9;I+="0";}for(J=0;J<K.length;J++){K[J].n=K[J].n.replace(/\.\d{2}/g,L);K[J].f=K[J].f.replace(/\.\d{2}/g,I);}this.set("items",K);}}}},postCreate:function(){this.onmChange();}});},C=function(G){return mstrmojo.hash.copy(G,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList "+G.alias,itemMarkupFunction:function(I,H,J){return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">'+I.n+"</div></div>";},selectedIndex:0,bindings:{m:G.modelBinding,selectedIndex:function(I){var H=F.find(this.items,"v",this.m.Format);return H===-1?0:H;},category:function(){var H=this.m.Category;this.onchange();}},onchange:function(H){if(this.parent.idx===F.find(A.Category,"v",this.m.Category)){this.m.set("Format",this.selectedItem.f||this.selectedItem.v);}}});};mstrmojo.NumberFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.NumberFormatter",cssClass:"mstrmojo-NumberFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){E.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.Table",layout:[{cells:[{colSpan:2}]},{cells:[{},{}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7940),cssClass:"category",cssText:"font-weight: bold"},{slot:"1,0",scriptClass:"mstrmojo.List",alias:"numberCategory",cssClass:"mstrmojo-FormatEditor-numberCategory",items:A.Category,selectionPolicy:"reselect",bindings:{m:"this.parent.parent.model",selectedIndex:function(){var H=this.m.Category,G=F.find(this.items,"v",(H==="pru"?-2:H));return(G===-1)?0:G;}},onchange:function(G){if(this.m){this.m.set("Category",this.selectedIndex===0?"pru":this.selectedItem.v);}}},{slot:"1,1",scriptClass:"mstrmojo.Container",alias:"numberSubpanelContainer",width:"300px",markupString:'<div id={@id} class="mstrmojo-FormatEditor-numberPanel-subpanel {@cssClass}"><div class="mstrmojo-FormatEditor-numberPanel-subpanel-container"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},postBuildRendering:function(){var G=mstrmojo.Container.prototype.postBuildRendering.apply(this);this.parent.numberCategory.singleSelect(this.parent.numberCategory.selectedIndex);return G;},children:[{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item",idx:0,rows:1,cols:1,children:[{scriptClass:"mstrmojo.Label",text:" ",slot:"0,0"}],bindings:{visible:'this.parent.parent.parent.model.Category=="pru"',category:function(){var H=this.parent.parent.parent.model,G=this.parent.parent.parent.model.Category;if(H&&this.idx===F.find(A.Category,"v",G)){H.set("Format","");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item",idx:1,rows:1,cols:1,children:[{scriptClass:"mstrmojo.Label",text:" ",slot:"0,0"}],bindings:{visible:"this.parent.parent.parent.model.Category==9",category:function(){var H=this.parent.parent.parent.model,G=this.parent.parent.parent.model.Category;if(H&&this.idx===F.find(A.Category,"v",G)){H.set("Format","");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item fixed",idx:2,rows:3,cols:2,layout:[{cells:[{},{}]},{cells:[{},{}]},{cells:[{colSpan:2}]}],bindings:{visible:"this.parent.parent.parent.model.Category==0"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},D({modelBinding:"this.parent.parent.parent.parent.model",negative:"FixedNegative",alias:"FixedDecimalPlaces",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044),slot:"1,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:A.FixedNegative,refreshFormatList:function(){var H=this.parent,K=H&&H.FixedDecimalPlaces,N=H&&H.ThousandSeparator;if(!K||!N){return ;}var I=K.value||0,R=mstrmojo.hash.clone(A.FixedNegative),G=N.checked,Q=I>0?".":"",P=Q,O,M,L;for(M=0,L=Math.min(I,A.MaxNegativeDidigts);M<L;M++){Q+=M%9;P+="0";}var J;for(J=0;J<R.length;J++){O=R[J].n.replace(/\.\d{2}/g,Q);if(!G){O=O.replace("1,234","1234");}R[J].n=O;O=R[J].f.replace(/\.\d{2}/g,P);if(!G){O=O.replace(/#,##/g,"###");}R[J].f=O;}this.set("items",R);},alias:"FixedNegative",slot:"1,1"}),{scriptClass:"mstrmojo.ImageCheckBox",alias:"ThousandSeparator",label:mstrmojo.desc(2049),cssText:"width:auto;",bindings:{m:"this.parent.parent.parent.parent.model",checked:function(){var G=this.m.ThousandSeparator;if(G==null){G=-1;}return parseInt(G,10)!==0;}},oncheckedChange:function(){if(this.m&&this.parent.idx===F.find(A.Category,"v",this.m.Category)){this.m.ThousandSeparator=this.checked?-1:0;this.parent.FixedNegative.refreshFormatList();}},slot:"2,0"}]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item currency",idx:3,rows:4,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==1"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},D({modelBinding:"this.parent.parent.parent.parent.model",negative:"CurrencyNegative",alias:"currencyDecimal",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2047),slot:"1,0"},{scriptClass:"mstrmojo.TextBox",alias:"currencySymbol",maxLength:5,bindings:{m:"this.parent.parent.parent.parent.model",value:function(){return this.m.CurrencySymbol||mstrmojo.desc("2369");},category:function(){var G=this.m.Category;this.onkeyup();}},onkeyup:function(G){this._update();},onvalueChange:function(){this._update();},_update:function(){if(this.m){var H=this.m.CurrencySymbol;this.m.CurrencySymbol=this.value;var G=this.parent.CurrencyNegative;if(G&&(H!=this.value)){G.refreshFormatList();}}},slot:"1,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2048),slot:"2,0"},{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList",alias:"CurrencyPosition",items:A.CurrencyPosition,itemMarkupFunction:function(H,G,I){return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">'+H.n+"</div></div>";},bindings:{m:"this.parent.parent.parent.parent.model",selectedIndex:function(){var G=F.find(A.CurrencyPosition,"v",this.m.CurrencyPosition);return(G===-1?0:G);},category:function(){var G=this.m.Category;this.onchange();}},onchange:function(G){if(this.m){this.m.CurrencyPosition=this.selectedItem.v;var H=this.parent.CurrencyNegative;if(H){H.refreshFormatList();}}},slot:"2,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044),slot:"3,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:A.CurrencyNegative,refreshFormatList:function(){var O=this.parent,J=O&&O.currencyDecimal,N=O&&O.CurrencyPosition,K=O&&O.currencySymbol;if(!J||!N||!K){return ;}var M=J.value||0,I=parseInt(N.selectedIndex,10)||0,H=K.value||"",L=mstrmojo.hash.clone(A.CurrencyNegative),Y=M>0?".":"",W=Y,Q,X,U;H=(I===2?H+" ":(I===3?" "+H:H));for(X=0,U=Math.min(M,A.MaxNegativeDidigts);X<U;X++){Y+=X%9;W+="0";}var P=mstrConfig.decimalSep,G=mstrConfig.thousandsSep,T;for(T=0;T<L.length;T++){var R=L[T].n,V=L[T].f,S;if(I===1||I===3){Q=V.split(";");for(S=0,U=Q.length;S<U;S++){Q[S]=Q[S].replace(/(\"\$\")(.*)/g,"$2$1");}R=R.replace(/(\$)(.*)/g,"$2$1");V=Q.join(";");}R=R.replace(/\$/g,H).replace(/\.\d{2}/g,Y);V=V.replace(/\$/g,H).replace(/\.\d{2}/g,W);L[T].n=R.replace(/,/,G).replace(/(\d{2,3})\./,"$1"+P);L[T].f=V.replace(/,/,G).replace(/(\d{2,3})\./,"$1"+P);}this.set("items",L);},alias:"CurrencyNegative",slot:"3,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Date",idx:4,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==2"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",items:A.Date,alias:"Date",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Time",idx:5,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==3"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",items:A.Time,alias:"Time",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item percentage",idx:6,rows:2,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==4"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},D({modelBinding:"this.parent.parent.parent.parent.model",negative:"PercentNegative",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044,"Negative numbers"),slot:"1,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:A.PercentNegative,alias:"PercentNegative",slot:"1,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Fraction",idx:7,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==5"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",items:A.Fraction,alias:"Fraction",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item scientific",idx:8,rows:1,cols:2,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},D({slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"})],bindings:{m:"this.parent.parent.parent.model",visible:"this.m.Category==6",category:function(){if(this.m&&this.idx===F.find(A.Category,"v",this.m.Category)){this.m.set("Format","0.00E+00");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item custom",idx:9,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==7"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2133),slot:"0,0"},{scriptClass:"mstrmojo.TextBox",alias:"custom",value:"",bindings:{m:"this.parent.parent.parent.parent.model",value:function(){return this.m.Format;}},onvalueChange:function(){if(this.m&&this.parent.idx===F.find(A.Category,"v",this.m.Category)){this.m.Format=this.value;}},slot:"0,1"}]}]}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.css","mstrmojo.dom","mstrmojo.GridBase","mstrmojo.array");var X=mstrmojo.css,O=mstrmojo.color,c=mstrmojo.css,E=mstrmojo.dom,I=E.isEdge;function C(e,f){var g=e&&e.parent;while(g&&g.scriptClass.indexOf("DocPanelStack")===-1){if(f in g){return g;}g=g.parent;}return null;}function B(f){var e=document.createElement("img");f.appendChild(e);f.removeChild(e);}function F(e,f){var h=Math.floor(e/f.rowsPerPage),k=e%f.rowsPerPage,j=f.tableNode.tBodies[h],g=j.rows[k].cells;return g;}function J(){var e=this._renderTimer;if(e){self.clearInterval(e);delete this._renderTimer;this.renderingRows=false;}}mstrmojo.Grid=mstrmojo.declare(mstrmojo.GridBase,null,{scriptClass:"mstrmojo.Grid",rowsPerPage:0,effectiveRh:0,numPagesRendered:0,totalPages:0,pageStatus:null,_defaultPageHeight:0,renderPause:10,rhMin:14,defaultRowsPerPage:100,minRowsPerPage:50,init:function H(e){this._super(e);this.forceFixedSizes=true;},initPageSettings:function P(){var h=this.parent,f=h.gridData,g=this.defaultRowsPerPage,e=this.cp.getAvailableRowsCount();this.effectiveRh=this.rh||this.rhMin||1;this.effectiveRh=this.effectiveRh*h.model.docModel.getZoomFactor();if(h&&h.numRowFixed){g=e;}else{if(h&&h.scrollboxHeightFixed){g=Math.ceil(h.scrollboxHeight/this.effectiveRh);g=Math.max(g,this.minRowsPerPage);if(e<g){g=this.minRowsPerPage;this._shouldRenderNextPage=true;}}}if(h.isOutlineMode){g=Math.min(200,e);}this.pageStatus=[];this.rowsPerPage=g;this.initPageStatus(this.pageStatus);this._defaultPageHeight=this.rowsPerPage*this.effectiveRh;},initPageStatus:function a(h){var g=this.rowsPerPage,e,k,f,j=function(n,o,l){var m=this;return function(){if(m._onDemand===undefined){m._onDemand=!n.isDataAvailable(o,l);}return m._onDemand;};};this.totalPages=(g&&Math.ceil(this.cp.rc/g))||0;h=h||this.pageStatus;for(e=0;e<this.totalPages;++e){k=e*g;f=k+g-1;if(!h[e]){h[e]={};}delete h[e]._onDemand;h[e].isOnDemand=j.call(h[e],this.cp,k,f);}},buildRendering:function G(){var e=false;if(this.renderMode==="vscroll"){this.initPageSettings();var h=this.pageStatus[0];e=h&&h.isOnDemand();this.start=0;this.end=-1;if(!e){this.end=Math.min(this.cp.rc,this.rowsPerPage)-1;}this.preRenderPages();this.preRenderPage(0,!e);}this._super();if(this.renderMode==="vscroll"){var g=this.parent;this.gridContainerNode.style[c.MINHEIGHT]=(this.cp.rc*this.effectiveRh)+"px";if(!this.connectedScrollbox){if(g&&g.connectScrollbox){g.connectScrollbox(this);this.connectedScrollbox=true;}}this.postRenderPage(0,!e);this.postRenderPages();var f=g&&!g.scrollboxHeightFixed&&!g.numRowFixed;if(f&&this.numPagesRendered>=this.totalPages&&!e){this.postRenderingCleanup();}else{if(e||f||this._shouldRenderNextPage||(g.isOutlineMode&&this.getPageHeight(this.pageNum)<this._defaultPageHeight)){this.onscroll();delete this._shouldRenderNextPage;}}}},preRenderPages:function S(){},postRenderPages:function b(){if(mstrApp&&mstrApp.isExpress){var f=this.parent.scrollboxNode,g=f.scrollTop,h=f.scrollLeft,e=(g>5)?g-5:0;this.parent.scrollTo({x:h,y:e});this.parent.scrollTo({x:h,y:g});}},configureActions:function N(){var e=this.parent;if(e&&e.configureActions){e.configureActions();}},preRenderPage:function Q(e,f){this.pageNum=e;},postRenderPage:function L(f,h,j){if(f+1>this.numPagesRendered){this.numPagesRendered=f+1;}var e=this.pageStatus,g=e[f];if(!g){g=e[f]={};}if(h){g.filled=true;g.dirty=false;}var k=this.gridContainerNode.style;if(f===this.totalPages-1&&k){k[c.MINHEIGHT]="";}},invalidAllPages:function(){for(var e=0;e<this.totalPages;++e){var f=this.pageStatus[e];if(f.filled){f.dirty=true;}delete f._onDemand;f.filled=false;f.isDownloading=false;}this.thPosMap=[];this.posMap=[];},_startPageRenderThread:function d(e){var f=this.id;this.renderingRows=true;this._renderTimer=self.setInterval(function(){try{var j=mstrmojo.all[f];if(!j){return ;}var g=j.getPagesToRender(e);if(g.length>0){j.preRenderPages();j.renderPages(g);j.postRenderPages();j._postPagesClearup=true;}else{if(j._postPagesClearup){j.postRenderPagesCleanup();j.configureActions();j._postPagesClearup=false;}J.call(j);if(j.isRenderingComplete()){j.postRenderingCleanup();}}}catch(h){J.call(mstrmojo.all[f]);throw h;}},this.renderPause);},onscroll:function Z(f,e){if(!this.renderingRows){if(f===true){var g=this.parent;if(g&&g.maskNode){X.addClass(g.maskNode,"wait");}}window.clearTimeout(this.scrollingTimeOut);this.scrollingTimeOut=window.setTimeout(function(){this._startPageRenderThread(e);}.bind(this),150);}},isRenderingComplete:function R(){if(this.end>=this.cp.rc-1){for(var e=this.pageStatus,f=this.totalPages-1;f>-1;f--){if(!e[f]||!e[f].filled){return false;}}return true;}return false;},renderPages:function D(f){for(var g=0,e=f.length;g<e;++g){this.renderPage(f[g].idx,f[g].fill,g!==e-1);}},renderPage:function Y(o,g,t){var v=this.pageStatus,k=(this.numPagesRendered>=o+1);if(k){if(!g||(v[o]&&v[o].filled)){return ;}}var u=this.rowsPerPage,l=this.domNode,n=this.parent;this.start=o*u;this.end=Math.min(this.start+u,this.cp.rc)-1;this.preRenderPage(o,g);if(g&&n.isOutlineMode){n.hasEmptyTBody=true;}var f=this.tempTable;if(!f){f=this.tempTable=l.ownerDocument.createElement("div");}var r=this.tableNode,q=this.start,h=this.end,m=g?this.buildTableRowsMarkup(q,h,'<table><tbody n="'+this.pageNum+'">',"</tbody></table>",r.style.tableLayout).join(""):'<table><tbody n="'+this.pageNum+'"><tr><td style="height:'+(n.isOutlineMode?this._defaultPageHeight:(this.effectiveRh*(this.end-this.start+1)))+'px">&nbsp;</td></tr></tbody></table>';if(g&&n.hasEmptyTBody){if(!n.outlineState.hasTBodyElementsToExpand){m='<table><tbody n="'+this.pageNum+'"><tr style="height:'+0+'px"></tr></tbody></table>';}else{n.outlineState.hasTBodyElementsToExpand=false;}}f.innerHTML=m;var j=f.firstChild.tBodies[0];if(!k){r.appendChild(j);if(n.isOutlineMode&&n.isAutoTableLayout()){if(n.clonedColHeader){n.clonedColHeader.getTableNode().appendChild(j.cloneNode(true));}if(n.clonedTitle&&n.clonedTitle.getTableNode()){n.clonedTitle.getTableNode().appendChild(j.cloneNode(true));}}}else{r.replaceChild(j,r.tBodies[o]);}if(j&&mstrApp&&mstrApp.isSingleTier){E.redirectUrlToFormWrapper(j);}if(g){this.markPages(q,h);}this.postRenderPage(o,g,j);var e=this.parent;if(e.onPageRendered){e.onPageRendered(j,o,k,g,t);}},getPagesToRender:function U(w){var u=[],z=this.parent,AJ=this._defaultPageHeight,l=null,AK=this.pageStatus,AL=this;function r(j){var m=AK[j];if(m&&(m.filled||m.dirty)){if(!l){l=AL.tableNode.tBodies;}m.height=l[j].getBoundingClientRect().height;if(I){m.height-=11;}return m.height;}else{return AJ;}}var q=0,o=null,v=null,g=z.scrollboxTop;for(var AF=0,AG=this.totalPages,e=this.pageStatus;AF<AG;AF++){q+=r(AF);if(q>=g){o=AF>0?AF-1:AF;break;}}if(o===null){o=v=Math.max(AG-1,0);}else{var x=z.scrollboxBottom;if(isNaN(x)&&z.numRowFixed){x=g;}for(var AE=o+1;AE<AG;AE++){if(parseInt(q,10)>x){v=AE;break;}q+=r(AE);}}if(v===null){v=AG-1;}else{if(v<AG-1&&v<=o){v=v+1;}}for(var AA=this.numPagesRendered;AA<o;++AA){u.push({idx:AA,fill:false});}var AD=0,AH=this.rowsPerPage,t=false;for(var AB=o;AB<=v;++AB){var AI=AK[AB];if(!AI||!AI.filled){if(AI&&AI.isOnDemand()){t=true;if(!AI.isDownloading&&!this.isDownloading){AD+=AH;AI.isDownloading=true;this.isDownloading=true;var k=AB*AH,h=k+AH-1;this.cp.download(k,h,w);}u.push({idx:AB,fill:false});}else{u.push({idx:AB,fill:true});}}}if(z.isOutlineMode&&u.length===0){var AC=z.scrollboxNode.getBoundingClientRect().bottom;while(u.length===0&&v<this.totalPages-1){var f=l[v].getBoundingClientRect().bottom;if(f<AC){v++;if(!AK[v].filled){u.push({idx:v,fill:true});}}else{break;}}}if(t){this.parent.showDownloadStatus(AD);}else{if(this.parent.closeDownloadStatus){this.parent.closeDownloadStatus();}}return u;},addHilitePosition:function(f,h,e){var j=this.hiliteCellsMap[f];if(!j){this.hiliteCellsMap[f]={pos:[],nodes:[]};}var g=h-(this.pageNum||0)*this.rowsPerPage;this.hiliteCellsMap[f].pos.push({row:g,cell:e,page:this.pageNum});},setHilites:function(h,j){var k=j.getAttribute("ei"),l=this.eiMap[k],e=this.getNodesByPositions(l);if(!e.length){this._super(h,j);return ;}for(var g=0,f=e.length;g<f;g++){this._super(h,e[g]);}},addExtraInfoMap:function(f,g,e){if(!this.eiMap[f]){this.eiMap[f]=[];}this.eiMap[f].push(this.getPosObj(g,e));},addPositionMap:function(f,g,e){if(!this.posMap[f]){this.posMap[f]=this.getPosObj(g,e);}},addTitleHeaderPositionMap:function(g,e,f){var h=this.getPosObj(g,e);h.obj=f;this.thPosMap.push(h);},getPosObj:function(f,h){var g=this.pageNum||0,e=this.rowsPerPage||0;return{row:f-g*e,cell:h,page:g};},getNodeByPosition:function(e){return this.tableNode.tBodies[e.page].rows[e.row].cells[e.cell];},getRowIdxByCell:function(e){var f=this.posMap[e._ei];return f.page*this.rowsPerPage+f.row;},getNodesByPositions:function(m){var j=[];for(var g in m){var o=m[g],f=(o&&o.page)||0,e=o&&o.row,k=o&&o.cell,h=this.tableNode.tBodies[f],l=h&&h.rows[e],n=l&&l.cells[k];if(n){j.push(n);}}return j;},getPageHeight:function T(e){var f=this.tableNode.tBodies;return(f&&f[e]&&f[e].offsetHeight)||0;},getTargetCell:function(n,m){var k=0,f=0,l;for(l=this.totalPages;f<l;f++){k+=this.getPageHeight(f);if(m<=k){break;}}var g=this.tableNode.tBodies[f];if(g){for(f=0,l=g.rows.length;f<l;f++){var q=g.rows[f];for(var e=0,p=q.cells.length;e<p;e++){var o=q.cells[e];if(o.offsetTop+o.offsetHeight>=m){if(n>=o.offsetLeft&&n<=o.offsetLeft+o.offsetWidth){return o;}}else{break;}}}}},postRenderPagesCleanup:function K(){var g=this.parent;if(g&&g.gridData&&g.gridData.afc){var f=this.tableNode;if(f&&(this.lastWidth!==f.offsetWidth)){if(g.onGridWidthChanged){g.onGridWidthChanged();}mstrmojo.array.forEach(this.pageStatus,function(h){delete h.height;});this.lastWidth=f.offsetWidth;}var e=C(g,"adjustAutoWidth");if(e){e.adjustAutoWidth(g);}}if(g.gridPagesRendered){g.gridPagesRendered();}if(mstrmojo.dom.isIE&&!mstrmojo.dom.isIE8){B(this.domNode);}if(g&&g.maskNode){X.removeClass(g.maskNode,"wait");}this.hightLightChangedCells();},hightLightChangedCells:function M(){var n=this.cp.getUpdatedRows(),j=this,m,e,l,o,g,h,k,f=[];if(n){mstrmojo.hash.forEach(n,function(q,p){k=parseInt(p,10);m=j.cp.getRowCells(k);e=F(k,j);l=e.length;o=m.length-1;if(o>=0){for(g=l-1;g>=0;g--){h=e[g];if(o<0){break;}if(m[g]._d){var t=h.style.backgroundColor,r=h.style.color;f.push({dom:h,bgcolor:t,ftcolor:r});h.style.backgroundColor=O.getHighlightColor(O.rgbStr2rgb(c.getStyleValue(h,"backgroundColor"),true));h.style.color=O.getContrastingColor(O.rgbStr2hex(c.getStyleValue(h,"backgroundColor")),"#ffffff","#000000");delete m[g]._d;}o--;}}});if(f.length>0){window.setTimeout(function(){mstrmojo.array.forEach(f,function(p){p.dom.style.backgroundColor=p.bgcolor;p.dom.style.color=p.ftcolor;});},300);}}},postRenderingCleanup:function A(){var e=this.parent;if(e&&this.connectedScrollbox){e.disconnectScrollbox(this);}this.connectedScrollbox=false;if(e&&!e.scrollboxHeightFixed){var f=C(e,"performCanGrowCanShrink");if(f){f.performCanGrowCanShrink([e],true);}}},getRowInfoByPosition:function(e){return this.cp.getRowCellInfo(e);},unrender:function W(e){J.call(this);if(this.connectedScrollbox){this.parent.disconnectScrollbox(this);this.connectedScrollbox=false;}this.numPagesRendered=0;this.lastWidth=0;this.isDownloading=false;this.unMarkAllPages();this._super(e);},dataDownloaded:function V(){this.isDownloading=false;this.initPageStatus();this.onscroll();}});})();mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.TBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TBox",markupString:'<table id="{@id}" class="mstrmojo-TBox {@cssClass}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}" style="{@cssText}"><tbody><tr><td></td></tr></tbody></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},cellSpacing:0,cellPadding:0});(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasScrollbox","mstrmojo._HasLayout","mstrmojo._ShowsStatus");function E(J){var I=this.domNode,H=parseInt(this[J.toLowerCase()],10);return(isNaN(H))?I["offset"+J]:H;}mstrmojo.DocLayoutViewer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._HasScrollbox,mstrmojo._HasLayout,mstrmojo._ShowsStatus],{scriptClass:"mstrmojo.DocLayoutViewer",markupString:'<div id="{@id}" class="mstrmojo-DocLayoutViewer {@cssClass}" style="{@domNodeCssText}"><div></div><div><div class="mstrmojo-progress" style="display:none"><div class="mstrmojo-progress-barbg"><div class="mstrmojo-progress-bar"></div></div><div class="mstrmojo-progress-text"></div></div><div id="{@id}_fh"></div><div id="{@id}_scrollboxNode" class="mstrmojo-DocLayoutViewer-layout" style="{@_scrollCssText}"></div><div id="{@id}_ff"></div></div><div></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onborderChange:function(){if(this.border){this.domNode.style.border=this.border;}}},markupSlots:{groupBy:function(){return this.domNode.firstChild;},layout:function(){return this.domNode.childNodes[1].childNodes[2];},scrollboxNode:function(){return this.domNode.childNodes[1].childNodes[2];},containerNode:function(){return this.domNode.childNodes[1].childNodes[2];},incFetchNode:function(){return this.domNode.lastChild;},fixedHeaderNode:function(){return this.domNode.childNodes[1].childNodes[1];},fixedFooterNode:function(){return this.domNode.childNodes[1].childNodes[3];},_STATUS:function(){return this.domNode.childNodes[1].firstChild;},_STATUS_TXT:function(){return this.domNode.childNodes[1].firstChild.lastChild;},_STATUS_BAR:function(){return this.domNode.childNodes[1].firstChild.firstChild.firstChild;}},layoutConfig:{h:{groupBy:"auto",fixedHeaderNode:"auto",layout:"100%",fixedFooterNode:"auto",incFetchNode:"auto"},w:{layout:"100%"}},k:null,scrollboxHeightFixed:true,scrollboxWidthFixed:true,getHeight:function G(){return E.call(this,"Height");},getWidth:function B(){return E.call(this,"Width");},afterLayout:function A(){this._super();this.notifyScrollListeners();},preBuildRendering:function D(){if(this.parent){var J=this.parent[this.slot].style,I=this.height,H=this.width;this.height=(I!=="auto")?I:J.height;this.width=(H!=="auto")?H:J.width;}this.bs=this.model.bs;return this._super();},setSlotDimensions:function F(J,I,H){if(J==="layout"){this.scrollboxHeight=parseInt(I,10);this.scrollboxWidth=parseInt(H,10);}this._super(J,I,H);},onaddChild:function C(H){if(!isNaN(H.index)){var I=this.children[H.index];if(I&&I.slot==="groupBy"){this.docGroupBy=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._FillsBrowser","mstrmojo._HasLayout");function A(){var D=this._resizeHandler;if(D){window.clearInterval(D);delete this._resizeHandler;}}mstrmojo.OIVMPage=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser,mstrmojo._HasLayout],{scriptClass:"mstrmojo.OIVMPage",markupString:'<div id="{@id}" class="mstrmojo-OIVMPage {@cssClass} {@themeClassName}" style="{@cssText}"><div class="mstrmojo-OIVMPage-pathbar"></div><div class="mstrmojo-OIVMPage-layout"></div></div>',markupSlots:{pathbarNode:function(){return this.domNode.childNodes[0];},layout:function(){return this.domNode.lastChild;}},layoutConfig:{h:{pathbarNode:"42px",layout:"100%"},w:{pathbarNode:"100%",layout:"100%"}},onError:function(F){var H=F.detail,G=mstrApp,E="#666",I=F.code;if(I){var D=mstrmojo.Button.newInteractiveButton;switch(I){case -2147468986:case -2147467618:F.btns=[D(mstrmojo.desc(3758,"Re-run Document"),function(){mstrmojo.form.send({evt:2048001,src:G.name+"."+G.pageName+".2048001",documentID:H.dssid,currentViewMedia:1});},E),D(mstrmojo.desc(221,"Cancel"),function(){mstrmojo.form.send({evt:3010,src:mstrApp.name});},E)];break;default:F.btns=[D(mstrmojo.desc(212,"Continue"),function(){mstrmojo.form.send({evt:3026,src:G.name+"."+G.pageName+".3026"});},E)];}}},renderPageLoadError:function(){var D=this.error;this.onError(D);if(!D.btns||!D.btns.length){mstrmojo.alert(D.message,null,D.title);}else{mstrmojo.confirm(D.message,null,{buttons:D.btns,title:D.title});}},render:function C(){if(this.error){this.renderPageLoadError();}else{this._super();}},browserResized:function B(D,G){var F=this._super(D),E=this;if(G){A.call(this);this._resizeHandler=window.setInterval(function(){var H=mstrApp.docModel.controller,K=H,J=H.zoom,I=H.view.zoomValue;if(J){A.call(E);J.call(K,I&&I.dssid);}},300);}return F;},destroy:function(D){A.call(this);this._super(D);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var B=mstrmojo.func,D=mstrmojo.dom,C=mstrmojo.ui._HasUITheme.EnumThemeNames,G="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function J(N){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);}this._super(N);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function E(){var N=this.getPopupWidget();if(!N||N._pbCfg){return ;}var O=function O(Q,P){return function(){Q.apply(P,arguments);};};N.onOpen=B.composite([O(this.onPopupWidgetOpened,this),N.onOpen||mstrmojo.emptyFn]);N.onClose=B.composite([O(this.onPopupWidgetClosed,this),N.onClose||mstrmojo.emptyFn]);N._pbCfg=true;},onclick:function L(N){if(this.isClickingAnchorSlot(N)){var O=this.getPopupWidget();if(!O.visible){this.openPopup(O);}else{this.closePopup();}}},isClickingAnchorSlot:function M(N){var O=N.getTarget();return O===this[this.anchorSlot]||O.parentNode===this[this.anchorSlot];},onPopupAutoClosed:function I(O,N){if(D.contains(this[this.anchorSlot],D.eventTarget(N,O),true)){return false;}},getPopupHostNode:function K(){return this.containerNode;},getPopupConfig:function H(){var O=[G],N=this.hostedCSSClass;if(N){O.push(N);}var P=new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:O.join(" ")});return this.disposables?this.addDisposable(P):P;},unrender:function F(N){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(N);},postBuildRendering:function A(){var R=this.getPopupWidget();if(R){var T=this.getPopupConfig();if(!T.isHostedWithin){var P=this.parent||this.opener,O=T.hostProxyCssClass.split(" ");O.push(this.domNode.className);while(P){var S=P.themeClassName;if(S){O.push(S);break;}P=P.parent||P.opener;}if(T.useDarkTheme){O.splice(O.indexOf(C.LIGHT_THEME),1);O.push(C.DARK_THEME);}T.hostProxyCssClass=O.join(" ");}mstrmojo.Obj.free(R.popupConfig);R.popupConfig=R.addDisposable(T);}if(!(this.editableSlot&&D.isMobile)){var N=R.id,Q=this._listenerProc=function(){var U=mstrmojo.all[N];if(U&&U.visible&&U.adjustCornersForPopupOverflow){U.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){D.attachEvent(window,"resize",Q);}}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var D=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.ThreeColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.ThreeColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ThreeColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+D+'></div><div class="divider1"'+D+'></div><div class="vi-col2"'+D+'></div><div class="divider2"'+D+'></div><div class="vi-col3"'+D+"></div></div>",markupSlots:{col1Node:function C(){return this.domNode.firstChild;},divider1Node:function H(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.childNodes[2];},divider2Node:function B(){return this.domNode.childNodes[3];},col3Node:function E(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"30%",divider1Node:"5px",col2Node:"30%",divider2Node:"5px",col3Node:"40%"},xt:true},shouldPropagateEnabled:true,col1Width:"30%",divider1Width:"5px",col2Width:"30%",divider2Width:"5px",col3Width:"40%",init:function G(I){this._super(I);var J=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),K=J.w;K.col1Node=this.col1Width;K.divider1Node=this.divider1Width;K.col2Node=this.col2Width;K.divider2Node=this.divider2Width;K.col3Node=this.col3Width;},getControl:function F(I){return(this.children||[]).filter(function(J){return J.slot==="col"+I+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo._ContainsDocObjects","mstrmojo._HasBuilder","mstrmojo._SupportsEllipsisText","mstrmojo._HasEllipsis","mstrmojo.css","mstrmojo.array");var V=mstrmojo.css,U=mstrmojo.array;var R=2;function D(Z,X,Y){var a=Z.parent.parent;if(a&&a instanceof mstrmojo.DocPanel){a[X+"DirtyKey"](Y);}}function O(Y,X,Z){if(Y===X.k){mstrmojo.array.forEach(X.children,function(a){if(a.setDirtyChildren){a.setDirtyChildren(Z);}});}}function I(X){return X._isFP()&&!X.parent.defn.od;}mstrmojo.DocPanel=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._ContainsDocObjects,mstrmojo._HasBuilder,mstrmojo._SupportsEllipsisText,mstrmojo._HasEllipsis,mstrmojo.vi.ui._IsDropTarget],{scriptClass:"mstrmojo.DocPanel",visible:false,selected:false,k:"",cssDisplay:"block",subPanelCssText:"height:100%;width:100%;position:absolute;",topStart:R,contentWidth:0,markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocPanel {@cssClass}" style="{@cssText}{@domNodeCssText}"><div class="mstrmojo-DocSubPanel-content" style="{@containerNodeCssText}{@subPanelCssText}"></div></div>',markupMethods:{onvisibleChange:function(){var Y=this.domNode.style,X=this.visible;if(I(this)){Y.visibility=(X?"":"hidden");Y.zIndex=(X?10:1);}else{Y.display=(X?this.cssDisplay:"none");}}},markupSlots:{containerNode:function(){return this.domNode.firstChild;}},formatHandlers:{containerNode:["background-color","fx","overflow"]},title:"",init:function Q(X){this._super(X);if(!this.title){this.title=this.node.defn.ttl||"";}if(this._isSearchBoxPanel()){this.isSbp=true;this.set("canApplySbp",false);}},childRenderCheck:function L(X){return(this._super(X)&&(this.selected||I(this)));},postBuildRendering:function T(){if(!this.defn.l&&!this._forceRender){V.addClass(this.domNode,"placeholder");}var Y=this._super();if(this.isSbp){var X=this.addChildren({scriptClass:"mstrmojo.Button",cssClass:"sbp-apply",title:mstrmojo.desc(134,"Apply"),cssText:"top:"+((parseInt(this.parent.fmts.height,10)||0)-28)/2+"px",bindings:{enabled:"this.parent.canApplySbp&&this.parent.parent.applyEnabled"},onclick:function(){this.parent.parent.applyBufferedSlices();}});X.render();}if(this._isFSP()){this.set("shouldEllipsize",true);}if(mstrApp.isOIVM&&mstrApp.isOIVM()&&mstrmojo.dom.isChrome){var a=this.containerNode.style.overflow;this.containerNode.style.overflow="hidden";var Z=this;window.setTimeout(function(){if(Z.containerNode&&Z.containerNode.style&&Z.containerNode.style.overflow){Z.containerNode.style.overflow=a;}},2000);}return Y;},onselectedChange:function M(X){if(X.value){this.renderChildren();}this.model&&this.model.raiseEvent({name:"panelSelected",panelId:this.id,panelVisible:!!X.value});},updateForPU:function S(X){this.node=X;this.update(X);},refreshForPU:function A(){this._isPartial=true;this.refresh();this._isPartial=false;},_isPartial:false,refresh:function E(){if(!this.hasRendered){return ;}this._inRendering=true;var Z=[].concat(this.getPanelChildren()||[]),Y=[].concat(this.getChildren(this._isPartial)),X;U.removeItems(Z,"k",Y);U.removeItems(Y,"k",this.getPanelChildren());if(Z.length!==0){U.forEach(Z,function(a){this.removeChildren(a);a.destroy();},this);}if(Y.length!==0){U.forEach(Y,function(c){var b=c.id&&mstrmojo.all[c.id];var a=b&&b.defn;if(a){a._isDeleted=true;}if(b&&b.destroy){b.destroy();}},this);this.addChildren(this.builder.build(Y,this.model,this.buildConfig));this.builtChildren=true;}if(!this.selected){if(!this.children){this.builtChildren=false;}this._forceRender=true;this._super();delete this._forceRender;}else{Z=[].concat(this.getPanelChildren()||[]);for(X=Z.length-1;X>=0;X--){Z[X].refresh();}}if(this._isFP()&&this.selected){this.refreshFP();}if(this._isFSP()){this.set("richTooltip",{content:this.containerNode.innerHTML,contentNodeCssClass:"sp-tooltip",left:-20,top:20,refNode:this.domNode});this.ellipsizeElements("div",this.containerNode,true);}this._inRendering=false;},setDirty:function N(X){this[(X?"add":"remove")+"DirtyKey"](this.k);},addDirtyKey:function H(X){var Z=this.defn,Y=Z.dirtyKeys||{};Y[X]=true;Z.dirtyKeys=Y;if(X===this.k){mstrmojo.array.forEach(this.children,function(a){if(a.setDirtyChildren){a.setDirtyChildren(true);}});}O(X,this,true);D(this,"add",X);},removeDirtyKey:function K(Y){D(this,"remove",Y);O(Y,this,false);if(Y===this.k){mstrmojo.array.forEach(this.children,function(a){if(a.setDirtyChildren){a.setDirtyChildren(false);}});}var Z=this.defn,X=Z.dirtyKeys;if(!X){return ;}delete X[Y];if(!mstrmojo.hash.isEmpty(X)){return ;}delete Z.dirtyKeys;},getPanelChildren:function G(){return U.filter(this.children||[],function(X){return X.scriptClass!=="mstrmojo.Button";});},preBuildRendering:function(){if(this._isFSP()){this.useRichTooltip=true;}if(this._super){this._super();}},renderChildren:function J(){this._inRendering=true;var d=this.children;if(d&&(this._isFP()||this._isFSP())){U.forEach(d,function(g){g.getFormats();});}if(this.isSbp){V.addClass(this.domNode,"mstrmojo-sbp");}if(this._isFP()&&!mstrApp.isVI){V.addClass(this.parent.domNode,"fpgb");if(d){var e=this.domNode.clientWidth-2*R,b,X;this.topStart=R+1;for(b=0,X=(d&&d.length)||0;b<X;b++){var Z=this.domNode.clientWidth-2*R;this.contentWidth=(Z>0)?Z:0;if(Z!==e){this.topStart=R+1;var a;for(a=0;a<b;a++){var Y=d[a];Y.refresh();if(Y.getContainerHeight){this.topStart+=Y.getContainerHeight()+R+1;}}}var f=d[b];if(this.childRenderCheck(f)){f.render(null);if(f.getContainerHeight){this.topStart+=f.getContainerHeight()+R+1;}}}}}else{this._super();}if(this._isFSP()){this.set("richTooltip",{content:this.containerNode.innerHTML,contentNodeCssClass:"sp-tooltip",left:-20,top:20,refNode:this.domNode});this.ellipsizeElements("div",this.containerNode,true);}this._inRendering=false;},refreshFP:function F(){if(!this.hasRendered){return ;}var a=this.children,X=(a&&a.length)||0,Z;this.topStart=R+1;var Y=this.domNode.clientWidth-2*R;this.contentWidth=(Y>0)?Y:0;for(Z=0;Z<X;Z++){var b=a[Z];if(!b.hasRendered){continue;}if(b.relocate){b.relocate(this.topStart,this.contentWidth);}if(b.updateContentHeight){b.updateContentHeight();}if(b.getContainerHeight){this.topStart+=b.getContainerHeight()+R+1;}}},getChildren:function C(a){var Z=this.model.getChildren(this.node,a);if(this._isFP()||this._isFSP()){var X=(Z&&Z.length)||0,Y;for(Y=0;Y<X;Y++){var b=Z[Y];if(this._isFP()&&!b.defn.iifp){b.defn.iifp=true;}if(this._isFSP()&&!b.defn.iifs){b.defn.iifs=true;}}}Z=U.filter(Z||[],function(c){if(typeof c.defn.ifw==="boolean"){return !c.defn.ifw;}return true;});return Z;},onchildRenderingChange:function B(X){this._super(X);if(this._isFSP()&&!this._inRendering){this.ellipsizeElements("div",this.containerNode,true);}if(this.parent.selectedKey!==this.k&&X.gridInfo&&X.tca===2){this.defn.l=false;}},_isFP:function W(){return !!this.parent.defn.ifp;},_isFSP:function P(){return !!this.parent.defn.ifsp;},_isSearchBoxPanel:function(){return false;},canApplySearchBoxPanel:function(){var Y=this.model.getChildren(this.node,false),X;for(X=0;X<Y.length;X++){var a=Y[X],Z=mstrmojo.all[a.id];if(Z&&Z.canApply&&!Z.canApply()){return false;}}return true;},doEllipsize:function(){if(this.shouldEllipsize){this.ellipsizeElements("div",this.containerNode,true);}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasBuilder","mstrmojo._Formattable","mstrmojo._HasToolbar");var C="\u001E";var G=1;var I=2;var B=1;var J={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,vert:["height","width","top"],horiz:["width","height","left"],updateStyle:function(L){var O=L.defn.qsm;if(!O){return ;}if(L.getFormats().width){return ;}var P=null;if(O==G){P=L.containerNode.firstChild;}else{P=L.containerNode.lastChild;}if(!P){return ;}var M=P.clientHeight+"px";var K=P.clientWidth+"px";var N=L.domNode.style;N.height=M;N.width=K;if(L.parent.updateStyle){L.parent.updateStyle(M,K);}},repositionChildren:function(Q){if(!Q.children){return ;}var P=Q.getFormats(),O=parseInt(P.height,10),T=parseInt(P.width,10);var K=Q.children,N=K[0].getFormats(),V=K[1].getFormats();var L=(Q.defn.gp<this.LEFT),S=L?O:T,R=L?T:O,U=this[(L?"vert":"horiz")];var M=Math.round(S*(Q.defn.ga/100));N[U[0]]=M+"px";N[U[1]]=R+"px";V[U[0]]=(S-M)+"px";V[U[1]]=R+"px";if((Q.defn.gp%2)===0){V[U[2]]=M+"px";}else{N[U[2]]=(S-M)+"px";}this.resizeChildren(K[0],K[1]);},stackChildren:function(K){var N=K.children,O=K.getFormats(),M;var L;for(L=N.length-1;L>=0;L--){M=N[L].getFormats();M.width=O.width;M.height=O.height;}this.resizeChildren(N[0],N[1]);},resizeChildren:function(M,K){M.renderPortalState();var L=K.getFormats();K.resizeForDisplayState(parseInt(L.height,10),parseInt(L.width,10),true);},changeVisibility:function(M,K){var P=M.children,O=M.defn.qsm,L=K&&(!O||M.viewMode===G),N=K&&(!O||M.viewMode===I);if(P&&P.length>0){if(P[0].visible!==L){P[0].set("visible",L);}if(P[1].visible!==N){P[1].set("visible",N);}}M.visible=K;},setViewMode:function H(L){var M=L.children,N=L.visible;if(L.defn.qsm&&M&&M.length>0){var K=L.viewMode;M[0].set("visible",(K==G)&&N);M[1].set("visible",(K==I)&&N);}},clearFormatCache:function D(L){var N=L.children;for(var M=0,K=N&&N.length||0;M<K;M++){N[M].clearCache();}}};mstrmojo.DocGridGraph=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._Formattable,mstrmojo._IsSelectorTarget],{scriptClass:"mstrmojo.DocGridGraph",markupString:'<div id="{@id}" k="{@k}" title="{@tooltip}" class="mstrmojo-DocGridGraph" style="{@domNodeCssText}"><div class="mstrmojo-DocGridGraph-msg"></div><div class="mstrmojo-DocGridGraph-container"></div></div>',markupSlots:{msgNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.lastChild;}},formatHandlers:{domNode:["RW","B","background-color","fx","font"]},viewMode:null,visible:true,resize:function E(){this.clearCache();J.clearFormatCache(this);var M=this.getFormats(),K=parseInt(M.width,10),L=parseInt(M.height,10);if(K>0&&L>0){J.changeVisibility(this,true);if(!this.defn.qsm){J.repositionChildren(this);}else{J.stackChildren(this);}}else{J.changeVisibility(this,false);}},postBuildRendering:function A(){this._super();var M=this.node.data.eg;if(M===undefined){this.msgNode.style.display="none";this.containerNode.style.display="block";}else{this.msgNode.innerHTML=M;this.msgNode.style.display="block";this.containerNode.style.display="none";}var L=this.defn.qsm;if(!this.viewMode&&L){this.viewMode=L;}var K=this.node.defn;K.attachEventListener("qsmChange",this.id,function(N){this.viewMode=N.value;J.setViewMode(this);this.model.getDataService().setGridDisplayMode(this.k,this.viewMode,null,{cpmfig:{silent:true}});J.updateStyle(this);});J.setViewMode(this);J.updateStyle(this);if(!L&&this.defn.ds===B){this.resize();}},getGridWidget:function(){return this.children[0];},getGraphWidget:function(){return this.children[1];},updateGraph:function(L){var K=this.getGraphWidget();if(K){K.update(L);K.refresh();}},quickSwitch:function F(){var K=this.viewMode!=I;this.defn.set("qsm",(K?I:G));return true;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo._ContainsDocObjects","mstrmojo._HasBuilder");mstrmojo.rw.DocSubsection=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._ContainsDocObjects,mstrmojo._HasBuilder],{scriptClass:"mstrmojo.rw.DocSubsection",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSubsection" style="{@domNodeCssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},formatHandlers:{domNode:["D","B","background-color","fx"]},update:function C(E){var D=E.data.tid;if(this.thresholdId||D){delete this.fmts;}this.thresholdId=D;if(this._super){this._super(E);}},postBuildRendering:function B(){return(this.renderMode!=="scroll")?this._super():true;},childRenderOnAddCheck:function A(D){return(this.renderMode!=="scroll")?this._super(D):false;},preserveChildDomOrder:false,performCanGrowCanShrink:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.string","mstrmojo.url");var D=mstrmojo.string,E=function E(G){return G.data.dl||G.defn.dl;};mstrmojo.DocImage=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocImage",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocImage" title="{@tooltip}" style="{@domNodeCssText}"><div style="{@shadowNodeCssText}"><img src="{@en@v}" style="{@imgNodeCssText}" mstrAttach:click></div>{@buttonNodeMarkup}</div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function F(I){var J=this.model.getDataService(),G=I.data.v,H=E(I);if(I.data.v&&!((I.data.ut===4)||I.defn.oid)){G=mstrmojo.url.getFullPath(I.data.v);}this.origV=G;this.v=D.decodeXMLAttribute((J&&J.getImage&&J.getImage(G))||G);this.oid=I.defn.oid;if(H){this.tooltip=H.items[0].n;}if(this.thresholdId||I.data.tid){delete this.fmts;}this.thresholdId=I.data.tid;this.set("visible",!I.data.hidden);if(this._super){this._super(I);}},formatHandlers:{domNode:["left","top","z-index"],shadowNode:["width","height","B","fx"],imgNode:["height","width"]},preBuildRendering:function B(){this._super();if(mstrApp.isMobile&&mstrApp.useBinaryFormat){var G=this.v,I=mstrMobileApp.isOnline(),H=this.model.getDataService();if((!I&&G.indexOf("http")===0)||(I&&G.indexOf("http")!==0)){this.v=(H&&H.getDocImage&&H.getDocImage(this.origV))||G;}}if(this.node.data.ut===4&&this.v.indexOf(mstrConfig.taskURL)===-1){this.v=mstrConfig.taskURL+"?taskId=getRWEmbeddedImage&msgID="+this.model.mid+"&oid="+this.v;}this.updateDimensionsFromFormats();},updateDimensionsFromFormats:function C(){if(!mstrmojo.dom.isIE7){var G=this.getFormats(),J=(G.fx&&G.fx.ds)||0,H=mstrmojo._Formattable.getBorderWidths(this),I=1;if((mstrmojo.dom.isIE||mstrmojo.dom.isIEW3C)&&this.model.getZoomFactor){I=this.model.getZoomFactor()>1?this.model.getZoomFactor():1;H.w=Math.ceil(H.w*I);H.h=Math.ceil(H.h*I);}this.domNodeCssText+="width:"+((parseInt(G.width,10)||0)+J+H.w)+"px; height: "+((parseInt(G.height,10)||0)+J+H.h)+"px;";}},getAnchor:function A(){return this.imgNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasBuilder","mstrmojo._CanMeasureChildren","mstrmojo._CanRenderDocOnScroll","mstrmojo._FillsBrowser");function A(){var E=this.domNode,D=this.containerNode,F=D.style,J=D.clientWidth||parseInt(F.width,10),I=E.clientWidth||parseInt(E.style.width,10),G=E.parentNode,M=D.clientHeight||parseInt(F.height,10),H=G.clientHeight||parseInt(G.style.height,10);if(J<I){F.left=(I-J)/2+"px";}if(M<H){F.top=(H-M)/2+"px";}var K=this.model.zt,L=K===1||K===2;if(!L||this.model.zoomFactorUpdating===false){F.visibility="visible";}}mstrmojo.rw.DocLayout=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren,mstrmojo._CanRenderDocOnScroll,mstrmojo._FillsBrowser],{scriptClass:"mstrmojo.rw.DocLayout",markupString:'<div id="{@id}"><div class="mstrmojo-DocLayout {@cssClass}" style="{@domNodeCssText}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},popupNode:function(){return this.domNode.firstChild;}},alias:"docLayout",getHeight:mstrmojo.emptyFn,getWidth:mstrmojo.emptyFn,resizeOrReposition:mstrmojo.emptyFn,preserveChildDomOrder:false,buildRendering:function(){this._super();var D=this.model.zt;if(mstrApp.features["is-document-center-align"]||D===1||D===2){this.containerNode.style.visibility="hidden";}},postBuildRendering:function C(){var F=this._super(),G=this,E=this.model.zt,D=E===1||E===2;if(mstrApp.features["is-document-center-align"]){window.setTimeout(function(){A.call(G);},10);}else{if(D&&this.model.zoomFactorUpdating===false){G.containerNode.style.visibility="visible";}}return F;},browserResized:function B(){if(this.hasRendered&&mstrApp.features["is-document-center-align"]){A.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.FieldSet=mstrmojo.declare(mstrmojo.Container,null,{legend:null,scriptClass:"mstrmojo.FieldSet",markupString:'<fieldset id="{@id}" class="mstrmojo-FieldSet {@cssClass}" style="{@cssText}"><legend class="{@cssClass}-legend">{@legend}</legend></fieldset>',markupSlots:{legendNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode;}},markupMethods:{onlegendChange:function(){this.legendNode.innerHTML=mstrmojo.string.encodeHtmlString((this.legend!=null)?this.legend:"");},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.TabStripBase=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TabStripBase",target:null,targetProps:null,isStrip:true,ontargetChange:function A(I){var J=I&&I.valueWas;if(J){var G=this._targetSubs;if(G){J.detachEventListener(G.add);J.detachEventListener(G.rem);J.detachEventListener(G.sel);}this.removeChildren();}var K=this.target;if(K){var E=this.targetProps,D=(E&&E.children)||"children",B=K[D];this.addTabButtons(B,0);var H="attachEventListener",C=this.id,F;if(K[H]){this._targetSubs={add:K[H]("addChild",C,function(L){var M=L&&L.value;if(M&&M.length){this.addTabButtons(M,L.index);}}),rem:K[H]("removeChild",C,function(M){var L=M&&M.value;for(F=((L&&L.length)||0)-1;F>-1;F--){this.removeTabButton(L[F]);}}),sel:K[H]("selectedChange",C,function(L){this.selectionChange(L);})};}}},addTabButtons:mstrmojo.emptyFn,removeTabButton:mstrmojo.emptyFn,selectionChange:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");function B(K,J,H){var I=J,G;for(;I>0;I--){G=Array(I+1).join("#");K=K.replace(G,H[I-1]);}return K;}var C='<div class="freezing-vis-txt-metric">',A='<div class="freezing-vis-txt-attr">',E="</div>",F="("+mstrmojo.desc(16294,"data retrieval paused")+")";var D=function(J,I){if(J<1&&I<1){return null;}var H=[],G="# ## ### ####";if(J>0){H.push(B(G,4,[A,J,J>1?mstrmojo.desc(3581,"Attributes"):mstrmojo.desc(518,"Attribute"),E]));}if(I>0){H.push(B(G,4,[C,I,I>1?mstrmojo.desc(3582,"Metrics"):mstrmojo.desc(517,"Metric"),E]));}return H.join(",");};mstrmojo.vi.ui.rw.FreezingImageContainer=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ui-rw-freezingImageContainer mstrmojo-vi-ui-rw-GhostImageContainer {@cssClass}"><div class="mstmojo-freezingImgTableCell"><div class="mstrmojo-freezingImgDiv"><div class="freezing-vis-img ghost-vis-img"></div><div class="freezing-vis-desc"><label class="visName">{@visName}</label><div class="freezing-details">{@freezingDetails}</div></div><div class="vis-dropzone">{@visDropzoneMsg} </div></div></div></div>',markupSlots:{containerNode:function(){return this.domNode;}},visName:"",freezingDetails:F,visDropzoneMsg:""});mstrmojo.vi.ui.rw.FreezingImageContainer.getVisDropzoneMsg=D;}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.requiresDescs(11668,15187,15188,15189,15190);function B(L,K,I){var J=K,H;for(;J>0;J--){H=Array(J+1).join("#");L=L.replace(H,I[J-1]);}return L;}var C='<div class="ghost-vis-txt-metric">',A='<div class="ghost-vis-txt-attr">',E='<div class="ghost-vis-txt-attr-time">',G="</div>";var D={grid:B(mstrmojo.desc(15187,"Add # or more ##attributes### and/or #### or more #####metrics######"),6,[1,A,G,1,C,G]),heatmap:B(mstrmojo.desc(15187,"Add # or more ##attributes### and/or #### or more #####metrics######"),6,[1,A,G,1,C,G]),barchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),linechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),areachart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),bubblechart:B(mstrmojo.desc(15190,"Add # or more ##metrics### and #### or more #####attributes######"),6,[2,C,G,1,A,G]),piechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),combochart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,2,C,G]),network:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,A,G,1,C,G]),histogram:B(mstrmojo.desc(15667,"Add # or more ##attributes### and ####  #####metric######"),6,[1,A,G,1,C,G]),boxplot:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),waterfall:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),kpicard:B(mstrmojo.desc(15878,"Add # or more ##attributes### and #### #####metric######"),6,[1,A,G,1,C,G])};function F(H){return D[H]?D[H]:mstrmojo.desc(11668,"Drag objects here.");}mstrmojo.vi.ui.rw.GhostImageContainer=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ui-rw-GhostImageContainer {@cssClass}"><div class="mstmojo-ghostImgTableCell"><div class="mstrmojo-ghostImgDiv"><div class="ghost-vis-img"></div><div class="ghost-vis-name">{@visName}</div><div class="ghost-vis-desc">{@visDesc}</div></div></div></div>',markupSlots:{containerNode:function(){return this.domNode;}},visName:"",visDesc:""});mstrmojo.vi.ui.rw.GhostImageContainer.getVisDesc=F;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var U=H.slot;if(!this[U]){var M=U&&U.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),V=parseInt(M[2],10),Q=this.containerNode,T=this[(B+R)],N=[];if(!T){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}T=N[B+R];}var P=T.cells&&T.cells.length||0;for(var K=P;K<=V;K++){var I=T.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo._CanRenderChildrenOnShow");var A=mstrmojo.array;mstrmojo.StackContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._CanRenderChildrenOnShow],{scriptClass:"mstrmojo.StackContainer",isStack:true,markupString:'<div id="{@id}" class="mstrmojo-StackContainer {@cssClass}" style="{@cssText}"></div>',markupMethods:{onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}},onborderChange:function(){this.domNode.style.border=this.border||"";},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{containerNode:function(){return this.domNode;}},_set_selected:function D(H,F){var G=this.selected;if(G===F){return false;}if(G){G.set("visible",false);}this.selected=F;if(F){F.set("visible",true);}return true;},addChildren:function B(J,G,H){var K=this.selected,L;for(var I=0,F=(J&&J.length)||0;I<F;I++){L=J[I];if(L&&L.set){L.set("visible",L===K);}}return this._super(J,G,H);},removeChildren:function C(H,F){var G=this._super(H,F);if(!H||(H===this.selected)){this.set("selected",null);}return G;},destroy:function E(F){this._super(F);this.selected=null;},renderMode:"onshow"});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._Formattable","mstrmojo._IsThresholdConditionTarget","mstrmojo.EnumRWUnitType");var TP_HTML_CONTAINER=mstrmojo.EnumRWUnitType.HTMLCONTAINER;var $DOM=mstrmojo.dom,$HASH=mstrmojo.hash;function buildScriptNode(scriptNode){var node=document.createElement("script"),attributes=scriptNode.attributes,length=attributes.length;for(var i=0;i<length;i++){node.setAttribute(attributes[i].name,attributes[i].value);}return node;}mstrmojo.DocTextfield=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsThresholdConditionTarget],{scriptClass:"mstrmojo.DocTextfield",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocTextfield {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocTextfield-valueNode" style="{@valueNodeCssText}" mstrAttach:click >{@v}</div>{@buttonNodeMarkup}</div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["T","z-index"],valueNode:["D","B","F","P","background-color","fx","text-align","white-space","overflow"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function update(node){var d=node.data,v=d.v||"";if(node.defn.t===TP_HTML_CONTAINER){var div=document.createElement("div");div.innerHTML="<textarea>"+v+"</textarea>";v='<div style="display:none">&nbsp;</div>'+div.firstChild.value;div=null;}this.v=v;this.tooltip=d.tooltip||this.tooltip;if(this.thresholdId||d.tid){delete this.fmts;}this.thresholdId=d.tid;this.set("visible",!node.data.hidden);if(this._super){this._super(node);}},init:function(props){this._super(props);},postBuildRendering:function postBuildRendering(){var i,len;this.handleRotatedText();if(this.defn.t===TP_HTML_CONTAINER){var scripts=this.domNode.getElementsByTagName("script");for(i=0,len=scripts.length;i<len;i++){if(scripts[i].src){var parentNode=scripts[i].parentNode,node=buildScriptNode(scripts[i]);parentNode.removeChild(scripts[i]);parentNode.appendChild(node);}else{try{eval(scripts[i].innerHTML);}catch(err){console.log(err);}}}}return this._super();},isTextFieldRotated:function isTextFieldRotated(){var formats=this.getFormats();return(formats.fx&&formats.fx.rt&&!$DOM.isDXIE&&$DOM.supports($DOM.cssFeatures.TEXT_ROTATION));},handleRotatedText:function handleRotatedText(){var formats=this.getFormats(),rotateValue=formats.fx&&formats.fx.rt;if(this.isTextFieldRotated()){var domNode=this.domNode,domNodeStyle=domNode.style;switch(rotateValue){case 1:domNodeStyle.left=(parseInt(formats.left,10)+domNode.offsetHeight)+"px";break;case 3:domNodeStyle.top=(parseInt(formats.top,10)+domNode.offsetWidth)+"px";break;}}},getAnchor:function getAnchor(){return this.valueNode;}});mstrmojo.DocSummaryTextfield=mstrmojo.declare(mstrmojo.DocTextfield,null,{scriptClass:"mstrmojo.DocSummaryTextfield",markupString:'<span id="{@id}" class="mstrmojo-DocSumTextfield {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><span class="mstrmojo-DocTextfield-valueNode" style="{@valueNodeCssText}" mstrAttach:click >{@openLink}{@v}{@closeLink}</span>{@buttonNodeMarkup}</span>',formatHandlers:{domNode:["T","z-index"],valueNode:["D","B","F","background-color","fx","text-align","white-space","overflow"]},update:function update(node){this._super(node);if(this.v){var v=this.v,p1=new RegExp("&lt;bold&gt;","g"),p2=new RegExp("&lt;/bold&gt;","g");if(v.indexOf("&lt;empty/&gt;")>-1){this.v="";return ;}v=v.replace(p1,"<b>");v=v.replace(p2,"</b>");this.v=v;}},preBuildRendering:function preBuildRendering(){if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var E=function(){var G=this.opener;if(G.direction.toLowerCase()==="up"){this.domNode.style.top=-G.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"",text:"",direction:"down",enabled:true,title:"",allowHTML:true,markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.getTextInnerHTML();},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function C(){if(this._super){this._super();}var G=this.popupRef;if(G){if(G.nudge){G.nudge=mstrmojo.func.composite([G.nudge,E]);}else{if(this.direction.toLowerCase()!=="down"){G.nudge=E;}}}},popupRef:null,popupOpenConfig:null,destroy:function D(G){var H=this.popupRef;if(H&&H.hasRendered){H.destroy(false);}if(this._super){this._super(G);}},togglePopup:function F(){var G=this._lastOpened;if(G&&G.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(G){this.togglePopup();},getTextInnerHTML:function B(){return this.allowHTML?this.text:mstrmojo.string.encodeHtmlString(this.text);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var D=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.TwoColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-TwoColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+D+'></div><div class="divider"'+D+'></div><div class="vi-col2"'+D+"></div></div>",markupSlots:{col1Node:function C(){return this.domNode.firstChild;},dividerNode:function B(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"40%",dividerNode:"5px",col2Node:"60%"},xt:true},shouldPropagateEnabled:true,col1Width:"40%",dividerWidth:"5px",col2Width:"60%",init:function F(G){this._super(G);var H=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),I=H.w;I.col1Node=this.col1Width;I.dividerNode=this.dividerWidth;I.col2Node=this.col2Width;},getControl:function E(G){return(this.children||[]).filter(function(H){return H.slot==="col"+G+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.css","mstrmojo.hash");mstrmojo.TristateCheckBox=mstrmojo.declare(mstrmojo.Label,null,{scriptClass:"mstrmojo.TristateCheckBox",grayed:true,checked:true,cssClass:"tristate",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}},markupMethods:mstrmojo.hash.copy({oncheckedChange:function(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},ongrayedChange:function(){mstrmojo.css.toggleClass(this.domNode,"grayed",this.grayed);},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},mstrmojo.hash.copy(mstrmojo.Label.prototype.markupMethods))});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo._CanHandleTwoClicks","mstrmojo.Label","mstrmojo.Widget");var C=mstrmojo.css,A=mstrmojo.Label.prototype.markupMethods;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._CanHandleTwoClicks,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',markupMethods:mstrmojo.hash.copy({onwidthChange:function(){mstrmojo.Widget.widthMarkupMethod.call(this);},ontextChange:function(){if(A.ontextChange){A.ontextChange.call(this);}this.widgetResized();},onvisibleChange:function(){if(A.onvisibleChange){A.onvisibleChange.call(this);}if(this.visible){this.widgetResized();}}},mstrmojo.hash.copy(A)),onkeyup:function E(F){this._super(F);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var G=this;this._autoApplyTimer=window.setTimeout(function(){G.set("isEditing",false);},this.autoApplyDelay);}},postBuildRendering:function D(){if(this._super){this._super();}this.widgetResized();},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function B(){var G=this[this.editableSlot],F=!!this.selectable;G.selectable=F;G.setAttribute("unselectable",!F?"on":"off");C.toggleClass(G,"unselectable",!F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css","mstrmojo.DI.DIHelpers");var F=mstrmojo.css,H=mstrmojo.string,A=mstrmojo.desc(14058,"Show Details"),E=mstrmojo.desc(14059,"Hide Details"),B=mstrmojo.DI.DIHelpers,D=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">'+D+'</div><div class="toggle-details-link" >'+A+'</div><div class="error-details">{@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},errorDetailsNode:function(){return this.domNode.firstChild.children[3];}},markupMethods:{onshowDetailsChange:function(){var K=this.showDetails;this.toggleDetailsNode.innerHTML=K?E:A;F.toggleClass(this.domNode,"show-details",K);this.updateScrollbars();}},cssClass:undefined,shortDesc:undefined,longDesc:undefined,showDetails:false,showToggle:true,enableContactStr:true,allowHTML:false,init:function I(K){this._super(K);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function J(K){var M=K.getTarget(),L,N=this.longDesc;if(M===this.contactNode){L="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(N?("&body="+encodeURI("Detail:\r\n"+N)):"");mstrApp.openPage(L,"_self");}else{if(M===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}},setupScrollNodes:function C(){this.scrollNode=this.scrollNode;},preBuildRendering:function G(){this._super&&this._super();if(!this.allowHTML){this.longDesc=H.encodeHtmlString(H.decodeHtmlString(this.longDesc,true),true);}},postBuildRendering:function(){var K=this.domNode.firstChild.children[1];this._super&&this._super();!this.showToggle&&F.addClass(this.toggleDetailsNode,"hide");!this.enableContactStr&&F.addClass(K,"invisible");}});})();(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.num","mstrmojo.array");var A=mstrmojo.num,E=mstrmojo.array;var C="?";function B(H,G){var J=G?H.max:H.min,F=G?H.min:H.max,I=H.getValGroup(G?1:-1);return(J===null||(G?(I.every(function(K){return K<=J;})):(I.every(function(K){return K>=J;})))||(F!==null&&H.canLoop));}function D(I,H){var G=I.min,F=I.max,J=I.getValGroup(H?1:-1)||[];if((H&&F!==null&&J.some(function(K){return K>F;})||(!H&&G!==null&&J.some(function(K){return K<G;})))){if(I.canLoop){J.forEach(function(L,K){L=((L-G)%(F-G+1))+G;L=(L>=G)?L:L+(F-G+1);J[K]=L;});}else{return ;}}I.item[I.valField]=I.curValGroup=J;I.onTraverse();}mstrmojo.NumGroupStepperContentProvider=mstrmojo.declare(mstrmojo.NumStepperContentProvider,null,{scriptClass:"mstrmojo.NumGroupStepperContentProvider",curValGroup:null,init:function(F){this._super(F);},_initCurrent:function(){var H=this.item,F=this.curValGroup=H[this.valField];if(F===null||F===undefined){var G=this.min;this.curValGroup=G!==null?[G]:0;}this.curValGroup=E.ensureArray(this.curValGroup);},next:function(){D(this,true);},prev:function(){D(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},getValGroup:function(I){var F=this.curValGroup,G=this.interval,H=[];(F||[]).forEach(function(K,J){H[J]=F[J]+(G*(I||0));});return H;},getVal:function(){var F=null;(this.curValGroup||[]).forEach(function(G){if(F===null){F=G;}else{if(F!==C&&G!==F){F=C;}}});return F;},setVal:function(H){var I=this.min,G=this.max,F=this.curValGroup;if(typeof H!=="number"||isNaN(H)||A.inNumericRange(H,I,G)!==0){return ;}(F||[]).forEach(function(K,J){F[J]=H;});this.onTraverse();},_set_curValGroup:function(J,I){var H=this.min,G=this.max,F=this.getValGroup();if(I.some(function(K){return typeof K!=="number";})||I.some(function(K){return isNaN(K);})||I.every(function(L,K){return L===F[K];})||I.every(function(K){return A.inNumericRange(K,H,G)!==0;})){return false;}this.item[this.valField]=this.curValGroup=I;return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.XtabModel","mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.elementHelper");var AA="Metrics",H=2,f=mstrmojo.array,L=mstrmojo.hash,Z=mstrmojo.elementHelper,A="\u001E";var J=1,n=2,N=0,W=2,B=3;function U(AG){if(!AG){return false;}var AH=this.scm,AI,AL,AK,AJ,AF,AE=false;for(AL in AH){AK=AH[AL];AJ=AK.cgb;for(AI in AJ){AF=AG[AJ[AI]];if(AF){if(!AK.tks){AK.tks=AF;AE=true;}else{if(AK.tks&&(AK.tks.indexOf(AF)<0)){AK.tks+=A+AF;AE=true;}}}}}return AE;}function l(){var AF=this.data,AE=AF.gts;if(!AE){return ;}var AG;f.forEach([AE.row,AE.col],function(AH){f.forEach(AH,function(AI){if(AI.sc){AG=AG||{};AG[AI.id||AA]=AI.sc;if(AI.fid){AG[AI.id+"_"+AI.fid]=AI.sc;}}});});this.scm=AG;U.call(this,this.docModel.getCGBMap());}function AD(AE,AF){var AG=this.getDataService();AG[AE].apply(AG,AF);}function X(AM,AS,AL){var AO=AS||Z.getIdPresentation(AM),AT,AE;switch(AO){case"terse":case"terseLong":AM=AM.replace(/\\;/g,"*ESCAPESEMICOLON*");AT=AM.split(";");return(AT[0]+";"+AT[1]+(AL?";"+AL:"")).replace(/\*ESCAPESEMICOLON\*/g,"\\;");case"old":var AG="",AJ=2;AM=AM.replace(/\*:/g,"*COLON*").replace(/\\/g,"\\\\").replace(/;/g,"\\;");AT=AM.split(":");while(AT[AJ]){AG+=":"+AT[AJ];AJ++;}return("h"+AT[1]+AG+";"+AT[0]+(AL?";"+AL:"")).replace(/\*COLON\*/g,"\\:");case"oldLong":var AF=0,AR,AK,AN=[],AU=[],AQ,AP,AI,AH=function AH(){if(AF<0){return null;}var AY=false,AW=-1,AZ,AX=null;for(AQ=AF;AQ<AM.length;AQ++){AZ=AM.charAt(AQ);if(AZ==="*"&&!AY){AY=true;}else{if(AZ===":"&&!AY){AW=AQ;break;}else{AY=false;}}}if(AW===-1){AX=AM.substring(AF);AF=-1;}else{AX=AM.substring(AF,AW);AF=AW+1;}return AX;};AI=AH();if(AI!=="BB"&&AI!=="BF"){return AM;}AE=AH();if(AI==="BF"){AE=AH();}AR=parseInt(AH(),10);AK=parseInt(AH(),10);for(AP=0;AP<AK;AP++){AU[AP]=parseInt(AH(),10);AH();}for(AP=0;AP<AK;AP++){var AV=AH();if(AU[AP]<AR&&AU[AP]>=0){AN[AU[AP]]=AV.replace(/\\/g,"\\\\").replace(/\*:/g,"\\:").replace(/;/g,"\\;");}}return"h"+AN.join(":")+";"+AE+(AL?";"+AL:"");}return AM;}mstrmojo.DocXtabModel=mstrmojo.declare(mstrmojo.XtabModel,null,{scriptClass:"mstrmojo.DocXtabModel",docModel:null,init:function v(AE){this._super(AE);var AF=this;this.docModel.attachEventListener("CGBMapChange",this.id,function(AG){if(AF.xtab.onCBGMapChange){AF.xtab.onCGBMapChange(AG);}});},ondataChange:function p(){l.call(this);},getMessageId:function I(){return this.docModel.mid;},getDataService:function K(){return this.docModel.getDataService();},getAction:function d(AS,AI,AN){var AQ=AS[0],AF=AQ&&AQ.at;var AH;if(AF){if((AF&H)>0){var AG=this.getCellTitleInfo(AQ),AO=AG&&AG.title,AE=AO&&AO.id,AP=this.scm;this.sti={titleId:AE||AA};var AM=(AE&&AP[AE])||AP[AA],AL=function(){var AT=[];f.forEach(AS,function(AU){if(AU._e&&AU._e.id){AT.push(AU._e.id);}});return AT.join(A);};if(AM){var AR=this.xtab,AJ=(AR.allowToggleSelections&&AM.all&&AN),AK=(AG.isSrcTitle||AJ);this.sti.deselectCurrent=AJ;AH={h:"onGridSelector",a:{type:mstrmojo.EnumRWUnitType.GRID,anchor:AI,ck:AM.ck,tks:AM.tks,eid:AK?"OA:(All)":AL(),ctlKey:AM.ckey,sliceId:AR.sid,isUConDS:AM.isUConDS,ifw:AM.ifw}};}}}if(!AH){AH=this._super(AS);}if(AH&&AH.a){AH.a.sliceId=this.xtab.sid;}return AH;},getDownloadAction:function u(AG,AK,AI,AH,AL,AF,AJ,AM){var AE=this._super(AG,AK,AI,AH,AL,AJ,AF);AE.sliceId=this.xtab.sid;if(AM&&AM.name==="TransactionUpdates"){if(AE.partialUpdate){if(AE.partialUpdate.selectors){AE.partialUpdate.selectors.push(AM.ctlKey);}else{AE.partialUpdate.selectors=[AM.ctlKey];}}else{AE.partialUpdate={selectors:[AM.ctlKey]};}}return AE;},getDrillAction:function o(AF,AH){var AG=this._super(AF,AH),AE=this.getCellTitleInfo(AF[0]);if(AG&&AG.isWithin){AG.attrObj=AE.title;}AG.srcMsgId=this.docModel.mid;return AG;},sort:function z(AF,AG){var AE=this.xtab;AF.stp=AF.stp||this.getSubTotalsPos();AF.subTotalsPos=AF.stp;AF.nodeKey=AE.k;AF.treeType=AE.treeType||1;if(AE.gridData.ctlTPKeys){AF.selectors=AE.gridData.ctlTPKeys.split(A);}AD.call(this,"sortGrid",[AF,AG]);},getAdvSortData:function V(AE,AF){AD.call(this,"getAdvSortData",[AE,AF]);},pivot:function M(AE,AF){AD.call(this,"pivot",[AE,AF]);},removeUnit:function T(AE,AF){AD.call(this,"removeUnit",[AE,AF]);},getTotalsAction:function O(AE,AH,AF){var AG=this.getPivotAction(AE);AG.act="showTotals";AG.subtotalType=AH;AG.clearSubtotalType=AF;return AG;},getRemoveAxisTotalsAction:function j(AF,AE){return{act:"removeAxisTotals",axis:AE,subtotalType:AF};},showTotals:function E(AE,AF){AD.call(this,"showTotals",[AE,AF]);},drillGrid:function c(AE,AF){AD.call(this,"drillGrid",[AE,AF]);},downloadGridData:function k(AE,AF){AD.call(this,"downloadGridData",[AE,AF]);},loadLayout:function g(AE){this.docModel.loadLayout(AE);},resizeXtabColumn:function Q(AE,AF){AD.call(this,"resizeXtabColumn",[AE,AF]);},submitTemplateActions:function w(AE,AF,AG){AD.call(this,"submitTemplateUpdates",[AE,AF,AG]);},getDerivedMetricAction:function q(AE,AF){return{did:AE._e.oid,um:AE.um,alias:AE._e.n,n:AE._e.n,v:AE.um?AE.formula:AE._e.v,mix:AE.mix,cmd:AF,model:this};},getAddTemplateUnitAction:function D(AI,AK,AG,AE){var AF=AI.t,AJ=this.data.gsi,AH={act:"addUnit",unitId:AI.did,unitType:AF,unitPos:++AE,dsId:AK,isFirst:!AJ||(AJ.cols.length===0&&AJ.rows.length===0)};if(AF!==4||!AJ||!AJ.mx.length){AH.axis=AG;}return AH;},getRemoveTemplateUnitAction:function t(AE){return{act:"removeUnit",unitId:AE.did||AE.id,unitType:AE.t||4,is_disableonly:1};},getRenameTemplateUnitAction:function G(AI,AG,AE,AF){var AH={act:"renameUnit",id:AI,type:AG,name:AE};if(AF){AH.isDynamicAlias=true;}return AH;},doesNameExistOnTemplate:function C(AG,AK,AI,AF){var AJ=AG.node.data.gsi,AE=AI===4,AH=AE?AJ.mx:AJ.rows.concat(AJ.cols);return AH.some(function(AL){return AL.did!==AK&&(AE||AL.t===AI)&&AL.n===AF;});},getPivotUnitAction:function R(AH,AE,AL,AG,AK,AJ){AE++;var AI=parseInt(AK,10),AF=parseInt(AJ,10);return L.copy(isNaN(AI)||isNaN(AF)?{}:{originAxis:AI,originUnitPos:++AF},{act:"pivot",unitId:String(AL||""),unitType:AG||"",axis:AH,unitPos:AE});},getShowTotalsUnitAction:function a(AH,AF,AG,AE){return{act:"showTotals",unitId:String(AH||""),unitType:AF||"",subtotalType:AG,clearSubtotalType:AE};},getMoveSubTotalAction:function h(AG,AH,AI,AL){var AN=(this.xtab.gridInfo&&this.xtab.gridInfo.sorts)||[],AF=AG&&AG.axis,AJ;function AE(AT,AU){var AV=[];if(AU.length>=AT){if(AL){AV=AT===J?AU[n-1]:AU[J-1];}else{AV=AU[AT-1];}}function AP(AW,AX){return AW.indexOf("0!00000000000000000000000000000000!!!!"+AX)>-1;}function AS(AW,AX){return !!(AW&&AW.length&&AW[0].key&&!AP(AW[0].key,AX));}var AR=AS(AV,AT),AQ;if(AR){AQ=L.clone(AU);AQ.forEach(function(AX,AW){if(!AS(AX,AW+1)){AQ[AW]=null;return ;}AQ[AW]=AX=f.filter(AX,function(AY){return !AP(AY.key,AT);});(AX||[]).forEach(function(AZ){var AY=AZ.key;if(AY){AZ.key=AY.replace(/;/g,"\\;").replace(/\u001e/g,";");if(AL){AY=AZ.key;if(AY.indexOf("!!1")>=0){AZ.key=AY.replace(/!!1/g,"!!2");}else{AZ.key=AY.replace(/!!2/g,"!!1");}}}});});if(AL){AQ=AQ.reverse();}}return AR?AQ:[];}function AK(AR,AS){if(!AS||AS.length<AR){return false;}var AP=AS[AR-1];if(!AP||AP.length!==1){return false;}var AT="!5",AQ=AP[0].key;return AQ&&AQ.slice(-2)===AT;}function AM(AS,AP,AR,AQ,AT){return{act:"moveSubTotal",nodeKey:AS,sorts:AP,subTotalsPos:AR,stt:AT||-1,axis:AQ};}function AO(){var AR=this.data,AQ=AR&&AR.gts,AV=AQ&&AQ.rowSubPos||N,AP=AQ&&AQ.colSubPos||N,AU=[AV,AP];if((!AF||AF===J)&&AV===N){var AT=AQ&&AQ.row||[],AS=false;f.forEach(AT,function(AW){if(AW.ast&&AW.ast.length>0){AS=true;return false;}});if(!AS||AR&&AR.gsi&&AR.gsi.hidesb){AU[J-1]=W;AJ=AE(J,AN);return AM(AI,AJ,AU,J);}}return null;}if(!AH){return AO.call(this);}else{AJ=AE(AF,AN);return AM(AI,AJ,AH,AF,AK(AF,AJ)&&AG.hst?AG.hst:-1);}return null;},getSortGridAction:function x(AH,AF,AG,AE){return{sortKey:AF,subTotalsPos:AH,axis:AG,isAsc:AE};},getColumnResizeAction:function S(AH,AE,AF,AG,AI){return{act:"changeXtabColumnWidth",unitId:AH,unitType:AE,width:AF||0,depth:AG||1,ec:AI};},getNormalizedFormElementId:function AC(AF,AE){return X(AF,null,AE);},compareNormalizedElementsId:function r(AF,AE){if(AF===AE){return true;}else{if(this.docModel.populateAttributeIdLinkInfo){this.docModel.populateAttributeIdLinkInfo();}if(Z.isAttributeIdsLinked(Z.getAttributeId(AF),Z.getAttributeId(AE),this.docModel.als&&this.docModel.als.idLinks||{})){return Z.getElementValue(AF)===Z.getElementValue(AE);}}return false;},compareElementsId:function Y(AI,AH){if(!this.docModel.als){return this.compareElementsIdInSingleGrid(AI,AH);}var AG=Z.getIdPresentation(AI),AF=Z.getIdPresentation(AH),AE=X(AI,AG),AJ=X(AH,AF);return this.compareNormalizedElementsId(AE,AJ);},compareElementsIdInSingleGrid:function e(AH,AG){var AF=Z.getIdPresentation(AH),AE=Z.getIdPresentation(AG);if(AF!==AE||AF==="oldLong"||AF==="terseLong"){return X(AH,AF)===X(AG,AE);}return AH===AG;},getLinkedAttributes:function m(AE){var AF;if(this.docModel.populateAttributeIdLinkInfo){this.docModel.populateAttributeIdLinkInfo();}AF=this.docModel.als&&this.docModel.als.idLinks||{};return AF[AE];},getCellDataUnion:function b(AG){var AH=this,AF=AG.hasOwnProperty("mix"),AI=[],AJ,AE=function AE(AL){var AK=AH.getCellTitleInfo(AL),AN=AK.title,AM=AN&&AN.id;if(AM){AJ={};if(AL.stt){AJ.isSubtotal=true;}AI.push(L.copy(AJ,{tid:AM,eid:AL._e&&AL._e.id,v:AL.v||AL._e&&AL._e.n}));}};if(AG){if(!AF){AE(AG);}else{f.forEach([AG._lp,AG._tp],function(AK){var AL=AK;while(AL&&AL!==AL._p){AE(AL);AL=AL._p;}});}}return AI;},getObjectInfo:function F(AE){var AF;f.forEach((this.data.gsi.cols||[]).concat(this.data.gsi.rows||[]),function(AG){if(AG.did===AE){AF=AG;}});return AF;},supportsViewFilterActions:function P(AE){if(this.data&&this.data.gsi){var AF=this.getObjectInfo(AE);return AF&&!AF.de&&(AF.t!==1)&&(AF.t!==47||AF.st===12033);}return false;},getSelectorControlMapInfo:function AB(){var AF=[],AH=this.data.gsi,AG=[],AE;if(this.scm){L.forEach(AH,function(AI){if(AI instanceof Array){AG=AG.concat(AI);}});L.forEach(this.scm,function(AJ,AI){AE=f.find(AG,"did",AI);if(AE!==-1){AF.push({did:AI,n:AG[AE].n,sc:AJ});}});}return AF;},getShowDefinedSubtotalsAction:function(){return{act:"showDefinedSubtotals"};}});}());(function(){mstrmojo.requiresCls("mstrmojo.TristateCheckBox","mstrmojo._IsInputControl");mstrmojo.CheckBoxDIC=mstrmojo.declare(mstrmojo.TristateCheckBox,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.CheckBoxDIC",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" tabindex="1" mstrAttach:click,keydown></div>',cssText:"width: 0; margin:0 auto; max-height: 18px; cursor: pointer;",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);this.set("checked",true);}else{this.set("checked",!this.checked);}},oncheckedChange:function(A){this.set("value",this[this.checked?"onValue":"offValue"]);},preBuildRendering:function(){this._super();var A=this.dic.vls;this.offValue=A[0].v;this.onValue=A[1].v;this.grayed=(this.onValue!==this.value)&&(this.offValue!==this.value);this.checked=(this.onValue===this.value);},postBuildRendering:function(){var B=this.domNode,D=B.style,C=this.openerStyle,A;this._super();D.height=C.ih+"px";},onkeydown:function(B){var A=B.hWin,C=B.e||A.event;if(C.keyCode===mstrmojo.Enum_Keys.SPACE){mstrmojo.dom.preventDefault(A,C);this.onclick();}},focus:function(){this.domNode.focus();}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.TristateCheckBox","mstrmojo.FieldSet","mstrmojo.Table");var A=mstrmojo.hash,B=mstrmojo._FormatDefinition;mstrmojo.AlignmentFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.AlignmentFormatter",cssClass:"mstrmojo-AlignmentFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){A.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"textAlignment",cssClass:"mstrmojo-FormatEditor-textAlignment",legend:mstrmojo.desc(2065),children:[{scriptClass:"mstrmojo.Table",rows:2,cols:2,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3691),slot:"0,0"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.Horizontal,bindings:{m:"this.parent.parent.parent.model",value:"this.m.Horizontal"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.Horizontal=this.value;}},slot:"0,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3692),slot:"1,0"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.Vertical,bindings:{m:"this.parent.parent.parent.model",value:"this.m.Vertical"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.Vertical=this.value;}},slot:"1,1"}]}]},{scriptClass:"mstrmojo.FieldSet",alias:"textControl",cssClass:"mstrmojo-FormatEditor-textControl",legend:mstrmojo.desc(2884),children:[{alias:"TextWrap",scriptClass:"mstrmojo.TristateCheckBox",text:mstrmojo.desc(2070),checked:false,grayed:false,pr:"TextWrap",bindings:{m:"this.parent.parent.model",checked:function(){return this.m[this.pr]==-1;},grayed:function(){return(typeof this.m[this.pr]=="undefined")||this.m[this.pr]=="pru";}},oncheckedChange:function(C){if(this.m){this.m.set(this.pr,this.checked?-1:0);}}},{scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(5159)},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.TextDirection,bindings:{m:"this.parent.parent.parent.model",value:"this.m.TextDirection"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.TextDirection=this.value;}},slot:"1,1"}]}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl","mstrmojo.num","mstrmojo.HBox","mstrmojo.Container");var E=mstrmojo.expr.DTP,P="mstrmojo.Button",G=mstrmojo.num,N=mstrmojo.validation.TRIGGER,D=50,B=500,L=10;function F(Q){var R=this;this._holdTimer=setInterval(function(){R.onclick(Q);},D);}function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}}function K(Q){var R=this;if(!this._holdTimer&&!this._startHoldTimer){this._startHoldTimer=setTimeout(function(){delete R._startHoldTimer;F.call(R,Q);},B);}}function A(){if(this._startHoldTimer){clearTimeout(this._startHoldTimer);delete this._startHoldTimer;}H.call(this);}function M(Q){A.call(this);}function C(Q){return Q?parseFloat(Q.toFixed(L)):Q;}function I(T){var Q=T.max,S=T.min,R=T.itv;return{scriptClass:"mstrmojo.HBox",alias:"hBox",children:[{scriptClass:P,alias:"minus",cssClass:"mstrmojo-StepperDIC-Operator",bindings:{enabled:function(){var W=this.parent.parent,V=W.numericValue;if(V<=S||!W.enabled){A.call(this);return false;}return true;}},onclick:function(V){var X=this.parent.parent,W=X.numericValue;if(!isNaN(W)){if(Q!==undefined&&W-R>Q){X.set("numericValue",Q);this.parent.plus.set("enabled",true);}else{if(S===undefined||W-R>=S){X.set("numericValue",C(W-R));}else{if(W>S&&W-R<S){X.set("numericValue",S);}}}}},onmouseup:M,onmousedown:K,text:"-"},{scriptClass:"mstrmojo.ValidationTextBox",cssClass:"mstrmojo-DataInputControl",dtp:E.DOUBLE,required:true,alias:"textInput",cssDisplay:"block",constraints:{trigger:N.ONKEYUP|N.ONBLUR,max:Q,min:S},bindings:{value:"this.parent.parent.numericValue",enabled:"!!this.parent.parent.enabled"},onValid:function(){this.parent.parent.set("numericValue",parseFloat(this.value));},onblur:function U(V){var X=this,W=this.parent.parent,Y=G.parseNumeric(this.value);if(!W.active&&!isNaN(Y)&&Y>=S&&Y<=Q){W.set("value",G.toLocaleString(W.numericValue));}if(this._super){this._super(V);}}},{scriptClass:P,alias:"plus",cssClass:"mstrmojo-StepperDIC-Operator",bindings:{enabled:function(){var W=this.parent.parent,V=W.numericValue;if(V>=Q||!W.enabled){A.call(this);return false;}return true;}},onclick:function(V){var X=this.parent.parent,W=X.numericValue;if(!isNaN(W)){if(S!==undefined&&W+R<S){X.set("numericValue",S);this.parent.minus.set("enabled",true);}else{if(Q===undefined||W+R<=Q){X.set("numericValue",C(W+R));}else{if(W<Q&&W+R>Q){X.set("numericValue",Q);}}}}},onmouseup:M,onmousedown:K,text:"+"}]};}mstrmojo.StepperDIC=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.StepperDIC",cssClass:"mstrmojo-StepperDIC",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}" mstrAttach:mouseup,mousedown></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},init:function O(R){if(this._super){this._super(R);}var Q=parseFloat(this.value);this.set("numericValue",isNaN(Q)?(this.dic.min||0):Q);this.set("children",I(this.dic));this.textInput=this.hBox&&this.hBox.textInput;this.plus=this.hBox&&this.hBox.plus;this.minus=this.hBox&&this.hBox.minus;},onmousedown:function(Q){this.active=true;},onmouseup:function(Q){this.active=false;this.textInput&&this.textInput.domNode.focus();},unrender:function J(Q){this.plus&&A.call(this.plus);this.minus&&A.call(this.minus);this._super(Q);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");mstrmojo.PickerButton=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.PickerButton",cssClass:"mstrmojo-PickerButton",cellCssClass:"mstrmojo-PickerButton-cell",enabled:true,postCreate:function(){var A=function(B){var C=B.parent,E=C&&C.items&&C.items[C.selectedIndex],D=E&&E.cssClass||null;if(D){mstrmojo.css.removeClass(B.domNode,B.selectedItemCssClass);mstrmojo.css.addClass(B.domNode,B.selectedItemCssClass=D);}};this.children=[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-InteractiveButton",selectedItemCssClass:"",bindings:{title:"this.parent.title",iconClass:"this.parent.iconClass",selectedIndex:"this.parent.selectedIndex",enabled:"this.parent.enabled"},onclick:function(){this.parent.onchange();},onselectedIndexChange:function(){A(this);},onRender:function(){A(this);}},{scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-PickerButton-DropDownButton",bindings:{enabled:"this.parent.enabled"},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Menu",shadowNodeCssClass:"mstrmojo-Menu-shadow",contentNodeCssClass:"mstrmojo-Menu-content",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.ListBox",itemCssClass:"mstrmojo-ListBox-item mstrmojo-InteractiveText",bindings:{itemDisplayField:"this.parent.opener.parent.itemDisplayField",itemIdField:"this.parent.opener.parent.itemIdField",items:"this.parent.opener.parent.items"},onchange:function(){if(this._closing){return ;}var C=this.selectedIndex,B=this.parent.opener;if((C>-1)&&B){this._closing=true;B.closePopup();B.parent.selectedItem=this.selectedItem;B.parent.set("selectedIndex",C);B.parent.onchange();this._closing=false;}}}]}}];}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.registry","mstrmojo.tooltip","mstrmojo.HBox");var B=mstrmojo.dom,C=mstrmojo.css,A=1,G=2,F=3,E=function(I){var H=C.getStyleValue(I,"verticalAlign");return{top:A,bottom:F,middle:G}[H]||A;};mstrmojo.SliderBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.SliderBox",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}" tabindex="{@tabIndex}" ><div class="valuePart" style="{@valueCssText}"><span class="valueLabel">{@valueLabel}</span><span class="valueText">{@valueText}</span></div><table class="sliderPart" style="{@sliderCssText}"><tbody><tr><td class="minText">{@min}</td><td class="sliderWrapper"></td><td class="maxText">{@max}</td></tr></tbody></table></div>',markupSlots:{valuePartNode:function(){return this.domNode.firstChild;},valueLabelNode:function(){return this.domNode.firstChild.firstChild;},valueTextNode:function(){return this.domNode.firstChild.lastChild;},sliderPartNode:function(){return this.domNode.lastChild;},minTextNode:function(){return this.domNode.lastChild.rows[0].cells[0];},maxTextNode:function(){return this.domNode.lastChild.rows[0].cells[2];},sliderNode:function(){return this.domNode.lastChild.rows[0].cells[1];}},markupMethods:{onmaxChange:function(){this.maxTextNode.innerHTML=this.max;},onminChange:function(){this.minTextNode.innerHTML=this.min;},onvalueTextChange:function(){this.valueTextNode.innerHTML=this.valueText;},onunsetChange:function(){var H=this.sliderBar.domNode;if(H){mstrmojo.css.toggleClass(H,"unset",this.unset);}}},tabIndex:-1,sliderRef:null,valueLabel:mstrmojo.desc(4104,"Value:"),valueText:"",min:"",max:"",interval:0,isSequential:false,unset:false,cssClass:"mstrmojo-SliderGroup",postCreate:function D(){if(!this.sliderRef){this.sliderRef={scriptClass:"mstrmojo.Slider",isHoriz:true,ontitleChange:function(){if(this.domNode&&this.title){this.domNode.setAttribute("title",this.title);}},onselectionChange:function(){if(!this.hasRendered){return ;}var I=this.items[this.selectedIndex]&&this.items[this.selectedIndex].n,H=this.parent;if(H.unset){H.unset=false;C.removeClass(this.domNode,"unset");}H.set("valueText",I);H.set("value",I);this.typeHelper.updateThumb();}};}this.sliderRef.slot="sliderNode";this.sliderRef.alias="sliderBar";this.addChildren(this.sliderRef);},preBuildRendering:function(){this._super();var M=this.min,I=this.max,K=mstrmojo.num.parseNumeric(this.value),J=this.items,H,L=this.sliderBar;if(this.isSequential){H=Math.floor((Math.max(Math.min(K,I),M)-M)/this.interval);if(isNaN(K)||K<M||K>I){this.unset=true;}}else{H=mstrmojo.array.find(J,"v",String(K));if(H==-1){this.unset=true;H=0;}}L.set("items",J);L.select(H||0);},postBuildRendering:function(){this._super();if(this.unset){C.addClass(this.sliderBar.domNode,"unset");}},alignSlider:function(K,H){var J=E(K),I,L;if(!this.valuePartNode){L=this.valueCssText||"";I=this.sliderCssText||"";if(J===A){this.valueCssText="top:0;"+L;this.sliderCssText="top:0;"+I;}else{if(J===F){this.valueCssText="bottom:0;"+L;this.sliderCssText="bottom:0;"+I;}else{this.valueCssText="height: 100%; line-height: "+H+"px;"+L;this.sliderCssText="height: 100%;"+I;}}}else{I=this.sliderPartNode.style;L=this.valuePartNode.style;if(J){if(J===A){I.top=L.top="0";}else{if(J===F){I.bottom=L.bottom="0";}else{L.height=I.height="100%";L.lineHeight=inlineHeight+"px";}}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.HTMLButton","mstrmojo.CheckBox","mstrmojo.HBox","mstrmojo.VBox","mstrmojo.Box","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var A=function(E){E.attachEventListener("pfChange",E.id,"positionChange");E.boxes.left.flat.attachEventListener("checkedChange",E.id,"flatChange");var D={pf:"this.boxes.left.pf.value",flat:"!this.boxes.left.flat.checked",agg:function(){return this.boxes.left.agg.checked?"2":"1";},rfi:"this.boxes.left.rfi.value"};E.set("bindings",D);},C=function(E){var D=E.boxes.left;D.pf.set("value",E.pf);D.flat.set("checked",!E.flat);D.agg.set("checked",E.agg==2);D.rfi.set("value",E.rfi);};function B(M,I,E,F,L,D,H,K){var J={target:I,onEnd:function(){if(D){D();}},props:{}};J.props[E]={ease:H||mstrmojo.ease.sin,start:parseInt(F,10),stop:parseInt(L,10),suffix:"px"};J=mstrmojo.hash.copy(K,J);var G=new mstrmojo.fx.AnimateProp(J);G.play();}mstrmojo.CGEOptions=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.CGEOptions",children:[{scriptClass:"mstrmojo.HBox",alias:"boxes",cellCssClass:"cell",children:[{alias:"left",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-CGEOptions-options",children:[{scriptClass:"mstrmojo.ImageCheckBox",alias:"flat",cssClass:"row",label:mstrmojo.desc(7954,"Enable hierarchical display")},{scriptClass:"mstrmojo.ImageCheckBox",alias:"agg",cssClass:"row",label:mstrmojo.desc(7955,"Enable subtotals display")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7956,"Position parent header:"),cssClass:"row"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",alias:"pf",cssClass:"CGE-parent-header mstrmojo-FormatEditor-DropDownButton",items:[{n:mstrmojo.desc(7957,"Above child items"),v:true},{n:mstrmojo.desc(7958,"Below child items"),v:false}],bindings:{value:"this.parent.parent.parent.pf"}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7959,"Interaction with report filter:"),cssClass:"row"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",alias:"rfi",cssClass:"CGE-report-filter mstrmojo-FormatEditor-DropDownButton",items:[{n:mstrmojo.desc(7960,"Default (Database Instance level)"),v:-1},{n:mstrmojo.desc(7961,"No interaction"),v:0},{n:mstrmojo.desc(2398,"Apply"),v:1},{n:mstrmojo.desc(7962,"Apply but ignore related elements"),v:2}],bindings:{value:function(){var D=this.parent.parent.parent.rfi,D=D==undefined?"-1":D;return D;}}}]},{scriptClass:"mstrmojo.Box",alias:"preview",cssClass:"mstrmojo-CGEOptions-preview",children:[{scriptClass:"mstrmojo.Label",cssClass:"title",text:mstrmojo.desc(3389,"Preview")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7963,"Element Header 1"),alias:"g1t"},{scriptClass:"mstrmojo.Box",alias:"e1",cssClass:"e",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7965,"Item 1-1")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7966,"Item 1-2")}],onflatChange:function(){mstrmojo.css.toggleClass(this.domNode,["flat"],this.flat);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7963,"Element Header 1"),cssText:"margin-bottom:10px;",alias:"g1b"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7964,"Element Header 2"),cssText:"margin-top:10px;",alias:"g2t"},{scriptClass:"mstrmojo.Box",alias:"e2",cssClass:"e",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7967,"Item 2-1")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7968,"Item 2-2")}],onflatChange:function(){mstrmojo.css.toggleClass(this.domNode,["flat"],this.flat);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7964,"Element Header 2"),alias:"g2b"}]}]},{scriptClass:"mstrmojo.HBox",alias:"btns",cssClass:"mstrmojo-Editor-buttonBar",cssText:"margin-top: 10px;",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(2397,"OK"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.save();}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(2399,"Cancel"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.cancel();}}]}],pf:true,flat:false,agg:"1",rfi:"-1",postBuildRendering:function(){if(this._super){this._super();}A(this);this.preview();},open:function(E,F){var D=E.cgp;this.pp=D;this.set("pf",D.pf);this.set("flat",D.flat);this.set("agg",D.agg);this.set("rfi",D.rfi);C(this);for(var G in F){this[G]=F[G];}this.set("visible",true);if(!this.hasRendered){this.render();}},cancel:function(){var D=this.closeCB;if(D){D[0][D[1]]();}},save:function(){this.pp.pf=this.pf;this.pp.flat=this.flat;this.pp.agg=this.agg;this.pp.rfi=this.rfi;this.cancel();},positionChange:function(D){this.preview(D.value,null);},flatChange:function(D){this.preview(null,!D.value);},preview:function(G,E){G=!!G?String(G)==="true":!(String(this.pf)==="false");E=(E==null?this.flat:E);var F=!!G,D=this.boxes.preview;D.g1t.set("visible",F);D.g1b.set("visible",!F);D.g2t.set("visible",F);D.g2b.set("visible",!F);D.e1.set("flat",E);D.e2.set("flat",E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.date","mstrmojo.dom","mstrmojo.HBox","mstrmojo.VBox");var Q=mstrmojo.date,J=mstrmojo.dom,L=mstrmojo.boxmodel,I=function(){return mstrmojo.locales.datetime;},D=Math.PI/6,O=1,P=2,M=3,A=I().AM_NAME,N=I().PM_NAME;function E(S,R){if(S===0){return"00";}if(S<10){return R?S.toString():"0"+S;}return S.toString();}function G(U){if(!U){return null;}var S=Q.parseTime(U),T=/.*\ [a|p]m/i.test(U);if(!S){var R=Q.parseDateAndOrTime(U);S=R&&R.time;if(!S){return null;}}if(T){S.h12=/.*\ am/i.test(U)?A:N;}return S;}function C(e,T){var c=this,S=L.offset(T,document.body),Y=(c._hh%12)*(Math.PI/6)+(Math.PI/360)*c._mm,Z=(Math.PI/30)*c._mm,a=0,b=0,W=S.left+80,V=S.top+80,U=0,X=0,R=function(k,h,f,n){var l=0,m=0,j=f-k,g=h-n;if(g===0){if(j>=0){m=Math.PI/2;}else{m=3*Math.PI/2;}}else{if(j===0){if(g>=0){m=0;}else{m=Math.PI/2;}}else{l=j/g;if(l>0&&j>0){m=Math.atan(l);}else{if(l>0&&j<0){m=Math.PI+Math.atan(l);}else{if(l<0&&j>0){m=Math.PI+Math.atan(l);}else{m=2*Math.PI+Math.atan(l);}}}}}return m;},d=function(g){var h=R(W,V,g.pageX,g.pageY),f;if(X===O){f=c._hh;c._hh=Math.floor(h*6/Math.PI);if(c._hh===0){if(f===23){c._hh=0;}else{if(f===11||f===12){c._hh=12;}else{if(f>12){c._hh+=12;}}}}else{if(c._hh===11){if(f===0){c._hh=23;}else{if(f===13||f===12){c._hh=11;}else{if(f>12){c._hh+=12;}}}}else{if(f>=12){c._hh+=12;}}}c._updateValue();}else{f=c._mm;c._mm=Math.floor(h*30/Math.PI);if(c._mm<15&&f>45){if(c._hh===23){c._hh=-1;}c._hh+=1;}else{if(c._mm>45&&f<15){if(c._hh===0){c._hh=24;}c._hh-=1;}}c._updateValue();}};U=R(W,V,e.pageX,e.pageY);a=Math.abs(Y-U);a=Math.min(a,2*Math.PI-a);b=Math.abs(Z-U);b=Math.min(b,2*Math.PI-b);if(a<D||b<D){if(b<a){X=P;c.active=P;}else{X=O;c.active=O;}J.attachEvent(T,"mousemove",d);J.attachEvent(T,"mouseup",function(f){J.detachEvent(T,"mousemove",d);});}}function F(V,S){var R=S.getContext("2d"),U=V.hour,T=V.min;R.save();R.clearRect(0,0,160,160);if(V.h12){R.save();R.fillStyle=U<12?"rgba(191, 223, 255, 1)":"rgba(246, 200, 126, .5)";R.fillRect(68,100,26,14);R.font="bold 14px sans-serif";R.fillStyle="black";R.fillText(U<12?"AM":"PM",70,112);R.restore();}R.translate(80,80);R.scale(0.3,0.3);R.rotate(-Math.PI/2);R.fillStyle="rgb(90, 158, 198)";R.save();R.rotate(U*(Math.PI/6)+(Math.PI/360)*T);R.lineWidth=12;R.beginPath();R.moveTo(-28,0);R.lineTo(105,0);R.stroke();R.restore();R.save();R.rotate((Math.PI/30)*T);R.lineWidth=10;R.beginPath();R.moveTo(-35,0);R.lineTo(162,0);R.stroke();R.restore();R.restore();}function H(T,S){var V=L.offset(S,document.body),R=V.left,U=V.top;if(T.pageX<R+68||T.pageX>R+94||T.pageY<U+100||T.pageY>U+114){return false;}return true;}mstrmojo.TimePicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TimePicker",markupString:'<div class="mstrmojo-TimePicker {@cssClass}" style="{@cssText}"><div></div><div class="mstrmojo-Clock-time"><canvas width="157" height="157"></canvas></div></div>',cssText:"width:158px; height:"+(J.isIE?28:180)+"px",markupSlots:{hbNode:function(){return this.domNode.firstChild;},canvasNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onintervalChange:function(){this.interval=parseInt(this.interval,10);},onvalueChange:function(){if(this.domNode){var R,T;R=G(this.value);if(!R){var U=new Date(),S=Q.getDateJson(U);this.set("value",Q.formatTimeInfo(S,I().TIMEINPUTFORMATS[0]));return ;}this._hh=R.hour;this._mm=R.min;T=this.ctn.hb&&this.ctn.hb.tf;if(R.h12){T.set("visible",true);this.set("_tf",R.h12);this.set("_HH",E(R.hour>12?R.hour-12:(R.hour===0?12:R.hour),true));}else{T.set("visible",false);this.set("_HH",E(R.hour,true));}this.set("_MM",E(R.min));if(!J.isIE){F(R,this.canvasNode.firstChild);}}}},active:P,value:null,_hh:null,_HH:null,_mm:null,_MM:null,_tf:null,interval:5,children:[{scriptClass:"mstrmojo.HBox",alias:"ctn",slot:"hbNode",children:[{scriptClass:"mstrmojo.HBox",alias:"hb",cssText:"border: 1px solid #CECBCE;margin-left: 5px;background-color:#FFFFCC;",children:[{scriptClass:"mstrmojo.TextBox",alias:"hh",width:"20px",cssText:"border:none;text-align:right;",bindings:{value:"this.parent.parent.parent._HH"},onfocus:function(){this.ov=this.value;this.domNode.select();this.parent.parent.parent.active=O;},onkeyup:function(){var R=parseInt(this.value,10);if(parseInt(this.ov,10)!==R&&R>=0&&R<=23){this.parent.parent.parent.updateHours(this.value);this.ov=this.value;}},onblur:function(){var R=parseInt(this.value,10);if(R<0||R>23){this.set("value",this.ov);}}},{scriptClass:"mstrmojo.Label",cssText:"width:5px;",text:":"},{scriptClass:"mstrmojo.TextBox",alias:"mm",width:"20px",cssText:"border:none;",bindings:{value:"this.parent.parent.parent._MM"},onfocus:function(){this.ov=this.value;this.domNode.select();this.parent.parent.parent.active=P;},onkeyup:function(){var R=parseInt(this.value,10);if(parseInt(this.ov,10)!==R&&R>=0&&R<=60){this.parent.parent.parent.updateMinutes(this.value);this.ov=this.value;}},onblur:function(){var R=parseInt(this.value,10);if(R<0||R>60){this.set("value",this.ov);}}},{scriptClass:"mstrmojo.TextBox",width:"24px",cssText:"padding-right:2px;border:none;",alias:"tf",visible:false,onfocus:function(){this.ov=this.value;this.domNode.select();this.parent.parent.parent.active=M;},onkeyup:function(){var R=this.value&&this.value.toUpperCase(),S=this.parent.parent.parent;if((R===I().AM_NAME||R===I().PM_NAME)&&(R!==this.ov)){S._hh+=S._hh<12?12:-12;this.value=this.ov=R;S._updateValue();}},onblur:function(){var R=this.value&&this.value.toUpperCase();if(R!==I().AM_NAME&&R!==I().PM_NAME){this.set("value",this.ov);}},value:"AM",bindings:{value:"this.parent.parent.parent._tf"}}]},{scriptClass:"mstrmojo.VBox",alias:"stepper",slot:"stepperNode",cssText:"padding-left: 2px; padding-top: 0px;",children:[{scriptClass:"mstrmojo.Button",title:mstrmojo.desc(8314,"Increase"),cssClass:"stepper up",text:"",onclick:function(){this.parent.parent.parent.incr();},onmousedown:function(){var R=this;this.tmr=window.setInterval(function(){R.parent.parent.parent.incr();},200);},onmouseup:function(){if(this.tmr){window.clearInterval(this.tmr);delete this.tmr;}}},{scriptClass:"mstrmojo.Button",title:mstrmojo.desc(8315,"Decrease"),cssClass:"stepper down",text:"",onclick:function(){this.parent.parent.parent.decr();},onmousedown:function(){var R=this;this.tmr=window.setInterval(function(){R.parent.parent.parent.decr();},200);},onmouseup:function(){if(this.tmr){window.clearInterval(this.tmr);delete this.tmr;}}}]}]}],init:function(R){if(this._super){this._super(R);}this._hh=0;this._HH="";this._mm=0;this._MM="";},focus:function B(){var R=this.ctn,S=R&&R.hb;if(!S||!this.visible){return ;}if(this.active===O){S.hh.focus();}else{if(this.active===M){S.tf.focus();}else{S.mm.focus();}}},postBuildRendering:function K(){var S=this.canvasNode.firstChild,R=this;if(this._super){this._super();}if(!this.value){this.value="12:00 AM";}if(J.isIE){this.canvasNode.style.display="none";}else{F({hour:this._hh,min:this._mm},S);S.onmousedown=function(T){C.call(R,T,S);};S.onclick=function(T){if(!H(T,S)){return ;}R.active=M;R._hh+=R._hh<12?12:-12;R._updateValue();};}},_updateValue:function(){var R;if(this._tf){R=I().TIMEINPUTFORMATS[0];}else{R=I().TIMEINPUTFORMATS[1];}this.set("value",Q.formatTimeInfo({hour:this._hh,min:this._mm},R));},incr:function(){var R;if(this.active===O){R=this._hh;if(R===23){R=-1;}this._hh=R+1;}else{if(this.active===M){if(this._hh>12){this._hh-=12;}else{this._hh+=12;}}else{R=parseInt(this._mm,10)+this.interval;if(R>=60){if(this._hh===23){this._hh=-1;}this._hh+=1;R=R-60;}this._mm=R;}}this._updateValue();},decr:function(){var R;if(this.active===O){R=this._hh;R=(R===0)?24:R;this._hh=R-1;}else{if(this.active===M){if(this._hh>12){this._hh-=12;}else{this._hh+=12;}}else{R=parseInt(this._mm,10)-this.interval;if(R<0){if(this._hh===0){this._hh=24;}this._hh-=1;R+=60;}this._mm=R;}}this._updateValue();},updateHours:function(S){var R=parseInt(S,10);if(this._tf){if(this._hh>=12&&R<12){this._hh=R+12;}else{this._hh=R;}}else{this._hh=R;}this._updateValue();},updateMinutes:function(R){this._mm=parseInt(R,10);this._updateValue();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasBuilder");mstrmojo.ToolBar=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder],{scriptClass:"mstrmojo.ToolBar",cellCssClass:"mstrmojo-ToolBar-cell",markupString:'<table id="{@id}" class="mstrmojo-ToolBar {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-ToolBar-outercell"><table class="mstrmojo-ToolBar-innertable" cellspacing="0" cellpadding="0"><tr>{@tableHtml}</tr></table></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0].firstChild.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildChildren:function A(){var B=this.buildConfig;if(!B){this.buildConfig={};B=this.buildConfig;}B.target=this.target;return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.HBox","mstrmojo._HasBuilder","mstrmojo._CanMeasureChildren");function D(){return(this.renderMode!=="scroll")?this._super():true;}function C(){if(!this.hasRendered){return ;}var F=this.children||[],E=F.length-1;for(E;E>=0;E--){if(F[E].refresh){F[E].refresh();}}}mstrmojo.DocSection=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren],{scriptClass:"mstrmojo.DocSection",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSection" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},postBuildRendering:D,childRenderOnAddCheck:D,refresh:C,getWidth:function A(){return this._super(1);}});mstrmojo.DocSectionHoriz=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder,mstrmojo._CanMeasureChildren],{scriptClass:"mstrmojo.DocSectionHoriz",postBuildRendering:D,childRenderOnAddCheck:D,refresh:C,getHeight:function B(){return this._super(1);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(E){this._super(E);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}var D=["mstrmojo-ui-MenuPopup"],F=C.cssClass;if(F){D.push(F);}if(C.hasToggleItem){D.push("hasToggleItem");}mstrmojo.css.addWidgetCssClass(this,D);this.addChildren(C.contents);},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,allowHTML:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return this.allowHTML?H[G.itemField]:mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,adjustSize:function(){var G=this.opener,F=this.domNode;if(G&&G.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(G&&G.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}this.adjustSize();},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.url","mstrmojo.DocTextfield");var I=mstrmojo.dom,K=mstrmojo.css,L=1,Q=2,A=3,N=4,P=5,E=6,B=1,D=["","CaptionOnly","IconOnly","IconLeft","IconRight","IconTop","Custom"];var M=[];M[L]=M[Q]=M[E]={minsp:0,mincs:0};M[A]=M[N]={minsp:10,mincs:5};M[P]={minsp:4,mincs:5};function F(V,S,X,R,T){var Y=I.position(V),U=I.position(V.parentElement),W=V.style;R=R||{};R={t:R.t||0,r:R.r||0,b:R.b||0,l:R.l||0};R.h=U.h-R.t-R.b;R.w=U.w-R.l-R.r;if(T){if(Y.h>R.h){W.height=R.h+"px";}if(Y.w>R.w){W.width=R.w+"px";}Y=I.position(V);}if(S){W.top=((R.h-Y.h)/2+R.t)+"px";}if(X){W.left=((R.w-Y.w)/2+R.l)+"px";}}function J(V,W,T){var S=document.createElement("img"),R=S.style;V.appendChild(S);I.attachEvent(S,"load",function(){var X=R.display;R.display="block";F(S,true,true);R.display=X;},true);S.className=T;var U=this.model.getDataService();S.src=(U&&U.getDocImage&&U.getDocImage(W))||W;}mstrmojo.DocButton=mstrmojo.declare(mstrmojo.DocTextfield,null,{scriptClass:"mstrmojo.DocButton",pressed:false,markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocButton {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocButton-Container" mstrAttach:click,mousedown><div class="mstrmojo-DocButton-IconNode"></div><div class="mstrmojo-DocButton-ValueNode" style="{@valueNodeCssText}">{@v}</div></div><div class="mstrmojo-DocButton-EffectOverlay"></div>{@buttonNodeMarkup}</div>',markupSlots:{iconNode:function(){return this.domNode.firstChild.firstChild;},valueNode:function(){return this.domNode.firstChild.lastChild;},buttonContainerNode:function(){return this.domNode.firstChild;}},markupMethods:{onpressedChange:function(){var R=!!this.pressed,U=this.defn,T=this.domNode,S=this.fmts;K.toggleClass(T,"pressed",R);this.setBackgroundColor();this.valueNode.style.color=R?U.fhlc:(S.color||"");},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},formatHandlers:{domNode:["T","z-index","D","B","P","background-color"],valueNode:["font","fx","color","white-space","overflow"]},setBackgroundColor:function H(){this.domNode.style.backgroundColor=(!!this.pressed)?this.defn.bhlc:(this.fmts["background-color"]||"");},getAnchor:function O(){return this.domNode;},getDPI:function C(){return this.model.dpi;},buildRendering:function G(){this._super();var S=this.defn,j=this.domNode,V=this.buttonContainerNode,g=this.iconNode,m=this.valueNode,d=parseInt((S&&S.dpst)||1,10),e="px";K.toggleClass(j,D[d],true);j.onselectstart=j.ondragstart=function(){return false;};var b=this.getFormats(),X=parseInt(K.getComputedStyle(V).borderWidth,10)*2;if(isNaN(X)){X=0;}var Z=parseFloat(b.width)-X,k=parseFloat(b.height)-X,W=M[d],a=W.minsp,o=W.mincs,c,Y=g.style,f=m.style;function U(p,q){Y.width=p+e;Y.height=q+e;}var n=V.style;n.height=k+e;n.width=Z+e;switch(d){case P:var T=this.getDPI(),R=k+K.getBorderWidths(b["border-width"],T).h+K.getPaddings(b.padding,T).h;c=Math.max(0,Math.min(k-a-o,R*0.6));U(Z,c);F(g,false,true);F(m,true,false,{t:c+a},true);break;case A:case N:c=Math.max(0,Math.min(k,Z-a-o));U(c,c);F(g,true,false);f[(d===A)?"left":"right"]=(c+a)+e;F(m,true,false);break;case L:F(m,true,false);break;case Q:case E:break;}if(B===parseInt(S.fe,10)){K.addClass(j,"gloss");}J.call(this,g,mstrmojo.url.getFullPath(S.nmurl),"normal");J.call(this,g,mstrmojo.url.getFullPath(S.hlurl||S.nmurl),"hilight");var l=document.createElement("div");K.addClass(l,"mstrmojo-DocButton-IconMaskNode");g.appendChild(l);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.StackContainer");mstrmojo.TabContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.TabContainer",markupString:'<div id="{@id}" class="mstrmojo-tabcontainer {@cssClass}"><div class="mstrmojo-tabcontainer-tabs"></div><div class="mstrmojo-tabcontainer-stack"></div><div></div></div>',markupMethods:{onborderChange:function(){if(this.border){this.domNode.style.border=this.border;}},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{top:function(){return this.domNode.childNodes[0];},stack:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1];},bottom:function(){return this.domNode.childNodes[2];}},addChildren:function A(D,K,H){var G=this._super(D,K,H);var B=this.children,F=B.length;if(F>=2){var L,I,E;for(E=0;E<F;E++){var C=B[E],J=C&&C.slot;if(!L&&C.isStrip){L=C;}else{if(!I&&(!J||J==="stack")){I=C;}}if(L&&I){L.set("target",I);break;}}}return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.StackContainer");mstrmojo.MouseOverContainer=mstrmojo.declare(mstrmojo.StackContainer,null,{scriptClass:"mstrmojo.MouseOverContainer",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout></div>',doSwitch:true,mouseoverItem:null,mouseoutItem:null,init:function(A){this._super(A);if(this.setupSelectedItem){this.setupSelectedItem();}},markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},onmouseover:function(){if(this.doSwitch&&this.enabled){this.set("selected",this.mouseoverItem);}},onmouseout:function(){if(this.doSwitch){this.set("selected",this.mouseoutItem);}},preBuildRendering:function(){this.set("selected",this.mouseoutItem);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.FieldSet","mstrmojo.Table");var D=mstrmojo.hash,B=mstrmojo.num;var C=function(F){return D.copy(F,{scriptClass:"mstrmojo.ValidationTextBox",maxLength:6,dtp:4,min:0,max:100,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP},bindings:{m:F.modelBinding,value:function(){var G=this.m[this.pr];return G==null?"":this._PT2UserUnits(G).replace(/([\.,][1-9]{1,})0{1,}$/,"$1").replace(/\.$/,".0").replace(/,$/,",0");}},postCreate:function(){this.markupMethods=D.copy({onvalueChange:function(){this.inputNode.value=this.value;}},D.copy(this.markupMethods));},onValid:function(){this.m[this.pr]=this._UserUnits2PT(this.value);},_PT2UserUnits:function(G){return B.toLocaleString(B.convertToLocalUnits(B.toString(G),mstrApp.units));},_UserUnits2PT:function(G){return B.toLocaleString(B.toString(B.convertToUSUnits(G,mstrApp.units)));}});};var A=function(F,G){return{scriptClass:"mstrmojo.Label",text:F,slot:G};};mstrmojo.PaddingFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.PaddingFormatter",cssClass:"mstrmojo-PaddingFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){D.make(this.model,mstrmojo.Obj);}},init:function E(F){var G=mstrConfig.unitsLabel||mstrApp.unitsLabel;this.children=[{scriptClass:"mstrmojo.FieldSet",alias:"padding",cssClass:"mstrmojo-FormatEditor-padding",legend:mstrmojo.desc(2883),children:[{scriptClass:"mstrmojo.HBox",cssClass:"paddingBox",children:[{scriptClass:"mstrmojo.Table",rows:2,cols:3,children:[A(mstrmojo.desc(3528),"0,0"),C({pr:"LeftPadding",slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(G,"0,2"),A(mstrmojo.desc(3526),"1,0"),C({pr:"TopPadding",slot:"1,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(G,"1,2")]},{scriptClass:"mstrmojo.Table",rows:2,cols:3,children:[A(mstrmojo.desc(3529),"0,0"),C({pr:"RightPadding",slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(G,"0,2"),A(mstrmojo.desc(3527),"1,0"),C({pr:"BottomPadding",slot:"1,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(G,"1,2")]}]}]}];this._super(F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Table","mstrmojo.SelectBox","mstrmojo._CanValidate","mstrmojo.MetricSelectorUtility");var D=mstrmojo.MetricSelectorUtility,K=mstrmojo.validation,G=mstrmojo.expr,E=mstrmojo.num,N=D.OP,F=[{n:mstrmojo.desc(2795,"Equals"),v:N._EQUALS},{n:mstrmojo.desc(2796,"Does not equals"),v:N._NOT_EQUALS},{n:mstrmojo.desc(521,"Greater than"),v:N._GREATER},{n:mstrmojo.desc(522,"Greater than or equal to"),v:N._GREATER_EQUAL},{n:mstrmojo.desc(523,"Less than"),v:N._LESS},{n:mstrmojo.desc(524,"Less than or equal to"),v:N._LESS_EQUAL},{n:mstrmojo.desc(519,"Between (enter value1;value2)"),v:N._BETWEEN},{n:mstrmojo.desc(614,"Not between (enter value1;value2)"),v:N._NOT_BETWEEN},{n:mstrmojo.desc(898,"In (enter value1;value2; ...;valueN)"),v:N._IN},{n:mstrmojo.desc(2394,"Not In (enter value1;value2; ...;valueN)"),v:N._NOT_IN},{n:mstrmojo.desc(2202,"Is null"),v:N._IS_NULL},{n:mstrmojo.desc(2203,"Is not null"),v:N._IS_NOT_NULL}],L=F.slice(0,10),J="padding:2px 2px 2px 2px",H=F.slice(10,12);var C=function(Z,S,T,V,U){var W;if(U===2){return S;}var a=String(Z).split(";"),X=K.STATUSCODE.INVALID_VALIDATOR,R=K.STATUSCODE.VALID;if(V&&a&&a.length>1){S.code=X;}else{for(W=0;W<a.length;W++){var Y=parseFloat(a[W],10);if(isNaN(Y)||(T&&((a[W].match(/^\d+(\.\d+)?%$/)===null&&a[W].match(/^\d+(\.\d+)?$/)==null)||Y<0||Y>100))||(!T&&a[W].match(/\d+$/)===null)){S.code=X;}if(S.code!==R){break;}}}if(S.code!==R){S.msg=mstrmojo.desc(6103,"Please fix any invalid data");}return S;};var M=function(R){R=parseFloat(R);return isNaN(R)?"54px":((R*72/16)+"pt;");},Q=function(T){if(T.hasRendered){var S=T.domNode.style;S.font=T.font;S.width=M(S.fontSize);}else{var R=T.font.match(/[^\s]*?pt/)||[];T.cssText=T.cssText+" font:"+T.font+"; width:"+M(R[0]);}},I=function(R){if((R>=8&&R<=16)||(R>=23&&R<=25)){return false;}return true;};mstrmojo.MetricQualification=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.MetricQualification",cssClass:"qs",cssText:"width:100%",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},getClientHeight:function P(){return this.domNode.clientHeight+2;},rows:1,cols:4,layout:[{cells:[{cssText:"width:100%"},{cssText:"width:56px"},{cssText:"width:56px"},{cssText:"width:18px"}]}],init:function(R){if(this._super){this._super(R);}this._init();},_init:function(T){var S;switch(this.qua){case 0:this.low=(this.da&&this.da.low)||0;this.high=(this.da&&this.da.high)||0;break;case 1:case 2:this.low=1;this.high=(this.da&&this.da.cnt)||0;break;case 3:case 4:this.low=0;this.high=100;break;}if(T){this.cs=[];this.f=this.ft=null;}var V=D.getOpIdxByfunc(this.f,this.ft),U=I(this.dt)?N._GREATER_EQUAL:N._IS_NULL;this.set("opId",(V==-1)?U:V);var R=(this.cs&&this.cs.length>0)?E.toLocaleString(this.cs[0].v):"";if(this.opId===N._IN||this.opId===N._NOT_IN){for(S=1;S<this.cs.length;S++){R+=";"+E.toLocaleString(String(this.cs[S].v));}}else{this.set("cs2",(this.cs&&this.cs.length>1)?E.toLocaleString(this.cs[1].v):"");}this.set("cs1",R);this.vldTbL.validate();this.vldTbH.validate();this.changeQual=false;},updateData:function B(R,S){this.da=R;this.updateExpr(S);},updateExpr:function A(R){if(R){this.cs=R.cs;this.f=R.f;this.ft=R.ft;this.qua=R.qua;}this._init();},onquaChange:function O(R){this._init(true);this.func.items=(this.qua!==0)?L:I(this.parent.dt)?F:H;this.func.refresh();this.changeQual=true;this.onchange();},children:[{slot:"0,0",alias:"func",scriptClass:"mstrmojo.SelectBox",cssText:"width:100%",size:1,bindings:{sv:"this.parent.opId",font:"this.parent.font"},onfontChange:function(){if(this.hasRendered){this.domNode.style.font=this.font;}else{this.cssText="width:100%;font:"+this.font;}},onsvChange:function(){if(this.sv!==null&&this.sv!==undefined){this.set("selectedItem",{v:this.sv});}},postCreate:function(){if(mstrmojo.dom.isIE){this.itemDisplayField="n";this.showItemTooltip=true;}this.items=(this.parent.qua!==0)?L:I(this.parent.dt)?F:H;},onchange:function(){var S=this.parent,T=this.selectedItem;if(T&&T.v!==null&&T.v!==undefined){var R=D.getIncludeByOp(T.v);S.include=R;if(S.parent&&R!==S.parent.include){S.changeInclude=true;}else{S.changeInclude=false;}S.set("opId",T.v);}if(mstrApp.isMobile&&(T.v===N._IS_NULL||T.v===N._IS_NOT_NULL)){if(S.onchange){S.onchange();}}}},{slot:"0,1",alias:"vldTbL",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:G.DTP.VARCHAR,constraints:{trigger:K.TRIGGER.ALL,validator:function(R){var S={id:this.id,code:K.STATUSCODE.VALID,msg:""},T=this.parent;C(R,S,(T.qua===3||T.qua===4),(T.opId!==8&&T.opId!==9),(T.numFmts&&T.numFmts.cat));return S;}},bindings:{visible:"this.parent.opId!=10&&this.parent.opId!=11",value:"this.parent.cs1",font:"this.parent.font"},onfontChange:function(){Q(this);},onValid:function(){var S=this.parent,R=this.domNode;S.set("cs1",this.value);if(R&&R.value.length>6){R.title=R.value;}else{if(R){R.title="";}}},onvisibleChange:function(){if(!this.visible){this.parent.set("cs1","");}},onkeyup:function(S){var R=S.hWin,V=S.e||R.event,U=this.parent,T=S.src.domNode;if(V.keyCode===13&&U.apply&&U.apply.enabled){U.apply.onclick();}}},{slot:"0,2",alias:"vldTbH",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:G.DTP.VARCHAR,constraints:{trigger:K.TRIGGER.ALL,validator:function(R){var S={id:this.id,code:K.STATUSCODE.VALID,msg:""},T=this.parent;C(R,S,(T.qua===3||T.qua===4),(T.opId!==8&&T.opId!==9),(T.numFmts&&T.numFmts.cat));return S;}},bindings:{visible:"this.parent.opId ==7 ||this.parent.opId ==6",value:"this.parent.cs2",font:"this.parent.font"},onfontChange:function(){Q(this);},onValid:function(){this.parent.set("cs2",this.value);var R=this.domNode;if(R&&R.value.length>6){R.title=R.value;}else{if(R){R.title="";}}},onvisibleChange:function(){if(!this.visible){this.parent.set("cs2","");}},onkeyup:function(S){var R=S.hWin,U=S.e||R.event,T=this.parent;if(U.keyCode===13&&T.apply&&T.apply.enabled){T.apply.onclick();}}},{slot:"0,3",alias:"apply",title:mstrmojo.desc(2164,"Apply"),scriptClass:"mstrmojo.Button",cssClass:"icn apply",bindings:{enabled:"(!this.parent.vldTbL.visible ||!this.parent.vldTbL.validationStatus.code)&& (!this.parent.vldTbH.visible||!this.parent.vldTbH.validationStatus.code)"},onclick:function(){var T=this.parent,W=(T.qua===D.Q._PT||T.qua===D.Q._PB),R;T.cs=[];var U=function(X){return X+((W&&!String(X).match(/^\d+%$/))?"%":"");};var S=function(X,Y){return((X===2||X===3)&&Y===0)?14:5;};if(T.opId===N._IN||T.opId===N._NOT_IN){var V=String(T.cs1).split(";");for(R=0;R<V.length;R++){if(!mstrmojo.string.isEmpty(V[R])){T.cs.push({dtp:5,v:U(V[R])});}}}else{if(T.vldTbL.visible){T.cs.push({dtp:S((T.numFmts&&T.numFmts.cat),T.qua),v:U(T.cs1)});}if(T.vldTbH.visible){T.cs.push({dtp:S((T.numFmts&&T.numFmts.cat),T.qua),v:U(T.cs2)});}}if(T.onchange){T.onchange();}if(T.makeSelection){T.makeSelection();}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._ListSelections","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var Q=mstrmojo.dom,C=mstrmojo.css,R=mstrmojo.hash,K=mstrmojo.all,c=mstrmojo._HasMarkup,d="px";var D={},J=false,Z;function b(){var n={mousedown:["touchstart","mousedown"],mouseup:["touchend","mouseup"],mousemove:["touchmove","mousemove"]},m;for(m in n){D[m]=J?n[m][0]:n[m][1];}}function k(n){if(this.dragging){return ;}this._moveCnt++;if(this._moveCnt>this.mousemoveBuffer){var m=document.body;Q.detachEvent(m,"mousemove",this._mousemoveCallback);Q.detachEvent(m,"mouseup",this._cancelCallback);this.initDrag(n);}}function f(n){if(this.dragging){return ;}this._moveCnt++;if(this._moveCnt>this.mousemoveBuffer){var m=document.body;Q.detachEvent(m,"touchmove",this._touchmoveCallback);Q.detachEvent(m,"touchend",this._cancelCallback);if(Z){window.clearTimeout(Z);}this.initDrag(n);}}function H(p){var m=document.body,o=J?"_touchmoveCallback":"_mousemoveCallback";Q.detachEvent(m,D.mousemove,this[o]);Q.detachEvent(m,D.mouseup,this._cancelCallback);if(Z){window.clearTimeout(Z);}var n=this.afterDragCancel;if(n){n.call(this.target,p);}}function G(r){J=true;b();Q.preventDefault(window,r);if(this.dragging){return true;}var o=this.target.id,p=document.body,n=r&&r.touches&&r.touches[0]||r;if(!this._touchmoveCallback){this._touchmoveCallback=function(t){f.call(K[o].dnd,t&&t.touches&&t.touches[0]||t);return true;};}this._moveCnt=0;this.startE=R.copy(n);Q.attachEvent(p,"touchmove",this._touchmoveCallback);if(!this._cancelCallback){this._cancelCallback=function(t){H.call(K[o].dnd,n);return true;};}Q.attachEvent(p,"touchend",this._cancelCallback);var q=this,m=n;m.type=m.name="contextmenu";Z=window.setTimeout(function(){var v=q.target,w=v&&v.docSelector,u=w&&w.parent;Q.detachEvent(p,"touchmove",this._touchmoveCallback);Q.detachEvent(p,"touchend",this._cancelCallback);if(u){u.raiseEvent(c.newDomEvent("contextmenu",window,m));}},1000);return false;}function e(o){J=false;b();Q.preventDefault(window,o);if(this.dragging){return true;}var m=this.target.id,n=document.body;if(!this._mousemoveCallback){this._mousemoveCallback=function(p){k.call(K[m].dnd,p);return true;};}this._moveCnt=0;this.startE=R.copy(o);Q.attachEvent(n,"mousemove",this._mousemoveCallback);if(!this._cancelCallback){this._cancelCallback=function(p){H.call(K[m].dnd,p);return true;};}Q.attachEvent(n,"mouseup",this._cancelCallback);return false;}function E(n){var m=this.duringDrag;if(m){m.call(this.target,n);}return true;}function N(o){this.dragging=false;var m=document.body;Q.detachEvent(m,D.mousemove,this._dragCallback);Q.detachEvent(m,D.mouseup,this._dragEndCallback);var n=this.afterDragEnd;if(n){n.call(this.target,o);}return true;}function V(){if(this._mousemoveCallback){Q.detachEvent(document.body,"mousemove",this._mousemoveCallback);delete this._mousemoveCallback;}if(this._touchmoveCallback){Q.detachEvent(document.body,"touchmove",this._touchmoveCallback);delete this._touchmoveCallback;}if(this._cancelCallback){Q.detachEvent(document.body,"mouseup",this._cancelCallback);Q.detachEvent(document.body,"touchup",this._cancelCallback);delete this._cancelCallback;}if(this._dragCallback){Q.detachEvent(document.body,"mousemove",this._dragCallback);Q.detachEvent(document.body,"touchmove",this._dragCallback);delete this._dragCallback;}if(this._dragEndCallback){Q.detachEvent(document.body,"mouseup",this._dragEndCallback);Q.detachEvent(document.body,"touchmove",this._dragEndCallback);delete this._dragEndCallback;}}mstrmojo.DnDComponent=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DnDComponent",isDragging:false,initD:null,startE:null,afterDragStart:null,duringDrag:null,afterDragEnd:null,target:null,mousemoveBuffer:1,init:function U(m){R.copy(m,this);},initDrag:function j(q){this.dragging=true;var n=this.target.id,p=document.body;var r=this._dragCallback;if(!r){r=this._dragCallback=function(t){if(J){t=t&&t.touches&&t.touches[0]||t;}return E.call(K[n].dnd,t);};}Q.attachEvent(p,D.mousemove,r);var m=this._dragEndCallback;if(!m){m=this._dragEndCallback=function(t){if(J){t=t&&t.touches&&t.touches[0]||t;}return N.call(K[n].dnd,t);};}Q.attachEvent(p,D.mouseup,m);var o=this.afterDragStart;if(o){o.call(this.target,q);}this._dragCallback(q);}});function Y(m){this.getUnit=function n(){var o=m.items.length;return o>1?m._effLen/(o-1):1;};this.calcMinMax=function(q,o){var r=Math.round((q/m.unit+o/m.unit)/2);return{min:r,max:r};};this.preUpdateThumb=function(){m.start=Math.min(m.min*m.unit,m._effLen)+d;m.sdCssText=m.orCfg.posCssP+":"+m.start+";";};this.updateThumb=function(){m.containerNode.style[m.orCfg.posCssP]=m.start=Math.min(Math.round(m.min*m.unit),m._effLen)+d;};return this;}function h(m){this.getUnit=function(){return m._effLen/m.items.length;};this.calcMinMax=function(p,o){return{min:Math.floor(p/m.unit+0.5),max:Math.floor(o/m.unit-0.5)};};function n(){var o=m.min,q=m.unit;var r=m.start=(o*q)+d;var p=m.length=Math.max(Math.round((m.max-o+1)*q-m.gap),0)+d;return{st:r,len:p};}this.preUpdateThumb=function(){var p=m.orCfg,o=n();m.sdCssText=p.posCssP+":"+o.st+";"+p.lenCssP+":"+o.len+";";};this.updateThumb=function(){var p=m.orCfg,o=n(),q=m.containerNode.style;q[p.posCssP]=o.st;q[p.lenCssP]=o.len;};return this;}var F="<span>{@content}</span>";mstrmojo.Slider=mstrmojo.declare(mstrmojo.Container,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.Slider",markupString:'<div id="{@id}" class="mstrmojo-Slider {@cssClass} {@clsType} {@clsOrientation}" style="{@cssText}" ><div class="cont"><div class="bk" style="{@bkCssText}"></div><div class="sdc" style="position:absolute;{@sdcCssText}" mstrAttach:mouseout><div class="sd" style="{@sdCssText}"><div class="t1"></div><div class="t2"></div><div class="t3"></div></div></div></div></div>',sdCssText:"",cssClass:"sc",clsType:"sc2",clsOrientation:"sc-v",orCfg:null,typeHelper:null,_tooltip_pos:"TL",useRichTooltip:true,init:function g(m){this._super(m);if(m.isHoriz){this.orCfg={posCssP:"left",marginCssP:"marginLeft",lenCssP:"width",lenP:"clientWidth",opPosCssP:"top",thickP:"clientHeight",offsetP:"x"};this.clsOrientation=" sc-h";this._tooltip_pos=mstrmojo.tooltip.POS_BOTTOMLEFT;}else{this.orCfg={posCssP:"top",marginCssP:"marginTop",lenCssP:"height",lenP:"clientHeight",opPosCssP:"left",thickP:"clientWidth",offsetP:"y"};this._tooltip_pos=mstrmojo.tooltip.POS_TOPRIGHT;this.titleHeight=(m.docSelector.fmts.ttl&&m.docSelector.fmts.ttl.height)?parseInt(m.docSelector.fmts.ttl.height,10):0;}this._exRoom=this.thumbWidth;if(this.multiSelect){this._exRoom*=2;}if(m.multiSelect){this.typeHelper=new h(this);}else{this.clsType="sc1";this.typeHelper=new Y(this);}},markupSlots:{dndNode:function(){return this.domNode.firstChild;},bgNode:function(){return this.domNode.firstChild.firstChild;},sdcNode:function(){return this.domNode.firstChild.lastChild;},containerNode:function(){return this.domNode.firstChild.lastChild.firstChild;},frontNode:function(){return this.domNode.firstChild.lastChild.firstChild.firstChild;},thumbNode:function(){return this.domNode.firstChild.lastChild.firstChild.childNodes[1];},endNode:function(){return this.domNode.firstChild.lastChild.firstChild.lastChild;},tooltipNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:function(){this.synchronizeSlider();}},start:"50px",length:"30px",min:0,max:0,gap:1,ghost:null,thumbWidth:11,cssBkBW:1,dndNode:null,synchronizeSlider:function I(){var u=this.orCfg,t=u.lenCssP,o=this[t],m=parseInt(o,10),AA=this.hasRendered,x=this.titleHeight||0;var p=this._effLen=isNaN(m)?0:(m-this._exRoom-x);if(o){var z={};z[t]=Math.max(parseInt(o,10)-(2*this.cssBkBW),0)-x+d;var q={};q[t]=p+d;q[u.posCssP]=Math.round(this._exRoom/2)+d;q[u.opPosCssP]="0"+d;if(AA){R.copy(z,this.bgNode.style);R.copy(q,this.sdcNode.style);}else{this.bkCssText=C.getCssTextFromObj(z);this.sdcCssText=C.getCssTextFromObj(q);}}var AC=this.selectedIndices;if(!R.isEmpty(AC)){var w=this.items.length,r=-1,AB=-1,v;for(v=0;v<w;v++){if(AC[v]){if(r<0){r=v;}AB=v;}else{if(r>-1){break;}}}this.min=r;this.max=AB;}var n=this.typeHelper;this.unit=n.getUnit();if(AA){n.updateThumb();}else{n.preUpdateThumb();}},preBuildRendering:function A(){this.synchronizeSlider();},postBuildRendering:function T(){this._super();if(this.items.length>1){var m=this.dnd=new mstrmojo.DnDComponent({target:this});var n=this.id;this.__mouseDownEvt=function(o){Q.stopPropogation(window,o);e.call(K[n].dnd,o);return true;};Q.attachEvent(this.dndNode,"mousedown",this.__mouseDownEvt);if(Q.supportsTouches){this.__touchstartEvt=function(o){Q.stopPropogation(window,o);G.call(K[n].dnd,o);return true;};Q.attachEvent(this.dndNode,"touchstart",this.__touchstartEvt);}m.afterDragStart=this.initDrag;m.duringDrag=this.ondrag;m.afterDragEnd=this.ondrop;m.afterDragCancel=this.cancelDrag;}},initDrag:function j(r,m){m=m||window;var q=this.configureGhost(true),n=this.orCfg,p=this.dnd,o=p.startE;p.initD={tP:parseInt(this.start,10),sL:this._effLen,contL:q.containerNode[n.lenP],offset:Q.getMousePosition(o,m)[n.offsetP],td:Q.eventTarget(m,o)};},configureGhost:function a(n){var p=this.ghost;if(!p){var r=this.containerNode.cloneNode(true),q=r.childNodes;C.addClass(r,"gh");r.style.display="none";p=this.ghost={containerNode:r,frontNode:q[0],thumbNode:q[1],endNode:q[2]};this.sdcNode.appendChild(r);}var o=this.ghost.containerNode.style,m=this.orCfg;R.copyProps([m.posCssP,m.lenCssP],this.containerNode.style,o);if(n){o.display="block";}return p;},ondrag:function O(v,u){u=u||window;var w=this.dnd.initD,q=this.ghost.containerNode,AB,o,m,t=this.min,x=this.max,r=this.orCfg,n=r.lenCssP,AA=r.posCssP;var z=Q.getMousePosition(v,u)[r.offsetP]-w.offset;switch(w.td){case this.thumbNode:AB=Math.max(Math.min(w.tP+z,w.sL-w.contL),0);o=AB+w.contL;q.style[AA]=AB+d;var p=this.typeHelper.calcMinMax(AB,o);t=p.min;x=p.max;break;case this.frontNode:AB=Math.max(Math.min(w.tP+z,w.tP+w.contL),0);m=Math.max(Math.min(w.contL-z,w.tP+w.contL),0);q.style[AA]=AB+d;q.style[n]=m+d;t=Math.min(Math.floor(AB/this.unit+0.5),this.max);break;case this.endNode:m=Math.max(Math.min(w.contL+z,w.sL-w.tP),0);o=w.tP+m;q.style[n]=m+d;x=Math.max(Math.floor(o/this.unit-0.5),this.min);break;default:return ;}if(t!==this.min||x!==this.max){this.min=t;this.max=x;this.typeHelper.updateThumb();}this._updateTooltip();},ondrop:function X(){this.typeHelper.updateThumb();var q=this.ghost;if(q){q.containerNode.style.display="none";}this.hideTooltip();var r=this.dnd&&this.dnd.initD;if(this.makeSelection&&r){this.makeSelection({selItem:r.td});}var m=this.items;if(m&&m.length){var o=[],n;for(n=this.min;n<=this.max;n++){var p=m[n];if(p){o.push(n);}}this.select(o);}this.dnd.initD=null;},cancelDrag:function M(n,m){if(this.makeSelection){this.makeSelection({selItem:Q.eventTarget(m||window,this.dnd.startE)});}},showTooltip:function l(n,m){this.configureGhost(false);this._updateTooltip(n,m);this._super(n,m);},hideTooltip:function P(n,m){if(this.dnd&&this.dnd.dragging){return ;}this._super(n,m);},_updateTooltip:function S(){var u=this.orCfg,v={contentNodeCssClass:"sc-tooltip",refNode:this.domNode,posType:this._tooltip_pos},n=(this.ghost)?this.ghost.containerNode:this.containerNode;v[u.opPosCssP]=0;v[u.posCssP]=n.style[u.posCssP];v.content="";var r=this.items,p=r.length;if(r&&p){var m=(r[this.min]||r[0]),o=this.getItemTooltip(m),q=o;if(this.min!==this.max){var t=(r[this.max]||r[p-1]);q=mstrmojo.desc(146,"From:")+" '"+o+"' "+mstrmojo.desc(2665,"To:")+" '"+this.getItemTooltip(t)+"'";}v.content=F.replace(/\{@content\}/g,q);}this.set("richTooltip",v);},getItemTooltip:function W(m){var n=m?m.n:"";return"'"+(n.length>20?n.slice(0,20)+"...":n)+"'";},unrender:function B(n){this.ghost=null;this.hideTooltip();this.min=0;this.max=(this.items&&this.items.length-1)||0;var o=this.dndNode,p=this.__mouseDownEvt,m=this.__touchstartEvt;if(p&&o){Q.detachEvent(o,"mousedown",p);}if(m&&o){Q.detachEvent(o,"touchstart",m);}V.call(this);this._super(n);},onselectionChange:function L(){var m=this.selectedIndices,n=R.isEmpty(m);if(m){this.set("max",n?this.items.length-1:R.max(m,false,true));this.set("min",n?0:R.min(m,false,true));if(this.typeHelper){this.typeHelper.updateThumb();}}if(this.onchange){this.onchange();}}});mstrmojo.Slider.SINGLE_HANDLE_WIDTH=11;mstrmojo.Slider.SCROLLHANDLEWIDTH=11;}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(D.encodeHtmlString(I.ttp,true)||D.encodeHtmlString(I.n,true));},showTooltip:function G(Z,N){var Q=this;if(!Q.hasOpenTooltip&&!(Q._lastOpened&&Q._lastOpened.visible)){var f=E.eventTarget(N,Z),a=Q.getItemFromTarget(f),U=Q.getItemNodeFromTarget(f),h=Q.getTooltipText(a),P=Q.tooltipCss;if(!h||a.ttpDisabled){return ;}if(Q.showTooltipForLargeText){if(U.offsetWidth>=U.scrollWidth){return ;}}var g=E.position(U),Y,R,L,W="",X=Q.tooltipOffset,O=(a&&a.ctxt)||{};if(this.tooltipOrientation==="vertical"){Y=g.x+g.w/2;L=O.posType||C.POS_TOPCENTER;R=g.y+g.h+X;var M="mojo-theme-light vi-regular vi-tooltip-A";if(!O.posType){M+=" A-center";}Q.tooltipCss=F.copy({cssClass:M},P);}else{var K=E.windowDim(),V=40,b=g.x+g.w+X,J=g.x-X,d=J-V,I=K.w-(b+V),c="vi-regular vi-tooltip-",T;R=g.y;if(I>=d){Y=b;T=I;L=O.posType||C.POS_TOPLEFT;P.cssClass=c+"C "+P.rightCssClass;}else{Y=J;T=d;L=O.posType||C.POS_TOPRIGHT;P.cssClass=c+"D "+P.leftCssClass;}W="max-width: "+T+"px;";}if(Q.tooltipContrast){P.cssClass=P.cssClass+" contrast";}if(P&&P.getItemCssClass){P.cssClass=H.filter([P.cssClass,P.getItemCssClass(a)],function(e){return !!e;}).join(" ");}var S=Q.richTooltip=F.copy(Q.tooltipCss,{content:D.apply(Q.tooltipMarkup,{c:h,style:W}),top:R,left:Y,posType:L});if(Q.itemDisabled){S.cssClass+=" vi-warning";}if(O.hoverable){S.enableHover=true;}if(O.posType==="TL"){S.left=g.x;}S.keepArrowXPos=!!Q.keepArrowXPos;S.keepArrowYPos=!!Q.keepArrowYPos;this._super(Z,N);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui._HasScroller","mstrmojo.css");var B=mstrmojo.css;mstrmojo.ui.ColumnContainer=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnContainer {@cssClass}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.firstChild;}},markupMethods:{onnextChange:function A(){B.toggleClass(this.domNode,"hasNext",!!this.next);}},active:false,next:null,idx:undefined,updateColumnContainer:function D(){var E=this.next;if(E){E.updateColumnContainer();}},onactiveChange:function C(){B.toggleClass(this.domNode,"active",this.active);var E=this.next;if(E){E.updateColumnContainer();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui.PopupConfig","mstrmojo.css");mstrmojo.ui.editors.ToolbarPopup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.ToolbarPopup",popupConfig:null,anchorElement:null,autoCloses:false,locksHover:true,init:function B(C){this._super(C);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ToolbarPopup");this.popupConfig=new mstrmojo.ui.PopupConfig({isHostedWithin:false,hostProxyCssClass:(mstrApp&&mstrApp.getThemeClassName())||"",anchorElement:this.anchorElement});},open:function A(D,C){D.closePopup();this._super(D,C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.Box","mstrmojo.hash");var C=mstrmojo.css,F=mstrmojo.hash,B="mstrmojo-st-removeFilter";mstrmojo.express.ui.SubmenuEditor=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.express.ui.SubmenuEditor",contentScriptClass:"mstrmojo.Box",contentConfig:null,menuItemNode:undefined,contentNode:undefined,init:function E(G){this.children[1].scriptClass=G.contentScriptClass;F.copy(G.contentConfig||{},this.children[1]);this._super(G);this.children[0].text=this.text;this.contentNode.onSubmenuOpen=this.contentNode.onSubmenuOpen||mstrmojo.emptyFn;C.addWidgetCssClass(this,"mstrmojo-SubmenuEditor");},_set_xtab:function(H,G){this.contentNode.xtab=G;return true;},_set_cell:function(H,G){this.contentNode.cell=G;return true;},_set_visible:function(H,G){this.menuItemNode.set("visible",G);this.contentNode.set("visible",false);return true;},children:[{scriptClass:"mstrmojo.Widget",alias:"menuItemNode",markupString:'<div class="mstrmojo-MenuItem-text" mstrAttach:click><div class="mstrmojo-MenuItem-textNode">{@text}</div><div class="mstrmojo-MenuItem-arw"></div></div>',onclick:function(){var G=this.parent.contentNode;G.set("visible",!G.visible);}},{scriptClass:"mstrmojo.Box",alias:"contentNode",cssClass:"mstrmojo-SubmenuItem-content",visible:false,onSubmenuClosed:function D(){this.set("visible",false);mstrmojo.all[this.parent.parentID].close();},onvisibleChange:function A(){var G=this.visible;if(G){this.onSubmenuOpen();}C.toggleClass(document.getElementById(this.parent.parentID),B,G);}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui.editors._HostsControls","mstrmojo._HasLayout","mstrmojo.css");mstrmojo.ui.editors.controls.ControlGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui.editors._HostsControls,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.ControlGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},shouldPropagateEnabled:true,init:function A(B){this._super(B);mstrmojo.css.addWidgetCssClass(this,"ctrl-group");}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ui.editors.controls.ControlGroup,{onenabledChange:mstrmojo.Container.enabledMarkupMethod});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasOwnAvatar","mstrmojo.css","mstrmojo.dom");var E=mstrmojo.css,D=mstrmojo.dom;function F(K){var L=K.src.node,M=this.children.filter(function(N){return D.contains(N.domNode,L,true,this.domNode);});return M[0];}function J(K){var N=K.tgt,V=this.children,R=D.getMousePosition(N.e,N.hWin),Q,S,U,M,T,P,L=R.y;for(var O=V.length-1;O>=0;O--){U=V[O];Q=D.position(U.domNode);T=Q.h;M=Q.y;P=M+T/2;if(P<L&&(O===V.length-1||L<=M+T)){S=O;break;}else{if((O===0||M<L)&&L<=P){S=O-1;break;}}}return S;}function I(K){return K===-1?"top":"bottom";}mstrmojo.threshold.ThresholdRowPanel=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.threshold.ThresholdRowPanel",dropZone:true,draggable:true,restrictedToAxis:"y",avatarCssClass:"threshold-drag-avatar",getDragData:function H(K){return{row:F.call(this,K)};},createAvatar:function B(M,L){var K=L.src.data.row.domNode.cloneNode(true);K.style.left=D.position(this.domNode).x+"px";return K;},isDragValid:function G(K){var L=K.getCtxtDragData().row;return !(this.children.length===1||!L||L.draggableNode!==K.src.node)||this._super(K);},ondragstart:function(K){this._super(K);this.removeChildren(K.getCtxtDragData().row);},ondragmove:function A(M){var O=M.getCtxtDragData(),N=this.children,L=J.call(this,M);var K=O.lastRowIdx;if(K!==L){if(K!==undefined){E.removeClass(N[Math.max(K,0)].domNode,I(K));}E.addClass(N[Math.max(L,0)].domNode,I(L));O.lastRowIdx=L;}this._super(M);},ondragend:function C(L){var M=L.src.data,K=M.lastRowIdx;if(K!==undefined){E.removeClass(this.children[Math.max(K,0)].domNode,I(K));}this._super(L);this.parent.parent.model.moveThreshold(L.getCtxtDragData().row.idx,K+1);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom");var E=mstrmojo.dom,G=mstrmojo.css,D=mstrmojo.Button.newIconButton,A="mstrmojo-oivmSprite ",F=0,K=1,L=2,I={0:"inline",1:"above",2:"below"};function B(M){var N=mstrmojo.boxmodel.offset(M,document.body);return{left:N.left,top:N.top,width:M.offsetWidth,height:M.offsetHeight};}mstrmojo.OIVMDICPopup=mstrmojo.declare(mstrmojo.Popup,null,{scriptClass:"mstrmojo.OIVMDICPopup",autoCloses:false,cssClass:"inline",markupString:'<div dic="1" id={@id} class="mstrmojo-OIVMDICPopup {@cssClass}" style="{@cssText}" mstrAttach:keydown><div class="toolbar"></div><div class="dataInputControl"></div><div class="boxtip"></div></div>',markupSlots:{toolbarNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.children[1];},tipNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onheightChange:function(){this.domNode.style.height=this.height||"";},onwidthChange:function(){this.domNode.style.width=this.width||"";},ontopChange:function(){this.domNode.style.top=this.top||"";},onleftChange:function(){this.domNode.style.left=this.left||"";},oncssClassChange:function(){this.domNode.className="mstrmojo-OIVMDICPopup "+this.cssClass;}},setStyle:function(){var U=this.widget,b=U.dic,N=U.popupStyle,W=B(U.openerNode),V=this.domNode,Q=V.style,X=U.domNode.style,M=this.tipNode,O=b.wm?b.w:W.width,a=b.hm?b.h:W.height,T;this.set("cssClass",I[N]);if(N===F){for(T in W){Q[T]=W[T]+"px";}U.set("width",O-2);X.width=(O-8)+"px";X.height=(a>8)?(a-8)+"px":"auto";}else{if(N===K){var Z=O,R=W.left+W.width/2-21,Y=W.top,S=Y<76;Y=S?Y+W.height+15:Y-76;M.className=S?"boxtip up":"boxtip";Q.left=R+"px";Q.top=Y+"px";Q.width=U.domNode.scrollWidth+"px";Q.height="44px";Z=Z>100?(Z+70):200;var P=document.body.offsetWidth-R-Z-parseInt(G.getStyleValue(V,"paddingLeft"),10)-parseInt(G.getStyleValue(V,"paddingRight"),10);P=P>0?0:P;Q.left=R+P+"px";M.style.left=15-P+"px";}else{if(N===L){Q.top=W.top+"px";Q.left=W.left+"px";Q.height=X.height;Q.width=X.width;}}}},onOpen:function C(){var M=this.widget,O=this.lastwidget;if(O!=M){if(O){this.removeChildren(O);}this.lastwidget=M;}if(M.hasRendered){M.unrender();}this.addChildren([M]);this.setStyle();var N=this;this.md=this.md||function(Q){var R=E.eventTarget(self,Q),P=E.findAncestorByAttr(R,"dic",true);if(!P&&!mstrmojo.all.mojoAlertx9){N.onBlur();E.preventDefault(self,Q);}};this.mw=this.mw||function(P){N.onBlur();};E.attachEvent(document,"mousedown",this.md);E.attachEvent(document,E.isFF?"DOMMouseScroll":"mousewheel",this.mw);},onBlur:function(){if(this.widget.popupStyle===F){this.onApply();}else{this.onCancel();}},onClose:function(){E.detachEvent(document,"mousedown",this.md);E.detachEvent(document,E.isFF?"DOMMouseScroll":"mousewheel",this.mw);this.toolbar.apply.set("enabled",false);this.set("hasInvalidData",false);if(this.widget&&this.widget.hasRendered){this.widget.lockPopup();}},onApply:function(){if(this.widget.applyChanges()!==false){this.close();}},onCancel:function(){if(this.widget&&this.widget.hasRendered){this.widget.cancelChanges();}this.close();},onkeydown:function J(N){var M=N.hWin,O=N.e||M.event;if(this.widget.applyOnEnter&&O.keyCode===13){this.onApply();}else{if(O.keyCode===27){this.onCancel();}}},enableApply:function(){this.toolbar.apply.set("enabled",true);},preBuildRendering:function H(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}if(this._super){return this._super();}else{return true;}},onhasInvalidDataChange:function(){var M=this.invalidCurtain;if(!M){M=this.invalidCurtain=document.createElement("div");M.className="mstrmojo-fullscreen-curtain";document.body.appendChild(M);}M.style.display=this.hasInvalidData?"block":"none";},children:[{scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"toolbar",children:[D(mstrmojo.desc(134,"Apply"),A+"tbApply greyed",function(){this.parent.parent.onApply();},null,{enabled:false,alias:"apply",onenabledChange:function(){G.toggleClass(this.domNode,"greyed",!this.enabled);}}),D(mstrmojo.desc(221,"Cancel"),A+"tbCancel",function(){this.parent.parent.onCancel();})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.css");var B=mstrmojo.css;mstrmojo.vi.ui.editors.EditorGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},showDivider:true,isNested:false,isContainer:false,init:function D(E){this._super(E);B.addWidgetCssClass(this,["mstrmojo-vi-EditorGroup","ctrl-group"]);},preBuildRendering:function A(){var E=[];if(this.showDivider){E.push("divide");}if(this.isContainer){E.push("container");}if(E.length){B.addWidgetCssClass(this,E);}return this._super();},getLayoutOffsets:function C(){return{h:0,w:this.isNested?0:18};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.Box","mstrmojo._HasTooltip");var D=mstrmojo.dom;mstrmojo.ui.LabelWithIconTooltip=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasTooltip],{scriptClass:"mstrmojo.ui.LabelWithIconTooltip",markupString:'<div id="{@id}" class="mstrmojo-IconLabel {@cssClass}" style="{@cssText}" ttp="{@tooltip}"><span class="mstrmojo-Label" style="">{@text}</span><span class="{@iconCss}" style=""></span></div>',markupSlots:{labelNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.lastChild;}},text:"",iconCss:"",tooltip:"",useRichTooltip:true,shouldShowTooltip:function B(F,H){var G=F.target||D.eventTarget(F.hWin,F.e);return G===this.iconNode;},getTooltipContent:function A(F){var G=F.target||D.eventTarget(F.hWin,F.e);return this.tooltip||G.getAttribute("ttp");},updateTooltipConfig:function C(G){var H=G.target||D.eventTarget(G.hWin,G.e),F=D.position(H);if(!this.richTooltip){this.richTooltip={posType:mstrmojo.tooltip.POS_TOPRIGHT,content:this.getTooltipContent(G),top:F.y+F.h,left:F.x+10,cssClass:"vi-regular vi-tooltip-D no-arrow",};}},showTooltip:function E(F,G){if(this.shouldShowTooltip(F,G)){this._super(F,G);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.string","mstrmojo.ListBase","mstrmojo._IsList");var G=",",F=mstrmojo.string;mstrmojo.TableLayoutList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.TableLayoutList",cssClass:"mstrmojo-TableLayoutList",styleCssClass:"",itemIdField:"v",allowUnlistedValues:false,tableLayoutCssStyle:"auto",multiSelect:false,titleItems:null,items:null,itemsPerRow:0,getLeftEndTitle:function E(H){return"";},getRightEndTitle:function D(H){return"";},getTitleRowMarkup:function A(){var L=this.titleItems;if(L){var K='<tr><td class="left_text">'+this.getLeftEndTitle(-1)+"</td>",H=L.length,J=0,I;for(J;J<H;J++){I=L[J];K+='<td class="item_title" title="'+I+'">'+I+"</td>";}K+='<td class="left_text">'+this.getRightEndTitle(-1)+"</td></tr>";return K;}return"";},_markupPrefix:function(){return'<table class="tableLayoutList" style="table-layout:'+this.tableLayoutCssStyle+'" cellspacing="0" cellpadding="0"><tbody>'+this.getTitleRowMarkup();},_markupSuffix:function(){return"</tbody></table>";},getItemMarkup:function(L,I){var K='<{@tag} class="item {@cls}" idx="{@idx}" title="{@en@n}" style="{@style}">{@en@n}</{@tag}>',H=this.getLeftEndTitle(I),J=this.getRightEndTitle(I),M=this.itemsPerRow;H='<td class="left_text" title="'+H+'">'+H+"</id>";J='<td class="right_text" title="'+J+'">'+J+"</id>";if(M>0){K=(I%M===0?"<tr>"+H:"")+"<td>"+K+"</td>"+((I+1)%M===0?J+"</tr>":"");}else{K='<td><div class="item_wrapper" idx="'+I+'">'+K+"</div></td>";if(!I){K="<tr>"+H+K;}else{if(I===this.items.length-1){K=K+J+"</tr>";}}}return K;},_getItemNode:function(H){var I=this.itemsNode,K=this.itemsPerRow,J=(this.titleItems?1:0)+((K>0)?parseInt(H/K,10):0),L=1+((K>0)?(H%K):H);return I.rows[J].cells[L].firstChild;},init:function(H){this._super(H);mstrmojo.css.addWidgetCssClass(this,this.styleCssClass);},onchange:function B(){var J,I=[];if(!this.multiSelect){J=this.selectedItem.v;}else{var H;for(H in this.selectedIndices){I.push(this.items[H].v);}J=I.join(this.delim||G);}this.set("value",J);},postBuildRendering:function C(){this._super();var H=[];if(this.multiSelect){var J=this.value.split(G),I;for(I=0;I<J.length;I++){H.push({v:J[I]});}}else{H.push({v:this.value});}this.setSelectedItems(H);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo._BindTargetChildren","mstrmojo.TabButton","mstrmojo.TabStripBase");var E=mstrmojo.array;function D(G,F){if(G.autoHide){G.set("visible",F);}}mstrmojo.TabStrip=mstrmojo.declare(mstrmojo.TabStripBase,[mstrmojo._BindTargetChildren],{scriptClass:"mstrmojo.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-TabStrip {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},autoHide:true,tabButtonClass:"TabButton",init:function C(F){if(F&&F.autoHide){F.visible=false;}this._super(F);},addTabButtons:function B(G,N){var J=this.targetProps||{},S=J.childTitle||"n",O=J.childColor||"tbc",R=this.tabButtonClass,K=[],Q=this.target,F=function(){Q.set("selected",this.target);};mstrmojo.requiresCls("mstrmojo."+R);for(var L=0,M=(G&&G.length)||0;L<M;L++){var P=G[L],I=P[S];if(I){var H=mstrmojo.insert({scriptClass:"mstrmojo."+R,title:I,backgroundColor:P[O],target:P,onclick:F});K.push(H);}}if(K.length){D(this,K.length);this.addChildren(K,N);}this.selectionChange();},removeTabButton:function A(G){var F=E.filter(this.children,function(H){return(H.target===G);},{max:1});if(F&&F[0]){D(this,F.length-1);this.removeChildren(F[0]);F[0].destroy();}},clearButtons:function(){var F=E.map(this.children,function(G){return G.id;});this.removeChildren();E.forEach(F,function(G){if(mstrmojo.all[G]){mstrmojo.all[G].destroy();}});}});})();(function(){mstrmojo.requiresCls("mstrmojo.rw.DocLayout","mstrmojo._Formattable","mstrmojo._HasWaitIcon","mstrmojo.dom");mstrmojo.DocLayout=mstrmojo.declare(mstrmojo.rw.DocLayout,[mstrmojo._Formattable,mstrmojo._HasWaitIcon],{scriptClass:"mstrmojo.DocLayout",formatHandlers:{domNode:["B","background-color","D","min-height","width"]},markupMethods:{onminHeightChange:function(){var N=this.minHeight;if(!N){var M=this.getFormats();N=M&&M["min-height"];}if(N){this.containerNode.style[mstrmojo.css.MINHEIGHT]=N;}}},getHeight:function E(){var M=0;mstrmojo.array.forEach(this.children,function(N){M+=N.getHeight();});return M||this.containerNode.offsetHeight;},getWidth:function I(){var M=this.children;return(M&&M.length)?M[0].getWidth():this.containerNode.offsetWidth;},preBuildRendering:function K(){var M=this.getFormats();if(M&&M["min-width"]!==undefined){M.width=M["min-width"];}this._super();},renderChildren:function L(){this._super();this.resizeOrReposition();},resizeOrReposition:function D(){var O=this.containerNode;if(!!this.defn.aw){var U=this.model.getAutoWidthIDs(),S=(U&&U.length)||0,Y=0,X=mstrmojo.all,P;if(!S){return ;}for(P=0;P<S;P++){Y=Math.max(this._getWidgetRightMostPosition(X[U[P]]),Y);}Y=Math.max(this.getLayoutMinWidth(),Y);if(Y>parseInt(this.getFormats().width,10)){O.style.width=Y+"px";}}var W=this.model.zt;if(mstrApp.isMobile&&W){var M=this.parent.domNode;if(M){var Q=this.model.controller,N=!!Q.orientation,Z=0,V=this.parent,R=V.getHeight()-V.fixedHeaderNode.clientHeight-V.fixedFooterNode.clientHeight;if(W===2){if(!Q.toolBarDelegated){R-=Q.getBottomToolBarHeight();}Z=Math.round(N?Math.max((R-this.getHeight()),0)/2:0)+"px";}O.style.margin=Z+" auto";var T=this;window.setTimeout(function(){Q.nudgeWidget(T.id,{left:O.offsetLeft,top:O.offsetTop});},0);}}},getLayoutMinWidth:function F(){return 0;},_getWidgetRightMostPosition:function F(M){return parseInt(M.getFormats().left,10)+((M.getDim&&M.getDim().w)||M.domNode.offsetWidth);},renderCtrlsInViewport:function C(){this._super();this.resizeOrReposition();},adjustAutoWidth:function H(M){if(!this.defn.aw||!M){return ;}var O=this.containerNode.style,N=parseInt(O.width,10)||0;var P=this;window.setTimeout(function(){var Q=P._getWidgetRightMostPosition(M);if(Q>N){O.width=Q+"px";}},1);},_getModelChildNodes:function B(P,O,S,N,R){var Q=this.model.getNonFixedSections(P,O);var M=Q.length;N=isNaN(N)?M:N;S=S||0;if(S>0||N<M){Q=Q.slice(S,S+N);}return R?{nodes:Q,total:M}:Q;},getChildren:function G(O,N,Q,M,P){return this._getModelChildNodes(O||this.node,N||false,Q,M,P);},getCaptureDimensions:function J(){var N=this.domNode,M;if(!this.domNode){return null;}M=mstrmojo.dom.position(N);M.w=Math.min(N.offsetWidth,M.w);M.h=Math.min(N.offsetHeight,M.h);return M;},preserveChildDomOrder:false,postBuildRendering:function A(){if(window.mstrMobileApp!==undefined){this.defn.lastOrientation=mstrMobileApp.getOrientation();}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.rw.DocSubsection","mstrmojo._CanGrowOrShrink","mstrmojo.boxmodel");mstrmojo.DocSubsection=mstrmojo.declare(mstrmojo.rw.DocSubsection,[mstrmojo._CanGrowOrShrink],{scriptClass:"mstrmojo.DocSubsection",postBuildRendering:function D(){var H=this.defn;if(H.hc||H.vc){var F=this.domNode,J=this.getFormats(),K=this.id,I=J.height,G=J.width;H.attachEventListener("resized",K,function(){var M=J.height,L=J.width;if(M){F.style.height=M;}if(L){F.style.width=L;}});H.attachEventListener("adjustSize",K,function(N){var M=F.style,L=M.height;if(H.hc&&M.width!==G){M.width=G;}if(H.vc&&M.height!==I){M.height=I;}this.performCanGrowCanShrink(this.children);N.heightReduced=(parseInt(L,10)>parseInt(M.height,10));});}return this._super();},onchildRenderingChange:function B(H){this._super(H);if(this.renderMode!=="scroll"){var F=this.parent.slot,G=F==="fixedHeaderNode"||F==="fixedFooterNode";this.performCanGrowCanShrink([(H&&H.src)||H],G);}},portalMaximized:function C(){var I=this.defn,J=I.vc,G=I.hc;if(!G&&!J){return{};}delete I.vc;delete I.hc;delete I.ck;var H=this.getFormats(),F=this.model,N=this.domNode,K=this;var L={HideIfEmpty:-1};var M=function(R,P,Q){var S=R.toLowerCase(),O=parseInt(N.style[S],10);P=((P===undefined)?O:Math.max(parseInt(P,10),O))+"px";if(H[S]!==P){H[S]=P;L[R]=mstrmojo.boxmodel.px2Inches(F.getZoomProps(),P);delete K["_fixed"+R];}Q=Q||"";L["Max"+R]=0;L["CanGrow"+Q]=0;L["CanShrink"+Q]=0;};if(J){M("Height",H.normHeight);}if(G){M("Width",H.normWidth,"Horizontal");}I.raiseEvent({name:"resized"});return L;},adjustSectionSize:function A(){var F=this.defn;if(F.vc||F.hc){return F.raiseEvent({name:"adjustSize"});}return null;},refresh:function E(){if(!this.hasRendered){return ;}var G=this.children||[],F=G.length-1;for(F;F>=0;F--){if(G[F].refresh){G[F].refresh();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocPanel","mstrmojo.css");var C=mstrmojo.css;mstrmojo.ExpressDocPanel=mstrmojo.declare(mstrmojo.DocPanel,null,{scriptClass:"mstrmojo.ExpressDocPanel",preBuildRendering:function B(){if(this.getFormats().overflow==="auto"){C.addWidgetCssClass(this,"scroll");}return this._super();},renderChildren:function A(){if(this._isFP()&&this.children){this.children.sort(function(E,D){var F=function(G){return(G&&G.defn&&G.defn.fmts&&G.defn.fmts.p_fmts&&G.defn.fmts.p_fmts["z-index"])||0;};return parseInt(F(E))>parseInt(F(D))?1:-1;});}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,getLayoutOffsets:function B(){return{h:2,w:2};},anchorSlot:"clickableNode",updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo.hash");var A="mstrmojo-TextBoxWithLabel";mstrmojo.TextBoxWithLabel=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextBoxWithLabel",label:"",rightLabel:"",cssDisplay:"inline",type:"text",markupString:'<div class="'+A+' {@cssClass}" style="{@cssText}"><span class="mstrmojo-TextBox-label">{@label}</span><input id="{@id}" class="mstrmojo-TextBox {@inputNodeCssClass}"  style="{@inputNodeCssText}" title="{@tooltip}" type="{@type}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur/><span class="mstrmojo-TextBox-label-right">{@rightLabel}</span></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild.nextSibling;},lblNode:function(){return this.domNode.firstChild;}}});mstrmojo.TextBoxWithLabel.prototype.markupMethods=mstrmojo.hash.copy({oncssClassChange:function(){var B=this.cssClass;this.domNode.className=A+(B?" "+B:"");},onlabelChange:function(){this.lblNode.innerText=this.label||"";}},mstrmojo.hash.copy(mstrmojo.TextBoxWithLabel.prototype.markupMethods));}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.TextBox");var A=mstrmojo.css,C=mstrmojo.dom;mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur></textarea>',maxLength:256,onkeydown:function B(K){var I=this.inputNode,J=this.value,E=this.maxLength,F=(J&&J.length)||0,M=K.e,L=M.keyCode;this.isDeleteKeys=L===8||L===46;this.isArrowKeys=L===37||L===38||L===39||L===40;if(E!==undefined&&E<=F){var G=I.selectionEnd,H=(G!==undefined)?(G-I.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!H){if(C.isIE7||C.isIE8||C.isIE9){I.blur();window.setTimeout(function(){I.focus();},1);}C.preventDefault(window,M);return false;}}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextArea,{oncssClassChange:function D(){A.addClass(this.domNode,this.cssClass||"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.Popup","mstrmojo.css");mstrmojo.ui.pathbar.PathPopup=mstrmojo.declare(mstrmojo.Popup,null,{scriptClass:"mstrmojo.ui.pathbar.PathPopup",autoCloses:true,locksHover:true,markupMethods:{onvisibleChange:function(){if(this.isOpen){mstrmojo.css.toggleClass(this.domNode,"open",this.visible);}},onleftChange:mstrmojo.Widget.leftMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod},cssClass:null,targetNode:null,offsetTop:0,offsetLeft:0,onOpen:function B(){var D=this,C=D.domNode,E=mstrmojo.dom.position(D.targetNode);C.style.top=(E.y+E.h+D.offsetTop)+"px";C.style.left=(E.x+D.offsetLeft)+"px";D.set("visible",false);D.isOpen=true;window.setTimeout(function(){D.set("visible",true);},100);mstrmojo.css.toggleClass(D.targetNode,"opened",true);},onClose:function A(){var C=this;window.setTimeout(function(){delete C.isOpen;mstrmojo.css.toggleClass(C.targetNode,"opened",false);},500);C.domNode.style.left="";},children:null});}());(function(){mstrmojo.requiresCls("mstrmojo.Popup","mstrmojo._HasBuilder","mstrmojo._IsAnchorable","mstrmojo.hash","mstrmojo.array","mstrmojo.dom");var M="mstrmojo-DocInfoWindow-tip",G=1,E=mstrmojo.dom,O=mstrmojo.hash,I=mstrmojo.array;$D=mstrmojo.dom,$A=mstrmojo.array;function H(V){var U=this.anchor,T=E.findWidget(U)||(U&&U.w),V=V||{};V.lockIW=T;return V;}function S(U){var T=U.model;return T.getLayoutDataCache(T.getCurrentLayoutKey())[U.psId];}function R(){var U=this.anchor,W=E.findWidget(U)||(U&&U.w),T=0;while(W){var V=W.className;if(V==="mstrmojo-DocInfoWindow"){T=mstrmojo.css.getStyleValue(W,"z-index");break;}W=W.parentNode||(W.domNode&&W.domNode.parentNode);}return T;}mstrmojo.DocInfoWindow=mstrmojo.declare(mstrmojo.Popup,[mstrmojo._HasBuilder,mstrmojo._IsAnchorable,mstrmojo._HasPopup],{scriptClass:"mstrmojo.DocInfoWindow",markupString:'<div class="mstrmojo-DocInfoWindow-wrapper @{waitState}"><div id="{@id}" class="mstrmojo-DocInfoWindow"></div><div class="'+M+' top"></div><div class="mstrmojo-DocInfoWindow-curtain" mstrAttach:click></div></div>',markupSlots:{infoNode:function(){return this.domNode.firstChild;},tipNode:function(){return this.domNode.childNodes[1];},curtainNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.firstChild;}},boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:M,anchorOffset:1,anchorOrientation:"h",anchor:null,boundary:null,closeOnClick:true,autoCloseLocks:null,autoScrollCloseLocks:null,tipNodeColor:"",ontouchstart:function J(){this.close();},close:function N(){if(this.isAutoCloseLocked()){return ;}if(mstrApp&&mstrApp.isOIVM&&mstrApp.isOIVM()&&mstrApp.modalOpenEditors){if(Object.keys(mstrApp.modalOpenEditors).length>0){return ;}}this.model.raiseEvent({name:"infoWindowClosed",psKey:this.psKey});if(this._super){this._super();}if(this.anchor&&this.anchor.lockInfoWinId&&mstrmojo.all[this.anchor.lockInfoWinId]){mstrmojo.all[this.anchor.lockInfoWinId].releaseLock(this);}this.clearAnchorHilites();E.detachEvent(document,E.isFF?"DOMMouseScroll":"mousewheel",this.mw);E.detachEvent(document,"scroll",this.mw);E.detachEvent(window,"resize",this._resizeHandler);},clearAnchorHilites:function C(){var T=mstrmojo.dom.findWidget(this.anchor);if(T&&T.clearHilites){if(T.parent&&T.parent.clearAllHighlights){T.parent.clearAllHighlights();}else{T.clearHilites(T.hiliteKey);delete T.hiliteKey;}}},prepareAnchor:function A(){if(this.children&&this.children[0]){var U=this.infoNode.style,V=this.children[0],W=V.dimNode||V.domNode,X=W.offsetWidth,T=W.offsetHeight;U.width=(X+2*G)+"px";U.height=(T+2*G)+"px";}},nudge:function L(){this.positionDialog();var T=this.containerNode.style;if(this.anchor){var U=parseInt(R.call(this),10);if(U){this.containerNode.style.zIndex=(U+2)+"";}}this.model.raiseEvent({name:"infoWindowRendered",id:this.id});},onRender:function F(){this.open(this.opener);},open:function K(a,V){var T=mstrmojo.all[this.psId];if(T){var X=T.defn.sfp,c=T.selectedIdx;if(X&&c!==0){T.switchToPanel(0,0);T.children[c].set("selected",false);}}if(this._super){this._super(a,H.call(this,V));}var W=function W(d){if(!d){return ;}if(d.defn&&d.defn.ifp){d.refresh();}I.forEach(d.children||[],function(e){W(e);});};W(T);if(mstrApp.isTablet&&mstrApp.isTablet()){var b=mstrmojo.touchManager,U=this.id,Z=this.domNode;this._tchHandler=b.attachEventListener("touchesBegin",U,function(f){if(this.isAutoCloseLocked()){return ;}var e=mstrmojo.dom.contains(Z,f.touch.target,true);var h=document.getElementsByClassName("heatmap-infobox"),d=(h&&h.length)||0,g,k=f.touch.target,j=false;for(g=0;g<d;g++){if(mstrmojo.dom.contains(h[g],k,true)){j=true;break;}}if(!e&&!mstrApp.hasOpenDialog()&&!j){this.closeOnTablet();}});}var Y=this;Y.mw=Y.mw||function(f){if(Y.isAutoScrollCloseLocked()){return ;}var d=E.eventTarget(self,f);if(Y.autoCloses&&!E.contains(Y.domNode,d,true,document.body)&&!(Y.isWithinParentWidget&&Y.isWithinParentWidget(d))){Y.close();}};Y._resizeHandler=function(d){Y.positionDialog(true);};E.attachEvent(document,E.isFF?"DOMMouseScroll":"mousewheel",Y.mw);E.attachEvent(document,"scroll",Y.mw);E.attachEvent(window,"resize",Y._resizeHandler);},getChildren:function D(){return[S(this)];},preBuildRendering:function B(){var V=S(this),U=V.defn.fmts;U.left=G+"px";U.top=G+"px";if(U.border){var T=U.border.split(" ");if(T.length>=3){this.tipNodeColor=T[2];}}if(this._super){this._super();}},postBuildRendering:function Q(){this.set("visible",true);if(this._super){this._super();}if(!this.closeOnClick){this.curtainNode.style.display="none";}},closeOnTablet:function P(){this.close();if(this._tchHandler){this._tchHandler.clear();}},postwaitStateChange:function(){var T=this.children[0],U=T.dimNode||T.domNode;if(!this.waitState&&!U){this.refresh();}},renderChildren:function(){if(!this.waitState){this._super();}},registerLock:function(T){var U=this.autoCloseLocks||[];if(I.indexOf(U,T.id)===-1){U.push(T.id);this.autoCloseLocks=U;}},releaseLock:function(T){I.removeItem(this.autoCloseLocks,T.id);},isAutoCloseLocked:function(){this.autoCloseLocks=I.filter(this.autoCloseLocks,function(T){return !!mstrmojo.all[T];});return this.autoCloseLocks.length>0;},openPopupMenu:function(U,T){this.openPopup(U,T);},registerScrollLock:function(T){var U=this.autoScrollCloseLocks||[];if($A.indexOf(U,T.id)===-1){U.push(T.id);this.autoScrollCloseLocks=U;}},releaseScrollLock:function(T){$A.removeItem(this.autoScrollCloseLocks,T.id);},isAutoScrollCloseLocked:function(){this.autoScrollCloseLocks=$A.filter(this.autoScrollCloseLocks,function(T){return !!mstrmojo.all[T];});return this.autoScrollCloseLocks.length>0;},destroy:function(){var T=mstrmojo.all[this.psId];if(T&&T.defn.iwpl===mstrmojo.DocInfoWindow.PLACEMENT.FIXED&&T.fmts){T.fmts.left=this._ifwfl+"px";T.fmts.top=this._ifwft+"px";}if(this._super){this._super();}}});mstrmojo.DocInfoWindow.PLACEMENT={AUTO:1,FIXED:2,ABOVE:3,BELOW:4,LEFT:5,RIGHT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.Popup","mstrmojo.dom");var B=mstrmojo.dom;var A="openXtabCellMenu";mstrmojo.XtabCellHoverPopup={cssClass:"mstrXtabCellHoverPopup",scriptClass:"mstrmojo.Popup",slot:"overlayNode",autoCloses:true,children:[{scriptClass:"mstrmojo.Button",alias:"btn",onmousedown:function(D){this.openPopup(true,D);B.stopPropogation(D.hWin,D.e);B.preventDefault(D.hWin,D.e);return false;},openPopup:function(F,D){var E=this.xtab[A]?this.xtab:mstrmojo.findAncestor(this.xtab,A);if(E){E.openXtabCellMenu({xtab:this.xtab,td:this.td,btn:this,cmPos:this.cmPos,lockIW:this.xtab,singleCellClick:F===true,evt:D});}this.domNode.oncontextmenu=function(G){B.stopPropogation(window,G);B.preventDefault(window,G);return false;};},closePopup:function(){var D=mstrmojo.findAncestor(this.xtab,A);if(D){D.closePopup();}}}],updatePopupConfig:function C(F){var G=F&&F.td,O=F&&F.xtab,D=this.btn;var H=this._lastTd;if(H!==G){D.closePopup();this._lastTd=G;}D.xtab=O;D.td=G;D.cmPos=F&&F.cmPos;if(!G||!O){return ;}var I=B.findAncestorByName(G.parentNode,"table",false,O.viewport),K=O.zones,N="",E;if(I){for(E in K){var L=K[E];if(L&&L.tableNode===I){N=L.slot;break;}}}var M=mstrmojo.boxmodel.offset(G,O.overlayNode),J=23;this.set("location",{left:0,top:M.top,width:Math.min(G.offsetWidth+M.left,O._pl),height:J});},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onlocationChange:function(){var D=this.location;if(!D){return ;}var E=this.domNode.style;E.left=(D.left+Math.max(D.width-20,0))+"px";E.top=D.top+(D.height?Math.round(D.height/2)-7:0)+"px";}}};}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.Popup","mstrmojo.MenuItem");var G="mstrFilterPanelMenu",L="mstrmojo.Box",E="mstrmojo-Menu-Box";var B=function(){var N=mstrmojo.all[G],M=N.fps;M.clearAllFilter();M.applyBufferedSlices();N.close();};var C=function(){var N=mstrmojo.all[G],M=N.fps;if(M&&M.applyBufferedSlices){M.applyBufferedSlices();}N.close();};var F=function(){H(false);};var I=function(){H(true);};var A=function(){var O=mstrmojo.all[G],N=O.fps,M=!O.autoSubmit;N.applyBufferedSlices();N.model.updateUnitFormat(N,1,{FormattingLayout:{CtlAutoSubmit:(M?1:0)}},{success:function(){var P=N.parent;O.set("autoSubmit",M);O.fps.defn.set("cas",M);P.buttonbar.applyNow.set("visible",!M);P.buttonbar.resetBtn.set("visible",!M);P.adjustFPHeight2Fit();mstrmojo.css.toggleClass(P.buttonbarNode,"hide",M);mstrmojo.css.toggleClass(P.toolbarNode,["cas"],!M);}},{params:{suppressData:true}});O.close();};function H(O){var P=mstrmojo.all[G],N=P.fps,U=mstrmojo.DocPortlet,M=O?U.ST_RESTORE:U.ST_MIN;if(!N||!N.children){return ;}var T=N.model,R=[];for(var S in N.children){var V=N.children[S];if(!V.children||!V.selected){continue;}for(var Q in V.children){var W=V.children[Q];if(typeof (W.defn.ttl)!=="undefined"){R.push(W.changeWindowState(M));}}}if(R.length){T.getDataService().submitUpdates(R,{},{preserveUndo:true,params:{suppressData:true}});}P.close();}function J(P,N,M){var O={scriptClass:"mstrmojo.MenuItem",text:P,cssClass:"mstrmojo-InteractiveButton",onclick:N,bindings:M};return O;}function K(P,N,M){M=M||{};M.pressed="mstrmojo.all['"+G+"'].autoSubmit";M.iconClass="this.pressed?'pressed':''";var O=J(P,N,M);O.onpressedChange=function(){if(this.domNode){mstrmojo.css.toggleClass(this.domNode,"pressed",this.pressed);}};return O;}mstrmojo.FilterPanelMenu=mstrmojo.registry.ref({id:G,slot:"popupNode",scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-Menu",shadowNodeCssClass:"mstrmojo-Menu-shadow",contentNodeCssClass:"mstrmojo-Menu-content",locksHover:true,autoSubmit:true,onOpen:function D(){var R=this.opener,Z=R&&R[this.slot],Y=mstrmojo.dom.position(Z),a=Y.y||0,T=this.cmPos,V,S,X;if(T){V=T.x;S=T.y-a;}else{var N=this.openerButton.domNode;X=mstrmojo.boxmodel.offset(N,Z);V=X.left;S=X.top+((N&&N.offsetHeight)||0);}var Q=mstrmojo.dom.windowDim(),O=this.domNode;var P=O.offsetHeight,U=Q.h-a;X=Math.max(0,S+P-U);this.set("top",S-X+"px");var W=O.offsetWidth,M=Q.w;X=Math.max(0,V+W-M);this.set("left",V-X+"px");this.set("autoSubmit",this.fps.isAutoApply());},children:[{scriptClass:L,bindings:{},cssClass:E,children:[J(mstrmojo.desc(15554,"Unset all filters"),B,{}),J(mstrmojo.desc(14820,"Apply Now"),C,{visible:"!mstrmojo.all['"+G+"'].autoSubmit",enabled:"mstrmojo.all['"+G+"'].fps.applyEnabled"})]},{scriptClass:L,cssClass:E,bindings:{},children:[J(mstrmojo.desc(8970,"Expand all"),I,{}),J(mstrmojo.desc(8971,"Collapse all"),F,{})]},{scriptClass:L,cssClass:E,bindings:{},children:[K(mstrmojo.desc(1996,"Auto-Apply changes"),A,{})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayoutViewer","mstrmojo._Formattable","mstrmojo._TouchGestures","mstrmojo._HasTouchScroller","mstrmojo.dom");function J(e){var f,V=this._newLinks,d=mstrmojo.hash.copy(V,this._allLinks),f=e?d:V;this._newLinks={};if(mstrMobileApp.isOnline()){return ;}var X=this.controller,W,a,Y=[],g=[],b;for(W in f){a=f[W];b=X.getLinkRequest(a);if(b){Y.push(b);g.push(a);}}var Z=Y.length;if(Z){var c=function(h){for(W=0;W<Z;W++){a=g[W];a.src.setLinkEnabled(h[W]);}};if(mstrApp.isHosted()){}else{this.model.getDataService().checkCachedLinkTargets(Y,{success:c,failure:mstrmojo.emptyFn});}}}function D(){var X=this.children,W,V;for(W=0,V=(X&&X.length)||0;W<V;W++){var Z=X[W],Y=Z.slot;if(Y){this.setSlotDimensions(Y,Z.height,Z.width);}}}mstrmojo.MobileDocLayoutViewer=mstrmojo.declare(mstrmojo.DocLayoutViewer,[mstrmojo._TouchGestures,mstrmojo._HasTouchScroller],{scriptClass:"mstrmojo.MobileDocLayoutViewer",layoutConfig:{h:{groupBy:"0",fixedHeaderNode:"auto",layout:"100%",fixedFooterNode:"auto",incFetchNode:"0"},w:{layout:"100%"}},formatHandlers:{domNode:["background-color"]},scrollerConfig:{vScroll:false,hScroll:false,bounces:false,showScrollbars:false},usesTouches:true,init:function O(V){this._super(V);this._newLinks={};this._allLinks={};},postBuildRendering:function T(){this._super();if(this.fixedFooterNode.clientHeight>0){D.call(this);}},preBuildRendering:function B(){this._super();this._scrollCssText="overflow:"+((!mstrmojo.dom.isWinPhone)?"hidden":"auto");var W=this.id,V=this.updateScroller;if(!this.afterScrollSubscr){this.afterScrollSubscr=this.docLayout.attachEventListener("afterScroll",W,function(){this.updateScroller();J.call(this);});this.model.attachEventListener("partialUpdate",W,V);}},mapID:null,setMapID:function I(V){this.mapID=V;},beforeViewHidden:function E(V){if(!this.mapID){return ;}var W=mstrmojo.all[this.mapID];if(W&&W.beforeViewHidden){W.beforeViewHidden(V);}this.mapID=null;},updateScrollerConfig:function R(){var W=this.scrollerConfig,Y=this.docLayout.containerNode;if(Y){var a=this.docLayout,X={start:0,end:Math.max(a.getWidth()-this.scrollboxWidth,0)},c={start:0,end:Math.max(a.getHeight()-this.scrollboxHeight,0)},V=(c.start!==c.end),Z=(X.start!==X.end),b;if(V||Z){b={x:X,y:c};}else{W.origin={x:0,y:0};}mstrmojo.hash.copy({scrollEl:this.scrollboxNode.firstChild,offset:b,vScroll:V,hScroll:Z,showScrollbars:false},W);if(!W.origin){W.origin=this._origin={x:0,y:0};}a.scrollBuffer=parseInt(mstrApp.rootView.getContentDimensions().h,10);}return this._super();},initScroller:function M(V){this._super(V);V.attachEventListener("scrollDone",this.id,function(W){this._origin={x:W.x,y:W.y};this.notifyScrollListeners(W);});},touchBegin:function N(W){var V=this.parent;if(V&&V.isAnimating&&V.isAnimating()){W.stop();return false;}return this._super(W);},shouldTouchBubble:function K(V){if(mstrmojo.dom.contains(this.scrollboxNode,V.target,true,this.domNode)){return this._super(V);}return true;},touchSwipeBegin:function L(X){if(this.shouldTouchBubble(X)){var W=this.parent,V=W.canScroll&&W.canScroll(X);if(V){this._parentScrolling=true;W.beginScroll(X);}return V;}this._super(X);},touchSwipeMove:function A(V){if(this._parentScrolling){this.parent.scroll(V);return ;}this._super(V);},touchSwipeEnd:function P(V){V.evt.handled=true;if(this._parentScrolling){delete this._parentScrolling;this.parent.endScroll(V);return ;}this._super(V);},touchTap:function S(){var V=this.controller;if(V&&V.viewTap){V.viewTap();}},renderChildren:function F(){this._super();this.updateScroller();},unrender:function Q(){delete this.scrollerConfig.origin;var V=this._scroller;if(V){delete V.origin;}if(this.subscr){mstrmojo.publisher.unsubscribe(this.subscr);delete this.subscr;}if(this.afterScrollSubscr){mstrmojo.publisher.unsubscribe(this.afterScrollSubscr);delete this.afterScrollSubscr;}this._super();},addLinkInfo:function H(W,V){this._newLinks[W]=V;},onRender:function C(){this._super();if(!this.subscr){var W=mstrmojo.publisher;this.subscr=W.subscribe(W.NO_SRC,W.CONNECTIVITY_CHANGED_EVENT,function(a){if(a){var X=this._allLinks,Y,Z;for(Y in X){Z=X[Y].src;if(!Z.linkEnabled){Z.setLinkEnabled(true);}}}else{J.call(this,true);}},this.id);}if((mstrApp.useBinaryFormat||mstrApp.isHosted())&&!mstrMobileApp.isOnline()){var V=this;window.setTimeout(function(){J.call(V);},100);}},setSlotDimensions:function U(c,b,Y){if(c==="layout"){var X=parseInt(this.height,10),W=this.fixedHeaderNode.clientHeight,a=this.fixedFooterNode.clientHeight,V=parseInt(b,10),Z=X-W-a;if(W+a>=X){b=0;}else{if(V!=Z){b=Z+"px";}}}this._super(c,b,Y);},getCaptureDimensions:function G(){return this.docLayout.getCaptureDimensions();}});}());(function(){mstrmojo.requiresCls("mstrmojo.GridBase","mstrmojo.Grid","mstrmojo.mstr.EnumDSSXMLObjectTypes");mstrmojo.XtabZone=mstrmojo.declare(mstrmojo.Grid,null,{scriptClass:"mstrmojo.XtabZone",markupString:'<div id="{@id}" class="mstrmojo-XtabZone" style="position:relative;{@cssText}"></div>',markupSlots:{gridContainerNode:function(){return this.domNode;}}});}());(function(){var G=1,B=2;mstrmojo.XtabCP=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.XtabCP",base:null,lookupBase:null,colWidths:null,forceAutoRowHeight:false,startIndexInContainer:0,updatedRows:null,preServeUpdatedRows:true,init:function M(N){mstrmojo.hash.copy(N,this);},initContent:function E(Q){this.startIndexInContainer=Q||this.startIndexInContainer||0;var P=this.base||[],O=P.show,N=P.items;this.rc=O&&N?N.length:0;this.colWidths=(O&&P.cws)||[];this.isDownloading=false;this.isDownloaded=true;this.invalidData=false;},isDataAvailable:function C(O,N){return !this.invalidData;},download:function A(P,O,N){if(!this.isDownloaded&&!this.isDownloading&&this.dataSource){this.isDownloading=true;this.dataSource.download(0,N);}},invalid:function F(){this.invalidData=true;this.isDownloading=false;this.isDownloaded=false;this.preServeUpdatedRows=true;if(this.gridData){this.oldGridData=this.gridData;this.oldBase=this.base;this.updatedRows={};}},getRowHeight:function D(){return this.gridData.rh;},getNumAutoHeightRows:function(){return this.forceAutoRowHeight?this.rc:0;},getAvailableRowsCount:function L(){return this.rc;},getUpdatedRows:function J(){return this.updatedRows;},getRowCells:function(j,O){var Z=this.base||[],V=Z.items||[],k=V[j]||[],X=k.items,m=this.lookupBase,c=this.interactiveCellsArray,l=this.gridData.css,q=this.gridData.gsi,d=q&&q.prop&&q.prop.cols&&q.prop.cols.mg,o=null,Y,g,U,n,u,T,h,S,W,R,f="-1";if(this.oldGridData){Y=this.oldBase;g=Y&&Y.items;U=g[j]&&g[j].items;}for(u=0,n=(X&&X.length)||0;u<n;u++){T=X[u];if(T){T.v=T.v||T.n;if(m&&!T._e){h=m[T.tui];S=T.fi;W=(h&&h.fs)||[];R=W[S]||W[0];T.ts=T.ts||R&&R.bftp;o=h&&h.es[T.idx];if(o){T.v=T.v||o.n;if(o.rv){T.rv=o.rv;}T._e=o;}}if(!T.css){var x=T.cni;if(x!==undefined){T.css=l[x].n;}else{T.css="";}}if(!T._d&&U&&this.preServeUpdatedRows){var Q=U[u];if(!Q||(Q.rs!==T.rs)){this.preServeUpdatedRows=false;this.updatedRows={};}else{if((Q.v&&T.v!==Q.v)){var w={};if(T.v!==Q.v){w.v=Q.v;}if(T.css!==Q.css){w.css=Q.css;}T._d=w;this.updatedRows[this.startIndexInContainer+j]=true;}}}T._gd=this.gridData._bidx||0;if(c){if(!O&&(T._ei===undefined||c[T._ei]!==T)){T._ei=c.push(T)-1;}}if(this.axis){T.axis=this.axis;}var p=T.pi,b=function b(AA,r,e){var z=AA&&AA[r];return z&&z.es[e];},a=function a(AB,z,AC,r,AA){var e=AB.items[z].items[AC];if(e){e.axis=e.axis||r;if(e._e===undefined){e._e=b(AB.show?m:AA,e.tui,e.idx);}}return e;};if(p){if(p.ri!==undefined&&p.ci!==undefined){if(T.axis===2&&d!==f){T._p=V[p.ri].items[u];}else{T._p=V[p.ri].items[p.ci];}}else{var v=this.gridData.ghs,N=this.gridData.gts,t=p.left,P=p.top;if(t){T._lp=a(v.rhs,t.ri,t.ci,G,N.row);}if(P){T._tp=a(v.chs,P.ri,P.ci,B,N.col);}}}}}return X;},getUnmergedCells:function H(S){var U=[],V=(this.base&&this.base.items)||[];if(S>V.length-1||S<0){return U;}var P=this.gridData.css,T=V[S].items[0],O=T&&T.pi,N=O&&O.ri,R=O&&O.ci;while(O&&N>-1&&R>-1){T=T._p||V[N].items[R];var Q={};mstrmojo.hash.copy(T,Q);if(!Q.css){Q.css=P[Q.cni].n;}Q.rs=T.rs-S+N;U.splice(0,0,Q);O=T&&T.pi;N=O&&O.ri;R=O&&O.ci;}return U;},getIndentPadding:function K(N){return N*14;},getCell:function I(N,O){var P=this.base.items;return P[N].items[O];}});}());(function(){mstrmojo.XtabVACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabVACP",cps:[],initContent:function G(L){this.startIndexInContainer=L||0;this.rc=0;this.type=0;this.colWidths=[];var J;for(J=0;J<this.cps.length;++J){var K=this.cps[J];K.initContent(this.startIndexInContainer+this.rc);this.rc+=K.rc;this.type|=K.type;var I=K.colWidths;if(I&&(I.length>this.colWidths.length)){this.colWidths=I;}}},getNumAutoHeightRows:function(){return this.cps[0].getNumAutoHeightRows();},getRowHeight:function C(){return this.cps[0].getRowHeight();},getRowCells:function(J,I){var K=0,L=this.cps[K],M;while(J>=L.rc){J-=L.rc;L=this.cps[++K];}if(this.renderingNewPage){L.updateCounter=0;this.renderingNewPage=false;}M=L.getRowCells(J,I);this.updateCounter=L.updateCounter;return M;},getUnmergedCells:function(I){var J=0,K=this.cps[J];while(I>=K.rc){I-=K.rc;K=this.cps[++J];}return K.getUnmergedCells(I);},getCell:function(I,K){var J=0,L=this.cps[J];while(I>=L.rc){I-=L.rc;L=this.cps[++J];}return L.getCell(I,K);},isDataAvailable:function D(L,K){var J=this._getCPs(L,K),I;for(I=0;I<J.length;++I){if(!J[I].isDataAvailable(L,K)){return false;}}return true;},getAvailableRowsCount:function F(){var K=0,I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];if(J.isDataAvailable()){K+=J.getAvailableRowsCount();}}return K;},_getCPs:function H(N,L){var J=0,M=this.cps[J],I=M&&M.startIndexInContainer,K=[];if(M){N-=I;L-=I;}while(M&&N>=M.rc){N-=M.rc;L-=M.rc;M=this.cps[++J];}while(M&&L>=M.rc){L-=M.rc;K.push(M);M=this.cps[++J];}if(M){K.push(M);}return K;},invalid:function E(){var I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];J.invalid();}this.updatedRows={};},getUpdatedRows:function A(){var I={},J;for(J=0;J<this.cps.length;++J){var K=this.cps[J];if(!K.preServeUpdatedRows){return{};}mstrmojo.hash.copy(K.getUpdatedRows(),I);}this.updatedRows=I;return I;},download:function B(N,M,I){var L=this._getCPs(N,M),J;for(J=0;J<L.length;++J){var K=L[J];K.download(N,M,I);}}});}());(function(){mstrmojo.XtabHACP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabHACP",cps:[],initContent:function G(J){this.startIndexInContainer=J||0;this.type=0;this.colWidths=[];var I;for(I=0;I<this.cps.length;++I){this.cps[I].initContent(this.startIndexInContainer);this.type|=this.cps[I].type;var H=this.cps[I].colWidths;if(H){this.colWidths=this.colWidths.concat(H);}}this.rc=Math.max(this.cps[0].rc,this.cps[1].rc);},getNumAutoHeightRows:function(){return Math.max(this.cps[0].getNumAutoHeightRows(),this.cps[1].getNumAutoHeightRows());},getRowHeight:function C(){return this.cps[0].getRowHeight();},getRowCells:function(J,I){var N=this.cps,K=[],H=N.length,M;for(M=0;M<H;M++){if(N[M].getAvailableRowsCount()>0&&N[M].rc>J){var L=N[M].getRowCells(J,I);if(L){K=K.concat(L);}}}return K;},getUnmergedCells:function(H){return this.cps[0].getUnmergedCells(H);},isDataAvailable:function D(I,H){return this.cps[1].isDataAvailable(I,H);},getAvailableRowsCount:function F(){return Math.max(this.cps[0].getAvailableRowsCount(),this.cps[1].getAvailableRowsCount());},invalid:function E(){var I,H,J;for(I=0,H=this.cps.length;I<H;++I){J=this.cps[I];J.invalid();}this.updatedRows={};},getUpdatedRows:function A(){var H={},I;for(I=0;I<this.cps.length;++I){var J=this.cps[I];if(!J.preServeUpdatedRows){return{};}mstrmojo.hash.copy(J.getUpdatedRows(),H);}this.updatedRows=H;return H;},download:function B(K,I,H){var J=this.cps[1];J.download(K,I,H);}});}());(function(){var C=4;mstrmojo.XtabLevelHACP=mstrmojo.declare(mstrmojo.XtabHACP,null,{scriptClass:"mstrmojo.XtabLevelHACP",allCells:[],updateCounter:0,pageNum:0,getEmptyCell:function B(D,E,G){var F={css:D.css.replace(" hl",""),v:"",fillerCell:true};if(E){F.cs=this.headerCells[G].cs||1;}return F;},getCellDepth:function A(D){var E=D.dpt||1;if(!D.dpt){D=D._p;while(D){if(D.dpt){E+=D.dpt;break;}E++;D=D._p;}}return E;},getUnmergedCells:function(D){return ;},getRowCells:function(S){var N=this.cps,I=[],a=N.length,K=false,c=this.gridData,O=(c&&c.lvlepd)||-1,Q=this.outlineState,H=this.allCells,Z,Y,X,F,E,d,W=0,J=-10;d=this.updateCounter;S-=d;if(H.length>0){return H.splice(0,1)[0];}var U=function(k){var j=k.gridData||(k.cps[0]&&k.cps[0].gridData),l=(j&&j.gts.row),f=(l&&l.length)||0,e,g,h;this.headerCells=e=mstrmojo.hash.clone(l);for(h=0;h<e.length;h++){if(e[h].cs>1&&e[h].otp===mstrmojo.mstr.EnumDSSXMLObjectTypes.Filter){for(Y=1;Y<e[h].cs;Y++){g=this.getEmptyCell(e[h],false);e.splice(h+1,0,g);}e[h].cs=1;}}for(h=f-1;h>0;h--){if(e[h].id===e[h-1].id){e.splice(h,1);}}f=e.length;this.maxLevel=j.maxLevel=f;this.gridData=j;for(h=0;h<f;h++){if(e[h].cs>1){return true;}}return false;};var G=function(j){var e,h,f,g;for(g=j.length-1;g>0;g--){h=j[g-1];e=j[g];if(e.dpt&&e.dpt===h.dpt){if(e.v&&e.v!==""){if(e.ts===C){if(e.v.indexOf("#srcstart")===0){f=e.v;}else{f="#srcstart"+e.v+"#srcend";}if(h.ts!==C){f=h.v+" "+f;}else{f="#srcstart"+h.v+"#srcend "+f;}h.v=f;}else{if(h.ts===C){h.v="#srcstart"+h.v+"#srcend "+e.v;}else{h.v+=" "+e.v;}}e.v="";}j.splice(g,1);}}return j;};var b=function(g){var f=this.headerCells,j=f.length,e=f[g].cs?(f[g].cs-1):0;var h=0;for(h=g+1;h<f.length;h++){e+=f[h].cs?(f[h].cs-1):0;}return e;};var D=function(h){var g=h.gridData||(h.cps[0]&&h.cps[0].gridData),e=g.gts,f=false;if(e.col.length===0){f=true;}else{f=e.rec;}return f?0:1;};for(Z=0;Z<a;Z++){if(N[Z].getAvailableRowsCount()>0&&N[Z].rc>S){var L=mstrmojo.hash.clone(N[Z].getRowCells(S).slice(0));if(N[Z].type===4){if(S===0){this.hasMultiFormAttributes=U.call(this,N[Z]);this.metricAdjuster=D(N[Z]);if(O===-1){O=this.gridData&&this.gridData.lvlepd;}}if(this.hasMultiFormAttributes){L=G(L);}var P=L.length;for(X=P-1;X>=0;X--){F=L[X];var V=this.getCellDepth(F);if(X===0){for(Y=1;Y<V;Y++){L.splice(Y-1,0,this.getEmptyCell(F,this.hasMultiFormAttributes,Y-1));}}else{if(F.stt&&F.idx<0){L.splice(X,1);}else{if(F.stt===1&&(!F._e||F._e.n)){L.splice(X,1);E=L[X-1];if(F._e&&F.hst&&F.hst!==J&&E&&E.v===E._e.n){E.v+=" ("+F._e.n+")";}continue;}else{var R=[];L.splice(X,1);for(Y=1;Y<V;Y++){R.push(this.getEmptyCell(F,this.hasMultiFormAttributes,Y-1));}R.push(F);H.splice(0,0,R);K=true;d++;this.rc++;}}}F.rs=1;F.outLvl=V;if(Q&&Q.collapseToLevel){if(V<=Q.collapseToLevel){if(V<Q.collapseToLevel||!Q.isExpanding){delete Q.collapseToLevel;H.forEach(function(e){e.forEach(function(f){if(!f.fillerCell&&f._ei){delete Q[f._ei];f.epd=false;f.hidden=false;}});});}else{if(Q.isExpanding){Q.hasTBodyElementsToExpand=true;}Q[F._ei]={expanded:false,hidden:true};}}else{Q[F._ei]={expanded:false,hidden:true};}}if(Q&&Q[F._ei]!==undefined){F.epd=!(Q[F._ei].expanded);F.hidden=Q[F._ei].hidden;}else{F.epd=O>0&&O<=V;F.hidden=false;}if(this.hasMultiFormAttributes){W=b.call(this,V-1);}if((W||this.metricAdjuster)&&V===this.maxLevel){F.isLeaf=true;}F.cs=P>1?(P-X+W+this.metricAdjuster):(P+W+this.metricAdjuster);}this.updateCounter=d;}else{if(K){var T=H.length-1,M=H[T];H[T]=M.concat(L);for(Y=0;Y<T;Y++){M=H[Y];for(X=0;X<L.length;X++){M.push(this.getEmptyCell(L[X]));}}for(X=0;X<L.length;X++){I.push(this.getEmptyCell(L[X]));}continue;}}if(L){I=I.concat(L);}}}return I;}});}());(function(){function F(N){var M=0;for(M=0;M<N.length;M++){if(N[M].otp===-1){return true;}}return false;}function G(M){var N=[],Q,P,O;for(O=M.length-1;O>0;O--){Q=M[O];P=M[O-1];if(Q.id===P.id){M.splice(O,1);if(P.v===P.n){P.v+=" | "+Q.v;P.cs=(P.cs||1)+(Q.cs||1);}}}return M;}function C(M){return M.gts.col.length>0&&M.gts.rec===false;}mstrmojo.XtabTitlesCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabTitlesCP",init:function L(M){this._super(M);},download:function A(O,N,M){},shouldClonedLastTitleCell:function K(){return(this.gridData.lhv!==0);},initContent:function H(U){this.startIndexInContainer=0;if(!this.cts){this.cts=mstrmojo.hash.clone(this.gridData.gts.col);}var N=this.gridData.gts,P=N.row||[],M=N.col||[],W=N.show,T=N.rec,c=this.cts||[],b=P.length,V=c.length,Z=this.gridData.css;this.base={items:[]};this.rc=(W&&c.length)||0;if(this.rc===0&&W){this.rc=b>0?1:0;}this.colWidths=(W&&N.cws)||[];if(!this.rc){this.nRowSpan=this.nColSpan=0;return ;}var R={items:[]},X=0,O=1,Y,a,e=this,Q=e.base.items,d=function(f,g){if(e.shouldClonedLastTitleCell()&&g>1){f.rs=1;Y=mstrmojo.hash.clone(f,{});Y.n="&nbsp;";f.cni=Z.push({n:(Z[f.cni].n||"")+" fsbp_1"})-1;}},S=function(h){var f=h;while(f-->1){if(e.shouldClonedLastTitleCell()){var g=mstrmojo.hash.clone(Y,{});g.cni=Z.push({n:(Z[g.cni].n||"")+" fsbp_"+((f==1)?"3":"2")})-1;Q.push({items:[g]});}else{Q.push({items:[]});}}};for(a=0;a<b;++a){P[a].axis=1;P[a].ui=a;X+=P[a].cs||1;R.items.push(P[a]);}if(V>0){c[0].axis=2;c[0].ui=0;M[0].axis=2;M[0].ui=0;O=c[0].rs||1;d(c[0],O);X+=c[0].cs||1;R.items.push(c[0]);}Q.push(R);for(a=1;a<V;++a){if(O>1){S(O);}c[a].axis=2;c[a].ui=a;M[a].axis=2;M[a].ui=a;O=c[a].rs||1;d(c[a],O);Q.push({items:[c[a]]});}this.rc=Q.length;this.nRowSpan=this.rc+O-1;this.nColSpan=X;if(T){this._removeExtraColumn(P,c);}},getAvailableRowsCount:function I(){return this.rc;},getSpanDimension:function J(){return{nRow:this.nRowSpan||0,nCol:this.nColSpan||0};},isDataAvailable:function B(N,M){return true;},getRowCells:function E(N){var Q=this._super(N),T=this.gridData;if(T.olm&&!(T.rw&&T.rw.row.bc>0)&&!(this.dataSource&&this.dataSource.defn.txi)){Q=G(Q);var S=0,P=0,O;Q=mstrmojo.hash.clone(Q);for(S=0;S<Q.length;S++){if(Q[S].cs>1&&Q[S].otp===mstrmojo.mstr.EnumDSSXMLObjectTypes.Filter){for(P=1;P<Q[S].cs;P++){O={};O.css=Q[S].css.replace(" hl","");O.v="&nbsp;";Q.splice(S+1,0,O);}Q[S].cs=1;}}var R=C(T),M=R?Q.length-1:Q.length,S;for(S=0;S<M-1;S++){Q[S].expandLevel=S+1;}}return Q;},_removeExtraColumn:function D(P,f){var d=P&&P.length,U=f&&f.length,M=this.gridData.gts,X=M.row||[],S=M.col||[],N=X.length,b=S.length;if(!d||!U){if(U===1){var g=f[U-1];if(g.otp==-1){if(b>0){S[b-1]._hid=true;}this.base.items=[];this.nRowSpan=this.nColSpan=this.rc=0;}}return ;}var O=P[d-1],Y=this.rc,Q=this.base.items;if(O){if(O.otp==-1){if(N>0){X[N-1]._hid=true;}if(this.nColSpan){this.nColSpan-=O.cs||1;}Q[0].items.splice(d-1,1);}else{var V=Y>1?Y-1:0,W=Q[V],e=W.items.length;if(e>0&&b>0){S[b-1]._hid=true;}var R=O.fix;if(R){var c;for(c=0;c<R;c++){W.items[e-1+c]=P[d-R+c];}}else{W.items[e-1]=O;}for(var a=0,Z=U-1;a<Z;a++){f[a].cs=R?R:O.cs;}var T=R?R:1;Q[0].items.splice(d-T,T);if(this.nColSpan){this.nColSpan-=1;}}}return ;}});})();(function(){mstrmojo.XtabOnDemandCP=mstrmojo.declare(mstrmojo.XtabCP,null,{scriptClass:"mstrmojo.XtabOnDemandCP",blockNum:0,listeners:null,initContent:function E(F){if(F!==undefined){this.startIndexInContainer=F;}this.isDownloaded=(this.base!==null);this.isDownloading=false;if(this.base){this._super(this.startIndexInContainer);this.notifyListeners();}},addCPListener:function D(F){if(!this.listeners){this.listeners=[];}this.listeners.push(F);},notifyListeners:function C(){var F,H=this.listeners,G=(H&&H.length)||0;for(F=0;F<G;F++){if(H[F]&&H[F].onDemandDataReady){H[F].onDemandDataReady(this);}}},getAvailableRowsCount:function B(){return this.isDownloaded?this.rc:0;},download:function(F){if(!this.isDownloaded&&!this.isDownloading){this.isDownloading=true;this.dataSource.download(this.blockNum,F);}},invalid:function(){if(this._super){this._super();}this.isDownloaded=false;this.isDownloading=false;},isDataAvailable:function A(G,F){return this.isDownloaded;}});})();(function(){var a=1,e=2,n=4,W=8,g=1,h=2,G=3,c=4,m=5,U=6,M=7,k=8,X=4,F={},B={},I=4,R=1,J={TITLE:"ig-title",GROUPING:"iggroup",BANDING:"igbanding",RIGHT_ALIGN:"rtAlign",LEFT_ALIGN:"leftAlign",TOTAL_ROW:"total"},T=mstrmojo.hash,V=mstrmojo.array;function Z(t,q){var r=t[0],o=q.gts,p=o.cws.length;return(q.vp.gr==="1"&&(p>1));}function j(p,v){var t=function(w,x){if(x&&w&&w.css&&w.css.indexOf(x)<0){w.css+=" "+x;}};var r=v.type,q=v.col,u=(q&&q.cl)||0,o=(r===e||r===a);if(r===e||r===W){t(p,J.RIGHT_ALIGN);}else{if(r===a||r===n){t(p,J.LEFT_ALIGN);}}if(o){if(q&&q.tg&&u>1){if(!p._v){p._v=p.v;p.v="<span class='toggleHeader'>"+p.v+"</span>";}}t(p,J.TITLE);}V.forEach(v.extraCss,function(w){t(p,w);});}function A(o){return 0;}function l(t){var q,r=t.cg,o=r&&r.cgc,p=1;for(q=0;q<o;q++){if(r&&r[q]&&!r[q].tg&&r[q].cl>p){p=r[q].cl;}}return p;}function N(p,o){var q=m;if(o===2){if(p===0){q=g;}else{if(p===1){q=c;}}}else{if(o>2){if(p===0){q=g;}else{if(p===1){q=h;}else{if(p===o-1){q=c;}else{if(p<o-1&&p>1){q=G;}}}}}}return q;}function L(o,t,q,p){var v=p&&p.cols&&p.cols.cg,r,w=0,u=0;if(v){for(r=0;r<t;r++){if(o[r]){w+=o[r].length;}}w+=(q+1);for(r=0;r<v.cgc;r++){u+=v[r].cl;if(u>=w){return r;}}}return -1;}function P(w,r,p,o){var v=[],u,q,t,x;for(q=0,t=w.length;q<t;q++){if(w[q].length===1){u=w[q][0];u.rowType=(u.rowType!==k)?N(r,p):k;u.singleStack=(p>1);u=T.copy(u);if(u.ts===I){if(p===1){u.rowType=m;u.colIdx=L(w,q,r,o);}else{if(!r){u.colIdx=L(w,q,r,o);}else{delete u.ts;u.v="";}}}else{if(r){u.v="";}}}else{u=w[q][r];if(!u){x=w[q].length;u=T.copy(w[q][x-1],{});u.v="";if(u.hasOwnProperty("ts")){delete u.ts;}}else{if(u.ts===I){u.colIdx=L(w,q,r,o);}}u.rowType=(u.rowType!==k)?N(r,p):k;}v.push(u);}return v;}function Q(o){if(o===0){return 0;}var p=this.sectionMap[o-1]||0;return Math.floor((o-p)/this.stackLevels);}function D(v){var t,u,r=this.sectionInfo,o=r.length,q=this.srh,p=this.lastSectionIndex;u=r[p];if(v>=u.rs&&v<(u.rs+q)){return u;}if(v<u.rs){t=p-1;if(t<=0){this.lastSectionIndex=0;return null;}do{u=r[t];if(v>u.rs&&v<=(u.rs+q)){this.lastSectionIndex=t;return u;}}while(v<u.rs&&--t>0);this.lastSectionIndex=t;return u;}else{t=p+1;if(t>=o){this.lastSectionIndex=o-1;return null;}do{u=r[t];if(v>u.rs&&v<=(u.rs+q)){this.lastSectionIndex=t;return u;}}while(v>(u.rs+q)&&++t<o);this.lastSectionIndex=t-1;return null;}}function d(x,q,o,w){var v=x[0],t,u=x.length,p=v&&v.rowType,r={v:"",css:"empty-igcell",rowType:p};if(o!==undefined&&v&&(p===g||p===m||p===U)){r={v:'<div><div class="IG-ActionArrow-IMG" style="height:'+w+"px;top:-"+(0.5*F[p])+'px;"></div></div>',css:"IG-ActionArrow",_ei:o};}for(t=u-1;t>=u-q;t--){v=x&&x[t];if(v){v.css+=" IG-lastdatacolumn";}}x.push(r);}function S(AL,AG,q){var AC=AL.cols,AD=AC.cg,o=[{w:"0px"}];if(AC&&AG){var AM=AC.cws,p=[],AK=AM.length,AO=0,x=(parseInt(AL.ar,10)===1)?(AG/AK):-1,AB,r,AA=false,t=0,AE=AG,AF=0,AJ;for(AJ=0;AJ<AK;AJ++){r=p[AJ]=AM[AJ];AB=r.w;if(AB===""){AA=true;}else{if(r.xc){AO+=parseInt(AB);AE-=AO;t++;}else{AF+=parseFloat(AB,10);}}}if(AA||AF<100){x=AE/(AK-t);}for(AJ=0;AJ<AK;AJ++){r=AM[AJ];if(r.xc){continue;}else{if(x===-1){AB=parseInt(r.w,10)*AE/100;if(!AB&&AB!==0){AB=parseInt(AE/AD.cgc,10);}}else{AB=(parseInt(r.w,10)<0)?0:x;}}p[AJ]={w:AB+"px"};}if(q){return p;}var z=[],AI=0;for(AJ=0;AJ<AK;AJ++){var AN=AD[AJ],v=AN.tg?AN.cl:1,AH=0;for(AH=0;AH<v;AH++){var u="0px";if(AH===AN.cc){u=p[AJ].w;}z[AI+AH]={w:u};}AI+=v;}return z.concat(o);}else{if(q){return null;}else{return cp.cws.concat(o);}}}function C(){delete this.lastStackCols;delete this.lastAttRow;delete this.lastMtxRow;}mstrmojo.InteractiveGridHACP=mstrmojo.declare(mstrmojo.XtabHACP,null,{scriptClass:"mstrmojo.InteractiveGridHACP",sectionMap:[],stackLevels:1,gridWidth:480,tdWidths:null,lastSectionIndex:0,adjustCPMaps:function O(){var z=this.cps,x=this.cps[0],AE=Math.max(z[0].rc,z[1].rc);if(x.type!==a){var AJ=this.gridData,AD=function(AM,AP){var AL=AM.base.items,AN=AM.lookupBase[0].es,AO=AL[AP].items[0],AK=AN&&AN[AO.idx];return(AK&&AK.n)||((AO.pi&&AN[AO.pi.ri||0])||"");},AH,AG,o=1,v,p,AB,r=0,q=-1,AC,AI,AF=0,AA=this.groupEnabled;for(AC=0,AH=0,AI=x.cps?x.cps.length:1;AC<AI;AC++){var u=x.cps?x.cps[AC]:x,w=u.rc;r=q+1;q=r+w-1;if(u.isDataAvailable(r,q)){if(u.lastRow){AF=u.lastRow;p=u.lastSection;}else{AH=AF||0;for(AG=0,o=this.sectionMap[AH-1]||0;AG<w;AG++){var t=this.stackLevels;AB=AD(u,AG);if(AA&&AB!==p){p=AB;this.sectionInfo.push({sn:AB,rs:this.srh*o+this.stackedRh*Math.floor((AH-o)/this.stackLevels)});this.sectionMap[AH]=++o;AH++;}while(t){this.sectionMap[AH]=o;t--;AH++;}}AF=u.lastRow=AH;u.lastSection=AB;}}else{break;}}this.rc=(this.stackLevels>1?AE*this.stackLevels:AE)+(AA?o:0);}},onDemandDataReady:function b(){this.adjustCPMaps();},initContent:function Y(z){var x=this.cps,AK=this.gridData=x[0].gridData||x[0].cps[0].gridData,AG=AK.vp=this.gridVp=this.gridVp||AK.vp,q=AG.daf&&AG.daf.split(":"),AA=AG.cols,AB=AA.cg,AH=AA.cws,w=x[A(AB)],AE=AK.gts.row,p=AK.gts,AI=Z(x,AK),v=w.type!==a,AD,AF,t,o,AC,u,AJ,r=(typeof (mstrMobileApp)!=="undefined"&&mstrMobileApp.getDeviceDPI)?mstrMobileApp.getDeviceDPI():160;if(r===160){F={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};B={1:11,2:11,3:1,4:16,5:16};}else{if(r===213){F={1:45,2:31,3:26,4:39,5:71,6:40,7:35,8:71};B={1:15,2:15,3:2,4:21,5:21};}else{if(r===240){F={1:50,2:34,3:30,4:44,5:80,6:40,7:40,8:80};B={1:16,2:16,3:2,4:24,5:24};}else{if(r===320){F={1:67,2:44,3:38,4:58,5:107,6:40,7:53,8:107};B={1:22,2:22,3:2,4:32,5:32};}else{F={1:33,2:22,3:20,4:30,5:53,6:40,7:27,8:53};B={1:11,2:11,3:1,4:16,5:16};}}}}if(v){if(AG.dafIdx===undefined&&q){for(AD=0;AD<AE.length;AD++){if(AE[AD].id===q[0]&&AE[AD].fid===q[1]){AG.dafIdx=AD;break;}}}}for(AD=0;AD<AB.cgc;AD++){if(AB[AD]&&AB[AD].tg){break;}}if(AD===AB.cgc){AK.gts.show=false;AK.ghs.chs.show=false;}this._super(z);this.colWidths=S(AG,this.gridWidth);this.tdWidths=S(AG,this.gridWidth,true);if(v){this.stackLevels=l(AA);if(this.stackLevels>1){this.srh=F[M];this.rh=F[m];this.mrh=F[G];this.stackedRh=F[g]+(this.stackLevels-2)*F[h]+F[G];}else{this.srh=F[M];this.rh=this.stackedRh=this.mrh=F[m];}if(AI||this.stackLevels>1){this.sectionMap=[];this.sectionInfo=[];this.groupEnabled=AI;this.adjustCPMaps();o=this.cps[0].cps;if(o){AJ=this;for(AD=0,AF=o.length;AD<AF;AD++){u=o[AD];if(u&&u.addCPListener){u.addCPListener(AJ);}}}}}},getUnmergedCells:function(o){return ;},getResolvedGroupHeader:function(q,u){var p=this.gridData,t=p.gts.row[u].es,o=p.ghs.rhs.items[q].items[u];if(o){if(!o.css){o.css=p.css[o.cni].n+" iggroup";o.n=t[o.idx].n;}}else{return{css:" iggroup",n:""};}return o;},getRowCells:function(AI){var AD=this.cps,v=[],AW=this.gridData,AS=AW.vp,AG=AS.cols.cg,AB=AD[A(AG)],AF=this.groupEnabled,q=AS.bn==="1",AT=[],AH=Q.call(this,AI),w,r,AJ=1,AC,o,z,AP,AO,AR,AV,AA;if(AF&&(this.sectionMap[AI]!==this.sectionMap[AI-1])){var t=T.copy(AB.getRowCells(AH)[0],{});t.cs=this.colWidths.length;t.rowType=M;j(t,{col:null,type:AB.type,extraCss:[J.GROUPING]});return[t];}if(!AI){C.call(this);}this.lastAttRow=this.lastAttRow||(AD[0].rc?AD[0].getRowCells(AH):[]);this.lastMtxRow=this.lastMtxRow||(AD[1].rc?AD[1].getRowCells(AH):[]);z=this.lastAttRow;AR=z.length;if(AR>0&&z[0].stt){AC=true;for(AP=0;AP<AR;AP++){AV=z[AP];if(AV.stt===R){o=AV;break;}}}if(!this.lastStackCols){V.forEach([this.lastAttRow,this.lastMtxRow],function(p){for(AP=0;AP<p.length;AP++){if(p[AP]._ei!==undefined){if(AS.dafIdx>=0){AA=AB.getRowCells(AH)[AS.dafIdx];}w=(AS.dafIdx>=0)?(AA&&AA._ei):"";return false;}}},this);var AN=function(p,AX){if(p&&(AX.type===a||AX.type===e)){if(AL.tg===false){p.n=p.v="";}p.rowType=k;}j(p,{col:AL,type:AX.type,extraCss:[((AX.type===W||AX.type===n)&&q&&(AH%2===1))?J.BANDING:null,AC?J.TOTAL_ROW:null]});if(p){p.cs=1;if(p._ei===undefined&&AS.dafIdx!==undefined){p._ei=w;}}};this.lastRowIndex=0;for(AO=0;AO<AG.cgc;AO++){var AL=AG[AO],AQ=AL["mix"+AL.cc],u=AQ!==undefined,x=AD[u?1:0],AM,AK,AE,AU={n:"",stt:R,css:"xtab-td"};arr=[];if(AL.tg){for(var AP=0;AP<AL.cl;AP++){arr=[];AE=u?AL["mix"+AP]:AL.attForms[AP].idx;var z=u?this.lastMtxRow:this.lastAttRow;AV=z[AE];if(AC){if(!AV){AV=AU;}else{if(AV&&AV.stt===R){AV=T.copy(o,AU);}else{AV=T.copy(AV,{});}}}else{AV=T.copy(AV,{});}AN(AV,x);arr.push(AV);AT.push(arr);}if(AO+1===AG.cgc){AJ=AL.cl;}}else{for(AM=0,AR=AL.cl;AM<AR;AM++){if(u){AK=AL["mix"+AM];if(AK!==undefined){AV=this.lastMtxRow[AK];}}else{AK=AL.attForms[AM];if(AK){AV=this.lastAttRow[AK.idx];}if(AC&&!AV){AV=AU;}}AN(AV,x);arr.push(AV);}AT.push(arr);}}this.lastStackCols=AT;}v=P(this.lastStackCols,this.lastRowIndex++,this.stackLevels,AS);if(this.lastRowIndex>=this.stackLevels){C.call(this);}return v;},getRowHeight:function E(p){var o=F[m];return F[p]||o;},getPadding:function K(o){return B[o]||B[X];},isDataAvailable:function f(p,o){if(!this.onDemandIF||!this.cps[1].cps){return true;}else{var r=this.sectionMap.length,q;if(!r){return this.cps[1].isDataAvailable(p,o);}if(o>r){if(p<r){q=Q.call(this,p);return this.cps[1].isDataAvailable(q,q+(o-p));}else{return false;}}else{return this.cps[1].isDataAvailable(Q.call(this,p),Q.call(this,o));}}},download:function H(v,r,w){var q=Q.call(this,v),o=q+Math.ceil((r-v)/this.stackLevels),t=this.cps[0],p,x,u=!t.cps?[t]:this.cps[0]._getCPs(q,o);for(p=0;p<u.length;++p){x=u[p];x.download(q,o,w);}},getRowCellInfo:function(r){var q=D.call(this,r+this.srh),o,p=this.lastSectionIndex;if(q){o=this.sectionInfo[p-1];return{rowStart:q.rs,isNextRowNewSection:true,sectionName:o&&o.sn};}else{return{isNextRowNewSection:false,sectionName:this.sectionInfo[p].sn};}}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+mstrmojo.string.encodeHtmlString(E.substring(0,G))+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.List");var B=mstrmojo.dom,E=mstrmojo.array,C=mstrmojo.css,G=",";function F(){var K,I,J=this.items,L=[];for(K=0,I=J.length;K<I;K++){L.push(J[K].v);}this.set("value",L.join(G));}function H(){var I=this.itemsContainerNode;if(I){E.forEach(I.children,function(J){if(J&&J.firstChild){C.removeClass(J.firstChild,"selected");}});}}mstrmojo.RankDIC=mstrmojo.declare(mstrmojo.List,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.RankDIC",cssClass:"mstrmojo-RankDIC",draggable:true,dropZone:true,allowCopy:false,multiSelect:false,renderOnScroll:false,itemDisplayField:"n",itemIdField:"v",containerResizable:false,itemMarkupFunction:function(M,J,K){var I=J===0,O=J===K.items.length-1,L='<div class="moveup '+(!I?"":"disabled")+'" or="1" idx="'+J+'">&nbsp;</div>',N='<div class="movedown '+(!O?"":"disabled")+'" or="-1" idx="'+J+'">&nbsp;</div>';return'<div class="mstrmojo-RankOption'+(I?" first":(O?" last":""))+'"><div class="index" contentEditable="true" onfocus="return mstrmojo.all[\''+K.id+"'].selectText(this);\" onblur=\"return mstrmojo.all['"+K.id+"'].indexChanged(this, "+J+');" onkeyup="return mstrmojo.all[\''+K.id+"'].keyPressed(event, this, "+J+');">'+J+'</div><div class="text">'+M.n+"</div>"+N+L+"</div>";},allowDrop:function(K){var J=K&&K.src,I=J&&J.widget;return(I===this);},ondrop:function(L){var J=this.domNode.parentNode,K=J.style,I=false;if(!K.height){K.height=J.offsetHeight+"px";I=true;}this._super(L);H.call(this);F.call(this);if(I){K.height="";}},selectText:function D(K){var I=document.createRange();I.selectNodeContents(K);var J=window.getSelection();J.removeAllRanges();J.addRange(I);},indexChanged:function(M,J){var L=parseInt(M[M.innerText!==undefined?"innerText":"textContent"],10),K=parseInt(J,10),I=this.items.length;if(isNaN(L)){M[M.innerText!==undefined?"innerText":"textContent"]=J;return false;}L=Math.min(Math.max(0,L),I);if(L!==K){this.move([K],L);F.call(this);return true;}else{return true;}},keyPressed:function A(J,K,I){if(J.keyCode===mstrmojo.Enum_Keys.ESCAPE){K[K.innerText!==undefined?"innerText":"textContent"]=I;if(K.blur){K.blur();}}else{if(J.keyCode===mstrmojo.Enum_Keys.ENTER){this.indexChanged(K,I);}}return true;},onmouseup:function(L){var M=B.eventTarget(L.hWin,L.e),K=parseInt(M.getAttribute("or"),10),J=M&&parseInt(M.getAttribute("idx"),10),I=this.items.length;if(K===1&&J!==0){this.move([J],0);F.call(this);return true;}else{if(K===-1&&J!==(I-1)){this.move([J],I);F.call(this);return true;}else{mstrmojo.dom.preventDefault(window,L.e);return true;}}},init:function(I){this._super(I);this.items=this.getItems();}});}());(function(){mstrmojo.requiresCls("mstrmojo.List","mstrmojo._IsDial");mstrmojo.Dial=mstrmojo.declare(mstrmojo.List,[mstrmojo._IsDial],{scriptClass:"mstrmojo.Dial",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){mstrmojo.css.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);},hideIfEmpty:function(){this.onadd();}},hideIfEmpty:false,onadd:function(A){if(this._super){this._super(A);}if(this.hideIfEmpty){if(this.domNode){this.domNode.style.display=(!this.items||this.items.length==0)?"none":"block";}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=P(U.path);}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function E(){return this.domNode.firstChild;}},postBuildRendering:function B(){if(this.renderOnScroll){if(!this.onScrollEnd){var G=this.id;this.onScrollEnd=function F(){var H=mstrmojo.all[G];H.doScroll();H.updateScrollbars();};}}if(this._super){this._super();}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,doScroll:function A(){if(this.renderOnScroll){var G,H=this.scrollNode,F=(this.renderIndex+1)*this.renderBlockSize;if(F>=this.items.length){return ;}if(mstrmojo.dom.position(H).h===H.scrollHeight){G=this.domNode;}else{G=H;}if((mstrmojo.dom.position(G).h+G.scrollTop)>=G.scrollHeight){this.renderIndex++;var I=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");G.innerHTML+=I;this.itemsContainerNode.innerHTML+=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.css");var G=mstrmojo.css;var D;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function J(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function M(){G.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function K(){G.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function I(){G.toggleClass(this.domNode,"disabled",!this.enabled);},onhideCheckMarkChange:function B(){G.toggleClass(this.domNode,"hideCheckMark",this.hideCheckMark);}},multiSelect:true,hideCheckMark:false,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,getItemMarkup:function L(N){if(!D){D=this._super(N).replace(">{@en@n}<",'title="{@tt}"><span class="text">{@en@n}</span><');}return D;},getItemProps:function H(Q,O){var P=this._super(Q,O),N={"\r\n":" ","\n":" ","\r":" "};var R=Q.css;if(R){P.addCls(R);}P.tt=Q.tt||"";Q.n=mstrmojo.string.multiReplace(Q.n,N);P.n=Q.n||"";return P;},setupScrollNodes:function E(){this.scrollNode=this.scrollboxNode;},preselectionChange:function C(O){var P=this.minimumSelectCnt,N=this.getSelectedItems().length,Q=O.removed;if(Q&&P){if(N<P){this.select(Q,true);return false;}}G.toggleClass(this.itemsContainerNode,"disableSelected",N<=P);return true;},buildRendering:function F(){this._super();G.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.ButtonBar");mstrmojo.vi.ui.TextAlignButtonBar=mstrmojo.declare(mstrmojo.ui.ButtonBar,null,{scriptClass:"mstrmojo.vi.ui.TextAlignButtonBar",includeJustify:true,init:function B(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"txtAlign");var D=this.itemsValueMap,C=this.items;if(!this.includeJustify){C=C.filter(function(F){return F.id!=="justify";});}this.items=C.map(function(G){var F=mstrmojo.hash.copy(G);F.v=D[F.id];return F;});},onValueChange:mstrmojo.emptyFn,itemsValueMap:{left:0,center:2,right:1,justify:6},items:[{n:mstrmojo.desc(3049,"Left"),id:"left"},{n:mstrmojo.desc(2193,"Center"),id:"center"},{n:mstrmojo.desc(2166,"Right"),id:"right"},{n:mstrmojo.desc(2068,"Justify"),id:"justify"}],getItemProps:function A(E,C){var D=this._super(E,C);D.addCls(E.id);return D;},postselectionChange:function(C){var D=this.items,E=D[C.added[0]],F=D[C.removed&&C.removed[0]];this.onValueChange(E.v,F&&F.v);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.func","mstrmojo.vi.controllers.UICmdMgr");var W=mstrmojo.func,S=mstrmojo.hash,P=mstrmojo.array,M=mstrmojo.vi.controllers.UICmdMgr.STATES,J={SHARED:0,SEPARATE:1},N={AND:19,OR:20},c=function c(g,f){var d={},e=function(k,j){var h=[];if(!j){return k;}P.forEach((j||[]),function(l){h.push(l);});P.forEach((k||[]),function(m){var l=P.find(j,"id",m.id);if(!~l){h.push(m);}});return h;};S.forEach(f,function(h,j){d[j]=h;});S.forEach(g,function(h,j){d[j]=e(h,f[j]);});return d;},D=function D(d){var e=[];S.forEach(d,function(f){e.push({ft:N.AND,d:f});});return e;},K=function(e){var d={},f=function(g){var h=S.keyarray(g)[0];return{id:h,d:g[h][0]};};S.forEach(e,function(k){var j={},g=f(k),h=j[g.id];if(g.id){if(!h){j[g.id]=h=[];}h.push(g.d);}d=c(d,j);},this);return[{ft:N.OR,d:d}];},C=function C(h,m){var j=this.model,l,e=[],f=mstrmojo.vi.ui.rw.SelectionType,k=true,g=false,d=this;if(!m){m=this.getSelectionType();}if(!S.isEmpty(h)){if(m===f.METRICS){l=D.call(this,h);}else{l=K.call(this,h);}}S.forEach(l,function(n){k=false;var o=[];S.forEach(n.d,function(p,u){if(d.isSupportViewFilterForSelection(u)){g=true;var q=[],t={id:u,elems:q,fm:p[0].fm,v:P.map(p,function(v){return v.n;}).reverse()},r=j.getObjectInfo(u);if(r){t.t=r.t;t.st=r.st;if(r.st===12033){t.attId=r.attId;}}P.forEach((p||[]),function(v){q.push(v.id);});o.push(t);}});if(o.length){e.push({ft:n.ft,d:o});}});e.hasElements=g;e.clearSelections=k;return e;},F=function F(f){var d=this.getContextMenuSelectionType(),e=[];e=C.call(this,f,d);return e;},Z=function Z(k,m){var j=this.selectorControl,f,e,l,h=this,g,d;if(j){if(k.clearSelections||k.hasElements){f=this.controller;if(m){e=f.model;d=j.navPage;g=e.getLayoutKeyByUnitKey(d);this.clearSelections();this.setSelectionCache();}j.exp=null;if(f.onGridSelector){l=function(){f.onGridSelector(h,{type:mstrmojo.EnumRWUnitType.GRID,ck:j.ck,tks:j.tks,cgb:S.valarray(j.cgb),ctlKey:j.ckey,sliceId:this.sid,isUConDS:j.isUConDS,isNavigation:m,layoutKey:g,panelKey:d,ct:j.ct,selections:k});};if(this.multiUnitCtrlInterval){window.clearInterval(this.multiUnitCtrlInterval);this.multiUnitCtrlInterval=null;}if(f.cmdMgr.state===M.BUSY){this.multiUnitCtrlInterval=window.setInterval(function(){if(f.cmdMgr.state!==M.BUSY){window.clearInterval(h.multiUnitCtrlInterval);if(!h.destroyed){h.multiUnitCtrlInterval=null;l();}}},1000);}else{l();}}}}},B=function B(f){var d={type:mstrmojo.vi.ui.rw.SelectionType.ATTS,data:f},e=function(g,h){if(parseInt(g.fn,10)===22&&parseInt(h,10)===19){d.type=mstrmojo.vi.ui.rw.SelectionType.METRICS;}P.forEach((g.nds||[]),function(j){e(j,g.fn);});};e(f,null);return d;},a=function a(){return this.parent.model.getCurrentLayoutDef().cgbMap;},O=function O(){var d=a.call(this),e=[];S.forEach(d,function(g,f){if(this.k===g){e.push(f);}},this);return e;},b=function b(){var d=this.controller&&this.controller.cmdMgr;if(d&&d.isUndoRedo()){return true;}return false;};mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",{_mixinName:"mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",selectorControl:null,multiUnitCtrlInterval:null,postBuildRendering:function X(){if(this._super){this._super();}var d=mstrApp.isInVFConfigMode||this.isCustomSort?null:this.findSelectorControl();if(b.call(this)){this.clearSelections();}if(d&&!d.isNavigation&&!S.isEmpty(d.exp)&&this.addSelectionsFromExpression){this.addSelectionsFromExpression(B(d.exp));if(this.highlight){this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},getSelectorDataFromExpression:B,getSelectionDataTree:C,getContextMenuSelectionDataTree:F,deleteSelectorControl:function E(){if(this._super){return this._super();}this.throwAbstractMethodError("deleteSelectorControl");},findSelectorControl:function V(){if(this._super){return this._super();}this.throwAbstractMethodError("findSelectorControl");},handlesMultiSelection:function H(d){return(this._super&&this._super(d))||!!this.selectorControl;},isSupportViewFilterForSelection:function I(e){var d=this.model;return d.supportsViewFilterActions(e);},isLinkedFilter:function(){var d=this.findSelectorControl&&this.findSelectorControl();return d&&d.isNavigation;},isLinkedFilterEnabled:function(){return this.isLinkedFilter()&&this.getContextMenuSelectionHash&&!S.isEmpty(this.getContextMenuSelectionHash());},handleContextMenuSelectionData:function G(d){this.isNavigation=d;this.onContextMenuSelectionChange(this.getContextMenuSelectionHash&&this.getContextMenuSelectionHash());},onSelectionChange:function Q(e){var h=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),g=false,f=this.isNavigation;if(f){delete this.isNavigation;}if(this._super){g=this._super(e);}if(!f&&this.isLinkedFilter()){return true;}if(h.length>0){this.singleUnitSelect();g=true;}else{if(!!this.selectorControl&&!this.isCustomSort){var d=C.call(this,e);Z.call(this,d,f);return true;}}return g;},onContextMenuSelectionChange:function L(e){var h=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),g=false,f=this.isNavigation;if(f){delete this.isNavigation;}if(this._super){g=this._super(e);}if(!f&&this.isLinkedFilter()){return true;}if(h.length>0){this.singleUnitSelect();g=true;}else{if(!!this.selectorControl){var d=F.call(this,e);Z.call(this,d,f);return true;}}return g;},singleUnitSelect:function A(){if(this._super){this._super();}},clearAllSelections:function U(){return this.selectorControl&&this.selectorControl.showall;},onClearBrushing:function Y(d){if(this.selectorControl){return true;}if(this._super){return this._super(d);}return false;},getFilterType:function R(){return this.defn.ins||J.SHARED;},switchFilterType:function T(q){var l=this,p,m=l.getFilterType(),j=l.parent.model,h,g={actions:[]},r,f=a.call(l),d,k=false,n,v,o,u,e;if(m!==q){p=O.call(l);n=j.getCurrentLayoutDef().units;if(p.length&&m===J.SHARED){r=P.filterOne(p,function(w){v=n[w];if(v){o=v.scs||[];return true;}h=j.getSourceControls(l.parent,w);o=h;return h.length;});if(!h||!h.length){h=j.getSourceControls(l.parent,r);h=P.filter(h,function(w){u=w.control.key;return !P.find(o,"ckey",u);});o=o.concat(h);}P.forEach(o,function(w,x){if(x!==0){d=j.getNextKey();f[d]=l.k;g.actions.push(j.redoFilterAssociations(true,w.ckey||w.control.ckey,w.pnk||w.sourceKey,l.k,r,d));k=true;}}.bind(l));}else{e="";P.forEach(p,function(w){v=n[w];if(!v){h=j.getSourceControls(l.parent,w);v=h.length&&h[0];if(!v){return true;}v.pnk=v.sourceKey;v.ckey=v.control.ckey;}if(!e){e=w;}else{delete f[w];o=(v.scs&&v.scs[0])||v;g.actions.push(j.redoFilterAssociations(false,o.ckey,o.pnk,l.k,w,e));k=true;}}.bind(l));}g.actions.push(j.getUnitFormatAction(l,1,{FormattingSelector:{IndependentNodeSelector:q}},true));var t=false;g.callback=({success:function(){l.defn.ins=t?m:q;t=!t;}});if(k){g.callback=W.wrapMethods(g.callback,j.getRebuildCallback());}}g.extras={style:{params:{treesToRender:3}}};return g;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+D[E.itemDisplayField]+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.color");var C=[127,206,255];var D=[216,230,239];var B=function(H,K){if(!H||H==="transparent"){H="#FFFFFF";}var G=mstrmojo.color.hex2rgb(H),J,I,E;if(!K){J=Math.round((3/5)*parseInt(G[0])+110);I=Math.round((3/5)*parseInt(G[1])+110);E=Math.round((3/5)*parseInt(G[2])+110);}else{J=G[0]*K[0]/255;I=G[1]*K[1]/255;E=G[2]*K[2]/255;var F=G[0]*0.3+G[1]*0.59+G[2]*0.11;if(F<85){J=J+(63*((85-F)/85));if(J>255){J=255;}I=I+(63*((85-F)/85));if(I>255){I=255;}E=E+(96*((85-F)/85));if(E>255){E=255;}}}return"#"+mstrmojo.color.rgb2hex(J,I,E);};var A=function(F,G,E){if(F&&F.style){F.style.backgroundColor=G["bg"+E+"Color"]||"";F.style.color=G["text"+E+"Color"]||"";}};mstrmojo.LinkItemRenderer=mstrmojo.hash.copy({render:function(G,E,H){var F=G.v!=="u;"?" nAll":"";return'<input mstridx="'+E+'" class="'+H.itemCssClass+(H.selectedIndices[E]?" "+H.itemSelectedCssClass:"")+F+'" style="'+H.itemCssText+" color:"+(H.selectedIndices[E]?H.textSelectedColor:H.textNormalColor)+"; background-color:"+(H.selectedIndices[E]?H.bgSelectedColor:H.bgNormalColor)+';" type="button"  value="'+G[H.itemDisplayField]+'"  onmouseover="mstrmojo.all.'+H.id+".onmouseover(self, "+E+')" onmouseout="mstrmojo.all.'+H.id+".onmouseout(self, "+E+')"/>';},select:function(F,G,E,H){F.className+=" selected";A(F,H,"Selected");},unselect:function(F,G,E,H){F.className=F.className.replace(/selected/g,"");A(F,H,"Normal");},highlight:function(G,H,E,I){var F=I.selectedIndices[E]?"Selected":"Highlighted";A(G,I,F);},unhighlight:function(G,H,E,I){var F=I.selectedIndices[E]?"Selected":"Normal";A(G,I,F);}},mstrmojo.hash.copy(mstrmojo.DivItemRenderer));mstrmojo._RendersItemLinks=mstrmojo.hash.copy({onmouseover:function(G,E){if(isNaN(E)||E<0){return ;}var F=this._getItemNode(E);this.itemRenderer.highlight(F,this.items[E],E,this);},onmouseout:function(G,E){if(isNaN(E)||E<0){return ;}var F=this._getItemNode(E);this.itemRenderer.unhighlight(F,this.items[E],E,this);},preBuildRendering:function(){this.bgNormalColor=this["background-color"]||this.parent&&this.parent["background-color"];this.bgSelectedColor=this.parent&&this.parent.defn&&this.parent.defn.ssc;if(this.bgSelectedColor!=null){if(this.bgSelectedColor==="transparent"){this.bgHighlightedColor=mstrmojo.LinkList.dftTrptBgHltColor;}else{this.bgHighlightedColor=B(this.bgSelectedColor);}}else{this.bgSelectedColor=B(this.bgNormalColor,C);this.bgHighlightedColor=B(this.bgNormalColor,D);}this.textSelectedColor=(this.bgSelectedColor==="transparent")?mstrmojo.LinkList.dftTrptTxSelColor:mstrmojo.color.getContrastingColor(this.bgSelectedColor,"#ffffff","#000000");this.textHighlightedColor=(this.bgSelectedColor==="transparent")?mstrmojo.LinkList.dftTrptTxHltColor:mstrmojo.color.getContrastingColor(this.bgHighlightedColor,"#ffffff","#000000");this.textNormalColor=this.color;if(this._super){this._super();}}},mstrmojo.hash.copy(mstrmojo._RendersItemDivs));mstrmojo._RendersItemLinks.itemRenderer=mstrmojo.LinkItemRenderer;mstrmojo.requiresCls("mstrmojo.ListBox");mstrmojo.LinkList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemLinks],{scriptClass:"mstrmojo.LinkList",cssClass:"mstrmojo-LinkList",itemCssClass:"mstrmojo-LinkList-item",selectionPolicy:"toggle"});mstrmojo.LinkList.dftTrptBgHltColor="#FFFFFF";mstrmojo.LinkList.dftTrptTxSelColor="#FFFFFF";mstrmojo.LinkList.dftTrptTxHltColor="#000000";mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.LinkListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemLinks],{scriptClass:"mstrmojo.LinkListHoriz",cssClass:"mstrmojo-LinkListHoriz",itemCssClass:"mstrmojo-LinkListHoriz-item",selectionPolicy:"toggle"});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.hash","mstrmojo.string");var B=mstrmojo.hash,A=mstrmojo.string;mstrmojo.ListSelectorItemRenderer=B.clone(mstrmojo.DivItemRenderer);mstrmojo.ListSelectorItemRenderer.render=function(F,C,G){var D=F.v!="u;"?" nAll":"",E=G.getItemName?G.getItemName(F,C):(G.itemDisplayField&&F[G.itemDisplayField]);if(mstrmojo.string.isEmpty(E)){E="<br/>";}return'<div mstridx="'+C+'" class="'+G.itemCssClass+(G.selectedIndices[C]?" "+G.itemSelectedCssClass:"")+D+'" style="'+G.itemCssText+'">'+A.encodeHtmlString(E)+"</div>";};mstrmojo.ListBoxSelector=mstrmojo.declare(mstrmojo.ListBox,null,{itemRenderer:mstrmojo.ListSelectorItemRenderer});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.CheckList","mstrmojo.ui._IsHierarchyList","mstrmojo.css","mstrmojo.array","mstrmojo.EnumSelectionType");var S=mstrmojo.css,K=mstrmojo.array,A=mstrmojo.EnumSelectionType;var U="hidden",Q="selected",R="expanded",F="collapsed",I="hierarchy",M="hasChildren";var P="u;",Y=10;mstrmojo.ui.HierarchyCheckList=mstrmojo.declare(mstrmojo.ui.CheckList,[mstrmojo.ui._IsHierarchyList],{scriptClass:"mstrmojo.ui.HierarchyCheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="header"></div><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div><div class="footer"></div></div>',markupSlots:{headerNode:function E(){return this.domNode.firstChild;},footerNode:function C(){return this.domNode.lastChild;},scrollboxNode:function H(){return this.domNode.children[1];},itemsContainerNode:function T(){return this.domNode.children[1].firstChild;}},getItemMarkup:function D(a,Z){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@tt}"><span class="indent" style="padding-left: {@indent}px;"></span><span class="triangle"></span><span class="checkbox"></span><span class="text">{@en@n}</span></{@tag}>';},getItemProps:function W(b,Z){var a=this._super(b,Z);if(b.isSelected){a.addCls(Q);}if(this.isHiearachyDisplay()){if(b.hcd){a.addCls(b.epd?R:F);}}return a;},setupScrollNodes:function J(){this.scrollNode=this.scrollboxNode;var Z=this.domNode.clientHeight-this.headerNode.clientHeight-this.footerNode.clientHeight;if(Z>0){this.scrollNode.style.height=Z+"px";}},onclick:function X(Z){var b=Z.getTarget(),c=this.getItemNodeFromTarget(b),a=this.getItemFromTarget(b);if(a){if(S.hasClass(b,"triangle")){if(a.hcd){this.doExpandCollapse(c,a);}}else{if(!S.hasClass(b,"indent")){this.doBranchSelect(c,a,!a.isSelected);}}Z.cancel();}},doElementSelect:function V(b,a,Z){a.isSelected=Z;this.onSelectionChange(A.ELEMENT,Z,a);this.updateItemNodesStatus();},doBranchSelect:function O(c,a,Z){var b=function(d){d.isSelected=Z;d.isBranchSelected=Z;(d.children||[]).forEach(function(e){b(e);});};b(a);this.onSelectionChange(A.BRANCH,Z,a);this.updateItemNodesStatus();},doLevelSelect:function G(a,Z){this.getItems().forEach(function(b){if(b.lv===a){b.isSelected=Z;}});this.onSelectionChange(A.LEVEL,Z,null,a);this.updateItemNodesStatus();},doBranchLevelSelect:function B(d,a,c,Z){var b=function(e){if(e.lv===c){e.isSelected=Z;}else{if(e.lv<c){(e.children||[]).forEach(function(f){b(f);});}}};b(a);this.onSelectionChange(A.BRANCH_LEVEL,Z,a,c);this.updateItemNodesStatus();},doAllSelect:function L(Z){this.getItems().forEach(function(a){a.isSelected=a.isBranchSelected=Z;});this.onSelectionChange(A.ALL,Z);this.updateItemNodesStatus();},updateItemNodesStatus:function N(){var Z=this.itemsContainerNode&&this.itemsContainerNode.childNodes;K.forEach(Z,function(b){var a=this.getItemFromTarget(b);if(a){S.toggleClass(b,Q,a.isSelected);}},this);},onSelectionChange:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.CheckList","mstrmojo.css","mstrmojo.ui._HasListTooltip");var E=mstrmojo.css;var C;mstrmojo.ui.IconTooltipCheckList=mstrmojo.declare(mstrmojo.ui.CheckList,[mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.IconTooltipCheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu,mouseover><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function F(){return this.domNode.firstChild.firstChild;}},getItemMarkup:function I(L){if(!C){var K='><span class="text">{@en@n}</span> <span class="{@iconCss}" ttp="{@ttp}"></span><';C=this._super(L).replace(">{@en@n}<",K);}return C;},markupslots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function F(){return this.domNode.firstChild.firstChild;}},getItemProps:function G(N,L){var M=this._super(N,L),K={"\r\n":" ","\n":" ","\r":" "};if(N.css){M.addCls(N.css);}M.ttp=N.ttp||"";M.iconCss=N.iconCss||"";N.n=mstrmojo.string.multiReplace(N.n,K);M.n=N.n||"";return M;},postBuildRendering:function B(){this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-D",refNode:this.itemsContainerNode,posType:mstrmojo.tooltip.POS_TOPRIGHT,keepArrowXPos:false});},useRichTooltip:true,tooltipOffset:0,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipOrientation:"horizontal",tooltipCss:{leftCssClass:"no-arrow",rightCssClass:"no-arrow"},showTooltip:function H(L,N){var M=this,K=mstrmojo.dom.position(L.target);M.richTooltip.top=Math.max(K.y+K.h);M.richTooltip.left=Math.max(K.x+4,0);this._super(L,N);},getTooltipText:function D(K){return K.ttp;},onmouseover:function J(K){var O=this.id,L=mstrmojo.all[O],N=K.getTarget(),M=N.getAttribute("ttp");if(!M){return ;}L.richTooltip.content=M;L.showTooltip(K.e,self);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.requiresCls("mstrmojo.ui.CheckList");mstrmojo.requiresDescs(2121,2122,2125,2127,2123,2124,2126,2128,2129,2130);var D=mstrmojo.desc,C=mstrmojo.array;mstrmojo.express.ui.SubtotalsWidget=mstrmojo.declare(mstrmojo.ui.CheckList,null,{scriptClass:"mstrmojo.express.ui.SubtotalsWidget",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:true,init:function B(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-vi-subtotals");},_set_selectedItems:function(H,F){var E=[],G=this.prevSelection={};C.forEach((F||[]),function(I){E.push(I.t);});C.forEach(E,function(I){G[I]=true;});this.setSelectedItems(C.filter(this.items,function(I){return C.indexOf(E,I.v)>-1;}));},getSubtotalTypes:function A(){var G=this.items,H=this.selectedIndices,J=this.prevSelection,F=G.filter(function(L,K){return H[K]&&!J[L.v];}),I=G.filter(function(L,K){return !H[K]&&J[L.v];}),E=function(K){return K.v;};return[F.map(E),I.map(E)];},items:[{n:D(2121,"Total"),v:-10},{n:D(2122,"Average"),v:-12},{n:D(2125,"Maximum"),v:-14},{n:D(2127,"Minimum"),v:-13},{n:D(2123,"Count"),v:-11},{n:D(2124,"Geometric Mean"),v:-20},{n:D(2126,"Median"),v:-16},{n:D(2128,"Mode"),v:-17},{n:D(2129,"Product"),v:-15},{n:D(2130,"Standard Deviation"),v:-18},{n:D(2132,"Variance"),v:-19}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui._HasListTooltip");mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,scrollNodeMaxHeight:undefined,parentDomNode:undefined,keydownString:null,lastKeydownTime:null,keydownInterval:500,closeAfterSelection:true,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" tabIndex="-1" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu,keydown><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;},scrollboxNode:function A(){return this.domNode.firstChild;}},setupScrollNodes:function F(){this.scrollNode=this.scrollboxNode;},onOpen:function E(){this._super();this.updateScrollbars();var M=this;setTimeout(function(){M.scrollToSelectedItem();},10);},onclick:function K(M){this.closeAfterSelection=true;this._super(M);},postBuildRendering:function B(){var N=this._super();if(!this.parent){var M=this.parentDomNode=this.parentDomNode||document.body;M.appendChild(this.domNode);}return N;},closePopup:function J(){this.set("visible",false);},onkeydown:function H(O){if(!this.opener||!this.opener.focusOnPopup){return ;}var M=O.hWin,R=O.e||M.event,T=this.keydownString;this.locksHover=false;this.closeAfterSelection=false;if(R.keyCode===mstrmojo.Enum_Keys.DOWN_ARROW){if(this.selectedIndex<this.items.length-1){this.set("selectedIndex",this.selectedIndex+1);this.scrollToSelectedItem();}}else{if(R.keyCode===mstrmojo.Enum_Keys.UP_ARROW){if(this.selectedIndex>0){this.set("selectedIndex",this.selectedIndex-1);this.scrollToSelectedItem();}}else{if(R.keyCode===mstrmojo.Enum_Keys.ENTER||R.keyCode===mstrmojo.Enum_Keys.ESCAPE){this.closeAfterSelection=true;this.singleSelect(this.selectedIndex);}else{var S=new Date(),P=S.getTime(),N=String.fromCharCode(R.keyCode).toLowerCase(),Q=this;if(this.lastKeydownTime===null){this.keydownString=N;}else{if(P-this.lastKeydownTime<this.keydownInterval){this.keydownString=this.keydownString+N;}else{this.keydownString=N;}}T=this.keydownString;if(this._holdTimer){clearTimeout(this._holdTimer);}this._holdTimer=setTimeout(function(){Q.changeSelectedItem(O);Q.adjustPosition();},Q.keydownInterval);this.lastKeydownTime=P;}}}},changeSelectedItem:function D(M){var P=this.selectedIndex,O=this.items&&this.items.length;if(O>0){var N;for(N=this.selectedIndex+1;N<this.items.length;N++){if(this.items[N].n.toLowerCase().indexOf(this.keydownString)==0){P=N;break;}}if(P===this.selectedIndex){for(N=0;N<this.selectedIndex;N++){if(this.items[N].n.toLowerCase().indexOf(this.keydownString)==0){P=N;break;}}}if(P!==this.selectedIndex){this.set("selectedIndex",P);}}},focus:function L(){this.domNode.focus();},scrollToSelectedItem:function G(){var P=this.itemsContainerNode.childNodes[this.selectedIndex];if(P){var M=this.scrollNode,O=M.clientHeight,N=P.offsetTop;if(N-M.scrollTop+P.offsetHeight>O){M.scrollTop=P.offsetTop+P.offsetHeight-O;}else{if(N<M.scrollTop){M.scrollTop-=P.offsetHeight;}}}},adjustPosition:function C(){this.adjustCornersForPopupOverflow();this.scrollToSelectedItem();this.focus();}});}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var E=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function C(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=E.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.dnd","mstrmojo.ui._HasScroller","mstrmojo.DI.DIConstants");var e=mstrmojo.DI.DIConstants;function Z(g){var j=document.createElement("div"),h=j.style,f=g.domNode;j.className="mstrmojo-DataGrid-avatar";h.height=f.clientHeight+"px";f.appendChild(j);g.avatar=j;return j;}function Q(f){var g=mstrmojo.dom.position(f.domNode,true);return g.x;}function O(f){return'<div class="mstrmojo-DataGrid-resizeHandle" unselectable="on" onselectstart="return false" rh="'+f+'"></div>';}function b(h){var g=h.getAttribute("rh"),f=g&&parseInt(g,10);return f;}function Y(g,k,f){var j=f.src,l=j&&j.data,h=l&&l.resizingIdx;if(!(h&&h>0)){return k&&k.apply(g,[f]);}}mstrmojo.RESIZE_NEXT_COLUMN_MODE={getRange:function G(j,h){var f=j.colSizeArray;var g=[-f[h-1]+j.minColWidth,(h==f.length-1)?f[h]-j.resizeHandleWidth-j.minColWidth:f[h]-j.minColWidth];return g;},updateSize:function F(j,h,g){var f=j.colSizeArray;f[h-1]=f[h-1]+g;f[h]=f[h]-g;},updateColumnWidth:function T(j,g,k,h){var f=j.colSizeArray;g[h-1].style.width=f[h-1]+"px";k[h-1].style.width=f[h-1]+"px";g[h].style.width=f[h]+"px";k[h].style.width=f[h]+"px";}};mstrmojo.RESIZE_ALL_COLUMN_MODE={getRange:function G(l,k){var m=l.minColWidth+l.resizeHandleWidth,f=l.colSizeArray,h=0;for(var j=k;j<f.length;++j){h+=f[j]-m;}var g=[-f[k-1]+m,h];return g;},updateSize:function F(j,n,g){var m=j.minColWidth+j.resizeHandleWidth,k=j.colSizeArray;k[n-1]=k[n-1]+g;var f=[];for(var h=0;h<k.length-n;++h){f[h]=n+h;}f.sort(function(p,q){return k[p]-k[q];});for(var h=0;h<f.length;++h){var o=g/(f.length-h);var l=k[f[h]];g-=(l>=o+m)?o:l-m;k[f[h]]=(l>=o+m)?l-o:m;}},updateColumnWidth:function T(k,g,l,j){var f=k.colSizeArray;for(var h=j-1;h<f.length;++h){g[h].style.width=f[h]+"px";l[h].style.width=f[h]+"px";}}};mstrmojo.RESIZE_CURRENT_COLUMN_MODE={getRange:function G(l,k){var m=l.minColWidth+l.resizeHandleWidth,f=l.colSizeArray,h=0;for(var j=k;j<f.length;++j){h+=f[j]-m;}var g=[-f[k-1]+m,h];return g;},updateSize:function F(j,h,g){var f=j.colSizeArray;f[h-1]=f[h-1]+g;},updateColumnWidth:function T(j,g,k,h){var f=j.colSizeArray;g[h-1].style.width=f[h-1]+"px";k[h-1].style.width=f[h-1]+"px";j.widgetResized();}};mstrmojo._CanResizeColumn=mstrmojo.provide("mstrmojo._CanResizeColumn",{draggable:true,dropZone:false,avatar:null,colSizeArray:null,resizableColumns:true,resizeHandleWidth:10,minColWidth:5,resizeColumnBehavior:mstrmojo.RESIZE_NEXT_COLUMN_MODE,createColSizeArray:function c(){var g,l,j,h,k,f;l=this.headerContainerNode;j=l&&l.getElementsByTagName("table")[0];h=j.rows[0].cells;g=[];for(k=0,f=h.length;k<f;k++){g.push(h[k].offsetWidth);}return g;},postBuildRendering:function V(){if(this._super){this._super();}if(this.avatar){this.domNode.appendChild(this.avatar);}this.colSizeArray=null;},getDragData:function E(f){var h=f.src,j=h.node,g=b(j);if(g&&g>0){return{resizingIdx:g,startingX:h.pos.x,baseX:Q(this)};}if(this._super){return this.dropZone&&this._super(f);}return null;},allowDrop:function K(f){var h=f.src,j=h&&h.data,g=j&&j.resizingIdx;if(g&&g>0){return true;}return this.dropZone;},ondragenter:function R(f){Y(this,this._super,f);},ondragover:function S(f){Y(this,this._super,f);},ondragleave:function B(f){Y(this,this._super,f);},ondrop:function W(f){Y(this,this._super,f);},isDragValid:function C(f){var h=f.src,j=h&&h.data,g=j&&j.resizingIdx;if(g&&g>0){return true;}if(this._super){return this._super(f);}return false;},ondragstart:function X(f){var j=f.src,k=j&&j.data,h=k&&k.resizingIdx;if(h&&h>0){var g=this.avatar||Z(this);this.ownAvatar=true;g.style.left=(k.startingX-k.baseX)+"px";g.style.display="block";document.body.style.cursor="col-resize";if(!this.colSizeArray){this.colSizeArray=this.createColSizeArray();this._firstTimeResize=true;}k.resizingRange=this.resizeColumnBehavior.getRange(this,h);return ;}if(this._super){this._super(f);}},ondragmove:function P(g){var o=g.src,h=o&&o.data,m=h&&h.resizingIdx;if(m&&m>0){var n=g.tgt,j=this.avatar,l=h.resizingRange,k=n.pos.x-h.startingX,f=Math.min(l[1],Math.max(k,l[0]));h.deltaX=f;if(j){j.style.left=(h.startingX-h.baseX+f)+"px";}}else{if(this._super){this._super(g);}}},ondragend:function L(k){var r=k.src,l=r&&r.data,p=l&&l.resizingIdx;if(p&&p>0){var f=this.titleColGroup,q=f&&f.childNodes,n=this.dataColGroup,o=n&&n.childNodes,j=q.length,m=this.colSizeArray,g=l.deltaX;this.resizeColumnBehavior.updateSize(this,p,g);if(this._firstTimeResize){var h;for(h=0;h<j;h++){q[h].style.width=m[h]+"px";o[h].style.width=m[h]+"px";}this._firstTimeResize=false;}else{this.resizeColumnBehavior.updateColumnWidth(this,q,o,p);}this.avatar.style.display="none";document.body.style.cursor="";this.ownAvatar=false;}else{if(this._super){this._super(k);}}}});mstrmojo.requiresCls("mstrmojo._CanResizeColumn","mstrmojo.ListMapperTable","mstrmojo.WidgetList");function J(h){var l=document.createElement("colgroup"),f=h.length,g,k;for(k=0;k<f;k++){var j=document.createElement("col");g=h[k];if(g.colWidth){j.style.width=g.colWidth+"px";}j.className=g.colCss||("col"+k);l.appendChild(j);}return l;}function I(g){var h=g._headerWidgets_,f=h&&h.length;if(f>0){var j;for(j=0;j<f;j++){h[j].destroy(true);}}}function A(k,f,j,m,g){var h=[],l=k.headerWidget;j=j?(" "+j):"";m=m||this._headerWidgets;g=g?(" "+g):' w="1"';h.push("<td"+j+">");if(f>0&&this.resizableColumns){h.push(O(f));}h.push('<div class="mstrmojo-DataGrid-headerText');h.push(k.headerCss?" "+k.headerCss:"");if(l){m.push(mstrmojo.hash.copy(l));h.push('"'+g+">");}else{h.push('">');}h.push(k.headerText||"&nbsp");h.push("</div>");h.push("</td>");return h.join("");}function a(f,n){var h,l,m,g,o,k,j=[];f=f||"_headerWidgets";n=n||"1";h=this[f];l=h.length;if(l>0){m=this.headerContainerNode.getElementsByTagName("div");g=mstrmojo.array.filter(m,function(p){return p.getAttribute("w")==n;});for(k=0;k<l;k++){h[k].placeholder=g[k].firstChild;h[k].dataGrid=this;o=mstrmojo.registry.ref(h[k]);o.render();j.push(o);}}this[f+"_"]=j;}mstrmojo.DataGrid=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._CanResizeColumn,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.DataGrid",banding:true,resizableColumns:true,columns:null,items:null,listMapper:mstrmojo.WidgetListMapperTable,lockHeader:false,contentWidth:"",renderHook:{},shouldDisableItem:function(){return false;},markupString:'<div id="{@id}" class="mstrmojo-DataGrid {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-DataGrid-headerContainer">{@headerHtml}</div><div class="mstrmojo-DataGrid-itemsScrollBox" style="position:relative;"><div class="mstrmojo-DataGrid-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild.firstChild;},dropCueNode:function(){return this.domNode.lastChild.lastChild;},headerContainerNode:function(){return this.domNode.firstChild;},headerRows:function(){return this.domNode.firstChild.firstChild.rows;},bodyRows:function(){return this.domNode.lastChild.firstChild.firstChild.rows;}},markupMethods:{oncontentWidthChange:function(){var g=this.contentWidth,h=this.headerContainerNode,f=this.itemsContainerNode;if(g&&h&&f){h.style.width=g;f.style.width=g;}},onlockHeaderChange:function(){mstrmojo.css.toggleClass(this.domNode,"lockHeader",this.lockHeader);},onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";}},setupScrollNodes:function M(){this.scrollNode=this.scrollboxNode;},itemFunction:function(h,f,g){var j=new mstrmojo.DataRow({columns:g.columns,data:h,disable:g.shouldDisableItem(h),idx:f,dataGrid:g,parent:g});return j;},preBuildRendering:function D(){var l=this.renderHook;if(l&&l.pre){l.pre.apply(this,[A]);}else{var g=this.columns,f=g.length,h=['<table class="mstrmojo-DataGrid-headerTable" cellspacing="0" cellpadding="0"><tr>'],k;this._headerWidgets=[];var j;for(j=0;j<f;j++){k=A.apply(this,[g[j],j]);h.push(k);}h.push("</tr></table>");this.headerHtml=h.join("");}if(this._super){this._super();}},postBuildRendering:function V(){if(this._super){this._super();}var h=this.renderHook;if(h&&h.post){h.post.apply(this,[J,a]);}else{a.apply(this);this.titleColGroup=J(this.columns);}var f=this.titleColGroup,n=f.cloneNode(true),k=this.headerContainerNode,m=k&&k.getElementsByTagName("table")[0],o=this.itemsContainerNode,l=this.scrollboxNode,j=this.domNode,g=o&&o.getElementsByTagName("table")[0];this.dataColGroup=n;if(m&&g){m.insertBefore(f,m.firstChild);g.insertBefore(n,g.firstChild);}if(this.lockHeader){l.style.height=j.offsetHeight-k.offsetHeight+"px";mstrmojo.dom.attachEvent(l,"scroll",function(p){k.style.left=-l.scrollLeft+"px";});}},refresh:function H(f){I(this);if(this._super){this._super(f);}},destroy:function d(f){I(this);this._super(f);},unrender:function U(k){var h=this._headerWidgets_,g=h&&h.length,f;if(g>0){var j;for(j=0;j<g;j++){f=h[j];if(f&&f.hasRendered){f.unrender(true);}}}this._super(k);}});mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Container");mstrmojo.DataRow=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DataRow",cssClass:"mstrmojo-DataRow",dataTextCSSClass:"mstrmojo-DataRow-text",columns:null,disable:false,markupMethods:{onselectedChange:function(){mstrmojo.css.toggleClass(this.domNode,"selected",this.selected);}},buildDom:function(){this.children=[];var m=document.createElement("tr"),q=this.data,u=this.idx,g=this.dataGrid,n=this.cssClass,x=this.columns,f=this.children,j=this.disable,h,r=-1,v,t;m.setAttribute("id",this.id);if(g.banding){n+=(u%2==1)?" odd":" even";}m.className=n+(mstrmojo.string.isEmpty(q[g.itemDisplayField||"n"])?" empty-row":"")+(" "+q[g.itemCSSField||"itemCss"]||"")+(j?" disabled":"");var l,p;for(l=0,p=x.length;l<p;l++){v=x[l];t=(v.dataWidgetBuilder&&v.dataWidgetBuilder(q))||v.dataWidget;h=document.createElement("td");if(v.applyStyle2Cell&&v.colCss){h.setAttribute("class",v.colCss);}m.appendChild(h);if(t){h.setAttribute("w","1");r++;f.push(mstrmojo.hash.copy(t,{slot:"slot"+r,data:q,idx:u,dataGrid:g}));}else{if(v.dataFunction){h.innerHTML=v.dataFunction(q,u,g);}else{var k=mstrmojo.string.htmlAngles(q[v.dataField||"n"])||"&nbsp",o=v.tooltip?' title="'+k+'"':"";h.innerHTML='<div class="'+this.dataTextCSSClass+'" '+o+">"+k+"</div>";}}}this.initChildren();m.mstrmojoId=this.id;return m;},buildRendering:function N(){this._super();var k=this.domNode.childNodes,f=k.length,j={},h=0,l,g;for(g=0;g<f;g++){l=k[g];if(l.getAttribute("w")=="1"){j["slot"+h]=l;h++;}}this.addSlots(j);}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ContextMenuItem","mstrmojo.WidgetList","mstrmojo.ListMapperTable");var H=false,B=20;function G(J,K){var L=J.itemsContainerNode;L.scrollTop=Math.min(Math.max(L.scrollTop+K,0),L.scrollHeight-L.offsetHeight);}function I(K,J){if(!K._scrollInter){var L=B*(J?-1:1);K._scrollInter=window.setInterval(function(){G(K,L);},50);}}function E(J){if(J._scrollInter){window.clearInterval(J._scrollInter);J._scrollInter=null;}}mstrmojo.ContextMenu=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.ContextMenu",zIndex:100,visible:true,makeObservable:true,markupString:'<div id={@id} class="mstrmojo-ContextMenu {@cssClass}" style="z-index: {@zIndex};{@cssText}"><div class="mstrmojo-CM-scrollup" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" ></div><div class="mstrmojo-CM-itemsContainer">{@itemsHtml}</div><div class="mstrmojo-CM-scrolldown" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" ></div></div>',markupSlots:{scrollupNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1];},scrolldownNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){var K=this.domNode,P=this.itemsContainerNode,N=this.scrollupNode,M=this.scrolldownNode;K.style.display=this.visible?"block":"none";if(this.visible){N.style.display="none";M.style.display="none";P.style.overflow="auto";P.style.height="auto";var J=mstrmojo.dom.windowDim().h,O=K.offsetHeight,L=K.offsetWidth;if(J<O){N.style.display="block";N.style.minWidth=L+"px";M.style.display="block";M.style.minWidth=L+"px";P.style.overflow="hidden";P.style.height=(J-42)+"px";}}},onleftChange:function(){this.domNode.style.left=(this.left!=null)?this.left:"";},ontopChange:function(){this.domNode.style.top=(this.top!=null)?this.top:"";}},listMapper:mstrmojo.WidgetListMapperTable,itemFunction:function C(N,J,L){if(!H){mstrmojo.requiresCls("mstrmojo.ContextMenuItem");H=true;}var K={data:N,parent:L,hasSubmenu:L._cmSource.hasSubmenu(N),dynamicUpdate:L.dynamicUpdate,_cmSource:L._cmSource,zIndex:L.zIndex,itemIdField:L.itemIdField,itemField:L.itemField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction},M=new mstrmojo.ContextMenuItem(K);return M;},onmousedownarrow:function A(L,K,J){I(this,J);},onclickarrow:function F(L,K,J){G(this,B*(J?-1:1));},onmouseuparrow:function D(L,K,J){E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo._IsDial");mstrmojo.WidgetDial=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._IsDial],{scriptClass:"mstrmojo.WidgetDial"});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.XtabZone","mstrmojo.DICFactory","mstrmojo.DynamicClassFactory");var AQ=102,S=1,K=2,F=1,AM=4,q=mstrmojo.css,o=mstrmojo.dom,j=mstrmojo.hash,v=mstrmojo.array,e=mstrmojo.DynamicClassFactory.newComponent,L=1,AS=2,I=4,Q=1,f=2,X=1,C=2,AN=1,H=2,AA=1,x=2,d=2,k=1,AU=6,AD=7,J=function(AW){if(AW){return AW.tui>=0?("h_"+AW.tui+"_"+AW.fi+"_"+AW.axis):("m_"+AW.mix);}return"";};function z(Ac,AY,AZ){var Ab=this.nm[AY],AX=AZ.v,Aa=AZ.dv;Ac.rv=AX;Ac.v=Aa;Ac.mdf=1;if(Ac._src){Ac._src.rv=AX;Ac._src.v=Aa;Ac._src.mdf=1;}var AW=this.dicGroupMap[J(Ac)].widgetsMap[Ac._ei];if(!AW.showByDefault){if(AW.hasPreview){AW.renderPreview();}else{if(o.isIE7&&mstrmojo.string.isEmpty(AX)){AX=" ";}Ab[Ab.innerText!==undefined?"innerText":"textContent"]=(!AX?"\u00a0":AX);}}return Ab;}function b(AZ,Aa,AW){if(AW[Aa]===0){return true;}if(AZ&&AW[Aa]===undefined){try{var AX=AZ.getRowCells(Aa),Ab=AX&&AX[0];if(Ab&&Ab.o===Aa){if(Ab.sst){AW[Aa]=0;}return !!Ab.stt;}if(Ab&&Ab.o){return b(AZ,Aa+Aa-Ab.o,AW);}return false;}catch(AY){return false;}}else{return false;}}function M(AX,AW){v.forEach(AX,function(AY){AW[AY.o]=1;});}function AR(AW){if(AW.mgh&&(AW.mgh&S)){this.mghMarks={};}}function AB(AY,Aa){var AX=Aa.bb-1,AW=Math.min(AX+Aa.bc,Aa.tc),AZ;j.forEach(AY,function(Ac,Ab){AZ=Number(Ab);if(!isNaN(AZ)&&AZ>=AX&&AZ<AW){delete AY[Ab];}});}function AG(AZ,AY){var AW=this.editing?1:(AZ.rs||1),AX;for(AX=0;AX<AW;AX++){this.dirtyRows[AY+AX]=1;}}function AV(AW){return AW&&parseInt(AW.ipt,10)===d;}function AP(AW){var AX;this.delegateGridAction(function(AY){if(!AX&&AY.posMap&&AY.posMap[AW._ei]){AX=AY;}},"getRowIndex");return AX.getRowIdxByCell(AW);}function l(AW){var Ac=AW.thPosMap,Ae=AW.slot,Ab=Ac&&Ac.length||0,Ag=this.lastHeaderIndexs[Ae]||0,Aa=[AW.tableNode],Ad,AY,Af,AZ;if(this.getStickedTableNodes){Aa=Aa.concat(this.getStickedTableNodes());}for(AZ=Ag;AZ<Ab;++AZ){Ad=Ac[AZ],Af=Ad.obj;if(this.isEditableHeader(Af)){for(var AX in Aa){AL(Aa[AX],Ad);}}}this.lastHeaderIndexs[Ae]=AZ;}function AL(AW,AY){var AX=AW.tBodies[AY.page].rows[AY.row].cells[AY.cell];AX.innerHTML='<div class="editable-column">'+AX.innerHTML+"</div>";}function m(AY){var Aa=true,AX=AY||[];for(var AZ=0,AW=AX.length;AZ<AW;AZ++){if(AX[AZ]&&(AX[AZ].w==="")){Aa=false;break;}}return Aa?"40px":"";}function u(AW){return !AW.tav||!(AW.tav&F);}function AJ(Aa,AY,Ac,Aj){var Ad=false;for(var Ab=0;Ab<Aa.length;Ab++){var Ag=Aa[Ab],AX=Ag.style,AZ=parseFloat(q.getStyleValue(Ag,"padding-left"))||0,AW=parseFloat(q.getStyleValue(Ag,"padding-right"))||0,Ai=parseFloat(q.getStyleValue(Ag,"padding-top"))||0,Ae=parseFloat(q.getStyleValue(Ag,"padding-bottom"))||0;var Ah=Ag.getElementsByClassName("tableLayoutList")[0];var Af=Ag.getElementsByClassName("mstrmojo-TableLayoutList")[0];if(Ah&&Af){if(Ah.clientWidth>AY[Ab]){AX.width=Ah.clientWidth+"px";Af.style.width="auto";Ad=true;}else{AX.width=AY[Ab]-AZ-AW+"px";}if(Ah.clientHeight>Ac[Ab]){AX.height=Ah.clientHeight+"px";Af.style.height="auto";Ad=true;}else{AX.height=Ac[Ab]-Ai-Ae+"px";}}else{AX.width=AY[Ab]-AZ-AW+"px";AX.height=Ac[Ab]-Ai-Ae+"px";}}if(Ad){Aj.style.width="auto";}}mstrmojo._IsEditableGridCP={_mixinName:"mstrmojo._IsEditableGridCP",initContent:function AI(AZ){this._super(AZ);var Af=this.gridData,AX=Af&&Af.vp,Ad,Ac,Ae,Ah,AW,Ag,AY,Ab;if(((this.type===L)||(this.type===I))&&AX&&AX.cols&&!AX._adjusted){AW=AX.cols.cg;AY=AX.cols.cws;if(AW&&AW.cgc>0){for(Ad=AW.cgc;Ad>0;Ad--){AW[Ad]=j.copy(AW[Ad-1],{});Ag=AW[Ad];var Aa=Ag.attForms;if(Aa){for(Ac=0,Ah=Aa.length;Ac<Ah;Ac++){Ae=Aa[Ac];Ae.idx+=1;}}}AW[0]={tg:false,cc:0,cl:1,attForms:[{n:"",idx:0}]};AW.cgc+=1;}if(AY){AY.splice(0,0,{w:"60px",xc:true});}if(AX.dafIdx!==undefined){AX.dafIdx+=1;}Ab=Af.gts.row;for(Ad=0,Ah=Ab.length;Ad<Ah;Ad++){Ab[Ad].ci=Ad+1;}AX._adjusted=true;}this.colWidths=[{w:m(this.colWidths)}].concat(this.colWidths);this.unmergedCells=[];},getUnmergedCells:function a(){return null;},getRowCells:function AE(Ag){var AY=this._super(Ag),AW=AY[0],Ak=(AW&&AW.o)||0,Ah=(this.tp===L),Ab=this.interactiveCellsArray,Aj={css:"",v:""},An=[],AX=[],Ao,Ap;if(!Ah){var Ad=this.base.items,Am=this.lookupBase,Al=this.gridData.css,As=AW&&AW.pi,Ai=As&&As.ri,Ar=As&&As.ci,Ae=AW.stt>0;while(As&&Ai>-1&&Ar>-1){AW=AW._p||Ad[Ai].items[Ar];var AZ=j.copy(AW,{});AZ._src=AW;if(!AZ.css){AZ.css=Al[AZ.cni].n;}var Af=Am[AW.tui],Aq=Af&&Af.es[AW.idx];if(Aq){AZ.v=AW.v||Aq.n;AZ._e=Aq;}AZ.rs=1;if(Ae){AZ.at&=~32;}if(Ak>-1){AZ.o=Ak;}if(!AZ.axis&&this.axis){AZ.axis=this.axis;}AZ._ei=Ab.push(AZ)-1;An.splice(0,0,AZ);As=AW&&AW.pi;Ai=As&&As.ri;Ar=As&&As.ci;}for(Ao=0,Ap=AY.length;Ao<Ap;Ao++){var Aa=AY[Ao];if(Aa.rs>1){var Ac=j.copy(Aa,{});Ac.rs=1;Aa=Ac;}AX.push(Aa);}}else{AX=AY;if(Ag>0){return AY;}}if(AX[0]){Aj=j.copy(AX[0],{});Aj.rv=Aj.v="";if(this.tp===L){Aj.n=Aj.v="";Aj.markAll=true;}else{Aj.n="";}Aj._ei=Ab.push(Aj)-1;Aj.at=32;Aj.cs=1;Aj.mark=true;Aj.mix="x";Aj.css=(An[0]&&An[0].css)||Aj.css;delete Aj.ui;delete Aj.tui;delete Aj.fs;delete Aj.mdf;}return[Aj].concat(An.concat(AX));}};mstrmojo._IsEditableXtab=mstrmojo.provide("mstrmojo._IsEditableXtab",{_mixinName:"mstrmojo._IsEditableXtab",update:function AC(AY){var AW,AX=AY.data;if(this._super){this._super(AY);}this.kc={};this.rs={};this.rsDelta={};AR.call(this,AX);if(AX.eg!==undefined){return ;}AW=AY.data.marked;if(AW){M(AW,this.rs);}if(!AX.rw){var AZ=AX.gvs.items.length;AX.rw={row:{bb:1,bc:AZ,tc:AZ},col:{bb:-1,bc:-1,tc:0}};}},initCP:function E(AY,AX,Ad,Aa,Ac,AZ,Ab){var AW={gridData:AY,type:Ad,interactiveCellsArray:AX};AW.base=Aa||AW.base;AW.lookupBase=Ac||AW.lookupBase;AW.axis=AZ||AW.axis;AW.dataSource=this;if(!Ab){if(this.tca===K&&this.editing){if(Ad===L){mstrmojo.EditableXtabTitlesCP=e(mstrmojo.XtabTitlesCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabTitlesCP",tp:L});Ab=new mstrmojo.EditableXtabTitlesCP(AW);}else{if(Ad===I){mstrmojo.EditableXtabCP=e(mstrmojo.XtabCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabCP"});Ab=new mstrmojo.EditableXtabCP(AW);}else{Ab=new mstrmojo.XtabCP(AW);}}}else{if(Ad===L){Ab=new mstrmojo.XtabTitlesCP(AW);}else{Ab=new mstrmojo.XtabCP(AW);}}}else{j.copy(AW,Ab);}return Ab;},createOnDemandCP:function p(AX,AY,AW){var AZ;if(this.tca===K&&this.editing&&AW===I){mstrmojo.EditableXtabOnDemandCP=e(mstrmojo.XtabOnDemandCP,[mstrmojo._IsEditableGridCP],{scriptClass:"mstrmojo.EditableXtabOnDemandCP"});AZ=new mstrmojo.EditableXtabOnDemandCP();}else{AZ=new mstrmojo.XtabOnDemandCP();}AZ.dataSource=this;AZ.blockNum=AX;AZ.rc=AY;return AZ;},preBuildRendering:function B(){var AW=this.defn.txi;if(this._super){this._super();}this.txar=AW.txar;this.sci=AW.sci;this.tca=AW.tca;if(this.tca!==K){this.editing=false;}else{if(mstrApp.isMobile){this.editing=this.alwaysEditing=true;}}this.nm={};this.ko={};this.dirtyRows={};this.requiredCellsMap={};this.dicGroupMap={};this.lastIndex=0;this.lastHeaderIndexs={};this.columnNames={};},postBuildRendering:function Z(){if(this._super){this._super();}if(this.tca===K&&this.gridData.eg===undefined){var AY=Math.max(-16,-this.domNode.offsetTop),AZ=this;if(!this.alwaysEditing){var AW=mstrmojo.Button.newIconButton(mstrmojo.desc(8324,"Mark rows"),"mstrmojo-EditButton",function(){if(!AZ.recalculating){AZ.editing=!AZ.editing;AZ.refresh();}}),AX=new mstrmojo.Button(mstrmojo.hash.copy({cssText:"top:"+AY+"px;"},AW));AX.render();this.domNode.appendChild(AX.domNode);if(this.editing){this.domNode.style.zIndex=1000;q.addClass(AX.domNode,"close");}else{q.removeClass(AX.domNode,"close");}}}},dataDownloadErr:function N(){if(this.txar&&this.recalculating){this.delegateGridAction(function(AW){AW.isDownloading=false;},"isDownloading");this.rhsCP.initContent();this.valuesCP.initContent();q.removeClass(this.maskNode,"wait");this.recalculating=false;}},dataDownloaded:function V(AZ,AX){var AY=AZ.data;if(this.txar){var AW=AX.blockNum,Aa;if(this.recalculating){AX.recalculating=true;this.interactiveCellsArray=[];this.requiredCellsMap={};this.dirtyRows={};this.lastIndex=0;this.lastHeaderIndexs={};this.kc={};this.nm={};this.updatedCellsMap={};this.recalculating=false;this.destroyDICs();}else{AX.recalculating=false;}if(AW===0){this.gridData=AY;}if(AY.eg){this.refresh();return ;}Aa=this.interactiveCellsArray;this.initCP(AY,Aa,L,null,null,null,this.titlesCP);this.initCP(AY,Aa,AS,AY.ghs.chs,AY.gts.col,f,this.chsCP);this.titlesCP.initContent();this.chsCP.initContent();this.delegateGridAction(function(Ab){if(Aa&&Aa.length===0){grid.refresh();}},"refreshOnDataDownloaded");}if(this._super){this._super(AZ,AX);}AR.call(this,AY);AB(this.rs,AY.rw.row);if(AY.marked){M(AY.marked,this.rs);this.rsDelta={};}},closeDownloadStatus:function Y(){if(this._super){this._super();}mstrmojo.css.removeClass(this._STATUS,"recalculate");},kc:null,ko:null,nm:null,rs:null,dicGroupMap:null,lastIndex:0,lastHeaderIndexs:{},columnNames:null,getDataInputInfo:function h(AW,AZ){var Ae=AW._ei,Ad,AY=this.node.defn,Am=this.gridData;if(AW.mark){Ad=AW.o;if(AW.stt){this.rs[Ad]=0;return ;}this.ko[Ad]=Ae;AW.rv=AW.v=this.rs[Ad]||-1;this.kc[Ae]={rowop:true};return{key:Ae,t:AQ,vls:[{v:-1},{v:1}],wm:1,w:22,hm:1,h:16,dm:1};}var Ah=this.model.getCellTitleInfo(AW,this.dataBlocks[AW._gd]),An=Ah&&Ah.title,Aj=An&&An.es,Ac=(AW.mti!==undefined)?AW.mti:AW.mix,Aa=(AW.mix!==undefined),Ak=AY.txi.dic,Ag;Ag=j.copy(!Aa?Ak.att&&An&&Ak.att[An.id]&&Ak.att[An.id][An.fs[AW.fi].id]:Ak.mtx&&Ak.mtx[Aj[Ac].oid],{});if(!Ag){return null;}if(this.columnNames[AZ]===undefined){this.columnNames[AZ]=!Aa?An.n:Aj[Ac].n;}if(AV(Ag)){Ag.vls=(Am.dcv&&Am.dcv[Ag.k])||[];}if(Am.tcs&&Am.tcs[Ag.k]){var Af=Am.tcs[Ag.k];if(Af&F){Ag.disabled=true;}if(Af&AM){Ag.req=1;}}if(Ae>=0&&!this.kc[Ae]){var Al=!AW.axis,Ab={isMv:Al};if(Al){var Ai=AW.pi,AX=Ai&&Ai.top;Ab.co=(AX&&AX.ci)||0;Ab.metric_id=Aj[Ac].oid;AW.o=Ab.o=(AW._lp&&AW._lp.o)||0;Ab.tp=C;}else{Ab.ax=AW.axis;Ab.atid=An.id;Ab.form_id=An.fs[AW.fi].id;Ab.o=AW.o;Ab.tp=X;Ab.fi=AW.fi;Ab.ui=AW.ui;Ab.tui=AW.tui;Ab.rs=AW.rs;}Ab.dt=Ag.dt;if(AV(Ag)){Ab.vls=Ag.vls;Ab.k=Ag.k;}this.kc[Ae]=Ab;}Ag.key=Ae;if(Ag.dm){Ag.dm=parseInt(Ag.dm,10);}return Ag;},isEditableHeader:function G(AW){var AX=this.node.defn,AY=AX.txi.dic;if(AW.sst||!AY){return false;}if(AW.id!==undefined&&AY.att){return !!(AY.att[AW.id]&&(AW.fix?AY.att[AW.id][AW.fid]:AY.att[AW.id]));}if(AW.tui!==undefined&&AW.mix!==undefined&&AY.mtx){return !!(AY.mtx[AW._e.oid]);}return false;},dataChanged:function R(AY,AZ,AX,Aa,AW){if(!this.recalculating){if(Aa){this.nm[AY]=Aa;}if(this._super){this._super(AY,AZ,AX,Aa,AW);}}},updateValue:function g(AZ,AX){if(this._super){this._super(AZ,AX);}var Ad=this.interactiveCellsArray[AZ],Ah=AX.v,Ai,AW=AP.call(this,Ad);this.lmr=null;Ai=z.call(this,Ad,AZ,AX);this.updateDirtyUnits();if(Ad.r!==Ah){if(!Ad.mark){Ad.mdf=1;mstrmojo.css.removeClass(Ai,"required");AG.apply(this,[Ad,AW]);this.flagDirtyUnit(Ai);}}else{this.clearDirtyUnit(Ai);}if(this.onCellUpdated){this.onCellUpdated(Ad,Ai);}if(this.tca===K){if(Ad.mark){var Ab=Ad.markAll?-1:Ad.o,Af=this.rsDelta;this.rs[Ab]=Ah;this.lmr={r:Ab,v:Ah};if(Ad.markAll){Af=this.rsDelta={};Af[Ab]=Ah;this.mghMarks={};}else{if(Af[Ab]&&Af[Ab]!==Ah){delete Af[Ab];}else{if(Af[-1]!==Ah){Af[Ab]=Ah;}}}}else{if(this.rs[Ad.o]!==0){this.rs[Ad.o]=1;}if(!this.editing&&this.mghMarks&&(Ad.mix===undefined)){if(!this.mghMarks[Ad.o]||this.mghMarks[Ad.o].rs<Ad.rs){this.mghMarks[Ad.o]={o:Ad.o,rs:Ad.rs,k:AZ};}var Aa,Ae,Ac=this;j.forEach(this.rsDelta,function(Aj,Ak){Aa=parseInt(Ak,10);Ae=parseInt(Ad.o,10);if(Aa>=Ae&&Aa<=(Ae+Ad.rs)){delete Ac.rsDelta[Ak];}});}else{this.rsDelta[Ad.o]=1;}if(!this.editing&&Ad.rs>1){var AY=Ad.o+1;while(AY-Ad.o<Ad.rs){if(!b(this.rhsCP,AY,this.rs)){this.rs[AY]=1;}AY+=1;}}if(this.editing){var Ag=this.dicGroupMap.m_x.widgetsMap[this.ko[Ad.o]];if(Ag){Ag.set("checked",true);}}}}if(this.txar&&!Ad.mark){return true;}return false;},autoRefresh:function AF(AW){this.delegateGridAction(function(AX){AX.invalidAllPages();},"invalidAllPages");this.rhsCP.invalid();this.valuesCP.invalid();q.addClass(this._STATUS,"recalculate");this.delegateGridAction(function(AX){var AY=AX.parent;if(AY&&!AX.connectedScrollbox){AY.connectScrollbox(AX);AX.connectedScrollbox=true;}AX.onscroll(true,AW);},"scrollOnAutoRefresh");this.recalculating=true;},getKeyContext:function P(AW){return this.kc[AW];},getUpdateObject:function T(){var Ab=[],AZ,Ac,Ad,AX=this.lmr,AY,Aa={};if(AX){this.lmr=null;return{manipulation:AN,actionType:(AX.v===-1)?AA:x,rowOrdinal:AX.r,nodeKey:this.k,sliceId:this.sid};}Ac=this.getUpdatedValues();for(AZ=0;AZ<(Ac&&Ac.length);AZ++){if(!Ac[AZ].rowop){Ad=Ac[AZ];break;}}if(Ad){AY=mstrmojo.string.encodeXMLAttribute(String(Ad.v));if(Ad.k!==undefined&&Ad.vls){var AW=v.find(Ad.vls,"v",Ad.v);if(AW!==-1){Aa={controlKey:Ad.k,elementId:Ad.vls[AW].eid};}}if(!!Ad.isMv){Ab.push(j.copy(Aa,{rowOrdinal:Ad.o,colOrdinal:Ad.co,newValue:AY,dataType:Ad.dt}));}else{Ab.push(j.copy(Aa,{rowOrdinal:Ad.o,attId:Ad.atid,formId:Ad.form_id,unitIndex:Ad.tui||Ad.ui,newValue:AY,dataType:Ad.dt}));}}return{manipulation:H,nodeKey:this.k,sliceId:this.sid,cells:Ab,autoRefresh:this.txar};},getUpdates:function U(){var Ag=this,Ab,Ac,AW=Ag.getUpdatedValues(),AZ=this.rsDelta,Aa=[],Af=[],Ad=false,AY="";Aa.push('<gr rw_tree_type="'+Ag.treeType+'" rw_node_key="'+Ag.k+'" slice_id="'+Ag.sid+'">');for(Ab in AW){if(AW.hasOwnProperty(Ab)){Ac=AW[Ab];if(!Ac.rowop){var Ah=mstrmojo.string.encodeXMLAttribute(String(Ac.v)),AX=v.find(Ac.vls,"v",Ac.v);if(Ac.k&&Ac.vls&&AX===-1){if(!!Ac.isMv){Af.push('<cli cordinal="'+Ac.co+'" metric_id="'+Ac.metric_id+'"><updt types="'+AD+'" rordinal="'+Ac.o+'" rw_control_key="'+Ac.k+'"/></cli>');}else{Af.push('<cli ax="'+Ac.ax+'" attribute_id="'+Ac.atid+'" form_id="'+Ac.form_id+'"><updt types="'+AU+'" ordinal="'+Ac.o+'" rw_control_key="'+Ac.k+'" flags="1"/></cli>');}}else{if(Ac.k&&Ac.vls&&AX!==-1){AY='rw_control_key="'+Ac.k+'" element_id="'+mstrmojo.string.encodeXMLAttribute(String(Ac.vls[AX].eid))+'" ';}if(!!Ac.isMv){Af.push('<cli cordinal="'+Ac.co+'" metric_id="'+Ac.metric_id+'"><updt types="'+Ac.tp+'" rordinal="'+Ac.o+'" '+AY+'value="'+Ah+'" dt="'+Ac.dt+'"/></cli>');}else{Af.push('<cli ax="'+Ac.ax+'" attribute_id="'+Ac.atid+'" form_id="'+Ac.form_id+'"><updt types="'+Ac.tp+'" ordinal="'+Ac.o+'" '+AY+'value="'+Ah+'" dt="'+Ac.dt+'"'+(this.mghMarks?' flags="1"':"")+"/></cli>");}}Ad=true;}}}if(!j.isEmpty(this.mghMarks)){var Ae=this;j.forEach(this.mghMarks,function(Ai,Aj){AY=Ae.getKeyContext(Ai.k);Af.push('<mark rordinal="'+Aj+'" types="4" flags="1" attribute_id="'+AY.atid+'" form_id="'+AY.form_id+'"/>');});}if(AZ&&!j.isEmpty(AZ)){Ad=true;v.forEach(j.keyarray(AZ).sort(),function(Ai){if(AZ[Ai]===1){Af.push('<mark rordinal="'+Ai+'" types="4"/>');}else{Af.push('<mark rordinal="'+Ai+'" types="5"/>');}});}Aa.push(Af.join(""));Aa.push("</gr>");if(!Ad){Aa=[];}return Aa.join("");},flagDirtyUnit:function c(AX){if(AX&&this.sci){if(this._super){this._super(AX);return ;}var AW=document.createElement("div"),Ab,AY=false,Aa=q.getStyleValue(this.domNode,o.CSS3_TRANSFORM),AZ;AW.className="flag-container";AW.innerHTML='<div class="dirty-cell"/>';if(AX.insertBefore){AX.insertBefore(AW,AX.firstChild);AZ=(AW.offsetParent===AX);}AY=mstrmojo.string.isEmpty(Aa)||Aa==="none";Ab=AW.firstChild;Ab.style.top=((!AY||AZ)?(-AW.offsetTop):(AX.offsetTop-AW.offsetTop))+"px";Ab.style.left=(AX.clientWidth+((!AY||AZ)?(-AW.offsetLeft):(AX.offsetLeft-AW.offsetLeft))-8)+"px";}},updateDirtyUnits:function AO(){var AW=this.domNode,AY=AW.getElementsByClassName("dirty-cell"),Aa=q.getStyleValue(AW,o.CSS3_TRANSFORM),AX=mstrmojo.string.isEmpty(Aa)||Aa==="none",AZ;v.forEach(AY,function(Ad){var Ab=Ad.parentNode,Ac=Ab&&Ab.parentNode;AZ=Ac.insertBefore?Ab.offsetParent===Ac:false;Ad.style.top=((!AX||AZ)?(-Ab.offsetTop):(Ac.offsetTop-Ab.offsetTop))+"px";Ad.style.left=(Ac.clientWidth+((!AX||AZ)?(-Ab.offsetLeft):(Ac.offsetLeft-Ab.offsetLeft))-8)+"px";});},clearDirtyUnit:function AT(AW){if(this._super){this._super(AW);return ;}var AX=AW.firstChild;if(AW){if(AX&&AX.className&&AX.className==="flag-container"){AW.removeChild(AX);}}},onvisibleChange:function t(){if(this.visible===true){var AW=this;setTimeout(function(){AW.configureActions();},10);}},configureActions:function W(){if(this.visible===false){return ;}this.configureCellsAction();this.lastIndex=this.interactiveCellsArray.length;var AW=this;this.delegateGridAction(function(AX){l.call(AW,AX);},"markEditableColHeaders");this.registerTxWidget();if(this._super){this._super();}},configureCellsAction:function AH(AY,Ai,A3,Aa){var Ag=this,Aw=this.getTargetZone(),A3=A3||Aw.posMap,Ae=AY||this.interactiveCellsArray,Ai=(Ai===undefined?this.lastIndex:Ai),A8=this.dicGroupMap,Ap=[],A6,Ah,A4,A2,Al,Am,An,Ay,A7,Ac,Au,Ad,A0,Ak=function(){var A9=[];this.delegateGridAction(function(BA){A9.push(BA);},"configureActions");return A9;},Ao=Ak.call(this),Aq=(Ao.length>1),Af=function(A9){var BB=A9.length,BA;for(BA=0;BA<BB;BA++){Ag.flagDirtyUnit(A9[BA]);}};for(A6=Ai,Ah=Ae.length;Ae[A6]&&A6<Ah;A6++){Al=Ae[A6];Am=A3&&A3[A6];if(!Am&&Aq){Aw=(Ao[0]===Aw)?Ao[1]:Ao[0];A3=Aw&&Aw.posMap;Am=A3&&A3[A6];}if(Am&&((Al.at&32)>0)){Al.at=32;if(Al.rv==null){Al.rv=isNaN(Al.mix)?Al._e.n:Al.v;}Ay=J(Al);Au=this.getDataInputInfo(Al,Ay);Ad=A8[Ay];if((Al.axis===f||Al.axis===Q&&Al.o===undefined)&&this.clonedColHeader&&this.clonedColHeader.isRendered()){A0=this.clonedColHeader.getTableNode();}else{if(Al.axis===Q&&this.clonedRowHeader){if(this.clonedRowHeader.isRendered()){A0=this.clonedRowHeader.getTableNode();}else{A0=Aw.tableNode;if(Au&&!Ad){this.clonedRowHeader.addGroupKey(Ay);}this.clonedRowHeader.addTempDICInfo(Al,Am);}}else{A0=Aw.tableNode;}}An=A0.tBodies[Am.page].rows[Am.row].cells[Am.cell];if(Au){if(!Ad){Ad=A8[Ay]=mstrmojo.DICFactory.createDICGroup({gk:Ay,dic:Au,owner:this,openerType:k});}var Av=!u(Al)||Au.disabled;var Aj={value:(Al.rv===undefined)?(Al.v||Al.n):(typeof Al.rv==="string"?mstrmojo.string.decodeHtmlString(Al.rv):Al.rv),dv:Al.v||Al.n,ts:Al.ts,markAll:Al.markAll,openerNode:An,k:Al._ei,ownerCell:Al,enabled:!Av,popupTitle:this.columnNames[Ay]},AZ=Aw.cp.stackedRh;if(AZ&&Al.singleStack&&(mstrmojo.DICConfig.showDICByDefault(Au,1)||mstrmojo.DICConfig.hasDICPreview(Au,1))){var A1=An.offsetHeight;An.className+=" igDIC";An.style.cssText="height:"+A1+"px;";if(Ad.showByDefault){An.className+=" sbd";}mstrmojo.hash.copy({inlineExtraCssText:"position:absolute;top:"+parseInt(AZ/2-A1/2+1,10)+"px;"},Aj);}Ad.addDIC(Al._ei,Aj);A7=Am.page*Aw.rowsPerPage+Am.row;if(Au.req){for(A2=0;A2<(this.editing?1:(Al.rs||1));A2++){Ac=this.requiredCellsMap[A7+A2];if(!Ac){this.requiredCellsMap[A7+A2]=Ac=[];}Ac.push(Al);}}if(Al.mdf&&!Aa){Ap.push(An);AG.apply(this,[Al,A7]);}if(Av&&!mstrmojo.DICConfig.showDICByDefault(Au,1)){var As=document.createElement("div"),At=document.createElement("span"),Ax=An.currentStyle||document.defaultView.getComputedStyle(An,null),AW={marginLeft:"-"+Ax.paddingLeft,paddingLeft:Ax.paddingLeft,marginRight:"-"+Ax.paddingRight,paddingRight:Ax.paddingRight,marginTop:"-"+Ax.paddingTop,paddingTop:Ax.paddingTop,marginBottom:"-"+Ax.paddingBottom,paddingBottom:Ax.paddingBottom};As.className="xtab-dic-disabled";j.copy(AW,As.style);At.appendChild(An.firstChild);As.appendChild(At);An.appendChild(As);}}}}this.lastIndex=A6;var A5=Aw.tableNode.rows,Ar=A5&&A5.length>=2,Ab,AX=[],Az=[];if(Ar){Ab=A5[1].children;v.forEach(Ab,function(A9){AX.push(A9.clientWidth);Az.push(A9.clientHeight);});}for(Ay in A8){A8[Ay].render();}if(Ar){AJ(Ab,AX,Az,Aw.tableNode);}setTimeout(function(){Af(Ap);},25);},destroyDICGroup:function r(AX){var AY=this.dicGroupMap,AW,AZ,Aa;if(AY&&(AX instanceof Array)){for(AW in AX){AZ=AX[AW];Aa=AY[AZ];if(Aa){Aa.destroy();delete AY[AZ];}}}},showPopupDIC:function A(AZ){var AX=AZ&&o.findAncestorByAttr(AZ,"ei",true,this.viewport);if(AX){var Aa=AX.node,AW=this.getCellForNode(Aa),AY=this.dicGroupMap[J(AW)];if(AY&&!AY.dic.disabled&&!(AW.tav&&(AW.tav&F))){AY.showPopupDIC(AW._ei);return true;}}return false;},onclick:function AK(AX){var AW=mstrmojo.dom.eventTarget(window,AX.e);if(!this.showPopupDIC(AW)&&this._super){this._super(AX);}},unrender:function D(){if(this._super){this._super();}this.destroyDICs();},destroyDICs:function w(){var AW=this.dicGroupMap;this.dicGroupMap={};setTimeout(function(){var AX;for(AX in AW){AW[AX].destroy();}},10);},checkRequiredObjects:function O(){if(this.hasRendered&&!(this.isInteractiveGrid&&this.isInteractiveGrid())&&!this.gridData.eg){var AY=this.getTargetZone();if(!AY){return true;}var Aa=AY.posMap,Ac,AZ=this,AX=this.rs,AW=true,Ab=function(Ai,Ae){var Ah=true,Af=AZ.requiredCellsMap[Ai],Ad=(Af&&Af.length)||0,Ag;for(Ag=0;Ag<Ad;Ag++){if(!Af[Ag].mdf){q.toggleClass(AY.getNodeByPosition(Aa[Af[Ag]._ei]),"required",Ae);Ah=!Ae;}}return Ah;};if(this.tca===K){for(Ac in AX){AW=Ab(parseInt(Ac,10)+1,AX[Ac]>0)&&AW;}}else{for(Ac in this.dirtyRows){AW=Ab(Ac,true)&&AW;}}return AW;}return true;},editNext:function n(AY){if(this.recalculating){return false;}var AZ=this.interactiveCellsArray,AW=AZ.length,Aa=AY+1,Ab,AX;do{if(Aa>=AW){Aa%=AW;}if(Aa===AY){return false;}Ab=AZ[Aa];var Ac=this.dicGroupMap[J(Ab)];if(Ac&&!Ac.dic.disabled&&u(Ab)){if(mstrmojo.DICConfig.isKeyNavigable(Ac.dic)){if(!Ac.showByDefault){Ac.showPopupDIC(Aa);}else{AX=Ac.widgetsMap[Aa];AX.focus();}return true;}}Aa++;}while(true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.XtabZone","mstrmojo.css","mstrmojo.hash","mstrmojo.dom");var b=0,A=1,z=2,J=3,k={1:"_BL",2:"_TR",3:"_TL"},AH=1,u=2,n={position:"absolute",overflow:"hidden",width:"auto"},q={position:"absolute",top:0,left:0},E=mstrmojo.css,d=mstrmojo.hash,h=mstrmojo.dom;function L(AL,AK,AI,AJ){if(AJ){AL.replaceChild(AK,AL.tBodies[AI]);}else{AL.appendChild(AK);}}function I(AI){AI.offsetCellNode=null;AI.fstValueCellValidation=null;}function S(){var AO={x:0,y:0};if(this.lockHeadersCase&&!this.offsetCellNode&&!this.fstValueCellValidation){var AP=this.titlesCP.getSpanDimension(),AI=AP.nRow,AM=AP.nCol,AX=this.scrollboxNode.firstChild.firstChild,AT=AX&&AX.rows[AI];if(AI===0||AM===0){this.lockHeadersCase=b;return null;}if(!AX.rows.length){return null;}if(!AT){this.fstValueCellValidation|=AH;this.lockHeadersCase&=AH;AT=AX.rows[0];}var AW=AT&&AT.cells,AS=(AW&&AW.length)||0,AK,AQ,AR;for(AQ=AR=0;AQ<AS&&AR<AM;AQ++){AR+=AW[AQ].colSpan||1;}AK=AW&&AW[AQ];if(!AK){this.fstValueCellValidation|=u;this.lockHeadersCase&=u;this.offsetCellNode=AW&&AW[0];}else{this.offsetCellNode=AK;}var AV=this;var AL=function(){AV._adjustClipSize();};var AN=function(Ab,Ad){var Aa,AZ,AY,Ac;for(Aa=0;Aa<Ad;Aa++){AY=Ab.rows[Aa].getElementsByTagName("img");for(AZ=0;AZ<AY.length;AZ++){Ac=AY[AZ];Ac.onload=AL;Ac.onerror=AL;}}};AN(AX,AI||0);}if(this.lockHeadersCase){var AU=h.position(this.offsetCellNode),AJ=h.position(this.scrollboxNode.firstChild);AO.x=AU.x-AJ.x;AO.y=AU.y-AJ.y;}return AO;}function O(AK,AI,AJ,AO){if(this.parent.isAutoTableLayout()&&this.isRendered()){if(!this.fragment){this.fragment=document.createDocumentFragment();}if(AO){var AL=AK.cloneNode(true);if(!this.renderedPages){p.call(this);}if(AJ&&this.renderedPages[AI]){var AN=this.renderedPages[AI],AM=this.getTableNode();if(AN.parentNode===AM){AM.replaceChild(AL,AN);}else{this.fragment.replaceChild(AL,AN);}}else{this.fragment.appendChild(AL);}this.renderedPages[AI]=AL;}}}function AC(AJ,AI){for(var AK in AJ){if(AJ[AK]!=AI[AK]){return false;}}return true;}function r(){var AJ=this.fragment,AI,AM,AK;if(AJ&&AJ.childNodes.length>0&&this.isRendered()){var AL=this.getTableNode();if(this.parent.isOutlineMode){while(AJ.childNodes.length>0){AI=AJ.childNodes[0];AM=parseInt(AI.getAttribute("n"),10);if(AL.tBodies[AM]){AL.replaceChild(AI,AL.tBodies[AM]);}else{AL.appendChild(AI);}}}else{AL.appendChild(AJ);}}}function o(){var AJ=this.xtabClonedNodes,AN=this.cellHoverMgr,AL,AM,AI,AK;if(!AN){return ;}for(AI in AJ){AL=AJ[AI];AK=AL.getID();AM=AL.isRendered();if(!this.zones[AK]&&AM){this.zones[AK]={tableNode:AL.getTableNode()};if(typeof (AN)!="string"){AN.addMgrElement(AK);}}}}function N(AJ,AI){var AK=this.parent,AL=AK&&AK.zone;if(AI&&AL&&AL.addCoverTable){AL.addCoverTable(AJ,AI);}}function l(AJ,AI,AK){AJ.width=((AK&&AK.width<AI.right)?AK.width:AI.right)+"px";AJ.height=((AK&&AK.height<AI.bottom)?AK.height:AI.bottom)+"px";}function p(){this.renderedPages={};var AN=this.getTableNode(),AJ=AN.tBodies,AK=this.fragment,AP=AK&&AK.children,AM=this.renderedPages,AI,AL,AO=function(AQ){var AR=AQ.getAttribute("n")||0;AM[AR]=AQ;};for(AL=0,AI=AJ.length;AL<AI;++AL){AO(AJ[AL]);}for(AL=0,AI=(AP&&AP.length)||0;AL<AI;++AL){AO(AP[AL]);}}function K(AM,AI,AJ){var AK=AI&&AI.rows[AM.row],AL=AK&&AK.cells[AM.cell];if(AL&&AJ!==AL){AK.replaceChild(AJ.cloneNode(true),AL);}}function R(AJ,AI){if(this.isRendered()){if(!this.renderedPages){p.call(this);}K(AJ,this.renderedPages[AJ.page||0],AI);}}mstrmojo.XtabZoneWithClonedCover=mstrmojo.declare(mstrmojo.XtabZone,null,{scriptClass:"mstrmojo.XtabZoneWithClonedCover",isAutoTBLayout:null,addCoverTable:function M(AI,AJ){if(!this.coverTableNodes){this.coverTableNodes={};}this.coverTableNodes[k[AI]]=AJ;},getClonedNodesByPositions:function Q(AQ){var AP=this.coverTableNodes,AJ=AP&&AP[k[J]],AS=AP&&AP[k[z]],AM=AP&&AP[k[A]],AL=[AJ,AS,AM],AI,AT,AO=[],AK=function(AV,AX){var AU=AV&&AV.tBodies[AX.page||0],AW=AU&&AU.rows[AX.row];return AW&&AW.cells[AX.cell];};for(var AN in AQ){AI=AQ[AN];if(AI.page&&AM){AT=AK(AM,AI);AT&&AO.push(AT);}else{for(var AR in AL){if(AL[AR]){AT=AK(AL[AR],AI);AT&&AO.push(AT);}}}}return AO;},setHilites:function T(AS,AM){var AN=AM.getAttribute("ei"),AR=this.eiMap[AN]||(this.posMap[AN]&&[this.posMap[AN]])||[],AP=this.hiliteCellsMap,AL=this.parent,AJ=this.getNodesByPositions(AR),AI=function(AT){E.addClass(AT,"sc_"+AL.k);};if(!AP[AS]){AP[AS]={pos:[],nodes:[]};}if(!AJ.length){AI(AM);AP[AS].nodes.push(AM);}else{if(AR.length!==0){var AK=this.getClonedNodesByPositions(AR),AQ=AP[AS].pos;AJ=AK.concat(AJ);for(var AO in AJ){AI(AJ[AO]);}AP[AS].pos=AQ.concat(AR);}}},clearHilites:function C(AJ){var AM=this.hiliteCellsMap[AJ],AK=AM&&AM.nodes,AN=(AK&&AK.length===0&&AM.pos)||[],AL=this.parent;if(AN.length!==0){AK=this.getNodesByPositions(AN);AK=AK.concat(this.getClonedNodesByPositions(AN));}for(var AI in AK){E.removeClass(AK[AI],"sc_"+AL.k);}this.hiliteCellsMap[AJ]={nodes:[],pos:[]};},isAutoTableLayout:function AA(){if(this.isAutoTBLayout===null&&this.tableNode){this.isAutoTBLayout=(this.tableNode.style.tableLayout!=="fixed");}return this.isAutoTBLayout;},unrender:function B(AI){this.coverTableNodes={};this.isAutoTBLayout=null;this._super(AI);}});mstrmojo.XtabClonedNode=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.XtabClonedNode",domNode:null,left:0,top:0,lockType:b,scrollDM:mstrmojo.emptyFn,refreshNode:mstrmojo.emptyFn,createDomNode:function a(){var AI=this._getClonedFragment();this.containerNode.appendChild(AI);N.call(this,this.lockType,this.getTableNode());},getID:function U(){return this.id;},getTableSize:function Y(){var AJ=this.parent.zone.tableNode,AI=this.parent.hasCustomScrollbar?"offset":"client";return{width:AJ[AI+"Width"],height:AJ[AI+"Height"]};},isRendered:function H(){return !!this.domNode;},getTableNode:function AF(){return this.isRendered()?this.domNode.firstChild.firstChild:null;},destroy:function v(AI){if(this.isRendered()){this.unrender(true);}this._super(AI);},unrender:function B(AI){this.domNode=null;this.lastClipRect=null;this._super&&this._super(AI);},insertPage:function AG(AK,AI,AJ,AL){if(this.isRendered()){L(this.getTableNode(),AK.cloneNode(true),AI,AJ);}},_getClipStr:function Z(AI){this.lastClipRect=AI;return"rect("+AI.top+"px, "+AI.right+"px, "+AI.bottom+"px, "+AI.left+"px)";},adjustClip:function c(AK){var AI=this._getClipRect&&this._getClipRect(AK);if(this.isRendered()){if(this.getTableNode().offsetHeight>this.domNode.offsetHeight){this.domNode.style.height=this.getTableNode().offsetHeight+"px";}if(AI&&!(this.lastClipRect&&AC(AI,this.lastClipRect))){this.domNode.style.clip=this._getClipStr(AI);var AJ={};l(AJ,AI,this.getTableSize());d.copy(AJ,this.curtainNode.style);}}this.offset=AK;}});mstrmojo.XtabClonedRowHeader=mstrmojo.declare(mstrmojo.XtabClonedNode,null,{scriptClass:"mstrmojo.XtabClonedRowHeader",lockType:A,interactiveCellsArray:[],interactivePosArray:[],dicGroupKey:[],init:function AD(AI){this._super(AI);if((this.lockHeadersCase&A)&&this.left){this.createDomNode();}},_getClipRect:function D(AJ){var AI=this.parent.hasCustomScrollbar?"offset":"client";AJ=AJ||this.offset;return{top:0,right:AJ.x||0,bottom:this.toCloneNode[AI+"Height"],left:0};},_clearLocalData:function G(){this.interactiveCellsArray=[];this.interactivePosArray=[];this.dicGroupKey=[];},_getClonedFragment:function X(){var AI=document.createDocumentFragment(),AM=this.toCloneNode.cloneNode(true),AL=document.createElement("div"),AK=d.clone(n),AN=d.clone(q),AJ=this._getClipRect();AK.clip=this._getClipStr(AJ);AK.zIndex=2;if(this.parent.zone&&this.parent.zone.autoFitWindow){AK.width="100%";}AK.overflowY="hidden";AM.id=this.getID();d.copy(AK,AM.style);d.copy({top:-this.top+"px"},AM.firstChild.style);this.domNode=AM;l(AN,AJ,this.getTableSize());AN.zIndex=1;d.copy(AN,AL.style);this.curtainNode=AL;AI.appendChild(AM);AI.appendChild(AL);return AI;},scrollDM:function f(AJ,AO,AQ){var AK=this.parent.shouldClipLockableXtab,AL;if(this.lockHeadersCase&A){if(!this.isRendered()){this.top=AO;this.createDomNode();this.domNode.style.width="100%";this.domNode.style.height="100%";var AN=this;setTimeout(function(){AN._updateDICGroup();},10);}else{var AP=this.domNode.firstChild,AI=AP.style;AI.top=-AO+"px";this.top=AO;if(AK){if(AI.position!=="absolute"){AI.position="absolute";AI.width="100%";}if(this.lockHeadersCase&z){AL={top:this.offset.y+AO,right:this.offset.x,bottom:AP.offsetHeight,left:0};AI.clip=this._getClipStr(AL);}}}if(AK&&this.isRendered()){var AS=this.getTableNode();AL={top:0,right:Math.max(AS.offsetWidth,AQ.offsetWidth),bottom:Math.max(AS.offsetHeight,AQ.offsetHeight),left:this.offset.x+AJ};var AM=AQ.style,AR=AQ.parentNode.style;if(AM.position!=="absolute"){if(isNaN(parseInt(AR.width,10))){AR.width=AQ.parentNode.offsetWidth+"px";}if(isNaN(parseInt(AR.height,10))){AR.height=AQ.parentNode.offsetHeight+"px";}AM.position="absolute";AM.width="100%";if(isNaN(parseInt(AR.width,10))){AR.width=AL.right+"px";}}AM.clip=this._getClipStr(AL);}}},_updateDICGroup:function j(){var AI=this.parent;if(this.interactivePosArray.length&&this.interactiveCellsArray.length){AI.destroyDICGroup(this.dicGroupKey);AI.configureCellsAction(this.interactiveCellsArray,0,this.interactivePosArray,true);}this._clearLocalData();},addTempDICInfo:function AB(AI,AJ){if(!this.isRendered()){this.interactiveCellsArray.push(AI);this.interactivePosArray.push(AJ);}},addGroupKey:function AE(AI){if(!this.isRendered()){this.dicGroupKey.push(AI);}},onCellUpdated:function t(AN,AK){if(this.isRendered()){var AI=this.getTableNode(),AJ=AI&&AI.tBodies[AN.page||0],AL=AJ&&AJ.rows[AN.row],AM=AL&&AL.cells[AN.cell];if(AM&&AK!==AM){AL.replaceChild(AK.cloneNode(true),AM);}}},unrender:function B(AI){this._clearLocalData();this._super&&this._super(AI);}});mstrmojo.XtabClonedColHeader=mstrmojo.declare(mstrmojo.XtabClonedNode,null,{scriptClass:"mstrmojo.XtabClonedColHeader",lockType:z,init:function AD(AI){this._super(AI);if(this.lockHeadersCase&z){this.createDomNode();}},_getClipRect:function D(AJ){var AI=this.parent.hasCustomScrollbar?"offset":"client";AJ=AJ||this.offset;return{top:0,right:this.toCloneNode[AI+"Width"],bottom:AJ.y||0,left:0};},_getClonedFragment:function X(){var AI=document.createDocumentFragment(),AM=this.toCloneNode.cloneNode(true),AL=document.createElement("div"),AK=d.clone(n),AN=d.clone(q),AJ=this._getClipRect();AK.clip=this._getClipStr(AJ);AK.zIndex=4;if(this.parent.zone&&this.parent.zone.autoFitWindow){AK.width="100%";}AM.id=this.getID();d.copy(AK,AM.style);d.copy({left:-this.left+"px"},AM.firstChild.style);this.domNode=AM;l(AN,AJ,this.getTableSize());AN.zIndex=3;d.copy(AN,AL.style);this.curtainNode=AL;AI.appendChild(AM);AI.appendChild(AL);return AI;},scrollDM:function f(AJ,AN,AP){var AK=this.parent.shouldClipLockableXtab,AL;if(this.lockHeadersCase&z){var AR=this.getTableNode();var AO=this.domNode.firstChild,AI=AO.style;this.domNode.style.width="100%";this.domNode.style.height="100%";AI.left=-AJ+"px";this.left=AJ;if(AK){if(AI.position!=="absolute"){AI.position="absolute";AI.width="100%";}if(this.lockHeadersCase&A){AL=this._getClipRect();AL.left=AJ+this.offset.x;AL.right=Math.max(AO.offsetWidth,AR.offsetWidth);AI.clip=this._getClipStr(AL);}}if(AK){AL={top:this.offset.y+AP.parentElement.scrollTop,right:Math.max(AR.offsetWidth,AP.offsetWidth),bottom:Math.max(AR.offsetHeight,AP.offsetHeight),left:0};if(this.lockHeadersCase&A){AL.left=this.offset.x+AJ;}var AM=AP.style,AQ=AP.parentNode.style;if(AM.position!=="absolute"){if(isNaN(parseInt(AQ.width,10))){AQ.width=AP.parentNode.offsetWidth+"px";}if(isNaN(parseInt(AQ.height,10))){AQ.height=AP.parentNode.offsetHeight+"px";}AM.position="absolute";AM.width="100%";if(isNaN(parseInt(AQ.width,10))){AQ.width=AR.offsetWidth+"px";}}AM.clip=this._getClipStr(AL);}}},insertPage:O,refreshNode:r,onCellUpdated:R,unrender:function B(AI){this._super(AI);this.fragment=null;this.renderedPages=null;}});mstrmojo.XtabClonedTitle=mstrmojo.declare(mstrmojo.XtabClonedNode,null,{scriptClass:"mstrmojo.XtabClonedTitle",_getClipRect:function D(AI){AI=AI||this.offset;return{top:0,right:AI.x||0,bottom:AI.y||0,left:0};},init:function AD(AI){this._super(AI);if(this.lockHeadersCase===J&&this.left){this.createDomNode();}},_getClonedFragment:function X(){var AI=document.createDocumentFragment(),AM=this.toCloneNode.cloneNode(true),AL=document.createElement("div"),AK=d.clone(n),AN=d.copy(q),AJ=this._getClipRect();AK.clip=this._getClipStr(AJ);AK.zIndex=6;if(this.parent.zone&&this.parent.zone.autoFitWindow){AK.width="100%";}d.copy(AK,AM.style);AM.firstChild.style.left=0;AM.id=this.getID();this.domNode=AM;l(AN,AJ,this.getTableSize());AN.zIndex=5;d.copy(AN,AL.style);this.curtainNode=AL;AI.appendChild(AM);AI.appendChild(AL);return AI;},scrollDM:function f(AL,AK,AJ){if(this.lockHeadersCase===J&&!this.isRendered()){this.createDomNode();this.domNode.style.width="100%";this.domNode.style.height="100%";}if(this.parent.shouldClipLockableXtab&&this.isRendered()){var AI=this.domNode.firstChild.style;if(AI.position!=="absolute"){AI.position="absolute";AI.width="100%";}AI.clip=this._getClipStr(this._getClipRect());}},insertPage:O,refreshNode:r,onCellUpdated:R,unrender:function B(AI){this._super(AI);this.fragment=null;this.renderedPages=null;}});mstrmojo._IsLockableXtab={_mixinName:"mstrmojo._IsLockableXtab",initLock:function x(AQ){var AM=S.call(this),AP=this.scrollboxNode;if(this.lockHeadersCase&&AP&&AM){var AO=document.createElement("div"),AI=d.copy(AQ,{containerNode:AO,toCloneNode:AP,offset:AM,lockHeadersCase:this.lockHeadersCase,parent:this});if(!this.xtabClonedNodes){this.xtabClonedNodes=[];}if(this.lockHeadersCase&A){if(!this.clonedRowHeader){this.clonedRowHeader=this.addDisposable(new mstrmojo.XtabClonedRowHeader(AI));this.xtabClonedNodes.push(this.clonedRowHeader);}}if(this.lockHeadersCase&z){if(!this.clonedColHeader){this.clonedColHeader=this.addDisposable(new mstrmojo.XtabClonedColHeader(AI));this.xtabClonedNodes.push(this.clonedColHeader);}}if(this.lockHeadersCase===J){if(!this.clonedTitle){var AK=this.clonedColHeader,AN=AK.domNode,AJ=AK.fragment;AI.toCloneNode=AN||AI.toCloneNode;AI.fragment=AJ&&AJ.cloneNode();this.clonedTitle=this.addDisposable(new mstrmojo.XtabClonedTitle(AI));this.xtabClonedNodes.push(this.clonedTitle);}}var AL=this.hasCustomScrollbar?"offset":"client",AR={top:0,left:0,position:"absolute",overflow:"hidden",width:AP[AL+"Width"]+"px",height:AP[AL+"Height"]+"px"};d.copy(AR,AO.style);this.tableContainerNode.appendChild(AO);this.lockFragment=AO;o.call(this);}},getColClonedZone:function F(){return this.clonedColHeader&&this.clonedColHeader.domNode.firstChild;},createZone:function m(AI){return new mstrmojo.XtabZoneWithClonedCover(AI||{});},getStickedTableNodes:function W(){var AJ=this.xtabClonedNodes,AK=[];if(AJ instanceof Array){for(var AI in AJ){var AL=AJ[AI];if(AL.isRendered()){AK.push(AL.getTableNode());}}}return AK;},_adjustClipSize:function g(){if(this.lockHeadersCase){var AJ=this.xtabClonedNodes;if(AJ&&AJ.length){var AK=S.call(this);this.lockFragment.style.width=(this.hasCustomScrollbar?parseInt(this.scrollboxNode.style.width,10):this.scrollboxNode.clientWidth)+"px";this.lockFragment.style.height=this.scrollboxNode.clientHeight+"px";for(var AI in AJ){AJ[AI].adjustClip(AK);}}}},_refreshClonedNodes:function V(){var AL=this.xtabClonedNodes,AR=this.scrollboxNode.firstChild.firstChild,AI=this.titlesCP.getSpanDimension().nRow,AQ=AR&&(AR.rows[AI]||AR.rows[0]),AP=AQ&&AQ.cells,AJ=AP&&AP.length,AM=[],AO=!this.lastCellsRBOffsetLeft,AN;for(AN=0;AN<AJ;++AN){var AK=AP[AN].offsetWidth;AM.push(AK);if(!AO){AO=(this.lastCellsRBOffsetLeft[AN]!=AK);}}this.lastCellsRBOffsetLeft=AM;if(AO){for(AN in AL){AL[AN].refreshNode();}this._adjustClipSize();this.alignLockNodes(this.scrollboxLeft,this.scrollboxTop);}else{this._adjustClipSize();}},alignLockNodes:function w(AL,AK){var AJ=this.xtabClonedNodes;if(AJ&&AJ.length){for(var AI in AJ){AJ[AI].scrollDM(AL,AK,this.scrollboxNode.firstChild);}o.call(this);}},isAutoTableLayout:function AA(){return this.zone.isAutoTableLayout();},onPageRendered:function P(AL,AI,AJ,AN){this._super&&this._super(AL,AI,AJ,AN);if(AJ&&AI===0){I(this);}var AK=this.xtabClonedNodes;if(AK&&AK.length){for(var AM in AK){AK[AM].insertPage(AL,AI,AJ,AN);}}},gridPagesRendered:function e(){this._super&&this._super();if(!this.lockHeadersCase){return ;}if(!this.xtabClonedNodes){this.initLock();}else{if(this.isAutoTableLayout()){this._refreshClonedNodes();}}},onCellUpdated:function t(AI,AL){var AM=this.zone,AN=AM.posMap[AI._ei],AJ=AM.tableNode.tBodies[AN.page||0],AK=this.xtabClonedNodes;K(AN,AJ,AL);for(idx in AK){AK[idx].onCellUpdated(AN,AL);}if(this.isAutoTableLayout()){this._refreshClonedNodes();}},unrender:function B(AK){var AJ=this.xtabClonedNodes,AI;if(AJ&&AJ.length){for(AI in AJ){AJ[AI].unrender(true);}}this.zones=null;I(this);this.lockFragment=null;this.xtabClonedNodes=null;this.clonedColHeader=null;this.clonedRowHeader=null;this.clonedTitle=null;this.lastCellsRBOffsetLeft=null;this._super(AK);}};})();(function(){mstrmojo.requiresCls("mstrmojo.MobileDocLayoutViewer");var B=mstrmojo.DynamicClassFactory.newComponent;mstrmojo.maps.MobileMapInfoWindowLayoutViewer=mstrmojo.declare(mstrmojo.MobileDocLayoutViewer,null,{scriptClass:"mstrmojo.maps.MobileMapInfoWindowLayoutViewer",preBuildRendering:function A(){this.setDimensions(this.height,this.width);this.set("visible",true);return this._super?this._super():true;}});mstrmojo.maps.MapInfoWindowLayoutViewer=mstrmojo.declare(mstrmojo.MobileDocLayoutViewer,null,{scriptClass:"mstrmojo.maps.MapInfoWindowLayoutViewer",preBuildRendering:function A(){this.set("visible",true);return this._super?this._super():true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui.pathbar.PathPopup");function D(F){return(F!=="myPage");}function A(){this.addDisposable(this.popup=new mstrmojo.ui.pathbar.PathPopup({id:"mstrAccountSCList",cssClass:"mstrShortcutsListPopup mstrAccountSCListPopup",targetNode:this.domNode,offsetTop:0,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",useRichTooltip:true,postclick:function H(){if(D(this.selectedItem.name)){this.parent.close();}},items:mstrApp.pathInfo.el,getTooltipText:function F(I){if(I&&I.name==="save"){return mstrmojo.desc("14684","Publish current layout as default layout for other users");}else{return null;}},getItemMarkup:function(){return'<a class="item {@name} {@cls} {@newGroup}" idx="{@idx}" onclick="{@onclick}" href="#" target="{@target}"><span class="icon"></span><span>{@n}</span></a>';},getItemProps:function G(K,I){var J=!!K.selected;return{sel:J,cls:J?"selected":"",newGroup:!!K.grp?"grp":"",n:K.n,idx:I,href:K.href,name:K.name,onclick:K.onclick||"return false;",target:K.target||"_self"};}}]}));}mstrmojo.ui.pathbar.PathExtraLinks=mstrmojo.declare(mstrmojo.Widget,null,{userName:null,init:function E(G){var H=this;this._super(G);var F=this.items;this.userName=F[0].user;mstrmojo.array.forEach(this.items,function(I){if(I.name==="save"){I.onclick="mstrmojo.all."+H.id+".raiseEvent({name:'saveDefaultCard'})";I.en=false;}if(I.name==="load"){I.onclick="mstrmojo.all."+H.id+".raiseEvent({name:'loadDefaultCard'})";I.en=false;}if(I.name==="myPage"){I.en=false;}});F.splice(0,1);},scriptClass:"mstrmojo.ui.pathbar.PathExtraLinks",markupString:'<div id="mstrPathAccount" mstrAttach:click class="mstrLink" style="cursor:pointer;"><span class="mstrAccountName" title="{@userName}">{@userName}</span><div id="mstrAccountMenu" class="mstrAccountMenu path"></div></div>',popup:null,postBuildRendering:function C(){A.call(this);},onclick:function B(){var F=this.popup;if(!F.isOpen){F.open();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui.pathbar.PathPopup","mstrmojo.mstr._RecentObjectsHelper","mstrmojo.util.LibraryHelper");function D(O,J){var F=[],I,G=1;F[0]={name:mstrmojo.desc(8661,"All Projects"),href:mstrApp.name+"?evt=3001&src="+mstrApp.name+".3001",isSpecial:true};if(mstrApp.projectsList&&mstrApp.projectsList.projects){var H=mstrApp.projectsList.projects;for(I=0;I<H.length;I++){F[G++]=H[I];}}var P;O.addDisposable(P=new mstrmojo.ui.pathbar.PathPopup({id:"mstrProjectsGenPopup",cssClass:"mstrShortcutsListPopup",targetNode:J,children:[{scriptClass:"mstrmojo.ui.pathbar.ScrollableList",alias:"menuItems",useRichTooltip:true,items:F,preclick:function L(){this.parent.close();},getItemMarkup:function(Q){if(Q.isSpecial){if(this.items.length===1){Q.cssText="border-bottom: none;";}return'<span id="allProjectsItem" class="item mstrMenuItem {@itemCls}" style="{@cssText}"><a class="mstrLink project{@idx}" href="{@href}" idx="{@idx}" style="width:100%;">{@en@displayName}</a></span>';}return'<span class="item mstrMenuItem {@itemCls}" style="{@cssText}"><a class="mstrLink project{@idx}" href="{@href}" idx="{@idx}" style="width:100%;"><div class="projectName">{@en@displayName}</div>  <div class="serverName">{@srvrName}</div></a></span>';},getItemProps:function N(S,Q){var R=!!S.selected;return{sel:R,itemCls:"mstr-project-item",cssText:S.cssText||"",cls:R?"selected":"",newGroup:!!S.grp?"grp":"",displayName:S.alias||S.name,idx:Q,href:S.href||mstrApp.name+"?evt=3010&src="+mstrApp.name+".3010&Port="+encodeURIComponent(S.port)+"&Project="+encodeURIComponent(S.name)+"&Server="+encodeURIComponent(S.server),srvrName:S.server,target:S.target||"_self"};},getTooltipText:function K(Q){if(Q&&!Q.isSpecial){$STR=mstrmojo.string;return $STR.encodeHtmlString((Q.alias||Q.name))+"<br/>"+Q.server+"<br/>"+$STR.encodeHtmlString(Q.desc);}},onclick:function(Q){var S=function(){mstrmojo.dom.preventDefault(Q.hWin,Q.e);mstrmojo.dom.stopPropogation(Q.hWin,Q.e);};var R=Q.getTarget();if(!R.getAttribute("href")){R=R.parentElement;}mstrmojo.form.sendLinkAsForm(R.href);S();return false;}}],onvisibleChange:function(){if(this.visible){setTimeout(this.menuItems.updateScrollbars(),200);}},onClose:function M(){this.isOpen=false;mstrmojo.css.toggleClass(this.targetNode,"opened",false);this.domNode.style.left="";}}));return P;}function E(J,K){var I=this.handleRecentObjects();var L;J.addDisposable(L=new mstrmojo.ui.pathbar.PathPopup({id:"mstrRecentsGenPopup",cssClass:"mstrShortcutsListPopup",targetNode:K,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",items:I,preclick:function F(){this.parent.close();},getItemMarkup:function(O){var M="";if(mstrConfig.showPreviews){if(O.recoveryInfo!==undefined){var N=(O.recoveryInfo.imgData!==undefined)?"data:image/png;base64,"+O.recoveryInfo.imgData:"";if(N!==""){M='<img class = "img-preview" src = "'+N+'" height="200" width="250" style="z-index: 100; position: absolute;">';}}}return'<span class="item mstrMenuItem {@itemCls}" style="{@cssText}"><span class="{@iconCls}"></span><a class="mstrLink" href="{@href}"><div>{@n}</div>'+M+"</a></span>";},getItemProps:function H(P,M){var O=!!P.selected,N=(mstrApp&&mstrApp.optimizeFitToPage)?"&innerWidth="+window.innerWidth+"&innerHeight="+window.innerHeight:"";return{sel:O,iconCls:P.iconClass,itemCls:P.itemClass,cssText:P.cssText||"",cls:O?"selected":"",newGroup:!!P.grp?"grp":"",n:P.recoveryName,idx:M,href:P.recoveryURL+N,name:P.recoveryName,target:P.target||"_self"};},onclick:function(M){var O=function(){mstrmojo.dom.preventDefault(M.hWin,M.e);mstrmojo.dom.stopPropogation(M.hWin,M.e);};var N=M.getTarget();if(N.getAttribute("href")){mstrmojo.form.sendLinkAsForm(N.href);}else{mstrmojo.form.sendLinkAsForm(N.parentElement.href);}O();return false;}}],onClose:function G(){this.isOpen=false;mstrmojo.css.toggleClass(this.targetNode,"opened",false);this.domNode.style.left="";}}));return L;}function A(){var L=this;this.addDisposable(this.popup=new mstrmojo.ui.pathbar.PathPopup({id:"mstrSCList",cssClass:"mstrShortcutsListPopup",targetNode:this.domNode,offsetTop:2,recentsPopup:null,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",preclick:function F(M){var N=M.getTarget();if(N.getAttribute("name")!=="recentObjects"&&N.getAttribute("name")!=="projects"){this.parent.close();}},handleMouseOver:function I(M,N){var O=M.getTarget(),Q=this.parent.projectsPopup,P=this.parent.recentsPopup;if(O.getAttribute("name")=="recentObjects"){if(Q!=null){Q.close();}this.handleClick(M,N);}else{if(O.getAttribute("name")=="projects"){if(P!=null){P.close();}this.handleClick(M,N);}else{if(P!=null){P.close();}if(Q!=null){Q.close();}}}return false;},handleClick:function G(N,O){var P=N.getTarget();var M=this.parent;if(P.getAttribute("name")=="recentObjects"){if(P.nodeName==="SPAN"){P=P.parentNode;}if(M.recentsPopup==null){M.recentsPopup=E.call(L,M,P);}this.openHelper(P,M.recentsPopup);return true;}else{if(P.getAttribute("name")=="projects"){if(P.nodeName==="SPAN"){P=P.parentNode;}if(M.projectsPopup==null){this.loadProjects(P);}else{this.openHelper(P,M.projectsPopup);}return true;}else{if(P.getAttribute("name")=="dossierLibrary"){mstrmojo.util.LibraryHelper.createTokenAndOpenLink(O.href);return true;}}}return false;},openHelper:function K(N,O){O.autoPosition=false;var M=N.getBoundingClientRect();if(!O.isOpen){O.offsetTop=M.top-M.bottom;O.offsetLeft=this.domNode.clientWidth-M.left;O.open();}},loadProjects:function J(O){var N=this;var M=N.parent;if(!mstrApp.projectsList){mstrApp.showWait();mstrApp.serverProxy.request({success:function(P){if(P){mstrApp.projectsList=P;M.projectsPopup=D.call(L,M,O);N.openHelper(O,M.projectsPopup);}},complete:function(){mstrApp.hideWait(true);}},{taskId:"getProjectsInfo",sort:true},false,{});}else{M.projectsPopup=D.call(L,M,O);N.openHelper(O,M.projectsPopup);}},items:mstrApp.pathInfo.sb,getItemMarkup:function(N){var M="{@cls}";if(N.name==="recentObjects"||N.name==="projects"){M="";}return'<a name="{@name}" class="item {@name} '+M+' {@newGroup}" idx="{@idx}" onclick="{@onclick}" href="#" target="{@target}"><span name="{@name}" class="icon"></span><span name="{@name}">{@n}</span></a>';},getItemProps:function H(O,M){var N=!!O.selected;return{sel:N,cls:N?"selected":"",newGroup:!!O.grp?"grp":"",n:O.n,idx:M,href:O.href,name:O.name,onclick:O.onclick||"return true",target:O.target||"_self"};}}]}));}mstrmojo.ui.pathbar.PathStarBurst=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.mstr._RecentObjectsHelper],{scriptClass:"mstrmojo.ui.pathbar.PathStarBurst",markupString:'<a id="mstrStarburst {@id}" mstrAttach:click,mouseover,mouseout class="mstrLink" style="top:0"><div id="mstrLogo" class="mstrLogo path"></div><div id="mstrLogoMenu" class="mstrLogoMenu path mstrPullArrow"></div></a>',markupSlots:{logoNode:function(){return this.domNode.children[0];},logoMenuNode:function(){return this.domNode.children[1];}},popup:null,postBuildRendering:function C(){A.call(this);this.domNode.setAttribute("href",mstrApp.name+"?evt=3010&src="+mstrApp.name+".3010");},onclick:function B(F){var G=function(){mstrmojo.dom.preventDefault(F.hWin,F.e);mstrmojo.dom.stopPropogation(F.hWin,F.e);};if(F.getTarget()===this.logoMenuNode){var H=this.popup;if(!H.isOpen){H.open();}G();}else{mstrmojo.form.sendLinkAsForm(F.src.domNode.href);G();return false;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.pathbar.PathPopup","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.pathbar._PreAppExit");function A(){this.addDisposable(this.breadCrumbs=new mstrmojo.ui.pathbar.PathPopup({id:"mojoPathBreadCrumbs",cssClass:"mojoPathPicker",offsetLeft:0,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"breadCrumbsItems",preclick:function I(){this.parent.close();},items:null,getItemMarkup:function(){return'<a href="#" idx="{@idx}"><span>{@en@n}</span></a>';},getItemProps:function J(L,K){return{n:mstrmojo.string.decodeHtmlString(L.n),idx:K,href:L.href};}}]}));}var D=mstrmojo.css,G=mstrmojo.dom;mstrmojo.ui.pathbar.PathAncestors=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.pathbar._PreAppExit],{scriptClass:"mstrmojo.ui.pathbar.PathAncestors",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout><div class="pathText"><div class="pathBreadCrumbs"><span class="pathBreadCrumbsParent"><a href="{@pathParentLink}">{@pathParentName}</a></span><span class="pathBreadCrumbsPullArrow"></span><span class="pathDelim">{@delimiter}</span></div><div class="pathAncestor hidden">{@itemsHtml}</div><div class="pathCurrent"><span>{@pathCurrent}</span></div></div></div>',markupSlots:{breadCrumbsNode:function(){return this.domNode.firstChild.children[0];},breadCrumbsParentNode:function(){return this.domNode.firstChild.children[0].firstChild;},breadCrumbsArrowNode:function(){return this.domNode.firstChild.children[0].children[1];},ancestorNode:function(){return this.domNode.firstChild.children[1];},currentNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.firstChild.children[1];}},markupMethods:{onwidthChange:function(){var K=this,I=K.ancestorNode,J=K.breadCrumbsNode;if(K.getNeededWidth()>K.getAvailWidth()){D.toggleClass(J,"hidden",false);D.toggleClass(I,"hidden",true);K.resizeBreadCrumbs();}else{K.resizePathBar();}}},delimiter:">",pathCurrent:null,pathFirst:null,pathParent:null,breadCrumbs:null,reversedItems:null,init:function H(J){this._super(J);var I=this.items;this.pathCurrent=I[I.length-1].n;this.pathFirstLink=I[0].href;this.pathFirstName=I[0].n;if(I.length>1){this.pathParentLink=I[I.length-2].en!=true?"#":I[I.length-2].href;this.pathParentName=I[I.length-2].n;}I.splice(I.length-1,1);this.reversedItems=[].concat(I).reverse();A.call(this);},resizePathBar:function(){var P=this,M=P.ancestorNode,I=P.currentNode,K=P.breadCrumbsNode,R=M.style,J=I.style,Q=G.position(P.domNode).w-23-20,O,N,L;O=Math.min(Q/2,G.position(I).w);N=Q-O;L=N>M.scrollWidth?N-M.scrollWidth:0;N-=L;R.maxWidth=Math.max(0,N)+"px";J.maxWidth=Math.max(0,Q-N)+"px";},resizeBreadCrumbs:function(){var N=this,I=N.currentNode,O=N.breadCrumbsParentNode,J=I.style,L=O.style,P=G.position(N.domNode).w-60,M,Q,K;L.maxWidth=Math.max(0,P)+"px";J.maxWidth=Math.max(0,P)+"px";M=Math.min(P/2,G.position(I,true).w);Q=P-M;K=Q>O.scrollWidth?Q-O.scrollWidth:0;Q-=K;L.maxWidth=Math.max(0,Q)+"px";J.maxWidth=Math.max(0,P-Q)+"px";},onclick:function C(I){var J=this.breadCrumbs;if(!this._super(I)){return false;}var K=I.getTarget();if(K==this.breadCrumbsArrowNode){J.set("targetNode",this.breadCrumbsNode);J.breadCrumbsItems.set("items",this.reversedItems.slice(1));if(!J.isOpen){J.open();}}},getItemMarkup:function(){return'<span idx="{@idx}"><a href="#">{@n}</a></span><span class="pathDelim">{@dl}</span>';},getItemProps:function E(J,I){return{n:J.n,href:J.href,dl:this.delimiter,idx:I};},getNeededWidth:function B(){var L=this.breadCrumbsNode,I=this.ancestorNode,K=this.currentNode,J=this.breadCrumbs;D.toggleClass(L,"hidden",true);D.toggleClass(I,"hidden",false);if(J.isOpen){J.close();}return I.scrollWidth+K.scrollWidth+30;},getAvailWidth:function F(){var I=this;return G.position(I.domNode).w-23-20;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui.pathbar.PathPopup","mstrmojo.dom","mstrmojo.css");function D(){var N=this,J=N.domNode,L=false;pos=mstrmojo.dom.position(N.targetNode),winDimension=mstrmojo.dom.windowDim();J.style.top=(pos.y+pos.h+N.offsetTop)+"px";var P=pos.x+pos.w,M=winDimension.w-P-J.offsetWidth;if(P+J.offsetWidth>winDimension.w){M=winDimension.w-pos.x;L=true;if(M+J.offsetWidth>winDimension.w){M=0;}}if(N.id==="mstrToolbarList"){if(L){M=M-pos.w*0.6;}else{M=M+pos.w+6;}}J.style.right=M+"px";N.set("visible",false);N.isOpen=true;N.set("visible",true);var O=parseInt(J.style.top,10);if(O+J.offsetHeight>winDimension.h){var K=O-J.offsetHeight+pos.h;J.style.top=(K>0?K:0)+"px";}mstrmojo.css.toggleClass(N.targetNode,"opened",true);}function B(){var J=this.popup,M=J.containerNode.childNodes[0].childNodes[0].childNodes[J.zoomChildIndex].lastChild,L=M.textContent||M.innerText,K=J.dc.view.zoomValue;L=L.substr(0,L.indexOf("("));M.innerHTML=L+"("+K.n+")";}function C(N){var O=N.selectedItem;if(O===null){return ;}var S=N.containerNode.firstChild.firstChild,J=N.dc.view.zoomValue,Q=O.getAttribute("dssid");if(Q===J.dssid){return ;}mstrmojo.css.removeClass(O,"selected");var M=S.childNodes,R=M.length,P=0,K=-1,L;for(P=0;P<R;P++){L=M[P];if(L.getAttribute("dssid")===J.dssid){K=P;break;}}if(K===-1){var T=N.children[0];T.addItems([J]);L=S.childNodes[T.items.length-1];}mstrmojo.css.addClass(L,"selected");N.selectedItem=L;}function F(J,Q,M){var L;Q.addDisposable(L=new mstrmojo.ui.pathbar.PathPopup({id:"mstrZoomPopup",cssClass:"mstrShortcutsListPopup",targetNode:M,dc:Q.dc,slectedIndex:-1,selectedItem:null,onOpen:function K(){D.call(this);},onClose:function P(){delete this.isOpen;mstrmojo.css.toggleClass(this.targetNode,"opened",false);this.domNode.style.top="-10000px";},children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",preclick:function N(){this.parent.close();},items:J,getItemMarkup:function(){return'<a class="item {@cls}" dssid="{@dssid}"><span class="icon"></span><span>{@name}</span></a>';},getItemProps:function O(V,S){var T=V.dssid===this.parent.dc.view.zoomValue.dssid,U="";if(T){this.parent.selectedIndex=S;U="selected";}return{cls:U,dssid:V.dssid,name:V.n};},onclick:function R(a){var Z=this.parent,U=mstrmojo.dom.findAncestorByAttr(a.getTarget(),"dssid",true,Z.domNode),Y=U.node,W=Y.getAttribute("dssid"),T=Z.targetNode.getAttribute("cmdid"),b=Z.dc,S=b.view.zoomValue,V=S.dssid;if(W!==V){b[T](W);var X=Z.targetNode.lastChild.textContent||Z.targetNode.lastChild.innerText;Z.targetNode.lastChild.innerHTML=X.replace(S.n,Y.lastChild.textContent||Y.lastChild.innerText);if(Z.selectedItem===null){Z.selectedItem=this.domNode.firstChild.childNodes[Z.selectedIndex];}mstrmojo.css.removeClass(Z.selectedItem,"selected");mstrmojo.css.addClass(Y,"selected");Z.selectedItem=Y;}}}]}));return L;}function E(J,P,L){var Q;P.addDisposable(Q=new mstrmojo.ui.pathbar.PathPopup({id:"mstrExportPopup",cssClass:"mstrShortcutsListPopup",targetNode:L,dc:P.dc,onOpen:function K(){D.call(this);},onClose:function O(){delete this.isOpen;mstrmojo.css.toggleClass(this.targetNode,"opened",false);this.domNode.style.top="-10000px";},children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",preclick:function M(){this.parent.close();},items:J,getItemMarkup:function(){return'<a class="item" dssid="{@dssid}"><span class="icon" style="display:none;"></span><span>{@name}</span></a>';},getItemProps:function N(S){return{cls:S.cssClass,dssid:S.dssid,name:S.n};},onclick:function R(T){var V=mstrmojo.dom.findAncestorByAttr(T.getTarget(),"dssid",true,this.parent.domNode),W=V.node,U=parseInt(W.getAttribute("dssid"),10),S=this.parent.dc;S.exportCmd(U);}}]}));return Q;}function G(){this.addDisposable(this.popup=new mstrmojo.ui.pathbar.PathPopup({id:"mstrToolbarList",cssClass:"mstrShortcutsListPopup",targetNode:this.domNode,offsetTop:0,zoomChildIndex:null,onOpen:function K(){D.call(this);},children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",items:mstrApp.pathInfo.tbModelData.n.items,getItemMarkup:function(){return'<a class="item {@cls}" cmdId="{@cmdid}" idx="{@idx}"><span class="icon" style="display:none;"></span><span>{@name}</span></a>';},getItemProps:function M(R,O){var Q=!!R.selected,S=R.cmdid,P=R.tooltip||R.title||S;if(S==="zoom"){P+=" ("+this.parent.dc.view.zoomValue.n+")";this.parent.zoomChildIndex=O;}return{sel:Q,idx:O,cls:S,n:S,cmdid:S,name:P};},closePopup:function J(O){if(O){O.close();}},onmouseover:function N(S){var R=mstrmojo.dom.findAncestorByAttr(S.getTarget(),"cmdid",true,document.getElementById("mstrToolbarList")),T=R&&R.value,Q=this.parent,P=Q.exportPopup,O=Q.zoomPopup;if(T==="export"){this.onclick(S,R);this.closePopup(O);}else{if(T==="zoom"){this.onclick(S,R);this.closePopup(P);}else{if(T){this.closePopup(P);this.closePopup(O);}}}return false;},onclick:function L(P,T){P.cancel();var R=T||mstrmojo.dom.findAncestorByAttr(P.getTarget(),"cmdid",true,document.getElementById("mstrToolbarList")),V=R.node,Y=V.getAttribute("idx"),Q=R&&R.value,X=this.parent,Z=X.dc,O=[],W=null;if(Q==="export"){if(!X.exportPopup){O=this.items[Y].items;X.exportPopup=E(O,X,V);}var U=X.exportPopup;U.autoPosition=false;W=V.getBoundingClientRect();if(!U.isOpen){U.offsetTop=-(W.height||V.offsetHeight);U.open();}}else{if(Q==="zoom"){if(!X.zoomPopup){O=this.items[Y].items;X.zoomPopup=F(O,X,V);}var S=X.zoomPopup;S.autoPosition=false;W=V.getBoundingClientRect();if(!S.isOpen){S.offsetTop=-(W.height||V.offsetHeight);if(S.hasRendered){C.call(this,S);}S.open();}}else{if(Z[Q]){Z[Q]();X.close();}}}}}]}));}mstrmojo.ui.pathbar.PathHamburger=mstrmojo.declare(mstrmojo.Widget,null,{userName:null,init:function I(J){this._super(J);},scriptClass:"mstrmojo.ui.pathbar.PathHamburger",markupString:'<div id="mstrHamburger" mstrAttach:click class="mstrHamburgerButton" style="top:0"><div class="mstrHamburger path"></div></div>',popup:null,postBuildRendering:function A(){G.call(this);},onclick:function H(){var J=this.popup;if(!J.dc){J.dc=this.parent.dc;}if(!J.isOpen){if(J.hasRendered){B.call(this);}J.open();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.pathbar.PathPopup","mstrmojo.dom","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ui.pathbar._PreAppExit");var D=mstrmojo.dom;function C(){this.addDisposable(this.pickerMenu=new mstrmojo.ui.pathbar.PathPopup({id:"mojoPathPickerMenu",cssClass:"mojoPathPicker",offsetLeft:-23,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",preclick:function F(){this.parent.close();},items:null,getItemMarkup:function(){return'<a href="#" idx="{@idx}"><span>{@en@n}</span></a>';},getItemProps:function G(I,H){return{n:I.n,idx:H,href:I.href};}}]}));}mstrmojo.ui.pathbar.PathNavigation=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.pathbar._PreAppExit],{scriptClass:"mstrmojo.ui.pathbar.PathNavigation",icnCss:"pathNavigationRight",pickerMenu:null,init:function E(F){this._super(F);C.call(this);},onclick:function A(G){var H=this.pickerMenu;if(!this._super(G)){return false;}var K=G.target||D.eventTarget(G.hWin,G.e),I=D.findAncestorByAttr(K,"idx",true,this.domNode),F=I&&parseInt(I.value,10),J=this.items[F];if(J&&J.en&&J.items){if(H.targetNode!==I.node){H.set("targetNode",I.node);H.menuItems.set("items",J.items);}if(!H.isOpen){H.open();}}},getItemMarkup:function(F){if(F.items){return'<span class="tb{@n} mstrComboDown" idx="{@idx}"><a class="tb{@n}0 mstrIcon-tb {@en}" title="{@desc}" href="#"></a><span class="tb{@n}1 mstrPullArrow {@en}" title="{@desc}" menu="true"></span></span>';}if(F.visible===false){return"";}return'<a href="#" idx="{@idx}"><span title="{@desc}" class="tb{@n} mstrIcon-tb {@en}"></span></a>';},getItemProps:function B(G,F){return{n:G.n,idx:F,href:G.href,desc:G.desc,en:G.en?"":"disabled"};}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextArea","mstrmojo.Button","mstrmojo.Label","mstrmojo.Box","mstrmojo.fx","mstrmojo.css","mstrmojo.DropDownButton");var D=1,K=2,B=null,A=null,E=mstrmojo.dom,F=mstrmojo.css;var C=400;function G(U,Q,M,N,T,L,P,S){var R={duration:C,target:Q,onEnd:function(){if(L){L();}},props:{}};R.props[M]={ease:P||mstrmojo.ease.sin,start:parseInt(N,10),stop:parseInt(T,10),suffix:"px"};R=mstrmojo.hash.copy(S,R);var O=new mstrmojo.fx.AnimateProp(R);O.play();return O;}mstrmojo.ElasticTextArea=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.ElasticTextArea",markupString:'<div id="{@id}" class="mstrmojo-ElasticTextArea {@cssClass}" style="{@cssText}" mstrAttach:blur ><div class="mstrmojo-ElasticTextAreaContent " style="height: 100%;"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},markupMethods:{onvalueChange:function(){if(this.textNode&&this.value!==this.textNode.textArea.value){this.textNode.textArea.set("value",this.value);this.adjustStatusBar();}},onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onwidthChange:function(){if(this.domNode&&this.width){this.domNode.style.width=this.width+"px";}},ontopChange:function(){if(this.domNode&&this.top){this.domNode.style.top=this.top+"px";}},onleftChange:function(){if(this.domNode&&this.left){this.domNode.style.left=this.left+"px";}}},width:200,resize:"none",maxLength:256,value:"",enabled:true,minTextNodeHeight:15,postCreate:function(){var M=this,L=this.minTextNodeHeight;this.children=[{scriptClass:"mstrmojo.Box",alias:"textNode",cssText:"width:100%;",height:L+"px",onheightChange:function(O){var P=Math.max(L,parseInt(O.valueWas,10)||0),N=Math.max(L,parseInt(O.value,10));if(P!==N){if(E.isIE7){this.textArea.domNode.style.height=this.domNode.style.height=N+"px";}else{if(this._slidingFx&&this._slidingFx.isPlaying){this._slidingFx.props.height.stop=N;}else{this._slidingFx=G(true,this.domNode,"height",P,N);}}}},children:[{scriptClass:"mstrmojo.TextArea",alias:"textArea",cssClass:"eta-text",cssText:"width:100%;height:100%;line-height:inherit;box-sizing:content-box;",rows:1,bindings:{maxLength:"this.parent.parent.maxLength",enabled:"!!this.parent.parent.enabled"},onblur:function(N){if(M.onblur){M.onblur(N);}},onkeyup:function(P){var Q=this.maxLength,N=this.value.length;if(Q<N){if(E.isIE7||E.isIE8||E.isIE9){this.value=this.domNode.value=this.value.substr(0,Math.min(N,Q));}}var O=this.parent.parent;O.set("value",this.value);O.adjustStatusBar();}},{scriptClass:"mstrmojo.Label",cssClass:"eta-text ghost",alias:"ghost",cssText:"visibility: hidden; z-index:-1; position:absolute;left:0; top:0; text-align:"+(E.isIE?"left":"start")+"; word-wrap:break-word; border:1px solid red; none; margin:0; padding:2; width:100%;",bindings:{text:"this.parent.parent.value"},_setHeight:function(O){var N=Math.max(parseInt(O,10)||0,this.domNode.clientHeight);this.parent.set("height",N);},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.ontextChange=function(N){if(this.domNode&&this.text){this.domNode.innerHTML=this.text.replace(/<br \/>&nbsp;/,"<br />").replace(/<|>/g," ").replace(/&/g,"&amp;").replace(/\n/g,"<br />&nbsp;");}else{if(this.domNode){this.domNode.innerHTML="&nbsp;";}}this._setHeight();};},postBuildRendering:function(N){if(this._super){this._super(N);}this._setHeight(this.parent.parent.height);}}]},{scriptClass:"mstrmojo.Label",alias:"statusBar",cssClass:"eta-bar",text:""},{scriptClass:"mstrmojo.Label",alias:"msgBoxTip",cssClass:"eta-tip",cssText:E.isIE8?"bottom: -4px;":""}];},postBuildRendering:function I(){if(this._super){this._super();}this.textNode.textArea.set("value",this.value);this.adjustStatusBar();},onmaxLengthChange:function(L){if(L.value){this.adjustStatusBar();}},onfontChange:function(L){var O=this.textNode.textArea,N=this.textNode.ghost,M;for(M in this.font){this.domNode.style[M]=this.font[M];if(E.isIE7){O.domNode.style[M]=this.font[M];N.domNode.style[M]=this.font[M];this.statusBar.domNode.style[M]=this.font[M];}}if(E.isIE9){O.refresh();}N._setHeight();},adjustStatusBar:function(){if(!this.msgBoxTip.domNode){return ;}var O=this,R=this.maxLength,S=this.textNode.textArea,Q=(S.value&&S.value.length)||0,P=Q/R,M=this.statusBar,L=this.msgBoxTip;var N=P*this.width;L.domNode.style.left=Math.min(Math.ceil(N-L.domNode.offsetWidth/2),this.width-3)+"px";M.set("text",mstrmojo.desc(4891,Q+" of "+R).replace("##",Q).replace("###",R));},focus:function(){E.setCaret(this.textNode.textArea.domNode,((this.value&&this.value.length)||0));}});mstrmojo.ElasticTextAreaButton=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.ElasticTextAreaButton",cssClass:"mstrmojo-ElasticTextAreaButton",popupToBody:false,popupWidth:200,maxLength:256,enabled:true,lockAutoClose:mstrmojo.emptyFn,unlockAutoClose:mstrmojo.emptyFn,unrender:function H(L){var M=this.popupRef;if(this.popupToBody&&M.hasRendered){M.unrender(false);}if(this._super){this._super(L);}},postBuildRendering:function I(){if(this._super){this._super();}if(this.value&&this.value.length>0){F.addClass(this.domNode,"filled");}},premousedown:function J(M){if(this.popupToBody){var P=E.position(this.popupNode,true),O=this.popupRef,L={left:Math.round(P.x)+"px",top:Math.round(P.y)+"px"};if(!O.hasRendered){delete O.slot;L.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(L,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this.popupRef.eta){this.popupRef.eta.set("value",this.value);}else{this.popupRef.children[0].value=this.value;}if(this._super){this._super();}var N=this.popupRef.domNode;if(N){N.style.minWidth=(this.domNode.offsetWidth-2)+"px";}},openPopup:function(M,L){this._super(M,L);this.lockAutoClose();},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-ElasticTextAreaPopup",shadowNodeCssClass:"mstrmojo-ElasticTextAreaPopup-shadow",contentNodeCssClass:"mstrmojo-ElasticTextAreaPopup-content",autoCloses:false,locksHover:true,visible:true,onOpen:function(){var M=this.eta,N=M.domNode.firstChild,O=0,L;this.eta.set("font",this.opener.font);N.parentNode.style.display="block";F.addClass(this.opener.domNode,"editing");N.parentNode.style.overflow="hidden";L=this._h||(N.offsetHeight);G(false,N,"height",O,L,function(){N.style.height="100%";N.parentNode.style.overflow="visible";M.focus();});},onClose:function(){this.visible=false;var N=this.eta.domNode,M=N.firstChild,O=M.offsetHeight,L=0;this.opener.unlockAutoClose();this._h=O;this.opener.set("value",this.eta.value);F.removeClass(this.opener.domNode,"editing");M.style.height=M.offsetHeight+"px";N.style.overflow="hidden";G(false,M,"height",O,L,function(){N.style.display="none";});},children:[{scriptClass:"mstrmojo.ElasticTextArea",alias:"eta",bindings:{width:function(){return this.parent.opener.popupWidth;},maxLength:function(){return this.parent.opener.maxLength;},enabled:function(){return this.parent.opener.enabled;}}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayout");function F(P){var N=-1,O=P.children,M,L,K,I,J=[],H=function(){var R;for(R in J){var Q=J[R];if(Q._fixedHeight!==N){Q._fixedHeight=N;if(Q.domNode){Q.domNode.style.height=N+"px";}}}N=-1;J=[];};for(L in O){M=O[L];if(M&&M.node&&M.node.data&&M.node.data.bh&&N>-1){H();}if(M&&M.defn&&M.defn.horiz){for(K in M.children){I=M.children[K];N=Math.max(I._fixedHeight||0,N);J[J.length]=I;}}}H();}mstrmojo.DocLayoutHoriz=mstrmojo.declare(mstrmojo.DocLayout,null,{scriptClass:"mstrmojo.DocLayoutHoriz",markupString:'<div id="{@id}"><div class="mstrmojo-DocLayout {@cssClass}" style="{@domNodeCssText}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},getWidth:function A(){return this.containerNode.offsetWidth;},getHeight:function G(){return this.containerNode.offsetHeight;},_renderSection:function C(L,I){if(L.node.data.bh||(L.defn.horiz&&!this._horizOpen)){this._horizOpen=true;var M=document.createElement("div");M.className="mstrmojo-DocLayout-HBox";var J=document.createElement("table");J.className="mstrmojo-DocLayout-HBox-HorizContainerTable";this._hRow=J.insertRow(-1);M.appendChild(J);this.containerNode.appendChild(M);}if(L.defn.horiz){var H="hi"+I;L.slot=H;var N=this._hRow.insertCell(-1);N.vAlign="top";var K={};K[H]=N;this.addSlots(K);}else{if(this._horizOpen){this._horizOpen=false;}}this._super(L,I);},getLayoutMinWidth:function B(){var I=0,Q=0,J=this.children,P=J.length,N,M;for(N=0;N<P;N++){var O=J[N],L=O&&O.node,H=L&&L.data,K=H&&(String(H.bh)==="true"||String(H.bv)==="true");if(K){I=Math.max(I,Q);Q=0;}if(O.children){for(M in O.children){Q+=O.children[M].getWidth();}}else{Q+=10;break;}}return Math.max(I,Q);},resizeOrReposition:function E(){if(this._super){this._super();}F(this);},renderCtrlsInViewport:function D(){this._super();F(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.Container","mstrmojo.TabStrip");mstrmojo.ScrollingTabStrip=mstrmojo.declare(mstrmojo.TabStrip,null,{scriptClass:"mstrmojo.ScrollingTabStrip",markupString:'<div id="{@id}" class="mstrmojo-TabStrip mstrmojo-ScrollingTabStrip {@cssClass}" style="{@cssText}"><span></span><div class="c" style="position:relative; display:inline-block;"><div style="position:absolute;"></div></div><span></span></div>',markupSlots:{containerNode:function(){return this.domNode.childNodes[1].firstChild;},scrollNode:function(){return this.domNode.childNodes[1];},stripNode:function(){return this.domNode.childNodes[1].firstChild;},btnLeftNode:function(){return this.domNode.childNodes[0];},btnRightNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";if(this.visible){this.set("width",parseInt(this.width,10));}},onleftChange:function(){if(this.stripNode&&this.left!=null){this.stripNode.style.left=this.left+"px";}},onwidthChange:function(C){var E=this.scrollNode,B=this.stripNode;if(E&&B){var D=this,A=parseInt(this.width,10);if(isNaN(A)){return ;}window.setTimeout(function(){if(A<B.clientWidth){D.createScrBtn();A-=(D.btnsWidth||0);}D.updateScrBtn();if(mstrmojo.dom.isIE7&&B.clientWidth>0){B.style.width=B.clientWidth+7+"px";}E.style.width=A+"px";},0);}}},step:50,scroll:function(B){B=B||1;var D=this.scrollNode,A=this.stripNode,E=Math.abs(parseInt(this.left,10)||0),C=Math.max(A.clientWidth-E-D.clientWidth,0),F=Math.min(this.step,(B==-1?C:E));this.set("right",C);this.set("left",-(E-B*F));this.updateScrBtn();},createScrBtn:function(){if(this.btnLeft&&this.btnRight){return ;}var A=this;this.addChildren([{scriptClass:"mstrmojo.Button",cssClass:"l",alias:"btnLeft",visible:false,enabled:false,scrollInterval:null,onmousedown:function(){var B=this;this.scrollInterval=window.setInterval(function(D,C){A.scroll(1);if(A.left>=0){clearInterval(B.scrollInterval);}},60);},onmouseup:function(){clearInterval(this.scrollInterval);},slot:"btnLeftNode"},{scriptClass:"mstrmojo.Button",cssClass:"r",alias:"btnRight",visible:false,enabled:false,onmousedown:function(){var B=this;this.scrollInterval=window.setInterval(function(D,C){A.scroll(-1);if(A.right<=0){clearInterval(B.scrollInterval);}},60);},onmouseup:function(){clearInterval(this.scrollInterval);},slot:"btnRightNode"}]);this.renderChildren();this.btnsWidth=50;},updateScrBtn:function(){var F=this.scrollNode,B=this.stripNode,D=this.btnLeft,E=this.btnRight;if(F&&B&&D&&E){var H=Math.abs(parseInt(this.left,10)||0),G=B.clientWidth;E.set("enabled",G-H>F.clientWidth);D.set("enabled",H>0);var A=parseInt(this.width,10),C=A<G;this.btnLeft.set("visible",C);this.btnRight.set("visible",C);if(!C){this.set("left",0);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.TableLayoutList","mstrmojo.array");var A=mstrmojo.array;mstrmojo._IsTableLayoutListDIC=mstrmojo.provide("mstrmojo._IsTableLayoutListDIC",{_mixinName:"mstrmojo._IsTableLayoutListDIC",icnCss:"dicContainer",tableLayoutCssStyle:"fixed",setDirtyFlag:function(E,D){if(E.className!=="flag-container"){var C=document.createElement("div"),B=this.itemsNode&&this.itemsNode.clientWidth-8;C.className="flag-container";C.style.left=(B>0?B:0)+"px";C.innerHTML='<div class="dirty-cell"/>';D.insertBefore(C,E);}},zoomStyle:function(E,D,C,B){if(E!==1){A.forEach(D,function(H){H.style="";var J=window.getComputedStyle(H,null),I=J.getPropertyValue("width"),G=J.getPropertyValue("height"),F=J.getPropertyValue("background-position-x"),K=J.getPropertyValue("background-position-y");if(I&&G&&F&&K){H.style="width:"+parseFloat(I)*E+"px;height:"+parseFloat(G)*E+"px;background-position-x:"+parseFloat(F)*E+"px;background-position-y:"+parseFloat(K)*E+"px;background-size:"+C*E+"px "+B*E+"px;";}});}},zoomBackground:function(C,B){if(C!==1){A.forEach(B,function(E){E.style.backgroundPositionX="";E.style.backgroundPositionY="";var F=window.getComputedStyle(E,null),D=F.getPropertyValue("background-position-x"),G=F.getPropertyValue("background-position-y");if(D&&G){E.style.backgroundPositionX=parseFloat(D)*C+"px";E.style.backgroundPositionY=parseFloat(G)*C+"px";}});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.alert","mstrmojo.css","mstrmojo.desc","mstrmojo.dom","mstrmojo.Label","mstrmojo.ui.editors.ToolbarPopup","mstrmojo.vi.models.EnumFieldTypes");var E=mstrmojo.dom,F=null;function D(I){var H=1;if(I.tstp===769){H=2;}else{if(I.tstp===774){H=3;}}return H;}function B(L){var H=mstrApp.name,K=H+"?",I=-1,J=function(N,M){K+=N+"="+M+"&";};if(!!L){switch(L.ttp){case 3:J("evt","4001");J("reportID",L.tid);I=D(L);if(I!==-1){J("reportViewMode",I);}break;case 55:if(L.tstp===14080){J("evt","32001");J("documentID",L.tid);}else{if(L.tvmd&(8192|2048)&&!((L.tvmd&2048&&mstrApp.features["run-vi-flash"]))){J("evt","3140");J("documentID",L.tid);if(E.isIE6||E.isIE7||E.isIE8){mstrmojo.alert(mstrmojo.desc(15474,"To work with HTML5 dossiers, please turn off your browser Compatibility View or update your browser to one of the following browser versions: Chrome, Firefox, Safari, Internet Explorer 9 or above."));return null;}}else{J("evt","2048001");J("objectID",L.tid);J("visMode","0");}}break;}}return K;}mstrmojo._HasDocLink=mstrmojo.provide("mstrmojo._HasDocLink",{_mixinName:"mstrmojo._HasDocLink",url:"",target:"",linkEnabled:true,ifw:"",update:function G(H){var I=H.defn;this.url=H.data.url||I.url;if(I.target){this.target=I.target;}if(I.ifw){this.ifw=I.ifw;}this._super(H);},postBuildRendering:function A(){if(this.url||this.ifw){mstrmojo.css.addClass(this.domNode,"hasLink");}var I=this.controller&&this.controller.view,H=I&&I.getCurrentLayout&&I.getCurrentLayout();if(H&&H.addLinkInfo){H.addLinkInfo(this.id,{url:this.url,target:this.target,src:this});}return this._super();},setLinkEnabled:function C(L){this.linkEnabled=L;var K=this.domNode;if(!K){return ;}var M=K.childNodes,J=M[M.length-1],H=this.id+"_mask",I=(J.id===H)?J:null;if(L){if(I){K.removeChild(I);delete this._mask;}}else{if(!I){I=document.createElement("div");I.className="mstrmojo-DocLinkMask";I.id=H;I.innerHTML="&nbsp;";K.appendChild(I);}}},cancelDocLink:false,onclick:function(I){if(F===null){var J=this,H=function(){if(J.linkEnabled&&!J.isEditing){var S=J.drillLinkItems,R=S&&S[0],K=J.url||(R&&R.url),M=J.node&&J.node.data,L=M&&M.navpage,Q=J.model,O=mstrmojo.desc(15704,'Go to "#"'),P;if(J.ifw){Q.showInfoWin(J.ifw,(J.getAnchor&&J.getAnchor())||J.domNode,"v",true);}else{if(K){O=O.replace("#",K);P=function(){Q.executeLink(K,J.target,J);};}else{if(M&&M.tid&&!mstrApp.isSingleTier){K=B(M);if(!!K){O=O.replace("#",M.tnm);P=function(){Q.executeLink(K,J.target,J);};}}else{if(L){O=O.replace("#",M.navpagenm);P=function(){Q.raiseEvent({name:"layoutSelected",panelKey:L,layoutKey:Q.getLayoutKeyByUnitKey(L)});};}}}}if(P){if(!mstrApp.isVI||mstrApp.isAppStatePresentation()){P();return ;}var T=J.parent,N=J._menu,U=function(V){if(V===mstrmojo.vi.models.EnumFieldTypes.IMAGE){return mstrmojo.desc(10502,"Edit image");}return mstrmojo.desc(16163,"Edit text");};if(!N){N=J._menu=new mstrmojo.ui.editors.ToolbarPopup({anchorElement:T,autoCloses:true,cssClass:"link-action-cfg",children:[{scriptClass:"mstrmojo.Label",alias:"nav",cssClass:"link nav",cssDisplay:"inline",text:O,onclick:function(){P();this.parent.close();}},{scriptClass:"mstrmojo.Label",cssClass:"separator",cssDisplay:"inline-block",text:"|"},{scriptClass:"mstrmojo.Label",alias:"edit",cssClass:"link",cssDisplay:"inline-block",popupHost:T,text:U(T.hostType),onpopupHostChange:function(){this.set("text",U(this.popupHost.hostType));},onclick:function(){this.parent.close();this.popupHost.switchToEditMode();}}]});}else{N.nav.set("text",O);N.nav.set("onclick",function(){P();this.parent.close();});N.edit.set("popupHost",T);}N.popupConfig.position=E.getMousePosition(I.e,I.hWin);T.openPopup(N);}}};F=window.setTimeout(function(){if(!J.cancelDocLink){H();}J.cancelDocLink=false;F=null;},200);}},hasActiveLink:function(){if(this.linkEnabled){var K=this.drillLinkItems,H=K&&K[0],J=this.url||(H&&H.url),I=this.node&&this.node.data;if(I){if(I.tid&&!mstrApp.isSingleTier){return true;}if(I.navpage){return true;}}if(J){return true;}}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Box","mstrmojo.array","mstrmojo._HasLayout","mstrmojo.ui.ColumnContainer");var E=mstrmojo.dom,G=mstrmojo.hash,C=mstrmojo.array;mstrmojo.ui.ColumnWalk=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.ColumnWalk",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnWalk cf {@cssClass}" mstrAttach:click></div>',layoutConfig:{h:{containerNode:"100%"},xt:true},currentColumn:-1,addNextColumn:function B(K){var J=this.children||[],L=J.length,I=J[L-1];var M=this.addChildren([G.copy(K,{scriptClass:"mstrmojo.ui.ColumnContainer",idx:L})])[0];if(I){I.set("next",M);}},onclick:function A(I){var K=I.getTarget();if(K){var J=this.children;C.forEach(J,function(M,L){if(E.contains(M.domNode,K,true,M.domNode)){this.set("currentColumn",L);}},this);}},oncurrentColumnChange:function D(I){var K=this.children,M=K[I.valueWas],J=K[this.currentColumn],L="active";if(M){M.set(L,false);}J.set(L,true);},removeTrailingContainer:function H(K){var J=this,I=this.children;if(!I||K>=I.length-1){return ;}C.forEach(I.slice(K+1),function(L){J.removeAndDestroyChild(L);});if(K>=0){I[K].set("next",null);}},insertAndRemoveTrailing:function F(J,I){this.removeTrailingContainer(J);this.addNextColumn(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var E=mstrmojo.dom,H=mstrmojo.css,F=mstrmojo.ui.PopupConfig.directionCfg;var C={};var B=false;function O(V,W){if(V.pop){if(W&&V.ax){window.clearTimeout(this._popupAxTimeout);V.actionFn();this.closeAllMenus();}else{var T=V.fn.call(mstrmojo.all[V.scope],V.ctxt);var U=T.ENUM_CORNERS,S=T.maxHeight,R=E.getMaxScrollHeight();T.setAlignment(U.TOP_RIGHT,U.TOP_LEFT);T.hostId=this.id;T.hostElement=this._getItemNode(V._renderIdx);T.includeScroll=this.includeScroll;T.supportsScroll=true;T.alignWithAnchor=true;T.isHostedWithin=false;T.maxHeight=S?Math.min(R,S):R;this.openPopup(T.newInstance());}}else{if(V.dsbld!==true){if(V.fn(V,this)!==false){this.closeAllMenus();}}}}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var S=this.scrollNode;if(!S){return ;}var R=E.getComputedScrollbarWidth(S);S.style.marginRight=-R+"px";S.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function P(T){this._super(T);if(!!mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}if(T.themeClassName){this.themeClassName=T.themeClassName;}var R=this.popupConfig;this.items=R.getMenuItems();var S=["mstrmojo-ui-Menu","unselectable"],U=R.menuCssClass;if(U){S.push(U);}if(R.hasToggleItem){S.push("hasToggleItem");}H.addWidgetCssClass(this,S);if(R&&R.supportsScroll&&R.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+R.maxHeight+"px";}this.useRichTooltip=!!R.useTooltip;this.tstid=R.tstid;},markupMethods:{onvisibleChange:function M(){var R=this.visible;if(!B||R){H.toggleClass(this.domNode,"visible",R);}}},getItemMarkup:function L(W,S){if(W.getItemMarkup){return W.getItemMarkup.apply(this,[W,S]);}var U=!!W.pop,V=U?"submenu":"item",T=C[V],R='<div class="micn"></div>';if(!T){R+=!!mstrApp.isWSStyling?'<div class="mtxt">{@en@n}</div>':"{@en@n}";if(U){R+='<div class="arw"></div>';}T=this._super(W,S).replace("{@en@n}",R);C[V]=T;}if(W.tstid){T=T.replace("{@tag}","{@tag} "+mstrmojo.tstid(W)+" ");}return T;},getItemProps:function J(T,R){var S=this._super(T,R);S.tag="a";S.addCls("mstrmojo-ui-Menu-item");S.addCls(T.cls);return S;},onmouseover:function Q(X){var V=X.config&&X.config.targetHostElement?X.config.targetHostElement:X.getTarget(),Z=this.getItemFromTarget(V),W=this,S=W._lastOpened,R=S&&this.getItemFromTarget(S.popupConfig.hostElement)._renderIdx,T=this.getItemNodeFromTarget(V),U=(R!==undefined&&E.contains(this._getItemNode(R),V,true,this.domNode));if(Z){this._lastHoverIx=Z._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==R&&!U){this._popupTimeOut=window.setTimeout(function(){if(W._lastOpened&&W._lastOpened.visible){W.closePopup();}if(W.visible&&Z.pop){if(Z.ax){W._popupAxTimeout=window.setTimeout(function(){H.removeClass(T,"hlt-ax");O.call(W,Z);},0);}else{O.call(W,Z);}}},400);if(Z.pop&&Z.ax){H.addClass(T,"hlt-ax");}}}var Y=this.popupConfig;if(Y&&!Y.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(X.name,X.hWin,X.e,{targetHostElement:Y.hostElement}));}},onclick:function N(R){this._evtTarget=R.getTarget();this._super(R);R.cancel();},postselectionChange:function D(R){var S=R.added;if(S){var T=this.items[S[0]];O.call(this,T,!(T.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function G(R){E.preventDefault(window,R.e);return false;},postBuildRendering:function A(R){this._super(R);if(this.popupConfig.supportsScroll){var S=this;window.setTimeout(function(){S.updateScrollbars();},10);}},showTooltip:function K(V,U){var T=E.eventTarget(U,V),S=this.getItemNodeFromTarget(T),R=this.getItemFromTarget(T);this.itemDisabled=R&&R.dsbld;if(S&&((R&&R.ttp)||(S.scrollWidth>S.clientWidth)||(T.scrollWidth>T.clientWidth))){this._super(V,U);}},onCloseMenuCallBack:null,onClose:function I(R){if(this._super){this._super(R);}this.closePopup();if(this.onCloseMenuCallBack){this.onCloseMenuCallBack();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Slider","mstrmojo.css","mstrmojo.hash");var D=mstrmojo.dom,C=mstrmojo.css,G=mstrmojo.hash,B=9,F="px";mstrmojo.AttributeSlider=mstrmojo.declare(mstrmojo.Slider,null,{scriptClass:"mstrmojo.AttributeSlider",thumbWidth:7,synchronizeSlider:function A(){if(this.isHoriz){var O=this.orCfg,N=O.lenCssP,J=this[N],H=parseInt(J,10),S=this.hasRendered;var K=this._effLen=isNaN(H)?0:(H-this._exRoom-(2*B));if(J){var R={};R[N]=Math.max(parseInt(J,10)-(2*this.cssBkBW),0)-(2*B)+F;var L={};L[N]=K+F;L[O.posCssP]=Math.round(this._exRoom/2)+B+F;L[O.opPosCssP]="0"+F;if(S){G.copy(R,this.bgNode.style);G.copy(L,this.sdcNode.style);}else{this.bkCssText=C.getCssTextFromObj(R);this.sdcCssText=C.getCssTextFromObj(L);}}var U=this.selectedIndices;if(!G.isEmpty(U)){var Q=this.items.length,M=-1,T=-1,P;for(P=0;P<Q;P++){if(U[P]){if(M<0){M=P;}T=P;}else{if(M>-1){break;}}}this.min=M;this.max=T;}var I=this.typeHelper;this.unit=I.getUnit();if(S){I.updateThumb();}else{I.preUpdateThumb();}}else{this._super();}},postBuildRendering:function E(){this._super();C.addClass(this.containerNode,["attslider"]);C.addClass(this.frontNode,["attslider"]);C.addClass(this.thumbNode,["attslider"]);C.addClass(this.endNode,["attslider"]);C.addClass(this.bgNode,["attslider"]);}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.DocButton");var B=mstrmojo.dom;mstrmojo.express.ui.DocButton=mstrmojo.declare(mstrmojo.DocButton,null,{scriptClass:"mstrmojo.express.ui.DocButton",premousedown:function A(C){if(B.getButton(C.hWin,C.e)===1){var E=this.id,D="pressed";this.set(D,true);B.attachOneTimeEvent(document,"mouseup",function(){var F=mstrmojo.all[E];if(F){F.set(D,false);}},true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo.Box","mstrmojo.List","mstrmojo.SearchBox2","mstrmojo.WaitIcon","mstrmojo.IncFetch");var A=mstrmojo.array,B=mstrmojo.hash;mstrmojo.ElementsBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ElementsBrowser",cssClass:"mstrmojo-ElementBrowser",rootCached:null,attributeID:null,onOK:null,onUpdateBrowseElementsParams:mstrmojo.emptyFn,init:function(C){this._super(C);this.rootCached={};},postBuildRendering:function(){if(this._super){this._super();}var E=this.ebIncFetch,C=this.ebSearchBox,D=this.ebList;E.attachEventListener("fetch",C.id,function(F){E.cp=F.v;E.children=null;E.refresh();this.fetchPage(F.v-1);});C.attachEventListener("ifsChange",E.id,function(F){var G=this.np;B.copy(F.value,this);if(this.np>1){this.children=null;this.refresh();}if(G<=1&&this.np>1||G>1&&this.np<=1||G===0&&this.np>0){this.set("visible",this.np>1);}});C.attachEventListener("itemsChange",D.id,function(F){this.set("items",F.value||[]);});},initBrowser:function(){var C=this.ebSearchBox,D=this.attributeID;C.set("rootID",D);C.clear();C.searchPattern="";if(D&&!this.rootCached[D]){C.set("items",[]);C.blockBegin=1;C.fetch();this.rootCached[D]=true;}else{if(D){C._notifyContentWidget(C.searchCache[D][D]);this.ebList.updateSelections();}}},children:[{alias:"ebSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-ElementsBrowser-SearchBox",taskId:"browseElements",quickSearch:true,getRootID:function(){this.rootID=this.parent.attributeID;},onUpdateSearchParams:function(C){this.parent.onUpdateBrowseElementsParams(C);}},{alias:"ebList",scriptClass:"mstrmojo.List",cssClass:"mstrmojo-ELementsBrowser-List",itemIdField:"v",allowUnlistedValues:false,itemMarkup:'<div class="mstrmojo-bullet"><div class="mstrmojo-ebIcons ae"><div class="mstrmojo-text">{@en@n}</div></div></div>',updateSelections:function(){var C=this.parent,D=C.selectedItems;if(D){this.initializing=true;this.clearSelect(false);this.setSelectedItems(D,false);this.initializing=false;}},onitemsChange:function(){this.updateSelections();},onchange:function(N){if(this.initializing){return ;}var I=this.items,J=this.parent,D=J.selectedItems,G,M;for(var H=0,C=N.removed,L=C&&C.length;H<L;H++){G=I[C[H]];M=A.find(D,this.itemIdField,G[this.itemIdField]);if(M>-1){D.splice(M,1);}}for(var F=0,K=N.added,E=K&&K.length;F<E;F++){G=B.clone(I[K[F]]);D.push(G);}},multiSelect:true,selectionPolicy:"toggle"},{alias:"ebIncFetch",scriptClass:"mstrmojo.IncFetch",cssClass:"mstrmojo-ElementsBrowser-IncFetch",height:"20px",np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(C){this.domNode.style.display=C.value?"block":"none";}}]});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasPopup","mstrmojo.string","mstrmojo.Pulldown","mstrmojo.Container");var C=mstrmojo.css;mstrmojo.CustomGroupEl=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.CustomGroupEl",markupString:'<div id="{@id}" class="mstrmojo-onhoverparent mstrmojo-CustomGroupEl {@cssClass}" style="{@cssText}" mstrAttach:mouseover><div class="mstrmojo-CustomGroupEl-title {@cssClass}" mstrAttach:click><img class="mstrmojo-CustomGroupEl-state {@cssClass}" src="../images/1ptrans.gif" align="absmiddle" onclick="var w = mstrmojo.all[\'{@id}\']; w.set(\'state\', !w.state)" /><span class="mstrmojo-text"></span></div><div class="mstrmojo-onhover mstrmojo-abs mstrmojo-topright mstrmojo-CustomGroupEl-tools {@cssClass}"><img class="mstrmojo-dup" src="../images/1ptrans.gif" title="'+mstrmojo.desc(3397,"Duplicate")+'" onclick="mstrmojo.all[\'{@id}\'].dup()" /><img class="mstrmojo-ops" src="../images/1ptrans.gif"onclick="var w = mstrmojo.all[\'{@id}\'].showOps();" title="'+mstrmojo.desc(7932,"Element display options")+'" /><img class="mstrmojo-del" src="../images/1ptrans.gif" onclick="mstrmojo.all[\'{@id}\'].del()" title="'+mstrmojo.desc(7933,"Delete element")+'"/></div><div class="mstrmojo-CustomGroupEl-details {@cssClass}"><div class="mstrmojo-CustomGroupEl-expr {@cssClass}"></div><div class="mstrmojo-CustomGroupEl-expr-tools {@cssClass}"></div></div></div>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},titleNode:function(){return this.domNode.firstChild.lastChild;},detailsNode:function(){return this.domNode.lastChild;},exprNode:function(){return this.domNode.lastChild.firstChild;},exprToolsNode:function(){return this.domNode.lastChild.lastChild;},titlebarNode:function(){return this.domNode.firstChild;}},markupMethods:{ondataChange:function(){var G=this.data,F=G&&G.n;this.titleNode.innerHTML=(F!=null)?mstrmojo.string.encodeHtmlString(F):"";},onstateChange:function(){var F=this.stateNode;F.className="mstrmojo-CustomGroupEl-state "+(this.state?"opened":"closed");this.detailsNode.style.display=this.state?"block":"none";},onselectedChange:function(){C.toggleClass(this.domNode,["selected"],this.selected);},onshowaddChange:function(){this.exprToolsNode.style.display=this.showadd?"block":"none";}},_set_data:function A(H,F){var G=this.data;this.data=F;this.set("expr",F&&F.expr);return G!==F;},optionsRef:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(7934,"Element Options"),contentNodeCssClass:"mstrmojo-balloon",cssClass:"mstrmojo-CGEOptionsEditor",help:"element_options_dialog_box.htm",ce:false,isp:false,onOpen:function(){var F=this.opener.data,G=this.ops.dsplb.dspl;G.set("value",F.ce?2:(F.isp?1:0));},save:function(){var F=this.ops.dsplb.dspl.value,G=this.opener.data;G.ce=(F==2);G.isp=(F==1);this.close();},children:[{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-ElementOptions",alias:"ops",children:[{scriptClass:"mstrmojo.HBox",alias:"dsplb",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(168,"Display:"),cssText:"margin: 0 5px;"},{alias:"dspl",scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:[{n:mstrmojo.desc(7935,"Display element name only (Default)"),v:0},{n:mstrmojo.desc(7936,"Display individual items only"),v:1},{n:mstrmojo.desc(7937,"Display element name and individual items"),v:2}]}]},{scriptClass:"mstrmojo.HBox",alias:"btns",cssText:"float:right;width:150px;margin:5px;",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(118,"Save"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;",onclick:function(){this.parent.parent.parent.save();}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;margin: 5px;",onclick:function(){this.parent.parent.parent.close();}}]}]}]},showOps:function(){var G=this.titlebarNode,F=mstrmojo.dom.position(G,true);this.openPopup("optionsRef",{zIndex:30,left:Math.round(F.x+F.w-300)+"px",top:Math.round(F.y+F.h)+"px"});},init:function E(F){this._super(F);var G=this.data;if(G){delete this.data;this._set_data(null,G);}},del:function B(){var F=this.parent;if(F&&F.remove){F.remove(this.data);}},dup:function D(){var F=this.parent;if(F&&F.duplicate){var K=this.data,L=F.items,N=K.did,M=1,O=new RegExp(K.n+"_(\\d+)");for(var I=0,J=L.length;I<J;I++){var H=L[I],G=H.n&&H.n.match(O);if(G){M=Math.max(M,G[1]);}N=Math.max(N,parseInt(H.did,10));}F.duplicate(this.data,null,{n:mstrmojo.desc(3651,"Copy of ##").replace("##",K.n),did:F.getNextId(),state:1});}},onmouseover:function(F){this.set("showadd",this.state?true:false);}});})();(function(){var F=mstrmojo.string;function H(Q,R,K){var L,O,J,M=[],N,S;try{N=new RegExp(mstrmojo.string.regEscape(Q),"i");}catch(P){return M;}for(L=0,O=R.length;L<O;L++){J=R[L][K];N.lastIndex=0;if(N.test(J)){M.push(R[L]);}}return M;}function C(){if(this.searchEnabled){this.iconNode.style.display="none";this.inputBar.style.display="";if(this.autofocus){this.inputNode.focus();this.inputNode.select();}}else{this.hideInputNode();if(this.autofocus){if(mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){var J=this;window.setTimeout(function(){try{J.iconNode.focus();}catch(K){}},100);}else{this.iconNode.focus();}}}}var G={8:"BackSpace",9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};mstrmojo.SearchableDropDownList=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchableDropDownList",markupString:'<div id="{@id}" class="mstrmojo-SearchableDropDownList mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}"><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" tabindex="0" mstrAttach:mousedown,keyup>{@text}</div><table class="mstrmojo-InputNodeBar"><colgroup><col class="inputCol"/><col class="iconCol"/></colgroup><tr><td><input class="mstrmojo-SearchableDropDownList-inputNode" value="{@text}" placeholder="{@placeholderText}" mstrAttach:keyup,blur,click/></td><td><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mousedown></div></td></tr></table></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupSlots,{inputBar:function(){return this.domNode.firstChild.lastChild;},inputNode:function(){return this.domNode.firstChild.lastChild.rows[0].cells[0].firstChild;}}),markupMethods:mstrmojo.hash.copy({ontextChange:function(){this.iconNode.innerHTML=F.decodeHtmlString(this.text);this.inputNode.value=this.text;},onheightChange:function(){var J=parseInt(this.height,10);if(J>=0){this.domNode.offsetHeight=J+"px";this.inputBar.offsetHeight=J+"px";}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),popupToBody:true,searchEnabled:false,selectedIndex:-1,placeholderText:"",allItems:null,autofocus:true,focus:function(){C.call(this);},hideInputNode:function B(){this.inputBar.style.display="none";this.iconNode.style.display="block";},postBuildRendering:function A(){if(!this.allItems){this.allItems=this.items;}this._super();C.call(this);},clickInput2pop:false,onclick:function I(J){if(this.clickInput2pop){this.togglePopup();}},prekeyup:function E(R){var K=this.getSearchPattern(),P=[],M,Q=this.inputNode,O=R.e,J,L,N=this.items.length;if(G[O.keyCode]==="Enter"){if(this.items.length>0){this.set("selectedIndex",this.selectedIndex===-1?0:this.selectedIndex);}this.onEnter&&this.onEnter();this.closePopup();return ;}else{if(G[O.keyCode]==="Esc"){this.onEsc&&this.onEsc();if(this.popupRef.visible){this.popupRef.close();}return ;}else{if(G[O.keyCode]==="ArrowDown"){if(!this.popupRef.visible){this.togglePopup();}this.set("selectedIndex",(this.selectedIndex+1)%N);}else{if(G[O.keyCode]==="ArrowUp"){if(this.popupRef.visible&&N>0){this.set("selectedIndex",(this.selectedIndex+N-1)%N);}}else{if(this.searchEnabled){if(K&&K.length>0&&K.indexOf(this.lastSearchPattern)>-1){P=H(K,this.items,this.itemField);}else{P=H(K,this.allItems,this.itemField);}this.set("selectedIndex",-1);this.set("items",P);N=P.length;if(N===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}if(K&&K.length>0){this.set("selectedIndex",mstrmojo.array.find(P,this.itemField,Q.value));}}}}}}this.lastSearchPattern=K;},getSearchPattern:function D(){return F.trim(this.inputNode.value);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=this.searchEnabled?false:true;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",hasToggleItem:false,contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.ui._HasScroller");mstrmojo.requiresDescs(1442,2140);var D=mstrmojo.dom,E=mstrmojo.array;function G(L,N){var K=2140,P="Cancel",O="this.parent.popupConfig."+(L?"ok":"cancel"),M=N&&N[(L?"ok":"cancel")+"BtnText"];if(L){K=1442;P="Ok";}return mstrmojo.Button.newWebButton(M||mstrmojo.desc(K,P),function(R){var S=this.parent,Q=S.popupConfig;S.closeAllMenus();Q["fn"+P](Q.data,S);D.stopPropogation(R.hWin,R.e);},L,{slot:"btnNode",bindings:{enabled:O+"Enabled",visible:O+"Visible"},cssDisplay:"inline-block"});}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="scroll-container" style="{@scCssText}"><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div></div>',markupSlots:{containerNode:function C(){return this.domNode.firstChild.firstChild;},btnNode:function H(){return this.domNode.firstChild.children[1];},bottomNode:function H(){return this.domNode.firstChild.children[2];},scrollNode:function(){return this.domNode.firstChild;},scrollbarHostNode:function(){return this.domNode;}},popupConfig:null,postBuildRendering:function A(K){this._super(K);if(this.popupConfig&&this.popupConfig.supportsScroll){var L=this;window.setTimeout(function(){L.updateScrollbars();},10);}},onmouseover:function J(L){var K=this.popupConfig;if(K&&!K.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(L.name,L.hWin,L.e,{targetHostElement:K.hostElement}));}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll){var L=this.scrollNode;if(!L){return ;}var K=D.getComputedScrollbarWidth(L);L.style.marginRight=-K+"px";L.style.paddingRight=0;}},monitorWindow:function F(){var L=document.activeElement,K=null;if(L!==null&&L.id!==""){K=this.domNode.querySelector("#"+L.id)?L:null;}this._super();if(K){K.focus();}},init:function I(M){this._super(M);var L=this.popupConfig,K=L.bottomNode;if(L&&L.supportsScroll&&L.maxHeight>0){if(L.cssClass.indexOf("RoleMenu")>-1){L.maxHeight=360;}this.cssText=(this.cssText||"")+";max-height:"+L.maxHeight+"px";this.scCssText=(this.scCssText||"")+";max-height:"+L.maxHeight+"px";}if(!!mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}this.data=L.data||{};if(L.onOpen){this.onOpen=L.onOpen;}this.addChildren([G(true,L),G(false)]);if(K){K.slot="bottomNode";this.addChildren(K);}},onOpen:function B(){E.forEach(this.children,function(K){if(K.scriptClass==="mstrmojo.ui.ScrollableContainer"&&K.onOpen){K.onOpen();}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ToolBar","mstrmojo.boxmodel","mstrmojo.array","mstrmojo.EnumRWUnitType","mstrmojo.dom","mstrmojo.css");var Q=["background-color","border","border-color","border-left","border-style","border-top","border-width","filter","top","left","z-index","fx","normWidth","normHeight","normZIndex","normTop","normLeft","tbborder","lrborder","ttl"],X=["width","height"],o="p_fmts";var l="px";var j={getContentHeight:function(r,u){var t=u.ttl&&u.ttl.height;if(r&&t&&!this.floatingToolbar){return Math.max(parseInt(r,10)-parseInt(t,10),0)+l;}return"";},getPortletMinHeight:function(r){return r.ttl.height;},adjustTitleCss:function(){return ;}};var f={getContentHeight:function(r){return r;},getPortletMinHeight:function(){return 0;},adjustTitleCss:function(r){r.titlebarNodeClass+=" floating";return ;}};function A(v,t){var u=this.parent,r=v+"DirtyKey";if(u[r]){u[r](t);}}function P(){this.toolbarTitleTextNode.innerHTML=this.title+(this.count?" ("+this.count+")":"");}function h(){var t=this.parent,v=t&&t.defn;if(v&&parseInt(v.t,10)===mstrmojo.EnumRWUnitType.PANEL){var r=t.parent,u=r.defn;if(u&&u.ifp){return r;}}return null;}var R=mstrmojo.hash,G=2;mstrmojo.DocPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocPortlet",floatingTitle:false,floatingTitleHeight:30,n:"",buttonWidth:17,markupString:'<div class="mstrmojo-portlet {@borderCss}" nm="{@n}" style="{@portletNodeCssText}"><div class="mstrmojo-portlet-slot-shadow" style="{@shadowNodeCssText}"></div><div class="mstrmojo-portlet-container" style="{@portletContainerNodeCssText}"><div class="mstrmojo-portlet-titlebar {@titlebarNodeClass}" style="{@titlebarNodeCssText}"><table style="height:100%;width:100%" class="mstrmojo-portlet-titlebar-table" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-portlet-slot-toolbar-left {@leftToolbarNodeClass}" style="{@leftToolbarNodeCssText}"></td><td class="mstrmojo-portlet-title" style="{@titleNodeCssText}"><div style="overflow: hidden;"></div></td><td class="mstrmojo-portlet-slot-toolbar {@toolbarNodeClass}" style="{@rightToolbarNodeCssText}"></td></tr></table></div><div class="mstrmojo-portlet-buttonbar {@buttonbarNodeClass}" style="{@buttonbarNodeCssText}"></div><div class="mstrmojo-portlet-slot-content" style="{@contentNodeCssText}"></div></div></div>',rightToolbarNodeCssText:"",leftToolbarNodeCssText:"",titleNodeCssText:"",titlebarNodeClass:"",titlebarNodeCssText:"",contentNodeCssText:"",borderCss:"no-border",buttonbarNodeClass:"",buttonbarNodeCssText:"",markupSlots:{containerNode:function(){return this.domNode.lastChild;},portletNode:function(){return this.domNode;},portletContainerNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.lastChild.childNodes[0];},buttonbarNode:function(){return this.domNode.lastChild.childNodes[1];},toolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[2];},toolbarTitleTextNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[1].firstChild;},leftToolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[0];},contentNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontitleChange:function(){P.call(this);},oncountChange:function(){P.call(this);},onfcChange:function(){if(this.fc&&this.content){this.updateContentHeight();}}},formatHandlers:{portletContainerNode:["RW","B","fx","background-color"],shadowNode:["RW","B","fx","background-color"],buttonbarNode:{src:"ttl",props:["background-color"]},titlebarNode:{src:"ttl",props:["F","B","background-color","height","fx","text-align","vertical-align"]},titleNode:{src:"ttl",props:["vertical-align","P","text-decoration"]}},updateServer:true,fc:false,content:null,rightToolbar:null,leftToolbar:null,floatingToolbar:false,_ts:j,getCacheKey:function F(){return this._super()+"-portlet";},getFormats:function M(){var t=this.content,r=t&&t.getFormats();return r&&r[o];},updateContentHeight:function d(w){var r=this.getFormats(),t=this.content,v=t.dimNode||t.domNode,u=((r.ttl&&parseInt(r.ttl.height,10))||0);if(v){if(!w){u+=((this.fc||this.isInFilterPanel())?v.offsetHeight:(r.height?parseInt(r.height,10):0));}this.containerNode.style.height=u+l;this.shadowNode.style.height=u+l;}},init:function p(r){this._super(r);var t=this.content;this.n=(r&&r.defn&&r.defn.n)||"";if(t&&t.getFormats()&&!this.getFormats()){this._createFormats();}},preBuildRendering:function B(){var t=this._ts=(this.floatingTitle)?f:j;if(this.isInFilterPanel()){var u=R.clone(this.formatHandlers);u.portletContainerNode=["z-index","height","B","backgroud-color"];u.shadowNode=["z-index","height","B","fx","background-color"];this.formatHandlers=u;}this._super();t.adjustTitleCss(this);var r="display:none;";if(!this.leftToolbar){this.leftToolbarNodeCssText+=r;}if(!this.toolbar){this.toolbarNodeCssText+=r;}var v=mstrmojo._Formattable.getBorderWidths(this);if(v.l||v.t||v.r){this.borderCss="has-border";}},postBuildRendering:function Y(){var v=mstrmojo.dom,AD=this.titleNode,AC=this.onclicktitle;if(this.floatingTitle&&this.titleNode){document.body.appendChild(this.titleNode);var w=mstrmojo.css,z=this.contentNode,AA=this;if(!this._onhover){this._onhovertt=function(){w.addClass(AA.titleNode,["visible"]);AA._onflt=true;return true;};this._onhoverofftt=function(){w.removeClass(AA.titleNode,["visible"]);AA._onflt=false;return true;};this._onhover=function(){var AE=AA.titleNode;w.addClass(AE,["visible"]);var AF=v.position(AA.contentNode,true);AE.style.top=(AF.y-AE.clientHeight+2)+l;AE.style.left=AF.x+l;return true;};this._onhoveroff=function(){w.removeClass(AA.titleNode,["visible"]);return true;};}v.attachEvent(z,"mouseover",this._onhover);v.attachEvent(z,"mouseout",this._onhoveroff);v.attachEvent(AD,"mouseover",this._onhovertt);v.attachEvent(AD,"mouseout",this._onhoverofftt);}if(AD&&AC){v.attachEvent(AD,"click",AC);}if(this._super){this._super();}var x=this.getFormats();this.set("fc",x&&!x.height);if(this.isInFilterPanel()&&!this.isHorizFP()){var r=this.portletContainerNode.style,u=this.shadowNode.style,AB=this.parent;r.width=u.width="99%";r.top=u.top=AB.topStart+l;r.left=u.left=G+l;}else{if(this.isInFilterPanel()&&this.isHorizFP()){G=8;this.portletContainerNode.style.left=this.shadowNode.style.left=parseInt(x.left,10)+G*this.orgPos+l;}else{if(this.defn.ifp){this.adjustFPHeight2Fit();}}}if(this.buttonbarNode.clientHeight>0){this.buttonbarNode.style.height=this.buttonbarNode.clientHeight*this.model.getZoomFactor()+"px";}},adjustFPHeight2Fit:function(){var u=mstrmojo.dom,r=u.position(this.titleNode),t=u.position(this.contentNode).y-r.y-r.h;this.content.domNode.style.height=parseInt(this.defn.fmts.height,10)-t+"px";},unrender:function E(u){if(this.floatingTitle&&this.titleNode){var w=this.domNode,r=this.titleNode,v=mstrmojo.dom;if(w&&this._onhover){v.detachEvent(w,"mouseover",this._onhover);}if(w&&this._onhoveroff){v.detachEvent(w,"mouseout",this._onhoveroff);}if(r&&this._onhovertt){v.detachEvent(r,"mouseover",this._onhovertt);}if(r&&this._onhoverofftt){v.detachEvent(r,"mouseout",this._onhoverofftt);}if(r){document.body.removeChild(r);}}if(this._super){this._super(u);}},updateStyle:function(t,r){var v=this.shadowNode.style,u=this.containerNode.style;v.height=u.height=t;v.width=u.width=r;},_createFormats:function V(){var x=this.content&&this.content.getFormats(),v;v=x.p_fmts={};var r,w;for(r in Q){w=Q[r];if(x[w]!==undefined){v[w]=x[w];delete x[w];}}for(r in X){w=X[r];if(x[w]!==undefined){v[w]=x[w];}}x.height=this._ts.getContentHeight(x.height,v);if(mstrmojo.dom.isIE&&v.fx&&v.fx.ds&&!v["background-color"]){v["background-color"]="#ffffff";}var u=v.ttl,t=u&&u["background-color"];if(t){this.titlebarNodeClass=mstrmojo.color.getContrastingColor(t,"light","dark");}},refresh:function q(){if(!this.hasRendered){return ;}var t=this.children,r;for(r=t.length-1;r>=0;r--){t[r].refresh();}},isInFilterPanel:function L(){return(h.call(this)!==null);},isHorizFP:function(){if(this.isInFilterPanel()){var r=this.getFilterPanel();return r&&r.defn&&parseInt(r.defn.fds,10)===2;}return false;},getFilterPanel:function H(){return h.call(this);},getContainerHeight:function c(){return this.containerNode.clientHeight;},relocate:function C(r){if(this.isInFilterPanel()&&!this.isHorizFP()){this.portletContainerNode.style.top=this.shadowNode.style.top=r+l;}},setInfoWindowDimensions:function n(w){var t=this.domNode.style,r=this.shadowNode.style,u=this.portletContainerNode.style,v=mstrmojo._Formattable.getBorderWidths(this);w.h-=v.h;w.w-=v.w;r.height=u.height=t.height=w.h+l;r.width=u.width=t.width=w.w+l;w.h-=this.titleNode.offsetHeight;this.toolbarNode.style.display="none";},addDirtyKey:function K(r){A.call(this,"add",r);},removeDirtyKey:function J(r){A.call(this,"remove",r);},setDirtyChildren:function Z(){var r=this.content;if(r&&r.setDirtyChildren){r.setDirtyChildren.apply(r,arguments);}}});var W=0,O=1,k=2;function N(r){var t=this.content.defn;if(t){t.set("ds",r);}}function m(r){return{FormattingOrder:{ZIndex:this.getFormats()["z-index"]},FormattingView:{WindowState:r}};}function a(AG,AE,r,AH){var AC=this.content,AF=AC.k,AB=mstrmojo.boxmodel.px2Inches,u=AC.model.docModel||AC.model,AJ=u.getZoomProps(),x=this.getFormats(),t=AE!==undefined&&r!==undefined,AI={},z=this,AA=m.call(this,AG),AD=!(AC.defn.t===mstrmojo.EnumRWUnitType.GRIDGRAPH||AC.defn.t===mstrmojo.EnumRWUnitType.GRAPH);if(t){AA.FormattingSize={OldHeight:AB(AJ,AE),OldWidth:AB(AJ,r),Height:AB(AJ,parseInt(x.height,10)),Width:AB(AJ,parseInt(x.width,10))};}AI.success=function(v){var w=v&&v.data;if(w){u.loadPartialData(w,AF);}N.call(z,AG);var AK=z.parent;if(AK.adjustSectionSize&&t){AK.adjustSectionSize();}};u.updateUnitFormat(AC,1,AA,AI,{params:{suppressData:AD,rapidExec:AD},config:t?null:{silent:true},preserveUndo:true});if(!t&&!(AH&&AH.all)){if(u.saveRWProps){u.saveRWProps(AF,undefined,1,this.loadDataOnResize,AI,true);}}}function T(){var z=this.content;if(!z){return ;}var w=function(AD){mstrmojo.array.forEach(AD,function(AE){if(AE.ds!==undefined){AE.set("visible",(AE.ds!==z.defn.ds));}});},AA;if(this.isInFilterPanel()){var u=(parseInt(this.defn.ds,10)===W);z.set("visible",u);this.updateContentHeight(!u);AA=this.leftToolbar;w(AA&&AA.children);var v=this.parent;if(v.refreshFP){v.refreshFP();}}else{var r=z.getFormats(),AB=this.getFormats(),t=this.portletContainerNode.style,AC=this.shadowNode.style,x=this.contentNode.firstChild.style;x.height=r.height;x.width=r.width;AC.height=t.height=AB.height;AC.width=t.width=AB.width;AC.top=t.top=AB.top;AC.left=t.left=AB.left;if(AB["z-index"]!==undefined){AC.zIndex=t.zIndex=AB["z-index"];}AA=this.rightToolbar;w(AA&&AA.children);if(z.resize){z.resize();}}}mstrmojo.DocResizablePortlet=mstrmojo.declare(mstrmojo.DocPortlet,null,{scriptClass:"mstrmojo.DocResizablePortlet",loadDataOnResize:false,_createFormats:function V(){this._super();var t=this.getFormats();var r=parseInt(this.defn.ds,10);if(r===W){t.normHeight=t.height;t.normWidth=t.width;if(t["z-index"]!==null&&t["z-index"]!==undefined){t.normZIndex=t["z-index"];}}if(r!==k){t.normTop=t.top;t.normLeft=t.left;}},onmaximize:function e(){var v=this.parent,z=this.content,x=z&&z.getFormats(),u=this.getFormats(),t=u.height,r=u.width,w=mstrmojo._Formattable.getBorderWidths(this);this.clearCache();z.clearCache();u.height=(parseInt(v.getHeight(),10)-w.h)+l;x.height=this._ts.getContentHeight(u.height,u);u.width=x.width=(v.getWidth()-w.w)+l;u.top=u.left=0;u["z-index"]=v.getMaxZIndex()+1;a.call(this,k,t,r);},onminimize:function b(){var x=this.content,t=x.dimNode||x.domNode,w=x&&x.getFormats(),v=this.getFormats(),u=v.height||t.offsetHeight,r=v.width;this.clearCache();x.clearCache();v.width=w.width=v.normWidth;v.top=v.normTop;v.left=v.normLeft;if(v.normZIndex!==null&&v.normZIndex!==undefined){v["z-index"]=v.normZIndex;}w.height=0;v.height=this._ts.getPortletMinHeight(v);a.call(this,O,u,r);},onrestore:function S(){var w=this.content,v=w&&w.getFormats(),u=this.getFormats(),t=u.height,r=u.width;this.clearCache();w.clearCache();u.height=u.normHeight;v.height=this._ts.getContentHeight(u.height,u);u.width=v.width=u.normWidth;u.top=u.normTop;u.left=u.normLeft;if(u.normZIndex!==null&&u.normZIndex!==undefined){u["z-index"]=u.normZIndex;}a.call(this,W,t,r);},changeWindowState:function I(u){N.call(this,u);var t=this.content,v=m.call(t,u),r=t.model.docModel||t.model;return r.getUnitFormatAction(t,1,v);},oncollapse:function U(r){a.call(this,O,undefined,undefined,r);},onexpand:function D(r){a.call(this,W,undefined,undefined,r);},adjustFP:function g(){var t=(parseInt(this.defn.ds,10)===W);this.content.set("visible",t);this.updateContentHeight(!t);var r=this.parent;if(r.refreshFP){r.refreshFP();}},postBuildRendering:function Y(){if(!this._sub_dsChange){this._sub_dsChange=this.defn.attachEventListener("dsChange",this.id,T);}this._super();if(this.isInFilterPanel()){var r=(parseInt(this.defn.ds,10)===W);this.updateContentHeight(!r);}}});mstrmojo.DocPortlet.ST_RESTORE=W;mstrmojo.DocPortlet.ST_MAX=k;mstrmojo.DocPortlet.ST_MIN=O;}());(function(){mstrmojo.requiresCls("mstrmojo.TimePicker","mstrmojo._IsInputControl");var A=2,B=mstrmojo.date;mstrmojo.TimePickerDIC=mstrmojo.declare(mstrmojo.TimePicker,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.TimePickerDIC",popupStyle:2,init:function(C){if(this._super){this._super(C);}this.set("interval",this.dic.itv);this.set("active",A);},getCurValue:function(){if(this.dic.dt==mstrmojo.expr.DTP.TIMESTAMP){var F=B.parseDateAndOrTime(this.value),G=F&&F.time,D=F&&F.date,C,E;if(G&&!D){C=B.parseDateAndOrTime(this.lv),D=C&&C.date;if(!D){E=new Date();D={day:E.getDate(),month:E.getMonth()+1,year:E.getFullYear()};}return B.formatDateInfo(D,mstrmojo.locales.datetime.DATEOUTPUTFORMAT)+" "+B.formatTimeInfo(G,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}}return this.value;},handleDisable:function(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.SliderBox","mstrmojo._IsInputControl","mstrmojo.Box","mstrmojo.hash");var C=mstrmojo.css,B=mstrmojo.dom,D=mstrmojo.hash,A=1;mstrmojo.SliderDIC=mstrmojo.declare(mstrmojo.SliderBox,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.SliderDIC",popupStyle:1,tabIndex:0,markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}" tabindex="{@tabIndex}" ><div class="valuePart" style="{@valueCssText}"><span class="valueLabel">{@valueLabel}</span><span class="valueText">{@valueText}</span></div><table class="sliderPart" style="{@sliderCssText}"><tbody><tr><td class="minText">{@min}</td><td class="sliderWrapper"></td><td class="maxText">{@max}</td></tr></tbody></table><div class="curtain"></div></div>',markupSlots:D.copy({sliderPartNode:function(){return this.domNode.children[1];},minTextNode:function(){return this.domNode.children[1].rows[0].cells[0];},maxTextNode:function(){return this.domNode.children[1].rows[0].cells[2];},sliderNode:function(){return this.domNode.children[1].rows[0].cells[1];},disableCurtainNode:function(){return this.domNode.lastChild;}},D.copy(mstrmojo.SliderBox.prototype.markupSlots)),init:function(E){if(this._super){this._super(E);}this.cssClass=this.showByDefault?"mstrmojo-SliderGroup":"mstrmojo-PopupSlider";this.items=this.getItems();if(this.dic.ipt!==A){this.isSequential=true;this.max=this.dic.max;this.min=this.dic.min;this.interval=this.dic.itv;}},focus:function(){if(mstrmojo.dom.isIE){var E=this;setTimeout(function(){E.domNode.focus();},10);}else{this.domNode.focus();}},preBuildRendering:function(){this._super();var H=this.dic,E=(H.ldw!=null)?H.ldw/100:0.4,F,G=this.openerStyle;if(this.showByDefault){F=G.iw*(1-E)-G.rp-3;this.alignSlider(this.openerNode,G.ih);}else{F=H.w;}this.sliderBar.set("width",F);this.valueText=this.showByDefault?this.dv:this.value;if(!this.showByDefault&&this.unset&&this.isSequential){this.valueText+=" "+mstrmojo.desc(8316,"(out of range)");}},handleDisable:function(){return !!this.showByDefault;},postBuildRendering:function(){if(this._super){this._super();}if(this.showByDefault){var J=this.dic,G=this.value,E=(J.ldw!=null)?J.ldw:40,I=this.openerStyle,F=I.ih;this.domNode.style.width=I.iw+"px";this.domNode.style.height=I.ih+"px";this.valuePartNode.style.width=this.sliderPartNode.style.left=E+"%";if(this.isSequential){this.sliderBar.set("title",mstrmojo.desc(5441,"Minimum value")+": "+this.min+"   "+mstrmojo.desc(5442,"Maximum value")+": "+this.max);}}if(this.handleDisable()){C.toggleClass(this.disableCurtainNode,"disabled",!!this.enabled);if(!this.enabled){var H={height:this.sliderPartNode.clientHeight+"px",width:(this.sliderPartNode.clientWidth+this.valuePartNode.clientWidth)+"px"};D.copy(H,this.disableCurtainNode.style);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var j=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,b=mstrmojo.DI.DIHelpers,W=mstrmojo.array;function V(q){if(!this.modal){return ;}var r=window.mstrApp;if(r&&r.modalEditorChange){r.modalEditorChange(this.id,q);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",allowHTMLTitle:false,help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,onEditorResized:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titleContainerNode:function k(){return this.domNode.firstChild.firstChild;},titlebarNode:function m(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function n(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function o(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.allowHTMLTitle?this.title:mstrmojo.string.encodeHtmlString(this.title);}},onzIndexChange:function(){var q=this.zIndex;this.editorNode.style.zIndex=q;this.curtainNode.style.zIndex=q-1;},onvisibleChange:function(u){if(u){return ;}var t=this.visible,r="closeEffect",q="none";if(t){r="openEffect";q="block";}if(this[r]){this.playEffect(r);}else{this.editorNode.style.display=q;if(this.modal){this.curtainNode.style.display=q;}}},onhelpChange:function e(){if(this.showTitle){var r=this.help,q=this.helpNode;if(!r){q.style.display="none";}else{q.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(r,q){this._super(r,q);V.call(this,true);},close:function g(q){this._super(q);V.call(this,false);},unrender:function B(q){this._super(q);V.call(this,false);},destroy:function h(q){this._super(q);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function l(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(q){var r=q.getTarget();if(r===this.closeNode||r===this.helpNode){C.toggleClass(r,"active",true);}},premouseup:function O(q){var r=q.getTarget();if(r===this.closeNode||r===this.helpNode){C.toggleClass(r,"active",false);}if(q.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function d(q){if(q.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{window.open(mstrmojo.helpPath()+(this.help||""),"_blank");return false;}}},_set_visible:function c(x,t){var r=(this[x]!==t);if(r){this[x]=t;var w=this._close_handler;if(t){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var u=this;w=this._close_handler=w||function(v){var z=M.eventTarget(self,v);if(z&&z.parentNode&&!M.contains(u.editorNode,z,true,document.body)){u.close();}};M.attachEvent(document.body,"mousedown",w);}}else{var q=this._curtain_handler;if(q){M.detachEvent(window,"resize",q);}if(w){M.detachEvent(document.body,"mousedown",w);}}}return r;},showTooltip:function p(x,w){var v=this,r=M.findAncestorByAttr(M.eventTarget(w,x),"tooltip",true,this.domNode),u=r&&r.value;if(!v.hasOpenTooltip&&u){var q=M.position(r.node);v.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:u,top:Math.max(q.y+40,0),left:Math.max(q.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(x,w);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(q){q=Math.round(q);return["rgb(",q,",",q,",",q,")"].join("");}}},preStart:function(){var r=this.target,q=this.widget;q.editorNode.style.display="block";if(!q.modal){return false;}r.style.display="block";C.setOpacity(r,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var q=this.widget;q.editorNode.style.display="none";return !!q.modal;}};function D(q){return function(){Y[q].destroy();};}function J(r,AA,AB,AC){var q=AA.id||"mojoAlertx9",w,z=AA.buttons;W.forEach(z,function(AE){var AD=AE.onclick;AE.onclick=function(AF){var AG=Y[q];if(AD&&AD.call(AE,AF)===false){return ;}AG.destroy();AG=null;};});try{!!Y[q]&&Y[q].destroy();}catch(x){}var t=AA.cssClass,u=[];if(t){u.push(t);delete AA.cssClass;}if(AC){u.push(AC);}u.push("mstrmojo-alert");w={scriptClass:"mstrmojo.Editor",id:q,width:"475px",zIndex:1000,title:AB||mstrmojo.desc(11812,"Notification"),cssClass:u.join(" "),children:[{scriptClass:"mstrmojo.Box",cssClass:"alert-content",children:[{scriptClass:"mstrmojo.Label",text:r,allowHTML:AA.allowHTML}]}],visible:true};var v=new mstrmojo.Editor(N.copy(AA,w));v.render();return v;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(r,z,t){t=t||{};var AA=t.forceClose,x=t.callback||mstrmojo.emptyFn,w=N.copy(z||{},{buttons:AA?[mstrmojo.Button.newActionButton((t.buttonText||mstrmojo.desc(8607,"Dismiss")),x)]:null,showTitle:false,modal:false,top:"42px"}),u=t.duration||6000;var v=J(r,w,"",AA?"ed-notify":"ed-toast"),q=v.id;if(!AA){window.setTimeout(j([x,D(q)]),u);}else{window.setTimeout(function(){if(Y[q]){Y[q].editorNode.style.opacity=0.75;}},6000);}return v;};mstrmojo.confirm=function f(q,x,AA){x=x||{};var t=x.confirmBtn||{},w=x.cancelBtn||{},z=t.hot!==false,r=!!w.hot,v=AA&&AA.title,u=[Z(t.t||mstrmojo.desc(219,"Yes"),t.fn,z,t.cfg),Z(w.t||mstrmojo.desc(218,"No"),w.fn,r,w.cfg)];return J(q,N.copy(AA||{},{buttons:u,onPreClose:function(){if(w&&w.fn){w.fn();}return true;}}),v,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.warn=function K(t,q,r){r=r||{};r.cssClass=(r.cssClass||"")+" mstrmojo-warning";return mstrmojo.confirm(t,q,r);};mstrmojo.alert=function a(w,t,v,x,q,u){var r={title:v||mstrmojo.desc(12405,"Alert"),zIndex:x,cssClass:q,buttons:[Z(mstrmojo.desc(1442,"OK"),t,true)],onPreClose:function(){if(t){t();}return true;}};N.forEach(r,function(AA,z){if(!AA){delete r[z];}});return J(w,N.copy(u,r),v,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.error=function T(w,r,v){var t=w||{};var u=mstrmojo.desc(96,"Error");var q=!(b.getEnvObj().isInDI()||b.getEnvObj().isInQB());if(v){u=(v.title)?v.title:mstrmojo.desc(96,"Error");v.title=u;if(v.enableContactStr===false){q=false;}}J("",N.copy(v||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),r,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:t.shortDesc,longDesc:t.longDesc,showToggle:!!(t.longDesc),enableContactStr:q,allowHTML:!!(v&&v.allowHTML===true)}]}),u,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){var BUILDER_METHOD={BUTTON:"newButton",PICKERBUTTON:"newPickerButton",LIST:"newList",SEPARATOR:"newSeparator",TEXT:"newCustom"};function cmdMethodName(cmdid){return(cmdid==="export")?cmdid+"Cmd":cmdid;}function bindEnabled(enabledFeatures){var arr=enabledFeatures.split(","),txt=[],i,len;for(i=0,len=arr.length;i<len;i++){var s=arr[i],neg=s.match(/^\!/);if(neg){s=s.replace("!","");}txt.push((neg?"!":"")+"this.target.model.features['"+s+"']");}return txt.join(" && ");}function bindItems(cmdid){return"var t = this.target.view, c = this.cmdid; if (t && c) {return this.target.view."+cmdid+"Options;}";}function bindSelectedItem(cmdid){return"var x = this.items; var t = this.target.view, c = this.cmdid; if (t && c){return this.target.view."+cmdid+"Value;}";}function openLink(json){var link=json.link,h=link&&link.href,t=link&&link.target,xtraUrl=json["extra-url"];if(!link||!h){return ;}if(xtraUrl){h+="&"+xtraUrl;}if(link["use-window-open"]){t="_blank";}window.open(h,t?t:"_self");}mstrmojo.ToolBarBuilder={scriptClass:"mstrmojo.ToolBarBuilder",build:function build(nodes,model,config){var arr=[],i,len;for(i=0,len=(nodes&&nodes.length)||0;i<len;i++){var json=nodes[i],n=BUILDER_METHOD[(json&&json.type)||"SEPARATOR"],w=this[n]&&this[n](json,config);if(w){arr.push(w);}}return arr;},newButton:function nwBtn(json,config){if(json["on-click"]||json.link){return this.newCustom(json,config);}var c=cmdMethodName(json.cmdid);return new mstrmojo.Button({title:json.tooltip,iconClass:json.id,cssClass:"mstrmojo-InteractiveButton",target:config&&config.target,cmdid:c,onclick:function(e){var t=this.target,ci=this.cmdid;t[ci](e);},bindings:json.enabledFeatures?{enabled:bindEnabled(json.enabledFeatures)}:null});},newPickerButton:function nwPkrBtn(json,config){var c=cmdMethodName(json.cmdid);var bs;if(!json.items){bs={};bs.items=bindItems(c);}if(json.enabledFeatures){bs=bs||{};bs.enabled=bindEnabled(json.enabledFeatures);}function oc(){var t=this.target,ci=this.cmdid,its=this.items,idx=this.selectedIndex;t[ci](its[idx].dssid);}return new mstrmojo.PickerButton({title:json.title||"",iconClass:json.id,items:json.items,itemDisplayField:"n",itemIdField:"dssid",autoHide:true,size:1,selectedIndex:parseInt(json.selectedIndicesList,10)||0,target:config&&config.target,cmdid:c,onchange:oc,bindings:bs});},newList:function nwLst(json,config){var c=cmdMethodName(json.cmdid),bs={selectedItem:bindSelectedItem(c)};if(!json.items){bs.items=bindItems(c);}if(json.enabledFeatures){bs.enabledFeatures=bindEnabled(json.enabledFeatures);}return new mstrmojo.SelectBox({id:json.cmdid,size:1,tooltip:json.title||"",iconClass:json.id,cmdid:c,target:config&&config.target,itemDisplayField:"n",itemIdField:"dssid",autoHide:true,onchange:function(){var t=this.target,ci=this.cmdid,itm=this.selectedItem;t[ci](itm&&itm.dssid);},items:json.items,bindings:bs});},newSeparator:function nwSep(json,config){return new mstrmojo.ToolSeparator(json);},newCustom:function newCstm(json,config){var b=new mstrmojo.Button({markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass}" title="{@title}" style="{@cssText}" mstrAttach:click,mousedown,mouseup><div id="{@iconClass}" class="mstrmojo-Button-text"></div></div>',title:json.tooltip,cssClass:"mstrmojo-InteractiveButton",onclick:function(){if(json.link){openLink(json);}if(json["on-click"]){eval(json["on-click"]);}},bindings:json.enabledFeatures?{enabled:bindEnabled(json.enabledFeatures)}:null}),v=json.value;b.text=v||"";b.cssText=v?"width:auto;margin-top:4px;":"";b.title=json.tooltip||"";b.iconClass=json.id||"";return b;}};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.CheckBoxDIC");var B=mstrmojo.css,A=mstrmojo.dom;mstrmojo.MarkRowDIC=mstrmojo.declare(mstrmojo.CheckBoxDIC,null,{scriptClass:"mstrmojo.MarkRowDIC",cssClass:"mstrmojo-MarkRowDIC",onclick:function(){if(this.grayed){this.set("grayed",false);}this.set("checked",!this.checked);var E=this.group&&this.group.widgetsMap,D,C;if(this.markAll){for(D in E){if(E.hasOwnProperty(D)){C=E[D];if(C.checked!==this.checked){C.set("checked",this.checked);}}}}else{for(D in E){C=E[D];if(C.markAll&&C.checked!==this.checked){C.set("grayed",true);break;}}}},postBuildRendering:function(){if(this._super){this._super();}var C=this.openerNode;if(!this.markAll){A.attachEvent(this.domNode,"mouseover",function(D){B.addClass(C.parentNode,"markSelection");});A.attachEvent(this.domNode,"mouseout",function(D){B.removeClass(C.parentNode,"markSelection");});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor");function C(E,F){var D=this;if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(E,F,{silent:true});}else{mstrmojo.xhr.request("POST",D.path,F,E,undefined,D.XServer,D.baseParams);}}function A(H,I,G,D){var E=this,F={taskId:"createFolder",taskContentType:"json",folderID:H,name:I,description:G};C.call(E,F,D);}function B(E,I,F){if(!E){mstrmojo.alert(mstrmojo.desc(3380));return false;}var G=this,H=G.fId,D={success:function(J){G.contPanel.name.set("value","");G.contPanel.desc.set("value","");if(G.okFn){G.okFn(J,F);}},failure:function(J){var K="";if(J.getResponseHeader){K=J.getResponseHeader("X-MSTR-TaskFailureMsg");}else{if(J.message){K=J.message;}}K&&mstrmojo.alert(K);}};if(mstrApp.isSingleTier&&this.dp){this.dp.newFolder(H,E,I,D);}else{A.call(G,H,E,I,D);}}mstrmojo.NewFolderEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.NewFolderEditor",cssClass:"mstrmojo-NewFolderEditor",title:mstrmojo.desc(663,"Create Folder"),help:"Create_a_new_folder.htm",navigateAfter:false,okFn:mstrmojo.emptyFn,path:mstrConfig.taskURL,fId:null,children:[{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-Input-Panel",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Name-Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Desc-Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"btns",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",alias:"ok",text:mstrmojo.desc(1442,"OK"),onclick:function(){var E=this.parent.parent,G=E&&E.opener,D=E.contPanel.name.value,F=E.contPanel.desc.value;if(!B.call(E,D,F,E.navigateAfter)){E.close();}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Label","mstrmojo.List","mstrmojo.Pulldown","mstrmojo.ui.ButtonBar","mstrmojo.Box","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.ui.IconTooltipCheckList","mstrmojo.ui.LabelWithIconTooltip","mstrmojo.ValidationTextBox","mstrmojo.hash","mstrmojo.func","mstrmojo.desc","mstrmojo.css","mstrmojo.form","mstrmojo.date","mstrmojo.dom","mstrmojo.alert","mstrmojo.NumberFormat");mstrmojo.requiresDescs(6,7,295,3437,15153,15156,2879,2140,5212,5592,5374,1345,34,5875,29,32,6213,15581,15582,5876,35,15583,2696,18,15631,15632,15633,15634,2033,4604,2058,8378,15836,15837,15838,15839,15840,15841,15842,15843,15846,15847,15849,15948,15956);var H=mstrmojo.desc,P=mstrmojo.hash,R=mstrmojo.Button.newWebButton,W=mstrmojo.css,J={GENERAL:0,SECURITY:1,LAYOUT:2},A={ALL_CHAPTERS:0,CURRENT_CHAPTER:1,CURRENT_PAGE:2},O={FULL_PAGE:1,VISUALIZATIONS:2,BOTH:3},Q={DISABLE:0,ENABLE:1};var X={range:A.CURRENT_CHAPTER,overviewViz:O.FULL_PAGE,paperHeight:"8.5",paperWidth:"11",pageOrientation:-1,mode:0,enableFooter:Q.ENABLE,enableHeader:Q.ENABLE,pdfPwd:"",selectedTabIndex:J.GENERAL,hideTabIndex:undefined};function F(){return true;}function T(){var b={},Z=this.general,a=this.layout;b.range=Z.exportChapters.chapterContent.getSelectedItem().v;b.overviewViz=this.singleVis?O.VISUALIZATIONS:Z.exportIndiVis.checkbox.checked?O.BOTH:O.FULL_PAGE;b.pageOrientation=Z.pageOrientation.oriCheckList.selectedItem.v;b.paperHeight=a.exportPages.paperSize.sizeOptions.getSelectedItem().eph;b.paperWidth=a.exportPages.paperSize.sizeOptions.getSelectedItem().epw;b.pageOrientation=a.pageOrientation.oriCheckList.selectedItem.v;b.mode=0;b.enableHeader=a.pdfHeader.checkbox.checked?Q.ENABLE:Q.DISABLE;b.enableFooter=a.pdfFooter.checkbox.checked?Q.ENABLE:Q.DISABLE;b.pdfPwd="";return b;}function B(b){var Z=this.general,a=this.layout;this.exOpts=b;Z.exportChapters.chapterContent.set("selectedIndex",V(M,b.range));Z.exportIndiVis.checkbox.set("checked",b.overviewViz===O.BOTH);Z.pageOrientation.oriCheckList.set("selectedIndex",V(N,b.pageOrientation));a.exportPages.paperSize.sizeOptions.set("selectedIndex",V(I,L(b.paperWidth,b.paperHeight)));a.pageOrientation.oriCheckList.set("selectedIndex",V(N,b.pageOrientation));a.pdfHeader.set("checked",b.enableHeader===Q.ENABLE);a.pdfFooter.set("checked",b.enableFooter===Q.ENABLE);}var M=[{n:H(2058,"All"),v:A.ALL_CHAPTERS},{n:H(15846,"Current Chapter"),v:A.CURRENT_CHAPTER}];var I=[{n:H(1345,'A3 11.69" x 16.54"'),eph:"11.69",epw:"16.54"},{n:H(34,'A4 8.27" x 11.69"'),eph:"8.27",epw:"11.69"},{n:H(5875,'A5 5.83" x 8.27"'),eph:"5.83",epw:"8.27"},{n:H(29,'Letter 8.5" x 11"'),eph:"8.5",epw:"11"},{n:H(32,'Legal 8.5" x 14"'),eph:"8.5",epw:"14"},{n:H(6213,'Ledger 11" x 17"'),eph:"11",epw:"17"},{n:H(15581,'B4 13.9" x 9.8"'),eph:"13.9",epw:"9.8"},{n:H(15582,'B5 9.8" x 6.9"'),eph:"9.8",epw:"6.9"},{n:H(5876,'Executive 7.25" x 10.5"'),eph:"7.25",epw:"10.5"},{n:H(35,'Folio 8.5" x 13"'),eph:"8.5",epw:"13"},{n:H(15583,'Statement 5.5" x 8.5"'),eph:"5.5",epw:"8.5"}];var N=[{n:H(4604,"Auto"),tx:true,css:"pdfAuto",v:-1},{n:H(6,"Portrait"),css:"pdfPortrait",v:0},{n:H(7,"Landscape"),css:"pdfLandscape",v:1}];function L(a,Z){if(parseFloat(a)<parseFloat(Z)){return{eph:a,epw:Z};}return{eph:Z,epw:a};}function V(a,b){var Z=0;if(typeof b==="object"){var c=P.keyarray(b);P.forEach(a,function(e,d){if(P.equals(P.copyProps(c,e),b)){Z=d;return false;}});}else{P.forEach(a,function(e,d){if(e.v===b){Z=d;return false;}});}return parseInt(Z);}function E(Z){return{scriptClass:"mstrmojo.Box",alias:"pageOrientation",cssClass:"page-orientation",bindings:{visible:"this.parent.parent.basic||this.parent.parent.tabBar.tabs.selectedIndex===2"},children:[{scriptClass:"mstrmojo.Label",text:H(2879,"Orientation")},{scriptClass:"mstrmojo.ui.ButtonBar",renderOnScroll:false,showIcon:true,alias:"oriCheckList",selectedIndex:V(N,Z.exOpts.pageOrientation),items:N,postselectionChange:function(a){Z.exOpts.pageOrientation=this.selectedItem.v;Z.raiseEvent({name:"updateOrientation"});}}]};}function D(b,Z){var a=this;return[{scriptClass:"mstrmojo.Box",alias:"tabBar",cssClass:"tabBar",children:[{scriptClass:"mstrmojo.ui.ButtonBar",renderOnScroll:false,showIcon:false,alias:"tabs",selectedIndex:J.GENERAL,postselectionChange:function(c){var g=this.parent.parent,d=g.tabBar.tabs.selectedItem.v,f=[g.general,g.security,g.layout];for(var e=0;e<f.length;e++){f[e].set("visible",e+1==d);}},items:[{n:H(295,"General"),v:J.GENERAL+1},{n:H(2696,"Security"),v:J.SECURITY+1},{n:H(3437,"Layout"),v:J.LAYOUT+1}]}]},{scriptClass:"mstrmojo.Box",alias:"general",cssClass:"general",children:[{scriptClass:"mstrmojo.Box",alias:"exportChapters",cssClass:"mstrmojo-Pulldown-Box",children:[{scriptClass:"mstrmojo.Label",text:H(5374,"Content")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"chapterContent",selectedIndex:V(M,b.range),items:M}]},{scriptClass:"mstrmojo.Box",alias:"exportIndiVis",cssClass:"mstrmojo-CheckBoxes-Box",bindings:{visible:"!this.parent.parent.basic"},children:[{scriptClass:"mstrmojo.CheckBox",alias:"checkbox",checked:b.overviewViz===O.BOTH?true:false,label:"",oncheckedChange:function(){b.overviewViz=this.checked?O.BOTH:O.FULL_PAGE;}},{scriptClass:"mstrmojo.ui.LabelWithIconTooltip",text:H(15849,"Export Individual Visualizations"),alias:"iconTooltipLabel",iconCss:"info-icon",tooltip:H(15836,"Visualizations will be exported individually on separate pages.")}]},this.orientationSettings,]},{scriptClass:"mstrmojo.Box",alias:"security",cssClass:"security",visible:false},{scriptClass:"mstrmojo.Box",alias:"layout",cssClass:"layout",visible:false,children:[{scriptClass:"mstrmojo.Box",alias:"exportPages",cssClass:"mstrmojo-Pulldown-Box",children:[{scriptClass:"mstrmojo.Box",alias:"paperSize",children:[{scriptClass:"mstrmojo.Label",text:H(15156,"Paper Size")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"sizeOptions",selectedIndex:V(I,L(b.paperWidth,b.paperHeight)),items:I}]}]},this.orientationSettings,{scriptClass:"mstrmojo.Label",cssClass:"wrap",text:H(15839,"Header and Footer")},{scriptClass:"mstrmojo.Box",alias:"pdfHeader",cssClass:"mstrmojo-CheckBoxes-Box",children:[{scriptClass:"mstrmojo.CheckBox",alias:"checkbox",checked:b.enableHeader===Q.ENABLE?true:false,label:"",oncheckedChange:function(){b.enableHeader=this.checked?Q.ENABLE:Q.DISABLE;}},{scriptClass:"mstrmojo.ui.LabelWithIconTooltip",text:H(2033,"Header"),alias:"iconTooltipLabel",iconCss:"info-icon",tooltip:H(15956,"Display the dossier, chapter, and page name on every page.")}]},{scriptClass:"mstrmojo.Label",text:""},{scriptClass:"mstrmojo.Box",alias:"pdfFooter",cssClass:"mstrmojo-CheckBoxes-Box",children:[{scriptClass:"mstrmojo.CheckBox",alias:"checkbox",checked:b.enableFooter===Q.ENABLE?true:false,label:H(15948,"Page Numbers"),oncheckedChange:function(){b.enableFooter=this.checked?Q.ENABLE:Q.DISABLE;}}]}]},{scriptClass:"mstrmojo.Box",alias:"buttonNode",slot:"buttonNode",children:[R(H(2140,"Cancel"),function(){this.parent.parent.close();}),R(a.exportDisplayText,function(){var c=this.parent.parent;if(!F.call(c)){return ;}var d=T.call(c);c.exOpts=d;c.exportHandler(d);c.close();},true),R(H(8378,"Advanced Settings"),function(){Z=!Z;this.parent.parent.set("basic",Z);this.parent.parent.toggleMode();this.set("text",Z?H(8378,"Advanced Settings"):H(15840,"Basic Settings"));},false,{cssClass:"togglerBtn"+(this.singleVis?" hidden":"")})]}];}function U(a){var Z=P.copy(X);if(typeof a==="object"){if(a.hasOwnProperty("range")){Z.range=parseInt(a.range);}if(a.hasOwnProperty("overviewViz")){Z.overviewViz=parseInt(a.overviewViz);}if(a.hasOwnProperty("paperHeight")){Z.paperHeight=a.paperHeight.toString();}if(a.hasOwnProperty("paperWidth")){Z.paperWidth=a.paperWidth.toString();}if(a.hasOwnProperty("pageOrientation")){Z.pageOrientation=parseInt(a.pageOrientation);}if(a.hasOwnProperty("mode")){Z.mode=parseInt(a.mode);}if(a.hasOwnProperty("enableFooter")){Z.enableFooter=parseInt(a.enableFooter);}if(a.hasOwnProperty("enableHeader")){Z.enableHeader=parseInt(a.enableHeader);}if(a.hasOwnProperty("pdfPwd")){Z.pdfPwd=a.pdfPwd.toString();}if(a.hasOwnProperty("selectedTabIndex")){Z.selectedTabIndex=parseInt(a.selectedTabIndex);}Z.hideTabIndex=a.hideTabIndex;}return Z;}mstrmojo.vi.ui.editors.ExportPDFEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ExportPDFEditor",cssClass:"mstrmojo-ExportPDFEditor",title:H(5212,"Export to PDF"),help:"intro_export_dossier.htm",exportHandler:mstrmojo.emptyFn,exportDisplayText:H(5592,"Export"),basic:true,singleVis:false,exOpts:X,orientationSettings:undefined,useCache:false,zIndex:12,init:function S(Z){this._super(Z);this.basic=!this.singleVis;this.exOpts=U.call(this,Z.exOpts);this.orientationSettings=E(this,this);this.set("children",D.call(this,this.exOpts,this.basic));this.attachEventListener("updateOrientation",this.id,function(){var a=V(N,this.exOpts.pageOrientation);this.general.pageOrientation.oriCheckList.set("selectedIndex",a);this.layout.pageOrientation.oriCheckList.set("selectedIndex",a);});},updatePopupConfig:function K(Z,a){B.call(this,this.exOpts);},onOpen:function G(){var a=this.exOpts,Z=this.tabBar.tabs.itemsContainerNode.childNodes;if(a.hideTabIndex!==undefined&&0<=a.hideTabIndex&&a.hideTabIndex<Z.length){W.addClass(Z[a.hideTabIndex],"hidden");}this.toggleMode();this.positionDialog();},onClose:function C(){if(!this.useCache){this.destroy();}},toggleMode:function Y(){var d=this.tabBar.tabs.itemsContainerNode.childNodes,c=this.basic;W.toggleClass(this.editorNode,"advanced",!c);W.toggleClass(d[J.LAYOUT],"hidden",c);var Z=mstrApp&&mstrApp.featureFlagsCache&&mstrApp.featureFlagsCache["EE/PDFEncrypt"];W.toggleClass(d[J.SECURITY],"hidden",c||!Z);var a=d.length;for(var b=0;b<d.length;b++){if(d[b].className.match(/\bhidden\b/)){a--;}}this.tabBar.set("visible",a>1);this.tabBar.tabs.set("selectedIndex",this.exOpts.selectedTabIndex);if(!this.singleVis){this.set("title",c?H(15841,"Export to PDF - Basic"):H(15842,"Export to PDF - Advanced"));}}});mstrmojo.vi.ui.editors.ExportPDFEditor.singleVisSettings={hideTabIndex:J.GENERAL,selectedTabIndex:J.LAYOUT,overviewViz:O.VISUALIZATIONS,enableFooter:Q.DISABLE};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.func","mstrmojo.string","mstrmojo.Box","mstrmojo.HBox","mstrmojo.TextBox","mstrmojo.Button","mstrmojo.Label","mstrmojo._HasLayout","mstrmojo.Editor","mstrmojo.ui.CheckList","mstrmojo.ui.ToggleButton","mstrmojo.mstr.EnumDSSXMLObjectTypes");mstrmojo.requiresDescs(10,1763,15120,15801);var L=mstrmojo.array,Y=mstrmojo.css,D=mstrmojo.dom,Q=mstrmojo.expr,T=mstrmojo.func,B=mstrmojo.string,R=mstrmojo.Button.newWebButton,a=mstrmojo.mstr.EnumDSSXMLObjectTypes;var V=mstrmojo.desc(1763,"Clear All");mstrmojo.vi.ui.IncCheckList=mstrmojo.declare(mstrmojo.ui.CheckList,[mstrmojo.ui._IsIncFetchList],{scriptClass:"mstrmojo.vi.ui.IncCheckList",allowUnlistedValues:false,cssClass:"elementsList",initElements:function X(d){var c=this.ifDataHelper,b=this;if(!c){return ;}d=T.wrapMethods({success:function(e){b.clearSelect(true);b.set("items",[]);b.initScroll();b.addItems(e&&e.es);}},d);c.getItems(1,d,{hideFailureErr:true});},addItems:function N(b){this._super(b||[]);this.postAddItems();this.updateScrollbars();},postAddItems:mstrmojo.emptyFn});function F(b){return !L.filterOne(b.fs,function(c){return c.isbf&&(!!c.dtp?c.dtp:Q.mapBaseFormTypeToDataType(c.bftp))!==Q.DTP.CHAR;});}mstrmojo.vi.ui.ElementsBrowser=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.ElementsBrowser",markupString:'<div id="{@id}" class="mstrmojo-Box mstrmojo-ui-vi-ElementsBrowser {@cssClass}" style="{@cssText}"><div></div><div></div><div></div></div>',markupSlots:{containerNode:function(){return this.domNode;},searchBoxNode:function(){return this.domNode.firstChild;},buttonPanelNode:function(){return this.domNode.childNodes[1];},elementListNode:function(){return this.domNode.childNodes[2];}},layoutConfig:{h:{searchBoxNode:"26px",buttonPanelNode:"36px",elementListNode:"100%"},w:{searchBoxNode:"100%",buttonPanelNode:"100%",elementListNode:"100%"},xt:true},onBrowseElementsFailure:mstrmojo.emptyFn,onUpdateBrowseElementsParams:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.HBox",slot:"searchBoxNode",alias:"util",cssClass:"elemsBrowser-utils-bar",children:[{scriptClass:"mstrmojo.Box",cssClass:"eb-box-search",alias:"box",children:[{scriptClass:"mstrmojo.TextBox",alias:"searchBox",hint:mstrmojo.desc(10,"Search"),cssClass:"eb-searchBox",valueChangeDelay:300,onEnter:function I(){var c=this.value,b=this.parent.parent.parent;b.set("searchPattern",c);},onvalueChange:function P(){var c=this.value,b=this.parent.parent.parent;b.set("searchPattern",c);}},{scriptClass:"mstrmojo.Button",cssClass:"eb-searchBox-clear",text:"",onclick:function(){var b=this.parent.searchBox;b.set("value","");b.cleanUp();b.focus();},bindings:{visible:"(this.parent.searchBox.value || '').length > 0"}}]},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15120,"View Selected"),cssClass:"eb-viewSelected",title:mstrmojo.desc(15120,"View Selected")},{scriptClass:"mstrmojo.ui.ToggleButton",alias:"toggleSelected",oncheckedChange:function J(){var b=this.parent.parent;b.onsearchPatternChange();}}]},{scriptClass:"mstrmojo.HBox",slot:"buttonPanelNode",alias:"buttonPanel",cssClass:"elemsBrowser-button-panel",children:[{scriptClass:"mstrmojo.Button",text:V,title:V,alias:"clearAllBtn",cssClass:"eb-clearAll",useRichTooltip:true,updateTooltipConfig:function U(){var b=D.position(this.domNode);this.richTooltip={content:mstrmojo.desc(16192,"This function is currently not supported for non-text elements in the searching result."),cssClass:"vi-info vi-tooltip-C",left:b.x+60,top:b.y+5};},onclick:function(){var c=this.parent.parent,e=c.elementList;e.clearSelect(false);var b=c.getLocalSearchItems(),d=c.itemIdField;c.onItemsSelectionChange({added:[],removed:b,itemIdField:d});L.removeItems(c.selectedItems,d,b);},showTooltip:function C(d,c){var b=this.parent.parent;if(!this.enabled&&!B.isEmpty(b.getSearchBox().value)&&!F(b.attribute)){mstrmojo._HasTooltip.showTooltip.call(this,d,c);}}},]},{scriptClass:"mstrmojo.vi.ui.IncCheckList",alias:"elementList",slot:"elementListNode",itemIdField:null,bindings:{ifDataHelper:"this.parent.ifDataHelper",itemIdField:"this.parent.itemIdField"},postAddItems:function(){var b=this.parent.selectedItems||[];this.setSelectedItems(b);}}],itemIdField:"v",ifDataSource:null,searchPattern:null,ifDataHelper:null,attribute:null,attributeId:null,selectedItems:[],init:function(b){this._super(b);this.set("ifDataHelper",new mstrmojo.mstr.DocElementDataHelper({source:this.ifDataSource}));if(this.ifDataSource&&this.attribute){this.onattributeChange();}this.elementList.attachEventListener("selectionChange",this.id,"onElementsListchange");},updateClearAllBtnState:function O(){this.buttonPanel&&this.buttonPanel.clearAllBtn.set("enabled",(B.isEmpty(this.getSearchBox().value)||F(this.attribute))&&(this.getLocalSearchItems().length>0));},onElementsListchange:function H(h){var g=h&&h.added||[],e=h&&h.removed||[],f=this.elementList.items,b=this.itemIdField;if(!this.selectedItems){this.selectedItems=[];}var d=this.selectedItems,c=[],j=L.get(f,e);L.removeItems(d,b,j);var k;L.forEach(g,function(l){k=f[l];if(k&&L.find(d,b,k[b])<0){d.push(k);c.push(k);}});this.updateClearAllBtnState();if(j.length>0||c.length>0){this.onItemsSelectionChange({added:c,removed:j,itemIdField:b});}},onItemsSelectionChange:mstrmojo.emptyFn,updateBrowseConfig:function K(){var d=this,h=this.attributeId,b=this.attribute,g=this.searchPattern,f=function(k,l){k.set("textValid",!l);k.domNode.title=B.encodeHtmlString(l,true);};if(!h){return ;}this.ifDataHelper.set("items",null);var c={attributeID:h};if(g&&g!==""){c.searchPattern=g;c.matchCase=false;c.otp=b.t||a.Attribute;}this.onUpdateBrowseElementsParams(c);this.ifDataHelper.set("browseConfig",c);var j=d.getSearchBox();this.elementList.initElements({success:function(k){f(j,"");},failure:function(p){var m=parseInt(p.code,10)+4294967296,o=2147762269,k=2147762227,l=2147762262,n=2147894808;if(m===k||m===l){f(j,"");}else{if(m!==o){var q=(m!==n)?d.onBrowseElementsFailure.bind(d):null;var r={shortDesc:mstrmojo.desc(15402,"This object is not available at this time."),longDesc:p.message},t={title:mstrmojo.desc(15403,"Invalid Object"),buttons:[R(mstrmojo.desc(13197,"Got it"),q,false)]};mstrmojo.error(r,undefined,t);f(j,"");}else{f(j,p.message);}}}});var e=this.util&&this.util.toggleSelected;if(e){e.checked=false;Y.toggleClass(e.domNode,"checked",false);}this.updateClearAllBtnState();},isObjSearchable:function E(b){return !(b&&b.t===a.Consolidation);},onattributeChange:function A(){var b=this.attribute;this.attributeId=b&&b.did;this.searchPattern=null;this.selectedItems=[];this.updateBrowseConfig();var d=this.getSearchBox(),c=this.isObjSearchable(b);if(d){d.set("enabled",c);d.set("hint",c?mstrmojo.desc(10,"Search"):mstrmojo.desc(15801,"Not searchable"));}},getSearchBox:function M(){var b=this.util,c=this.util&&this.util.box;return c&&c.searchBox;},onifDataSourceChange:function G(){this.ifDataHelper.set("source",this.ifDataSource);this.ifDataHelper.set("items",null);},onsearchPatternChange:function W(){var c=this.util&&this.util.toggleSelected;if(!c||!c.checked){this.updateBrowseConfig();}else{var b=this.getLocalSearchItems();this.elementList.clearSelect(true);this.elementList.set("items",[]);this.elementList.addItems(b);this.updateClearAllBtnState();}},getLocalSearchItems:function S(){var c=[],b;if(this.searchPattern&&this.searchPattern!==""){var d=this.searchPattern.toLowerCase();L.forEach(this.selectedItems,function(e){b=(e.n||"").toLowerCase();if(b.indexOf(d)>-1){c.push(e);}});}else{c=(this.selectedItems||[]).slice(0);}return c;},_set_selectedItems:function Z(f,b){var e=this.selectedItems,d=this.itemIdField;b=b||[];this.selectedItems=b;this.updateClearAllBtnState();if(e.length!==b.length){return true;}var c=L.intersection(e,b,d);return c.length!==e.length;},onselectedItemsChange:function(){this.elementList.setSelectedItems(this.selectedItems);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","Editor","HBox","Box","Button","dom","css","desc","hash","array");mstrmojo.requiresCls("mstrmojo.vi.controllers.CustomSortModeActionMgr");var R=mstrmojo.Button.newWebButton,G=mstrmojo.dom,Y=mstrmojo.css,J=mstrmojo.desc,M=mstrmojo.array,P=mstrmojo.hash,L=36,A=600;mstrmojo.requiresDescs(1442,221,5705,134);function I(){var d=this.vizBox=this.model.createVizBoxForCustomSort(this.nodeKey,{width:this.width,height:(parseInt(this.height)-L-this.spacer)+"px",left:"0px",top:this.spacer+"px"});this.visContainer.addChildren(d);var b=d.boxContent.controller,c=b.model.oid,e=c+"."+(this.oldNodeKey||this.srcViz.k),g=(b.getScrollPosition(e))||{x:0,y:0},f=c+"."+this.nodeKey;b.addScrollPosition(f,g.x,g.y);return d;}function O(){var c=this.titleContainerNode,b=c.style,d=G.position(c);if(d.w<A){b.width=A+"px";b.position="relative";b.left=(d.w-A)/2+"px";b.border="solid 1px rgba(68,70,73,0.2)";}}function U(){var d=G.position(mstrApp.rootCtrl.view.domNode),c=G.position(this.titleContainerNode),b=G.position(this.editorNode),e;if(d.w>=c.w){if(c.x<d.x){e=b.x-c.x;this.set("left",(d.x+e)+"px");}else{if(c.x+c.w>d.x+d.w){e=c.x+c.w-(b.x+b.w)+8;this.set("left",(d.x+d.w-b.w-e)+"px");}}}}function Q(){var b=this.editorNode.style;b.width=this.width;b.height=this.height;}function N(){this.vizBox.toggleBoxSelection(true);}function a(g){var d=this.actionMgr.getSlientActionsBefore();if(d.length>0){var e=M.map(d,function(h){return h&&h.submitAction;}),f=this.wrapCustomSortAction(e,false),c=this.srcViz,b={hideCancel:true};c.model.customSort(f,c.controller._getXtabCallback(c,P.copy(g)),b);}}function Z(){var c=this.actionMgr.getContSlientActionsBefore(),b=this,d={success:function(e,g){if(c.length>0){var j=M.map(c,function(m){return m&&m.submitAction;}),l=b.wrapCustomSortAction(j,true),h=b.vizBox.boxContent,f={hideCancel:true,noUpdate:true,preserveStid:true,noDeltaXML:true},k=h.model.getDataService();k.submitUpdates(k.getUpdateTemplateAction(h.k,l),h.controller._getXtabCallback(h),f);}}};a.call(this,d);}mstrmojo.vi.ui.rw.CustomSortDisplayPanel=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.rw.CustomSortDisplayPanel",cssClass:"mstrmojo-CustomSortDisplayPanel",actionMgr:null,init:function S(b){this.actionMgr=new mstrmojo.vi.controllers.CustomSortModeActionMgr({csDisplayPanel:this});this._super(b);},postBuildRendering:function T(){this.getVizBox();var d=this._super();if(!this._listenerProc){var c=this,e=null,b=this._listenerProc=function(f){window.clearTimeout(e);e=window.setTimeout(function(){U.call(c);},150);};G.attachEvent(window,"resize",b);}return d;},destroy:function X(b){if(this._listenerProc){G.detachEvent(window,"resize",this._listenerProc);}this._super(b);},children:[{scriptClass:"mstrmojo.HBox",slot:"titlebarNode",alias:"leftBox",cssClass:"left title",children:[{scriptClass:"mstrmojo.Label",text:J(5705,"Custom Sort")}]},{scriptClass:"mstrmojo.HBox",slot:"titlebarNode",alias:"urBox",cssClass:"left icons",children:[{scriptClass:"mstrmojo.Widget",markupString:'<div id="{@id}" class="icn {@cssClass}" mstrAttach:click></div>',alias:"undo",cssClass:"undo disabled",enabled:false,onclick:function(){if(this.enabled){var b=this.parent.parent;b.actionMgr.undo();}},bindings:{enabled:function(){return !!this.parent.parent.canUndo;}},onenabledChange:function(){Y.toggleClass(this.domNode,"disabled",!this.enabled);}},{scriptClass:"mstrmojo.Widget",alias:"redo",cssClass:"redo disabled",enabled:false,markupString:'<div id="{@id}" class="icn {@cssClass}" mstrAttach:click></div>',onclick:function(){if(this.enabled){var b=this.parent.parent;b.actionMgr.redo();}},bindings:{enabled:function(){return !!this.parent.parent.canRedo;}},onenabledChange:function(){Y.toggleClass(this.domNode,"disabled",!this.enabled);}}]},{scriptClass:"mstrmojo.HBox",slot:"titlebarNode",alias:"btnBox",cssClass:"btnBox",children:[R(J(1442,"OK"),function(){if(this.enabled){var b=this.parent.parent;b.removeCSViz(function(){a.call(b);b.close();},false);}},true,{alias:"savebtn",enabled:false,bindings:{enabled:function(){return this.parent.parent.canApply;}}}),R(J(134,"Apply"),function(){if(this.enabled){var b=this.parent.parent,c=b.actionMgr;Z.call(b);c.appendHistUnsilentActions(c.getUnslientActionsBefore());c.reset();}},true,{enabled:false,bindings:{enabled:function(){return this.parent.parent.canApply;}}}),R(J(221,"Cancel"),function(){var b=this.parent.parent;b.removeCSViz(null,true);b.close();})]},{scriptClass:"mstrmojo.Box",alias:"visContainer",slot:"containerNode"}],oldNodeKey:null,nodeKey:null,vizBox:null,model:null,srcPanelKey:null,srcLayoutKey:null,srcViz:null,srcUnit:null,srcAxis:-1,getVizBox:function D(){return this.vizBox=this.vizBox||I.call(this);},setVizBoxPortalStateRestore:function K(){this.getVizBox().defn.ds=0;},onOpen:function H(){Q.call(this);O.call(this);N.call(this);U.call(this);var c=this.vizBox.boxContent,b=c.selCells||[];M.forEach(b,function(d){c.handleSelection({},null,d);c.clearHighlights();});},onClose:function E(){var c=this.vizBox,b=this.model;if(c.boxContent.cellHoverMgr.removeCue){c.boxContent.cellHoverMgr.removeCue();}mstrmojo.dnd.enable();delete this.actionMgr;delete this.silentMask;this.destroy();},removeCSViz:function F(g,f){var c=this.model,d,b;if(f){d={config:{silent:true}};}else{d={hideCancel:true};}d.style={params:{treesToRender:0}};d=P.copy({noUpdate:true,preserveStid:true,noDeltaXML:true},d);if(g){b={success:function(){g();}};}var e=c.getRemoveUnitAction(this.vizBox);e.clearTargets=true;c.getDataService().submitUpdates(e,b,d);},recreateCSVizForUndo:function W(m,l,o){var p=this.model,q=this.srcViz.model,n=q.getDataService(),c=p.getNextKey(),d,k=this;var b=p.getRemoveUnitAction(this.vizBox);b.clearTargets=true;d=[b];var e=0,f=m.length,j;if(e<f){j=m[e];e++;}d=d.concat(q.getCreateCSVizActions(this.srcUnit,this.srcAxis,c,j));var h=function(z){var v=k.srcLayoutKey,t=k.srcPanelKey,w=z.data,u=M.filterOne(w.layouts,function(AC){return AC.k===v;});p.controller.view.updateXtabStyles(v,u.xtabStyles);p.updateDefnCache(z.defn,[c,t]);p.updateDataCache(w,p.getTargetDefn(c));k.oldNodeKey=k.nodeKey;k.nodeKey=c;k.vizBox.destroy();delete k.vizBox;k.setVizBoxPortalStateRestore();var AA=k.getVizBox();AA.render();var x=0,AB=(l||[]).length,r=function(){if(x<AB){l[x++].perform(false,r,true);}else{mstrApp.hideWait(true);var AD=k.actionMgr;if(AD.hasFailedSorts()){var AC=AD.getActionsCount()-AD.getFailedSortsCount();AD.actions.splice(AC);AD.pos=AC-1;k.updateStatus();AD.showFailedSortsAndReset();if(o&&o.fail){o.fail();}}else{if(o&&o.success){o.success();}}}};r();},g=function(){n.submitUpdates(d,{success:function(r,t){if(e<f){d=n.getUpdateTemplateAction(c,m[e]);e++;g();}else{h(r);}}},{style:{params:{treesToRender:3}},noUpdate:true,preserveStid:true,noDeltaXML:true,hideCancel:true});};g();},wrapCustomSortAction:function B(f,d){var e=this.srcUnit,c=d?1:this.srcAxis,b=1,g=this.srcViz.model.data.gts[((this.srcAxis===b)?"row":"col")+"SubPos"];return{act:"customSortAddActions",unitType:e.otp,unitId:e.id,axis:c,subTotalsPos:[g],actions:f};},maskSilently:function V(b){var e=this.silentMask;if(!e){var d=this.curtainNode,c=document.createElement("div");c.innerHTML=d.outerHTML;c.firstChild.style.zIndex=this.zIndex+1;c.firstChild.style.opacity="0";c.firstChild.style.display="none";e=this.silentMask=this.domNode.appendChild(c.firstChild);}e.style.display=b?"block":"none";},updateStatus:function C(){var b=this.actionMgr;this.set("canUndo",b.pos>=0);this.set("canRedo",(b.actions.length-1)>b.pos);this.set("canApply",b.getSlientActionsBefore().length>0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.array");mstrmojo.requiresDescs(15677,15678,15679,15681,15682,15683,15684);var C=mstrmojo.Button.newWebButton,B={discard:0,open:2,closed:4};mstrmojo.vi.ui.editors.PromptOptionEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.PromptOptionEditor",cssClass:"mstrmojo-PromptOptionEditor-Editor",title:mstrmojo.desc(15681,"Change Prompt Option and Save"),help:null,optVal:B.open,children:[{scriptClass:"mstrmojo.Box",cssClass:"icon-box"},{scriptClass:"mstrmojo.Box",alias:"box",children:[{scriptClass:"mstrmojo.Label",cssClass:"prompt-confirm",text:mstrmojo.desc(15682,"We have detected that this dossier contains prompts. Please confirm your prompt option.")},{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",col1Width:"20%",col2Width:"80%",cssClass:"chkBox",alias:"chkBox",children:[{scriptClass:"mstrmojo.ui.Checkbox",cssDisplay:"inline-block",slot:"col1Node",alias:"chk",oncheckedChange:function D(){var G=this.parent.parent,F=G.optPrompt,H=G.defaultLabel;F.set("visible",this.checked);H.set("visible",!this.checked);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:mstrmojo.desc(15677,"Display prompt when opening this dossier")}]},{scriptClass:"mstrmojo.ui.CheckList",alias:"optPrompt",multiSelect:false,orientation:"v",selectedIndex:0,items:[{n:mstrmojo.desc(15678,"And use current answers as default answers"),v:B.open},{n:mstrmojo.desc(15679,"And discard current answers"),v:B.discard}]},{scriptClass:"mstrmojo.Label",alias:"defaultLabel",cssClass:"indent",text:mstrmojo.desc(15683,"It will use current answer as default answer")}]},{alias:"buttonBar",scriptClass:"mstrmojo.Box",slot:"buttonNode",children:[C(mstrmojo.desc(221,"Cancel"),function(){this.parent.parent.close();}),C(mstrmojo.desc(15684,"Confirm and Save"),function(){var G=this.parent.parent,H=G.box,F=H.chkBox.chk;G.optVal=F.checked?(H.optPrompt.selectedIndex===0?B.open:B.discard):B.closed;G.onSave();G.close();},true)]}],onOpen:function A(){var G=this.box,F=G.chkBox.chk,I=G.optPrompt,H=G.defaultLabel;F.set("checked",this.optVal!==B.closed);I.set("visible",F.checked);I.set("selectedIndex",this.optVal===B.discard?1:0);H.set("visible",!F.checked);H.set("enabled",false);},onSave:mstrmojo.emptyFn,onClose:function E(){this.destroy();}});mstrmojo.vi.ui.editors.PromptOptionEditor.OptValue=B;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(a,X){var Z=this.list,V=Z.selectedIndex,U=Z.items.length,W=a?U-1:0;if(V===W){Z.clearSelect();return ;}if(V===null||V<0){V=a?0:U-1;}else{V+=a?1:-1;}if(X){var Y=Z.items[V];while(Y&&Y.type==="dummy"){if(V===W){Z.clearSelect();return ;}V+=a?1:-1;Y=Z.items[V];}}Z.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(U){if(this.suggestionShown){this._lastOpened.nextHighlight(U);}},preHighlight:function H(U){if(this.suggestionShown){this._lastOpened.preHighlight(U);}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if((j||j==="")&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(U){D.call(this,true,U);},preHighlight:function(U){D.call(this,false,U);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.menus.MenuEditor");mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function D(E){this._super(E);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function C(){return new mstrmojo.ui.menus.MenuEditor({popupConfig:this});},destroy:function B(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.SearchableDropDownList","mstrmojo._IsTableLayoutListDIC","mstrmojo.TableLayoutList","mstrmojo._IsInputControl","mstrmojo.DynamicClassFactory");var N=mstrmojo.DynamicClassFactory.newComponent,F=mstrmojo.hash,K=mstrmojo.array,I=mstrmojo.css,H=mstrmojo.dom,D=2,C=0,G=1,Q=2;mstrmojo.SearchableDropDownListForListDIC=mstrmojo.declare(mstrmojo.SearchableDropDownList,null,{scriptClass:"mstrmojo.SearchableDropDownListForListDIC",markupString:'<div id="{@id}" class="mstrmojo-SearchableDropDownList mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}"><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" tabindex="0" mstrAttach:mousedown,keyup>{@text}</div><table class="mstrmojo-InputNodeBar"><colgroup><col class="inputCol"/><col class="iconCol"/></colgroup><tr><td><input class="mstrmojo-SearchableDropDownList-inputNode" value="{@text}" placeholder="{@placeholderText}" mstrAttach:keyup,blur,click/></td><td><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mousedown></div></td></tr></table></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div><div class="curtain"></div></div>',markupSlots:F.copy({popupNode:function(){return this.domNode.children[1];},disableCurtainNode:function(){return this.domNode.lastChild;}},F.copy(mstrmojo.SearchableDropDownList.prototype.markupSlots)),markupMethods:F.copy({onenabledChange:function(){I.toggleClass(this.disableCurtainNode,"disabled",!!this.enabled);}},F.copy(mstrmojo.SearchableDropDownList.prototype.markupMethods)),init:function O(R){this._super(R);this.popupRef.children[0].onmousedown=function(){var T=this.parent,S=T.opener;T.close();if(S){S.onPopupClosed();}};},postBuildRendering:function(){this.autofocus=false;this._super();},focus:function(){this.autofocus=true;this._super&&this._super();},onmousedown:function B(R){this._super&&this._super(R);if(H.isIE||H.isIEW3C){this.focus();}},openPopup:function(T,R){var S=this.parent.showByDefault;this[T].popupConfig=new mstrmojo.ui.PopupConfig({hostElement:this.popupNode,isHostedWithin:false});this._super(T,R);if(S){this.parent.setInfoWindowLock(true);}},togglePopup:function L(){if(this._super){this._super();}var S=this.popupRef.domNode;var X=H.position(this.popupNode,true);if(S){var W=(window.getComputedStyle&&window.getComputedStyle(S,null))||S.currentStyle;var U=P(W.height);var T=P(W.marginTop)+P(W.borderTopWidth)+P(W.paddingTop)+P(W.paddingBottom)+P(W.borderBottomWidth)+P(W.marginBottom);var V=H.position(S,true);var R=H.windowDim();if(V.y<0){S.style.maxHeight=Math.min((Math.round(X.y)-T),U)+"px";S.lastChild.style.maxHeight=S.style.maxHeight;}else{if(V.y+V.h>R.h){S.style.maxHeight=Math.min((Math.round(R.h-V.y)-T),(Math.round(X.y)-T),U)+"px";S.lastChild.style.maxHeight=S.style.maxHeight;}}}},popupRef:F.copy({onClose:function(){var R=this.opener.parent.showByDefault;if(R){this.opener.parent.setInfoWindowLock(false);}}},F.clone(mstrmojo.SearchableDropDownList.prototype.popupRef)),onPopupClosed:mstrmojo.emptyFn});function M(S){var R=[];mstrmojo.array.forEach(S,function(T){R.push(T.n);});return R;}mstrmojo.TableLayoutListForListDIC=N(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC],{scriptClass:"mstrmojo.TableLayoutListForListDIC",getItemMarkup:function(V,S){var U='<{@tag} class="item {@cls}" idx="{@idx}" title="{@en@n}" style="{@style}"><span class="item_bg"></span>{@en@n}</{@tag}>',R=this.getLeftEndTitle(S),T=this.getRightEndTitle(S),W=this.itemsPerRow;R='<td class="left_text" title="'+R+'">'+R+"</id>";T='<td class="right_text" title="'+T+'">'+T+"</id>";if(W>0){U=(S%W===0?"<tr>"+R:"")+"<td>"+U+"</td>"+((S+1)%W===0?T+"</tr>":"");}else{U='<td><div class="item_wrapper" idx="'+S+'">'+U+"</div></td>";if(!S){U="<tr>"+R+U;}else{if(S===this.items.length-1){U=U+T+"</tr>";}}}return U;},postvalueChange:function(){this._super&&this._super();if(this.parent&&this.parent.owner&&this.parent.owner.model){var R=this.parent.owner.model,S=R.getZoomFactor&&R.getZoomFactor()||1;this.zoomBackground(S,this.domNode.getElementsByClassName("item_bg"));}},postBuildRendering:function(){this._super&&this._super();I.toggleClass(this.domNode,"disabled",!this.enabled);if(this.parent&&this.parent.owner&&this.parent.owner.model){var T=this.parent.owner.model,U=T.getZoomFactor&&T.getZoomFactor()||1;if(U!==1){var R=this.domNode.getElementsByClassName("item_wrapper");for(var S=0;S<R.length;S++){R[S].parentNode.style.width=R[S].parentNode.offsetWidth*U+"px";}this.zoomStyle(U,this.domNode.getElementsByClassName("item_bg"),100,500);}}},});function J(V,W,S,U){var X=W.ipr||0,T=W.mint||"",R=W.maxt||"";return{0:{scriptClass:"mstrmojo.SearchableDropDownListForListDIC",cssDisplay:"block",searchEnabled:S.length>=10,itemIdField:"v",fixWidth:true,fixHeight:true,postCreate:function(){var b=this.value||"",a=W.ipt||C,c=a===G?W.ust||"":"",Y=mstrmojo.array.find(S,"wbfv",b),Z=mstrmojo.array.find(S,"v",b);if(a!==Q){Y=Z;}if(Y===-1||U){b=(Y===-1&&Z===-1)?b:undefined;if(Y===-1&&Z===-1&&U){S=[{n:b||"",v:b||""}].concat(S);}else{S=[{n:c,v:b}].concat(S);}if(Z!==-1){Y=Z;}Y+=1;if(Y===0){this.unset=true;}}this.items=S;this.selectedIndex=Y;this.set("value",S[Y].v);if(this.parent.showByDefault&&this.searchEnabled){this.applyChange=function(){if(this.value!=this.parent.value){this.parent.set("value",this.value);}else{this.items=this.allItems;this.set("text",this.text);}};this.onvalueChange=function(){};if(H.isIE||H.isIEW3C){this.onPopupClosed=function(){this.applyChange&&this.applyChange();};}}},onblur:function(Y){this.applyChange&&this.applyChange();},onEnter:function(){this.applyChange&&this.applyChange();},onEsc:function(){this.items=this.allItems;this.set("value",this.parent.value);},getDisplayValue:function(){return this.items.length&&this.items[this.selectedIndex===-1?0:this.selectedIndex].n;},isPopupClosed:function(){return !(this.popupRef&&this.popupRef.visible);},bindings:{enabled:"this.parent.enabled"}},1:{scriptClass:"mstrmojo.TableLayoutListForListDIC",styleCssClass:"radio",itemsPerRow:X,items:S,getDisplayValue:function(){return this.items[this.selectedIndex].n;},bindings:{enabled:"this.parent.enabled"}},2:{scriptClass:"mstrmojo.TableLayoutListForListDIC",styleCssClass:"check",delim:",",multiSelect:true,itemsPerRow:X,items:S,getDisplayValue:function(){return"";},bindings:{enabled:"this.parent.enabled"}}}[V||0];}function P(R){var S=parseInt(R);return S===null||isNaN(S)?0:S;}mstrmojo.ListDIC=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.ListDIC",tabIndex:0,markupString:'<div class="mstrmojo-ListDIC {@cssClass}" tabIndex="{@tabIndex}" mstrAttach:focus></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onwidthChange:function(){if(this.dicWidget&&this.width){this.dicWidget.set("width",this.width);}},onheightChange:function(){if(this.dicWidget&&this.height){this.dicWidget.set("height",this.height);}}},init:function(R){this._super(R);this.style=this.dic.st;this.items=this.getItems();this.set("children",[mstrmojo.hash.copy(J(this.style,this.dic,this.items,this.dic.ipt===D),{alias:"dicWidget",value:this.value,onvalueChange:function(){if(this.value!=this.parent.value){this.parent.set("value",this.value);}},itemName:function S(V,T,U){return V[U.itemField];}})]);if(this.dicWidget.setDirtyFlag){this.setDirtyFlag=function(U,T){this.dicWidget.setDirtyFlag(U,T);};}},getDisplayValue:function E(){var R=this.dicWidget.getDisplayValue();return(R!=null)?R:this.dv;},onfocus:function(R){this.focus();},focus:function(){var R=this;if(mstrmojo.dom.isIE){setTimeout(function(){R.dicWidget.focus&&R.dicWidget.focus();},10);}else{R.dicWidget.focus&&R.dicWidget.focus();}},postBuildRendering:function(){this._super();if(!mstrmojo.isDescendant(this.owner,this)&&this.showByDefault){this.dicWidget.set("height",(this.openerStyle.ih||0)+"px");this.dicWidget.set("width",(this.openerStyle.iw||0)+"px");}},applyChanges:function(){var R=this._super();if(this.canSlice){var T={type:parseInt(this.dic.ct,10),src:this.dic.k,ctlKey:this.dic.ckey,include:this.dic.include,tks:this.dic.tks,ck:this.dic.ck,disablePU:false};var S=this;window.setTimeout(function(){S.owner.model.sendTransactionUpdates(T);},0);}return this.style?R:this.dicWidget.isPopupClosed();},cleanup:function A(){if(!this.style){this.dicWidget.closePopup();}},isDicWidgetReady:function(){return this.dicWidget;}});})();(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!=this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Box","mstrmojo.Label","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.Dialog","mstrmojo.cookies","mstrmojo.string");mstrmojo.requiresDescs(17,18,221,9772,11773,14028,16220,16227,14138,14139,14140,14149,14522,14523,14524,16224,14526,14527);var M=mstrmojo.css,V=mstrmojo.dom,I=mstrmojo.hash;var D=mstrmojo.validation,G=D.STATUSCODE,H=D.TRIGGER,U=D.VALIDATOR,K=mstrmojo.expr.DTP;var b={intervalCtr:0,qrLoaded:false,maxPollingAttempts:80,timeDelay:3000};var Q={mini_badge:"#ddd",mini_badge_icon:"../style/mstr/images/badge-placeholder-m.png",t_color:"#797979",appName:"",name:""};var F={firstName:"",badgeId:""};var J={duration:undefined,elem:undefined,callback:undefined,timerInterval:null,init:function(d,c,e){this.duration=d;this.elem=c;this.callback=e;},startTimer:function(){this.stopTimer();var h=Date.now(),e,c,f;var d=this;function g(){e=d.duration-(((Date.now()-h)/1000)|0);c=(e/60)|0;f=(e%60)|0;c=c<10?"0"+c:c;f=f<10?"0"+f:f;d.elem.set("text",c+":"+f);if(e<=0){h=Date.now()+1000;d.callback();d.stopTimer();}}g();this.timerInterval=setInterval(g,1000);},stopTimer:function(){if(this.timerInterval){clearInterval(this.timerInterval);}}};function B(c){c.sn=this.serverName||mstrConfig.serverName;c.sp=this.serverPort||mstrConfig.serverPort;c.connectionId=this.connectionId||"";return c;}function R(){this.set("expired",true);this.usherProps.qrLoaded=false;}function N(){try{var d=this.usherProps;var c=this;if(d.qrLoaded){if(d.intervalCtr>d.maxPollingAttempts){R.call(c);}else{clearTimeout(this.pullTimeout);this.pullTimeout=setTimeout(function(){d.intervalCtr+=1;if(!c.stopPolling){W.call(c);}},d.timeDelay);}}}catch(f){}}function P(e,d,c){if(mstrApp.serverRequest){mstrApp.serverRequest(e,d,c);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,d,e);}}function W(){var d=this,e=this.usherProps,f={taskId:"usherLoginWeb",pollOnly:"true",server:this.serverName||mstrConfig.serverName,port:this.serverPort||mstrConfig.serverPort,project:this.projectName||mstrConfig.projectName,connectionId:this.connectionId},c={success:function(h){try{if(h.status=="invalid"){N.call(d);}else{if(h.status=="success"){function g(m){d.onUsherLogin(m);e.qrLoaded=false;}if(d.rememberMe===true){var j={success:function(m){g(m);},failure:function(m){d.onUsherError(m);}};var l={taskId:"usherRememberMe"};l.deviceId=mstrmojo.cookies.getCookieSetting("usher_sso_device")?mstrmojo.cookies.getCookieSetting("usher_sso_device"):"";P(l,j,{doNotHold:true});}else{g(h);}}}}catch(k){mstrmojo.alert("usherPollForScan:\n "+k.messsage);}},failure:function(g){R.call(d);d.onUsherError(g);}};P(f,c,{doNotHold:true});}function Z(c){this.userDetails.set("text",c||"");}function L(c){var d=this;d.loginButton.set("visible",c);d.loginNotificationBox.set("visible",!c);}function C(){var f=this.usherProps;var e=this.notificationTimer;var d=this,c={success:function(j){try{if(j.status==1){function m(){L.call(d,true);}function h(){if(d.pullTimeout){clearTimeout(d.pullTimeout);}d.usherProps.intervalCtr=0;f.qrLoaded=true;N.call(d);}var l=60*5;e.init(l,d.loginNotificationBox.timer,m);e.startTimer();L.call(d,false);h();}else{d.onUsherError(j);}}catch(k){mstrmojo.alert("Error:\n"+k.message);}},failure:function(h){d.onUsherError(h);}},g={taskId:"usherNotifyMe"};g.deviceId=mstrmojo.cookies.getCookieSetting("usher_sso_device")?mstrmojo.cookies.getCookieSetting("usher_sso_device"):"";P(B.call(this,g),c,{doNotHold:true});}function A(){var d=this,c={success:function(f){try{d.set("notificationMode",false);d.reloadQR();}catch(g){mstrmojo.alert("Error:\n"+g.messsage);}},failure:function(f){d.onUsherError(f);}},e={taskId:"usherRememberMe",rememberMe:false};if(d.userInfo.badgeId!==""){e.badgeId=d.userInfo.badgeId;}e.deviceId=mstrmojo.cookies.getCookieSetting("usher_sso_device")?mstrmojo.cookies.getCookieSetting("usher_sso_device"):"";P(B.call(this,e),c,{doNotHold:true});}function O(g){if(this.notificationMode==true&&!g){return ;}var e=this.usherProps;this.showQRLoading(true);var d=this,c={success:function(j){try{if(j.img){d.set("notificationMode",false);d.updateQRCode(j.img);d.set("badge",j.badgeInfo&&j.badgeInfo[0]);e.intervalCtr=0;e.qrLoaded=true;this.stopPolling=false;N.call(d);}else{var k=JSON.parse(j.data);var h=k.pnEnabled||k.isPNEnabled;d.set("isPnEnabled",h);if(k.code||k.proximityBasedLogin){d.set("notificationMode",false);if(k.proximityBasedLogin&&!g){d.updateQRCodeProximity();d.set("proximityMode",true);}else{d.updateQRCode(k.code);d.set("proximityMode",false);}d.set("badge",j.badgeInfo&&j.badgeInfo[0]);e.intervalCtr=0;e.qrLoaded=true;this.stopPolling=false;mstrmojo.cookies.updateCookieSetting("usher_sso_device",j.device_id);N.call(d);}else{d.set("proximityMode",false);d.set("notificationMode",true);d.refresh.set("visible",false);if(k.photoData&&d.userInfoNode){d.userInfoNode.src="data:image/png;base64,"+k.photoData;}d.userInfo.firstName=k.firstName;d.userInfo.badgeId=k.badgeId;L.call(d,true);d.set("badge",j.badgeInfo&&j.badgeInfo[0]);}}}catch(l){mstrmojo.alert("getQRCode:\n "+l.messsage);}},failure:function(h){d.handleQRCodeError(h);R.call(d);d.onUsherError(h);},complete:function(){d.showQRLoading(false);}},f={taskId:"usherQRWeb"};f.deviceId=mstrmojo.cookies.getCookieSetting("usher_sso_device")?mstrmojo.cookies.getCookieSetting("usher_sso_device"):"";P(B.call(this,f),c,{doNotHold:true});}function E(){var e=this,h=this.registerButton,f=this.parent.badgeNode.childNodes[1];if(h.enabled){h.set("enabled",false);M.addClass(f,["anim"]);var c={},d={success:function(j){var k=j&&j.name==e.user.value;c={msg:k?mstrmojo.desc(14139,"You've successfully registered. Please check your email to continue.")+" "+mstrmojo.desc(16222,"Or perform a MicroStrategy badge recovery."):j.getResponseHeader("X-MSTR-TaskFailureMsg"),successful:k};},failure:function(j){c={msg:j.getResponseHeader("X-MSTR-TaskFailureMsg"),successful:false};},complete:function(){h.set("enabled",true);M.removeClass(f,["anim"]);e.set("regMsg",c);}},g={taskId:"usherRegUsr",server:this.serverName||mstrConfig.serverName,project:mstrConfig.projectName,port:this.serverPort||mstrConfig.serverPort,email:this.email.value,userid:this.user.value,password:this.pwd.value};P(g,d);}}function T(c){return mstrmojo.hash.copy(c,{scriptClass:"mstrmojo.ValidationTextBox",cssDisplay:"block",postCreate:function(){if(V.isIE9||V.isIE8||V.isIE7){this.emptyText=this.hint;}},onEnter:function(){E.call(this.parent);}});}mstrmojo.UsherLogin=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.UsherLogin",markupString:'<div id="{@id}" class="mstrmojo-UsherLogin-Container {@cssClass}" style="{@cssText}" ><div class="mstrmojo-UsherLogin-badge"><div class="icn"><img src="../images/1ptrans.gif"/></div><div class="dots"><div class="dot1"></div><div class="dot2"></div><div class="dot3"></div></div><div class="app"><img src="../style/mstr/images/badge-app.png"/></div></div><div class="mstrmojo-UsherLogin-badgeLabel"><div class="app-name"></div><div id="badgename" class="badge-name"></div></div><div class="mstrmojo-UsherLogin"><div class="mstrmojo-UsherLogin-QR mode"><img class="QR" src="../images/1ptrans.gif" alt="" /></div><div class="mstrmojo-UsherLogin-register mode"></div></div><div class="mstrmojo-UsherLogin-userInfo mode"><img class="userInfo" src="../images/1ptrans.gif" alt="" /></div><div class="mstrmojo-UsherLogin-notification"></div><div class="mstrmojo-UsherLogin-remember-setting"><div class = "mstrmojo-UsherLogin-remember"></div><div class = "mstrmojo-UsherLogin-forget"></div></div><div class="mstrmojo-UsherLogin-link"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},badgeNode:function(){return this.domNode.firstChild;},badgeIconNode:function(){return this.domNode.firstChild.firstChild.firstChild;},badgeLabelNode:function(){return this.domNode.childNodes[1];},usherNode:function(){return this.domNode.childNodes[2];},qrNode:function(){return this.domNode.childNodes[2].firstChild;},qrCodeNode:function(){return this.domNode.childNodes[2].firstChild.firstChild;},refreshNode:function(){return this.domNode.childNodes[2].firstChild.lastChild;},registerNode:function(){return this.domNode.childNodes[2].lastChild;},userNode:function(){return this.domNode.childNodes[3];},userInfoNode:function(){return this.domNode.childNodes[3].firstChild;},notificationNode:function(){return this.domNode.childNodes[4];},rememberSettingsNode:function(){return this.domNode.childNodes[5];},rememberNode:function(){return this.domNode.childNodes[5].firstChild;},forgetNode:function(){return this.domNode.childNodes[5].lastChild;},linksNode:function(){return this.domNode.lastChild;}},markupMethods:{onqrCodeChange:function(){if(this.qrCodeNode){this.qrCodeNode.src=this.qrCode;}},onbadgeChange:function(){var d=this.badge||Q,h=d.badgeFormat,c=h&&JSON.parse(h)||{isnull:true},f=this.badgeLabelNode,e=this.badgeIconNode,g=this.domNode;if(this.showBadgeBackgroundImage){g.style.backgroundColor=c.mini_badge;if(c.bg_4){g.style.backgroundImage="url("+c.bg_4+")";}}e.src=c.mini_badge_icon||Q.mini_badge_icon;if(!c.isnull&&!c.mini_badge_icon){M.addClass(e.parentNode,"default");}f.firstChild.innerHTML=mstrmojo.string.encodeHtmlString(d.appName||Q.appName);f.lastChild.innerHTML=mstrmojo.string.encodeHtmlString(d.name||Q.name);f.lastChild.title=d.name||Q.name;f.style.color=c.t_color||Q.t_color;this.linksNode.style.color=c.t_color||Q.t_color;},onexpiredChange:function(){M.toggleClass(this.usherNode,"expired",this.expired);},onloadingChange:function(){M.toggleClass(this.usherNode,"loading",this.loading);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";if(this.visible&&this.canRequestQR()&&!this._lastVisible){O.call(this);}this.stopPolling=!this.visible;this._lastVisible=this.visible;},onnotificationModeChange:function(c){M.toggleClass(this.containerNode,"notificationMode",this.notificationMode);},onproximityModeChange:function(c){M.toggleClass(this.containerNode,"proximityMode",this.proximityMode);},onisPnEnabledChange:function(){this.hideRememberMe(!this.isPnEnabled);}},qrCode:"../images/1ptrans.gif",badge:Q,expired:false,onUsherLogin:mstrmojo.emptyFn,onUsherError:mstrmojo.emptyFn,showBadgeBackgroundImage:true,usherProps:null,serverName:null,serverPort:null,rememberMe:false,userInfo:null,notificationTimer:null,loadQR:false,notificationMode:false,isPnEnabled:false,init:function S(c){if(this._super){this._super(c);}M.addWidgetCssClass(this,"");this.usherProps=this.usherProps?I.copy(this.usherProps,I.clone(b)):I.clone(b);this.userInfo=this.userInfo?I.copy(this.userInfo,I.clone(F)):I.clone(F);this.notificationTimer=this.notificationTimer?I.copy(this.notificationTimer,I.clone(J)):I.clone(J);},destroy:function X(c){this.stopPolling=true;clearTimeout(this.pullTimeout);this._super(c);},canRequestQR:function(){return this.usherProps&&(this.loadQR||(this.serverName||mstrConfig.serverName));},showUserInfo:function(c){this.refresh.set("visible",false);this.refresh.set("visible",false);},updateQRCode:function(c){this.set("qrCode","data:image/png;base64,"+c);this.set("expired",false);this.refresh.set("visible",false);},updateQRCodeProximity:function(){this.set("qrCode","../images/WaitUsherRadar.gif");this.set("expired",false);this.refresh.set("visible",false);},handleQRCodeError:function(){this.set("qrCode","../style/mstr/images/msgError.gif");this.set("expired",true);this.refresh.set("visible",true);},showQRLoading:function Y(c){this.set("loading",c);if(c){this.refresh.set("visible",false);}},postBuildRendering:function(){this._super();this.registerForm.set("tabIndex",-1);},toggleRegister:function(c){this.registerVisible=(c!==undefined)?c:!this.registerVisible;M.toggleClass(this.usherNode,"show-register",this.registerVisible);this.registerLink.set("text",this.registerLink.texts[this.registerVisible?1:0]);if(this.isPnEnabled===true){this.hideRememberMe(this.registerVisible&&this.isPnEnabled);}},hideRememberMe:function(c){M.toggleClass(this.rememberSettingsNode,"hide-rememeber",c);},reloadQR:function(){if(this.canRequestQR()){if(this.pullTimeout){clearTimeout(this.pullTimeout);}this.usherProps.intervalCtr=0;this.usherProps.qrLoaded=false;if(this.visible){O.call(this);}}},children:[{scriptClass:"mstrmojo.Label",slot:"qrNode",alias:"refresh",cssClass:"refresh",text:mstrmojo.desc(14028,"Refresh QR Code"),visible:false,onclick:function(){O.call(this.parent);}},{scriptClass:"mstrmojo.Box",slot:"registerNode",alias:"registerForm",regMsg:null,children:[T({alias:"user",cssClass:"login-username",cssDisplay:"block",hint:mstrmojo.desc(17,"User name")}),T({alias:"pwd",cssClass:"login-pwd",hint:mstrmojo.desc(18,"Password"),type:"password"}),T({alias:"email",cssClass:"login-email",dtp:K.VARCHAR,constraints:{validator:U.VALIDATE_EMAIL,trigger:mstrmojo.validation.TRIGGER.ONKEYUP},bindings:{visible:"this.parent.parent.usherRegistrationOption > 2"},hint:mstrmojo.desc(9772,"Email")}),T({alias:"confirmEmail",cssClass:"login-email",bindings:{visible:function(){return this.parent.parent.usherRegistrationOption>2;}},hint:mstrmojo.desc(14149,"Confirm Email"),onpaste:function(c){V.preventDefault(c.hWin,c.e||c.hWin.event);}}),{scriptClass:"mstrmojo.Box",alias:"regMsg",cssClass:"register-msg",bindings:{regMsg:function(){return this.parent.regMsg;},visible:function(){return this.parent.regMsg;}},onregMsgChange:function(){if(this.domNode){this.domNode.style.color=this.regMsg&&this.regMsg.successful?"#42C31E":"#f00";}},children:[{scriptClass:"mstrmojo.Label",alias:"msg",cssClass:"register-msg-txt",bindings:{text:function(){return this.parent.regMsg.msg;}}},{scriptClass:"mstrmojo.Label",alias:"icn",cssClass:"register-msg-icn",onclick:function(){this.parent.parent.parent.toggleRegister();this.parent.parent.set("regMsg",null);}}]},{scriptClass:"mstrmojo.Button",alias:"registerButton",cssClass:"register mstrmojo-WebButton hot",cssDisplay:"inline-block",text:mstrmojo.desc(11773,"Register"),bindings:{enabled:function(){var j=this.parent.user.value,f=this.parent.email.value,d=this.parent.confirmEmail.value;var e=j.length>0;if(e){if(this.parent.parent.usherRegistrationOption>1){var h=f.length>=3&&d.length>=3&&f.toUpperCase()===d.toUpperCase()&&this.parent.email.validationStatus.code===G.VALID;if(h){if(this.parent.parent.usherRegistrationOption==7){var g=this.parent.parent.usherRegistrationDomain.toUpperCase();var c=f.substr(f.indexOf("@")+1).toUpperCase();return g.indexOf(c)>=0;}}return h;}}return e;}},onclick:function(){E.call(this.parent);}},{scriptClass:"mstrmojo.Button",alias:"registerCancelButton",cssClass:"register-cancel",cssDisplay:"inline-block",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var c=this.parent;c.parent.toggleRegister();c.set("regMsg",null);c.user.set("value","");c.pwd.set("value","");c.email.set("value","");c.confirmEmail.set("value","");c.user.domNode.focus();}}]},{scriptClass:"mstrmojo.CheckBox",slot:"rememberNode",alias:"remember-me",label:mstrmojo.desc(14522,"Remember me"),onclick:function a(){this.parent.set("rememberMe",this.checked);}},{scriptClass:"mstrmojo.Label",slot:"forgetNode",allowHTML:true,text:mstrmojo.desc(14527,"Forget me/Switch user"),onclick:function(){A.call(this.parent);}},{scriptClass:"mstrmojo.Label",slot:"linksNode",allowHTML:true,text:'<a id="proximityProblems" href="#">Login via Phone</a>',onclick:function(c){O.call(this.parent,true);return false;},bindings:{visible:"this.parent.proximityMode"},},{scriptClass:"mstrmojo.Label",slot:"linksNode",allowHTML:true,text:mstrmojo.desc(16220,"Use your ###MicroStrategy Badge## app to scan the QR Code.").replace("###","").replace("##",""),},{scriptClass:"mstrmojo.Label",slot:"linksNode",alias:"registerLink",cssClass:"register-label",allowHTML:true,bindings:{visible:"this.parent.usherRegistrationOption > 0"},text:"",texts:[mstrmojo.desc(16227,"Don't have MicroStrategy Badge? Click ###here## to register."),mstrmojo.desc(14140,"Display your ###QR Code##.")],postCreate:function(){this.set("text",this.texts[0]);},ontextChange:function(){this.text=this.text.replace("###",'<a href="#" onclick="mstrmojo.all.'+this.parent.id+'.toggleRegister(); return false;">').replace("##","</a>");}},{scriptClass:"mstrmojo.Label",alias:"userDetails",cssClass:"user-details",slot:"userNode"},{scriptClass:"mstrmojo.Button",alias:"loginButton",cssClass:"mstrmojo-WebButton login-button .mstrButton",cssDisplay:"inline-block",text:mstrmojo.desc(16224,"Login with MicroStrategy Badge"),slot:"notificationNode",visible:false,onclick:function(){C.call(this.parent);},onvisibleChange:function(){var c=this.parent,d=mstrmojo.desc(14523,"Hi ")+" "+c.userInfo.firstName;this.visible?d+="!":d+=mstrmojo.desc(14524,", please approve on your device.");Z.call(c,d);}},{scriptClass:"mstrmojo.Box",alias:"loginNotificationBox",cssClass:"login-notification",slot:"notificationNode",visible:false,children:[{scriptClass:"mstrmojo.Label",alias:"timer",cssClass:"notification-timer"},{scriptClass:"mstrmojo.Label",alias:"notificationFailure",cssClass:"notification-failure",text:mstrmojo.desc(14526,"Did not get notification"),onclick:function(){L.call(this.parent.parent,true);}}]},]});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo._IsInputControl","mstrmojo.dom","mstrmojo.num");var J=mstrmojo.validation,C=J.STATUSCODE,F=J.VALIDATOR,D=mstrmojo.expr.DTP,B=0,A=1,I=2,H=3,G=4,E=5;mstrmojo.DICAutoFocusButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.DICAutoFocusButton",markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" tabindex="1" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',postBuildRendering:function(){this._super();var K=this;setTimeout(function(){K.domNode.focus();},200);}});mstrmojo.TextFieldDIC=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.TextFieldDIC",cssClass:"mstrmojo-TextFieldDIC",dtp:D.VARCHAR,validationDelay:0,getInputNode:function(){return this.inputNode;},focus:function(){this.validate();mstrmojo.dom.setCaret(this.domNode,(this.value&&this.value.length||0));},init:function(K){if(this._super){this._super(K);}this.constraints=mstrmojo.hash.copy();var M=K.dic,N=this.constraints={trigger:mstrmojo.validation.TRIGGER.ONKEYUP},L=M.dt;if(M.ml){this.maxLength=M.ml;}if(M.psw){this.type="password";this.value=this.lv="";this.owner.applyPasswordMask&&this.owner.applyPasswordMask();}if(J.isNumeric(L)||J.isInt(L)||J.isString(L)){this.dtp=L;}switch(M.vm){case A:N.validator=F.VALIDATE_PHONENO;break;case I:N.validator=F.VALIDATE_EMAIL;break;case H:N.validator=F.VALIDATE_ZIPCODE;break;case G:N.validator=F.VALIDATE_SSN;break;case E:N.regExp=new RegExp("^"+M.rgx+"$");break;}N.min=M.emin?M.min:null;N.max=M.emax?M.max:null;N.maxLen=(M.ml!==undefined)?M.ml:null;N.minLen=(M.mnl!==undefined)?M.mnl:null;if(M.req){this.required=true;}},onInvalid:function(){if(this.popup){this.popup.set("hasInvalidData",true);}},onValid:function(){if(this.popup){this.popup.set("hasInvalidData",false);}},_set_value:function(L,K){if(this.value===undefined&&K===""){return ;}return this._super(L,K);},applyChanges:function(){this.validate();if(this.isValid()){this._super();}else{if(!this.showByDefault){this.handleInvalid();return false;}}return true;},handleInvalid:function(){if(mstrmojo.all.mojoConfirmx9){return ;}var K=this;mstrmojo.confirm(this.validationStatus.msg+"\n("+mstrmojo.desc(9199)+")",null,{buttons:[{scriptClass:"mstrmojo.DICAutoFocusButton",text:mstrmojo.desc(1442),onclick:function(){K.focus();}},{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(221),onclick:function(){if(K.popup){K.popup.onCancel();}else{K.undoValidate&&K.undoValidate();}}}],title:mstrmojo.desc(7548),cssClass:"mstrmojo-TextFieldDIC-ValidationError"});},cancelChanges:function(){this.inputNode.blur();this.value=this.lv;this.clearValidation();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.List","mstrmojo.Button","mstrmojo.color","mstrmojo.Model","mstrmojo.Table","mstrmojo._CanValidate","mstrmojo.ValidationTextBox");var L=mstrmojo.color,C=mstrmojo.hash;function H(V,R,N,O,U,M,Q,T){var S={target:R,onEnd:function(){if(M){M();}},props:{}};S.props[N]={ease:Q,start:parseInt(O,10),stop:parseInt(U,10),suffix:"px"};S=C.copy(T,S);var P=new mstrmojo.fx.AnimateProp(S);P.play();}var D=function(Q){if(Q===null){return ;}var P=mstrmojo.locales.color.userPalette,M=P.length;if(M===8){P.remove(M-1,1);}P.add([{n:Q,v:Q}],0);var N="",O;for(O=0;O<8;O++){if(P[O]&&P[O].v){N+=P[O].v+",";}}N=N.replace(/,$/,"");mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(R){},failure:function(R){mstrmojo.alert(R.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"setPreference",prefs:"userPalette\u001E"+N});};var I=function(M,N,O){return{scriptClass:"mstrmojo.Label",text:M+":",cssClass:N,slot:O};};var K=function(M,P,O,N){return C.copy(N||{},{scriptClass:"mstrmojo.ValidationTextBox",cssDisplay:"block",cssText:"padding: "+(mstrmojo.dom.isIE7?"0":"1px"),bindings:{value:function(){return this.parent.parent.colorModel[O]||"0";}},onValid:function(){this.parent.parent.colorModel.set(O,this.value);},min:0,max:255,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,validator:function(R){var S=this.min,Q=this.max;R=parseInt(R,10);if(R>=S&&R<=Q){return{code:mstrmojo.validation.STATUSCODE.VALID};}return{code:mstrmojo.validation.STATUSCODE.INVALID,msg:mstrmojo.desc(7883,"Please enter an integer between ## and ###").replace("##",S).replace("###",Q)};}},slot:P});};var G=function(M){return C.copy({scriptClass:"mstrmojo.Slider",alias:M+"Slider",cssClass:"sc "+M,isHoriz:true,width:130,cssBkBW:0,items:[],getItemTooltip:function(){return this.items[this.min].n;},postCreate:function(){var N;for(N=0;N<{r:256,g:256,b:256,s:101,v:101,h:360}[M];N++){this.items.push({n:N,v:N});}},bindings:{selectedIndex:function(){return this.parent.parent.colorModel[M]||"0";}},onselectedIndexChange:function(){this.parent.parent.colorModel.set(M,this.selectedIndex);if(this.domNode){this.min=this.max=this.selectedIndex;this.typeHelper.updateThumb();}},select:function(N){this.set("selectedIndex",N);},slot:"1,3"});};var A=function(N,M,O){return'<div mstridx="'+M+'" class="mstrmojo-ColorPicker-item '+O.itemCssClas+'" style="background-color:'+N.v+';" type="button" title="'+N.n+'"></div>';};var F=C.copy({findIndex:function(M,O,N){return N.getAttribute("mstridx")||-1;}},C.copy(mstrmojo.ListMapper));var B=function(M,N){return C.copy(N,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-ColorPicker-list",itemMarkupFunction:A,listMapper:F,onchange:null,_onchange:function(){this.set("selectedColor",this.selectedItem.v);M.set("selectedColor",this.selectedItem.v);if((M.isSimple||!M.expanded)&&M.onChange){M.onChange();}},onselectedColorChange:function(){M.colorModel.set("hex",this.selectedColor);}});};mstrmojo.ColorPicker=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ColorPicker",markupString:'<div id={@id} class="mstrmojo-ColorPicker {@cssClass} {@shadowCssClass}" style="height:{@height}; width:{@width};{@cssText}"><div class="mstrmojo-ColorPicker-box"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onexpandedChange:function(){this.domNode.className=this.domNode.className.replace(/ expanded/,"")+(this.expanded?" expanded":"");}},useAnimate:true,useShadow:true,isSimple:false,showNoColor:true,showMoreColors:true,showGradients:false,showUserPalette:true,height:"168px",fullHeight:"326px",width:"158px",fullWidth:"366x",expanded:false,onexpandedChange:function(N){var Q=this.domNode,M=parseInt(this.height,10),P=parseInt(this.width,10),O=parseInt(this.fullHeight,10),R=Math.max(parseInt(this.fullWidth,10),Q.scrollWidth);if(this.useAnimate!==false){if(N.value){H(true,Q,"width",P,R);H(true,Q,"height",M,O);}else{H(true,Q,"width",R,P);H(true,Q,"height",O,M);}}else{if(N.value){Q.style.width=R+"px";Q.style.height=O+"px";}else{Q.style.width=P+"px";Q.style.height=M+"px";}}},selectedColor:null,onChange:null,_updateSelection:function(N){var O=(this.isSimple)?this:this.layout.cp;if(N){var M=mstrmojo.array.find(O.basicColors.items,"v",N);if(M>-1){O.basicColors.set("selectedIndex",M);}else{M=mstrmojo.array.find(O.userPalette.items,"v",N);if(M>-1){O.userPalette.set("selectedIndex",M);}}}},visible:false,onvisibleChange:function(){if(this.visible){this.selectedColor=(this.selectedColor&&this.selectedColor.replace(/transparent/,"#FFFFFF"))||"#FFFFFF";this.colorModel.set("hex",this.selectedColor);this._updateSelection(this.selectedColor);}},onselectedColorChange:function(){this._updateSelection(this.selectedColor);},init:function(M){var N=this;this.colorModel=new mstrmojo.Model({h:0,s:0,v:100,_hsvChange:function(){this.hex="#"+L.hsv2hex(this.h,this.s,this.v);var O=L.hsv2rgb(this.h,this.s,this.v);this.r=O[0];this.g=O[1];this.b=O[2];N.set("colorModel",C.copy(this,{}));},_rgbChange:function(){this.hex="#"+L.rgb2hex(this.r,this.g,this.b);var O=L.rgb2hsv(this.r,this.g,this.b);this.h=O[0];this.s=O[1];this.v=O[2];N.set("colorModel",C.copy(this,{}));},onhChange:function(){this._hsvChange();},onsChange:function(){this._hsvChange();},onvChange:function(){this._hsvChange();},onrChange:function(){this._rgbChange();},ongChange:function(){this._rgbChange();},onbChange:function(){this._rgbChange();},onhexChange:function(){var P=L.hex2rgb(this.hex);this.r=P[0];this.g=P[1];this.b=P[2];var O=L.hex2hsv(this.hex);this.h=O[0];this.s=O[1];this.v=O[2];N.set("colorModel",C.copy(this,{}));}});this._super(M);},postBuildRendering:function(){if(this._super){this._super();}this.colorModel.set("hex",this.selectedColor||"#FFFFFF");this.colorModel.set("s",50);},preBuildRendering:function(){if(this._super){this._super();}var P=this.isSimple?100:124;if(this.showNoColor){P+=20;}if(this.showUserPalette){P+=25;}this.height=P+"px";if(this.isSimple){this.width="155px";}this.shadowCssClass=this.useShadow?"shadow":"";var Q=this,M={scriptClass:"mstrmojo.Button",cssClass:"nocolor",text:mstrmojo.desc(959,"Default"),visible:this.showNoColor,onclick:function(){Q.set("selectedColor","transparent");if(Q.onChange){Q.onChange();}}},O=B(this,{alias:"basicColors",items:mstrmojo.locales.color.colors,onchange:function(){if(this.selectedIndex>-1){this.parent.userPalette.set("selectedIndex",-1);this._onchange();}}}),R=B(this,{alias:"userPalette",cssClass:"mstrmojo-ColorPicker-list userPalette",makeObservable:true,visible:this.showUserPalette,bindings:{items:function(){return Q.showUserPalette!==false?mstrmojo.locales.color.userPalette:[];}},onchange:function(){if(Q.visible){if(this.selectedIndex>-1){this.parent.basicColors.set("selectedIndex",-1);this._onchange();}}},onadd:function(){this.refresh();if(Q.visible){this.parent.basicColors.set("selectedIndex",-1);this.set("selectedIndex",0);}}});if(this.isSimple){if(this.showNoColor){this.addChildren(M,0);}this.addChildren(O);this.addChildren(R);return ;}var N={scriptClass:"mstrmojo.Table",alias:"layout",rows:2,cols:5,layout:[{cells:[{colSpan:2},{colSpan:2},{}]},{cells:[{},{},{},{},{}]}],children:[{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-ColorPicker-palette shadow",alias:"cp",children:[M,O,R],slot:"0,0"},{scriptClass:"mstrmojo.Container",cssClass:"sbSlider",markupString:'<div class="{@cssClass}" style="position:relative; {@cssText}" mstrAttach:click,mouseover,mousemove,mousedown,mouseup,mouseout><div class="sbThumb"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},thumbNode:function(){return this.domNode.firstChild;}},markupMethods:{onbgColorChange:function(){this.domNode.style.backgroundColor=this.bgColor;}},hex:null,bindings:{hex:"this.parent.parent.colorModel.hex",bgColor:function(){return"#"+L.hsv2hex(this.parent.parent.colorModel.h,100,100);}},onhexChange:function(){if(this.domNode){this.thumbNode.style.left=this.parent.parent.colorModel.s/100*160-3+"px";this.thumbNode.style.top=(1-this.parent.parent.colorModel.v/100)*160-3+"px";}},onmousedown:function(){var T=this.domNode.getBoundingClientRect();this.mouseX0=T.left;this.mouseY0=T.top;this.onmousemove=this._update;var S=this;this.onmouseup=function(){S.onmousemove=null;mstrmojo.dom.detachEvent(document.body,"mouseup",S.onmouseup);};mstrmojo.dom.attachEvent(document.body,"mouseup",this.onmouseup);},onclick:function(S){this._update(S);},_update:function(S){var V={x:S.e.clientX,y:S.e.clientY},U=Math.min(Math.max(0,V.x-this.mouseX0),160),T=Math.min(Math.max(0,V.y-this.mouseY0),160);this.thumbNode.style.left=(U-3)+"px";this.thumbNode.style.top=(T-3)+"px";this.parent.parent.colorModel.s=Math.floor(100*U/160);this.parent.parent.colorModel.set("v",Math.floor(100*(1-T/160)));},slot:"0,1"},{scriptClass:"mstrmojo.Container",cssClass:"hueSlider",markupString:'<div class="{@cssClass}" style="position:relative; {@cssText}" mstrAttach:click,mouseover,mousedown,mouseup,mousemove,mouseout><div class="hThumb"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},thumbNode:function(){return this.domNode.firstChild;}},bindings:{hex:"this.parent.parent.colorModel.hex",h:"this.parent.parent.colorModel.h"},onhexChange:function(){this._moveThumb();},onhChange:function(){this._moveThumb();},_moveThumb:function(){if(this.thumbNode){this.thumbNode.style.top=(1-this.parent.parent.colorModel.h/360)*160-1+"px";}},onmousedown:function(){this.mouseY0=this.domNode.getBoundingClientRect().top;this.onmousemove=this._update;var S=this;this.onmouseup=function(){S.onmousemove=null;mstrmojo.dom.detachEvent(document.body,"mouseup",S.onmouseup);};mstrmojo.dom.attachEvent(document.body,"mouseup",S.onmouseup);},onclick:function(S){this._update(S);},_update:function(S){var U={x:S.e.clientX,y:S.e.clientY},T=Math.min(Math.max(0,U.y-this.mouseY0),160);this.thumbNode.style.top=(T-1)+"px";this.parent.parent.colorModel.set("h",Math.max(0,Math.floor(360*(1-T/160))));},slot:"0,2"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-ColorPicker-preview",markupMethods:{onbgColorChange:function(){this.domNode.style.backgroundColor=this.bgColor;}},bindings:{bgColor:"this.parent.parent.colorModel.hex"},onclick:function(){if(Q.showUserPalette){D(this.bgColor);}},slot:"1,0"},I(mstrmojo.desc(7848,"Hex"),"Hex","1,0"),K(mstrmojo.desc(7848,"Hex"),"1,0","hex",{cssClass:"hex",cssDisplay:"block",inputNodeCssClass:"hex",dtp:25,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,validator:function(S){if(/^#[0-9a-fA-F]{6}$/.test(S)){return{code:mstrmojo.validation.STATUSCODE.VALID};}return{code:mstrmojo.validation.STATUSCODE.INVALID,msg:mstrmojo.desc(7882,"Please enter a 6-digit HEX color value in format: #xxxxxx")};}}}),I(mstrmojo.desc(3604,"Red"),"Red","1,1"),I(mstrmojo.desc(3606,"Green"),"Green","1,1"),I(mstrmojo.desc(3608,"Blue"),"Blue","1,1"),I(mstrmojo.desc(3605,"Hue"),"Hue","1,1"),I(mstrmojo.desc(3607,"Saturation"),"Saturation","1,1"),I(mstrmojo.desc(3609,"Brightness"),"Brightness","1,1"),K(mstrmojo.desc(3604,"Red"),"1,2","r"),G("r"),K(mstrmojo.desc(3606,"Green"),"1,2","g"),G("g"),K(mstrmojo.desc(3608,"Blue"),"1,2","b"),G("b"),K(mstrmojo.desc(3695,"Hue"),"1,2","h",{cssClass:"h",max:360}),G("h"),K(mstrmojo.desc(3607,"Saturation"),"1,2","s",{max:100}),G("s"),K(mstrmojo.desc(3609,"Brightness"),"1,2","v",{max:100}),G("v")]};if(this.showMoreColors){N.children.push({scriptClass:"mstrmojo.Button",cssClass:"more",alias:"more",title:mstrmojo.desc(7833,"More >>>"),onclick:function(){var S=this.parent.parent;S.set("expanded",!S.expanded);this.domNode.setAttribute("title",S.expanded?mstrmojo.desc(7834,"Less Colors"):mstrmojo.desc(7833,"More Colors"));this.domNode.className=S.expanded?"less":"more";},slot:"0,0"});}if(this.showGradients){N.children.push({scriptClass:"mstrmojo.Button",alias:"showGradients",cssClass:"ge",text:mstrmojo.desc(4786,"Gradients..."),title:mstrmojo.desc(7970,"Open Graident Editor"),onclick:function(){var S=this.parent.parent;S.set("show",false);S.parent.ge.set("show",true);},slot:"0,0"});}this.addChildren(N);this.addChildren({scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-ColorPicker-buttonBar",children:[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442,"Ok"),function(){var S=this.parent.parent;if(!S.useAnimate){S.set("visible",false);}var T=S.colorModel.hex;if(S.showUserPalette){D(T);}S.set("selectedColor",T);if(S.onOK){S.onOK();}},"#999",{alias:"ok",cssClass:"mstrmojo-Editor-button"}),mstrmojo.Button.newInteractiveButton(mstrmojo.desc(221,"Cancel"),function(){var S=this.parent.parent;if(!S.useAnimate){S.set("visible",false);}if(S.onCancel){S.onCancel();}},"#999",{alias:"cancel",cssClass:"mstrmojo-Editor-button"})]});}});var J={scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"mstrmojo-ColorPicker-popup-content",autoCloses:false,locksHover:true,colorPicker:null,onOpen:function(){this.colorPicker.set("selectedColor",this.opener.fillColor);var N=this;var M=function(){N.lastOpener=N.lastOpener||N.opener;if(N.opener!==N.lastOpener){N.opener.popupNode.appendChild(N.lastOpener.popupRef.domNode);N.lastOpener=N.opener;}N.colorPicker.set("show",true);};window.setTimeout(function(){M();},100);},onClose:function(){this.colorPicker.set("show",false);if(this.ge){this.ge.set("show",false);}},postCreate:function(){this.markupMethods=C.copy(this.markupMethods);this.markupMethods.onvisibleChange=null;},preBuildRendering:function(){if(this.showGradients||this.colorPicker.showGradients){this.addChildren(this.gradientRef);}},gradientRef:{scriptClass:"mstrmojo.GradientEditor",alias:"ge",cssText:"height:0; display:none; position:absolute; z-index: 4;",left:"0px",top:"0px",visible:false,showTitle:false,height:245,_resizeHandler:function(){},onOK:function(){this.parent.opener.set("gradient",this.gradient);this.parent.opener.set("gradientCss",this.gradient.css);this.set("show",false);},onCancel:function(){this.set("show",false);},onshowChange:function(O){var N=O.value,M=parseInt(this.height,10);var R=this.domNode.firstChild;if(N){this.set("model",this.parent.opener.gradient);R.style.display="block";}if(this.useAnimate!==false){var S=N?0:M,P=M-S,Q=this;R.style.overflow="hidden";if(N){R.style.display="block";}H(N,R,"height",S,P,function(){if(!N){R.style.display="none";var T=Q.parent.opener;if(T){T.closePopup();}}else{R.style.overflow="visible";}});}else{R.style.height=N?M+"px":0;R.style.display=N?"block":"none";}},postCreate:function(){this.bindings={useAnimate:"this.parent.opener.useAnimate"};}},children:[{scriptClass:"mstrmojo.ColorPicker",alias:"colorPicker",onChange:function(){if(!this.parent.opener){return ;}this.parent.opener.set("fillColor",this.selectedColor);this.set("show",false);this.parent.opener.closePopup();},onOK:function(){this.onApply();this._closePopup();},onApply:function(){this.parent.opener.set("fillColor",this.selectedColor);},onCancel:function(){this._closePopup();},_closePopup:function(){this.set("show",false);if(!this.showGradients||!this.parent.ge||(this.parent.ge&&!this.parent.ge.show)){this.parent.opener.closePopup();}},show:false,onEnd:function(){this.set("visible",this.show);},onshowChange:function(){var M=parseInt(this.expanded?this.fullHeight:this.height,10);if(this.useAnimate!==false){var Q=this.show?0:M,O=M-Q,P=this,N=(!this.show?function(){P.onEnd();}:null);if(this.show){this.set("visible",true);}H(this.show,this.domNode,"height",Q,O,N);}else{this.set("visible",this.show);this.domNode.style.height=M+"px";}},postCreate:function(){this.showGradients=this.parent.showGradients;this.bindings={showUserPalette:function(){return this.parent.opener?this.parent.opener.showUserPalette:this.showUserPalette;},useAnimate:function(){return this.parent.opener?this.parent.opener.useAnimate:this.useAnimate;},isSimple:function(){return this.parent.opener?this.parent.opener.isSimple:this.isSimple;},showNoColor:function(){return this.parent.opener?this.parent.opener.showNoColor:this.showNoColor;}};}}]};mstrmojo.colorPickerPopupRef=mstrmojo.insert(J);mstrmojo.simpleColorPickerPopupRef=mstrmojo.insert(C.copy({isSimple:true},C.copy(J)));mstrmojo.gradientColorPickerPopupRef=mstrmojo.insert(C.copy({showGradients:false},C.copy(J)));mstrmojo.ColorPicker.createDropDown=function E(O,N){O=O||{};var M=mstrmojo.colorPickerPopupRef;if(N){if(N.isSimple){M=mstrmojo.simpleColorPickerPopupRef;O.isSimple=N.isSimple;}else{if(N.showGradients){M=mstrmojo.gradientColorPickerPopupRef;O.showGradients=N.showGradients;}}}else{if(O){if(O.isSimple){M=mstrmojo.simpleColorPickerPopupRef;}else{if(O.showGradients){M=mstrmojo.gradientColorPickerPopupRef;}}}}return C.copy(O,{scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-ColorPicker-DropDownButton",markupMethods:{onfillColorChange:function(){if(this.boxNode&&this.fillColor){this.boxNode.style.cssText="background-color: "+this.fillColor;this.gradient=null;this.gradientCss=null;}},ongradientCssChange:function(){if(this.boxNode&&this.gradientCss){this.boxNode.style.cssText=this.gradientCss;this.fillColor=null;}}},popupRef:M,showUserPalette:true,useAnimate:true,showGradients:false,isSimple:false,fillColor:undefined});};}());(function(){mstrmojo.requiresCls("mstrmojo.Slider","mstrmojo.MetricSelectorUtility","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.array","mstrmojo._FormatDefinition.NumberFormatCategory","mstrmojo.hash");mstrmojo.requiresDescs(8153,8154,8155,8156,8157,8158,8159,8160,8161,8162,8163,8164,8165,8166,8167,8168,8169,8170,7839,587,2204,2202,2203,7576,7575,7622);var U=mstrmojo.dom,N=mstrmojo.hash,S=mstrmojo.MetricSelectorUtility,j=mstrmojo._FormatDefinition.NumberFormatCategory,J=mstrmojo.desc,V=mstrmojo.css,X=mstrmojo.num,B=Math,b=B.max,H=B.min,d=B.floor,W=B.round,Z=9;function M(AB,AA,x,w){var z="px",q=AB._length,o=AB.handleSize,n=AB.orCfg,AF=n.posCssP,r=n.lenCssP,t=false;x=b(x,-1);w=H(w+Z,q);if(x>w){t=true;}var AC=H(x,w),AD=b(x,w),AE=AD-AC-(t?0:o+Z),u=b(q-AD,0);if(AB.hasRendered){AA.handle1Node.style[AF]=x+z;AA.handle2Node.style[AF]=(w-Z)+z;var m=AA.lowerRange.style,v=AA.thumbNode.style,p=AA.upperRange.style;m[AF]=0;v[AF]=(AC+(t?0:o))+z;p[AF]=(AD+o-Z)+z;m[r]=b(AC,0)+z;v[r]=AE+z;p[r]=u+z;}else{z+=";";AF+=":";r+=":";AB.handle1CssText=AF+x+z;AB.handel2CssText=AF+(w-Z)+z;AB.lowerRangeCssText=r+b(AC,0)+z;AB.thumbCssText=AF+(AC+o)+z+r+AE+z;AB.upperRangeCssText=AF+(AD+o-Z)+z+r+u+z;}return{handle1:x,handle2:w};}function O(m){this.getUnit=function(){return m._length/b((m.items.length-1),1);};this.calcMinMax=function(p,o){var q=m.unit;return{min:d(p/q+0.5),max:d(o/q+0.5)};};this.calcPxIdx=function(o){return d(o/m.unit+0.5);};this.getStep=function(){var p=m.high-m.low,o=parseInt(m.numFmts.cat,10),q=(o===4)?2:(o===5)?4:0;p=(p===0)?1:p;if(p>1){return(p>(m._length-2))?Number(Number(p/(m._length-2)).toFixed(m.numFmts.dp+q)):1;}return p/(m._length-2);};this.getIdx=function(o){return H(b(W((o-m.low)/m.step),0),m.items.length-1);};this.initialMetricSlider=function n(){var t=function(AG){return AG!==undefined&&AG!==null;},q=function(AG){return(t(AG.da)&&t(AG.da.low)&&t(AG.da.high)&&t(AG.da.cnt)&&t(AG.f)&&t(AG.ft)&&t(AG.qua));},p=function(AG){var AK=true,AJ=true,AH=parseInt(AG.ft,10),AI=parseInt(AG.f,10);if(AH===S._GENERIC){AK=AI!==S.FN.ISNULL&&AI!==S.FN.ISNOTNULL&&AI!==S.FN.NOTIN&&AI!==S.FN.IN;}else{if(AH===S._PERCENT||AH===S._RANK){AJ=AI!==S.MRPFN.INASCENDING&&AI!==S.MRPFN.INDESCENDING&&AI!==S.MRPFN.NOTINDESCENDING&&AI!==S.MRPFN.NOTINASCENDING;}}return !AK||!AJ;},AD=0;m.include=m.parent.include;m.clsType="scm ";m.staticStatus=!(t(m.da)&&t(m.da.low)&&t(m.da.high)&&t(m.da.cnt)&&t(m.qua));if(m.staticStatus){m.da.low=1;m.da.high=7;m.ft=S._GENERIC;m.f=S.FN.BETWEEN;m.qua=S.Q._G;m.cs=[{n:"",v:1},{n:"",v:7}];m.numFmts={cat:9,dp:0,fm:""};}switch(m.qua){case 0:var AC=parseInt(m.numFmts.cat,10);AD=AC===4?2:AC===5?4:0;m.low=Number(Number(m.da.low).toFixed(m.numFmts.dp+AD));m.high=Number(Number(m.da.high).toFixed(m.numFmts.dp+AD));break;case 1:case 2:m.low=1;m.high=m.da.cnt;break;case 3:case 4:m.low=0;m.high=100;break;}var AF=!m.staticStatus&&!m.da.nov;m.set("lowText",AF?m.formatNumber(m.low):"");m.set("highText",AF?m.formatNumber(m.high):"");m.step=(m.qua===1||m.qua===2)?1:this.getStep();m.cs1Vl=m.low;m.cs2Vl=m.high;var r=m.low,z=m.high,AE=[],AB=0;if(t(r)&&t(z)){var v=r,x;for(x=0;v<=z;x++,v+=m.step){AE[x]={n:S.formatNumber(m.qua,v,m.numFmts),v:Number(Number(v).toFixed(m.numFmts.dp+AD))};}AB=AE.length;if(AB>0&&AE[AB-1].v!==z){AE[AB-1]={n:S.formatNumber(m.qua,z,m.numFmts),v:z};}}m.items=AE;var o=S.OP,AA=m.cs,w=(AA&&AA.length>0)?X.parseNumeric(String(AA[0].v).replace("%","")):r,u=(AA&&AA.length>1)?X.parseNumeric(String(AA[1].v).replace("%","")):z;if(w<m.low){m.frtUst=true;}if(u>m.high){m.ndUst=true;}m.opId=(m.f!==null&&m.ft!==null)?S.getOpIdxByfunc(m.f,m.ft):o._BETWEEN;switch(m.opId){case o._EQUALS:case o._NOT_EQUALS:m.cs1Vl=m.cs2Vl=w;break;case o._LESS_EQUAL:case o._GREATER:m.cs1Vl=r;m.cs2Vl=w;break;case o._GREATER_EQUAL:case o._LESS:m.cs1Vl=w;m.cs2Vl=z;break;case o._IN:case o._NOT_IN:case o._IS_NULL:case o._IS_NOT_NULL:break;default:m.cs1Vl=w;m.cs2Vl=u;break;}m.cs1Idx=this.getIdx(m.cs1Vl);m.cs2Idx=this.getIdx(m.cs2Vl);m.cs1Nm=t(m.cs1Vl)?S.formatNumber(m.qua,m.cs1Vl,m.numFmts):m.items[m.cs1Idx].n;m.cs2Nm=t(m.cs2Vl)?S.formatNumber(m.qua,m.cs2Vl,m.numFmts):m.items[m.cs2Idx].n;m.unit=this.getUnit();m.set("unSet",(!q(m)||p(m)||(!m.cs||m.cs.length===0))&&!m.staticStatus);};this.updateOpCs=function(){var r=(m.cs1Vl>m.cs2Vl)?m.cs2Vl:m.cs1Vl,x=(m.cs1Vl>m.cs2Vl)?m.cs1Vl:m.cs2Vl,q=m.low,u=m.high,w=m.include,o=S.OP,t=parseInt(m.qua,10),p=(t===S.Q._PT||t===S.Q._PB),z,v=[];if((r>=q&&x<=u)||r<q||x>u){m.opId=w?o._BETWEEN:o._NOT_BETWEEN;}if(r===x){m.opId=w?o._EQUALS:o._NOT_EQUALS;}if(r===q&&x<u){m.opId=w?o._LESS_EQUAL:o._GREATER;}if(r>q&&x===u){m.opId=w?o._GREATER_EQUAL:o._LESS;}z=q==r&&x==u;if(!z){switch(m.opId){case o._BETWEEN:case o._NOT_BETWEEN:v.push({dtp:5,v:X.toLocaleString(r)+(p?"%":"")});case o._EQUALS:case o._NOT_EQUALS:v.push({dtp:5,v:X.toLocaleString(x)+(p?"%":"")});break;default:if(r>q){v.push({dtp:5,v:X.toLocaleString(r)+(p?"%":"")});}if(x<u){v.push({dtp:5,v:X.toLocaleString(x)+(p?"%":"")});}}}m.cs=v;m.parent.node.data.cs=v;m.set("unSet",z);};this.updateThumb=function(){var o=m.cs1Idx,r=m.cs2Idx;if(o!==undefined&&r!==undefined){var p=m.unit,q=m.gap;N.copy(M(m,m,W(o*p-q),W(r*p-q)),m);}};this.joinConst=function(){var q=m.cs;if(q){var o=[],p;for(p in q){o.push(q[p].v);}return o.join(",");}};}var E="<span {@ttpCssText}>{@content}</span>";function D(){if(this.staticStatus){return null;}var p=this.ghost;if(!p){var t=this.containerNode.cloneNode(true),r=t.childNodes;V.addClass(t,["gh"]);p=this.ghost={containerNode:t,lowerRange:r[0],handle1Node:r[1],thumbNode:r[2],handle2Node:r[3],upperRange:r[4]};this.sdcNode.appendChild(t);}var n=this.orCfg,m=n.posCssP,o=n.lenCssP,q=this.id;mstrmojo.array.forEach(["lowerRange","containerNode","thumbNode","upperRange"],function(z,u){var x=mstrmojo.all[q],w=x[z].style,v=p[z].style;if(u){v[m]=w[m];}v[o]=w[o];});p.containerNode.style.display="block";return p;}mstrmojo.MetricSlider=mstrmojo.declare(mstrmojo.Slider,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricSlider",markupString:'<div><div class="mstrmojo-Slider-summary"></div><div class="mstrmojo-Slider {@cssClass} {@clsType} {@clsOrientation}" style="{@cssText}" ><div class="cont" style=""><div class="sdc" style="position:absolute;{@sdcCssText}"><div class="sd" style="{@sdCssText}"><div class="bk left" style="{@lowerRangeCssText}"></div><div class="t1" style="{@handle1CssText}" mstrAttach:mouseover,mouseout,click></div><div class="t2 bk" style="{@thumbCssText}"></div><div class="t3" style="{@handel2CssText}" mstrAttach:mouseover,mouseout,click></div><div class="bk right" style="{@upperRangeCssText}"></div></div></div><div class="mstrmojo-Label" style="margin-top:9px;float:left;"></div><div class="mstrmojo-Label" style="margin-top:9px;float:right;"></div></div></div></div>',markupSlots:{summaryNode:function(){return this.domNode.childNodes[0];},sliderNode:function(){return this.domNode.childNodes[1];},dndNode:function(){return this.domNode.childNodes[1].childNodes[0];},sdcNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},containerNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0];},lowerRange:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0];},handle1Node:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[1];},thumbNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[2];},handle2Node:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[3];},upperRange:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[4];},tooltipNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[0];},lowNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[1];},highNode:function(){return this.domNode.childNodes[1].childNodes[0].childNodes[2];},editValueNode:function(){return this.domNode;}},markupMethods:{onlowTextChange:function(){this.lowNode.innerHTML=this.lowText||"";},onhighTextChange:function(){this.highNode.innerHTML=this.highText||"";},onfontChange:function(){this.lowNode.style.font=this.highNode.style.font=String(this.font);}},init:function f(m){this._super(m);this.handleSize=mstrmojo.MetricSlider.METRICSLIDERTHUMBWIDTH;this.clsType="scm";this.typeHelper=new O(this);this.useRichTooltip=false;},typeHelper:null,unSet:false,preBuildRendering:function A(){var p=this.orCfg,o=this.isHoriz;p.cPosCssP=o?"right":"bottom";p.cLenCssP=o?"height":"width";var t=p.lenCssP,r=this[t],q=parseInt(r,10),n=this.handleSize;var m=this._length=(isNaN(q))?0:(q-n-Z);if(m<=0){m=this._length=mstrmojo.MetricSlider.METRICSLIDERDEFAULTWIDTH-n;}if(r){this.bkCssText=t+":"+b(q-(2*this.cssBkBW),0)+"px;";this.sdcCssText=p.posCssP+":"+Z+"px;"+t+":"+m+"px;"+p.opPosCssP+":0px;";}this.typeHelper.initialMetricSlider();this.typeHelper.updateThumb();},postBuildRendering:function R(){this._super();if(!this.staticStatus&&!this.da.nov){var n=this.lowNode,m=parseInt(n.style.fontSize,10);if(isNaN(m)){n.style.fontSize=8*this.parent.model.getZoomFactor()+"pt";}this.updateSummary();}this.lowNode.style.marginLeft=Z+"px";this.highNode.style.marginRight=Z+"px";this.sliderNode.style.height="0px";},onmouseover:function G(m){this.showTooltip(m.e,self);},onmouseout:function e(m){this.hideTooltip(m.e,self);},summaryLabels:{db:J(8153,"Between ## and ###"),dnb:J(8154,"Not between ## and ###"),din:J(587,"In"),dnin:J(2204,"Not in"),dnull:J(2202,"Is Null"),dnnull:J(2203,"Is not Null"),req:J(8155,"Rank ="),rneq:J(8156,"Rank <>").replace("<>",String.fromCharCode(8800)),rexb:J(8157,"Rank exclude bottom"),rext:J(8158,"Rank exclude top"),rb:J(8159,"Rank bottom"),rt:J(8160,"Rank top"),rbt:J(8161,"Rank between ## and ###"),rnbt:J(8162,"Rank not between ## and ###"),rin:J(8163,"Rank in"),rnin:J(8164,"Rank not in"),peq:J(8165,"Percent ="),pneq:J(8166,"Percent <>").replace("<>",String.fromCharCode(8800)),pexb:J(8167,"Exclude bottom"),pext:J(8168,"Exclude top"),pb:J(7576,"Bottom"),pt:J(7575,"Top"),pbt:J(8153,"Between ## and ###"),pnbt:J(8154,"Not between ## and ###"),pin:J(8169,"Percent in"),pnin:J(8170,"Percent not in")},formatNumber:function g(t){var o=this,z=Math.abs(t),x=o.numFmts.cat,n=1000,AA=["K","M","B","T","P","E","Z","Y"],u=AA.length,r;if(z>=n&&(x===j.Default||x===j.Fixed||x===j.General||x===j.Currency)){for(r=0;r<u;r++,n*=1000){if(z<n*1000){var m=z/n,p=(m*10).toFixed(0)%10>0?1:0,w=m.toFixed(p)+AA[r];return t<0?"("+w+")":w;}}}return S.formatNumber(o.qua,t,o.numFmts);},updateSummary:function L(){if(this.summaryNode&&!this.staticStatus){var AG=this.f,o=this.ft,AF=S,AA=S.FN,n=S.MRPFN,w="",AD=(this.cs1Vl<this.cs2Vl)?this.cs1Vl:this.cs2Vl,AB=(this.cs1Vl>this.cs2Vl)?this.cs1Vl:this.cs2Vl,u=this.formatNumber(AD),t=this.formatNumber(AB),q=this.typeHelper,v=this.summaryLabels,m=parseInt(o,10),p=parseInt(AG,10),AC=(m===AF._GENERIC&&(p===AA.ISNULL||p===AA.ISNOTNULL||p===AA.NOTIN||p===AA.IN))||((m===AF._PERCENT||m===AF._RANK)&&(p===n.INASCENDING||p===n.INDESCENDING||p===n.NOTINDESCENDING||p===n.NOTINASCENDING));if(this.unSet||AD<=this.low&&AB>=this.high&&this.include){w=mstrmojo.desc(2058,"All");}if(!this.unSet||AC){switch(o){case AF._GENERIC:switch(AG){case AA.EQUALS:w="= "+u;break;case AA.NOTEQUALS:w=String.fromCharCode(8800)+" "+u;break;case AA.GREATERTHAN:w="> "+t;break;case AA.GREATERTHANEQUALS:w=String.fromCharCode(8805)+" "+u;break;case AA.LESSTHAN:w="< "+u;break;case AA.LESSTHANEQUALS:w=String.fromCharCode(8804)+" "+t;break;case AA.BETWEEN:w=u+" - "+t;break;case AA.NOTBETWEEN:w=mstrmojo.desc(1099)+" "+u+" - "+t;break;case AA.ISNULL:w=v.dnull;break;case AA.ISNOTNULL:w=v.dnnull;break;case AA.IN:w=v.din+" "+q.joinConst();break;case AA.NOTIN:w=v.dnin+" "+q.joinConst();break;}break;case AF._PERCENT:case AF._RANK:var AE="r";if(parseInt(o,10)===AF._PERCENT){AE="p";}switch(AG){case n.EQUALSDESCENDING:case n.EQUALSASCENDING:w=v[AE+"eq"]+" "+u;break;case n.NOTEQUALSDESCENDING:case n.NOTEQUALSASCENDING:w=v[AE+"neq"]+" "+u;break;case n.GREATERTHANEQUALSASCENDING:w=v[AE+"exb"]+" "+u;break;case n.GREATERTHANASCENDING:w=v[AE+"exb"]+" "+t;break;case n.GREATERTHANEQUALSDESCENDING:w=v[AE+"ext"]+" "+u;break;case n.GREATERTHANDESCENDING:w=v[AE+"ext"]+" "+t;break;case n.LESSTHANASCENDING:w=v[AE+"b"]+" "+u;break;case n.LESSTHANEQUALSASCENDING:w=v[AE+"b"]+" "+t;break;case n.LESSTHANDESCENDING:w=v[AE+"t"]+" "+u;break;case n.LESSTHANEQUALSDESCENDING:w=v[AE+"t"]+" "+t;break;case n.BETWEENDESCENDING:case n.BETWEENASCENDING:w=v[AE+"bt"].replace("##",u).replace("###",t);break;case n.NOTBETWEENASCENDING:case n.NOTBETWEENDESCENDING:w=v[AE+"nbt"].replace("##",u).replace("###",t);break;case n.INASCENDING:case n.INDESCENDING:w=v[AE+"in"]+" "+q.joinConst();break;case n.NOTINDESCENDING:case n.NOTINASCENDING:w="";w=v[AE+"nin"]+" "+q.joinConst();break;}break;}}var x=this.summaryNode,z=(w!=="")?"":0;x.innerHTML=w;x.style.margin=z;}},getClientHeight:function T(){return this.dndNode.clientHeight+this.summaryNode.clientHeight+15;},initDrag:function k(q,m){if(!this.staticStatus&&!this.da.nov){m=m||window;var r=U.eventTarget(m,this.dnd.startE);if(r===this.handle1Node||r===this.handle2Node){var p=D.call(this),n=this.orCfg,o=this.dnd;o.initD={handle1:parseFloat(this.handle1,10),handle2:parseFloat(this.handle2,10)-Z,length:this._length,contL:p.containerNode[n.lenP],offset:U.getMousePosition(this.dnd.startE,m)[n.offsetP]};o.initD.td=r;V.removeClass(this.domNode.childNodes[1],["invalid"]);}}},ondrag:function K(t,r){if(!this.staticStatus){r=r||window;var v=this.dnd.initD;if(v){var AC=this.ghost,AD=v.handle1,p=v.handle2,q=this.cs1Idx,o=this.cs2Idx,AA=this.unit,x=this.gap,n=v.length;var z=U.getMousePosition(t,r)[this.orCfg.offsetP]-v.offset;switch(v.td){case this.handle1Node:AD=b(H(b(v.handle1+z,0),n)-x,-1);q=b(d(AD/AA+0.5),0);break;case this.handle2Node:p=b(H(b(v.handle2+z,0),n)-x,-1);o=b(B.ceil(p/AA+0.5),0);break;default:return ;}M(this,AC,AD,p);var u=this.items,m=(u&&u.length)||0;if(m&&q>=0&&q<m&&o>=0&&o<m){var AB=false,w;if(q!==this.cs1Idx){this.cs1Idx=q;w=this.items[q];this.cs1Vl=w.v;this.cs1Nm=w.n;AB=true;}if(o!==this.cs2Idx){this.cs2Idx=o;w=this.items[o];this.cs2Vl=w.v;this.cs2Nm=w.n;AB=true;}if(AB){this.typeHelper.updateThumb();this._updateTooltip(v.td);}}}}},ondrop:function Y(n){if(!this.staticStatus&&!this.da.nov){this.typeHelper.updateThumb();var m=this.ghost;if(m){m.containerNode.style.display="none";}this.hideTooltip(n,self);var o=this.dnd&&this.dnd.initD;if(this.makeSelection&&o){this.makeSelection({selItem:o.td});}if(this.items&&this.items.length&&this.ghost){this[(U.eventTarget(self,n)===this.ghost.handle1Node)?"frtUst":"ndUst"]=false;this.selectRange();}this.dnd.initD=null;}},selectRange:function Q(){var m=this.typeHelper,o=this.cs1Vl,n=this.cs2Vl,r=this.qua,p=this.numFmts;this.cs1Idx=m.getIdx(o);this.cs2Idx=m.getIdx(n);this.cs1Nm=S.formatNumber(r,o,p);this.cs2Nm=S.formatNumber(r,n,p);m.updateOpCs();this.onselectionChange();this.updateSummary();},onincludeChange:function C(){if(!this.staticStatus){this.changeInclude=true;this.selectRange();}},showTooltip:function l(n,m){var o=U.eventTarget(m,n);this._updateTooltip(o);mstrmojo.tooltip.open(this,n,m);},_updateTooltip:function P(q){if(N.walk("handle1Node",this.ghost)===q||N.walk("handle2Node",this.ghost)===q){return ;}var n=this.orCfg,p=n.posCssP,m,o={contentNodeCssClass:"scm-tooltip",refNode:this.domNode.childNodes[1],posType:this._tooltip_pos};o[n.opPosCssP]=-parseInt(this.font,10)/2;o[p]=q.style[p];m=String((q===this.handle1Node)?this.cs1Nm:this.cs2Nm);o.content=E.replace(/\{@content\}/g,m);this.set("richTooltip",o);},onclick:function a(m){if(!this.staticStatus&&!this.da.nov){var n=U.eventTarget(m.hWin||window,m.e);this.hideTooltip(m.e,self);this.dnd.initD={makeMetricSilderSelectionByClick:true,td:((n===this.handle1Node)?this.handle1Node:((n===this.handle2Node)?this.handle2Node:null))};this.openEditValue({isfrt:(n===this.handle1Node),tgt:n});if(this._onThumb){this._onThumb(m);}}},onselectionChange:function I(m){this._super(m);if(this.dnd.initD&&this.dnd.initD.makeMetricSilderSelectionByClick){this.dnd.initD=null;}},onquaChange:function c(m){var o=S.getFuncInfo(this.opId,m.valueWas),p=S.getFuncInfo(this.opId,m.value),n;if(o.ft!==p.ft){if(!this.staticStatus){this.items=[];this.cs=[];this.f=this.ft=null;this.refresh();n=true;}}else{this.f=S.getFuncInfo(this.opId,m.value).f;n=false;}this.unSet=n||this.unSet;this.changeQual=true;this.selectRange();},updateData:function F(m,n){this.da=m;this.updateExpr(n);},updateExpr:function h(m){if(m){this.cs=m.cs;this.f=m.f;this.ft=m.ft;this.qua=m.qua;}this.refresh();},editValueRef:{cssClass:"edvl",slot:"editValueNode",scriptClass:"mstrmojo.Popup",locksHover:true,onOpen:function(){if(this.tgt){this.set("left",H(b(parseInt(this.tgt.style.left,10),0),parseInt(this.opener.width,10)-90)+"px");this.set("top",this.tgt.style.top);}var o=this.opener,n=this.children[0];if(o){var m=this.isfrt?o.cs1Vl:o.cs2Vl;n.edt.set("value",X.toLocaleString(m));}},children:[{scriptClass:"mstrmojo.Table",rows:1,cols:2,layout:[{cells:[{cssText:"width: 40px; padding: 3px;"},{cssText:"width: 16px;padding: 3px;"}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.ValidationTextBox",alias:"edt",cssText:"color:black",dtp:mstrmojo.expr.DTP.NUMERIC,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:function(){if(this.parent.apply){this.parent.apply.set("enabled",String(this.value).length!==0);}},onInvalid:function(){if(this.parent.apply){this.parent.apply.set("enabled",false);}},onkeyup:function(n){if(this.parent.apply.enabled){var m=n.hWin,o=n.e||m.event;if(o.keyCode===13){this.parent.apply.onclick();}}}},{slot:"0,1",scriptClass:"mstrmojo.Button",cssClass:"icn apply",alias:"apply",onclick:function(){var n=this.parent.parent,o=n.opener,m=this.parent.edt.value;if(n&&o&&String(m).length>0){o[n.isfrt?"cs1Nm":"cs2Nm"]=m;m=X.parseNumeric(m);o[n.isfrt?"cs1Vl":"cs2Vl"]=m;}o[n.isfrt?"frtUst":"ndUst"]=true;o.selectRange();o.typeHelper.updateThumb();n.close();}}]}]},openEditValue:function(m){this.openPopup("editValueRef",m);}});mstrmojo.MetricSlider.METRICSLIDERTHUMBWIDTH=14;mstrmojo.MetricSlider.METRICSLIDERDEFAULTWIDTH=95;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.ui.menus.Menu","mstrmojo._IsList","mstrmojo.vi.ui._HasMask","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui._HasListTooltip");var F=mstrmojo.dom;mstrmojo.vi.ui.toolbars.Toolbar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi.ui._HasMask,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",tooltipOrientation:"vertical",init:function G(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIToolbar");},selectionPolicy:"reselect",toolbarCfg:null,toolbarClicked:mstrmojo.emptyFn,tooltipCss:null,_set_toolbarCfg:function(L,I){var J=this.toolbarCfg,K=(J!==I);if(K){if(J){J.destroy();}this.toolbarCfg=I;}return K;},getItemProps:function D(K,I){var J=this._super(K,I);J.addCls(K.cls);J.addStyle("display:inline-block");return J;},postBuildRendering:function C(){var I=document.createElement("div");I.className="mstrmojo-VIDND-mask";this.maskNode=this.domNode.appendChild(I);return this._super();},postselectionChange:function(I){var J=I.added;if(J){var K=this.items[J[0]];if(K.tp==="pb"&&K.isMenuClicked){K.menufn(K,this);}else{K.fn(K,this);}}},ontoolbarCfgChange:function H(I){var K=I.valueWas;if(K){K.destroy();}var J=I.value;if(!J){return ;}this.set("items",J.btns);if(this.hasRendered){this.raiseEvent({name:"renderComplete"});}},openMenu:function E(J,I){J.hostId=this.id;J.hostElement=this._getItemNode(I._renderIdx);this.openPopup(J.newInstance());},onclick:function A(I){var K=I.target||F.eventTarget(I.hWin,I.e),J=this.getItemFromTarget(K);if(J&&J.tp==="pb"){if(K&&K.className){J.isMenuClicked=K.className.indexOf("icn")===-1;}}this.toolbarClicked(I);this._super(I);},destroy:function B(J){var I=this.toolbarCfg;if(I){I.destroy();}delete this.items;this._super(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var B=mstrmojo.array,W="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasToggleItem:false,hasMenuItems:function S(){var X=B.filter(this.menus||[],function(Y){return Y.cls!==W;});return !!X.length;},getMenuItems:function F(X){var Z=B.filter(this.menus.slice().reverse(),function(d,c,b){var a=b[c+1];return X||d.cls!==W||(c&&a&&a.cls!==W);}).reverse();var Y=(Z&&Z.length)||0;if(!X&&Y>0&&Z[Y-1].cls===W){Z.pop();}return Z;},getMenuItem:function D(a){var Z=this.menus,X;if(Z!==null){for(X=0;X<Z.length;X++){var Y=Z[X];if(Y.cls===a){return Y;}}}return null;},absorbMenuItems:function U(X){this.menus=this.menus.concat(X.menus);if(!this.hasToggleItem&&X.hasToggleItem){this.hasToggleItem=true;}},addMenuItem:function K(e,a,c,Y,b){var d,Z,X;if(!e||typeof e==="string"){d=e;}else{d=e.n;Z=e.ttp;}X={n:d,ttp:Z,cls:a,fn:c,ctxt:Y};if(isNaN(b)||b>=this.menus.length){this.menus.push(X);}else{this.menus.splice(b,0,X);}if(a.indexOf(/\bon\b/)>-1){this.hasToggleItem=true;}return X;},addCustomMenuItem:function V(c,Z,b,Y,X){var a=this.addMenuItem(c,Z,b,X);a.getItemMarkup=Y;return a;},addDisabledMenuItem:function Q(Y,X){this.addNonInteractiveMenuItem(Y,X,true);},addNonInteractiveMenuItem:function O(b,Y,X){var Z=["non-int"];if(Y){Z.push(Y);}if(X){Z.push("disabled");}if(b&&typeof b!=="string"&&b.ttp){this.useTooltip=true;}var a=this.addMenuItem(b,Z.join(" "),mstrmojo.emptyFn);a.dsbld=true;},addSeparator:function E(){this.addMenuItem("",W,function(){return false;});},addPopupMenuItem:function T(e,Z,d,a,Y,b){var c=["pop "];if(a){c.push(a);}var X=this.addMenuItem(e,c.join(" "),d,Y,b);X.pop=true;X.scope=Z;return X;},addActionPopupMenuItem:function N(e,Y,c,d,Z,X,b){var a=this.addPopupMenuItem(e,Y,d,(Z||"")+" ax",X,b);a.actionFn=c;a.ax=true;},addSubMenuItem:function M(b,Z,Y,a,X){this.addPopupMenuItem(b,Y,a,Z,X);},addEditorMenuItem:function R(b,Y,a,X,Z){this.addPopupMenuItem(b,Y,a,"",X,Z);},getToggleItemStates:function G(f,h,X,d,Z,c){var a,b,Y,e;if(typeof f==="string"){a=b=f;Y=e="";}else{a=f.on||"";b=f.off||"";Y=f.ttpOn||"";e=f.ttpOff||"";}var g=[{n:a,ttp:Y,cls:h+" on",fn:d,ctxt:c},{n:b,ttp:e,cls:h,fn:X,ctxt:c}];if(!Z){g.reverse();}return g;},addToggleMenuItem:function L(e,a,c,Z,Y,d,X){var b=this.getToggleItemStates(e,a,c,Z,d,X);this.hasToggleItem=true;return this.addDualStateItem(Y,b[0],b[1]);},addDualStateItem:function I(Y,X,Z){return this.addMenuItem({n:X.n,ttp:X.ttp},X.cls,this.getDualStateHandler(Y,X,Z),X.ctxt);},getDualStateHandler:function J(Y,X,Z){return function(b,c){var a=[X,Z];if(b.cls===X.cls){a.reverse();}a[1].fn.call(mstrmojo.all[Y],b,c);b.n=a[0].n;b.ttp=a[0].ttp;b.cls=a[0].cls;};},addRadioMenuGroup:function C(Z,e,a,Y,X,d,c){var b=[];this.hasToggleItem=true;a.forEach(function(j,f){if(j.separator){this.addSeparator();return ;}var l=j.text,k=(Y||"")+" "+(j.cls||"")+(d?"":" radio")+(j.value===Z?" on":""),h=function(){if(e.call(this.ctxt,j.value,Z,j)===false){return false;}Z=j.value;b.forEach(function(m){m.cls=m.cls.replace(/ on$/,"")+(m.radioValue===Z?" on":"");});return true;},g=c?this.addCustomMenuItem(l,k,h,c(j,f),X):this.addMenuItem(l,k,h,X);g.radioValue=j.value;b.push(g);},this);},clear:function P(){this._super();this.menus=[];},newInstance:function A(X){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},X));},addMenuTitle:function H(X){this.addMenuItem(X||"","menu-item-title",mstrmojo.emptyFn);}});}());(function(){mstrmojo.requiresCls("mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo._IsInputControl","mstrmojo.css");function A(H){var G=[];E.forEach(H,function(I){G.push(I.n);});return G;}var D=mstrmojo.css,E=mstrmojo.array;mstrmojo.LikertScaleDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsInputControl],{scriptClass:"mstrmojo.LikertScaleDIC",styleCssClass:"scale",init:function(G){this._super(G);this.items=this.getItems();this.titleItems=A(this.items);},getDisplayValue:function C(){return(this.selectedIndex>=0)?this.items[this.selectedIndex].n:this.dv;},getLeftEndTitle:function F(G){return G>=0?(this.dic.mint||""):"";},getRightEndTitle:function(G){return G>=0?(this.dic.maxt||""):"";},postvalueChange:function(){this._super&&this._super();if(this.owner&&this.owner.model){var G=this.owner.model,J=G.getZoomFactor&&G.getZoomFactor()||1;if(J!==1){var I=this.domNode.getElementsByClassName("item_wrapper"),H=[];E.forEach(I,function(K){H.push(K.firstChild);});this.zoomBackground(J,H);}}},postBuildRendering:function(){this._super();if(this.owner&&this.owner.model){var G=this.owner.model;zf=G.getZoomFactor&&G.getZoomFactor()||1;var K=this.domNode.getElementsByClassName("item_title"),H=window.getComputedStyle(K[0],null).getPropertyValue("width");if(H){E.forEach(K,function(L){L.style.width=parseFloat(H)*zf+"px";});}var J=this.domNode.getElementsByClassName("item_wrapper"),I=[];E.forEach(J,function(M,L){M.style.textAlign="center";I.push(M.firstChild);if(K[L]){K[L].controlTo=M;}});this.zoomStyle(zf,I,100,500);}if(!mstrmojo.isDescendant(this.owner,this)&&this.showByDefault){this.set("height",(this.openerStyle.ih||0)+"px");this.set("width",(this.openerStyle.iw||0)+"px");}D.toggleClass(this.domNode,"disabled",!this.enabled);},getItemNodeFromTarget:function B(G){if(G.className==="item_title"){G=G.controlTo;}return this._super(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl","mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var A=mstrmojo.dom,C=mstrmojo.css,E=mstrmojo.hash,D={0:"default",1:"stars_dots"};function B(G){if(G.owner&&G.owner.model){var F=G.owner.model,J=F.getZoomFactor&&F.getZoomFactor()||1;if(J!==1){var I=G.domNode.getElementsByClassName("item_wrapper"),H=[];$A.forEach(I,function(K){H.push(K.firstChild);});G.zoomBackground(J,H);}}}mstrmojo.RatingDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsInputControl],{scriptClass:"mstrmojo.RatingDIC",styleCssClass:"rate",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,mouseover,mouseout><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',lastIdx:null,init:function(F){this._super(F);this.items=this.getItems();this.starCount=this.items&&this.items.length;C.addWidgetCssClass(this,D[this.dic.stl||0]);},setRating:function(F){var H=0,I=this.starCount,G="less_equal";if(this.lastIdx==undefined||this.lastIdx!=F){for(H;H<I;H++){if(H<=F){C.addClass(this._getItemNode(H),G);}else{C.removeClass(this._getItemNode(H),G);}}this.lastIdx=F;B(this);}},onvalueChange:function(){this._super&&this._super();var F=mstrmojo.array.find(this.items,"v",this.value);this.setRating(F);},onmouseover:function(G){this._super&&this._super(G);var H=G.target||A.eventTarget(G.hWin,G.e),F=H&&H.getAttribute("idx");if(F!=undefined){this.setRating(F);}},onmouseout:function(G){this._super&&this._super(G);var F=mstrmojo.array.find(this.items,"v",this.value);this.setRating(F);},postBuildRendering:function(){this._super();if(!mstrmojo.isDescendant(this.owner,this)&&this.showByDefault){this.set("height",(this.openerStyle.ih||0)+"px");this.set("width",(this.openerStyle.iw||0)+"px");}var F=mstrmojo.array.find(this.items,"v",this.value);if(F>-1){this.setRating(F);}if(this.owner&&this.owner.model){var G=this.owner.model;zf=G.getZoomFactor&&G.getZoomFactor()||1;if(zf!==1){var I=this.domNode.getElementsByClassName("item_wrapper"),H=[];$A.forEach(I,function(J){H.push(J.firstChild);});this.zoomStyle(zf,H,42,41);}}C.toggleClass(this.domNode,"disabled",!this.enabled);}});}());(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl","mstrmojo.Box","mstrmojo.ElasticTextArea","mstrmojo.hash","mstrmojo.css");var G=4,F=5,E=6,C=7,B=10;var D=mstrmojo.hash,A=mstrmojo.css;mstrmojo.TextAreaDIC=mstrmojo.declare(mstrmojo.Box,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.TextAreaDIC",applyOnEnter:false,onfontChange:function(){var H=this.font;if(this.etab){this.etab.set("font",H);}else{if(this.eta){this.eta.set("font",H);}}},focus:function(){if(this.eta){this.eta.focus();}else{if(this.etab){this.etab.premousedown();}}},init:function(J){if(this._super){this._super(J);}if(this.showByDefault){var I,K=this.dic;if(K.siwc){I={cssText:"position:relative;min-height:18px;",ontextChange:function(){this.preview.set("text",this.text);},onvalueChange:function(){if(K.sp){var L=this.value,M=this.dv||"",O="",N="";switch(this.ts){case E:N="mailto:";case F:O=L.substring(0,K.pl);this.dv=M.replace(/(.*href=['"])(.*)(['"].*>)(.*)(<.*)/i,"$1"+N+L+"$3"+O+"$5");break;default:O=M.substring(0,K.pl);break;}this.preview.set("text",(K.pl>0&&M.length>K.pl)?O+"...   ":(K.pl>0&&O.length>0)?O:"");}if(this.etab.domNode){if(this.value&&this.value.length!==0){A.addClass(this.etab.domNode,"filled");}else{A.removeClass(this.etab.domNode,"filled");}}this.etab.value=this.value;this.applyChanges();},onpopupwidthChange:function(){this.etab.set("popupWidth",this.popupwidth||200);},onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}}};}else{I={cssText:"position:relative",onpopupwidthChange:function(){this.eta.set("width",(this.popupwidth-4)||200);},onheightChange:function(){if(this.domNode&&this.height){this.domNode.style.height=this.height+"px";this.eta.set("height",this.height-4);}}};}D.copy(I,this);if(K.siwc){this.addChildren([{alias:"preview",scriptClass:"mstrmojo.Label"},{alias:"etab",popupToBody:true,maxLength:K.ml||250,cssText:"position:absolute;right:0;top:0px",bindings:{enabled:"this.parent.enabled"},onvalueChange:function(){if(this.value!==this.parent.value){var M=this.parent,L="";switch(M.ts){case E:L="mailto:";case F:if(!M.dv){M.dv='<a href="mailto:"></a>';}var N=/(.*href=['"])(.*)(['"].*>)(.*)(<.*)/i;M.set("dv",M.dv.replace(N,"$1"+L+this.value+"$3"+this.value+"$5"));break;default:M.set("dv",this.value);break;}M.set("value",this.value);}},lockAutoClose:function(){var L=this.parent.showByDefault;if(L){this.parent.setInfoWindowLock(true);}},unlockAutoClose:function(){var L=this.parent.showByDefault;if(L){this.parent.setInfoWindowLock(false);}},premousedown:function(){var M=!this.popupRef.hasRendered;mstrmojo.ElasticTextAreaButton.prototype.premousedown.apply(this,arguments);if(M){var L=this.popupRef,N=this.parent;mstrmojo.dom.attachEvent(L.domNode,"keydown",function(O){var P=O||window.event;if(P.keyCode==9){L.close();N.onTabDown(O);}});}},scriptClass:"mstrmojo.ElasticTextAreaButton"}]);}else{var H=K.vm?{scriptClass:"mstrmojo.TextAreaValidation",dic:K}:{scriptClass:"mstrmojo.TextArea"};this.addChildren(D.copy(H,{alias:"eta",maxLength:K.ml||250,onheightChange:function(){if(this.hasRendered&&this.height){this.domNode.style.height=this.height+"px";}},onfontChange:function(){if(this.hasRendered&&this.font){D.copy(this.font,this.domNode.style);}},onblur:function(){if(!this.validate){this.parent.set("value",this.value);}else{this.validate();if(!this.isValid()){this.handleInvalid();}else{this.parent.set("value",this.value);}}},onwidthChange:function(){if(this.hasRendered&&this.width){this.domNode.style.width=this.width+"px";}},placeholderText:this.placeholderText,bindings:{value:"this.parent.value",enabled:"this.parent.enabled"}}));}this.onvalueChange();}else{this.addChildren({alias:"eta",scriptClass:"mstrmojo.ElasticTextArea",maxLength:this.dic.ml,value:this.value,onvalueChange:function(){this.parent.set("value",this.value);},bindings:{enabled:"this.parent.enabled"}});this.onpopupwidthChange=function(){this.eta.set("width",(this.popupwidth-4)||200);};}},postBuildRendering:function(){this._super();var H=this.dic;if(!mstrmojo.isDescendant(this.owner,this)){if(this.showByDefault&&!H.siwc){this.set("height",this.openerStyle.ih);this.set("popupwidth",this.openerStyle.iw);}else{if(H.wm&&H.w){this.set("popupwidth",H.w);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasScrollbox","mstrmojo.XtabZone","mstrmojo._ShowsStatus","mstrmojo.boxmodel","mstrmojo._IsLockableXtab","mstrmojo._IsDocumentTemplate","mstrmojo.hash","mstrmojo.dom","mstrmojo.chart.model.enums.EnumDSSBaseFormType");var Q=1,X=2,Y=0,C=1,z=2,N=3;var M=1;var AB=2;var I=4;var g=8;var d=mstrmojo.dom,p;function AF(AH){var AI=null;if(AH&&AH.length>1){AI=new mstrmojo.XtabVACP();AI.cps=AH;}return AI;}function J(AJ){if(!AJ||this._onDemandCP){return null;}var AS=AJ.bc,AQ=AJ.tc,AK=AJ.tbc,AT=AJ.rm===2,AI=AT?this.gridData.ghs.rhs.items.length:AS,AL=AQ-AI,AM=AT?AK-AS:AQ-AI,AR=Math.ceil(AM/AS),AO=[],AP=[],AN;if(AT){AS=Math.floor(AL/AR);}for(AN=0;AN<AR;++AN){if(AT&&AR===(AN+1)&&AL>AS){AS=AL;}var AH=Math.min(AL,AS);AO.push(this.createOnDemandCP(AN+1,AH,I));AP.push(this.createOnDemandCP(AN+1,AH,g));AL-=AS;}this._onDemandCP={rhs:AO,vls:AP};return this._onDemandCP;}mstrmojo.XtabTitlesCP.prototype.shouldClonedLastTitleCell=function(){return false;};mstrmojo.XtabBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsLockableXtab,mstrmojo._HasScrollbox,mstrmojo._ShowsStatus,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.XtabBase",dataRenderMode:"vscroll",shouldClipLockableXtab:true,handleClicks:function H(){return true;},markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-Xtab {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div style="display: none;{@msgNodeCssText}"><div class="text"><div class="warning-icon"></div><div>&nbsp;</div></div></div><div class="mstrmojo-Xtab-overlay"></div><div class="mstrmojo-Xtab-content {@cssDefault}" title="{@tooltip}" style="{@viewportCssText}" mstrAttach:click,selectstart,touchstart><table cellspacing="0" cellpadding="0"><tr><td style="vertical-align:top;padding:0;"><div style="position: relative;"><div class="mstrmojo-progress" style="display:none"><div class="mstrmojo-progress-barbg"><div class="mstrmojo-progress-bar"></div></div><div class="mstrmojo-progress-text"></div></div><div id="{@id}_scrollbox" style="position:relative;{@scrollboxNodeCssText};{@scrollboxNodeOverflow}"></div></div></td></tr></table></div></div>',markupSlots:{overlayNode:function(){return this.domNode;},msgNode:function(){return this.domNode.firstChild;},maskNode:function(){return this.domNode.childNodes[1];},viewport:function(){return this.domNode.lastChild;},contentNode:function(){return this.domNode.lastChild.firstChild;},scrollboxNode:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild.lastChild;},tableContainerNode:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild;},_STATUS:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild.firstChild;},_STATUS_TXT:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild.firstChild.lastChild;},_STATUS_BAR:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0].firstChild.firstChild.firstChild;},_TB_CELL:function(){return this.domNode.lastChild.firstChild.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";}},zone:null,lockHeadersCase:N,interactiveCellsArray:null,titlesCP:null,chsCP:null,rhsCP:null,valuesCP:null,onDemandIF:true,numRowFixed:false,heightLimit:0,height:0,widthLimit:0,width:0,useTouchScrolling:false,scrollInterval:0,selections:null,dataBlocks:null,getCellUnitIndex:function m(AH){return(AH.o!==undefined)?AH.o:AH._ei;},getCellTitleId:function e(AH){var AI="";if(AH.axis&&AH.ui!==undefined){AI=AH.axis+"A"+(AH.ui+1);}else{if(AH.mix!==undefined){AI="0A"+AH.mix;}}return AI;},update:function k(AI){this.set("gridData",AI.data[0]||AI.data);var AH=this.defn||AI.defn;this.sid=this.gridData.sid;this.treeType=(AH&&AH.tt)||1;this.interactiveCellsArray=[];if(this._super){return this._super(AI);}return true;},initCP:function F(AJ,AI,AO,AL,AN,AK,AM){var AH={gridData:AJ,type:AO,interactiveCellsArray:AI,defn:this.defn};AH.base=AL||AH.base;AH.lookupBase=AN||AH.lookupBase;AH.axis=AK||AH.axis;if(!AM){if(AO===M){AM=new mstrmojo.XtabTitlesCP(AH);}else{AM=new mstrmojo.XtabCP(AH);}}else{mstrmojo.hash.copy(AH,AM);}return AM;},preBuildRendering:function D(){var AJ=this.gridData,AH=this.height,AI=this.width;this.lockHeadersCase=AJ.lhv||Y;this.selections={};this.numRowFixed=!!(!AH&&AJ.rw&&AJ.rw.row&&(AJ.rw.row.bc<AJ.rw.row.tc));this.rw=AJ.rw;this._onDemandCP=null;if(AI){this.widthLimit=parseInt(AI,10);}if(AH){this.heightLimit=parseInt(AH,10);}return this._super();},renderEmptyGrid:function q(){var AK=this.gridData,AI=this.msgNode,AJ=AI.style,AH=this.viewport;AI.firstChild.childNodes[1].innerHTML=AK.eg;if(AK.eg!==""&&!this.excludeData){AJ.display="block";AJ.overflow="hidden";AI.className="mstrmojo-message";AH.style.display="none";}return true;},postBuildRendering:function U(){var AM=this.gridData,AJ=!!this.viewport&&AM,AI=this.msgNode,AH=this.viewport,AL;if(AM.eg===undefined){if(AI.style.display==="block"){AI.style.display="none";AH.style.display="block";}}else{return this.renderEmptyGrid();}if(!this.interactiveCellsArray){this.interactiveCellsArray=[];}if(AJ){AM.ghs=AM.ghs||[];AM.gts=AM.gts||[];this._setupZone(AM);this._setupCP(AM);var AO=this.zone;if(AO.parent!==this){this.addChildren(AO);}if(this.scrollboxNode){var AK=this.heightLimit;this.scrollboxHeightFixed=!isNaN(AK)&&(AK>0);if(this.scrollboxHeightFixed){this.scrollboxHeight=AK;}this.scrollboxLeft=this.scrollboxTop=0;this.connectScrollbox(this);}}this.renderChildren();if(this.controller&&this.controller.getScrollPosition){var AN=this.controller.getScrollPosition(this.controller.model.oid+"."+this.gridData.k);if(AN){this.scrollTo(AN);}}AL=this._super();if(this.numRowFixed){if(!this.height){this.heightLimit=this.zone.getPageHeight(0);this.height=this.heightLimit+"px";}else{this.heightLimit=parseInt(this.height,10);}}if((AJ&&this.scrollboxNode&&AM.afc)||this.numRowFixed){this.resizeScrollBox();}this.onGridWidthChanged(AM.afc||AM.afw);this._onContainerGrowShrink(this.widthLimit,this.heightLimit);if(this.scrollboxNode&&this.scrollboxNode.childNodes&&this.scrollboxNode.childNodes[0]){this.scrollboxNode.style.zIndex=this.scrollboxNode.childNodes[0].style.zIndex;}if(this.lockHeadersCase&&this.initLock){this.initLock({top:this.scrollboxTop,left:this.scrollboxLeft});}if(this.configureActions){this.configureActions();}return AL;},onclick:function n(AI){var AK=mstrmojo.dom,AM=AI.getTarget(),AL=AM&&AK.findAncestorByName(AM,"td",true,this.viewport);if(AM.nodeName.toLowerCase()==="a"&&AL.getAttribute("ei")){try{var AJ=this.interactiveCellsArray[parseInt(AL.getAttribute("ei"),10)];if(AJ&&AJ.ts===mstrmojo.chart.model.enums.EnumDSSBaseFormType.DssBaseFormHTMLTag){AM.href=mstrmojo.addCSRFTokenToURL(AM.href);}}catch(AN){}}if(AL){var AH=AK.findAncestorByName(AM,"span",true,AL);if(AH&&!AI.shiftKey&&!AI.ctrlKey){this.defaultAction(AL);}else{this.doSelection(AI.e,AI.hWin,AL);}}if(this.isSelectingText){this.isSelectingText=false;}},ontouchend:function h(AI,AH){this.onclick(mstrmojo._HasMarkup.newDomEvent("click",AH,AI));},onselectstart:function r(AI,AH){if(this.isHandleNode&&this.isHandleNode(AI.getTarget())){d.preventDefault(AH,AI);}return false;},onscroll:function t(){this._alignHeaders();if(this.controller&&this.controller.addScrollPosition){this.controller.addScrollPosition(this.controller.model.oid+"."+this.gridData.k,this.scrollboxLeft,this.scrollboxTop);}},resizeScrollBox:function K(){var AK=this.scrollboxNode,AJ=AK&&AK.style,AI=this._TB_CELL;if(!AJ||!AI){return ;}var AH=this.heightLimit;if(!AH){AJ.height="auto";this.scrollboxHeightFixed=false;}else{if(AH>0){AJ.height=AH+"px";this.scrollboxHeight=AH;this.scrollboxHeightFixed=true;}}this._resizeScrollBoxWidth();},_onContainerGrowShrink:function AG(AI,AL){var AH=mstrmojo.findAncestor(this,"fixedSizeCanGrowShrink",null,mstrmojo.DocSection),AK=AI||null,AJ=AL||null;if(AK||AJ){if(AH){AH.fixedSizeCanGrowShrink(this,AJ,AK);}}else{if(AH){AH.performCanGrowCanShrink([this],true);}}},_resizeScrollBoxWidth:function V(){var AN=this.scrollboxNode,AL=AN.scrollWidth+(AN.offsetWidth-AN.clientWidth),AJ=AN&&AN.style,AI=this._TB_CELL;if(this.useTouchScrolling||!AJ||!AI){return ;}var AK=this.widthLimit;if(!AK){var AM=AN.firstChild.style,AH=AM.position;AM.position="relative";AJ.width="auto";AL=AN.firstChild.firstChild.offsetWidth+(AN.offsetWidth-AN.clientWidth);AN.firstChild.style.position=AH;}if((AL&&(AL>0))&&(!AK||(AK&&(AL<AK)))&&(AN.firstChild.firstChild.offsetWidth>=AN.clientWidth)){AJ.width=AL+"px";}},onGridWidthChanged:function c(AI){if(!AI){this._resizeScrollBoxWidth();}var AH=this.widthLimit;if(!AH){this.width=p;}this._onContainerGrowShrink(AH,null);},getGridDimension:function R(AK){var AI=1,AJ=AK===AI?"Height":"Width",AL=AJ.toLowerCase(),AH=this[AL+"Limit"];if(!AH&&(this[AL]===p||this[AL]===0)){AH=this.viewport["offset"+AJ];this[AL]=AH+"px";return AH;}return AH||parseInt(this[AL],10);},_alignHeaders:function B(AH){var AJ=this.scrollboxLeft,AI=this.scrollboxTop;if(this.lockHeadersCase&&this.alignLockNodes){this.alignLockNodes(AJ,AI);}},defaultAction:function S(AM,AI){var AH=AI||this.getCellForNode(AM),AL=AM&&AM.className.indexOf("sc_")>0;if(this.model&&this.model.data&&this.model.data.visName&&this.model.data.visName==="InteractiveGridAjaxVisualizationStyle"){AL=this.isReselectedTD(AH);if(AL&&this.hasSelectAll&&this.hasSelectAll(AH)){this.IGCurrentSelectedCell=null;}else{this.IGCurrentSelectedCell=AH;}}var AK=this.model.getAction(this.getActionCells(AH),AM,AL),AJ=AK&&AK.h;this._currentSelectedTD=AM;if(AJ&&this.controller[AJ]){this.controller[AJ](this,AK.a);return true;}return false;},createZone:function l(AI){var AJ=AI||{},AH=this._super&&this._super(AJ);if(!AH){AH=new mstrmojo.XtabZone(AJ);}return AH;},_setupZone:function u(AL){this.zones={};if(!this.zone){this.zone=this.createZone({renderMode:this.dataRenderMode,cssText:"z-index: 1",slot:"scrollboxNode"});}var AH=this.zone;this.zones.origin=AH;AH.rh=AL.rh;AH.autoFitWindow=!!AL.afw;AH.autoFitContent=!!AL.afc;if(!this.isVIXtab){AH.tableCssClass="r-cssDefault"+(this.k?"_"+this.k:"");}AH.numColumnCanMerge=AL.gts&&AL.gts.cws?(AL.gts.cws.length-1):0;var AM=[],AJ=undefined,AN=null,AK,AI;mstrmojo.array.forEach(AL.gts&&AL.gts.row,function(AO){AK=AN&&AN.id===AO.id;if(AK){AM[AM.length-1]+=AO.fs&&AO.fs.length||1;}else{if(AO.otp===-1){AJ=0;mstrmojo.array.forEach(AM,function(AP){AJ+=AP;});}AM.push(AO.fs&&AO.fs.length||1);}AN=AO;});AH.acws=AM;AH.rowMerge=AL.gsi&&AL.gsi.prop&&AL.gsi.prop.rows&&AL.gsi.prop.rows.mg!=="0";AI=AL.ghs&&AL.ghs.chs;AH.headerOffset=AI&&(AI.show?(AI.items&&AI.items.length||1):0)-1;AH.mxPos=AJ;},getHACP:function AE(AI){var AH;if(AI){AH=new mstrmojo.XtabLevelHACP();if(this.outlineState){AH.outlineState=this.outlineState;}}else{AH=(this._super&&this._super())||new mstrmojo.XtabHACP();}return AH;},_setupCP:function W(AN){var AK=this.titlesCP=this.getTitleCP(AN),AM=this.chsCP=this.getColumnHeadersCP(AN),AI=this.rhsCP=this.getRowHeadersCP(AN),AJ=this.valuesCP=this.getValuesCP(AN);AK.forceAutoRowHeight=AM.forceAutoRowHeight=AN.rh;var AQ=new mstrmojo.XtabVACP();var AH=this.getHACP();AH.cps=[AK,AM];AQ.cps=[AH];var AO=this.getHACP(this.isOutlineMode);AO.cps=[AI,AJ];AQ.cps.push(AO);var AP=AN.gmh&&AN.gmh.gmrh,AL=AN.rw&&AN.rw.row;if(AP&&AL){AQ.gsmh={};AQ.gemh={};AQ.gsmh[AL.bb]=AP.gsmh;AQ.gemh[AL.bb+AL.bc-1]=AP.gemh;}this.zone.cp=AQ;},ongridDataChange:function Z(){var AH=this.model;if(AH){AH.set("data",this.gridData);if(!this.dataBlocks){this.dataBlocks=[];}this.dataBlocks[0]=this.gridData;}},gridPagesRendered:function b(){if(this._super){this._super();}},getTitleCP:function G(AH){return this.initCP(AH,this.interactiveCellsArray,M);},getColumnHeadersCP:function AA(AH){return this.initCP(AH,this.interactiveCellsArray,AB,AH.ghs&&AH.ghs.chs,AH.gts&&AH.gts.col,X);},getRowHeadersCP:function AC(AH){var AI=this.initCP(AH,this.interactiveCellsArray,I,AH.ghs&&AH.ghs.rhs,AH.gts&&AH.gts.row,Q);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){J.call(this,this.rw&&this.rw.row);}this.rhsCPList=[AI].concat(this._onDemandCP.rhs);return AF(this.rhsCPList)||AI;}return AI;},getValuesCP:function a(AI){var AH=this.initCP(AI,this.interactiveCellsArray,g,AI.gvs,AI.gts&&AI.gts.col);if(this.onDemandIF&&this.rw){if(!this._onDemandCP){J.call(this,this.rw&&this.rw.row);}this.valuesCPList=[AH].concat(this._onDemandCP.vls);return AF(this.valuesCPList)||AH;}return AH;},createOnDemandCP:function f(AI,AJ,AH){var AK=new mstrmojo.XtabOnDemandCP();AK.dataSource=this;AK.blockNum=AI;AK.rc=AJ;return AK;},dataDownloaded:function T(AI,AO){var AQ=AO.blockNum,AH=this.rhsCPList[AQ],AJ=this.valuesCPList[AQ],AP=AI.data,AM=this.gridData;AP._bidx=AQ;this.dataBlocks[AQ]=AP;if(!AH||!AJ){return ;}this.initCP(AP,this.interactiveCellsArray,I,AP.ghs&&AP.ghs.rhs,AP.gts&&AP.gts.row,Q,AH);this.initCP(AP,this.interactiveCellsArray,g,AP.gvs,AM.gts&&AM.gts.col,null,AJ);AH.initContent();AJ.initContent();this.numRowsDownloaded+=parseInt(AH.rc,10);this.updateStatus(mstrmojo.desc(8301,"Retrieving Data ..."),this.numRowsDownloaded*100/this.numRowsToDownload);var AL=this.zone;if(AL){var AN=AL.cp;if(AN){var AR=AP.gmh&&AP.gmh.gmrh,AK=AP.rw&&AP.rw.row;if(AR&&AK){AN.gsmh[AK.bb]=AR.gsmh;AN.gemh[AK.bb+AK.bc-1]=AR.gemh;}}AL.dataDownloaded();}},showDownloadStatus:function P(AH){if(!AH){return ;}if(this.showingStatus){this.numRowsToDownload+=AH;}else{this.numRowsToDownload=AH;this.numRowsDownloaded=0;}if(this.showStatus){this.showStatus(true,mstrmojo.desc(8301,"Retrieving Data ..."),this.numRowsDownloaded*100/this.numRowsToDownload);}},closeDownloadStatus:function j(){this.numRowsToDownload=0;if(this.showStatus){this.showStatus(false);}},download:function L(AK,AH,AO){var AN=this.gridData.rw,AJ=AN.row,AL=AN.col,AM=AJ.rm,AI=AJ.bc;this.rhsCPList[AK].isDownloading=this.valuesCPList[AK].isDownloading=true;if(AI){this.controller.onDownloadGridData(this,this.model.getDownloadAction(AK*AI+1,AI,AL.bb,AL.bc,this.id,AM,{blockNum:AK},AH),AO);}},unrender:function E(AH){this.width=this.widthLimit=this.height=this.heightLimit=0;this.disconnectScrollbox(this);this._super(AH);},getCellForNode:function x(AI){var AH=AI&&parseInt(AI.getAttribute("ei"),10);if(isNaN(AH)){return null;}return this.interactiveCellsArray[parseInt(AH,10)];},getActionCells:function O(AH){var AI=[],AK=this.selections;var AL=AH.axis+"A"+(AH.ui+1),AM=AK[AL],AJ;if(AM&&AM[AH.o]){for(AJ in AM){var AN=this.getCellForNode(AM[AJ][0]);AI.push(AN);}}else{AI.push(AH);}return AI;},setModel:function AD(AH){this.model=AH;if(AH.data){this.set("gridData",AH.data);}},delegateGridAction:function A(AH,AI){if(this._shouldResponseToAction(AI)){AH(this.zone);}},_shouldResponseToAction:function v(AH){return AH!=="refreshOnDataDownloaded";},getTargetZone:function o(){return this.zone;},destroy:function w(){var AH=this.model;if(this.controller&&this.controller.addScrollPosition){this.controller.addScrollPosition(this.gridData.datasetId+"."+this.gridData.k,this.scrollboxLeft,this.scrollboxTop);}if(AH&&AH.destroy){AH.destroy();}this._super();}});mstrmojo.XtabBase.EnumLockedHeaders={OFF:Y,ROW:C,COL:z,BOTH:N};}());(function(){mstrmojo.requiresCls("mstrmojo.HTMLButton","mstrmojo._HasContextMenu","mstrmojo.ContextMenu");mstrmojo.MenuButton=mstrmojo.declare(mstrmojo.Button,[mstrmojo._HasContextMenu],{preclick:function A(B){this.showContextMenu();},openPopupMenu:function(){this.showContextMenu();}});})();(function(){mstrmojo.requiresCls("mstrmojo.TreeNode","mstrmojo._IsExprNode","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.expr","mstrmojo._HasOwnAvatar");var F=mstrmojo.array,M=mstrmojo.expr,P=mstrmojo.dom,A=mstrmojo.css;function J(R,Q){var T=R.data,S=T&&T.nds;if(!S){return null;}if(Q){Q.sort(F.numSorter);}else{Q=R.sortSelectedIndices();}if(!Q.length){return null;}return{idxs:Q,nds:F.get(S,Q)};}function N(S){var R=S.ctxtBuilder,U=R&&R.itemWidgets,Q=U&&U[0],T=Q&&Q.data;if(T&&T.not&&(U.length>0)){delete T.not;Q.paint();}}mstrmojo.AndOrNode=mstrmojo.declare(mstrmojo.TreeNode,[mstrmojo._IsExprNode,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.AndOrNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},itemsContainerPrefix:function(){return this.domNode.childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[2].firstChild;},dropCueNode:function(){return this.domNode.childNodes[2].lastChild;},itemsContainerSuffix:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onitemCntChange:function(){A.toggleClass(this.itemsContainerNode,["multi"],this.itemCnt>2);},onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();},ondropCuePosChange:mstrmojo.TreeNode.prototype.markupMethods.ondropCuePosChange},multiSelect:true,itemIdField:null,init:function(Q){this._super(Q);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());var R=this.data;if(R){delete this.data;this._set_data(null,R);}},itemCnt:0,postBuildRendering:function(){var Q;this.set("itemCnt",this.items.length);if(this._super){Q=this._super();}N(this);return Q;},preadd:function L(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},preremove:function O(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},_set_data:function(T,Q){var R=this.data,S=(R!==Q);if(S){this.data=Q;if(Q&&!Q.nds){Q.nds=[];}this.set("items",Q&&Q.nds);}return S;},isDragValid:function K(){return true;},isSelectableArea:function(Q){return false;},getDragData:function(Q){var S=this._super(Q);if(S&&!S.html){var R=S.et&&M.ET2TGT[S.et];S.html=R?S[R]&&S[R].n||"":S.n||"";}return S;},remove:function I(R,S){var Q=this._super(R);if(Q>-1){var T=S||this.suppressConsolidation;if(!T){this.consolidate(false);}}return Q;},move:function(R,Q){this.suppressConsolidation=true;var S;if(this._super){S=this._super(R,Q);}this.suppressConsolidation=false;return S;},consolidate:function E(){var U=this.parent;if(!U||!U.remove){return ;}var S=this.items,R=S&&S.length;if(R<2){var T=R?S[0]:null,Q=this.childIndex();if(T){U.add([T],Q);}U.remove(this.data);}},indent:function G(S,Q){var R=J(this,S);if(!R){return ;}this.remove(R.idxs,true);var W=R.nds,V=Q&&Q.fn||this.data&&this.data.fn,U={et:M.ET.ANDOR,nds:W,fn:V};if(W.length===2&&W[0].not){if(W[1].not){delete W[0].not;delete W[1].not;U.not=true;U.fn=(V===M.FN.AND?M.FN.OR:M.FN.AND);}else{var T=W[0];W[0]=W[1];W[1]=T;}}this.add([U],R.idxs[0]);this.consolidate(false);},outdent:function C(R){var S=this.parent,Q=S&&S.data;if(!Q||Q.et!==M.ET.ANDOR){return ;}var T=J(this,R);if(!T){return ;}this.remove(T.idxs,true);if(this.data.not){T.nds[0].not=true;}S.add(T.nds,this.childIndex());this.consolidate(false);},edit:function D(Z,a,S){if(!Z){return ;}var Y=this.data,X=Y&&Y.fn,R=Z.data,f=R&&R.not;if(!R){R={};Z.data=R;}R.not=!!S;if(X!==a){var Q=Y.nds;if(Q&&Q.length>2){var e=Z.childIndex();if(e>0){this.indent([e-1,e],{fn:a});}}else{Y.fn=a;var V=this.ctxtBuilder,U=V&&V.itemWidgets;for(var T=0,W=(U&&U.length)||0;T<W;T++){var b=U[T];if(b){b.paint();}}}}else{Z.paint();}},preclick:function H(Q){var S=null,R=P.eventTarget(Q.hWin,Q.e);if(R===this.prefixNode){}else{if(P.contains(this.prefixNode,R,true)){S="andor";}}Q.part=S;},createAvatar:function B(S){var R=document.createElement("div"),T=P.findWidget(S),Q=T.getAvatarNode&&T.getAvatarNode();if(!Q){Q=T.condNode.cloneNode(true);Q.style.boxSizing="border-box";Q.style.width=T.condNode.offsetWidth+"px";}R.appendChild(Q);A.addClass(R,T.avatarCssCls||"mstrmojo-FE mstrmojo-ConditionNode");R.style.zIndex=20;return R;},_ndsToMove:J});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.fx","mstrmojo.TreeNode");var K=mstrmojo.dom,E={0:"closed",1:"opened",2:"leaf"},I=function(R,Q){var N=R.style,M,P,L,S,O;N.display="block";N.height="auto";M=R.offsetHeight;P=Q?M:0;L=Q?0:M;S=Q?"block":"none";N.overflow="hidden";O=new mstrmojo.fx.AnimateProp({target:R,props:{height:{start:L,stop:P,suffix:"px",fn:Math.round,ease:mstrmojo.ease.linear}},onEnd:function(){N.height="auto";N.display=S;},interval:30,duration:300});O.play();};mstrmojo.TreeBrowserNode=mstrmojo.declare(mstrmojo.TreeNode,null,{scriptClass:"mstrmojo.TreeBrowserNode",markupString:'<div id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,click,dblclick><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><img class="mstrmojo-TreeNode-checkBox" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><div class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</div></div>',markupSlots:mstrmojo.hash.copy({displayNode:function(){return this.domNode.firstChild;},checkBoxNode:function(){return this.domNode.firstChild.childNodes[1];}},mstrmojo.TreeNode.prototype.markupSlots),markupMethods:mstrmojo.hash.copy({onstateChange:function(L){this.stateNode.className="mstrmojo-TreeNode-state "+(E[this.state]||"closed");if(this.tree.anim&&this.contentRetrieved&&!L){I(this.itemsContainerNode,this.state===1);}else{this.itemsContainerNode.style.display=(this.state===1)?"block":"none";}}},mstrmojo.TreeNode.prototype.markupMethods),blockBegin:1,allowUnlistedValues:false,contentRetrieved:false,_set_items:function(N,M){var L=this._super(N,M);if(L&&this.tree.anim){I(this.itemsContainerNode,true);}return L;},onstateChange:function J(){var L=this.tree;if(!this.contentRetrieved&&(this.state==1)){this.set("items",[L.loadingItemCreaterFunc()]);L.getContent(this,this.blockBegin);}else{if((this.state==1)&&L.onNodeExpand){L.onNodeExpand(this);}if((this.state==0)&&L.onNodeCollapse){L.onNodeCollapse(this);}}},toggleState:function G(){if(this.state!==2){this.set("state",this.state===1?0:1);}},preclick:function H(L){K.clearBrowserHighlights(L.hWin);return false;},predblclick:function D(L){K.clearBrowserHighlights(L.hWin);return false;},premousedown:function B(M){var R=mstrmojo.dom,O=mstrmojo.dom.eventTarget(M.hWin,M.e),L=this.tree,N=(this.state==2),Q=R.contains(this.itemsContainerNode,R.eventTarget(M.hWin,M.e),true,this.domNode),P=(L.branchClickPolicy==mstrmojo.TreeBrowserEnum.BRANCH_POLICY_TOGGLE);if((this.isSpecialNode()||!(O==this.checkBoxNode||((O==this.textNode||O==this.displayNode)&&(N||!P))))&&!this.draggable){R.stopPropogation(M.hWin,M.e);}if((O==this.stateNode)||((O==this.textNode||O==this.displayNode)&&!N&&P)){if(!N){this.toggleState();}}else{if(O==this.checkBoxNode||Q){if(this._super){this._super(M);}}else{this.handleNodeClicked();}}},isSpecialNode:function C(){var L=this.data&&this.data.st;return(L<0);},handleNodeClicked:function F(){var L=this.tree,M=this.parent,N=this.data;switch(N&&N.st){case"-4":mstrmojo.css.addClass(this.textNode,["loading"]);L.getContent(M,M.blockBegin-L.blockCount);break;case"-3":mstrmojo.css.addClass(this.textNode,["loading"]);L.getContent(M,M.blockBegin+L.blockCount);break;case"-1":case"-2":break;default:if(L.handleNodeClicked){L.handleNodeClicked(N);}}},init:function(L){this._super(L);this.set("state",this.tree.isBranch(this.data)?0:2);},postBuildRendering:function A(){if(this._super){this._super();}var L=function(M){K.preventDefault(window,M||window.event);return false;};K.attachEvent(this.domNode,"mousedown",L);if(this.isSpecialNode()||this.tree.noCheckBox){this.checkBoxNode.style.display="none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasTooltip","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.string","mstrmojo.css","mstrmojo.array","mstrmojo._CanAutoClose");var T=mstrmojo.css,L=mstrmojo.array,F=mstrmojo.dom,B=mstrmojo.string;function H(V){this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-C",content:B.encodeHtmlString(V)});}mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,onSelectedItemChange:mstrmojo.emptyFn,useRichTooltip:true,allowHTML:false,useDarkTheme:false,init:function P(V){this._super(V);T.addWidgetCssClass(this.getPopupList(),"ctrl-popup-list");},initChildren:function C(){this.children=this.getPopupListConfig();this._super();},postBuildRendering:function Q(){if(this._super){this._super();}var V=this.getSelectedItem();if(V){H.call(this,V.n);}},showTooltip:function D(Z,Y){var W=this.selectedNode,X=this.richTooltip;if(W.offsetWidth>=W.scrollWidth){return ;}if(!X.top){var V=F.position(this.selectedNode);X.top=V.y-3;X.left=V.x+V.w+6;}if(this._super){this._super(Z,Y);}},getSelectedItem:function M(){var V=this.items;return V&&V[this.selectedIndex];},selectItemByField:function A(W,V){this.set("selectedIndex",L.find(this.items||[],W,V));},getPopupWidget:function E(){return this.list;},getPopupList:function J(){return this.list;},_set_items:function I(Y,V){var X=this.items;this.items=V;delete this.selectedIndex;if(X!==V){var W=this.hasRendered;if(W){this.refresh();}return true;}return false;},onclick:function U(V){this._super(V);var X=this,W=X.getPopupWidget();X.mw=X.mw||function(Y){if(!F.contains(W.domNode,F.eventTarget(self,Y),true,document.body)){W.close();F.detachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",X.mw);}};F.attachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",X.mw);if(X.focusOnPopup){W.domNode.focus();}},_set_selectedIndex:function N(c,Z,X){if((Z!==0&&!Z)||Z<0){return false;}var W=this.selectedIndex=Z,V=this.getPopupList(),Y=V&&V.items,b=Y&&Y[W],a=this.selectedNode;if(b&&b.dsbld){return false;}if(V){mstrmojo._ListSelections._set_selectedIndex.call(V,"selectedIndex",W,X);}if(a&&Y&&Y[W]){a.innerHTML=this.getPulldownTextInnerHTML(Y[W]);a.title=Y[W].title||"";}if(Y&&Y[W]){if(this.focusOnPopup&&V&&!V.closeAfterSelection){V.itemsContainerNode.children[W].style.color="";}else{this.onitemSelected(Y[W],W);}}return true;},getPulldownTextInnerHTML:function G(V){return this.allowHTML?V.n:B.encodeHtmlString(V.n,true);},postselectedIndexChange:function O(V){var Z=V.value,X=V.valueWas;if(Z!==X){var W=this.items,Y=W[Z];if(Y){H.call(this,Y.n);}this.onSelectedItemChange(Y,W[X]);}},getPopupConfig:function K(){var V=this._super();V.useDarkTheme=this.useDarkTheme;return V;},getPopupListConfig:function S(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,useRichTooltip:true,showTooltipForLargeText:true,scrollNodeMaxHeight:this.scrollNodeMaxHeight,listHooks:{select:function V(Z,a,Y){this.parent.set("selectedIndex",Y);if(this.visible&&this.closeAfterSelection&&!this.selectedItem.dsbld){this.close();}}},getItemProps:function W(a,Y){var Z=mstrmojo._IsList.getItemProps.call(this,a,Y);Z.style=this.parent.itemCssText||"";return Z;},suppressClose:function X(Y){return mstrmojo._CanAutoClose.suppressClose.call(this,Y)||F.contains(this.parent.domNode,Y,true,document.body);}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function R(W,a,V,Z,Y){Z=Z||{};Z.items=W;var X;if(Y===true){X=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:V||0},Z);}else{X=new mstrmojo.ui.Pulldown(Z);if(V!==undefined){X.set("selectedIndex",V);}}X.onSelectedItemChange=a||mstrmojo.emptyFn;return X;};}());(function(){mstrmojo.requiresClsP("mstrmojo","hash","Button","Box","express.ui.SubtotalsWidget");var B=mstrmojo.hash;mstrmojo.express.ui.SubtotalMenuEditor=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.express.ui.SubtotalMenuEditor",checkList:undefined,btnContainer:undefined,onSubmenuOpen:function A(){this.checkList.set("selectedItems",this.cell.ast);},children:[{scriptClass:"mstrmojo.express.ui.SubtotalsWidget",alias:"checkList"},{scriptClass:"mstrmojo.Box",alias:"btnContainer",cssClass:"mstrmojo-subtotals-button cf",cancelBtn:undefined,children:[{scriptClass:"mstrmojo.Button",alias:"cancelBtn",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.onSubmenuClosed();}},{scriptClass:"mstrmojo.Button",alias:"okBtn",text:mstrmojo.desc(1442,"OK"),onclick:function(){var H=this.parent.parent,K=H.cell,L=H.xtab,C=[],J=[],E=H.checkList.selectedIndices,G=K.ast,I=[],F,D;B.forEach(E,function(P,O){var R=H.checkList.items[O].v,Q=true;C.push(R);if(G){for(F=0;F<G.length;F++){if(R===G[F].t){Q=false;break;}}if(Q){J.push(R);}}});if(G){for(F=0;F<G.length;F++){var M=G[F].t,N=false;for(D=0;D<C.length;D++){if(C[D]===M){N=true;}}if(!N){I.push(M);}}}L.showTotal(K,G?J:C,I);H.onSubmenuClosed();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.HierarchyCheckList","mstrmojo.ui._HierarchyListSelection","mstrmojo.EnumSelectionType","mstrmojo.hash","mstrmojo.array","mstrmojo.css");var L=mstrmojo.hash,S=mstrmojo.css,H=mstrmojo.array,A=mstrmojo.EnumSelectionType;var R="dynamic",K="hasSelectedDsct";var V=7;function G(Z,W,Y){var a=[],X={};H.forEach(Z,function(c){var b=c.v;if(b>=Y){a.push(c);if(W.isLevelSelected(b)){X[a.length-1]=true;}}});return{items:a,selectedIndices:X};}mstrmojo.vi.ui.HierarchyCheckList=mstrmojo.declare(mstrmojo.ui.HierarchyCheckList,[mstrmojo.ui._HierarchyListSelection],{scriptClass:"mstrmojo.vi.ui.HierarchyCheckList",getItemMarkup:function D(X,W){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@tt}"><div class="right"><span class="refresh" title="{@refreshTitle}"></span><span class="branch" title="{@branchTitle}"></span><span class="level" title="{@levelTitle}"></span></div><div class="content"><span class="indent" style="padding-left: {@indent}px;"></span><span class="triangle"></span><span class="checkbox"></span><span class="text">{@en@n}</span></div></{@tag}>';},getItemProps:function T(Y,W){var X=this._super(Y,W);if(Y.isBranchSelected){X.addCls(R);}if(Y.hasDsctSelected){X.addCls(K);}L.copy({refreshTitle:mstrmojo.desc(15251,"Dynamic"),branchTitle:Y.isSelected?mstrmojo.desc(15921,"Single Deselect"):mstrmojo.desc(15920,"Single Select"),levelTitle:mstrmojo.desc(15919,"Level Select"),},X);return X;},onclick:function U(W){var Y=W.getTarget(),Z=this.getItemNodeFromTarget(Y),X=this.getItemFromTarget(Y);if(X){if(S.hasClass(Y,"triangle")){if(X.hcd){this.doExpandCollapse(Z,X);}}else{if(S.hasClass(Y,"branch")){this.doElementSelect(Z,X,!X.isSelected);}else{if(S.hasClass(Y,"level")){this.openLevelPopup(Z,X,Y);}else{if(!S.hasClass(Y,"indent")&&!S.hasClass(Y,"refresh")){this.doBranchSelect(Z,X,!X.isSelected);}}}}W.cancel();}},onSelectionChange:function I(X,W,Y,Z){if(X===A.ALL&&W){this.clearSelections();(this.raad?this.getInitialDisplayRoots():this.getRootItems()).forEach(function(a){if(a.v){this.selectionList.push({func:A.BRANCH,itemValue:a.v,isNot:false});}},this);if(this.postSelectionChange){this.postSelectionChange();}}else{this._super(X,W,Y,Z);}},updateItemNodesStatus:function M(){var W=this.itemsContainerNode&&this.itemsContainerNode.childNodes;this._super();H.forEach(W,function(Z){var Y=this.getItemFromTarget(Z),X=Z.getElementsByClassName("branch")[0];if(Y){S.toggleClass(Z,R,Y.isBranchSelected);S.toggleClass(Z,K,Y.hasDsctSelected);if(X){X.title=Y.isSelected?mstrmojo.desc(15921,"Single Deselect"):mstrmojo.desc(15920,"Single Select");}}},this);},getSummaryText:function J(){return"";},getLevels:function E(){return[];},getLevelItems:function B(X){var Z=this.getLevels(),a=X?[{v:-1,n:mstrmojo.desc(15824,"All Levels")}]:[];if(Z.length>0){return a.concat(Z);}var W=this.getMaxLevel();for(var Y=0;Y<=W;Y++){a.push({v:Y,n:mstrmojo.desc(493,"Level")+" "+(Y+1)});}return a;},postBuildRendering:function Q(){var Y=this.levelPopup,X=this.domNode;if(!Y){var W=this.getLevelPopupConfig(),Z=L.walk(W.scriptClass,window);delete W.scriptClass;Y=this.levelPopup=new Z(W);this.addDisposable(Y);}Y.placeholder=X.insertBefore(document.createElement("div"),X.firstChild);Y.render();return this._super();},unrender:function P(W){var X=this.levelPopup;if(X){X.unrender(W);}return this._super(W);},onScrollEnd:function C(){var X=this.levelPopup,W=X&&X.getPopupWidget();if(W&&W.visible){X.closePopup();}this.hideTooltip();},openLevelPopup:function O(a,Y,X){var Z=this.levelPopup,W=Z.getPopupWidget();if(Z&&Y.hcd&&this.isHiearachyDisplay()){Z.openPopup(W,{branch:Y,branchNode:a});if(X){W.domNode.style.left=X.offsetLeft+"px";W.domNode.style.top=X.offsetTop+X.offsetHeight-this.scrollNode.scrollTop+"px";}}},getLevelPopupConfig:function N(Y){return L.copy(Y,{scriptClass:"mstrmojo.ui.PopupButton",markupString:'<div id="{@id}" class="level-popup-btn" title="{@title}" mstrAttach:click></div>',title:mstrmojo.desc(15919,"Level Select"),isHostedWithin:false,parent:this,widget:this,children:{scriptClass:"mstrmojo.ui.PopupWidget",alias:"levelPopup",visible:false,children:[{scriptClass:"mstrmojo.ui.CheckList",alias:"checklist",doItemSelect:function a(h,f){var e=this.parent,j=e.opener.widget,g=!this.selectedIndices[h._renderIdx];if(e.branch&&e.branchNode){j.doBranchLevelSelect(e.branchNode,e.branch,h.v,g);}else{j.doLevelSelect(h.v,g);}mstrmojo._IsList.doItemSelect.call(this,h,f);},onclick:function X(e){if(!S.hasClass(e.getTarget(),"refresh")){mstrmojo._IsList.onclick.call(this,e);}},getItemMarkup:function c(e){return mstrmojo.ui.CheckList.prototype.getItemMarkup.call(this,e).replace('<span class="text">{@en@n}</span>','<span class="refresh"></span><span class="text">{@en@n}</span>');}}],onOpen:function W(){var g=this.opener.widget,e=this.branch,f=G(g.getLevelItems(),g.getLevelSelection(e),e&&e.lv+1||0);this.checklist.set("items",f.items);this.checklist.set("selectedIndices",f.selectedIndices);}},getPopupWidget:function b(){return this.levelPopup;},onPopupWidgetOpened:function Z(){S.addClass(this.levelPopup.branchNode,"level-popup-open");},onPopupWidgetClosed:function d(){S.removeClass(this.levelPopup.branchNode,"level-popup-open");}});},getAllButtonConfig:function F(X,W){return L.copy(W,X?{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(3474,"Select All"),alias:"selectAllBtn",cssClass:"selectAll",widget:this,onclick:function(){this.widget.doAllSelect(true);}}:{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(1763,"Clear All"),alias:"clearAllBtn",cssClass:"clearAll",widget:this,onclick:function(){this.widget.doAllSelect(false);}});}});}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresClsP("mstrmojo","Box","Button","RadioList","Label","array");mstrmojo.requiresClsP("mstrmojo.ui","Pulldown");var H=mstrmojo.desc,R=mstrmojo.css,K=mstrmojo.array;function P(){R.addClass(this.list.domNode,"AdvancedSort-PopupList");this.parent.isActive(true);}mstrmojo.SortRow=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.SortRow",markupString:'<div id="{@id}" class="mstrmojo-SortRow {@cssClass}" style="{@cssText}" mstrAttach:click><div></div><div class="mstrmojo-sort-rule-delete"></div><div style="clear:both;"></div></div>',markupSlots:{containerNode:function O(){return this.domNode.firstChild;},deleteNode:function J(){return this.domNode.children[1];}},sortRule:undefined,sortOrder:undefined,rank:undefined,originalPos:null,isActive:function L(U){this.parent&&this.parent.pulldownActive(U);},onclick:function S(U){if(U.getTarget()===this.deleteNode){this.parent.deleteSortRule(this);}},isAscending:function T(){return this.sortOrder.value===0;},isCustomSort:function C(){return this.sortOrder&&this.sortOrder.value===2;},getSortKey:function F(){return this.sortRule.value;},setPulldownOptions:function Q(V){var U=this.sortRule;U.set("items",U.items.concat(V));},resetPulldownOptions:function E(){this.sortRule.set("selectedIndex",0);this.sortRule.set("items",[{v:"",n:" ",cls:"firstItem"}]);},setSelected:function N(a,W,Z){var U=K.find(this.sortRule.items,"v",a);if(W===2){if(U===-1){var V=mstrApp.rootCtrl.docCtrl.model,b=V.findUnitInDataSet&&(V.findUnitInDataSet((a||"").split("!")[1])||{}).n;this.sortRule.set("items",this.sortRule.items.concat([{v:a,n:b}]));U=this.sortRule.items.length-1;}this.sortRule.set("selectedIndex",U);this.sortRule.set("enabled",false);var X=K.find(this.sortOrder.items,"v",2);if(X===-1){this.sortOrder.set("items",this.sortOrder.items.concat({n:H(5705,"Custom Sort"),v:2}));X=this.sortOrder.items.length-1;}this.sortOrder.set("selectedIndex",X);this.sortOrder.set("enabled",false);}else{if(U===-1){if(!Z){this.sortRule.set("selectedIndex",0);this.sortOrder.set("selectedIndex",0);return ;}else{this.sortRule.set("items",this.sortRule.items.concat([{v:a,n:Z}]));U=K.find(this.sortRule.items,"v",a);}}this.sortRule.set("selectedIndex",U);var Y=this.sortOrder.items;if(Y.length>2){this.sortOrder.set("items",Y.slice(0,2));}this.sortOrder.set("selectedIndex",(W===0?1:0));}},setRank:function B(U){this.rank.set("number",U);},getRank:function G(){return this.rank.number;},children:[{scriptClass:"mstrmojo.Widget",alias:"rank",number:0,markupString:'<div class="order-column"><div class="draggable-icon"></div><div class="order">{@number}</div></div>',markupMethods:{onnumberChange:function D(){this.domNode.children[1].innerText=this.number;this.refresh();}}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"sortRule",cssClass:"mstrmojo-sort-rule-pulldown",selectedIndex:0,value:"",allowHTML:false,items:[{v:"",n:" ",cls:"firstItem"}],bindings:{enabled:"this.items && this.items.length > 1"},isHostedWithin:false,onPopupWidgetOpened:function M(){P.call(this);},onPopupWidgetClosed:function A(){this.parent.isActive(false);},onitemSelected:function I(U){this.value=U.v;this.parent.parent.itemSelected();}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"sortOrder",cssClass:"mstrmojo-sort-rule-order",value:0,selectedIndex:0,bindings:{enabled:"this.parent.sortRule.items && this.parent.sortRule.items.length > 1"},isHostedWithin:false,onPopupWidgetOpened:function M(){P.call(this);},onPopupWidgetClosed:function A(){this.parent.isActive(false);},onitemSelected:function I(U){this.value=U.v;},items:[{n:H(1885,"Ascending"),v:0},{n:H(1886,"Descending"),v:1}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.vi.ui.HierarchyCheckList","mstrmojo.ui._IsIncFetchHierarchyList");var A=mstrmojo.css;mstrmojo.vi.ui.IncHierarchyCheckList=mstrmojo.declare(mstrmojo.vi.ui.HierarchyCheckList,[mstrmojo.ui._IsIncFetchHierarchyList],{scriptClass:"mstrmojo.vi.ui.IncHierarchyCheckList",cssClass:"elementsList"});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.boxmodel","mstrmojo.Popup","mstrmojo.MenuItem","mstrmojo.Box");mstrmojo.requiresClsP("mstrmojo.express.ui","SubmenuEditor","SubtotalMenuEditor");mstrmojo.requiresDescs(1018);var F="mstrXtabCellMenu",Q="mstrmojo.all['"+F+"'].selectedData",G="mstrmojo.all['"+F+"'].xtab",H="mstrmojo-InteractiveButton",J="mstrmojo.Box",B="mstrmojo-Menu-Box",I="mstrmojo.MenuItem";function M(V,S){var U=mstrmojo.all[F],T=U.xtab,R=[U.selectedData].concat(S||[]);U.close();T[V].apply(T,R);}function L(){M("link",[this.index]);}function A(T,V,U,R){var S={scriptClass:I,text:T,iconClass:"mstrmojo-oivmSprite "+V,cssClass:H,onclick:U};if(R){S.bindings=R;}return S;}function C(S,U,T){var R=A(S,"tbPivot"+U,function(){M("pivot",[T]);});R.bid=T;return R;}function K(S,T,R){return A(S,"tbSort"+T,function(){M("sort",[(R==="true")]);},{selected:"mstrmojo.all['"+F+"Sort'].so === "+R});}function P(U,T,S){if(!U){return null;}var R=T.model.getCellDrillsInfo(S);if(!R||!R.k){return null;}return A(mstrmojo.desc(183,"Drill to")+" "+(R.n||""),"tbDrill",function(){M("drill");});}function O(R,T,S){return A(R,"tbDerivedMetric"+T,function(){M("derivedMetric",[S]);});}mstrmojo.XtabCellMenu=mstrmojo.registry.ref({id:F,slot:"popupNode",scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-Menu",shadowNodeCssClass:mstrmojo.dom.isIE7||mstrmojo.dom.isIE8?"mstrmojo-Menu-shadow":"",contentNodeCssClass:"mstrmojo-Menu-content",autoCloses:false,locksHover:true,disposable:false,derivedMetricOptions:null,updatePopupConfig:function E(X){X=X||{};var d=this.xtab=X.xtab,g;this.selectedNode=X.td;var U=this.selectedData=X.data||(d&&X.td&&d.getCellForNode(X.td));this.onClose=X.onClose;var a=this.sortOptions,R=((U&&U.at)||0)&8,V=U&&(U.mix!==undefined&&U._e&&U._e.otp===4);a.set("visible",R||V);a.children[0].set("visible",R);a.children[1].set("visible",R);a.children[2].set("visible",R||V);a.set("so",U&&U.so);a.children[2].set("onclick",function(){M("advSort",[U.axis]);});a=this.pivotOptions;var f=((U&&U.at)||0)&16;if(f){var T;for(T=0;T<a.children.length;T++){var Y=a.children[T];Y.set("visible",d.model.isPvtButtonVisible(U,Y.bid));}}a.set("visible",f);a=this.linkOptions;g=d.model.getCellLinksInfo(U);a.set("visible",(((U&&U.at)||0)&4)&&(g&&g.links&&g.links.length>0));a=this.drillOptions;var b=((U&&U.at)||0)&1,e=P(b,d,U);a.set("visible",b&&e);a.set("children",[e]);a=this.derivedMetricOptions;var W=mstrApp.isVI&&U&&U.hasOwnProperty("mix");if(W){a.children[0].set("visible",W);a.children[1].set("visible",U.um);}a.set("visible",W);a=this.subtotalsOptions;var Z=d.model.getCellTitleInfo(U),S=U&&!U.hasOwnProperty("mix")&&Z.isSrcTitle&&U.otp!==-1;a.set("visible",S);if(S){a.set("children",[this.getSubtotalMenuCfg(mstrmojo.desc(6193,"Show Totals"))]);a.showSubtotalsBtn.set("xtab",d);a.showSubtotalsBtn.set("cell",this.selectedData);}this.cfg=X;},getSubtotalMenuCfg:function N(R){return{scriptClass:"mstrmojo.express.ui.SubmenuEditor",text:R,cssClass:H,alias:"showSubtotalsBtn",contentScriptClass:"mstrmojo.express.ui.SubtotalMenuEditor",parentID:F};},nudge:function D(){var X=this.cfg,W=X.opener,e=W&&W.domNode&&mstrmojo.dom.position(W.domNode),f=e.y||0,Z=X.cmPos,b,Y,d;if(Z){b=Z.x;Y=Z.y-f;}else{var S=X.el||(X.btn&&X.btn.domNode);d=mstrmojo.boxmodel.offset(S,W&&W[this.slot]);b=d.left;Y=d.top+((S&&S.offsetHeight)||0);}var V=mstrmojo.dom.windowDim(),T=this.domNode;var U=T.offsetHeight,a=V.h-f;d=Math.max(0,Y+U-a);this.set("top",Y-d+"px");var c=T.offsetWidth,R=V.w;d=Math.max(0,b+c-R);this.set("left",b-d+"px");},subtotalsOptions:null,children:[{id:F+"Links",alias:"linkOptions",scriptClass:J,cssClass:B,visible:false,children:[{scriptClass:"mstrmojo.WidgetList",autoHide:true,itemFunction:function(S,R){if(R===0){mstrmojo.requiresCls(I);}return new mstrmojo.MenuItem({text:S.n||S.url||(S.target&&(S.target.n||S.target.did)),cssClass:H,cssText:(R===this.itemsInfo&&this.itemsInfo.di)?"font-weight: bold":"",index:R,onclick:L});},bindings:{itemsInfo:"this.parent.parent.visible ? "+G+".model.getCellLinksInfo("+Q+") : null",items:"this.itemsInfo.links"}}]},{id:F+"Drill",alias:"drillOptions",scriptClass:J,cssClass:B,visible:false},{id:F+"Sort",alias:"sortOptions",scriptClass:J,cssClass:B,children:[K(mstrmojo.desc(7974,"Sort Ascending"),"Asc","true"),K(mstrmojo.desc(7975,"Sort Descending"),"Desc","false"),A(mstrmojo.desc(11099,"Advanced Sort ..."),"tbAdvSort",mstrmojo.emptyFn)]},{id:F+"Pivot",alias:"pivotOptions",scriptClass:J,cssClass:B,children:[C(mstrmojo.desc(11110,"Move to Beginning"),"Beginning","b"),C(mstrmojo.desc(5362,"Move Left"),"Left","l"),C(mstrmojo.desc(5363,"Move Right"),"Right","r"),C(mstrmojo.desc(7978,"Move Up"),"Up","u"),C(mstrmojo.desc(7979,"Move Down"),"Down","d"),C(mstrmojo.desc(7976,"Move to Columns"),"Cols","2"),C(mstrmojo.desc(7977,"Move to Rows"),"Rows","1")]},{id:F+"DerivedMetric",alias:"derivedMetricOptions",scriptClass:J,cssClass:B,children:[O(mstrmojo.desc(11649,"Add Derived Metric"),"Add","add"),O(mstrmojo.desc(11648,"Edit Derived Metric"),"Edit","edit")]},{id:F+"Subtotals",alias:"subtotalsOptions",scriptClass:J,cssClass:B,visible:true}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var K=mstrmojo.array,H=mstrmojo.dom,D=mstrmojo.hash,A=mstrmojo.Enum_Keys,C=19,M=A.ENTER,E=A.ESCAPE,N=A.DOWN_ARROW,F=A.UP_ARROW;mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,editOnClick:false,init:function P(U){this._super(U);var Q=this.getPopupList();Q.renderOnScroll=this.renderOnScroll||Q.renderOnScroll;Q.renderBlockSize=this.renderBlockSize||Q.renderBlockSize;var T=[];if((mstrApp.isWorkstation&&H.isMac())||H.isSafari){T=["clip-safari"];}mstrmojo.css.addWidgetCssClass(this,["mstrmojo-ui-SearchablePulldown"].concat(T));var S=Q.constructor.prototype,R=Q.getItemProps||S.getItemProps,V=Q.getItemMarkup||S.getItemMarkup;Q.getItemProps=function(a,X){var Y=this._spft||"",c=a.n,Z=c?c.toUpperCase().indexOf(Y):-1,W=function(e){var d=[],f;K.forEach(e.split(";"),function(g){f=g.split(":");if(f.length===2&&f[0].toLowerCase()!=="color"){d.push(g);}});return d.join(";");};if(Z===-1){Y="";}var b=R.call(this,a,X);if(this.selectedIndices[X]){b.style=W(b.style);}if(c){b.before=c.slice(0,Z);b.input=c.substring(Z,Z+Y.length);b.after=c.slice(Z+Y.length,c.length);}return b;};Q.getItemMarkup=function(Y,W){var X=V.call(this,Y,W);if(Y.n&&Y.v!=="u;"){return X.replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");}return X;};this._originalFocusOnPopup=this.focusOnPopup;this.focusOnPopup=false;},onclick:function O(Q){if(this._originalFocusOnPopup!==undefined){this.focusOnPopup=false;}if(this.isClickingAnchorSlot(Q)){var S=Q.e.offsetX>=(this.selectedNode.offsetWidth-C),R=this.getPopupWidget().visible;if(!R||(R&&S)){this.set("isEditing",!R);this._super(Q);}else{if(!this.isEditing){this.set("isEditing",true);}}}},setDefaultListAndIndex:function(U,V){var T=this.getPopupList(),R=this.text,Q=K.find(U,"n",R);if(Q===-1&&!this.allowCustomText){var S=T.items[0]||U[0];Q=K.find(U,"n",S.n);}T.set("items",U);if(V){this.set("selectedIndex",Q);}},onPopupWidgetClosed:function I(Q){this.set("isEditing",false);var R=this.getPopupList(),S=R._oldItems;delete R._oldItems;if(S){this.setDefaultListAndIndex(S,Q&&Q.pressingEnter);}},_set_selectedIndex:function G(S,Q){if(this.allowCustomText&&Q===-1){this.selectedIndex=-1;this.onitemSelected(null,Q);}else{this.isSearching=false;this._super(S,Q,true);if(this.hasRendered){var R=this.selectedNode;this.text=R.innerText||R.textContent;}}return true;},onkeydown:function J(S){this._super(S);var R=window.event||S.e,T=R.keyCode,Q=this.getPopupWidget();if(T===M){Q.close({pressingEnter:true});}else{if(this._originalFocusOnPopup&&(T===N||T===F)){this.focusOnPopup=true;if(Q.focus){Q.focus();}Q.raiseEvent(S);}}},onkeyup:function B(S){var Q=window.event||S.e,T=Q.keyCode,R=this.getPopupWidget();this._super(S);if(T===E||T===M){R.close();}else{if(T!==N&&T!==F){this.processSearch();}}},processSearch:function L(){this.isSearching=true;this.hideTooltip();var Q=[],S=this.getPopupList(),U=this.selectedNode.innerHTML,V=S._oldItems||S.items,R=U.toUpperCase(),T;R=R.replace(/<BR>/,"");if(R.length>0){K.forEach(V,function(W){T=W.n;if(T&&T.toUpperCase().indexOf(R)>-1){Q.push(D.clone(W));}},this);}else{Q=V;}S._spft=R;if(this.customizeSearchResult){this.customizeSearchResult(Q);}S.set("items",Q);if(S.adjustCornersForPopupOverflow){S.adjustCornersForPopupOverflow();}delete S._spft;S._oldItems=V;S.set("visible",S.items.length!==0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ui.Pulldown");var B={DATA_SOURCES:0,CATALOGS:1,CUBES:2};function D(F,G){return mstrmojo.array.map(F,function(H){H.lv=G;return H;});}mstrmojo.mstr.MDXCubeBrowser=mstrmojo.declare(mstrmojo.Editor,null,{title:mstrmojo.desc(4380,"Select MDX Cube"),help:"Select_MDX_Cube_dialog_box.htm",items:null,selectedItem:null,loadMDXData:function(G){G=G||{};var F=G.item||{};mstrmojo.xhr.request("GET",mstrConfig.taskURL,{success:function(H){G.success(H);},failure:function(H){mstrmojo.alert(H);}},{taskId:"browseMDX",level:F.lv||B.DATA_SOURCES,unitId:F.did||"",roleId:F.roleId||""});},init:function E(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-MDXCubeBrowser");},children:[{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-MDXCubeBrowser-sources",alias:"mdxPulldown",selectedIndex:0,makeObservable:true,items:[{n:mstrmojo.desc(4381,"Data Sources"),did:"",lv:B.DATA_SOURCES}],getPopupListConfig:function(){var G=this;var F=mstrmojo.ui.Pulldown.prototype.getPopupListConfig();F.postclick=function(){G.handleSelection();};return F;},handleSelection:function(){var H=this,F=H.parent;H.set("items",this.items.slice(0,this.selectedIndex+1));H.set("selectedIndex",this.items.length-1);var G=this.selectedItem||this.items[this.selectedIndex];F.set("items",G.items);F.set("selectedItem",null);},addItem:function(F){F.cls="lv-"+F.lv;this.set("items",this.items.concat(F));this.set("selectedIndex",this.items.length-1);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up mstrmojo-MDXCubeBrowser-sources-btn",bindings:{enabled:function(){return this.parent.mdxPulldown.selectedIndex>0;}},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);},onclick:function(){var F=this.parent.mdxPulldown;F.set("selectedIndex",F.selectedIndex-1);F.handleSelection();}},{scriptClass:"mstrmojo.ui.List",cssClass:"mstrmojo-MDXCubeBrowser-cubes",alias:"cubeList",bindings:{items:function(){return this.setCssClass(this.parent.items);}},setCssClass:function(F){var G=this;return mstrmojo.array.map(F,function(H){H.cls=G.getItemCssClass(H);return H;});},selectionAdded:function(F){if(!F.isReselect){var J=this,H=J.parent,I=J.items[F.added];if(I.lv===B.CUBES+1){H.set("selectedItem",I);return ;}var G=this.parent.mdxPulldown;H.loadMDXData({item:I,success:function(L){var K=L.items;if(I.lv==B.CATALOGS){mstrmojo.array.map(K,function(M){M.roleId=I.did;return M;});}H.set("items",D(K,I.lv+1));I.items=K;G.addItem(I);}});}},getItemMarkup:function C(G,F){return'<{@tag} class="item" idx="{@idx}" style="{@style}" title="{@title}"><span class="{@cls}"></span>{@en@n}</{@tag}>';},getItemCssClass:function(F){return"mstrIcon-lv mstrIcon-lv-"+{"1048583":"fDataSource","1048584":"fCatalog","1048585":"qc"}[F.dt];}},{scriptClass:"mstrmojo.Label",bindings:{text:function(){return mstrmojo.desc(2107,"## items found").replace("##",(this.parent.items&&this.parent.items.length)||0);}}},{scriptClass:"mstrmojo.HBox",alias:"btnHBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[mstrmojo.Button.newWebButton(mstrmojo.desc(547,"Select"),function A(){var F=this.parent.parent;F.close();F.onOK(F.selectedItem);},true,{bindings:{enabled:function(){return this.parent.parent.selectedItem.lv===3;}}}),mstrmojo.Button.newWebButton(mstrmojo.desc(221,"Cancel"),function A(){this.parent.parent.close();})]}],postBuildRendering:function(){var G=this;this._super();var F=this.mdxPulldown;this.loadMDXData({success:function(H){G.set("items",D(H.items,B.CATALOGS));F.items[0].items=G.items;}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.Label","mstrmojo.num","mstrmojo.expr","mstrmojo.ui.Pulldown","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ValidationTextBox","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.models.template.DataInterface");var E="selColScenario",N="colTargetAndWidth",D="selRowScenario",G="rowHeightContainer",C=mstrmojo.num,I=mstrConfig,F=mstrmojo.expr,H=mstrmojo.models.template.DataInterface.ENUM_GRID_RESIZE,M=H.FIXED,A=mstrmojo.ui.Pulldown.newPulldown;function B(P,O,Q){O.slot="col1Node";return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:P,col1Width:"100%",col2Width:"56px",children:[O,{scriptClass:"mstrmojo.Box",slot:"col2Node",value:0,enabled:true,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",cssText:"text-align:right;width:36px",cssDisplay:"inline-block",bindings:{value:"this.parent.value",enabled:"this.parent.enabled"},dtp:F.DTP.NUMERIC,onValid:function(){var R,S;if(C.UNIT.PX!==I.units){R=parseFloat(this.value).toFixed(2);S=R!==parseFloat(this.orignText);}else{R=parseInt(this.value,10);S=R!==parseInt(this.orignText,10);}if(S){Q.call(this.parent.parent.parent,R);}}},{scriptClass:"mstrmojo.Label",cssDisplay:"inline-block",cssText:"width:16px;padding-left:2px;",text:C.UNIT_SYMBOL[I.units],title:I.unitsLabel}]}]};}function J(R,Q,P){var O=[{n:mstrmojo.desc(2987,"Fit to contents"),v:H.FIT_TO_CONTENTS},{n:mstrmojo.desc(2050,"Fixed"),v:M}];if(P){O.unshift({n:mstrmojo.desc(13580,"Fit to container"),v:H.FIT_TO_WINDOW});}return A(O,function(S){var T=this.parent;T[Q].set("enabled",S.v===M);if(!T._sync){T.targetXtab.changeResizeScenario(S.v,P);}},undefined,{alias:R,isHostedWithin:false});}mstrmojo.ui.editors.controls.XtabResizeGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.XtabResizeGroup",init:function K(O){this._super(O);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-XtabResize");var P=this;this.addChildren([{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(159,"Columns")},J(E,N,true),B(N,A([],function(V){var R=this.parent,U=V.width,Q=P.xtabInterface.getColResizeScenario()===M,T=P.xtabInterface.getColResizeInfo(P.targetXtab.model.docModel.datasets).widths||[{}];if(T.length){var S=T[0].width;if(Q&&V._renderIdx!==undefined){P.targetXtab.edtModel._lsfcw=V._renderIdx;}if(U===""){var W=T.every(function(X){return X.width===S;});if(W){U=S;}}R.parent.syncControls(function(){R.getControl(2).set("value",(Q&&U!=="")?((C.UNIT.PX===I.units)?U:parseFloat(C.convertUnits(C.UNIT.PX,I.units,U)).toFixed(2)):"");});}}),function(R){var Q=this[N].getControl(1).getSelectedItem();this.targetXtab.changeColumnWidth(Q.did,Q.t,Math.round(C.convertUnits(I.units,C.UNIT.PX,R)),Q.depth||1,false);}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(113,"Rows")},J(D,G,false),B(G,{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13581,"Row height:")},function(Q){this.targetXtab.changeRowHeight(Math.round(C.convertUnits(I.units,C.UNIT.PX,Q)));})]);},targetXtab:null,xtabInterface:null,setFormatSource:function L(T){var S=this,R=S.xtabInterface=this.addDisposable(new mstrmojo.models.template.DataInterface(T.model.data)),U=R.isEmpty(),Q=T.edtModel,O=Q._lsfcw=Q._lsfcw===undefined?1:Q._lsfcw,P=!U&&!T.excludeData;S.targetXtab=T;S.set("enabled",P);if(P){this.syncControls(function(){var a=R.getColResizeInfo(T.model.docModel.datasets),V=a.widths||[];S[E].selectItemByField("v",a.v);var Y=S[N],X=Y.getControl(1);V.unshift({n:mstrmojo.desc(2429,"All Columns"),did:"all",width:""});X.set("items",V);X.set("selectedIndex",a.v===M?Math.min(O,V.length-1):0);var b=R.getRowResizeInfo(),Z=b.v,W=b.height;S[D].selectItemByField("v",Z);S[G].getControl(2).set("value",Z===M?((C.UNIT.PX===I.units)?W:parseFloat(C.convertUnits(C.UNIT.PX,I.units,W)).toFixed(2)):"");});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.util.ui.ColorPicker","mstrmojo.ui.editors.controls.ColorList","mstrmojo.ui.editors.controls.ColorWheel","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.TextBoxWithLabel","mstrmojo.ui.ButtonBar","mstrmojo.Button","mstrmojo.css","mstrmojo.util.color");mstrmojo.requiresDescs(16164);var R=1,Z=2,S=mstrmojo,B=S.css,T=S.array,V=mstrmojo.util.ui.ColorPicker,J=S.util.color,P=Math.round,Y=R,N=0,D=1,W=2,b="txtColor",e="automatic",h="#ffffff",A="transparent";var F=[{n:mstrmojo.desc(12071,"Color fill"),id:N},{n:mstrmojo.desc(12072,"No fill"),id:D},{n:mstrmojo.desc(12073,"Gradient"),id:W}];function O(){return this.color!==e?this.color:this.autoPreviewColor;}function U(l){return J.getCSSColorString(l);}function a(n,m,l){return mstrmojo.Button.newWebButton(n,l,m,{slot:"buttonNode",cssDisplay:"inline-block"});}function k(m){var n={},l=O.call(this);if(m&&(typeof l==="string")){l=U(l);var o=l.toLocaleLowerCase();m.forEach(function(q,p){if((o===q.id.toLocaleLowerCase())&&(o!==A)){n[p]=true;}});}return n;}function Q(l){return{scriptClass:"mstrmojo.ui.editors.controls.ColorList",items:l,selectedIndices:k.call(this,l),postselectionChange:function(m){var p=m.added;if(p){var o=this.parent,n=this.items[p[0]].id;o.set("color",n);o.colorChanged(n);}}};}function G(l){return"#"+l.replace("#","");}function E(){var l=this.txtColor1,o=this.txtColor2,m=this.color,n=false,p=this.colorStyle;switch(p.items[p.selectedIndex].id){case N:m=G(l.value);break;case D:m=A;break;case W:m={or:this.gradientOrientation.getSelectedItems()[0].id,c1:G(l.value),c2:G(o.value)};n=true;break;}B.toggleClass(this.containerNode,"grad",n);this.set("color",m);}function L(l){this.set("activeColor",l);var m=this[l];T.forEach([1,2],function(o){var n=this[b+o];B.toggleClass(n.domNode,"on",n===m);},this);this.colorWheel.set("color",G(m.value));}function K(l,m,n,o){if(typeof n==="string"){if(n===A){n=h;}}else{if(!!n&&n.c1){n=n["c"+l];}else{n=h;}}n=U(n);return{scriptClass:"mstrmojo.TextBoxWithLabel",alias:b+l,cssDisplay:"block",label:m,autoCorrect:false,maxLength:6,size:6,value:n.replace("#",""),bindings:o,onfocus:function(){L.call(this.parent,this.alias);},onvalueChange:function(p){if(!/^[0-9a-fA-F]{0,6}$/.test(p.value)){this.value=p.valueWas;}else{if(this.value.length===6){var q=this.parent;q.colorWheel.set("color",G(this.value));E.call(q);}}}};}function H(){var o=O.call(this),n="this.parent.colorStyle.items[ this.parent.colorStyle.selectedIndex ].id",r=n+" === "+W,q=n+" !== "+D,v=(this.showNoFill&&o===A)?1:0,t=F.slice(0,this.showGradient?3:2),l=0,m=this.showGradient,u=!!o&&o.c1;if(!this.showNoFill){t.splice(1,1);}if(u){v=T.find(t,"id",W);l=o.or?0:1;}this.addChildren([{scriptClass:"mstrmojo.ui.Pulldown",alias:"colorStyle",selectedIndex:v,items:t,visible:(t.length!=1||(u&&!m)),onRender:function p(){if(!m&&u){this.selectedNode.innerHTML='<div class="mstrmojo-ui-Pulldown-Gradient" style="color:#C0C0C0">'+mstrmojo.desc(16164,"Gradient (Not supported)")+"</div>";}},onitemSelected:function(){E.call(this.parent);}},{scriptClass:"mstrmojo.ui.ButtonBar",alias:"gradientOrientation",items:[{n:mstrmojo.desc(2066,"Horizontal"),id:1,css:"h"},{n:mstrmojo.desc(2069,"Vertical"),id:0,css:"v"}],selectedIndex:l,bindings:{visible:r},postselectionChange:function(w){if(w.added){E.call(this.parent);}}},{scriptClass:"mstrmojo.Button",cssClass:"simpleButton",text:mstrmojo.desc(11658,"Swap"),bindings:{visible:r},onclick:function(){var z=this.parent,x=z.txtColor1,AA=z.txtColor2,w=x.value;x.set("value",AA.value);AA.set("value",w);E.call(z);}},K(1,mstrmojo.desc(12074,"Color HEX:"),o,{visible:q,label:n+" === "+W+' ? "'+mstrmojo.desc(12075,"Color 1 HEX:")+'" : "'+mstrmojo.desc(12074,"Color HEX:")+'";'}),K(2,mstrmojo.desc(12076,"Color 2 HEX:"),o,{visible:r}),{scriptClass:"mstrmojo.ui.editors.controls.ColorWheel",alias:"colorWheel",color:(!!o&&!!o.c1)?o.c1:(o||h),onColorPicked:function(w){var x=this.parent;x[x.activeColor].set("value",w.replace("#",""));},bindings:{visible:q}},a(mstrmojo.desc(1442,"Ok"),true,function(){var x=this.parent,w=x.color;if(!w.c1){V.addCustomColor(w);}x.colorChanged(w);}),a(mstrmojo.desc(2140,"Cancel"),false,function(){this.parent.colorCanceled();})]);L.call(this,b+"1");}function d(n){var p=this.sampleNode,o=p.offsetWidth-p.clientWidth,m=p.clientWidth,q=p.clientHeight,r=Math.sqrt(m*m+q*q)-o,l=Math.atan2(q,m)*(-180)/Math.PI+2;p.style.backgroundColor="#FFFFFF";n.display="block";n.top=p.offsetTop+P(q/2)+"px";n.left=p.offsetLeft+"px";n.width=P(r)+"px";n[mstrmojo.dom.CSS3_TRANSFORM]="rotate("+P(l)+"deg)";}function j(){var n=O.call(this),m=this.sampleNode.style;if(n){if(n.c1){var o=B.buildGradient(n.or,n.c1,n.c2);m[B.convertCssToCamelCase(o.n)]=o.v;}else{m.background=n;if(this.showNoFill&&this.noFillNode&&this.enabled){var l=this.noFillNode.style;if(A===n){d.call(this,l);}else{l.display="none";}}}}m.backgroundOrigin="border-box";}mstrmojo.ui.editors.controls.AdvancedColorPicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPicker",markupString:'<div id="{@id}" class="mstrmojo-ui-AdvColorPicker {@cssClass}" style="{@cssText}" mstrAttach:click><div class="acpToolbar"><div class="acpBtn acpSwatchBtn"></div><div class="acpBtn acpPaletteBtn"></div><div class="acpColor"></div><div class="slash"></div></div><div class="acpContent" ></div><div class="acpButtons" ></div></div>',markupSlots:{swatchBtnNode:function(){return this.domNode.firstChild.firstChild;},paletteBtnNode:function(){return this.domNode.firstChild.childNodes[1];},sampleNode:function(){return this.domNode.firstChild.childNodes[2];},noFillNode:function(){return this.domNode.firstChild.lastChild;},containerNode:function(){return this.domNode.firstChild.nextSibling;},buttonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onpickerModeChange:function M(){Y=this.pickerMode;this.renderContent();},oncolorChange:function c(){j.call(this);},onautoPreviewColorChange:function g(){j.call(this);}},color:"#000fff",showGradient:false,showNoFill:true,showAutomatic:false,autoPreviewColor:null,activeColor:b+"1",swatchBtnNode:null,paletteBtnNode:null,colorStyle:null,gradientOrientation:null,txtColor1:null,txtColor2:null,colorWheel:null,pickerMode:R,init:function f(l){this._super(l);this.pickerMode=Y;},renderContent:function I(){this.showPickerForCurrentMode();},showPickerForCurrentMode:function C(){var n=this;this.removeChildren();var o=Y===R;if(o){var m=V.getBasicColors();if(!this.showNoFill){m.shift();if(m[0]._renderIdx!==0){T.forEach(m,function(q,p){q._renderIdx=p;});}}if(this.showAutomatic&&this.color!==e){this.addChildren([{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4531,"Automatic"),cssClass:"AutomaticOption",onclick:function l(){n.set("color",e);n.colorChanged(e);}}]);}this.addChildren([mstrmojo.hash.copy({alias:"basicColors"},Q.call(n,m)),Q.call(n,(mstrApp&&mstrApp.getPreferredColors)?T.map(mstrApp.getPreferredColors(),function(p){return{n:p,id:p};}):[]),Q.call(n,V.getCustomColors())]);}else{H.call(this);}B.toggleClass(this.swatchBtnNode,"on",o);B.toggleClass(this.paletteBtnNode,"on",!o);this.buttonNode.style.display=o?"none":"block";},colorChanged:mstrmojo.emptyFn,colorCanceled:mstrmojo.emptyFn,onclick:function X(l){var m=l.getTarget(),n=this.pickerMode;if(m===this.swatchBtnNode){n=R;this.set("pickerMode",n);}else{if(m===this.paletteBtnNode){n=Z;this.set("pickerMode",n);}}}});mstrmojo.ui.editors.controls.AdvancedColorPicker.VAL_AUTOMATIC=e;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.expr","mstrmojo.Button","mstrmojo.ui._HasListTooltip","mstrmojo.ui.PopupWidget","mstrmojo.ui.Pulldown","mstrmojo.ui.CheckList");var E=mstrmojo.hash,L=mstrmojo.array,K=mstrmojo.dom,G=mstrmojo.Button.newWebButton,F=mstrmojo.expr.TP.DIM;function H(Q){var R=this.parent,S=this.list;if(Q){this.saveSelection();R.submitSelections();}else{S.selectedIndices=E.copy(R.selectedIndices);}this.close();}mstrmojo.ui.PulldownCheckList=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PulldownCheckList",visible:false,itemCssText:"",onOpen:function C(){var Q=this.list;Q.updateScrollbars();},onClose:function N(){this.list.refresh();},adjustCheckListForPopupOverflow:function M(S){var U=this.domNode,T,R,X=this.list,W=X&&(X.scrollNode||X.scrollboxNode);if(S&&W){T=K.position(U);R=T.y;if(R+T.h>K.position(document.body).h){var Q=U.offsetHeight,V=W&&W.offsetHeight;W.style.maxHeight=K.getMaxScrollHeight()-(Q-V)+"px";X.updateScrollbars();}}},getItemFromTarget:function O(Q){return this.list.getItemFromTarget(Q);},getItemNodeFromTarget:function B(Q){return this.list.getItemNodeFromTarget(Q);},adjustCornersForPopupOverflow:function J(){var Q=this._super();this.adjustCheckListForPopupOverflow(Q);return Q;},saveSelection:function D(){this.parent.set("selectedIndices",E.copy(this.list.selectedIndices));},postselectionChange:function I(Z){var Y=this.list,W=Y.items,X=Z.added||[],U=Z.removed||[],T=Y.selectedIndices,Q=this.parent.allIdx,V=W[Q],S=X.length+U.length,R=false;if(V&&V.t===F&&S===1){if(Q===X[0]){W.forEach(function(b,a){if(!T[a]){R=true;T[a]=L.indexOf(U,a)===-1;}});}else{if(Q===U[0]){T={};L.forEach(X,function(a){T[a]=true;});R=true;}else{if(T[Q]){delete T[Q];R=true;}}}}if(R){Y.set("selectedIndices",E.copy(T));Y.refresh();}},onitemsChange:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.ui.CheckList",alias:"list",postBuildRendering:function A(){this.icnCssText=this.parent.itemCssText||this.icnCssText;this.parent.adjustCheckListForPopupOverflow();},postselectionChange:function I(Q){this.parent.postselectionChange(Q);},onitemsChange:function P(Q){this.parent.onitemsChange(Q);}},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Buttons",children:[G(mstrmojo.desc(1442,"Ok"),function(){H.call(this.parent.parent,true);},true,{cssDisplay:"inline-block"}),G(mstrmojo.desc(2140,"Cancel"),function(){H.call(this.parent.parent,false);},false,{cssDisplay:"inline-block"})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Obj","mstrmojo.ui.ButtonBar","mstrmojo.ui.Checkbox","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ThreeColumnContainer");var D=mstrmojo.hash;mstrmojo.vi.models.editors.ControlsViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.editors.ControlsViewFactory",getEditorGroup:function B(H,I){return new mstrmojo.vi.ui.editors.EditorGroup(D.copy(I,{children:H}));},getLabelAndControl:function G(J,K,M,O,L,N){var P=new mstrmojo.Label({text:J,setDimensions:function(S,Q){var R=this.domNode;if(R){R.style.width=Q;}}}),I=P,H=K;if(L){I=K;H=P;}I.slot="col1Node";H.slot="col2Node";return new mstrmojo.ui.editors.controls.TwoColumnContainer(D.copy(N,{col1Width:M||"40%",col2Width:O||"60%",children:[I,H],getLabel:function(){return P;},getCtrl:function(){return this.children.filter(function(Q){return Q!==P;})[0];}}));},getLabelAndControlWithMsg:function C(L,M,P,O,S,H,N,Q){var R=new mstrmojo.Label({text:L,setDimensions:function(W,U){var V=this.domNode;if(V){V.style.width=U;}}}),T=new mstrmojo.Label({text:P?mstrmojo.desc(14548,"Changes will be applied after Desktop is restarted."):"",setDimensions:function(W,U){var V=this.domNode;if(V){V.style.width=U;}},setText:function(U){this.text=U;}}),K=R,J=M,I=T;if(N){K=M;J=R;}K.slot="col1Node";J.slot="col2Node";I.slot="col3Node";return new mstrmojo.ui.editors.controls.ThreeColumnContainer(D.copy(Q,{col1Width:O||"30%",col2Width:S||"30%",col3Width:H||"40%",children:[K,J,I],getLabel:function(){return R;},getCtrl:function(){return this.children.filter(function(U){return U!==R;})[0];},getMessage:function(){return T;}}));},getPulldown:function F(I,L,H,K,J){return mstrmojo.ui.Pulldown.newPulldown(I,function(M,N){L.call(this,M.v,N&&N.v);},H,K,J);},getCheckboxAndLabel:function A(N,L,K){var J=new mstrmojo.ui.Checkbox({checked:N,oncheckedChange:function(){var O=this.checked;K.call(this,O,!O);}});var M=this.getLabelAndControl(L,J,"14px","100%",true);M.cssClass="checkLabel";var I=M.getLabel();I.onclick=function H(){J.onclick();};I.cssDisplay="inline-block";return M;},getButtonBar:function E(J,H,L,K){K=K||{};K.items=J;var I=new mstrmojo.ui.ButtonBar(K);I.singleSelect(H);I.postselectionChange=function(M){var N=this.items,O=N[M.removed&&M.removed[0]];L.call(this,N[M.added[0]],O);};return I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.array","mstrmojo.threshold.ThresholdModel");var G=mstrmojo.array;var I=[{n:mstrmojo.desc(5999,"Replace Text"),v:3},{n:mstrmojo.desc(6000,"Quick Symbol"),v:10},{n:mstrmojo.desc(11898,"Replace With Image"),v:4}];var F=mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL;function B(N,O,M){this.parent.raiseFormatValueChange(N,O,M);}function E(O){var N=this.parent.model,M=N.threshold;this.replaceType.set("enabled",O);this.replaceText.set("enabled",O);this.replaceSymbol.set("enabled",O);if(!O){delete M[N.getReplaceTypeName()];delete M[N.getReplaceTextName()];}}mstrmojo.threshold.TextGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.threshold.TextGroup",nameRow:undefined,replaceRow:undefined,replaceType:undefined,replaceText:undefined,replaceSymbol:undefined,preBuildRendering:function K(){this._sync=true;if(this._super){this._super();}},postBuildRendering:function A(){if(this._super){this._super();}this._sync=false;},children:[{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"replaceRow",col1Width:"10%",col2Width:"90%",replaceChk:undefined,children:[{scriptClass:"mstrmojo.ui.Checkbox",slot:"col1Node",alias:"replaceChk",oncheckedChange:function D(){E.call(this.parent.parent,this.checked);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:mstrmojo.desc(11888,"Enable Data Replace")}]},{scriptClass:"mstrmojo.ui.Pulldown",alias:"replaceType",selectedIndex:0,enabled:false,items:I,onenabledChange:function H(){if(this.enabled){B.call(this,"rtp",this.items[this.selectedIndex].v);}},postselectedIndexChange:function(O){var S=O.value,P=O.valueWas,N=this.parent,M=N.replaceText,R=N.replaceSymbol;if(S!==P){var Q=S===1;M.set("visible",!Q);M.set("hint",S===2?mstrmojo.desc(11889,"Image URL"):"");R.set("visible",Q);B.call(this,"rtp",this.items[S].v);}}},{scriptClass:"mstrmojo.TextBox",alias:"replaceText",enabled:false,onenabledChange:function H(){if(this.enabled){B.call(this,"rtxt",this.value);}},onvalueChange:function J(){B.call(this,"rtxt",this.value);var M=this.parent,N=M.replaceType;if(!M.parent.model.threshold.rtp){B.call(this,"rtp",N.items[N.selectedIndex]);}}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"replaceSymbol",selectedIndex:0,isHostedWithin:false,enabled:false,visible:false,items:F,allowHTML:true,getPopupListConfig:function C(){var M=mstrmojo.ui.Pulldown.prototype.getPopupListConfig();M.getItemMarkup=function N(){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@n}</{@tag}>';};return M;},onenabledChange:function H(){if(this.enabled){B.call(this,"rtxt",this.items[this.selectedIndex].v);}},postselectedIndexChange:function(M){var O=M.value,N=M.valueWas;if(O!==N){B.call(this,"rtxt",this.items[O].v);}}}],setFormatSource:function L(M){var N=this,O=N.parent.model;this.syncControls(function(){var P=M[O.getReplaceTextName()],S=M[O.getReplaceTypeName()];N.replaceRow.replaceChk.set("checked",!!P);var Q=G.find(I,"v",S);N.replaceType.set("selectedIndex",Q===-1?0:Q);if(S!==10){N.replaceText.set("value",P||"");N.replaceSymbol.set("selectedIndex",0);}else{var R=Math.max(G.find(F,"v",P),0);N.replaceSymbol.set("selectedIndex",R);N.replaceText.set("value","");}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.css");var C,D=mstrmojo.css;var J=mstrmojo.declare(mstrmojo.ui.PopupList,null,{getItemMarkup:function G(K){if(!C){C=this._super(K).replace(">{@en@n}<","><div>{@en@n}</div><");}return C;},getItemProps:function F(M,K){var L=this._super(M,K);L.addCls("bst"+K);if(K){L.title=M.n;L.n="";}else{L.tt="";}return L;}});mstrmojo.ui.editors.controls.LineStyleButton=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",itemValueField:"id",showThickOption:true,markupMethods:{onenabledChange:function E(){D.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function H(L){this._super(L);var K=["mstrmojo-ui-LineStyle"];if(!this.showThickOption){K.push("no-thick");}D.addWidgetCssClass(this,K);},getListCfg:function I(){return new J({selectionPolicy:"reselect",items:[{n:mstrmojo.desc(2258,"None"),id:"none"},{n:mstrmojo.desc(2259,"Dashed"),id:"1pt dashed"},{n:mstrmojo.desc(2260,"Dotted"),id:"1pt dotted"},{n:mstrmojo.desc(2262,"Thin"),id:"1pt solid"},{n:mstrmojo.desc(2264,"Thick"),id:"2pt solid"}]});},postBuildRendering:function A(){this.borderStyleNode=this.previewNode.appendChild(document.createElement("div"));return this._super();},updatePreview:function B(){var N=this.borderStyleNode,L=this.selectedValue.split(" "),K=this.selectedValue==="conflict";D.toggleClass(this.previewNode,"conflict",K);if(N&&!K){var M=N.style;if(L.length===1){M.borderTopStyle=L[0];if(L[0]==="none"){M.position="static";N.innerHTML=mstrmojo.desc(2258,"None");N.classList.add("ellipsis");}}else{M.borderTopWidth=L[0];M.borderTopStyle=L[1];M.position="";N.innerHTML="";}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.EditableLabel");var A=mstrmojo.css,E=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",markupMethods:{onenabledChange:function D(){this.txtLabel.set("enabled",this.enabled);this.txtLabel.set("editOnClick",this.enabled);A.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");},updatePreview:function C(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},validateTextInput:function(F){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:E.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.string","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList","mstrmojo.DI.DIConstants");var Q=mstrmojo.hash,Y=mstrmojo.func,A=mstrmojo.string,M=mstrmojo.meta.TP,G="5CECE58CC1D549F890EB61C4DB2156A3",V="E0CCB9CF22104A489CBE78D974AFD19E",S=mstrmojo.chart.model.enums.EnumDSSObjectType,L=mstrmojo.array,E=mstrmojo.dom,P=mstrmojo.DI.DIConstants,a=function(j,k,d){var g=j.scrollableIncFetch,f=g?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",h={scriptClass:f,items:k.items,multiSelect:d};if(g){h.browseConfig={blockBegin:k.bb,blockCount:k.bc,totalSize:k.sz,folderLinksContextId:j.folderLinksContextId,rootFolderID:k.did,browsableTypes:j.browsableTypes,browsableViewMedias:j.browsableViewMedias,dataProvider:j.dataProvider};h.onwaitingChange=function(){if(j.booklet){j.booklet.set("waiting",this.waiting);}};}var e=mstrmojo.insert(h);e.render();return e;},B=function(f,g,d){var e=mstrmojo.ObjectBrowser.widgetHandler||a;return e(f,g,d);},O={success:function(f){var g=this.ob,e=f.items,h=g.pageCache[g.currentPage],d=h._w;h.items=e;d.set("items",e);this.ob=null;this.item=null;window.clearTimeout(g._btm);g.booklet.set("waiting",false);if(g.scrollableIncFetch&&d.scrollNode){d.initScroll();d.updateScrollbars();}},failure:function(d){window.alert(d.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},U=function(j,h,f){var g=f?-1:1,e=j.pageCache.length,k;for(k=j.currentPage+g;k<e&&k>=0;k+=g){var d=j.pageCache[k];if(d._k===h.k){return{steps:k-j.currentPage,cache:d};}}return null;},D=function(h,g,f,j){var k=h.currentPage+1,e=h.pageCache.length,d;for(d=k;d<e;d++){h.pageCache[d]._w.destroy();delete h.pageCache[d].items;}h.pageCache=h.pageCache.slice(0,k);j._w=f;j._k=g.k;h.pageCache[k]=j;h.cacheChange();},I=function(e){var d=mstrmojo.hash.walk("anc.items.0.items",e);this.set("canGoUp",!(!e.pf||!d));},J=function(h,g,j,f,e){delete h._btm;var d;if(!f){d=B(h,j,h.multiSelect);d.attachEventListener("change",h.id,"navigate");if(h.useDblSelect||h.useBothSglDblSelect){d.attachEventListener("dblclick",h.id,"dblselect");}}else{d=j._w;}h.obList=d;h.booklet.turn(d,e>0);window.setTimeout(function(){h.onBrowsing=false;},300);if(!f){D(h,g,d,j);}h.set("currentFolder",j);h.set("currentPage",h.currentPage+e);h.updateUpButton(j);if(h.scrollableIncFetch&&d.scrollNode){d.initScroll();d.updateScrollbars();}},R=function(f,e,d){var g=U(f,e,false);g=g||U(f,e,true);if(!g){window.clearTimeout(f._btm);f._btm=window.setTimeout(function(){f.booklet.set("waiting",true);},300);d.ob=f;d.item=e;f.getDataProvider().fetchFolderContents(f,e,d);}else{J(f,e,g.cache,true,g.steps);}},C=function(e,f,g,d){R(e,{fid:e.pageCache[e.currentPage].did,blockBegin:f,searchPattern:g,recursive:d},O);},K={success:function(e){var f=this.ob;if(f){window.clearTimeout(f._btm);if(!e.items){e.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var d=function h(j){var m=j.length,k;for(k=0;k<m;k++){var l=j[k];if(l.did===G||l.did===V){l.n=(l.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(l.items){d(l.items);}}};if(e.did===G||e.did===V){e.n=(e.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(e.anc&&e.anc.items){d(e.anc.items);}}if(e&&e.items&&f.browsableViewMedias){var g={};L.forEach(f.browsableViewMedias.split(","),function(j){g[parseInt(j,10)]=true;});e.items=L.filter(e.items,function(j){return(j.t!==S.DssTypeDocumentDefinition)||g[j.dvm];});}if(e&&e.items&&mstrApp&&mstrApp.isSingleTier){e.items=L.filter(e.items,function(j){return(j.st!==772);});}if(f.isImportFromCube){e.items=L.filter(e.items,function(j){return(j.et!==P.DSSExType.DSSEXDISPARK);});}if(e.did&&this.item.k!==e.did){this.item.k=e.did;}J(f,this.item,e,false,1);this.ob=null;this.item=null;}},failure:function(d){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(d);}else{if(d.getResponseHeader){mstrmojo.alert(d.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(d.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},c=function(f){var e=f.pageCache.length,d;for(d=0;d<e;d++){f.pageCache[d]._w.destroy();}f.pageCache=[];f.currentPage=-1;f.cacheChange();},N=function(g,f,h){var d=g.onBrowseFolder;if(d){d[0][d[1]](f);}if(f&&parseInt(f.acg,10)===33){return ;}var e={};if(f){e.k=f.did;e.fid=f.did;}else{if(g.rootFolderID){e.k=g.rootFolderID;e.fid=g.rootFolderID;}else{if(g.rootFolderType){e.k=g.rootFolderType;e.fty=g.rootFolderType;}else{if(g.folderLinksContextId){e.k=g.folderLinksContextId;}}}}R(g,e,Y.wrapMethods(h,Q.copy(K)));},X=function(j,d,f){if(!f){return d;}var g=j.showCompletePath,l=d[0],h,e;while(l){var k;for(k=f.length-1;k>=0;k--){if(l.did===f[k].did){f.splice(k,1);l._isSc=true;}}e=l;l._open=true;l=l.items;l=l&&l[0];if(!l){e.lastLeaf=true;}}if(!g){l=d[0];while(l){if(l._isSc){d[0]=l;break;}l=l.items;l=l&&l[0];}}return d.concat(f);},W=function(e,d,f){e._naviInfo=X(e,d,f);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",alias:"popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var d=this.opener.parent.parent,g=this.tree,f=d._naviInfo,e=this.parent.parent.parent.extraDDItems;if(g.items!==f){g._pup=this;this.ob=d;if(e){L.forEach(e,function(h){h.isExtra=true;});f=f.concat(e);}g.set("items",f);}if(d.getRecents&&!mstrApp.isSingleTier){d.getRecents(this);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(h,d,e){var g=mstrmojo.WidgetTree.prototype.itemFunction(h,d,e);if(h.isExtra){if(h.cssClass){g.cssClass=h.cssClass;}g.onmousedown=h.onmousedown||mstrmojo.emptyFn;return g;}if(h._open){g.state=1;}g._ll=!!h.lastLeaf;g._pup=e._pup;g.onmousedown=function(j){var k=mstrmojo.dom.eventTarget(j.hWin,j.e),l=this._pup;if(k===this.domNode||k===this.textNode){if(!this._ll){N(l.ob,this.data);}l.close();}};g.markupMethods=Q.copy(g.markupMethods);g.markupMethods.onstateChange=function(){var j=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[j]||"closed");this.itemsContainerNode.style.display=(j===1)?"block":"none";};g.useRichTooltip=true;var f=g.postBuildRendering;g.postBuildRendering=function(){if(f){f.call(g);}if(g.textNode.parentNode.clientWidth){g.textNode.style.width=(g.textNode.parentNode.clientWidth-20)+"px";}};g.premouseover=function(l){if(this.useRichTooltip){var k=this.textNode;if(k.clientWidth<k.scrollWidth){var j=E.position(k);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:A.encodeHtmlString(this.data[this.itemDisplayField]),top:j.y-2,left:j.x+j.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(l.hWin,l.e);}return true;};return g;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(d,e){this.parent.parent.getDataProvider().serverRequest(d,e);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},postBuildRendering:function Z(){if(this._super){this._super();}this.inputNode.setAttribute("placeholder"," "+mstrmojo.desc(12666,"Search..."));},onUpdateSearchParams:function H(f){var e=this.parent.parent,d=e.sId;if(d){f.sessionState=d;}if(e.useOldSearch){f.quickSearch=0;f.nameWildcards=1;f.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(e){var g=parseInt(this.height,10),d=this.np>1,f={target:this.domNode,props:{height:{start:(d?0:g),stop:(d?g:0),suffix:"px"}},onEnd:function(){if(d){this.target.style.overflow="visible";}}},j=new mstrmojo.fx.AnimateProp(f);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);j.play();},onifsChange:function(d){var e=this.np;mstrmojo.hash.copy(d.value,this);if(this.np>1){this.children=null;this.refresh();}if((e<=1&&this.np>1)||(e>1&&this.np<=1)||(e===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function b(){c(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var f=this.searchUpBar;if(f&&f.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var d=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){d.attachEventListener("ifsChange",this.id,function(g){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",g.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var e=this.obIncFetch;e.attachEventListener("fetch",this.id,function(g){e.cp=g.v;e.children=null;e.refresh();C(this,(g.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(e){var f=e.value,d=this.pageCache[this.currentPage]._w;if(!f||f.length===0){f=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var g={};L.forEach(this.browsableViewMedias.split(","),function(h){g[parseInt(h,10)]=true;});f=L.filter(f,function(h){return(h.t!==S.DssTypeDocumentDefinition)||g[h.dvm];});}}d.set("items",f);},navigate:function(l){var d=l.src,n=d.selectedItem,f=this.multiSelect,j=f&&d.getSelectedItems(),k=this,e=l.added&&l.added.length,h=l.removed&&l.removed.length,g=f?j.length===1&&(!h||e):!!n;if(g&&n.did==="empty"){return ;}if(g&&parseInt(n[M],10)===8){if(!this.onBrowsing){this.onBrowsing=true;N(this,n);}}else{if((n&&(!this.useDblSelect||this.useBothSglDblSelect))||j){this.select(f?j:n);}}},browseFolder:function(d,e){N(this,{did:d,n:e});},onFishEyeChange:function(d){this.goToPage(d.value);},goToPage:function(d){if(d<this.pageCache.length&&d!==this.currentPage){var f=d>this.currentPage,e=this.pageCache[d];this.set("currentPage",d);this.booklet.turn(e._w,f);this.set("currentFolder",e);I.call(this,e);}},oncurrentPageChange:function(d){if(this.fishEye){this.fishEye.setSelectedIndex(d.value);}var e=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(e.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",e.items||[]);this.obSearchBox.set("totalSize",e.sz);this.obSearchBox.set("rootID",e.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(e.sz/e.bc)+((e.sz%e.bc>0)?1:0),cp:Math.floor(e.bb/e.bc)+((e.bb%e.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(e,d){Q.copy(e,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}c(this);N(this,undefined,d);},close:function(){var e=this.ctx||this,d=e.onCloseCB;if(d){d[0][d[1]]();}e.set("visible",false);},select:function(e){var d=this.onSelectCB;if(d){d[0][d[1]](e);}if(this.closeOnSelect){this.close();}},dblselect:function T(e){var f=e&&e.src.selectedItem;if(!f||(f&&f.did==="empty")||f[M]===8){return ;}if(this.useBothSglDblSelect){var d=this.onDblSelectCB;if(d){d[0][d[1]](f);}if(this.closeOnSelect){this.close();}}else{this.select(f);}},goUp:function(){if(this.canGoUp){N(this,{did:this.currentFolder.pf});}},updateUpButton:function F(d){I.call(this,d);},oncurrentFolderChange:function(d){var e=d.value;W(this,e.anc.items,e.sc);},refreshContent:function(d){C(this,d);},onError:null,onheightChange:function(){var d=["titleBar","fishEye","searchUpBar","obIncFetch"],f=0,e;for(e in d){f+=parseInt(this[d[e]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-f+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetTree","mstrmojo.expr","mstrmojo.mstr.EnumNodeProperties","mstrmojo.AndOrNode","mstrmojo.ConditionNode");var H=mstrmojo.expr,B=mstrmojo.mstr.EnumNodeProperties,C=H.ET;function A(I){var K=I&&I.src,L=K&&K.data,J=L&&L.et;return(J in H.ETs);}function E(I){return I&&I.et===C.ANDOR&&!(I.node&B.CONDITION);}mstrmojo.FilterExpr=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.FilterExpr",allowDrop:A,renderOnScroll:false,itemIdField:null,nodeClassMap:{14:mstrmojo.AndOrNode,"*":mstrmojo.ConditionNode},onBlankClick:function(I){this.clearTreeSelect();},onnodemousedown:function(J){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),L=J.src,I=L.listMapper.findIndex(L,L.itemsContainerNode,K),M=I>=0?L.ctxtBuilder.itemWidgets[I]:null;if(!M||(M.isSelectableArea&&!M.isSelectableArea(K))){this.onBlankClick(J);}},getItemIdentityProp:function(I){return I.et;},itemFunction:function(N,K,O){var J=O.tree,L=J.getItemConfig(N,K,O),M=J.nodeClassMap,I=M[J.getItemIdentityProp(N)]||M["*"];return I&&(new I(L));},getItemConfig:function(L,I,M){var J=E(L),K=M.tree||M;return{data:L,tree:K,parent:M,bindings:{prefixedAndOrEditable:"this.parent.editable"},itemFunction:(J)?M.itemFunction:null,draggable:J?K.draggable:false,dropZone:J?K.dropZone:false,allowDrop:J&&K.dropZone?K.allowDrop:null,allowCopy:J?K.allowCopy:false,editable:K.isEditable?K.isEditable(L):K.editable,makeObservable:J&&M.makeObservable,onclick:K.onnodeclick,onadd:K.onnodeadd,onremove:K.onnoderemove};},getDragData:function(I){var K=this._super(I);if(K&&!K.html){var J=K.et&&H.ET2TGT[K.et];K.html=J?K[J]&&K[J].n||"":K.n||"";}return K;},newCondition:function G(M){M=M||{et:C.AQ};var L=this.selectionParentNode,I;L=(L&&L.hasRendered)?L:this;if(L!==this){I=L.add([M]);}else{var K=this.addCondition([M],null,true);I=K.index;L=K.widget;}var J={widget:L,index:I,data:M};if(this.onNew){this.onNew(J);}return J;},addCondition:function F(K,M){var N=this.items,J=N&&N.length,P=K&&K.length;if(!P){return null;}var L,I;if(J&&E(N[0])){L=this.ctxtBuilder.itemWidgets[0];I=L.add(K,null);}else{if(!J&&(P===1)){L=this;I=0;this.add(K,0);}else{if(J){var O=N[0];this.remove(O);K.unshift(O);}this.add([{et:C.ANDOR,fn:H.FN.AND,nds:K}],0);L=this.ctxtBuilder.itemWidgets[0];I=J?1:0;}}return{widget:L,index:I};},addSingleCondition:function D(J,I){var K=this.addCondition([J],I);return K.widget.ctxtBuilder.itemWidgets[K.index];},ondrop:function(L){if(this._super){this._super(L);}var J=this.items,I=J&&J.length,K=J.concat();if(I>1){if(J.remove){J.remove(0,J.length);}else{this.set("items",null);}this.add([{et:C.ANDOR,fn:H.FN.AND,nds:K}],0);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.WidgetTree","mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowserSelector");mstrmojo.TreeBrowserEnum={};var I=mstrmojo.TreeBrowserEnum;I.BRANCH_POLICY_TOGGLE="toggle";I.BRANCH_POLICY_SELECT="select";mstrmojo.TreeBrowser=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.TreeBrowser",cssClass:"mstrmojo-TreeBrowser",browserNodeClass:mstrmojo.TreeBrowserNode,blockCount:30,noCheckBox:false,selectionAcrossBranch:true,branchClickPolicy:I.BRANCH_POLICY_TOGGLE,contentRetrieved:false,listSelector:mstrmojo.TreeBrowserSelector,handleNodeClicked:function(J){},getContentThroughTaskCall:function H(K,J){},isBranch:function F(J){},item2textCss:function C(J){return{"-1":"failed","-2":"loading","-3":"next","-4":"prev"}[J.st]||"";},failItemCreaterFunc:function(){return{n:"Loading Failed!",did:"-1",tp:"-1",st:"-1"};},loadingItemCreaterFunc:function(){return{n:mstrmojo.desc(5674,"Loading..."),did:"-2",tp:"-2",st:"-2"};},nextItemCreaterFunc:function(J){return{n:mstrmojo.desc(4507,"Next ##  item(s)...").replace("##",J?Math.min(J,this.blockCount):this.blockCount),did:"-3",tp:"-3",st:"-3"};},prevItemCreaterFunc:function(){return{n:mstrmojo.desc(4508,"Previous ##  item(s)...").replace("##",this.blockCount),did:"-4",tp:"-4",st:"-4"};},updateTreeContent:function(K,M){K.contentRetrieved=true;var L=M[K.itemChildrenField]||[],J=K.tree||K,O=M.bc,N=M.sz,P=M.bb;if(O!==-1){if(P+O<=N){L.push(J.nextItemCreaterFunc(N-P-O+1));}if((P-O)>-1){L.unshift(J.prevItemCreaterFunc());}}K.blockBegin=P;J.initializing=true;K.clearSelect(false);K.set("items",L);K.setSelectedItems(J.getTotalSelections(),true);J.initializing=false;if(J.onNodeExpand){J.onNodeExpand(K);}},getContent:function(K,O){var L=(K===this),J=this,P=function(Q){if(L){mstrmojo.css.removeClass(J.domNode,["loading"]);}J.updateTreeContent(K,Q);},M=function(Q){K.contentRetrieved=true;K.set("items",[J.failItemCreaterFunc()]);},N={success:P,failure:M};if(L){mstrmojo.css.addClass(J.domNode,["loading"]);}this.getContentThroughTaskCall({isRoot:L,data:K.data,blockBegin:L?0:(O||K.blockBegin),blockCount:J.blockCount},N);},postBuildRendering:function A(){this._super();if(!this.contentRetrieved){var J=this;setTimeout(function(){J.getContent(J);},0);}},itemFunction:function G(N,K,L){var J=L.tree||L,M=new J.browserNodeClass({data:N,state:0,parent:L,tree:J,multiSelect:L.multiSelect,text:N[L.itemDisplayField],textCssClass:J.item2textCss(N),items:N[L.itemChildrenField],itemIdField:L.itemIdField,itemDisplayField:L.itemDisplayField,itemIconField:L.itemIconField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction,listSelector:L.listSelector});return M;},clearTreeSelect:function E(){if(!this.selectionAcrossBranch){this._super();}else{var L=this._selectionParentNode,J=L&&L.length,K;for(K=0;K<J;K++){L[K].clearSelect();}this._selectionParentNode=null;this._totalSelections=null;}},onnodechange:function D(T){if(this.initializing){return ;}if(!this.selectionAcrossBranch){this._super(T);}else{this._totalSelections=this._totalSelections||[];this._selectionParentNode=this._selectionParentNode||[];var R=this._totalSelections,J=this._selectionParentNode,S=T.added,P=T.removed,Q=[],L=[],K=T.src,N,M,O,U;J.push(K);for(N=0,O=P&&P.length;N<O;N++){L.push(K.items[P[N]]);}mstrmojo.array.removeItems(R,"did",L);for(M=0,U=S&&S.length;M<U;M++){Q.push(K.items[S[M]]);}this._totalSelections=R.concat(Q);}},getTotalSelections:function B(){if(this.selectionAcrossBranch){return this._totalSelections||[];}var J=this.selectionParentNode;return J&&J.getSelectedItems();}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.expr","mstrmojo.dom","mstrmojo.array","mstrmojo.css");var L=mstrmojo.expr,N=mstrmojo.dom,C=mstrmojo.array,A=mstrmojo.css,F=mstrmojo.fe._IsRelationTreeNode.createSetHtml;var M=function(){var T="noRelationOperator",P=this[T],R=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],S=mstrmojo.array.filter(R,function(U){return U&&U[T]!==P&&U.data.et!==L.ET.RLS;}),O=S.length;for(var Q=0;Q<O;Q++){S[Q].set(T,P);}};mstrmojo.fe.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.AndOrNode",markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',getPrefixAndOrToolsMarkup:function(){return(F+this._super());},markupSlots:mstrmojo.hash.copy({createSetNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupSlots)),markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){A.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupMethods)),removeSet:function G(P){var O=P.childIndex(),Q=P.data,R=[Q];if(O>=0){this.remove(O,true);if(Q.nds&&Q.nds.length>0){R=Q.nds;if(Q.not){R[0].not=true;}}else{delete Q.dmy;delete Q.relation;delete Q.applySubExpr;delete Q.relation;delete Q.useSchema;delete Q.dmt;}this.add(R,O);this.consolidate(false);}},createSet:function E(Q,O){var P=this._ndsToMove(this,Q);if(!P){return ;}this.remove(P.idxs,true);var U=P.nds,T;if(U){if(U.length>1){var S={et:L.ET.ANDOR,nds:U};S.fn=this.data.fn;U=[S];T=S.nds[0].not;}else{var V=U[0];if(V&&V.not&&V.et===L.ET.ANDOR){T=V.not;delete V.not;}}}if(O&&O.rq){var R;if(O.isMetric){R=O.cq;mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],O.rq,R);}else{R=O.rq;R.nds=U;if(T){R.not=T;}}this.add([R],P.idxs[0]);}this.consolidate(false);},preclick:function H(O){var R=null,Q=N.eventTarget(O.hWin,O.e),P=this._super(O);if(N.contains(this.createSetNode,Q,true)&&!this.noRelationOperator){R="createSetOpt";}O.part=R||O.part;return P;},preadd:function I(O){if(this._super){this._super(O);}this.updateRelationOperator();},preremove:function K(O){if(this._super){this._super(O);}this.updateRelationOperator();},consolidate:function B(){this._super();this.updateRelationOperator();},postBuildRendering:function J(){var O=this._super();this.updateRelationOperator();return O;},updateRelationOperator:function D(){var O=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],P=!!C.filterOne(O,function(R){return R&&(R.data.et===L.ET.RLS||(R.data.et===L.ET.ANDOR&&R.noRelationOperator));}),Q=this.parent;this.set("noRelationOperator",P);M.call(this);if(Q&&Q.hasRendered&&Q.updateRelationOperator){Q.updateRelationOperator();}},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode");mstrmojo.threshold.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,null,{scriptClass:"mstrmojo.threshold.AndOrNode",cssClass:"adv-threshold",avatarCssCls:"mstrmojo-thresholdRow",onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);},consolidate:function A(){if(this.parent!==this.tree||this.itemCnt===0){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.num","mstrmojo._HasOwnAvatar","mstrmojo.XtabBase","mstrmojo.models.template.DataInterface");var X=mstrmojo.array,D=mstrmojo.dom,Q=mstrmojo.num,V=mstrConfig,I="px",B="xrsz",Y="t",M=3,R=mstrmojo.XtabBase.EnumLockedHeaders,U=R.ROW,b=R.BOTH;function J(){var c=this.gridData.gts;return c.row.concat(c.col);}function N(){var u=this.gridData,g=this.lockHeadersCase,f=u.gts,l=u.ghs,c=l.rhs||[],q=l.chs||[],p=c.cws||[],v=(f.cws||[]).concat(q.cws||[]),o=u.gvs||[],m=p.concat(o.cws||[]),t=this.zone.domNode.getElementsByTagName("tr"),r=t&&t[t.length-1],h=false,n=this.isOutlineMode;if(r){var d=r.getElementsByTagName("td")[0];u.xrh=(d&&d.offsetHeight)||0;}h=X.some(p,function(w){return w.w==="";});if(u.afw||u.afc||h){var k=this.rszmap;if(window.neeHandlingForSvgImgs){neeHandlingForSvgImgs(this.zone.domNode);}var e=Math.max(v.length,m.length);X.forEach(t,function(w){var z=w.childNodes;if(z.length===e||n){var x=bottomIndex=0;X.forEach(w.getElementsByTagName("td"),function(AE,AC){var AD=D.position(AE).w;var AB=parseInt(AE.colSpan,10),AF=AD/AB;if(v[x]&&AE.offsetParent!==null){if(!AE.colSpan||AE.colSpan===1){v[x++].w=AD+I;}else{for(var AA=0;AA<AB;AA++){if(!v[x]){v[x]={};}v[x].w=AF+I;x=x+1;}}}if(m[bottomIndex]&&AE.offsetParent!==null){if(!AE.colSpan||AE.colSpan===1){m[bottomIndex++].w=AD+I;}else{for(var AA=0;AA<AB;AA++){if(!m[bottomIndex]){m[bottomIndex]={};}m[bottomIndex].w=AF+I;bottomIndex=bottomIndex+1;}}}});return false;}});}if(m.length!==v.length){var j=J.call(this);X.forEach(j,function(AB,w){var x=AB.fs,AC=(x&&x.length)||0;if(AC>1){var z=v[w],AA;for(AA=0;AA<AC-1;AA++){v.splice(w+AA+1,0,z);}}});if(m.length>v.length){v.push(m[m.length-1]);}}return{top:v,bottom:m};}function S(){var l=this.gridData,e=this.isOutlineMode,f=e?2:0;if(!l.gts.show&&e&&mstrApp.isExpress){return ;}var k=this.rszmap=[],j=0,g=0,d=l.twm=N.call(this),n=d.bottom,o=new mstrmojo.models.template.DataInterface(l),c=o.getColumnHeaderData(true),m=c.length;var h=0;X.forEach(n,function(r,p){if(p>=m){return false;}var q=parseInt(r.w,10);if(isNaN(q)){return false;}if(e&&c&&c[p]&&c[p+1]&&c[p].id===c[p+1].id&&!c[p]._ridx){h=h+q;}else{h=h+q;j+=h;g+=h;if(p===m-1){j=j-1-f;g=g-1-f;}k.push({left:j,offsetLeft:g});h=0;}});X.forEach(k,function(x,p){var t=k[p+1],r=(t&&t.left),q=(r-x.left),w=[this.zone.domNode],u=this.getColClonedZone&&this.getColClonedZone();if(u){w.push(u);}if(!t||(q>(M*2))){X.forEach(w,function v(AA){var AC=document.createElement("div"),z=AC.style,AB=this;AC.setAttribute("idx",String(p));AC.setAttribute(Y,B);AC.className=B+((p>0&&k[p-1].skipped)?" zero":"");z.left=isNaN(x.offsetLeft)?"":((x.offsetLeft-M)+I);AA.appendChild(AC);AC.ondblclick=function(AD){AB.onHandleDblClick(AD);};},this);}else{x.skipped=true;}},this);}function Z(e){if(!e){return ;}var c=e.getElementsByClassName(B),d=c.length-1;for(;d>-1;d--){e.removeChild(c[d]);}}function H(f,e){var c=f.getElementsByClassName(B),d=0;for(d=0;d<c.length;d++){e.appendChild(c[d].cloneNode());}}mstrmojo.rw.xtab._XtabColResize=mstrmojo.provide("mstrmojo.rw.xtab._XtabColResize",{_mixinName:"mstrmojo.rw.xtab._XtabColResize",rszmap:undefined,onRender:function F(){if(this._super){this._super();}if(this.gridData.eg!==undefined){return ;}var d=this;var c=mstrApp&&D.isMac()&&mstrApp.getWSLiveMode&&mstrApp.getWSLiveMode();window.setTimeout(function(){if(!d.hasRendered){return ;}if(!mstrApp.isExpress||mstrApp.features["grid-layout"]){S.call(d);}d.raiseEvent({name:"xtabColsMeasured"});},c?500:0);D.attachMarkupEvent(this.id,this.domNode,"mousedown");},unrender:function W(c){D.detachEvent(this.domNode,"mousedown",mstrmojo.emptyFn);this._super(c);},refreshResizeHandlers:function G(){if(!mstrApp.isExpress||mstrApp.features["grid-layout"]){Z(this.getTargetZone().domNode);Z(this.getColClonedZone&&this.getColClonedZone());S.call(this);if(this.clonedRowHeader&&this.clonedRowHeader.domNode){Z(this.clonedRowHeader.domNode.firstChild);H(this.getTargetZone().domNode,this.clonedRowHeader.domNode.firstChild);}if(this.clonedTitle&&this.clonedTitle.domNode){Z(this.clonedTitle.domNode.firstChild);H(this.getTargetZone().domNode,this.clonedTitle.domNode.firstChild);}}},gridPagesRendered:function A(){this.refreshResizeHandlers();if(this._super){this._super();}},isColResizeNode:function P(c){return(c.className||"").indexOf(B)>=0;},isDragValid:function C(c){return this.isColResizeNode(c.src.node)||(this._super&&this._super(c))||false;},ondragstart:function a(e){if(this.isColResizeNode(e.src.node)){var c=D.position(this.domNode),j=D.findAncestorByAttr(e.src.node,"idx",true,this.domNode),m=j&&parseInt(j.value,10),h=this.rszmap,d=h[m].left-(m>0?h[m-1].left:0),n=Math.max(c.x,(e.src.pos.x-d)),q=new mstrmojo.models.template.DataInterface(this.gridData),p=this.gridData,f=this.isOutlineMode,g=this.zone.domNode.getElementsByTagName("tr");if(f){var l=g[0],k=l.getElementsByTagName("td"),o=0;X.forEach(k,function(u,t){var r=parseInt(u.colSpan,10)||1;if(t<=m){o=t>0?o+1:o;o=o+r-1;}else{return false;}});m=o;}this.rszData={idx:m,originalWidth:d,min:n,max:c.x+c.w,colName:q.getColumnHeaderData(true)[m].n};}if(this._super){this._super(e);}this.ignoreHover=true;},ondragmove:function L(e){if(this.rszData){var d=this.rszData,c=e.src.pos,f=Math.max((d.originalWidth+(e.tgt.pos.x-c.x)),0);this.avatar.firstChild.innerHTML=d.colName+" "+((Q.UNIT.PX==V.units)?f:parseFloat(Q.convertUnits(Q.UNIT.PX,V.units,f)).toFixed(2))+" "+V.unitsLabel;}this._super(e);},ondragend:function E(g){if(this.rszData){var f=this.gridData,e=this.rszData.idx,j=(new mstrmojo.models.template.DataInterface(f)).getColumnHeaderData(true),k=j[e],d=k.fs,c=k.fix||1;if(d&&d.length>0){c=e-X.find(j,"id",k.id)+1;}var h=k.oid||k.id;this.changeColumnWidth(h,k.otp,Math.max((parseInt(N.call(this).bottom[e].w,10)+(g.tgt.pos.x-g.src.pos.x)),0),c,(h===""&&k.axis===2));delete this.rszData;}this._super(g);this.ignoreHover=false;},createAvatar:function O(g){var j=document.createElement("div"),d=j.style,c=D.position(g),f=D.position(this.domNode);if(this.isColResizeNode(g)){this.avatarCssClass=B;d.top=f.y+I;d.left=c.x+I;d.height=f.h+I;var h=document.createElement("div");h.className=B+"-ttp";var e=document.createElement("div");e.className=B+"-anchr";j.appendChild(h);j.appendChild(e);}else{delete this.avatarCssClass;}return j;},positionAvatar:function K(g,e){if(this.rszData){var d=this.avatar,f=d.style,c=this.rszData;if(!this.avatar||!this.rszData){return ;}f.left=Math.min(Math.max(g.x,c.min),c.max)+"px";}else{this._super(g,e);}},isHandleNode:function T(c){return !!c&&c.getAttribute&&c.getAttribute(Y)===B;},onHandleDblClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.XtabBase","mstrmojo._Formattable","mstrmojo._IsSelectorTarget","mstrmojo._IsDocXtab","mstrmojo._XtabSelections","mstrmojo._XtabCellHoverMgr","mstrmojo.XtabCellHoverPopup","mstrmojo._HasPopup","mstrmojo.dom","mstrmojo.array","mstrmojo.vi.ui.rw.CustomSortDisplayPanel","mstrmojo.mstr.EnumWebAPIErrorCodes");var V=0,a="overflow:auto",Y="overflow:hidden",L=mstrmojo.dom,R=L.position,Z=mstrmojo.array,m="mstrmojo.DocPanelStack",q="px",D=mstrmojo.DocDataService.SUPPRESS_DATA,g=mstrmojo.models.template.DataInterface,I=g.ENUM_GRID_RESIZE,l=I.FIXED,M=I.FIT_TO_WINDOW,H=I.FIT_TO_CONTENTS,G=L.isIOSTouch;var c=function K(t,u){var v=t&&t.parent;while(v&&v.scriptClass!==m){if(v.scriptClass===u){return v;}v=v.parent;}return v;};function k(){var AA=36;var u=this.model.docModel.getPanel(),w=u.containerNode,v=R(w),t=mstrApp.rootCtrl.view.toolbar,AB=R(t.domNode);var z={};z.x=v.x;z.w=v.w;z.y=(AB.y+AB.h)-AA;z.h=(v.y+v.h)-z.y;var x=v.y-(AB.y+AB.h);return{csPanelPos:z,spacerHeight:x};}mstrmojo.Xtab=mstrmojo.declare(mstrmojo.XtabBase,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._IsDocXtab,mstrmojo._XtabSelections,mstrmojo._HasPopup],{scriptClass:"mstrmojo.Xtab",cellHoverMgr:"mstrmojo._XtabCellHoverMgr",cellHoverPopupRef:"mstrmojo.XtabCellHoverPopup",preBuildRendering:function A(){var v=this._super();var u=this.gridData;var t=this.lockHeadersCase===V&&u.co;this.scrollboxNodeOverflow=t&&!this.numRowFixed?Y:a;var w=this.getFormats();if(mstrmojo.dom.isIE8&&!u.co&&this.lockHeadersCase===V&&(!u.rw||(u.rw&&(u.rw.row.bc>=u.rw.row.tc)))&&mstrmojo.string.isEmpty(w.height)&&mstrmojo.string.isEmpty(w.width)){this.scrollboxNodeOverflow="";}this._useFilter=this._useFilter||u.cssflt||false;return v;},postBuildRendering:function d(){var v=this.gridData,u=this._super(),z=this.scrollboxNode;var x=this;if(this.viewport){var AA=function(){x.addDisposable(x.requiresContrib("cellHoverMgr",true));if(G){x.viewport.ontouchstart=null;}else{x.viewport.onmouseover=null;}};if(G){this.viewport.ontouchstart=AA;}else{this.viewport.onmouseover=AA;}}if(!this.getFormats().width&&this.model.docModel.addAutoWidthID&&(this.parent&&this.parent.scriptClass!=="mstrmojo.ExpressDocPanel")){this.model.docModel.addAutoWidthID(this.id);v=this.gridData;var t=v&&v.afc;if(t&&mstrmojo.dom.isIE7){var w=c(this,m);if(w&&w.scriptClass===m){this.viewport.style.width=this.contentNode.offsetWidth+(this.scrollboxNode.offsetWidth-this.scrollboxNode.clientWidth)+"px";}}}if(L.isIE&&!L.isIE8&&this._useFilter){window.setTimeout(function(){var AB=document.createElement("img");z.appendChild(AB);z.removeChild(AB);},0);}return u;},onCGBMapChange:function(t){if(this._resolveCGBToTKS(t.cgbMap)&&this._currentSelectedTD){this.defaultAction(this._currentSelectedTD);}},_resolveCGBToTKS:function j(AC){if(!AC){return false;}var AA=this.model.scm,v="\u001E",x,u,z,w,t,AB=false;for(u in AA){z=AA[u];w=z.cgb;for(x in w){t=AC[w[x]];if(t){if(!z.tks){z.tks=t;AB=true;}else{if(z.tks&&(z.tks.indexOf(t)<0)){z.tks+=v+t;AB=true;}}}}}return AB;},onGridWidthChanged:function X(t){if(this._super){this._super(t);}if(this.cellHoverMgr.onXtabWidthChanged){this.cellHoverMgr.onXtabWidthChanged();}},getDim:function(){var t=this.contentNode;return{w:t.scrollWidth,h:t.scrollHeight};},unrender:function B(t){var u=this.cellHoverMgr;if(u&&u.shutdown){u.shutdown();}this._super(t);},link:function E(u,t){this.controller.onLink(this,this.model.getLinkAction(u,t));},sort:function o(t,u){this.controller.onSort(this,this.model.getSortAction(t,u));},advSort:function P(t,u,v){this.controller.onGetAdvSortData(this,u,t._e&&t._e.otp,v);},customSort:function p(AB,v){var z=this,AD=this.model,AA=AD.getDataService(),AC=AD.docModel,t=AC.getUnitDefinitions(this.k)[this.k].pnk,x=AC.currlaykey,u=AC.getNextKey(),w=AD.getCreateCSVizActions(AB,v,u);AA.submitUpdates(w,{success:function(AJ,AF){var AI=AJ.data,AH=Z.filterOne(AI.layouts,function(AN){return AN.k===x;}),AE={};AE[u]=AH.xtabStyles[u];AC.controller.view.updateXtabStyles(x,AE);AC.updateDefnCache(AJ.defn,[u,t]);AC.updateDataCache(AI,AC.getTargetDefn(u));var AM=k.call(z),AK=R(z.domNode),AG=600,AL=mstrmojo.insert({scriptClass:"mstrmojo.vi.ui.rw.CustomSortDisplayPanel",model:AC,nodeKey:u,srcPanelKey:t,srcLayoutKey:x,srcViz:z,srcUnit:AB,srcAxis:v,width:Math.max(AK.w,AG)+"px",height:AM.csPanelPos.h+"px",left:((typeof AK.x==="number")?AK.x:0)+"px",top:((typeof AM.csPanelPos.y==="number")?AM.csPanelPos.y:0)+"px",spacer:AM.spacerHeight});AL.setVizBoxPortalStateRestore();AL.open();AL.parent=mstrmojo.findAncestor(z,"openXtabCellMenu");},failure:function(AH,AI){var AF=6,AJ=10000,AG=0,AE=function(){AA.submitUpdates({act:"undo",stid:AA.stid},{success:function(AK,AL){mstrApp.hideWait();},failure:function(AK,AL){if(++AG<AF&&AK.code==mstrmojo.mstr.EnumWebAPIErrorCodes.MSI_ADDUSERJOB_ERROR){setTimeout(AE,AJ);}else{mstrApp.hideWait();}}},{config:{silent:true},hideCancel:true,noUpdate:true,preserveStid:true,noDeltaXML:true});};mstrApp.showWait();AE();}},{style:{params:{treesToRender:3}},noUpdate:true,preserveStid:true,noDeltaXML:true,hideCancel:true});},pivot:function N(t,u){this.controller.onPivot(this,this.model.getPivotAction(t,u));},drill:function n(t,u){this.controller.onDrill(this,this.model.getDrillAction(this.getActionCells(t),u));},removeUnit:function S(t){this.controller.onRemoveUnit(this,this.model.getRemoveTemplateUnitAction({id:t._e?t._e.oid:t.id,t:t._e?t._e.otp:t.otp}));this.onDemandDrillItems=null;this.onDemandDrillDynamicItems=null;},showViewFilter:function U(t){this.controller.onShowFilterEditor(this,t);},showTotal:function J(t,v,u){this.controller.onShowTotals(this,this.model.getTotalsAction(t,v,u));},derivedMetric:function h(t,z){var u,x=t._e.oid,v={did:x,alias:t._e.n,n:t._e.n,v:t.um?t.formula:t._e.v,idx:t.mix,host:this,nodeKey:this.k,dsid:this.controller.model.findDatasetIdFromUnit(x)||this.model.data.datasetId},AA;if(z==="edit"){u={metricId:v.did,action:{cmd:"edit",n:v.n,alias:v.alias}};AA=this.controller.model.getDataService().getEditDerivedMetricSubmitFunc(v);}else{u={metricId:"",action:{cmd:"editNew",refOi:{did:v.did,n:v.n}}};AA=this.controller.model.getDataService().getAddNewDerivedMetricToXtabSubmitFunc(v);}var w=this.controller.model;if(w.isFromSolrCube&&w.isFromSolrCube(v.did)||w.isFromMDXCube(v.did)){u.disableAFB=true;}this.controller.openDME(this,u,AA);},deleteSelectorControl:function Q(){var t=this.gridData,u=t.sc;if(u&&parseInt(u.ct,10)===6){delete t.sc;}},findSelectorControl:function C(){var t=this.gridData.sc;if(t&&parseInt(t.ct,10)===6){this.selectorControl=t;}else{delete this.selectorControl;}return this.selectorControl;},handlesMultiSelection:function f(u){var t=this.getCellForNode(L.findAncestorByName(u.getTarget(),"td",true,this.viewport)),w=t&&this.model.data.gts[t.axis===1?"row":"col"][t.tui||t.ui],v=w&&w.id&&w.sc;return !!(this.findSelectorControl()||v);},getBasicSubtotalEditorConfig:function b(v){var t=new mstrmojo.ui.menus.EditorConfig({contents:new mstrmojo.express.ui.SubtotalsWidget({onchange:function u(){var w=this.getSubtotalTypes(),x=w[0].length>0||w[1].length>0;t.set("okEnabled",x);}}),data:{},okEnabled:false});if(!this.model.data.gsi.hidesb){t.contents.set("selectedItems",v||[]);}return t;},updateRelatedColWidths:function O(u){if(this.isCustomSort&&this.getActionMgr().isCurrentActionSilent()){return ;}var AA=(new mstrmojo.models.template.DataInterface(this.gridData)).getColumnHeaderData(true),x=this.gridData.twm||{},w=x.bottom,t=x.top,v=this.getTargetZone,z;(u||[]).forEach(function(AD){var AC=AD.colIndex,AE=AA[AC],AB=AE._ridx||[];z=AD.value;if(AB.length>1){AB.forEach(function(AF){t[AF]=t[AF]||{};t[AF].w=w[AF].w=z;});}else{t[AC]=t[AC]||{};t[AC].w=w[AC].w=z;}v.autoFitWindow=false;v.autoFitContent=false;});this.refresh();},updateScenario:function F(u){var t=this.gridData;t.afc=u===H;t.afw=u===M;if(u!==l){this.setAllXtabWidths("");}this.refresh();},setAllXtabWidths:function r(t){},changeResizeScenario:function e(AC,AH,AI,AD){var AK=new mstrmojo.models.template.DataInterface(this.gridData),v=this.gridData.twm||{},w=v.bottom,t=AK.getColumnHeaderData(true),AE=this,AA=this.model,u=this.id,AJ=this.k,x=[],z=[],AB=1,AG=[];if(AH){x.push({act:"changeXtabColWidthScenario",value:AC});t.forEach(function(AM,AL){var AP=AM.oid||AM.id,AO=function(AQ){return AQ.unitId===AP&&AQ.depth===AB;};if(!(AM.fs&&AM.fs.length>0)){AB=1;}var AN=AP===(AI&&AI.did)&&AB===AI.depth;if(!AG.some(AO)){AG.push({unitId:AP,depth:AB});z.push({colIndex:AL,value:AN?AI.width+q:w[AL].w});if(AC===l){x.push(AA.getColumnResizeAction(AP,AM.otp,AN?AI.width:parseInt((w[AL].w)||0,10),AB,AN?AI.isExtra:false));}}AB++;});var AF=function AF(AL,AN){var AM=mstrmojo.all[u];if(AL===l){AE.updateRelatedColWidths(AN);}AE.updateScenario(AL);};AF(AC,z);AE.submitColumnWidthChange(x,AD);}return AD?x:undefined;},submitColumnWidthChange:function W(v,t){if(!t){this.model.getDataService().submitTemplateUpdates(this.k,v,{success:function u(){}},D);}},changeColumnWidth:function T(x,AF,u,AG,v,AC){var AI=new mstrmojo.models.template.DataInterface(this.gridData),t=AI.getColumnHeaderData(true),AA=this.model,w=[],AE=this,z=[],AB=1,AD=-1,AH=[];if(AI.getColResizeScenario()!==l){w=this.changeResizeScenario(l,true,{did:x,t:AF,width:u,depth:AG,isExtra:v},AC);return AC?w:undefined;}if(x==="all"){t.forEach(function(AK,AJ){var AN=AK.oid||AK.id,AM=function(AO){return AO.unitId===AN&&AO.depth===AB;},AL=t[AJ-1];if(!(AK.fs&&AK.fs.length>0)||(AL&&AN!==(AL.oid||AL.id))){AB=1;}if(!AH.some(AM)){AH.push({unitId:AN,depth:AB});z.push({colIndex:AJ,value:u+q});w.push(AA.getColumnResizeAction(AN,AK.otp,u,AB,false));}AB++;});}else{t.every(function(AK,AJ){var AL=(AK.oid===x||AK.id===x);if(AL){AD=AJ+AG-1;}return !AL;});if(AD>=0){z.push({colIndex:AD,value:u+q});w.push(AA.getColumnResizeAction(x,AF,u,AG,v));}}AE.updateRelatedColWidths(z);AE.submitColumnWidthChange(w,AC);return AC?w:undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.ui.menus.MenuConfig");var A=mstrmojo.func,J=mstrmojo.desc(2177,"Close");function G(L){return function(N,M){M.openMenu(L,N);};}mstrmojo.ui.menus.ToolbarConfig=mstrmojo.declare(mstrmojo.ui.menus.MenuConfig,null,{scriptClass:"mstrmojo.ui.menus.ToolbarConfig",btns:null,hasCloseButton:false,closeButtonText:J,showContextMenu:true,addCloseButton:function E(L){this.hasCloseButton=true;if(L){this.closeButtonText=L;}},preShowMenu:mstrmojo.emptyFn,addToolbarBtn:function I(R,M,P,L,N,Q){var O={n:R,cls:M,fn:P,ctxt:L,ttp:Q};if(isNaN(N)||N>=this.btns.length){this.btns.push(O);}else{this.btns.splice(N,0,O);}return O;},addDisabledToolbarBtn:function I(O,M,L){var N=this.addToolbarBtn(O,(M||"")+" disabled",mstrmojo.emptyFn,L);N.dsbld=true;},addToolbarPickerBtn:function B(R,M,P,Q,L,N){var O={n:R,cls:M,fn:P,ctxt:L,tp:"pb",menufn:G(Q||this)};if(isNaN(N)||N>=this.btns.length){this.btns.push(O);}else{this.btns.splice(N,0,O);}},addMenuToolbarBtn:function H(P,L,O,M,N){if(!O&&!this.hasMenuItems()){return ;}this.addToolbarBtn(P,L,A.composite([this.preShowMenu,G(O||this),(N||mstrmojo.emptyFn)]),null,M);},addToggleToolbarButton:function D(S,O,Q,N,M,R,L){var P=this.getToggleItemStates(S,O,Q,N,R,L);this.addDualStateItem(M,P[0],P[1],true);},addDualStateItem:function K(M,L,N,O){this["add"+(O?"ToolbarBtn":"MenuItem")](L.n,L.cls,this.getDualStateHandler(M,L,N),L.ctxt,undefined,L.ttp);},getDualStateHandler:function C(M,L,N){var O=this._super(M,L,N);return function(P,Q){O.call(this,P,Q);Q.refresh();};},clear:function F(){this.btns=[];this.hasCloseButton=false;this.closeButtonText=J;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.ME.MetricDataService");mstrmojo.requiresDescs(3224);var Y=["(",")","{","}","-","+","*","/","<",">","|","~",","],I={" ":true,"@":true},X=null,W=mstrmojo.dom,K=mstrmojo.css,H=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,Z=mstrmojo.ME.MetricDataService;function O(e){if(!X){X={};var d,b;for(d=0,b=Y.length;d<b;d++){X[Y[d]]=true;}}return X.hasOwnProperty(e);}function a(e){if(!e){return false;}var b=e.length,d,f;for(d=0;d<b;d++){f=e.charAt(d);if(f==="["){return false;}if(O(f)||I[f]){return true;}}return false;}function A(b){return a(b)?"["+b+"]":b;}function M(f){if(!f){return null;}var b=f.length,e=f.split("["),d=e.length,h,g;if(d===1){return f.split("@");}else{if(d===3){h=e[1];h="["+h.substring(0,h.length-1);g="["+e[2];}else{if(e[0].length===0){var j=e[1],c=j.indexOf("]");h="["+j.substring(0,c+1);if(c===j.length-1){return[h];}else{g=j.substring(c+2);}}else{var j=e[0];h=j.substring(0,j.length-1);g="["+e[1];}}}return[h,g];}var R={8:true,9:true,10:true};var C=function(c,b){return R[c]&&!/^\".*\"$/.test(b)?'"'+b+'"':b;};var F=function(c,b,d){var e=typeof d==="undefined"?true:R[d];if(b.length===2&&b==='""'){return b;}return c.tp===261&&b.length>=2&&e?(/^\s+$/.test(b.substr(1,b.length-2))?b:b.substr(1,b.length-2)):b;};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}" mstrAttach:contextmenu></span>',active:false,markupMethods:{ondataChange:function(){var c=this.data,e=this.isEmbeddedFilter(),b=e?"&nbsp;":mstrmojo.string.encodeHtmlString(String(c.v));if(c.v===","){this.domNode.innerHTML=b+"&nbsp;";}else{if(c.tp===259&&c.v==="Desc"){this.domNode.innerHTML="&nbsp;"+b;}else{if(Z.isLogicOrCompFunc(c)){this.domNode.innerHTML="&nbsp;"+b+"&nbsp;";}else{this.domNode.innerHTML=b;}}}K.toggleClass(this.domNode,["mstr"],this.isMstrO());K.toggleClass(this.domNode,["nfn"],!this.isFunction());K.toggleClass(this.domNode,["invalid"],c.sta===-1);K.toggleClass(this.domNode,["embeddedFilter"],e);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},oncontextmenu:function U(b){this.closePopup();if(this.isEmbeddedFilter()){var d=new mstrmojo.ui.menus.MenuConfig({position:W.getMousePosition(b.e,b.hWin),isHostedWithin:false,alignWithAnchor:true});var c=this;d.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){var e=c.parent;if(e&&e.editEmbeddedFilterToken){e.editEmbeddedFilterToken(c);}});this.openPopup(d.newInstance());}},isMstrO:function V(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t===H.Function);},isEmbeddedFilter:function J(){var d=this.data.oi,c=d&&d.t,b=d&&d.st;return this.isMstrO()&&c===H.Filter&&b===D.Filter&&d.isEmbedded;},brackets:A,length:function E(){return this.isEmbeddedFilter()?1:this.data.v.toString().length;},isDelimiter:function T(){return this.data.isDelimiter||(this.length()===1&&O(this.data.v));},split2Tokens:function L(f){var e=this.data,c=e&&e.v.toString(),g=c.substring(0,f),b=c.substring(f);return[{v:g,isNew:true},{v:b,isNew:true}];},mergeTo:function N(c){var f=this.data,e=f&&f.v.toString(),b=c.data.v.toString();return{v:e+b,isNew:true};},brackets:A,setItemInfo:function S(b){var c=this.data;c.v=this.brackets(b.n);c.oi=b;c.sta=1;c.isNew=true;this.set("data",c);this.paint();},spliceContent:function P(j,g,c){var h=this.data,f=h&&h.v.toString(),k=f.substring(0,j);g=(g===null||g===undefined)?(f.length-j):g;var b=f.substring(j+g),e=k+(c||"")+b;h.v=e;h.isNew=true;h.sta=1;h.ift=(this.isAttributeToken()||h.at)&&(h.v.indexOf("@")>=0);if(h.ift){h.at=h.oi||h.at;}else{delete h.at;}delete h.oi;delete h.exv;delete h.extp;delete h.tp;this.set("data",h);this.paint();},isAttributeToken:function G(){return this.data&&this.data.oi&&this.data.oi.t===H.Attribute;},setFormInfo:function Q(c){var e=this.data,b=e.oi||e.at;e.v=this.brackets(b.n)+"@"+this.brackets(c.n);e.exv=c.did;e.extp=8;e.sta=1;e.isNew=true;e.oi=e.at;delete e.at;this.set("data",e);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=O;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.splitAttrAndAttrForm=M;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=F;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=R;mstrmojo.ME.MetricToken.argDelimiter={".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",";})();(function(){mstrmojo.requiresClsP("mstrmojo","Widget","css","dom","num");var I=mstrmojo.css,D=mstrmojo.dom,G=mstrmojo.num;mstrmojo.threshold.ColorMarker=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ColorMarker",markupString:'<div class = "marker {@cssClass}" id="{@id}" style="{@cssText}" mstrAttach:contextmenu,mousedown,mouseover,mouseout></div>',markupMethods:{onleftChange:mstrmojo.Widget.leftMarkupMethod},hovered:false,selected:false,index:undefined,position:0,updatePosition:function E(M){this.set("position",M);},compValue:undefined,updateCompValue:function K(M){this.set("compValue",M);},realValue:undefined,updateRealValue:function F(M){this.set("realValue",M);},select:function(){this.set("selected",true);},unselect:function(){this.set("selected",false);},onselectedChange:function C(M){if(M.valueWas===false&&M.value===true){I.toggleClass(this.domNode,"selected",true);this.parent.onMarkerSelected(this.index);}else{I.toggleClass(this.domNode,"selected",false);this.parent.onMarkerUnselected(this.index);}this.parent.onMarkerUnhovered(this.index);},oncontextmenu:function H(N){D.preventDefault(window,N.e);var M=this,O=M.parent.parent;var P=new mstrmojo.ui.menus.MenuConfig({position:D.getMousePosition(N.e,N.hWin),isHostedWithin:false});P.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){O.bands.remove(M.index);O.markers.remove(M.index);O.update();});this.openPopup(P.newInstance());},onmousedown:function B(M){this.set("selected",!this.selected);},onmouseover:function L(){this.set("hovered",true);},onmouseout:function J(){this.set("hovered",false);},onhoveredChange:function A(M){if(!this.selected){if(M.valueWas===false&&M.value===true){I.toggleClass(this.domNode,"selected",true);this.parent.onMarkerHovered(this.index);}else{I.toggleClass(this.domNode,"selected",false);this.parent.onMarkerUnhovered(this.index);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi._MonitorsLayoutMode","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.css");var A=mstrmojo.css,N=mstrmojo.dom,M="draggedTab",J="stopDragging",l=1,L=2,p=4,G=8,k=16;function m(q){return function(){A.toggleClass(this.tabStripMenuNode,"active",q);};}function g(AC){var w=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:N.getMaxScrollHeight()}),q=this.getMenuActions(),AA=this.index,t=this.id,u=this.total,x=this.parent,r=function(){var AD=x&&x.getTabs();return AD&&AD.length>AA?AD[AA]:mstrmojo.all[t];};if((q&k)>0){this.addNewTabMenuItem(w);}if((q&p)>0){var z=mstrmojo.desc(3397,"Duplicate"),AB=this.parent.scriptClass;if(AB.indexOf("LayoutTabStrip")>=0){z=mstrmojo.desc(15022,"Duplicate Chapter");}else{if(AB.indexOf("PanelTabStrip")>=0){z=mstrmojo.desc(14923,"Duplicate Page");}}w.addMenuItem(z,"dup",function(){r().tabDuplicated();});}if((q&L)>0){if(AA){w.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){r().tabMoved(true);});}if(AA<u-1){w.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){r().tabMoved(false);});}}w.addSeparator();if((q&l)>0){w.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){r().lbl.set("isEditing",true);});}if((q&G)>0){if(u>1){w.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){r().tabDeleted();});}}var v=this.getCustomMenu();if(v&&v.hasMenuItems()){w.addSeparator();w.absorbMenuItems(v);}w.addPopupHandlers(this.id,m(true),m(false));this.showTabMenu(this.updateMenuCfg(w),AC);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState,mstrmojo.vi._MonitorsLayoutMode],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:contextmenu,click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function S(){return this.domNode.firstChild.firstChild;},menuBtnNode:function o(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function I(){this.lbl.set("text",this.title);},onisSelectedChange:function h(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function j(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,isCutoff:false,isHidden:false,isLeftMost:false,isRightMost:false,leftEdgeHiddenWidth:0,rightEdgeHiddenWidth:0,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function V(r,q){if(r){this.parent.titleEdited(this.text,q);}}}],postBuildRendering:function Q(){var q=this.isValidMode();if(!q||(mstrApp.isLayoutModePreview&&mstrApp.isLayoutModePreview())){this.draggable=false;}this.lbl.set("editOnDoubleClick",q);this._super();},oncontextmenu:function a(q){this.onclick(q);q.preventDefault();},onclick:function d(q){var t=this.domNode;if(A.hasClass(t,J)){A.removeClass(t,J);return ;}var r=function(){if(this.isValidMode()){this.postTabClicked(this,q);}};if(!this.isSelected){this.tabSelected({success:r.bind(this)});}else{r.call(this);}},postTabClicked:function n(u,r){u=this.findSelectedTab(this)||u;var q=u.menuBtnNode,v=r.getTarget().className===q.className,t;if(v){t=N.position(q);}if(r.name==="contextmenu"||(v&&!(t.x||t.y))){t={x:r.e.clientX,y:r.e.clientY};}if(t){g.call(u,t);}},getMenuActions:function c(){return 0;},getCustomMenu:function X(){return null;},isDragValid:function R(){return this.parent.children.length>1&&!this.lbl.isEditing&&this.isValidMode();},createAvatar:function T(){var q=document.createElement("div");q.appendChild(this.domNode.cloneNode(true));q.style.margin="-5px 0 0 10px";return q;},addTabDnDStyle:function W(){var q=this.lbl.domNode;if(q&&!this.isSelected){A.addClass(q,M);}},clearTabDnDStyle:function F(){var q=this.lbl.domNode;if(q&&!this.isSelected){A.removeClass(q,M);}},allowDrop:function D(q){var r=q.src.widget;return r&&r.parent===this.parent;},dropTab:function K(q){var u=q.src,t=u.data,r=u.widget;r.clearTabDnDStyle();this.parent.moveTab(t.idx,this.index,t.fromIdx);},ondragenter:function H(r){this._super(r);var u=r.src.data,t=r.src.widget,q=this.index;this.parent.moveTab(u.idx,q);u.idx=q;},ondragover:function Z(t){var q=t.tgt.node,r=t.tgtData,u=r&&r.node,v=t.src.widget;if(!r||u!==q){t.tgtData={node:q};}if(v&&!v.isSelected){v.addTabDnDStyle();}},ondragleave:function P(q){this._super(q);var r=q.src.widget;if(r&&!r.isSelected){r.addTabDnDStyle();}},ondragend:function C(q){this._super(q);A.addClass(this.domNode,J);this.dropTab(q);},getDragData:function b(){var t=this.id,q=this.index;return{setAvatarClass:function r(u){var x=mstrmojo.all[t],v=x.avatar;if(v){var w=[x.avatarCssClass,"hasOwnAvatar",u];v.className=w.join(" ");}},fromIdx:q,idx:q};},getDropAvatarIcon:function B(){return"pivot";},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},cleanUpAfterTarget:function e(q){this.clearTabDnDStyle();this._super(q);},onAppStateChange:function f(r){var u=this.lbl,t=this.isValidMode(),q=mstrApp.isLayoutPreview(r.value);u.set("isEditing",false);u.set("editOnDoubleClick",t);this.draggable=t&&!q;},onLayoutModeChange:function O(r){var t=this.isValidMode(),q=mstrApp.isLayoutPreview(r.value);this.draggable=t&&!q;},addNewTabMenuItem:function U(q){this.throwAbstractMethodError("addNewTabMenuItem");},findSelectedTab:mstrmojo.emptyFn,tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function Y(q){return q;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:k,RENAME:l,MOVE:L,DUPLICATE:p,DELETE:G};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.GraphBase","mstrmojo._Formattable","mstrmojo._IsSelectorTarget","mstrmojo.tooltip","mstrmojo.vi.enums.EnumFeatures");var S=mstrmojo.dom,L=mstrmojo.array,J=mstrmojo.mstr.EnumDSSXMLDrillType,R={SORT:8},C=mstrmojo.vi.enums.EnumFeatures;function B(Y){var Z=Y.getFormats();if(!Z.width&&"gp" in Z){Z=Z.gp;}Y.resizeForDisplayState(parseInt(Z.height,10),parseInt(Z.width,10),false);}function U(Z){var Y="";switch(Z){case J.DssXmlDrillToChild:Y="drillDown";break;case J.DssXmlDrillToParent:Y="drillUp";break;case J.DssXmlDrillToTemplate:Y="drillTemplate";break;}return Y;}function F(Z){var Y=S.position(this.domNode,true),a=S.getMousePosition(Z);return{x:a.x-Math.floor(Y.x),y:a.y-Math.floor(Y.y)};}function M(Y,a){var b={x:a.offsetX,y:a.offsetY},Z=Y.coords.split(",");switch(Y.shape){case"rect":case"poly":b=F.call(this,a);break;case"circle":b.x=Z[0];b.y=Z[1];break;}return{x:parseInt(b.x,10),y:parseInt(b.y,10)};}function I(g,f){var a=S.eventTarget(f,g),d=a&&a.parentNode,h=d&&d.children,Y=[],b=a.getAttribute("coords");if(h&&!!b){for(var Z=0;Z<h.length;++Z){if(h[Z]&&h[Z].getAttribute&&h[Z].getAttribute("coords")==b){Y.push(h[Z]);}}}return Y;}function E(b,c,a,Z,Y){return function(){var f=F.call(b,c),e={taskId:"getElementFromGraph",msgID:b.model.docModel.mid,nodeKey:b.node.k,sliceID:b.node.data.sid,x:parseInt(f.x),y:parseInt(f.y)},d={success:function(h){var g={mix:Z,els:h.els},j=b.model.getLinkActionImpl(g,a,Y);b.controller.onLink(b,j);},failure:function(g){}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,d,e);};}function N(Z,Y){return((((Z&&Z.actions)||0)&Y)>0);}mstrmojo.DocXtabGraph=mstrmojo.declare(mstrmojo.GraphBase,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.DocXtabGraph",cssClassPrefix:"mstrmojo-DocXtabGraph",areaMarkup:'<area shape="{@shape}" coords="{@coords}" ttl="{@tooltip}" aid="{@aid}" onclick="mstrmojo.all[\'{@id}\'].onClickArea(this, event);" oncontextmenu="mstrmojo.all[\'{@id}\'].onContextMenu(this, event);" onmousemove="mstrmojo.all[\'{@id}\']._updateTooltip(event, self);" {@extra}/>',_att:"",markupSlots:{imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["RW","B","background-color","fx"]},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?"block":"none";}},onClickArea:function T(a,c){c=c||window.event;var j=F.apply(this,[c]),d=this.defn,Y=S.position(this.domNode,true),Z=this.as[a.getAttribute("aid")],h=this.k,g=j.x,f=j.y,b={getBoundingClientRect:function(){var k=Y.x+g,e=Y.y+f;return{left:k,top:e,right:k+1,bottom:e+1};},w:this};this.showInfoWin(Z.ifw,Z.tks,b);this.model.docModel.slice({type:parseInt(d.t,10)||mstrmojo.EnumRWUnitType.GRAPH,src:h,ck:d.ck,gk:h,tks:Z.tks,cks:Z.cks,sid:this.node.data.sid,x:g,y:f,anchor:b,tty:Z.tty});},onContextMenu:function Q(c,j){j=j||window.event;var l=this,o=this.getFormats(),Y=parseInt(o.height,10),g=parseInt(o.width,10),b=this.as[c.getAttribute("aid")],k=b.lm||[],f=b.dp||[];mstrmojo.dom.preventDefault(window,j);var h=new mstrmojo.ui.menus.MenuConfig({hostId:this.id,isHostedWithin:false,hostElement:this,position:{x:j.pageX,y:j.pageY}});if(k.length!==0){h.addPopupMenuItem(mstrmojo.desc(5752,"Links"),this.id,function(){var r=new mstrmojo.ui.menus.MenuConfig();for(var q=0;q<k.length;q++){var e=k[q].links;for(var p=0;p<e.length;p++){r.addMenuItem(e[p].n||e[p].url||(e[p].target&&(e[p].target.n||e[p].target.did)),"",E(l,j,b,q,p));}}return r;});}var n=function n(r){var q=r.onDemandDrillItems;var p=r.onDemandDrillDynamicItems;if((!r.onDemandDrillItems||r.shouldUpdateDrillMenus)&&!r.loadingDCM){r.loadingDCM=true;delete r.shouldUpdateDrillMenus;var u=new mstrmojo.SimpleXHR({async:false});u.request("POST",mstrConfig.taskURL,{success:function t(w){var v=w.dynamicMenus[0];if(v&&v.items){p=v.items;}q=w.menuItems;r.onDemandDrillItems=q||[];r.onDemandDrillDynamicItems=p||[];delete r.loadingDCM;}},{taskId:"RWOnDemandDrill",styleName:"OndemandDrillContextMenusStyle",viewMode:2,docGridKey:r.k,rwb:mstrApp.docModel.bs});}var e=[];L.forEach(p,function(AA){var v=AA.idx,w=q[v],z=JSON.parse(w.subMenuIndices||"[]");if(z.length>0){var x=[];mstrmojo.array.forEach(z,function(AB){x.push(q[AB]);});w.items=x;}e.push(w);});return e;};var d=n(this.model.xtab);if((f.length>0||d.length>0)&&mstrmojo.resolveFeature(C.WEB_DRILL_AND_LINK)){var m=M.call(this,b,j);var a=this.model.data.sid;h.addPopupMenuItem(mstrmojo.desc(145,"Drill"),this.id,function(){var p=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"drill",isHostedWithin:false,supportsScroll:true,maxHeight:mstrmojo.dom.windowDim().h-50});L.forEach(f,function(r){if(mstrApp.isDossier&&!r.dwi){return ;}p.addMenuItem(r.n,U(r.tp),function q(){l.model.xtab.shouldUpdateDrillMenus=true;l.controller.onDrillGraph(l,{displayType:r.displayMode||2,drillPathKey:this.ctxt.key,x:m.x,y:m.y,graphHeight:Y,graphWidth:g,n:this.ctxt.n,isWithin:this.ctxt.dwi,sliceId:a},{});},r);});var e=function(){l.model.xtab.onDemandDrillItems=null;l.model.xtab.onDemandDrillDynamicItems=null;};L.forEach(d,function(q){if(mstrApp.isDossier&&!L.some(q.items,function(r){return(r.within);})){return ;}p.addPopupMenuItem(q.n,"",function(){var r=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"drill",isHostedWithin:false,supportsScroll:true,maxHeight:350});L.forEach(q.items,function(t){if(mstrApp.isDossier&&!t.within){return ;}r.addMenuItem(t.n,U(t.dt),function(){l.model.xtab.shouldUpdateDrillMenus=true;var u=this.ctxt;l.controller.onDrillGraph(l,{displayType:t.displayMode||2,drillPathKey:u.k,x:m.x,y:m.y,graphHeight:Y,graphWidth:g,n:this.ctxt.n,isWithin:u.within,sliceId:a},{});e();},t);});return r;});});return p;});}if(N(this.model.data,R.SORT)){if(!mstrApp.isDossier){h.addMenuItem(mstrmojo.desc(6089,"Sort graph"),this.id,function(){l.controller.onGetAdvSortData(l,1,-1);});}}if(mstrmojo.resolveFeature("use-view-filter-editor")){h.addMenuItem(mstrmojo.desc(3938,"edit view filter..."),this.id,function(){l.controller.onShowFilterEditor(l);});}if(h.hasMenuItems()){var Z=h.newInstance();if(this._lastOpened){mstrmojo.css.removeClass(this._lastOpened?this._lastOpened.popupConfig.hostElement:null,"open");mstrmojo._HasPopup.closePopup.call(this);}mstrmojo._HasPopup.openPopup.call(this,Z);mstrmojo.css.addClass(Z?Z.popupConfig.hostElement:null,"open");}return false;},showInfoWin:function P(c,d,Z){var Y=this.model.docModel,b=[].concat(Y.getTargetInfoWin(c)).concat(Y.getTargetInfoWin(d));if(b&&b.length){for(var a=0;a<b.length;a++){Y.showInfoWin(b[a],Z,"h");}}},showTooltip:function D(a,Z){this._updateTooltip(a,Z);var Y=I(a,Z);if(Y&&Y.length>1){mstrmojo.DocXtabGraph.multiTooltip.open(this,a,Z,Y);}else{this._super(a,Z);}},_updateTooltip:function O(Y,Z){this.updatingTooltipHelper(S.eventTarget(Z,Y),F.apply(this,[Y]));},hideTooltip:function H(b,a){var Z=S.eventTarget(a,b);if(Z.getAttribute("aid")===this.cAreaIdx){this.cAreaIdx=-1;var Y=I(b,a);if(Y&&Y.length>1){mstrmojo.DocXtabGraph.multiTooltip.close(this,b,a,Y);}else{this._super(b,a);}}},update:function K(Y){this.node.data=Y.data;this.as=Y.data.as;var o="\u001E",b=this.model.docModel,h=b.getCGBMap&&b.getCGBMap(),Z=this.as||[],f,d;for(f=0;f<Z.length;f++){var l=Z[f],e=l&&l.tgbs;if(e){var g=e.split(o);var n={};for(d=0;d<g.length;d++){var c=h&&h[g[d]];if(c){n[c]=true;}else{n[g[d]]=true;}}l.tks=mstrmojo.hash.keyarray(n).join(o);}}this.eg=Y.data.eg;this.gridInfo=Y.data.gsi;if(Y.defn&&Y.defn.tooltip){this.defaultTooltip=Y.defn.tooltip;}var b=this.model;if(b){b.set("data",Y.data);}},retrieveGraphSrc:function G(Z,Y){var b=mstrConfig.taskURL+"?taskId=getRWGraphImage&taskEnv=xhr&__ts__="+(new Date().getTime())+"&messageID="+this.model.docModel.mid+"&nodeKey="+this.k+"&sliceID="+parseInt(this.node.data.sid,10)+"&imgType=4&width="+parseInt(Y,10)+"&height="+parseInt(Z,10),a=this.imgNode;if(a.src!==b){a.src=b;}},resize:function(){B(this);},resizeForDisplayState:function X(a,Z,d){var c=this.getFormats(),b=this.imgNode;if(d){var Y=this.domNode.style;Y.top=c.top;Y.left=c.left;Y.height=c.height;Y.width=c.width;}if(b){b.style.height=a+"px";}if(this.eg===undefined){if(a){this.retrieveGraphSrc(a,Z);this.refreshMap();}}}});function W(Y){var Z=Y&&Y.getAttribute&&Y.getAttribute("coords");Z=(Z&&Z.split(","))||[];switch(Z.length){case 3:return Z[2]*2;case 4:return Z[2]-Z[0];default:return 10;}}function A(a){var Z=[],e=document.body.offsetWidth,Y=document.body.offsetHeight,f=0,c=0,h=V[0]&&V[0].domNode?V[0].domNode.offsetLeft:0,g=V[0]&&V[0].domNode?V[0].domNode.offsetTop:0,l=Math.ceil(V.length/2),b=5,k=function(n,m){if(n+a+m+b>e){return e-a-m-b;}else{if(V.length>1&&n-m-b<0){return m+b;}}return n;},j=function(p,n,m){p+=n;var o=m==1?n:(m*n+(m-1)*b)/2;if(o>p){return 0;}else{if(o+p>Y){return Y-o*2;}else{return p-o;}}};for(var d=0;d<V.length;++d){f=Math.max(f,V[d].containerNode.offsetWidth);c=Math.max(c,V[d].containerNode.offsetHeight);}h=k(h,f);g=j(g,c,l);for(var d=0;d<V.length;++d){if(d%2==0){Z.push({l:h+a+b,t:g});}else{Z.push({l:h-V[d].containerNode.offsetWidth-b,t:g});g+=c+b;}}return Z;}var V=[];mstrmojo.DocXtabGraph.multiTooltip={_posMultiTp:function(Z){for(var Y=0;Y<V.length;++Y){V[Y].domNode.style.left=Z[Y].l+"px";V[Y].domNode.style.top=Z[Y].t+"px";}},open:function(j,f,d,Z,Y){if(!Y){Y={};}Y.e=f;Y.win=d;var b=0;if(Z&&Z.length){b=W(Z[0]);}for(var a=0;a<Z.length;++a){var h=V[a];if(!h||!mstrmojo.all[h.id]){h=new mstrmojo.Tooltip();var c=0,g=this;h.optimizePos=function(){c++;if(c>=V.length){c=0;g._posMultiTp(A(b));}};V.push(h);}j.richTooltip.content=Z[a]&&Z[a].getAttribute("ttl");h.open(j,Y);}},close:function(){for(var Y=V.length-1;Y>=0;--Y){V[Y].close();}V=[];}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.express.ui.SubtotalsWidget","mstrmojo.mstr.EnumDSSXMLDrillType","mstrmojo.ui.menus.EditorConfig","mstrmojo.vi.enums.EnumFeatures");var M=mstrmojo.hash,I=mstrmojo.array,G=mstrmojo.mstr.EnumDSSXMLDrillType,O={STATIC:0,DRILLING:1,SELECTOR_CONTROL:2,HYPERLINK:4,SORT:8,PIVOT:16,EDIT:32,GROUP:64,CALCULATION:128,GROUP_EDIT:256,KEEP_ONLY:512,TOTAL_HEADER:1024},C=mstrmojo.vi.enums.EnumFeatures;function F(W){return mstrmojo.resolveFeature("web-sort")&&!!(W&&(W.mix!==undefined&&W._e&&W._e.otp===4));}function R(X){var b=new mstrmojo.ui.menus.MenuConfig(),a=X.data,W=X.cfg,Z=[{n:mstrmojo.desc(1893,"Left"),btp:"l"},{n:mstrmojo.desc(1894,"Right"),btp:"r"},{n:mstrmojo.desc(13834,"To Beginning"),btp:"b"}],Y=this.delegateActionToXtab;if(!W.tabularGrid){Z.push({n:mstrmojo.desc(152,"Up"),btp:"u"},{n:mstrmojo.desc(153,"Down"),btp:"d"},{n:mstrmojo.desc(1891,"To Columns"),btp:"2"},{n:mstrmojo.desc(1890,"To Rows"),btp:"1"});}I.forEach(Z,function(c){if(X.xtab.model.isPvtButtonVisible(a,c.btp)){b.addMenuItem(c.n,"xt",function(){Y(X,"pivot",[c.btp]);});}});return b;}function B(Z,d){if(!Z.onDemandDrillDynamicItems){Z.onDemandDrillDynamicItems={};}var c="drill"+d,Y=Z.onDemandDrillItems,X=Z.onDemandDrillDynamicItems[c];if((!Z.onDemandDrillItems||Z.shouldUpdateDrillMenus)&&!Z.loadingDCM&&Z.gridData.odd){Z.loadingDCM=true;delete Z.shouldUpdateDrillMenus;var b=new mstrmojo.SimpleXHR({async:false});b.request("POST",mstrConfig.taskURL,{success:function a(e){I.forEach(e.dynamicMenus,function(f){Z.onDemandDrillDynamicItems[f.n]=f.items;if(f.n===c){X=f.items;}});Y=e.menuItems;Z.onDemandDrillItems=Y;delete Z.loadingDCM;}},{taskId:"RWOnDemandDrill",styleName:"OndemandDrillContextMenusStyle",viewMode:1,usePartDisplay:1,docGridKey:Z.k,rwb:Z.model.docModel.bs});}var W=[];I.forEach(X,function(j){var e=j.idx,f=Y[e],h=JSON.parse(f.subMenuIndices||"[]");if(h.length>0){var g=[];I.forEach(h,function(k){g.push(Y[k]);});f.items=g;}W.push(f);});return W;}function S(X){var W="";switch(X){case G.DssXmlDrillToChild:W="drillDown";break;case G.DssXmlDrillToParent:W="drillUp";break;case G.DssXmlDrillToTemplate:W="drillTemplate";break;}return W;}function K(X){var W=I.filter(X,function(Y){return[G.DssXmlDrillToChild,G.DssXmlDrillToParent].indexOf(Y.dt)>-1;});return W.length>0?"drill":"";}function U(W){return W&&W.mix!==undefined&&!!W._e;}function D(W){return W&&W.otp===12;}mstrmojo.rw.xtab.XtabMenuConfig=mstrmojo.declare(mstrmojo.ui.menus.MenuConfig,null,{scriptClass:"mstrmojo.rw.xtab.XtabMenuConfig",xtab:undefined,data:undefined,isActionAvailable:function J(X,W){return((((X&&X.at)||0)&W)>0);},delegateActionToXtab:function L(W,Z,X){var Y=W.xtab;Y[Z].apply(Y,[W.data].concat(X||[]));},buildXtabMenuConfig:function A(b){var g=this.xtab=b.xtab,Z=g.id,a=this.selectedData=b.data=b.data||(g&&b.td&&g.getCellForNode(b.td)),d=g.model.getCellTitleInfo(a),c={xtab:g,data:a,cfg:b},f=this.delegateActionToXtab;this.selectedNode=b.td;if(b.onClose){this.addPopupHandlers(Z,mstrmojo.emptyFn,b.onClose);}var h=g.model.getCellLinksInfo(a)||{},Y=h.links||[],W=this.isActionAvailable(a,O.HYPERLINK)&&Y.length>0&&(a.slm==undefined),X=this.isActionAvailable(a,O.DRILLING)&&(a.sdm==undefined)&&!!mstrmojo.resolveFeature(C.WEB_DRILL_AND_LINK),e=(a&&a.mix===undefined&&d.isSrcTitle&&a.otp!==-1&&a.avst>0);if(X){X=this.addDrillMenuItem(c)?true:false;}if(W){Y.forEach(function(k,j){this.addMenuItem(k.n||k.url||(k.target&&(k.target.n||k.target.did)),"",function(){f(c,"link",[j]);});},this);}if(X||W){this.addSeparator();}if(!mstrApp.isDossier){this.addPivotMenuItem(c);}this.addSortMenuItem(c);if(e){this.addSeparator();this.addShowTotalMenuItem(c);}if(!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode&&(mstrApp.isOIVM&&mstrApp.isOIVM()&&(D(a)||U(a)))){this.addViewFilterEditor(c);}this.addRemoveMenuItem(c);},addPivotMenuItem:function H(W){if(this.isActionAvailable(W.data,O.PIVOT)){var X=R.call(this,W);if(X.menus.length){this.addSubMenuItem(mstrmojo.desc(1889,"Move"),"",this.id,function(){return X;},W);this.addSeparator();}}},addDrillMenuItem:function P(a,c){var e=a.xtab,Y=a.data,d=this.delegateActionToXtab,W=function(f){f.onDemandDrillItems=null;f.onDemandDrillDynamicItems=null;};var Z=c?[c]:e.model.getAllDrillPathsForCell(Y),b=e.model.getCellTitleInfo(this.selectedData),X=B(e,b.title.id);if(Z.length<1&&X.length<1){return ;}this.addPopupMenuItem(mstrmojo.desc(145,"Drill"),this.id,function(){var f=new mstrmojo.ui.menus.MenuConfig({menuCssClass:K(Z),isHostedWithin:false,supportsScroll:true,alignWithAnchor:true,maxHeight:mstrmojo.dom.windowDim().h-50});I.forEach(Z,function(g){if(g&&g.k){if(mstrApp.isDossier&&!g.within){return ;}f.addMenuItem(g.n||"",S(g.dt),function(){e.shouldUpdateDrillMenus=true;d(a,"drill",[g]);W(e);});}});I.forEach(X,function(h){if(mstrApp.isDossier){var g=I.filter(h.items,function(j){return j.within;});if(g.length===0){return ;}}f.addPopupMenuItem(h.n,"",function(){var j=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350,isHostedWithin:false,alignWithAnchor:true,menuCssClass:K(h.items)});I.forEach(h.items,function(k){if(mstrApp.isDossier&&!k.within){return ;}j.addMenuItem(k.n,S(k.dt),function(){e.shouldUpdateDrillMenus=true;d(a,"drill",[k]);W(e);});});return j;});});return f;});},addViewFilterEditor:function V(W){if(!mstrmojo.resolveFeature("use-view-filter-editor")){return ;}this.addMenuItem(mstrmojo.desc(3938,"edit view filter..."),"xt",this.delegateActionToXtab.bind(this,W,"showViewFilter"),W);},addRemoveMenuItem:function N(X){if(!mstrmojo.resolveFeature("modify-grid-level-in-documents")){return ;}if(X.data._e){if(X.data._e.otp!==4){return ;}}if(X.data.otp===-1){return ;}if(X.data._tp){var W=X.data._tp._e;if(W){if(W.otp===4){return ;}}}this.addSeparator();this.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",this.delegateActionToXtab.bind(this,X,"removeUnit"),X);},addSortMenuItem:function T(W){var a=W.data,Y=this.delegateActionToXtab,b=this.isActionAvailable(a,O.SORT),Z=W.xtab.model,X=Z.isRecursiveAttribute&&Z.isRecursiveAttribute(a.id),c=X&&mstrApp.isAppStateDefault&&mstrApp.isAppStateDefault()&&!mstrApp.isDossier;if(b){this.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",function(){Y(W,"sort",[true]);},W);this.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",function(){Y(W,"sort",[false]);},W);if(c){this.addMenuItem(mstrmojo.desc(15676,"Custom Sort..."),"xt",function(){Y(W,"customSort",[a.axis]);},W);}}if(!W.cfg.hideAdvancedSort&&(b||F(a))&&!mstrApp.isDossier){this.addMenuItem(mstrmojo.desc(11099,"Advanced Sort..."),"xt",function(){Y(W,"advSort",[a.axis,W.ndeInfo]);},W);}},addShowTotalMenuItem:function E(W){this.addEditorMenuItem(mstrmojo.desc(6193,"Show Totals"),this.id,this.getSubtotalEditorConfig,M.copy(W,{isTotals:true}));},getSubtotalEditorConfig:function Q(X){var Y=X.data,a=X.xtab,W=a.getBasicSubtotalEditorConfig(Y.ast);W.fnOk=function Z(){var c=W.contents.getSubtotalTypes(),b=a.model;a.controller.onShowTotals(a,b.getShowTotalsUnitAction(Y.id,Y.otp,c[0],c[1]));};return W;}});mstrmojo.rw.xtab.XtabMenuConfig.ACTION_TYPES=O;mstrmojo.rw.xtab.XtabCellMenuItemContextType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus.MenuConfig");var D=mstrmojo.string,A=mstrmojo.dom,E=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(){var K=this,J=K.statusList,F=J&&J.length||0,G=K.statusConfig||new mstrmojo.ui.menus.MenuConfig(),L=function(M){return function(N){K.set("status",M);K.onStatusClick(M);};};if(!G.hasMenuItems()&&F){for(var H=0;H<F;H++){var I=J[H];G.addMenuItem(I.n,I.cls||"",L(I),K);}}else{}if(G.hasMenuItems()){G.alignment=K.alignment||{host:E.BOTTOM_LEFT,popup:E.TOP_LEFT};G.hostId=K.id;G.hostElement=K[K.hostElementName]||K.domNode;K.openPopup(G.newInstance());}}function C(){var F=this.statusConfig||this.statusList&&this.statusList.length>1;this.menuButtonNode.style.display=F?"":"none";}mstrmojo.ui.StatusButton=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.ui.StatusButton",markupString:'<div id="{@id}" class="mstrmojo-StatusButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}"><div class="mstrmojo-Button {@innerIconClass}"  mstrAttach:click><span class="mstrmojo-text"></span></div><div class="menuButton" mstrAttach:click></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},textSpanNode:function(){return this.domNode.firstChild.firstChild;},menuButtonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onstatusChange:function(){this.textSpanNode.innerHTML=D.encodeHtmlString(this.status&&this.status.n||"");},onstatusListChange:function(){C.call(this);},onstatusConfigChange:function(){C.call(this);}},status:null,statusList:null,statusConfig:null,onclick:function(F){var G=A.eventTarget(F.hWin,F.e);if(A.contains(this.menuButtonNode,G,true)){B.call(this);}else{if(A.contains(this.textNode,G,true)){this.onButtonClick(this.status,F);}}},onButtonClick:mstrmojo.emptyFn,onStatusClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.toolbars.Toolbar","mstrmojo.css");var D=mstrmojo.css;var B;mstrmojo.vi.ui.toolbars.TitleToolbar=mstrmojo.declare(mstrmojo.vi.ui.toolbars.Toolbar,null,{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",init:function F(H){this._super(H);D.addWidgetCssClass(this,"mstrmojo-VITitleToolbar");},markupMethods:{onvisibleChange:function A(){var H=this.visible,I=this.domNode;D.toggleClass(I,"visible",H);if(!H){D.onTransitionEnd(I,function(){D.addClass(I,"hidden");});}else{D.removeClass(I,"hidden");}}},getItemMarkup:function E(H){if(!B){B=this._super(H).replace("{@en@n}",'<div class="icn"></div>');}return B;},ontoolbarCfgChange:function G(H){var I=H.value;if(I){if(I.showContextMenu){I.addMenuToolbarBtn("","mnu");}if(I.hasCloseButton){I.addToolbarBtn(I.closeButtonText,"cls",function(K,J){J.parent.close();});}}this._super(H);},onItemContextMenu:function C(H){this.closePopup();if(H.fn){H.fn(H,this);return true;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.FieldSet","mstrmojo._FormatDefinition","mstrmojo.Label","mstrmojo.Pulldown","mstrmojo.ColorPicker");var C=mstrmojo.hash,A=mstrmojo.color,D=mstrmojo._FormatDefinition;var B=function(F,I,E){var H=["Left","Right","Top","Bottom"];for(var G=0;G<3;G++){F[H[G]+I]=E;}F.set(H[3]+I,E);};mstrmojo.BorderFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.BorderFormatter",cssClass:"mstrmojo-BorderFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){C.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"borders",cssClass:"mstrmojo-FormatEditor-border",legend:mstrmojo.desc(2886),children:[{scriptClass:"mstrmojo.Table",alias:"borderTable",cssText:"width:100%;",rows:1,cols:2,children:[{scriptClass:"mstrmojo.List",alias:"borderTypes",selectedIndex:0,cssClass:"borderTypes",items:[{n:'<img border="0" align="absmiddle" src="../images/borders_none.gif" alt=""> '+mstrmojo.desc(2057),v:1},{n:'<img border="0" align="absmiddle" src="../images/borders_all.gif" alt=""> '+mstrmojo.desc(2058),v:2},{n:'<img border="0" align="absmiddle" src="../images/borders_custom.gif" alt=""> '+mstrmojo.desc(2056),v:3}],slot:"0,0",bindings:{m:"this.parent.parent.parent.model",selectedIndex:function(){var E=this.m;if(C.isEmpty(E)){return 0;}if(E.LeftStyle==0&&E.TopStyle==0&&E.RightStyle==0&&E.BottomStyle==0){return 0;}else{if(E.LeftStyle==E.TopStyle&&E.LeftStyle==E.RightStyle&&E.LeftStyle==E.BottomStyle){return 1;}}return 2;}},onchange:function(E){if(this.m){var G=this.parent.borderAndColor;if(!G){return ;}if(this.selectedIndex===0){var H=["Left","Right","Top","Bottom"];for(var F=0;F<4;F++){this.m.set(H[F]+"Style","0");this.m.set(H[F]+"Color","0");}}}}},{scriptClass:"mstrmojo.Container",alias:"borderAndColor",markupString:'<div class="borderStyles"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.Container",alias:"allBordersContainer",markupString:'<div class="mstrmojo-FormatEditor-ColorLine-borders"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},bindings:{visible:"this.parent.parent.borderTypes.selectedIndex==1"},children:[{scriptClass:"mstrmojo.Table",alias:"allBorders",rows:1,cols:3,onshowChange:function(){if(this.show){B(this.m,"Style",this.styles.value);B(this.m,"Color",A.encodeColor(this.colors.fillColor));}},bindings:{m:"this.parent.parent.parent.parent.parent.model"},postCreate:function(){var F=["Left","Right","Top","Bottom"];var E=[{scriptClass:"mstrmojo.Pulldown",alias:"styles",items:D.BorderStyles,itemIdField:"v",bindings:{m:"this.parent.m",value:function(){var I=this.m.LeftStyle,K=this.m.RightStyle,J=this.m.TopStyle,H=this.m.BottomStyle;var G=0;if(I==K&&K==H&&H==J){G=mstrmojo.array.find(D.BorderStyles,"v",I);}G=G==-1?0:G;return this.items[G][this.itemIdField];}},onvalueChange:function(){if(this.parent.parent.visible){B(this.m,"Style",this.value);}},slot:"0,1"},mstrmojo.ColorPicker.createDropDown({alias:"colors",bindings:{m:"this.parent.m",fillColor:function(){var H=this.m.LeftColor,K=this.m.RightColor,J=this.m.TopColor,G=this.m.BottomColor;if(H==K&&K==G&&G==J){var I=H;}if(typeof (I)!="undefined"&&/^\d{1,8}$/.test(I)){return A.decodeColor(I);}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.visible){B(this.m,"Color",this.fillColor=="transparent"?"pru":A.encodeColor(this.fillColor));}},slot:"0,2"})];this.addChildren(E);}}]},{scriptClass:"mstrmojo.Container",alias:"customBordersContainer",markupString:'<div class="mstrmojo-FormatEditor-ColorLine-borders"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},bindings:{visible:"this.parent.parent.borderTypes.selectedIndex==2"},children:[{scriptClass:"mstrmojo.Table",alias:"customBorders",rows:1,cols:3,bindings:{m:"this.parent.parent.parent.parent.parent.model"},postCreate:function(){var H=["Left","Right","Top","Bottom"];var G=[];for(var F=0;F<H.length;F++){var E=H[F];G.push({scriptClass:"mstrmojo.Label",text:mstrmojo.desc({Left:3528,Right:3529,Top:3526,Bottom:3527}[E]),alias:E,slot:"0,0"},{scriptClass:"mstrmojo.Pulldown",items:D.BorderStyles,itemIdField:"v",pr:E+"Style",bindings:{m:"this.parent.m",value:function(){var K=this.m.LeftStyle,M=this.m.RightStyle,L=this.m.TopStyle,J=this.m.BottomStyle;var I=mstrmojo.array.find(D.BorderStyles,"v",this.m[this.pr]);I=I==-1?0:I;return this.items[I][this.itemIdField];}},onvalueChange:function(){if(this.parent.parent.visible){this.m.set(this.pr,this.value);}},slot:"0,1"},mstrmojo.ColorPicker.createDropDown({cssClassx:"mstrmojo-FormatEditor-colorPicker",alias:E+"Color",pr:E+"Color",bindings:{m:"this.parent.m",fillColor:function(){var J=this.m.LeftColor,M=this.m.RightColor,L=this.m.TopColor,I=this.m.BottomColor;var K=this.m[this.pr];if(typeof (K)!="undefined"&&/^\d{1,8}$/.test(K)){return A.decodeColor(K);}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.visible){this.m.set(this.pr,this.fillColor=="transparent"?"pru":A.encodeColor(this.fillColor));}},slot:"0,2"}));}this.addChildren(G);}}]}],slot:"0,1"}]},{scriptClass:"mstrmojo.Label",cssClass:"borderPreview",text:mstrmojo.desc(7941),bindings:{m:"this.parent.parent.model",cssText:function(){var G={0:"None",3:"Dashed",4:"Dotted",6:"Double",7:"Solid"},E={1:"Thin",5:"Thick",6:"medium"};var F=this.parent.borderTable.borderTypes.selectedIndex;return";border-left-style: "+(G[this.m.LeftStyle]||"solid")+";border-right-style: "+(G[this.m.RightStyle]||"solid")+";border-top-style: "+(G[this.m.TopStyle]||"solid")+";border-bottom-style: "+(G[this.m.BottomStyle]||"solid")+";border-left-color: "+A.decodeColor(this.m.LeftColor||"0")+";border-right-color: "+A.decodeColor(this.m.RightColor||"0")+";border-top-color: "+A.decodeColor(this.m.TopColor||"0")+";border-bottom-color: "+A.decodeColor(this.m.BottomColor||"0")+";border-left-width: "+(E[this.m.LeftStyle]||"thin")+";border-right-width: "+(E[this.m.RightStyle]||"thin")+";border-top-width: "+(E[this.m.TopStyle]||"thin")+";border-bottom-width: "+(E[this.m.BottomStyle]||"thin");}}}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo._FormatDefinition","mstrmojo.Table","mstrmojo._HasLayout","mstrmojo.color","mstrmojo.ColorPicker");var D=mstrmojo.hash,C=mstrmojo.array,F=mstrmojo._FormatDefinition,B=mstrmojo.color;var A=function(G){var H={scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-fontFamily",itemCssClass:"mstrmojo-FormatEditor-bullet",selectedIndex:0,itemIdField:"v",itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">{@n}</div></div>'};return D.copy(G,H);};var E=function(I){var H=I.alias,G=I.label,J=I.pr;return{alias:H,scriptClass:"mstrmojo.TristateCheckBox",text:G,checked:false,grayed:false,bindings:{m:I.modelBinding,checked:function(){return this.m[J]==-1;},grayed:function(){return(typeof this.m[J]=="undefined")||this.m[J]=="pru";}},oncheckedChange:function(K){if(this.m){this.m.set(J,this.checked?-1:0);}}};};mstrmojo.FontFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.FontFormatter",cssClass:"mstrmojo-FontFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){D.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.Table",layout:[{cells:[{},{},{}]},{cells:[{},{colSpan:2}]}],children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2172),slot:"0,0"},A({items:F.Families,itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text" style="font-family:{@n}">{@n}</div></div>',pr:"Name",bindings:{selectedIndex:function(){var H=this.parent.parent.model;if(H){var I=H.Name,G=C.find(this.items,this.itemIdField,I);return G==-1?0:G;}}},onchange:function(){var G=this.parent.parent.model;if(G){G.set("Name",this.selectedItem.v);}},slot:"0,0"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3059),slot:"0,1"},A({items:F.Styles,cssClass:"mstrmojo-FormatEditor-fontStyle",bindings:{selectedIndex:function(){var K=this.parent.parent.model;if(K){var I=K.Bold||"",H=K.Italic||"",J=I==""&&H==""?"":I+","+H,G=mstrmojo.array.find(this.items,this.itemIdField,J);G=G==-1?mstrmojo.array.find(this.items,"v2",J):G;return(G==-1?0:G);}}},onchange:function(){var I=this.parent.parent.model;if(I&&this.selectedItem){var H=this.selectedItem.v.split(","),G=italic="pru";if(H[0]!="pru"){G=H[0]=="-1"?"-1":"0";italic=H[1]=="-1"?"-1":"0";}I.set("Bold",G);I.set("Italic",italic);}},slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2178),slot:"0,2"},A({items:F.Sizes,cssClass:"mstrmojo-FormatEditor-fontSize",bindings:{selectedIndex:function(){var H=this.parent.parent.model;if(H){var I=H.Size,G=C.find(this.items,this.itemIdField,I);return G==-1?0:G;}}},onchange:function(){var G=this.parent.parent.model;if(G){G.set("Size",this.selectedItem.v);}},slot:"0,2"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3060),slot:"1,0"},{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-FormatEditor-fontEffect",postCreate:function(){this.addChildren(E({alias:"Underline",label:mstrmojo.desc(3061),pr:"Underline",modelBinding:"this.parent.parent.parent.model"}));this.addChildren(E({alias:"Strikeout",label:mstrmojo.desc(3062),pr:"Strikeout",modelBinding:"this.parent.parent.parent.model"}));},slot:"1,0"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3063),slot:"1,1"},mstrmojo.ColorPicker.createDropDown({pr:"Color",bindings:{fillColor:function(){var G=this.parent.parent.model;if(G){var H=G[this.pr];if(typeof (H)!="undefined"&&/^\d{1,8}$/.test(H)){return B.decodeColor(H);}}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.model){this.parent.parent.model.set(this.pr,this.fillColor=="transparent"?"pru":B.encodeColor(this.fillColor));}},slot:"1,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2036),slot:"1,1"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-FormatEditor-fontPreview",text:mstrmojo.desc(2037),bindings:{m:"this.parent.parent.model",cssText:function(){var H=this.m.Color,J=this.m.Size,K=this.m.Name,I=this.m.Bold,G=this.m.Italic,M=this.m.Underline,L=this.m.Strikeout;H=/^\d{1,8}$/.test(H)?B.decodeColor(H):B.decodeColor(F.DefaultFormat.FormattingFont.Color);J=J||F.DefaultFormat.FormattingFont.Size;K=K||F.DefaultFormat.FormattingFont.Name;I=I=="-1"?"bold":"normal";G=G=="-1"?"italic":"normal";M=parseInt(M)==-1;L=parseInt(L)==-1;return";font-family:"+K+";font-style:"+G+";font-weight:"+I+";font-size:"+J+"pt;color:"+H+";text-decoration:"+(M?" underline ":"")+(L?" line-through ":"");}},slot:"1,1"}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.FieldSet","mstrmojo.Label","mstrmojo.ColorPicker");var A=mstrmojo.hash,B=mstrmojo.color;mstrmojo.FillFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.FillFormatter",cssClass:"mstrmojo-FillFormatter",isChart:false,markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){A.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"fill",cssClass:"mstrmojo-FormatEditor-fill",legend:mstrmojo.desc(2885,"Fill"),bindings:{legend:"this.parent.isChart ? mstrmojo.desc(3902, 'Series Colors') : mstrmojo.desc(2885, 'Fill')"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2060,"Color"),cssClass:"label"},mstrmojo.ColorPicker.createDropDown({bindings:{m:"this.parent.parent.model",fillStyle:function(){var H=this.m,J=parseInt(H.FillStyle,10);if(J===2){var E=parseInt(H.GradientAngle,10),I=E===0?1:0,D=B.decodeColor(H.FillColor),K=B.decodeColor(H.GradientColor),C=parseInt(H["Gradient"+(E===0?"X":"Y")+"Offset"],10)===100?1:0,G=(C!==1)?mstrmojo.css.buildGradient(I,D,K):mstrmojo.css.buildGradient(I,K,D);this.set("gradientCss",G.n+":"+G.v);this._updateGradientInfo();}else{var F=this.m.FillColor;if(F!==undefined&&/^\d{1,8}$/.test(F)){F=B.decodeColor(F);}else{F="transparent";}this.set("fillColor",F);}return J||0;}},_updateGradientInfo:function(){var C=this.m;this.gradient=mstrmojo.hash.copy({FillColor:B.decodeColor(C.FillColor),GradientColor:B.decodeColor(C.GradientColor)},A.copy(C));},onfillColorChange:function(){this.m.FillColor=(this.fillColor==="transparent"?"pru":B.encodeColor(this.fillColor));this.m.FillStyle=0;},ongradientChange:function(C){var F=["FillStyle","FillColor","GradientColor","GradientXOffset","GradientYOffset","GradientAngle"],E;for(E=0;E<F.length;E++){var D=C.value[F[E]];this.m[F[E]]=/Color$/.test(F[E])?B.encodeColor(D):D;}this.m.FillStyle=2;}},{showGradients:false})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.TextBox","mstrmojo.Button","mstrmojo.HBox","mstrmojo.EnumAuthenticationModes","mstrmojo.UsherLogin","mstrmojo.string","mstrmojo.cookies");mstrmojo.requiresDescs(17,18,221,11804,11863);var F=mstrmojo.EnumAuthenticationModes,D={};D[F.LDAP]=mstrmojo.desc(1947,"LDAP Authentication");D[F.DATABASE]=mstrmojo.desc(1948,"Database Authentication");var L={LIVE_OR_HL:0,PERSISTED:1};function B(){return(JSON.parse(decodeURIComponent(mstrmojo.cookies.getCookieSetting("lastMsgID")||"{}")))[mstrConfig.lastMsgKey];}function C(){var Q=this,R=Q.stdLoginInfo,O=R.user.value,N=R.tsvCode.value,S=R.pwd.value,T={taskId:"login",server:mstrConfig.serverName,project:mstrmojo.string.decodeHtmlString(mstrConfig.projectName),port:mstrConfig.serverPort,authMode:mstrConfig.authMode,setAsActiveSession:true};var P=B();if(P){T.msgID=P;}if((this.authMode&(F.STANDARD|F.LDAP|F.DATABASE))>0){T.userid=O;T.password=S;T.tsvCode=N;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(W){if(W&&W.sessionState){mstrApp.updateSessionState(W.sessionState);if(mstrApp.sessionManager){mstrApp.sessionManager.restart();}var Z=W;var Y=Z.servletState;if(Y){if(mstrApp){mstrApp.servletState=Y;}if(mstrConfig){mstrConfig.servleState=Y;}}var V=W.resCode;if(V==L.LIVE_OR_HL&&(mstrApp.isVI||mstrApp.scriptClass==="mstrmojo.OIVMApp"||mstrApp.analysisID)){mstrmojo.xhr.request("post",mstrConfig.taskURL,{success:function(){var a=Q.config.callback,b=a.success;if(b){b(Z);}},failure:function(){mstrmojo.form.send({evt:3010,src:mstrApp.name+".3010"},null,"POST");}},{taskId:"docXMLResults",sessionState:W.sessionState,msgID:W.msgID,resultFlags:33554432});}else{var U=Q.config.callback,X=U.success;if(X){X(Z);}}}Q.destroy();},failure:function(U){if(Q.authMode===mstrmojo.EnumAuthenticationModes.NTCREDENTIAL){Q.set("visible",true);}mstrmojo.alert(U.getResponseHeader("X-MSTR-TaskFailureMsg"),null,null,Q.zIndex);}},T);}function M(){if(mstrApp.sessionManager){mstrApp.sessionManager.gotoLogoutPage();}}mstrmojo.LoginEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.LoginEditor",cssClass:"mstrmojo-LoginEditor",title:mstrmojo.desc(11804,"Log in to"),btnAlignment:"right",help:null,config:{callback:{},taskParams:{}},authMode:F.STANDARD,usherEnabled:false,init:function K(N){this._super(N);this.title+=" "+mstrApp.projectName;this.set("authMode",parseInt(mstrConfig.authMode,10));if(this.isUsherLogin()){mstrmojo.css.addWidgetCssClass(this,"usher");}},isUsherLogin:function(){return this.authMode===F.USHER;},onvisibleChange:function J(){if(this.visible&&(mstrmojo.dom.isFF||mstrmojo.dom.isWK)){var N=this.stdLoginInfo.user;window.setTimeout(function(){N.focus();},50);}},onOpen:function E(){if(this.authMode===mstrmojo.EnumAuthenticationModes.NTCREDENTIAL){this.set("visible",false);}},onClose:function G(){M();},destroy:function I(){mstrmojo.dom.detachEvent(document.body,"mousedown",this.stopPropagation,true);this._super();},postBuildRendering:function A(){if(this.authMode===mstrmojo.EnumAuthenticationModes.NTCREDENTIAL){C.call(this);return ;}else{var N=this._super();this.stopPropagation=function(O){O.stopPropagation();};mstrmojo.dom.attachEvent(document.body,"mousedown",this.stopPropagation,true);return N;}},preBuildRendering:function H(){if(this.isUsherLogin()){var O=this,N=mstrmojo.insert({scriptClass:"mstrmojo.UsherLogin",alias:"usherLogin",onUsherLogin:function(){mstrConfig.authMode=F.USHER;C.call(O);}});this.addChildren([N],1);}return this._super();},children:[{scriptClass:"mstrmojo.Label",cssText:"margin-bottom: 20px; line-height: 1.5em;",text:mstrmojo.desc(11863,"Your user session has timed out due to inactivity, and you have been automatically logged out. Please log in again.")},{scriptClass:"mstrmojo.Box",alias:"stdLoginInfo",cssClass:"std-login-container",bindings:{visible:function(){return this.parent.authMode!==F.USHER;}},children:[{scriptClass:"mstrmojo.TextBox",alias:"user",cssClass:"login-username",cssDisplay:"block",hint:mstrmojo.desc(17,"User name"),postCreate:function(){if(mstrmojo.dom.isIE9||mstrmojo.dom.isIE8||mstrmojo.dom.isIE7){this.emptyText=mstrmojo.desc(17,"User name");}},onEnter:function(){C.call(this.parent.parent);}},{scriptClass:"mstrmojo.TextBox",alias:"pwd",cssClass:"login-pwd",cssDisplay:"block",hint:mstrmojo.desc(18,"Password"),type:"password",postCreate:function(){if(mstrmojo.dom.isIE9||mstrmojo.dom.isIE8||mstrmojo.dom.isIE7){this.emptyText=mstrmojo.desc(18,"Password");}},onEnter:function(){C.call(this.parent.parent);}},{scriptClass:"mstrmojo.TextBox",alias:"tsvCode",cssClass:"login-tsvCode",cssDisplay:"block",hint:mstrmojo.desc(13825,"Usher code"),bindings:{visible:function(){return mstrConfig.features["is-two-step-verification-required"];}},postCreate:function(){if(mstrmojo.dom.isIE9||mstrmojo.dom.isIE8||mstrmojo.dom.isIE7){this.emptyText=mstrmojo.desc(13825,"Usher code");}},onEnter:function(){C.call(this.parent.parent);}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-LoginEditor-authMode",bindings:{visible:function(){return this.parent.parent.authMode===F.LDAP||this.parent.parent.authMode===F.DATABASE;},text:function(){return D[this.parent.parent.authMode]||"";}}}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btns",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:mstrmojo.desc(26,"Login"),bindings:{enabled:"this.parent.parent.stdLoginInfo.user.value.length > 0",visible:function(){return this.parent.parent.authMode!==F.USHER;}},onclick:function(){C.call(this.parent.parent);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){M();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;if(!!mstrApp.isWSStyling){this.layoutConfig=null;}this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,maxLength:G.maxLength,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasLayout","mstrmojo._HasSuggestion","mstrmojo.css");var G=mstrmojo.css,D="clear";function E(){this.searchTriggered(this.inputNode.value);}mstrmojo.ui.SearchBox=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.SearchBox",markupString:'<div id={@id} class="mstrmojo-ui-SearchBox cf {@cssClass}" style="{@cssText}"><input class="mstrmojo-ui-sb-input" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" mstrAttach:keyup,blur,focus/><div class="mstrmojo-ui-sb-btn" mstrAttach:click ></div></div>',markupSlots:{inputNode:function I(){return this.domNode.firstChild;},searchNode:function B(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{inputNode:"20px",searchNode:"20px"},w:{inputNode:"100%",searchNode:"22px"},xt:true},getLayoutOffsets:function(){return{w:2,h:0};},searchNode:undefined,inputNode:undefined,searchDelay:-1,init:function M(P){this._super(P);var O=this.searchDelay;if(O===-1||isNaN(O)){this.searchDelay=parseInt(mstrApp.getSearchAutoCompleteDelay(),10);}},onfocus:function N(O){var P=O.getTarget();if(P===this.inputNode){this.inputNode.placeholder="";G.addClass(this.domNode,"onInputFocus");}},onblur:function H(O){var P=O.getTarget();if(P===this.inputNode){this.inputNode.placeholder="Search...";G.removeClass(this.domNode,"onInputFocus");}},onclick:function L(O){var P=O.getTarget();if(P===this.searchNode){if(this._hasText){this.clearSearch();}else{E.call(this);}}},onkeyup:function A(Q){var P=Q.hWin,T=Q.e||P.event;if(T.keyCode===27){this.clearSearch();return ;}var S=this,O=this.text,U=this.text=this.inputNode.value,R=this._hasText=U.length>0;if(O!==U){G.toggleClass(this.searchNode,[D],R);window.clearTimeout(this._searchTimeoutId);this._searchTimeoutId=window.setTimeout(function(){E.call(S);},this.searchDelay);}},unrender:function F(){this.text="";this._super();},clearSearch:function J(O){this.text=this.inputNode.value="";G.removeClass(this.searchNode,[D]);delete this._hasText;if(!O){E.call(this);}this.postClearSearch();},isClear:function C(){return !this.text||this.text.length===0;},postClearSearch:mstrmojo.emptyFn,searchTriggered:function K(O){}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo._HasSuggestion");var F=-1,E=0,D=1;mstrmojo._ValidateSuggestions=mstrmojo.provide("mstrmojo._ValidateSuggestions",mstrmojo.hash.copy(mstrmojo._HasSuggestion,{_mixinName:"mstrmojo._ValidateSuggestions",itemValidationField:"did",verifyObject:function C(J,H){var M=this.candidates,L;if(M){var I=M.items,G=mstrmojo.array.find(I,this.itemValidationField,H.data[this.itemValidationField]);G=G>-1?G:mstrmojo.array.find(I,this.itemField,J);if(G>-1){H.updateData(I[G]);L=E;}else{if(M.isComplete){L=D;}}}if(L!==undefined){return L;}var K=this._vqueue=this._vqueue||[];K.push({pattern:J,id:H.data[this.itemIdField]});if(!this._vInProgress){this.verifyNextCandidate();}return F;},verifyNextCandidate:function B(){var G=this._vqueue;if(!G||G.length===0){this._vInProgress=false;return ;}this.verifyCandidate(G.shift());},verifyCandidate:function A(H){var G=this;this._vInProgress=true;this.getCandidatesThroughTaskCall({pattern:H.pattern,blockBegin:1,blockCount:G.noCache?-1:this.suggestCount,isVerify:true},{success:function(N){var K=G.ctxtBuilder.itemWidgets,J=K&&K.length,O,M;for(M=0;M<J;M++){if(K[M].data[G.itemIdField]===H.id){O=K[M];break;}}if(!O){return ;}var L=N.items;if(L&&L.length===1){O.updateData(L[0]);}else{if(L&&L.length>1){var I=mstrmojo.array.find(L,"did",O.data.did);if(I>-1){O.updateData(L[I]);}else{O.set("state",D);}}else{O.set("state",D);}}},failure:function(I){mstrmojo.alert(I.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){G.verifyNextCandidate();}});}}));mstrmojo._ValidateSuggestions.ENUM_STATES={UNDETERMINED:F,VALID:E,INVALID:D};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo._ValidateSuggestions","mstrmojo.WidgetList","mstrmojo.Editor","mstrmojo.LegacySuggestionList");mstrmojo.Enum_OIB_States=mstrmojo.hash.copy(mstrmojo._ValidateSuggestions.ENUM_STATES,{EDITING:2,ADDING:3,EMPTY:4});mstrmojo.Enum_OIB_States_CSS=(function(){var AF=mstrmojo.Enum_OIB_States,AE={},AG;for(AG in AF){if(AF.hasOwnProperty(AG)){AE[String(AF[AG])]=AG;}}return AE;}());var Q=mstrmojo.dom,S=mstrmojo.hash,a=mstrmojo.Enum_OIB_States,I=0,c="_did_",AA=mstrmojo.Enum_Keys,AC=80,U=200;function X(){return(mstrApp&&mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay())?mstrApp.searchAutoCompleteDelay():U;}function P(){return I++;}function h(AE){return(AE&&AE.state===a.ADDING);}function q(AE){var AF={n:AE||"",state:a.EMPTY};AF[c]=-2;return AF;}function O(AE){return(AE&&AE.state===a.EMPTY);}function v(AF){var AG=AF.items,AE=AG&&AG.length;if(!AE){return true;}return(AE===1&&h(AG[0]))||(AE===2&&O(AG[0])&&h(AG[1]));}function m(){var AF=this.ctxtBuilder.itemWidgets,AE=AF[AF.length-1];if(AE&&AE.isAdding){var AG=this;Q.attachEvent(AE.domNode,"click",function(){AG.editingIdx=null;});return AE;}return null;}function L(){var AE=this.editingIdx;if(AE!==null){return this.ctxtBuilder.itemWidgets[AE];}return m.call(this);}function D(){this.isActive=false;var AF=this.emptyText||"",AG=this.items;if(v(this)&&!O(AG[0])&&(AF.length>0)){this.add([q(AF)],0);var AH=this.ctxtBuilder.itemWidgets[0];AH.set("shouldEllipsize",true);AH.doEllipsize();}var AE=L.call(this);if(AE){if(h(AE)&&this.showEmptyItem){AE.domNode.style.visibility="hidden";}AE.blur();}Q.detachEvent(document.body,"mousedown",this._mousedownHandler);if(this.tabNavigable){Q.detachEvent(AE.inputNode,"keydown",this._tabKeyHander);}}function N(){if(!this.enabled){return ;}this.isActive=true;if(O(this.items[0])){this.remove(0);}var AE=L.call(this);if(AE){if(h(AE)&&!this.isFull){AE.domNode.style.display="block";AE.domNode.style.visibility="visible";}this.scrollTo(AE.data);AE.focus();}Q.attachEvent(document.body,"mousedown",this._mousedownHandler);if(this.tabNavigable){Q.attachEvent(AE.inputNode,"keydown",this._tabKeyHander);}}mstrmojo.ObjectInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._ValidateSuggestions],{scriptClass:"mstrmojo.ObjectInputBox",cssClass:"mstrmojo-ObjectInputBox",emptyText:"",showEmptyItem:true,items:null,itemField:"n",dynamicVerify:true,suggestCount:10,candidates:null,makeObservable:true,renderOnScroll:false,editingIdx:null,isActive:false,maxObjectCount:null,isFull:false,suggestionListClass:"mstrmojo.LegacySuggestionList",acptSugItemOnly:false,useKeyDelay:false,showSuggestionOnEdit:true,tabNavigable:false,getSearchPattern:function(){var AE=L.call(this);if(AE){return AE.getSearchPattern();}return"";},getSuggestionTarget:function n(){return this.suggestTarget;},onsuggestTargetChanged:function p(AE){this._request_pattern=null;},getSuggestionPos:function d(){return this._pop_cfg;},onSuggestionItemSelect:function w(AE){if(this.suggestTarget){this.suggestTarget.setItem(AE[this.itemField],AE,false);}this.hideSuggestion();this.closePopup();},hideEditButton:function(AE){return !!this.noEditButton;},_set_items:function l(AJ,AG){AG=mstrmojo.hash.clone(AG)||[];var AI=this.maxObjectCount;this.set("isFull",(AI&&AG.length>=AI));if(AG.length===0){var AF=this.emptyText||"";if(AF.length>0){AG.push(q(AF));}}var AH={n:"",state:a.ADDING};AH[c]=-1;AG.push(AH);var AE=AG[AG.length-1];if(AE&&h(AE)&&this.maxObjectCount&&(this.getSelectedObjects().length>=this.maxObjectCount)){this.set("isFull",true);}this.itemIdField=c;return this._super(AJ,AG);},add:function E(AF,AE){var AG=m.call(this);if(!this.maxObjectCount||this.getSelectedObjects().length<this.maxObjectCount){this._super(AF,AE);}if(!v(this)&&O(this.items[0])){this.remove(0);}if(AG){AG.adjustInputWidth();if(this.maxObjectCount&&(this.getSelectedObjects().length===this.maxObjectCount)){this.set("isFull",true);AG.domNode.style.display="none";}else{AG.domNode.style.display=this.showEmptyItem?"none":"";}}},remove:function b(AE){this._super(AE);var AF=m.call(this);if(AF){if(this.maxObjectCount&&(this.getSelectedObjects().length<this.maxObjectCount)){this.set("isFull",false);}AF.adjustInputWidth();}},preBuildRendering:function(){if(this.items==null||this.items.length==0){this.set("items",[]);}if(this._super){this._super();}},postBuildRendering:function Z(){this._super();var AF=this,AE=m.call(AF);if(AE&&(this.showEmptyItem||this.isFull)){AE.domNode.style.display="none";}this._clickHandler=function(){N.call(AF);};this._mousedownHandler=function(AG){if(!AF.isActive||AF.browserShown){return ;}var AH=Q.eventTarget(self,AG);if(AH&&AH.parentNode&&!Q.contains(L.call(AF).domNode,AH,false,document.body)&&!Q.contains(AF.suggestionPopup.domNode,AH,false,document.body)){D.call(AF);}};if(this.tabNavigable){this._tabKeyHander=function(AG){var AH=parseInt(AG.keyCode||AG.charCode,10);if(AH===AA.TAB){if(!AF.isActive||AF.browserShown){return ;}D.call(AF);}};}Q.attachEvent(this.domNode,"click",this._clickHandler);},nextId:P,item2textCss:function M(AE){return AE.cssClass||"";},itemFunction:function G(AG,AE,AF){AG[AF.itemIdField]=P();var AH=new mstrmojo.ObjectItem({parent:AF,itemField:AF.itemField,cssClass:AF.item2textCss(AG),data:AG,showSuggestionOnEdit:this.showSuggestionOnEdit,enabled:AF.enabled});AF.attachEventListener4ItemWidget(AH,AF);return AH;},attachEventListener4ItemWidget:function j(AI,AG){var AF=["ItemEditBegin","ItemEditEnd","ItemDeletePrev","ItemDelete","ItemAdd","SuggestionOn","SuggestionOff","ItemEditing"],AE=AF.length,AH;for(AH=0;AH<AE;AH++){AI.attachEventListener(AF[AH],AG.id,"_itemChangeHandler");}return AI;},getSelectedObjects:function k(){if(v(this)){return[];}var AE=this.items,AF=AE.length-1;if((AF>-1)&&h(AE[AF])){return AE.slice(0,AF);}return AE.concat();},isValid:function C(){var AF=this.ctxtBuilder.itemWidgets,AE=AF&&AF.length,AG;for(AG=0;AG<AE;AG++){if(!AF[AG].isValid()){return false;}}return true;},isEmpty:function V(){return v(this);},_itemChangeHandler:function(AH){var AJ=AH.name,AK=AH.d,AF,AE=this.items.length,AG;switch(AJ){case"ItemEditBegin":if(this.editingIdx!==null){AG=L.call(this);if(AG){AG.blur();}}AF=this.itemIndex(AK);this.editingIdx=AF;N.call(this);break;case"ItemEditEnd":this.editingIdx=null;if(AH.deactivate){D.call(this);}else{N.call(this);}AG=m.call(this);if(AG){AG.adjustInputWidth();}break;case"ItemDelete":if(this.editingIdx!==null){AG=L.call(this);if(AG){AG.blur();}this.editingIdx=null;}AF=this.itemIndex(AK);this.remove(AF);if(!AH.deactivate){this.editingIdx=null;N.call(this);}else{if(!this.isActive){D.call(this);}else{N.call(this);}}break;case"ItemDeletePrev":if(AE>1){this.remove(AE-2);}break;case"ItemAdd":var AI=S.copy(AH.d);this.add([AI],AE-1);if(AH.deactivate){D.call(this);}else{N.call(this);}break;case"SuggestionOn":this.set("suggestTarget",AH.target);this._pop_cfg={target:AH.target,left:AH.l,top:AH.t,zIndex:this.zIndex?this.zIndex:100};this.showSuggestion(AH.pattern);break;case"SuggestionOff":this.set("suggestTarget",null);this.hideSuggestion();break;}if(this.onitemchange&&(AJ==="ItemEditEnd"||AJ==="ItemAdd"||AJ==="ItemDelete"||AJ==="ItemDeletePrev"||AJ==="ItemEditing")){this.onitemchange();}},unrender:function B(AF){var AE=this.suggestionPopup;if(AE.hasRendered){AE.unrender(false);}if(this._super){this._super(AF);}},destroy:function u(AF){var AE=this.suggestionPopup;if(AE&&AE.hasRendered){AE.destroy(false);}if(this._super){this._super(AF);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ObjectInputBox,{onenabledChange:mstrmojo.Widget.enabledMarkupMethod});mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasEllipsis");var r="mstrmojo-ObjectItem-text";mstrmojo.ObjectItem=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasEllipsis],{scriptClass:"mstrmojo.ObjectItem",markupString:'<div id={@id} class="mstrmojo-ObjectItem" style="{@cssText}"><div class="mstrmojo-ObjectItem-displayNode"><span title=" {@en@title}" class="'+r+' {@cssClass}"></span><img class="mstrmojo-ObjectItem-edit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1088,"Edit")+'" onclick="mstrmojo.all[\'{@id}\'].edit()"/><img class="mstrmojo-ObjectItem-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(629,"Delete")+'" onclick="mstrmojo.all[\'{@id}\'].del(arguments[0])"/></div><div class="mstrmojo-ObjectItem-editNode"><input type="text" class="mstrmojo-ObjectItem-input" mstrAttach:keyup,keydown/></div></div>',markupSlots:{displayNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.firstChild.firstChild;},editButtonNode:function(){return this.domNode.firstChild.childNodes[1];},delButonNode:function(){return this.domNode.firstChild.lastChild;},inputNode:function(){return this.domNode.childNodes[1].firstChild;}},markupMethods:{oncssClassChange:function(){this.textNode.className=r+" "+this.cssClass;},onstateChange:function(){var AG=this.state,AF=mstrmojo.Enum_OIB_States_CSS[AG],AE=this.domNode;if(AG===a.EMPTY){AE.innerHTML=this.enabled?'<div class="mstrmojo-ObjectItem-emptyText">'+this.text+"</div>":"";}else{if(AG===a.EDITING){this.reduceWidth();}}AE.className="mstrmojo-ObjectItem "+AF;this.updateButtonsVisibility(this.data);},ontextChange:function(){this.inputNode.value=this.text;this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);}},reduceWidth:function(){var AE=Math.round(this.displayNode.clientWidth);this.editNode.style.width=AE-4+"px";this.inputNode.style.width=AE-9+"px";},updateButtonsVisibility:function AD(){if(this.parent.hideEditButton(this.data)){this.editButtonNode.style.display="none";}},state:a.VALID,onstateChange:function f(AE){this.data.state=this.state;},ontextChange:function H(AE){this.data[this.itemField]=this.text;},onfocus:function x(){N.call(this.parent);},updateData:function F(AE){S.copy(AE,this.data);this.set("state",a.VALID);this.set("text",this.data[this.itemField]);this.set("cssClass",this.parent.item2textCss(this.data));},init:function z(AF){this._super(AF);var AH=this.data,AE=AH.state,AG=this.parent;AE=this.initState();this.cssClass=AG.item2textCss(AH);this.text=AH[this.itemField];this.state=AE;this.isAdding=h(AH);this.useRichTooltip=true;this.title=this.text;},initState:function K(){var AF=this.parent,AG=this.data,AE=AG.state;if(AG&&AG.did){AG.state=a.VALID;return AG.state;}if(typeof AE==="undefined"){AE=AF.dynamicVerify?AF.verifyObject(AG[this.itemField],this):a.UNDETERMINED;AG.state=AE;}return AE;},isValid:function C(){var AE=parseInt(this.state,10);return(AE!==a.INVALID&&AE!==a.UNDETERMINED);},adjustInputWidth:function A(){if(this.isAdding){var AH=this.inputNode.style;AH.width=AC+"px";var AG=this.domNode.parentNode,AE=AG.parentNode.offsetWidth,AF=Math.max(AE-AG.offsetLeft-20,AC);if(!isNaN(AF)){AH.width=AF+"px";}}},blur:function T(){this.hideSuggestion();if(!this.isActive){return ;}this.isActive=false;var AG=this.inputNode,AE=AG.value,AF=this.parent;window.setTimeout(function(){try{AG.blur();}catch(AH){}},0);if(!AE){return ;}if(AF.acptSugItemOnly&&this._tWas_){this.set("text",AE);this.set("text","");this._tWas_=null;return ;}this.setItem(AE,null,true);},focus:function t(){var AF=this.inputNode,AE=this.isActive;window.setTimeout(function(){try{AF.focus();if(AF.createTextRange&&!AE){var AH=AF.createTextRange(),AG=AF.value.length;AH.move("character",AG);AH.select();}else{if(AF.setSelectionRange&&!AE){var AG=AF.value.length;AF.setSelectionRange(AG,AG);}}}catch(AI){}},0);this.isActive=true;},prekeydown:function J(AE){var AG=this.inputNode.value,AF=parseInt(AE.e.keyCode||AE.e.charCode,10),AI=this.parent;if(!AG){return ;}if(AF===AA.TAB||AF===AA.ENTER){if(AF===AA.ENTER){Q.preventDefault(AE.hWin,AE.e);}var AH=AI.getSelected();if(AH&&AH.did){AI.handleSuggestionItemSelect(AH);}else{this.hideSuggestion();if(!AI.acptSugItemOnly){this.setItem(AG,null,false);}else{this.set("text",AG);this.set("text","");}}}else{if(AF===AA.DOWN_ARROW){if(!AI.noCache&&!AI.suggestionShown){this.showSuggestion(AG);AI.preHighlight();}AI.nextHighlight();}else{if(AF===AA.UP_ARROW){AI.preHighlight();}}}},prekeyup:function AB(AE){var AG=this.inputNode.value,AF=parseInt(AE.e.keyCode||AE.e.charCode,10),AJ=this.isAdding,AI=this.parent;if(!AG){if(AJ){if(AF===AA.BACKSPACE&&!this._tWas_){this.raiseEvent({name:"ItemDeletePrev"});Q.preventDefault(AE.hWin,AE.e);}this._tWas_=null;}else{this.raiseEvent({name:"ItemDelete",d:this.data});}this.hideSuggestion();return ;}if(AF===AA.ESCAPE||AF===AA.TAB){this.hideSuggestion();if(AI.acptSugItemOnly){this.set("text",AG);this.set("text","");this._tWas_=null;return ;}}else{if(this._tWas_!==AG){this.textChanged=true;this.raiseEvent({name:"ItemEditing",d:this.data});if(AI.useKeyDelay){window.clearTimeout(this._timerID);var AH=this;this._timerID=window.setTimeout(function(){var AK=AH.inputNode.value;if(AK){AH.showSuggestion(AK);}AH._timerID=null;},X());}else{this.showSuggestion(AG);}}}this._tWas_=AG;},setItem:function(AE,AG,AF){var AH=this.isAdding;AF=AF||false;this.set("text",AE);if(AH){this.setItem_Adding(AE,AG,AF);}else{this.setItem_Editing(AE,AG,AF);}this._tWas_=null;},setItem_Adding:function(AE,AG,AF){this.set("text","");if(!AG){AG={};AG[this.itemField]=AE;}else{AG.state=a.VALID;}this.raiseEvent({name:"ItemAdd",d:AG,deactivate:AF});},setItem_Editing:function(AE,AG,AF){var AH=this.parent;this.set("text",AE);if(AG){this.updateData(AG);}else{if(this.textChanged){var AI={};AI[c]=this.data[c];delete this.data.did;this.data=AI;this.textChanged=false;}this.set("state",AH.verifyObject(AE,this));this.set("cssClass",AH.item2textCss(this.data));}this.isActive=false;this.raiseEvent({name:"ItemEditEnd",d:AG,deactivate:AF});},getSearchPattern:function W(){return(this.inputNode?this.inputNode.value:"");},showSuggestion:function o(AE){var AF=mstrmojo.dom.position(this.domNode,true);this.raiseEvent({name:"SuggestionOn",l:Math.round(AF.x)+"px",t:Math.round(AF.y+AF.h)+"px",pattern:AE,target:this});},hideSuggestion:function g(){this.raiseEvent({name:"SuggestionOff"});},del:function R(AE){AE=AE||self.event;Q.stopPropogation(self,AE);this.raiseEvent({name:"ItemDelete",d:this.data,deactivate:true});if(this.useRichTooltip&&this.hideTooltip){this.hideTooltip();}},edit:function Y(){this.set("state",a.EDITING);this.raiseEvent({name:"ItemEditBegin",d:this.data});if(this.showSuggestionOnEdit){this.showSuggestion(this.text);}},doEllipsize:function e(){if(!this.shouldEllipsize){return ;}var AF=this.maxItemWidth,AE;if(AF){this.domNode.style.maxWidth=AF;switch(parseInt(this.state,10)){case a.VALID:case a.UNDETERMINED:case a.INVALID:AE=this.textNode;break;case a.EMPTY:AE=this.domNode.firstChild;break;}if(AE){this.set("richTooltip",{content:this.text,contentNodeCssClass:"sp-tooltip",posType:mstrmojo.tooltip.POS_TOPLEFT,left:0,top:30,refNode:this.domNode});mstrmojo.css.addClass(AE,"truncated");}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Dialog","mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.form","mstrmojo.LoginEditor");mstrmojo.requiresDescs(2699,7773,11812,11865,13380,13381,13382);var D=mstrmojo.desc(13382,"Your user session will time out due to inactivity in # ##."),S=60,M=false,G=null,A=null,H=null;function N(){return mstrApp.sessionState||window.microstrategy&&microstrategy.sessionState;}function K(V,U){if(mstrApp.is508){for(var T in U){V.setAttribute(T,U[T]);}}}mstrmojo.SessionManager=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SessionManager",cssClass:"mstrmojo-SessionManager",width:"370px",title:mstrmojo.desc(11812,"Notification"),msgInterval:1,checkSessionInterval:20,zIndex:10000,maxSessionIdleTime:600,timeBeforeSessionTimeoutWarning:60,remainingTime:60,sessionTimedout:false,buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(13381,"Stay logged in"),function(){var T=this.parent.parent;if(A){T.keepSessionAlive();}T.hideMessage();},true,{onRender:function(){K(this.domNode,{tabindex:0,role:"button","aria-label":mstrmojo.desc(13381,"Stay logged in")});}}),mstrmojo.Button.newWebButton(mstrmojo.desc(13380,"Log out"),function(){this.parent.parent.hideMessage();mstrmojo.form.send({evt:3019,src:mstrApp.name+".3019"});},null,{onRender:function(){K(this.domNode,{tabindex:0,role:"button","aria-label":mstrmojo.desc(13380,"Log out")});}})],children:[{scriptClass:"mstrmojo.Label",alias:"message",cssClass:"mstrmojo-SessionManager-msg",text:"",allowHTML:true,ontextChange:function(){if(mstrApp.is508){this.refresh();var T=this.domNode;K(T,{tabindex:-1,role:"alert"});window.setTimeout(function(){T.focus();},0);}}}],postBuildRendering:function(){this._super();if(mstrApp.is508){this.msgInterval=10;K(this.editorNode,{role:"alertdialog",tabindex:-1});}},updateMsg:function B(U){var T;if(U>60){T=D.replace("##",mstrmojo.desc(2699,"minutes")).replace("#","<b>"+Math.ceil(U/S)+"</b>");}else{if(U>-1){T=D.replace("##",mstrmojo.desc(7773,"seconds")).replace("#","<b>"+U+"</b>");}else{T=mstrmojo.desc(11865,"Your session is expired.");}}this.message.text="";this.message.set("text",T);this.remainingTime=U;},showMessage:function F(T){this.updateMsg(T);this.set("visible",true);M=true;},hideMessage:function I(){if(A){window.clearInterval(A);A=null;window.clearInterval(H);H=null;}this.set("visible",false);M=false;},popupTimeoutWarning:function L(X){if(M){return ;}var V=this,W=(typeof X==="number")?X:V.timeBeforeSessionTimeoutWarning,T=W,U=mstrmojo.now();if(mstrApp.enableWarningSessionTimeout){if(!this.hasRendered){this.render();}this.showMessage(T);}window.clearInterval(A);A=window.setInterval(function(){if(T<1){window.clearInterval(A);A=null;window.clearInterval(H);H=null;window.setTimeout(function(){if(mstrApp.enableWarningSessionTimeout){V.gotoLogoutPage();}else{V.sessionTimedout=true;V.closeSession();}},200);}var Y=Math.round((mstrmojo.now()-U)/1000);T=W-Y;V.updateMsg(T);},this.msgInterval*1000);window.clearInterval(H);H=window.setInterval(function(){V.isSessionAlive();},this.checkSessionInterval*1000);},warningTimeoutTimer:function Q(T){var U=this;window.clearTimeout(G);G=window.setTimeout(function(){G=null;U.isSessionAlive();},(T-this.timeBeforeSessionTimeoutWarning)*1000);},isSessionAlive:function E(){var T=this,V={success:function(W){var X=parseInt(W,10);if(X!==-1){if(X>T.remainingTime){T.hideMessage();}if(X>T.timeBeforeSessionTimeoutWarning){T.warningTimeoutTimer(X);}else{T.popupTimeoutWarning(X);}}else{window.clearInterval(H);T.popupTimeoutWarning(0);}},failure:function(){mstrmojo.alert("Problems encountered during checking for whether session is alive. Connection is down or session already time out.");}},U={taskId:"isSessionAlive",notRestartSessionManager:true};mstrmojo.xhr.request("POST",mstrConfig.taskURL,V,U);},keepSessionAlive:function R(){var T=this,V={success:function(W){if(W){T.warningTimeoutTimer(T.maxSessionIdleTime);}else{T.sessionTimedout=true;mstrmojo.alert("Your session is expired.");}},failure:function(){mstrmojo.alert("Problems encountered during activating session. Connection is down or session already time out.");}},U={taskId:"keepSessionAlive"};mstrmojo.xhr.request("POST",mstrConfig.taskURL,V,U);},closeSession:function J(){var T=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){T.sessionTimedout=true;}},{taskId:"closeSessions",sessionStates:N(),notRestartSessionManager:true});},restart:function(){this.sessionTimedout=false;this.hideMessage();if(this.maxSessionIdleTime>this.timeBeforeSessionTimeoutWarning){this.warningTimeoutTimer(this.maxSessionIdleTime);}},start:function C(){var V=mstrConfig.lastMsgKey;if(this.maxSessionIdleTime>this.timeBeforeSessionTimeoutWarning){this.warningTimeoutTimer(this.maxSessionIdleTime);}var U=function(){window.localStorage.setItem("msg_recovery_notify"+V,1);};if(window.addEventListener){window.addEventListener("beforeunload",U);}else{window.attachEvent("onbeforeunload",U);}var T=window.sessionStorage;if(T){T.setItem("msg_browser_not_closed"+V,1);T.setItem("msg_user_login",0);}},openLoginEditor:function P(V){if(window.mstrmobile&&window.mstrmobile.onSessionExpired){window.mstrmobile.onSessionExpired();return ;}var U="LoginEditor",T=mstrmojo.all[U];if(!T){T=mstrmojo.insert({id:U,scriptClass:"mstrmojo.LoginEditor",config:{callback:{}},zIndex:10000});}T.config.callback=V;T.open();},gotoLogoutPage:function O(){mstrmojo.form.send({evt:3008,src:mstrApp.name+".3008",autoLoggedout:true,Server:mstrConfig.serverName,Port:mstrConfig.serverPort,Project:mstrmojo.string.decodeHtmlString(mstrConfig.projectName),loginReq:true},null,"POST");}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Editor","mstrmojo._FormatDefinition","mstrmojo.FontFormatter","mstrmojo.NumberFormatter","mstrmojo.AlignmentFormatter","mstrmojo.PaddingFormatter","mstrmojo.FillFormatter","mstrmojo.BorderFormatter");var B=mstrmojo.hash,C=mstrmojo._FormatDefinition;var A=["header_format","grid_format","child_header_format","child_grid_format"];mstrmojo.CGFormatEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.CGFormatEditor",cssClass:"mstrmojo-FormatEditor",title:mstrmojo.desc(2116),model:null,obModel:null,_initModel:function(){if(!this.obModel){var D=this;this.obModel=new mstrmojo.Model({level1Index:A[0],onlevel0IndexChange:function(E){if(E.valueWas>-1){this._updateModel(E.valueWas,this.level1Index);}this._setCurrentFormat();},onlevel1IndexChange:function(E){if(E.valueWas!=undefined){this._updateModel(this.level0Index,E.valueWas);}this._setCurrentFormat();},onmodelChange:function(){return this.model.items.length>0?this._setCurrentFormat():false;},_updateModel:function(H,F){H=(typeof H!="undefined")?H:this.level0Index;F=F||this.level1Index;var G=mstrmojo.hash.copy(this.currentFormat);var E=this.model.items[H][F]||{};C.extractModel(G,E);this.model.items[H].set(F,E);},_setCurrentFormat:function(){var E=mstrmojo.hash.copy(this.model.items[this.level0Index||0][this.level1Index]);E=C.getStandardFormat(E);this.set("currentFormat",E);}});}},init:function(D){this._initModel();this._super(D);},onmodelChange:function(){this._initModel();var E=this.obModel;E.level0Index=E.level0Index||0;E.set("model",mstrmojo.hash.clone(this.model));var D=E.model.selectedIndex;E.set("level0Index",(D==-1?0:D));},onClearFormat:function(){var D=this.obModel.currentFormat;for(var G in D){delete D[G];}for(var F=0;F<A.length;F++){var E=this.obModel;delete E.model.items[E.level0Index][A[F]];}this.obModel._setCurrentFormat();},onOK:function(){this.obModel._updateModel();var D=this.obModel.model;for(var E=0;E<D.items.length;E++){C.saveFormatModel(D.items[E],this.model.items[E],A);}},postBuildRendering:function(){if(this._super){this._super();}var D=this.obModel.model.selectedIndex;this.obModel.set("level0Index",(D==-1?0:D));},children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.HBox",alias:"btns",children:[{scriptClass:"mstrmojo.Pulldown",itemIdField:"did",bindings:{items:function(){return this.parent.parent.parent.obModel.model.items||[];},value:function(){var D=this.parent.parent.parent.obModel.level0Index;D=(D==-1?0:D);return this.items[D][this.itemIdField];}},cssClass:" mstrmojo-FormatEditor-DropDownButton",popupZIndex:100,value:1,allowHTML:false,onvalueChange:function(){var D=this.parent.parent.parent;if(D&&D.obModel){D.obModel.set("level0Index",this.selectedIndex);}}},{scriptClass:"mstrmojo.Pulldown",alias:"targetSelector",itemIdField:"v",cssClass:" mstrmojo-FormatEditor-DropDownButton",popupZIndex:100,value:1,items:C.FormatTarget,onvalueChange:function(){var D=this.parent.parent.parent;if(D&&D.obModel){D.obModel.set("level1Index",this.selectedItem.p);}}},new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(5976),function(D){var E=this.parent.parent.parent;if(E.onClearFormat){E.onClearFormat();}},"#999",{alias:"btnClear",cssClass:"mstrmojo-Editor-button mstrButton clear"})]},{scriptClass:"mstrmojo.HBox",alias:"formatPanels",cssClass:"mstrmojo-FormatEditor-box",bindings:{currentModel:"this.parent.parent.obModel.currentFormat"},children:[{scriptClass:"mstrmojo.VBox",alias:"formatList",cssClass:"mstrmojo-FormatEditor-leftPanel",children:[{scriptClass:"mstrmojo.List",alias:"feFMTList",cssClass:"mstrmojo-FormatEditor-formatList",items:C.Formats,selectedIndex:0,itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">{@n}</div></div>',height:"200px"}]},{scriptClass:"mstrmojo.Container",alias:"rightPanelContainer",cssClass:"mstrmojo-FormatEditor-rightPanel-container mstrmojo-FormatEditor-rightPanel",markupString:'<div id={@id} class="{@cssClass}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},children:[{scriptClass:"mstrmojo.FontFormatter",cssClass:"mstrmojo-FormatEditor-fontTable",cellPadding:5,bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==0",model:"this.parent.parent.currentModel.FormattingFont"}},{scriptClass:"mstrmojo.NumberFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==1",model:"this.parent.parent.currentModel.FormattingNumber"}},{scriptClass:"mstrmojo.AlignmentFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==2",model:"this.parent.parent.currentModel.FormattingAlignment"}},{scriptClass:"mstrmojo.PaddingFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==2",model:"this.parent.parent.currentModel.FormattingPadding"}},{scriptClass:"mstrmojo.FillFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==3",model:"this.parent.parent.currentModel.FormattingPatterns"}},{scriptClass:"mstrmojo.BorderFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==3",model:"this.parent.parent.currentModel.FormattingBorder"}}]}]}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(2397),function(){var D=this.parent.parent;D.close();if(D.onOK){D.onOK();}},"#999",{alias:"btnOk",cssClass:"mstrmojo-Editor-button mstrButton"}),new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(2399),function(){var D=this.parent.parent;D.close();},"#999",{alias:"btnCancel",cssClass:"mstrmojo-Editor-button mstrButton"})]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.vi._MonitorsAppState","mstrmojo.EditableLabel","mstrmojo.vi.ui.toolbars.TitleToolbar");var J=mstrmojo.dom;mstrmojo.vi.ui.TitleBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.TitleBar",markupString:'<div id="{@id}" class="mstrmojo-VITitleBar {@cssClass}" style="{@cssText}" mstrAttach:contextmenu,click><div class="left-toolbar"></div><div class="title-text"></div><div class="right-toolbar"></div></div>',markupSlots:{leftToolNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.childNodes[1];},rightToolNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode;}},markupMethods:{onhasContextMenuButtonChange:function(){var P=this.hasContextMenuButton;this.tbToolbar.set("visible",P);this.tbToolbar.set("enabled",P);},ontitleChange:function(){this.lblTitle.set("text",this.title||" ");},ontoolbarCfgChange:function(){var P=this.toolbarCfg;if(!P){return ;}this.tbToolbar.set("toolbarCfg",P);this.doLayout();},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{w:{leftToolNode:"auto",textNode:"100%",rightToolNode:"auto"},h:{leftToolNode:"100%",textNode:"100%",rightToolNode:"100%"},xt:true},lblTitle:null,tbToolbar:null,hasContextMenuButton:true,editTitleOnClick:false,editTitleOnDoubleClick:true,editTitleOnTwoClicks:false,title:"",close:mstrmojo.emptyFn,toolbarCfg:null,beganEditingTitlebar:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,useRichTooltip:true,init:function O(P){this._super(P);this.addChildren([].concat(this.getLeftToolbarChildren()).concat(this.getTitleChildren()).concat(this.getRightToolbarChildren()));},shouldShowTooltip:function K(P,R){var Q=P.target||J.eventTarget(P.hWin,P.e);return Q===this.textNode.firstChild&&(Q.scrollWidth>Q.clientWidth);},getTooltipContent:function L(P){var R=P.target||J.eventTarget(P.hWin,P.e),Q=R.innerHTML;return Q;},showTooltip:function M(P,Q){if(this.shouldShowTooltip(P,Q)){this._super(P,Q);}},updateTooltipConfig:function I(Q){var R=Q.target||J.eventTarget(Q.hWin,Q.e),P=J.position(R);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.getTooltipContent(Q),top:P.y+P.h+3,left:P.x+4,cssClass:"vi-regular vi-tooltip-A"};},getLabelNode:function C(){return this.lblTitle.domNode;},getMenuConfig:function B(){var P=this.toolbarCfg;if(P){if(P.hasMenuItems()){return P;}}return null;},setToolbarVisibility:function D(P){this.tbToolbar.set("visible",P);},editTitle:function N(){this.lblTitle.set("isEditing",true);},onAppStateChange:function F(P){var Q=this.lblTitle,R=mstrApp.isAppStatePresentation(),S=!!(P.valueWas&mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION);if(R&&this._confgTitleEditable===undefined){this._confgTitleEditable=this.editTitleOnClick||this.editTitleOnDoubleClick||this.editTitleOnTwoClicks;}Q.set("isEditing",false);if(R||S){Q.set("editOnDoubleClick",!R&&this._confgTitleEditable);}},getLeftToolbarChildren:function A(){},getTitleChildrenLayoutOffsets:function H(){return{h:2,w:2};},getTitleChildren:function G(){return[{scriptClass:"mstrmojo.EditableLabel",slot:"textNode",alias:"lblTitle",bindings:{editOnClick:"this.parent.editTitleOnClick",editOnDoubleClick:"this.parent.editTitleOnDoubleClick",selectable:"this.isEditing",editOnTwoClicks:"this.parent.editTitleOnTwoClicks"},onTextEditBegin:function(){this.parent.beganEditingTitlebar();},onTextEditComplete:function(R,Q){this.parent.titleEdited(this.text,R,Q);},getLayoutOffsets:function P(){return this.parent.getTitleChildrenLayoutOffsets();}}];},getRightToolbarChildren:function E(){return[{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",slot:"rightToolNode",alias:"tbToolbar",visible:true,useRichTooltip:true,bindings:{hasContextMenuButton:"this.parent.hasContextMenuButton",}}];}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.rw.xtab.XtabMenuConfig","mstrmojo.dom","mstrmojo.hash");var G=mstrmojo.dom;function B(I,H){if(H){H.opener=this;}this.openPopup(I,H);}mstrmojo.express.ui._IsDocumentView=mstrmojo.provide("mstrmojo.express.ui._IsDocumentView",mstrmojo.hash.copy(mstrmojo._HasPopup,{_mixinName:"mstrmojo.express.ui._IsDocumentView",openXtabCellMenu:function A(H){var I=this.getXtabCellMenuConfig({isHostedWithin:false,position:H.cmPos||G.position(H.btn.domNode),hostId:this.id});I.buildXtabMenuConfig(H);if(I.hasMenuItems()){B.call(this,I.newInstance(),H);}},openXtabCellMenuWithSelectionStyleControl:function D(H){var J=null,I=this.getXtabCellMenuConfig({isHostedWithin:false,position:H.cmPos||G.position(H.btn.domNode),hostId:this.id});I.buildXtabMenuConfig(H);if(I.hasMenuItems()){J=I.newInstance();B.call(this,J,H);}return J;},getXtabCellMenuConfig:function(H){return new mstrmojo.rw.xtab.XtabMenuConfig(H);},drillLinkMenuRef:"mstrmojo.DrillLinkMenu",openDrillLinkMenu:function E(H){B.call(this,"drillLinkMenuRef",H);},goToLink:function C(H){if(H){mstrmojo.form.sendLink(H.url,H.target||"_self");}},openPopupMenu:function F(I,H){B.call(this,I,H);}}));}());(function(){mstrmojo.requiresCls("mstrmojo.DocXtabGraph");var C=mstrmojo.dom,F=mstrmojo.array;function E(K){var I={},H={},J={};F.forEach(K,function(M){var L=M.goid+"."+M.ggid+"."+((M.gsid===undefined)?-1:M.gsid);if(!I[L]){I[L]={};}if(!H[M.co+"."+L]){if(J[L]===undefined){J[L]=0;}else{J[L]++;}I[L][J[L]]={co:M.co,sh:M.sh};H[M.co+"."+L]="true";}});return I;}function B(H,J){var K={},I="";F.forEach(H,function(L){I=L.goid+"."+L.ggid+"."+((L.gsid===undefined)?-1:L.gsid);if(K[I]===undefined){K[I]=0;}else{K[I]++;}var M=J[I]&&J[I][K[I]];if(M){L.coords=M.co;L.shape=M.sh;}});}mstrmojo.OIVMDocXtabGraph=mstrmojo.declare(mstrmojo.DocXtabGraph,null,{scriptClass:"mstrmojo.OIVMDocXtabGraph",unrender:function G(){this.clearCache();delete this.preLoader;this._super();},postBuildRendering:function D(){if(!this.preLoader){this.preLoader=document.createElement("img");}return this._super();},retrieveGraphSrc:function A(N,S){if(!N||parseInt(N,10)===0||parseInt(S,10)===0){return ;}if(isNaN(parseInt(this.node.data.sid,10))){return ;}var H=mstrConfig.taskURL+"?taskId=getRWGraphImage&taskEnv=xhr&__ts__="+(new Date().getTime())+"&messageID="+this.model.docModel.mid+"&nodeKey="+this.k+"&sliceID="+parseInt(this.node.data.sid,10)+"&imgType=4&width="+parseInt(S,10)+"&height="+parseInt(N,10),U=this.preLoader,V=this.imgNode,I=this.id,R=this;H=mstrmojo.addCSRFTokenToURL(H);if(U.dsrc!==H){U.dsrc=H;var M=function(){mstrApp.removeLoadingGraph(I);},T="load",L="error",Q,K,P,J;K=C.attachOneTimeEvent(U,T,function(){J=C.attachOneTimeEvent(V,T,function(){M();V.style.background="none";mstrmojo.all[I].defn.set("readyState",mstrmojo.EnumReadystate.IDLE);C.detachEvent(V,L,P);},true);P=C.attachOneTimeEvent(V,L,function(){M();C.detachEvent(V,T,J);},true);C.detachEvent(U,L,Q);V.src=U.src;},true);Q=C.attachOneTimeEvent(U,"error",function(){M();C.detachEvent(U,T,K);},true);var O=this.model.docModel.zt;this.model.docModel.dataService.getRWGraphImage({k:this.k,sid:parseInt(this.node.data.sid,10),w:S,h:N,encodeImage:true,needCoordinate:mstrApp.optimizeFitToPage&&(O===1||O===2)?1:0},{success:function(W){U.src="data:image/png;base64,"+(W.image||W);if(W.coords){var Y=JSON.parse(W.coords),X={};X=E.call(R,Y);B.call(R,R.as,X);R.refreshMap();}},failure:function(){Q();}});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.css");var N=mstrmojo.dom,a=mstrmojo.array,B=mstrmojo.css,g="animate",h="90px",n="70px",F="52px",v=200,Q=700,A=750;function D(){var AE=window.Modernizr,AD="transition";if(AE&&AE.testProp(AD)){return N.transEndEvtNames[AE.prefixed(AD)];}return null;}function x(AD){return function(){this.menuNode.style.display=AD?"block":"none";};}function P(AD){return Math.min(AD.offsetWidth-AD.firstChild.offsetWidth,0);}function w(AD){return AD.isAlignRight?"right":"left";}function AB(AD,AE){return parseInt(AD.style[w(AE)],10)||0;}function L(){var AH=this.tabContainerNode,AG=false,AF=false,AI=false,AJ=this.leftBtnNode,AD=this.rightBtnNode,AE=this.isValidMode();window.setTimeout(function(){if(P(AH)<0){var AL=N.position(AH),AK=N.position(AH.firstChild);AG=(AK.x<AL.x);AF=(AK.x+AK.w>AL.x+AL.w+1);}AI=AG||AF;B.toggleClass(this.btnBarNode,"highlightBar",AI);AJ.style.display=AD.style.display=AI?"block":"none";AJ.disabled=!AG;AD.disabled=!AF;B.toggleClass(AJ,"disable",!AG);B.toggleClass(AD,"disable",!AF);if(this.domNode){this.addBtnNode.style.display=this.tabStripMenuNode.style.display=AE?"block":"none";this.bufferNode.style.display=AE?"none":"block";this.floaterNode.style.display=this.hasFloater&&AG?"block":"none";}this.widgetResized();}.bind(this),v);}function T(AD,AE){AD=(AD||[]);if(!AD.filter){return a.filter(AD,AE);}return AD.filter(AE);}function W(AD,AE){AD=(AD||[]);if(!AD.map){return a.map(AD,AE);}return AD.map(AE);}function r(AT,AF,AG){var AR=this.tabContainerNode,AK=this.domNode;if(this.isStatic||!AR||!AK||AK.style.display==="none"){return ;}var AM=AR.firstChild,AS=P(AR),AJ=AB(AM,this),AD=Math.max(AJ,AS),AQ=T(this.children,function(AU){return AU.isSelected;})[0],AO=AG&&AG.domNode||AQ&&AQ.domNode;if(AT&&AO){if(AS<0){var AL=N.position(AO),AH=N.position(AR),AN=Math.floor(AL.x-AH.x),AP=Math.floor(AL.x+AL.w-(AH.x+AH.w));if(AG){var AE=Math.ceil(AO.offsetWidth);AN=AN===0?Math.max(AS,-AE):AN;AP=AP===0?Math.min(-AS,AE):AP;}var AI=AN<0?AN:(AP>0?AP:0);AD=this.isAlignRight?AD+AI:AD-AI;}}if(AD!==AJ){if(AF){this.setAnimation(AM);}AM.style[w(this)]=Math.max(AS,Math.min(AD,0))+"px";}L.call(this);}function C(AD){return AD.hasOwnProperty("index");}function J(){var AE=this.tabContainerNode,AF=N.position(AE),AD=this.isAlignRight;a.forEach(this.children||[],function(AH){var AN=AH.domNode,AO=N.position(AN),AK=Math.floor(AO.x-AF.x),AL=Math.floor(AO.x+AO.w-(AF.x+AF.w)),AG=AH.isSelected,AM=Math.ceil(AN.offsetWidth),AI=0;AH.isCutoff=AH.isHidden=AH.isLeftMost=AH.isRightMost=false;AH.leftEdgeHiddenWidth=AH.rightEdgeHiddenWidth=0;if(AK<0){var AJ=Math.abs(AK);AI=AM-AJ;AH.isLeftMost=AI>=0;AH.isCutoff=AH.isLeftMost&&AJ>0&&AI>0;AH.isHidden=AI<=0;AH.leftEdgeHiddenWidth=AJ;}else{if(AL>0){AI=AM-AL;AH.isRightMost=AI>=0;AH.isCutoff=AH.isRightMost&&AL>0&&AI>0;AH.isHidden=AI<=0;AH.rightEdgeHiddenWidth=AL;}}});}function Y(){var AD=this.children,AE=0;(AD||[]).every(function(AG,AF){if(!C(AG)){return false;}AE++;AG.index=AF;return true;});(AD||[]).every(function(AF){if(!C(AF)){return false;}AF.total=AE;return true;});}function f(AJ,AF){var AI=AJ.ENUM_CORNERS,AK=[AI.TOP_LEFT,AI.BOTTOM_LEFT],AE=this.parent;if(AE.position!=="bottom"){AK.reverse();}AJ.setAlignment(AK[0],AK[1]);var AD=N.position(AE.domNode),AH=AE.menuNode;var AG=AH.style;AG.top=(AF.y-AD.y)+"px";AG.left=(AF.x-AD.x)+"px";AJ.addPopupHandlers(AE.id,x(true),x(false));AJ.hostId=AE.id;AJ.hostElement=AH;AJ.isHostedWithin=false;AE.openPopup(AJ.newInstance());}function j(AD){AD.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" ><div class="mstrmojo-VITabStrip-menu" mstrAttach:click><div id="tabCommonIcon" class="mstrmojo-VITabStrip-menuIcon"></div><div id="tabCommonButton" class="mstrmojo-VITabStrip-menuButton"></div><div id="tabCommonMenuHost" class="mstrmojo-VITabStrip-menuButtonHost"></div></div><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-buffer"></div><div class="mstrmojo-VITabStrip-btnBar"><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div class="mstrmojo-VITabStrip-addBtn-Img"></div><div class="mstrmojo-VITabStrip-addBtn-Text"></div></div><div class="mstrmojo-VITabStrip-navBtns"><div id="tabRightButton" class="mstrmojo-VITabStrip-rightBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div><div id="tabLeftButton" class="mstrmojo-VITabStrip-leftBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div></div></div><div class="mstrmojo-VITabStrip-floater"></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabStripMenuNode:function(){return this.domNode.firstChild;},menuImgNode:function(){return this.domNode.firstChild.firstChild;},menuBtnNode:function(){return this.domNode.firstChild.childNodes[1];},menuBtnHostNode:function(){return this.domNode.firstChild.lastChild;},tabContainerNode:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},bufferNode:function(){return this.domNode.childNodes[2];},btnBarNode:function(){return this.domNode.childNodes[3];},addBtnNode:function(){return this.domNode.childNodes[3].firstChild;},addBtnImgNode:function(){return this.domNode.childNodes[3].firstChild.firstChild;},addBtnTxtNode:function(){return this.domNode.childNodes[3].firstChild.lastChild;},navBtnsNode:function(){return this.domNode.childNodes[3].lastChild;},rightBtnNode:function(){return this.domNode.childNodes[3].lastChild.firstChild;},leftBtnNode:function(){return this.domNode.childNodes[3].lastChild.lastChild;},floaterNode:function(){return this.domNode.childNodes[4];},menuNode:function(){return this.domNode.childNodes[5];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isAlignRight:true,tabStripMenuNode:null,menuImgNode:null,menuBtnNode:null,menuBtnHostNode:null,tabContainerNode:null,addBtnNode:null,bufferNode:null,navBtnsNode:null,leftBtnNode:null,rightBtnNode:null,menuNode:null,position:"bottom",selectMovedTab:false,hasFloater:false,tabObjects:null,layoutConfig:{w:{tabContainerNode:"100%",bufferNode:"6px",addBtnNode:h,navBtnsNode:F,tabStripMenuNode:n},xt:true},onAppStateChange:function p(AK){var AI=mstrmojo.vi.VisualInsightApp.APP_STATES,AJ=AI.PRESENTATION,AD=AI.SELECTOR_TARGETING,AE=AK.value,AL=AK.valueWas,AH=this.isValidMode();if(AE&AJ||AL&AJ||AE&AD||AL&AD){var AF=this.addBtnNode,AG=this.tabStripMenuNode;if(AF&&AG){AF.style.display=AG.style.display=AH?"block":"none";this.bufferNode.style.display=AH?"none":"block";this.doLayout();}}},setStatic:function R(AD,AE){this.isStatic=AD;if(!AD){r.call(this,true,AE);}},setTabs:function o(AF,AD){this.removeChildren();this.tabObjects=AF;var AG=this,AE=(AF&&AF.length)||0;this.addChildren(W(AF,function(AJ,AH){var AI=AJ.k;return AG.getTabCfg(AF,AJ,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:AH,total:AE,draggable:!!AE,dropZone:!!AE,k:AI,isSelected:AI===AD,showTabMenu:f,tabMoved:function(AL){var AK=this.index;AG.moveTab(AK,AK+(AL?-1:1),AK);}});}));r.call(this,true);j(this);},getTabs:function k(){return T(this.children,C);},getTabCfg:function AC(AE,AF,AD){return AD;},deleteTab:function I(AD){var AJ=this.id,AI=this.children[AD],AH=D(),AG=function(){var AK=mstrmojo.all[AJ];AK.removeChildren(AI);AI.destroy();Y.call(AK);L.call(AK);j(AK);};if(AH){var AF=AI.domNode.firstChild,AE=AF.style;AE.width=AF.offsetWidth+"px";window.setTimeout(function(){B.addClass(AF,g);N.attachOneTimeEvent(AF,AH,AG);AE.width=0;},0);}else{AG();}},buildRendering:function b(){this._super();B.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function U(){var AD=this._super();r.call(this,true);return AD;},doLayout:function K(){this._super();r.call(this,true);},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},setSelectedTab:function S(AD){a.forEach(this.children||[],function(AE){AE.set("isSelected",AE.k===AD);});j(this);},getSelectedTab:function e(){var AF=null,AE=this.children||[],AD;for(AD=0;AD<AE.length;AD++){if(AE[AD].isSelected){AF=AE[AD];break;}}return AF;},onclick:function m(AD){if(!this.isValidMode()){return ;}if(AD.getTarget()===this.addBtnImgNode||AD.getTarget()===this.addBtnTxtNode){this.addTab();}},addTab:mstrmojo.emptyFn,clearBtnTooltips:function O(AF){var AD=(AF===this.leftBtnNode),AE=(AF===this.rightBtnNode);if(AD||AE){this.clearTooltips();return true;}return false;},showBtnTooltips:function G(AD){var AF=AD.getTarget().parentNode,AE=this.clearBtnTooltips(AF);if(AE){this.toggleTooltip(AF);}},onmouseout:function t(AD){var AE=AD.getTarget().parentNode;this.clearBtnTooltips(AE);},onmouseover:function H(AD){this.showBtnTooltips(AD);},onmouseup:function Z(AD){window.setTimeout(function(){this.showBtnTooltips(AD);}.bind(this),v);},onmousedown:function d(AM){var AI=AM.getTarget().parentNode,AN=(AI===this.leftBtnNode),AG=(AI===this.rightBtnNode);if(AN||AG){var AL=this.tabContainerNode,AH=AL.firstChild,AD=this.id,AJ=this,AF;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}B.addClass(AI,"active");var AK=function(){window.clearInterval(AF);B.removeClass(AI,"active");L.call(mstrmojo.all[AD]);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}};N.attachOneTimeEvent(document.body,"mouseup",AK);var AE=function(){var AQ=P(AL),AT=AB(AH,AJ),AU=AT-AQ,AS=0-AT;J.call(AJ);AJ.setAnimation(AH);var AO=AJ.getCornerTabs()||[],AR=T(AO,function(AV){if(AN&&AV.isLeftMost||AG&&AV.isRightMost){return AV;}})[0],AP=0;if(AR){AP=AR.isCutoff?(AN?AR.leftEdgeHiddenWidth:AR.rightEdgeHiddenWidth):Math.ceil(AR.domNode.offsetWidth);AP=Math.min(AP,AN?AS:AU);AP=AJ.isAlignRight?(AN?-AP:AP):(AN?AP:-AP);}AH.style[w(AJ)]=parseInt(AH.style[w(AJ)]||0)+AP+"px";};AE();AF=window.setInterval(function(){AE();},A);}},getCornerTabs:function c(){return T(this.children,function(AD){return AD.isLeftMost||AD.isRightMost;});},setAnimation:function X(AD){var AE=D();if(AE){B.addClass(AD,g);N.attachOneTimeEvent(AD,AE,function(){B.removeClass(AD,g);});}},createTooltip:function z(AE){var AG=document.createElement("div");AG.className="navBtnTooltip";AG.appendChild(document.createTextNode(AE.getAttribute("tooltip")||""));var AJ=document.body.firstChild;AJ.parentNode.insertBefore(AG,AJ);var AH=5,AK=AG.offsetWidth-25,AF=AE.getBoundingClientRect(),AI=AG.getBoundingClientRect(),AD=AF.top-(AI.height+AH);AG.style.top=AD+"px";AG.style.left=(AF.left-AK)+"px";return AG;},clearTooltips:function l(){window.clearTimeout(this._tooltipTimeOut);var AD=document.querySelectorAll(".navBtnTooltip");a.forEach(AD||[],function(AE){AE.parentNode.removeChild(AE);});},toggleTooltip:function AA(AD){window.clearTimeout(this._tooltipTimeOut);if(AD.disabled){this._tooltipTimeOut=window.setTimeout(function(){this.createTooltip(AD);}.bind(this),Q);}},moveTab:function M(AD,AL,AJ,AI){var AE=this.children,AM=AE.splice(AD,1)[0];AE.splice(AL,0,AM);Y.call(this);this.setAnimation(this.tabContainerNode.firstChild);var AF=this.containerNode,AG=AF.childNodes,AK=AF.removeChild(AG[AD]),AH=AG[AL];if(AH){AF.insertBefore(AK,AH);}else{AF.appendChild(AK);}if(this.selectMovedTab||AM.isSelected){r.call(this,true,true,AM);}if(!AI&&AJ!==undefined&&AJ!==AL){this.commitTabMove(AJ,AL);j(this);}},commitTabMove:function u(AD,AE){throw new Error(this.scriptClass+" must implement commitTabMove.");},updateTabTable:function q(){if(!this.isStatic){r.call(this,true);}},setLinkIcon:function V(AD,AG){var AF,AE;if(AD){if(AG){AE="src";a.some(this.getTabs(),function(AH){if(AH.k===AG){AF=AH;}return AF;});if(!AF){return ;}}else{AE="tgt";AF=this.getSelectedTab();}B.addClass(AF.domNode,AE);}else{AE=AG?["src","tgt"]:"tgt";a.forEach(this.children,function(AH){B.removeClass(AH.domNode,AE);});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.color","mstrmojo.dom","mstrmojo.css","mstrmojo._HasOwnAvatar","mstrmojo.Container","mstrmojo.threshold.ThresholdModel","mstrmojo.threshold.ColorMarker");var Q=mstrmojo.color,D=mstrmojo.dom,R=mstrmojo.css;function B(W){var V=this.parent,U=V.width,X=Math.min(Math.max(W.last.x-D.position(this.domNode).x,0),U-1);return X/U;}mstrmojo.threshold.MarkersNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.threshold.MarkersNode",cssClass:"markers",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"  mstrAttach:click,mousedown,mouseover,mouseout></div>',markupSlots:{containerNode:function O(){return this.domNode;}},dropZone:true,draggable:true,avatarCssClass:"marker-drag-avatar",addMarker:function P(b){this.parent.parent.switchToCustomScheme();var U=this.parent,e=U.parent.model,d=D.position(this.containerNode).w,V=U.getPalette(),Z=b/d,X=U.addMarkerToMap(Z),a=V.length,Y=new mstrmojo.threshold.ColorMarker();Y.updateCompValue(Z);Y.updateRealValue(e.getRealValue(Z,U.selectedOption,U.minValue(),U.maxValue()));Y.set("index",X);this.addChildren([Y]);if(a===(X+1)){X--;}if(this.selectedIndex!==undefined&&this.selectedIndex>-1&&this.selectedIndex<this.children.length){this.children[this.selectedIndex].unselect();}this.selectedIndex=Y.index;var W=V[X+1],c=X===-1?W:V[X];V.splice(X+1,0,Q.findMidColorHex(c,W));U.update();this.children[this.selectedIndex].select();},remove:function M(U){if(U<0||U>=this.children.length){return ;}this.children[U].unselect();this.children.splice(U,1);this.domNode.removeChild(this.domNode.children[U]);},onclick:function T(V){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED&&V.getTarget()===this.domNode){var W=D.position(this.containerNode),U=V.e.clientX-W.x;this.addMarker(U);}},premousedown:function L(){this.parent.unselectAll();},createAvatar:function K(X,W){var V;for(V=0;V<this.children.length;V++){if(this.children[V].id===X.id){W.tgtNode=this.children[V];W.i=V;}}var U=X.cloneNode(true),Y=document.createElement("div");R.addClass(Y,"bar");U.appendChild(Y);return U;},positionAvatar:function I(a){var U=this.avatar,W=U.style,Y=this.restrictedToAxis,V=D.position(this.domNode),X=V.y;if(U){if(Y!=="y"){var Z=a.x;if(Z<V.x){Z=V.x;}if(Z>V.x+V.w){Z=V.x+V.w-1;}W.left=Z-2+"px";}if(Y!=="x"){W.top=X+"px";}}},getMarkerComps:function H(U){if(!this.children){return undefined;}var V=this.children.map(function(W){return W.compValue;});return !!U?V.sort(U):V;},getMarkerRealValues:function N(U){if(!this.children){return undefined;}var V=this.children.map(function(W){return W.realValue;});return !!U?V.sort(U):V;},setMarkerRealValues:function F(V,X,U,W){if(!this.children){return ;}this.children.forEach(function(Z,Y){Z.updateRealValue(V(Z.compValue,X,U,W));});},isDragValid:function A(U){return U.src.node!==this.domNode;},ondragstart:function S(V){this._super(V);var U=this.parent.getComp();this.selectedIndex=V.i;U.splice(V.i,1);},ondragmove:function J(V){this._super(V);var Y=this.parent,X=Y.getComp(),c=Y.parent.model,W=B.call(this,V),Z=this.children[V.i],U=V.tgt.pos.x-V.src.pos.x,a=U<0,b=U>0;if((Z.compValue===0&&a)||(Z.compValue===1&&b)){return ;}Z.updateCompValue(W);Z.updateRealValue(c.getRealValue(W,Y.selectedOption,Y.minValue(),Y.maxValue()));Y.editableBubble.showBubble(W,Z.realValue);},ondragend:function E(W){var V=this.parent;comp=V.getComp(),currentMarker=this.children[W.i],newIndex=currentMarker.index,crossedIndices=this.children.filter(function(Y){return(Y.index>currentMarker.index&&Y.compValue<currentMarker.compValue)||(Y.index<currentMarker.index&&Y.compValue>currentMarker.compValue);}).map(function(Y){return Y.index;});if(crossedIndices.length>0){var U=crossedIndices[0],X=crossedIndices[crossedIndices.length-1];newIndex=(currentMarker.index>U)?U:X;}comp.splice(newIndex,0,currentMarker.compValue);this.remove(currentMarker.index);V.update();this.children[newIndex].select();this._super(W);},onmouseover:function G(V){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED&&!this._cursorAvatar){var Y=document,X=this.domNode,W=this._cursorAvatar=Y.createElement("div"),U=this._mouseMoveHandler=function(c){var b=D.eventTarget(self,c),a=D.getMousePosition(c,self),Z=W.style;Z.top=a.y+12+"px";Z.left=a.x+12+"px";Z.display=(b===X&&mstrApp.isInteractive())?"block":"none";};Y.body.appendChild(W);R.addClass(W,"mstrmojo-SimpleThresholdEditor add-cursor");D.attachEvent(X,"mousemove",U);}if(this._super){return this._super(V);}},onmouseout:function C(U){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED){D.detachEvent(this.domNode,"mousemove",this._mouseMoveHandler);var V=this._cursorAvatar;V.parentNode.removeChild(V);delete this._cursorAvatar;delete this._mouseMoveHandler;}if(this._super){return this._super(U);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var R=mstrmojo.dom,T=mstrmojo.css,AI=mstrmojo.Enum_Keys,H=mstrmojo.range,k=H.EDGE,AA=mstrmojo.ME.MetricToken.isDelimiter,Q=mstrmojo.expr,r=mstrmojo.array,K=mstrmojo.hash;var M=R.isIE||R.isIEW3C;function AQ(E){return E.ctrlKey||R.isMetaKey(window,E)||(E.charCode||E.keyCode)===AI.CTRL;}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.ME.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function S(E){var AR=E.ownerDocument,AS=AR.createElement("span");return AS;},_iw2idx:function U(AR,AU,AT){var AS=this.wrapperNodes(AU),E=mstrmojo.array.indexOf(AS,AT);return E===-1?AS.length:E;},itemOffsetLeft:function h(AR,AV,E,AT){if(!AT){var AS=this.wrapperNodes(AV);AT=AS&&AS[E];if(!AT){return 0;}}var AU=AV.firstChild;if(!AU||(AU===AT)){return 0;}return AT.offsetLeft-AU.offsetLeft;},whereDrop:function AP(AZ,E,AT,AY,AR){var AV=this._nd2iw(AZ,E,AT),Aa,AX,AU,AW,AS;if(AV){AX=this._iw2idx(AZ,E,AV);Aa=AX;AU=this.itemOffsetLeft(AZ,E,null,AV);AW=AV.offsetTop;AS=AV.offsetWidth;if(AY.x>AR.left+AU+AS/2){Aa++;AU+=AS;}}else{return AZ.dropCuePos;}return{left:AU,top:AW,idx:Aa,idxActual:AX};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function G(E){var AR=E.src.data;return !!AR;},createToken:function A(E){return{v:mstrmojo.ME.MetricToken.brackets(E.n),oi:K.copyProps(["did","n","t"],E),isNew:true};},ondrop:function(AR){AR.src.data=this.createToken(AR.src.data.item);if(this.prepareDropItem){this.prepareDropItem(AR);}var E=this.insertTokens([AR.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");return E;},ondragenter:function I(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function V(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function X(AR){var AS=AR.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AS){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "return false;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" onblur = "return mstrmojo.all.{@id}.handleblur(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function J(AS,E,AR){return new mstrmojo.ME.MetricToken({data:AS,parent:AR});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function W(AR,E){if(this._super){this._super(AR,E);}if(this.oi){this.oi.tks.items=this.items;}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:AA,postBuildRendering:function d(){if(this._super){this._super();}this._eros=false;if(R.isFF){document.body.spellCheck=false;}mstrmojo.dom.attachEvent(this.editNode,"compositionstart",function(){this.saveStateForIME();this.composing=true;this.toggleIMEStatusBar(true);}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionupdate",function AR(AS){if(R.isIEW3C){this.lastImeChar=AS.data||(M&&this.lastImeChar);}else{this.lastImeChar=AS.data||this.lastImeChar;}}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionend",function E(AU){this.composing=false;if(R.isIE9||R.isIE10){var AT=H.getRangeInfo();this.imeBuffer=AT.startContainer.data.slice(this.prev_rInfo.startOffset,AT.startOffset).split("");}else{if(R.isIEW3C){var AT=H.getRangeInfo();this.imeBuffer=AT.startContainer.data.slice((this.prev_rInfo.startOffset-1)<0?0:this.prev_rInfo.startOffset,AT.startOffset).split("");}else{if(R.isEdge){var AS=AU.data||"";this.imeBuffer=(this.imeBuffer||[]).concat(AS.split(""));}else{var AS=AU.data||this.lastImeChar||"";this.imeBuffer=(this.imeBuffer||[]).concat(AS.split(""));}}}}.bind(this));},fnContextMenu:function N(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},saveStateForIME:function g(){if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=H.getRangeInfo();this.prev_items=this.items;}},handleblur:function L(){if(this.doubleByte){this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}},processDeleteKeyDown:function D(AR){if(!this.doubleByte){try{this.widgetHandleDelete(AR);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(E){}return true;}},processBackspaceKeyDown:function AO(AR){if(!this.doubleByte){try{this.widgetHandleBackspace(AR);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}return true;}},handlekeydown:function a(AT){AT=AT||window.event;var E=AT.keyCode||AT.charCode,AR=false,AS=H.getRangeInfo();if((E===AI.LEFT_ARROW||E===AI.RIGHT_ARROW||E===AI.BACKSPACE)&&this.doubleByte){if(this.composing){return ;}this.doubleByte=false;if(E===AI.BACKSPACE){this.imeBuffer.pop();}this.widgetHandleImeInput(this.prev_rInfo);mstrmojo.dom.stopPropogation(window,AT);mstrmojo.dom.preventDefault(window,AT);return false;}switch(E){case AI.DELETE:AR=this.processDeleteKeyDown(AS);break;case AI.BACKSPACE:AR=this.processBackspaceKeyDown(AS);break;case AI.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case AI.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AR=true;break;case AI.ESCAPE:this.endTokenSuggestion();AR=true;break;case 86:if(AQ(AT)){this.handlePasteTriggeredDeletion();AR=false;}break;case 89:if(AQ(AT)){this.widgetHandleUndoRedo("redo");AR=true;}break;case 90:if(AQ(AT)){this.widgetHandleUndoRedo("undo");AR=true;}break;case 229:this.saveStateForIME();break;default:}if(AR){R.stopPropogation(window,AT);R.preventDefault(window,AT);return false;}return true;},handlePasteTriggeredDeletion:function F(){this.set("_saveRangeInfo",H.getRangeInfo());if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this.set("_saveRangeInfo",H.getRangeInfo());}this.clipboardNode.focus();},getCharacter:function AK(AR){var E=(R.isIE&&!R.isIE9)?AR.keyCode:AR.charCode;return(E>0)?String.fromCharCode(E):null;},handleCharacter:function AB(AT){var AU=this.getCharacter(AT),AR=false;if(AU&&!((AU==="c"||AU==="a")&&AQ(AT))){try{this.widgetHandleInput(H.getRangeInfo(),AU);this.raiseChangeEvent({type:"input",character:AU});if(!this.isDelimiter(AU)){if(this.useKeyDelay){var AS=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AS.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AR=true;}return AR;},handlekeypress:function B(E){E=E||window.event;if(this.doubleByte){this.toggleIMEStatusBar(false);this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);window.setTimeout(function(){this.handleCharacter(E);}.bind(this),10);return false;}if(this.handleCharacter(E)){R.stopPropogation(window,E);R.preventDefault(window,E);return false;}return true;},handlekeyup:function f(AS){var E=AS.keyCode||AS.charCode,AR;if(E===AI.LEFT_ARROW||E===AI.RIGHT_ARROW){AR=this.findObjectToken();if(AR&&AR===this._saveActiveToken){this.startTokenSuggestion(AR);}else{this.endTokenSuggestion();}}else{if(E===AI.UP_ARROW){this.preHighlight();}else{if(E===AI.DOWN_ARROW){this.nextHighlight();}else{if(E===AI.BACKSPACE&&this.doubleByte){if(E===AI.BACKSPACE&&!this.composing&&!R.isIE9){this.doubleByte=false;this.imeBuffer.pop();this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}}}}}this.set("_saveRangeInfo",H.getRangeInfo());},handlemouseup:function p(AT){if(this.dropCuePos){return false;}var AR=this.findObjectToken();if(AR&&AR===this._saveActiveToken){this.startTokenSuggestion(AR);}else{this.endTokenSuggestion();}var AS=H.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var E=this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;AR=R.findWidget(AS.startContainer);if(AR){this._delaySetTextCaretPos(AR.domNode,AS.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AS.startOffset-1);}this.prev_rInfo=AS;}this.set("_saveRangeInfo",AS);},handlepasteDirect:function AF(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlepaste(E);R.stopPropogation(window,E);R.preventDefault(window,E);this.handlePasteTriggeredDeletion();return false;},handlepaste:function n(AV){var AR=this.clipboardNode.value;this.clipboardNode.value="";var AU=[],E=AR&&AR.length,AT,AS="",AW;if(E>0){for(AT=0;AT<E;AT++){AW=AR.charAt(AT);if(this.isDelimiter(AW)){if(!mstrmojo.string.isEmpty(AS)){AU.push({v:AS,isNew:true});AS="";}AU.push({v:AW,isDelimiter:true,isNew:true});}else{AS=AS+AW;}}if(!mstrmojo.string.isEmpty(AS)){AU.push({v:AS,isNew:true});AS="";}this.insertTokens(AU);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AN(){var AR=[],AT=this.items,AS,E;for(AS=0,E=AT.length;AS<E;AS++){AR[AS]=AT[AS].v;}return AR.join("| ");},replaceErrorToken:function q(AT){var AS=this.items||[],AU=mstrmojo.array.find(AS,"sta",-1),AR,AV=function(Ab,AZ,Ac){var AY=(Ab&&Ab.items)||[],AX=r.find(AY,"did",AZ),AW,Aa;if(AX>-1){AW=AY[AX].fs;Aa=r.filterOne(AW,function(Ad){return Ad.fnm&&Ad.fnm.toUpperCase()===Ac.toUpperCase();});}return Aa;},E=function(Ab,AZ,Aa){var AW={v:AZ.n,oi:AZ,isNew:true},AY=Ab.v&&Ab.v.split("@"),AX;if(AY&&AY.length>1){AX=AV(Aa,AZ.did,AY[1]);if(AX){AW.exv=AX.fmdid||AX.fid;AW.extp=8;AW.v=mstrmojo.ME.MetricToken.brackets(AZ.n)+"@"+AX.fnm;}}return AW;};if(AU>-1){AR=E(AS[AU],AT,this.candidates);this.remove(AU);this.add([AR],AU);}},widgetHandleDelete:function e(AU){if(AU.collapsed){var AT,AS,E,AV=AU.startOffset,AR=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AU.startContainer,false,document.body)){H.collapseOnNode(this.editNode,false);return ;}AT=H.getEdgeInfo(AU.startContainer,AU.startOffset);AS=R.findWidget(AU.startContainer);E=this.itemIndex(AS.data);if(AT===k.EDGE_END){E++;AS=AR[E];AV=0;}if(!AS){H.collapseOnNode(this.editNode,false);return ;}if(AS.length()===1){this.remove(E);AS=AR[E];if(AS){H.collapseOnNode(AS.domNode,true);}else{H.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AS.spliceContent(AV,1);H.collapseOnTextNode(AS.domNode,AV);}}else{this.widgetDeleteTokens(AU);}},widgetHandleBackspace:function z(AU){if(AU.collapsed){var AT,AS,E,AV=AU.startOffset,AR=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AU.startContainer,false,document.body)){if(AU.startOffset>0&&R.isFF){AS=AR[this.items.length-1];H.collapseOnNode(AS.domNode,false);AU=H.getRangeInfo();AT=H.getEdgeInfo(AU.startContainer,AU.startOffset);}else{H.collapseOnNode(this.editNode,true);return ;}}AT=H.getEdgeInfo(AU.startContainer,AU.startOffset);AS=R.findWidget(AU.startContainer);E=this.itemIndex(AS.data);if(AT===k.EDGE_BEGIN){E--;AS=AR[E];AV=AS.length();}if(!AS){H.collapseOnNode(this.editNode,true);return ;}if(AS.length()===1){this.remove(E);AS=AR[E-1];if(AS){H.collapseOnNode(AS.domNode,false);this.checkMergeTwoTokens(E-1,E);AS=AR[E-1];}else{H.collapseOnNode(this.editNode,true);}}else{AS.spliceContent(AV-1,1);H.collapseOnTextNode(AS.domNode,AV-1);}}else{this.widgetDeleteTokens(AU);}},widgetHandleInput:function AC(AV,AW){if(!AV.collapsed){this.widgetDeleteTokens(AV);AV=H.getRangeInfo();}var AS,AX,AY,AZ,E,AR,AT=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AV.startContainer,false,document.body)){this.add([{v:AW,isDelimiter:this.isDelimiter(AW),isNew:true}],0);AX=AT[0];H.collapseOnTextNode(AX.domNode,1);return ;}AS=H.getEdgeInfo(AV.startContainer,AV.startOffset);AX=R.findWidget(AV.startContainer);AY=this.itemIndex(AX.data);if(this.isDelimiter(AW)){AZ={v:AW,isDelimiter:true,isNew:true};if(AS===k.EDGE_MIDDLE){var AU=AX.split2Tokens(AV.startOffset);this.remove(AY);this.add([AU[0],AZ,AU[1]],AY);AY=AY+1;}else{AY=(AS===k.EDGE_BEGIN)?AY:AY+1;this.add([AZ],AY);}AX=AT[AY];H.collapseOnTextNode(AX.domNode,(AX.domNode.innerText||AX.domNode.textContent).length);}else{AR=AV.startOffset;if(AX.isDelimiter()){E=AT[(AS===k.EDGE_BEGIN)?AY-1:AY+1];if(E&&!E.isDelimiter()){AX=E;AR=(AS===k.EDGE_BEGIN)?AX.length():0;}}if(!AX.isDelimiter()){AX.spliceContent(AR,0,AW);H.collapseOnTextNode(AX.domNode,AR+1);}else{this.add([{v:AW,isNew:true}],(AS===k.EDGE_BEGIN)?AY:AY+1);AX=AT[(AS===k.EDGE_BEGIN)?AY:AY+1];H.collapseOnNode(AX.domNode,false);}}},widgetHandleImeInput:function AC(AU,AV){AV=AV||this.imeBuffer.join("");this.imeBuffer=[];this.lastImeChar=null;if(!AV){return ;}if(!AU.collapsed){this.widgetDeleteTokens(AU);AU=H.getRangeInfo();}var AS,AW,AX,AY,E,AR,AT=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AU.startContainer,false,document.body)||this.items.length==0){this.clearTokens();this.add([{v:AV,isDelimiter:this.isDelimiter(AV),isNew:true}],0);AT=this.ctxtBuilder.itemWidgets;AW=AT[0];H.collapseOnTextNode(AW.domNode,1);this._delaySetCaretPos(AW.domNode,false);return ;}AS=H.getEdgeInfo(AU.startContainer,AU.startOffset);AW=R.findWidget(AU.startContainer);AX=this.itemIndex(AW.data);AR=AU.startOffset;if(AW.isDelimiter()){this.clearTokens();this.add(this.prev_items);AT=this.ctxtBuilder.itemWidgets;E=AT[(AS===k.EDGE_BEGIN)?AX-1:AX+1];if(E&&!E.isDelimiter()){AW=E;AR=(AS===k.EDGE_BEGIN)?AW.length():0;}}if(!AW.isDelimiter()){AW.spliceContent(AR,0,AV);this._delaySetTextCaretPos(AW.domNode,AR+AV.length);}else{this.add([{v:AV,isNew:true}],(AS===k.EDGE_BEGIN)?AX:AX+1);AW=AT[(AS===k.EDGE_BEGIN)?AX:AX+1];this._delaySetCaretPos(AW.domNode,false);}this.startTokenSuggestion();return AW;},findObjectToken:function C(){var AU=H.getRangeInfo(),AS=R.findWidget(AU.startContainer);if(!R.contains(this.editNode,AU.startContainer,false,document.body)){return null;}if(!AS||AS===this||!AS.isDelimiter){return null;}if(AS&&!AS.isDelimiter()){return AS;}var AT=H.getEdgeInfo(AU.startContainer,AU.startOffset),AR=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AS.data);AS=AR[(AT===k.EDGE_BEGIN)?E-1:E+1];if(AS&&!AS.isDelimiter()){return AS;}return null;},checkMergeTwoTokens:function w(AU,AS){var AT=this.ctxtBuilder.itemWidgets,AR=AT[AU],E=AT[AS];if((AR&&!AR.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AU,AS]);this.add([AR.mergeTo(E)],AU);H.collapseOnTextNode(AT[AU].domNode,AR.length());}},insertTokens:function AE(AV){var AY=0,AX=this.editNode;var AS=this._saveRangeInfo||H.getRangeInfo();if(!AS||!R.contains(AX,AS.startContainer,false,document.body)){this.add(AV);AY=this.items.length-1;if(AY===0){this._delaySetTextCaretPos(AX,(AX.innerText||AX.textContent).length);}else{var E=this.ctxtBuilder.itemWidgets[AY].domNode;this._delaySetTextCaretPos(E,(E.innerText||E.textContent).length);}}else{var AR=H.getEdgeInfo(AS.startContainer,AS.startOffset),AW=R.findWidget(AS.startContainer);AY=this.itemIndex(AW.data);if(AR===k.EDGE_MIDDLE){var AT=AW.split2Tokens(AS.startOffset);this.remove(AY);AV.unshift(AT[0]);AV.push(AT[1]);this.add(AV,AY);}else{AY=(AR===k.EDGE_BEGIN?AY:AY+1);this.add(AV,AY);}AY=AY+AV.length-1;AW=this.ctxtBuilder.itemWidgets[AY];this._delaySetCaretPos(AW.domNode,false);}this.raiseChangeEvent({type:"insert"});var AU=this;window.setTimeout(function(){AU.set("_saveRangeInfo",H.getRangeInfo());},50);return AY;},insertParenthesisTokens:function AH(AR){var E=this;window.setTimeout(function(){var AS=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AS-1],1);},AR||50);},clearTokens:function v(E){this.set("items",E||[]);this.set("_saveRangeInfo",null);this._delaySetCaretPos(this.editNode,false);},focus:function AD(){var AR=this.ctxtBuilder.itemWidgets,E=AR.length;this._delaySetCaretPos(E>0?AR[E-1].domNode:this.editNode,false);},startTokenSuggestion:function AJ(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[Q.TP.FOLDER,Q.TP.FACT,Q.TP.ATTR,Q.TP.FUNCTION,Q.TP.FILTER,Q.STP.PROMPT_OBJECTS,Q.TP.ATTR,Q.TP.DIM,Q.TP.METRIC,Q.TP.ROLE].join(","),getSearchPattern:function Z(){var AR=this._saveActiveToken,AT=AR&&AR.data.v,E=AT&&AT.length;if(E>2){if(AT.charAt(0)==="["){AT=AT.substring(1);}if(AT.charAt(AT.length-1)==="]"){AT=AT.substring(0,AT.length-1);}}if(AR&&AR.data.ift){var AS=AR.data.v,AU=AS&&AS.indexOf("@");if(AU>=0){AT=AS.substring(AU);}}return AT||"";},getSuggestionPos:function j(){var E=this._saveActiveToken,AR=null,AT,AS;if(E){AT=E.data&&E.data.ift;AS=mstrmojo.dom.position(E.domNode,true);AR={left:Math.round(AS.x+(AT?AS.w:0))+"px",top:Math.round(AS.y+AS.h)+"px",zIndex:100};}return AR;},item2textCss:function O(AR){var E=(this._super&&this._super(AR))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AR.t]||"";E+=AR.da?" da":"";E+=(AR.dm||AR.um)?" dm":"";E+=AR.de?" de":"";E+=AR.fs&&AR.fs.length&&AR.fs.some(function(AS){return AS.fgr>0;})?" g":"";return E;},onBrowserOpen:function x(){this.editNode.blur();},onSuggestionItemSelect:function AG(AR){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AR.t===21){E.setFormInfo(AR);}else{E.setItemInfo(AR);if(AR.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function AL(E,AS){var AR=this.editNode,AT=this,AU=function(){AR.focus();AR.focus();H.collapseOnNode(E,AS);AT.set("_saveRangeInfo",H.getRangeInfo());};window.setTimeout(AU,0);},_delaySetTextCaretPos:function AL(E,AU){var AR=this.editNode,AS=this,AT=function(){AR.focus();AR.focus();H.collapseOnTextNode(E,AU);AS.set("_saveRangeInfo",H.getRangeInfo());};window.setTimeout(AT,0);},getCandidatesThroughTaskCall:function c(AR,E){AR.objectType="11,12,13,43,4";AR.rootFolderType=39;AR.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AR,E);},filterCandidates:function u(AU,AT,E){var AR=this._saveActiveToken,AV=AR&&(AR.data.oi||AR.data.at),AS;if(AV&&AR.data.ift){E=E||this.suggestCount;AT=mstrmojo.string.regEscape(AT);AS=r.filter(AU,function(AW){return AW.t===21&&AW.attid===AV.did&&(new RegExp("^"+AT,"i")).test("@"+AW.n);},{max:E});}else{AS=r.filter(AU,function(AW){return AW.t!==21;});AS=this._super(AS,AT,E);}return AS;},endTokenSuggestion:function AM(AR){var E=this._saveActiveToken;if(E){if(AR){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function o(AZ){var AR=AZ.startOffset,E=AZ.endOffset,Ac=R.findWidget(AZ.startContainer),Aa=R.findWidget(AZ.endContainer),AV=this.itemIndex(Ac.data),AT=this.itemIndex(Aa.data),AW=[],AX=H.getEdgeInfo(AZ.startContainer,AR),Ab=H.getEdgeInfo(AZ.endContainer,E),AY=(AX===k.EDGE_BEGIN?AV:AV+1),AS=(Ab===k.EDGE_END?AT:AT-1),AU;if(Ac===Aa){if((AX===k.EDGE_BEGIN)&&(Ab===k.EDGE_END)){this.remove(AV);Aa=this.ctxtBuilder.itemWidgets[AV===0?AV:AV-1];if(Aa){H.collapseOnNode(Aa.domNode,AV===0);}else{H.collapseOnNode(this.editNode,true);}}else{Ac.spliceContent(AR,E-AR);H.collapseOnTextNode(Aa.domNode,AR);}}else{for(AU=AY;AU<=AS;AU++){AW.push(AU);}this.remove(AW);if(AX===k.EDGE_MIDDLE){Ac.spliceContent(AR);}if(Ab===k.EDGE_MIDDLE){Aa.spliceContent(0,E);}if(AX===k.EDGE_BEGIN){Ac=this.ctxtBuilder.itemWidgets[AV===0?AV:AV-1];}if(Ac){H.collapseOnNode(Ac.domNode,AV===0);}else{H.collapseOnNode(this.editNode,false);}AV=(AX===k.EDGE_BEGIN)?AV-1:AV;this.checkMergeTwoTokens(AV,AV+1);}this.editNode.focus();},oncandidatesChange:function t(){var AR=this.candidates,E=(AR&&AR.items)||[];if(!this.noCache&&AR&&AR.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AR=this.getSuggestionPos();if(AR){E.set("left",AR.left);E.set("top",AR.top);}},pretokensModify:function P(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:K.clone(this.items),rInfo:H.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function m(AS){var AT,E,AR=function(AV){if(!AV){return ;}AV=AV||{};this.set("items",K.clone(AV.items));var AY=this.ctxtBuilder.itemWidgets,AU=AY[AV.idx],AX=AU&&AU.domNode||this.editNode,AW=AV.rInfo;this._delaySetTextCaretPos(AX,AW&&AW.startOffset||0);};switch(AS){case"undo":AT=--this.tokensCachePointer;if(AT>-1){E=this.tokensCache[AT-1];AR.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AT=this.tokensCachePointer++;if(AT>-1&&AT<this.tokensCache.length){E=this.tokensCache[AT];AR.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function Y(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;},toggleIMEStatusBar:function b(E){if((R.isIE9||R.isIE10||R.isIEW3C||R.isEdge)&&this.detectKoreanLocale()){if(E){if(!this.elStatus||!this.elStatus.offsetParent){var AR=this.elStatus=document.createElement("div");AR.innerText=mstrmojo.desc(15003,"Please enter space key to finish IME typing");AR.className="mstrmojo-TokenInputBox-status";this.domNode.appendChild(AR);}}else{this.domNode.removeChild(this.elStatus);delete this.elStatus;}}},detectKoreanLocale:function l(){var E=window.navigator;if(window.mstrConfig&&(window.mstrConfig.browserLang||[]).indexOf("ko")>=0){return true;}else{if(E.userLanguage=="ko"||E.userLanguage=="ko-KR"||E.browserLanguage=="ko"||E.browserLanguage=="ko-KR"){return true;}}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.ToolbarConfig");mstrmojo.vi.ui.toolbars._HasToolbar=mstrmojo.provide("mstrmojo.vi.ui.toolbars._HasToolbar",{_mixinName:"mstrmojo.vi.ui.toolbars._HasToolbar",preBuildRendering:function A(){this.generateToolbar();return this._super();},generateToolbar:function B(){this.passToolbarCfg(this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));},updateToolbar:function D(E){if(this._super){E=this._super(E);}return E;},passToolbarCfg:function C(E){var F=this.toolbar.toolbarCfg;if(F){F.destroy();}this.toolbar.set("toolbarCfg",E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.FilterExpr","mstrmojo.threshold.AndOrNode","mstrmojo.threshold.ConditionNode","mstrmojo.expr");var H=mstrmojo.expr,G=H.ET,F=mstrmojo.mstr.EnumNodeProperties;mstrmojo.threshold.ThresholdExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.threshold.ThresholdExprTree",cssClass:"mstrmojo-ThresholdExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,supportRelation:true,nodeClassMap:{14:mstrmojo.threshold.AndOrNode,"*":mstrmojo.threshold.ConditionNode},getItemIdentityProp:function(I){if(I.node&F.CONDITION){return"*";}return this._super(I);},onConditionEdit:mstrmojo.emptyFn,editor:undefined,isEditable:function C(I){if(!this.editable){return false;}if(I&&I.et===G.XML){return !I.xml;}return true;},onNew:function E(I){I.data.isNew=true;this.editor.openConditionWalk(I.data,I.widget.ctxtBuilder.itemWidgets[I.index]);},onnodeclick:function D(I){var J=I.part;if(!I||!J){return ;}var L=J==="andor",K=this.tree.editor;if(!((L&&this.prefixedAndOrEditable)||(!L&&this.editable))){return ;}if(!this.editable){return ;}if(L){K.openAndORPopup(this,I.getTarget());return ;}else{if(J==="addCondition"){this.tree.newCondition({et:G.AE});return ;}}K.openConditionWalk(this.data,this);},allowDrop:function B(I){var N=I&&I.src,M=N&&N.data,K=M&&M.et,L=this.tree,J=N&&N.widget&&N.widget.tree;return K&&(this===L?(J!==L):true);},remove:function A(J){var I=this._super(J);if(this.items.length===0&&J.et===G.ANDOR&&J.nds.length===0&&this.parent.removeFromModel){this.parent.removeFromModel();}return I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasPopup","mstrmojo.fe.AndOrNode","mstrmojo.fe.DynamicNode","mstrmojo.ConditionNode","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr");var E=mstrmojo,A=E.css,I=E.dom,F=E.hash,G=E.string,C=function(N){var O=N.data,M=O.dmy&&O.dmy.uts||[],K=M.length,J=[],L;for(L=0;L<K;L++){J.push(G.encodeHtmlString(M[L].n));}return'<span class="mstrmojo-text">'+J.join(", ")+"</span>";};mstrmojo.fe.RelationNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.fe.RelationNode",markupString:'<div id="{@id}" class="mstrmojo-relation {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-relation-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-relation-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-relationNode"><span class="mstrmojo-relationNode-inf"><span class="mstrmojo-relation-prefix-text">'+mstrmojo.desc(2790,"Set of").replace(/##/g,"")+'</span><span class="mstrmojo-textset"  mstrAttach:click></span><span class="mstrmojo-relation-postfix-text">'+mstrmojo.desc(2793,"Where").replace(/##/g,"")+'</span><span class="mstrmojo-relation-convert-text"  mstrAttach:click >'+mstrmojo.desc(15412,"Convert to Condition")+'</span><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></span><div class="mstrmojo-relation-childTreeNode" style="position:relative;"></div></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},relationNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},convertNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[3];},containerNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){A.toggleClass(this.relationNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=C(this);}},noRelationOperator:true,children:[{scriptClass:"mstrmojo.fe.RelationFilterExprTree",alias:"childTree",ignoreLayout:true,dropZone:false,draggable:false,nodeClassMap:{14:mstrmojo.fe.AndOrNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},onNew:function(J){this.parent.tree.onNew(J);},getItemConfig:function(M,J,N){var K=mstrmojo.fe.RelationFilterExprTree.prototype.getItemConfig.call(this,M,J,N),L=N.tree||N;return F.copy({tree:L,rootTree:this.parent.tree,noRelation:true,inRelation:true},K);},prenodeclick:function(J){if(!J||!J.part){return ;}var K=this.rootTree;if(K&&K.onnodeclick&&this.editable){J.editor=K.editor;K.onnodeclick.call(this,J);}}}],premousedown:function(J){if(this._super){this._super(J);}var K=I.eventTarget(J.hWin,J.e);if(!I.contains(this.childTree.domNode,K,true)){this.childTree.clearTreeSelect();}},preselectedChange:function(J){if(!J.value){this.childTree.clearTreeSelect();}},init:function(J){this._super(J);var K=this.data;if(K){delete this.data;this._set_data(null,K);}},_set_data:function(M,J){var K=this.data;if(J&&(!J.relation)){J.relation={};}var L=(K!==J);if(L){this.data=J;if(J){this.childTree.set("items",J.nds||[J]);}}return L;},isSelectableArea:function(J){return mstrmojo.dom.contains(this.relationNode,J,true);},preclick:function D(J){var L=null,K=I.eventTarget(J.hWin,J.e);if(I.contains(this.prefixNode,K,true)){L="andor";}else{if(I.contains(this.textNode,K,true)){L="createSet";}else{if(I.contains(this.convertNode,K,true)){this.parent.removeSet(this);return false;}}}J.part=L;},del:function H(){var J=this.parent;if(J&&J.remove&&this.data){J.remove(this.data);}},newCondition:function B(J){this.childTree.newCondition(J);},avatarCssCls:"mstrmojo-FE mstrmojo-relationNode",getAvatarNode:function(){return this.relationNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowser","mstrmojo.ACL.UserDataService");mstrmojo.ACL.UserTreeBrowser=mstrmojo.declare(mstrmojo.TreeBrowser,null,{scriptClass:"mstrmojo.ACL.UserTreeBrowser",itemIdField:"did",branchClickPolicy:mstrmojo.TreeBrowserEnum.BRANCH_POLICY_SELECT,getACLUserDataService:function D(){return mstrmojo.ACL.UserDataService;},getContentThroughTaskCall:function C(G,E){var F=this.getACLUserDataService();E.failure=mstrmojo.func.composite([function(H){if(H.getResponseHeader){mstrmojo.alert(H.getResponseHeader("X-MSTR-TaskFailureMsg"));}},E.failure]);if(G.isRoot){F.getTopLevelGroups(G,E);}else{F.getMembers(G,E);}},isBranch:function B(E){return E.isGroup;},item2textCss:function A(E){return(this._super&&this._super(E))||"mstrmojo-ACLInputBox-user "+{8704:"u",8705:"ug"}[E.st];}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.Label","mstrmojo.Obj","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.warehouse.EnumObjectTypes");var H=mstrmojo.expr,I=H.ET,C=mstrmojo.array,F=mstrmojo.string,E=mstrmojo.warehouse.EnumObjectTypes,G=mstrmojo.mstr.EnumNodeDimty,D=mstrmojo.hash;mstrmojo.fe.CreateSetEditor=mstrmojo.declare(mstrmojo.Editor,null,{onOpen:function(){var Q=this.model,W=this.condition.data,R=!W.m,N=this.attrsBox.attrsList,J=this.relBox.relPd,S=C.filter(Q.metrics,function(Z){return !Z.um;}),X=[{n:mstrmojo.desc(12037,"System Default"),t:-1,did:"default"}].concat(S),L=this.appQualBox.appQual,Y=D.clone(Q.attrs);C.forEach(Y,function(a){var Z=false;if(a.t===E.ATTRIBUTE){C.forEach(a.fs,function(b){if(b.fgr>0){Z=true;return false;}});}a.css=(a.css||"")+" "+(a.t?("t"+a.t+((a.da||a.um)?"d":"")+(Z?"g":"")+(a.st?(" st"+a.st):"")):"");});N.set("items",Y);mstrmojo.array.forEach(["relBox","appQualBox"],function(Z){this[Z].set("visible",R);},this);if(W.dmt===4&&W.dmy.uts){var M={};C.forEach(W.dmy.uts,function(a){var Z=C.find(Q.attrs,"did",a.utgt.did);if(Z>=0){M[Z]=true;}});N.set("selectedIndices",M);}if(R){J.set("items",X);if(W.relation&&W.relation.guide){var O=W.relation.guide,V=C.find(X,"did",O.did);J.set("selectedIndex",V>=0?V:0);}else{J.set("selectedIndex",0);}L.set("checked",!!W.applySubExpr);}if(mstrApp.isWSStyling){var U={left:parseInt(this.left,10),top:parseInt(this.top,10)},K=this.editorNode.getBoundingClientRect(),T={width:window.innerWidth,height:window.innerHeight},P={width:K.right-K.left,height:K.bottom-K.top};if(K.right>T.width){this.set("left",(U.left-P.width)+"px");}if(K.bottom>T.height){this.set("top",(U.top-P.height)+"px");}}},onOK:function(){var Q=this.model,T=this.condition,V=this.condition.data,N=this.attrsBox.attrsList,J=this.relBox.relPd,L=this.appQualBox.appQual;var X=N.getSelectedItems(),K=[];C.forEach(X,function(Z){K.push({utgt:{n:Z.n,did:Z.did},utp:H.DMY_TP.ATTR,agg:1,flt:2,gb:true,rps:0,n:Z.n});});var W;if(J.selectedIndex>0){var O=J.items[J.selectedIndex];W={n:O.n,did:O.did,t:E.METRIC,st:1024};}var M;if(V.et===15){V.dmt=G.NodeDimtyOutputLevel;V.dmy=V.dmy||{};V.dmy.uts=K;M=V.relation=V.relation||{};if(W){M.guide=W;V.useSchema=false;}else{delete M.guide;delete M.rsTp;delete M.joTp;delete M.paTp;delete M.erTp;V.useSchema=true;}V.applySubExpr=L.checked;T.set("data",V);}else{var U={et:15};U.dmt=G.NodeDimtyOutputLevel;U.dmy={};U.dmy.uts=K;M=U.relation={};if(W){M.guide=W;}else{U.useSchema=true;}U.applySubExpr=L.checked;var P=T,R={rq:U,cq:V},S=[T.childIndex()];if(V.et===I.ANDOR){if(V.nds&&V.nds.length>2){var Y=Q.childIdx;S=[Y,Y-1];}else{P=T.parent;}}else{P=T.parent;R.isMetric=!!V.m;}P.createSet(S,R);}},children:[{scriptClass:"mstrmojo.Box",alias:"attrsBox",cssClass:"Attributes-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14613,"Select attributes to create the set"),cssClass:"Label",alias:"attrsBoxLabel"},{scriptClass:"mstrmojo.ui.CheckList",alias:"attrsList",cssClass:"CheckList"}]},{scriptClass:"mstrmojo.Box",alias:"relBox",cssClass:"RelatedBy-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12036,"Related by"),cssClass:"Label",cssDisplay:"inline-block"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"relPd",cssClass:"Pulldown",cssDisplay:"inline-block",allowHTML:false,onitemSelected:function B(J){}}]},{scriptClass:"mstrmojo.Box",alias:"appQualBox",cssClass:"AppQual-Box",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"appQual",cssClass:"AppQual-CheckBox"},{scriptClass:"mstrmojo.Label",cssClass:"AppQual-Label",text:mstrmojo.desc(12038,"Apply this qualification independently of the relationship filter"),postBuildRendering:function(){if(this._super){this._super();}if(mstrApp.isWSStyling){this.set("text",mstrmojo.desc(15015,"Apply this qualification to define the set, and also to the results of the visualization."));}}}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float: right; border-collapse: separate; display: table;",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(2397,"OK"),onclick:function(){var J=this.editor;J.onOK();J.close();},bindings:{enabled:function(){var K=this.parent.parent.attrsBox.attrsList,J=this.parent.parent.attrsBox.attrsList.selectedIndices;return K.getSelectedItems().length>0;},editor:"this.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent"}}]}],postBuildRendering:function A(){this._super();if(mstrApp&&mstrApp.isWSStyling){this.attrsBox.attrsBoxLabel.set("text",mstrmojo.desc(15013,"Select the attributes that you look for."));}}});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.FilterExpr");var D=mstrmojo.hash,B=mstrmojo.expr.ET;mstrmojo.fe.FilterExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.fe.FilterExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,onConditionEdit:mstrmojo.emptyFn,modifyConditionNode:function(G,F){var H=G.data,E=H.isNew;D.copy(D.clone(F),D.clear(H));delete H.isNew;G.paint();if(H.et===B.MQ||H.et===B.MC){G.set("noCreateSet",!mstrApp.supportAdvFilter);}if(G.tree.onConditionEdit){G.tree.onConditionEdit(G,E);}},getItemConfig:function(H,E,I){var F=this._super(H,E,I),G=I.tree;return D.copy({onclick:G.prenodeclick,containerResizable:G.containerResizable,ondragend:G.ondragend,ondrop:G.ondrop},F);},ondragenter:function A(E){this.dropCuePos={left:0,top:0,idx:0,idxActual:0};this._super(E);},ondragend:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondragend.call(this,E);}},ondrop:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondrop.call(this,E);}},isEditable:function C(F){if(!this.editable){return false;}var E=false;switch(F&&F.et){case B.R:case B.F:E=false;break;case B.ANDOR:case B.MQ:case B.AQ:case B.AL:case B.AC:case B.MC:case B.AE:E=true;break;case B.XML:E=!F.xml||!!F.ph;}return E;},prenodeclick:function(E){if(!E||!E.part){return ;}if(E.part!=="createSet"&&E.part!=="createSetOpt"&&!(E.part==="andor"?this.prefixedAndOrEditable:this.editable)){return ;}var F=this.tree;if(F.onnodeclick){F.onnodeclick.call(this,E);}},getSelectedItemWidget:function(){var E=function(K){var I=K&&K.ctxtBuilder&&K.ctxtBuilder.itemWidgets,G=K.selectedIndex,F=I&&I.length||0;if(!I){return ;}if(G===-1){for(var H=0;H<F;H++){var J=E(I[H]);if(J){return J;}}}else{return I[G];}};return E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.NewFolderEditor","mstrmojo.DI.DIHelpers");var C=mstrmojo.func,F=mstrmojo.DI.DIHelpers,E=mstrmojo.array;function B(){var H={alias:"newFolder",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-createfolder",text:mstrmojo.desc(3245,"Create New Folder"),onclick:function(){var J=this.parent.parent,I={zIndex:J.zIndex+10,navigateAfter:false,fId:J.ob.currentFolder.did,okFn:function(K,L){J.ob.refreshContent();if(L){J.ob.browseFolder(K.fid,J.newFolder);}}};if(J.ob.dataProvider){I.dp=J.ob.dataProvider;}J.openPopup("newFolder",I);},postCreate:function(){this.set("visible",false);}},G=mstrmojo.hash.clone(mstrmojo.ObjectBrowser.prototype.children);G.push(H);return G;}mstrmojo.SaveAsObjectBrowser=mstrmojo.declare(mstrmojo.ObjectBrowser,null,{scriptClass:"mstrmojo.SaveAsObjectBrowser",cssClass:"mstrmojo-SaveAs-OB",children:B(),getRecents:function(G){var H=this;G.onClose=function(){if(H.recentFolders){this.removeChildren(this.recentLable);this.removeChildren(this.recentList);delete H.recentFolders;}};this.getDataProvider().loadRecentSaveAsFolders({success:function(I){if(H.recentFolders){G.removeChildren(G.recentLable);G.removeChildren(G.recentList);delete H.recentFolders;}if(I&&I!==""){H.recentFolders=H.getList(I.objects,G);G.addChildren(H.recentFolders);}},failure:function(I){mstrmojo.alert(I.message||I.getResponseHeader("X-MSTR-TaskFailureMsg"));},});},getList:function(H,G){var I=this;return[{scriptClass:"mstrmojo.Label",alias:"recentLable",cssClass:"recentLabel",text:mstrmojo.desc(14354,"Recents")},{scriptClass:"mstrmojo.ui.List",alias:"recentList",items:H,cssClass:"recentList",onclick:function(J){var K=this.getItemFromTarget(J.getTarget());I.browseFolder(K.did,"");G.close();}}];}});var A={success:function(G){var H=this.parent;if(H.onObjectSaved){H.onObjectSaved({name:H.name,did:G.did,desc:H.desc});}mstrmojo.alert(mstrmojo.desc(7987,"The ## '###' has been saved successfully.").replace("##",H.typeDesc||"Object").replace("###",H.name),null,mstrmojo.desc(7984,"Object Saved"));H.ob.refreshContent();H.close();},failure:function(H){var G=parseInt(H.getResponseHeader("X-MSTR-TaskErrorCode"),10)+4294967296,I=this.parent;if(G===2147749923){mstrmojo.confirm(mstrmojo.desc(7986,"The ## '###' already exists. Do you want to replace the existing one?").replace("##",I&&I.typeDesc||"Object").replace("'###'",I&&I.name?'"'+I.name+'"':""),{confirmBtn:{fn:function(){I.saveAs(true);}}},{title:mstrmojo.desc(3179),zIndex:I&&I.zIndex+10});}else{mstrmojo.alert(mstrmojo.desc(7985,"Error while saving: ")+H.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};mstrmojo.SaveAsEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SaveAsEditor",cssClass:"mstrmojo-SaveAsEditor",title:mstrmojo.desc(3167,"Save As"),sId:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:null,browsableTypes:null,showCompletePath:true,desc:"",name:"",displaySaveLabel:true,searchVisible:true,upButtonVisible:true,children:[{scriptClass:"mstrmojo.SaveAsObjectBrowser",alias:"ob",closeable:false,closeOnSelect:false,fishEyeVisible:false,bindings:{showCompletePath:"this.parent.showCompletePath",rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",browsableTypes:"this.parent.browsableTypes",displaySaveLabel:"this.parent.displaySaveLabel",searchVisible:"this.parent.searchVisible",upButtonVisible:"this.parent.upButtonVisible",sId:"this.parent.sId"},postCreate:function(){this.onSelectCB=[this.parent,"onOBSelect"];this.onBrowseFolder=[this.parent,"onOBBrowseFolder"];}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-Input-Panel",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Name-Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput",bindings:{value:"this.parent.parent.name"}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Desc-Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",bindings:{value:"this.parent.parent.desc"},rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"buttonBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{alias:"newFolder",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton mstrmojo-createfolder",text:mstrmojo.desc(3245,"Create New Folder"),onclick:function(){var H=this.parent.parent,G={zIndex:H.zIndex+10,navigateAfter:false,fId:H.ob.currentFolder.did,okFn:function(I,J){H.ob.refreshContent();if(J){H.ob.browseFolder(I.fid,H.newFolder);}},cssClass:F.getEnvObj().isAppSchema()?"workstation":undefined};if(H.ob.dataProvider){G.dp=H.ob.dataProvider;}H.openPopup("newFolder",G);},postCreate:function(){this.set("visible",mstrmojo.resolveFeature("create-folder")||F.getEnvObj().isAppSchema());}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot okButton",alias:"ok",text:mstrmojo.desc(2400,"Save"),onclick:function(){this.parent.parent.saveAs();}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]}],newFolder:{scriptClass:"mstrmojo.NewFolderEditor"},onOpen:function(){this.ob.browse();},onOBBrowseFolder:mstrmojo.emptyFn,onOBSelect:function(G){this.set("name",G.n);},saveAsCallback:function D(){return A;},saveAs:function(J){var H=this.contPanel;this.name=H.name.value;this.desc=H.desc.value;if(!this.name){mstrmojo.alert(mstrmojo.desc(3380,"Please enter valid name"));return ;}var L=this.saveParams||{};L.folderID=this.ob.currentFolder.did;L.description=this.desc||"";L.name=this.name||"";L.saveAsOverwrite=!!J;var G=this.saveAsCallback(),K=this,I={success:function(){K.saveRecentFolders(K.ob.currentFolder.did);},failure:function(M){mstrmojo.alert(M.message||M.getResponseHeader("X-MSTR-TaskFailureMsg"));}};G.parent=this;if(!mstrApp.isSingleTier){G=C.wrapMethods(G,I);}mstrmojo.xhr.request("POST",mstrConfig.taskURL,G,L);},saveRecentFolders:function(K){var I,G,H,J=this;J.ob.getDataProvider().loadRecentSaveAsFolders({success:function(L){G=[];E.forEach(L.objects,function(O){G.push(O.did);});H=mstrmojo.array.indexOf(G,K);if(H!==-1){G.splice(H,1);}G.unshift(K);I=G.slice(0,3).join(",")+",";var M={taskId:"setPreference",prefs:"recentFolders\u001E"+I};var N={success:function(){mstrConfig.recentFolders=I;},failure:function(O){mstrmojo.alert(O.message||O.getResponseHeader("X-MSTR-TaskFailureMsg"));}};J.ob.getDataProvider().serverRequest(M,N);},failure:function(L){mstrmojo.alert(L.message||L.getResponseHeader("X-MSTR-TaskFailureMsg"));}});}});mstrmojo.SaveAsEditor.SAVEAS_CALLBACK=A;})();(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");var H=mstrmojo.array;var E=[257,1024,3072,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:H.hash(E),item:null,OKFn:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+E.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:false,scrollableIncFetch:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",isImportFromCube:"this.parent.isImportFromCube",}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function C(){var J=this.parent.parent;this.parent.parent.close({item:J.item});var I=J.OKFn;if(I){I(J.item);}J.set("item",null);},bindings:{enabled:function B(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancle"),onclick:function C(){var I=this.parent.parent;this.parent.parent.close();I.set("item",null);}}]}],preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function D(){if(this._super){this._super();}this.browse();},onOBSelect:function F(I){this.set("item",((this.supportedTypes[I.t]||this.supportedTypes[I.st])?I:null));},browse:function G(){this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.VBox","mstrmojo.ObjectBrowser","mstrmojo.HTMLButton");mstrmojo.requiresDescs(1059,1441,3413,3414,4996,7972,9893);var A={768:true,769:true,774:true,776:true,779:true};mstrmojo.IVEDatasetPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.IVEDatasetPicker",cssClass:"mstrmojo-vi-dataset-picker",title:mstrmojo.desc(11940,"Select Existing Dataset"),help:"add_existing_datasets.htm",startingFolder:null,item:null,multiSelect:false,selectedItems:null,children:[{alias:"newLabel",scriptClass:"mstrmojo.FieldSet",legend:mstrmojo.desc(4996,"New"),cssClass:"mstrmojo-ive-fs"},{alias:"btnImport",scriptClass:"mstrmojo.Button",text:mstrmojo.desc(13550,"Access External Data"),cssClass:"mstrmojo-ive-import",onclick:function(){this.parent.close({action:"import"});}},{alias:"useExistingLabel",scriptClass:"mstrmojo.FieldSet",legend:mstrmojo.desc(9893,"Use Existing"),cssClass:"mstrmojo-ive-fs"},{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",cssText:"border-width:1px;border-color:#DDDDDD;",closeable:false,browsableTypes:"8,768,769,774,776,779",closeOnSelect:false,showCompletePath:false,searchVisible:true,upButtonVisible:true,folderLinksContextId:1,bindings:{rootFolderID:function(){return this.parent.startingFolder;},multiSelect:"this.parent.multiSelect"}},{scriptClass:"mstrmojo.HBox",alias:"btnHBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1059,"Next"),onclick:function(){this.parent.parent.close({item:this.parent.parent.item});},bindings:{enabled:function(){return !!(this.parent.parent.multiSelect?this.parent.parent.selectedItem.length:this.parent.parent.item);}}}]}],preBuildRendering:function(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];this.ob.onBrowseFolder=[this,"onOBBrowseFolder"];this.ob.booklet.set("animates",false);this.ob.rootFolderID=this.startingFolder;},postBuildRendering:function(){if(this._super){this._super();}this.ob.browse();},onOBSelect:function(B){if(this.multiSelect){this.set("selectedItems",mstrmojo.array.filter(B,function(C){return A[C.st];}));}else{this.set("item",(A[B.st]?B:null));}},onOBBrowseFolder:function(B){if(this.multiSelect){this.set("selectedItems",null);}else{this.set("item",null);}},onstartingFolderChange:function(){this.ob.rootFolderID=this.startingFolder;this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.dom","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.vi.util.NumberFormatUtility");var M=mstrmojo.hash,b=mstrmojo.array,G=mstrmojo.num,J=mstrmojo._FormatDefinition,B=mstrmojo.css,Z=mstrmojo.mstr.EnumFunction,L=mstrmojo.locales,H=mstrmojo.Button.newIconButton,O=mstrmojo.date,I=mstrmojo.vi.util.NumberFormatUtility,r="1234.12",E=J.NumberFormatCategory,p=J.FixedNegative,F=J.CurrencyNegative,e=J.PercentNegative,K=J.DefaultFormat.FormattingNumber,n="nf-MiddleRow ",W="nf-MiddleRow nf-HasWidget ",Y,T,d=function d(u,t){return{cls:this.value===u.v?"selected":"",v:u.v||"",n:u.n||"",style:u.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===t?"selected":""};},o={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};var S=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(J.Category.slice(2)),c=[{n:"$"},{n:""},{n:""},{n:""},{n:"fr."}];function D(v,u){var t=b.find(v,"v",u);return t===-1?"":v[t].f;}function N(t){var v=this.parent.parent.parent.myData,u=t.v;v.set("format",D(this.items,u));v.set("negativeNumbers",u);B.toggleClass(this.selectedNode,"red",t.r);}function X(v,w,t){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:v,onitemSelected:function u(x){var z=this.parent;while(z&&(!z.data||typeof z.data[w]==="undefined")){z=z.parent;}if(z){z.data.set(w,x.v);if(t){z.children[0].preview.preview_label.set("text",x.n);}}}};}function h(AE,z,x,AH,AD){var AG=M.clone(AE),u=z>0?L.number.DECIMALSEPARATOR:"",v=z>0?".":"",w=J.DefaultFormat.FormattingNumber,AF=new RegExp("\\"+L.number.THOUSANDSEPARATOR,"g"),t=new RegExp("\\"+L.number.DECIMALSEPARATOR+"\\d{2}","g"),AB;for(AB=0;AB<z;AB++){u+=AB%9;v+="0";}for(AB=0;AB<AG.length;AB++){var AC=AG[AB];AC.n=AC.n.replace(/,/g,"@");AC.n=AC.n.replace(/\./g,L.number.DECIMALSEPARATOR);AC.n=AC.n.replace(/@/g,L.number.THOUSANDSEPARATOR);if(x){AC.n=AC.n.replace(AF,"");AC.f=AC.f.replace(/,/g,"");}if(AH&&AH!==w.CurrencyPosition){switch(AH){case o.RIGHT:AC.n=AC.n.replace(/\$/g,"").replace(t,L.number.DECIMALSEPARATOR+"12$");AC.f=AC.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case o.LEFT_WITH_SPACE:AC.n=AC.n.replace(/\$/g,"$ ");AC.f=AC.f.replace(/\$/g,"$ ");break;case o.RIGHT_WITH_SPACE:AC.n=AC.n.replace(/\$/g,"").replace(t,L.number.DECIMALSEPARATOR+"12 $");AC.f=AC.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}AC.n=AC.n.replace(t,u);AC.f=AC.f.replace(/\.\d{2}/g,v);if(AD&&AD!==w.CurrencySymbol){var AA=AD.replace(/\$/g,"$$$$");AC.n=AC.n.replace(/\$/g,AA);AC.f=AC.f.replace(/\$/g,AA);}AC.cls=AC.r?"red":null;}return AG;}function U(w){var t="1"+(w>0?".":"").toString(),x="0"+(w>0?".":"").toString(),u;for(u=0;u<w;u++){t+=u%10;x+="0";}return[t+"E+03",x+"E+0#"];}function R(AH,AJ){var AB="\u00A4",AF=/"[^"]*"/g,v=AH.match(AF),AK="\u0091",AG=/\[[^\]]*\]/g,t=AH.match(AG),AE,AI;AE=AH.replace(AF,AB);AE=AE.replace(AG,AK);var x=AH.indexOf("."),AD=G.getDecimalLength(AH),AA=Math.max(0,AD+AJ),w=AH.match(/\d(?!((\d)|(,\d)))/g),u=x!==-1?AH.charAt(x-1):w&&w[0],AC=(u||"0")+(AA>0?".":"").toString();for(var z=0;z<AA;z++){AC+="0";}AE=AE.replace(AD===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,AC);AE=AE.split(AB);AI=AE[0];b.forEach(v,function(AM,AL){AI+=AM+AE[AL+1];});AE=AI.split(AK);AI=AE[0];b.forEach(t,function(AM,AL){AI+=AM+AE[AL+1];});return AI;}function P(AB,t,AA,z,v,u){var x=AB.parent.parent.parent,w=h(t,AA.decimalPlaces,z,v,u);AA.set("format",D(w,AA.negativeNumbers.toString()));AB.set("items",w);AB.set("selectedIndex",b.find(w,"v",AA.negativeNumbers.toString()));x.preview.preview_label.set("text",I.applyFormatToNumber(x.myData.format,r.replace(/\./g,L.number.DECIMALSEPARATOR)));}function l(){var AC=this.parent.parent,AG=AC.myData,w=AC.formatterContainer,u=S[AC.categoryPicker.selectedIndex].v,AJ=this.funcType===Z.FunctionLeftStr?1:-1,z=null,AB=null,x=false,AI=0,AD=null,v=false,AF;switch(u){case E.Fixed:z=w.fixed_hBox.negativeDDL;AB=p;x=!AG.thousandSeparator;break;case E.Currency:z=w.currency_hBox2.negativeDDL;AB=F;AI=AG.currencyPosition;AD=AG.currencySymbol;break;case E.Percentage:z=w.percentage_hBox.negativeDDL;AB=e;break;case E.Scientific:v=true;break;case E.Custom:AF=true;break;default:return ;}if(AF){var AH=R(AG.format,AJ);AC.preview.preview_label.set("text",I.applyFormatToNumber(AH,r.replace(".",L.number.DECIMALSEPARATOR)));AC.formatterContainer.custom_text.set("value",AH);return ;}var AA=AG.decimalPlaces,t=AA+AJ;t=Math.max(0,t);t=Math.min(J.MaxNegativeDidigts,t);AG.set("decimalPlaces",t);if(v){var AE=U(t);AG.set("format",AE[1]);AC.preview.preview_label.set("text",AE[0]);}else{P(z,AB,AG,x,AI,AD);}}function q(t,u){return Math.max(b.find(t,"v",u),0);}function C(v){var u=this.parent.parent.categoryPicker,t=S.map(function(w){return w.v;}).indexOf(v);u.set("selectedIndex",t);}function m(t,u,w,v){return H(undefined,t,u,undefined,M.copy(v,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:w,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function a(){if(mstrApp.isSingleTier&&!mstrmojo.dom.isMac()){var z=this.formatterContainer,x=L.datetime,t={day:7,month:4,year:1998},v={hour:9,min:41,sec:46},w=x&&x.DATEINPUTFORMATS,u=x&&x.TIMEINPUTFORMATS;Y=[];T=[];w.forEach(function(AA){Y.push({v:AA,n:O.formatDateInfo(t,AA)});});u.forEach(function(AA){T.push({v:AA,n:O.formatTimeInfo(v,AA)});});z.date_ddl.set("items",Y);z.time_ddl.set("items",T);}else{Y=J.Date;T=J.Time;}}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}a.call(this);var t=this.formatterContainer;if(this.formatValue){t.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;t.fixed_btn.checked=!!this.formatValue.thousandSeparator;B.addWidgetCssClass(t.fraction_ddl,e[b.find(e,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function Q(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",q(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[M.copy({alias:"categoryPicker",cssClass:"nf-category",onitemSelected:function k(AH){if(!this.hasRendered){return ;}var AC=this,AF=AC.parent,w=AF.formatterContainer,t=AF.shortcutRow,AG=AF.preview.preview_label,AE=AH.v,z=AE===E.Automatic,v=AE===E.Scientific,u=[],AB=AF.myData;b.forEach(w.children,function(AI){AI.set("visible",false);});AF.border.set("visible",!z);AF.preview.set("visible",!z);AF.borderBottom.set("visible",!(!mstrApp.isWSStyling||z||v));["border","moveLeftBtn","moveRightBtn"].forEach(function(AI){t[AI].set("visible",!z);});AB.set("category",AE);AB.set("thousandSeparator",AE?K.ThousandSeparator:AF.formatValue.thousandSeparator);switch(AE){case E.Currency:P(w.currency_hBox2.negativeDDL,F,AB,false,AB.currencyPosition,AB.currencySymbol);w.currency_hBox1.currency_position.set("selectedIndex",q(J.CurrencyPosition,AB.currencyPosition.toString()));u=["currency_hBox1","currency_hBox2"];break;case E.Date:w.date_ddl.set("selectedIndex",q(Y,AB.format));u=["date_ddl"];break;case E.Time:w.time_ddl.set("selectedIndex",q(T,AB.format));u=["time_ddl"];break;case E.Percentage:P(w.percentage_hBox.negativeDDL,e,AB,false,0,null);u=["percentage_hBox"];break;case E.Fraction:w.fraction_ddl.set("selectedIndex",q(J.Fraction,AB.format));u=["fraction_ddl"];break;case E.Scientific:var AA=U(AB.decimalPlaces||0);AB.set("format",AA[1]);AG.set("text",AA[0]);break;case E.Custom:var x=AB.customText||AB.format,AD=w.custom_text;AB.set("format",x);AD.value=x;AD.refresh();AG.set("text",I.applyFormatToNumber(x,r.replace(".",L.number.DECIMALSEPARATOR)));u=["custom_condense","custom_text"];break;case E.Fixed:P(w.fixed_hBox.negativeDDL,p,AB,!AB.thousandSeparator,0,null);u=["fixed_hBox","fixed_btn"];break;}b.forEach(u,function(AI){w[AI].set("visible",true);});AF.adjustAfterCategoryChange();}},X(S,"category")),{scriptClass:"mstrmojo.Box",cssClass:n+"nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,moveRightBtn:null,children:[m("nf-shortcut-currency",function g(){C.call(this,E.Currency);},mstrmojo.desc(2051,"Currency"),undefined),m("nf-shortcut-percentage",function g(){C.call(this,E.Percentage);},mstrmojo.desc(2053,"Percentage"),undefined),m("nf-shortcut-fixed",function g(){C.call(this,E.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),undefined),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},m("nf-MoveDecimalPoint left",function g(){l.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{funcType:Z.FunctionLeftStr,alias:"moveLeftBtn"}),m("nf-MoveDecimalPoint right",function g(){l.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{funcType:Z.FunctionRightStr,alias:"moveRightBtn"})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function V(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function k(t){N.call(this,t);}},X([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:n,label:"",onclick:function g(){var t=this.parent.parent;t.myData.set("thousandSeparator",this.checked?-1:0);P(this.parent.fixed_hBox.negativeDDL,p,t.myData,!this.checked,0,null);},preBuildRendering:function A(){this.set("label",mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",L.number.THOUSANDSEPARATOR));}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:W,visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",items:c,postselectedValueChange:function j(t){var x=this,w=x.parent.parent.parent,v=t.value,u=w.myData;u.set("currencySymbol",v);P(this.parent.parent.currency_hBox2.negativeDDL,F,u,false,parseInt(u.currencyPosition,10),v);}},M.copy({cssClass:"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function k(t){var w=this,v=w.parent.parent.parent,u=t.v;v.myData.set("currencyPosition",parseInt(u,10));P(this.parent.parent.currency_hBox2.negativeDDL,F,v.myData,false,parseInt(u,10),v.myData.currencySymbol);}},X(J.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function k(t){N.call(this,t);}},X([],"format"))]},M.copy({alias:"date_ddl",cssClass:W},X(J.Date,"format",true)),M.copy({alias:"time_ddl",cssClass:W},X(J.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function k(t){N.call(this,t);}},X([],"format"))]},M.copy({alias:"fraction_ddl",cssClass:W},X(J.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0;[<=-1000000]#,##0,,"M";[<=-1000]#,##0,"K"');},false,{cssClass:"nf-condense",alias:"custom_condense"}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",cssClass:"nf-custom",onvalueChange:function f(){var v=this,u=v.parent.parent,t=v.value;u.myData.set("format",t);u.myData.set("customText",t);v.parent.parent.preview.preview_label.set("text",I.applyFormatToNumber(t,r.replace(".",L.number.DECIMALSEPARATOR)).replace(/\s/g,"&nbsp;"));}}]},{scriptClass:"mstrmojo.Label",alias:"borderBottom",cssClass:"nf-border"},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:n+"nf-PreviewRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right preview-info-label",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Label","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.ui.PulldownCheckList");var G=mstrmojo.array,A=mstrmojo.hash,D=mstrmojo.mstr.EnumDSSXMLObjectTypes.Dimension;mstrmojo.ui.SearchablePulldownCheckList=mstrmojo.declare(mstrmojo.ui.PulldownCheckList,null,{scriptClass:"mstrmojo.ui.SearchablePulldownCheckList",_changeList:null,useRichTooltip:true,showTooltipForLargeText:true,children:[{scriptClass:"mstrmojo.Label",alias:"noResults",cssClass:"nores",text:mstrmojo.desc(15559,"No result matches your search.")}].concat(mstrmojo.ui.PulldownCheckList.prototype.children),onOpen:function B(){var L=this.parent;if(this._super){this._super();}this._changeList=A.copy(L.selectedIndices);},onClose:function I(L){if(this._super){this._super(L);}this._changeList=null;},showTooltip:function J(L,N){var M=L.target||mstrmojo.dom.eventTarget(L.hWin,L.e);M=this.getItemNodeFromTarget(M);if(M){L=A.copy(L);L.srcElement=M;}this._super(L,N);},saveSelection:function C(){this.toggleCacheMode(true);this.parent.set("selectedIndices",A.copy(this._changeList));this.toggleCacheMode(false);},getChanges:function F(){return this._changeList;},onclearSelection:function(){var Q=this.list,O=this._changeList,M=Q.selectedIndices,P=this.parent.items,N=Q.items,L;if(A.isEmpty(M)){M={};A.forEach(O,function(S,R){if(S){L=G.find(N,"v",P[R].v);if(L>=0){M[L]=O[R];}}});Q.selectedIndices=M;}},onvisibleChange:function(){this.list.set("visible",this.visible);},postselectionChange:function E(V){if(this._super){this._super(V);}if(this._restoreSelection){delete this._restoreSelection;return ;}var P=this.parent.items,R=this.list.items,O=(P.length===R.length),S=V.added||[],N=V.removed||[],U=this._changeList,L=this.parent.allIdx,Q=R[L],T,M=function(){G.forEach(S,function(W){T=G.find(P,"v",R[W].v);U[T]=true;});G.forEach(N,function(W){T=G.find(P,"v",R[W].v);delete U[T];});};if(!U){return ;}if(Q&&(Q.t===D)){if(L===S[0]){G.forEach(R,function(W){if(W.t!==D||O){T=G.find(P,"v",W.v);if(T!==-1&&!U[T]){U[T]=true;}}});return ;}if(L===N[0]){G.forEach(R,function(W){T=G.find(P,"v",W.v);if(T!==-1&&U[T]){delete U[T];}});return ;}}if(U[L]){delete U[L];}M();},onitemsChange:function K(){var L=this.list.items;this.noResults.set("visible",L&&L.length===0);},toggleCacheMode:function H(L){this._restoreSelection=L;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.PopupButton","mstrmojo.ui.PulldownCheckList");var G=mstrmojo.css,D=mstrmojo.hash,E={0:true};function B(){var O=this.selectedIndices=D.copy(this.getPopupList().selectedIndices),K=this.items,N=[],M=this.allIdx,L=this.noneIdx;if(K){if(O[M]){N.push(K[M].n);}else{if(O[L]){N.push(K[L].n);}else{mstrmojo.array.forEach(K,function(Q,P){if(O[P]){N.push(Q.n);}});}}}this.set("value",N.join(", "));}mstrmojo.ui.MultiSelectPulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.MultiSelectPulldown",isHostedWithin:false,popupWidget:undefined,init:function J(K){this._super(K);G.addWidgetCssClass(this,"multi");this.hostedCSSClass=this.hostedCSSClass+" multi";},submitSelections:function A(){B.call(this);this.onchange();},_set_selectedIndices:function F(M,K){var L=this.selectedIndices=D.copy(K||this.selectedIndices||E);this.getPopupList().set("selectedIndices",L);B.call(this);return true;},select:function H(K){this.getPopupList().select(K);},getPopupWidget:function C(){return this.popupWidget;},getPopupList:function I(){return this.popupWidget.list;},children:[{scriptClass:"mstrmojo.ui.PulldownCheckList",alias:"popupWidget",useRichTooltip:true,showTooltipForLargeText:true}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.hash","mstrmojo.css");var A=mstrmojo.hash.copy;mstrmojo.ui.editors.controls.AdvancedColorPickerPopup=mstrmojo.declare(mstrmojo.ui.editors.controls.AdvancedColorPicker,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPickerPopup",locksHover:true,init:function E(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-AdvColorPickerPopup");},showPickerForCurrentMode:function D(){this._super();var G=this,F=function F(){if(G.visible){G.adjustCornersForPopupOverflow();}};if(this.pickerMode===2){this.colorStyle.markupMethods=A({onselectedIndexChange:F},A(this.colorStyle.markupMethods));}F();},onOpen:function C(){var F=this.parent;this.set("color",F?F.selectedValue:this.color);this.renderContent();this._super();},colorCanceled:function B(){this.close();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var R=mstrmojo.array,U=mstrmojo.css,N=mstrmojo.hash,O=mstrmojo.func,M=mstrmojo.Button.newWebButton,P=mstrmojo.dom,T="mstrmojo-link-validation",Q="mstrmojo-link-vt",F=function F(V){if(V.old){this.removedLinks.push(V);}this.links.removeChildren(V);},S=function S(){var t=this.dsMap,p=this.docModel,Y=p.datasets,v=function v(j,w,a){var k={n:a||"",did:w||null,parent:j||null,lv:(j?j.lv+1:-1),children:[]};if(j){j.children.push(k);}return k;},e=v(),X,W,V,g,Z,q,l,u,r,o,n,m,c,b,d,h,f;N.forEach(Y,function(a){if(p.isMDXDataset(a)){Z=a.tables;for(o=0,b=Z.length;o<b;o++){q=Z[o];X=v(e,q.did,q.n);X.isMDX=true;for(n=0,d=q.dimensions.length;n<d;n++){l=q.dimensions[n];W=v(X,l.did,l.n);for(m=0,h=l.hierarchies.length;m<h;m++){u=l.hierarchies[m];V=v(W,u.did,u.n);for(c=0,f=u.att.length;c<f;c++){r=u.att[c];g=v(V,r.did,r.n);g.att=r;t[q.did+":"+r.did]=g;}}}}}else{X=v(e,a.did,a.name);X.isMDX=false;R.forEach(a.att,function(j){g=v(X,j.did,j.n);g.att=j;t[a.did+":"+j.did]=g;});}});return e;},B=function B(b,c){b=R.ensureArray(b);var a=this,Z=this.attribute.did,d=this.docModel,X=this.datasetId,W="\u001F",V={success:function(f){var h=f.als,e=(d.als&&d.als.links)||{},g=a.dsTree;R.forEach(b,function(q,l){var r={},j={},k=[],m={},p=Z+" "+q,n=R.filter(h[l].ats,function(t){return !d.isInDataset(X,t.at,["att"]);}),o=function o(t,u){if(!m[t]){m[t]={};}if(!m[t][u]){m[t][u]=true;}};R.forEach(n,function(v){var t=v.at,u=v.fms;r[t]=true;if(u){R.forEach(u,function(w){o(t,w.fm);});}});N.keyarray(e).forEach(function(t){if(t===p){R.forEach(e[t],function(u){u=u.split(" ");r[u[0]]=true;o(u[0],u[1]);});}});if(N.keyarray(r).length>0){R.forEach(g.children,function(u){var t=function(v){var w;if(!v.att){return ;}v=v.att;if(r[v.did]){if(!j[v.n]){j[v.n]={};}if(!j[v.n][v.did]){j[v.n][v.did]=[];}j[v.n][v.did].push(u.n);w=N.copy(v,w);w.dsId=u.did;k.push(w);}};if(u.isMDX){R.forEach(u.children,function(v){R.forEach(v.children,function(w){R.forEach(w.children,t);});});}else{R.forEach(u.children,t);}});}a.tgtAttrs[q]=k;a.tgtForms[q]=m;a.namesHash[q]=j;});}},Y={taskId:"validateDocumentLinks",msgID:d.mid,action:1,attributeList:Z,attributeFormList:b.join(W)};mstrApp.serverRequest(Y,O.wrapMethods(V,c));},E=function(Y,a,W,Z){Y.richTooltip=null;if(!Y.isSearching){var X=a&&a.scrollWidth>a.clientWidth;W=X?mstrmojo.desc(14648,"## from ###").replace("##",W):"";if(Z){if(!X){W=mstrmojo.desc(14640,"From ###");}W=W.replace("###",Z);}var V=mstrmojo.dom.position(a);Y.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:W,top:V.y-6,left:V.x};}},D=function D(c){var d=this,f=function(n){var l=n.fs,o=n.de,m=[];(l||[]).forEach(function(p){if(p.obf&&(!o||p.idf)){m.push({n:p.fnm,v:p.fid,idf:p.idf});}});return m;},g=f(this.attribute),Z=function(o,m){var l=f(o);var p=(d.tgtForms[m]&&d.tgtForms[m][o.did])||{};var n=[];R.forEach(l,function(q){if(p[q.v]){n.push(q);}});return n;},b=function b(m){var l=[];R.forEach(d.tgtAttrs[m],function(n){if(Z(n,m||d.idFormId).length>0){var p=d.namesHash[m],o=n.n;if(p[n.n]&&N.keyarray(p[n.n]).length>1){o=o+" ("+p[n.n][n.did].join(",")+")";}l.push({n:n.n,v:n,tt:o});}});if(l.length===0){l.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return l;},h=b((c&&c.srcFormId)||this.idFormId),j=function(l,m){return R.find(l.fs,m?"fid":"idf",m||true);},k=function(m){var l=-1;h.forEach(function(o,n){if(o.v.did===m){l=n;}});return l;},W=function(m){var l=h[m];if(!l){return mstrmojo.desc(13397,"Select an attribute");}else{return l.n;}},X=function(m){var n=m.items,l=m.selectedIndex;if(l>=0){if(n[l].idf){return ;}}n.forEach(function(p,o){if(p.idf){m.set("selectedIndex",o);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!c,oldMeta:c,getMeta:function(){var l=this.linkFromForm,n=this.linkToAtt,m=this.linkToForm;return{srcAttrId:d.attribute.did,srcFormId:l.items[l.selectedIndex].v,tgtAttrId:n.items[n.selectedIndex]&&n.items[n.selectedIndex].v.did,tgtFormId:m.items[m.selectedIndex]&&m.items[m.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:d.attribute.n,useRichTooltip:true,updateTooltipConfig:function(p){var o=p.target,l=this.text,m=d.datasetId,n=m?d.docModel.datasets[m].name:"";E(this,o,l,n);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:g,selectedIndex:j(d.attribute,c&&c.srcFormId),onitemSelected:function(m){var l=this,n=function(){var p=l.parent.linkToAtt;h=b(m.v);p.set("items",h);p.set("selectedIndex",-1);p.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(p.selectedNode,"nvo");},o={success:n};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!m.idf){X(this.parent.linkToForm);if(!d.tgtForms[m.v]){B.call(d,m.v,o);return ;}}n();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:h,text:W(k(c&&c.tgtAttrId)),selectedIndex:k(c&&c.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(q){var p=q.target,l=p.getAttribute("tt"),n=this.getSelectedItem(),m=n?n.v.dsId:null,o=m?d.docModel.datasets[m].name:"";if(this.selectedNode===p&&n){l=n.tt;}E(this,p,l,o);},onitemSelected:function(p){if(!p||p.v.did===null){return ;}var o=this.parent.linkToForm,n=this.parent.linkFromForm,m=Z(p.v,n.items[n.selectedIndex].v),q=function q(r,u){var t=R.find(r,u?"v":"idf",u||true);if(t===-1&&r.length>0){t=0;}return t;},l;R.forEach(m,function(r){if(r.idf){l=false;return false;}});if(l){K.call(d,true);}o.set("items",m);o.set("selectedIndex",q(m,!this.hasRendered&&c&&c.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}J.call(d);},onPopupWidgetOpened:function a(){if(this.selectedIndex===-1){this.set("text","");}U.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function e(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(this.selectedNode,"nvo");}else{U.removeClass(this.selectedNode,"nvo");}this.hideTooltip();R.forEach(d.collapseTargets,function(l){l.className="arrow-b";U.removeClass(l.parentNode.parentNode,"collapse");});R.forEach(d.collapseTreeNodes,function(l){delete l.collapse;});R.forEach(this.list.itemsContainerNode.childNodes,function(l){l.style.display="";});},postBuildRendering:function V(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){U.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function Y(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function l(r,t,q){this.parent.set("selectedIndex",q);this.close();}},onclick:function m(AA){try{var r=AA.getTarget(),AB=this.getItemFromTarget(r),w=P.findAncestorByAttr(r,"idx",true,this.domNode),v=this.items;if(v){this.parent.set("items",v);}if(AB){AA.cancel();if(r.className==="arrow-b"||r.className==="arrow-r"){var q=this.itemsContainerNode.childNodes,u=function u(AD){var AC;while(AD){AC=AD.className||"";if(AC.indexOf("lv")===0){return window.parseInt(AC.substring(2),10);}AD=AD.firstChild;}return null;},z=function z(AC,AF){var AE=d.dsMap,AD=AE[AC.dsId+":"+AC.did];while(AD){if(AD.lv===AF){return AD;}AD=AD.parent;}return null;},x=function x(){var AL=(r.className==="arrow-b"),AF=r.parentNode.parentNode,AC=u(AF),AG=AB._renderIdx,AD=z(AB.v,AC),AJ=v.length,AI,AE,AH,AK,AN,AM;r.className=AL?"arrow-r":"arrow-b";if(!d.collapseTargets){d.collapseTargets=[];}d.collapseTargets.push(r);U.toggleClass(AF,"collapse",AL);AD.collapse=AL;if(!d.collapseTreeNodes){d.collapseTreeNodes=[];}d.collapseTreeNodes.push(AD);for(AI=AG+1;AI<AJ;AI++){AE=q[AI];AH=u(AE);if(AH<=AC){break;}AK=z(v[AI].v,AH);AN=AK.parent;AM=true;while(AN){if(AN.collapse){AM=false;break;}AN=AN.parent;}AE.style.display=(AM?"":"none");}};x();}else{if(w&&w.node.className.indexOf("item")!==-1){this.doItemSelect(AB,AA||{});}}}}catch(t){mstrApp.onerror(t);}},getItemProps:function n(t,q){var r=mstrmojo._IsList.getItemProps.call(this,t,q);var u=t.cls;if(u){r.addCls(u);}return r;},getItemMarkup:function p(AC,AB){if(AC.v.did===null){return'<{@tag} class="item {@cls}" did="'+AC.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AD=[],z=AC.v.did,t=AC.v.dsId,u=t?d.docModel.datasets[t]:null,r=u?u.name:"",AA=AB>0&&this.items[AB-1].v,w=d.dsMap,v=w[AC.v.dsId+":"+z],q=w[(AA&&(AA.dsId+":"+AA.did))];AD.push("</div>");while(v){if(v.lv===-1){break;}if(v.att){var x=v.att.da?"derived-attr":"attr";AD.push('<div class="lv'+v.lv+' dim item {@cls}" tt="'+AC.tt+'" did="'+z+'" dsName="'+r+'" idx="{@idx}" style="{@style}"><div><div class="'+x+'"></div></div>{@n}</div>');}else{if(v!==q){AD.push('<div class="lv'+v.lv+' dim" dtt="'+v.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+v.n+"</div>");}else{break;}}v=v.parent;q=(q&&q.parent)||null;}AD.push("<div>");return AD.reverse().join("");},updateTooltipConfig:function o(w){var v=w.target,t=v.getAttribute("tt"),r=v.getAttribute("dtt"),u=v.getAttribute("dsName"),q=t||r;if(q){E(this,v,q,u);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(l){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!l.idf){X(this.parent.linkFromForm);}}}},M("",function(){F.call(d,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},K=function(V){U.toggleClass(this.editorNode,"mstrmojo-advanced",V);},L=function(Y){var W=this,Z=T,V;try{mstrmojo.all[Z].destroy();}catch(X){}V={scriptClass:"mstrmojo.Editor",id:Z,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[M(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[Z].destroy();H.call(W);},true)],children:[{scriptClass:"mstrmojo.Label",text:Y}],visible:true,zIndex:1000};mstrmojo.insert(V).render();},H=function(){var X=this,W=this.illLinks,V=this.links.children,Y=Q;R.forEach(W,function(Z){Z=Z.al;R.forEach(V||[],function(b){var d=b.getMeta(),e=b.linkToAtt,a,c;if(d.srcAttrId===Z.alaid1&&d.tgtAttrId===Z.alaid2){if(!mstrmojo.all[Y]){c=new mstrmojo.Tooltip({id:Y,cssClass:X.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});P.attachEvent(X.editorNode,"click",function(){c.close();U.toggleClass(e.selectedNode,"mstrmojo-Warning",false);});}else{c=mstrmojo.all[Y];}c.close();a=mstrmojo.dom.position(e.selectedNode);c.set("top",a.y-6);c.set("left",a.x);c.set("content",Z.alstmsg);U.toggleClass(e.selectedNode,"mstrmojo-Warning",true);c.open();return false;}});});},A=function(){var V=mstrmojo.all[Q];if(V){V.close();}},J=function J(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},G=function G(){var V=this,W=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){D.call(V);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){K.call(V,true);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){K.call(V,false);A.call(V);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(W);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var Y=this,W=this.docModel,X=function(){var Z=(W.als&&W.als.links)||{},a=[];N.keyarray(Z).forEach(function(b){if(b.indexOf(Y.attribute.did+" ")===0){Z[b].forEach(function(c){a.push({srcAttrId:b.split(" ")[0],srcFormId:b.split(" ")[1],tgtAttrId:c.split(" ")[0],tgtFormId:c.split(" ")[1]});});}});return a;},V;this.set("buttons",[M(mstrmojo.desc(1442,"OK"),function(){var g=[],a=Y.links.children,Z=function(){var h=W.controller,j=W.controller.getRefreshCallback();if(g.length>0){h.cmdMgr.execute({execute:function(){this.submit(g,j,{style:{params:{treesToRender:3}}});},urInfo:{callback:j}});}Y.close();},f=false,c,d;Y.removedLinks.forEach(function(h){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);});(a||[]).forEach(function(h){if(h.old&&h.oldUpdated){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);}if(!h.old||(h.old&&h.oldUpdated)){d=h.getMeta();if(!d.tgtAttrId){return ;}c=N.copy(d,{act:"applyAttributeLinking",unlink:false});g.push(c);}});R.forEach(g,function(h){if(!h.unlink){f=true;return false;}});if(!f){Z();return ;}var e={taskId:"validateDocumentLinks",msgID:W.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(g)+"}"},b={success:function(h){if(h.als&&h.als.length>0){var j="";R.forEach(h.als,function(k){j+=k.al.alstmsg+"\n";});Y.illLinks=h.als;L.call(Y,j);return ;}Z();}};mstrApp.serverRequest(e,b);},true,{enabled:false}),M(mstrmojo.desc(221,"Cancel"),function(){Y.close();})]);G.call(this);V=X(this.attribute.did);if(V.length>0){V.forEach(function(Z){D.call(Y,Z);});J.call(this);}else{D.call(this);}this._super();},close:function I(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(b){var W=mstrmojo.insert(N.copy(b,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),Z=W.attribute,c=Z.did,V=W.docModel,Y=(V.als&&V.als.links)||{},X=[],a={success:function(){W.set("visible",true);W.render();}};R.forEach(Z.fs,function(d){if(d.idf){W.idFormId=d.fid;return false;}});N.keyarray(Y).forEach(function(e){var d=e.split(" ");if(d[0]===c){X.push(d[1]);}});if(R.indexOf(X,W.idFormId)===-1){X.push(W.idFormId);}W.dsMap={};W.dsTree=S.call(W);B.call(W,X,a);};}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.HBox","mstrmojo.TextBox","mstrmojo.Button","mstrmojo.css","mstrmojo.vi.ui.ElementsBrowser","mstrmojo.vi.ui.IncHierarchyCheckList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var G=mstrmojo.css,A=mstrmojo.mstr.EnumDSSXMLObjectTypes;var E="36px";mstrmojo.vi.ui.HierarchyElementsCheckListBrowser=mstrmojo.declare(mstrmojo.vi.ui.ElementsBrowser,null,{scriptClass:"mstrmojo.vi.ui.HierarchyElementsCheckListBrowser",children:[{scriptClass:"mstrmojo.HBox",slot:"searchBoxNode",alias:"util",cssClass:"elemsBrowser-utils-bar",children:[{scriptClass:"mstrmojo.Box",cssClass:"eb-box-search",alias:"box",children:[{scriptClass:"mstrmojo.TextBox",alias:"searchBox",hint:"Search",cssClass:"eb-searchBox",onEnter:function B(){var O=this.value,M=this.parent.parent.parent,N=!M.searchPattern&&!O;if(!N){M.set("searchPattern",O);}this.blur();}},{scriptClass:"mstrmojo.Button",cssClass:"eb-searchBox-clear",text:"",onclick:function(){var M=this.parent.searchBox;M.set("value","");M.cleanUp();M.focus();M.onEnter();},bindings:{visible:"(this.parent.searchBox.value || '').length > 0"}},{scriptClass:"mstrmojo.Button",cssClass:"eb-searchBox-search",text:"",onclick:function(){var M=this.parent.searchBox;M.focus();M.onEnter();}}]}]},{scriptClass:"mstrmojo.HBox",slot:"buttonPanelNode",alias:"buttonPanel",cssClass:"elemsBrowser-button-panel"},{scriptClass:"mstrmojo.vi.ui.IncHierarchyCheckList",alias:"elementList",slot:"elementListNode",allowUnlistedValues:false,bindings:{disableLevel:"this.parent.disableLevel"},getDataHelper:function(){return this.parent.ifDataHelper;},getAttribute:function(){return this.parent.attribute;},isHiearachyDisplay:function F(){var M=this.parent;return !M.searchPattern||M.searchPattern==="";},setSelectedItems:function J(M){if(typeof M==="object"){this.setSelectionByExprJSON(M);}},postSelectionChange:function I(){var M=this.getAttribute();if(M){this.parent.onItemsSelectionChange(this.buildSelectionExprJSON(M));}}}],init:function L(M){this._super(M);G.addWidgetCssClass(this,"hierarchy");if(this.disableLevel){G.addWidgetCssClass(this,"disable-level");}},postCreateChildren:function D(){var M=this.elementList;this.util.addChildren(M.getLevelPopupConfig());this.buttonPanel.addChildren([M.getAllButtonConfig(true),M.getAllButtonConfig(false)]);},onattributeChange:function H(M){var N=this.elementList;N.clearItems();this._super(M);},onsearchPatternChange:function C(){var N=this.elementList,M=N.isHiearachyDisplay();this._super();this.buttonPanel.set("visible",M);this.layoutConfig.h.buttonPanelNode=M?E:"0px";this.doLayout();},isObjSearchable:function K(M){return true;},onElementsListchange:mstrmojo.emptyFn,updateClearAllBtnState:mstrmojo.emptyFn,_set_selectedItems:null});}());(function(){mstrmojo.requiresClsP("mstrmojo","Editor","HBox","HTMLButton","Label","SortRow","ButtonSwitch","CheckBox","_HasOwnAvatar","hash");mstrmojo.requiresCls("mstrmojo.ui._HasScroller","mstrmojo.mstr.EnumDSSXMLObjectTypes");mstrmojo.requiresDescs(11591,3095,11592,2968,122,221,1442,12420,13153);var I=mstrmojo.desc,T=mstrmojo.array,X=mstrmojo.hash,E=mstrmojo.dom,e=mstrmojo.css,L=0,g="top",U="bottom",f;mstrmojo.AdvancedSortData=null;function A(k,j){var l=new mstrmojo.SortRow(),h=mstrmojo.all[f];l.setPulldownOptions(j===L?h.sortData.rows:h.sortData.cols);l.setRank(k.children.length+1);k.addChildren([l]);}function K(h){return h&&h.isAsc===2;}function Q(r,k,o){var m,l,p,h=r.children,n=mstrmojo.all[f],q=function(){var z,x,w,v,AB,u=(o===L?n.sortData.rows:n.sortData.cols),t=[];for(z=0,x=k.length;z<x;z++){AB=k[z];if(K(AB)){var AA=AB.value.split("!").slice(0,2).join("!");if(T.some(u,function(j){return AA===j.v.split("!").slice(0,2).join("!");})){t.push(AB);}}else{for(w=0,v=u.length;w<v;w++){if(AB.value===u[w].v){t.push(AB);break;}}}}return t;};if(!n.isDesignMode){k=q();}for(m=0,l=0;m<h.length&&l<k.length;m++,l++){p=k[l];h[m].setSelected(p.value,p.isAsc,p.n);}for(;m<h.length;m++){h[m].setSelected("",1);}for(;l<k.length;l++){p=k[l];A(r,o);h[l].setSelected(p.value,p.isAsc,p.n);}}function J(){var h=this.children;if(h[h.length-1].getSortKey()===""){return ;}A(this,this.type);}function F(){var h,k=this.children;for(h=0;h<k.length;h++){var l=k[h];if(l.getRank()!==h+1){l.setRank(h+1);}}}function M(m,j){var l=this.xtab&&this.xtab.model,h;if(l){var k=((l.data||{}).gsi||{}).sorts;if(k){k=k[m.isRow?0:1]||[];h=T.filterOne(k,function(n){return n.key&&n.key.search(j)==0;});}}return h;}function Y(h){var j=h&&h.split&&h.split("!");return{unitType:j[0],unitId:j[1],axis:j[5]};}function P(){var n,l,k,p=[],r=mstrmojo.all[f],u=["appliedRows","appliedCols"],h=[];h.push(r.tabContainer.children[0].children);h.push(r.tabContainer.children[1].children);for(l=0;l<2;l++){var w=[],m;for(n=0;n<h[l].length;n++){m=h[l][n];k=m.getSortKey();if(k&&k!==" "){if(m.isCustomSort()){var q=M.call(r,m.originalPos,k),x=X.copy(Y(q.key),{actions:q.actions,isCustomSort:true});w.push(x);}else{w.push({key:k,isAsc:m.isAscending()});}}}if(w.length===0){if(r.sortData[u[l]].length===0){w=null;}}p.push(w);}var v=r.sortData.hierarchicalSort,t=r.hrlSortBox.checked?v.stt:null,o=r.resHrlBox.checked?"1":"0";r.controller.onAdvancedSort(r.xtab,p,null,t,o);}mstrmojo.AdvancedSortEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.AdvancedSortEditor",help:"advanced_sort_editor.htm",cssClass:"mstrmojo-AdvancedSortEditor",title:I(11591,"Advanced Sort"),tabSwitcher:undefined,tabContainer:undefined,hrlSortBox:undefined,sortData:undefined,sourceAxis:1,init:function a(h){this._super(h);f=this.id;},onOpen:function H(){var h=this.sortData,l,o=["appliedRows","appliedCols"],k=this.sourceAxis-1,n=this.xtab,j=this.tabContainer,m=j.children;if(n&&n.isInFilterPanel&&n.isInFilterPanel()&&mstrApp&&mstrApp.isInVFInteractMode){e.addClass(this.domNode,"forVisFilter");}T.forEach(m,function(p,r){l=h[o[r]];T.forEach(p.children,function(t){t.setPulldownOptions(h[r===L?"rows":"cols"]);});Q(p,l,r);var q;T.forEach(p.children,function(u,t){q=u.getSortKey();if(q&&q.trim&&q.trim()){u.originalPos={isRow:r===L,index:t};}});J.call(p);F.call(p);});if(this.sourceType===mstrmojo.mstr.EnumDSSXMLObjectTypes.Metric){k^=1;}this.tabSwitcher.set("selected",k>=m.length?L:k);j.updateScrollbars();this.updateUseHierarchicalSort(k);},onClose:function(){T.forEach(this.tabContainer.children,function(h){T.forEach(h.children,function(j){j.resetPulldownOptions();});});},onTabChange:function(j){var h=this.tabContainer;h.children[j].set("visible",true);h.children[1-j].set("visible",false);h.set("selected",j);h.updateScrollbars();this.updateUseHierarchicalSort(j);},updateUseHierarchicalSort:function S(n){var m=(n===L)?"rows":"cols",t=(n===L)?"appliedRows":"appliedCols",j=this.sortData,q=j.hierarchicalSort,o=q.pref,u=q.rp,l=q.isOutlineMode,p=q.isRA,r=j[t],k=this.hrlSortBox,h=this.resHrlBox;k.set("visible",o==="1");k.set("checked",l||(o==="1"&&(r.length===0||p)));h.set("visible",false);h.set("checked",u);},updateTooltipConfig:function b(){if(E.isIE8){this.richTooltip.cssClass+=" ie8";b.repaint=!!!b.repaint;this.richTooltip.cssClass+=(b.repaint?" repaint":"");}},postBuildRendering:function c(){this._super();this.tabContainer.domNode.onselectstart=function(){return false;};},children:[{scriptClass:"mstrmojo.ButtonSwitch",alias:"tabSwitcher",label1:I(2968,"Rows"),label2:I(122,"Columns"),switchFn:function Z(){this.parent.onTabChange(this.selected);}},{scriptClass:"mstrmojo.Widget",markupString:"<div class='rulesTitles'><div>"+I(3095,"Order")+"</div><div>"+I(11592,"Sort by")+"</div></div>"},{scriptClass:"mstrmojo.SortRulesPanelContainer",alias:"tabContainer",cssClass:"mstrmojo-AdvancedSortEditor-RulesPanelContainer"},{scriptClass:"mstrmojo.CheckBox",alias:"hrlSortBox",cssClass:"hrlSortBox",oncheckedChange:function(){if(E.isIE8){e[this.checked?"addClass":"removeClass"](this.labelNode,"checked");}},postBuildRendering:function c(){if(E.isIE8){var j=this,h=this.labelNode;E.attachEvent(h,"click",function(){j.set("checked",!j.checked);});}},label:I(13153,"Sort metrics hierarchically")},{scriptClass:"mstrmojo.CheckBox",alias:"resHrlBox",cssClass:"resHrlBox",oncheckedChange:function(){if(E.isIE8){e[this.checked?"addClass":"removeClass"](this.labelNode,"checked");}},postBuildRendering:function c(){if(E.isIE8){var j=this,h=this.labelNode;E.attachEvent(h,"click",function(){j.set("checked",!j.checked);});}},label:I(12420,"Respect Hierarchy")},{scriptClass:"mstrmojo.Button",slot:"buttonNode",cssClass:"mstrmojo-WebButton Advanced-Sort-Editor-Button",text:I(221,"Cancel"),onclick:function(){mstrmojo.all[f].close();}},{scriptClass:"mstrmojo.Button",slot:"buttonNode",cssClass:"mstrmojo-WebButton Advanced-Sort-Editor-Button",iconClass:"hot",text:I(1442,"OK"),onclick:function(){P();mstrmojo.all[f].close();}}]});function W(k,j){var h=Math.floor((k-j.y0-E.getVerticalScroll())/j.h);if(h<0){h=0;}else{if(h>=this.children.length){h=this.children.length-1;}}return h;}function B(m,k){var j=g,l=(Math.floor(m-k.y0)%k.h)/k.h,h=W.call(this,m,k);if(h===this.children.length-1){if(l>0.5||Math.floor((m-k.y0)/k.h)>h){j=U;}}else{if(l>0.5){if(h<this.children.length-1){h+=1;}}}return{edge:j,idx:h};}mstrmojo.SortRulesPanelContainer=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.SortRulesPanelContainer",selected:undefined,setupScrollNodes:function O(){var h=this.children[this.selected||0];this.scrollNode=h.domNode;if(!h.hasEventListener){e.addClass(this.scrollNode,"mstrmojo-scrollNode");E.attachMarkupEvent(this.id,this.scrollNode,"scroll");h.set("hasEventListener",true);}},onscroll:function d(){if(this._super){this._super();}var h;T.forEach(this.children,function(j){if(!h){T.forEach(j.children,function(m){if(!h){var l=m.sortRule.list,k=m.sortOrder.list;if(l.visible){h=l;}else{if(k.visible){h=k;}}}});}});if(h){h.set("visible",false);}},children:[{scriptClass:"mstrmojo.SortRulesPanel",cssClass:"mstrmojo-AdvancedSortEditor-RulesPanel",type:0},{scriptClass:"mstrmojo.SortRulesPanel",cssClass:"mstrmojo-AdvancedSortEditor-RulesPanel",type:1}]});mstrmojo.SortRulesPanel=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.SortRulesPanel",dropZone:true,draggable:true,avatarCssClass:"sort-rule-drag-avatar",type:undefined,hasEventListener:undefined,getDragData:function D(){return{};},createAvatar:function V(l,k){var m=k.src.data,j,h;m.y0=E.position(this.domNode).y;m.h=E.position(this.children[0].domNode).h;m.left=E.position(this.children[0].domNode).x;j=W.call(this,k.src.pos.y,m);h=this.children[j].domNode.cloneNode(true);m.index=j;m.node=this.children[j];if(mstrApp.getThemeClassName){e.addClass(h,mstrApp.getThemeClassName());}return h;},positionAvatar:function N(j,h){j.x=h.src.data.left+10;this._super(j,h);},isDragValid:function C(h){if(this.children.length===1){return false;}var j=this.domNode,l=this.children[Math.floor((h.src.pos.y-E.position(j).y-E.getVerticalScroll())/E.position(this.children[0].domNode).h)],k=h.src.e.target;return !(E.contains(l.sortRule.domNode,k,true,j)||E.contains(l.sortOrder.domNode,k,true,j));},ondragstart:function(h){this._super(h);var j=h.src.data;this.removeChildren(this.children[j.index]);j.y0=E.position(this.domNode).y;},ondragmove:function R(h){var o=h.src.data,p=h.last.y,n=o.tgtIdx,l=o.tgtEdge,m=B.call(this,p,o),k=m.idx,j=m.edge;if(n!==k||l!==j){if(n!==undefined){e.removeClass(this.children[n].domNode,l);}e.addClass(this.children[k].domNode,j);o.tgtIdx=k;o.tgtEdge=j;}this._super(h);},ondragend:function G(j){var k=j.src.data,h=k.tgtIdx;if(h!==undefined){e.removeClass(this.children[h].domNode,k.tgtEdge);}if(k.tgtEdge===U){h++;}this.addChildren([k.node],h);this.updatePanel();this._super(j);},pulldownActive:function(h){mstrmojo.css.toggleClass(mstrmojo.all[f].tabContainer.domNode,"disableScroller",h);},updatePanel:function(){F.call(this);J.call(this);mstrmojo.all[f].tabContainer.updateScrollbars();},deleteSortRule:function(h){this.removeChildren(h);this.updatePanel();},itemSelected:function(){this.updatePanel();},children:[{scriptClass:"mstrmojo.SortRow"},{scriptClass:"mstrmojo.SortRow"},{scriptClass:"mstrmojo.SortRow"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.ui.editors.controls.AdvancedColorPickerPopup","mstrmojo.css");var G=mstrmojo.css,F=Math.round;function J(O){var P=this.previewNode,N=P.clientWidth,R=P.clientHeight,Q=P.offsetWidth-N,S=Math.sqrt(N*N+R*R)-Q/2,M=Math.atan2(R,N)*(-180)/Math.PI;P.style.backgroundColor="#FFFFFF";O.display="block";O.top=F((P.offsetHeight+Q)/2)+"px";O.left=F((N-S+Q)/2)+P.offsetLeft+"px";O.width=F(S)+"px";O[mstrmojo.dom.CSS3_TRANSFORM]="rotate("+F(M)+"deg)";}mstrmojo.ui.editors.controls.ColorPickerButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onselectedValueChange:function(){this.updatePreview();this.colorPicker.set("color",this.selectedValue);},onautoPreviewColorChange:function D(){this.getPopupWidget().set("autoPreviewColor",this.autoPreviewColor);this.updatePreview();},onenabledChange:function H(){G.toggleClass(this.domNode,"disabled",!this.enabled);}},isHostedWithin:false,showGradient:false,showNoFill:true,showAutomatic:false,autoPreviewColor:null,selectedValue:null,init:function L(N){this._super(N);var M=this.colorPicker;M.showGradient=this.showGradient;if(this.showNoFill!==undefined){M.showNoFill=this.showNoFill;M.showAutomatic=this.showAutomatic;}M.showAutomatic=this.showAutomatic;G.addWidgetCssClass(this,"mstrmojo-ColorPickerBtn");},preBuildRendering:function K(){this.colorPicker.showNoFill=this.showNoFill;return this._super();},setDimensions:function I(N,M){this._super(N,M);window.setTimeout(function(){this.updatePreview();}.bind(this),0);},afterLayout:function C(){var M=this.previewNode,N=M.style,P=N.width,O=M.offsetWidth;if(O>0){N.width=(O-4)+"px";}else{if(P!==""){N.width=(parseInt(P,10)-4)+"px";}}if(N.height===""){N.height=(M.offsetHeight-4)+"px";}},postBuildRendering:function A(){var M=this.noFillNode=document.createElement("div");M.style.display="none";M.className="slash";this.domNode.firstChild.appendChild(M);this._super();},updatePreview:function B(){var Q=this.previewNode;if(Q){var O=this.selectedValue===mstrmojo.ui.editors.controls.AdvancedColorPicker.VAL_AUTOMATIC?this.autoPreviewColor:this.selectedValue;if(O){var R=Q.style;if(O.c1){var S=G.buildGradient(O.or,O.c1,O.c2);if(S&&S.n){R[G.convertCssToCamelCase(S.n)]=S.v;}}else{var M=G.buildGradient(0,"0","0");if(M&&M.n){R[G.convertCssToCamelCase(M.n)]=null;}var P="conflict"===O;G.toggleClass(Q,"conflict",P);R.backgroundColor=!P?O:null;}if(this.showNoFill&&this.noFillNode&&this.enabled){var N=this.noFillNode.style;if("transparent"===O){J.call(this,N);}else{N.display="none";}}}Q.style.backgroundOrigin="border-box";}},getPopupWidget:function E(){return this.colorPicker;},children:[{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPickerPopup",alias:"colorPicker",slot:"widgetHostNode",color:this.selectedValue,isHostedWithin:true,colorChanged:function(M){this.parent.set("selectedValue",M);this.close();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.ui.SearchablePulldownCheckList","mstrmojo.ui.SearchablePulldown");var I=mstrmojo.array,K=mstrmojo.css,G=mstrmojo.dom,E=mstrmojo.hash,M=mstrmojo.string,F={0:true};function C(){var U=this.selectedIndices=E.copy(this.getPopupList().selectedIndices),P=this.items,S=[],T,R=this.allIdx,Q=this.noneIdx;if(P&&P.length){if(U[R]){S.push(P[R].n);}else{if(U[Q]){S.push(P[Q].n);}else{I.forEach(P,function(W,V){if(U[V]){S.push(W.n);}});}}}T=S.join(", ");this.set("value",T);this.set("text",T);this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-C",content:M.encodeHtmlString(T)});}mstrmojo.ui.MultiSelectSearchablePulldown=mstrmojo.declare(mstrmojo.ui.SearchablePulldown,[],{scriptClass:"mstrmojo.ui.MultiSelectSearchablePulldown",isHostedWithin:false,init:function O(P){this._super(P);K.addWidgetCssClass(this,"multi");this.hostedCSSClass=this.hostedCSSClass+" multi";},submitSelections:function B(){this.onchange();},_set_selectedIndices:function H(S,Q){var P=this.getPopupList(),R=E.copy(this.selectedIndices);P.set("selectedIndices",Q||R||F);C.call(this);return true;},select:function L(P){this.getPopupList().select(P);},getPopupWidget:function D(){return this.popupWidget;},getPopupList:function N(){return this.popupWidget.list;},getPopupListConfig:function A(){return[{scriptClass:"mstrmojo.ui.SearchablePulldownCheckList",alias:"popupWidget",_unlockHoverCheck:function P(T,Q){var S=G.eventTarget(Q,T),R=this.opener;if(G.contains(R.domNode,S,true,document.body)){R.set("isEditing",true);}else{if(!G.contains(this.domNode,S,true,document.body)){this.close();}}},bindings:{itemCssText:function(){return(this.parent&&this.parent.itemCssText)||"";}}}];},processSearch:function J(){var P=this.getPopupWidget();P.toggleCacheMode(true);if(this._super){this._super();}P.toggleCacheMode(false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.mstr.EnumNodeProperties","mstrmojo.fe.FilterExprTree","mstrmojo.fe.AndOrNode","mstrmojo.fe.RelationNode","mstrmojo.fe.DynamicNode","mstrmojo.fe.ConditionNode");var M=mstrmojo.expr.ET,K=mstrmojo.mstr.EnumNodeProperties;mstrmojo.fe.RelationFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RelationFilterExprTree",nodeClassMap:{14:mstrmojo.fe.AndOrNode,15:mstrmojo.fe.RelationNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},getItemIdentityProp:function(N){if(N.node&K.CONDITION){return"*";}if(N.ph){return"ph";}if((N.et===10||N.et===12)&&N.dmt===4){return M.RLS;}return N.et;},isEditable:function L(O){var N=false;switch(O&&O.et){case M.RLS:N=true;break;}return N||this._super(O);},getItemConfig:function B(Q,N,R){var O=this._super(Q,N,R),P=(Q.et===M.RLS||!!Q.relation);if(P){O.itemFunction=R.itemFunction;}return O;},newCondition:function F(P){var O=this.getSelectedItemWidget(),N=0;if((typeof microstrategy!=="undefined")&&microstrategy.bones&&microstrategy.bones.rwb_viewer){N=microstrategy.bones.rwb_viewer.nextPhIndex;}else{if(mstrApp&&mstrApp.docModelData&&mstrApp.docModelData.phIndex){N=mstrApp.docModelData.phIndex;}}if(P&&P.ph&&!P.ph.idx){P.ph.idx=N++;}if(O&&O.selected&&O.newCondition){return O.newCondition(P);}else{return this._super(P);}},createSet:function E(O,N){var P=N.rq,Q=N.cq;if(P&&Q){this.remove(Q);if(N.isMetric){mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],P,Q);P=Q;}else{P.nds=[Q];}this.add([P],O[0]);}},removeSet:function I(N){var O=N.data,P=[O];this.remove(O);if(O.nds&&O.nds.length>0){P=O.nds;}else{delete O.dmy;delete O.relation;delete O.applySubExpr;delete O.relation;delete O.useSchema;delete O.dmt;}this.add(P,0);},nameFactory:{counter:1,names:{},clear:function(){this.resetCounter();this.names={};},resetCounter:function D(){this.counter=1;},isNameExist:function J(N){return !!this.names[N];},setName:function H(N,O){this.names[N]=O;},changeName:function C(O,N,P){this.removeName(O);this.setName(N,P);},getNewName:function G(Q,P,S){var R=P||"",O=S||"",N;while(this.isNameExist(R+this.counter+O)){this.counter++;}N=R+this.counter+++O;this.names[N]=Q;return N;},removeName:function A(N){delete this.names[N];this.resetCounter();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo.desc","mstrmojo.ME.TokenInputBox","mstrmojo.mstr.EnumDSSXMLTokenTypes","mstrmojo.ME.Enum","mstrmojo._HasTooltip","mstrmojo.dom","mstrmojo.string");mstrmojo.requiresDescs(221,547,9106,9565,9566,9567,9568,11897,13542,13543,15665);var M=mstrmojo.array,S=mstrmojo.hash,I=mstrmojo.desc,O=mstrmojo.mstr.EnumDSSXMLTokenTypes,N=mstrmojo.ME.Enum.METRIC_EDIT_TYPES,L=mstrmojo.string.escape4HTMLText,E=mstrmojo.dom;var Q={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},R={0:I(9565,"Valid Metric Formula."),1:I(9106,"Require Validation?"),2:I(9566,"Validation in Progress..."),3:I(9567,"Validation Failed with Syntax Error!"),4:I(9568,"Validation Failed with Object Ambiguity!")},T={ERROR:"-2147214845",AMBIGUITY:"-2147214846"},B={};B[T.ERROR]=Q.ERROR;B[T.AMBIGUITY]=Q.AMBIGUITY;function P(Z){if(!Z){return Q.VALID;}return B[Z]||Q.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.MetricEditBox",vStatus:Q.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,validateFunc:null,isObjectVisible:function(Z){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var a=this.vStatus,Z=this.vStatusNode;Z.className="mstrmojo-MEBox-vStatus "+G[a];Z.innerHTML=(this.getStatusDesc&&this.getStatusDesc(a))||R[a]||"";if(this.vStatus===Q.VALID){this.set("cValid",true);}},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:"this.parent.browseItemVisible",candidates:"this.parent.candidates"},editEmbeddedFilterToken:function(Z){var a=this.parent;if(a.editEmbeddedFilterToken){a.editEmbeddedFilterToken(Z);}}}],init:function U(Z){var a=this,b=Z.validateFunc||this.validateFunc;if(b){a.children=[{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"statusNode",text:I(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton right hoverLink",cssDisplay:"inline-block",onclick:b}].concat(this.children);}if(this._super){this._super(Z);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function Y(){return this.inputBox.getSearchPattern();},getHighlightedText:function V(a,Z){return this.inputBox.getHighlightedText(a,Z);},item2textCss:function K(Z){return{4:"m",7:"am",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[Z.t]||"";},handleSuggestionItemSelect:function J(Z){var a=this.ambiguityDialog;if(Z){a.onItemSelect(Z);}a.close();},showDesc:true,showPath:true,ambiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",I(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",I(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:"this.parent.opener.suggestionItems"},onclick:function(Z){mstrmojo._IsList.onclick.call(this,Z);},getItemMarkup:function(c,Z){var b=this.parent.opener,a=mstrmojo.string.escape4HTMLText;var e=(b&&b.item2textCss(c))||"";var d="";if(c.path){d='<div class="mstrmojo-object-additional-info" idx="'+Z+'">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(c.path)+"</div>";}else{c.standalone=true;}return'<div class="mstrmojo-object-item" idx="'+Z+'"><div class="mstrmojo-object-name '+e+'" idx="'+Z+'">'+L(c.n)+"</div>"+d+"</div>";},buildTooltip:function(Z,a){if(Z.standalone){return L(Z.path)+"> "+L(Z.n);}else{return L(Z.n)+'<div class="mstrmojo-object-additional-info">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(Z.path)+"</div>";}}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:I(547,"Select"),onclick:function(){var Z=this.parent.parent;Z.opener.handleSuggestionItemSelect(Z.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:I(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",Q.UNKNOWN);this.set("iStatus","");},postBuildRendering:function X(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function H(Z){this.inputBox.set("items",Z.items);},replaceErrorToken:function C(Z){this.inputBox.replaceErrorToken(Z);},clientSideValidation:function A(f){if(!f){return ;}var b=false,d=false,a=f.items;try{b=mstrApp.rootCtrl.docCtrl.model.isMDXDataset(S.any(this.parent.parent.datasets));d=f.met==N.ADVANCED&&a[0].tp==O.SimpPrefixFun&&a[0].v==="ApplySimple";}catch(g){}if(b&&d){var Z=M.filterOne(a,function(e){return e.tp===O.DoubleQString;});var c=/(\'|\/\/|\-\-|\/\*|\*\/)/;if(Z&&c.test(Z.v)){f.vs=Q.ERROR;f.rjec=T.ERROR;f.rjed=I(15665,"MDX pass-through expression should not contain ', //, --, /*, */.");}}},handleValidation:function F(Z){if(!Z){this.set("vStatus",Q.ERROR);return ;}Z.vs=P(Z.rjec);this.set("vStatus",Z.vs);this.set("iStatus",mstrmojo.string.encodeHtmlString(Z.rjed)||"");this.updateInputBoxItems(Z);this.inputBox.focus();if(Z.vs===Q.AMBIGUITY){var k=this,g=Z.items,e=M.find(g,"sta",-1),a=g[e].v,h=function(c){k.replaceErrorToken(c);k.set("iStatus","");k.set("vStatus",Q.UNKNOWN);if(k.continueValidataion){k.continueValidataion();}else{k.set("vStatus",Q.VALID);}};var b=M.filter(Z.srfd.items,this.isObjectVisible);var j=this.parent.candidates,d=j&&j.items;if(d){M.forEach(b,function(f){var c=M.find(d,"did",f.did);if(c===-1){if(this.absorbAmbiguity){d.push(f);}}else{f.path=d[c].path;}});}if(b.length===1){h(b[0]);return ;}this.openPopup("ambiguityDialog",{zIndex:100,items:b,ambiguousName:a,onItemSelect:h});}else{if(this.postHandleValidation){this.postHandleValidation();}}},tooltip:"",useRichTooltip:true,updateTooltipConfig:function W(a){var b=a.target||E.eventTarget(a.hWin,a.e),Z=E.position(b);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.getTooltipContent(a),top:Z.y+Z.h,left:Z.x+10,cssClass:"vi-regular vi-tooltip-A"};},getTooltipContent:function(Z){return this.iStatus;},showTooltip:function D(Z,a){if(Z.target===this.iStatusNode){this._super(Z,a);}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=Q;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS=G;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC=R;}());(function(){mstrmojo.requiresCls("mstrmojo.StackContainer","mstrmojo._IsRwDocument","mstrmojo._HasBuilder","mstrmojo._HasLayout","mstrmojo.express.ui._IsDocumentView","mstrmojo.array");mstrmojo.Doc=mstrmojo.declare(mstrmojo.StackContainer,[mstrmojo._HasBuilder,mstrmojo._IsRwDocument,mstrmojo._HasLayout,mstrmojo.express.ui._IsDocumentView],{scriptClass:"mstrmojo.Doc",cssClass:"mstrmojo-Doc",markupSlots:{containerNode:function(){return this.domNode;},popupNode:function(){return this.domNode;},drillLinkMenuNode:function(){return this.domNode;}},layoutConfig:{h:{containerNode:"100%"},w:{containerNode:"100%"}},getLayouts:function(){return mstrmojo.array.filter(this.children,function(G){return !!G.layoutConfig;});},buildChildren:function D(H){if(this._super(false)){var G=this.model.getSelectedKey(this.node),I=(G!==null)?mstrmojo.array.find(this.children,"k",G):-1,J=(I>-1)?this.children[I]:null;if(J){this.set("selected",J);}return true;}return false;},restoreLayoutState:function B(H){this._super(H);var G=H.defn.zf;if((this.zf!==G||this.model.getZoomFactor()!==G)&&this.updateZoom){this.zf=G;this.updateZoom();}},_set_selected:function F(K,I){if(!this.selected){return this._super(K,I);}if(I){var H=this,G=this._super,J=I.k;this.getNewLayout({layoutKey:J},this.children,(J!==this.model.currlaykey),{success:function(P){var L=H.selected;G.call(H,K,P);H.raiseEvent({name:"selectedChange",prop:"selected",value:P,valueWas:L});if(!mstrApp.optimizeFitToPage){var O=H.model.zt;if(O===1||O===2){var S=mstrApp.docModel.controller,R=S.zoom,N=S.view.zoomValue,M=N&&N.dssid,Q=(M&&String(M).split(":"))||[];if(R&&O===parseInt(Q[0],10)){R.call(S,N&&N.dssid);}}}}});}return true;},onLayoutRebuilt:function E(G){this._set_selected("selected",G);},replaceLayout:function C(I,H){var G=this.removeChildren(I);I.destroy();var J=this.builder.build([H],this.model);this.addChildren(J,G);return J[0];},getSelectedLayoutWidget:function A(){return this.selected;},selectorMenuRef:"mstrmojo.SelectorMenu",fpMenuRef:"mstrmojo.FilterPanelMenu"});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBar","mstrmojo.Image","mstrmojo.css");mstrmojo.vi.ui.CollapsibleTitleBar=mstrmojo.declare(mstrmojo.vi.ui.TitleBar,null,{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",btnCollapse:null,canCollapse:false,isCollapsed:false,collapse:mstrmojo.emptyFn,onToggleCollapseByUI:mstrmojo.emptyFn,setToolbarVisibility:function C(D){if(!D||!this.isCollapsed){this._super(D);}},onisCollapsedChange:function B(){if(this.canCollapse){var D=this.isCollapsed;this.parent.set("isCollapsed",D);}},getLeftToolbarChildren:function A(){var D=this;return[{scriptClass:"mstrmojo.Image",slot:"leftToolNode",alias:"btnCollapse",onclick:function(F){var G=this.parent,E=G.parent;if(G.canCollapse){G.set("isCollapsed",!G.isCollapsed);D.onToggleCollapseByUI();var H=F.e;if(H&&H.stopPropagation){H.stopPropagation();}}if(E&&E.clickToCollapse){E.clickToCollapse();}}}];}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.vi.ui.CollapsibleTitleBar,{oncanCollapseChange:function(){this.btnCollapse.set("visible",this.canCollapse);},onisCollapsedChange:function(){mstrmojo.css.toggleClass(this.domNode,"collapsed",this.isCollapsed);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.dom","mstrmojo.hash","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.LoginEditor","mstrmojo.util.ThemeHelper","mstrmojo.SessionManager");function Q(h,f){var g=(f?"add":"remove")+"LoadingGraph";this.serverProxy[g](h);}var M=true,R=mstrmojo.hash,P="waitBox",V=".htm";function A(f){return f&&(f.sections||f.subsections||f.objects||f.panels||f.layouts||f.children);}mstrmojo._IsWebApp=mstrmojo.provide("mstrmojo._IsWebApp",{_mixinName:"mstrmojo._IsWebApp",serverProxy:null,init:function Y(f){this._super(f);if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}},start:mstrmojo.emptyFn,styleName:"RWDocumentMojoStyle",modelFactory:null,enableWaitBox:false,primaryScdpMap:{},onMobileDevice:function E(){return false;},isTouchApp:function H(){return false;},getContentDimensions:function d(f){return null;},getConfiguration:mstrmojo.emptyFn,setInteractive:function L(f){if(M!==f){M=f;mstrmojo.dom.toggleSelection(window.document.body,f);return true;}return false;},isInteractive:function b(){return M;},addLoadingGraph:function G(f){Q.call(this,f,true);},removeLoadingGraph:function Z(f){Q.call(this,f);},serverRequest:function U(m,n,g){try{n=n||{};g=g||{};var j=g.src||(arguments.callee&&arguments.callee.caller.name),f=!this.enableWaitBox||g.silent,l=g.hideFailureErr,k=this;if(!m.noStyle){m.styleName=m.styleName||this.styleName;}n=mstrmojo.func.wrapMethods(n,{submission:function(o){if(!f&&mstrmojo.all[P]){mstrmojo.all[P].requestId=o;}},failure:function(o){if(!f){o.method=j;if(!(mstrApp.isSingleTier&&o.code===403)&&!l){mstrmojo.err(typeof o.mstrerr==="object"?o.mstrerr:o);}}},complete:function(){if(!f){if(mstrmojo.all[P]){delete mstrmojo.all[P].requestId;}k.hideWait();}}});if(!f){this.showWait(g&&g.waitBoxCfg);}window.setTimeout(function(){k.serverProxy.request(n,m,!!g.override,g);},0);}catch(h){mstrmojo.err(h);}},serverRequestParallelNative:function I(h,j,g){var f=g||new mstrmojo.QueueNative();f.queueHandle(h,j);},hasRequests:function T(){return this.serverProxy.hasRequests();},getWaitBoxPosition:function(){return null;},isWaiting:function C(){var f=mstrmojo.all[P];return !!(f&&f.visible);},showWait:function F(j){var l=this,n=mstrmojo.all[P]||mstrmojo.insert({scriptClass:"mstrmojo.Editor",id:P,cssClass:"mstrWaitBox",draggable:false,refreshOnNextShow:false,showTitle:false,zIndex:99999,counter:0,displayMsg:null,position:null,ondisplayMsgChange:function k(){this.msgfield.set("text",this.displayMsg);},oncounterChange:function g(){var p=this.counter,t=this.visible;if(p===0&&t){this.close();}else{if(p>0&&!t){this.open();mstrmojo.dom.center(this.editorNode);var o=this.position||l.getWaitBoxPosition();if(o){var r=o.top,q=o.left;if(r!==undefined){this.set("top",r+"px");}if(q!==undefined){this.set("left",q+"px");}}}}},children:[{scriptClass:"mstrmojo.Box",cssClass:"mstrIcon-wait",alias:"icon"},{scriptClass:"mstrmojo.Label",cssClass:"mstrWaitMsg",alias:"msgfield"},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton mstrWaitCancel",alias:"cancelBtn",text:mstrmojo.desc(2140,"Cancel")}]});n.cancelBtn.set("visible",!!(j&&j.showCancel));n.cancelBtn.onclick=function(){l.serverProxy.cancelRequests();if(j&&j.onCancel&&j.onCancel instanceof Function){j.onCancel.call(l);}};var f=j&&j.position;if(f&&((f.top||f.left)!==undefined)){n.position=j.position;}else{n.position=null;}n.set("displayMsg",(j&&j.message)||mstrmojo.desc(11960,"Loading Data..."));if(j&&j.cssClass){n.set("cssClass","mstrWaitBox "+((j&&j.cssClass)||""));n.refresh();n.refreshOnNextShow=true;}else{if(n.refreshOnNextShow){n.refresh();n.refreshOnNextShow=false;}}if(!this._waitUserLogin){n.set("counter",n.counter+1);}else{this._waitCounter=this._waitCounter+1;}var m;function h(){mstrApp.hideWait();clearTimeout(m);}if(j&&j.timeout){m=window.setTimeout(function(){h();},j.timeout);}if(j&&j._autoClose){mstrmojo.all.waitBox.curtainNode.onclick=function(){h();};}return n;},hideWait:function N(f){var g=mstrmojo.all[P];if(this._autoCloseFn){mstrmojo.dom.detachEvent(g.curtainNode,"mousedown",this._autoCloseFn,true);delete this._autoCloseFn;}if(g){g.set("cssClass","mstrWaitBox");if(!this._waitUserLogin){g.set("counter",f?0:Math.max(0,g.counter-1));}else{this._waitCounter=f?0:Math.max(0,g.counter-1);}}},getWaitBox:function(){return mstrmojo.all[P];},showProgress:mstrmojo.emptyFn,hideProgress:mstrmojo.emptyFn,startSessionManager:function X(g){var h=mstrApp,f=h.enableAutomaticSessionRecovery&&h.maxSessionIdleTime;h.sessionManager=h.addDisposable(new mstrmojo.SessionManager(mstrmojo.hash.copy(g,f?{timeBeforeSessionTimeoutWarning:mstrApp.timeBeforeSessionTimeoutWarning,maxSessionIdleTime:h.maxSessionIdleTime}:{})));if(f){h.sessionManager.start();}},isSessionExpiredError:function e(k){var j=2147760371,h=2147760372,g=2147758245,f=2147759877;k=(k<0)?(4294967296+parseInt(k,10)):k;switch(k){case j:case h:case g:case f:return true;}return false;},onSessionExpired:function a(h){if(!mstrConfig.features["enable-login-editor"]){var l=mstrApp.launchingApp||mstrApp;var m={evt:5005,src:l.name+"."+l.pageName+".5005"},g=(l.docModel&&l.docModel.bs)||(l.rootCtrl&&l.rootCtrl.docCtrl&&l.rootCtrl.docCtrl.model&&l.rootCtrl.docCtrl.model.bs)||(l.docModelData&&l.docModelData.bs);if(g){m.rwb=g;}mstrmojo.form.send(m);return ;}if(mstrApp.sessionManager){var k=mstrmojo.all[P],f=k&&k.counter>0,j=this;this._waitCounter=-1;if(f){this._waitCounter=k.counter-1;j.hideWait(true);}this._waitUserLogin=true;mstrApp.sessionManager.openLoginEditor({success:function(n){j._waitUserLogin=false;if(n&&n.sessionState){if(h){if(h.params.sessionState){h.params.sessionState=n.sessionState;}if(f){k.counter=j._waitCounter;j.showWait();}mstrmojo.xhr.request(h.method,h.baseUrl,h.callback,h.params);}}},cancelRequests:function(){mstrApp.serverProxy.cancelRequests();}});}},updateSessionState:function O(f){this.sessionState=f;},onNavigateOut:mstrmojo.emptyFn,showHelpTopic:function B(k,g){var j=g?g+"HelpPath":"helpPath",f=mstrmojo[j].call(),m=mstrApp.isSingleTier,l=mstrApp.isWorkstation,h=-1;if(k&&typeof k==="string"){f+=k;}if(m||l){window.FormWrapper.openPage(f);}else{mstrApp.openPage(f);}return false;},getSearchAutoCompleteDelay:function S(){return parseInt(mstrConfig&&mstrConfig.searchAutoCompleteDelay,10)||200;},getThemeClassName:function D(){return"mojo-theme-light";},openPage:function K(f,g){window.open(f,g);},modalEditorChange:function J(g,f){if(mstrApp&&mstrApp.isOIVM&&mstrApp.isOIVM()){if(!mstrApp.modalOpenEditors){mstrApp.modalOpenEditors={};}if(f){mstrApp.modalOpenEditors[g]=true;}else{delete mstrApp.modalOpenEditors[g];}}},parseSecondaryDataProviders:function W(k){var j,m,g,l=k.defn,n=l&&l.layouts,h=(n&&n.length)||0,f=mstrApp.primaryScdpMap;for(j=0;j<h;j++){m=n[j];g=m&&m.units;R.forEach(g,function(o,p){if(o&&o.scdp){f[p]=o.scdp.split(",");}});}},getPluginsRoot:function(){return((mstrApp.isSingleTier||mstrApp.isWorkstation)?"file://":"")+(this.pluginRoot||(mstrConfig&&mstrConfig.pluginRoot)||"../plugins/");},upload:function(m,l,k,g,j,h,f){this.serverProxy.upload(m,l,k,g,j,h,f);},getThemeProps:function c(f){var g;if(mstrApp&&mstrApp.isOIVM&&mstrApp.isOIVM()){if(!mstrApp.themeProps){mstrApp.themeProps=mstrmojo.util.ThemeHelper.getThemePropConfig({layoutstyle:mstrApp.docModel.getCurrentLayoutStyle()});}g=mstrApp.themeProps;}else{g=mstrApp.getRootController().view.themeProps;}return f?g[f]:g;}});window.$MAPF=function(){return false;};}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.ObjectInputBox","mstrmojo.ACL.UserDataService");mstrmojo.ACL.UserInputBox=mstrmojo.declare(mstrmojo.ObjectInputBox,null,{suggestionPopupCssClss:"mstrmojo-ACLInputBox-suggest",blockCount:10,useKeyDelay:true,getACLUserDataService:function C(){return mstrmojo.ACL.UserDataService;},item2textCss:function A(D){return(this._super&&this._super(D))||"mstrmojo-ACLInputBox-user "+{8704:"u",8705:"ug"}[D.st]||"";},getCandidatesThroughTaskCall:function B(E,D){this.getACLUserDataService().searchUserCandidates(E.pattern,!E.isVerify,E.blockCount,D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.HBox","mstrmojo.List","mstrmojo.Label","mstrmojo.ListMapperHoriz","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo.TristateCheckBox","mstrmojo.Pulldown","mstrmojo.ACL.UserTreeBrowser","mstrmojo.DataGrid","mstrmojo.DropDownButton","mstrmojo.ListBox","mstrmojo.DivItemRenderer","mstrmojo.VBox","mstrmojo.Box","mstrmojo.ACL.UserInputBox","mstrmojo.Editor","mstrmojo.ACL.UserDataService","mstrmojo.CheckList","mstrmojo.TextBox","mstrmojo.TextBoxWithLabel","mstrmojo.CheckBox","mstrmojo.MouseOverContainer","mstrmojo.util.LibraryHelper");mstrmojo.requiresDescs(1825,8078,8079,629,8080,8081,8082,3336,9048,8083,8084,955,8085,531,8086,8087,8088,8089,8090,767,2056,8091,8093,1442,221,8092,13621,9772,9773,9774,272,271,8145,2509,8146,8147,9775,9776,9777,9771,12299,9151,2156,9892,9890,9891,9099,2140,2102);var V=mstrmojo.dom,E=mstrmojo.css,p=mstrmojo.array,q=mstrmojo.util.LibraryHelper,h=[],w=[{n:mstrmojo.desc(16034,"Grant"),v:0},{n:mstrmojo.desc(16035,"Deny"),v:1},{n:mstrmojo.desc(8441,"Default"),v:2}],X="sharingEditor",t=199,W="294DEDC011D2F1D56000D98E67019608",I="C82C6B1011D2894CC0009D9F29718E4F",F=[1,4,8,16,32,64,128],B=[mstrmojo.desc(1825,"Browse"),mstrmojo.desc(8078,"Read"),mstrmojo.desc(8079,"Write"),mstrmojo.desc(629,"Delete"),mstrmojo.desc(8080,"Control"),mstrmojo.desc(8081,"Use"),mstrmojo.desc(8082,"Execute")],e=["B","R","W","D","C","U","E"],g=false,v=true,Y=257,u=1024,a=772,c=776,O=777,k=mstrmojo.Button.newWebButton,r=mstrmojo.Button.newActionButton;function f(AA,AB,z){return{scriptClass:"mstrmojo.HBox",alias:AA,right:AB,cssText:"height:20px;",children:[{scriptClass:"mstrmojo.Label",text:z,cssText:"width:80px"},{scriptClass:"mstrmojo.Pulldown",cssText:"width:100px",itemIdField:"v",items:w,defaultSelection:2,selectionPolicy:"reselect",_set_value:function(AD,AC){this.value=AC;}}]};}function U(z){return(z&&z.t===8);}function x(z){return z&&z.st!=Y&&z.st!=u&&z.st!=a&&z.st!=c&&z.st!=O;}function N(z){return{"253000":255000,"253":255,"221":223,"197":199,"69":71}[z]||z;}function K(z){return{"253000":255000,"253":255,"32221":223,"56197":199}[z]||z;}function b(AF){var AE=[].concat(AF.acls),z=AF.inhs,AD=AF.acls,AH,AB,AG,AA,AC;AD.splice(0,AD.length);if(U(AF)){AE=AE.concat(mstrmojo.hash.valarray(z));}for(AA=0,AC=AE.length;AA<AC;AA++){AH=AE[AA];AG=AH.rgt;if(AG>1000){AB=mstrmojo.hash.copy(AH);AB.den=true;AB.rgt=Math.floor(AG/1000);AD.push(AB);}if((AG%1000)>0){AB=mstrmojo.hash.copy(AH);AB.den=false;AB.rgt=AG%1000;AD.push(AB);}}return AF;}function T(AA){var z={isSerializable:function(AD,AC,AB){switch(AD){case"did":case"rgt":case"n":case"acls":case"t":case"st":case"inh":case"den":return true;}return false;},getArrItemName:function(AD,AB,AC){if(AD==="acls"){return"acl";}},convertBoolean:true};return mstrmojo.string.json2xml("oi",AA,z);}function n(AE,AD){var AB=AE&&AE.oi,AA,z,AF,AC=AE.oneTierConnectivity;if(AB){AB=b(AB);AA=T(AB);AF={taskId:"saveObjectACL",objectXML:AA,objectType:AB.t,objectID:AB.did,propagateToChildren:AE.childrenAccessPulldown.value};z={success:function(AG){if(AD){AE.close();}else{mstrmojo.alert(mstrmojo.desc(3336,"## has been saved successfully.").replace("##",AG.n));AE.set("hasChanged",false);}},failure:function(AG){if(AG.getReponseHeader){mstrmojo.alert(AG.getResponseHeader("X-MSTR-TaskFailureMsg"));}if(AD){AE.close();}}};if(AC){delete AF.taskId;AF.connectionId=AC.connectionId;AF.sessionState=AC.sessionState;AC.connectivityProxy.saveObjectACL(AF,mstrmojo.func.wrapMethods(z,{failure:function(AG){mstrmojo.onetier.vi.prefs.handleErrorMessage(AG);}}));}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,z,AF);}}}function o(AH){var AL=AH.aclList,AM=AH.objectInputer,AC=AM.getSelectedObjects(),AE=AC.length,AI=[],AB,AK=199,AA,AJ,z;if(!AM.isValid()){mstrmojo.alert(mstrmojo.desc(9048,"Some users/groups do not exist. Please remove them in order to proceed."),null,AH.alertTitle);return false;}for(AA=0;AA<AE;AA++){AB=AC[AA];if(AB.did===W||AB.did===I){var AD=mstrmojo.all[X];if(AK===AD.currentPublicRight){if(v){E.removeClass(AD.userMessage.domNode,"hideMsg");}}}AJ=p.find(AL.items,"did",AB.did);if(AJ!==-1){z=AL.items[AJ];if(AH.uneditableRights[z.rgt]){continue;}}AI.push(new mstrmojo.Obj({n:AB.n,did:AB.did,st:AB.st,rgt:AK,newItem:true}));}if(AI.length>0){var AG=p.findMulti(AL.items,"did",AI);if(AG.count){var AF=AG.indices.concat().sort(p.numSorter).slice(0,AG.count);for(AA=AF.length-1;AA>-1;AA--){AL.remove(AF[AA]);}}AL.add(AI);AH.set("hasChanged",true);}AM.set("items",[]);return true;}function P(z){var AB=[],AE=Math.floor(z/1000),AC=z%1000,AF=F,AG=B,AD=AF.length,AH,AA;for(AA=0;AA<AD;AA++){AB.push(AG[AA]);AB.push(" ");if((AC&AF[AA])>0){AB.push(mstrmojo.desc(8083,"Granted"));}else{if((AE&AF[AA])>0){AB.push(mstrmojo.desc(8084,"Denied"));}else{AB.push(mstrmojo.desc(959,"Default"));}}AB.push(",");}AH=AB.join("");return AH.substring(AH,AH.length-1);}function j(AG){var AD=[],AF=AG%1000,AB=F,AE=e,z=AB.length,AC,AA;for(AA=0;AA<z;AA++){if((AF&AB[AA])>0){AD.push(AE[AA]);AD.push(",");}}AC=AD.join("");return AC.substring(AC,AC.length-1);}function R(AB,AC){var AD=AB.items,AA=p.find(AD,AB.itemIdField,AC),AF=AB.customItem,z=AD.length-2;if(AA===-1){var AE={n:j(AC),rgt:AC};if(AF){AD.splice(z,1);}z=AD.length-1;AD.splice(z,0,AE);AB.customItem=AE;}else{if(AF&&AA!==z){AD.splice(z,1);AB.customItem=null;}}if(mstrmojo.all[X].showACLHint!==false){AB.set("title",P(AC));}AB.value=AC;}function C(z){return{"776":[{n:mstrmojo.desc(8085,"Consume"),rgt:71},{n:mstrmojo.desc(531,"Add"),rgt:199},{n:mstrmojo.desc(8086,"Collaborate"),rgt:223},{n:mstrmojo.desc(8087,"Full control"),rgt:255},{n:mstrmojo.desc(8088,"Denied all"),rgt:255000},{n:mstrmojo.desc(8089,"Custom ..."),rgt:-1}],"779":[{n:mstrmojo.desc(8085,"Consume"),rgt:71},{n:mstrmojo.desc(531,"Add"),rgt:199},{n:mstrmojo.desc(8086,"Collaborate"),rgt:223},{n:mstrmojo.desc(8087,"Full control"),rgt:255},{n:mstrmojo.desc(8088,"Denied all"),rgt:255000},{n:mstrmojo.desc(8089,"Custom ..."),rgt:-1}]}[z]||[{n:mstrmojo.desc(8090,"View"),rgt:199},{n:mstrmojo.desc(767,"Modify"),rgt:223},{n:mstrmojo.desc(8087,"Full control"),rgt:255},{n:mstrmojo.desc(8088,"Denied all"),rgt:255000},{n:mstrmojo.desc(8089,"Custom ..."),rgt:-1}];}function S(AG,AE){var AD="";if(AE){var AA=this.widthInput.value,AH=this.heightInput.value,z=' src="'+AG,AI="",AB=this.toolbarOptions.checkBoxList,AF=AB.items,AC;for(AC=0;AC<AF.length;AC++){if(!AB.selectedIndices.hasOwnProperty(AC)){if(AI==""){AI="&hiddensections="+AF[AC].alias;}else{AI+=","+AF[AC].alias;}}}AD='<iframe width="'+AA+'" ';AD+='height="'+AH+'" ';AD+=z;AD+=AI;AD+='"></iframe>';}else{AD='<iframe width="640" height="480" src="';AD+=AG;AD+='&hiddensections=header,path,dockTop,dockLeft,footer"></iframe>';}return AD;}function m(AB){var AD=mstrmojo.string.parseUri(AB).queryKey,AE=AB.indexOf("?"),AA=AE>0?AB.substring(0,AE):AB;var z=AA.indexOf(";jsessionid");AA=z>0?AA.substring(0,z):AA;if(AD.hasOwnProperty("iframe")){delete AD.iframe;}if(AD.hasOwnProperty("validateRandNum")){delete AD.validateRandNum;}if(!AD.hasOwnProperty("server")){AD.Server=encodeURIComponent(mstrApp.serverName);}if(!AD.hasOwnProperty("Project")){AD.Project=encodeURIComponent(mstrmojo.string.decodeHtmlString(mstrApp.projectName));}if(!AD.hasOwnProperty("port")){AD.Port=mstrApp.serverPort;}if(g&&mstrConfig.shareToGuestWhenEnabled){AD.connmode=8;AD.ru=1;}if(AD.evt!=="3185"){AD.share=1;}AA+="?";for(var AC in AD){AA+=AC+"="+AD[AC]+"&";}AA=AA.substring(0,AA.length-1);return AA;}function M(z){z.select();document.execCommand("copy");z.value=z.value;mstrmojo.alert(mstrmojo.desc(15340,"The link has been successfully copied to your clipboard"));}function D(AA,z){return(q.isLibraryConfigured()&&(AA===55||(AA===18&&z&&z.contains("documentID"))));}function H(AB,AA,z){if(AA===18&&D(AA,z)){var AC=mstrmojo.string.parseUri(z).queryKey;AB=AC.documentID;}return AB;}function Z(AB,AA){var AC=window.location.protocol,z="mailto:?body="+window.encodeURIComponent(AA)+"&subject="+encodeURI(AB.objectName);if(mstrApp.isSingleTier){window.FormWrapper.openPage(z);}else{if(!!V.isChrome&&AC==="https:"){window.open(z,"_self");window.setTimeout("iframe.hideWaitPage()",2000);}else{window.open(z,"mailtoIframe");}}}function L(AA){var z;switch(AA){case 199:z="read";break;case 223:z="write";break;case 255:z="full";break;case 255000:z="deny";break;default:z="custom";}return"sharingEditor-privilegeIcon "+z;}function J(AC){var z=new Date(),AB=this.objectName+" "+z.toLocaleDateString()+" "+z.toLocaleTimeString(),AA=this,AD={success:function(AG){var AF=m(AG.url);AA.topSection.authorLinkRow.authorLinkBox.set("value",AF);AA.url=AF;AA.topSection.htmlPanel.htmlLinkRow.htmlBox.set("value",S(AF));var AE=AA.topSection.authorEmail.emailLink;AE.set("url",window.encodeURIComponent(AF));AE.set("name",AA.objectName);},failure:function(AE){mstrmojo.alert(AE.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){AA.hideWait();if(AC){var AE="mailto:?body="+window.encodeURIComponent(AA.url)+"&subject="+encodeURI(AA.objectName);var AF=mstrApp.openPage||mstrmojo._IsWebApp.openPage;AF(AE,"mailtoIframe");}}};this.showWait();mstrmojo.xhr.request("POST",mstrConfig.taskURL,AD,{taskId:"savePersonalView",messageID:this.mid,objectType:this.oi.t,subName:AB,objectSubType:0,viewMode:this.viewMode||0,isPVPublic:true});}function d(AC){var AA=this.getAvailableRightsForSelection(),z=AA.length,AB;for(AB=0;AB<z;AB++){if(AA[AB].rgt===AC){return AA[AB].n;}}return mstrmojo.desc(2056,"Custom");}function Q(z){return(((z.acg&32)>0)&&((z.acg&8)>0));}mstrmojo.SharingEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SharingEditor",cssClass:"mstrmojo-SharingEditor",showSharingOptions:true,showButtonBar:true,showPublisAccess:true,hasChanged:false,help:"sharing_dialog_box.htm",zIndex:199,defaultRight:223,showButtonText:true,uneditableRights:{},currentPublicRight:199,userSelectorTitle:mstrmojo.desc(8091,"User/User Group Browser"),showLinkOnOpen:true,closeEditorAfterSave:true,allowHTMLTitle:true,init:function(z){X=z.id||X;this._super(z);},onShowLink:function(AC){var z=["libraryLink","showLink","htmlCode"];for(var AB=0;AB<z.length;AB++){if(z[AB]!==AC){var AA=this.topSection.tabDock[z[AB]];AA.set("selected",false);E.removeClass(AA.domNode,"selected");}}},showWait:mstrmojo.emptyFn,hideWait:mstrmojo.emptyFn,checkPublicAccess:function(){var AG=this.oi.acls,AB,AJ=p.find(AG,"did",I),AE=this.aclList.itemsContainerNode,AF=this.publicAccessSection.publicLabel,AD,AI=false,z=p.find(AG,"did",W),AH;if(AJ!==-1&&g&&z!==-1){var AA=AG[AJ].rgt,AC=AG[z].rgt;if(AA===AC){AI=true;AH=AC;}}if(AJ!==-1&&!g){AI=true;AH=AG[AJ].rgt;}AD=AE.children[0].tBodies;if(g&&AD[z]){E.toggleClass(AD[z].rows[0],"hide",AI);}if(AD[AJ]){E.toggleClass(AD[AJ].rows[0],"hide",AI);}AF.set("checked",AI);if(AH){this.set("currentPublicRight",AH);}},oncurrentPublicRightChange:function(){var z=this.publicAccessSection.publicMouseOver;z.publicRight.set("value",this.currentPublicRight);z.publicRightLabel.set("text",d.call(this,this.currentPublicRight));},onOpen:function(){var AK=this.oi,AB=AK.n,AI=AK.t,AL=AK.acls,AD=this.topSection,AG=AD.tabDock,AC=false;var AE=H(AK.did,AI,this.href);if(this.objectId&&this.objectId===AE&&!this.isLinkDirty){AC=true;}this.objectId=AE;this.objectName=AB;this.set("showACL",!!AL);g=this.guestModeEnabled;if(x(AK)&&this.showSharingOptions){if(!AC){if(this.href&&!this.isLinkDirty){var AA=!this.urlReady?m(this.href):this.href,AH=AD.authorEmail.emailLink;this.url=AA;AH.set("url",window.encodeURIComponent(AA));AH.set("name",AB);AD.htmlPanel.htmlLinkRow.htmlBox.set("value",S(AA));AD.authorLinkRow.authorLinkBox.set("value",AA);}else{J.call(this);this.set("isLinkDirty",false);}if(D(AI,this.href)){var AA=q.constructLibraryUrl(AE);var AJ=AD.libraryLaunchButtons.libraryEmailLink;this.libraryUrl=AA;AD.libraryLinkRow.libraryLinkBox.set("value",this.libraryUrl);AJ.set("url",window.encodeURIComponent(AA));AJ.set("name",AB);}}if(this.initTab=="shareByLinkMSTRLibrary"){this.onShowLink("libraryLink");AG.libraryLink.set("selected",true);E.addClass(AG.libraryLink.domNode,"selected");}else{if(this.initTab=="shareByLinkEmbed"){this.onShowLink("htmlCode");AG.htmlCode.set("selected",true);E.addClass(AG.htmlCode.domNode,"selected");}else{this.onShowLink("showLink");AG.showLink.set("selected",true);E.addClass(AG.showLink.domNode,"selected");}}}this.set("title",mstrmojo.desc(8093,"share").replace("##",mstrmojo.string.encodeHtmlString(AB)));if(AL){this.checkPublicAccess();var AM=this.objectInputer,AF=this.userSelector,z=AF&&AF.userBrowser;AM.zIndex=this.zIndex;if(z&&z.hasRendered){AF.opener=this;z.set("items",[]);z.getContent(z);}this.set("hasChanged",false);}this.aclList.updateScrollbars();this.positionDialog();},_set_hasChanged:function(AB,z){var AA=(z!==this.hasChanged);this.hasChanged=z;if(z===true){this.checkPublicAccess();return z;}return AA;},_set_oi:function(AA,z){this.oi=this.preProcessACLs(z);return true;},postCreate:function(){this.oi=this.preProcessACLs(this.oi);},getAvailableRightsForSelection:function(){return C(this.oi.st);},preProcessACLs:function(AG){if(AG&&AG.acls){var AE=AG.acls,AD=AE&&AE.length,AF=U(AG),AA={},AH,z,AB,AC;if(AF){AB={};AG.inhs=AB;}for(AC=0;AC<AD;AC++){AH=new mstrmojo.Obj(AE[AC]);if(AH.den){AH.rgt=AH.rgt*1000;}if(AF&&AH.inh){AB[AH.n]=mstrmojo.hash.copy(AH);continue;}z=AA[AH.n];if(!z){z=mstrmojo.hash.copy(AH);z.rgt=0;delete z.den;AA[AH.n]=z;}z.rgt=z.rgt+AH.rgt;if(z.rgt>255000){z.rgt=Math.floor(z.rgt/1000)*1000;}}AE=mstrmojo.hash.valarray(AA);AG.acls=AE;}return AG;},getACLItems:function(){var AC=this.aclList&&this.aclList.items,AA=[];for(var AB=0,z=AC.length;AB<z;AB++){AA.push(AC[AB]);}return AA;},onClose:function(){var z=this.objectInputer;z.set("items",[]);this.aclList.clearSelect();this.onShowLink("showLink");},getACLUserDataService:function l(){return mstrmojo.ACL.UserDataService;},userSelector:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-UserEditor",help:"user_group_browser.htm",onClose:function(){this.userBrowser.clearTreeSelect();},children:[{scriptClass:"mstrmojo.ACL.UserTreeBrowser",alias:"userBrowser",getACLUserDataService:function l(){return this.parent.opener.getACLUserDataService();},updateTreeContent:function(AA,AC){AA.contentRetrieved=true;var AB=AC[AA.itemChildrenField],z=AA.tree||AA,AE=AC.bc,AD=AC.sz,AF=AC.bb;if(AE!==-1){if(AF+AE<=AD){AB.push(z.nextItemCreaterFunc());}if((AF-AE)>-1){AB.unshift(z.prevItemCreaterFunc());}}AA.blockBegin=AF;z.initializing=true;AA.clearSelect(false);AA.set("items",AB);AA.setSelectedItems(z.getTotalSelections(),true);z.initializing=false;},selectionAcrossBranch:true,multiSelect:true},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-OK",text:mstrmojo.desc(1442,"OK"),onclick:function(AA){var z=this.parent.parent,AE=z.opener,AD=AE.objectInputer,AC=z.userBrowser,AB=AC.getTotalSelections();if(AB&&AB.length>0){AD.add(AB,AD.items.length-1);}z.close();},preBuildRendering:function(){if(!this.parent.parent.opener.showButtonText){this.set("text","");}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-Cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(z){this.parent.parent.close();},preBuildRendering:function(){if(!this.parent.parent.opener.showButtonText){this.set("text","");}}}]}],onOpen:function(){this.set("title",this.opener.userSelectorTitle);}},customACL:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(8092,"Custom Permission Level"),cssClass:"mstrmojo-CustomACLEditor",help:"Custom_Permission_Level_dialog_box.htm",onOpen:function(){var AF=this.rgt,AG=Math.floor(AF/1000),AE=AF%1000,AB=this.children,AC,AD,AA,z;for(AA=0,z=7;AA<z;AA++){AC=AB[AA];AD=AC.right;if((AE&AD)>0){AC.children[1].value=0;}else{if((AG&AD)>0){AC.children[1].value=1;}else{AC.children[1].value=2;}}}this.refresh();},getACLValue:function(){var AD=0,AE=0,AB=this.children,AC,AA,z;for(AA=0,z=7;AA<z;AA++){AC=AB[AA];if(AC.children[1].value==0){AD+=AC.right;}else{if(AC.children[1].value==1){AE+=AC.right;}}}return AE*1000+AD;},children:[f("browse",1,mstrmojo.desc(1825,"Browse")),f("read",4,mstrmojo.desc(8078,"Read")),f("write",8,mstrmojo.desc(8079,"Write")),f("delete",16,mstrmojo.desc(629,"Delete")),f("control",32,mstrmojo.desc(8080,"Control")),f("use",64,mstrmojo.desc(8081,"Use")),f("execute",128,mstrmojo.desc(8082,"Execute")),{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-OK",text:mstrmojo.desc(1442,"OK"),onclick:function(z){var AA=this.parent.parent;if(AA.onOK){AA.onOK();}AA.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-Cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(z){var AA=this.parent.parent;if(AA.onCancel){AA.onCancel();}AA.close();}}]}]},children:[{scriptClass:"mstrmojo.Box",alias:"topSection",cssClass:"sharingEditor-topSection",bindings:{visible:function(){return x(this.parent.oi)&&this.parent.showSharingOptions;}},children:[{scriptClass:"mstrmojo.HBox",alias:"tabDock",cssClass:"sharingEditor-tabDock",bindings:{visible:function(){return x(this.parent.parent.oi)&&this.parent.parent.showSharingOptions;}},children:[{scriptClass:"mstrmojo.Label",alias:"showLink",text:mstrmojo.desc(9773,"Link"),cssClass:"SharingEditor-ShowLink",selected:false,onclick:function(z){var AA=this.parent.parent.parent;if(!this.selected){AA.onShowLink(this.alias);this.set("selected",true);E.addClass(this.domNode,"selected");}},},{scriptClass:"mstrmojo.Label",alias:"libraryLink",text:mstrmojo.desc(15572,"Library link"),cssClass:"SharingEditor-libraryLink",selected:false,onclick:function(z){var AA=this.parent.parent.parent;if(!this.selected){AA.onShowLink(this.alias);this.set("selected",true);E.addClass(this.domNode,"selected");}},bindings:{visible:function(){return D(this.parent.parent.parent.oi.t,this.parent.parent.parent.href);}}},{scriptClass:"mstrmojo.Label",cssClass:"SharingEditor-ShowHtml",alias:"htmlCode",text:mstrmojo.desc(9774,"Show HTML"),selected:false,onclick:function(z){var AA=this.parent.parent.parent;if(!this.selected){AA.onShowLink(this.alias);this.set("selected",true);E.addClass(this.domNode,"selected");}}}]},{scriptClass:"mstrmojo.Box",alias:"htmlPanel",cssClass:"mstrmojo-SharingEditor-html-panel",children:[{scriptClass:"mstrmojo.HBox",alias:"htmlLinkRow",cssClass:"SharingEditor-LinkRow",children:[{scriptClass:"mstrmojo.TextBox",alias:"htmlBox",cssClass:"SharingEditor-Html"},{scriptClass:"mstrmojo.Button",alias:"copyHtmlLink",cssClass:"SharingEditor-CopyHtmlLink",onclick:function(z){var AA=this.parent.htmlBox.inputNode;M(AA);},bindings:{visible:"this.parent.parent.parent.tabDock.htmlCode.selected"}}]},{scriptClass:"mstrmojo.Label",alias:"IframeSize",text:mstrmojo.desc(9735,"Size:"),cssClass:"SharingEditor-Html-Size"},{scriptClass:"mstrmojo.TextBoxWithLabel",alias:"widthInput",label:mstrmojo.desc(272,"Width:"),value:640,onvalueChange:function(z){var AA=this.parent,AB=mstrmojo.all[X];AA.htmlLinkRow.htmlBox.set("value",S.call(AA,AB.url,true));}},{scriptClass:"mstrmojo.TextBoxWithLabel",label:mstrmojo.desc(271,"Height:"),alias:"heightInput",value:480,onvalueChange:function(){var z=this.parent,AA=mstrmojo.all[X];z.htmlLinkRow.htmlBox.set("value",S.call(z,AA.url,true));}},{scriptClass:"mstrmojo.HBox",alias:"toolbarOptions",cssClass:"SharingEditor-toolbarRow",children:[{scriptClass:"mstrmojo.Label",alias:"IframeShow",text:mstrmojo.desc(15341,"Show:"),cssClass:"SharingEditor-Html-Show"},{scriptClass:"mstrmojo.CheckListHoriz",alias:"checkBoxList",items:[{n:mstrmojo.desc(8145,"Navigation bar"),alias:"path"},{n:mstrmojo.desc(2509,"Toolbar"),alias:"dockTop"},{n:mstrmojo.desc(8146,"Tools panel"),alias:"dockLeft"},{n:mstrmojo.desc(8147,"Footer"),alias:"footer"}],multiSelect:true,onselectionChange:function(z){var AA=this.parent.parent,AB=mstrmojo.all[X];AA.htmlLinkRow.htmlBox.set("value",S.call(AA,AB.url,true));}}]}],bindings:{visible:"this.parent.tabDock.htmlCode.selected"}},{scriptClass:"mstrmojo.HBox",alias:"authorLinkRow",cssClass:"SharingEditor-LinkRow",bindings:{visible:function(){return this.parent.tabDock.showLink.selected;}},children:[{scriptClass:"mstrmojo.TextBox",alias:"authorLinkBox",cssClass:"SharingEditor-Link",},{scriptClass:"mstrmojo.Button",alias:"authorCopyLink",cssClass:"SharingEditor-CopyLink",onclick:function(z){var AA=this.parent.authorLinkBox.inputNode;M(AA);}},]},{scriptClass:"mstrmojo.HBox",alias:"libraryLinkRow",cssClass:"SharingEditor-LinkRow",bindings:{visible:function(){return this.parent.tabDock.libraryLink.selected;}},children:[{scriptClass:"mstrmojo.TextBox",alias:"libraryLinkBox",cssClass:"SharingEditor-Link",},{scriptClass:"mstrmojo.Button",alias:"libraryCopyLink",cssClass:"SharingEditor-CopyLink",onclick:function(z){var AA=this.parent.libraryLinkBox.inputNode;M(AA);}},]},{scriptClass:"mstrmojo.HBox",alias:"libraryLaunchButtons",cssClass:"SharingEditor-LaunchButtons",bindings:{visible:function(){return this.parent.tabDock.libraryLink.selected;}},children:[{scriptClass:"mstrmojo.Widget",markupString:'<div id = "{@id}" class ="sharingEditor-launchLink" style="{@cssText}" mstrAttach:click>'+mstrmojo.desc(15334,"Launch")+' <iframe name="launchToIframe" target="_blank" style="display:none"></iframe> </div>',alias:"launchLink",onclick:function(){var z=this.parent.parent.parent;q.createTokenAndOpenLink(z.libraryUrl);},bindings:{visible:function(){return this.parent.parent.tabDock.libraryLink.selected&&this.parent.parent.parent.oi.t==55;}}},{scriptClass:"mstrmojo.Widget",markupString:'<div id = "{@id}" class ="sharingEditor-emailLink" style="{@cssText}"" mstrAttach:click>'+mstrmojo.desc(15333,"Email Link")+' <iframe name="mailtoIframe" style="display:none"></iframe> </div>',alias:"libraryEmailLink",onclick:function(){var z=this.parent.parent.parent;if(!z.libraryUrl){q.constructLibraryUrl(z.objectId);}else{Z(z,z.libraryUrl);}}}]},{scriptClass:"mstrmojo.HBox",alias:"authorEmail",cssClass:"SharingEditor-LaunchButtons email",bindings:{visible:function(){return this.parent.tabDock.showLink.selected;}},children:[{scriptClass:"mstrmojo.Widget",markupString:'<div id = "{@id}" class ="sharingEditor-emailLink" style="{@cssText}"" mstrAttach:click>'+mstrmojo.desc(15333,"Email Link")+' <iframe name="mailtoIframe" style="display:none"></iframe> </div>',alias:"emailLink",onclick:function(){var z=this.parent.parent.parent;if(!z.url||z.isLinkDirty){J.call(z,true);z.set("isLinkDirty",false);}else{Z(z,z.url);}}}]}]},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9775,"Who Has Access"),cssClass:"SharingEditor-title",bindings:{visible:"this.parent.showACL"}},{scriptClass:"mstrmojo.Label",alias:"userMessage",text:mstrmojo.desc(9771,"The permission you added is already granted"),cssClass:"sharingEditorUserMessage hideMsg",bindings:{visible:"this.parent.showACL"},onclick:function(){E.addClass(this.domNode,"hideMsg");v=false;}},{scriptClass:"mstrmojo.Box",cssClass:"sharingEditor-ACLUserPanel",bindings:{visible:"this.parent.showACL"},children:[{scriptClass:"mstrmojo.HBox",cssClass:"sharingEditor-CPSection",children:[{scriptClass:"mstrmojo.ACL.AddUserInputBox",emptyText:mstrmojo.desc(15335,"Type to add users or groups here..."),getACLUserDataService:function l(){return this.parent.parent.parent.getACLUserDataService();},noCache:true,postCreate:function(){var z=this.parent.parent.parent;if(z){this.zIndex=z.zIndex+1;}},onRender:function(){var z=this.parent.parent.parent;if(z){z.objectInputer=this;}},bindings:{enabled:function(){return Q(this.parent.parent.parent.oi);}}},r(mstrmojo.desc(1825,"Browse"),function(z){var AA=this.parent.parent.parent;AA.openPopup("userSelector",{zIndex:AA.zIndex+10});},{bindings:{enabled:function(){return Q(this.parent.parent.parent.oi);}}})]}]},{scriptClass:"mstrmojo.HBox",alias:"publicAccessSection",cssClass:"sharingEditor-publicAccessSection",bindings:{visible:"this.parent.showACL && this.parent.showPublisAccess"},children:[{scriptClass:"mstrmojo.CheckBox",alias:"publicLabel",cssClass:"SharingEditor-Public",bindings:{label:function(){if(this.parent.parent.guestModeEnabled){return mstrmojo.desc(9776,"Public (Login not required)");}return mstrmojo.desc(9777,"Everyone (Login not required)");},enabled:function(){return Q(this.parent.parent.oi);}},oncheckedChange:function(){E.toggleClass(this.domNode.children[1],"label-disabled",!this.checked);},getUserGroupsInfo:function(){if(g){this.getUserGroupFromTaskCall(W);}this.getUserGroupFromTaskCall(I);},getUserGroupFromTaskCall:function(AF){var AB=mstrmojo.all[X],AC=AB.aclList,AD=AB.getACLUserDataService(),AE=function(AH){var AG=new mstrmojo.Obj({n:AH.n,did:AH.did,st:AH.st,rgt:t,newItem:true});h.push(AG);},AA=function(AG){},z=function(){if(!g||(g&&h.length==2)){AC.add(h);AB.set("hasChanged",true);}};AD.getMembers({blockBegin:0,blockCount:1,outputElements:1,data:{did:AF}},{success:AE,failure:AA,complete:z});},onclick:function(){var AA=mstrmojo.all[X];var AB=AA.aclList.items;var AC=p.find(AB,"did",I);if(AC!==-1){AB.remove(AC);}var z=p.find(AB,"did",W);if(g&&z!==-1){AB.remove(z);}if(this.checked===true){if(h.length<1){this.getUserGroupsInfo();}else{mstrmojo.array.forEach(h,function(AD){AD.rgt=t;});AB.add(h);AA.set("hasChanged",true);}}else{AA.set("currentPublicRight",t);AA.set("hasChanged",true);}}},{scriptClass:"mstrmojo.MouseOverContainer",alias:"publicMouseOver",setupSelectedItem:function A(){this.mouseoverItem=this.publicRight;this.mouseoutItem=this.publicRightLabel;},bindings:{visible:"this.parent.publicLabel.checked",enabled:function(){return Q(this.parent.parent.oi);}},children:[{scriptClass:"mstrmojo.Label",markupMethods:{oncssClassChange:function(){this.domNode.className="mstrmojo-Label "+this.cssClass;}},bindings:{cssClass:function(){return L(this.parent.parent.parent.currentPublicRight);}}},{scriptClass:"mstrmojo.Label",alias:"publicRightLabel",cssClass:"sharingEditor-rightLabel",bindings:{text:function(){var z=this.parent.parent.parent;return d.call(z,z.currentPublicRight);},enabled:function(){return Q(this.parent.parent.parent.oi);}}},{scriptClass:"mstrmojo.Pulldown",cssClass:"sharingEditor-pulldown",itemIdField:"rgt",alias:"publicRight",visible:false,postCreate:function(){this.items=this.parent.parent.parent.getAvailableRightsForSelection();},bindings:{value:"this.parent.parent.parent.currentPublicRight",enabled:function(){return Q(this.parent.parent.parent.oi);}},selectionPolicy:"reselect",onvalueChange:function(){var z=this.parent;var AA=z.parent.parent;z.publicRightLabel.set("text",d.call(AA,this.value));},_set_value:function(AE,AA){var AB=this.value,z=(AB!==AA);if(z){if(AA===-1){var AD=this.parent.parent.parent,AC=this;AD.openPopup("customACL",{zIndex:AD.zIndex+10,rgt:AB,twoStates:true,onOK:function(){AC.set("value",this.getACLValue());},onCancel:function(){AC.set("value",AB);}});return false;}AA=K(AA);R(this,AA);this.updatePublicRight(AA);return true;}return true;},updatePublicRight:function(AA){var AB=this.parent.parent.parent;if(AB.aclList){var AC=AB.aclList.items;var z=p.find(AC,"did",W);var AD=p.find(AC,"did",I);if(g&&z!==-1){AC[z].rgt=AA;}if(AD!==-1){AC[AD].rgt=AA;}AB.set("hasChanged",true);AB.set("currentPublicRight",AA);}}}]}]},{scriptClass:"mstrmojo.DataGrid",alias:"aclList",cssClass:"aclList",renderOnScroll:false,makeObservable:true,itemDisplayField:"n",itemIdField:"did",dropZone:true,bindings:{items:function(){return this.parent.oi.acls||[];},visible:"this.parent.showACL"},onremove:function(AA){var AE=this.parent.oi;var AD=this;window.setTimeout(function(){AD.updateScrollbars();},10);if(!U(AE)){return ;}var AF=AE.inhs,AC=AA.value,z=AC&&AC.length,AG,AB;for(AB=0;AB<z;AB++){AG=AC[AB].n;delete AF[AG];}},onadd:function(AA){var AE=this.parent.oi;var AD=this;window.setTimeout(function(){AD.updateScrollbars();},10);if(!U(AE)){return ;}var AF=AE.inhs,AC=AA.value,z=AC&&AC.length,AG,AB;for(AB=0;AB<z;AB++){AG=AC[AB].n;AF[AG]=mstrmojo.hash.copy(AC[AB]);AF[AG].inh=true;}},onACLChanged:function(AA){var z=this.parent.oi;this.parent.set("hasChanged",true);if(!U(z)){return ;}if(this.parent.childrenAccessPulldown.value==1){z.inhs[AA.n]=mstrmojo.hash.copy(AA);z.inhs[AA.n].inh=true;}},columns:[{dataFunction:function(AB,z,AA){return'<div class="mstrmojo-ACLEditor-user '+(AB.st===8705?"ug":"u")+'">'+mstrmojo.string.encodeHtmlString(AB.n)+"</div>";}},{dataWidget:{scriptClass:"mstrmojo.MouseOverContainer",alias:"mouseOverContainer",bindings:{enabled:function(){return Q(this.parent.parent.parent.oi);}},setupSelectedItem:function A(){this.mouseoverItem=this.dataGridPulldown;this.mouseoutItem=this.dataGridLabel;},children:[{scriptClass:"mstrmojo.Label",markupMethods:{oncssClassChange:function(){this.domNode.className="mstrmojo-Label "+this.cssClass;}},bindings:{cssClass:function(){return L(this.parent.parent.data.rgt);}}},{scriptClass:"mstrmojo.Label",cssClass:"sharingEditor-rightLabel",alias:"dataGridLabel",bindings:{text:function(){return d.call(mstrmojo.all[X],this.parent.parent.data.rgt);},enabled:function(){return Q(this.parent.parent.parent.parent.oi);}}},{scriptClass:"mstrmojo.HBox",alias:"dataGridPulldown",cssClass:"sharingEditor-datagridContainer",visible:false,children:[{scriptClass:"mstrmojo.Pulldown",cssClass:"sharingEditor-datagridPulldown",itemIdField:"rgt",popupToBody:true,selectionPolicy:"reselect",popupZIndex:1001,postCreate:function(){this.markupMethods=mstrmojo.hash.copy({ondataChange:function(){var z=this.parent.parent.data;this.set("value",z[this.itemIdField]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";if(!this.visible&&this.popupRef){this.popupRef.set("visible",false);}}},mstrmojo.hash.copy(this.markupMethods));this.items=this.parent.parent.dataGrid.parent.getAvailableRightsForSelection();},_set_value:function(AE,AA){var AB=this.value,z=(AB!==AA);if(z){if(AA===-1){var AD=this.parent.parent.dataGrid.parent,AC=this;AD.openPopup("customACL",{zIndex:AD.zIndex+10,rgt:AB,twoStates:!!this.parent.parent.data.newItem,onOK:function(){AC.set("value",this.getACLValue());},onCancel:function(){AC.set("value",AB);}});return false;}AA=N(AA);R(this,AA);this.parent.parent.data.set(this.itemIdField,AA);if(AB!==null){this.parent.parent.dataGrid.onACLChanged(this.parent.parent.data);}return true;}return true;},bindings:{enabled:function(){return Q(this.parent.parent.parent.parent.parent.oi);}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-ACLEditor-delete",text:"&nbsp",title:mstrmojo.desc(629,"Delete"),onclick:function(z){var AA=this,AB=function(){var AC=AA.parent.parent.dataGrid;AC.remove(AA.parent.parent.data);AC.parent.set("hasChanged",true);};mstrmojo.confirm(mstrmojo.desc(12299,"Are you sure you want to delete the user/user group #?").replace("#",this.parent.parent.data.n),{confirmBtn:{fn:AB}},{zIndex:2000});},bindings:{enabled:function(){return Q(this.parent.parent.parent.parent.parent.oi);}}}]}]}}]},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9892,"Children Access"),cssClass:"SharingEditor-title",bindings:{visible:function(){return this.parent.showACL&&U(this.parent.oi);}}},{scriptClass:"mstrmojo.Pulldown",alias:"childrenAccessPulldown",value:0,items:[{n:mstrmojo.desc(9890,"Preserve children's access control lists"),idx:0},{n:mstrmojo.desc(9891,"Overwrite children's access control lists"),idx:1}],itemIdField:"idx",bindings:{visible:function(){return this.parent.showACL&&U(this.parent.oi);}}},{scriptClass:"mstrmojo.HBox",cssClass:"Editor-buttonBox",slot:"buttonNode",bindings:{visible:"this.parent.showButtonBar"},children:[k(mstrmojo.desc(8473,"Done"),function(z){var AA=this.parent.parent;if(o(AA)){n(AA,AA.closeEditorAfterSave);}},true,{iconClass:"mstrmojo-Editor-button-OK",bindings:{visible:"this.parent.parent.showACL",enabled:function(){return Q(this.parent.parent.oi)&&this.parent.parent.hasChanged;},text:function(){return mstrmojo.desc(8473,"Done");}},preBuildRendering:function(){if(!this.parent.parent.showButtonText){this.set("text","");}}}),k("",function(z){var AA=this.parent.parent;AA.close();AA.set("hasChanged",false);},false,{iconClass:"mstrmojo-Editor-button-Close",bindings:{iconClass:function(){var z=this.parent.parent;if(z.hasChanged){return"mstrmojo-Editor-button-Cancel";}return"mstrmojo-Editor-button-Close";},text:function(){return mstrmojo.desc(2140,"Cancel");}}})]}]});mstrmojo.ACL.AddUserInputBox=mstrmojo.declare(mstrmojo.ACL.UserInputBox,null,{scriptClass:"mstrmojo.ACL.AddUserInputBox",add:function G(AA,z){var AB=this.parent.parent.parent;this._super(AA,z);o(AB);},});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.array","mstrmojo.string","mstrmojo.expr","mstrmojo.date","mstrmojo.ValidationTextBox","mstrmojo.DateTextBox");var T=mstrmojo.array,R=mstrmojo.css,J=mstrmojo.string,Q=mstrmojo.date,P=mstrmojo.expr,B=P.FN,E=mstrmojo.validation;var A={};A[B.BETWEEN]=B.NOT_BETWEEN;A[B.NOT_BETWEEN]=B.BETWEEN;A[B.GREATER_EQUAL]=B.LESS;A[B.LESS]=B.GREATER_EQUAL;A[B.LESS_EQUAL]=B.GREATER;A[B.GREATER]=B.LESS_EQUAL;A[B.SEARCH]=B.SEARCH;function I(U){if(this.value!==this._lastInput){S.call(this,U,true);}}function N(U){mstrmojo.DateTextBox.prototype.onclick.call(this,U);R.addClass(this.calendar&&this.calendar.domNode,mstrApp.getThemeClassName());}function S(U,Z){var Y=this.parent.parent;if(!Y._inSyncPhase){var W=this.calendar&&this.calendar.cal,X=this,V=Y.submitTimer;if(V){window.clearTimeout(V);}if(!mstrApp.isWaiting()){if(Z||W&&W.value===this.value){this._lastInput=this.value;Y.submit(X);}else{Y.submitTimer=window.setTimeout(function(){X._lastInput=X.value;Y.submit(X);},3000);this.set("dynDateValue",null);if(W){W.set("value",this.value);}}}else{if(this._lastInput){this.set("value",this._lastInput);}}}}function L(X){if(!X.isDyn){return null;}var W=["isDyn"];W.push(X.dyt||0);W.push(X.ddo||0);W.push(X.dmo||0);W.push(X.dm||0);W.push(X.dd||0);W.push(X.dw||0);W.push(X.dow||0);W.push(X.v||"");if(X.dtp===P.DTP.TIMESTAMP){var V=Q.parseDateAndOrTime(X.v||""),U=V&&V.time;if(U){X.dh=U.hour;X.dmi=U.min;X.ds=U.sec;}}W.push(X.dh||0);W.push(X.dmi||0);W.push(X.ds||0);return W.join("::");}function C(a,U,X){return{parent:a,dt:U,f:X,setDataType:function Y(d){this.dt=d;},setFunction:function b(d){this.f=d;},hasSecTextBox:function V(){var d=this.f;return d!==B.SEARCH;},adjustVisibleFields:function Z(){var d=this.parent;if(!this.hasSecTextBox()){d.toBox.set("visible",false);d.fromBox.fromLabel.set("visible",false);}if(U===P.DTP.DATE||U===P.DTP.TIMESTAMP){d.fromBox.fromInput.set("visible",false);d.toBox.toInput.set("visible",false);}else{d.fromBox.fromPicker.set("visible",false);d.toBox.toPicker.set("visible",false);}},setMinMaxToInputs:function c(g,f){if(!this.hasSecTextBox()){return ;}var d=g.value&&g.validationStatus&&g.validationStatus.code===E.STATUSCODE.VALID,e=f.value&&f.validationStatus&&f.validationStatus.code===E.STATUSCODE.VALID;if(g.constraints){g.constraints.min=null;g.constraints.max=e?f.value:null;}if(f.constraints){f.constraints.min=d?g.value:null;f.constraints.max=null;}},passValueToInputs:function W(e){var g=this.parent,j,h,f=this,d=function(k,l){if(f.f===B.SEARCH||k.v!=="*"){l.set("value",k.v);l._lastInput=k.v;if(U===P.DTP.DATE||U===P.DTP.TIMESTAMP){l.set("dynDateValue",L(k));}}};if(U===P.DTP.DATE||U===P.DTP.TIMESTAMP){j=g.fromBox.fromPicker;h=g.toBox.toPicker;}else{j=g.fromBox.fromInput;h=g.toBox.toInput;}if(X===B.BETWEEN||X===B.NOT_BETWEEN){if(e&&e[0]){d(e[0],j);}else{j.set("value",j.min||"");j._lastInput=j.min||"";}if(this.hasSecTextBox()&&e&&e[1]){d(e[1],h);}else{h.set("value",h.max||"");h._lastInput=h.max||"";}}else{if(X===B.GREATER_EQUAL||X===B.LESS){if(e&&e[0]){d(e[0],j);h.set("value",h.max||"");h._lastInput=h.max||"";}}else{if(X===B.LESS_EQUAL||X===B.GREATER){if(e&&e[0]){d(e[0],h);j.set("value",j.min||"");j._lastInput=j.min||"";}}}}this.setMinMaxToInputs(j,h);}};}mstrmojo.vi.ui.rw.selectors.AttrQualInputBox=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.rw.selectors.AttrQualInputBox",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},cssClass:"Attr-Qual-InputBox",children:[{scriptClass:"mstrmojo.Box",alias:"fromBox",cssClass:"from-box",children:[{scriptClass:"mstrmojo.Label",alias:"fromLabel",cssDisplay:"inline-block",cssClass:"input-label",text:"<span>"+mstrmojo.desc(146,"From:")+"</span>",allowHTML:true},{scriptClass:"mstrmojo.ValidationTextBox",alias:"fromInput",cssDisplay:"inline-block",required:false,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onEnter:I,onblur:I,_lastInput:null,bindings:{dtp:"this.parent.parent.dt"}},{scriptClass:"mstrmojo.DateTextBox",alias:"fromPicker",cssDisplay:"inline-block",required:false,calendarToBody:true,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onvalueChange:S,onEnter:I,onblur:I,_lastInput:null,bindings:{dtp:"this.parent.parent.dt",min:"this.parent.parent.min",max:"this.parent.parent.max",defaultDate:"this.parent.parent.min",showAdvanced:"this.parent.parent.showAdvanced",canSelectDisabledDate:"this.parent.parent.canSelectDisabledDate"},onclick:N}]},{scriptClass:"mstrmojo.Box",alias:"toBox",cssClass:"to-box",children:[{scriptClass:"mstrmojo.Label",alias:"toLabel",cssDisplay:"inline-block",cssClass:"input-label",text:"<span>"+mstrmojo.desc(147,"To:")+"</span>",allowHTML:true},{scriptClass:"mstrmojo.ValidationTextBox",alias:"toInput",cssDisplay:"inline-block",required:false,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onEnter:I,onblur:I,_lastInput:null,bindings:{dtp:"this.parent.parent.dt"}},{scriptClass:"mstrmojo.DateTextBox",alias:"toPicker",cssDisplay:"inline-block",required:false,calendarToBody:true,constraints:{trigger:E.TRIGGER.ALL},autoFormat:false,onvalueChange:S,onEnter:I,onblur:I,_lastInput:null,bindings:{dtp:"this.parent.parent.dt",min:"this.parent.parent.min",max:"this.parent.parent.max",defaultDate:"this.parent.parent.max",showAdvanced:"this.parent.parent.showAdvanced",canSelectDisabledDate:"this.parent.parent.canSelectDisabledDate"},onclick:N}]}],setupScrollNodes:function F(){this.scrollNode=this.supportScrollbar?this.containerNode:null;},widgetResized:function(){var X=this,U=parseInt(this.width,10),V=["fromBox","toBox"],Y,W,Z;if(!this.widgetHelper.hasSecTextBox()){V=["fromBox"];}if(U>368){W=true;}else{W=false;}if(X.parent.isInFilterPanel()||!this.widgetHelper.hasSecTextBox()){W=false;return ;}window.setTimeout(function(){Y=X.hasRendered;if(X.fromBox&&X.fromBox.domNode){Z=X.fromBox.fromLabel.domNode.children[0].offsetWidth+X.fromBox.fromPicker.domNode.offsetWidth;Z+=X.toBox.toLabel.domNode.children[0].offsetWidth+X.toBox.toPicker.domNode.offsetWidth;Z+=80;}T.forEach(V,function(a){if(Y){if(Z>U){W=false;}R.toggleClass(X[a].domNode,"onerow",W);X[a].domNode.style.display=W?"inline-block":"block";}else{if(W){R.addWidgetCssClass(X[a],"onerow");X[a].cssDisplay="inline-block";}else{R.removeWidgetCssClass(X[a],"onerow");X[a].cssDisplay="block";}}});if(X.supportScrollbar){X.updateScrollbars();}},0);},init:function O(U){if(this._super){this._super(U);}if(this.supportScrollbar){mstrmojo.hash.copy({markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"><div style="height: {@height}; width: {@width}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}}},this);}this.widgetHelper=C(this,this.dt,this.f);this.updateWidgetByData();},update:function D(U){if(U){this.cs=U.cs;if(U.f){this.f=U.f;}if(U.ft){this.ft=U.ft;}if(U.fid){this.fid=U.fid;}if(U.min){this.set("min",U.min);}if(U.max){this.set("max",U.max);}}this.updateWidgetByData();},updateWidgetByData:function M(){var U=this.widgetHelper,V=this.cs;this._inSyncPhase=true;U.adjustVisibleFields();U.passValueToInputs(V);this._inSyncPhase=false;},onincludeChange:function G(){this.f=A[this.f];if(!this._inSyncPhase){this.onchange();}},submit:function H(b){var Z=this.cs=[],X=this.parent.include,W=this.widgetHelper,V=(b.validationStatus.code===E.STATUSCODE.VALID),e=this.parent.model,c=b,d=b,Y;if(W.hasSecTextBox()){if(b.alias==="toInput"){Y=this.fromBox.fromInput;}else{if(b.alias==="toPicker"){Y=this.fromBox.fromPicker;}else{if(b.alias==="fromInput"){Y=this.toBox.toInput;}else{if(b.alias==="fromPicker"){Y=this.toBox.toPicker;}}}}c=(b.alias.indexOf("from")===0)?b:Y;d=(b.alias.indexOf("to")===0)?b:Y;W.setMinMaxToInputs(c,d);Y.validate();if(Y.validationStatus.code!==E.STATUSCODE.VALID){V=false;}}if(V){if(W.hasSecTextBox()){var U=c.dynDateValue||c.value,a=d.dynDateValue||d.value;this.unset=J.isEmpty(U)&&J.isEmpty(a);if(!J.isEmpty(U)&&!J.isEmpty(a)){Z[0]={v:U};Z[1]={v:a};this.f=X?B.BETWEEN:B.NOT_BETWEEN;}else{if(!J.isEmpty(U)){if(e.isFromSolrCube&&e.isFromSolrCube(this.srcid)){Z[0]={v:U};Z[1]={v:"*"};this.f=X?B.BETWEEN:B.NOT_BETWEEN;}else{Z[0]={v:U};this.f=X?B.GREATER_EQUAL:B.LESS;}}else{if(!J.isEmpty(a)){if(e.isFromSolrCube&&e.isFromSolrCube(this.srcid)){Z[0]={v:"*"};Z[1]={v:a};this.f=X?B.BETWEEN:B.NOT_BETWEEN;}else{Z[0]={v:a};this.f=X?B.LESS_EQUAL:B.GREATER;}}}}W.setMinMaxToInputs(c,d);}else{Z[0]={v:b.value};this.unset=J.isEmpty(Z[0].v);this.f=B.SEARCH;}this.onchange();if(this.makeSelection){this.makeSelection({selItem:this.domNode});}}},getSummaryText:function K(){var W=this.cs||[],X=this.f;if(this.unset||!W.length||J.isEmpty(W[0].v)&&(W.length<=1||J.isEmpty(W[1].v))){return"";}var V="",U=this.parent.include;switch(X){case B.BETWEEN:case B.NOT_BETWEEN:V=mstrmojo.desc(4804).replace("##",W[0].v).replace("###",W[1].v);break;}if(!U){V=mstrmojo.desc(1099,"Not")+" "+V;}return V;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Model","mstrmojo.Container","mstrmojo.Button","mstrmojo.Label","mstrmojo.DateTextBox","mstrmojo.TextArea","mstrmojo.ui.CheckList","mstrmojo.ui.Pulldown","mstrmojo.ui.MultiSelectPulldown","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo._HasPopup");mstrmojo.requiresDescs(2,3,520,686,687,688,698,699,1050,5688,6013,8956,9163);var H=mstrmojo.desc,I=mstrmojo.array,C=mstrmojo.hash,K=mstrmojo.validation,F=mstrmojo.Button.newWebButton;var J;var E=function(P,N,O){if(!this.hasRendered){return ;}mstrmojo.all[J].model.settings[P]=N;if(O!==false){mstrmojo.all[J].onmodelChange();}};var G=function(O,N){N=N||{};return C.copy(N,{scriptClass:"mstrmojo.ui.CheckList",orientation:N.isVertical===false?"h":"v",multiSelect:!N.isRadio,items:O});};var L=function(P,O,N){return new mstrmojo.Box({alias:N,cssClass:"mstrmojo-SearchSettings-panel "+N,cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",text:P}].concat(O)});};var B=function(N){var O=this;return{scriptClass:"mstrmojo.DateTextBox",alias:N,cssDisplay:"block",cssClass:N,width:120,required:false,calendarToBody:true,calendarZIndex:112,constraints:{trigger:K.TRIGGER.ALL},autoFormat:false,bindings:{value:function(){return O.model.settings[N];}},onfocus:function(){this.parent.parent.dateSubType.set("selectedIndex",1);},getSetting:function(){return{p:this.alias,v:this.value};}};};mstrmojo.mstr.search.SearchSettings=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.mstr.search.SearchSettings",visible:false,markupString:'<div class="mstrmojo-SearchSettings {@cssClass}" style="{@cssText}"><div class="mstrmojo-SearchSettings-container"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},onmodelChange:mstrmojo.emptyFn,init:function M(N){if(this._super){this._super(N);}J=this.id;},postBuildRendering:function A(){var O=this;this.prepareObjectTypes();var N=[];this.addChildren([L(H(8956,"Object type"),{scriptClass:"mstrmojo.ui.MultiSelectPulldown",alias:"objectType",isHostedWithin:true,orientation:"v",multiSelect:true,items:I.map(this.allowedObjectTypesData,function(R,Q){if(I.indexOf(O.model.settings.objectType,R.t)>-1){N[Q]=true;}return{n:R.d,t:R.t};}),selectedIndices:N,allIdx:-1,onselectionChanged:function(){var Q=this.items;E.call(this,this.alias,I.map(C.keyarray(this.selectedIndices),function(R){return Q[R].t;}));},onchange:function(){var Q=this.items;E.call(this,this.alias,I.map(C.keyarray(this.selectedIndices),function(R){return Q[R].t;}));},getPopupWidget:function P(){var Q=this;this.popupWidget.onClose=function(){this.list.selectedIndices=mstrmojo.hash.copy(Q.selectedIndices);this.list.refresh();};return this.popupWidget;}},"objectTypePanel"),L(H(60,"Owner"),mstrmojo.ui.Pulldown.newPulldown([{n:H(698,"Created by any user"),v:1},{n:H(699,"Created only by me"),v:2}],function(Q,R){if(Q.v!==R.v){E.call(this,this.alias,Q.v);}},0,{alias:"ownerType"}),"ownerPanel"),L(H(2052,"Date"),[mstrmojo.ui.Pulldown.newPulldown([{n:mstrmojo.desc(2058,"All"),v:0},{n:mstrmojo.desc(694,"Created"),v:1},{n:mstrmojo.desc(61,"Modified"),v:2}],function(Q,R){if(Q.v!==R.v){E.call(this,"dateType",Q.v===0?1:2,false);E.call(this,this.alias,Q.v,Q.v===0);}},0,{alias:"created",cssClass:"mstrmojo-SearchSettings-date-pulldown"}),mstrmojo.Button.newIconButton(H(5688,"Show dates"),"mstrmjo-SearchSettings-calendar",function(){this.parent.datePopup.open();},{visible:function(){var Q=this.parent.created.selectedIndex!==0;if(Q){this.parent.datePopup.open();}return Q;}},{alias:"calIcon"}),{scriptClass:"mstrmojo.ui.PopupWidget",cssClass:"mstrmojo-SearchSettings-dates-popupWidget",alias:"datePopup",visible:false,children:[{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"dateContainer",cssClass:"mstrmojo-SearchSettings-dates",width:"238px",col1Width:"80px",col2Width:"130px",children:[G([{n:mstrmojo.desc(4049,"Last"),v:1},{n:mstrmojo.desc(294,"Between"),v:2}],{alias:"dateSubType",isRadio:true,bindings:{selectedIndex:function(){return I.find(this.items,"v",O.model.settings.dateSubType);}},postselectionChange:function(){if(this.hasRendered){if(this.selectedIndex===0){this.parent.intervalBox.intervalValue.inputNode.focus();}else{this.parent.intervalBox.startDate.inputNode.focus();}}},getSetting:function(){return{p:this.alias,v:this.items[this.selectedIndex].v};},slot:"col1Node"}),{scriptClass:"mstrmojo.Box",cssDisplay:"inline-block",alias:"intervalBox",children:[{scriptClass:"mstrmojo.TextBox",alias:"intervalValue",cssClass:"intervalValue",cssDisplay:"inline-block",size:1,maxLength:4,bindings:{value:function(){return mstrmojo.all.searchSettings.model.settings.intervalValue;}},onvalueChange:function(){},onfocus:function(){this.parent.parent.dateSubType.set("selectedIndex",0);},getSetting:function(){return{p:this.alias,v:this.value||""};}},mstrmojo.ui.Pulldown.newPulldown([{n:mstrmojo.desc(708,"Hours"),v:1},{n:mstrmojo.desc(707,"Days"),v:2},{n:mstrmojo.desc(714,"Weeks"),v:3},{n:mstrmojo.desc(710,"Months"),v:4},{n:mstrmojo.desc(709,"Years"),v:5}],function(Q,R){if(Q.v!==R.v){}},0,{alias:"intervalUnit",cssClass:"intervalUnit",cssDisplay:"inline-block",getSetting:function(){return{p:this.alias,v:this.items[this.selectedIndex].v};}}),B.call(this,"startDate"),B.call(this,"endDate")],slot:"col2Node"}]},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Buttons",children:[F(mstrmojo.desc(1442,"Ok"),function(){var R=this.parent.parent.dateContainer,Q=R.intervalBox;var S=[R.dateSubType,Q.intervalValue,Q.intervalUnit,Q.startDate,Q.endDate];I.forEach(S,function(T){var U=T.getSetting();mstrmojo.all[J].model.settings[U.p]=U.v;mstrmojo.all[J].onmodelChange();});this.parent.parent.close();},true,{cssDisplay:"inline-block"}),F(mstrmojo.desc(2140,"Cancel"),function(){this.parent.parent.close();},false,{cssDisplay:"inline-block"})]}]}],"datepanel"),L(H(6013,"Description (contains)"),{scriptClass:"mstrmojo.TextArea",alias:"description",rows:1,bindings:{value:function(){return mstrmojo.all.searchSettings.model.settings.description;}},onvalueChange:function(){E.call(this,this.alias,this.value);}},"descriptionPanel")]);if(this._super){this._super();}},prepareObjectTypes:function D(){var P=[],Q=[];this.allowedObjectTypes=this.allowedObjectTypesData.concat([]);I.forEach(this.allowedObjectTypes,function(S,R){P[R]=parseInt(S.t,10);Q[P[R]]=S.d;});if(this.allowedObjectTypes.length===0){this.model.settings.objectType=[];return ;}var N=this.allowedObjectTypes,O=this.model.settings.objectType;I.forEach([].concat(O),function(R){I.removeItems(O,"t",I.find(N,"t",parseInt(R,10))===-1?[R]:null);});if(O.length===0&&!(this.isMiniSearchBox||this.isDesktopSearchBox)){O=I.map(this.allowedObjectTypes,function(R){return R.t;});}this.model.settings.objectType=O;}});mstrmojo.mstr.search.SearchSettings.getLocationPulldown=function(N){var P=[{n:mstrApp.projectAlias||mstrConfig.projectName,v:39},{n:H(2,"Shared Reports"),v:7},{n:H(3,"My Reports"),v:20}],Q=0;if(N.rootFolderType===0){P.push({n:N.rootFolderName||"",v:0});Q=3;}else{Q=I.find(P,"v",N.rootFolderType);}return mstrmojo.ui.Pulldown.newPulldown(P,function O(R,S){if(R.v!==S.v){E.call(this,"rootFolderType",R.v);}},Q,mstrmojo.hash.copy(N,{cssDisplay:"inline-block"}));};mstrmojo.mstr.search.SearchSettings.getSearchTypePulldown=function(N){return mstrmojo.ui.Pulldown.newPulldown([{n:H(686,"Contains"),v:N.qse?16:1},{n:H(520,"Exactly"),v:2},{n:H(687,"Begins With"),v:4},{n:H(688,"Ends with"),v:8}],function O(P,Q){if(P.v!==Q.v){E.call(this,"nameWildcards",P.v);}},0,mstrmojo.hash.copy(N,{cssDisplay:"inline-block",cssClass:"searchType"}));};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.Arr","mstrmojo.AjaxCall","mstrmojo.css","mstrmojo.Calendar","mstrmojo.WidgetDial","mstrmojo.Label","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.registry","mstrmojo.string","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ValidationTextBox","mstrmojo.DateTextBox","mstrmojo.mstr.EnumDataType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType");var r=mstrmojo.array,AH=r.map,J=mstrmojo.Arr,E=mstrmojo.css,U=mstrmojo.dom,V=mstrmojo.hash,AI=mstrmojo.string,A=mstrmojo.registry,T=mstrmojo.expr,O=T.ET,g=mstrmojo.mstr.EnumDataType,k=T.ET2TP,W=T.ET2TGT,AE=T.DTP,D=mstrmojo.meta.TP,P=mstrmojo.meta.STP,AO=mstrmojo.mstr.EnumDSSXMLObjectTypes,AA=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,G=mstrmojo.mstr.EnumDSSConsolidationType;var e="dummy",K={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:e,css:"unselectable",cls:"temp"},p={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:e,css:"unselectable",cls:"temp"},C={did:"idAttribute",v:"idAttribute",n:mstrmojo.desc(518,"Attribute"),t:e,css:"unselectable"},AC={did:"idMetric",v:"idMetric",n:mstrmojo.desc(517,"Metric"),t:e,css:"unselectable"},AB={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:e,css:"unselectable"},v={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:e,css:"unselectable"},B={did:"idWait",v:"idQualification",n:mstrmojo.desc(15008,"Qualify on"),t:e,css:"unselectable"};var AN={};AN[AE.DATE]=1;AN[AE.TIME]=1;AN[AE.TIMESTAMP]=1;var w={};w[O.MQ]={key:"metricFns",def:T.METRIC_FNS};w[O.MC]={key:"metricFns",def:T.METRIC_FNS};w[O.AQ]={key:"formFns",def:T.FORM_FNS};w[O.AL]={key:"formFns",def:T.FORM_FNS};w[O.AC]={key:"formFns",def:T.FORM_FNS};w[O.AE]={key:"elemFns",def:T.ELEM_FNS};var S=[T.STP.PROMPT,T.STP.PROMPT_OBJECTS,T.STP.PROMPT_ELEMENTS,T.STP.PROMPT_EXPRESSION,T.STP.PROMPT_EXPRESSION_DRAFT];function Y(AP){if(AP&&AP.t===AO.Consolidation&&AP.st===AA.ConsolidationManaged){return true;}return false;}function F(AR,AT,AQ){var AS=AR.items,AP=r.indexOf(AS,AT);if((AP===0)&&(AS.length===1)){AQ=mstrmojo.Arr.makeObservable((AQ&&AQ.length)?AQ.concat():[]);AR.set("items",AQ);}else{if(AP>-1){AS.splice(AP,1);}if(AQ&&AQ.length){r.insert(AS,(AP>-1)?AP:AS.length,AQ);}AR.refresh();}}function a(AX,AW){if(this.updating){return ;}var AP=this.multiSelect,AR=this.selectedItem,AU=AX&&AX.added,AT=AX&&AX.removed;AW=AW||this.alias;if(!AP&&AU&&AT&&AU[0]===AT[0]){return ;}if(AR&&AR[D]===e){this.updating=true;if(AP){this.removeSelect([this.selectedIndex]);}else{var AV=AT&&Number(AT[0]);AV=(AV==null)?-1:AV;this.set("selectedIndex",AV);}this.updating=false;}else{var AQ=this.parent.parent.parent.model;if(AP){var AS=this.items;AQ.edit(AW,{added:AU&&r.get(AS,AU),removed:AT&&r.get(AS,AT),itemIdField:this.itemIdField});}else{AQ.edit(AW,AR);}}}function R(AP,AR,AS){if(this.updating){return ;}AS=AS||this.alias;var AQ=AP.model;AQ.edit(AS,AR);}function t(){var AQ=this.parent,AP=((AQ&&AQ.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=AP&&AP[0];}function N(AP){return mstrmojo.mixin(AP,{scriptClass:"mstrmojo.rw.ConditionList",cssClass:"mstrmojo-"+AP.alias,postCreate:t});}function X(){var AQ=this.parent,AP=AQ.parent;AP["invalid"+AQ.cstIndex]=false;}function m(AR,AP,AS){var AQ=AR.cfg;if(AQ){AQ.data=AR;AQ.parent=AS;return A.ref(AQ);}AQ=new mstrmojo.Label({text:AR.n||"&nbsp;",cssClass:"dial-item "+(AR.t?("t"+AR.t):"")});AQ.markupMethods.onselectedChange=function(){E.toggleClass(this.domNode,["selected"],this.selected);};AQ.data=AR;AQ.parent=AS;return AQ;}function z(AP){switch(AP){case g.DataTypeInteger:case g.DataTypeUnsigned:case g.DataTypeDecimal:case g.DataTypeReal:case g.DataTypeDouble:case g.DataTypeFloat:case g.DataTypeCellFormatData:return g.DataTypeNumeric;default:return AP;}}function H(AR,AQ){var AP=AR.model||{},AS=AP.fn;return(AS!=null)&&((AP.et===O.MQ)||(AP.et===O.MC)||(AP.et===O.AQ)||(AP.et===O.AL)||(AP.et===O.AC))&&(T.fnCstCount(AS,AP.fnt)>AQ);}function o(AQ){var AT=AQ&&k[AQ.et],AS=AQ&&AQ.fm&&AQ.fm.dtp,AP=AS&&T.DTP2PROMPT_STP[AS],AR={};AR[AT]=true;if(AP){AR[AP]=true;}return AR;}function AK(AP,AR){var AQ;if(AR){switch(W[AP.et]){case"a":AQ=AR[O.AC];break;case"m":AQ=AR[O.MC];break;default:AQ=false;break;}}else{AQ=true;}return AQ&&T.fn_AC_MC(AP&&AP.fn);}function j(AP){var AS=AP.model,AW=AS&&AS[W[AS.et]]&&AS[W[AS.et]][AP.columnWalk.target.itemIdField||"did"],AR=AS&&AS.fm,AY=AR&&AR.dtp,AQ=AK(AS,AP.ets);if(this.targetsLastMod&&this.targetsLastMod===AP.targetsLastMod&&AW&&AW===this._lastTargetId&&this.lastFmDtp===AY&&this.lastFnTp===AQ){return ;}if(!AQ){this.clearSelect();if(this.items.length!==this.preLen){this.set("items",this.items.slice(0,this.preLen));}}else{var AU=AS.a?[C]:AS.m?[AC]:[],AT=d(AP),AX=AU.concat(AT),AV=this.items.slice(this.preLen);r.forEach(AV.reverse(),function(AZ){this.remove(AZ);},this);this.add(AX,-1);}this._lastTargetId=AW;this.lastFnTp=AQ;this.lastFmDtp=AY;this.targetsLastMod=AP.targetsLastMod;}function d(AP){var AQ=AP.model,AR=o(AQ),AS=AQ[W[AQ.et]];return T.getSortedObjectsByTypeGroup(r.filter(AP.targets,function(AT){return(AT.t!==4||AT.did!==AS.did)&&(AR[AT[D]]||AR[AT[P]]);}));}function Z(AQ,AP){var AR=AQ.model||{},AS=AR.cs,AT=AS&&AS[AP];if(AR.et==O.MC&&AR["c"+(AP+2)]){AT=AR["c"+(AP+2)];}return AT;}function I(AP,AS){var AR=AP.model||{},AQ;switch(AR.et){case O.MC:case O.MQ:AQ=(AS&&AS.dtp)||z(AR.m.dt)||T.METRIC_DTP;if(AQ===AE.BIGDECIMAL){AQ=T.METRIC_DTP;}break;case O.AQ:case O.AC:case O.AE:case O.AL:AQ=AR.fm&&AR.fm.dtp;break;}return AQ||AE.CHAR;}function AM(AQ,AR){if(!AQ){return AQ;}if(AQ.dtp===AE.BIGDECIMAL&&AR===O.MQ){var AP=String(AQ.v);if(AP&&AP.indexOf("#")===-1){return"#"+AP+"#";}else{return AP;}}else{return AQ.v;}}function x(AQ,AP){var AS=AQ.model||{},AT=AS.cs,AU,AR;if(AS.et===O.AL){AR=[];r.forEach(AT,function(AV){AR.push(AV&&AV.v);});AR=AR.join(mstrConfig.listSep);}else{AU=Z(AQ,AP);AR=AM(AU,AS.et);}return AR;}function L(Aj,Ab){Aj.updating=true;var AX=Aj.parent.parent.parent,Ai=H(AX,Ab),Ac,Ad;if(Ai){j.call(Aj,AX);var AS=AX.model||{},Ah=Z(AX,Ab),AY=I(AX,Ah),Aa=x(AX,Ab);var AW=AS.fn,AU=T.fn_List(AW,AS.fnt),Ak=AN[AY],Ae=Ak&&!AU;var AQ=Aj.ctxtBuilder,Ag=AQ&&AQ.itemWidgets,AR=Ak?(Ae?Aj.calIndex:Aj.dtxtIndex):Aj.txtIndex,AV;for(Ac=0,Ad=Aj.preLen;Ac<Ad;Ac++){AV=Ag[Ac];if(Ac==AR){AV.set("dtp",AY);AV.set("isList",AU);var AP=AV.value,AT=AI.isEmpty(AP),Af=AI.isEmpty(Aa);if(!(AT&&Af)&&AP!==Aa){AV.set("value",Aa);}AV.set("visible",true);AV.set("hint",AU?mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"):"");try{if(Aj.alias!=="c1"||Aj.parent.c1Selected){AV.focus&&AV.focus();}}catch(AZ){}if(AW===1||AW===2){AV.constraints.min=0;}if(AV.clearValidation){AV.clearValidation();}}else{AV.set("visible",false);}}if(AX.hasPrompt&&Aj.selectedItem&&Aj.selectedItem.st===T.STP.PROMPT_STRING){AX.invalid0=false;}switch(AS.et){case O.AQ:case O.AL:case O.MQ:if(Ah&&Ah.p){Aj.set("selectedItem",Ah.p);}else{Aj.set("selectedIndex",AR);}break;case O.MC:case O.AC:Aj.set("selectedItem",AS[W[AS.et]+(2+Ab)]);break;}}Aj.updating=false;}function AJ(){var AS=this.parent,AQ=AS.parent.parent.parent,AR=(this.isValid&&this.isValid())||(!this.isValid&&!AI.isEmpty(this.value)),AP=AQ.model;AQ["invalid"+AS.cstIndex]=!AR;if(!this.updating&&AR){this.updating=true;if(AP){AP.edit(AS.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}if(AQ.updateOkBtn){AQ.updateOkBtn();}}function h(AQ){var AP=[{did:660,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP|mstrmojo.validation.TRIGGER.VALUESET},onValid:AJ,onInvalid:AJ,onClearValidation:X,size:6,visible:false}},{did:154,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:AJ,visible:false}},{did:23,cfg:{scriptClass:"mstrmojo.DateTextBox",cssText:"margin-left:9px;",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL-mstrmojo.validation.TRIGGER.ALL.ONBLUR},onValid:AJ,onInvalid:AJ,onClearValidation:X,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(AR){U.stopPropogation(AR.hWin,AR.e);}},visible:false}}];return N(V.copy(AQ,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:m,selectionPolicy:"reselect",items:AP.concat(),txtIndex:0,calIndex:2,dtxtIndex:2,preLen:AP.length,insertUnlistedValuesAt:-1,itemIdField:"did",update:function(){L(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},itemsEffect:undefined,onchange:a}));}function AL(AQ,AP){var AR=AP+T.FN_SEP+AQ;return(AQ!=null)?{did:AR,n:AR}:null;}function Q(AR){var AT=this.selectedItem;AR=r.filter(AR,function(AU){return(!AU.icf);});if(AT){var AQ=r.find(AR,this.itemIdField,AT[this.itemIdField]);if(AQ>-1){AR=AR.concat();AR.splice(AQ,1);}}F(this,p,AR);var AS=this.items,AP=AS.length;if(AP===1){this.singleSelect(0);}this.updateScrollbars&&this.updateScrollbars();this.parent.updateScrollbars();}function n(AR,AQ,AS,AV){AR.updating=true;if(AQ){if(AS!=null){AR.set("items",[]);AR.clearSelect();AR.set("items",AS);}var AU=AR.itemIdField,AT=AR.selectedItem;if((AT&&AT[AU])!=(AV&&AV[AU])){var AP=Math.max(r.indexOf(AH((AS||[]),function(AW){return AW[AU];}),AV&&AV[AU]),0);AR.set("selectedIndex",AP);}}AR.updating=false;}function M(AR,AQ,AS,AV){AR.updating=true;if(AQ){if(AS!=null){AR.set("items",AS);}var AU=AR.itemIdField,AT=AR.getSelectedItem();if((AT&&AT[AU])!=(AV&&AV[AU])){var AP=Math.max(r.indexOf(AH((AS||[]),function(AW){return AW[AU];}),AV&&AV[AU]),0);AR.set("selectedIndex",AP);}}AR.updating=false;}function f(AP){return N(V.copy(AP,{insertUnlistedValuesAt:-1,hasDummyLabel:true,postCreate:function(){t.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var AS=this.parent,AR=this.response;if((AR&&AR.did)!==AS.lastAttrId){return ;}Q.call(this.parent,AR.fms||[]);},onerr:function(){F(this.parent,p,[K]);}});},update:function AQ(){var Ag=this.fmPost,AZ=this,AT=this.parent.parent.parent,AW=AT.model,Ae=AW&&AW["a"+Ag],Ab=!!Ae,AV,Aa,Af,AS=AT.disableElementsBrowsing,AR=Ae&&AS&&AS(Ae),Ad=Y(Ae);if(Ab){switch(AW.et){case O.AQ:case O.AL:Aa=AW.fm;break;case O.AC:Aa=AW["fm"+Ag];break;case O.AE:Aa=AL(AW.fn,1);break;}if(this.lastAttrId!==Ae.did){this.lastAttrId=Ae.did;AV=[];if(this.isFirstFm){if(!AR&&(!Ae.ilk&&(!AT.ets||AT.ets[O.AE]))){if(this.hasDummyLabel){AV.push(AB);}var AY=w[O.AE],Ac=AY&&AY.key,AU=AY.def;AV=AV.concat((Ac&&AT[Ac])||(Ad?r.filter(AU,function(Ah){return Ah.did!=="1,57";}):AU)||[]);r.forEach(AV,function(Ah){Ah.cls="fn";});}if(this.hasDummyLabel){AV.push(mstrApp.isWSStyling?B:v);}}if(Aa&&(AW.et!==O.AE)){AV.push(Aa);}Af=this.ajx;Af.params.attributeId=Ae.did;Af.params.otp=Ae.t||12;AV.push(p);J.makeObservable(AV);}}if(AR&&AW.et===O.AE){Aa=null;}n(this,Ab,AV,Aa);if(Ab&&Af){var AX;if(AT.getAttributeForms){AX=AT.getAttributeForms(Ae.did);}else{if(Ae.fms){AX=Ae.fms;}}if(AX&&AX.length>0){Q.call(this,AX);}else{if(Ae&&Ae.t===AO.Consolidation){Q.call(this,[]);}else{if(Af){if(mstrApp&&mstrApp.isWorkstation){mstrApp.serverRequest(Af.params,{success:function(Ah){if((Ah&&Ah.did)!==AZ.lastAttrId){return ;}Q.call(AZ,Ah.fms||[]);},failure:Af.onerror});}else{if(Af._delayId){window.clearTimeout(Af._delayId);delete Af._delayId;}Af._delayId=window.setTimeout(function(){delete Af._delayId;Af.send();},500);}}}}}}}));}function AG(AP){if(AP&&!V.isEmpty(AP)){var AQ=r.hash(S);V.forEach(AP,function(AS,AR){if(AS){AQ[k[AR]]=true;}});return AQ;}return null;}function l(AP,AQ,AS,AR){AP.updating=true;AP.clearSelect();r.forEach(AQ,function(AT){AT.title=AI.encodeHtmlString(AT.title||AT.n||"");});if(AQ){AP.set("items",AQ);}if(AS&&AS.length){AP.setSelectedItems(AS);}else{if(AR&&AR.length){AP.select(AR);}}AP.updating=false;}function c(AQ,AP,AR,AT,AS){if(AP){l(AQ,AR,AT,AS);}}mstrmojo.rw.ConditionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.rw.ConditionList",allowUnlistedValues:true,itemIdField:"did",getItemProps:function u(AT,AP){var AS=!!this.selectedIndices[AP],AV=AT.n,AR=false,AU=AT.ndetype===G.DssRecursiveDerivedElement;if(AT.t===12){var AQ=r.filter(AT.fs,function(AW){return AW.fgr>0;});if(AQ.length>0){AR=true;}}return V.copy({cls:(AS?mstrmojo._IsList.SELECTED_CLS:"")+" "+(AT.css||"")+" "+(AT.t?("t"+AT.t+((AT.da||AT.um)?"d":"")+(AR?"g":"")+(AT.st?(" st"+AT.st+(AU?" nde4ra":"")):"")):""),n:AV||"&nbsp;"},this._super(AT,AP));},onselectionChange:function AD(AP){this._super(AP);a.call(this,AP);}});mstrmojo.rw.ConditionWalkProviderBase=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.rw.ConditionWalkProviderBase",browseEs:function b(AS,AR,AU){AS.openPopup("eb",{zIndex:AS.parent.zIndex+10,left:Math.round(AU.x)+"px",top:Math.round(AU.y)+"px"});var AQ=AS.eb.browser,AP=AS.model,AT=AP&&AP.a&&AP.a.did;if(!AT){return ;}AQ.set("attributeID",AT);AQ.set("selectedItems",AP.es?V.clone(AP.es):[]);AQ.initBrowser();},browseObjs:function AF(AW,AP,AQ){AW.openPopup("ob",{zIndex:AW.parent.zIndex+10,left:Math.round(AQ.x)+"px",top:Math.round(AQ.y)+"px"});var AR=AW.ob.browser;AR.target=AP;var AS;switch(AP.alias){case"dmy":AS=[T.TP.ATTR,T.TP.DIM];break;case"c0":case"c1":var AU=AW.model,AT=AU&&AU.et,AX=AU&&AU.fm,AV=AX&&AX.dtp||(AU.m?T.DTP.DECIMAL:T.DTP.UNKNOWN);AS=(AT===O.MQ||AT===O.MC)?[T.TP.METRIC,T.DTP2PROMPT_STP[AV]]:[T.TP.ATTR,T.DTP2PROMPT_STP[AV]];break;default:AS=AG(AW.ets);AS=AS?V.keyarray(AS,true):[T.TP.ATTR,T.TP.METRIC,T.STP.REPORT_GRID,T.STP.REPORT_GRAPH,T.STP.REPORT_ENGINE,T.STP.REPORT_TEXT,T.STP.REPORT_DATAMART,T.STP.REPORT_BASE,T.STP.REPORT_GRIDGRAPH,T.STP.REPORT_NONINTERACTIVE,T.STP.FILTER].concat(S);}AS[AS.length]=T.TP.FOLDER;AR.browse({rootFolderType:AU&&(AU.et===O.MQ||AU.et===O.MC)?5:26,folderLinksContextId:33,onSelectCB:[AW,"onOBSelect"],browsableTypes:AS.join(",")});},});var q=mstrmojo.rw.ConditionWalkProviderBase;q.onWalkChange=a;q.replaceItem=F;q.getChildJSON=N;q.walkChildPostCreateFn=t;q.cstJson=h;q.isComparisonAllowed=AK;q.clearInvalid=X;q.updateCst=L;q.widgetItemFn=m;q.shouldShowCst=H;q.getConstant=Z;q.getConstantDataType=I;q.getConstantValue=x;q.isDATE=AN;q.getCstListCompareTgts=d;q.fmJson=f;q.fnItem=AL;q.updateList=n;q.allowedTargetTypes=AG;q.updatePulldown=M;q.onWalkChangeThroughPulldown=R;q.updateListMultiData=l;q.updateListMulti=c;})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.date","mstrmojo.DateTextBox","mstrmojo._IsInputControl");var B=mstrmojo.css,A=mstrmojo.expr.DTP;mstrmojo.CalendarDIC=mstrmojo.declare(mstrmojo.DateTextBox,[mstrmojo._IsInputControl],{scriptClass:"mstrmojo.CalendarDIC",autoFormat:false,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onvalueChange:function(){if(!this.showByDefault){var F=this.calendar.cal,D=mstrmojo.date,E=this.dic.min,C=this.dic.max;this.invalid=mstrmojo.string.trim(this.value||"").length===0||this.validationStatus.code>mstrmojo.validation.STATUSCODE.VALID;if(F.value!==this.value){F.set("value",this.value);}else{if(E&&D.compareDateAndOrTime(E,F.value)>0){this.value=E;}else{if(C&&D.compareDateAndOrTime(F.value,C)>0){this.value=C;}}}}},getInputNode:function(){return this.inputNode;},init:function(C){this._super(C);this.dtp=this.dic.ict?A.TIMESTAMP:A.DATE;},focus:function(){mstrmojo.dom.setCaret(this.inputNode,((this.value&&this.value.length)||0));this.openPopup("calendar");this.adjustCalendarPopup();},adjustCalendarPopup:function(){var F=this.domNode,E=this.calendar.domNode,D=E.scrollWidth,I=mstrmojo.boxmodel.offset(this.openerNode,document.body),H=I.left,G,C=(document.body.offsetWidth-H-D-parseInt(B.getStyleValue(F,"paddingLeft"),10)-parseInt(B.getStyleValue(F,"paddingRight"),10));if(C<0){E.style.left=C+"px";}G=parseInt(I.top,10);if(G+this.inputNode.offsetHeight+E.offsetHeight<=mstrmojo.dom.windowDim().h){E.style.top=this.inputNode.offsetHeight+"px";}else{E.style.top=-E.offsetHeight+"px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.css","mstrmojo.Arr","mstrmojo.expr","mstrmojo.Label","mstrmojo.AjaxCall","mstrmojo.HTMLButton","mstrmojo.Container","mstrmojo._HasPopup","mstrmojo.HBox","mstrmojo.Dial","mstrmojo.WidgetDial","mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.DateTextBox","mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.ElementsBrowser","mstrmojo.ConditionModel","mstrmojo.mstr.EnumNodeDimty");var D=mstrmojo.css,A=mstrmojo.registry,U=mstrmojo.hash,v=mstrmojo.array,F=v.find,H=mstrmojo.Arr,S=mstrmojo.expr,T=mstrmojo.dom,M=S.ET,AC=S.DTP,m=S.DTP2FN_DTP,W=S.ET2TGT,k=S.ET2TP,C=mstrmojo.meta.TP,P=mstrmojo.meta.STP,AA=mstrmojo.string.encodeXMLAttribute,I=mstrmojo.mstr.EnumNodeDimty;var AJ=v.hash([I.NodeDimtyOutputLevel]);var O={};O[M.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};O[M.AL]={target:1,fm:1,fn:1,c0:1};O[M.AE]={target:1,fm:1,es:1};O[M.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};O[M.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};O[M.MC]=O[M.MQ];O["*"]={target:1};var x={};x[M.MQ]={key:"metricFns",def:S.METRIC_FNS};x[M.MC]={key:"metricFns",def:S.METRIC_FNS};x[M.AQ]={key:"formFns",def:S.FORM_FNS};x[M.AL]={key:"formFns",def:S.FORM_FNS};x[M.AC]={key:"formFns",def:S.FORM_FNS};x[M.AE]={key:"elemFns",def:S.ELEM_FNS};var AE={};AE[M.AQ]=mstrmojo.desc(7925,"Select Attribute...");AE[M.AL]=mstrmojo.desc(7926,"Browse...");AE[M.MQ]=mstrmojo.desc(7927,"Select Metric...");AE[M.MC]=mstrmojo.desc(7927,"Select Metric...");AE[M.AC]=mstrmojo.desc(7925,"Select Attribute...");function AG(AO,AQ,AN){var AP=AO[AQ].style;if(mstrmojo.dom.isFF){AP.overflow="hidden";AP.width=AN?"auto":"0px";AP.visibility=AN?"inherit":"hidden";}else{AP.display=AN?"block":"none";}}function u(AR){var AQ=true,AN=AR.model,AO,AP=AN&&S.fnCstCount(AN.fn,AN.fnt);if(!AN){return ;}switch(AN.et){case M.AQ:case M.AL:case M.MQ:for(AO=0;AO<AP;AO++){AQ=AQ&&!AR["invalid"+AO];}break;}AR.okBtn.set("enabled",AQ&&!!AN.completed);}function AH(AT){var AO=AT.model,AW=AO&&AO.et,AU=O[AW]||O["*"],AN=AT.children,AP,AQ=AN.length;for(AP=0;AP<AQ;++AP){var AS=AN[AP];if(!AS.isStep){continue;}var AV=AS.alias,AR=AU[AV];AG(AT,AS.slot,AR);if(AR&&AS&&AS.update){AS.update();}}if(!AU.c1){AG(AT,"btwnNode",false);}if(!AU.dmy){AG(AT,"atNode",false);}u(AT);}function w(){var AO=this.parent,AN=((AO&&AO.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=AN&&AN[0];}var c="dummy",B={did:"idBrowse",v:"idBrowse",n:mstrmojo.desc(6571,"Browse..."),t:c,css:"unselectable link"},J={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:c,css:"unselectable"},q={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:c,css:"unselectable"};function Z(AP){if(this.updating){return ;}var AQ=this.multiSelect,AS=this.selectedItem;if(AS&&AS[C]===c){this.updating=true;if(AQ){this.removeSelect([this.selectedIndex]);}else{var AO=AP&&AP.removed&&Number(AP.removed[0]);AO=(AO==null)?-1:AO;this.set("selectedIndex",AO);}this.updating=false;if(AS===B){this.parent.browse(this);}}else{var AN=this.parent.model;if(AQ){var AR=this.items;AN.edit(this.alias,{added:AP.added&&v.get(AR,AP.added),removed:AP.removed&&v.get(AR,AP.removed),itemIdField:this.itemIdField});}else{AN.edit(this.alias,AS);}}}function E(AP,AR,AO){var AQ=AP.items,AN=v.indexOf(AQ,AR);if((AN===0)&&(AQ.length===1)){AO=mstrmojo.Arr.makeObservable((AO&&AO.length)?AO.concat():[]);AP.set("items",AO);}else{if(AN>-1){AQ.remove(AN,1);}if(AO&&AO.length){AQ.add(AO,(AN>-1)?AN:null);}}}function L(AN){return U.copy(AN,{scriptClass:"mstrmojo.Dial",slot:AN.alias+"Node",isStep:true,cssClass:"mstrmojo-walkstep mstrmojo-"+AN.alias,itemIdField:"did",itemMarkupFunction:function(AP,AO,AQ){var AR=AA(AP.n);return'<div class="dial-item '+AP.css+'" title="'+AR+'">'+AR+"</div>";},allowUnlistedValues:true,insertUnlistedValuesAt:0,onchange:Z,postCreate:w});}function n(AP,AN,AQ){var AO=AP.cfg;if(AO){AO.data=AP;AO.parent=AQ;return A.ref(AO);}AO=new mstrmojo.Label({text:AP.n,cssClass:"dial-item"});AO.markupMethods.onselectedChange=function(){mstrmojo.css.toggleClass(this.domNode,["selected"],this.selected);};AO.data=AP;AO.parent=AQ;return AO;}function AL(AO,AN){var AP=AN+S.FN_SEP+AO;return(AO!=null)?{did:AP,n:AP}:null;}function N(){var AN=this.model;if(AN){if(!AN.attachEventListener){mstrmojo.hash.make(AN,mstrmojo.ConditionModel,{});}AN.attachEventListener("edit",this.id,"onmodeledit");}}function h(AN){return AN.targets?v.filter(AN.targets,function(AO){return AO[C]===S.TP.ATTR;}):[];}function Y(AO,AN){if(AN&&AN.detachEventListener){AN.detachEventListener("edit",AO.id,"onmodeledit");}}function p(AO,AN,AP,AS){AO.updating=true;AG(AO.parent,AO.slot,AN);if(AN){if(AP!=null){AO.clearSelect();AO.set("items",AP);}var AR=AO.itemIdField,AQ=AO.selectedItem;if((AQ&&AQ[AR])!=(AS&&AS[AR])){AO.set("selectedItem",AS);}else{AO.center();}}AO.updating=false;}function l(AN,AO,AQ,AP){AN.updating=true;if(AO!=null){}AN.clearSelect();if(AO){AN.set("items",AO);}if(AQ&&AQ.length){AN.setSelectedItems(AQ);}else{if(AP&&AP.length){AN.select(AP);}else{AN.center();}}AN.updating=false;}function b(AO,AN,AP,AR,AQ){AG(AO.parent,AO.slot,AN);if(AN){l(AO,AP,AR,AQ);}}function G(AP,AO){var AN=AP.model||{},AQ=AN.fn;return(AQ!=null)&&((AN.et===M.MQ)||(AN.et===M.MC)||(AN.et===M.AQ)||(AN.et===M.AL)||(AN.et===M.AC))&&(S.fnCstCount(AQ,AN.fnt)>AO);}var AK={};AK[AC.DATE]=1;AK[AC.TIME]=1;AK[AC.TIMESTAMP]=1;function j(AQ,AP,AS){var AO=[],AN=AQ.length,AR;for(AR=0;AR<AN;AR++){if(F(AP,AS,AQ[AR][AS])<0){AO.push(AQ[AR]);}}return AO;}function AI(AN,AP){var AO;if(AP){switch(W[AN.et]){case"a":AO=AP[M.AC];break;case"m":AO=AP[M.MC];break;default:AO=false;break;}}else{AO=true;}return AO&&S.fn_AC_MC(AN&&AN.fn);}function o(AO){var AR=AO&&k[AO.et],AQ=AO&&AO.fm&&AO.fm.dtp,AN=AQ&&S.DTP2PROMPT_STP[AQ],AP={};AP[AR]=true;if(AN){AP[AN]=true;}return AP;}function g(AT){var AN=this.targetsLastMod,Ae=AT.targetsLastMod,AQ=AT.model,Ad=this._lastTargetId,AO=AQ&&AQ[W[AQ.et]]&&AQ[W[AQ.et]][AT.target.itemIdField],AX=AQ&&AQ.fm,AZ=AX&&AX.dtp,Aa=AI(AQ,AT.ets),AU=false;if(!AN||!Ae||(AN!=Ae)||Ad!==AO){this.targetsLastMod=AT.targetsLastMod;AU=true;}else{if(this.lastFmDtp!==AZ){this.lastFmDtp=AZ;AU=true;}else{if(this.lastFnTp!==Aa){this.lastFnTp=Aa;AU=true;}}}if(AU){if(!Aa){this.clearSelect();if(this.items.length!==this.preLen){this.set("items",this.items.slice(0,this.preLen));}}else{var AV=o(AQ),AR=AT.targets?v.filter(AT.targets,function(Af){return AV[Af[C]]||AV[Af[P]];}):[],AY=this.items.slice(this.preLen),AW=this.itemIdField,Ac=j(AY,AR,AW)||[],AS=j(AR,AY,AW)||[],Ab,AP;for(Ab=0,AP=Ac.length||0;Ab<AP;Ab++){this.remove(Ac[Ab]);}if(AS.length>0){this.add(AS,-1);}}this._lastTargetId=AO;}}function K(Af,AU){Af.updating=true;var AR=Af.parent,Ad=G(AR,AU);AG(Af.parent,Af.slot,Ad);if(Ad){var AX=AR.model||{},AQ=AX.cs,Ac=AQ&&AQ[AU],AT=Ac&&Ac.v,AS;g.call(Af,AR);switch(AX.et){case M.MQ:case M.MC:AS=S.METRIC_DTP;break;case M.AQ:case M.AC:case M.AE:AS=AX.fm&&AX.fm.dtp;break;case M.AL:AS=AX.fm&&AX.fm.dtp;AT=[];for(var AY=0,Aa=AQ&&AQ.length;AY<Aa;AY++){AT.push(AQ[AY].v);}AT=AT.join(mstrConfig.listSep);break;}AS=AS||AC.CHAR;var AV=S.fn_List(AX.fn,AX.fnt),AZ=AK[AS],Ab=AZ&&!AV;var AO=Af.ctxtBuilder,AN=AO&&AO.itemWidgets,Ae=AZ?(Ab?Af.calIndex:Af.dtxtIndex):Af.txtIndex,AW=AN&&AN[Af.bwIndex],AP;for(var AY=0,Aa=Af.preLen-1;AY<Aa;AY++){AP=AN[AY];if(AY==Ae){AP.set("dtp",AS);AP.set("isList",AV);AP.set("value",AT);AP.set("visible",true);if(AP.clearValidation){AP.clearValidation();}}else{AP.set("visible",false);}if(AV){AP.set("tooltip",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep));}else{AP.set("tooltip","");}}if(AW){AW.set("text",AE[AX.et]);AW.set("visible",AR.objectBrowsingEnabled&&AI(AX,AR.ets));}switch(AX.et){case M.AQ:case M.AL:case M.MQ:if(Ac&&Ac.p){Af.set("selectedItem",Ac.p);}else{Af.set("selectedIndex",Ae);}break;case M.MC:case M.AC:Af.set("selectedItem",AX[W[AX.et]+(2+AU)]);break;}}AG(AR,"btwnNode",Ad);Af.refreshScroll();Af.updating=false;}function AF(){var AQ=this.parent,AO=AQ.parent,AP=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),AN=AO.model;AO["invalid"+AQ.cstIndex]=!AP;if(!this.updating&&AP){this.updating=true;if(AN){AN.edit(AQ.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}u(AO);}function X(){var AO=this.parent,AN=AO.parent;AN["invalid"+AO.cstIndex]=false;}function f(AN){return L(U.copy(AN,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:n,selectionPolicy:"reselect",items:[{did:0,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:AF,onInvalid:AF,onClearValidation:X,size:6,cssText:"text-align:right",visible:false}},{did:1,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:AF,visible:false}},{did:2,cfg:{scriptClass:"mstrmojo.DateTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:AF,onInvalid:AF,onClearValidation:X,calendarToBody:true,calConfig:{onmousedown:function(AO){mstrmojo.dom.stopPropogation(AO.hWin,AO.e);}},visible:false}},{did:3,t:c,cfg:{scriptClass:"mstrmojo.Label",cssClass:"dial-item link",text:"Browse...",onclick:function(){this.parent.parent.browse(this.parent);},visible:false}}],txtIndex:0,calIndex:1,dtxtIndex:2,bwIndex:3,preLen:4,insertUnlistedValuesAt:-1,update:function(){K(this,this.cstIndex);}}));}function d(AN){return L(U.copy(AN,{insertUnlistedValuesAt:-1,postCreate:function(){w.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var AV=this.parent,AQ=AV&&AV.parent&&AV.parent.model,AS=this.response;if((AS&&AS.did)!==AV.lastAttrId){return ;}var AR=AS.fms||[],AU=AV.selectedItem;AR=v.filter(AR,function(AW){return(!AW.icf);});if(AU){var AP=v.find(AR,AV.itemIdField,AU[AV.itemIdField]);if(AP>-1){AR=AR.concat();AR.splice(AP,1);}}E(AV,q,AR);var AT=AV.items,AO=AT.length;if(AO===1){AV.singleSelect(0);}},onerr:function(){E(this.parent,q,[J]);}});},update:function(){var AY=this.fmPost,AO=this.parent,AQ=AO.model,AW=AQ&&AQ["a"+AY],AU=!!AW,AP,AT,AZ=AQ&&AQ.tfm,AS=AZ&&AZ.dtp,AX;if(AU){switch(AQ.et){case M.AQ:case M.AL:AT=AQ.fm;break;case M.AC:AT=AQ["fm"+AY];break;case M.AE:AT=AL(AQ.fn,1);break;}if(this.lastAttrId!==AW.did){this.lastAttrId=AW.did;AP=[];if(AQ.et!==M.AC){if(!AW.ilk&&(!AO.ets||AO.ets[M.AE])){var AR=x[M.AE],AV=AR&&AR.key;AP=AP.concat((AV&&AO[AV])||AR.def||[]);}}if(AT&&(AQ.et!==M.AE)){AP.push(AT);}AX=this.ajx;AX.params.attributeId=AW.did;AP.push(q);H.makeObservable(AP);}}p(this,AU,AP,AT);if(AU&&AX){if(AX._delayId){window.clearTimeout(AX._delayId);delete AX._delayId;}AX._delayId=window.setTimeout(function(){delete AX._delayId;AX.send();},500);}}}));}var Q=[S.STP.PROMPT,S.STP.PROMPT_OBJECTS,S.STP.PROMPT_ELEMENTS,S.STP.PROMPT_EXPRESSION,S.STP.PROMPT_EXPRESSION_DRAFT];function AM(AN){if(AN&&!U.isEmpty(AN)){var AO=v.hash(Q);U.forEach(AN,function(AQ,AP){if(AQ){AO[k[AP]]=true;}});return AO;}return null;}function a(AQ,AP,AS){AQ.openPopup("eb",{zIndex:AQ.parent.zIndex+10,left:Math.round(AS.x)+"px",top:Math.round(AS.y)+"px"});var AO=AQ.eb.browser,AN=AQ.model,AR=AN&&AN.a&&AN.a.did;if(!AR){return ;}AO.set("attributeID",AR);AO.set("selectedItems",AN.es?U.clone(AN.es):[]);AO.initBrowser();}function AD(AU,AN,AO){AU.openPopup("ob",{zIndex:AU.parent.zIndex+10,left:Math.round(AO.x)+"px",top:Math.round(AO.y)+"px"});var AP=AU.ob.browser;AP.target=AN;var AQ;switch(AN.alias){case"dmy":AQ=[S.TP.ATTR,S.TP.DIM];break;case"c0":case"c1":var AS=AU.model,AR=AS&&AS.et,AV=AS&&AS.fm,AT=AV&&AV.dtp||(AS.m?S.DTP.DECIMAL:S.DTP.UNKNOWN);AQ=(AR===M.MQ||AR===M.MC)?[S.TP.METRIC,S.DTP2PROMPT_STP[AT]]:[S.TP.ATTR,S.DTP2PROMPT_STP[AT]];break;default:if(AU.browsableTypes){AQ=AU.browsableTypes;}else{AQ=AM(AU.ets);AQ=AQ?U.keyarray(AQ,true):[S.TP.ATTR,S.TP.METRIC,S.STP.REPORT_GRID,S.STP.REPORT_GRAPH,S.STP.REPORT_ENGINE,S.STP.REPORT_TEXT,S.STP.REPORT_DATAMART,S.STP.REPORT_BASE,S.STP.REPORT_GRIDGRAPH,S.STP.REPORT_NONINTERACTIVE,S.STP.FILTER].concat(Q);}}AQ[AQ.length]=S.TP.FOLDER;AP.browse({folderLinksContextId:AS&&(AS.et===M.MQ||AS.et===M.MC)?27:23,onSelectCB:[AU,"onOBSelect"],browsableTypes:AQ.join(",")});}mstrmojo.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionWalk",markupString:'<table id="{@id}" class="mstrmojo-walk mstrmojo-ConditionWalk {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0" mstrAttach:click><tr><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-notNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-targetNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7926,"Browse...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fmNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-esNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7928,"Browse elements...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fnNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-c0Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fm2Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-btwnNode"><div class="mstrmojo-walkstep-wrapper">{@betweenText}</div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-c1Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fm3Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-atNode"><div class="mstrmojo-walkstep-wrapper">{@atText}</div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-dmyNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7925,"Select Attribute...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-okNode"><div class="mstrmojo-walkstep-wrapper"><div></div></td></tr></table>',markupSlots:{notNode:function(){return this.domNode.rows[0].cells[0].firstChild;},targetNode:function(){return this.domNode.rows[0].cells[1].firstChild;},fmNode:function(){return this.domNode.rows[0].cells[2].firstChild;},esNode:function(){return this.domNode.rows[0].cells[3].firstChild;},fnNode:function(){return this.domNode.rows[0].cells[4].firstChild;},c0Node:function(){return this.domNode.rows[0].cells[5].firstChild;},fm2Node:function(){return this.domNode.rows[0].cells[6].firstChild;},btwnNode:function(){return this.domNode.rows[0].cells[7].firstChild;},c1Node:function(){return this.domNode.rows[0].cells[8].firstChild;},fm3Node:function(){return this.domNode.rows[0].cells[9].firstChild;},atNode:function(){return this.domNode.rows[0].cells[10].firstChild;},dmyNode:function(){return this.domNode.rows[0].cells[11].firstChild;},okNode:function(){return this.domNode.rows[0].cells[12].firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?D.DISPLAY_TABLE:"none";},onobjectBrowsingEnabledChange:function(){this.targetNode.firstChild.style.display=this.objectBrowsingEnabled?"":"none";}},okBtn:undefined,updateBrowseElementsParams:function(AO,AN){AO.attributeID=AN.did;},children:[L({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,update:function(){var AR=this.parent,AO=AR.model;if(this.lastModel!==AO){this.lastModel=AO;var AN=AR.targets,AT=AR.ets;if(AT&&AN&&AN.length){var AQ=AM(AR.ets);AN=v.filter(AN,function(AU){return AQ[AU[C]];});}else{AN=AN?AN.concat():[];}var AS=AO&&AO.et,AP=AO&&AO[W[AS]];p(this,true,AN,AP);}}}),d({alias:"fm",fmPost:"",filter:false}),L({alias:"es",itemIdField:"v",insertUnlistedValuesAt:0,makeObservable:true,itemMarkupFunction:function(AO,AN,AP){var AQ=AA(AO.n);return'<div class="dial-checkitem '+AO.css+'" title="'+AQ+'">'+AQ+"</div>";},multiSelect:true,selectionPolicy:"toggle",postCreate:function V(){w.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var AP=this.parent,AN=this.response;if((AN&&AN.did)!==AP.lastAttrId){return ;}var AO=(AN&&AN.es)?AN.es.concat():[];l(AP,AO,AP.parent.model&&AP.parent.model.es,null);},onerr:function(){E(this.parent,q,[J]);}});},update:function R(){var AT=this.parent,AP=AT.model,AS=AP&&AP.a,AU=!!AS&&!AS.ilk,AV,AN,AR,AW;if(AU){if(this.lastAttrId!==AS.did){this.lastAttrId=AS.did;AV=AP.es;var AQ=AV&&AV.length;AV=AQ?AV.concat():[];AV.push(q);if(AQ){AR=[];for(var AO=1;AO<=AQ;AO++){AR[AO]=AO;}}AW=this.ajx;AT.updateBrowseElementsParams(AW.params,AS);}else{AN=AP.es;}}b(this,AU,AV,AN,AR);if(AU&&AW){AW.send();}}}),L({alias:"fn",allowUnlistedValues:false,update:function(){var AN=this.parent,AP=AN.model||{},AT=AP.et,AS,AU=false,AV,AO;switch(AT){case M.AE:AU=!!AP.a;break;case M.AQ:case M.AC:case M.AL:AU=!!(AP.fm&&AP.fm.did);AS=AU?AP.fm.dtp:null;break;case M.MQ:case M.MC:AU=!!AP.m;AS=AU?S.METRIC_DTP:null;break;}if(AU){var AW=m[AS];if((this.lastEt!==AT)||(this.lastFnDtp!==AW)){this.lastEt=AT;this.lastFnDtp=AW;var AR=AT?x[AT]:null,AQ=AR&&AR.key;AV=(AQ&&AN[AQ])||AR.def||[];if(typeof (AV)==="object"){AV=AV[AW]||AV["*"];}}AO=AL(AP.fn,AP.fnt||1);}p(this,AU,AV,AO);}}),f({alias:"c0",cstIndex:0}),d({alias:"fm2",fmPost:"2"}),f({alias:"c1",cstIndex:1}),d({alias:"fm3",fmPost:"3"}),L({alias:"dmy",itemIdField:"did",hideIfEmpty:true,itemMarkupFunction:function(AO,AN,AP){var AQ=AA(AO.n);return'<div class="dial-checkitem '+AO.css+'" title="'+AQ+'">'+AQ+"</div>";},multiSelect:true,selectionPolicy:"toggle",insertUnlistedValuesAt:0,makeObservable:true,postCreate:function(){w.apply(this,[]);this.set("items",h(this.parent));},update:function t(){var AP=this.parent,AT=AP.model,AV=AT.et,AY=AT&&AT.m,AW=!!AY&&(AT.fn!==null)&&((AV===M.MQ)||(AV===M.MC))&&AT.dimtyTypes[I.NodeDimtyOutputLevel],AU,AQ;if(AW){var AR=this.targetsLastMod,AZ=AP.targetsLastMod;if(!AR||!AZ||(AR!=AZ)){this.targetsLastMod=AP.targetsLastMod;AU=h(AP);}AQ=[];var AO=AT.dmy&&AT.dmy.uts;for(var AX=0,AN=(AO&&AO.length)||0;AX<AN;AX++){var AS=AO[AX];AQ.push(AS.utgt?AS.utgt:AS);}}b(this,AW,AU,AQ);AG(AP,"atNode",AW);}}),{alias:"okBtn",slot:"okNode",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1442,"OK"),cssText:"width:66px;min-width:58px;",onclick:function(){var AN=this.parent;if(AN.onOK){AN.onOK();}}},{alias:"cancelBtn",slot:"okNode",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",cssText:"width:66px;min-width:58px;",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var AN=this.parent.parent;if(AN&&AN.close){AN.close();}}}],eb:{scriptClass:"mstrmojo.Editor",cssClass:T.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(AO){var AN=this.parent.opener;AN.updateBrowseElementsParams(AO,AN.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;margin-right:2px;",onclick:function(){var AN=this.parent.parent,AO=AN&&AN.opener;if(AO){AO.onEBSelect();AO.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",cssText:"width:302px;",fishEyeVisible:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true}]},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),model:null,targets:null,ets:null,defaultEt:null,defaultAttrEt:null,metricFns:null,formFns:null,elemFns:null,metricLevels:null,defaultMetricLevel:null,browsableTypes:null,postBuildRendering:function AB(){N.call(this);AH(this);return this._super();},_set_model:function e(AQ,AN){var AO=this.model,AP=(AN!==AO);if(AP){Y(this,AO);AN.dimtyTypes=this.dimtyTypes||AJ;this.model=AN;N.call(this);if(this.hasRendered){AH(this);}}return AP;},onmodeledit:function(AN){switch(AN&&AN.prop){case"es":case"dmy":u(this);return ;}AH(this);},browse:function r(AN){var AP=this.parent.editorNode,AO=function(AR,AT){var AQ=mstrmojo.dom.position(AR,true),AS=mstrmojo.dom.position(AT,true);return{x:AQ.x+AQ.w,y:AS.y};};switch(AN&&AN.alias){case"target":case"dmy":AD(this,AN,AO(AN.alias=="target"?this.targetNode:this.dmyNode,AP));break;case"c0":case"c1":AD(this,AN,AO(AN.alias=="c0"?this.c0Node:this.c1Node,AP));break;case"es":a(this,AN,AO(this.esNode,AP));break;}},onOBSelect:function(AQ){var AO=this.ob.browser,AS=AO.target;this.closePopup();var AR=AS.itemIdField,AP=this.targets||[],AN=v.find(this.targets,AR,AQ[AR]);if(AN===-1){AP.push(AQ);this.targets=AP;this.targetsLastMod=new Date();}AS.setSelectedItems([AQ],AS.multiSelect);AS.refreshScroll();},onEBSelect:function(){var AN=this.eb.browser;var AO=this.es;AO.set("selectedIndices",{});AO.setSelectedItems(AN.selectedItems,false);},onclick:function z(AN){var AO=mstrmojo.dom.eventTarget(AN.hWin,AN.e);if(AO==this.targetNode.firstChild){this.browse(this.target);}else{if(AO==this.esNode.firstChild){this.browse(this.es);}else{if(AO==this.dmyNode.firstChild){this.browse(this.dmy);}}}},objectBrowsingEnabled:true});})();(function(){mstrmojo.requiresCls("mstrmojo.form","mstrmojo.hash","mstrmojo.date","mstrmojo.dom","mstrmojo.expr","mstrmojo.NumberFormat","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.Button","mstrmojo._IsWebApp");var N=mstrmojo.dom,J=mstrmojo.expr,F=J.STP,C=256;var E=mstrmojo.mstr.EnumDSSXMLObjectTypes;var G={ExecuteCubeReport:"web-execute-cube-report",CreateAnalysis:"create-analysis"};function L(Q,O,S,P){var R=mstrApp.sessionManager;if(R&&R.sessionTimedout){R.openLoginEditor({success:function(){if(P!=="_blank"){mstrApp.showWait();}mstrmojo.form.send(Q,O,S,P);}});}else{if(mstrApp.pageName=="homecards"&&Q.exportMode&&Q.exportMode==1){if(!P){P=!!mstrApp.features["export-new-window"]?"_blank":"mstrExportWindow";}}if((P!=="_blank")&&(P!=="mstrExportWindow")){mstrmojo._IsWebApp.showWait({message:mstrmojo.desc(97,"Executing...")});}mstrmojo.form.send(Q,O,S,P);}}function M(O){L(O,null,"post");}mstrmojo.mstr._ObjectActions=mstrmojo.provide("mstrmojo.mstr._ObjectActions",{_mixinName:"mstrmojo.mstr._ObjectActions",execute:function I(c,P){mstrmojo.hash.copy(mstrApp.searchAppFeatures,mstrApp.features);var R=mstrApp.features;var a=mstrApp.name;var U=parseInt(c.tp||c.t,10),Z=parseInt(c.stp||c.st,10),f=c.et&&parseInt(c.et,10),g=c.dssid||c.did,b=c.viewMedia||c.dvm,X=c.visMode||0,d={};switch(U){case E.Filter:switch(Z){case 256:d={evt:3113,filterID:g,src:a+".3113"};break;case 257:this.openCustomGroupEditor(c,P);return ;}break;case E.Metric:this.openMetricEditor(c,P);return ;case E.Folder:d={evt:2001,folderID:g,src:a+".2001"};break;case E.ReportDefinition:if(this.designMode){d={evt:3005,src:a+".3005",reportID:g,reportDesignMode:this.designMode};break;}var e=1;switch(Z){case F.REPORT_CUBE:case F.REPORT_EMMACUBE:if(!mstrApp.features[G.CreateAnalysis]){return ;}var T=!R.IE9Pre||R.IE9Pre&&(R["run-vi-flash"]||R["run-vi-smart"]);if(T){var Q=R.flashvi?"analysis":"HTML5VI";B.convertFromCube({st:Z,type:Q,did:g,folderId:H(c),et:f});}else{mstrmojo.alert(mstrmojo.desc(15474,"Please upgrade your browser or turn off Internet Explorer Compatibility View to work with HTML5 dossiers."));}return ;case F.REPORT_GRID:e=1;break;case F.REPORT_GRAPH:e=2;break;case F.REPORT_GRIDGRAPH:e=3;break;}d={reportID:g,evt:4001,src:a+".4001",visMode:X,reportViewMode:e};break;case E.DocumentDefinition:var W={Reserved:0,ViewStatic:1,ViewInteractive:2,ViewEditable:4,ViewFlash:8,ExportExcel:16,ExportPDF:32,ExportHTML:64,ExportFlash:128,ExportExcelPlainText:256,ExportCSV:512,ExportPlainText:1024,ViewAnalysis:2048,HTML5Dashboard:8192,All:134217727},O={DATA:1,DESIGN:2,PDF:3,EXCEL:4,SAVE:5,DETAILS:6,FLASH_EXPORT:7,FLASH_VIEW:8,FLASH_BINARY_VIEW:9};var Y={};Y[W.ExportPDF]=O.PDF;Y[W.ExportExcel]=O.EXCEL;Y[W.ExportFlash]=O.FLASH_EXPORT;var S={};S[W.ViewStatic]=2048001;S[W.ViewInteractive]=2048001;S[W.ViewEditable]=2048001;S[W.ExportHTML]=3130;S[W.ExportExcel]=3069;S[W.ExportFlash]=3069;S[W.ExportPDF]=3069;S[W.ViewAnalysis]=2048001;S[W.HTML5Dashboard]=3140;var V=2048001;if(Z===14081){if(this.designMode){V=3104;d={evt:V,objectID:g,src:a+"."+V,rwDesignMode:this.designMode,executionMode:2};}else{if(b>8){V=S[b];d={evt:V,documentID:g,src:a+"."+V,};if((b===W.ExportExcel)||(b===W.ExportPDF)||(b===W.ExportHTML)||(b===W.ExportFlash)||(b===W.ExportExcelPlainText)||(b===W.ExportCSV)||(b===W.ExportPlainText)){d.exportMode=1;}if(b===W.HTML5Dashboard){if(N.ISDXIE&&!N.isIE9){mstrmojo.alert(mstrmojo.desc(15474,"Please upgrade your browser or turn off Internet Explorer Compatibility View to work with HTML5 dossiers"));return false;}}else{d.executionMode=Y[b]||0;}}else{V=2048001;d={evt:V,documentID:g,src:a+"."+V,visMode:X||0,currentViewMedia:b||2};if(mstrApp.optimizeFitToPage){d.innerWidth=window.innerWidth;d.innerHeight=window.innerHeight;}}}}else{if(Z===14080){d={evt:32001,documentID:g,src:a+".32001"};}}break;case E.Prompt:d={evt:3119,objectID:g,promptType:c.pt,src:a+".3119"};break;default:return false;}M(d);},openCustomGroupEditor:function(U,W){var R=U.did;var P="mstrCGE",T=mstrmojo.all[P],V=function(X){if(!T){return ;}X.scriptClass="mstrmojo.Obj";T.set("model",mstrmojo.insert(X));T.open();},Q=function(){var X={success:function(Y){if(!Y){mstrmojo.alert("Error retrieving the Custom Group definition!");return ;}V(Y);},failure:function(Y){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,X,{taskId:"getCustomGroup",customGroupId:R,styleName:"MojoCustomGroupStyle"});},S=function(){V({cgp:{agg:1,flat:false,pf:true,rfi:-1,ce:true,isp:true}});},O=R?Q:S;if(!T){T=mstrmojo.insert(mstrmojo.CustomGroupEditor);T.set("noRefresh",true);if(W&&W.zIndex){T.set("zIndex",W.zIndex);}}O();},openMetricEditor:function(Q,O){var P=Q.did;var S="mstrMetricIDE",R=mstrmojo.all[S];if(!R){R=mstrmojo.insert({scriptClass:"mstrmojo.ME.MetricIDE",id:S,metricId:P,noRefresh:(mstrApp.pageName!=="my"&&mstrApp.pageName!=="shared")});if(O&&O.zIndex){R.zIndex=O.zIndex;}}else{R.set("metricId",P);}R.open(null,{action:{cmd:P?"edit":"add"}});},openDataImport:function(O){K(O||{});},createFilter:function(){var O={evt:3113,src:(mstrApp.servletName||mstrApp.name)+".3113",isNew:true};L(O);},createDashboard:function(){var P=!mstrmojo.resolveFeature("flashvi"),O={evt:3187,src:(mstrApp.servletName||mstrApp.name)+".3187"};if(P&&mstrmojo.dom.isIE8){mstrmojo.alert(mstrmojo.desc(15474));return false;}if(P&&mstrApp.currentFolderId){O.parentFolderId=mstrApp.currentFolderId();}L(O);},openSharingEditor:A});var B={isCubeSupportDDA:function(O){return !!(O&&(O.dda===1||O.dda===3));},allowCreateReport:function(O){if(O&&O.ddam===2){mstrmojo.alert(mstrmojo.desc(13384,"The 'Create Report' option is currently not available for Live Connection Datasets."));}return true;},getCubesInfo:function(O,P){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(Q){P(Q);}},{taskId:"getUserDICubeInfo",cubeIds:O.join(",")});},convertFromCube:function(P){var S=this,R=P.type,O=P.did,Q=P.folderId;this.getCubesInfo([O],function(U){var V=U[O],Z=mstrApp.name,Y=(V&&!V.published&&S.isCubeSupportDDA(V)),X=!!Y?128:0,W={};if(V&&V.ddam!==2&&!V.published){if(window.mstrApp&&!mstrApp.features["web-execute-cube-report"]){mstrmojo.alert(mstrmojo.desc(14111,"This cube has not been published")+" "+mstrmojo.desc(12933,"You do not have enough privileges to perform this operation"));}else{mstrmojo.confirm(mstrmojo.desc(14111,"This cube has not been published"),{confirmBtn:{t:mstrmojo.desc(9242,"Republish"),fn:function T(){if(P.st===779&&(P.et&C)>0){K({CubeDesc:"",CubeName:P.executeReport,ReportId:O,folderId:Q,StatusCode:2,isEdit:false,callback:function(){S.convertFromCube(P);}});}else{var a={evt:4001,src:mstrApp.name+".4001",reportID:O,visMode:0,reportViewMode:1};M(a);}}}});}return ;}switch(R){case"document":W={evt:"3104",src:Z+".3104",executionMode:"2",rwDesignMode:"1",objectType:"3",objectID:O,rwCreateFlags:0};if(Q){W.saveFolderId=Q;}break;case"analysis":W={evt:"3104",src:Z+".3104",executionMode:"1",rwDesignMode:"0",objectType:"3",objectID:O,rwCreateFlags:16,rwViewMode:8192};break;case"HTML5VI":W={evt:"3185",src:Z+".3185",executionMode:"1",rwDesignMode:"0",objectType:"3",objectID:O,rwCreateFlags:32};if(Q){W.saveFolderId=Q;}break;case"report":if(!S.allowCreateReport(V)){return ;}W={evt:"3005",src:Z+".3005",srcID:O,srcType:2,reportDesignMode:1};break;}if(typeof W.rwCreateFlags==="number"){W.rwCreateFlags|=X;}M(W);});}};function H(Q){if(Q.fdid){return Q.fdid;}var O=Q.anc&&Q.anc.items||[],P=O[O.length-1];return P&&P.did;}function D(P){var O=function(){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(Q){if(Q){var S=Q.descriptors.length,R;for(R=0;R<S;R++){var T=Q.descriptors[R];mstrmojo.descriptors[T.key]=T.v;}}if(P.callback){P.callback();}},failure:function(){if(P.callback){P.callback();}}},{taskId:"getBundleDescriptors",bundle:P.bundle});};O();}function K(Q){var S=Q.folderId,T=this,R=window.microstrategy;R?R.showWait():mstrmojo._IsWebApp.showWait();var P=function(){var V;if(T.dataImportId){V=mstrmojo.all[T.dataImportId];}if(!V){O();mstrmojo.requiresBundle("mojo-di.js");V=mstrmojo.insert({scriptClass:"mstrmojo.DI.DIContainer"});V.dataImportCallback=function(W){var X=document.getElementById("formRefresh");if(X&&W&&W.length>0){X.submit();}};T.dataImportId=V.id;}if(Q){mstrmojo.hash.copy(Q,V.dataImportParams);if(Q.callback){V.dataImportCallback=function(W){Q.callback(W);};}else{if(Q.isCalledByFlex){V.dataImportCallback=function(X){if(X&&X.length>0){var W;if(navigator.appName.indexOf("Microsoft")!==-1){W=window.MstrFlashFlashViewer;}else{W=document.MstrFlashFlashViewer;}if(W){W.onCloseDI(X);}}};}}}if(S){mstrmojo.hash.copy({cubeSaveFolderId:S},V.dataImportParams);}V.open();R?R.showWait(false):mstrmojo._IsWebApp.hideWait();};var U=function(){var W={success:function(X){if(X){P();}else{if(mstrApp.onSessionExpired){mstrApp.onSessionExpired();}}}},V={taskId:"keepSessionAlive"};mstrmojo.xhr.request("POST",mstrConfig.taskURL,W,V);};var O=function(){var V="data-import.css";if(N.isIE8||N.isIE9){V="data-import-ie.css";}var W=document.createElement("link");W.rel="stylesheet";W.href="../javascript/mojo/css/"+V;W.type="text/css";document.head.appendChild(W);};if(!this.dataImportId){D({bundle:"mojo-di",callback:U});}else{U();}}function A(Q,Y,P,V){var U="sharingEditor",O=mstrApp.oi,T=(Y&&Y.objId)||O.objId,R=(Y&&Y.objType)||O.objType,X=(Y&&Y.mid)||mstrApp.getMsgID&&mstrApp.getMsgID(),W=V&&V.showLinkOnOpen,Z=function(c){var b=mstrmojo.all[U];if(!b){V=V||{};c.acls=V.acls||c.acls;b=mstrmojo.insert(mstrmojo.hash.copy(V,{scriptClass:"mstrmojo.SharingEditor",guestModeEnabled:mstrApp.guestModeEnabled,mid:X,id:U,oi:c,href:Q,isLinkDirty:P,viewMode:Y?Y.viewMode:1,lastState:Y?Y.lastState:0,showWait:function(){mstrApp.showWait();},hideWait:function a(){mstrApp.hideWait();},onClose:function(){this.destroy();}}));}else{b.set("oi",c);b.href=Q;b.mid=X;b.isLinkDirty=P;b.viewMode=Y?Y.viewMode:1;b.lastState=Y?Y.lastState:0;b.showLinkOnOpen=W;}b.open();},S=function(){var a={success:function(b){Z(b.objects[0]);},failure:function(b){mstrmojo.alert(b.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){mstrApp.hideWait();}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,a,{taskId:"getObjectInfo",objectIDs:T,objectTypes:R,includeACL:mstrmojo.resolveFeature("web-use-sharing-editor"),sessionState:mstrApp.sessionState});};mstrApp.showWait();S();}}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.Label","mstrmojo.Button","mstrmojo.Pulldown","mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.tooltip","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash","mstrmojo.mstr.EnumDSSXMLBaseFormType");var e=mstrmojo.array,N=mstrmojo.hash,M=mstrmojo.ME.MetricToken.brackets,B=mstrmojo.css,S=mstrmojo.vi.ui.tabs.Tab.ACTIONS,m=S.DELETE+S.RENAME,n=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,o=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS,O=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC,V=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.string,q="This@ID",X="45C11FA478E745FEA08D781CEA190FE5",U=mstrmojo.mstr.EnumDSSXMLBaseFormType,t=[{n:mstrmojo.desc(959,"Default"),v:U.DssXmlBaseFormReserved},{n:mstrmojo.desc(12276,"String"),v:U.DssXmlBaseFormText},{n:mstrmojo.desc(2052,"Date"),v:U.DssXmlBaseFormDate},{n:mstrmojo.desc(3434,"Number"),v:U.DssXmlBaseFormNumber}],Y=function(){var x="analytical_engine_version.htm",w=mstrApp.showHelpTopic;if(w){w(x,"upgrade");}else{window.open(mstrmojo.upgradeHelpPath()+x,"_blank");}};function H(w){return{n:w,k:w,ftk:[],vs:1,is:"",bft:U.DssXmlBaseFormReserved,bftp:U.DssXmlBaseFormReserved};}function Q(AD,AE,w,AB){var z=AD.forms[AE]||{},AC=AD.forms[w],x=AD.inputBox,AA=AD.statusBox.pulldownBox.pulldown;if(AE!==w){z.vs=AD.vStatus;z.is=AD.iStatus;z.bft=AD.formType||AA.getSelectedItem().v;z.bftp=AD.formType||AA.getSelectedItem().v;z.ftk=x.items;AD.set("vStatus",n.UNKNOWN);}AD.set("vStatus",AC.vs);AD.set("iStatus",AC.is);AD.updateInputBoxItems({items:AC.ftk});if(AD.curFormIdx!==w){AD.curFormIdx=w;AD.tabstrip.setSelectedTab(AC.k);}AA.set("selectedIndex",e.find(AA.items,"v",AC.bft));AD.raiseEvent({name:"tabSwitch",tks:AC.ftk,vs:AC.vs,is:AC.is,bft:AC.bft,bftp:AC.bftp,oidx:AE,nidx:w,toNewTab:AB});}function P(x){var w=x.forms[x.curFormIdx];if(w){w.ftk=x.inputBox.items;w.vs=x.vStatus;w.is=x.iStatus;}}var l=0;function b(w){l=Math.max(w.length-1,l);}function a(){l=0;}function r(w){var x="DESC"+(l?" "+l:"");l++;if(e.find(w,"n",x)>=0){return r(w);}return x;}function J(AA){var z={v:M(AA.n),oi:AA,isNew:true},x,w;if(AA.t===12){x=e.filter(AA.fs,function(AB){return AB.obf||AA.da;}).length;if(x===1){w=AA.fs[0];z=N.copy({v:M(AA.n)+"@"+M(w.fnm),ift:true,exv:w.fid,extp:8},z);}else{z=N.copy({v:M(AA.n)+"@",ift:true},z);}}return z;}function E(x,w){x.set("enabled",!w);var z="mstrmojo-InlineWaitIcon";if(x.iconClass){x.set("iconClass",x.iconClass.replace(new RegExp(z),"")+" "+(w?z:""));}else{mstrmojo.css.toggleClass(x.domNode,z,w);}}function L(w){return w.tp===33||w.tp===37;}function F(w){return w.tp===-1;}var Z=function(AD){var AB=AD.items,x=AB.length,AA,AC,z=[],w="";z.push({v:"!",tp:33,lv:4,sta:2});for(AA=0;AA<x;AA++){AC=AB[AA];if((AA===0&&L(AC))||F(AC)){continue;}if(AC.isNew&&!AC.oi){w+=AC.v;}else{if(!D.isEmpty(w)){z.push({v:w,tp:2,lv:1});w="";}if(AC.v&&AC.v.indexOf(q)>=0){AC.v=AC.v.replace("["+q+"]",q);AC.exv=X;AC.extp=8;delete AC.oi;}z.push(AC);}}if(!D.isEmpty(w)){z.push({v:w,tp:2,lv:1});w="";}z.push({v:"",tp:-1,lv:4,sta:2});return{items:z};},f=function(z){var w=z.items||[],x=w[w.length-1];if(x&&x.tp===-1){w.pop();}if(w[0]&&L(w[0])){w.splice(0,1);}e.forEach(w,function(AA){if(AA.v&&AA.v.indexOf(q)>=0){N.copy({extp:8,exv:X,oi:{n:"This",did:"This",t:12}},AA);}});},d=function(w){if(!w){return n.VALID;}return{"-2147214845":n.ERROR,"-2147214846":n.AMBIGUITY}[w]||n.ERROR;},T=function(z){z=Z(z);var x={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},w={getArrItemName:function(){return"tkn";},isSerializable:function(AA){return(x[AA])?true:false;}};return D.json2xml("tknstrm",z,w);},G=function(z,AC,AB,x){var AA=T(AC),AD=function(AE){if(AE&&AE.tks){var AF=AE.tks;f(AF);AF.vs=d(AF.rjec);AF.tokenXML=AA;if(x){x(AF);}}},w=function(AE){mstrmojo.alert(AE.message||AE.getResponseHeader&&AE.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:AA,localSymbolFolderXML:"",metricXML:"",metricId:z||"",isNew:true,objectType:12,isIDForm:AB,msgID:mstrApp.getMsgID()},{success:AD,failure:w});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function W(){if(this._super){this._super();}var w=this,x=w.lbl;x.editOnDoubleClick=this.editable;x.onTextEditComplete=function(AA,z){if(w.validate(x.text)){w.titleEdited(x.text,z);}};},onclick:function k(w){var x=mstrmojo.dom.eventTarget(w.hWin,w.e);if(x===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(w){var x=!/[\[\]\"\\]/g.test(w);if(!x){this.lbl.set("isEditing",true);}this.set("valid",x);return x;},showErrTooltip:function v(AB,z){var w=mstrmojo.dom.position(this.domNode),x=this,AA=x.errTooltip;if(!AA){x.errTooltip=AA=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(AA);}AA.set("top",w.y+w.h+2);AA.set("left",w.x+w.w/2-z);AA.set("content",'<div class="content"><span>'+AB+"</span></div>");AA.open();window.setTimeout(function(){AA.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function j(AA,AB,AC){var z=e.find(AB,"k",AC.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:AC.n,draggable:false,editable:z!==0,cssClass:"mstrmojo-AEB-Tab "+(z===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return m;},tabSelected:function(){Q(AA,AA.curFormIdx,z);},titleEdited:function x(AE,AD){if(AE!==AD){if(e.find(AA.forms,"n",AE)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}else{var AF=AA.forms[z];AF.n=AE;AA.set("dirty",true);}}},tabDeleted:function w(){var AD=AA.forms.length,AG=(AA.curFormIdx===AD-1)?0:AA.curFormIdx,AE=AA.forms.slice(0),AF=AE[z];if(AF&&AF.did){AA.delForms.push({n:AF.n,did:AF.did});}AE.splice(z,1);AA.curFormIdx=AG;AA.set("forms",AE);Q(AA,-1,AG);AA.set("dirty",true);}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-AEBox-status {@statusCssClass}"></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var x=this.vStatus,AC=(x===n.VALID),AA=(x===n.UNKNOWN||x===n.VALIDATING),z=this.statusBox.infoBox;this.validateBtn.set("visible",AA);z.set("visible",!AA);if(!AA){z.infoLabel.set("text",AC?mstrmojo.desc(11655,"Valid formula."):mstrmojo.desc(15953,"Validation failed."));var AB=o[x],w=z.infoIcon.domNode;if(!B.hasClass(AB)){B.removeClass(w,[o[n.VALID],o[n.ERROR],o[n.AMBIGUITY]]);B.addClass(w,AB);}}},oniStatusChange:function(){var z=this.vStatus,w=(z===n.ERROR||z===n.AMBIGUITY),x=this.statusBox.infoBox.infoIcon;x.title=w?(this.getStatusDesc&&this.getStatusDesc(z))||O[z]+" "+this.iStatus:"";}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function p(AA){var AB=this,AD=function(){AB.validateCurrentForm();},z=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function x(AG,AH,AF){return N.copy(j(AB,AG,AH),AF);},addTab:function AE(){var AH=AB.forms,AF=AH.length,AI=r(AH),AG=AH.slice(0);AG.push(H(AI));AB.set("forms",AG);Q(AB,AB.curFormIdx,AF,true);AB.set("dirty",true);},clear:function w(){e.forEach(this.children,function(AF){AF.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(2827,"Clear"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll hoverLink",onclick:function(){AB.inputBox.clearTokens([]);AB.inputBox.raiseChangeEvent({type:"clear"});}},{scriptClass:"mstrmojo.Box",alias:"statusBox",slot:"statusNode",cssClass:"statusBox",children:[{scriptClass:"mstrmojo.Box",alias:"pulldownBox",cssClass:"pulldownBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-AEBox-pulldownLabel AEBox-item",text:mstrmojo.desc(9918,"Data Type")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"pulldown",cssClass:"mstrmojo-AEBox-pulldown AEBox-item",selectedIndex:0,items:t,onitemSelected:function(AI){var AF=AB.curFormIdx,AG=AB.forms,AH=AG&&AG.length>AF&&AG[AF];if(AH){if(AH.bft!==AI.v){AH.bft=AH.bftp=AI.v;AB.set("dirty",true);}}}}]},{scriptClass:"mstrmojo.Box",cssClass:"helpIcon",cssDisplay:"inline-block",richTooltip:{cssClass:"vi-regular vi-tooltip-A A-center AE-tooltip",posType:mstrmojo.tooltip.POS_TOPCENTER,enableHover:true},useRichTooltip:true,tooltipCloseDelay:500,updateTooltipConfig:function AC(){var AG=this.richTooltip,AF=mstrmojo.dom.position(this.domNode);AG.left=AF.x+AF.w-8;AG.top=AF.y+28;AG.content=mstrmojo.desc(16313,"Data Type options for derived attribute forms are only available for data engine version 11.1 and later.");AG.content+="<br /><div class='help-link-label' onclick='mstrmojo.ME.AttributeEditBox.AEHelpFn()'>"+mstrmojo.desc(9849,"Learn More")+"</div>";}},{scriptClass:"mstrmojo.Box",alias:"infoBox",cssClass:"infoBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Button",alias:"infoIcon",cssClass:"mstrmojo-AEBox-infoIcon AEBox-item",title:"",tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var AF=mstrmojo.dom.position(this.domNode);this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(AF.y+26,0),left:Math.max(AF.x+10,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title};}},{scriptClass:"mstrmojo.Label",alias:"infoLabel",cssClass:"mstrmojo-AEBox-infoLabel AEBox-item"}]}]}];this.validateFunc=AD;AB.children=z.concat(this.children);this._super(AA);},item2textCss:function K(w){return this._super(w)||{21:"afm"}[w.t]||"";},onformsChange:function c(){var w=this.forms,x=w[this.curFormIdx].k;e.forEach(w,function(z){f({items:z.ftk});});this.tabstrip.setTabs(w,x);b(w);},selectFormTab:function A(w){Q(this,this.curFormIdx,w);},postBuildRendering:function W(){if(this._super){this._super();}this.clear();var w=this;this.inputBox.ondrop=function(AB){if(!AB.src.data||!AB.src.data.item){return ;}var AA=w.inputBox,AD=AA.ctxtBuilder.itemWidgets,AE=N.copyProps(["did","n","t","fs"],AB.src.data.item),AG=J(AE),x,AF,z;AB.src.data=AG;mstrmojo.ListBase2.prototype.ondrop.call(this,AB);var AC=function(AH){return AH.t===V.Function&&!(!isNaN(AH.fdid)&&AH.fdid<0);};if(AC(AG.oi)){this.insertParenthesisTokens();}if(w.ontokensModify){w.ontokensModify();}x=this.selectedIndices;if(AE.t===12&&AG.ift&&!AG.exv){for(AF in x){z=AD[AF];if(z){AA.startTokenSuggestion(z);}}}AA.clearSelect(true);B.removeClass(AA.domNode,"unselectable");};},clear:function h(){this.curFormIdx=0;this.delForms=[];this.attrid=null;a();this.set("forms",[H("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",n.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},validateCurrentForm:function C(x){var z=this,AA=this.validateBtn,w=function(AB){E(AA,false);z.set("vStatus",AB.vs);z.set("iStatus",AB.rjed||"");z.updateInputBoxItems({items:AB.items});z.statusNode.style.display="block";z.handleValidation(AB);if(x){x(AB.items,AB.vs===n.VALID);}};z.set("vStatus",n.VALIDATING);E(AA,true);G(this.attrid,{items:this.inputBox.items},z.curFormIdx===0,w);},validateAllForms:function u(z){var AA=this,x=AA.forms,w=0,AB=function(AE){var AD=(w===0);if(AE){var AC=x[w-1];AC.ftk=AE.items;AC.vs=AE.vs;AC.is=AE.rjed||"";AC.tokenXML=T({items:AE.items});if(AE.vs!==n.VALID){AA.selectFormTab(w-1);AA.handleValidation(AE);if(z){z(null,false);}return ;}}if(w===x.length){if(z){z(x,true);}return ;}G(AA.attrid,{items:x[w++].ftk},AD,AB);};P(AA);AB();},continueValidataion:function R(){this.validateCurrentForm();},getStatusDesc:function g(w){return{0:mstrmojo.desc(11655,"Valid Formula.")}[w];},onObjectInsert:function I(AA){var AB=this.inputBox,z=J(AA),w=AB.insertTokens([z]),x;if(AA.t===12&&z.ift&&!z.exv){x=AB.ctxtBuilder.itemWidgets[w];if(x){AB.startTokenSuggestion(x);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=f;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=Z;mstrmojo.ME.AttributeEditBox.mapErrorCode=d;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=T;mstrmojo.ME.AttributeEditBox.validateSyntax=G;mstrmojo.ME.AttributeEditBox.prepareInsertToken=J;mstrmojo.ME.AttributeEditBox.AEHelpFn=Y;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.Pulldown","mstrmojo.string","mstrmojo.ui.ButtonBar","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.NumGroupStepperContentProvider","mstrmojo._FormatDefinition","mstrmojo.models.FormatModel");var C=mstrmojo.string,H=mstrmojo._FormatDefinition,U=mstrmojo.models.FormatModel,L=U.ENUM_PROPERTY_NAMES,K=1,G=2,P=4,F=8,J=16;var R;var M;var I={bold:L.FONT_WEIGHT,italic:L.FONT_STYLE,underline:L.UNDERLINE,strikeout:L.LINE_THROUGH};function D(V){return(V&J)>0;}function S(W){var a=L.FONT_FAMILY,V=W&&(W[a]||U.getFormatBlockValue(W,a)),Y=this.hcgControls.fontFamily,X=this.getFontFamilyItems();if(V===-1){var Z=Y&&Y.list;if(!Z){return ;}Z.clearSelect();delete Y.selectedIndex;if(Y.hasRendered){Y.refresh();}}else{if(X){Y.set("selectedIndex",Math.max(X.map(function(b){return b.n;}).indexOf(V)));}}}function Q(V){var W=[],X=function(a,b,Y){var Z=V[a];if(Z===undefined){Z=U.getFormatBlockValue(V,a);}if(Z){W.push(Y);}};X(L.FONT_WEIGHT,"bold",0);X(L.FONT_STYLE,"italic",1);X(L.UNDERLINE,"underline",2);X(L.LINE_THROUGH,"line-through",3);this.hcgControls.fontStyle.select(W);}function N(V){var b=this.hcgControls,Y=L.FONT_SIZE,W=L.COLOR,a=V[Y]||U.getFormatBlockValue(V,Y),X=b.fontSize;var Z=V[W];if(typeof Z==="undefined"||Z===null){Z=U.getFormatBlockValue(V,W);}if(typeof Z==="undefined"||Z===null){Z="";}if(D(this.visibleControls)){if(a.length){X.provider.set("curValGroup",a);}}else{if(a===-1){X.list.clearSelect();X.selectedValue="";X.updatePreview();}else{X.set("selectedValue",a?(parseInt(a,10)).toString():X.items[0].n);}}b.fontColor.set("selectedValue",Z===""?"conflict":U.decodeValue(L.COLOR,Z));}function O(){if(R&&M){return ;}R=H.SizesInVI.map(function(V){return{idx:parseInt(V.n,10),n:V.n};});M=mstrmojo._FormatDefinition.Families.slice(1).map(function(V){return{n:V.n,id:V.n,preview:!V.symbolic};});}mstrmojo.ui.editors.controls._HasCharacterGroup=mstrmojo.provide("mstrmojo.ui.editors.controls._HasCharacterGroup",{_mixinName:"mstrmojo.ui.editors.controls._HasCharacterGroup",visibleControls:K+G+P,showNoFillInColor:true,hcgControls:null,getFontFamilyItems:function A(){return M;},getFontStyleItems:function T(){return[{n:mstrmojo.desc(2718,"Bold"),id:"b",css:"bold"},{n:mstrmojo.desc(2719,"Italic"),id:"i",css:"italic"},{n:mstrmojo.desc(2720,"Underline"),id:"u",css:"underline"},{n:mstrmojo.desc(3062,"Strikeout"),id:"s",css:"strikeout"}];},getHCGControls:function E(Y){O();var W=this.hcgControls={},V=this.visibleControls;if((V&K)>0){W.fontFamily=mstrmojo.ui.Pulldown.newPulldown(this.getFontFamilyItems(),function(a,b){Y(L.FONT_FAMILY,a.id,b&&b.id);},0,{isHostedWithin:false,scrollNodeMaxHeight:350,getPopupListConfig:function X(){var a=mstrmojo.ui.Pulldown.prototype.getPopupListConfig.call(this);a.getItemProps=function b(e,c){var d=mstrmojo._IsList.getItemProps.call(this,e,c);d.style=e.preview?"font-family:'"+C.encodeHtmlString(e.n,true)+"';":"";return d;};return a;}});}if((V&G)>0||(V&F)>0){var Z=W.fontStyle=new mstrmojo.ui.ButtonBar({hasSpacing:true,multiSelect:true,items:this.getFontStyleItems(),postselectionChange:function(a){var c=a.added,d=this.items[c?c[0]:a.removed[0]],b=!!c;if(d){Y(I[d.css],b,!b);}}});if((V&F)>0){Z.items.pop();}}if((V&P)>0){W.fontSize=D(V)?new mstrmojo.ui.editors.controls.Stepper({provider:new mstrmojo.NumGroupStepperContentProvider({item:{interval:1},curValGroup:[],min:Math.min.apply(Math,R.map(function(a){return a.idx;})),max:Math.max.apply(Math,R.map(function(a){return a.idx;})),container:this,onTraverse:function(){var a=this.container.fontSize;if(a._sync){return ;}this.container.raiseFormatValueChange(L.FONT_SIZE,a.provider.getValGroup());},oncurValGroupChange:function(){var a=this.container.fontSize;if(a.textNode){a.updateDisplayText();}}})}):new mstrmojo.ui.editors.controls.ComboBox({selectedValue:"10",items:R,isHostedWithin:false,validateTextInput:function(a){return(/^[0-9]+(pt)?$/.test(a));},updateSelection:function(){this.set("selectedValue",parseInt(this.txtLabel.value,10).toString());},postselectedValueChange:function(a){Y(L.FONT_SIZE,parseInt(a.value,10)+"pt",parseInt(a.valueWas,10)+"pt");}});W.fontColor=new mstrmojo.ui.editors.controls.ColorPickerButton({showGradient:false,showNoFill:this.showNoFillInColor,selectedValue:"#000000",postselectedValueChange:function(a){Y(L.COLOR,a.value,a.valueWas);}});}return W;},setFormatSource:function B(V){var W=this;this.syncControls(function(){var X=this.visibleControls;if((X&K)>0){S.call(W,V);}if((X&G)>0||(X&F)>0){Q.call(W,V);}if((X&P)>0){N.call(W,V);}});}});mstrmojo.ui.editors.controls._HasCharacterGroup.CTRL_FLAGS={FONT_FAMILY:K,FONT_STYLE:G,FONT_SIZE_AND_COLOR:P,FONT_STYLE_NO_STRIKEOUT:F,FONT_SIZE_USE_STEPPER:J};mstrmojo.ui.editors.controls._HasCharacterGroup.ControlsType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.Label","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton","mstrmojo.color","mstrmojo.hash","mstrmojo.models.FormatModel");var N=mstrmojo.color,K="fillColor",C="border",B=1,I=2,D=mstrmojo.models.FormatModel,H=D.ENUM_PROPERTY_NAMES,E=H.BACKGROUND_COLOR,A={all:{c:H.BORDER_COLOR,s:H.BORDER_STYLE},top:{c:H.BORDER_TOP_COLOR,s:H.BORDER_TOP_STYLE},right:{c:H.BORDER_RIGHT_COLOR,s:H.BORDER_RIGHT_STYLE},bottom:{c:H.BORDER_BOTTOM_COLOR,s:H.BORDER_BOTTOM_STYLE},left:{c:H.BORDER_LEFT_COLOR,s:H.BORDER_LEFT_STYLE}};function G(Q,O){O.forEach(function(S,R){S.slot="col"+(R+1)+"Node";});var P=this.secondColumnWidth;return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:Q,col1Width:(100-P)+"%",col2Width:P+"%",children:O};}function J(Q,O,P){return mstrmojo.hash.copy(P,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",showGradient:!!O,postselectedValueChange:function(R){this.parent.parent.raiseFormatValueChange(Q,R.value,R.valueWas);}});}function F(R){var Q="transparent",O="none",P;if(R){P=R.indexOf("#");if(P===-1){P=R.indexOf(Q);}}if(!isNaN(P)&&P>-1){O=R.substr(0,P-1);Q=N.fixFullHexValue(R.substr(P));}else{O=R;}if(O.indexOf("none")>-1){O="none";}return{s:O,c:Q};}mstrmojo.ui.editors.controls.ContainerGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.ContainerGroup",borderTitle:mstrmojo.desc(13631,"Outer border"),fillColorTitle:mstrmojo.desc(7993,"Fill color"),showThickBorderStyle:true,showBackgroundNoFill:true,showBackgroundGradient:false,showBorderNoFill:true,visibleControls:B+I,targetBorder:"all",secondColumnWidth:60,init:function L(R){this._super(R);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditContainer");var Q=[],P=this.visibleControls,O=A[this.targetBorder];if((P&B)>0){Q.push(G.call(this,K,[{scriptClass:"mstrmojo.Label",text:this.fillColorTitle},J(E,this.showBackgroundGradient,{showNoFill:this.showBackgroundNoFill})]));}if((P&I)>0){Q.push(new mstrmojo.Label({text:this.borderTitle}));Q.push(G.call(this,C,[{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:this.showThickBorderStyle,postselectedValueChange:function(S){var T=this.parent.parent;T.raiseFormatValueChange(O.s,S.value,S.valueWas);T[C].getControl(2).set("enabled",S.value!=="none");}},J(O.c,false,{showNoFill:this.showBorderNoFill})]));}this.addChildren(Q);},setFormatSource:function M(P){var O=this[K],S=this[C],R=this.targetBorder,Q=A[R];if(R==="all"){Q=A.top;}this.syncControls(function(){if(O){var V=D.decodeGradientValue(D.getGradientValues(P)),Y;if(!V){if(P[H.FILL_STYLE]===1){Y="transparent";}else{var U=P[E];if(typeof U==="undefined"||U===null){U=P["background-color"];}if(typeof U==="undefined"||U===null){U=-1;}Y=D.decodeValue(E,U);}}O.getControl(2).set("selectedValue",V||Y);}if(S){var W=P.border;if(!W){if(typeof (P.borderStyle)!=="undefined"&&P.borderStyle!==null){W=typeof (P.borderStyle)==="string"?P.borderStyle:D.decodeValue("borderStyle",P.borderStyle);}else{W=D.decodeValue(Q.s,P[Q.s]);}if(typeof P.borderColor!=="undefined"&&P.borderColor!==null){W+=" "+D.decodeValue("borderColor",P.borderColor);}else{if(typeof P[Q.c]!=="undefined"&&P[Q.c]!==null){W+=" "+D.decodeValue(Q.c,P[Q.c]);}else{W+=" "+D.decodeValue(Q.c,-1);}}}var X=F(W),T=S.getControl(2);S.getControl(1).set("selectedValue",X.s);T.set("enabled",X.s!=="none");T.set("selectedValue",X.c);}});}});mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS={FILL_COLOR:B,BORDER:I};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasMarkup","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.dom","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.css");var E=mstrmojo.css,F=mstrmojo.dom;mstrmojo.threshold.ColorBand=mstrmojo.declare(mstrmojo.ui.editors.controls.ColorPickerButton,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ColorBand",hovered:false,selected:false,index:undefined,showGradient:false,showNoFill:false,markupString:'<div class = "color-band mstrmojo-ui-PreviewButton {@cssClass}" id="{@id}" style="{@cssText}" mstrAttach:click,keyup,contextmenu,mouseover,mouseout><div class="host mstrmojo-ui-PreviewButton"></div></div>',markupSlots:{previewNode:function(){return this.domNode;},btnNode:function(){return this.domNode;},clickableNode:function(){return this.domNode;},widgetHostNode:function(){return this.domNode.lastChild;}},select:function(){this.set("selected",true);},unselect:function(){this.set("selected",false);},onhoveredChange:function C(I){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onBandHovered(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onBandUnhovered(this.index);}},onselectedChange:function B(I){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onBandSelected(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onBandUnselected(this.index);}this.parent.onBandUnhovered(this.index);},onmouseover:function H(){this.set("hovered",true);},onmouseout:function D(){this.set("hovered",false);},oncontextmenu:function G(I){F.preventDefault(window,I.e);var K=this,J=K.parent.parent;var L=new mstrmojo.ui.menus.MenuConfig({position:F.getMousePosition(I.e,I.hWin),isHostedWithin:false});L.addMenuItem(mstrmojo.desc(7604,"Change Color"),"",function(){K.onclick(I);});L.addMenuItem(mstrmojo.desc(13386,"Add Color Band"),"",function(){var N=J.markers;var O=F.position(N.containerNode),M=I.e.clientX-O.x;N.addMarker(M);});L.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){K.unselect();J.bands.remove(K.index);J.update();});this.openPopup(L.newInstance());},postselectedValueChange:function(J){var K=this.parent.parent,I=K.parent,M=K.getPalette().concat();if(J){var L=J.value;if(K.getReversedValue()){M.reverse();}this.backgroundColor=M[this.index]=L;I.switchToCustomScheme(undefined,M);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.threshold.ColorBand,{onwidthChange:mstrmojo.Widget.widthMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onbackgroundColorChange:function A(){this.selectedValue=this.backgroundColor;this.updatePreview();this.colorPicker.set("color",this.selectedValue);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","Widget","num","css","Container","Box","Label","EditableLabel","Image");mstrmojo.requiresClsP("mstrmojo.threshold","ColorBand","ImageBand","MarkersNode","ColorMarker","ThresholdModel");var L=mstrmojo.dom,H=mstrmojo.num,B=mstrmojo.css,b=mstrmojo.array,N=mstrmojo.hash,r=["bands","markers"];var A=0,u=1;var Z=mstrmojo.threshold.ThresholdModel,V=Z.SLIDER_MODE,U=Z.BASED_ON_TYPES,C=function(x,w){return x-w;},e=function(x,w){return w-x;},F=5;function P(w){var x;if(w===r[A]){x=this.sliderMode===V.IMAGE_BASED?new mstrmojo.threshold.ImageBand():new mstrmojo.threshold.ColorBand();}else{x=new mstrmojo.threshold.ColorMarker();}this[w].addChildren([x]);}function f(AC,AE,AF,AA){var x=AC.length-1,AD=AA?0:1,z=AA?x-1:x-2;for(var AB=AD;AB<=z;AB++){if(AB===AD&&AC[AB]<=0){AC[AB]=AE;}else{var w=AC[AB]-AC[AB-1];AC[AB]+=(w<AE)?(AE-w):0;AC[AB]=AC[AB]>=AF?(AF-AE):AC[AB];}}for(var AB=z;AB>AD;AB--){if(AB===z&&AC[z]>=AF){AC[AB]=AF-AE;}else{var w=Math.abs(AC[AB+1]-AC[AB]);AC[AB]-=(w<AE)?(AE-w):0;}}AC.sort(C);}function S(AA){var AB=this[r[AA]],AC=AB.children,x=AC?AC.length:0,AL=this.getComp().sort(C),AK=this.getPalette(),z=this.width,AN=AA?AL.length-1:AL.length,w=this.sliderMode===V.IMAGE_BASED,AO=this.parent.model.globalMinMax(this.minValue(),this.maxValue()),AJ,AD,AG;var AI=b.map(AL,function(AP){return parseInt(z*AP,10);});f(AI,F,z,this.selectedOption===U.VALUE);if(x>AN){for(AJ=x-AN-1;AJ>=0;AJ--){AB.removeChildren(AC[AJ]);}}else{if(AN>x){for(AJ=0;AJ<AN-x;AJ++){P.call(this,r[AA]);}}}if(AA===0&&this.getReversedValue()){AK=AK.concat().reverse();}AC=AB.children;var AF,AE;for(AJ=0;AJ<AN;AJ++){AD=AC[AJ];AF=(AJ===0)?0:AI[AJ-1];AE=AI[AJ];if(AA===0){AD.set("left",(this.containerNode.offsetLeft+AF+1)+"px");AG=AE-AF;B.toggleClass(AD.domNode,"no-border",!AG);AD.set("width",AG+"px");if(w){AD.set("src",AK[AJ]);AD.domNode.firstChild.style.left=AD.domNode.clientWidth/2-12+"px";}else{AD.set("backgroundColor",AK[AJ]);}}else{AD.set("left",AE-(w?0:1)+"px");AD.updateCompValue(AL[AJ]);var AM=this.parent.model,AH=AM.getRealValue(AL[AJ],this.selectedOption,this.minValue(),this.maxValue());AD.updateRealValue(AH);AD.updatePosition(AI[AJ]);}AD.set("index",AJ);}}function o(x,w,z){w.forEach(function(AB){var AA=x[AB.id]={palette:[],comp:[],reversed:false};AB.bands.forEach(function(AC){AA.palette.push(AC[z?"url":"bc"]);AA.comp.push(AC.end/100);});});}function D(){var w=this.parent.model,x={};o(x,w.getDefaultColors(),false);o(x,w.getDefaultImages(),true);return x;}function v(z){var w=H.parseNumeric(z);if(isNaN(w)&&window.numeral){var x=window.numeral(z.toLowerCase()).value();w=typeof x==="number"?x:w;}return w;}mstrmojo.threshold.TextBubble=mstrmojo.declare(mstrmojo.EditableLabel,null,{scriptClass:"mstrmojo.EditableLabel",visible:false,cssClass:"editable-bubble",text:"",isPercentage:true,maxValue:1,showBubble:function(w,z,x){this.updatePosition(w,x);this.updateText(z);this.set("visible",true);},hideBubble:function(){this.set("visible",false);},updatePosition:function T(x,w){var z=(w!==undefined)?w:this.parent.width*x;this.domNode.style.left=z+"px";},updateText:function(AA){var z=this.parent,w=z.parent.model,x=AA;if(z.selectedOption===U.VALUE){this.realValue=x;x=H.formatByMask(w.getFormatString(),x);}if(this.isPercentage){x+="%";}this.set("text",String(x));}});mstrmojo.threshold.ColorSlider=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.threshold.ColorSlider",markupString:'<div class = "mstrmojo-color-slider {@cssClass}"  style="{@cssText}" mstrAttach:click,keyup><div class="labels"></div><input type="text" class="hidden-field"></div>',markupSlots:{containerNode:function W(){return this.domNode;},labelsNode:function Q(){return this.domNode.firstChild;},hiddenField:function d(){return this.domNode.lastChild;}},sliderMode:V.COLOR_BASED,baseColor:undefined,editableBubble:undefined,hoverBubble:undefined,bands:undefined,markers:undefined,colorMap:undefined,selectedOption:undefined,userComp:[],getComp:function X(){return this.userComp;},getPalette:function M(){return this.colorMap[this.baseColor].palette;},getReversedValue:function m(){var w=this.colorMap;return w&&w[this.baseColor].reversed||false;},postBuildRendering:function R(){this.width=L.position(this.containerNode).w;this.resetColorMap();if(this._super){this._super();}this.update();},resetColorMap:function t(){var w=undefined;if(this.colorMap){w=this.colorMap.custom;}this.colorMap=D.call(this);if(w){this.colorMap.custom=w;}if(this.baseColor in this.colorMap){this.userComp=N.clone(this.colorMap[this.baseColor].comp);}},onkeyup:function(AA){var x=window.event||AA.e,AB=x.keyCode;if(this.sliderMode===V.COLOR_BASED&&(AB===mstrmojo.Enum_Keys.DELETE||AB===mstrmojo.Enum_Keys.BACKSPACE)){if(this.editableBubble.isEditing){return ;}var z,w;if(this.bands.isSelected){z=this.bands;}else{if(this.markers.isSelected){z=this.markers;}else{return ;}}w=z.selectedIndex;z.children[w].unselect();z.remove(w);this.update();}},update:function c(){if(this.baseColor){S.call(this,A);S.call(this,u);}this.updateMinMax();},onsliderModeChange:function g(){B.toggleClass(this.domNode,"image-mode",this.sliderMode===V.IMAGE_BASED);this.resetMinMax();this.unselectAll();this.bands.removeChildren();},onbaseColorChange:function n(w){if(w.value&&w.value in this.colorMap){this.userComp=N.clone(this.colorMap[w.value].comp);}this.resetMinMax();this.unselectAll();this.update();},onselectedOptionChange:function K(x){var z=this.parent.model,AA=this.editableBubble,AB=x.valueWas===U.VALUE?AA.realValue:AA.text;if(x.valueWas!==undefined){this.resetMinMax();this.markers.setMarkerRealValues(z.getRealValue.bind(z),x.value,this.minValue(),this.maxValue());this.update();}if(AA.visible){if(x.valueWas===U.LOWEST_PERCENT||x.valueWas===U.HIGHEST_PERCENT){AB=AB.slice(0,AB.length-1);}var w=this.markers.selectedIndex;AA.updateText(this.markers.children[w].realValue);}},updateLabels:function G(x){var AB=this.parent.model,AC=this.editableBubble,AA=this.hoverBubble,AD=this.markers.selectedIndex,AE,z;x=x||this.selectedOption;if(x===U.LOWEST_PERCENT||x===U.HIGHEST_PERCENT){AE="0%";z="100%";AC.set("isPercentage",true);AA.set("isPercentage",true);}else{if(x===U.LOWEST||x===U.HIGHEST){AE="0";z=AB.getMetricsCount();AC.set("isPercentage",false);AA.set("isPercentage",false);}else{var w=AB.getFormatString();AE=(this.minValue()<AB.getMetricsMinValue())?"-&#8734":H.formatByMask(w,AB.getMetricsMinValue());z=(this.maxValue()>AB.getMetricsMaxValue())?"&#8734":H.formatByMask(w,AB.getMetricsMaxValue());AC.set("isPercentage",false);AA.set("isPercentage",false);}}this.startLabel.set("text",AE);this.endLabel.set("text",z);if(!!this.markers.children&&AD>-1&&AD<this.markers.children.length){AC.updateText(this.markers.children[AD].realValue);}},setColorComp:function h(x,w){this.userComp=N.clone(w);var z=this.colorMap;if(z){z[x].comp=w;this.unselectAll();this.update();}},addCustomScheme:function(x,w){this.colorMap.custom={comp:x,palette:w,reversed:false};this.set("baseColor","custom");},addMarkerToMap:function O(z){var AA=this.getComp(),w=AA.length,AB;if(AA[0]>z){AB=0;}else{for(AB=1;AB<w;AB++){if(AA[AB-1]<=z&&AA[AB]>=z){break;}}}AA.splice(AB,0,z);this.unselectAll();this.resetMinMax();return AB;},unselectAll:function q(){var x=this.bands,z=x.children&&x.selectedIndex>-1&&x.children[x.selectedIndex];if(x.isSelected&&z&&typeof (z.unselect)==="function"){z.unselect();}var AA=this.markers,w=AA.selectedIndex;if(AA.isSelected&&AA.children[w]){AA.children[w].unselect();}},reverseMapColor:function Y(){if(this.colorMap&&this.baseColor){var w=this.colorMap[this.baseColor];w.reversed=!w.reversed;this.unselectAll();this.update();}},_minRealValue:undefined,_maxRealValue:undefined,resetMinMax:function J(){this.set("_minRealValue",undefined);this.set("_maxRealValue",undefined);},updateMinMax:function j(){var AC=this.markers.getMarkerRealValues(C),AB=this.parent.model,AA=this.parent.model.globalMinMax(),z=AA.min,w=AA.max,x=-1;if(b.isArray(AC)){while(++x<AC.length){if(AC[x]!==undefined){z=AC[x];break;}}x=AC.length;while(--x>=0){if(AC[x]!==undefined){w=AC[x];break;}}}this.set("_minRealValue",z);this.set("_maxRealValue",w);this.updateLabels(this.selectedOption);},minValue:function E(){return this._minRealValue;},maxValue:function I(){return this._maxRealValue;},children:[{scriptClass:"mstrmojo.Label",cssClass:"start-label",alias:"startLabel",slot:"labelsNode",text:"0%",allowHTML:true},{scriptClass:"mstrmojo.Label",cssClass:"end-label",alias:"endLabel",slot:"labelsNode",text:"100%",allowHTML:true},{scriptClass:"mstrmojo.threshold.TextBubble",alias:"editableBubble",slot:"labelsNode",allowEmptyText:true,onTextEditComplete:function(AE,AF){if(AE){var AJ=this.parent,AC=AJ.parent.model,AB=AJ.markers.selectedIndex,AP=AJ.markers.children[AB];var AG=this.text;if(this.isPercentage){AG=AG.replace(/%$/,"");}var AL=AG.charAt(0),AQ=1;if(AL==="-"||AL==="+"){AG=AG.substring(1);AQ=(AL==="-")?-1:1;AL=AG.charAt(0);}if(AL.match(/\W/)!==null){AG=AG.replace(new RegExp("^\\"+AL),"");}var AH=AC.getFormatString(),AM=(AH||"").indexOf("%")>-1,AA=1,AD=AJ.selectedOption===U.VALUE;if(AD&&AM&&AG.indexOf("%")===-1){AA=0.01;}AG=v(AG)*AA;if(isNaN(AG)){this.set("text",AF);return ;}AG=AG*AQ;if(AG<0&&!AD){AG=0;}AP.updateRealValue(AG);AJ.updateMinMax();var AK=AJ.markers.getMarkerRealValues(C);AB=AK.indexOf(AG);var AN=AK.map(function(AR){return AC.getNormalizedValue(AR,AJ.selectedOption,AJ.minValue(),AJ.maxValue());}),AO=AJ.getComp(),z=AN[AB],x=AJ.width,w=(AJ.sliderMode===V.IMAGE_BASED),AI=parseInt(x*z,10);AN.forEach(function(AS,AR){AO[AR]=AS;AJ.markers.children[AR].updateCompValue(AS);});this.updatePosition(z);AP.updateCompValue(z);AP.set("left",AI-(w?0:1)+"px");AP.unselect();AJ.update();AJ.markers.children[AB].select();}}},{scriptClass:"mstrmojo.threshold.TextBubble",alias:"hoverBubble",slot:"labelsNode",allowEmptyText:false},{scriptClass:"mstrmojo.Box",cssClass:"color-bands",alias:"bands",isSelected:false,selectedIndex:0,remove:function a(z){if(this.children.length===1){return ;}var AA=this.parent;var x=AA.getComp(),w=AA.getPalette();if(z===this.children.length-1){x.splice(z-1,1);}else{x.splice(z,1);}w.splice(z,1);},onBandHovered:function(){this.isSelected=true;},onBandUnhovered:function(){this.isSelected=false;},onBandSelected:function(w){var x,AA=this.children,z=this.parent,AB=z.markers;for(x=0;x<AA.length;x++){if(x!==w&&AA[x].selected){AA[x].unselect();}}if(AB.isSelected===true){AB.children[AB.selectedIndex].unselect();}z.hiddenField.focus();this.isSelected=true;this.selectedIndex=w;},onBandUnselected:function(w){var x,z=this.children;for(x=0;x<z.length;x++){if(x!==w&&z[x].selected){return ;}}this.isSelected=false;}},{scriptClass:"mstrmojo.threshold.MarkersNode",alias:"markers",isSelected:false,selectedIndex:0,onMarkerSelected:function p(x){var w=this.parent,AC=this.children[x];w.editableBubble.showBubble(AC.compValue,AC.realValue,AC.position);var z,AB=this.children;for(z=0;z<AB.length;z++){if(z!==x&&AB[z].selected){AB[z].unselect();}}var AA=w.bands;if(AA.isSelected===true){AA.children[AA.selectedIndex].unselect();}this.parent.hiddenField.focus();this.isSelected=true;this.selectedIndex=x;},onMarkerUnselected:function(w){var x,z=this.children;for(x=0;x<z.length;x++){if(x!==w&&z[x].selected){return ;}}this.parent.editableBubble.hideBubble();this.isSelected=false;},onMarkerHovered:function l(x){var w=this.parent,z=this.children[x];w.hoverBubble.showBubble(z.compValue,z.realValue,z.position);this.isSelected=true;},onMarkerUnhovered:function k(){this.parent.hoverBubble.hideBubble();this.isSelected=false;}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.ToolbarPopup","mstrmojo.ui.editors._HostsControls","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.models.FormatModel","mstrmojo.css");var B=mstrmojo.models.FormatModel;mstrmojo.ui.editors.CharacterToolbarPopup=mstrmojo.declare(mstrmojo.ui.editors.ToolbarPopup,[mstrmojo.ui.editors._HostsControls,mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.CharacterToolbarPopup",textAlignJustify:true,textAlignValueMap:null,textAlignFmtName:mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES.TEXT_ALIGN,btnTextAlign:null,init:function D(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var K=this.textAlignJustify,H=this,F=function(P,Q,O){H.raiseFormatValueChange(P,Q,O);},L=this.getHCGControls(F),J=L.fontFamily,N=L.fontSize,G=L.fontColor,M={alias:"btnTextAlign",includeJustify:K,onValueChange:function(P,O){F(H.textAlignFmtName,P,O);}};J.width="125px";N.width="50px";G.width="50px";this.width=K?"505px":"476px";var E=this.textAlignValueMap;if(E){M.itemsValueMap=E;}this.addChildren([J,L.fontStyle,N,G,new mstrmojo.vi.ui.TextAlignButtonBar(M)]);},shouldPropagateLockHover:function C(){return false;},setFormatSource:function A(E){this._super(E);this.syncControls(function(){if(this.textAlignFmtName in E){this.btnTextAlign.singleSelectByField(E[this.textAlignFmtName],"v");}else{this.btnTextAlign.singleSelectByField(B.getFormatBlockValue(E,B.ENUM_PROPERTY_NAMES.TEXT_ALIGN),"id");}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.css");mstrmojo.ui.editors.controls.CharacterGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,[mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",init:function A(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var H=this,C=this.getHCGControls(function(K,L,J){if(!H._sync){H.raiseFormatValueChange(K,L,J);}}),D=[];Object.keys(C).forEach(function(J){this[J]=C[J];}.bind(this));var B=this.fontFamily,I=this.fontStyle,G=this.fontSize,F=this.fontColor;if(B){D.push(B);}if(I){D.push(I);}if(G){G.slot="col1Node";F.slot="col2Node";D.push({scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",children:[G,F]});}if(D.length){this.addChildren(D);}}});mstrmojo.ui.editors.controls.CharacterGroup.CTRL_FLAGS=mstrmojo.ui.editors.controls._HasCharacterGroup.CTRL_FLAGS;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo._FormatDefinition","mstrmojo.num","mstrmojo.locales","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.dom","mstrmojo.ME.AttributeEditBox","mstrmojo.ME.MetricToken","mstrmojo.string","mstrmojo.dom","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var q=mstrmojo.mstr.EnumFunction,Z=mstrmojo.hash,v=mstrmojo.array,D=mstrmojo.css,X=mstrmojo.dom,z=mstrmojo.Button.newWebButton,U=mstrmojo.ME.MetricToken.brackets,AF=mstrmojo.ME.MetricToken.argDelimiter,V=mstrmojo._FormatDefinition,t=mstrmojo.models.datasets.DataInterface,K=mstrmojo.vi.models.VIComponentMap.TYPES,W=mstrmojo.chart.model.enums.EnumDSSObjectType,r=mstrmojo.mstr.EnumDSSXMLBaseFormType,AS=mstrmojo.mstr.EnumDSSXMLObjectTypes,N=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,AD=mstrmojo.mstr.EnumDSSConsolidationType;var a={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},f={SUM:{n:a.SUM,t:q.FunctionSum},ADD:{n:a.ADD,t:q.FunctionPlus},AVG:{n:a.AVG,t:q.FunctionAvg},MAX:{n:a.MAX,t:q.FunctionMax},GST:{n:a.GST,t:q.FunctionGreatest},MIN:{n:a.MIN,t:q.FunctionMin},LST:{n:a.LST,t:q.FunctionLeast},TMS:{n:a.MTP,t:q.FunctionTimes},CNT:{n:a.CNT,t:q.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:q.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:q.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:q.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:q.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:q.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:q.FunctionVar}},b=[{n:a.SUM,t:q.FunctionOLAPSum},{n:a.AVG,t:q.FunctionOLAPAvg},{n:a.MIN,t:q.FunctionOLAPMin},{n:a.MAX,t:q.FunctionOLAPMax},{n:a.CNT,t:q.FunctionOLAPCount}],AQ=[{n:a.SUM,t:q.FunctionOLAPSum},{n:a.AVG,t:q.FunctionOLAPAvg},{n:a.MIN,t:q.FunctionOLAPMin},{n:a.MAX,t:q.FunctionOLAPMax},{n:a.CNT,t:q.FunctionOLAPCount}],M=[{n:mstrmojo.desc(1058,"Previous"),t:q.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:q.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:q.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:q.FunctionLast}];var AA={YEAR:"Year",QUARTER:"Quarter",CONCAT:"Concat",QUARTERSTARTDATE:"QuarterStartDate",MONTH:"Month",TOSTRING:"ToString",MONTHSTARTDATE:"MonthStartDate",WEEK:"Week",WEEKSTARTDATE:"WeekStartDate",DAYOFMONTH:"DayOfMonth",DAYOFWEEK:"DayOfWeek",DAYOFYEAR:"DayOfYear"};var AJ={};AJ[AA.YEAR]="6F7DF5F8449111D5BEA300B0D01A55EF";AJ[AA.QUARTER]="6F7DF5F7449111D5BEA300B0D01A55EF";AJ[AA.CONCAT]="6F7DF5FF449111D5BEA300B0D01A55EF";AJ[AA.QUARTERSTARTDATE]="59E10CE2ADDD4A6DAC2416A72999A9ED";AJ[AA.MONTH]="6F7DF5F6449111D5BEA300B0D01A55EF";AJ[AA.TOSTRING]="D1ED29645DEC4DBF99E8E09ED939074B";AJ[AA.MONTHSTARTDATE]="7C63D4E70B2741C3A5B54A2EFD40961B";AJ[AA.WEEK]="6F7DF5F5449111D5BEA300B0D01A55EF";AJ[AA.WEEKSTARTDATE]="44681336D0DB4E43AC333FFB3CC4400D";AJ[AA.DAYOFMONTH]="6F7DF5F2449111D5BEA300B0D01A55EF";AJ[AA.DAYOFWEEK]="6F7DF5F3449111D5BEA300B0D01A55EF";AJ[AA.DAYOFYEAR]="6F7DF5F4449111D5BEA300B0D01A55EF";var Q="@form";function c(AU){var AW=8,AX=1,AT=v.find(AU.fs,"idf",true);if(AT===-1){return null;}var AV=AU.fs[AT];return((AU.da||AV.obf)&&(AV.bftp===AW||AV.bftp===AX))?AV:null;}var AP={Year:{ID:[AA.YEAR,"(",Q,")"]},Quarter:{ID:[AA.YEAR,"(",Q,") * 10 + ",AA.QUARTER,"(",Q,")"],DESC:[AA.CONCAT,'("Q"',AF,AA.QUARTER,"(",Q,")",AF,' ", "',AF,AA.YEAR,"(",Q,"))"],DATE:[AA.QUARTERSTARTDATE,"(",Q,")"]},QuarterOfYear:{ID:[AA.QUARTER,"(",Q,")"],DESC:[AA.CONCAT,'("Q"',AF,"This@ID)"]},Month:{ID:[AA.YEAR,"(",Q,") * 100 + ",AA.MONTH,"(",Q,")"],DESC:[AA.TOSTRING,'<Pattern="mmm yyyy">(',Q,")"],DATE:[AA.MONTHSTARTDATE,"(",Q,")"]},MonthOfYear:{ID:[AA.MONTH,"(",Q,")"],DESC:[AA.TOSTRING,'<Pattern="mmmm">(',Q,")"]},Week:{ID:[AA.YEAR,"(",Q,") * 100 + ",AA.WEEK,"(",Q,")"],DESC:[AA.CONCAT,'("W"',AF,AA.WEEK,"(",Q,")",AF,' ", "',AF,AA.YEAR,"(",Q,"))"],DATE:[AA.WEEKSTARTDATE,"(",Q,")"]},WeekOfYear:{ID:[AA.WEEK,"(",Q,")"]},DayOfMonth:{ID:[AA.DAYOFMONTH,"(",Q,")"]},DayOfWeek:{ID:[AA.DAYOFWEEK,"(",Q,")"],DESC:[AA.TOSTRING,'<Pattern="ddd">(',Q,")"]},DayOfYear:{ID:[AA.DAYOFYEAR,"(",Q,")"]}};function j(AV,AX,AW,AT){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:AV,selectedIndex:AX,onitemSelected:function AU(AY){var AZ=this.parent;while(!AZ.data||!AZ.data[AW]){AZ=AZ.parent;}AZ.data.set(AW,AT?AT(AY):AY.v);}};}function AB(AV,AU,AT){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:"),cssClass:"menu-info-text"},Z.copy(AT,j(AV,AU,"breakBy",function(AW){return{id:AW.did,type:AW.t,dmy:AW.dmy};}))]};}function AN(AW){var AX=AW.metrics,AY=AW.propName,AV=AW.optionValueField||"id",AT=v.find(AX,AV,AW.value),AZ=function AZ(Ab){var Aa=this.parent;while(!Aa.data||!Aa.data.hasOwnProperty(AY)){Aa=Aa.parent;}Aa.data.set(AY,Ab?{id:Ab[AV],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,cssClass:"Calculation-PullDown",items:AX,selectedIndex:AT,useRichTooltip:true,bindings:AW.bindings,valid:true,allowCustomText:true,allowEmptyText:true,allowHTML:false,onvalidChange:function AU(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:AZ,onTextEditComplete:function(){AZ.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:AW.postkeyup};}function T(AW,AV,AU){if(AW&&AW.datap){var AT=v.filterOne(AW.datap,function(AY){return AY.tbid===AV;}),AX=AT&&AT.maps.amps;return v.filterOne(AX,function(AY){return AU===AY.aimp.atid;});}return null;}function m(AT,AX){var AV=v.filterOne(AT&&AT.afmps,function(AY){return AY.fmid===AX;}),AW=AV&&(AV.sqc?AV:AV.col.oi),AU;if(AW&&AW.sqc){AU={did:AW.sqc.id,n:mstrmojo.string.decodeHtmlString(AW.cln),coldtp:AW.sqc.dt.tp,georole:AW.geo,timerole:AW.tim,der:AW.sqc.der};}else{if(AW){AU={did:AW.did,n:mstrmojo.string.decodeHtmlString(AW.def.cln),coldtp:AW.def.dt.tp,georole:AV.geo,timerole:AW.def.dicl.time,der:AW.def.dicl.der};}}return AU;}function C(AV,AU,AX){var AW={success:function(AY){if(AY&&AY.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:AY.msgid,bindingflag:2,previewflag:261,browsetype:5},AX);}},failure:function(AY){mstrApp.onerror(AY);}};var AT=!!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause());mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:AU,messageID:AV,skipRebuild:AT},AW);}function I(AY,AZ,AW){var AU=AY.srcTableId,Ab=AY.tgtTableId,AT,AX,AV=function(Af,Ae){var Ah="<mpcs><mpc ",Ad,Ag;for(Ad in Ae){Ag=Ae[Ad];Ah+='$ACT="$VAL" '.replace("$ACT",Ad).replace("$VAL",Ag);}Ah+="/></mpcs>";return{act:"changeEMMAMapping",tbid:Af,dsid:AY.dsid,mapping:Ah};},Aa=function(){var Ad=[],Ag={},Ae,Af;if(!AT||!AX){return ;}Ag[AU]={};Ag[Ab]={};v.forEach(AT.afmps,function(Ak){var Ai=v.find(AX.afmps,"fmid",Ak.fmid),Al,Aj,Ah;if(Ai>=0){Ae=m(AT,Ak.fmid);Af=m(AX,Ak.fmid);if(Ae.georole!==Af.georole){Ah=(Ae.georole===0)?AU:Ab;Al=(Ae.georole===0)?Ae.did:Af.did;Aj=Ae.georole||Af.georole;Ag[Ah][Al]=Z.copy({did:Al,georole:Aj},Ag[Ah][Al]);}if(Ae.timerole!==Af.timerole){Ah=(Ae.timerole===0)?AU:Ab;Al=(Ae.timerole===0)?Ae.did:Af.did;Aj=Ae.timerole||Af.timerole;Ag[Ah][Al]=Z.copy({did:Al,timerole:Aj},Ag[Ah][Al]);}if(Ae.der!==Af.der){Aj=Ae.der|Af.der;Ag[AU][Ae.did]=Z.copy({did:Ae.did,drvflg:Aj},Ag[AU][Ae.did]);Ag[Ab][Af.did]=Z.copy({did:Af.did,drvflg:Aj},Ag[Ab][Af.did]);}}});Z.forEach(Ag,function(Ah,Ai){Z.forEach(Ah,function(Aj){Ad.push(AV(Ai,Aj));});});Ae=m(AT,AT.afmps[0].fmid);Ad.push(AV(AU,{did:Ae.did,oid:AX.aimp.atid}));if(AW){AW(Ad);}},Ac=function(Af){var Ag={success:function(){Aa();}},Ae,Ad;AT=T(Af,AU,AY.srcId);AX=T(Af,Ab,AY.tgtId);Ae=m(AT,AT.afmps[0].fmid);Ad=[AV(AU,{did:Ae.did,oid:AX.aimp.atid,fg:1})];AZ.getDataService().submitUpdates(Ad,Ag);};C(AZ.mid,AY.dsid,{success:Ac});}function Y(AY,AV,AU,AZ){var AT=0,AX=[],AW=function(Aa){var Ab=AU[AT-1];if(Aa&&Aa.tks&&Ab){AX.push({fid:Ab.fid,fnm:Ab.fnm,ftk:Aa.tks.items});}if(AT===AU.length){AZ(AX);return ;}Ab=AU[AT++];mstrmojo.ME.MetricDataService.validateMetric({metricId:AV,formID:Ab.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:AY},{success:AW});};AW();}function AG(AT,AU){return{v:U(AT.n)+"@"+U(AU.fnm),tp:275,lv:1,exv:AU.fid,extp:8,oi:{did:AT.did,t:AT.t,n:AT.n}};}function H(AU){var AW=(AU.t===AS.Filter||AU.t===AS.Consolidation),AV=(AU.t===AS.Attribute&&AU.de),AT=(AU.t===AS.Consolidation&&AU.st===N.ConsolidationManaged);return !!(AW&&!AT||AV);}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function AM(AT){return{"12":[[f.AVG,f.CNT,f.MAX,f.MIN,f.STD,f.SUM,f.VAR]],"4":[[f.SUM,f.AVG,f.MIN,f.MAX,f.CNT],[f.GEM,f.MED,f.MOD,f.PDT,f.STD,f.VAR]]}[AT.t];},isAmongFunctions:function B(AU,AT){return AT.some(function(AV){return AV.some(function(AW){return AW.t===AU;});});},getMultiSelectionShortcutMetricFunctions:function J(AT){var AU=true;v.forEach(AT,function(AV){if(4!==AV.t){AU=false;return false;}return true;});return AU?[f.ADD,f.AVG,f.GST,f.LST,f.TMS]:[];},getRelativeReferenceMenu:function e(AX,AV,Aa,AT){var AW=0,AU=M[AW],AZ=0,AY=Aa&&Aa[AZ];return new mstrmojo.ui.menus.EditorConfig({data:{item:AX,relativeRef:AU,breakBy:AY},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:AV&&AV.length,text:AV,cssClass:"menu-info-text"},Z.copy({cssClass:"RelativeReferencePullDown"},j(M,AW,"relativeRef",function(Ab){return Ab.t;}))]},AB(Aa,AZ,{cssClass:"RelativeReferencePullDown"})],fnOk:function(Ab){return AT(Ab.item,Ab.relativeRef,[Ab.breakBy]);}});},getMovingTotalMenu:function A(Ad,AX,AZ){var Ae=1,AW=AQ[Ae].t,AY=1,AU=mstrmojo.desc(13289,"Starting previous##rows").split("##"),Ac=0,AV=AX&&AX[Ac];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:Ad,funcType:AW,windowSize:AY,breakBy:AV},contents:[Z.copy({cssClass:"MovingTotalPullDown"},j(AQ,Ae,"funcType",function(Af){return Af.t;})),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix menu-info-text",text:AU[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function Ab(){this.set("value",AY);},_ontooltipover:function(){var Af=mstrmojo.all[this.id];Af._hovered=true;Af.showTooltip();},_ontooltipout:function(){var Af=mstrmojo.all[this.id];Af._hovered=false;Af.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var Af=this.validationStatus.msg,Ag=!(this.richTooltip&&Af===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:Af};if(this._hovered&&Ag){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function Aa(){var Af=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",Af?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix menu-info-text",text:AU[1]}]},AB(AX,Ac,{cssClass:"MovingTotalPullDown BreakByBox"})],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function AT(Af){if(AZ){AZ(Ad,Af.funcType,Af.windowSize,[Af.breakBy]);}}});},getRunningTotalMenu:function AL(AW,AZ,AU){var AV=0,AT=b[AV].t,AY=0,AX=AZ&&AZ[AY];return new mstrmojo.ui.menus.EditorConfig({data:{item:AW,func:AT,breakBy:AX},cssClass:"RunningTotal-MenuEditor",contents:[Z.copy({cssClass:"RunningTotalPullDown"},j(b,AV,"func",function(Aa){return Aa.t;})),AB(AZ,AY,{cssClass:"RunningTotalPullDown BreakByBox"})],fnOk:function(Aa){return AU(Aa.item,Aa.func,[Aa.breakBy]);}});},getRankMetricEditor:function AC(AX,Aa,AV){var AT=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],AU=0,AW=AT[AU].v,AZ=0,AY=Aa&&Aa[AZ];return new mstrmojo.ui.menus.EditorConfig({data:{item:AX,order:AW,breakBy:AY},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:"),cssClass:"menu-info-text"},Z.copy({cssClass:"NewRankMetricPullDown"},j(AT,AU,"order"))]},AB(Aa,AZ,{cssClass:"NewRankMetricPullDown"})],fnOk:function(Ab){return AV(Ab.item,Ab.order,[Ab.breakBy]);}});},insertAddUnitToFilterMenu:function G(AY,AU,AT){var AW=this,AV=mstrmojo.desc(2022,"Add to Filter"),AX=v.ensureArray(AT).filter(function(AZ){return AW.isValidAddToFP(AU,AZ);});if(AX.length>0){AY.addMenuItem(AV,"",function(){AU.addFilterStackSelectors(AX);});}else{AY.addDisabledMenuItem(AV,"");}},isValidAddToFP:function O(AU,AZ,Ab){var AV=AU.controller.view.builder,AX=AV.getLayoutVIMap(AU.getCurrentLayoutKey()),AY=AX.getComponent(K.FILTER_STACK),Aa=true;if(!Ab){Aa=(!AY||v.find(AY.getFilterDefinitions(),"srcid",AZ.did)===-1);}if(Aa&&AZ.lock){var AW=AZ.fs||[],AT;Aa=false;for(AT=0;AT<AW.length;AT++){if(AW[AT].iidx){Aa=true;break;}}}return Aa;},renameItem:function u(AY,Ab,AU,AW){var AX=AY.mstrmojoId,Aa=mstrmojo.dom.findWidget(AY);AW=AW||{};if(!AX){var AZ=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,editOnTwoClicks:true,text:Ab.n,title:Ab.dsc||"",allowEmptyText:AW.allowEmptyText,allowTrimming:AW.allowTrimming||false,cssClass:AW.cssClass||"",placeholder:AY,onTextEditComplete:function AT(Ac){if(Ac){return AU(this);}},onmousedown:function AV(Ac){if(this.isEditing){Ac.cancel();}}});if(Aa&&Aa.draggable){AZ.parent=Aa;}AZ.render();AX=AZ.id;}mstrmojo.all[AX].set("isEditing",true);return mstrmojo.all[AX];},getMultipleMetricsCalculationMenus:function l(Aa,AT,Ad){var AZ=new mstrmojo.ui.menus.MenuConfig(),Af=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(Aa),AX=function(Ah,Ai,Ag){return{dsid:AT,funcType:Ai,funcType2:Ag,items:Ah};};AZ.useTooltip=true;Af.forEach(function(Ag){AZ.addMenuItem(Ag.n,"",function(){Ad(AX(Aa,Ag.t));});});if(Aa.length===2){var AY=mstrmojo.mstr.EnumFunction,AW=AY.FunctionDivide,AU=AY.FunctionMinus,Ac=Aa[0],Ab=Aa[1],Ae=function(Ak,Ai,Ag,Aj,Ah){AZ.addMenuItem(Ak,"",function(){Ad(AX([Ai,Ag],Aj,Ah));});},AV=[{n:function(Ah,Ag){return Ah.n+"/"+Ag.n;},fn:AW},{n:function(Ah,Ag){return Ah.n+"-"+Ag.n;},fn:AU},{n:function(Ah,Ag){return"("+Ah.n+"-"+Ag.n+")/"+Ag.n;},fn:AU,fn2:AW}];AV.forEach(function(Ag){AZ.addSeparator();Ae(Ag.n(Ac,Ab),Ac,Ab,Ag.fn,Ag.fn2);Ae(Ag.n(Ab,Ac),Ab,Ac,Ag.fn,Ag.fn2);});}return AZ;},getCalculationMetricEditor:function L(Ab,Ac,Aa){var AV=[{n:"",css:"operator-plus",funcType:q.FunctionPlus},{n:"",css:"operator-minus",funcType:q.FunctionMinus},{n:"",css:"operator-multiply",funcType:q.FunctionTimes},{n:"",css:"operator-divide",funcType:q.FunctionDivide},{n:!mstrApp.isWSStyling?"%":"",css:"operator-percent-diff",funcType:q.FunctionMinus,funcType2:q.FunctionDivide}],AW={m1:Ac.did,m2:Ab[0].did,operator:q.FunctionPlus,u1:{id:Ac.did,type:4},u2:null},AU=function(Ad){return{}.hasOwnProperty.call(Ad,"cst");},AZ=function(Ad){return typeof Ad==="string"&&!!Ad.length&&!isNaN(Number(Ad));};var AT="this.parent.popupConfig.valid || this.selectedIndex !== -1 || (!!this.selectedNode && this.selectedNode.innerHTML.length === 0)",AY=function AY(){var Ad=this.parent.popupConfig;if(Ad){Ad.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[AN({metrics:Ab,value:AW.m1,propName:"u1",optionValueField:"did",bindings:{valid:AT},postkeyup:AY}),{scriptClass:"mstrmojo.ButtonListHoriz",items:AV,selectedIndex:0,postselectionChange:function AX(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},AN({metrics:Ab,value:null,propName:"u2",optionValueField:"did",bindings:{valid:AT},postkeyup:AY})],data:AW,okEnabled:false,bindings:{valid:function(){var Af=this.data.u1,Ae=this.data.u2,Ag=this.data.operator;if(!Af||!Ae||!Ag){return false;}var Ad=!(AU(Af)&&AU(Ae))&&(!AU(Af)||AZ(Af.cst))&&(!AU(Ae)||AZ(Ae.cst));this.set("okEnabled",Ad);return Ad;}},fnOk:function(Ad){return Aa(Ad.u1,Ad.u2,Ad.operator,Ad.operator2);}});},getCfgForAddUnitFromAllObject:function(AT,AU){var AV=null,AW=null,AX=[],AY=function(AZ,Aa){if(!Aa){return false;}return v.find((Aa.att||[]).concat(Aa.mx||[]),"did",AZ.did)>-1;};Z.forEach(AU,function(Aa,AZ){if(Aa.idd){AV=AZ;AW=Aa;return false;}return true;});if(!AV){AV="$GUID_141";AX.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[AV]});}v.forEach(AT,function(AZ){if(!AY(AZ,AW)){AX.push({act:"addUnitToDataset",dsid:AV,unitId:AZ.did,unitType:AZ.t});}});return{actions:AX,dsid:AV};},getAggregateByMenu:function p(AY,AW){var AU=new mstrmojo.ui.menus.MenuConfig(),AV=function(Ac,Ab){var Ae,Ad;if(Ab){var Aa=Ac.mexp.args[0];Ae=Aa.did;Ad=Aa.t;}else{Ae=Ac.did;Ad=Ac.t;}return{did:Ae,t:Ad};},AT=this.getAvailableShortcutMetricFunctionsGroup(AY),AZ=AY.mexp?AY.mexp.ft:null,AX=AY.mexp&&this.isAmongFunctions(AZ,AT);AT.forEach(function(Aa,Ab){if(Ab!==0){AU.addSeparator();}Aa.forEach(function(Ac){AU.addMenuItem(Ac.n,"",function(){AW(AV(AY,AX),Ac.t);});});});return AU;},showObjectPicker:function o(AU,AT){var AV="object_picker";return function(){var AW=mstrmojo.all[AV];if(!AW){AW=new mstrmojo.vi.ui.editors.ObjectPicker({id:AV});if(AT){AW.supportedTypes=v.hash(AT);AW.ob.browsableTypes="8,"+AT.join(",");}AW.render();}else{if(AT){AW.supportedTypes=v.hash(AT);AW.ob.browsableTypes="8,"+AT.join(",");}AW.browse();}AW.OKFn=AU||mstrmojo.emptyFn;AW.open();};},getObjectPicker:function o(){var AT="object_picker";return mstrmojo.all[AT];},generateNumberFormat:function x(AY){var AT=V.DefaultFormat.FormattingNumber,AU=V.NumberFormatCategory,AW=AY||{},AV=AW.nct,AX=AV===AU.General&&AW.nfs==="General";return{category:(AV===undefined||AX)?AU.Automatic:AV,decimalPlaces:AW.ndp===undefined?2:AW.ndp,thousandSeparator:AW.nth===undefined?parseInt(AT.ThousandSeparator,10):(AW.nth?-1:0),currencySymbol:AW.ncs||AT.CurrencySymbol,currencyPosition:AW.ncp||AT.CurrencyPosition,format:AW.nfs||"",negativeNumbers:AW.nnn||AT.NegativeNumbers};},getNumberFormatEditor:function AE(AW,AV,AU){var AT=this.generateNumberFormat(AV),AX=Z.clone(AT),AZ=Z.clone(AT);return new mstrmojo.ui.menus.EditorConfig({data:AX,bindings:{okEnabled:function(){return !(this.data.category===AZ.category&&this.data.format===AZ.format);}},cssClass:"NumberFormat-MenuEditor",contents:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",formatValue:AT,myData:AX,oldData:AZ,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}}],fnOk:function AY(Aa){if(!(Aa.category===AZ.category&&Aa.format===AZ.format)){return AU(Aa,AZ);}}});},getHighlightElementHandler:function(AV,AU,AT){return function(){D.toggleClass(AU,AT||"open",AV);};},getConfDataTypeMenuCfg:function AI(AT,Ao,Ag,A2){var Ax="ToString",An="ToNumber",Al="ToDateTime",Af="keepOriginal",AW="Default",Ay={ToString:r.DssXmlBaseFormText,ToNumber:r.DssXmlBaseFormNumber,ToDateTime:r.DssXmlBaseFormDate},Ab={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},AZ="_pattern",A0="_func",Aj="_bft",A5="_state",A3={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},AY={n:"Default",v:"Default"},Av=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},AY],AV=[{n:mstrmojo.desc(13772,"Keep Original"),v:Af},{n:mstrmojo.desc(12276,"String"),v:Ax},{n:mstrmojo.desc(2052,"Date"),v:Al},{n:mstrmojo.desc(3434,"Number"),v:An}];if(mstrApp&&mstrApp.showMultiDataType){AV=[{n:mstrmojo.desc(13772,"Keep Original"),v:Af},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3434,"Number"),v:An,bft:r.DssXmlBaseFormNumber},{n:mstrmojo.desc(9920,"Big Decimal"),v:An,bft:r.DssXmlBaseFormBigDecimal},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(2052,"Date"),v:Al,bft:r.DssXmlBaseFormDate},{n:mstrmojo.desc(9919,"DateTime"),v:Al,bft:r.DssXmlBaseFormDateTime},{n:mstrmojo.desc(2170,"Time"),v:Al,bft:r.DssXmlBaseFormTime},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3544,"Text"),v:Ax,bft:r.DssXmlBaseFormText},{n:mstrmojo.desc(9921,"HTML Tag"),v:Ax,bft:r.DssXmlBaseFormHTMLTag},{n:mstrmojo.desc(8984,"Phone Number"),v:Ax,bft:r.DssXmlBaseFormPhoneNumber},{n:mstrmojo.desc(4530,"Symbol"),v:Ax,bft:r.DssXmlBaseFormSymbol},{n:mstrmojo.desc(9922,"URL"),v:Ax,bft:r.DssXmlBaseFormUrl},{n:mstrmojo.desc(4699,"Email"),v:Ax,bft:r.DssXmlBaseFormEmail}];}var Ae=Z.clone(AV).slice(1),Am=Ao.fs.filter(function(A7){return Ao.da||A7.obf;}),A6=Am.length>1,Ai=Am.length>5,Aa=false,Aw=false,Ap=[],Au=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:"),cssClass:"menu-info-text menu-header-text"}],A4={okEnabled:false},Az=function(){var A7=false;Am.forEach(function(A8){A7=A7||(A4[A8.fnm+A0+A5]!==A3.UNCHANGED)||(A4[A8.fnm+AZ+A5]!==A3.UNCHANGED);});return A7;},Aq=function(A9,A8){var A7=0;if(A9.da){v.forEach([Ax,Al,An],function(BC,BA){var BB=new RegExp("^\\s*"+BC+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(A8.f);if(BB&&BB[2]){A7=BA+1;return false;}});}return A7;},At=function(A9,A8){var A7=0;if(A9.da){var BA=A8&&A8.bftp;v.forEach(AV,function(BC,BB){if(BC.bft===BA){A7=BB;return false;}});}return A7;},As=function(A9,A8){var BA=AW;if(Ao.da){var A7=new RegExp("^\\s*"+A8+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(A9.f);if(!mstrmojo.string.isEmpty(A7&&A7[1])){BA=A7[1];}}return BA;},Ar=function(){return Ai?this.parent.parent.parent:(A6?this.parent.parent:this.parent);},Ak=function(A7){if(Ai){A7.formList.updateScrollbars();}},AX=function(BE,BF,BD){var A7=BF.fnm,BA=Ai?BE.formList[BF.fnm+AZ]:BE[BF.fnm+AZ],BB=A6?BA.children[1]:BA,BC=A4[A7+A0],A9=Aa&&(BC===Al||BC===Ax),A8=BA.visible!==A9;if(A8){BA.set("visible",A9);if(A9){Ak(BE);}else{BB.hideTooltip();}}if(BD){BB.set("text",As(BF,BC));BB.set("items",BC===Al?Av:[AY]);}},Ah=function(A7){var A8=false;Am.forEach(function(A9){if(A4[A9.fnm+A0]===Al||A4[A9.fnm+A0]===Ax){A8=true;return false;}});A7.advancedLabel.set("visible",A8);},AU=function(A9,A7,BA){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:A9,alias:BA.fnm+A0,selectedIndex:A7,onPopupWidgetOpened:function(){Ak(Ar.call(this));},onitemSelected:function A8(BF,BD){var BE=Ar.call(this),BG=BE.data,BH=BA.fnm,BC=BF.v,BB=function(BI){if(BI){return(A9.length===3?A3.TO_UPDATE:A3.TO_CREATE);}return A3.UNCHANGED;};BG.set(BH+A0,BC);BG.set(BH+AZ,As(BA,BC));BG.set(BH+Aj,BC===Af?BA.bftp:(BF.bft?BF.bft:Ay[BC]));BG.set(BH+A0+A5,BB(BD!==A7));BG.set("okEnabled",Az());AX(BE,BA,true);Ah(BE);}};},Ad=function(A9,BA,A7){return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,alias:A9.fnm+AZ,useRichTooltip:true,visible:A7,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){Ak(Ar.call(this));},customizeSearchResult:function(BB){if(v.find(BB,"v","Default")===-1&&this.items.length>0){BB.push(AY);}},onclick:function(BB){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,BB);this.set("isEditing",true);},updateData:function(BD){var BB=Ar.call(this),BC=BB.data,BE=A9.fnm;BC.set(BE+AZ,BD);BC.set(BE+AZ+A5,BA!==BD?A3.TO_UPDATE:A3.UNCHANGED);BC.set("okEnabled",Az());},onitemSelected:function A8(BB){if(BB){this.updateData(BB.v);}},onkeyup:function(BB){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,BB);var BC=this[this.editableSlot],BD=BC.innerText||BC.textContent;this.updateData(BD);},updateTooltipConfig:function(BC){this.tooltipOpenDelay=BC?500:0;var BB=X.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:BB.y-2,left:BB.x+BB.w+10};}};},A1=function(BF,BE,A7,A8,BD){var BA=mstrApp&&mstrApp.showMultiDataType?At(BF,BE):Aq(BF,BE),BC=As(BE,AV[BA].v),A9=BE.fnm,BB=AV;if(BA>0){BB=Ae;BA--;}A8[A9+AZ]="";A8[A9+A0]="";A8[A9+Aj]="";A8[A9+A0+A5]=A8[A9+AZ+A5]=A3.UNCHANGED;if(BD){A7.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:A9+A0,children:[{scriptClass:"mstrmojo.Label",text:A9,useRichTooltip:true,updateTooltipConfig:function(BI){this.tooltipOpenDelay=BI?500:0;var BH=this.domNode;var BG=X.position(BH);if(BH.scrollWidth>BH.offsetWidth){this.richTooltip={content:BH.innerText,posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:BG.y-BG.h-10,left:BG.x-10};}}},Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},AU(BB,BA,BE,true))]});A7.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:A9+AZ,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern"),cssClass:"menu-info-text"},Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},Ad(BE,BC,true))]});}else{A7.push(Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},AU(BB,BA,BE,false)));A7.push(Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},Ad(BE,BC,false)));}};v.forEach(Ao.fs,function(A7){if(AT.als&&AT.als.links[Ao.did+" "+A7.fid]){Aw=true;return false;}});if(A6){Am.forEach(function(A7){A1(Ao,A7,Ai?Ap:Au,A4,true);});}else{A1(Ao,Am[0],Au,A4,false);}if(Ai){Au.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:Ap});}Au.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var A8=this.parent,A9,A7,BA=true;Aa=!Aa;D.toggleClass(this.domNode,"expanded",Aa);Am.forEach(function(BB){AX(A8,BB,false);A9=Ai?A8.formList[BB.fnm+AZ]:A8[BB.fnm+AZ];A7=A6?A9.children[1]:A9;if(A9.visible&&BA&&!Ai){BA=false;A7.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:A4,cssClass:"ConfDataType-MenuEditor",contents:Au,onOpen:function(){Ak(this);},bindings:{okEnabled:"this.data.okEnabled"},fnOk:function Ac(A9){var A7=[],BB=[],A8=false,BA=function(BE,BF,BD){var BH=[],BG=function(BI){var BJ=BI.ftk&&BI.ftk.slice(2,-2);if(!BJ){return null;}while((BJ.shift()).v!=="("){}return BJ;},BC=BG(BD)||[AG(Ao,BD)];BH.push({v:"!",tp:33,lv:4});if(BE!==Af){BH.push({v:BE,oi:{did:Ab[BE],t:11,st:2816,n:BE}});if(!mstrmojo.string.isEmpty(BF)&&BF!==AW&&(BE===Al||BE===Ax)){BH.push({v:'<Pattern="'+BF+'">(',tp:"2",lv:1});}else{BH.push({v:"(",tp:"2",lv:1});}BH=BH.concat(BC);BH.push({v:")",tp:"2",lv:1});}else{BH=BH.concat(BC);}BH.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:BH});};if(Aw){A8=true;}else{Am.forEach(function(BC){if(A9[BC.fnm+A0+A5]===A3.TO_CREATE){A8=true;return false;}else{if(A9[BC.fnm+A0+A5]===A3.TO_UPDATE||(A9[BC.fnm+AZ+A5]===A3.TO_UPDATE&&(A9[BC.fnm+A0]===Al||A9[BC.fnm+A0]===Ax))){BB.push(BC);}}});}if(A8){Am.forEach(function(BC){A7.push({n:BC.fnm,formula:BA(A9[BC.fnm+A0],A9[BC.fnm+AZ],BC),bft:A9[BC.fnm+Aj]});});A2(A8,A7);}else{if(Ao.da){Y(AT.mid,Ao.did,BB,function(BC){BC.forEach(function(BD){A7.push({did:BD.fid,formula:BA(A9[BD.fnm+A0],A9[BD.fnm+AZ],BD),bft:A9[BD.fnm+Aj]});});A2(A8,A7);});}}}});},getCreateTimeDAEditorCfg:function P(AW,AV){var AT=c(AW);if(!AT){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function AU(){var AY=false;Z.forEach(this.selectedIndices,function(AZ){if(AZ){AY=true;return false;}});this.parent.data.set("okEnabled",AY);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function AX(Ac,Aa){var Ab=Aa.time_type,Af=Ab.selectedIndices,AZ=Ab.items,Ae=[],AY=[],Ad=function(Ag,Ai,Ak){var Aj=[{v:"!",tp:33,lv:4}],Ah;Ak.forEach(function(Al){if(Al===Q){Aj.push(AG(Ag,Ai));}else{Ah=AJ[Al];if(Ah){Aj.push({v:Ah,oi:{did:Ah,t:11,st:2816,n:Ah}});}else{Aj.push({v:Al,tp:"2",lv:1});}}});Aj.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:Aj});};Z.forEach(Af,function(Ag,Ah){if(Ag){AY=[];Z.forEach(AP[AZ[Ah].v],function(Ai,Aj){AY.push({n:Aj,formula:Ad(AW,AT,Ai),bft:(Aj==="DATE"?8:0)});});Ae.push({isTokenStream:true,forms:AY,name:AW.n+" ("+AZ[Ah].n+")"});}});return AV(Ae);}});},RefreshAndCloseAllObjectBrowserCallback:function(AU,AT){return mstrmojo.func.wrapMethods(AT.getDatasetsUpdateCallback(),{success:function(){if(v.find(AU,"act","createDataset")!==-1){AT.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function d(AU,AW,AT){var AV=null;Z.forEach(AU,function(AY){var AX=AY.att||[];if(AT===4){AX=AY.mx||[];}v.forEach(AX,function(AZ){if(AZ.did===AW){AV=AZ;return false;}});if(AV){return false;}});return AV;},getDatasetFromId:function R(AT,AU){var AV=null;Z.forEach(AT,function(AW){if(AW.did===AU){AV=AW;return false;}});return AV;},getDatasetFromAttributeId:function R(AT,AU){var AV=null;Z.forEach(AT,function(AW){if(v.find(AW.att,"did",AU)>=0){AV=AW;return false;}});return AV;},getSortedDatasetUnits:function E(AT){var AU=function AU(AV){return AV.t===W.DssTypeMetric?2:1;};AT=AT.concat();AT.sort(function(AY,AW){if(!AY||!AW){return true;}var AZ=AU(AY)-AU(AW),AX=AY.n.toUpperCase(),AV=AW.n.toUpperCase();return AZ!==0?AZ:(AX!==AV?AX.localeCompare(AV):AY.n.localeCompare(AW.n));});return AT;},isGeoAttr:function AK(AT,AU){return !!(AT.fs&&(AT.fs instanceof Array)&&AT.fs.length&&AT.fs.some(function(AV){return AV.fgr>0&&(!AU||(AU&&AV.obf));}));},isTimeAttr:function g(AT){return !!(AT.fs&&c(AT));},getUnitCssClass:function(AU){var AT=AU.t;if(this.isGeoAttr(AU,AU.useAvailGeoFmsOnly)){AT+="g";}else{if((AU.dm||AU.um)||AU.da){AT+="d";}else{if(AU.de){AT+="de";}else{if(this.isTimeAttr(AU)){AT+="t";}}}}if((AU.t===AS.Consolidation&&AU.st===N.ConsolidationManaged)||(AU.t===AS.Attribute&&AU.st&&AU.st===N.AttributeRecursive)){AT+=(" st"+AU.st);}if(AU.t===AS.Consolidation&&AU.st===N.ConsolidationManaged&&AU.ndetype===AD.DssRecursiveDerivedElement){AT+=" nde4ra";}return"ic"+AT;},hasMultiForms:function n(AU,AT){return t.getFormsByAttrId(AU,AT).length>1;},getDisplayFormsMenu:function F(Ai,Ag,Aa,Af){var Ae=[],Ah=[],AX=[],Ac=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}];var Ab=Ag.model.data,AT=Ab.gts,Ad;var AW=Ai.t===AS.Consolidation&&Ai.st===N.ConsolidationManaged;v.forEach((AT.row||[]).concat(AT.col||[]),function(Aj){if(Aj.id===Ai.did){Ah=Ah.concat(Aj.fs);}});Ad=t.getFormsByAttrId(Ai.attId||Ai.did,Aa);v.forEach(Ad||[],function(Ak){var Al=Ak.fid;if(v.find(Ae,"id",Al)<0){Ae.push({id:Al,n:Ak.fnm});var Aj=v.find(Ah,"id",Al);if(Aj>-1){AX[Ae.length-1]=true;}}});var AY=[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:Ae,selectedIndices:AX},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:"),cssClass:"menu-info-text"},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:Ac,isHostedWithin:false,selectedIndex:v.find(Ac,"v",Ab.lnm||0),onitemSelected:function AU(Aj){this.v=String(Aj.v);}}];if(Ag.getChartStyle&&Ag.getChartStyle()==="NewGraphMatrixVisualizationStyle"){AY.splice(-2,2);}if(AW){AY.splice(-2,2);}return new mstrmojo.ui.menus.EditorConfig({cssClass:"displayForms",data:{item:Ai,oldSelected:Z.copy(AX,{})},contents:AY,okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function AV(Ao,As){var An=As.fs,Al=An.selectedIndices,Aq=An.items,Aw=[],Ap=[],At=[];if(!An.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var Ak=Ao.oldSelected,Av=Al,Am,Ar={},Au={};for(Am=0;Am<Aq.length;Am++){if(Ak[Am]&&!Av[Am]){Ar[Am]=true;}else{if(!Ak[Am]&&Av[Am]){Au[Am]=true;}}}Z.forEach(Ar,function(Ax,Ay){if(Ax){Ap.push({act:"removeForm",unitId:Ai.did,unitType:Ai.t,attFormId:Aq[Ay].id});}});var Aj=Ag.model.data.gts;(Aj.row||[]).concat(Aj.col||[]).forEach(function(Ax){if(Ax.id===Ai.did){(Ax.fs||[]).forEach(function(Ay){if(v.find(Ae,"id",Ay.id)<0){Ap.push({act:"removeForm",unitId:Ai.did,unitType:Ai.t,attFormId:Ay.id});}});}});Z.forEach(Au,function(Ax,Ay){if(Ax){Aw.push({act:"addForm",unitId:Ai.did,unitType:Ai.t,attFormId:Aq[Ay].id,unitPos:0});}});At.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:As.longNames?As.longNames.v:0});if(Af){Af([{act:"updateTemplate",keyContext:Ag.k,partialRetrieval:{nodes:[Ag.k]},actions:Ap.concat(Aw).concat(At)}]);}},onOpen:function AZ(){this.fs.updateScrollbars();}});},getAttributeLinkMenu:function h(Af,Ai,Ad,Ah,AY){var Aj=-2147483648,Aa=Ah.datasets,Ab=Aa[Ad],Ag=Ab.tables||[],AT={},Ac=[],AW=(Ai.fs&&Ai.fs[0])||{},Ae=[],AZ=779,AV=Ai.art>1,AU=!AV&&Z.keyarray(Aa).length>1,AX=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:Ai,docModel:Ah,datasetId:Ad});};if((Ab.st!==AZ)||Ag.length<=1||Ai.da){if(AU){Af.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AX);}return ;}v.forEach(Ab.att,function(Am){var An=true,Al=null,Ak=(Am.fs&&Am.fs[0])||{};if(Am.da){return ;}if(AW.der===Aj||Ak.der===Aj||AW.fgr===-1||Ak.fgr===-1||AW.ftr===-1||Ak.ftr===-1){return ;}if(AW.fgr&&Ak.fgr&&AW.fgr!==Ak.fgr){return ;}if(AW.ftr&&Ak.ftr&&AW.ftr!==Ak.ftr){return ;}v.forEach(Ag,function(Ao){var Ap=v.find(Ao.attRefs,"did",Ai.did),Aq=v.find(Ao.attRefs,"did",Am.did);if(Ap>=0&&v.indexOf(Ac,Ao.did)<0){Ac.push(Ao.did);}if(Aq>=0){Al=Ao.did;}if(Ap>=0&&Aq>=0){An=false;}});if(An&&!Am.hide){AT[Am.did]=Al;Ae.push(Am);}});if(Ae.length>0&&Ab.hcs!==true&&!Ah.isSparkDataset(Ab)){Af.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:Ae,listHooks:{select:function Ak(Al,Am){Ah.warnForEditStandaloneDS(Ab,function(){v.forEach(Ac,function(An){I({dsid:Ad,srcId:Ai.did,srcTableId:An,tgtId:Am.did,tgtTableId:AT[Am.did]},Ah,AY);});});}}}]}]});});}if(AU){Af.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AX);}},isDocumentLevelItem:function w(AT){return AT&&(AT.um||AT.da||(AT.t===AS.Consolidation&&AT.st===N.ConsolidationManaged));},isLegalObjectName:function S(AT){var AU=/["\[\]\\]/g;if(AT.match(AU)){return false;}return true;},validateName:function k(AU,AV,AT){if(this.isLegalObjectName(AU)){AV();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),AT,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AR(AT){return AT.att.some(function(AU){return H(AU);});},isCGorCon:function AH(AT,AV){var AU=v.filterOne(AV&&AV.att,function(AW){return AW.did===AT.did;});return H(AU||AT);},hasOldDEOverDatasets:function(AW,AV){var AU=false,AT;Z.forEach(AV,function(AX){AT=v.find((AX.att||[]),"did",AW);if(AT!==-1&&AX.att[AT].de){AU=true;return false;}});return AU;},getMarkGeoRoleEditorCfg:function AO(AT,A5,An,Ak,BE,BG){var Aj=268435456,BB=536870912,AY=1073741824,Ax=268435456,A8=805306368,A3=805306368,Ar=1879048192,BF=-2147483648,A6=0,A7=1,Aa=2,Ai=3,Am=4,Ag=5,BD=6,Ad=7,Ap=8,Ao=9,Az=10,AW=2,Aw=3,A4={v:A6,n:mstrmojo.desc(2057,"None")},BH={v:Ai,n:mstrmojo.desc(7674,"Country"),der:Aj},A2={v:Aa,n:mstrmojo.desc(7676,"State"),parents:[BH],der:BB},Ae={v:Ao,n:mstrmojo.desc(12919,"County"),parents:[BH,A2]},A9={v:A7,n:mstrmojo.desc(7675,"City"),parents:[BH,A2],der:AY},As={v:Ap,n:mstrmojo.desc(7677,"Zip Code"),parents:[BH,A2,A9]},Al={v:Ag,n:mstrmojo.desc(7696,"Latitude")},A0={v:BD,n:mstrmojo.desc(7697,"Longitude")},Ah={v:Am,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},Av={v:Az,n:mstrmojo.desc(12973,"Area Code")},Ay={v:Ad,n:mstrmojo.desc(2056,"Custom")},Af={ID:[A4,BH,A2,Ae,A9,As,Al,A0,Ah,Av,Ay],ID_NUMERIC:[A4,As,Av,Al,A0],NON_ID:[A4,BH,A2,Ae,A9,As,Ah,Av,Ay],NON_ID_NUMERIC:[A4,As,Av]},At=v.filter(A5.fs,function(BI){return(BI.bftp===AW||BI.bftp===Aw)&&BI.der!==BF;});var A1=(At.length>1),AV=v.find(At,"idf",true),AX=(AV===-1?0:AV),Au=At[AX],Ac,AU,Aq,AZ=[],Ab=function(BI){var BJ=(BI.idf?"ID":"NON_ID")+(BI.bftp===AW?"_NUMERIC":"");return Af[BJ];},BC=function(BJ,BI){return v.find(Ab(BI),"v",BJ);};if(At.length===0||v.find(A5.fs,"fgr",-1)!==-1||Au.der===BF){return null;}v.forEach(At,function(BK,BI){var BJ=Z.clone(BK);BJ.n=BJ.fnm;AZ.push(BJ);if(BK.fgr){Au=BJ;AX=BI;}});Ac=Au.fid;Aq=Au.fgr||0;AU=BC(Aq,Au);return new mstrmojo.ui.menus.EditorConfig({data:{item:A5,geoForm:Au,geoRole:Aq},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:A1},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:AZ,selectedIndex:AX,alias:"formList",visible:A1,onitemSelected:function BA(BK){var BI=this.parent.data,BJ=this.parent.geoRoleList;if(BI.geoForm.fid!==BK.fid){BI.set("geoForm",BK);BI.set("geoRole",BK.fgr);BJ.set("items",Ab(BK));BJ.set("selectedIndex",BC(BK.fgr,BK));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:A1,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:"),cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:Ab(Au),selectedIndex:AU,alias:"geoRoleList",onitemSelected:function BA(BO){var BN=this.parent,BI=BN.data,BP=BN.geoDrvList;var BK=[],BM=[],BJ=Au.der,BL;BI.set("geoRole",BO.v);v.forEach(BO.parents,function(BQ,BR){BL=BQ;BK.push({n:BL.n,der:BL.der});if((BJ&BL.der)!==0){BM[BR]=true;}});BP.set("items",BK);BP.set("selectedIndices",BM);v.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(BQ){BN[BQ].set("visible",BK.length>0);});if(BN.adjustCornersForPopupOverflow){BN.adjustCornersForPopupOverflow();}}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel",cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(BN,BM){var BJ=function(BU){var BT=function(BY){var BZ="<mpcs>";v.forEach(BY,function(Ba){BZ+='<mpc did="'+Ba.did+'" n="'+Ba.n+'" georole="'+Ba.georole+'" drvflg="'+Ba.drvflg+'" />';});BZ+="</mpcs>";return BZ;},BP=function(BY,Ba,Bc,BZ){var Bb=function(Bg,Bd,Bf){var Be=T(BU,Bg,Bd),Bh=m(Be,Bf);return Bh&&Bh.did;};BE.forEach(function(Bd,Be){var Bf=Bb(Bd.did,A5.did,Ba.fid);if(Bf){BY[Be]=BY[Be]||[];BY[Be].push({did:Bf,n:Ba.fnm,georole:Bc,drvflg:BZ});}});},BR=[],BX=[],BV=BM.geoDrvList,BQ=0,BS=false,BW={2:Ax,1:A8,9:A3,8:Ar}[BN.geoRole]||0;Z.forEach(BV.selectedIndices,function(BZ,BY){if(BZ){BQ|=BV.items[BY].der;}});BQ&=BW;if(Au.fgr!==BN.geoRole||Au.fid!==BN.geoForm.fid||Au.der!==BQ){if(A1&&Au.fid!==BN.geoForm.fid){if(Au.fgr!==A6){BP(BX,Au,A6,0);if(Au.der>0){BS=true;}}}if(BN.geoForm.fgr!==BN.geoRole||BN.geoForm.der!==BQ){BP(BX,BN.geoForm,BN.geoRole,BQ);if((BQ&BN.geoForm.der)!==BN.geoForm.der){BS=true;}}if(BX.length>0){BX.forEach(function(BZ,BY){BR.push({act:"changeEMMAMapping",dsid:An,tbid:BE[BY].did,mapping:BT(BZ)});});BG(BR,BS);}}},BK=function(){C(AT.mid,An,{success:BJ});};var BL=mstrApp.isAppStatePause();if(!Ak||BL){var BO,BI=BL?mstrmojo.desc(212,"Continue"):mstrmojo.desc(219,"Yes");if(Ak){BO=mstrmojo.desc(16237,"The operation requires the dataset to be unloaded from memory. It will be automatically reloaded when you resume data retrieval. Do you want to continue?");}else{BO=BL?mstrmojo.desc(16236,"The operation requires modifying the dataset and unloading it from memory. It will be automatically reloaded when you resume data retrieval, however the change will also affect other reports, documents, and dossiers that share the dataset. Do you want to continue?"):mstrmojo.desc(15493,"Modifications to this dataset will affect other reports, documents, and dossiers that share the dataset. Do you want to continue?");}mstrmojo.warn(BO,{},{buttons:[z(BI,function(){BK();},true,{cssText:"min-Width: 60px"}),z(mstrmojo.desc(221,"Cancel"),function(){})]});}else{BK();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.Container","mstrmojo.WidgetList","mstrmojo.ui._HasListTooltip","mstrmojo.mstr._ObjectActions");mstrmojo.requiresDescs(3364,3366,9202);var B=mstrmojo.desc,E=mstrmojo.css,G=mstrmojo.string.escape4HTMLText;mstrmojo.mstr.search.SearchIconView=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo.mstr._ObjectActions],{scriptClass:"mstrmojo.mstr.search.SearchIconView",init:function I(L){this._super(L);E.addWidgetCssClass(this,"mstrmojo-SearchIconView");},itemFunction:function C(O,L,M){var N=new mstrmojo.mstr.search.SearchIconItem({parent:M,idx:L,data:O});M.attachListener4ItemWidget(N,M);return N;},attachListener4ItemWidget:function K(O,P){var M=["ItemExecute"],L=M.length,N;for(N=0;N<L;N++){O.attachEventListener(M[N],P.id,"itemEventHandler");}return O;},itemEventHandler:function(L){var N=L.name,M=L.data;switch(N){case"ItemExecute":this.execute(M,{zIndex:mstrmojo.mstr.search.Search.zIndex+2});break;}}});mstrmojo.mstr.search.SearchIconItem=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui._HasListTooltip],{scritpClass:"mstrmojo.mstr.search.SearchIconItem",markupString:'<div class="mstrmojo-SearchIconItem" mstrAttach:click ><i class="mstrIcon-lg" data-role="icn"></i><div class="ttl" data-role="n"></div><div class="owner" data-role="owner"><label>'+B(3364,"Owner:")+'</label><span></span></div><div class="modified" data-role="mdt"><label>'+B(3366,"Modified:")+'</label><span></span></div><div class="desc" data-role="desc"></div></div>',markupSlots:{iconNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.childNodes[1];},ownerNode:function(){return this.domNode.childNodes[2].lastChild;},modifiedNode:function(){return this.domNode.childNodes[3].lastChild;},descNode:function(){return this.domNode.lastChild;}},markupMethods:{ondataChange:function(){var L=this.data||{},M=L.desc||"";E.addClass(this.iconNode,this.getIconCls(L));this.titleNode.innerHTML=G(L.n);this.ownerNode.innerHTML=G(L.owner);this.modifiedNode.innerHTML=G(L.mdt);this.descNode.innerHTML=this.allowHTMLOnObjectDesc?M:G(M);}},data:{},useRichTooltip:true,getIconCls:function H(L){L=L||this.data;return L.ccss||("t"+L.t+(L.st?" st"+L.st:"")+(L.isc?" isc":"")+(L.dvm?" dvm"+L.dvm:""));},onclick:function J(L){var N=L.getTarget(),M=(N.dataset&&N.dataset.role)||N.getAttribute("data-role");if(M==="icn"||M==="n"){this.raiseEvent({name:"ItemExecute",data:this.data});}},getRole:function D(L){return L.getAttribute("data-role");},getItemFromTarget:function F(L){var M=this.getRole(L);if(M==="n"||M==="desc"||M==="owner"){return{ttp:this.data[M]};}return{};},getItemNodeFromTarget:function A(L){if(this.getRole(L)){return L;}return null;},showTooltip:function(M){var L=mstrmojo.dom.eventTarget(window,M);if(L.scrollWidth>L.clientWidth||L.scrollHeight>L.clientHeight){this._super(M);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.Container","mstrmojo.Label","mstrmojo.ui.List","mstrmojo.ui._HasListTooltip","mstrmojo.mstr._ObjectActions","mstrmojo.mstr.search._IconCssClassBuilder");mstrmojo.requiresDescs(60,61,945,1050,3364,3366,9202);var D=mstrmojo.css,C=mstrmojo.array;var J,A=function(K){return mstrmojo.all[J].getBuilder(K,this.dataField);};mstrmojo.mstr.search.SearchGridView=mstrmojo.declare(mstrmojo.DataGrid,[mstrmojo.mstr._ObjectActions],{scritpClass:"mstrmojo.mstr.search.SearchGridView",cssClass:"mstrmojo-Search-GridView",makeObservable:true,banding:false,columns:[{headerText:mstrmojo.desc(945,"Name"),dataField:"n",dataWidgetBuilder:A,colCss:"name"},{headerText:mstrmojo.desc(60,"Owner"),dataField:"owner",dataWidgetBuilder:A,colCss:"owner"},{headerText:mstrmojo.desc(61,"Modified"),dataField:"mdt",dataWidgetBuilder:A,colCss:"mdt"},{headerText:mstrmojo.desc(1050,"Location"),dataField:"anc",dataWidgetBuilder:A,colCss:"anc"}],init:function I(K){this._super(K);J=this.id;},getBuilder:function B(L,N){var K=null;switch(N){case"n":K={scriptClass:"mstrmojo.mstr.search.SearchGridViewItem",items:[L]};break;case"anc":var M=L.anc.items.slice(2);K={scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Search-Ancester",children:[{scriptClass:"mstrmojo.Label",alias:"toggle",cssClass:"toggle",text:" ",fullPath:false,onclick:function(){this.fullPath=!this.fullPath;D.toggleClass(this.parent.domNode,"full",this.fullPath);},onRender:function(){this.set("bindings",{enabled:function(){return this.parent.path.ellipsized;}});}},{scriptClass:"mstrmojo.ui.List",alias:"path",ellipsized:false,items:C.map(M,function(O){if(O.hid){O.n="[...]";}return O;}),postclick:function(){if(!this.selectedItem.hid){this.parent.dataGrid.execute(this.selectedItem);}},onRender:function(){var P=this,O=P.domNode.firstChild;window.setTimeout(function(){P.set("ellipsized",O.clientWidth<O.scrollWidth);},10);}}]};break;default:K={scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Search-nonbreakable "+N,cssDisplay:"inline-block",text:L[N]};break;}K.alias="itemWidget";return K;}});mstrmojo.mstr.search.SearchGridViewItem=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasListTooltip,mstrmojo.mstr.search._IconCssClassBuilder],{scritpClass:"mstrmojo.mstr.search.SearchGridViewItem",useRichTooltip:true,getItemMarkup:function G(L,K){return this._super(L,K).replace("{@en@n}",'<i class="{@icnCls}"></i>{@en@n}');},getItemProps:function E(L,K){var M=this._super(L,K);M.addCls("mstrmojo-Search-GridViewItem");M.icnCls="mstrmojo-ListIcon "+this.getIconCssClass(L);M.txtCls="mstrmojo-Search-nonbreakable name";return M;},onclick:function H(K){this._super(K);this.dataGrid.execute(this.selectedItem,{zIndex:mstrmojo.mstr.search.Search.zIndex+2});},showTooltip:function F(N,M){var L=mstrmojo.dom.eventTarget(M,N),K=this.getItemNodeFromTarget(L);if(K.scrollWidth>K.clientWidth){this._super(N,M);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.expr","mstrmojo.dom","mstrmojo.form","mstrmojo.boxmodel","mstrmojo.Obj","mstrmojo.Arr","mstrmojo.string","mstrmojo.Box","mstrmojo.TBox","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.TextBox","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.Dial","mstrmojo.WidgetList","mstrmojo.FilterExpr","mstrmojo.CGEOptions","mstrmojo.ConditionWalk","mstrmojo.SaveAsEditor","mstrmojo.CGFormatEditor");var V=mstrmojo.expr,E=V.ET,K=V.BRANCH_FNS,R=mstrmojo.hash,Y=mstrmojo.boxmodel,G=mstrmojo.Arr,S=mstrmojo.Obj,L=mstrmojo.string,W=mstrmojo.dom,T=mstrmojo.expr.TP,B=mstrmojo.expr.STP;function F(a){var f={};if(a){var d=a.items;for(var c=0,Z=(d&&d.length)||0;c<Z;c++){var e=d[c],b=e&&e.expr;if(b){V.findTargets(b,"did",f);}}}return R.valarray(f);}function P(b){var a=b.model;b.targets=F(a);b.targetsLastMod=new Date();if(!a){a=new S({});b.model=a;}var d=a.items;if(!d){d=mstrmojo.Arr.makeObservable([]);a.items=d;}else{if(!d.attachEventListener){d=R.make(d,G);}}for(var c=0,Z=d.length;c<Z;c++){var e=d[c];if(!e.attachEventListener){e=R.make(e,S);}}}var M=mstrmojo.desc(4778,"Element"),U=new RegExp(M+"\\s*(\\d+)","i"),C=10000;function N(e){var d=1;for(var b=0,a=(e&&e.length)||0;b<a;b++){var f=e[b].n,Z=f&&f.match(U);if(Z){var c=parseInt(Z[1],10);d=Math.max(c+1,d);}}return M+" "+d;}var H=200;function D(d,c,b){var a=mstrmojo.all.mstrCGE,e=W.delta(c.domNode,a.editorNode);e.y+=(b=="andor"?16:parseInt(c.domNode.offsetHeight,10));var Z={condition:c,zIndex:a.zIndex+10,left:e.x+"px",top:e.y+"px"},f;switch(b){case"andor":f="andOrPopupRef";break;case"condition":f="conditionPopupRef";Z.model=R.clone(d);Z.targets=a.targets;Z.targetsLastMod=a.targetsLastMod;break;}a.openPopup(f,Z);}function X(a){var b=a.parent.data;if(b){var Z=a.items;b.expr=Z&&Z[0];}}function J(c){if(c.constructor!==Array){c=[c];}var g,f={b:0,c:0},h,e,a;for(var d=0,Z=c.length;d<Z;d++){g=c[d];if(!(g&&g.et)){continue;}h=g.nds;if(h){e=J(h);f.b+=e.b;f.c+=e.c;}else{a=(g.et===E.B);f[a?"b":"c"]++;}}return f;}function O(Z){var b=J(Z.value),a=this.tree;a.set("bandingCount",a.bandingCount+b.b);a.set("conditionCount",a.conditionCount+b.c);}function A(Z){var b=J(Z.value),a=this.tree;a.set("bandingCount",a.bandingCount-b.b);a.set("conditionCount",a.conditionCount-b.c);}function I(a){var d=mstrmojo.all.mstrCGE,Z=d.model,e=Z.did,c=Z.cgp,b=d.getXML();return{taskId:"saveCustomGroup",xml:b,objectID:e||"",description:Z.desc||"",name:Z.n||"",saveAs:a,aggregation:c.agg,flatten:c.flat,parentFirst:c.pf,reportFilterInteraction:c.rfi};}mstrmojo.CustomGroupEditor={id:"mstrCGE",title:mstrmojo.desc(7919,"Custom Group Editor"),scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-charcoalboxe",cssText:"width:750px;",zIndex:10,model:null,readOnly:false,help:"custom_group_editor.htm",formatPopupRef:{scriptClass:"mstrmojo.CGFormatEditor",contentNodeCssClass:"mstrmojo-balloon",alias:"formatEditor",title:mstrmojo.desc(2116),left:"100px",top:"100px",useAnimate:false,height:350,slot:"containerNode",help:"formatting_a_custom_group.htm",locksHover:true,model:null,_set_model:function(a,Z){P(mstrmojo.all.mstrCGE);this.model=Z;this.model.selectedIndex=mstrmojo.all.mstrCGEls.selectedIndex;return true;},bindings:{model:function(){return mstrmojo.all.mstrCGE.model;}},onOpen:function(){this.set("model",mstrmojo.all.mstrCGE.model);}},saveasRef:{scriptClass:"mstrmojo.SaveAsEditor",typeDesc:mstrmojo.desc(2105,"Custom Group"),browsableTypes:"8,257",onObjectSaved:function(b){var a=mstrmojo.all.mstrCGE,Z=a&&a.model;if(Z){Z.set("did",b.did);Z.set("n",b.name);Z.set("desc",b.desc);}if(a.noRefresh!==true){a.needRefreshPage=true;}}},optionsRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-CGEOptions",contentNodeCssClass:"mstrmojo-balloon",left:"100px",top:"230px",slot:"containerNode",help:"Custom_Group_Options_dialog_box.htm",showTitle:true,title:mstrmojo.desc(7969,"Custom Group Options"),onOpen:function(){var Z=mstrmojo.all.mstrCGE,a=this.optionsEditor;a.open(Z.model,{closeCB:[this,"close"]});},children:[{scriptClass:"mstrmojo.CGEOptions",alias:"optionsEditor"}]},postCreate:function(){P(this);},_set_model:function(d,Z){var b=this.model,c=b!==Z,a=mstrmojo.all.mstrCGEls;if(c){this.model=Z;P(this);if(a){a.clearSelect();}}return c;},children:[{scriptClass:"mstrmojo.TBox",alias:"header",cssText:"width: 100%",children:[{scriptClass:"mstrmojo.Label",alias:"name",cssClass:"mstrmojo-charcoalbox subtle mstrmojo-cge-name",emptyText:mstrmojo.desc(7920,"Enter Custom Group name here."),bindings:{text:function(){var Z=mstrmojo.all.mstrCGE.model.n||this.emptyText;return Z;}},onclick:function(){var Z=mstrmojo.all.mstrCGE,a=W.delta(this.domNode,Z.containerNode);Z.openPopup("inlineTextRef",{left:a.x+"px",top:a.y-(W.isIE7?1:0)+"px",txtConfig:{cssClass:"mstrmojo-cge-name-edit",value:Z.model.n||"",onEnter:function(){var b=L.trim(this.value);if(b){Z.model.set("n",b);}this.parent.close({enter:true});},onCancel:function(){this.set("value",Z.model.n);},prevTab:null,nextTab:Z.header.desc}});}},{scriptClass:"mstrmojo.Label",alias:"desc",cssClass:"mstrmojo-charcoalbox subtle mstrmojo-cge-desc",emptyText:mstrmojo.desc(7921,"Enter Custom Group description here."),rows:1,bindings:{text:function(){var Z=mstrmojo.all.mstrCGE.model.desc||this.emptyText;return Z;}},onclick:function(){var Z=mstrmojo.all.mstrCGE,a=W.delta(this.domNode,Z.containerNode);Z.openPopup("inlineTextRef",{left:a.x+"px",top:a.y-(W.isIE7?1:0)+"px",txtConfig:{cssClass:"mstrmojo-cge-desc-edit",value:Z.model.desc||"",onEnter:function(){Z.model.set("desc",L.trim(this.value));this.parent.close({enter:true});},onCancel:function(){this.set("value",Z.model.desc);},prevTab:Z.header.name,nextTab:null}});}}]},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-CGE-content",alias:"content",children:[{id:"mstrCGEls",scriptClass:"mstrmojo.WidgetList",cssClass:"mstrmojo-CustomGroupEls",bindings:{items:"mstrmojo.all.mstrCGE.model.items"},multiSelect:false,renderOnScroll:false,draggable:true,dropZone:true,allowCopy:false,allowDrop:function(b){var a=b&&b.src,Z=a&&a.widget;return(Z===this);},itemIdField:null,itemDisplayField:"n",onchange:function(d){var a=this.selectedIndex,c=this.ctxtBuilder.itemWidgets,b;for(var e=0,Z=c.length;e<Z;e++){b=c[e];if(b&&e!=a){b.filterExpr.clearTreeSelect();}}},getNextId:function(){return ++C;},itemFunction:function(b,Z,a){return new mstrmojo.CustomGroupEl({cssClass:"mstrmojo-charcoalbox",data:b,parent:a,state:b.isNew?1:0,onRender:b.isNew?function(){this.filterExpr.newCondition();delete this.data.isNew;}:mstrmojo.emptyFn,onclick:function(c){var d=W.eventTarget(c.hWin,c.e);if(d===this.titleNode){var e=mstrmojo.all.mstrCGE,g=W.delta(this.titleNode,e.containerNode),f=this;e.openPopup("inlineTextRef",{left:g.x+(W.isIE?1:0)+"px",top:g.y+(W.isIE7?-1:1)+"px",txtConfig:{cssClass:"mstrmojo-cge-elname-edit",value:this.data.n||"",onEnter:function(){var h=L.trim(this.value);if(h){f.data.n=h;f.paint();}this.parent.close({enter:true});},onCancel:function(){this.set("value",f.data.n);},prevTab:null,nextTab:null}});}},postCreate:function(){this.children=[{scriptClass:"mstrmojo.FilterExpr",slot:"exprNode",alias:"filterExpr",bindings:{items:"var ex = this.parent.data.expr; return ex ? [ex] : []"},draggable:true,dropZone:true,allowCopy:false,makeObservable:true,bandingCount:0,conditionCount:0,getItemConfig:function g(l,h,m){var k=this.constructor.prototype.getItemConfig.call(this,l,h,m);k.getPrefixAndOrToolsMarkup=function j(){return('<img class="mstrmojo-outdent disable" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5896,"Ungroup conditions")+'" /><img class="mstrmojo-outdent" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5896,"Ungroup conditions")+'" onclick="mstrmojo.all[\'{@id}\'].out()" /><img class="mstrmojo-indent disable" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5895,"Group conditions")+'" /><img class="mstrmojo-indent" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5895,"Group conditions")+'" onclick="mstrmojo.all[\'{@id}\'].ind()" />');};return k;},onadd:function(h){X(this);O.apply(this,[h]);},onremove:function(h){X(this);A.apply(this,[h]);},editable:true,onRender:function(){var j=J(this.items),h=this.tree;h.set("bandingCount",j.b);h.set("conditionCount",j.c);},isEditable:function f(j){if(!this.editable){return false;}var h=false;switch(j&&j.et){case E.ANDOR:case E.MQ:case E.AQ:case E.AL:case E.AC:case E.MC:case E.AE:case E.R:case E.F:h=true;break;case E.XML:h=!j.xml;}if(!h){mstrmojo.all.mstrCGE.set("readOnly",true);}return h;},onnodeclick:function e(h){if(!this.editable){return ;}D(this.data,this,h&&h.part);},onnodeadd:O,onnoderemove:A,allowDrop:function c(h){var k=h&&h.src,n=k&&k.data,m=n&&n.et,l=(m===E.B),j=this.tree;return m&&((l&&(j.conditionCount===0))||(!l&&(j.bandingCount===0)));},onNew:function d(h){D(h.data,h.widget.ctxtBuilder.itemWidgets[h.index],"condition");}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-CGE-addCondition",text:mstrmojo.desc(1994,"Add Condition"),slot:"exprToolsNode",onclick:function(){this.parent.filterExpr.newCondition(null,true);},bindings:{enabled:function(){return this.parent.filterExpr.bandingCount===0;}}}];}});}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-CGE-newElement",text:mstrmojo.desc(7922,"New Custom Group Element"),alias:"addBtn",title:mstrmojo.desc(7923,"Add new Custom Group Element"),onclick:function(){var Z=mstrmojo.all.mstrCGEls;var a=Z.add([{n:N(Z.items),did:++C,isNew:true}]);Z.scrollTo(a);}}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",cssText:"width: 100%",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HBox",cssClass:"left",cssText:"border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(4596,"Format..."),onclick:function(){var Z=mstrmojo.all.mstrCGE;Z.openPopup("formatPopupRef",{zIndex:Z.zIndex+10});},bindings:{enabled:function(){return mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(7924,"Options..."),onclick:function(){var Z=mstrmojo.all.mstrCGE;Z.openPopup("optionsRef",{zIndex:Z.zIndex+10});}}]},{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(5891,"Save"),onclick:function(){var a=mstrmojo.all.mstrCGE,Z=a.model,f=Z.did,d=a.isValid(true),c=mstrmojo.desc(8113,"New Custom Group");if(d){if(!f){a.openPopup("saveasRef",{name:Z.n||c,desc:Z.desc||"",folderLinksContextId:22,rootFolderID:Z.pf,saveParams:I(true),zIndex:a.zIndex+10});return ;}var b=this,e=I(false);this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){b.set("enabled",true);b.set("iconClass","");},failure:function(g){b.set("enabled",true);b.set("iconClass","");mstrmojo.alert(g.getResponseHeader("X-MSTR-TaskFailureMsg"));}},e);}},bindings:{enabled:function(){return !mstrmojo.all.mstrCGE.readOnly&&mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(628,"Save As"),onclick:function(){var a=mstrmojo.all.mstrCGE,Z=a&&a.model,c=a.isValid(true),b=mstrmojo.desc(8113,"New Custom Group");if(c){a.openPopup("saveasRef",{name:Z.n||b,desc:Z.desc||"",folderLinksContextId:22,rootFolderID:Z.pf,saveParams:I(true),zIndex:a.zIndex+10});}},bindings:{enabled:function(){return !mstrmojo.all.mstrCGE.readOnly&&mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){mstrmojo.all.mstrCGE.close();}}]}]}],onOpen:function(){if(this.readOnly){mstrmojo.all.mstrCGE.set("title",mstrmojo.desc(8031,"Custom Group Editor (Read Only)"));mstrmojo.alert(mstrmojo.desc(8022));}},onClose:function(){this.readOnly=false;if(this.needRefreshPage){var Z=mstrApp;mstrmojo.form.send({evt:5005,src:Z.name+"."+Z.pageName+".5005"});this.needRefreshPage=false;}},getXML:function Q(){var a=this.model;var g='<exp> <nd et="14" n="OR" fn="20" ce="'+(a.cgp.ce?-1:0)+'" isp="'+(a.cgp.isp?-1:0)+'" ><nds>',b="</nds></nd></exp>",f={a:true,a2:true,a3:true,agg:true,cc:true,ce:true,cgp:true,cs:true,desc:true,did:true,dmt:true,dmy:true,dtp:true,es:true,et:true,expr:true,f:true,flat:true,flt:true,fm:true,fm2:true,fm3:true,fn:true,fnt:true,fres:true,gb:true,isp:true,items:true,m:true,m2:true,m3:true,n:true,nds:true,not:true,pf:true,p:true,r:true,rps:true,st:true,t:true,utgt:true,utp:true,uts:true,v:true,xml:true},Z={getArrItemName:function(o,l,m){return o.substr(0,o.length-1);},isSerializable:function(u,r,q){if(u=="xml"){var m=r[q].xml;return{att:'hasXML = "-1"',child:m};}else{if(mstrmojo.array.indexOf(["header_format","grid_format","child_header_format","child_grid_format"],u)>-1){var v=r[q][u];if(!v){return{};}var o="<"+u+">";for(var t in v){o+="<prs n='"+t+"'>";var n=v[t];for(var l in n){var p=n[l];o+="<pr n='"+l+"' v='"+(p=="pru"?"":p)+"'";o+=p=="pru"?' pru="1"':"";o+="/>";}o+="</prs>";}o+="</"+u+">";return{child:o};}}return(f[u])?true:false;},skipNull:true},e=a.items,k=[];for(var c=0,d=e.length;c<d;c++){var j=e[c],h=j.expr;h.n=j.n;if(h.fnt&&h.fnt==V.FNT.PER&&h.cs&&h.cs[0]){h.cs[0].v+="%";}k[c]=L.json2xml("nd",[{ce:j.ce||false,isp:j.isp||false,header_format:j.header_format,grid_format:j.grid_format,child_header_format:j.child_header_format,child_grid_format:j.child_grid_format},j.expr],Z);}return g+k.join("")+b;},inlineTextRef:{scriptClass:"mstrmojo.Popup",locksHover:true,slot:"containerNode",children:[{scriptClass:"mstrmojo.TextBox",alias:"txt",onTab:function(a){if(this.onEnter){this.onEnter();}var Z=W.shiftKey(a.hWin,a.e)?this.prevTab:this.nextTab;if(Z&&Z.onclick){Z.onclick();}},onblur:function(){if(this.onEnter){this.onEnter();}},onEsc:function(){if(this.onCancel){this.onCancel();}this.parent.close({cancel:true});}}],onOpen:function(){var a=this.txt,b=this.txtConfig;if(b){for(var Z in b){a.set(Z,b[Z]);}}a.focus();},onClose:function(Z){if(!Z||(!Z.cancel&&!Z.enter)){this.txt.onEnter();}}},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",cssText:"width: auto;",contentNodeCssClass:"mstrmojo-balloon",left:"250px",top:"15px",slot:"containerNode",autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var Z=this.condition,c=Z&&Z.data&&Z.data.not,d=Z&&Z.parent,a=d&&d.data,b=(a&&a.fn)+(c?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(b)?null:{did:b});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",items:[{did:19,n:K[19]},{did:20,n:K[20]},{did:19+21,n:K["19_21"]},{did:20+21,n:K["20_21"]}],onchange:function(){if(this.opening){return ;}var a=this.parent,Z=a.condition,g=this.selectedItem,f=g&&g.did,e=f>21?true:null,c=f-(e?21:0);a.close();var b=Z&&Z.parent;if(b&&b.data&&b.data.et===V.ET.ANDOR){b.edit(Z,c,e);}else{var h=Z&&Z.data;if(h&&(h.not!==e)){h.not=e;Z.paint();}}}}]},conditionPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-Editor-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",title:mstrmojo.desc(7953,"Condition Editor"),help:"condition_editor.htm",slot:"containerNode",onOpen:function(){this.walk.set("targets",this.targets);this.walk.set("targetsLastMod",this.targetsLastMod);this.walk.set("model",this.model);var Z=[T.ATTR,T.METRIC,B.REPORT_GRID,B.REPORT_GRAPH,B.REPORT_ENGINE,B.REPORT_TEXT,B.REPORT_DATAMART,B.REPORT_BASE,B.REPORT_GRIDGRAPH,B.REPORT_NONINTERACTIVE,B.FILTER,B.PROMPT,B.PROMPT_ELEMENTS,B.PROMPT_EXPRESSION,B.PROMPT_EXPRESSION_DRAFT];this.walk.set("browsableTypes",Z);},onClose:function(){var Z=this.condition;if(Z.isEmpty()){Z.del();}},children:[{scriptClass:"mstrmojo.ConditionWalk",alias:"walk",cssText:"height:"+H+"px",targets:null,ets:null,onOK:function(){var Z=this.parent,a=Z.condition;R.copy(R.clone(this.model.get()),R.clear(a.data));a.paint();Z.close();}}]},isValid:function(c){var b=mstrmojo.all.mstrCGE.model.items,Z=b.length,a,d="";if(Z>0){for(a=0;a<Z;a++){if(!b[a].expr){d+=b[a].n+",";}}if(d){d=d.replace(/,$/,"");mstrmojo.alert(mstrmojo.desc(7947).replace("#",d));return false;}}else{mstrmojo.alert("Custom Group does not have any element defined. Please fix it before saving.");return false;}return true;}};})();(function(){mstrmojo.requiresCls("mstrmojo.OIVMDICPopup","mstrmojo.SliderDIC","mstrmojo.TextFieldDIC","mstrmojo.CheckBoxDIC","mstrmojo.ListDIC","mstrmojo.CalendarDIC","mstrmojo.TimePickerDIC","mstrmojo.ToggleDIC","mstrmojo.TextAreaDIC","mstrmojo.MarkRowDIC","mstrmojo.DefaultDIC","mstrmojo.RatingDIC","mstrmojo.RankDIC","mstrmojo.StepperDIC","mstrmojo.LikertScaleDIC","mstrmojo._HasConditionLogicDIC","mstrmojo.DynamicClassFactory");var C=null,B=1,L=2,H=3,A=4,M=5,P=6,G=7,O=8,E=10,F=11,K=13,J=2,D=2;var I={1:"ActiveTextFieldDIC",3:"ActiveListDIC",8:"ActiveTextAreaDIC",10:"ActiveRatingDIC",11:"ActiveRankDIC",14:"ActiveLikertScaleDIC"};var N=mstrmojo.DynamicClassFactory.newComponent;mstrmojo.OIVMDICConfig=mstrmojo.provide("mstrmojo.OIVMDICConfig",{DICList:{1:mstrmojo.TextFieldDIC,2:mstrmojo.CheckBoxDIC,3:mstrmojo.ListDIC,4:mstrmojo.SliderDIC,5:mstrmojo.CalendarDIC,6:mstrmojo.TimePickerDIC,7:mstrmojo.ToggleDIC,8:mstrmojo.TextAreaDIC,9:mstrmojo.DefaultDIC,10:mstrmojo.RatingDIC,11:mstrmojo.RankDIC,12:mstrmojo.StepperDIC,13:mstrmojo.DefaultDIC,14:mstrmojo.LikertScaleDIC,102:mstrmojo.MarkRowDIC},getDICClass:function(R){if(R.t===K){if(!!R.em){return mstrmojo.ListDIC;}else{return mstrmojo.TextFieldDIC;}}if(R.act){var Q=I[R.t];if(!mstrmojo[Q]){mstrmojo[Q]=N(this.DICList[R.t],[mstrmojo._HasConditionLogicDIC],{scriptClass:Q});}return mstrmojo[Q];}return this.DICList[R.t];},showDICByDefault:function(R,Q){if(R.sbd===undefined){if(R.t==O&&R.dm==0&&R.siwc){R.sbd=true;}else{if(R.t==K){R.sbd=false;}else{if(this.DICList[R.t]==mstrmojo.DefaultDIC){R.sbd=0;}else{R.sbd=R.dm===1;}}}}return R.sbd;},hasDICPreview:function(R,Q){if(R.hpp===undefined){R.hpp=false;}return R.hpp;},isKeyNavigable:function(Q){if(Q.ikn===undefined){switch(Q.t){case B:case M:case H:case L:case G:case A:case P:case O:Q.ikn=true;break;default:Q.ikn=false;}}return Q.ikn;},DICPopup:{getInstance:function(Q,R){if(!C){C=new mstrmojo.OIVMDICPopup();C.render();}return C;},cancel:function(){if(C){C.onCancel();}}},canSlice:function(S,R){var T=S.tks,Q=S.ipt;if(!!T&&Q==D&&R==J){return true;}return false;}});mstrmojo.DICConfig=mstrmojo.OIVMDICConfig;mstrmojo.DICList=mstrmojo.DICConfig.DICList;mstrmojo.DICPopup=mstrmojo.DICConfig.DICPopup;})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.css","mstrmojo.AjaxCall","mstrmojo.hash","mstrmojo.array","mstrmojo.expr","mstrmojo.Label","mstrmojo.ListBase","mstrmojo.ui.CheckList","mstrmojo.ui.ColumnContainer","mstrmojo.rw.ConditionWalkProviderBase","mstrmojo.elementHelper");var G=mstrmojo.css,W=mstrmojo.hash,r=mstrmojo.array,V=mstrmojo.expr,M=V.ET,Y=V.ET2TGT,X=V.FN,S=V.FN_MRP,m=V.DTP2FN_DTP,E=mstrmojo.meta.TP,AA=V.TP,J=V.STP,k=mstrmojo.elementHelper,p=mstrmojo.rw.ConditionWalkProviderBase;var P={};P[M.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};P[M.AL]={target:1,fm:1,fn:1,c0:1};P[M.AE]={target:1,fm:1,es:1};P[M.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};P[M.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};P[M.MC]=P[M.MQ];P["*"]={target:1};var v={};v[M.MQ]={key:"metricFns",def:V.METRIC_FNS};v[M.MC]={key:"metricFns",def:V.METRIC_FNS};v[M.AQ]={key:"formFns",def:V.FORM_FNS};v[M.AL]={key:"formFns",def:V.FORM_FNS};v[M.AC]={key:"formFns",def:V.FORM_FNS};v[M.AE]={key:"elemFns",def:V.ELEM_FNS};var AF=mstrmojo.desc(14084,"Select a filter option or a qualification."),AE=mstrmojo.desc(15007,"Choose to select in list or qualify on an attribute form."),AD=mstrmojo.desc(14085,"Select one or more elements."),N=mstrmojo.desc(15009,"Select element(s)."),AC=mstrmojo.desc(14086,"Select an operator."),AB=mstrmojo.desc(14087,"Enter a value or select an attribute from the list."),C=mstrmojo.desc(15010,"Enter a specific value or select an attribute form as variable."),z=mstrmojo.desc(14088,"Select an attribute form. When done, click ## button.").replace("##",'""'),x=mstrmojo.desc(14089,"Select a condition."),AH=mstrmojo.desc(15011,"Select an operator."),w=mstrmojo.desc(14090,"Enter a value or select a metric from the list."),R=mstrmojo.desc(15012,"Enter a specific value or select a metric as variable.");var j=0,q=1;var H=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;var d="dummy",I={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:d,css:"unselectable"},o={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:d,css:"unselectable"},AG={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:d,css:"unselectable"},u={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:d,css:"unselectable"},D={did:"idWait",v:"idQualification",n:mstrmojo.desc(15008,"Qualify on"),t:d,css:"unselectable"};var a=p.onWalkChange,F=p.replaceItem,L=p.getChildJSON,t=p.walkChildPostCreateFn,n=p.updateList,AL=p.fnItem,AK=p.isComparisonAllowed,g=p.cstJson,e=p.fmJson,c=p.updateListMulti,l=p.updateListMultiData;function h(AM){return AM.targets?r.filter(AM.targets,function(AN){return AN[E]===V.TP.ATTR;}):[];}function K(AM){this.tip.set("text",AM);}var U=[V.STP.PROMPT,V.STP.PROMPT_OBJECTS,V.STP.PROMPT_ELEMENTS,V.STP.PROMPT_EXPRESSION,V.STP.PROMPT_EXPRESSION_DRAFT];var AJ=p.allowedTargetTypes;mstrmojo.rw.ConditionWalkProvider=mstrmojo.declare(mstrmojo.rw.ConditionWalkProviderBase,null,{scriptClass:"mstrmojo.rw.ConditionWalkProvider",browseEs:function b(AP,AO,AR){AP.openPopup("eb",{zIndex:AP.parent.zIndex+10,left:Math.round(AR.x)+"px",top:Math.round(AR.y)+"px"});var AN=AP.eb.browser,AM=AP.model,AQ=AM&&AM.a&&AM.a.did;if(!AQ){return ;}AN.set("attributeID",AQ);AN.set("selectedItems",AM.es?W.clone(AM.es):[]);AN.initBrowser();},browseObjs:function AI(AT,AM,AN){AT.openPopup("ob",{zIndex:AT.parent.zIndex+10,left:Math.round(AN.x)+"px",top:Math.round(AN.y)+"px"});var AO=AT.ob.browser;AO.target=AM;var AP;switch(AM.alias){case"dmy":AP=[V.TP.ATTR,V.TP.DIM];break;case"c0":case"c1":var AR=AT.model,AQ=AR&&AR.et,AU=AR&&AR.fm,AS=AU&&AU.dtp||(AR.m?V.DTP.DECIMAL:V.DTP.UNKNOWN);AP=(AQ===M.MQ||AQ===M.MC)?[V.TP.METRIC,V.DTP2PROMPT_STP[AS]]:[V.TP.ATTR,V.DTP2PROMPT_STP[AS]];break;default:AP=AJ(AT.ets);AP=AP?W.keyarray(AP,true):[V.TP.ATTR,V.TP.METRIC,V.STP.REPORT_GRID,V.STP.REPORT_GRAPH,V.STP.REPORT_ENGINE,V.STP.REPORT_TEXT,V.STP.REPORT_DATAMART,V.STP.REPORT_BASE,V.STP.REPORT_GRIDGRAPH,V.STP.REPORT_NONINTERACTIVE,V.STP.FILTER].concat(U);}AP[AP.length]=V.TP.FOLDER;AO.browse({rootFolderType:AR&&(AR.et===M.MQ||AR.et===M.MC)?5:26,folderLinksContextId:33,onSelectCB:[AT,"onOBSelect"],browsableTypes:AP.join(",")});},getFm2NodeProps:function T(){return{alias:"fm2",children:[e({alias:"fm2",fmPost:2})],updateColumnContainer:function AM(){var AN=this.parent.parent;if(this.domNode){G.addClass(this.domNode,"lastStage");}this.fm2.update();K.call(AN,z);H.call(this);}};},getC0NodeProps:function Q(){var AM=this;return{alias:"c0",c1Selected:false,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},g({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},g({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false}],updateColumnContainer:function AN(){this.c0.update();var AX=this.parent,AT=AX.parent,AS=AX.parent.model,AV=AS&&AS.fn,AP=AV===X.BETWEEN||AV===X.NOT_BETWEEN||AV===S.BETWEEN||AV===S.BETWEEN_DESCENDING,AU=AV===X.EQUAL||AV===X.NOT_EQUAL||AV===X.GREATER||AV===X.GREATER_EQUAL||AV===X.LESS||AV===X.LESS_EQUAL,AW=this.idx,AR=this.next;this.browseLink.set("visible",AT.objectBrowsingEnabled&&AK(AS,AT.ets));this.btwn.set("visible",AP);this.c1.set("visible",AP);if(AP){this.c1.update();}else{AS.edit("c1",{v:null,dtp:null,skipET:true},true);}if(AS.a2&&AU){if(!(AR&&AR.fm2)){AX.insertAndRemoveTrailing(AW,AM.getFm2NodeProps());}}else{AX.removeTrailingContainer(AW);}var AQ=mstrApp.isWSStyling?C:AB,AO=mstrApp.isWSStyling?R:w;K.call(AT,AS.a?AQ:AS.m?AO:"");if((!AS.a)&&AS.m&&this.domNode){G.addClass(this.domNode,"lastStage");}H.call(this);}};},getFnNodeProps:function Z(){var AM=this;return{alias:"fn",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrApp.isWSStyling?mstrmojo.desc(15006,"Operator"):mstrmojo.desc(9579,"Condition")},e({alias:"fn",allowUnlistedValues:false,update:function(){var AT=this.parent.parent.parent,AP=AT.model||{},AU=AP.et,AS,AV=false,AW,AO;switch(AU){case M.AE:AV=!!AP.a;break;case M.AQ:case M.AC:case M.AL:AV=!!(AP.fm&&AP.fm.did);AS=AV?AP.fm.dtp:null;break;case M.MQ:case M.MC:AV=!!AP.m;AS=AV?V.METRIC_DTP:null;break;}if(AV){var AX=m[AS];if((this.lastEt!==AU)||(this.lastFnDtp!==AX)){this.lastEt=AU;this.lastFnDtp=AX;var AR=AU?v[AU]:null,AQ=AR&&AR.key;AW=(AQ&&AT[AQ])||AR.def||[];if(typeof (AW)==="object"){AW=AW[AX]||AW["*"];}}AO=AL(AP.fn,AP.fnt||1);}n(this,AV,AW,AO);this.parent.updateScrollbars();}})],updateColumnContainer:function AN(){this.fn.update();var AO=this.parent,AP=AO.parent,AQ=AP.model,AS=AQ&&AQ.fn,AR=this.next,AU=AS===X.IS_NULL||AS===X.IS_NOT_NULL;if(AS&&AU){AO.removeTrailingContainer(this.idx);}else{if(AS&&!(AR&&AR.c0)){AO.insertAndRemoveTrailing(this.idx,AM.getC0NodeProps());}}var AT=mstrApp.isWSStyling?AH:x;K.call(AP,AQ.a?AC:AQ.m?AT:"");AR=this.next;if(AR){AR.updateColumnContainer();}}};},getEsNodeProps:function B(){var AO=[{scriptClass:"mstrmojo.ui.CheckList",alias:"es",itemIdField:"v",allowUnlistedValues:true,insertUnlistedValuesAt:0,selectionPolicy:"toggle",postCreate:function AN(){t.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var AZ=this.parent,AT=this.response;if((AT&&AT.did)!==AZ.lastAttrId){return ;}var AV=(AT&&AT.es)?r.filter(AT.es,function(Aa){return !k.isNullElem(Aa.v);}):[],AY=AZ.parent.parent.parent.model&&AZ.parent.parent.parent.model.es,AW=function(Ag,Ab){var Af=Ag&&Ag.length||0,Ae=Ab&&Ab.length||0,Aa=[],Ad,Ac;for(Ad=0;Ad<Ae;Ad++){for(Ac=0;Ac<Af;Ac++){if(Ab[Ad].n===Ag[Ac].n){break;}}if(Ac===Af){Aa.push(Ab[Ad]);}}return Aa;},AX=function(Aa,Ab,Ae){var Ad=[],Ac;r.forEach(Aa,function(Af){Ac=r.filterOne(Ab,function(Ag){return Af[Ae]&&Ag[Ae]&&Af[Ae]===Ag[Ae];});if(Ac){Ad.push(Ac);}});return Ad.length===Aa.length?Ad:Aa;};AY=AY&&AX(AY,AV,"v");if(AZ.allowUnlistedValues){var AU=AW(AV,AY);AV=(AZ.insertUnlistedValuesAt===0)?AU.concat(AV):AV.concat(AU);}l(AZ,AV,AY,null);AZ.parent.updateScrollbars();},onerr:function(){F(this.parent,o,[I]);}});},onselectionChange:function AR(AT){mstrmojo.ListBase.prototype.onselectionChange.call(this,AT);a.call(this,AT);},update:function AQ(){var AW=this.parent.parent.parent,AV=AW.model,Aa=AV&&AV.a,Ab=!!Aa&&!Aa.ilk,Ac,AT,AZ,AX,AU,Ad;if(Ab){if(this.lastAttrId!==Aa.did){this.lastAttrId=Aa.did;Ac=AV.es;AX=Ac&&Ac.length;Ac=AX?Ac.concat():[];Ac.push(o);if(AX){AZ=[];for(AU=1;AU<=AX;AU++){AZ[AU]=AU;}}Ad=this.ajx;AW.updateBrowseElementsParams(Ad.params,Aa);}else{AT=AV.es;}}c(this,Ab,Ac,AT,AZ);if(Ab&&Ad){if(AW.getElements){var AY=this;AW.getElements(Aa,{success:function(Ae){l(AY,Ae.es||[],AW.model&&AW.model.es,null);AY.parent.updateScrollbars();},failure:function(){F(AY,o,[I]);}});}else{Ad.send();}}},setupScrollNodes:function AP(){this.scrollNode=null;}}];if(!mstrApp.isSingleTier){AO.splice(0,0,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7928,"Browse elements..."),onclick:function AM(){this.parent.parent.parent.browse(this.parent.es);}});}return{alias:"es",children:AO,updateList:function(AT){c(this.es,true,AT,this.parent.parent.model.es,null);this.updateScrollbars();},updateColumnContainer:function AS(){var AT=this.parent.parent;if(this.domNode){G.addClass(this.domNode,"lastStage");}this.es.update();K.call(AT,mstrApp.isWSStyling?N:AD);}};},getFmNodeProps:function O(){var AM=this;return{alias:"fm",children:[e({alias:"fm",fmPost:"",filter:false,isFirstFm:true})],updateColumnContainer:function AN(){this.fm.update();var AX=this.parent,AS=AX.parent,AR=AS.model,AU=AR&&AR.fm,AW=this.idx,AV=AR&&AR.a,AP=AS.disableElementsBrowsing,AO=AV&&AP&&AP(AV);var AT=(AR.etWas&&AR.etWas===M.AE)?q:j,AQ=j;if(AR.et===M.AE&&!AO){AQ=q;}if(AT!==AQ||AQ===j){AX.removeTrailingContainer(AW);if(AQ===j&&AU){AX.addNextColumn(AM.getFnNodeProps());}else{if(AQ===q){AX.addNextColumn(AM.getEsNodeProps());}}}K.call(AS,mstrApp.isWSStyling?AE:AF);H.call(this);}};},getTargetNodeProps:function f(){var AM=this;return{alias:"target",target:null,browseLink:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(11859,"Based On")},L({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},onObjBrowsed:function(AP){if(AP.st===J.FILTER||AP.t===AA.REPORT||AP.t===AA.PROMPT){this.parent.parent.parent.onOK();}},update:function AO(){var AQ=this.parent.parent.parent,AR=AQ.model,AU=AQ.targetsLastMod,AV=AR&&AR.et;if(this.lastModel!==AR||this.targetsLastMod!==AU){this.lastModel=AR;this.targetsLastMod=AU;var AP=AQ.targets,AW=AQ.ets;if(AW&&AP&&AP.length){var AT=AJ(AQ.ets);AP=r.filter(AP,function(AX){return AT[AX[E]];});}var AS=AR&&AR[Y[AV]];n(this,true,V.getSortedObjectsByTypeGroup(AP),AS);this.parent.updateScrollbars();}}}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.target);}}],updateColumnContainer:function AN(){this.target.update();var AQ=this.parent,AR=AQ.parent,AS=AR.model,AU=AS&&AS.et,AP=this.idx,AT=this.next;this.browseLink.set("visible",AR.objectBrowsingEnabled);if(AU){switch(AU){case M.AQ:case M.AL:case M.AC:case M.AE:if(AS.a&&!(AT&&AT.fm)){this.parent.insertAndRemoveTrailing(AP,AM.getFmNodeProps());}break;case M.MQ:case M.MC:if(AS.m&&!(AT&&AT.fn)){this.parent.insertAndRemoveTrailing(AP,AM.getFnNodeProps());}break;case M.R:case M.F:case M.XML:this.parent.removeTrailingContainer(AP);break;}}AT=this.next;if(AT){AT.updateColumnContainer();}}};}});var A=mstrmojo.rw.ConditionWalkProvider;A.setTip=K;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.date","mstrmojo.dom","mstrmojo.NumberFormat","mstrmojo.Button","mstrmojo.Serializer","mstrmojo.vi.ui.editors.PromptOptionEditor","mstrmojo.vi.ui.editors.ExportPDFEditor","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.util.NavUtility");var A=mstrmojo.desc,AT=mstrmojo.css,D=mstrmojo.Button.newWebButton,AE=mstrmojo.Serializer,AJ=mstrmojo.date,b=mstrmojo.func,S=mstrmojo.hash,Q=mstrmojo.array,r=mstrmojo.dom,AN=mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep),H="1:Width",k="2:Page",R=44,AC=28,AG=29,AA=17,u=mstrmojo.vi.util.NavUtility,w=mstrmojo.vi.enums.EnumFeatures,x=function(){return mstrmojo.locales.datetime;};function AY(AZ){u.checkSessionAndSendForm(AZ,null,"post");}function AW(Aa,Ac){var AZ=Aa.model;var Ab={evt:2048001,messageID:AZ.mid,rwb:AZ.bs};if(Ac<50||Ac===2048){Ab.visMode=0;Ab.currentViewMedia=Ac;}else{Ab.visMode=Ac;Ab.currentViewMedia=1;}AY(Ab);}function AU(){var Aa=mstrApp.pathInfo.nb,AZ=mstrmojo.array.find(Aa,"n","Return");return AZ>-1?Aa[AZ].href:null;}function v(AZ){var Aa={};Aa.evt=3198;Aa.src=mstrApp.name+".3124";AY(Aa);}function AL(Ac,Ab,Ae,Ad){var Aa=Ac.model,AZ=mstrConfig&&mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||false;AY({evt:2048030,src:Aa.bp+".2048030",rePrompt:Ab,fresh:Ae,resolveOnly:AZ,regenerate:Ad,rwb:Aa.bs});}function X(Ai,Aa){var Ae=Ai.model,Af=(Ae&&Ae.zt)||0,Ab,Ad,AZ;switch(Af){case 1:Ab="Width";AZ=H;Ad=A(4809);break;case 2:Ab="Page";AZ=k;Ad=A(4808);break;default:Ab=(Ae&&Ae.getZoomFactor())||1;AZ=Af+":"+AN.format(Ab);Ad=parseInt(Ab*100,10)+"%";}var Ac=Ai.zoomOptions,Ag;if(Ac){var Ah=mstrmojo.array.find(Ac,"dssid",AZ);if(Ah>-1){Ag=Ac[Ah];}}if(!Ag){Ag={n:Ad,dssid:AZ,f:Ab,tp:Af};}if(Aa===true){Ai.view.zoomValue=Ag;}else{Ai.view.set("zoomValue",Ag);}}function g(Af,Ai,AZ,Aa,Ag,Ac,Ae,Ah){var Ab=Af.model,Ad=Ab&&Ab.isnew;if(!Ad&&(!Ah||!mstrmojo.resolveFeature("save-analysis")||!(Af.isDocChanged&&Af.isDocChanged()))){Ag(Ac);return ;}mstrmojo.warn(Aa,{confirmBtn:{t:mstrmojo.desc(118,"Save"),fn:function(){Af.save(Ae);}},cancelBtn:{t:mstrmojo.desc(2140,"Cancel")}},{title:Ai||mstrmojo.desc(11812,"Notification"),help:AZ});}function I(Aa){var AZ=Aa.model;AZ.showDialogBeforeSave=false;AZ.getDataService().setPreference("askBeforeSaveChanges\u001E2",{success:mstrmojo.emptyFn,failure:function(Ab){mstrmojo.alert(Ab.getResponseHeader("X-MSTR-TaskFailureMsg"));}});}var j=-1,AV=3,q=4,AR=7,AM=10,h=18;mstrmojo._DocToolbarActions=mstrmojo.provide("mstrmojo._DocToolbarActions",{_mixinName:"mstrmojo._DocToolbarActions",staticViewMode:function z(){AW(this,1);},interactiveViewMode:function AX(){AW(this,2);},editableMode:function L(){this.model.updateWidgetsProps();AW(this,4);},flashViewMode:function J(){AW(this,8);},IVEMode:function C(){AW(this,2048);},IVEHelp:function C(){var AZ=mstrmojo.helpPath();window.open(AZ+"Displaying_a_visual_representation_of_your_data__V.htm","_blank");return true;},remainExpressViewMode:function E(){},designViewMode:function O(AZ,Aa){this.model.updateWidgetsProps();AY({evt:3104,rwDesignMode:1,convertFromVI:(Aa===true)?1:0,messageID:this.model.mid,rwb:this.model.bs,jsonMode:false});},onmodelChange:function e(){X(this,true);},convertToDoc:function n(Aa){var AZ=this;if(AZ.model.hasMDXRADataset()){mstrmojo.alert(mstrmojo.desc(14692,'The "Convert to Document" option is currently not available for MDX cube with Hierarchical Attributes.'),null,mstrmojo.desc(3610,"MicroStrategy Web"));}else{mstrmojo.warn(mstrmojo.desc(15498,"Converting a dossier to a document cannot be undone. Do you want to convert?"),{confirmBtn:{t:mstrmojo.desc(13654,"Convert"),fn:function(){AZ.designViewMode(undefined,Aa);}},cancelBtn:{t:mstrmojo.desc(221,"Cancel")}},{title:mstrmojo.desc(5180,"Convert to Document")});}},saveAs:function(AZ){this.save();},save:function W(Aa,AZ){if(mstrApp.isSingleTier){FormWrapper.saveas();return ;}this.model.saveAsRW(Aa,AZ);},dSave:function t(Aj,Ad,Ai){var Ag=this,Aa=Ag.model,Ae=Aa&&Aa.isnew,Ac=Aa&&Aa.isRWReadonly,Ab=60,Af=Aa.n;if(mstrApp.isExpress){this.model.updateWidgetsProps();}if(mstrApp.isSingleTier){if(Ai){FormWrapper.savePromptOption((Aa.prompt_option>=0)?Aa.prompt_option+1:3);}else{FormWrapper.save();}return ;}if(Af.length>Ab){Af=Af.substr(0,Ab-1)+"...";}if(Ae||Ac){this.save();}else{var Ak=mstrApp.features["ask-before-save-changes"];if(Ak){var AZ="dialogBeforeSave",Ah=function(){mstrmojo.all.dialogBeforeSave.destroy();};mstrmojo.insert({scriptClass:"mstrmojo.Editor",id:AZ,title:A(5728),cssClass:"mstrmojo-dta save",btnAlignment:"right",modal:true,visible:true,onClose:Ah,buttons:[D(A(1442),function(){var Al=mstrmojo.all[AZ];if(Al.t.ctrlChk.checked){Ag.setDontAskAgain();mstrApp.features["ask-before-save-changes"]=false;}Ag.directSave(Aj);Ah();},true),D(A(218),function(){var Al=mstrmojo.all[AZ];if(Al.t.ctrlChk.checked){I(Ag);}Ag.save();Ah();}),D(A(2140),Ah)],children:[{scriptClass:"mstrmojo.Table",alias:"t",rows:2,cols:1,children:[{scriptClass:"mstrmojo.Label",text:A(11165,"Are you sure you want to overwrite the existing copy of ##?").replace(/##/,"<b>"+Af+"</b>"),visible:true,cssClass:"ucalert",slot:"0,0",allowHTML:true},{scriptClass:"mstrmojo.CheckBox",label:A(211),alias:"ctrlChk",visible:true,checked:false,slot:"1,0"}]}]}).render();}else{Ag.directSave(Aj);}}},setDontAskAgain:function AF(){var Aa=this,AZ=Aa.model;AZ.showDialogBeforeSave=false;AZ.getDataService().setPreference("askBeforeSaveChanges\u001E0",{success:mstrmojo.emptyFn,failure:function(Ab){mstrmojo.alert(Ab.getResponseHeader("X-MSTR-TaskFailureMsg"));}});},directSave:function V(Ag){Ag=Ag||{};var Af=this,Aa=Af.model,AZ=mstrmojo.string.decodeHtmlString(Aa.n),Ad=mstrmojo.emptyFn,Ah=Ag.success||Ad,Ac=Ag.failure||Ad,Ab=Ag.complete||Ad,Ae=mstrConfig&&mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||false;mstrApp.showWait({message:mstrmojo.desc(10492,"Saving..."),cssClass:"saving-in-progress",showCancel:true});mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(Ai){var Aj=function(){if(!Ag.ignoreOrgSucc){mstrApp.showWait({message:mstrmojo.desc(13781,"Saved Successfully"),cssClass:"save-successful-waitbox",_autoClose:true,timeout:2000});}Af.cmdMgr.reset();};Aa.lastSavedStid=Aa.getDataService().stid;Aa.dty=false;Ah(Ai);if(Ai.needToGetResults){Aa.getDataService().retrieveServerJson({},b.wrapMethods(Aa.controller.getRefreshCallback(),{success:Aj}),{preserveUndo:true,style:{name:"ServerJsonRWDStyle",params:{treesToRender:3}},params:{styleName:"ServerJsonRWDStyle"}});}else{Aj();}},failure:function(Ai){var Ak=Ai.getResponseHeader("X-MSTR-TaskErrorCode"),Aj=Ai.getResponseHeader("X-MSTR-TaskFailureMsg");if(Ak==="-2147468986"||Ak==="-2147217126"||Ak==="-1"||mstrApp.isVI&&Ak<0&&Aj){mstrmojo.alert(Aj);}else{if(!Ag.ignoreOrgFail){mstrmojo.alert(A(4107));}}Ac(Ai);},complete:function(Ai){mstrApp.hideWait();Ab(Ai);}},{taskId:"saveRW",msgID:(Aa.dataService&&Aa.dataService.msgId)||Aa.mid,folderID:Aa.sfid||Aa.pfid,objName:AZ,objDesc:mstrmojo.string.decodeHtmlString(Aa.dsc),saveAsFlags:(Aa.prompt_option>=0)?Aa.prompt_option+1:3,taskEnv:"xhr",skipRebuild:Ae,taskContentType:"json"});},quickSave:function o(){this.model.saveRW();},browseParent:function l(){var AZ=this.model,Aa={evt:3010};if(!AZ.pfh){Aa.evt=2001;Aa.folderID=AZ.pfid;if(AZ.sysFolder){Aa.systemFolder=AZ.sysFolder;}}AY(Aa);},close:function d(){v(this);},openPage:function AO(Aa){var AZ=this.model;AY({evt:3124,src:mstrApp.name+"."+mstrApp.pageName+".3124",relativePageNumber:Aa,messageID:AZ.mid,rwb:AZ.bs});},saveToInbox:function c(){var Aa=this;mstrApp.serverRequest({taskId:"addDocToHistoryList",rwb:Aa.model.bs},{success:function(){var Ab=Aa.model.features;if(Ab){if(Ab.set){Ab.set("enable-add-history-list",false);}else{Ab["enable-add-history-list"]=false;}}mstrmojo.alert(A(8047));},failure:function AZ(Ab){if(Ab&&Ab.message){mstrmojo.alert(Ab.message);}else{mstrmojo.alert(A(15211));}}},{silent:true});},ShowSharingEditor:function AD(Ai){var Ac="sharingEditor",Af=mstrmojo.all[Ac],Ag=this,Ad=Ag.model,Ae=Ad.isnew,Ah=(Ai&&Ai.cls)?Ai.cls:null,Ab=Ad.getDataService().stid,AZ=function(Aj){if(Af){Af.set("oi",Aj);S.copy({objectName:Ad.n,href:null,initTab:Ah,mid:Ad.mid,isLinkDirty:Af.lastState!==Ab,lastState:Ab},Af);}else{Af=new mstrmojo.SharingEditor({guestModeEnabled:mstrApp.guestModeEnabled,mid:Ad.mid,id:Ac,oi:Aj,href:null,initTab:Ah,isLinkDirty:true,viewMode:1,lastState:Ab});}Af.open();},Aa={success:function(Aj){AZ(Aj.objects[0]);},failure:function(Aj){mstrmojo.alert(Aj.getResponseHeader("X-MSTR-TaskFailureMsg"));}};if(Ae){mstrmojo.alert(mstrmojo.desc(15513,"You must save this dossier before you can share it."),null,mstrmojo.desc(8101,"Share ..."));}else{Ad.getDataService().getObjectInfo({objectIDs:this.model.oid,objectTypes:55,includeACL:mstrApp.features?!!mstrApp.features["web-use-sharing-editor"]:false},Aa);}},annotationMode:function F(){(mstrmojo.all.annotations||mstrmojo.insert({scriptClass:"mstrmojo.vi.ui.Annotations"})).displayAnnotations(this.rootCtrl.view);},createPersonalView:function m(){var Ac=this,AZ=Ac.model,Aa=AZ&&AZ.isnew;if(Aa){mstrmojo.alert(mstrmojo.desc(15504,"You must save your dossier before continuing."),null,mstrmojo.desc(9173,"Create Personal View"));}else{var Ag=AZ.n,Ab="mstrPVD",Af={scriptClass:"mstrmojo.PersonalViewSaveAs",id:Ab,objectType:55,objectSubType:14081},Ae=mstrmojo.all[Ab]||mstrmojo.insert(Af);if(Ag){var Ad=AJ.getDateJson(new Date());Ag+=" "+AJ.formatDateInfo(Ad,x().DATEOUTPUTFORMAT)+" "+AJ.formatTimeInfo(Ad,x().TIMEOUTPUTFORMAT);Ae.set("name",Ag);}Ae.msgID=this.model.mid;Ae.open();}},reprompt:function U(){AL(this,true,false,false);},refresh:function p(){AL(this,false,false,false);},rerun:function B(){AL(this,false,true,false);},toggleAutoRefresh:function(Ac){var Ab=Ac.src,Aa=this.model.controller,AZ=Aa.isAutoRefreshStarted();Aa[(AZ?"stop":"start")+"AutoRefresh"]();Ab.set("iconClass",(AZ?"tbStart":"tbStop")+"AutoRefresh");Ab.domNode.setAttribute("title",AZ?"*Resume Auto Refresh*":"*Pause Auto Refresh*");},popPromptOption:function AH(Ac){var AZ=this.model,Ab=new mstrmojo.vi.ui.editors.PromptOptionEditor({optVal:AZ.prompt_option===undefined?2:AZ.prompt_option,onSave:function Aa(){AZ.prompt_option=this.optVal;Ac(AZ.prompt_option);}});Ab.open();},docVisualizationModeAJAX:function Y(){AW(this,51);},docVisualizationModeFlash:function AI(){AW(this,50);},sendNow:function K(){g(this,mstrmojo.desc(2331,"Send Now"),"Sending_an_analysis_in_an_email.htm",mstrmojo.desc(2513,"You must save the report/document before you can send it."),AY,{evt:3037,objectType:55,objectSubType:14081,messageID:this.model.mid},{saveAsOrigin:2},false);},scheduleHL:function AK(){g(this,A(5017,"Subscribe to History List"),"",A(15504,"You must save your dossier before continuing."),AY,{evt:3128,objectType:55,objectSubType:14081,messageID:this.model.mid},{saveAsOrigin:3},false);},scheduleEmail:function AS(){g(this,A(3282,"Schedule Delivery to E-mail"),"",A(15504,"You must save your dossier before continuing."),AY,{evt:3036,objectType:55,objectSubType:14081,messageID:this.model.mid},{saveAsOrigin:3},false);},zoomValue:null,getRequiredZoomFactor:function AB(Ag){var Af=this.model,Ac=this.view.selected,Ad=(Ac&&Ac.docLayout)||null,Aj=Ad&&(Ad.containerNode||Ad.domNode),Ab=Aj&&Aj.ownerDocument.documentElement,Ae=(Af&&Af.getZoomFactor())||1,Ah=Ae;var Aa=function(Ak){Ak-=R;if(Af.multiLayout){Ak-=AC;}if(Af.hasGroupby){Ak-=AG;}return Ak;};var AZ=function(Am){var Ak=Aj&&Aj["offset"+Am];if(!Ak){return Ae;}var Al=Math.max(1,Ab["client"+Am]);if(Am==="Height"){Al=Aa(Al);}return Math.min(4,Math.max(0.1,Math.floor(Ae*Al*100/Ak)/100));};var Ai=function(An){var Ak=Aj&&Aj.offsetHeight;if(Ak){var Al=Math.max(1,Ab.clientWidth),Am=Aa(Math.max(1,Ab.clientHeight));if(Ak*An/Ae>Math.max(1,Am)){An=Math.floor(An*(Al-AA)*100/Al)/100;}}return An;};zf=AZ("Width");if(parseInt(Ag,10)===1){zf=Ai(zf);}if(Ag===2){zf=Math.min(zf,AZ("Height"));}return zf;},zoom:function N(Ac){var Aa=(Ac!==null)?String(Ac).split(":"):[],Af=parseInt(Aa[0],10),Ag=Aa[1],AZ=AN.parse(Ag),Ab=false;if(isNaN(Af)||(!Af&&isNaN(AZ))){return ;}var Ad=this.model;if(Af===1||Af===2){Ag=AN.format(this.getRequiredZoomFactor(Af));Ab=parseInt(Math.abs((AN.parse(Ag)-Ad.getZoomFactor())*100),10)>2;}else{Ab=Ag!==AN.format(Ad.getZoomFactor());}if(Af!==Ad.zt||Ab){Ad.zoomFactorUpdating=true;var Ah=this;Ad.getDataService().setDocZoom({zoomType:Af,zoomFactor:Ag,rwb:Ah.model.bs,currLayoutKey:Ad.currlaykey},{success:function(Al){Ad.zoomFactorUpdating=false;if(Af!==0){var An=Ah.view.children,Ak;for(Ak in An){var Am=An[Ak];if(Am.k===Ah.model.currlaykey){continue;}if(Am.defn){Am.defn.loaded=false;}}}Ad.zt=Al.zt;Ad.replaceLayout(Al.currlaykey,Al);Ad.raiseEvent({name:"rebuildLayout"});X(Ah,false);Ah=null;},failureName:"zoom.set"});}else{if((Af===1||Af===2)&&this.view.selected){Ad.zoomFactorUpdating=false;var Ae=this.view.selected.docLayout,Aj=Ae&&(Ae.containerNode||Ae.domNode),Ai=Aj&&Aj.style;if(Ai){Ai.visibility="visible";}}}},syncZoom:function(){var AZ=this.model,Aa=AN.format(AZ.getZoomFactor());mstrApp.serverRequest({taskId:"setDocZoom",rwb:AZ.bs,styleName:"EmptyStyle",zoomFactor:Aa,zoomType:AZ.zt,layoutKey:AZ.currlaykey},null);},exportCmd:function AP(Af,An,Ar,Ap){An=typeof An!=="string"?undefined:An;if(!window.FormWrapper){var Ai=this.model,Ae=this.view,AZ=(parseInt(Af,10)===j)?3130:3132,Aj=Ai.exopt,Am=Ai.huc&&Af===AR,Ah=Aj.s&&(Af===q||Af===AV)&&!An,Al=false,Aq=false;if(Ah){if(!!(Ai.defn&&Ai.defn.layouts&&Ai.defn.layouts.length>1)){Aq=true;}else{var Ad=Ae.selected,As=Ad&&Ad.gb&&Ad.children[1];Al=(!As||As.areUnitsSetToAll());if(Al){Ah=false;}}}var Ag=function(){var Av={evt:AZ,src:mstrApp.name+"."+AZ};if(AZ===3132){Av.executionMode=Af;if(An!=null){Av.gridKey=An;}if(Ar>0){Av.sliceId=Ar;}}if(!Ah){Av.rwb=Ai.bs;}else{var At=[[2048062,Ai.bp+".2048062","mode",Aj.m,"range",Aj.r],[]];S.forEach(Av,function(Ax,Aw){if(Aw==="executionMode"){At[1]=At[1].concat([Aw,Ax]);}else{At[1].push(Ax);}});Av.evt=1024001;Av.src=Ai.bp+".1024001";Av.events=AE.serializeValueGroup(At);Av["1024001"]=1;Av.messageId=Ai.mid;}Av.name=Date.parse(new Date());var Au=function(){var Aw=(!(Aj.n)&&Af===AV&&(r.isIE||r.isIEW3C))?"GET":"POST";u.checkSessionAndSendForm(Av,null,Aw,(Aj.n)?"_blank":"mstrExportWindow");};if(!r.isIE||Af!==AR){Au();}else{mstrmojo.alert(A(5873),Au);}};var Ac;if(Ah||Am){Ac=function(){var Au="mojoExOpx9",At=function(){mstrmojo.all.mojoExOpx9.destroy();};mstrmojo.insert({scriptClass:"mstrmojo.Editor",id:Au,title:A(971),cssClass:"mstrmojo-dta export",btnAlignment:"right",onClose:At,draggable:false,buttons:[D(A(1442),function(){var Av=mstrmojo.all[Au];if(Aq){Aj.r=Av.ctrlLyt.selectedIndex;}if(!Al){Aj.m=(Av.ctrlChk.checked)?0:1;}At();Ag();},true),D(A(2140),At)],children:[{scriptClass:"mstrmojo.Label",cssClass:"ucalert",text:A(7482),visible:Am},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"exp_opts",cssDisplay:"block",alias:"ctrlLyt",visible:!!Aq,selectedIndex:Aj.r,items:[{n:A(14583),v:0},{n:A(14582),v:1}]},{scriptClass:"mstrmojo.CheckBox",label:A(5165),cssDisplay:"block",alias:"ctrlChk",visible:!mstrApp.isVI&&!Al&&Ah,checked:(Aj.m===0)}]}).render();};}if(Af===q&&Aj.ds["3809"]!==undefined&&!An){mstrmojo.confirm(A(3809),{confirmBtn:{fn:Ac||Ag,t:A(1442)},cancelBtn:{t:A(2140)}});}else{if(mstrApp.isVI&&Ap&&Af==AV){var Aa;if(An){Aa=mstrmojo.vi.ui.editors.ExportPDFEditor.singleVisSettings;}var Ak=function(Av){var Aw={evt:3132,src:mstrApp.name+"."+3132};Aw.executionMode=AV;if(An){Aw.gridKey=An;}var At=[[2048062,Ai.bp+".2048062"],[]];S.forEach(Av,function(Ay,Ax){At[0].push(Ax);At[0].push(Ay);});S.forEach(Aw,function(Ay,Ax){if(Ax==="executionMode"){At[1]=At[1].concat([Ax,Ay]);}else{At[1].push(Ay);}});Aw.evt=1024001;Aw.src=Ai.bp+".1024001";Aw.events=AE.serializeValueGroup(At);Aw["1024001"]=1;if(Ai.mid){Aw.messageId=Ai.mid;}Aw.name=Date.parse(new Date());var Au=function(){u.checkSessionAndSendForm(Aw,null,"post",(Ai.n)?"_blank":"mstrExportWindow");};if(!r.isIE||Af!==AR){Au();}else{mstrmojo.alert(A(5873),Au);}};var Ab=new mstrmojo.vi.ui.editors.ExportPDFEditor({exOpts:Aa,exportHandler:Ak,singleVis:!!An});Ab.open();}else{if(!Ap&&Ac){Ac();}else{Ag();}}}}else{if(An!==undefined){var Ao={3:{mode:"2",version:""},4:{mode:"1",version:"4"},10:{mode:"5",version:""}};FormWrapper.doExport(Ao[Af].mode,Ao[Af].version,An);}}},printPDF:function T(AZ){var Aa=this;if(window.FormWrapper){Aa.exportCmd(AV,AZ,null,true);}else{mstrApp.featureFlagsCache=mstrApp.featureFlagsCache||{};if(mstrApp.featureFlagsCache["EE/NewEEExportOption"]===undefined){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(Ab){mstrmojo.hash.copy(Ab,mstrApp.featureFlagsCache);Aa.exportCmd(AV,AZ,null,Ab["EE/NewEEExportOption"]);}},{taskId:"getNeeFeatureFlags"});}else{Aa.exportCmd(AV,AZ,null,mstrApp.featureFlagsCache["EE/NewEEExportOption"]);}}},exportExcel:function f(AZ){this.exportCmd(q,AZ);},exportCSV:function P(AZ){this.exportCmd(AM,AZ);},exportHTML:function a(){this.exportCmd(j);},exportMSTR:function Z(){var Ac=this,Ad=Ac.isDocChanged&&Ac.isDocChanged(),Aa=mstrmojo.resolveFeature(w.SAVE_ANALYSIS),Ab=Ad?Aa:true,AZ=function AZ(Ae){Ac.exportCmd(Ae);};if(Ab){g(this,null,"",A(15504,"You must save your dossier before continuing."),AZ,h,{saveAsOrigin:14},true);}else{mstrmojo.alert(A(12933,"You do not have enough privileges to perform this operation"));}},openHome:function G(AZ){AY({evt:3010,src:mstrApp.name});},updateZoom:function M(){X(this,false);},resetSelections:function AQ(){var Ab=this,Aa=Ab.model,AZ=!!Aa.hasGroupby;Aa.getDataService().resetSelections(null,AZ,{success:function(Af){var Ai=Ab.view.children,Ac=(Ai&&Ai.length)||0,Aj=Aa.getCurrentLayoutKey(),Ae;for(Ae=0;Ae<Ac;Ae++){var Ag=Ai[Ae];if(Ag.defn&&Ag.defn.loaded&&Aj!==Ag.k){Ag.defn.loaded=false;}}if(AZ){Aa.loadLayout(Af);return ;}if(Af.pukeys){var Ah=Aa.partialUpdate(Af.data,Aa.getUnitDefinitions(Af.pukeys)),Ad=Aa.getLayoutDataCache(Aa.getCurrentLayoutKey());S.forEach(Ah.upd,function(Am,Ao){var Al=mstrmojo.all[Ao];if(Al&&Al.defn&&Al.defn.t===mstrmojo.EnumRWUnitType.PANELSTACK){var Ak=Ad&&Ad[Ao]&&Ad[Ao].data,An=Ak&&Ak.selKey;if(An&&Al.selectedKey!==An){Al.defn.set("selKey",An);}Al.setDirtyChildren();}});}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo.ui.ColumnWalk","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ConditionModel","mstrmojo.rw.ConditionWalkProvider");var S=mstrmojo.Widget,J=mstrmojo.array,F=mstrmojo.dom,O=mstrmojo.hash,A=mstrmojo.mstr.EnumNodeDimty,K=mstrmojo.rw.ConditionWalkProvider.setTip,Q=mstrmojo.expr,I=Q.ET;var C=mstrmojo.desc(11899,"Select a dataset object.");var M=J.hash([A.NodeDimtyOutputLevel]);function E(){var W=this.model;if(W){if(!W.attachEventListener){O.make(W,mstrmojo.ConditionModel,{});}W.attachEventListener("edit",this.id,"onmodeledit");}}function N(X,W){if(W&&W.detachEventListener){W.detachEventListener("edit",X.id,"onmodeledit");}}function P(b,W){var Z=W,a=[],Y=[],X=[],c=false;O.forEach(Z,function(d){a=a.concat(d.att.filter(function(e){return e.did===b;}));});c=a[0]&&a[0].da;a.forEach(function(d){Y=Y.concat(d.fs||[]);});Y.forEach(function(d){if((d.obf||c)&&X.filter(function(e){return e.did===d.fid;}).length===0){X.push({did:d.fid,dtp:mstrmojo.expr.mapBaseFormTypeToDataType(d.bftp),n:d.fnm,t:d.t,isbf:d.isbf});}});return X;}function D(b,W){var X,Z=W,a,Y=false;if(typeof microstrategy!=="undefined"){Z=Z||microstrategy.bones.rwb_viewer.datasetInfos;}O.forEach(Z,function(c){X=c.mx;O.forEach(X,function(d){if(d.did===b){a=c;Y=d.um||d.rdm;return false;}});return !a;});return Y&&a&&a.isMDX;}mstrmojo.rw.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasPopup],{scriptClass:"mstrmojo.rw.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},walkNode:function(){return this.domNode.children[1];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function L(){S.visibleMarkupMethod.call(this);if(this.visible){this.initWalk();}},onheightChange:S.heightMarkupMethod,onwidthChange:S.widthMarkupMethod},layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",applyNode:"auto"},xt:true},editor:undefined,columnWalk:undefined,tip:undefined,walkProvider:null,objectBrowsingEnabled:true,postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=mstrmojo.insert(mstrmojo.rw.ConditionWalkProvider);}},initWalk:function R(){var W=this.columnWalk,X=this.walkProvider;K.call(this,C);W.removeTrailingContainer(-1);W.addNextColumn(X.getTargetNodeProps());W.target.updateColumnContainer();this.updateOkBtn();},updateBrowseElementsParams:function(Z,Y){Z.attributeID=Y.did;Z.otp=Y.t||12;var X=this.editor,W=X&&X.onUpdateBrowseElementsParams;if(W){W.call(X,Z,Y);}},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"750px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var W=this.parent;if(W.close){W.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var W=this.parent;if(W.onOK){W.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:C,ignoreLayout:true}],eb:{scriptClass:"mstrmojo.Editor",cssClass:F.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(X){var W=this.parent.opener;W.updateBrowseElementsParams(X,W.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-WebButton hot",cssText:"width: 66px;",onclick:function(){var W=this.parent.parent,X=W&&W.opener;if(X){X.onEBSelect();X.closePopup();}}},{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-WebButton",cssText:"min-width: 66px; margin-left: 11px;",onclick:function(){var W=this.parent.parent,X=W&&W.opener;if(X){X.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,upButtonVisible:true,scrollableIncFetch:true,showCompletePath:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true,minSearchLength:1}]},_set_model:function U(Z,W){var X=this.model,Y=(W!==X);if(Y){N.call(this,X);W.dimtyTypes=this.dimtyTypes||M;this.model=W;E.call(this,W);if(this.hasRendered&&this.visible){this.columnWalk.target.updateColumnContainer();}}return Y;},onmodeledit:function H(X){var W=X.prop,Z=W==="c0"||W==="c1",Y=this.columnWalk[Z?"c0":W];if(Z){Y.c1Selected=W==="c1";}Y.updateColumnContainer();Y.c1Selected=false;this.updateOkBtn();},browse:function G(Y){var a=this.parent.editorNode,Z=function(c,e){var b=mstrmojo.dom.position(c,true),d=mstrmojo.dom.position(e,true);return{x:b.x+b.w,y:d.y};},W=this.columnWalk,X=this.walkProvider;switch(Y&&Y.alias){case"target":case"dmy":X.browseObjs(this,Y,Z(Y.alias==="target"?W.target.domNode:this.dmyNode,a));break;case"c0":case"c1":X.browseObjs(this,Y,Z(W.c0.domNode,a));break;case"es":X.browseEs(this,Y,Z(W.es.domNode,a));break;}},onOBSelect:function(a){var Y=this.ob.browser,c=Y.target;this.closePopup();var X=this.targets,b=c.itemIdField,Z=X||[],W=J.find(X,b,a[b]);if(W===-1){Z.push(a);this.targets=Z;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}c.setSelectedItems([a],c.multiSelect);if(c.onObjBrowsed){c.onObjBrowsed(a);}},onEBSelect:function(){var X=this.eb.browser,Z=this.columnWalk.es.es;Z.set("selectedIndices",{});var W=Z.items,Y=[];J.forEach(X.selectedItems||[],function(b){if(J.find(Z.items,"v",b.v)<0){Y.push(b);}});var a=Z.insertUnlistedValuesAt||0;if(a<0){a=W.length;}Z.set("items",W.slice(0,a).concat(Y).concat(W.slice(a)));Z.setSelectedItems(X.selectedItems,false);},destroy:function T(X){var W=this.walkProvider;if(W&&W.destroy){this.walkProvider.destroy();}this._super(X);},updateOkBtn:function V(){var Z=true,W=this.model,X,Y=W&&Q.fnCstCount(W.fn,W.fnt);if(!W){return ;}switch(W.et){case I.AQ:case I.AL:case I.MQ:for(X=0;X<Y;X++){Z=Z&&!this["invalid"+X];}break;}Z=Z&&!!W.completed;this.okBtn.set("visible",Z);this.raiseEvent({name:"conditionWalkUpdateOkBtn",valid:Z});}});mstrmojo.rw.ConditionWalk.getAttForms=P;mstrmojo.rw.ConditionWalk.isMdxDM=D;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui.menus.MenuConfig","mstrmojo.mstr.ui.EnumWebPromptsList","mstrmojo.form","mstrmojo.IVEDatasetPicker","mstrmojo.mstr.MDXCubeBrowser","mstrmojo.NewFolderEditor","mstrmojo.CustomGroupEditor","mstrmojo.mstr._ObjectActions","mstrmojo.mstr.ui.MstrFileUploadHelper");var D=mstrmojo.tstid,H=mstrmojo.dom;var B={BLANK:"05B202B9999F4C1AB960DA6208CADF3D",XDA:"1ADEAA2C4754E2DE5DFEC08022DAFDC6",ICUBE:"DB8D5B064BBE3C24F541DAA81A507FDC"};function C(O,M,P,N){if(window.iframe){window.iframe.showWaitPage(true);}mstrmojo.form.send(O,M,P,N);}function I(M){if(mstrApp.currentFolderId){M.saveFolderId=mstrApp.currentFolderId();}}function E(O,S){function Q(a){function b(d){if(d){C(d.params,null,"post");}}var Y=a.config;if(a.config.did===B.ICUBE){var c="mstr-create-objectExpl",Z=mstrmojo.all[c];if(!Z){Z=new mstrmojo.IVEDatasetPicker({id:c,cssClass:"mstr-create-menu-cubePicker",title:mstrmojo.desc(4354,"Select Intelligent Cube"),help:"Select_Intelligent_Cube_dialog_box.htm",onOk:function(){Y.params={evt:3005,src:U+".3005",srcType:2,srcID:this.item.did,reportDesignMode:1,name:"editReport"};I(Y.params);b(Y);},onCancel:function(){Z.close();},onRender:function(){var f=false,e=this;this.btnImport.set("visible",f);this.newLabel.set("visible",f);this.useExistingLabel.set("visible",f);this.ob.set("scrollableIncFetch",false);this.btnHBox.destroyChildren();var d=mstrmojo.Button.newWebButton(mstrmojo.desc(547,"Select"),function(){if(this.enabled){e.onOk();e.onCancel();}},true);d.bindings={enabled:function(){return this.parent.parent.multiSelect?!!this.parent.parent.selectedItems.length:!!this.parent.parent.item;}};this.btnHBox.addChildren([d,mstrmojo.Button.newWebButton(mstrmojo.desc(221,"Cancel"),function(){e.onCancel();},false)]);}});}if(Y.title){Z.set("title",Y.title);}if(Y.cssClass){Z.set("cssClass",Y.cssClass);}Z.open();}else{if(a.config.did===B.XDA){(new mstrmojo.mstr.MDXCubeBrowser({onClose:function(){this.destroy();},onOK:function(d){var e={evt:3005,src:(mstrApp.servletName||mstrApp.name)+".3005",srcType:1,srcID:d.did,reportDesignMode:1};I(e);C(e);}})).open();}else{if(Y.did){b(Y);}}}if(a.menuOpener.createMenu&&a.menuOpener.createMenu.close){a.menuOpener.createMenu.close();}return true;}function T(b,Y){var a=b.config,Z='<a class="mstrMenuItem subMenuItem '+a.name+' {@cls} {@newGroup}" idx="{@idx}" value="'+a.value+'"title="'+(a.desc||"")+'"><span class=""></span><span class="label">{@n}</span></a>';return Z;}var M=this,P=mstrmojo.hash.clone(S||M.createMenuData.rl)||[{n:mstrmojo.desc(3693,"(None)")}],U=mstrApp.servletName||mstrApp.name;for(var R=0;R<P.length;R++){if(P[R].did===B.BLANK){var N=P[R];P.splice(R,1);P.splice(0,0,N);continue;}if(P[R].did===B.XDA||P[R].did===B.ICUBE){var N=P[R];P.splice(R,1);P.splice(1,0,N);continue;}}for(var R=0;R<P.length;R++){var V=false;var W=P[R].did;if(W===B.ICUBE){if(mstrmojo.resolveFeature("web-define-view-report")){V=true;}}else{V=true;if(!mstrmojo.resolveFeature("template-reports")||(W===B.BLANK&&(!mstrmojo.resolveFeature("design-mode")||!mstrmojo.resolveFeature("modify-report-list")))||(W===B.XDA&&(!mstrmojo.resolveFeature("dhtml")||!mstrmojo.resolveFeature("web-define-view-report")||!mstrmojo.resolveFeature("define-query-report-builder")))){V=false;}}if(!V){continue;}var X;if(P[R].t===8){X=K(P[R],M,O,E);}else{X=O.addCustomMenuItem(P[R].n,"",Q,T);P[R].params={reportID:P[R].did,blank_reportDesignMode:1,reportDesignMode:((mstrmojo.resolveFeature("design-mode")&&(this.reportCreationViewMode!="0"))?4:0),evt:3005,src:U+".3005",reportViewMode:1,promptStyle:"PromptsTransformCreateReport",promptsExecuteStyle:"PromptsTransformClassicSave",promptsCreateStyle:""};I(P[R].params);if(P[R].did===B.BLANK){P[R].params.reportDesignMode=1;}X.config=P[R];X.menuOpener=M;}}}function A(P){function U(X){var Y={DssXmlViewMediaViewStatic:1,DssXmlViewMediaViewInteractive:2,DssXmlViewMediaViewEditable:4};var W=Y.DssXmlViewMediaViewStatic;if(X!==0){if((X&Y.DssXmlViewMediaViewEditable)>0){W=Y.DssXmlViewMediaViewEditable;}else{if((X&Y.DssXmlViewMediaViewInteractive)>0){W=Y.DssXmlViewMediaViewInteractive;}else{if((X&Y.DssXmlViewMediaViewStatic)>0){W=Y.DssXmlViewMediaViewStatic;}}}}return W;}var O=this,R=O.createMenuData.dl,V=O.createMenuData.docList,S=mstrApp.servletName||mstrApp.name;function Q(W){var Y="";if(!W){return Y;}for(var X=0;X<W.length;X++){Y+='<a title="'+W[X].n+" - "+W[X].desc+'" id = vt_'+W[X].did+' class="dashboardStyleTemplate mstrMenuItem subMenuItem" idx="{@idx}" rwviewmode = "'+U(W[X].avm)+'" data-id = "'+W[X].did+'"></a>';}return Y;}function N(W){if(!W){return"";}var Y="";for(var X=0;X<W.length;X++){Y+='<a class="mstrMenuItem subMenuItem {@cls}" title = "'+W[X].desc+'" idx="{@idx}" data-id = '+W[X].did+' rwviewmode = "'+U(W[X].avm)+'" >'+W[X].n+"</a>";}return Y;}function M(){var Y='<div class = "mstr-dashboard-subMenu dashboardTemplates">'+Q(R)+"</div>";var X='<div class = "mstr-dashboard-subMenu docList" >'+N(V)+"</div>";var W="";if(R){W+=Y;}if(V){W+="<hr>"+X;}return W;}function T(X,W){var Y={blank_rwDesignMode:1,rwDesignMode:1,evt:3104,src:S+".3104",createDocument:"*-1.*-1.0.0.0"};Y.rwViewMode=W._evtTarget.getAttribute("rwviewmode");Y.objectID=W._evtTarget.getAttribute("data-id");I(Y);C(Y,null,"post");return true;}P.addCustomMenuItem("DashDoc Templates","",T,M);}function G(T){function S(U){C(U.config.params);return true;}function M(W,U){var V=W.config;return"<a "+D(V.name+"Item")+' class="mstrMenuItem subMenuItem '+V.name+' {@cls} {@newGroup}" idx="{@idx}" value="'+V.value+'"><span class=""></span><span class="label">{@n}</span></a>';}var N=mstrmojo.mstr.ui.EnumWebPromptsList.get();for(var O=0;O<N.length;O++){var R=N[O],Q=mstrmojo.desc(R.descId)||R.n,P=T.addCustomMenuItem(Q,"",S,M);P.config=R;}}function K(O,R,M,N){if(!O.items&&!O.loading){O.loading=true;var Q=new mstrmojo.SimpleXHR({async:false});Q.request("POST",mstrConfig.taskURL,{success:function P(T){var U=T.items||[];if(U.length===0){U.push({n:mstrmojo.desc(3693,"(None)")});}O.items=U;delete O.loading;}},{folderID:O.did,taskId:"folderBrowse",styleName:R.folderBrowsingStyle,includeObjectDesc:true});}return M.addPopupMenuItem(O.n,"",function S(){var T=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstr-create-menu",hostProxyCssClass:"mstrmojo-create-menu-host",isHostedWithin:false,includeScroll:false,alignWithAnchor:true});N.call(R,T,O.items);return T;});}function J(N){var O=this,M=N;return function(){var R=document.querySelector("[tstid="+N+"Item]"),Q=H.position(R),P=mstrmojo.insert({scriptClass:"mstrmojo.ui.menus.MenuConfig",menuCssClass:"mstr-create-menu",hostProxyCssClass:"mstrmojo-create-menu-host",noInheritTheme:true,tstid:N+"Sbm",supportsScroll:true,isHostedWithin:false,includeScroll:false,alignWithAnchor:true,maxHeight:Math.max(H.windowDim().h-Q.y-30,100)});switch(M){case"template":E.call(O,P);break;case"templateDoc":P.menuCssClass=P.menuCssClass+" mstr-dashboard-subMenu collapse";A.call(O,P);break;case"prompt":G.call(O,P);break;}return P;};}function F(Y){var N=this,S=N.createMenuData.sl;var Z=mstrmojo.all["mscld-create-menuList"],U=mstrApp.servletName||mstrApp.name;if(!Z){var V=mstrmojo.insert({scriptClass:"mstrmojo.ui.menus.MenuConfig",menuCssClass:N.cssClassName+" collapse",hostProxyCssClass:N.hostCssClassName,anchorElement:Y.domNode,hostId:Y.id,isHostedWithin:false,includeScroll:false,tstid:"createMenu"});if(N.alignMenuToRight){V.setAlignment(mstrmojo.ui.PopupConfig.ENUM_CORNERS.BOTTOM_RIGHT,mstrmojo.ui.PopupConfig.ENUM_CORNERS.TOP_RIGHT);}function T(f,c){var e=f.config;var d="<a "+D(e.name+"Item")+' class="mstrMenuItem '+e.name+' {@cls} {@newGroup}" idx="{@idx}" onclick=" mstrmojo.all[\''+N.id+"'].onclick('"+f.name+'\',event)" href="'+e.href+'" useIframe="'+e.iframe+'"';if(e.accept!==undefined){d+=' accept = "'+e.accept+'"';}d+=' name="'+e.name+'"><span class="micn"></span><span>{@n}</span></a>';return d;}function X(f,c){var e=f.config;var d="<label "+D(e.name+"Item")+' for ="myFile" class="mstrMenuItem '+e.name+' {@cls} {@newGroup}" idx="{@idx}" onclick=" mstrmojo.all[\''+N.id+"'].onclick('"+f.name+'\',event)" href="'+e.href+'" target="'+e.target+'" useIframe='+e.iframe+'"';if(e.accept!==undefined){d+=' accept = "'+e.accept+'"';}d+='name="'+e.name+'"><span class="micn"></span><span>{@n}</span></label>';return d;}function Q(d){if(d.config.name==="folder"){var c=mstrmojo.insert({scriptClass:"mstrmojo.NewFolderEditor",fId:mstrApp.currentFolderId?mstrApp.currentFolderId():"",Index:Z.domNode.style.zIndex+10,navigateAfter:true,okFn:function(){var e=this,f={evt:2001,src:U+"."+mstrApp.pageName+".fbb.fb.2001",folderID:e.fId};C(f,mstrApp.name,"POST");},onClose:function(){this.destroy();}});c.open();}if(Z&&Z.close){window.setTimeout(function(){Z.close();},10);}return true;}var M=false;for(var R=0;R<S.sl.length;R++){var P=S.sl[R];if(P.grp){V.addSeparator();}var b={},O=M===false?"":"collapsable ";if(P.name==="prompt"||P.name==="template"||P.name==="templateDoc"){b=V.addPopupMenuItem(P.n,V.id,J.call(N,P.name));b.cls=b.cls+O+P.name;b.tstid=P.name+"Item";}else{if(P.name==="myFile"){b=V.addCustomMenuItem(P.n,O,Q,X);var a='<form id="import_form" class="mstrmojo-FileUploadBox" target="hidden_import_iframe" enctype="multipart/form-data" method="post" action="'+mstrConfig.taskURL+'"><input id="myFile" name="myFile" type="file" class="mstrmojo-FileUploadBox-file mstr-create-menu-fileUpload" size="30" onchange="mstrApp.uploadMstrFileFn.upload(\'import_form\');" accept=".mstr" title=""><input type="hidden" name="fileFieldName" value="myFile"><input type="hidden" name="taskId" value="importAsyncSaveRWD"><input type="hidden" name="taskEnv" value="jsonp2"><input type="hidden" name="jsonp" value="parent.mstrApp.uploadMstrFileFn.callback(@R@)"><input type="hidden" name="myfile" value=""><input type="hidden" name="folderID" value="" id="import_folderID"></form>';a+='<iframe name="hidden_import_iframe" style="display:none;" src="about:blank"></iframe>';if(!document.getElementById("import_form")){var W=document.createElement("SPAN");W.innerHTML=a;document.body.appendChild(W);}}else{b=V.addCustomMenuItem(P.n,O,Q,T);b.tstid=P.name;}b.config=P;if(P.name==="folder"){b.config.params={evt:17001,src:U+"."+mstrApp.pageName+".OMDCreateFolder.17001",targetName:"fb",iframe:true,target:"frameManager"};}}b.name=P.name;}Z=V.newInstance({id:"mscld-create-menuList"});}Z.set("includeScroll",false);Z.open(Y);N.createMenu=Z;Z.onClose=function(){Y.toggleButtonClass(false);};}function L(O){var S=this,Q=S.createMenuData;function M(U){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function T(V){U.createMenuData.dl=V.items;U.createMenuData.loadData.dlLoaded=true;P();}},{folderID:"FCA4BAFE4AF0D00088028989D7497A4F",taskId:"folderBrowse",styleName:U.folderBrowsingStyle,includeObjectDesc:true,objectType:"55"});mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function T(V){U.createMenuData.docList=V.items;U.createMenuData.loadData.dlLoaded=true;P();}},{folderID:"6C87013036D94E65B9FD227CF919327E",taskId:"searchMetadata",styleName:U.folderBrowsingStyle,recursive:1,includeAncestorInfo:false,includeObjectDesc:true,objectType:"14081"});}function R(U){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function T(V){U.createMenuData.rl=V.items;U.createMenuData.loadData.rlLoaded=true;P();}},{taskId:"folderBrowse",systemFolder:"16",styleName:U.folderBrowsingStyle,includeObjectDesc:true,objectType:"55"});}function P(){if(S.createMenuData.sl&&N(S.createMenuData.loadData)){F.call(S,O);}}if(!Q){S.createMenuData={};mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(V){var U;S.createMenuData.sl=V;S.createMenuData.loadData={};for(U=0;U<V.sl.length;U++){var T=V.sl[U]["feature-id"];switch(T){case"create-view-reports":S.createMenuData.loadData.rlLoaded=false;R(S);break;case"template-documents;dhtml;documents-design-mode":S.createMenuData.loadData.dlLoaded=false;M(S);break;}}P();}},{taskId:"getShortcutsList",pageName:"createOptions"});}else{P();}function N(V){if(!V){return true;}var U=true;for(var T in V){U=U&&V[T];}return U;}}mstrmojo.mstr.ui.CreateMenu=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.mstr._ObjectActions],{scriptClass:"mstrmojo.mstr.ui.CreateMenu",hostCssClassName:"mstrmojo-create-menu-host",cssClassName:"mstr-create-menu",opener:null,folderBrowsingStyle:"MobileFolderStyle",onclick:function(M,N){if(M!=="myFile"){mstrmojo.dom.preventDefault(window,N);}switch(M){case"customGroup":this.openCustomGroupEditor({});break;case"metric":this.openMetricEditor({});break;case"queryBuilder":this.openDataImport({});break;case"filter":this.createFilter();break;case"scNewIVE":this.createDashboard();break;case"appSchema":location.href="?evt=3199&src="+mstrApp.name+".3199";break;}},loadCreateMenu:function(){if(!this.opener){return ;}L.call(this,this.opener);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css","mstrmojo.array","mstrmojo.Model","mstrmojo.IncFetch","mstrmojo.Label","mstrmojo.ui.ButtonBar","mstrmojo.ui.List","mstrmojo.mstr.search.SearchIconView","mstrmojo.mstr.search.SearchGridView","mstrmojo.mstr._ObjectActions");mstrmojo.requiresDescs(3364,3366,9202,14557);var D=mstrmojo.desc,H=mstrmojo.css,C=mstrmojo.hash;mstrmojo.mstr.search.SearchResults=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.mstr.search.SearchResults",markupString:'<div id="{@id}" class="mstrmojo-SearchResults {@cssClass}"><div class="mstrmojo-SearchResults-list"></div><div class="mstrmojo-SearchResults-toolbar"></div><div class="mstrmojo-SearchResults-if"></idv></div>',markupSlots:{listNode:function(){return this.domNode.firstChild;},toolbarNode:function(){return this.domNode.childNodes[1];},incFetchNode:function(){return this.domNode.lastChild;}},markupMethods:{onresultsChange:function(){if(this.hasRendered){this.listNode.style.height=this.results&&this.results.items&&this.results.items.length>0?"":0;}}},height:"430px",supportIncFetch:true,results:{},iconView:false,init:function I(L){if(this._super){this._super(L);}this.addChildren([this.getViewRef(),{scriptClass:"mstrmojo.Label",alias:"notFoundMsg",cssText:"text-align: center",allowHTML:true,visible:false,ontextChange:function(){this.set("visible",!mstrmojo.string.isEmpty(this.text));},slot:"listNode"},{scriptClass:"mstrmojo.ui.ButtonBar",items:[{n:"Icon View",v:1,css:"iconView"},{n:"Grid View",v:2,css:"gridView"}],showIcon:true,cssClass:"viewModesButtonBar",selectedIndex:1,postselectionChange:function(O){var P=this.items,Q=P[O.added[0]],R=P[O.removed&&O.removed[0]];if(Q.v!==R.v){this.parent.set("iconView",Q.v===1);}},bindings:{visible:function(){return !this.parent.notFoundMsg.visible&&this.parent.list.visible;}},slot:"toolbarNode"}]);if(this.supportIncFetch){var M=this;this.addChildren([{scriptClass:"mstrmojo.IncFetch",alias:"incFetch",slot:"incFetchNode",np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onifsChange:function N(O){mstrmojo.hash.copy(O.value,this);if(this.np>1){this.children=null;this.refresh();}H.toggleClass(this.domNode,"show",this.np>1);},onfetch:function K(O){M.onfetch(O);}}]);}},getViewRef:function F(){var K=this.iconView?"mstrmojo.mstr.search.SearchIconView":"mstrmojo.mstr.search.SearchGridView";return{scriptClass:K,alias:"list",slot:"listNode",bindings:{visible:function(){return this.items&&this.items.length>0;}}};},oniconViewChange:function A(){this.removeChildren(this.list);this.addChildren([this.getViewRef()]);this.renderChildren();this.onresultsChange();},onresultsChange:function J(){this.list.set("items",this.results&&this.results.items);this.updateNotFoundMsg();this.updateIncFetch();},updateNotFoundMsg:function G(){var K=this.parent,L=K?K.getNotFoundMsg():"";this.notFoundMsg.set("text",K.hasUserInput()&&C.isEmpty(this.results&&this.results.items)?L:"");},updateIncFetch:function B(){var K=this.results;if(this.supportIncFetch){var L=this.getTotalSize(),N=K.bb,M=K.bc;this.incFetch.set("ifs",{np:Math.floor(L/M)+((L%M>0)?1:0),cp:Math.floor(N/M)+((N%M>0)?1:0)});}},getTotalSize:function E(){return Math.min(this.maxSearchResults,this.results.sz);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo._FormatDefinition","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.string","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.rw.GhostImageContainer","mstrmojo.vi.ui.rw.FreezingImageContainer");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var N=document.getElementById("vis-measure-canvas"),E=document.getElementById("vis-measure-span"),e={},M={},p={},AC=mstrmojo.dom,c=mstrmojo.elementHelper,AT=mstrmojo.vi.ui.DatasetUnitMenuUtils,U=mstrmojo.VisEnum.EnumColorRankMode,o=mstrmojo.chart.model.enums.EnumDSSObjectType,AL=mstrmojo.chart.model.enums.EnumDSSBaseFormType,AR=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,AV=mstrmojo.chart.enums.EnumFontStyle,W=mstrmojo.hash,b=mstrmojo.string,Ac=mstrmojo.func.wrapMethods,Y=mstrmojo.VisEnum,Q=mstrmojo._FormatDefinition,Af=Y.SERVER_JSON_ERROR_TYPE,v=mstrmojo.vi.viz.EnumVizStyles,AM=mstrmojo.vi.enums.EnumFeatures,D=mstrmojo.vi.ui.rw.FreezingImageContainer,Aa=mstrmojo.vi.ui.rw.GhostImageContainer;var t=64,AE=128,C=4,x=5,a=6,F=7,d=mstrmojo,S=d.array,Ad=mstrmojo.array,A=d.desc,h=d.mstr.EnumFunction,T=mstrmojo.vi.enums.EnumDerivedElementType,AY=d._HasMarkup,Ab=d.css;var P;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869,11819,11827);function Ae(Ak,Aj){var Ai=mstrmojo.VisUtility;var Al=Ai.pluck(Aj,"tid"),Am=Ai.pluck(Aj,"eid"),Ah=(Ak.getDocModel&&Ak.getDocModel())||Ai.getPropertyByPath(Ak,"model.docModel");if(Ai.getPropertyByPath(Ah,"getColorBy") instanceof Function){return Ah.getColorBy(Al,Am);}}function AZ(Ah,Aj,Al){var Ak=Aj.id,Ai=Aj.getHost();if(Ai&&Ai.observableModel){Ah.forEach(function(An){var Am=Ai.observableModel[An];if(Am){Am.attachEventListener("valueChanged",Ak,Al);}});}}function Ag(Ai){var Ah={SINGLE:[{text:A(358,"Absolute"),value:h.FunctionAbs,n:A(358,"Absolute"),v:h.FunctionAbs}],PAIR:[{text:A(6017,"Add"),value:h.FunctionAdd,n:A(6017,"Add"),v:h.FunctionAdd},{text:A(2122,"Average"),value:h.FunctionAverage,n:A(2122,"Average"),v:h.FunctionAverage},{text:A(5868,"Least"),value:h.FunctionLeast,n:A(5868,"Least"),v:h.FunctionLeast},{text:A(5869,"Greatest"),value:h.FunctionGreatest,n:A(5869,"Greatest"),v:h.FunctionGreatest},{text:"A-B",value:h.FunctionMinus+";0",n:"A-B",v:h.FunctionMinus+";0"},{text:"B-A",value:h.FunctionMinus+";1",n:"B-A",v:h.FunctionMinus+";1"},{text:"A/B",value:h.FunctionDivide+";0",n:"A/B",v:h.FunctionDivide+";0"},{text:"B/A",value:h.FunctionDivide+";1",n:"B/A",v:h.FunctionDivide+";1"}],MORE:[{text:A(6017,"Add"),value:h.FunctionAdd,n:A(6017,"Add"),v:h.FunctionAdd},{text:A(2122,"Average"),value:h.FunctionAverage,n:A(2122,"Average"),v:h.FunctionAverage},{text:A(5868,"Least"),value:h.FunctionLeast,n:A(5868,"Least"),v:h.FunctionLeast},{text:A(5869,"Greatest"),value:h.FunctionGreatest,n:A(5869,"Greatest"),v:h.FunctionGreatest}]};return Ah[Ai];}function AQ(Ai,Ah){return !!(((Ai&&Ai.at)||0)&Ah);}function X(Ah){return !Ah.cmSelCells.some(function(Ai){var Aj=Ah.getCellForNode(Ai);return c.isNonGroupNull(Aj)||!AQ(Aj,t)||Aj.dei!==undefined||Ah.model.isRecursiveAttribute(Aj.tid);});}function k(Ai){var Ah;return !Ai.cmSelCells.some(function(Aj){Ah=Ai.getCellForNode(Aj);return(c.isNonGroupNull(Ah)||!AQ(Ah,AE))||Ai.model.isRecursiveAttribute(Ah.tid);});}function V(Ak,Aj,Am,Al,Ai){var Ah=Am&&Am.func;if((Ah===Al)||(typeof Al==="string"&&Al.indexOf(Ah)===0&&Al.indexOf(";0")>0)){return ;}if(Ai){Ak.editDECalculation(Aj,Al);}else{Ak.derivedElementCalculation(Aj,Al);}}function l(At,Ar,Ap){var As=Ar&&Ar.es,Ah=(As&&As.length)||At.cmSelCells.length,Ak=(Ah===1)?"SINGLE":((Ah===2)?"PAIR":"MORE"),Aq=Ag(Ak),Aj=(Ar&&Ar.func),Al,Au=At.cmSelCells,Ai,Ao,An,Am;if(Ak==="PAIR"){if(Ar){Am=As[0].v>As[1].v;if(Am){An=As[0].n;Ao=As[1].n;Aq[4]={value:h.FunctionMinus+";1",v:h.FunctionMinus+";1"};Aq[5]={value:h.FunctionMinus+";0",v:h.FunctionMinus+";0"};Aq[6]={value:h.FunctionDivide+";1",v:h.FunctionDivide+";1"};Aq[7]={value:h.FunctionDivide+";0",v:h.FunctionDivide+";0"};}else{Ao=As[0].n;An=As[1].n;}}else{Ao=Ap(Au[0]);An=Ap(Au[1]);}Aq[C].text=Ao+" - "+An;Aq[x].text=An+" - "+Ao;Aq[a].text=Ao+" / "+An;Aq[F].text=An+" / "+Ao;Aq[C].n=Ao+" - "+An;Aq[x].n=An+" - "+Ao;Aq[a].n=Ao+" / "+An;Aq[F].n=An+" / "+Ao;}for(Al in Aq){if(typeof Aq[Al].value==="string"&&Aq[Al].value.indexOf(Aj)===0&&Aq[Al].value.indexOf(";0")>0){Ai=Aq[Al];break;}if(Aq[Al].value===Aj){Ai=Aq[Al];break;}}return{items:Aq,selectedItem:Ai};}function u(Ah,Ak){if(!Ah){return Ah;}if(Ak.length===1){return Ah[Ak[0]];}var Aj=(Ak&&Ak.length)||0,Ai;for(Ai=0;Ai<Aj;Ai++){Ah=Ah[Ak[Ai]];if(!Ah){break;}}return Ah;}function AS(Aj,Ai,Ah){return Aj.every(function(Ak){return Ak.ttp===Ai||Ak.ttp===Ah;});}function G(Ai,Al,Am){var Ak=(Al&&Al.length)||0,Aj,Ah,An=Ai;for(Aj=0;Aj<Ak-1;Aj++){Ah=Al[Aj];if(!An[Ah]){An[Ah]={};}An=An[Ah];}An[Al[Ak-1]]=Am;}function AB(Ap){var Aq,Ao,Ak,Am,Ah,An=this.model.docModel.datasets,Ai=false,Al=false,Aj={isDM:false};for(Aq in An){if(An.hasOwnProperty(Aq)){Ao=An[Aq].mx;S.forEach((Ao||[]),function(Ar){if(Ar.did===Ap){if(Ar.um||Ar.rdm){Al=true;}Ai=true;return false;}});if(Ai){break;}}}if(Al){Ah=this.model.data.gts.col;Ak=(Ah&&Ah[Ah.length-1]);if(Ak&&Ak.otp===-1){Am=Ak.es;}S.forEach((Am||[]),function(Ar){if(Ar.oid===Ap){Aj={isDM:true,id:Ar.id};return false;}});}return Aj;}function L(Ah,Ak){var An=[],Aj={act:"updateElementsPropertiesMap",epm:An},Al=[],Ai={},Ap=[Ai],Ao=this;An.push({epmk:Al,epmv:Ap});Ah.forEach(function(Ar){var As=Ar.tid,Au=Ar.tp,Aq=As===-1,At={ob:{did:Aq?"":As,tp:Au}};Al.push(At);});if(Ak&&Ak.indexOf("default")<0){Ai.v={vv:Ak};}var Am=[];Ai.k={chn:Am};Ah.forEach(function(As){var At=As.tid,Aq=At===-1,Ar;if(Aq){Ar=AB.call(Ao,As.eid);if(Ar.isDM){Am.push({emt:2,ei:Ar.id});}else{Am.push({emt:2,mt:{did:As.eid,tp:4,ql:0}});}}else{Am.push({emt:1,ei:As.eid,at:{did:At,tp:As.tp,ql:0}});}});return Aj;}function AN(Al,Aj){var Ak="00000000000000000000000000000000",Ai=Al&&Al.dropZones,Ah=S.find(Ai,"id",Aj);return Ah===-1?[]:S.filter(Ai[Ah].items,function(Am){return Am.t===4&&Am.id!==Ak;});}function AH(Am,Aj,Al,Ai,Ah){var An=Ai?Am:Am&&Am.parentNode;while(An&&(An!==Ah)){var Ak=An.getAttribute&&An.getAttribute(Aj);if(Ak!==null&&Ak.indexOf(Al)>=0){return true;}An=An.parentNode;}return false;}function AA(Ai,Aj){var Ah=W.walk("rootCtrl.docCtrl",mstrApp);if(Ah&&(typeof Ah.selectViPanel==="function")){Ah.selectViPanel(Aj);}Ai.getDocModel().selectVIUnit(Ai.parent.id,true);}var H={sessions:{},instances:[],init:function AI(){this.supportedEventTypes=[];if(window.TouchEvent){this.supportedEventTypes.push("TouchEvent");}else{if(window.PointerEvent){this.supportedEventTypes.push("PointerEvent");}}if(window.MouseEvent){this.supportedEventTypes.push("MouseEvent");}return this;},startNewSessions:function AF(Ah){var Al=this;var Aj=this;var Ai=document;var Ak=function(Av){var Aq=Ah.callbacks.start.bind(Ah.callbackThis),Ar=Ah.callbacks.change.bind(Ah.callbackThis),As=Ah.callbacks.end.bind(Ah.callbackThis),Au=Ah.callbacks.context;var An={};An.identifier=Av.identifier;An.context=W.clone(Au);An.clientX=Av.clientX;An.clientY=Av.clientY;var Ap=function Ap(Aw){var Ax=this.context;return Aq({api:Aj,event:Aw,session:this,context:Ax});};var At=function At(Ax,Aw){var Ay=this.context,A0=0,Az=0;A0=Aw.clientX-this.clientX;Az=Aw.clientY-this.clientY;this.clientX=Aw.clientX;this.clientY=Aw.clientY;var A1={api:Aj,event:Ax,deltaX:A0,deltaY:Az,session:this,context:Ay};return Ar(A1);};var Ao=function Ao(Aw){var Ax=this.context;return As({api:Aj,event:Aw,session:this,context:Ax});};An.onStart=Ap;An.onChange=At;An.onEnd=Ao;return An;};var Am=function(Ao,An){Ao.listeners={};Ao.listeners.change=function(Ap){var Aq=Al.getChangedSessions(Ap);for(var Ar=0;Ar<Aq.length;Ar++){if(Ao.identifier===Aq[Ar].identifier){return Al.sessions[Ao.identifier].onChange(Ap,Aq[Ar]);}}};Ao.listeners.end=function(Aq){var Ar=Al.getChangedSessions(Aq);for(var As=0;As<Ar.length;As++){if(Ao.identifier===Ar[As].identifier){if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(An)){Ai.removeEventListener("touchmove",Ao.listeners.change);Ai.removeEventListener("touchend",Ao.listeners.end);Ai.removeEventListener("touchcancel",Ao.listeners.end);}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(An)&&(An.pointerType&&An.pointerType!=="mouse")){Ai.removeEventListener("pointermove",Ao.listeners.change);Ai.removeEventListener("pointerleave",Ao.listeners.end);Ai.removeEventListener("pointerup",Ao.listeners.end);}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(An)&&!An.pointerType){Ai.removeEventListener("mousemove",Ao.listeners.change);Ai.removeEventListener("mouseup",Ao.listeners.end);}}}var Ap=Al.sessions[Ao.identifier].onEnd(Aq);delete Al.sessions[Ao.identifier];return Ap;}}};if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(An)){Ai.addEventListener("touchmove",Ao.listeners.change);Ai.addEventListener("touchend",Ao.listeners.end);Ai.addEventListener("touchcancel",Ao.listeners.end);}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(An)&&(An.pointerType&&An.pointerType!=="mouse")){Ai.addEventListener("pointermove",Ao.listeners.change);Ai.addEventListener("pointerleave",Ao.listeners.end);Ai.addEventListener("pointerup",Ao.listeners.end);}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(An)&&!An.pointerType){Ai.addEventListener("mousemove",Ao.listeners.change);Ai.addEventListener("mouseup",Ao.listeners.end);}}}};return function(Ap){var Aq=Al.getChangedSessions(Ap),Ao=Al.sessions,Ar=Aq.filter(function(As){if(Ao[As.identifier]){return false;}else{return true;}});Ar.forEach(function(As){Al.sessions[As.identifier]=Ak(As);Am(Al.sessions[As.identifier],Ap);});var An=[];Ar.forEach(function(As){An.push(Al.sessions[As.identifier].onStart(Ap));});return An;};},newInstance:function AK(Ak,An,Am){var Aj,Ai,Ah=this.getInstanceIndex(Ak);if(Ah!==-1){for(Aj=0;Aj<this.supportedEventTypes.length;Aj++){Ai=this.supportedEventTypes[Aj];if(Ai==="TouchEvent"){Ak.removeEventListener("touchstart",this.instances[Ah].starter);}else{if(Ai==="PointerEvent"){Ak.removeEventListener("pointerdown",this.instances[Ah].starter);}else{if(Ai==="MouseEvent"){Ak.removeEventListener("mousedown",this.instances[Ah].starter);}}}}delete this.instances[Ah];}var Al={domNode:Ak,callbacks:An,callbackThis:Am};Al.starter=this.startNewSessions(Al);if(Ah!==-1){this.instances[Ah]=Al;}else{this.instances.push(Al);}for(Aj=0;Aj<this.supportedEventTypes.length;Aj++){Ai=this.supportedEventTypes[Aj];if(Ai==="TouchEvent"){Ak.addEventListener("touchstart",Al.starter);}else{if(Ai==="PointerEvent"){Ak.addEventListener("pointerdown",Al.starter);}else{if(Ai==="MouseEvent"){Ak.addEventListener("mousedown",Al.starter);}}}}return this;},getInstanceIndex:function J(Ah){return S.find(this.instances,"domNode",Ah);},getInstance:function n(Ai){var Ah=this.getInstanceIndex(Ai);return this.instances[Ah];},getChangedSessions:function AD(Ah){var Ai=[];if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(Ah)){var Al=Ah.changedTouches;for(var Aj=0;Aj<Al.length;Aj++){var Ak={};Ak.identifier=Al[Aj].identifier;Ak.clientX=Al[Aj].clientX;Ak.clientY=Al[Aj].clientY;Ai.push(Ak);}}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(Ah)&&(Ah.pointerType&&Ah.pointerType!=="mouse")){Ai.push({identifier:Ah.pointerId,clientX:Ah.clientX,clientY:Ah.clientY,});}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(Ah)&&!Ah.pointerType){Ai.push({identifier:"mouse",clientX:Ah.clientX,clientY:Ah.clientY,});}}}return Ai;}};var r=H.init();mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(p);},getUpdateColorMapAction:function(Ai,Ah){return L.call(this,Ai,Ah);},measureTextSize:function(Ai,Ah,Aj){return{width:this.measureTextWidth(Ai,Ah,Aj),height:this.measureTextHeight(Ai,Ah,Aj)};},measureTextWidth:function(Ak,Aj,Al,Ai,Ah){if(AC.isIE||AC.isIEW3C){return this.measureTextWidthWithSpan(Ak,Aj,Al,Ai,Ah);}return this.measureTextWidthWithCanvas(Ak,Aj,Al);},measureTextWidthWithCanvas:function(Ak,Al,Ao,Am){Am=Am||false;if(Ak===""){return 0;}if(Ak===" "){Ak="\u00A0";}var An=Al.fontFamily,Aq=Al.fontSize,Aj=Al.fontStyle,Ap=Al.fontWeight;if(typeof Aq==="number"){Aq+="pt";}Aj=Aj||"normal";Ap=Ap||"normal";Ao=Ao||0;var Ai=Am?undefined:u(e,[An,Aq,Aj,Ap,Ak]);if(!Ai){if(!N){N=document.createElement("canvas");N.width=0;N.height=0;N.id="vis-measure-canvas";N.style.position="absolute";N.style.top="0";N.style.fontSize="medium";document.body.appendChild(N);}var Ah=N.getContext("2d");Ah.font=Aj+" "+Ap+" "+Aq+" "+this.surroundWithQuotes(An);Ai=Math.ceil(Ah.measureText(Ak).width);G(e,[An,Aq,Aj,Ap,Ak],Ai);}return Ai+Ao;},measureTextWidthQuick:function(Ak,Al,Ao,Am){Am=Am||false;if(Ak===""){return 0;}if(Ak===" "){Ak="\u00A0";}var An=Al.fontFamily,Aq=Al.fontSize,Aj=Al.fontStyle,Ap=Al.fontWeight;if(typeof Aq==="number"){Aq+="pt";}Aj=Aj||"normal";Ap=Ap||"normal";Ao=Ao||0;var Ai=Am?undefined:u(e,[An,Aq,Aj,Ap,Ak]);if(!Ai){if(!N){N=document.createElement("canvas");N.width=0;N.height=0;N.id="vis-measure-canvas";N.style.position="absolute";N.style.top="0";N.style.fontSize="medium";document.body.appendChild(N);}var Ah=N.getContext("2d");Ah.font=Aj+" "+Ap+" "+Aq+" "+this.surroundWithQuotes(An);Ai=Math.ceil(Ah.measureText(Ak).width);G(e,[An,Aq,Aj,Ap,Ak],Ai);}return Ai+Ao;},measureTextWidthWithSpan:function(Ak,Al,Ap,Ar,Am,Ah){if(Ak===""){return 0;}if(Ak===" "){Ak="\u00A0";}var An=Al.fontFamily,As=Al.fontSize,Aj=Al.fontStyle,Ao=Al.fontWeight;if(typeof As==="number"){As+="px";}Aj=Aj||"normal";Ao=Ao||"normal";Ar=Ar||"auto";Ap=Ap||0;Am=!!Am;if(typeof Ar==="number"){Ar+="px";}var Ai=u(M,[An,As,Aj,Ao,Ar,Ak]);if(!Ai||Ah){var Aq;if(!E){E=document.createElement("span");Aq=E.style;E.id="vis-measure-span";Aq.position="absolute";Aq.top="0";Aq.visibility="hidden";Aq.width="auto";Aq.height="auto";if(Am){Aq.whiteSpace="nowrap";}else{Aq.whiteSpace="normal";}document.body.appendChild(E);}Aq=E.style;if(Am){Aq.whiteSpace="nowrap";}else{Aq.whiteSpace="normal";}Aq.width="auto";Aq.height=Ar;Aq.fontFamily=this.surroundWithQuotes(An);Aq.fontSize=As;Aq.fontStyle=Aj;Aq.fontWeight=Ao;E.innerHTML=b.encodeHtmlString(Ak);Ai=Math.ceil(E.clientWidth);G(M,[An,As,Aj,Ao,Ar,Ak],Ai);}return Ai+Ap;},measureTextHeight:function(Aj,Ak,Ap,As,Ah,Am,Al){if(Aj===""){return 0;}if(Aj===" "){Aj="\u00A0";}var An=Ak.fontFamily,Au=Ak.fontSize,Ai=Ak.fontStyle,Ao=Ak.fontWeight,Ar=Ak.lineHeight||"inherit";Ah=Ah||"normal";Al=!!Al;if(typeof Au==="number"){Au+="px";}Ai=Ai||"normal";Ao=Ao||"normal";As=As||"auto";Ap=Ap||0;if(typeof As==="number"){As+="px";}var At=Am?undefined:u(p,[An,Au,Ai,Ao,As,Aj]);if(!At){var Aq;if(!E){E=document.createElement("span");Aq=E.style;E.id="vis-measure-span";Aq.position="absolute";Aq.top="0";Aq.visibility="hidden";Aq.width="auto";Aq.height="auto";if(Al){Aq.whiteSpace="nowrap";}else{Aq.whiteSpace="normal";}document.body.appendChild(E);}Aq=E.style;if(Al){Aq.whiteSpace="nowrap";}else{Aq.whiteSpace="normal";}Aq.heigth="auto";Aq.width=As;Aq.lineHeight=Ar;Aq.fontFamily=this.surroundWithQuotes(An);Aq.fontSize=Au;Aq.fontStyle=Ai;Aq.fontWeight=Ao;Aq.wordBreak=Ah;E.innerHTML=b.encodeHtmlString(Aj);At=E.clientHeight;if(!Am){G(p,[An,Au,Ai,Ao,As,Aj],At);}}return At+Ap;},getVisEmptyMsg:function(Ah,Ai){var Aj="";switch(Ah){case"AE_ERROR":Aj='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+(Ai||this.errorMsg||"")+"</div><div></div></div></div></div></div>";break;case"NODATA_OTHERERROR":Aj='<div class="error-msg"><div class="error-content"><div class="text" style="visibility: visible;padding-top:0px;"><div>'+(this.errorMsg||mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data."))+"</div></div></div></div>";break;default:Aj='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return Aj;},getVisEmptyMsgControls:function B(){var Aj=this.error,Ao,Am=this.errorType,Ai;var Ak=mstrmojo.VisUtility;if(this.excludeData){Ao=Ak.getVisStyle.call(this);var Al=Ak.getAttMetricCount.call(this);return[{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",cssClass:Ao,visName:mstrConfig.pluginsVisList[Ao]&&mstrConfig.pluginsVisList[Ao].d,visDropzoneMsg:D.getVisDropzoneMsg(Al.attCount,Al.metricCount)}];}if(!this.hasError()){return ;}switch(Am){case Af.NO_DATASET:case Af.NO_TEMPLATE_UNIT:if(mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(AM.SUPPORT_GHOST_IMG)){Ao=Ak.getVisStyle.call(this);var Ap="",An="",Ah="";if(Ao===v.HEAT_MAP){Ap="heatmap";An=mstrmojo.desc(11819,"Heat Map");Ah=Aa.getVisDesc("heatmap");}else{if(Ao===v.NETWORK){Ap="network";An=mstrmojo.desc(11827,"Network");Ah=Aa.getVisDesc("network");}else{if(Ao===v.KPICARD){Ap="kpicard";An=mstrmojo.desc(15800,"KPI");Ah=Aa.getVisDesc("kpicard");}}}Ai=[{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",cssClass:Ap,visName:An,visDesc:Ah}];}else{Ai=[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:Aj}];}break;case Af.AE_ERROR:Ai=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:Ak.getVisEmptyMsg("AE_ERROR",Aj),markupSlots:{containerNode:function(){return this.domNode;}}}];break;default:Ai=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:'<div class="{@cssClass}"><div class="error-content" style="visibility: visible">'+Aj+"</div></div>",markupSlots:{containerNode:function(){return this.domNode;}}}];break;}return Ai;},applyStyles2DomNode:function(Am,Ap){var Ah,An=Am.style;if(Object.prototype.hasOwnProperty.call(Ap,"backgroundColor")&&Ap.backgroundColor!==""&&Ap.backgroundColor!=="transparent"){var Al=1;if(Object.prototype.hasOwnProperty.call(Ap,"opacity")&&Ap.opacity!==""){Al=Ap.opacity;}var Ai=Ap.backgroundColor,Ao=function Ao(Aq){if(isNaN(Aq)){Aq=0;}Aq%=16777216;return{b:Aq%256,g:(Aq>>8)%256,r:(Aq>>16)%256};},Ak="";if(Ai){var Aj=function Aj(Ar,As){if(Ar==="transparent"){return"rgba(0,0,0,0)";}Ar=this.parseCSSColor(Ar,false);var Aq=Ao(Ar);return"rgba("+Aq.r+" ,"+Aq.g+" ,"+Aq.b+" ,"+As+" )";}.bind(this);if(Ai.c1!==undefined&&Ai.c2!==undefined&&Ai.or!==undefined){Ak=(Ab.buildGradient(Ai.or,Aj(Ai.c1,Al),Aj(Ai.c2,Al))).v;}else{Ak=Aj(Ai,Al);}An.background=Ak;}}else{An.backgroundColor="rgba(0,0,0,0)";}for(Ah in Ap){if(Ah!=="backgroundColor"&&Ah!=="opacity"&&Object.prototype.hasOwnProperty.call(Ap,Ah)&&Ap[Ah]&&Ap[Ah]!==""){An[Ah]=Ap[Ah];if(Ah==="fontFamily"){An[Ah]="'"+Ap[Ah]+"'";}}}},parseCSSColor:function(Al,Ai){var Ah,Aj;if(Al.length===7){if(Ai===true){Ah=Al[5]+Al[6]+Al[3]+Al[4]+Al[1]+Al[2];}else{Ah=Al.slice(1);}}else{Ah=[];var Ak=Al.slice(1);if(Ai===true){for(Aj=2;Aj>=0;Aj--){Ah.push(Ak[Aj]);Ah.push(Ak[Aj]);}}else{for(Aj=0;Aj<3;Aj++){Ah.push(Ak[Aj]);Ah.push(Ak[Aj]);}}Ah=Ah.join("");}return parseInt(Ah,16);},positionDomNode:function(Aj,Al){var Ai,Ao,Am,Ak=["width","height","top","left","right","bottom"],An=Ak.length,Ah=Aj.style;for(Ai=0;Ai<An;Ai++){Ao=Ak[Ai];Am=Al[Ao];if(Am!==undefined){if((typeof Am)==="number"){Am+="px";}Ah[Ao]=Am;}}},getComputedFontStyle:function K(Aj){var Ah=mstrmojo.css.getComputedStyle(Aj);var Ak={};Ak.fontFamily=Ah.fontFamily;Ak.fontSize=Ah.fontSize;Ak.fontStyle=Ah.fontStyle;Ak.fontWeight=Ah.fontWeight;Ak.fontVariant=Ah.fontVariant;var Ai=parseInt(Ah.paddingLeft)||0,Al=parseInt(Ah.paddingLeft)||0;Ak.bonus=Ai+Al;return Ak;},splitWordIfTooLong:function(Ar,Ap,Ak){var An=[];var Ao=Ar.length;var Al;for(Al=0;Al<Ao;Al++){var Ai=Ar[Al];while(true){var As=this.measureTextWidth(Ai,Ak);if(As>Ap){var Aq=(Ap/As)*Ai.length;var Ah=Math.max(Math.round(Aq),1);while(Ah>0){var Am=Ai.substr(0,Ah);var Aj=Math.round(this.measureTextWidth(Am,Ak));if(Aj<=Ap||Ah===1){An.push(Am);break;}else{Ah--;}}Ai=Ai.substr(Ah,Ai.length-Ah);}else{An.push(Ai);break;}}}return An;},truncateTextToLineWithWordWrap:function j(A7,A0,Ay,An,Az,Ar){var Av=A7.split(" "),A1=Av.length;if(!Ar){Av=this.splitWordIfTooLong(Av,Ay,A0);}var BE,At=[],A9=[],Ah=0,Al=Av.length,BG=this.measureTextWidth(" ",A0),Ak=0,Aq=false,Ax=(A1===Av.length);A9.push(0);for(BE=0;BE<Al;BE++){var A5=this.measureTextWidth(Av[BE],A0);if(!Ar&&A5>Ay){var Ai=Av[BE];var BC=(Ay/A5)*Ai.length;Av[BE]=Ai.substr(0,parseInt(BC,10));A5=Ay;}At.push(A5);Ah+=A5;A9.push(Ah);if(BE!==Al-1){Ah+=BG;}}var BB,BD,A3=An;for(BB=0,BD=0;BD<A9.length;){var Ap=A9[BD]-A9[BB];if(BB>0&&BD!==BB){Ap-=BG;}var Ao=A9[BD+1]-A9[BB];if(BB>0&&BD+1!==BB){Ao-=BG;}if(Ap<=Ay&&((BD+1===A9.length)||(Ao>Ay))){Ak=Math.max(Ak,Ap);A3--;if(A3===0||BD===Al){break;}else{BB=BD;BD++;}}else{BD++;}}if(BD>Al){BD=Al;}var As=A9[BD]-A9[BB];if(BB>0&&BD!==BB){As-=BG;}var A6;if(BD>=Al&&As<Ay){A6=Av.join(" ");}else{Aq=true;Ak=Ay;A6=Av.slice(0,BD).join(" ");var Au=this.measureTextWidth("...",A0);if(As+Au<=Ay){if(As+BG+Au>Ay){A6+="...";}else{var BF=Av[BD],Aw;for(var A2=1;A2<BF.length;A2++){Aw=this.measureTextWidth(BF.substr(0,A2),A0);if(As+BG+Aw+Au>Ay){break;}}A6+=" "+BF.substr(0,A2-1)+"...";}}else{if(A6.charAt(A6.length-1)===" "){A6=A6.substr(0,A6.length-1);}var A4=A6.lastIndexOf(" ");var Aj=A6.length-1-A4;if(Aj===3){A6=A6.substr(0,A6.length-3)+" ...";}else{var A8=0,Am="",BA=0;while(A8<Au&&A6.length>BA){BA++;Am=A6.substr(A6.length-BA,A6.length);A8=this.measureTextWidth(Am,A0);}A6=A6.substr(0,A6.length-BA)+"...";}}}if(Az){return{text:A6,truncated:Aq,maxLineLen:Ak,canWordWrap:Ax};}return A6;},measureSuperTextWidth:function w(Ai,Aj,Ah,Ak){return Ai?this.measureTextWidth("<sup>"+Aj+"</sup>",Ah,Ak):this.measureTextWidth(Aj,Ah,Ak);},splitTokenIfTooLong:function g(As,Aq,Ak){var Ao=[];var Ap=As.length;var Al,Ai,At,An,Au;for(Al=0;Al<Ap;Al++){Ai=As[Al];An=Ai.isSuper;while(true){At=Ai.v;if(Ai.textWidth!==undefined){Au=Ai.textWidth;}else{Au=Ai.textWidth=this.measureSuperTextWidth(An,At,Ak);}if(Au>Aq){var Ar=(Aq/Au)*At.length;var Ah=Math.max(Math.round(Ar),1);while(Ah>0){var Am=At.substr(0,Ah);var Aj=Math.round(this.measureSuperTextWidth(An,Am,Ak));if(Aj<=Aq||Ah===1){Ao.push({v:Am,isSuper:An,textWidth:Aj});break;}else{Ah--;}}Ai={v:At.substr(Ah,At.length-Ah),isSuper:An};}else{Ao.push(Ai);break;}}}return Ao;},truncateTextToLineWithWordWrapForTokens:function AW(Ar,Al,BA,A2,BB,Ax){var A5=Ar.length;Ar=this.splitTokenIfTooLong(Ar,BA,Al);var A9,Aw=[],Ah=0,A0=Ar.length,Ai=0,A1=false,An=(A5===Ar.length),Ap,Au,A3,Aj,A7,Aq,Av;if(Ax&&!An){return{canWordWrap:An};}Aw.push(0);for(A9=0;A9<A0;A9++){Ap=Ar[A9];A3=Ap.v;Au=Ap.isSuper;if(Ap.textWidth!==undefined){Aj=Ap.textWidth;}else{Aj=Ap.textWidth=this.measureSuperTextWidth(Au,A3,Al);}if(Aj>BA){var A8=(BA/Aj)*A3.length;Ap.v=A3.substr(0,parseInt(A8,10));Aj=Ap.textWidth=BA;}Ah+=Aj;Aw.push(Ah);}var At,A4,As=A2;for(At=0,A4=0;A4<Aw.length;){var Ao=Aw[A4]-Aw[At];var Am=Aw[A4+1]-Aw[At];if(Ao<=BA&&((A4+1===Aw.length)||(Am>BA))){Ai=Math.max(Ai,Ao);As--;if(As===0||A4===A0){break;}else{At=A4;A4++;}}else{A4++;}}if(A4>A0){A4=A0;}var Az=Aw[A4]-Aw[At];var BC;if(A4>=A0&&Az<BA){BC=Ar;}else{A1=true;Ai=BA;BC=Ar.slice(0,A4);var Ak=this.measureTextWidth("...",Al);if(Az+Ak<=BA){Aq=Ar[A4];A3=Aq.v;Au=Aq.isSuper;for(A7=1;A7<A3.length;A7++){Av=this.measureSuperTextWidth(Au,A3.substr(0,A7),Al);if(Az+Ak+Av>BA){break;}}if(A7>1){Ap={v:A3.substr(0,A7-1),isSuper:Au};Ap.textWidth=this.measureSuperTextWidth(Au,Ap.v,Al);BC.push(Ap);BC.push({v:"...",textWidth:Ak});}}else{var Ay=0,A6;for(A9=BC.length-1;A9>=0;A9--){Ap=BC[A9];A3=Ap.v;Au=Ap.isSuper;A6=0;for(A7=A3.length-1;A7>=0;A7--){A6=this.measureSuperTextWidth(Au,A3.substr(A7),Al);if(Ay+A6>=Ak){break;}}if(A7>=0){break;}else{Ay+=A6;}}if(A9>=0){if(A7>0){Ap.v=A3.substr(0,A7);Ap.textWidth=this.measureSuperTextWidth(Au,Ap.v,Al);BC=BC.slice(0,A9+1);}else{if(A7===0){BC=BC.slice(0,A9);}}BC.push({v:"...",textWidth:Ak});}else{BC=[{v:"...",textWidth:Ak}];}}}if(BB){return{text:BC,truncated:A1,maxLineLen:Ai,canWordWrap:An};}return BC;},getRankMode:function O(An){var Ap=1,Ao=2,Am=3,Ai=4,Ak=5,Ah=6,Al=7,Aj=U.INVALID;if(An){if(AS(An,Am,Ao)){Aj=U.TOP_PERCENT;}else{if(AS(An,Am,Ap)){Aj=U.BOTTOM_PERCENT;}else{if(AS(An,Ah,Ai)){Aj=U.BOTTOM;}else{if(AS(An,Ah,Ak)){Aj=U.TOP;}else{if(AS(An,Al)){Aj=U.VALUE;}}}}}}return Aj;},getColorByTitle:function Z(Ai,Ah){if(Ah===U.BOTTOM_PERCENT||Ah===U.TOP_PERCENT){Ai=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",Ai);}else{if(Ah===U.BOTTOM||Ah===U.TOP){Ai=mstrmojo.desc(2788,"Rank of ##").replace("'##'",Ai);}}return Ai;},getColorByFormatStr:function f(Ai,Ah){if(Ah===U.BOTTOM_PERCENT||Ah===U.TOP_PERCENT){Ai="0%;(0%)";}else{if(Ah===U.BOTTOM||Ah===U.TOP){Ai="";}}return Ai;},getColorByItems:function AX(Ah,Ar,Ay,Au,Ap,An,Av){var At=[],Az,Aj,Ao=mstrmojo.num,Am,Aq;if(Ah===undefined||Ah.length===0){return At;}var A1=true;if(Ah.length>1){if(Ah[0].ceil===Ah[1].flr){A1=false;}else{A1=true;}}for(Az=0;Az<Ah.length;Az++){var A0=Ah[Az],Al={},Ai=A0.ceil,Ax=A0.flr;if((Az===0&&A1)||(Az===Ah.length-1&&!A1)){if(Ar===U.BOTTOM_PERCENT||Ar===U.TOP_PERCENT){Al.flr=Ax/100;Al.ceil=1;}else{if(Ar===U.TOP||Ar===U.BOTTOM){Ax+=1;Al.flr=Math.floor(Ax);Al.ceil=Ap;}else{Al.flr=Ax;Al.ceil=Ay;}}Aq=Al.ceil;}else{if((Az===0&&!A1)||(Az===Ah.length-1&&A1)){if(Ar===U.BOTTOM_PERCENT||Ar===U.TOP_PERCENT){Al.flr=0;Al.ceil=Ai/100;}else{if(Ar===U.TOP||Ar===U.BOTTOM){Al.flr=0;Al.ceil=Math.floor(Ai);}else{Al.flr=Au;Al.ceil=Ai;}}Am=Al.flr;}else{if(Ar===U.BOTTOM_PERCENT||Ar===U.TOP_PERCENT){Ax=Ax/100;Ai=Ai/100;}else{if(Ar===U.TOP||Ar===U.BOTTOM){Ax+=1;Ax=Math.floor(Ax);Ai=Math.floor(Ai);}}Al.flr=Ax;Al.ceil=Ai;}}if(Ar===U.TOP||Ar===U.BOTTOM){Al.ceil=Al.ceil>Ap?Ap:Al.ceil;}if(An){Al.label=Ao.formatByMask(An,Al.flr);if(Al.flr!==Al.ceil){Al.label+=" - "+Ao.formatByMask(An,Al.ceil);}}else{Al.label=Al.flr;if(Al.flr!==Al.ceil){Al.label+=" - "+Al.ceil;}}if(A0.fmt&&A0.fmt.bc){Al.color=A0.fmt.bc;}else{Al.color=Av;}At.push(Al);}At=At.filter(function(A2){return A2.flr<=A2.ceil&&!(A2.flr>Aq||A2.ceil<Am);});if(Ar!==U.VALUE){if(At[0]&&(At[0].label===0)){At.shift();}}if(Ar===U.TOP||Ar===U.BOTTOM){Aj=Ap;}else{if(At.length>0){if(A1){Aj=At[0].ceil-At[(At.length-1)].flr;}else{Aj=At[(At.length-1)].ceil-At[0].flr;}}}var Aw=0,As,Ak;for(Az=0;Az<At.length;Az++){if(Az===At.length-1){At[Az].scopePercent=1-Aw;}else{if(Ar===U.TOP||Ar===U.BOTTOM){Ak=At[Az].ceil-At[Az].flr+1;}else{Ak=At[Az].ceil-At[Az].flr;}As=Ak/Aj;At[Az].scopePercent=As;Aw+=As;}}return At;},getDefaultColorByItems:function(Ak,Ai,Aj){var Ah={};Ah.label=Aj+" - "+Ai;Ah.flr=Aj;Ah.ceil=Ai;Ah.color=Ak;Ah.scopePercent=1;return[Ah];},getNumberFormat:function(Ak,Ai){var Al=Ak.nf,Aj=Ak.gvs;function Ah(){var Ao=(Aj&&Aj.items&&Aj.items[0]&&Aj.items[0].items)||[],An=Ao[Ai]||{},Am=An.nfs;return typeof Am==="string"?Am:"";}if(Al[Ai]&&typeof Al[Ai].nfs!=="string"){Al[Ai].nfs=Ah();}return Al[Ai]&&Al[Ai].nfs;},hasOnlyMetricsOnColumn:function(Ai){var Ah=(Ai&&Ai.gts&&Ai.gts.col)||[];return Ah.every(function(Aj){return Aj.otp===o.DssTypeUnknown&&(Aj.es||[]).every(function(Ak){return Ak.otp===o.DssTypeMetric;});});},hasNoMetricOnRow:function(Ai){var Aj=(Ai&&Ai.gts&&Ai.gts.row)||[],Ah=function(Ak){return Ak.otp!==o.DssTypeMetric;};return Aj.every(Ah);},getAttMetricCount:function(){var Ak=this.getEditingGridData&&this.getEditingGridData()||this.model&&this.model.data,Ao=Ak&&Ak.gsi,An=Ao&&Ao.rows||[],Aj=Ao&&Ao.cols||[],Ai=[].concat(An).concat(Aj),Am=Ao&&Ao.mx||[],Ah=0,Al=Am.length;Ad.forEach(Ai,function(Ap){if(Ap.t!==o.DssTypeMetric){Ah++;}});return{attCount:Ah,metricCount:Al};},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(Ap,Ah,At,An){if(!Ap||!Ah){return ;}var Ak=Ap.nds,Ao,Ai,Aq,As,Ar,Am,Al,Aj;Ad.forEach(Ak||[],function(Au){Ao=Au.nds;Ad.forEach(Ao||[],function(Av){Ai=Av.es;Ad.forEach(Ai||[],function(Aw){As=Aw.v;Am=An[As];if(!Am){Am=At.getNormalizedFormElementId(As);An[As]=Am;}Ad.forEach(Ah||[],function(Ax){Aq=Ax.es;Ad.forEach(Aq||[],function(Ay){Aj=false;Ar=Ay.id;if(Ar===As){Aj=true;}else{Al=An[Ar];if(!Al){Al=At.getNormalizedFormElementId(Ar);An[Ar]=Al;}if(Am===Al){Aj=true;}}if(Aj){Aw.v=Ay.id;Aw.n=Ay.n;return false;}});if(Aj){return false;}});});});});},modifyScExpDeprecated:function(An,Ao,Al,Aj){if(!An||!Ao){return ;}var Ak=An.nds,Ai,Ah,Am;Ad.forEach(Ak||[],function(Ap){Ai=Ap.nds;Ad.forEach(Ai||[],function(Aq){Ah=Aq.es;Ad.forEach(Ah||[],function(Ar){Ad.forEach(Ao||[],function(As){Ad.forEach(As||[],function(At){Am=At.es;Ad.forEach(Am||[],function(Au){if(Al.call(Aj,Au.id,Ar.v)){Ar.v=Au.id;Ar.n=Au.n;}});});});});});});},getMouseOffset:function(Ai){var Ah=(Ai.offsetX!==undefined)?Ai.offsetX:(Ai.layerX),Aj=(Ai.offsetY!==undefined)?Ai.offsetY:(Ai.layerY);return{x:Ah,y:Aj};},translateLineStyle:function(Ah){var Aj=["none","solid","solid","dashed","dotted"],Ai=["1px","1px","2px","1px","1px"];return{width:Ai[Ah]||"0px",style:Aj[Ah]||"none"};},getVisStyle:function(){var Ah=mstrmojo.VisUtility;return Ah.getPropertyByPath(this,"model.data.visName")||Ah.getPropertyByPath(this,"model.data.vis.vn");},getGroupAndCalculationContextMenuForDataPoints:function(As,A6){var Au,Aw=[],Aj=[],A3=[],Ao=A6.fnCellName,Ay=A6.fnUnique,An=A6.fnMakeNode,A1=As.getCellForNode.bind(As),A8=A6.selection;var Am=new d.ui.menus.MenuConfig(),Ai=new d.ui.menus.MenuConfig(),A0=new d.ui.menus.MenuConfig(),A5=new d.ui.menus.MenuConfig();function A7(A9){As.cmSelCells=Aw[A9].cmSelCells;As.derivedElementGroup(A1(As.cmSelCells[0]));}function Ap(BB){As.cmSelCells=Aj[BB].cmSelCells;var BA=A1(Aj[BB].cmSelCells[0]),A9=As.getDEInfo(BA);As.derivedElementsEdit(A1(As.cmSelCells[0]),A9);}function Ax(BA){As.cmSelCells=Aj[BA].cmSelCells;var A9=A1(Aj[BA].cmSelCells[0]);As.removeQuickDE(A9);}function Av(BA){As.cmSelCells=Aj[BA].cmSelCells;var A9=A1(Aj[BA].cmSelCells[0]);As.renameDEList(A9);}function Az(A9){V(As,A1(As.cmSelCells[0]),null,A9,false);}function Ah(A9){V(As,A1(As.cmSelCells[0]),null,A9,true);}function Al(BA){var A9=A1(Aj[BA].cmSelCells[0]);As.removeQuickDE(A9);}function A4(BA){var A9=A1(Aj[BA].cmSelCells[0]);As.editDECalculation(A9);}function Aq(BA,A9){return function(){var BB=new d.ui.menus.MenuConfig();BB.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);BB.addRadioMenuGroup(null,BA,A9,"checkMark",undefined,true);return BB;};}function At(A9){A9=A9||[];function BA(BE){var BB=BE.extra||{},BF=BE.setup||mstrmojo.emptyFn,BC=BE.action||mstrmojo.emptyFn,BD=[];BF(BD,BB);BC(BD,BB);}A9.forEach(BA);}var Ak=[{name:"group",setup:function(A9){Aw.forEach(function(BA){As.cmSelCells=Aw[BA.v].cmSelCells;if(!Object.prototype.hasOwnProperty.call(Aj,BA.v)&&X(As)){A9.push(BA);}});},action:function(BA){var A9;if(BA.length===1){A9=BA[0].v;Am.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){As.cmSelCells=Aw[A9].cmSelCells;As.derivedElementGroup(A1(As.cmSelCells[0]));});}if(BA.length>1){Am.addPopupMenuItem(mstrmojo.desc(1911,"Group"),As.id,Aq(A7,BA),"xt");}}},{name:"edit-group",setup:function(A9){Aj.forEach(function(BD){var BC=A1(Aj[BD.v].cmSelCells[0]),BB=As.getDEInfo(BC),BA=BB&&BB.de;if(BA&&BA.t===T.LIST){A9.push(BD);}});},action:function(BA){var A9,BC,BB;if(BA.length===1){A9=Aj[BA[0].v].cmSelCells;BC=A1(A9[0]);BB=As.getDEInfo(BC);Ai.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){As.cmSelCells=A9;As.derivedElementsEdit(A1(As.cmSelCells[0]),BB);});Ai.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){As.cmSelCells=A9;As.removeQuickDE(BC);});A5.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){As.cmSelCells=A9;As.renameDEList(BC);});}if(BA.length>1){Ai.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),As.id,Aq(Ap,BA),"xt");Ai.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),As.id,Aq(Ax,BA),"xt");A5.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),As.id,Aq(Av,BA),"xt");}}},{name:"calculation",setup:function(A9){A3.forEach(function(BC,BB,BA){As.cmSelCells=BA[BC.v].cmSelCells;var BE=A1(As.cmSelCells[0]),BD=As.getDEInfo(BE),BF=BD&&BD.de;if(!(BF&&BF.t===T.RESIDUE)&&k(As)){A9.push(BC);}});},action:function(A9){if(A9.length===1){Am.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),As.id,function(){var BA=A9[0].v,BB=new d.ui.menus.MenuConfig();As.cmSelCells=A3[BA].cmSelCells;BB.addRadioMenuGroup(null,Az,l(As,null,Ao).items,"checkMark",undefined,true);return BB;},"xt");}if(A9.length>1){Am.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),As.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},hasToggleItem:true,contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:A9,selectedIndex:0,onitemSelected:function(BA){var BB=BA.v;As.cmSelCells=A3[BB].cmSelCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",l(As,null,Ao).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(BB,BA){V(As,A1(As.cmSelCells[0]),null,BA.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(A9){Aj.forEach(function(BD){var BC=A1(Aj[BD.v].cmSelCells[0]),BB=As.getDEInfo(BC),BA=BB&&BB.de;if(BA&&BA.t===T.CALCULATION&&k(As)){A9.push(BD);}});},action:function(A9){function BA(){var BB=A9[0].v;As.cmSelCells=Aj[BB].cmSelCells;var BF=A1(As.cmSelCells[0]),BE=As.getDEInfo(BF),BG=BE&&BE.de,BD=l(As,BG,Ao),BC=new d.ui.menus.MenuConfig();BC.addRadioMenuGroup(BD.selectedItem.value,Ah,BD.items,"checkMark",undefined,true);return BC;}if(A9.length===1){A0.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),As.id,BA,"xt");A0.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var BB=A9[0].v;As.cmSelCells=Aj[BB].cmSelCells;var BC=A1(As.cmSelCells[0]);As.removeQuickDE(BC);});A5.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var BB=A9[0].v;As.cmSelCells=Aj[BB].cmSelCells;var BC=A1(As.cmSelCells[0]);As.editDECalculation(BC);});}if(A9.length>1){A0.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),As.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},hasToggleItem:true,contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:A9,selectedIndex:0,onitemSelected:function(BE){var BF=BE.v;As.cmSelCells=Aj[BF].cmSelCells;var BD=A1(As.cmSelCells[0]),BC=As.getDEInfo(BD),BG=BC&&BC.de;var BB=l(As,BG,Ao);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",BB.items);this.parent.checkList.set("selectedItem",BB.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(BC,BB){V(As,A1(As.cmSelCells[0]),null,BB.checkList.selectedItem.v,true);}});});A0.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),As.id,Aq(Al,A9),"xt");A5.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),As.id,Aq(A4,A9),"xt");}}}];Au=Ay(A8);Au.forEach(function(BA){var BC=An(BA),A9=A1(BC),BB,BD,BE;if(!As.model.supportsViewFilterActions(A9.tid)){return ;}BB=A9.dei===undefined?Aw:Aj;BD=A9.tid;BE=As.model.getObjectInfo(BD).n;if(BB[BD]===undefined){BB[BD]={};BB[BD].cmSelCells=[];BB.push({n:BE,v:BD,text:BE,value:BD});}BB[BD].cmSelCells.push(BC);if(A3[BD]===undefined){A3[BD]={};A3[BD].cmSelCells=[];A3.push({n:BE,v:BD,text:BE,value:BD});}A3[BD].cmSelCells.push(BC);});var Ar=mstrmojo.VisUtility;var A2=Ar.getVisStyle.call(As);if(A2===v.HEAT_MAP){Ak.splice(2,2);}At(Ak);return{createDe:Am,editGroup:Ai,editCalculation:A0,renameDe:A5};},getGroupAndCalculationContextMenu:function(Ap,A3,A0){var A2=Ap,Aw=A0.skipSingleAttrCheck||A2.isSingleAttrSelection(),Ak=false,Am=A2.isSingleContextMenuSelection(),Aq=A2.getDEInfo(A3),Al=Aq&&Aq.deObject,Az=Aq&&Aq.de,Au=Al&&A2.getOthersDEInfo(Al),As=A2.getContextMenuSelections(),Ay=true,Ao=A0.fnCellName,A1=this.getPropertyByPath(A2,"model.data.visName")||this.getPropertyByPath(A2,"model.data.vis.vn");var An=new d.ui.menus.MenuConfig(),Ai=new d.ui.menus.MenuConfig(),At=new d.ui.menus.MenuConfig(),Ax=new d.ui.menus.MenuConfig();A2.cmSelCells=A0.selection;if(Ap.model.supportsViewFilterActions(A3.tid)){if((Ak||Aw)&&AQ(A3,t)&&X(A2)){An.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){Ap.derivedElementGroup(A3);});}if(Am&&Az&&Az.t===T.LIST){Ai.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){Ap.derivedElementsEdit(A3,Aq);});Ai.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){Ap.removeQuickDE(A3);});Ax.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){Ap.renameDEList(A3);});}var Ar=function(A4){V(A2,A3,Az,A4,false);},Av=function(A4){V(A2,A3,Az,A4,true);};if(Au&&!Am&&Aw){S.forEach(As,function(A4){if(A4[0]&&A4[0].eid.indexOf(Au.id)>-1){Ay=false;return false;}});}if(A1!=="VIHeatMapVisualizationStyle"&&!(Am&&Az&&Az.t===T.RESIDUE)&&(Ak||Aw)&&AQ(A3,AE)&&k(A2)){var Ah=function(){var A4=new d.ui.menus.MenuConfig(),A5=l(A2,null,Ao);A4.addRadioMenuGroup(null,Ar,A5.items,"checkMark",undefined,true);return A4;};An.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,Ah,"xt");}if(Am&&Az&&Az.t===T.CALCULATION&&k(A2)){var Aj=function(){var A4=new d.ui.menus.MenuConfig(),A5=l(A2,Az,Ao);A4.addRadioMenuGroup(A5.selectedItem.value,Av,A5.items,"checkMark",undefined,true);return A4;};At.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,Aj,"xt");At.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){Ap.removeQuickDE(A3);});Ax.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){Ap.editDECalculation(A3);});}}return{createDe:An,editGroup:Ai,editCalculation:At,renameDe:Ax};},isHostedPopupNode:function(Ak,Aj,Ai,Ah){return AH(Ak,Aj,"mstrmojo-popup-widget-hosted",Ai,Ah);},isMojoEditorNode:function(Ak,Aj,Ai,Ah){return AH(Ak,Aj,"mstrmojo-Editor",Ai,Ah);},applyStyle2Legend:function(Ak,Aj,Ai){var Ah,Am={},Al={};for(Ah in Ak){if(Ah.indexOf("font")>=0||Ah.indexOf("color")>=0||Ah.indexOf("textDecoration")>=0){Am[Ah]=Ak[Ah];}else{Al[Ah]=Ak[Ah];}}if(Aj){Aj.style.background="";this.applyStyles2DomNode(Aj,Al);}if(Ai){this.applyStyles2DomNode(Ai,Am);}},mergeMenuConfigs:function AG(Ai,Ah){function Aj(Al,Am,Ak){if(!Am){return ;}if(!Ak&&Al.hasMenuItems()&&Am.hasMenuItems()){Al.addSeparator();}if(Am.hasMenuItems()){Al.absorbMenuItems(Am);}}return Ah.reduce(function(Ak,Al){Aj(Ak,Ai[Al.name],Al.noSeparator);return Ak;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(Ai,Ah,Aj){Ai.addDisposable(Ah);Ai.absorbMenuItems(Ah);if(Aj&&Ah.menus.length>0){Ai.addSeparator();}},addWheelListener:(function(){var Ak=mstrmojo.dom,Aj=Ak.attachEvent,Ai=Ak.preventDefault,Al;function Ah(Ap,Ao,Aq,An){var Am=(Al==="wheel")?Aq:function(Ar){if(!Ar){Ar=window.event;}var At={originalEvent:Ar,target:Ar.target||Ar.srcElement,type:"wheel",deltaMode:(Ar.deltaMode!==undefined?Ar.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){Ai(window,Ar);}},As=this;if(Al==="mousewheel"){At.deltaY=-Ar.wheelDelta;if(Ar.wheelDeltaX!==undefined){At.deltaX=-Ar.wheelDeltaX;}}else{At.deltaY=Ar.detail;}return Aq.call(As,At);};return Aj(Ap,Ao,Am,An);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){Al="wheel";}else{Al=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(An,Ao,Am){return Ah(An,Al,Ao,Am);};}()),addTouchSupportHelper:function AJ(Ah,Aj,Ai,Am,Al){Ah.style["touch-action"]="none";var Ak={MINDRAG:function(An){return(((An.event.type.indexOf("touch")===0)||(An.event.type.indexOf("pointer")===0))?5:1);},TAPHOLDDELAY:250,DBLCLICKDELAY:300};r.newInstance(Ah,{context:Ak,start:Ai,change:Am,end:Al},Aj);},addBasicTouchSupport:function z(Am,Ao,Ar,Al,Aq){function As(Aw){var Av={left:0,top:0};function At(Ax){if(Ax===window||Ax===document||Ax===document.body){return Av;}else{return Ax.getBoundingClientRect();}}function Au(A0,A1,Ay){A1=A1||A0.currentTarget||A0.srcElement;if(!Array.isArray(Ay)){Ay=[0,0];}var Ax=A0.clientX||0;var A2=A0.clientY||0;var Az=At(A1);Ay[0]=Ax-Az.left;Ay[1]=A2-Az.top;return Ay;}return Au(Aw.changedTouches?Aw.changedTouches[0]:Aw,document.body);}function Ak(At,Av){if(At.touches.length>1||(At.type==="touchend"&&At.touches.length>0)){return undefined;}var Au=null,Ax=null;switch(At.type){case"touchstart":Au="mousedown";Ax=At.changedTouches[0];break;case"touchmove":Au="mousemove";Ax=At.changedTouches[0];break;case"touchend":Au="click";Ax=At.changedTouches[0];break;}if(Av){Au=Av;}var Aw={bubbles:At.bubbles,cancelable:At.cancelable,view:At.view,screenX:Ax.screenX,screenY:Ax.screenY,clientX:Ax.clientX,clientY:Ax.clientY};if(Av==="contextmenu"){Aw.button=2;Aw.buttons=2;}return new MouseEvent(Av,Aw);}function An(Av,At){var Au;if(Av.type.indexOf("touch")===0){Au=Ak(Av,At);}else{var Aw=As(Av),Ax={bubbles:Av.bubbles,cancelable:Av.cancelable,view:Av.view,detail:Av.detail,screenX:Av.screenX,screenY:Av.screenY,clientX:Aw[0],clientY:Aw[1]};if(At==="contextmenu"){Ax.button=2;Ax.buttons=2;}Au=new MouseEvent(At,Ax);}Au.originEvent=Av;return Au;}function Aj(At){if(At.stopPropagation){At.stopPropagation();}if(At.preventDefault){At.preventDefault();}At.cancelBubble=true;return false;}function Ah(Au){var Ax=Au.event,At=Au.context;At.startOffset=As(Ax);At._dragged=false;At._dragging=true;At._taphold=false;At.initialTarget=Ax.target;var Aw=(new Date()).getTime();if(Aw-At._mouseDownTime<At.DBLCLICKDELAY){At.numClicks+=1;}else{At.numClicks=1;At._mouseDownTime=Aw;}At.tapholdTimeoutId=setTimeout(function(){if((new Date()).getTime()-At._mouseDownTime>At.TAPHOLDDELAY&&!At._dragged){At._taphold=true;}if(!At._dragged&&At._taphold){Au.session.listeners.end(Ax);}},At.TAPHOLDDELAY+10);var Av;if(Ar){Av=Ar(Au);}if(Av===undefined||(Av&&Av.pause)){Aj(Au.event);}}function Ap(Ax){var At=Ax.event,Aw=Ax.context,Az=As(At),Av=Az[0]-Aw.startOffset[0],Au=Az[1]-Aw.startOffset[1];if(Math.abs(Av)<Aw.MINDRAG(Ax)){Av=0;}if(Math.abs(Au)<Aw.MINDRAG(Ax)){Au=0;}if(Av||Au){Aw._dragged=true;}if((new Date()).getTime()-Aw._mouseDownTime>Aw.TAPHOLDDELAY&&!Aw._dragged){Aw._taphold=true;}var Ay;if(Al){Ay=Al(Ax);}if(Ay===undefined||(Ay&&Ay.pause)){Aj(Ax.event);}}function Ai(Au){var At=Au.context,Aw=Au.event;if(At.tapholdTimeoutId){clearTimeout(At.tapholdTimeoutId);}if(!At._dragging){At._dragged=false;return ;}At._dragging=false;if((new Date()).getTime()-At._mouseDownTime>At.DBLCLICKDELAY){At.numClicks=Math.max(At.numClicks-1,1);}if((new Date()).getTime()-At._mouseDownTime>At.TAPHOLDDELAY&&!At._dragged){At._taphold=true;}var Av;if(Aq){Av=Aq(Au);}if(Aw.type.indexOf("mouse")===0){At._dragged=false;At._taphold=false;return ;}else{if(!At._dragged){if(At._taphold){At.initialTarget.dispatchEvent(An(Aw,"contextmenu"));}else{At.initialTarget.dispatchEvent(An(Aw,"click"));}}At._dragged=false;At._taphold=false;if(Av===undefined||(Av&&Av.pause)){Aj(Au.event);}}}this.addTouchSupportHelper(Am,Ao,Ah,Ap,Ai);},isNearZero:function(Ai,Ah){Ah=Ah||5;var Aj=1/Math.pow(10,Ah);return(Math.abs(Ai)<Aj);},hasMergedRowCells:function(Ah){return false;},getMockUpThresholds:function(Aj,Ak){var Ah=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];S.forEach(Ah,function(Am){var Al=Am.expr.nds[0].m;Al.did=Aj;Al.n=Ak;});var Ai={};Ai[Aj]=Ah;return Ai;},generateThresholdsInfo:function(Aj,Ao,Ah,Al){var An=Ah.length,Ai=[],Ar,Ak,As=0,Aq=0;for(var Am=0;Am<An;Am++){Ak=Math.round(Al[Am]*100);Aq=As;As=Ak||100;Ar={tid:Am+1,n:"threshold "+Am,scope:1,rtp:2,rtxt:"",fmt:{bc:Ah[Am],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:Aj,n:Ao},cs:[{v:Ak+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:As,flr:Aq};Ai.push(Ar);}var Ap={};Ap[Aj]=Ai;return Ap;},psPt2CssPt:function(Aj,Ai){var Ah=parseInt(Aj,10)*0.75;if(Ai instanceof Function){Ah=Ai(Ah);}return Ah+"pt";},captureEventOnce:function(Am,Al,Ah,Ak,Aj){function Ai(An){Al.call(Ah,AY.newDomEvent(Am,window,An||window.event),Aj);AC.detachEvent(Ak,Am,Ai);}Aj=Aj||{};Ak=Ak||document;AC.attachEvent(Ak,Am,Ai);},getPropertyByPath:function(Al,Ak,Ah){var Ai,Aj;if(typeof Ak!=="string"){return Ah;}Ai=Ak.split(".");Aj=Ai.every(function(An){var Am=Al[An];if(Am!==undefined){Al=Am;return true;}return false;});return Aj?Al:Ah;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(Ah,Ai){if(Ai){Object.keys(Ai).forEach(function(Aj){Ah[Aj]=Ai[Aj];});}return Ah;},{});},toggleControlEnabled:function(Ah,Ai){[].concat(Ah).forEach(function(Aj){Aj.set("enabled",!!Ai);});},findInArray:function(Ak,Aj,Ai){var Am=-1,Al,Ah;if(!Array.isArray(Ak)){return Am;}for(Al=Ai===undefined?0:Ai,Ah=Ak.length;Al<Ah;Al+=1){if(Aj(Ak[Al])){return Al;}}return Am;},arrayUnique:function(Ah,Aj){if(!Array.isArray(Ah)){return Ah;}var Ai=mstrmojo.VisUtility;return Ah.filter(function(Ak,Al){return Ai.findInArray(Ah,function(Am){return Aj(Ak,Am);},Al+1)===-1;});},range:function(Ah,Al,Ak){Ak=Ak||1;var Aj,Ai=[];for(Aj=Ah;Aj!==Al;Aj+=Ak){Ai.push(Aj);}return Ai;},drawDashLine:function I(Ap,Aj,An,Ai,Al,Ah,Ao){var Am=(Aj===Ai),Ak;Ap.beginPath();Ap.moveTo(Aj,An);if(Am){Ak=0;An+=Ah;while(An<=Al){if(Ak%2===0){Ap.lineTo(Aj,An);An+=Ao;}else{Ap.moveTo(Aj,An);An+=Ah;}Ak++;}if(Ak%2===0){Ap.lineTo(Ai,Al);}}else{Ak=0;Aj+=Ah;while(Aj<=Ai){if(Ak%2===0){Ap.lineTo(Aj,An);Aj+=Ao;}else{Ap.moveTo(Aj,An);Aj+=Ah;}Ak++;}if(Ak%2===0){Ap.lineTo(Ai,Al);}}Ap.stroke();},repeat:function(Aj,Ak){var Ah=[],Ai;Ak=Math.max(0,Ak);for(Ai=0;Ai<Ak;Ai+=1){Ah[Ai]=Aj;}return Ah;},isHierarchyObject:function(Ah){return(Ah&&Ah.t)===o.DssTypeDimension;},selectDropZonePanel:function(Ah){AA(Ah,"editPanel");},selectPropertyPanel:function(Ai,Aj){AA(Ai,"propertiesPanel");var Ah=Ai.edtModel;if(Ah){Ah.selectTargetByValue(Aj);}},pluck:function(Ai,Ah){if(!S.isArray(Ai)){return Ai;}return Ai.map(function(Aj){return Aj&&Aj[Ah];});},pick:function(Ai,Ah){return Ah.reduce(function(Ak,Aj){Ak[Aj]=Ai[Aj];return Ak;},{});},isColorManuallySet:function(Aj,Ai){var Ah=Ae(Aj,Ai);if(Ah){return Ah.isManual;}},getCombColor:function(Aj,Ai){var Ah=Ae(Aj,Ai);if(Ah){return Ah.color;}},setColorPickerShowAutomatic:function(Ai,Ah){Ai.children[0].fillColor.colorPicker.showAutomatic=Ah;},getCharGroupValueChangeCb:function(Ah){var Ai=(function(){var Aj={};Aj[AR.FONT_WEIGHT]=AV.FS_BOLD;Aj[AR.FONT_STYLE]=AV.FS_ITALIC;Aj[AR.UNDERLINE]=AV.FS_UNDERLINE;Aj[AR.LINE_THROUGH]=AV.FS_STRIKETHROUGH;return function(Ak,Al){return Ak^Aj[Al];};}());return function(Ak,Aj){if(Ah instanceof Function){Ah=Ah();}if(!Ah){return ;}switch(Ak){case AR.COLOR:Ah.fontColor.fill.value.setValue(Aj);break;case AR.FONT_SIZE:Ah.fontSize.setValue(Aj);break;case AR.FONT_FAMILY:Ah.fontFamily.setValue(Aj);break;case AR.FONT_WEIGHT:case AR.FONT_STYLE:case AR.UNDERLINE:case AR.LINE_THROUGH:Ah.fontStyle.setValue(Ai(Ah.fontStyle.getValue(),Ak));break;}};},getMetricsInDropZone:AN,addLegendFontChangeListeners:function(Ai,Aj){var Ah=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AZ(Ah,Ai,Aj);},addLegendBackgroundChangeListeners:function(Ai,Aj){var Ah=["lgdBgFillClr","lgdBgFillTrans"];AZ(Ah,Ai,Aj);},isValidDropZone:function(Ah){if(Ah===undefined){return false;}var Aj=Object.keys(Ah).filter(function(Ak){return Ak!=="visProp";});var Ai=W.copyProps(Aj,Ah);return Ah&&!W.equals(Ai,{});},unitExistInTemplate:function(Ak,Ah){var Aj,Am,Al=Ah.row,Ai=Ah.col;for(Aj=0,Am=Al.length;Aj<Am;Aj++){if(Al[Aj].id===Ak){return true;}}for(Aj=0,Am=Ai.length;Aj<Am;Aj++){if(Ai[Aj].id===Ak){return true;}}return false;},findDisabledUnits:function(Aq,Ar){var Am,Ai,Ak=Ar.docModel.datasets,Ah=Aq.gts,Ao=Aq.datasetId,Al=Ak[Ao]||{},An=Al.att||[],Ap=[];var Aj=mstrmojo.VisUtility;if(An){for(Am=0,Ai=An.length;Am<Ai;Am++){if(!Aj.unitExistInTemplate(An[Am].did,Ah)){Ap.push(An[Am]);}}}return Ap;},getDrillCandidates:function(Am,An){var Ap=Am.modelData,Ar=Am.model,Al=Ar.docModel.datasets,Ah=Ap.gts,Aj=mstrmojo.VisUtility,As=Aj.findDisabledUnits(Ap,Ar),Ai=[],Ak=(function(){var At;if(An){S.forEach(Ah.row.concat(Ah.col),function(Au){if(Au.id&&Au.id===An){At=Au.dp;}});}return At;}()),Ao=function(At,Aw){var Au=S.find(At,"did",Aw.id),Av=At[Au];if(Av&&!Av.hide){Aw.n=Av.n;return true;}return false;},Aq=S.filter(Ak,function(Av){var At;for(At in Al){var Au=Al[At];if(Ao(Au.att,Av)){return true;}}return false;});if(Aq){Ai=S.filter(As,function(Au){for(var At in Aq){if(Aq[At].n===Au.n){return true;}}return false;});}return Ai;},getDrillSubMenu:function(Ah){if(!Ah||!Ah.items||!Ah.drillAction){return{};}var Al=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,isHostedWithin:false,alignWithAnchor:true,maxHeight:350}),Ai=Ah.items,Ak=Ah.drillAction,Aj=[];if(mstrmojo.resolveFeature("sort-drill-paths")){Ai.sort(function(An,Am){if(An.n>Am.n){return 1;}if(An.n<Am.n){return -1;}return 0;});}Ai.forEach(function(Ao,Am){if(Aj.indexOf(Ao.did)===-1){Aj.push(Ao.did);if(Ao.att){var An=mstrmojo.VisUtility;var Ap={};W.copy(Ah,Ap);Ap.items=Ai[Am].att;Al.addPopupMenuItem(Ao.n,this.id,An.getDrillSubMenu,"xt",Ap);}else{Al.addMenuItem(Ao.n,"xt",Ak,W.copy(Ah,{drillUnit:Ao}));}}});return Al;},getDrillMenu:function(An,Ao,At,Ah){var Ap=An.model,Ak=mstrmojo.VisUtility,Aq=Ak.getDrillCandidates(An,Ao),Ar=Aq.length,Am=Ap.docModel,Aj=Am.datasets[An.modelData.datasetId],Ax,As=[],Av=-1,Au,Aw,Al,Ai;if(Aj&&Am.isMDXDataset(Aj)){Ak.sortMdxDrillCandidates(Aq);Ax=Aj.tables[0];Ax.dimensions.forEach(function(Ay){Al=true;Au=-1;Ay.hierarchies.forEach(function(Az){Ai=true;Az.att.forEach(function(A0){Aw=Ad.findBin(Aq,A0,"did",Ar);if(Aw!==-1){if(Al){As.push({id:Ay.did,did:Ay.did,n:Ay.n,att:[]});Av++;Al=false;}if(Ai){As[Av].att.push({id:Az.did,did:Az.did,n:Az.n,att:[]});Au++;Ai=false;}As[Av].att[Au].att.push(Aq[Aw]);}});});});}else{As=Aq;}return Ak.getDrillSubMenu(W.copy(Ah,{items:As,drillAction:At}));},sortMdxDrillCandidates:function(Ah){Ah.sort(function(Aj,Ai){if(Aj.did<Ai.did){return -1;}if(Aj.did>Ai.did){return 1;}return 0;});return Ah;},getDrillMenuItemsCallback:function(Aj,Ak,Ah,Ai){return function(){var Am=mstrmojo.VisUtility;var An=Am.getDrillCandidates(Aj,Ai),Al=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});An.forEach(function(Ao){Al.addMenuItem(Ao.n,"xt",Ak,W.copy(Ah,{drillUnit:Ao}));});return Al;};},doDrill:function(Aj,Ax,As,Ay){var Az=Aj;function Ap(A1){return A1.model.controller.cmdMgr;}function Av(){return{success:function A1(){var A2=mstrmojo.VisUtility;A2.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var Ai=Az.model,Aw=(Az.getDocModel&&Az.getDocModel())||Az.model.docModel,Au=Aw.getDataService(),Am=Au.newUpdate();var Ao=true;if(Aw.prefs&&Aw.prefs.rtprnt){Ao=parseInt(Aw.prefs.rtprnt,10)===1;}else{if(Ai.xtab.defn.tkp!==undefined){Ao=parseInt(Ai.xtab.defn.tkp,10)===-1;}}Ay=Ay||{};Ay.keepParent=Ao;var An=As.call(Aj,Ax,Ay);var Aq=Az.zonesModel,A0=Aq.getUpdateCallback(),Ar=Az.model.controller||Aw.controller,Ak=Ar._getXtabCallback(Az);Am.add(An,Ac(A0,Ak));var Ah=Ai.getSelectorDataFromTemplateLimit(Az.model.data.tpl).concat({keepOnly:true,data:Az.getContextMenuSelections()}),At=Aw.getKeepOnlyOrExcludeAction(Az.k,Ah);Am.add(At,Av.call(Az));Ap(Az).execute({execute:function Al(){this.submitUpdate(Am);},urInfo:{callback:Am.callback}});},strStartsWith:function(Aj,Ai,Ah){Ah=Ah||0;return Aj.lastIndexOf(Ai,Ah)===Ah;},changeWidgetBackground:function(Aj,Ak,Ai){var Ah=Aj.parent;if(Ah&&Ak!==Ai){Ah.changeUnitFormats(false,1,Aj.getFormats(),AR.BACKGROUND_COLOR,Ak,Ai);Ah.raiseEvent({name:"BEMFormatChange",propertyName:AR.BACKGROUND_COLOR,value:Ak,isTitle:false});}},translateGridError:function(Ai,Ah){if(Ah===undefined){Ah=Af.AE_ERROR;}if(Ah===Af.EMPTY_DATA){Ai=mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data.");}if(Ah===Af.NO_DATASET||Ah===Af.NO_TEMPLATE_UNIT){Ai=mstrmojo.desc(11668,"Drag objects here.");}if(!Ai){Ai=mstrmojo.desc(13687,"Unknown error");}return{msg:Ai,type:Ah};},hasValidValueInMetric:function(Ak,Ai){var Ah=mstrmojo.VisUtility;var Aj=Ah.getPropertyByPath(Ak,"model.data.gsi.mx");if(Aj===undefined||Aj.length<=Ai||Ai<0){return false;}var Al=Aj[Ai];return["min","max"].every(function(Am){var An=Al[Am];return An!==undefined&&An!==null&&An!=="";});},renderWidgetErrorRSD:function(Ak,Am,Ai){var Ao=document.createElement("div");var An='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+Am+"</div></div>";Ao.innerHTML=An;Ao=Ao.firstChild;var Ah=Ak.width,Aj=Ak.height;if(Ah!==undefined){Ao.style.width=Ah+"px";}if(Aj!==undefined){Ao.style.height=Aj+"px";}var Al=Ak.domNode;if(Al){Ai.forEach(function(Ap){Al["on"+Ap]=undefined;});while(Al.firstChild){Al.removeChild(Al.firstChild);}Al.appendChild(Ao);}else{Ak.parent.domNode.appendChild(Ao);}},visPrint:function(){var Ah=mstrmojo.VisUtility.enableInVis;if(Ah&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(Ak,Ah){var Aj=Ah&&Ah.did,Ai=Ak.model.data.datasetId||"",Al=null;if(Aj){Al=AT.getDatasetFromAttributeId(Ak.model.docModel.datasets,Aj);}else{if(Ai){Al=AT.getDatasetFromId(Ak.model.docModel.datasets,Ai);}}return Al&&AT.hasCGorCon(Al);},isCGorCon:function m(Ak,Ah){var Aj=Ah&&Ah.did,Ai=Ak.model.data.datasetId||"",Al=null;if(Aj){Al=AT.getDatasetFromAttributeId(Ak.model.docModel.datasets,Aj);}else{if(Ai){Al=AT.getDatasetFromId(Ak.model.docModel.datasets,Ai);}}return Al&&AT.isCGorCon(Ah,Al);},findElementsByAttribute:function R(Aj,Al,Ak,Ah){Ah=!!Ah;var Am=[];if(Ak.constructor!==Array){Ak=[Ak];}var An=function(Ao){if(Ah){return Ao.identity&&Ao.identity.tlOpt&&Ao.identity.tlOpt[Al];}else{return Ao.getAttribute(Al);}};function Ai(Aq){var Ao=An(Aq),Ap;if(Aq.hasChildNodes()){Ap=Aq.firstChild;while(Ap){if(Ap.nodeType===1){Ao=An(Ap);if(Ak.indexOf(Ao)!==-1){Am.push(Ap);}else{Ai(Ap);}}Ap=Ap.nextSibling;}}}Ai(Aj);return Am;},restoreEsForUnit:function AP(Al){if(!Al){return ;}var Am=Al.es,Ai=Al.fs,Ak=Al.otp,Ah=Ai&&Ai.length||0;function Aj(An){var Ao=document.createElement("div");Ao.innerHTML=An;return Ao.innerText;}if(Am){S.forEach(Am,function(Ao,An){Ao.n=b.decodeHtmlString(Ao.n);if(Ak===o.DssTypeAttribute&&Ah){switch(Ai[An%Ah].bftp){case AL.DssBaseFormHTMLTag:Ao.n=Aj(Ao.n);break;default:}}});}},isTrue:function AU(Ah){return Ah==="true"||Ah===true;},getFontFamilyItems:function q(){if(P){return P;}else{P=[];S.forEach(Q.Families.slice(1),function(Ah){P.push({n:Ah.n,id:Ah.n,did:Ah.n,preview:!Ah.symbolic});});return P;}},surroundWithQuotes:function AO(Ah){if(!Ah){return"";}return"'"+Ah.replace(/^['|"]+/,"").replace(/['|"]+$/,"")+"'";}});mstrmojo.VisUtility.enableInVis=true;}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.Label","mstrmojo.hash","mstrmojo.array","mstrmojo.ui.Checkbox","mstrmojo.css","mstrmojo.string","mstrmojo.threshold.ThresholdExprTree","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.models.FormatModel.getFormatUpdate","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL","mstrmojo.vi.util.NumberFormatUtility");mstrmojo.requiresDescs(2869,3397,5893,7978,7979,13788,13789,13790,13894,14599,14600,14601,14611);var M=mstrmojo.hash,I=mstrmojo.array,T=mstrmojo.css,B=mstrmojo.string,A=mstrmojo.models.FormatModel.decodeValue,J=mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL,D=mstrmojo.vi.ui.DatasetUnitMenuUtils,K=12,L=mstrmojo.models.FormatModel.ENUM_NUMBER_FORMAT_KEYS_OBJ,N=mstrmojo.vi.util.NumberFormatUtility;function S(V){this.threshold.scope=V;}function C(b,W,V,a){var X=this.previewNode;switch(b){case 10:var Z=I.filterOne(J,function(c){return c.v===W;});if(Z){X.innerHTML=Z.n;}break;case 4:T.addClass(X,"hasImage");X.innerHTML='<img class="replaceImg" src="'+B.encodeHtmlString(W)+'" />';break;default:var Y=B.encodeHtmlString(W)||(V===K?mstrmojo.desc(14611,"Sample"):"1234.567");if(!!a){Y=N.applyFormatToNumber(a,Y);}X.innerHTML=Y;}}function E(X,V){V.fontFamily="'"+(X.ff||"").replace(/\'/g,"")+"'";V.fontSize=parseInt(X.fsz,10)+"pt";V.fontWeight=X.fw?"bold":"normal";V.textDecoration=(X.fun?"underline":"")+" "+(X.fst?"line-through":"");V.fontStyle=X.fit?"italic":"";V.color=X.fc;var W;if(!!X.bc&&!!X.bc.c1){W=T.buildGradient(X.bc.or,X.bc.c1,X.bc.c2);if(W&&W.n){V[W.n]=W.v;}}else{if(!!X.gdc){W=T.buildGradient(X.gda===90?0:1,X.bc,X.gdc);if(W&&W.n){V[W.n]=W.v;}}else{V.backgroundColor=X.bc;}}V.textAlign=X.alh;V.verticalAlign=X.alv;V.wordWrap=X.atw;V.direction=X.atd;var Y=X.bts;V.border=X.borderStyle||(Y?A("bts",Y):"1px dotted");V.borderColor=X.borderColor||X.btc||"#e1e1e1";}mstrmojo.threshold.ThresholdRow=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ThresholdRow",markupString:'<div id="{@id}" class="mstrmojo-thresholdRow cf {@cssClass}" style="{@cssText}" mstrAttach:click><div class="draggable-icon"></div><div class="container"></div><div class="previewWrap"><div class="preview"></div></div><div class="menu"></div><div class="delete"></div></div>',markupSlots:{containerNode:function P(){return this.domNode.children[1];},draggableNode:function O(){return this.domNode.firstChild;},previewNode:function P(){return this.domNode.children[2].firstChild;},menuNode:function P(){return this.domNode.children[3];},deleteNode:function G(){return this.domNode.children[4];}},threshold:undefined,idx:undefined,editor:undefined,model:undefined,lblIndex:undefined,chkBox:undefined,exprTree:undefined,postBuildRendering:function R(){this.destroyChildren(false);var V=this.threshold,W=this.model,X=this.previewNode.style,Z=M.copy(V.fmt,M.clone(W.getGridValueFormat())),Y=V.expr;C.call(this,V.rtp,V.rtxt,W.objectType,Z.nfs);if(Z){E(Z,X);}this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.Label",alias:"lblIndex",text:this.idx+1},{scriptClass:"mstrmojo.threshold.ThresholdExprTree",alias:"exprTree",editor:this.editor,model:this.model,items:[Y]}]);W.attachEventListener("selectedThresholdsChange",this.id,"onselectedThresholdsChange");return this._super();},onselectedThresholdsChange:function Q(){},onclick:function U(Y){var W=this.editor,a=Y.getTarget(),X=this,V=this.model,Z=W.objectType===K;if(a===this.deleteNode){this.removeFromModel();}else{if(a===this.menuNode){var b=new mstrmojo.ui.menus.MenuConfig();b.hostId=this.id;b.hostElement=this.menuNode;b.isHostedWithin=false;b.addSubMenuItem(mstrmojo.desc(13788,"Apply to"),"",W.id,function(){var c=new mstrmojo.ui.menus.MenuConfig();c.addRadioMenuGroup(X.threshold.scope||1,S,[{value:1,text:Z?mstrmojo.desc(14599,"Element Rows Only"):mstrmojo.desc(13789,"Metric Only")},{value:2,text:Z?mstrmojo.desc(14600,"Subtotal Rows Only"):mstrmojo.desc(13790,"Subtotals Only")},{value:3,text:Z?mstrmojo.desc(14601,"Elements and Subtotals"):mstrmojo.desc(13894,"Metric and Subtotals")}],"",X,true);return c;});b.addMenuItem(mstrmojo.desc(2869,"Formatting"),"",function(){W.openPropertyPanel(X);});if(V.showNumberFormat()){b.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),"",function(){var c=function(d){M.forEach(d,function(f,e){if(!X.threshold.fmt){X.threshold.fmt={};}X.threshold.fmt[e]=f;});X.model.raiseEvent(M.copy(X.model,{name:"modelEdit"}));};return D.getNumberFormatEditor(X,X.threshold.fmt||{},function(e){var d={};d[L.CATEGORY]=e.category||-3;d[L.CURRENCY_POSITION]=e.currencyPosition||0;d[L.CURRENCY_SYMBOL]=e.currencySymbol||"$";d[L.DECIMAL_PLACES]=e.decimalPlaces||2;d[L.FORMAT]=e.format||"";d[L.NEGATIVE_NUMBERS]=e.negativeNumbers||3;d[L.THOUSAND_SEPARATOR]=e.thousandSeparator||0;c(d);});});}b.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"",function(){V.duplicateThreshold(X.idx);});if(this.idx!==0){b.addMenuItem(mstrmojo.desc(7978,"Move Up"),"",function(){V.moveThreshold(X.idx,X.idx-1);});}else{b.addNonInteractiveMenuItem(mstrmojo.desc(7978,"Move Up"),"",true);}if(this.idx!==V.thresholds[V.metricId].length-1){b.addMenuItem(mstrmojo.desc(7979,"Move Down"),"",function(){V.moveThreshold(X.idx,X.idx+1);});}else{b.addNonInteractiveMenuItem(mstrmojo.desc(7979,"Move Down"),"",true);}b.addMenuItem(mstrmojo.desc(5893,"New Condition"),"",function(){X.exprTree.newCondition(null);});this.openPopup(b.newInstance());}else{if(a===this.previewNode||a===this.previewNode.firstChild){W.openPropertyPanel(this);}}}},removeFromModel:function F(){this.model.deleteThreshold(this.threshold);},onpropertyModelChange:function H(V){M.copy(V.threshold,M.clear(this.threshold));this.refresh();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.CheckList","mstrmojo.DataGrid","mstrmojo.hash","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.func","mstrmojo.array","mstrmojo.dom");var J=mstrmojo.hash,e=mstrmojo.array,C=mstrmojo.css,U=mstrmojo.Button.newWebButton,m=mstrmojo.ui.Pulldown.newPulldown,h=mstrmojo.models.FormatModel.getFormatUpdate,Z=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,c=mstrmojo.vi.ui.DatasetUnitMenuUtils,H,I=mstrmojo.dom;var B=1,j=2,G=3,D="480px",f="visfilter";var E=[{n:mstrmojo.desc(6031,"Off"),v:"0"},{n:mstrmojo.desc(6030,"On"),v:"1"},{n:mstrmojo.desc(8504,"Form name only"),v:"2"},{n:mstrmojo.desc(8505,"Show attribute name once"),v:"3"},{n:mstrmojo.desc(4531,"Automatic"),v:"4"}],Y=[{n:mstrmojo.desc(13786,"Show both nulls and zeros"),v:"-1"},{n:mstrmojo.desc(13787," Hide both nulls and zeros"),v:"2"},{n:mstrmojo.desc(9845,"Hide nulls only"),v:"0"},{n:mstrmojo.desc(9846,"Hide zeros only"),v:"1"}],N=[{n:mstrmojo.desc(13544,"Last selection only"),v:0},{n:mstrmojo.desc(13545,"Intersection of all selections"),v:1}],g=[{n:mstrmojo.desc(959,"Default"),v:"-1",title:mstrmojo.desc(959,"Default")},{n:mstrmojo.desc(9640,"Inner Join"),v:"0",title:mstrmojo.desc(9640,"Inner Join")},{n:mstrmojo.desc(9641,"Outer Join"),v:"1",title:mstrmojo.desc(9641,"Outer Join")}],M=[{n:mstrmojo.desc(959,"Default"),v:"-1",title:mstrmojo.desc(959,"Default")},{n:mstrmojo.desc(13177,"Inner Join"),v:"0",title:mstrmojo.desc(13178,"Results displaying only those attribute elements that have metric value")},{n:mstrmojo.desc(13179,"Outer Join - Ignore Filter"),v:"2",title:mstrmojo.desc(13180,"Outer join to attribute's look up table without considering the filter on template")},{n:mstrmojo.desc(13181,"Outer Join - Preserve Filter"),v:"3",title:mstrmojo.desc(13182,"Outer join to attribute's look up table after considering the filter on template")}];var b={"-1":mstrmojo.desc(959,"Default"),"0":mstrmojo.desc(9640,"Inner Join"),"2":mstrmojo.desc(13179,"Outer Join - Ignore Filter"),"3":mstrmojo.desc(13181,"Outer Join - Preserve Filter")},V={"-1":mstrmojo.desc(959,"Default"),"0":mstrmojo.desc(9640,"Inner Join"),"1":mstrmojo.desc(9641,"Outer Join")};var T;var d=false;function P(t,p,o,r){var q={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",col1Width:t,col2Width:p,children:o};return J.copy(r,q);}function Q(p,q,o){return J.copy(o,{scriptClass:"mstrmojo.Label",slot:q,text:p});}function F(r,o){return[Q(r,"col1Node",{cssClass:"subTitle"}),{scriptClass:"mstrmojo.ui.CheckList",orientation:"h",slot:"col2Node",preBuildRendering:function p(){var w=mstrmojo.all[H].data[o],t=this.items,v=this.selectedIndices;if(w){e.forEach(t,function(z,x){v[x]=w[z.id]==="-1";});}var u=mstrmojo.all[H].olm;if(!!u&&o==="rows"){this.items[1].css="disabled";}else{this.items[1].css="";}},postselectionChange:function q(t){var v=this.items,u=[t.added,t.removed];u.forEach(function(x,w){if(x&&x.length>0){h(o+v[x[0]].id,w===0?"-1":"0",mstrmojo.all[H].newData);}});},items:[{n:mstrmojo.desc(2969,"Show"),id:Z.SHOW_HEADER},{n:mstrmojo.desc(1095,"Merge"),id:Z.MERGE_HEADER,css:""},{n:mstrmojo.desc(2970,"Lock"),id:Z.LOCK_HEADER}]}];}function S(){var p=H.split("-"),o=p.length;if(!mstrApp.isInVFConfigMode&&p[o-1]===f){p.splice(p.length-1,1);}else{if(mstrApp.isInVFConfigMode&&p[o-1]!==f){p.splice(p.length,1,f);}}H=p.join("-");}function W(p){S();var o=mstrmojo.all[H];if(p){o.update=o.update.actions?o.update:{actions:[]};o.update.actions=o.update.actions.concat(mstrmojo.hash.valarray(o.joinActions));o.update.callback=mstrmojo.func.wrapMethods(o.update.callback,o.host.parent.model.getRebuildCallback());if(o.SelectionLimitSection&&o.limitVal){o.host.writeGlobalProperty("slctnLmt",o.limitVal);}o.submitAction(o.newData,o.update.actions,o.update.callback,o.update.extras);}o.newData=o.update={};o.joinActions={};o.close();}function O(p){var t=p.parent.data,q=mstrmojo.all[H],o=q.host.k,r=q.host.controller,u=new mstrmojo.ui.menus.MenuConfig();q.joinActions=q.joinActions||{};if(t.did==="AllAttr"){M.forEach(function(v){u.addMenuItem(v.n,"",function(){p.parent.jtValue.set("text",v.n);t.v=v.v;t.dv=v.n;q.joinActions.AllAttr=r.dataService().getSetAttributesJoinTypeAction(o,v.v);});});}else{g.forEach(function(v){u.addMenuItem(v.n,"",function(){p.parent.jtValue.set("text",v.n);t.v=v.v;t.dv=v.n;q.joinActions[t.did]=r.dataService().getSetMetricJoinTypeAction(o,t.did,t.dt,t.t,v.v);});});}u.hostId=H;u.isHostedWithin=false;u.hostElement=p.domNode;u.menuCssClass="joinbehavior";u.setAlignment(3,2);q.openPopup(u.newInstance());}mstrmojo.vi.ui.editors.MoreOptionsEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.editors.MoreOptionsEditor",host:undefined,showHeadersSection:false,showSelectionLimitSection:false,data:undefined,lockHeadersCase:undefined,update:undefined,newData:undefined,joinActions:undefined,cssClass:"mstrmojo-MoreOptions-Editor",title:mstrmojo.desc(9126,"More options"),help:"more_options_dialog_box.htm",submitAction:mstrmojo.emptyFn,init:function k(o){this._super(o);if(mstrApp.isInVFConfigMode){this.children.splice(2,1);}H=this.id;this.newData=this.update={};this.joinActions={};this.onshowHeadersSectionChange(this.showHeadersSection);this.onshowSelectionLimitSectionChange(this.showSelectionLimitSection);},onOpen:function R(){S();var o=this.host,p=o&&o.gridData,r=p&&p.olm&&!(p.rw&&p.rw.row.bc>0);this.olm=!!r;if(this.showSelectionLimitSection){var q=this.SelectionLimitSection.children[1].children[1].provider;q.curVal=o.readGlobalProperty("slctnLmt");this.limitVal=undefined;}this.refresh();},_set_lockHeadersCase:function X(r,o){this.lockHeadersCase=o;var p=this.data,q=this.lockHeadersCase;if(!p){p=this.data={rows:{},cols:{}};}else{p.rows=p.rows||{};p.cols=p.cols||{};}p.rows.lhv=(q===G||q===B)?"-1":"0";p.cols.lhv=(q===G||q===j)?"-1":"0";},onshowHeadersSectionChange:function K(p){var q=p.value,o=this.headersSection;if(!q&&o){this._headersSecOrphan=o;this.removeChildren(o);}else{if(q&&!o){this.addChildren(this._headersSecOrphan,0);}}},onshowSelectionLimitSectionChange:function a(o){var q=o.value,p=this.SelectionLimitSection;if(!q&&p){this._selectionSecOrphan=p;this.removeChildren(p);}else{if(q&&!p){this.addChildren(this._selectionSecOrphan,2);}}},children:[P("26%","74%",[Q(mstrmojo.desc(2967,"Headers"),"col1Node",{cssClass:"title"}),P("20%","80%",F(mstrmojo.desc(2968,"Rows"),"rows"),{slot:"col2Node"}),P("20%","80%",F(mstrmojo.desc(122,"Columns"),"cols"),{slot:"col2Node"})],{alias:"headersSection",cssClass:"headers",width:D}),P("26%","74%",[Q(mstrmojo.desc(4083,"Display"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[Q(mstrmojo.desc(8503,"Show attribute form names:"),"containerNode",null),m(E,function(o){h(Z.LONG_NAME,o.v,mstrmojo.all[H].newData);},0,{width:"151px",preBuildRendering:function A(){var o=this.items.map(function(p){return p.v;}).indexOf(mstrmojo.all[H].data[Z.LONG_NAME]);this.selectedIndex=Math.max(o,0);}},true)]},{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row2",children:[Q(mstrmojo.desc(13200,"Hide Null/Zero"),"containerNode",null),m(Y,function(p){var o=p.v,q=o==="-1"?"-1":"0";if(o!=="-1"){h(Z.HIDE_NULL,o,mstrmojo.all[H].newData);}h(Z.SHOW_ALL_ROWS,q,mstrmojo.all[H].newData);},0,{width:"181px",preBuildRendering:function A(){var p=mstrmojo.all[H].data,o=p[Z.SHOW_ALL_ROWS]==="-1"?0:this.items.map(function(q){return q.v;}).indexOf(p[Z.HIDE_NULL]);this.selectedIndex=Math.max(o,0);}},true)]}],{alias:"viewSection",cssClass:"view",width:D}),P("26%","74%",[Q(mstrmojo.desc(13546,"Filtering"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[Q(mstrmojo.desc(13547,"When this visualization is filtered by multiple other visualizations, filter by:"),"containerNode",{cssClass:"dropdownLabel"}),m(N,function(o){var p=mstrmojo.all[H],q=p.host;if(q.switchFilterType){p.update=q.switchFilterType(o.v);}},0,{width:"181px",preBuildRendering:function A(){var o=mstrmojo.all[H].host;if(o.getFilterType){this.selectedIndex=o.getFilterType();}}},true)]}],{alias:"filteringSection",cssClass:"filtering",width:D}),P("26%","73%",[Q(mstrmojo.desc(16265,"Selection Data Limit"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[Q(mstrmojo.desc(16264,"Set a limit for the maximum quantity of data points that a user can select on this visualization."),"containerNode",{cssClass:"stepperLabel"}),{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:"75px",preBuildRendering:function A(){C.addWidgetCssClass(this,"selection");mstrmojo.ui.editors.controls.Stepper.prototype.preBuildRendering.call(this);},provider:new mstrmojo.NumStepperContentProvider({item:{interval:1},min:1,max:200000,onTraverse:function(){var o=mstrmojo.all[H];o.limitVal=this.item.value;}})},Q(mstrmojo.desc(16263,"(Max quantity should be no more than 200K.)"),"containerNode",{cssClass:"stepperLabel"})]}],{alias:"SelectionLimitSection",cssClass:"filtering",width:D}),P("26%","74%",[Q(mstrmojo.desc(4571,"Join Behavior"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.DataGridWithTooltip",slot:"col2Node",cssClass:"jointype",banding:false,lockHeader:true,columns:[{headerText:mstrmojo.desc(5467,"Objects"),dataField:"n",headerCss:"objects-hd",tooltip:false,itemTooltipField:"tf",itemCSSField:"itemCss",colWidth:115,colHeight:24},{headerText:mstrmojo.desc(13176,"Join Type"),headerCss:"jointype-hd",dataWidget:{scriptClass:"mstrmojo.Box",cssClass:"jt-col",children:[{scriptClass:"mstrmojo.Label",cssClass:"jt-value",alias:"jtValue",bindings:{text:"this.parent.data.dv"}},{scriptClass:"mstrmojo.Button",cssClass:"jt-menu",alias:"jtBtn",onclick:function(){var o=mstrmojo.all[H];O.call(o,this);}}]}}],items:[],itemFunction:function(){var o=mstrmojo.DataGridWithTooltip.prototype.itemFunction.apply(this,arguments);o.themeClassName=!!mstrApp.isWSStyling?"":"mojo-theme-dark";return o;},preBuildRendering:function A(){var z=mstrmojo.all[H].host,x=z.model&&z.model.docModel,q=z.gridInfo||{},AA=q.rows||[],v=q.cols||[],w=q.mx||[],r=q.dmx||[],u=z.tmsProps,o=u.tpltProp&&u.tpltProp["VLDB Select"]&&u.tpltProp["VLDB Select"][0].v,t=[];o=(o&&o.length)?o:"-1";(AA.concat(v)).some(function(AB){if(AB.t===12){t.push({did:"AllAttr",n:mstrmojo.desc(13185,"All Attributes"),v:o,dv:b[o],itemCss:"jt-allattr"});return true;}return false;});w=e.filter(w,function(AC){var AD=c.getUnitFromDataset(x.datasets,AC.did,4),AB=AC.isSmart&&AC.decomposable===2;return AD&&(!AD.um||AC.afb||!AC.isSmart||AB);});var p=[].concat(u.mxProp);r.forEach(function(AC){var AB={};AB[AC.did]=AC.prop;p.push(AB);});(w||[]).forEach(function(AC){var AB={v:"-1"};(p||[]).forEach(function(AD){if(AD[AC.did]){(AD[AC.did]["VLDB Select"]||[]).forEach(function(AE){if(AE.n==="Metric Join Type"){AB=AE;}});}});t.push({did:AC.did,n:AC.n,dt:AB.dt,t:4,v:AB.v,dv:V[AB.v],itemCss:"jt-metric"});});this.items=t;mstrmojo.DataGridWithTooltip.prototype.preBuildRendering.apply(this,arguments);},postBuildRendering:function L(){mstrmojo.DataGridWithTooltip.prototype.postBuildRendering.apply(this,arguments);this.domNode.style.overflow="hidden";}}],{alias:"JoinBehaviorSection",cssClass:"joinbehavior",width:D}),{alias:"buttonBar",scriptClass:"mstrmojo.Box",slot:"buttonNode",children:[U(mstrmojo.desc(221,"Cancel"),function(){W(false);}),U(mstrmojo.desc(118,"Save"),function(){W(true);},true)]}]});mstrmojo.DataGridWithTooltip=mstrmojo.declare(mstrmojo.DataGrid,[mstrmojo._HasTooltip],{scriptClass:"mstrmojo.DataGridWithTooltip",tooltip:"",useRichTooltip:true,itemFunction:function(q,o,p){var r=new mstrmojo.DataRow({columns:p.columns,data:q,idx:o,dataGrid:p,parent:p});p.dataTextCSSClass=r.dataTextCSSClass;return r;},updateTooltipConfig:function l(p){var q=p.target||I.eventTarget(p.hWin,p.e),o=I.position(q);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMRIGHT,content:this.getTooltipContent(p),top:o.y+1.5*o.h,left:o.x,cssClass:"vi-regular vi-tooltip-D"};},getTooltipContent:function(o){return mstrmojo.string.regEscape(o.target.innerText);},showTooltip:function n(o,p){if(o.target.className===this.dataTextCSSClass){this._super(o,p);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.string","mstrmojo.vi.ui.HierarchyElementsCheckListBrowser","mstrmojo.vi.ui.ElementsBrowser","mstrmojo.ValidationTextBox","mstrmojo.DateTextBox","mstrmojo.Label","mstrmojo._IsList","mstrmojo.rw.ConditionWalkProviderBase","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.ui.CheckList","mstrmojo.ui.ColumnContainer","mstrmojo.vi.ui.DatasetUnitMenuUtils");var P=mstrmojo.array,V=mstrmojo.css,F=mstrmojo.string,M=mstrmojo.expr,W=mstrmojo.dom,X=mstrmojo.hash,x=M.ET,Z=M.ET2TGT,n=M.DTP2FN_DTP,Y=M.FN,m=M.FNT,S=M.FN_MRP,r=mstrmojo.rw.ConditionWalkProviderBase,c=r.onWalkChange,p=r.updateList,AI=r.fnItem,AH=r.isComparisonAllowed,a=r.clearInvalid,D=r.shouldShowCst,d=r.getConstant,G=r.getConstantDataType,w=r.getConstantValue,AJ=r.isDATE,e=r.getCstListCompareTgts,f=r.fmJson,AB=r.allowedTargetTypes,L=r.updatePulldown,T=r.onWalkChangeThroughPulldown,o=mstrmojo.mstr.EnumDSSXMLObjectTypes,AF=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,AL=mstrmojo.vi.ui.DatasetUnitMenuUtils,B=mstrmojo.ui._HasListTooltip;var E=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;var Q=mstrmojo.meta.TP,AE=mstrmojo.meta.STP,C="-2";var N={SELECT:0,QUALIFICATION:1};var g={TEMPLATE_LEVEL:0,DATASET_LEVEL:1};var U={VALUE:1,RANK_PERCENTAGE:2,BOTH:3};var l=0,q=1;var H=368,AD=H-5,AK=5,R=26,K=10;var v={};v[x.MQ]={key:"metricFns",def:M.METRIC_FNS};v[x.MC]={key:"metricFns",def:M.METRIC_FNS};v[x.AQ]={key:"formFns",def:M.FORM_FNS};v[x.AL]={key:"formFns",def:M.FORM_FNS};v[x.AC]={key:"formFns",def:M.FORM_FNS};v[x.AE]={key:"elemFns",def:M.ELEM_FNS};function AG(AM){return'<div class="unit item '+AL.getUnitCssClass(AM)+'">'+F.encodeHtmlString(AM.n)+"</div>";}function AA(AM){var AN=this.selectedNode;P.forEach(AN.classList,function(AO){if(AO&&F.startsWith(AO,"ic")){V.removeClass(AN,AO);}});V.addClass(AN,"unit");V.addClass(AN,"item");V.addClass(AN,AL.getUnitCssClass(AM));return F.encodeHtmlString(AM.n);}function k(AN,AV){var AR=AN.model,AU=AR.et,AW=AR&&AR[Z[AU]]&&AR[Z[AU]][AN.columnWalk.target.itemIdField||"did"],AQ=AR&&AR.fm,AZ=AQ&&AQ.dtp,AO=AH(AR,AN.ets);if(this.targetsLastMod&&this.targetsLastMod===AN.targetsLastMod&&AW&&AW===this._lastTargetId&&this.lastFmDtp===AZ&&this.lastFnTp===AO&&this.lastEt===AU){return ;}var AT=this.attMxPd,AY=this.attMxLabel;if(!AO){AT.set("items",[]);AY.set("visible",false);AT.set("visible",false);}else{var AX=AR.a?mstrmojo.desc(518,"Attribute"):AR.m?mstrmojo.desc(517,"Metric"):"",AS=e(AN),AM=AR[Z[AR.et]+(2+AV)],AP=AM?P.find(AS,"did",AM.did):undefined;AY.set("text",AX);AT.items=AS;AT.selectedIndex=AP>=0?AP:undefined;AT.refresh();AY.set("visible",true);AT.set("visible",true);}this._lastTargetId=AW;this.lastFnTp=AO;this.lastFmDtp=AZ;this.lastEt=AU;this.targetsLastMod=AN.targetsLastMod;}function J(AU,AX){AU.updating=true;var AQ=AU.parent.parent.parent,AW=D(AQ,AX);if(!AW){AU.updating=false;return ;}var AO=AQ.model||{},AT=d(AQ,AX),AP=G(AQ,AT),AY=w(AQ,AX),AV=AO.fn,AS=M.fn_List(AV,AO.fnt),AM=AJ[AP];var AR=AM?AU.dateInput:AU.txtInput;var AN=AM?AU.txtInput:AU.dateInput;AN.set("visible",false);AR.updating=true;AR.set("dtp",AP);AR.set("isList",AS);AR.set("value",AY);AR.set("visible",true);AR.set("hint",AS?mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"):"");AR.updating=false;if(AV===1||AV===2){AR.constraints.min=0;}if(AR.clearValidation&&AR.inputNode){AR.clearValidation();}k.call(AU,AQ,AX);switch(AO.et){case x.AQ:case x.AL:case x.MQ:AU.attMxPd.set("selectedIndex",undefined);break;}AU.updating=false;}function AC(){var AP=this.parent,AN=AP.parent.parent.parent,AO=(this.isValid&&this.isValid())||(!this.isValid&&!F.isEmpty(this.value)),AM=AN.model;AN["invalid"+AP.cstIndex]=!AO;if(!this.updating){this.updating=true;if(AM){AM.edit(AP.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}if(AN.updateOkBtn){AN.updateOkBtn();}}function I(AM){if(AM){var AO=AM.n,AN=AM.dsName;if(AO&&AN){return'<div class="name">'+F.encodeHtmlString(AO,true)+'</div><div class="dsc dataset">'+F.encodeHtmlString(AN,true)+"</div>";}else{return B.getTooltipText.call(this,AM);}}}function j(AM){return X.copy(AM,{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"txtInput",cssText:"width: 100%",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.VALUESET},onValid:AC,onInvalid:AC,onClearValidation:a,size:6,visible:true},{scriptClass:"mstrmojo.DateTextBox",alias:"dateInput",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:AC,onInvalid:AC,onClearValidation:a,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(AP){W.stopPropogation(AP.hWin,AP.e);}},visible:true},{scriptClass:"mstrmojo.Label",cssClass:"attMxLabel",text:"Attribute",alias:"attMxLabel"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attMxPd",itemIdField:"did",cssClass:"conditionWalk-attMxPd",onSelectedItemChange:function AN(AQ,AR){if(this.hasRendered){var AP=this.parent.parent.parent.parent;T.call(this,AP,AQ,"c0");}},getPulldownTextInnerHTML:AG,getPopupListConfig:function AO(){var AP=mstrmojo.ui.Pulldown.prototype.getPopupListConfig.call(this);AP.showTooltipForLargeText=false;AP.getItemProps=function AQ(AT,AR){var AS=mstrmojo._IsList.getItemProps.call(this,AT,AR);AS.title="";AS.style=this.parent.itemCssText||"";AS.addCls("unit "+AL.getUnitCssClass(AT));return AS;};AP.getTooltipText=I;return AP;}}],update:function(){J(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});}});}function t(AM){return AM[Q]===o.Attribute&&AM[AE]===AF.AttributeRecursive;}function u(AM){var AO=AM[Q]===o.Consolidation&&AM[AE]===AF.ConsolidationManaged,AN=mstrApp&&mstrApp.rootCtrl&&mstrApp.rootCtrl.docCtrl&&mstrApp.rootCtrl.docCtrl.model;if(AO&&AN&&AN.findUnitInDataSet){AM=AN.findUnitInDataSet(AM.did);if(AM&&AM.attId){return t(AN.findUnitInDataSet(AM.attId));}}}mstrmojo.vi.ui.ConditionWalkProvider=mstrmojo.declare(mstrmojo.rw.ConditionWalkProviderBase,null,{scriptClass:"mstrmojo.vi.ui.ConditionWalkProvider",getTargetNodeProps:function h(){var AW=this;return{alias:"target",isAttribute:false,isMetric:false,showChooseMethod:true,showLevel:false,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(15115,"Based on")},{scriptClass:"mstrmojo.ui.SearchablePulldown",alias:"target",itemIdField:"did",cssClass:"conditionWalk-target",allowEmptyText:true,onRender:function(){if(this.hasRendered){this[this.editableSlot].setAttribute("placeholder",mstrmojo.desc(10,"Search"));}},postCreate:function(){this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},getEditableTextInnerHTML:function AX(){var AZ=this.selectedIndex,AY=this.getPopupList(),Aa=AY&&AY.items;if(this.selectedNode&&Aa&&Aa[AZ]){return this.getPulldownTextInnerHTML(Aa[AZ]);}else{return"";}},update:function AS(){var Ab=this.parent.parent.parent,Aa=Ab.model,AY=Ab.targetsLastMod,Ae=Aa&&Aa.et;if(this.lastModel!==Aa||this.targetsLastMod!==AY){this.lastModel=Aa;this.targetsLastMod=AY;var AZ=Ab.targets,Ac=Ab.ets;if(Ac&&AZ&&AZ.length){var Ad=AB(Ab.ets);AZ=P.filter(AZ,function(Aj){return Ad[Aj[Q]];});}var Ah=Aa&&Aa[Z[Ae]],Ag=Ab.objectBrowsingEnabled,Ai=Ag&&(!AZ||P.find(AZ,"did",C)===-1);if(Ae===x.ANDOR){Ah=Aa.a||Aa.m||null;}this.set("objectBrowsingEnabled",Ag);if(Ai){AZ=AZ||[];var Af=mstrmojo.desc(15346,"Browse Metadata Objects...");AZ.push({did:C,n:Af,t:-1,title:Af});}L(this,true,M.getSortedObjectsByTypeGroup(AZ),Ah);if((!Ag||Ai)&&!Ah){this.set("isEditing",true);this.openPopup(this.getPopupList());}}},onitemSelected:function AN(Aa,AZ){if(this.hasRendered){var AY=this.parent.parent.parent;T.call(this,AY,Aa,"target");}},preisEditingChange:function AT(){if(this.hasRendered&&this.isEditing){var AY=this.selectedNode;this._lastText=AY.innerHTML;V.removeClass(AY,"unit");V.removeClass(AY,"item");}return true;},postisEditingChange:function AU(){if(this.hasRendered&&!this.isEditing){var AY=this.selectedNode;if(this._lastText){AY.innerHTML=this._lastText;V.addClass(AY,"unit");V.addClass(AY,"item");}else{AY.innerHTML="";}delete this._lastText;}},onPopupWidgetClosed:function AV(Aa){if(this.objectBrowsingEnabled&&Aa&&Aa.pressingEnter){var AY=this.getPopupList(),Ad=AY._oldItems,Ac=this.text;if(Ad&&Ac){var Ab=P.filterOne(Ad,function(Ae){return Ae.n===Ac;});Ab=Ab||AY.items[0];if(!Ab){delete AY._oldItems;AY.set("items",Ad);return ;}if(Ab.did===C){var AZ=this.parent.parent.parent;AZ.browse(this);delete AY._oldItems;AY.set("items",Ad);return ;}}}mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this,Aa);},getPulldownTextInnerHTML:AA,getPopupListConfig:function AM(){var AY=mstrmojo.ui.SearchablePulldown.prototype.getPopupListConfig.call(this);AY.showTooltipForLargeText=false;AY.getItemProps=function AZ(Ae,Ac){var Ad=mstrmojo._IsList.getItemProps.call(this,Ae,Ac);Ad.title="";Ad.style=this.parent.itemCssText||"";Ad.addCls("unit "+AL.getUnitCssClass(Ae));Ad.addCls(Ae.isInvalid?"invalid":"");return Ad;};AY.doItemSelect=function Aa(Af,Ac){if(Af.did===C){var Ad=this.parent;Ad.parent.parent.parent.browse(Ad);}else{if(Af.isInvalid){var Ae=this;window.setTimeout(function(){Ae.showTooltip({target:Ae._getItemNode(Af._renderIdx)},window);},0);}else{mstrmojo._IsList.doItemSelect.call(this,Af,Ac);}}};AY.showTooltip=function Ab(Ah,Ag){if(!this.hasOpenTooltip&&!(this._lastOpened&&this._lastOpened.visible)){var Af=W.eventTarget(Ag,Ah),Ae=this.getItemFromTarget(Af);if(Ae&&Ae.isInvalid){var Ad=this.getItemNodeFromTarget(Af),Ac=W.position(Ad);this.richTooltip={content:mstrmojo.desc(15391,"This is an invalid object. Please contact your administrator for more information."),cssClass:"vi-warning triangle-warning vi-tooltip-C A-center",left:Ac.x+168,top:Ac.y};mstrmojo._HasTooltip.showTooltip.call(this,Ah,Ag);}else{this.constructor.prototype.showTooltip.call(this,Ah,Ag);}}};AY.tooltipOpenDelay=700;AY.getTooltipText=I;return AY;}},{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(15116,"Choose elements by"),alias:"attrLabel",bindings:{visible:"this.parent.isAttribute && this.parent.showChooseMethod"}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"chooseMethodPd",items:null,visible:false,bindings:{visible:"this.parent.isAttribute && this.parent.showChooseMethod"},onitemSelected:function AN(Ab){var Aa=this.parent.fm,AZ=Aa&&Aa.cssClass,AY=Aa&&Aa.domNode,Ac=Aa&&Aa.selectedItem;if(Ab.v===N.SELECT){V.toggleClass(AY,"forms",false);if((AZ||"").indexOf(" forms")>-1){Aa.cssClass=AZ.replace(" forms","");}if((!Ac)||Ac.did!=="1,22"&&Ac.did!=="1,57"){Aa.singleSelectByField("1,22","did");}}else{V.toggleClass(AY,"forms",true);if((AZ||"").indexOf(" forms")===-1){Aa.cssClass=(AZ||"")+" forms";}if(!Ac||Ac.did==="1,22"||Ac.did==="1,57"){Aa.singleSelect(2);}}Aa.updateScrollbars();},update:function AS(){var Ad=this.parent.parent.parent,Ab=Ad&&Ad.model,AZ=Ad&&Ad.disableElementsBrowsing,AY=Ab&&Ab.a,Aa=AY&&AZ&&AZ(AY);if(Aa){this.set("items",[{n:mstrmojo.desc(15117,"Qualification on"),v:N.QUALIFICATION}]);}else{if(AY.ndetype===1){this.children[0].showTooltipForLargeText=false;this.set("items",[{n:mstrmojo.desc(15118,"Selecting in list"),v:N.SELECT,ttpDisabled:true},{n:mstrmojo.desc(15117,"Qualification on"),v:N.QUALIFICATION,cls:"disabled",dsbld:true,ttp:mstrmojo.desc(16184,"This method is not available for this object type.")}]);}else{this.set("items",[{n:mstrmojo.desc(15118,"Selecting in list"),v:N.SELECT},{n:mstrmojo.desc(15117,"Qualification on"),v:N.QUALIFICATION}]);}}var Ac=this.getSelectedItem();switch(Ab.et){case x.AQ:case x.AL:case x.AC:if(!Ac||Ac.v!==N.QUALIFICATION){this.selectItemByField("v",N.QUALIFICATION);}break;default:if(!Ac||Ac.v!==N.SELECT){this.selectItemByField("v",N.SELECT);}break;}}},f({scriptClass:"mstrmojo.ui.CheckList",alias:"fm",fmPost:"",itemIdField:"did",filter:false,isFirstFm:true,multiSelect:false,minimumSelectCnt:0,hasDummyLabel:false,lastAttrId:null,height:AD-R*4-K*2-AK+"px",onchange:function AQ(AY){c.call(this,AY,"fm");},bindings:{visible:"this.parent.isAttribute && this.parent.showChooseMethod"},onvisibleChange:function(){this.lastAttrId=null;}}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15119,"Output Level"),cssClass:"baseOn",alias:"metricLabel",bindings:{visible:"this.parent.isMetric && this.parent.showLevel"}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"outputLevelPd",items:[{n:mstrmojo.desc(12178,"Visualization level"),v:g.TEMPLATE_LEVEL},{n:mstrmojo.desc(13519,"Dataset level"),v:g.DATASET_LEVEL}],selectedIndex:0,bindings:{visible:"this.parent.isMetric && this.parent.showLevel"},onSelectedItemChange:function AO(AZ,Aa){var AY=this.parent.parent.parent,Ab=AY.condition;Ab.level=AZ.v;}}],updateColumnContainer:function AP(){this.target.update();var Ab=this.parent,Ag=Ab.parent,Aj=Ag.model,Ar=Aj&&Aj.et,Ak=this.idx,Ao=this.next,Ap=Aj&&Aj.a,Ah=Aj&&Aj.fm,Ae=Ag&&Ag.inRelation;if(Ar){switch(Ar){case x.AQ:case x.AL:case x.AC:case x.AE:case x.ANDOR:if(Ap){this.set("isMetric",false);this.set("isAttribute",true);var An=Ag.disableElementsBrowsing,Aa=Ap&&An&&An(Ap),Al=Ag.getAttributeInfo(Ap.did),Af=t(Al)||u(Al),Ai=Ag.disableHierarchyLevel;if(Af){Aj.et=x.AE;this.set("showChooseMethod",false);}var Ad=(Aj.etWas&&Aj.etWas===x.AE)?q:l,Am=l;if(Aj.et===x.AE&&!Aa){Am=q;}if(Ad!==Am||Am===l||!Ab.next){Ab.removeTrailingContainer(Ak);if(Am===l&&Ah){Ab.addNextColumn(AW.getFnNodeProps());}else{if(Am===q){Ab.addNextColumn(AW.getEsNodeProps(Af,Ai));}}}Ag.condition.level=g.DATASET_LEVEL;var Aq=this.fm;Aq.updating=true;Aq.update();this.chooseMethodPd.update();Aq.updating=false;}break;case x.MQ:case x.MC:if(Aj.m){this.set("isMetric",true);this.set("isAttribute",false);var AZ=Ag.isMDXDM(Aj.m.did),AY=Ag.condition.level,Ac=Ag.editor&&Ag.editor.showLimits;if(AY!==g.TEMPLATE_LEVEL&&AY!==g.DATASET_LEVEL){AY=Ag.condition.level=Ac?g.TEMPLATE_LEVEL:g.DATASET_LEVEL;}if(!Ae&&!AZ&&Ac){this.set("showLevel",true);this.outputLevelPd.set("selectedIndex",AY);}else{this.set("showLevel",false);}if(!(Ao&&Ao.fn)){this.parent.insertAndRemoveTrailing(Ak,AW.getFnNodeProps());}}break;case x.R:case x.F:case x.XML:this.set("isMetric",false);this.set("isAttribute",false);Ag.condition.level=g.DATASET_LEVEL;this.parent.removeTrailingContainer(Ak);break;}}else{this.set("isMetric",false);this.set("isAttribute",false);}E.call(this);},setupScrollNodes:function AR(){this.scrollNode=null;}};},getEsNodeProps:function A(AT,AO){var AS=AT?"HierarchyElementsCheckListBrowser":"ElementsBrowser",AN=[{scriptClass:"mstrmojo.vi.ui."+AS,alias:"es",height:AD-5+"px",disableLevel:AO,update:function AR(){var AX=this.parent.parent.parent,AY=AX.model,AW=AY&&AY.a,AV=!!AW&&!AW.ilk;if(!AV){return ;}this.set("ifDataSource",AX.getIfDataSource());this.onUpdateBrowseElementsParams=function(Ab){AX.onUpdateBrowseElementsParams(Ab);};if(!AY.es){AY.es=[];}if(AT){var Aa=AX.getAttributeInfo(AW.did);X.copyProps(["t","st"],Aa,AW);if(Aa&&Aa.attId){Aa=AX.getAttributeInfo(Aa.attId);}X.copyProps(["fs","lvfs"],Aa,AW);}else{if(!AW.fs){X.copyProps(["fs"],AX.getAttributeInfo(AW.did),AW);}}var AZ=X.clone(AT?AY.data:AY.es);this.set("attribute",AW);this.set("selectedItems",AZ);},onBrowseElementsFailure:function AM(){var AY=this.attributeId,AV=this.parent.parent,AX=AV.parent,AW=P.filterOne(AX.targets,function(Aa){return Aa.did===AY;});AW.isInvalid=true;AW.cls=(AW.cls||"")+" invalid";AX.set("model",{et:5,isNew:true,defaultETAttr:5});var AZ=AV.target.target;AZ.openPopup(AZ.getPopupWidget());},onItemsSelectionChange:function AU(AV){var AW=this.parent.parent.parent,AX=AW.model;AX.edit(AT?"data":"es",AV);}}];return{alias:"es",children:AN,cssClass:"lastStage",updateColumnContainer:function AP(){this.es.update();},setupScrollNodes:function AQ(){this.scrollNode=null;}};},getFnNodeProps:function b(){var AQ=this,AN=[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrApp.isWSStyling?mstrmojo.desc(15006,"Operator"):mstrmojo.desc(9579,"Condition")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"fnTypePulldown",items:[{n:mstrmojo.desc(15302,"By Value"),v:U.VALUE},{n:mstrmojo.desc(15303,"By Rank"),v:U.RANK_PERCENTAGE}],onSelectedItemChange:function AR(AT,AV){var AU=this.parent;AU.fn.update();}},f({scriptClass:"mstrmojo.ui.CheckList",alias:"fn",multiSelect:false,allowUnlistedValues:false,hideCheckMark:true,itemIdField:"did",onchange:function AM(AT){c.call(this,AT);},update:function(){var AV=this.parent,AZ=AV.parent.parent,AU=AZ.model||{},Aa=AU.et,AY,Ab=false,Ac,AT,Ae=U.BOTH;switch(Aa){case x.AE:Ab=!!AU.a;break;case x.AQ:case x.AC:case x.AL:Ab=!!(AU.fm&&AU.fm.did);AY=Ab?AU.fm.dtp:null;break;case x.MQ:case x.MC:Ab=!!AU.m;AY=Ab?M.METRIC_DTP:null;Ae=AV.fnTypePulldown.getSelectedItem().v;break;}if(!Ab){return ;}var Ad=n[AY];if((this.lastEt!==Aa)||(this.lastFnDtp!==Ad)||(this.lastFnTypeToDisplay!==Ae)){this.lastEt=Aa;this.lastFnDtp=Ad;this.lastFnTypeToDisplay=Ae;var AX=Aa?v[Aa]:null,AW=AX&&AX.key;Ac=(AW&&AZ[AW])||AX.def||[];if(typeof (Ac)==="object"){Ac=Ac[Ad]||Ac["*"];}if(Ae!=U.BOTH){Ac=P.filter(Ac,function(Af){var Ag=Af.tp===m.PER||Af.tp===m.RANK;return Ae===U.RANK_PERCENTAGE?Ag:!Ag;});}AT=AI(AU.fn,AU.fnt||1);AT=P.filterOne(Ac,function(Af){return Af.did===(AT&&AT.did);});p(this,Ab,Ac,AT);if(!AT){this.set("selectedIndex",0);}}this.parent.updateScrollbars();}})];return{alias:"fn",children:AN,updateColumnContainer:function AS(){var Ab=this.parent,AX=Ab.parent,AW=AX.model,AY=AW&&AW.fn,Aa=AW&&AW.fnt,AZ=AW&&AW.et,AV=this.next,AU=AY===Y.IS_NULL||AY===Y.IS_NOT_NULL,AT=(AZ===x.MC||AZ===x.MQ);this.changeFnTypePdVisibility(AT);if(AT){this.fnTypePulldown.getPopupList().singleSelectByField((Aa===m.RANK||Aa===m.PER)?U.RANK_PERCENTAGE:U.VALUE,"v");}else{this.fn.update();}if(AY&&AU){Ab.removeTrailingContainer(this.idx);}else{if(AY&&!(AV&&AV.c0)){Ab.insertAndRemoveTrailing(this.idx,AQ.getC0NodeProps());}}AV=this.next;if(AV){AV.updateColumnContainer();}},changeFnTypePdVisibility:function AP(AU){this.fnTypePulldown.set("visible",AU);var AT=AD-AK-R;if(AU){AT-=(R+K);}this.fn.set("height",AT+"px");},setupScrollNodes:function AO(){this.scrollNode=null;}};},getC0NodeProps:function O(){var AO=this;return{alias:"c0",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},j({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},j({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false},f({scriptClass:"mstrmojo.ui.CheckList",alias:"fm2",fmPost:2,itemIdField:"did",filter:false,multiSelect:false,minimumSelectCnt:0,hasDummyLabel:false,height:AD-R*4-K*2-AK+"px",onchange:function AM(AQ){c.call(this,AQ,"fm2");}})],updateColumnContainer:function AP(){this.c0.update();var AZ=this.parent,AV=AZ.parent,AU=AZ.parent.model,AX=AU&&AU.fn,AQ=AX===Y.BETWEEN||AX===Y.NOT_BETWEEN||AX===S.BETWEEN||AX===S.BETWEEN_DESCENDING,AW=AX===Y.EQUAL||AX===Y.NOT_EQUAL||AX===Y.GREATER||AX===Y.GREATER_EQUAL||AX===Y.LESS||AX===Y.LESS_EQUAL,AY=this.idx,AT=this.next;this.browseLink.set("visible",AV.objectBrowsingEnabled&&AH(AU,AV.ets));this.btwn.set("visible",AQ);var AS=this.c1;AS.set("visible",AQ);if(AQ){AS.update();}else{if(AU.c1){AU.edit("c1",{v:null,dtp:null,skipET:true},true);}}if((!AU.a)&&AU.m&&this.domNode){V.addClass(this.domNode,"lastStage");}var AR=this.fm2;if(AU.a2&&AW){AR.update();AR.set("visible",true);}else{AR.set("visible",false);}E.call(this);},setupScrollNodes:function AN(){this.scrollNode=null;}};},browseObjs:function z(AR,AQ,AT){var AP=W.position(AR.parent.containerNode);AT=AT||{};AT.x=AP.x+40;AT.y=AP.y;this._super(AR,AQ,AT);var AN=AR.ob.browser,AM=AR.parent.opener.docModel,AO=AQ.alias,AS=AR.model.et;AM.controller.rootCtrl.loadDataProvider(function(AU){if(AO==="target"||AS===x.AQ){AN.rootFolder={did:"6F55FB47F9974EABA18CB0C5FF46785C"};}else{if(AS===x.MQ){AN.rootFolder={did:"E0CCB9CF22104A489CBE78D974AFD19E"};}}AN.model=AM;AN.set("dataProvider",AU);AN.set("opened",true);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.DropZoneHelper","mstrmojo.string","mstrmojo.vi.ui.DatasetUnitMenuUtils");var G="mstrmojo-VIUnitList",I="icn clsx_sub",D=mstrmojo.vi.viz.DropZoneHelper.isMetricNames,C=mstrmojo.vi.ui.DatasetUnitMenuUtils,J=mstrmojo.string;mstrmojo.vi.ui.VIDragUnit=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.ui.VIDragUnit",getItemDisplayName:function F(K){return K.n;},getUnitAvatar:function A(N,Q){var M=document.createElement("div"),P=N.getCtxtDragData(),K=P.items,L=['<div class="',[G,mstrApp.getThemeClassName()].join(" "),'">'],O=this;K.forEach(function(S){var T=O.getItemDisplayName(S),R="item unit isAvatar "+C.getUnitCssClass(S);if(D(S)){T=mstrmojo.desc(3582,"Metrics");R+=" is-mh";}L.push('<div class="'+R+'"><span class="txt" unselectable="on">'+(Q?J.encodeHtmlString(T):T)+"</span></div>");});L.push("</div>");M.innerHTML=L.join("");return M.removeChild(M.firstChild);},getUnitDragData:function B(M,K){var L=this.setAvatarClass.bind(this);return{items:K,item:K[0],setAvatarClass:function N(P){L(M,P);},setInvalidAvatarClass:function O(){L(M,I);}};},getDragUnitOffsets:function E(){return{x:21,y:16};},setAvatarClass:function H(N,K){var L=N.avatar;if(L){var M=[G,"hasOwnAvatar",mstrApp.getThemeClassName(),K||""];L.className=M.join(" ");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.ui.DatasetUnitMenuUtils");var A=mstrmojo.vi.ui.DatasetUnitMenuUtils;mstrmojo.vi.ui._CanDropFromSchema=mstrmojo.provide("mstrmojo.vi.ui._CanDropFromSchema",{_mixinName:"mstrmojo.vi.ui._CanDropFromSchema",augmentDropContextForSchema:function B(E,C){var F=E.getCtxtDragData();if(F.src===mstrmojo.vi.models.EnumDragSources.ALL_OBJECT_LIST){var D=A.getCfgForAddUnitFromAllObject(F.items,C.datasets||{});F.dsid=D.dsid;if(D.actions.length){E.actions=D.actions;E.callback=C.getDatasetsUpdateCallback();}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.vi.ui.DatasetUnitMenuUtils");var B=mstrmojo.vi.ui.DatasetUnitMenuUtils;mstrmojo.vi.ui.UnitList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.vi.ui.UnitList",init:function C(D){this._super(D);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIUnitList");},getItemProps:function A(F,D){var E=this._super(F,D);E.addCls("unit "+B.getUnitCssClass(F));return E;}});}());(function(){mstrmojo.requiresClsP("mstrmojo","array","css","hash","color","Editor","Button","Box","Label","num");mstrmojo.requiresClsP("mstrmojo.ui","Pulldown","Checkbox","CheckList");mstrmojo.requiresClsP("mstrmojo.threshold","ColorSlider","ThresholdModel");mstrmojo.requiresClsP("mstrmojo.models","FormatModel");mstrmojo.requiresDescs(16098,16096,16094,16097,16095,16099,16100,16101,16102,16103,16104,2290,16105,16106,16107,16108,5585,7665,7666,7905,7907,7908,7909,7910,12110,12111,16110,16109,16106);var O=mstrmojo.array,c=mstrmojo.css,U=mstrmojo.hash,V=mstrmojo.Button.newWebButton,Z=mstrmojo.num,F=mstrmojo.models.FormatModel.getFormatUpdate,R=mstrmojo.vi.viz.EnumVizStyles,D=mstrmojo.vi.viz.EnumVisualizationTemplates,A=4,Q=20,P=[{n:mstrmojo.desc(16111,"Sequential"),idx:0},{n:mstrmojo.desc(16134,"Diverging"),idx:14},{n:mstrmojo.desc(16135,"Accessible"),idx:20}],G={BUSINESS_BLUE:1,MARINE_BLUE:2,BUSINESS_TEAL:3,AQUAMARINE:4,EMERALD:5,YELLOW_TO_GREEN:6,TANGERINE:7,HONEY:8,SUNFLOWER:9,BUSINESS_RED:10,RASPBERRY:11,LAVENDER:12,GRAY:13,TROPICAL_JUNGLE:15,ORANGE_AND_TEAL:16,WILD_BERRY:17,TRAFFIC_LIGHTS:18,TEMPERATURE:19,ACCESSIBLE_GOLD_AND_PURPLE:21,ACCESSIBLE_GRAY:22,ACCESSIBLE_ORANGE_AND_TEAL:23};var a=mstrmojo.threshold.ThresholdModel.SLIDER_MODE,H=mstrmojo.threshold.ThresholdModel.FEATURES;var M=null,B=null,b=[{n:mstrmojo.desc(527,"Value"),v:7},{n:mstrmojo.desc(4405,"Lowest"),v:4},{n:mstrmojo.desc(529,"Highest"),v:5},{n:mstrmojo.desc(4406,"Lowest %"),v:1},{n:mstrmojo.desc(4407,"Highest %"),v:2}];function X(r){var u=[],p=this.colorSlider,o=p.getComp(),j=p.getPalette(),q=this.basedOn.value,l=this.model,m=this.controller,v=l.orgThresholds,f=this.metricId,h=v&&v[f],e=this.breakBy.breakByList,n=e.items[e.selectedIndex],g=o.length,k,w;if(p.getReversedValue()){j=j.concat().reverse();}for(k=0;k<g;k++){w={};if(this.colorSlider.sliderMode===a.IMAGE_BASED){w.rtp=4;w.rtxt=j[k];}else{w.fmt=F("bc",j[k]);}if(k>0){w.flr=Z.toLocaleString(l.getRealValue(o[k-1],q,p.minValue(),p.maxValue()));}if(k<g-1||g===1){w.ceil=Z.toLocaleString(l.getRealValue(o[k],q,p.minValue(),p.maxValue()));}if(n&&n.did!==-1){w.dmy={did:n.did,t:n.t};}u.push(w);}m.onSubmitActions(u,h,f,m.supportsFeature(H.SHOW_BASED_ON)?this.basedOn.selectedMetric:f,this.basedOn.value,r,A);}function L(q){var m=this.model,AJ=m.data,h=m.thresholds&&m.thresholds[q],AE=AJ.gsi,u=this.colorSlider,o=[],AI=[],n=[],t,AH,f,w=this.colorPalettes,r=this.imageSelector,AC=w.colorPulldown,AG=this.typeSelector.typeCheckList,g=r.imagePulldown,p=this.basedOn,l=p.options,AA=p.metricsList,z=this.breakBy.breakByList,x=this.controller.supportsFeature(H.SHOW_BASED_ON);if(h&&h.length>0){t=m.getSimpleThresholdType(q);if(t!==-2){f=m.isImageBasedType(q);l.set("selectedIndex",O.find(l.items,"v",t));h.forEach(function(e){var AL=U.copy(e),AK=AL.ceil;if(AK!==Infinity){AL.comp=m.getNormalizedValue(AK,e.ttp,u.minValue(),u.maxValue());}else{AL.comp=1;}o.push(AL);});o.sort(function(AK,e){return AK.comp-e.comp;});o.forEach(function(e){AI.push(e.comp);if(f){n.push(e.rtxt);}else{n.push(e.fmt.bc);}});AG.set("selectedIndex",f?a.IMAGE_BASED:a.COLOR_BASED);if(f){AH=m.getImageSetName(n);g.set("selectedIndex",O.find(B,"v",AH));}else{AH=m.getColorScheme(n);if(AH==="custom"){this.switchToCustomScheme(AI,n);u.unselectAll();u.update();}else{AC.set("items",M);AC.set("selectedIndex",O.find(M,"v",AH));}}u.set("baseColor",AH);u.setColorComp(AH,AI);if(m.isMapReversed(AH,n,f)){u.reverseMapColor();}if(x){var k=h[0].expr,v=k.m||k.nds[0].m;AA.set("selectedIndex",O.find(AE.mx,"did",(v&&v.did)||m.metricId));}var AF;try{AF=h[0].expr.nds[0].dmy.uts[0].utgt.did;}catch(AD){}z.set("selectedIndex",Math.max(0,O.find(z.items,"did",AF)));}}else{var AB=AJ.visName,j;AG.set("selectedIndex",a.COLOR_BASED);AC.set("items",M);if(AB===undefined){AC.set("selectedIndex",G.TRAFFIC_LIGHTS);}else{if(AB===R.HEAT_MAP){AC.set("selectedIndex",G.TRAFFIC_LIGHTS);}else{if(AB===R.NETWORK){AC.set("selectedIndex",G.BUSINESS_BLUE);}else{if(AB===R.ESRI_MAP||AB===R.GOOGLE_MAP||AB===R.MAPBOX){AC.set("selectedIndex",G.MARINE_BLUE);}else{j=parseInt(U.walk("dz.visProp.fmt.visType",AJ));switch(j){case D.GRAPHMATRIXVERTICALLINECLUSTERED:case D.GRAPHMATRIXVERTICALLINESTACKED:case D.GRAPHMATRIXVERTICALLINEPERCENT:case D.GRAPHMATRIXVERTICALLINEAUTOMATIC:case D.GRAPHMATRIXHORIZONTALLINECLUSTERED:case D.GRAPHMATRIXHORIZONTALLINESTACKED:case D.GRAPHMATRIXHORIZONTALLINEPERCENT:case D.GRAPHMATRIXHORIZONTALLINEAUTOMATIC:case D.GRAPHMATRIXVERTICALAREACLUSTERED:case D.GRAPHMATRIXVERTICALAREASTACKED:case D.GRAPHMATRIXVERTICALAREAPERCENT:case D.GRAPHMATRIXVERTICALAREAAUTOMATIC:case D.GRAPHMATRIXHORIZONTALAREACLUSTERED:case D.GRAPHMATRIXHORIZONTALAREASTACKED:case D.GRAPHMATRIXHORIZONTALAREAPERCENT:case D.GRAPHMATRIXHORIZONTALAREAAUTOMATIC:AC.set("selectedIndex",G.TRAFFIC_LIGHTS);break;case D.GRAPHMATRIXBUBBLECIRCLEMM:case D.GRAPHMATRIXBUBBLEGRIDCIRCLEAA:case D.GRAPHMATRIXBUBBLEGRIDSQUAREAA:case D.GRAPHMATRIXBUBBLESQUAREAM:case D.GRAPHMATRIXBUBBLESQUAREMM:AC.set("selectedIndex",G.MARINE_BLUE);break;default:AC.set("selectedIndex",G.BUSINESS_BLUE);break;}}}}}u.update();if(x){AA.set("selectedIndex",O.find(AE.mx,"did",q||m.metricId));}z.set("selectedIndex",0);}}function S(e){this.parent.colorSlider.set("baseColor",e);this.selectedColor=e;}function T(){return V("",function(){this.parent.parent.colorSlider.reverseMapColor(this.checked);},false,{cssClass:"reverse-btn"});}function N(){var e=this.model,g=this.basedOn.options,j=g.items,k=isNaN(e.getMetricsMaxValue())||isNaN(e.getMetricsMinValue()),f=(k||!this.controller.supportsFeature(H.SHOW_VALUE_ITEM))?b.slice(1):b,h=j[g.selectedIndex];if(f.length!==j.length){g.set("items",f);g.set("selectedIndex",Math.max(f.indexOf(h),0));}}mstrmojo.threshold.SimpleThresholdEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.threshold.SimpleThresholdEditor",cssClass:"mstrmojo-SimpleThresholdEditor",title:mstrmojo.desc(3647,"Thresholds"),help:"thresholds_editor.htm",model:undefined,controller:undefined,metricId:undefined,metricName:undefined,typeSelector:undefined,basedOn:undefined,breakBy:undefined,colorSlider:undefined,colorPalettes:undefined,imageSelector:undefined,showAdvancedEditorLink:undefined,init:function W(g){this._super(g);var f=mstrApp.customization.getCustomThresholds(),e=function(h){return{n:mstrmojo.desc(h.title,"N/A"),v:h.id,cls:h.id};};if(!M){M=f.color.map(function(h){return e(h);});}O.forEach(P,function(h){M.splice(h.idx,0,{n:h.n,cls:"title",v:null});});this.colorPalettes.colorPulldown.set("items",M);if(!B){B=f.image.map(function(j){var h=e(j);h.bc=j.combinedImageUrl;return h;});this.imageSelector.imagePulldown.set("items",B);}},onOpen:function E(){var e=this.controller,f=this.model,k=this.basedOn,h=k.options,l=k.metricsList,g=this.metricId,j=f.data.gsi;this.colorSlider.resetColorMap();if(this.colorSlider.editableBubble){this.colorSlider.editableBubble.hideBubble();}c.toggleClass(this.containerNode,"hideImage",!e.supportsFeature(H.SHOW_IMAGE));if(e.supportsFeature(H.SHOW_BASED_ON)){c.addClass(h.domNode,"right-pulldown");l.set("items",j.mx);l.set("visible",true);}else{l.set("visible",false);c.removeClass(h.domNode,"right-pulldown");}this.breakBy.breakByList.set("items",[{n:mstrmojo.desc(2057,"None"),did:-1}].concat(this.targets.filter(function(m){return m.t===12;})));this.showAdvancedEditorLink.set("visible",e.supportsFeature(H.SHOW_ADVANCED_EDITOR));L.call(this,g);this.colorSlider.updateLabels();this.domNode.oncontextmenu=function(){if(mstrApp.isSingleTier){return false;}};},onClose:function C(){this.model.cleanUp();},switchToCustomScheme:function J(n,g){var h="custom",l=this.colorSlider,k=this.colorPalettes.colorPulldown,j=k.items,e=j.map(function(o){return o.v;}).indexOf(h)!==-1;n=n||l.getComp().concat();if(!g){var f=l.getPalette().concat();g=l.getReversedValue()?f.reverse():f;}l.addCustomScheme(n,g);if(!e){var m=U.clone(j);m.unshift({n:mstrmojo.desc(2056,"Custom"),v:h});k.set("items",m);}k.set("selectedIndex",O.find(k.items,"v",h));},children:[{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"typeSelector",typeCheckList:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12112,"Thresholds Type:")},{scriptClass:"mstrmojo.ui.CheckList",alias:"typeCheckList",multiSelect:false,orientation:"h",postselectionChange:function K(r){var m=this.parent.parent,k=m.model,n=m.colorSlider,g=m.colorPalettes,j=g.colorPulldown,p=m.imageSelector,h=p.imagePulldown,f=j.items[j.selectedIndex],e=B[h.selectedIndex],q=r.added[0],l=q?e:f,o=q?k.getDefaultImages()[0].id:k.getDefaultColors()[0].id;g.set("visible",!q);p.set("visible",!!q);n.set("sliderMode",q);n.set("baseColor",(l&&l.v)||o);n.editableBubble.set("visible",false);if(q===a.IMAGE_BASED&&!h.selectedIndex){h.set("selectedIndex",0);}},selectedIndex:0,items:[{n:mstrmojo.desc(12113,"Color-based"),v:"color",cls:"color"},{n:mstrmojo.desc(12114,"Image-based"),v:"image",cls:"image"}]}]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"colorPalettes",selectedColor:undefined,colorPulldown:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2060,"Color:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"color-pulldown",alias:"colorPulldown",onitemSelected:function I(f){S.call(this.parent,f.v);for(var e=0;e<=Q;e++){c.removeClass(this.selectedNode,["C"+e]);}if(f.cls){c.addClass(this.selectedNode,f.cls);}},getPopupListConfig:function Y(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,useRichTooltip:true,showTooltipForLargeText:true,scrollNodeMaxHeight:this.scrollNodeMaxHeight,getItemMarkup:function g(j,h){if(j.cls==="title"){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';}return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}"><div class="text">{@en@n}</div></{@tag}>';},listHooks:{select:function e(j,k,h){this.parent.set("selectedIndex",h);if(this.visible&&this.closeAfterSelection){this.close();}}},getItemProps:function f(k,h){var j=mstrmojo._IsList.getItemProps.call(this,k,h);j.style=this.parent.itemCssText||"";return j;}};},selectedIndex:1,items:M},T()]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"imageSelector",visible:false,selectedColor:undefined,imagePulldown:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(6369,"Images:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"image-pulldown",alias:"imagePulldown",onitemSelected:function I(e){S.call(this.parent,e.v);},getPopupListConfig:function Y(){var e=mstrmojo.ui.Pulldown.prototype.getPopupListConfig.call(this);e.getItemMarkup=function g(){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}"><div class="bc" style="{@bc}"></div><div class="text">{@n}</div></{@tag}>';};e.getItemProps=function f(k,h){var j=mstrmojo._IsList.getItemProps.call(this,k,h);j.bc="background:url("+k.bc+");background-size: contain;background-repeat: no-repeat;";return j;};return e;},items:B},T()]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"basedOn",value:"",metricsList:undefined,options:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4402,"Based on:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"left-pulldown",alias:"metricsList",onitemSelected:function I(h){var g=this.parent,e=g.parent,f=h.did;g.selectedMetric=e.model.basedOnId=f;e.colorSlider.resetMinMax();e.colorSlider.update();e.colorSlider.updateLabels();N.call(e);}},{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:3,cssClass:"right-pulldown option",alias:"options",onitemSelected:function I(g){var k=this.parent,f=k.parent,j=f.breakBy,h=g.v,e=h===7;k.value=h;f.colorSlider.set("selectedOption",g.v);j.set("visible",!e);if(e){j.breakByList.set("selectedIndex",0);}},items:b}]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"breakBy",breakByList:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4564,"Break By:")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"breakByList"}]},{scriptClass:"mstrmojo.threshold.ColorSlider",alias:"colorSlider"},{scriptClass:"mstrmojo.Label",cssClass:"link",alias:"showAdvancedEditorLink",slot:"buttonNode",text:mstrmojo.desc(4569,"Advanced Thresholds Editor..."),onclick:function d(){var g=this.parent,f=g.breakBy.breakByList,e=f.items[f.selectedIndex].did!==-1,h=function(){g.colorSlider.unselectAll();g.close();g.model.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.ADVANCED_EDITOR;};mstrmojo.warn(e?mstrmojo.desc(14160,"Save thresholds definition before proceeding to the Advanced Thresholds Editor? The Break By attribute will be lost."):mstrmojo.desc(14159,"Save thresholds definition before proceeding to the Advanced Thresholds Editor?"),undefined,{cssClass:"save-threshold-warning",buttons:[V(mstrmojo.desc(2827,"Clear"),function(){h();g.controller.openEditor();},false,{cssClass:"nosave"}),V(mstrmojo.desc(2223,"Cancel")),V(mstrmojo.desc(2031,"Apply"),function(){h();f.set("selectedIndex",0);X.call(g,true);},true)]});}},{scriptClass:"mstrmojo.Box",cssClass:"editor-buttons",slot:"buttonNode",children:[V(mstrmojo.desc(221,"Cancel"),function d(){var e=this.parent.parent;e.colorSlider.unselectAll();e.close();}),V(mstrmojo.desc(1442,"OK"),function d(){var e=this.parent.parent;X.call(e);e.colorSlider.unselectAll();e.close();},true),V(mstrmojo.desc(2031,"Apply"),function d(){var e=this.parent.parent;X.call(e,true);e.colorSlider.unselectAll();},true)]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.array","mstrmojo.vi.ui.theme","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui.VIDragUnit","mstrmojo.hash");var G=mstrmojo.css,E=mstrmojo.dom,B=mstrmojo.vi.ui.theme,F=mstrmojo.array,C=mstrmojo.hash;function D(P,Q,O){var N=false;F.forEach(this.getSelectedItems(),function(R){if(R.itemNode===Q||R===P){N=true;}});if(P&&!N){this.doItemSelect(P,O||{});}}var M={avatarCssClass:"mstrmojo-VIUnitList",encodeUnitAvatar:true,getDragData:function L(N){var O=N.src.node,Q=E.findAncestorByAttr(O,"idx",true,this.domNode);N.src.node=Q?Q.node:O;var P=(N.dragUnitHelper=new mstrmojo.vi.ui.VIDragUnit()).getUnitDragData(N,this.getSelectedItems());if(this.getItemDisplayName){mstrmojo.func.override({getItemDisplayName:this.getItemDisplayName},N.dragUnitHelper);}P.srcId=this.id;return P;},createAvatar:function A(O,N){if(N.dragUnitHelper){return N.dragUnitHelper.getUnitAvatar(N,this.encodeUnitAvatar);}},selectDragNode:function K(N){var O=N.src;D.call(this,this.getItemFromTarget(O.node),this.getItemNodeFromTarget(O.node),O);},onItemContextMenu:function J(O,N){D.call(this,O,this.getItemNodeFromTarget(N.getTarget()),N);if(this._super){return this._super(O,N);}},positionAvatar:function H(O,N){N.dragOffsets=N.dragUnitHelper.getDragUnitOffsets();if(this._super){this._super(O,N);}}},I=C.copy(M);I._mixinName="mstrmojo.vi.ui._HasUnitListAvatar2";I.getDragData=function(N){if(this.isDraggingItem&&!this.isDraggingItem(N)){if(this._super){return this._super(N);}}else{return M.getDragData.call(this,N);}};mstrmojo.vi.ui._HasUnitListAvatar2=mstrmojo.provide("mstrmojo.vi.ui._HasUnitListAvatar2",I);mstrmojo.vi.ui._HasUnitListAvatar=mstrmojo.provide("mstrmojo.vi.ui._HasUnitListAvatar",mstrmojo.mixin(M,mstrmojo.mixin(mstrmojo._HasOwnAvatar)));}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.array","mstrmojo.vi.models.editors.ControlsViewFactory","mstrmojo.Label","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.vi.ui.editors.MoreOptionsEditor");var J=mstrmojo.hash,H=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,Q="mstrmojo-more-options-editor",F="mstrmojo-more-options-editor-visfilter";mstrmojo.vi.models.editors.EditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.ControlsViewFactory,null,{scriptClass:"mstrmojo.vi.models.editors.EditorModel",hostId:"",help:"",getHost:function C(){return mstrmojo.all[this.hostId];},docModel:null,getEditorContents:mstrmojo.emptyFn,getGroupTitle:function D(S){return new mstrmojo.Label({cssClass:"edt-title",text:S});},getShowTitleCheckbox:function K(){var S=this.getHost();return this.getCheckboxAndLabel(S.parent.getTitleBarVisibility(),mstrmojo.desc(13599,"Show titlebar"),function(T){S.parent.toggleTitleBar(!!T);});},getTextAlign:function G(U,V,T){var S=new mstrmojo.vi.ui.TextAlignButtonBar(!T?null:{itemsValueMap:T});S.singleSelect(mstrmojo.array.find(S.items,"id",U));S.onValueChange=V;return S;},getWrapText:function P(T,S){return this.getCheckboxAndLabel(T,mstrmojo.desc(13577,"Wrap text"),S);},getTextDirection:function E(T,U){var S=0;if(T){S=T===3?1:2;}return this.getLabelAndControl(mstrmojo.desc(11914,"Direction:"),this.getPulldown([{n:mstrmojo.desc(2066,"Horizontal"),v:0},{n:mstrmojo.desc(5155,"90 degrees"),v:90},{n:mstrmojo.desc(5156,"-90 degrees"),v:-90}],U,S));},getOverflow:function L(T,S){return this.getLabelAndControl(mstrmojo.desc(11915,"Overflow:"),this.getPulldown([{n:mstrmojo.desc(2974,"Clip"),v:false},{n:mstrmojo.desc(2976,"Scroll"),v:true}],S,T?1:0));},getChangeFormatPropertyFn:function A(S,T){var U=this.id;return function(X,V){var W=mstrmojo.all[U];W.docModel.changeUnitFormatProperty(W.getHost().parent,[{formatType:T||1,propertyName:S,newValue:X,oldValue:V}]);};},getChangeGroupPropertyFn:function R(S){var T=this.id;return function(U,W,V){(mstrmojo.all[T].getChangeFormatPropertyFn(U,S))(W,V);};},getCharacterGroup:function B(V,S,T){var W={onGroupValueChange:V};if(T){W.visibleControls=T;}var U=new mstrmojo.ui.editors.controls.CharacterGroup(W);U.setFormatSource(S);return U;},getContainerGroup:function O(S,V,T,U){var W=new mstrmojo.ui.editors.controls.ContainerGroup(J.copy(U,{onGroupValueChange:V||this.getChangeGroupPropertyFn(),visibleControls:T||(H.FILL_COLOR+H.BORDER)}));W.setFormatSource(S);return W;},getMoreOptionsEditorLink:function M(T,S,U){return new mstrmojo.Label({text:mstrmojo.desc(9126,"More options"),cssClass:"edt-link",onclick:function(){this.openMoreOptionsEditor(T,S,U);}.bind(this)});},openMoreOptionsEditor:function N(W,S,X){var V=this.getHost(),U;var T=function(a,Y,e,Z){var b=this.host,c=b.controller,d=[];if(!J.isEmpty(a)){e=mstrmojo.func.wrapMethods(c._getXtabCallback(b),e);d=[c.dataService().getUpdateTemplateAction(b.k,[b.model.getAdvancedPropertiesAction(a)])];}d=d.concat(Y||[]);if(!J.isEmpty(d)){c.submitUndoRedoUpdates(d,null,e,Z);}};if(mstrApp.isInVFConfigMode){U=mstrmojo.all[F]||new mstrmojo.vi.ui.editors.MoreOptionsEditor({id:F,submitAction:T});}else{U=mstrmojo.all[Q]||new mstrmojo.vi.ui.editors.MoreOptionsEditor({id:Q,submitAction:T});}U.set("data",W);U.set("showHeadersSection",!!S);U.set("showSelectionLimitSection",!!V.GMController);U.set("lockHeadersCase",X);U.set("host",V);U.open();return U;},replaceChildControls:function I(U,T){var S=[].concat(U.children||[]);U.removeChildren();S.forEach(function(V){V.destroy();});U.addChildren(T);U.doLayout();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.Container","mstrmojo.threshold.TextGroup","mstrmojo.threshold.ThresholdRow","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.ui.editors.controls.CharacterGroup");var G=mstrmojo.Widget,F=mstrmojo.hash,D="180px";mstrmojo.threshold.PropertyPanel=mstrmojo.declare(mstrmojo.Container,[mstrmojo.threshold.PropertyPanel],{markupString:'<div class="mstrmojo-threshold-PropertyPanel"><div class="condition"></div><div class="format mstrmojo-vi-PropEditor"><div class="text"><div class="title">'+mstrmojo.desc(5998,"Replace Data")+'</div></div><div class="font mstrmojo-vi-EditorGroup"><div class="title">'+mstrmojo.desc(3433,"Font")+'</div></div><div class="border"><div class="title">'+mstrmojo.desc(5616,"Color And Borders")+'</div></div></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.children[1].firstChild;},fontNode:function(){return this.domNode.children[1].children[1];},borderNode:function(){return this.domNode.children[1].children[2];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:G.visibleMarkupMethod,onheightChange:G.heightMarkupMethod,onwidthChange:G.widthMarkupMethod},model:undefined,editor:undefined,textGroup:undefined,charGroup:undefined,containerGroup:undefined,onvisibleChange:function A(){if(this.visible){var J=this.model;J.updateControl(this);var H=F.clone(J.threshold),I=this.thresholdRow;if(I){this.removeChildren(I);}this.addChildren({scriptClass:"mstrmojo.threshold.ThresholdRow",alias:"thresholdRow",slot:"conditionNode",idx:J.thresholdRow.idx,model:this.editor.model,threshold:H,onclick:mstrmojo.emptyFn});this.refresh();}},onOK:function B(){this.model.submitChange();this.close();},close:function E(){var H=this.thresholdRow;if(H){this.removeChildren(H);}this.set("visible",false);this.editor.toggleButtonStatus(true);this.editor.setRowPanelVisibility(true);},children:[{scriptClass:"mstrmojo.threshold.TextGroup",slot:"textNode",alias:"textGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("threshold",H,I);}},{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",slot:"fontNode",alias:"charGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("fmt",H,I);}},{scriptClass:"mstrmojo.ui.editors.controls.ContainerGroup",slot:"borderNode",alias:"containerGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("fmt",H,I);}},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",onclick:function(){var H=this.parent;if(H.close){H.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",onclick:function(){var H=this.parent;if(H.onOK){H.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:mstrmojo.desc(14000,"Press ## after finishing formatting.").replace("##",'""')}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._HasSuggestion","mstrmojo.Enum_Keys","mstrmojo.css","mstrmojo.VisUtility","mstrmojo.hash","mstrmojo.dom");var K=mstrmojo.dom,E=mstrmojo.css,R="srchBoxState",C=mstrmojo.Enum_Keys,S=mstrmojo.VisUtility,M=200,f,H=24,Q={fontFamily:"Arial",fontSize:"11px"};var d={2147762262:mstrmojo.desc(16256,"Please enter a numeric value"),2147762227:mstrmojo.desc(16257,"Unable to perform search with the operators provided")};var P={DEFAULT:1,ADDING:2,EMPTY:3,FULL:4};var k="mstrmojo-SimpleObjectInputBox-del";function F(){var p=this.inputBox,q=p&&p.value;if(q!==""&&(q!==this._lastPattern||!this.suggestionShown)){this.showSuggestion(q);this._isSearching=true;if(this.hitEnterToTest){this.inputBox.blur();}}this._lastPattern=q;delete this._timerHandle;}function D(){var p=this._timerHandle;if(p){window.clearTimeout(p);delete this._timerHandle;}}function A(){if(this.richTooltip){if(this.tooltip){this.tooltip.set("allowOtherTooltips",false);}this.hideTooltip();}}function a(p){var r=this._inputPos,q=!mstrApp.isAppStatePresentation||mstrApp.isAppStatePresentation(),t=this,u;if(this.richTooltip){u=this.richTooltip;if(!this.hasOpenTooltip&&!this.suggestionShown){u.top=(r.h+r.y)+"px";u.left=r.x+"px";if(!this.hitEnterToTest&&!q){window.setTimeout(function(){var x=t.tooltip,w=x&&x.contentNode,z,v;z=w?w.childNodes:null;if(z&&z.length>1){v=z[1];z=v.childNodes;if(z&&z.length>1){v=z[1];}else{v=null;}}if(t.hasOpenTooltip&&v&&!E.hasClass(w,"lng")){if(u.onclick){t.tooltip.onclick=u.onclick;K.attachMarkupEvent(t.tooltip.id,v,"click");}E.addClass(w,"lng");}},3000);}this.showTooltip(p.e,p.hWin);this.set("allowOtherTooltips",!this.hitEnterToTest);}}}function G(){if(window.mstrLocalStorage===undefined){return{};}var p=(mstrLocalStorage.getLocalStorage()||{})[R];return(p&&JSON.parse(p))||{};}function X(p){if(window.mstrLocalStorage!==undefined){mstrLocalStorage.setItem(R,JSON.stringify(p));}}mstrmojo.SimpleObjectInputBox=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo._HasSuggestion,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.SimpleObjectInputBox",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-SimpleObjectInputBox {@cssClass}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-SimpleObjectInputBox-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}<input type="text" mstrAttach:keydown,keyup,blur,focus style="display: none;" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" /><div class="mstrmojo-SimpleObjectInputBox-empty"><div>{@emptyText}</div></div></div></div>',markupSlots:{itemsContainerNode:function(){return this.domNode.firstChild;},emptyTextNode:function(){return this.domNode.firstChild.lastChild;},inputBox:function(){var p=this.domNode.firstChild.children;return p[p.length-2];},scrollboxNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onmaxItemWidthChange:function c(){var p=this.maxItemWidth;if(!isNaN(p)&&p>0){this.emptyTextNode.style.maxWidth=p+"px";}}},itemField:"n",emptyText:"",state:0,maxItemWidth:"none",useKeyDelay:false,hitEnterToTest:false,maxObjectCount:null,useRichTooltip:true,init:function l(p){this._super(p);if(mstrApp.isWorkstation){Q.fontFamily="Helvetica";}},showTooltip:function o(q,u){var t=q.target||K.eventTarget(q.hWin,q.e),r=this.getItemFromTarget(t);if(r&&r.n){var v=this.getItemNodeFromTarget(t).firstChild,p=K.position(v);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPCENTER,cssClass:"vi-regular vi-tooltip-A A-center",refNode:v,content:mstrmojo.string.encodeHtmlString(r.n),top:p.h+11,left:p.w/2};this._super(q,u);}},getItemMarkup:function(p){if(!f){var q=this.itemField;f=this._super(p).replace(">{@en@n}<",'"><div class="elem">{@en@'+q+'}<div class="'+k+'"></div></div><');}return f;},getItemProps:function b(u,p){var r=this._super(u,p),v=this.itemField;var t=this.maxItemWidth;if(!isNaN(t)&&t>0){t=(t-H);}if(!mstrmojo.string.isEmpty(u[v])){var q=u[v];r[v]=q;if(t<S.measureTextWidth(q,Q)){r.title=q;}}r.addStyle("max-width:"+t+"px");return r;},getSuggestionPos:function T(){var p=this._inputPos;return{target:this.inputBox,left:p.x+"px",top:p.y+p.h+"px",zIndex:100};},updateSuggestion:function Y(p){var q=G();if(!q.srch){if(this._super){this._super(p);}}this.inputBox.focus();A.call(this);},failMessage:function B(q){var r=d[q.errCode]||q.msg,p=r?[{n:r,t:-101,cls:"nomatch"}]:[];this.updateSuggestion(p);},getSearchPattern:function N(){return this.inputBox?this.inputBox.value:"";},showInfoTooltip:function W(t){var u=G(),p=this.parent.parent,v=K.position(p.domNode),q=this.richTooltip,r=this;if(!u.hasShownInfo&&!mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO){mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO=true;u.hasShownInfo=true;this.set("richTooltip",{posType:mstrmojo.tooltip.POS_BOTTOMCENTER,cssClass:"vi-regular vi-tooltip-V vi-tooltip-leftcenter",contentNodeCssClass:"srch info",top:v.y+"px",left:v.x+v.w+8+"px",content:mstrmojo.desc(15909,'You can re-enable "Instant Search" from the menu.'),onClose:function(){r.set("richTooltip",q);}});this.showTooltip(window.event,window);if(this.tooltip){this.tooltip.set("allowOtherTooltips",false);}else{this.set("allowOtherTooltips",false);}}u.srch=t;X(u);},onIncrementalFetch:function J(){this.inputBox.blur();},onSuggestionItemSelect:function h(p){D.call(this);this.set("items",this.items.concat(p));this._super();var q=this.id;window.setTimeout(function(){var r=mstrmojo.all[q];if(parseInt(r.state,10)!==P.FULL){r.set("state",P.ADDING);}},0);},onstateChange:function V(q){var r=q.value;this.emptyTextNode.style.display=(r===P.ADDING)?"none":"block";var p=this.inputBox,t=p.style;if(r===P.ADDING){t.display="";this.updateScrollbars();p.focus();this._inputPos=K.position(p,true);}else{D.call(this);t.display="none";p.value="";this._lastPattern="";this.updateScrollbars();if(this.parent.getFormats&&!this.parent.getFormats().height&&this.parent.parent.performCanGrowCanShrink){this.parent.parent.performCanGrowCanShrink(this.parent.parent.children);}}},postBuildRendering:function O(){var p,q=G();M=(mstrApp.getSearchAutoCompleteDelay&&mstrApp.getSearchAutoCompleteDelay())||M;this.state=0;this.setDefaultState();if(q.srch){this.inputBox.value=q.srch;this.set("state",P.ADDING);delete q.srch;X(q);}p=this._super();return p;},preitemsChange:function L(){this.setDefaultState();},onclick:function e(q){var u=K.eventTarget(q.hWin,q.e);if(u&&u.className===k){var t=K.findAncestorByAttr(u,"idx",true,this.domNode),p=t&&parseInt(t.value,10);this.hideTooltip();if(p!==null&&!isNaN(p)){var r=this.items.concat();r.splice(p,1);this.set("items",r);}return ;}if(parseInt(this.state,10)!==P.FULL){this.set("state",P.ADDING);}},onblur:function U(){if(this._isSearching||this.tooltip){return ;}D.call(this);A.call(this);if(!this.suggestionShown){this.setDefaultState();}},onfocus:function j(){this._isSearching=false;if(this.suggestionShown){A.call(this);}},prekeydown:function I(q){var u=q.e;switch(parseInt(u.keyCode||u.charCode,10)){case C.DOWN_ARROW:this.nextHighlight();break;case C.UP_ARROW:this.preHighlight();break;case C.TAB:case C.ENTER:K.preventDefault(q.hWin,u);if(this.suggestionShown){var t=this.getSelected();if(t){this.handleSuggestionItemSelect(t);}else{this.hideSuggestion();}}else{if(this.hitEnterToTest){A.call(this);F.call(this);}}break;case C.ESCAPE:D.call(this);if(this.suggestionShown){this.hideSuggestion();}else{this.setDefaultState();}break;case C.BACKSPACE:if(!this.getSearchPattern()&&!mstrApp.hasRequests()){K.preventDefault(q.hWin,u);var r=this.items&&this.items.concat();if(r&&r.length){r.splice(r.length-1,1);mstrApp.ignoreBackSpace=true;this.set("items",r);var w=this.id;window.setTimeout(function(){mstrmojo.all[w].set("state",P.ADDING);mstrApp.ignoreBackSpace=false;},0);}}break;}var p=this.richTooltip,v=(p&&p.contentNodeCssClass)||"";if(v.indexOf("srch info")>-1){A.call(this);}},prekeyup:function n(p){var t=p.e,q=parseInt(t.keyCode||t.charCode,10),r=this.getSearchPattern();if(!r||r!==this._lastPattern){K.preventDefault(p.hWin,p.e);this.hideSuggestion();}if(this.inputBox.value.length&&q!==C.ENTER&&q!==C.TAB&&!this.suggestionShown){a.call(this,p);}else{A.call(this);}if(this.hitEnterToTest){return ;}if(this.useKeyDelay){var u=this.id;if(!this._timerHandle){this._timerHandle=window.setTimeout(function(){F.call(mstrmojo.all[u]);},M);}}else{F.call(this);}},widgetResized:function m(){if(this.hasRendered){var t=parseInt(this.width,10),v=this.items.length,w=this.itemsContainerNode.childNodes;if(v<=(w&&w.length)){var u=t-H;for(var r=0;r<v;r++){var p=w[r],q=p.textContent;p.style.maxWidth=u+"px";if(q&&u<S.measureTextWidth(q,Q)){p.title=q;}else{p.title="";}}}if(this.emptyTextNode){this.emptyTextNode.style.maxWidth=t+"px";}this.updateScrollbars();}},setupScrollNodes:function g(){this.scrollNode=this.scrollboxNode;},setDefaultState:function Z(){var r=this.maxObjectCount,p=(this.items&&this.items.length)||0,q=(r!==null&&r!==undefined&&p>=r);this.set("state",!p?P.EMPTY:(q?P.FULL:P.DEFAULT));}});mstrmojo.SimpleObjectInputBox.HAS_SHOWN_INFO=false;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.Model","mstrmojo.Container","mstrmojo._HasSuggestion","mstrmojo._IsWebApp","mstrmojo.mstr.search.SearchSettings","mstrmojo.mstr.search.SearchResults");var J=mstrmojo.desc,C=mstrmojo.css,f=mstrmojo.array,p=mstrmojo.string;var e=[16,1,2,4,8],a=e,G=[1,2,4,8],d=[3,8,14081],V=-1;var I={suggest:function(v){return{success:function(z){if(!mstrmojo.all.search){return ;}if(!v.hasSearchPattern){v.clear();v.hideSuggestion();return ;}v.sItems=z.items||[];var x,w=v.sItems.length;for(x=0;x<w;x++){v.sItems[x].t=V;}if(w){v.selectedSuggestionIndex=null;}else{v.hideSuggestion();}var AA=z.items&&z.items[0]&&z.items[0].n.toLowerCase();if(AA){v.suggestInputNode.value=AA.replace(new RegExp("^"+p.regEscape(v.searchPattern),"i"),v.inputNode.value);v.syncInputWithSuggest();}else{AA=v.searchPattern;}v.suggest=AA;if(v.last_searchPattern!==AA){v.last_searchPattern=AA;window.setTimeout(function(){v.requestResults();},0);}},failure:function(w){mstrmojo.alert(w.status+" : "+w.statusText);},complete:function(w){v.showSpinnerIcon(false);v.handleSearchErrorAndModeSwitching(w);}};},search:function(v){return{success:function(x){if(!mstrmojo.all.search){return ;}var w;for(w in v){this[w]=v[w];}if(!v.hasSearchPattern&&!v.allowEmptyInput){v.clear();v.hideSuggestion();return ;}if(!x){mstrmojo.xhr.abort();v.requestResults();return ;}v.rItems=x.items||[{t:0,dssid:"",n:mstrmojo.desc(9135,"No match found")}];if(v.showAsPopup){v.renderResultsPopup(v.rItems);}else{v.renderResults(x||{});}},failure:function(w){mstrmojo.alert(w.status+" : "+w.statusText);},complete:function(w){v.showSpinnerIcon(false);v.handleSearchErrorAndModeSwitching(w);}};}};var N=function(w){var v=mstrApp.adminInfo;return w.replace("#",(v&&v.length>0?" ("+v+")":""));};var u=function(){if(mstrmojo.dom.isDXIE||mstrmojo.dom.isSafari){var v=this.inputNode;window.setTimeout(function(){v.focus();},10);}};mstrmojo.mstr.search.Search=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasSuggestion,mstrmojo._IsWebApp],{scriptClass:"mstrmojo.mstr.search.Search",noCache:true,suggestionPopupCssClss:"mstrmojo-Search-suggestion",resultsOnly:false,allowEmptyInput:false,showAsPopup:true,allowHTMLOnObjectDesc:false,searchDelay:200,doAutoComplete:true,minSearchLength:1,supportIncFetch:true,searchTootipText:mstrmojo.desc(9168,"Type to search"),enableSuggestion:true,hasSearchPattern:false,searchProps:null,quickSearch:false,includeObjectDesc:true,blockBegin:1,blockCount:10,rootFolderType:39,rootFolderID:null,nameWildcards:16,recursive:1,objectType:[3,8,14081],fields:"name",dereferenceshortcut:"1",dateType:1,created:0,dateSubType:1,intervalUnit:1,intervalValue:1,startDate:"",endDate:"",ownerType:1,description:"",maxObjects:100,searchDomain:2,styleName:"MojoFolderStyle",clearVisible:false,spinnerVisible:false,markupString:'<div class="mstrmojo-Search {@cssClass}" style="{@cssText}"><div class="mstrmojo-Search-settings1"></div><div class="mstrmojo-Search-container"><div class="mstrmojo-Search-input" style="position: relative"  mstrAttach:mousedown><div class="mstrmojo-Search-search" style="position: relative"><input class="searchPattern" maxlength="100" autocomplete="off" {@autofocus}                                   placeholder="{@searchTootipText}"mstrAttach:mousedown,keyup,keydown,blur,paste,cut,input /><div class="SearchBox-tip" n="searchTip"></div></div><div class="mstrmojo-Search-suggest" style="background: none transparent;"><input class="suggestPattern" maxlength="100" autocomplete="off" disabled="disabled" data-act="suggest"/></div></div><div class="mstrmojo-Search-btns" mstrAttach:click><div class="mstrmojo-Search-btnClear" data-act="clear"></div><div class="mstrmojo-Search-btnSpinner" data-act="spinner"></div><div class="mstrmojo-Search-btnSearch" data-act="search"></div></div></div><div class="mstrmojo-Search-btnSettings" data-act="settings" mstrAttach:click>'+mstrmojo.desc(14521,"Refineseaaa")+'</div><div class="mstrmojo-Search-infoIcon" data-act="info"></div><div class="mstrmojo-Search-settings"></div><div class="mstrmojo-Search-result"></div></div>',markupSlots:{settings1ContainerNode:function(){return this.domNode.firstChild;},suggestInputNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1].firstChild;},inputNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[0].firstChild;},searchTipNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1].childNodes[1];},btnsNode:function(){return this.domNode.childNodes[1].childNodes[1];},clearNode:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[0];},spinnerNode:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[1];},searchNode:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[2];},settingsBtnNode:function(){return this.domNode.childNodes[2].childNodes[2];},infoIconNode:function(){return this.domNode.childNodes[3];},settingsContainerNode:function(){return this.domNode.childNodes[4];},resultsContainerNode:function(){return this.domNode.childNodes[5];}},markupMethods:{onclearVisibleChange:function(){C.toggleClass(this.btnsNode,"clear",this.clearVisible);},onspinnerVisibleChange:function(){C.toggleClass(this.btnsNode,"spinner",this.spinnerVisible);C.toggleClass(this.domNode,"searching",this.spinnerVisible);}},init:function o(w){var x=this;this.autofocus=mstrmojo.dom.isSafari?"":"autofocus";if(this._super){this._super(w);}if(this.resultsOnly){C.addWidgetCssClass(this,"resultsOnly");}this.updateQuickSearchEnabled();mstrmojo.hash.copy(w.searchProps,this);this.objectType=f.filter(this.objectType,function(z){return f.find(x.allowedObjectTypesData,"t",parseInt(z,10))>-1;});this.maxObjects=parseInt(this.maxSearchResults||this.blockCount,10);var v=new Date();this.endDate=mstrmojo.date.formatDateInfo({day:v.getDate(),month:parseInt(v.getMonth(),10)+1,year:v.getFullYear()},mstrmojo.locales.datetime.DATEOUTPUTFORMAT);this.nameWildcards=(this.pqse?16:1);if(this.rootFolderID){this.rootFolderType=0;}else{this.rootFolderType=(parseInt(this.rootFolderType,10)>=0?this.rootFolderType:39);}this.updateQuickSearchEnabled();},preBuildRendering:function A(){var v=this;this.addChildren([mstrmojo.mstr.search.SearchSettings.getLocationPulldown({rootFolderName:this.rootFolderName,rootFolderType:this.rootFolderType,slot:"settings1ContainerNode"}),mstrmojo.mstr.search.SearchSettings.getSearchTypePulldown({className:"searchType",qse:this.qse,slot:"settings1ContainerNode"}),{scriptClass:"mstrmojo.mstr.search.SearchSettings",alias:"settingsWidget",allowedObjectTypesData:this.allowedObjectTypesData,model:new mstrmojo.Model({settings:{rootFolderType:this.rootFolderType,rootFolderID:this.rootFolderID,nameWildcards:this.nameWildcards,objectType:this.objectType,dereferenceshortcut:this.dereferenceshortcut,dateType:this.dateType,created:this.created,dateSubType:this.dateSubType,intervalUnit:this.intervalUnit,intervalValue:this.intervalValue,startDate:this.startDate,endDate:this.endDate,ownerType:this.ownerType,description:this.description}}),onmodelChange:function(){mstrmojo.hash.copy(this.model.settings,v);v.blockBegin=1;v.hasSearchPattern=((v.value&&(v.value.length>0))||(v.description&&(v.description.length>0)));v.delayedRequestResults();},slot:"settingsContainerNode"}]);if(this._super){this._super();}},postBuildRendering:function T(){if(this._super){this._super();}this.showSearchInfoIcon();if(this.showInfoIcon){this.addChildren([{scriptClass:"mstrmojo.Label",cssDisplay:"inline-block",bindings:{visible:function(){return this.showInfoIcon||true;}},useRichTooltip:true,richTooltip:{posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"mstrmojo-Search-infoIcon-tip",keepArrowXPos:true,refNode:this.infoIconNode,content:N(mstrmojo.desc(9264))},slot:"infoIconNode"}]);this.renderChildren();}u.call(this);if(this.searchPattern){this.inputNode.value=this.searchPattern;}},getSearchPattern:function O(){if(this.inputNode){this.searchPattern=mstrmojo.string.trim(this.inputNode.value);}else{this.searchPattern=null;}return this.searchPattern;},getRootFolderName:function q(){var v={0:this.rootFolderName,7:J(2,"Shared Reports"),20:J(3,"My Reports"),39:mstrConfig.projectName};return v[this.rootFolderType||39];},getNotFoundMsg:function Z(){var v=function(x){return"<b>"+mstrmojo.string.escape4HTMLText(x)+"</b>";};var w=J(9202,"Your search for ## in ### returned no results").replace("###",v(this.getRootFolderName())).replace("##",v(this.getSearchPattern()));return w;},onmousedown:function g(){u.call(this);},onkeyup:function n(x){var AC=this;var AD=x.e;this.value=x.getTarget().value;var z=this.value;var AB=AD.keyCode;if(AB==32&&/^\s/.test(z)){this.value=z.replace(/^\s+/,"");x.cancel();return false;}AC.hasSearchPattern=((this.value&&(this.value.length>0))||(this.description&&(this.description.length>0)));if(!AC.doAutoComplete){if(AC.hasSearchPattern){AC.showClearIcon();}AC.searchPattern=this.value;if(AD.keyCode!==13){return ;}}var w=function(AF,AG){if(AG.indexOf("?")>-1||AG.indexOf("*")>-1){return false;}var AE=false;try{if(typeof AF==="string"){AE=(new RegExp("^"+AG,"")).test(AF);}else{var AH;for(AH in AF){AE=(new RegExp("^"+AG,"i")).test(AF[AH].n);if(!AE){break;}}}}catch(AI){}return AE;};var AA=function(){var v=this.suggestInputNode.style.visibility,AF=mstrmojo.dom.position(this.inputNode),AE=(this.inputNode.scrollWidth>(AF&&AF.w))?"hidden":"visible";if(v!==AE){this.suggestInputNode.style.visibility=AE;}};AA.apply(AC);if(AB&&f.indexOf([8,13,27,37,38,39,40],AB)===-1&&w(AC.suggestInputNode.value,this.value)&&w(AC.sItems,this.value)){return ;}AC.processInput(x);AC.syncInputWithSuggest();this.set("clearVisible",this.getSearchPattern().length>0);},onkeydown:function Q(v){if(mstrmojo.dom.isIE){var w=v.e;if(w.keyCode===27){w.cancelBubble=true;return false;}}},onpaste:function t(v){var w=this;window.setTimeout(function(){w.onkeyup(v);},0);},onclick:function k(x){var v=x.hWin,z=x.e||v.event,AA=z.target||z.srcElement,w=AA&&((AA.dataset&&AA.dataset.act)||AA.getAttribute("data-act"));switch(w){case"search":this.forceSearch();break;case"clear":this.clear();break;case"settings":this.settingsWidget.set("visible",!this.settingsWidget.visible);break;}},processInput:function h(v){var z=v.e,x=z.keyCode,w=this.inputNode.value;this.searchPattern=w;this.blockBegin=1;if(!this.doAutoComplete&&x!==13){return ;}if(x===13||w.length<this.minKeyLength){if(!this.hasSearchPattern){this.clear();}this.hideSuggestion();this.forceSearch();return ;}else{switch(x){case 38:case 40:if(this.updateSelectedIndex(x)){this.delayedRequestResults();}else{if(this.tmrRR){window.clearTimeout(this.tmrRR);}}break;case 13:case 27:this.hideSuggestion();this.cancel();break;case 37:break;case 39:if(this.suggestInputNode.value&&this.inputNode.value!==this.suggestInputNode.value){this.inputNode.value=this.suggestInputNode.value;this.suggestInputNode.value="";}break;default:if(!this.enableSuggestion){return ;}this.showSpinnerIcon(true);this.suggestInputNode.value="";this.delayedRequestSuggestion(w);}}},cancel:function E(){mstrmojo.xhr.cancel();},requestSuggestion:function r(){return this.showSuggestion(this.getSearchPattern());},delayedRequestSuggestion:function r(v){if(this.tmrRS){window.clearTimeout(this.tmrRS);}if(this.tmrRR){window.clearTimeout(this.tmrRR);}var w=this;this.tmrRS=window.setTimeout(function(){w.requestSuggestion(v);},this.searchDelay);},requestResults:function K(){if(!this.hasUserInput()){return ;}if(!this.searchPattern){this.searchPattern="";}var w=this;var x=function(AC){if(!w.isMiniSearchBox){return AC.toString();}var AD=[],AA=d,AB;for(AB in AA){if(f.find(AC,AA[AB])>-1){AD.push(AA[AB]);}}return AD.toString();};var v=function(){var AB="";if(w.isMiniSearchBox||w.dereferenceshortcut=="1"){return AB;}if(w.objectType.length===0||f.indexOf(w.objectType,18)===-1){return AB;}var AC=[],AA;for(AA=0;AA<w.allowedObjectTypesData.length;AA++){AC.push(w.allowedObjectTypesData[AA].t);}return AC.toString();};var z={taskId:"searchMetadata",searchId:this.blockBegin>this.blockCount?this.searchId||"":"",quickSearch:this.qse,fields:this.fields,styleName:this.styleName,searchPattern:this.last_searchPattern||this.searchPattern,objectType:x(this.objectType),targetObjectType:v(),rootFolderType:this.rootFolderType,rootFolderID:(this.rootFolderType=="0"?this.rootFolderID:""),dereferenceshortcut:this.dereferenceshortcut,searchDomain:this.searchDomain,servletName:mstrApp&&mstrApp.name,supportOMD:this.supportOMD,maxObjects:this.maxObjects,blockCount:this.blockCount,blockBegin:this.blockBegin,nameWildcards:this.nameWildcards,recursive:this.recursive,sortKey:this.qse?-1:6,dateType:this.dateType,created:this.created,dateSubType:this.dateSubType,intervalUnit:this.intervalUnit,intervalValue:this.intervalValue,startDate:this.startDate,endDate:this.endDate,ownerType:this.ownerType,description:this.description,includeObjectDesc:false,includeAncestorInfo:true,includeHiddenAncestors:true,uses:this.uses||""};this.serverRequest(z,I.search(this));this.showSpinnerIcon(true);},delayedRequestResults:function K(){if(this.tmrRR){window.clearTimeout(this.tmrRR);}var v=this;this.tmrRR=window.setTimeout(function(){v.requestResults();},this.searchDelay);},renderResults:function U(v){var w=this;if(!this.resultsWidget){this.addChildren([{scriptClass:"mstrmojo.mstr.search.SearchResults",alias:"resultsWidget",slot:"resultsContainerNode",maxSearchResults:this.maxSearchResults,allowHTMLOnObjectDesc:this.allowHTMLOnObjectDesc,onfetch:function(x){w.fetchPage(x);}}]);this.renderChildren();}this.resultsWidget.set("results",v);},renderResultsPopup:function U(w){var v=this.suggestionPopup.list.selectedIndex;this.set("suggestionItems",w.concat(this.sItems));this.suggestionPopup.list.set("selectedIndex",v);},hasUserInput:function P(){if(!this.inputNode){return false;}var w=this.hasSearchPattern;w=w||!p.isEmpty(this.description)||this.ownerType==2||(this.dateType!=1)&&((this.dateSubType==1)&&!p.isEmpty(this.intervalValue)||(this.dateSubType==2)&&!p.isEmpty(this.startDate));return w||this.allowEmptyInput;},forceSearch:function b(){if(!this.hasUserInput()){return ;}this.suggestInputNode.value="";this.hideSuggestion();this.last_searchPattern=null;this.currentPage=1;this.blockBegin=1;this.requestResults();},updateQuickSearchEnabled:function c(){this.qse=!!this.isQuickSearchEngineEnabled&&this.enableQuickSearchPref;this.pqse=this.qse;this.qse=this.qse&&(f.indexOf(a,parseInt(this.nameWildcards,10))>-1);this.doAutoComplete=this.qse&&this.enableSearchAutoComplete;this.searchDelay=Math.max(0,this.searchAutoCompleteDelay);},syncInputWithSuggest:function X(){return ;},getSelectedIndex:function(){return this.suggestionPopup.list.selectedIndex;},getSelectedItem:function(){return this.suggestionPopup.list.selectedItem;},updateSelectedIndex:function W(v){try{if(!this.suggestionShown){return ;}if(v==38||v==40||v==13){switch(v){case 40:this.nextHighlight();break;case 38:this.preHighlight();break;case 13:this.hideSuggestion();this.selectedIndex=-1;return ;}var w=this.getSelectedItem()||{};var z=false;if(w.t=="-1"){z=this.applySuggestionItem(w);}else{z=false;this.selectedIndex=this.getSelectedIndex()-((this.sItems&&this.sItems.length)||0);}return z;}}catch(x){}},clear:function j(){this.showClearIcon(false);this.showSpinnerIcon(false);this.searchPattern="";this.last_searchPattern="";this.hasSearchPattern=false;this.inputNode.value="";this.suggestInputNode.value="";if(this.resultsWidget){this.resultsWidget.set("results",{});}this.hideSuggestion();u.call(this);},showSpinnerIcon:function L(v){this.set("spinnerVisible",v);},showClearIcon:function D(v){this.set("clearVisible",v);},getCandidatesThroughTaskCall:function R(x,v){x={taskId:"getSearchSuggestions",keyword:this.searchPattern};var w=I.suggest(this);v=mstrmojo.func.wrapMethods(w,v);this.serverRequest(x,v);},getSuggestionPos:function Y(){var v=mstrmojo.dom.position(this.inputNode,true);return{left:Math.round(v.x)+"px",top:Math.round(v.y+v.h)+"px",zIndex:102};},onSuggestionItemSelect:function m(v){if(this.applySuggestionItem(v)){this.delayedRequestResults();}},applySuggestionItem:function B(v){this.inputNode.value=v.n;this.suggestInputNode.value=this.inputNode.value;var w=false;if(this.last_searchPattern!=this.suggestInputNode.value){this.last_searchPattern=this.suggestInputNode.value;w=true;}this.selectedSuggestionIndex=this.getSelectedIndex();return w;},fetchPage:function F(v){var w=Math.max(v.v-1,0);this.blockBegin=w*this.blockCount+1;this.requestResults();},serverRequest:function H(v,w){mstrmojo.xhr.request("POST",mstrConfig.taskURL,w,v);},handleSearchErrorAndModeSwitching:function M(AC){if(!AC){return ;}var x=this;if(x.qse){var w=AC.getResponseHeader("X-MSTR-TaskErrorCode"),AB=AC.getResponseHeader("X-MSTR-TaskFailureMsg")||"";if(!w||w==-2147209051){return ;}var z=-2147212073;var AA=-2147212154;if(w==z||w==AA){x.isQuickSearchEngineEnabled=false;x.updateQuickSearchEnabled();x.nameWildcards={16:1,2:2,4:4,8:8}[x.nameWildcards];x.requestResults();this.showInfoIconOnce=true;}else{mstrmojo.alert(x.addAdminInfo(AB));}}else{var v=JSON.parse(AC.responseText).qsr;if(this.enableQuickSearch&&v){this.isQuickSearchEnabled=true;x.updateQuickSearchEnabled();x.nameWildcards={1:16,2:2,4:4,8:8}[x.nameWildcards];x.requestResults();}}},showSearchInfoIcon:function S(v){this.set("showInfoIcon",!this.qse||v);},destroy:function l(v){this._super(v);this.destroyChildren(true);}});mstrmojo.mstr.search.Search.zIndex=10;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.mstr.ui.CreateMenu","mstrmojo.ui.menus._HasMenuPopup");var B=mstrmojo.dom;var C="mscld-create-menu";mstrmojo.mstr.ui.CreateButton=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.mstr.ui.CreateButton",markupString:'<div id="mscld-create" class="mstrmojo-CreateButton mscld-create analysis" title="'+mstrmojo.desc(3291,"Create")+'" mstrAttach:click><span class="mstrMenuItemcreate"><span id="mscld-create-menu" class="mscld-create-menu">'+mstrmojo.desc(3291,"Create")+"</span></span></div>",markupSlots:{menuButtonNode:function(){return this.domNode;}},onclick:function(){var D=mstrmojo.all[C];if(!D){D=mstrmojo.insert({scriptClass:"mstrmojo.mstr.ui.CreateMenu",id:"mscld-create-menu",opener:this,alignMenuToRight:this.alignMenuToRight,reportCreationViewMode:this.reportCreationViewMode});}this.toggleButtonClass(true);D.loadCreateMenu();},toggleButtonClass:function(D){if(this.domNode.className.indexOf("open")>0){mstrmojo.css.toggleClass(this.domNode,"open",D);}else{mstrmojo.css.toggleClass(this.domNode,"open",D);}},init:function(E){this._super(E);if(!this._listenerProc){var F=this;var D=this._listenerProc=function(){F.browserResized();};B.attachEvent(window,"resize",D);}},browserResized:function(){if(this.timer){clearTimeout(this.timer);}var D=mstrmojo.all[C];if(D){this.timer=setTimeout(function(){D.createMenu.adjustCornersForPopupOverflow();},100);}},destroy:function A(D){if(this._listenerProc){B.detachEvent(window,"resize",this._listenerProc);}this._super(D);},onButtonClick:mstrmojo.emptyFn,onStatusClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.rw.ConditionWalk","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.mstr.EnumNodeDimty","mstrmojo.mstr.DocElementDataHelper","mstrmojo.ui._IsIncFetchList");var E=mstrmojo.array,G=mstrmojo.css,C=mstrmojo.mstr.EnumNodeDimty,K=E.hash([C.NodeDimtyUnspecified,C.NodeDimtyNone]);function H(){var L=this.thresholdRow,M=this.editor;if(L){this.removeChildren(L);}G.toggleClass(M.content.domNode,"no-overflow",false);this.set("visible",false);M.setRowPanelVisibility(true);}mstrmojo.threshold.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,[mstrmojo.ui._IsIncFetchList],{objectBrowsingEnabled:false,dimtyTypes:K,targets:null,targetsLastMod:null,ets:null,condition:null,onOK:function B(){var L=this.editor;L.model.setConditionData(this.condition,this.model.get());H.call(this);L.toggleButtonStatus(true);},close:function I(){var O=this.editor;var Q=this.condition,M=Q.tree.parent,L=M.exprTree;if(Q.isEmpty()){Q.del();}var N=L&&L.items,P=N&&N.length;if(!P||P===0){O.model.deleteThreshold(M.threshold);}H.call(this);O.toggleButtonStatus(true);},browse:function F(L){this._super(L);if(L.alias==="es"){G.toggleClass(this.eb.domNode,"adv-threshold",true);}},getAttributeForms:function J(L){return mstrmojo.rw.ConditionWalk.getAttForms(L,this.editor.controller.datasets);},getElements:function D(O,R){var Q={},M=R.complete,N=this;this.scrollNode=this.columnWalk.es.scrollNode;var L=this.scrollNode&&this.scrollNode.style;if(L){L.height="100%";}if(!this.ifDataHelper){this.ifDataHelper=new mstrmojo.mstr.DocElementDataHelper({source:this.editor.controller.dataService});}else{var P=this.ifDataHelper;P.set("items",null);P.set("blockBegin",1);P.set("blockCount",0);P.set("totalSize",0);P.browseConfig.attributeID=O.did;}this.columnWalk.es.es.allowUnlistedValues=false;this.updateBrowseElementsParams(Q,O);this.ifDataHelper.browseConfig=Q;R=mstrmojo.func.wrapMethods(R,{complete:function(S){N.initScroll();N.set("isFetching",false);}});this.ifDataHelper.getItems(1,R);},postNext:function A(){this.columnWalk.es.updateList(this.ifDataHelper.items);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.rw.ConditionWalk","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.expr","mstrmojo.css");var F=mstrmojo.expr.ET.MQ,H=mstrmojo.expr.ET.MC,C=mstrmojo.css,B=mstrmojo.desc(14387,"Evaluate this condition independent of other dataset level conditions");var G=function(L,N){var K=L.et,I=L.m&&mstrmojo.rw.ConditionWalk.isMdxDM(L.m.did),M=((K===F||K===H)&&!this.inRelation&&!I)?"block":"none",J=(((N===1)||K!==F)&&!I)?1:0;C.toggleClass(this.toolNode,"unselectable",K===H);this.toolNode.style.display=M;this.level.set("selectedIndex",J);this.includeExist.set("visible",J===1&&(K===H||K===F));this.includeExist.set("checked",L.idcsi===undefined?false:L.idcsi);};mstrmojo.fe.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,null,{scriptClass:"mstrmojo.fe.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="tools"></div><div class="apply"></div></div>',markupSlots:mstrmojo.hash.copy({toolNode:function(){return this.domNode.childNodes[2];}},mstrmojo.hash.copy(mstrmojo.rw.ConditionWalk.prototype.markupSlots)),layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",toolNode:"auto",applyNode:"auto"},xt:true},postCreate:function E(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Label",slot:"toolNode",text:mstrmojo.desc(13517,"Calculate on")},{scriptClass:"mstrmojo.ui.Pulldown",slot:"toolNode",alias:"level",isHostedWithin:false,items:[{n:mstrmojo.desc(13518,"Template level"),v:0},{n:mstrmojo.desc(13519,"Dataset level"),v:1}],onitemSelected:function I(J){var K=this.parent;if(K&&K.condition&&K.visible){K.includeExist.set("visible",J.v===1);K.condition.level=J.v;}}},{scriptClass:"mstrmojo.ui.Checkbox",alias:"includeExist",slot:"toolNode",postBuildRendering:function(){this.domNode.innerHTML=B;},oncheckedChange:function(){var J=this.parent;if(J){J.model.set("idcsi",this.checked);}}}]);if(this._super){this._super();}},onvisibleChange:function A(I){var J=this.condition;if(J&&this.toolNode&&this.visible){G.call(this,J.data,J.tree.level);}if(this._super){this._super(I);}},onmodeledit:function D(I){if(this._super){this._super(I);}if(this.toolNode){G.call(this,this.model.get(),this.model.level);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Dial","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Obj","mstrmojo.CheckBox","mstrmojo.mstr.EnumNodeProperties","mstrmojo.warehouse.EnumObjectTypes","mstrmojo.fe.FilterExprTree","mstrmojo.fe.RelationFilterExprTree","mstrmojo.fe.CreateSetEditor","mstrmojo.fe.ConditionWalk","mstrmojo.ui.Pulldown","mstrmojo.ui.StatusButton");var Z=mstrmojo.expr,I=Z.ET,O=Z.BRANCH_FNS,X=mstrmojo.Obj,W=mstrmojo.dom,a=mstrmojo.array,S=mstrmojo.hash,d=mstrmojo.css,F=mstrmojo.mstr.EnumNodeProperties,C=mstrmojo.warehouse.EnumObjectTypes,K={TEMPLATE:0,DATASET:1},E=mstrmojo.mstr.EnumNodeDimty,Q=a.hash([E.NodeDimtyUnspecified,E.NodeDimtyNone]),M=200,H=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function Y(){var g=this.avatar;if(g){g.parentNode.removeChild(g);delete this.avatar;d.removeClass(g,[this.avatarCssClass]);}}mstrmojo.fe.FilterEditorBase=mstrmojo.declare(mstrmojo.Editor,null,{onSave:null,onCancel:null,title:mstrmojo.desc(12032,"View Filter Editor"),help:"view_filter_editor_for_report_services_documents.htm",cssClass:"mstrmojo-charcoalboxe mstrmojo-FE",showLimits:true,objectBrowsingEnabled:false,children:null,showCondWalk:false,isNewCond:false,vizTitle:"",init:function T(g){this.children=[{alias:"feContent",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-content",postCreate:function(){this.children=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-exprTool",children:[{scriptClass:"mstrmojo.ui.StatusButton",cssClass:"mstrmojo-FE-addCondition",postCreate:function h(){this.editor=this.parent.parent.parent;this.statusList=this.editor.getAddConditionList();this.status=this.statusList[0];},onButtonClick:function(j){if(j){j.handler.apply(this.editor);}}}]},this.parent.getExpressionContainerCfg()];}},this.getConditionWalkConfig(),{alias:"buttonBar",scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",toggleBtnStatus:function(h){this.children[0].btnSave.set("enabled",h);this.children[0].btnCancel.set("enabled",h);},children:[{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(118,"Save"),alias:"btnSave",onclick:function(){var h=this.editor;h.save();h.close();},bindings:{enabled:function(){return !this.editor.readOnly;},editor:"this.parent.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"btnCancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var h=this.editor;if(h.onCancel){h.onCancel(h.model);}h.close();},bindings:{editor:"this.parent.parent.parent"}}]}]}];this._super(g);this.model=this.model||new X();},save:function V(){var g=this.model;g.expr=e(g.exprForest);g.limitExpr=e(b(g.limitExprForest));this.onSave(g);},getExpressionContainerCfg:function(){var g=this;return{alias:"feExpr",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-expr-list",postCreate:function(){this.children=g.getExpressionContentsConfig();},onRender:function(){W.attachMarkupEvent(this.id,this.domNode,"mousedown");},onmousedown:function(h){var j=W.eventTarget(h.hWin,h.e);if(this.isBlankArea(j)){this.clearSelect();}},isBlankArea:function(h){return h===this.domNode;},clearSelect:function(){}};},getExpressionContentsConfig:function(){return[];},getConditionWalkConfig:function(){var h=this;return{scriptClass:"mstrmojo.rw.ConditionWalk",width:"750px",objectBrowsingEnabled:false,dimtyTypes:Q,alias:"walk",visible:false,onOK:function g(){var k=this.condition;h.feContent.set("visible",true);this.set("visible",false);h.onConditionEdit(k,this.model.get());h.toggleButtonStatus(true);h.set("showCondWalk",false);},close:function j(){h.feContent.set("visible",true);this.set("visible",false);var k=this.condition;if(k&&k.isEmpty()){k.del();}h.toggleButtonStatus(true);h.set("showCondWalk",false);},targets:null,targetsLastMod:null,ets:null,condition:null,bindings:{disableElementsBrowsing:"this.parent.disableElementsBrowsing"}};},onConditionEdit:function(h,g){h.tree.modifyConditionNode(h,g);},getAddConditionList:function c(){return[{n:mstrmojo.desc(1994,"Add Condition"),handler:function(){this.mainExpr.newCondition(null,true);}}];},toggleButtonStatus:function B(g){this.buttonBar.toggleBtnStatus(g);},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-FE-andOrPopup mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",slot:"containerNode",modal:false,autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var g=this.condition,k=g&&g.data&&g.data.not,l=g&&g.parent,h=l&&l.data,j=(h&&h.fn)+(k?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(j)?null:{did:j});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",renderOnScroll:false,items:[{did:19,n:O[19]},{did:20,n:O[20]},{did:19+21,n:O["19_21"]},{did:20+21,n:O["20_21"]}],onchange:function(){if(this.opening){return ;}var h=this.parent,g=h.condition,n=this.selectedItem,m=n&&n.did,l=m>21?true:null,k=m-(l?21:0);h.close();var j=g&&g.parent;if(j&&j.data&&j.data.et===I.ANDOR){j.edit(g,k,l);}else{var o=g&&g.data;if(o&&(o.not!==l)){o.not=l;g.paint();}}}}]},createSetPopupRef:{scriptClass:"mstrmojo.fe.CreateSetEditor",contentNodeCssClass:"",cssClass:"CreateSet-Editor",title:mstrmojo.desc(12034,"Create a Set"),slot:"containerNode"},_set_busy:function(h,g){if(g){this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");}else{this.set("enabled",true);this.set("iconClass","");}},_set_model:function(l,h){var j=this.model,k=j!==h;if(k){this.model=h;this.modelLastSet=new Date();var g=function(m){return P(J(m));};h.exprForest=g(h.expr);h.limitExprForest=g(h.limitExpr);if(this.feContent&&this.feContent.feExpr.ve){this.feContent.feExpr.ve.nameFactory.clear();}}return k;},onUpdateBrowseElementsParams:mstrmojo.emptyFn,openWalk:function(p,q,v,w){var t=this,h=W.delta(q.domNode,t.containerNode);h.y+=(v==="andor"?16:parseInt(q.domNode.offsetHeight,10));var u={condition:q,zIndex:t.zIndex+10,left:h.x+"px",top:h.y+"px"},g;switch(v){case"andor":if(t.skipAndOrPopup){return ;}g="andOrPopupRef";break;case"createSet":case"createSetOpt":if(w&&w.e&&w.e.target){var l=w&&w.e&&w.e.target,o=W.delta(l,t.containerNode);u.left=o.x+"px";u.top=o.y+parseInt(l.offsetHeight,10)+"px";}var r=t.model.targets;g="createSetPopupRef";u.type=v;u.model={attrs:a.filter(r,function(n){return n.t===C.ATTRIBUTE;}),metrics:a.filter(r,function(n){return n.t===C.METRIC;})};if(v==="createSetOpt"){u.condition=q.parent;u.model.childIdx=q.childIndex();}break;case"condition":var m=t.walk,j=q.textNode.cloneNode(true),k=m.conditionNode.firstChild;d.removeClass(j,"editable");d.addClass(m.conditionNode,"mstrmojo-ConditionNode");if(k.firstChild){k.removeChild(k.firstChild);}k.appendChild(j);m.set("objectBrowsingEnabled",t.objectBrowsingEnabled);m.set("targets",t.model.targets);m.set("targetsLastMod",t.modelLastSet);m.set("ets",q.tree.validExprTypes||t.validExprTypes);m.set("condition",q);m.set("model",S.clone(p));m.set("hasPrompt",t.model.hasPrompt);m.set("disableElementsBrowsing",t.disableElementsBrowsing||m.disableElementsBrowsing);m.set("editor",t);m.set("inRelation",q.inRelation);t.feContent.set("visible",false);m.set("visible",true);m.columnWalk.target.updateScrollbars();t.toggleButtonStatus(false);t.set("showCondWalk",true);t.set("isNewCond",!!p.isNew);return ;}t.openPopup(g,u);}});mstrmojo.fe._isReportFilterEditor=mstrmojo.provide("mstrmojo.fe._isReportFilterEditor",{_mixinName:"mstrmojo.fe._isReportFilterEditor",getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({clearSelect:function(){this.re.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{alias:"re",scriptClass:"mstrmojo.fe.ReportFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}}];}});mstrmojo.fe.ReportFilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,[mstrmojo.fe._isReportFilterEditor],{scriptClass:"mstrmojo.fe.ReportFilterEditor"});mstrmojo.fe.ReportFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.ReportFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(g){g.data.isNew=true;this.editor.openWalk(g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");},onnodeclick:function A(g){var h=g.editor||this.tree.editor;h.openWalk(this.data,this,g&&g.part,g);},allowDrop:function G(g){var j=g&&g.src,l=j&&j.data,k=l&&l.et,h=j&&j.widget&&j.widget.tree;return k&&this!==h;}});mstrmojo.fe.FilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({isBlankArea:function(h){if(this._super(h)){return true;}return !a.filterOne([this.ve,this.vle,this.re],function(j){if(j&&W.contains(j.domNode,h,true)){return true;}});},clearSelect:function(){this.ve.clearTreeSelect();this.vle.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11746,"Dataset Level Conditions"),cssClass:"mstrmojo-FE-expr-header dl",bindings:{visible:"true || this.parent.parent.parent.showLimits"}},{alias:"ve",scriptClass:"mstrmojo.fe.RWViewFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},supportRelation:true,postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11747,"Template Level Conditions"),cssClass:"mstrmojo-FE-expr-header tl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"vle",scriptClass:"mstrmojo.fe.RWViewLimitExprTree",level:K.TEMPLATE,bindings:{visible:"this.editor.showLimits",items:"this.editor.model.limitExprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("limitExpr",this);}}];},getConditionWalkConfig:function(){var g=this._super();S.copy({scriptClass:"mstrmojo.fe.ConditionWalk"},g);return g;},getAddConditionList:function c(){var g=this._super();g.push({n:mstrmojo.desc(12055,"Add Dynamic Condition"),handler:function(){this.mainExpr.newCondition({et:I.XML,idc:1,ph:{}},true);}});return g;},onConditionEdit:function(j,h){if(j.tree.level===j.level||j.tree.level===undefined){this._super(j,h);}else{j.parent.remove(j.data);var g=K.TEMPLATE===j.level?this.limitExpr:this.mainExpr;g.addSingleCondition(h);}}});mstrmojo.fe.RWViewFilterExprTree=mstrmojo.declare(mstrmojo.fe.RelationFilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",levelSwitchValidTypes:[I.MQ],onNew:function(g){g.data.isNew=true;if(!g.data.ph){this.editor.openWalk(g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");}},onnodeclick:function A(h){var g=this.tree,k=h.editor||g.editor;this.level=g.level;var j=typeof (k.disableElementsBrowsing)==="function"&&k.disableElementsBrowsing();if(j&&this.data.et===I.AE){return ;}k.openWalk(this.data,this,h&&h.part,h);},ondragend:function N(j){var h=j&&j.tgt,g=h&&h.widget;if(this.tree&&g&&g.tree&&g.tree!==this.tree){Y.call(this);return ;}this._super(j);},getItemConfig:function(j,g,k){var h=this._super(j,g,k);return S.copy({getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewLimit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(4978,"Move to view limit")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewLimit(w); return false;\" />";}},h);},moveMQNodeToViewLimit:function(j){if(a.indexOf(this.levelSwitchValidTypes,j.data.et)===-1){return ;}var h=S.copy(j.data);j.parent.remove(j.data);var g=this.editor.limitExpr;g.addSingleCondition(h);},allowDrop:function G(g){var j=g&&g.src,m=j&&j.data,l=m&&m.et,k=this.tree,h=j&&j.widget&&j.widget.tree;return l&&(this===k?(h!==k):true);}});mstrmojo.fe.RWViewLimitExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewLimitExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-limitExpr",validExprTypes:a.hash([I.MQ]),levelSwitchValidTypes:[I.MQ],onnodeclick:function A(h){var g=this.tree,j=g.editor;this.level=g.level;j.openWalk(this.data,this,h&&h.part,h);},onConditionEdit:function(h,g){this._super(h,g);h.data.mdxUnitId=h.data.m.did;U(h);},addSingleCondition:function(h){var g=this._super(h);U(g);},allowDrop:function(g){var k=g&&g.src,m=k&&k.data,l=m&&m.et,j=this.tree,h=k&&k.widget&&k.widget.tree;if(j===h){return this!==h&&this.data&&(this===k.parent||this.data.mdxUnitId===(m&&m.mdxUnitId));}return !(a.indexOf(this.levelSwitchValidTypes,l)===-1);},ondrop:function L(h){var l=h&&h.src,g=l&&l.widget;if(g&&g.tree!==this.tree){var k=l&&l.data;if(k&&k.index!==null){var j=g.ctxtBuilder.itemWidgets[k.index];j.tree.moveMQNodeToViewLimit(j);}l.data=null;}this._super(h);},isEditable:function(g){return g.mdxUnitId&&this._super(g);},ondragend:function R(g){var k=g&&g.tgt,h=k&&k.widget;if(h&&h.tree!==this.tree){var j=g.src&&g.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}Y.call(this);}else{this._super(g);}},moveMQNodeToViewFilter:function(h){var g=this.editor.mainExpr;h.parent.remove(h.data);g.addSingleCondition(h.data);},getItemConfig:function(j,g,k){j.mdxUnitId=D(j);var h=this._super(j,g,k);return S.copy({cssClass:f(j,g,k)?"per-metric-limit":"",forbidRelation:true,getConditionTextPostfix:function(){if(this.data.et!==I.MQ||mstrmojo.rw.ConditionWalk.isMdxDM(this.data.m.did)){return"";}return'<img class="mstrmojo-moveToViewFilter" src="../images/1ptrans.gif" title="'+mstrmojo.desc(9746,"Move to view filter")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewFilter(w); return false;\" />";}},h);}});function P(h){var g=[];a.forEach(h,function(j){if(!j){return ;}if(j.et===I.ANDOR&&!(j.node&F.CONDITION)){j.nds=P(j.nds);if(j.nds.length===0){return ;}else{if(j.nds.length===1){var k=j.nds[0];if(j.not){k.not=!k.not;}g.push(k);return ;}}}g.push(j);});return g;}function J(g){return g?[g]:[];}function e(g){return g&&g.length===1?g[0]:null;}function b(j){var h=P(j),g;if(!h[0]||h[0].mdxUnitId){g={et:I.ANDOR,fn:Z.FN.AND,nds:h};}else{g=h[0];}return[g];}function f(h,g,j){return(j===j.tree||j.parent===j.tree)&&!!h.mdxUnitId;}function D(h){if(!("mdxUnitId" in h)){var g;switch(h.et){case I.MQ:case I.MC:g=h.m.did||null;break;case I.ANDOR:a.forEach(h.nds,function(k){var j=D(k);if(g===undefined){g=j;}else{if(g!==j){g=null;return false;}}return true;});break;default:g=undefined;break;}h.mdxUnitId=g;}return h.mdxUnitId;}function U(m){var o=m.tree,n=o.ctxtBuilder.itemWidgets[0],r=m.parent,p=a.indexOf(r.items,m.data),k=r.items[p],h=k.mdxUnitId;if(r===o){return ;}if(r.data.mdxUnitId===h){return ;}if(n.data.mdxUnitId){var j={et:I.ANDOR,fn:Z.FN.AND,nds:[n.data,k]};o.remove(0);o.add([j]);o.ctxtBuilder.itemWidgets[0].ctxtBuilder.itemWidgets[0].remove(k);}else{var l=n,g;a.forEach(n.data.nds,function(u,t){if(u.mdxUnitId===k.mdxUnitId&&n.items[t]!==k){l=n.ctxtBuilder.itemWidgets[t];g=t;return false;}});if(l===r){return ;}if(l.data.et!==I.ANDOR){var q={et:I.ANDOR,fn:Z.FN.AND,nds:[l.data,k]};n.add([q],g+1);n.remove(l.data);}else{l.add([k]);}r.remove(k);}}}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.mstr.search.Search");mstrmojo.mstr.search.SearchButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.mstr.search.SearchButton",cssClass:"mstrmojo-SearchButton",onclick:function A(B){this.searchEditor=new mstrmojo.Editor({cssClass:"mstrmojo-Search-editor",zIndex:mstrmojo.mstr.search.Search.zIndex,children:[{scriptClass:"mstrmojo.mstr.search.Search",id:"search",searchProps:this.searchProps,showAsPopup:false,isQuickSearchEngineEnabled:mstrConfig.isQuickSearchEngineEnabled,enableQuickSearchPref:mstrConfig.enableQuickSearchPref,enableSearchAutoComplete:mstrConfig.enableSearchAutoComplete,searchAutoCompleteDelay:mstrConfig.searchAutoCompleteDelay}],onOpen:function(){var C=45;this.set("top",mstrmojo.dom.getVerticalScroll()+C+"px");window.setTimeout(function(){mstrmojo.all.search.inputNode.focus();},200);},onClose:function(){this.destroy();}});this.searchEditor.open();}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.Enum_Keys","mstrmojo.SimpleObjectInputBox");var D=mstrmojo.array,B=mstrmojo.dom,E=mstrmojo.Enum_Keys,A=mstrConfig.thousandsSep;var H={DEFAULT:1,ADDING:2,EMPTY:3,FULL:4};if(A===undefined){A=",";}var I;mstrmojo.TextBoxSelector=mstrmojo.declare(mstrmojo.SimpleObjectInputBox,null,{cssClass:"mstrmojo-TextBoxSelector",srcid:null,dataSourcesXML:null,maxItemWidth:"",preBuildRendering:function G(){this.set("maxItemWidth",parseInt(this.parent.contentNode.style.width,10));this._super();},prekeydown:function C(J){var L=J.e;switch(parseInt(L.keyCode||L.charCode,10)){case E.TAB:case E.ENTER:B.preventDefault(J.hWin,L);var M=this.inputBox.value;if(M){if(D.find(this.items,"v",M)===-1){this.onSuggestionItemSelect({n:M,v:M});}else{this.setDefaultState();}}break;case E.ESCAPE:this.setDefaultState();break;case E.BACKSPACE:if(!this.getSearchPattern()){B.preventDefault(J.hWin,L);var K=this.items&&this.items.concat();if(K&&K.length){K.splice(K.length-1,1);this.set("items",K);var N=this.id;window.setTimeout(function(){mstrmojo.all[N].set("state",H.ADDING);},0);}}break;}},prekeyup:function F(J){}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.elementHelper","mstrmojo.SimpleObjectInputBox","mstrmojo._HasTooltip","mstrmojo.mstr.EnumDSSXMLObjectTypes");var N=mstrmojo.array,H=mstrmojo.dom,B=mstrmojo.Enum_Keys,P=mstrmojo.hash,b=mstrmojo.mstr.EnumDSSXMLObjectTypes,Q=mstrConfig.thousandsSep;if(Q===undefined){Q=",";}var K=2147762227,W=2147762262,I=2147762269,L=140,O=118,X=350,J=-100,V=-101,C=64;var T;mstrmojo.SearchBoxSelectorList=mstrmojo.declare(mstrmojo.SuggestionList,null,{postBuildRendering:function U(){var e=this._super(),c=this.parent,g=c.id;if(!this.onScroll){this.onScroll=function d(){var h=mstrmojo.all[g],j=h.domNode;if(!h.isFetching&&Math.ceil(j.offsetHeight+j.scrollTop)>=j.scrollHeight){h.isFetching=true;h.opener.getCandidatesThroughTaskCall({isIncFetch:true},{});}};}var f=c.domNode;if(c.supportsIncFetch){H.attachEvent(f,"scroll",this.onScroll);}else{H.detachEvent(f,"scroll",this.onScroll);}return e;},getItemMarkup:function(d,c){if(!T){T=this._super(d,c).replace(">{@"+this.itemField+"}<",">{@"+this.itemField+"}{@weight}<");}return T;},getItemProps:function a(e,c){var d=this._super(e,c),f=e.wt;d.weight=f?"<em>("+mstrmojo.num.addSeparators(f,Q)+" "+this.parent.opener.wtStr+")</em>":"";return d;},onmouseover:function(d,f){var c=d.e.srcElement;if(c.scrollWidth<=c.offsetWidth){c.title="";}},onclick:function(d){var g=this.parent.opener.suggestionItems,c=g.length;this._super(d);if(c<=1){return ;}var e=N.find(g,"t",J),f=this.getItemFromTarget(d.getTarget());if(f&&f.t&&f.t===J){N.forEach(g,function(h,j){if(!this.selectedIndices[j]){this.doItemSelect(h,{});}},this);}else{if(this.selectedIndices[e]){this.doItemSelect(g[e],{});}}}});mstrmojo.SearchBoxSelector=mstrmojo.declare(mstrmojo.SimpleObjectInputBox,[mstrmojo._HasTooltip],{scriptClass:"mstrmojo.SearchBoxSelector",cssClass:"mstrmojo-SearchBoxSelector",srcid:null,srct:b.Attribute,dataSourcesXML:null,useClientForm:false,maxItemWidth:"",wtStr:"likes",suggestionListClass:"mstrmojo.SearchBoxSelectorList",useRichTooltip:false,postCreate:function A(){var c=P.clone(this.suggestionPopup);c.cssClass="mstrmojo-SearchBoxSelector-suggest";c.nudge=function(){var o=this.domNode,g=this.containerNode;if(!o){return ;}var l=Math.min(g&&g.offsetHeight||L,(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||L),d=o.offsetWidth,e=H.windowDim(),f=parseInt(this.left,10),j=parseInt(this.top,10);if(j+l>=e.h){j=Math.max(j-l-(this.target?this.target.offsetHeight:0),0);if(j+l>=e.h){j=5;l=H.getMaxScrollHeight();}}if(f+d>=e.w){f=Math.max(f-d,0);}var n=o.style;n.top=j+"px";n.left=f+"px";n.maxHeight=l+"px";var k=this.opener,m=k&&k.width,h=H.position(o).w;if(m!==undefined&&h<parseInt(m,10)&&n.maxWidth!==m){n.maxWidth=m;this.nudge();}};this.suggestionPopup=c;},preBuildRendering:function D(){var c=this.parent.contentNode.offsetWidth||this.parent.width;this.set("maxItemWidth",parseInt(c,10));this._super();},postBuildRendering:function U(){var c=this.parent.defn.fmts;if(!c.height){this.domNode.style.height="auto";}return this._super();},filterCandidates:function Z(d,g,c){var h=d,e=this.suggestCount;if(!this.noCache){c=c||e;if(g==="*"){g="";}else{g=mstrmojo.string.regEscape(g);}var j=this.itemField,f=new RegExp(g,"i");h=N.filter(d,function(k){return f.test(k[j]);},{max:c});}if(h.length){N.forEach(this.items,function(l){var k=N.find(h,"v",l.v);if(k>-1){h.splice(k,1);}});}return h;},getCandidatesThroughTaskCall:function G(x,AC){var q=this.id,j=this.getSuggestionTarget(),n=x.pattern||"",m=n,k=this.parent,t=this.srcid,o=x.isIncFetch,l=this._last_hit,AA=this,v=false,h;if(o){n=x.pattern=l.pattern;}if(n===""||n.trim()==="%"){return ;}if(t){var AB={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:t,dataSourcesXML:this.dsrc||"",blockBegin:o?l.loadedCount:1,blockCount:this.items.length+this.suggestCount,searchPattern:n,rawInput:m,browseFlags:1,otp:this.srct},p=null;var e=k.defn;if(e.dsid){p={};p.datasetID=e.dsid;p.messageID=k.model.mid;p.ctlKey=k.ckey;}if(this.srct===b.Consolidation){AB.browseFlags=C;}var w=e.fs||e.sfs;if(w){var u="",g="";N.forEach(w,function(AD){u+=g+AD.did;g=";";});AB.searchForms=u;if(k.model.isnew||this.useClientForm){var z="",c="",f=k.model,r=N.filterOne(f.getDatasetUnits(["att"]),function(AD){return AD.did===t;}),d=r.fs||[];N.forEach(w,function(AD){var AE=N.filterOne(d,function(AF){return AF.fid===AD.did;});z+=c+AD.did+":"+(AE&&AE.bftp||0);c=";";});AB.clientFormPatterns=z;}}AC.success=function(AL){var AH=mstrmojo.all[q],AF=AH&&AH.suggestionPopup,AK,AJ,AN,AM,AE=x.pattern,AD=AH&&AH._searchQueue,AG=!AD||AD.length<=(o?0:1)||!AH.stifleIntermediateSearch;if(AH){if(AL&&AL.es){AK=AH.getSuggestionTarget();AJ=AL.es.length;if(!AL||!AK||(j!==AK)){return ;}AN=AK.getSearchPattern();AM=AL.es;if(t){AM=mstrmojo.elementHelper.buildElemsTerseID(AM,t,true);}AH._last_hit={items:AM,pattern:AE,loadedCount:AL.bb+AJ};AF.isFetching=false;if(AG){AF.supportsIncFetch=(AL.bb+AL.bc)<AL.sz;if(AN&&AN.indexOf(AE)>-1){var AI=AH.filterCandidates(AM,AN);AH.updateSuggestion(o?AH.suggestionItems.concat(AI):AI);}if(AH.inputBox){AH.inputBox.focus();}if(!AH._ListenerProc){AH._ListenerProc=function(){var AO=AH.suggestionPopup;if(AO.visibile){AO.nudge();}};H.attachEvent(window,"resize",AH._ListenerProc);}}}else{if(AG){AH.updateSuggestion([]);}}}};AC.failure=function(AE){var AG=mstrmojo.all[q],AD=parseInt(AE.code,10)+4294967296,AF=(AD===K||AD===W||AD===I);if(!AF){mstrmojo.alert(AE.message);}if(AG&&AG.failMessage){AG.failMessage(AF?{errCode:AD,msg:AE.message}:{});}};AC.complete=function(){var AE=AA._searchQueue,AD=AE&&AE.pop();mstrApp.hideWait();if(AE&&AE.length&&AA.showSuggestion){AA._searchQueue=[];AA.showSuggestion(AD);}};if(this.hitEnterToTest){if(o&&this.onIncrementalFetch){this.onIncrementalFetch();}mstrApp.showWait({message:mstrmojo.desc(15823,'Searching "#"...').replace("#",n)});}else{if(!o){h=this._searchQueue;v=h&&h.length;if(!h){this._searchQueue=[];}this._searchQueue.push(n);}}if(!v){mstrmojo.elementHelper.browseElements(AC,AB,p);}}},destroy:function Y(c){if(this._ListenerProc){H.detachEvent(window,"resize",this._ListenerProc);delete this._ListenerProc;}this._super(c);},onsuggestionItemsChange:function F(){var g=this.suggestionItems,d=this.suggestionPopup,f=d.editorNode,l=g&&(g.length>8),k="",h="";if(l){k=(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||L;h="px";}if(f){f.style.maxHeight=k+h;}else{if(l){h+=";";d.cssText=(d.cssText||"")+"max-height:"+k+h;}}if(mstrApp.isExpress){var e=this.parent.contentNode.offsetWidth,c=(e===null||O<e)?O:e,j=(e===null||X>e)?X:e;d.cssText=(d.cssText||"")+"min-width:"+c+"px; max-width:"+j+"px;";}},getSuggestionPos:function R(){var c=this._super();if(c){c.lockIW=this;}return c;},updateSuggestion:function S(d){var c=d&&d.length;this.autoSelect=true;this.set("disableClick",false);if(this.parent.defn.multi&&c&&c>1){d=N.filter(d,function(f){return(f.v!=="u;"&&f.t!==14)&&(f.t!==J);});d.unshift({n:mstrmojo.desc(13976,"(All search results)"),t:J});this.autoSelect=false;}if(!c){d=[{n:mstrmojo.desc(13779,"No elements match your search"),t:V,cls:"nomatch"}];}if(d.length===1&&d[0].t===V){this.autoSelect=false;this.set("disableClick",true);}this._super(d);var e=this;e.mw=e.mw||function(j){var f=e._lastOpened;if(!f||!f.visible){H.detachEvent(document,H.isFF?"DOMMouseScroll":"mousewheel",e.mw);return ;}var h=H.eventTarget(self,j);var g=f.domNode;if(!H.contains(g,h,true,document.body)){f.close();H.detachEvent(document,H.isFF?"DOMMouseScroll":"mousewheel",e.mw);}};H.attachEvent(document,H.isFF?"DOMMouseScroll":"mousewheel",e.mw);},handleSuggestionItemSelect:function M(d,e){if(N.isArray(d)||d.t===J){d=N.ensureArray(d);var c=N.filter(d,function(f){return f.t!==J;});if(c.length<d.length){c=N.filter(this.suggestionItems,function(f){return f.t!==J;});}this.onSuggestionItemSelect(c);}else{this._super(d,e);}},prekeydown:function E(m){this._super(m);var j=m.e,n=(mstrApp&&mstrApp.MAX_SUGGESTION_POPUP_HEIGHT)||L,g=8,d=n/g;var f=this.getSelected();if(f){var h=f._renderIdx,c=(h-g+1)*d,l=(h-1)*d,k=this.suggestionPopup.domNode.scrollTop;switch(parseInt(j.keyCode||j.charCode,10)){case B.DOWN_ARROW:if(k<=c){this.suggestionPopup.domNode.scrollTop=c;}else{if(k>l){this.suggestionPopup.domNode.scrollTop=l;}}break;case B.UP_ARROW:if(k<=c||k>l){this.suggestionPopup.domNode.scrollTop=l;}break;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.editors.EditorModel","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.ui.editors.CharacterToolbarPopup","mstrmojo.array","mstrmojo.hash","mstrmojo.VisEnum");var B=0,I=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,V=mstrmojo.models.FormatModel,H=V.ENUM_PROPERTY_NAMES.TEXT_ALIGN,L=mstrmojo.hash,W=B,P=B,K=mstrmojo.VisEnum.SERVER_JSON_ERROR_TYPE;function M(c,X,Z,d,a){var Y=c===this.getTitleFormatCode(),b;if(Z===H){b=function(e){return this.titleAlignButtonBar.items.filter(function(f){return f.v===e;})[0].id;}.bind(this);}this.getHost().parent.changeUnitFormats(Y,c,X,Z,d,a,b,function(e){this.raiseEvent({name:"BEMFormatChange",propertyName:Z,value:e,isTitle:Y});}.bind(this));}function T(Y,Z){var X=new mstrmojo.vi.ui.TextAlignButtonBar({includeJustify:false});this.titleAlignButtonBar=X;X.singleSelect(X.items.map(function(a){return a.id;}).indexOf(Y));X.onValueChange=function(b,a){Z(H,b,a);};return X;}function C(Z){var c=this.getHost().getFormats(),f=c.ttl,d=[];if(f){var a=this,X=M.bind(this,this.getTitleFormatCode(),c),e=this.getHost(),Y=e.parent.getTitleBarVisibility(),b=[this.getCharacterGroup(X,f),T.call(this,V.getFormatBlockValue(f,H),X),this.getContainerGroup(f,X,I.FILL_COLOR,{showBackgroundNoFill:false})];b.forEach(function(g){g.set("enabled",Y);});d.push(this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(4756,"Title")),this.getCheckboxAndLabel(Y,mstrmojo.desc(13599,"Show titlebar"),function(h){var g=a.getHost();if(g){g.parent.toggleTitleBar(!!h);}})].concat(b),{cssClass:"bem-tc-title",showDivider:false}));}d.push(this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(11917,"Container")),this.getContainerGroup(c,M.bind(this,1,c),this.getContainerCtrlFlags(),{showBackgroundNoFill:false,showBorderNoFill:false})],{cssClass:"bem-tc-container"}));this.replaceChildControls(Z,d.concat(this.getTitleAndContainerControls()));}function D(X){var Z=this.getTargetPulldownItems(X);var Y=this.getPulldown(Z,function(a){if(Z.length>1){W=a;}else{W=P;}Z[Z.map(function(b){return b.v;}).indexOf(a)].h(a);if(X&&X.postUpdateFn){X.postUpdateFn();}});if(Y.items&&Y.items.length){Y.set("selectedIndex",Math.max(Z.map(function(a){return a.v;}).indexOf(W),0));}return Y;}mstrmojo.vi.models.editors.BaseEditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.EditorModel,null,{scriptClass:"mstrmojo.vi.models.editors.BaseEditorModel",titleAlignButtonBar:null,init:function Q(X){this._super(X);P=this.getInitialTarget(W);W=P;},selectTargetByValue:function N(X){if(X!==undefined){var Y=this._targetPulldown;if(Y){Y.selectItemByField("v",X);}}},getInitialTarget:function U(){return B;},getEditorContents:function R(X){var Y=this.getEditorGroup([],{cssClass:"bem-dynamic-grp",showDivider:false,isNested:true,isContainer:true,postUpdateFn:X});var a=this._targetPulldown=D.call(this,Y),Z=[Y].concat(this.getCommonControls());if(a.items.length>1){Z.unshift(this.getEditorGroup([a]));}this.addDisposable(a);return Z;},getFormattingToolbar:function F(Y,d,Z){if(Y===B){var c=this.getHost(),X=c.getFormats(),b=X.ttl;if(b){b=L.copy(b);b[H]=this.titleAlignButtonBar.items.filter(function(e){return e.id===b["text-align"];})[0].v;var a=new mstrmojo.ui.editors.CharacterToolbarPopup(L.copy({onGroupValueChange:M.bind(this,this.getTitleFormatCode(),X),textAlignJustify:false,textAlignFmtName:H,anchorElement:d},Z));a.setFormatSource(b);return a;}}return null;},getCommonControls:function E(){return[];},getContainerCtrlFlags:function A(){return I.FILL_COLOR+I.BORDER;},getTitleAndContainerControls:function S(){return[];},getTargetPulldownItems:function G(Y){var a=this.getHost(),X=a.getFormats(),Z=[];if(X&&(a.showTitleAndContainerFormats!==false)&&!mstrApp.isInVFConfigMode){Z.push({n:mstrmojo.desc(12049,"Title and Container"),v:B,h:C.bind(this,Y)});}return Z;},getTitleFormatCode:function J(){return 2;},isNormalOrExcludeAllDataButNotInPauseMode:function O(Z){var X=!Z.isEmpty()||Z.errorType===K.EMPTY_DATA,Y=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();return X&&!Y;}});mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE=B;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.array","mstrmojo.Container","mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowser","mstrmojo.TreeBrowserSelector","mstrmojo.DynamicClassFactory","mstrmojo._HasLayout","mstrmojo.ObjectBrowserDataProvider","mstrmojo.ui._HasScroller","mstrmojo.ui.SearchBox","mstrmojo.ui._HasUITheme","mstrmojo.vi.ui._IsDropTarget","mstrmojo.vi.ui._IsViPanel","mstrmojo.vi.ui.UnitList","mstrmojo.vi.ui._HasUnitListAvatar","mstrmojo.vi.ui.toolbars._HasToolbar","mstrmojo.vi.ui.CollapsibleTitleBar","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.ui._CanDropFromSchema","mstrmojo.css","mstrmojo.vi.ui.theme");var G=mstrmojo.DynamicClassFactory,U=mstrmojo.array,I=mstrmojo.hash,H=mstrmojo.dom,A=mstrmojo.css,g=mstrmojo.string,F=mstrmojo.vi.ui.theme,a=mstrmojo.vi.ui.DatasetUnitMenuUtils,f=[4,12,1,47];var J={n:mstrmojo.desc(15348,"No applicable objects"),t:0},R={n:mstrmojo.desc(15559,"No result matches your search."),t:0};function L(o){var n=[],m=[],t=this._shiftStartIndex,r=this.selectedIndices,q=Math.min(t,o),p=Math.max(t,o);U.forEach(this.items,function(u,w){if(q<=w&&w<=p){if(!r[w]){n.push(w);}}else{if(r[w]){m.push(w);}}});this.addSelect(n);this.removeSelect(m);}function P(){return !mstrmojo.resolveFeature("hide-objects-description");}function X(n){var m=mstrmojo.vi.enums.EnumDSSAccessRightFlags;return n.acg&&(n.acg&m.DssAccessRightUseFlag)&&(n.acg&m.DssAccessRightExecuteFlag);}function h(n,q){var p=n.itemsContainerNode,o=H.isMetaKey(q.src.hWin,q.src.e),t=H.eventTarget(q.src.hWin,q.src.e),m=-1;if(p&&t){U.forEach(p.childNodes,function(u,w){if(H.contains(u,t,true,u)){m=w;return false;}});}if(m!==-1){var r=n.items[m];if(!o&&!n.selectedIndices[m]){n.tree.clearTreeSelect();}if(U.indexOf(f,r.t)>=0){n.addSelect(m);}return true;}return false;}function b(o,m){var n=this.listSelector;if(n){n[o](this,this.itemsContainerNode,m);}}function M(n,o){var m=false;if(n.itemsContainerNode){U.forEach(n.ctxtBuilder.itemWidgets,function(p){if(H.contains(p.itemsContainerNode,o,p.domNode)){m=true;}});}return m;}mstrmojo.vi.ui.BrowserNodesAvatarContent=G.newComponent(mstrmojo.vi.ui.UnitList,null,{getItemProps:function(o,m){var n=this._super(o,m);n.addCls("isAvatar");return n;}});mstrmojo.vi.ui.TreeBrowserSelector=I.copy({premousedown:function(n,o,m){n.tree._selectNode=H.eventTarget(m.hWin,m.e);},premouseup:function D(x,m,AA){if(H.isPrimaryMouseBtn(AA.e)){var q=AA.hWin,t=AA.e,u=H.eventTarget(q,t),o=H.shiftKey(AA.hWin,AA.e),z=x._shiftStartIndex,r=M(x,u),v=x.listMapper.findIndex(x,m,u);if(v>-1&&!r&&x.tree._selectNode===u){var n=U.indexOf(f,x.items[v].t)!==-1;if(o&&z>-1&&n){x.rangeSelect(v);}else{x.toggleSelect(v);if(x.selectedIndices[v]&&n){x._shiftStartIndex=v;}}}}}},mstrmojo.TreeBrowserSelector);mstrmojo.vi.ui.TreeBrowser=G.newComponent(mstrmojo.TreeBrowser,[mstrmojo.vi.ui._HasUnitListAvatar],{containerResizable:false,draggable:true,avatarCssClass:"mstrmojo-VIUnitList",rangeSelect:L,_selectNode:null,_shiftStartIndex:-1,blockBegin:1,blockCount:50,getContent:function(n,r){n=n||this;var o=(n===this),m=this,t=function(u){if(o){mstrmojo.css.removeClass(m.domNode,["loading"]);}m.updateTreeContent(n,u);},p=function(u){n.contentRetrieved=true;n.set("items",[m.failItemCreaterFunc()]);mstrmojo.err(u);},q={success:t,failure:p};if(o){mstrmojo.css.addClass(m.domNode,["loading"]);}if(mstrApp.objectsBlockCount){this.blockCount=parseInt(mstrApp.objectsBlockCount,10);}this.getContentThroughTaskCall({isRoot:o,data:n.data,blockBegin:r||n.blockBegin,blockCount:parseInt(mstrApp.objectsBlockCount,10)||m.blockCount},q);},getDragData:function j(n){n.dragUnitHelper=new mstrmojo.vi.ui.VIDragUnit();var q=this,r=function(w){U.forEach(w.ctxtBuilder.itemWidgets,function(x){var z=H.eventTarget(n.src.hWin,n.src.e);if(z&&H.contains(x.itemsContainerNode,z,true,x.itemsContainerNode)){q=x;r(x);return false;}});};r(this);var o=h(q,n);var t=o?this.getSelectedItems().filter(function(w){return U.indexOf(f,w.t)!==-1;}):null;var m=this.id,p=function p(w){var AA=mstrmojo.all[m],x=AA.avatar;if(x){var z=[AA.avatarCssClass,"hasOwnAvatar",w];x.className=z.join(" ");}};return{items:t,item:t&&t[0],src:mstrmojo.vi.models.EnumDragSources.ALL_OBJECT_LIST,setAvatarClass:function u(w){p(w);},setInvalidAvatarClass:function v(){p("icn clsx_sub");}};},getSelectedItems:function(){var m=this.ctxtBuilder,n=[];if(m){U.forEach(m.itemWidgets,function(o){if(o.state===1){n=n.concat(o.getSelectedItems());}});}n=(this._super()||[]).concat(n);return n;},createAvatar:function(o,n){var m=document.createElement("div");this.avatarContent=new mstrmojo.vi.ui.BrowserNodesAvatarContent({items:n.src.data.items});this.avatarContent.render();A.addClass(this.avatarContent.domNode,[F.getThemeClass.call(this)]);m.appendChild(this.avatarContent.domNode);return m;},ondragend:function(m){this._super(m);if(this.avatarContent&&this.avatarContent.destroy){this.avatarContent.destroy();}delete this.avatarContent;},isDragValid:function S(n){var m=n.src.data.items;return(m&&m.length)||this._super(n)||false;},contentRetrieved:false,onvisibleChange:function(){if(!this.contentRetrieved){this.getContent(this);}}});mstrmojo.vi.ui.TreeBrowserNode=G.newComponent(mstrmojo.TreeBrowserNode,[{_mixinName:"newClass"}],{containerResizable:false,draggable:false,_shiftStartIndex:-1,rangeSelect:L,premousedown:function(m){this.tree._selectNode=H.eventTarget(m.hWin,m.e);},premouseup:function(n){if(H.isPrimaryMouseBtn(n.e)){var r=H.isMetaKey(n.hWin,n.e),q=H.shiftKey(n.hWin,n.e),t=H.eventTarget(n.hWin,n.e),u=H.contains(this.itemsContainerNode,t,true,this.domNode),p=u&&M(this,t),o=(this.state===2),m=!o&&(t!==this.stateNode&&t!==this.textNode)&&!u;if(p||this.tree._selectNode!==t){return ;}if((!r&&!q)||this.tree.isSelectedFolder||m){this.tree.clearTreeSelect();}if(m){this.tree.isSelectedFolder=true;}else{if(!u){this.tree.isSelectedFolder=false;}}if(!o&&(t===this.stateNode||t===this.textNode)){this.toggleState();this.tree.updateScroller();H.stopPropogation(n.hWin,n.e);}else{if(u){b.call(this,"premouseup",n);}else{this.handleNodeClicked();}}}},getSelectedItems:function(){var m=this.ctxtBuilder,n=[];if(m){U.forEach(m.itemWidgets,function(o){if(o.state===1){n=n.concat(o.getSelectedItems());}});}n=(this._super()||[]).concat(n);return n;}});function Y(o){var n=this;return I.copy(o,{scriptClass:"mstrmojo.vi.ui.TreeBrowser",alias:"contents",slot:"containerNode",isSelectedFolder:false,browserNodeClass:mstrmojo.vi.ui.TreeBrowserNode,noCheckBox:true,itemIdField:"did",useRichTooltip:true,dataProvider:this.dataProvider,listSelector:mstrmojo.vi.ui.TreeBrowserSelector,showTooltip:function r(u,AB){var AA=u.target||H.eventTarget(u.hWin,u.e),z=H.findWidget(AA),x=z.data;if(x&&x.n){var v=z.domNode.firstChild;var w='<div class="name">'+g.encodeHtmlString(x.n,true)+"</div>"+(x.desc?'<div  class="dsc">'+g.encodeHtmlString(x.desc,true)+"</div>":"");var t=H.position(v);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",content:w,top:t.y-4,left:t.x+t.w+6};this.constructor.prototype.showTooltip.call(this,u,AB);}},updateScroller:function(){n.updateScrollbars();},isBranch:function(t){return t.t===8;},items:null,bindings:{data:"this.parent.rootFolder"},setDimensions:mstrmojo.emptyFn,item2textCss:function m(u){var w={8:"folder",3:"report",12:"attribute",4:"metric",47:"consolidation",1:"custom-group",0:"no-obj"},t=mstrmojo.TreeBrowser.prototype.item2textCss(u)||w[u.t],v=this.parent&&this.parent.highlightItems;if(v&&v.indexOf(u.did)!==-1){t+=" highlight";}return t;},onnodechange:function q(t){this.constructor.prototype.onnodechange.call(this,t);this.parent.onSelectedItemsChange(t);},getTotalSelections:function(){return[];},getContentThroughTaskCall:function p(AB,x){var t=this.parent,w=AB.data||{fty:t.rootFolderType},v=AB.isRoot,u=t.folderList,z=AB.blockBegin,AA=AB.blockCount;this.dataProvider.fetchFolderContents({sId:mstrApp.sessionState,browsableTypes:t.getObjectSubTypes().join(","),includeObjectDesc:true,folderLinksContextId:t.folderLinksContextId||29,blockCount:AA||50},{fid:w.did,fty:w.fty,blockBegin:z||1},{success:function(AD){var AC=AD.items?AD.items.filter(function(AF){return AF.t===8||X(AF);}):[];x.success({items:AC.length?AC:[J],sz:AD.sz,bb:AD.bb,bc:AD.bc});if(v&&!u.initialized){u.set("items",AD.sc);var AE=U.find(AD.sc,"did",AD.did);if(AE!==-1){u.set("selectedIndex",AE);}}u.initialized=true;n.updateScrollbars();},failure:x.failure});}});}function d(n,o){if(n.state===2){var m=n.data;A.toggleClass(n.textNode,"highlight",m&&(o.indexOf(m.did)!==-1));}else{n.ctxtBuilder.itemWidgets.forEach(function(p){d(p,o);});}}mstrmojo.vi.ui.AllObjectsBrowser=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi.ui._IsViPanel,mstrmojo.ui._HasScroller,mstrmojo.vi.ui.toolbars._HasToolbar,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.vi.ui.AllObjectsBrowser",markupString:'<div id="{@id}" class="mstrmojo-VIPanel mstrmojo-VIAllObjectsBrowser {@cssClass}" style="{@cssText}"><div class="mstrmojo-VIPanel-titlebar"></div><div class="filter"></div><div class="search-box"></div><div class="horizontal-line"></div><div class="mstrmojo-VIPanel-contentContainer"><div style="overflow:hidden;"><div class="mstrmojo-VIPanel-content"></div></div></div></div>',markupSlots:{titlebarNode:function k(){return this.domNode.firstChild;},filterNode:function B(){return this.domNode.childNodes[1];},searchBox:function Q(){return this.domNode.childNodes[2];},contentNode:function l(){return this.domNode.childNodes[4].firstChild;},containerNode:function T(){return this.domNode.childNodes[4].firstChild.firstChild;}},title:mstrmojo.desc(5679,"All Objects"),model:null,rootFolder:null,rootFolderType:null,highlightItems:null,getObjectSubTypes:function(){var m=[2048,3072,1024];if(!mstrApp.isSingleTier){m.push(12032);m.push(257);m.push(2560);}return m;},layoutConfig:{h:{titlebarNode:"30px",filterNode:"30px",searchBox:"33px",containerNode:"100%"},w:{titlebarNode:"100%",searchBox:"100%",containerNode:"100%"},xt:true},opened:false,dataProvider:null,onSelectedItemsChange:mstrmojo.emptyFn,onopenedChange:function(){if(!this.searchList&&this.opened){var m=this.folderList,n=m.getSelectedItem(),o=this.rootFolder;if(n&&o&&n.did!==o.did){m.initialized=false;}this.addChildren([Y.call(this,{ondataChange:function(){if(this.data){this.getContent(this);}},ondblclick:this.dblClickOnNodes.bind(this)}),Y.call(this,{alias:"searchList",visible:false,contentRetrieved:true,ondblclick:this.dblClickOnNodes.bind(this)})]);}},reset:function(){if(this.contents){this.removeChildren(this.contents);}if(this.searchList){this.removeChildren(this.searchList);}},dblClickOnNodes:function N(n){var q=n.getTarget(),p=H.findWidget(q).data,o=this.model,m=o.getSelectedViUnit();if(m&&p&&U.indexOf(f,p.t)!==-1){this.dataProvider.loadObjects([p],{success:function(){var r=a.getCfgForAddUnitFromAllObject([p],o.datasets);if(m){m.getZonesModel().addUnitsFromDataSource([p],r.dsid,r.actions,o.getDatasetsUpdateCallback());}}},true);}},getSelectedItems:function K(){var n=this.contents,m=n.visible?n:this.searchList;return m.getSelectedItems();},getLayoutOffsets:function(){return{w:18,h:0};},children:[{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",cssClass:"vi-allObjects-tb",slot:"titlebarNode",alias:"titleBar",editTitleOnDoubleClick:false,getLayoutOffsets:function(){return{w:0,h:5};},onclick:function V(){this.close();},close:function(){this.parent.close();},bindings:{title:"this.parent.title"}},{scriptClass:"mstrmojo.ui.Pulldown",slot:"filterNode",alias:"folderList",initialized:false,getLayoutOffsets:function(){return{w:0,h:9};},onitemSelected:function(m){if(this.initialized){this.parent.set("rootFolder",m);this.parent.obSearchBox.clearSearch(true);}}},{scriptClass:"mstrmojo.ui.SearchBox",slot:"searchBox",alias:"obSearchBox",getLayoutOffsets:function(){return{w:0,h:13};},searchTriggered:function O(r){this.text=r;if(!r){this.clearSearch(true);return ;}var m=this.parent,p=m.contents.visible?m.contents:m.searchList,u=p.getSelectedItems(),n=m.folderList,o=this.parent.dataProvider,t=n.items[n.selectedIndex].did,q=this;u.forEach(function(v){if(v.t===8){t=v.did;return false;}});A.addClass(p.domNode,["loading"]);o.fetchFolderContents({browsableTypes:m.getObjectSubTypes().join(","),includeObjectDesc:true,folderLinksContextId:m.folderLinksContextId||29,blockCount:50,enableQuickSearch:!!(mstrApp.useQuickSearch&&mstrApp.useQuickSearch())},{fid:t,searchPattern:r,recursive:1},{success:function(v){A.removeClass(p.domNode,["loading"]);if(q.inputNode.value===r){m.contents.set("visible",false);m.searchList.set("visible",true);(m.searchList||this).set("items",v.items||[R]);m.updateScrollbars();}}});},onkeyup:function e(n){var m=n.hWin,o=n.e||m.event;if((mstrApp.useQuickSearch&&mstrApp.useQuickSearch())||((o.keyCode===13||o.keyCode===27||!this.inputNode.value))){this.constructor.prototype.onkeyup.call(this,n);}},postClearSearch:function(){var m=this.parent,o=m.contents,n=m.searchList;if(o){o.set("visible",true);}if(n){n.set("visible",false);}}}],getDropAvatarIcon:function C(m){return" ";},passToolbarCfg:function E(m){this.titleBar.set("toolbarCfg",m);},updateToolbar:function Z(m){m.hasCloseButton=true;m.closeButtonText="";return m;},onhighlightItemsChange:function W(){var m=this.highlightItems;if(m){d(this.contents,m);d(this.searchList,m);}},setupScrollNodes:function c(){this.scrollNode=this.containerNode;},updateScrollbars:function(){this._super();if(this.scrollNode&&this.hasCustomScrollbar){var n=this.scrollNode,m=H.getComputedScrollbarWidth(n);n.style.marginRight=-m+"px";n.style.paddingRight=m+"px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo._HasPopup","mstrmojo.Popup","mstrmojo.hash","mstrmojo.expr","mstrmojo.Container","mstrmojo.ConditionModel","mstrmojo.Widget","mstrmojo.Button","mstrmojo.ui.ColumnWalk","mstrmojo.rw.ConditionWalk","mstrmojo.mstr.EnumNodeDimty","mstrmojo.vi.ui.ConditionWalkProvider","mstrmojo.vi.ui.AllObjectsBrowser");var T=mstrmojo.Widget,M=mstrmojo.array,G=mstrmojo.dom,Q=mstrmojo.hash,a=mstrmojo.css,U=mstrmojo.Button.newWebButton,L=mstrmojo.expr,C=L.ET,A=mstrmojo.mstr.EnumNodeDimty,N=M.hash([A.NodeDimtyOutputLevel]);var O=mstrmojo.rw.ConditionWalk.getAttForms,E=mstrmojo.rw.ConditionWalk.isMdxDM;function F(){var c=this.model;if(c){if(!c.attachEventListener){Q.make(c,mstrmojo.ConditionModel,{defaultETAttr:c.defaultETAttr,data:c.data});}c.attachEventListener("edit",this.id,"onmodeledit");}}function P(d,c){if(c&&c.detachEventListener){c.detachEventListener("edit",d.id,"onmodeledit");}}mstrmojo.vi.ui.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.vi.ui.ConditionWalk",markupString:'<div id="{@id}" class="mstrmojo-vi-ui-ConditionWalk" mstrAttach:click><div class="walk"></div></div>',markupSlots:{walkNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:T.visibleMarkupMethod,onheightChange:T.heightMarkupMethod,onwidthChange:T.widthMarkupMethod},layoutConfig:{h:{walkNode:"100%"},xt:true},editor:undefined,columnWalk:undefined,walkProvider:null,objectBrowsingEnabled:false,children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"370px",width:"600px"}],postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=this.addDisposable(mstrmojo.insert(mstrmojo.vi.ui.ConditionWalkProvider));}},initWalk:function V(){var c=this.columnWalk,d=this.walkProvider;c.removeTrailingContainer(-1);c.addNextColumn(d.getTargetNodeProps());c.target.updateColumnContainer();this.updateOkBtn();},ob:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-vi-ui-ConditionWalk ObjectBrowserPopup mojo-theme-light",children:[{scriptClass:"mstrmojo.vi.ui.AllObjectsBrowser",alias:"browser",title:mstrmojo.desc(5298,"Select an Object"),layoutConfig:null,onSelectedItemsChange:function K(){var c=this.getSelectedItems(),d=c&&c[0],e=d&&d.t;this.parent.buttons.selectBtn.set("enabled",e&&e!==L.TP.FOLDER);},browse:function R(c){Q.copy(c,this);},getObjectSubTypes:function(){var c=this.browsableTypes;if(c){return c.split(",");}return this.constructor.prototype.browsableTypes();},dblClickOnNodes:function Z(c){var f=this.onSelectCB,e=c.getTarget(),d=G.findWidget(e).data;f[0][f[1]](d);}},{scriptClass:"mstrmojo.Box",alias:"buttons",cssClass:"buttons",children:[U(mstrmojo.desc(221,"Cancel"),function(){this.parent.parent.opener.closePopup();}),U(mstrmojo.desc(547,"Select"),function(){var e=this.parent.parent,f=e.browser,g=f.onSelectCB,d=f.getSelectedItems(),c=this.parent.parent.opener;if(d&&d.length>0){g[0][g[1]](d[0]);}else{c.closePopup();}},true,{alias:"selectBtn",enabled:false})]}],onOpen:function H(){var g=this.shadowNode,c=document.body,d=document.documentElement,f=g.style,e=this.domNode;this.browser.obSearchBox.clearSearch(true);f.width=Math.max(c.clientWidth,d.scrollWidth)+"px";f.height=Math.max(c.clientHeight,d.scrollHeight)+"px";window.setTimeout(function(){a.addClass(e,"open");},1);},onClose:function D(){a.removeClass(this.domNode,"open");var c=this.browser;c.opened=false;c.reset();}},_set_model:function Y(f,c){var d=this.model,e=(c!==d);if(e){P.call(this,d);c.dimtyTypes=this.dimtyTypes||N;this.model=c;F.call(this,c);this.initWalk();}return e;},onmodeledit:function J(d){var c=this.columnWalk[d.prop==="c1"?"c0":d.prop];if(d.prop==="fm"){c=this.columnWalk.target;}if(c){c.updateColumnContainer();}this.updateOkBtn();this.postmodeledit(d);},postmodeledit:mstrmojo.emptyFn,updateOkBtn:function b(){var f=true,c=this.model,d,e=c&&L.fnCstCount(c.fn,c.fnt);if(!c){return ;}switch(c.et){case C.AQ:case C.AL:case C.MQ:for(d=0;d<e;d++){f=f&&!this["invalid"+d];}break;}f=f&&!!c.completed;this.delegateUpdateOkBtn(f);},delegateUpdateOkBtn:mstrmojo.emptyFn,browse:function I(e){var g=this.parent.editorNode,f=function(j,l){var h=G.position(j,true),k=G.position(l,true);return{x:h.x+h.w,y:k.y};},c=this.columnWalk,d=this.walkProvider;switch(e&&e.alias){case"target":case"dmy":d.browseObjs(this,e);break;case"c0":case"c1":d.browseObjs(this,e);break;case"es":d.browseEs(this,e,f(c.es.domNode,g));break;}},onOBSelect:function(h){var k=h.t;if(k===L.TP.FOLDER||k===0||k===undefined){return ;}var e=this.ob.browser,l=e.target;this.closePopup();if(l.alias==="c0"){l=l.attMxPd;}var d=this.targets,j=l.itemIdField,g=d||[],c=M.find(d,j,h[j]);if(c===-1){g.push(h);this.targets=g;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}l.list.set("selectedIndex",M.find(l.items,"did",h.did));if(l.onObjBrowsed){l.onObjBrowsed(h);}},getDatasets:mstrmojo.emptyFn,getAttributeForms:function W(e){var d=this.editor;if(d&&d.getAttributeForms){return d.getAttributeForms(e);}var c=this.getDatasets();return O(e,c);},getAttributeInfo:function X(c){var d,f=this.editor;if(f&&f.model&&f.model.targets){M.forEach(f.model.targets,function(g){if(g.did===c){d=Q.clone(g);return false;}});}else{var e=this.getDatasets();Q.forEach(e,function(g){d=Q.clone(g.att.filter(function(h){return h.did===c;})[0]);if(d){return false;}});}if(d){d.fs=this.getAttributeForms(c);}return d?d:{};},isMDXDM:function S(c){return E(c,this.getDatasets());},getIfDataSource:mstrmojo.emptyFn,onUpdateBrowseElementsParams:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.editors.BaseEditorModel","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.ui.editors.controls.XtabResizeGroup","mstrmojo.ui.editors.CharacterToolbarPopup","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.Label","mstrmojo.hash","mstrmojo.array","mstrmojo.VisUtility","mstrmojo.color","mstrmojo.models.FormatModel","mstrmojo.models.template.DataInterface");mstrmojo.requiresDescs(15191,15192,15193,15230,15231,15232,15792);var A=2,H=3,J=4,t=5,D=5000;var AE=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,h=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,q=mstrmojo.models.FormatModel.getFormatUpdate,P=mstrmojo.hash,Y=mstrmojo.array,z=mstrmojo.VisUtility;var b={};b[A]="ch";b[H]="rh";b[J]="va";var B="st";var c={};c[H]="SUBTOTAL_FORMAT_USE_ROWHEADERS";c[A]="SUBTOTAL_FORMAT_USE_COLUMNHEADERS";c[J]="SUBTOTAL_FORMAT_USE_VALUES";var I={left:2,center:3,right:4,justify:6};function Z(AF){return Object.keys(AF).length===0;}function a(){var AF=this.getHost().gridData,AG=AF&&AF.gsi;return(AG&&AG.fmts)||{};}function S(){var AH=this.getHost(),AF=AH.gridInfo&&AH.gridInfo.prop&&AH.gridInfo.prop.sb,AG=function(AI){AH.showBanding(AI);};return this.getCheckboxAndLabel(!!AF,mstrmojo.desc(15758,"Enable Banding"),AG);}var AA=function AA(){var AF=this.getHost();AF.showOutlineModeOption(true);};function x(){var AK=this.getHost(),AH=AK.gridData,AJ=this,AF=AH.olm&&!(AH.rw&&AH.rw.row.bc>0),AI=function AI(AL){var AM=parseInt(AK.rhsCP&&AK.rhsCP.rc||0,10);if(AL&&AM&&AM>mstrmojo.vi.models.editors.XtabEditorModel.ENUM_MAX_ROWS_OUTLINE){var AO=function AO(AP){AP.checked=false;};var AN=this;mstrmojo.confirm(mstrmojo.desc(15792,"The dossier will attempt to display more than 5000 rows in outline mode. This may affect performance and stability. Do you want to continue?"),null,{id:"OutlineModeWarningDialog",title:mstrmojo.desc(15759,"Enable Outline"),allowHTML:false,buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(212,"Continue"),AA.bind(AJ)),mstrmojo.Button.newWebButton(mstrmojo.desc(3416,"Cancel"),AO(AN))],onPreClose:function(){AO();return true;}});}else{AK.showOutlineModeOption(AL);}},AG=this.getCheckboxAndLabel(!!AF,mstrmojo.desc(15759,"Enable Outline"),AI);if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||AK.model.hasRecursiveAttribute(AH)){AG.set("enabled",false);}return AG;}function AD(AF,AG){return this.getButtonBar([{n:mstrmojo.desc(7575,"Top"),v:1,css:"top"},{n:mstrmojo.desc(8631,"Middle"),v:2,css:"middle"},{n:mstrmojo.desc(7576,"Bottom"),v:3,css:"bottom"}],AF[h.VERTICAL_ALIGN]-1,function(AH,AI){AG(AH.v,AI&&AI.v);},{cssClass:"cellAlign"});}function p(AF,AG){return this.getTextAlign(P.keyarray(I).filter(function(AH){return AF[h.TEXT_ALIGN]===I[AH];})[0],AG,I);}function V(AI,AF){var AG=a.call(this),AJ=b[AI];if(!AF){return AG[AJ];}var AH=AG[B]||{};return AH[AJ]||AG[AJ];}function j(AH,AF){var AI=this.getHost(),AG=AI.getSubtotalFormatUseGridFormat(AH);return function(AJ,AK){if(!AF||(AF&&!AG)){AI.formatGridZone(b[AH],q(AJ,AK),{isSubtotalFormat:AF,isSubtotalUseGridFormatting:AG});}else{AI.UpdatePropAndformatGridZone(AH,q(AJ,AK),{isSubtotalFormat:AF,isSubtotalUseGridFormatting:AG});}};}function T(AI,AG){var AF=V.call(this,AI,AG),AJ=j.call(this,AI,AG),AH=function(AK){return function(AL){AJ(AK,AL);};};return[this.getCharacterGroup(AJ,AF),p.call(this,AF,AH(h.TEXT_ALIGN)),AD.call(this,AF,AH(h.VERTICAL_ALIGN)),this.getContainerGroup(AF,AJ,AE.FILL_COLOR,{showBackgroundNoFill:AI===J}),this.getContainerGroup(AF,AJ,AE.BORDER,{borderTitle:mstrmojo.desc(12130,"Horizontal lines"),targetBorder:"bottom"}),this.getContainerGroup(AF,AJ,AE.BORDER,{borderTitle:mstrmojo.desc(12131,"Vertical lines"),targetBorder:"right"}),this.getWrapText(!!AF[h.TEXT_WRAP],AH(h.TEXT_WRAP))];}function E(AG){var AK={};AK[A]=mstrmojo.desc(15232,"Same as Column Headers");AK[H]=mstrmojo.desc(15231,"Same as Row Headers");AK[J]=mstrmojo.desc(15230,"Same as Values");var AL=this.getHost(),AI=AL.getSubtotalFormatUseGridFormat(AG),AJ=AL.hasSubtotal(AG),AH=function(AM){AL.applyGridCellFormatForSubtotalChange(AM,AG);},AF=[];AF.push(this.getCheckboxAndLabel(AI,AK[AG],AH));if(!AI&&AJ){return AF.concat(T.call(this,AG,true));}return AF;}function L(AH){var AK={};AK[A]=mstrmojo.desc(15191,"Subtotal Column Headers");AK[H]=mstrmojo.desc(15192,"Subtotal Row Headers");AK[J]=mstrmojo.desc(15193,"Subtotal Values");var AF=[this.getGroupTitle(AK[AH])].concat(E.call(this,AH)),AG=AF.slice(),AJ=this.getHost(),AI=AJ.hasSubtotal(AH);if(!AI){z.toggleControlEnabled(AG,false);}return AF;}function Q(AF,AG){this.replaceChildControls(AF,[this.getEditorGroup(T.call(this,AG)),this.getEditorGroup(L.call(this,AG))]);}var G="#fff";function AB(AG){var AJ=AG?AG.c1||AG:"",AI=mstrmojo.color.getLuminance(AJ),AF=255,AK=121.71921,AH=Math.max(AF/AI,AI/AF),AM=Math.max(AK/AI,AI/AK),AL="#35383a";if(AH>=AM){return G;}return AL;}var w={FMT_GROUP_GRID_COLOR:{type:[b[A],"st.ch"],props:[h.BACKGROUND_COLOR,h.BORDER_BOTTOM_COLOR,h.BORDER_BOTTOM_COLOR]},FMT_GROUP_GRID_STYLE:{type:[b[A],b[H],b[J],"st.ch","st.rh","st.va"],props:[h.BORDER_BOTTOM_STYLE,h.BORDER_RIGHT_STYLE]}};var O={GRAY:mstrmojo.desc(null,"Gray"),BLUE:mstrmojo.desc(null,"Blue"),NAVY:mstrmojo.desc(null,"Navy Blue"),EMERALD:mstrmojo.desc(null,"Emerald"),ORANGE:mstrmojo.desc(null,"Orange")},f={GRAY:"gray",BLUE:"blue",NAVY:"navy",EMERALD:"emerald",ORANGE:"orange"},W={FLAT:mstrmojo.desc(7805,"Flat"),CLASSIC:mstrmojo.desc(125,"Classic"),CUSTOM:"Custom"},C={FLAT:"flat",CLASSIC:"classic",CUSTOM:"custom"};var AC={},m=AB(G);AC[C.FLAT]=[{n:O.GRAY,css:f.GRAY,iconBc:"#d1d1d1",fc:m,bc:G,bbc:"#ababab",brc:"#ebebeb",stbc:"#f8f8f8"},{n:O.BLUE,css:f.BLUE,iconBc:"#1c8dd4",fc:m,bc:G,bbc:"#1c8dd4",brc:"#ebebeb",stbc:"#f1f9f2"},{n:O.NAVY,css:f.NAVY,iconBc:"#193b67",fc:m,bc:G,bbc:"#193b67",brc:"#ebebeb",stbc:"#f2f4f6"},{n:O.EMERALD,css:f.EMERALD,iconBc:"#38ae6f",fc:m,bc:G,bbc:"#38ae6f",brc:"#ebebeb",stbc:"#f4fbf6"},{n:O.ORANGE,css:f.ORANGE,iconBc:"#e69912",fc:m,bc:G,bbc:"#e69912",brc:"#ebebeb",stbc:"#fef8f1"}];AC[C.CLASSIC]=[{n:O.GRAY,css:f.GRAY,iconBc:"#d1d1d1",bc:"#f5f5f5",bbc:"#ebebeb",brc:"#ebebeb",fc:AB("#f5f5f5"),stbc:"#f8f8f8"},{n:O.BLUE,css:f.BLUE,iconBc:"#1c8dd4",bc:"#1c8dd4",bbc:"#187ab8",brc:"#187ab8",fc:AB("#1c8dd4"),stbc:"#f1f9fe"},{n:O.NAVY,css:f.NAVY,iconBc:"#193b67",bc:"#193b67",bbc:"#50698b",brc:"#50698b",fc:AB("#193b67"),stbc:"#f2f4f6"},{n:O.EMERALD,css:f.EMERALD,iconBc:"#38ae6f",bc:"#38ae6f",fc:AB("#38ae6f"),bbc:"#29965d",brc:"#29965d",stbc:"#f4fbf6"},{n:O.ORANGE,css:f.ORANGE,iconBc:"#e69912",bc:"#e69912",fc:AB("#e69912"),bbc:"#ca850a",brc:"#ca850a",stbc:"#fef8f1"}];var v={rh:{bc:"#fff",bbc:"#ebebeb",brc:"#ebebeb"},va:{bc:"#fff",bbc:"#ebebeb",brc:"#ebebeb"},st:{rh:{bc:"#f8f8f8",bbc:"#ebebeb",brc:"#ebebeb"},va:{bc:"#f8f8f8",bbc:"#ebebeb",brc:"#ebebeb"}}};var o={};function N(AF){if(!o[AF]){o[AF]=mstrmojo.color.encodeColor(AF);}return o[AF];}function R(AG,AF){return(AG.substring&&AG.substring(0,1)==="#")?N(AG)===N(AF):AG===AF;}function n(AG,AH){var AF=true;P.forEach(AG,function(AJ,AI){if(AH[AI]===undefined){AF=false;}else{if(typeof AH[AI]==="object"){if(Z(AH[AI])){AF=true;}else{AF=n(AJ,AH[AI]);}}else{AF=R(AH[AI],AJ);}}if(!AF){return false;}});return AF;}function e(AH,AG){var AK=-1,AF=AK,AJ=w.FMT_GROUP_GRID_COLOR.type,AI=w.FMT_GROUP_GRID_COLOR.props;if(!n(v,AH)){return AF;}Y.forEach(AG,function(AM,AL){AF=AL;Y.forEach(AJ,function(AO){var AN=P.walk(AO,AH);Y.forEach(AI,function(AP){if(!R(AN[AP],AM[AP])){AF=AK;return false;}});if(AF===AK){return false;}});if(AF!==AK){return false;}});return AF;}var M=[],F={};F[C.FLAT]=0;F[C.CLASSIC]=1;F[C.CUSTOM]=-1;var U="1pt solid",g="none";M[F[C.FLAT]]={id:C.FLAT,n:W.FLAT,css:C.FLAT,brs:g,bbs:U};M[F[C.CLASSIC]]={id:C.CLASSIC,n:W.CLASSIC,css:C.CLASSIC,brs:U,bbs:U};function K(AF){var AG=w.FMT_GROUP_GRID_STYLE,AJ=AG.props,AH=AG.type,AI=null,AK=function(AL){if(AL===U){return 1;}else{if(AL===g){return 0;}}return -1;};Y.forEach(M,function(AL){AI=AL.id;Y.forEach(AH,function(AN){var AM=P.walk(AN,AF);if(Z(AM)){return true;}Y.forEach(AJ,function(AO){if(AM[AO]!==AK(AL[AO])){AI=null;return false;}});if(!AI){return false;}});if(AI){return false;}});return AI||C.CUSTOM;}function d(AF,AG){var AH=[b[A],"st.ch"],AJ=h.BACKGROUND_COLOR,AI;return AH.every(function(AK){AI=P.walk(AK,AF)[AJ];return AI&&R(AI,AG);});}function X(){var AN=this,AU=this.getHost(),AP=AU.gridData,AQ=AP&&AP.gsi&&AP.gsi.fmts,AI=d(AQ,G),AM=K(AQ),AJ=AM===C.CUSTOM?(AI?C.FLAT:C.CLASSIC):AM,AT=AC[AJ],AL=e(AQ,AT),AF=AL<0?AT[0].css:AT[AL].css,AS=AN.getLabelAndControl(mstrmojo.desc(6242,"Color"),new mstrmojo.ui.CheckList({items:AT,selectedIndex:AL,hideCheckMark:true,cssClass:"color",orientation:"h",multiSelect:false,itemMarkup:null,postselectionChange:function AK(AW){var AX=AW.added[0],AV=this.items[AX];AU.formatGridColor(v,AV);},getItemMarkup:function AR(AV){if(!this.itemMarkup){this.itemMarkup=mstrmojo.ui.List.prototype.getItemMarkup.apply(this,AV).replace('title="{@title}">{@en@n}<','title="{@en@n}"><div class="color" style="background-color: {@en@iconBc}"></div><');}return this.itemMarkup;},getItemProps:function AO(AX,AV){var AW=mstrmojo.ui.CheckList.prototype.getItemProps.call(this,AX,AV);AW.iconBc=AX.iconBc;return AW;}}),"30%","70%",false,{cssClass:"gt-color",showIcon:true,alias:"gtColor"}),AG=AN.getLabelAndControl(mstrmojo.desc(1400,"Style"),new mstrmojo.ui.CheckList({items:M,selectedIndex:F[AM],cssClass:"style",orientation:"v",multiSelect:false,postselectionChange:function AK(AW){var AY=AW.added[0],AV=this.items[AY],AX=(AL)>-1?AC[AV.id][AL]:null;AU.formatGridStyle(AV,AX,v);}}),"30%","70%",false,{cssClass:"gt-style",showIcon:true,alias:"gtStyle"}),AH=new mstrmojo.Box({alias:"gt",cssClass:"gt "+AF,children:[AS,AG]});return AH;}function l(AP){var AV=this.getHost(),AR=AV.gridData,AJ=new mstrmojo.models.template.DataInterface(AR);var AF=new mstrmojo.ui.editors.controls.XtabResizeGroup({});AF.setFormatSource(AV);AV.attachEventListener("xtabColsMeasured",AF.id,function(){AF.setFormatSource(AV);});var AN=AJ.getAggregatePadding(),AL=mstrApp.getThemeProps(mstrmojo.vi.enums.EnumThemeProperties.SUBTYPE.GRID),AK=AL.paddingSize,AS=0,AH=[AK,AK],AQ=AK,AO=false;if(AN){AH=[AN.h,AN.v].sort(function(AY,AX){return AY-AX;});AQ=AH[1];AS=Math.max(Math.min(Math.round((AQ-AK)/AK),2),0);AO=true;}var AT=this.getLabelAndControl(mstrmojo.desc(13579,"Padding"),this.getButtonBar([{n:mstrmojo.desc(12141,"S"),v:AK,css:"small"},{n:mstrmojo.desc(12142,"M"),v:AK*AL.mRatio,css:"medium"},{n:mstrmojo.desc(12140,"L"),v:AK*AL.lRatio,css:"large"}],AS,function(AX){AV.formatPadding(AX.v,AX.v*(AH[0]/AQ),{isSubtotalUseGridFormatting:true});},{cssClass:"cellPadding",showIcon:false}));AT.set("enabled",AO);var AU=this,AG=function(AX,AY){AV.batchFormatGridZones([A,H,J].map(function(AZ){return b[AZ];}),Y.isArray(AY)?AY.map(function(AZ){return q(AX,AZ);}):[A,H,J].map(function(){return q(AX,AY);}),{isSubtotalUseGridFormatting:true});},AI=function(){var AZ=null,AX=a.call(AU),AY=AX[B];[A,H,J].forEach(function(Aa){[AX,AY].forEach(function(Ai){var Ah=Ai&&Ai[b[Aa]]||{},Aj=h.FONT_SIZE,Ab=h.FONT_FAMILY,Af=h.COLOR,Ac=h.FONT_WEIGHT,Ae=h.UNDERLINE,Ad=h.FONT_STYLE,Ag=h.LINE_THROUGH;if(Z(Ah)){return ;}if(!AZ){AZ=P.copy(Ah);AZ[Aj]=Y.ensureArray(AZ[Aj]);}else{AZ[Aj].push(Ah[Aj]);if(AZ[Ab]!==Ah[Ab]){AZ[Ab]=-1;}if(AZ[Af]!==Ah[Af]){delete AZ[Af];}[Ac,Ae,Ad,Ag].forEach(function(Ak){AZ[Ak]=AZ[Ak]||Ah[Ak];});}});});return AZ;},AW=[],AM=[this.getEditorGroup([]),this.getEditorGroup([S.call(this),x.call(this)]),AL.gridTemplateVisible?this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(16044,"Grid Template")),X.call(this)]):null,this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(14006,"All Grid Fonts")),this.getCharacterGroup(AG,AI(),23),this.getGroupTitle(mstrmojo.desc(12129,"Grid Size")),AT,AF]),this.getEditorGroup([this.getMoreOptionsEditorLink(AR&&AR.gsi&&AR.gsi.prop,true,AR&&AR.lhv)])];AW=AW.concat(AM);this.replaceChildControls(AP,AW);}mstrmojo.vi.models.editors.XtabEditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.BaseEditorModel,null,{scriptClass:"mstrmojo.vi.models.editors.XtabEditorModel",help:"format_panel_grid.htm",getInitialTarget:function r(){return t;},getTargetPulldownItems:function k(AH){var AL=this.getHost(),AJ=AL.gridInfo,AK=this._super(AH);if(AJ&&(AJ.rows.length||AJ.cols.length)){var AF=AL.getFormats(),AG=Q.bind(this,AH);AK.unshift({n:mstrmojo.desc(6560,"General Settings"),v:t,h:l.bind(this,AH)});if(AF){var AI=a.call(this);if(AI){if(AI.ch){AK.push({n:mstrmojo.desc(12132,"Column Headers"),v:A,h:AG});}if(AI.rh){AK.push({n:mstrmojo.desc(12133,"Row Headers"),v:H,h:AG});}if(AI.va){AK.push({n:mstrmojo.desc(12134,"Values"),v:J,h:AG});}}}}return AK;},getFormattingToolbar:function u(AF,AI,AJ){var AO=this.getHost(),AG=AO.model,AN=AO.getCellForNode(AI),AM=(AF===J&&AG.isSubtotalValue(AN)),AH=(AN&&AN.stt===1)||AM,AK=V.call(this,AF,AH);if(AK){var AL=new mstrmojo.ui.editors.CharacterToolbarPopup(P.copy({onGroupValueChange:j.call(this,AF,AH),textAlignValueMap:I,anchorElement:AI},AJ));AL.setFormatSource(AK);return AL;}return this._super(AF,AI,AJ);}});mstrmojo.vi.models.editors.XtabEditorModel.ENUM_EDITOR_TARGETS={GENERAL:t,COLUMNS:A,ROWS:H,VALUES:J};mstrmojo.vi.models.editors.XtabEditorModel.ENUM_TARGET_FORMAT=b;mstrmojo.vi.models.editors.XtabEditorModel.ENUM_TARGET_SUBTOTAL_FORMAT_PROPNAME=c;mstrmojo.vi.models.editors.XtabEditorModel.ENUM_MAX_ROWS_OUTLINE=D;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.MetricSlider","mstrmojo.MetricQualification","mstrmojo.SearchBoxSelector","mstrmojo.TextBoxSelector","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.string","mstrmojo._IsSelectorTarget","mstrmojo.elementHelper","mstrmojo.MetricSelectorUtility","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi._MonitorsAppState","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSConsolidationType");mstrmojo.requiresDescs(4729,4730,4732,4733,4734,4735,5225,5443,6738,8967,12297);var U=mstrmojo.array,Z=mstrmojo.hash,AJ=mstrmojo.dom,Aq=mstrmojo.expr,AV=Aq.BFTP,An=Aq.TP,h=Aq.STP,A6=mstrmojo.css,AW=mstrmojo.MetricSelectorUtility,Ad=mstrmojo.vi.ui.DatasetUnitMenuUtils,Ar=0,Al=1,Av=2,Ac=3,AF=4,AL=5,Af=6,z=7,Aa=8,Ah=9,g=10,B=11,j=12,A7=mstrmojo.elementHelper,w=A7.ELEM_ALL_ID,A9=mstrmojo.func.wrapMethods,Q=mstrmojo.string.escapeIllegalXML,AG=mstrmojo.mstr,H=AG.EnumDSSXMLBaseFormType.DssXmlBaseFormHTMLTag,J=AG.EnumDSSConsolidationType,b=AG.EnumDSSXMLObjectTypes,AS=An.FILTER,X=An.METRIC,Ab=An.ATTR,A4=An.CONS,At=0,Ax=h.NDE,Ai=3076,x=3077,G=h.CUSTOMGROUP,AA=A7.ELEM_ALL,AN=338;mstrmojo.DocSelectorEvtType=null;var l={};l[z]="MetricSlider";l[Aa]="MetricQualification";l[Ah]="SearchBoxSelector";l[g]="TextBoxSelector";var BD=2;var AQ=function AQ(){var BE={type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,tks:this.tks,include:this.include,isUConDS:!!this.defn.dsTks};if(this.style===Aa||this.style===z){mstrmojo.hash.copy(BE,{srcid:this.srcid,srct:this.type,f:this.f,ft:this.ft,qt:this.qt,unset:!!this.unset,cs:this.cs});}return BE;},Aj=function Aj(){var BF=this.node,BH=BF&&BF.data,BE=BF&&BF.defn,BG=BE&&BE.srct;return((mstrApp.isAppStatePause&&mstrApp.isAppStatePause())||mstrConfig.resolveOnly)&&this.style!==Ah&&BG&&this.hasAttrData()&&!BH[C.ELMSREADY]&&!BH[C.ELMSREQUEST]&&parseInt(BE.ds,10)===At&&!BH[C.DISABLED];},Ag=function Ag(BE){var BH=this.node.defn,BK=this.node.data,BG=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,BL={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:BH.srcid||"",dataSourcesXML:BH.dsrc||"",browseFlags:1};if(!BH.srcid){return ;}var BF=function(BP){var BM=this.model,BO=BM.datasets,BN=Object.keys(BO),BR=[],BQ;U.forEach(BN,function(BS){BR=BO[BS].att;U.forEach(BR,function(BT){if(BT&&BT.did===BP){BQ=BS;return false;}});if(!!BQ){return false;}});return BQ;};if(!BE){BL.datasetID=BH.dsid||BF.call(this,BH.srcid);BL.messageID=this.model.mid;if(!BL.datasetID){return ;}}var BJ=this,BI={success:function(BM){BJ.bGetElems=true;BJ.set("wait",false);if(BM&&BM.es){BK.elms=(BH.srcid)?A7.buildElemsTerseID(BM.es,BH.srcid,true):BM.es;if(BG){BJ.toggleDisplayAll(BH.showall);}var BN=BJ.parent,BO=BN&&BN.parent;if(BH.sec&&BK.ces&&BK.elms&&BK.elms.length>0&&BN){BN.set("count",A7.buildElemsCountStr(BK.ces,BK.elms,BJ.isSelectionExcluded()));}if(BJ.isInvalid){BJ.isInvalid=false;}if(BJ.hasRendered){BJ.refresh();if(BG&&BN){A6.toggleClass(BN&&BN.domNode,"invalid",false);if(BO){BO.rebuildChild(BN);}}if(BJ.isInFilterPanel()){if(BN&&BN.defn&&BN.defn.ttl){BN.updateContentHeight();}if(BO&&BO.refreshFP){BO.refreshFP();}}}}},failure:function(BM){if(BG){BJ.model.setDataReady(BJ.k,BJ.id,C.DISABLED,true);var BN=BJ.parent;BJ.isInvalid=true;A6.toggleClass(BN&&BN.domNode,"invalid",true);if(BJ.isInFilterPanel()){if(BN){BN.canCollapse=false;if(BN.titleBar){BN.titleBar.canCollapse=false;}BN.generateToolbar();}}else{if(BN.hasRendered&&BN.showInvalidMessage){BN.showInvalidMessage();}}return ;}mstrmojo.alert(BM.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){if(BG){BJ.node.data[C.ELMSREQUEST]=false;BJ.model.setDataReady(BJ.k,BJ.id,C.ELMSREQUEST,false);if(!mstrApp.isSingleTier){mstrApp.hideWait();}}}};this.set("wait",true);if(BG){BK[C.ELMSREQUEST]=true;this.model.setDataReady(this.k,this.id,C.ELMSREQUEST,true);}if(mstrApp.isSingleTier&&BG){mstrApp.serverRequest(BL,BI,{hideFailureErr:true});}else{if(BG){mstrApp.showWait();}mstrmojo.xhr.request("POST",mstrConfig.taskURL,BI,BL,false,null,true);}},m={getWidgetClass:function D(BH,BG,BF){var BE=l[BG];if(BE&&BE.constructor===Array){BE=BE[BF?0:1];}return BE;},getWidgetConfig:function T(BK,BG,BI,BE){var BL=BG===2?false:BI.horiz,BJ=BK.getFormats(),BM=BJ&&BJ.height,BH={scriptClass:this.getWidgetClass(BK,BG,BL),docSelector:BK,enabled:this.enabled,multiSelect:BI.multi,isHoriz:BL,include:BI.include,itemWidthMode:BI.iwm,allIdx:U.find(BE,"v",mstrmojo.elementHelper.ELEM_ALL_ID),noneIdx:BI.include?-1:U.find(BE,"v",mstrmojo.elementHelper.ELEM_ALL_ID),renderAllItems:!BM,onchange:function BF(){if(!BK._inSyncPhase){BK.selectorControlChange(this);}}};if(BH.noneIdx!==-1){BH.allIdx=-1;}if(BJ&&BG===mstrmojo.DocSelector.STYLES.PULLDOWN){if(BJ.color){BH.itemCssText="color: "+BJ.color+";";}if(BJ.font){BH.itemCssText=(BH.itemCssText||" ")+"font:"+BJ.font;}if(mstrApp.isExpress){BH.cssTextClass="express";}}return BH;},expandOrEditToFetchElements:function c(){var BE=this.node&&this.node.data;if(BE&&BE[C.DISABLED]){BE[C.DISABLED]=false;}this.model.setDataReady(this.k,this.id,C.disabled,false);this.checkAndFetchAllElemsForDelayed();},checkAndFetchAllElemsForDelayed:function L(BE){if(BE||Aj.call(this)){Ag.call(this);}},newSelectorWidget:function A0(BP){var BL=BP.style,BG=BP.node,BO=BG.defn,BJ=BG.data,BE=BJ.elms||[],BK=BP.isInFilterPanel(),BF,BN=this.getWidgetConfig(BP,BL,BO,BE),BI=BN.scriptClass,BM=function(BS){var BQ=this.getPopupList(),BR=this.items;if(BQ.items.length!==BR.length){this.selectedIndex=U.find(BR,"v",BS.v);}if(BS){this.set("text",BS.n||mstrmojo.desc(14561,"(null)"));}};if(!BI){BF=new mstrmojo.Label({cssClass:"unsupported",text:"This selector is not supported."});}else{if(BL===Ar){if(mstrApp&&mstrApp.isVI){BN.useDarkTheme=!BK&&mstrApp.getRootController().isDarkThemeSelected();BN.scrollNodeMaxHeight=AN;BN.focusOnPopup=true;BN.allowEmptyText=true;BN.onitemSelected=BN.onitemSelected?mstrmojo.func.composite([BM,BN.onitemSelected]):BM;BN.customizeSearchResult=function(BS){var BV,BT=this.allIdx,BR=this.multiSelect,BQ=BS.length,BU={v:"u;",n:mstrmojo.desc(13976,"(All search results)"),t:b.Dimension,_renderIdx:BT};if(BQ!==this.items.length){if(BT>=0){BV=U.find(BS,"v","u;");if(BV>-1){if(BR&&BQ>1){BS.splice(BV,1,BU);}else{BS.splice(BV,1);}}else{if(BR&&BQ>0){BS.splice(BT,0,BU);}}}}};BN.setDefaultListAndIndex=function(BR){var BQ=this.getPopupList();BQ.set("items",BR);if(!this.multiSelect){BQ.set("selectedIndex",this.selectedIndex);this.set("text",BR[this.selectedIndex].n||mstrmojo.desc(14561,"(null)"));}else{this.set("selectedIndices",this.selectedIndices);}};BN.onclearSelection=function(){var BR=this.getSelectedItem(),BQ=this.getPopupList();if(BR){BQ.set("selectedIndex",U.find(BQ.items,"v",BR.v));}};}}delete BN.scriptClass;var BH=Z.walk(BI,mstrmojo);BF=new BH(BN);}return BF;},getCekEvtListener:function Aw(BF,BE){return function(BG){var BJ=[],BH=this.node.data.elms,BI={};U.forEach(BH,function(BL,BK){BI[BL.v]=BK;});U.forEach(BG.value,function(BL){var BK=BI[BL];if(BK>-1){BJ.push(BK);}});this.handleActionInSyncPhase(function(){if(BE&&BE.select){BE.select(BJ);}});};},newAndInitWidget:function AI(BI){var BK,BG=BI._cekEvtListener,BF=BI.node,BE=BF.defn,BH=BI.id,BJ;if(BG){BE.detachEventListener(BG);delete BI._cekEvtListener;}BK=this.newSelectorWidget(BI);if(BK){BJ=this.getCekEvtListener(BI,BK);}BH=BJ.cekContextId||BH;BJ=BJ.cekEvtListener||BJ;if(BJ){BI._cekEvtListener=BE.attachEventListener("cekChange",BH,BJ);}BI.addChildren(BK);return BK;},updateWidget:function As(BF){var BE=BF.children,BG=BE&&BE[0];if(!BG){BG=this.newAndInitWidget(BF);}else{BG.set("enabled",this.enabled);}return BG;}};function Ao(BE){return BE.some(function(BF){return this.style===BF;},this);}function f(){var BE=this;return BE.model.getDatasetUnits(["mx"],function(BF){return BF.did===BE.defn.srcid;})[0]||{};}function AH(BE,BI,BJ,BL,BO,BH,BF){if(!BE){return[];}var BN=0,BK,BM=BE.length-(BH?1:0)-(BI?1:0),BG=[];if(BF){if(BJ&&BI){BN++;}else{if(BL){BN=(BE.length-1);if(BH){BN--;}}}for(BK=0;BK<BO;BK++){if(BJ){if(BN<=BM&&BE[BN]){BG.push(BE[BN++]);}}else{if(BL){if(BN>=(BI?1:0)){BG.push(BE[BN--]);}}}}}else{if(BJ){BN=BO;if(BH){BN--;}}else{if(BL){BN=0;if(BI){BN++;}}}for(BK=BO+1;BK<=BM;BK++){if(BN<=BM){BG.push(BE[BN++]);}}}return BG;}mstrmojo.DocSelector=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,m,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.DocSelector",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSelector {@cssClass} {@extCls}" nm="{@en@n}" title="{@tooltip}" style="{@domNodeCssText}"><div class="filter" style="{@filterNodeCssText}"></div><div class="wait" style="display:none;z-index:100;position:absolute;top:0;left:0;width:100%;height:100%"></div><div class="content" style="{@contentNodeCssText}"></div></div>',markupSlots:{filterNode:function(){return this.domNode.firstChild;},contentNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode.lastChild;},wIconNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenableChange:mstrmojo.Widget.enabledMarkupMethod,onincludeChange:function(){A6.toggleClass(this.domNode,"strikeout",!this.include);},onwaitChange:function(){A6.toggleClass(this.domNode,"wait",!!this.wait);this.wIconNode.style.display=((this.wait)?"block":"none");}},_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},ckey:null,ck:null,tks:null,style:0,selIdx:null,extCls:"",min:-1,max:-1,bGetElems:false,n:"",_inSyncPhase:false,toggleDisplayAll:function A5(BE){var BI=this.node,BJ=BI.data,BH=BI.defn,BG=U.filterOne(BJ.elms,function(BK){return BK.t===14;});if(BE&&!BG){BG=AA;BJ.elms=U.insert(BJ.elms,0,[BG]);}if(!BE&&BG){BJ.elms=U.filter(BJ.elms,function(BK){return BK.t!==14;});}if(this.children&&this.children[0]){var BF=U.find(BJ.elms,"v",mstrmojo.elementHelper.ELEM_ALL_ID);this.children[0].items=BJ.elms;this.children[0].allIdx=BF;this.children[0].noneIdx=BH.include?-1:BF;}BJ[C.ELMSREADY]=true;this.model.setDataReady(this.k,this.id,C.ELMSREADY,true,"elms",BJ.elms);},init:function AR(BG){this._super(BG);if(mstrmojo.dom.isIE){this.formatHandlers=this._ieformatHandlers;}var BF=BG.node.defn,BE=BF.style;this.n=BF.n;if(mstrApp.showSelectAllMenuOptionForSelector===1&&BF.multi){switch(BE){case Av:case AF:case AL:case Af:this.spm=true;break;}}},_fetchOnInit4UCOnDS:function Ae(BG){var BE=!this.bGetElems&&parseInt(this.node.defn.subTp,10)===BD,BF=this.node.data;if(BE||Aj.call(this)){Ag.call(this,BE);BG=BF.elms;}return BG;},initControlInfo:function K(){var BT=this.node,BY=BT.data,BG=BT.defn,BR=BY.elms,BX=BY.ces;var BL=["include","ckey","ck","tks","style","multi","iase","showall"];BR=this._fetchOnInit4UCOnDS(BR,BY);this.type=BG.ct;var BQ=BG.fmts;if(BQ){var BO=BQ.width;if(!BO||parseInt(BO,10)<=0){BQ.width="95px";}}Z.copyProps(BL,BG,this);var BK=this.selIdx={},BI=false,BS=BG.multi;if((BG.style===Al)||BS){if(!this.oces&&(BX!==undefined)){this.oces=Z.cloneArray(BX);BI=true;}var BF=BG.showall,BW=(U.find(BX,"v",mstrmojo.elementHelper.ELEM_ALL_ID)>-1),BV=(parseInt(BG.dfm,10)===1),BH=(BY.unset===true),BU=(!BV&&BH&&(BX&&BX.length===0)),BE=(BF&&BW)||(BW&&!BV&&BH)||(BF&&BV&&BH);if(BE){BX=BR;}else{if(BU){if(!BI&&(BG.sus!==1)){var BP=BG.htot,BM=(BG.sus===2),BN=(BG.sus===4),BZ=BG.suc||1;BX=AH(BR,BF,BM,BN,BZ,BP,this.include);}else{if(this.oces){BX=this.oces;}}}}}if(BX){var BJ={};U.forEach(BX,function(Ba){BJ[Q(Ba.v)]=true;});U.forEach(BR,function(Bb,Ba){if(BJ[Q(Bb.v)]){BK[Ba]=true;}});}if(BG.min>=0){this.min=BG.min;}if(BG.max>=0){this.max=BG.max;}if(this.isRecursiveAttributeSelector()){this.levelForms=BY.lvfs||[];}},resetFormatHandlers:function P(){this.formatHandlers={contentNode:["RW"]};},_getSelectionCount:function t(BE){return Z.keyarray(BE.selectedIndices).length;},canApply:function M(BI){var BH=this.defn,BJ=BH.multi,BG=this.min,BE=BJ?this.max:1,BF=this._getSelectionCount(BI||this.content);return(BG>=0&&BE>=0&&BG>BE)||((BG<0||BG<=BF)&&(BE<0||BE>=BF));},_buildEvent:mstrmojo.emptyFn,selectorControlChange:function V(BG){var BF=AQ.call(this),BM=this.isInFilterPanel()&&this.getFilterPanel(),BJ=(BM&&BM.isAutoApply());this._buildEvent(BF,BG);if(!this.canApply(BG)){var BE=this.getPanelContainer();if(this.isInSearchBoxPanel(BE)){BE.set("canApplySbp",false);}if(BJ){this.set("err",true);mstrmojo.alert(mstrmojo.desc(12297,"One or more selectors are incorrectly set. Please review the selector(s) and try again."));}if(BM){BM.set("applyEnabled",false);}return ;}if(BJ){this.set("err",false);}if(mstrApp.isExpress&&this.node.defn.style===Ar){this.handleExpressPulldown();}if(BF.requireToggle){this.deferredEvt=BF;this.set("include",BF.include);this.deferredEvt=undefined;}else{this.slice(BF);}if(this.node.data.unset===true){this.node.data.unset=null;}var BH=this.model,BI=BH&&BH.controller,BL=BI&&BI.view,BK=this.k,BN=this.defn&&this.defn._lkz;U.forEach(BL&&BL.children,function(BS){var BR=BS.defn,BP=BR&&BR.loaded,BO=BR&&BR.units;if(BP&&BS.k!==BN){for(var BQ in BO){if(BQ===BK){if(BO[BQ].tsk!==""){BR.loaded=false;}break;}}}});},showInfoWin:function q(BJ){var BM=this.node&&this.node.defn,BG=BM&&BM.ifw,BF=this.model,BH=[].concat(BF.getTargetInfoWin(BG)).concat(BF.getTargetInfoWin(this.tks));if(BH&&BH.length){var BO=this.defn.horiz,BE=BJ||this.contentNode,BL=AJ.position(BE),BN=AJ.position(this.contentNode),BK=(BO||parseInt(this.defn.style,10)===Al)?null:{x:BN.x,y:BL.y,w:BN.w,h:BL.h},BI;for(BI=0;BI<BH.length;BI++){BF.showInfoWin(BH[BI],BE,BO?"v":"h",false,Z.copy(BK));}}},unrender:function AD(BE){delete this.formatHandlers;this._super(BE);},postBuildRendering:function BC(){var BG=this.node.defn.style,BI=this.filterNode.style,BE=this.contentNode,BF=this.node.defn;if(this.isInFilterPanel()&&!this.isHorizFP()){this.domNode.style.width=this.contentNode.style.width="100%";if(this.formatHandlers.filterNode){this.filterNode.style.width=this.contentNode.style.width="100%";}this.set("visible",parseInt(BF.ds,10)===At);}this.handleActionInSyncPhase(this._super,this);if(mstrApp.isExpress&&BG===Ar){this.handleExpressPulldown();}if(this.isInFilterPanel()&&this.parent.adjustFP){this.parent.adjustFP();}if(this.formatHandlers.filterNode){var BH=this.getFormats();if(!BH.width){BI.width=BE.clientWidth+"px";}if(!BH.height){BI.height=BE.clientHeight+"px";}}else{BI.display="none";}this.model.attachEventListener("CGBMapChange",this.id,"onCGBMapChange");if(AJ.isAndroid&&BG===Al){BE.style.overflow="visible";}A6.toggleClass(this.parent.domNode,"invalid",this.isInvalid);return true;},updateHeight:function Az(){this.contentNode.style.height=this.filterNode.style.height=this.content.getClientHeight()+"px";var BE=this.parent;if(BE&&(BE.defn.ttl!==undefined)&&BE.updateContentHeight){BE.updateContentHeight();}},handleExpressPulldown:function I(){var BG=this.model.getZoomFactor();if(BG!==1){var BH=this.contentNode.firstChild.firstChild,BI=parseInt(window.getComputedStyle(BH).height),BE=BI*BG+"px";BH.style.height=BE;BH.style.lineHeight=BE;}var BF=document.createElement("DIV");BF.setAttribute("class","mstrmojo-ui-Pulldown-arrow");BF.setAttribute("src","#");this.content.selectedNode.appendChild(BF);},handleActionInSyncPhase:function Au(BG,BF){var BE=this._inSyncPhase;this._inSyncPhase=true;try{if(BF){BG.call(BF);}else{BG();}}catch(BH){throw ("There was an error handling the selector action in sync phase.");}this._inSyncPhase=BE;},onCGBMapChange:function Ay(BF){var BE=BF.cgbMap;if(!BE){return ;}var BG=this.tks;Z.forEach(this.defn.cgb,function(BI){var BH=BE[BI];if(BH&&BG.indexOf(BH)<0){BG+="\u001E"+BH;}});this.tks=BG;},onAppStateChange:function AU(BN){var BL=mstrmojo.vi.VisualInsightApp.APP_STATES,BP=BL.PAUSE,BM=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),BK=this.model,BG=this.node,BJ=BG&&BG.data,BO=BK.updateCSKeysforPause,BI=this.k,BE=this.id;var BF=BN.valueWas&BP;if(BJ){if(BM&&!BF){if(this.hasAttrData()){var BR=(U.indexOf(BO,this.ckey)===-1)&&BJ.elms&&(BJ.elms.length>0),BQ=this.style===Ah,BH=BR&&!BQ;BJ[C.ELMSREADY]=BH;BJ[C.CESREADY]=BR;BJ[C.DISABLED]=!BR&&!BQ;BK.setDataReady(BI,BE,C.ELMSREADY,BH);BK.setDataReady(BI,BE,C.CESREADY,BR);BK.setDataReady(BI,BE,C.DISABLED,!BR&&!BQ);if(!BH&&this.shouldDisableGdde()){this.isInvalid=true;}}else{if(this.hasQualData()){BJ[C.METRICVALUES]=!mstrConfig.resolveOnly;BK.setDataReady(BI,BE,C.METRICVALUES,!mstrConfig.resolveOnly);BJ[C.CSREADY]=true;if(this.isAttrQualSelector()&&this.children&&this.children.length){BK.setDataReady(BI,BE,C.CSREADY,true,"cs",this.children[0].cs);}else{BK.setDataReady(BI,BE,C.CSREADY,true);}}}}if(!BM&&BF){if(this.hasAttrData()){BJ[C.ELMSREADY]=BJ[C.CESREADY]=BJ[C.ELMSREQUEST]=BJ[C.DISABLED]=false;BK.setDataReady(BI,BE,C.DISABLED,false);BK.setDataReady(BI,BE,C.ELMSREADY,false);BK.setDataReady(BI,BE,C.CESREADY,false);BK.setDataReady(BI,BE,C.ELMSREQUEST,false);}else{if(this.hasQualData()){BJ[C.METRICVALUES]=BJ[C.CSREADY]=false;BK.setDataReady(BI,BE,C.METRICVALUES,false);BK.setDataReady(BI,BE,C.CSREADY,false);}}}}},update:function o(BS){this._super(BS);var BM=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,BE=this.node&&this.node.data,BI=this.model;if(BM&&BE){if(!BS.data){BS.data={};}var BT=BS.data;if(BE[C.CESREADY]){BT.ces=BE.ces;BT[C.CESREADY]=BE[C.CESREADY];}else{if(!this.hasQualData()){BT.ces=BS.defn&&BS.defn.ces;BT[C.CESREADY]=true;BI.setDataReady(this.k,this.id,C.CESREADY,true,"ces",BT.ces);}}if(BE[C.ELMSREADY]){BT[C.ELMSREADY]=BE[C.ELMSREADY];BT.elms=BE.elms;}if(BE[C.DISABLED]){BT[C.DISABLED]=BE[C.DISABLED];}if(BE[C.METRICVALUES]){BT[C.METRICVALUES]=BE[C.METRICVALUES];AW.restoreMetricSelectorProps(BT,BE);}if(BE[C.CSREADY]){BT[C.CSREADY]=BE[C.CSREADY];AW.restoreMetricSelectorSelections(BT,BE);}}this.node=BS;var BH=this.node.defn,BZ=this.node.data,BV=BH.style,BP=BZ.elms,BN=this.parent,BQ=(BV===Al),BG=(BV===Ah),BR=this.isDynamicAttributeSelector(),BX,BW;if(BM){if(BZ&&BH){if(this.hasAttrData()){BI.setDataReady(this.k,this.id,C.CESREADY,true);if(BG){BZ.elms=BZ.ces;BZ[C.ELMSREADY]=false;BZ[C.DISABLED]=false;BI.setDataReady(this.k,this.id,C.ELMSREADY,false);BI.setDataReady(this.k,this.id,C.DISABLED,false);}else{BI.setDataReady(this.k,this.id,C.DISABLED,!BE[C.ELMSREADY]);}if(!BZ[C.ELMSREADY]&&this.shouldDisableGdde()){this.isInvalid=true;}}else{if(this.hasQualData()){BI.setDataReady(this.k,this.id,C.CSREADY,true);}}}}if(BH.srct===Ab&&BH.srcid&&this.model.getBrowseFormTypes&&this.model.getBrowseFormTypes(BH.srcid).indexOf(H)>-1){BX=window.document.createElement("span");U.forEach(BP,function(Ba){BX.innerHTML=Ba.n;BW=BX.firstChild;Ba.n=BW&&(BW.text||BW.alt)||Ba.n||"";});BW=null;BX=null;}if(BQ&&BH.multi){var BO=U.find(BP,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(BO>-1){BZ.del={idx:BO,elem:BP[BO]};U.removeIndices(BP,BO,1);}}if(BH.sec){var BU=[].concat(BS.data.ces||[]);if(BN&&(BN.count!==null&&BN.count!==undefined)){if(BQ||BR){BN.set("count","");}else{if((BU&&BP&&BP.length)||BH.sos){if(!BH.include){var BY=U.find(BU,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(BY>=0){U.removeIndices(BU,BY,1);}}var BK={};U.forEach(BP,function(Ba){BK[Ba.v]=true;});BU=U.filter(BU,function(Ba){return BK[Ba.v];});var BF=BU,BL;if(!BG){if(!BH.multi){BF=BP;}BL=BP;}if(BS.data.unset){BN.set("count",A7.buildElemsCountStr(BL,BL));}else{BN.set("count",A7.buildElemsCountStr(BF,BL,this.isSelectionExcluded()));}}}}}if(this.content){this.content.allIdx=U.find(this.node.data.elms,"v",w);}this.initControlInfo();var BJ=this.content=this.updateWidget(this);if(!BJ){this.set("visible",false);}this.clearCache();},refresh:function Ak(){var BF=this.parent,BE=this.node&&this.node.defn;if(BF&&BF.generateToolbar){BF.set((this.isInFilterPanel()?"baseTitle":"title"),BE.ttl);BF.generateToolbar();}this._super();if(BF.fc&&BF.updateContentHeight){BF.updateContentHeight();}},onselectAllChange:function AZ(BN){var BF=this.children&&this.children[0],BL=BF.items,BE=BF.allIdx,BH=BF.selectedIndices,BM,BK=[];if(BN.value){if(BH[BE]){BF.removeSelect(BE,true);var BJ=BF.itemRenderer,BI=BJ&&BJ.unselect;if(BI){var BG=BF._getItemNode(BE);if(BG){BI(BG,BL[BE],BE,BF);}}}for(BM=0;BM<BL.length;BM++){if(BM!==BE&&!BH[BM]){BK.push(BM);}}BF.addSelect(BK);}else{for(BM in BH){BK.push(parseInt(BM,10));}BF.removeSelect(BK);}},onincludeChange:function u(BS){var BQ=this.node.defn,BG=BS.value,BP=this.model,BK=this.isInFilterPanel()&&this.getFilterPanel(),BO=BP.getDataService().newUpdate(BK);BQ.include=this.include=BG;if(BK&&BK._bufferedSlices){BK.applyBufferedSlices(true,BO);}if(this.style!==z&&this.style!==B){var BI=AQ.call(this);BI.ckey=this.ckey;BI.changeInclude=true;if(BQ.srct===Ab||BQ.srct===A4){var BR=this,BL=this.model,BM=this.node.k,BJ=BL.getDataService(),BF=BL.getSliceCallback(BI),BH=this.isDynamicAttributeSelector(),BN=[BJ.getSelectorShowAllAction({ck:BQ.ck,ckey:BQ.ckey,type:BQ.type,showAll:BG}),BJ.getSelectorIncludeAction({ck:BQ.ck,ckey:BQ.ckey,type:BQ.type,include:BG})],BT=A9(BF,{success:function(BU){BR.set("wait",false);if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){BR.toggleDisplayAll(BG);}if(!BH){BL.partialUpdate(BU.data,BL.getTargetDefn(BM));}if(!BR.isInFilterPanel()&&BR.parent){BR.parent.selectVIUnit(BR,true);}}});this.showall=this.defn.showall=BS.value;var BE=this.deferredEvt;if(!!BE){BL.sliceDeferred(BO,BE);}BN=!!BE?BN.concat(BO.actions):(BO.actions||[]).concat(BN);this.set("wait",true);BL.controller.cmdMgr.execute({execute:function(){this.submit(BN,BT);},urInfo:{extraPuKeys:BQ.ck.split("\u001E").slice(1),treesToRender:3}});}else{this.slice(BI);}}},getSelectorStyleList:function AK(){var BH=[],BK=this.defn.srct;if(this.useAttrStyle()){var BL=!this.isInFilterPanel();if(this.isRecursiveAttributeSelector()){return[{n:mstrmojo.desc(4733,"Check Boxes"),v:AF},{n:mstrmojo.desc(8967,"Search Box"),v:Ah},{n:mstrmojo.desc(4729,"Drop-down"),v:Ar}];}BH=[{n:mstrmojo.desc(4733,"Check Boxes"),v:AF},{n:mstrmojo.desc(4730,"Slider"),v:Al}];if(BK===Ab){BH.push({n:mstrmojo.desc(8967,"Search Box"),v:Ah});}if(BL){BH=BH.concat([{n:mstrmojo.desc(4735,"Link Bar"),v:Af},{n:mstrmojo.desc(4734,"Button Bar"),v:AL}]);}BH=BH.concat([{n:mstrmojo.desc(4732,"Radio Buttons"),v:Ac},{n:mstrmojo.desc(4729,"Drop-down"),v:Ar}]);if(BL){BH=BH.concat([{n:mstrmojo.desc(6738,"List Box"),v:Av}]);}var BJ=Ad.getUnitFromDataset(this.model.datasets,this.defn.srcid,12),BE=BJ&&U.some(BJ.fs,function(BM){return(BM.bftp===AV.DATE||BM.bftp===AV.DATETIME)&&(BM.istf||BM.idf);});if(BE&&(BJ&&!BJ.de)){BH.push({n:mstrmojo.desc(5443,"Calendar"),v:B});}}else{if(BK===X){var BG=this.node,BF=BG&&BG.defn,BI=BG&&BG.data;if((mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly)&&BF&&BF.style!==z&&!(BI&&BI.max&&BI.min)){BH=[{n:mstrmojo.desc(5225,"Qualification"),v:Aa}];}else{BH=[{n:mstrmojo.desc(4730,"Slider"),v:z},{n:mstrmojo.desc(5225,"Qualification"),v:Aa}];}}}return BH;},supportsInclude:function AP(){var BE=this.defn;if(this.isRecursiveAttributeSelector()){return !this.isDynamicAttributeSelector();}return((BE.srct===Ab&&!this.hasDE)||(BE.srct===X&&BE.style===z))&&!this.isSolrSelector()&&!mstrApp.isInVFConfigMode;},isSelectionExcluded:function d(){return this.isDynamicAttributeSelector()&&!this.defn.include;},isSolrSelector:function F(){return this.model.isFromSolrCube(this.defn.srcid);},isMetricSelector:function A2(){return this.defn.srct===X;},isRankMetricSelector:function AT(){var BE=f.call(this).f;return BE&&typeof BE==="string"&&BE.search(/rank/i)===0;},isNumericMetricSelector:function Ap(){var BE=f.call(this).dt;return this.model.isNumericDataType(BE);},isAttributeSelector:function AX(){return this.defn.srct===Ab;},supportsShowAllToggle:function A8(){return this.defn.srct===Ab||this.defn.srct===A4||(this.defn.srct===AS&&this.defn.srcst===G);},useAttrStyle:function A(){var BE=this.defn.srct;return BE===AS||BE===Ab||BE===A4;},hasAttrData:function A1(){return this.useAttrStyle()&&!this.isAttrQualSelector();},hasQualData:function r(){return this.isAttrQualSelector()||this.isMetricSelector();},isDerivedAttributeSelector:function Am(){return this.defn.srct===Ab&&this.defn.srcst===x;},isNewDerivedElementSelector:function k(){return this.defn.srct===A4&&this.defn.srcst===Ax;},isNewDerivedRecursiveElementSelector:function E(){return this.isNewDerivedElementSelector()&&this.defn.ndetype===J.DssRecursiveDerivedElement;},isAttrQualSelector:function AB(){return this.defn.srct===Ab&&this.defn.style===B;},isRecursiveAttributeSelector:function v(){var BE=this.defn;return BE.srct===Ab&&BE.srcst===Ai||this.isNewDerivedRecursiveElementSelector();},isDynamicAttributeSelector:function AO(){return this.isRecursiveAttributeSelector()&&this.isInFilterPanel()&&this.defn.style===AF;},allowsOrientationChange:function AY(){return !this.isAttrQualSelector()&&!Ao.call(this,[Ah,Av,Ar,Al,z,Aa]);},isSearchBox:function O(){return Ao.call(this,[Ah]);},isAttrElemListSelector:function A3(){return this.defn.srct===Ab&&this.defn.style!==B;},isCGSelector:function N(){return this.defn.srcst===G;},isGeoSelector:function a(){var BE=Ad.getUnitFromDataset(this.model.datasets,this.defn.srcid,12);return !!BE&&Ad.isGeoAttr(BE);},shouldDisableGdde:function R(){return this.isCGSelector()||this.isGeoSelector();},getInvalidTooltip:function n(){var BF=mstrmojo.desc(15787,"Unable to retrieve the list of elements for this filter")+mstrmojo.desc(1006,"."),BE=" "+mstrmojo.desc(15931,"Please resume data retrieval to use this filter.");if(this.isCGSelector()){BF=mstrmojo.desc(15924,"This Filter is based on a Custom Group, which is not supported when data retrieval is paused.")+BE;}else{if(this.isGeoSelector()){BF=mstrmojo.desc(15932,"This filter is based on a Geo Attribute, which is not supported when data retrieval is paused.")+BE;}}return BF;},slice:function e(BH){var BE=this.model;if(BH&&BH.eid){BH.eid=Q(BH.eid);}if(BE.closeSelWarnFlag){BE.closeSelWarnFlag(this.k);}if(this.isInFilterPanel()){var BF=this.getFilterPanel();if(BF&&!BF.isAutoApply()){BF.bufferSlice(BH);return ;}}var BI=this.getPanelContainer();if(this.isInSearchBoxPanel(BI)){BI.parent.bufferSlice(BH);BI.set("canApplySbp",BI.canApplySearchBoxPanel());return ;}var BG=BI&&BI.parent;if(BG&&BG.bufferSlice&&BG.hasDisabledSelectionApply&&BG.hasDisabledSelectionApply()&&BH&&!BH.forceApply){BG.bufferSlice(BH);return ;}BE.slice(BH);},isInFilterPanel:function AC(){var BE=this.parent;return(BE&&BE.isInFilterPanel&&BE.isInFilterPanel())||false;},isHorizFP:function BA(){var BE=this.parent;return(BE&&BE.isHorizFP&&BE.isHorizFP())||false;},getFilterPanel:function BB(){var BE=this.parent;return(BE&&BE.getFilterPanel&&BE.getFilterPanel())||null;},isInSearchBoxPanel:function(BE){var BF=BE||this.getPanelContainer();return BF&&(BF.isSbp||(BF._isSearchBoxPanel&&BF._isSearchBoxPanel()));},getPanelContainer:function(){var BE=mstrmojo.EnumRWUnitType,BF;for(BF=this.parent;BF&&BF.defn;BF=BF.parent){if(parseInt(BF.defn.t,10)===BE.PANEL){return BF;}}return null;},clearSelector:function Y(BE){var BQ=AQ.call(this),BM=[w],BP=this.node.data.elms||[],BZ="\u001E",BU=this.style,BF=this.defn.include,BH=this.isFilterNothing&&this.isFilterNothing(),BJ=this.node.defn,BW=BJ.srcst===257||(BJ.srct===47&&BJ.srcst!==12033),Ba=mstrApp&&mstrApp.getSelectAllForUnsetForVI&&mstrApp.getSelectAllForUnsetForVI(),BT=[AA],BI=C.CESREADY,BK="ces",BR=[],BO=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(BU===Ah){if(Ba){BQ.eid=BM.join(BZ);BR=BT;}else{BQ.ckey=this.ckey;BQ.unset=true;}this.defn.set("cek",[]);}else{if(BU===z||BU===Aa){BQ.cs="";BQ.ckey=this.ckey;BQ.unset=true;BJ.set("cek",{cs:null,qua:this.qua,include:BF,f:null,ft:null});BI=C.CSREADY;BK=["f","ft","cs"];BR=[null,null,""];}else{if(BU===B){BQ.unset=true;BQ.ckey=this.ckey;var BN=[{v:""},{v:""}];BJ.set("cek",{cs:BN});BI=C.CSREADY;BK="cs";BR=BN;}else{if(Ba){BQ.eid=BM.join(BZ);BR=BT;}else{BQ.ckey=this.ckey;BQ.unset=true;}var BY;if((BF||BU===Al)&&this.multi){U.forEach(BP,function(Bc){var Bb=Bc.v;if(BM[0]!==Bb){BM.push(Bb);if(!BY){BY=[Bc];}}});}var BL=BF||BU===Al;if(!BW){BJ.set("cek",BL?BM:[]);BR=BL?BT:[];}else{if(BO){BJ.set("cek",(BL&&BM.length>1)?[BM[1]]:[]);}BR=BY||[];}BK="ces";}}}if(this.defn.sec&&BU!==Al){this.parent.set("count",BU===Ah?"":A7.buildElemsCountStr(BM,BP,this.isSelectionExcluded()));}BQ[BE?"forceApply":"forceBuffer"]=true;if(BH&&!BW){BQ.ignoreTargetData=true;}BQ.retrieveCtrlKey=BW;if(BO){var BV=this.model,BX=BV.getCurrentLayoutDef(),BS=BX&&BX.units,BG=this.k;if(BS&&BS[BG]){BS[BG].cesChange=false;}BV.setDataReady(BG,this.id,BI,true,BK,BR);}this.slice(BQ);},allowsTogglingMultiSelect:function AE(){return Ao.call(this,[Ar,AL,Af,Ah,Al,Av]);},allowsTogglingAutoSearch:function W(){return !this.isRecursiveAttributeSelector()&&Ao.call(this,[Ah]);},allowsSameSizeItems:function S(){return Ao.call(this,[AF,Ac,AL,Af])&&!this.isRecursiveAttributeSelector();},supportsSetTarget:function AM(){var BE=this.defn;return this.isAttrElemListSelector()||(BE.srct===A4||BE.srcst===G);},supportSelectionColor:function p(){return Ao.call(this,[Av,Af]);}});mstrmojo.DocSelector.UC_ON_DS=BD;mstrmojo.DocSelector.STYLES={PULLDOWN:Ar,SCROLLER:Al,LIST:Av,RADIO:Ac,CHECKBOX:AF,BUTTON:AL,LINK:Af,METRIC_SLIDER:z,METRIC_QUAL:Aa,SEARCH_BOX:Ah,TEXT_BOX:g,ATTR_QUAL:B,VISUALIZATION:j};mstrmojo.DocSelector.DATAPARAMS={CESREADY:"cesReady",ELMSREADY:"elmsReady",ELMSREQUEST:"elemsRequest",METRICVALUES:"metricValues",CSREADY:"csReady",DISABLED:"disabled"};var C=mstrmojo.DocSelector.DATAPARAMS;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.DynamicClassFactory","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.array","mstrmojo.ui.pathbar.PathStarBurst","mstrmojo.ui.pathbar.PathNavigation","mstrmojo.ui.pathbar.PathAncestors","mstrmojo.ui.pathbar.PathExtraLinks","mstrmojo.ui.pathbar.PathHamburger","mstrmojo.ui.pathbar._PreAppExit","mstrmojo.mstr.search.SearchButton","mstrmojo.mstr.ui.CreateButton"," mstrmojo.ui._HasListTooltip");mstrmojo.ui.pathbar.List=mstrmojo.DynamicClassFactory.newComponent(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.pathbar._PreAppExit,mstrmojo.ui._HasListTooltip]);mstrmojo.ui.pathbar.ScrollableList=mstrmojo.DynamicClassFactory.newComponent(mstrmojo.ui.ScrollableList,[mstrmojo.ui._HasListTooltip]);function B(){var G=false,F=mstrApp.getPersistParams().hiddensections;if(F){G=mstrmojo.array.indexOf(F.split(","),"path")>=0;}return G;}function C(G){var F;for(F in G){return false;}return true;}function A(I){var G=I&&I.items,F=G&&G.length,H;for(H=F-1;H>=0;H--){if(C(G[H])){G.splice(H,1);}H--;}}mstrmojo.ui.pathbar.PathBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.pathbar.PathBar",markupString:'<div id="{@id}" class="mojoPath {@cssClass}" style="{@cssText}"><div id="mojoPath-starburst" class="mojoPath-starburst"></div><div id="mojoPath-navigation" class="mojoPath-navigation"></div><div id="mojoPath-path" class="mojoPath-path"></div><div id="mojoPath-toolbar" class="mojoPath-toolbar"></div><div id="mojoPath-create" class="mojoPath-create"></div><div id="mojoPath-search" class="mojoPath-search"></div><div id="mojoPath-extraLinks" class="mojoPath-extraLinks"></div></div>',markupSlots:{starburstNode:function(){return this.domNode.firstChild;},navigationNode:function(){return this.domNode.childNodes[1];},pathNode:function(){return this.domNode.childNodes[2];},toolbarNode:function(){return this.domNode.childNodes[3];},createNode:function(){return this.domNode.childNodes[4];},searchNode:function(){return this.domNode.childNodes[5];},extraLinksNode:function(){return this.domNode.lastChild;}},layoutConfig:{h:{starburstNode:"auto",navigationNode:"auto",pathNode:"auto",toolbarNode:"auto",createNode:"auto",searchNode:"auto",extraLinksNode:"auto"},w:{starburstNode:"auto",navigationNode:"auto",pathNode:"100%",toolbarNode:"auto",createNode:"auto",searchNode:"50px",extraLinksNode:"auto"}},getLayoutOffsets:function E(){return{h:2,w:0};},init:function D(I){if(B()){this.visible=false;return ;}var L=[];this._super(I);var G=this.pathInfo,J=G.sb,F=G.nb,K=G.pt,H=G.el,M=G.tbModelData&&G.tbModelData.n;A(M);if(J&&J.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathStarBurst",slot:"starburstNode",items:J});}if(F&&F.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathNavigation",slot:"navigationNode",items:F});mstrApp.prevPageHref=F[1]&&F[1].href;}if(K&&K.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathAncestors",slot:"pathNode",items:K,delimiter:G.dlmt});}if(H&&H.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathExtraLinks",alias:"pathExtraLinks",slot:"extraLinksNode",items:H});}if(mstrmojo.resolveFeature("object-search")){L.push({scriptClass:"mstrmojo.mstr.search.SearchButton",slot:"searchNode",searchProps:mstrConfig.searchProps});}if(M&&M.items&&M.items.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathHamburger",slot:"toolbarNode",items:M.items});}if(this.showCreateButton){if(mstrmojo.resolveFeature("create-objects")||(mstrmojo.resolveFeature("dhtml")&&mstrmojo.resolveFeature("create-analysis"))){L.push({scriptClass:"mstrmojo.mstr.ui.CreateButton",slot:"createNode",useConfigClickHandler:false,alignMenuToRight:true});}}this.addChildren(L);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo.Editor","mstrmojo.registry","mstrmojo.fe.FilterUtils","mstrmojo.fe.FilterEditor","mstrmojo.func");mstrmojo.requiresDescs(15544);var G=mstrmojo.array,F=mstrmojo.hash,D=mstrmojo.fe.FilterUtils.getExprXml,E=mstrmojo.expr,A=E.TP,C=E.STP;mstrmojo.fe._HasFilterEditor=mstrmojo.provide("mstrmojo.fe._HasFilterEditor",{filterEditorScriptClass:"mstrmojo.fe.FilterEditor",limitMdxUnitIdsHashTable:{},getLimitMdxUnitIdsHashTable:function B(I){var H=I&&I.limitExpr,K=H&&H.nds||[],L={};var J=function(M){G.forEach(M,function(N){if(N.mdxUnitId){L[N.mdxUnitId]=true;}else{if(N.m&&N.m.did){L[N.m.did]=true;}else{if(N.nds){J(N.nds);}}}});};J(K);return L;},onShowFilterEditor:function(Q){var O=this,U=this.model,L=this.getDataService?this.getDataService():U.getDataService(),H=this._getXtabCallback?this:U.controller,I="mfe",P={},N=Q.getNodeKeys?Q.getNodeKeys():[Q.k],M=function M(X,Z){var W,Y=X.nds;if(X.ph){Z[X.ph.idx]=true;}else{if(Y){for(W=0;W<Y.length;W++){M(Y[W],Z);}}}return Z;},K=function K(Y){var X=O.getLimitMdxUnitIdsHashTable(Y),W=[];F.forEach(O.limitMdxUnitIdsHashTable,function(a,Z){if(!X[Z]){W=W.concat({did:Z,t:4});}});L.saveViewFilter({filterModel:Y,limitExp:D(Y.limitExpr),nodeKeys:N,limitMdxToRemove:W},mstrmojo.func.wrapMethods(H._getXtabCallback(Q),{success:function(){var Z=Q.boxContent;Z&&Z.raiseEvent&&Z.raiseEvent({name:"regenerateToolbar"});}}));},V=function(W){var X=I&&window.mstrmojo&&mstrmojo.all[I];if(!X){X=mstrmojo.insert({id:I,scriptClass:O.filterEditorScriptClass,onUpdateBrowseElementsParams:function(a,Z){var Y=this.model;a.datasetID=Y.dsid;a.messageID=Y.messageID;a.templateNodeKey=Q.k;}});}X.editorTitle=mstrmojo.desc(15544,"Advanced Filter Editor");X.set("vizTitle",Q.title);W.targets=G.filter(W.targets,function(Y){switch(Y.t){case A.FILTER:return(Y.st!==C.CUSTOMGROUP);case A.CONS:return Y.st===C.NDE;}return !Y.olap;});O.limitMdxUnitIdsHashTable=O.getLimitMdxUnitIdsHashTable(W);X.set("onSave",K);X.set("model",W);if(O.filterEditorScriptClass==="mstrmojo.vi.ui.editors.FilterEditor"){X.set("docModel",U);}if(X.mainExpr.items.length>0){P=M(X.mainExpr.items[0],P);}X.open();},R={taskId:"getRWGridViewFilter",nodeKey:N[0],rwb:U.bs,msgID:U.mid},S=U.newCallback({success:function T(X){var W=mstrmojo.insert(X);V(W);},failure:function J(W){mstrmojo.alert(W.code+": "+W.message);}});L.getViewFilter(R,S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.form","mstrmojo._IsDocController","mstrmojo.AdvancedSortEditor","mstrmojo._DocToolbarActions","mstrmojo.func","mstrmojo.vi.controllers.UICmdMgr","mstrmojo.fe._HasFilterEditor");var H=3,h="mstrmojo-advancedSort";var V=mstrmojo.func,b=mstrmojo.array;mstrmojo.rw.DocController=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsDocController,mstrmojo._DocToolbarActions,mstrmojo.fe._HasFilterEditor],{scriptClass:"mstrmojo.rw.DocController",start:function E(){var j=this.model;j.lastSavedStid=j.stid||0;this.cmdMgr=new mstrmojo.vi.controllers.UICmdMgr({controller:this,model:j});this.cmdMgr.dataService=j.getDataService();},onCmdMgrChanged:function e(){},getSorts:function A(m){var k=[],j=m.axis-1,l=[],n=[];k[j]=l;l.push({key:m.sortKey,isAsc:m.isAsc});n[j]=m.subTotalsPos;return{sorts:k,subTotalsPos:n};},onSort:function Q(j,l){var k=this.getSorts(l);this.onAdvancedSort(j,k.sorts,k.subTotalsPos,l.stt);},onAdvancedSort:function g(k,l,j,m){k.model.sort({sorts:l,stp:j,stt:m},this._getXtabCallback(k));},onGetAdvSortData:function D(k,n,m,p){var o=this,j=function j(r,q){var w=mstrmojo.all[h]||mstrmojo.insert({scriptClass:"mstrmojo.AdvancedSortEditor",id:h,postCreate:function z(){if(mstrmojo.dom.isIE8){mstrmojo.css.addWidgetCssClass(this,"ie8");}}});var AA=r;if(q&&q.ndeForms){var v,x,t=[];var u=k.gridInfo;if(b.find(u.rows||[],"did",q.did)>=0){v="rows";}else{v="cols";t=AA&&AA[v].length>0?AA[v][0].v.split("!"):[];}AA=AA||{rows:[],cols:[],appliedRows:[],appliedCols:[],hierarchicalSort:{}};x=AA[v];t[0]=q.t;t[1]=q.did;b.forEach(q.ndeForms||[],function(AC){if(AC.obf){t[2]=AC.fid;t[3]=AC.t;var AD=t.join("!");var AE=q.n+" ("+AC.fnm+")";var AB=b.find(x,"v",AD);if(AB<0){x.push({n:AE,v:AD});}else{x[AB].n=AE;}}});}w.set("sortData",AA);w.set("controller",o);w.set("xtab",k);w.set("sourceAxis",n||1);w.set("sourceType",m||-1);w.open();};k.model.getAdvSortData({partialDisplayKeys:k.k,gridStyle:"AdvSortDataStyle"},this.model.newCallback({success:function(q){j(q&&q.grids&&q.grids[0],p);},failure:function l(q){mstrmojo.alert(q.code+": "+q.message);}}));},onPivot:function f(j,k){j.model.pivot(this._addNodeKeyToAction(j,k),this._getXtabCallback(j));},onSubmitTemplateUpdates:function J(j,k,l){j.model.submitTemplateActions(j.k,k,V.wrapMethods(this._getXtabCallback(j),l));},onShowTotals:function Y(j,k){j.model.showTotals(this._addNodeKeyToAction(j,k),this._getXtabCallback(j));},onDrill:function W(j,n,p){var l=this.model,k=this.model.prefs,o=k.rtprnt,m=k.rtthld;if(n.isWithin){if(!this.isInRequest()){n.retainParent=isNaN(o)?"":o;this.submitDrillWithin(j,n,p);}}else{if(!k.drillnw){mstrApp.showWait();}mstrmojo.form.send({evt:3125,displayMode:-1,drillPathKey:n.drillPathKey,elementList:n.drillElements,rwMesageID:l.mid,retainParent:isNaN(o)?"":o,retainThresh:isNaN(m)?"":m,rwGroupByElements:this.getGroupByElements(j).join(","),sliceId:j.sid||0},null,null,((k.drillnw)?"_blank":null));}},onDrillGraph:function c(j,n,p){var l=this.model,k=this.model.prefs,o=k.rtprnt,m=k.rtthld;if(n.isWithin){if(!this.isInRequest()){n.retainParent=k.rtprnt;this.submitDrillWithin(j,n,p);}}else{if(!k.drillnw){mstrApp.showWait();}mstrmojo.form.send({evt:3126,drillPathKey:n.drillPathKey,retainParent:isNaN(o)?"":o,retainThresh:isNaN(m)?"":m,rwMesageID:l.mid,"3126.x":n.x,"3126.y":n.y,graphHeight:n.graphHeight,graphWidth:n.graphWidth,rwGroupByElements:this.getGroupByElements(j).join(","),sliceId:j.sid||0,displayMode:n.displayType||2},null,null,((k.drillnw)?"_blank":null));}},submitDrillWithin:function a(j,k,l){j.model.drillGrid(this._addNodeKeyToAction(j,k),mstrmojo.func.wrapMethods(this._getXtabCallback(j),l));},onExecuteNewObject:function O(k,l){if(l){var j={};if(l.objType===H){j.evt=4001;j.reportID=l.did;j.reportViewMode=1;if(l.forceExec){j.execFlags=1;j.doNotUpdateCaches=true;}}else{j.evt=2048001;j.objectID=l.did;if(l.forceExec){j.freshExec=true;j.doNotUpdateCaches=true;}}if(l.linkAnswers){j.linkAnswers=l.linkAnswers;}mstrmojo.form.send(j,null,"POST",null);}},onReExecute:function(j,m){var k=j.model,l={evt:2048030,src:k.bp+".2048030",rwb:k.bs};if(m){l.ignoreStatus=true;mstrmojo.form.send(l,null,"POST",null);}else{mstrmojo.form.send(l,null,"POST",null);}},isAutoRefreshEnabled:function R(){return this.model&&this.model.rf;},isAutoRefreshStarted:function G(){return !!this.autoRefreshHandler;},startAutoRefresh:function M(){var j=this.model,k=j.rf,l=this;if(this.autoRefreshHandler){this.stopAutoRefresh();}this.autoRefreshHandler=setTimeout(function(){j.getDataService().refresh({sessionState:mstrApp?mstrApp.sessionState:""},{success:function m(n){if(j.clearDisposables){j.clearDisposables();}j.loadLayout(n);if(l.autoRefreshHandler){l.startAutoRefresh();}}});},k*1000);},stopAutoRefresh:function P(){clearTimeout(this.autoRefreshHandler);this.autoRefreshHandler=null;},offlineTransactionsSubmitted:function C(j){},transactionDiscarded:function I(j){},openOfflineTransactions:function N(){},invalidClientCache:function Z(){},confirmMsgBeforeSubmit:function S(){},onLink:function B(q,l){if(l.link){var m,t,p=l.link,k=(p.prms?p.prms.length:0);for(m=0;m<k;m++){t=p.prms[m];if(t.pa&&t.pa.v){t.pa.v=mstrmojo.string.decodeHtmlString(t.pa.v,false);}}var r=l.link.toXml();if(r){l.linkAnswers=r;}delete l.link;}if(l.linkInfo&&l.linkInfo.so>0){l.originMessageID=this.model.mid;if(!l.linkAnswers){l.promptAnswerMode="0";}l.selectorMode=l.linkInfo.so;}var o=l.target||l.linkTarget||"_self",n=!mstrmojo.isUrlExternal(l.url||"");if(o==="_self"&&(n||(l.linkInfo&&l.linkInfo.target))){mstrApp.showWait({showCancel:true,onCancel:mstrApp.hideWait});}if(l.url){if(l.url.toLowerCase().indexOf("javascript:")>=0&&!mstrConfig.isLinkJSEnabled){return ;}if(mstrApp.isSingleTier){window.FormWrapper.openPage(l.url);}else{if(l.submitAsPost||l.url.length>2083){var j=mstrmojo.form.createDynamicForm(l.url);j.target=o;j.submit();}else{window.open(l.url,o);}}}else{mstrmojo.form.send(l,null,"POST",o);}},onTransactionUpdates:function d(l,n,m,j){var k={name:"TransactionUpdates",ctlKey:j};if(m){l.autoRefresh(k);}},onDownloadGridData:function K(j,k,l){this.model.downloadGridData(this._addNodeKeyToAction(j,k),l);},onGroupBy:function L(j,n){var l=j.model,k=n.groupbyKey,m=false;n.flags=l.agb===2?2:0;m=!!n.flags;l.getDataService().changeDocGroupBy(n,{success:function(o){if(m){j.parent.parent.unloadGbLayuts(k);}l.loadLayout(o);}});},_getAdvSortCallback:function(l,j){var o=this,n=o.model,k=function k(q){var r=mstrmojo.all[h];if(!r){r=mstrmojo.insert({scriptClass:"mstrmojo.AdvancedSortEditor",gridData:q,controller:o,model:n,xtab:l,subTotalsPos:j});}else{r.set("gridData",q);}r.open();};return n.newCallback({submission:mstrmojo.emptyFn,success:function p(q){k(q.grids[0]);},failure:function m(q){mstrmojo.alert(q.code+": "+q.message);},complete:mstrmojo.emptyFn});},onXtabColumnsResized:function T(j,k){j.model.resizeXtabColumn(this._addNodeKeyToAction(j,k));},addScrollPosition:function U(j,l,k){if(window.sessionStorage){window.sessionStorage.setItem("sp."+j,JSON.stringify({x:l,y:k}));}},getScrollPosition:function X(j){var k=(window.sessionStorage&&window.sessionStorage.getItem("sp."+j));if(k){k=JSON.parse(k);}return k;},onRemoveUnit:function F(j,k){j.model.removeUnit(this._addNodeKeyToAction(j,k),this._getXtabCallback(j));}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.Button","mstrmojo.form");var U=8,P=16,V=4,S=1,K=2,D=4,R=8,B=16,N=268435456,J=536870912,A=1073741824,I=window.mstrConfig&&!window.mstrConfig.simpleDialog,M=2147755235,L=2147755236;var C="mstrmojo-oivmSprite ";function E(Z,Y,X){if(I){mstrmojo.confirm(Z,{confirmBtn:{fn:Y},cancelBtn:{fn:X}});}else{if(mstrmojo.confirm(Z)){if(Y){Y();}}else{if(X){X();}}}}function W(Y,X){if(I){mstrmojo.alert(Y,X,null,null,null,{allowHTML:true});}else{mstrmojo.alert(Y);X();}}function O(X){var Y=mstrmojo.findAncestor(this,"scriptClass","mstrmojo.DocInfoWindow");if(!!Y){Y[X?"registerLock":"releaseLock"](this);}}mstrmojo._DocActionSelector=mstrmojo.provide("mstrmojo._DocActionSelector",{_mixinName:"mstrmojo._DocActionSelector",extCls:"mstrmojo-ActionSelector",type:U,targets:null,initControlInfo:function G(){var X=this.node.defn;this.aa=parseInt(X.aa,10);this.dpTxt=X.dpTxt||{8:mstrmojo.desc(5369),4:mstrmojo.desc(8233),16:mstrmojo.desc(8232)}[this.aa]||"";this.dpCfm=X.dpCfm;this.sac=parseInt(X.sac,10);this.msg=X.msg;this.rsid=X.rsid;this.rst=X.rst;this.node.data.elms=[{n:this.dpTxt,v:this.dpTxt}];if(this._super){this._super();}},selectorControlChange:function(X){if(X.selectedIndex!==0){return ;}this.executeAction();X.select([]);},executeAction:function(){var Y=this.aa,X=this,Z=function(){O.call(X,false);};O.call(X,true);if(Y===U){if(this.dpCfm){E(mstrmojo.desc(8313),function(){X.onCommit();},Z);}else{X.onCommit();}}else{if(Y===V){if(this.dpCfm){E(mstrmojo.desc(8322),function(){X.onDiscard();},Z);}else{X.onDiscard();}}else{this.onRecalculate();}}},postBuildRendering:function(){this._super();this.domNode.ontouchstart=function(X){mstrmojo.css.addClass(X.target,"glow");};this.domNode.ontouchend=function(X){mstrmojo.css.removeClass(X.target,"glow");};},onCommit:function(){var a=this,b=this.model,Y=a.controller,X=mstrApp.useBinaryFormat;O.call(this,false);if(!this.checkValidationStatus()){W(mstrmojo.desc(9205));return ;}if(!X&&!this.validateRequiredObjects()){W(mstrmojo.desc(9200));return ;}var Z=function(c){if((a.sac&J)>0){Y.invalidClientCache();}if((a.sac&B)>0){var d={did:a.rsid,objType:a.rst,forceExec:(a.sac&N)>0};if((a.sac&A)>0){d.linkAnswers='<hl mid="'+b.mid+'" srct="2" aopam="1"><prms></prms></hl>';}Y.onExecuteNewObject(a,d);}else{if((a.sac&R)>0){Y.onReExecute(a);}else{if(mstrApp.isMobile){Y.generateActionToolbar();}b.transactionUpdate(c);}}};mstrmojo.mask.show("Running");b.sendTransactionActions(this.ck,U,b.newCallback({success:function(c){mstrmojo.mask.hide();if(b.txrcd||c.offln){Y.offlineTransactionsSubmitted(a.ck);}if(c.offln){if(X&&!a.networkToastShowed){a.networkToastShowed=true;mstrmojo.toast(mstrmojo.desc(9258,"No Network Connectivity")+". "+mstrmojo.desc(9259,"Transaction will be submitted when connectivity is resumed."));}b.transactionUpdate(c);}else{if((a.sac&S)>0&&a.msg){if(X){mstrmojo.toast(a.msg);window.setTimeout(function(){Z(c);},100);}else{W(a.msg,function(){Z(c);});}}else{Z(c);}}},failure:function(e){var c=mstrmojo.all.mojoAlertx9;if(c){c.destroy();}mstrmojo.mask.hide();if(b.txrcd){Y.offlineTransactionsSubmitted(a.ck);}var d=4294967296+parseInt(e.code,10);if(d===M){if(X){a.validateRequiredObjects();}W(mstrmojo.desc(9200,"You have some required inputs that are not modified."));}else{if(d===L){var f=mstrmojo.desc(9201,"You haven't made any changes to submit.");if(X){mstrmojo.toast(f);}else{W(f);}}else{W(mstrmojo.base64.decodeHttpHeader(e.message),function(){if(!X){a.controller.onReExecute(a,true);}});}}}}));},onDiscard:function F(){var Y=this,Z=this.model,X=Y.controller;O.call(this,false);Z.txDiscardTargets=this.getTxTargets();Z.sendTransactionActions(this.ck,V,{success:function(a){Z.transactionUpdate(a);X.transactionDiscarded(Y.ck);},complete:function(){delete Z.txDiscardTargets;if(mstrApp.isMobile){X.generateActionToolbar();}}});},onRecalculate:function(){O.call(this,false);this.model.sendTransactionActions(this.ck,P);},getTxTargets:function T(){var d=this.tks.split("\u001E"),c,X,b,e,Y,Z,a={};for(c=0,X=d.length;c<X;c++){b=d[c];e=1;do{Y=this.model.getUnitInstance(b,e++);if(Y&&Y.checkRequiredObjects){if(Y.isPanelStack){for(Z in Y.txWidgets){a[Y.txWidgets[Z].id]=1;}}else{a[Y.id]=1;}}else{break;}}while(true);}return a;},validateRequiredObjects:function Q(){var X=true,Y;for(Y in this.getTxTargets()){X=mstrmojo.all[Y].checkRequiredObjects()&&X;}return X;},checkValidationStatus:function H(){var X;for(X in this.getTxTargets()){if(mstrmojo.all[X].checkValidationStatus&&!mstrmojo.all[X].checkValidationStatus()){return false;}}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.vi.ui.rw.selectors.AttrQualInputBox","mstrmojo.array","mstrmojo.expr","mstrmojo.date","mstrmojo.VisChartUtils","mstrmojo.locales","mstrmojo.elementHelper","mstrmojo.vi.ui.DatasetUnitMenuUtils");var J=mstrmojo.expr,K=J.BFTP,E=mstrmojo.date,P=mstrmojo.VisChartUtils,F=mstrmojo.array,A=mstrmojo.vi.ui.DatasetUnitMenuUtils,R=mstrmojo.locales,L=mstrmojo.DocSelector.DATAPARAMS;function H(T,U){if(!T){return ;}var V=E.getDateJson(new Date(P.convertRawValueToMilliseconds(T))),S=E.formatDateInfo(V,R.datetime.DATEOUTPUTFORMAT);if(U===J.DTP.TIMESTAMP){S+=" "+E.formatTimeInfo(V,R.datetime.TIMEOUTPUTFORMAT);}return S;}mstrmojo.AttrQualDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.AttrQualDocSelector",getWidgetClass:function N(U,T,S){return"vi.ui.rw.selectors.AttrQualInputBox";},newAndInitWidget:function M(S){var T=this._super(S);S.attachEventListener("includeChange",T.id,function(U){this.set("include",U.value);});return T;},_buildEvent:function D(Z,Y){Z.f=Y.f;Z.ft=Y.ft;Z.fid=Y.fid;Z.ckey=this.ckey;Z.srcid=Y.srcid;Z.srct=Y.srct;var X=Y.dt,W=[];F.forEach(Y.cs,function(a){if(!mstrmojo.string.isEmpty(a.v)){W.push(a.v);}});if(W.length){Z.cs=W.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}Z.dtp=X;Z.unset=Y.unset;if(Z.unset||mstrmojo.string.isEmpty(Z.cs)){delete Z.fid;}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){var T=this.model,V=T.getCurrentLayoutDef(),U=V&&V.units,S=this.k;if(U[S]){U[S].cesChange=true;}T.setDataReady(this.k,this.id,L.CSREADY,true,["f","ft","cs"],[Y.f,Y.ft,Y.cs]);}},getCekEvtListener:function Q(T,S){return function(U){T.handleActionInSyncPhase(function(){S.update(U.value);});};},updateWidget:function I(V){var W=this._super(V),T=V.node,U=T.data;if(W.update){var S={cs:U.cs,f:U.f,ft:U.ft,fid:U.fid,min:H(U.min,U.dt),max:H(U.max,U.dt)};W.update(S);}return W;},getWidgetConfig:function B(f,Y,c,S){var Z=f.model,d=f.getFormats(),X=f.node.data,b=this._super(f,Y,c,S);b={scriptClass:b.scriptClass,cssText:d.height?"height: "+d.height:"",srcid:c.srcid||"",srct:c.srct||"",cs:X.cs,min:H(X.min,X.dt),max:H(X.max,X.dt),showAdvanced:true,canSelectDisabledDate:true,f:X.f,ft:X.ft||1,fid:X.fid,dt:X.dt,onchange:function(){if(!f._inSyncPhase){f.selectorControlChange(this);}}};if(!b.fid||!b.dt){var W=A.getUnitFromDataset(Z.datasets,c.srcid,12),a=(W&&W.fs)||[],e=a[0],V,U=function(g){if(!b.fid){b.fid=g.fid;}if(!b.dt){switch(g.bftp){case K.TEXT:b.dt=J.DTP.CHAR;break;case K.DATE:b.dt=J.DTP.DATE;break;case K.DATETIME:b.dt=J.DTP.TIMESTAMP;break;default:b.dt=J.DTP.CHAR;}}};for(V=0;V<a.length;V++){if(a[V].iidx){e=a[V];break;}if(a[V].idf){e=a[V];}}if(e){U(e);}}var T=b.dt;if(b.f===undefined){if(T===J.DTP.CHAR){b.f=J.FN.SEARCH;}else{if(T===J.DTP.DATE||T===J.DTP.TIMESTAMP){b.f=c.include?J.FN.BETWEEN:J.FN.NOT_BETWEEN;}}}if(!(mstrApp.isOIVM&&mstrApp.isOIVM()||c.iifp)){b.supportScrollbar=true;}return b;},isValidSelection:function O(){var T=this.node.data,S=this.model;return !S.isSelWarnFlagOn(this.k)||(T.cs&&T.cs.length);},isSelectAll:function C(){var Y=this.children&&this.children[0];if(Y===undefined){return true;}var T=R.datetime.DATEOUTPUTFORMAT,V=R.datetime.TIMEOUTPUTFORMAT,W=E.parseDateAndOrTime;var S=W.call(E,Y.min,T,V),Z=W.call(E,Y.fromBox.fromPicker.value),a=E.compareDate(Z&&Z.date,S&&S.date);if(a>0){return false;}if(a===0){if(E.compareTime(Z&&Z.time,S&&S.time)>0){return false;}}var b=W.call(E,Y.max,T,V),X=W.call(E,Y.toBox.toPicker.value),U=E.compareDate(X&&X.date,b&&b.date);if(U<0){return false;}if(U===0){if(E.compareTime(X&&X.time,b&&b.time)<0){return false;}}return true;},isFilterNothing:function G(){return this.isSelectAll();}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl","mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights","mstrmojo.hash","mstrmojo.array","mstrmojo.func","mstrmojo.VisUtility","mstrmojo.PerformanceLogOutput");var S=mstrmojo,J=S.hash,U=S.vi.ui.rw,H=S.VisUtility,R=U._HasVisSelections,O=U.selectors._IsMultiUnitControl,E=U.selectors._BrushesAndHighlights,T=mstrmojo.func.wrapMethods,G=S.PerformanceLogOutput;function M(Y){var W,c,a=Y.sc.exp,X=a&&a.nds,V=Y&&Y.gts,b=Y&&Y.k,Z=mstrmojo.DocXtabModel.prototype,d=J.copy(R,{k:b,model:Z});if(!Y||!V||!a||!X||X.length<=0){return{};}W=(V.row||[]).concat(V.col||[]);H.modifyScExp(a,W,Z,{});c=O.getSelectorDataFromExpression(a);d.addSelectionsFromExpression(c);return d.getSelectionHash();}mstrmojo.VisDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.VisDocSelector",postBuildRendering:function Q(){this._super();var X=this,V=X.model,W=X.parent;if(W&&W.refreshFilterSummaryBar){W.refreshFilterSummaryBar();}if(V){this.clearSelectorListener=V.attachEventListener("clearSelector",this.id,function(Y){if(Y.k===X.k){var Z=this.content;if(Z){Z.updateSummaryText({});}}});}},onAppStateChange:function L(V){var a=mstrmojo.vi.VisualInsightApp.APP_STATES,W=a.PAUSE,X=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),Z=!!(V.valueWas&W);if(X!==Z){var Y=this.parent;if(Y){Y.updateSummaryBar();}}},getWidgetConfig:function D(b,X,W,Z){var Y=b.node&&b.node.data,a=Y&&Y.sc,V=this._super(b,X,W,Z);if(a){V.exp=a&&a.exp;V.include=a.include;}return V;},getSelectionInfo:function C(){var W,V=this.node&&this.node.data,Y=V&&V.sc,X=Y&&Y.exp;if(X&&X.nds){return M(V);}W=R.getSelectionCache.call(this);return W&&W._viSelections;},updateWidget:function K(V){var W=this._super(V);if(W){W.include=this.include;if(W.updateSummaryText){W.updateSummaryText(this.getSelectionInfo());}}return W;},clearSelector:function P(d){G.startTimer({functionName:"VisFilter.unsetFilter",purpose:"from Unset filter to End"},"timerid_VisFilter_unsetFilter");var c,Y=this.parent,V=this.content,Z=this.node&&this.node.data,b=Z&&Z.sc,W=(Z&&(Z.sid!==undefined))?Z.sid:1,X=this.getSelectionInfo(),a=!X||Object.keys(X).length===0;if(Y&&Y.closeVisSelectorPanel){Y.closeVisSelectorPanel();}if(!b||a){return ;}c={ck:b.ck,ct:b.ct,ctlKey:b.ckey,selections:[],sid:W,tks:b.tks,type:521,isNavigation:false,ignoreTargetData:true};c[d?"forceApply":"forceBuffer"]=true;b.exp=null;R.setSelectionCache.call(this,{});E.clearSelections.call(this);this.slice(c);if(V){V.updateSummaryText({});}},update:function I(W){if(mstrApp.isInVFInteractMode){var V=this.parent;if(V){V.updateVizSelectorPanel();}}this._super(W);},supportsInclude:function N(){return true;},applySelections:function A(V){V.include=this.include;this.slice(V);},initControlInfo:function F(){this._super();var V=this.node,W=V&&V.data,X=W&&W.sc;if(X){J.copyProps(["allselected","ckey","ck","tks","style","showall","ct","include"],X,this);}},onincludeChange:function B(f){var X=f.value,d=this.model,Y=this.isInFilterPanel()&&this.getFilterPanel(),c=d.getDataService().newUpdate(Y);this.include=X;if(Y&&Y._bufferedSlices){Y.applyBufferedSlices(true,c);}var e=this,a=this.node.k,Z=d.getDataService(),W=d.getSliceCallback({type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,tks:this.tks,include:this.include,changeInclude:true}),b=[Z.getSelectorIncludeAction({ck:this.ck,ckey:this.ckey,type:this.type,include:X})],g=T(W,{success:function(h){e.set("wait",false);d.partialUpdate(h.data,d.getTargetDefn(a));}});var V=this.deferredEvt;if(!!V){d.sliceDeferred(c,V);}b[0].partialRetrieval=Z.newRetrievalKeysConfig().addNode(a);b=!!V?b.concat(c.actions):(c.actions||[]).concat(b);this.set("wait",true);d.controller.cmdMgr.execute({execute:function(){this.submit(b,g);},urInfo:{extraPuKeys:e.ck.split("\u001E").slice(1),treesToRender:3}});},generateSummaryText:function(V){if(this.include){return V>1?mstrmojo.desc(15291,"## data points included").replace("##",V):mstrmojo.desc(15292,"1 data point included");}else{return V>1?mstrmojo.desc(15293,"## data points excluded").replace("##",V):mstrmojo.desc(15294,"1 data point excluded");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.boxmodel","mstrmojo.Model","mstrmojo.VisUtility","mstrmojo.elementHelper","mstrmojo._CanProxyCallback","mstrmojo.EnumRWUnitType","mstrmojo.models.template.DataInterface","mstrmojo.StringBuffer","mstrmojo.EnumReadystate","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.vi.viz.EnumWidgetTypes","mstrmojo.DocSelector","mstrmojo.MetricSelectorUtility","mstrmojo.UUID","mstrmojo.ExpressVisList","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.vi.models.VIComponentMap");var BA=mstrmojo.EnumRWUnitType,P=mstrmojo.EnumReadystate,Z=mstrmojo.hash,BT=Z.forEach,BR=mstrmojo.func.wrapMethods,BM=mstrmojo.Obj.free,R=mstrmojo.array,Ac=mstrmojo.boxmodel,D=mstrmojo.mixin,Ax=mstrmojo.VisUtility,j=mstrmojo.elementHelper,BO=mstrmojo.MetricSelectorUtility,AW=mstrmojo.UUID,As=mstrmojo.vi.viz.EnumVizStyles,Bb=mstrmojo.vi.viz.EnumWidgetTypes,C=mstrmojo.DocSelector.DATAPARAMS,l="\u001E";var H={},b={},BX="76CB9F3E366345DF89811386CBAA82CB",Ap=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_STYLE.DEFAULT,S=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807],K=mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK,Ad={ESRIMapVisualizationStyle:"com.microstrategy.web.vf.viewer.EsriMapApplicationViewer",GoogleMapVisualizationStyle:"com.microstrategy.web.vf.viewer.GoogleMapApplicationViewer",MapboxVisualizationStyle:"com.microstrategy.web.vf.viewer.MapboxApplicationViewer",KPICardVisualizationStyle:"com.microstrategy.web.vf.viewer.KPICardApplicationViewer"},p="com.microstrategy.web.vf.viewer.CustomVisApplicationViewer";mstrmojo.MultiRWUnitFormatEventsType=null;var Ae={isObservable:function(Bf){var Be=Bf&&Bf.t;if((!Be&&Be!==BA.LAYOUT)||!this.hasOwnProperty(Be)||Bf.scriptClass){return false;}return(Be!==BA.SUBSECTION||!Bf.dt);},makeObservable:function(Be){var Bf=Be.audibles=this[Be.t]||{};if(Bf.hasOwnProperty("readyState")){Be.readyState=P.IDLE;}return new mstrmojo.Model(Be);}};Ae[BA.PANELSTACK]={"*":false,selKey:true,readyState:true};Ae[BA.GRID]={"*":false,readyState:true,ds:true};Ae[BA.GRAPH]={"*":false,readyState:true,ds:true};Ae[BA.GRIDGRAPH]={"*":false,qsm:true,ds:true};Ae[BA.SUBSECTION]={"*":false,resize:true,adjustSize:true};Ae[BA.VISUALIZATION]={"*":false,ds:true};Ae[BA.SELECTOR]={"*":false,cek:true,ds:true,readyState:true};Ae[BA.MOJOVISUALIZATION]={"*":false,ds:true};Ae[BA.LAYOUT]={"*":false,readyState:true};var A5={};function BD(Be){return A5[Be]||A5["*"];}A5["*"]={update:function z(Bf,Bg,Be,Bh){Z.copy(Be,Bg);if(Be&&!Be.ck){delete Bg.ck;}if(Be&&!Be.fs){delete Bg.fs;}}};A5[BA.PANEL]=D({update:function z(Bf,Bg,Be,Bh){delete Bg.layoutXML;if(Bg.isNavigation){delete Bg.exp;}this._super(Bf,Bg,Be);}},A5["*"]);function t(Bj,Bk){var Bf=Bj&&Bj.layoutMap&&Bj.layoutMap[Bk];if(Bf){if(!Bf.t){Bf.t=BA.LAYOUT;}if(Ae.isObservable(Bf)){Bf=Bj.layoutMap[Bk]=this.addDisposable(Ae.makeObservable(Bf));}return Bf;}var Be=Bj&&Bj.layouts,Bi=(Be&&Be.length)||0,Bh;for(Bh=0;Bh<Bi;Bh++){if(Be[Bh].k===Bk){var Bg=Be[Bh];if(!Bg.t){Bg.t=BA.LAYOUT;}if(Ae.isObservable(Bg)){Be[Bh]=this.addDisposable(Ae.makeObservable(Bg));}return Be[Bh];}}return null;}function AN(Bh,Bj,Bg,Bf){var Be=t.call(this,Bh,Bj);if(Bg===Bj){Be._lkz=Bj;return Be;}if(Be){var Bi=Be.units[Bg];if(Bi){if(parseInt(Bi.t,10)===BA.GRIDGRAPH){if(!Be.units[Bg+"_0"]){Be.units[Bg+"_0"]={ck:Bi.ck,fmts:Bi.fmts.gd,txi:Bi.txi,t:BA.GRID};Be.units[Bg+"_1"]={ck:Bi.ck,fmts:Bi.fmts.gp,t:BA.GRAPH};}}if(!Bf&&Ae.isObservable(Bi)){Bi=Be.units[Bg]=Ae.makeObservable(Bi);this.disposables.push(Bi);}Bi._lkz=Bj;}}return Be&&Be.units[Bg];}function Ak(Bi,Bh,Bg,Be){var Bf=this.getChildren(Bi,Bh,0);return(mstrApp.isMobile?(R.filter(Bf,function(Bl){var Bj=Bg&&Bg.indexOf(Bl.defn.t),Bk=Bl.defn.dk;return Be?(Bj>-1&&Bk===-1):(Bj<0||Bk!==-1);})):(Be?[]:Bf));}var M=function(Be,Bf){var Bg=new mstrmojo.StringBuffer();if(Bf){Bg.append("*l"+Bf);}Bg.append("*k"+Be.k);if(Be.hasOwnProperty("wid")){Bg.append("*x"+Be.wid);}Bg.append("*t"+this.buildTime);return Bg.toString();};function AY(Bg){var Bf,Be,Bj=this.delta,Bh=this.pendingUpdate=this.pendingUpdate||{},Bi=[];if(!Z.isEmpty(Bj)){Bi.push("<updates>");for(Bf in Bj){if(Bj.hasOwnProperty(Bf)){Be=Bj[Bf];Bi.push(Be.getUpdates());}}Bh[Bg]=Bj;this.delta={};Bi.push("</updates>");}return Bi.join("");}function BZ(Bj,Bf){var Bi;if(Bj){var Be=R.isArray(Bj)?Bj:Bj.split(Bf||l),Bh=Be.length,Bg;for(Bg=0;Bg<Bh;Bg++){Bi=Bi||{};Bi[Be[Bg]]=AN.call(this,this.defn,this.currlaykey,Be[Bg]);}}return Bi;}function AC(Be,Bf){return mstrmojo.all[M.call(this,{k:Be,wid:Bf},this.currlaykey)];}function A6(Bf,Be){var Bg=this.getLayoutUnitDefn(Bf,Be);return(Bg&&Bg.t===BA.PANELSTACK&&Bg.ifw);}function A8(Bf,Be){return !Be||(Bf.wid===Be);}function r(Bi,Bq){var Bl=this,Br=Bl.getSliceCallback(Bq),Bg=Br.shared,Bs=Bq.tks,Bf=Bq.eid,Bo=Bl.getDataService();if(!Bs){return ;}var Bn=AN.call(Bl,Bl.defn,Bl.currlaykey,Bf);if(!Bn){return ;}var Bk=Bf,Bm=Bg.tgtDefs[Bs],Be=function(){Bm.set("selKey",Bf);},Bh;Bm.newSelKey=Bf;if(Bn.l){var Bj=Bn.dirtyKeys;if(!!Bj){Bk=Z.keyarray(Bj).join(",");Bg.orignalTargetDefs=Bg.tgtDefs=BZ.call(Bl,Bk,",");Bh=function(){Be();BT(Bg.dataCacheUpdate.upd,function(Bt,Bu){var Bv=mstrmojo.all[Bu];if(Bv&&Bv.setDirty){Bv.setDirty(false);}});};}else{if(Bq.skipServerCall){Be();return ;}Bo.requestPanelChangeDeferred(Bi,Bf,null,false,false,Bl.newCallback({method:"slice",success:Be}));return ;}}else{Bh=function(){Be();Bn.l=true;};}var Bp=Br.success;Br.success=function(Bu){if(!Bl.checkStatus(Bu)){return ;}Bl.updateDefnCache(Bu.defn,[Bf]);Bp(Bu);Bh();var Bt=AC.call(Bl,Bq.tks,0);if(Bt){Bt.clearDirtyChild(Bf);}};Bo.requestPanelChangeDeferred(Bi,Bf,Bk,true,!Bq.hasLoader,Br);}function Y(Be,Bf){if(Bf[C.ELMSREADY]){Be[C.ELMSREADY]=Bf[C.ELMSREADY];Be.elms=Bf.elms;}if(Bf[C.CESREADY]){Be[C.CESREADY]=Bf[C.CESREADY];Be.ces=Bf.ces;}if(Bf[C.ELMSREQUEST]){Be[C.ELMSREQUEST]=Bf[C.ELMSREQUEST];}if(Bf[C.METRICVALUES]){BO.restoreMetricSelectorProps(Be,Bf);Be[C.METRICVALUES]=Bf[C.METRICVALUES];}if(Bf[C.CSREADY]){Be[C.CSREADY]=Bf[C.CSREADY];BO.restoreMetricSelectorSelections(Be,Bf);}if(Bf[C.DISABLED]){Be[C.DISABLED]=Bf[C.DISABLED];}}function e(Bf,Be){if(Bf.defn&&Bf.defn.t>=BA.GRID){mstrmojo.models.template.DataInterface.inflateGridData(Bf.data);}var Bh=Bf.id,Bg=Be[Bh]&&Be[Bh].data;if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()&&Bg&&Bf.defn.t===BA.SELECTOR){if(!Bf.data){Bf.data={};}Y(Bf.data,Bg);}Be[Bf.id]=Bf;return Bf;}function Ah(Bz,Bo,Be,Bk){var Bs=this.currlaykey,Bh;if(Bz){Bh=Bz.defn;Bs=(Bh&&Bh._lkz)||Bz.k;}var CA=this.getLayoutDataCache(Bs),B0=(!Be&&!Z.isEmpty(CA)),B6;if(!Bz){B6=this.data;}else{var Bn=Bz.data||Bz;if(B0){B6=CA[M.call(this,Bn,Bs)];B6=(B6&&B6.data)||B6||Bn;}else{B6=Bn;}}if(!!B6.sections){this._buildingLayoutKey=B6.k;}var Bf=B6?this.extractChildren(B6):[],Bu=[];var B3=(Bf&&Bf.length)||0;if(B3){Bh=this.defn;var Bw=!Bz,Bq=Bz?Bs:null,Bj=(Bz&&((Bz.defn)?Bz.defn.t:AN.call(this,Bh,Bq,Bz.k).t));var Bg=(Bj===BA.GRIDGRAPH),B4=(Bj===BA.DETAILS),B2,B1;Bf=Bo(Bf);for(B2=0,B1=Bf.length;B2<B1;B2++){var B8=Bf[B2];if(Bg){B8.k=Bz.k;B8.wid=Bz.data.wid;}var CC=B8.k,Br=B8.wid,By=M.call(this,B8,Bq),B9=!Bw&&A6.call(this,CC,Bq),B7;if(!Bw&&B9&&(!Be||!this.getInfoWinByKey(CC))){var B5=this.getLayoutUnitDefn(CC),Bv=e({data:B8,defn:B5,id:By,k:CC,p:B6},CA);if(!this.getInfoWinByKey(CC,Br)){var Bi=this.infoWindows=this.infoWindows||{};Bi[B5.n]=Bv;this.addInfoWinByKey(CC,Bv);}continue;}else{if(!Bw&&B9&&Be){var Bl=this.getInfoWinByKey(CC,Br);if(Bl){this.mergeInfoWin(B8,Bl.data,this.getCurrentLayoutKey());}}}if(Bg){By+="_"+B2;B7=AN.call(this,Bh,Bq,B8.k+"_"+B2);}else{B7=AN.call(this,Bh,Bq||B8.k,B8.k);}if(B4){B7.dt=true;}if(CA===null&&(B7.t===BA.LAYOUT)){CA=this.getLayoutDataCache(B8.k);}var CB;if(B7.t===BA.PANEL&&CA[By]&&B0){var Bm=this.extractChildren(B8)||[],Bt=this.extractChildren(CA[By].data)||[],Bp=false;if(Bm.length!=Bt.length){R.forEach(Bt,function(CE){var CD=R.find(Bm,"k",CE.k);if(CD>-1){Bm[CD]=CE;Bp=true;}});if(Bp){Bt.splice(0,Bt.length);R.forEach(Bm,function(CD){Bt.push(CD);});}}CB=B8;}else{CB=B0?(CA[By]&&CA[By].data)||B8:B8;}var Bx={k:B8.k,id:By,defn:B7,data:CB,p:B6};if(!CA[By]){e(Bx,CA);}Bu.push(Bx);}}return Bk?{nodes:Bu,total:B3}:Bu;}function Ba(Bk,Bf,Bj){var Be=Ac.px2Inches,Bg=this.getZoomProps(),Bi=1,Bh=2;if((Bj&Bi)>0){Bk.FormattingPosition={Left:Be(Bg,Bf.x||0),Top:Be(Bg,Bf.y||0)};}if((Bj&Bh)>0){Bk.FormattingSize={Height:Be(Bg,Bf.h||0),Width:Be(Bg,Bf.w||0)};}}function AG(Bf){function Be(Bh,Bg){return Bh<Bg?-1:(Bh>Bg?1:0);}Bf.sort(function(Bh,Bg){var Bi=Be(Bh.levelID,Bg.levelID);return Bi!==0?Bi:Be(Bh.elemID,Bg.elemID);});return Bf;}function BW(Be,Bf){return Be.map(function(Bg){return Bg[Bf];}).join(l);}function O(Be){return BW(Be,"levelID");}function BY(Be){return BW(Be,"elemID");}function AZ(Bf){if(Bf){b={};}H={};var Be=this.defn&&this.defn.epm;if(Be){Be.forEach(function(Bg){Bg.epmv.forEach(function(Bh){var Bj=AG(Bh.k.chn.map(function(Bm){var Bl=Bm.emt!==2;return{levelID:Bl?Bm.at.did:"-1",elemID:Bl?Bm.ei:Bm.mt.did};})),Bk=O(Bj),Bi=BY(Bj);if(!H[Bk]){H[Bk]={};}H[Bk][Bi]=JSON.parse(Bh.v.vv);});});}}function k(Be){if(Be){Be=mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters(Be);}return Be;}function AR(){var Bf=this.data&&this.data.layouts,Be=Bf[R.find(Bf,"k",this.getCurrentLayoutKey())],Bh=Be&&Be.gbys&&Be.gbys.groupbys,Bg=false;R.forEach(Bh,function(Bi){if(Bi.unit&&Bi.unit.elms&&Bi.unit.elms[Bi.unit.idx].v==="u;"){Bg=true;return false;}});return Bg;}function BH(Be,Bg,Bf){Be=Be.replace(Bg,function(Bh,Bi){if(Bi==="&"){return(Bf+"&");}return Bf;});if(mstrmojo.dom.isIE){Be+="&cb"+mstrmojo.now()+"=1";}return Be;}mstrmojo.DocModel=mstrmojo.declare(mstrmojo.Model,[mstrmojo._CanProxyCallback],{scriptClass:"mstrmojo.DocModel",audibles:{"*":false,data:true,tsp:true},features:null,dataCache:null,searchElemsCache:null,controller:null,sdp:null,dpi:96,keySeed:0,currlaykey:"",init:function Am(Be){this._super(Be);if(!this.features){this.features=new mstrmojo.Model();this.disposables.push(this.features);}this.ondefnChange();AZ.call(this);this.buildTime=mstrmojo.now();},hasFeatures:function Aj(Bi){var Bg=this.features;if(!Bg){return false;}var Bf=Bi.split(","),Be=Bf.length,Bh;for(Bh=0;Bh<Be;Bh++){var Bj=Bf[Bh],Bk=Bj.match(/^!/);if(Bk){Bj=Bj.replace("!","");}if(!!Bk===!!Bg[Bj]){return false;}}return true;},makeObservable:function Al(Be){return Ae.makeObservable(Be);},checkStatus:function BN(Be){if(parseInt(Be.status,10)===4){Be.message=mstrmojo.desc(5781,"Request timed out.");mstrmojo.err(Be);return false;}return true;},getDataService:function A3(){var Bf=this.dataService;if(!Bf){var Be={rwb:this.bs,msgId:this.mid,stid:this.stid,cbKey:this.cbKey,model:this};if(mstrApp.modelFactory){Bf=mstrApp.modelFactory.newDataService("Document",Be);}else{Bf=mstrApp.viewFactory.newDocDataService(Be);}this.dataService=Bf;this.disposables.push(Bf);}return Bf;},getNextKey:function BB(){return"W"+(mstrmojo.resolveFeature("guid-as-node-identifier")?AW.create():this.keySeed++);},resetKeySeed:function E(Be){this.keySeed=Be;},getWidgetId:function L(Be,Bf){return M.call(this,Be,Bf||this.getCurrentLayoutKey());},getUIState:function a(){return{};},ondefnChange:function AI(){var Bj=this.defn,Bg=Bj&&Bj.layouts,Bf={};if(Bj){Bj.layoutMap=Bf;var Bi=(Bg&&Bg.length)||0,Bh;for(Bh=0;Bh<Bi;Bh++){var Be=Bg[Bh];Bf[Be.k]=Be;}}},extractChildren:function AJ(Be){return Be&&(Be.sections||Be.subsections||Be.objects||Be.panels||Be.layouts||Be.children);},getChildren:function U(Bg,Bf,Bj,Be,Bi){Bj=Bj||0;var Bh=function(Bk){return Bk.slice(Bj,Bj+(Be||Bk.length));};return Ah.call(this,Bg,Bh,Bf,Bi);},getChildrenByKey:function Ag(Bg,Bf,Be,Bi){var Bh=function(Bk){var Bj=[],Bl;R.forEach(Be,function(Bm){Bl=R.find(Bk,"k",Bm);if(Bl!==-1){Bj.push(Bk[Bl]);}});return Bj;};return Ah.call(this,Bg,Bh,Bf,Bi);},getTargetDefn:function Af(Be){return BZ.call(this,Be);},getUnitDefinitions:function(Bf,Be){return BZ.call(this,Bf,Be);},getUnitInstance:function AE(Be,Bf){return mstrmojo.all[M.call(this,{k:Be,wid:Bf},this.currlaykey)];},getFirstUnitInstanceByName:function AK(Bh){var Be=t.call(this,this.defn,this.currlaykey);if(Be){var Bf=Be.units,Bg;for(Bg in Bf){var Bi=Bf[Bg];if(Bi.n===Bh){return this.getUnitInstance(Bg,1);}}}return null;},getLayoutUnitDefn:function B(Bf,Be){return AN.call(this,this.defn,Be||this.currlaykey,Bf);},mergeInfoWin:function N(Bi,Bh,Be){if(Bi.k&&Bh.k&&Bi.k===Bh.k){var Bg=this;var Bf=this.getLayoutUnitDefn(Bi.k,Be);if(Bf&&Bf.t===BA.PANELSTACK){R.forEach(Bh.panels,function(Bk){var Bj=R.filterOne(Bi.panels,function(Bl){return Bl.k&&Bl.k===Bk.k;});if(!Bj){Bi.panels.push(Bk);}else{N.call(Bg,Bj,Bk,Be);}});}else{R.forEach(Bh.objects,function(Bk){var Bj=R.filterOne(Bi.objects,function(Bl){return Bl.k&&Bl.k===Bk.k;});if(!Bj){if(Bi.objects){Bi.objects.push(Bk);}}else{N.call(Bg,Bj,Bk,Be);}});}}},getRawLayoutUnitDefn:function c(Bf,Bg,Be){return AN.call(this,Bg||this.defn,Be||this.currlaykey,Bf,true);},getSelectedKey:function BI(Be){return(!Be&&this.currlaykey)||null;},getCurrentLayoutKey:function AD(){return this.currlaykey;},getLayoutKeyByUnitKey:function I(Bi){var Bg=this.defn,Bh=Bg&&Bg.layouts,Be,Bf=null;R.forEach(Bh,function(Bj){Be=Bj.units;if(Be[Bi]&&(!Be[Bi]._isDeleted)){Bf=Bj.k;return !Be[Bi];}});return Bf;},getLayoutDefn:function Ar(Be){var Bf=this.defn,Bg=Bf&&Bf.layouts;return Bg&&Bg[R.find(Bg,"k",Be)];},getCurrentLayoutDef:function Aw(){return this.getLayoutDefn(this.getCurrentLayoutKey());},replaceLayout:function BQ(Bm,Bf,Bn){var Bj=this.defn,Bi=this.data,Bg=Bf&&Bf.defn,Be=Bf&&Bf.data,Bo=this.dataCache;if(Bo&&Bo[Bm]){Bo[Bm]={};}var Bl=(Bi&&Bi.layouts)||(Bj&&Bj.layouts),Bh,Bk=false;for(Bh=(Bl&&Bl.length-1)||0;Bh>=0;Bh--){if(Bl[Bh].k===Bm){break;}}if(Bn&&Bh<0){Bh=R.find(Be.layouts||Bg.layouts,"k",Bm);Bk=true;}this.bs=Bf.bs;if(Be){if(Bk){R.insert(Bi.layouts,Bh,[Be.layouts[Bh]]);}else{Bi.layouts[Bh]=Be.layouts[Bh];}Bi.elems=Be.elems;}if(Bg){if(Bk){R.insert(Bj.layouts,Bh,[Bg.layouts[Bh]]);}else{Bj.layouts[Bh]=Bg.layouts[Bh];}this.ondefnChange();}},loadLayout:function h(Be,Bg,Bf){this.replaceLayout(Be.currlaykey,Be);this.raiseEvent({name:"rebuildLayout",unloadCache:!!Bg,restoreIW:!!Bf});},getLayoutDataNode:function Bd(Bf){var Be=this.data&&this.data.layouts;return R.filterOne(Be,function(Bg){return Bg.k===Bf;});},getLayoutDataCache:function AA(Bf){if(!Bf){return null;}var Be=this.dataCache;if(!Be){Be=this.dataCache={};}if(!Be[Bf]){Be[Bf]={};}return Be[Bf];},saveRW:function BE(Bf,Bh){var Bg=mstrmojo.desc,Be=this.getDataService();Be.saveRW({objName:Bf||this.n,folderID:this.pfid,saveAsFlags:1},Bh||{success:function(Bi){mstrmojo.alert(Bg(3819,"Document Saved")+": "+Bi.n);}});},saveAsRW:function Bc(Bi,Bh){var Bg=this,Bf=!!(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig&&mstrConfig.resolveOnly),Be=Bg.prompt_option;switch(Be){case 0:Be=3;break;case 4:Be=1;break;default:Be=2;}var Bj=mstrmojo.hash.copy(Bi,{evt:3102,applyChanges:false,executionMode:2,parentFolderID:mstrApp.saveFolderId||Bg.sfid||Bg.pfid,saveFromDesignMode:false,saveAsReportSaveAsFlags:Be,resolveOnly:Bf,rwb:Bg.bs});if(Bh){Bj.target=Bh;Bj.saveAsOrigin=13;}mstrmojo.form.send(Bj,null,"post");},getDocPropsActions:function AV(Be){var Bf={act:"setDocumentProperties",props:Be};Z.forEach(Be.RWDocumentProperties,function(Bh,Bg,Bi){Bi[Bg]=String(Bh);});return Bf;},saveDocProps:function AU(Be,Bg,Bh,Bl){var Bk=this.getDataService(),Bj=Bh?null:mstrmojo.DocDataService.RAPID_EXEC,Bf=mstrmojo.DocDataService.REQUEST_DEFN_DATA,Bi=[this.getDocPropsActions(Be)];if(Bg){this.controller.cmdMgr.execute({execute:function(){this.submit(Bi,Bl||{},Z.copy(Bf,Z.copy(Bj,{})));},urInfo:Bg});}else{Bk.submitUpdates(Bi,Bl||{},Z.copy(Bf,Z.copy(Bj,{preserveUndo:true})));}},partialUpdate:function AP(Bj,Be,Bh,Bg,Bf){if(Bh){this.updateDefnCache(Bh,Bg,Bf);}if(Bj){if(mstrApp){mstrApp.isPartialUpdate=true;}var Bi=this.updateDataCache(Bj,Be,undefined,Bf);this.raiseEvent({name:"partialUpdate",tree:Bj,ids:Bi});if(mstrApp){mstrApp.isPartialUpdate=false;}return Bi;}},refreshDefinition:function g(Bh,Bg,Bf,Bi){var Be=this.getLayoutUnitDefn(Bh,Bf||this.getCurrentLayoutKey());if(!Be){return ;}BD(Be.t).update(this,Be,Bg,Bi);},loadPartialData:function AM(Bj,Bf){var Bh={};Bh[Bf]=AN.call(this,this.defn,this.currlaykey,Bf);var Bg=this.updateDataCache(Bj,Bh),Be=this.getLayoutDataCache(this.getCurrentLayoutKey()),Bi=this;R.forEach(Bj.layouts,function(Bk){var Bl=Bk&&Bk.xtabStyles;if(Bl){Bi.raiseEvent({name:"updateStyles",key:Bk.k,updatedStyles:Bl});}});BT(Bg,function(Bl,Bk){if(Bk==="upd"){BT(Bl,function(Bn,Bo){var Bm=mstrmojo.all[Bo];if(Bm&&Bm.update){Bm.update(Be[Bo]);}});}});},updateDefnCache:function A(Bf,Bl,Bi){var Bo=this.currlaykey,Bh=t.call(this,Bf,Bo),Bq=t.call(this,this.defn,Bo),Bm=function(Br,Bs){var Bt;for(Bt in Bs){if(Br[Bt]===undefined){Br[Bt]=Bs[Bt];}}},Bp=Bh&&Bh.units,Bn=Bq&&Bq.units,Bg=Bh&&Bh.cgbMap,Be=Bq&&Bq.cgbMap,Bj=Bi&&k(Bi).defn,Bk=this;R.forEach(Bl,function(Br){Bk.refreshDefinition(Br,Bp&&Bp[Br],null,Bj&&Bj[Br]);});if(Bp){Bm(Bn,Bp);}if(Bg){Bm(Be,Bg);this.raiseEvent({name:"CGBMapChange",cgbMap:Be});}},deleteDataCache:function T(Bf){var Be=this.getLayoutDataCache(this.getCurrentLayoutKey());if(Be[Bf]){delete Be[Bf];}},setDataReady:function Ab(Bn,Bk,Bf,Bl,Be,Bo){var Bi=this.extractChildren(this.data),Bg=this.getLayoutDataCache(this.getCurrentLayoutKey()),Bj=this,Bm=false;if(!Bi){return ;}function Bh(Bp){if(!Bp){return ;}R.forEach(Bp,function(Bq){if(Bq.k===Bn){if(Bf){Bq[Bf]=Bl;}if(R.isArray(Be)&&Bo){R.forEach(Be,function(Bs,Br){Bq[Bs]=Bo[Br];});}else{if(Be){Bq[Be]=Bo;}}Bm=true;return false;}else{if(!Bm){Bh(Bj.extractChildren(Bq));}}});}Bh(Bi);if(!Bg[Bk]){Bg[Bk]={};}Bg[Bk][Bf]=Bl;},updateDataCache:function An(Bp,Bo,Be,Bi){var Bg=this.getLayoutDataCache(this.getCurrentLayoutKey()),Bf=Bi&&k(Bi).data,Bq={ifws:{},upd:{},tgts:{},def:{},secs:{}},Bk=this,Bn=function(Bt,Br){var Bu=Bk.extractChildren(Bt.data);if(Bu){return ;}var Bw=Bk.extractChildren(Br);for(var Bs in (Bw||[])){if(!!Bw[Bs]){var Bv=Bw[Bs];if(Bv.k===Bt.k){if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()&&Bw[Bs]&&Bt.defn&&Bt.defn.t===BA.SELECTOR){if(!Bt.data){Bt.data={};}Y(Bt.data,Bw[Bs]);}Bw[Bs]=Bt.data;}}}},Bj=function(Bx,Bs,Br){var Bw=Bg[Bx];if(Bf){var Bv=mstrmojo.all[Bx];if(Bv){var Bt=Bw.k,Bu=Bf[Bt];if(Bu){if(!Z.isEmpty(Bu.exclude)){Z.copy(Bs.data,Bw.data);}else{Bs.data=Z.copyProps(Bu.serialized.split(";"),Bs.data,Bw.data);}}}}e(Bs,Bg);Bn(Bs,Br);};function Bm(B7,CC,Bs,Bv){var Bx=false,B4=this.getChildren(B7,true),B2;if(!B4.length){return ;}if(Bs){B2=mstrmojo.all[B7.id];Bx=!B7.id||!!B2;}var Bw=B7.defn,Bt=B7.data,B9;if(Bw&&Bw.t===BA.PANELSTACK&&Bw.od){B9=Bt.selKey;}var B8,B1,CE=function(CF){return(CF.k===B1);};for(B8 in B4){var B5=B4[B8],B6=B5.id,Bu=null,CA;B1=B5.k;if(CC){var By=this.extractChildren(CC);if(By){CA=R.filterOne(By,CE);if(!CA){By.push(Z.clone(B5.data));}}else{Z.copy(Z.clone(B7.data),CC);}}if(mstrmojo.all[B6]){Bx=true;}if(Bo.hasOwnProperty(B1)){if(A6.call(this,B1)&&A8(B5.data,Be)){Bj(B6,B5,CC);var CD=this.getInfoWinByKey(B1);if(!Bv&&CD){Bq.ifws[B1]=CD.id;}}Bu=B1;if(Bx){if(B9&&B9!==B1){continue;}if(!Bv){Bq.tgts[B6]=true;}var Br=B2&&B2.defn,CB=Br&&Br.t,B0=Br&&Br.ck;if(CB===BA.SUBSECTION&&(B0&&B0.hasOwnProperty(B1))){Bq.secs[B2.id]=true;}}}if((Bv||Bu)&&(!B9||B9===B1)){Bj(B6,B5,CC);Bq.def[B1]=true;if(Bx){Bq.upd[B6]=true;}}var Bz=mstrmojo.all[B6],Bw=Bz?Ax.getPropertyByPath(Bz,"node.defn"):null;if(mstrApp.isInVFConfigMode&&Bw&&Bw.iifp){var B3=this.adjustNodeId(B5.id);if(mstrmojo.all[B3]){B5.id=B3;Bj(B3,B5,CC);B5.id=this.restoreNodeId(B3);Bq.upd[B3]=true;Bq.tgts[B3]=true;}else{if((Bw.t===BA.GRID||Bw.t===BA.GRAPH)&&Bv&&Bo[mstrmojo.all[B5.id].k]){Bq.upd[B5.id]=true;Bq.tgts[B5.id]=true;}}}Bm.call(this,B5,CA,Bx,Bv||Bu);}}if(Bp&&Bp.layouts&&Bo){var Bh=R.filterOne(Bp.layouts,function(Br){return(Br.loaded);}),Bl=this.data.layouts;if(Bh){Bm.call(this,Bh,Bl[R.find(Bl,"k",Bh.k)],true);}}return Bq;},getDimensionAndPositionAction:function V(Bf,Be,Bh){var Bg=this.getUnitFormatAction(Bf,null,null,Bh);Ba.call(this,Bg.format,Be,3);return Bg;},getDimensionAction:function V(Bf,Be,Bh){var Bg=this.getUnitFormatAction(Bf,null,null,Bh);Ba.call(this,Bg.format,Be,2);return Bg;},getUnitFormatAction:function o(Bm,Bf,Bl,Bh){var Bj=Bm.defn,Bn=(Bj&&Bj.t)||1,Bk=Bm.k,Bi=[Bk];var Be={act:"format",unitKey:Bk,unitType:Bn===115?521:Bn,formatType:Bf||1,format:Bl||{}};if(!Bh){Be.partialRetrieval={nodes:Bi};}if(Bn===BA.SELECTOR){var Bo=Bj.ck;Be.keyContext=Bo;Bi[0]=this.getDataService().getNodeKeyFromKeyContext(Bo);}if(Bn===BA.TEXTFIELD||Bn===BA.IMAGE||Bn===BA.HTMLCONTAINER){var Bg=Bm.nk||Bj.fgk;Be.fieldKey=Bk;Be.nodeKey=Bg;Be.keyContext=Bn+l+Bg+l+Bk;Bi[0]=Bg;}return Be;},updateUnitFormat:function A9(Bf,Bh,Bi,Bj,Be){var Bg=this.getUnitFormatAction(Bf,Bh,Bi);this.getDataService().submitUpdates(Bg,Bj,Be);},selectPanelDeferred:function(Bj,Bi,Bh,Bg,Bf,Be){r.call(this,Bj,{type:3,tks:Bi,eid:Bh,sid:Bg||1,ck:Bi,hasLoader:Bf,skipServerCall:Be});},getSearchElemsCache:function BL(){var Be=this.searchElemsCache;if(!Be){Be=this.searchElemsCache={};}return Be;},getCGBMap:function A0(){var Be=t.call(this,this.defn,this.currlaykey);return Be&&Be.cgbMap;},getSliceCallback:function AT(Be){var Bh=this,Bi={};Bi.dataCacheUpdate=null;Bi.tgtDefs=Be.tks?BZ.call(this,Be.tks):null;Bi.orignalTargetDefs=Bi.tgtDefs;var Bg=Bi.tgtDefs,Bf=function(Bl){var Bm=Bg;if(Be.disablePU){Bm=BZ.call(Bh,Bh.currlaykey);}BT(Bm,function(Bn){if(Bn&&Bn.set){Bn.set("readyState",Bl);}});},Bk=this.newCallback({method:"slice",shared:Bi,submission:function(){Bf(P.WAITING);},success:function(Bm){if(!Bh.checkStatus(Bm)){return ;}if(Be.disablePU){Bh.loadLayout(Bm,Be.isUConDS,Be.restoreIW);return ;}if(Bm.pukeys){Bi.tgtDefs=BZ.call(Bh,Bm.pukeys);}Bi.dataCacheUpdate=Bh.updateDataCache(Bm.data,Bi.tgtDefs,Be&&Be.sid,Bm.puFilters);if(typeof Bm==="object"){Z.copyProps(["bs","exopt","dty"],Bm,Bh);}var Bl={name:"partialUpdate",tree:Bm.data,ids:Bi.dataCacheUpdate,unloadCache:Be.isUConDS};if(!mstrmojo.hash.isEmpty(Bl.ids.ifws)){if(Be&&!Be.suppressIW&&(Be.type===BA.GRID||Be.type===BA.GRAPH)){Bl.anchor=Be.anchor;}else{Bl.ids.ifws={};}}if(mstrApp){mstrApp.isPartialUpdate=true;}Bh.raiseEvent(Bl);if(mstrApp){mstrApp.isPartialUpdate=false;}},complete:function(){Bf(P.IDLE);}}),Bj={success:function(){BT(Bi.orignalTargetDefs,function(Bx,Bv){var Bw=AC.call(Bh,Bv,1);if(!Bw){if(!!Bh.sdp&&!!Bh.sdp[Bv]){var Bu=Bh.getLayoutDataCache(Bh.getCurrentLayoutKey());var By=M.call(Bh,{k:Bv,wid:1},Bh.getLayoutKeyByUnitKey(Bv));Bh.raiseEvent({name:"secondaryDataSliced",key:Bv,data:Bu[By].data});}return ;}if(Bi.dataCacheUpdate&&!Bi.dataCacheUpdate.def.hasOwnProperty(Bv)){if(Bw.setDirty){Bw.setDirty(true);}}else{if(parseInt(Bx.t,10)===BA.PANELSTACK){Bw.setDirtyChildren();}}});var Bt=Be.events||{K0:Be},Bp;for(Bp in Bt){var Bl=AC.call(Bh,Bt[Bp].ctlKey,1);if(Bl&&Bi.dataCacheUpdate&&!Bi.dataCacheUpdate.upd.hasOwnProperty(Bl.id)){var Bs=(Bl.children&&Bl.children[0].selectedIndices)||{},Bo=Bl.node.data,Bm=mstrmojo.DocSelector.STYLES,Bn=[];if(Bl.isDynamicAttributeSelector()){Bo.exp=Bl.expr;if(!Bl.expr&&R.find(Bo.elms,"v",j.ELEM_ALL_ID)>=0){Bn.push(j.ELEM_ALL);}}else{if(Bl.style===Bm.SEARCH_BOX){var Br=(Bl.children&&Bl.children[0].items)||[];R.forEach(Br,function(Bu){Bn.push(Z.clone(Bu));});}else{Z.forEach(Bs,function(Bv,Bu){if(Bv){Bn.push(Bo.elms[Bu]);}});}}var Bq=R.find(Bn,"v",j.ELEM_ALL_ID);if(Bq>-1){Bn=[Bn[Bq]];}Bo.ces=Bn;Bl.selIdx=Bs;}}}};if(Be.isUConDS||(parseInt(Be.type,10)===BA.GRAPH&&Be.tty===1)){Bk.success=function(Bl){Bh.controller.setData(Bl,true);};return Bk;}if((parseInt(Be.type,10)===3)){return Bk;}return BR(Bk,Bj);},slice:function f(Be){var Bf=this.getDataService(),Bg=Bf.newUpdateWithoutCmd();this.sliceDeferred(Bg,Be);if(Bg.actions&&Bg.actions.length>0){Bf.addSuppressData(Bg.extras);Bg.submit();}},sliceDeferred:function(Bm,Bp){var Bk={};try{if(!Bp||(!mstrmojo.dom.isAndroid&&!Bp.tks&&!Bp.multiSelect&&(Bp.type===3||(Bp.type===BA.GRAPH&&parseInt(Bp.tty,10)!==1)))){return Bk;}var Bh=this.getSliceCallback(Bp),Bv=this,Bq=this.getDataService(),Bo=Bv.controller.view;var Bw=parseInt(Bp.type,10);if(Bw===3){r.call(Bv,Bm,Bp);return ;}if(Bp.multiSelect){if(Bp.selectorObjects.length>0){Bq.setMultiDocSelectorElements(Bp.selectorObjects,Bp.multiSelect,Bh);}return ;}if(Bw===BA.GRAPH){Bm.add(Bq.getGraphSelectionAction(Bp.src,Bp.cks,Bp.sid,Bp.x,Bp.y,(Bp.tty===1)),Bh);if(!!Bp.showLoadingIcon){Bm.addExtras({config:mstrmojo.DocDataService.PROGRESS_CONFIG});}return ;}var Be=Bp.events||{K0:Bp},Bn=[],Bu,Bi={config:mstrmojo.DocDataService.PROGRESS_CONFIG},Bt=Bi.params={},Br,Bf={},Bg=function(By,Bx){if(By){Bf[Bx]=By.visName;}};for(Br in Be){Bp=Be[Br];if(!Bp){break;}if(Bp.hasOwnProperty("eid")){if(Bp.isUConDS){Bp.disablePU=true;}if(AR.call(this)){Bp.disablePU=true;Bp.restoreIW=true;}Bu=Bq.getSelectorElementsAction(Bp);if(Bv.sdp){Bf={};BT(Bv.sdp,Bg);Bt.sdpKeys=JSON.stringify(Bf);}if(Bp.disablePU){Bt.disablePU=true;}}else{if(Bp.fromGM){Bu=Bq.getSelectorFromGMAction(Bp);}else{if(parseInt(Bp.srct,10)===4||Bp.fid){if(Bp.fid&&AR.call(this)){Bp.disablePU=true;}Bu=Bq.getSelectorExpressionAction(Bp);}else{if(Bp.unset){Bu=Bq.getUnsetSelectorAction(Bp);}else{if(Bp.expr){Bu=Bq.getAttributeSelectorExpressionAction(Bp);}else{if(parseInt(Bp.ct,10)===6){Bu=Bq.getMultiUnitSelectorAction(Bp);Bv.hasUnitSelector=Bp.selections&&Bp.selections.hasElements;}else{Bu=Bq.getSelectorIncludeAction(Bp);}}}}}}Bn.push(Bu);}Bm.add(Bn,Bh,Bi);var Bl=function(Bx){Bx.extras.style={params:{treesToRender:3}};Bx.callback=BR({success:function By(Bz){Bv.partialUpdate(Bz.data,Bv.getUnitDefinitions(Bp.cgb),Bz.defn,Bp.cgb,Bz.puFilters);}},Bx.callback);return Bx;};if(Bp.isNavigation){var Bj=(Bo._layouts||[]).filter(function(Bx){return Bx.k===Bp.layoutKey;})[0];if(Bj){if(!Bo.showLayout(Bj,null,Bm,Bp.panelKey)){Bm=Bl(Bm);Bo.showPanel(Bp.panelKey,Bp.layoutKey,Bm);}}else{Bo.loadDocLayout({layoutKey:Bp.layoutKey,panelKey:Bp.panelKey},null,Bm);}}else{Bm=Bl(Bm);}}catch(Bs){mstrmojo.err(Bs);}},getInfoWindow:function AF(Bf){var Be=this.infoWindows;return Be&&Be[Bf];},getTargetInfoWin:function(Bf){var Be=[],Bg=BZ.call(this,Bf);if(Bg){var Bh;for(Bh in Bg){if(Bg[Bh]&&Bg[Bh].ifw){Be.push(Bh);}}}return Be;},addInfoWinByKey:function AO(Bf,Be){if(!this.infoWinByKey){this.infoWinByKey={};}if(!this.infoWinByKey[Bf]){this.infoWinByKey[Bf]=[Be];return ;}if(R.find(this.infoWinByKey[Bf],"id",Be.id)===-1){this.infoWinByKey[Bf].push(Be);}},getInfoWinByKey:function BV(Bg,Be){var Bh=null,Bf=this.getCurrentLayoutKey();if(this.infoWinByKey&&this.infoWinByKey[Bg]){R.forEach(this.infoWinByKey[Bg],function(Bi){var Bj=Bi&&Bi.id;if(Bj&&Bj.indexOf(Bg)>-1&&Bj.indexOf(Bf)>-1){if(!Be||Bj.indexOf("*x"+Be)>-1){Bh=Bi;return false;}}});}return Bh;},showInfoWin:function AB(Bi,Bh,Bf,Bj,Bk,Be){var Bg=this.getInfoWinByKey(Bi,Be);if(Bg===null){return ;}this.raiseEvent({name:"showInfoWin",psId:Bg.id,psKey:Bg.k,anchor:Bh,anchorOrientation:Bf,anchorPosition:Bk,invalidate:Bj});},getSelectedXtabStyles:function x(Bg){var Bf=Bg||this.currlaykey;var Bi={};var Be=this.data&&this.data.layouts,Bh;for(Bh in Be){if(Be[Bh].k===Bf){Bi=Be[Bh].xtabStyles;break;}}return Bi;},downloadGridData:function G(Bj,Bk){var Bh=this,Bg=Bj.xtabId,Bf=Bj.memo,Bi=mstrmojo.all[Bg],Be=this.newCallback({success:function(Bs){function Bl(Bw,By){var Bz=Bh.getChildren(Bw,true),Bx=Bz.length,Bv;for(Bv=0;Bv<Bx;Bv++){var B0=Bz[Bv];if(By===B0.id){return B0;}var Bu=Bl(B0,By);if(Bu){return Bu;}}return null;}var Bp=t.call(Bh,Bs.data,Bh.currlaykey);if(Bp){if(Bh.restoreNodeId){Bg=Bh.restoreNodeId(Bg);}var Bo=Bl(Bp,Bg);if(Bo){mstrmojo.models.template.DataInterface.inflateGridData(Bo.data);if(Bi){Bi.dataDownloaded(Bo,Bf);}}var Br=Bp.xtabStyles;if(Br){Bh.raiseEvent({name:"updateStyles",key:Bp.k,updatedStyles:Br});}}var Bq=AN.call(Bh,Bh.defn,Bh.currlaykey,Bj.nodeKey);if(Bq&&Bq.t===BA.GRIDGRAPH&&Bf.recalculating){var Bn=Bi.parent,Bt=Bn&&Bn.getGraphWidget();if(Bt&&Bn.updateGraph){Bn.updateGraph(Bl(Bp,Bt.id));}}if(Bs.pukeys){var Bm=BZ.call(Bh,Bs.pukeys);delete Bm[Bj.nodeKey];if(!Z.isEmpty(Bm)){Bh.partialUpdate(Bs.data,Bm);}}},failure:Bi.dataDownloadErr||mstrmojo.emptyFn});this.getDataService().downloadGridData(Bj,BR(Be,Bk));},clearDisposables:function Az(){var Be=[];R.forEach(this.disposables,function(Bf){if(Bf._lkz){BM(Bf);}else{Be.push(Bf);}});this.disposables=Be;},getFixedHeaders:function(Bf,Be){return Ak.call(this,Bf,Be,[BA.PAGEHEADER],true);},getFixedFooters:function(Bf,Be){return Ak.call(this,Bf,Be,[BA.PAGEFOOTER],true);},getNonFixedSections:function(Bf,Be){return Ak.call(this,Bf,Be,[BA.PAGEHEADER,BA.PAGEFOOTER],false);},addAutoWidthID:function u(Bg){var Bf=this.aws||{},Be=Bf[this.currlaykey]||[];Be.push(Bg);Bf[this.currlaykey]=Be;this.aws=Bf;},getAutoWidthIDs:function Q(){var Bg=this.aws,Be=this.currlaykey;var Bf=Bg&&Bg[Be];if(Bf){delete Bg[Be];}return Bf;},getTransactionUpdates:function w(Be){return this.txDiscardTargets?"":AY.call(this,Be);},clearTransactionUpdates:function Aa(Be){this.clearTxDeltaUpdate(Be);},resetTransactionUpdates:function A4(Be){var Bf=this.pendingUpdate,Bg=this.delta;if(Bf&&Bf[Be]){BT(Bf[Be],function(Bh,Bi){if(Bg&&!Bg[Bi]){Bg[Bi]=Bh;}});delete Bf[Be];}},transactionUpdate:function BK(Bg,Bf){if(!Bg.data){return null;}var Bi;if(Bf&&Bf.tks){Bi=BZ.call(this,Bf.tks);}if(Bg.pukeys){Bi=BZ.call(this,Bg.pukeys);var Bj;for(Bj in Bi){if(Bi[Bj]&&Bi[Bj].cek){Bi[Bj].cek=null;}}}if(Bg.txrcd){this.txrcd=Bg.txrcd;}else{delete this.txrcd;}var Bh=this.updateDataCache(Bg.data,Bi,Bf&&Bf.sid),Be={name:"partialUpdate",tree:Bg.data,ids:Bh};if(!Z.isEmpty(Bh.ifws)){if(Bf&&Bf.type===BA.GRID){Be.anchor=Bf.anchor;}else{Bh.ifws={};}}this.raiseEvent(Be);return Bh;},deltaUpdate:function A2(Be){var Bf=this.delta;if(!Bf){Bf=this.delta={};}Bf[Be.id]=Be;},clearTxDeltaUpdate:function d(Bf){var Bi=this.txDiscardTargets,Be=!Bi,Bh=this.pendingUpdate,Bg=this;if(!Be){BT(Bi,function(Bj,Bk){if(Bg.delta&&Bg.delta[Bk]){Bg.delta[Bk].clear();delete Bg.delta[Bk];}});}if(Bh&&Bh[Bf]){BT(Bh[Bf],function(Bj){Bj.clear();});delete this.pendingUpdate[Bf];}},sendTransactionActions:function J(Bf,Be,Bh){var Bg=this;if(!Bh){Bh={success:function(Bi){Bg.transactionUpdate(Bi);}};}Bg.getDataService().sendTransactionActions({keyContext:Bf,actions:Be,txrcd:this.txrcd},Bh);},sendTransactionUpdates:function Av(Be){var Bg=this.getSliceCallback(Be),Bf=this.getDataService();Bf.submitUpdates([Bf.getUpdateTransactionAction(Be)],Bg);},addSDP:function BF(Bf,Be){if(!Bf||!Be){return ;}if(!this.sdp){this.sdp={};}this.sdp[Bf]={k:Be.k,visName:Be.visName};},removeSDP:function A7(Be){if(!Be||!this.sdp||!this.sdp[Be]){return ;}delete this.sdp[Be];},getUpdateColorMapCallback:function n(){var Be=this;return{success:function(Bf){Be.defn.epm=Bf.defn&&Bf.defn.epm;AZ.call(Be);Be.raiseEvent({name:"colorMapChanged"});}};},getUpdateThemePaletteCallback:function A1(Bg){var Bh=this,Be,Bf;if(mstrApp.isInVFConfigMode){mstrApp.requireRestoreVFConfigMode=true;Be=Bh.getVIMap().getComponent(K);Bf=mstrApp.getRootController();mstrApp.isInVFConfigPage=false;Bf.view.closeInlineDialog();Bh.destroyVisualiztionselector();Bf.restorePanelStatus(Be);Bf.maskMenuToolbar(false);}return{success:function(Bi){Bh.thm=Bi.thm;Bh.plt=Bi.plt;Bh.defmts=Bi.defmts;AZ.call(Bh,!Bg);Bh.layoutstyle=Bi.layoutstyle;}};},getCurrentPaletteColors:function Ai(){return(this.plt&&this.plt.colors)||S;},getCurrentPaletteId:function F(){return this.plt&&this.plt.did;},getCurrentDefaultPaletteId:function BG(){return(this.thm&&this.thm.dplt)||BX;},getCurrentLayoutStyle:function BS(){return this.layoutstyle||Ap;},getColorBy:function(Bk,Be){var Bi=Be.map(function(Bm,Bl){return{levelID:Bk[Bl].toString(),elemID:Bm};});if(Bi&&Bi.length>1){AG(Bi);}var Bj=O(Bi),Bh=BY(Bi),Bg=b[Bj];if(!Bg){Bg=b[Bj]={_currentColorIdx:0};}if(!Bg[Bh]){var Bf=this.getCurrentPaletteColors();Bg[Bh]=Bf[Bg._currentColorIdx];Bg._currentColorIdx=(Bg._currentColorIdx+1)%Bf.length;}if(H[Bj]&&H[Bj][Bh]){return{color:H[Bj][Bh].color,isManual:true};}return{color:Bg[Bh],isManual:false};},getZoomFactor:function AQ(){return this.getCurrentLayoutDef().zf||1;},getZoomProps:function Au(){return{dpi:this.dpi,zf:this.getZoomFactor()};},executeLink:function v(Be,Bg,Bi){if(Be.indexOf("prevMsgID")>0){Be=BH(Be,/prevMsgID=0($|&)/g,"prevMsgID="+this.mid);}if(Be.indexOf("originMessageID")>0){Be=BH(Be,/originMessageID=[a-zA-Z0-9]*($|&)/g,"originMessageID="+this.mid);}Be=mstrmojo.addCSRFTokenToURL(Be);if(Be.indexOf(mstrApp.name+"=")===-1&&!mstrmojo.isUrlExternal(Be)){var Bh=mstrApp.servletState||mstrConfig.servletState||"";var Bf=mstrApp.name+"="+window.encodeURIComponent(Bh);if(Be.indexOf("?")>-1){Be+="&";}else{Be+="?";}Be+=Bf;}this.controller.onLink(this,{url:Be,target:Bg,src:Bi||null,submitAsPost:!mstrmojo.isUrlExternal(Be)});},getDatasetUnits:function BJ(Bf,Be,Bh,Bj){var Bi=this.datasets,Bg=[];Z.keyarray(Bi).forEach(function(Bl){if(!Bh||Bl===Bh){var Bm=Bi[Bl],Bk=Bm,Bn=[];Bf.forEach(function(Bo){if(Bj!==undefined){Bk=Bm.tables[Bj];}(Bk[Bo]||[]).forEach(function(Bp){if(!Be||Be(Bp)){Bn.push(Bp);}});});Bg=Bg.concat(Bn.map(function(Bo){return mstrmojo.hash.copyProps(["did","attId","n","t","st","ndetype","formType","dt","f","hide","usedInDropZones","card","lock","fs","lvfs"],Bo,{ds:Bm.name,dsId:Bl,dm:!!Bo.um,da:!!Bo.da,de:!!Bo.de});}));}});return Bg;},getMapLayerKeys:function Ay(Be){if(Be&&Be.getSdpKeyArr){return Be.getSdpKeyArr();}return[];},getDeleteMapLayersActions:function BP(Bg){var Be,Bh=[],Bf=this;(Bg||[]).forEach(function(Bi){Be=Bf.getLayoutUnitDefn(Bi);Bh.push({act:"removeUnit",unitKey:Bi,unitType:(Be&&Be.t)||522});});return Bh;},syncLayerDefn:function q(Bi,Bg,Bf){var Bh=this.getCurrentLayoutDef(),Be=(Bh&&Bh.units)||{};(Bg||[]).forEach(function(Bj){if(Be[Bj]){if(Bf){Be[Bj]._isDeleted=true;}else{delete Be[Bj]._isDeleted;}}});if(Bf){mstrApp.primaryScdpMap[Bi]=[];}else{mstrApp.primaryScdpMap[Bi]=Bg;}},getFormatSDPAction:function Ao(Bg,Bf){var Be={FormattingWidget:{SecondaryDataProviders:Bf.join(",")}};return this.getUnitFormatAction(Bg,1,Be,true);},addMapLayerActions:function BC(Br,Bj,Bm,Bl){var Bn=this.getNextKey(),Bh=this.getPanel().k,Bq=Br.scriptClass==="mstrmojo.mapbox.VisMapbox",Bf=Bq?As.MAPBOX:As.GOOGLE_MAP,Be=Bq?Bb.MAPBOX:Bb.GOOGLEMAP,Bp=this.getWidgetClassNameByStyle(Bf,Be),Bo=this.getMapLayerKeys(Br),Bg=Br.defn.tt,Bk={k:Bn,defn:{t:521}},Bi={FormattingAppearance:{Visible:0,Name:Bl}};Bj.push(this.getCopyEmptyTemplateAction(Bn,Bh));Bj.push({act:"updateTemplate",keyContext:Bn,actions:[{act:"createDefaultDropZones",nodeKey:Bn,treeType:Bg,datasetType:3,widgetType:Be}]});Bj.push(this.getUnitChangeVizAction(Bf,Bp,Bk,Bm,Bi));Bj.push({act:"changeGridDisplayMode",nodeKey:Bn,displayMode:1});Bj.push(this.getFormatSDPAction(Br,Bo.concat(Bn)));return Bn;},removeMapLayerActions:function AH(Bg,Bf,Bh){var Be=this.getLayoutUnitDefn(Bf);Bh.push({act:"removeUnit",unitKey:Bf,unitType:(Be&&Be.t)||522});Bh.push(this.getFormatSDPAction(Bg,this.getMapLayerKeys(Bg)));},getExtraActionsForChangeMapViz:function AL(Bg,Bf,Bj){var Bh=Bg.parent,Bi,Be=this;if(Bf&&Bf.length>0){R.forEach(Bf,function(Bk){if(!Bg.isPrimaryKey(Bk)){Bi=Be.clearVisAsFilterActionForMapLayer(Bh,Bg.fnGetWidget(Bk),true);if(Bi&&Bi.actions){Bj=Bj.concat(Bi.actions);}}});Bj=Bj.concat(this.getDeleteMapLayersActions(Bf));Bj.push(this.getFormatSDPAction(Bg,[]));this.syncLayerDefn(Bg.k,Bf,true);}return Bj;},isMapLayerNode:function m(Bf){var Be=false;Z.forEach(mstrApp.primaryScdpMap,function(Bg){if(Bg.indexOf(Bf)>=0){Be=true;return false;}});return Be;},getMapLayersDataByHostKey:function W(Bk){var Bg={},Bj,Bi=this,Bh=mstrApp.primaryScdpMap[Bk],Bf=this.getCurrentLayoutKey(),Be=this.getLayoutDataCache(Bf);R.forEach(Bh,function(Bl){Bj=Be[M.call(Bi,{k:Bl,wid:1},Bf)];Bg[Bl]=Bj&&Bj.data;});return Bg;},getNodeDataByKey:function AX(Bf){var Bg=this.getLayoutKeyByUnitKey(Bf),Be=this.getLayoutDataCache(this.getCurrentLayoutKey()),Bh=Be[M.call(this,{k:Bf,wid:1},Bg)];return Bh;},getMapLayerDataByLayerKey:function AX(Be){var Bf=this.getNodeDataByKey(Be);return Bf&&Bf.data;},updatePrimaryScdpMap:function Aq(Bi,Bg,Bf){var Be,Bh=mstrApp.primaryScdpMap[Bi];if(!Bh){Bh=mstrApp.primaryScdpMap[Bi]=[];}Be=Bh.indexOf(Bg);if(Bf&&Be<0){Bh.push(Bg);}else{if(!Bf&&Be>=0){Bh.splice(Be,1);}}},updateWidgetsProps:function BU(){this.raiseEvent({name:"updWgtsProps"});},restoreVFConfigMode:function AS(){var Be=this;return{success:function(){if(mstrApp.requireRestoreVFConfigMode){mstrApp.requireRestoreVFConfigMode=false;var Bi=Be,Bf=mstrApp.isVFEditingMode,Bh=mstrApp.restoreVFKey,Bg=mstrApp.restoreVFTitle;Bi.checkLargeItemsForVisFilter(Bh,function(){var Bj=Bi.addVisFilterContainer(),Bm=Bi.getSelectedViUnit(),Bl;Bi.oldSelectedVizBoxId=Bm.id;mstrApp.isInVFConfigMode=true;Bl=Bi.insertVizBox(Bh,Bj,{});Bi.controller.rootCtrl.initPanelStautsInConfigMode();Bi.selectVIUnit(Bl.id,true,{isAddAction:true});mstrApp.getRootController().enterVizFilterConfigMode(Bg,Bf);if(Bf===false){mstrApp.restoreVFCreate=true;var Bk=mstrmojo.all.visualizationFilterToolbar;Bk.toggleSaveBtn(mstrApp.isEnableSaveBtn);}});}}};},getWidgetClassNameByStyle:function At(Bg,Bf){var Be=mstrmojo.ExpressVisList.findWidgetName(Bg)||Ad[Bg];if(!Be&&parseInt(Bf)===Bb.CUSTOM){Be=p;}return Be||"";},clearColorByMap:function X(){b={};}});mstrmojo.DocModel.fnBuildId=M;}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.MetricSelectorUtility","mstrmojo.hash","mstrmojo.array","mstrmojo.expr");var G=mstrmojo.hash,L=mstrmojo.array,D=mstrmojo.DocSelector.DATAPARAMS;mstrmojo.MetricQualDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.MetricQualDocSelector",_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P","height"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},init:function P(Q){this._super(Q);this.spm=true;},initControlInfo:function O(){this._super();var R=mstrmojo.MetricSelectorUtility,T=this.node,U=T.data,S=T.defn;G.copyProps(["srcid","srct"],S,this);this.qua=U.qt;this.dt=U.dt;var Q=R.getOpIdxByfunc(U.f,U.ft);if(Q!==-1){this.include=R.getIncludeByOp(Q);}},canApply:function E(Q){return true;},onquaChange:function J(Q){this.node.data.qt=Q.value;},_buildEvent:function H(S,T){var U=[];var R=false;L.forEach(T.cs,function(Z){U.push(Z.v);if(S.dtp===undefined){S.dtp=Z.dtp;}if(Z.dtp===mstrmojo.expr.DTP.BIGDECIMAL){R=true;}});if(R){S.dtp=mstrmojo.expr.DTP.BIGDECIMAL;}if(U.length){S.cs=U.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}var X=mstrmojo.MetricSelectorUtility.getFuncInfo(T.opId,T.qua);S.f=T.f=X.f;S.ft=T.ft=X.ft;S.include=this.defn.include=this.include=T.include;S.ckey=this.ckey;S.srcid=this.srcid;S.srct=this.srct;if(T.forceUnset){S.retrieveCtrlKey=true;}S.unset=T.unSet||T.forceUnset;S.onlyInclude=T.onlyInclude;if(T.changeInclude){S.changeInclude=T.changeInclude;S.forceApply=true;T.changeInclude=false;}if(T.changeQual){S.changeQual=T.changeQual;T.changeQual=false;}S.qt=T.qua;if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){var Y=this.model,V=Y.getCurrentLayoutDef(),W=V&&V.units,Q=this.k;if(W[Q]){W[Q].cesChange=true;}Y.setDataReady(this.k,this.id,D.CSREADY,true,["f","ft","cs"],[T.f,T.ft,T.cs]);}this.node.defn.set("cek",{id:this.id,f:T.f,ft:T.ft,cs:T.cs,qua:T.qua,include:T.include});},preBuildRendering:function M(){var Q=this._super();if(this.isInFilterPanel()&&!this.isHorizFP()){this.children[0].width=this.parent.parent.contentWidth;}return Q;},postBuildRendering:function B(){this._super();if(this.formatHandlers.filterNode){var Q=this.getFormats();if(!Q.height){this.updateHeight();}}},getCekEvtListener:function C(R,Q){return function(S){R.handleActionInSyncPhase(function(){R.set("qua",S.value.qua);if(R.id!==S.value.id){Q.updateExpr(S.value);if(R.style===mstrmojo.DocSelector.STYLES.METRIC_SLIDER){R.set("include",S.value.include);}}});};},updateWidget:function N(U){var V=this._super(U),R=U.node,Q=U.selIdx,T=R.data,S=T.elms;if(V.updateData){V.numFmts=U.defn.numFmts;U.handleActionInSyncPhase(function(){V.updateData({low:T.min,high:T.max,cnt:T.cnt,nov:T.nov},{cs:T.cs,f:T.f,ft:T.ft,qua:T.qt});});}V.items=S;V.selectedIndices=Q;return V;},newAndInitWidget:function K(Q){var R=this._super(Q);Q.attachEventListener("quaChange",R.id,function(S){this.set("qua",S.value);});return R;},getWidgetConfig:function I(V,T,S,U){var R=V.getFormats(),Q=this._super(V,T,S,U);G.copyProps(["height","width","font"],R,Q);G.copyProps(["cs","ft"],S,Q);Q.fmts=S.f;Q.dt=V.dt;Q.qua=V.qua;Q.numFmts=S.numFmts;return Q;},isSelectAll:function A(){var S=mstrmojo.MetricSelectorUtility.OP,R=this.children&&this.children[0],Q=R&&(S._IS_NULL===R.opId||S._IS_NOT_NULL===R.opId);return R===undefined?true:(!R.cs||R.cs.length===0)&&!Q;},isFilterNothing:function F(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.array","mstrmojo.elementHelper");var I=mstrmojo.array,F=mstrmojo.DocSelector.ELEM_ALL_ID,H=mstrmojo.elementHelper;var C=0,K=1,J=2;var B=1,M=3;function A(O){I.forEach(O,function(P){P.n=P.v;});return O;}mstrmojo.TextBoxDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.TextBoxDocSelector",_ieformatHandlers:{domNode:["font","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["font","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_fetchOnInit4UCOnDS:function G(){},_getSelectionCount:function L(P){var O=P.items;return O?O.length:0;},_buildEvent:function D(R,Q){var O=[],P=this.defn;I.forEach(Q.items,function(S){O.push(S.v);});if(O.length>0||P.nsb===C){R.eid=O.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}else{R.eid="";}if(P.sec){this.parent.set("count",H.buildElemsCountStrByNum(O.length,0));}},updateWidget:function N(Q){var R=this._super(Q),O=Q.node,P=O.data;R.items=P.vs?A(P.vs.concat()):[];return R;},getWidgetConfig:function E(U,R,Q,T){var P=U.getFormats(),S=U.node.data,O=this._super(U,R,Q,T);O={scriptClass:O.scriptClass,cssText:P.height?"height: "+P.height:"",emptyText:mstrmojo.desc(4325,"Search")+" "+(Q.ttl||""),items:S.vs?A(S.vs.concat()):[],srcid:Q.srcid||"",dsrc:Q.dsrc||"",onitemsChange:function(){if(!U._inSyncPhase){U.selectorControlChange(this);}}};if(!Q.multi){O.maxObjectCount=1;}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.DocSelector","mstrmojo._IsSelectorTarget","mstrmojo.Serializer","mstrmojo._IsPanelStack","mstrmojo._HasBuilder","mstrmojo.array","mstrmojo.css","mstrmojo.hash");var H=mstrmojo.array;function E(O,N){var M=H.find(O.node.data.panels,"k",O.selectedKey);M+=(N||0);O.set("selectedIdx",M);}function I(M){M.set("hasNextPanel",(M.selectedIdx<(M.node.data.panels.length-1)));M.set("hasPreviousPanel",(M.selectedIdx>0));}mstrmojo.DocPanelStack=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,mstrmojo._HasBuilder,mstrmojo._IsPanelStack],{scriptClass:"mstrmojo.DocPanelStack",markupString:'<div id="{@id}" k="{@k}" title="{@tooltip}" nm="{@n}" class="mstrmojo-DocPanelStack {@cssClass}" style="{@domNodeCssText}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["RW","B","overflow"]},model:null,hasNextPanel:false,hasPreviousPanel:false,applyEnabled:false,clearEnabled:true,renderMode:"onshow",n:"",node:null,selectedIdx:undefined,selectedKey:"",init:function L(M){this._super(M);E(this);this.node.sw=(this.node.data.panels.length>1&&this.defn.sw);this.n=M.node.defn.n;},onselectedKeyChange:function J(N){var O=this._super(N),M=O.on;if(M._delayRefresh){if(!M.defn.dirtyKeys){M.refresh();}delete M._delayRefresh;}E(this);},updateSelectedIdx:function B(M){E(this,M);},onselectedIdxChange:function G(){I(this);},_bufferedSlices:null,canApply:function A(){var O,N,M,P;for(O in this.children){M=this.children[O];if(!M.children){continue;}for(N in M.children){P=M.children[N];if(P.defn&&P.defn.ttl!==undefined){P=P.children[1];}if(P&&P.canApply&&!P.canApply()){return false;}}}return true;},bufferSlice:function F(N){var M=this._bufferedSlices=this._bufferedSlices||[];M.push(N);this.set("applyEnabled",this.canApply());},applyBufferedSlices:function D(){var N=this._bufferedSlices;if(!N){return ;}var M=function(S){var R=[],Q,P=String.fromCharCode(30);mstrmojo.hash.forEach(S,function(U){Q=U.tks;if(Q){var T=H.isArray(Q)?Q:Q.split(P);R=R.concat(T);}});return R;};var O=function(R){var P=false;for(var Q=0;Q<R.length;Q++){if(R[Q].isUConDS){P=true;break;}}return P;};this.model.slice({bufferedSlices:true,tks:M(N),events:N,isUConDS:O(N)});this.clearBuffSlices();},clearBuffSlices:function(){this._bufferedSlices=null;this.set("applyEnabled",false);},_isFPS:function K(){return !!this.defn.ifp;},clearAllFilter:function C(){var R=mstrmojo.DocSelector.STYLES,M=this;if(!M._isFPS()){return ;}if(!(M.children&&M.children.length)){return ;}var Q,O,V,X,U,N,S;for(Q in M.children){V=M.children[Q];if(!V.children){continue;}for(O in V.children){X=V.children[O];if(X.defn.ttl!=="undefined"){X=X.children[1];}if(X.model){U={tks:X.tks,ck:X.ck,ckey:X.ckey,unset:true};M.bufferSlice(U);var T=X.node.defn,P=X.node.data;var W=H.filterOne(P.elms,function(Y){return Y.t===14;});if(T.showall&&W){P.ces=[W];T.cek=[W.v];}else{P.ces=[];T.cek=null;}P.unset=true;P.cs=[];N=X.content;if(parseInt(T.style,10)===R.SCROLLER){N.min=0;S=N.items&&N.items.length;N.max=S?S-1:0;}X.update(X.node);X.refresh();}}}},update:function(O){if(this._super){this._super(O);}var M=O.data&&O.data.selKey;if(M&&M!==this.selectedKey){this.defn.newSelKey=M;}var N=function(P){return P.data&&P.data.panels&&P.data.panels.length;};if(this.children&&(this.children.length!==N(O))){this.rebuildPanels();}},rebuildPanels:function(){this.destroyChildren(false);this.buildChildren(false);},postBuildRendering:function(){this._super();if(this.defn.itb){mstrmojo.css.addClass(this.domNode,"tableControl");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.DocSelector","mstrmojo.ui.MultiSelectPulldown","mstrmojo.ui.MultiSelectSearchablePulldown","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown");var N=mstrmojo.hash,J=mstrmojo.array,D=mstrmojo.dom,Q=mstrmojo.elementHelper,P=mstrmojo.DocSelector.DATAPARAMS,S=mstrmojo.DocSelector.STYLES;var M=0,B=1,C=2,G=4,H=1000;function L(b){var a=null,W=null,Z=0,Y,X;for(Y in b){X=Number(Y);Z++;a=(a===null||a>X)?X:a;W=(W===null||W<X)?X:W;}return Z===0||W-a===Z-1;}mstrmojo.ListDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.ListDocSelector",formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P","height"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_buildEvent:function I(w,a){var n=this.node,Z=this.defn,k=n.data.elms,b=[],q=[],z=a.multiSelect,c=a.selectedIndices,g=a.allIdx,e=!!c[g],r,m,u=[],f=this.include,h=function(){var AA=this.isInFilterPanel()&&this.getFilterPanel();return AA&&AA.isAutoApply();}.bind(this);if(!z){var W=k[a.selectedIndex],j=W.v;b=[j];u=[j+";"+W.n];q=[W];}else{if(e){m=k[g].v;b=[m];u=[m];q=[k[g]];}else{if(c[g]){c[g]=false;}var t=N.keyarray(c,true).sort(J.numSorter),l={};for(r in t){l[t[r]]=c[t[r]];}c=l;N.forEach(c,function(AB,AA){if(AB&&!k[AA].hid){b.push(k[AA].v);u.push(k[AA].v+";"+k[AA].n);q.push(k[AA]);}});}}this.defn.set("cek",b);if(b.length>0||!Z.nsb||Z.nsb===M){if(mstrApp&&mstrApp.isVI&&parseInt(this.style,10)===G&&k&&k.length>H&&b.length>k.length/2&&(h()||!this.isInFilterPanel())){w.include=!f;w.forceBuffer=true;w.requireToggle=true;a.include=!f;var p=[],Y=[];J.forEach(k,function(AB,AA){if(AA!==g&&!c[AA]){p.push(AB.v);Y.push(AB.v+";"+AB.n);}});this.defn.set("cek",p);w.eid=((parseInt(w.type,10)===1)?Y:p).join(Q.ELEM_SEPARATOR);}else{w.eid=((parseInt(w.type,10)===1)?u:b).join(Q.ELEM_SEPARATOR);}}else{if(Z.nsb===B||!Z.showall){w.unset=true;}else{if(Z.nsb===C){w.eid=Q.ELEM_ALL_ID;q=[k[g]];}}}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){var v=this.model,x=v.getCurrentLayoutDef(),o=x&&x.units,X=this.k;if(o&&o[X]){o[X].cesChange=true;}n.data.ces=q;n.data[P.CESREADY]=true;this.model.setDataReady(this.k,this.id,P.CESREADY,true,"ces",q);}var d=D.position(a.domNode,true);if(d){w.left=d.x;w.top=d.y;}if(e&&this.multi&&f){J.forEach(k,function(AB){var AA=AB.v;if(b[0]!==AA){b.push(AA);}});}if(Z.sec){if(Z.style!==mstrmojo.DocSelector.STYLES.SCROLLER){this.parent.set("count",Q.buildElemsCountStr(Z.multi?b:k,k,this.isSelectionExcluded()));}}},getCekEvtListener:function V(Y,X){var W=Y.defn.style;if(W===S.PULLDOWN||W===S.SCROLLER){return function(Z){var d=X.items,e={};if(!X.multiSelect){var a=X.selectedIndex=J.find(d,"v",Z.value[0]);if(a>-1){e[a]=true;}}else{var c=X.allIdx,b;if(c>-1&&J.indexOf(Z.value,d[c].v)>-1){for(b=0;b<d.length;b++){e[b]=true;}}else{J.forEach(Z.value,function(g){var f=J.find(d,"v",g);if(f>-1){e[f]=true;}});}}Y.selIdx=X.selectedIndices=e;Y.handleActionInSyncPhase(function(){X.refresh();});};}return this._super(Y,X);},preBuildRendering:function A(){var Y=this.node.defn.style,X=N.clone(this.formatHandlers),W=X.contentNode;if(W){if((Y===S.RADIO||Y===S.CHECKBOX)&&X.filterNode){W.push("fx");W.push("background-color");delete X.filterNode;}if(Y===S.LIST){delete W.height;}}this.formatHandlers=X;return this._super();},getWidgetClass:function T(Y,X,W){if(X===S.PULLDOWN){if(mstrApp.isVI&&!D.isMobile){return Y.multi?"ui.MultiSelectSearchablePulldown":"ui.SearchablePulldown";}return Y.multi?"ui.MultiSelectPulldown":"ui.Pulldown";}return this._super(Y,X,W);},getWidgetConfig:function F(b,Z,Y,a){var X=b.getFormats(),W=this._super(b,Z,Y,a);if(Z===S.SCROLLER){b.extCls="extSlider";if(mstrApp&&mstrApp.isVI){W.isHoriz=true;}N.copyProps(["height","width"],X,W);}if(Z===S.PULLDOWN&&!Y.multi){W.isHostedWithin=false;W.onitemSelected=W.onchange;W.allowHTML=false;W.focusOnPopup=mstrmojo.App&&mstrmojo.App.isOIVM();}if(this.isRecursiveAttributeSelector()){W.getlevelNames=function(){var c={};J.forEach(b.levelForms,function(d){c[d.lv]=d.lvfn;});return c;};}return W;},updateWidget:function O(Z){var a=this._super(Z),W=Z.selIdx;var X=a.items=Z.node.data.elms;a.selectedIndices=W;a.include=Z.defn.include;if(!a.multiSelect&&X&&X.length){var Y=N.keyarray(W);if(Y.length===1){a.selectedIndex=Number(Y[0]);}else{a.selectedIndices={};a.selectedIndex=-1;}}return a;},isSelectAll:function E(){var Z=this.node.data.elms,Y=this.children&&this.children[0],a=Y.selectedIndices,X=Y.allIdx,W=!!a[X],b=(Z[X]&&Z[X].v)||Q.ELEM_ALL_ID;if(this.include){return W||J.filter(Z,function(c){return c.v!==b;}).length===N.keyarray(a).length;}else{return N.isEmpty(a);}},isFilterNothing:function K(){var Y=this.children&&this.children[0],Z=Y.selectedIndices,X=Y.allIdx,W=!!Z[X];return W;},destroy:function U(){var W=this.node.data;this._super();if(W.del){J.insert(W.elms,W.del.idx,W.del.elem);delete W.del;}},isValidSelection:function R(){var Y=this.node,Z=Y.data,X=Y.defn,a=Z.ces,W=this.model;if(!X.multi&&a&&a.length>1&&!this.allowsTogglingMultiSelect()){return false;}if(X.style===mstrmojo.DocSelector.STYLES.SCROLLER&&!L(this.selIdx)){return false;}if(W.isSelWarnFlagOn(this.k)&&a&&a.length===0&&Z.elms.length>0){return this.children[0].noneIdx&&this.children[0].noneIdx>-1;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.fe.FilterUtils","mstrmojo.func","mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo.DocDataService");var U=mstrmojo.fe.FilterUtils,M=mstrmojo.array,O=mstrmojo.hash,R=mstrmojo.func,Q=mstrmojo.expr;var K="LEVEL_NUMBER",G=mstrmojo.DocDataService.SUPPRESS_DATA;var H=16,L=1;function C(W){return W.t===47&&W.st===12033;}function B(){return{type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,ckey:this.ckey,tks:this.tks};}mstrmojo.DynamicListDocSelector=mstrmojo.declare(mstrmojo.DocSelector,null,{scriptClass:"mstrmojo.DynamicListDocSelector",_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P","height"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},_buildEvent:function J(Z,Y){var X=this.node,a=this.getAttrInfo(),W;W=Y.buildSelectionExprJSON(a);X.defn.set("cek",{expr:W,disablePU:true});Z.expr=U.getExprXml(W);if(this.incFetch){Z.prKey=this.k;}},initControlInfo:function F(){var W=this.node.data;this._super();O.copy({incFetch:W.inc!==false,levelForms:W.lvfs||[]},this);},getCekEvtListener:function V(X,W){return function(Y){var Z=Y.value;if(Z.hasOwnProperty("expr")){X.expr=Z.expr;if(!Z.disablePU){X.handleActionInSyncPhase(function(){W.setSelectionByExprJSON(Z.expr);W.refresh();});}}};},updateWidget:function P(a){var b=this._super(a),W=a.getAttrInfo(),Y=a.node,Z=Y.data,X=Y.defn;b.updateItems(Z.elms,Z.p_relation);if(a.lockSelection){b.setSelectionByExprJSON(a.expr);}else{if(Z.unset){b.setSelectionByExprJSON();}else{if(Z.exp){b.setSelectionByExprJSON(Z.exp);}else{if(Z.ces){b.setSelectionByList(Z.ces,X.include);}}}a.expr=b.buildSelectionExprJSON(this.getAttrInfo());}b.browseFlags=H+(C(W)?0:L);return b;},clearSelector:function S(X){var W=B.call(this);this.node.defn.set("cek",{expr:null});W.unset=true;W[X?"forceApply":"forceBuffer"]=true;this.slice(W);},getWidgetConfig:function E(b,Y,X,Z){var a=b.levelForms,W=this._super(b,Y,X,Z);if(a.length>0){W.getMaxLevel=function(){return b.getMaxLevel();};W.getLevels=function(){return b.getLevels();};}W.getLevelExpression=function(d){var c=b.getAttrInfo();return b.getLevelExpression(c,d);};W.delegateExpandCollapse=function(c,d){return b.onExpandCollapse(c,d,!b.incFetch);};return W;},onExpandCollapse:function T(b,h,W){var g=this,Y=this.isInFilterPanel()&&this.getFilterPanel(),Z=this.node,f=Z.defn,d=this.model,X=d.getDataService(),c=[X.getRASelectorExpandAction({ck:f.ck,ckey:f.ckey,elementId:b.elementId,isExpand:b.isExpand?1:0})],e=W?h:R.wrapMethods({success:function(k){var j;if(Y){j=Y.getBufferedSlice(f.ckey);}g.lockSelection=true;d.partialUpdate(k.data,d.getTargetDefn(Z.k));g.lockSelection=false;if(Y&&j){Y.bufferSlice(j);}}},h),a=W?G:{};d.controller.cmdMgr.execute({execute:function(){this.submit(c,e,a);},urInfo:{extraPuKeys:f.ck.split("\u001E").slice(1),treesToRender:3}});return !W;},getMaxLevel:function A(){var W=0;M.forEach(this.levelForms,function(X){if(X.lv>0){W=Math.max(W,X.lv);}});return W;},getLevels:function D(){return M.map(this.levelForms,function(W){return{v:W.lv,n:W.lvfn};});},getLevelExpression:function I(X,Y){var W=(X.fs||[]).filter(function(Z){return(Z.n||Z.fnm)===K;})[0];if(W&&parseInt(Y,10)>=0){return{et:Q.ET.AQ,fn:Q.FN.EQUAL,a:O.copyProps(["did","n","t","st"],X),fm:{did:W.did||W.fid,n:K,dtp:Q.DTP.INTEGER},cs:[{v:Y,dtp:Q.DTP.INTEGER}]};}return null;},getAttrInfo:function N(W){var Z=this.node.defn,Y=this.model.datasets,X;W=W||Z.srcid;O.forEach(Y,function(b){X=b.att.filter(function(c){return c.did===W;})[0];if(X){return false;}});if(X&&C(X)){var a=this.getAttrInfo(X.attId);X.fs=a.fs;X.lvfs=a.lvfs;}return X?X:{};}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.css","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.models.editors.XtabEditorModel","mstrmojo.elementHelper");var X=mstrmojo.css,R=mstrmojo.hash,I=mstrmojo.dom,N=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType,W=mstrmojo.elementHelper,Y=mstrmojo.vi.models.editors.XtabEditorModel.ENUM_EDITOR_TARGETS,a={cssClass:"grpHlt",top:"grpT",bottom:"grpB",left:"grpL",right:"grpR",midHoriz:"grpMidH",midVert:"grpMidV"},H=function(g,f){var d=this.zone;f=f||(d&&d.tableNode);if(f){var e=[],h=f.tBodies,j=function(m,l){var o=m.length,k=-1,n;while(o-k>1){if(m[n=o+k>>1].getAttribute("ei")<l){k=n;}else{o=n;}}return(m[o]&&parseInt(m[o].getAttribute("ei"),10)===l)?m[o]:null;};N.forEach(g,function(l){var o=l._ei,m;for(m=0;m<h.length;m++){var k=h[m],n=j(k.getElementsByClassName(l.css),o);if(n){e.push(n);}}});return e;}return[];},E=function(d){var f=this.model.getCellDataUnion(d),e={};N.forEach(f,function(g){e[g.tid]=[{id:g.eid,n:g.v}];});return e;},c=function(j){var h=j[R.keyarray(j)[0]],d=R.keyarray(h),f,g=this,e=this.model,k={};return H.call(this,N.filter(this.interactiveCellsArray,function(m){if(m.hasOwnProperty("mix")){var n=E.call(g,m);f=N.filter(d,function(o){var p=e.getLinkedAttributes(o),q=false;if(!!n[o]){k[o]=o;q=true;}else{N.forEach(p,function(r){if(!!n[r]){k[o]=r;q=true;return false;}});}return q;});var l=false;R.forEach(j,function(o){N.forEach(f,function(p){if(!e.compareElementsId(n[k[p]][0].id,o[p][0].id)){l=false;return false;}l=true;});if(l){return false;}});return l;}return false;}));},C=function(h,n){var o=(function(){var j=[];R.forEach(h,function(q){R.forEach(q,function(r,t){N.forEach(r,function(u){j.push([t,u.id]);});});});return j;}()),m,k=this,d=N.filter(this.interactiveCellsArray,function(q){m=false;var r=!q.hasOwnProperty("mix")&&q._e&&q.fi===undefined,j=!r&&E.call(k,q);if(r){N.forEach(o,function(t){if((!n||k.model.getCellTitleInfo(q).title.id===t[0])){m=k.model.compareElementsId(q._e.id,t[1]);}if(m){return false;}});}else{if(!n&&j){R.forEach(j,function(t){N.forEach(o,function(u){N.forEach((t||[]),function(v){if(v.id){m=k.model.compareElementsId(v.id,u[1]);}});if(m){return false;}});if(m){return false;}});}}return m;}),l=H.call(this,d),p=[],g,f,e;if(n){p=l;}else{N.forEach(l,function(j){g=d[N.find(d,"_ei",j.getAttribute("ei"))];if(g.axis===1){var t=0,r=j.rowSpan||1,q=j.parentNode;do{e=q.childNodes;for(f=0;f<e.length;f++){p.push(e[f]);}}while((++t<r)&&(q=q.nextSibling));}else{p.push(j);}});}return p;},M=function(h,e){if(!this.getFormatTargetFromCell){return[];}var g=this.getSubtotalFormatUseGridFormat(h),f=this.model;var j=this.id,d;return H.call(this,N.filter(this.interactiveCellsArray,function(k){d=mstrmojo.all[j].getFormatTargetFromCell(k)===h;if(e){return(d&&(k.stt===1||f.isSubtotalValue(k)));}if(!g){return(d&&!(k.stt===1||f.isSubtotalValue(k)));}return d;}));},L=function(f){var h=[],j;var g=this.getSubtotalFormatUseGridFormat(Y.COLUMNS);if(this.getFormatTargetFromCell){N.forEach(this.interactiveCellsArray,function(k){if(this.getFormatTargetFromCell(k)!==Y.COLUMNS){return false;}if((f&&k.stt===1)||(!f&&(g||(!g&&k.stt!==1)))){h.push(k);}return true;},this);}var e=this.xtabClonedNodes;if(e){var d=N.filterOne(e,function(k){return k.lockType===2;});if(d){j=d.domNode.getElementsByTagName("table")[0];}}return H.call(this,h,j);},J=function(d,e,g){var f=["xtabSel"].concat(I.isIE||I.isIEW3C?"ie":[],"sc_"+this.k);if(!e||g){f.push("range");}if(!e){f=f.concat(R.valarray(a));}X.toggleClass(d,f,e);},S=function(d,e){var f=["XtabContextMenuSel"].concat(I.isIE||I.isIEW3C?"ie":[],"sc_"+this.k);X.toggleClass(d,f,e);},P=function(e){var d=this;return H.call(this,N.filter(this.interactiveCellsArray,function(f){var g=d.model.getCellInfo(f);if(g.isHeader||g.isTitle){return false;}if(f.hasOwnProperty("mix")){if(e.target.id===f._tp._e.oid){var j=true;var h=d.model.getCellDataUnion(f);return !N.some(h,function(k){return e.parentElementIds.indexOf(k.eid)<0;});}}return false;}));},K=function(e){var d=this;return H.call(d,N.filter(d.interactiveCellsArray,function(f){var h=!f.hasOwnProperty("mix")&&f._e&&f.fi===undefined;if(h){if(e.target.id===f._e.id){var g=f;while(g.hasOwnProperty("_p")){if(e.parentElementIds.indexOf(g._p._e.id)<0){return false;}else{g=g._p;}}return true;}}return false;}));};mstrmojo.vi.ui.rw._XtabHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabHighlights",{_mixinName:"mstrmojo.vi.ui.rw._XtabHighlights",highlights:null,contextMenuHighLights:null,highlight:function G(f,h,d){if(this._super){this._super.apply(this,arguments);}var g=mstrmojo.vi.ui.rw.SelectionType,e=[];this.clearHighlights();switch(f){case g.METRICS:e=c.call(this,h);break;case g.ATTS:e=C.call(this,h,d);break;}this.highlightCells(e,d);},highlightAttrOrMetricCell:function Z(g){var f=this,d=[],e=mstrmojo.vi.ui.rw.SelectionType;this.clearHighlights();N.forEach(g,function(h){if(h.target.selectionType===e.ATTS){d=d.concat(K.call(f,h));}else{d=d.concat(P.call(f,h));}});this.highlightCells(d,false);},highlightRange:function b(f,j,d){var g=mstrmojo.vi.ui.rw.SelectionType,h=j?this.highlights.slice():null,e=[];this.clearHighlights();switch(f){case g.COL_HEADERS:e=L.call(this,d);break;case g.ROW_HEADERS:e=M.call(this,Y.ROWS,d);break;case g.METRIC_VALUES:e=M.call(this,Y.VALUES,d);break;}N.forEach(e,function(m){var l=true;if(h){var k=N.indexOf(h,m);l=k===-1;if(!l){h.splice(k,1);}}J.call(this,m,true,l);},this);this.highlights=e;},clearSelections:function D(){if(this._super){this._super();}this.clearHighlights();},clearCxtMnuSelection:function F(){if(this._super){this._super();}this.clearContextMenuHighlights();},clearHighlights:function B(){N.forEach(this.highlights,function(e){J.call(this,e,false);},this);this.highlights=[];try{var f=this.getCellForNode(this.lastSelectedCell),j=f&&this.gridData.gts[f.axis===1?"row":"col"],d=j&&j[f.tui||f.ui],g=d&&d.id;if(g){this.zone.clearHilites(g);}}catch(h){}},clearContextMenuHighlights:function V(){N.forEach(this.contextMenuHighLights,function(d){S.call(this,d,false);},this);this.contextMenuHighLights=[];},highlightCellsById:function Q(j,h,g){var f=this.model,d=function(k,l,m){return k[l]&&k[l]._e&&k[l]._e[m]===j;},e=H.call(this,N.filter(this.interactiveCellsArray,function(l){var k=false;if(h===A.DssTypeMetric){k=d(l,"_tp","oid")||d(l,"_lp","oid");}else{if(h===A.DssTypeAttribute){if(g){k=d(l,"_tp","id")||d(l,"_lp","id");}else{if(f&&f.getNormalizedFormElementId&&l._e&&l._e.id){k=W.getAttributeId(f.getNormalizedFormElementId(l._e.id))===j;}}}}return k;}));this.clearHighlights();this.highlightCells(e);},highlightCells:function(e,d){if(this._super){this._super(e,d);}N.forEach(e,function(f){J.call(this,f,true);},this);this.highlights=e;},highlightCellsWithContextMenuSelection:function(d){N.forEach(d,function(e){S.call(this,e,true);},this);this.contextMenuHighLights=d;},configureActions:function O(){if(this._super){this._super();}if(!!this.selectorControl&&!this.isCustomSort){this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}},highlightGroupCells:function U(e,d){var f=this.highlights;N.forEach(e,function(h){var m=h[0]&&h[0].axis||1,n=(m===1),j=this[n?"clonedRowHeader":"clonedColHeader"],l=(j?j.getTableNode():this.zone.tableNode),k=H.call(this,h,l),g=k.length;f=f.concat(k);N.forEach(k,function(r,o){var q=a,p=[q.cssClass];if(g>1){if(n){p.push(o>0?(o<g-1?q.midVert:q.bottom):q.top);}else{p.push(o>0?(o<g-1?q.midHoriz:q.right):q.left);}}X.addClass(r,p);},this);},this);this.highlights=f;},clearGroupHighlights:function T(){var d=R.valarray(a);N.forEach(this.highlights,function(e){X.toggleClass(e,d,false);},this);}});mstrmojo.vi.ui.rw._XtabHighlights.GROUP_BORDER_CSS=a;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Editor","mstrmojo.Label","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.vi.ui.ConditionWalk","mstrmojo.fe.FilterUtils","mstrmojo.expr");mstrmojo.requiresDescs(15540);var I=mstrmojo.array,M=mstrmojo.hash,R=mstrmojo.Button.newWebButton,G=mstrmojo.mstr.EnumNodeDimty,P=I.hash([G.NodeDimtyUnspecified,G.NodeDimtyNone]),B=mstrmojo.fe.FilterUtils,J=mstrmojo.expr,Q=J.ET;mstrmojo.vi.ui.ConditionEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.ConditionEditor",cssClass:"mstrmojo-vi-ui-ConditionEditor",help:"Creating_a_Metric_Qualification.htm",title:mstrmojo.desc(15540,"Edit Qualification"),objectBrowsingEnabled:false,targets:null,targetsLastMod:null,ets:null,condition:null,model:null,hasPrompt:false,disableElementsBrowsing:null,inRelation:null,editor:null,children:[{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',cssDisplay:"inline-block",cssClass:"conditionBar",model:null,alias:"conditionBar",bindings:{model:"this.parent.model"},update:function(){var E=this.model,T=B.getExprNodeHtmlAndText(E.data?E.data:E,{emptyText:mstrmojo.desc(15413,"Qualification Details"),elemsEmpty:" "});if(this.containerNode){this.containerNode.innerHTML=T.html;this.containerNode.title=T.text;}}},{scriptClass:"mstrmojo.vi.ui.ConditionWalk",alias:"walk",dimtyTypes:P,delegateUpdateOkBtn:function D(U){var E=this.parent,V=E&&E.btnHbox,T=V&&V.okBtn;if(T){T.set("enabled",!!U);}},onOK:function O(){var T=this.condition,E=this.editor;E.onConditionEdit(T,this.model.get());},close:function L(){var E=this.condition;if(E&&E.isEmpty()){E.del();}},postmodeledit:function H(E){this.parent.updateConditionBar();},getIfDataSource:function S(){return this.parent.getIfDataSource();},onUpdateBrowseElementsParams:function N(E){this.parent.onUpdateBrowseElementsParams(E);},getDatasets:function F(){return this.parent.getDatasets();}}],buttons:[R(mstrmojo.desc(1442,"OK"),function(){var E=this.parent.parent;E.walk.onOK();E.close();},true,{enabled:true,alias:"okBtn"}),R(mstrmojo.desc(221,"Cancel"),function(){var E=this.parent.parent;E.close();})],updateConditionBar:function A(){this.conditionBar.update();},open:function K(U,E){this._super(U,E);var T={objectBrowsingEnabled:this.objectBrowsingEnabled,targets:this.targets,targetsLastMod:this.targetsLastMod,ets:this.ets,condition:this.condition,hasPrompt:this.hasPrompt,disableElementsBrowsing:this.disableElementsBrowsing,disableHierarchyLevel:this.disableHierarchyLevel,inRelation:this.inRelation,editor:this.editor};M.copy(T,this.walk);if(!(this.disableElementsBrowsing&&this.disableElementsBrowsing())){this.model.defaultETAttr=Q.AE;}this.walk.set("model",this.model);this.updateConditionBar();},onClose:function C(){this.walk.close();},getDatasets:mstrmojo.emptyFn,getIfDataSource:mstrmojo.emptyFn,onUpdateBrowseElementsParams:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Widget","mstrmojo.Label","mstrmojo.Box","mstrmojo.desc","mstrmojo.css","mstrmojo.hash","mstrmojo.dom","mstrmojo.array","mstrmojo.expr","mstrmojo.models.FormatModel","mstrmojo.ui._HasScroller","mstrmojo._HasPopup","mstrmojo.vi.ui.ConditionEditor","mstrmojo.threshold.ThresholdRow","mstrmojo.threshold.ConditionWalk","mstrmojo.threshold.PropertyPanel","mstrmojo.threshold.PropertyModel","mstrmojo.threshold.ThresholdRowPanel","mstrmojo.mstr.EnumNodeProperties","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes");var B=mstrmojo.css,P=mstrmojo.hash,O=mstrmojo.dom,E=mstrmojo.mstr.EnumNodeProperties,Y=mstrmojo.mstr.EnumDSSXMLObjectTypes,r=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,N=mstrmojo.expr,Z=N.ET,g=N.BRANCH_FNS,c=mstrmojo.Button.newWebButton,m=mstrmojo.models.FormatModel.getFormatUpdate,h=600,L="";var X=mstrmojo.models.FormatModel.ENUM_NUMBER_FORMAT_KEYS_OBJ,o=[X.CATEGORY,X.CURRENCY_POSITION,X.CURRENCY_SYMBOL,X.DECIMAL_PLACES,X.FORMAT,X.NEGATIVE_NUMBERS,X.THOUSAND_SEPARATOR],V=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,w=[V.BORDER_TOP_STYLE,V.BORDER_RIGHT_STYLE,V.BORDER_BOTTOM_STYLE,V.BORDER_LEFT_STYLE],n={0:"none",1:"1pt solid",3:"1pt dashed",4:"1pt dotted",5:"1.5pt solid"};function k(x,AA){var z=[];if(AA){AA.forEach(function(AC){var AD=AC.fmt,AB={FormattingAppearance:{Visible:-1}};if(!!AD){AD.nth=AD.nth?-1:0;if(!!AD.bc&&!!AD.bc.c1){delete AD.gdc;delete AD.gda;}}P.forEach(AD,function(AE,AF){var AG=false;if(o.indexOf(AF)>-1){m(AF,AE,AB);}else{if(w.indexOf(AF)===-1){m(AF,AE,AB);}else{if(!AD.borderStyle&&!AG){m(V.BORDER_STYLE,n[AE],AB);}}}});x.setAttIdToNDE(AC.expr);z.push({n:AC.n,scope:AC.scope,rtp:AC.rtp,rtxt:AC.rtxt,expr:mstrmojo.fe.FilterUtils.getExprXml(AC.expr),fmt:AB});});}return z;}function q(AC){var z=this.controller,AA=this.model,AB=AA.thresholds,AD=this.metricId,AF=AB&&AB[AD],AE=AA.orgThresholds,x=AE&&AE[AD];z.onSubmitActions(k(AA,AF),x,AD,undefined,-1,AC,this.objectType);}function G(x){(x||[]).forEach(function(z){delete z.dmy;var AA=z.nds;if(AA){G(AA);}});}function b(){var AB=this.content,x=this.model,AF=x.thresholds,AA=this,AC=[],AE=AB.rowPanel,AD=AF&&AF[x.metricId],z=0;if(AD){AD.forEach(function(AG){G(AG.expr.nds);AC.push({scriptClass:"mstrmojo.threshold.ThresholdRow",threshold:AG,editor:AA,model:x,idx:z++});});}AE.destroyChildren(false);AE.addChildren(AC);this.updateScrollbars();}function l(){var AD=this.content.rowPanel,AB=AD.children,z=(AB&&AB.length)||0,AA=this.model,AE=AA.thresholds,AC=AE&&AE[AA.metricId],x={expr:{et:14,fn:19}},AF={et:Z.AE};if(!AE){AE=AA.thresholds={};}if(!AC){AC=AE[AA.metricId]=[];}AC.push(x);AD.addChildren([{scriptClass:"mstrmojo.threshold.ThresholdRow",threshold:x,editor:this,model:AA,idx:z}]);if(this.disableElementsBrowsing&&this.disableElementsBrowsing()){AF.et=Z.AQ;}AD.children[z].exprTree.newCondition(AF);this.updateScrollbars();}function u(z){var x=this.model,AB=x.thresholds,AA=AB&&AB[x.metricId];if(AA){AA.forEach(function(AC){x.toggleThresholdSelected(AC,z);});}}function J(AC,AD){var x=this.controller,z=this.model,AA=this.metricId,AB=z.selectedThresholds;if(AB.length>0){x.onSaveThresholds(k(z,AB),AA,-1,AC,AD);}}function M(z){var AB="mstrIVE_THRESHOLD_SAVER",x=z.controller.dataService.model,AA=mstrmojo.all[AB];if(!AA){AA=new mstrmojo.SaveAsEditor({id:AB,zIndex:z.zIndex+1,folderLinksContextId:32,rootFolderID:x.isnew?null:x.pfid,showCompletePath:false,saveParams:{},typeDesc:mstrmojo.desc(3647,"Thresholds"),saveAs:function(AE){var AC=this.contPanel;this.name=AC.name.value;this.desc=AC.desc.value;if(!this.name){mstrmojo.alert(mstrmojo.desc(3380,"Please enter valid name"));return ;}var AF=this.saveParams||{};AF.folderId=this.ob.currentFolder.did;AF.name=this.name||"New Thresholds";AF.saveAsOverwrite=!!AE;var AD=this.saveAsCallback();AD.failure=function(AH){var AG=AH.code,AI=this.parent;if(AG==="-2147217373"||AG==="-2147216857"){mstrmojo.warn(mstrmojo.desc(7986,"The ## '###' already exists. Do you want to replace the existing one?").replace("##",AI.typeDesc||"Object").replace("###",AI.name),{confirmBtn:{fn:function(){AI.saveAs(true);}}},{title:mstrmojo.desc(3179,"Confirm Overwrite"),zIndex:AI&&AI.zIndex+10});}else{mstrmojo.alert(mstrmojo.desc(7985,"Error while saving: ")+AH.message);}};AD.parent=this;J.call(z,AF,AD);}});AA.render();}AA.open();}function f(AA){var AF="mstrIVE_THRESHOLD_LOADER",AD=mstrmojo.all[AF],z=AA.controller.dataService.model,AE=[72];if(!AD){AD=new mstrmojo.vi.ui.editors.ObjectPicker({id:AF,supportedTypes:mstrmojo.array.hash(AE),zIndex:AA.zIndex+1,rootFolderID:z.isnew?null:z.pfid,onOpen:function x(){this.browse();},postBuildRendering:function AC(){mstrmojo.Editor.prototype.postBuildRendering.apply(this);},OKFn:function(AG){if(AG){AA.controller.onLoadThresholds(AA.metricId,AG.did);}}});var AB=AD.ob;AB.set("folderLinksContextId",32);AB.set("multiSelect",false);AB.set("searchVisible",true);AB.set("upButtonVisible",true);AB.set("browsableTypes","8,"+AE.join(","));AD.render();}AD.open();}function S(z){if(!z){return ;}if(z.t===Y.Consolidation&&z.st===r.ConsolidationManaged){var x=mstrApp&&mstrApp.rootCtrl&&mstrApp.rootCtrl.docCtrl&&mstrApp.rootCtrl.docCtrl.model;if(x&&x.findUnitInDataSet){z=x.findUnitInDataSet(z.did);if(z&&z.attId){z=x.findUnitInDataSet(z.attId);}}}return z.t===Y.Attribute&&z.st===r.AttributeRecursive;}function F(z){var AA=P.clone(z);if(!(AA.node&E.CONDITION)&&S(AA.a)){AA={et:Z.ANDOR,fn:mstrmojo.expr.FN.AND,node:E.CONDITION,nds:[AA]};}if(AA&&AA.et===Z.ANDOR&&(AA.node&E.CONDITION)){var AB=P.valarray(N.findTargets(AA,"did"))[0],x={et:Z.ANDOR,data:AA};switch(AB&&AB.t){case Y.Attribute:case Y.Consolidation:x.a=AB;break;case Y.Metric:x.m=AB;break;}return x;}return AA;}mstrmojo.threshold.AdvancedThresholdEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui._HasScroller,mstrmojo._HasPopup],{scriptClass:"mstrmojo.threshold.AdvancedThresholdEditor",cssClass:"adv-threshold",title:"Advanced Threshold Editor",help:"Advanced_Thresholds_Editor.htm",model:undefined,targets:undefined,content:undefined,buttonBar:undefined,init:function p(x){this._super(x);L=this.id;},postBuildRendering:function R(){this._super();var x=this.content;b.call(this);x.conditionWalk.set("editor",this);x.property.set("editor",this);},onOpen:function T(){b.call(this);this.setRowPanelVisibility(true);var x=this.content;x.conditionWalk.set("visible",false);x.property.set("visible",false);x.set("editorNode",this.editorNode);var z=this.buttonBar&&this.buttonBar.quickLink;if(!!z){z.set("visible",this.objectType!==12);}},setupScrollNodes:function j(){this.scrollNode=this.content.containerNode;},onClose:function a(){this.model.cleanUp();},onmodelChange:function A(){var x=this.model;if(x){x.attachEventListener("modelEdit",this.id,"onmodelEdit");x.attachEventListener("selectedThresholdsChange",this.id,"onselectedThresholdsChange");b.call(this);}},onselectedThresholdsChange:function I(){},openConditionWalk:function D(AE,AD){var AB=this,AC=AB.content,z=AD.tree.parent,x=P.clone(z.threshold),AA=O.position(AB.titleNode);x.expr=AE;var AF=new mstrmojo.threshold.ThresholdRow({alias:"thresholdRow",slot:"conditionNode",idx:z.idx,model:this.model,threshold:x,onclick:mstrmojo.emptyFn});AF.render();B.toggleClass(AB.content.domNode,"no-overflow",true);AB.openPopup("conditionEditorPopupRef",{editor:AB,objectBrowsingEnabled:AB.objectBrowsingEnabled,showLimits:true,targets:AB.targets,targetsLastMod:new Date(),ets:AD.tree.validExprTypes,condition:AD,hasPrompt:false,model:F(AE),left:parseInt(AA.x+(AA.w-h)/2,10)+"px",top:parseInt(AA.y+AA.h,10)+"px",zIndex:AB.zIndex+1,title:AD.isEmpty()?mstrmojo.desc(5893,"New Condition"):mstrmojo.desc(14916,"Edit Condition"),disableHierarchyLevel:true});},onmodelEdit:function U(){b.call(this);},openPropertyPanel:function H(x){this.setRowPanelVisibility(false);var AA=this.content.property,z=AA.model=new mstrmojo.threshold.PropertyModel({thresholdRow:x,threshold:P.clone(x.threshold),gridValueFormat:P.clone(this.model.getGridValueFormat())});this.disposables.push(z);z.attachEventListener("propertyModelChange",x.id,"onpropertyModelChange");AA.set("visible",true);this.toggleButtonStatus(false);this.updateScrollbars();},getDatasets:function e(){if(this.model){return this.model.controller.datasets;}return null;},getIfDataSource:function W(){if(this.model){return this.model.controller.dataService;}return null;},onUpdateBrowseElementsParams:mstrmojo.emptyFn,onConditionEdit:function K(AA,z){var x=this;x.model.setConditionData(AA,z);x.setRowPanelVisibility(true);x.toggleButtonStatus(true);x.updateScrollbars();},conditionEditorPopupRef:{scriptClass:"mstrmojo.vi.ui.ConditionEditor",isHostedWithin:false,getIfDataSource:function W(){return this.editor.getIfDataSource();},getDatasets:function e(){return this.editor.getDatasets();},onUpdateBrowseElementsParams:function v(x){this.editor.onUpdateBrowseElementsParams(x);}},openAndORPopup:function t(AB,x){var z=new mstrmojo.ui.menus.MenuConfig();z.hostId=this.id;z.hostElement=x;z.isHostedWithin=false;z.menuCssClass="andor-PopupList";var AA=function AA(AH){var AC=AB,AG=AH.ctxt.did,AF=AG>21?true:null,AE=AG-(AF?21:0);var AD=AC&&AC.parent;if(AD&&AD.data&&AD.data.et===Z.ANDOR){AD.edit(AC,AE,AF);}else{var AI=AC&&AC.data;if(AI&&(AI.not!==AF)){AI.not=AF;AC.paint();}}};z.addMenuItem(g[19],"",AA,{did:19});z.addMenuItem(g[20],"",AA,{did:20});z.addMenuItem(g["19_21"],"",AA,{did:19+21});z.addMenuItem(g["20_21"],"",AA,{did:20+21});this.openPopup(z.newInstance());},toggleButtonStatus:function C(x){this.buttonBar.children.forEach(function(z){z.set("enabled",x);});},setRowPanelVisibility:function Q(z){var x=this.content;x.rowPanel.set("visible",z);x.newCondition.set("visible",z);this.updateScrollbars();},children:[{scriptClass:"mstrmojo.Widget",alias:"rulesTitles",markupString:"<div class='rulesTitles'><div class='container'></div><div class='order'>"+mstrmojo.desc(3095,"Order")+"</div><div class='condition'>"+mstrmojo.desc(11890,"Threshold Conditions")+"</div><div class='format'>"+mstrmojo.desc(11891,"Format Preview")+"</div></div>"},{scriptClass:"mstrmojo.Box",cssClass:"content",alias:"content",editorNode:undefined,markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"><div class="scroll-container"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},rowPanel:undefined,newCondition:undefined,conditionWalk:undefined,property:undefined,children:[{scriptClass:"mstrmojo.threshold.ThresholdRowPanel",alias:"rowPanel",children:[]},{scriptClass:"mstrmojo.Label",alias:"newCondition",cssClass:"link",text:mstrmojo.desc(4585,"New Threshold"),onclick:function d(){l.call(mstrmojo.all[L]);}},{scriptClass:"mstrmojo.threshold.ConditionWalk",alias:"conditionWalk",height:"300px",width:"750px",visible:false},{scriptClass:"mstrmojo.threshold.PropertyPanel",alias:"property",visible:false}]},{alias:"buttonBar",scriptClass:"mstrmojo.Box",slot:"buttonNode",children:[c(mstrmojo.desc(221,"Cancel"),function(){mstrmojo.all[L].close();},false,{enabled:true,alias:"cancelBtn"}),c(mstrmojo.desc(1442,"OK"),function(){q.call(mstrmojo.all[L],false);mstrmojo.all[L].close();},true),c(mstrmojo.desc(2031,"Apply"),function(){q.call(mstrmojo.all[L],true);},true),{scriptClass:"mstrmojo.Label",cssClass:"link",alias:"quickLink",text:mstrmojo.desc(14004,"Quick Thresholds Editor..."),onclick:function d(){var AA=mstrmojo.all[L],z=AA.model,x=AA.controller,AC=z.isAdvanced(z.metricId),AD=function(){AA.close();z.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.SIMPLE_EDITOR;},AB=[c(AC?mstrmojo.desc(1442,"OK"):mstrmojo.desc(2827,"Clear"),function(){AD();x.openEditor();},AC,AC?undefined:{cssClass:"nosave"})];if(!AC){AB.push(c(mstrmojo.desc(2031,"Apply"),function(){AD();q.call(AA,true);},true));}AB.push(c(mstrmojo.desc(2223,"Cancel")));mstrmojo.warn(AC?mstrmojo.desc(13998,"This action will clear the thresholds definition. Do you want to proceed?"):mstrmojo.desc(13999,"Do you want to apply your thresholds before using the Quick Thresholds Editor?"),undefined,{cssClass:AC?undefined:"save-threshold-warning",buttons:AB});}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.DocLayout","mstrmojo.DocLayoutHoriz","mstrmojo.DocSectionHoriz","mstrmojo.DocSection","mstrmojo.DocSubsection","mstrmojo.DocPanelStack","mstrmojo.DocPanel","mstrmojo.DocTextfield","mstrmojo._CanSupportTransaction","mstrmojo._IsEditableTextfield","mstrmojo._HasDocLink","mstrmojo.DocImage","mstrmojo.DocLine","mstrmojo.DocRectangle","mstrmojo.DocRoundRectangle","mstrmojo.EnumRWUnitType","mstrmojo.DynamicClassFactory","mstrmojo.Button","mstrmojo.ToolBar","mstrmojo.DocSelector","mstrmojo.FilterPanelMenu","mstrmojo.DocPortlet","mstrmojo.DocResizablePortlet","mstrmojo.DocXtabGraph","mstrmojo.DocGridGraph","mstrmojo.DocVisualization","mstrmojo.DocXtabModel","mstrmojo.hash","mstrmojo.dom");var H=mstrmojo.hash,E=mstrmojo.dom,A=mstrmojo.EnumRWUnitType,N=mstrmojo.DynamicClassFactory.newComponent,R=mstrmojo.elementHelper,S=mstrmojo.Button.newIconButton,L={};function K(W){return function(){return this.parent.parent["on"+W]();};}var M=K("maximize"),T=K("restore"),G=K("minimize");function V(X,a,Y,W,Z){return S(X,a,Y,null,{ds:W,visible:(Z!==W)});}function I(W,a,Z){var Y=this.classMap[a].n+(Z?"Hover":""),X=L[Y];if(!X){X=L[Y]=N(W,[mstrmojo._HasDocLink].concat(this.getLinkDrillMixins(Z)));}return X;}function Q(d,Z,Y){var a=H.walk(Y.scriptClass,window),b=Z&&Z.defn,X=Z&&Z.data,g=(b&&b.t),f=(g===A.TEXTFIELD&&((b&&b.dpst)));if(g===A.TEXTFIELD||g===A.IMAGE){var e=X.dl,c=b.dl,W=(e&&e.items&&e.items.length)||(c&&c.items&&c.items.length>0);if(W||X.url||b.url||b.ifw){a=I.call(this,a,g+(f?"B":""),W);}else{if((g===A.TEXTFIELD)&&b.txi){a=N(a,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableTextfield]);}else{if(g===A.TEXTFIELD&&Z.defn.iifs){a=mstrmojo.DocSummaryTextfield;}}}}return this.newRWUnitInstance(d,Z,a);}mstrmojo.rw._IsReportServicesDocBuilder=mstrmojo.provide("mstrmojo.rw._IsReportServicesDocBuilder",{_mixinName:"mstrmojo.rw._IsReportServicesDocBuilder",createClassMap:function B(){var W=this._super();W[A.LAYOUT]={n:"Layout"};W[A.SUBSECTION]={scriptClass:"mstrmojo.DocSubsection"};W[A.PANELSTACK]={n:"PanelStack",scriptClass:"mstrmojo.DocPanelStack"};W[A.PANEL]={n:"Panel",scriptClass:"mstrmojo.DocPanel"};W[A.TEXTFIELD]={n:"Textfield",scriptClass:"mstrmojo.DocTextfield"};W[A.IMAGE]={n:"Image",scriptClass:"mstrmojo.DocImage"};W[A.LINE]={n:"Line",scriptClass:"mstrmojo.DocLine"};W[A.RECTANGLE]={n:"Rectangle",scriptClass:"mstrmojo.DocRectangle"};W[A.ROUNDEDRECTANGLE]={n:"RoundedRectangle"};W[A.GRAPH]={n:"XtabGraph",scriptClass:"mstrmojo.DocXtabGraph"};W[A.GRIDGRAPH]={n:"GridGraph",scriptClass:"mstrmojo.DocGridGraph"};W[A.VISUALIZATION]={n:"Visualization",scriptClass:"mstrmojo.DocVisualization"};return W;},getLayoutViewerClass:function D(W){this.throwAbstractMethodError("getLayoutViewerClass");},newLayout:function U(b,Z){var Y=[],X=Z.data,a=Z.defn,W=this.getLayoutViewerClass(Z),e=new W({n:a.title,model:b,node:Z,controller:this.parent.controller,tbc:a.tbc,slot:"containerNode",visible:false,ifs:X.ifs,gb:X.gbys});var c=e.defn=H.copy(a);c.fmts=H.copy(a.fmts);function f(l,m){var g=l.length;if(g){for(var j=0;j<g;j++){var k=this.build([l[j]],b)[0];k.slot=m;Y.push(k);}}}f.call(this,b.getFixedHeaders(Z),"fixedHeaderNode");var d=a.horiz?mstrmojo.DocLayoutHoriz:mstrmojo.DocLayout;Y.push(new d({slot:"layout",id:Z.id,k:Z.k,minHeight:X.mh,formatResolver:b.formatResolver,rules:a.rules,builder:this,node:Z,defn:a,model:b}));f.call(this,b.getFixedFooters(Z),"fixedFooterNode");e.addChildren(Y);return e;},newSection:function O(W,X){return this.newRWUnitInstance(W,X,(X.defn.horiz&&X.data.subsections.length>1)?mstrmojo.DocSectionHoriz:mstrmojo.DocSection);},newPanelStack:function F(X,Y,W){return this.newRWUnitInstance(X,Y,W.cls||H.walk(W.scriptClass,window));},newTextfield:Q,newImage:Q,newButton:Q,newRoundedRectangle:function J(W,X){return this.newRWUnitInstance(W,X,E.supports(E.cssFeatures.ROUND_CORNERS)?mstrmojo.DocRectangle:mstrmojo.DocRoundRectangle);},getPortletExportGridToolbar:mstrmojo.emptyFn,createPortlet:function C(AF,o,AC){var AK=o.defn,a=AK.ds,AB=(AK.iifp||!(AF===A.PANELSTACK||(AK.ttl===undefined&&AK.qsm)||AF===A.SELECTOR)),d=(AF===A.GRAPH||AF===A.GRIDGRAPH),k=[],AG="",q="",m="",X=(AF===A.GRID||d||AF===A.VISUALIZATION||AF===A.MOJOVISUALIZATION)&&parseInt(AK.eo,10)!==2,W=[],AD="mstrmojo-oivmSprite ",u=false,Z;if(AK.qsm){AG="qks";var b=function(AN,t,w){return S(AN,AD+t,function(){return this.parent.parent.content.quickSwitch();},{visible:"this.parent.parent.defn.qsm !== this.qsm"},{qsm:w});};k.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",cssClass:(!AB)?"grouped":"",children:[b(mstrmojo.desc(3547,"View: Grid"),"tbGrid",1),b(mstrmojo.desc(3548,"View: Graph"),"tbGraph",2)]});}if(X){Z=this.getPortletExportGridToolbar(AC);if(Z){q=Z.css;W=Z.node;k.push(W);}}if(AB){if(AK.iifp){AG="wrap";k.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",children:[V(mstrmojo.desc(8973,"Collapse"),"co",null,1,a),V(mstrmojo.desc(8972,"Expand"),"ex",null,0,a)]});}else{var x=[V(mstrmojo.desc(4539,"Minimize"),"mn",G,1,a),V(mstrmojo.desc(4540,"Restore"),"rs",T,0,a),V(mstrmojo.desc(4541,"Maximize"),"mx",M,2,a)];if(X&&Z){W.children=(W.children||[]).concat(x);}else{q="resize";k.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:x});}}}AC.slot="contentNode";AC.alias="content";AC.title=AK.ttl||"";if(AK.sec){var AH=o.data.elms,j=o.data.ces,r=o.data.unset,AJ=(j&&j.length)||0,AL=(AH&&AH.length)||0,AI;if(AK.sos){AC.contentClass="fpsb";for(AI=AJ-1;AI>=0;AI--){if(j[AI]._did_){AJ--;}}AC.count=R.buildElemsCountStrByNum(AJ,AL);}if(j&&AH&&AH.length&&AK.style!==mstrmojo.DocSelector.STYLES.SCROLLER){if(AK.multi){if(r){AC.count=R.buildElemsCountStr(AH,AH);}else{AC.count=R.buildElemsCountStr(j,AH,!AK.include);}}else{AC.count=R.buildElemsCountStr(AH,AH);}}}k.push(AC);if(AF===A.PANELSTACK){var f=function(AO,w,AN,t){return S(AO,AD+w,function(){return this.parent.parent.content.switchToPanel(t);},{enabled:"this.parent.parent."+AN});},h=[],Y=[],n=!!o.sw,g=!!AK.ifw,c=!!AK.ifp;if(n){Y.push(f(mstrmojo.desc(1058,"Previous"),"tbPrev","prevEnabled",-1));h.push(f(mstrmojo.desc(2917,"Next"),"tbNext","nextEnabled",1));}if(g){h.push(S(mstrmojo.desc(2102,"Close"),AD+"mstrmojo-DocInfoWindow-close",function(){this.parent.parent.parent.close();}));}if(c){m="ifp";var z=mstrmojo.desc(2164,"Apply");k.push({scriptClass:"mstrmojo.HBox",slot:"buttonbarNode",alias:"buttonbar",cssClass:"buttonBox",children:[{scriptClass:"mstrmojo.Button",alias:"resetBtn",title:mstrmojo.desc(8329,"Unset"),text:mstrmojo.desc(8329,"Unset"),cssClass:"mstrmojo-FilterPanel-Btn apply",bindings:{visible:function(){return !AK.cas;},enabled:function(){return this.parent.parent.clearEnabled;}},onclick:function AA(){if(AC&&AC.clearBuffSlices){AC.clearBuffSlices();AC.clearAllFilter();AC.applyBufferedSlices();}}},{scriptClass:"mstrmojo.Button",alias:"applyNow",title:z,text:z,cssClass:"mstrmojo-FilterPanel-Btn apply",bindings:{visible:function(){return !AK.cas;},enabled:function(){return this.parent.parent.applyEnabled;}},onclick:function AA(){if(AC&&AC.applyBufferedSlices){AC.applyBufferedSlices();}}}]});h.push({scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-oivmSprite tbDown",alias:"btnMenu",onclick:function AA(){this.openPopupMenu();},openPopupMenu:function(){var t=mstrmojo.findAncestor(this,"openPopupMenu");if(t){t.openPopupMenu("mstrmojo.FilterPanelMenu",{openerButton:this,fps:AC,cmPos:this.cmPos,lockIW:AC});}}});u=true;}if(g||c){var AM=[];if(n){AM[0]="pst-l";}if(c){AM.push("ifp");}Y.push({scriptClass:"mstrmojo.Box",cssClass:AM.join(" ")});}if(g||n||c){var p=g?"ifw ":"",AE=c?"ifp ":"",e=!AK.cas?"cas ":"";q=(n?"pst-r ":"")+p+AE+e;AG=(n?"pst-l ":"")+p+AE+e;k.push({scriptClass:"mstrmojo.ToolBar",slot:"leftToolbarNode",alias:"leftToolbar",children:Y});k.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:h});}}if(AF===A.SELECTOR&&AC.spm){q="spm";k.push({scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-oivmSprite tbDown",alias:"btnMenu",onclick:function AA(t){t.cancel();this.openPopupMenu();},openPopupMenu:function(){var t=mstrmojo.findAncestor(this,"openPopupMenu");if(t){t.openPopupMenu("mstrmojo.SelectorMenu",{openerButton:this,selector:AC,cmPos:this.cmPos});}}}]});u=true;}var v=AB?mstrmojo.DocResizablePortlet:mstrmojo.DocPortlet,l={k:AC.k,defn:AC.defn,model:AC.model,children:k,title:AC.title,count:AC.count,floatingTitle:(AK.ttl===undefined&&AK.qsm),leftToolbarNodeClass:AG,loadDataOnResize:d,toolbarNodeClass:q,buttonbarNodeClass:m,attachContextMenuEvent:u};if(AF===A.PANELSTACK){l.bindings={title:"this.children[0].title"};if(o.sw){l.bindings.prevEnabled=function(){return this.children[0].hasPreviousPanel;};l.bindings.nextEnabled=function(){return this.children[0].hasNextPanel;};}if(AK.ifp){l.bindings.applyEnabled=function(){return this.children[0].applyEnabled;};l.bindings.clearEnabled=function(){return this.children[0].clearEnabled;};}}if(AK.iifp){l.onclicktitle=function(){if(AC.defn.ds===1){AC.parent.onexpand();}else{AC.parent.oncollapse();}};}return new v(l);},newXtabModel:function P(W){return new mstrmojo.DocXtabModel(W);}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelector","mstrmojo.TextBoxDocSelector","mstrmojo.array","mstrmojo.string","mstrmojo.elementHelper","mstrmojo.mstr.EnumDSSXMLObjectTypes");var H=mstrmojo.array,G=mstrmojo.string,J=mstrmojo.elementHelper,N=mstrmojo.DocSelector.DATAPARAMS,T=mstrmojo.mstr.EnumDSSXMLObjectTypes,M=J.ELEM_ALL_ID;var K=0,B=1,C=2;var Q=1,R=3;var O=J.ELEM_ALL;mstrmojo.SearchBoxDocSelector=mstrmojo.declare(mstrmojo.TextBoxDocSelector,null,{scriptClass:"mstrmojo.SearchBoxDocSelector",filterElemALL:false,_buildEvent:function F(V,Z){var c=[],W,Y=[],b=this.defn;H.forEach(Z.items,function(f){f.n=mstrmojo.string.multiReplace(f.n,{";":"\\;"});c.push(f.v+";"+G.decodeHtmlString(f.n));Y.push(f);});W=c.length;if(!W){c.push(M);}if(c.length>0||!b.nsb||b.nsb===K){V.eid=c.join(mstrmojo.elementHelper.ELEM_SEPARATOR);}else{if(b.nsb===B||!b.showall){V.unset=true;}else{if(b.nsb===C){V.eid=M;Y=[O];}}}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){var e=this.model,X=this.node,d=e.getCurrentLayoutDef(),a=d&&d.units,U=this.k;if(a[U]){a[U].cesChange=true;}X.data.elms=X.data.ces=Y;X.data[N.CESREADY]=true;e.setDataReady(this.k,this.id,N.CESREADY,true,"ces",Y);e.setDataReady(this.k,this.id,"elms",Y);}if(b.sec){if(b.multi){this.parent.set("count",J.buildElemsCountStrByNum(W,0));}else{this.parent.set("count",J.buildElemsCountStrByNum(0,0));}}},updateWidget:function L(c){var V=this._super(c),W=c.node,b=W.defn,Z=W.data,U=Z.elms;if(U&&!b.sos){V.candidates=this.setupCandidates(b,U);}if(b.srcid){var X=[],a,Y=H.filter(Z.ces,function(e){return e.v!=="u;";});if(Y&&Y.constructor===Array){if(b.dfm===Q){for(a=0;a<Y.length;a++){if(Y[a].t!==R){X.push(Y[a]);}}}else{X=Y.concat();}}if(!b.sos){var d=[];H.forEach(X,function(e){if(H.find(V.candidates.items,"v",e.v)>-1){d.push(e);}});X=d;}V.items=X;}return V;},getCekEvtListener:function S(V,U){return function(W){V.handleActionInSyncPhase(function(){U.set("items",W.value);});};},getWidgetConfig:function D(e,Y,b,U){var d=e.getFormats(),X=e.node.data,a=this._super(e,Y,b,U),V=100,Z=mstrApp.isVI,W=Z&&(e.isRecursiveAttributeSelector()||e.node.defn.iase===false),c=this,f=W?{posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular pulldown",contentNodeCssClass:"srch htEnter",content:mstrmojo.desc(15764,"Hit Enter to search")}:{posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular pulldown",contentNodeCssClass:"srch",onclick:function(){var h=c.content,k=h.getSearchPattern(),j=c.id;c.model.changeFilterStyle(c,c.style,c.multi,false);this.set("allowOtherTooltips",false);h.hideTooltip();if(mstrApp.isWaiting()){var g=mstrApp.getWaitBox();var l=g.attachEventListener("visibleChange",g.id,function(m){if(m.value===false){mstrmojo.all[j].content.showInfoTooltip(k);l.clear();}});}},content:'<div class="auto">'+mstrmojo.desc(15910,"Searching...")+'</div><div class="separator"><div class="wait">'+mstrmojo.desc(15911,"Tired of waiting?")+'</div><div class="actn">'+mstrmojo.desc(15912,"Disable Instant Search")+"</div></div>"};a={scriptClass:a.scriptClass,cssText:d.height?"height: "+d.height:"",emptyText:mstrmojo.desc(4325,"Search")+" "+(b.ttl||""),richTooltip:Z?f:null,items:b.srcid?(X.ces?X.ces.concat():[]):[],REQUEST_THRESHOLD:(mstrApp&&mstrApp.SEARCH_REQUEST_THRESHOLD)||55,suggestCount:(mstrApp&&mstrApp.SEARCH_SUGGESTION_LENGTH)||V,hitEnterToTest:W,stifleIntermediateSearch:true,srcid:b.srcid||"",srct:b.srct||T.Attribute,dsrc:b.dsrc||"",useClientForm:b.srct===T.Consolidation,onitemsChange:function(){if(!e._inSyncPhase){e.showInfoWin();e.selectorControlChange(this);}}};if(U&&!b.sos){a.candidates=this.setupCandidates(b,U);}else{a.useKeyDelay=true;a.noCache=true;}if(!b.multi){a.maxObjectCount=1;}return a;},isSelectAll:function E(){var U=this.children&&this.children[0];return U===undefined?true:(!U.items||U.items.length===0);},isFilterNothing:function I(){return this.isSelectAll();},setupCandidates:function A(V,W){var U=V.srcid?W:[];if(this.filterElemALL){U=H.filter(U,function(X){return X.v!=="u;";});}return{isComplete:true,items:U};},isValidSelection:function P(){var V=this.node.data,U=this.model;if(U.isSelWarnFlagOn(this.k)&&V.ces&&V.ces.length===0){return V.elms.length!==0;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.MetricQualDocSelector");mstrmojo.MetricSliderDocSelector=mstrmojo.declare(mstrmojo.MetricQualDocSelector,null,{scriptClass:"mstrmojo.MetricSliderDocSelector",_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},newAndInitWidget:function B(E){var F=this._super(E);E.attachEventListener("includeChange",F.id,function(G){this.set("include",G.value);});return F;},getWidgetConfig:function D(I,G,F,H){var E=this._super(I,G,F,H);I.extCls="extSlider";E.isHoriz=true;E.include=F.include;return E;},isSelectAll:function C(){var E=this.children&&this.children[0];return E===undefined?true:E.unSet;},isFilterNothing:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.rw.DocController","mstrmojo.func");var C=mstrmojo.func;var B="44px";mstrmojo.OIVMDocController=mstrmojo.declare(mstrmojo.rw.DocController,null,{scriptClass:"mstrmojo.OIVMDocController",openPage:function A(G){var F=this.model;G=parseInt(G,10);if(G>-1&&F.drillStateStack){var H=F.drillStateStack,E=H.splice(H.indexOf(G)),J=E[0];mstrApp.removeBackButtonItems(E.length);F.getDataService().refresh({stateID:J-1},{success:function I(K){F.loadLayout(K);}});}else{this._super(G);}},submitDrillWithin:function D(I,F,K){var G=this.model;var E=F.attrObj||{n:""};var H=this._addNodeKeyToAction(I,F),M=E.sc&&E.sc.tks,L=M&&M.split("\u001E")||[];H.updateNodeKey=[H.nodeKey].concat(L);delete F.attrObj;I.model.drillGrid(H,C.wrapMethods({success:function J(N){var O=G.drillStateStack=G.drillStateStack||[],P=N.stid;if(P!==undefined){O.push(P);mstrApp.addBackButtonItem({n:mstrmojo.desc(13778,"Back to: ##").replace("##",E.n),dssid:P});}}},C.wrapMethods(this._getXtabCallback(I),K)));},togglePathbar:function(I){if(!mstrApp.pathInfo){return ;}var H=I.src,G=this.view.parent.parent,F=G.pathbar,K=F.visible;H.set("iconClass",H.iconClass.replace(/ on/,"")+(!K?" on":""));H.domNode.setAttribute("title",K?mstrmojo.desc(13997,"Hide Navigation Bar"):mstrmojo.desc(13996,"Show Navigation Bar"));var J=!K,E=G.pathbarNode;F.set("visible",J);G.layoutConfig.h.pathbarNode=J?B:"0px";G.doLayout();if(!J){E.style.height="0px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.DynamicClassFactory","mstrmojo.ListDocSelector","mstrmojo.TextBoxDocSelector","mstrmojo.SearchBoxDocSelector","mstrmojo.MetricQualDocSelector","mstrmojo.MetricSliderDocSelector","mstrmojo.AttrQualDocSelector","mstrmojo.VisDocSelector","mstrmojo.DynamicListDocSelector","mstrmojo._DocActionSelector","mstrmojo._IsThresholdConditionTarget");var B=4,G=12,E=47,I=12033,C=3076;var D={"default":"ListDocSelector",dynamic:"DynamicListDocSelector",7:"MetricSliderDocSelector",8:"MetricQualDocSelector",9:"SearchBoxDocSelector",10:"TextBoxDocSelector",11:"AttrQualDocSelector",12:"VisDocSelector"};function H(J){return J.srct===G&&J.srcst===C||J.srct===E&&J.srcst===I&&J.ndetype===2;}mstrmojo.DocSelectorViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.DocSelectorViewFactory",getDocSelectorClass:function F(L,O,K,P){var N=O.defn,M=N.style,J=D[M]||D["default"];if(H(N)&&M===B&&N.iifp){J=D.dynamic;}if(O.defn.ct==="4"){return(mstrmojo.DynamicClassFactory.newComponent(mstrmojo[J],[mstrmojo._DocActionSelector,mstrmojo._IsThresholdConditionTarget],{scriptClass:"mstrmojo.DocActionXSelector"}));}return mstrmojo[J];},newDocSelector:function A(K,M,J,O){var N=this.getDocSelectorClass(K,M,J,O),L={id:M.id,node:M,model:K};return new N(L);}});mstrmojo.DocSelectorViewFactory.CLASS_MAP=D;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.threshold.ThresholdModel","mstrmojo.threshold.SimpleThresholdEditor","mstrmojo.threshold.AdvancedThresholdEditor");var $HASH=mstrmojo.hash,SIMPLE_THRESHOLD_ID="mstrmojo-simple-threshold-editor",ADVANCED_THRESHOLD_ID="mstrmojo-advanced-threshold-editor",EDITOR_TYPES=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES;mstrmojo.threshold.ThresholdController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.ThresholdController",metricId:undefined,data:undefined,model:undefined,targets:undefined,editor:undefined,messageId:undefined,datasets:undefined,dataService:undefined,onSubmitActions:mstrmojo.emptyFn(),onSaveThresholds:mstrmojo.emptyFn(),onLoadThresholds:mstrmojo.emptyFn(),supportsFeature:function supportsFeature(featureId){return true;},init:function init(props){this._super(props);if(!window.numeral){var numeral=mstrmojo.loadFileSync(mstrmojo.getJsRoot()+"libraries/numeral.js.2.0.6/numeral.min.js");function evalInContext(){eval(numeral);}try{evalInContext.call(window);}catch(e){}}this.model=new mstrmojo.threshold.ThresholdModel({controller:this});},openEditor:function openEditor(){var data=this.data;if(!data){throw new Error("Visualization data not provided.");}var metricId=this.metricId,objectType=this.objectType,model=this.model,messageId=this.messageId,editor;model.set("data",$HASH.clone(data));model.metricId=metricId;model.objectType=objectType;var isAdvanced=model.isAdvanced(metricId),forceOpenEditorType=model.editorMode,forceOpenSimpleEditor=forceOpenEditorType===EDITOR_TYPES.SIMPLE_EDITOR;if(forceOpenEditorType===EDITOR_TYPES.ADVANCED_EDITOR||(!forceOpenSimpleEditor&&isAdvanced)){editor=mstrmojo.all[ADVANCED_THRESHOLD_ID]||new mstrmojo.threshold.AdvancedThresholdEditor({id:ADVANCED_THRESHOLD_ID,onUpdateBrowseElementsParams:function onUpdateBrowseElementsParams(params){var datasetId,datasets=this.controller.datasets,findAttrFn=function(attribute){return attribute.did===params.attributeID;};for(datasetId in datasets){if(datasets[datasetId].att.filter(findAttrFn).length>0){params.datasetID=datasetId;break;}}params.messageID=messageId;params.templateNodeKey=data.k;}});}else{if(isAdvanced){model.clearData();}editor=mstrmojo.all[SIMPLE_THRESHOLD_ID]||new mstrmojo.threshold.SimpleThresholdEditor({id:SIMPLE_THRESHOLD_ID});}this.editor=editor;editor.set("model",model);editor.set("controller",this);editor.set("metricId",metricId);editor.set("objectType",objectType);editor.set("title",this.title);editor.set("targets",this.targets);editor.set("allowHTMLTitle",true);editor.open();this.addDisposable([model,editor]);}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocXtabModel","mstrmojo.vi.ui._CanDropFromSchema","mstrmojo.models.template.DataInterface","mstrmojo.vi.models.EnumDragSources","mstrmojo.array","mstrmojo.expr","mstrmojo.func","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.fe.FilterUtils","mstrmojo.vi.enums.EnumVisFilterType","mstrmojo.EnumRWUnitType","mstrmojo.models.FormatModel","mstrmojo.models.template.DataInterface","mstrmojo.warehouse.EnumObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes");var M=mstrmojo.expr,Q=M.FN,T=M.ET,X=mstrmojo.hash,t=mstrmojo.array,z=mstrmojo.vi.models.EnumDragSources,AL=mstrmojo.fe.FilterUtils.getExprXml,C=mstrmojo.fe.FilterUtils.isExprEmpty,AE=mstrmojo.vi.ui.DatasetUnitMenuUtils,n=mstrmojo.array,Z=mstrmojo.string,AM=mstrmojo.models.FormatModel,O=AM.ENUM_PROPERTY_NAMES,AA=mstrmojo.vi.enums.EnumVisFilterType,W=mstrmojo.EnumRWUnitType,AK=mstrmojo.models.template.DataInterface,AR=AK.ENUM_GRID_RESIZE.FIT_TO_CONTENTS,I=mstrmojo.warehouse.EnumObjectTypes,x=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,j=mstrmojo.vi.enums.EnumFeatures,l=mstrmojo.elementHelper;var L=4,h=12,AB="-1";var B=3;var c=[O.GRID_VERTICAL_PADDING,O.GRID_HORIZONTAL_PADDING],q={},f="tp",R="lp";q[O.GRID_VERTICAL_PADDING]=f;q[O.GRID_HORIZONTAL_PADDING]=R;function K(AS){return AS.docModel.controller.cmdMgr;}function v(AV,AX){var AY=AV.xtab.k,AU=AV.docModel,AT=AU.getSelectedViUnit(),AS=AT&&AT.boxContent,AW=!(AS&&AS.isInFilterPanel&&AS.isInFilterPanel());return[AY].concat(AW?AU.getSourceFilterKeys(AY,true):[]);}function e(AV,AT,AU,AW,AS){AT.reverse().forEach(function(AX){AW.push(AV.model.getClearThresholdAction(AU,AS,AX.tid));});}mstrmojo.vi.models.DocXtabModel=mstrmojo.declare(mstrmojo.DocXtabModel,[mstrmojo.vi.ui._CanDropFromSchema],{scriptClass:"mstrmojo.vi.models.DocXtabModel",getUnHiddenDrillPathsForCell:function AG(AS,AW){var AU=this.getAllDrillPathsForCell(AS,AW),AV=this.docModel.datasets,AT=function(AX,Aa){var AY=n.find(AX,"did",Aa.id),AZ=AX[AY];if(AZ&&!AZ.hide){Aa.n=AZ.n;return true;}return false;};return n.filter(AU,function(AZ){var AX;for(AX in AV){var AY=AV[AX];if(AT(AY.att,AZ)){return true;}}return false;});},getAllDrillWithinPathsForCell:function o(AS,AV,AU){var AT=AU?this.getUnHiddenDrillPathsForCell(AS,AV):this.getAllDrillPathsForCell(AS,AV);return AT.filter(function(AW){return !!AW.within;});},sort:function AN(AU,AV){var AS=this;K(this).execute({execute:function AT(){var AW=AS.xtab.k;this.submit(AS.docModel.getDataService().getUpdateTemplateAction(AW,{act:"sort",sorts:AU.sorts,nodeKey:AW,subTotalsPos:AU.stp||AS.getSubTotalsPos(),stt:AU.stt||-1}),AV);}});},customSort:function AO(AV,AW,AS){var AT=this,AV=X.clone(AV);K(this).execute({execute:function AU(){var AX=AT.xtab.k;this.submit(AT.docModel.getDataService().getUpdateTemplateAction(AX,AV),AW,AS);}});},drillGrid:function r(AU,AV){var AS=this;K(this).execute({execute:function AT(){this.submit(AS.docModel.getDataService().getDrillGridAction(AU),AV);}});},getClearThresholdAction:function F(AU,AS,AT){return{act:"clearThreshold",unitId:AU,unitType:AS,tid:AT};},getCreateSimpleThresholdAction:function V(AX,AV,AS,AW,AU,AT){return{act:"threshold",nodeKey:AV,thresholds:AX,thresholdType:AW,basedOnId:AU||AS,did:AS,objType:AT};},getZoneFormatAction:function N(Ad,Af,Aa,AW){var AY=AW&&AW.skipSubtotals,AU=AW&&AW.isSubtotalFormat,Ac=AW&&AW.isSubtotalUseGridFormatting,Ab=[],AV=[],AZ="h",AS="g",Ae="sh",AX="sg",AT=function(Ag,Ah){AV.push({axis:Ag,regions:Ah});};if(AU){if(Ad==="ch"){AT(2,[Ae]);}else{if(Ad==="rh"){AT(1,[Ae]);}else{if(Ad==="va"){AT(1,[AX]);AT(2,[AX]);}}}}else{if(Ad==="ch"){AT(1,[AZ]);AT(2,!AY&&Ac?[AZ,AS,Ae]:[AZ,AS]);}else{if(Ad==="rh"){AT(1,!AY&&Ac?[AS,Ae]:[AS]);}else{if(Ad==="va"){this.data.gsi.mx.forEach(function(Ag){Ab.push({unitId:Ag.did,unitType:4,regions:[AS]});});if(!AY&&Ac){AT(1,[AX]);AT(2,[AX]);}}}}}return{act:"formatGridZone",nodeKey:Aa,props:Af,units:Ab,axis:AV};},getApplyGridCellFormatToSubtotalAction:function S(AU){var AT={},AV,AY=this.xtab,AX=AY.gridInfo.fmts,AW=AX[AU];var AS;X.forEach(AW,function(Aa,AZ){AS=AM.getFormatPropertyInfo(AZ);if(AS&&AS.ps!==AM.ENUM_PROPERTY_SETS.FORMATTING_NUMBER){AT=X.mergeHashes(AT,AM.getFormatUpdate(AZ,(AS.pt==B)?Aa:AM.decodeValue(AZ,Aa)));}});AV=AY.model.getZoneFormatAction.call(AY.model,AU,AT,AY.k,{isSubtotalFormat:true});return AV;},getSelectorDataFromTemplateLimit:function P(AS){return this.getSelectorDataFromViewFilter(AS);},getSelectorDataFromViewFilter:function AD(AV){var AS=[],AW="The expression is not supported by the View Filter Exception Parser.",AT=function AT(AZ){if(l.isNullElem(AZ.id)&&Z.isEmpty(AZ.v)){throw AW;}},AY=function AY(Ab){var AZ=null;if([T.AE,T.ANDOR].indexOf(Ab.et)>-1||(Ab.et===T.AQ&&Ab.fn===Q.IS_NULL)){if(!Ab){return true;}var Aa=Ab.nds;AZ=!(Ab.not||Ab.fn===Q.NOT||Ab.fn===Q.NOT_IN_LIST);if(Aa){Aa.every(function(Ac){AZ=AZ&&AY(Ac);});}}else{throw AW;}return AZ;},AU=function AU(Ab,Ad,Af){var Ah=Ab&&Ab.nds,Aa=Ab.fn===Q.OR;Af=Af||Ad;if(Ah&&Ah.length){var Ac=Ad;Ah.forEach(function(Ai){if(Aa){Ac=[];}AU(Ai,Ac,Af);if(Aa&&Ac.length>0){Ad.push(Ac);}});}else{if(Ab.fn===Q.IS_NULL){var Ag=Ab.a=Ab.a||{n:"Null Attribute",did:""};Ad.push({tn:Ag.n,tid:Ag.did,eid:null,v:""});}else{if(Ab.et===T.AE){var AZ=Ab.es||[];var Ae=AZ.length;if(Ae===1){AT(AZ[0]);Ad.push({tn:Ab.a.n,tid:Ab.a.did,eid:AZ[0].v,v:AZ[0].n});}else{if(Af){AZ.forEach(function(Ai){AT(Ai);Af.push([{tn:Ab.a.n,tid:Ab.a.did,eid:Ai.v,v:Ai.n}]);});}}}}}return Ad;};try{if(AV){(AV.nds||[]).forEach(function(AZ){var Aa=AU(AZ,[]);if(Aa.length>0){AS.push({keepOnly:AY(AZ),data:Aa});}});}}catch(AX){if(AX!==AW){console.error("vi.models.DocXtabModel: Encountered a problem parsing the view filter expression ("+AX+")");}else{return[];}}return AS;},getRemoveMetricLimitsAction:function AJ(AS){var AU=[],AV=[],AT=function AT(AX,AY){if(!AX){return ;}var AW=AX.nds;if(AW){AW.forEach(function(Aa){var AZ=Aa.m;if(AZ!==undefined){AY.push(AZ.did);}else{AT(Aa,AY);}});}};if(AS){AT(AS,AU);AU.forEach(function(AW){AV.push({act:"removeMetricLimits",unitId:AW});});}return AV;},getAddTemplateUnitAction:function E(AW,AX,AU,AS){var AV=this._super(AW,AX,AU,AS),AT=v(this,AV);if(AT.length>0){AV.partialRetrieval={nodes:AT};}return AV;},getRemoveTemplateUnitAction:function AI(AU){var AT=this._super(AU),AS=v(this,AT);if(AU.axis!==undefined&&AU.unitPos!==undefined){AT.axis=AU.axis;AT.unitPos=AU.unitPos;}if(AS.length>0){AT.partialRetrieval={nodes:AS};}return AT;},getAdvancedPropertiesAction:function V(AS){return{act:"advancedProperties",props:AS};},canShowCellMenu:function AC(AS){return true;},isSubtotalValue:function D(AS){var AT=this.getCellDataUnion(AS);return !AS.stt&&AT.some(function(AU){return !!AU.isSubtotal;});},getKeepOnlyActionsForAssociatedNodes:function AF(AT,AZ,AV){var AS=this.docModel,AY=[AS.getKeepOnlyOrExcludeAction(this.xtab.k,AT)],AU=!!AV?AV:this.xtab,AX=!mstrApp.isInVFConfigMode?(AU.getAssociatedNodes&&AU.getAssociatedNodes()||[]):[];AZ=mstrmojo.func.wrapMethods(AZ,{success:function AW(){n.forEach(AX,function(Ab){var Aa=AS.getPanel().getUnitByKey(Ab.k);if(Aa&&Aa.boxContent){Aa.boxContent.raiseEvent({name:"regenerateToolbar"});}});}});n.forEach(AX,function(Aa){AY.push(AS.getKeepOnlyOrExcludeAction(Aa.k,AT));});return{actions:AY,callback:AZ};},getSaveViewFilterAction:function U(AT,AS){return{act:"saveViewFilter",nodeKey:(AT&&AT.k)||this.xtab.k,expr:C(AS)?'<exp><nd et="14" fn="19"></nd></exp>':AL(AS)};},getClearLinkingAction:function w(AS){var AV=[],AY=this.docModel,Aa=AS.k,AW=AY.getCurrentLayoutKey(),AZ=(AY.defn.layouts).filter(function(Ac){return Ac.k===AW;})[0],AX=AZ.cgbMap||{},AU=AZ.units||{},Ab,AT=X.keyarray(AX).filter(function(Ac){if(AX[Ac]===Aa){Ab=AU[Ac];return Ab&&Ab.isNavigation;}return false;});n.forEach(AT,function(Ac){AV.push({act:"clearUCNodeCondition",nodeKey:Ac});});return AV;},getClearFiltersForVisActions:function m(Ae,Ad,AV,Ac){var Af=this.docModel,Ab=Af.getDataService(),AT=Ae.model,AW=Ae.gridData||Ae.model.data||Ae.node.data,AS=AW.vfexpr,AY=AW.vlexpr,AX=(Ad&&Ad.k)||this.xtab.k,Aa={actions:[],callback:Ac};AV=[].concat(AV);if(AV.indexOf(AA.KEEP_ONLY)>-1){Aa=AT.getKeepOnlyActionsForAssociatedNodes([],Aa.callback,Ad);}if(AV.indexOf(AA.ADV_QUALIFICATION)>-1){if(AY){Aa.actions.push(Ab.getUpdateTemplateAction(Ae.k,AT.getRemoveMetricLimitsAction(AY)));}if(AS){var AU=AV.indexOf(AA.DRILLING);if(AU>-1){Aa.actions.push(AT.getSaveViewFilterAction(Ad));AV.splice(AU,1);}else{Aa.actions.push(AT.getSaveViewFilterAction(Ad,Af.getVfexprWithUpdatedVf(AX)));}}}if(AV.indexOf(AA.DRILLING)>-1){var AZ=Af.getVfNdFromExpr(AS)||{et:14,nds:[]};Aa.actions.push(AT.getSaveViewFilterAction(Ad,AZ));}if(AV.indexOf(AA.LINKING)>-1){Aa.actions=Aa.actions.concat(AT.getClearLinkingAction(Ae));Aa.extras={style:{params:{treesToRender:3}}};}return Aa;},getObjectInfo:function H(AS){var AU=this.xtab.zonesModel,AT=null;if(AU){(AU.getDropZones().zones||[]).some(function(AV){return !!AV.items.some(function(AW){if(AW.did===AS){AT=AW;return true;}});});}else{AT=this._super(AS);}return AT;},getObjectInfoFromDataset:function H(AS){var AT;X.forEach(this.docModel.datasets,function(AU){if(!AT){AT=(AU.mx.concat(AU.att)).filter(function(AV){return AV.did===AS;})[0];}});return AT;},hasDerivedElements:function A(AS){var AT=this.getObjectInfo(AS);return !!(AT&&AT.de);},isRecursiveAttribute:function u(AS){var AU=this.docModel.getDEObject(AS),AT=this.getObjectInfoFromDataset(AU?AU.attId:AS);return AT&&AT.t===12&&AT.st===3076;},getNDEFormsFromDataset:function G(AT){var AS=this.getObjectInfoFromDataset(AT);return AS&&AS.fs;},hasRecursiveAttribute:function AH(AS){var AT=this,AU=(AS||this.data).gsi||{};return(AU.rows||[]).concat(AU.cols||[]).some(function(AV){return AT.isRecursiveAttribute(AV.did);});},hasSameRecursiveAttributeGroup:function p(AW,AU,AT){var AS=this.docModel,AY=AW.did,AV=AS.getDEObject(AY),AX=(AU||this.data).gsi||{};if(this.isRecursiveAttribute(AY)){return n.filterOne((AX.rows||[]).concat(AX.cols||[]),function(Ab){var AZ=Ab.did,Aa=AS.getDEObject(AZ);return n.find(n.ensureArray(AT),"did",AZ)<0&&(AZ!==AY)&&(AV?AV.attId:AY)===(Aa?Aa.attId:AZ);});}return false;},supportsViewFilterActions:function a(AS){var AT=this.getObjectInfo(AS);return AT&&!AT.de&&(AT.t!==1)&&(AT.t!==47||AT.st===12033);},addEditNodeForDatasetAction:function b(AT,AS){this.augmentDropContextForSchema(AT,this.docModel);var AW=AT.getCtxtDragData(),AV=AW.src;if(AV===z.DATASETS||AV===z.ALL_OBJECT_LIST){var AU=AT.getCtxtDragData().dsid,AX=AT.actions||[];if(AU){AX.push({act:"editNode",nodeKey:AS,datasetId:AU});}AT.actions=AX;}},getCurrentUnitAxisAndPosition:function AP(AS){return new mstrmojo.models.template.DataInterface(this.data).getUnitById(AS)||null;},getNumberFormatEditorCfg:function k(AT){var AX=this,AS=AX.xtab,AV=AX.data,AU=(AV.gnf||[]).concat(AV.gnfu),Ab=AT.item,Aa=n.find(AU,"id",Ab.did),AY=Aa===-1?{}:AU[Aa],AW=AS&&(!AS.defn.vis||!AS.defn.vis.ve);var AZ=AE.getNumberFormatEditor(AT.item,AY,function(Ag){var Ae=AX.docModel.getNumberFormatAction(Ab.did,Ab.t,Ag),Ad=!!Ae.partialRetrieval,Af,Ac;if(Ad){Af=mstrmojo.DocDataService.REQUEST_DEFN_DATA;Ac={treesToRender:3};}AS.controller.submitUndoRedoTemplateUpdates(AS,Ae,AX.docModel.controller._getXtabCallback(AS,undefined,Ad),Af,Ac);});return AZ;},showNumberFormat:function(Aa){var Ab=[1,2,8,9,11],AY;if(Aa.t===12){var AT=this.xtab.node.data,AS=AT&&AT.gts,AU=new mstrmojo.models.template.DataInterface(AT),AX=AS&&(AU.getRowTitles().titles||[]).concat(AU.getColTitles().titles||[]),AZ=n.filterOne(AX,function(Ac){return Aa.did===Ac.id;}),AW=((AZ&&AZ.fs)||[]).map(function(Ac){return Ac.id;});AY=(Aa.fs||[]).some(function(Ac){return Ab.indexOf(Ac.bftp)!==-1&&AW.indexOf(Ac.fid||Ac.id)!==-1;});}var AV=mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(j.NUMBER_FORMATTING);return(Aa.t===4&&Aa.did!==AB&&AV)||AY;},openThresholdEditor:function(Ag,AW,Ac){var AV=this,AT=AV.xtab,Ae=AV.docModel,Ab=AV.data,Ad=Ab.gsi,Aa=Ag.did,AS=mstrmojo.desc(3647,"Thresholds");if(Ag.t===L||Ag.t===h){var AZ=X.clone(Ad.mx),AY;AZ.forEach(function(Ah){Ah.t=4;});AY=Ad.rows.concat(Ad.cols,AZ).filter(function(Aj){var Ah=Aj.t,Ak=Aj.st,Ai=Aj.did;return !((Ah===1&&Ak===257)||(Ah===47&&Ak===12032)||(AV.hasDerivedElements(Ai))||(Ai==="-1")||(Ah===14));});AY.forEach(function(Aj){if(Aj.t===12){var Ai=this.getObjectInfo(Aj.did);Aj.da=Ai?Ai.da:undefined;}else{if(Aj.t===47&&Aj.st===12033){var Ai=this.getObjectInfo(Aj.did);Aj.ndetype=Ai.ndetype;}else{if(Aj.t===4){var Ah=this.getObjectInfoFromDataset(Aj.did);Aj.dt=Ah&&Ah.dt;}}}},this);if(Aa!==AB){AS+=" - "+Ag.n;}var AX=mstrmojo.threshold.ThresholdModel.FEATURES,Af=new mstrmojo.threshold.ThresholdController({metricId:Aa,objectType:Ag.t,title:AS,data:Ab,targets:AY,messageId:Ae.mid,datasets:Ae.datasets,dataService:Ae.getDataService(),supportsFeature:function AU(Aj){switch(Aj){case AX.SHOW_ADVANCED_EDITOR:return !AW;case AX.SHOW_BASED_ON:return !AW;case AX.SHOW_IMAGE:return Ac;case AX.SHOW_VALUE_ITEM:var Ai=AV.getObjectInfoFromDataset(this.model.basedOnId),Ak=Ai&&Ai.dt,Ah=[8,9,10,14,15,16,30];return !Ak||Ah.indexOf(Ak)===-1;}},onSubmitActions:function(Ap,Aj,Ai,Ak,An,Ao,Ah){var Am=this,Al=[];if(Aj){e(AT,Aj,Ai,Al,Ah);}Al.push(AV.getCreateSimpleThresholdAction(Ap,AT.k,Ai,An,Ak,Ah));AT.controller.submitUndoRedoTemplateUpdates(AT,Al,{success:function(){if(Ao){Am.set("data",AV.data);Am.openEditor();Ao=false;}}});},onSaveThresholds:function(Aj,Ah,Ai,Al,Ak){this.dataService.saveThresholds(X.copy(Al,{thresholds:JSON.stringify(Aj),basedOnId:Ah,thresholdType:Ai}),Ak,{hideFailureErr:true});},onLoadThresholds:function(Ai,Aj){var Ah=this.model;this.dataService.getThresholds({thresholdsID:Aj},{success:function(Ap){var Ao=Ap.thresholds,Al=[],Ak,Aq,An={};n.forEach(Ao||[],function(Ar){Ak=M.findTargets(Ar.expr,"did");Aq=true;X.forEach(Ak,function(As,At){if(!AV.getObjectInfo(At)){An[At]=As.n;Aq=false;}});if(Aq){Al.push(Ar);}});if(!X.isEmpty(An)){var Am=X.valarray(An);mstrmojo.alert(mstrmojo.desc(15431,"The following objects: # are not on the visualization, so some thresholds will not be loaded...").replace("#",Am.join(",")));}Ah.addThresholds(Al);}});}});if(Ag.t===h){Af.model.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.ADVANCED_EDITOR;}Af.openEditor();}},buildThresholdMenuOptions:function d(AX,AT,AW,Ad){var AV=this,AS=AV.xtab,Ac=AV.data,Ae=Ac.gsi,AU=Ae.thresholds,Af=AT.item,Ab=Af.did,Aa=AU&&AU[Ab],AY=mstrmojo.desc(13261,"Clear Thresholds"),AZ=AS.excludeData;if((!AZ&&Af.t===L)||Af.t===h&&!AV.docModel.isOldDEObject(Ab)){AX.addMenuItem(mstrmojo.desc(6050,"Thresholds..."),"",function(){AV.openThresholdEditor(Af,AW,Ad);},this);if(Ab!==AB){if(Aa){AX.addMenuItem(AY,"",function(){var Ag=[];e(AS,Aa,Ab,Ag,Af.t);AS.controller.submitUndoRedoTemplateUpdates(AS,Ag);},this);}}}},moveSubTotals:function Y(AS,AT){var AU=this;K(this).execute({execute:function AV(){var AX=AU.xtab,AW=AX.k;this.submit(AU.docModel.getDataService().getUpdateTemplateAction(AW,AU.getMoveSubTotalAction(AS.data,AT,AW)),AX.controller._getXtabCallback(AX));}});},getAttributeFormsInTemplate:function(AU){var AS=this.data.gts,AT=[];(AS.row||[]).concat(AS.col||[]).forEach(function(AV){if(AV.id===AU&&AV.fs){AT=AT.concat(AV.fs);}});return AT;},getPivotFormAction:function(Ac,AT,AY){var AU=this.getCellTitleInfo(Ac),AZ=AU.title,AV=AZ.fs,AW=AZ.id,AX=this.getAttributeFormsInTemplate(AW),Ab=(AZ.fix&&AZ.fix-1)||(Ac.fi||0),AS=AX[Ab],Aa;if(AT==="l"){Aa=Ab-1;}else{if(AT==="r"){Aa=Ab+1;}}return{act:"pivot",unitPos:Aa+1,attFormId:AS.id,unitId:AW,unitType:AY||"",originUnitPos:Ab+1};},getValuesDefaultFormatGridZoneAction:function(AZ,AW){var AU={},Ag,Ae=this.xtab,AX=Ae&&Ae.gridInfo,AT=AX&&AX.fmts,AY=[],Ad,AV={};X.forEach(AZ,function(Ah){AY.push({unitId:Ah.did,unitType:L,regions:["g"]});});if(AT){var Aa=AT.va,Ac=AT.rh,AS=AT.ch;X.forEach(AT.va,function(Ai,Ah){Ad=AM.getFormatPropertyInfo(Ah);if(Ad&&Ad.ps!==AM.ENUM_PROPERTY_SETS.FORMATTING_NUMBER){AU=X.mergeHashes(AU,AM.getFormatUpdate(Ah,(Ad.pt==B)?Ai:AM.decodeValue(Ah,Ai)));}});var Af=Aa[f]?Aa:(Ac[f]?Ac:AS),Ab;t.forEach(c,function(Ah){Ad=AM.getFormatPropertyInfo(Ah);if(Ad){Ab=Af[q[Ah]];AU=X.mergeHashes(AU,AM.getFormatUpdate(Ah,AM.decodeValue(Ah,Ab)));}});}AV.skipSubtotals=AW;Ag=Ae.model.getZoneFormatAction.call(Ae.model,"va",AU,Ae.k,AV);Ag.units=[].concat(AY);return Ag;},getRAExpandAction:function J(AT,AY,AV){var AX=this.getCellTitleInfo(AT).title.id,AW=this.docModel.getDEObject(AX),AS={act:"raExpandCollapse",sliceId:AY,depth:AT.dpt,ordinal:(AT.o!==undefined)?AT.o:AT._ei,id:AT._e&&AT._e.id,isExpand:AV?1:(AT.epd?0:1)},AU=v(this);if(AV){AS.expand_dsts=1;}AS[AW?"deId":"attId"]=AX;if(AU.length>0){AS.partialRetrieval={nodes:AU};}return AS;},getRAExpandAllAction:function AQ(AW,AV){var AU=this.docModel.getDEObject(AW),AS={act:"raExpandCollapseAll",isExpandAll:AV?1:0},AT=v(this);AS[AU?"deId":"attId"]=AW;if(AT.length>0){AS.partialRetrieval={nodes:AT};}return AS;},getCreateCSVizActions:function g(AT,AU,Ak,AS){var Aa=[],AZ=[],Ah=this.docModel,Ae=Ah.getDataService(),Ab=Ah.getVizContentPanel(),AY=Ab.k,Ao=this.xtab,AX=Ao.k,AW=Ao.parent;Aa.push({act:"macroCopyUnit",newKey:Ak,unitType:W.GRID,unitKey:AX,toKey:AY,partialRetrieval:{nodes:[Ak]}});var Ai=Ah.clearVisAsFilterAction(AW),Af=Ai&&Ai.actions;t.forEach(Af,function(Ap){if(!Ap.controlKey){Ap.nodeKey=Ak;Aa.push(Ap);}});var Ad=AW.parent.children,Ac,AV=Ao.getFilterType()===1;t.forEach(Ad,function(Ar){if(t.find(Ar.defn&&Ar.defn.an,"k",AX)!==-1){Aa.push({act:"associateNodes",nodeKey:Ar.k,targetKeys:[Ak]});var Aq=Ar.boxContent.selectorControl;if(Aq){var Ap=As===undefined||AV,As=Ap?Ah.getNextKey():As;Aa.push({act:"addVisToFilter",parentKey:AX,targetKey:Ak,ctrlKey:Aq.ckey,newCGB:Ap,cgbKey:As});}}});t.forEach(Ad,function(Aq){var Ap=Aq.defn,Ar=(Ap&&Ap.tks||"").split("\u001E");t.forEach(Ar,function(As){if(As===AX){var Av=Ap.ck,Au=Ap.srct,At=Ap.srcst,Aw=(Au===I.Consolidation&&At!==x.ConsolidationManaged)||Au===I.Filter;Aa.push(Ae.getAddCtrlTargetAction(Av,Ak,Ak,Aw));}});});var Aj=this.data,Al=Aj.gsi,Am=this,Ag=function(Ap,Aq){t.forEach(Ap,function(As,Ar){if(As.did==="-1"){t.forEach(Al.mx,function(Aw,Au){var Av=X.copy(Aw);Av.axis=-1;Av.unitPos=Au+1;AZ.push(Am.getRemoveTemplateUnitAction(Av));});}else{if(As.did!==AT.id){var At=X.copy(As);At.axis=Aq;At.unitPos=Ar+1;AZ.push(Am.getRemoveTemplateUnitAction(At));}}});};Ag(Al.rows,1);Ag(Al.cols,2);if(AU===2){AZ.push(this.getPivotUnitAction(1,0,AT.id,12,2,0));}AZ.push({act:"advancedProperties",props:{"Template Formatting":{ShowColumnHeaders:"-1",LockColumnHeaders:"-1"}}});var An=new AK(Aj);if(An.getColResizeScenario()!==AR){AZ.push({act:"changeXtabColWidthScenario",value:AR});}if(AS){AZ=AZ.concat(AS);}t.forEach(AZ,function(Ap){delete Ap.partialRetrieval;});Aa.push(Ae.getUpdateTemplateAction(Ak,AZ));return Aa;},getUnitNameInDataSet:function(AS){return this.docModel.findUnitNameInDataSetFromUnit(AS);}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocSelectorViewFactory","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.ListBoxHoriz","mstrmojo.ListBoxSelector","mstrmojo.LinkList","mstrmojo.ButtonList","mstrmojo.DropDownList","mstrmojo.Slider","mstrmojo.AttributeSlider","mstrmojo.TextBoxSelector");var E=mstrmojo.DocSelector.STYLES;var F={};F[E.RADIO]=["RadioListHoriz","RadioList"];F[E.CHECKBOX]=["CheckListHoriz","CheckList"];F[E.LIST]=["ListBoxHoriz","ListBoxSelector"];F[E.LINK]=["LinkListHoriz","LinkList"];F[E.BUTTON]=["ButtonListHoriz","ButtonList"];F[E.SCROLLER]="AttributeSlider";F[E.METRIC_SLIDER]="MetricSlider";F[E.METRIC_QUAL]="MetricQualification";F[E.SEARCH_BOX]="SearchBoxSelector";F[E.TEXT_BOX]="TextBoxSelector";var D={_mixinName:"_oivmDocSelector",preBuildRendering:function C(){var Q=this._super(),O=this.style,I=this.children[0],J=this.node,P=J.defn,U=P.horiz,S=this.getFormats(),K,V,T,X,W=O===E.PULLDOWN;if(P.hm===0&&O!==E.SCROLLER&&O!==E.METRIC_SLIDER){this.contentNodeCssText+="overflow-"+(U?"x":"y")+":hidden;";}if(S){I.color=K=S.color;V=S.height;T=S["background-color"];X=S["text-decoration"];if(X){mstrmojo.css.addWidgetCssClass(this,X);}}if(W){if(S){if(K){this.itemCssText+="color:"+K+";";}}I.cssText=this.itemCssText;}else{I.cellCssClass="";I.tableCssText="table-layout:"+((P.iwm===0)?"fixed":"auto")+";";if(V!==undefined){if(O===E.LIST){if(V.indexOf("px")==V.length-2){var N=parseInt(V.substr(0,V.length-2));if(N>4){N=N-4;}V=N+"px";}}I.cssText="height:"+V+";";}if(O===E.LIST&&T){I.cssText+="background-color:"+T+";";}switch(O){case E.RADIO:case E.CHECKBOX:I.labelCssText=this.itemCssText;break;case E.BUTTON:case E.LINK:case E.LIST:if(O===E.BUTTON){if(K){this.itemCssText+="color:"+K+";";}}if(U){this.itemCssText+="height:"+V+";";}I.itemCssText=this.itemCssText;this["background-color"]=T;break;}}var R=this,M=R.model.getTargetInfoWin(P.tks),L=(W&&I.list)?I.list:I;if(P.ifw||(M&&M.length)){L.makeSelection=function(Y){R.showInfoWin(Y&&Y.selItem);};if(L.selectionPolicy!==undefined){if(!P.multi){L.selectionPolicy="reselect";}if(!L.makeSelHandler&&P.ct!=="4"){L.makeSelHandler=L.attachEventListener("selectionChange",L.id,function(Z){if(Z){var b=Z.added||[],a=Z.removed||[],Y=b.length?b[0]:a[0];if(Y!==undefined&&Y!==null&&I.hasRendered){if(W){this.makeSelection({selItem:I.domNode});}else{this.makeSelection({selItem:this._getItemNode(Y)});}}}});}}}return Q;},newPulldown:function H(I){return new mstrmojo.DropDownList({k:I.ck,cssDisplay:"block",cssClass:"mstrmojo-DocSelector-DropDownList",selectCssClass:"mstrmojo-DocSelector-DropDownList-select",onselectedChange:function(){if(!I._inSyncPhase){I.showInfoWin();I.selectorControlChange(this);}}});},getWidgetClass:function B(L,K,J){var I=F[K];if(I){if(I.constructor===Array){I=I[J?0:1];}return I;}else{return this._super(L,K,J);}}};mstrmojo.OIVMDocSelectorViewFactory=mstrmojo.declare(mstrmojo.DocSelectorViewFactory,null,{scriptClass:"mstrmojo.OIVMDocSelectorViewFactory",getDocSelectorClass:function A(J,K){var I=this._super(J,K);return mstrmojo.DynamicClassFactory.newComponent(I,[D],null);},getOIVMDocSelectorMixin:function G(){return D;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.vi.models.DocXtabModel","mstrmojo.EnumRWUnitType");var C=mstrmojo.array,B=mstrmojo.hash;var F="Metrics",D=2,H="\u001E",E="\u001F";mstrmojo.vi.models.DocVisModel=mstrmojo.declare(mstrmojo.vi.models.DocXtabModel,null,{scriptClass:"mstrmojo.vi.models.DocVisModel",getHMSelecAttrElemIdsInfo:function(R){var Q=R[0],L=Q.tid,N=Q.tids,M=Q.selections,K={},S=[],P=this.scm,O=(L&&P&&P[L]);C.forEach(M,function(U){var T=(U&&U.length)||0,V=T>0?U[T-1]:{},W=V.tid;if(P[W]){if(!K[W]){K[W]=[];}K[W].push(V.eid);}});B.forEach(K,function(T){S.push(T.join(H));});if(O&&O.showall&&S.length===0){C.forEach(N,function(T){S.push("OA:(All)");K[T]=[];});}return{eids:S.join(E),tids:Object.keys(K)};},getSelectedAttributeElementIdStr:function(S){var R=S[0],K=R.tid,L,M=R.selections,N=[],P=[];C.forEach(M||[],function(T){N=N.concat(C.filter(T,function(U){return U.tid===K;}));});N=C.distinct(N,"eid");(N||[]).forEach(function(T){P.push(T.eid);});L=P.join(H);var Q=this.scm,O=(K&&Q[K]);if(O&&O.showall&&P.length===0){L="OA:(All)";}return L;},getHMAction:function A(Y){var X=Y[0],N=X&&X.at,R=X.anchor,M=X.selections,V=this.scm,K=[],O=[],Q=[],Z=[],S,T,W,L,U,P;U=this.getHMSelecAttrElemIdsInfo(Y);L=U.eids;if(M.length!==0&&L===""){return null;}if(N&&((N&D)>0)&&V){C.forEach(U.tids,function(b){var a=V[b];if(a){K.push(a);O.push(a.ck);Q.push(a.ckey);Z.push(a.tks);}});S=O.join(E);T=Q.join(E);W=Z.join(H);if(K.length&&L!==""){P={h:"onGridSelector",a:{type:mstrmojo.EnumRWUnitType.GRID,anchor:R,ck:S,tks:W,eid:L,ctlKey:T,sliceId:this.xtab.sid,isUConDS:K[0].isUConDS,isDocVis:true}};}}return P;},getDrillWithinActionsForAssociatedNodes:function G(K,L,Q,R){var O=this,T=this.docModel,M=[T.getDataService().getDrillGridAction(this.getDrillAction(this.xtab.k,L,K))],S=!!R?R:this.xtab,N=!mstrApp.isInVFConfigMode?(S.getAssociatedNodes&&S.getAssociatedNodes()||[]):[];Q=mstrmojo.func.wrapMethods(Q,{success:function P(){C.forEach(N,function(V){var U=T.getPanel().getUnitByKey(V.k);if(U&&U.boxContent){U.boxContent.raiseEvent({name:"regenerateToolbar"});}});}});C.forEach(N,function(U){M.push(T.getDataService().getDrillGridAction(O.getDrillAction(U.k,L,K)));});return{actions:M,callback:Q};},getDrillAction:function I(L,N,K){function M(S){var R=[];for(var Q=0,O=S.length;Q<O;Q++){var U=S[Q];for(var P=0,V=U.length;P<V;P++){var T=U[P];if(mstrApp.useBinaryFormat){R.push(T.axis+"A"+(T.ui+1)+"A"+T.o);}else{R.push(T.axis+"A"+(T.ui+1)+"A"+T.o);}}}return(mstrApp.useBinaryFormat)?R:R.join(",");}return{srcMsgId:this.data.mid,sliceId:this.xtab.sid,nodeKey:L,retainParent:K.retainParent||"",isWithin:K.drillPath.within,drillPathKey:K.drillPath.k,drillPathIndex:K.drillPath.dpi,drillElements:M(N)};},getAction:function J(T){var S=T[0],N=S&&S.at,P=S.anchor,K=S.tid,L,O,M=S.selections;L=this.getSelectedAttributeElementIdStr(T);if(M.length!==0&&L===""){return null;}if(N&&((N&D)>0)){var R=this.scm;var Q=(K&&R[K])||R[F];if(Q&&L!==""){O={h:"onGridSelector",a:{type:mstrmojo.EnumRWUnitType.GRID,anchor:P,ck:Q.ck,tks:Q.tks,eid:L,ctlKey:Q.ckey,sliceId:this.xtab.sid,isUConDS:Q.isUConDS,isDocVis:true}};}}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocBuilder","mstrmojo.rw._IsReportServicesDocBuilder","mstrmojo.DocLayoutViewer","mstrmojo.maps.MapInfoWindowLayoutViewer","mstrmojo.DocGroupBy","mstrmojo.DocTextfield","mstrmojo.DocHTMLContainer","mstrmojo.Xtab","mstrmojo._Formattable","mstrmojo._IsDocXtab","mstrmojo.IncFetch","mstrmojo.express.ui.DocButton","mstrmojo.ExpressDocPanel","mstrmojo._IsEditableXtab","mstrmojo._CanSupportTransaction","mstrmojo.ExpressVisList","mstrmojo.OIVMDICConfig","mstrmojo.OIVMDocSelectorViewFactory","mstrmojo.OIVMDocXtabGraph","mstrmojo.vi.models.DocVisModel","mstrmojo.vi.models.DocXtabModel","mstrmojo.MenuButton","mstrmojo._HasHoverButton","mstrmojo.ToolBar","mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl","mstrmojo.vi.ui.rw._IsMultiselectXtab","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.vi.ui.rw._XtabHighlights","mstrmojo.rw.xtab._XtabColResize");var B=mstrmojo.EnumRWUnitType,O=mstrmojo.DynamicClassFactory.newComponent;mstrmojo.DocXtab=O(mstrmojo.Xtab,[mstrmojo._Formattable,mstrmojo._IsDocXtab,mstrmojo._HasOwnAvatar,mstrmojo.rw.xtab._XtabColResize,mstrmojo.vi.ui.rw._IsMultiselectXtab,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw._XtabHighlights],{scriptClass:"mstrmojo.DocXtab"});var D=3,M=4;var A=function(R,Q){var P=R;while(P){if(P.controller&&P.controller[Q]){return P.controller;}P=P.parent;}return null;};mstrmojo.ExpressDocBuilder=mstrmojo.declare(mstrmojo.DocBuilder,[mstrmojo.rw._IsReportServicesDocBuilder],{scriptClass:"mstrmojo.ExpressDocBuilder",visList:mstrmojo.ExpressVisList,createSelectorFactory:function K(){return new mstrmojo.OIVMDocSelectorViewFactory();},createClassMap:function H(){var P=this._super();P[B.PANEL]={n:"Panel",scriptClass:"mstrmojo.ExpressDocPanel"};P[B.HTMLCONTAINER]={n:"HTMLContainer"};P[B.GRAPH]={n:"OIVMDocXtabGraph",scriptClass:"mstrmojo.OIVMDocXtabGraph"};P[B.TEXTFIELD+"B"]={n:"Button",scriptClass:"mstrmojo.express.ui.DocButton"};return P;},getDefaultMojoVisModel:function F(){return mstrmojo.vi.models.DocVisModel;},getLayoutViewerClass:function J(P){return mstrmojo.DocLayoutViewer;},newLayout:function I(P,R){var Q=this._super(P,R);var S=R.data.gbys;if(S&&S.showGroupby){Q.addChildren(new mstrmojo.DocGroupBy({id:S.k,slot:"groupBy",title:S.title,model:P,node:R,data:S.groupbys,controller:this.parent.controller}));}if(R.data.ifs){var T=new mstrmojo.IncFetch(mstrmojo.hash.copy(R.data.ifs,{slot:"incFetchNode",model:P}));T.attachEventListener("fetch",Q.id,function(U){P.getDataService().fetchDocPage((U.v-1)*T.ps+1,{success:function(V){P.loadLayout(V);}});});Q.addChildren(T);}return Q;},newOIVMDocXtabGraph:function(P,Q){var R=new mstrmojo.OIVMDocXtabGraph({id:Q.id,node:Q,controller:this.parent.controller,model:P,gridInfo:Q.data.gsi});R.model=new mstrmojo.vi.models.DocXtabModel({xtab:R,docModel:P});return R;},getEditableXtab:function G(){if(!mstrmojo.EditableXtab){mstrmojo.EditableXtab=O(mstrmojo.Xtab,[mstrmojo._CanSupportTransaction,mstrmojo._IsEditableXtab],{scriptClass:"mstrmojo.EditableXtab"});}return mstrmojo.EditableXtab;},getDefaultXtab:function N(){return mstrmojo.DocXtab;},getPortletExportGridToolbar:function C(T){var Q=T.k,S=T.node.data,R=S.wid,P=[];if(S.disablePDF&&S.disableEXCEL){return ;}if(!S.disablePDF){P.push({n:mstrmojo.desc(5212,"Export to PDF"),did:D});}if(!S.disableEXCEL){P.push({n:mstrmojo.desc(5213,"Export to Excel"),did:M});}return{css:"grid-menu",node:{scriptClass:"mstrmojo.ToolBar",slot:"toolbarNode",alias:"rightToolbar",children:[{scriptClass:"mstrmojo.MenuButton",iconClass:"mstrmojo-oivmSprite tbDown",itemIdField:"did",itemField:"n",itemChildrenField:"subItms",executeCommand:function(V){var U=A(this,"exportCmd");if(U){U.exportCmd(V.did,Q,R);}},cm:P}]}};},newHTMLContainer:function(P,Q){return this.newRWUnitInstance(P,Q,(Q.defn.ht===0)?mstrmojo.DocHTMLContainer:mstrmojo.DocTextfield);},newInfoWindow:function E(P){return new mstrmojo.DocInfoWindow(P);},getLinkDrillMixins:function L(P){return P?[mstrmojo._HasHoverButton]:[];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Doc","mstrmojo.dom","mstrmojo.array","mstrmojo.ExpressDocBuilder","mstrmojo.ToolBar","mstrmojo.OIVMPage","mstrmojo.ToolBarBuilder","mstrmojo.TabContainer","mstrmojo.ScrollingTabStrip","mstrmojo.ToolBarModel","mstrmojo.OIVMDocController","mstrmojo._IsWebApp","mstrmojo.DocModel","mstrmojo.vi.enums.EnumHiddenSections");var G=mstrmojo.array,F=mstrmojo.vi.enums.EnumHiddenSections;var M=mstrmojo.dom;function J(){M.attachEvent(window,"keydown",function(O){var N=O.keyCode===8;O=O||window.event;if(N&&mstrApp.ignoreBackSpace){M.preventDefault(window,O);}});}function K(){var Q=mstrmojo.all[this.tbId],R=Q&&Q.children;var N=G.find(R,"iconClass","tbBackPicker"),O=[];if(N>0){var P=R[N];O=P.items;P.selectedIndex=0;}return O;}function I(N){return(N==="F1FED8AC42B57AC1B0E9518FED0F89D6")?"mojo-theme-dark":"mojo-theme-light";}mstrmojo.OIVMApp=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsWebApp],{scriptClass:"mstrmojo.OIVMApp",enableWaitBox:true,hiddenSecState:null,hiddenSec:null,start:function B(){var S=new mstrmojo.Doc({slot:"stack"});this.hiddenSecState=this.setHiddenSections(this.hiddenSec);S.builder=new mstrmojo.ExpressDocBuilder({parent:S});this.docId=S.id;mstrApp.pathInfo.tbModelData=this.tbModelData;var R=new mstrmojo.ui.pathbar.PathBar({slot:"pathbarNode",alias:"pathbar",pathInfo:mstrApp.pathInfo});var P=new mstrmojo.OIVMPage({placeholder:this.placeholder,themeClassName:I(this.docModelData&&this.docModelData.thm&&this.docModelData.thm.id),error:this.error,children:(R.visible?[R]:[]).concat([new mstrmojo.TabContainer({slot:"layout",layoutConfig:{h:{top:"auto",stack:"100%"},w:{top:"100%",stack:"100%"}},children:[new mstrmojo.ScrollingTabStrip({slot:"top",cssClass:"mstrmojo-layout-tabs",visible:false,bindings:{width:"this.parent.width"}}),S]})])});if(this.isSectionHidden(F.DOCKTOP)){P.layoutConfig.h.toolbar="0px";}if(!R.visible||this.isSectionHidden(F.PATH)){P.layoutConfig.h.pathbarNode="0px";}P.render();var T=this.docModelData;if(T&&T.mstrerr){mstrmojo.err(T.mstrerr);}else{if(!this.error){var O=S.model=new mstrmojo.DocModel(T),N=S.controller=O.controller=new mstrmojo.OIVMDocController({view:S});N.set("model",O);N.start();if(R.visible){R.dc=N;}mstrApp.docModel=O;mstrmojo.locales.load(function(){S.buildChildren();if(O.zt===1||O.zt===2){P.browserResized(P.getBrowserDimensions(),true);}if(mstrApp!==undefined&&window.mstrLocalStorage!==undefined){mstrLocalStorage.addScreenshot(mstrApp.getLastMsgRecoveryInfo(),P.layout);}});if(mstrApp.pendingMojoEditor&&mstrApp.pendingMojoEditor!==""){S["show"+mstrApp.pendingMojoEditor]();delete mstrApp.pendingMojoEditor;}var Q=S.model.rf;if(Q>0){S.model.controller.startAutoRefresh();}this.startSessionManager();if(O.isHTML5VI){mstrmojo.css.addClass(document.body,["html5vi"]);}if(O.isPVPartialExecution){if(mstrApp.isDossier){mstrmojo.alert(mstrmojo.desc(15534,"Your personal view displays only a subset of your changes as the source dossier definition has been modified. Please contact your administrator for more information."));}else{mstrmojo.alert(mstrmojo.desc(15765,"Your personal view displays only a subset of your changes as the source document definition has been modified. Please contact your administrator for more information."));}}}}J.call(this);this.hidePageLoadingWaitBox();},hidePageLoadingWaitBox:function L(){var N=document.getElementById("pageLoadingWaitBox");if(N){N.style.display="none";}},setHiddenSections:function H(P){var O={docktop:F.DOCKTOP,path:F.PATH};var N=0;if(P){P=P.toLowerCase();mstrmojo.hash.forEach(O,function(R,Q){if(P.indexOf(Q)>-1){N+=R;}});}return N;},isSectionHidden:function C(N){return this.hiddenSecState&&(this.hiddenSecState&N)===N;},getVersion:function D(){return(this.buildVersion?"v="+this.buildVersion:"")+(this.appVersion?"&apv="+this.appVersion:"");},addBackButtonItem:function A(N){K.call(this).unshift(N);},removeBackButtonItems:function E(N){K.call(this).splice(0,N);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.hash","mstrmojo.ListBuilder");var E=mstrmojo.string,G=1,B="mstrmojo-multicolitem";function D(I){var K=['<table class="'+B+'-table" cellspacing="0" cellpadding="0"><colgroup>'],M=I.cols,J=1;for(var L=0,H=(M&&M.length)||0;L<H;L++){var N=M[L];K[J++]='<col style="width:'+N.width;if(N.visible===false){K[J++]="; display: none";}K[J++]='" />';}K[J++]='</colgroup><tbody><tr class="'+B+'-tr">';return K.join("");}function C(H,I){var J=H||(I&&'<div class="mstrmojo-text">{@'+I+"}</div>");return J?function(L,K,M){return E.apply(J,L);}:null;}mstrmojo.MultiColListBuilder=mstrmojo.provide("mstrmojo.MultiColListBuilder",mstrmojo.hash.copy({newContext:function F(I){var L=[],K=I.cols;for(var J=0,H=(K&&K.length)||0;J<H;J++){var M=K[J];L[J]=M.markupFunction||C(M.markup,M.field);}return{itemStatus:[],tablePrefix:D(I),tableSuffix:"</tr></tbody></table>",itemFuncs:L,cs:(L&&L.length)||0};},build:function A(O,M,R,P){M.itemStatus[P]=G;var Q='<td class="'+B+'-td">',N="</td>",I=M.itemFuncs,L=M.cs,J=[M.tablePrefix],H=1;for(var K=0;K<L;K++){J[H++]=Q;J[H++]=I[K](R,P,O);J[H++]=N;}J[H++]=M.tableSuffix;return J.join("");}},mstrmojo.hash.copy(mstrmojo.ListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.MultiColListBuilder");mstrmojo.MultiColList=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.MultiColList",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.MultiColListBuilder,cols:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.MultiColListBuilder");mstrmojo.MultiColListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.MultiColListHoriz",listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.MultiColListBuilder,cols:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");var C=1;mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin({buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=F.firstChild.rows[0].cells,S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.parent=R;G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;}},mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapperHoriz","mstrmojo.WidgetListBuilder");mstrmojo.WidgetListHoriz=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetListHoriz",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapperHoriz,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo.Callback=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Callback",init:function B(C,D){this.context=C;this.func=D;},fire:function A(){var E=this.context,C=this.func,D;if(!E){D=mstrmojo.global;}else{if(typeof (E)=="object"){D=E;}else{D=mstrmojo.all[E];}}if(!D){return undefined;}if(typeof (C)=="function"){return C.apply(D,arguments||[]);}else{return D[C].apply(D,arguments||[]);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array");mstrmojo.CallbackList=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.CallbackList",_calls:null,add:function C(D){if(!D){return ;}if(!this._calls){this._calls=[];}this._calls.push(D);},remove:function A(D){if(this._calls){mstrmojo.array.removeItem(this._calls,D);}},fire:function B(){var E=this._calls,F=arguments||[];for(var H=0,G=E&&E.length||0;H<G;H++){var D=this._calls[H];D.fire.apply(D,F);}}});})();mstrmojo.EnumRenderMode={ALL:0,BACKGROUND:1,ONDEMAND:2};