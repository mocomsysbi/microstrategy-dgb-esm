mstrmojo.chart.model.enums.EnumDSSGraphFontRotation={Automatic:-1,Normal:0,RotateHotel:1,Rotate90:2,Rotate180:3,Rotate270:4,Rotate45:5,Rotate315:6,Custom:7};mstrmojo.chart.model.enums.EnumDSSGraphGridLineType={DssGraphGridNone:0,DssGraphGridRegular:1,DssGraphGridBoth:2,DssGraphGridInnerTicks:3,DssGraphGridOuterTicks:4,DssGraphGridSpanningTicks:5};mstrmojo.chart.enums.EnumFillType={FT_SIMPLE:0,FT_TEXTURE:4,FT_PICTURE:6,FT_GRADIENT:14,FT_PATTERN:101};mstrmojo.chart.model.enums.EnumDSSGraphNumberFormatType={DssGraphNumberFormatDefault:-2,DssGraphNumberFormatFixed:0,DssGraphNumberFormatCurrency:1,DssGraphNumberFormatDate:2,DssGraphNumberFormatTime:3,DssGraphNumberFormatPercentage:4,DssGraphNumberFormatFraction:5,DssGraphNumberFormatScientific:6,DssGraphNumberFormatCustom:7,DssGraphNumberFormatSpecial:8,DssGraphNumberFormatGeneral:9,DssGraphNumberFormatFromGrid:10};mstrmojo.chart.enums.EnumDssGraphGridChartUniformColorMode={BYX:0,BYY:1,BYBOTH:2};mstrmojo.chart.enums.EnumPictureFormatType={JPEG:0,PNG:1,BMP:7,GIF:100,PDF:102,SVG:103,WIN32:104,INSTRUCTIONS:105};mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition={_BOTTOM:0,_TOP:1,_LEFT:2,_RIGHT:3,_CENTER:4};mstrmojo.chart.enums.EnumCategoryAxisOidItem={OID_LABEL:0,OID_MAJOR_TICKS:1,OID_MINOR_TICKS:2};mstrmojo.chart.model.enums.EnumDSSGraphMarkerLayout={DssGraphMarkerLeft:0,DssGraphMarkerRight:1,DssGraphMarkerCentered:2,DssGraphMarkerAbove:3,DssGraphMarkerBelow:4,DssGraphMarkerAuto:5};mstrmojo.chart.model.enums.EnumDSSGraphGradientType={DssGraphGradientReserved:0,DssGraphGradientCircular:9,DssGraphGradientRectangular:10,DssGraphGradientLinear:14};mstrmojo.ngm.NewGMEnums={};mstrmojo.ngm.EnumGraphType={UNDEFINED:-1,NORMAL:1,SCATTER:4,BUBBLE:5,GRID:7};mstrmojo.ngm.EnumGraphDirection={UNDEFINED:-1,NONE:0,HORIZONTAL:1,VERTICAL:2};mstrmojo.ngm.EnumETP={SCALE:0,SIZEBY:16,COLORBY:32};mstrmojo.ngm.EnumMetricNamesPosition={ByNone:-1,ByRow:0,ByColumn:1,ByXAxis:2,ByYAxis:3,ByBreakBy:4,BySlice:5};mstrmojo.ngm.EnumSortType={Ascending:0,Descending:1,NoSorting:3};mstrmojo.chart.enums.EnumSliceType={SLICE_STEPWISE:0,SLICE_GROUPADJACENT:1,SLICE_INDEPENDENT:2,SLICE_STRIPPED:3,SLICE_SPECIFY:4,SLICE_MIXED_GROUP:5,SLICE_MIXED_SERIES:6};mstrmojo.chart.enums.EnumValueAxis={VA_Y1:0,VA_Y2:1,VA_BOTH:2,VA_Y3:3,VA_Y4:4};mstrmojo.chart.enums.EnumLabelLevelOption={LLO_NORMAL:0,LLO_COMMON:1,LLO_SPECIFIC:2};mstrmojo.chart.enums.EnumGraphMatrixPiePlotType={GMPPT_CATEGORY:0,GMPPT_VALUE:1,GMPPT_GRID:2};mstrmojo.chart.enums.EnumDSSExtraGraphObject={DssGraphO1Interlaced:20000,DssGraphO2Interlaced:20001,DssGraphX1Interlaced:20002,DssGraphY1Interlaced:20003,DssGraphY2Interlaced:20004,DssGraphY3Interlaced:20005,DssGraphY4Interlaced:20006,DssGraphZInterlaced:20007,DssGraphQualityBand:20008,DssGraphQualityBandTitle:20009,DssGraphY1SecondUserLine:21000,DssGraphWarningMessage:21001,DssGraphO1BracketLine:21002,DssGraphBaseLayer:21004,DssGraphMiddleWallLayer:21005,DssGraphPlotLayer:21006,DssGraphRendererLayer:21007,DssGraphBanner:22005};mstrmojo.chart.enums.EnumLegendMarkersStyle={LMS_LeftOfText:0,LMS_RightOfText:1,LMS_CenterOnMarkers:2,LMS_AboveText:3,LMS_BelowText:4};mstrmojo.chart.enums.EnumTrendLineIndex={TLI_Y1:0,TLI_Y2:1,TLI_BOTH:2};mstrmojo.chart.enums.EnumLineJoinType={LJT_MITER:0,LJT_BEVEL:1,LJT_ROUND:2};mstrmojo.chart.model.enums.EnumVariantBool={VARIANT_TRUE:65535,VARIANT_FALSE:0};mstrmojo.chart.enums.EnumInstructionName={JSONInsUndefined:0,JSONInsSaveState:1,JSONInsRestoreState:2,JSONInsClip:11,JSONInsScale:12,JSONInsRotate:13,JSONInsNewPath:101,JSONInsClosePath:102,JSONInsMoveTo:111,JSONInsLineTo:112,JSONInsBezierCurveTo:113,JSONInsAddRect:121,JSONInsAddArc:122,JSONInsAddNeedle:131,JSONInsAddGaugeMarker:132,JSONInsAddString:201,JSONInsSetLineDash:301,JSONInsSetLineWidth:302,JSONInsSetLineJoin:303,JSONInsSetFontSize:311,JSONInsSetRGBAFillColor:321,JSONInsSetRGBAStrokeColor:322,JSONInsFillPath:401,JSONInsStrokePath:402,JSONInsFillSimple:501,JSONInsFillPattern:502,JSONInsFillGradient:503,JSONInsFillEdgeType:511,JSONInsFillDonutOrSphere:512,JSONInsFillRadientGradient:513,JSONInsFillDonut2Rect:514,JSONInsFillBorderMetallic:515,JSONInsMakeDarker:521,JSONInsRestoreColor:522,JSONInsApplyLineFormat:601,JSONInsAddFormatedText:701,JSONInsApplyBeveledFrameToRectangle:801};mstrmojo.chart.model.enums.EnumShapeType={_COMBINED:-2,_GENERIC:-1,_AREA:0,_BAR:1,_LINE:2,_STEPLINE:3,_CIRCLE:4,_RECTANGLE:5,_SQUARE:6,_TICKER:7,_PIESLICE:8,_POLYGON:9,_PIE:10,_BULLET:11,_CURVE:12,_DEFAULT:100};mstrmojo.chart.enums.EnumGraphObjectType={GOT_AXIS_TITLE:0,GOT_AXIS_LABEL:1,GOT_AXIS_LINE:2,GOT_MAJOR_GRID:3,GOT_MINOR_GRID:4,GOT_INTERLACED_GRID:5};mstrmojo.chart.enums.EnumBoundingRectType={BRT_TOP:0,BRT_BOTTOM:1,BRT_CYLINDER:2,BRT_RING_CYLINDER:3,BRT_START_RECT:4,BRT_END_RECT:5};mstrmojo.chart.enums.EnumLayout={LO_ABSOLUTE:0,LO_CLUSTER:1,LO_STACKED:2,LO_PERCENT:3};mstrmojo.chart.enums.EnumRectExpandDirection={REC_EXP_INVALID:0,REC_EXP_HORIZONTAL:1,REC_EXP_VERTICAL:2,REC_EXP_BOTH:3};mstrmojo.chart.enums.EnumMajorGraphType={MGT_AREA:0,MGT_BAR:1,MGT_LINE:2,MGT_PARETO:3};mstrmojo.chart.ChartConstants={kPI:3.141592653589793,kHalfSqrt2:0.70710678,kVirtualCoordinateWidth:700,kVirtualCoordinateHeight:400,kGroupLabelsRatio:0.1,kGridLineMarginFactor:10,kAngleMargin:0.1,kLabelMarginFactor:20,kVirtualMarkerSize:2,kBetweenLabels:0,kBetweenLabelLines:1,kLabelToChart:2,kNumericLabelToTick:3,kChartToChart:4,kExtra:5,kEndTickToChart:6,kEndLabelToChart:7,kBetweenLabelCenters:8,kCategoricalLabelToTick:9,kBandSide:10,kDataLabel:11,kRefLabel:12,kAxisOriginLabel:13};mstrmojo.chart.enums.EnumBoxStyle={BS_NOFRAME:0,BS_SINGLE_LINE_FRAME:1,BS_DOUBLE_LINE_FRAME:2,BS_EXTRUDE:3,BS_BEVELED_FRAME:4,BS_REVERSE_BEVELED_FRAME:5};mstrmojo.chart.enums.EnumCategoryLabelStyle={CLS_AUTOMATIC:0,CLS_NORMAL:1,CLS_STAGGER:2,CLS_MANUAL:3};mstrmojo.chart.Angle=mstrmojo.provide("mstrmojo.chart.Angle",{});mstrmojo.chart.enums.EnumAnchorPoint={TOP_LEFT:0,TOP_MIDDLE:1,TOP_RIGHT:2,LEFT_MIDDLE:3,CENTER:4,RIGHT_MIDDLE:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8};mstrmojo.chart.enums.EnumShowFace={SF_FRONT:1,SF_SIDE:2,SF_HIDDEN_SIDE:4};mstrmojo.chart.enums.EnumObjectShape={OS_ELLIPSE:2,OS_LINE:5,OS_POLYGON:6,OS_RECTANGLE:7,OS_WEDGE:12,OS_WEDGECRUST:13,OS_POLYLINE:18,OS_PATH:24,OS_CIRCLE:100,OS_RINGSECTOR:101,OS_NORMALSECTOR:102};mstrmojo.chart.model.enums.EnumDSSGraphAxisLabelLocation={DssGraphAxisLabelLowSide:0,DssGraphAxisLabelHighSide:1,DssGraphAxisLabelBothSides:2,DssGraphAxisLabelNeitherSide:3};mstrmojo.chart.enums.EnumDataSetStatus={DTST_INVALID:0,DTST_OKAY:1,DTST_DISABLED:2};(function(){var A;mstrmojo.chart.Polygon2D=A=mstrmojo.provide("mstrmojo.chart.Polygon2D",{});A.clone=function(D){var B=D.length,C,E=[];for(C=0;C<B;++C){E.push(D[C].clone());}return E;};}());mstrmojo.chart.model.enums.EnumDSSGraphLegendPosition={DssGraphLegendPositionFreeFloat:0,DssGraphLegendPositionRight:1,DssGraphLegendPositionLeft:2,DssGraphLegendPositionBottom:3};mstrmojo.chart.enums.EnumMarkerShape={MS_Rectangle:0,MS_XShape:1,MS_PlusSymbolthin:2,MS_PlusSymbolthick:3,MS_Circle:4,MS_Diamond:5,MS_Triangle:6,MS_Square:7,MS_Star:8,MS_Area:9,MS_Star45:10};mstrmojo.chart.enums.EnumFontAlignment={FA_LEFT:0,FA_CENTER:1,FA_RIGHT:2};mstrmojo.chart.model.enums.EnumVariantType={VT_EMPTY:0,VT_NULL:1,VT_I2:2,VT_I4:3,VT_R4:4,VT_R8:5,VT_CY:6,VT_DATE:7,VT_BSTR:8,VT_DISPATCH:9,VT_ERROR:10,VT_BOOL:11,VT_VARIANT:12,VT_UNKNOWN:13,VT_DECIMAL:14,VT_I1:16,VT_UI1:17,VT_UI2:18,VT_UI4:19,VT_I8:20,VT_UI8:21,VT_INT:22,VT_UINT:23,VT_VOID:24,VT_HRESULT:25,VT_PTR:26,VT_SAFEARRAY:27,VT_CARRAY:28,VT_USERDEFINED:29,VT_LPSTR:30,VT_LPWSTR:31,VT_RECORD:36,VT_FILETIME:64,VT_BLOB:65,VT_STREAM:66,VT_STORAGE:67,VT_STREAMED_OBJECT:68,VT_STORED_OBJECT:69,VT_BLOB_OBJECT:70,VT_CF:71,VT_CLSID:72,VT_BSTR_BLOB:4095,VT_VECTOR:4096,VT_ARRAY:8192,VT_BYREF:16384,VT_RESERVED:32768,VT_ILLEGAL:65535,VT_ILLEGALMASKED:4095,VT_TYPEMASK:4095};mstrmojo.chart.enums.EnumAxisLabelsLocation={ALL_LEFT:0,ALL_RIGHT:1,ALL_LEFT_RIGHT:2,ALL_BOTTOM:3,ALL_TOP:4,ALL_BOTTOM_TOP:5};mstrmojo.chart.enums.EnumRadientGradientUsage={RG_PIESLICE:0,RG_RING:1,RG_BORDERRING:2};mstrmojo.chart.model.enums.EnumDSSGraphFillEffect={DssGraphFillSimple:0,DssGraphFillGenericGradient:1,DssGraphFillWash:3,DssGraphFillPicture:4,DssGraphFillUserPicture:6,DssGraphFillBrush:13,DssGraphFillAdvancedWash:14,DssGraphFillPattern:101};mstrmojo.chart.enums.EnumLineStyle={LS_SOLID:0,LS_DASH:1,LS_DOT:2,LS_DOT_DASH:3,LS_DASH_DOT_DOT:4,LS_MEDIUM_DASH:5,LS_SHORT_DASH:6,LS_LONGEST_DASH:7,LS_LONG_DOT:8,LS_DOT_DOT_DOT:9,LS_DASH_DASH_DOT:10,LS_DASH_DASH_DOT_DOT:11,LS_LONG_DASH_DOT:12,LS_LONG_DASH_DOT_DOT:13,LS_LONG_DASH_DASH:14,LS_LONG_DASH_DASH_DASH:15,LS_GRADIENT:16,LS_NONE:99};mstrmojo.chart.enums.EnumDSSGraphObjectManager={DssChartManager:20000,DssPlotManager:20001,DssPlot:20002,DssLegend:20003,DssAreaSeriesRenderer:20004,DssBarSeriesRenderer:20005,DssLineSeriesRenderer:20006,DssStepLineSeriesRenderer:20007};mstrmojo.chart.enums.EnumGraphMatrixElementSizeMode={_AUTOMATIC:0,_PROPORTIONAL:1,_MANUAL:2};mstrmojo.chart.enums.EnumGenericDirection={NONE:0,TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};mstrmojo.chart.enums.EnumGraphSubType={GST_NULL:0,GST_BIPOLAR:1,GST_DUALAXIS:2};mstrmojo.chart.model.enums.EnumDSSExtraGraphProperty={DssGraphOffScaleType:10139,DssGraphTypeRingPie:20015,DssGraphPieRadius:20016,DssGraphPieSliceQuadrant:20017,DssGraphUseInterlacedGrid:20018,DssGraphUseSmartBreak:20019,DssGraphSmartBreakStyle:20020,DssGraphSmartBreakStart:20021,DssGraphSmartBreakEnd:20022,DssGraphSmartBreakUsePercent:20023,DssGraphUseQualityBand:20024,DssGraphQualityBandUsePercent:20025,DssGraphQualityBandPosition:20026,DssGraphQualityBandShowTitle:20027,DssGraphUseChartArea:20028,DssGraphChartAreaNumber:20029,DssGraphChartAreaOrientation:20030,DssGraphChartAreaSpacePercentage:20031,DssGraphChartAreaDestination:20032,DssGraphChartAreaShowTitle:20033,DssGraphGaugeBorderClipped:20034,DssGraphCumulativePercentLabel:20035,DssGraphNewUseSmartLabels:20053,DssGraphIsIPhoneCharting:21000,DssGraphUseGlobalAutoScale:21001,DssGraphLegendItemText:21023,DssGraphAxisShowSecondUserLine:21024,DssGraphAxisSecondUserLineValue:21025,DssGraphCategoryLabelAreaHeight:21026,DssGraphGradientEndAlpha:21027,DssTimeSeriesYAxisLabelMinSpan:21076,DssTimeSeriesYAxisExtendHeight:21077,DssGraphMatrixUsePerfectPadding:21120,DssGraphMatrixIsValueAxisForPercentChart:21136,DssGraphMatrixDataLabelEnabled:21153,DSSGraphMatrixDataLabelRotated:21154,DssGraphMatrixInitedDataLabelRotation:21155,DSSGraphMatrixAxisAdjusted:21156,DSSGraphMatrixUseCustomMinMax:21157,DssGraphInfoReserved:30000,DssGraphInfoMajorType:30007,DssGraphInfoMinorType:30008,DssGraphInfoAutosizeHorizontal:30011,DssGraphInfoAutosizeVertical:30012,DssGraphInfoSeriesByColumn:30013,DssGraphInfoIncludeSubtotal:30014,DssGraphInfoSuppressLastLevel:30016,DssGraphInfoRecalculateChartFrame:30026,DssGraphInfoRecalculateLegend:30027,DssGraphInfoNestedLabel:30038,DssGraphInfoNestedLabelBracket:30039,DssGraphInfoUseMaxCategoriesAsMin:30048,DssGraphInfoUseZerosForGraphNulls:30049};mstrmojo.chart.enums.EnumFormatType={FMT_UNDEFINED:0,FMT_LINE:1,FMT_FILL:2,FMT_FONT:3};mstrmojo.chart.enums.EnumChartStyle={_general:0,_cluster:1,_absolute:2,_stacked:3,_percent:4,_ring:5,_bullet:6,_udf:100};mstrmojo.chart.model.enums.EnumDSSGraphPictureScaleType={DssGraphPictureScaleNone:0,DssGraphPictureScale2Fit:1,DssGraphPictureScale2Frame:2,DssGraphPictureScale2Background:3,DssGraphPictureTiled:4,DssGraphPictureTiled2Frame:5,DssGraphPictureTiled2Background:6,DssGraphPictureBrickHorizontal:7,DssGraphPictureBrickVertical:8,DssGraphPictureStack:9,DssGraphPictureScaleProportional:10};mstrmojo.chart.enums.EnumLegendLayout={LL_LegendFreeFloat:0,LL_LegendOnRightSide:1,LL_LegendOnLeftSide:2,LL_LegendBelowChart:3};mstrmojo.chart.enums.EnumImageUsage={GENERAL:0,FIRST_IMAGE_OF_SCROLL_VIEW:1,SECOND_IMAGE_OF_SCROLL_VIEW:2,IMAGE_OF_SCROLL_VIEW:4,EMPTY_IMAGE:8,OBJECT_CLIP_COMPUTATION:16,BANNER:32};mstrmojo.chart.enums.EnumCollectionType={CT_NO_COLLECTION:0,CT_LINE:1,CT_GENERAL_SHAPE:2,CT_TEXT:3,CT_VERTICAL_AREA:4,CT_VERTICAL_BAR:5,CT_HORIZONTAL_AREA:6,CT_HORIZONTAL_BAR:7,CT_DEPTH_LINE_OR_LINE_MARKER:8,CT_NO_FORMAT:9};mstrmojo.chart.enums.EnumNumberCategory={Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10};mstrmojo.chart.model.enums.EnumDSSGraphFillBevelEffect={DssGraphFillBevelNone:0,DssGraphFillBevelSmoothEdge:1,DssGraphFillBevelChiselEdge:2,DssGraphFillBevelDonut:3,DssGraphFillBevelSphere:4};mstrmojo.chart.enums.EnumDSSGraphOffScaleType={DssGraphOffScaleHide:0,DssGraphOffScaleClip:1,DssGraphOffScaleShow:2};mstrmojo.chart.model.enums.EnumDSSGraphPictureFormat={DssGraphPictureJPEG:0,DssGraphPictureGIF:1,DssGraphPicturePNG:2,DssGraphPictureWMF:3,DssGraphPictureBMP:4};mstrmojo.chart.model.enums.EnumDSSGraphStockLayout={DssGraphStockLayoutDefault:0,DssGraphStockLayoutVerticalLine:1,DssGraphStockLayoutCandleStick:2,DssGraphStockLayoutLine:3,DssGraphStockLayoutArea:4,DssGraphStockLayoutLineCircle:5,DssGraphStockLayoutDot:6,DssGraphStockLayoutArea2:7};mstrmojo.chart.enums.EnumGraphMatrixMajorGraphType={_UNDEFINED:0,_AREA:1,_BAR:2,_LINE:3,_SCATTER:4,_BUBBLE:5,_PIE:6,_GRID:7};mstrmojo.chart.model.enums.EnumDSSGraphDataLineType={DssGraphDataLineNone:0,DssGraphDataLineMarker:1,DssGraphDataLineLine:2};mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition={DssGraphDTPositionCenter:0,DssGraphDTPositionOutMin:1,DssGraphDTPositionInMin:2,DssGraphDTPositionInMax:3,DssGraphDTPositionOutMax:4,DssGraphDTPositionOnSide:5,DssGraphDTPositionPieSmart:6,DssGraphDTPositionPieSmartRadial:7,DssGraphDTPositionPieSmartStacked:8};mstrmojo.chart.enums.EnumFontRotation={FR_NORMAL:0,FR_45:5,FR_90:2,FR_180:3,FR_270:4,FR_315:6,FR_CUSTOME:7,FR_HOTEL:1,FR_AUTOMATIC:-1};mstrmojo.chart.enums.EnumGraphMatrixMarkerTypeInChart={_LINE_IN_LINE:0,_DOTS_IN_LINE:1,_ISODOT_IN_LINEAREA:2,_MUTATION_IN_LINE:3,_BAR:4,_SHAPES_IN_BUBBLESCATTER:5,_SHAPES_IN_GRID:6,_TICK_CATEGORY:7,_TICK_VALUE:8,_TICK_GRID:9,_PIE:10};mstrmojo.chart.enums.EnumOrientation={OR_HORIZONTAL:0,OR_VERTICAL:1};mstrmojo.chart.enums.EnumAttachedPointsStyle={NORMAL:0,TOOLTIP_UPPER:1,TOOLTIP_LOWER:2,TOOLTIP_MIDDLE:3,TOOLTIP_U2L:4,TOOLTIP_TRAPEZOID:5};mstrmojo.chart.model.enums.EnumDSSGraphType={DssGraphTypeReserved:0,DssGraphTypeVertical_Area_Absolute:1,DssGraphTypeVertical_Area_Stacked:2,DssGraphTypeVertical_Area_BiPolar_Absolute:3,DssGraphTypeVertical_Area_BiPolar_Stacked:4,DssGraphTypeVertical_Area_DualAxis_Absolute:5,DssGraphTypeVertical_Area_DualAxis_Stacked:6,DssGraphTypeVertical_Area_Percent:7,DssGraphTypeHorizontal_Area_Absolute:8,DssGraphTypeHorizontal_Area_Stacked:9,DssGraphTypeHorizontal_Area_BiPolar_Absolute:10,DssGraphTypeHorizontal_Area_BiPolar_Stacked:11,DssGraphTypeHorizontal_Area_DualAxis_Absolute:12,DssGraphTypeHorizontal_Area_DualAxis_Stacked:13,DssGraphTypeHorizontal_Area_Percent:14,DssGraphTypeVertical_Bar_Side_by_Side:15,DssGraphTypeVertical_Bar_Stacked:16,DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:17,DssGraphTypeVertical_Bar_DualAxis_Stacked:18,DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:19,DssGraphTypeVertical_Bar_BiPolar_Stacked:20,DssGraphTypeVertical_Bar_Percent:21,DssGraphTypeHorizontal_Bar_Side_by_Side:22,DssGraphTypeHorizontal_Bar_Stacked:23,DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:24,DssGraphTypeHorizontal_Bar_DualAxis_Stacked:25,DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:26,DssGraphTypeHorizontal_Bar_BiPolar_Stacked:27,DssGraphTypeHorizontal_Bar_Percent:28,DssGraphTypeVertical_Line_Absolute:29,DssGraphTypeVertical_Line_Stacked:30,DssGraphTypeVertical_Line_BiPolar_Absolute:31,DssGraphTypeVertical_Line_BiPolar_Stacked:32,DssGraphTypeVertical_Line_DualAxis_Absolute:33,DssGraphTypeVertical_Line_DualAxis_Stacked:34,DssGraphTypeVertical_Line_Percent:35,DssGraphTypeHorizontal_Line_Absolute:36,DssGraphTypeHorizontal_Line_Stacked:37,DssGraphTypeHorizontal_Line_BiPolar_Absolute:38,DssGraphTypeHorizontal_Line_BiPolar_Stacked:39,DssGraphTypeHorizontal_Line_DualAxis_Absolute:40,DssGraphTypeHorizontal_Line_DualAxis_Stacked:41,DssGraphTypeHorizontal_Line_Percent:42,DssGraphTypePies:43,DssGraphTypeRing_Pie:44,DssGraphTypeMultiple_Pies:45,DssGraphTypeMultiple_Ring_Pies:46,DssGraphTypeMultiple_Proportional:47,DssGraphTypeMultiple_Proportional_Ring_Pies:48,DssGraphTypePie_Bar:49,DssGraphTypeRing_Pie_Bar:50,DssGraphTypeX_Y_Scatter:51,DssGraphTypeDualAxis_X_Y_Scatter:52,DssGraphTypeX_Y_Scatter_with_Labels:53,DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:54,DssGraphTypePolar_Coordinate_Chart:55,DssGraphTypeDualAxis_Polar_Coordinate_Chart:56,DssGraphTypeRadar_Line:57,DssGraphTypeRadar_Stacked_Area:58,DssGraphTypeDualAxis_Radar_Line:59,DssGraphTypeDualAxis_Radar_Stacked_Area:60,DssGraphTypeBubble:61,DssGraphTypeBubble_DualAxis:62,DssGraphTypeGantt_Chart:63,DssGraphTypeHiLo_Stock_Chart:64,DssGraphTypeHiLo_DualAxis_Stock_Chart:65,DssGraphTypeHiLoOpen_Stock_Chart:66,DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:67,DssGraphTypeHiLoOpenClose_Stock_Chart:68,DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:69,DssGraphTypeSpectral_Chart:70,DssGraphTypeVertical_Histogram:71,DssGraphTypeHorizontal_Histogram:72,DssGraphTypeTable_Chart:73,DssGraphTypeD3_Riser_Bars:74,DssGraphTypeD3_Riser_Pyramids:75,DssGraphTypeD3_Riser_Octogans:76,DssGraphTypeD3_Riser_Cut_Corner_Bars:77,DssGraphTypeD3_Floating_Cubes:78,DssGraphTypeD3_Floating_Spheres:79,DssGraphTypeD3_Connect_Group_Areas:80,DssGraphTypeD3_Connect_Group_Ribbons:81,DssGraphTypeD3_Connect_Group_Steps:82,DssGraphTypeD3_Connect_Series_Areas:83,DssGraphTypeD3_Connect_Series_Ribbons:84,DssGraphTypeD3_Connect_Series_Steps:85,DssGraphTypeD3_Surface:86,DssGraphTypeD3_Surface_with_Sides:87,DssGraphTypeD3_Honeycomb_Surface:88,DssGraphTypeD3_X_Y_Z_Scatter_Chart:89,DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart:90,DssGraphTypeVertical_Bar_Absolute:91,DssGraphTypeHorizontal_Bar_Absolute:92,DssGraphTypeBubble_With_Labels:93,DssGraphTypeBubble_DualAxis_With_Labels:94,DssGraphTypeGauge:95,DssGraphTypeFunnel:96,DssGraphTypePareto:97,DssGraphTypePareto_Percent:98,DssGraphTypeBoxPlot:99,DssGraphTypeRadar_Area_Stacked:100,DssGraphTypeRadar_Absolute_Area:101,DssGraphTypeVertical_Bar_BiPolar_Absolute:102,DssGraphTypeVertical_Bar_DualAxis_Absolute:103,DssGraphTypeHorizontal_Bar_BiPolar_Absolute:104,DssGraphTypeHorizontal_Bar_DualAxis_Absolute:105,DssGraphRadar_Line_Stacked:106,DssGraphRadar_DualAxis_Radar_Stacked_Line:107,DssGraphRadar_DualAxis_Radar_Area:108,DssGraphTypeMaxDeskTopGraphTypes:109,DssGraphTypeBarArea:201,DssGraphTypeBarLine:202,DssGraphTypeAreaLine:203,DssGraphTypeDualAxisBarArea:204,DssGraphTypeDualAxisBarLine:205,DssGraphTypeDualAxisAreaLine:206,DssGraphTypeGridChart:20000,DssGraphTypeVertical_Bar_DualAxis_Percent:20001,DssGraphTypeVertical_Line_DualAxis_Percent:20002,DssGraphTypeVertical_Area_DualAxis_Percent:20003,DssGraphTypeHorizontal_Bar_DualAxis_Percent:20004,DssGraphTypeHorizontal_Line_DualAxis_Percent:20005,DssGraphTypeHorizontal_Area_DualAxis_Percent:20006,DssGraphTypeHorizontal_CategoryPies_Absolute:21077,DssGraphTypeHorizontal_CategoryPies_Stacked:21078,DssGraphTypeHorizontal_CategoryPies_Percent:21079,DssGraphTypeVertical_CategoryPies_Absolute:21080,DssGraphTypeVertical_CategoryPies_Stacked:21081,DssGraphTypeVertical_CategoryPies_Percent:21082,DssGraphTypeScatter_Pies:21111,DssGraphTypeBubble_Pies:21121,DssGraphTypeGrid_Pies:21211,DssGraphTypeVertical_Bullet:21212,DssGraphTypeHorizontal_Bullet:21213};mstrmojo.chart.enums.EnumAxisDirection={AD_X:0,AD_Y:1,AD_Z:2};mstrmojo.chart.enums.EnumRectCompare={NONE:-1,ExpandX:0,ExpandY:1,ShrinkX:2,ShrinkY:3,KeepX:4,KeepY:5,KeepBoth:6};mstrmojo.chart.enums.EnumGraphMatrixThemeType={UNDEFINED:-1,_black:0,_white:1};(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphObject");var A=mstrmojo.chart.model,C=A.enums,B=C.EnumDSSGraphObject;mstrmojo.chart.model.enums.EnumDSSGraphTitleName={DssGraphTitleReserved:0,DssGraphTitleTitle:B.DssGraphTitle,DssGraphTitleSubtitle:B.DssGraphSubtitle,DssGraphTitleFootnote:B.DssGraphFootnote,DssGraphTitleCategory:B.DssGraphXTitle,DssGraphTitleSeries:B.DssGraphSeriesTitle,DssGraphTitleY1:B.DssGraphY1Title,DssGraphTitleY2:B.DssGraphY2Title,DssGraphTitleY1Right:B.DssGraphY1RightTitle};})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.EnumRWUnitType");var F=mstrmojo.array;var G=2;var I={attribute:"attribute",metric:"metric",empty:"empty;"};function B(){var L=this.model.data.gts,O=(L&&L.row)||[],M=(L&&L.col)||[],N=O.concat(M);return N;}function C(){var L=this.model.scm,N=Object.keys(L||{}),P=(N&&N[0])||"",O=this.model.data.gts.row,M=this.model.data.gts.col;F.forEach(O.concat(M),function(Q){if(N.indexOf(Q.id)!==-1){P=Q.id;return false;}});return P;}mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights=mstrmojo.provide("mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights",{_mixinName:"mstrmojo.netviz._SupportNetworkBrushesAndHighlights",selectedMetricIds:null,TUSType:I.empty,init:function K(L){this.selectedMetricIds=[];if(this._super){this._super(L);}},addAttributeSelection:function(M,L,N){this.TUSType=I.attribute;this._super(M,L,N);},addContextMenuAttributeSelection:function(N,M,Q,P,R,O,L){this.TUSType=I.attribute;this._super.apply(this,arguments);},addMetricValueSelection:function(L){this.TUSType=I.attribute;this._super(L);},addContextMenuMetricValueSelection:function(L){this.TUSType=I.attribute;this._super(L);},getTUSType:function(){return this.TUSType;},precessSelectedAttributes:function(M,L,O){if(!O){var N=this.getSingleAttributeSelectorControl();if(!N){this.interactor.clearSelectedTargets();this.interactor.clearSelectRules();this.clearSelections(true);}}},processSelectedMetricIds:function(M,L,O){if(!O){var N=this.getMetricSelectorControl();if(N){this.interactor.clearMetricSelectorHighlight();this.selectedMetricIds=[];}}},highlight:function(N,O,L){if(this._super){this._super.apply(this,arguments);}if(this.noHighlightAfterKeepOnlyExcludeDrill){return ;}var M=this.interactor;if(M){M.doHighlight(N,O,L);}},singleUnitSelect:function A(){var Q=this.selectedMetricIds.length>0&&this.hasMetricSelector(),S=(this.getSelections().length>0||this.clearSelectionsFlag)&&this.hasAttributeSelector();if(this.clearSelectionsFlag){delete this.clearSelectionsFlag;}Q=false;if(S&&Q){var N={multiSelect:true,type:mstrmojo.EnumRWUnitType.GRID,src:this.model.k,sliceId:1,sid:1,anchor:this.domNode,selectorObjects:[]};var T=this.getSingleAttributeSelectorControl(),R=this.model.getSelectedAttributeElementIdStr();N.selectorObjects.push({ck:T.ck,ctlKey:T.ckey,tks:T.tks,eid:R});var M=this.getMetricSelectorControl(),P=this.getSelectedMetricIdStr();N.selectorObjects.push({ck:M.ck,ctlKey:M.ckey,tks:M.tks,eid:P});this.controller.onGridSelector(this,N);}else{if(Q){var O=this.getMetricSelectorControl();this.singleMetricSelect(O);}else{if(S){var L=function(){var V={};V.tid=C.call(this);V.eid="";V.isClearAll=false;V.anchor=this.domNode;V.at=G;V.selections=this.getSelections();V.selectionType=this.getSelectionType();return V;};var U=L.call(this);this.performAction([U]);}}}},getSelectedMetricIdStr:function(M){var P=this.selectedMetricIds,O=P.join("\u001E"),Q=M.sc,N=Q.showall&&P.length===0,L=N?"OA:(All)":O;return L;},singleMetricSelect:function E(M){var O=M.sc,L=this.getSelectedMetricIdStr(M),N={type:mstrmojo.EnumRWUnitType.GRID,anchor:this.domNode,ck:O.ck,tks:O.tks,eid:L,ctlKey:O.ckey,sliceId:this.sid,isUConDS:O.isUConDS,isDocVis:true};this.controller.onGridSelector(this,N);},getSingleAttributeSelectorControl:function(){var M=null;if(this.hasAttributeSelector()){var L=C.call(this);M=this.model.scm[L];}return M;},getMetricSelectorControl:function D(){var M=B.call(this),L=null;F.forEach(M,function(N){if(N.otp===-1&&N.hasOwnProperty("sc")){L=N;return false;}});return L;},hasAttributeSelector:function J(){var M=B.call(this),L=false;F.forEach(M,function(N){if(N.otp!==-1&&N.hasOwnProperty("sc")){L=true;return false;}});return L;},hasMetricSelector:function H(){var M=B.call(this),L=false;F.forEach(M,function(N){if(N.otp===-1&&N.hasOwnProperty("sc")){L=true;return false;}});return L;},hasRSSelector:function(){return this.hasAttributeSelector()||this.hasMetricSelector();},postBuildRendering:function(){if(this.cetSelectors){var L=this.cetSelectors.attrs,M=this.cetSelectors.metrics,N=this;if(L.length>0){L.forEach(function(O){N.addAttributeSelection(O.tid,O.id,O.n);});}if(M.length>0){M.forEach(function(O){N.addMetricValueSelection(O.tid,O.id,O.n);});}}this._super();},clearSelections:function(L,M){this.clearSelectionsFlag=true;this.TUSType=I.empty;if(this._super){this._super();}if(L){this.clearSelectedHighlights(M);}},clearCxtMnuSelection:function(L,M){this.clearSelectionsFlag=true;this.TUSType=I.empty;if(this._super){this._super();}if(L){this.clearSelectedContextMenuHighlights(M);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var C=mstrmojo.hash;mstrmojo._CanSupportTransaction={_mixinName:"mstrmojo._CanSupportTransaction",updatedCellsMap:null,getUpdates:mstrmojo.emptyFn,getUpdateObject:mstrmojo.emptyFn,getKeyContext:mstrmojo.emptyFn,autoRefresh:mstrmojo.emptyFn,editNext:mstrmojo.emptyFn,buildConditions:mstrmojo.emptyFn,dataChanged:function A(G,H,F,I,D){var E=this.updateValue(G,F);this.updatedCellsMap[G]={r:H,v:F};this.controller.onTransactionUpdates(this,this.getUpdateObject(),E,D);},postBuildRendering:function B(){if(this._super){this._super();}if(!this.txModel){this.txModel=this.model.docModel||this.model;}this.updatedCellsMap=this.updatedCellsMap||{};},updateValue:function(E,D){if(this.txModel.deltaUpdate){this.txModel.deltaUpdate(this);}return false;},getUpdatedValues:function(){var E=this.updatedCellsMap,F,D,G=[];for(F in E){if(E.hasOwnProperty(F)){D={};D.v=E[F].v.v;G.push(C.copy(this.getKeyContext(F),D));}}return G;},clear:function(){this.updatedCellsMap={};},registerTxWidget:function(){function E(F,H){var G=F.node.data.k;H.txWidgets=H.txWidgets||{};H.txWidgets[G]=F;return false;}var D=this.parent;while(D){if(D.isPanelStack===true){E(this,D);}D=D.parent;}}};}());(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphProperty");var B=mstrmojo.chart.model,C=B.enums,A=C.EnumDSSGraphProperty;mstrmojo.chart.model.enums.EnumDSSGraphRegressionType={DssGraphRegressionNone:0,DssGraphRegressionLinear:A.DssGraphShowSDLinrLine,DssGraphRegressionLog:A.DssGraphShowSDLinrLog,DssGraphRegressionPoly:A.DssGraphShowSDLinrNPoly,DssGraphRegressionExp:A.DssGraphShowSDLinrExp,DssGraphRegressionMA:A.DssGraphShowSDMOVALine,DssGraphRegressionNatLog:A.DssGraphShowSDLinrNatLog,DssGraphRegressionSTDD:A.DssGraphShowSDSTDDLine,DssGraphRegressionMean:A.DssGraphShowSDMeanLine,DssGraphRegressionPow:200};})();(function(){mstrmojo.requiresCls("mstrmojo.array");var L=10,C=20,a=false,k=false,W=L,b=[],V=mstrmojo.array,J=false,P,f;var B=6,X=7,A=100,h=101,O=102,F=103;function D(o,r,p){var n=r[0],l=r[1],q;o.beginPath();o.moveTo(n,l);for(q=2;q<r.length-1;q=q+2){o.lineTo(r[q],r[q+1]);}o.lineTo(n,l);o.fillStyle=p;o.stroke();o.fill();}function g(o,r,p){var n=r[0],s=r[1],q=r[2]-n,l=r[3]-s;o.fillStyle=p;o.strokeRect(n,s,q,l);o.fillRect(n,s,q,l);}function Z(t,q,u){var o=q[0],n=q[1],s=q[2],p=q[3],r=q[4],l=q[5];t.beginPath();t.arc(o,n,p,r,l,false);t.lineTo(o+s*Math.cos(l),n+s*Math.sin(l));t.arc(o,n,s,l,r,true);t.closePath();t.fillStyle=u;t.stroke();t.fill();}function M(t,q,u){var p=q[0],o=q[1],r=q[2],s=q[3],l=q[4],n=q[5];t.scale(1,n);t.beginPath();t.arc(p,o,r,s,l,false);t.lineTo(p,o);t.arc(p,o,0,l,s,true);t.closePath();t.fillStyle=u;t.stroke();t.fill();t.scale(1,1/n);}function N(u,r,v){var p=r[0],o=r[1],s=r[2],t=r[3],l=r[4],q=r[5],n=r[6];u.scale(1,n);u.beginPath();u.arc(p,o,s,t,l,false);u.lineTo(p+s*Math.cos(l),o+s*Math.sin(l)-q);u.arc(p,o-q,s,l,t,true);u.closePath();u.fillStyle=v;u.stroke();u.fill();u.scale(1,1/n);}function E(l,o,n){l.fillStyle=n;l.beginPath();l.arc(o[0],o[1],o[2],0,Math.PI*2,true);l.stroke();l.fill();}function T(n,l){return n.Point.X-l.Point.X;}function I(n,AB,w){var AA=this.tooltipArr[w],p=n.Text,s=n.SC,l=AA.style,z=this.model.getZoomFactor(),t=mstrMobileApp.getDeviceDPI()/160,x=2*t,y=mstrApp.getScreenDimensions().w-(P*2);if(mstrApp.isTablet()){z=(z*t)+"em";}else{if(mstrMobileApp.getDeviceDPI()>240){z=(z*1.5)+"em";}else{z+="em";}}var r="font-size:"+z+";";r+="padding:"+x+"px;";r+="maxWidth:"+y+"px;";if(s){r+="border-color:#"+s;}AA.innerHTML=p;l.cssText=r;l.display="block";var v=0,q=0;var o=AA.offsetHeight,u=AA.offsetWidth;v=AB.y-o-6;q=AB.x-u-6;b.push({x:n.Point.X,y:n.Point.Y,clr:s||"#000000",top:v,left:q,width:u,height:o});}function Q(o,n,l){var q=l.left,p=Math.max(l.top,f+C);width=l.width,style=n.style,newLeft=q+width+12;if(newLeft+width<=mstrApp.getScreenDimensions().w){q=newLeft;}else{if(q<0){q=P;}}style.left=q+"px";style.top=p+"px";o.showAreaMarker(l.x,l.y,l.clr);}function e(l,AE){var z=b[AE],AB=l.tooltipArr,y=AB[AE].style,o=z.left,r=z.top,v=z.width,s=z.height,w=mstrApp.getScreenDimensions().w,x,u;if(AE>0){var t=b[AE-1],q=t.top,n=t.left,AD=n+t.width,p=n+v,AC;o=n;if(p>AD){o-=(p-AD);}else{if(p<AD){o+=(AD-p);}}if(o<0){if((v*2)+12>w){a=false;J=true;o=P;for(x=0;x<AE;x++){AC=AB[x];t=b[x];u=o+v-t.width;t.left=u;AC.style.left=o+v-t.width+"px";}}else{a=true;}}r=q-C-s;if(r<f){var AA=Math.abs(r)+f+C;for(x=0;x<AE;x++){AC=AB[x];t=b[x];q=t.top+AA;t.top=q;AC.style.top=q+"px";}r+=AA;}}else{if(o<0){if((v*2)+12>w){J=true;o=P;}else{a=true;}}if(r<f){r=f+C;}}if(!a){y.left=o+"px";z.left=o;}y.top=r+"px";z.top=r;l.showAreaMarker(z.x,z.y,z.clr);}function U(r,l,p,t){var o=r.tooltipArr[l].style,q=b[l],s=b[l-p].top,n=q.width;if(t+n>mstrApp.getScreenDimensions().w){k=true;o.display="none";return ;}o.left=t+"px";o.top=s+"px";r.showAreaMarker(q.x,q.y,q.clr);}function c(AA){var AB=b.length,n=AA.tooltipArr,q=Math.ceil(AB/2),s=0,z=1,x=Math.min(AB,L/2),l=mstrApp.getScreenDimensions().w,p,o,w,u;for(s=0;s<q;s++){e(AA,s);}if(a||J){for(s;s<x;s++){e(AA,s);}if(!J){var r=s-1,y=0,v=0,t,AC;p=b[r];o=p.left+p.width+12;for(r=s-1;r>=0;r--){w=n[r];AC=b[r].width;if(o+AC>l){v=P+AC;if(v>y){u=v;t=b[r];}}w.style.left=o+"px";}if(y>0){for(r=0;r<s;r++){w=n[r];w.style.left=(P+t.width-b[r].width)+"px";}}}}else{p=b[AB-1];o=p.left+p.width+12;for(s;s<AB;s++){U(AA,s,z,o);z+=2;if(k){break;}}if(k&&s<=x){for(s=q;s<AB;s++){e(AA,s);n[s].style.display="block";}}}}function S(){var l=this,n=b.length;if(n===0){return ;}f=mstrApp.rootView.getTitleHeight();if(n===1){Q(l,l.tooltipArr[0],b[0]);}else{c(l);}}function K(o,l,p,n){switch(o){case X:g(l,p,n);break;case A:E(l,p,n);break;case h:Z(l,p,n);break;case O:M(l,p,n);break;case F:N(l,p,n);break;default:D(l,p,n);}}mstrmojo.graph._MobileGraphAreaHelper=mstrmojo.provide("mstrmojo.graph._MobileGraphAreaHelper",{highlightArea:function j(q,o){var p=this,l=q.getContext("2d"),n="rgba(255, 255, 255, 0.5)";p.clearHighlightArea(q);l.strokeStyle="#FFFFFF";V.forEach(o,function(r){K(r.Shape,l,r.Coords,n);});},highlightAreaInInit:function G(w,t){var y=w.getContext("2d"),l=this.graphData.Areas,q="rgba(255, 255, 255, 0.5)";y.clearRect(0,0,w.width,w.height);y.strokeStyle="#FFFFFF";var n=l.length,z=286,s=259,x=341;var v=t.length/2,r,u;for(u=0;u<n;u++){var o=l[u],p=parseInt(o.OID,10);if(p!==z&&p!==s&&p!==x){continue;}if(o.SID<0||o.GID<0){continue;}for(r=0;r<v;r++){if(o.SID!==t[2*r]||o.GID!==t[2*r+1]){continue;}K(o.Shape,y,o.Coords,q);}}},clearHighlightArea:function R(n){if(n){var l=n.getContext("2d");l.clearRect(0,0,n.width,n.height);n.width=n.width;}},showAreaMarker:function H(l,p,o){if(l>=0&&p>=0){var n=this.highlightNode.getContext("2d");n.save();n.fillStyle="#FFFFFF";n.strokeStyle=o||"#000000";n.lineWidth=2;n.beginPath();n.arc(l,p,5,0,Math.PI*2,true);n.stroke();n.fill();n.fillStyle=o||"#000000";n.beginPath();n.arc(l,p,2,0,Math.PI*2,true);n.stroke();n.fill();n.restore();}},displayTooltips:function d(l,r,q){l.sort(T);var p=this.tooltipArr,s;a=false;k=false;b=[];this.clearHighlightArea(this.highlightNode);if(!p){P=8*(mstrMobileApp.getDeviceDPI()/160);p=[];for(s=0;s<L;s++){var u=document.createElement("div");u.id="mstrmojo-mobileGraph-tooltip";u.className=mstrmojo.GraphBase.tooltipCLS;document.body.appendChild(u);p[s]=u;}this.tooltipArr=p;}W=Math.min(l.length,L);var t=mstrmojo.touchManager;if(W===0&&this._touchListener){t.detachEventListener(this._touchListener);delete this._touchListener;}else{if(W>0&&!this._touchListener){this._touchListener=t.attachEventListener("touchesBegin",this.id,function(w){var x=mstrmojo.all[w.srcId];if(!(x instanceof mstrmojo.android.ui.ActionToolbarButtons||x instanceof mstrmojo.android.ui.Menu)){this.displayTooltips([],0,0);}});}}var o=null,v={},n;J=false;for(s=0;s<L;s++){n=p[s].style;n.left=-9999;n.display="none";}for(s=0;s<W;s++){o=l[s];v.x=o.Point.X+r;v.y=o.Point.Y+q;I.call(this,o,v,s);}S.call(this);window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},destroy:function Y(l){V.forEach(this.tooltipArr,function(n){document.body.removeChild(n);});delete this.tooltipArr;if(this._super){this._super(l);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.vi.enums.EnumThemeProperties");var D=mstrmojo.hash,C=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME,A={shpLnThk:[2],shpLnClr:[11826975,16756758],shpLnStyle:[0],shpFillClr:[11826975,16756758],shpFillStyle:[0],shpFillTrans:[70],shpFillEff:[1],shpBdrClr:[undefined],shpBdrStyle:[0],shpBdrThk:[2],lnMkShw:[false],lnMkShp:[4],lnMkSz:[3],lnMkClr:[undefined],lnMkClrEq:[true],lnMkBdrClr:[undefined],pieExpl:[false],dlFntFml:["Arial"],dlFntSz:["8pt"],dlFntStyle:[0],dlFntClr:[5066061,16514043],rfLnFntFml:["Arial"],rfLnFntSz:["8pt"],rfLnFntStyle:[0],rfLnFntClr:[5066061,16514043],lgdBgFillClr:[15461355,1710618],lgdBgFillStyle:[0],lgdBgFillEff:[1],lgdBgFillTrans:[0,0],lgdFntSz:["8pt"],lgdFntFml:["Arial"],lgdFntStyle:[0],lgdFntClr:[6710886,16777215],lgdBdrShw:[false],lgdBdrClr:[11579568,5855577],lgdBdrThk:[1],lgdBdrStyle:[0],xAxOriLnShw:[false],xAxOriLnClr:[11579568,5855577],xAxOriLnStyle:[1],xAxOriLnThk:[1],yAxOriLnShw:[false],yAxOriLnClr:[11579568,5855577],yAxOriLnStyle:[1],yAxOriLnThk:[1],xAxShw:[true],xAxLnShw:[true],xAxLnClr:[11579568,5855577],xAxLnStyle:[0],xAxLnThk:[1],xAxTtShw:[true],xAxTtFntSz:["8pt"],xAxTtFntClr:[6710886,16777215],xAxTtFntFml:["Arial"],xAxTtFntStyle:[0],xAxLbFntClr:[6710886,16777215],xAxLbFntSz:["8pt"],xAxLbFntFml:["Arial"],xAxLbFntStyle:[0],xAxLbRtt:[-1],xAxLbShw:[true],yAxShw:[true],yAxLnShw:[true],yAxLnClr:[11579568,5855577],yAxLnStyle:[0],yAxLnThk:[1],yAxTtShw:[true],yAxTtFntSz:["8pt"],yAxTtFntClr:[6710886,16777215],yAxTtFntFml:["Arial"],yAxTtFntStyle:[0],yAxLbFntClr:[6710886,16777215],yAxLbFntSz:["8pt"],yAxLbFntFml:["Arial"],yAxLbFntStyle:[0],yAxLbRtt:[-1],yAxLbShw:[true],bgFillClr:[16777215,2631720],bgFillEff:[1],bgFillStyle:[0],bgFillTrans:[100],rwHdrFillClr:[16382457,2631720],rwHdrFillEff:[1],rwHdrFillStyle:[0],rwHdrFillTrans:[100],colHdrFillClr:[16382457,2631720],colHdrFillEff:[1],colHdrFillStyle:[0],colHdrFillTrans:[100],vMatrixLnShw:[true],vMatrixLnClr:[11579568,5855577],vMatrixLnThk:[1],vMatrixLnStyle:[0],hMatrixLnShw:[true],hMatrixLnClr:[11579568,5855577],hMatrixLnThk:[1],hMatrixLnStyle:[0],xGridLnShw:[4],yGridLnShw:[4],allTxtFntClr:[6710886],allTxtFntSz:["8pt"],allTxtFntFml:["Arial"],allTxtFntStyle:[0],outBdrClr:[11579568,5855577],outBdrStyle:[0],outBdrThk:[1],gridLineAuto:[true],gridLnClr:[11579568,5855577],gridLnThk:[1],gridLnStyle:[0],majorGridLnShw:[1],majorGridLnClr:[11579568,5855577],majorGridLnThk:[1],majorGridLnStyle:[0],minerGridLnShw:[1],minerGridLnClr:[11579568,5855577],minerGridLnThk:[1],minerGridLnStyle:[0],rwHdrShw:[true],colHdrShw:[true],rwVlShw:[true],colVlShw:[true],rwHdrTxtFntClr:[6710886,16777215],rwHdrTxtFntSz:["8pt"],rwHdrTxtFntFml:["Arial"],rwHdrTxtFntStyle:[0],rwHdrTxtAlignH:[1],rwHdrTxtAlignV:[1],colHdrTxtFntClr:[6710886,16777215],colHdrTxtFntSz:["8pt"],colHdrTxtFntFml:["Arial"],colHdrTxtFntStyle:[0],colHdrTxtAlignH:[1],colHdrTxtAlignV:[1],rwVlTxtFntClr:[6710886,16777215],rwVlTxtFntSz:["8pt"],rwVlTxtFntFml:["Arial"],rwVlTxtFntStyle:[0],rwVlTxtAlignH:[1],rwVlTxtAlignV:[1],colVlTxtFntClr:[6710886,16777215],colVlTxtFntSz:["8pt"],colVlTxtFntFml:["Arial"],colVlTxtFntStyle:[0],colVlTxtAlignH:[1],colVlTxtAlignV:[1],ttlFntClr:[6710886,16777215],ttlFntSz:["8pt"],ttlFntFml:["Arial"],ttlFntStyle:[0],prtRdn:[false],trdDgr:[2],trdRefLnThk:[1],trdRefLnClr:[5066061,16514043],trdRefLnStyle:[0],meanSD:[0],shwOutliers:[0],jtrType:[0],jitter:[0],ptPosType:[0],ptPos:[-1.8],ptSzType:[6],ptSize:[10],cntrFitMode:[0],slctnLmt:[50000],manualBinsMode:[5],custMode:[1],numBins:[15],rangeType:[3],xBinsStart:[0],xBinsEnd:[1000],xBinsSize:[100],hasUncheckedAuto:[false],hasUncheckedDstRng:[false],DataLabelFontSizeConstraint:[false],DataLabelTextAngle:[0],showModeBar:[true],totalShw:[true],intSumShw:[true],intSumFull:[true],totalLabel:["Total"],posClr:[8440970],negClr:[4342504],totalClr:[12025646],intSumClr:[14798774]};function B(E,F,G){var H={};D.keyarray(A).forEach(function(K){var J=A[K];H[K]=J[E]||J[0];});var I=F?"NGM":"OGM";themeProps=mstrApp.getThemeProps(I).DEFAULT_PROPS.ALL;D.keyarray(themeProps).forEach(function(J){H[J]=themeProps[J];});return H;}mstrmojo.gm.GMPropDefaults=mstrmojo.provide("mstrmojo.gm.GMPropDefaults",{propValuesLight:{},propValuesDark:null,prevTheme:null,prevChart:null,update:function(J,I){var H,G,E=1,F=J===E?this.propValuesLight:this.propValuesDark;if(F&&I&&I[0]){G=I[0];H=I[1]!==undefined?I[1]:A[G][J];F[G]=H;}},lightTheme:function(G){var F=this.prevTheme!==G.theme||this.prevChart!==G.chartType;var H=G.isNewTheme?C.DEFAULT:C.CLASSIC,E=this.propValuesLight[H];if(!E||F){E=B(0,G.isNGM,G.chartType);this.propValuesLight[H]=E;this.prevTheme=H;this.prevChart=G.chartType;}return E;},darkTheme:function(){var E=this.propValuesDark;if(!E){E=B(1);this.propValuesDark=E;}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType");var B=mstrmojo.chart.model,D=B.enums,A=D.EnumDSSGraphRegressionType;mstrmojo.chart.GraphTrendLineOptions=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphTrendLineOptions",mRegressionType:A.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeansonal:false,init:function C(E){if(E){if(E.RegressionType){this.mRegressionType=E.RegressionType;}if(E.Order){this.mOrder=E.Order;}if(E.Period){this.mPeriod=E.Period;}if(E.ShowEquation){this.mShowEquation=E.ShowEquation;}if(E.ShowCoefficients){this.mShowCoefficients=E.ShowCoefficients;}if(E.UserSeriesGraphColor){this.mUserSeriesGraphColor=E.UserSeriesGraphColor;}if(E.Seasonal){this.mSeasonal=E.Seasonal;}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumShapeType","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumGraphMajorType","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixElementSizeMode");mstrmojo.requiresCls("mstrmojo.Base");var W=mstrmojo.chart,T=W.ChartConstants,C=W.common,Q=W.model,l=Q.enums,h=l.EnumDSSGraphMarkerShape,e=l.EnumDSSGraphType,j=l.EnumShapeType,a=W.enums,X=a.EnumGraphMajorType,O=a.EnumGraphMatrixMarkerTypeInChart,d=a.EnumGraphMatrixElementSizeMode;function r(w){var v=0.9;switch(w){case O._MUTATION_IN_LINE:case O._ISODOT_IN_LINEAREA:v=this.mHasSizeBy?0.9:0.5;break;case O._PIE:if(this.getPieShapeLayout()===X.GMT_GRID){var u=this.parentContext&&this.parentContext.mDatasetPtr&&this.parentContext.mDatasetPtr.showPieDatalabels();v=u?0.5:0.9;}break;case O._SHAPES_IN_BUBBLESCATTER:v=this.mHasSizeBy?0.9:0.5;break;case O._TICK_CATEGORY:case O._TICK_VALUE:case O._TICK_GRID:v=0.8;break;}return v;}function V(z,AC,AF,w,x,AD){w=w||false;if(x!==0){x=x||this.mMarkerShape;}if(AD===undefined||AD===null){AD=0;}var AA=0,v=(x===h.DssGraphMarkerShapeNone);if(w){v=w;}var AB=AF-AD;if(this.mHasSizeBy||!v||AF===1||AB===1){var AE=v?O._LINE_IN_LINE:O._MUTATION_IN_LINE;if(v){if(AF===1){AE=O._DOTS_IN_LINE;if(!this.mHasSizeBy){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}}else{if(w){AE=O._DOTS_IN_LINE;}}}else{if(AF===1){AE=O._ISODOT_IN_LINEAREA;}if(!this.mHasSizeBy){AA=(this.mEstGraphWidth/(AF+1)/2);AA=Math.min(AA,12);return AA;}}AA=this.GetMaxMarkerSize(AE,AC,AF,this.mHasSizeBy);}else{if(z){if(w){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}return 0;}else{if(w){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}var u=this.parentContext;if(u&&u.mDatasetPtr){var y=u.mDatasetPtr.getGenericLineFormat(0,0);AA=y&&y.mLineThickness;if(AA<=2){AA=3;}}}AA=Math.max(AA,this.mConstants.MinimalSize.Line);}return AA;}function F(w,v,u){return w*3.25+(Math.min(u,v)*0.00375);}mstrmojo.chart.GraphMatrixContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphMatrixContext",mHasSizeBy:false,mMaxSizeVal:100000,mMinSizeVal:0,mCustomScaleForSizeBy:false,mHasColorBy:false,mEstGraphWidth:600,mEstGraphHeight:400,mMarkerShape:0,mGraphType:0,mClippedPaddings:null,mHasChartWithOnlyDataMarkers:false,mIsNeedRotateDataLabel:false,mIsNeedAdjustAxis:false,mShownValueTickSet:null,mIsolatedDots:null,mConstants:null,mInputs:null,mElementsInfo:null,parentContext:null,init:function p(u){this.mShownValueTickSet=[{},{}];this.mClippedPaddings={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};if(u&&u.GraphType){this.mGraphType=u.GraphType;}this.mElementsInfo={Max:{Size:0.9,Mode:0},Min:{Size:0,Mode:0}};this.mConstants={FixedTickerSize:2,FixedDataMarkerSize:3,MinimalSize:{Bar:5,Pie:10,Band:10,Line:1,ProportionalMin:1,General:2},MaximalSize:{Bar:44,Band:100},CondenseLimit:{Percentage:10,Default:-1}};},GetAdjustThicknessValue:function Y(u){switch(u){case 1:case 2:case 3:case 4:u++;break;default:break;}return u;},AddToIsolatedDotList:function t(u){if(this.mIsolatedDots===null){this.mIsolatedDots=new C.MapStructure();}this.mIsolatedDots.replaceByTripleId(u,true);},IsIsolatedDot:function k(v,u){if(this.mIsolatedDots===null){return false;}u=(u!==undefined)?u:false;if(u){if(this.mMarkerShape!==h.DssGraphMarkerShapeNone){return false;}}return(this.mIsolatedDots.findByTripleId(v)!==undefined);},IsIsolatedDotInLine:function D(u){return this.IsIsolatedDot(u,true);},GetMaxElementSizeInAreaChart:function N(w,x,u,v){return V.call(this,true,w,x,u,null,v);},GetMaxElementSizeInLineChart:function P(w,x,v,u){return V.call(this,false,w,x,v,u);},GetValueAxisPadding:function Z(v,x,w){if(w===undefined){w=true;}var u=v?(w?"X1":"X2"):(w?"Y1":"Y2");return x?this.mClippedPaddings[u].HighOffset:this.mClippedPaddings[u].LowOffset;},UpdateValueAxisPadding:function R(w){var v,y,x,z,u;for(v=0;v<2;++v){for(u=0;u<2;++u){y=v===0;z=u===0;x=y?(z?"X1":"X2"):(z?"Y1":"Y2");if(w[x]!==undefined){this.mClippedPaddings[x].LowOffset=w[x].LowOffset;this.mClippedPaddings[x].HighOffset=w[x].HighOffset;}}}},GetMaxMarkerSize:function c(AM,AC,AK,u){u=u===undefined?false:u;var AQ=this.mElementsInfo,y=10000,AH=24,AJ=12,AA=AC?this.mEstGraphWidth:this.mEstGraphHeight,AD=AA/(AK*2)+0.5,w=AQ.Max.Size,AE=AQ.Max.Size;if(AM===O._MUTATION_IN_LINE||AM===O._ISODOT_IN_LINEAREA){w=AE;}if(AQ.Max.Mode===d._AUTOMATIC){if(AM!==O._LINE_IN_LINE){y=this.mHasSizeBy?24:12;}if(AM!==O._LINE_IN_LINE&&AM!==O._DOTS_IN_LINE){y=u?AH:AJ;}w=r.call(this,AM);}switch(AM){case O._LINE_IN_LINE:case O._DOTS_IN_LINE:var AO=AC?this.mEstGraphHeight:this.mEstGraphWidth,AL=AO*0.15;AL=Math.min(AL,y*2);if(AM===O._DOTS_IN_LINE){if(AK!==1){AD=AD*2;}AL=Math.min(AL,AD);var v=AQ.Min.Size;if(AQ.Min.Mode===d._MANUAL){v=0;}AL=Math.max(AL/2,v);}return AL;case O._MUTATION_IN_LINE:case O._ISODOT_IN_LINEAREA:case O._SHAPES_IN_BUBBLESCATTER:var z=1;z=Math.min(this.mEstGraphHeight,this.mEstGraphWidth)*0.15;z=Math.min(z*w,y);if(AM===O._MUTATION_IN_LINE||AM===O._ISODOT_IN_LINEAREA){z=Math.min(z,AD);z=Math.ceil(z);}return z;case O._PIE:var AF=true,AI=0.2,x=this.getPieShapeLayout(),AB=Math.min(this.mEstGraphWidth,this.mEstGraphHeight);if(x===X.GMT_CATEGORY){var AG=AC?this.mEstGraphHeight:this.mEstGraphWidth;if(AB/AG<0.15){AF=false;}}z=w*AB/2;if(x===X.GMT_GRID||(x===X.GMT_CATEGORY&&!AF)){if(AQ.Max.Mode===d._AUTOMATIC){z=Math.min(z,250);}}else{z*=AI;z=Math.min(z,AB);if(AQ.Max.Mode===d._AUTOMATIC){z=Math.min(z,50);}}if(x===X.GMT_CATEGORY){z=Math.min(z,AD);}z=Math.floor(Math.max(z,10));return z;case O._TICK_CATEGORY:case O._TICK_VALUE:case O._TICK_GRID:y=24;var AN=24;if(AM===O._TICK_CATEGORY){AN=AA/AK;}var AP=AN*w;if(AM===O._TICK_CATEGORY){AP=Math.min(AP,y);}return AP+0.5;default:return 0;}},GetScaledSize:function q(w,y,v){if(!this.mHasSizeBy){return y;}var u=this.mElementsInfo.Min.Mode,x=this.ToRatioEx(w,(u===d._PROPORTIONAL));if(u===d._PROPORTIONAL&&v!==null&&v!==undefined){if(v===j._CIRCLE||v===j._PIE||v===j._PIESLICE||v===j._SQUARE){x=Math.sqrt(x);}}return this.GetScaledSizeWithRatio(x,y);},GetScaledSizeWithRatio:function J(z,AB,v){var u=false,w=this.mElementsInfo,x=w.Min.Mode,AA;if(!(isNaN(v)||v===null)){AA=v;u=true;}else{AA=w.Min.Size;}if(x===d._MANUAL){AA=w.Min.Size*AB;if(AA<0){AA=0;}if(AA>AB){AA=AB;}}else{if(x===d._PROPORTIONAL){return Math.max(this.mConstants.MinimalSize.ProportionalMin,z*AB);}else{if(!u){AA=this.mConstants.MinimalSize.General;}}}var y=Math.max((AB-AA),0);var AC=z*y+AA;return Math.min(AC,AB);},ToRatio:function B(w,u,v,x){x=x||false;if(x){if(v>0){v=0;}if(u<0){u=0;}}if(v===u){return 1;}if(w>u){w=u;}if(w<v){w=v;}return Math.min((w-v)/(u-v),1);},ToRatioEx:function S(x,w){w=w||false;var u=this.mMaxSizeVal,v=this.mMinSizeVal;if(w){x=Math.abs(x);u=Math.max(Math.abs(u),Math.abs(v));v=0;}else{x=Math.min(u,x);x=Math.max(v,x);}if(this.mCustomScaleForSizeBy){return this.ToRatio(x,u,v,false);}return this.ToRatio(x,u,v,w);},getCondensedTextLimit:function f(u){switch(u){case 4:return this.mConstants.CondenseLimit.Percentage;}return this.mConstants.CondenseLimit.Default;},GetRealTripleId:function A(w,u,v){var x=800,y=new W.TripleId({TripleId:v});if(v.mSeriesId>=0){y.mSeriesId+=u*x;}if(v.mGroupId>=0){y.mGroupId+=w*x;}return y;},GetLogicalTripleId:function s(v){var w=new W.TripleId({TripleId:v}),u=341;if(v.mObjectId===u){w.mSeriesId=this.hGetLogicalId(w.mSeriesId);w.mGroupId=this.hGetLogicalId(w.mGroupId);}return w;},hGetLogicalId:function G(u){var v=800;if(u<0){return u;}u%=v;return u;},GetValueAxisZoomScale:function g(u){return 1;},checkPaddingBetweenLabels:function E(AB,AA,x,AC){if(x===undefined){return AB.HasIntersection(AA);}var v=0,y=1,u=5,w,z;if(AC){w=Math.abs(AB.x+AB.width/2-AA.x-AA.width/2);}else{w=Math.abs(AB.y+AB.height/2-AA.y-AA.height/2);}switch(x){case v:z=this.getPadding(T.kBetweenLabelCenters);break;case u:w-=0.5*(AC?AB.width+AA.width:AB.height+AA.height);z=this.getPadding(T.kExtra);break;case y:if(AC){w-=0.5*(AB.width+AA.width);}else{w-=0.5*(AB.height+AA.height);}z=this.getPadding(T.kBetweenLabels);break;default:return AB.HasIntersection(AA);}return w<z;},checkLabelPaddingToBorder:function o(y,v,AA,z){var w,u,x=this.getPadding(T.kLabelToChart);if(z){w=y.x;u=y.x+y.width;}else{w=y.y;u=y.y+y.height;}return(w>=v+x)&&(u+x<=AA);},getPadding:function M(u){switch(u){case T.kBetweenLabels:return 10;case T.kBetweenLabelLines:return 5;case T.kLabelToChart:return 5;case T.kNumericLabelToTick:return 4;case T.kExtra:return 2;case T.kChartToChart:return 10;case T.kEndTickToChart:return 10;case T.kEndLabelToChart:return 5;case T.kBetweenLabelCenters:return 20;case T.kBandSide:var v=this.mElementsInfo.Max.Mode;if(v===d._AUTOMATIC){return 5;}return 0;case T.kCategoricalLabelToTick:return 5;case T.kDataLabel:return 5;case T.kRefLabel:return 5;case T.kAxisOriginLabel:return 5;default:return 0;}},getClippedOffset:function b(w,AB,v,x,AA,z,u){var y=AA?x.x:x.y;return{LowOffset:Math.max(z,v-Math.abs(y-w)),HighOffset:Math.max(u,v-Math.abs(AB-y))};},getSizeByPieRadius:function I(w,AD,x,AA,v,z){if(w===undefined||w===null){return -1;}var AC=w.GetSizeByData(AD,x);if(AC===undefined){return -1;}var AE,u=this.mElementsInfo.Min.Mode;var AB=this.ToRatioEx(AC,u===d._PROPORTIONAL);if(u===d._PROPORTIONAL){var y=Math.max(0,z-this.mConstants.MinimalSize.Pie);AE=Math.round(y*AB+this.mConstants.MinimalSize.Pie);}else{AE=this.GetScaledSizeWithRatio(AB,z,this.mConstants.MinimalSize.Pie);}return AE;},updateGMGraphTypeWithMarkerShape:function L(u){if(u){this.mMarkerShape=u;}if(this.mMarkerShape!==202&&this.mMarkerShape!==201){return ;}switch(this.mGraphType){case e.DssGraphTypeGridChart:this.mGraphType=e.DssGraphTypeGrid_Pies;return ;case e.DssGraphTypeX_Y_Scatter:case e.DssGraphTypeDualAxis_X_Y_Scatter:case e.DssGraphTypeX_Y_Scatter_with_Labels:case e.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:this.mGraphType=e.DssGraphTypeScatter_Pies;return ;case e.DssGraphTypeBubble:case e.DssGraphTypeBubble_DualAxis:case e.DssGraphTypeBubble_With_Labels:case e.DssGraphTypeBubble_DualAxis_With_Labels:this.mGraphType=e.DssGraphTypeBubble_Pies;return ;case e.DssGraphTypeVertical_Area_Absolute:case e.DssGraphTypeVertical_Area_DualAxis_Absolute:case e.DssGraphTypeVertical_Area_BiPolar_Absolute:case e.DssGraphTypeVertical_Line_Absolute:case e.DssGraphTypeVertical_Line_BiPolar_Absolute:case e.DssGraphTypeVertical_Line_DualAxis_Absolute:case e.DssGraphTypeVertical_Bar_BiPolar_Absolute:case e.DssGraphTypeVertical_Bar_DualAxis_Absolute:case e.DssGraphTypeVertical_Bar_Absolute:case e.DssGraphTypeVertical_Bar_Side_by_Side:case e.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case e.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:this.mGraphType=e.DssGraphTypeVertical_CategoryPies_Absolute;return ;case e.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case e.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case e.DssGraphTypeHorizontal_Bar_Absolute:case e.DssGraphTypeHorizontal_Area_Absolute:case e.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case e.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case e.DssGraphTypeHorizontal_Line_Absolute:case e.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case e.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case e.DssGraphTypeHorizontal_Bar_Side_by_Side:case e.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case e.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:this.mGraphType=e.DssGraphTypeHorizontal_CategoryPies_Absolute;return ;case e.DssGraphTypeVertical_Bar_DualAxis_Stacked:case e.DssGraphTypeVertical_Bar_Stacked:case e.DssGraphTypeVertical_Bar_BiPolar_Stacked:case e.DssGraphTypeVertical_Area_BiPolar_Stacked:case e.DssGraphTypeVertical_Area_DualAxis_Stacked:case e.DssGraphTypeVertical_Area_Stacked:case e.DssGraphTypeVertical_Line_Stacked:case e.DssGraphTypeVertical_Line_BiPolar_Stacked:case e.DssGraphTypeVertical_Line_DualAxis_Stacked:this.mGraphType=e.DssGraphTypeVertical_CategoryPies_Stacked;return ;case e.DssGraphTypeHorizontal_Bar_Stacked:case e.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case e.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case e.DssGraphTypeHorizontal_Area_Stacked:case e.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case e.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case e.DssGraphTypeHorizontal_Line_Stacked:case e.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case e.DssGraphTypeHorizontal_Line_DualAxis_Stacked:this.mGraphType=e.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case e.DssGraphTypeVertical_Bar_Percent:case e.DssGraphTypeVertical_Line_Percent:case e.DssGraphTypeVertical_Area_Percent:this.mGraphType=e.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case e.DssGraphTypeHorizontal_Bar_Percent:case e.DssGraphTypeHorizontal_Line_Percent:case e.DssGraphTypeHorizontal_Area_Percent:this.mGraphType=e.DssGraphTypeVertical_CategoryPies_Percent;return ;}},isCombinationChart:function K(){return this.mMarkerShape===h.DssGraphMarkerShapeCombined;},isPieOrRingShape:function U(){return this.mMarkerShape===h.DssGraphMarkerShape2DPie||this.mMarkerShape===h.DssGraphMarkerShape2DRingPie;},getPieShapeLayout:function n(){switch(this.mGraphType){case e.DssGraphTypeHorizontal_CategoryPies_Absolute:case e.DssGraphTypeHorizontal_CategoryPies_Stacked:case e.DssGraphTypeHorizontal_CategoryPies_Percent:case e.DssGraphTypeVertical_CategoryPies_Absolute:case e.DssGraphTypeVertical_CategoryPies_Stacked:case e.DssGraphTypeVertical_CategoryPies_Percent:return X.GMT_CATEGORY;case e.DssGraphTypeScatter_Pies:return X.GMT_SCATTER;case e.DssGraphTypeBubble_Pies:return X.GMT_BUBBLE;case e.DssGraphTypeGrid_Pies:return X.GMT_GRID;default:return X.GMT_SPECTRAL;}},markerToShape:function H(u){switch(u){case h.DssGraphMarkerShapeCircle:return j._CIRCLE;case h.DssGraphMarkerShapeRectangle:case h.DssGraphMarkerShapeSquare:return j._SQUARE;case h.DssGraphMarkerShape2DPie:case h.DssGraphMarkerShape2DRingPie:return j._PIE;case h.DssGraphMarkerShapeGMTick:return j._TICKER;default:return j._GENERIC;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var A="_tmsp";var B=mstrmojo.gm.GMPropertyNode=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMPropertyNode",modifiedPropertyKeys:undefined,children:undefined,dirty:undefined,jsonObj:undefined,init:function(F){this._super(F);this.children={};this.modifiedPropertyKeys=[];var G=this.jsonObj,D,C,E;for(E in G){if(G.hasOwnProperty(E)){D=G[E];C=typeof D;if(C==="object"||C==="array"){this.setProperty(E,G[E],true);}}}},setProperty:function(D,C,E){if(typeof C==="object"){this.children[D]=new B({jsonObj:C,parent:this});this.jsonObj[D]=C;}else{this.jsonObj[D]=C;this.jsonObj[D+A]=(new Date()).getTime();}if(E!==true){this.modifiedPropertyKeys.push(D);}},manuallyAddModifiedPropertyName:function(C){this.modifiedPropertyKeys.push(C);},getRawJson:function(){return this.jsonObj;},toString:function(){return JSON.stringify(this.jsonObj);},getPropertyNode:function(C){return this.children[C];},getPropertyJSONValue:function(D){var C=this.children[D];if(C){return C.jsonObj;}return this.jsonObj[D];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=0;mstrmojo.chart.FormatBase=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatBase",init:function A(C){}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition","mstrmojo.chart.enums.EnumFontRotation");var D=mstrmojo.chart,G=D.enums,H=G.EnumFontRotation,A=mstrmojo.chart.model,B=A.enums,F=B.EnumDSSGraphDataTextPosition;mstrmojo.chart.LabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.LabelInfo",IsPut:false,IsClockWise:false,IsValid:false,SeriesId:0,GroupId:0,HostMarker:null,SuggestedStart:F.DssGraphDTPositionOutMin,LabelRotation:H.FR_NORMAL,Label:null,init:function I(J){this.Label=null;this.HostMarker=null;this._super(J);},IsMoved:function C(J){return(this.SuggestedStart!==J);},ToRectangle:function E(){return this.Label.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ImageMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ImageMap",mShape:-1,mObjectID:-1,mSeriesID:-1,mGroupID:-1,mCoordinates:null,mToolTip:"",GetShape:function E(){return this.mShape;},GetObjectID:function D(){return this.mObjectID;},GetSeriesID:function C(){return this.mSeriesID;},GetGroupID:function A(){return this.mGroupID;},GetCoordinates:function B(){return this.mCoordinates;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumNumberCategory");var B=mstrmojo.chart,A=B.enums,F=A.EnumNumberCategory;mstrmojo.chart.ChartAdvFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartAdvFormat",mFormatType:F.General,mDigits:0,mGrouping:3,mCurrency:"$",mPosCurr:0,mNegFormat:3,mCustomFormat:"General",init:function E(I){var H=mstrmojo.hash;if(I&&I.ChartAdvFormat){var G=I.ChartAdvFormat;H.copy(G,this);this.mCurrency=this.mCurrency||"$";this.mCustomFormat=this.mCustomFormat||"General";}},reset:function D(H){var G=mstrmojo.hash;G.copy(H,this);},restore:function C(){this.mFormatType=F.General;this.mDigits=0;this.mGrouping=3;this.mCurrency="$";this.mPosCurr=0;this.mNegFormat=3;this.mCustomFormat="General";}});mstrmojo.chart.dNF=new B.ChartAdvFormat();mstrmojo.chart.dNF.isDefault=true;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.MapStructure=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.MapStructure",map:null,init:function H(K){this._super(K);this.map={};},replace:function B(L,O){var N=(L&&L.length)||0,P,M,K;for(K=0,P=this.map;K<N-1;K++){M=P[L[K]];if(M===undefined){M=P[L[K]]={};}P=M;}P[L[N-1]]=O;},replaceByTripleId:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId],L);},replaceByGraphPropertyKey:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId],L);},push:function G(K,L){this.replace(K,L);},find:function F(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}return O[L[N-1]];},findByTripleId:function J(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId]);},findByGraphPropertyKey:function I(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},deleteElement:function A(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}delete O[L[N-1]];},deleteByTripleId:function E(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId]);},deleteByGraphPropertyKey:function C(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},clear:function D(){this.map={};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.gm.GMEnums");var A=mstrmojo.gm.EnumIdentityType;mstrmojo.gm.GMIdentities=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMIdentities"});mstrmojo.gm.HeaderCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.HeaderCellIdentity",eid:undefined,v:undefined,tid:undefined,n:undefined,tui:undefined,fid:undefined,o:undefined,isRowAttribute:undefined,at:undefined,dei:undefined,dpt:undefined});mstrmojo.gm.GeneralIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GeneralIdentity",objType:undefined});mstrmojo.gm.TitleCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TitleCellIdentity",tid:undefined,fid:undefined,n:undefined,tui:undefined,isRowAttribute:undefined,otp:undefined,init:function(B){this.fid=B.fid;this.tid=B.id;this.isRowAttribute=B.isRowAttribute;if(B.isRowAttribute){this.objType=A.ROW_TITLE;}else{this.objType=A.COL_TITLE;}this.n=B.n;this.otp=B.otp;this.ost=B.ost;this.tui=B.tui;}});mstrmojo.gm.MetricAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.MetricAxisTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AttributeAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AttributeAxiTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AxisIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AxisIdentity",isNumericAxis:undefined,metricIdxArr:undefined,attrIdArr:undefined});mstrmojo.gm.ColorSquareIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.ColorSquareIdentity",init:function(B){this._super(B);this.comb=this.getElementsCombination();},getElementsCombination:function(){var B,F=this.token,C,H,G,E,I,D;if(F){D=[];C=F.levels;H=F.elements;G=F.types;B=C.length;for(E=0;E<B;E++){I={eid:H[E],tid:C[E]};if(G){I.tp=G[E];}D.push(I);}return D;}return undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var R=mstrmojo.chart;mstrmojo.chart.Point2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Point2D",x:0,y:0,init:function P(V){if(V){if(V.Point2D){this.x=V.Point2D.x;this.y=V.Point2D.y;}else{this._super(V);}}},Reset:function A(V,W){this.x=V;this.y=W;},ResetPoint:function N(V){this.x=V.x;this.y=V.y;},DistanceSquared:function D(V){return(this.x-V.x)*(this.x-V.x)+(this.y-V.y)*(this.y-V.y);},Distance:function C(V){return Math.sqrt(this.DistanceSquared(V));},isEqual:function O(V){return(this.x===V.x&&this.y===V.y);},IsInPolygon:function I(Y){var Z=Y.length,V=false,X,W;if(Z<3){return false;}for(X=0,W=Z-1;X<Z;W=X++){if(((Y[X].y<=this.y&&this.y<Y[W].y)||(Y[W].y<=this.y&&this.y<Y[X].y))&&this.x<=(Y[W].x-Y[X].x)*(this.y-Y[X].y)/(Y[W].y-Y[X].y)+Y[X].x){V=!V;}}return V;},IsStrictlyInPolygon:function K(Z){var Y=new R.Point2D({x:this.x+0.1,y:this.y}),W=new R.Point2D({x:this.x-0.1,y:this.y}),V=new R.Point2D({x:this.x,y:this.y+0.1}),X=new R.Point2D({x:this.x,y:this.y-0.1});if(Y.IsInPolygon(Z)){return false;}if(W.IsInPolygon(Z)){return false;}if(V.IsInPolygon(Z)){return false;}return !X.IsInPolygon(Z);},Rotate:function M(W,Y){var V=this.x-W.x,X=this.y-W.y;this.x=W.x+Math.cos(Y)*V-Math.sin(Y)*X;this.y=W.y+Math.sin(Y)*V+Math.cos(Y)*X;},MiddleTo:function F(V){return new R.Point2D({x:(this.x+V.x)/2,y:(this.y+V.y)/2});},Shifted:function Q(V){return new R.Point2D({x:this.x+V.x,y:this.y+V.y});},NegativeShifted:function T(V){return new R.Point2D({x:this.x-V.x,y:this.y-V.y});},swap:function L(){var V=this.x;this.x=this.y;this.y=V;},swapPoints:function B(W){var V;V=this.x;this.x=W.x;W.x=V;V=this.y;this.y=W.y;W.y=V;},IsOnSegment:function H(Y,W,X){var V=X?0.01:-0.01;if(Math.abs(Y.x-W.x)<0.01){if((this.y-Y.y)>V&&(W.y-this.y)>V){return true;}if((this.y-W.y)>V&&(Y.y-this.y)>V){return true;}}else{if((this.x-Y.x)>V&&(W.x-this.x)>V){return true;}if((this.x-W.x)>V&&(Y.x-this.x)>V){return true;}}return false;},IsOnVerOrHorSegment:function G(W,V){if(this.y===W.y&&this.y===V.y){return(((this.x-W.x)>=0&&(V.x-this.x)>=0)||((this.x-W.x)<=0&&(V.x-this.x)<=0));}if(this.x===W.x&&this.x===V.x){return(((this.y-W.y)>=0&&(V.y-this.y)>=0)||((this.y-W.y)<=0&&(V.y-this.y)<=0));}return false;},DistanceToLine:function J(d,Z){var a=this.DistanceSquared(d),W=this.DistanceSquared(Z),Y=d.DistanceSquared(Z),c=0.01,V,b,X;if(a<c||W<c){return 0;}if(Y<c){return Math.sqrt(a);}if(a>=W+Y){return Math.sqrt(W);}if(W>=a+Y){return Math.sqrt(a);}V=new R.Point2D({x:this.x-d.x,y:this.y-d.y});b=new R.Point2D({x:Z.x-d.x,y:Z.y-d.y});X=V.x*b.y-V.y*b.x;return(X<0?-X:X)/Math.sqrt(Y);},DistanceToPolygon:function S(X){var Z=X.length,V=this.DistanceToLine(X[0],X[Z-1]),Y,W;if(this.IsInPolygon(X)){return 0;}for(W=0;W+1<Z;++W){Y=this.DistanceToLine(X[W],X[W+1]);if(V>Y){V=Y;}}return V;},rotateAndClone:function E(V,W){this.Rotate(V,W);return this;},clone:function U(){return new R.Point2D({Point2D:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var E=0;mstrmojo.chart.common.FractionNumber=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.FractionNumber",mDenominator:0,mNumerator:0,init:function D(F){},Copy:function B(F){this.mDenominator=F.mDenominator;this.mNumerator=F.mNumerator;},ToDouble:function A(){if(this.mDenominator===0){if(this.mNumerator>=0){return Number.POSITIVE_INFINITY;}return Number.NEGATIVE_INFINITY;}return(this.mNumerator)/this.mDenominator;},ToString:function C(L,G,K){if(this.mDenominator===0){L=false;}var J="",I=this.mNumerator,F=false;if(L){var H=parseInt(this.mNumerator/this.mDenominator);I=this.mNumerator%this.mDenominator;K=K||(I!==0);if(H>0){F=true;J=H.toString();if(K){J+=" ";}}}if(!K&&!F&&I===0){J="0";}else{if(!K&&F&&I===0){E++;}else{J+=I.toString();J+="/";J+=this.mDenominator.toString();}}if(!G){J="-"+J;}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumFormatType");var C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONFormat",mpOriginalAddress:0,mFormatType:A.FMT_UNDEFINED,init:function D(E){if(E.Font){this.mpOriginalAddress=E.Font.id;}else{if(E.Line){this.mpOriginalAddress=E.Line.id;}else{this.mpOriginalAddress=E.id;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.JSONUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUtil",AppendCompoundPointerVectorToJSONObject:function A(E,C,G){var F,B,D;D=G[E]=[];B=C.length;if(B>0){for(F=0;F<B;++F){C[F].AppendToJSONObject(D);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=mstrmojo.chart;mstrmojo.chart.JSONParameter=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONParameter",mIsFirstFrameSet:false,mIsLastFrameSet:false,mParameterName:"",mParameterValue:null,mParameterStartValue:null,init:function E(H){this._super(H);this.mIsFirstFrameSet=!H.mIsLastFrameSet;if(this.mIsFirstFrameSet){this.mParameterStartValue=H.mParameterValue;}},SetName:function D(H){this.mParameterName=H;},GetName:function C(){return this.mParameterName;},SetValue:function G(H,I){if(I){this.mParameterValue=H;this.mIsLastFrameSet=true;}else{this.mParameterStartValue=H;this.mIsFirstFrameSet=true;}},GetValue:function A(H){return H?this.mParameterValue:this.mParameterStartValue;},AppendToJSONObject:function F(J){var H,I=function I(K,L){if(K instanceof B.Point2D){J[L]={X:K.x,Y:K.y};}else{if(K instanceof B.Rect2D){J[L]={X:K.x,Y:K.y,Width:K.width,Height:K.height};}else{if(K instanceof B.RGBColor){J[L]={R:K.mR,G:K.mG,B:K.mB};}else{J[L]=K;}}}};if(this.mIsLastFrameSet&&this.mIsFirstFrameSet){J[this.mParameterName]=[this.mParameterStartValue,this.mParameterValue];}else{if(this.mIsLastFrameSet){I(this.mParameterValue,this.mParameterName);}else{if(this.mIsFirstFrameSet){I(this.mParameterStartValue,this.mParameterName);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.Vector2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Vector2D",x:0,y:0,init:function H(I){if(I){if(I.x!==undefined&&I.y!==undefined){this.x=I.x;this.y=I.y;}else{if(I.Point){this.x=I.Point.x;this.y=I.Point.y;}else{if(I.StartPoint&&I.EndPoint){this.x=I.EndPoint.x-I.StartPoint.x;this.y=I.EndPoint.y-I.StartPoint.y;}}}}},Reset:function B(I,J){this.x=I;this.y=J;},LengthSquared:function G(){return this.x*this.x+this.y*this.y;},InnerProduct:function A(I){return(this.x*I.x+this.y*I.y);},CrossProduct:function D(I){return(this.x*I.y-this.y*I.x);},IncludedAngle:function F(J){var I;I=this.InnerProduct(J)/(Math.sqrt(this.LengthSquared()*J.LengthSquared()));I=I>1?1:I;I=I<-1?-1:I;return Math.acos(I);},Length:function E(){return Math.sqrt(this.LengthSquared());},Normalize:function C(){var I=this.Length();this.x/=I;this.y/=I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var S=mstrmojo.chart,M=295,B=301,H=289,C=271,T=277,E=10003,V=100200,G=20000,U=20001,O=20002,Q=20003,N=20004,P=20005,L=20006,J=20007,I=21007,A=S.gNullObjectId=-3,F=S.gNullSeriesId=-3,D=S.gNullGroupId=-3;mstrmojo.chart.TripleId=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.TripleId",mObjectId:A,mSeriesId:F,mGroupId:D,init:function R(W){if(!W){this.mObjectId=A;this.mSeriesId=F;this.mGroupId=D;}else{if((W instanceof Array)&&W.length>=3){this.mObjectId=W[0];this.mSeriesId=W[1];this.mGroupId=W[2];}else{if(W.TripleId){var X=W.TripleId;this.mObjectId=X.mObjectId;this.mSeriesId=X.mSeriesId;this.mGroupId=X.mGroupId;}else{this.mObjectId=(W.ObjectId!==undefined)?W.ObjectId:A;this.mSeriesId=(W.SeriesId!==undefined)?W.SeriesId:F;this.mGroupId=(W.GroupId!==undefined)?W.GroupId:D;}}}}});S.gNullTripleId=new mstrmojo.chart.TripleId({ObjectId:A,SeriesId:F,GroupId:D});var K=S.gAxisTripleIds={};K.Y1=new mstrmojo.chart.TripleId({ObjectId:M,SeriesId:0,GroupId:D});K.Y2=new mstrmojo.chart.TripleId({ObjectId:B,SeriesId:0,GroupId:D});K.X1=new mstrmojo.chart.TripleId({ObjectId:H,SeriesId:0,GroupId:D});K.X2=new mstrmojo.chart.TripleId({ObjectId:V,SeriesId:0,GroupId:D});K.Z=new mstrmojo.chart.TripleId({ObjectId:E,SeriesId:0,GroupId:D});K.O1=new mstrmojo.chart.TripleId({ObjectId:C,SeriesId:0,GroupId:D});K.O2=new mstrmojo.chart.TripleId({ObjectId:T,SeriesId:0,GroupId:D});mstrmojo.chart.ManagerId=new mstrmojo.chart.TripleId({ObjectId:G,SeriesId:-3,GroupId:D});mstrmojo.chart.PlotManagerId=new mstrmojo.chart.TripleId({ObjectId:U,SeriesId:F,GroupId:D});mstrmojo.chart.PlotId0=new mstrmojo.chart.TripleId({ObjectId:O,SeriesId:0,GroupId:D});mstrmojo.chart.BarRenderer0=new mstrmojo.chart.TripleId({ObjectId:P,SeriesId:0,GroupId:D});mstrmojo.chart.LineRenderer0=new mstrmojo.chart.TripleId({ObjectId:L,SeriesId:0,GroupId:D});mstrmojo.chart.AreaRenderer0=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:0,GroupId:D});mstrmojo.chart.RenderLayer2=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:2,GroupId:D});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.HSLColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.HSLColor",h:0,s:0,l:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var A=mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition;mstrmojo.chart.GMDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GMDataLabelInfo",display:false,isValid:false,SeriesId:0,GroupId:0,HostMarkerBound:null,Label:null,DataLabelLocation:A._BOTTOM,dataLabelLCenterPoints:[],CenterXOffset:0,CenterYOffset:0,dataLabelPosition:[],XIndex:0,YIndex:0,SeriesInfo:0,HostMarkerPoint:null,init:function B(C){this.dataLabelLCenterPoints=[];this.dataLabelPosition=[];this._super(C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ChartCanvas=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartCanvas",chartContext:null});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.GraphAxisGeneral=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphAxisGeneral",mAxisLabelsLocation:-1,mAxisDrawInReverse:false,mShowAxisLine:true,mShowAxisLabels:true,mShowAxisTitle:false,mAxisDirection:-1,mUseInterlacedGrids:false,init:function A(B){if(B.AxisLabelsLocation!==undefined){this.mAxisLabelsLocation=B.AxisLabelsLocation;}if(B.AxisDrawInReverse!==undefined){this.mAxisDrawInReverse=B.AxisDrawInReverse;}if(B.ShowAxisLine!==undefined){this.mShowAxisLine=B.ShowAxisLine;}if(B.ShowAxisLabels!==undefined){this.mShowAxisLabels=B.ShowAxisLabels;}if(B.ShowAxisTitle!==undefined){this.mShowAxisTitle=B.ShowAxisTitle;}if(B.AxisDirection!==undefined){this.mAxisDirection=B.AxisDirection;}if(B.UseInterlacedGrids!==undefined){this.mUseInterlacedGrids=B.UseInterlacedGrids;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.HSLColor");var F=mstrmojo.chart,H=0.01;function I(N){if(N<0){N+=1;}if((N-1)>0){N-=1;}return N;}function B(P,O,N){if((N-1/6)<0){return P+(O-P)*6*N;}if((N-0.5)<0){return O;}if((N-2/3)<0){return P+(O-P)*6*(2/3-N);}return P;}mstrmojo.chart.RGBColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.RGBColor",mR:0,mG:0,mB:0,init:function M(V,Z){this._super(V);Z=Z||false;if(V!==null){if(V.Color){this.mR=V.Color.mR;this.mG=V.Color.mG;this.mB=V.Color.mB;}else{if(V.R!==undefined&&V.G!==undefined&&V.B!==undefined){this.mR=V.R;this.mG=V.G;this.mB=V.B;}else{if(V.H!==undefined&&V.S!==undefined&&V.L!==undefined){var S=V.H,Y=V.S,O=V.L;var R,T,W,N,U,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{R=0;if((0.5-O)>0){R=O*(1+Y);}else{R=O+Y-(O*Y);}T=2*O-R;W=S/360;N=W+1/3;U=W;X=W-1/3;N=I(N);U=I(U);X=I(X);this.mR=B(T,R,N)*255;this.mG=B(T,R,U)*255;this.mB=B(T,R,X)*255;}}else{if(typeof V==="number"){if(Z){this.mR=V&255;this.mG=(V&65280)>>8;this.mB=(V&16711680)>>16;}else{this.mB=V&255;this.mG=(V&65280)>>8;this.mR=(V&16711680)>>16;}}}}}}},ToInteger:function G(N){N=N||false;if(N){return this.mB+(this.mG<<8)+(this.mR<<16);}return this.mR+(this.mG<<8)+(this.mB<<16);},MakeDarker:function J(N){this.mR*=N;this.mG*=N;this.mB*=N;},Reset:function D(P,O,N){this.mR=P;this.mG=O;this.mB=N;},ResetFromColorValue:function L(O,N){N=N||false;if(N){this.mR=O&255;this.mG=(O&65280)>>8;this.mB=(O&16711680)>>16;}else{this.mB=O&255;this.mG=(O&65280)>>8;this.mR=(O&16711680)>>16;}},ResetFromHSLValue:function K(R){var T=R.H,Y=R.S,O=R.L;var S,U,W,N,V,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{S=0;if((0.5-O)>0){S=O*(1+Y);}else{S=O+Y-(O*Y);}U=2*O-S;W=T/360;N=W+1/3;V=W;X=W-1/3;N=I(N);V=I(V);X=I(X);this.mR=B(U,S,N)*255;this.mG=B(U,S,V)*255;this.mB=B(U,S,X)*255;}},Copy:function E(N){this.mR=N.mR;this.mG=N.mG;this.mB=N.mB;},ToHSL:function A(){var O,R,N,Q,P;O=Math.max(this.mR,this.mG,this.mB);R=Math.min(this.mR,this.mG,this.mB);if(O===R){P=0;}else{if(O===this.mR){if(this.mG>=this.mB){P=60*(this.mG-this.mB)/(O-R);}else{P=60*(this.mG-this.mB)/(O-R)+360;}}else{if(O===this.mG){P=60*(this.mB-this.mR)/(O-R)+120;}else{P=60*(this.mR-this.mG)/(O-R)+240;}}}N=0.5*(O+R)/255;if(O===R){Q=0;}else{if((0.5-N)>0){Q=(O-R)/(O+R);}else{Q=(O-R)/(510-(O+R));}}return new F.HSLColor({h:P,s:Q,l:P});}});var C=mstrmojo.chart.RGBColor;F.gWhite=new C({R:255,G:255,B:255});F.gBlack=new C({R:0,G:0,B:0});F.gLeaderLineColor=new C({R:37,G:108,B:83});F.gStrokeColorForDarkBackground=new C({R:254,G:254,B:254});F.gStrokeColorForLightBackground=new C({R:230,G:230,B:230});F.gColorPalette=[new C({R:62,G:117,B:167}),new C({R:92,G:151,B:70}),new C({R:248,G:215,B:83}),new C({R:23,G:185,B:51}),new C({R:255,G:138,B:14}),new C({R:156,G:57,B:164}),new C({R:144,G:173,B:207}),new C({R:31,G:171,B:242}),new C({R:255,G:255,B:204}),new C({R:255,G:204,B:153}),new C({R:0,G:51,B:0}),new C({R:128,G:0,B:0}),new C({R:49,G:255,B:49}),new C({R:0,G:0,B:255}),new C({R:255,G:128,B:64}),new C({R:99,G:101,B:255}),new C({R:255,G:0,B:0}),new C({R:255,G:255,B:0}),new C({R:0,G:255,B:0}),new C({R:255,G:0,B:255})];F.gLightColorPalette=[new C({R:31,G:119,B:180}),new C({R:214,G:39,B:40}),new C({R:44,G:160,B:44}),new C({R:255,G:127,B:14}),new C({R:148,G:103,B:189}),new C({R:188,G:189,B:34}),new C({R:23,G:190,B:207}),new C({R:127,G:127,B:127}),new C({R:174,G:199,B:232}),new C({R:255,G:152,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:187,B:120}),new C({R:197,G:189,B:5}),new C({R:219,G:219,B:141}),new C({R:158,G:218,B:229}),new C({R:199,G:199,B:199})];F.gDarkColorPalette=[new C({R:22,G:176,B:255}),new C({R:255,G:55,B:41}),new C({R:4,G:186,B:34}),new C({R:255,G:150,B:14}),new C({R:174,G:121,B:222}),new C({R:204,G:205,B:37}),new C({R:25,G:206,B:224}),new C({R:169,G:169,B:169}),new C({R:179,G:205,B:239}),new C({R:255,G:167,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:223,B:128}),new C({R:218,G:195,B:236}),new C({R:225,G:224,B:144}),new C({R:161,G:223,B:234}),new C({R:214,G:214,B:214})];}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.model.enums.EnumDSSGraphObject");var F=mstrmojo.chart,A=mstrmojo.chart.model,B=A.enums,G=B.EnumDSSGraphObject,C=F.gNullObjectId;function H(J){return new F.TripleId({ObjectId:J});}mstrmojo.chart.AxisObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.AxisObject",mLabelId:-1,mMajorId:-1,mMinorId:-1,mTitleId:-1,mCustomLineId:-1,mCustomLabelId:-1,init:function I(J){this.mLabelId=J.LabelId;this.mMajorId=J.MajorId;this.mMinorId=J.MinorId;this.mTitleId=J.TitleId;this.mCustomLineId=J.CustomLineId;this.mCustomLabelId=J.CustomLabelId;}});var E=mstrmojo.chart.AxisObject;var D=F.gAxisObjects=[];D.push(new E({LabelId:H.call(this,G.DssGraph2DO1Label),MajorId:H.call(this,G.DssGraphO1Major),MinorId:H.call(this,G.DssGraphO1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraph2DO2Label),MajorId:H.call(this,G.DssGraphO2Major),MinorId:H.call(this,G.DssGraphO2Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphX1Label),MajorId:H.call(this,G.DssGraphX1Major),MinorId:H.call(this,G.DssGraphX1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,G.DssGraphUserLabel3)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphY1Title),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphY2Label),MajorId:H.call(this,G.DssGraphY2Major),MinorId:H.call(this,G.DssGraphY2Minor),TitleId:H.call(this,G.DssGraphY2Title),CustomLineId:H.call(this,G.DssGraphUserLine2),CustomLabelId:H.call(this,G.DssGraphUserLabel2)}));D.push(new E({LabelId:H.call(this,G.DssGraphY3Label),MajorId:H.call(this,G.DssGraphY3Major),MinorId:H.call(this,G.DssGraphY3Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY4Label),MajorId:H.call(this,G.DssGraphY4Major),MinorId:H.call(this,G.DssGraphY4Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphX2Label),MajorId:H.call(this,G.DssGraphX2Major),MinorId:H.call(this,G.DssGraphX2Minor),TitleId:H.call(this,G.DssGraphX2Title),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,G.DssGraphUserLabel4)}));}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.common.MapStructure");var I=mstrmojo.chart,E=I.gNullTripleId;var G=0;mstrmojo.chart.GraphObjectManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObjectManager",mGraphObjectList:null,mGraphObjectManagerList:null,mTripleId:null,mpManager:null,mChartContextPtr:null,mGraphObjectMap:null,init:function N(O){this._super(O);this.mGraphObjectList=[];this.mGraphObjectManagerList=[];this.mTripleId=this.mTripleId||O.TripleId||E;this.mpManager=O.GraphObjectManager||null;if(this.mpManager!==null){this.mChartContextPtr=this.mpManager.mChartContextPtr;}if(G===-1){}else{if(G===1||(!!this.mpManager)===false){this.mGraphObjectMap=new mstrmojo.chart.common.MapStructure();}else{this.mGraphObjectMap=this.mpManager.mGraphObjectMap||new mstrmojo.chart.common.MapStructure();}}},getMapGenesis:function A(){return G;},AddToMapAndList:function L(O){this.AddToMap(O);this.mGraphObjectList.push(O);},AddObjectsToMapAndList:function M(Q){var P,O;O=Q.length;for(P=0;P<O;++P){this.AddToMapAndList(Q[P]);}},AddToManagerList:function H(O){this.mGraphObjectManagerList.push(O);},AddToMap:function C(O){if(O){this.mGraphObjectMap.replaceByTripleId(O.mTripleId,O);}},getGraphObjectFromList:function J(V,R){var S,T,O,U=this.mGraphObjectManagerList,Q=this.mGraphObjectList,P=this.mChartContextPtr.getUtiliy();for(S=Q.length-1;S>=0;--S){T=Q[S].mTripleId;if(P.tripleId.equal(T,V)){O={object:Q[S],find:true};return O;}}if(R){for(S=U.length-1;S>=0;--S){O=U[S].getGraphObjectFromList(V);if(O.find){return O;}}}return{object:null,find:false};},GetGraphObject:function F(U,P){var S,R,Q=this.mGraphObjectMap,T=this.mGraphObjectManagerList,O;P=(P===undefined)?true:P;if(Q){S=Q.findByTripleId(U);if(S!==undefined){return S;}if(P){O=T.length;for(R=O-1;R>=0;--R){S=T[R].GetGraphObject(U,true);if(S!==undefined){return S;}}}return null;}S=this.getGraphObjectFromList(U,P);return S;},GetGraphObjectManager:function K(U,P){if(P===undefined){P=true;}var Q,T=this.mGraphObjectManagerList,O=this.mChartContextPtr.getUtiliy();for(Q=T.length-1;Q>=0;--Q){var S=T[Q].mTripleId;if(O.tripleId.equal(S,U)){return T[Q];}if(P){var R=T[Q].GetGraphObjectManager(U,true);if(R){return R;}}}return null;},Draw:function B(){var O,P;O=this.mGraphObjectList.length;for(P=0;P<O;++P){this.mGraphObjectList[P].Draw();}},GenerateInterpolationFrame:function D(O){var Q=this.mGraphObjectManagerList.length,P,R;this.mProgress=O;for(P=0;P<Q;++P){this.mGraphObjectManagerList[P].GenerateInterpolationFrame(O);}R=this.mGraphObjectList.length;for(P=0;P<R;++P){this.mGraphObjectList[P].SetProgress(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure","mstrmojo.chart.JSONParameter","mstrmojo.chart.enums.EnumInstructionName");var J=mstrmojo.chart,K=J.enums,N=K.EnumInstructionName;function I(P,Q){++this.mCurrentIndex;if(this.mIsFirstPass){this.mParameterList.push(new J.JSONParameter({mParameterName:P,mParameterValue:Q,mIsLastFrameSet:this.mIsLastFrame}));}}mstrmojo.chart.JSONInstruction=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONInstruction",mInstructionName:N.JSONInsUndefined,mpOriginalAddress:0,mFormatIdx:-1,mParameterList:[],mCurrentIndex:-1,mIsLastFrame:true,mIsFirstPass:true,init:function O(P){this._super(P);this.mParameterList=[];},SetInstructionName:function F(P){this.mInstructionName=P;},GetInstructionName:function H(){return this.mInstructionName;},SetSecondPass:function D(){this.mIsFirstPass=false;this.mCurrentIndex=-1;},SetLastFrame:function A(P){this.mIsLastFrame=P;},AppendToParameterList:function E(P,Q){I.call(this,P,Q);},AppendArrayToParameterList:function B(P,Q,R){if(R>0){I.call(this,P,Q);}},AppendSimpleVectorToParameterList:function M(P,Q){if(Q.length>0){I.call(this,P,Q);}},SetFormatAddress:function C(P){this.mpOriginalAddress=P;},CalculateFormatIndex:function G(S){var R=this.mpOriginalAddress,Q,T,P;if(R!==null&&R!==undefined){Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].mpOriginalAddress<R){Q=T+1;}else{if(S[T].mpOriginalAddress>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].id<R){Q=T+1;}else{if(S[T].id>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}}},AppendToJSONObject:function L(U){var R=this.mParameterList,Q=this.mFormatIdx,T,P,S={Ins:this.mInstructionName};if(Q>=0){S.Format=Q;}P=R.length;for(T=0;T<P;T++){R[T].AppendToJSONObject(S);}U.push(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.JSONUtil","mstrmojo.chart.enums.EnumInstructionName");var D=mstrmojo.chart,H=mstrmojo.chart.enums,K=H.EnumInstructionName,F=D.JSONUtil.prototype;mstrmojo.chart.JSONUnit=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUnit",mIsAnimated:false,mIsLastFrame:true,mIsFirstPass:true,mIsFirstFrameSet:false,mIsLastFrameSet:false,mInstructionList:[],mCurrentIndex:-1,init:function L(N){this.mInstructionList=[];if(N){this.mIsAnimated=N.mIsAnimated||false;this.mIsLastFrame=N.mIsLastFrame||false;}},AppendToJSONObject:function I(N){N.IsAnimated=this.mIsAnimated?1:0;if(this.mInstructionList.length>0){F.AppendCompoundPointerVectorToJSONObject("InstructionList",this.mInstructionList,N);}},AddInstruction:function J(O,N){if(O===undefined){O=K.JSONInsUndefined;}if(N===undefined){N=null;}++this.mCurrentIndex;if(this.mIsFirstPass){this.mInstructionList.push(new D.JSONInstruction({mInstructionName:O,mpOriginalAddress:N}));}else{this.mInstructionList[this.mCurrentIndex].SetSecondPass();}this.mInstructionList[this.mCurrentIndex].SetLastFrame(this.mIsLastFrame);return this.mInstructionList[this.mCurrentIndex];},SetAnimated:function A(N){this.mIsAnimated=N;},IsAnimated:function M(){return this.mIsAnimated;},IsValid:function E(){if(this.mInstructionList.length===0){return false;}if(this.mIsAnimated){return(this.mIsFirstFrameSet&&this.mIsLastFrameSet);}return true;},SetToFirstFrame:function G(){this.mIsFirstFrameSet=true;this.mIsLastFrame=false;this.mCurrentIndex=-1;if(this.mIsLastFrameSet){this.mIsFirstPass=false;}},SetToLastFrame:function C(){this.mIsLastFrameSet=true;this.mIsLastFrame=true;this.mCurrentIndex=-1;if(this.mIsFirstFrameSet){this.mIsFirstPass=false;}},CalculateFormatIndex:function B(O){var N,P;N=this.mInstructionList.length;for(P=0;P<N;++P){this.mInstructionList[P].CalculateFormatIndex(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatLine=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatLine",mLineStyle:0,mAlpha:0,mLineThickness:0,mLineThicknessPt:0,mLineColor:null,mGradient:null,init:function D(H){H.mFormatType=A.FMT_LINE;this._super(H);E.copyProps(["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","id"],H,this);this.mGradient={};var G=this.mGradient,J=H.mGradient;G.range={start:{x:0,y:0},end:{x:0,y:0}};if(J){G.valid=H.mGradient.valid||false;G.angle=H.mGradient.angle||0;G.endAlpha=H.mGradient.endAlpha||255;G.style=H.mGradient.style||1;G.colors=H.mGradient.colors.slice(0)||[];var I=J.range;if(H&&I!==undefined){if(I.start!==undefined){G.range.start.x=I.start.x;G.range.start.y=I.start.y;}if(I.end!==undefined){G.range.end.x=I.end.x;G.range.end.y=I.end.y;}}}else{G.valid=false;G.angle=0;G.endAlpha=255;G.style=1;G.colors=[];G.range={start:{x:0,y:0},end:{x:0,y:0}};}},AppendToJSONObject:function F(G){var I=this.mLineColor,H=this.mGradient;G.push({FormatType:this.mFormatType,Style:this.mLineStyle,Alpha:this.mAlpha,Thickness:this.mLineThickness,ThicknessPt:this.mLineThicknessPt,Color:{R:I.mR,G:I.mG,B:I.mB},Gradient:{Valid:H.valid,Angle:H.angle,EndAlpha:H.endAlpha,Style:H.style,Colors:H.colors.slice(0),Start:H.range.start,End:H.range.end}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatFont=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFont",mFontAlignment:0,mFontStyle:0,mFontRotation:0,mFontBox:0,mFontColor:null,mFontAlpha:0,mFontName:0,mFontSize:0,init:function D(G){G.mFormatType=A.FMT_FONT;this._super(G);E.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize","id"],G,this);},AppendToJSONObject:function F(H){var G=this.mFontColor;H.push({FormatType:this.mFormatType,Alignment:this.mFontAlignment,Style:this.mFontStyle,Rotation:this.mFontRotation,Box:this.mFontBox,Alpha:this.mFontAlpha,Name:this.mFontName,Size:this.mFontSize,Color:{R:G.mR,G:G.mG,B:G.mB}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Base","mstrmojo.chart.Point2D","mstrmojo.chart.enums.EnumRectExpandDirection");var M=mstrmojo.hash,T=mstrmojo.chart,V=T.enums,P=V.EnumRectExpandDirection;mstrmojo.chart.Rect2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Rect2D",x:0,y:0,width:0,height:0,init:function O(Y){if(Y){if(Y.Rect2D){var Z=Y.Rect2D;mstrmojo.hash.copy(Z,this);}else{this._super(Y);}}},Explode:function F(Z,Y){this.x-=Z;this.y-=Y;this.width+=(Z*2);this.height+=(Y*2);},Implode:function A(Z,Y){this.Explode(-Z,-Y);},GetTopLeft:function H(Y){return new T.Point2D({x:this.x,y:this.y});},GetBottomLeft:function G(Y){return new T.Point2D({x:this.x,y:this.y+this.height});},GetTopRight:function E(Y){return new T.Point2D({x:this.x+this.width,y:this.y});},GetBottomRight:function X(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height});},GetCenter:function W(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height/2});},GetLeftMiddle:function C(Y){return new T.Point2D({x:this.x,y:this.y+this.height/2});},GetTopMiddle:function I(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y});},GetRightMiddle:function R(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height/2});},GetBottomMiddle:function Q(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height});},HasIntersection:function J(Y){return(this.x<(Y.x+Y.width)&&Y.x<(this.x+this.width)&&this.y<(Y.y+Y.height)&&Y.y<(this.y+this.height));},PointInRectangle:function S(Y){return((Y.x>=this.x)&&(Y.x<=this.x+this.width)&&(Y.y>=this.y)&&(Y.y<=this.y+this.height));},Reset:function B(Y,b,Z,a){this.x=Y;this.y=b;this.width=Z;this.height=a;},copy:function N(Y){return M.copyProps(["x","y","width","height"],Y,this);},ResetRect:function D(Y){this.copy(Y);},Expand:function L(Z,Y){if((Y&P.REC_EXP_HORIZONTAL)>0){this.x-=Z;this.width+=2*Z;}if((Y&P.REC_EXP_VERTICAL)>0){this.y-=Z;this.height+=2*Z;}},clone:function U(){return new T.Rect2D({Rect2D:this});},ToPoints:function K(Y){if(Y){return{Center:this.GetCenter(),Origin:this.GetTopLeft(),Width:this.width,Height:this.height};}return{TopLeft:this.GetTopLeft(),TopRight:this.GetTopRight(),BottomLeft:this.GetBottomLeft(),BottomRight:this.GetBottomRight()};}});T.gDefaultTitlePosition=new T.Rect2D({x:15,y:15,width:670,height:21});T.gDefaultSubtitlePosition=new T.Rect2D({x:15,y:51,width:670,height:17});T.gDefaultFootnotePosition=new T.Rect2D({x:15,y:370,width:670,height:15});T.gEmptyRect=new T.Rect2D({x:0,y:0,width:0,height:0});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.gm.GMEnums");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumNumberCategory","EnumLabelLevelOption","EnumSliceType","EnumDataSetStatus");mstrmojo.requiresClsP("mstrmojo.chart","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumShapeType");var Am=mstrmojo.chart,b=mstrmojo.hash,P=Am.enums,AQ=Am.model.enums,Ap=P.EnumNumberCategory,An=P.EnumLabelLevelOption,AA=P.EnumDataSetStatus,c=AQ.EnumShapeType;var A5=mstrmojo.gm,C=A5.FormatingPropertyTag;var F=1,AH=2,I=3;var AU={lineShape:[C.SHAPE_LINE_COLOR,C.SHAPE_LINE_STYLE,C.SHAPE_LINE_THICKNESS],lineMarker:["lnMkBdrClr",C.LINE_MARKER_STYLE,C.LINE_MARKER_THICKNESS],shapeBorder:[C.SHAPE_BORDER_COLOR,C.SHAPE_BORDER_STYLE,C.SHAPE_BORDER_THICKNESS]};function A3(BK,BJ){BK=BK||{};var BH={mLineStyle:BK[BJ[1]]||0,mAlpha:255,mLineThickness:BK[BJ[2]]||null};if(BH.mLineThickness!==null){BH.mLineThickness=parseFloat(BH.mLineThickness);}if(BH.mLineThickness!==null&&BH.mLineThickness!==undefined){BH.mLineThicknessPt=75*BH.mLineThickness;}var BI=BK[BJ[0]];if(BI!==null&&BI!==undefined){if(typeof BI==="number"){BH.mLineColor=BI;}else{if(BI.c1!==undefined&&typeof BI.c1==="number"){BH.mLineColor=BI.c1;}}}if(BH.mLineStyle===99){BH.mAlpha=0;}return BH;}function AR(BK,BJ){BJ=BJ||"all";var BI,BH={};switch(BJ){case"lineShape":BI=AU.lineShape;return b.copyProps(BI,BK);case"targetLine":return BH;case"lineMarker":BI=AU.lineMarker;return b.copyProps(BI,BK);case"shapeBorder":case"pieSliceBorder":BI=AU.shapeBorder;return b.copyProps(BI,BK,BH);default:b.copy(BK,BH);return BH;}}function t(BI,BJ){if(BI===undefined){return ;}var BH=9;if(BI.nct!==undefined){BJ.mFormatType=BI.nct;}if(BJ.mFormatType===undefined){BJ.mFormatType=BH;}BJ.mDigits=BI.ndp||0;if(BI.nth!==undefined){BJ.mGrouping=BI.nth;}if(BJ.mGrouping===undefined){BJ.mGrouping=3;}BJ.mPosCurr=BI.ncp||0;if(BI.nnn!==undefined){BJ.mNegFormat=BI.nnn;}if(BJ.mNegFormat===undefined){BJ.mNegFormat=3;}BJ.mCurrency=((typeof BI.ncs==="string")&&BI.ncs)||"$";BJ.mCustomFormat=((typeof BI.nfs==="string")&&BI.nfs)||"General";}function Ac(){this.mHasMetrics=this.dataProvider.getMetricsCount()>0;return this.mHasMetrics;}function AL(){return false;}function y(){var BH=this.dataProvider;var BI=BH.getDimensionSize(true),BJ=BH.getDimensionSize(false);if(BI*BJ===0){return false;}this.SetDataGroup(BH.getDataGroup());this.SetSeriesByColumn(BH.getSeriesByColumn());this.dataLabelStyle=BH.getDataLabelType();this.mDataGroup=BH.getDataGroup();return true;}function M(BJ,BI,BH){if(!!BJ===false){return"";}var BL=0,BK=BJ.length;BH=BH||false;if(BK<=0){return"";}if(BI===An.LLO_COMMON){BK--;}else{if(BI===An.LLO_SPECIFIC){BL=BK-1;}}if(BH){return BJ;}if(BJ.length===1){return BJ[0].trim();}return BJ.slice(BL,BK).join(" ").trim();}function A0(BH,BK){if(this.useSliceWindow){var BJ=this.startSeries;if(BJ!==-1){if(!(BH>=BJ&&BH<=this.endSeries)){return false;}}var BI=this.startGroup;if(BI!==-1){if(!(BK>=BI&&BK<=this.endGroup)){return false;}}}return true;}mstrmojo.chart.DataSetImpl=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataSetImpl",mpFormatManager:null,mDataGroup:1,mStatus:AA.DTST_OKAY,mSeriesByColumn:true,mSeriesSplit:null,mDiscreteSeries:null,dataLabelStyle:-1,mHasMetrics:false,useSliceWindow:false,startSeries:-1,startGroup:-1,endSeries:-1,endGroup:-1,gp:null,init:function AX(BH){this.InitFromDataProvider(BH);this.reset();},reset:function AI(){this.resetDataWindow();this.genericFormats=undefined;this.gp={};},InitFromDataProvider:function Ax(BI){if(BI===null||BI===undefined){return false;}this.mStatus=AA.DTST_INVALID;this.dataProvider=BI.dataProvider;if(this.dataProvider===null||this.dataProvider.isValid===false){return false;}this.SetFormatManager(BI.formatManager);var BH=y.call(this);if(BH===false){return false;}Ac.call(this);this.mStatus=AA.DTST_OKAY;return this.dataProvider.isValid;},IsInSlicedWindow:function Ah(BI,BH){return A0.call(this,BI,BH);},SetDataGroup:function a(BH){if(BH>=1){this.mDataGroup=BH;}},GetSeriesCount:function AN(){return this.dataProvider.getSeriesCount();},GetClusterSeriesCount:function D(){var BH=this.GetSeriesByShape().Bar.length;if(BH===0){BH=this.GetSeriesCount();}return BH;},GetGroupCount:function As(){return this.dataProvider.getGroupCount();},SeriesGroupIndexToRowColumnIndex:function r(BL,BI,BK,BH){BK=BK!==undefined?BK:0;BH=BH||false;var BM,BJ;BM=this.dataProvider.getGraphCell(BL,BI).getRowIndex(BK);BJ=this.dataProvider.getGraphCell(BL,BI).getColIndex(BK);return{RowIndex:BM,ColumnIndex:BJ};},ShouldTakeGroupCenter:function G(){return this.dataProvider.isClusteredBarSpecialCase();},GetClusterDataGroup:function Av(){return this.dataProvider.getClusterDataGroup();},GetOneSliceRangeSimple:function T(BI,BL){var BH,BJ,BK,BM;BH=false;BK=this.GetSeriesCount();BM=this.GetGroupCount();for(BJ=0;BJ<BK;++BJ){BI.push(BJ);}for(BJ=0;BJ<BM;++BJ){BL.push(BJ);}return BH;},GetSeriesLabel:function AW(BM,BK,BJ,BH){BK=BK||0;BJ=BJ||An.LLO_NORMAL;BH=BH||false;var BL=this.dataProvider.getGraphCell(BM,0);var BI=BL?BL.getSeriesLabel(BK):[];return M.call(this,BI,BJ,BH);},GetGroupLabel:function Aw(BN,BI,BM,BK){BI=BI!==undefined?BI:0;BM=BM!==undefined?BM:An.LLO_NORMAL;BK=BK||false;var BL=this.dataProvider,BP=BL.lds.gmm.gmCtr,BJ=BL.getSeriesCount(),BQ,BO,BH;if(BP.clusteredBarSpecialCase){for(BQ=0;BQ<BJ;BQ++){BO=BL.getGraphCell(BQ,BN);if(!BO.isFaked&&!!BO){BH=BO.getGroupLabel(BI);break;}}}else{BO=BL.getGraphCell(0,BN);if(!!BO){BH=BO.getGroupLabel(BI);}}return M.call(this,BH,BM,BK);},GetGroupLabelIdentities:function d(BI){var BH=this.dataProvider.getGraphCell(0,BI);if(BH){return BH.getGroupLabelIdentities();}return[];},GetSeriesLabelIdentities:function A(BI){var BH=this.dataProvider.getGraphCell(BI,0);if(BH){return BH.getSeriesLabelIdentities();}return[];},GetMergedLabel:function E(BH,BI){return M.call(this,BH,BI,false);},GetDataGroup:function n(){return this.mDataGroup;},GetData:function AY(BK,BH,BI){BI=BI!==undefined?BI:0;var BJ=null;if(A0.call(this,BK,BH)){BJ=this.dataProvider.getGraphCell(BK,BH).getData(BI);}if(!!this.hasMetricCell===false){if(!(BJ===null||BJ===undefined||isNaN(BJ))&&typeof BJ==="number"){this.hasMetricCell=true;}}if(isNaN(BJ)===true){return null;}return BJ;},GetSizeByData:function X(BI,BH){return this.dataProvider.getGraphCell(BI,BH).getSizeByData();},GetColorByData:function K(BM,BK,BJ,BL){BL=BL||false;BJ=(BJ!==undefined)?BJ:0;var BI=this.dataProvider.getGraphCell(BM,BK);if(!!BI===false||BI.isFaked){return 0;}var BH=BI.getColorByData(BJ,false);if(!BL){if(BH&&BH.c1){BH=BH.c1;}else{if(BH==="transparent"){BH=0;}}}return BH;},GetDefaultShapeFillColor:function(){var BI=this.dataProvider,BH=BI.lds.gmm.gmCtr;return BH.property.defaultsObj.shpFillClr;},GetPieCountAtOneDataPoint:function At(BJ,BH){var BI=this.dataProvider.getGraphCell(BJ,BH);if(!!BI){if(BI.isFaked){BI=this.dataProvider.innerGetGraphCell(BJ,BH);}return BI.getSinglePieDPs().length;}return 0;},GetPieSliceCount:function H(BL,BH,BI){var BJ=this.dataProvider.getGraphCell(BL,BH);if(!!BJ){if(BJ.isFaked){BJ=this.dataProvider.innerGetGraphCell(BL,BH);}var BK=BJ.getSinglePieDPs();if(!!BK){return BK[BI].getSliceCount();}}return 0;},GetSinglePieTotal:function BD(BL,BH,BI){var BJ=this.dataProvider.getGraphCell(BL,BH);if(!!BJ){if(BJ.isFaked){BJ=this.dataProvider.innerGetGraphCell(BL,BH);}var BK=BJ.getSinglePieDPs();if(!!BK){return BK[BI].getTotalValue();}}return 100000;},GetPieSliceData:function Ag(BN,BH,BI,BJ){var BL=this.dataProvider.getGraphCell(BN,BH);if(!!BL){if(BL.isFaked){BL=this.dataProvider.innerGetGraphCell(BN,BH);}var BM=BL.getSinglePieDPs(),BK;if(!!BM){BK=BM[BI].getData(BJ);if(!!this.hasMetricCell===false){if(!(BK===null||BK===undefined||isNaN(BK))&&typeof BK==="number"){this.hasMetricCell=true;}}return BK;}}return null;},GetPieSliceColorByData:function AS(BO,BI,BK,BL,BJ){BJ=BJ||false;var BM=this.dataProvider.getGraphCell(BO,BI);if(!!BM){if(BM.isFaked){BM=this.dataProvider.innerGetGraphCell(BO,BI);}var BN=BM.getSinglePieDPs();if(!!BN){var BH=BN[BK].getColorByData(BL,false,false);if(!BJ){if(BH&&BH.c1){BH=BH.c1;}else{if(BH==="transparent"){BH=0;}}}return BH;}}return null;},GetPieSlicePercentage:function x(BM,BH,BI,BJ){var BK=this.dataProvider.getGraphCell(BM,BH);if(!!BK){if(BK.isFaked){BK=this.dataProvider.innerGetGraphCell(BM,BH);}var BL=BK.getSinglePieDPs();if(!!BL){return BL[BI].getPercentage(BJ);}}return 0;},GetAngleNumber:function u(){return this.GetPieCountAtOneDataPoint(0,0);},IsGridPieAngleBreakX:function Ad(){return this.dataProvider.isGridPieSplitAlongXAxis();},isBare:function k(BK){if(this.hasOwnProperty("hasMetricCell")){return !this.hasMetricCell;}var BO,BM,BJ,BH,BN,BL=this.GetSeriesCount(),BP=this.GetGroupCount(),BI=1,BQ=1;if(BK){BQ=this.GetAngleNumber();}for(BO=0;BO<BL;BO++){for(BM=0;BM<BP;BM++){for(BJ=0;BJ<BQ;BJ++){if(BK){BI=this.GetPieSliceCount(BO,BM,BJ);}for(BH=0;BH<BI;BH++){if(BK){BN=this.GetPieSliceData(BO,BM,BJ,BH);}else{BN=this.GetData(BO,BM);}if(!(BN===null||BN===undefined||isNaN(BN))&&typeof BN==="number"){this.hasMetricCell=true;return false;}}}}}this.hasMetricCell=false;return true;},getValueAxisNumberFormat:function BA(BT,BV,BP){BV=BV||null;BP=BP||false;var BK,BM,BJ,BX,BW,BH=this.mDataGroup,BU=this.dataProvider.isMetricOnRowAxis(),BI=this.mSeriesByColumn,BY=this.dataProvider,BL=new Am.ChartAdvFormat(),BO=new Am.ChartAdvFormat(),BS,BR,BQ;BT.mCustomFormat="General";BT.mFormatType=Ap.General;BT.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null||this.dataProvider===undefined){return false;}BK=true;BM=true;if(BP===false&&BV&&BV.length>0){this.GetMetricNumberFormat(BL,BV[0]);BS=1;for(;BS<BV.length&&BK;BS++){BJ=BV[BS];this.GetMetricNumberFormat(BO,BJ);if((BL.mFormatType!==BO.mFormatType)||(BL.mFormatType===Ap.Currency&&(BL.mCustomFormat.localeCompare(BO.mCustomFormat)!==0))){BK=false;}}if(BK){BT.reset(BL);}return true;}BJ=0;BK=true;BM=true;if(BU){BX=!BI?BY.getSeriesCount():BY.getGroupCount();BW=1;}else{BX=1;BW=BI?BY.getSeriesCount():BY.getGroupCount();}var BN;for(BS=0;BS<BX&&BK;++BS){for(BR=0;BR<BW;++BR){for(BQ=0;BQ<BH;++BQ){BN={S:BS,G:BR,D:BQ};if(BI){BN.S=BR;BN.G=BS;}if(BM){if(BV&&BV.length){BJ=this.getHostMetricIndex(BN.S,BN.G,BN.D);if(BJ===null){continue;}if(BV.indexOf(BJ)!==-1){this.getChartAdvFormatForOneCell(BN,BL,BP);BM=false;}}else{this.getChartAdvFormatForOneCell(BN,BL,BP);BM=false;}}else{BJ=this.getHostMetricIndex(BN.S,BN.G,BN.D);if(BJ===null){continue;}if(BV&&BV.indexOf(BJ)!==-1){this.getChartAdvFormatForOneCell(BN,BO,BP);if((BL.mFormatType!==BO.mFormatType)||(BL.mFormatType===Ap.Currency&&(BL.mCustomFormat.localeCompare(BO.mCustomFormat)!==0))){BK=false;}}}}}}if(BK){BT.reset(BL);}return true;},getGridDataFormat:function A4(BH,BI,BJ,BK){BH.mCustomFormat="General";BH.mFormatType=Ap.General;BH.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null){return false;}this.getChartAdvFormatForOneCell({S:BI,G:BJ,D:BK},BH,true);return true;},getGridDataFormatForPie:function Ay(BN,BO){var BP=BO.mSeriesId,BL=BO.mGroupId,BM=BO.angleByIndex,BI=BO.sliceById,BK,BJ,BH;BN.mCustomFormat="General";BN.mFormatType=Ap.General;BN.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null){return false;}BK=this.dataProvider.getGraphCell(BP,BL).getSinglePieDPs();if(BK&&BK.length>0&&BM<BK.length){BK=BK[BM];if(BK){BJ=BK.getSliceCount();if(BI<BJ){BH=BK.getMetric(BI);if(BH&&BH.fullNf){t.call(this,BH.fullNf,BN);return true;}}}}return false;},getSizeByDataFormat:function Ae(BJ,BK,BL){var BI=this.dataProvider.getGraphCell(BK,BL);if(BI){var BH=BI.getSizeByMetricFormat();if(BH.fullNf){t.call(this,BH.fullNf,BJ);}}},getChartAdvFormatForOneCell:function AP(BI,BK,BJ){BI.D=BI.D||0;BJ=BJ||false;var BH=this.dataProvider.getGraphCell(BI.S,BI.G).getFormat(BI.D);if(BH.fullNf){t.call(this,BH.fullNf,BK);}},SetFormatManager:function A6(BH){this.mpFormatManager=BH;},GetStatus:function L(){return this.mStatus;},SetSeriesByColumn:function e(BH){this.mSeriesByColumn=BH;},GetSeriesByColumn:function J(){return this.mSeriesByColumn;},getHostMetricIndex:function Y(BJ,BI,BH){BH=BH!==undefined?BH:0;return this.dataProvider.getGraphCell(BJ,BI).getMetricIndex(BH);},GetSliceGroupRange:function Al(){return{};},GetSliceFlag:function l(){return false;},EnableSlices:function Ai(){},GetThresholdFillColor:function Ao(BH,BI,BJ){return this.dataProvider.getGraphCell(BH,BI).getThreshold(BJ).Color;},GetZoomScale:function f(){return 1;},IsHeaderEmpty:function g(BH){BH=BH||false;return false;},CountMetric:function AG(){return this.dataProvider.getMetricsCount();},isMetricBySeries:function Au(){return((!this.dataProvider.isMetricOnRowAxis()&&this.mSeriesByColumn)||(this.dataProvider.isMetricOnRowAxis()&&!this.mSeriesByColumn));},GetOneMetricName:function z(BH){return this.dataProvider.getOneMetricName(BH);},GetMetricNumberFormat:function A2(BJ,BI){var BH=this.dataProvider.getMetricFormat(BI,true);t.call(this,BH.fullNf,BJ);},GetPeakValuesAcrossSeries:function p(BI,BH,BK,BJ){},GetSeriesByShape:function Af(BJ){var BI=true;if(BI){this.seriesByShapeMap=this.seriesByShapeMap||{Tick:null,Line:null,Bar:null,Area:null,Circle:null,Square:null,Pie:null,All:null};var BK=BJ||"All";var BH=this.seriesByShapeMap[BK];if(BH===null){if(BK==="All"){BH=BH=this.seriesByShapeMap[BK]=this.dataProvider.getSeriesByShape(BJ);}else{BH=this.seriesByShapeMap[BK]=this.dataProvider.getSeriesByShape(BJ).contact();}}return BH;}else{return this.dataProvider.getSeriesByShape(BJ);}},GetShapeBySeries:function V(BH){return this.dataProvider.getShapeBySeries(BH);},GetShapeByCell:function w(BJ,BH){var BI=this.dataProvider.getGraphCell(BJ,BH);if(!!BI){return BI.getShape();}return -1;},GetValueAxisBySeries:function Aj(BH){return this.dataProvider.getValueAxisBySeries(BH);},GetSeriesByValueAxis:function B(BI){if(this.mSeriesSplit===null){this.mSeriesSplit=[];}var BH=this.mSeriesSplit;if(!!BH[BI]===false){var BJ=this.dataProvider.getSeriesByValueAxis(BI);BH[BI]=BJ.slice(0);}return BH[BI];},GetShapesDistributionByValueAxis:function j(BM){if(BM===undefined){BM=2;}var BH={},BL,BO,BI,BJ,BN=this.GetSeriesCount(),BK;for(BK=0;BK<BN;++BK){if(BM===0||BM===2){BH.Primary=BH.Primary||{};}if(BM===1||BM===2){BH.Secondary=BH.Secondary||{};}BJ=this.GetValueAxisBySeries(BK);BI=this.GetShapeBySeries(BK);if(BJ===BM||BM===2){BO=BJ===0?BH.Primary:BH.Secondary;switch(BI){case 0:BL="AREA";break;case 1:BL="BAR";break;case 2:BL="LINE";break;case 4:BL="CIRCLE";break;case 5:BL="RECTANGLE";break;case 6:BL="SQUARE";break;case 7:BL="TICK";break;case 10:BL="PIE";break;default:BL="Generic";break;}BO[BL]=BO[BL]||[];BO[BL].push(BJ);}}return BH;},GetTrendLinePropertiesBySeries:function AO(BH){BH=BH||0;return{};},GetTrendLinesOfChart:function Ar(){return this.dataProvider.getTrendsOfChart();},GetTrendLineOfSeries:function N(BL){var BI=this.dataProvider.getTrendsOfChart(),BK,BH=null,BJ;if(BI&&BI.length){for(BJ=0;BJ<BI.length;++BJ){BK=BI[BJ];if(BK){if(BK.seriesId===BL){BH=BK;break;}}}}return BH;},GetReferenceLinesOfChart:function BC(){return this.dataProvider.getRefsOfChart();},GetReferenceLinesOfSeries:function S(BL){var BJ=this.dataProvider.getRefsOfChart(),BK,BH=[],BI;if(BJ&&BJ.length){for(BI=0;BI<BJ.length;++BI){BK=BJ[BI];if(BK){if(BK.seriesId===BL){BH.push(BK);}}}}return BH;},GetTextLabel:function AM(BK,BI,BH,BJ){BH=BH||0;BJ=BJ||0;return this.dataProvider.getTextLabel(BK,BI,BH,BJ);},GetBannerText:function AV(BJ,BH,BI){return"Demo Demo Demo Demo Demo Demo Demo Demo Demo Demo";},GetDiscreteSeries:function Aa(){if(this.mDiscreteSeries===null){this.mDiscreteSeries=this.dataProvider.GetDiscreteSeries().slice(0);}return this.mDiscreteSeries;},GetSeriesIndexByPriority:function BF(){return this.dataProvider.getPrioritizedSeriesIndex();},updateDataWindow:function Aq(BI){if(BI.PartialRendering===true){this.useSliceWindow=true;var BH=BI.Series;if(BH){this.startSeries=BH.Min;this.startSeries=Math.max(0,this.startSeries);this.endSeries=BH.Max;this.endSeries=Math.max(this.startSeries,this.endSeries);}var BJ=BI.Group;if(BJ){this.startGroup=BJ.Min;this.startGroup=Math.max(0,this.startGroup);this.endGroup=BJ.Max;this.endGroup=Math.max(this.startGroup,this.endGroup);}}},resetDataWindow:function A9(){this.useSliceWindow=false;this.startGroup=this.endGroup=-1;this.startSeries=this.endSeries=-1;},getBandNumber:function q(){return 3;},getTargetNumber:function BG(){return 1;},getBandsByGroup:function Q(BH,BI){return{Divisions:{Ratios:null,Metrics:null},Descent:false,Colors:null};},getBandDivision:function AK(BH,BI){return{Ratios:null,Metrics:null};},getDataLabelFontFormat:function R(){var BI=this.dataProvider.getDataLabelFontFormat(),BJ={mFontAlignment:null,mFontStyle:BI.dlFntStyle,mFontAlpha:255,mFontBox:0,mFontName:BI.dlFntFml,mFontSize:BI.dlFntSz};var BH=BI.dlFntClr;if(BH!==null&&BH!==undefined){BJ.mFontColor=BH;}return BJ;},showHideItemsOnAxis:function AF(BI){var BH,BJ=this.dataProvider.getAxisFormats(BI,"showHide");if(BI==="x1"||BI==="x2"||BI==="X1"||BI==="X2"){BH={axisBody:BJ[C.X_AXIS_LINE_SHOW]||false,axisLabels:BJ[C.X_AXIS_LABELS_SHOW]||false,majorGrids:BJ[C.MAJOR_GRID_LINES_SHOW]||false,minorGrids:BJ[C.MINOR_GRID_LINES_SHOW]||false};}else{if(BI==="y1"||BI==="y2"||BI==="Y1"||BI==="Y2"){BH={axisBody:BJ[C.Y_AXIS_LINE_SHOW]||false,axisLabels:BJ[C.Y_AXIS_LABELS_SHOW]||false,majorGrids:BJ[C.MAJOR_GRID_LINES_SHOW]||false,minorGrids:BJ[C.MINOR_GRID_LINES_SHOW]||false};}}return BH;},showSeriesDatalabel:function W(BN){if(this.dataLabelStyle===F){return false;}var BL,BK,BI,BH=this.dataProvider.getGraphCell(BN,0,true);if(BH===null||BH.isFaked){BI=this.findCell(false,BN,0);BH=this.dataProvider.getGraphCell(BN,BI,true);}if(BH){BL=BH.chtInfo&&BH.chtInfo.isPie;if(BL){var BJ,BM=BH.getSinglePieDPs()[0].getSliceCount();for(BJ=0;BJ<BM;++BJ){if(this.showPieSliceDatalabel(BN,0,0,BJ)){return true;}}}else{BK=BH.getFormattingProperties();return BK&&(!!BK[C.DATA_LABELS_SHOW]);}}return false;},showPieSliceDatalabel:function AZ(BM,BJ,BI,BL){BI=BI||0;BL=BL||0;if(this.dataLabelStyle===F){return false;}var BK,BH=this.dataProvider.getGraphCell(BM,BJ,true).getSinglePieDPs();if(BH&&BH.length>0){BH=BH[BI];if(BH){BK=BH.getFormattingProperties(BL);return BK&&(!!BK[C.DATA_LABELS_SHOW]);}return false;}return false;},showPieDatalabels:function AB(){if(this.dataLabelStyle===F){return false;}if(this.gp.showDatalabels!==undefined){return this.gp.showDatalabels;}var BI,BH,BJ=this.GetAngleNumber(),BK=this.GetPieSliceCount(0,0,0);for(BH=0;BH<BJ;++BH){for(BI=0;BI<BK;++BI){if(this.showPieSliceDatalabel(0,0,BH,BI)){this.gp.showDatalabels=true;return true;}}}this.gp.showDatalabels=false;return false;},showDatalabels:function h(){if(this.dataLabelStyle===F){return false;}if(this.gp.showDatalabels!==undefined){return this.gp.showDatalabels;}var BH,BI=this.GetSeriesCount();for(BH=0;BH<BI;++BH){if(this.showSeriesDatalabel(BH)){this.gp.showDatalabels=true;return true;}}this.gp.showDatalabels=false;return false;},onlyBarDataLabelEnabled:function AE(){var BJ,BK=this.GetSeriesCount(),BH=0,BI;if(this.dataLabelStyle===F){return false;}for(BJ=0;BJ<BK;++BJ){if(this.showSeriesDatalabel(BJ)){BI=this.GetShapeBySeries(BJ);if(BI===c._BAR){++BH;}else{return false;}}}return(BH>0);},getAllFormats:function AT(BJ){this.genericFormats=this.genericFormats||{id:{},formats:{}};var BI=this.genericFormats;for(var BH in BJ){if(BI.id[BH]!==BJ[BH]){return null;}}return BI.formats;},setAllFormats:function AT(BJ,BH){this.genericFormats=this.genericFormats||{id:{},formats:{}};var BI=this.genericFormats;BI.id=b.copy(BJ);BI.formats=BH;},getGenericLineFormat:function o(BQ,BM,BP,BK,BN){var BJ,BI,BO;if(BN==="pieSliceBorder"){BP=BP||0;var BH=this.dataProvider.getGraphCell(BQ,BM).getSinglePieDPs();BJ=BH[BP];}else{BJ=this.dataProvider.getGraphCell(BQ,BM);if(!!BJ){if(BJ.isFaked){BJ=this.dataProvider.innerGetGraphCell(BQ,BM);}}}if(BJ){BO=BJ.getFormattingProperties(BK);BI=AR(BO,BN);}var BL;switch(BN){case"lineShape":BL=["shpLnClr","shpLnStyle","shpLnThk"];break;case"targetLine":break;case"lineMarker":BL=["lnMkBdrClr",C.LINE_MARKER_STYLE,C.LINE_MARKER_THICKNESS];break;case"shapeBorder":case"pieSliceBorder":BL=["shpBdrClr","shpBdrStyle","shpBdrThk"];break;default:BL=["shpBdrClr","shpBdrStyle","shpBdrThk"];break;}return A3.call(this,BI||BO,BL);},getGenericFillFormat:function BE(BU,BP,BS,BM,BO){var BK,BR;if(BO==="pieSlice"){BS=BS||0;var BI=this.dataProvider.getGraphCell(BU,BP).getSinglePieDPs();BK=BI[BS];}else{BK=this.dataProvider.getGraphCell(BU,BP);}if(BK){BR=BK.getFormattingProperties(BM);}BR=BR||{};var BN;switch(BO){case"pieSlice":case"shape":BN=["shpFillClr","shpFillStyle","shpFillTrans","shpFillEff"];break;case"lineMarker":BN=["lnMkClr"];break;default:BN=["shpFillClr","shpFillStyle","shpFillTrans","shpFillEff"];break;}var BV={mSimpleColor:null,mAlpha:255,mFillType:0};if(BN[1]&&BR[BN[1]]!==undefined){BV.mFillType=BR[BN[1]];}if(BN[2]&&BR[BN[2]]!==undefined){BV.mAlpha=Math.round(255*BR[BN[2]]/100);}var BL=BR[BN[0]];if(BL!==null&&BL!==undefined){var BJ=0,BT=14;var BH=14,BQ=9;if(typeof BL==="string"&&BL==="transparent"){BV.mAlpha=0;return BV;}switch(BV.mFillType){case BJ:BV.mSimpleColor=BL;break;case BT:if(typeof BL==="object"){BV.mFillGradient={startGraphColor:BL.c1,endGraphColor:BL.c2,angle:1-BL.or,horizontalOffset:50,verticalOffset:50,gradientType:(BO==="pieSlice"?BQ:BH),endAlpha:255,intermediateColors:[],style:1};}break;default:BV.mFillType=BJ;if(typeof BL==="number"){BV.mSimpleColor=BL;}break;}}return BV;},getMarkerShapeInfoAt:function A8(BM,BL){var BJ,BK,BN=1,BI=false,BH=0;BJ=this.dataProvider.getGraphCell(BM,BL);if(BJ&&!!BJ.isFaked===false){BK=BJ.getFormattingProperties();BI=BK.lnMkShw;BH=BK.lnMkShp;BN=BK.lnMkSz;}return{Show:BI,Size:BN,Shape:BH};},isLogScaleAxis:function s(BH){return !!this.dataProvider.isLogScale(BH);},isGradientABL:function AD(){return this.dataProvider.isGradientABL();},getAxisOriginFormat:function AC(BJ){var BI,BK=this.dataProvider.getAxisFormats(BJ,"axisOrigin");if(BJ==="x1"||BJ==="x2"||BJ==="X1"||BJ==="X2"){BI=["xAxOriLnClr","xAxOriLnStyle","xAxOriLnThk","xAxOriLnShw"];}else{if(BJ==="y1"||BJ==="y2"||BJ==="Y1"||BJ==="Y2"){BI=["yAxOriLnClr","yAxOriLnStyle","yAxOriLnThk","yAxOriLnShw"];}}var BH=A3.call(this,BK,BI);BH.show=BK[BI[3]];BH.number=this.dataProvider.getAxisOriginValue(BJ);return BH;},getAxisTickFormat:function A1(BI,BJ){var BH,BK=this.dataProvider.getAxisFormats(BI,BJ);if(BJ==="majorTick"){BH=["majorGridLnClr","majorGridLnStyle","majorGridLnThk"];}else{BH=["minorGridLnClr","minorGridLnStyle","minorGridLnThk"];}return A3.call(this,BK,BH);},getAxisLineFormat:function Az(BJ){var BI,BH=this.dataProvider.getAxisFormats(BJ,"body");if(BJ==="x1"||BJ==="x2"||BJ==="X1"||BJ==="X2"){BI=[C.X_AXIS_LINE_COLOR,C.X_AXIS_LINE_STYLE,C.X_AXIS_LINE_THICKNESS];}else{if(BJ==="y1"||BJ==="y2"||BJ==="Y1"||BJ==="Y2"){BI=[C.Y_AXIS_LINE_COLOR,C.Y_AXIS_LINE_STYLE,C.Y_AXIS_LINE_THICKNESS];}}return A3.call(this,BH,BI);},findCell:function Ab(BN,BJ,BM){BM=BM||0;var BL,BK,BH,BI;if(BN===false){BL=this.dataProvider.getGroupCount();}else{BL=this.dataProvider.getSeriesCount();}for(BK=0;BK<BL;BK++){if(BN===false){BH=this.dataProvider.getGraphCell(BJ,BK);}else{BH=this.dataProvider.getGraphCell(BK,BJ);}if(!!BH===false||BH.isFaked){continue;}BI=BH.isIndividualFormatted();if(BM===0){if(BI===false){return BK;}}else{if(BI){return BK;}}}return -1;},getUniformAxis:function AJ(BH,BI){return null;},finalize:function A7(){this.dataProvider.resetDPCache();},allowDatalabelOverlap:function BB(){var BH=this.dataProvider;return BH&&BH.allowDatalabelOverlap();},getAxisLabelFontFormat:function Z(BJ){var BI,BK,BH,BL=this.dataProvider.getAxisFormats(BJ,"axisLabel");if(BJ==="x1"||BJ==="x2"||BJ==="X1"||BJ==="X2"){BI=[C.X_AXIS_LABELS_FONT_SIZE,C.X_AXIS_LABELS_FONT_FAMILY,C.X_AXIS_LABELS_FONT_STYLE,C.X_AXIS_LABELS_ROTATION,C.X_AXIS_LABELS_FONT_COLOR];}else{if(BJ==="y1"||BJ==="y2"||BJ==="Y1"||BJ==="Y2"){BI=[C.Y_AXIS_LABELS_FONT_SIZE,C.Y_AXIS_LABELS_FONT_FAMILY,C.Y_AXIS_LABELS_FONT_STYLE,C.Y_AXIS_LABELS_ROTATION,C.Y_AXIS_LABELS_FONT_COLOR];}}BK=BL[BI[3]];if(BK===-1){BK=0;}BH=BL[BI[4]];return{mFontSize:parseInt(BL[BI[0]],10),mFontName:BL[BI[1]],mFontStyle:BL[BI[2]],mFontRotation:BK,mFontAlignment:1,mFontBox:0,mFontColor:BH===undefined?null:BH,mFontAlpha:255};},refresh:function Ak(BH){if(BH){this.dataProvider=BH;this.reset();}},getForecastCount:function U(){var BH=this.dataProvider;return(BH.fwdSteps+BH.bwdSteps);},saveShownLabels:function O(BM){var BL=this.dataProvider,BK=BM.mLabelList,BH=BK&&BK.length,BI=[],BJ;for(BJ=0;BJ<BH;BJ++){if(BK[BJ].mIsShown){BI.push(BK[BJ].mNumber);}}BL.backupTicks=BL.backupTicks||{};BL.backupTicks[BM.Key]=BI;},fetchShownLabels:function v(BM){var BN=this.dataProvider,BJ=BN.lds.gmm,BL=BJ.gmCtr,BI,BH;var BK=function(){var BO,BP,BQ;BO=BL.mapFromChartToLDSIndex(this.rowIndex,this.colIndex);BP=BM?BJ.getLocalDataSet(BO.r,0):BJ.getLocalDataSet(0,BO.c);BQ=BP.generateDataProvider();return BQ[BO.dpIdx];};BI=BK.call(BN);BH=BI.backupTicks;return BH;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphDataLineType");var S=mstrmojo.chart,D=S.common;var N=mstrmojo.chart.model,U=N.enums,H=U.EnumDSSGraphType,I=U.EnumDSSGraphProperty,A=U.EnumDSSGraphRegressionType,T=U.EnumDSSGraphDataTextPosition,F=U.EnumDSSGraphDataTextShowType,J=U.EnumDSSGraphObject,R=U.EnumVariantBool,V=U.EnumDSSExtraGraphProperty,B=U.EnumDSSGraphDataLineType;function C(Y,X,W){var Z;if(X>=J.DssGraphX2Body&&X<=J.DssGraphX2Title){X-=99899;}if(X===J.DssGraphTrendLine){X=J.DssGraphLinrLine;Z=this.GetGraphProperty(I.DssGraphSDRegressionType,J.DssGraphRiser,Y,-3);if(Z){switch(Z){case I.DssGraphShowSDLinrLine:case A.DssGraphRegressionNone:X=J.DssGraphLinrLine;break;case I.DssGraphShowSDLinrLog:X=J.DssGraphLinrLog;break;case I.DssGraphShowSDLinrNPoly:X=J.DssGraphLinrNPoly;break;case I.DssGraphShowSDLinrExp:X=J.DssGraphLinrExp;break;case I.DssGraphShowSDMOVALine:X=J.DssGraphMovAvgLine;break;case I.DssGraphShowSDLinrNatLog:X=J.DssGraphLinrNatLog;break;case I.DssGraphShowSDSTDDLine:X=J.DssGraphStdDevLine;break;case I.DssGraphShowSDMeanLine:X=J.DssGraphMeanLine;break;}}}switch(X){case J.DssGraphFrame:case J.DssGraphPieFeelerLine:case J.DssGraphErrorBar:case J.DssGraphPieGroupLabel:case J.DssGraphDataTextConnectLine:case J.DssGraphGaugeBorder:case J.DssGraphGaugeNeedleBase:case J.DssGraphGaugeTitle:case J.DssGraphGauge:case J.DssGraphDataTextStackTotal:Y=-3;break;default:break;}switch(W){case V.DssGraphInfoAutosizeHorizontal:case V.DssGraphInfoAutosizeVertical:case V.DssGraphInfoSuppressLastLevel:case V.DssGraphInfoIncludeSubtotal:case V.DssGraphInfoNestedLabel:case V.DssGraphInfoNestedLabelBracket:case V.DssGraphInfoRecalculateChartFrame:case V.DssGraphInfoRecalculateLegend:X=-3;break;case I.DssGraphSeriesByColumn:X=-3;break;case I.DssGraphShow2DAxisLabels:if(this.mGraphType===H.DssGraphTypeGauge){Y=-3;}break;case I.DssGraphSDShowDataText:case I.DssGraphSDRegressionType:case I.DssGraphShowSDLinrCorr:case I.DssGraphShowSDLinrFormula:case I.DssGraphCurveColorAsSeries:case I.DssGraphShowStepLine:case I.DssGraphSDMarkerSize:case I.DssGraphShowMarker:case I.DssGraphShowLBLFeeler:case I.DssGraphShowFeeler:case I.DssGraphDetachSlice:case I.DssGraphDeleteSlice:case I.DssGraph2DSDSplitY:case I.DssGraphShowSDLine:case I.DssGraphShowLine:case I.DssGraphSDShowToolTip:case I.DssGraphSDToolTip:case I.DssGraphGauge1Show:case I.DssGraphGauge2Show:case I.DssGraphGauge3Show:case I.DssGraphGauge4Show:case I.DssGraphGauge5Show:case I.DssGraphGauge1Min:case I.DssGraphGauge2Min:case I.DssGraphGauge3Min:case I.DssGraphGauge4Min:case I.DssGraphGauge5Min:case I.DssGraphGauge1Max:case I.DssGraphGauge2Max:case I.DssGraphGauge3Max:case I.DssGraphGauge4Max:case I.DssGraphGauge5Max:X=J.DssGraphRiser;break;case I.DssGraph2DAngle:case I.DssGraph2DDepth:case I.DssGraphShowDataText:case I.DssGraphMarkerLayout:case I.DssGraphLegendLock:case I.DssGraphLegendBox:case I.DssGraphDepthMode:case I.DssGraphCurvedLines:case I.DssGraphGroupSpacing:case I.DssGraphRiserWidth:case I.DssGraphACMColorModel:case I.DssGraphAxisHasErrorBar:case I.DssGraphSplitYPosition:case I.DssGraphAxisHasMiddleValue:case I.DssGraphMiddleValue:case I.DssGraphConnectStackBars:case I.DssGraphShowDivBiPolar:case I.DssGraphGaugeRangeStartAngleValue:case I.DssGraphGaugeRangeStopAngleValue:case I.DssGraphGaugeBorderThicknessValue:case I.DssGraphGaugeStyleValue:case I.DssGraphGaugeShowNeedle:case I.DssGraphGaugeFancyBox:case I.DssGraphGaugeNeedleStyleValue:case I.DssGraphGaugeBorderStyleValue:case I.DssGraphPiesPerRowValue:case I.DssGraphTailShape:case I.DssGraphOBPMedian:case I.DssGraphOBPStem:case I.DssGraphOBPTail:case I.DssGraphGaugeThickness:Y=-3;break;case I.DssGraphSDMOVAFactor:case I.DssGraphPieDataValueLoc:case I.DssGraphPieDataLabelLoc:X=J.DssGraphRiser;Y=-3;break;case I.DssGraphGradient:W=I.DssGraphAreaSFX;break;case I.DssGraphFrameLocationNEW:W=I.DssGraphFrameLocation;break;case I.DssGraph3DRowTitleLocationNEW:W=I.DssGraph3DRowTitleLocation;break;case I.DssGraph3DColTitleLocationNEW:W=I.DssGraph3DColTitleLocation;break;case I.DssGraphLineAlpha:case I.DssGraphLineColor:case I.DssGraphLinePattern:case I.DssGraphLineWidth:if(this.mGraphType===H.DssGraphTypeBoxPlot&&X===J.DssGraphRiser){X=J.DssGraphOBPBox;}break;default:break;}return{ObjectId:X,SeriesId:Y,PropertyId:W};}function M(X){var Y,W,Z;Y=((X>>8)-((X>>16)<<8))<<8;W=(X-((X>>8)<<8))<<8;Z=((X>>16)-((X>>24)<<16))<<8;return(W>>8)*65536+(Y>>8)*256+(Z>>8);}function O(X){var W=-1;switch(X){case J.DssGraphX1Body:W=J.DssGraphUserLine3;break;case J.DssGraphY1RightBody:case J.DssGraphY1Body:W=J.DssGraphUserLine1;break;case J.DssGraphY2Body:W=J.DssGraphUserLine2;break;case J.DssGraphY3Body:W=J.DssGraphUserLine3;break;case J.DssGraphY4Body:W=J.DssGraphUserLine4;break;case J.DssGraphZBody:W=J.DssGraphUserLine4;break;}return W;}mstrmojo.chart.FormatManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatManager",mpTemplate:null,mIsValid:false,mpGraphPropertyPool:null,mKey:"",mHasMetrics:true,mIsUseGraphProperties:true,mGraphType:H.DssGraphTypeVertical_Bar_Side_by_Side,init:function P(W){this.mIsValid=this.ConsumeJSON(W);},ConsumeJSON:function Q(W){if(W&&W.GraphPropertyMap){this.mpGraphPropertyPool=W.GraphPropertyMap;}else{this.mpGraphPropertyPool=new D.MapStructure();}return true;},IsValid:function G(){return this.mIsValid;},GetGraphProperty:function E(a,e,h,Y){var X=this.mGraphType,c=null,b,g,d,Z,W,f;if(!this.mIsUseGraphProperties){return c;}var j=this.mpGraphPropertyPool;b=e;g=C.call(this,h,e,a);h=g.SeriesId;e=g.ObjectId;a=g.PropertyId;if(!this.mpGraphPropertyPool){return c;}if(a===V.DssGraphMatrixInitedDataLabelRotation||a===V.DSSGraphMatrixDataLabelRotated){g=j.find([h,-3,a]);if(g!==undefined){return g;}}if(a>V.DssGraphTypeRingPie&&a<=V.DssGraphInfoReserved){return c;}switch(a){case V.DssGraphInfoAutosizeHorizontal:case V.DssGraphInfoAutosizeVertical:case V.DssGraphInfoSuppressLastLevel:case V.DssGraphInfoIncludeSubtotal:case V.DssGraphInfoSeriesByColumn:case V.DssGraphInfoNestedLabel:case V.DssGraphInfoNestedLabelBracket:case V.DssGraphInfoRecalculateChartFrame:case V.DssGraphInfoRecalculateLegend:case V.DssGraphInfoUseMaxCategoriesAsMin:case V.DssGraphInfoUseZerosForGraphNulls:g=j.find([h,-3,a-V.DssGraphInfoReserved]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShowTitle:case I.DssGraphLockFontSize:case I.DssGraphShowSubtitle:case I.DssGraphShowfootnote:case I.DssGraphShowLegendText:case I.DssGraphCurvedLines:case I.DssGraphDepthMode:case I.DssGraphShow2DY1Title:case I.DssGraphShow2DY2Title:case I.DssGraphShow2DXTitle:case I.DssGraphEnhancedSeriesEffect:case I.DssGraphAxisHasErrorBar:case I.DssGraphAutoArrange:case I.DssGraphAxisHasMiddleValue:case I.DssGraphConnectStackBars:case I.DssGraph2DOrdSpaceMode:case I.DssGraphShowStepLine:case I.DssGraph2DSplitYAutomatic:case I.DssGraphFontAntiAlias:case I.DssGraphShowLBLPie:case I.DssGraphShowLBLRing:case I.DssGraphDeleteSlice:case I.DssGraph2DPie:case I.DssGraphDataTextShowConnectLine:case I.DssGraphShowSDLine:case I.DssGraphGaugeShowNeedle:case I.DssGraphSDShowToolTip:case I.DssGraphShow3DLineToLWall:case I.DssGraphShow3DLineToRWall:case I.DssGraphShow3DScatterLine:case I.DssGraphShow3DLineToFloor:case I.DssGraphSeriesByColumn:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShowDivBiPolar:case I.DssGraphShowSDLinrCorr:case I.DssGraphShowSDLinrFormula:case I.DssGraphCurveColorAsSeries:case I.DssGraph2DSDSplitY:g=j.find([-3,h,e,a]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}else{c=0;}break;case I.DssGraphFontAlign:case I.DssGraphFontRotation:case I.DssGraphFontBox:case I.DssGraphAreaAlpha:case I.DssGraphLinePattern:case I.DssGraphLineAlpha:case I.DssGraphLineWidth:case I.DssGraphFontStyle:case I.DssGraphFontAlpha:case I.DssGraphSDRiserType:case I.DssGraphSDPolyFactor:case I.DssGraphSDMOVAFactor:case I.DssGraphRiserWidth:case I.DssGraphACMColorModel:case I.DssGraphPiesPerRowValue:case I.DssGraphPieRotationValue:case I.DssGraphSplitYPosition:case I.DssGraphMiddleValue:case I.DssGraphPieHoleSizeValue:case I.DssGraphPieDepthValue:case I.DssGraphPieTiltValue:case I.DssGraphPieDataValueLoc:case I.DssGraphPieDataLabelLoc:case I.DssGraphDetachSlice:case I.DssGraph2DAngle:case I.DssGraph2DDepth:case I.DssGraphMarkerLayout:case I.DssGraphLegendLock:case I.DssGraphLegendBox:case I.DssGraphMarkerSize:case I.DssGraphGaugeRangeStartAngleValue:case I.DssGraphGaugeRangeStopAngleValue:case I.DssGraphGaugeBorderThicknessValue:case I.DssGraphGaugeStyleValue:case I.DssGraphGaugeFancyBox:case I.DssGraphGaugeNeedleStyleValue:case I.DssGraphGaugeBorderStyleValue:case I.DssGraphTailShape:case I.DssGraphGaugeThickness:g=j.find([-3,h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphGroupSpacing:g=j.find([-3,h,e,a]);if(g!==undefined){c=(g%127);}break;case I.DssGraphShowDataText:g=j.find([-3,-3,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphShowLBLFeeler:g=j.find([-3,h===-3?0:h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphShowFeeler:g=j.find([-3,h===-3?0:h,e,a]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAreaSFX:g=j.find([-3,h,e,a]);if(g){d=g.split(",");c={StartColor:parseInt(M.call(this,d[0]),16),EndColor:parseInt(M.call(this,d[1]),16),gradientType:parseInt(d[2]),angle:parseInt(d[3]),horizontalOffset:parseInt(d[4]),verticalOffset:parseInt(d[5])};}break;case I.DssGraphAreaCustomBevelEffect:g=j.find([-3,h,e,a]);if(g){d=g.split(",");c={type:parseInt(d[0]),lightAngle:parseInt(d[1]),intensity:parseInt(d[2]),depth:parseInt(d[3])};}break;case I.DssGraphAxisDataTextPlace:if((X>=H.DssGraphTypeX_Y_Scatter&&X<=H.DssGraphTypeDualAxis_Polar_Coordinate_Chart)||X===H.DssGraphTypeBubble||X===H.DssGraphTypeBubble_DualAxis||X===H.DssGraphTypeBubble_With_Labels||X===H.DssGraphTypeBubble_DualAxis_With_Labels||X===H.DssGraphTypeD3_X_Y_Z_Scatter_Chart||X===H.DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart){W=j.find([-3,-3,e,I.DssGraph2DPlaceX]);f=j.find([-3,-3,e,I.DssGraph2DPlaceY1]);if(W&&f){switch(W){case T.DssGraphDTPositionOutMin:if(f===T.DssGraphDTPositionCenter){Z=T.DssGraphDTPositionInMin;}break;case T.DssGraphDTPositionOutMax:if(f===T.DssGraphDTPositionCenter){Z=T.DssGraphDTPositionOutMin;}break;case T.DssGraphDTPositionCenter:switch(f){case T.DssGraphDTPositionCenter:Z=T.DssGraphDTPositionCenter;break;case T.DssGraphDTPositionOutMin:Z=T.DssGraphDTPositionOutMax;break;case T.DssGraphDTPositionOutMax:Z=T.DssGraphDTPositionInMax;break;}break;}c=Z;}}else{f=j.find([-3,-3,e,I.DssGraph2DPlaceY1]);if(f!==undefined){c=f;}}break;case I.DssGraphShowLine:if(X===H.DssGraphTypeBubble||X===H.DssGraphTypeBubble_DualAxis||X===H.DssGraphTypeBubble_With_Labels||X===H.DssGraphTypeBubble_DualAxis_With_Labels){g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDLine]);if(g!==undefined){c=(g!==R.VARIANT_FALSE);}}else{g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDDataLineType]);if(g===undefined){g=j.find([-3,e,I.DssGraphShowSDDataLineType]);}if(g!==undefined){c=(g&B.DssGraphDataLineLine)?true:false;}}break;case I.DssGraphShowMarker:g=j.find([-3,h===-3?0:h,e,I.DssGraphShowSDDataLineType]);if(g===undefined){g=j.find([-3,e,I.DssGraphShowSDDataLineType]);}if(g!==undefined){c=(g&B.DssGraphDataLineMarker)?true:false;}break;case I.DssGraphSDMarkerSize:g=j.find([-3,h===-3?0:h,e,I.DssGraphSDMarkerSize]);if(g===undefined){g=j.find([-3,e,I.DssGraphMarkerSize]);}if(g!==undefined){c=g;}break;case I.DssGraphSDMarkerShape:g=j.find([-3,h===-3?0:h,e,I.DssGraphMarkerShape]);if(g===undefined){g=j.find([-3,e,I.DssGraphMarkerShape]);}if(g!==undefined){c=g;}break;case I.DssGraphShowDataLabel:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextLabel)?true:false;}break;case I.DssGraphShowDataValue:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextValue)?true:false;}break;case I.DssGraphShowTotalValue:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextTotal)?true:false;}break;case I.DssGraphShowDVPercent:g=j.find([-3,-3,e,-I.DssGraphShowDataText]);if(g!==undefined){c=(g&F.DssGraphDataTextPercent)?true:false;}break;case I.DssGraphLineColor:case I.DssGraphAreaColor:case I.DssGraphFontColor:case I.DssGraphSeriesColor:g=j.find([-3,h,e,a]);if(g){c=M.call(this,parseInt(g,16));}break;case I.DssGraphFontName:g=j.find([-3,h,e,a]);if(g){c=g;}break;case -I.DssGraphFormatDataTextAdv:case I.DssGraphTextContent:case I.DssGraphSDToolTip:g=j.find([-3,h,e,a]);if(g){c=g;}break;case I.DssGraphFontSize100:g=j.find([-3,h,e,I.DssGraphFontSize]);if(g!==undefined){c=g*100;}break;case I.DssGraphFillEffect:g=j.find([h,e,a]);if(g){c=parseInt(g);}break;case I.DssGraphSDRegressionType:g=j.find([-3,h,e,I.DssGraphShowSDLinrLog]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionLog;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrNPoly]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionPoly;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrExp]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionExp;break;}g=j.find([-3,h,e,I.DssGraphShowSDMOVALine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionMA;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionLinear;break;}g=j.find([-3,h,e,I.DssGraphShowSDLinrNatLog]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionNatLog;break;}g=j.find([-3,h,e,I.DssGraphShowSDSTDDLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionSTDD;break;}g=j.find([-3,h,e,I.DssGraphShowSDMeanLine]);if(g&&(g!==R.VARIANT_FALSE)){c=A.DssGraphRegressionMean;break;}c=A.DssGraphRegressionNone;break;case I.DssGraphShow2DAxisLabels:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisMajor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisMinor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisLine:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ExcludeZero:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleUseMax:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleUseMin:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleMax:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2ScaleMin:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2LogScale:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphManualMajor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphCountMajor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraph2ScaleEndMax:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleEndMin:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisNumberFormat:g=j.find([-3,h,e,a]);if(g){c=g;}break;case I.DssGraphSDShowDataText:g=j.find([-3,h,e,a]);if(!g){c=false;}else{c=g;}break;case I.DssGraph2ScaleDirection:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisShowUserLine:case I.DssGraphAxisUserLineValue:b=O.call(this,b);g=j.find([-3,h,b,a]);if(g!==undefined){c=g;}break;case I.DssGraphAxisAutoFit:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphOffScaleType:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphStyleMajor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphStyleMinor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;case I.DssGraphCountMinor:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseFloat(c);}break;case I.DssGraphManualMinor:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraph2DSide:g=j.find([-3,h,e,a]);if(g!==undefined){c=g;}break;case I.DssGraphAxisStagger:g=j.find([-3,h,e,a]);if(g){c=(g!==R.VARIANT_FALSE);}break;case I.DssGraphAxisScaleFreq:g=j.find([-3,h,e,a]);if(g!==undefined){c=parseInt(c);}break;default:c=undefined;break;}return c;},PutGraphProperty:function L(c,W,b,X,Z){var a;if(!this.mIsUseGraphProperties){return ;}var Y=this.mpGraphPropertyPool;if(!Y){return ;}a=C.call(this,b,W,c);b=a.SeriesId;W=a.ObjectId;c=a.PropertyId;if(c===V.DssGraphMatrixInitedDataLabelRotation||c===V.DSSGraphMatrixDataLabelRotated){Y.replace([b,-3,c],Z);}},SetGraphType:function K(W){this.mGraphType=W;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D");var B=mstrmojo.chart,C=new B.Rect2D();mstrmojo.chart.GridDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridDataLabelInfo",mIsDisPlayed:false,mIsValid:false,mSeriesId:-3,mGroupId:-3,mXIndex:-1,mYIndex:-1,mHostMarkerBound:null,mLabelPtr:null,init:function D(E){this._super(E);this.mHostMarkerBound=C;},ToRectangle:function A(){return this.mLabelPtr.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Vector2D","Point2D","RGBColor","ChartConstants");var J=mstrmojo.chart,F=J.ChartConstants,B=mstrmojo.chart.model,C=B.enums;mstrmojo.chart.CEModuleMain=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CEModuleMain",mTolerance:0.01,mDefaultGraphWidth:700,mDefaultGraphHeight:400,mRiserCountLimit:32767,mpController:null,mGlowWidth:10,mColorParser:null,mGraphObjectMap:null,DegreeToRadian:function G(O){return O*F.kPI/180;},GetColorParser:function I(){if(this.mColorParser===null){this.mColorParser=new J.RGBColor();}return this.mColorParser;},GetGraphObjectMap:function A(){if(this.mGraphObjectMap===null){this.mGraphObjectMap=new J.common.MapStructure();}return this.mGraphObjectMap;},ResetGraphObjectMap:function K(){if(this.mGraphObjectMap){this.mGraphObjectMap.clear();}},RadianToDegree:function E(O){return(O*180/F.kPI+(O>=0?0.5:-0.5));},setController:function D(O){this.mpController=O;},GetLocalizedValue:function N(){},ShiftPolygonBy:function M(Q,R){if(R<=0){return Q;}var S,O,P=Q.length;R%=P;if(P<=1){return Q;}S=Q.slice(R,Q.length);O=Q.slice(0,R);return S.concat(O);},GetAngularBisectorIntersectionPoint:function L(O,Z,Y,S,T){var X=new J.Vector2D({x:O.x-Z.x,y:O.y-Z.y}),W=new J.Vector2D({x:Y.x-Z.x,y:Y.y-Z.y}),V=X.Length(),U=W.Length(),R=new J.Vector2D({x:X.x/V,y:X.y/V}),Q=new J.Vector2D({x:W.x/U,y:W.y/U}),P=0;if(Math.abs(R.x-Q.y)<this.mTolerance){P=S*(Q.x+R.x)/(R.y-Q.y);}else{P=S*(Q.y+R.y)/(Q.x-R.x);}T.x=Z.x+P*Q.x+S*(-Q.y);T.y=Z.y+P*Q.y+S*Q.x;},MakePolygonClockwise:function H(T){var Q=T.length,V=0,S,P,U,R,O;if(Q<3){return ;}for(S=1;S<Q;++S){if(T[S].x<T[V].x||(T[S].x<=T[V].x&&T[S].y<T[V].y)){V=S;}}P=(V+Q-1)%Q;U=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});P=(V+1)%Q;R=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});if(R.CrossProduct(U)<-this.mTolerance){for(S=0;S<Q/2;++S){O=T[S];T[S]=T[Q-S-1];T[Q-S-1]=O;}}}});J.gModuleMain=new J.CEModuleMain();}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","RGBColor","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillBevelEffect","EnumDSSGraphGradientType","EnumDSSGraphPictureScaleType","EnumDSSGraphPictureFormat");var Q=mstrmojo.chart,I=Q.enums,W=I.EnumFillType,N=mstrmojo.chart.model,J=N.enums,Y=J.EnumDSSGraphGradientType,d=J.EnumDSSGraphPictureScaleType,n=J.EnumDSSGraphPictureFormat,S=J.EnumDSSGraphFillBevelEffect;var A=0,L=1,P=2,h=3,B=4,X=5;var D=Q.gWhite.ToInteger(),a=Q.gBlack.ToInteger();var M=["mFillType","mAlpha","mSimpleColor","mDarkerFactor"],c=[W.FT_SIMPLE,255,1],k=["startGraphColor","endGraphColor","angle","horizontalOffset","verticalOffset","gradientType","endAlpha","intermediateColors","style"],F=[null,null,0,50,50,Y.DssGraphGradientCircular,0,null,0],e=["fillFlip","scaleType","pictureFormat","nameLength","pictureFilePtr","tripleId"],f=[A,d.DssGraphPictureScaleNone,n.DssGraphPicturePNG,0,null,null],j=["type","depth","lightAngle","intensity"],U=[S.DssGraphFillBevelNone,0,270,10];var K=false;mstrmojo.chart.FormatFill=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFill",mFillType:W.FT_SIMPLE,mAlpha:255,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillPicture:null,mFillBevel:null,mDarkerFactor:1,init:function g(q){var p,o=M.length;this._super(q);if(q&&q.Bare){for(p=0;p<o;++p){this[M[p]]=null;}}else{if(q&&q.SimpleColor!==undefined){this.mSimpleColor=q.SimpleColor;}else{this.mSimpleColor=D;}if(q&&q.Alpha!==undefined){this.mAlpha=q.Alpha;}else{this.mAlpha=255;}}if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};this.mFillPicture={fillFlip:A,scaleType:d.DssGraphPictureScaleNone,pictureFormat:n.DssGraphPicturePNG,nameLength:0,pictureFilePtr:null,tripleId:null};this.mFillBevel={type:S.DssGraphFillBevelNone,depth:0,lightAngle:270,intensity:10};}},transformToGradient:function E(o){var p=new Q.FormatFill({SimpleColor:this.SimpleColor,Alpha:this.mAlpha});p.mFillType=W.FT_GRADIENT;var q=p.getGradient();q.startGraphColor=o.StartGraphColor;q.endGraphColor=o.EndGraphColor;q.angle=o.Angle;q.gradientType=Y.DssGraphGradientLinear;q.endAlpha=o.EndAlpha;q.style=o.Style;q.intermediateColors=o.Colors.slice(0);return p;},getGradient:function H(){if(this.mFillGradient===null){this.mFillGradient={startGraphColor:a,endGraphColor:D,angle:0,horizontalOffset:50,verticalOffset:50,gradientType:Y.DssGraphGradientCircular,endAlpha:0,intermediateColors:[],style:0};}return this.mFillGradient;},FillSimple:function R(o){o.FillSimple(this,this.mDarkerFactor,this.mSimpleColor,false);},FillGradient:function b(p,o){return p.FillGradient(this,o,this.mDarkerFactor);},EnhancedSeriesEffect:function T(t,r,o,p,s){this.mAlpha=t;if(K){var q=this.mFillBevel;q.type=r;q.depth=o;q.lightAngle=p;q.intensity=s;}},FillEdgeType:function C(p,o){p.FillEdgeType(this,o);},FillDonutOrSphere:function O(q,o,p){q.FillDonutOrSphere(this,o,p);},MakeDarker:function V(o){this.mDarkerFactor=o;},RestoreColor:function l(){this.mDarkerFactor=1;},supportAdvancedFill:function G(o){return K;},restoreDefaults:function Z(u){var p,q,s,t,r,o;if(u){o=M.length;for(p=0;p<o;++p){this[M[p]]=c[p];}this.mSimpleColor=D;t=this.mFillGradient={};o=t.length;for(p=0;p<o;++p){t[k[p]]=F[p];}t.startGraphColor=a;t.endGraphColor=D;if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};q=this.mFillBevel={};o=j.length;for(p=0;p<o;++p){q[j[p]]=U[p];}s=this.mFillPicture={};o=e.length;for(p=0;p<o;++p){s[e[p]]=f[p];}}}else{o=M.length;for(p=0;p<o;++p){if(this[M[p]]===null){this[M[p]]=c[p];}}if(this.mSimpleColor===null){this.mSimpleColor=D;}if(this.mFillType===0){return ;}if(this.mFillGradient===null){this.mFillGradient={};}t=this.mFillGradient;o=k.length;for(p=0;p<o;++p){if(t[k[p]]===null||t[k[p]]===undefined){t[k[p]]=F[p];}}if(t.startGraphColor===null||t.startGraphColor===undefined){t.startGraphColor=a;}if(t.endGraphColor===null||t.endGraphColor===undefined){t.endGraphColor=D;}if(K){if(this.mFillPattern===null){this.mFillPattern={};}r=this.mFillPattern;if(r.foregroundColor===undefined||r.foregroundColor===null){r.foregroundColor=D;}if(r.backgroundColor===undefined||r.backgroundColor===null){r.backgroundColor=a;}if(r.patternId===undefined||r.patternId===null){r.patternId=28;}if(this.mFillBevel===null){this.mFillBevel={};}q=this.mFillBevel;o=j.length;for(p=0;p<o;++p){if(q[j[p]]===null){q[j[p]]=U[p];}}if(this.mFillPicture===null){this.mFillPicture={};}s=this.mFillPicture;o=e.length;for(p=0;p<o;++p){s[e[p]]=f[p];}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.FormatBase","mstrmojo.chart.RGBColor","mstrmojo.chart.enums.EnumLineStyle");var E=mstrmojo.chart,J=E.enums,L=J.EnumLineStyle;E.gLinePatterns=[[1,0],[18,6],[3,3],[9,6,3,6],[9,3,3,3,3,3],[9,2],[3,8],[30,10],[10,10],[3,8,3,8,3,17],[12,8,12,8,3,8],[12,5,12,5,3,5,3,5],[25,10,10,10],[25,5,8,5,8,5],[35,10,25,10,10,10],[37,5,37,5,8,5,8,5]];var G=["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","mGradient"],I=[L.LS_SOLID,255,1,75,null,null];function M(){if(this.mGradient===null){this.mGradient={valid:false,angle:0,endAlpha:0,style:1,colors:[],range:{start:{x:0,y:0},end:{x:0,y:0}}};}}mstrmojo.chart.FormatLine=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatLine",mLineStyle:L.LS_SOLID,mAlpha:255,mLineThickness:1,mLineThicknessPt:75,mLineColor:0,mGradient:null,init:function K(Q){var O,N=G.length;this._super(Q);if(Q){if(Q.Line){var P=Q.Line;this.mLineStyle=P.LineStyle;this.mAlpha=P.Alpha;this.mLineThickness=P.LineThickness;this.mLineColor=P.LineColor;}else{if(Q.Bare){for(O=0;O<N;++O){this[G[O]]=null;}}else{this.mLineStyle=Q.LineStyle||L.LS_SOLID;this.mAlpha=Q.Alpha||255;this.mLineThickness=Q.LineThickness||1;this.mLineColor=Q.LineColor||0;}}}},getGradient:function C(){M.call(this);return this.mGradient;},transformToGradient:function B(N){var P=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var O=P.getGradient();O.valid=N.Valid;O.angle=N.Angle;O.endAlpha=N.EndAlpha;O.style=N.Style;O.colors=N.Colors.slice(0);O.range={start:{x:N.Start.x,y:N.Start.y},end:{x:N.End.x,y:N.End.y}};O.strokePatten=this.mLineStyle;return P;},transformToGradientFromFill:function D(N,O,Q){var R=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var P=R.getGradient();P.valid=true;P.angle=N.angle;P.endAlpha=N.endAlpha;P.style=N.style;P.colors=[];P.colors=N.intermediateColors.slice(0);P.colors.push({Color:N.endGraphColor,Step:1});P.colors.splice(0,0,{Color:N.startGraphColor,Step:0});P.range={start:{x:O.x,y:O.y},end:{x:Q.x,y:Q.y}};return R;},ApplyLineFormat:function A(N){N.ApplyLineFormat(this);},getLinePattern:function H(N){return E.gLinePatterns[N];},restoreDefaults:function F(O){var N;if(O){for(N=0;N<G.length;++N){this[G[N]]=I[N];}}else{for(N=0;N<G.length;++N){if(this[G[N]]===null){this[G[N]]=I[N];}}}if(this.mLineColor===null){this.mLineColor=E.gBlack.ToInteger();}}});mstrmojo.chart.FormatLine.getLinePattern=function H(N){return E.gLinePatterns[N];};E.gOutlineWhite=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:1,LineColor:E.gWhite.ToInteger()});E.gOutlineBlack=new E.FormatLine({LineStyle:L.LS_DASH,Alpha:255,LineThickness:2,LineColor:E.gBlack.ToInteger()});E.gLeaderLine=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:2,LineColor:E.gLeaderLineColor.ToInteger()});E.gStrokeForDarkBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForDarkBackground.ToInteger()});E.gStrokeForLightBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForLightBackground.ToInteger()});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","JSONFormat","FormatFill");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumFormatType");var F=mstrmojo.hash,D=mstrmojo.chart,B=D.enums,A=B.EnumFormatType,C=B.EnumFillType;mstrmojo.chart.JSONFormatFill=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFill",mFillType:0,mAlpha:0,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillBevel:null,init:function E(H){H.mFormatType=A.FMT_FILL;this._super(H);F.copyProps(["mFillType","mAlpha","mSimpleColor","mFillGradient","mFillPattern","mFillBevel","id"],H,this);},AppendToJSONObject:function G(N){var I=this.mFillBevel,H=this.mFillGradient,O=this.mFillType,K={FormatType:this.mFormatType,FillType:O,Alpha:this.mAlpha,Bevel:{FillBevelType:I.type,Depth:I.depth,LightAngle:I.lightAngle,Intensity:I.intensity}};switch(O){case C.FT_SIMPLE:var L=this.mSimpleColor;K.SimpleColor={R:L.mR,G:L.mG,B:L.mB};break;case C.FT_TEXTURE:break;case C.FT_PICTURE:break;case C.FT_GRADIENT:var M=H.startGraphColor,J=H.endGraphColor;K.Gradient={StartGraphColor:{R:M.mR,G:M.mG,B:M.mB},EndGraphColor:{R:J.mR,G:J.mG,B:J.mB},Angle:H.angle,HorizontalOffset:H.horizontalOffset,VerticalOffset:H.verticalOffset,GradientType:H.gradientType,EndAlpha:H.endAlpha,Style:H.style,IntermediateColors:H.intermediateColors.slice(0)};break;case C.FT_PATTERN:break;default:break;}N.push(K);}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.Container");mstrmojo.requiresDescs(1442,2140);var C=mstrmojo.dom;mstrmojo.ui.menus.ToolbarEditor=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._IsMenuPopup,mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.menus.ToolbarEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-ToolbarEditor mstrmojo-ui-MenuEditor {@cssClass}" style="..." mstrAttach:mouseover,mouseout,click><div class="te-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},popupConfig:null,children:null,autoCloses:false,locksHover:true,visible:true,onclick:function B(E){C.stopPropogation(null,E.e);},init:function D(F){this._super(F);var E=this.popupConfig,G=E.contents;if(!G){throw new Error("Cannot open editor without editor content.");}this.cssClass=E.cssClass;this.addChildren(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo.tooltip","mstrmojo.string","mstrmojo.array");var O=0,I=mstrmojo.array,B=mstrmojo.string;function P(){var U=this.textNode,W=this.imgNode;if(this.eg!=null){W.style.display="none";U.innerHTML=this.eg||"";U.style.display="block";this.domNode.style.display=(this.visible&&this.eg.length>0)?"block":"none";}else{U.style.display="none";this.domNode.style.display=this.visible?"block":"none";W.style.display="block";if(this.tooltip){W.setAttribute("ttl",this.tooltip);}var V=this.getFormats();this.retrieveGraphSrc(V.height,V.width);}}var T={6:"poly",7:"rect",100:"circle"};function H(){var d=this.as,Z=d&&d.length;if(!Z){return ;}var Y=this.id,c=Y+"_map"+O++,W=[],b=-1,X;for(X=0;X<Z;X++){var V=d[X];V.id=Y;V.aid=X;V.tooltip=B.multiReplace(V.tooltip||"",{"&#13":"<br />","&#32":" ",'"':"&quot;"});if(!isNaN(V.shape)){V.shape=this.getAreaShapeName(V.shape);}if(!mstrApp.isDossier&&(V.tks||V.tks===""||V.tty===1)){V.extra=' href="#" ';}W[++b]=B.apply(this.areaMarkup,V);}var a='<map id="'+c+'" name="'+c+'">'+W.join("")+"</map>";if(!this.domNode){this.att='usemap="#'+c+'" ';this.map=a;}else{var U=document.createElement("div");U.innerHTML=a;if(this.mapNode){U=U.firstChild;this.mapNode.innerHTML=U.innerHTML;}else{this.imgNode.setAttribute("usemap","#"+c);this.mapNode=this.domNode.appendChild(U.firstChild);}}}var A=mstrmojo.GraphBase=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.GraphBase",cssClassPrefix:"mstrmojo-GraphBase",markupString:'<div id="{@id}" class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><img {@att}src="../images/1ptrans.gif" class="{@cssClassPrefix} {@cssImageClass}" hidefocus="true" />{@map}</div>',att:"",map:"",cAreaIdx:-1,useRichTooltip:true,markupSlots:{imgNode:function J(){return this.domNode.childNodes[1];},mapNode:function F(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function M(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function K(){this.domNode.style.display=(this.visible)?"block":"none";}},preBuildRendering:function C(){H.call(this);return this._super();},postBuildRendering:function Q(){P.call(this);return this._super();},setModel:function L(U){this.model=U;},updatingTooltipHelper:function R(Y,h,b){var V=Y&&Y.getAttribute("aid"),U=Y&&Y.getAttribute("ttl"),X=Y.getAttribute("SC"),a={refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMLEFT,contentNodeCssClass:"gp-tooltip"},g=(this.model.getZoomFactor?this.model.getZoomFactor():(this.model.docModel?this.model.docModel.getZoomFactor():1))+"em";if(V==this.cAreaIdx){return ;}this.cAreaIdx=V;a.content=U||this.defaultTooltip;var W="font-size:"+g+";";if(X){W+="border-color:#"+X;}a.contentNodeCssText=W;var d=Y.getAttribute("coords"),f=99999,e=99999;if(!b){if(d&&d.length>0){d=d.split(",");var Z=0;while(Z+1<d.length){f=Math.min(f,parseInt(d[Z++],10));e=Math.min(e,parseInt(d[Z++],10));}}}if(f===99999){f=h.x;}if(e===99999){e=h.y;}a.top=e;a.left=f;this.richTooltip=null;this.set("richTooltip",a);},redraw:function N(){if(!this.hasRendered){return false;}P.call(this);var U=this.getFormats();if(this.as&&U.height&&U.width){this.refreshMap();}return true;},refreshMap:function G(){if(this.as){H.call(this);}},getAreaShapeName:function D(U){return T[parseInt(U,10)]||"default";}});var S=A.tooltipCLS="mstrmojo-mobileGraph-Tooltip-content",E=A.canvasCLS="mobile-graph-highlight-canvas";A.hideTooltips=function(){I.forEach(document.getElementsByClassName(S),function(U){U.style.display="none";});I.forEach(document.getElementsByClassName(E),function(U){U.getContext("2d").clearRect(0,0,U.width,U.height);U.width=U.width;});};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.ToolbarEditor","mstrmojo.hash");mstrmojo.ui.menus.ToolbarEditorConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.ToolbarEditorConfig",cssClass:"",contents:null,init:function C(D){this._super(D);this.initBindings();},clear:function A(){this._super();this.contents=null;},newInstance:function B(D){return new mstrmojo.ui.menus.ToolbarEditor(mstrmojo.hash.copy({popupConfig:this},D));}});}());(function(){mstrmojo.requiresCls("mstrmojo.graph._MobileGraphAreaHelper","mstrmojo.GraphBase","mstrmojo.dom");var z=0,Ao=0,A8=0,AY=1,e=2,Y=11,W=12,AP=13,BE=101,k=102,Av=111,AW=112,A9=113,j=121,A0=122,AZ=131,s=132,AC=201,H=301,F=302,w=303,p=311,f=321,A4=322,B=401,Ay=402,Af=501,J=502,AK=503,AI=511,o=512,M=513,BC=514,An=515,BF=521,AO=522,Q=601,N=701,AR=801;var Ae=0,I=9,AE=10,Z=14;var u=0,AG=1,G=2,Ad=3,Aa=4;var l=0,Ax=1,Ac=2;var U=2,c=3;var Au=0,AJ=3,A7=4,t=6,E=13,A=14,D=101;var A3=0,At=1,Ai=2;var Ab=3.14159265;var d,a;var Ar=0,A1=1,Al=2,R=3,AA=4,BD=5,y=6,AT=7,AQ=8,AV=9;var A2=100;var A5=[[-100,-100,100,-100,100,100,-100,100],[-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[],[0,-100,100,0,0,100,-100,0],[0,-100,100,100,-100,100],[-100,-100,100,-100,100,100,-100,100],[0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100]];function Am(Cd,Bz,Cy,Bx){var Bd=Cy.InstructionList,B6=Bd.length,Bl,CB,Bw,Bv,CE,By,Bc,Bh,BL,BP,CD,B4,BT,Cs,CK,CF,Cw;for(CB=0;CB<B6;CB++){Bl=Bd[CB];if(typeof (Bl)==="undefined"){continue;}switch(Bl.Ins){case A8:break;case AY:Cd.save();break;case e:Cd.restore();break;case Y:Cd.clip();break;case W:Cd.scale(Bl.X,Bl.Y);break;case AP:if(Bl.Radian!==0){Cd.translate(Bl.Anchor.X,Bl.Anchor.Y);Cd.rotate(Bl.Radian);Cd.translate(-Bl.Anchor.X,-Bl.Anchor.Y);}break;case BE:Cd.beginPath();break;case k:Cd.closePath();break;case Av:if(Cy.IsAnimated===0){Cd.moveTo(Bl.X,Bl.Y);}else{if(Bl.CA[0]==0){Bw=Bl.X[0]*(1-Bz)+Bl.X[1]*Bz;Bv=Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz;Cd.moveTo(Bw,Bv);}else{var Bj=Math.sqrt((Bl.X[0]-Bl.BPX[0])*(Bl.X[0]-Bl.BPX[0])+(Bl.Y[0]-Bl.BPY[0])*(Bl.Y[0]-Bl.BPY[0]));var Bg=Math.sqrt((Bl.X[1]-Bl.BPX[0])*(Bl.X[1]-Bl.BPX[0])+(Bl.Y[1]-Bl.BPY[0])*(Bl.Y[1]-Bl.BPY[0]));var CH=Math.sqrt((Bl.X[0]-Bl.X[1])*(Bl.X[0]-Bl.X[1])+(Bl.Y[0]-Bl.Y[1])*(Bl.Y[0]-Bl.Y[1]));var Bi=Math.acos((Bj*Bj+Bg*Bg-CH*CH)/(2*Bj*Bg));var C1=(Bl.X[0]-Bl.BPX[0])*Math.cos(Bi)-(Bl.Y[0]-Bl.BPY[0])*Math.sin(Bi)+Bl.BPX[0]-Bl.X[1];if(C1<-0.01||C1>0.01){Bi=2*Ab-Bi;}Bw=(Bl.X[0]-Bl.BPX[0])*Math.cos(Bz*Bi)-(Bl.Y[0]-Bl.BPY[0])*Math.sin(Bz*Bi)+Bl.BPX[0];Bv=(Bl.Y[0]-Bl.BPY[0])*Math.cos(Bz*Bi)+(Bl.X[0]-Bl.BPX[0])*Math.sin(Bz*Bi)+Bl.BPY[0];Cd.moveTo(Bw,Bv);}}break;case AW:if(Cy.IsAnimated===0){Cd.lineTo(Bl.X,Bl.Y);}else{if(Bl.CA[0]==0){Bw=Bl.X[0]*(1-Bz)+Bl.X[1]*Bz;Bv=Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz;Cd.lineTo(Bw,Bv);}else{var Bj=Math.sqrt((Bl.X[0]-Bl.BPX[0])*(Bl.X[0]-Bl.BPX[0])+(Bl.Y[0]-Bl.BPY[0])*(Bl.Y[0]-Bl.BPY[0]));var Bg=Math.sqrt((Bl.X[1]-Bl.BPX[0])*(Bl.X[1]-Bl.BPX[0])+(Bl.Y[1]-Bl.BPY[0])*(Bl.Y[1]-Bl.BPY[0]));var CH=Math.sqrt((Bl.X[0]-Bl.X[1])*(Bl.X[0]-Bl.X[1])+(Bl.Y[0]-Bl.Y[1])*(Bl.Y[0]-Bl.Y[1]));var Bi=Math.acos((Bj*Bj+Bg*Bg-CH*CH)/(2*Bj*Bg));var C1=(Bl.X[0]-Bl.BPX[0])*Math.cos(Bi)-(Bl.Y[0]-Bl.BPY[0])*Math.sin(Bi)+Bl.BPX[0]-Bl.X[1];if(C1<-0.02||C1>0.02){Bi=2*Ab-Bi;}Bw=(Bl.X[0]-Bl.BPX[0])*Math.cos(Bz*Bi)-(Bl.Y[0]-Bl.BPY[0])*Math.sin(Bz*Bi)+Bl.BPX[0];Bv=(Bl.Y[0]-Bl.BPY[0])*Math.cos(Bz*Bi)+(Bl.X[0]-Bl.BPX[0])*Math.sin(Bz*Bi)+Bl.BPY[0];Cd.lineTo(Bw,Bv);}}break;case A9:if(Cy.IsAnimated===0){Cd.bezierCurveTo(Bl.CP1X,Bl.CP1Y,Bl.CP2X,Bl.CP2Y,Bl.X,Bl.Y);}else{cp1x=Bl.CP1X[0]*(1-Bz)+Bl.CP1X[1]*Bz;cp1y=Bl.CP1Y[0]*(1-Bz)+Bl.CP1Y[1]*Bz;cp2x=Bl.CP2X[0]*(1-Bz)+Bl.CP2X[1]*Bz;cp2y=Bl.CP2Y[0]*(1-Bz)+Bl.CP2Y[1]*Bz;Bw=Bl.X[0]*(1-Bz)+Bl.X[1]*Bz;Bv=Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz;Cd.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,Bw,Bv);}break;case j:if(Cy.IsAnimated===0){Cd.rect(Bl.X,Bl.Y,Bl.W,Bl.H);}else{Bw=Bl.X[0]*(1-Bz)+Bl.X[1]*Bz;Bv=Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz;By=Bl.W[0]*(1-Bz)+Bl.W[1]*Bz;CE=Bl.H[0]*(1-Bz)+Bl.H[1]*Bz;Cd.rect(Bw,Bv,By,CE);}break;case A0:if(Cy.IsAnimated===0){if(Bl.EndAngle==6.283){Bl.EndAngle=2*Ab;}Cd.arc(Bl.X,Bl.Y,Bl.Radius,Bl.StartAngle,Bl.EndAngle,Bl.AntiClockwise);}else{if(Bl.EndAngle[0]==6.283){Bl.EndAngle[0]=2*Ab;}if(Bl.EndAngle[1]==6.283){Bl.EndAngle[1]=2*Ab;}Cd.arc(Bl.X[0]*(1-Bz)+Bl.X[1]*Bz,Bl.Y[0]*(1-Bz)+Bl.Y[1]*Bz,Bl.Radius[0]*(1-Bz)+Bl.Radius[1]*Bz,Bl.StartAngle[0]*(1-Bz)+Bl.StartAngle[1]*Bz,Bl.EndAngle[0]*(1-Bz)+Bl.EndAngle[1]*Bz,Bl.AntiClockwise[0]);}break;case s:if(Cy.IsAnimated==1){var Br=Bl.Angle[0]*(1-Bz)+Bl.Angle[1]*Bz;var Bb=Bl.NeedleSize[0];var CI=Bl.BPX[0];var CG=Bl.BPY[0];var BM=Bl.MarkSize[0];var Ci=Bl.MarkShape[0];var CT={X:Bb*Math.cos(Br)+CI,Y:Bb*Math.sin(Br)*-1+CG};var B2=AL(Ci,CT,BM);C(Cd,B2,false,false);}break;case AC:case H:break;case F:Cd.lineWidth=Bl.LineWidth;break;case w:switch(Bl.Type){case A3:Cd.lineJoin="miter";break;case At:Cd.lineJoin="bevel";break;case Ai:Cd.lineJoin="round";break;}break;case p:case f:case A4:break;case B:Cd.fill();break;case Ay:Cd.stroke();break;case Af:BL=Bl.Format;Bc=Bx[BL];if(Bl.HEP==1){Bh=Bl.FC;}else{Bh=Bc.SimpleColor;}Cd.fillStyle="RGBA("+Math.round(Bh.R*Bl.DarkerFactor)+", "+Math.round(Bh.G*Bl.DarkerFactor)+", "+Math.round(Bh.B*Bl.DarkerFactor)+", "+Bc.Alpha/255+")";Cd.fill();break;case J:break;case AK:if(Cy.IsAnimated===0){BT=Bl.BoundingRect;Cw=Bl.DarkerFactor;}else{BT=Bl.BoundingRect[0];Cw=Bl.DarkerFactor[0];var Cz=Bl.BoundingRect[1];BT.X=BT.X*(1-Bz)+Cz.X*Bz;BT.Y=BT.Y*(1-Bz)+Cz.Y*Bz;BT.Width=BT.Width*(1-Bz)+Cz.Width*Bz;BT.Height=BT.Height*(1-Bz)+Cz.Height*Bz;}if(BT.Width<1||BT.Height<1){continue;}BT.Width=Math.floor(BT.Width);BT.Height=Math.floor(BT.Height);var Bc=Bx[Bl.Format];if(Bc.Bevel.FillBevelType!=Aa||Bz<1){As(Cd,Bc,BT,Cw);}else{Aj(Cd,Bc);As(Cd,Bc,BT,Cw);}break;case AI:Bc=Bx[Bl.Format];CK=Bc.Bevel;B2=AB(Bl.Polygon);var Bq=B2.length;var BS=[];for(var CC=0;CC<Bq;CC++){BS.push(B2[CC]);}while(true){Bq=BS.length;if(Bq<3){break;}var BY=[];var B3=[];var BN=false;if(Bq>3){var Cr={X:0,Y:0};for(var CC=0;((CC<(Bq-2))&&(!BN));++CC){for(var B9=CC+2;B9<(Bq-1);++B9){var Cu=b(BS[CC],BS[CC+1],BS[B9],BS[B9+1],Cr,false);Cr=Cu.interSection;if(Cu.val==1){BN=true;for(m=0;m<=CC;++m){if(!AS(BS[m],Cr)){BY.push(BS[m]);}}BY.push(Cr);for(m=B9+1;m<Bq;++m){if(!AS(BS[m],Cr)){BY.push(BS[m]);}}B3.push(Cr);for(m=B9;m>CC;--m){if(!AS(BS[m],Cr)){B3.push(BS[m]);}}break;}}if((CC!=0)&&(!BN)){var Cu=b(BS[CC],BS[CC+1],BS[0],BS[Bq-1],Cr,false);Cr=Cu.interSection;if(Cu.val==1){for(m=0;m<=CC;++m){BY.push(BS[m]);}BY.push(Cr);B3.push(Cr);for(m=Bq-1;m>CC;--m){B3.push(BS[m]);}BN=true;}}}}if(!BN){BY=BS;}var Cq=0;var Ce=BH(BY,Cq);Cq=Ce.depth;if(!Ce.mark){break;}Cq*=CK.Depth*0.01;var Bu=[];var BR=[];var B0=BY.length;for(var CC=0;CC<B0;++CC){var CW;var Bo;var Ce=Aq(BY[(CC+B0-1)%B0],BY[CC],BY[(CC+1)%B0],Cq);CW=Ce.start;Bo=Ce.end;Bu.push(CW);BR.push(Bo);}for(var CC=0;CC<B0;++CC){var CQ={X:BR[CC].X-Bu[CC].X,Y:BR[CC].Y-Bu[CC].Y};var BO=Math.sqrt(Ap(CQ));var CV={X:CQ.X/BO,Y:CQ.Y/BO};var BJ=v((540-CK.LightAngle)%360);var BU={X:Math.cos(BJ),Y:Math.sin(BJ)};var B1=AH(CV,BU);var CR=0;var B8=0;var Cg=0.1;var Ct=0.2;if(B1<-0.01){CR=(1+B1)*Cg;B8=(1+Math.abs(B1))*Ct*CK.Intensity*0.01;}else{CR=(1-Cg)+B1*Cg;B8=((1-Ct)+B1*Ct)*CK.Intensity*0.01;}var B7=CC+1;if(B7==B0){B7-=B0;}Cd.beginPath();Cd.moveTo(BY[CC].X,BY[CC].Y);Cd.lineTo(BY[B7].X,BY[B7].Y);Cd.lineTo(Bu[B7].X,Bu[B7].Y);Cd.lineTo(Bu[CC].X,Bu[CC].Y);Cd.closePath();var CP=Math.round(CR*255);if(isNaN(CP)){continue;}if(CK.FillBevelType==AG){Cd.save();Cd.clip();var BK=Cd.createLinearGradient(BR[CC].X,BR[CC].Y,Bu[CC].X,Bu[CC].Y);BK.addColorStop(0,"rgba("+CP+","+CP+","+CP+","+B8+")");BK.addColorStop(1,"rgba("+CP+","+CP+","+CP+","+0+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();}else{Cd.fillStyle="RGBA("+CP+", "+CP+", "+CP+", "+B8+")";Cd.fill();}}if(BN){BS=B3;}else{break;}}if(B2.length!=0){Cd.beginPath();Cd.moveTo(B2[0].X,B2[0].Y);for(var CC=1;CC<B2.length;++CC){Cd.lineTo(B2[CC].X,B2[CC].Y);}Cd.closePath();}break;case o:Bc=Bx[Bl.Format];CK=Bc.Bevel;if(Cy.IsAnimated===0){BT=Bl.BoundingRect;CF=Bl.IsCircularShape;}else{var C0=Bl.BoundingRect[0];var Cz=Bl.BoundingRect[1];BT={X:0,Y:0,Width:0,Height:0};BT.X=C0.X*(1-Bz)+Cz.X*Bz;BT.Y=C0.Y*(1-Bz)+Cz.Y*Bz;BT.Width=C0.Width*(1-Bz)+Cz.Width*Bz;BT.Height=C0.Height*(1-Bz)+Cz.Height*Bz;}if(CK.FillBevelType===Ad){var Cx=0.2;var CM=CK.Intensity*0.01*Bc.Alpha/255;var CO=1-CK.Depth*0.01;Cs=Cd.createLinearGradient(BT.X,BT.Y,BT.X+BT.Width,BT.Y);CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs.addColorStop(0,CD);Cs.addColorStop(CO*Cx,CD);Cs.addColorStop(CO,B4);Cs.addColorStop(1,CD);}else{CD=Bc.SimpleColor;var BV={x:BT.X+BT.Width/2,y:BT.Y+BT.Height/2};Bk={x:0,y:0};Bf={x:0,y:0};x(BT,CK.LightAngle,BV);var BZ=Bc.Alpha/255;var Bn=BZ;if(Bc.FillType!=Au){BZ*=0.8;Bn*=0.5;CD={R:128,G:128,B:128};}var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba(255,255,255,"+BZ+")");BK.addColorStop(0.05+CK.Intensity*0.001,"rgba(255,255,255,"+9*BZ/(10-BZ)+")");BK.addColorStop(0.5,"rgba("+CD.R+","+CD.G+","+CD.B+","+Bn+")");BK.addColorStop(0.85+(1-CK.Intensity*0.01)*0.05,"rgba(0,0,0,"+9*BZ/(10-BZ)+")");BK.addColorStop(1,"rgba(0,0,0,"+BZ+")");Cd.fillStyle=BK;Cd.fill();if(Bc.FillType!=Au){continue;}var BI=Math.max(BT.Width,BT.Height)*0.5*(2-CK.Intensity*0.01);BI*=CF?0.75:2;Cs=Cd.createRadialGradient(BV.x,BV.y,0,BV.x,BV.y,BI);Cs.addColorStop(0,"rgba("+CD.R+","+CD.G+","+CD.B+","+BZ+")");Cs.addColorStop(0.5,"rgba("+CD.R+","+CD.G+","+CD.B+","+BZ/2+")");Cs.addColorStop(0.8,"rgba("+CD.R+","+CD.G+","+CD.B+","+BZ/10+")");Cs.addColorStop(1,"rgba("+CD.R+","+CD.G+","+CD.B+",0)");}Cd.fillStyle=Cs;Cd.fill();break;case An:Bc=Bx[Bl.Format];CK=Bc.Bevel;var Cb=Bl.CX;var Ca=Bl.CY;var Cl=Bl.Radius;var BI;var CM;switch(Bl.BorderUse){case U:CM=0.4;Bk={x:Cb+Cl*Math.cos(Ab*1.25),y:Ca+Cl*Math.sin(Ab*1.25)};Bf={x:Cb+Cl*Math.cos(Ab*0.25),y:Ca+Cl*Math.sin(Ab*0.25)};Cd.save();Cd.clip();var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba(0,0,0,"+CM+")");BK.addColorStop(1,"rgba(255,255,255,"+CM+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();CM=0.4;BI=Cl*0.3;Bh=Bc.SimpleColor;Bk={x:Cb+BI*Math.cos(Ab*0.75),y:Ca+BI*Math.sin(Ab*0.75)};Bf={x:Cb+BI*Math.cos(Ab*1.75),y:Ca+BI*Math.sin(Ab*1.75)};Cd.save();Cd.clip();var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba("+Bh.R+","+Bh.G+","+Bh.B+","+0+")");BK.addColorStop(0.2,"rgba("+Bh.R+","+Bh.G+","+Bh.B+","+1+")");BK.addColorStop(0.8,"rgba("+Bh.R+","+Bh.G+","+Bh.B+","+1+")");BK.addColorStop(1,"rgba("+Bh.R+","+Bh.G+","+Bh.B+","+0+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();break;case c:CM=0.6;BI=Cl*0.2;var CO=0.3;Bk={x:Cb+BI*Math.cos(Ab*1.25),y:Ca+BI*Math.sin(Ab*1.25)};Bf={x:Cb+Cl*Math.cos(Ab*0.25),y:Ca+Cl*Math.sin(Ab*0.25)};Cd.save();Cd.clip();var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba(255,255,255,"+CM+")");BK.addColorStop(CO,"rgba(0,0,0,"+CM+")");BK.addColorStop(1,"rgba(255,255,255,"+CM+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();break;default:CM=0.4;BI=Cl-Bl.Thickness;Bk={x:Cb+BI*Math.cos(Ab*1.25),y:Ca+BI*Math.sin(Ab*1.25)};Bf={x:Cb+BI*Math.cos(Ab*0.25),y:Ca+BI*Math.sin(Ab*0.25)};Cd.save();Cd.clip();var BK=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);BK.addColorStop(0,"rgba(0,0,0,"+CM+")");BK.addColorStop(1,"rgba(255,255,255,"+CM+")");Cd.fillStyle=BK;Cd.fill();Cd.restore();break;}break;case M:Bc=Bx[Bl.Format];CK=Bc.Bevel;var CM;var CO;var Cb;var Ca;var Bm;var BX;var CN;var Bs;var Bp;var Cf;if(Cy.IsAnimated===0){Cb=Bl.CX;Ca=Bl.CY;Bm=Bl.InnerRadius;BX=Bl.OuterRadius;CN=Bl.RGUsage;Bs=Bl.HEP;if(Bs==1){Bp=Bl.ExtraDepth;Cf=Bl.ExtraIntensity;}}else{Cb=Bl.CX[0]*(1-Bz)+Bl.CX[1]*Bz;Ca=Bl.CY[0]*(1-Bz)+Bl.CY[1]*Bz;Bm=Bl.InnerRadius[0];BX=Bl.OuterRadius[0];CN=Bl.RGUsage[0];Bs=Bl.HEP[0];if(Bs==1){Bp=Bl.ExtraDepth[0];Cf=Bl.ExtraIntensity[0];}}switch(CN){case l:CM=CK.Intensity*0.01*Bc.Alpha/255;CO=1-CK.Depth*0.01;Cs=Cd.createRadialGradient(Cb,Ca,Bm,Cb,Ca,BX);CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs.addColorStop(0,CD);Cs.addColorStop(CO,B4);Cs.addColorStop(1,CD);Cd.fillStyle=Cs;Cd.fill();break;case Ax:CM=CK.Intensity*0.01*Bc.Alpha/255;Cs=Cd.createRadialGradient(Cb,Ca,Bm,Cb,Ca,BX);CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs.addColorStop(0,CD);Cs.addColorStop(1,B4);Cd.fillStyle=Cs;Cd.fill();break;case Ac:if(Bs==0){CM=CK.Intensity*0.01*Bc.Alpha/255;CO=CK.Depth*0.01;}else{CM=Cf*0.01*Bc.Alpha/255;CO=Bp*0.01;}Cs=Cd.createRadialGradient(Cb,Ca,Bm,Cb,Ca,BX);CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs.addColorStop(0,CD);Cs.addColorStop(CO,B4);Cs.addColorStop(1,CD);Cd.fillStyle=Cs;Cd.fill();break;}break;case BC:Bc=Bx[Bl.Format];CK=Bc.Bevel;CM=CK.Intensity*0.01*Bc.Alpha/255;CO=1-CK.Depth*0.01;CD="RGBA(0,0,0,"+CM+")";B4="RGBA(255,255,255,"+CM+")";Cs=Cd.createLinearGradient(Bl.StartPoint.X,Bl.StartPoint.Y,Bl.EndPoint.X,Bl.EndPoint.Y);Cs.addColorStop(0,CD);Cs.addColorStop(CO,B4);Cs.addColorStop(1,CD);Cd.save();Cd.clip();Cd.fillStyle=Cs;Cd.fill();Cd.restore();break;case BF:case AO:break;case Q:var Cc;BL=Bl.Format;Bc=Bx[BL];if(Bc.Gradient&&Bc.Gradient.Valid){var Cp=Bc.Gradient,Cj=Cp.Colors,Bk=Cp.Start,Bf=Cp.End;if(Cp.style==0){var Bt=Cd.createLinearGradient(Bk.x,Bk.y,Bf.x,Bf.y);}else{if(Cp.angle==0){Bt=Cd.createLinearGradient(Bk.x,0,Bf.x,0);}else{Bt=Cd.createLinearGradient(0,Bk.y,0,Bf.y);}}var Ba,B5=1,Co=Cj.length;if(Co>0){for(CC=0;CC<Co;CC++){Ba="RGBA("+Math.round(B5*Cj[CC].Color.mR)+", "+Math.round(B5*Cj[CC].Color.mG)+", "+Math.round(B5*Cj[CC].Color.mB)+", "+Bc.Alpha/255+")";Bt.addColorStop(Cj[CC].Step,Ba);}Cc=Bt;}else{Bh=Bc.Color;Cc="RGBA("+Bh.R+", "+Bh.G+", "+Bh.B+", "+Bc.Alpha/255+")";}}else{Bh=Bc.Color;Cc="RGBA("+Bh.R+", "+Bh.G+", "+Bh.B+", "+Bc.Alpha/255+")";}Cd.strokeStyle=Cc;Cd.stroke();break;case N:BL=Bl.Format;Bc=Bx[BL];Bh=Bc.Color;Cd.font=Bc.Size+"px "+Bc.Name;if(Bc.Style&2){Cd.font="italic "+Cd.font;}if(Bc.Style&1){Cd.font="bold "+Cd.font;}Cd.fillStyle="RGBA("+Bh.R+", "+Bh.G+", "+Bh.B+", "+Bc.Alpha/255+")";Cd.fillText(Bl.Text,Bl.StartPoint.X,Bl.StartPoint.Y);if(Bc.Style&12){Cd.beginPath();var CL=Cd.measureText(Bl.Text);if(Bc.Style&4){Cd.moveTo(Math.round(Bl.StartPoint.X),Math.round(Bl.StartPoint.Y));Cd.lineTo(Math.round(Bl.StartPoint.X+CL.width),Math.round(Bl.StartPoint.Y));}if(Bc.Style&8){Cd.moveTo(Math.round(Bl.StartPoint.X),Math.round(Bl.StartPoint.Y-Bc.Size*0.5));Cd.lineTo(Math.round(Bl.StartPoint.X+CL.width),Math.round(Bl.StartPoint.Y-Bc.Size*0.5));}Cd.strokeStyle="RGBA("+Bh.R+", "+Bh.G+", "+Bh.B+", "+Bc.Alpha/255+")";Cd.lineWidth=Math.round(Math.max(1,Bc.Size*3/40));Cd.stroke();}break;case AR:var Cv;if(Cy.IsAnimated===0){Cv=Bl.Rect;}else{Cv=Bl.Rect[0];var Cz=Bl.Rect[1];Cv.X=Cv.X*(1-Bz)+Cz.X*Bz;Cv.Y=Cv.Y*(1-Bz)+Cz.Y*Bz;Cv.Width=Cv.Width*(1-Bz)+Cz.Width*Bz;Cv.Height=Cv.Height*(1-Bz)+Cz.Height*Bz;}var CA=Bl.RotationAngle;var CJ=Bl.BevelDepth;var CU=Bl.LTColor;var CS=Bl.LTAlpha;var Cn=Bl.RBColor;var Ck=Bl.RBAlpha;var Cm={X:Cv.X+Cv.Width/2,Y:Cv.Y+Cv.Height/2};var CZ={X:0,Y:0,Width:0,Height:0};CZ.X=Cv.X;CZ.Y=Cv.Y;CZ.Width=Cv.Width;CZ.Height=Cv.Height;BB(CZ,CJ,CJ);var Be=[];Be.push(Az({X:Cv.X,Y:Cv.Y},Cm,CA));Be.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y},Cm,CA));Be.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y+Cv.Height},Cm,CA));Be.push(Az({X:Cv.X,Y:Cv.Y+Cv.Height},Cm,CA));var Ch=[];Ch.push(Az({X:CZ.X,Y:CZ.Y},Cm,CA));Ch.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y},Cm,CA));Ch.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y+CZ.Height},Cm,CA));Ch.push(Az({X:CZ.X,Y:CZ.Y+CZ.Height},Cm,CA));var BW=[];BW.push(Az({X:Cv.X,Y:Cv.Y+Cv.Height},Cm,CA));BW.push(Az({X:CZ.X,Y:CZ.Y+CZ.Height},Cm,CA));BW.push(Az({X:CZ.X,Y:CZ.Y},Cm,CA));BW.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y},Cm,CA));BW.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y},Cm,CA));BW.push(Az({X:Cv.X,Y:Cv.Y},Cm,CA));C(Cd,BW,false,false);Cd.fillStyle="RGBA("+CU.R+", "+CU.G+", "+CU.B+", "+CS/255+")";Cd.fill();var BQ=[];BQ.push(Az({X:Cv.X,Y:Cv.Y+Cv.Height},Cm,CA));BQ.push(Az({X:CZ.X,Y:CZ.Y+CZ.Height},Cm,CA));BQ.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y+CZ.Height},Cm,CA));BQ.push(Az({X:CZ.X+CZ.Width,Y:CZ.Y},Cm,CA));BQ.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y},Cm,CA));BQ.push(Az({X:Cv.X+Cv.Width,Y:Cv.Y+Cv.Height},Cm,CA));C(Cd,BQ,false,false);Cd.fillStyle="RGBA("+Cn.R+", "+Cn.G+", "+Cn.B+", "+Ck/255+")";Cd.fill();Cd.strokeStyle="RGBA(230, 230, 230, "+CS*0.5/255+")";Cd.lineWidth=1;C(Cd,Be,true,true);Cd.stroke();C(Cd,Ch,true,true);Cd.stroke();break;}}}function Aw(BI,BJ){return 1-(Math.sqrt((BJ-256)*(BJ-256)+(BI-256)*(BI-256))/(1.5*256));}function V(BM,BI,BN,BK,BJ){var BL=(BK&&BJ)?0.5:0;BM.moveTo(BI+BL,BN+BL);}function BG(BM,BI,BN,BK,BJ){var BL=(BK&&BJ)?0.5:0;BM.lineTo(BI+BL,BN+BL);}function h(BL,BI,BK,BJ){var BN=BI.length;if(BN<=0){return ;}BL.beginPath();V(BL,BI[0].X,BI[0].Y,BK,BJ);var BM=0;for(i=1;i<BN;++i){BG(BL,BI[i].X,BI[i].Y,BK,BJ);BM=i;}}function X(BK){var BJ=A5[BK];var BI=BJ.length/2;return{number:BI,points:BJ};}function AL(BR,BM,BJ){var BI=[];if(BR==AA){BI.push({X:BM.X-BJ,Y:BM.Y-BJ});BI.push({X:BM.X+BJ,Y:BM.Y-BJ});BI.push({X:BM.X+BJ,Y:BM.Y+BJ});BI.push({X:BM.X-BJ,Y:BM.Y+BJ});return BI;}var BO;var BQ;var BN=X(BR);BO=BN.number;BQ=BN.points;for(var BP=0;BP<BO;BP++){var BL=(BQ[2*BP])*BJ/A2+BM.X;var BK=(BQ[2*BP+1])*BJ/A2+BM.Y;BI.push({X:BL,Y:BK});}return BI;}function C(BN,BJ,BL,BK){var BP=BJ.length;if(BP<3){return ;}BN.beginPath();if(BL&&BK){var BI=[];for(var BM=0;BM<BP;++BM){BI.push(BJ[BM]);}var BO=BP-1;for(var BM=0;BM<BP;++BM){lNextIndex=(BM+1==BP)?0:BM+1;if(BJ[BM].X==BJ[BO].X||BJ[BM].X==BJ[lNextIndex].X){BI[BM].X+=0.5;}if(BJ[BM].Y==BJ[BO].Y||BJ[BM].Y==BJ[lNextIndex].Y){BI[BM].Y+=0.5;}BO=BM;}h(BN,BI,false,BK);}else{h(BN,BJ,false,BK);}BN.closePath();}function A6(BI,BL,BK){var BM=BI.X-BL.X;var BJ=BI.Y-BL.Y;BI.X=BL.X+Math.cos(BK)*BM-Math.sin(BK)*BJ;BI.Y=BL.Y+Math.sin(BK)*BM+Math.cos(BK)*BJ;return BI;}function Az(BI,BK,BJ){return A6(BI,BK,BJ);}function BB(BJ,BK,BI){if(BK*2>BJ.Width){BK=BJ.Width/2;}if(BI*2>BJ.Height){BI=BJ.Height/2;}return AD(BJ,-BK,-BI);}function AD(BJ,BK,BI){BJ.X-=BK;BJ.Y-=BI;BJ.Width+=(BK*2);BJ.Height+=(BI*2);return BJ;}function r(BJ,BI,BK){return S(BJ,BI)+S(BI,BK)+S(BK,BJ);}function n(BJ,BI){return Math.sqrt((BJ.X-BI.X)*(BJ.X-BI.X)+(BJ.Y-BI.Y)*(BJ.Y-BI.Y));}function P(BL,BP,BY){var BU=BY;var BK=BL.length;var BT=BP;var BV=BL[(BT+BK-1)%BK];var BS=BL[(BT+1)%BK];var BN=0;var BX={X:0,Y:0};var BW={X:BL[BP].X-BL[(BP+BK-1)%BK].X,Y:BL[BP].Y-BL[(BP+BK-1)%BK].Y};for(var BQ=(BT+2)%BK;BQ!=BT;BQ=(BQ+1)%BK){var BR=BQ-1;if(BR<0){BR+=BK;}var Ba={X:BL[BR].X-BL[BT].X,Y:BL[BR].Y-BL[BT].Y};var BZ={X:BL[BQ].X-BL[BT].X,Y:BL[BQ].Y-BL[BT].Y};if(S(BW,Ba)<0.01&&S(BW,BZ)>0.01){var BJ=b(BV,BL[BT],BL[BR],BL[BQ],BX,false);BX=BJ.interSection;BN=BQ;break;}}var BI=0;var BO={X:0,Y:0};var BM={X:BL[BP].X-BL[(BP+1)%BK].X,Y:BL[BP].Y-BL[(BP+1)%BK].Y};for(var BQ=(BT+BK-2)%BK;BQ!=BT;BQ=(BQ-1+BK)%BK){var BR=BQ+1;if(BR>=BK){BR-=BK;}var Ba={X:BL[BR].X-BL[BT].X,Y:BL[BR].Y-BL[BT].Y};var BZ={X:BL[BQ].X-BL[BT].X,Y:BL[BQ].Y-BL[BT].Y};if(S(BM,Ba)>-0.01&&S(BM,BZ)<-0.01){var BJ=b(BS,BL[BT],BL[BR],BL[BQ],BO,false);BO=BJ.interSection;BI=BQ;break;}}BU.push(BL[BT]);BU.push(BX);for(m=BN;;m=(m+1)%BK){BU.push(BL[m]);if(m==BI){break;}}BU.push(BO);return BU;}function g(BT,BQ){var BR=BT.length;if(BR==3){var BJ=BH(BT,BQ);return BJ;}else{var Ba=BT[BR-1];var BI={X:BT[1].X-BT[0].X,Y:BT[1].Y-BT[0].Y};var BU={X:-BI.X,Y:-BI.Y};var BL={X:Ba.X-BT[0].X,Y:Ba.Y-BT[0].Y};var Bb={X:-BL.X,Y:-BL.Y};var BN=false;var BS=10000000000;for(var BZ=2;BZ<BR;++BZ){var BX=BZ-1;var BY={X:BT[BZ].X-BT[BX].X,Y:BT[BZ].Y-BT[BX].Y};if(S(BU,BY)<-0.01){var BK={X:0,Y:0};var BO=b(BT[0],BT[1],BT[BX],BT[BZ],BK,false);BK=BO.interSection;if(BO.val>0){var BP={X:BK.X-BT[0].X,Y:BK.Y-BT[0].Y};if(AH(BI,BP)>0.01){var BM={X:BK.X+BY.X,Y:BK.Y+BY.Y};var BV={X:0,Y:0};var BW;var BJ=T(Ba,BT[0],BK,BM,BV,BW);BV=BJ.point;BW=BJ.val;if(BJ.mark){BN=true;if((BW<BS)&&Ak(BV,BT[BX-1],BT[BX],BT[BZ],BT[(BZ+1)%BR])){BS=BW;}}}}}else{if(S(Bb,BY)<-0.01){var BK={X:0,Y:0};var BO=b(BT[0],Ba,BT[BX],BT[BZ],BK,false);BK=BO.interSection;if(BO.val>0){var BP={X:BK.X-BT[0].X,Y:BK.Y-BT[0].Y};if(AH(BL,BP)>0.01){var BM={X:BK.x-BY.x,Y:BK.y-BY.y};var BV={X:0,Y:0};var BW;var BJ=T(BM,BK,BT[0],BT[1],BV,BW);BV=BJ.point;BW=BJ.val;if(BJ.mark){BN=true;if((BW<BS)&&Ak(BV,BT[BX-1],BT[BX],BT[BZ],BT[(BZ+1)%BR])){BS=BW;}}}}}}}return{mark:BN,depth:BS};}}function Ap(BI){return BI.X*BI.X+BI.Y*BI.Y;}function Aq(BU,BS,BR,BM){var BN={X:BU.X-BS.X,Y:BU.Y-BS.Y};var BL={X:BR.X-BS.X,Y:BR.Y-BS.Y};var BK=Math.sqrt(Ap(BN));var BJ=Math.sqrt(Ap(BL));var BQ={X:BN.X/BK,Y:BN.Y/BK};var BP={X:BL.X/BJ,Y:BL.Y/BJ};var BT=0;if(Math.abs(BQ.X-BP.X)<0.01){BT=BM*(BP.X+BQ.X)/(BQ.Y-BP.Y);}else{BT=BM*(BP.Y+BQ.Y)/(BP.X-BQ.X);}var BO={X:0,Y:0};var BI={X:0,Y:0};BO.X=BS.X+BT*BP.X;BO.Y=BS.Y+BT*BP.Y;BI.X=BO.X+BM*(-BP.Y);BI.Y=BO.Y+BM*BP.X;return{start:BI,end:BO};}function Ah(BJ,BI){var BK=AH(BJ,BI)/(Math.sqrt(Ap(BJ)*Ap(BI)));BK=(BK>1)?1:BK;BK=(BK<-1)?-1:BK;return Math.acos(BK);}function Ak(BO,BW,BV,BT,BS){var BQ={X:BW.X-BV.X,Y:BW.Y-BV.Y};var BN={X:BT.X-BV.X,Y:BT.Y-BV.Y};var BU=q(Ah(BQ,BN));if(S(BN,BQ)<-0.01){BU=360-BU;}var BK={X:BO.X-BV.X,Y:BO.Y-BV.Y};var BP=q(Ah(BK,BN));if(S(BN,BK)<-0.01){BP=360-BP;}if(2*BP>BU){return false;}var BJ={X:-BN.X,Y:-BN.Y};var BI={X:BS.X-BT.X,Y:BS.Y-BT.Y};var BR=q(Ah(BJ,BI));if(S(BI,BJ)<-0.01){BR=360-BR;}var BM={X:BO.X-BT.X,Y:BO.Y-BT.Y};var BL=q(Ah(BJ,BM));if(S(BM,BJ)<-0.01){BL=360-BL;}if(2*BL>BR){return false;}return true;}function AM(BI){return Math.sqrt(Ap(BI));}function T(BW,BV,BT,BR,BM,BZ){var Bh;var BY;var Bf={X:BV.X-BW.X,Y:BV.Y-BW.Y};var Bb={X:BR.X-BT.X,Y:BR.Y-BT.Y};var BP={X:BT.X-BV.X,Y:BT.Y-BV.Y};var Be=Math.sqrt(Ap(BP));var Bc=S(Bf,Bb);if(Bc>0.01||Bc<-0.01){var BQ={X:0,Y:0};var BS=b(BW,BV,BT,BR,BQ,false);BQ=BS.interSection;var Bd=n(BV,BQ);var BJ=n(BT,BQ);if(Bc<-0.01){var BL=Be+Bd+BJ;BM.X=(BJ*BV.X+Bd*BT.X+Be*BQ.X)/BL;BM.Y=(BJ*BV.Y+Bd*BT.Y+Be*BQ.Y)/BL;Bh=r(BV,BT,BQ)/BL;BY=true;}else{var BL=Bd+BJ-Be;if(BL<0.01){var Ba=0;if(Math.abs(S(Bf,BP))<0.01){var Bg={X:-BP.X/Be,Y:-BP.Y/Be};var BK=Math.sqrt(Ap(Bb));var BN={X:Bb.X/BK,Y:Bb.Y/BK};Ba=(Bg.Y-BN.Y)*Be/(Bg.X+BN.X);BM.X=BV.X+Ba*Bg.Y;BM.Y=BV.Y+Ba*(-Bg.X);}else{var BU={X:BP.X/Be,Y:BP.Y/Be};var BX=AM(Bf);var BO={X:-Bf.X/BX,Y:-Bf.Y/BX};Ba=(BO.Y-BU.Y)*Be/(BO.X+BU.X);BM.X=BT.X+Ba*(-BU.Y);BM.Y=BT.Y+Ba*BU.X;}Bh=Ba;BY=true;return{val:Bh,mark:BY,point:BM};}BM.X=(BJ*BV.X+Bd*BT.X-Be*BQ.X)/BL;BM.Y=(BJ*BV.Y+Bd*BT.Y-Be*BQ.Y)/BL;Bh=r(BV,BQ,BT)/BL;BY=true;}}else{if(Math.abs(S(Bf,BP))<0.01){BY=false;return{val:Bh,mark:BY,point:BM};}var BX=Math.sqrt(Ap(Bf));var BI={X:-Bf.X/BX,Y:-Bf.Y/BX};BM.X=(BV.X+BT.X+Be*BI.X)/2;BM.Y=(BV.Y+BT.Y+Be*BI.Y)/2;Bh=S(BP,BI)/2;BY=true;}return{val:Bh,mark:BY,point:BM};}function BH(BW,BT){var Bf=false;var BJ=BW.length;if(BJ==3){var BR=n(BW[0],BW[1]);var BQ=n(BW[1],BW[2]);var BP=n(BW[2],BW[0]);var BI=BR+BQ+BP;BT=r(BW[0],BW[1],BW[2])/BI;Bf=true;}else{var BO=false;var BV=10000000000;for(var Bb=0;Bb<BJ;++Bb){var Bc=BW[Bb];var Bd=BW[(Bb+BJ-1)%BJ];var Ba=BW[(Bb+1)%BJ];var BZ=BW[(Bb+2)%BJ];var BM={X:Bd.X-Bc.X,Y:Bd.Y-Bc.Y};var BK={X:Ba.X-Bc.X,Y:Ba.Y-Bc.Y};var BX={X:-BK.X,Y:-BK.Y};var BU={X:BZ.X-Ba.X,Y:BZ.Y-Ba.Y};var BS=S(BM,BK);if(BS<0.01){if(S(BX,BU)<0.01){var BN={X:0,Y:0};var BY=0;var BL=T(Bd,Bc,Ba,BZ,BN,BY);BN=BL.point;BY=BL.val;if(BL.mark){BO=true;BV=(BV>BY)?BY:BV;}}}else{if(BS>0.01){var Be=[];Be=P(BW,Bb,Be);var BL=g(Be,BY);var BY=BL.depth;if(BL.mark){BO=true;BV=(BV>BY)?BY:BV;}}}}BT=BV;Bf=BO;}return{mark:Bf,depth:BT};}function AS(BJ,BI){return(Math.abs(BJ.X-BI.X)<0.01&&Math.abs(BJ.Y-BI.Y)<0.01);}function AB(BJ){var BK=[];BK.push(BJ[0]);pcount=BJ.length;for(var BI=1;BI<pcount;BI++){if(BJ[BI-1].X==BJ[BI].X&&BJ[BI-1].Y==BJ[BI].Y){continue;}BK.push(BJ[BI]);}var BL=new Array();pcount=BK.length;for(var BI=0;BI<pcount;BI++){if(BI===pcount-1){if(BK[BI].X==BK[0].X&&BK[BI].Y==BK[0].Y){continue;}}BL.push(BK[BI]);}return BL;}function AU(BJ,BI,BM,BL){var BK=0.01;if(BL===false){BK=-0.01;}if(Math.abs(BI.X-BM.X)<0.01){if(BJ.Y-BI.Y>BK&&BM.Y-BJ.Y>BK){return true;}if(BJ.Y-BM.Y>BK&&BI.Y-BJ.Y>BK){return true;}}else{if(BJ.X-BI.X>BK&&BM.X-BJ.X>BK){return true;}if(BJ.X-BM.X>BK&&BI.X-BJ.X>BK){return true;}}return false;}function b(BS,BR,BP,BO,BN,BJ){var BK={X:BR.X-BS.X,Y:BR.Y-BS.Y};var BL={X:BO.X-BP.X,Y:BO.Y-BP.Y};if(Math.abs(S(BK,BL))<0.01){var BI={X:BP.X-BS.X,Y:BP.Y-BS.Y};if(Math.abs(S(BK,BI))<0.01){return{val:-1,interSection:BN};}else{return{val:0,interSection:BN};}}else{var BM={X:BS.X-BP.X,Y:BS.Y-BP.Y};var BQ=S(BL,BM)/S(BK,BL);BN.X=BS.X+BQ*BK.X;BN.Y=BS.Y+BQ*BK.Y;if(AU(BN,BS,BR,BJ)&&AU(BN,BP,BO,BJ)){return{val:1,interSection:BN};}else{return{val:2,interSection:BN};}}}function x(BR,BK,BM){var BJ=BK;while(BJ<0){BJ+=360;}while(BJ>=360){BJ-=360;}var BU=BR.X+BR.Width-BM.x;var BP=BM.y-BR.Y;var BW=BM.x-BR.X;var BN=BR.Y+BR.Height-BM.y;var BS=v(BJ);var BL={x:Math.cos(BS),y:-Math.sin(BS)};var BO;var BI;if(BJ>=0&&BJ<90){var BX={x:BU,y:-BP};var BT={x:-BW,y:BN};BO=O(BX,BL);BI=O(BT,BL);}else{if(BJ>=90&&BJ<180){var BY={x:-BW,y:-BP};var BV={x:BU,y:BN};BO=O(BY,BL);BI=O(BV,BL);}else{if(BJ>=180&&BJ<270){var BX={x:BU,y:-BP};var BT={x:-BW,y:BN};BO=O(BT,BL);BI=O(BX,BL);}else{var BY={x:-BW,y:-BP};var BV={x:BU,y:BN};BO=O(BV,BL);BI=O(BY,BL);}}}a.x=BM.x+BO*BL.x;a.y=BM.y+BO*BL.y;d.x=BM.x+BI*BL.x;d.y=BM.y+BI*BL.y;var BQ=-BI/(BO-BI);if(BQ<0){BQ=0;}else{if(BQ>1){BQ=1;}}return BQ;}function v(BI){return BI*Ab/180;}function q(BI){return BI*180/Ab;}function O(BJ,BI){return(BJ.x*BI.x+BJ.y*BI.y);}function AH(BJ,BI){return(BJ.X*BI.X+BJ.Y*BI.Y);}function S(BJ,BI){return(BJ.X*BI.Y-BJ.Y*BI.X);}function As(BK,Ba,BJ,BL){var BI=Ba.Gradient;var BW="RGBA("+Math.round(BL*BI.StartGraphColor.R)+", "+Math.round(BL*BI.StartGraphColor.G)+", "+Math.round(BL*BI.StartGraphColor.B)+", "+Ba.Alpha/255+")";var BU="RGBA("+Math.round(BL*BI.EndGraphColor.R)+", "+Math.round(BL*BI.EndGraphColor.G)+", "+Math.round(BL*BI.EndGraphColor.B)+", "+BI.EndAlpha/255+")";var BS;switch(BI.GradientType){case Z:if(BI.style==0){var Bc=BI.HorizontalOffset;if((BI.Angle>90&&BI.Angle<180)||BI.Angle>270){Bc=100-Bc;}var BY={x:BJ.X+BJ.Width*Bc/100,y:BJ.Y+BJ.Height*BI.VerticalOffset/100};d={x:0,y:0};a={x:0,y:0};var BM=x(BJ,BI.Angle,BY);BS=BK.createLinearGradient(d.x,d.y,a.x,a.y);BS.addColorStop(0,BU);BS.addColorStop(BM,BW);BS.addColorStop(1,BU);}else{var BP=BI.Angle==0;d={x:0,y:0};a={x:0,y:0};if(BP){d.x=BJ.X;a.x=BJ.X+BJ.Width;d.y=a.y=0;}else{d.y=BJ.Y;a.y=BJ.Y+BJ.Height;d.x=a.x=0;}BS=BK.createLinearGradient(d.x,d.y,a.x,a.y);BS.addColorStop(0,BW);var Bb=BI.IntermediateColors;for(var BZ=0;BZ<Bb.length;BZ++){var BV=Bb[BZ].Color;var BX="RGBA("+Math.round(BL*BV.mR)+", "+Math.round(BL*BV.mG)+", "+Math.round(BL*BV.mB)+", "+Ba.Alpha/255+")";BS.addColorStop(Bb[BZ].Step,BX);}BS.addColorStop(1,BU);}BK.fillStyle=BS;BK.fill();break;case I:var BY={x:BJ.X+BJ.Width*BI.HorizontalOffset/100,y:BJ.Y+BJ.Height*BI.VerticalOffset/100};var BQ=BJ.Width*1/BJ.Height;BY.y*=BQ;BS=BK.createRadialGradient(BY.x,BY.y,0,BY.x,BY.y,BJ.Width*2);BS.addColorStop(0,BW);BS.addColorStop(0.5,BU);BS.addColorStop(1,BU);BK.fillStyle=BS;BK.save();BK.scale(1,1/BQ);BK.fill();BK.restore();break;case AE:var BY={x:BJ.X+BJ.Width*BI.HorizontalOffset/100,y:BJ.Y+BJ.Height*BI.VerticalOffset/100};var BN=BI.Angle%90;var BR=q(Math.atan(BJ.Height/BJ.Width));var BO=2*BN-BR*BN/45+90+BR;d={x:0,y:0};a={x:0,y:0};var BM=x(BJ,BO,BY);var BT=BK.createLinearGradient(d.x,d.y,a.x,a.y);BW="RGBA("+Math.round(BL*BI.StartGraphColor.R)+", "+Math.round(BL*BI.StartGraphColor.G)+", "+Math.round(BL*BI.StartGraphColor.B)+", "+Ba.Alpha/(255*2-Ba.Alpha)+")";BU="RGBA("+Math.round(BL*BI.EndGraphColor.R)+", "+Math.round(BL*BI.EndGraphColor.G)+", "+Math.round(BL*BI.EndGraphColor.B)+", "+BI.EndAlpha/(255*2-BI.EndAlpha)+")";BT.addColorStop(0,BU);BT.addColorStop(BM,BW);BT.addColorStop(1,BU);BK.fillStyle=BT;BK.fill();BO=BR*BN/45+90-BR;BM=x(BJ,BO,BY);BS=BK.createLinearGradient(d.x,d.y,a.x,a.y);BW="RGBA("+Math.round(BL*BI.StartGraphColor.R)+", "+Math.round(BL*BI.StartGraphColor.G)+", "+Math.round(BL*BI.StartGraphColor.B)+", "+Ba.Alpha/(255*2)+")";BU="RGBA("+Math.round(BL*BI.EndGraphColor.R)+", "+Math.round(BL*BI.EndGraphColor.G)+", "+Math.round(BL*BI.EndGraphColor.B)+", "+BI.EndAlpha/(255*2)+")";BS.addColorStop(0,BU);BS.addColorStop(BM,BW);BS.addColorStop(1,BU);BK.fillStyle=BS;BK.fill();break;}}function Aj(BI,BK){var BJ=BK.Alpha/255;BI.fillStyle="rgba(255,255,255,"+BK.Alpha/255+")";BI.fill();}function AF(BJ){var BI=BJ.canvas;BJ.clearRect(0,0,BI.width,BI.height);}function Ag(BI){Ao=(new Date()).getTime();L(BI);}function L(BR){var BQ=BR.graphData,BS=BQ.UnitList,BT=BS.length,BL=BQ.FormatList,BW=BR.graphNode,BO=BR.highlightNode,BM=BO.getContext("2d"),BV=BR.selectionNode,BN=BV.getContext("2d"),BK=BW.getContext("2d");AF(BK);AF(BM);AF(BN);var BX=Math.min(((new Date()).getTime()-Ao)/z,1),BU=(1-BX),BP;var BI=0.3*BX*BU*BU+2.7*BU*BX*BX+BX*BX*BX;var BJ=0;for(BP=0;BP<BT;BP++){Am(BK,BI,BS[BP],BL);if(BS[BP].IsAnimated!==0){BJ=1;}}if(BX<1&&BJ===1){setTimeout(function(){L(BR);},20);}}mstrmojo.graph._CanvasGraph=mstrmojo.provide("mstrmojo.graph._CanvasGraph",{markupString:'<div class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><canvas id="{@id}" height="{@height}" width="{@width}">{@unsupportedError}</canvas>{@map}<canvas id="{@id}-highlight" class="mobile-graph-selection-canvas" height="{@height}" width="{@width}" style="position:absolute;top:0;left:0"></canvas><canvas id="{@id}-highlight" class="'+mstrmojo.GraphBase.canvasCLS+'" height="{@height}" width="{@width}" style="position:relative;top:0;left:0"></canvas></div>',unsupportedError:"This text is displayed if your browser does not support HTML5 Canvas element.",markupSlots:{graphNode:function(){return this.domNode.childNodes[1];},imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return null;},textNode:function(){return this.domNode.firstChild;},selectionNode:function(){return this.domNode.lastChild.previousSibling;},highlightNode:function(){return this.domNode.lastChild;}},graphData:null,retrieveGraphSrc:function BA(BL,BP){var BN=this.graphNode,BQ=this.highlightNode,BM=this.selectionNode,BO=this.graphData,BK=(BO&&BO.data);if(BK&&BK.eg){var BR=this.textNode,BJ=this.imgNode;BJ.style.display="none";BQ.style.display="none";BM.style.display="none";BR.innerHTML=BK.eg||"";BR.style.display="block";BR.className="mstrmojo-message";}else{var BS=BO.GH||parseInt(BL,10),BI=BO.GW||parseInt(BP,10);BN.setAttribute("height",BS);BN.setAttribute("width",BI);BQ.style.display="block";BQ.setAttribute("height",BS);BQ.setAttribute("width",BI);BQ.style.top=-BS+"px";BM.style.display="block";BM.setAttribute("height",BS);BM.setAttribute("width",BI);this.displayTooltips([],0,0);Ag(this);if(BO.Selected){this.highlightAreaInInit(BM,BO.Selected);}}},unrender:function AN(BI){this._super(false);},invalidate:function K(){var BI=this.graphNode;if(BI){AF(BI.getContext("2d"));}},getCaptureDimensions:function AX(){var BJ=this.graphNode,BI=mstrmojo.dom.position(this.domNode,true);BI.w=BJ.width;BI.h=BJ.height;return BI;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo.css","mstrmojo.Pulldown","mstrmojo.ProgressBar");var N=mstrmojo.dom,Q=mstrmojo.css,R="disabled",C=-1;function O(){var V=this.selected,T=this.panels.length,W=this.getValidPanelsNum(V),U=this.getValidPanelsNum(T);if(W===U-1){Q.addClass(this.nextBtnNode,R);}else{Q.removeClass(this.nextBtnNode,R);}if(W===0){Q.addClass(this.prevBtnNode,R);}else{Q.removeClass(this.prevBtnNode,R);}}mstrmojo.PageNavigationPanel=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.PageNavigationPanel",markupString:'<div class="mstrmojo-PageNavPanel {@cssClass}" style="{@cssText}" mstrAttach:click><div class="header"><div class="titles"><div class="title">{@title}</div><div class="subtitle">{@subtitle}</div></div><div class="progress"></div><div class="navigation"></div></div><div class="content"></div><div class="footer"><div class="prev"><div class="btn" btnv="pre">{@prevText}</div></div><div class="pges"></div><div class="next"><div class="btn" btnv="nxt">{@nextText}</div></div></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},progressBarNode:function(){return this.domNode.firstChild.childNodes[1];},navigationNode:function(){return this.domNode.firstChild.childNodes[2];},containerNode:function(){return this.domNode.childNodes[1];},footerNode:function(){return this.domNode.lastChild;},prevBtnNode:function(){return this.domNode.lastChild.firstChild;},pagesNode:function(){return this.domNode.lastChild.childNodes[1];},nextBtnNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{onsubtitleChange:function(){this.headerNode.firstChild.lastChild.innerHTML=this.subtitle||"";},onheaderVisibleChange:function(){this.headerNode.style.display=this.headerVisible?"":"none";},ontitleVisibleChange:function(){this.headerNode.firstChild.style.display=this.titleVisible?"":"none";},onsubtitleVisibleChange:function(){this.headerNode.lastChild.style.display=this.subtitleVisible?"":"none";},onheightChange:function(){var U=this.headerHeight,T=this.footerHeight;if(this.height){if(!U||!T){U=this.headerHeight=this.headerNode.offsetHeight||0;T=this.headerHeight=this.footerNode.offsetHeight||0;}this.containerNode.style.height=(parseInt(this.height,10)-U-T)+"px";}}},title:"",subtitle:"",prevText:"Prev",nextText:"Next",selected:0,headerVisible:true,titleVisible:true,subtitleVisible:true,panels:null,renderedPanels:0,init:function M(T){this.panels=[];this._super(T);},onselectedChange:function K(){var V=this.selected,T=this._lastSelected,W=this.panels[V],U=this.panels[T];if(U){U.set("visible",false);}if(W){W.set("visible",true);}this.set("subtitle",W.title);this._lastSelected=this.selected;O.call(this);if(this.navlst){this.navlst.set("value",V);}this.updatePageNode();},onrenderedPanelsChange:function J(){var T=this.panels.length,U=this.renderedPanels;if(T>0){this.updateProgressNode(Math.floor(100*U/T));}else{this.updateProgressNode(0);}},updateProgressNode:function E(T){if(this.prgbar){this.prgbar.updateProgress(T,T+"% completed");}},updatePageNode:function A(){this.pagesNode.innerHTML=(this.getValidPanelsNum(this.selected)+1)+"/"+this.getValidPanelsNum(this.panels.length);},getValidPanelsNum:function D(X){var W=0,U=this.panels||[];for(var V=0,T=U.length;V<T;V++){if(V===X){return W;}if(!U[V].isHide){W++;}}return W;},getNextValidPanel:function H(W){var U=this.panels||[];for(var V=W+1,T=U.length;V<T;V++){if(!U[V].isHide){return V;}}return C;},getPreValidPanel:function F(V){var T=this.panels||[];for(var U=V-1;U>=0;U--){if(!T[U].isHide){return U;}}return C;},showNextPanel:function I(){var U=this.selected,V=this.panels[U],T=this.getNextValidPanel(U);if(T===C){return ;}if(!V.viewed){V.viewed=true;this.set("renderedPanels",this.renderedPanels+1);}this.set("selected",T);},showPreviousPanel:function L(){var T=this.selected,V=this.panels[T],U=this.getPreValidPanel(T);if(U===C){return ;}if(!V.viewed){V.viewed=true;this.set("renderedPanels",this.renderedPanels+1);}this.set("selected",U);},update:function G(W){var V=this.panels,T=V.length,X=this.navlst,U;if(W>=T){return ;}U=this.panels[W];this.updatePageNode();O.call(this);X.items[W].css=(!U.isHide)?"enabled":"disabled";},preBuildRendering:function B(){var U,T,Z=this.panels||[],Y=[],X=0,V=this;if(Z.length>0){for(U=0,T=Z.length;U<T;U++){if(U!==this.selected){Z[U].visible=false;}else{X=U;}Y.push({n:Z[U].title,v:U,css:(X===U)?"enabled":"disabled"});}this.set("children",[{scriptClass:"mstrmojo.ProgressBar",alias:"prgbar",slot:"progressBarNode"},{scriptClass:"mstrmojo.Pulldown",alias:"navlst",slot:"navigationNode",items:Y,itemIdField:"v",defaultSelection:X,onvalueChange:function a(){var b=V.panels,c=b[V._lastSelected];V.set("selected",this.value);this.items[this.value].css="enabled";if(!c.viewed){c.viewed=true;V.set("renderedPanels",V.renderedPanels+1);}},prevalueChange:function W(){var b=V.panels;if(!b[this.value].viewed||b[this.value].isHide){this.value=V._lastSelected;}}}].concat(Z));this.set("subtitle",Z[0].title);this._lastSelected=this.selected;}this._super();},postBuildRendering:function P(){this._super();this.updateProgressNode(0);this.updatePageNode();O.call(this);},onclick:function S(Z){var X=N.eventTarget(window,Z.e),U=X.getAttribute("btnv"),Y=this.selected,V=this.panels,T=V.length,a=this.getValidPanelsNum(Y),W=this.getValidPanelsNum(T);if(U){if(U==="pre"&&a>0){this.showPreviousPanel();}else{if(U==="nxt"&&a<W-1){this.showNextPanel();}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.graph._CanvasGraph");function B(){var D=document.createElement("canvas");D.width=10;D.height=10;return D;}mstrmojo.gm.VecDrawer=mstrmojo.declare(mstrmojo.Base,[mstrmojo.graph._CanvasGraph],{scriptClass:"mstrmojo.gm.VecDrawer",init:function C(D){this._super(D);this.selectionNode=B();this.highlightNode=B();},displayTooltips:function A(){}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.Widget","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo._HasOwnAvatar");var B=mstrmojo,G=B.dom,D=B.css,F=B.VisUtility,E=B.gm.EnumDockPosition,H=B.VisEnum.ControlType,C=3;mstrmojo.VisSplitter=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.VisSplitter",cssClass:"gm-matrix-line",bodyCssClass:"gm-matrix-line-body",ctnType:H.LINE_CONTAINER,dir:"h",draggable:true,markControlType:false,markupString:'<div id="{@id}" class="{@cssClass}" type={@ctnType} style="width:{@bodyWidth}px; height:{@bodyWidth}px;"><div class="{@bodyCssClass}" type={@type} style="width:{@width}px; height:{@height}px;"></div></div>',markupSlots:{domBody:function(){return this.domNode.firstChild;}},init:function(I){this._super(I);},preBuildRendering:function(){var K=this.dir,M=this.styles,I=this.draggable,J=this.cssClass,L=this.bodyCssClass;J+=" "+K;J+=(I?" draggable":"");this.cssClass=J;L+=" "+K;L+=(I?" draggable":"");this.bodyCssClass=L;this.bodyWidth=parseInt(M.borderWidth,10)||1;},postBuildRendering:function(){this.domNode.identity=this.identity;this.domBody.identity=this.identity;F.applyStyles2DomNode(this.domBody,this.styles);if(this.markControlType){this.domNode.setAttribute("ctrlType",this.context.type);this.domBody.setAttribute("ctrlType",this.context.type);}},hide:function(){this.domNode.style.display="none";},updateSize:function(I){this.sizeInfo=I;},updateStyle:function(K){var J=this.domNode.style,I=parseInt(K.borderWidth,10)||1;this.styles=K;J.width=I+"px";J.height=I+"px";F.applyStyles2DomNode(this.domBody,K);},updatePosition:function(P){var O=P.left,N=P.top,M=P.width,I=P.height,K=this.dir,L=this.domNode.style,J=this.domBody.style;if(O!==undefined){if(K==="v"){O-=C;}L.left=O+"px";}if(N!==undefined){if(K==="h"){N-=C;}L.top=N+"px";}if(M!==undefined){L.width=M+"px";J.width=M+"px";}if(I!==undefined){L.height=I+"px";J.height=I+"px";}L.display="block";},createAvatar:function(){var J=this.domBody,M=G.position(J),I=J.cloneNode(true),K=I.style,L=D.getStyleValue(J,"borderColor");K.top=M.y+"px";K.left=M.x+"px";K.borderColor=L;return I;},isDragValid:function A(){return true;},ondragstart:function(P){var J,O,N=P.src.pos,L=this.context.dock,K=this.sizeInfo,M=Math.max(K.size-K.min,0),Q=Math.max(K.max-K.size,0),I=(this.dir==="v"?"x":"y");if(L===E.RIGHT||L===E.BOTTOM){J=N[I]-M;O=N[I]+Q;}else{J=N[I]-Q;O=N[I]+M;}this.lower=J;this.upper=O;this.startPos=P.src.pos;this._super(P);},ondragend:function(Q){this._super(Q);var O,J=this.dir,L=this.startPos,I=Q.tgt.pos,K=this.lower,P=this.upper,N=I.x,M=I.y;if(J==="v"){N=Math.max(N,K);N=Math.min(N,P);O=N-L.x;}else{M=Math.max(M,K);M=Math.min(M,P);O=M-L.y;}if(O!==0){this.raiseEvent({name:"splitterMoved",position:O,info:this.context});}},positionAvatar:function(P){var L=this.avatar,N=L.style,K=this.dir,J=this.lower,M=this.upper,I=P.x,O=P.y;if(K==="v"){I=Math.max(I,J);I=Math.min(I,M);N.left=I+"px";}else{O=Math.max(O,J);O=Math.min(O,M);N.top=O+"px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.Widget","mstrmojo.VisUtility");var M=mstrmojo,R=M.css,O=M.hash,H=M.VisUtility,D=M.dom,A=M.string,C=M.VisEnum.ControlType,K=5,Q=15,G=1,L=5,E=8,S=0,F=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values");function I(){var U,W,T=0,V=this.styles,Y=this.contentData,X=Y.length;if(D.isFF){this.DOTS_WIDTH=H.measureTextWidth("W…",V,2*E+2*G);this.DOTS_WIDTH_NO_PADDING=H.measureTextWidth("W…",V,2*G);}else{this.DOTS_WIDTH=H.measureTextWidth("…",V,2*E+2*G);this.DOTS_WIDTH_NO_PADDING=H.measureTextWidth("…",V,2*G);}for(U=0;U<X;U++){W=Y[U];W.width=H.measureTextWidth(W.text,V,2*E+2*G);if(W.sort){T++;}if(W.extraAttributes.customScale){T++;}}this.nSort=T;}function J(){var c,e,b,X=false,d=this.contentData,W=d.length,Z=W,U=parseInt(this.width,10),a=(W-1)*K,Y=this.nSort*Q,T=a+Y,f,V;for(c=0;c<W;c++){delete d[c].actualWidth;}while(!X){while(Z>0){f=Math.floor((U-T)/Z);b=false;for(c=0;c<W;c++){if(d[c].actualWidth!==undefined){continue;}e=d[c].width;if(e<=f){d[c].actualWidth=e;T+=e;b=true;Z--;}}if(!b){break;}}if(Z>0){for(c=W-1;c>=0;c--){if(d[c].actualWidth===undefined){Z--;if(f<this.DOTS_WIDTH_NO_PADDING){d[c].actualWidth=-1;V=0;if(d[c].sort){V++;}if(d[c].extraAttributes.customScale){V++;}if(c>0){T-=K;}T-=V*Q;break;}else{if(f<=this.DOTS_WIDTH){d[c].noPadding=true;}}d[c].actualWidth=f;T+=f;}}if(c===0||Z===0){X=true;}}else{X=true;}}this.contentWidth=T;}function N(){var W=parseInt(this.width,10),b=parseInt(this.height,10),U=this.contentWidth,a=(W-b)>>1,V=(U-b-2*S)>>1,T=(W-U)>>1,Y=this.align,X=this.domNode,Z={};if(Y==="left"||Y==="right"){R.addClass(X,"gm-rotate-270");if(U<W){Z.width=U;}Z.top=a;if(Y==="left"){Z.left=-V;}else{Z.right=-V;}}else{if(Y==="top"||Y==="bottom"){if(U<W){Z.width=U;Z.left=T;}}else{if(Y==="center"){if(U<=W){Z.width=U;Z.right=0;Z.bottom=0;}}}}H.positionDomNode(X,Z);}function B(V,T,U){if(V==="left"||V==="right"){return T?mstrmojo.desc(16180,"This row is sorted ascendingly based on ##").replace("##",U):mstrmojo.desc(16181,"This row is sorted descendingly based on ##").replace("##",U);}else{return T?mstrmojo.desc(16182,"This column is sorted ascendingly based on ##").replace("##",U):mstrmojo.desc(16183,"This column is sorted descendingly based on ##").replace("##",U);}}function P(){var f,p,d,b,g,X,Y,T,k,l,c,o=document,U=o.createDocumentFragment(),h=this.domNode,W=this.styles,j=this.contentData,e=this.align,a=j.length,Z=parseInt(this.height,10),V=0;for(f=0;f<a;f++){b=j[f];if(b.actualWidth<0){continue;}X=b.text;g=b.extraAttributes;c=g.sortOrder;if(e==="left"||e==="right"){if(g.customScale){Y=o.createElement("div");Y.setAttribute("class","gm-lock-icon");Y.setAttribute("title",F);Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}if(g.sort){Y=o.createElement("div");Y.setAttribute("class",c?"gm-sort-icon ascend":"gm-sort-icon");Y.setAttribute("title",B(e,c,X));Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}}k=o.createElement("div");k.setAttribute("class","gm-text-body-nowrap");k.setAttribute("type",C.GM_TEXT_BODY);k.innerHTML=A.encodeHtmlString(X,true);k.container=h;k.style.width=b.actualWidth-2*G+"px";k.style.height=Z-2*G+"px";if(!b.noPadding){k.style.padding=L+"px "+E+"px";}else{k.style.padding="0px";k.innerHTML="…";}H.applyStyles2DomNode(k,W);if(e==="left"||e==="right"){k.rotated=true;}T=o.createElement("div");T.setAttribute("class","gm-textbody-unit");T.appendChild(k);if(b.actualWidth<b.width){k.setAttribute("title",X);}else{k.style.overflow="visible";}T.style.left=V+"px";T.style.width=b.actualWidth-2*G+"px";T.style.height=Z-2*G+"px";U.appendChild(T);for(p in g){if(g.hasOwnProperty(p)){d=g[p];if((typeof d)==="string"||(typeof d)==="number"){T.setAttribute(p,String(d));}else{T[p]=g[p];}}}V+=b.actualWidth;if(e!=="left"&&e!=="right"){if(g.customScale){Y=o.createElement("div");Y.setAttribute("class","gm-lock-icon");Y.setAttribute("title",F);Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}if(g.sort){Y=o.createElement("div");Y.setAttribute("class",c?"gm-sort-icon ascend":"gm-sort-icon");Y.setAttribute("title",B(e,c,X));Y.style.left=V+"px";Y.style.top=((Z-Q)>>1)+"px";U.appendChild(Y);V+=Q;}}if(f!==a-1&&j[f+1].actualWidth>0){l=o.createElement("div");l.setAttribute("class","gm-text-body-nowrap");l.innerHTML="|";l.style.left=V-2+2+"px";l.style.width=K+"px";l.style.padding="5px 2px";l.style.overflow="visible";H.applyStyles2DomNode(l,W);U.appendChild(l);V+=K;}}h.appendChild(U);}mstrmojo.VisAxisLabel=mstrmojo.declare(mstrmojo.Widget,[],{scriptClass:"mstrmojo.VisAxisLabel",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}; height:{@height}"></div>',init:function(T){this.align="left";this.styles={};this.contentData=[];this.contentWidth=0;if(this._super){this._super(T);}I.call(this);},postBuildRendering:function(){J.call(this);N.call(this);P.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var N=mstrmojo.gm.EnumTRFManipulations;var J=mstrmojo.array,C=mstrmojo.hash,M=mstrmojo.func.wrapMethods,G=mstrmojo.func.composite,I=mstrmojo.VisEnum.GMLegendFormatingPropertyTag;var D={silent:false,undo:mstrmojo.emptyFn,redo:mstrmojo.emptyFn};function K(O){return O.model.controller.cmdMgr;}function L(){return(this.getDocModel&&this.getDocModel())||this.model.docModel;}function H(){return{success:function O(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function E(P,R){var O,U,Q,S,T={};T.tks=this.k;T.selectorObjects=P;T.keepOnly=!!R;T.isDocVis=true;O=L.call(this);U=O.getDataService();Q=U.getGMViewFilterAction(T);S=O.getSliceCallback(T);return{action:Q,callbacks:S};}function B(Q,P){var O,S,R;O=L.call(this);R=O.getDataService();if(!this.isXMLDirty()){R.submitUpdates(Q,P);}else{S=this.getPersistAction();R.submitUpdates([Q,S],P);this.resetXMLDirtyFlag();}}function A(){var b=this.modelData||this.model.data,S=b.k,Z,Y="FormattingWidget",U,T,X,P,Q,R=[],W=[],V=this.edtModel;if(!b){console.log("warning: modelData is missing");return null;}var a=function(d,f){var c=T.createElement(f),e;if(d instanceof Object){for(e in d){if(d.hasOwnProperty(e)){var g=a(d[e],e);if(g){c.appendChild(g);}}}}else{c.setAttribute("value",d);}return c;};var O=function(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;");};X=this.createWidgetPropsXML?this.createWidgetPropsXML():null;if(!X||X.length===0){U=this.getProperties(S);if(this.useCompatibleXML){T=(new DOMParser()).parseFromString("<widgetProps></widgetProps>","text/xml");T.firstChild.appendChild(a(U,"fmt"));}else{T=(new DOMParser()).parseFromString("<props><widgetProps></widgetProps></props>","text/xml");T.firstChild.firstChild.appendChild(a(U,"fmt"));}X=(new XMLSerializer()).serializeToString(T);}P=O(X);Q={act:"setProperty",nodeKey:S,prs:Y,pri:4,v:P};R.push(Q);return R;}function F(P,Q,O,T){if(!(T instanceof Function)){return D;}var S=this.id;function R(U){return function(){var W=mstrmojo.all[S],V;if(!W){return ;}V=W.getProperties();V[P]=U;T.call(W,U,true);W.getDocModel().selectVIUnit(W.parent.id,true);};}return{silent:true,undo:R(O),redo:R(Q)};}mstrmojo._VizSelectionHelper=mstrmojo.provide("mstrmojo._VizSelectionHelper",{postBuilderingCalled:false,listenToUpdateColorMap:function(R){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var Q=this,P,O=(Q.getDocModel&&Q.getDocModel())||Q.model.docModel;if(O){return O.attachEventListener("colorMapChanged",Q.id,function(T){P=Q.parent&&Q.parent.parent;if(Q.forceUpdateColorMap||(P&&P.isPanelDisplaying())){R.call(Q);}else{var S=P.attachEventListener("panelDisplaying",Q.id,function(U){if(Q.postBuilderingCalled){R.call(Q);}P.detachEventListener(S);});}});}},detachUpdateColorMapListener:function(P){if(!P){return ;}var O=(this.getDocModel&&this.getDocModel())||this.model.docModel;O.detachEventListener(P);},updateTargets:function(P){var S={},Q=this,O=L.call(this);S.fromGM=true;S.type=1;S.src=this.k;S.selectorObjects=P;function R(V){var T=Q.modelData||Q.model.data,U=T.sc;if(U!==undefined){return U[V];}return undefined;}S.keepOnly=true;S.ck=R.call(this,"ck");S.keyContext=S.ck;S.tks=R.call(this,"tks");S.ckey=R.call(this,"ckey");S.isDocVis=true;S.include=true;S.showall=R.call(this,"showall");O.slice(S);},updateAfterViewFilter:function(Q,O){var V,U,P,T,S,W,R;V=L.call(this);U=V.getDataService();T=E.call(this,Q,O);P=T.action;S=T.callbacks;R=this.model.controller||V.controller;if(this.currKeepOnlyAction){W=[C.clone(this.currKeepOnlyAction)];}else{W=E.call(this,[],false).action;}this.currKeepOnlyAction=P;R.submitUndoRedoUpdates([P],W,S);},updateAfterKeepOnly:function(Q){var P=L.call(this),O=this.model.controller||P.controller,R=M(O._getXtabCallback(this),H.call(this));O.applyKeepOnly(this,R,{keepOnly:Q,data:this.getContextMenuSelections()},Q?-2:undefined);},updateAfterKeepOnlyForMultiTemplate:function(Q){var P=L.call(this),O=this.model.controller||P.controller,R=M(O._getXtabCallback(this),H.call(this));O.applyKeepOnlyForMutilTemplate(Q,R,true);},updateAfterDrill:function(O,c,Y){var Z=this,d=L.call(this),b=d.getDataService(),T=b.newUpdate(),R=this.getContextMenuSelections(),P=Y||this,S=P.model,U=P.model.data||P.node.data,X=S.getSelectorDataFromTemplateLimit(U.tpl).concat({keepOnly:true,data:R}),Q=d.getKeepOnlyOrExcludeAction(U.k,X),V=Z.model.controller||d.controller,W=V._getXtabCallback(Z);T.add(O,M(c,W));T.add(Q,H.call(Z));K(Z).execute({execute:function a(){this.submitUpdate(T);},urInfo:{callback:T.callback}});},updateAfterSort:function(R){var P=this,O=L.call(this),S=O.getDataService(),T=O.getSliceCallback({tks:P.k});K(P).execute({execute:function Q(){var V=S.newUpdate(this,undefined),U={act:"sortGM",nodeKey:P.k,subActions:R,partialUpdate:{nodes:[P.k]}};V.add(U,T,undefined);if(P.isXMLDirty()){V.addActions(P.getPersistAction());}this.submitUpdate(V,undefined);},urInfo:{callback:T}});},updateAfterAction:function(T,O,P,a,X){if(!T){return ;}var V=this,Q=V.parent&&V.parent.id,b=V.model.docModel,U=V.model.controller||b.controller,Z,Y,S={},W,R=X||D;if(P){Z=mstrmojo.emptyFn;W=function(){this.submitSilent(T);};}else{Z=b.getSliceCallback({tks:this.k});Z.success=G([Z.success,function(){b.selectVIUnit(Q,true);}]);W=function(){this.submit(T,Z,S);};}Y=U._getXtabCallback(V);if(O){Z=M(Z,O);Y=M(Y,O);}Y.success=G([Y.success,function(){b.selectVIUnit(Q,true);}]);if(P){C.copy(mstrmojo.DocDataService.SUPPRESS_DATA,S);}if(a){C.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,S);}K(this).execute({execute:W,urInfo:{silent:R.silent,callback:Y,redo:R.redo,undo:R.undo}});},getProperties:mstrmojo.emptyFn,getSetPropertiesAction:A,updateAfterPropertiesChange:function(P,Q,O,R){this.updateAfterAction(A.call(this),P,Q,O,R);},setProperty:function(V,R,T){var P=T.callback,Q=!!T.suppressData,X=T.requestDefinition,S=T.clientUndoRedoCallback,W=this.getProperties(),O=W[V],U;if(V===I.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorMap(this.colorSqureIdentity.comb,R);}}else{if(W&&(W[V]===undefined||W[V].toString()!==R.toString())){W[V]=R;U=F.call(this,V,R,O,S);this.updateAfterPropertiesChange(P,Q,X,U);}}},showData:function(O){if(!this.gridData){this.gridData=this.model.data;}mstrmojo.vi.ui.ViewDataDialog.open(this.parent,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle","EnumFontAlignment","EnumFontStyle","EnumFontRotation");var M=mstrmojo.chart,J=M.enums,H=J.EnumBoxStyle,D=J.EnumFontAlignment,R=J.EnumFontStyle,T=J.EnumFontRotation,I=M.common.Utility,N=1,S=3;var B=["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize"],F=[D.FA_CENTER,R.FS_NORMAL,T.FR_NORMAL,H.BS_NOFRAME,null,255,"Verdana",15];mstrmojo.chart.FormatFont=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFont",mFontAlignment:D.FA_CENTER,mFontStyle:R.FS_NORMAL,mFontRotation:T.FR_NORMAL,mFontBox:H.BS_NOFRAME,mFontColor:null,mFontAlpha:255,mFontName:null,mFontSize:15,init:function L(X){var W,V=B.length;this._super(X);if(X&&X.Font){var U=X.Font;mstrmojo.hash.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontAlpha","mFontName","mFontSize"],U,this);this.mFontColor=U.mFontColor;}else{if(X&&X.Bare){for(W=0;W<V;++W){this[B[W]]=null;}}}if(!this.mFontColor&&!(X&&X.Bare)){this.mFontColor=M.gBlack.ToInteger();}this.mFontName=this.mFontName||"Verdana";},ApplyFontFormat:function K(V,U){if(this.mFontSize<S){this.mFontSize=S;}if(!U){V.applyFontFormat(this);}},GetFontExtent:function A(){return Math.floor(this.mFontSize<S?S:this.mFontSize*N);},GetStringExtent:function O(V){var W,U,X;this.ApplyFontFormat(null,true);X=I.measureText(V,this.mFontName,this.mFontSize,this.mFontStyle);W=X.Width;U=X.Height;return{Width:W,Height:U};},GetStringHeight:function P(U){this.ApplyFontFormat(null,true);return I.measureTextHeight(U,this.mFontName,this.mFontSize,this.mFontStyle);},isVertical:function E(){var U=this.mFontRotation;return U===T.FR_90||U===T.FR_270;},isHorizontal:function C(){var U=this.mFontRotation;return U===T.FR_NORMAL||U===T.FR_180;},evalMargins:function Q(){return I.evaluateTextMargin(this.mFontSize);},restoreDefaults:function G(V){var U;if(V){for(U=0;U<B.length;++U){this[B[U]]=F[U];}}else{for(U=0;U<B.length;++U){if(this[B[U]]===null){this[B[U]]=F[U];}}}if(this.mFontColor===null){this.mFontColor=M.gBlack.ToInteger();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Vis","mstrmojo._HasOwnAvatar");var K=mstrmojo.css,I=mstrmojo.dom,F="px";function B(Q,P){return{x:Q.x-P.x,y:Q.y-P.y};}function M(Q,P){return(Q.x-P.x)*(Q.x-P.x)+(Q.y-P.y)*(Q.y-P.y);}function N(P){var Q=P.src.data;return(!Q||!Q.isScrollBar);}mstrmojo.VisLegend=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.gm.VisLegend",bodyCssClass:"",avatarCssClass:"legend-dragged",dropZoneHighlightCss:"legend-dropZone",ownAvatar:true,draggable:true,dropZone:true,dockedPositions:null,calculateDockedPositions:mstrmojo.emptyFn,widget:null,boundaryNode:null,draggableNodeName:"domLegend",legendMarkup:"",extrasMarkup:"",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:absolute;" mstrAttach:click,mouseover,mouseout><div class="gm-legend-bg"><div class="{@bodyCssClass}" style="width:{@width}px;height:{@height}px;text-decoration:inherit">{@legendMarkup}</div></div><div class="gm-anchor-point topLeft"></div><div class="gm-anchor-point topRight"></div><div class="gm-anchor-point bottomLeft"></div><div class="gm-anchor-point bottomRight"></div>{@extrasMarkup}</div>',markupSlots:{dropZoneNode:function(){return this.domNode;},domLegend:function(){return this.domNode.firstChild.firstChild;}},postBuildRendering:function(){this._super();this.calculateDockedPositions(this.widget.getWidth(),this.widget.getHeight());this.boundaryNode=this.widget.domNode;this.boundaryPosition=I.position(this.boundaryNode,true);},createAvatar:function D(){return this[this.draggableNodeName];},updateDropZoneNode:function C(R){var P=this.dockedPositions;if(P&&P.length>0){var W=B(R.tgt.pos,this.boundaryPosition);var U=M(W,P[0]),T=0,Q,V;for(Q=1;Q<P.length;Q++){V=M(W,P[Q]);if(V<U){U=V;T=Q;}}if(T!==this.currDockedPositionIdx){var S=this.dropZoneNode.style;S.left=P[T].x+F;S.top=P[T].y+F;if(this.widget.onLegendDropZoneChange){this.widget.onLegendDropZoneChange(P[T],T);}this.currDockedPositionIdx=T;this.updateAlignClass();return true;}}return false;},toggleDropZoneBorder:function O(P){K.toggleClass(this.dropZoneNode,this.dropZoneHighlightCss,P);},isDragValid:N,ondragstart:function E(P){if(!N(P)){return ;}this._super(P);this.toggleDropZoneBorder(true);},ondragmove:function A(P){if(!N(P)){return ;}this.updateDropZoneNode(P);this._super(P);},allowDrop:function H(P){var R=P.src,Q=R&&R.widget;return(Q&&Q!==this&&Q.parent===this.parent);},ondrop:function J(R){var P=this.domLegend;K.removeClass(P,this.avatarCssClass);var S=P.style;S.left="0";S.top="0";this.dropZoneNode.firstChild.appendChild(P);if(this.widget.onLegendDropped){var Q=this.getDockedPosition();this.widget.onLegendDropped(Q&&Q.pos);}R.dropSuccessful=true;},getDockedPosition:function G(){return this.dockedPositions&&this.dockedPositions[this.currDockedPositionIdx];},ondragend:function A(P){if(!N(P)){return ;}this._super(P);if(!P.dropSuccessful){this.ondrop(P);}this.toggleDropZoneBorder(false);},positionAvatar:function L(U){var R=this,Q=this.avatar,S=Q.style,T=this.boundaryPosition;var P=function(V,W){if(V==="x"){if(W<T.x){return T.x;}return Math.min(W,T.x+T.w-R.domNode.offsetWidth);}if(V==="y"){if(W<T.y){return T.y;}return Math.min(W,T.y+T.h-R.domNode.offsetHeight);}};S.left=P("x",U.x)+F;S.top=P("y",U.y)+F;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill","JSONInstruction","JSONUtil","JSONUnit","JSONFormatFill","JSONFormatFont","JSONFormatLine");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.enums.EnumInstructionName");var d=mstrmojo.chart,L=mstrmojo.chart.enums,x=L.EnumInstructionName,t=d.JSONUtil.prototype,N=mstrmojo.hash;function F(AE,AD){return AE.mpOriginalAddress-AD.mpOriginalAddress;}function X(AE,AD){if(AE===undefined){AE=x.JSONInsUndefined;}if(AD===undefined){AD=null;}else{AD=AD.id;}if(this.mpCurrentUnit===null){this.mpCurrentUnit=new d.JSONUnit();this.mUnitList.push(this.mpCurrentUnit);}return this.mpCurrentUnit.AddInstruction(AE,AD);}function U(AF){var AD=this.mFormatMap,AE=AF.id;if(AF instanceof d.FormatFill){if(AD[AE]===undefined){AD[AE]=new d.JSONFormatFill(AF);}}else{if(AF instanceof d.FormatFont){if(AD[AE]===undefined){AD[AE]=new d.JSONFormatFont(AF);}}else{if(AF instanceof d.FormatLine){if(AD[AE]===undefined){AD[AE]=new d.JSONFormatLine(AF);}}}}}mstrmojo.chart.JSONCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.JSONCanvas",mIsJSONObjectConstructed:false,mpCurrentUnit:null,mUnitList:null,mFormatMap:null,mFormatList:null,mJSONObject:null,init:function v(AD){this._super(AD);this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};},reset:function q(){this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};this.mIsJSONObjectConstructed=false;this.mpCurrentUnit=null;},SaveToObject:function o(AE){var AD;if(!this.mIsJSONObjectConstructed){this.hConstructJSONObject();}for(AD in this.mJSONObject){AE[AD]=this.mJSONObject[AD];}return true;},saveState:function r(){X.call(this,x.JSONInsSaveState);},RestoreState:function W(){X.call(this,x.JSONInsRestoreState);},Clip:function h(){X.call(this,x.JSONInsClip);},Scale:function Q(AD,AF){var AE=X.call(this,x.JSONInsScale);AE.AppendToParameterList("X",AD);AE.AppendToParameterList("Y",AF);},Rotate:function T(AD,AF){var AE=X.call(this,x.JSONInsRotate);AE.AppendToParameterList("Anchor",AD);AE.AppendToParameterList("Radian",AF);},NewPath:function S(){X.call(this,x.JSONInsNewPath);},ClosePath:function l(){X.call(this,x.JSONInsClosePath);},MoveTo:function c(AD,AH,AF,AG){var AE=X.call(this,x.JSONInsMoveTo);AE.AppendToParameterList("X",AD);AE.AppendToParameterList("Y",AH);if(AF){AE.AppendToParameterList("CA",1);AE.AppendToParameterList("BPX",AG.x);AE.AppendToParameterList("BPY",AG.y);}else{AE.AppendToParameterList("CA",0);}},LineTo:function P(AD,AH,AF,AG){var AE;AE=X.call(this,x.JSONInsLineTo);AE.AppendToParameterList("X",AD);AE.AppendToParameterList("Y",AH);if(AF){AE.AppendToParameterList("CA",1);AE.AppendToParameterList("BPX",AG.x);AE.AppendToParameterList("BPY",AG.y);}else{AE.AppendToParameterList("CA",0);}},BezierCurveTo:function K(AG,AF,AJ,AH,AD,AI){var AE;AE=X.call(this,x.JSONInsBezierCurveTo);AE.AppendToParameterList("CP1X",AG);AE.AppendToParameterList("CP1Y",AF);AE.AppendToParameterList("CP2X",AJ);AE.AppendToParameterList("CP2Y",AH);AE.AppendToParameterList("X",AD);AE.AppendToParameterList("Y",AI);},SetRGBAFillColor:function f(AH,AF,AD,AG){var AE;AE=X.call(this,x.JSONInsSetRGBAFillColor);AE.AppendToParameterList("R",this.BoundedValue(AH*256,0,255));AE.AppendToParameterList("G",this.BoundedValue(AF*256,0,255));AE.AppendToParameterList("B",this.BoundedValue(AD*256,0,255));AE.AppendToParameterList("A",this.BoundedValue(AG,0,1));},BoundedValue:function V(AF,AE,AD){if(AF<AE){return AE;}if(AF>AD){return AD;}return AF;},SetRGBAStrokeColor:function y(AH,AF,AD,AG){var AE;AE=X.call(this,x.JSONInsSetRGBAStrokeColor);AE.AppendToParameterList("R",this.BoundedValue(AH*256,0,255));AE.AppendToParameterList("G",this.BoundedValue(AF*256,0,255));AE.AppendToParameterList("B",this.BoundedValue(AD*256,0,255));AE.AppendToParameterList("A",this.BoundedValue(AG,0,1));},FillPath:function j(){X.call(this,x.JSONInsFillPath);},StrokePath:function H(){X.call(this,x.JSONInsStrokePath);},SetLineDash:function E(AF,AE){var AD=X.call(this,x.JSONInsSetLineDash);AD.AppendArrayToParameterList("LinePattern",AF,AE);},SetLineWidth:function n(AD){var AE=X.call(this,x.JSONInsSetLineWidth);AE.AppendToParameterList("LineWidth",AD);},SetLineJoin:function I(AE){var AD=X.call(this,x.JSONInsSetLineJoin);AD.AppendToParameterList("Type",AE);},SetFontSize:function Z(AE){var AD=X.call(this,x.JSONInsSetFontSize);AD.AppendToParameterList("FontSize",AE);},AddRect:function u(AE,AH,AG,AD){var AF=X.call(this,x.JSONInsAddRect);AF.AppendToParameterList("X",AE);AF.AppendToParameterList("Y",AH);AF.AppendToParameterList("W",AG);AF.AppendToParameterList("H",AD);},AddArc:function Y(AE,AJ,AD,AH,AF,AI){var AG=X.call(this,x.JSONInsAddArc);AG.AppendToParameterList("X",AE);AG.AppendToParameterList("Y",AJ);AG.AppendToParameterList("Radius",AD);AG.AppendToParameterList("StartAngle",AH);AG.AppendToParameterList("EndAngle",AF);AG.AppendToParameterList("AntiClockwise",AI);},AddNeedle:function z(AG,AF,AH,AE){var AD=X.call(this,x.JSONInsAddNeedle);AD.AppendToParameterList("NeedleStyle",AG);AD.AppendToParameterList("BasePoint",AF);AD.AppendToParameterList("Angle",AH);AD.AppendToParameterList("Size",AE);},AddString:function b(AD,AF){var AE=X.call(this,x.JSONInsAddString);AE.AppendToParameterList("Point",AD);AE.AppendToParameterList("Text",AF);},FillSimple:function g(AH,AF,AD,AG){var AE=X.call(this,x.JSONInsFillSimple,AH);AE.AppendToParameterList("DarkerFactor",AF);if(AG){AE.AppendToParameterList("HEP",1);AE.AppendToParameterList("FC",AD);}else{AE.AppendToParameterList("HEP",0);}U.call(this,AH);},FillPattern:function w(AD){X.call(this,x.JSONInsFillPattern,AD);U.call(this,AD);},FillGradient:function s(AG,AD,AF){var AE=X.call(this,x.JSONInsFillGradient,AG);AE.AppendToParameterList("BoundingRect",AD);AE.AppendToParameterList("DarkerFactor",AF);U.call(this,AG);},FillEdgeType:function C(AF,AE){var AD=X.call(this,x.JSONInsFillEdgeType,AF);AD.AppendSimpleVectorToParameterList("Polygon",AE);U.call(this,AF);},FillRadientGradient:function G(AL,AK,AJ,AI,AH,AG,AD,AF,AM){var AE=X.call(this,x.JSONInsFillRadientGradient,AL);AE.AppendToParameterList("RGUsage",AK);AE.AppendToParameterList("CX",AJ);AE.AppendToParameterList("CY",AI);AE.AppendToParameterList("InnerRadius",AH);AE.AppendToParameterList("OuterRadius",AG);if(AD){AE.AppendToParameterList("HEP",1);AE.AppendToParameterList("ExtraDepth",AF);AE.AppendToParameterList("ExtraIntensity",AM);}else{AE.AppendToParameterList("HEP",0);}U.call(this,AL);},FillBorderMetallic:function AA(AJ,AE,AI,AH,AD,AG){var AF=X.call(this,x.JSONInsFillBorderMetallic,AJ);AF.AppendToParameterList("BorderUse",AE);AF.AppendToParameterList("CX",AI);AF.AppendToParameterList("CY",AH);AF.AppendToParameterList("Radius",AD);AF.AppendToParameterList("Thickness",AG);U.call(this,AJ);},FillDonutOrSphere:function a(AG,AD,AF){var AE=X.call(this,x.JSONInsFillDonutOrSphere,AG);AE.AppendToParameterList("BoundingRect",AD);AE.AppendToParameterList("IsCircularShape",AF);U.call(this,AG);},MakeDarker:function p(AF,AE){var AD=X.call(this,x.JSONInsMakeDarker,AF);AD.AppendToParameterList("Factor",AE);U.call(this,AF);},RestoreColor:function AC(AD){X.call(this,x.JSONInsRestoreColor,AD);U.call(this,AD);},ApplyLineFormat:function R(AD){X.call(this,x.JSONInsApplyLineFormat,AD);U.call(this,AD);},AddFormatedText:function J(AD,AG,AH,AF){var AE=X.call(this,x.JSONInsAddFormatedText,AD);AE.AppendToParameterList("StartPoint",AG);AE.AppendToParameterList("Text",AH);U.call(this,AD);},ApplyBeveledFrameToRectangle:function e(AI,AK,AH,AJ,AE,AG,AD){var AF=X.call(this,x.JSONInsApplyBeveledFrameToRectangle);AF.AppendToParameterList("Rect",AI);AF.AppendToParameterList("RotationAngle",AK);AF.AppendToParameterList("BevelDepth",AH);AF.AppendToParameterList("LTColor",AJ);AF.AppendToParameterList("LTAlpha",AE);AF.AppendToParameterList("RBColor",AG);AF.AppendToParameterList("RBAlpha",AD);},DrawGaugeMarker:function k(AF,AI,AD,AH,AG){var AE=X.call(this,x.JSONInsAddGaugeMarker);AE.AppendToParameterList("MarkSize",AI);AE.AppendToParameterList("MarkShape",AD);AE.AppendToParameterList("Angle",AH);AE.AppendToParameterList("NeedleSize",AG);AE.AppendToParameterList("BPX",AF.x);AE.AppendToParameterList("BPY",AF.y);},ApplyDonutToRect:function A(AF,AE,AG){var AD=X.call(this,x.JSONInsFillDonut2Rect,AG);AD.AppendToParameterList("StartPoint",AF);AD.AppendToParameterList("EndPoint",AE);},BeginFirstFrame:function AB(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:false});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToFirstFrame();},BeginLastFrame:function B(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:true});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToLastFrame();},EndFrame:function D(){if(this.mpCurrentUnit!==null&&this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=null;}},EndUnit:function M(){this.mpCurrentUnit=null;},hConstructJSONObject:function O(){var AE=this.mFormatList,AI=this.mUnitList,AF,AD,AG,AH,AJ;AF=this.mJSONObject={};N.forEach(this.mFormatMap,function(AL,AK,AM){AE.push(AL);});AE.sort(F);AD=AI.length;for(AG=0;AG<AD;++AG){AI[AG].CalculateFormatIndex(AE);}AF.UnitList=[];if(AD>0){if(AD===1){AH={};AI[0].AppendToJSONObject(AH);AF.UnitList.push(AH);}else{AJ=0;AH={};AI[0].AppendToJSONObject(AH);AF.UnitList.push(AH);for(AG=1;AG<AD;++AG){AH={};AI[AG].AppendToJSONObject(AH);if(AI[AG-1].IsAnimated()!==AI[AG].IsAnimated()){AF.UnitList.push(AH);AJ++;}else{AF.UnitList[AJ].InstructionList=AF.UnitList[AJ].InstructionList.concat(AH.InstructionList);}}}}t.AppendCompoundPointerVectorToJSONObject("FormatList",AE,AF);this.mIsJSONObjectConstructed=true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","FormatFont");var O=mstrmojo.chart;mstrmojo.chart.SubTextHolder=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.SubTextHolder",mVecStr:null,mInitVecPartition:null,mVecPartition:null,mVecSize:null,mSpaceWidth:0,mMaxWordWidth:0,init:function M(S){this._super(S);this.mVecStr=[];this.mInitVecPartition=[];this.mVecPartition=[];this.mVecSize=[];},Clear:function P(){this.mVecStr.splice(0,this.mVecStr.length);},ParseText:function K(W,c,a){var Y=this.mInitVecPartition,S,Z,V,U,T,b=[],X;S=W.split("\n");Y.splice(0,this.mInitVecPartition.length);Y.push(0);V=0;Z=S.length;for(U=0;U<Z;++U){b=S[U].split(c);V+=b.length;Y.push(V);X=b.length;for(T=0;T<X;++T){this.mVecStr.push(this.TruncateWord(b[T],a));}}this.mVecPartition=Y.concat();},TruncateWord:function E(U,S){if(S<4||S>U.length){return U;}var T=U.substr(0,S-3);T+="...";return T;},UpdateText:function B(W,T){var V,U,S,Z,X,Y;this.mVecSize.splice(0,this.mVecSize.length);V=T;U=0;S=this.mVecStr.length;for(Z=0;Z<S;Z++){X={width:0,mX_bearing:0,mX_advance:0};if(this.mVecStr[Z]===""){this.mVecSize.push(X);}else{Y=V.GetStringExtent(this.mVecStr[Z]);X.width=X.mX_advance=Y.Width;this.mVecSize.push(X);if(Y.Width>U){U=Y.Width;}}}this.mMaxWordWidth=U;Y=V.GetStringExtent(" ");this.mSpaceWidth=Y.Width;},GetMaxWidth:function Q(){var V,S,T,U;V=0;S=this.mVecPartition.length;for(T=0;T+1<S;++T){U=this.GetOneLineWidth(T);if(U>V){V=U;}}return Math.floor(V+0.5);},GetOneLineWidth:function D(W){var S=this.mVecPartition,V=this.mVecSize,U,T;U=0;for(T=S[W];T<S[W+1];T++){if(T===S[W]&&T===S[W+1]-1){U+=V[T].width;}else{if(T===S[W]&&T!==S[W+1]-1){U+=V[T].mX_advance-V[T].mX_bearing;}else{if(T!==S[W]&&T===S[W+1]-1){U+=V[T].width+V[T].mX_bearing;}else{U+=V[T].mX_advance;}}}if(T!==S[W]){U+=this.mSpaceWidth;}}return U;},GetOneWordWidth:function F(S){return this.mVecSize[S].width;},GetStringWidth:function L(U,T){var S=T.GetStringExtent(U);return S.Width;},GetSpaceWidth:function N(){return this.mSpaceWidth;},GetSpaceWidthEx:function C(S){var T=S.GetStringExtent(" ");return T.Width;},GetLineCount:function G(){return this.mVecPartition.length>0?this.mVecPartition.length-1:0;},SetLineCount:function J(T,S){if(T<1){return ;}if(S!==0){S=S||-1;}var U=this.mVecPartition;if(T===1){U.splice(0,U.length);U.push(0);U.push(this.mVecSize.length);}else{if(this.GetLineCount()<=T){if(S===-1){return ;}if(this.GetMaxWidth()<=S){return ;}this.PartitionBy(S,true);if(this.GetLineCount()>T){U.length=T+1;U[U.length-1]=this.mVecSize.length;}}else{U.length=T+1;U[U.length-1]=this.mVecSize.length;}}},PartitionBy:function H(V,a){var U=this.mVecPartition,Y=this.mInitVecPartition,Z,X,W,T,S;a=(a!==undefined)?a:true;if(!a&&V<this.mMaxWordWidth){V=Math.floor(this.mMaxWordWidth+0.5);}U.splice(0,U.length);Z=Y.length;for(X=0;X+1<Z;++X){U.push(Y[X]);T=0;S=Y[X];for(W=Y[X];W<Y[X+1];W++){T+=this.mVecSize[W].mX_advance;if(W!==Y[X+1]-1){T+=this.mSpaceWidth;}if(T>V&&W!==S){T=0;S=W;U.push(W--);}}}if(Z>0){U.push(Y[Z-1]);}},GetOneLineString:function R(U){var S=this.mVecPartition,V="",T;for(T=S[U];T<S[U+1];T++){V=V.concat(this.mVecStr[T]);if(T!==S[U+1]-1){V=V.concat(" ");}}return V;},GetOneLineWords:function A(V){var T=this.mVecPartition,U,S=[];for(U=T[V];U<T[V+1];U++){S.push(U);}return S;},GetOneLineXBearing:function I(S){return this.mVecSize[this.mVecPartition[S]].mX_bearing;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.chart.common.Utility","mstrmojo.chart.enums.EnumInstructionName");var Ag=mstrmojo.chart.model,AS=Ag.enums,AP=mstrmojo.VisUtility,As=AS.EnumDSSGraphGradientType,j=3.141592653589793,q={area:["gm-shape-scircle","",""],line:["gm-shape-scircle","",""],"line-sizeby":["gm-shape-sbar","",""],bar:["gm-shape-bar","","gm-shape-grid-bar"],circle:["gm-shape-circle","gm-shape-circle","gm-shape-grid-circle"],square:["gm-shape-square","gm-shape-square","gm-shape-grid-square"],ticker:["gm-shape-ticker","gm-shape-ticker","gm-shape-grid-ticker"],pie:["gm-shape-pie","gm-shape-pie","gm-shape-pie"],ring:["gm-shape-ring","gm-shape-ring","gm-shape-ring"],markerRect:["gm-shape-bar","gm-shape-bar","gm-shape-bar"],markerCircle:["gm-shape-circle","gm-shape-circle","gm-shape-circle"]},v={area:["scircle","",""],line:["scircle","",""],"line-sizeby":["sbar","",""],bar:["bar","","gbar"],circle:["circle","circle","circle"],square:["square","square","square"],ticker:["ticker","ticker","ticker"],pie:["pie","pie","pie"],ring:["ring","ring","ring"],markerRect:["gmMarker","gmMarker","gmMarker"],markerCircle:["gmMarker","gmMarker","gmMarker"]};var G=mstrmojo.chart.common.Utility;var M={mR:0,mG:0,mB:0},s={"stroke-width":0};function o(A5,A2){var A1=1,A4=2,A3=this.mStyle;if(A5===A1){A3["stroke-dasharray"]=Aj.call(this,true,A2);}else{if(A5===A4){A3["stroke-dasharray"]=Aj.call(this,false,A2);}}}function J(A1){var A3,A2=document.createElementNS(this.mXMLNS,"polygon"),A5=A1.length,A4="";for(A3=0;A3<A5;++A3){A4+=(A1[A3].x+","+A1[A3].y+" ");}A2.setAttribute("points",A4);return A2;}function z(A4,A1){var A2,A3,A5=this.getDrawOrder(A4);this.mStyle["stroke-width"]="0";this.mAttributes["class"]="gm-set-line-polygon";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A4;A2=this.hCreateSVGPolygon(A1);this.hExtendGroups(A5);A3=this.mSvg.childNodes[A5+1];A3.appendChild(A2);return{Polygon:A2,Group:A3};}function Aj(A3,A1){var A2=A1||1;return[A3?A2*3:A2,A2].join(" ");}function AE(){var A1=[].slice.call(arguments);return A1.some(function(A2){return typeof A2==="undefined";});}function r(A2,BB,A1,A7,BA,A9,A4,A3){var A5="stroke-width:3;stroke-opacity:1;fill:none;",A8="",A6=document.createElementNS(this.mXMLNS,"path");if(AE(A2,BB)){A8+=(" "+this.hMoveTo(A4,A3));A8+=(" "+this.hRelMoveTo(-A7,0));A8+=(" "+this.hRelArcTo(A7,A1,true,A7*2,0));A8+=(" "+this.hRelArcTo(A7,A1,true,-A7*2,0));}else{A8=this.hMoveTo(A2.x,A2.y),A8+=" "+this.hArcTo(A7,A1,true,BB.x,BB.y);}if(A9){A5+="stroke:rgb(255,255,255)";}else{A5+="stroke:rgb(0,0,0)";}A6.sX=A4;A6.sY=A3;A6.sR=A7;A6.sD=A8;A6.setAttribute("d",A8);A6.setAttribute("style",A5);this.mSvg.childNodes[BA+1].appendChild(A6);}mstrmojo.chart.SVGCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.SVGCanvas",mSvg:null,mG:null,mDefs:null,mXMLNS:"http://www.w3.org/2000/svg",mStyle:null,mAttributes:null,mMarkerAttributes:null,mGradientCount:0,mElements:null,seriesDrawOrder:null,init:function AV(A3){var A1;this._super(A3);A1=document.createElementNS(this.mXMLNS,"svg");A1.style.height="100%";A1.style.width="100%";A1.style.padding=0;this.mG=document.createElementNS(this.mXMLNS,"g");this.mDefs=document.createElementNS(this.mXMLNS,"defs");this.mG.appendChild(this.mDefs);A1.appendChild(this.mG);this.mStyle={};this.mSvg=A1;this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];if(A3.seriesDrawOrder&&A3.seriesDrawOrder.length){this.seriesDrawOrder=A3.seriesDrawOrder.concat();var A5=this.seriesDrawOrder,A2=A3.seriesDrawOrder,A6,A4;for(A4=0;A4<A5.length;A4++){A6=A2[A4];A5[A6]=A4;}}},reset:function AO(){this.mStyle={};this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];this.seriesDrawOrder=null;var A1=this.mG;while(A1.firstChild){A1.removeChild(A1.firstChild);}A1=this.mSvg;while(A1.firstChild){A1.removeChild(A1.firstChild);}A1.appendChild(this.mG);this.mG.appendChild(this.mDefs);},setDrawOrder:function F(A1){if(A1){this.seriesDrawOrder=A1;}},getDrawOrder:function N(A2){if(A2===-3){A2=0;}var A1=this.seriesDrawOrder;if(A1&&A1.length){if(A2>=A1.length){AP.visPrint("Drawing order,Max index exceeded");}return A1[A2];}return A2;},SaveToObject:function D(A1){A1.svg=this.mSvg;return true;},saveState:function Al(){},RestoreState:function Aw(){},Clip:function Ad(){},Scale:function Ap(A1,A2){},Rotate:function AF(A2,A1){this.SetAttribute("transform","rotate("+A1*180/j+" "+A2.x+" "+A2.y+")");},NewPath:function O(){},ClosePath:function AQ(){},MoveTo:function Ah(A1,A4,A2,A3){},LineTo:function AI(A1,A4,A2,A3){},BezierCurveTo:function W(A3,A2,A6,A4,A1,A5){},SetRGBAFillColor:function Z(A2,A3,A1,A4){},BoundedValue:function AW(A3,A2,A1){if(A3<A2){return A2;}if(A3>A1){return A1;}return A3;},SetRGBAStrokeColor:function P(A2,A3,A1,A4){},FillPath:function S(){},StrokePath:function A(){},SetLineDash:function Ar(A1,A2){},SetLineWidth:function Aa(A1){this.mStyle["stroke-width"]=A1;},SetLineJoin:function c(A1){},SetFontSize:function n(A1){},AddRect:function AA(A1,A4,A2,A3){},SetAttribute:function AL(A1,A2){this.mAttributes[A1]=A2;},SetMarkerAttribute:function Q(A1,A2){this.mMarkerAttributes[A1]=A2;},CreateSVGCircle:function E(A7,A5,BA,A9,BB,A6){var A3=A9.isPie?A9.sPieDP.graphCell.sID:A9.gc.sID,A8=this.getDrawOrder(A3),A1=document.createElementNS(this.mXMLNS,"circle"),A4=this.hToCSSStyleStr();if(BA<=10){A1.setAttribute("size","small");}A1.sX=A7;A1.sY=A5;A1.sR=BA;A1.identity=A9;A1.setAttribute("cx",A7);A1.setAttribute("cy",A5);A1.setAttribute("r",BA);A1.setAttribute("style",A4);this.hExtendGroups(A8);this.hCopyAttribute(this.mAttributes,A1);var A2=A9.getChartInfo();if(A9.objType===17179869184){A2.currentMarkerShape=-1;}this.hSetExtraAttributes(A1,A2,"circle");this.mSvg.childNodes[A8+1].appendChild(A1);if(BB){r.call(this,undefined,undefined,true,BA,A8,A6,A7,A5);}this.hResetStyleAndAttribute();},CreateSVGTextBoundingBox:function Af(A3,A2,A5,A4){var A1=this.hCreateSimpleSVGPolygon(A3,A2,true,A5);if(A5){if(this.mSvg.childNodes.length<=(A4+2)){this.hExtendGroups(A4+1);}this.mSvg.childNodes[A4+2].appendChild(A1);}else{this.mElements.push({Type:"BBox",Node:A1});}},hCreateSimpleSVGPolygon:function X(BA,A4,A1,A3){var A7=document.createElementNS(this.mXMLNS,"polygon"),A6=BA.length,A8="",A5,A9=this.hToCSSColorStr(A4),A2;if(A3){A2="stroke-width:2;stroke:rgb(0,0,0);stroke-opacity:1";}else{A2="stroke-width:1;stroke:rgb(0,0,0);stroke-opacity:1";}A2+=";stroke:"+A9;A1=A1||false;if(A1){A2+=";fill-opacity:0";}for(A5=0;A5<A6;++A5){A8+=(BA[A5].x+","+BA[A5].y+" ");}A7.setAttribute("points",A8);A7.setAttribute("style",A2);this.hCopyAttribute(this.mAttributes,A7);return A7;},CreateSVGRect:function U(A6,A5,A7,A4,BA){var A2=BA.isPie?BA.sPieDP.graphCell.sID:BA.gc.sID,A8=this.getDrawOrder(A2),A9=document.createElementNS(this.mXMLNS,"rect"),A3=this.hToCSSStyleStr();if(A7<=5||A4<=5){A9.setAttribute("size","small");}A9.identity=BA;A9.setAttribute("x",A6);A9.setAttribute("y",A5);A9.setAttribute("width",A7);A9.setAttribute("height",A4);A9.setAttribute("style",A3);this.hExtendGroups(A8);this.hCopyAttribute(this.mAttributes,A9);var A1=BA.getChartInfo();if(BA.objType===17179869184){A1.currentMarkerShape=-2;}this.hSetExtraAttributes(A9,A1);this.mSvg.childNodes[A8+1].appendChild(A9);this.hResetStyleAndAttribute();},CreateSVGSector:function Ao(BE,BD,BH,A4,A2,BI,A9,A1){var BG=BI.gc||BI.sPieDP.graphCell,BC=BG.sID,A7=this.getDrawOrder(BC),BA=document.createElementNS(this.mXMLNS,"path"),BB=this.hMoveTo(BE,BD),A8=this.hCalPoint(BE,BD,BH,A4),A5=this.hCalPoint(BE,BD,BH,A2),BF=A2-A4>Math.PI,A6=this.hToCSSStyleStr(),A3=this.hCalPoint(BE,BD,BH/2,(A4+A2)/2);BB+=(" "+this.hLineTo(A8.x,A8.y));BB+=(" "+this.hArcTo(BH,BF,true,A5.x,A5.y));BB+=(" "+this.hClosePath());BA.sX=BE;BA.sY=BD;BA.sR=BH;BA.sRadStart=A4;BA.sRadEnd=A2;BA.sD=BB;BA.sGeoCenterX=A3.x;BA.sGeoCenterY=A3.y;if(BH<=10){BA.setAttribute("size","small");}BA.setAttribute("d",BB);BA.setAttribute("style",A6);BA.identity=BI;this.hExtendGroups(A7);this.hCopyAttribute(this.mAttributes,BA);this.hSetExtraAttributes(BA,BI.getChartInfo());this.mSvg.childNodes[A7+1].appendChild(BA);if(A9){r.call(this,A8,A5,BF,BH,A7,A1,BE,BD);}this.hResetStyleAndAttribute();},CreateSVGRingSector:function l(BG,BF,A1,BB,A5,A2,BI){var BE=BI.isPie?BI.sPieDP.graphCell.sID:BI.gc.sID,BA=this.getDrawOrder(BE),BC=document.createElementNS(this.mXMLNS,"path"),A4=this.hCalPoint(BG,BF,A1,A5),A8=this.hCalPoint(BG,BF,A1,A2),A7=this.hCalPoint(BG,BF,BB,A5),A6=this.hCalPoint(BG,BF,BB,A2),BH=A2-A5>Math.PI,BD=this.hMoveTo(A7.x,A7.y),A9=this.hToCSSStyleStr(),A3=this.hCalPoint(BG,BF,(A1+BB)>>1,(A5+A2)/2);BD+=(" "+this.hArcTo(BB,BH,true,A6.x,A6.y));BD+=(" "+this.hLineTo(A8.x,A8.y));BD+=(" "+this.hArcTo(A1,BH,false,A4.x,A4.y));BD+=(" "+this.hClosePath());BC.sX=BG;BC.sY=BF;BC.sOutR=A1;BC.sInR=BB;BC.sRadStart=A5;BC.sRadEnd=A2;BC.sD=BD;BC.sGeoCenterX=A3.x;BC.sGeoCenterY=A3.y;if(A1<=10){BC.setAttribute("size","small");}BC.setAttribute("d",BD);BC.setAttribute("style",A9);BC.identity=BI;this.hExtendGroups(BA);this.hCopyAttribute(this.mAttributes,BC);this.hSetExtraAttributes(BC,BI.getChartInfo());this.mSvg.childNodes[BA+1].appendChild(BC);this.hResetStyleAndAttribute();BC.setAttribute("class","gm-shape-ring");BC.setAttribute("subtype","ring");},CreateSVGRing:function p(BA,A8,BC,A9,BE){var A2=BE.isPie?BE.sPieDP.graphCell.sID:BE.gc.sID,BB=this.getDrawOrder(A2),A6=document.createElementNS(this.mXMLNS,"path"),A5=this.hCalPoint(BA,A8,BC,Math.PI),BD=this.hCalPoint(BA,A8,BC,0),A1=this.hCalPoint(BA,A8,A9,Math.PI),A4=this.hCalPoint(BA,A8,A9,0),A7=this.hMoveTo(A5.x,A5.y),A3=this.hToCSSStyleStr();A7+=(" "+this.hArcTo(BC,true,true,BD.x,BD.y));A7+=(" "+this.hMoveTo(A4.x,A4.y));A7+=(" "+this.hArcTo(A9,true,false,A1.x,A1.y));A7+=(" "+this.hArcTo(A9,true,false,A4.x,A4.y));A7+=(" "+this.hMoveTo(BD.x,BD.y));A7+=(" "+this.hArcTo(BC,true,true,A5.x,A5.y));A6.sX=BA;A6.sY=A8;A6.sGeoCenterX=BA;A6.sGeoCenterY=A8;A6.sOutR=BC;A6.sInR=A9;A6.setAttribute("d",A7);A6.setAttribute("style",A3);A6.identity=BE;this.hExtendGroups(BB);this.hCopyAttribute(this.mAttributes,A6);this.hSetExtraAttributes(A6,BE.getChartInfo());this.mSvg.childNodes[BB+1].appendChild(A6);this.hResetStyleAndAttribute();},CreateSVGCurves:function h(BA,BC,A6,BL,BJ,A3,BI,A2){var BD,BB,A7=BA.length,A8=document.createElementNS(this.mXMLNS,"path"),A5,BK="",BG=Math.floor(A7/4),A4="",A9,BH,A1,BF,BE=(BJ&&(this.mStyle["stroke-width"]<3));this.mStyle.fill="none";if(BE){A1=this.mStyle["stroke-opacity"];BH=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BF=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;A9=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=A1;this.mStyle["stroke-width"]=BH;if(BF){this.mStyle["stroke-dasharray"]=BF;}A5=document.createElementNS(this.mXMLNS,"path");}BD=this.hToCSSStyleStr();this.hCopyAttribute(this.mAttributes,A8);for(BB=0;BB<BG;++BB){if(BB===0){BK="M "+BA[BB].x+","+BA[BB].y+" ";}BK+=("C "+BA[BB*4+1].x+","+BA[BB*4+1].y+" ");BK+=(BA[BB*4+2].x+","+BA[BB*4+2].y+" ");BK+=(BA[BB*4+3].x+","+BA[BB*4+3].y+" ");}A8.identity=BL;A8.setAttribute("style",BD);A8.setAttribute("d",BK);if(BE){this.hCopyAttribute(this.mAttributes,A5);A5.identity=BL;A5.setAttribute("style",A9);A5.setAttribute("d",BK);}if(BJ){A8.setAttribute("type","trendLine");A8.setAttribute("class","gm-set-trendline");A4="startpoint:"+A3.x+","+A3.y+";";A4+="midpoint:"+BI.x+","+BI.y+";";A4+="endpoint:"+A2.x+","+A2.y;A8.setAttribute("highlightPoints",A4);A8.setAttribute("hover-catcher","0");if(this.mSvg.childNodes.length<=(BC+2)){this.hExtendGroups(BC+1);}this.mSvg.childNodes[BC+2].appendChild(A8);if(BE){A5.setAttribute("type","trendLine");A5.setAttribute("class","gm-set-trendline");A5.setAttribute("highlightPoints",A4);A5.setAttribute("hover-catcher","1");this.mSvg.childNodes[BC+2].appendChild(A5);}}else{if(A6!==-1){if(this.mSvg.childNodes.length<=(A6+1)){this.hExtendGroups(A6);}this.mSvg.childNodes[A6+1].appendChild(A8);this.hSetExtraAttributes(A8,BL.getChartInfo());}}this.hReset();},CreateSVGPolyLineForTRLine:function AB(BC,BE,BJ,BI,A4,BG,A2){var BD,A6=document.createElementNS(this.mXMLNS,"polyline"),A3,A7=BC.length,BA="",A8,BB,BH,A1,BF,A9=(this.mStyle["stroke-width"]<3),A5;this.mStyle.fill="none";if(A9){A1=this.mStyle["stroke-opacity"];BH=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BF=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;BB=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=A1;this.mStyle["stroke-width"]=BH;if(BF){this.mStyle["stroke-dasharray"]=BF;}A3=document.createElementNS(this.mXMLNS,"polyline");}A8=this.hToCSSStyleStr();for(BD=0;BD<A7;++BD){BA+=(BC[BD].x+","+BC[BD].y+" ");}A6.identity=BJ;A6.setAttribute("points",BA);A6.setAttribute("style",A8);if(BI){A6.setAttribute("type","trendLine");A6.setAttribute("class","gm-set-trendline");}else{A6.setAttribute("type","referenceLine");A6.setAttribute("class","gm-set-referenceline");}A5="startpoint:"+A4.x+","+A4.y+";";A5+="midpoint:"+BG.x+","+BG.y+";";A5+="endpoint:"+A2.x+","+A2.y;A6.setAttribute("highlightPoints",A5);A6.setAttribute("hover-catcher","0");this.hCopyAttribute(this.mAttributes,A6);if(this.mSvg.childNodes.length<=(BE+2)){this.hExtendGroups(BE+1);}this.mSvg.childNodes[BE+2].appendChild(A6);if(A9){A3.identity=BJ;A3.setAttribute("points",BA);A3.setAttribute("style",BB);if(BI){A3.setAttribute("type","trendLine");A3.setAttribute("class","gm-set-trendline");}else{A3.setAttribute("type","referenceLine");A3.setAttribute("class","gm-set-referenceline");}A3.setAttribute("hover-catcher","1");this.hCopyAttribute(this.mAttributes,A3);this.mSvg.childNodes[BE+2].appendChild(A3);}this.hReset();},hCalPoint:function AR(A1,A6,A4,A5){var A3=A1+A4*Math.cos(A5),A2=A6+A4*Math.sin(A5);return{x:A3,y:A2};},hMoveTo:function Y(A1,A2){return"M "+A1+" "+A2;},hLineTo:function Ay(A1,A2){return"L "+A1+" "+A2;},hArcTo:function AU(A3,A2,A5,A1,A4){return"A "+A3+","+A3+" 0 "+(A2?"1":"0")+","+(A5?"1 ":"0 ")+A1+","+A4;},hClosePath:function AM(){return"Z";},hRelMoveTo:function I(A1,A4,A2,A3){return"m "+A1+" "+A4;},hRelArcTo:function AU(A3,A2,A5,A1,A4){return"a "+A3+","+A3+" 0 "+(A2?"1":"0")+","+(A5?"1 ":"0 ")+A1+","+A4;},hExtendGroups:function(A4){var A3,A2=this.mSvg,A1=A2.childNodes,A5=A1.length-1;while(A5<=A4){A3=document.createElementNS(this.mXMLNS,"g");A2.appendChild(A3);A5++;}},CreateSVGPolyLine:function AJ(A2,BF,A3,A7){var A6,A8=this.getDrawOrder(A2);var BB=0,A5=1,BE=2,BA=3,A4=4,A1=5;A7=A7||BB;this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A2;switch(A7){case BB:break;case A5:break;case BE:break;case BA:break;case A4:this.mAttributes["class"]="gm-set-originline";this.mAttributes.type="originLine";if(BF[0].x===BF[1].x){this.mAttributes.subtype="v";}else{this.mAttributes.subtype="h";}break;case A1:this.mAttributes.subtype="ticker";this.mAttributes.type="shape";this.mAttributes["class"]="gm-shape-ticker";break;default:break;}this.hExtendGroups(A8);A6=this.mSvg.childNodes[A8+1];var BD=this.hCreateSVGPolyline(BF,A6);if(A7===A1||A7===A4){if(A3.length){BD.identity=A3[0];}if(A7===A1){if(BF.length>=2){var BC=BF[0],A9=BF[1];BD.tickerCenter={x:Math.round(0.5*(BC.x+A9.x)),y:Math.round(0.5*(BC.y+A9.y))};}}}this.hResetStyleAndAttribute();},CreateSVGPolylineWithCircles:function AD(A7,A2,A6){var A3,A5,A1,A4,A8=this.getDrawOrder(A7);this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A7;this.hExtendGroups(A8);A4=this.mSvg.childNodes[A8+1];this.hCreateSVGPolyline(A2,A4);for(A3=0;A3<A2.length;++A3){A5=document.createElementNS(this.mXMLNS,"circle");A1=A6[A3];A5.identity=A1;A5.setAttribute("cx",A2[A3].x);A5.setAttribute("cy",A2[A3].y);A5.setAttribute("r","5.5");A5.style.fill=this.mStyle.stroke;this.hCopyAttribute(this.mMarkerAttributes,A5);A5.setAttribute("class","gm-shape-scircle");A5.setAttribute("type","shape");A5.setAttribute("subtype","scircle");A4.appendChild(A5);}this.hResetStyleAndAttribute();},hCreateSVGPolyline:function f(A3,A5){this.mStyle.fill="none";var A4,A2=document.createElementNS(this.mXMLNS,"polyline"),A1=A3.length,A6="",A7=this.hToCSSStyleStr();A2.pointList=A3;for(A4=0;A4<A1;++A4){A6+=(A3[A4].x+","+A3[A4].y+" ");}A2.setAttribute("points",A6);A2.setAttribute("style",A7);this.hCopyAttribute(this.mAttributes,A2);A5.appendChild(A2);return A2;},CreateSVGPolygonWithCircles:function AX(A2,BA,A3){var A4,A8,A1,A7,A6,A9;A9=z.call(this,A2,BA);A8=A9.Polygon;A6=A9.Group;var A5=BA.length;if((A5&1)!==0){return ;}for(A4=0;A4<A5/2;++A4){A1=document.createElementNS(this.mXMLNS,"circle");A7=A3[A4];A1.identity=A7;A1.setAttribute("cx",BA[A4].x);A1.setAttribute("cy",BA[A4].y);A1.setAttribute("r","5.5");A1.style.fill=this.mStyle.fill;this.hCopyAttribute(this.mMarkerAttributes,A1);A1.setAttribute("class","gm-shape-scircle");A1.setAttribute("type","shape");A1.setAttribute("subtype","scircle");A6.appendChild(A1);}A8.chartInfo=A7.getChartInfo();this.hResetStyleAndAttribute();},CreateSVGPolygonWithTrapezoid:function t(BG,A8,A5){var BF,BA,BB,A1,BM,BC,A9,BE,A7;A9=z.call(this,BG,A8);BA=A9.Polygon;BC=A9.Group;var BH=A8.length;if((BH&1)!==0||BH<4){return ;}BE=BH/2;var BJ,BI,BL,A4,BK,A3,A6,BD,A2;for(BF=0;BF<BE;++BF){BL=A4=BK=A3=null;A7=[];BJ=A8[BF];BI=A8[BH-1-BF];if(BF!==0){BL=A8[BF-1];A4=A8[BH-BF];}if(BF!==BE-1){BK=A8[BF+1];A3=A8[BH-2-BF];}if(BL){BL={x:0.5*(BL.x+BJ.x),y:0.5*(BL.y+BJ.y)};}if(A4){A4={x:0.5*(A4.x+BI.x),y:0.5*(A4.y+BI.y)};}if(BK){BK={x:0.5*(BK.x+BJ.x),y:0.5*(BK.y+BJ.y)};}if(A3){A3={x:0.5*(A3.x+BI.x),y:0.5*(A3.y+BI.y)};}A6=[BL,BJ,BK,A3,BI,A4];for(BD=0;BD<A6.length;BD++){if(A6[BD]){A7.push(A6[BD]);}}A2=J.call(this,A7);if(A2&&A5[BF]){A2.identity=A5[BF];}A2.setAttribute("class","gm-shape-sbar");A2.setAttribute("type","shape");A2.setAttribute("subtype","sbar");this.hCopyAttribute(s,A2);BC.appendChild(A2);}BA.chartInfo=BB;this.hResetStyleAndAttribute();},CreateSVGPolygonWithRects:function L(A2,BB,A3){var A4,A9,A1,A8,A7,A6,BA;BA=z.call(this,A2,BB);A9=BA.Polygon;A6=BA.Group;var A5=BB.length;if((A5&1)!==0){return ;}for(A4=0;A4<A5/2;++A4){A8=document.createElementNS(this.mXMLNS,"rect");A7=A3[A4];A1=A7.getChartInfo();A8.identity=A7;if(A1.dirc===1){A8.setAttribute("x",(BB[A4].x).toString());A8.setAttribute("y",String(BB[A4].y-3));A8.setAttribute("width",(BB[A5-A4-1].x-BB[A4].x).toString());A8.setAttribute("height","6");}else{A8.setAttribute("x",(BB[A4].x-3).toString());A8.setAttribute("y",BB[A4].y);A8.setAttribute("width","6");A8.setAttribute("height",(BB[A5-A4-1].y-BB[A4].y).toString());}this.hCopyAttribute(this.mMarkerAttributes,A8);A8.setAttribute("class","gm-shape-sbar");A8.setAttribute("type","shape");A8.setAttribute("subtype","sbar");A6.appendChild(A8);}A9.chartInfo=A1;this.hResetStyleAndAttribute();},hManipulateTextElements:function w(A3){if(A3.Tooltip){var A2=0,A1,A5=this.mElements,A4=A5.length;while(A2<A4){A1=A5[A2];if(A1.Tag&&A1.Tag==="tspan"){A1.Tooltip=A3.Tooltip;}A2++;}}},CreateSVGAxisText:function V(A4,A2,A1){var A3=this.hToCSSStyleStr(),A5=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A5);A5.setAttribute("style",A3);A5.setAttribute("type","axis-text");if(A1){A5.identity=A1;}this.hManipulateTextElements({Tooltip:A2});this.hCopyTextElements(A5,"axis-word");var A6=this.getDrawOrder(A4);this.hExtendGroups(A6);this.mSvg.childNodes[A6+1].appendChild(A5);this.hReset();},CreateSVGBannerText:function Am(A3,A1){var A2=this.hToCSSStyleStr(),A4=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A4);A4.setAttribute("style",A2);A4.setAttribute("type","banner-text");if(A1){A4.identity=A1;}this.hCopyTextElements(A4,"banner-text");var A5=this.getDrawOrder(A3);this.hExtendGroups(A5);this.mSvg.childNodes[A5+1].appendChild(A4);this.hReset();},CreateSVGGenericText:function Ai(A4,A1,A3){var A2=this.hToCSSStyleStr(),A5=document.createElementNS(this.mXMLNS,"text");A3=A3||"data-label";if(!!A1){A5.identity=A1;}this.hCopyAttribute(this.mAttributes,A5);A5.setAttribute("style",A2);this.hCopyTextElements(A5,A3);if(A4){if(this.mSvg.childNodes.length<=(A4+2)){this.hExtendGroups(A4+1);}this.mSvg.childNodes[A4+2].appendChild(A5);}else{this.mG.appendChild(A5);}this.hReset();},hCopyTextElements:function d(A9,A6){A6=A6||"axis-word";var A5,A1,A2=0;for(A5=0;A5<this.mElements.length;A5++){var A3=this.mElements[A5];if(A3){if(A3.Type==="text"){var A7=document.createElementNS(this.mXMLNS,A3.Tag),A4=A3.Attributes;for(A1 in A4){A7.setAttribute(A1,A4[A1]);}A7.setAttribute("type",A6);if(A6==="axis-word"){A7.setAttribute("Index",A2);A2++;}A7.setAttribute("class","gm-tspan");A7.textContent=A3.Content;if(A3.Tooltip){var A8=document.createElementNS(this.mXMLNS,"title");A8.textContent=A3.Tooltip;A7.appendChild(A8);}if(A3.Style){A7.setAttribute("style",A3.Style);}A9.appendChild(A7);}else{if(A3.Type==="BBox"){if(A3.Node){this.mG.appendChild(A3.Node);}}}}}},CreateSVGPolygon:function u(A1,A2,A5){var A4,A6=this.getDrawOrder(A1);var A3=this.hCreateSVGPolygon(A2,A5);this.hExtendGroups(A6);A4=this.mSvg.childNodes[A6+1];A4.appendChild(A3);this.mG.appendChild(A3);this.hResetStyleAndAttribute();},hCreateSVGPolygon:function B(A1,A5){var A3,A4=this.hToCSSStyleStr(),A6=A1.length,A2=J.call(this,A1);A2.points=A1;if(A5!==undefined){A2.identity=A5;}A2.setAttribute("style",A4);this.hCopyAttribute(this.mAttributes,A2);return A2;},AddArc:function Au(A1,A6,A5,A2,A4,A3){},AddNeedle:function Av(A3,A4,A1,A2){},AddString:function Ac(A2,A1){},FillSimple:function An(A2,A4,A3,A1){this.mStyle.fill=this.hToCSSColorStr(A3);this.mStyle["fill-opacity"]=A2.mAlpha/255;},FillPattern:function C(A1){},FillGradient:function T(A8,A3,A2){var A6,BA,A4,A7,A5=A8.getGradient();switch(A5.gradientType){case As.DssGraphGradientLinear:if(A3.width===0||A3.height===0){return ;}BA=document.createElementNS(this.mXMLNS,"linearGradient");BA.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));BA.setAttribute("x1","0%");BA.setAttribute("y1","0%");if(A5.angle===0){BA.setAttribute("x2","100%");BA.setAttribute("y2","0%");}else{BA.setAttribute("x2","0%");BA.setAttribute("y2","100%");}A7=this.hCreateLinearGradientStop(0,A5.startGraphColor,A8.mAlpha/255);BA.appendChild(A7);for(A6=0;A6<A5.intermediateColors.length;++A6){var A9=A5.intermediateColors[A6];A7=this.hCreateLinearGradientStop(A9.Step,A9.Color,A8.mAlpha/255);BA.appendChild(A7);}A7=this.hCreateLinearGradientStop(1,A5.endGraphColor,A8.mAlpha/255);BA.appendChild(A7);this.mDefs.appendChild(BA);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case As.DssGraphGradientCircular:A4=document.createElementNS(this.mXMLNS,"radialGradient");A4.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A4.setAttribute("cx",String(A3.cx));A4.setAttribute("cy",String(A3.cy));A4.setAttribute("r",String(A3.r));A4.setAttribute("gradientUnits","userSpaceOnUse");A4.setAttribute("fx",String(A3.fx));A4.setAttribute("fy",String(A3.fy));var A1=A3.startStop||0;A7=this.hCreateLinearGradientStop(A1,A5.startGraphColor,A8.mAlpha/255);A4.appendChild(A7);A7=this.hCreateLinearGradientStop(1,A5.endGraphColor,A8.mAlpha/255);A4.appendChild(A7);this.mDefs.appendChild(A4);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case As.DssGraphGradientRectangular:break;}},hCreateLinearGradientStop:function AT(A5,A3,A4){var A2=document.createElementNS(this.mXMLNS,"stop"),A1="stop-color:"+this.hToCSSColorStr(A3)+";stop-opacity:"+A4;A2.setAttribute("offset",A5*100+"%");A2.setAttribute("style",A1);return A2;},FillEdgeType:function Az(A1,A2){},FillRadientGradient:function Aq(A7,A8,A5,A4,A9,A1,A2,A6,A3){},FillBorderMetallic:function Ax(A3,A1,A5,A4,A6,A2){},FillDonutOrSphere:function At(A1,A2,A3){},MakeDarker:function R(A2,A1){},RestoreColor:function a(A1){},ApplyLineFormat:function k(A2){var A3=A2.getGradient();if(A3&&A3.valid&&A3.style===1){this.StrokeGradient(A3);o.call(this,A3.strokePatten,A2.mLineThickness);}else{var A1=this.mStyle;A1.stroke=this.hToCSSColorStr(A2.mLineColor);o.call(this,A2.mLineStyle,A2.mLineThickness);}this.mStyle["stroke-opacity"]=A2.mAlpha/255;},StrokeGradient:function AK(A7){var A3=document.createElementNS(this.mXMLNS,"linearGradient");A3.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A3.setAttribute("x1","0%");A3.setAttribute("y1","0%");if(A7.angle===0){A3.setAttribute("x2","100%");A3.setAttribute("y2","0%");}else{A3.setAttribute("x2","0%");A3.setAttribute("y2","100%");}var A4,A1=A7.colors[0].Color,A6=A7.colors[A7.colors.length-1].Color,A2=this.hCreateLinearGradientStop(0,A1,A7.endAlpha/255);A3.appendChild(A2);for(A4=1;A4<A7.colors.length-1;++A4){var A5=A7.colors[A4];A2=this.hCreateLinearGradientStop(A5.Step,A5.Color,A7.endAlpha/255);A3.appendChild(A2);}A2=this.hCreateLinearGradientStop(1,A6,A7.endAlpha/255);A3.appendChild(A2);this.mDefs.appendChild(A3);this.mStyle.stroke="url(#"+this.gradPrefix+(this.mGradientCount++)+")";},AddFormatedText:function e(A5,A1,A3,A4){var A2={Type:"text",Tag:"tspan",Attributes:{x:A1.x,y:A1.y},Content:A3};if(A4&&A4.BaselineOffset){A2.Attributes.y-=A4.BaselineOffset-0.5;A2.Attributes.dy="0.5ex";}this.mElements.push(A2);},ApplyBeveledFrameToRectangle:function K(A2,A6,A1,A3,A5,A4,A7){},DrawGaugeMarker:function AZ(A4,A2,A5,A1,A3){},ApplyDonutToRect:function AY(A1,A3,A2){},BeginFirstFrame:function AH(){},BeginLastFrame:function x(){},EndFrame:function Ae(){},EndUnit:function H(){},hToCSSColorStr:function AG(A2){var A1=true;if(typeof A2==="number"){if(A1){M.mR=A2&255;M.mG=(A2&65280)>>8;M.mB=(A2&16711680)>>16;}else{M.mB=A2&255;M.mG=(A2&65280)>>8;M.mR=(A2&16711680)>>16;}}else{return"rgb("+A2.mR+","+A2.mG+","+A2.mB+")";}return"rgb("+M.mR+","+M.mG+","+M.mB+")";},hToCSSStyleStr:function g(){var A3,A2=this.mStyle,A1="";for(A3 in A2){if(A2.hasOwnProperty(A3)){A1=A1+A3+":"+A2[A3]+";";}}return A1.substr(0,A1.length-1);},hCopyAttribute:function AC(A3,A1){var A2;for(A2 in A3){if(A3.hasOwnProperty(A2)){A1.setAttribute(A2,A3[A2]);}}},hResetStyle:function A0(){this.mStyle={};},hResetElements:function Ab(){this.mElements=[];},hResetAttribute:function AN(){this.mAttributes={};this.mMarkerAttributes={};},hResetStyleAndAttribute:function y(){this.hResetStyle();this.hResetAttribute();},hReset:function Ak(){this.hResetStyle();this.hResetAttribute();this.hResetElements();},hTranslateMarkerShape:function(A1,A2){var A3="";A1=A1||0;switch(A1){case -2:A3="markerRect";break;case -1:A3="markerCircle";break;case 0:if(A2===1){A3="area";}else{if(A2===2){A3="bar";}else{if(A2===3){A3="line";}}}break;case 4:A3="circle";break;case 24:A3="square";break;case 200:A3="ticker";break;case 201:A3="pie";break;case 202:A3="ring";break;case 204:A3="line";break;case 205:A3="bar";break;case 206:A3="area";break;default:break;}return A3;},hSetExtraAttributes:function(A7,A3,BA){var A8="",A5="shape",A2="",A9=A3.tp,A6=0,A4=A3.currentMarkerShape,BB=BA||(this.hTranslateMarkerShape(A4,A9)||"bar"),A1=A3.hasSizeBy;if(BB==="line"&&A1){BB+="-sizeby";}if(A9===4||A9===5){A6=1;}else{if(A9===7){A6=2;}}if(q.hasOwnProperty(BB)){A8=q[BB][A6];}if(v.hasOwnProperty(BB)){A2=v[BB][A6];}A7.setAttribute("class",A8);A7.setAttribute("type",A5);A7.setAttribute("subtype",A2);},ApplyFontFormat:function b(BC){var A1=this.mStyle,A7=BC.mFontStyle;if(A7!==undefined){var A6=0,BA=1,A3=2,BB=3,A9=4,A4=8;A1["text-decoration"]="none";A1["font-weight"]="normal";if(!!(A7&BA)){A1["font-weight"]="bold";}if(!!(A7&A3)){A1["font-style"]="italic";}if(!!(A7&A9)&&!!(A7&A4)){A1["text-decoration"]="underline line-through";}else{if(!!(A7&A9)){A1["text-decoration"]="underline";}if(!!(A7&A4)){A1["text-decoration"]="line-through";}}}if(BC.mFontAlignment){var A8=0,A2=1,A5=2;switch(BC.mFontAlignment){case A8:A1["text-anchor"]="start";break;case A2:A1["text-anchor"]="middle";break;case A5:A1["text-anchor"]="right";break;}}A1["text-anchor"]="start";if(BC.mFontColor){A1.fill=this.hToCSSColorStr(BC.mFontColor);}if(G.isValidNumber(BC.mStrokeColor)){A1.stroke=this.hToCSSColorStr(BC.mStrokeColor);}if(BC.mStrokeWidth){A1["stroke-width"]=BC.mStrokeWidth;}if(BC.mFontAlpha){A1["fill-opacity"]=BC.mFontAlpha;}if(BC.mFontName){A1["font-family"]=BC.mFontName;}if(BC.mFontSize){A1["font-size"]=BC.mFontSize+"pt";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.gm.GMUtility","mstrmojo.ngm.NewGMEnums","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.VisEnum");var x=mstrmojo.array,a=mstrmojo.hash,N=mstrmojo.gm.GMUtility,n=mstrmojo.VisUtility,AB=mstrmojo.ngm.EnumMetricNamesPosition,AQ=mstrmojo.mstr.EnumDSSXMLObjectTypes,r=mstrmojo.VisEnum.SERVER_JSON_ERROR_TYPE;function s(){if(window.ngmDebug){console.log.apply(console.log,arguments);}}function S(AR){if(window.ngmDebug||window.ngmTimer){console.time(AR);}}function AJ(AR){if(window.ngmDebug||window.ngmTimer){console.timeEnd(AR);}}function AI(AR){Object.freeze(AR);Object.getOwnPropertyNames(AR).forEach(function(AS){if(AR.hasOwnProperty(AS)&&AR[AS]!==null&&(typeof AR[AS]==="object"||typeof AR[AS]==="function")&&!Object.isFrozen(AR[AS])){AI(AR[AS]);}});return AR;}function j(AT,AV,AX,AY){if(!AT.fs){AT.fs=AT.es;}var AS=[],AU,AR=AT.fs&&AT.fs.length||0,AW;for(AU=0;AU<AR;AU++){AW=a.clone(AT);AW.tui=AX;AW.isRowAttribute=AV;if(AT.otp===AQ.Attribute){AW.fid=AW.fs[AU].id;AW.n=Y(AT,AY,AU,AR);}else{AW.fid=AT.fid!==undefined?AT.fid:AT.id;AW.n=AU===0?AT.n:"";}AS.push(AW);}return AS;}function J(AR){var AS;if((AR.fcnt===undefined||AR.fcnt===null)&&AR.fs){AR.fcnt=AR.fs.length||1;}if(AR.fcnt!==undefined&&AR.fcnt!==null){AS=AR.fcnt;}else{if(AR.t===47){AS=1;}else{AS=AR.cs!==undefined?AR.cs:AR.rs;}}return AS;}function e(AR){if(/^(\-|\+)?([0-9]+|Infinity)$/.test(AR)){return Number(AR);}return NaN;}var h={};function l(AR){if(h[AR]===undefined){h[AR]=N.restoreSpecialChars(AR);}return h[AR];}function F(AR){AR=N.restoreSpecialChars(AR);AR=mstrmojo.string.decodeHtmlString(AR).trim();return AR;}function AD(AT,AR){var AS={};if(AT===undefined){return AS;}if(AR.length>0){x.forEach(AR,function(AV){var AU=AT[AV];if(typeof AU==="string"){AU=l(AT[AV]);}AS[AV]=AU;});return AS;}return AT;}function AF(AX,AR,AW){var AV=[],Aa,AY,AU,AT,AS,AZ=true;for(AT=0;AT<AR.length;AT++){Aa=AR[AT];AY=AX[Aa.ui];AU=AY.es[Aa.idx];AS=AU;if(!a.isEmpty(AS)){AV.push(AS);AZ=false;}}if(AZ){for(AT=0;AT<AR.length;AT++){Aa=AR[AT];AY=AX[Aa.ui];AV.push(AD(AY,AW));}}return AV;}var o=-20;function U(AS,AV){var AU=AV&&AV.mx,AT,AR;if(AU){AT=AU.length;for(AR=0;AR<AT;AR++){if(AU[AR].did===AS){return AR;}}}return o;}function M(AR){var AS={XAxis:AB.ByXAxis,YAxis:AB.ByYAxis,BreakBy:AB.ByBreakBy,Rows:AB.ByRow,Columns:AB.ByColumn,SliceBy:AB.BySlice},AT=AB.ByNone;Object.keys(AS).forEach(function(AU){if(AR[AU].hasOwnProperty("MetricNames")){if(AT!==AB.ByNone){n.visPrint("wrong position for metric names");}else{AT=AS[AU];}}});return AT;}function W(AX,AS,AV){var AR=AX.dz[AS],AW,AU=[];if(AR&&AR.TemplateMetric){AW=AR.TemplateMetric;if(AV){AU=AW;}else{for(var AT=0;AT<AW.length;AT++){AU.push(U(AW[AT].id,AX.gsi));}}}return AU;}function R(AY,AS,AZ){var Ab=Object.keys(AY),Aa=0,AU,AR;for(var AW in AS){var AT=AS[AW];if(AT.forms){AR=AT.forms[0];while(true){if(Aa>=Ab.length){break;}var Ac=AY[Ab[Aa]];if(AY.isCustomGroupWithBanding){AU=Ac.forms[1];}else{AU=Ac.forms[0];}var AV=AU[AZ]||1;var AX=AR[AZ]||1;Ac.children=Ac.children||[];if(AU.o<=AR.o&&(AU.o+AV)>=(AR.o+AX)){Ac.children.push(AT);AT.pHd=Ac;AT.pHdIdx=Ab[Aa];break;}else{Aa++;}}}}}function Y(AY,AT,AW,AX){var AS=AY.n,AV=AY.fs&&AY.fs[AW].n,AU="";var AR=mstrmojo.gm.FormNameType;if(AV===undefined){AV=" ";}if(AT===AR.OFF){if(AW===0){AU=AS;}else{AU="";}}else{if(AT===AR.ON){AU=AS+" "+AV;}else{if(AT===AR.FORM_NAME_ONLY){AU=AV;}else{if(AT===AR.SHOW_ATT_NAME_ONCE){if(AW===0){AU=AS+" "+AV;}else{AU=AV;}}else{if(AT===AR.AUTO){if(AX===1){AU=AS;}else{AU=AS+" "+AV;}}}}}}return AU;}function H(AW,AU){var AR=AW.mxIdx,AX=0,AV,AS,AY=AU==="r"?"rs":"cs",AT,Aa,AZ;while(AX<=AR){Aa=AW[AX];if(!Aa){AX+=1;continue;}AS=Aa.forms[0].o;AZ=Aa.forms[0][AY]||1;if(AZ>1){AV=AX+(Aa.forms[1][AY]||1);while(AV<AZ+AS){if(AW[AV]){AT=AW[AV].forms[0][AY]||1;AW[AV].forms.splice(0,0,Aa.forms[0]);AV+=AT;}else{AV+=1;}}}AX+=AZ;}}function AE(AX,AS,AW){var AV,AU=0,AT,AR;if(AX&&AX.length>0){AR=AX.length;for(AV=0;AV<AR;AV++){AT=AX[AV];if(!AT.fcnt){AT.fcnt=AW?AT.cs:AT.rs;if(AT.otp===-1){AT.fcnt=1;}AT.fcnt=AT.fcnt||1;}if(AU+AT.fcnt>AS){return{depth:AV,formIndex:AS-AU};}AU+=AT.fcnt;}}return -1;}function K(AS,AT,AR){return AS+(AR?" ":"")+AT.headerText;}function c(AS,AT){var AR=function AR(AV){return AV.did===AT;},AU=AS&&AS.getDatasetUnits(["att"],AR);if(AU&&AU[0]){return AU[0];}return undefined;}mstrmojo.ngm.NewGMJSONModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ngm.NewGMJSONModel",modelRhs:[],modelChs:[],init:function(AR){this._super(AR);this._iNode=AR&&AR.node||{};this.modelRhs=[];this.modelChs=[];this.ttlDispTp=this._iNode.lnm;this.docModel=AR.docModel;this._prepareData();},_prepareData:function(){S("prepare data");this._parseDropZoneCfg();this._generatePlottingMetricsIndex();if(!this.getData().egt||this.getData().egt!==r.AE_ERROR){this._createHash();}if(!(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly)&&!this.getData().eg){this._createModelRhs();this._createModelChs();this._splitGVS();}AJ("prepare data");},_createHash:function(){var AX=this.getData(),AS=AX.gts,Aa=AX.gsi,AZ=[].concat([AS.row]).concat([AS.col]),AW=this._hashAttr={},AY=this._hashAttrElem={},AV=this._mapAttrElem={},Ad=this.docModel,Ab={},AU=AX.dz.ColorBy.TemplateUnit||[],AT=AX.dz.ColorBy.MetricNames;AU.forEach(function(Af){AZ.forEach(function(Ag){for(i=0;i<Ag.length;i++){if(Ag[i].hid===Af.id||Ag[i].id===Af.id){Ab[Ag[i].id]=Af.idx;break;}}});});AZ.forEach(function(Ag,Af){Ag.forEach(function(Ak,Aj){if(Ak.otp!==-1){var Ai=a.clone(Ak);AW[Ak.id]=Ai;Ai.axis=Af+1;Ai.dpt=Aj+1;(Ai.es||[]).forEach(function(Al){AV[Al.id]=Ak.id;if(AY[Al.id]){AY[Al.id].n+=" "+F(Al.n);}else{AY[Al.id]=a.clone(Al);AY[Al.id].n=F(Al.n);}AY[Al.id].headerText=AY[Al.id].n;AY[Al.id].tid=Ak.id;AY[Al.id].cbai=Ab[Ak.id];AY[Al.id].axis=Ai.axis;});(Ai.fs||[]).forEach(function(Al){if(Al.id===Ai.fid){Ai.bftp=Al.bftp;}});var Ah=c(Ad,Ak.hid||Ak.id);Ai.fs=a.mergeHashes(Ah&&Ah.fs,Ai.fs);}});});AZ=[].concat(Aa.rows).concat(Aa.cols);AZ.forEach(function(Af){if(Af.did!=="-1"){if(!AW[Af.did]){AW[Af.did]={oid:Af.did,otp:Af.t,n:Af.n};}AW[Af.did]=a.copy(Af,AW[Af.did]);}});var AR=this._hashMetric={},Ae=this._mapMetIdx={};AZ=[].concat(Aa.mx);AZ.forEach(function(Af){AR[Af.did]=a.clone(Af);});AZ=(AS.col[AS.col.length-1]||{}).es||[];AZ.forEach(function(Af,Ag){AR[Af.oid]=a.copy(a.clone(Af),AR[Af.oid]);AR[Af.oid].headerText=AR[Af.oid].n;AR[Af.oid].mIdx=Ag;AR[Af.oid].cbai=AT;Ae[Ag]=Af.oid;});AZ=AX.nf||[];AZ.forEach(function(Af){AR[Af.id]=AR[Af.id]||{};AR[Af.id].nf=Af.nfs;});var Ac=this.getData().dz;a.forEach(Ac,function(Ag){var Af=Ac[Ag];(Af&&Af.TemplateMetric||[]).forEach(function(Ah){AR[Ah.id]=AR[Ah.id]||{};AR[Ah.id].cds=Ah.cds;AR[Ah.id].axSide=Ah.ax;});});AI(AW);AI(AY);AI(AR);},_duplicateHashObj:function(AS,AR){AS=AS||{};if(AR){if(AR.length){return a.copyProps(AR,AS);}return JSON.parse(JSON.stringify(AS));}return AS;},queryAttribute:function(AS,AR){var AT={};if(AS.aid){if(this._hashAttr){AT=this._hashAttr[AS.aid];}else{AT=c(this.docModel,AS.aid);}}return this._duplicateHashObj(AT,AR);},queryAttrElem:function(AS,AR){var AT={};if(AS.eid){AT=this._hashAttrElem[AS.eid];}return this._duplicateHashObj(AT,AR);},queryMetric:function(AS,AR){var AT={};if(AS.mix!==undefined){AT=this._hashMetric[this._mapMetIdx[AS.mix]];}if(AS.id){AT=this._hashMetric[AS.id];}return this._duplicateHashObj(AT,AR);},queryByIdentity:function(AV,AW){if(AV.mix!==undefined){return this.queryMetric({mix:AV.mix},AW);}else{var AY=AV.axis===1?this.modelRhs:this.modelChs,AX=AY[AV.dpt-1][AV.o],AR=this.getData().gts,AT=AV.axis===1?AR.row:AR.col,AU=AX.forms[0],AS=AT[AU.ui].es[AU.idx].id;if(AW){return a.copy(AX.forms[0],this.queryAttrElem({eid:AS},AW));}return this.queryAttrElem({eid:AS},AW);}},_generatePlottingMetricsIndex:function(){var AW=this.getData(),AU=W(AW,"XAxis"),AT=W(AW,"YAxis"),AV,AS,AR;this.plottingMetricsIndex=[];if(this.chartType===mstrmojo.ngm.EnumGraphType.SCATTER){for(AS=0;AS<AT.length;AS++){this.plottingMetricsIndex[AS]=[];for(AR=0;AR<AU.length;AR++){this.plottingMetricsIndex[AS][AR]=[[AU[AR],AT[AS]]];}}}else{if(this.chartType===mstrmojo.ngm.EnumGraphType.NORMAL){AV=this.NormalChartDirection===mstrmojo.ngm.EnumGraphDirection.VERTICAL?AT:AU;}else{if(this.chartType===mstrmojo.ngm.EnumGraphType.GRID){if(this.shapeType==="Pie"&&this.isSplitPlottingMetrics){AV=W(AW,"Angle");}else{AV=[0];}}else{AV=[0];}}if(this.metricBy===AB.ByRow){for(AS=0;AS<AV.length;AS++){this.plottingMetricsIndex.push([[[AV[AS]]]]);}}else{if(this.metricBy===AB.ByColumn){this.plottingMetricsIndex.push(AV.map(function(AX){return[[AX]];}));}else{if(AV.length>1){this.plottingMetricsIndex.push([AV.map(function(AX){return[AX];})]);}else{this.plottingMetricsIndex.push([[AV]]);}}}}},_parseDropZoneCfg:function(){var AS=this.getData(),AR=AS.dz;this._initChartType();this.metricBy=M(AR);this.shapeType=AR.visProp.fmt.Shape;this._initIsSplitPlottingMetrics();this._initDropZoneCache();},_isMetricsSplitByRow:function(){return this.metricBy===AB.ByRow;},_isMetricsSplitByColumn:function(){return this.metricBy===AB.ByColumn;},_initChartType:function(){var AU=this.getData(),AR=AU.dz,AT=AR.XAxis,AS=AR.YAxis;if(this.chartType===undefined){if(AT.TemplateMetric&&AS.TemplateMetric){this.chartType=mstrmojo.ngm.EnumGraphType.SCATTER;}else{if(!AT.TemplateMetric&&!AS.TemplateMetric){this.chartType=mstrmojo.ngm.EnumGraphType.GRID;}else{this.chartType=mstrmojo.ngm.EnumGraphType.NORMAL;}}}if(this.chartType===mstrmojo.ngm.EnumGraphType.NORMAL){this.NormalChartDirection=AS.TemplateMetric?mstrmojo.ngm.EnumGraphDirection.VERTICAL:mstrmojo.ngm.EnumGraphDirection.HORIZONTAL;}},_initDropZoneCache:function(){this._dropZoneCache={};function AU(Ab,Aa,Ae){var AZ=(Aa||[]).length;for(var Ac=0;Ac<AZ;Ac++){var Ad=Aa[Ac];Ae[Ad.id]=Ae[Ad.id]||[];Ae[Ad.id].push(Ab);}}var AX=this.getData(),AR=AX.dz;for(var AV in AR){if(AR[AV]){var AT=AR[AV];AU(AV,AT.TemplateUnit,this._dropZoneCache);if(AV!=="ColorBy"){AU(AV,AT.TemplateMetric,this._dropZoneCache);}}}var AW=this;function AS(Ad){var Ac=W(AX,"XAxis"),Ab=W(AX,"YAxis"),Aa=AW._getMetrics(),AZ=Ac.length>1?Ac:(Ab.length>1?Ab:[]);AZ.forEach(function(Ae){AW._dropZoneCache[Aa[Ae].oid].push(Ad);});}if(AW.metricBy===AB.ByBreakBy){AS("BreakBy");}if(AR.ColorBy.hasOwnProperty("MetricNames")){AS("ColorBy");}this._identityCache={};for(var AY in this._dropZoneCache){if(this._dropZoneCache[AY]!==undefined){this._identityCache[AY]=this._dropZoneCache[AY].filter(function(AZ){return AZ!=="Rows"&&AZ!=="Columns";});}}},_initIsSplitPlottingMetrics:function(){var AR=this.getData();if(this.chartType===mstrmojo.ngm.EnumGraphType.GRID){this.isSplitPlottingMetrics=false;if(this.shapeType==="Pie"&&W(AR,"Angle").length>0){this.isSplitPlottingMetrics=this._isMetricsSplitByRow()||this._isMetricsSplitByColumn();}}else{this.isSplitPlottingMetrics=this._isMetricsSplitByRow()||this._isMetricsSplitByColumn();}},getChartType:function(){return this.chartType;},getData:function(){return this._iNode;},_getInChartLayout:function(){return{r:this.plottingMetricsIndex.length||1,c:this.plottingMetricsIndex[0].length||1};},_getMetrics:function(){var AT=this.getData(),AR=AT.gts,AS=AR.col[AR.col.length-1];if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly){var AV=AT.gsi,AU=AV&&AV.mx;x.forEach(AU,function(AW){if(AW.did&&!AW.oid){AW.oid=AW.did;}});return AU;}return AS&&AS.otp===-1&&AS.es||[];},getMetricCount:function(){return this._getMetrics().length;},_getMetricIndexOfSubChart:function AM(AR,AS){return this.plottingMetricsIndex[AR][AS];},_getSizeByMetricIndex:function z(){return this._getXZoneMetricIndex("SizeBy");},_getColorByMetricIndex:function b(){return this._getXZoneMetricIndex("ColorBy");},_getXZoneMetricIndex:function X(AT,AV){var AU=this.getData(),AW=AU.gsi,AR=AU.dz,AS=AR[AT].TemplateMetric;if(AS){if(AV){return x.map(AS,function(AX){return U(AX.id,AW);});}return U(AS[0].id,AW);}return undefined;},_getTooltipMetricIndexes:function G(){return this._getXZoneMetricIndex("AdditionalMetrics",true);},_splitGVS:function P(){S("_splitGVS");var Al=this,Ag=Al._getMetrics(),BD=this.getData(),AW=BD.dz,Ao=BD.gsi,Ak=BD.gvs,AT=BD.dm,BF=BD.ptt,AZ=AT.cic||1,AU=AT.cir||1,Ae=AT.rct,AS=AT.cct,An=BF.col.concat([AS]),A1=BF.row.concat([Ae]),As=this.getMetricCount()||1,A9=[],Ar,Af,Aw;var Aj={data:[],identity:[]},Am=this._getSizeByMetricIndex(),A0=this._getColorByMetricIndex(),AX=this._getTooltipMetricIndexes();if(A0!==undefined){Aw=Ao.thresholds&&Ao.thresholds[Ao.mx[A0].did];}var Au=true;if(this.hasBreakBy()){Au=!!(AW.XAxis.TemplateMetric&&AW.XAxis.TemplateMetric.length>0);}var Ai=this._getInChartLayout().r;var Aa=this._getInChartLayout().c;for(var BB=0;BB<AZ;BB++){for(var A8=0;A8<AU;A8++){var AY=(An[A8+1]-An[A8])||1;var A4=(A1[BB+1]-A1[BB])||1;for(var Ap=0;Ap<Ai;Ap++){Ar=Ai*BB+Ap;A9[Ar]=A9[Ar]||[];for(var Ah=0;Ah<Aa;Ah++){Af=Aa*A8+Ah;if(A9[Ar][Af]){s("metrics("+Ar+","+Af+") has already generated");}A9[Ar][Af]=[];var A6,A7;for(Au?A6=A1[BB]:A7=An[A8];Au?A6<A1[BB]+A4:A7<An[A8]+AY;Au?A6++:A7+=As){for(Au?A7=An[A8]:A6=A1[BB];Au?A7<An[A8]+AY:A6<A1[BB]+A4;Au?A7+=As:A6++){var BA=this._getMetricIndexOfSubChart(Ap,Ah),BE,A2;for(var Ay=0;Ay<BA.length;Ay++){Aj={values:[],id:[]};for(var A5=0;A5<BA[Ay].length;A5++){A2=A6;BE=A7+BA[Ay][A5];var Ac;try{Ac=Ak.items[A2].items[BE].rv;}catch(BC){Ac=null;}Aj.values.push(Ac);for(var Aq=0;Aq<2;Aq++){var Ax=Aq===0?Al.modelRhs:Al.modelChs,Ab=Aq===0?BD.gts.row:BD.gts.col,AV=Aq===0?A2:BE,AR=A5>0;if(Ax.length>0){var At=Ax[Ax.length-1][AV];while(At){var Av=At.forms[0];if(AR&&Av.mix===undefined){break;}var Az=Av.headerText;if(At.forms.length>1){Az=At.forms.reduce(K,"");}var A3;if(Av.mix!==undefined){A3={mix:Av.mix,o:Av.o,dropzones:Al._identityCache[Ag[Av.mix].oid]};}else{A3={axis:Aq+1,o:Av.o,dpt:Av.dpt,dropzones:Al._identityCache[Ab[Av.ui].hid]||Al._identityCache[Ab[Av.ui].id]||[]};}Aj.id.push(A3);At=At.pHd;}}}}if(Aj.values.length>0){var Ad;if(Am!==undefined){Ad=BA.indexOf(Am);if(Ad>=0){Aj.sbi=Ad;id;}else{Aj.values.push(Ak.items[A2].items[A7+Am].rv);Aj.sbi=Aj.values.length-1;}}if(A0!==undefined){Ad=BA.indexOf(A0);if(Ad>=0){Aj.cbi=Ad;}else{Aj.values.push(Ak.items[A2].items[A7+A0].rv);Aj.cbi=Aj.values.length-1;}if(Ak.items[A2].items[A7+A0].ti){Aj.color=Aw[parseInt(Ak.items[A2].items[A7+A0].ti,10)-1].fmt.bc;}}if(AX!==undefined){Aj.ttm={};(AX||[]).forEach(function(BI){var BH=BA.indexOf(BI),BG;if(BH>=0){BG=BH;}else{Aj.values.push(Ak.items[A2].items[A7+BI].rv);BG=Aj.values.length-1;}Aj.ttm[Ao.mx[BI].did]={val:Aj.values[BG],n:Ao.mx[BI].n};});}A9[Ar][Af].push(Aj);}}}}}}}}this.cellGvs=A9;AJ("_splitGVS");},fetchGVS:function q(AR,AS){return this.cellGvs&&this.cellGvs[AR][AS];},mapChartToTemplatePartition:function f(AS,AV){var AU=this._getInChartLayout(),AX=Math.floor(AS/AU.r),AR=Math.floor(AV/AU.c);var AT=this.getData(),AW=AT.ptt;return{r:AW.row[AX],c:AW.col[AR]};},_headerInfoToProp:function I(AT,AU,AS){var AR=this.getData().gts;return AF(AT===0?AR.row:AR.col,[AU],AS)[0];},_createModelRhs:function C(){S("create ModelRhs");var Ae=this.modelRhs,Al=this.getData(),AZ=Al.dz,Ak=Al.ghs,AR=Ak.rhs,Ac=AR.items,Aj=Al.gts.row,AY=Aj.length,Ag,AW;if(!Ac){return ;}for(var Aa=0;Aa<AY;Aa++){this.modelRhs.push({});}var AX=Ac.length;if(AX===1){var AV=AZ.Rows.TemplateUnit&&AZ.Rows.TemplateUnit.length||0,AS=AZ.YAxis.TemplateUnit&&AZ.YAxis.TemplateUnit.length||0;if(this.eg||(AY===0&&(AV+AS===0))){AX=0;}}for(var Ah=0;Ah<AX;Ah++){var AT=Ac[Ah].items,Am=AT.length;while(Am--){var Af=a.copy(AT[Am]);Af.headerID=Af.idx;Ag=Af.tui;if(Af.stt){Af.headerText="Subtotal";Af.headerID=-1;}else{if(Af.idx>=0){AW=this._headerInfoToProp(0,Af,["n","bftp","id"]);Af.headerText=F(AW.n);Af.bftp=AW.bftp;Af.id=AW.id;if(Af.cet){var AU=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Ab=Aj[Ag],Ai=Ab.es[Af.idx];AU.attrs.push({tid:Af.cet,id:Ai.id,n:Ai.n});}}else{Af.headerText="";}}if(Af.dpt===undefined){Af.dpt=Ag+1;}var Ad=Ae[Ag];if(!Ad[Af.o]){Ad[Af.o]={forms:[]};Ad.length=Ad.length===undefined?1:Ad.length++;}Ad[Af.o].forms.unshift(Af);}}for(Ah=1;Ah<Al.gts.row.length;Ah++){R(Ae[Ah-1],Ae[Ah],"rs");}AJ("create ModelRhs");},_createModelChs:function AH(){S("create ModelChs");var Aj,Ah,Ae,AZ=this.modelChs,Ap=this.getData(),Ao=Ap.ghs,Ag=Ao.chs,Ad=Ag.items,AS=Ap.gts,Am=AS.col,AT,Ai,An,Aa,Ac,Ab,AV;if(!Ad){return ;}for(Ah=0;Ah<Am.length;Ah++){this.modelChs.push({});}var Aq=Ad.length;for(Aj=0;Aj<Aq;Aj++){AT=AE(Am,Aj,false);Ai=AT.depth;Ab=Am[Ai];Ac=Ai;Ae=AZ[Ai];An=Ad[Aj].items;Aa=An.length;for(Ah=0;Ah<Aa;Ah++){var AX=An[Ah];if(!Ae[AX.o]){Ae[AX.o]={forms:[]};}Ae[AX.o].forms.push(AX);if(AX.rs!==undefined&&AX.rs>1){var AY=AX.rs;for(var AR=0;AR<AY-1;AR++){var Af=a.copy(AX);Af.rs=1;Af.headerText="";Ae[AX.o].forms.push(Af);}}AX.headerID=AX.idx;if(AX.idx>=0){AV=this._headerInfoToProp(1,AX,["n","bftp","id"]);AX.headerText=F(AV.n);AX.bftp=AV.bftp;AX.id=AV.id;if(AX.cet){var AU=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Al=Ab.es[AX.idx];if(Al){AU.attrs.push({tid:AX.cet,id:Al.id,n:Al.n});}}}else{AX.headerText="";}if(AX.fi!==undefined){if(Am[Ai].otp===12){AX.fid=Am[Ai].fs[AX.fi].id;}else{if(Am[Ai].otp>=0){AX.fid=Am[Ai].id;}}}if(AX.stt){AX.headerID=-1;AX.cs=AX.cs||AX.rs;}if(AX.dpt===undefined){AX.dpt=Ai+1;}}}var AW,Ak;for(Aj=0,Ak=Am.length;Aj<Ak;Aj++){AW=Am[Aj];if(typeof AW.t==="number"&&AW.t===1){if(!AW.rs||AW.rs<=1){continue;}Ae=AZ[Aj];Ae.isCustomGroupWithBanding=true;H(Ae,"c");}}for(Aj=1;Aj<=Ac;Aj++){R(AZ[Aj-1],AZ[Aj],"cs");}AJ("create ModelChs");},getRowHeaderTree:function w(){return this._getHeaderTree(this.modelRhs,"Rows");},getColHeaderTree:function Z(){return this._getHeaderTree(this.modelChs,"Columns");},getRowHeaderTitles:function E(){return this._getMatrixHeaderTitles("Rows");},getColumnHeaderTitles:function v(){return this._getMatrixHeaderTitles("Columns");},getXAxisHeaderTitles:function g(AR,AS){return this._getAxisHeaderTitles("XAxis",AR,AS);},getYAxisHeaderTitles:function Q(AR,AS){return this._getAxisHeaderTitles("YAxis",AR,AS);},getBreakByHeaderTitles:function AP(AR,AS){return this._getAxisHeaderTitles("BreakBy",AR,AS);},getXAxisHeaders:function D(AR,AS){return this._getAxisHeaders("XAxis",AR,AS);},getYAxisHeaders:function y(AR,AS){return this._getAxisHeaders("YAxis",AR,AS);},getBreakByHeaders:function AG(AR,AS){return this._getAxisHeaders("BreakBy",AR,AS);},hasSizeBy:function AK(){var AR=this.getData().dz.SizeBy.TemplateMetric;return !!AR&&AR.length>0;},hasBreakBy:function AN(){var AR=this.getData().dz.BreakBy;return AR.TemplateUnit&&AR.TemplateUnit.length>0||AR.hasOwnProperty("MetricNames");},hasColorBy:function d(){var AR=this.getData().dz.ColorBy;return AR.TemplateUnit&&AR.TemplateUnit.length>0||AR.TemplateMetric&&AR.TemplateMetric.length>0||AR.hasOwnProperty("MetricNames");},hasAttributesInDropzone:function(AS){var AR=this.getData().dz,AT=AR[AS].TemplateUnit;return(AT&&AT.length>0);},getSizeByMetrics:function(){return this._getSizeByMetricIndex();},_getMatrixHeaderTitles:function A(AR){if(AR!=="Rows"&&AR!=="Columns"){return[];}var AU=this.getData(),AV=AU.gsi,AT=AV[AR==="Rows"?"rows":"cols"],AS=AU.dz[AR].TemplateUnit;return(AS||[]).map(function(AX){var AW=x.filterOne(AT,function(AY){return AY.did===AX.id;});return AW&&AW.n;});},_getAxisHeaders:function T(AY,AT,AS){var AU=this.getData(),Aa=AU.gsi,AW=Aa.rows.concat(Aa.cols),AV=AU.dz[AY].TemplateUnit,Ab=AU.dz[AY].TemplateMetric,AX=[];if(AV){AX=(AV||[]).map(function(Ae){var Ad=x.filterOne(AW,function(Af){return Af.did===Ae.id;});return{n:Ad&&Ad.n,id:Ae.id,t:Ae.t};});}else{if(Ab){var AR=AT%this.plottingMetricsIndex.length,AZ=AS%this.plottingMetricsIndex[0].length,Ac=this.plottingMetricsIndex[AR][AZ];Ac.forEach(function(Ad){Ad.forEach(function(Ae){if(x.find(Ab,"id",Aa.mx[Ae].did)>=0){AX.push({n:Aa.mx[Ae].n,id:Aa.mx[Ae].did,mIdx:Ae});}});});}}return AX;},_getAxisHeaderTitles:function AO(AY,AT,AS){var AU=this.getData(),Aa=AU.gsi,AW=Aa.rows.concat(Aa.cols),AV=AU.dz[AY].TemplateUnit,Ab=AU.dz[AY].TemplateMetric,AX=[];if(AV){AX=(AV||[]).map(function(Ae){var Ad=x.filterOne(AW,function(Af){return Af.did===Ae.id;});return Ad&&Ad.n;});}else{if(Ab){var AR=AT%this.plottingMetricsIndex.length,AZ=AS%this.plottingMetricsIndex[0].length,Ac=this.plottingMetricsIndex[AR][AZ];Ac.forEach(function(Ad){Ad.forEach(function(Ae){if(x.find(Ab,"id",Aa.mx[Ae].did)>=0){AX.push(Aa.mx[Ae].n);}});});}}return AX;},_getTitleDepth:function(AY,AS){var AX=-1,AR=(AS.TemplateUnit||[]).length;for(var AU=0;AU<AY.length;AU++){var AW=AY[AU];for(var AT=0;AT<AR;AT++){var AV=AS.TemplateUnit[AT];if(AW.id===AV.id){AX=AU;}}}return AX;},getHeaderPath:function(AU,AS){if(AS<0||AS>=this.getMatrixDimension().c){throw"cIdx out of range";}if(AU<0||AU>=this.getMatrixDimension().r){throw"rIdx out of range";}var Ad=this.modelRhs,AZ=this.modelChs,AX=this.getData(),Ab=AX.dz,AT=AX.gts,Af=AT.row,AV=AT.col,AR=this._getTitleDepth(Af,Ab.Rows),AW=this._getTitleDepth(AV,Ab.Columns),AY=this._getInChartLayout().r,Ac=this._getInChartLayout().c,Ae=[];var Aa=function(Ah,Al,Am,Ak){if(Ah<0||Ah>=Al.length||Am>=Object.keys(Al[Ah]).length){return Ak;}var Ag,Ai,Aj;for(Ai=Ah,Ag=Object.keys(Al[Ai])[Am];Ai>=0&&Ag>=0;Ai--,Ag=Aj&&Aj.pHd?Aj.pHdIdx:-1){Aj=Al[Ai][Ag];Ak.splice(0,0,Aj);}};Aa(AW,AZ,Math.floor(AS/Ac),Ae);Aa(AR,Ad,Math.floor(AU/AY),Ae);return Ae;},_isAttrInZone:function(AV,AU){var AT=this.getData(),AR=AT.dz,AS=AR[AU].TemplateUnit;return x.find(AS,"id",AV)>=0;},getAxisLabels:function(AV,AR){this._cacheLabels=this._cacheLabels||[];this._cacheLabels[AV]=this._cacheLabels[AV]||[];if(!this._cacheLabels[AV][AR]){var Ab=this,AY=this.getData(),AT=AY.gts,Ac=AY.ptt,AS=AY.dm.cct,AX=AY.dm.rct,Aa=Ac.col.concat([AS]),AW=Ac.row.concat([AX]),AU=this._getInChartLayout();function AZ(Al,Am,Ak,Ah,Ao){var Ap=-1,Ag=-1,An=[];Al.forEach(function(Ar,Aq){var As=Ar.hid||Ar.id;if(As){if(Ab._isAttrInZone(As,Ao)){Ap=Ap>=0?Ap:Aq;Ag=Aq>Ag?Aq:Ag;}}});if(Ap>=0&&Ag>=Ap){for(var Aj=Am[Ak];Aj<Am[Ak+1];Aj++){var Ai=Ag,Ae=Ah[Ai][Aj],Af="",Ad="";if(!Ae){continue;}while(Ai>=Ap){if(Ae.forms&&Ae.forms[0]){if(Ae.forms[0].mix===undefined){Af=Ab._hashAttrElem[Ae.forms[0].id].headerText+(Ai===Ag?"":"|")+Af;Ad=Ae.forms[0].id+(Ai===Ag?"":";")+Ad;}}Ae=Ae.pHd;Ai--;}An.push({id:Ad,text:Af});}}return An;}this._cacheLabels[AV][AR]={x:AZ(AT.col,Aa,Math.floor(AR/AU.c),this.modelChs,"XAxis"),y:AZ(AT.row,AW,Math.floor(AV/AU.r),this.modelRhs,"YAxis")};}return this._cacheLabels[AV][AR];},_getHeaderTree:function u(AR,AZ){var Af=this,Ah=this.getData(),AW=Ah.dz,AV=AW[AZ].TemplateUnit&&AW[AZ].TemplateUnit.length||0,AS=[],Ab;function AX(Ao,An){var Aj;if(An<AV){var Am=Ao.forms[0],Al=AZ==="Rows"?Ah.gsi.rows[Am.ui].did:Ah.gsi.cols[Am.ui].did,Ak=Am.headerText;if(Ao.forms.length>1){Ak=Ao.forms.reduce(K,"");}Aj={tui:Am.tui,ui:Am.ui,fi:Am.idx,at:Am.at,dei:Am.dei,eid:Am.id,tid:Al,t:Am.mix!==undefined?AQ.Metric:AQ.Attribute,headerText:Ak,dropzones:Af._dropZoneCache[Al]};if(Am.mix!==undefined){Aj.mix=Am.mix;}if(Ao.children){Ao.children.forEach(function(Aq){var Ap=AX(Aq,An+1);if(Ap){Aj.children=Aj.children||[];Aj.children.push(Ap);}});}AS[An]=AS[An]||[];AS[An].push(Aj);}return Aj;}var AY=[],Ae=function(Ak,Aj){if(Ak.length){AY.push(Ak[Aj||0]);}else{AY.push(Ak);}},Ad;if(AZ==="Rows"){for(Ab=0;Ab<this.plottingMetricsIndex.length;Ab++){Ad=this.plottingMetricsIndex[Ab][0];Ae((Ad[0]||Ad),(Ad[0]||Ad).length-1);}}else{for(Ab=0;Ab<this.plottingMetricsIndex[0].length;Ab++){Ad=this.plottingMetricsIndex[0][Ab];Ae((Ad[0]||Ad));}}var AU=Af._getMetrics();function Ag(Ak,Aj){AY.forEach(function(Am){var Al={t:AQ.Metric,idx:Am,headerText:AU[Am].n,dropzones:Af._dropZoneCache[AU[Am].oid]};if(Ak){Ak.children=Ak.children||[];Ak.children.push(Al);}AS[Aj]=AS[Aj]||[];AS[Aj].push(Al);});}if(AV>0){for(Ab in AR[0]){if(AR[0].hasOwnProperty(Ab)&&!isNaN(e(Ab))){AX(AR[0][Ab],0);}}}if(AZ==="Rows"?Af.hasMetricNamesInYHeader():Af.hasMetricNamesInXHeader()){var Ac=AS.length;if(Ac>0){var AT=AS[Ac-1],Ai=AT.length;for(Ab=0;Ab<Ai;Ab++){var Aa=AT[Ab];Ag(Aa,Ac);}}else{Ag(null,Ac);}}s(AZ+" header tree");s(AS);return AS;},hasMetricNamesInXHeader:function(){var AR=this.getData();return this._isMetricsSplitByColumn()&&W(AR,"XAxis",true).length<1;},hasMetricNamesInYHeader:function(){var AR=this.getData();return this._isMetricsSplitByRow()&&W(AR,"YAxis",true).length<1;},getMatrixDimension:function AC(){var AU=this.getData(),AV=AU.dm||{},AR=AV.cic||0,AT=AV.cir||0,AS=this._getInChartLayout();return{r:AR*AS.r||1,c:AT*AS.c||1};},_isAttrInAxis:function p(AS){var AU=this.getData(),AR=AU.dz,AT=AR[AS];return AT.TemplateUnit&&AT.TemplateUnit.length>0;},isAttrInXAxis:function t(){return this._isAttrInAxis("XAxis");},isAttrInYAxis:function V(){return this._isAttrInAxis("YAxis");},_isMetricInAxis:function AL(AS){var AU=this.getData(),AR=AU.dz,AT=AR[AS];return AT.TemplateMetric&&AT.TemplateMetric.length>0;},isMetricInXAxis:function k(){return this._isMetricInAxis("XAxis");},isMetricInYAxis:function O(){return this._isMetricInAxis("YAxis");},isUnitInTooltip:function L(AX){var AW=this.getData(),AR=AW.dz,AV=AR.AdditionalMetrics,AU=AV.TemplateUnit||[],AS=AV.TemplateMetric||[],AT=[];(AU.concat(AS)||[]).forEach(function(AY){if(AY.id===AX){AT.push(AY);}});return AT.length>0;},getTooltipItems:function B(){var AV=this.getData(),AR=AV.dz,AU=AR.AdditionalMetrics,AT=AU.TemplateUnit||[],AS=AU.TemplateMetric||[];return AT.concat(AS);},getRowHeaderObj:function AA(AW,AS){var AZ=this.modelRhs,AU=AE(this.getData().gts.row,AS,true),AT=AU.depth,AX=AU.formIndex,AV=AZ[AT],AY=AW;while(AV[AY]===undefined&&AY>=0){AY--;}if(AY>=0){var AR=AV[AY].forms[AX];if(!AR.rs){AR.rs=1;}if(AR.o<=AW&&(AR.o+AR.rs)>AW){return AR;}}},getColHeaderObj:function(AY,AR){var AV=this.modelChs,AU=AE(this.getData().gts.col,AR,false),AT=AU.depth,AW=AU.formIndex,AZ=AV[AT],AX=AY;while(AZ[AX]===undefined&&AX>=0){AX--;}if(AX>=0){var AS=AZ[AX].forms[AW];if(!AS.cs){AS.cs=1;}if(AS.o<=AY&&(AS.o+AS.cs)>AY){return AS;}}},getUnitAttributesCountOnRow:function(AT){var AS=this.getData(),AV=AS.dz,AY=AS.gts.row,AU=AY.length,AZ,AR,AW,AX=0;if(AU!==1){if(AT){x.forEach(AY,function(Aa){AX+=J(Aa);});}else{AX=AU;}return AX;}AZ=AV.Rows.TemplateUnit?AV.Rows.TemplateUnit.length:0;AR=AV.YAxis.TemplateUnit?AV.YAxis.TemplateUnit.length:0;AW=AV.BreakBy.TemplateUnit?AV.BreakBy.TemplateUnit.length:0;if(this.chartType===mstrmojo.ngm.EnumGraphType.NORMAL&&this.NormalChartDirection===mstrmojo.ngm.EnumGraphDirection.HORIZONTAL){return AZ+AR;}return AZ+AW+AR;},getUnitAttributesCountOnCol:function(AV){var AU,AX=this.getData().gts.col,AS=AX.length,AW=AS;var AR=AX[AS-1];if(AR&&AR.otp===-1){AW=AS-1;}if(AV){var AT=0;for(AU=0;AU<AW;AU++){AT+=J(AX[AU]);}return AT;}else{return AW;}},getMetricProp:function(AW){var AU=[],AT,AS,AV=this._getMetrics();AS=AV.length;for(AT=0;AT<AS;AT++){var AR=AV[AT];if(AW){AU.push(AR[AW]);}else{AU.push(AR);}}return AU;},getRowTitleInfo:function(){if(!this.rwTtInfo){var AS=this.getData().gts,AV=AS.row,AR=[],AU=AV.length,AT;for(AT=0;AT<AU;AT++){AR=AR.concat(j(AV[AT],true,AT,this.ttlDispTp));}this.rwTtInfo=AR;}return this.rwTtInfo;},getColTitleInfo:function(){if(!this.colTtInfo){var AS=this.getData().gts,AT=AS.col,AR=[],AV=AT.length,AU;for(AU=0;AU<AV;AU++){AR=AR.concat(j(AT[AU],false,AU,this.ttlDispTp));}this.colTtInfo=AR;}return this.colTtInfo;},getSorts:function(){return this.getData().gsi.sorts;},getMetricIDsFromIndex:function(AR){var AT=this._getMetrics()||[],AS=[];AR.forEach(function(AU){if(AT[AU]){AS.push(AT[AU].oid);}});return AS;}});mstrmojo.ngm.NewGMJSONModel.UnitTest_API={filterInt:e,decodeHTMLText:l,fetchHeaderProps:AD,getMetricIndexFromID:U,getMetricNamesPosition:M};}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.color","mstrmojo.ui.menus.EditorConfig","mstrmojo.ui.menus.ToolbarEditorConfig","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.LineConfigGroup","mstrmojo.ui.editors.controls.FillConfigGroup","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.AdvancedColorPicker");var Z=mstrmojo,I=Z.dom,K=Z.hash,a=Z.array,A=Z.css,j=Z.VisEnum.ControlType,h=mstrmojo.gm,F=mstrmojo.color,U=h.GMUtility,R=Z.VisUtility,k=h.FormatingPropertyTag,e=mstrmojo.models.FormatModel,c=e.ENUM_PROPERTY_NAMES,P=mstrmojo.chart.enums.EnumFontStyle,f=mstrmojo.VisEnum.GMLegendFormatingPropertyTag,G=mstrmojo.VisEnum.NetworkLegendFormattingCategory,V=mstrmojo.ui.editors.controls.AdvancedColorPicker,W={GLOBAL:"glb",FORMATTING:"fmt"},D={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"};function N(s,p){var o=this.widget,q=o.domToolbarPH,r=this;o._lastOpened=null;q.innerHTML="";document.body.appendChild(q);A.toggleClass(q,mstrApp.getThemeClassName(),true);this.configureLegendPopup(p,q);o.toolEditor=p.newInstance({unrender:function(){}});o.toolEditorClosefn=function(t){var v=t.target,u=o.toolEditor.domNode;if(!I.contains(u,v,true,u)&&!R.isHostedPopupNode(v,"class",true,document.body)){r.hideToolbar();}};I.attachEvent(document.body,"mousedown",o.toolEditorClosefn,true);o.openPopup(this.widget.toolEditor);A.toggleClass(document.body,"hasToolbarPopup",true);}function L(p,o){var q;if(o===W.GLOBAL){q=this.readGlobalProperty(p);}else{if(o===W.FORMATTING){q=this.widget.getPropertiesOfFormatable();}}if(p.slice(-3)===D.COLOR){if(p!==k.COLOR_SQUARE_COLOR||o!==W.GLOBAL){q=U.decodeColor(q);}}return q;}function Q(p,o){var q=this;if(o===W.GLOBAL){return function(s){var r=L.call(q,p,W.GLOBAL);if(p===k.COLOR_SQUARE_COLOR){r=r.color;}if(!K.equals(s,r)){if(p.indexOf(D.COLOR)!==-1){s=U.encodeColor(s);}q.writeGlobalProperty(p,s);}};}return function(t,r){var s=L.call(q,p,W.FORMATTING);if(t!==s){if(p.indexOf(D.COLOR)!==-1){t=F.encodeColor(t);}q.widget.writeFormatableProperties(p,t,r);}};}function O(p,o){p=p||[];o=o||"";a.forEach(p,function(q){q.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:o,children:p};}function d(p,q){p=p||[];var o=new mstrmojo.Box({children:p,cssText:q});return o;}function B(s,t,o){var r="white-space: nowrap; width: 50px;";if(s===mstrmojo.desc(3905,"Background")||s===mstrmojo.desc(6242,"Color")){r="white-space: nowrap;";}else{if(s===mstrmojo.desc(2885,"Fill")){r="white-space: nowrap; margin-right: 9px;";}}var p=new mstrmojo.Label({text:s}),q=d(p,r);return O([q,t],o);}function b(p,q,o){var r=this;p=p||{};if(p.propNames===undefined){p.propNames=q;}p.onGroupValueChange=function(s,u,t){if(u!==t&&u!==undefined){(Q.call(r,s,o))(u,t);}};return p;}function S(q,p,o){var r=this;a.forEach(p,function(s){var t=L.call(r,s,o);if(t!==undefined){q.setChildValue(s,t);}});}function C(o,r,q,p){p=b.call(this,p,r,q);K.copy({width:"140px",height:"22px",colorPickerHostWithin:true},p);var s=new mstrmojo.ui.editors.controls.FillConfigGroup(p);if(s){s.iniChildrenComp(r);S.call(this,s,r,q);}if(typeof o==="string"){return B(o,s,(p||[]).rowContainerCSSClass);}return s;}function Y(q,p,o){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxBackgroundFill",children:[C.call(this,mstrmojo.desc(2885,"Fill"),q,p,K.copy({rowContainerCSSClass:"mstrmojo-ui-rowContainer"},o))]}]});}function l(s,q,u,t,p){var r=L.call(this,u,t),v=this;var o=new mstrmojo.ui.editors.controls.ColorPickerButton({isHostedWithin:true,width:"40px",selectedValue:r,showNoFill:false,postselectedValueChange:function(w){(Q.call(v,u,t))(w.value,w.valueWas);}});if(s){o.alias=s;}if(typeof q==="string"){return B(q,o);}return o;}function n(p){var o;if(p.listenToUpdateColorMap instanceof Function){o=p.listenToUpdateColorMap(function(){p.raiseEvent({name:"colorByColorChange",type:"invalidateCache"});if(o&&p.detachUpdateColorMapListener instanceof Function){p.detachUpdateColorMapListener(o);}});}}function g(q,p){var o=L.call(this,q,p),r=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({showAutomatic:!o.isDefaultColor,color:o.color,colorChanged:function(s){s=(this.showAutomatic&&s===V.VAL_AUTOMATIC)?"default":s;n(r.widget);(Q.call(r,q,p))(s,o.color);r.hideToolbar();},colorCanceled:function(){r.hideToolbar();}})]});}function T(u,p){var o={},t=L.call(this,p+D.FONT_STYLE,W.GLOBAL),r=L.call(this,p+D.FONT_COLOR,W.GLOBAL),q=L.call(this,p+D.FONT_FAMILY,W.GLOBAL),s=L.call(this,p+D.FONT_SIZE,W.GLOBAL);if(t!==undefined){o[c.FONT_WEIGHT]=(!isNaN(t)&&((t&P.FS_BOLD)>0));o[c.FONT_STYLE]=(!isNaN(t)&&((t&P.FS_ITALIC)>0));o[c.UNDERLINE]=(!isNaN(t)&&((t&P.FS_UNDERLINE)>0));o[c.LINE_THROUGH]=(!isNaN(t)&&((t&P.FS_STRIKETHROUGH)>0));}if(r!==undefined){o[c.COLOR]=r;}if(s!==undefined){o[c.FONT_SIZE]=s;}if(q!==undefined){o[c.FONT_FAMILY]=q;}u.setFormatSource(o);}function H(p,o){var q=null;if(o.indexOf(D.FONT_FAMILY)!==-1){q=p.fontFamily;}else{if(o.indexOf(D.FONT_STYLE)!==-1){q=p.fontStyle;}else{if(o.indexOf(D.FONT_SIZE)!==-1){q=p.fontSize;}else{if(o.indexOf(D.FONT_COLOR)!==-1){q=p.fontColor;}}}}return q;}function M(r,q,o){var p={bold:P.FS_BOLD,italic:P.FS_ITALIC,underline:P.FS_UNDERLINE,strikeout:P.FS_STRIKETHROUGH},s=this;q.forEach(function(t){var u=H(r,t);if(u){u.propName=t;if(t.indexOf(D.FONT_STYLE)!==-1){u.postselectionChange=function(v){var y=v.added,z=u.items[(y&&y[0]!==undefined)?y[0]:v.removed[0]],x=!!y,w=L.call(s,t,o),AA=(w===undefined?0:w);if(x){AA=AA|p[z.css];}else{AA=AA&(~p[z.css]);}u.parent.raiseFormatValueChange(t,AA,w);};}else{if(t.indexOf(D.FONT_FAMILY)!==-1){u.postselectedIndexChange=function(v){var y=v.value,x=v.valueWas;if(y!==x){var w=u.items;u.parent.raiseFormatValueChange(t,w[y].id,w[x]&&w[x].id);}};}else{if(t.indexOf(D.FONT_SIZE)!==-1){u.postselectedValueChange=function(v){var x=parseInt(v.value,10)+"pt",w=parseInt(v.valueWas,10)+"pt";if(x!==w){u.parent.parent.raiseFormatValueChange(t,x,w);}};}else{u.postselectedValueChange=function(v){u.parent.parent.raiseFormatValueChange(t,v.value,v.valueWas);};}}}}});}function X(p,s,r,q){var v=this;q=q||{};if(q.propNames===undefined){q.propNames=s;}if(q.onGroupValueChange===undefined){q.onGroupValueChange=function(w,y,x){if(y!==x&&y!==undefined){(Q.call(v,w,W.GLOBAL))(y,x);}};}var o={cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"397px",height:"22px"};q=K.copy(o,q);var u=new mstrmojo.ui.editors.controls.CharacterGroup(q),t=H(u,k.LEGEND_FONT_COLOR);t.showNoFill=false;M.call(this,u,s,r);T.call(this,u,p);return u;}function J(s,r){var w=r.firstChild,AA=w?w.offsetWidth:0,p=w?w.offsetHeight:0,t=document.body.offsetWidth,z=document.body.offsetHeight,u=10,v=5,y=5;if(w){w.style.left="0";w.style.right="auto";w.style.top="0";w.style.bottom="auto";}var x={w:AA,h:0};var q=p>0;if(q){x.h=p;}else{return false;}if(q){r.style.left=s.x+"px";r.style.top=s.y-p-u/2+"px";}if(s.x+x.w>t){r.style.left=s.x-AA+"px";}if(q){var o=0;if(s.y-p-u/2<v){o=v;r.style.top=o+"px";}else{if(s.y+u/2>z){o=Math.max(z-u-p,v);r.style.top=o+"px";}}}}function E(o,r,q,p){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[X.call(this,o,r,q,p)]}]});}mstrmojo._FormateVisLegend=mstrmojo.provide("mstrmojo._FormateVisLegend",{_mixinName:"mstrmojo._FormateVisLegend",widget:null,readGlobalProperty:undefined,writeGlobalProperty:undefined,configureLegendPopup:undefined,init:function(o){this.widget=null;if(this._super){this._super(o);}if(this.widget&&!this.widget.domToolbarPH){var p;p=document.createElement("div");p.setAttribute("class","gm-menu-placeholder");this.widget.domToolbarPH=p;}},handleRMCOnLegend:function(z){var t=z.getTarget(),u=z.e,x={x:u.pageX,y:u.pageY},w=t.getAttribute("type"),p,v,r,s=this,q=this.widget;z.cancel();z.preventDefault();if(mstrApp.isAppStatePresentation()||!mstrApp.allowWebDashboardDesign()||mstrApp.isInVFInteractMode){return ;}var y,o=function(AA){switch(AA){case j.LGD_COLORBOX_CTN:case j.LGD_COLORBOX:if(AA===j.LGD_COLORBOX){t=t.parentNode;}v=t.firstChild.identity;if(v&&v.comb){this.widget.colorSqureIdentity=v;this.selectColorBox(t,this.fmtMode);p=g.call(this,k.COLOR_SQUARE_COLOR,W.GLOBAL);x=this.adjustColorPickerPos(t);if(!x.alignLeft){r=p.ENUM_CORNERS;p.setAlignment(r.BOTTOM_LEFT,r.TOP_RIGHT);}}break;case j.LGD_TITLE:case j.LGD_TEXT:this.selectText(true);var AB=[k.LEGEND_FONT_SIZE,k.LEGEND_FONT_FAMILY,k.LEGEND_FONT_STYLE,k.LEGEND_FONT_COLOR];p=E.call(this,"lgd",AB,W.GLOBAL);y="lgd";break;default:this.selectLegendBody();var AC=[k.LEGEND_BG_COLOR,k.LEGEND_BG_FILL_TRANSPARENCY];p=Y.call(this,AC,W.GLOBAL);y="lgd";break;}if(p){N.call(this,x,p);if(!!y){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");q.parent.selectVIUnit();var AD=q.edtModel._targetPulldown;if(AD){AD.selectItemByField("v",y);}}}};o.call(this,w);J.call(this,x,this.widget.domToolbarPH);},hideToolbar:function(){var p=this.widget,q=p.domToolbarPH,s=q.firstChild,o=q.parentNode;if(s){q.removeChild(s);}if(o){o.removeChild(q);}var r=p.toolEditor;if(r){r.unrender=function(){r._super();};r.destroy();r.unrender=function(){};delete p.toolEditor;A.toggleClass(document.body,"hasToolbarPopup",false);A.toggleClass(q,mstrApp.getThemeClassName(),false);}if(p.toolEditorClosefn){I.detachEvent(document.body,"mousedown",p.toolEditorClosefn,true);delete p.toolEditorClosefn;}},highlightText:function(o){throw new Error("subclass need to implement highlightText function");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility","mstrmojo.Obj","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.num","mstrmojo.string");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var Z=mstrmojo,G=mstrmojo.gm,a=G.GMUtility,K=Z.VisUtility,H=Z.array,D=Z.gm.EnumGraphType,T=mstrmojo.num,C=mstrmojo.string,J=Z.chart.model.enums.EnumDSSGraphRegressionType,I=G.EnumRefLineModelType,L=G.EnumIdentityType,E=G.WidgetPropertyTag,U=G.EnumTrendRefModelLabels,M=Z.chart.model.enums.EnumDSSObjectType;var W=mstrmojo.chart,V=W.common.Utility;function F(e,c){var g=[],d=[],f,b=Math.min(e.length,c.length),h=function(k,j){return k.x>j.x?1:-1;};for(f=0;f<b;f++){d.push({x:e[f],y:c[f]});}d.sort(h);H.forEach(d,function(j){g.push(j.x);g.push(j.y);});return g;}function S(f,d){var c,e;if(this.isTrendLine===false){return undefined;}c=this.getBBSection();if(f){e=c.fl||[];}else{e=c.bl||[];}if(d){var b=[];H.forEach(e,function(g){b.push(g.join());});return b;}return e;}function P(e,b){var d=1000000000;if(e!==0&&(Math.abs(e)<0.001||Math.abs(e)>d)){return T.format(6,3,"",e);}return parseFloat(e.toFixed(b).replace(/0+$/,"")).toString();}function Q(f,c,h){var b=h,e="",g=[];H.forEach(c,function(j){if(isNaN(j)){g.push(j);}else{g.push(P(j,3));}});function d(o){var n,l="",j,r,k,q;j=o.length;for(n=j-1;n>=0;n--){r=o[n];k=parseFloat(r);q=n;if(k===0){continue;}if(l!==""){if(k>0){l+=" + ";}else{l+=" - ";k=-k;r=r.slice(1);}}if(q!==0){if(q===1){l+=r+b;}else{l+=r+b+"^("+q+")";}}else{l+=r;}}return l;}if(f==="Linear"){e=d(g);}else{if(f==="Exponential"){if(g.length<2){return g[0];}if(typeof g[1]==="string"&&g[1].slice(0,2)==="Ln"){e=g[0]+"e^("+g[1].slice(2)+b+")";}else{if(g[1]>0){e=g[1];}else{e="("+g[1]+")";}e+="^("+b+")*"+g[0];}}else{if(f==="Power"){if(g.length<2){return g[0];}e=b+"^("+g[1]+")*"+g[0];}else{if(f==="Poly"){e=d(g);}else{if(f==="Log"){if(g.length<2){return g[0];}e=g[1]+"ln("+b+")";if(g[0]!==0){if(g[0]>0){e+=" + ";e+=g[0];}else{e+=" - ";e+=(-g[0]);}}}}}}}return e;}function O(f,c,j){var b=j,d="",g=[],h=[];H.forEach(c,function(k){if(isNaN(k)){g.push(k);}else{g.push(P(k,3));}});function e(q){var o,k,t,l,s,n=[],r;k=q.length;for(o=k-1;o>=0;o--){t=q[o];l=parseFloat(t);s=o;if(l===0){continue;}r="";if(n.length){if(l>0){r+=" + ";}else{r+=" - ";l=-l;t=t.slice(1);}}if(s!==0){if(s===1){r+=t+b;n.push({v:r});}else{r+=t+b;n.push({v:r});n.push({v:"("+s+")",isSuper:true});}}else{r+=t;n.push({v:r});}}return n;}if(f==="Linear"){h=e(g);}else{if(f==="Exponential"){if(g.length<2){h.push({v:g[0]});return h;}if(typeof g[1]==="string"&&g[1].slice(0,2)==="Ln"){h.push({v:g[0]+"e"});h.push({v:"("+g[1].slice(2)+b+")",isSuper:true});}else{if(g[1]>0){h.push({v:g[1]});}else{h.push({v:"("+g[1]+")"});}h.push({v:"("+b+")",isSuper:true});h.push({v:"*"+g[0]});}}else{if(f==="Power"){if(g.length<2){h.push({v:g[0]});return h;}h.push({v:b});h.push({v:"("+g[1]+")",isSuper:true});h.push({v:"*"+g[0]});}else{if(f==="Poly"){h=e(g);}else{if(f==="Log"){if(g.length<2){h.push({v:g[0]});return h;}d=g[1]+"ln("+b+")";if(g[0]!==0){if(g[0]>0){d+=" + ";d+=g[0];}else{d+=" - ";d+=(-g[0]);}}h.push({v:d});}}}}}return h;}function N(e,c,d){var b;for(b=0;b<d;b++){e.push(c);}return e;}function X(d){var c,b=0;for(c=0;c<d.length;c++){if(d[c]!==null){b++;}}return b;}function Y(c){var b="";switch(c){case"Linear":b=mstrmojo.desc(4888,"Linear");break;case"Exponential":b=mstrmojo.desc(12022,"Exponential");break;case"Power":b=mstrmojo.desc(12023,"Power");break;case"Poly":b=mstrmojo.desc(12024,"Polynomial");break;case"Log":b=mstrmojo.desc(12021,"Logarithmic");break;}return b;}var A=mstrmojo.declare(mstrmojo.Base,null,{getTooltipContent:function(){var u,b,AH,w,q,r,AE,l,z,AA,o,p,y,AF,g,AI,n,s,d=this.objType,c=this.lineModel,AB=[],v="x",j=[];if(c){p=c.def;}if(d===L.TREND_LINE){AH=c.trendLineModel;w=AH.tmData;r=AH.dp;z=r.lds.gmm;AE=z.gmCtr;l=AE.getChartInfo();AB.push(w.mid);if(l.tp===D.BUBBLE||l.tp===D.SCATTER){y=w["x-vars"];if(y!==undefined){AB.push(AE.getMetricIndexFromID(w["x-vars"][0]));}}q=z.getMetricNamesFromIndex(AB);j.push({n:mstrmojo.desc(14440,"Trendline of"),v:q.join(", ")});var AG=false;if(p&&this.lineModel.def.incl===1){AG=true;}if(l.isABL&&AG){var h=AE.getBreakByAttributes();var AD=[],e=[];H.forEach(h,function(f){AD.push(f.n);});if(AD.length>0){var k=this.lineModel.getBBSection();if(k){var x=k.bbes;for(AA=0;AA<AD.length;AA++){e.push(h[AA].es[x[AA]].n);}j.push({n:AD.join(", "),v:e.join(", ")});}}}j.push(null);var AC=c.getFormulas();if(AC){AC=AC[0];y=w["x-vars"];AF=w["x-types"];if(y!==undefined){if(AF[0]===M.DssTypeAttribute){g=AE.getAttributeById(y[0]);if(g&&g.n){v=g.n;}}else{if(AF[0]===M.DssTypeMetric){g=AE.getMetricIndexFromID(y[0]);if(!isNaN(g)){g=z.getMetricNamesFromIndex([g]);if(g.length>0){v=g[0];}}}}}if(AC.coefficients){n=O.call(this,AC.type,AC.coefficients,C.encodeHtmlString(v,true));j.push({n:mstrmojo.desc(14441,"Trendline function"),v:n,noTruncate:true,isTrendLineFuncToken:true,skipEncode:true});}for(AI in AC){if(AC.hasOwnProperty(AI)){if(AI.indexOf("coefficients")<0){o=isNaN(AC[AI])?AC[AI]:P(AC[AI],3);if(AI.slice(-2)==="R2"&&(o===0||o==="0")){AI=AI.slice(0,AI.length-2)+"R<sup>2</sup>";s=mstrmojo.desc(6098,"N/A");}else{if(AI==="type"){AI=mstrmojo.desc(8733,"Type");s=Y(AC.type);}else{AI=(AI.slice(-2)==="R2")?AI.slice(0,AI.length-2)+"R<sup>2</sup>":AI;s=a.everythingToString(o);}}j.push({n:AI,v:s,skipEncode:true});}}}}return j;}u=c.getReferenceLineLabel(false,true);b=u.split(":");if(b.length>1){return[{n:b[0],v:b[1]}];}return[];}});var B=mstrmojo.declare(mstrmojo.Base,null,{init:function R(f){this._super(f);var d=this.trendLineModel,e=d.midx,h=d.mx,c,b,j,g;if(h&&h[e]){c=h[e].mdls;if(c){b=c.mod_c;j=d.tmData.modix;g=b[j-1];this.def=g;}}else{if(this.isTrendLine===false&&this.trendLineModel.refIsDefOnAxis){this.def=this.trendLineModel.defOnZone;}}},getSeasonalityType:function(){if(this.isTrendLine){return this.trendLineModel.dp.lds.gmm.gmCtr.firstRes.dz.sea;}return 0;},getLevel:function(){var b=this.def,c=b&&b.clientDef;if(c){if(this.isTrendLine){return c.trdLvl;}return c.refLvl;}return -1;},getLineThickness:function(){var b=this.def,c=b&&b.clientDef;if(c){return parseInt(c.trdRefLnThk,10);}return 1;},getLineColor:function(){var c=this.def,d=c&&c.clientDef,b;if(d){b=d.trdRefLnClr;if(typeof b==="string"&&b[0]==="#"){a.encodeColor(b);}return parseInt(d.trdRefLnClr,10);}return 16711680;},getLineRenderType:function(){var b=this.def,c=b&&b.clientDef;if(c){return parseInt(c.trdRefLnStyle,10);}return mstrmojo.chart.enums.EnumLineStyle.LS_DASH;},getTrendLineValuesWithForecast:function(){var f=this.getTrendLineStartingGroup(),e=this.trendLineModel.dp,c=e.getChartInfo(),k=[],g=[],j,l,b,d=false,h;j=this.getBwdData();l=this.getFwdData();if(c.tp===D.BUBBLE||c.tp===D.SCATTER){h=this.getBwdData(true);b=this.getFwdData(true);d=true;}if(j&&j.length>0){g=g.concat(j);if(d){k=k.concat(h);}}else{if(!d){N(g,undefined,f);}}g=g.concat(this.getTrendLineValues());if(d){k=k.concat(this.getTrendLineValues(true));}if(l&&l.length>0){g=g.concat(l);if(d){k=k.concat(b);}}else{if(e.fwdEnabled){if(!d){N(g,undefined,e.fwdSteps);}}}if(d){return F(k,g);}return g;},getTrendLineStartingGroup:function(){var b=this.trendLineModel.dp;if(b.bwdEnabled){return b.bwdSteps;}return 0;},getTrendLineValues:function(b){if(this.isTrendLine===false){K.visPrint("this function is only for trend line only, for reference line, call getReferenceLineValue instead");return undefined;}var g=this,l=g.seriesId,o=g.trendLineModel,n=o.tmData,j=n.trm,d=o.dp,e,c=d.innerGetGroupCount(),k,f=[],h;for(e=0;e<c;e++){k=d.innerGetGraphCell(l,e);if(b){h=k.getData(0);}else{h=k.getAssoDataWithMetricIndex(j,true);}f.push(h);}return f;},getReferenceLineLabelFont:function(){var c=this.def,b={},d=c&&c.clientDef;if(d){["rfLnFntFml","rfLnFntSz","rfLnFntStyle","rfLnFntClr"].forEach(function(e){if(e!=="rfLnFntFml"){b[e]=parseInt(d[e],10);}else{b[e]=d[e];}});return b;}return{rfLnFntFml:"Verdana",rfLnFntSz:"11pt",rfLnFntStyle:0,rfLnFntClr:0};},getReferenceLineLabel:function(x,k,AF){var AG=this,AC=false,w=this.getReferenceLineValue(),AH=AG.trendLineModel,AA=AH.midx,d,t=AH.dp,y=t.lds.gmm,b,z,AB,h,s,g=[],l=!!this.trendLineModel.defOnZone;if(!l){b=y.getMetricNumberFormat(AA);d=y.getMetricNamesFromIndex([AA])[0];}else{if(AF){if(AF.Condense){AC=true;}else{if(AF.NumberFormat){b=AF.NumberFormat;}}}else{var q=AH.direction==="horizontal",u=true,p=t.rowIndex,AD=t.colIndex,j=q?p:AD,v=(q?"y":"x")+(u?"1":"2");b=y.gmCtr.axisFormats[v][j];AC=b==="Condensed";}}if(AC){z=V.abbreviateNumber(w,5);}else{if(b){z=T.formatByMask(b,w);}else{z=w;}}var n=this.def,o=n&&n.clientDef;AB="Average";h=I.AVG;if(!!(n&&n.tp)){h=n.tp;switch(h){case I.MAX:AB=mstrmojo.desc(2125,"Maximum");break;case I.MIN:AB=mstrmojo.desc(2127,"Minimum");break;case I.AVG:AB=mstrmojo.desc(2122,"Average");break;case I.MED:AB=mstrmojo.desc(2126,"Median");break;case I.FIRST:AB=mstrmojo.desc(4046,"First");break;case I.LAST:AB=mstrmojo.desc(4049,"Last");break;case I.CONST:AB=mstrmojo.desc(7194,"Constant");break;}}if(k===true){if(h===I.CONST&&o&&!!o[E.REF_LINE_NAME]){s=o[E.REF_LINE_NAME];}else{s=l?(AB+" Axis"):(AB+" "+d);}return s+": "+z;}if(o){var f=o.refLbShw;if(!f){return"";}var e=o.refLbTp;if(e&U.DssModelLabelsType){g.push(AB);}if(e&U.DssModelLabelsMetric){if(!l){g.push(d);}else{g.push("Axis");}}if(e&U.DssModelLabelsValue){g.push(z);}if(x){return g;}return g.join(" ");}var AE;if(l){AE=[AB,"Axis",z];}else{AE=[AB,d,z];}if(x){return AE;}return AE.join(" ");},getReferenceLineValue:function(){return this.trendLineModel.tmData.inChartModel[0].model;},getReferenceLineDirection:function(){return this.trendLineModel.direction;},getBBSection:function(){var f=this,d,c,b=f.trendLineModel,e=b.tmData,g=e.inChartModel;d=f.bbIdx;c=g[d];return c;},getForcastLabelDataPairs:function(h,f){if(!this.isTrendLine){return undefined;}if(f===undefined){f=true;}var c=h?this.getFwdLabels(f):this.getBwdLabels(f),b=c.length,e=[],d,g=h?this.getFwdData():this.getBwdData();for(d=0;d<b;d++){e.push({lb:c[d],v:g[d]});}return e;},getFwdLabels:function(b){if(!this.isTrendLine){return undefined;}return S.call(this,true,b);},getFormulas:function(){if(!this.isTrendLine){return undefined;}var c=this.getBBSection(),b=c.model;return b.formulas;},getCoefficients:function(b){b=b||false;var d=this.getFormulas()[0],c=["coefficients","coefficients(seasonal)"];if(b){return(d&&(d[c[0]]||d[[c[1]]]))||[];}return(d&&d[c[0]])||[];},getTrendLineType:function(){var e=["Linear","Exponential","Power","Poly","Log"],c=[J.DssGraphRegressionLinear,J.DssGraphRegressionExp,J.DssGraphRegressionPow,J.DssGraphRegressionPoly,J.DssGraphRegressionLog],f,d,b;f=this.getFormulas();if(f){d=f[0].type;b=e.indexOf(d);if(b>=0){return c[b];}}return J.DssGraphRegressionNone;},getFwdData:function(e){if(!this.isTrendLine){return undefined;}var g=this.trendLineModel.dp;if(!g.fwdEnabled){return[];}var c=this.getBBSection(),d,f=g.getChartInfo(),b=c.model;if(e){d=[];H.forEach(b.fwdins,function(h){d.push(h[0]);});return d;}if(!c.fse&&f.isABL){return[];}return b.fwdfsts;},getBwdLabels:function(b){if(!this.isTrendLine){return undefined;}return S.call(this,false,b);},getBwdData:function(e){if(!this.isTrendLine){return undefined;}var g=this.trendLineModel.dp;if(!g.bwdEnabled){return[];}var c=this.getBBSection(),d,f=g.getChartInfo(),b=c.model;if(e){d=[];H.forEach(b.bwdins,function(h){d.push(h[0]);});return d;}if(!c.bse&&f.isABL){return[];}return b.bwdfsts;},getRefLineLabelIdentity:function(){var b={objType:L.REF_LINE_LABEL,lineModel:this,tlOpt:this.trendLineOpt};return new A(b);},getIdentity:function(){var b={objType:this.isTrendLine?L.TREND_LINE:L.REF_LINE,lineModel:this,tlOpt:this.trendLineOpt};return new A(b);},testSingleTrendLineModel:function(){var c=this.seriesId,b;if(this.isTrendLine){b=this.getTrendLineValues();K.visPrint("trend line values for seriers "+c+" : "+JSON.stringify(b));K.visPrint("fwd info :"+JSON.stringify(this.getForcastLabelDataPairs(true,true)));K.visPrint("bwd info :"+JSON.stringify(this.getForcastLabelDataPairs(false,true)));K.visPrint("values including forecast: "+JSON.stringify(this.getTrendLineValuesWithForecast()));}else{b=this.getReferenceLineValue();K.visPrint("reference line  for "+this.getReferenceLineLabel()+" : "+JSON.stringify(b));K.visPrint("direction of reference line is "+this.getReferenceLineDirection());}K.visPrint("thickness: "+this.getLineThickness());K.visPrint("line color "+this.getLineColor());K.visPrint("line style "+this.getLineRenderType());K.visPrint("-------------------------------------------------------------------");}});mstrmojo.gm.TrendLineModel=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TrendLineModel",isTrendLine:undefined,init:function R(b){this._super(b);},getValidSeriesIndex:function(){var o=this.tmData,k=o.trm,c=this.dp,f,e,p=this.seriesIds,b=p.length,d=c.innerGetGroupCount(),g,n,h,l;for(f=0;f<b;f++){l=p[f];g=[];for(e=0;e<d;e++){n=c.innerGetGraphCell(l,e);h=n.getAssoDataWithMetricIndex(k,true);g.push(h);}if(X(g)>1){return f;}}return 0;},getSingleTrendLines:function(b){var k=this,e=this.tmData,n=this.seriesBBUnits,l=this.seriesIds,f=0,c=e.inChartModel,g=[],j,h,d;H.forEach(c,function(o){j=o.bbes;if(j){h=a.indexOf(n,j);}else{if(k.isTrendLine){h=k.getValidSeriesIndex();}else{h=0;}}d=l[h];o.seriesId=d;g.push(new B({trendLineModel:k,bbIdx:f,seriesId:d,isTrendLine:k.isTrendLine,trendLineOpt:k.trendLineOpt}));f++;});if(k.isTrendLine&&b){H.forEach(g,function(q){var p=q.getFwdLabels(false);var o=q.getBwdLabels(false);if(b.fwdLbs===undefined||b.fwdLbs.length<p.length){b.fwdLbs=p;}if(b.bwdLbs===undefined||b.bwdLbs.length<o.length){b.bwdLbs=q.getBwdLabels(false);}});}return g;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");var C=mstrmojo.gm.EnumAxisScale,A=mstrmojo.gm.GMUtility;var B=mstrmojo.gm.GMAxisScale=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMAxisScale",axKey:undefined,rMin:undefined,rMax:undefined,mMin:undefined,mMax:undefined,logScale:false,scaleType:undefined,minMax:undefined,isCust:false,autoMin:false,autoMax:false,init:function(D){this._super(D);if(this.mMin===undefined){this.mMin=this.rMin;}if(this.mMax===undefined){this.mMax=this.rMax;}if(D.minMax!==undefined&&D.minMax!==C.CUSTOM){this.scaleType=D.minMax;}},absorbInfo:function(D){var E;if(this.axKey!==D.axKey){return ;}this.logScale=D.logScale;this.scaleType=D.scaleType;E=this.isCust=D.isCust;if(E===false){return ;}this.mMin=D.mMin;this.mMax=D.mMax;this.autoMin=D.autoMin;this.autoMax=D.autoMax;},serialize2String:function(){return[this.axKey,this.scaleType,this.mMin,this.mMax,this.rMin,this.rMax,this.logScale,this.autoMin,this.autoMax].join(":");}});mstrmojo.gm.GMAxisScale.createAxisScaleFromArr=function(D){var E={axKey:D[0],scaleType:parseInt(D[1],10),mMin:parseFloat(D[2]),mMax:parseFloat(D[3]),rMin:parseFloat(D[4]),rMax:parseFloat(D[5]),logScale:D[6]===""?undefined:A.isTrueForBoolValue(D[6]),autoMin:A.isTrueForBoolValue(D[7]),autoMax:A.isTrueForBoolValue(D[8])};E.isCust=(E.mMin!==E.rMin||E.mMax!==E.rMax)||E.scaleType===C.CUSTOM;return new B(E);};mstrmojo.gm.GMAxisScale.createAxisScaleCollectionFromArrays=function(E,D){D=D||{};E.forEach(function(F){D[F[0]]=mstrmojo.gm.GMAxisScale.createAxisScaleFromArr(F);});return D;};mstrmojo.gm.GMAxisScale.createAllMetricsAxObj=function(D){var M,I={axKey:"AllMetrics"},F=[],H=[],J,E=true,L=true,G=true;if(D.AllMetrics!==undefined){return ;}for(M in D){if(M!=="AllMetrics"&&D.hasOwnProperty(M)){J=D[M];if(I.rMin===undefined){I.rMin=J.rMin;}else{if(I.rMin>J.rMin){I.rMin=J.rMin;}}F.push(J.mMin);if(I.mMin===undefined){I.mMin=J.mMin;}else{if(I.mMin>J.mMin){I.mMin=J.mMin;}}if(I.rMax===undefined){I.rMax=J.rMax;}else{if(I.rMax<J.rMax){I.rMax=J.rMax;}}H.push(J.mMax);if(I.mMax===undefined){I.mMax=J.mMax;}else{if(I.mMax<J.mMax){I.mMax=J.mMax;}}if(I.logScale===undefined){I.logScale=J.logScale;}else{if(I.logScale!==J.logScale){E=false;}}if(I.scaleType===undefined){I.scaleType=J.scaleType;}else{if(I.scaleType!==J.scaleType){I.scaleType=C.DIFFERENT;}}if(I.autoMin===undefined){I.autoMin=J.autoMin;}else{if(I.autoMin!==J.autoMin){I.autoMin=false;L=false;}}if(I.autoMax===undefined){I.autoMax=J.autoMax;}else{if(I.autoMax!==J.autoMax){I.autoMax=false;G=false;}}}}if(!E){I.logScale=undefined;}I.isCust=(I.mMin!==I.rMin||I.mMax!==I.rMax)||I.scaleType===C.CUSTOM;if(I.scaleType===C.CUSTOM){var K=false;H.forEach(function(N){if(N!==I.mMax){K=true;}});F.forEach(function(N){if(N!==I.mMin){K=true;}});if(!L||!G){K=true;}if(K){I.scaleType=C.DIFFERENT;}}D.AllMetrics=new B(I);return D.AllMetrics;};mstrmojo.gm.GMAxisScale.serializeCollection2String=function(G){var E,F=G.AllMetrics,D=[];if(F===undefined){F=mstrmojo.gm.GMAxisScale.createAllMetricsAxObj(G);}D.push(F.serialize2String());for(E in G){if(E!=="AllMetrics"&&G.hasOwnProperty(E)){D.push(G[E].serialize2String());}}return D.join(",");};}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.num","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.ui.menus.PopupConfig","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.rw._HasVisSelections");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig","ToolbarEditorConfig");var f=mstrmojo,W=f.VisUtility,M=f.dom,g=f.array,O=f.hash,C=mstrmojo.num,p=f.gm,n=f.vi.ui.DatasetUnitMenuUtils,A=p.GMUtility,L=mstrmojo.func.wrapMethods,d=p.WidgetPropertyTag,I=p.FormatingPropertyTag,Y=mstrmojo.vi.enums.EnumFeatures,Q=mstrmojo.vi.viz.EnumDSSDropZones,c=p.EnumGraphType,q={AX_TITLE:"title",DATA_PT:"datapt",LASSO:"lasso",DO_NOT_CLEAR:"donotclear"};function j(u){var t=u.getElementsByClassName("trace bars");if(!t.length){t=u.getElementsByClassName("trace scatter");}if(!t.length){t=u.getElementsByClassName("trace boxes");}return t;}function s(x){var w,u,y=x.GMController,t=y.isHistogram,v=y.isBoxPlot;x.contextMenuSelectedShapes=x.highlights;if(v){u=R(x.highlights,x,true);x.addContextMenuMetricValueSelection(u);}else{(x.highlights||[]).forEach(function(z){if(t){w=z.__data__.newText;(w||[]).forEach(function(AA){u=l(AA,{},x);x.addContextMenuMetricValueSelection(u);});}else{w=z.__data__.information||(z.__data__.trace&&z.__data__.trace._input.information);if(w&&w!==-1){u=l(w,{},x);x.addContextMenuMetricValueSelection(u);}}});}}function P(x,y,t){if(t.__target){t=t.__target[0]&&t.__target[0][0];if(x.highlights.indexOf(t)!==-1){s(x);return true;}}else{var w=t.information,v={},u;if(w&&w!==-1){v=D(x,[t],false,false,false);}u=V(y,[v],x);if(u.length&&x.highlights.indexOf(u[0][0])!==-1){s(x);return true;}}}function S(v,w,u,t){if(v.GMController.isBoxPlot){if(!u){u=F(v._viSelections);}return V(w,u,v,t);}else{return H(w,u,v);}}function H(t,y,z){var u=t.getElementsByClassName("trace bars")[0].childNodes[0].childNodes,AB,AA,w,v=[];if(!u.length||!y||!y.length){return[];}AB=u[0].__data__.trace._input.newText;w=0;for(var x=0;x<AB.length;x++){AA=AB[x];(AA||[]).forEach(function(AC){if(AC&&v.indexOf(u[w])===-1&&J(z,AC,y)){v.push(u[w]);}});if(AA){w++;}}return v;}function V(u,AA,AB,y){var v=u.getElementsByClassName("trace boxes"),x,AD=!AB.GMController.dz.XAxis.TemplateUnit&&!AB.GMController.dz.YAxis.TemplateUnit,t,w=[],AC;for(var z=0;z<v.length;z++){t=v[z];if(y||AD){x=t.__data__[0].trace._input.information;(x||[]).forEach(function(AE){if(AE&&J(AB,AE,AA,true)){AC=v[z].querySelectorAll("path");w.push(AC);}});}else{x=t.__data__[0].trace._input.information[0];if(x&&J(AB,x,AA,y)){AC=v[z].querySelectorAll("path");w.push(AC);}}}return w;}function E(x,w,y){y.classList.add("shallow");if(!x[0]){return ;}var v,u,t;for(u=0;u<x.length;u++){t=x[u];for(v=0;v<t.length;v++){t[v].classList.add("RMClicked");if(w){t[v].classList.add("selected");}}}return x;}function T(AB,AE,t){var v=t.getElementsByClassName("trace boxes"),AC;if(!AE[0]){return ;}var AD,u,x,AA,z,y;for(AA=0;AA<AE.length;AA++){AD=AE[AA];for(var w=0;w<v.length;w++){if(v[w].__data__[0].trace.index===AD.curveNumber){AC=w;break;}}u=v[AC].childNodes;for(z=0;z<u.length;z++){if(!u[z].classList.contains("boxtext")){if(u[z].childNodes.length){x=u[z].childNodes;for(y=0;y<x.length;y++){x[y].classList.add("hovered");AB.hoveredShape.push(x[y]);}}else{u[z].classList.add("hovered");AB.hoveredShape.push(u[z]);}}}}}function N(u,v){var t={};(u||[]).forEach(function(x){if(x.__target&&x.__target[0]){var w=x.__target[0][0].__data__.information;if(w&&w!==-1){t=l(w,t,v);v.addMetricValueSelection(t);t={};}}});}function R(v,x,t,w){var u={};if(!v){return ;}([v[0]]||[]).forEach(function(z){var y=z.data?z.data.information:z.__data__.trace._input.information;(y||[]).forEach(function(AA){u={};u=l(AA,u,x);if(t){x.addContextMenuMetricValueSelection(u);}else{if(w){x.addMetricValueSelection(u);}}});});return u;}function B(v,y,t){var u={},x,w;(v||[]).forEach(function(z){x=z.data;w=x.newText[z.pointNumber];(w||[]).forEach(function(AA){u={};u=l(AA,u,y);if(t){y.addContextMenuMetricValueSelection(u);}else{y.addMetricValueSelection(u);}});});return u;}function X(u,t){return W.getGroupAndCalculationContextMenuForDataPoints(u,{selection:t,fnCellName:function(v){return v.innerText||v.textContent;},fnUnique:function(){var z=[],y=u.GMController,x=y.dz.Rows.TemplateUnit||[],w=y.dz.Columns.TemplateUnit||[],v=x.concat(w);t.forEach(function(AA){AA.forEach(function(AB){if(g.find(v,"id",AB.tid)===-1){z=z.filter(function(AC){return AC.tid!==AB.tid||AC.id!==AB.id;});z.push(AB);}});});return z;},fnMakeNode:function(v){return{identity:v,innerText:v.headerText};}});}function D(w,u,x,t,v){if(w.GMController.isHistogram){return B(u,w,t);}else{if(w.GMController.isBoxPlot){return R(u,w,t,v);}else{if(x){N(u,w);}else{return Z(u,w);}}}}function Z(v,u){var t={};(v||[]).forEach(function(y){var x=y.data;var w=x.information[y.pointNumber];t=l(w,t,u);});return t;}function l(w,u,v){if(w===-1){return u;}var t=v.GMController.jsonModel;(w||[]).forEach(function(y){if(!("mix" in y)){var x=t.queryByIdentity(y,[]);if(x){var z=x.tid;u[z]=u[z]||[];u[z].push(x);}}});return u;}function F(v){var u,t=[];for(u in v){if(v.hasOwnProperty(u)){t.push(v[u]);}}return t;}function a(){}function U(v,u,y){var x=function(z){var AA=0;if(v.GMController.isHistogram){z.forEach(function(AB){if(AA>t){return AA;}AA+=AB.data.newText[AB.pointNumber].length;});return AA;}else{if(v.GMController.isBoxPlot){AA++;}else{if(v.GMController.isWaterfall){z.forEach(function(AB){if(!AB.data.isFakeBar){if(AA>t){return AA;}AA+=1;}});}else{AA+=u.length;}}}return AA;};if(!u.length){return true;}else{var t=v.getWidgetPropertyValue(I.SELECTION_LIMIT),w=x(u);if(w<=t&&y){w+=v._viSelections?Object.keys(v._viSelections).length:0;if(w>t){return false;}}else{if(w>t){return false;}}}return true;}function k(u){if(!u.getElementsByClassName){return ;}var t=u.getElementsByClassName("ngm-select-outline");while(t.length>0){t[0].parentNode.removeChild(t[0]);}}function K(v){var u,x,t=[],w;for(u in v){if(v.hasOwnProperty(u)){w="";for(x in v[u]){if(v[u].hasOwnProperty(x)){t.push(v[u][x]);}}}}return t;}function r(AB,AF,x,AG,z){if(AB.GMController.isBoxPlot||AB.GMController.isHistogram){return S(AB,AF,AG,z);}if(!AG||!AG.length){return x;}var AC=AB.GMController.xtabModel;var AA,y,v,AD,t,AE,w,u=j(AF)||[],AH=u.length;for(AA=0;AA<AH;AA++){AD=u[AA];if(!AD){continue;}t=AD.childNodes.length>1?AD.childNodes[AD.childNodes.length-1].childNodes:AD.childNodes[0].childNodes;t=d3v4.selectAll(t).filter(".point").nodes();v=t.length;for(y=0;y<v;y++){AE=t[y];w=AE.__data__.information===-1?[]:AE.__data__.information;if(w&&x.indexOf(AE)===-1&&J(AB,w,AG)){x.push(AE);}}}return x;}function G(u,AA,x){var y,z=u.length,v,w,t;t=x.getNormalizedFormElementId(AA);for(y=0;y<z;y++){w=u[y].id;if(w===AA){return true;}v=x.getNormalizedFormElementId(w);if(v===t){return true;}}return false;}function J(z,u,AO,AA){var AM,AH,AL,AJ,AR,AF,AP=[],v=z.GMController.jsonModel,y=z.GMController.xtabModel,AK,w,AN,x={},AD,AB=AO.length,AC,t,AG,AQ,AI=0;AH=u.length;for(AM=0;AM<AH;AM++){if(!z.GMController.isBoxPlot||AA||(!AA&&u[AM].dropzones.indexOf("BreakBy")===-1)){var AE=v.queryByIdentity(u[AM],[]);if(AE.tid||AE.oid){AP.push(AE);AN=AE.tid?String(AE.tid):"-1";x[AI]=[AN];AI++;}}}for(AD=0;AD<AB;AD++){AC=AO[AD];t=true;AG=false;for(AF in AC){if(AC.hasOwnProperty(AF)){AK=AC[AF];w=true;AQ=false;for(AM=0;AM<AI;AM++){AR=x[AM];for(AL=0,AJ=AR.length;AL<AJ;AL++){if(AR[AL]===AF){AQ=true;if(!G(AK,AP[AM].id,y)){w=false;}else{AG=true;}break;}}if(AQ){break;}}if(!w){t=false;break;}}}if(t&&AG){return true;}}return false;}function b(t){return t.model.controller.cmdMgr;}function h(){return{success:function t(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function e(v){var u,y,t=[],x,w;for(u in v){if(v.hasOwnProperty(u)){w=[];for(y in v[u]){if(v[u].hasOwnProperty(y)){x=v[u][y][0];if(x){w.push(x);}}}}if(w.length){t.push(w);}}return t;}mstrmojo.ngm.NewGMInteractivity=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.ui._CanDropFromSchema],{scriptClass:"mstrmojo.ngm.NewGMInteractivity",widget:null,selectedShapes:[],contextMenuSelection:[],contextMenuSelectedTargets:[],gmMenuOnCloseFlag:false,domWidget:undefined,init:function(t){this.widget=null;this.selectedShapes=[];this.selectedTargets=[];this.contextMenuSelection=[];this.contextMenuSelectedTargets=[];this.gmMenuOnCloseFlag=false;if(this._super){this._super(t);}var u=document.createElement("div");u.setAttribute("class","gm-menu-placeholder");this.domMenuPH=u;},destroy:function o(t){delete this.domWidget;this._super(t);},clearAll:function(){this.selectedShapes.length=0;this.contextMenuSelection.length=0;this.selectedTargets.length=0;this.contextMenuSelectedTargets.length=0;},unHighlightPoint:function(v){if(v.classList){v.classList.remove("highlight");}else{v.classed("highlight",false);}if(!this.widget.GMController.isHistogram&&!this.widget.GMController.isBoxPlot&&!this.widget.GMController.isWaterfall&&(this.widget.GMController.chartType===c.LINE||this.widget.GMController.chartType===c.AREA)&&v.style){var u=this.getTraceInfoFromPoint(v),t=u&&u.singlepoint;if(typeof v.style==="function"){v.style("fill-opacity",t?1:0);v.style("stroke-opacity",t?1:0);}else{v.style["fill-opacity"]=t?1:0;v.style["stroke-opacity"]=t?1:0;}}},highlightPoint:function(u,t){if(!this.widget.GMController.isHistogram&&!this.widget.GMController.isBoxPlot&&!this.widget.GMController.isWaterfall&&(this.widget.GMController.chartType===c.LINE||this.widget.GMController.chartType===c.AREA)&&u.style){if(typeof u.style==="function"){u.style("fill-opacity",1);u.style("stroke-opacity",1);}else{u.style["fill-opacity"]=1;u.style["stroke-opacity"]=1;}}if(u.classList){u.classList.add("highlight");if(t){u.classList.add("isTarget");}}else{if(u.classed){u.classed("highlight",true);if(t){u.classed("isTarget",true);}}}this.widget.highlights.push(u);},getTraceInfoFromPoint:function(v){var u=v[0]&&v[0][0],t=u&&u.__data__.trace;return t&&t._input;},styleWaterfallOverlappedBar:function(AA,AE,y,u,v){var AC=this.widget;var t=AA.information[AE];var AB="";t.forEach(function(AF){if(AF.t&&AF.t===12&&AF.dropzones){AB+=AF.id;}});var w=r(AC,u,[],[AB]),x=AA.information[AE].xaxis,AD=AA.information[AE].yaxis;for(var z=0;z<w.length;z++){if(!w[z].__data__.information.noStyle&&w[z].__data__.information.xaxis===x&&w[z].__data__.information.yaxis===AD){if(v==="rightMouse"){w[z].classList.add("RMClicked");if(y){w[z].classList.add("selected");}AC.rightMouseHighlights.push(w[z]);}else{if(v==="highlight"){w[z].classList.add("highlight");AC.highlights.push(w[z]);}else{if(v==="hover"){w[z].classList.add("hovered");AC.hoveredShape.push(w[z]);}}}}}},highlightSelected:function(w,t,x,v){var u=this;if(!t.length){return ;}if(!v){x.classList.add("shallow");}t&&t.forEach(function(y){if(y.length){[].forEach.call(y,function(z){u.highlightPoint(z,v);});}else{u.highlightPoint(y,v);}});},clearRMCStyle:function(t){if(window.NodeList&&!NodeList.prototype.forEach){NodeList.prototype.forEach=function(w,u){u=u||window;for(var v=0;v<this.length;v++){w.call(u,this[v],v,this);}};}(t.rightMouseHighlights||[]).forEach(function(u){if(u.classed){u.classed("RMClicked",false);u.classed("selected",false);}else{if(u.classList){u.classList.remove("RMClicked");u.classList.remove("selected");}else{if(u.length&&u.length>0&&u[0].classList){u.forEach(function(v){v.classList.remove("RMClicked");v.classList.remove("selected");});}}}if(!t.GMController.isHistogram&&!t.GMController.isBoxPlot&&!t.GMController.isWaterfall&&(t.GMController.chartType===c.LINE||t.GMController.chartType===c.AREA)&&u[0].style){u[0].style["stroke-opacity"]=0;}});t.rightMouseHighlights=[];},resetHighlights:function(t,u){if(O.isEmpty(t._viSelections)){this.clearHighlight(t);u.classList.remove("shallow");}},clearHighlight:function(u){var t=this;(u.highlights||[]).forEach(function(v){t.unHighlightPoint(v);});u.highlights=[];},doHighlight:function(u,z,t){var y=this.widget,x=!!z&&!t;if(y.isEmpty()){return ;}var AA=y.div,w=z?F(z):F(y.getSelectionHash()),v=r(y,AA,[],w,x);if(z){this.clearHighlight(y);}y.selectedShapes=v;this.highlightSelected(y,y.selectedShapes,AA,x);},findRealTarget:function(w,t,AB){var AD,AG,v,AE,AC={},AF,AA,AI,z,u,x,y,AH=w.GMController;y=AB&&AB.target;if(y&&y.classList[0]==="ngm-select-outline"){AC.type=q.LASSO;return AC;}else{if(y&&y.classList[0]==="drag"){AC.type=q.DO_NOT_CLEAR;return AC;}else{if(y){AG=y.classList.length>1?y.classList[1]:y.classList[0];if(AG.indexOf(q.AX_TITLE)!==-1){AF=AG.indexOf(q.AX_TITLE);AA=AG.slice(AF+q.AX_TITLE.length);v=AG[0];AI=w.GMController.getAttributeAxesLetters().indexOf(v)!==-1||(v==="x"&&AH.isHistogram);AD=q.AX_TITLE;if(AI){z=AG.slice(1,AF)||0;if(AA===undefined||AA===""){AA=0;}AC.type=AD;v=AG[0];if(AG.indexOf(q.AX_TITLE)===1){AE=1;}else{AE=C.parseNumeric(z);}AA=C.parseNumeric(AA);AC.titleNum=AA;AC.axisNum=AE;}else{z=AG.slice(1,AF)||"1";u=v+"axis"+z;x=w.layouter.getPlotlyLayout();if(AB.target.identity){AC.identity=AB.target.identity;}else{if(AH.getChartInfo().isABL&&AH.isMetricNamesInZone("BreakBy")){AC.identity=x[v+"axis1"].identity[v+"axis"+AA];}else{AC.identity=x[u].identity;AC.rowId=x[u].rowId;}}}AC.type=AD;AC.axis=v;AC.attrAxis=AI;return AC;}}}}},onPaperClick:function(v,y,w,x){if(w&&(w.button===0||w.button===2)&&(w.which!==1||w.type==="contextmenu")&&!x){var t=this.findRealTarget(v,y,w);if(t){var u={event:w,shape:t};this.onContextMenu(v,y,u);return ;}}k(y);this.clearRMCStyle(v);this.clearHighlight(v);y.classList.remove("shallow");if(!O.isEmpty(v._viSelections)){v.clearSelections();v.endSelections();}},hideContextMenu:function(){var v=this.domMenuPH,x=v.firstChild,t=v.parentNode,u=this.widget;A.destroyDisposable(u,u.menuEditor);if(x){v.removeChild(x);}if(t){t.removeChild(v);}var w=u.menuEditor;if(w){u.removeChildren(w);w.unrender=function(){w._super();};w.destroy();w.unrender=function(){};delete u.menuEditor;}if(u.menuEditorClosefn){M.detachEvent(document.body,"touchstart",u.menuEditorClosefn,true);M.detachEvent(document.body,"mousedown",u.menuEditorClosefn,true);delete u.menuEditorClosefn;}},showContextMenu:function(x,t){var u=this.widget,v=this.domMenuPH,w=this;v.innerHTML="";document.body.appendChild(v);u._lastOpened=null;v.style.top=x.y+"px";v.style.left=x.x+"px";t.hostId=u.id;t.hostElement=v;u.menuEditor=t.newInstance({locksHover:false,unrender:function(){}});u.menuEditorClosefn=function(z){if(!u.menuEditor){return ;}var AB=z.target,y=u.menuEditor.domNode;if(!M.contains(y,AB,true,y)&&!W.isHostedPopupNode(AB,"class",true,document.body)){if(u.toolEditor){var AA=u.toolEditor.domNode;if(!M.contains(AA,AB,true,AA)){w.hideContextMenu();}}else{w.hideContextMenu();}}};M.attachEvent(document.body,"touchstart",u.menuEditorClosefn,true);M.attachEvent(document.body,"mousedown",u.menuEditorClosefn,true);u.openPopup(u.menuEditor);},getMenuConfig:function(AP,AI,AS,Ab){var AZ,AO=AP.GMController.disabledUnits,AV=AO.length,Ad,v=mstrApp.isAppStatePresentation(),u=AP.zonesModel.gmZones,AM=Ab&&Ab.el,AE=mstrmojo.all[u.hostId].zonesModel.id;var x=function(Af,Ah){var Ag=function(Al){var Aj=(function(){var An;g.forEach(AP.model.data.gts.row.concat(AP.model.data.gts.col),function(Ao){if(Ao.id&&Ao.id===Al){An=Ao.dp;Ad=Ao;}});return An;}()),Ak=AP.model.docModel.datasets,Ai=function(An,Aq){var Ao=g.find(An,"did",Aq.id),Ap=An[Ao];if(Ap&&!Ap.hide){Aq.n=Ap.n;return true;}return false;},Am=g.filter(Aj,function(Ap){var An;for(An in Ak){var Ao=Ak[An];if(Ai(Ao.att,Ap)){return true;}}return false;});if(Am){AO=g.filter(AO,function(Ao){for(var An in Am){if(Am[An].n===Ao.n){Ao.drillPath=Am[An];return true;}}return false;});AV=AO.length;}else{AV=0;}return AV;},Ae=function(){var Ai=new f.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});for(AZ=0;AZ<AV;AZ++){if(Ah){Ai.addMenuItem(AO[AZ].n,"xt",Aa,{drillUnit:AO[AZ],fromUnit:Ad});}else{Ai.addMenuItem(AO[AZ].n,"xt",Aa,{drillUnit:AO[AZ],fromUnit:{tid:Ad.id,isRowAttribute:false}});}}return Ai;};AV=Ag(Af);switch(AV){case 0:AS.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);break;default:AS.addSubMenuItem(mstrmojo.desc(145,"Drill"),"",this.id,Ae);}},AB=function(Al){var Aj=AP,Ah=Aj.model,Af=Aj.getTemplateUpdateForKeepOnlyAndShow(Al);var Ae=Aj.getContextMenuSelections(),Ai=Ah.getSelectorDataFromTemplateLimit(Aj.model.data.tpl).concat({keepOnly:true,data:Ae}),Ag=h.call(Aj),Am=Ah.getKeepOnlyActionsForAssociatedNodes(Ai,Ag);if(Ae&&Ae.length>0){Af.add(Am.actions,Am.callback);}b(Aj).execute({execute:function Ak(){this.submitUpdate(Af);},urInfo:{callback:Af.callback}});};var AT=function(Ag){var Af=(AP.getDocModel&&AP.getDocModel())||AP.model.docModel,Ae=AP.model.controller||Af.controller,Ah=L(Ae._getXtabCallback(AP),h.call(AP));Ae.applyKeepOnly(AP,Ah,{keepOnly:Ag,data:AP.getContextMenuSelections()},Ag?-2:undefined);};var AY=function(Ai){var Af=Ai.ctxt,Aj=AP.GMController,Ae=Af.isAsc,Ah,Ak,Ag=Af.identity;Ag.tid=Ag.id;AP.GMController.sortingMetric=false;if(Ag){if(AP.getWidgetPropertyValue(d.SORT_INDEX)){Aj.property.removeItem(d.SORT_INDEX);Aj.property.removeItem(d.SORT_ORDER);}var Al=Aj.attributeSelectionInfo[Ag.tid];Ah=Aj.getSortArray(null,null,Al,Ae);Ak=Aj.getSortActions(Ah);AP.updateAfterSort(Ak);}};var AH=function(Ah){AP.setWidgetPropertyValue("attributeSort",undefined);var Af=Ah.ctxt,Aj=AP.GMController,Ae=Af.isAsc,Al=Af.selInfo,Ag,Ai=Al.cellHandler||Aj.getCellHandler(0,0,Al.idx);if(Ai){Aj.sortingMetric=true;Ag=Aj.getSortArray(Ai,Ae);var Ak=Aj.getSortActions(Ag);AP.setWidgetPropertyValue(d.SORT_ORDER,Ae);AP.setWidgetPropertyValue(d.SORT_INDEX,Ai);AP.updateAfterSort(Ak);}};var AA=function(Ae){if(Ae&&mstrmojo.resolveFeature("set-attributeform-display")){var Ag=AP.zonesModel.gmZones,Af=AP.zonesModel.docModel.datasets;if(!AP.GMController.isHistogram&&n.hasMultiForms(Ae.did,Af)){AS.addEditorMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),Ag.id,function(){var Ah=AP.zonesModel;return n.getDisplayFormsMenu(Ae,Ah.getHost(),Ah.docModel.datasets,function(Ai){Ah.submitDropZoneUpdates(Ai);});});}}};var Aa=function(Af){var Ae=Af.ctxt.drillUnit;AB(Ae);AP.noHighlightAfterKeepOnlyExcludeDrill=true;};var AX=function(){AT(true);AP.noHighlightAfterKeepOnlyExcludeDrill=true;};var AQ=function(){AT(false);AP.noHighlightAfterKeepOnlyExcludeDrill=true;};var AU=function(Ae){if(mstrApp.appState===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION||mstrApp.isInVFInteractMode){return ;}Ae.addSeparator();Ae.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AP.parent.selectVIUnit();});};var y=function(Ae){AY(Ae);AP.setWidgetPropertyValue("attributeSort","ascending");};var AC=function(Ae){AY(Ae);AP.setWidgetPropertyValue("attributeSort","ascending");};var AN=function(){var Ae=AP.GMController.getSortActions([]);AP.removeWidgetProperty(d.SORT_ORDER);AP.removeWidgetProperty(d.SORT_INDEX);AP.updateAfterSort(Ae);AP.setWidgetPropertyValue("attributeSort",undefined);AP.clientRerenderGraphMatrix();};var Ac=function(Ag){var An=AP.zonesModel.gmZones,Aj,Aq,Ak,Ar,Am,Ae;var Ap=function(){var At,Av,Au;At=An.dropZones;for(Av in At){Aj=At[Av].items;for(Au in Aj){if(Aj[Au].did===Ag.identity.id){Aq=Aj[Au];return At[Av];}}}},Al=function(){var At,Av,Au;At=An.dropZones;for(Av in At){if(At[Av].id===Ag.identity.zone){Aj=At[Av].items;for(Au in Aj){if(Aj[Au].did===Ag.identity.id){Aq=Aj[Au];return At[Av];}}}}};Ak=AM?Al():Ap();Ae=g.find(Aj,"id",Aq.id);var Af={zone:Ak,axis:Ak&&Ak.id,idx:Ae,da:Aj[Ae].da,cnt:Aj.length,item:Aq,useDropzone:true};var Ai=Ag.identity.id||"",Ah=AP.GMController.attributeSelectionInfo[Ai],As=!An.docModel.isFromMDXCube(Ai);if(!v&&Af.da&&As&&!mstrApp.isInVFConfigMode){AS.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){An.editDerivedAttribute(Af);},Af);AS.addSeparator();}if(Ag.identity.zone!==Q.AdditionalMetrics&&Ag.identity.zone!==Q.ColorBy&&Ag.identity.zone!==Q.BreakBy&&!AP.GMController.isHistogram&&Ah&&!An.isCustomGroup(Ag.identity)){AS.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",y,{isAsc:true,identity:Ag.identity,item:Aq});AS.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",AC,{isAsc:false,identity:Ag.identity,item:Aq});if(AP.getWidgetPropertyValue("attributeSort")||AP.GMController.firstRes.gsi.sorts[0].length!==0||AP.GMController.firstRes.gsi.sorts[1].length!==0){AS.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",AN,{identity:Ag.identity,item:Aq});}AS.addSeparator();}if(!mstrApp.isInVFInteractMode){var Ao=An.isDynamicLink(Aq);if(!mstrApp.isInVFConfigMode&&!v&&Ag.identity.zone!==Q.ColorBy){As=!An.docModel.isFromMDXCube(Aq.did);if(An.allowInsertNewAttribute(Ak)&&!W.isCGorCon(AP,Aq)&&As&&!Ao&&mstrmojo.resolveFeature(Y.INSERT_NEW_METRIC)){AS.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){An.newDerivedAttribute(Af);},Af);}Ar=Aq.t===47&&An.getUnitInfoInTemplate(Aq.did).unit.ost===12033;Am=An.isAttribute(Aq)&&!An.hasOldDEOverDatasets(Aq.did)?mstrmojo.desc(13295,"Create Groups..."):(Ar?mstrmojo.desc(13296,"Edit Groups..."):null);if(Am!==null&&!Ao){AS.addMenuItem(Am,"eg",An.getCreateOrEditElementGroupFunc(Af));}AS.addSeparator();}if(!mstrApp.isInVFConfigMode&&!AP.GMController.isHistogram&&!AM&&mstrmojo.resolveFeature(Y.WEB_DRILL_AND_LINK)){x(Ag.identity&&Ag.identity.id);}if(!v){if(!Ao){AA(Aq);AS.addSeparator();}}if(An.hasReplaceCandidates(Af)&&(!v||!!mstrmojo.resolveFeature(Y.WEB_DRILL_AND_LINK))){AS.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",AP.zonesModel.id,An.getReplaceSubMenu,Af);}if(Ag.el){AS.addMenuItem(mstrmojo.desc(1388,"Rename"),"xt",function(){An.renameItem(Ag.el,Aq);});}if(!v){AS.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){An.deleteItem(Ak,Af.idx);});}}return AS;};var AG=function(Ag){var Ae=Ag.identity,Ah=AP,Am=Ah.GMController;Ae.rowId=AI.rowId;if(AP.GMController.isHistogram&&AI.axis==="y"){return ;}var Ak=Ah.zonesModel,Ai=Ak.gmZones,An=null,Al=[],Aj=(function(){var Ao,Aq,Ap;Ao=Ai.dropZones;for(Aq in Ao){if(Ao.hasOwnProperty(Aq)){Al=Ao[Aq].items;for(Ap in Al){if(Al.hasOwnProperty(Ap)){if(Al[Ap].did===Ae.id){An=Al[Ap];return Ao[Aq];}}}}}}()),Af={zone:Aj,axis:Aj&&Aj.id,idx:g.find(Al,"id",An.id),cnt:Al.length,item:An,useDropzone:true};if(An.um&&!v&&!mstrApp.isInVFInteractMode&&!mstrApp.isInVFConfigMode){AS.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){Ak.editDerivedMetric(Af,"edit");},Af);AS.addSeparator();}if(!AP.excludeData&&Am.supportSort()&&AP.GMController.getChartInfo().isABL&&!AP.GMController.isHistogram&&!AP.GMController.isBoxPlot&&Ag.identity.zone!==Q.AdditionalMetrics&&Ag.identity.zone!==Q.ColorBy){AS.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",AH,{isAsc:true,selInfo:Ae});AS.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",AH,{isAsc:false,selInfo:Ae});if(AP.GMController.firstRes.gsi.sorts[0].length!==0||AP.GMController.firstRes.gsi.sorts[1].length!==0){AS.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",AN,{item:An});}AS.addSeparator();}if(!mstrApp.isInVFInteractMode){if(!mstrApp.isInVFConfigMode&&!AP.GMController.isHistogram&&!v&&mstrmojo.resolveFeature(Y.INSERT_NEW_METRIC)){if(Ai.docModel.findDatasetIdFromUnit(An.did)&&!Ai.docModel.isFromSolrCube(An.did)&&!Ai.docModel.isFromMDXCube(An.did)){AS.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"xt",Ak.id,Ak.getAggregateByMetricSubMenu,Af);AS.addSeparator();}AS.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),Ak.id,Ak.getCalculationEditorCfg,Af);AS.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"xt",Ak.id,Ak.getShortcutMetricSubMenu,Af);AS.addMenuItem(mstrmojo.desc(13624,"New Metric..."),"xt",function(){Ak.newDerivedMetric(Af);},Af);AS.addSeparator();}AS.addSeparator();if(!v&&mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(Y.NUMBER_FORMATTING)){AS.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),AE,u.getNumberFormatEditorCfg,Af);}if(AM){if(Ag.identity.zone===Q.ColorBy){u.buildThresholdMenuOptions(AS,Af,true);}}AS.addSeparator();if(Ai.hasReplaceCandidates(Af)&&(!v||!!mstrmojo.resolveFeature(Y.WEB_DRILL_AND_LINK))){AS.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",Ah.zonesModel.id,Ai.getReplaceSubMenu,Af);}if(AM){AS.addMenuItem(mstrmojo.desc(1388,"Rename"),"xt",function(){Ai.renameItem(Ag.el,An);});}if(!v){AS.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){Ai.deleteItem(Aj,Af.idx);});}}return AS;};var AW,z;if(AI.type===q.AX_TITLE){if(u.isMetricName(Ab.identity)){if(Ab.identity.zone===Q.ColorBy){var AR=mstrmojo.all[u.hostId].zonesModel.id,AD=u.getZoneModelByZoneId(Q.ColorBy);AS.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[AR].deleteItem(AD,Ab.identity._renderIdx);});return AS;}return AS;}else{if(Ab.attributeAxis){z=Ac(Ab);}else{z=AG(Ab);}}if(!AM){AU(z);}return z;}else{if(AI.type===q.DATA_PT||AI.type===q.LASSO){if(mstrApp.isInVFInteractMode){return AS;}var w=AP.model.data.dz,AK=[w.SliceBy,w.BreakBy,w.XAxis,w.YAxis,w.Rows,w.Columns],AF=[];AP.contextMenuSelectedShapes.forEach(function(Ae){Ae.forEach(function(Af){AF=AF.filter(function(Ag){return Ag!==Af.id;});if(Af.id){AF.push(Af.tid);}});});g.forEach(AK,function(Ae){if(Ae.TemplateUnit){for(var Af=Ae.TemplateUnit.length-1;Af>=0;Af--){if(AF.indexOf(Ae.TemplateUnit[Af].id)!==-1){AW=Ae.TemplateUnit[Af].id;return false;}}}});if(AP.GMController.supportViewFilter&&AP.isLinkedFilterEnabled&&AP.isLinkedFilterEnabled()){var t=function(){AP.handleContextMenuSelectionData(true);};AS.addMenuItem(mstrmojo.desc(15070,"Go to Targets"),"",t);AS.addSeparator();}if(AW&&AP.GMController.supportViewFilter){AS.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"xt",AX);AS.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",AQ);if(!AP.GMController.isHistogram){if(mstrmojo.resolveFeature(Y.WEB_DRILL_AND_LINK)){x(AW,true);}if(!v){AS.addSeparator();var AL=e(AP._viContextMenuSelections),AJ=X(AP,AL);["editGroup","editCalculation","createDe"].forEach(function(Ae){W.absorbMenuItems(AS,AJ[Ae],true);});}}}}}return AS;},onContextMenu:function(y,AB,AI,w){if(w){return ;}if(AI&&AI.shape&&AI.shape.type===q.DO_NOT_CLEAR){return ;}y.tooltip.hideTooltip(0);if(y.noHighlightAfterKeepOnlyExcludeDrill){y.clearSelections();}this.clearRMCStyle(y);var AK,AD,AA,z,AH,AC,AF,u,v;if(AI.points){AI.shape={};AI.shape.type=q.DATA_PT;AH=AI.event;y._viContextMenuSelections=[];if(AH){if(AH.stopPropagation){AH.stopPropagation();}AH.preventDefault();AH.cancelBubble=true;}AD=AI.points[0];if(!AD.information){return ;}}else{if(AI.shape&&AI.shape.type===q.AX_TITLE){u=AI.shape;var x=u.axis,t=u.axisNum,AE=u.titleNum,AJ=u.attrAxis;if(AJ){if(x==="x"){AF=y.GMController.getXAxisHeaders(1,t)[AE];}else{if(x==="y"){AF=y.GMController.getYAxisHeaders(1,t)[AE];}}}else{if(u.identity){AF=u.identity;}else{return ;}}}else{if(AI.shape&&AI.shape.type!==q.LASSO){return ;}}}z=new f.ui.menus.MenuConfig();u=AI.shape;if(u){if(u.type===q.AX_TITLE){var AG={identity:AF,attributeAxis:u.attrAxis};AK=this.getMenuConfig(y,u,z,AG);}else{if(u.type===q.DATA_PT||u.type===q.LASSO){if(AI.points){AA=D(y,AI.points,false,true,false);if(!y.GMController.isHistogram||!y.GMController.isBoxPlot){y.addContextMenuMetricValueSelection(AA);}}else{AI.points=[];s(y);}AC=u.type===q.LASSO||P(y,AB,AD);y.contextMenuSelectedShapes=K(y._viContextMenuSelections);if(u.type===q.DATA_PT){if(y.GMController.isWaterfall&&AD.data.isFakeBar&&AD.data.information[AD.pointNumber]){this.styleWaterfallOverlappedBar(AD.data,AD.pointNumber,AC,AB,"rightMouse");}else{if(y.GMController.isWaterfall&&AD.data.isFakeBar){return ;}else{if(y.GMController.isWaterfall){v=AD.information===-1;}}}if(AD&&AD.__target&&!v){AB.classList.add("shallow");AD.__target.classed("RMClicked",true);if(AC){AD.__target.classed("selected",true);}y.rightMouseHighlights=[AD.__target[0][0]];}else{if(u.type!==q.LASSO&&!v){var AL=F(y._viContextMenuSelections);y.rightMouseHighlights=E(V(AB,AL,y),AC,AB);}}}AK=this.getMenuConfig(y,u,z,AI.points);}}}if(AK&&AK.hasMenuItems()&&!w){this.showContextMenu({x:AI.event.clientX,y:AI.event.clientY},AK);}return false;},onLayoutChanged:function(t,u){k(u);},onClick:function(AA,t,AB,v,w){var AD=false;AA.noHighlightAfterKeepOnlyExcludeDrill=false;if(!w){k(t);}if(!U(AA,AB.points,v)){var AC=this,y=function(){AA.clearSelections();k(t);t.classList.remove("shallow");AC.clearHighlight(AA);AA.endSelections();};var x=mstrmojo.desc(16266,"To increase the maximum limit on data point selection, please go to Format Panel > Histogram Options > More Options.");if(AA.GMController.isWaterfall){x=mstrmojo.desc(16267,"To increase the maximum limit on data point selection, please go to Format Panel > Waterfall Options > More Options.");}else{if(AA.GMController.isBoxPlot){x=mstrmojo.desc(16268,"To increase the maximum limit on data point selection, please go to Format Panel > Box Plot Options > More Options.");}}mstrmojo.alert(mstrmojo.desc(16269,"The amount of data points you have selected is outside the maximum limit.")+"\n \n"+x,y);return ;}this.clearRMCStyle(AA);if(AB.event&&!v&&!O.isEmpty(AA._viSelections)){AD=true;AA.clearSelections();}else{if(!AB.points){return ;}}t.classList.add("shallow");if(!w&&!v){this.clearHighlight(AA);AA.highlights=[];}var z,u;z=D(AA,AB.points,w,false,true);if(z&&!O.isEmpty(z)){AD=true;AA.addMetricValueSelection(z);}if(AA.GMController.isBoxPlot||AA.GMController.isHistogram){u=S(AA,t);this.highlightSelected(AA,u,t);}var AE=AB.points&&AB.points[0];if(AE.data.isFakeBar&&AE.data.information&&AE.data.information[AE.pointNumber]){this.styleWaterfallOverlappedBar(AE.data,AE.pointNumber,false,t,"highlight");}else{if(AB.points&&AB.points[0].__target&&!w&&!O.isEmpty(AA._viSelections)){if(AB.points[0].information){this.highlightPoint(AB.points[0].__target[0][0]);}}}this.resetHighlights(AA,t);if(AD||!O.isEmpty(AA._viSelections)){AA.endSelections();}},onSelected:function(w,z,y,x){delete w.noHighlightAfterKeepOnlyExcludeDrill;var v=this,u=(!y||!y.points||!y.points.length);if(u){k(z);if(y){if(!x){if(!O.isEmpty(w._viSelections)){w.clearSelections();w.endSelections();}this.resetHighlights(w,z);}}}else{if(!x&&y.event.which!==3){if(!O.isEmpty(w._viSelections)){w.clearSelections();}this.resetHighlights(w,z);z.classList.add("shallow");}var t=true;y&&y.points.forEach(function(AA){if(AA.data.isFakeBar||AA.data.information===-1||AA.data.information[AA.pointNumber]===-1){return ;}t=false;if(AA.__target){v.highlightPoint(AA.__target[0][0]);}});if(t&&y&&!x){w.endSelections();this.resetHighlights(w,z);}this.onClick(w,z,y,x,true);}},onHover:function(AA,AB,AL,x,AD,AH,AN,AG,z,AK){var y,AJ,AI,u,AM,w=false,t=AL.isWaterfall,AE=AL.isBoxPlot;AI=AB.points[0];y=AI.xaxis;AJ=AI.yaxis;u=AB.hovermode;if(u==="closest"||u===undefined){if(AE){var v=AN[AI.curveNumber][0];AM=AA.addDataAndSize(v,y,AJ,AL,AD);T(z,AB.points,AG);}else{if(t){if(AI.data.information===-1){return ;}if(AI.data.isFakeBar&&AI.data.information[AI.pointNumber]){w=true;this.styleWaterfallOverlappedBar(AI.data,AI.pointNumber,false,AG,"hover");}else{if(AI.data.isFakeBar){return ;}}var AC=AI.data.tooltipMetrics,AF=AC[AI.pointNumber];if(AI.fullData.orientation==="v"){AI.y=AF;}else{AI.x=AF;}}if(AI.__target&&!w){z.hoveredShape.push(AI.__target.classed("hovered",true));if(!z.GMController.isHistogram&&!z.GMController.isBoxPlot&&(z.GMController.chartType===c.LINE||z.GMController.chartType===c.AREA)&&AI.__target.style){AI.__target.style("stroke-opacity",1);}}AM=AA.addDataAndSize(AI,y,AJ,AL,AD);}if(!AK){M.attachEvent(AG,"mousemove",AA.move.call(AA,AH));}if(AM){AA.showTooltip();}}},onUnhover:function(w,u,t,v){t.hoveredShape.forEach(function(x){if(x.classed){x.classed("hovered",false);}else{if(x.classList.remove){x.classList.remove("hovered");}}if(!t.GMController.isHistogram&&!t.GMController.isBoxPlot&&!t.GMController.isWaterfall&&(t.GMController.chartType===c.LINE||t.GMController.chartType===c.AREA)&&x.style&&!x.classed("RMClicked")){x.style("stroke-opacity",0);}});t.hoveredShape=[];u.hideTooltip();if(!v){M.detachEvent(w,"mousemove",u.move.call(u));}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFontAlignment","EnumFontStyle","EnumFontRotation","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMAxisScale");var AO=mstrmojo.chart,V=mstrmojo.hash,AX=mstrmojo.gm,Ab=AX.GMUtility,O=mstrmojo.VisUtility,P=AX.EnumGraphType,D=AX.EnumSubtype,M=AX.EnumABLDirection,j=AX.EnumColorByType,Z=AX.EnumShape,s=AX.EnumGMZoneIds,T=mstrmojo.array,o=AX.EnumIdentityType,K=AX.FormatingPropertyTag,b=AX.WidgetPropertyTag,AW=false,J=3,AU=4,E=mstrmojo.gm.ShapeFillType,AN=true;function AJ(){var Al=this.dp,Ak=Al.lds,Ae=this.groupData.length,Ai=[],Ah=Ak.getOffsetX(),Af=Ak.getOffsetY(),Aj,Ag;for(Aj=0;Aj<Ae;Aj++){Ai.push(this.groupData[Aj].C-Ah);}Ag=this.groupData[0].R-Af;return{lr:Ag,lcs:Ai};}function AD(Ai){var Ae=parseInt(Ai,10),Al=this.dp,Ah=Al.lds,Ag=Ah.gmm,Af=Al.getMetricIds(),Ak,Aj=Al.getMetricNames();if(Ae<0){return undefined;}Ak=Ag.getFullNumberFormat();return{idx:Ae,metric:Aj[Ae],id:Af[Ae],fullNf:Ak!==undefined?Ak[Ae]:undefined};}function AP(An,Ah){var Ag=this.dataSbc,Ae,Ai,Aq,Af=this.getChartInfo(),Aj=this.lds,Ak=Aj.gmm,Ap=Ak.onlyMetricNamesOnAxisForGridPie,Ao=Ak.isMetricNamesOnXAxis,Al=-1;if(Ag===true){Ai=parseInt(An,10);Ae=parseInt(Ah,10);}else{Ae=parseInt(An,10);Ai=parseInt(Ah,10);}if(this.cache[Ae]===undefined){this.cache[Ae]=[];}if(this.cache[Ae][Ai]!==undefined){return this.cache[Ae][Ai];}if(Ap){if(Ao){Al=this.metricsOnAngleBy[Ae];}else{Al=this.metricsOnAngleBy[Ai];}}Aq=this.data&&this.data[Ae]&&this.data[Ae][Ai];var Am=null;if(Aq){Am=new u({groupData:Aq,dp:this,chtInfo:Af,metricsOnAngleBy:Ap?[Al]:this.metricsOnAngleBy,splitPie:this.splitPie,sID:An,gID:Ah,metricIndexForLabelForGridPie:Al});this.cache[Ae][Ai]=Am;}return Am;}function X(Ak){var Ar=this,Ai,Am=this.dp.lds,Ap=Am.gmm,Aj=[s.XAXIS,s.YAXIS,s.COLORBY,s.SIZEBY,s.TOOLTIP],Af=this.chtInfo,An,Al=Ak.length;function As(At){var Au=[];T.forEach(At,function(Av){if(Av.toDelete!==true){Au.push(Av);}});return Au;}function Ao(At){if(Ap.isMetricInZone(Ak[Ai].midx,At)){An.push(At);}}if(Af.isABL){var Ag=Ar.getMetricIndex(0);var Ae=Af.dirc===M.VERTICAL?s.YAXIS:s.XAXIS;for(Ai=0;Ai<Al;Ai++){An=[];T.forEach(Aj,Ao);if(An.length===0){Ak[Ai].toDelete=true;}if(An.length===1&&An[0]===Ae){if(Ag!==Ak[Ai].midx){Ak[Ai].toDelete=true;}}}}if(Af.isBubbleOrScatter){var Ah=[];this.getMetricsIndexArray(Ah);for(Ai=0;Ai<Al;Ai++){An=[];T.forEach(Aj,Ao);if(An.length===0){Ak[Ai].toDelete=true;}if(!!!Ak[Ai].toDelete&&Ah.indexOf(Ak[Ai].midx)<=-1){if(An.indexOf(s.TOOLTIP)===-1&&An.indexOf(s.COLORBY)===-1){Ak[Ai].toDelete=true;}}}}if(Af.isPie){var Aq=[s.XAXIS,s.YAXIS,s.SIZEBY];for(Ai=0;Ai<Al;Ai++){if(Ak[Ai].toDelete===true){continue;}An=[];T.forEach(Aq,Ao);if(An.length===0){Ak[Ai].toDelete=true;}}}return As(Ak);}function AC(Ae){return(Ae.R!==undefined&&Ae.C!==undefined&&Ae.oy!==undefined&&Ae.ox!==undefined);}function AT(Aw,BA,A6){var A4=this.dp.lds,BI=this.chtInfo,Ag=A4.gmm,BB=Ag.gmCtr,Aj=BB.rowHeaderCnt,Af=BB.colHeaderCnt,A5,A8,Ap=Ag.getUnitAttributesCountOnRow(true),Ai=Ag.getUnitAttributesCountOnCol(true),At=BB.getGMHeaderCount("SliceBy"),A0=Ap,Ao=Ai,Ar,Ae,BD=Aw.length===0,Ak,BK,BG,Ah,BJ=Ag.getMetricNames(),Ax=BJ.length,BC,A3,As;var BE=this.groupData[0],A1=A4.getOffsetX(),Az=A4.getOffsetY(),A2=BE.R-Az,A7=BE.C-A1;Ar=Ap-Aj;Ae=Ai-Af;if(At>0&&BI.isPie){if(BI.isABL&&BI.dirc===AX.EnumABLDirection.HORIZONTAL){Ae-=At;Ao-=At;}else{Ar-=At;A0-=At;}}if(Ar>0){A5=A4.getRowHeaders(A2,"all",BA===true?"n&id&dei&o&at&idx":"n&idx");Ak=Ag.getRowTitleInfo();if(Aw.length>0){if(!BA){Aw.push(null);}BD=true;}Ab.generateToolTipContent(Aj,A0,true,Ak,A5,Aw,!BA);}if(Ae>0){A8=A4.getColHeaders(A7,"all",BA===true?"n&id&dei&o&at&idx":"n&idx");BK=Ag.getColTitleInfo();if(!BD&&Aw.length>0){if(!BA){Aw.push(null);}BD=true;}Ab.generateToolTipContent(Af,Ao,false,BK,A8,Aw,!BA);}if(!BA&&Ax>0){if(!BD&&Aw.length>0){if(!BA){Aw.push(null);}BD=true;}A3=[];Ah=[];Ah.push(A7);for(BG=0;BG<Ax;BG++){BC=A4.getAssoDataWithMetricIndex(A2,Ah,BG,false);A3.push({n:BJ[BG],v:BC,midx:BG});}A3=X.call(this,A3);As=A3.length;for(BG=0;BG<As;BG++){Aw.push(A3[BG]);}if(BI.isABL&&BI.sbtp===D.PERCENT){var Al=BE.grp,An=this.dp.getTotalOfGroup(Al),A9=this.getData(0),Am=mstrmojo.desc(14141,"Percent Contribution"),Ay=A9/An;Ay=(Ay*100).toFixed(2)+"%";Aw.push({n:Am,v:Ay,isPerCon:true});}}if(BA&&A6){var Av=[],BF,Aq,Au,BH;this.getMetricsIndexArray(Av);Av=Av.slice(0,this.groupData.length);Aq=Av.length;Au=Ag.getMetricIDsFromIndex(Av);BH=Ag.getMetricNamesFromIndex(Av);for(BF=0;BF<Aq;BF++){Aw.push({eid:Au[BF],n:"Metrics",tid:-1,v:BH[BF]});}}return Aw;}function AZ(Ah,Aj){var Ag=Ah.getOffsetX(),Ae=Ah.getOffsetY(),Af=Aj.R-Ae,Ai=Aj.C-Ag;return Ah.getData(Af,Ai);}function R(Ah,Ak){var Aj=this.isPie,Ai=this.gc,Ae=this.sPieDP,Ag=this.sliceIdx,Af;if(!Aj){Af=Ai.getTooltipContent(Ah,Ak);}else{Af=Ae.getTooltipContent(Ag,Ah,Ak);}return Af;}function AL(Ag,Ah){var Af,Ae;if(Ag){Ae=Ag.length;for(Af=0;Af<Ae;Af++){if(Ag[Af].id===Ah){return Af;}}}return -1;}function AB(Af,Ae){var Ai,Ag=[],Ah;Ai=this.getSelectedObjectInfo(Ae);Ah=Ab.reverseMapping(Af);T.forEach(Ai,function(Aj){if(Aj.tid===-1){Ag.push(Aj);}else{if(Ah[Aj.tid]!==undefined){Ag.push(Aj);}}});return Ag;}var f=mstrmojo.declare(mstrmojo.Base,null,{init:function AE(Aj){this._super(Aj);var An=this.gc,Am,Ao,Ah,Al,Ap,Ae,Ag,Ai=-1,Af=-1;if(this.isFaked){return ;}Am=An.dp.lds.gmm.gmCtr;Ao=Am.dz;Ah=this.hInfo;if(Ah.isAtt===false){return ;}Al=Ah.unit;Ap=["XAxis","YAxis"];if(Al.otp!==4){for(Ag=0;Ag<Ap.length;Ag++){Ae=Ao[Ap[Ag]];var Ak=AL(Ae.TemplateUnit,Al.id);if(Ak>=0){Af=Ak;if(Ag===0){Ai=J;}else{Ai=AU;}break;}}this.dzindex=Af;this.dzid=Ai;}}});var z=mstrmojo.declare(mstrmojo.Base,null,{getGraphCell:function(){var Ae;if(this.isPie){Ae=this.sPieDP.graphCell;}else{Ae=this.gc;}return Ae;},getShape:function(){var Ae=this.getChartInfo();if(Ae.isABL){return this.getGraphCell().getShape();}return Ae.shape;},getAssMetricDataLabelID:function(){var Ai,Ag=this.getGraphCell(),Ah=Ag.getGMCtr(),Aj=Ag.chtInfo;if(this.isPie===false){if(Aj.isABL){Ai=Ag.getMetric(0);}else{if(Aj.tp===P.BUBBLE||Aj.tp===P.SCATTER){Ai=Ag.getMetric(1);}else{if(!Ah.hasSizeBy()){Ai=undefined;}else{Ai=AD.call(Ag,Ah.getSizeByMetrics()[0]);}}}}else{var Ae=this.sPieDP,Af=this.sliceIdx;Ai=Ae.getMetric(Af);}if(Ai!==undefined){return Ai.id;}return undefined;},getTooltipContent:function(){return R.call(this,false);},getSelectedObjectInfo:function(Ah){var Ag=Ah?"objectInfoWithMetric":"objectInfo";if(this[Ag]){return this[Ag];}var Ae=R.call(this,true,Ah),Af=[];T.forEach(Ae,function(Ai){if(Ai){Af.push(Ai);}});if(Af.length>1){Af.sort(Ab.compareElementObj);}this[Ag]=Af;return Af;},getSelectedObjectMetricInfo:function(Ag){if(this.objectMetricInfo){return this.objectMetricInfo;}var Af,Ae=[];if(Ag){Af=Ag;}else{Af=this.getSelectedObjectInfo(true);}T.forEach(Af,function(Ah){if(Ah.tid===-1){Ae.push(Ah);}});this.objectMetricInfo=Ae;return Ae;},getSelectedObjectColorByInfo:function(){if(this.objectColorByInfo){return this.objectColorByInfo;}var Ai=[],Aj,Ag,Ak,Al,Ah,Af=false;if(this.isPie){Aj=this.sPieDP.graphCell;}else{Aj=this.gc;}Ag=Aj.dp.lds.gmm;Ak=Ag.gmCtr;if(Ag.colorType!==j.NULL){Al=Ak.getColorByAttrsID();if(Ag.colorType===j.ATT_METRICS||Ag.colorType===j.METRICS_ITEM){Af=true;}Ai=AB.call(this,Al,Af);Ah=Ak.colorByInfo.tp;if(Ah===j.METRICS_ITEM||Ah===j.ATT_METRICS){if(Aj&&Aj.chtInfo&&Aj.chtInfo.isBubbleOrScatter){var Ae=Aj.getSizeByMetricFormat();if(Ae){Ai.push({eid:Ae.id,n:"Metrics",tid:-1,v:Ae.metric});}}}}this.objectColorByInfo=Ai;return Ai;},getSelectedObjectBreakByInfo:function(Ak){var Aj=Ak?"objectBreakByInfoWithMetric":"objectBreakByInfo";if(this[Aj]){return this[Aj];}var Af,Ag,Ae,Ah,Ai,Al;if(this.isPie){Ag=this.sPieDP.graphCell;}else{Ag=this.gc;}Ae=Ag.dp.lds.gmm;Ah=Ae.gmCtr;Ai=Ah.getColorByAttrsID();Al=Ah.getBreakByAttrsID();Af=AB.call(this,Al.concat(Ai),Ak);this[Aj]=Af;return Af;},getSelectedObjectSliceByInfo:function(Af){var Ah=Af?"objectSliceByInfoWithMetric":"objectSliceByInfo";if(this[Ah]){return this[Ah];}var Ai,Am,Ag,Al,Ae,Aj,Ak;if(this.isPie){Am=this.sPieDP.graphCell;}else{Am=this.gc;}Ag=Am.dp.lds.gmm;Al=Ag.gmCtr;Ae=Al.getColorByAttrsID();Aj=Al.getBreakByAttrsID();Ak=Al.getSliceByAttrsID();Ai=AB.call(this,Aj.concat(Ae.concat(Ak)),Af);this[Ah]=Ai;return Ai;},getSelectedSliceAngleByMetric:function(){if(this.isPie){return this.sPieDP.getSelectedSliceAngleByMetric(this.sliceIdx);}return undefined;},getSelectedObjectLowestLevel:function(Af){var Ae=this.getGraphCell(),Ag=Ae.chtInfo;if(Ag.isPie){return this.getSelectedObjectSliceByInfo(Af);}return this.getSelectedObjectBreakByInfo(Af);},isEqualToObjectInfo:function(Ae,Ag){var Af=this.getSelectedObjectInfo(Ag);return Ab.isEqualComb(Af,Ae);},isEqualToIdentity:function(Ae,Af){if(!Ae){return false;}return this.isEqualToObjectInfo(Ae.getSelectedObjectInfo(Af),Af);},getChartInfo:function(){var Ae=this.gc||this.sPieDP.graphCell,Ah=Ae.dp,Ag=Ah.lds.gmm.gmCtr;var Af=Ag.getChartInfo();if(Af.isCombo){Af.currentMarkerShape=Ah.getShapeBySeries(Ae.sID);if(Af.currentMarkerShape===7){Af.currentMarkerShape=200;}else{if(Af.currentMarkerShape===2){Af.currentMarkerShape=204;}else{if(Af.currentMarkerShape===1){Af.currentMarkerShape=205;}else{if(Af.currentMarkerShape===0){Af.currentMarkerShape=206;}else{if(Af.currentMarkerShape===4){Af.currentMarkerShape=4;}else{if(Af.currentMarkerShape===5||Af.currentMarkerShape===6){Af.currentMarkerShape=24;}}}}}}}else{if(Af.isABL&&Af.ceMarkerShape===undefined){Af.ceMarkerShape=Ah.getShapeBySeries(Ae.sID);if(Af.ceMarkerShape===7){Af.ceMarkerShape=200;}else{if(Af.ceMarkerShape===2){Af.ceMarkerShape=204;}else{if(Af.ceMarkerShape===1){Af.ceMarkerShape=205;}else{if(Af.ceMarkerShape===0){Af.ceMarkerShape=206;}else{if(Af.ceMarkerShape===4){Af.ceMarkerShape=4;}else{if(Af.ceMarkerShape===5||Af.ceMarkerShape===6){Af.ceMarkerShape=24;}}}}}}}Af.currentMarkerShape=Af.ceMarkerShape;}return Af;}});var r=mstrmojo.declare(mstrmojo.Base,null,{graphCell:undefined,tot:undefined,sliceByMetrics:undefined,sliceIdentities:undefined,init:function AE(Ag){this._super(Ag);this.dataCache={};this.sliceIdentities=[];this.sliceDataLabelIdentities=[];var Ai=this.innerGetSliceCount(),Af,Ah=true,Ae=[];for(Af=0;Af<Ai;Af++){if(this.innerGetData(Af)!==0){Ae.push(Af);}else{Ah=false;}}this.allValid=Ah;this.validSlices=Ae;},innerGetSliceCount:function(){var Ai=this.graphCell,Ah=Ai.groupData,Ag=Ah.slicesOfPie,Aj=this.angleBy.length,Af=Ai.dp.lds.gmm,Ae=Af.onlyMetricNamesOnAxisForGridPie;if(Aj===0){return Ag.length;}if(Ae){Aj=1;}return Ag.length*Aj;},getInnerSliceIndex:function(Af,Ae){if(Ae){return Af;}return this.validSlices[Af];},getOutSliceIndex:function(Ag,Af){if(Af){var Ae;if(this.allValid){return Ag;}for(Ae=0;Ae<this.validSlices.length;Ae++){if(this.validSlices[Ae]===Ag){return Ae;}}}return Ag;},getSelectedSliceAngleByMetric:function(Ag){var Ai=this.getInnerSliceIndex(Ag),Ae=this.graphCell.dp.lds.gmm,Aj=this.angleBy.length;if(Aj>0){var Ah=this.getMetricNameOfSlice(Ai,true),Af=this.getMetricIndexOfSlice(Ai,true);return{n:"Metrics",tid:-1,v:Ah,eid:Ae.getMetricIDsFromIndex([Af])[0]};}return undefined;},getSliceCount:function(){return this.validSlices.length;},getTooltipContent:function(Ax,As,Ah){var Ar=this.getInnerSliceIndex(Ax),Aq,A0=this.graphCell,An=this.getSliceTitles(),Ay=this.getSliceLabel(Ar,true),Av=An.length,Ap=this.angleBy.length,Aw,Al,Am,Au,Af,Aj,Ag,Ai=A0.dp.lds.gmm,Az=Ai.gmCtr,Ak,Ae=Ai.getMetricNames();Aq=A0.getTooltipContent(As,Ah);if(Aq.length>0&&Aq[Aq.length-1]!==null){if(!As){Aq.push(null);}}Ab.generateToolTipContent(0,Av,undefined,An,Ay,Aq);if(Ap>0){Am=this.getMetricNameOfSlice(Ar,true);Ak=this.getMetricIndexOfSlice(Ar,true);if(!As){Au=this.innerGetData(Ar,Ak,false);for(Aw=0;Aw<Aq.length;Aw++){if(Aq[Aw]!==null&&(Aq[Aw].n===Am||Aq[Aw].isPerCon)){Aq[Aw].n=mstrmojo.desc(2121,"Total")+" "+Aq[Aw].n;}}Aq.push({n:Am,v:Au});Af=mstrmojo.desc(14141,"Percent Contribution");Aj=this.getPercentage(Ar,true);Aj=(Aj*100).toFixed(2)+"%";Aq.push({n:Af,v:Aj});var At=Az.colorByInfo;if(At.tp===j.METRICS&&At.metrics){var Ao=At.metrics[0].n;if(Ao!==Am){for(Aw=0;Aw<Aq.length;Aw++){if(Aq[Aw]!==null&&Aq[Aw].n===Ao){Aq[Aw].n=mstrmojo.desc(2121,"Total")+" "+Aq[Aw].n;}}Aq.push({n:Ao,v:this.innerGetData(Ar,At.metrics[0].idx,false)});}}}else{if(Ai.colorType===j.ATT_METRICS||Ai.colorType===j.METRICS_ITEM){Aq.push({n:"Metrics",tid:-1,v:Am,eid:Ai.getMetricIDsFromIndex([Ak])[0]});}}}if(!As){Al=Az.getMetricsOnTooltip();Av=Al.length;for(Aw=0;Aw<Av;Aw++){Ag=Al[Aw];Am=Ae[Ag];Au=this.innerGetData(Ar,Ag,false);Aq.push({n:Am,v:Au});}}return Aq;},getDataLabelIdentity:function(Ai,Ag){var Al=this.getOutSliceIndex(Ai,Ag);var Ak=this.sliceDataLabelIdentities;if(Ak[Al]===undefined){var Aj=this.graphCell,Af=Aj.dp.lds.gmm.cct,Ae=this.getCoordinates(Al),Ah=Ae.R*Af+Ae.C;Ak[Al]=new z({objType:o.DATA_LABEL,sPieDP:this,isPie:true,sliceIdx:Al,id:Ah});}return Ak[Al];},getIdentity:function(Ai,Ag){var Al=this.getOutSliceIndex(Ai,Ag);var Ak=this.sliceIdentities;if(Ak[Al]===undefined){var Aj=this.graphCell,Af=Aj.dp.lds.gmm.cct,Ae=this.getCoordinates(Al),Ah=Ae.R*Af+Ae.C;Ak[Al]=new z({objType:o.GRAPH_SHAPE,sPieDP:this,isPie:true,sliceIdx:Al,id:Ah});}return Ak[Al];},getCoordinates:function(At,Ag,Af){var Aq=this.getInnerSliceIndex(At,Af);var Au=this.graphCell,As=Au.dp.lds.gmm,Ah=As.onlyMetricNamesOnAxisForGridPie,Ar=this.angleBy,Ap=Ah?1:Ar.length;var Av=Au.groupData,Ae=Av.slicesOfPie,Ak,Ao,Am=Au.dp.lds,Aj=Am.getOffsetX(),Ai=Am.getOffsetY(),Aw=[],Al,An;if(Ap>0){Ak=parseInt(Aq/Ap,10);}else{Ak=Aq;}Ao=Ae[Ak];An=Ao[0];Al=An.R-Ai;Aw.push(An.C-Aj);if(Ag!==undefined){return Am.getAssoCoordinatesWithMetricIndex(Al,Aw,Ag);}if(Ap>0){return Am.getAssoCoordinatesWithMetricIndex(Al,Aw,Ar[Aq%Ap]);}return Am.getAssoCoordinatesWithMetricIndex(Al,Aw,0);},getMetricNameOfSlice:function(Ai,Ah){var Ag=this.getMetricIndexOfSlice(Ai,Ah),Aj=this.graphCell,Af=Aj.dp.lds.gmm,Ae;if(Ag<0){return"";}Ae=Af.getMetricNames();return Ae[Ag];},getMetricIndexOfSlice:function(Ae,Ak){var Ah=this.getInnerSliceIndex(Ae,Ak),Aj=this.graphCell,Am=this.angleBy,Ag=Am.length,Ai,Af=Aj.dp.lds.gmm,Al=Af.onlyMetricNamesOnAxisForGridPie;if(Ag===0){return -1;}if(Al){Ai=Aj.metricIndexForLabelForGridPie;}else{Ai=Am[Ah%Ag];}return Ai;},getMetric:function x(Ag,Af){var Ah=this.getInnerSliceIndex(Ag,Af);var Ae=this.getMetricIndexOfSlice(Ah,true);if(Ae>=0){return AD.call(this.graphCell,Ae);}return undefined;},isIndividualFormatted:function(Ah,Ag){var Ak=this.getInnerSliceIndex(Ah,Ag);var Aj=this.graphCell.getGMCtr(),Af,Ai,Ae;Af=this.getIdentity(Ak,true);Ai=Af.getSelectedObjectLowestLevel(true);Ae=Aj.getShapeFormatsWithCombination(Ai);return !!Ae;},getFormattingProperties:function(Ap,Af){var Ay,Al=this.getInnerSliceIndex(Ap,Af),Ax,As=this.graphCell.getGMCtr(),An,Aw,Ag,Au,At,Ah=K.ALL_SHAPE_FORMAT,Am,Av,Aq;An=As.getDefaultsForShape(As.getChartInfo().shape);Ax=this.getIdentity(Al,true);var Ae=As.getShapeFormatsObject();if(Ae){Aq=Ax.getSelectedObjectLowestLevel(true);Am=Ax.getSelectedObjectMetricInfo(Aq);Av=Ax.getSelectedObjectColorByInfo();}Aw=this.graphCell.getPropertyValue(Ah);Ag=As.getShapeFormatsWithCombination(Am);Au=As.getShapeFormatsWithCombination(Av);At=As.getShapeFormatsWithCombination(Aq);Ay=Ab.getResolvedFormatsObject([An,Aw,Ag,Au,At]);var Ak=this.getColorByData(Al,true),Ar;if(Ay===An){Ar=As.getVolatileDefaultsForShape(As.getChartInfo().shape);}else{Ar=Ay;}Ak=(Ak!==undefined&&Ak!==null)?Ak:Ar[K.SHAPE_FILL_COLOR];var Ai=false;if(Ak&&typeof Ak==="object"){Ai=true;}if(Ak!==undefined){Ar[K.SHAPE_LINE_COLOR]=Ar[K.SHAPE_FILL_COLOR]=Ak;if(Ay[K.LINE_MARKER_COLOR]===undefined){Ar[K.LINE_MARKER_COLOR]=Ai?Ak.c1:Ak;}if(Ay[K.LINE_MARKER_BORDER_COLOR]===undefined){Ar[K.LINE_MARKER_BORDER_COLOR]=Ai?Ak.c1:Ak;}if(Ay[K.SHAPE_BORDER_COLOR]===undefined){Ar[K.SHAPE_BORDER_COLOR]=Ai?Ak.c1:Ak;}}Ar[K.SHAPE_FILL_STYLE]=Ai?E.Gradient:E.Solid;var Aj=this.graphCell.getPropertyValue(b.METRIC_LEVEL_DATA_LABEL);if(Aj===undefined){Ar[K.DATA_LABELS_SHOW]=AN;}else{var Ao=Ax.getAssMetricDataLabelID();if(Ao!==undefined){Ar[K.DATA_LABELS_SHOW]=Aj[Ao];}else{Ar[K.DATA_LABELS_SHOW]=false;}}return Ar;},getData:function(Af,Ah,Ae){var Ag=this.validSlices[Af];return this.innerGetData(Ag,Ah,Ae);},innerGetData:function(Ak,Ah,Ao){if(this.dataCache[Ak]){return this.dataCache[Ak];}var An=this.graphCell,Ar=this.angleBy,Ai=Ar.length,Aq,Ap,Ag,Af,Aj=An.dp.lds;Aq=this.getCoordinates(Ak,Ah,true);Ag=Aq.R-Aq.oy;Af=Aq.C-Aq.ox;var Ae=false,Al=Aj.gmm,Am=Al.gmCtr;Ae=(Am.isGrid()&&Al.getMetricCount()===0);if(!Ae&&Aj.checkExcluded(Ag,Af)){return 0;}if(Ai===0&&Ah===undefined){return 1;}Ap=Aj.getData(Ag,Af,Ao,Ah);if(Ao&&isNaN(Ap)){return 0;}return Ap;},getColorByData:function(Ae,Ap,Af){var Ak=this.getInnerSliceIndex(Ae,Ap),Am;var Ao=this.graphCell,Ah=[],Al,Aq=this.angleBy,Ai=Aq.length,An,Aj=Ao.dp.lds,Ag=Aj.gmm;if(Ag.colorType===j.NULL){return null;}Al=this.getCoordinates(Ak,undefined,true);if(Ag.colorType===j.ATT_METRICS||Ag.colorType===j.METRICS_ITEM){Ao.getMetricsIndexArray(Ah);if(Aq.length!==0){Am=this.getMetricIndexOfSlice(Ae,Ap);if(Am<0){Am=Aq[Ak%Ai];}Ah.push(Am);}}An=Aj.getColorByValue(Al.R-Al.oy,Al.C-Al.ox,Ah,Af);return An;},getPercentage:function(Ah,Ag){var Ai=this.getInnerSliceIndex(Ah,Ag),Ae=Math.abs(this.innerGetData(Ai)),Af=this.getAbsTotalValue();return Ae/Af;},getSliceTitles:function(){var Ak=this.graphCell.dp.lds,Ah=Ak.gmm,Af=Ah.gmCtr,Ae=Af.getChartInfo(),Ag=Af.getGMHeaderCount("SliceBy"),Al=Ae.isABL,Aj=P,Ap=Ae.dirc,Ao=Ae.tp,An=AX.EnumABLDirection,Ai;if((Al&&Ap===An.VERTICAL)||(Ao===Aj.GRID)||(Ao===Aj.BUBBLE||Ao===Aj.SCATTER)){Ai=Ah.getRowTitleInfo();}else{Ai=Ah.getColTitleInfo();if(Ai.length>0){var Am=Ai[Ai.length-1];if(Am.otp===-1){Ai=Ai.slice(0,Ai.length-1);}}}return Ai.slice(Ai.length-Ag);},getSliceLabel:function(A0,Ag){var As=this.getInnerSliceIndex(A0,Ag);var Am=this.graphCell.dp.lds,A1=Am.gmm.gmCtr,Aq=A1.getChartInfo(),At=A1.getGMHeaderCount("SliceBy"),A2=this.graphCell,Au=this.angleBy,Ay=Au.length,Ar=Ay>0&&!Am.gmm.onlyMetricNamesOnAxisForGridPie?Ay:1,A3=A2.groupData,Ae=A3.slicesOfPie,Ak=parseInt(As/Ar,10),Ao=Ae[Ak],Ai=Am.getOffsetX(),Ah=Am.getOffsetY(),Aw,Al,An=Ao[0],Av,Az=Aq.isABL,Aj=P,Ax=Aq.dirc,Af=Aq.tp,Ap=AX.EnumABLDirection;if(At<=0){return[];}if((Az&&Ax===Ap.VERTICAL)||(Af===Aj.GRID)||(Af===Aj.BUBBLE||Af===Aj.SCATTER)){Al=An.R-Ah;Aw=An.C-Ai;Av=Am.getRowHeaders(Al,"SliceBy","n&id&tid&dei&o&at&idx");if(Av.length>At){return Av.slice(Av.length-At);}return Av;}Al=An.R-Ah;Aw=An.C-Ai;Av=Am.getColHeaders(Aw,"SliceBy","n&id&tid&dei&o&at&idx");if(Av.length>At){Av=Av.slice(0,Av.length-1);return Av.slice(Av.length-At);}return Av;},getTotalValue:function(){if(this.tot!==undefined){return this.tot;}var Af=0,Ae,Ag=this.getSliceCount();for(Ae=0;Ae<Ag;Ae++){Af=Af+this.getData(Ae);}this.tot=Af;return Af;},getAbsTotalValue:function(){if(this.tot!==undefined){return this.tot;}var Af=0,Ae,Ag=this.getSliceCount();for(Ae=0;Ae<Ag;Ae++){Af=Af+Math.abs(this.getData(Ae));}this.tot=Af;return Af;},testSinglePieDP:function(){var Ae,Aj,Al,Ai,An,Ap=this.graphCell,Am=Ap.dp.lds,Ak=Am.gmm,Af="default",Ag;Ae=this.getSliceCount();Al=this.getTotalValue();O.visPrint("the angle by metric is "+this.angleBy.join(","));function Ah(Aq){Ag.push(Aq.n);}for(Aj=0;Aj<Ae;Aj++){Ai=this.getData(Aj);if(Ak.colorType!==j.NULL){Af=this.getColorByData(Aj);}An=this.getIdentity(Aj).id;var Ao=this.getSliceLabel(Aj);Ag=[];T.forEach(Ao,Ah);O.visPrint("slice "+Aj+" ("+An+")  is "+Ai+" ("+this.getPercentage(Aj)+") with slice labels: "+Ag.join(","));O.visPrint("color is: "+Af);this.getIdentity(Aj).getTooltipContent();}}});var AA=mstrmojo.declare(mstrmojo.Base,null,{getGroupLabelIdentities:function(){var Af,Ae=[];for(Af=0;Af<10;Af++){Ae.push(new f({gc:this,isGroup:true,isFaked:true}));}return Ae;},getFormattingProperties:function(){return undefined;},getSeriesLabelIdentities:function(){var Af,Ae=[];for(Af=0;Af<10;Af++){Ae.push(new f({gc:this,isGroup:false,isFaked:true}));}return Ae;},getSinglePieDPs:function(){return null;},getFormat:function AV(){return{};},getMetric:function x(){return null;},getMetricIndex:function h(){return null;},getMetricNumberWithDataIndex:function(){return null;},getMetricFormat:function(){return null;},getAxisMetricIndexArr:function(){return null;},getData:function AZ(){return null;},getIdentity:function(){return{isFaked:true};},getSliceIdentity:function(){return null;},getAssoDataWithMetricIndex:function(){return null;},getSizeByData:function q(){return null;},getMetricsIndexArray:function AK(){return null;},getColorByData:function n(){return null;},getSeriesLabel:function C(){return null;},getGroupLabel:function Q(){var Af=this.dp,Al=Af.lds,Ah=Al.flb,Aj=Al.blb,Am=this.gIdx,Ae=Af.bwdSteps,Ai=Af.fwdSteps,Ag,Ak;if(!Af.bwdEnabled){Ae=0;}if(!Af.fwdEnabled){Ai=0;}if(Af.oriGroupCount<0){this.getGroupCount();}Ag=Af.oriGroupCount;if(Am<Ae){Ak=Aj[Am];}else{Ak=Ah[Am-Ae-Ag];}if(Ak){return Ak;}return[];},getThresholdIndex:function c(){return null;},getThreshold:function AG(){return null;},getRowIndex:function p(){return null;},getColIndex:function AM(){return null;},getTooltipContent:function(){return null;}});var u=mstrmojo.declare(mstrmojo.Base,null,{getGMCtr:function(){var Ag=this.dp,Af=Ag.lds,Ae=Af.gmm;return Ae.gmCtr;},getGroupLabelIdentities:function(Ao){if(Ao===undefined){Ao=0;}if(this.gCateAxisLbIdCache===undefined){this.gCateAxisLbIdCache=[];}if(this.gCateAxisLbIdCache[Ao]){return this.gCateAxisLbIdCache[Ao];}var Aj,Am=[],Ag,Ai,An,Ah,Af,Ak,Ae,Al;Ag=this.groupData[Ao];Ai=this.dp;An=Ai.lds;Ah=An.getOffsetX();Af=An.getOffsetY();Ak=Ag.R-Af;Ae=Ag.C-Ah;Al=An.getGroupLabel(Ak,Ae,true);for(Aj=0;Aj<Al.length;Aj++){Am.push(new f({gc:this,isGroup:true,hInfo:Al[Aj]}));}this.gCateAxisLbIdCache[Ao]=Am;return Am;},getPropertyValue:function(Ah){var Ai=this.dp,Af=Ai.lds,Ae=Af.gmm,Ag=Ae.property;return Ag.readItem(Ah);},getShapeFormatsWithCombination:function(Ae){return this.getGMCtr().getShapeFormatsWithCombination(Ae);},isIndividualFormatted:function(){var Ah=this.getGMCtr(),Af,Ag,Ae;Af=this.getIdentity();Ag=Af.getSelectedObjectLowestLevel(true);Ae=Ah.getShapeFormatsWithCombination(Ag);return !!Ae;},getFormattingProperties:function(){var Ag,Ae,Af,Ai=this.getGMCtr(),Aj,Ah;if(Ai.getChartInfo().isPie){O.visPrint("for pie chart, call getFormattingPropertiesOfSlice of SinglePieDataProvider instead");return undefined;}Af=this.getIdentity();Ae=Ai.getShapeFormatsCachedObject(Af);if(!Ae){Aj=Ai.getDefaultsMergedWithAllPropsCachedObject(this);Ah=Ai.getComboLevelPropCachedObject(Af);Ag=Ab.getResolvedFormatsObject([Aj].concat(Ah));Ae=Ai.getShapeColorFormatsCachedObject(this,Af,Ag,Ag===Aj);Ai.setShapeFormatsCachedObject(Af,Ae);}return Ae;},getSeriesLabelIdentities:function(Ao){if(Ao===undefined){Ao=0;}if(this.sCateAxisLbIdCache===undefined){this.sCateAxisLbIdCache=[];}if(this.sCateAxisLbIdCache[Ao]){return this.sCateAxisLbIdCache[Ao];}var Aj,Am=[],Ag,Ai,An,Ah,Af,Ak,Ae,Al;Ag=this.groupData[Ao];Ai=this.dp;An=Ai.lds;Ah=An.getOffsetX();Af=An.getOffsetY();Ak=Ag.R-Af;Ae=Ag.C-Ah;Al=An.getSeriesLabel(Ak,Ae,true);for(Aj=0;Aj<Al.length;Aj++){Am.push(new f({gc:this,isGroup:false,hInfo:Al[Aj]}));}this.sCateAxisLbIdCache[Ao]=Am;return Am;},getGroupElementIndexArray:function(Ak,Am){var Ag=this.groupData[Am],Ai=this.dp,Al=Ai.lds,Ah=Al.getOffsetX(),Af=Al.getOffsetY(),Aj=Ag.R-Af,Ae=Ag.C-Ah;return Al.getGroupElementIndexArray(Aj,Ae,Ak);},getBreakByElementIndexArray:function(Al){var Ak=this.dp,Aq=Ak.lds,Ai=Aq.getOffsetX(),Ag=Aq.getOffsetY(),Ah,Am,Af,Ao,Aj,Ae=Aq.getChartInfo();Ah=this.groupData[0];Am=Ah.R-Ag;Af=Ah.C-Ai;if(Ae.isABL&&Ae.dirc===M.HORIZONTAL){Aj=1;Ao=Af;}else{Ao=Am;Aj=0;}var An=Aq.getHeaderObjectList(Ao,Aj,"BreakBy");if(Al){var Ap=[];T.forEach(An,function(Ar){Ap.push(Ar.idx);});return Ap;}return An;},getSinglePieDPs:function(){if(this.pieDps){return this.pieDps;}var Ag=this.getGMCtr().getChartInfo(),Aj=Ag.isPie,Af=this.metricsOnAngleBy,Ak=this.splitPie,Ah,Am=[],Al,Ai,Ae=false,An;if(!Aj){return Am;}if(Ak){Ah=Af.length;if(Ah===0){Ae=true;Ah=1;}for(Al=0;Al<Ah;Al++){if(Ae){An=[];}else{An=Af.slice(Al,Al+1);}Ai=new r({angleBy:An,graphCell:this,chtInfo:Ag});Am.push(Ai);}}else{Ai=new r({angleBy:Af,graphCell:this,chtInfo:Ag});Am.push(Ai);}this.pieDps=Am;return Am;},getFormat:function AV(Ae){return this.getMetric(Ae);},getMetric:function x(Af){var Ae=this.getMetricIndex(Af);return AD.call(this,Ae);},getShape:function t(Ah){Ah=Ah||0;var Ae=this.getMetricIndex(Ah),Aj=this.dp,Ag=Aj.lds,Af=Ag.gmm,Ai=Af.gmCtr;return Ai.getOnTheFlyShapeForMetric(Ae);},getMetricIndex:function h(Ae){var Af=this.groupData[Ae];return Af.mIdx;},getMetricNumberWithDataIndex:function(Af){var Ae=this.dp.lds,Ag=this.getMetricIndex(Af);return Ae.getMetricNumberFormat(Ag);},getMetricFormat:function(Af){var Ae=this.dp.lds;return Ae.getMetricNumberFormat(Af);},getAxisMetricIndexArr:function(Af){var Ag=this.groupData,Ae=Ag.length,Ah;for(Ah=0;Ah<Ae;Ah++){Af.push(this.getMetricIndex(Ah));}return Af;},getData:function AZ(Ai){var Ak=this.groupData[Ai],Al=this.dp,Ah=Al.lds,Ag=Ah.getOffsetX(),Ae=Ah.getOffsetY(),Af=Ak.R-Ae,Aj=Ak.C-Ag;return Ah.getData(Af,Aj);},getIdentity:function(){if(!this.identity){var Ah=this.getGMCtr().getChartInfo().isPie,Af=this.dp.lds.gmm.cct,Ae=this.groupData[0],Ag=Ae.R*Af+Ae.C;this.identity=new z({objType:o.GRAPH_SHAPE,gc:this,id:Ag,isPie:Ah});}return this.identity;},getMarkerIdentity:function(){if(!this.mkIdentity){var Ah=this.getGMCtr().getChartInfo().isPie,Af=this.dp.lds.gmm.cct,Ae=this.groupData[0],Ag=Ae.R*Af+Ae.C;this.mkIdentity=new z({objType:o.LINE_MARKER,gc:this,id:Ag,isPie:Ah});}return this.mkIdentity;},getDataLabelIdentity:function(){if(!this.dataLabelIdentity){var Ah=this.getGMCtr().getChartInfo().isPie,Af=this.dp.lds.gmm.cct,Ae=this.groupData[0],Ag=Ae.R*Af+Ae.C;this.dataLabelIdentity=new z({objType:o.DATA_LABEL,gc:this,id:Ag,isPie:Ah});}return this.dataLabelIdentity;},getSliceIdentity:function(Ae,Ag){var Af=this.getSinglePieDPs()[Ae];return Af.getIdentity(Ag);},getAssoDataWithMetricIndex:function(Ai,An){var Ah=this.dp,Am=Ah.lds,Al=this.groupData.length,Ae=[],Ag=Am.getOffsetX(),Af=Am.getOffsetY(),Aj,Ak;for(Aj=0;Aj<Al;Aj++){Ae.push(this.groupData[Aj].C-Ag);}Ak=this.groupData[0].R-Af;return Am.getAssoDataWithMetricIndex(Ak,Ae,Ai,An);},getSizeByMetricFormat:function e(){var Aj=this.dp.getChartInfo(),Ai=this.dp,Ae=Ai.lds,Af;if(!Aj.isBubbleOrScatter){var Ah=this.getGMCtr();if(!Ah.hasSizeBy()){return undefined;}Af=Ah.getSizeByMetrics()[0];}else{var Ag=AJ.call(this);Af=Ae.getSizeByMetricIndexForBubble(Ag.lr,Ag.lcs);}return AD.call(this,Af);},getSizeByData:function q(){var Al=this.dp,Ak=Al.lds,Ae=this.groupData.length,Ai=[],Ah=Ak.getOffsetX(),Af=Ak.getOffsetY(),Aj,Ag;for(Aj=0;Aj<Ae;Aj++){Ai.push(this.groupData[Aj].C-Ah);}Ag=this.groupData[0].R-Af;return Ak.getSizeByData(Ag,Ai);},getAbsSizeByData:function y(){return Math.abs(this.getSizeByData());},getMetricsIndexArray:function AK(Am){var Aj=this.dp,Ag=Aj.getChartInfo(),Ah,Ao=Aj.lds,An=this.groupData.length,Ae=[],Ai=Ao.getOffsetX(),Af=Ao.getOffsetY(),Ak,Al;if(Ag.tp!==P.GRID){this.getAxisMetricIndexArr(Am);}if((Ag.tp===P.BUBBLE||Ag.tp===P.SCATTER)&&Ag.hasSizeBy){for(Ak=0;Ak<An;Ak++){Ae.push(this.groupData[Ak].C-Ai);}Al=this.groupData[0].R-Af;Ah=Ao.getSizeByMetricIndexForBubble(Al,Ae);Am.push(Ah);}},getColorByData:function n(An){var Ag=this.groupData[0],Ai=this.dp,Am=Ai.lds,Ah=Am.getOffsetX(),Af=Am.getOffsetY(),Al=Ag.R-Af,Ae=Ag.C-Ah,Ak=[],Aj=Am.gmm;if(Aj.colorType===j.NULL){return undefined;}if(Aj.getChartInfo().isPie){O.visPrint("not expected to call getColorByData of graph cell when in pie mode");return undefined;}if(Aj.colorType===j.ATT_METRICS||Aj.colorType===j.METRICS_ITEM){this.getMetricsIndexArray(Ak);}return Am.getColorByValue(Al,Ae,Ak,An);},isSubtotal:function AI(){},getSeriesLabel:function C(An){var Ag,Ai,Am,Aj,Ah,Af,Ak,Ae;if(this.seriesLabel===undefined){this.seriesLabel={};}if(this.seriesLabel[An]!==undefined){return this.seriesLabel[An];}Ag=this.groupData[An];Ai=this.dp;Am=Ai.lds;Aj=Am.gmm;Ah=Am.getOffsetX();Af=Am.getOffsetY();Ak=Ag.R-Af;Ae=Ag.C-Ah;if(Aj.onlyMetricNamesOnAxisForGridPie&&!Aj.isMetricNamesOnXAxis){var Al=[];Al.push(Ai.getOneMetricName(this.metricIndexForLabelForGridPie));this.seriesLabel[An]=Al;return Al;}this.seriesLabel[An]=Am.getSeriesLabel(Ak,Ae);return this.seriesLabel[An];},getGroupLabel:function Q(An){var Ag,Ai,Am,Aj,Ah,Af,Ak,Ae;if(this.groupLabel===undefined){this.groupLabel={};}if(this.groupLabel[An]!==undefined){return this.groupLabel[An];}Ag=this.groupData[An];Ai=this.dp;Am=Ai.lds;Aj=Am.gmm;Ah=Am.getOffsetX();Af=Am.getOffsetY();Ak=Ag.R-Af;Ae=Ag.C-Ah;if(Aj.onlyMetricNamesOnAxisForGridPie&&Aj.isMetricNamesOnXAxis){var Al=[];Al.push(Ai.getOneMetricName(this.metricIndexForLabelForGridPie));this.groupLabel[An]=Al;return Al;}this.groupLabel[An]=Am.getGroupLabel(Ak,Ae);return this.groupLabel[An];},getThresholdIndex:function c(){return 0;},getThreshold:function AG(){},getRowIndex:function p(Ae){var Af=this.groupData[Ae];return Af.R;},getColIndex:function AM(Ae){var Af=this.groupData[Ae];return Af.C;},getTooltipContent:function(Ag,Aj){Ag=!!Ag;Aj=!!Aj;var Af=this.gcTtpCcnt||{},Ai=Ag+","+Aj;if(Af[Ai]!==undefined){return Af[Ai];}var Ae=this.dp.lds,Ah=[];Ae.getTooltipForChartHeader(Ah,"r",Ag);Ae.getTooltipForChartHeader(Ah,"c",Ag);AT.call(this,Ah,Ag,Aj);Af[Ai]=Ah;return Ah;},testGraphCell:function k(){O.visPrint("");O.visPrint("start testing gcell...");var Aj=this.dp,Am=Aj.lds.gmm,Ag=Aj.getDataGroup(),Ao,Ar,Ak,An,Af,Al,Ap,Aq,Ae=Am.getChartInfo(),Ai=Ae.isPie,Ah;for(Ao=0;Ao<Ag;Ao++){Ar=this.getData(Ao);if(Am.colorType!==j.NULL){Ah=this.getColorByData(Ao);}O.visPrint("data with data index "+Ao+": "+Ar);if(Am.colorType!==j.NULL){O.visPrint("color with data index "+Ao+": "+Ah);}O.visPrint("sizeBy data: "+this.getSizeByData());Ak=this.getSeriesLabel(Ao);O.visPrint("series labels are: "+Ak.join());An=this.getGroupLabel(Ao);O.visPrint("group labels are: "+An.join());}if(Ai){O.visPrint("start testing pie dps");Ap=this.getSinglePieDPs();Af=Ap.length;for(Al=0;Al<Af;Al++){Aq=Ap[Al];Aq.testSinglePieDP();if(Al!==Af-1){O.visPrint("-----------------------");}}O.visPrint("end testing pie dps");}this.getTooltipContent();O.visPrint("end testing gcell...");}});mstrmojo.gm.GMDataProvider=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMDataProvider",lds:null,data:null,sbc:false,graphJSON:null,isValid:true,fwdEnabled:false,bwdEnabled:false,cache:null,getController:function(){var Af=this.lds,Ae=Af.gmm,Ag=Ae.gmCtr;return Ag;},allowDatalabelOverlap:function(){var Ae=this.getController();return Ae.getChartInfo().dlPlmt>1;},isClusteredBarSpecialCase:function(){var Ae=this.getController();return Ae.clusteredBarSpecialCase;},getChartInfo:function(){return this.lds.getChartInfo();},init:function AE(Ae){this._super(Ae);this.cache=[];var Af=this.getChartInfo();if(Af.isABL||Af.tp===P.BUBBLE||Af.tp===P.SCATTER){this.getTrendsOfChart();}},destroy:function I(){delete this.cache;},isGradientABL:function(){return this.lds.gmm.gmCtr.isGradientABL();},getTotalOfGroup:function(Ai){var Ag=this.innerGetSeriesCount(),Af=0,Ae,Ah;for(Ae=0;Ae<Ag;Ae++){Ah=this.innerGetGraphCell(Ae,Ai);Af+=Ah.getData(0);}return Af;},getAxisOriginLineIdentity:function(Ae){var Af=this.getController();return Af.getAxisOriginLineIdentity(Ae);},getAxisOriginLabelIdentity:function(Ae){var Af=this.getController();return Af.getAxisOriginLabelIdentity(Ae);},getMetricsOnAxis:function(Ag){var Ae=this.rowIndex,Ah=this.colIndex;var Af=this.getController();if(Ae===undefined||Ah===undefined){O.visPrint("row index or column index of data provider is not found");}if(Ag==="x"||Ag==="x1"||Ag==="X1"){return Ab.filterInValidMetricIndex(Af.getMetricsOnAxisOfChart(Ae,Ah,"x",true));}if(Ag==="y"||Ag==="y1"||Ag==="Y1"){return Ab.filterInValidMetricIndex(Af.getMetricsOnAxisOfChart(Ae,Ah,"y",true));}if(Ag==="x2"||Ag==="X2"){return Ab.filterInValidMetricIndex(Af.getMetricsOnAxisOfChart(Ae,Ah,"x",false));}if(Ag==="y2"||Ag==="Y2"){return Ab.filterInValidMetricIndex(Af.getMetricsOnAxisOfChart(Ae,Ah,"y",false));}return[];},isLogScale:function(Af){var Ae=this.getController();return Ae.isLogScale(Af,this.rowIndex,this.colIndex);},getNumericOption:function(Ag){var Ae=this.getMetricsOnAxis(Ag),Af=this.getController();if(Ae.length>0){return Ab.getOptionObjArr.call(Af,Ae,Ag,false);}return[];},getAxisOriginValue:function(Ai){var Ah=this.getController(),Ag=Ah.view,Ak=this.getNumericOption(Ai),Af=Ag.readGlobalProperty(b.AXIS_ORIGIN,Ak).jsonObj;if(Af){var Aj=Af[b.AXIS_ORIGIN_AUTO];var Ae=parseFloat(Af[b.AXIS_ORIGIN_VALUE]);if(Aj){return 0;}return Ae;}return 0;},getAxisFormats:function G(Af,Ai){Ai=Ai||"all";var Aj=this.getController(),Ag,Ae=Aj.getAllAxisProperties();switch(Ai){case"axisLabel":if(Af==="x1"||Af==="x2"||Af==="X1"||Af==="X2"){Ag=[K.X_AXIS_LABELS_FONT_SIZE,K.X_AXIS_LABELS_FONT_FAMILY,K.X_AXIS_LABELS_FONT_STYLE,K.X_AXIS_LABELS_ROTATION,K.X_AXIS_LABELS_FONT_COLOR];}else{if(Af==="y1"||Af==="y2"||Af==="Y1"||Af==="Y2"){Ag=[K.Y_AXIS_LABELS_FONT_SIZE,K.Y_AXIS_LABELS_FONT_FAMILY,K.Y_AXIS_LABELS_FONT_STYLE,K.Y_AXIS_LABELS_ROTATION,K.Y_AXIS_LABELS_FONT_COLOR];}}return V.copyProps(Ag,Ae);case"majorTick":case"minorTick":var Ah=Ai==="majorTick",Ak={};if(Ah){Ag=[K.MAJOR_GRID_LINES_COLOR,K.MAJOR_GRID_LINES_THICKNESS,K.MAJOR_GRID_LINES_STYLE];}else{Ag=[K.MINER_GRID_LINES_COLOR,K.MINER_GRID_LINES_THICKNESS,K.MINER_GRID_LINES_STYLE];}return V.copyProps(Ag,Ae);case"body":if(Af==="x1"||Af==="x2"||Af==="X1"||Af==="X2"){Ag=[K.X_AXIS_LINE_COLOR,K.X_AXIS_LINE_STYLE,K.X_AXIS_LINE_THICKNESS];}else{if(Af==="y1"||Af==="y2"||Af==="Y1"||Af==="Y2"){Ag=[K.Y_AXIS_LINE_COLOR,K.Y_AXIS_LINE_STYLE,K.Y_AXIS_LINE_THICKNESS];}}return V.copyProps(Ag,Ae);case"axisOrigin":if(Af==="x1"||Af==="x2"||Af==="X1"||Af==="X2"){Ag=[K.X_AXIS_ORIGIN_LINE_SHOW,K.X_AXIS_ORIGIN_LINE_COLOR,K.X_AXIS_ORIGIN_LINE_STYLE,K.X_AXIS_ORIGIN_LINE_THICKNESS];}else{if(Af==="y1"||Af==="y2"||Af==="Y1"||Af==="Y2"){Ag=[K.Y_AXIS_ORIGIN_LINE_SHOW,K.Y_AXIS_ORIGIN_LINE_COLOR,K.Y_AXIS_ORIGIN_LINE_STYLE,K.Y_AXIS_ORIGIN_LINE_THICKNESS];}}return V.copyProps(Ag,Ae);case"showHide":if(Af==="x1"||Af==="x2"||Af==="X1"||Af==="X2"){Ag=[K.X_AXIS_LINE_SHOW,K.X_AXIS_TITLE_SHOW,K.X_AXIS_LABELS_SHOW,K.MAJOR_GRID_LINES_SHOW,K.MINOR_GRID_LINES_SHOW];}else{if(Af==="y1"||Af==="y2"||Af==="Y1"||Af==="Y2"){Ag=[K.Y_AXIS_LINE_SHOW,K.Y_AXIS_TITLE_SHOW,K.Y_AXIS_LABELS_SHOW,K.MAJOR_GRID_LINES_SHOW,K.MINOR_GRID_LINES_SHOW];}}return V.copyProps(Ag,Ae);default:V.copy(Ae,Ak);return Ak;}},getDataLabelType:function(){return this.getChartInfo().dlTp;},getDataLabelFontFormat:function(){var Ah=this.getController(),Ag=mstrmojo.hash,Af=[K.DATA_LABELS_FONT_FAMILY,K.DATA_LABELS_FONT_SIZE,K.DATA_LABELS_FONT_STYLE,K.DATA_LABELS_FONT_COLOR],Ae=Ah.getDataLabelFontFormat();return Ag.copyProps(Af,Ae);},clearGraphJSON:function(){this.graphJSON=null;},resetDPCache:function S(){if(this.rCache){this.rCache={};delete this.rCache;}if(this.cCache){this.cCache={};delete this.cCache;}},innerGetGraphCell:function l(Af,Ae){return AP.call(this,Af,Ae);},getGraphCell:function g(Ah,Af){var Ag=this.getController();if(Ag.clusteredBarSpecialCase){var Ae=this.getClusterDataGroup();if(Ah>=Af*Ae&&Ah<(Af+1)*Ae){Ah=Math.round(Ah%Ae);}else{return new AA({gIdx:Af,dp:this,isFaked:true});}}return AP.call(this,Ah,Af);},countValidGraphCell:function(){var Ag,Ae,Aj,Ai,Af,Ah=0;Ag=this.innerGetGroupCount();Ae=this.innerGetSeriesCount();for(Ai=0;Ai<Ag;Ai++){for(Af=0;Af<Ae;Af++){Aj=this.innerGetGraphCell(Af,Ai);if(Aj.getData(0)!==null){Ah++;}}}return Ah;},collectElementsIndexArrayOnXVar:function(Ah){var Ak=this.getChartInfo(),Ag,Ai,Aj,Af=[],Ae=this.innerGetGroupCount();if(Ak.isABL){for(Ag=0;Ag<Ae;Ag++){Ai=this.innerGetGraphCell(0,Ag);Aj=Ai.getGroupElementIndexArray(Ah,0);Af.push(Aj);}return Af;}return undefined;},isNullGC:function(Ae){return isNaN(Ae.getData(0));},isDiscreteSeries:function(Ag){var Af=this.innerGetGroupCount(),Ai,Ae,Aj=true,Ah;for(Ah=0;Ah<Af;Ah++){Ai=this.innerGetGraphCell(Ag,Ah);if(!this.isNullGC(Ai)){if(Aj){if(Ah===Af-1){return true;}Ae=this.innerGetGraphCell(Ag,Ah+1);if(this.isNullGC(Ae)){return true;}}Aj=false;}else{Aj=true;}}return false;},GetDiscreteSeries:function AH(){var Ak=this.getChartInfo(),Ah,Ag=[],Af=this.lds.gmm,Aj=Af.gmCtr,Ai=Aj.clusteredBarSpecialCase,Ae=this.getSeriesCount();if(!Ak.isABL){return[];}for(Ah=0;Ah<Ae;Ah++){if(Ai||this.isDiscreteSeries(Ah)){Ag.push(Ah);}}return Ag;},prepareForTrendLines:function(){var Aw=this,BO=this.getChartInfo(),BP={},Ar={},BH,As,BA,A3,At,Aq,BJ,A8=this.lds,Au,BB=this.getGroupCount(),A5=this.getSeriesCount(),BL,A7,Ag=A8.gmm,Am=Ag.mx,Ap=A8.cri,Ak=A8.cci,A0=Ag.getBreakByUnits(),Az=A0.length>0,BD=Ag.gmCtr,A4=A8.validFse,Af=A8.validBse,BE=A8.validXVar,BN,Av,BK,BM,Ah,Aj=false,Ao,Ay;var A2=BD.getDependentMetricOptions();function BC(BR){var BQ;A2.forEach(function(BS){if(BR===BS.key){BQ=BS;}});return BQ;}var Al=BD.trendLineErrors={};var BG=false,A6,BF;var Ai=function(BS){var BV={MID_IN_Y1:-131072,MID_IN_Y2:-1179648,MID_IN_X1:-65536,MID_IN_X2:-1114112},BQ=Ag.dz[BF],BU=BQ&&BQ.TemplateMetric,BR=BU&&BU[BS],BT;if(BR&&BR.ax===0){if(BO.dirc===M.VERTICAL){BT=BV.MID_IN_Y1;}else{BT=BV.MID_IN_X1;}}else{if(BO.dirc===M.VERTICAL){BT=BV.MID_IN_Y2;}else{BT=BV.MID_IN_X2;}}return BT;};var Ae=function(BU){function BQ(BZ,Bb){var Ba=false;T.forEach(BZ,function(Bc){if(Bc.tmData.modix===Bb){Ba=true;}});return Ba;}var BT,BY,BV,BS;if(!BG){BT=BM;}else{BY=Aw.lds.gmm.dz;BV=BY[BF];BS=BV.mdls&&BV.mdls.mod_c[BU.modix-1];if(BS===undefined){return ;}if(BS.dua===0){BT=BF;}else{BT=A6+"2Axis";}}if(BA.indexOf(BT)<0){BA.push(BT);}if(Ar[BT]===undefined){Ar[BT]=[];}var BX,BW;if(BU){if(!BG){var BR=BD.model.getMetricIDsFromIndex([BU.mid])[0];BX=BD.view.getExistingRefLineOptions(BR);BX.forEach(function(BZ){if(BZ.modix===BU.modix){BW=BZ;}});if(!BQ(Ar[BT],BU.modix)){Ar[BT].push(new AX.TrendLineModel({tmData:BU,dp:Aw,mx:Am,isTrendLine:false,direction:Ao,refIsDefOnAxis:BG,seriesIds:[BL],midx:BT,trendLineOpt:BW,metricId:Ah,ldsCri:Ap,ldsCci:Ak}));}}else{BX=BD.view.getExistingRefLineOptionsForAxis(BT);BX.forEach(function(BZ){if(BZ.modix===BU.modix){BW=BZ;}});if(!BQ(Ar[BT],BU.modix)){Ar[BT].push(new AX.TrendLineModel({tmData:BU,dp:Aw,isTrendLine:false,direction:BO.dirc===M.VERTICAL?"horizontal":"vertical",defOnZone:BS,seriesIds:[BL],trendLineOpt:BW,refIsDefOnAxis:BG,ldsCri:Ap,ldsCci:Ak}));}}}};if(BO.isABL&&BD.isStacked&&!BD.splitPlottingMetrics){A6=BO.dirc===M.VERTICAL?"Y":"X";BF=A6+"Axis";BG=true;}this.trendLineCalculated=true;this.inDpTrMdls=BP;this.inDpRfMdls=Ar;this.seriesWithTrendLineDefined=BH=[];this.metricIndexesWithTrendLineDefined=As=[];this.metricIndexesWithRefLineDefined=BA=[];if(BO.tp===P.BUBBLE||BO.tp===P.SCATTER){Aj=true;}var Ax=1;for(BL=0;BL<A5;BL++){if(this.isClusteredBarSpecialCase()){Ax=this.getClusterDataGroup();Au=this.getGraphCell(BL,Math.round(BL/Ax));}else{Au=this.innerGetGraphCell(BL,0);}if(Au.isFaked){continue;}if(BO.isABL){A3=Au.getMetricIndex(0);}else{if(Aj===true){At=Au.getMetricIndex(0);BJ=Ag.getMetricIDsFromIndex([At])[0];A3=Au.getMetricIndex(1);}}Aq=Ag.getMetricIDsFromIndex([A3])[0];if(BE&&(A4||Af)){A7=this.collectElementsIndexArrayOnXVar(BE);this.unitElementIndexArray=A7;if(BB>1){if(A4&&A7.length>0&&Ab.indexOf(A7,A4)>=0){this.fwdEnabled=true;}if(Af&&A7.length>0&&Ab.indexOf(A7,Af)>=0){this.bwdEnabled=true;}}}if(Aj===true){this.bwdEnabled=true;this.fwdEnabled=true;}BN=BD.getTrendLinesObjectForMetric(A3,Ap,Ak,BJ,true)[0];if(BN&&BN.inChartModel[0]&&BN.inChartModel[0].model){var An=BN.inChartModel[0].model.error_message;if(An){var A1=BN.mid+","+BN.modix;if(!Al[A1]){Al[A1]=An;}}else{BH.push(BL);if(BP[A3]){BP[A3].seriesIds.push(BL);BP[A3].seriesBBUnits.push(Au.getBreakByElementIndexArray(true));}else{As.push(A3);var A9=BC(Aq);BP[A3]=new AX.TrendLineModel({tmData:BN,hasBb:Az,dp:Aw,isTrendLine:true,mx:Am,seriesBBUnits:[Au.getBreakByElementIndexArray(true)],seriesIds:[BL],midx:A3,metricId:Aq,trendLineOpt:A9,ldsCri:Ap,ldsCci:Ak});}}}if(!BG){Av=[A3];if(Aj===true){Av.push(Au.getMetricIndex(0));}for(BK=0;BK<Av.length;BK++){if(Aj){if(BK===0){Ao="horizontal";}else{Ao="vertical";}}else{if(BO.isABL){if(BO.dirc===M.VERTICAL){Ao="horizontal";}else{Ao="vertical";}}}BM=Av[BK];Ah=Ag.getMetricIDsFromIndex([BM])[0];Ay=BD.getTrendLinesObjectForMetric(BM,Ap,Ak,undefined,false);Ay.forEach(Ae);}}else{var BI=Ai(A3);Ay=BD.getTrendLinesObjectForMetric(BI,Ap,Ak,undefined,false);Ay.forEach(Ae);}}},getTrendsOfChart:function(){if(this.trendLinesOfChart){return this.trendLinesOfChart;}if(!this.trendLineCalculated){this.prepareForTrendLines();}var Ai=this.inDpTrMdls,Ag=[],Ae={},Ah=this.metricIndexesWithTrendLineDefined;if(Ah){T.forEach(Ah,function(Al){var Ak=Ai[Al],Aj=Ak.getSingleTrendLines(Ae);Ag=Ag.concat(Aj);});}function Af(Aj){if(Aj===undefined){return Aj;}var Ak;Aj.forEach(function(Al){for(Ak=0;Ak<Al.length;Ak++){Al[Ak]=Al[Ak].toString();}});return Aj;}this.trendLinesOfChart=Ag;this.fwdLbs=Ae.fwdLbs=Af(Ae.fwdLbs);this.bwdLbs=Ae.bwdLbs=Af(Ae.bwdLbs);return Ag;},getRefsOfChart:function(){if(this.refLinesOfChart){return this.refLinesOfChart;}if(!this.trendLineCalculated){this.prepareForTrendLines();}var Ah=this.inDpRfMdls,Ag=[],Af={},Ae=this.metricIndexesWithRefLineDefined;if(Ae){T.forEach(Ae,function(Ak){var Aj=Ah[Ak],Ai;Aj.forEach(function(Al){Ai=Al.getSingleTrendLines(Af);Ag=Ag.concat(Ai);});});}this.refLinesOfChart=Ag;return Ag;},getMetricsIndexOnAxis:function F(){return this.mpos;},getMinMetricValue:function AY(){},getMaxMetricValue:function A(){},getMinMaxValueForABL:function(){var Ai,Al,Af=this.innerGetSeriesCount(),Ah=this.innerGetGroupCount(),As,Aj,Aq,Ae,Ak,Ap,Ao=this.lds.gmm.gmCtr,An=Ao.hasSizeBy(),Am,Ag,Ar;for(As=0;As<Af;As++){for(Aj=0;Aj<Ah;Aj++){Aq=this.innerGetGraphCell(As,Aj);if(An){Am=Aq.getSizeByData();if(Ar===undefined){Ar=Am;}else{if(Ar>Am){Ar=Am;}}if(Ag===undefined){Ag=Am;}else{if(Ag<Am){Ag=Am;}}}Ae=Aq.dp.getDataGroup();for(Ak=0;Ak<Ae;Ak++){Ap=Aq.getData(Ak);if(Ai===undefined){Ai=Ap;}else{if(Ai>Ap){Ai=Ap;}}if(Al===undefined){Al=Ap;}else{if(Al<Ap){Al=Ap;}}}}}return{XMax:Al,XMin:Ai,YMax:Al,YMin:Ai,ZMin:Ar,ZMax:Ag};},getMinMaxValueForGrid:function(){var Am,Af,Ae=this.getSeriesCount(),Ag=this.getGroupCount(),An,Ah,Al,Ai,Ak=this.lds.gmm.gmCtr,Aj=Ak.hasSizeBy();if(Aj){for(An=0;An<Ae;An++){for(Ah=0;Ah<Ag;Ah++){Al=this.innerGetGraphCell(An,Ah);Ai=Al.getSizeByData();if(Am===undefined){Am=Ai;}else{if(Am>Ai){Am=Ai;}}if(Af===undefined){Af=Ai;}else{if(Af<Ai){Af=Ai;}}}}}return{YMax:20000,YMin:0,XMin:0,XMax:20000,ZMin:Am,ZMax:Af};},getMinMaxValueForBubbleOrScatter:function(){var Aj,Ao,Af,Al,At,Ah,Ag=this.innerGetSeriesCount(),Ai=this.innerGetGroupCount(),Au,Ak,As,Ae,An,Am,Ar=this.lds.gmm.gmCtr,Aq=Ar.hasSizeBy();for(Au=0;Au<Ag;Au++){for(Ak=0;Ak<Ai;Ak++){As=this.innerGetGraphCell(Au,Ak);Ae=As.dp.getDataGroup();if(Aq){An=As.getSizeByData();if(At===undefined){At=An;}else{if(At>An){At=An;}}if(Ah===undefined){Ah=An;}else{if(Ah<An){Ah=An;}}}for(Am=0;Am<Ae;Am++){var Ap=As.getData(Am);if(Am===0){if(Aj===undefined){Aj=Ap;}else{if(Aj>Ap){Aj=Ap;}}if(Ao===undefined){Ao=Ap;}else{if(Ao<Ap){Ao=Ap;}}}else{if(Af===undefined){Af=Ap;}else{if(Af>Ap){Af=Ap;}}if(Al===undefined){Al=Ap;}else{if(Al<Ap){Al=Ap;}}}}}}return{YMax:Al,YMin:Af,XMin:Aj,XMax:Ao,ZMin:At,ZMax:Ah};},getMetricFormat:function d(Af,Ag){Ag=Ag||false;if(Ag){var Ak=parseInt(Af,10),Ae=this,Ai=Ae.lds,Aj=Ai.gmm,Ah=Ae.getMetricIds(),Al,Am=Ae.getMetricNames();if(Ak<0){O.visPrint("invalid metric index");return undefined;}Al=Aj.getFullNumberFormat();return{idx:Ak,metric:Am[Ak],id:Ah[Ak],fullNf:Al!==undefined?Al[Ak]:undefined};}return this.lds.getMetricNumberFormat(Af);},isMetricOnRowAxis:function AR(){return false;},getMetricsCount:function Y(){var Ae=this.metrics;if(!Ae){return 0;}return Ae.es.length;},getMetricNames:function AQ(){var Af=this.lds,Ae=Af.gmm;return Ae.getMetricNames();},getMetricIds:function AS(){var Af=this.lds,Ae=Af.gmm;return Ae.getMetricIds();},getOneMetricName:function L(Af){var Ae=this.metrics;if(Ae){if(Ae.es.length-1>=Af){return Ae.es[Af].n;}}},getSeriesCount:function Ad(){return this.innerGetSeriesCount();},innerGetSeriesCount:function(){var Ae=this.dataSbc;if(Ae===true){return this.data[0].length;}return this.data.length;},getGroupCount:function H(){var Ae=this.dataSbc;if(Ae===false){return this.data[0].length;}return this.data.length;},innerGetGroupCount:function H(){var Ae=this.dataSbc;if(Ae===false){return this.data[0].length;}return this.data.length;},getDimensionSize:function U(){return 5;},getDataGroup:function B(){var Ae=this.data[0][0];if(Ae===undefined){return 1;}return Ae.length;},getSeriesByColumn:function N(){return this.sbc;},seriesGroupIndexToRowColumnIndex:function Ac(Ah,Ai,Ae,Ag){Ag=Ag||false;var Af=this.dataSbc;var Aj,Al;if(Af===true){Al=Ah;Aj=Ai;}else{Aj=Ah;Al=Ai;}var Ak=this.data&&this.data[Aj]&&this.data[Aj][Al];if(Ak){return{Row:Ak[Ae].R,Col:Ak[Ae].C};}return{Row:-1,Col:-1};},getTextLabel:function W(Aq,Ai,Aj,As){var Ar=this.getGraphCell(Aq,Ai),Af=this.getChartInfo(),Am,Ag,Ap,Ae,Al,Ah,Ao;if(Ar!==null&&Ar!==undefined){Ap=Ar.getGMCtr();if(Af.isPie){var An=Ar.getSinglePieDPs()[Aj];var Ak=An.getSliceLabel(As);if(Ak.length===0){return"";}Al=Ap.getSliceByAttrsID();Ah=Al[Al.length-1];Ao=T.find(Ak,"tid",Ah);return Ak[Ao].n;}Am=Ar.getIdentity();Ag=Am.getSelectedObjectBreakByInfo(false);if(Ag.length===0){return"";}Ae=Ap.getBreakByAttrsID();Ah=Ae[Ae.length-1];Ao=T.find(Ag,"tid",Ah);if(Ao>=0){return Ag[Ao].v;}}return"";},isGridPieSplitAlongXAxis:function(){var Ah=this.getChartInfo(),Af=this.lds,Ae=Af.gmm,Ag=Ae.gmCtr;if(Ah.isPie&&Ah.tp===P.GRID){return Ag.isMetricNamesInZone("XAxis");}return undefined;},getMetricIndexForSeries:function(Ae){var Ah=this.getGroupCount(),Ag,Af;for(Af=0;Af<Ah;Af++){Ag=this.getGraphCell(Ae,Af);if(!Ag.isFaked){break;}}return Ag.getMetricIndex(0);},getShapeBySeries:function(Af){var Ag=this.lds.gmm.gmCtr,Ae;if(Ag.enableCombiChart===false){return Ag.markerShape;}Ae=this.getMetricIndexForSeries(Af);return Ag.getOnTheFlyShapeForMetric(Ae);},getPrioritizedSeriesIndex:function(){var Aj=this.lds.gmm.gmCtr,Ai=this.getSeriesCount(),Ag,Ae,Ah=[];if(Aj.enableCombiChart===false){var Af=[];for(Ag=0;Ag<Ai;Ag++){Af.push(Ag);}return Af;}Ae=this.getSeriesByShape();Ah=Ah.concat(Ae.Area);Ah=Ah.concat(Ae.Bar);Ah=Ah.concat(Ae.Circle);Ah=Ah.concat(Ae.Square);Ah=Ah.concat(Ae.Line);Ah=Ah.concat(Ae.Tick);return Ah;},getSeriesByShape:function(Af){var Ak=this.getSeriesCount(),Ah,Ag,Ae,Ai={Tick:[],Line:[],Bar:[],Area:[],Circle:[],Square:[],Pie:[]};function Aj(Am){var Al;switch(Am){case Z.TICK:Al=Ai.Tick;break;case Z.LINE:Al=Ai.Line;break;case Z.BAR:Al=Ai.Bar;break;case Z.AREA:Al=Ai.Area;break;case Z.CIRCLE:Al=Ai.Circle;break;case Z.SQUARE:Al=Ai.Square;break;case Z.PIE:Al=Ai.Pie;break;}return Al;}for(Ah=0;Ah<Ak;Ah++){Ag=this.getShapeBySeries(Ah);Ae=Aj(Ag);Ae.push(Ah);}if(Af===undefined){return Ai;}return Aj(Af);},getValueAxisBySeries:function(Af){var Ah=this.lds.gmm.gmCtr,Ae,Ag;Ae=this.getMetricIndexForSeries(Af);Ag=Ah.getPrimaryMetrics();if(Ag.indexOf(Ae)>=0){return 0;}return 1;},getSeriesByValueAxis:function(Aj){var Ak=this.lds.gmm.gmCtr,Ag,Af=this.getSeriesCount(),Ah,Ae=[],Ai;Ai=(Aj===0)?Ak.getPrimaryMetrics():Ak.getSecondaryMetrics();for(Ah=0;Ah<Af;Ah++){Ag=this.getMetricIndexForSeries(Ah);if(Ai.indexOf(Ag)!==-1){Ae.push(Ah);}}return Ae;},testDataProvider:function Aa(){var Af=this.getSeriesCount(),Ah=this.innerGetGroupCount(),Am=this.getMetricsCount(),Al=this.lds,Ak=Al.cci,Ag=Al.cri,Ai,Ao,Aj;O.visPrint("");O.visPrint("======================chart with index: ("+Ag+", "+Ak+")=============================");for(Ai=0;Ai<Am;Ai++){var Ae=this.getOneMetricName(Ai);O.visPrint("single metric name of "+Ai+" is: "+Ae);}for(Ao=0;Ao<Af;Ao++){for(Aj=0;Aj<Ah;Aj++){var An=this.innerGetGraphCell(Ao,Aj);if(!An.isFaked){An.testGraphCell();}}}},getResizerLineThickNess:function a(){var Af=this.lds.gmm,Ah=Af.gmCtr,Ae=Ah.view,Ag=Ae.getHTML5Props();return{MATRIX_VLINE_THICKNESS:parseInt(Ag.MATRIX_LINE_V.borderWidth,10)||1,MATRIX_HLINE_THICKNESS:parseInt(Ag.MATRIX_LINE_H.borderWidth,10)||1,AXIS_X_THICKNESS:parseInt(Ag.AXIS_LINE_X.borderWidth,10)||1,AXIS_Y_THICKNESS:parseInt(Ag.AXIS_LINE_Y.borderWidth,10)||1};},getChartRowColCount:function AF(){var Ae=this.lds.gmm;return{cir:Ae.cir,cic:Ae.cic};},isCompactMode:function v(){var Ae=this.lds.gmm,Af=Ae.gmCtr;return Af.isCompactMode();}});mstrmojo.gm.GMEnhancedDataProvider=mstrmojo.declare(mstrmojo.gm.GMDataProvider,null,{scriptClass:"mstrmojo.gm.GMEnhancedDataProvider",fwdSteps:0,bwdSteps:0,oriGroupCount:-1,getGroupCount:function(){if(AW){return this._super();}var Ae=this.bwdSteps,Af=this.fwdSteps;if(!this.bwdEnabled){Ae=0;}if(!this.fwdEnabled){Af=0;}this.oriGroupCount=this._super();if(!this.fwdSteps&&!this.bwdSteps){return this.oriGroupCount;}return Ae+this.oriGroupCount+Af;},getGraphCell:function g(Ai,Ag,Af){if(AW||Af===true){return this._super(Ai,Ag);}var Ae=this.bwdSteps,Aj=this.fwdSteps,Ah;if(!this.bwdEnabled){Ae=0;}if(!this.fwdEnabled){Aj=0;}if(this.oriGroupCount<0){this.getGroupCount();}if(!this.fwdSteps&&!this.bwdSteps){Ah=this._super(Ai,Ag);return Ah;}if(Ag<Ae||Ag>=(this.oriGroupCount+Ae)){return new AA({gIdx:Ag,dp:this,isFaked:true});}Ah=this._super(Ai,Ag-Ae);return Ah;},getClusterDataGroup:function w(){if(!!!this.mClusterDataGroup){var Ae=this.lds.gmm,Af=Ae.gmCtr;if(Af.clusteredBarSpecialCase){this.mClusterDataGroup=this.innerGetSeriesCount();}else{this.mClusterDataGroup=1;}}return this.mClusterDataGroup;},getSeriesCount:function Ad(){var Ae=this.lds.gmm,Af=Ae.gmCtr;if(!Af.clusteredBarSpecialCase){return this.innerGetSeriesCount();}return this.getGroupCount()*this.getClusterDataGroup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.VisEnum","mstrmojo.VisLegend","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMIdentities","mstrmojo.gm.GMUtility","mstrmojo.array","mstrmojo.string","mstrmojo.hash","mstrmojo._FormateVisLegend","mstrmojo.ui._HasScroller");var Aj=mstrmojo,Af=Aj.gm,AC=Aj.dom,Ae=Aj.css,S=Aj.hash,AQ=Aj.VisUtility,a=Af.GMUtility,P=mstrmojo.array,Y=mstrmojo.string,AD=mstrmojo.ui.editors.controls.AdvancedColorPicker,f=Af.ColorSquareIdentity,C=Aj.VisEnum.ControlType,k=Af.EnumLegendSlot,AO=Af.EnumDockPosition,p=Af.EnumLegendSlot,AI=Af.EnumIdentityType,AG=Af.EnumShape,Aa=Aj.VisEnum.GMLegendDataType,J=mstrmojo.desc(13966,"Size by:"),y="px",F=1.35,Z=0.75,W=5,K=20,n=K,AH=5,A=5,z=16,e=15,H=16,AL=20,G=150,u=15,Ah=1,AB="setAttribute",l=3,h=2,Q=8,t=15,AV=14,w=1,R=2,g=4,Ak=8,Ai=16,L=10,AX=3,AM=50,AS=-3,v=5,AT="gm-legend-lock-icon",AP=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values"),O="http://www.w3.org/2000/svg",x="\u2026",N=/[ \-]/;function AU(Aq,As,Al,At){if(!Aq){return ;}var An,Aw,Ao,Av,Ar=Aq.style,Ax=As===AO.TOP,Am=As===AO.BOTTOM,Au=As===AO.LEFT,Ap=As===AO.RIGHT;if(Ax||Am){An=Al;Aw=1;Ao=-1;Av=AS;if(Am){Av+=At;}}else{if(Au||Ap){An=1;Aw=At;Av=-1;Ao=AS;if(Ap){Ao+=Al;}}}Ar.cssText="left:"+Ao+y+";top:"+Av+y+";width:"+An+y+";height:"+Aw+y+";";if(mstrApp.isInVFInteractMode){Ar.cursor="default";}}function I(Am){var Al=String(Am);return Al.indexOf(" ")>=0||Al.indexOf("-")>=0;}function X(An,Am,Ao){var Al=typeof An==="string"?a.restoreSpecialChars(An):An;return AQ.measureTextWidth(Al,Am,Ao);}function AK(Ap,Ao,Am,Al){var An=X(Ao,Am,L);Ap.setAttribute("measureWidth",An);if(An>Al){An=Al;}else{Ap.style.overflow="visible";}Ap.setAttribute("displayWidth",An);Ap.style.width=An+y;return An;}function Ag(An,Am){var Al;if(parseInt(An.getAttribute("measureWidth"))>Am){Al=parseInt(An.style.maxHeight);}else{Al=parseInt(An.style.lineHeight);}return Al;}function B(Am){var Al;if(Am.textContent&&typeof (Am.textContent)!==undefined){Al=Am.textContent;}else{Al=Am.innerText;}return Al;}function b(An){var Am=An.getAttribute("measureWidth"),Al=An.getAttribute("displayWidth");if(!Am){An[AB]("title","");}Am=parseFloat(Am,10);Al=parseFloat(Al,10);if((Am-Al)>0.1){An[AB]("title",B(An));}else{An[AB]("title","");}}function AN(Ap,Al,Am,Ao){var An=document.createElement("div");An[AB]("class","gm-legend-underLine");An.style.width=Ao-L+y;An.style.left=Al+5+y;An.style.top=Am+y;Ap.appendChild(An);}function AZ(Ao,Al,Am){var An=document.createElement("div");An[AB]("class","gm-legend-underLine-anchorPoint");An.style.left=Al+y;An.style.top=Am-3+y;Ao.appendChild(An);}function AJ(Ao,Al,Am,An){AN(Ao,Al,Am,An);AZ(Ao,Al,Am);}function o(An,Ay,Au,As,Aw){var At,Ao,Av,Al,Ax=a.restoreSpecialChars(An.innerHTML),Ar=Ax.length,Ap=0,Am=Ar,Aq=false;if(An.scrollHeight>1.5*H){At=X(An.innerHTML,Ay,L);Ao=At-Au+L;if(Ao>Aw){while((Am-Ap)>1){Av=(Ap+Am)>>1;Al=Ax.substring(0,Av)+x;At=X(Al,Ay,L);Ao=At-Au+L;if(Ao>Aw){Am=Av;}else{Ap=Av;}}An.innerHTML=Y.encodeHtmlString(Ax.substring(0,Ap)+x,true);An[AB]("title",Ax);Aq=true;At=X(An.innerHTML,Ay,L);Ao=At-Au+L;}AN(An,0,As+H,(Ao<Aw)?Ao:Aw);}if(Au>Aw){An[AB]("title",Ax);}else{if(!Aq){An[AB]("title","");}}}function AA(Al,Au,Aq,Am,At,Av){var An,Ap,Ar,As,Ao=document.createElement("div");Ao[AB]("class","gm-legend-textcell");Ao[AB]("type",C.LGD_TEXT);Ao.style.lineHeight=e+y;if(At){As=AK(Ao,Au,Av,At);}if(Am&w){An=(AL+AV)/2+Aq*AL;Ar=z;}else{An=(u+AV)/2+Aq*u;if(Am&Ak){if(Am&Ai){Ar=0;}else{Ar=t;}}else{if(Am&g){Ar=Q;}else{Ar=0;}}}Ap=As||t+L;Ao.innerText=Au;Ao.identity={objType:AI.LEGEND_TEXT};AJ(Al,Ar,An,Ap);this.textDivs.push(Ao);Al.appendChild(Ao);}function Ac(Al,Ao){var Am,Aq,Ap,An=0;if(Al){Ap=Al.elements;for(Am=0,Aq=Ap.length;Am<Aq;Am++){An=Math.max(An,X(Ap[Am].label,Ao,L));}An+=z+A*2+AX;}return An;}function V(Ao,An){var Ar,Al,Aq,Ap=Ao.items,Am=0;if(!Ap){return 0;}Ar=Ap.length;Aq=Ao.custMetrics;for(Al=0;Al<Ar;Al++){if(Aq&&Aq.indexOf(Ap[Al])!==-1){Am=Math.max(Am,X(Ap[Al],An,L)+Q);}else{Am=Math.max(Am,X(Ap[Al],An,L));}}return Am;}function AR(Ao,An){var Al,Aq,Ap,Am=0;if(Ao){Ap=Ao.elements;Aq=Ap.length;if(Ao.caseFlag===1){Am=V(Ao,An);}else{if(Ao.caseFlag===0){for(Al=0;Al<Aq;Al++){Am=Math.max(Am,X("Max: "+Ap[Al].v,An,L));}Am+=u*l;Am=Math.max(Am,V(Ao,An));}else{if(Ao.caseFlag===2){for(Al=0;Al<Aq;Al++){Am=Math.max(Am,X(Ap[Al].v,An,L));}Am+=u*Aq+t;Am=Math.max(Am,V(Ao,An));}else{if(Ao.caseFlag===3){for(Al=0;Al<Aq;Al++){Am=Math.max(Am,X(Ap[Al].v,An,L));}Am+=u*v;}}}}Am=Math.max(Am,X(J,An,L));Am+=A*3;}return Am;}function d(Aw,Ao,A0){if(!Aw||!Aw.length||Aw.length<1){return 0;}var Ap,Am,Az,Al,As,Av,Ar,Au,At,An,Aq,Ay=n+2*Ah,Ax=Ay;for(Ap=0;Ap<Aw.length;Ap++){Ar=Aw[Ap];if(Ar.dataType===Aa.COLOR_BY){Au=Ar.dataObj;if(Au){An=2*AH+H;Az=a.removeExtraSpace(Au.item);Av=X(Az,A0,L);if((Av+2*A>Ao-2*Ah)&&I(Az)){An+=H;}Al=Au.elements;Am=Al.length;An+=A;An+=h;Al.forEach(function(A1){if(A1.bftp){Af.GMLegend.IMAGE_SIZE_FIXED=G;AL=G;}});Ay+=An+AL*Am;Ax+=An+(Am>0?AL:0);}}else{if(Ar.dataType===Aa.SIZE_BY){At=Ar.dataObj;if(At){Aq=2*AH+H;Az=a.removeExtraSpace(At.item);Av=X(Az,A0,L);if((Av+2*A>Ao-2*Ah)&&I(Az)){Aq+=H;}As=At.caseFlag;if(As===1){Am=0;}else{if(As===0){Am=2;}else{if(At.caseFlag===2||As===3){Am=At.elements.length;}}}Am+=(At.items&&At.items.length)||0;Aq+=u*Am;Aq+=A;Aq+=h;Ay+=Aq;Ax+=Aq;}}}}return{height:Ay,minHeight:Ax};}function Ad(Al,Am){var Ao=0,An=0;P.forEach(Al||[],function(Ap){var Aq;if(Ap.dataType===Aa.COLOR_BY){Aq=Ac(Ap.dataObj,Am);if(Aq>Ao){Ao=Aq;}}else{if(Ap.dataType===Aa.SIZE_BY){Aq=AR(Ap.dataObj,Am);if(Aq>An){An=Aq;}}}});return Math.max(Ao,An)+2*Ah;}function j(Am,As,Aq,Ap){var An=d(Am,As,Ap),Al=An.height,Ar=Aq-W*2,Ao={};Ao.autoCollapse=An.minHeight>Ar;Ao.minHeight=An.minHeight;Ao.width=As;Ao.height=Math.min(Al,Ar);if(Al>Ar){Ao.cutBy=Al-Ar;}return Ao;}function E(Am,An){var Ao=Am.decodedColor||Am.color||AD.VAL_AUTOMATIC,Al;if(Ao.c1){Al=Ae.buildGradient(Ao.or,Ao.c1,Ao.c2);An.style[Ae.convertCssToCamelCase(Al.n)]=Al.v;}else{An.style.backgroundColor=Ao;}if(Am.image){An.style.backgroundImage=Am.image;}if(Am.opacity!==undefined){An.style.opacity=Am.opacity;}An.identity=new f({objType:AI.COLOR_SQUARE,parentIdentity:this.identity,token:Am.token,decodedColor:Am.decodedColor,encodedColor:Am.encodedColor,isDefaultColor:Am.isDefaultColor});}function AW(){var A0,Ax,Av,Al,Aw,A2,Am,At,Ar,Ao,A4=document,A3=this.triBtn,Az=this.closeBtn,Aq=this.cbContainer,An=this.sb1Container,Ay=this.sb2Container,As=this.cbTableContainer,Ap=null,A1=this.height-n-A-2*Ah,Au=this.width-2*A-2*Ah;A3[AB]("class","gm-legend-tri-button-collapsed");if(this.autoCollapse){A3[AB]("title",mstrmojo.desc(13682,"There is not enough space to display the legend"));}else{A3[AB]("title",mstrmojo.desc(13683,"Maximize Legend"));}Az.style.display="none";this.splitter.style.display="none";this.domNode.style.overflow="hidden";for(A0=0;this.dataArray&&A0<this.dataArray.length;A0++){Al=this.dataArray[A0];if(Al.dataType===Aa.COLOR_BY){Ap=Al.dataObj;break;}}Aq.style.display=Ap?"block":"none";An.style.display="none";Ay.style.display="none";if(Ap){Av=Ap.elements;Ax=Av.length;Aw=this.cbTitle;Aw.style.display="none";Aq.style.top=n+y;Aq.style.width=Au+y;As.style.top="0px";A2=this.cbTable;A2.innerHTML="";for(A0=0;A0<Ax;A0++){Am=A4.createElement("tr");At=A4.createElement("td");Ao=A4.createElement("div");Ar=A4.createElement("div");Ao[AB]("class","gm-legend-colorbox-ctn-div");Ao[AB]("type",C.LGD_COLORBOX_CTN);Ao[AB]("title",Av[A0].label);Ar[AB]("class","gm-legend-colorbox-div");Ar[AB]("type",C.LGD_COLORBOX);E.call(this,Av[A0],Ar);Am[AB]("class","gm-legend-tr");Am.style.height=AL+y;At[AB]("class","gm-legend-colorbox");Ao.appendChild(Ar);At.appendChild(Ao);Am.appendChild(At);A2.appendChild(Am);if(A2.offsetHeight+AL>A1){break;}}A2.style.top="0px";A2.style.marginLeft="0px";As.style.top=A+y;As.style.height=A2.offsetHeight+y;}Aq.style.height=A1+y;}function q(An,Am,Ap,Al){var Ao=document.createElementNS(O,"circle");Ao.setAttribute("cx",Am);Ao.setAttribute("cy",Ap);Ao.setAttribute("r",Al);Ao.setAttribute("class","gm-legend-sizeby-circle");An.appendChild(Ao);}function AF(An,Ao,Ar,Am,Aq,As,Ap){var Al=document.createElementNS(O,"line");Al.setAttribute("x1",Ao);Al.setAttribute("y1",Ar);Al.setAttribute("x2",Am);Al.setAttribute("y2",Aq);Al.style.strokeWidth=As;if(Ap){Al.setAttribute("class",Ap);}An.appendChild(Al);}function Ab(Am,A0){var Az,An,Ap,Aq,Ao,Al,Ay,Ar,A1,As,Aw=Math.PI,At=A0.elements,Au=At.length,Av=Au*u,Ax=Am.getContext("2d"),A2={LINE_COLOR:"#b0b0b0",MIN_WIDTH:1,MAX_WIDTH:10},A3=AQ.getPropertyByPath(this,"widget.model.data.visName")||AQ.getPropertyByPath(this,"widget.model.data.vis.vn");switch(A3){case"GraphMatrixVisualizationStyle":if(this.shapeType===AG.SQUARE||this.shapeType===AG.TICK||this.shapeType===AG.LINE||this.shapeType===AG.BAR||this.shapeType===AG.AREA||this.shapeType===AG.RECTANGLE){As="rectangle";}else{As="circle";}break;case"VIHeatMapVisualizationStyle":As="rectangle";break;default:As="circle";break;}switch(A0.caseFlag){case 0:Ax.save();if(mstrApp.getThemeClassName().indexOf("dark")>=0){Ax.strokeStyle="rgba(116, 116, 117, 0.7)";Ax.fillStyle="rgba(116, 116, 117, 0.7)";}else{Ax.strokeStyle="rgba(188, 188, 189, 0.7)";Ax.fillStyle="rgba(188, 188, 189, 0.7)";}Av=u*l;A1=Math.floor(u*0.75+0.5);An=Math.floor(A1/3.5+0.5);if(As==="circle"){Aq=A1+1;Ao=u;Ax.beginPath();Ax.arc(Aq,Ao,A1,0,2*Aw,false);Ax.fill();Ax.stroke();Aq=2*Aq+2*An;Ao=Math.floor(0.53*u+0.5);Ax.beginPath();Ax.arc(Aq,Ao,An,0,2*Aw,false);Ax.fill();Ax.stroke();}else{Aq=1;Ao=u-A1;Ax.beginPath();Ax.fillRect(Aq,Ao,2*A1,2*A1);Aq=2*A1+2+An;Ao=Math.floor(0.53*u-An+0.5);Ax.beginPath();Ax.fillRect(Aq,Ao,2*An,2*An);}Ax.translate(0.5,0.5);Ax.lineWidth=1;Ax.strokeStyle="#9C9C9C";Aq=2*A1+3*An+3;Ao=Math.floor(0.53*u+0.5);Ax.beginPath();Ax.moveTo(Aq,Ao);Ax.lineTo(Av,Ao);Ax.stroke();Aq=2*A1+2;Ao=Math.floor(1.53*u-An+0.5);Ax.beginPath();Ax.moveTo(Aq,Ao);Ax.lineTo(Aq+An,Ao+An);Ax.lineTo(Av,Ao+An);Ax.stroke();Ax.restore();break;case 1:break;case 2:Ap=parseInt(At[0].diameter,10);Ap=Math.min(Ap,Av);Ax.fillStyle="#ADADAC";Ax.strokeStyle="#ADADAC";if(As==="circle"){Aq=Av>>1;Ao=Aq;Ax.arc(Aq,Ao,Ap>>1,0,2*Aw,false);Ax.fill();Ax.stroke();}else{Aq=(Av-Ap)>>1;Ao=Aq;Ax.rect(Aq,Ao,Ap,Ap);Ax.fill();Ax.stroke();}break;case 3:Al=A2.MIN_WIDTH;Ay=(Au===1?0:(A2.MAX_WIDTH-A2.MIN_WIDTH)/(Au-1));Av=Am.width;Ar=u;Aq=0;Ao=u/2;Ax.strokeStyle=A2.LINE_COLOR;for(Az=0;Az<Au;Az++){Ax.lineWidth=Al;Ax.beginPath();Ax.moveTo(Aq,Ao);Ax.lineTo(Av-Aq,Ao);Ax.stroke();Ao+=Ar;Al+=Ay;}break;default:break;}}function AY(Am,Au){var As=1,Al,Aq=1.5*H,At=Am.innerHTML,Ar=a.restoreSpecialChars(At),An=Ar.split(N),Av,Ao;var Ap=function(Aw){Ao=Ar[Aw];return Ao!==undefined?Ao:"";};if(Am.scrollHeight>Aq){if(!An[0]){return 0;}Al=An[0]+Ap(An[0].length);while(An[As]!==undefined){Av=Al+An[As];Av+=Ap(Av.length);Am.innerHTML=a.replaceSpecialChars(Av);if(Am.scrollHeight>Aq){break;}Al=Av;As++;}Am.innerHTML=At;}else{Al=Ar;}return X(Al,Au,L);}function c(A1,Az,A0,Av){var Ay,An,Aq,Ap,Au,Ax,At=Az.elements,Aw=At.length,As=[],A2=document,Al=A2.createDocumentFragment(),Ao=false,Ar=this.styles,Am=A0;switch(Av){case 0:if(Aw>0){As.push({v:"Min: "+At[Aw-1].v});As.push({v:"Max: "+At[0].v});Aw=2;}break;case 1:At=Az.items;P.forEach(At,function(A3){As.push({v:A3});});break;case 3:As=At;break;default:As=At;Ao=true;break;}Aw=As.length;for(Ay=0;Ay<Aw;Ay++){An=A2.createElement("tr");An[AB]("class","gm-legend-tr2");An.style.height=u+y;if(Ao){Aq=A2.createElement("td");AA.call(this,Aq,As[Ay].sign,Ay,R|Ak|Ai);Aq[AB]("class","gm-legend-sign");An.appendChild(Aq);Am-=t;}Ap=A2.createElement("td");Ap[AB]("class","gm-legend-desc");if(Az.custMetrics&&Az.custMetrics.indexOf(As[Ay].v)!==-1){AA.call(this,Ap,As[Ay].v,Ay,R|g,Am-Q,Ar);Ax=parseInt(Ap.lastChild.style.width,10);Au=A2.createElement("div");Au.setAttribute("class",AT);Au.setAttribute("title",AP);Ap.appendChild(Au);Au.style.top=(u-8)/2+Ay*u+y;Ap.lastChild.style.marginLeft=Ax+y;}else{if(Ao){AA.call(this,Ap,As[Ay].v,Ay,R|Ak,Am,Ar);}else{AA.call(this,Ap,As[Ay].v,Ay,R,Am,Ar);}}An.appendChild(Ap);Al.appendChild(An);}A1.appendChild(Al);}function U(){var An="."+AT,Al=this.domLegend.querySelectorAll(An),Am;P.forEach(Al,function(Ao){Am=Ao.parentNode;if(Am){Am.removeChild(Ao);}});}function T(){var BE,A6,BJ=0,BK,A1,A8,A2,Ao,BC,BF,As,BI,BD,Al=this.width-2*Ah,Aw=Al-2*A,Aq=document,An=this.triBtn,A7=this.closeBtn,A5=this.cbContainer,Ax=this.cbTableContainer,BL=this.sb1Container,Ar=this.sb2Container,Av,At,Ap,Au,BA,Az,A9=this.cutBy,A4=n,BG=0,A3=this.styles,BB,BH,A0=(H+AV)/2,Am,Ay;An[AB]("class","gm-legend-tri-button");An[AB]("title",mstrmojo.desc(13684,"Minimize Legend"));A7.style.display="block";A7[AB]("title",mstrmojo.desc(12002,"Hide Legend"));this.updateSplitter();U.call(this);this.domNode.style.overflow="visible";A5.style.display="none";BL.style.display="none";Ar.style.display="none";for(A6=0;this.dataArray&&A6<this.dataArray.length;A6++){At=this.dataArray[A6];BA=null;Az=null;if(At.dataType===Aa.COLOR_BY){BA=At.dataObj;if(BA){A5.style.display="block";A2=a.removeExtraSpace(BA.item);Ao=BA.elements;BE=Ao.length;A5.style.top=A4+y;A5.style.width=Aw+y;BI=0;if(BG===0){Ae.addClass(this.sepLine1,"toggleHide");BG++;}BK=this.cbTitle;BK.style.display="block";AK(BK,A2,A3,Aw);BK.innerHTML=Y.encodeHtmlString(A2,true);BI+=Ag(BK,Aw)+2*AH;Am=AY(BK,A3);o(BK,A3,Am,A0,Aw);AJ(BK,0,A0,(Am<Aw)?Am:Aw);A1=this.cbTable;A1.style.display="block";A1.style.width=(Aw-AX)+y;A1.style.marginLeft=AX+y;A1.innerHTML="";A1.appendChild(this.fillColorByTable(BA,0));BC=AL*BE+1;Ax.style.top=BI+y;A1.style.display="table";BI+=BC+A;if(A9){BI-=A9;BC-=A9;}A5.style.height=BI+y;Ax.style.height=BC+y;A4+=BI+h;}}else{if(At.dataType===Aa.SIZE_BY){Az=At.dataObj;if(Az){BJ++;if(BJ===1){Ap=BL;Au=this.sb1Title;A8=this.sb1MetricNamesTable;A1=this.sb1DataTable;Av=this.sb1Canvas;}else{Ap=Ar;Au=this.sb2Title;A8=this.sb2MetricNamesTable;A1=this.sb2DataTable;Av=this.sb2Canvas;}Ap.style.display="block";A2=a.removeExtraSpace(Az.item);Ao=Az.elements;BE=Ao.length;Ap.style.top=A4+y;Ap.style.width=Aw+y;BI=0;if(BG===0){Ae.addClass(this.sepLine2,"toggleHide");BG++;}if(Az.caseFlag===0){BF=l*u;As=2*u;}else{if(Az.caseFlag===3){BF=v*u;As=BE*u;}else{BF=BE*u;As=BF;}}BK=Au;BK.innerHTML=Y.encodeHtmlString(A2,true);BH=Az.custMetrics&&Az.custMetrics.indexOf(A2)!==-1;if(BH){Ay=Aw-Q;}else{Ay=Aw;}AK(BK,A2,A3,Ay);if(BH){BB=Aq.createElement("div");BB.setAttribute("class",AT);BB.setAttribute("title",AP);Ap.appendChild(BB);BB.style.top=(BK.offsetHeight-8)/2+AH+h+y;BB.style.left=BK.offsetWidth+"px";}Am=AY(BK,A3);o(BK,A3,Am,A0,Ay);AJ(BK,0,A0,(Am<Ay)?Am:Ay);BI+=Ag(BK,Ay)+2*AH;BD=Aw;A8.innerHTML="";if(Az.items&&Az.items.length>0){A8.style.display="block";c.call(this,A8,Az,BD,1);}else{A8.style.display="none";}A8.style.top=BI+y;A8.style.left="0"+y;A8.style.width=BD+y;BI+=A8.offsetHeight;if(BF>0){BD-=BF+A;}A1.innerHTML="";if(Az.elements&&Az.elements.length>0){A1.style.display="block";c.call(this,A1,Az,BD,Az.caseFlag);}else{A1.style.display="none";}Av.style.position="absolute";Av.style.top=BI+y;Av.style.marginLeft=A+y;A1.style.top=BI+y;A1.style.left=(BF+A)+y;A1.style.width=BD+y;BI+=As+A;Ap.style.height=BI+y;A1.style.display="table";Av.width=BF;Av.height=As;Ab.call(this,Av,Az);A4+=BI+h;}}}}}function r(){var Al,Am=this.textDivs,An=Am.length;for(Al=0;Al<An;Al++){b(Am[Al]);}}mstrmojo.gm.GMLegend=mstrmojo.declare(mstrmojo.VisLegend,[mstrmojo._FormateVisLegend,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMLegend",cssClass:"gm-legend",dropZoneHighlightCss:"gm-legend-slot",dockedPositions:null,dockPos:AO.LEFT,GMW:0,GMH:0,isMinimal:false,shapeType:undefined,legendMarkup:'<div class="gm-legend-button"><div class="gm-legend-tri-button"></div><div class="gm-legend-name"></div><div class="gm-legend-close-button"></div></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><div class="gm-legend-table-container"><table class="gm-legend-table"></table></div></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-resizer-v" draggable="false"></div><div class="gm-legend-resizeRect"></div>',init:function AE(Am){this.styles={};this.cutBy=null;this.dataArray=null;this.textDivs=[];this.dockedPositions=[{pos:p.LEFT_TOP},{pos:p.LEFT_MIDDLE},{pos:p.LEFT_BOTTOM},{pos:p.RIGHT_TOP},{pos:p.RIGHT_MIDDLE},{pos:p.RIGHT_BOTTOM}];var An=Am.placeholder,Al=An.style;if(An){this.cssClass=An.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(Am.hasOwnProperty("width")===false){Am.width=(Al&&Al.width)||An.clientWidth;}if(Am.hasOwnProperty("height")===false){Am.height=(Al&&Al.height)||An.clientHeight;}if(Am.hasOwnProperty("left")===false){Am.left=An.offsetLeft;}if(Am.hasOwnProperty("top")===false){Am.top=An.offsetTop;}}this._super(Am);},setupScrollNodes:function M(){this.scrollNode=this.cbTableContainer;},getSplitterDockPos:function(){return(this.currDockedPositionIdx<3)?AO.RIGHT:AO.LEFT;},updateAlignClass:function(){var Ap=this.getDockedPosition(),Aq=Ap&&Ap.pos,An=(Aq===p.RIGHT_MIDDLE||Aq===p.RIGHT_TOP||Aq===p.RIGHT_BOTTOM||Aq===p.RIGHT),Al=this.domLegend,Am=this.domNode,Ao=this.resizeRect;if(An){Ae.removeClass(Al,"gm-align-left");Ae.addClass(Al,"gm-align-right");Ae.toggleClass(Al,"gm-legend-alignRight",true);Ae.toggleClass(Al,"gm-legend-alignLeft",false);Ae.toggleClass(Am,"gm-legend-alignRight",true);Ae.toggleClass(Am,"gm-legend-alignLeft",false);Ae.toggleClass(Ao,"gm-legend-alignRight",true);Ae.toggleClass(Ao,"gm-legend-alignLeft",false);}else{Ae.removeClass(Al,"gm-align-right");Ae.addClass(Al,"gm-align-left");Ae.toggleClass(Al,"gm-legend-alignRight",false);Ae.toggleClass(Al,"gm-legend-alignLeft",true);Ae.toggleClass(Am,"gm-legend-alignRight",false);Ae.toggleClass(Am,"gm-legend-alignLeft",true);Ae.toggleClass(Ao,"gm-legend-alignRight",false);Ae.toggleClass(Ao,"gm-legend-alignLeft",true);}},postBuildRendering:function(){this._super();var Ax=this.styles,Az=this.domNode,Ao=this.domLegend.childNodes,As=Ao[1],Aq=Ao[2],Ay=Ao[3],A2={objType:AI.LEGEND};this.addSlots({lgdBtn:Ao[0],triBtn:Ao[0].firstChild,lgdName:Ao[0].childNodes[1],closeBtn:Ao[0].lastChild,cbContainer:Ao[1],sepLine1:As.firstChild,cbTitle:As.childNodes[1],cbTableContainer:As.childNodes[2],cbTable:As.childNodes[2].firstChild,sb1Container:Aq,sepLine2:Aq.firstChild,sb1Title:Aq.childNodes[1],sb1MetricNamesTable:Aq.childNodes[2],sb1DataTable:Aq.childNodes[3],sb1Canvas:Aq.childNodes[4],sb2Container:Ay,sepLine3:Ay.firstChild,sb2Title:Ay.childNodes[1],sb2MetricNamesTable:Aq.childNodes[2],sb2DataTable:Ay.childNodes[3],sb2Canvas:Ay.childNodes[4],splitter:Ao[4],resizeRect:Ao[5]});Af.GMLegend.applyHTML5Props(Ax);this.bgColor=Ax.background||Ax.backgroundColor||"transparent";AQ.applyStyle2Legend(Ax,Az,this.domLegend);if(mstrApp.isInVFInteractMode){this.closeBtn.style.visibility="hidden";}var Ar=this.getSplitterDockPos(),A1=this.width-2*A-2*Ah,At=this.cbTitle,Am=At.style,An=this.sb1Title,Ap=this.sb2Title,A0=An.style,Al=Ap.style,Aw=this.sepLine1,Av=this.sepLine2,Au=this.sepLine3;Aw.style.width=A1+y;Av.style.width=A1+y;Au.style.width=A1+y;Am.lineHeight=H+y;A0.lineHeight=H+y;Al.lineHeight=H+y;Am.maxHeight=2*H+y;A0.maxHeight=2*H+y;Al.maxHeight=2*H+y;At.identity={objType:AI.LEGEND_TEXT,parentIdentity:A2};An.identity={objType:AI.LEGEND_TEXT,parentIdentity:A2};Ap.identity={objType:AI.LEGEND_TEXT,parentIdentity:A2};this.dockPos=Ar;this.identity=Az.identity=A2;this.updateAlignClass();},feedData:function(Al,Am){this.dataArray=Al;this.isMinimal=Am;this.textDivs=[];Af.GMLegend.applyHTML5Props(this.styles);this.autoCollapseLegend();if(Am||this.autoCollapse){AW.call(this);this.draggable=false;}else{T.call(this);this.draggable=true;}r.call(this);this.updateScrollbars();},autoCollapseLegend:function(){this.autoCollapse=false;},updateColorBySquare:function(An){var Ao,Ap,Am,Al;if(An){Al=this.domNode.querySelectorAll(".gm-legend-colorbox-div");Ao=An.elements;Ap=Math.min(Ao.length,Al.length);for(Am=0;Am<Ap;Am++){E.call(this,Ao[Am],Al[Am]);}}},updateContainerSize:function(Al,Am){this.GMW=Al;this.GMH=Am;this.calculateDockedPositions(Al,Am);},updateAfterResize:function(){Af.GMLegend.applyHTML5Props(this.styles);var Aq=0,Ap=this.width,Ar=this.cbContainer,At=this.sb1Container,An=this.sb2Container,Ao=this.sepLine1,Am=this.sepLine2,Al=this.sepLine3,As=Ap-2*A-2*Ah;P.forEach(this.dataArray||[],function(Au){if(Au.dataType===Aa.COLOR_BY){if(Au.dataObj){if(Ar){Ar.style.width=As+y;}}}else{if(Au.dataType===Aa.SIZE_BY){if(Au.dataObj){Aq++;if(Aq===1&&At){At.style.width=As+y;}if(Aq===2&&An){An.style.width=As+y;}}}}});if(Ao){Ao.style.width=As+y;}if(Am){Am.style.width=As+y;}if(Al){Al.style.width=As+y;}this.domLegend.style.width=this.width+y;this.domLegend.style.height=this.height+y;},updateStyle:function(Al){this.styles=Al;this.bgColor=Al.background||Al.backgroundColor||"transparent";AQ.applyStyle2Legend(Al,this.domNode,this.domLegend);},updateTitleLineHeight:function(){var Am=this.cbTitle,Ap=Am.style,An=this.sb1Title,Al=this.sb2Title,Aq=An.style,Ao=Al.style;Af.GMLegend.applyHTML5Props(this.styles);Ap.lineHeight=H+y;Aq.lineHeight=H+y;Ao.lineHeight=H+y;Ap.maxHeight=2*H+y;Aq.maxHeight=2*H+y;Ao.maxHeight=2*H+y;},getSplitterPosition:function(An){var Am=An.src.startPos+An.tgt.pos.x-An.src.pos.x,Ap=An.src.posInfo,Ao=Ap&&Ap.min,Al=Ap&&Ap.max;if(Ao!==undefined){Am=Math.max(Am,Ao);}if(Al!==undefined){Am=Math.min(Am,Al);}return Am;},positionResizeRect:function(Al,Am){var Ao=Al.src.posInfo.dockPosition===AO.LEFT,Ap=Am-AS,Aq=Ao?Ap:0,An=Ao?this.width-Ap:Ap;this.resizeRect.style.left=(Aq-1)+y;this.resizeRect.style.width=(An-2)+y;},updateLegendSlot:function(Ao,Al){var An=this.getDockedPosition(),Am=An&&An.pos;if(Am!==Ao){this.currDockedPositionIdx=Al;this.dockPos=this.getSplitterDockPos();this.updateDropZonePosition();this.updateAlignClass();this.updateSplitter();this.widget.onLegendDropZoneChange(this.getDockedPosition());}},isDragValid:function s(Al){return !mstrApp.isInVFInteractMode&&this._super(Al);},ondragstart:function(Al){var An=Al.src.e.target,Am=Al.src.data;if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(false);}if(An===this.splitter){Al.src.startPos=An.offsetLeft;Al.src.posInfo=this.getSplitterInfo(An);this.positionResizeRect(Al,Al.src.startPos);Ae.addClass(this.resizeRect,"resizing");}else{this.cbTableScrollTop=this.cbTableContainer.scrollTop;this._super(Al);if(!Am||!Am.isScrollBar){this.clearSelectedTargets();Ae.toggleClass(this.domNode,"gm-legend-hover",false);Ae.toggleClass(this.domLegend,"active",false);this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background=this.bgColor;this.isDragging=true;}}},ondragmove:function D(Al){var An=Al.src.e.target,Am;if(An===this.splitter){Am=this.getSplitterPosition(Al);An.style.left=Am+y;this.positionResizeRect(Al,Am);}else{this._super(Al);}},ondragend:function(Al){var An=Al.src.e.target;if(An===this.splitter){Ae.removeClass(this.resizeRect,"resizing");this.splitterMoved(this.getSplitterPosition(Al)-Al.src.startPos,Al.src.posInfo);}else{this._super(Al);var Am=Al.src.data;if(!Am||!Am.isScrollBar){this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background="transparent";this.isDragging=false;}delete this.cbTableScrollTop;}if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},onscroll:function(){var Am,Aq,Ap=this.scrollNode.scrollTop,Ao,An,Al;if(this.prevScrpllTop===Ap){return ;}Aq=(this.dataArray&&this.dataArray.length)||0;for(Am=0;Am<Aq;Am++){An=this.dataArray[Am];if(An.dataType===Aa.COLOR_BY){Al=An.dataObj;break;}}if(Al){Ao=this.cbTable;Ao.innerHTML="";Ao.appendChild(this.fillColorByTable(Al,Math.floor(Ap/AL)));this.prevScrpllTop=Ap;this.scrollNode.scrollTop=Ap;this._super();}},fillColorByTable:function(A1,Ar){var A2,Az,An,Aq,Ap,As,At,Au=this.styles,Al,Ax=this.cutBy,Av=this.width-2*Ah-2*A,Aw,Ao,Am,A3,Ay,A4;Aw=A1.elements;Az=Aw.length;Al=document.createDocumentFragment();Ao=Av-z-AX;Am=0;A3=AL*Az;Ay=Ar*AL;function A0(A5){An=document.createElement("tr");Aq=document.createElement("td");An.style.height=A5+y;Aq[AB]("class","gm-legend-colorbox");An.appendChild(Aq);Al.appendChild(An);}if(Ar>0){A0(Ay);}for(A2=Ar;A2<Az;A2++){An=document.createElement("tr");Aq=document.createElement("td");Ap=document.createElement("td");As=document.createElement("div");At=document.createElement("div");As[AB]("class","gm-legend-colorbox-ctn-div");As[AB]("type",C.LGD_COLORBOX_CTN);At[AB]("class","gm-legend-colorbox-div");At[AB]("type",C.LGD_COLORBOX);E.call(this,Aw[A2],At);An[AB]("class","gm-legend-tr");An.style.height=AL+y;Aq[AB]("class","gm-legend-colorbox");Ap[AB]("class","gm-legend-desc");A4=Aw[A2];if(A4.bftp){a.fillImageInDiv(Ap,A4.bftp,A4.label,"gm-img-legend");}else{AA.call(this,Ap,A4.label,A2,w,Ao,Au);}As.appendChild(At);Aq.appendChild(As);An.appendChild(Aq);An.appendChild(Ap);Al.appendChild(An);Am+=AL;if(Ax&&(Ax+Am-AL)>A3){A0(A3-Am-Ay);break;}}return Al;},calculateDockedPositions:function(Am,Ap){var Ao,Ar=this.getWidth(),Al=this.getHeight(),An=this.dockedPositions,Aq=function(As){switch(As.pos){case k.LEFT_TOP:As.x=0;As.y=W;break;case k.LEFT_MIDDLE:As.x=0;As.y=Math.max(W,(Ap-Al)>>1);break;case k.LEFT_BOTTOM:As.x=0;As.y=Math.max(0,Ap-Al-W);break;case k.RIGHT_TOP:As.x=Am-Ar;As.y=W;break;case k.RIGHT_MIDDLE:As.x=Am-Ar;As.y=Math.max(W,(Ap-Al)>>1);break;case k.RIGHT_BOTTOM:As.x=Am-Ar;As.y=Math.max(0,Ap-Al-W);break;}};for(Ao=0;Ao<An.length;Ao++){Aq(An[Ao]);}this.updateDropZonePosition();},updateDropZonePosition:function(){var Al=this.getDockedPosition(),Am=this.dropZoneNode.style;Am.left=Al.x+y;Am.top=Al.y+y;},updateDropZoneNode:function(Al){this._super(Al);this.dockPos=this.getSplitterDockPos();this.updateSplitter();},onmouseover:function(Al){var An=this.domLegend,Ar=Al.getTarget(),Ao=Ar.getAttribute("type"),Aq=this.widget,Am;if(this.isDragging){return ;}var Ap=S.copy(this.styles);Ap.opacity+=0.4;AQ.applyStyles2DomNode(this.domNode,Ap);if(AC.contains(An,Ar,true)){Ae.addClass(An,"active");}if(Ao===C.LGD_COLORBOX){Ar=Ar.parentNode;Ao=Ar.getAttribute("type");}if(Ao===C.LGD_COLORBOX_CTN){Am=Ar.firstChild.identity;if(!Am||!Am.comb){return ;}Ae.toggleClass(Ar,"hover-colorsquare",true);return ;}if(Aq.formattingMode){switch(Ao){case C.LGD_TITLE:case C.LGD_TEXT:Ae.toggleClass(An,"hover-txt",true);break;default:Ae.toggleClass(this.domNode,"gm-legend-hover",true);break;}}},onmouseout:function(Am){var Ao=this.domLegend,Al=Am.e.toElement||Am.e.relatedTarget,Ar=Am.getTarget(),Ap=Ar.getAttribute("type"),Aq=this.widget,An;AQ.applyStyles2DomNode(this.domNode,this.styles);if(!AC.contains(Ao,Al,true)){Ae.removeClass(Ao,"active");}if(Ap===C.LGD_COLORBOX){Ar=Ar.parentNode;Ap=Ar.getAttribute("type");}if(Ap===C.LGD_COLORBOX_CTN){An=Ar.firstChild.identity;if(!An||!An.comb){return ;}Ae.toggleClass(Ar,"hover-colorsquare",false);return ;}if(Aq.formattingMode||Aq.isOnFormattingMode){switch(Ap){case C.LGD_COLORBOX_CTN:case C.LGD_COLORBOX:break;case C.LGD_TITLE:case C.LGD_TEXT:Ae.toggleClass(Ao,"hover-txt",false);break;default:Ae.toggleClass(this.domNode,"gm-legend-hover",false);break;}}},onclick:function(Al){var Ao=Al.getTarget(),Am=Ao.getAttribute("type"),An=this.widget;if(Ao===this.triBtn){if(!this.autoCollapse){this.raiseEvent({name:"gm-legend-clicked",action:(this.isMinimal?"restore":"minimize")});}}else{if(Ao===this.closeBtn){this.raiseEvent({name:"gm-legend-clicked",action:"close",mousePos:Al.e});}else{if(Am===C.LGD_COLORBOX){Ao=Ao.parentNode;Am=Ao.getAttribute("type");}if(An.formattingMode||An.isOnFormattingMode){if(Am===C.LGD_COLORBOX_CTN){this.selectColorBox(Ao,true);}else{if(Am===C.LGD_TEXT||Am===C.LGD_TITLE){this.selectText();}else{this.selectLegendBody();}}}else{this.clearSelectedColorBox();}}}AC.stopPropogation(null,Al.e);},attachClearEvent:function(){if(this.clearSelectTargetfn){return ;}var Am=this,Al=this.domLegend;this.clearSelectTargetfn=function(Aq){var Ap=Aq.target,An=Am.widget.toolEditor,Ao;if(!AC.contains(Al,Ap,true,Al)){if(An){Ao=An.domNode;if(!AC.contains(Ao,Ap,true,Ao)){Am.clearSelectedTargets();}}else{Am.clearSelectedTargets();}}};AC.attachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);},clearSelectedColorBox:function(){var Al=this.selectedColorBox;if(Al){Ae.toggleClass(Al,"select",false);Ae.toggleClass(Al,"selectfmt",false);this.selectedColorBox=undefined;}},clearSelectedText:function(){Ae.removeClass(this.domNode,"select-txt");},clearSelectedLegendBody:function(){Ae.removeClass(this.domNode,"gm-legend-select");},clearSelectedTargets:function(){this.clearSelectedColorBox();this.clearSelectedText();this.clearSelectedLegendBody();if(this.clearSelectTargetfn){AC.detachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);delete this.clearSelectTargetfn;}},selectColorBox:function(An,Am){var Al=An.firstChild.identity;if(!Al||!Al.comb){return ;}this.clearSelectedText();this.clearSelectedLegendBody();if(this.selectedColorBox!==An){this.clearSelectedColorBox();this.selectedColorBox=An;if(Am){Ae.toggleClass(An,"selectfmt",true);}else{Ae.toggleClass(An,"select",true);}this.attachClearEvent();}},selectText:function(){this.clearSelectedColorBox();this.clearSelectedLegendBody();Ae.addClass(this.domNode,"select-txt");this.attachClearEvent();},selectLegendBody:function(){this.clearSelectedColorBox();this.clearSelectedText();Ae.addClass(this.domNode,"gm-legend-select");this.attachClearEvent();},adjustColorPickerPos:function(Al){var Ao=AC.position(Al),Am=0,An={};if(this.currDockedPositionIdx<3){An.x=Ao.x+Ao.w+Am;An.alignLeft=true;}else{An.x=Ao.x-Am;An.alignLeft=false;}An.y=Ao.y+Ao.h+Am;return An;},getSplitterInfo:function(Aq){if(!Aq){return{};}var Am=this.dockPos,Ap={},Ao=this.width,Al=AM,An=Math.floor(this.GMW/3);Ap.dockPosition=Am;if(Am===AO.LEFT){Ap.min=Math.min(Ao-An,0);Ap.max=Math.max(Ao-Al,0);}else{if(Am===AO.RIGHT){Ap.min=Al;Ap.max=An;}}Ap.min+=AS;Ap.max+=AS;return Ap;},splitterMoved:function(Al,Am){if(Al===0){return ;}if(Am.dockPosition===AO.LEFT){Al=-Al;}this.raiseEvent({name:"gm-legend-resized",position:Al});this.updateSplitter();if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},updateSplitter:function(){AU(this.splitter,this.dockPos,this.width,this.height);this.resizeRect.style.height=this.height-2+y;}});Af.GMLegend.IMAGE_SIZE_FIXED=0;Af.GMLegend.applyHTML5Props=function(An){var Ao=parseInt(An.fontSize,10)||8,Am;if(An.fontSize.indexOf("px")>=0){Ao=Math.floor(Ao*Z+0.5);}Am=Math.floor(Ao/Z*F+0.5);H=Math.max(Ao,8)+9;AV=Math.floor(Ao/Z+0.5);e=Math.max(Am,15);AL=Af.GMLegend.IMAGE_SIZE_FIXED||(Math.max(Am,20)+2);u=Math.max(Am,14)+2;Ah=parseInt(An.borderWidth,10)||1;var Al=parseInt(An.tbHeight,10);n=isNaN(Al)?K:Al;};Af.GMLegend.getLegendSize4MinMode=function(Am,An){var Ap,Ao,Al=n+2*Ah;if(Am){Ao=Am.elements;Ap=Ao.length;Al+=AL*Ap;Al+=2*A;}Al=Math.min(Al,An-W*2);return{width:z+5+7+2*Ah,height:Al};};Af.GMLegend.getLegendSize=function(Az,Ao,Al,Ar,A1,As){var At,Am,A0,Aq,Ap=Ar-W*2,Ax=0,An=0,Aw={},Av,Au,Ay;if(!Az||!Az.length||Az.length<1){return{};}if(Ao!==undefined){if(!As){As=Math.floor(Ad(Az,A1)*Ao);}Aq=Math.min(As,Math.floor(Al/3));Aq=Math.max(Aq,50);return j(Az,Aq,Ar,A1);}Aq=Math.min(Math.floor(0.2*Al),300);for(At=0;At<Az.length;At++){Au=Az[At];if(Au.dataType===Aa.COLOR_BY){Av=Ac(Au.dataObj,A1);if(Av>Ax){Ax=Av;}}else{if(Au.dataType===Aa.SIZE_BY){Av=AR(Au.dataObj,A1);if(Av>An){An=Av;}}}}Am=Math.max(Ax,An)+2*Ah;Aw.width=Math.min(Am,Aq);Aw.scale=Aw.width/Am;Ay=d(Az,Aw.width,A1);A0=Ay.height;Aw.autoCollapse=Ay.minHeight>Ap;Aw.minHeight=Ay.minHeight;Aw.height=Math.min(A0,Ap);if(A0>Ap){Aw.cutBy=A0-Ap;}return Aw;};}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.hash");mstrmojo.requiresCls("mstrmojo.VisEnum");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Vector2D","Point2D","CEModuleMain","TripleId","FormatLine","JSONCanvas","SVGCanvas","GraphMatrixContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumPictureFormatType","EnumGraphMajorType","EnumLineJoinType","EnumLineStyle","EnumImageUsage","EnumDSSExtraGraphObject","EnumChartStyle","EnumGraphMatrixMajorGraphType","EnumGraphMatrixThemeType","EnumDssGraphGridChartUniformColorMode","EnumAttachedPointsStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumVariantBool","EnumDSSGraphFillEffect");var CG=mstrmojo.chart,Bs=CG.enums,d=Bs.EnumPictureFormatType,g=Bs.EnumGraphMajorType,A3=Bs.EnumLineJoinType,AW=Bs.EnumImageUsage,Am=CG.common.Utility,k=CG.gModuleMain,CC=CG.gNullTripleId,AZ=CG.gNullSeriesId,M=CG.gNullGroupId,Ba=Bs.EnumLineStyle,Bk=Bs.EnumDSSExtraGraphObject,H=Bs.EnumChartStyle,a=Bs.EnumGraphMatrixMajorGraphType,BC=Bs.EnumGraphMatrixThemeType,C=Bs.EnumAttachedPointsStyle,Aj=mstrmojo.VisEnum.ControlType,Ag=mstrmojo.hash;var Az=700,BZ=400,Ad=-16383,J=16383,BU=-16383,AA=16383,AE=500,Ar=0.1667,BQ=96,T=72;var CA=mstrmojo.chart.model,Av=CA.enums,Bg=Av.EnumDSSGraphType,Bi=Av.EnumDSSGraphProperty,Bj=Av.EnumDSSGraphObject,Z=Av.EnumDSSGraphFillBevelEffect,B1=Av.EnumDSSGraphFillEffect;var v=[],AQ=new CG.TripleId();var BX=mstrmojo.chart.ChartContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartContext",mBaseLayerObject:null,mPropertyMap:null,mGraphWidth:k.mDefaultGraphWidth,mGraphHeight:k.mDefaultGraphHeight,mGraphType:Bg.DssGraphTypeReserved,mDataset:null,mFormatManager:null,mCanvas:null,mCanvasInfo:null,caKeyMap:null,mLineJoinType:A3.LJT_MITER,mIsLineWidthOdd:false,mAbsoluteFontLineSize:true,mIsFontAntiAlias:true,mFontScaleRatio:1,mAxisAutoNumberFormat:null,mSelectedAxisAutoNumberFormat:null,mThresholdColorCache:{},globalFormats:null,mManualLayoutMode:false,mRecalculateFrame:true,mIsValueAxisShown:true,mUseAnimation:false,mIsTimeSeriesChart:false,mIsUniformAxisMode:false,mIsEntireChart:true,mIsGraphMatrix:false,mThemeType:BC._black,mUniformAxisContext:null,mpGraphMatrixContext:null,mPartialRendering:false,mRenderingWindow:null,mImageUsage:AW.GENERAL,mImageFormat:d.SVG,mDebugUseNewProperties:true,mTimers:[],mUseTimer:false,init:function CN(CV){this._super(CV);this.caKeyMap={c1:"x1",c2:"x1"};this.mUseTimer=CV.UseTimer||false;this.mGraphWidth=k.mDefaultGraphWidth;this.mGraphHeight=k.mDefaultGraphHeight;this.mDataset=CV.DataSet||CV.mDatasetPtr||null;this.mThemeType=BC._black;this.mSelectedAxisAutoNumberFormat={Array:[],Format:null};},getUtiliy:function Al(){return mstrmojo.chart.common.Utility;},populateCanvas:function AX(CW){CW=CW||false;if(CW){this.mCanvas=null;}if(!!this.mCanvas){return ;}var CV="SVG";if(this.mCanvasInfo){CV=this.mCanvasInfo.type||"SVG";delete this.mCanvasInfo.type;}else{this.mCanvasInfo={type:"SVG",gradPrefix:"gmGrad",mGradientCount:0,seriesDrawOrder:this.mDataset.GetSeriesIndexByPriority()};}switch(CV){case"JSON":this.mCanvas=new CG.JSONCanvas({});break;default:this.mCanvas=new CG.SVGCanvas(this.mCanvasInfo);break;}this.mCanvasInfo=null;},startTimer:function Bu(CW){if(this.mUseTimer){var CV=CW.functionName+": "+CW.purpose;console.time(CV);this.mTimers.push(CV);}},endTimer:function Bw(){if(this.mUseTimer){var CV=this.mTimers.pop();if(CV){console.timeEnd(CV);}}},vdWidth:function Bn(CV){return Math.floor(CV*this.mGraphWidth/Az+0.5);},vdHeight:function CB(CW){var CV=this.mGraphHeight;if(this.mIsUniformAxisMode&&!this.mIsEntireChart){CV=this.mUniformAxisContext.mGraphHeight;}return Math.floor(CW*CV/BZ+0.5);},NeedAdjustedLinePath:function Bl(){var CV=this.mImageFormat;return this.mIsLineWidthOdd&&(CV!==d.PDF);},SetGraphSize:function AY(CW,CV){if(CW>0&&CV>0){this.mGraphWidth=CW;this.mGraphHeight=CV;if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}}},GetGraphType:function A5(){return this.mGraphType;},dialogSizeToPixelSize:function x(CV){return CV*Math.min(this.mGraphWidth,this.mGraphHeight)/2000;},DrawPolygon:function Bx(CX,Ca,CY,CZ,CW){if(this.mImageFormat===d.SVG){return ;}if((Ca===undefined)||(Ca===null)){Ca=true;}CY=CY||false;CZ=CZ||null;CW=CW||Ba.LS_SOLID;if(CX.length<3){return ;}this.NewPath();if(Ca&&this.NeedAdjustedLinePath()){var CV=this.hAdjustLinePath(CX);this.DrawPolyLine(CV,false,CY,CZ,CW);}else{this.DrawPolyLine(CX,false,CY,CZ,CW);}this.ClosePath();},DrawStraightLine:function Ab(CX,CV){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(this.NeedAdjustedLinePath()){var CW=0,CY=0;if(CX.x===CV.x){CW=0.5;}if(CX.y===CV.y){CY=0.5;}this.hMoveTo(CX.x+CW,CX.y+CY,true);this.hLineTo(CV.x+CW,CV.y+CY,true);}else{this.hMoveTo(CX.x,CX.y,true);this.hLineTo(CV.x,CV.y,true);}},DrawPolyLine:function AR(Cc,Cb,CY,CV,Ca){if(this.mImageFormat===d.SVG){return ;}if((Cb===undefined)||(Cb===null)){Cb=true;}CY=CY||false;CV=CV||null;Ca=Ca||Ba.LS_SOLID;if(Ca===Ba.LS_GRADIENT){Ca=Ba.LS_SOLID;}var Cd=Cc.length,CZ,CW,Ce;if(Cd<=0){return ;}var CX;if(this.NeedAdjustedLinePath()){CX=this.hAdjustLinePath(Cc);}Cd=CX.length;this.NewPath();this.hMoveTo(CX[0].x,CX[0].y,Cb,CY,CV);CW=0;for(CZ=1;CZ<Cd;++CZ){if(Ca===Ba.LS_SOLID){this.hLineTo(CX[CZ].x,CX[CZ].y,Cb,CY,CV);}else{Ce=CG.gLinePatterns[Ca];this.DrawDashedLine(CX[CW],CX[CZ],Ce);}CW=CZ;}},DrawDashedLine:function CI(CX,Ce,Cc){if(this.mImageFormat===d.SVG){return ;}var CY,Cf,Cd,CZ,Cg,CV=0,Ca=0,Cb,CW;CY=Math.sqrt((CX.x-Ce.x)*(CX.x-Ce.x)+(CX.y-Ce.y)*(CX.y-Ce.y));Cf=(Ce.x-CX.x)/CY;Cd=(Ce.y-CX.y)/CY;Cb=Cc.length;CZ=CX.x;Cg=CX.y;while(CV<CY){CW=Math.min(Cc[Ca%Cb],CY-CV);++Ca;CV+=CW;if(Ca%2===1){this.MoveTo(CZ,Cg);}CZ+=CW*Cf;Cg+=CW*Cd;if(Ca%2===1){this.LineTo(CZ,Cg);}}},isParetoChart:function BL(){return this.mGraphType===Bg.DssGraphTypePareto||this.mGraphType===Bg.DssGraphTypePareto_Percent;},isCombinationChart:function S(){var CV=this.GetGraphMatrixContext();return this.mIsGraphMatrix&&CV.isCombinationChart();},hasBarAreaInComb:function A1(){if(this.isCombinationChart()===false){return false;}var CV=this.mDatasetPtr.GetSeriesByShape();return CV.Bar.length>0||CV.Area.length>0;},getFontScale:function Af(){if(this.mAbsoluteFontLineSize){return this.mFontScaleRatio;}return 1;},vdRect:function t(CV){return(new CG.Rect2D({x:this.vdWidth(CV.x),y:this.vdHeight(CV.y),width:this.vdWidth(CV.width),height:this.vdHeight(CV.height)}));},vdPoint:function CH(CV){return(new CG.Point2D({x:this.vdWidth(CV.x),y:this.vdHeight(CV.y)}));},vdFontSize:function B4(CV){var CX=CV;if(this.mIsGraphMatrix){return CX;}if(!this.mAbsoluteFontLineSize){CX=this.vdHeight(CX);}if(!this.mIsTimeSeriesChart){CX=this.PtSizeToPixelSize(CX);CX*=this.getFontScale();if(this.mIsGraphMatrix){var CW=this.mDataset.GetZoomScale();CX=CX*CW+0.5;}if(CX===0){CX=1;}}return CX;},vdLineWidth:function A8(CW){var CV=CW;if(!this.mAbsoluteFontLineSize){CV=this.vdHeight(CV);}CV=this.PtSizeToPixelSize(CV);CV=Math.floor(CV/100+0.5);return CV;},TDGToMSTRPoint:function BM(CX,CW){var CV,CY;CV=Math.floor((CX-Ad)*this.mGraphWidth/(J-Ad)+0.5);CY=Math.floor((AA-CW)*this.mGraphHeight/(AA-BU)+0.5);return(new CG.Point2D({x:CV,y:CY}));},setCanvas:function AV(CV){this.mCanvas=CV;},saveState:function Bc(){this.mCanvas.saveState();},Rotate:function CE(CV,CW){this.mCanvas.Rotate(CV,CW);},Scale:function BW(CV,CW){this.mCanvas.Scale(CV,CW);},RestoreState:function W(){this.mCanvas.RestoreState();},Clip:function Bo(){this.mCanvas.Clip();},DrawRectangle:function N(CV,CW){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(CW&&this.NeedAdjustedLinePath()){this.mCanvas.AddRect(CV.x+0.5,CV.y+0.5,CV.width,CV.height);}else{this.mCanvas.AddRect(CV.x,CV.y,CV.width,CV.height);}},FinishTextBoundingBox:function L(CW,CV,CY){var CX=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){this.mCanvas.CreateSVGTextBoundingBox(CW,CV,CY,CX);}},FinishDrawCircle:function A6(CW,CX){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CV=this.hGetIdentity(CX.mSeriesId,CX.mGroupId);this.mCanvas.CreateSVGCircle(CW.x,CW.y,CW.r,CV);}},FinishDrawRect:function Aq(CW,CX){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CV;if(CX.mObjectId===Bj.DssGraphDataMarker){CV=this.hGetIdentityEx(CX.mSeriesId,CX.mGroupId,"marker");}else{CV=this.hGetIdentity(CX.mSeriesId,CX.mGroupId);}if(this.NeedAdjustedLinePath()){CW.x=parseInt(CW.x)===CW.x?CW.x+0.5:CW.x;CW.y=parseInt(CW.y)===CW.y?CW.y+0.5:CW.y;}this.mCanvas.CreateSVGRect(CW.x,CW.y,CW.width,CW.height,CV);}},FinishDrawPieSlice:function B6(CW,Ca,CV,CZ,Cc,Cb,CY){var CX;if(Cb===undefined){Cb=false;}if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Cc.angleByIndex!==undefined){CX=this.hGetPieIdentity(Cc.mSeriesId,Cc.mGroupId,Cc.angleByIndex,Cc.sliceById);}else{CX=this.hGetIdentity(Cc.mSeriesId,Cc.mGroupId);}if(Cb){this.mCanvas.CreateSVGCircle(CW.x,CW.y,Ca,CX,CY,this.mThemeType===BC._white);}else{this.mCanvas.CreateSVGSector(CW.x,CW.y,Ca,CV,CZ,CX,CY,this.mThemeType===BC._white);}}},FinishDrawRingPieSlice:function s(CW,Ca,CZ,CV,CY,Cb){var CX;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Cb.angleByIndex!==undefined){CX=this.hGetPieIdentity(Cb.mSeriesId,Cb.mGroupId,Cb.angleByIndex,Cb.sliceById);}else{CX=this.hGetIdentity(Cb.mSeriesId,Cb.mGroupId);}this.mCanvas.CreateSVGRingSector(CW.x,CW.y,Ca,CZ,CV,CY,CX);}},FinishDrawRing:function BG(Ca,CZ,CV,CW,CX){CX=CX||false;var CY;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(CX){CY=this.hGetPieIdentity(CW.mSeriesId,CW.mGroupId,CW.angleByIndex,CW.sliceById);}else{CY=this.hGetIdentity(CW.mSeriesId,CW.mGroupId);}this.mCanvas.CreateSVGRing(Ca.x,Ca.y,CZ,CV,CY);}},FinishDrawPolyline:function CR(Cj,CW,Cf,Cd,CX,Cg,CZ){var Cb=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){Cf=Cf||false;var Ci=0,Cc=1,Cl=2,Ch=3,Ca=4,Ck,Ce=CW.mObjectId,CY=this.mCanvas;var CV=Cj;if(this.NeedAdjustedLinePath()){CV=this.hAdjustLinePath(Cj);}switch(Ce){case Bj.DssGraphUserLine1:case Bj.DssGraphUserLine2:case Bj.DssGraphUserLine3:case Bj.DssGraphUserLine4:Cd=this.hGetIdentityEx(Ce-Bj.DssGraphUserLine1,0,"originLine");if(Cd){Ck=[Cd];}else{Ck=[];}CY.CreateSVGPolyLine(CW.mSeriesId,CV,Ck,Ca);break;case Bj.DssGraphO1Major:case Bj.DssGraphO2Major:case Bj.DssGraphY1Major:case Bj.DssGraphY2Major:case Bj.DssGraphX1Major:case Bj.DssGraphX2Major:case Bj.DssGraphO1Minor:case Bj.DssGraphO2Minor:case Bj.DssGraphY1Minor:case Bj.DssGraphY2Minor:case Bj.DssGraphX1Minor:case Bj.DssGraphX2Minor:Ck=[];CY.CreateSVGPolyLine(CW.mSeriesId,CV,Ck,Cl);break;case Bj.DssGraphO1Body:case Bj.DssGraphO2Body:case Bj.DssGraphX1Body:case Bj.DssGraphX2Body:case Bj.DssGraphY1Body:case Bj.DssGraphY2Body:Ck=[];CY.CreateSVGPolyLine(CW.mSeriesId,CV,Ck,Ch);break;case Bj.DssGraphTrendLine:CY.CreateSVGPolyLineForTRLine(Cj,Cb,Cd,true,CX,Cg,CZ);break;default:if(Cf){Ck=[];CY.CreateSVGPolyLine(CW.mSeriesId,CV,Ck,Ci);}else{Ck=this.hGetIdentities(CW.mSeriesId,CW.mGroupId,Cj.length);CY.CreateSVGPolylineWithCircles(CW.mSeriesId,CV,Ck);}break;}}},FinishDrawTickerShape:function By(CZ,CX,Ca){var CY=[CZ,CX],CV=this.mCanvas;if(CV instanceof mstrmojo.chart.SVGCanvas){var CW=this.hGetIdentities(Ca.mSeriesId,Ca.mGroupId,1);CV.CreateSVGPolyLine(Ca.mSeriesId,CY,CW,5);}},FinishDrawStraightLine:function X(CW,Cb,CV,CZ,Ca){var CY=this.mDataset.GetSeriesCount(),Cc=[CW],CX=this.mCanvas;Cc.push(Cb);if(this.NeedAdjustedLinePath()){Cc=this.hAdjustLinePath(Cc);}if(CX instanceof mstrmojo.chart.SVGCanvas){if(CZ){if(CV.mObjectId===Bj.DssGraphTrendLine){CX.CreateSVGPolyLineForTRLine(Cc,CY,CZ,true,CW,Ca,Cb);}else{if(CV.mObjectId===Bj.DssGraphReferenceLine){CX.CreateSVGPolyLineForTRLine(Cc,CY,CZ,false,CW,Ca,Cb);}}}else{switch(CV.mObjectId){case Bj.DssGraphO1Body:case Bj.DssGraphO2Body:case Bj.DssGraphX1Body:case Bj.DssGraphX2Body:case Bj.DssGraphY1Body:case Bj.DssGraphY2Body:var Cd=[];CX.CreateSVGPolyLine(CV.mSeriesId,Cc,Cd);return ;}Cd=this.hGetIdentities(CV.mSeriesId,CV.mGroupId,1);Cd.push(Cd[0]);CX.CreateSVGPolylineWithCircles(CV.mSeriesId,Cc,Cd);}}},FinishDrawPolygon:function Ao(Ca,Cb,CZ){var CW,CX=this.mCanvas,CY=Ca.length;if(CY<3){return ;}if(CX instanceof mstrmojo.chart.SVGCanvas){var CV=Ca;if(this.NeedAdjustedLinePath()){CV=this.hAdjustLinePath(Ca);}switch(Cb){case C.NORMAL:CW=this.hGetIdentity(CZ.mSeriesId,CZ.mGroupId);CX.CreateSVGPolygon(CZ.mSeriesId,CV,CW);break;case C.TOOLTIP_UPPER:if((CY&1)!==0){return ;}CW=this.hGetIdentities(CZ.mSeriesId,CZ.mGroupId,CY/2);CX.CreateSVGPolygonWithCircles(CZ.mSeriesId,CV,CW);break;case C.TOOLTIP_U2L:if((CY&1)!==0){return ;}CW=this.hGetIdentities(CZ.mSeriesId,CZ.mGroupId,CY/2);CX.CreateSVGPolygonWithRects(CZ.mSeriesId,CV,CW);break;case C.TOOLTIP_TRAPEZOID:if((CY&1)!==0){return ;}CW=this.hGetIdentities(CZ.mSeriesId,CZ.mGroupId,CY/2);CX.CreateSVGPolygonWithTrapezoid(CZ.mSeriesId,CV,CW);break;default:CX.CreateSVGPolygon(CZ.mSeriesId,CV);break;}}},allowOverlapBetweenDatalabels:function(){var CV=this.mDataset;return CV&&CV.allowDatalabelOverlap();},hGetLabelIdentity:function A7(CY){var CV={identity:null,type:"data-label"};switch(CY.mObjectId){case Bj.DssGraph2DO1Label:case Bj.DssGraph2DO2Label:case Bj.DssGraphY1Label:case Bj.DssGraphY2Label:case Bj.DssGraphX2Label:case Bj.DssGraphX1Label:CV.type="axis-text";break;case Bj.DssGraphUserLabel1:case Bj.DssGraphUserLabel2:case Bj.DssGraphUserLabel3:case Bj.DssGraphUserLabel4:var CX=CY.mObjectId-Bj.DssGraphUserLabel1;CV.identity=this.hGetIdentityEx(CX,0,"origin-label");CV.type=CX<=1?Aj.GM_ORIGIN_LABEL_H:Aj.GM_ORIGIN_LABEL_V;break;case Bj.DssGraphRefLineText:CV.type="ref-label";break;case Bj.DssGraphTrendLineText:CV.type="trend-label";break;default:var CW=null;if(CY.mSeriesId>=0&&CY.mGroupId>=0){if(CY.angleByIndex!==undefined){CW=this.hGetPieIdentityEx(CY.mSeriesId,CY.mGroupId,CY.angleByIndex,CY.sliceById,"data-label");}else{CW=this.hGetIdentityEx(CY.mSeriesId,CY.mGroupId,"data-label");}}CV.identity=CW;break;}return CV;},FinishDrawText:function l(CZ,CY){var CW=this.mCanvas;if(CW instanceof mstrmojo.chart.SVGCanvas){switch(CZ.mObjectId){case Bj.DssGraph2DO1Label:case Bj.DssGraph2DO2Label:case Bj.DssGraphY1Label:case Bj.DssGraphY2Label:case Bj.DssGraphX2Label:case Bj.DssGraphX1Label:CW.CreateSVGAxisText(CZ.mSeriesId,CY.Tooltip,CY.Identities);break;case Bk.DssGraphBanner:if(!CY.Identities){CY.Identities=this.hGetIdentities(CZ.mSeriesId,CZ.mGroupId,1);}CW.CreateSVGBannerText(CZ.mSeriesId,CY.Identities);break;default:var CV=this.hGetLabelIdentity(CZ);var CX=this.mDataset.GetSeriesCount();if(CV.type==="ref-label"){CV.identity=CY.Identity;}CW.CreateSVGGenericText(CX,CV.identity,CV.type);break;}}},FinishDrawCurves:function G(Ce,Cb,Ca,CV,Cc,CX){var CY=this.mDataset.GetSeriesCount(),Cd=Cb.mSeriesId,CW=this.mCanvas,CZ;if(CW instanceof mstrmojo.chart.SVGCanvas){CW.CreateSVGCurves(Ce,CY,Cd,Ca,Cb.mObjectId===Bj.DssGraphTrendLine,CV,Cc,CX);}},hGetIdentities:function BT(CY,CZ,Ca){var CX=[],CW;for(CW=0;CW<Ca;++CW){var CV=this.hGetIdentity(CY,CZ+CW);CX.push(CV);}return CX;},hGetPieIdentity:function Ax(CY,CW,CV,CX){if(CY<0){CY=0;}if(CW<0){CW=0;}if(CV===undefined||CV<0){CV=0;}if(CX===undefined||CX<0){CX=0;}return this.mDataset.dataProvider.getGraphCell(CY,CW).getSliceIdentity(CV,CX);},hGetIdentity:function AJ(CV,CW){if(CV<0){CV=0;}if(CW<0){CW=0;}return this.mDataset.dataProvider.getGraphCell(CV,CW).getIdentity();},hGetIdentityEx:function P(CY,Ca,CX){CX=CX||"generic";if(CY<0){CY=0;}if(Ca<0){Ca=0;}var CW=this.mDataset.dataProvider;switch(CX){case"data-label":return CW.getGraphCell(CY,Ca).getDataLabelIdentity();case"marker":return CW.getGraphCell(CY,Ca).getMarkerIdentity();case"originLine":case"origin-label":var CZ=["y1","y2","x1","x2"],CV=CZ[CY]||"y1";if(CX==="originLine"){return CW.getAxisOriginLineIdentity(CV);}return CW.getAxisOriginLabelIdentity(CV);default:return this.hGetIdentity(CY,Ca);}},hGetPieIdentityEx:function CD(Cc,CW,CV,CZ,CX){if(Cc<0){Cc=0;}if(CW<0){CW=0;}if(CV===undefined||CV<0){CV=0;}if(CZ===undefined||CZ<0){CZ=0;}var Ca=this.mDataset;switch(CX){case"data-label":var CY=Ca.dataProvider.getGraphCell(Cc,CW);if(!!CY){if(CY.isFaked){CY=Ca.dataProvider.innerGetGraphCell(Cc,CW);}var Cb=CY.getSinglePieDPs();if(!!Cb){return Cb[CV].getDataLabelIdentity(CZ,true);}}break;default:return this.hGetPieIdentity(Cc,CW,CV,CZ);}},getIdentity:function At(CX,Ca,Ce){Ce=Ce||"shape";var Cc=[],Cd;if(Ca==="pie"){var CZ=this.mDataset,CV=0,CW=0,Cb,CY;if(CZ){CV=CZ.GetPieCountAtOneDataPoint(CX.mSeriesId,CX.mGroupId);CW=CZ.GetPieSliceCount(CX.mSeriesId,CX.mGroupId);}for(Cb=0;Cb<CV;Cb++){for(CY=0;CY<CW;CY++){Cd=this.hGetPieIdentityEx(CX.mSeriesId,CX.mGroupId,Cb,CY,Ce);Cc.push(Cd);}}}else{Cd=this.hGetIdentityEx(CX.mSeriesId,CX.mGroupId,Ce);Cc.push(Cd);}return Cc;},hAdjustLinePath:function AT(CX){var CZ=CX.length,Ca,CW,CY;var CV=Ag.cloneArray(CX);Ca=CZ-1;for(CY=0;CY<CZ;++CY){CW=(CY+1===CZ)?0:CY+1;if(CX[CY].x===CX[Ca].x||CX[CY].x===CX[CW].x){CV[CY].x+=0.5;}if(CX[CY].y===CX[Ca].y||CX[CY].y===CX[CW].y){CV[CY].y+=0.5;}Ca=CY;}return CV;},NewPath:function D(){this.mCanvas.NewPath();},ClosePath:function AB(){this.mCanvas.ClosePath();},SetFontAntiAlias:function CF(CV){this.mIsFontAntiAlias=CV;},SaveSurfaceToObject:function Aw(CV){return this.mCanvas.SaveToObject(CV);},CalculateDepthOffset:function Ac(CY,CW,Cd){var CZ=0,CX=Math.cos(k.DegreeToRadian(CW)),Ce=Math.sin(k.DegreeToRadian(CW)),Cc,Cb,Ca,CV;if(Cd===undefined){Cd=false;}if(Cd){CZ=1/Math.sqrt(Math.pow(this.mGraphWidth*CX,2)+Math.pow(this.mGraphHeight*Ce,2));}else{CZ=Ar/AE;}Ca=this.mGraphWidth*CZ*CY;CV=this.mGraphHeight*CZ*CY;Cc=Math.floor(Ca*CX+0.5);Cb=-Math.floor(CV*Ce+0.5);return{OffsetX:Cc,OffsetY:Cb};},hApplyEnhancedSeriesEffect:function O(CW,CX){if(this.mIsGraphMatrix){return ;}var CV=CW.EnhancedSeriesEffect,CY,Ca;switch(this.mGraphType){case Bg.DssGraphTypePies:case Bg.DssGraphTypeMultiple_Pies:case Bg.DssGraphTypeMultiple_Proportional:case Bg.DssGraphTypeX_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeX_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Bg.DssGraphTypeBubble:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeBubble_With_Labels:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,270,10);break;case Bg.DssGraphTypeRing_Pie:case Bg.DssGraphTypeMultiple_Ring_Pies:case Bg.DssGraphTypeMultiple_Proportional_Ring_Pies:CV.call(CW,204,Z.DssGraphFillBevelDonut,50,0,30);break;default:var CZ=Bs.EnumCollectionType;switch(CX){case CZ.CT_VERTICAL_AREA:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,270,20);break;case CZ.CT_VERTICAL_BAR:Ca=204;CY=this.GetProperty(Bi.DssGraphDepthMode,CC);if(this.isVerticalBar()&&CY){Ca=255;}CV.call(CW,Ca,Z.DssGraphFillBevelDonut,50,0,30);break;case CZ.CT_HORIZONTAL_AREA:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,180,20);break;case CZ.CT_HORIZONTAL_BAR:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,270,30);break;case CZ.CT_DEPTH_LINE_OR_LINE_MARKER:CV.call(CW,204,Z.DssGraphFillBevelSphere,0,270,10);break;default:break;}break;}},GetLocation:function u(CW){var CY,CX,CV;CY=this.GetProperty(CW,CC);if(CY===null||CY===undefined){return ;}CX=this.TDGToMSTRPoint(CY.Left,CY.Top);CV=this.TDGToMSTRPoint(CY.Right,CY.Bottom);return new CG.Rect2D({x:CX.x,y:CX.y,width:CV.x-CX.x,height:CV.y-CX.y});},GetLocationRect:function CJ(CX){var CW,CV;CW=this.GetLocation(CX);if(CW){CV=new CG.Rect2D({x:CW.Left,y:CW.Top,width:CW.Right-CW.Left,height:CW.Bottom-CW.Top});}return CV;},PutLocation:function Ay(CV,CW){},GetProperty:function CM(CV,CW){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CV,this.MapObject(CW.mObjectId),CW.mSeriesId]);},GetLocalProperty:function BF(CV,CW){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CV,this.MapObject(CW.mObjectId),CW.mSeriesId]);},PutProperty:function n(CV,CW,CX){if(this.mPropertyMap===null){this.mPropertyMap=new CG.common.MapStructure();}this.mPropertyMap.push([CV,this.MapObject(CW.mObjectId),CW.mSeriesId],CX);if(CV===Bi.DssGraphType){this.mGraphType=CX;}},normalDirection:function BJ(CY,CX){var Ca=this.CalculateDepthOffset(1000,CX),CW=Ca.OffsetX,Cb=Ca.OffsetY,CV=new CG.Vector2D({x:CW,y:Cb}),CZ=CV.CrossProduct(CY);if(CZ===0){return 0;}return CZ>0?1:-1;},IsVertical:function e(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_Absolute:case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeVertical_Bar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeVertical_Line_Absolute:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeVertical_Bar_Absolute:case Bg.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeVertical_CategoryPies_Absolute:case Bg.DssGraphTypeVertical_CategoryPies_Percent:case Bg.DssGraphTypeVertical_CategoryPies_Stacked:case Bg.DssGraphTypeGrid_Pies:case Bg.DssGraphTypeScatter_Pies:case Bg.DssGraphTypeBubble_Pies:return true;}switch(this.GetGraphMajorType()){case g.GMT_BUBBLE:case g.GMT_SCATTER:case g.GMT_STOCK:return true;}return false;},IsDualAxis:function y(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_Polar_Coordinate_Chart:case Bg.DssGraphTypeDualAxis_Radar_Line:case Bg.DssGraphTypeDualAxis_Radar_Stacked_Area:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeHiLo_DualAxis_Stock_Chart:case Bg.DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:case Bg.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:case Bg.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bi.DssGraphRadar_DualAxis_Radar_Stacked_Line:case Bi.DssGraphRadar_DualAxis_Radar_Area:case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}},IsStackedChart:function BN(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeRadar_Stacked_Area:case Bg.DssGraphTypeDualAxis_Radar_Stacked_Area:case Bg.DssGraphTypeRadar_Area_Stacked:case Bi.DssGraphRadar_Line_Stacked:case Bi.DssGraphRadar_DualAxis_Radar_Stacked_Line:return true;default:return false;}},IsPieChart:function Y(){if(this.mIsGraphMatrix){switch(this.GetGraphMatrixContext().mGraphType){case Bg.DssGraphTypeVertical_CategoryPies_Absolute:case Bg.DssGraphTypeVertical_CategoryPies_Percent:case Bg.DssGraphTypeVertical_CategoryPies_Stacked:case Bg.DssGraphTypeHorizontal_CategoryPies_Absolute:case Bg.DssGraphTypeHorizontal_CategoryPies_Percent:case Bg.DssGraphTypeHorizontal_CategoryPies_Stacked:case Bg.DssGraphTypeGrid_Pies:case Bg.DssGraphTypeScatter_Pies:case Bg.DssGraphTypeBubble_Pies:return true;default:return false;}}else{return this.GetGraphMajorType()===g.GMT_PIE;}},MapObject:function Bf(CV){if(CV===Bi.DssGraphPieSlice){return Bi.DssGraphRiser;}return CV;},SplitRect:function BR(CZ,CV,CX,Cb,Ca){var CY,CW;if(CV){CY=CZ.height*CX/100;Cb.Reset(CZ.x,CZ.y,CZ.width,CZ.height-CY);Ca.Reset(CZ.x,CZ.y+Cb.height,CZ.width,CY);}else{CW=CZ.width*CX/100;Cb.Reset(CZ.x+CW,CZ.y,CZ.width-CW,CZ.height);Ca.Reset(CZ.x,CZ.y,CW,CZ.height);}},getAxisAutoNumberFormat:function AL(Cc,CZ,Cb){Cb=Cb||false;var CW=this.mDataset,CY;if(CZ&&CZ.length){var CV=this.mSelectedAxisAutoNumberFormat;if(CV.Format!==null){var Ca=true,CX=CV.Array;if(CX&&CX.length===CZ.length){for(CY=0;CY<CX.length;CX++){if(CX[CY]!==CZ[CY]){Ca=false;break;}}}if(Ca){Cc.reset(CV.Format);return ;}}CW.getValueAxisNumberFormat(Cc,CZ,Cb);CV.Array=CZ.slice(0);CV.Format=new CG.ChartAdvFormat({ChartAdvFormat:Cc});}else{var Cd=this.mAxisAutoNumberFormat;if(Cd!==null){Cc.reset(Cd);}else{CW.getValueAxisNumberFormat(Cc);this.mAxisAutoNumberFormat=new CG.ChartAdvFormat({ChartAdvFormat:Cc});}}},GetGraphMajorType:function V(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_Absolute:case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeHorizontal_Area_Absolute:case Bg.DssGraphTypeHorizontal_Area_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_Percent:case Bg.DssGraphTypeVertical_Bar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeHorizontal_Bar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_Percent:case Bg.DssGraphTypeVertical_Line_Absolute:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeHorizontal_Line_Absolute:case Bg.DssGraphTypeHorizontal_Line_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_Percent:case Bg.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeHorizontal_Bullet:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_CategoryPies_Absolute:case Bg.DssGraphTypeHorizontal_CategoryPies_Stacked:case Bg.DssGraphTypeHorizontal_CategoryPies_Percent:case Bg.DssGraphTypeVertical_CategoryPies_Absolute:case Bg.DssGraphTypeVertical_CategoryPies_Stacked:case Bg.DssGraphTypeVertical_CategoryPies_Percent:return g.GMT_CATEGORY;case Bg.DssGraphTypePies:case Bg.DssGraphTypeRing_Pie:case Bg.DssGraphTypeMultiple_Pies:case Bg.DssGraphTypeMultiple_Ring_Pies:case Bg.DssGraphTypeMultiple_Proportional:case Bg.DssGraphTypeMultiple_Proportional_Ring_Pies:case Bg.DssGraphTypePie_Bar:case Bg.DssGraphTypeRing_Pie_Bar:return g.GMT_PIE;case Bg.DssGraphTypeScatter_Pies:case Bg.DssGraphTypeX_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeX_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return g.GMT_SCATTER;case Bg.DssGraphTypeBubble_Pies:case Bg.DssGraphTypeBubble:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeBubble_With_Labels:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:return g.GMT_BUBBLE;case Bg.DssGraphTypeVertical_Bar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_Absolute:return g.GMT_CATEGORY;case Bg.DssGraphTypeGrid_Pies:case Bg.DssGraphTypeGridChart:return g.GMT_GRID;case Bg.DssGraphTypeMaxDeskTopGraphTypes:return g.GMT_INVALID;default:return g.GMT_INVALID;}},isLegendByGroup:function CT(){return false;},isVerticalBar:function Bm(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Bullet:return true;default:return false;}},MoveTo:function BA(CV,CY,CW,CX){this.mCanvas.MoveTo(CV,CY,CW,CX);},BezierCurveTo:function Bp(CX,CW,Ca,CY,CV,CZ){this.mCanvas.BezierCurveTo(CX,CW,Ca,CY,CV,CZ);},LineTo:function AC(CV,CY,CW,CX){this.mCanvas.LineTo(CV,CY,CW,CX);},hMoveTo:function o(CV,Ca,CW,CX,CZ){var CY;CY=(CW&&this.NeedAdjustedLinePath())?0.5:0;this.MoveTo(CV+CY,Ca+CY,CX,CZ);},hLineTo:function CK(CV,Ca,CW,CX,CZ){var CY;CY=(CW&&this.NeedAdjustedLinePath())?0.5:0;this.LineTo(CV+CY,Ca+CY,CX,CZ);},SetRGBAFill:function Bd(CW,CX,CV,CY){this.mCanvas.SetRGBAFillColor(CW,CX,CV,CY);},SetRGBAStroke:function CO(CW,CX,CV,CY){this.mCanvas.SetRGBAStrokeColor(CW,CX,CV,CY);},FillPath:function AS(){this.mCanvas.FillPath();},StrokePath:function j(){this.mCanvas.StrokePath();},SetLineDash:function AO(CV,CW){this.mCanvas.SetLineDash(CV,CW);},SetLineWidth:function B5(CV){this.mCanvas.SetLineWidth(CV);},SetFormatManager:function f(CW){var CV;this.mFormatManager=CW;CV=this.mFormatManager.GetFormat(Bi.DssGraphType);this.mGraphType=CV+1;this.mFormatManager.SetGraphType(this.mGraphType);this.mIsFontAntiAlias=true;},SetFontSize:function B3(CV){this.mCanvas.SetFontSize(CV);},PtSizeToPixelSize:function r(CV){return Math.floor(CV*BQ/T+0.5);},IsReverseSeriesOrder:function A2(CY,CW,CV){var CX;if(CY===null){return false;}CX=CY.IsReverseOrder();if((CW&&CV>=180&&CV<360)||(!CW&&CV>=90&&CV<270)){CX=!CX;}return CX;},IsReverseGroupOrder:function BE(CW,CV){return((CW&&CV>=90&&CV<270)||(!CW&&CV>=0&&CV<180));},GetPointByAngleRadiusCenter:function Bh(CV,CX,CW){return new CG.Point2D({x:Math.floor(CW.x+CX*Math.cos(CV)+0.5),y:Math.floor(CW.y-CX*Math.sin(CV)+0.5)});},RectangleIntersection:function E(Cb,Ca,CZ){var CY,CW,CV,CX;if((Cb.x>(Ca.x+Ca.width))||(Ca.x>(Cb.x+Cb.width))||(Cb.y>(Ca.y+Ca.height))||(Ca.y>(Cb.y+Cb.height))){return false;}CY=Math.max(Cb.x,Ca.x);CW=Math.max(Cb.y,Ca.y);CV=Math.min(Cb.x+Cb.width,Ca.x+Ca.width)-CY;CX=Math.min(Cb.y+Cb.height,Ca.y+Ca.height)-CW;CZ.Reset(CY,CW,CV,CX);return true;},RectangleUnion:function Ap(Cb,Ca,CZ){var CY,CW,CV,CX;CY=Math.min(Cb.x,Ca.x);CW=Math.min(Cb.y,Ca.y);CV=Math.max(Cb.x+Cb.width,Ca.x+Ca.width)-CY;CX=Math.max(Cb.y+Cb.height,Ca.y+Ca.height)-CW;CZ.Reset(CY,CW,CV,CX);},getUniformAxisLabelRotateMode:function(CX){var CW=CX,CV=this.getUniformAxisContext();switch(CX){case"x":case"X":CW="X1";break;case"y":case"Y":CW="Y1";break;default:break;}return CV.mLabelRotation[CW];},getUniformAxisContext:function p(){if(this.mUniformAxisContext===null){this.mUniformAxisContext={mDataAreaLeftMargin:0,mDataAreaRightMargin:0,mDataAreaTopMargin:0,mDataAreaBottomMargin:0,mGraphHeight:400,mIsAxisTitleAndLabelRequired:true,mLabelRotation:{X1:-1,Y1:-1,X2:-1,Y2:-1},xDataLabelPadding:0,yDataLabelPadding:0,ValueAxis:{X1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},X2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Z:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false}},CategoryAxis:{X:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]},Y:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]}}};}return this.mUniformAxisContext;},isUADataAreaOutput:function Bt(){if(this.mIsUniformAxisMode){var CV=this.getUniformAxisContext();if(!CV.mIsAxisTitleAndLabelRequired){return true;}}return false;},IsBackgroundBright:function AK(){var Ci,Cf,Cj,Cg,CW,Ca,Cd,CV,CY,Ch,CX,Cb,CZ,Ce,Cc;CZ=new CG.TripleId({ObjectId:Bi.DssGraphFrame,SeriesId:AZ,GroupId:M});Ce=this.hGetColorById(CZ);Ci=Ce.Alpha;Cg=Ce.R;CW=Ce.G;Ca=Ce.B;CZ.reset(Bi.DssGraphBackground,AZ,M);Ce=this.hGetColorById(CZ);Cf=Ce.Alpha;Cd=Ce.R;CV=Ce.G;CY=Ce.B;Cj=1-(1-Ci)*(1-Cf);if(Cj>0.5){Ch=Cd*Cf*(1-Ci)+Cg*Ci;CX=CV*Cf*(1-Ci)+CW*Ci;Cb=CY*Cf*(1-Ci)+Ca*Ci;}Cc=(Ch*299+CX*587+Cb*114)/1000;return Cc>150;},hGetColorById:function CL(CZ){var Cd,Cc,CW=1,CV=255,CX=255,Ca=255,Cb;Cb=this.GetProperty(Bi.DssGraphAreaAlpha,CZ);if(Cb){CW=Cb/255;}Cb=this.GetProperty(Bi.DssGraphFillEffect,CZ);if(Cb){switch(Cb){case B1.DssGraphFillSimple:Cb=this.GetProperty(Bi.DssGraphAreaColor,CZ);if(Cb){var CY=k.GetColorParser();CY.ResetFromColorValue(Cb,true);CV=CY.mR;CX=CY.mG;Ca=CY.mB;}break;case B1.DssGraphFillAdvancedWash:Cb=this.GetProperty(Bi.DssGraphGradient,CZ);if(Cb){Cd=Cb.StartColor;Cc=Cb.EndColor;CV=(Cd.mR+Cc.mR)/2;CX=(Cd.mG+Cc.mG)/2;Ca=(Cd.mB+Cc.mB)/2;}break;default:break;}}return{R:CV,G:CX,B:Ca,Alpha:CW};},FillSimple:function BI(CX,CY,CW,CV){this.mCanvas.FillSimple(CX,CY,CW,CV);},FillPattern:function q(CV){this.mCanvas.FillPattern(CV);},FillGradient:function A0(CW,CV,CX){this.mCanvas.FillGradient(CW,CV,CX);},FillEdgeType:function BO(CW,CV){this.mCanvas.FillEdgeType(CW,CV);},FillDonutOrSphere:function AP(CX,CV,CW){this.mCanvas.FillDonutOrSphere(CX,CV,CW);},FillBorderMetallic:function b(CX,CV,CZ,CY,Ca,CW){this.mCanvas.FillBorderMetallic(CX,CV,CZ,CY,Ca,CW);},FillRadientGradient:function An(CW,Cc,Ca,CZ,Cd,CV,CX,Cb,CY){this.mCanvas.FillRadientGradient(CW,Cc,Ca,CZ,Cd,CV,CX,Cb,CY);},MakeDarker:function U(CW,CV){this.mCanvas.MakeDarker(CW,CV);},RestoreColor:function AM(CV){this.mCanvas.RestoreColor(CV);},ApplyLineFormat:function Br(CV){this.mCanvas.ApplyLineFormat(CV);},AddFormatedText:function Bb(CW,CY,CV,CX){this.mCanvas.AddFormatedText(CW,CY,CV,CX);},BeginFirstFrame:function Aa(){this.mCanvas.BeginFirstFrame();},BeginLastFrame:function Bv(){this.mCanvas.BeginLastFrame();},EndFrame:function A9(){this.mCanvas.EndFrame();},EndUnit:function c(){this.mCanvas.EndUnit();},SetLineJoin:function AI(CV){this.mLineJoinType=CV;this.mCanvas.SetLineJoin(this.mLineJoinType);},GetLineJoin:function AU(){return this.mLineJoinType;},UpdateFormatLine:function Ak(CZ,CX,CW){CW=CW||false;if(this.mIsGraphMatrix){return ;}var CY;Am.tripleId.reset(AQ,CZ.mObjectId,CZ.mSeriesId,CZ.mGroupId);if(this.mIsGraphMatrix&&AQ.mObjectId===Bi.DssGraphX1Major){AQ.mObjectId=Bi.DssGraphY1Major;}if(CX.mLineColor===null||!CW){CY=this.GetProperty(Bi.DssGraphLineColor,AQ);if(CY){var CV=k.GetColorParser();CV.ResetFromColorValue(CY,true);CX.mLineColor=CV.ToInteger();}}if(CX.mLineStyle===null||!CW){CY=this.GetProperty(Bi.DssGraphLinePattern,AQ);if(CY){CX.mLineStyle=CY;}}if(CX.mAlpha===null||!CW){CY=this.GetProperty(Bi.DssGraphLineAlpha,AQ);if(CY){CX.mAlpha=CY;}}if(CX.mLineThicknessPt===null||!CW){CY=this.GetProperty(Bi.DssGraphLineWidth,AQ);if(CY){CX.mLineThicknessPt=CY;}}},UpdateFormatFill:function AH(Cc,CX,Ca,CZ){CZ=CZ||false;if(this.mIsGraphMatrix){return ;}var Cb;Am.tripleId.reset(AQ,Cc.mObjectId,Cc.mSeriesId,Cc.mGroupId);AQ.mObjectId=this.MapObject(Cc.mObjectId);if(CX.mAlpha===null||!CZ){Cb=this.GetProperty(Bi.DssGraphAreaAlpha,AQ);if(Cb!==null&&Cb!==undefined){CX.mAlpha=Cb;}}var CW;if(CX.mFillType===null||!CZ){Cb=this.GetProperty(Bi.DssGraphFillEffect,AQ);if(Cb!==null&&Cb!==undefined){CX.mFillType=Cb;}var CY=CX.mFillType;switch(CY){case B1.DssGraphFillSimple:Cb=this.GetProperty(Bi.DssGraphAreaColor,AQ);if(Cb!==null&&Cb!==undefined){if(CX.mSimpleColor===null||!CZ){CW=k.GetColorParser();CW.ResetFromColorValue(Cb,true);CX.mSimpleColor=CW.ToInteger();}}break;case B1.DssGraphFillAdvancedWash:var CV=CX.mFillGradient;Cb=this.GetProperty(Bi.DssGraphGradient,AQ);if(Cb!==null&&Cb!==undefined){if(CV===null||!CZ){if(CV===null){CX.mFillGradient={};}CV=CX.mFillGradient;Ag.copyProps(["gradientType","angle","horizontalOffset","verticalOffset"],Cb,CV);CW=k.GetColorParser();CW.ResetFromColorValue(Cb.StartColor,true);CV.startGraphColor=CW.ToInteger();CW.ResetFromColorValue(Cb.EndColor,true);CV.endGraphColor=CW.ToInteger();}}Cb=this.GetProperty(Bi.DssGraphGradientEndAlpha,AQ);if(Cb!==null&&Cb!==undefined){if(CV.endAlpha===null||!CZ){CV.endAlpha=Cb;}}else{CV.endAlpha=CX.mAlpha;}break;case B1.DssGraphFillPattern:break;default:break;}}},UpdateFormatFont:function K(CY,CW){var CX;if(this.mIsGraphMatrix){return ;}CX=this.GetProperty(Bi.DssGraphFontColor,CY);if(CX){var CV=k.GetColorParser();CV.ResetFromColorValue(CX,true);CW.mFontColor=CV.ToInteger();}CX=this.GetProperty(Bi.DssGraphFontName,CY);if(CX){CW.mFontName=CX;}CX=this.GetProperty(Bi.DssGraphFontSize100,CY);if(CX){CW.mFontSize=Math.floor(CX/100+0.5);}CX=this.GetProperty(Bi.DssGraphFontStyle,CY);if(CX){CW.mFontStyle=CX;}CX=this.GetProperty(Bi.DssGraphFontAlpha,CY);if(CX){CW.mFontAlpha=CX;}CX=this.GetProperty(Bi.DssGraphFontAlign,CY);if(CX){CW.mFontAlignment=CX;}CX=this.GetProperty(Bi.DssGraphFontRotation,CY);if(CX){CW.mFontRotation=CX;}CX=this.GetProperty(Bi.DssGraphFontBox,CY);if(CX){CW.mFontBox=CX;}},ParseValueToFormat:function w(Cb,CX){var CV=[],CY,Ca,CW,CZ=10;Ca=0;for(CY=0;CY<6;++CY){CW=Cb.indexOf(",",Ca);CV[CY]=Cb.substring(Ca,CW);Ca=CW+1;}CV[CY]=Cb.substring(Ca);if(CV[0].length){CX.mFormatType=parseInt(CV[0],CZ);}if(CV[1].length){CX.mDigits=parseInt(CV[1],CZ);}if(CV[2].length){CX.mGrouping=parseInt(CV[2],CZ);}if(CV[3].length){CX.mPosCurr=parseInt(CV[3],CZ);}if(CV[4].length){CX.mNegFormat=parseInt(CV[4],CZ);}if(CV[5].length){CX.mCurrency=CV[5];}if(CV[6].length){CX.mCustomFormat=CV[6];}},DrawSector:function Ae(CV,CY,CW,CX){this.NewPath();this.mCanvas.AddArc(CV.x,CV.y,CY,CW,CX,false);this.LineTo(CV.x,CV.y);this.ClosePath();},DrawRingSector:function Bz(CX,CW,CV,CY,CZ){this.NewPath();this.mCanvas.AddArc(CX.x,CX.y,CW,CY,CZ,false);this.LineTo(CX.x+CV*Math.cos(CZ),CX.y+CV*Math.sin(CZ));this.mCanvas.AddArc(CX.x,CX.y,CV,CZ,CY,true);this.ClosePath();},DrawCylinder:function AF(CW,CZ,CX,CY,CV){console.alert("to be impl");},ApplyBeveledFrameToRectangle:function F(CW,Ca,CV,CX,CZ,CY,Cb){this.mCanvas.ApplyBeveledFrameToRectangle(CW,Ca,CV,CX,CZ,CY,Cb);},drawArc:function B(CV,CZ,CX,CY,CW){if(CW===undefined){CW=true;}if(CW){this.NewPath();}this.mCanvas.AddArc(CV.x,CV.y,CZ,CX,CY,false);},GetGraphMatrixContext:function BY(){if(this.mpGraphMatrixContext===null){this.mpGraphMatrixContext=new CG.GraphMatrixContext({GraphType:this.mGraphType});if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}this.mpGraphMatrixContext.parentContext=this;}return this.mpGraphMatrixContext;},HideAxisElements:function BP(CV){this.mShouldHideAxisElements=CV;},IsHidingAxisElements:function B8(){return this.mShouldHideAxisElements;},IsPercentChart:function I(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeHorizontal_Bar_Percent:case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeHorizontal_Area_Percent:case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeHorizontal_Line_Percent:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;}return false;},IsGridChart:function BV(){return this.mGraphType===Bg.DssGraphTypeGridChart;},IsScatterChart:function Q(){switch(this.mGraphType){case Bg.DssGraphTypeX_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeX_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return true;}return false;},IsBubbleChart:function z(){switch(this.mGraphType){case Bg.DssGraphTypeBubble:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeBubble_With_Labels:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:return true;}return false;},IsBulletChart:function A4(){switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeHorizontal_Bullet:return true;}return false;},IsBarChart:function As(CV){CV=(CV===undefined)?H._general:CV;CV=(CV>=H._ring)?H._general:CV;switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bar_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:return(CV===H._general||CV===H._cluster);case Bg.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Bar_Stacked:case Bg.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_Stacked:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:return(CV===H._general||CV===H._stacked);case Bg.DssGraphTypeVertical_Bar_Percent:case Bg.DssGraphTypeHorizontal_Bar_Percent:case Bg.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Percent:return(CV===H._general||CV===H._percent);case Bg.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Bar_Absolute:case Bg.DssGraphTypeHorizontal_Bar_Absolute:case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeHorizontal_Bullet:return(CV===H._general||CV===H._absolute);}return false;},IsAdvancedBarChart:function BD(CV){CV=(CV===undefined)?H._general:CV;switch(this.mGraphType){case Bg.DssGraphTypeVertical_Bullet:case Bg.DssGraphTypeHorizontal_Bullet:return CV===H._general||CV===H._bullet;default:return false;}},IsLineChart:function Be(CV){CV=(CV===undefined)?H._general:CV;CV=(CV>=H._ring)?H._general:CV;if(CV===H._cluster){return false;}switch(this.mGraphType){case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:return(CV===H._general||CV===H._stacked);case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeHorizontal_Line_Percent:case Bg.DssGraphTypeVertical_Line_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Percent:return(CV===H._general||CV===H._percent);case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_Absolute:case Bg.DssGraphTypeHorizontal_Line_Absolute:return(CV===H._general||CV===H._absolute);}return false;},IsAreaChart:function CP(CV){CV=(CV===undefined)?H._general:CV;CV=(CV>=H._ring)?H._general:CV;if(CV===H._cluster){return false;}switch(this.mGraphType){case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:return(CV===H._general||CV===H._stacked);case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeHorizontal_Area_Percent:case Bg.DssGraphTypeVertical_Area_DualAxis_Percent:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Percent:return(CV===H._general||CV===H._percent);case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_Absolute:case Bg.DssGraphTypeHorizontal_Area_Absolute:return(CV===H._general||CV===H._absolute);}return false;},GetGraphMatrixGraphMajorType:function CS(){var CV=this.mpGraphMatrixContext.mMarkerShape,CW=201,CY=202;if(CV===CW||CV===CY){return a._PIE;}if(this.IsBarChart()){return a._BAR;}if(this.IsLineChart()){return a._LINE;}if(this.IsAreaChart()){return a._AREA;}var CX=this.GetGraphType();switch(CX){case Bg.DssGraphTypeGridChart:return a._GRID;case Bg.DssGraphTypeX_Y_Scatter:case Bg.DssGraphTypeDualAxis_X_Y_Scatter:case Bg.DssGraphTypeX_Y_Scatter_with_Labels:case Bg.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return a._SCATTER;case Bg.DssGraphTypeBubble:case Bg.DssGraphTypeBubble_DualAxis:case Bg.DssGraphTypeBubble_With_Labels:case Bg.DssGraphTypeBubble_DualAxis_With_Labels:return a._BUBBLE;case Bg.DssGraphTypeVertical_Area_Absolute:case Bg.DssGraphTypeVertical_Area_Stacked:case Bg.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Area_Percent:case Bg.DssGraphTypeHorizontal_Area_Absolute:case Bg.DssGraphTypeHorizontal_Area_Stacked:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Area_Percent:return a._AREA;case Bg.DssGraphTypeVertical_Line_Absolute:case Bg.DssGraphTypeVertical_Line_Stacked:case Bg.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bg.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bg.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bg.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bg.DssGraphTypeVertical_Line_Percent:case Bg.DssGraphTypeHorizontal_Line_Absolute:case Bg.DssGraphTypeHorizontal_Line_Stacked:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bg.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bg.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bg.DssGraphTypeHorizontal_Line_Percent:return a._LINE;}return a._UNDEFINED;},GetThresholdFillColor:function h(CX,CY){var CV=true;if(CV){if(CX===this.mThresholdColorCache.mSeriesId&&CY===this.mThresholdColorCache.mGroupId){if(this.mThresholdColorCache.mUseThreshold){return this.mThresholdColorCache.mThresholdColor;}}else{var CW=this.mDatasetPtr.GetThresholdFillColor(CX,CY,0);this.mThresholdColorCache.mSeriesId=CX;this.mThresholdColorCache.mGroupId=CY;this.mThresholdColorCache.mUseThreshold=CW!==null;if(this.mThresholdColorCache.mUseThreshold){this.mThresholdColorCache.mThresholdColor=CW;return CW;}}}return null;},GetColorFromPalette:function B2(CV){var CW,CX;if(this.mIsGraphMatrix){if(this.mThemeType===BC._white){CW=CG.gLightColorPalette;}else{CW=CG.gDarkColorPalette;}}else{CW=CG.gColorPalette;}CV%=CW.length;CX=CW[CV];return CX.ToInteger();},getInt:function B0(CV){if(CV>=0){return Math.floor(CV);}return Math.ceil(CV);},transformRectToTicker:function B7(CW,CX){var CV=[],CZ,CY;if(CX){CZ={x:Math.round(CW.x),y:Math.round(CW.y+0.5*CW.height)};CY={x:Math.round(CW.x+CW.width),y:Math.round(CW.y+0.5*CW.height)};}else{CZ={x:Math.round(CW.x+0.5*CW.width),y:Math.round(CW.y)};CY={x:Math.round(CW.x+0.5*CW.width),y:Math.round(CW.y+CW.height)};}CV.push(CZ);CV.push(CY);return CV;},transformToRect:function BS(CV,Ci,CW,CX){var Ca=100,Cg=4,Ch=[4,-100,-100,100,-100,100,100,-100,100],CY,Cd,Cc;v=[];if(CW){for(CY=0;CY<Cg;++CY){Cd=Ch[2*CY+1]*Ci/Ca+CV.x;Cc=Ch[2*CY+2]*Ci/Ca+CV.y;v.push({x:Cd,y:Cc});}}else{for(CY=0;CY<Cg;++CY){Cd=Ch[2*CY+1]*Ci/Ca+CV.x;Cc=Ch[2*CY+2]*Ci/Ca+CV.y;var Cf={x:Cd,y:Cc};Cf=this.vdPoint(Cf);v.push(Cf);}}var Ce=Math.abs(v[3].x-v[2].x),CZ=Math.abs(v[3].y-v[0].y);if(CX){CX.Reset(v[0].x,v[0].y,Ce,CZ);return CX;}else{var Cb=new CG.Rect2D();Cb.x=v[0].x;Cb.y=v[0].y;Cb.width=Math.abs(v[3].x-v[2].x);Cb.height=Math.abs(v[3].y-v[0].y);return Cb;}},resetCanvas:function BH(){this.mCanvas.reset();},applyFontFormat:function Ah(CV){if(this.mImageFormat===d.SVG){this.mCanvas.ApplyFontFormat(CV);}},setDrawingOrderToCanvas:function Bq(CV){if(this.mImageFormat===d.SVG){this.mCanvas.setDrawOrder(CV);}},getDefaultThemeColor:function CU(){switch(this.mThemeType){case BC._black:return 0;case BC._white:return 16777215;default:return 16777215;}},getDefaultContrastColor:function B9(CV){CV=CV||-1;var CX=0,CW=1;switch(CV){case CX:return(this.mThemeType===BC._black?5855577:10066329);case CW:return(this.mThemeType===BC._black?16777215:3355443);default:return(this.mThemeType===BC._black?16777215:0);}},mapGraphTypeToDualAxis:function Au(CW){var CV=mstrmojo.chart.model.enums.EnumDSSGraphType;switch(CW){case CV.DssGraphTypeVertical_Bar_Side_by_Side:return CV.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side;case CV.DssGraphTypeHorizontal_Bar_Side_by_Side:return CV.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side;case CV.DssGraphTypeVertical_Bar_Stacked:return CV.DssGraphTypeVertical_Bar_DualAxis_Stacked;case CV.DssGraphTypeHorizontal_Bar_Stacked:return CV.DssGraphTypeHorizontal_Bar_DualAxis_Stacked;case CV.DssGraphTypeVertical_Bar_Percent:return CV.DssGraphTypeVertical_Bar_DualAxis_Percent;case CV.DssGraphTypeHorizontal_Bar_Percent:return CV.DssGraphTypeHorizontal_Bar_DualAxis_Percent;case CV.DssGraphTypeVertical_Bar_Absolute:return CV.DssGraphTypeVertical_Bar_DualAxis_Absolute;case CV.DssGraphTypeHorizontal_Bar_Absolute:return CV.DssGraphTypeHorizontal_Bar_DualAxis_Absolute;case CV.DssGraphTypeVertical_Line_Stacked:return CV.DssGraphTypeVertical_Line_DualAxis_Stacked;case CV.DssGraphTypeHorizontal_Line_Stacked:return CV.DssGraphTypeHorizontal_Line_DualAxis_Stacked;case CV.DssGraphTypeVertical_Line_Percent:return CV.DssGraphTypeVertical_Line_DualAxis_Percent;case CV.DssGraphTypeHorizontal_Line_Percent:return CV.DssGraphTypeHorizontal_Line_DualAxis_Percent;case CV.DssGraphTypeVertical_Line_Absolute:return CV.DssGraphTypeVertical_Line_DualAxis_Absolute;case CV.DssGraphTypeHorizontal_Line_Absolute:return CV.DssGraphTypeHorizontal_Line_DualAxis_Absolute;case CV.DssGraphTypeVertical_Area_Stacked:return CV.DssGraphTypeVertical_Area_DualAxis_Stacked;case CV.DssGraphTypeHorizontal_Area_Stacked:return CV.DssGraphTypeHorizontal_Area_DualAxis_Stacked;case CV.DssGraphTypeVertical_Area_Percent:return CV.DssGraphTypeVertical_Area_DualAxis_Percent;case CV.DssGraphTypeHorizontal_Area_Percent:return CV.DssGraphTypeHorizontal_Area_DualAxis_Percent;case CV.DssGraphTypeVertical_Area_Absolute:return CV.DssGraphTypeVertical_Area_DualAxis_Absolute;case CV.DssGraphTypeHorizontal_Area_Absolute:return CV.DssGraphTypeHorizontal_Area_DualAxis_Absolute;default:return CW;}},getAxisTripleId:function AN(CV){return CG.gAxisTripleIds[CV];},RenderClusterShapes:function BB(){var CY=this,CW=CY.mUniformAxisContext.CategoryAxis,CX=CW.X,CV=CW.Y;if(CY.isCombinationChart()||CY.IsDualAxis()){return(CX.EnforceCluster&&CX.EnforceFringe)||(CV.EnforceCluster&&CV.EnforceFringe);}return false;},checkColorByAndSizeByValue:function BK(Ca,CW,CZ,CV){CW=CW||this.mDataset;CZ=CZ||false;CV=CV||false;if(!this.mIsGraphMatrix){return true;}var CY=Ca.angleByIndex!==undefined,CX;if(CZ){if(CY===false){CX=CW.GetColorByData(Ca.mSeriesId,Ca.mGroupId);}else{CX=CW.GetPieSliceColorByData(Ca.mSeriesId,Ca.mGroupId,Ca.angleByIndex,Ca.sliceById);}if(Am.isValidNumber(CX)===false){return false;}}if(CV){CX=CW.GetSizeByData(Ca.mSeriesId,Ca.mGroupId);if(Am.isValidNumber(CX)===false){return false;}}return true;},getValueAxisKeyFromLayout:function AD(CV,CW){if(CW){return CV?"X1":"Y1";}else{return CV?"X2":"Y2";}},getAxisKeyFromObjectId:function AG(CV,CY,CW){CW=CW||false;CY=CY||false;var CX;switch(CV){case Bj.DssGraphX1Body:case Bj.DssGraphX1Label:case Bj.DssGraphX1Major:case Bj.DssGraphX1Minor:case Bj.DssGraphXTitle:case Bj.DssGraphUserLabel3:case Bj.DssGraphUserLine3:CX="X1";break;case Bj.DssGraphX2Body:case Bj.DssGraphX2Label:case Bj.DssGraphX2Major:case Bj.DssGraphX2Minor:case Bj.DssGraphX2Title:case Bj.DssGraphUserLabel4:case Bj.DssGraphUserLine4:CX="X2";break;case Bj.DssGraphY1Body:case Bj.DssGraphY1Label:case Bj.DssGraphY1Major:case Bj.DssGraphY1Minor:case Bj.DssGraphY1Title:case Bj.DssGraphUserLabel1:case Bj.DssGraphUserLine1:CX="Y1";break;case Bj.DssGraphY2Body:case Bj.DssGraphY2Label:case Bj.DssGraphY2Major:case Bj.DssGraphY2Minor:case Bj.DssGraphY2Title:case Bj.DssGraphUserLabel2:case Bj.DssGraphUserLine2:CX="Y2";break;case Bj.DssGraphZBody:CX="Z";break;case Bj.DssGraphO1Body:case Bj.DssGraph2DO1Label:case Bj.DssGraphO1Major:case Bj.DssGraphO1Minor:case Bj.DssGraphO1Title:if(CY){CX=this.caKeyMap.c1||this.IsVertical()?"X1":"Y1";}else{CX="O1";}break;case Bj.DssGraphO2Body:case Bj.DssGraph2DO2Label:case Bj.DssGraphO2Major:case Bj.DssGraphO2Minor:case Bj.DssGraphO2Title:if(CY){CX=this.caKeyMap.c1||this.IsVertical()?"X2":"Y2";}else{CX="O2";}break;default:CX="";break;}if(CW){CX=CX.toLowerCase();}return CX;},getUniformAxisInformationFromKey:function CQ(CY,CX){CX=CX||false;var CW=this.getUniformAxisContext(),CV=CW.ValueAxis;switch(CY){case"X1":case"X2":case"Y1":case"Y2":case"Z":return CV[CY];case"O1":case"O2":CV=CW.CategoryAxis;return CX?CV.Y:CV.X;default:return CV.Y1;}},getUniformAxisInformation:function R(CY,CX){var CW=this.getUniformAxisContext(),Ca=CW.ValueAxis,CV=CW.CategoryAxis,CZ;switch(CY){case Bj.DssGraphO1Body:case Bj.DssGraphO2Body:CX=CX||false;return CX?CV.Y:CV.X;case Bj.DssGraphX1Body:CZ=Ca.X1;break;case Bj.DssGraphY1Body:CZ=Ca.Y1;break;case Bj.DssGraphX2Body:CZ=Ca.X2;break;case Bj.DssGraphY2Body:CZ=Ca.Y2;break;case Bj.DssGraphZBody:CZ=Ca.Z;break;}return CZ;},mirrorPrimaryInBubbleScatter:function A(Cb){var Cc=this,CX=Cc.GetGraphMatrixContext(),CV=CX.AxisLayout;if(Cc.mIsGraphMatrix===false){return false;}if(CV===null||CV===undefined){return false;}var CY=1,Ca=2,CZ=4,CW=8;if(Cb){return !!(CV&CW);}return !!(CV&CZ);},isCompactMode:function Ai(){return this.mDataset.dataProvider.isCompactMode();}});BX.sDefaultMargin=10;BX.sDefaultMarginForTimeSeries=3;BX.sDefaultUniformAxisMargin=0;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumFontAlignment","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumVariantBool","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","ChartConstants","ChartContext","FormatFont","Rect2D","FormatLine","FormatFill");var Y=mstrmojo.chart,X=mstrmojo.VisUtility,O=mstrmojo.hash,U=Y.ChartConstants,J=Y.enums,D=J.EnumCollectionType,t=D.CT_LINE,Z=J.EnumGraphMajorType,f=J.EnumDSSExtraGraphObject,N=J.EnumFontAlignment,I=J.EnumLineStyle,E=J.EnumFillType,r=Y.gNullTripleId,a=J.EnumGraphMatrixMajorGraphType,T=Y.model,M=T.enums,k=M.EnumDSSGraphMarkerShape,e=M.EnumDSSGraphType,h=M.EnumDSSGraphProperty,j=M.EnumDSSGraphObject,d=M.EnumDSSExtraGraphProperty,F=M.EnumDSSGraphFontRotation,o=M.EnumDSSGraphGridLineType,L=M.EnumDSSGraphFillEffect,C=M.EnumVariantBool,l=M.EnumShapeType,S=0,B=1,q=7;var g=0,s=1,W=2;function Q(z,AI,y){var AN,AE=this.mDataset,AK,AL=false,AF={valid:false,object:z},x=AI.mObjectId;if(x===j.DssGraphTrendLine||x===j.DssGraphReferenceLine){var AJ=x===j.DssGraphTrendLine,AQ,AO;if(AJ){AQ=AE.GetTrendLineOfSeries(AI.mSeriesId);AO=AQ;}else{AQ=AE.GetReferenceLinesOfSeries(AI.mSeriesId);if(AI.mGroupId>=0){AO=AQ[AI.mGroupId];}}if(AO){z.mLineThickness=AO.getLineThickness();z.mLineThicknessPt=75*z.mLineThickness;z.mAlpha=255;z.mLineStyle=AO.getLineRenderType();z.mLineColor=AO.getLineColor();AF.valid=true;}}if(AF.valid){return AF;}AF.valid=true;var AD;switch(AI.mObjectId){case j.DssGraphUserLine1:AD="y1";break;case j.DssGraphUserLine2:AD="x1";break;case j.DssGraphUserLine3:AD="y2";break;case j.DssGraphUserLine4:AD="x2";break;default:AF.valid=false;break;}if(AF.valid){var AM=AE.getAxisOriginFormat(AD);delete AM.show;O.copy(AM,z);return AF;}var AC="all",AA=0,AP=0,AB=AI.mGroupId;AF.valid=true;if(x===j.DssGraphRiser){if(y===l._PIE||y===l._PIESLICE){x=j.DssGraphPieSlice;}}switch(x){case j.DssGraphDataMarker:AC="lineMarker";break;case j.DssGraphRiser:if(y===l._TICKER){AC="lineShape";}else{AC="shapeBorder";}break;case j.DssGraphDataLine:AC="lineShape";AB=0;break;case j.DssGraphTargetLine:break;case j.DssGraphPieSlice:AA=AI.angleByIndex||0;AP=AI.sliceById||0;AC="pieSliceBorder";break;default:AF.valid=false;break;}if(AF.valid){AK=AE.getGenericLineFormat(AI.mSeriesId,AB,AA,AP,AC);z=O.copy(AK,z);AF.object=z;return AF;}var AG,w=this.IsVertical();switch(x){case j.DssGraphY1Major:AN="majorTick";AG="y1";break;case j.DssGraphY1Minor:AN="minorTick";AG="y1";break;case j.DssGraphY2Major:AN="majorTick";AG=w?"y2":"x2";break;case j.DssGraphY2Minor:AN="minorTick";AG=w?"y2":"x2";break;case j.DssGraphX1Major:AN="majorTick";AG="x1";break;case j.DssGraphX1Minor:AN="minorTick";AG="x1";break;case j.DssGraphX2Major:AN="majorTick";AG="x2";break;case j.DssGraphX2Minor:AN="minorTick";AG="x2";break;case j.DssGraphO1Major:AN="majorTick";AG=this.caKeyMap.c1||"x1";break;case j.DssGraphO1Minor:AN="minorTick";AG=this.caKeyMap.c1||"x1";break;case j.DssGraphO2Major:AN="majorTick";AG=this.caKeyMap.c2||"x2";break;case j.DssGraphO2Minor:AN="minorTick";AG=this.caKeyMap.c2||"x2";break;case j.DssGraphY1Body:AN="axisBody";AG="y1";break;case j.DssGraphX2Body:AN="axisBody";AG="x2";break;case j.DssGraphY2Body:AN="axisBody";AG=w?"y2":"x2";break;case j.DssGraphX1Body:AN="axisBody";AG="x1";break;case j.DssGraphO1Body:AN="axisBody";AG=this.caKeyMap.c1||"x1";break;case j.DssGraphO2Body:AN="axisBody";AG=this.caKeyMap.c2||"x2";break;}var AH;if(AL){switch(AN){case"axisBody":AH=this.globalFormats.AxisBodies;break;case"majorTick":AH=this.globalFormats.AxisMajorTicks;break;case"minorTick":AH=this.globalFormats.AxisMinorTicks;break;default:AF.valid=false;break;}AF.valid=!!AH;if(AF.valid&&AH[AG]){AF.object=AH[AG];return AF;}}AF.valid=true;switch(AN){case"axisBody":AK=AE.getAxisLineFormat(AG);break;case"majorTick":case"minorTick":AK=AE.getAxisTickFormat(AG,AN);break;default:AF.valid=false;X.visPrint("failed to get a match for this line format");break;}if(AL){switch(AN){case"axisBody":this.globalFormats.AxisBodies=this.globalFormats.AxisBodies||{};AH=this.globalFormats.AxisBodies;break;case"majorTick":this.globalFormats.AxisMajorTicks=this.globalFormats.AxisMajorTicks||{};AH=this.globalFormats.AxisMajorTicks;break;case"minorTick":this.globalFormats.AxisMinorTicks=this.globalFormats.AxisMinorTicks||{};AH=this.globalFormats.AxisMinorTicks;break;default:AF.valid=false;break;}if(AF.valid){if(AH[AG]===undefined){AH[AG]=O.copy(AK,AH[AG]);z=AH[AG];if(AN==="minorTick"&&z.mAlpha!==undefined&&z.mAlpha!==null){z.mAlpha*=0.6;}}AF.object=AH[AG];return AF;}}else{if(AF.valid){O.copy(AK,z);if(AN==="minorTick"&&z.mAlpha!==undefined&&z.mAlpha!==null){z.mAlpha*=0.6;}AF.object=z;}}return AF;}function v(w,AA,AB){var AE,z=this.mDataset,AD=0,x=0,y,AF={valid:false,object:w},AC=AA.mObjectId;if(AC===j.DssGraphRiser){if(AB===l._PIE||AB===l._PIESLICE){AC=j.DssGraphPieSlice;}}AF.valid=true;switch(AC){case j.DssGraphRiser:y="shape";break;case j.DssGraphDataMarker:y="lineMarker";break;case j.DssGraphPieSlice:y="pieSlice";AD=AA.angleByIndex!==undefined?AA.angleByIndex:0;x=AA.sliceById!==undefined?AA.sliceById:0;break;default:X.visPrint("fail to find a match for this fill format");AF.valid=false;break;}if(AF.valid){if(AA.mSeriesId>=0&&AA.mGroupId>=0){AE=z.getGenericFillFormat(AA.mSeriesId,AA.mGroupId,AD,x,y);AF.object=O.copy(AE,w);}}return AF;}function P(w){switch(w.mObjectId){case j.DssGraphUserLabel1:return j.DssGraphY1Label;case j.DssGraphUserLabel2:return j.DssGraphY2Label;case j.DssGraphUserLabel3:return j.DssGraphX1Label;case j.DssGraphUserLabel4:return j.DssGraphX2Label;default:return w.mObjectId;}}function H(x,AB,AE){var AJ,AM=false,AA=this.mDataset,AG=P.call(this,AB);if(AG===j.DssGraphDataText||AG===j.DssGraphRefLineText||AG===j.DssGraphTrendLineText){var z=0,AD=1,AK=2;AM=true;if(AE<0){switch(AG){case j.DssGraphRefLineText:AE=AD;break;case j.DssGraphTrendLineText:AE=AK;break;default:AE=z;break;}}switch(AE){case z:if(AM){var AC=this.globalFormats;if(AC.DatatextFormat===null||AC.DatatextFormat===undefined){AC.DatatextFormat=new Y.FormatFont({Bare:true});if(AA===null||AA===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:x};}AJ=AA.getDataLabelFontFormat();O.copy(AJ,AC.DatatextFormat);var w=AC.DatatextFormat;if(w&&w.mFontSize&&typeof w.mFontSize!=="number"){w.mFontSize=parseFloat(w.mFontSize);}}x=AC.DatatextFormat;}else{if(AA===null||AA===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:x};}AJ=AA.getDataLabelFontFormat();O.copy(AJ,x);}return{valid:true,object:x};case AD:var y,AF=AA.GetReferenceLinesOfSeries(AB.mSeriesId);if(AB.mGroupId>=0){y=AF[AB.mGroupId];}if(y){var AL=y.getReferenceLineLabelFont();if(AL){x.mFontColor=AL.rfLnFntClr;x.mFontSize=parseInt(AL.rfLnFntSz,10);x.mFontStyle=AL.rfLnFntStyle;x.mFontName=AL.rfLnFntFml;}}break;case AK:break;default:return{valid:false,object:x};}return{valid:false,object:x};}var AI;switch(AG){case j.DssGraphY1Label:AI="y1";break;case j.DssGraphX2Label:AI="x2";break;case j.DssGraphY2Label:AI=this.IsVertical()?"y2":"x2";break;case j.DssGraphX1Label:AI="x1";break;case j.DssGraph2DO1Label:AI=this.caKeyMap.c1||"x1";break;case j.DssGraph2DO2Label:AI=this.caKeyMap.c2||"x2";break;default:return{valid:false,object:x};}AM=false;if(AM){var AH=this.globalFormats.AxisLabelFormats;if(AH===null||AH===undefined){this.globalFormats.AxisLabelFormats={};}AH=this.globalFormats.AxisLabelFormats;if(!!AH[AI]){return AH[AI];}AH[AI]={};O.copy(AJ,AH[AI]);return AH[AI];}else{AJ=AA.getAxisLabelFontFormat(AI);O.copy(AJ,x);}return{valid:true,object:x};}function A(z,AB,w){AB=AB||0;w=w||false;var AA=this.GetGraphMatrixContext(),AF,y=this.mDataset;w=w&&AA.mHasColorBy;if(y&&w){var x;if(z.mObjectId===j.DssGraphPieSlice){var AE=z.angleByIndex||0,AD=z.sliceById||0;x=y.GetPieSliceColorByData(z.mSeriesId,z.mGroupId,AE,AD);}else{x=y.GetColorByData(z.mSeriesId,z.mGroupId,AB);}if(x!==null&&x!==undefined){AF=x;}}if(AF===undefined){if(this.mIsGraphMatrix&&!AA.mHasColorBy){AF=this.GetColorFromPalette(0);}else{if(z.mSeriesId<0&&z.mGroupId<0){AF=0;}else{var AC=z.mSeriesId;if(AC<0){AC=z.mGroupId;}AC=Math.max(0,AC);AF=this.GetColorFromPalette(AC);}}}return AF;}mstrmojo.chart.GenericContext=mstrmojo.declare(mstrmojo.chart.ChartContext,null,{scriptClass:"mstrmojo.chart.GenericContext",init:function p(w){this._super(w);this.mGraphType=e.DssGraphTypeVertical_Bar_Side_by_Side;this.mFormatManager=this.mFormatManager||w.FormatManager||null;this.mIsFontAntiAlias=true;},GetColorValue:function G(y,w,x){return A.call(this,y,w,x);},GetProperty:function c(y,AA){var w,x,z;if(y===h.DssGraphType){return this.mGraphType;}if(!this.mIsTimeSeriesChart){x=this.mFormatManager.GetGraphProperty(y,AA.mObjectId,AA.mSeriesId,AA.mGroupId);if(x!==undefined&&x!==null){return x;}}if(!this.mIsGraphMatrix){x=this._super(y,AA);if(!x){x=this._super(y,new Y.TripleId({ObjectId:AA.mObjectId}));if(!x){x=this._super(y,new Y.TripleId({SeriesId:AA.mSeriesId}));if(!x){x=this._super(y,r);}}}if(x){return x;}}switch(y){case h.DssGraphAxisNumberFormat:case -h.DssGraphFormatDataTextAdv:w="-2,0,0,0,0,$,#";return w;case h.DssGraphTextContent:switch(AA.mObjectId){case j.DssGraphY1Title:w="Y1";return w;}return w;case h.DssGraphStyleMajor:if(this.mIsGraphMatrix){switch(AA.mObjectId){case j.DssGraphY1Body:case j.DssGraphY2Body:case j.DssGraphX1Body:case j.DssGraphX2Body:w=o.DssGraphGridOuterTicks;break;default:w=o.DssGraphGridNone;break;}}else{w=o.DssGraphGridRegular;}return w;case h.DssGraphShow2DAxisMinor:case h.DssGraphShow2DAxisLine:w=!this.mIsGraphMatrix;return w;case h.DssGraph2DSide:switch(AA.mObjectId){case j.DssGraphY1Body:w=o.DssGraphAxisLabelLowSide;return w;case j.DssGraphO1Body:w=o.DssGraphAxisLabelLowSide;return w;}break;case d.DssGraphChartAreaNumber:w=3;return w;case h.DssGraphDepthMode:w=false;return w;case h.DssGraphEnhancedSeriesEffect:w=false;return w;case h.DssGraphCurveColorAsSeries:case h.DssGraphShowLegendText:case h.DssGraphShowTitle:w=true;return w;case d.DssGraphUseChartArea:case h.DssGraphShowDataValue:case h.DssGraphShowTotalValue:case d.DssGraphChartAreaOrientation:case h.DssGraphLockFontSize:w=false;return w;case h.DssGraphSDShowDataText:w=false;return w;case h.DssGraphShow2DAxisMajor:z=this.GetGraphMajorType();if(z===Z.GMT_3D_CATEGORY||z===Z.GMT_3D_SCATTER){if(AA.mObjectId===j.DssGraphY1Body){w=true;return w;}}if(this.mIsGraphMatrix){return true;}w=(this.mIsTimeSeriesChart?true:false);return w;case d.DssGraphCumulativePercentLabel:w="Cumulative Percent";return w;case d.DssGraphInfoNestedLabel:case d.DssGraphInfoNestedLabelBracket:w=false;return w;case h.DssGraphShowDataLabel:w=false;return w;case h.DssGraphLineColor:if(this.mIsTimeSeriesChart){if(AA.mSeriesId>=0){w=parseInt(this.GetColorFromPalette(AA.mSeriesId),10);return w;}switch(AA.mObjectId){case j.DssGraphO1Major:w=5460819;return w;case j.DssGraphY1Major:w=5658198;return w;case j.DssGraphO1Body:case j.DssGraphY1Body:w=13421772;return w;default:return undefined;}}if(this.mIsGraphMatrix){switch(AA.mObjectId){case j.DssGraphY1Major:case j.DssGraphX1Major:case j.DssGraphX2Major:case j.DssGraphY2Major:w=this.getDefaultContrastColor(S);break;default:return undefined;}}else{return undefined;}break;case h.DssGraphFillEffect:w=L.DssGraphFillSimple;return w;case h.DssGraphLineAlpha:if(AA.mObjectId===j.DssGraphRiser){w=0;return w;}return undefined;case h.DssGraphMarkerSize:w=33;return w;case h.DssGraph2DDepth:w=1000;return w;case h.DssGraphAxisAutoFit:z=this.GetGraphMajorType();w=z===Z.GMT_CATEGORY;return w;case h.DssGraphFontColor:if(this.mIsGraphMatrix){w=this.getDefaultContrastColor();return w;}break;default:return undefined;}return undefined;},PutGraphProperty:function V(w,x,y){this.mFormatManager.PutGraphProperty(w,x.mObjectId,x.mSeriesId,x.mGroupId,y);},GetFormatFont:function u(z){var w,x=this.mDebugUseNewProperties;w=this.GetFormatObject(z,-1,2,x);switch(z.mObjectId){case j.DssGraphPieGroupLabel:case j.DssGraphPieRingLabel:if(w.mFontAlignment===null||!x){w.mFontAlignment=N.FA_CENTER;}if(w.mFontSize===null||!x){w.mFontSize=Math.floor(w.mFontSize*3/4+1);}break;case j.DssGraphOPILBLValue:case j.DssGraphPieFeelerLabel:if(w.mFontAlignment===null||!x){w.mFontAlignment=N.FA_CENTER;}if(w.mFontSize===null||!x){w.mFontSize=q;}break;case j.DssGraphY1Label:case j.DssGraph2DO1Label:case j.DssGraph2DO2Label:case j.DssGraphX1Label:case j.DssGraphX2Label:case j.DssGraphY2Label:if(this.mIsTimeSeriesChart){w.mFontSize=14;w.mFontColor=13158600;}else{if(w.mFontColor===null||!x){w.mFontColor=this.getDefaultContrastColor();}if(w.mFontSize===null||!x){w.mFontSize=8;}}break;case j.DssGraphDataText:if(w.mFontSize===null||!x){w.mFontSize=Math.floor(U.kVirtualCoordinateHeight/45);}if(this.isVerticalBar()&&!this.IsBulletChart()){if(w.mFontRotation===null||!x){w.mFontRotation=F.Rotate90;}}break;case f.DssGraphWarningMessage:w.mFontColor=255;break;case f.DssGraphBanner:var y=this.getDefaultContrastColor(B);w.mFontColor=y;w.mFontSize=11;break;default:break;}this.UpdateFormatFont(z,w);w.mFontSize=this.vdFontSize(w.mFontSize);if(x){w.restoreDefaults(false);}return w;},GetFormatObject:function n(AC,y,x,AB){var AA,w,z;AB=AB&&(!!this.mDataset)&&this.mDebugUseNewProperties;if(AB){AA={Bare:true};}else{AA=undefined;}switch(x){case g:w=new Y.FormatLine(AA);break;case s:w=new Y.FormatFill(AA);break;case W:w=new Y.FormatFont(AA);break;default:break;}if(AB){z=this.ResolveFormat(w,AC,x,y);return z.object;}return w;},GetFormatLine:function K(y,AE,z){if(z===undefined){z=l._GENERIC;}var AD=y.mGroupId,AB=y.mObjectId,x;switch(AB){case j.DssGraphTrendLine:case j.DssGraphReferenceLine:case j.DssGraphY1Major:case j.DssGraphY2Major:case j.DssGraphY3Major:case j.DssGraphY4Major:case j.DssGraphX1Major:case j.DssGraphX2Major:case j.DssGraphO1Major:case j.DssGraphY1Minor:case j.DssGraphY2Minor:case j.DssGraphY3Minor:case j.DssGraphY4Minor:case j.DssGraphX1Minor:case j.DssGraphX2Minor:case j.DssGraphO1Minor:case j.DssGraphO1Body:case j.DssGraphX1Body:case j.DssGraphY1Body:case j.DssGraphY2Body:case j.DssGraphX2Body:case j.DssGraphY3Body:case j.DssGraphY4Body:case j.DssGraphUserLine1:case j.DssGraphUserLine2:case j.DssGraphUserLine3:case j.DssGraphUserLine4:case j.DssGraphDataLine:x=true;break;default:if(AD===-3){var w=y.mSeriesId;w=Math.max(w,0);y.mGroupId=this.mDataset.findCell(false,w,0);}x=y.mSeriesId>=0&&y.mGroupId>=0;break;}var AC=true,AA;AA=this.GetFormatObject(y,z,g,x);switch(AB){case j.DssGraphBackground:case j.DssGraphLegendArea:AA.mAlpha=0;break;case j.DssGraphRiser:case j.DssGraphDataLine:if(AE===t&&y.mSeriesId>=0){if(AA.mLineColor===null||!x){AA.mLineColor=A.call(this,y,0);}}if(AB===j.DssGraphRiser&&this.mIsGraphMatrix){if(AA.mLineColor===null||!x){AA.mLineColor=A.call(this,y,0,(y.mGroupId>=0&&y.mSeriesId>=0));}switch(z){case l._TICKER:if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()){if(AA.mLineThickness===null||!x){AA.mLineThicknessPt=200;AA.mLineThickness=2;}AC=false;}break;case l._CIRCLE:case l._RECTANGLE:case l._SQUARE:if(z===l._CIRCLE||z===l._RECTANGLE||z===l._SQUARE){if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()||this.IsBarChart()||this.IsLineChart()||this.IsAreaChart()){if(AA.mLineThickness===null||!x){AA.mLineThicknessPt=200;AA.mLineThickness=2;}AC=false;}}break;default:break;}}break;case j.DssGraphY1Major:case j.DssGraphY2Major:case j.DssGraphX1Major:case j.DssGraphX2Major:if(this.mIsTimeSeriesChart){AA.mLineStyle=I.LS_DOT;}else{if(this.mIsGraphMatrix){if(AA.mLineColor===null||!x){AA.mLineColor=this.getDefaultContrastColor(S);}}}break;default:break;}this.UpdateFormatLine(y,AA,x);if(AC||!x){AA.mLineThickness=AA.mLineThicknessPt;if(!this.mAbsoluteFontLineSize){AA.mLineThicknessPt=this.vdHeight(AA.mLineThicknessPt);}AA.mLineThickness=this.vdLineWidth(AA.mLineThickness);}if(x){AA.restoreDefaults(false);}y.mGroupId=AD;return AA;},GetFormatFill:function R(y,AE,AA){if(AA===undefined){AA=l._GENERIC;}var AD=y.mGroupId;if(AD===-3){var w=y.mSeriesId;w=Math.max(w,0);y.mGroupId=this.mDataset.findCell(false,w,0);}var x=(y.mSeriesId>=0&&y.mGroupId>=0)&&this.mDebugUseNewProperties,AC,AB=this.mpGraphMatrixContext;AC=this.GetFormatObject(y,AA,s,x);switch(y.mObjectId){case j.DssGraphPieSlice:case j.DssGraphRiser:case j.DssGraphDataLine:if(this.mIsGraphMatrix){if(AC.mFillType===null||!x){AC.mFillType=E.FT_SIMPLE;}var z=this.GetGraphMatrixGraphMajorType();switch(z){case a._BAR:case a._SCATTER:case a._BUBBLE:case a._AREA:if(AC.mAlpha===null||!x){AC.mAlpha=178.5;}break;case a._LINE:if(AB.mMarkerShape!==k.DssGraphMarkerShapeNone||y.mObjectId===j.DssGraphRiser){if(AC.mAlpha===null||!x){AC.mAlpha=178.5;}}break;default:break;}if(AB.mMarkerShape===k.DssGraphMarkerShapeGMTick){if(AC.mAlpha===null||!x){AC.mAlpha=255;}}if(AC.mSimpleColor===null||!x){AC.mSimpleColor=A.call(this,y,0,(y.mSeriesId>=0&&y.mGroupId>=0));}}else{if((y.mSeriesId>=0&&y.mGroupId===-3)){AC.mSimpleColor=Y.gColorPalette[y.mSeriesId];}else{if((y.mGroupId>=0&&y.mSeriesId===-3)){AC.mSimpleColor=Y.gColorPalette[y.mGroupId];}}}break;default:break;}this.UpdateFormatFill(y,AC,AE,x);if(x){AC.restoreDefaults(false);}y.mGroupId=AD;return AC;},ResolveFormat:function b(x,z,w,y){if(x){switch(w){case g:return Q.call(this,x,z,y);case s:return v.call(this,x,z,y);case W:return H.call(this,x,z,y);default:return{valid:false,object:x};}}return{valid:false,object:x};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","ChartContext","ImageMap");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumCollectionType");var W=mstrmojo.chart,O=mstrmojo.chart.model,U=W.enums,d=O.enums,b=U.EnumCollectionType,Q=U.EnumObjectShape,F=Q.OS_RECTANGLE,f=d.EnumDSSGraphObject,S=W.gNullTripleId,c=W.gNullObjectId,M=2147483647;mstrmojo.chart.GraphObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObject",mpParentObject:null,mFormatLinePtr:null,mTripleId:S,mChartContextPtr:null,mpManager:null,mIsDetectable:true,mIsAnimationEnabled:false,mIsVirtual:false,mShapeType:0,init:function V(h){this._super(h);this.mpParentObject=h.GraphCollectionObject||null;this.mTripleId=h.TripleId||S;this.mpManager=h.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(h.Shape){this.mShapeType=h.Shape;}if(h.hasLine&&this.mTripleId.mObjectId!==c){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,b.CT_NO_COLLECTION,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;},SetAnimationEnable:function H(h){this.mIsAnimationEnabled=h;this.SetProgress(0.1);},IsLayerObject:function J(){return false;},SetFormatLine:function X(h){this.mFormatLinePtr=h;},SetLineWidth:function e(){var h;h=this.mFormatLinePtr.mLineThickness;h=(h<1)?1:h;this.hSetLineWidth(h);},ApplyLineFormat:function E(){this.mFormatLinePtr.ApplyLineFormat(this.mChartContextPtr);},SetOutlineWidth:function R(){this.hSetLineWidth(W.gOutlineWhite.mLineThickness);},SetOutlineWidthEx:function P(h){if(h>0){this.hSetLineWidth(h);}},ApplyOutlineFormat:function g(){var h=this.mChartContextPtr;if(h.IsBackgroundBright()){W.gStrokeForLightBackground.ApplyLineFormat(h);}else{W.gStrokeForDarkBackground.ApplyLineFormat(h);}},MakePolygonClockwise:function I(o){var k=o.length,q=0,n,j,p,l,h;if(k<3){return ;}for(n=1;n<k;++n){if(o[n].x<o[q].x||(o[n].x<=o[q].x&&o[n].y<o[q].y)){q=n;}}j=(q+k-1)%k;p=new W.Vector2D({x:o[j].x-o[q].x,y:o[j].y-o[q].y});j=(q+1)%k;l=new W.Vector2D({x:o[j].x-o[q].x,y:o[j].y-o[q].y});if(l.CrossProduct(p)<-W.gModuleMain.mTolerance){for(n=0;n<Math.floor(k/2);++n){h=o[n];o[n]=o[k-n-1];o[k-n-1]=h;}}},DrawOutLine:function T(){this.SetOutlineWidth();this.mChartContextPtr.DrawPolygon(this.GetClockwisePolygon());this.ApplyOutlineFormat();},PointInObject:function A(h){if(!this.mIsDetectable){return false;}return h.IsInPolygon(this.GetClockwisePolygon());},hSetLineWidth:function G(h){this.mChartContextPtr.SetLineWidth(h);this.mChartContextPtr.mIsLineWidthOdd=((h&1)===1);},GetChartAreaId:function Y(){var h=this.mpManager.mTripleId;switch(h.mObjectId){case f.DssGraphY1Body:case f.DssGraphY2Body:case f.DssGraphX2Body:case f.DssGraphO1Body:return this.mTripleId.mSeriesId;default:return this.mpManager.GetChartAreaId();}},GetBoundingRect:function L(){var h=new W.Rect2D();return h;},SetProgress:function C(h){},DistanceToPoint:function Z(h){if(!this.mIsDetectable){return M;}var j=this.GetClockwisePolygon();if(j.length<3){return M;}return h.DistanceToPolygon(j);},GetAngularBisectorIntersectionPoint:function D(v,t,s,l,n){var o={x:v.x-t.x,y:v.y-t.y};var k={x:s.x-t.x,y:s.y-t.y};var j=Math.sqrt(o.x*o.x+o.y*o.y);var h=Math.sqrt(k.x*k.x+k.y*k.y);var r={x:o.x/j,y:o.y/j};var q={x:k.x/h,y:k.y/h};var u=0;if(Math.abs(r.x-q.x)<0.01){u=l*(q.x+r.x)/(r.y-q.y);}else{u=l*(q.y+r.y)/(q.x-r.x);}var p={x:0,y:0};p.x=t.x+u*q.x;p.y=t.y+u*q.y;n.x=p.x+l*(-q.y);n.y=p.y+l*q.x;},getFormatFromParent:function a(){this.mFormatLinePtr=this.mpParentObject.mFormatLinePtr;},getBoundingPoints:function K(){var h=this.GetBoundingRect(),j=h.ToPoints(false);return{Shape:0,Points:[j.TopLeft,j.TopRight,j.BottomRight,j.BottomLeft]};},getShapeSize:function N(){return 0;},fallOut:function B(p){var j=0,o=this.mChartContextPtr,n=this.getBoundingPoints(),l=n.Points,k,h;for(k=0;k<l.length;++k){h=l[k];if(h.x<0||h.y<0||h.x>o.mGraphWidth||h.y>o.mGraphHeight){j++;}if(j>0&&!p){return true;}}return(j===l.length);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.Obj","mstrmojo.num","mstrmojo.array","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMDataProvider");var t=mstrmojo,u=t.array,J=t.num,S=t.hash,AD=t.gm,B=AD.GMUtility,I=t.VisUtility,o=AD.EnumGraphType,AA=AD.EnumSubtype,AL=AD.EnumColorByType,P=AD.EnumMetricsPosition,AP=", ",R=" ",O=" ",a=AD.FormNameType;function H(AS){var AT=[];AS.forEach(function(AU){if(AU!==undefined){AT.push(AU);}});return AT;}function E(){var AX=this.attributesColorMap,Aa=this.attributesColorMapID,AY=AX.length,AT,AV,AU,AW,AS;for(AV=0;AV<AY;AV++){AW=Aa[AV];AS=typeof AW==="string"?AW.split(","):[AW];AT=AS.length;for(AU=0;AU<AT;AU++){var AZ=parseInt(AS[AU],10);if(AZ===-1){AX[AV]=undefined;Aa[AV]=undefined;}}}this.attributesColorMap=H(AX);this.attributesColorMapID=H(Aa);}function AF(AU,AS){var AT;if(AS>AU.mxIdx){return -1;}AT=AS;while(true){if(AU[AT]){return AT;}AT++;}}function Q(AY,AT,AW,AX){var AS=AY.n,AV=AY.fs&&AY.fs[AW].n,AU="";if(AV===undefined){AV=" ";}if(AT===a.OFF){if(AW===0){AU=AS;}else{AU="";}}else{if(AT===a.ON){AU=AS+" "+AV;}else{if(AT===a.FORM_NAME_ONLY){AU=AV;}else{if(AT===a.SHOW_ATT_NAME_ONCE){if(AW===0){AU=AS+" "+AV;}else{AU=AV;}}else{if(AT===a.AUTO){if(AX===1){AU=AS;}else{AU=AS+" "+AV;}}}}}}return AU;}function d(AU,AW,AY){var AZ=this.ttlDispTp,AT=[],AV,AS=AW?AU.cs:AU.rs,AX;for(AV=0;AV<AS;AV++){if(AU.otp===12){AX=S.clone(AU);AX.fid=AX.fs[AV].id;delete AX.fs;AX.isRowAttribute=AW;AX.tui=AY;AX.n=Q(AU,AZ,AV,AS);AT.push(AX);}else{AX=S.clone(AU);if(AU.fid!==undefined){AX.fid=AU.fid;}else{AX.fid=AU.id;}delete AX.fs;AX.isRowAttribute=AW;AX.tui=AY;if(AV===0){AX.n=AU.n;}else{AX.n="";}AT.push(AX);}}return AT;}function AO(AW){var AX,AS,AV,AT=function(AY){if(AS!==""){AS+=O;}AS+=AY.headerText;},AU=function(AY){if(/^(\-|\+)?([0-9]+|Infinity)$/.test(AY)){return Number(AY);}return NaN;};u.forEach(AW,function(AY){for(var AZ in AY){if(AY.hasOwnProperty(AZ)&&!isNaN(AU(AZ))){AV=AY[AZ];AS="";AX=AV.forms[0];AV.cs=AX.cs;AV.rs=AX.rs;AV.headerID=AX.headerID;AV.idx=AX.idx;AV.o=AX.o;AV.tui=AX.tui;AV.ui=AX.ui;AV.um=AX.um;AV.stt=AX.stt;u.forEach(AV.forms,AT);AV.headerText=AS;}}});}function AG(AY,AT,AX){var AW,AV=0,AU,AS;if(AY&&AY.length>0){AS=AY.length;for(AW=0;AW<AS;AW++){AU=AY[AW];if(!AU.fcnt){AU.fcnt=AX?AU.cs:AU.rs;if(AU.otp===-1){AU.fcnt=1;}}if(AV+AU.fcnt>AT){return{depth:AW,formIndex:AT-AV};}AV+=AU.fcnt;}}return -1;}function k(AX,AT,AV){var AS=AT.length,AW=[],AZ,AY,AU;for(AU=0;AU<AS;AU++){AY=AT[AU];if(AY>=0&&AX.es[AY]){AZ=(AX.es[AY])[AV];}else{AZ="-1";}AW.push(AZ);}return AW;}function s(AS){if(!AS||AS.length===0){return undefined;}var AU={},AT,AV=AS.length;for(AT=0;AT<AV;++AT){AU[AS[AT]]=AT;}return AU;}function n(AV,AW){if(AW===null||AV<=0){return -1;}var AU=0;if(AV===1){AU=AW.children[0].levelIndex;}else{var AT=AW.children[0];var AS;for(AS=1;AS<AV;++AS){AT=AT.children[0];}AU=AT.levelIndex;}return AU;}function AN(AT,Ae,Ab){if(AT===null||AT.length===0||Ae===null||Ab===null){return null;}var AW=AT.length,Ad=AT[0],AU=Ae[Ad.index];if(AW===1){return AU;}var AZ,AV,AS={},Aa=[],AY=[AU],Ac=[];for(AZ=1;AZ<AW;++AZ){AS=AT[AZ];Aa=Ae[AS.index];AY.push(Aa);Ac=[];Ab.push(Ac);var AX=AS.index-Ad.index;AV=0;var Af=0;while(AV<=AU.mxIdx){AV=AF(AU,AV+1);if(AV===-1){break;}Ac[Af]=n(AX,AU[AV]);Af=AV;}Ac[Af]=Aa.mxIdx+1;Ad=AS;AU=Aa;}return AY;}function AJ(AS){AS=AS.replace(/\(/g,"-");AS=AS.replace(/\)/g,"");AS=AS.replace("$","");AS=AS.replace(/ /g,"");AS=AS.replace(/&nbsp;/g,"");AS=AS.replace(/,/g,"");if(isNaN(AS[0])){return AS.slice(1);}return AS;}function A(AX,AV,AU,AW){if(!this.items[AX]){I.visPrint("Cannot find data at index ("+AX+", "+AV+")");}var AY=this.items[AX][AV];if(AY===undefined){return null;}if(AY===""||AY.rv===""||AY.rv==="--"){return null;}if(AU===undefined||AU===true){if(AY.rv!==undefined){return B.parseNumeric(AY.rv);}var AT=B.parseNumeric(AJ(AY.v));if(isNaN(AT)){I.visPrint("NaN from GetDataInLocalDataSet");AJ(AY.v);}return AT;}if(AY.v!==undefined){return AY.v;}var AS=this.getMetricNumberFormat(AW);if(AW!==undefined){return J.formatByMask(AS,AY.rv);}return B.parseNumeric(AY.rv);}function Z(AT,AS,AV){if(!this.items[AT]){I.visPrint("Cannot find data at index ("+AT+", "+AS+")");}var AU=this.items[AT][AS];if(AU===""){return null;}return AU[AV];}function X(Ac,Ad,Ae,AT){var Ag=[],Ab=Ae.length,Aa,AY=Ac.length,AZ=[],Af,AX;for(Aa=0;Aa<Ab;Aa++){Af=Ae[Aa];AX=Af-Ad;if(AX>=0&&AX<=AY-1){Ag.push(Ac[AX]);AZ.push(AX);}}if(AT){var AV=AZ.length;var AS=0;var AW;for(Aa=0;Aa<AV;Aa++){AW=AZ[Aa];var AU=Ac.slice(AS,AW);AT.push(AU);AS=AW+1;}}return Ag;}function h(AY,Aa,AS,Ab,Ah,Ae){var AU=Aa.length,AX,AZ=[],AT,AV,Ac,Ag,AW=0,Ad,Af;for(AX=0;AX<AU;AX++){AT=Aa[AX];if(AX===AU-1){AV=AS;}else{AV=Aa[AX+1];}Ac=AV-AT;Ag=Ac/Ab;Ad=Ag;Af=[];while(Ad--){if(Ae){if(Ad===0){AZ.push(AY[AW]);}else{if(Ah){Af.push(AY[AW]);}}AW++;}else{Af.push(AY[AW]);AW++;}}if(Ah){Ah.push(Af);}}return AZ;}function w(AW,AY,Ac,AZ,AT,AU){var AV,AX=[],Ab,Aa;Ab=(AW||[]).length;Aa=[];if(AZ){for(AV=0;AV<Ab;AV++){var Ad=AW[AV];if(Ad&&Ad.length&&AT.indexOf(Ad[0].C)!==-1){AX.push(Ad);Ac.push(Aa);Aa=[];}else{Aa.push(AW[AV]);}}}else{var AS={};(AU||[]).forEach(function(Ae){AS[Ae/AY]=true;});for(AV=0;AV<Ab;AV++){if(AS[AV]&&AV!==0){Ac.push(Aa);Aa=[];Aa.push(AW[AV]);}else{Aa.push(AW[AV]);}}Ac.push(Aa);}return AX;}function AR(AZ,Aa,Ab){var AY=Ab.length,AX,AW,Ad,Ac=AZ.length,AS=0,AV=0,AU=[],AT;for(AX=0;AX<AY;AX++){Ad=Ab[AX];AW=Ad-Aa;if(AW>=0&&AW<=Ac-1){if(AW===0){continue;}AV=AW;AT=AZ.slice(AS,AV);AU.push(AT);AS=AV;}else{if(AW>Ac-1){break;}}}AT=AZ.slice(AS);AU.push(AT);return AU;}function AK(AS){return parseInt(AS,10)===AS;}function AQ(AW,AV,Ab,AU){var AX=0,AT,AY=AW.mxIdx,Aa=[],AS,AZ=AU===0?"rs":"cs";while(AX<=AY){AT=AW[AX];if(AT){AS=AT.forms[Ab];Aa.push(AS);AX+=AS[AZ]||1;}else{AX+=1;}if(AV>0&&AX>AV){break;}}return Aa;}function U(AS,AU){var AT;if(AU==="All"){return true;}AT=AS.dropzones;if(AT){if(AT.indexOf(AU)>=0){return true;}}return false;}function l(AS,AU,AT){if(AS.ui!==AT){if(AS.pHd){l(AS.pHd,AU);}}AU.push(AS);}function g(AX,AU,AW,AY){var AT,AS=this.gts,AV;if(!AU){return ;}if(AX==="all"||AX===undefined){if(AX===undefined){I.visPrint("zoneName use 'all' instead of undefined!");}l(AU,AW);return ;}if(AU.pHd){g.call(this,AX,AU.pHd,AW,AY);}AV=(AY==="row"?AS.row:AS.col);AT=AV[AU.ui];if(U.call(this,AT,AX)){AW.push(AU);}}function b(AS){return AS.textContent||AS.innerText||AS.nodeValue||"";}function e(AY,AS,AW){var AX=[],Ab,Aa,AV,AZ,AT,AU;for(AU=0;AU<AS.length;AU++){Ab=AS[AU];Aa=AY[Ab.ui];AT=Aa.id;AV=Aa.es[Ab.idx];AZ=AW.indexOf(AT);if(AZ>=0){AX[AZ]=Ab.idx;}}return AX;}function W(AZ,AS){var AY=[],Ab,Aa,AX,AU,AW=AS.length,AV,AT;for(AT=0;AT<AW;AT++){Ab=AS[AT];AX=Ab.forms.length;Aa=AZ[Ab.ui];for(AV=0;AV<AX;AV++){AU=Aa.es[Ab.forms[AV].idx];AY.push({unit:Aa,header:AU,o:Ab.o,tui:Ab.tui,dpt:Ab.tui+1});}}return AY;}function f(AS){return B.restoreSpecialChars(AS);}function C(AY,AX){var AV=false,AU,AT;if(AX){AU=AX.split("&");if(AU.length>1){AV=true;}}if(AY===undefined){var AS;if(AV){AS={};u.forEach(AU,function(AZ){AS[AZ]="";});}else{AS="";}return AS;}if(AX){if(AV){var AW={};u.forEach(AU,function(AZ){AT=AY[AZ];if(AT!==undefined&&typeof AT==="string"){AT=f(AY[AZ]);}AW[AZ]=AT;});return AW;}return f(AY[AX]);}return AY;}function z(Ae,AU,AT,Ab){var Ac=[],Ai,Ag,Af,AX,AW=AU.length,AY,AV,Aa;for(AV=0;AV<AW;AV++){Ai=AU[AV];if(Ai.stt===1){continue;}Aa=Ai.forms.length;Af=Ae[Ai.ui];AX=Af.es[Ai.idx];var AS;if(Ab===true){var Ah={forms:[]};Ac.push(Ah);AS=Ah;}else{AS=Ac;}var AZ=[];for(AY=0;AY<Aa;AY++){var Ad=Ai.forms[AY].idx;if(AZ[Ad]){AS.push("");continue;}else{AZ[Ad]=true;}if(Ad>=0){AX=Af.es[Ad];if(AT.length===1&&AX&&AX[AT]!==undefined){AS.push(C(AX,AT));}else{Ag=Ag||S.copy(Ai);S.copy(Ai.forms[AY],Ag);AX.tid=Af.id;AS.push(C(S.copy(AX,Ag),AT));}if(AY===Aa-1){Ag=null;}}else{AS.push("");}}}return Ac;}function AC(AX,AT,AS){var AW=[],Aa,AY,AV,AU,AZ=true;for(AU=0;AU<AT.length;AU++){Aa=AT[AU];AY=AX[Aa.ui];AV=AY.es[Aa.idx];if(C(AV,AS)!==""){AZ=false;}AW.push(C(AV,AS));}if(AZ){AW.push(C(AY,AS));}return AW;}function y(Ac,Ae){var AS=Ac.mxIdx,AW,Ad,AT=true,AU=false,Aa,Ab=-1,AZ,Af=null,AV;for(AW=0;AW<=AS;AW++){Ad=Ac[AW];if(Ad){if(AT){var AX=AF(Ac,AW+1);var AY=Ac[AX];if(AY.idx===Ad.idx){AU=true;}AT=false;if(AU===false){return ;}}AZ=Ad.idx;if(AZ!==Ab){if(Af){Af[Ae]=Aa;}Aa=1;Ab=AZ;Af=Ad;}else{delete Ac[AW];Aa++;}}}if(Af){Af[Ae]=Aa;}if(AU){for(AW=0;AW<=AS;AW++){if(Ac[AW]){AV=AW;}}Ac.mxIdx=AV;}}function r(AY,Ab){var AS=AY.mxIdx,AW,Aa,AX,AZ,AT,AV=this.getMetricCount(),AU=AV>0?AV:1;AT=(Ab==="cs");for(AW=0;AW<=AS;AW++){Aa=AY[AW];if(Aa){AX=Aa.forms[0];AZ=AX[Ab];if(!AZ){AZ=1;}if(AT){Aa.numLeaves=AZ/AU;}else{Aa.numLeaves=AZ;}Aa.levelIndex=AW;}}}function j(AZ,AS,Ac){var AT=AS.mxIdx,Aa=0,AU,Ab,AX,AY,Ad,AV,AW;for(AW=0;AW<=AT;AW++){AU=AS[AW];Ab=AU&&AU.forms[0];if(AU){while(true){Aa=AF(AZ,Aa);Ad=AZ[Aa];if(AZ.isCustomGroupWithBanding){AV=Ad.forms[1];}else{AV=Ad.forms[0];}if(!Ad.children){Ad.children=[];}AX=AV[Ac];if(!AX){AX=1;}AY=Ab[Ac];if(!AY){AY=1;}if(AV.o<=Ab.o&&(AV.o+AX)>=(Ab.o+AY)){AU.pHd=Ad;AU.pHdIdx=Aa;Ad.children.push(AU);break;}else{Aa++;}}}}}function T(AW){var AV,AS,AX=[],AU,AT,AY={};for(AV in AW){AT=AW[AV].token;if(AT){AS=AT.elements;AU=AS.join();if(AY[AU]===undefined){AY[AU]=true;AX.push(AW[AV]);}}else{AX.push(AW[AV]);}}return AX;}function D(AX,AV){var AS=AX.mxIdx,AY=0,AW,AT,AZ=AV==="r"?"rs":"cs",AU,Ab,Aa;while(AY<=AS){Ab=AX[AY];if(!Ab){AY+=1;continue;}AT=Ab.forms[0].o;Aa=Ab.forms[0][AZ]||1;if(Aa>1){AW=AY+(Ab.forms[1][AZ]||1);while(AW<Aa+AT){if(AX[AW]){AU=AX[AW].forms[0][AZ]||1;AX[AW].forms.splice(0,0,Ab.forms[0]);AW+=AU;}else{AW+=1;}}}AY+=Aa;}}var N=mstrmojo.declare(mstrmojo.Obj,null,{grpCnt:-1,srsCnt:-1,dps:null,gmm:null,getChartInfo:function(){return this.gmm.getChartInfo();},getTooltipForChartHeader:function(Aa,AV,Ac){var AX=this.gmm,Ab=AX.gmCtr,AY=Ab.rowHeaderCnt,AW=Ab.colHeaderCnt,AT,AZ,AU=AV==="r",AS;if(AU){if(AY===0){return ;}if(Aa.length>0){if(!Ac){Aa.push(null);}}AT=AY;AZ=AX.getRowTitleInfo();AS=this.getRowHeaders(0,"Rows","n&id&dei&o&at&idx");}else{if(AW===0){return ;}if(Aa.length>0){if(!Ac){Aa.push(null);}}AT=AW;AZ=AX.getColTitleInfo();AS=this.getColHeaders(0,"Columns","n&id&dei&o&at&idx");}B.generateToolTipContent(0,AT,AU,AZ,AS,Aa);},getColorByValue:function(Ah,Ag,Ac,AZ){var AT=this.gmm,Am=AT.gmCtr,Ai=Am.view.model.docModel,Ae=AT.globalAttrMetricsColorMap,An=AT.colorType,AW,Af,Aj=Am.palette,Aa=Aj.length,Ad=AT.attrMetricsColorMapIDMap,AX,AU,Ak,AS=Am.thresholds,AY,AV,Ab=AT.metricsColorMapID;if(AZ===undefined){AZ=true;}if(An===AL.METRICS){AY=Am.getColorByMetrics()[0];AV=this.getAssoCoordinatesWithMetricIndex(Ah,[Ag],AY);AU=this.getPropValue(Ah,AV.C-this.getOffsetX(),"ti");if(AU!==undefined){AU=parseInt(AU,10)-1;Ak=AS[AU];return(Ak.fmt&&Ak.fmt.bc)?mstrmojo.VisUtility.parseCSSColor(Ak.fmt.bc,true):Am.property.defaultsObj.shpFillClr;}if(AZ){return Am.property.defaultsObj.shpFillClr;}else{return null;}}else{if(An===AL.NULL){return null;}}AW=this.getColorByToken(Ah,Ag,Ac);if(An===AL.METRICS_ITEM){AX=Ab.indexOf(AW);}else{AX=Ad&&Ad[AW];}if(AX===undefined||AX<0){return null;}if(Am.globalColorMapping){var Al=Ae[AX];Af=Al&&Ai.getColorBy(Al.levels,Al.elements).color;}else{Af=Aj[AX%Aa];}return Af;},getColorByToken:function(Ah,Ag,Ac){var AU=this.gmm,Aj=AU.gmCtr,Al=AU.colorType,Aa=Aj.getRowColorAttrsIndex(),Af=Aj.getColColorAttrsIndex(),Ak=[],Ae,Ai,AZ,Ad,AW,AX,AS,Ab,AT;if(Al===AL.METRICS_ITEM){Ad=AU.getMetricCount();if(Ad>0){if(Ac&&Ac.length>0){u.forEach(Ac,function(Am){AS=(AU.getMetricIds())[Am];Ak.push(AS);});AW=Ak.join(AP);return AW;}AZ=Ag%Ad;AS=(AU.getMetricIds())[AZ];return AS;}I.visPrint("metric count is zero!!");return"";}if(Al===AL.ATT||Al===AL.ATT_METRICS){Ai=Aa.length;if(Ai>0){Ab=this.getHeaderObjectList(Ah,0,"all");}for(Ae=0;Ae<Ai;Ae++){AX=Aa[Ae];Ak[AX.order]=Ab[AX.index];}Ai=Af.length;if(Ai>0){AT=this.getHeaderObjectList(Ag,1,"all");}for(Ae=0;Ae<Ai;Ae++){AX=Af[Ae];Ak[AX.order]=AT[AX.index];}}else{I.visPrint("Unsupported Color By Type!");}Ai=Ak.length;for(Ae=0;Ae<Ai;Ae++){Ak[Ae]=Ak[Ae].idx;}if(Al===AL.ATT_METRICS&&Ac){var AV=Ac.length,AY;for(AY=0;AY<AV;AY++){AZ=Ac[AY];AS=(AU.getMetricIds())[AZ];Ak.push(AS);}}AW=Ak.join(AP);return AW;},getHeaderObjectList:function c(AX,AU,AZ){var AW=this.gmm,Aa=AW.modelRhs,AY=AW.modelChs,AV=[],AT,AS;if(AU===0){AS=(Aa[Aa.length-1]);if(AS){AT=AS[AX+this.oy];g.call(AW,AZ,AT,AV,AU===0?"row":"col");}}else{AS=(AY[AY.length-1]);if(AS){AT=AS[AX+this.ox];g.call(AW,AZ,AT,AV,AU===0?"row":"col");}}return AV;},getRowHeaders:function q(AW,AZ,Ad){var AY,Ab=[AW,AZ,Ad].join(":");if(this.rowHeaderPool===undefined){this.rowHeaderPool={};}AY=this.rowHeaderPool;if(AY[Ab]){return AY[Ab];}var AX=this.gmm,Ac=AX.modelRhs,AU=[],Aa,AV,AT,AS=(Ac[Ac.length-1]);if(AS){AT=AS[AW+this.oy];g.call(AX,AZ,AT,AU,"row");Aa=this.gmm.gts.row;AV=z(Aa,AU,Ad);}AY[Ab]=AV;return AV;},getColHeaders:function v(AW,AZ,Ad){var Ac,Ab=[AW,AZ,Ad].join(":");if(this.colHeaderPool===undefined){this.colHeaderPool={};}Ac=this.colHeaderPool;if(Ac[Ab]){return Ac[Ab];}var AX=this.gmm,AY=AX.modelChs,AU=[],Aa,AV,AT,AS=AY[AY.length-1];if(AS){AT=AS[AW+this.ox];g.call(AX,AZ,AT,AU,"col");Aa=this.gmm.gts.col;AV=z(Aa,AU,Ad||"n");}Ac[Ab]=AV;return AV;},getSeriesLabel:function p(Ab,AZ,Af){var AW,Ac=this.gmm,Aa,AX=[],Ag=null,AT=false,AV=this.getChartInfo(),AU=AD.EnumABLDirection,AY=AV.tp,Ad=o,AS;if(AV.isABL&&AV.dirc===AU.VERTICAL){AT=true;}else{if(AV.isABL&&AV.dirc===AU.HORIZONTAL){AT=false;}else{if(AY===Ad.BUBBLE||AY===Ad.SCATTER){AT=true;}else{if(AY===Ad.GRID){AT=true;}else{I.visPrint("need to be implemented for this chart type!");}}}}if(AT){var Ah=this.gmm.modelRhs;if(!Ah||Ah.length===0){return[];}AS=(Ah[Ah.length-1]);if(AS){AW=AS[Ab+this.oy];g.call(Ac,"YAxis",AW,AX,"row");Ag=this.gmm.gts.row;if(Af===true){Aa=W(Ag,AX);}else{Aa=z(Ag,AX,"n");}}}else{var Ae=this.gmm.modelChs;if(!Ae||Ae.length===0){return[];}AS=(Ae[Ae.length-1]);if(AS){AW=AS[this.ox+AZ];g.call(Ac,"XAxis",AW,AX,"col");Ag=this.gmm.gts.col;if(Af===true){Aa=W(Ag,AX);}else{Aa=z(Ag,AX,"n");}}}return Aa;},getGroupElementIndexArray:function(Aa,AZ,Ac){var AX,Af,Ab=this.gmm,AU=Ab.clusteredBarSpecialCase,AY=[],Ae=null,AT=false,AW=this.getChartInfo(),AV=AD.EnumABLDirection,AS;if(AU){return[-1];}if(AW.isABL&&AW.dirc===AV.VERTICAL){AT=true;}else{if(AW.isABL&&AW.dirc===AV.HORIZONTAL){AT=false;}}if(AT){var Ad=this.gmm.modelChs;if(!Ad||Ad.length===0){return[];}AS=(Ad[Ad.length-1]);if(AS){AX=AS[this.ox+AZ];g.call(Ab,"XAxis",AX,AY,"col");Ae=this.gmm.gts.col;Af=e(Ae,AY,Ac);}}else{var Ag=this.gmm.modelRhs;if(!Ag||Ag.length===0){return[];}AS=(Ag[Ag.length-1]);if(AS){AX=AS[this.oy+Aa];g.call(Ab,"YAxis",AX,AY,"row");Ae=this.gmm.gts.row;Af=e(Ae,AY,Ac);}}return Af;},getGroupLabel:function AM(Aj,Ai,AX){var Af,Ad,AU=this.gmm,AY=AU.clusteredBarSpecialCase,AS=[],Ae=null,AT=false,Ab=this.getChartInfo(),Aa=AD.EnumABLDirection,Ak=Ab.tp,AV=o,Al=AU.getMetricCount(),AW;if(AY){if(AX===true){var Ah,Ac=[];for(Ah=0;Ah<Al;Ah++){Ac.push({isAtt:false});}return Ac;}return[AU.getMetricNames()[Ai%Al]];}if(Ab.isABL&&Ab.dirc===Aa.VERTICAL){AT=true;}else{if(Ab.isABL&&Ab.dirc===Aa.HORIZONTAL){AT=false;}else{if(Ak===AV.BUBBLE||Ak===AV.SCATTER){AT=true;}else{if(Ak===AV.GRID){AT=true;}else{I.visPrint("need to be implemented for this chart type!");}}}}if(AT){var AZ=this.gmm.modelChs;if(!AZ||AZ.length===0){return[];}AW=(AZ[AZ.length-1]);if(AW){Af=AW[this.ox+Ai];g.call(AU,"XAxis",Af,AS,"col");Ae=this.gmm.gts.col;if(AX===true){Ad=W(Ae,AS);}else{Ad=z(Ae,AS,"n");}}}else{var Ag=this.gmm.modelRhs;if(!Ag||Ag.length===0){return[];}AW=(Ag[Ag.length-1]);if(AW){Af=AW[this.oy+Aj];g.call(AU,"YAxis",Af,AS,"row");Ae=this.gmm.gts.row;if(AX===true){Ad=W(Ae,AS);}else{Ad=z(Ae,AS,"n");}}}return Ad;},checkExcluded:function(AV,AU){var AX=this.gmm.getMetricCount(),AW=false,AS;for(AS=0;AS<AX;AS++){var AT=this.getData(AV,AU,true,AS);if(AT!==""&&AT!==undefined&&AT!==null&&!isNaN(AT)){AW=true;break;}}return !AW;},getData:function(AV,AT,AS,AU){var AW=this.getChartInfo();if((AW.tp===o.GRID)&&!AW.isPie){return 1234;}return A.call(this,AV,AT,AS,AU);},getPropValue:function(AT,AS,AV){var AU=this.getChartInfo();if(AU.tp===o.GRID&&AV===undefined){return 1234;}return Z.call(this,AT,AS,AV);},getAssoDataWithMetricIndex:function(AS,AW,AV,AU){var AY=this.gmm.getMetricCount(),AT=AW[0],AX=Math.floor(AT/AY)*AY;return A.call(this,AS,AX+AV,AU,AV);},getAssoCoordinatesWithMetricIndex:function(AS,AX,AW){var AZ=this.gmm.getMetricCount(),AV=this.getOffsetX(),AU=this.getOffsetY(),AT=AX[0],AY=0;if(AZ>0){AY=Math.floor(AT/AZ)*AZ;}else{AY=AT;}return{R:AS+AU,C:AY+AW+AV,ox:AV,oy:AU};},getSizeByMetricIndexForBubble:function V(AW,Ab){var AZ,Aa=this.gmm,Ac=Aa.gmCtr,AV=Ac.getSizeByMetrics(),AU=Aa.getMetricCount(),Ad,AY,AX,AT,AS;if(AV.length<=0){return -1;}if(this.splitPlottingMetrics){Ad=Ab[1];AY=Ad%AU;AS=Ac.getMetricsOnYAxis();AX=AS.indexOf(AY);AZ=AV[AX%AV.length];}else{Ad=Ab[0];AY=Ad%AU;AT=Ac.getMetricsOnXAxis();AX=AT.indexOf(AY);if(AX===-1){I.visPrint("have no size by for this metric");return -1;}AZ=AV[AX%AV.length];}return AZ;},getSizeByData:function AB(AZ,Af){var Ac,Ae=o,AW=AD.EnumABLDirection,Ad=this.gmm,Ah=Ad.gmCtr,AY=Ah.getSizeByMetrics(),AV=this.getChartInfo(),AX=Ad.getMetricCount(),Ag,AT,Ab,Aa,AU,AS;if(AV.tp!==Ae.BUBBLE){if((AV.isABL&&AV.dirc===AW.VERTICAL)||AV.tp===Ae.GRID){if(AY.length>0&&AX>0){Ac=AY[0];Ag=Af[0];AT=Math.floor(Ag/AX)*AX;return A.call(this,AZ,AT+Ac);}return -1;}if(AV.isABL&&AV.dirc===AW.HORIZONTAL){if(AY.length>0&&AX>0){Ac=AY[0];Ag=Af[0];AT=Math.floor(Ag/AX)*AX;return A.call(this,AZ,AT+Ac);}return -1;}}else{if(AY.length<=0){return -1;}if(this.splitPlottingMetrics){Ag=Af[1];Ab=Ag%AX;AT=Math.floor(Ag/AX)*AX;AS=Ah.getMetricsOnYAxis();Aa=AS.indexOf(Ab);Ac=AY[Aa%AY.length];}else{Ag=Af[0];Ab=Ag%AX;AT=Math.floor(Ag/AX)*AX;AU=Ah.getMetricsOnXAxis();Aa=AU.indexOf(Ab);if(Aa===-1){I.visPrint("have no size by for this metric");return -1;}Ac=AY[Aa];}return A.call(this,AZ,AT+Ac);}},getMetricNumberFormat:function(AT){var AS=this.gmm;return AS.getMetricNumberFormat(AT);},printAll:function(){I.visPrint("-----------------------("+this.cri+","+this.cci+")+------------------------------");var AT,AS;for(AT=0;AT<this.ht;AT++){var AU="";for(AS=0;AS<this.wd;AS++){var AV=this.items[AT][AS];if(!AV.v){I.visPrint("Why!");}AU+=(AV.v+" ");}I.visPrint(AU);}},getASingleColumn:function(AY,AZ){var AV=AY+AZ,AX=[],AT=this.ox,AS=this.oy,AW,AU;for(AW=0;AW<this.ht;AW++){for(AU=0;AU<this.wd;AU++){if(AU===AV){AX.push({R:AW+AS,C:AU+AT,mIdx:AZ});if(AK(AU+AT)===false){I.visPrint("warning");}}}}},getGraphCellSingleColumn:function(AS,AV,AW){var Ab=AV.length,AZ=[],AU=this.ox,AT=this.oy,AY,AX,Ac,Aa;for(AY=0;AY<this.ht;AY++){Ac=[];for(AX=0;AX<Ab;AX++){Aa=AV[AX];Ac.push({R:AY+AT,C:AS+Aa+AU,mIdx:Aa,grp:AW,didx:AX});if(AK(AS+Aa+AU)===false){I.visPrint("warning");}}AZ.push(Ac);}return AZ;},getGraphCellSingleRow:function(AW,AX){var AU=this.gmm.getMetricCount(),Af=this.items[AX],Aa=Af.length/AU,Ad=AW.length,Ab=[],AV=this.ox,AT=this.oy,AZ,AY,Ac,AS,Ae;for(AZ=0;AZ<Aa;AZ++){AS=AZ*AU;Ae=[];for(AY=0;AY<Ad;AY++){Ac=AW[AY];Ae.push({R:AX+AT,C:AS+Ac+AV,mIdx:Ac,grp:AX,didx:AY});if(AK(AS+Ac+AV)===false){I.visPrint("warning");}}Ab.push(Ae);}return Ab;},getGroupCount:function(){if(this.grpCnt>0){return this.grpCnt;}var AX,AT=this.getChartInfo(),AV=AT.tp,AU=AD.EnumABLDirection,AW=o,AY=this.gmm,AS=AY.clusteredBarSpecialCase,AZ=this.gmm.getMetricCount();if(AT.isABL&&AT.dirc===AU.VERTICAL){if(AS){AX=this.pmi.length;}else{if(AZ===0){AX=this.wd;}else{AX=this.wd/AZ;}}this.grpCnt=AX;return AX;}if(AT.isABL&&AT.dirc===AU.HORIZONTAL){if(AS){AX=this.pmi.length;}else{AX=this.items.length;}this.grpCnt=AX;return AX;}if(AV===AW.BUBBLE||AV===AW.SCATTER){if(!this.splitPlottingMetrics){var Aa=this.pmi;AX=Aa.length;this.grpCnt=AX;return AX;}AX=1;this.grpCnt=AX;return AX;}if(AV===AW.GRID){if(AZ===0){return this.wd;}return this.wd/AZ;}I.visPrint("LocalDataSet::getGroupCount for this type is not implemented");return 0;},getSeriesCount:function(){if(this.srsCnt>0){return this.srsCnt;}var AZ=this.getChartInfo(),AY=AD.EnumABLDirection,AV=o,AU,AT=this.gmm,AX=AT.clusteredBarSpecialCase,AW=AT.getMetricCount(),AS;if(AZ.isABL&&AZ.dirc===AY.VERTICAL){if(AX){AS=this.ht;}else{if(!this.splitPlottingMetrics){AS=this.ht*this.pmi.length;}else{AS=this.ht;}}}else{if(AZ.isABL&&AZ.dirc===AY.HORIZONTAL){if(AX){AS=this.ht;}else{if(AW===0){AU=this.wd;}else{AU=this.wd/AW;}if(!this.splitPlottingMetrics){AS=AU*this.pmi.length;}else{AS=AU;}}}else{if(AZ.tp===AV.BUBBLE||AZ.tp===AV.SCATTER){if(!this.splitPlottingMetrics){AS=this.ht;}else{AS=this.ht;}}else{if(AZ.tp===AV.GRID){if(this.items){AS=this.items.length;}else{AS=1;}}else{AS=0;I.visPrint("LocalDataSet::getSeriesCount for this type is not implemented");}}}}this.srsCnt=AS;return AS;},getDataInGroup:function(AX,Av,Ae){var Ap,Ar,Ay,At,As,Al=this.getChartInfo(),Aj=AD.EnumABLDirection,Ac=o,Au=Al.isPie,AY=this.gmm,Aw=AY.gmCtr,Aa=Aw.onlyMetricNamesOnAxisForGridPie,An=Aw.hasTotalForPie(),AU,Ag,Ai,AW,Ah,Ao,AV,AZ,Af,Aq,Am,Ax,Ad=false,AT=Aw.totalStartCols,Ak=Aw.piePartition;if(Al.tp===Ac.BUBBLE||Al.tp===Ac.SCATTER){AZ=this.splitPlottingMetrics;Af=AY.getMetricCount();if(Af===0){Af=1;}Ap=[];Aq=this.wd/Af;for(At=0;At<Aq;At++){Ax=At*Af;Am=AX;if(AZ){Am=0;}Ay=this.getGraphCellSingleColumn(Ax,Av[Am],AX);if(Au){if(!An){Ag=[];AU=AR(Ay,this.oy,Aw.piePartition);Ai=AU.length;for(As=0;As<Ai;As++){AV=mstrmojo.hash.clone(AU[As][0]);AV.fakeTotal=true;Ag.push(AV);}}else{AU=[];Ag=X(Ay,this.oy,Aw.totalRows,AU);Ai=AU.length;}for(As=0;As<Ai;As++){Ag[As].slicesOfPie=AU[As];}Ap=Ap.concat(Ag);}else{Ap=Ap.concat(Ay);}}return Ap;}if((Al.isABL&&Al.dirc===Aj.VERTICAL)||(Al.tp===Ac.GRID)){Ap=[];var Ab=this.wd/this.getGroupCount();Ax=Ab*AX;Ar=Av.length;if(Ar===0&&(Al.tp===Ac.GRID)&&Au){Ar=1;Ad=true;}for(At=0;At<Ar;At++){if(Aa){Ay=this.getGraphCellSingleColumn(Ax,[Ae],AX);}else{if(Ad){Ay=this.getGraphCellSingleColumn(Ax,[0],AX);}else{Ay=this.getGraphCellSingleColumn(Ax,Av[At],AX);}}if(Au){if(!An){Ag=[];AU=AR(Ay,this.oy,Aw.piePartition);Ai=AU.length;for(As=0;As<Ai;As++){AV=mstrmojo.hash.clone(AU[As][0]);AV.fakeTotal=true;Ag.push(AV);}}else{AU=[];Ag=X(Ay,this.oy,Aw.totalRows,AU);Ai=AU.length;}for(As=0;As<Ai;As++){Ag[As].slicesOfPie=AU[As];}Ap=Ap.concat(Ag);}else{Ap=Ap.concat(Ay);}}return Ap;}if(Al.isABL&&Al.dirc===Aj.HORIZONTAL){Ap=[];Ar=Av.length;for(At=0;At<Ar;At++){Ay=this.getGraphCellSingleRow(Av[At],AX);if(Au){if(!An){AW=[];Ah=w(Ay,AY.getMetricCount(),AW,false,AT,Ak);Ao=AW.length;for(As=0;As<Ao;As++){var AS=mstrmojo.hash.clone(AW[As][0]);AS.fakeTotal=true;Ah.push(AS);}}else{AW=[];Ah=w(Ay,AY.getMetricCount(),AW,true,AT,Ak);Ao=AW.length;}for(As=0;As<Ao;As++){Ah[As].slicesOfPie=AW[As];}Ap=Ap.concat(Ah);}else{Ap=Ap.concat(Ay);}}return Ap;}I.visPrint("LocalDataSet::getDataInGroup for this type is not implemented");},getMaxValue:function(){return 9999;},getMinValue:function(){return -9999;},getRowCount:function(){return this.ht;},getColumnCount:function(){return this.wd;},getOffsetX:function(){return this.ox;},getOffsetY:function(){return this.oy;},getMetrics:function(){var AS=this.gmm.metrics;if(!AS){I.visPrint("none metrics found!");return null;}return AS;},getMetric:function(AT){var AS=this.getMetrics();if(AS){if(AS.es.length>AT){return AS.es[AT];}return null;}return null;},clearDataProviders:function(){this.dps=null;},generateDataProvider:function K(){if(this.dps){return this.dps;}var AS=this.gmm,AV,Ap,Ax,Ar,Ah,Aq,Aj,An,Ak,Ai=this.trConfigPool,Au=AS.gmCtr,AZ,Aw=this,Av=AS.shallWeUseGroupInfo,Aa=AS.clusteredBarSpecialCase,AU=AS.onlyMetricNamesOnAxisForGridPie,As=AS.isMetricNamesOnXAxis,AT=this.splitPlottingMetrics,Ad=this.getChartInfo(),AX=o,Ab=AD.EnumABLDirection,Ac=this.metricsOnAngleBy,Ae=this.mpos,Al=this.metrics,Ag=0,Am=0,Ao=this.splitPie,At=AS.isBlankGrid;if(Ai){var Af=Ai.globalProp;if(Af){Ag=Af.trdBwdFst!==undefined?Af.trdBwdFst:0;Am=Af.trdFwdFst!==undefined?Af.trdFwdFst:0;}}if(Av){AZ=Au.getGroupInfo(true);}Ah=this.getGroupCount();if(Ad.tp===AX.BUBBLE||Ad.tp===AX.SCATTER){Ap=this.pmi;Ax=[];if(!AT){Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,Ap);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:Ap,data:Ar,lds:this,sbc:true,dataSbc:false,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);this.dps=Ax;}else{for(Ak=0;Ak<Ap.length;Ak++){AV=Ap.slice(Ak,Ak+1);Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,AV);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:this,sbc:true,dataSbc:false,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);}this.dps=Ax;}u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});return Ax;}if(Ad.isABL&&Ad.dirc===Ab.VERTICAL){Ap=this.pmi;Ax=[];if(!AT){Ar=[];if(Aa){for(An=0;An<Ah;An++){Aq=this.getDataInGroup(0,Ap.slice(An,An+1));Ar.push(Aq);}}else{for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,Ap);Ar.push(Aq);}}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:Ap,data:Ar,lds:this,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);this.dps=Ax;u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});}else{if(Av){u.forEach(AZ,function(Ay){AV=[];u.forEach(Ay,function(Az){if(Az!==undefined&&Az>=0){AV.push([Az]);}});Ar=[];for(An=0;An<Ah;An++){Aq=Aw.getDataInGroup(An,AV);Ar.push(Aq);}Aj=Aw.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:Aw,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);});}else{for(Ak=0;Ak<Ap.length;Ak++){AV=Ap.slice(Ak,Ak+1);Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,AV);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:this,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);}}this.dps=Ax;u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});}return Ax;}if(Ad.isABL&&Ad.dirc===Ab.HORIZONTAL){Ap=this.pmi;Ax=[];if(!AT){Ar=[];if(Aa){for(An=0;An<Ah;An++){Aq=this.getDataInGroup(0,Ap.slice(An,An+1));Ar.push(Aq);}}else{for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,Ap);Ar.push(Aq);}}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:Ap,data:Ar,lds:this,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);this.dps=Ax;u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});}else{if(Av){u.forEach(AZ,function(Ay){AV=[];u.forEach(Ay,function(Az){if(Az!==undefined&&Az>=0){AV.push([Az]);}});Ar=[];for(An=0;An<Ah;An++){Aq=Aw.getDataInGroup(An,AV);Ar.push(Aq);}Aj=Aw.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:Aw,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);});}else{for(Ak=0;Ak<Ap.length;Ak++){AV=Ap.slice(Ak,Ak+1);Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,AV);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMEnhancedDataProvider({fwdSteps:Am,bwdSteps:Ag,pmi:AV,data:Ar,lds:this,sbc:true,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao}));Ax.push(Aj);}}this.dps=Ax;u.forEach(Ax,function(Az){var A0=Az.fwdLbs,Ay=Az.bwdLbs;if(A0&&A0.length>0){Aw.flb=A0;}if(Ay&&Ay.length>0){Aw.blb=Ay;}});}return Ax;}if(Ad.tp===AX.GRID){Ap=this.pmi;Ax=[];if(!AT){Ar=[];var AW,AY;for(An=0;An<Ah;An++){if(AU){AW=[];AY=[];u.forEach(Ac||[],function(Ay){Aq=this.getDataInGroup(An,Ap,Ay);AW.push(Aq);},this);if(As){Ar=Ar.concat(AW);}else{u.forEach(AW||[],function(Ay){AY=AY.concat(Ay);});Ar.push(AY);}}else{Aq=this.getDataInGroup(An,Ap);Ar.push(Aq);}}if(AU){Ao=false;}Aj=this.addDisposable(new AD.GMDataProvider({pmi:Ap,data:Ar,lds:this,sbc:false,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:Ac,splitPie:Ao,isBlankGrid:At}));Ax.push(Aj);this.dps=Ax;}else{for(Ak=0;Ak<Ap.length;Ak++){AV=Ap.slice(Ak,Ak+1);Ar=[];for(An=0;An<Ah;An++){Aq=this.getDataInGroup(An,AV);Ar.push(Aq);}Aj=this.addDisposable(new AD.GMDataProvider({pmi:AV,data:Ar,lds:this,sbc:false,dataSbc:true,metrics:Al,mpos:Ae,metricsOnAngleBy:AV[0],splitPie:Ao,isBlankGrid:At}));Ax.push(Aj);}this.dps=Ax;}return Ax;}I.visPrint("generateDataProvider Need to be implemented!");}});mstrmojo.gm.GMDataModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMDataModel",gmCtr:undefined,modelChs:[],modelRhs:[],rp:null,cp:null,gts:null,rct:-1,cct:-1,cir:-1,cic:-1,ldss:[],plottingMetricsIndex:null,splitPlottingMetrics:null,zoneNames:["dummy","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],metrics:null,chtInfo:null,colorType:AL.ATT,metricsType:undefined,getBreakByUnits:function(){var AS=this.dz,AT=[],AU,AV=AS.BreakBy;if(AV){AU=AV.TemplateUnit;if(AU){u.forEach(AU,function(AW){AT.push(S.clone(AW));});}}return AT;},getChartInfo:function(){return this.gmCtr.getChartInfo();},getMetricNames:function(){return this.getMetricProp("n");},getMetricIds:function(){return this.getMetricProp("oid");},getFullNumberFormat:function(){return this.fullNf;},isMetricInZone:function(AY,AU){var AT=this.dz,AX,AV=false,AW,AS;AX=this.zoneNames[AU];if(AT&&AX){AS=AT[AX];AW=AS.TemplateMetric;u.forEach(AW,function(AZ){if(AZ.idx===AY){AV=true;}});}return AV;},getMetricProp:function(AY){var AW=[],AV,AU,AT=this.metrics,AX;if(!AT){return AW;}AX=AT.es;AU=AX.length;for(AV=0;AV<AU;AV++){var AS=AX[AV];if(AY){AW.push(AS[AY]);}else{AW.push(AS);}}return AW;},getUnitAttributesCountOnRow:function(AW){var Aa=this.gts.row,AY=Aa.length,AX=this.gmCtr,Ab,AT,AV,AU,AS=this.getChartInfo(),AZ=0;if(AY!==1){if(AW){u.forEach(Aa,function(Ac){AZ+=B.getAttributeFormCnt(Ac);});}else{AZ=AY;}return AZ;}if(AW){Ab=AX.getGMHeaderCount("Rows");AT=AX.getGMHeaderCount("YAxis");AV=AX.getGMHeaderCount("BreakBy");AU=AX.getGMHeaderCount("SliceBy");}else{Ab=AX.getAttributesOnDropZone("Rows","n").length;AT=AX.getAttributesOnDropZone("YAxis","n").length;AV=AX.getAttributesOnDropZone("BreakBy","n").length;AU=AX.getAttributesOnDropZone("SliceBy","n").length;}if(AS.isABL&&AS.dirc===AD.EnumABLDirection.HORIZONTAL){return Ab+AT;}return Ab+AV+AT+AU;},getUnitAttributesCountOnCol:function(AW){var AV,AT,AY=this.gts.col,AX=0;AT=AY.length;var AS=this.gts.col[AT-1];if(AS&&AS.otp===-1){AX=AT-1;}else{AX=AT;}if(AW){var AU=0;for(AV=0;AV<AX;AV++){AU+=B.getAttributeFormCnt(AY[AV]);}return AU;}else{return AX;}},getPathToHeaderObject:function(AV,AT,AX){var AU=[],AS,AW;l(AT,AU);if(AV===0){AW=this.gts.row;}else{AW=this.gts.col;}AS=z(AW,AU,AX);return AS;},collectHeaderObj:function(AS,AU,AT){l.call(this,AS,AU,AT);},getMetricCount:function(){var AS=this.metrics;if(!AS){return 0;}return(AS.es?AS.es.length:0);},getMetricNumberFormat:function(AS){var AU=this.mx,AT=AU[AS];if(AU&&AT){return f(AT.numfmt);}return undefined;},init:function AI(AW){this.ldss=[];this.modelChs=[];this.modelRhs=[];this._super(AW);this.cir=this.cp.length;this.cic=this.rp.length;var AV,AU,AX=this.gts.row.length,AT=this.gts.col.length;var AS=this.gts.col[AT-1];this.mpos=-1;if(AS&&AS.otp===-1){this.metrics=AS;this.mpos=AT-1;if(this.gmCtr&&this.gmCtr.view&&this.gmCtr.view.excludeData){this.metrics.es=this.mx;u.forEach(this.metrics.es,function(AY){if(AY.did&&!AY.oid){AY.oid=AY.did;}});}}for(AV=0;AV<AX;AV++){this.modelRhs.push({});}for(AU=0;AU<AT;AU++){this.modelChs.push({});}this.createPlottingMetricsIndex();},createLocalDataSet:function M(Ad,Ac){var Af=this.gmCtr,Ah=Af.getChartInfo(),AZ=Af.getMetricsOnAngleBy(),AY=this.rp,AU=this.cp,AT=this.rct,Aj=this.cct,AS=this.ldss,AV,Ai,Aa;var AX=-1;var Ag=-1;if(Ac===AU.length-1){AX=Aj-AU[Ac];}else{AX=AU[Ac+1]-AU[Ac];}if(Ad===AY.length-1){Ag=AT-AY[Ad];}else{Ag=AY[Ad+1]-AY[Ad];}if(Ag===0){Ag=1;}if(AX===0){AX=1;}var AW=this.addDisposable(new N({trConfigPool:this.trConfigPool,cri:Ad,cci:Ac,ox:AU[Ac],oy:AY[Ad],wd:AX,ht:Ag,gmm:this,pmi:this.plottingMetricsIndex,metrics:this.metrics,mpos:this.mpos,splitPlottingMetrics:this.splitPlottingMetrics,metricsOnAngleBy:AZ,splitPie:Af.splitPiesInGraphCellForABL()}));AS[this.cir*Ad+Ac]=AW;this.feedLds(Ad,Ac);if(Ah.isABL){AW.fses={};AW.bses={};AW.xvar={};Ai=this.getMetricCount();for(AV=0;AV<Ai;AV++){Aa=Af.getTrendLinesObjectForMetric(AV,Ad,Ac,undefined,true)[0];if(Aa&&Aa.inChartModel[0]){var Ae=Aa.inChartModel,Ab=Aa["x-vars"];if(Ab&&Ab.length>0){AW.validXVar=Ab;}u.forEach(Ae,function(Al){var Am=Al.fse,Ak=Al.bse;if(Am&&Am.length>0){AW.validFse=Am;}if(Ak&&Ak.length>0){AW.validBse=Ak;}});}}}},feedLds:function G(AZ,AY){var Ah=this.gmCtr,Ac=Ah.firstRes,AT=Ac.gvs,AU=AT.items,Ag=this.dataRect,Ab=this.ldss,Aa=this.rp,Af=this.cp,AW=this.rct,AS=this.cct,Ad,Ae=Ab[AZ*this.cir+AY],AV,AX;if(!AU||Aa[AZ]===undefined||Af[AY]===undefined||Aa[AZ]>Ag.y+Ag.h||Af[AY]>Ag.x+Ag.w){return ;}AV=AU.slice(Aa[AZ],(Aa[AZ+1]||AW));Ad=[];for(AX=0;AX<AV.length;AX++){Ad.push(AV[AX].items.slice(Af[AY],(Af[AY+1]||AS)));}Ae.items=Ad;},feedLdss:function AE(AS,AV,AT,AU){this.dataRect={x:AS,y:AV,w:AT,h:AU};},feedChs:function AH(Aj){var An,Ak,Ag,Ab=this.modelChs,Af=Aj.items,As=Af.length,AZ=this.getUnitAttributesCountOnCol(),Aq=this.gts.col,AT,Al,AW,Ai,Am,Ae,Ad,Ar=false,AV;for(An=0;An<As;An++){AT=AG(this.gts.col,An,false);Al=AT.depth;Ad=this.gts.col[Al];Ae=Al;Ag=Ab[Al];AW=Af[An].items;Ai=AW.length;Am=null;for(Ak=0;Ak<Ai;Ak++){var AY=AW[Ak];Ar=true;if(!Ag[AY.o]){Ag[AY.o]={forms:[]};}else{Ar=false;}Ag[AY.o].forms.push(AY);if(AY.rs!==undefined&&AY.rs>1){var Aa=AY.rs;for(var AS=0;AS<Aa-1;AS++){var Ah=S.copy(AY);Ah.rs=1;Ah.headerText="";Ag[AY.o].forms.push(Ah);}}if(Ag.mxIdx===undefined||Ag.mxIdx<AY.o){Ag.mxIdx=AY.o;}Am=AY;AY.headerID=AY.idx;if(AY.idx>=0){AV=this.headerInfoToProp(1,AY,"n&bftp")[0];AY.headerText=AV.n;AY.bftp=AV.bftp;if(AY.cet){var AU=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Ap=Ad.es[lastHeaderInRow.idx];AU.attrs.push({tid:lastHeaderInRow.cet,id:Ap.id,n:Ap.n});}}else{AY.headerText="";}if(AY.fi!==undefined){if(Aq[Al].otp===12){AY.fid=Aq[Al].fs[AY.fi].id;}else{if(Aq[Al].otp>=0){AY.fid=Aq[Al].id;}}}if(AY.stt){AY.headerID=-1;if(AY.cs===undefined&&AY.rs!==undefined){AY.cs=AY.rs;}}if(Ag.length===undefined){Ag.length=1;}else{if(Ar){Ag.length++;}}}}var Ac=this.gts.col,AX,Ao;for(An=0,Ao=Ac.length;An<Ao;An++){AX=Ac[An];if(typeof AX.t==="number"&&AX.t===1){if(!AX.rs||AX.rs<=1){continue;}Ag=Ab[An];Ag.isCustomGroupWithBanding=true;D(Ag,"c");}}for(An=1;An<=Ae;An++){j(Ab[An-1],Ab[An],"cs");}for(An=0;An<AZ;An++){r.call(this,Ab[An],"cs");}},feedRhs:function F(AT){var Ap,An,Aq,Am=this.modelRhs,Ai=AT.items,Au=this.gmCtr,As=this.gts.row,Al=As.length,Aa=Ai.length,Ao,AY;if(Aa===1){var AX=Au.getAttributesOnDropZone("Rows","n"),AU=Au.getAttributesOnDropZone("YAxis","n");if(this.eg||(Al===0&&(AX.length+AU.length===0))){Aa=0;}}for(Ap=0;Ap<Aa;Ap++){var Aj=Ai[Ap].items;var Aw=Aj.length;while(Aw--){var At=Aj[Aw];At.headerID=At.idx;Ao=At.tui;if(At.stt){At.headerText="Subtotal";At.headerID=-1;}else{if(At.idx>=0){AY=this.headerInfoToProp(0,At,"n&bftp")[0];At.headerText=AY.n;At.bftp=AY.bftp;if(At.cet){var AW=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Ah=this.gts.row[Ao],Ar=Ah.es[At.idx];AW.attrs.push({tid:At.cet,id:Ar.id,n:Ar.n});}}else{At.headerText="";}}if(At.fi!==undefined){At.fid=As[Ao].fs[At.fi].id;}var AS=Am[Ao];if(!AS[At.o]){AS[At.o]={forms:[]};if(AS.length===undefined){AS.length=1;}else{AS.length++;}}var AV=S.copy(At);AS[At.o].forms.push(AV);if(AS.mxIdx===undefined||AS.mxIdx<At.o){AS.mxIdx=At.o;}if(At.cs&&At.cs>1){var AZ=At.cs,Af,Ak;for(Af=0;Af<AZ-1;Af++){Ak=S.copy(At);Ak.cs=1;Ak.headerText="";AS[At.o].forms.push(Ak);}AV.cs=1;}}}var Ae,Av;for(Ap=0;Ap<Al;Ap++){Ae=Am[Ap];Av=Ae.mxIdx;for(An=0;An<=Av;An++){var Ab=Ae[An];if(Ab&&Ab.forms){Ab.forms.reverse();}}}var Ad=this.gts.row,Ac,Ag;for(Ap=0,Aq=Ad.length;Ap<Aq;Ap++){Ac=Ad[Ap];if(typeof Ac.t==="number"&&Ac.t===1){if(!Ac.cs||Ac.cs<=1){continue;}Ag=Am[Ap];Ag.isCustomGroupWithBanding=true;D(Ag,"r");}}for(Ap=1;Ap<Al;Ap++){j(Am[Ap-1],Am[Ap],"rs");}for(Ap=0;Ap<Al;Ap++){r.call(this,Am[Ap],"rs");}},extractInfoLowestHeaderInfoToAttrObj:function(){AO(this.modelChs);AO(this.modelRhs);},createPlottingMetricsIndex:function(){var Ak=this.gmCtr,AW=o,AZ=Ak.getChartInfo(),Al,Ac,Ab,Ag,Ae,Ai,AU,Aa,AY,AT,Aj,AS,Af,AV,AX=AD.EnumABLDirection,Ad;Aa=Ak.getMetricsOnXAxis();AY=Ak.getMetricsOnYAxis();AT=Ak.getSizeByMetrics();Aj=Aa.length;AS=AY.length;AV=AT.length;if(AZ.isABL){AU=[];if(AZ.dirc===AX.VERTICAL){Ad=AY;}else{Ad=Aa;}Af=Ad.length;for(Ag=0;Ag<Af;Ag++){AU.push([Ad[Ag]]);}}if(AZ.tp===AW.GRID){if(Ak.isPie){if(this.splitPlottingMetrics){Al=Ak.getMetricsOnAngleBy();Ac=Al.length;AU=[];for(Ab=0;Ab<Ac;Ab++){Ai=[];Ai.push(Al[Ab]);AU.push(Ai);}}else{AU=[[0]];}}else{AU=[[0]];}}else{if(AZ.tp===AW.BUBBLE||AZ.tp===AW.SCATTER){AU=[];if(this.splitPlottingMetrics){for(Ae=0;Ae<AS;Ae++){for(Ag=0;Ag<Aj;Ag++){AU.push([Aa[Ag],AY[Ae]]);}}}else{var Ah=Math.min(Aj,AS);if(AZ.tp===AW.BUBBLE){Ah=Math.min(Ah,AV);}for(Ag=0;Ag<Ah;Ag++){AU.push([Aa[Ag],AY[Ag]]);}}}}this.plottingMetricsIndex=AU;return AU;},headerInfoToProp:function(AS,AV,AW){var AU=[AV];var AT;if(AS===0){AT=this.gts.row;}else{AT=this.gts.col;}return AC(AT,AU,AW);},collectHeadersObjects:function(AU,AW){var AS=null;var AT;if(AU===0){AS=this.modelRhs;AT=AG(this.gts.row,AW,true);}else{AS=this.modelChs;AT=AG(this.gts.col,AW,false);}var AV=AS[AT.depth];return AQ(AV,100,AT.formIndex,AU);},collectHeadersLabels:function(AS,AV){var AU=this.collectHeadersObjects(AS,AV);var AT;if(AS===0){AT=this.gts.row;}else{AT=this.gts.col;}return AC(AT,AU,"n&bftp");},getRowHeaderObj:function(AX,AT){var Aa=this.modelRhs,AV=AG(this.gts.row,AT,true),AU=AV.depth,AY=AV.formIndex,AW=Aa[AU],AZ=AX;while(AW[AZ]===undefined&&AZ>=0){AZ--;}if(AZ>=0){var AS=AW[AZ].forms[AY];if(!AS.rs){AS.rs=1;}if(AS.o<=AX&&(AS.o+AS.rs)>AX){return AS;}}I.visPrint("no row header is found! maybe we need to retrieve it from server");},getColHeaderObj:function(AZ,AS){var AW=this.modelChs,AV=AG(this.gts.col,AS,false),AU=AV.depth,AX=AV.formIndex,Aa=AW[AU],AY=AZ;while(Aa[AY]===undefined&&AY>=0){AY--;}if(AY>=0){var AT=Aa[AY].forms[AX];if(!AT.cs){AT.cs=1;}if(AT.o<=AZ&&(AT.o+AT.cs)>AZ){return AT;}}I.visPrint("no column header is found! maybe we need to retrieve it from server");},getDropZoneInfo:function Y(){},getLocalDataSet:function L(AT,AU){var AS=AT*this.cir+AU;if(!this.ldss[AS]){this.createLocalDataSet(AT,AU);}return this.ldss[AS];},linearSearchMapGridIndexToChart:function(AT,AU){var AS=AU.length-1;while(true){if(AT>=AU[AS]){return AS;}AS--;}},mapGridIndexToChart:function(AV,AW){var AS=0,AT,AU=AW.length-1;if(AV>=AW[AU]){return AU;}AU--;AT=parseInt((AS+AU)/2);while(AU>=AS){if(AW[AT]<=AV&&AW[AT+1]>AV){return AT;}else{if(AW[AT+1]<=AV){AS=AT+1;}else{AU=AT-1;}AT=parseInt((AS+AU)/2);}}return this.linearSearchMapGridIndexToChart(AV,AW);},mapChartIndexToGrid:function(AS,AT){return AT[AS];},getRowTitleInfo:function(){if(this.rwTtInfo){return this.rwTtInfo;}var AT=this.gts,AW=AT.row,AS=[],AV=AW.length,AU;for(AU=0;AU<AV;AU++){AS=AS.concat(d.call(this,AW[AU],true,AU));}this.rwTtInfo=AS;return AS;},isSepByMetricsForBubbleScatter:function(){var AS=this.gmCtr,AU=AS.getChartInfo(),AT=AU.tp;return(AT===o.BUBBLE||AT===o.SCATTER)&&(P.MetricsByColumn===this.metricsType||P.MetricsByRow===this.metricsType);},getColTitleInfo:function(){if(this.colTtInfo){return this.colTtInfo;}var AT=this.gts,AU=AT.col,AS=[],AW=AU.length,AV;for(AV=0;AV<AW;AV++){AS=AS.concat(d.call(this,AU[AV],false,AV));}this.colTtInfo=AS;return AS;},getMetricIDsFromIndex:function(AS){return k(this.metrics,AS,"oid");},getMetricIDFromIndex:function(AS){return k(this.metrics,[AS],"id")[0];},getMetricNamesFromIndex:function(AS){return k(this.metrics,AS,"n");},getMetricCondenseFromIndex:function(AS){return k(this.metrics,AS,"cds");},addColorMetricInAngle:function(){var Aa=0,AZ=0,Ag=this.metricsColorMap,AW=this.metricsColorMapID,Ac,AX,Af=this.gmCtr,AV=Af.getChartInfo(),Ae=Af.getMetricsOnAngleBy(),Ad=this.getMetricIDsFromIndex(Ae),AY=this.getMetricNamesFromIndex(Ae),AS=Ad.length,AU=Ag.length;if((AV.isPie||AV.isRing)&&AS){var AT=[];var Ab=[];for(AZ=0;AZ<AU;++AZ){for(Aa=0;Aa<AS;++Aa){Ac=Ag[AZ]+AP+AY[Aa];AX=AW[AZ]+AP+Ad[Aa];AT.push(Ac);Ab.push(AX);}}this.metricsColorMap=AT;this.metricsColorMapID=Ab;}},constructMetricColorMap:function(){var Ai=0,Af=0,Am=this.gmCtr,Aa=Am.getChartInfo(),AT=Aa.tp,Ah=Am.getMetricsOnXAxis(),AY=Am.getMetricsOnYAxis(),Al=Am.getSizeByMetrics(),Aj=Am.getMetricsOnAngleBy(),Ad=this.getMetricIDsFromIndex(Ah),AS=this.getMetricIDsFromIndex(AY),Ab=this.getMetricIDsFromIndex(Al),Ao=this.getMetricIDsFromIndex(Aj),Ak=Aa.dirc===1,AX=this.getMetricNamesFromIndex(Aj),Ag=Math.min(Ah.length,AY.length),Ac=this.getMetricNames();if(Al.length>0){Ag=Math.min(Ag,Al.length);}var An=this.metricsColorMap=[];var AU=this.metricsColorMapID=[];if(Aa.isABL){var AV=Ak?Ad:AS;var Ae=Ak?Ah:AY;for(Ai=0;Ai<AV.length;++Ai){Af=Ai;An.push(Ac[Ae[Af]]);AU.push(AV[Af]);}this.addColorMetricInAngle();}else{if(AT===o.BUBBLE||AT===o.SCATTER){var AW;var AZ;if(this.isSepByMetricsForBubbleScatter()){for(Ai=0;Ai<Ah.length;++Ai){for(Af=0;Af<AY.length;++Af){AW=Ac[Ah[Ai]]+AP+Ac[AY[Af]];AZ=Ad[Ai]+AP+AS[Af];if(AT===o.BUBBLE){AW+=(AP+Ac[Al[Af%Al.length]]);AZ+=(AP+Ab[Af%Al.length]);}An.push(AW);AU.push(AZ);}}this.addColorMetricInAngle();}else{for(Ai=0;Ai<Ag;Ai++){AW=Ac[Ah[Ai]]+AP+Ac[AY[Ai]];AZ=Ad[Ai]+AP+AS[Ai];if(AT===o.BUBBLE){AW+=(AP+Ac[Al[Ai]]);AZ+=(AP+Ab[Ai]);}An.push(AW);AU.push(AZ);}this.addColorMetricInAngle();}}else{if(Aa.isPie||Aa.isRing){for(Ai=0;Ai<Ao.length;++Ai){An.push(AX[Ai]);AU.push(Ao[Ai]);}}}}},constructAttrMetricColorMap:function(){var AX=this.attributesColorMap,AZ=this.attributesColorMapID,AS=this.metricsColorMap,AU=this.metricsColorMapID,AT,AY,AW,AV;if(!AX||!AS){return ;}AT=this.attrMetricsColorMap=[];AY=this.attrMetricsColorMapID=[];if(AX.length>0&&AS.length>0){for(AW=0;AW<AX.length;++AW){for(AV=0;AV<AS.length;++AV){AT.push(AX[AW]+R+AS[AV]);AY.push(AZ[AW]+AP+AU[AV]);}}}else{if(AX.length>0){this.attrMetricsColorMap=AX;this.attrMetricsColorMapID=AZ;}else{if(AS.length>0){this.attrMetricsColorMap=AS;this.attrMetricsColorMapID=AU;}}}},clearColorMaps:function(){this.attrMetricsColorMap=this.attributesColorMap=undefined;this.attrMetricsColorMapID=this.attributesColorMapID=undefined;this.metricsColorMap=undefined;this.attrMetricsColorMapID=this.metricsColorMapID=undefined;this.attrMetricsColorMapIDMap=undefined;this.metricsColorMapMap=undefined;},getColorByLegendInfo:function(){var AT=this,Ak=AT.gmCtr,Ai=Ak.view.model.docModel,Ae=AT.globalAttrMetricsColorMap,Ap=this.colorType,Aj=Ak.palette,Aa=Aj.length,Ag,Af=this.attrMetricsColorMap,Am=this.colorBftp,AV,Ad=Ak.colorByInfo,Ah="",Aq=[],Al,AU,Ac,AY,Ao=Ak.chartInfo;if(Ap===AL.ATT||Ap===AL.ATT_METRICS||Ap===AL.METRICS_ITEM){AV=Af.length;for(Ag=0;Ag<AV;Ag++){var AX;if(Ak.globalColorMapping){Al=Ae[Ag];AU=Ai.getColorBy(Al.levels,Al.elements);AX=AU.color;Ac=!AU.isManual;}else{AX=Aj[Ag%Aa];Ac=true;}Aq.push({label:Af[Ag],color:AX,isDefaultColor:Ac,token:Al,bftp:Am&&Am[Ag]});}if(Ap===AL.ATT||Ap===AL.ATT_METRICS){u.forEach(Ad.atts,function(Ar){Ah=Ah+" "+Ar.n;});}if(Ap===AL.ATT_METRICS||Ap===AL.METRICS_ITEM){Ah=Ah+" "+mstrmojo.desc(962,"Metrics");}Ah=Ah.trim();u.forEach(Aq,function(Ar){Ar.decodedColor=B.decodeColor(Ar.color);Ar.encodedColor=Ar.color;});Aq=T(Aq);if(Ao&&Ao.isABL){AY=Ao.sbtp;if(AY===AA.STACKED||AY===AA.PERCENT){this.colorByUnitIds=Ak.getColorByUnitIds(Ao.dirc);Aq.sort(this.compareColorByOrder.bind(this,Ao.dirc));}}}else{if(Ap===AL.METRICS){Ah=Ad.metrics[0].n;var AS=Ad.thresholds;var AZ=Ad.rankMode;var An,Ab=Ad.metrics[0].id;u.forEach(AT.mx,function(Ar){if(Ar.did===Ab){An=Ar;return false;}});if(An){var AW=mstrmojo.VisUtility.getColorByFormatStr(this.getMetricNumberFormat(AT.gmCtr.getColorByMetrics()[0]),AZ);Aq=mstrmojo.VisUtility.getColorByItems(AS,AZ,An.max,An.min,An.cnt,AW);Ah=mstrmojo.VisUtility.getColorByTitle(Ah,AZ);if(Aq===undefined||Aq.length===0){return undefined;}}}}if(Ap===AL.NULL){return undefined;}return{item:Ah,elements:Aq};},compareColorByOrder:function(AX,AY,AW){var AU,AV=this.colorByUnitIds,Aa=AY.token.levels,Ad=AY.token.elements,Ab=AW.token.elements,AT=AV.length,AZ,AS,Ac;for(AU=0;AU<AT;AU++){AZ=Aa.indexOf(AV[AU].id);Ac=AV[AU].es;if(AZ<0||Ad[AZ]===Ab[AZ]){continue;}else{if(!AV[AU].unique&&(AX===AD.EnumABLDirection.VERTICAL||(AV[AU].zone==="Rows"||AV[AU].zone==="YAxis"))){AS=1;}else{AS=-1;}return AS*(Ac.indexOf(Ad[AZ])-Ac.indexOf(Ab[AZ]));}}},adaptForGlobalColor:function(){var AW=this.dz,Aj=AW.ColorBy,Ab=Aj.TemplateUnit,Ak=this.gmCtr,Ah=[],AS=this.gts,AV=AS.row,AU=AS.col,Am,Af,Ac,AX,Aa,AT,AZ,Ad,Ai,Ae,Ag,Al,AY;u.forEach(Ab,function(Ao){var Ap=(Ao.axis==="row"?AV:AU);var An=Ao.uidx;Ah.push(Ap[An].es);});if(!Ak.globalColorMapping){return ;}Am=this.globalAttrMetricsColorMap=[];Af=Ab===undefined?0:Ab.length;Ac=this.attrMetricsColorMapID;u.forEach(Ac,function(An){An=An.toString();AX={};Aa=AX.types=[];AT=AX.levels=[];AZ=AX.elements=[];Ad=An.split(AP);Ai=Ad.length;for(Ae=0;Ae<Ai;Ae++){if(Ae<Af){Ag=Ab[Ae].id;Al=Ah[Ae];AY=!isNaN(Ad[Ae])&&Al[parseInt(Ad[Ae],10)].id;Aa.push(Ab[Ae].t);AT.push(Ag);AZ.push(AY);}else{var Ao=Ad[Ae];AT.push(-1);AZ.push(Ao);Aa.push(4);}}Am.push(AX);});return Am;},constructColorByInfo:function(){var AT=this.colorType,AS=this.dz;if(AT===AL.ATT||AT===AL.ATT_METRICS){this.constructAttrColorMap();E.call(this);this.attrMetricsColorMap=this.attributesColorMap;this.attrMetricsColorMapID=this.attributesColorMapID;if(AT===AL.ATT){this.adaptForGlobalColor();}}if(AT===AL.METRICS_ITEM||AT===AL.ATT_METRICS){this.constructMetricColorMap();this.attrMetricsColorMap=this.metricsColorMap;this.attrMetricsColorMapID=this.metricsColorMapID;if(AT===AL.METRICS_ITEM){this.adaptForGlobalColor();}}if(AT===AL.ATT_METRICS){this.constructAttrMetricColorMap();this.adaptForGlobalColor();}this.attrMetricsColorMapIDMap=s(this.attrMetricsColorMapID);this.metricsColorMapMap=s(this.metricsColorMap);},constructAttrColorMap:function(){var A9,A1,A0,Ay,Ax,BH,BB,Ap,Ao,A6,An,Ai,A3,AU,BC,At,Aj,Ad,Aq,A2=this.gmCtr,A8=A2.firstRes.gvs.items,BD=A2.getChartInfo(),Aw=BD.tp,A5=A2.getSizeByMetrics(),AW=A2.getRowColorAttrsIndex(),A7=A2.getColColorAttrsIndex(),Au=this.getMetricCount(),Av=Au===0?1:Au,Aa=A2.getColorByAttrsID(),BE=AW.length,AX=A7.length,Ar=[],BF=[],Am=[],Af=[],Ae=1,AV=[],AT=[],Ac=[],Ah=[],Ag=1,As=[];if(!Aa||Aa.length===0){return ;}A3=Aa.length;AU=this.attributesColorMap=[];BC=this.attributesColorMapID=[];At=this.colorBftp=[];Ai=(Aw===o.GRID&&A5.length===0);An=(Aw===o.GRID)&&!BD.isPie;Ap=A2.getMetricsOnXAxis();Ao=A2.getMetricsOnYAxis();A6=Math.min(Ap.length,Ao.length);if(A5.length>0){A6=Math.min(A6,A5.length);}function Az(BJ,BL){if(An){return 1234;}var BI=A8[BJ],BK=BI&&BI.items&&BI.items[BL];if(BK===undefined||BK.rv===undefined||BK===""||BK.rv===""||BK.rv==="--"){return false;}return true;}function A4(BP,BR,BI,BL){var BS,BJ,BK,BQ,BO,BN=false,BM,BT;for(BJ=0;BJ<BP&&!BN;++BJ){BM=BI+BJ;for(BK=0;BK<BR&&!BN;++BK){BT=BL+BK;if(BD.isABL){for(BS=0;BS<Au;++BS){BQ=Az(BM,BT*Au+BS);if(BQ){BN=true;break;}}}else{if(Aw===o.BUBBLE||Aw===o.SCATTER){for(BS=0;BS<A6;++BS){BQ=Az(BM,BT*Au+Ap[BS]);BO=Az(BM,BT*Au+Ao[BS]);if(BQ&&BO&&(Aw===o.SCATTER||(Aw===o.BUBBLE&&!isNaN(A5[BS])))){BN=true;break;}}}else{if(Aw===o.GRID&&A5.length>0){BQ=Az(BM,BT*Au+A5[0]);if(BQ){BN=true;break;}}}}}}return BN;}if(BE>0){Am=[];BF=AN(AW,this.modelRhs,Am);Af=(BE===1?BF:BF[BE-1]);Ae=Af.mxIdx+1;AV=[];for(A0=0;A0<BE-1;++A0){Ar[AW[A0].order]=BF[A0][0];AV[A0]=0;}}if(AX>0){Ac=[];AT=AN(A7,this.modelChs,Ac);Ah=(AX===1?AT:AT[AX-1]);Ag=Ah.mxIdx+1;As=[];}var Ak=null,Ab=null,Al=this.rct,BA=this.cct/Av,AS=0,AY=0,AZ={};for(A1=0;A1<Ae;++A1){if(BE>0){Ak=Af[A1];if(!Ak){continue;}Al=Ak.numLeaves;Ar[AW[BE-1].order]=Ak;AV[BE-1]=A1;for(A0=BE-2;A0>=0;--A0){if(Am[A0][AV[A0]]>AV[A0+1]){break;}Aj=AV[A0];Ad=BF[A0][Aj];if(BF[A0].isCustomGroupWithBanding){Aq=Ad.forms[1].rs;}else{Aq=Ad.rs;}if(!Aq){Aq=1;}AV[A0]+=Aq;Ar[AW[A0].order]=BF[A0][AV[A0]];}}AY=0;if(AX>0){for(Ax=0;Ax<AX-1;++Ax){Ar[A7[Ax].order]=AT[Ax][0];As[Ax]=0;}}for(Ay=0;Ay<Ag;++Ay){if(AX>0){Ab=Ah[Ay];if(!Ab){continue;}BA=Ab.numLeaves;Ar[A7[AX-1].order]=Ab;As[AX-1]=Ay;for(Ax=AX-2;Ax>=0;--Ax){if(Ac[Ax][As[Ax]]>As[Ax+1]){break;}Aj=As[Ax];Ad=AT[Ax][Aj];if(AT[Ax].isCustomGroupWithBanding){Aq=Ad.forms[1].cs;}else{Aq=Ad.cs;}if(!Aq){Aq=1;}As[Ax]+=Aq;Ar[A7[Ax].order]=AT[Ax][As[Ax]];}}if(Ai||A4(Al,BA,AS,AY)){BH=Ar[0].headerID;BB=Ar[0].headerText;var BG=Ar[0].forms[0].bftp;for(A9=1;A9<A3;++A9){BH+=AP+Ar[A9].headerID;BB+=R+Ar[A9].headerText;}if(!AZ.hasOwnProperty(BH)){AU.push(BB);BC.push(BH);At.push(BG);AZ[BH]=true;}}AY+=BA;}AS+=Al;}},testLocalDataSet:function x(){var AY=this.cir,AS=this.cic,AV,AT,AX,AZ;for(AV=0;AV<AS;AV++){for(AT=0;AT<AY;AT++){var AU=this.getLocalDataSet(AV,AT);AU.printAll();var AW=AU.generateDataProvider();I.visPrint("========"+AW.length+" data providers for this local data set===");for(AX=0;AX<AW.length;AX++){AZ=AW[AX];I.visPrint("");I.visPrint("====start Testing data provider: "+AX+" ======");AZ.testDataProvider();I.visPrint("====end Testing data provider: "+AX+" ======");}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine");var E=mstrmojo.chart,J=mstrmojo.chart.enums,I=J.EnumLineJoinType,H=10;function M(Q,P,O){return Q?P.x===O.x:P.y===O.y;}function F(){var S=this.mChartContextPtr,O=this.mFormatLinePtr,Q=O.getGradient(),P=O&&Q&&Q.valid;if(!S.mIsGraphMatrix||!P){this.ApplyLineFormat();}else{if(Q.style===0){this.ApplyLineFormat();}else{var R=Q.angle===1;this.Vibrate(0.01,R);this.ApplyLineFormat();}}}function L(S,R){var Q,O=S.length;for(Q=1;Q<=O*2;Q++){R.push({});}var P=Math.max(this.mFormatLinePtr.mLineThickness/2,E.gOutlineBlack.mLineThickness/1.3);var U={x:2*S[0].x-S[1].x,y:2*S[0].y-S[1].y};var T={x:2*S[O-1].x-S[O-2].x,y:2*S[O-1].y-S[O-2].y};this.GetAngularBisectorIntersectionPoint(S[1],S[0],U,P,R[0]);this.GetAngularBisectorIntersectionPoint(T,S[O-1],S[O-2],P,R[O-1]);this.GetAngularBisectorIntersectionPoint(S[O-2],S[O-1],T,P,R[O]);this.GetAngularBisectorIntersectionPoint(U,S[0],S[1],P,R[2*O-1]);for(Q=1;Q<O-1;++Q){this.GetAngularBisectorIntersectionPoint(S[Q+1],S[Q],S[Q-1],P,R[Q]);this.GetAngularBisectorIntersectionPoint(S[Q-1],S[Q],S[Q+1],P,R[2*O-1-Q]);}}mstrmojo.chart.PolyLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.PolyLineObject",mLinePoints:null,isClosePath:false,identity:null,init:function N(Q){Q.hasLine=Q.hasLine||true;Q.isClosePath=Q.isClosePath||false;this._super(Q);var P,S=this.mLinePoints=[],R=Q.PolyLine,O=R.length;for(P=0;P<O;P++){S.push(R[P]);}if(Q.Identity!==undefined&&Q.Identity!==null){this.identity=Q.Identity;}},Draw:function C(){if(this.mLinePoints.length<2){return ;}var P=this.mChartContextPtr,O=P.GetLineJoin();P.SetLineJoin(I.LJT_ROUND);this.SetLineWidth();this.SetPath();F.call(this);P.SetLineJoin(O);P.FinishDrawPolyline(this.mLinePoints,this.mTripleId,!this.mIsDetectable,this.identity,this.startPoint,this.midPoint,this.endPoint);},GetPolygons:function G(T){var R,Q,X=this.mLinePoints,U=X.length;if(U<2){return ;}var P=2/(H*H);var O=[];O.push(0);for(R=1;R+1<U;++R){var Y={x:X[R-1].x-X[R].x,y:X[R-1].y-X[R].y};var V={x:X[R+1].x-X[R].x,y:X[R+1].y-X[R].y};Y.x=Y.x/Math.sqrt(Y.x*Y.x+Y.y*Y.y);Y.y=Y.y/Math.sqrt(Y.x*Y.x+Y.y*Y.y);V.x=V.x/Math.sqrt(V.x*V.x+V.y*V.y);V.y=V.y/Math.sqrt(V.x*V.x+V.y*V.y);if(1-(Y.x*V.x+Y.y*V.y)<P){O.push(R);}}O.push(U-1);U=O.length;for(R=1;R<U;++R){var S=[];for(Q=O[R-1];Q<=O[R];++Q){S.push(X[Q]);}var W=[];L.call(this,S,W);T.push(W);}},SetPath:function D(){var R=this.mChartContextPtr,O=this.mFormatLinePtr,Q=this.mLinePoints,P=[];if(this.isClosePath){P=P.concat(Q);P.pop();R.DrawPolygon(P,true,false,0,O.mLineStyle);}else{R.DrawPolyLine(Q,true,false,0,O.mLineStyle);}},getBoundingPoints:function B(){return{Shape:1,Points:this.mLinePoints};},movePointsAgainstBorder:function A(){var V=this.mChartContextPtr,T=this.mLinePoints,O=T.length,U=V.IsVertical();if(V.mIsGraphMatrix===false){return ;}var S=this.mFormatLinePtr.mLineThickness;if(S>2){return ;}var R,P=U?V.mGraphHeight:0,Q=U?0:V.mGraphWidth;for(R=0;R<O;R++){if(U){if(T[R].y>=P){T[R].y--;}if(T[R].y<=Q){T[R].y++;}}else{if(T[R].x<=P){T[R].x++;}if(T[R].x>=P){T[R].x--;}}}},Vibrate:function K(O,R){var P,Q=this.mLinePoints;for(P=0;P+1<Q.length;P+=2){if(M.call(this,R,Q[P],Q[P+1])){if(R){Q[P+1].x+=O;}else{Q[P+1].y+=O;}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.enums.EnumLineStyle");mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Point2D");var F=mstrmojo.chart,H=F.enums,J=H.EnumLineStyle,C=F.model.enums,A=C.EnumShapeType;mstrmojo.chart.StraightLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.StraightLineObject",mDeviceStartPoint:null,mDeviceEndPoint:null,midPoint:null,identity:null,init:function I(K){if(K.hasLine===undefined){K.hasLine=true;}this._super(K);this.mDeviceStartPoint=new F.Point2D({Point2D:K.StartPoint});this.mDeviceEndPoint=new F.Point2D({Point2D:K.EndPoint});if(K.MidPoint!==undefined&&K.MidPoint!==null){this.midPoint=K.MidPoint;}if(K.Identity!==undefined&&K.Identity!==null){this.identity=K.Identity;}},Draw:function B(){var O=this.mChartContextPtr,K=this.mFormatLinePtr,M=this.mDeviceStartPoint,L=this.mDeviceEndPoint,N;this.SetLineWidth();if(K.mLineStyle===J.LS_SOLID){O.DrawStraightLine(M,L);}else{O.NewPath();N=K.getLinePattern(K.mLineStyle);O.DrawDashedLine(M,L,N);}this.ApplyLineFormat();if(this.Shape===A._TICKER){O.FinishDrawTickerShape(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId);}else{O.FinishDrawStraightLine(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId,this.identity,this.midPoint);}},getShapeSize:function D(){if(this.Shape===A._TICKER){var K=this.mChartContextPtr.GetGraphMatrixContext();return Math.round(0.5*K.mConstants.FixedTickerSize);}return 0;},GetBoundingRect:function E(){if(this.Shape===A._TICKER){this.mBBox=this.mBBox||new F.Rect2D();if(this.mBBox.width!==0){return this.mBBox;}var N=this.mDeviceStartPoint,M=this.mDeviceEndPoint,K=this.mBBox,L=Math.max(1,0.5*this.mFormatLinePtr.mLineThickness);if(N.x===M.x){K.x=Math.max(N.x-L,0);K.y=Math.min(N.y,M.y);K.width=2*L;K.height=Math.abs(N.y-M.y);}else{K.y=Math.max(N.y-L,0);K.x=Math.min(N.x,M.x);K.height=2*L;K.width=Math.abs(N.x-M.x);}return K;}else{return this._super();}},GetClockwisePolygon:function G(){var K=[new F.Point2D(),new F.Point2D(),new F.Point2D(),new F.Point2D()];var P=this.mDeviceStartPoint,M=this.mDeviceEndPoint;if(!P.isEqual(M)){var O=Math.max(this.mFormatLinePtr.mLineThickness/2,F.gOutlineBlack.mLineThickness/2);O=Math.max(O,2);var N=new F.Point2D({x:2*P.x-M.x,y:2*P.y-M.y});var L=new F.Point2D({x:2*M.x-P.x,y:2*M.y-P.y});this.GetAngularBisectorIntersectionPoint(M,P,N,O,K[0]);this.GetAngularBisectorIntersectionPoint(L,M,P,O,K[1]);this.GetAngularBisectorIntersectionPoint(P,M,L,O,K[2]);this.GetAngularBisectorIntersectionPoint(N,P,M,O,K[3]);}else{K[0].Reset(P.x-1,P.y-1);K[1].Reset(P.x+1,P.y-1);K[2].Reset(P.x+1,P.y+1);K[3].Reset(P.x-1,P.y+1);}return K;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","GraphObjectManager");mstrmojo.chart.GraphObjectAggregation=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphObjectAggregation",mGraphObjectList:null,mStartFrameGraphObjectList:null,init:function I(J){this._super(J);this.mGraphObjectList=[];this.mStartFrameGraphObjectList=[];},AddGraphObject:function F(K,J){if(J){this.mStartFrameGraphObjectList.push(K);}else{this.mGraphObjectList.push(K);}},Clear:function B(K,J){if(K){this.mStartFrameGraphObjectList=[];}if(J){this.mGraphObjectList=[];}},ObjectInRectangle:function D(J){return false;},GetClockwisePolygon:function G(){return[];},SetProgress:function H(K){var J=this.mGraphObjectList,M=J.length,L;this._super(K);for(L=0;L<M;++L){J[L].SetProgress(this.mProgress);}},OnPointDetectionEx:function C(N,L,O,J,K,M){return mstrmojo.chart.GraphObjectManager.prototype.OnPointDetectionByList.apply(this,[this.mGraphObjectList,N,L,O,J,K,M]);},Draw:function A(){var M=this.mChartContextPtr,J=this.mGraphObjectList,L=J.length,K;if(this.mIsAnimationEnabled){M.BeginFirstFrame();for(K=0;K<L;++K){this.mStartFrameGraphObjectList[K].Draw();}M.EndFrame();M.BeginLastFrame();}for(K=0;K<L;++K){J[K].Draw();}M.EndFrame();},IsLayerObject:function E(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Vector2D","Point2D");var U=mstrmojo.chart,L=1e-14,I=0.1,o=0.001,S=1.732050807568877;function j(v){return(v-this.mP0.x)/(this.mP3.x-this.mP0.x);}function k(){return(this.mP0.y===this.mP1.y)&&(this.mP1.y===this.mP2.y)&&(this.mP2.y===this.mP3.y);}function Q(w){var v=1/(w+1);return(((this.mP0.y*w+3*this.mP1.y)*w+3*this.mP2.y)*w+this.mP3.y)*v*v*v;}function D(w){var v=1/(w+1);return(((this.mP1.y-this.mP0.y)*w+2*(this.mP2.y-this.mP1.y))*w+this.mP3.y-this.mP2.y)*v*v/(this.mP1.x-this.mP0.x);}function r(AC){var AB=(1-AC)*this.mP0.y+AC*this.mP1.y,w=(1-AC)*this.mP1.y+AC*this.mP2.y,AD=(1-AC)*this.mP2.y+AC*this.mP3.y,AA=(1-AC)*AB+AC*w,v=(1-AC)*w+AC*AD,z=(1-AC)*AA+AC*v,y=new U.Point2D({x:((1-AC)*this.mP0.x+AC*this.mP3.x),y:z}),x=new U.BezierCurve({P0:y,P1:v,P2:AD,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});this.mP3=y;this.mP1.Reset((2*this.mP0.x+this.mP3.x)/3,AB);this.mP2.Reset((this.mP0.x+2*this.mP3.x)/3,AA);return x;}function V(AB,z,w,AD){var y;if(-L<AB&&AB<L){if(-L<z&&z<L){return ;}y=-w/(2*z);if(y<L){return ;}AD.push(y);return ;}var AA=z*z-AB*w;if(AA<-L){return ;}if(-L<AA&&AA<L){y=-z/AB;if(y<L){return ;}AD.push(y);return ;}var v=Math.sqrt(AA),AC=(-z+v)/AB,x=(-z-v)/AB;if(AC>L){AD.push(AC);}if(x>L){AD.push(x);}}function u(w){var v=(w<0)?-1:1;return v*Math.pow(v*w,1/3);}function l(AM,AL,AI,AH,AJ){if(-L<=AM&&AM<=L){V.call(this,3*AL,3*AI/2,AH,AJ);return ;}var w=AL/AM,AE=AI/AM,AN=AH/AM,AC=AE-w*w,AB=(3*w*AE-AN)/2-w*w*w,AK=AC*AC*AC+AB*AB;if(AK>L){var AG=Math.sqrt(AK),AF=u.call(this,AB+AG)+u.call(this,AB-AG)-w;AJ.push(AF);}else{if(AK>-L){var x=u.call(this,AB);AJ.push(2*x-w);AJ.push((AB<0?0.5:-1)*x-w);}else{var AA=AB*AB-AK,y=Math.acos(AB/Math.sqrt(AA))/3,v=Math.pow(AA,1/6),AD=v*Math.cos(y);AJ.push(2*AD-w);var z=S*v*Math.sin(y);AJ.push(-AD-w+z);AJ.push(-AD-w-z);}}AJ.sort();AJ.reverse();while(AJ.length!==0&&AJ[AJ.length-1]<=L){AJ.pop();}}function d(v,w){var AA=this.mP1.y-this.mP0.y,z=this.mP2.y-this.mP1.y,y=this.mP3.y-this.mP2.y,x=v*(this.mP3.x-this.mP0.x)/3;V.call(this,AA-x,z-x,y-x,w);}function J(w,y){w.sort();w.reverse();var AA=1;while(w.length!==0){var z=1/(w[w.length-1]+1);z*=AA;w.pop();var v=this.mP0.x+(this.mP3.x-this.mP0.x)*z;if(Math.abs(v-this.mP0.x)>o&&Math.abs(this.mP3.x-v)>o){AA=z;y.push(r.call(this,z));}}y.reverse();}function b(){if(this.mP0.x<this.mP3.x){return ;}this.mP0.swapPoints(this.mP3);var v=this.mP1;this.mP1=this.mP2;this.mP2=v;}function e(y,v){var x=this.Clone();b.call(x);if(y-x.mP0.x<L){return v?x:null;}if(x.mP3.x-y<L){return v?null:x;}var w=r.call(x,j.call(x,y));return v?w:x;}function R(v){this.mP0.y-=v.mP0.y;this.mP1.y-=v.mP1.y;this.mP2.y-=v.mP2.y;this.mP3.y-=v.mP3.y;}function Y(z){var v=[],x;l.call(this,this.mP0.y,this.mP1.y,this.mP2.y,this.mP3.y,v);if(v.length===0){return ;}var w=v.length;for(x=0;x<w;++x){var y=(v[x]*this.mP0.x+this.mP3.x)/(v[x]+1);z.push(y);}}function F(v,y){var AD=this.getMinX(),AC=this.getMaxX(),x=Math.min(v.x,y.x),z=Math.max(v.x,y.x);if(z-AD<I||AC-x<I){return false;}if(z-x<I){var AA=this.evaluate(v.x);return(AA-v.y)*(y.y-AA)>-I;}x=Math.max(AD,x);z=Math.min(AC,z);var AE=(y.y-v.y)/(y.x-v.x),AB=v.y+AE*(x-v.x),w=v.y+AE*(z-v.x);return(this.evaluate(x)-AB)*(this.evaluate(z)-w)<-I;}function t(w,AC){var AB=this.getMinX(),y=this.getMaxX(),v=w.getMinX(),AA=w.getMaxX();if(y-I<v||AA-I<AB){return ;}if(AB>v){t.call(w,this,AC);return ;}var x=null,z=null;if(y<AA){x=e.call(this,v,true);z=e.call(w,y,false);}else{x=e.call(this,v,true);x=e.call(x,AA,false);z=w.Clone();b.call(z);}R.call(x,z);Y.call(x,AC);}mstrmojo.chart.BezierCurve=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.BezierCurve",mP0:null,mP1:null,mP2:null,mP3:null,mIsVertical:false,init:function n(v){if(v.P0!==undefined&&v.P1!==undefined&&v.P2!==undefined&&v.P3!==undefined){this.mP0=new U.Point2D({Point2D:v.P0});this.mP1=new U.Point2D({Point2D:v.P1});this.mP2=new U.Point2D({Point2D:v.P2});this.mP3=new U.Point2D({Point2D:v.P3});this.mIsVertical=true;}if(v.P0!==undefined&&v.F1!==undefined&&v.F2!==undefined&&v.P3!==undefined){v.IsXAlwaysIndependent=v.IsXAlwaysIndependent||false;this.mP0=new U.Point2D({Point2D:v.P0});this.mP3=new U.Point2D({Point2D:v.P3});this.mIsVertical=v.IsVertical;if(!this.mIsVertical&&!v.IsXAlwaysIndependent){this.mP0.swap();this.mP3.swap();}if(this.mP3.x-this.mP0.x<L&&this.mP0.x-this.mP3.x<L){this.mP3.x=this.mP0.x+0.01;}this.mP1=new U.Point2D({x:(2*this.mP0.x+this.mP3.x)/3,y:v.F1});this.mP2=new U.Point2D({x:(this.mP0.x+2*this.mP3.x)/3,y:v.F2});}},getStartPoint:function E(){return this.mIsVertical?this.mP0:new U.Point2D({x:this.mP0.y,y:this.mP0.x});},getEndPoint:function C(){return this.mIsVertical?this.mP3:new U.Point2D({x:this.mP3.y,y:this.mP3.x});},getMinX:function M(){return this.mP0.x<this.mP3.x?this.mP0.x:this.mP3.x;},getMaxX:function q(){return this.mP0.x<this.mP3.x?this.mP3.x:this.mP0.x;},getStartIndependent:function g(){return this.mP0.x;},getEndIndependent:function O(){return this.mP3.x;},GetApproximatePolygon:function p(AC,AG){var AH=[],AB;this.GetApproximatePolyline(AH);var AD=[],x=AH.length-1,z=this.mP1.x-this.mP0.x;AD.push((this.mP1.y-this.mP0.y)/z);for(AB=1;AB<x;++AB){var AF=x/AB-1;AD.push(D.call(this,AF));}AD.push((this.mP3.y-this.mP2.y)/z);var AA=(AC+3)/2,w=AH.length,AI=2*w;if(AG===undefined){AG=[];}for(AB=0;AB<AI;++AB){AG.push(null);}for(AB=0;AB<w;++AB){var v=new U.Vector2D({x:-AD[AB],y:1}),AE=AA/v.Length(),y=new U.Point2D({x:v.x*AE+0.5,y:(v.y*AE+0.5)});AG[AB]=AH[AB].Shifted(y);AG[AI-1-AB]=AH[AB].NegativeShifted(y);}if(!this.mIsVertical){for(AB=0;AB<AI;++AB){AG[AB].swap();}}},GetApproximatePolyline:function N(y){var x=10,v=3,z=Math.floor(this.getMaxX()-this.getMinX()+0.5)/x,AA;z=Math.max(v,z);y.push(new U.Point2D({x:this.mP0.x+0.5,y:this.mP0.y+0.5}));for(AA=1;AA<z;++AA){var AB=AA/z;var w=1/AB-1;y.push(new U.Point2D({x:((1-AB)*this.mP0.x+AB*this.mP3.x+0.5),6:(Q.call(this,w)+0.5)}));}y.push(new U.Point2D({x:this.mP3.x+0.5,y:(this.mP3.y+0.5)}));},isBefore:function Z(z,w){if(!this.mIsVertical){z.swap();}if(F.call(w,this.mP0,this.mP0.Shifted(z))||F.call(w,this.mP3,this.mP3.Shifted(z))){return true;}z.Reset(-z.x,-z.y);if(F.call(this,w.mP0,w.mP0.Shifted(z))||F.call(this,w.mP3,w.mP3.Shifted(z))){return true;}var v=Math.max(this.getMinX(),w.getMinX()),y=Math.min(this.getMaxX(),w.getMaxX());if(v-y>-0.1*I){return false;}var AA=(v+y)/2,x=new U.Point2D({x:AA,y:w.evaluate(AA)});return F.call(this,x,x.Shifted(z));},SplitAtTangentPoints:function A(AC,w){if(AC.x===0){return ;}var AB=[];d.call(this,AC.y/AC.x,AB);var AA=AB.length,z=[],y;for(y=0;y<AA;++y){var v=(AB[y]*this.mP0.x+this.mP3.x)/(AB[y]+1);if(Math.abs(this.evaluate2ndDerivative(v))>0.01*I){z.push(AB[y]);}}J.call(this,z,w);},SplitAtIntersections:function a(v,x){var AA=[];t.call(this,v,AA);if(AA.length===0){return ;}var z=[],y;var AB=AA.length;for(y=0;y<AB;++y){var w=(AA[y]-this.mP0.x);if(Math.abs(w)>o){z.push((this.mP3.x-this.mP0.x)/w-1);}}if(z.length===0){return ;}J.call(this,z,x);},GetControlPoints:function K(v){v.push(this.mP0);v.push(this.mP1);v.push(this.mP2);v.push(this.mP3);},Reverse:function c(){this.mP0.swapPoints(this.mP3);this.mP1.swapPoints(this.mP2);},MoveToStart:function X(v,y){var w=y?0.5:0,x=y&&k.call(this)?0.5:0;if(this.mIsVertical){v.MoveTo(this.mP0.x+w,this.mP0.y+x);}else{v.MoveTo(this.mP0.y+x,this.mP0.x+w);}},CurveToEnd:function f(w,z){var x=z?0.5:0,y=z&&k.call(this)?0.5:0,v=(Math.abs(this.mP0.x-this.mP1.x)<0.5)?0.5:0;if(this.mIsVertical){w.BezierCurveTo(this.mP1.x+v,this.mP1.y+y,this.mP2.x+v,this.mP2.y+y,this.mP3.x+x,this.mP3.y+y);}else{w.BezierCurveTo(this.mP1.y+y,this.mP1.x+v,this.mP2.y+y,this.mP2.x+v,this.mP3.y+y,this.mP3.x+x);}},LineToStart:function T(v,y){var w=y?0.5:0,x=y&&k.call(this)?0.5:0;if(this.mIsVertical){v.LineTo(this.mP0.x+w,this.mP0.y+x);}else{v.LineTo(this.mP0.y+x,this.mP0.x+w);}},GetMinMax:function h(){var w={MinY:Math.min(this.mP0.y,this.mP3.y)+0.5,MaxY:Math.max(this.mP0.y,this.mP3.y)+0.5};if((this.mP1.y>=w.MinY&&this.mP2.y>=w.MinY)&&(this.mP1.y<=w.MaxY&&this.mP2.y<=w.MaxY)){return w;}var v=[];d.call(this,0,v);while(v.length!==0){var x=(Q.call(this,v[v.length-1])+0.5);v.pop();w.MinY=Math.min(w.MinY,x);w.MaxY=Math.max(w.MaxY,x);}return w;},Clone:function G(){return new U.BezierCurve({P0:this.mP0,P1:this.mP1.y,P2:this.mP2.y,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});},evaluate:function W(w){var v=(w-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*v+(this.mP2.y-2*this.mP1.y+this.mP0.y)*3)*v+(this.mP1.y-this.mP0.y)*3)*v+this.mP0.y;},evaluateDerivative:function B(w){var v=(w-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*v+(this.mP2.y-2*this.mP1.y+this.mP0.y)*2)*v+(this.mP1.y-this.mP0.y))*3/(this.mP3.x-this.mP0.x);},evaluate2ndDerivative:function P(x){var AA=this.mP1.y-this.mP0.y,z=this.mP2.y-this.mP1.y,y=this.mP3.y-this.mP2.y,v=this.mP3.x-this.mP0.x,w=(x-this.mP0.x)/(this.mP3.x-this.mP0.x);return 6*(z-AA+(y-2*z+AA)*w)/(v*v);},evaluate3rdDerivative:function H(){var v=this.mP3.x-this.mP0.x;return 6*(this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)/(v*v*v);},CloneReverseShift:function s(v){if(!this.mIsVertical){v.swap();}return new U.BezierCurve({P0:this.mP3.Shifted(v),P1:this.mP2.y+v.y,P2:this.mP1.y+v.y,P3:this.mP0.Shifted(v),IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumDSSGraphFillEffect");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","GraphObject","FormatFill","ChartContext");var L=mstrmojo.chart,I=L.enums,P=I.EnumCollectionType,H=mstrmojo.chart.model,Q=H.enums,F=Q.EnumDSSGraphObject,N=Q.EnumDSSGraphFillBevelEffect,D=Q.EnumDSSGraphFillEffect;mstrmojo.chart.ShapeObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.ShapeObject",init:function J(S){if(S.hasFill===undefined){S.hasFill=true;}if(S.hasLine===undefined){S.hasLine=true;}this._super(S);if(S.hasFill&&this.mTripleId.mObjectId!==F.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,P.CT_NO_COLLECTION):this.mpParentObject.GetFormatFill();}},getRadialInfo:function K(){return null;},ApplyFillFormat:function E(Z){var Y,T=false,V,S=this.mFormatFillPtr;if(S===null){return ;}if(Z===undefined){Z=false;}if(S.mAlpha===0){if(S.supportAdvancedFill((0))){var X=S.mFillBevel.type;if(X===N.DssGraphFillBevelSmoothEdge||X===N.DssGraphFillBevelChiselEdge){if(!Z){this.FillBevel();}}}}Y=S.mSimpleColor;if(T){V=new L.FormatFill();V.mSimpleColor=Y;V.mFillType=D.DssGraphFillSimple;V.mAlpha=S.mAlpha;V.mDarkerFactor=S.mDarkerFactor;V.mFillBevel=S.mFillBevel;V.mFillGradient=S.getGradient();V.mFillPattern=S.mFillPattern;S=this.mFormatFillPtr=V;}switch(S.mFillType){case D.DssGraphFillSimple:S.FillSimple(this.mChartContextPtr);break;case D.DssGraphFillAdvancedWash:case D.DssGraphFillGenericGradient:if(S.mFillGradient.gradientType===9){var W=this.getRadialInfo();if(W){S.FillGradient(this.mChartContextPtr,W);return ;}}var U=this.GetBoundingRect();S.FillGradient(this.mChartContextPtr,U);break;case D.DssGraphFillPattern:break;case D.DssGraphFillPicture:case D.DssGraphFillUserPicture:break;default:break;}if(!Z){this.FillBevel();}},FillBevel:function G(){var S,T=this.mFormatFillPtr;if(T.supportAdvancedFill(0)===false){return ;}switch(T.mFillBevel.type){case N.DssGraphFillBevelNone:break;case N.DssGraphFillBevelSmoothEdge:case N.DssGraphFillBevelChiselEdge:if(this.SupportBevelEffect()){T.FillEdgeType(this.mChartContextPtr,this.GetClockwisePolygon());}break;case N.DssGraphFillBevelDonut:case N.DssGraphFillBevelSphere:S=this.GetBoundingRect();T.FillDonutOrSphere(this.mChartContextPtr,S,this.IsCircularShape());break;}},SupportBevelEffect:function M(){return true;},IsCircularShape:function A(){return false;},SetFormatFill:function B(S){this.mFormatFillPtr=S;},GetFormatFill:function R(){return this.mFormatFillPtr;},getFormatFromParent:function O(){var S=this.mpParentObject;this.mFormatLinePtr=S.mFormatLinePtr;this.mFormatFillPtr=S.GetFormatFill();},GetBoundingRectFromPolygon:function C(V){var T=new L.Rect2D(),X,U;T.x=V[0].x;T.y=V[0].y;var S=V[0].x,W=V[0].y;X=V.length;for(U=1;U<X;++U){T.x=Math.min(T.x,Math.floor(V[U].x));T.y=Math.min(T.y,Math.floor(V[U].y));S=Math.max(S,V[U].x);W=Math.max(W,V[U].y);}T.width=S-T.x;T.height=W-T.y;return T;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartContext","GraphObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumBoxStyle");var F=mstrmojo.chart,H=F.enums,K=H.EnumCollectionType,C=H.EnumBoxStyle;mstrmojo.chart.GraphCollectionObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphCollectionObject",mGraphObjectCollection:[],mFormatFillPtr:null,mFormatFontPtr:null,mCollectionType:K.CT_NO_COLLECTION,init:function N(P){P.hasLine=false;this._super(P);var S=this.mChartContextPtr,R=this.mTripleId,Q=this.mCollectionType=P.CollectionType,O=P.Shape;this.mGraphObjectCollection=[];switch(this.mCollectionType){case K.CT_LINE:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);break;case K.CT_GENERAL_SHAPE:case K.CT_VERTICAL_AREA:case K.CT_VERTICAL_BAR:case K.CT_HORIZONTAL_AREA:case K.CT_HORIZONTAL_BAR:case K.CT_DEPTH_LINE_OR_LINE_MARKER:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);this.mFormatFillPtr=S.GetFormatFill(R,Q,O);break;case K.CT_TEXT:this.mFormatFontPtr=S.GetFormatFont(R);if(this.mFormatFontPtr.mFontBox!==C.BS_NOFRAME&&!S.mIsGraphMatrix){this.mFormatFillPtr=S.GetFormatFill(R,Q);this.mFormatLinePtr=S.GetFormatLine(R,Q,O);}break;case K.CT_NO_FORMAT:break;default:break;}},AddGraphObject:function G(P,O){if(O===undefined){O=true;}this.mGraphObjectCollection.push(P);P.mpParentObject=this;if(O){P.getFormatFromParent();}},ClearCollection:function J(){this.mGraphObjectCollection=[];},GetCollectionSize:function M(){return this.mGraphObjectCollection.length;},GetObjectByIndex:function D(O){return this.mGraphObjectCollection[O];},SetFormatFill:function A(O){this.mFormatFillPtr=O;},SetFormatFont:function E(O){this.mFormatFontPtr=O;},GetFormatFill:function L(){return this.mFormatFillPtr;},GetFormatFont:function B(){return this.mFormatFontPtr;},Replace:function I(O,P,Q){if(O>=0&&O<this.mGraphObjectCollection.length){if(Q===undefined){Q=true;}this.mGraphObjectCollection[O]=P;P.mpParentObject=this;if(Q){P.getFormatFromParent();}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGenericDirection","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","FormatLine","Rect2D");var U=mstrmojo.chart,L=mstrmojo.chart.model,W=L.enums,C=W.EnumShapeType,G=W.EnumDSSGraphObject,M=U.FormatLine,P=mstrmojo.chart.enums,A=P.EnumLineStyle,N=P.EnumGenericDirection,R=P.EnumRectExpandDirection,E=U.model.enums.EnumDSSGraphMarkerShape;var H=new U.Rect2D();function D(){var Z=[],Y=this.mRect;if(this.mBorderOpenType===N.NONE){Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());}else{Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());var X=0;switch(this.mBorderOpenType){case N.BOTTOM:break;case N.LEFT:X=1;break;case N.TOP:X=2;break;case N.RIGHT:X=3;break;default:break;}if(X!==0){Z=U.gModuleMain.ShiftPolygonBy(Z,X);}}return Z;}function S(Z,Y){var X,a=[];if(this.mChartContextPtr.mImageFormat===103){return a;}if(Y){X=Z.GetBottomLeft();if(X.x>1){X.x--;}a.push(X);X=Z.GetTopLeft();if(X.x>1){X.x--;}if(X.y>1){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>1){X.y--;}a.push(X);a.push(Z.GetBottomRight());}else{X=Z.GetTopLeft();if(X.x>0){X.x--;}if(X.y>0){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>0){X.y--;}a.push(X);a.push(Z.GetBottomRight());X=Z.GetBottomLeft();if(X.x>0){X.x--;}a.push(X);}return a;}function T(Y){var c=this.mChartContextPtr,X=this.mFormatLinePtr.mLineStyle,b,a,Z;if(X!==A.LS_SOLID){c.NewPath();b=M.getLinePattern(X);a=new U.Point2D({x:Y.x+0.5,y:Y.y+0.5});Z=new U.Point2D({x:Y.x+0.5+Y.width,y:Y.y+0.5});c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5+Y.width;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5;c.DrawDashedLine(a,Z,b);}}function K(Y,X){if(X){if(Y.x>1){--Y.x;++Y.width;}if(Y.y>1){--Y.y;++Y.height;}}else{if(Y.x>0){--Y.x;++Y.width;}if(Y.y>0){--Y.y;++Y.height;}}}function B(Z){var Y=this.mFormatLinePtr,X=Y.mLineThickness,a=true;if(X>=1){var b=X/2;if(this.mShapeType===C._BAR){switch(this.mBorderOpenType){case N.BOTTOM:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y+=b;}else{a=false;}break;case N.LEFT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith-=b;}else{a=false;}break;case N.TOP:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y-=b;}else{a=false;}break;case N.RIGHT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith+=b;}else{a=false;}break;default:if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}break;}}else{if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}}}return a;}function F(){var Z=this.mChartContextPtr,f=this.mFormatLinePtr,a=Z.mIsGraphMatrix,d=Z.GetGraphMatrixContext(),c=(this.mShapeType===C._TICKER)||(d.mMarkerShape===E.DssGraphMarkerShapeGMTick);if(this.mTripleId.mObjectId===G.DssGraphRiser&&Z.mPartialRendering){if(this.fallOut(true)){return ;}}var b=B.call(this,this.mRect);Z.DrawRectangle(this.mRect,false);this.ApplyFillFormat();H.ResetRect(this.mRect);var X=f.mLineThickness;this.SetLineWidth();if(a){if(c===false){var e=this.mTripleId.mObjectId;if(e===G.DssGraphRiser){if(Z.IsBarChart()){b=true;this.SetOutlineWidthEx(X);var h=Z.IsVertical(),Y=S.call(this,H,h);if((Y.length===4)&&((h&&this.mBorderOpenType!==N.BOTTOM)||(!h&&this.mBorderOpenType!==N.LEFT))){Y[0].swapPoints(Y[1]);Y[2].swapPoints(Y[3]);Z.DrawPolyLine(Y,true);}}else{if(Z.IsGridChart()||Z.IsLineChart()||Z.IsBubbleChart()||Z.IsScatterChart()){b=true;Z.DrawRectangle(H,true);}}}}}else{if(Z.NeedAdjustedLinePath()&&!a){if(this.mBorderOpenType!==N.NONE){var g;g=D.call(this);Z.DrawPolyLine(g,true);}else{Z.DrawRectangle(H,true);}}else{Z.DrawRectangle(this.mRect,true);}}if(b){if(!a){T.call(this,this.mRect);}this.ApplyLineFormat();}else{this.hSetLineWidth(0);}Z.FinishDrawRect(H,this.mTripleId);}mstrmojo.chart.RectangleObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.RectangleObject",mRect:null,mBorderOpenType:0,init:function Q(X){if(X.hasFill===undefined){X.hasFill=true;}if(X.hasLine===undefined){X.hasLine=true;}this.mpParentObject=X.GraphCollectionObject||null;this.mTripleId=X.TripleId;this.mpManager=X.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(X.Shape){this.mShapeType=X.Shape;}if(X.hasLine&&this.mTripleId.mObjectId!==-3){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,0,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;if(X.hasFill&&this.mTripleId.mObjectId!==G.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,0):this.mpParentObject.GetFormatFill();}if(X&&X.Area){this.mRect=new U.Rect2D({Rect2D:X.Area});}this.mIsVirtual=X.IsVirtualMarker||false;},Draw:function O(){var X=this.mChartContextPtr;if(this.mIsVirtual){return ;}if(this.mIsAnimationEnabled){X.BeginFirstFrame();this.SetProgress(0);F.call(this);X.EndFrame();X.BeginLastFrame();}F.call(this);if(this.mIsAnimationEnabled){X.EndFrame();}},GetClockwisePolygon:function V(){var X=this.mRect;return[X.GetTopLeft(),X.GetTopRight(),X.GetBottomRight(),X.GetBottomLeft()];},GetBoundingRect:function I(X){X=X||false;if(X){return this.mRect;}return new U.Rect2D({Rect2D:this.mRect});},getShapeSize:function J(){return Math.round(Math.max(0.5*this.mRect.width,0.5*this.mRect.height)+0.5);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","FormatFont","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresCls("mstrmojo.chart.common.Utility","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumAnchorPoint","EnumBoxStyle","EnumFontAlignment","EnumFontRotation","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var t=mstrmojo.chart,X=t.enums,l=t.model,d=l.enums,K=X.EnumCollectionType,u=X.EnumGraphMajorType,r=mstrmojo.VisUtility,AD=X.EnumAnchorPoint,j=X.EnumBoxStyle,f=X.EnumFontAlignment,P=X.EnumFontRotation,M=X.EnumRectExpandDirection,AH=d.EnumDSSGraphObject,V=t.common.Utility;var AM=true;var R=false,c=65280,z=0.03,U=0,Y=0,T=0.2,F=0.85,e=0,G=0;var AI=new t.Point2D(),q=new t.Point2D(),Z=new t.Point2D(),v=new t.Rect2D(),N=new t.Rect2D();function o(AX){var AW=this.mChartContextPtr,AT=true,AU,AV=AW.IsVertical();if(!AT){return 0;}if(AV){switch(AX.mObjectId){case AH.DssGraphY1Label:case AH.DssGraphY2Label:return(0.5*this.mFontHeight);case AH.DssGraphX1Label:if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){AU=this.GetTransformedRect(true);return(0.5*AU.height)+1;}return 0;default:return 0;}}if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){switch(AX.mObjectId){case AH.DssGraphX1Label:case AH.DssGraphX2Label:case AH.DssGraph2DO1Label:AU=this.GetTransformedRect(true);return(0.5*AU.height)+1;default:return 0;}}return 0;}function AB(AV){var AT=true;var AU=this.mChartContextPtr;if(AT){switch(AV.mObjectId){case AH.DssGraph2DO1Label:case AH.DssGraph2DO2Label:if(AU.IsGridChart()||AU.IsVertical()){return Math.ceil(0.25*this.mFontHeight);}return 0;case AH.DssGraphDataText:return Math.ceil(0.2*this.mFontHeight);default:return 0;}}return 0;}function AG(){if(!this.mIsShown||!this.mText.localeCompare("")){return false;}if(!this.mIsOnScreen){return false;}if(this.mChartContextPtr.mImageFormat===103){var AT=this.rect;return(AT.width>0&&AT.height>0);}return true;}function w(Ab,AY,AU){var AX=this.mSubTextHolder,Aa=this.mFormatFontPtr,AZ,AV,AT=0,AW=AX.mVecPartition[Ab];for(AV=0;AV<AY-AW;AV++){AZ=AU[AV];if(AZ.Truncated){AT+=AX.GetStringWidth(AZ.Word,Aa);}else{AT+=AX.GetOneWordWidth(AZ.Index);}if(AU.length>0){AT+=AX.GetSpaceWidth();}}return AT;}function AS(){var AV=this.mChartContextPtr,AU=this.mpParentObject;this.mFormatFontPtr=(AU===null)?AV.GetFormatFont(this.mTripleId):AU.GetFormatFont();var AT=this.mFormatFontPtr;if(AT.mFontBox!==j.BS_NOFRAME&&AV.mIsGraphMatrix===false){if(AU===null){this.mFormatFillPtr=AV.GetFormatFill(this.mTripleId,K.CT_NO_COLLECTION);if(!R){this.mFormatLinePtr=AV.GetFormatLine(this.mTripleId,K.CT_NO_COLLECTION,-1);}}else{this.mFormatFillPtr=AU.GetFormatFill();if(!R){this.mFormatLinePtr=AU.mFormatLinePtr;}}}}function D(AU){AU=AU||false;var AT=8,AV=this.mFormatFontPtr;if(AV){if(AU){AT=AV.GetStringExtent("H").Height;}else{AT=AV.GetFontExtent();}}AT=Math.floor(AT*F+0.5);return AT;}function J(){var AT=this.mFormatFontPtr,AY=this.mChartContextPtr,AV,AX,AU;this.mFontHeight=D.call(this,true);if(AY.mIsGraphMatrix){var AW=AT.evalMargins();this.mWidthEdgeMargin=AW[0]||0;this.mHeightEdgeMargin=AW[1]||0;this.mTextLineSpace=AW[2]||0;}else{AX=this.mChartContextPtr.GetGraphMajorType();AU=(AX===u.GMT_3D_SCATTER||AX===u.GMT_3D_CATEGORY);AV=AT.mFontBox!==j.BS_NOFRAME;this.mDoubleLineMargin=this.mDoubleLineMargin||0;this.mDoubleLineMargin=Math.floor(AT.mFontSize*T+0.5);if(this.mDoubleLineMargin===0){this.mDoubleLineMargin=1;}this.mWidthEdgeMargin=Math.floor(AT.mFontSize*z+0.5);if((this.mWidthEdgeMargin===0&&AV)||AU){this.mWidthEdgeMargin=1;}this.mHeightEdgeMargin=Math.floor(AT.mFontSize*U+0.5);if((this.mHeightEdgeMargin===0&&AV)||AU){this.mHeightEdgeMargin=1;}this.mTextLineSpace=Math.floor(AT.mFontSize*Y+0.5);if(this.mTextLineSpace===0){this.mTextLineSpace=1;}switch(AT.mFontBox){case j.BS_NOFRAME:break;case j.BS_SINGLE_LINE_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin;this.mHeightEdgeMargin+=this.mDoubleLineMargin;break;case j.BS_DOUBLE_LINE_FRAME:case j.BS_BEVELED_FRAME:case j.BS_REVERSE_BEVELED_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin*2;this.mHeightEdgeMargin+=this.mDoubleLineMargin*2;break;}}}function AK(){var AT=0;switch(this.mFormatFontPtr.mFontRotation){case P.FR_45:AT=45;break;case P.FR_90:AT=90;break;case P.FR_180:AT=180;break;case P.FR_270:AT=270;break;case P.FR_315:AT=315;break;default:break;}return t.gModuleMain.DegreeToRadian(-AT);}function h(){var AV;var AT=[],AU=this.rect;AI.x=AU.x+AU.width/2;AI.y=AU.y+AU.height/2;AV=AK.call(this);AT.push(new t.Point2D({x:AU.x,y:AU.y}).rotateAndClone(AI,AV));AT.push(new t.Point2D({x:AU.x+AU.width,y:AU.y}).rotateAndClone(AI,AV));AT.push(new t.Point2D({x:AU.x+AU.width,y:AU.y+AU.height}).rotateAndClone(AI,AV));AT.push(new t.Point2D({x:AU.x,y:AU.y+AU.height}).rotateAndClone(AI,AV));return AT;}function y(AZ,AV,Ab){var AX,AW,AU,AT,AY,Aa=AZ.length;for(AX=1;AX<=Aa;++AX){AW=AZ.substring(0,Aa-AX);AU=AW.concat("...");AY=this.mFormatFontPtr.GetStringExtent(AU);AT=AY.Width;if(AT<AV){Ab.Text=AU;Ab.TextWidth=AT;return true;}}return false;}function L(AY,Ah,AX,AZ){var Aj={},Ab=AY.length;AZ=AZ||false;if(AZ){var Ad=0,Ai=0,Ag=true,Ak=this.mSubTextHolder,AT=Ak.GetSpaceWidthEx(this.mFormatFontPtr),AU=this.mFormatFontPtr.GetStringExtent("...").Width,AV="",Ac=-1;if(AU>Ah){return false;}var Af;for(Af=0;Af<Ab;Af++){Ai=Ak.GetOneWordWidth(AY[Af]);if(Ad+(Af>0?AT:0)>Ah-AU){break;}if(Ad+Ai+(Af>0?AT:0)>Ah-AU){break;}AV=AV.concat(Ak.mVecStr[AY[Af]]);if(Af>0){AV=AV.concat(" ");}Ad+=Ai+(Af>0?AT:0);Ac=Af;}var Ae,Aa=0;for(Ae=0;Ae<=Ac;Ae++){Aa=AY[Ae];AX.Texts.push({Truncated:true,Index:Aa,Word:Ak.mVecStr[Aa]});}if(Af>=Ab){r.visPrint("where is the truncated word....");return true;}Ah-=Ad;if(Ag===false&&Ac!==-1){Ah-=AT;}Aa=AY[Af];var AW="";AW=AW.concat(Ak.mVecStr[Aa]);if(y.call(this,AW,Ah,Aj)){AX.Texts.push({Truncated:true,Highlighted:false,Index:Aa,Word:Aj.Text});Ad+=Aj.TextWidth;}else{r.visPrint("Should have truncated, but...");AX.Texts.push({Truncated:false,Highlighted:false,Index:Aa,Word:Ak.mVecStr[Aa]});Ad+=((Aa===0?0:AT)+Ak.GetOneWordWidth(Aa));}AX.TextWidth=Ad;AX.TextXBearing=0;return true;}if(y.call(this,AY,Ah,Aj)){AX.TextWidth=Aj.TextWidth;AX.TextXBearing=0;AX.Texts.push({Truncated:true,Highlighted:false,Index:-1,Word:Aj.Text});return true;}return false;}function AQ(Ag,Ab){var AT=this.mChartContextPtr,Aa=this.mSubTextHolder,AV={TextWidth:0,TextXBearing:0,Texts:[]},AX,AU,AW;Ab=Ab||false;AU=Aa.GetOneLineWidth(Ag);AX=Aa.GetOneLineString(Ag);if(AU<=this.rect.width+(AM?4:0)){AV.TextXBearing=Aa.GetOneLineXBearing(Ag);AV.TextWidth=AU;if(Ab){var AY,Af=-1,Ac=Aa.GetOneLineWords(Ag);for(AY=0;AY<Ac.length;AY++){Af=Ac[AY];AV.Texts.push({Index:Af,Word:Aa.mVecStr[Af],Highlighted:false,Truncated:false});}}else{AV.Texts.push({Index:-1,Word:AX,Highlighted:false,Truncated:false});}return AV;}var AZ=AT.mIsGraphMatrix,Ae=Ab?Aa.GetOneLineWords(Ag):AX;if(AZ&&!AT.isUADataAreaOutput()){if(this.mFormatFontPtr.mFontRotation===P.FR_90){var Ad=this.GetBoundingRect(true);if(Ad.y+AU>AT.mGraphHeight){if(L.call(this,Ae,AT.mGraphHeight,AV,Ab)){this.mIsTruncated=true;return AV;}}}if(this.rect.x<0&&AU>this.rect.width+this.rect.x){if(L.call(this,Ae,this.rect.width+this.rect.x,AV,Ab)){this.mIsTruncated=true;return AV;}}}if(L.call(this,Ae,this.rect.width,AV,Ab)){this.mIsTruncated=true;return AV;}this.mIsTruncated=true;AW=this.mFormatFontPtr.GetStringExtent(AV.Text);AV.TextWidth=AW.Width;AV.TextXBearing=0;AV.Texts.push({Index:-1,Word:AZ?"":"...",Highlighted:false,Truncated:true});return AV;}function O(Ae,Ah,Ac){var AW=this.mChartContextPtr,Aa,Ad,AT,Ag,AX=this.mFormatFontPtr,Ab;Ac=Ac||false;Aa=AQ.call(this,Ah,Ac);Ad=Aa.Text;AT=Aa.Texts;Ab=Aa.TextWidth;switch(this.mFormatFontPtr.mFontAlignment){case f.FA_LEFT:Ae.x+=this.mWidthEdgeMargin;break;case f.FA_CENTER:Ae.x+=Math.floor((this.rect.width-Ab)/2+0.5);break;case f.FA_RIGHT:Ae.x+=Math.floor(this.rect.width-Ab-this.mWidthEdgeMargin+0.5);break;}if(AW.mIsGraphMatrix&&!AW.isUADataAreaOutput()){if(this.rect.x<0&&this.mIsTruncated){Ae.x=this.rect.width+this.rect.x-Ab+0.5;}if(AX.mFontRotation===P.FR_90){var AU=this.GetBoundingRect();if(AU.y+AU.height>AW.mGraphHeight&&this.mIsTruncated){var Ai=this.mSubTextHolder.GetOneLineWidth(Ah),Ak=Ai-Ab;Ae.x-=Ak/2;Ae.x+=Ak;}}}if(AT===undefined){return ;}e=AB.call(this,this.mTripleId);G=o.call(this,this.mTripleId);var Aj={x:Ae.x,y:Ae.y-e},Af,AV,AY;for(Ag=0;Ag<AT.length;Ag++){Ad=AT[Ag];Ae.x=Aj.x;Ae.y=Aj.y;if(Ag>0){AY=w.call(this,Ah,Ad.Index,AT);Ae.x+=AY;}AV={};if(G!==0){AV={BaselineOffset:G};}Af=Ae;if(Ad.Highlighted){var AZ=AX.mFontColor;AX.mFontColor=c;AW.AddFormatedText(AX,Af,Ad.Word,AV);AX.mFontColor=AZ;}else{AW.AddFormatedText(AX,Af,Ad.Word,AV);}}}function W(){var AV,AZ=this.mChartContextPtr,AW=false;if(AZ.mIsGraphMatrix){if(this.showBBox){AV=h.call(this);AZ.DrawPolygon(AV,true);if(this.mTripleId.mObjectId===AH.DssGraphDataText){AW=true;}this.mChartContextPtr.FinishTextBoundingBox(AV,this.BBoxColor,AW);}else{if(V.isValidNumber(this.BBoxColor)){var AY=true,AX=true;if(AY){var AT=1,AU=new t.FormatFont({Font:this.mFormatFontPtr});AU.mStrokeColor=this.BBoxColor;AU.mStrokeWidth=this.mChartContextPtr.isCombinationChart()?0.01:0.5;if(AX){AU.mFontStyle=AT;}this.mFormatFontPtr=AU;}}}}else{if(R||this.mFormatFontPtr.mFontBox!==j.BS_NOFRAME){AV=h.call(this);AZ.DrawPolygon(AV,false,null,null,null);this.ApplyFillFormat();}}return this.mFormatFontPtr;}mstrmojo.chart.TextObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.TextObject",clientDrag:false,rect:null,mFormatFontPtr:null,mText:"",mSubTextHolder:null,mIsShown:true,mWidthEdgeMargin:0,mHeightEdgeMargin:0,mTextLineSpace:0,mFontHeight:0,mIsRectCalculated:false,mTextWidthLimit:-1,mIsStringent:true,mLineCount:-1,mIsTruncated:false,mOnMarker:false,mIsOnScreen:true,init:function AJ(AT){AT.hasLine=false;AT.hasFill=false;if(AT.hasLine||AT.hasFill){this._super(AT);}else{this.mpParentObject=AT.GraphCollectionObject||null;this.mTripleId=AT.TripleId||t.gNullTripleId;this.mpManager=AT.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(AT.Shape){this.mShapeType=AT.Shape;}}if(AT.Identity!==undefined&&AT.Identity!==null){this.identity=AT.Identity;}this.rect=this.rect||new t.Rect2D();this.mSubTextHolder=new t.SubTextHolder();if(AT&&AT.OnMarker){this.mOnMarker=AT.OnMarker;}AS.call(this);J.call(this);},GetFormatFont:function AP(){return this.mFormatFontPtr;},SetText:function AR(AT,AV){if(AV===undefined){AV=-1;}this.mText=AT;this.mIsRectCalculated=false;if(this.mText!==""){var AU=this.mSubTextHolder;AU.Clear();AU.ParseText(this.mText," ",AV);AU.UpdateText(this.mChartContextPtr,this.mFormatFontPtr);}},GetBoundingRectEx:function AO(AV){var AT=this.mFormatFontPtr.mFontRotation;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AU=this.rect;if(AT!==P.FR_NORMAL){if(AT===P.FR_90||AT===P.FR_270){AV.Reset(AU.x,AU.y,AU.width,AU.height);var AX=AU.x+0.5*AU.width,AW=AU.y+0.5*AU.height;AV.width=this.rect.height;AV.height=this.rect.width;AV.x=AX-0.5*AV.width;AV.y=AW-0.5*AV.height;}else{var AY=this.GetBoundingRectFromPolygon(h.call(this));AV.ResetRect(AY);}}else{AV.Reset(AU.x,AU.y,AU.width,AU.height);}},GetBoundingRect:function AA(AT){var AV=this.mFormatFontPtr.mFontRotation,AU;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}if(AV!==P.FR_NORMAL){if(AV===P.FR_90||AV===P.FR_270){AU=new t.Rect2D({Rect2D:this.rect});var AW=this.rect,AY=AW.x+0.5*AW.width,AX=AW.y+0.5*AW.height;AU.width=this.rect.height;AU.height=this.rect.width;AU.x=AY-0.5*AU.width;AU.y=AX-0.5*AU.height;}else{AU=this.GetBoundingRectFromPolygon(h.call(this));}}else{AT=AT||false;if(AT){return this.rect;}AU=new t.Rect2D({Rect2D:this.rect});}return AU;},GetClockwisePolygon:function I(){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}return h.call(this);},CalculateDeviceRect:function AL(){var AZ=this.mSubTextHolder,Ab=this.rect,AT=this.mFontHeight,AW=this.mTextWidthLimit,AY=this.mTextLineSpace,AX=this.mWidthEdgeMargin,Aa=this.mHeightEdgeMargin,AU=1,AV=this.mLineCount;if(Ab.width===0||Ab.height===0){if(AW===-1&&AV===-1){AU=AZ.GetLineCount();Ab.width=AZ.GetMaxWidth();Ab.height=(AT+(AU===1?0:AY))*AU;Ab.Explode(AX,Aa);}else{if(AW!==-1&&AV===-1){AZ.PartitionBy(AW,this.mIsStringent);AU=AZ.GetLineCount();Ab.height=(AT+(AU===1?0:AY))*AU+Aa*2;if(this.mIsStringent){Ab.width=Math.min(AZ.GetMaxWidth(),AW)+AX*2;}else{Ab.width=AZ.GetMaxWidth()+AX*2;}}else{if(AW===-1&&AV!==-1){AZ.SetLineCount(AV);AU=AZ.GetLineCount();Ab.width=AZ.GetMaxWidth();Ab.height=(AT+(AU===1?0:AY))*AU;Ab.Explode(AX,Aa);}else{AZ.SetLineCount(AV,AW);AU=AZ.GetLineCount();Ab.height=(AT+(AU===1?0:AY))*AU+Aa*2;if(this.mIsStringent){Ab.width=Math.min(AZ.GetMaxWidth(),AW)+AX*2;}else{Ab.width=AZ.GetMaxWidth()+AX*2;}}}}}else{if(AW===-1){if(AZ.GetMaxWidth()>Ab.width){AZ.PartitionBy(Ab.width);}}else{if(AZ.GetMaxWidth()>AW){AZ.PartitionBy(AW,this.mIsStringent);if(this.mIsStringent){Ab.width=Math.min(AZ.GetMaxWidth(),AW)+AX*2;}else{Ab.width=AZ.GetMaxWidth()+AX*2;}}else{Ab.width=AZ.GetMaxWidth()+AX*2;}}AU=AZ.GetLineCount();Ab.height=(AT+(AU===1?0:AY))*AU+Aa*2;}this.mIsRectCalculated=true;},GetLineCount:function C(){return this.mSubTextHolder.GetLineCount();},SetTextWidthLimit:function x(AU,AT){if(AT===undefined){AT=true;}this.mTextWidthLimit=AU;this.mIsStringent=AT;this.mIsRectCalculated=false;},SetRect:function B(AT){this.rect.copy(AT);},SetRotation:function AC(AV){var AU=this.mFormatFontPtr.mFontRotation;if(AV!==AU){var AT=new t.FormatFont({Font:this.mFormatFontPtr});AT.mFontRotation=AV;this.mFormatFontPtr=AT;}},MoveTo:function s(AV,AU,AT){AT=AT||AD.TOP_LEFT;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AW=this.rect;switch(AT){case AD.TOP_LEFT:AW.x=AV;AW.y=AU;break;case AD.CENTER:AW.x=AV-AW.width/2;AW.y=AU-AW.height/2;break;case AD.TOP_MIDDLE:AW.x=AV-AW.width/2;AW.y=AU;break;case AD.TOP_RIGHT:AW.x=AV-AW.width;AW.y=AU;break;case AD.LEFT_MIDDLE:AW.x=AV;AW.y=AU-AW.height/2;break;case AD.RIGHT_MIDDLE:AW.x=AV-AW.width;AW.y=AU-AW.height/2;break;case AD.BOTTOM_LEFT:AW.x=AV;AW.y=AU-AW.height;break;case AD.BOTTOM_MIDDLE:AW.x=AV-AW.width/2;AW.y=AU-AW.height;break;case AD.BOTTOM_RIGHT:AW.x=AV-AW.width;AW.y=AU-AW.height;break;}},MoveToCenter:function AF(AU,AT){this.rect.x=Math.round(AU-this.rect.width/2);this.rect.y=Math.round(AT-this.rect.height/2);},GetTransformedRect:function H(AU){var AT,AX,AV;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AW=this.mFormatFontPtr.mFontRotation;if(AW===P.DssGraphFontRotate45||AW===P.DssGraphFontRotate315){AV=new t.Rect2D({Rect2D:this.rect});AT=new t.Point2D({x:AV.x+AV.width*0.5,y:AV.y+AV.height*0.5});AX=(AW===P.DssGraphFontRotate45)?1:-1;AV.x=Math.floor((AT.x-AX*AT.y)*Math.SQRT1_2+(AV.x-AT.x)+0.5);AV.y=Math.floor((AX*AT.x+AT.y)*Math.SQRT1_2+(AV.y-AT.y)+0.5);}else{AV=this.GetBoundingRect(AU);}return AV;},GetTransformedRectEx:function AN(AV){var AX,AW,AU;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AT=this.mFormatFontPtr.mFontRotation;if(AT===P.FR_45||AT===P.FR_315){AV.ResetRect(this.rect);AX=AV.x+AV.width*0.5;AW=AV.y+AV.height*0.5;AU=(AT===P.FR_45)?1:-1;AV.x=Math.floor((AX-AU*AW)*Math.SQRT1_2+(AV.x-AX)+0.5);AV.y=Math.floor((AU*AX+AW)*Math.SQRT1_2+(AV.y-AW)+0.5);}else{this.GetBoundingRectEx(AV);}},HasOverlapForSameRotation:function A(AT,AU,AW){AU=AU||0;AW=AW||M.REC_EXP_INVALID;var AV=this.GetTransformedRect(true),AX=AT.GetTransformedRect(true),AY=AU/2;if(AY>0){v.ResetRect(AV);N.ResetRect(AX);v.Expand(AY,AW);N.Expand(AY,AW);return v.HasIntersection(N);}return AV.HasIntersection(AX);},strokeBBox:function E(AU){var AT=false,AV=this.mChartContextPtr;if(AU===undefined){if(AT){AU=AV.getDefaultContrastColor();}else{AU=AV.getDefaultThemeColor();}}this.BBoxColor=AU;},Draw:function AE(){var AZ=this.mChartContextPtr,AX=this.mFormatFontPtr,AU,AY,AW,AV,AT=false;if(AG.call(this)===false){return ;}if(isNaN(this.rect.x)||isNaN(this.rect.y)){return ;}this.mIsTruncated=false;AX=W.call(this);AX.ApplyFontFormat(AZ,false);switch(this.mTripleId.mObjectId){case AH.DssGraph2DO1Label:case AH.DssGraph2DO2Label:AT=true;break;default:AT=false;break;}if(AX.mFontRotation!==P.FR_NORMAL){AZ.saveState();Z.x=this.rect.x+this.rect.width/2;Z.y=this.rect.y+this.rect.height/2;AZ.Rotate(Z,AK.call(this));}AU=this.mSubTextHolder.GetLineCount();AY=this.mFontHeight+this.mTextLineSpace;AW=Math.max((this.rect.height-AY*AU)/2,0);for(AV=0;AV<AU;AV++){q.x=this.rect.x;q.y=this.rect.y+AW+(AV+1)*this.mFontHeight;O.call(this,q,AV,AT);}if(AX.mFontRotation!==P.FR_NORMAL){AZ.RestoreState();}AZ.FinishDrawText(this.mTripleId,{OnMarker:this.mOnMarker,Tooltip:this.mIsTruncated?this.mText:null,Identities:this.IdentityMap,Identity:this.identity});},getFormatFromParent:function p(){var AT=this.mpParentObject;this.mFormatLinePtr=AT.mFormatLinePtr;this.mFormatFillPtr=AT.GetFormatFill();this.mFormatFontPtr=AT.GetFormatFont();},GetBoundingRectNoRotation:function b(AT){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}AT=AT||false;if(AT){return this.rect;}return new t.Rect2D({Rect2D:this.rect});},RestoreWidthAndHeight:function S(){this.mSubTextHolder.ParseText(this.mText," ",-1);this.rect.width=0;this.rect.height=0;this.mTextWidthLimit=-1;this.mIsStringent=true;this.mLineCount=-1;this.CalculateDeviceRect();},Restore:function g(AT){if(AT===undefined){this.RestoreWidthAndHeight();return ;}this.rect.width=0;this.rect.height=0;this.rect.x=0;this.rect.y=0;this.mTextWidthLimit=(AT.TextWidthLimit!==undefined)?AT.TextWidthLimit:-1;this.mLineCount=(AT.LineCount!==undefined)?AT.LineCount:-1;this.mIsStringent=(AT.Stringent!==undefined)?AT.Stringent:true;if(AT.Restroke!==undefined&&AT.Restroke){this.SetText(this.mText,this.mTextWidthLimit);}},GetOneLineHeight:function a(){return this.mFontHeight;},getWidthHeightMargin:function k(AT){return AT?this.mWidthEdgeMargin:this.mHeightEdgeMargin;},possibleTruncate:function n(){return this.mTextWidthLimit>0&&this.rect.width>this.mTextWidthLimit&&!this.mIsStringent;},getDevicePolygon:function Q(){return h.call(this);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Angle","Rect2D","ChartContext","ShapeObject","ImageMap","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumObjectShape","EnumBoundingRectType","EnumRadientGradientUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphFillBevelEffect");var f=mstrmojo.chart,O=f.enums,AL=O.EnumLineJoinType,D=O.EnumBoundingRectType,o=O.EnumRadientGradientUsage,n=f.gModuleMain,Y=f.model,R=Y.enums,j=R.EnumDSSGraphFillBevelEffect,AH=0,v=0,g=1,I=8;function Z(){var AO=this.mFormatFillPtr;AO.MakeDarker(0.75);this.ApplyFillFormat(true);AO.RestoreColor();}function A(){if(this.mIsOutline){this.ApplyOutlineFormat();}else{var AO=this.mBoundingRectType;if((AO===D.BRT_TOP)||(AO===D.BRT_BOTTOM)){this.ApplyFillFormat();}else{Z.call(this);}this.ApplyLineFormat();}}function X(){var AP=n.mGlowWidth,AQ=this.mChartContextPtr,AO=this.mSliceInfo;AQ.DrawRingSector(AO.mCenter,AO.mRadius+AP,AO.mRadius,n.DegreeToRadian(AO.mStartAngle),n.DegreeToRadian(AO.mEndAngle));AQ.saveState();AQ.Clip();AQ.RestoreState();}function L(){var AR=this.mChartContextPtr,AQ=this.mSliceInfo,AP=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y-AQ.mDepth}),AO=AQ.mRadius*(AQ.mRingPieFactor*0.01);if(this.mIsOutline){AR.drawArc(AP,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AR.drawArc(AP,AO,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AR.DrawRingSector(AP,AQ.mRadius,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);this.ApplyFillFormat();AR.drawArc(AP,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AR.drawArc(AP,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function z(){var AQ=this.mChartContextPtr,AP=this.mSliceInfo,AO=AP.mRadius*(AP.mRingPieFactor*0.01);if(this.mIsOutline){AQ.drawArc(AP.mCenter,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AQ.drawArc(AP.mCenter,AO,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AQ.DrawRingSector(AP.mCenter,AP.mRadius,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);this.ApplyFillFormat();AQ.drawArc(AP.mCenter,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AQ.drawArc(AP.mCenter,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function AC(){var AQ=this.mSliceInfo,AP=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y-AQ.mDepth});var AO=AQ.mRadius*(AQ.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AP,AQ.mRadius,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function S(){var AP=this.mSliceInfo,AO=AP.mRadius*(AP.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AP.mCenter,AP.mRadius,AO,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function l(AQ){var AS=this.mSliceInfo,AR,AW=0;if(AQ===v){AR=AS.mStartAngle%360;if((AR<=90)||(AR>=270)){return ;}AW=this.mStartAngleRadian;}else{AR=AS.mEndAngle%360;if((AR>=90)&&(AR<=270)){return ;}AW=this.mEndAngleRadian;}var AU=AS.mRadius;var AT=AS.mRadius;AU*=Math.cos(AW);AT*=Math.sin(AW);var AY=new f.Point2D({x:AS.mCenter.x,y:AS.mCenter.y});AY.x+=AU;AY.y+=AT;var AV=new f.Point2D({x:AS.mCenter.x,y:AS.mCenter.y});AV.x+=AU*(AS.mRingPieFactor*0.01);AV.x+=AT*(AS.mRingPieFactor*0.01);var AP=[];AP.push(AV);AP.push(AY);var AO=new f.Point2D({x:AY.x,y:AY.y-AS.mDepth});AP.push(AO);var AX=new f.Point2D({x:AV.x,y:AV.y-AS.mDepth});AP.push(AX);this.mChartContextPtr.DrawPolygon(AP);if(AQ===v){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function F(AO,AS,AU){var AT=this.mSliceInfo;if(this.mIsOutline&&AO){return ;}var AR=n.DegreeToRadian(AS);var AQ=n.DegreeToRadian(AU);var AP=AT.mRadius;if(AO){AP*=(AT.mRingPieFactor*0.01);}this.mChartContextPtr.DrawCylinder(AT.mCenter,AP,AR,AQ,AT.mDepth);if(AO){this.SetBoundingRectType(D.BRT_RING_CYLINDER);}else{this.SetBoundingRectType(D.BRT_CYLINDER);}this.SetCylinderStart(AS);this.SetCylinderEnd(AU);A.call(this);}function N(){var AQ=this.mSliceInfo,AP=AQ.mStartAngle,AO=AQ.mEndAngle;if(AP<180){if(AO<180){F.call(this,false,AP,AO);}else{if(AO<=360){F.call(this,true,180,AO);F.call(this,false,AP,180);}else{F.call(this,true,180,360);F.call(this,false,AP,180);F.call(this,false,360,AO);}}}else{if(AP<360){if(AO<=360){F.call(this,true,AP,AO);}else{if(AO<540){F.call(this,true,AP,360);F.call(this,false,360,AO);}else{F.call(this,true,AP,360);F.call(this,true,540,AO);F.call(this,false,360,540);}}}else{if(AP<540){if(AO<540){F.call(this,false,AP,AO);}else{F.call(this,true,540,AO);F.call(this,false,AP,540);}}else{F.call(this,true,AP,AO);}}}}function B(){N.call(this);l.call(this,v);l.call(this,g);}function x(){var AO=this.mSliceInfo;if(this.mOneSeries){if(AO.mIs2DCircular){z.call(this);}else{N.call(this);L.call(this);}this.mChartContextPtr.FinishDrawRing(AO.mCenter,AO.mRadius,AO.mRadius*AO.mRingPieFactor/100,this.mTripleId,true);}else{if(AO.mIs2DCircular){S.call(this);}else{B.call(this);AC.call(this);}this.mChartContextPtr.FinishDrawRingPieSlice(AO.mCenter,AO.mRadius,AO.mRadius*AO.mRingPieFactor/100,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId);}}function G(){var AP=this.mSliceInfo,AO=new f.Point2D({x:AP.mCenter.x,y:AP.mCenter.y-AP.mDepth});this.mChartContextPtr.drawArc(AO,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function H(){var AO=this.mSliceInfo;this.mChartContextPtr.drawArc(AO.mCenter,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function k(){var AP=this.mSliceInfo,AO=new f.Point2D({x:AP.mCenter.x,y:AP.mCenter.y-AP.mDepth});this.mChartContextPtr.DrawSector(AO,AP.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function h(){var AO=this.mSliceInfo;this.mChartContextPtr.DrawSector(AO.mCenter,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function AN(AP){var AU=this.mSliceInfo,AT,AS=0;if(AP===v){AT=AU.mStartAngle%360;if((AT<=90)||(AT>=270)){return ;}AS=this.mStartAngleRadian;}else{AT=AU.mEndAngle%360;if((AT>=90)&&(AT<=270)){return ;}AS=this.mEndAngleRadian;}var AR=new f.Point2D({x:AU.mCenter.x,y:AU.mCenter.y});AR.x+=AU.mRadius*Math.cos(AS);AR.y+=AU.mRadius*Math.sin(AS);var AQ=[];AQ.push(AU.mCenter);AQ.push(AR);var AO=new f.Point2D({x:AR.x,y:AR.y-AU.mDepth});AQ.push(AO);var AV=new f.Point2D({x:AU.mCenter.x,y:AU.mCenter.y-AU.mDepth});AQ.push(AV);this.mChartContextPtr.DrawPolygon(AQ);if(AP===v){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function AD(){var AQ=this.mSliceInfo,AP=AQ.mStartAngle,AO=AQ.mEndAngle;if(AP<180){if(AO<180){F.call(this,false,AP,AO);}else{if(AO<=360){F.call(this,false,AP,180);}else{F.call(this,false,AP,180);F.call(this,false,360,AO);}}}else{if(AP<360){if(AO<=360){AH++;}else{if(AO<540){F.call(this,false,360,AO);}else{F.call(this,false,360,540);}}}else{if(AP<540){if(AO<540){F.call(this,false,AP,AO);}else{F.call(this,false,AP,540);}}else{AH++;}}}}function M(){AD.call(this);AN.call(this,v);AN.call(this,g);}function P(){var AO=this.mSliceInfo;if(this.mOneSeries){if(AO.mIs2DCircular){H.call(this);}else{AD.call(this);G.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AO.mCenter,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,true,this.mIsWhitenOuterBorder);}else{if(AO.mIs2DCircular){h.call(this);}else{M.call(this);k.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AO.mCenter,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,false,this.mIsWhitenOuterBorder);}}function AK(AP){var AS=this.mSliceInfo,AO={mStartAngle:AS.mStartAngle,mEndAngle:AS.mEndAngle};this.ConvertAngle(AO);if(AO.mStartAngle>AO.mEndAngle){var AQ=[{mStartAngle:0,mEndAngle:AO.mEndAngle},{mStartAngle:AO.mStartAngle,mEndAngle:360}];if(AP.mStartAngle>AP.mEndAngle){return true;}return this.GetIntersectionAngle(AP,AQ[0])||this.GetIntersectionAngle(AP,AQ[1]);}if(AP.mStartAngle>AP.mEndAngle){var AR=[{mStartAngle:0,mEndAngle:AP.mEndAngle},{mStartAngle:AP.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AO,AR[0])||this.GetIntersectionAngle(AO,AR[1]);}return this.GetIntersectionAngle(AO,AP);}function c(Ab){var Ad,AU,AV=this.mSliceInfo,AW=AV.mCenter,Ac=AV.mRadius;if(AV.mIs2DCircular){Ad=(Ab.x-AW.x);AU=(Ab.y-AW.y);var AS=Math.sqrt(Ad*Ad+AU*AU);if(((Ac-AS)>-n.mTolerance)&&((AS-(Ac*AV.mRingPieFactor/100))>-n.mTolerance)){var Ae=n.RadianToDegree(Math.acos(Ad/AS));if(AU<-n.mTolerance){Ae=360-Ae;}if((Ae>=AV.mStartAngle)&&(Ae<=AV.mEndAngle)){return true;}Ae+=360;if((Ae>=AV.mStartAngle)&&(Ae<=AV.mEndAngle)){return true;}return false;}return false;}Ad=(Ab.x-AW.x);var AR,AO,Aa,AQ,AX,Af=(Ac*Ac-Ad*Ad),AT=Ac*Ac*(AV.mRingPieFactor*AV.mRingPieFactor/10000)-Ad*Ad;if(Af<-n.mTolerance){return false;}if(AT<-n.mTolerance){AR=n.RadianToDegree(Math.asin(Math.sqrt(Af)/Ac));AU=(Ab.y-(AW.y-AV.mDepth));AQ=new f.Angle();AX=new f.Angle();if(Ad>n.mTolerance){AQ.mEndAngle=AR;AQ.mStartAngle=360-AR;AO=Math.sqrt(Ad*Ad+AU*AU);if(AU>n.mTolerance){AX.mEndAngle=n.RadianToDegree(Math.asin(AU/AO));}else{AX.mEndAngle=360+n.RadianToDegree(Math.asin(AU/AO));}AU-=AV.mDepth;AO=Math.sqrt(Ad*Ad+AU*AU);if(AU>n.mTolerance){AX.mStartAngle=n.RadianToDegree(Math.asin(AU/AO));}else{AX.mStartAngle=360+n.RadianToDegree(Math.asin(AU/AO));}}else{AQ.mStartAngle=180-AR;AQ.mEndAngle=180+AR;AO=Math.sqrt(Ad*Ad+AU*AU);AX.mStartAngle=180-n.RadianToDegree(Math.asin(AU/AO));AU-=AV.mDepth;AO=Math.sqrt(Ad*Ad+AU*AU);AX.mEndAngle=180-n.RadianToDegree(Math.asin(AU/AO));}Aa=new f.Angle();if(!this.GetIntersectionConvertedAngles(AQ,AX,Aa)){return false;}return AK.call(this,Aa);}AR=n.RadianToDegree(Math.asin(Math.sqrt(Af)/Ac));var AP=n.RadianToDegree(Math.asin(Math.sqrt(AT)/(Ac*AV.mRingPieFactor)));AU=(Ab.y-(AW.y-AV.mDepth));var AZ=new f.Angle();var AY=new f.Angle();AX={};if(Ad>n.mTolerance){AZ.mStartAngle=360-AR;AZ.mEndAngle=360-AP;AY.mStartAngle=AP;AY.mEndAngle=AR;AO=Math.sqrt(Ad*Ad+AU*AU);if(AU>n.mTolerance){AX.mEndAngle=n.RadianToDegree(Math.asin(AU/AO));}else{AX.mEndAngle=360+n.RadianToDegree(Math.asin(AU/AO));}AU-=AV.mDepth;AO=Math.sqrt(Ad*Ad+AU*AU);if(AU>n.mTolerance){AX.mStartAngle=n.RadianToDegree(Math.asin(AU/AO));}else{AX.mStartAngle=360+n.RadianToDegree(Math.asin(AU/AO));}}else{AZ.mStartAngle=180-AR;AZ.mEndAngle=180-AP;AY.mStartAngle=180+AP;AY.mEndAngle=180+AR;AO=Math.sqrt(Ad*Ad+AU*AU);AX.mStartAngle=180-n.RadianToDegree(Math.asin(AU/AO));AU-=AV.mDepth;AO=Math.sqrt(Ad*Ad+AU*AU);AX.mEndAngle=180-n.RadianToDegree(Math.asin(AU/AO));}Aa=[new f.Angle(),new f.Angle()];if(!this.GetIntersectionConvertedAngles(AZ,AX,Aa[0])){if(!this.GetIntersectionConvertedAngles(AY,AX,Aa[1])){return false;}return AK.call(this,Aa[1]);}if(!this.GetIntersectionConvertedAngles(AY,AX,Aa[1])){return AK.call(this,Aa[0]);}return(AK.call(this,Aa[0])||AK.call(this,Aa[1]));}function t(AT){var AW,AV,AO,AS=this.mSliceInfo,AZ=AS.mCenter,AR=AS.mRadius;if(AS.mIs2DCircular){AW=(AT.x-AZ.x);AV=(AT.y-AZ.y);AO=Math.sqrt(AW*AW+AV*AV);if((AR-AO)>-n.mTolerance){if(AO<n.mTolerance){return false;}var AP=n.RadianToDegree(Math.acos(AW/AO));if(AV<-n.mTolerance){AP=360-AP;}if((AP>=AS.mStartAngle)&&(AP<=AS.mEndAngle)){return true;}AP+=360;if((AP>=AS.mStartAngle)&&(AP<=AS.mEndAngle)){return true;}return false;}return false;}AW=(AT.x-AZ.x);var Ab,AX,AY,Aa=AR*AR-AW*AW;if(Aa<-n.mTolerance){return false;}var AQ=n.RadianToDegree(Math.asin(Math.sqrt(Aa)/AR));AV=(AT.y-(AZ.y-AS.mDepth));Ab={mStartAngle:0,mEndAngle:0};AX={mStartAngle:0,mEndAngle:0};if(AW>n.mTolerance){Ab.mEndAngle=AQ;Ab.mStartAngle=360-AQ;AY=Math.sqrt(AW*AW+AV*AV);if(AV>n.mTolerance){AX.mEndAngle=n.RadianToDegree(Math.asin(AV/AY));}else{AX.mEndAngle=360+n.RadianToDegree(Math.asin(AV/AY));}AV-=AS.mDepth;AY=Math.sqrt(AW*AW+AV*AV);if(AV>n.mTolerance){AX.mStartAngle=n.RadianToDegree(Math.asin(AV/AY));}else{AX.mStartAngle=360+n.RadianToDegree(Math.asin(AV/AY));}}else{Ab.mStartAngle=180-AQ;Ab.mEndAngle=180+AQ;AY=Math.sqrt(AW*AW+AV*AV);AX.mStartAngle=180-n.RadianToDegree(Math.asin(AV/AY));AV-=AS.mDepth;AY=Math.sqrt(AW*AW+AV*AV);AX.mEndAngle=180-n.RadianToDegree(Math.asin(AV/AY));}var AU={mStartAngle:0,mEndAngle:0};if(!this.GetIntersectionConvertedAngles(Ab,AX,AU)){return false;}return AK.call(this,AU);}function AA(AU){var Ae,AR=this.mSliceInfo,AY=AR.mDepth,AS=AR.mCenter,Ac=AR.mRadius,AQ=n.DegreeToRadian(AR.mStartAngle),AV=n.DegreeToRadian(AR.mEndAngle);var Ab=new f.Point2D({x:AS.x+Ac*Math.cos(AQ),y:AS.y+Ac*Math.sin(AQ)});var AW=new f.Point2D({x:AS.x+Ac*Math.cos(AV),y:AS.y+Ac*Math.sin(AV)});if(this.mBoundingRectType===D.BRT_TOP){Ab.y-=AY;AW.y-=AY;}var Ag=new f.Point2D({x:Math.min(Ab.x,AW.x),y:Math.min(Ab.y,AW.y)});var AX=new f.Point2D({x:Math.max(Ab.x,AW.x),y:Math.max(Ab.y,AW.y)});if(AR.mIsRingPie){Ae=Ac*(AR.mRingPieFactor/100);var AP=new f.Point2D({x:AS.x+Ae*Math.cos(AQ),y:AS.y+Ae*Math.sin(AQ)});var Aa=new f.Point2D({x:AS.x+Ae*Math.cos(AV),y:AS.y+Ae*Math.sin(AV)});if(this.mBoundingRectType===D.BRT_TOP){AP.y-=AY;Aa.y-=AY;}Ag.x=Math.min(Ag.x,AP.x);Ag.y=Math.min(Ag.y,AP.y);AX.x=Math.max(AX.x,AP.x);AX.y=Math.max(AX.y,AP.y);Ag.x=Math.min(Ag.x,Aa.x);Ag.y=Math.min(Ag.y,Aa.y);AX.x=Math.max(AX.x,Aa.x);AX.y=Math.max(AX.y,Aa.y);}else{Ag.x=Math.min(Ag.x,AS.x);AX.x=Math.max(AX.x,AS.x);var AZ=AS.y;if(this.mBoundingRectType===D.BRT_TOP){AZ-=AY;}Ag.y=Math.min(Ag.y,AZ);AX.y=Math.max(AX.y,AZ);}var AO;for(AO=(AR.mStartAngle/90+1)*90;AO<AR.mEndAngle;(AO+=90)){var Ad=n.DegreeToRadian(AO);var Af=new f.Point2D({x:AS.x+Ac*Math.cos(Ad),y:AS.y+Ac*Math.sin(Ad)});if(this.mBoundingRectType===D.BRT_TOP){Af.y-=AY;}Ag.x=Math.min(Ag.x,Af.x);Ag.y=Math.min(Ag.y,Af.y);AX.x=Math.max(AX.x,Af.x);AX.y=Math.max(AX.y,Af.y);if(AR.mIsRingPie){Ae=Ac*(AR.mRingPieFactor/100);var AT=new f.Point2D({x:AS.x+Ae*Math.cos(Ad),y:AS.y+Ae*Math.sin(Ad)});if(this.mBoundingRectType===D.BRT_TOP){AT.y-=AY;}Ag.x=Math.min(Ag.x,AT.x);Ag.y=Math.min(Ag.y,AT.y);AX.x=Math.max(AX.x,AT.x);AX.y=Math.max(AX.y,AT.y);}}AU.x=Ag.x;AU.y=Ag.y;AU.width=AX.x-Ag.x;AU.height=AX.y-Ag.y;}function K(AX){var AV=this.mSliceInfo,AQ=AV.mDepth,Ab=AV.mCenter,Aa=AV.mRadius;if(this.mBoundingRectType===D.BRT_RING_CYLINDER){Aa*=(AV.mRingPieFactor/100);}var AU=n.DegreeToRadian(this.mCylinderStart);var AP=n.DegreeToRadian(this.mCylinderEnd);var AO=new f.Point2D({x:Ab.x+Aa*Math.cos(AU),y:Ab.y+Aa*Math.sin(AU)});var AT=new f.Point2D({x:Ab.x+Aa*Math.cos(AP),y:Ab.y+Aa*Math.sin(AP)});var AW=new f.Point2D({x:Math.min(AO.x,AT.x),y:Math.min(AO.y-AQ,AT.y-AQ)});var AR=new f.Point2D({x:Math.max(AO.x,AT.x),y:Math.max(AO.y,AT.y)});var AS;for(AS=(this.mCylinderStart/90+1)*90;AS<this.mCylinderEnd;(AS+=90)){var AZ=n.DegreeToRadian(AS);var AY=new f.Point2D({x:Ab.x+Aa*Math.cos(AZ),y:Ab.y+Aa*Math.sin(AZ)});AW.x=Math.min(AW.x,AY.x);AW.y=Math.min(AW.y,(AY.y-AQ));AR.x=Math.max(AR.x,AY.x);AR.y=Math.max(AR.y,AY.y);}AX.x=AW.x;AX.y=AW.y;AX.width=AR.x-AW.x;AX.height=AR.y-AW.y;}function r(AQ){var AV=this.mSliceInfo,AT=AV.mRadius,AO=AV.mDepth,AS=AV.mCenter,AR=AV.mRingPieFactor,AU=(this.mBoundingRectType===D.BRT_START_RECT)?AV.mStartAngle:AV.mEndAngle;if(AU>=360){AU-=360;}var AP=n.DegreeToRadian(AU);if(AV.mIsRingPie){AQ.width=(AT*(1-AR/100)*Math.abs(Math.cos(AP)));AQ.height=(AO+AT*(1-AR/100)*Math.abs(Math.sin(AP)));}else{AQ.width=(AT*Math.abs(Math.cos(AP)));AQ.height=(AO+Math.abs(AT*Math.sin(AP)));}if(AU<90){if(AV.mIsRingPie){AQ.x=(AS.x+AT*(AR/100)*Math.cos(AP));AQ.y=(AS.y-AO+AT*(AR/100)*Math.sin(AP));}else{AQ.x=AS.x;AQ.y=AS.y-AO;}}else{if(AU<180){AQ.x=(AS.x+AT*Math.cos(AP));if(AV.mIsRingPie){AQ.y=(AS.y-AO+AT*(AR/100)*Math.sin(AP));}else{AQ.y=AS.y-AO;}}else{if(AU<270){AQ.x=(AS.x+AT*Math.cos(AP));AQ.y=(AS.y-AO+AT*Math.sin(AP));}else{AQ.y=(AS.y-AO+AT*Math.sin(AP));if(AV.mIsRingPie){AQ.x=(AS.x+AT*(AR/100)*Math.cos(AP));}else{AQ.x=AS.x;}}}}}mstrmojo.chart.PieSliceObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PieSliceObject",mSliceInfo:null,mBoundingRectType:D.BRT_TOP,mCylinderStart:0,mCylinderEnd:0,mOneSeries:false,mIsOutline:false,mStartAngleRadian:0,mEndAngleRadian:0,mMiddleAngleRadian:0,mMiddleAngle:0,mIsShown:false,mIsWhitenOuterBorder:false,init:function AF(AQ){if(AQ.TripleId){AQ.TripleId.angleByIndex=AQ.AngleIndex||0;AQ.TripleId.sliceById=AQ.SliceId||0;}this._super(AQ);this.mSliceInfo={};var AP=this.mSliceInfo;AP.mStartAngle=AQ.StartAngle;AP.mEndAngle=AQ.EndAngle;AP.mRingPieFactor=AQ.RingPieFactor;AP.mIsRingPie=AQ.IsRing;AP.mIs2DCircular=AQ.Is2DCircular;AP.mScale=AQ.Scale;AP.mCenter=AQ.Center;AP.mRadius=AQ.Radius;AP.mDepth=AQ.Depth;this.mOneSeries=AQ.OneSeries;this.mIsShown=AQ.IsShown;this.mStartAngleRadian=n.DegreeToRadian(AP.mStartAngle);this.mEndAngleRadian=n.DegreeToRadian(AP.mEndAngle);this.mMiddleAngleRadian=0.5*(this.mStartAngleRadian+this.mEndAngleRadian);this.mMiddleAngle=(0.5*(AP.mStartAngle+AP.mEndAngle));var AO=this.mMiddleAngle;if(AO>=360){AO%=360;}this.mMiddleAngleQuadrant=Math.floor(AO/90+1);if(!this.mOneSeries){AP.mCenter.x+=(AQ.Explode*Math.cos(this.mMiddleAngleRadian));AP.mCenter.y+=(AQ.Explode*Math.sin(this.mMiddleAngleRadian));}this.mIsWhitenOuterBorder=AQ.IsWhitenOuterBorder||false;},SetCylinderStart:function Q(AO){this.mCylinderStart=AO;},SetCylinderEnd:function e(AO){this.mCylinderEnd=AO;},SetBoundingRectType:function s(AO){this.mBoundingRectType=AO;},SetDrawOutline:function AG(AO){this.mIsOutline=AO;},GetSliceInfo:function y(){return this.mSliceInfo;},GetMiddleAngleQuadrant:function T(){return this.mMiddleAngleQuadrant;},GetMiddleAngle:function a(){return this.mMiddleAngle;},GetMiddleAngleRadian:function q(){return this.mMiddleAngleRadian;},Draw:function AB(){if(this.mIsShown){this.SetLineWidth();this.mIsOutline=false;if(this.mSliceInfo.mIsRingPie){x.call(this);}else{P.call(this);}}},DrawOutLine:function AJ(){if(this.mIsShown){var AQ=this.mChartContextPtr,AP=this.mSliceInfo;if(!(AP.mIsRingPie)&&AP.mIs2DCircular){X.call(this);}var AO=this.mChartContextPtr.GetLineJoin();AQ.SetLineJoin(AL.LJT_BEVEL);this.SetOutlineWidth();if(!AP.mIs2DCircular){AQ.Scale(1,AP.mScale);}this.mIsOutline=true;if(AP.mIsRingPie){x.call(this);}else{P.call(this);}if(!AP.mIs2DCircular){AQ.Scale(1,1/AP.mScale);}AQ.SetLineJoin(AO);}},PointInObject:function J(AP){if(this.mIsShown&&this.mFormatLinePtr){var AO=false;if(this.mSliceInfo.mIsRingPie){AO=c.call(this,AP);}else{AO=t.call(this,AP);}return AO;}return false;},GetBoundingRect:function w(AO){if(AO===undefined){AO=new f.Rect2D();}var AS=this.mFormatFillPtr,AR=this.mSliceInfo,AQ=AR.mCenter,AP=AR.mRadius;switch(this.mBoundingRectType){case D.BRT_TOP:case D.BRT_BOTTOM:if(AS.supportAdvancedFill(0)&&AS.mFillBevel.type===j.DssGraphFillBevelSphere){AO.x=AQ.x-AP;AO.y=AQ.y-AR.mDepth-AP;AO.width=2*AP;AO.height=2*AP;}else{AA.call(this,AO);}break;case D.BRT_CYLINDER:case D.BRT_RING_CYLINDER:K.call(this,AO);break;case D.BRT_START_RECT:case D.BRT_END_RECT:r.call(this,AO);break;}return AO;},FillBevel:function u(){var AU=this.mFormatFillPtr,AS=this.mSliceInfo,AT=this.mChartContextPtr;if(AU.supportAdvancedFill(0)===false){return ;}if(AU.mFillBevel.type===j.DssGraphFillBevelDonut){var AO=0;if(AS.mIsRingPie){AO=AS.mRadius*AS.mRingPieFactor/100;}var AR=AS.mCenter.x;var AQ=AS.mCenter.y;if(!(AS.mIs2DCircular)){AQ-=AS.mDepth;}AT.saveState();AT.Clip();AT.FillRadientGradient(AU,o.RG_PIESLICE,AR,AQ,AO,AS.mRadius);AT.RestoreState();}else{if(AU.mFillBevel.type===j.DssGraphFillBevelSphere){var AP=AU.mFillBevel.lightAngle;AU.mFillBevel.lightAngle=270;f.ShapeObject.prototype.FillBevel.apply(this,[]);AU.mFillBevel.lightAngle=AP;}}},ConvertAngle:function AE(AO){while(AO.mStartAngle<0){AO.mStartAngle+=360;}while(AO.mStartAngle>360){AO.mStartAngle-=360;}while(AO.mEndAngle<0){AO.mEndAngle+=360;}while(AO.mEndAngle>360){AO.mEndAngle-=360;}},GetIntersectionConvertedAngles:function U(AP,AO,AR){var AS,AQ;if(AP.mStartAngle>AP.mEndAngle){AS=[{mStartAngle:0,mEndAngle:AP.mEndAngle},{mStartAngle:AP.mStartAngle,mEndAngle:360}];if(AO.mStartAngle>AO.mEndAngle){AQ=[{mStartAngle:0,mEndAngle:AO.mEndAngle},{mStartAngle:AO.mStartAngle,mEndAngle:360}];var AT={mStartAngle:0,mEndAngle:0};this.GetIntersectionAngle(AS[0],AQ[0],AT);AR.mEndAngle=AT.mEndAngle;this.GetIntersectionAngle(AS[1],AQ[1],AT);AR.mStartAngle=AT.mStartAngle;return true;}return this.GetIntersectionAngle(AO,AS[0],AR)||this.GetIntersectionAngle(AO,AS[1],AR);}if(AO.mStartAngle>AO.mEndAngle){AQ=[{mStartAngle:0,mEndAngle:AO.mEndAngle},{mStartAngle:AO.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AP,AQ[0],AR)||this.GetIntersectionAngle(AP,AQ[1],AR);}return this.GetIntersectionAngle(AP,AO,AR);},GetIntersectionAngle:function W(AR,AQ,AS){var AO=(AR.mStartAngle>AQ.mStartAngle)?AR.mStartAngle:AQ.mStartAngle;var AP=(AR.mEndAngle>AQ.mEndAngle)?AQ.mEndAngle:AR.mEndAngle;if(AO>AP){return false;}if(AS){AS.mStartAngle=AO;AS.mEndAngle=AP;}return true;},ElementDrawRingPieTop:function d(){AC.call(this);},ElementDrawNormalPieTop:function b(){k.call(this);},ElementFillSide:function C(){Z.call(this);},GetClockwisePolygon:function E(){var AO=[],AT=this.mSliceInfo;var AP=new f.Point2D({x:AT.mCenter.x,y:AT.mCenter.y});if(!(AT.mIs2DCircular)){AP.y-=AT.mDepth;}AO.push(new f.Point2D({x:AP.x,y:AP.y*AT.mScale}));var AS;for(AS=AT.mStartAngle;AS-AT.mEndAngle<0;AS+=I){var AR=n.DegreeToRadian(AS);AO.push(new f.Point2D({x:AP.x+AT.mRadius*Math.cos(AR),y:((AP.y+AT.mRadius*Math.sin(AR))*AT.mScale)}));}var AQ=n.DegreeToRadian(AT.mEndAngle);AO.push(new f.Point2D({x:AP.x+AT.mRadius*Math.cos(AQ),y:(AP.y+AT.mRadius*Math.sin(AQ))*AT.mScale}));return AO;},IsCircularShape:function AI(){return true;},SetWhitenOuterBorder:function V(AO){this.mIsWhitenOuterBorder=AO;},getRadialInfo:function AM(){var AP=this.mSliceInfo,AO={r:AP.mRadius,cx:AP.mCenter.x,cy:AP.mCenter.y,fx:0,fy:0};AO.fx=AO.cx;AO.fy=AO.cy;if(AP.mIsRingPie){AO.startStop=AP.mRingPieFactor/100;}return AO;},getShapeSize:function p(){if(this.mSliceInfo){return this.mSliceInfo.mRadius||0;}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","ImageMap","FormatLine","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumMarkerShape","EnumLineStyle","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject");var X=mstrmojo.chart,T=X.enums,N=T.EnumObjectShape.OS_CIRCLE,W=T.EnumMarkerShape,B=T.EnumLineStyle,C=T.EnumGraphMajorType,O=mstrmojo.hash,R=103,P=X.model,b=P.enums,I=b.EnumDSSGraphMarkerShape,J=b.EnumDSSGraphObject,E=10,a=31,D=100,H=[[4,-100,-100,100,-100,100,100,-100,100],[12,-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[12,-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[12,-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[0],[4,0,-100,100,0,0,100,-100,0],[3,0,-100,100,100,-100,100],[4,-100,-100,100,-100,100,100,-100,100],[10,0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[7,0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100],[8,-100,-100,0,-50,100,-100,50,0,100,100,0,50,-100,100,-50,0]];X.gMarkerShapeMap=[I.DssGraphMarkerShapeRectangle,I.DssGraphMarkerShapePlainX,I.DssGraphMarkerShapePlus,I.DssGraphMarkerShapeFatPlus,I.DssGraphMarkerShapeCircle,I.DssGraphMarkerShapeDiamond,I.DssGraphMarkerShapeTriangle1,I.DssGraphMarkerShapeSquare,I.DssGraphMarkerShapeStar5,I.DssGraphMarkerShapeHouse,I.DssGraphMarkerShapeStar45];X.gMarkerShapeDict=[];function c(f){var e=H.length,h=X.gMarkerShapeMap,j=X.gMarkerShapeDict,g=false,d;if(j.length===0){for(d=0;d<h.length;d++){j[h[d]]=d;}}if(g){for(d=0;d<e;++d){if(h[d]===f){return d;}}}else{return j[f]||0;}return 0;}function L(){var d=this.mPolygon=[],g=this.mMarkerShape,k=this.mMarkerSize,f=this.mMarkerPosition;var n,h,e,p=false,l,j;if(g===W.MS_Circle){if(p){for(n=0;n<360;n+=E){h=X.gModuleMain.DegreeToRadian(n);d.push(new X.Point2D({x:f.x+k*Math.cos(h),y:f.y+k*Math.sin(h)}));}}else{d.push(new X.Point2D({x:f.x-k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y+k}));d.push(new X.Point2D({x:f.x-k,y:f.y+k}));}return ;}var r=H[g];var q=r[0];if(this.mIsIsometric){for(e=0;e<q;++e){l=r[2*e+1]*k/D+f.x;j=r[2*e+2]*k/D+f.y;d.push(new X.Point2D({x:l,y:j}));}}else{var o;for(e=0;e<q;++e){l=r[2*e+1]*k/D+f.x;j=r[2*e+2]*k/D+f.y;o={x:l,y:j};o=this.mChartContextPtr.vdPoint(o);d.push(o);}}}function S(f){var d={drawBorder:true,shapeSize:f},e=this.mFormatLinePtr;if(e&&f>=e.mLineThickness+1&&e.mLineStyle!==B.LS_NONE){d.shapeSize=f-e.mLineThickness;}else{d.drawBorder=false;}return d;}mstrmojo.chart.MarkerObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.MarkerObject",mMarkerSize:0,mMarkerShape:I.DssGraphMarkerShapeNone,mMarkerPosition:null,mIsIsometric:true,mPolygon:null,mIsShown:true,init:function U(d){d.hasLine=d.MarkerSize>=2;this._super(d);var e=this.mChartContextPtr;this.mMarkerPosition=new X.Point2D({Point2D:d.MarkerPosition});this.mMarkerShape=c.call(this,d.MarkerShape);this.mIsIsometric=d.IsIsometric;this.mMarkerSize=d.MarkerSize;this.mIsShown=true;if(d.IsDialogSize){this.mMarkerSize=e.dialogSizeToPixelSize(d.MarkerSize);}},fallOut:function A(j){var n=this.mChartContextPtr,f=n.mGraphWidth,g=n.mGraphHeight,e=this.mMarkerPosition,d=e.x,l=e.y,k=this.mMarkerSize;if(j){return d+k<0||d-k>f||l+k<0||l-k>g;}else{return(d-k>=0&&d+k<=f)&&(l-k>=0&&l+k<=g);}},Draw:function Q(){if(!this.mIsShown){return ;}var e=this.mChartContextPtr,d=e.GetGraphMajorType();if(e.mPartialRendering){if(this.fallOut(true)){return ;}}if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){e.BeginFirstFrame();this.SetProgress(0);this.DoDraw();e.EndFrame();e.BeginLastFrame();}this.DoDraw();if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){this.mChartContextPtr.EndFrame();}},DoDraw:function Z(){var e=this.mChartContextPtr;var n,f,o,j,p,l,g,h,q,d,k;p=this.mMarkerSize;n=S.call(this,p);this.mMarkerSize=n.shapeSize;q=n.drawBorder;if(q){this.SetLineWidth();}this.setMarkerPath(false);this.ApplyFillFormat();if(e.NeedAdjustedLinePath()){this.setMarkerPath(true);}if(q&&this.mFormatLinePtr.mLineStyle!==B.LS_SOLID&&!e.mUseAnimation){if(this.mMarkerShape===W.MS_Circle){n=X.FormatLine.getLinePattern(this.mFormatLinePtr.mLineStyle);f=this.mMarkerSize*Math.abs(2*Math.PI);o=0;j=0;l=n.length;g=Math.PI/5;h=0;while(o<f){d=Math.min(n[j%l],f-o);k=d/this.mMarkerSize;++j;if(g>k){k=g;}o+=k*this.mMarkerSize;if(j%2===1){e.NewPath();e.drawArc(this.mMarkerPosition,this.mMarkerSize,h,h+k,false);this.ApplyLineFormat();}h+=k;}}}if(q){this.ApplyLineFormat();}if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){e.FinishDrawCircle({x:this.mMarkerPosition.x,y:this.mMarkerPosition.y,r:this.mMarkerSize},this.mTripleId);}else{e.FinishDrawPolygon(this.mPolygon,0,this.mTripleId);}this.mMarkerSize=p;},setMarkerPath:function F(f){var h=this.mChartContextPtr,e,g=this.mMarkerSize,d=this.mMarkerShape;if(h.mImageFormat===R){return ;}if(this.mPolygon===null){L.call(this);}if(d===I.DssGraphMarkerShapeCircle){h.drawArc(this.mMarkerPosition,g,0,Math.PI*2);}else{h.DrawPolygon(this.mPolygon,f);}},GetBoundingRect:function K(){if(this.mPolygon===null){L.call(this);}return this.GetBoundingRectFromPolygon(this.mPolygon);},GetClockwisePolygon:function Y(){if(this.mPolygon===null){L.call(this);}return X.Polygon2D.clone(this.mPolygon);},SetMarkerShape:function G(e){var d=c.call(this,e);if(this.mMarkerShape===d){return ;}this.mMarkerShape=d;L.call(this);},getRadialInfo:function V(){if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){var d={r:this.mMarkerSize,cx:this.mMarkerPosition.x,cy:this.mMarkerPosition.y,fx:0,fy:0};d.fx=d.cx;d.fy=d.cy;return d;}return null;},getShapeSize:function M(){return this.mMarkerSize;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect");mstrmojo.requiresClsP("mstrmojo.chart","Polygon2D","ShapeObject","FormatLine");var H=mstrmojo.chart,M=H.enums,K=M.EnumLineJoinType,Q=M.EnumLineStyle,B=mstrmojo.chart.model,C=B.enums,J=C.EnumDSSGraphObject,N=C.EnumDSSGraphFillBevelEffect;function I(){var X=this.mChartContextPtr,V=this.mFormatLinePtr,S=this.mDevicePolygon,R=S.length,W,T=[],U;if(V.mLineStyle!==Q.LS_SOLID&&V.mLineStyle!==Q.LS_GRADIENT&&!X.mUseAnimation){X.NewPath();X.MoveTo(S[R-1].x,S[R-1].y);W=R-1;for(U=0;U<R;++U){T=V.getLinePattern(V.mLineStyle);X.DrawDashedLine(S[W],S[U],T);W=U;}X.ClosePath();}}mstrmojo.chart.PolygonObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PolygonObject",mDevicePolygon:[],mHasHole:false,mPointsStyle:0,init:function P(T){var R,S;this._super(T);this.mDevicePolygon=[];if(T){if(T.Polygon!==undefined){R=T.Polygon.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Polygon[S]);}}else{if(T.Points!==undefined){R=T.Points.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Points[S]);}}}if(T.HasHole!==undefined){this.mHasHole=T.HasHole;}}},Draw:function A(){var Y=this.mChartContextPtr,R=this.mDevicePolygon,T=Y.GetLineJoin(),U=[],V,W=[],X=0,S;Y.SetLineJoin(K.LJT_ROUND);this.SetLineWidth();Y.DrawPolygon(R,false);this.ApplyFillFormat();if(this.mHasHole){V=Math.floor(R.length/2);U=U.concat(R.slice(0,V-1));Y.DrawPolygon(U,true);if(this.mFormatLinePtr||this.mFormatLinePtr.mLineStyle===Q.LS_SOLID){this.ApplyLineFormat();}U.splice(0,U.length);U=U.concat(R.slice(V+1,R.length));Y.DrawPolygon(U,true);I.call(this);this.ApplyLineFormat();}else{if(Y.mIsTimeSeriesChart&&this.mTripleId.mObjectId===J.DssGraphRiser){X=Math.floor(R.length/2);for(S=0;S<X;++S){W.push(R[S]);}Y.DrawPolyLine(W,true);}else{if(Y.NeedAdjustedLinePath()){Y.DrawPolygon(R,true);}}I.call(this);this.ApplyLineFormat();}Y.SetLineJoin(T);Y.FinishDrawPolygon(R,this.mPointsStyle,this.mTripleId);},PointInObject:function E(S){var R=this.mDevicePolygon;if(!this.mIsDetectable){return false;}if(R.length<3){return false;}return S.IsInPolygon(R);},DrawOutLine:function G(){var U=this.mChartContextPtr,R=this.mDevicePolygon,S=[],T;if(R.length<3){return ;}this.SetOutlineWidth();if(this.mHasHole){T=Math.floor(R.length/2);S=S.concat(R.slice(0,T-1));U.DrawPolygon(S,true);this.ApplyOutlineFormat();S.splice(0,S.length);S=S.concat(R.slice(T+1,R.length));U.DrawPolygon(S,true);this.ApplyOutlineFormat();}else{U.DrawPolygon(R,true);this.ApplyOutlineFormat();}},ObjectInRectangle:function D(T){var R=this.mDevicePolygon,U=R.length,S;if(!this.mIsDetectable){return false;}if(U<3){return false;}for(S=0;S<U;++S){if(!T.PointInRectangle(R[S])){return false;}}return true;},GetBoundingRect:function F(){return this.GetBoundingRectFromPolygon(this.mDevicePolygon);},GetClockwisePolygon:function L(){var R=H.Polygon2D.clone(this.mDevicePolygon);this.MakePolygonClockwise(R);return R;},FillBevel:function O(){var W=this.mFormatFillPtr;if(W.supportAdvancedFill(0)===false){return ;}var S=this.mDevicePolygon,V=W.mFillBevel.type,T=[],R,U;if(S.length<3){return ;}if(this.mHasHole&&(V===N.DssGraphFillBevelChiselEdge||V===N.DssGraphFillBevelSmoothEdge)){T=T.concat(S);R=T.length;S.splice(0,R);for(U=0;(U+1)*2<R;++U){S[0]=T[U];S[1]=T[U+1];S[2]=T[R-2-U];S[3]=T[R-1-U];this._super();}S.splice(0,S.length);this.mDevicePolygon=S.concat(T);}else{this._super();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","BezierCurve");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");var Q=mstrmojo.chart,L=Q.enums,l=L.EnumLineJoinType,F=L.EnumLineStyle,R=103,a=0.087,c=0.01;function U(p){var q=p.x;p.x=p.y;p.y=q;}function C(p,r){var q=this.mBezierCurves,t=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),s;if(p){t.AddBezierCurveLine(p);}var u=q.length;for(s=r;s<u;++s){t.AddBezierCurveLine(q[s]);}q.splice(r,q.length-r);return t;}function f(t,AB){var y=this.mBezierCurves,z=(t.y)/t.x,AD=y.length,w,v,u;for(v=0;v<AD;++v){var s=[];y[v].SplitAtTangentPoints(t,s);if(s.length!==0){var q=s.length;for(u=0;(u+1)<q;++u){AB.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:s[u]}));}w=C.call(this,s[s.length-1],v+1);f.call(w,t,AB);AB.push(w);return ;}if((v+1)<y.length){var x=y[v].getEndIndependent(),r=y[v].evaluateDerivative(x);if(Math.abs(r-z)<Math.abs(1+r*z)*a){var AA=y[v].evaluate2ndDerivative(x),p=y[v].evaluate3rdDerivative(),AC=y[v].evaluate3rdDerivative();if((Math.abs(AA)>=0.1*c)||(p*AC<-c)){w=C.call(this,null,v+1);f.call(w,t,AB);AB.push(w);return ;}}}}}function o(u,x){var v=this.mBezierCurves,z=this.mBezierCurves.length,p=u.mBezierCurves.length,t,s,r;for(t=0;t<z;++t){for(s=0;s<p;++s){var w=[];v[t].SplitAtIntersections(u.mBezierCurves[s],w);if(w.length!==0){var q=w.length;for(r=0;(r+1)<q;++r){x.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:w[r]}));}var y=C.call(this,w[w.length-1],t+1);o.call(y,u,x);x.push(y);return ;}}}}function S(w,y){var x=this.mBezierCurves,AB=x.length,t=w.mBezierCurves.length,v,u;for(v=1;v<AB;++v){var r=x[v].getStartPoint();for(u=1;u<t;++u){var s=w.mBezierCurves[u].getStartPoint();if(Math.abs(r.x-s.x)<c&&Math.abs(r.y-s.y)<c){var z=x[v].evaluateDerivative(x[v].getStartIndependent());var p=w.mBezierCurves[u].evaluateDerivative(w.mBezierCurves[u].getStartIndependent());var q=Math.abs(z-p)<Math.abs(1+z*p)*a;if(!q){var AA=C.call(this,null,v);S.call(AA,w,y);y.push(AA);return ;}}}}}function E(r,v,u,q){var p=v.length,t;for(t=0;t<p;++t){q.push(0);}v[0]/=r[0];u[0]/=r[0];for(t=1;t<p;++t){var s=r[t]-v[t-1];v[t]/=s;u[t]=(u[t]-u[t-1])/s;}q[p-1]=u[p-1];for(t=p-2;t>=0;t--){q[t]=u[t]-v[t]*q[t+1];}}function J(y){var w=this.mBezierCurves,t=[],r=[],q=[],z=y.length,s;for(s=0;s<z;++s){var x,u;if(s===0){x=0;u=1;}else{if(s===y.length-1){x=y.length-2;u=y.length-1;}else{x=s-1;u=s+1;}}var p=this.mIsVertical?y[x].y:y[x].x,v=this.mIsVertical?y[u].y:y[u].x;q.push(v-p);}for(s=0;s<y.length;++s){t.push(4);}t[0]-=2;t[t.length-1]-=2;for(s=0;s<y.length;++s){r.push(1);}var AA=[];E.call(this,t,r,q,AA);for(s=0;s<z-1;++s){if(this.mIsVertical){w.push(new Q.BezierCurve({P0:y[s],F1:y[s].y+AA[s],F2:y[s+1].y-AA[s+1],P3:y[s+1],IsVertical:this.mIsVertical}));}else{w.push(new Q.BezierCurve({P0:y[s],F1:y[s].x+AA[s],F2:y[s+1].x-AA[s+1],P3:y[s+1],IsVertical:this.mIsVertical}));}}}function O(AG){var s=this.mChartContextPtr,AC=this.mFormatLinePtr.mLineStyle,z,w,AH;if(s.mImageFormat===R){return ;}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||s.mUseAnimation){return ;}s.NewPath();var u=AG.length;if(u<2){return ;}var p=Q.FormatLine.getLinePattern(AC),v=p.length,AB=0,r=0,q=[],AA=[];for(z=0;z<u;++z){AA.push(0);q.push(0);}var AF=AG[0].x;var AE=AG[0].y;var AD=0.05;if(AC===F.LS_DOT_DOT_DOT){AD=0.03;p[v-1]*=3;}else{if(AC===F.LS_DOT){AD=0.005;}}for(AH=0;AH<=1;AH+=AD/u){for(z=1;z<u;++z){for(w=0;w<u-z;++w){if(z===1){q[w]=AG[w].x*(1-AH)+AG[w+1].x*AH;AA[w]=AG[w].y*(1-AH)+AG[w+1].y*AH;continue;}q[w]=q[w]*(1-AH)+q[w+1]*AH;AA[w]=AA[w]*(1-AH)+AA[w+1]*AH;}}r+=Math.sqrt((AF-q[0])*(AF-q[0])+(AE-AA[0])*(AE-AA[0]));if(r>=p[AB]){if(AB%2===0){if(this.mIsVertical){s.MoveTo(AF,AE);s.LineTo(q[0],AA[0]);}else{s.MoveTo(AE,AF);s.LineTo(AA[0],q[0]);}}AB=(AB+1)%v;r=0;AF=q[0];AE=AA[0];}}}mstrmojo.chart.CurveLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.CurveLineObject",mBezierCurves:[],mIsVertical:false,isClosePath:false,identity:null,startPoint:null,midPoint:null,endPoint:null,init:function h(p){this.mBezierCurves=[];if(p.hasLine===undefined){p.hasLine=true;}if(p.IsVertical===undefined){p.IsVertical=true;}if(p.IsClosePath===undefined){p.IsClosePath=false;}p.GraphCollectionObject=p.GraphCollectionObject||null;this._super(p);this.isClosePath=p.IsClosePath;if(p.BezierCurvePtr){this.mBezierCurves.push(p.BezierCurvePtr);this.mIsVertical=p.BezierCurvePtr.mIsVertical;}else{this.mIsVertical=p.IsVertical;if(p.Points){J.call(this,p.Points);}}if(p.Identity){this.identity=p.Identity;}},Draw:function e(){var u=this.mChartContextPtr,v=this.mBezierCurves,t=u.GetLineJoin(),AG,y,AF=[],AB=[],AH,w,AD,AC,AI,x,z,AE,AJ;if(v.length===0){return ;}u.SetLineJoin(l.LJT_ROUND);this.SetLineWidth();y=v.length;if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||u.mUseAnimation){u.NewPath();v[0].MoveToStart(u);for(AG=0;AG<y;++AG){v[AG].CurveToEnd(u);}}else{for(AG=0;AG<y;++AG){v[AG].GetControlPoints(AF);O.call(this,AF);this.ApplyLineFormat();}}if(this.isClosePath){u.ClosePath();}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||u.mUseAnimation){this.ApplyLineFormat();}u.SetLineJoin(t);for(AG=0;AG<y;++AG){var AA=v[AG],s=new Q.Point2D({Point2D:AA.mP0}),r=new Q.Point2D({Point2D:AA.mP1}),q=new Q.Point2D({Point2D:AA.mP2}),p=new Q.Point2D({Point2D:AA.mP3});if(!this.mIsVertical){s.swap();r.swap();q.swap();p.swap();}AB.push(s);AB.push(r);AB.push(q);AB.push(p);}if((this.startPoint===undefined||this.startPoint===null)&&(this.endPoint===undefined||this.endPoint===null)&&(this.midPoint===undefined||this.midPoint===null)){AH=AB.length;this.startPoint={x:AB[0].x,y:AB[0].y};this.endPoint={x:AB[AH-1].x,y:AB[AH-1].y};if(y%2===0){this.midPoint={x:AB[AH/2-1].x,y:AB[AH/2-1].y};}else{w=(y-1)/2;AD=(v[w].mP0.x+v[w].mP3.x)/2;AC=v[w].evaluate(AD);if(!this.mIsVertical){AI=AD;AD=AC;AC=AI;}this.midPoint={x:AD,y:AC};}}else{if(!this.mIsVertical){U.call(this,this.startPoint);U.call(this,this.midPoint);U.call(this,this.endPoint);}}u.FinishDrawCurves(AB,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},DrawOutLine:function k(){var s=this.mChartContextPtr,p=this.mBezierCurves,q;this.SetOutlineWidth();s.NewPath();p[0].MoveToStart(s);var r=p.length;for(q=0;q<r;++q){p[q].CurveToEnd(s);}this.ApplyOutlineFormat();},PointInObject:function K(s){var r=this.mBezierCurves,q=(this.mFormatLinePtr.mLineThickness<4)?4:this.mFormatLinePtr.mLineThickness,p=r.length,u,t;for(u=0;u<p;++u){t=[];r[u].GetApproximatePolygon(q,t);if(s.IsInPolygon(t)){return true;}}return false;},ObjectInRectangle:function j(u){var q=this.mBezierCurves,p=(this.mFormatLinePtr.mLineThickness<1)?1:this.mFormatLinePtr.mLineThickness,v=q.length,t,r,s;for(t=0;t<v;++t){s=[];q[t].GetApproximatePolygon(p,s);for(r=0;r<s.length;++r){if(!u.PointInRectangle(s[r])){return false;}}}return true;},AddBezierCurveLine:function W(p){var q=this.mBezierCurves;if(q.length===0){this.mIsVertical=p.mIsVertical;}q.push(p);},GetClockwisePolygon:function B(){return[];},MoveToStart:function V(p){var q=this.mChartContextPtr;this.mBezierCurves[0].MoveToStart(q,p&&q.NeedAdjustedLinePath());},CurveToEnd:function b(s){var t=this.mChartContextPtr,p=this.mBezierCurves,r=p.length,q;for(q=0;q<r;++q){p[q].CurveToEnd(t,s&&t.NeedAdjustedLinePath());}},DashedCurveToEnd:function N(q,u){var v=this.mChartContextPtr,w=this.mBezierCurves,AF=w.length,AM,AK,AG;for(AM=0;AM<AF;++AM){var AL=[];w[AM].GetControlPoints(AL);var AN=AL.length;if(AN<4){return ;}var r=(u&&v.NeedAdjustedLinePath()),AP=r?0.5:0,AB=r&&(AL[0].y===AL[1].y&&AL[1].y===AL[2].y&&AL[2].y===AL[3].y)?0.5:0,p=(Math.abs(AL[0].x-AL[1].x)<0.5)?0.5:0;AL[1].x+=p;AL[1].y+=AB;AL[2].x+=p;AL[2].y+=AB;AL[3].x+=AP;AL[3].y+=AB;var AI=Q.FormatLine.getLinePattern(q),AH=AI.length,AO=0,s=0,AA=[],AE=[];for(AM=0;AM<AN;++AM){AE.push(0);AA.push(0);}var AD=AL[0].x,AC=AL[0].y;var z=0.05;if(q===F.LS_DOT_DOT_DOT){z=0.03;AI[AH-1]*=2;}else{var AJ=11.2;for(AK=0;AK<AH;++AK){if(AK%2===0){AI[AK]*=AJ;}}}for(AG=0;AG<=1;AG+=z/AN){for(AM=1;AM<AN;++AM){for(AK=0;AK<AN-AM;++AK){if(AM===1){AA[AK]=AL[AK].x*(1-AG)+AL[AK+1].x*AG;AE[AK]=AL[AK].y*(1-AG)+AL[AK+1].y*AG;continue;}AA[AK]=AA[AK]*(1-AG)+AA[AK+1]*AG;AE[AK]=AE[AK]*(1-AG)+AE[AK+1]*AG;}}s+=Math.sqrt((AD-AA[0])*(AD-AA[0])+(AC-AE[0])*(AC-AE[0]));if(s>=AI[AO]){if(AO%2===0){if(this.mIsVertical){v.MoveTo(AD,AC);v.LineTo(AA[0],AE[0]);}else{v.MoveTo(AC,AD);v.LineTo(AE[0],AA[0]);}}AO=(AO+1)%AH;s=0;AD=AA[0];AC=AE[0];}}}},LineToStart:function P(p){var q=this.mChartContextPtr;this.mBezierCurves[0].LineToStart(q,p&&q.NeedAdjustedLinePath());},getStartPoint:function X(){return this.mBezierCurves[0].getStartPoint();},getEndPoint:function D(){var p=this.mBezierCurves;return p[p.length-1].getEndPoint();},evaluate:function T(s){var q=this.mBezierCurves,u=q.length,r;for(r=0;(r+1)<u;++r){var p=q[r].getMinX();var t=q[r].getMaxX();if(p-s<c&&s-t<c){return q[r].evaluate(s);}}return q[q.length-1].evaluate(s);},GetMinMax:function d(){var p=this.mBezierCurves,t=p.length,r,q,s;if(t>0){r=p[0].GetMinMax();for(q=1;q<t;++q){s=p[q].GetMinMax();if(s.MinY<r.MinY){r.MinY=s.MinY;}if(s.MaxY>r.MaxY){r.MaxY=s.MaxY;}}}return r;},GetApproximatePolyline:function M(s){var p=this.mBezierCurves,r,q,u,v,t;p[0].GetApproximatePolyline(s);u=p.length;for(r=1;r<u;++r){v=[];p[r].GetApproximatePolyline(v);t=v.length;for(q=1;q<t;++q){s.push(v[q]);}}},CloneReverseShift:function n(s){var p=this.mBezierCurves,r=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),q;for(q=p.length-1;q>-1;--q){r.AddBezierCurveLine(p[q].CloneReverseShift(s));}return r;},Clone:function I(){var p=this.mBezierCurves,r=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),s=p.length,q;for(q=0;q<s;++q){r.AddBezierCurveLine(p[q].Clone());}return r;},Reverse:function Z(){var p=this.mBezierCurves,r=p.length,q;for(q=0;q<r;++q){p[q].Reverse();}p.reverse();},getMinX:function H(){var p=this.mBezierCurves,r=Number.MAX_VALUE,t=p.length,q;for(q=0;q<t;++q){var s=p[q].getMinX();if(s<r){r=s;}}return r;},getMaxX:function g(){var q=this.mBezierCurves,p=Number.MIN_VALUE,t=q.length,r;for(r=0;r<t;++r){var s=q[r].getMaxX();if(s>p){p=s;}}return p;},isBefore:function G(v,t){var q=this.mBezierCurves,u=q.length,p=t.mBezierCurves.length,s,r;for(s=0;s<u;++s){for(r=0;r<p;++r){if(q[s].isBefore(v,t.mBezierCurves[r])){return true;}}}return false;},SplitAtTangentPoints:function A(q,p){if(!this.mIsVertical){q.swap();}if(q.x===0){return ;}f.call(this,q,p);},SplitAtIntersections:function Y(s,p){var r=[];o.call(this,s,r);p=r;S.call(this,s,p);var t=r.length,q;for(q=0;q<t;++q){S.call(r[q],s,p);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","StraightLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumAxisDirection","EnumAxisLabelsLocation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var D=mstrmojo.chart,H=D.enums,J=H.EnumAxisDirection,C=H.EnumAxisLabelsLocation,A=mstrmojo.chart.model,B=A.enums,E=B.EnumDSSGraphObject,F=D.gNullTripleId;mstrmojo.chart.CategoryAxisInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CategoryAxisInfo",mId:F,mAxisLabelsLocation:C.ALL_BOTTOM,mAxisDirection:J.AD_X,init:function K(L){this._super(L);this.mId=new D.TripleId({ObjectId:E.DssGraphO1Body,SeriesId:0});this.mAxisLabelsLocation=C.ALL_BOTTOM;this.mAxisDirection=J.AD_X;},ToX:function I(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_X;this.mAxisLabelsLocation=C.ALL_BOTTOM;},ToY:function G(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_Y;this.mAxisLabelsLocation=C.ALL_LEFT;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Point2D","Rect2D","PolyLineObject","PolygonObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFontRotation","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var $C=mstrmojo.chart,$M=mstrmojo.chart.model,$MODEL_ENUMS=$M.enums,$CHART_ENUMS=$C.enums,$FR=$MODEL_ENUMS.EnumDSSGraphFontRotation,$GO=$MODEL_ENUMS.EnumDSSGraphObject,$SHP=$MODEL_ENUMS.EnumShapeType,$GMDLP=$CHART_ENUMS.EnumGraphMatrixDataLabelPosition,kOffset=[[0,0],[0,1],[1,0],[1,1]],kGridGeneric=1,kGridOccupy=2,kGridObject=4,kGridCircle=8,k_MaxCount=10000000;function hPointToIndex(point,isUseFloorValue){var x=point.x-this.Origin.x,y=point.y-this.Origin.y,xIndex,yIndex;if(isUseFloorValue===undefined){isUseFloorValue=true;}if(isUseFloorValue){xIndex=Math.floor(x/this.XUnit);yIndex=Math.floor(y/this.YUnit);}else{xIndex=Math.ceil(x/this.XUnit);yIndex=Math.ceil(y/this.YUnit);}return{flag:!(xIndex<0||yIndex<0),col:xIndex,row:yIndex};}function hGetRectPosition(rect,adjustValue){var x,y,xCover,yCover,temp,result;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;if(x<0||y<0||xCover>this.XCount||yCover>this.YCount||x+xCover>this.XCount||y+yCover>this.YCount){if(!adjustValue){result=null;}else{result={x:Math.max(0,x),y:Math.max(0,y),xRange:Math.min(xCover,this.XCount),yRange:Math.min(yCover,this.YCount)};}}else{result={x:x,y:y,xRange:xCover,yRange:yCover};}return result;}function hIndexToPoint(x,y,point){if(point){point.x=this.Origin.x+x*this.XUnit;point.y=this.Origin.y+y*this.YUnit;return point;}return new $C.Point2D({x:this.Origin.x+x*this.XUnit,y:this.Origin.y+y*this.YUnit});}function hIsOccupiedByHostMarkerRect(hostMarker,x,y){var lX,lY,lXRange,lYRange,lRetVal;lRetVal=hGetRectPosition.call(this,hostMarker,true);lX=lRetVal.x;lY=lRetVal.y;lXRange=lRetVal.xRange;lYRange=lRetVal.yRange;return(x>=lX&&x<=lX+lXRange&&y>=lY&&lY<=lY+lYRange);}function hIsOccupiedByHostMarkerCircle(center,radius,x,y){var i,xIndex,yIndex,point=new $C.Point2D();for(i=0;i<4;++i){xIndex=x+kOffset[i][0];yIndex=y+kOffset[i][1];point=hIndexToPoint.call(this,xIndex,yIndex,point);if(point.Distance(center)<radius){return true;}}return false;}function hGetApproximateCenterFromTopLeft(topLeftPoint,xOffset,yOffset){var point=new $C.Point2D({Point2D:topLeftPoint});point.x+=Math.ceil((0.5*xOffset)*this.XUnit);point.y+=Math.ceil((0.5*yOffset)*this.YUnit);return point;}function hCountOverlapsInRect(startX,startY,xCover,yCover,point,limit){var count=0,i,j,matrix=this.Matrix,tempPoint;for(j=0;j<yCover;++j){for(i=0;i<xCover;++i){count+=matrix[startY+j][startX+i];if(count>limit){return count;}}}tempPoint=hIndexToPoint.call(this,startX,startY);point.x=tempPoint.x;point.y=tempPoint.y;return count;}function hTreatTiltOccupation(occupy,isAdd,is45){return true;}function hGetRectRange(rect){var x,y,xCover,yCover,temp;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;return{xRange:xCover,yRange:yCover};}function hDirection(point1,point2,point3){var dir1,dir2;dir1=new $C.Vector2D({StartPoint:point1,EndPoint:point3});dir2=new $C.Vector2D({StartPoint:point1,EndPoint:point2});return dir1.CrossProduct(dir2);}function hOnSegment(point1,point2,point3){var xMax,xMin,yMax,yMin;if(point1.x<point2.x){xMin=point1.x;xMax=point2.x;}else{xMin=point2.x;xMax=point1.x;}if(point1.y<point2.y){yMin=point1.y;yMax=point2.y;}else{yMin=point2.y;yMax=point1.y;}return !(point3.x<xMin||point3.x>xMax||point3.y<yMin||point3.y>yMax);}function hSegmentsIntersection(point1,point2,point3,point4){var d1=hDirection.call(this,point3,point4,point1),d2=hDirection.call(this,point3,point4,point2),d3=hDirection.call(this,point1,point2,point3),d4=hDirection.call(this,point1,point2,point4);if(d1*d2<0&&d3*d4<0){return true;}if(d1===0&&hOnSegment.call(this,point3,point4,point1)){return true;}if(d2===0&&hOnSegment.call(this,point3,point4,point2)){return true;}if(d3===0&&hOnSegment.call(this,point1,point2,point3)){return true;}if(d4===0&&hOnSegment.call(this,point1,point2,point4)){return true;}return false;}function hSearchAlongAxes(point,markerCenter,originIndex,xyOffset,rectCover,alreadyHasOnePlacement,isYFirst){var position=new $C.Point2D(),limit=1,outerStart,innerStart,outerRange,innerRange,outerOffset,innerOffset,outerCover,innerCover,needCheckForFullAccommodation,i,j,startX,startY,tempPoint1,tempPoint2,distSqr1,distSqr2,result=null;if(isYFirst===undefined){isYFirst=true;}outerStart=isYFirst?originIndex.x:originIndex.y;innerStart=originIndex.x+originIndex.y-outerStart;outerRange=isYFirst?this.XCount:this.YCount;innerRange=this.XCount+this.YCount-outerRange;outerOffset=isYFirst?xyOffset.x:xyOffset.y;innerOffset=xyOffset.x+xyOffset.y-outerOffset;outerCover=isYFirst?rectCover.x:rectCover.y;innerCover=rectCover.x+rectCover.y-outerCover;needCheckForFullAccommodation=(xyOffset.x===-1);for(i=outerStart;
/*lIsFound && */
(i>=0&&i<outerRange);i+=outerOffset){if(i+outerCover>outerRange||i+outerCover<0){continue;}for(j=innerStart;
/*lIsFound &&*/
(j>=0&&j<innerRange);j+=innerOffset){if(j+innerCover>innerRange||j+innerCover<0){continue;}startX=isYFirst?i:j;startY=i+j-startX;if(startX<0||startY<0){continue;}if(hCountOverlapsInRect.call(this,startX,startY,rectCover.x,rectCover.y,position,limit)<=limit){if(alreadyHasOnePlacement){tempPoint1=hGetApproximateCenterFromTopLeft.call(this,point,rectCover.x,rectCover.y);distSqr1=tempPoint1.DistanceSquared(markerCenter);tempPoint2=hGetApproximateCenterFromTopLeft.call(this,position,rectCover.x,rectCover.y);distSqr2=tempPoint2.DistanceSquared(markerCenter);if(distSqr1>distSqr2){result=position;}}else{result=position;alreadyHasOnePlacement=true;}if(!needCheckForFullAccommodation||(isYFirst&&needCheckForFullAccommodation&&(startX+rectCover.x)<=originIndex.x)){return result;}if(isYFirst){i=originIndex.x-rectCover.x;j=innerStart;}}}}return result;}function hSearchInAreas(position,markerCenter,originX,originY,width,height){var atLeastOneFound=false,eachArea,addX,addY,offset,originIndex,xyOffset,rectCover;for(eachArea=0;eachArea<4;++eachArea){addX=(eachArea===0||eachArea===1)?-1:1;addY=(eachArea===1||eachArea===2)?-1:1;offset=(eachArea===0||eachArea===1)?0:1;originIndex=new $C.Point2D({x:originX+offset,y:originY});xyOffset=new $C.Point2D({x:addX,y:addY});rectCover=new $C.Point2D({x:width,y:height});atLeastOneFound=(hSearchAlongAxes.call(this,position,markerCenter,originIndex,xyOffset,rectCover,atLeastOneFound)!==null);}return atLeastOneFound;}function hAreTwoRectsFitPadding(rectDataLabel,rect,padding){return((rectDataLabel.x+rectDataLabel.width+padding<=rect.x)||(rectDataLabel.x>=rect.x+rect.width+padding)||(rectDataLabel.y+rectDataLabel.height+padding<=rect.y)||(rectDataLabel.y>=rect.y+rect.height+padding));}function hAreTwoObjectsFitPadding(center,radius,rectDataLabel,padding){return !((center.Distance(rectDataLabel.GetTopLeft())<radius+padding)||(center.Distance(rectDataLabel.GetBottomLeft())<radius+padding)||(center.Distance(rectDataLabel.GetTopRight())<radius+padding)||(center.Distance(rectDataLabel.GetBottomRight())<radius+padding));}function hPopulateOneColumn(columnObject,columnElementCount,defaultValue){var oneColumnVector=[];for(var i=0;i<columnElementCount;i++){oneColumnVector[i]=defaultValue===0?0:[];}columnObject.push(oneColumnVector);}function hPopulateGrid(props){var propRect,propUnit,propRectWidth,propRectHeight,propUnitWidth,propUnitHeight,i=0,j=0,matrixType,gridOccupyCircleVector;props.MatrixType=props.MatrixType||15;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];if(props&&props.Rect&&props.Unit){propRect=props.Rect;propUnit=props.Unit;propRectWidth=propRect.width;propRectHeight=propRect.height;propUnitWidth=propUnit.width;propUnitHeight=propUnit.height;matrixType=props.MatrixType;this.IsValid=((propRectWidth*propRectHeight>propUnitWidth*propUnitHeight)&&(propRectWidth>=propUnitWidth)&&(propRectHeight>=propUnitHeight));if(!this.IsValid){return false;}this.Origin=propRect.GetTopLeft();this.XCount=Math.ceil(propRectWidth/propUnitWidth);this.YCount=Math.ceil(propRectHeight/propUnitHeight);this.XUnit=propUnitWidth;this.YUnit=propUnitHeight;for(i=0;i<this.YCount;++i){if(matrixType&kGridGeneric){hPopulateOneColumn.call(this,this.Matrix,this.XCount,0);}if(matrixType&kGridOccupy){hPopulateOneColumn.call(this,this.MatrixOccupy,this.XCount,1);}if(matrixType&kGridObject){hPopulateOneColumn.call(this,this.MatrixOccupyObject,this.XCount,1);}if(matrixType&kGridCircle){hPopulateOneColumn.call(this,this.MatrixOccupyCircleObject,this.XCount,1);}}return true;}return false;}mstrmojo.chart.GridMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridMap",IsValid:false,Metric:0,XUnit:0,YUnit:0,XCount:0,YCount:0,Origin:null,Matrix:null,MatrixOccupy:null,MatrixOccupyObject:null,MatrixOccupyCircleObject:null,dataLabelPadding:5,initialized:false,init:function init(props){this.initialized=hPopulateGrid.call(this,props);},populate:function populate(props){this.initialized=this.initialized||hPopulateGrid.call(this,props);},destroy:function destroy(){this.initialized=this.IsValid=false;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];},ToMetric:function ToMetric(){var i,j,count=0,xCount=this.XCount,yCount=this.YCount;for(i=0;i<yCount;++i){for(j=0;j<xCount;++j){if(this.Matrix[i][j]>=2){++count;}}}return count;},ToInspectedMetric:function ToInspectedMetric(shapeInfo){var density={Max:-100,Min:10000000000,Occupied:0,Total:0},rect=shapeInfo.BoundingBox,range=hGetRectPosition.call(this,rect,true),isPie=shapeInfo.Shape===$SHP._PIE,position=shapeInfo.Position,isCircle=isPie||(shapeInfo.Shape===$SHP._CIRCLE),inspectPoint=new $C.Point2D(),x=range.x,y=range.y,i,j,k,radius=shapeInfo.Size,restrictRadius=0,xRange=range.xRange,yRange=range.yRange;if(isPie&&shapeInfo.ExclusiveRect){restrictRadius=0.5*shapeInfo.ExclusiveRect.width;}for(i=0;i<range.xRange;++i){for(j=0;j<range.yRange;++j){x=range.x+i;y=range.y+j;if(x>=this.XCount||y>=this.YCount){continue;}var shouldCount=false;if(isCircle){for(k=0;k<4;++k){var distance,tempIndexY=y+kOffset[k][0],tempIndexX=x+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}inspectPoint=hIndexToPoint.call(this,tempIndexX,tempIndexY,inspectPoint);distance=inspectPoint.Distance(position);if(distance<radius&&distance>=restrictRadius){shouldCount=true;break;}}}else{shouldCount=true;}if(shouldCount){var metric=this.Matrix[y][x];density.Max=Math.max(metric,density.Max);density.Min=Math.min(metric,density.Min);density.Occupied+=metric;}}}density.Total=range.xRange*range.yRange;return density;},veryDense:function veryDense(){return false;},UpdateMatrixCircle:function UpdateMatrixCircle(center,radius,isAdd){var x,y,xRange,yRange,occupyArea=new $C.Rect2D({x:center.x-radius,y:center.y-radius,height:radius*2,width:radius*2}),returnVal,delta=isAdd?1:-1,i,j,gridCellIndexPie,xIndex,yIndex,k,addMetric=0,matrix=this.Matrix,tempIndexX,tempIndexY,point=new $C.Point2D();returnVal=hGetRectPosition.call(this,occupyArea,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){gridCellIndexPie=false;xIndex=x+i;yIndex=y+j;if(xIndex>=this.XCount||yIndex>=this.YCount){continue;}for(k=0;k<4;++k){tempIndexY=y+i+kOffset[k][0];tempIndexX=x+j+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}point=hIndexToPoint.call(this,tempIndexX,tempIndexY,point);if(point.Distance(center)<radius){gridCellIndexPie=true;break;}}if(gridCellIndexPie){matrix[yIndex][xIndex]+=delta;if(matrix[yIndex][xIndex]===1){++addMetric;}}}}this.Metric+=addMetric;return true;},UpdateMatrixDataLabelMarker:function UpdateMatrixDataLabelMarker(isDataLabel,occupy){var x,y,xRange,yRange,i,j,xIndex,yIndex,matrix=this.Matrix,addMetric=0,returnVal;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(matrix[yIndex]&&matrix[yIndex][xIndex]!==undefined){matrix[yIndex][xIndex]+=k_MaxCount;if(matrix[yIndex][xIndex]===k_MaxCount){addMetric++;}}}}this.Metric+=addMetric;return true;},UpdateMatrixPolyLine:function UpdateMatrixPolyLine(occupy,isAdd){var linePoints,i,numberOfLinePoints;if(isAdd===undefined){isAdd=true;}if(occupy===null||occupy===undefined){return false;}linePoints=occupy.mLinePoints;numberOfLinePoints=linePoints.length;for(i=0;i<numberOfLinePoints-1;++i){this.UpdateMatrixLineSegment(linePoints[i],linePoints[i+1],isAdd);}return true;},UpdateMatrixLineSegment:function UpdateMatrixLineSegment(segmentStart,segmentEnd,isAdd){var startPoint=new $C.Point2D({Point2D:segmentStart}),endPoint=new $C.Point2D({Point2D:segmentEnd}),tempPoint,startX,startY,endX,endY,deltaX,deltaY,ratio,temp,interEnd,tempStartY,tempEndX,tempEndY,i,j,matrix=this.Matrix,addMetric=0,subtractMetric=0,yOffset,yExchanged,xIndex,yIndex,delta;if(segmentStart.x>segmentEnd.x){tempPoint=startPoint;startPoint=endPoint;endPoint=tempPoint;}temp=hPointToIndex.call(this,startPoint);startX=temp.col;startY=temp.row;temp=hPointToIndex.call(this,endPoint);endX=temp.col;endY=temp.row;if(startPoint.x!==endPoint.x){deltaX=endPoint.x-startPoint.x;deltaY=endPoint.y-startPoint.y;ratio=deltaY/deltaX;interEnd=new $C.Point2D({Point2D:endPoint});tempStartY=startY;for(i=startX;i<=endX;++i){if(i<0||i>=this.XCount){continue;}deltaX=(i+1)*this.XUnit-startPoint.x;if(i===endX){deltaX=endPoint.x-startPoint.x;}yOffset=deltaX*ratio;interEnd.x=(i+1)*this.XUnit;interEnd.y=startPoint.y+yOffset;temp=hPointToIndex.call(this,interEnd);tempEndX=temp.col;tempEndY=temp.row;yExchanged=false;if(tempStartY>tempEndY){temp=tempStartY;tempStartY=tempEndY;tempEndY=temp;yExchanged=true;}for(j=tempStartY;j<=tempEndY;++j){if(j<0||j>=this.YCount){continue;}xIndex=i;yIndex=j;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}if(!yExchanged){tempStartY=tempEndY;}}}else{if(startY>endY){temp=startY;startY=endY;endY=temp;}for(i=startY;i<=endY;++i){if(i<0||i>=this.YCount){continue;}if(startX<0||startX>=this.XCount){break;}xIndex=startX;yIndex=i;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygon:function UpdateMatrixPolygon(occupy,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);if(occupy.PointInObject(vertex)){occupied=true;break;}}if(!occupied){vertex=hIndexToPoint.call(this,xIndex,yIndex);currentUnit=new $C.Rect2D({x:vertex.x,y:vertex.y,width:this.XUnit,height:this.YUnit});for(k=0;k<polygonPoints.length;++k){if(currentUnit.PointInRectangle(polygonPoints[k])){occupied=true;break;}}}if(!occupied){len=polygonPoints.length;for(k=0;k<4;++k){occupied=false;for(l=0;l<len;++l){var lP1,lP2,lP3,lP4;lP1=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);lP2=hIndexToPoint.call(this,xIndex+kOffset[(k+1)%4][0],yIndex+kOffset[(k+1)%4][1]);lP3=polygonPoints[l];lP4=polygonPoints[(l+1)%len];occupied=hSegmentsIntersection.call(this,lP1,lP2,lP3,lP4);if(occupied){break;}}if(occupied){break;}}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygonWithCanvas:function UpdateMatrixPolygonWithCanvas(occupy,canvas,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}var ctx=canvas.getContext("2d");ctx.globalAlpha=0.01;ctx.beginPath();ctx.moveTo(polygonPoints[0].x,polygonPoints[0].y);for(i=1;i<polygonPoints.length;i++){ctx.lineTo(polygonPoints[i].x,polygonPoints[i].y);}ctx.closePath();ctx.fill();var imagedata=ctx.getImageData(0,0,canvas.width,canvas.height);var data=imagedata.data;function getAlpha(x,y){var i=((y*canvas.width)+x)*4;var a=data[i+3];return a/2;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);var alpha=getAlpha(vertex.x,vertex.y);if(alpha>0){occupied=true;break;}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixRect:function UpdateMatrixRect(occupy,isAdd,rotation){var isTilt,delta,x,y,xRange,yRange,lVal,i,j,addMetric=0,subtractMetric=0,matrix=this.Matrix,indexX,indexY;if(isAdd===undefined){isAdd=true;}rotation=rotation||$FR.Normal;isTilt=(rotation===$FR.Rotate45||rotation===$FR.Rotate315);if(isTilt){return hTreatTiltOccupation.call(this,occupy,(rotation===$FR.Rotate45));}delta=isAdd?1:-1;lVal=hGetRectPosition.call(this,occupy,true);x=lVal.x;y=lVal.y;xRange=lVal.xRange;yRange=lVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){indexY=y+i;indexX=x+j;matrix[indexY][indexX]+=delta;if(isAdd&&matrix[indexY][indexX]===2){addMetric++;}if(!isAdd&&matrix[indexY][indexX]===0){subtractMetric++;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixOccupyCircleObject:function UpdateMatrixOccupyCircleObject(occupy,center,radius){var x,y,xRange,yRange,i,j,xIndex,yIndex,circleOccupied={},returnVal,circleMatrix=this.MatrixOccupyCircleObject;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){if((yIndex<circleMatrix.length)&&(xIndex<circleMatrix[yIndex].length)){circleOccupied.c=center;circleOccupied.r=radius;circleMatrix[yIndex][xIndex].push(circleOccupied);}}}}return true;},UpdateMatrixOccupyObject:function UpdateMatrixOccupyObject(occupy,occupiedObject){var x,y,xRange,yRange,xIndex,yIndex,returnVal,i,j,rectMatrix=this.MatrixOccupyObject;returnVal=hGetRectPosition.call(this,occupy);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;rectMatrix[yIndex][xIndex].push(occupiedObject);}}return true;},UpdateMatrixOccupy:function UpdateMatrixOccupy(isDataLabel,occupy,dataLabelIndex){var x,y,xRange,yRange,returnVal,i,j,occupyMatrix=this.MatrixOccupy,xIndex,yIndex;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(isDataLabel){occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:1});}else{occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:0});}}}},IsFitPaddingWithBorder:function IsFitPaddingWithBorder(occupy,frame){var dataLabelPadding=this.dataLabelPadding;if(occupy.x<frame.x+dataLabelPadding||occupy.x+occupy.width+dataLabelPadding>frame.x+frame.width){return false;}if(occupy.y<frame.y+dataLabelPadding||occupy.y+occupy.height+dataLabelPadding>frame.y+frame.height){return false;}return true;},IsAccomdatableConsiderRotation:function IsAccomdatableConsiderRotation(hostMarker,occupy,position,rotation){var isFound,xCover,yCover,returnVal,markerPosition,col,row,rowColInfo;if(rotation===undefined){rotation=$FR.Normal;}returnVal=hGetRectRange.call(this,occupy);xCover=returnVal.xRange;yCover=returnVal.yRange;if((xCover>this.XCount)||(yCover>this.YCount)){return false;}markerPosition=hostMarker.GetCenter();rowColInfo=hPointToIndex.call(this,markerPosition);if(!rowColInfo.flag){return false;}row=rowColInfo.row;col=rowColInfo.col;isFound=hSearchInAreas.call(this,position,markerPosition,col,row,xCover,yCover);return isFound;},IsAccomdatableDataLabel:function IsAccomdatableDataLabel(hostMarker,occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=2){return false;}if(count===1){if(!hIsOccupiedByHostMarkerRect.call(this,hostMarker,x+j,y+i)){return false;}}}}return true;},IsAccomdatableConsiderLocation:function IsAccomdatableConsiderLocation(occupy,location){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<=xRange;++j){switch(location){case $GMDLP._TOP:if(i===yRange){continue;}break;case $GMDLP._BOTTOM:if(i===-1){continue;}break;case $GMDLP._LEFT:if(j===xRange){continue;}break;case $GMDLP._RIGHT:if(j===-1){continue;}break;default:}count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableConsiderLabelPaddingOnly:function IsAccomdatableConsiderLabelPaddingOnly(occupy,isExceptDataLabel){var returnVal,x,y,xRange,yRange,xIndex,yIndex,count,i;if(isExceptDataLabel){returnVal=this.IsAccomdatableNoPadding(occupy);if(!returnVal){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}return true;}return this.IsAccomdatableNoPadding(occupy);},IsAccomdatableNoPadding:function IsAccomdatableNoPadding(occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableCircle:function IsAccomdatableCircle(center,radius,occupy){var lX,lY,lXRange,lYRange,lVal,lCount,i,j;lVal=hGetRectPosition.call(this,occupy,false);if(lVal===null){return false;}lX=lVal.x;lY=lVal.y;lXRange=lVal.xRange;lYRange=lVal.yRange;for(i=0;i<lYRange;++i){for(j=0;j<lXRange;++j){lCount=this.Matrix[lY+i][lX+j];if(lCount>=2){return false;}if(lCount===1){if(!hIsOccupiedByHostMarkerCircle.call(this,center,radius,lX+j,lY+i)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingCircle:function IsAccomdatableConsiderAccuDistPaddingCircle(center,radius,occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,objects,i,j,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableCircle(center,radius,occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingRect:function IsAccomdatableConsiderAccuDistPaddingRect(occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,i,j,objects,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableNoPadding(occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}return true;},ToDraw:function ToDraw(graphObjManager){var xCount=this.XCount,yCount=this.YCount,matrix=this.Matrix,gridCellOccupied=[],i,j,k,gridPoints,point,tripleId,gridCell,formatLine;for(i=0;i<xCount;++i){for(j=0;j<yCount;++j){if(matrix[i][j]>=1){gridPoints=[];for(k=0;k<5;++k){point=hIndexToPoint.call(this,j+kOffset[k%4][0],i+kOffset[k%4][1]);gridPoints.push(point);}tripleId=new $C.TripleId({ObjectId:$GO.DssGraphDataLine});gridCell=new $C.PolyLineObject({TripleId:tripleId,GraphObjectManager:graphObjManager,PolyLine:gridPoints});formatLine=gridCell.mFormatLinePtr;formatLine.mLineColor=65280;formatLine.mLineThickness=1;gridCellOccupied.push(gridCell);}}}return gridCellOccupied;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","GraphObjectManager","ShapeObject","TextObject","StraightLineObject","GraphCollectionObject","PolygonObject","PolyLineObject","GraphAxisGeneral","AxisObject","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphTitleName","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphAxisLabelLocation");var Ae=mstrmojo.chart,AX=Ae.ChartConstants,N=Ae.enums,AA=N.EnumCollectionType,Ab=N.EnumGraphMajorType,Aj=N.EnumDSSExtraGraphObject,Ap=N.EnumAnchorPoint,Z=N.EnumAxisLabelsLocation,Ai=N.EnumAxisDirection,V=N.EnumGraphObjectType,AH=Ae.gNullGroupId,o=Ae.gNullTripleId,AC=Ae.gNullObjectId,F=0,E=1,AG=2,r=3,q=4,p=5,n=6,u=7,AE=8,D=100,Am=2;var AV=mstrmojo.chart.model,AJ=AV.enums,Au=AJ.EnumDSSGraphProperty,Av=AJ.EnumDSSGraphObject,AO=AJ.EnumDSSGraphTitleName,Ah=AJ.EnumDSSExtraGraphProperty,H=AJ.EnumDSSGraphFontRotation,Aw=AJ.EnumDSSGraphGridLineType,O=AJ.EnumDSSGraphAxisLabelLocation;var g=1,AF=2,b=4,x=8;var X=null,M=null,L=null,AZ=null,w=null;function AR(){if(!this.mUseDepth){return ;}var A2=this.mDeviceDataArea,A1=this.mDepthOffset;A2.x+=A1.x;A2.y+=A1.y;this.mUseDepth=false;}function Ar(A1){switch(A1.mGridStyle){case Aw.DssGraphGridRegular:case Aw.DssGraphGridBoth:A1.mGridStyle=Aw.DssGraphGridRegular;break;case Aw.DssGraphGridInnerTicks:case Aw.DssGraphGridOuterTicks:case Aw.DssGraphGridSpanningTicks:A1.mShowGridLines=false;break;default:A1.mGridStyle=Aw.DssGraphGridRegular;}}function T(A4,A8,A9){var BB,A6,A5,A1,BC,A7,BD,A3=this.mDeviceDataArea,A2=true,BA=true;if(this.IsVerticalAxis()){A2=(A4.x===A3.x);BA=(A4.x+A4.width===A3.x+A3.width);}else{A2=(A4.y+A4.height===A3.y+A3.height);BA=(A4.y===A3.y);}if(A2&&BA){this.generateGridsByArea(A9);this.MoveGraphObjectList(A8);return ;}BB=this.mUseDepth;A6=A3;A5=this.mMajorGrid.mShowGridLines;A1=this.mMinorGrid.mShowGridLines;BC=this.mMajorGrid.mGridStyle;A7=this.mMinorGrid.mGridStyle;BD=this.mAxisInfo.mAxisLabelsLocation;this.mDeviceDataArea=A4;if(A2||BA){if(A2){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}if(!this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){AR.call(this);}}else{AR.call(this);Ar.call(this,this.mMajorGrid);Ar.call(this,this.mMinorGrid);}this.generateGridsByArea(A9);this.MoveGraphObjectList(A8);this.mUseDepth=BB;this.mDeviceDataArea.ResetRect(A6);this.mMajorGrid.mShowGridLines=A5;this.mMinorGrid.mShowGridLines=A1;this.mMajorGrid.mGridStyle=BC;this.mMinorGrid.mGridStyle=A7;this.mAxisInfo.mAxisLabelsLocation=BD;}function AL(A1){var A4=this.mDeviceDataArea,A3,A2;switch(A1){case Z.ALL_BOTTOM:A3=A4.GetBottomLeft();A2=A4.GetBottomRight();if(this.mChartContextPtr.mIsTimeSeriesChart){A3.x=0;}break;case Z.ALL_TOP:A3=A4.GetTopLeft();A2=A4.GetTopRight();break;case Z.ALL_LEFT:A3=A4.GetTopLeft();A2=A4.GetBottomLeft();break;case Z.ALL_RIGHT:A3=A4.GetTopRight();A2=A4.GetBottomRight();break;default:A3=null;A2=null;break;}return{Start:A3,End:A2};}function Az(A1){var A5,A2,A4,A3;if(this.mUseDepth){return ;}A3=AL.call(this,A1);A5=A3.Start;A2=A3.End;A4=new Ae.StraightLineObject({TripleId:this.mTripleId,GraphObjectManager:this,StartPoint:A5,EndPoint:A2,GraphCollectionObject:this.mpAxisLineSet});this.mManagerGraphObjectList.push(A4);this.mpAxisLineSet.AddGraphObject(A4);}function B(){var A2,A3,A5,A6,A9=[],A1,A7,A8,A4;A5=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;A6=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;if(this.hasDepthAxisLine(A5)){A8=AL.call(this,A5);}else{if(this.hasDepthAxisLine(A6)){A8=AL.call(this,A6);}else{return ;}}A2=A8.Start;A3=A8.End;A9.push(A2);A9.push(A3);A9.push(A3.Shifted(this.mDepthOffset));A9.push(A2.Shifted(this.mDepthOffset));A4=new Ae.TripleId({ObjectId:Av.DssGraphFrame});A1=new Ae.PolygonObject({TripleId:A4,GraphObjectManager:this,Polygon:A9});A1.mIsDetectable=false;A7=A1.GetFormatFill();A7.MakeDarker(this.IsVerticalAxis()?0.8:0.6);this.mManagerGraphObjectList.push(A1);}function e(BA,A5,A7,A9,BB,A1){var A3,A8,A4,A2,A6;A8=this.mChartContextPtr.CalculateDepthOffset(A7,this.mDepthDirection,true);A3=new Ae.Point2D({x:A8.OffsetX,y:A8.OffsetY});A1.splice(0,A1.length);A4=new Ae.Point2D();A2=new Ae.Point2D();A4.init({Point2D:A9});A2.init({Point2D:BB});if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){A4.init({Point2D:BB});A2.init({Point2D:A9});}A2=A2.Shifted(this.mDepthOffset);A6=new Ae.Point2D();A6.Reset(0,0);if(this.IsVerticalAxis()){A6.x=this.IsLeftDirection()?A7:-A7;}else{A6.y=this.IsDownDirection()?-A7:A7;}switch(A5){case Aw.DssGraphGridRegular:A1.push(A4);A1.push(A4.Shifted(this.mDepthOffset));A1.push(A2);break;case Aw.DssGraphGridBoth:if(this.hasDepthAxisLine(BA)||this.HasLabelsOnBothSides()){A1.push(A4.Shifted(A6));}A1.push(A4);A1.push(A4.Shifted(this.mDepthOffset));A1.push(A2);if(!this.hasDepthAxisLine(BA)||this.HasLabelsOnBothSides()){A1.push(A2.Shifted(-A6));}break;case Aw.DssGraphGridInnerTicks:if(this.hasDepthAxisLine(BA)){A1.push(A4);A1.push(A4.Shifted(A3));}else{A1.push(A2);A1.push(A2.Shifted(A6));}break;case Aw.DssGraphGridOuterTicks:if(this.hasDepthAxisLine(BA)){A1.push(A4.Shifted(A6));A1.push(A4);}else{A1.push(A2);A1.push(A2.Shifted(-A6));}break;case Aw.DssGraphGridSpanningTicks:if(this.hasDepthAxisLine(BA)){A1.push(A4.Shifted(A6));A1.push(A4);A1.push(A4.Shifted(A3));}else{A1.push(A2.Shifted(A6));A1.push(A2.Shifted(-A6));}break;}}mstrmojo.chart.Axis=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Axis",mDeviceDataArea:null,mTickLength:-1,mUseDepth:false,mDepth:0,mDepthDirection:0,mDepthOffset:null,mManagerGraphObjectList:null,mpMajorGridSet:null,mpMinorGridSet:null,mpAxisLabelSet:null,mpAxisLineSet:null,mIsUniformAxis:false,maxLabelLength:-1,hasLabelCreated:false,hasMajorTickCreated:false,hasMinorTickCreated:false,mLabelInterval:0,resizeAction:-1,mLabelList:null,restrictWidth:null,restrictHeight:null,mIsShown:true,mIntegrity:15,init:function AK(A1){this._super(A1);var A2=this.mChartContextPtr;this.mLabelList=[];if(this.mUseDepth){this.mDepthOffset=new Ae.Point2D();}this.mManagerGraphObjectList=[];if(!!A1.IsUA){this.mIsUniformAxis=true;}if(this.mIsUniformAxis){this.restrictHeight=this.restrictWidth=-1;}this.mAxisInfo=new Ae.GraphAxisGeneral(A1);this.mMajorGrid={mShowGridLines:true,mGridStyle:Aw.DssGraphGridRegular,mUseManualGrid:false,mGridInterval:0};this.mMinorGrid={mShowGridLines:false,mGridStyle:Aw.DssGraphGridNone,mUseManualGrid:false,mGridInterval:0};switch(A1.AxisDirection){case Ai.AD_X:this.mTickLength=A2.mGraphHeight/D+1;break;case Ai.AD_Y:this.mTickLength=A2.mGraphWidth/D+1;break;case Ai.AD_Z:this.mTickLength=2;break;}this.mTickLength=Math.max(4,this.mTickLength);},SetDeviceDataArea:function I(A1){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Ae.Rect2D({Rect2D:A1});}else{this.mDeviceDataArea.ResetRect(A1);}},IsReverseOrder:function W(){return this.mAxisInfo.mAxisDrawInReverse;},SetIntegrity:function s(A1){this.mIntegrity=A1;if((A1&g)===0){this.mAxisInfo.mShowAxisLine=false;this.mMajorGrid.mGridStyle=Aw.DssGraphGridNone;}if((A1&AF)===0){this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Aw.DssGraphGridNone;}if((A1&x)===0){this.mMinorGrid.mShowGridLines=false;this.mMinorGrid.mGridStyle=Aw.DssGraphGridNone;}if((A1&b)===0){this.mAxisInfo.mShowAxisLabels=false;}},HasLabelsOnBothSides:function Aa(){return(this.mAxisInfo.mAxisLabelsLocation===Z.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===Z.ALL_LEFT_RIGHT)&&!(this.mChartContextPtr.mIsTimeSeriesChart);},IsVerticalAxis:function J(){return this.mAxisInfo.mAxisDirection===Ai.AD_Y;},IsLeftDirection:function An(){return this.mDepthDirection>90&&this.mDepthDirection<270;},IsDownDirection:function z(){return this.mDepthDirection>180;},HasOuterTicks:function AT(A1){return A1===Aw.DssGraphGridOuterTicks||A1===Aw.DssGraphGridBoth||A1===Aw.DssGraphGridSpanningTicks;},HasTwoGridLineParts:function AI(A1){return this.HasLabelsOnBothSides()&&(A1===Aw.DssGraphGridInnerTicks||A1===Aw.DssGraphGridOuterTicks||A1===Aw.DssGraphGridSpanningTicks);},IsLogarithmic:function Ao(){return false;},getIndex:function Q(){switch(this.mTripleId.mObjectId){case Av.DssGraphO1Body:return F;case Av.DssGraphO2Body:return E;case Av.DssGraphX1Body:return AG;case Av.DssGraphY1Body:return r;case Av.DssGraphY2Body:return q;case Av.DssGraphY3Body:return p;case Av.DssGraphY4Body:return n;case Av.DssGraphZBody:return u;case Av.DssGraphX2Body:return AE;default:return 0;}},GetInterlacedGridId:function A0(){return Aj.DssGraphO1Interlaced+this.getIndex();},ReserveTitleArea:function d(A4){var A2,A1,A6,A3,A5;if(!this.mAxisInfo.mShowAxisTitle){return ;}A2=this.getIndex();A1=Ae.gAxisObjects[A2].mTitleId;if(A1.mObjectId===Ae.gNullObjectId){return ;}A6=new Ae.TripleId({ObjectId:A1.mObjectId,SeriesId:Ae.gNullSeriesId,GroupId:AH});A3=new Ae.Rect2D();this.InitObjectSet(A6,V.GOT_AXIS_TITLE);A5=new Ae.TextObject({TripleId:A6,GraphObjectManager:this,rect:A3,ParentObject:this.mpAxisTitleSet});this.mpAxisTitleSet.AddGraphObject(A5);A5.SetText(this.mAxisTitle);this.mGraphObjectList.push(A5);this.ReserveTitle(A4,false);},ReserveTitle:function AY(A6,A3){var A5,A2,A1,A4;if(!this.mAxisInfo.mShowAxisTitle){return ;}A5=this.mGraphObjectList[0];A2=A5.GetBoundingRect();A1=A3?-1:1;A4=((this.IsVerticalAxis()?A2.width:A2.height)+Am)*A1;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A6.height-=A4;break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===Av.DssGraphO1Body){A6.height-=A4;}else{A6.y+=A4;A6.height-=A4;}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A6.x+=A4;A6.width-=A4;break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===Av.DssGraphO1Body){A6.x+=A4;A6.width-=A4;}else{A6.width-=A4;}break;}},UpdateTitleLocation:function Aq(A6){var A5,A3,A2,A1,A4,A7;if(!this.mAxisInfo.mShowAxisTitle){return ;}A5=this.mGraphObjectList[0];if(this.mChartContextPtr.mManualLayoutMode&&!this.mChartContextPtr.mRecalculateFrame){this.MoveTitleForManual(A5);return ;}A3=A5.GetBoundingRect();A2=this.GetLabelOffset(this.mAxisInfo.mAxisLabelsLocation);if(this.IsVerticalAxis()){A1=A6.y+A6.height/2+A2.y;}else{A1=A6.x+A6.width/2+A2.x;}A4=(this.IsVerticalAxis()?A3.width:A3.height)/2+Am;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A5.MoveTo(A1,A6.y+A6.height+A4,Ap.CENTER);break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===Av.DssGraphO1Body){A5.MoveTo(A1,A6.y+A6.height+A4,Ap.CENTER);}else{A5.MoveTo(A1,A6.y-A4,Ap.CENTER);}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A5.MoveTo(A6.x-A4,A1,Ap.CENTER);break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===Av.DssGraphO1Body){A5.MoveTo(A6.x-A4,A1,Ap.CENTER);}else{A5.MoveTo(A6.x+A6.width+A4,A1,Ap.CENTER);}break;}A7=A5.mTripleId;A3=A5.GetBoundingRectNoRotation();this.mChartContextPtr.PutLocation(this.getAxisTitleLocationId(A7.mObjectId),A3);},generateAxisLine:function Ax(A1){this.CreateAxisLine();return this.MoveGraphObjectList(A1);},CreateAxisLine:function k(){var A1;if(this.mUseDepth){B.call(this);return ;}if(!this.mAxisInfo.mShowAxisLine){return ;}A1=new Ae.TripleId({ObjectId:this.mTripleId.mObjectId});this.InitObjectSet(A1,V.GOT_AXIS_LINE);switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM_TOP:Az.call(this,Z.ALL_BOTTOM);Az.call(this,Z.ALL_TOP);break;case Z.ALL_LEFT_RIGHT:Az.call(this,Z.ALL_LEFT);Az.call(this,Z.ALL_RIGHT);break;default:Az.call(this,this.mAxisInfo.mAxisLabelsLocation);break;}},ReserveDepthAxisLine:function Al(A4,A2,A1){var A3;if(!this.mUseDepth){return ;}A3=new Ae.Point2D({Point2D:this.mDepthOffset});A3.x=Math.abs(A3.x);A3.y=Math.abs(A3.y);if(A2){A3.x=-A3.x;A3.y=-A3.y;}if(this.mAxisInfo.mAxisDirection===Ai.AD_X||A1){if(this.mDepthDirection<180){A4.y+=A3.y;A4.height-=A3.y;}else{A4.height-=A3.y;}}else{if(this.mAxisInfo.mAxisDirection===Ai.AD_Y||A1){if(this.mDepthDirection<90||this.mDepthDirection>270){A4.width-=A3.x;}else{A4.x+=A3.x;A4.width-=A3.x;}}}},TrimMarginsForDepthAxis:function AQ(A4,A5){var A3,A1,A2;A3=A4;A1=A5;if(!this.mUseDepth){A2={HighMargin:A1,LowMargin:A3};return A2;}if(this.IsVerticalAxis()){if(this.mDepthDirection<180){A1+=this.mDepthOffset.y;}else{A3-=this.mDepthOffset.y;}}else{if(this.mDepthDirection<90||this.mDepthDirection>270){A1-=this.mDepthOffset.x;}else{A3+=this.mDepthOffset.x;}}A1=(A1>=0)?A1:0;A3=(A3>=0)?A3:0;A2={HighMargin:A1,LowMargin:A3};return A2;},getDepthMargin:function y(A4,A5){if(!this.mUseDepth){return null;}var A2=this.mDepthOffset,A3=A4,A1=A5;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_LEFT:case Z.ALL_RIGHT:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A2.y>0){A3=A2.y;}else{A1=-A2.y;}}else{if(A2.y>0){A1=A2.y;}else{A3=-A2.y;}}break;case Z.ALL_BOTTOM:case Z.ALL_TOP:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A2.x>0){A1=A2.x;}else{A3=-A2.x;}}else{if(A2.x>0){A3=A2.x;}else{A1=-A2.x;}}break;case Z.ALL_LEFT_RIGHT:case Z.ALL_BOTTOM_TOP:break;default:return null;}return{highMargin:A1,lowMargin:A3};},GetLabelOffset:function S(A1,A2){if(!A2){A2=new Ae.Point2D();}A2.Reset(0,0);if((!this.mUseDepth)||this.hasDepthAxisLine(A1)){return A2;}A2.ResetPoint(this.mDepthOffset);return A2;},GenerateGridLinesEx:function Af(){this.GenerateGridLines(this.mDeviceDataArea,0,this.mGraphObjectList);},GenerateGridLines:function c(A2,A3,A1){if((this.mMajorGrid.mShowGridLines&&this.mMajorGrid.mGridStyle!==Aw.DssGraphGridNone)||(this.mMinorGrid.mShowGridLines&&this.mMinorGrid.mGridStyle!==Aw.DssGraphGridNone)){T.call(this,A2,A1,true);}},GenerateInterlacedGrids:function a(A2,A3,A1){if(this.mAxisInfo.mUseInterlacedGrids){T.call(this,A2,A1,false);}},MoveGraphObjectList:function C(A2){var A1,A3;A1=this.mManagerGraphObjectList.length;for(A3=0;A3<A1;++A3){A2.push(this.mManagerGraphObjectList[A3]);}this.mManagerGraphObjectList.splice(0,this.mManagerGraphObjectList.length);},GenerateOneLineObject:function At(A4,A3,A2){var A1;A1=new Ae.PolyLineObject({TripleId:A4,GraphObjectManager:this,PolyLine:A3,GraphCollectionObject:A2});A2.AddGraphObject(A1);this.mManagerGraphObjectList.push(A1);},SetDepthAndDirection:function Ac(A3,A1){var A2;this.mUseDepth=true;this.mDepth=A3;this.mDepthDirection=A1;A2=this.mChartContextPtr.CalculateDepthOffset(this.mDepth,this.mDepthDirection);this.mDepthOffset.x=A2.OffsetX;this.mDepthOffset.y=A2.OffsetY;},getAxisTitleLocationId:function Ad(A1){switch(A1){case AO.DssGraphTitleCategory:return Au.DssGraphTitleXLocation;case AO.DssGraphTitleY1:return Au.DssGraphTitleY1Location;case AO.DssGraphTitleY2:return Au.DssGraphTitleY2Location;case AO.DssGraph3DRowTitle:return Au.DssGraph3DRowTitleLocationNEW;case AO.DssGraph3DColTitle:return Au.DssGraph3DColTitleLocationNEW;case AO.DssGraph3DLYTitle:return Au.DssGraph3DLYTitleLocation;case AO.DssGraph3DRYTitle:return Au.DssGraph3DRYTitleLocation;default:return 0;}},MoveLabel:function AW(A7,A1,A3,A9){var A6,A4,BB,A5,A2;if(A9===undefined){A9=Ae.Axis.gLabelMargin;}A6=A7.GetTransformedRect(true);BB=A7.mFormatFontPtr.mFontRotation;if(X===null){X=new Ae.Point2D();}else{X.Reset(0,0);}switch(BB){case H.Rotate45:case H.Rotate315:case H.Normal:if(BB===H.Rotate45||BB===H.Rotate315){A4=(BB===H.Rotate45)?1:-1;A3.Reset((A3.x-A4*A3.y)*Math.SQRT1_2,(A4*A3.x+A3.y)*Math.SQRT1_2);A1.Reset((A1.x-A4*A1.y)*Math.SQRT1_2,(A4*A1.x+A1.y)*Math.SQRT1_2);}X.Reset(A6.width/2,A6.height/2);break;case H.Rotate90:X.Reset(A6.width/2,(A6.height+1)/2);break;case H.Rotate180:X.Reset((A6.width+1)/2,(A6.height+1)/2);break;case H.Rotate270:X.Reset((A6.width+1)/2,A6.height/2);break;case H.Custom:break;default:}A5=0.1;var BA=0,A8=0;if(Math.abs(A3.x)<A5||Math.abs(A3.y)<A5){if(Math.abs(A3.x)<A5&&A3.y<0){X.y=A6.height-X.y;}else{if(A3.x<0&&Math.abs(A3.y)<A5){X.x=A6.width-X.x;}}A2=X.x*Math.abs(A3.x)+X.y*Math.abs(A3.y)+A9;BA=A1.x+A2*A3.x;A8=A1.y+A2*A3.y;}else{if(A3.x>0&&A3.y<0){X.y=-(A6.height-X.y);}else{if(A3.x<0&&A3.x>0){X.x=-(A6.width-X.x);}else{if(A3.x<0&&A3.y<0){X.Reset(-(A6.width-X.x),-(A6.height-X.y));}}}BA=A1.x+A9*A3.x+X.x;A8=A1.y+A9*A3.y+X.y;}if(BB===H.Rotate45||BB===H.Rotate315){A4=(BB===H.Rotate45)?-1:1;BA=(BA-A4*A8)*Math.SQRT1_2;A8=(A4*BA+A8)*Math.SQRT1_2;}A7.MoveTo(Math.floor(BA+(BA<0?-0.5:0.5)),Math.floor(A8+(A8<0?-0.5:0.5)),Ap.CENTER);},MoveTitleForManual:function AM(A3){if(!this.mChartContextPtr.mManualLayoutMode){return ;}var A2=A3.mTripleId,A1=this.mChartContextPtr.GetLocationRect(this.getAxisTitleLocationId(A2.mObjectId));if(A1){A3.SetRect(A1);A3.CalculateDeviceRect();}else{A3.mIsShown=false;}},InitObjectSet:function AN(A4,A3){var A2,A1=AA.CT_LINE;switch(A3){case V.GOT_AXIS_TITLE:A2=this.mpAxisTitleSet;A1=AA.CT_TEXT;break;case V.GOT_AXIS_LABEL:A2=this.mpAxisLabelSet;A1=AA.CT_TEXT;break;case V.GOT_AXIS_LINE:A2=this.mpAxisLineSet;break;case V.GOT_MAJOR_GRID:A2=this.mpMajorGridSet;break;case V.GOT_MINOR_GRID:A2=this.mpMinorGridSet;break;case V.GOT_INTERLACED_GRID:A2=this.mpInterlacedGridSet;A1=AA.CT_GENERAL_SHAPE;break;default:}if(A2!==null&&A2!==undefined){return ;}if(this.mTripleId.mSeriesId>0){A2=this.GetGraphObject(A4,false);}if(!A2){A2=new Ae.GraphCollectionObject({TripleId:A4,GraphObjectManager:this,CollectionType:A1});this.AddToMap(A2);}switch(A3){case V.GOT_AXIS_TITLE:this.mpAxisTitleSet=A2;break;case V.GOT_AXIS_LABEL:this.mpAxisLabelSet=A2;break;case V.GOT_AXIS_LINE:this.mpAxisLineSet=A2;break;case V.GOT_MAJOR_GRID:this.mpMajorGridSet=A2;break;case V.GOT_MINOR_GRID:this.mpMinorGridSet=A2;break;case V.GOT_INTERLACED_GRID:this.mpInterlacedGridSet=A2;break;default:}},LoadProperties:function AS(){var A4,A7,A6=this.mChartContextPtr,A5,A3,A1,A2;if(A6.mIsGraphMatrix){A7=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Aw.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){A4=A6.GetProperty(Au.DssGraphStyleMajor,A7);if(this.mMajorGrid.mShowGridLines&&A4){this.mMajorGrid.mGridStyle=A4;}}return ;}A7=new Ae.TripleId({ObjectId:this.mTripleId.mObjectId});A4=A6.GetProperty(Au.DssGraphShow2DAxisLabels,A7);if(A4){this.mAxisInfo.mShowAxisLabels=A4!==false;}if(A6.GetGraphMajorType()===Ab.GMT_GAUGE){return ;}A5=0;switch(this.mTripleId.mObjectId){case Av.DssGraphO1Body:A5=Au.DssGraphShow2DXTitle;break;case Av.DssGraphO2Body:A5=Au.DssGraphShowTitleSeries;break;case Av.DssGraphX1Body:A5=Au.DssGraphShow2DXTitle;break;case Av.DssGraphY1Body:A5=Au.DssGraphShow2DY1Title;break;case Av.DssGraphY2Body:case Av.DssGraphX2Body:A5=Au.DssGraphShow2DY2Title;break;case Av.DssGraphY3Body:case Av.DssGraphY4Body:break;case Av.DssGraphZBody:A5=Au.DssGraphShow3DColTitle;break;default:}A4=A6.GetProperty(A5,o);if(A5!==0&&A4){this.mAxisInfo.mShowAxisTitle=A4!==false;}if(A6.isUADataAreaOutput()){this.mAxisInfo.mShowAxisLabels=false;this.mAxisInfo.mShowAxisTitle=false;}A3=this.mAxisInfo.mShowAxisTitle;if(A3){A2=Ae.gAxisObjects[this.getIndex()].mTitleId;A4=A6.GetProperty(Au.DssGraphTextContent,A2);if(A2.mObjectId!==AC&&A4){this.mAxisTitle=A4;}}A4=A6.GetProperty(Ah.DssGraphUseInterlacedGrid,A7);if(A4){this.mAxisInfo.mUseInterlacedGrids=A4!==false;}A4=A6.GetProperty(Au.DssGraphShow2DAxisMajor,A7);if(A4){this.mMajorGrid.mShowGridLines=A4!==false;}A4=A6.GetProperty(Au.DssGraphStyleMajor,A7);if(this.mMajorGrid.mShowGridLines&&A4){this.mMajorGrid.mGridStyle=A4;}A4=A6.GetProperty(Au.DssGraphShow2DAxisMinor,A7);if(A4){this.mMinorGrid.mShowGridLines=A4!==false;}A4=A6.GetProperty(Au.DssGraphStyleMinor,A7);if(this.mMinorGrid.mShowGridLines&&A4){this.mMinorGrid.mGridStyle=A4;}A4=A6.GetProperty(Au.DssGraphManualMinor,A7);if(A4){this.mMinorGrid.mUseManualGrid=A4!==false;}A4=A6.GetProperty(Au.DssGraphCountMinor,A7);if(A4){this.mMinorGrid.mGridInterval=A4;}A4=A6.GetProperty(Au.DssGraphShow2DAxisLine,A7);if(A4){this.mAxisInfo.mShowAxisLine=A4;}switch(A6.GetGraphMajorType()){case Ab.GMT_POLAR:case Ab.GMT_RADAR:return ;default:break;}A4=A6.GetProperty(Au.DssGraph2DSide,A7);if(A4){if(A4===O.DssGraphAxisLabelLowSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{if(A4===O.DssGraphAxisLabelHighSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}else{if(A4===O.DssGraphAxisLabelBothSides){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT_RIGHT:Z.ALL_BOTTOM_TOP;}}}}},generateGridsByArea:function t(){},GetOneGridLine:function Y(A2,A5,A4,A1,A3,A6){if(this.mUseDepth){e.call(this,A2,A5,A4,A1,A3,A6);return ;}A6.splice(0,A6.length);M=new Ae.Point2D({Point2D:A1});L=new Ae.Point2D({Point2D:A3});A6.push(M);A6.push(L);if(AZ===null){AZ=new Ae.Point2D();}else{AZ.Reset(0,0);}if(w===null){w=new Ae.Point2D();}else{w.Reset(0,0);}if(this.IsVerticalAxis()){if(A2===Z.ALL_RIGHT){w.x=A4;}else{AZ.x=-A4;}}else{if(A2===Z.ALL_TOP){w.y=-A4;}else{AZ.y=A4;}}switch(A5){case Aw.DssGraphGridRegular:break;case Aw.DssGraphGridBoth:A6[0].x+=AZ.x;A6[0].y+=AZ.y;if(this.HasLabelsOnBothSides()){A6[1].x-=AZ.x;A6[1].y-=AZ.y;}else{A6[1].x+=w.x;A6[1].y+=w.y;}break;case Aw.DssGraphGridInnerTicks:if(A2!==Z.ALL_RIGHT&&A2!==Z.ALL_TOP){A6[1].x=A6[0].x-AZ.x;A6[1].y=A6[0].y-AZ.y;}else{A6[0].x=A6[1].x-w.x;A6[0].y=A6[1].y-w.y;}break;case Aw.DssGraphGridOuterTicks:if(A2!==Z.ALL_RIGHT&&A2!==Z.ALL_TOP){A6[1].x=A6[0].x+AZ.x;A6[1].y=A6[0].y+AZ.y;}else{A6[0].x=A6[1].x+w.x;A6[0].y=A6[1].y+w.y;}break;case Aw.DssGraphGridSpanningTicks:if(A2!==Z.ALL_RIGHT&&A2!==Z.ALL_TOP){A6[1].x=A6[0].x-AZ.x;A6[1].y=A6[0].y-AZ.y;A6[0].x+=AZ.x;A6[0].y+=AZ.y;}else{A6[0].x=A6[1].x-w.x;A6[0].y=A6[1].y-w.y;A6[1].x+=w.x;A6[1].y+=w.y;}break;default:}},hasDepthAxisLine:function f(A1){if(!this.mUseDepth){return false;}switch(A1){case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:return(this.mDepthDirection<90||this.mDepthDirection>270);case Z.ALL_RIGHT:return(this.mDepthDirection>90&&this.mDepthDirection<270);case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:return(this.mDepthDirection<180);case Z.ALL_TOP:return(this.mDepthDirection>180);default:return false;}},TrimAxisPadding:function P(){},resetRestrictSpace:function As(A1){if(A1!==undefined){this.restrictWidth=A1.width;this.restrictHeight=A1.height;}else{this.restrictWidth=this.restrictHeight=-1;}},GetAxisLabelRotation:function Ak(){},isBaseLineQualified:function G(A1){return false;},liftedFromZero:function Ay(){return false;},SetTrimWithPadding:function AB(){},GetPositionAtTick:function j(){},getLabelRotation:function AP(){if(this.mpAxisLabelSet){var A1=this.mpAxisLabelSet.GetFormatFont();return A1.mFontRotation;}return -1;},GetOuterTickLength:function l(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength;}return 0;},updateMaxLabelLength:function AU(A2,A1){if(A2>0){if(A1===undefined){A1=false;}if(A1){A2=this.calculateMaxAxisSpace(A2);}}this.maxLabelLength=A2;},calculateMaxAxisSpace:function R(A2){var A1=this.mChartContextPtr.GetGraphMatrixContext();A2-=(this.GetOuterTickLength()+A1.getPadding(AX.kLabelToChart));if(this instanceof mstrmojo.chart.CategoryAxis){A2-=A1.getPadding(AX.kCategoricalLabelToTick);}else{A2-=A1.getPadding(AX.kNumericLabelToTick);}return Math.max(A2,0);},getNextStatus:function Ag(A2){var A4=-1,A5=1,A9=!this.IsVerticalAxis(),A8=0,A7=1,A6=2,A3=this.getStatus(),A1=this.mLabelInterval;if(A9){if(A2===A8){if(A1>1){A3=A4;}}else{if(A2===A6){if(A1>=2&&A3!==A5){A3=A4;}}}}else{if(A2===A7){if(A1!==1){A3=A4;}}else{if(A1<2){A3=A4;}}}return A3;},clearTickObjects:function AD(A7,A5){var A4,A2=this.mChartContextPtr.getUtiliy().tripleId,A3=this.mGraphObjectList,A1=A3.length,A6=A5?this.mpMajorGridSet:this.mpMinorGridSet;if(A6){A6.ClearCollection();}for(A4=A1-1;A4>=0;A4--){if(A2.equal(A3[A4].mTripleId,A7)){A3.splice(A4,1);}}},restoreLabels:function K(A2){var A4;if(this.hasLabelCreated){var A3,A1=this.mpAxisLabelSet.GetCollectionSize(),A6=A1<=0,A5;if(A1===0){A1=this.mLabelList.length;}for(A4=0;A4<A1;++A4){if(A6){A3=this.mLabelList[A4];}else{A3=this.mpAxisLabelSet.GetObjectByIndex(A4);}if(!!A3===false){continue;}A5={Stringent:true,Restroke:true,TextWidthLimit:this.maxLabelLength,DivideByWord:true};if(this instanceof mstrmojo.chart.CategoryAxis&&this.mChartContextPtr.mIsGraphMatrix){if(this.mWordWrap===false){A5.LineCount=1;}else{A5.LineCount=2;}}A3.Restore(A5);if(A2){A3.mIsShown=true;}}}},checkShownLabelCount:function v(A5){var A6=this.mLabelList,A1=A6.length,A2=0,A7=-2,A3=-1;for(var A4=0;A4<A1;A4++){if(A6[A4]&&A6[A4].mIsShown){A2++;}if(A5!==undefined&&A2>=A5){return A7;}}if(A5!==undefined){return A3;}return A2;},checkCondense:function A(){return false;},getCondenseStatus:function U(){return undefined;},getUniformAxisLabelsInfo:function h(A4){var A3=0,A5=[],A1=this.mLabelList.length;while(A3<A1){var A2=this.mLabelList[A3];if(A2.mIsShown){if(A4){if(A4.CheckTruncated){if(A2.mIsTruncated===false){continue;}}}A5.push({Text:A2.mText,Rect:A2.GetBoundingRect()});}++A3;}return A5;}});Ae.Axis.gLabelMargin=4;}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","FormatFill","FormatLine","PieSliceObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixPiePlotType","EnumGraphMatrixMarkerTypeInChart");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphNumberFormatType");var d=mstrmojo.chart,c=mstrmojo.VisUtility,W=d.ChartConstants,Y=d.enums,S=Y.EnumGraphMatrixPiePlotType,J=Y.EnumGraphMatrixMarkerTypeInChart,T=d.model,h=T.enums,N=h.EnumDSSGraphObject,E=h.EnumShapeType,L=h.EnumDSSGraphMarkerShape,g=0,P=1,I=1,A=2,X=3;var Q=new d.TripleId(),V=new d.ChartAdvFormat();var O=0.1;function f(){var k=this.mChartContextPtr,j=k.GetGraphMatrixContext();this.mMinSizeByTotal=0;if(!this.mHasSizeBy){return this.mMinSizeByTotal;}this.mMinSizeByTotal=j.mMinSizeVal;return this.mMinSizeByTotal;}function e(){var k=this.mChartContextPtr,j=k.GetGraphMatrixContext();if(!this.mHasSizeBy){this.mMaxSizeByTotal=1;return this.mMaxSizeByTotal;}this.mMaxSizeByTotal=j.mMaxSizeVal;return this.mMaxSizeByTotal;}function F(){var k=this.mChartContextPtr,j=k.GetGraphMatrixContext();e.call(this);f.call(this);if(j.mMarkerShape===L.DssGraphMarkerShape2DPie){this.mPieOption.mLayout=g;}else{this.mPieOption.mLayout=P;}}function a(o,p,r,l){var k=this.mChartContextPtr.GetGraphMatrixContext(),n,q,j=2;if(this.mHasSizeBy){j=k.getSizeByPieRadius(this.mDatasetPtr,o,p,this.mMaxSizeByTotal,this.mMinSizeByTotal,this.mPieOption.mMaxRadius);if(j>=0&&j<1){j=1;}}else{j=this.mPieOption.mMaxRadius;}n=1;if(this.mPlotType===S.GMPPT_VALUE){q=l||this.mDatasetPtr.GetPieCountAtOneDataPoint(o,p);n=(r+1)/q;j=n*j;if(q>1){j-=1;}}return j;}function D(j,k,n){var o,l,r,q,p=this.mDatasetPtr,s=this.mPieOption,u={};u.Angles=[];u.ValidSeriesNumber=0;u.ValidSeriesIndex=[];u.IsValid=false;o=360-s.mPieRotation;u.Angles.push(o);u.ValidSeriesIndex.splice(0,u.ValidSeriesIndex.length);l=this.mDatasetPtr.GetPieSliceCount(j,k,0);r=0;for(q=0;q<l;++q){var t=p.GetPieSlicePercentage(j,k,n,q);if(t!==null){if(t<=1||t>=-1){++u.ValidSeriesNumber;u.ValidSeriesIndex.push(q);}r+=t;if(q===(l-1)){o=720-s.mPieRotation;}else{o=Math.round(Math.abs(360*r)*10)/10+O+(360-s.mPieRotation);}}else{if(q===(l-1)){o=720-s.mPieRotation;}}if(o>720-s.mPieRotation){o=720-s.mPieRotation;}u.Angles.push(o);}u.IsValid=true;return u;}function R(AC,w){var o=this.mChartContextPtr,AD=o.GetGraphMatrixContext(),AA="",s,x=this.mDatasetPtr,AB=new d.TripleId({ObjectId:N.DssGraphDataText,SeriesId:AC.mSeriesId,GroupId:AC.mGroupId}),v,z,j,y=x.dataLabelStyle,k,r=w.GetSliceInfo(),n,l,AE,u,t,p=false,q=5;if(x.showPieSliceDatalabel(AC.mSeriesId,AC.mGroupId,AC.angleByIndex,AC.sliceById)===false){return null;}AB.angleByIndex=AC.angleByIndex;AB.sliceById=AC.sliceById;if(o.mIsGraphMatrix){q=AD.getPadding(W.kDataLabel);}switch(y){case A:s=x.GetPieSliceData(AC.mSeriesId,AC.mGroupId,AC.angleByIndex,AC.sliceById);if(s===undefined||s===null){return null;}V.restore();x.getGridDataFormatForPie(V,AC);v=new d.NumberObject({TripleId:AB,GraphObjectManager:this.mpManager,Number:s,NumberFormat:V,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(v!==undefined&&v!==null){AA=v.mText;}j=v;break;case X:z=x.GetTextLabel(AC.mSeriesId,AC.mGroupId,AC.angleByIndex,AC.sliceById);AA=z;j=new d.TextObject({TripleId:AB,GraphObjectManager:this.mpManager,GraphCollectionObject:null});break;}if(j!==undefined&&j!==null&&AA!==""){j.SetText(AA);k=j.GetBoundingRect();}else{return null;}n=w.GetMiddleAngleRadian();AE=(r.mRadius+q)*Math.cos(n);u=(r.mRadius+q)*Math.sin(n);l=w.GetMiddleAngleQuadrant();if(l===2||l===3){p=true;}t=k.height*0.5*Math.sin(n);if(p){j.MoveToCenter(r.mCenter.x+AE-(k.width+1)/2,r.mCenter.y+u+t);}else{j.MoveToCenter(r.mCenter.x+AE+(k.width+1)/2,r.mCenter.y+u+t);}return j;}function C(AG,v,l,AE,y,AD,AA,q,n){var s={mObjectId:N.DssGraphPieSlice,mSeriesId:AG,mGroupId:v},p=this.mChartContextPtr,AC=p.getUtiliy().tripleId,AB=this.mPieOption,w=p.mIsGraphMatrix,u,r,k,t=(this.mPlotType===S.GMPPT_VALUE),o=AB.mLayout,j,z;var AF=n||this.mDatasetPtr.GetPieCountAtOneDataPoint(iSeriesId,v);if(AA-AD<=O){return null;}AC.reset(Q,s.mObjectId,s.mSeriesId,s.mGroupId,l,AE);if(p.checkColorByAndSizeByValue(Q,this.mDatasetPtr,this.mHasColorBy,false)===false){return null;}if(AA-AD===360){q=true;}u=((o===P)||(t&&l>0));if(u){if(o===P){if(t&&l>0){AB.mRingFactor=(1-1/(l+1)*0.3)*100;}else{AB.mRingFactor=70;}}else{AB.mRingFactor=100/(l+1);}}r=a.call(this,AG,v,l);if(r<=0){return null;}k=new d.PieSliceObject({TripleId:s,AngleIndex:l,SliceId:AE,GraphObjectManager:this.mpManager,Explode:0,StartAngle:AD,EndAngle:AA,RingPieFactor:AB.mRingFactor,IsRing:u,Is2DCircular:true,Scale:AB.mScale,Center:y,Radius:r,MaxRadius:AB.mMaxRadius,Depth:AB.mDepthInChart,OneSeries:q,ParentObject:null,IsShown:true,Shape:E._PIESLICE,hasFill:true});if(w){var x=this.mDatasetPtr.showPieDatalabels();if(x&&!(t&&l<AF-1)){j=R.call(this,s,k);if(j!==undefined&&j!==null){j.mIsShown=false;z=new d.GMDataLabelInfo({SeriesId:AG,GroupId:v,isValid:true,Label:j});z.HostMarkerPoint=y;z.HostMarkerBound=new d.Rect2D({x:y.x-r,y:y.y-r,height:2*r,width:2*r});this.dataLabels.push(z);}}}return k;}function H(){var l,j=this.mChartContextPtr.GetGraphMatrixContext(),k=J._PIE;if(this.mPlotType===S.GMPPT_CATEGORY){var n=this.mChartContextPtr.IsVertical(),o=this.mDatasetPtr.GetGroupCount();l=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);return j.GetMaxMarkerSize(k,n,o*l);}else{if(this.mPlotType===S.GMPPT_VALUE){return j.GetMaxMarkerSize(k,true,1,this.mHasSizeBy);}}return 0;}function G(o){var w=this.mPieCircles,x=w.length,r,p,q=false,n=[],u=[],s=[],v,t,l,k;for(r=0;r<x;++r){q=false;k=w[r];for(p=0;p<n.length;++p){if(k.mCenter.x===n[p].x&&k.mCenter.y===n[p].y&&k.mRadius===u[p]){q=true;break;}}if(!q){v=k.mCenter;t=k.mRadius;u.push(t);n.push(v);s.push(k);}}o.CirclePieObjects=o.CirclePieObjects.concat(s);}mstrmojo.chart.PiePlotRenderer=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.PiePlotRenderer",mDatasetPtr:null,mChartContextPtr:null,mMaxSizeByTotal:0,mMinSizeByTotal:0,mHasColorBy:false,mHasSizeBy:false,mPlotType:S.GMPPT_CATEGORY,mPieOption:{mLayout:g,mRingFactor:70,mScale:1,mDepthInChart:0,mPieRotation:90},mpManager:null,dataLabels:[],shownDataLabels:[],mPieCircles:[],init:function Z(j){this._super(j);this.mpManager=j.GraphObjectManager;this.mChartContextPtr=j.ChartContext;this.mDatasetPtr=j.Dataset;this.mPieOption={mLayout:g,mRingFactor:70,mScale:1,mMaxRadius:10,mDepthInChart:0,mPieRotation:90};this.mPieOption.mLayout=j.Layout;this.mPlotType=j.PlotType;if(j.MaxRadius){this.mPieOption.mMaxRadius=j.MaxRadius;}else{this.mPieOption.mMaxRadius=H.call(this);}this.mHasColorBy=this.mChartContextPtr.GetGraphMatrixContext().mHasColorBy;this.mHasSizeBy=this.mChartContextPtr.GetGraphMatrixContext().mHasSizeBy;this.dataLabels=[];this.shownDataLabels=[];this.mPieCircles=[];if(j.shownDatalabels!==undefined&&j.shownDataLabels!==null){this.shownDataLabels=j.shownDataLabels;}F.call(this);},getShapeSizeAt:function b(n,k,j,l){if(l===undefined){l=true;}if(l){return this.mPieOption.mMaxRadius;}return a.call(this,n,k,j);},drawSinglePie:function B(l,t,k,u,j){var n=[],q,y,w,o,v,z,AA,p={},x;if(u.x<0||u.y<0){return n;}o=a.call(this,l,t,k,j);p.mCenter=u;p.mRadius=o;v=D.call(this,l,t,k);if(!v.IsValid){return n;}y=v.ValidSeriesIndex;q=v.ValidSeriesNumber;w=v.Angles;var AB=j||this.mDatasetPtr.GetPieCountAtOneDataPoint(l,t),r=(this.mPlotType===S.GMPPT_VALUE),s=((this.mPieOption.mLayout===P)||(r&&k>0));if(q===0){c.visPrint("pieplotRenderer::Should not reach here");}else{if(q===1){z=C.call(this,l,t,k,y[0],u,360-this.mPieOption.mPieRotation,720-this.mPieOption.mPieRotation,true,AB);if(z){z.SetWhitenOuterBorder(r&&k<AB-1&&!s);n.push(z);}this.mPieCircles.push(p);}else{for(x=0;x<q;++x){AA=y[x];z=C.call(this,l,t,k,AA,u,w[AA],w[AA+1],false,AB);if(z){z.SetWhitenOuterBorder(r&&k<AB-1&&!s);n.push(z);}}this.mPieCircles.push(p);}}return n;},SetInfo:function U(k,j,l){this.mPieOption.mLayout=k;this.mPieOption.mMaxRadius=l;this.mPlotType=j;},enableDataLabel:function M(n,l){var o=this.mChartContextPtr,k=o.mIsGraphMatrix,j=o.GetGraphMatrixContext();if(k){G.call(this,n);n.PlaceDataLabels(this.dataLabels,l);}},GetPieRadius:function K(j,k,l){return a.call(this,j,k,l);}});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","FractionNumber","Utility");mstrmojo.requiresClsP("mstrmojo.chart","TextObject","ChartAdvFormat","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumDSSGraphProperty");var c=mstrmojo.chart,K=c.enums,b=mstrmojo.VisUtility,d=K.EnumGraphMajorType,h=K.EnumNumberCategory,N=5,t=5;var V=mstrmojo.chart.model,M=V.enums,n=M.EnumDSSGraphType,u=M.EnumDSSGraphObject,s=M.EnumDSSGraphProperty,F=mstrmojo.num,D=mstrmojo.chart.common,G=D.Utility,A=G.tripleId;var B=["[SF:-3]","[SF:-6]","[SF:-9]"];var j=new c.TripleId(),l=new c.ChartAdvFormat(),L=new c.ChartAdvFormat(),g=new c.ChartAdvFormat();function Y(z){switch(z){case u.DssGraphY1Label:case u.DssGraphY2Label:case u.DssGraphY3Label:case u.DssGraphY4Label:case u.DssGraphX1Label:case u.DssGraphX2Label:return true;}return false;}function O(z){switch(z.mObjectId){case u.DssGraphUserLabel1:return u.DssGraphY1Label;case u.DssGraphUserLabel2:return u.DssGraphY2Label;case u.DssGraphUserLabel3:return u.DssGraphX1Label;case u.DssGraphUserLabel4:return u.DssGraphX2Label;default:return z.mObjectId;}}function E(AC){var z,AA=this.mSuffix,AB=AC;if(AB.length&&this.mNumber<0){if(AB[0]==="-"&&this.mPrefix!=="-"){AB=AB.substring(1);this.mPrefix="-"+this.mPrefix;}}z=this.mPrefix;if(this.mHasBracket){if(AB.length>=2&&AB[0]==="("&&AB[AB.length-1]===")"){AB="("+z+AB.substring(1,AB.length-1)+AA+")";}else{AB=z+AB+AA;}}else{AB=z+AB+AA;}if(this.mIsFinal){this.SetText(AB);}else{this.mText=AB;}}function S(z){return(z.search(/\?\/[0-9\?]/)!==-1);}function T(z){return z.replace(/[^"]E-/,"E");}function v(AF,AE,AJ,AH){var AC,AD,AB,AG,z,AI,AA;AA=AJ;AC=new D.FractionNumber();AD=new D.FractionNumber();AB=new D.FractionNumber();AG=new D.FractionNumber();AD.mNumerator=0;AD.mDenominator=AB.mDenominator=AB.mNumerator=1;AG.mDenominator=AD.mDenominator+AB.mDenominator;AG.mNumerator=AD.mNumerator+AB.mNumerator;AI=AF>=0;AF=Math.abs(AF);z=Math.floor(AF);AF-=z;while(AG.mDenominator<AA){if(Math.abs(AG.ToDouble()-AF)<1e-15){AC.Copy(AG);break;}if(AG.ToDouble()>AF){AB.Copy(AG);}else{AD.Copy(AG);}AG.mDenominator=AD.mDenominator+AB.mDenominator;AG.mNumerator=AD.mNumerator+AB.mNumerator;}if(AG.mDenominator>=AA){if(AF-AD.ToDouble()<AB.ToDouble()-AF){AC.Copy(AD);}else{AC.Copy(AB);}}if(z>0){AC.mNumerator+=z*AC.mDenominator;}return AC.ToString(AE,AI,AH);}function W(AF,AA,AC){var AD,AB,AH,z=10,AG,AI;AI=AA.indexOf("# ",0);AG=(AI!==-1);for(AD=5;AD>0;AD--){AH="/";for(AB=0;AB<AD;AB++){AH+="?";}AI=AA.indexOf(AH,0);if(AI!==-1){for(AB=1;AB<AD;AB++){z*=10;}break;}}var AE;AE=v(AF,AG,z,AC);return AE;}function r(AL,AF){var AC,AN,AM,AJ=AF.lastIndexOf("/"),AA=AF.substr(AJ+1,AF.length);AC=(AA.indexOf("?")===-1);if(AC){var AE=AL<0,AK=(AF.indexOf("# ",0)!==-1),z,AB=AA.ToInteger();AL=Math.abs(AL);z=Math.floor(AL);AL-=z;var AG=Math.floor(AL*AB+0.5);z+=AG/AB;AG%=AB;if(!AK){AG+=z*AB;z=0;}if(z===0&&AG===0){return"0";}if(z!==0){AM=z.ToString();if(AG!==0){AM+=" ";}}if(AG!==0){AM=AG.ToString();AM+="/";AM+=AB.ToString();}AN=AM;if(AE){AN="-"+AN;}return AN;}var AI=this.mTripleId.mObjectId,AD=Y.call(this,AI),AH=AI===u.DssGraphDataText;AN=W(AL,AF,!AD&&!AH);return AN;}function C(AE){var AD,AC,AA,z="",AB="";AD='"';AC=AE.indexOf(AD);if(AC===-1){return{Format:AE,HasLeftOver:true,Prefix:z,Suffix:AB};}AA=AE.indexOf(AD,AC+1);if(AA===-1){return{Format:AE,HasLeftOver:false,Prefix:z,Suffix:AB};}if(AC===0){z=AE.substring(1,AA);AE=AE.substring(AA+1);}AC=AE.lastIndexOf(AD);if(AC===-1){return{Format:AE,HasLeftOver:true,Prefix:z,Suffix:AB};}AA=AE.lastIndexOf(AD,AC-1);if(AA===-1){return{Format:AE,HasLeftOver:false,Prefix:z,Suffix:AB};}if(AC===AE.length-1){AB=AE.substring(AA+1,AC);AE=AE.substring(0,AA);}return{Format:AE,HasLeftOver:true,Prefix:z,Suffix:AB};}function R(AC,AJ){AJ=AJ||false;var AL,AN="",AD="",AG,AM,AF,AA,AB,AE,AI,z,AK=false,AH;AG=AC.indexOf(";");AL=false;if(AG!==-1){AN=AC.substring(0,AG);AD=AC.substring(AG+1);}else{AN=AC;if(AJ===false){AD=AN;AK=true;}}AM=AD.length>0;AF=AM;if(AF){AF=AD[0]==="[";if(AF){AB=AD.indexOf("]");AF=AB!==-1;if(AF){AA=AD.substring(0,AB+1);AD=AD.substring(AB+1);}}}if(AD.length>=2){AL=(AD[0]==="("&&AD[AD.length-1]===")");}if(AL){AD=AD.substring(1,AD.length-1);}AE=false;if(this.mNumber>=0){AH=C.call(this,AN);AN=AH.Format;AE=AH.HasLeftOver;AI=AH.Prefix;z=AH.Suffix;AH=C.call(this,AD);AD=AH.Format;}else{AH=C.call(this,AD);AD=AH.Format;AE=AH.HasLeftOver;AI=AH.Prefix;z=AH.Suffix;AH=C.call(this,AN);AN=AH.Format;}if(AL){AD="("+AD+")";}if(AF){AD=AA+AD;}if(AM){if(AK){AC=AD;}else{AC=AN+";"+AD;}}else{AC=AN;}return{Format:AC,HasLeftOver:AE,HasBracket:AL,Prefix:AI,Suffix:z};}function J(AA,AD){AD=(AD!==undefined)?AD:true;var z,AC,AE,AB;if(this.mPrefix.length>0||this.mSuffix.length>0){return AA;}z=AA.substring(0);AB=R.call(this,z,AD);z=AB.Format;AC=AB.Prefix;AE=AB.Suffix;if(AC.length){this.mPrefix=AC;}if(AE.length){this.mSuffix=AE;}return z.substring(0);}function P(z,AA,AD){var AC,AB;AC=this.mNumber;if(this.mNumber<0&&AA>=2&&AA!==5){AC=-this.mNumber;}AB=G.hFormatValue(z,AC);if(this.mNumber<0){if(AA===3||AA===4){AB="("+AB+")";}if(AA===2||AA===4||AA===5){this.mColor=255;}}E.call(this,AB);}function x(AH,AK){var AD,AJ,AB,z,AE,AF=-1,AC=-1,AG=["[SF:-3]","[SF:-6]","[SF:-9]"];AD=AH.mCustomFormat[0];z=AH.mCustomFormat.length;AJ=AH.mCustomFormat[z-1];AE=AH.mCustomFormat.substring(0);if(AD==="K"){AF=1;AC=0;AB="K";}else{if(AJ==="K"){AF=z;AC=0;AB="K";}else{if(AD==="M"){AF=1;AC=1;AB="M";}else{if(AJ==="M"){AF=z;AC=1;AB="M";}else{if(AD==="B"){AF=1;AC=2;AB="B";}else{if(AJ==="B"){AF=z;AC=2;AB="B";}}}}}}if(AF!==-1){AE.replace(/([KMB])/g,'"$1"');var AA;var AI=AE.indexOf(";");if(AI!==-1){if(AD===AB){AA='"'+AB+'"'+B[AC];}else{AA=B[AC]+'"'+AB+'"';}AE.replace(";",";"+AG[AC]);}AE=B[AC]+AE;}P.call(this,AE,AH.mNegFormat,AK);}function Q(AA,AG){var AC,z=AA.mCustomFormat.substring(0);AC=R.call(this,z);this.mHasBracket=this.mHasBracket||AC.HasBracket;z=AC.Format;var AD=!AC.HasLeftOver,AB=AC.HasBracket,AE=AC.Prefix,AF=AC.Suffix;if(AE.length){this.mPrefix=AE.substring(0);}if(AF.length){this.mSuffix=AF.substring(0);}AA.mCustomFormat=z.substring(0);if(AD){AA.mCustomFormat=J.call(this,AA.mCustomFormat);}P.call(this,AA.mCustomFormat,AA.mNegFormat,AG);}function X(AD){var AC,AB,AA,z=AD.length;if(z===0){return{Format:AD,Base:1};}if(AD[z-1]!==","){return{Format:AD,Base:1};}if(AD===","){return{Format:AD,Base:1000};}AB=AD.reverse();AC=AB.search(/[^,]/);if(AC===-1){AA=Math.pow(1000,z);return{Format:"",Base:AA};}AA=Math.pow(1000,AC);return{Format:AD.substring(0,z-AC),Base:AA};}function I(AX,AJ){var AW=this.mNumber,AZ,AS,AH,AL,AF,AP,AG,AB,AE,AQ,AC,AA,AU,AV,AN,AR,AD,AM,AO,z,AT;if(AX===null){E.call(this,G.hFormatValue("General",this.mNumber));}else{L.restore();AZ=AX.getGridDataFormat(L,(this.mTripleId.mSeriesId<0)?0:this.mTripleId.mSeriesId,(this.mTripleId.mGroupId<0)?0:this.mTripleId.mGroupId,this.mColumnOffset);if(AZ!==true){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AS=L.mCustomFormat.substring(0);if(S.call(this,AS)){L.mFormatType=h.Fraction;}if(L.mFormatType===h.Fraction){AH=L.mCustomFormat.substring(0);AL=r.call(this,this.mNumber,AH);E.call(this,AL);return ;}L.mCustomFormat=J.call(this,L.mCustomFormat);AH=L.mCustomFormat.substring(0);T.call(this,AH);var AY=X.call(this,AH);AF=AY.Base;AH=AY.Format;this.mNumber/=AF;if(this.replaceQuestionMarkWithHash(AH)){AP=AH.indexOf(".");AG=AH.length-AP-1;AN=G.hFormatValue(AH,this.mNumber);AB=AN.indexOf(".");AE=0;if(AB===-1){AB=AN.length;AG=AE;}else{AE=AN.length-AP-1;}AP-=AB;AG-=AE;if(AP>0){this.mPrefix="";for(AT=0;AT<AP;AT++){this.mPrefix+=" ";}}if(AG>0){this.mSuffix="";for(AT=0;AT<AP;AT++){this.mSuffix+=" ";}}E.call(this,AN);this.mNumber=AW;return ;}if(L.mFormatType===h.Scientific){AH.replace("#","0");}AQ=".";AF=1;AC=AH.lastIndexOf(AQ);AA=this.mNumber;if(AC!==-1&&L.mFormatType===h.Custom){var AI=this.AdjustFormatStringWithDot(AH,AC);AF=AI.BASE;AH=AI.STRING;AA/=AF;}else{if(L.mFormatType===h.Custom){AU=AH.length;if(AU>2){var AK=AH[AU-1];if(AH[AU-2]==="\\"&&(AK==="B"||AK==="b"||AK==="M"||AK==="m"||AK==="K"||AK==="k")){AV=AH[AU-1];AR='"';AH=AH.substring(0,AU-2);AH+=AR;AH+=AV;AH+=AR;AD="";AF=this.getBaseForCustomFormatting(AH);AA/=AF;AH+=AR;AH+=AD;AH+=AR;}}}}AM=false;if(AH.indexOf("* -")!==-1){AM=this.mNumber<0;if(AM){AH.replace("* -","* ");}}if(AH===""){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AN=G.hFormatValue(AH,AA);AO=AN.length;if(AN.length){z=L.mNegFormat>=3&&AN[0]==="("&&AN[AO-1]===")";if(z&&AN.length>this.mPrefix.length&&this.mPrefix.length&&this.mNumber<0){AN="("+this.mPrefix+AN.substring(1);this.mPrefix=this.mSuffix="";}}if(AM){this.mText=AN;AG=this.mText.search(/[0-9]/);if(AG!==-1){if(AG>0){AN=this.mText.substring(0,AG);}AN=AN+"-"+this.mText.substring(AG);}}E.call(this,AN);this.mNumber=AW;}}function U(AT,AG,AI){var AR,AQ,AS,AK,AE,AP,AH,AJ,AM,AC,AN,AD,z,AB,AO,AA,AL;switch(AG.mFormatType){case h.Default:b.visPrint("should not reach here.");break;case h.General:E.call(this,G.hFormatValue("",this.mNumber));break;case h.FromGrid:I.call(this,AT,AI);break;case h.Fixed:x.call(this,AG,AI);break;case h.Date:case h.Time:AE=AG.mCustomFormat.substring(0);AE.replace(/[:(tt)]/g,"");E.call(this,G.hFormatValue(AE,this.mNumber));break;case h.Percentage:AE=AG.mCustomFormat.substring(0);P.call(this,AE,AG.mNegFormat,AI);break;case h.Fraction:AE=AG.mCustomFormat.substring(0);AK=r.call(this,this.mNumber,AE);E.call(this,AK);break;case h.Special:AR=new c.ChartAdvFormat({ChartAdvFormat:AG});if(AR.mCustomFormat.localeCompare("#####")===false&&this.mNumber===0){AR.mCustomFormat[4]="0";}E.call(this,G.hFormatValue(AR.mCustomFormat,this.mNumber));break;case h.Currency:AR=new c.ChartAdvFormat({ChartAdvFormat:AG});Q.call(this,AR,AI);break;case h.Scientific:AE=AG.mCustomFormat.substring(0);AE.replace("#","0");E.call(this,F.formatByMask(AE,this.mNumber));break;default:AS=this.mNumber;AH=false;AR=new c.ChartAdvFormat({ChartAdvFormat:AG});AJ=AR.mCustomFormat.substring(0);if(AJ==="?"){AJ="0";}if(AR.mFormatType===h.Custom){AM=S.call(this,AJ);if(AM){AK=r.call(this,this.mNumber,AJ);E.call(this,AK);return ;}AJ=T.call(this,AJ);AP=X.call(this,AJ);AC=AP.Base;AJ=AP.Format;this.mNumber/=AC;if(this.replaceQuestionMarkWithHash(AJ)){AN=AJ.indexOf(".");AD=AJ.length-AN-1;AL=G.hFormatValue(AJ,this.mNumber);z=AL.indexOf(".");AB=0;if(z===-1){z=AL.length;AD=AB;}else{AB=AL.length-AN-1;}AN-=z;AD-=AB;if(AN>0){this.mPrefix="";for(AQ=0;AQ<AN;AQ++){this.mPrefix+=" ";}}if(AD>0){this.mSuffix="";for(AQ=0;AQ<AN;AQ++){this.mSuffix+=" ";}}E.call(this,AL);this.mNumber=AS;return ;}if(AJ.indexOf("* -")!==-1){AJ.replace("* -","* ");AH=true;}}AO=".";AA=AJ.lastIndexOf(AO);if(AA!==-1){var AF=this.AdjustFormatStringWithDot(AJ,AA);AC=AF.BASE;AJ=AF.STRING;this.mNumber/=AC;}E.call(this,G.hFormatValue(AJ,this.mNumber));if(AH&&this.mNumber<0){AL=this.mText.substring(0);AD=AL.search(/[0-9]/);if(AD!==-1){if(AD>0){this.mText=AL.substring(0,AD);}this.mText=this.mText+"-"+AL.substring(AD);E.call(this,this.mText);}}this.mNumber=AS;break;}}function a(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}return this.expectCondense===true;}function o(AD,AI,AF){var z=this.mChartContextPtr,AC,AH=this.mChartContextPtr.mIsGraphMatrix,AG=O.call(this,this.mTripleId);if(z.mIsTimeSeriesChart&&AG===u.DssGraphY1Label){this.SetNumberFormatForTimeSeries(AD);return ;}if(AH===false){return ;}if(Y.call(this,AG)){if(this.shouldCondense){this.SetNumberFormatForTimeSeries(AD);return ;}g.reset(AD);AC=this.mNumber;if(g.mFormatType===h.Default){var AA=z.getAxisKeyFromObjectId(AG),AB=z.getUniformAxisInformationFromKey(AA),AJ=AB.Metrics;if(AJ===undefined||AJ.length===0){AJ=[0];}z.getAxisAutoNumberFormat(g,AJ);g.mCustomFormat=J.call(this,g.mCustomFormat);}U.call(this,AF,g,AI);var AE=this.mChartContextPtr.GetGraphMatrixContext();if(a.call(this)){if(this.mText.length>AE.getCondensedTextLimit(g.mFormatType)){this.mNumber=AC;this.mPrefix=this.mSuffix="";this.SetNumberFormatForTimeSeries(AD);}}}}mstrmojo.chart.NumberObject=mstrmojo.declare(mstrmojo.chart.TextObject,null,{scriptClass:"mstrmojo.chart.NumberObject",mNumber:0,mColor:-1,mIsFinal:false,mIsAbbreviated:false,mColumnOffset:0,mHasBracket:false,mPrefix:"",mSuffix:"",expectCondense:false,shouldCondense:false,init:function w(z){if(z.Locale===undefined){z.Locale=0;}this._super(z);this.mNumber=z.Number;this.mIsFinal=z.IsFinal!==undefined?z.IsFinal:true;this.mColumnOffset=z.ColumnOffset!==undefined?z.ColumnOffset:0;this.mPrefix="";this.mSuffix="";if(z.ExpectCondense){this.expectCondense=z.ExpectCondense;}if(z.ShouldCondense){this.shouldCondense=z.ShouldCondense;}this.SetNumberFormat(z.NumberFormat,z.Locale,z.DataSet);},SetNumberFormat:function Z(AD,AJ,AE){var z=this.mChartContextPtr,AF,AC=this.mChartContextPtr.mIsGraphMatrix,AG=O.call(this,this.mTripleId),AI,AH,AA,AB;if(z.mIsTimeSeriesChart&&AG===u.DssGraphY1Label){return o.call(this,AD,AJ,AE);}if(z.mIsGraphMatrix&&Y.call(this,AG)){return o.call(this,AD,AJ,AE);}l.reset(AD);AA=l.mFormatType;AF=z.GetGraphMajorType();A.reset(j,this.mTripleId.mObjectId);if(((AG===u.DssGraphDataText||AG===u.DssGraphRiser)&&(AF===d.GMT_SCATTER||AF===d.GMT_BUBBLE))&&!AC){switch(this.mColumnOffset){case 0:A.reset(j,u.DssGraphX1Body);break;case 1:A.reset(j,u.DssGraphY1Body);break;case 2:A.reset(j,u.DssGraphZBody);break;default:break;}AI=z.GetProperty(s.DssGraphAxisNumberFormat,j);if(AI){z.ParseValueToFormat(AI,l);}switch(this.mColumnOffset){case 0:A.reset(j,u.DssGraphX1Label);break;case 1:A.reset(j,u.DssGraphY1Label);break;default:break;}}AG=j.mObjectId;if(Y.call(this,AG)){if(AC===false){if(((AA===h.FromGrid)||(AA===h.Default))){if(z.mGraphType===n.DssGraphTypePareto_Percent){l.mFormatType=h.General;}else{z.getAxisAutoNumberFormat(l);l.mCustomFormat=J.call(this,l.mCustomFormat);}}}}else{if(AA===h.Default){l.mFormatType=h.FromGrid;}if(AG===u.DssGraphDataText&&AA===h.FromGrid&&AF===d.GMT_HISTOGRAM){l.mFormatType=h.General;}}if((this.mNumber>1000000000000000||this.mNumber<-1000000000000000)&&AA===h.Currency){AH="0";for(AB=0;AB<l.mDigits;AB++){if(AB===0){AH+=".";}AH+="0";}AH+="E+00";l.mCustomFormat=AH.substr(0);l.mFormatType=h.Scientific;}U.call(this,AE,l,AJ);},Draw:function q(){var AA=this.mFormatFontPtr,z=this.mColor;if(z>=0){var AB=z;if(AA){AB=AA.mFontColor;AA.mFontColor=z;}this._super();if(AA){AA.mFontColor=AB;}}else{this._super();}},replaceQuestionMarkWithHash:function y(AD){var AB,AA,AC,z="";if(AD.length===0){return false;}AA=AD.length;AB=0;for(AC=0;AC<AA;AC++){if(z.indexOf(AD[AC])===-1){z+=AD[AC];}if(AD[AC]==="."){AB++;}}if(z===".?"||z==="?."){if(AB===1){AD.replace("?","#");return true;}}return false;},AddTextBeforeNumber:function H(AB){var z,AA;z=new c.Rect2D();this.SetRect(z);AA=AB+"\n"+this.mText;this.SetText(AA);this.mIsFinal=true;},getBaseForCustomFormatting:function p(AC){var AF="",AI="",AE=1000,AA='"',AG=AC.lastIndexOf(AA);if(AG!==-1&&AG===AC.length-1){AG=AC.lastIndexOf(AA,AG-1);if(AG!==-1){if(AG!==0&&!(AG===1&&AC.charAt(0)==="-")){if(AC.lastIndexOf("(",AG-1)===-1){var AB=AC.substr(AG,AC.length);AI=AB.replace(/"""/gi,"");AC=AC.substr(0,AG);}}}}AG=AC.length-1;var z=1,AH=AC.charAt(AG),AD=true;switch(AH){case"K":case"k":z*=AE;AF=AH;AG-=1;break;case"M":case"m":z*=AE*AE;AF=AH;AG-=1;break;case"B":case"b":z*=AE*AE*AE;AF=AH;AG-=1;break;default:AD=false;break;}AC=AC.substr(0,AG+1);if(AD){AG=AC.length-1;if(AC.charAt(AG)===","){AC=AC.substr(0,AG);}return{BASE:z,STRING:AC,TAG:AF,SUFFIX:AI};}var AJ=",";while(AG>0){if(AC.charAt(AG)!==AJ){break;}AG--;z*=AE;}AC=AC.substr(0,AG+1);return{BASE:z,STRING:AC,TAG:AF,SUFFIX:AI};},AdjustFormatStringWithDot:function e(AG,AJ){var AB=".",AD=",",AO=0,AH=0,AC=1,AN="",AP=".",AM=AJ-1;while(AM>=0){if(AG[AM]===AD){AH++;AC*=1000;}else{break;}AM--;AN+=AD;}AN+=AB;if(!(AO===0&&AH===0)){var AA=0,AF=AG.indexOf(AN),z="";while(AF!==-1){z=z.concat(AG.substr(AA,AF-AA));AA=AF+AN.length;z=z.concat(AP);AF=AG.indexOf(AN,AA);}z+=AG.substr(AA,AG.length);AG=z;}var AI,AE,AK,AL=AG.lastIndexOf(AB);while(AL!==-1){AK=AG.lastIndexOf(AD,AL);if((AK!==-1)&&(AK<AL)&&(AL-AK>1)&&(AL-AK<4)){AE="";AE=AE.concat(AG.substr(0,AK+1));for(AI=0;AI<4-(AL-AK);AI++){AE=AE.concat(AG[AK+1]);}AE=AE.concat(AG.substr(AK+1));AG=AE;}AL=AG.lastIndexOf(AB,AL-1);}return{BASE:AC,STRING:AG};},SetNumberFormatForTimeSeries:function k(AE){var AA=this.mChartContextPtr,AC=this.mNumber,AI,AB,AD=AA.mIsGraphMatrix;if(AE.mFormatType===0&&!AD){var AH;if(this.mNumber>0){AH=AA.getInt(AC);AI="$"+AH.ToString();}else{AC=-AC;AH=AA.getInt(AC);AI="($"+AH.ToString()+")";}E.call(this,AI);return ;}this.mIsAbbreviated=this.mIsAbbreviated||AD;var AG=this.mTripleId.mObjectId,AF=AD&&Y.call(this,AG),z=AF?t:N;AI=G.abbreviateNumber(this.mNumber,z);if(AE.mFormatType===1){AI=AE.mCurrency+AI;}E.call(this,AI);},GetNumberFromText:function f(){if(this.mText!==""){var z=parseFloat(this.mText);if(G.isValidNumber(z)){return z;}return null;}return null;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","RectangleObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle");var D=mstrmojo.chart,B=mstrmojo.chart.enums,C=B.EnumBoxStyle;function A(){var N=this.mChartContextPtr,L=this.mBoxStyle,M=this.mFormatFillPtr.mAlpha,I,K,H,J,G;I=4;K=new D.Rect2D({Rect2D:this.mRect});K.Implode(I,I);N.DrawRectangle(this.mRect,false);this.ApplyFillFormat();if(L===C.BS_BEVELED_FRAME||L===C.BS_REVERSE_BEVELED_FRAME){H=D.gBlack.ToInteger();J=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.153:0.353));G=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.353:0.153));N.ApplyBeveledFrameToRectangle(this.mRect,0,I,H,J,H,G);}else{if(L===C.BS_DOUBLE_LINE_FRAME){if(L===C.BS_DOUBLE_LINE_FRAME){N.DrawRectangle(K,true);this.ApplyLineFormat();}}}this.SetLineWidth();N.DrawRectangle(this.mRect,true);this.hSetBorderStyle(this.mRect);this.ApplyLineFormat();}mstrmojo.chart.FancyBoxObject=mstrmojo.declare(mstrmojo.chart.RectangleObject,null,{scriptClass:"mstrmojo.chart.FancyBoxObject",mBoxStyle:C.BS_NOFRAME,init:function F(G){this._super(G);this.mBoxStyle=G.BoxStyle||C.BS_NOFRAME;},Draw:function E(){if(this.mBoxStyle===C.BS_NOFRAME){this.mChartContextPtr.DrawRectangle(this.mRect,false);this.ApplyFillFormat();}else{A.call(this);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Point2D","GraphObjectManager","TripleId","FormatFont","ChartContext","GraphCollectionObject","FancyBoxObject","MarkerObject","FormatFill","StraightLineObject","TextObject","Rect2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMarkerShape","EnumBoxStyle","EnumLineStyle","EnumLegendLayout","EnumLegendMarkersStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantType","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphMarkerLayout","EnumDSSGraphLegendPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");var V=mstrmojo.chart,M=mstrmojo.chart.enums,L=M.EnumCollectionType.CT_TEXT,U=M.EnumMarkerShape,S=M.EnumBoxStyle,G=M.EnumLineStyle,K=M.EnumLegendLayout,r=M.EnumLegendMarkersStyle,o=V.gNullTripleId,N=0.75,s=16,A=0.5,h=0.15,c=0.9,F=1742,P=725,D=2;var T=mstrmojo.chart.model,O=T.enums,f=O.EnumDSSGraphMarkerShape,a=O.EnumDSSGraphType,d=O.EnumDSSGraphProperty,e=O.EnumDSSGraphObject,E=O.EnumVariantBool,B=E.VARIANT_FALSE,Z=O.EnumDSSExtraGraphProperty,p=O.EnumDSSGraphMarkerLayout,I=O.EnumDSSGraphLegendPosition;var C=0;function X(t){this.mLegendMarkerSize=t.mFontSize<s?t.mFontSize:s;this.mLegendMarkerSize=Math.floor(this.mLegendMarkerSize*N+1.5);if(this.mLegendMarkerSize<2){this.mLegendMarkerSize=2;}this.mItemMargin=Math.floor(this.mLegendMarkerSize*0.3);this.mEdgeMargin=Math.floor(this.mLegendMarkerSize*0.8);}function n(AI,z){var v=this.mChartContextPtr,AE=this.mDatasetPtr,t=this.mGraphOptionsLegend,AG,w,AF,AD,x,y,u,AC,AK,AA,AL,AB,AH,AJ;AG=AE.GetSeriesCount();w=new V.Rect2D();AJ=this.mLegendItemCount;for(AF=0;AF<AJ;++AF){AD=new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AF});x=new V.TextObject({TripleId:AD,GraphObjectManager:this,GraphCollectionObject:z});x.mIsShown=false;z.AddGraphObject(x);u=v.mGraphType;if(AF>=AG&&u!==a.DssGraphTypeGridChart){if(v.mGraphType===a.DssGraphTypePareto_Percent){AC=v.GetProperty(d.DssGraphCumulativePercentLabel,new V.TripleId({SeriesId:AF-AG}));if(AC){y=AC;}else{y="Cumulative Percent";}}else{if(u>=a.DssGraphTypeHiLo_Stock_Chart&&u<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){y=this.mStockMetricValue[this.mLegendItemIndexToStockMetricIndex[AF]];}}}else{if(t.mIsByGroup){y=AE.GetGroupLabel(AF,false);}else{y=AE.GetSeriesLabel(AF,false);}}x.SetText(y);AH=x.GetBoundingRect();this.AddToMapAndList(x);if(AH.width>w.width){w.width=AH.width;}}if(!v.mManualLayoutMode||t.mReposition){AA=Math.floor(AI.width*h+0.5);if(t.mLegendPosition===I.DssGraphLegendPositionBottom){AA=AI.width;}AK=(w.width<AA)?w.width:AA;}else{AL=v.GetLocation(d.DssGraphLegendLocation);if(AL.width===0){AA=Math.floor(AI.width*h+0.5);AK=(w.width<AA)?w.width:AA;}else{AK=AL.width-2*this.mEdgeMargin;if(t.mLegendMarkersStyle===p.DssGraphMarkerLeft||t.mLegendMarkersStyle===p.DssGraphMarkerRight){AK-=this.mLegendMarkerSize*(1+A);}}}w.width=0;for(AF=0;AF<AJ;++AF){AB=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AF}));AB.SetTextWidthLimit(AK);AH=AB.GetBoundingRect();if(AH.height>w.height){w.height=AH.height;}if(AH.width>w.width){w.width=AH.width;}}return w;}function Y(){var t=this.mChartContextPtr.mGraphType;switch(t){case a.DssGraphTypeVertical_Area_Stacked:case a.DssGraphTypeVertical_Area_BiPolar_Stacked:case a.DssGraphTypeVertical_Area_DualAxis_Stacked:case a.DssGraphTypeVertical_Area_Percent:case a.DssGraphTypeVertical_Bar_Stacked:case a.DssGraphTypeVertical_Bar_DualAxis_Stacked:case a.DssGraphTypeVertical_Bar_BiPolar_Stacked:case a.DssGraphTypeVertical_Bar_Percent:case a.DssGraphTypeVertical_Line_Stacked:case a.DssGraphTypeVertical_Line_BiPolar_Stacked:case a.DssGraphTypeVertical_Line_DualAxis_Stacked:case a.DssGraphTypeVertical_Line_Percent:case a.DssGraphRadar_Line_Stacked:case a.DssGraphTypePareto:case a.DssGraphTypePareto_Percent:return true;default:return false;}}function J(AV,AG){var y=this.mGraphOptionsLegend,Ac=n.call(this,AV,AG),AX=new V.Rect2D(),Ae=this.mItemMargin,AJ=this.mItemMargin,AA=this.mDatasetPtr.GetSeriesCount(),AS=new V.Rect2D({x:0,y:0,width:this.mLegendMarkerSize,height:this.mLegendMarkerSize}),AE=0,Ai=0,AZ,Aj,AC,AI,AN,Ab,AO,AH,AQ,v,AT,Af,t,z,AP,Ad,AK,AD,AU,AY,u,AF,x,Aa,AM,AL,AB,Ah,w,Ag,AR;switch(y.mLegendMarkersStyle){case p.DssGraphMarkerLeft:case p.DssGraphMarkerRight:AE=Math.floor(Ac.width+AS.width*(1+A));Ai=Ac.height;break;case p.DssGraphMarkerCentered:AE=Ac.width;Ai=Ac.height;break;case p.DssGraphMarkerAbove:case p.DssGraphMarkerBelow:AE=Ac.width;Ai=Math.floor(Ac.height+AS.height*(1+A));break;default:break;}if(Ai===0){Ai=1;}if(AE===0){AE=1;}AZ=0;Aj=0;AC=this.mLegendItemCount;switch(y.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:AI=Math.floor((AV.height-Ae)/(Ai+Ae));if(AI===0){AI=1;}AZ=Math.floor(this.mLegendItemCount/AI);if(AZ*AI<this.mLegendItemCount){AZ++;}Aj=Math.floor(this.mLegendItemCount/AZ);if(Aj*AZ<this.mLegendItemCount){Aj++;}break;case I.DssGraphLegendPositionBottom:AI=Math.floor((AV.width-AJ)/(AE+AJ));if(AI===0){AI=1;}Aj=Math.floor(this.mLegendItemCount/AI);if(Aj*AI<this.mLegendItemCount){Aj++;}AZ=Math.floor(this.mLegendItemCount/Aj);if(Aj*AZ<this.mLegendItemCount){AZ++;}break;case I.DssGraphLegendPositionFreeFloat:AN=this.mChartContextPtr.GetLocation(d.DssGraphLegendLocation);AX.y=AN.y;AX.x=AN.x;if(!y.mRecalculate){AX.width=AN.width;AX.height=AN.height;Ab=Math.floor((AX.height-this.mEdgeMargin*2+D)/Ai);AO=Math.floor((AX.width-this.mEdgeMargin*2+D)/AE);if(Ab*AO<AC){AC=Ab*AO;Aj=Ab;AZ=AO;}else{AZ=Math.floor(this.mLegendItemCount/Ab);if(AZ===0){AZ=1;}if(AZ*Ab<this.mLegendItemCount){AZ++;}Aj=Math.floor(this.mLegendItemCount/AZ);if(Aj*AZ<this.mLegendItemCount){Aj++;}}if(Aj>0){Ae=Math.floor((AX.height-Aj*Ai-this.mEdgeMargin*2)/Aj);}if(AZ>0){AJ=Math.floor((AX.width-AZ*AE-this.mEdgeMargin*2)/AZ);}}else{AI=Math.floor((AV.height-Ae)/(Ai+Ae));if(AI===0){AI=1;}AZ=Math.floor(this.mLegendItemCount/AI);if(AZ*AI<this.mLegendItemCount){AZ++;}Aj=Math.floor(this.mLegendItemCount/AZ);if(Aj*AZ<this.mLegendItemCount){Aj++;}}break;default:break;}if(y.mLegendPosition!==I.DssGraphLegendPositionFreeFloat||y.mRecalculate){AX.height=Math.floor(Ai*Aj+Ae*Aj+this.mEdgeMargin*2);AX.width=Math.floor(AE*AZ+AJ*AZ+this.mEdgeMargin*2);if(y.mRecalculate){if(!this.mIsExpanded){AH=this.mChartContextPtr.mGraphWidth;AQ=this.mChartContextPtr.mGraphHeight;if(AX.x+AX.width>AH){AX.width=AH-AX.x;}if(AX.y+AX.height>AQ){AX.height=AQ-AX.y;}}}}if(this.mIsExpanded){switch(y.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:this.mArea.width=AX.width*1.8+530;if(this.mArea.width>F){this.mArea.width=F;}this.mChartContextPtr.SetGraphSize(this.mArea.x+this.mArea.width+this.mChartContextPtr.vdWidth(C),this.mChartContextPtr.mGraphHeight);break;case I.DssGraphLegendPositionBottom:this.mArea.height=AX.height*0.4+400;if(this.mArea.height>P){this.mArea.height=P;}this.mChartContextPtr.SetGraphSize(this.mChartContextPtr.mGraphWidth,this.mArea.y+this.mArea.height+this.mChartContextPtr.vdHeight(C));break;case I.DssGraphLegendPositionFreeFloat:v=this.mChartContextPtr.mGraphWidth;AT=this.mChartContextPtr.mGraphHeight;if(AX.x+AX.width>this.mChartContextPtr.mGraphWidth){v=AX.x+AX.width+this.mChartContextPtr.vdWidth(C);}if(AX.y+AX.height>this.mChartContextPtr.mGraphHeight){AT=AX.y+AX.height+this.mChartContextPtr.vdHeight(C);}this.mChartContextPtr.SetGraphSize(v,AT);break;default:break;}}switch(y.mLegendPosition){case I.DssGraphLegendPositionRight:AX.y=Math.floor(this.mArea.y+this.mArea.height/2-AX.height/2);AX.x=Math.floor(this.mArea.x+this.mArea.width-AX.width);break;case I.DssGraphLegendPositionLeft:AX.y=Math.floor(this.mArea.y+this.mArea.height/2-AX.height/2);AX.x=this.mArea.x;break;case I.DssGraphLegendPositionBottom:AX.y=this.mArea.y+this.mArea.height-AX.height;AX.x=Math.floor(this.mArea.x+(this.mArea.width-AX.width)/2);break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}if(!this.mChartContextPtr.mManualLayoutMode||y.mReposition){this.mChartContextPtr.PutLocation(d.DssGraphLegendLocation,AX);}for(Af=0;Af<AC;++Af){t=Math.floor(Af/AZ);z=Af-t*AZ;AP=0;switch(y.mLegendMarkersStyle){case p.DssGraphMarkerRight:AP=AJ;break;case p.DssGraphMarkerCentered:case p.DssGraphMarkerAbove:case p.DssGraphMarkerBelow:AP=AJ/2;break;}Ad=new V.Point2D();Ad.x=AX.x+(AE+AJ)*z+this.mEdgeMargin+AP;Ad.y=Math.floor(AX.y+(Ai+Ae)*t+this.mEdgeMargin+Ae/2);AK=new V.Point2D();AD=new V.Point2D();switch(y.mLegendMarkersStyle){case p.DssGraphMarkerLeft:AK.x=Math.floor(Ad.x+AS.width/2);AK.y=Math.floor(Ad.y+Ai/2);AD.x=Math.floor(Ad.x+AS.width*(1+A));AD.y=Ad.y;break;case p.DssGraphMarkerRight:AK.x=Math.floor(Ad.x+AE-AS.width/2);AK.y=Math.floor(Ad.y+Ai/2);AD.x=Ad.x;AD.y=Ad.y;break;case p.DssGraphMarkerCentered:AK.x=Math.floor(Ad.x+AE/2);AK.y=Math.floor(Ad.y+Ai/2);AD.x=Ad.x;AD.y=Ad.y;break;case p.DssGraphMarkerAbove:AK.x=Math.floor(Ad.x+AE/2);AK.y=Math.floor(Ad.y+AS.height/2);AD.x=Ad.x;AD.y=Ad.y+AS.height*(1+A);break;case p.DssGraphMarkerBelow:AK.x=Math.floor(Ad.x+AE/2);AK.y=Math.floor(Ad.y+Ai-AS.height/2);AD.x=Ad.x;AD.y=Ad.y;break;default:break;}AU=Y.call(this)?(this.mLegendItemCount-Af-1):Af;AY=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AU});AF=this.mChartContextPtr.mGraphType;if(AF>=a.DssGraphTypeHiLo_Stock_Chart&&AF<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart&&Af>=AA){var AW=this.mLegendItemIndexToStockMetricIndex[Af];if(AW===undefined){break;}x=AW.value;if(this.mStockMetricLayout[x]===e.DssGraphMetricVerticalLine||this.mStockMetricLayout[x]===e.DssGraphMetricLine){Aa=new V.Point2D({Point2D:AK});AM=this.mLegendMarkerSize/2;AL=this.mStockMetricLayout[x]===e.DssGraphMetricVerticalLine?new V.Point2D({x:Aa.x,y:Math.floor(Aa.y-1.75*AM)}):new V.Point2D({x:Math.floor(Aa.x-1.75*AM),y:Aa.y});AB=this.mStockMetricLayout[x]===e.DssGraphMetricVerticalLine?new V.Point2D({x:Aa.x,y:Math.floor(Aa.y+1.75*AM)}):V.Point2D({x:Math.floor(Aa.x+1.75*AM),y:Aa.y});Ah=new V.StraightLineObject({TripleId:AY,GraphObjectManager:this,StartPoint:AL,EndPoint:AB});w=new V.FormatLine({LineStyle:G.LS_SHORT_DASH,Alpha:255,LineThickness:1,LineColor:V.gBlack.ToInteger()});Ah.SetFormatLine(w);this.mLegendMarkerLines.push(Ah);u=new V.MarkerObject({TripleId:AY,GraphObjectManager:this,MarkerPosition:AK,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});u.mIsShown=false;}else{Ag=this.mStockMetricLayout[x]===e.DssGraphMetricBar?f.DssGraphMarkerShapeRectangle:f.DssGraphMarkerShapeHouse;u=new V.MarkerObject({TripleId:AY,GraphObjectManager:this,MarkerPosition:AK,MarkerShape:Ag,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});u.SetFormatFill(new V.FormatFill({SimpleColor:V.gBlack.ToInteger()}));}}else{u=new V.MarkerObject({TripleId:AY,GraphObjectManager:this,MarkerPosition:AK,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});}this.AddToMapAndList(u);AR=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AU}));AR.SetRect(Ac);AR.MoveTo(AD.x,AD.y);AR.mIsShown=true;}return AX;}function W(){var t=this.mDatasetPtr;if(!this.mGraphOptionsLegend.mIsByGroup){return t.GetSeriesCount();}return t.GetGroupCount();}function Q(){var z=this.mChartContextPtr,x,w,y=[],v,t,u;x=z.GetLocationRect(d.DssGraphLegendLocation);w=new V.Point2D({x:Math.floor(x.x+x.width/2),y:Math.floor(x.y+x.height/2)});y[0]=w.Distance(new V.Point2D({x:z.mGraphWidth,y:Math.floor(z.mGraphHeight/2)}));y[1]=w.Distance(new V.Point2D({x:0,y:Math.floor(z.mGraphHeight/2)}));y[2]=w.Distance(new V.Point2D({x:Math.floor(z.mGraphWidth/2),y:z.mGraphHeight}));v=y[0];t=0;for(u=1;u<3;++u){if(y[u]<v){v=y[u];t=u;}}return(t+1);}function H(){var AA=this.mChartContextPtr,u=this.mGraphOptionsLegend,x,t,y,z,w,v;x=AA.GetProperty(d.DssGraphShowLegendText,o);if(x){u.mShowLegend=(x!==B);}x=AA.GetProperty(d.DssGraphMarkerLayout,o);if(x){u.mLegendMarkersStyle=x;}x=AA.GetProperty(d.DssGraphLegendLock,o);if(x){u.mLegendPosition=x;if(!AA.mManualLayoutMode&&u.mLegendPosition===K.LL_LegendFreeFloat){u.mLegendPosition=K.LL_LegendOnRightSide;}}if(AA.mManualLayoutMode){u.mLegendPosition=K.LL_LegendFreeFloat;x=AA.GetProperty(d.DssGraphInfoRecalculateLegend,o);if(x){u.mRecalculate=x!==B;if(u.mRecalculate){x=AA.GetProperty(Z.DssGraphInfoRecalculateChartFrame,o);if(x){u.mReposition=x!==B;if(u.mReposition){u.mLegendPosition=Q.call(this);}}}}x=AA.GetProperty(d.DssGraphAxisAutoFit,o);if(x){u.mAxisLabelsAutoFit=x!==B;}if(u.mAxisLabelsAutoFit){u.mRecalculate=true;u.mReposition=true;u.mLegendPosition=Q.call(this);}}u.mIsByGroup=AA.isLegendByGroup();if(!AA.mManualLayoutMode||u.mRecalculate){x=AA.GetProperty(Z.DssGraphInfoAutosizeHorizontal,o);t=AA.GetProperty(Z.DssGraphInfoAutosizeVertical,o);if(x&&t){this.mIsExpanded=x!==B&&t!==B;}this.mIsExpanded=false;}this.mLegendItemCount=W.call(this);w=AA.mGraphType;if(w===a.DssGraphTypePareto_Percent){y=false;z=1;x=AA.GetProperty(Z.DssGraphUseChartArea,o);if(x){y=x!==B;}if(y){x=AA.GetProperty(Z.DssGraphChartAreaNumber,o);if(x){z=x;if(z>this.mLegendItemCount){z=this.mLegendItemCount;}}}this.mLegendItemCount+=z;}else{if(w>=a.DssGraphTypeHiLo_Stock_Chart&&w<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){for(v=0;v<3;++v){x=AA.GetProperty(d.DssGraphShowMetric1+v,o);if(x){if(x!==B){this.mLegendItemIndexToStockMetricIndex[this.mLegendItemCount++]=v;x=AA.GetProperty(d.DssGraphMetric1Value+v,o);if(x){this.mStockMetricValue[v]=x;}x=AA.GetProperty(d.DssGraphMetric1Style+v,o);if(x){this.mStockMetricLayout[v]=x;}}}}}}}mstrmojo.chart.Legend=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Legend",mDatasetPtr:null,mLegendArea:null,mArea:null,mGraphOptionsLegend:null,mStockMetricLayout:null,mStockMetricValue:null,mLegendMarkerLines:null,mItemMargin:0,mEdgeMargin:0,mLegendMarkerSize:0,mIsExpanded:false,mLegendItemCount:0,mLegendItemIndexToStockMetricIndex:null,init:function l(t){this._super(t);this.mDatasetPtr=t.DataSet||null;this.mLegendArea=t.Area?new V.Rect2D({Rect2D:t.Area}):null;this.mArea=t.Area?new V.Rect2D({Rect2D:t.Area}):null;this.mGraphOptionsLegend={mShowLegend:true,mShowSeriesTitles:true,mLegendPosition:K.LL_LegendOnRightSide,mLegendMarkersStyle:r.LMS_LeftOfText,mLegendBoxStyle:S.BS_NOFRAME,mLegendItemsNum:0,mAxisLabelsAutoFit:true,mVertical:true,mRecalculate:false,mReposition:false,mIsByGroup:false};this.mStockMetricLayout=[0,0,0];this.mStockMetricValue=new Array(3);this.mLegendMarkerLines=[];this.mLegendItemIndexToStockMetricIndex={};H.call(this);},GenerateMapAndList:function k(){var y=this.mChartContextPtr,x,u,v,w,t;x=new V.TripleId({ObjectId:e.DssGraphLegendText});u=new V.GraphCollectionObject({TripleId:x,GraphObjectManager:this,CollectionType:L});this.AddToMap(u);v=y.GetFormatFont(new V.TripleId({ObjectId:e.DssGraphLegendText}));u.SetFormatFont(v);X.call(this,v);this.mLegendArea=J.call(this,this.mArea,u);w=y.GetProperty(d.DssGraphLegendBox,o);if(w===null||w===undefined){w=S.BS_NOFRAME;}x=new V.TripleId({ObjectId:e.DssGraphLegendArea});t=new V.FancyBoxObject({TripleId:x,GraphObjectManager:this,BoxStyle:w,Area:this.mLegendArea});this.AddToMapAndList(t);},GetLegendArea:function j(){return this.mLegendArea;},CalculateFrame:function R(x,w,v){var t,u;t=this.GetLegendArea();switch(this.mGraphOptionsLegend.mLegendPosition){case I.DssGraphLegendPositionRight:if(t.width<this.mArea.width*c){v.width=t.x-x-this.mArea.x;}break;case I.DssGraphLegendPositionLeft:if(t.width<this.mArea.width*c){u=this.mArea.x+this.mArea.width;v.x=t.x+t.width+x;v.width=u-v.x;}break;case I.DssGraphLegendPositionBottom:if(t.height<this.mArea.height*c){v.height=t.y-w-this.mArea.y;}break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}},Draw:function b(){var v=this.mGraphObjectList,w=this.mLegendMarkerLines,t,u;v[0].Draw();t=w.length;for(u=0;u<t;++u){w[u].Draw();}t=v.length;for(u=1;u<t;++u){v[u].Draw();}},SetFormatLineOfLegendMarkerLine:function g(AA,AD,w){var u=this.mChartContextPtr,x,y,AC,z,t,AB;if(w===undefined){w=false;}x=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AD}));if(!x){return false;}y=x.mMarkerPosition;AC=x.mMarkerSize;z=u.mIsGraphMatrix?1:1.75;t=w?new V.Point2D({x:y.x,6:y.y-z*AC}):new V.Point2D({x:y.x-z*AC,y:y.y});AB=w?new V.Point2D({x:y.x,y:y.y+z*AC}):new V.Point2D({x:y.x+z*AC,y:y.y});var v=new V.StraightLineObject({TripleId:new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AD}),GraphObjectManager:this,StartPoint:t,EndPoint:AB});v.SetFormatLine(AA);this.mLegendMarkerLines.push(v);return true;},UpdateFormatForLegendMarker:function q(t,z,w,y,u){if(t<0||t>=this.mLegendItemCount){return ;}y=(y!==undefined)?y:false;u=(u!==undefined)?u:false;var x=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:t});var v=this.GetGraphObject(x);if(!v){return ;}if(z){v.SetFormatFill(z);}if(w){if(y){this.SetFormatLineOfLegendMarkerLine(w,t,u);}else{v.SetFormatLine(w);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","Axis","ChartAdvFormat","NumberObject","AxisObject","Vector2D","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphOffScaleType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumNumberCategory","EnumCollectionType","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphMarkerShape");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresCls("mstrmojo.gm.GMUtility");var AJ=mstrmojo.hash,BW=mstrmojo.chart,BS=BW.ChartConstants,BC=BW.enums,BP=mstrmojo.VisUtility,a=BC.EnumGraphMajorType,Ao=BC.EnumDSSGraphOffScaleType,Z=BC.EnumAnchorPoint,T=BC.EnumAxisLabelsLocation,g=BC.EnumAxisDirection,AK=BC.EnumGraphObjectType,s=BC.EnumCollectionType,BR=BW.model,AU=BR.enums,e=AU.EnumDSSGraphMarkerShape,Ay=AU.EnumDSSGraphType,A1=AU.EnumDSSGraphProperty,A3=AU.EnumDSSGraphObject,A2=AU.EnumDSSExtraGraphProperty,BG=AU.EnumDSSGraphFontRotation,p=AU.EnumDSSGraphGridLineType,q=BC.EnumRectExpandDirection,S=BC.EnumGraphMatrixMajorGraphType,AN=BW.common.Utility,A6=mstrmojo.gm,AC=A6.GMUtility,BV=0,AG=1e-14,AA=10000,BT=0.1;var AE=new BW.Rect2D(),Bf=new BW.Rect2D(),N=new BW.Rect2D(),Q=null,E=null,z=null,U=null,v=new BW.TripleId();function Ax(Bg){switch(Bg){case A3.DssGraphY2Body:case A3.DssGraphX2Body:return true;}return false;}function BM(Bn,Bm,Bi){var Bl=Bn,Bj=10,Bg=this.mChartContextPtr,Bk=Bg.mGraphWidth,Bh=Bg.mGraphHeight,Bp=this.IsVerticalAxis();if(Bi===undefined){var Bo=Bp?Bh:Bk;if((Bp^Bm)===0){Bi=0.5*Bn;}else{Bi=0.5*(Bo-Bn);}}Bi=Bm?-Bi:Bi;if(!Bp){Bi=-Bi;}Bl+=Bi;if(Bl<Bj||Bl+Bj>(Bp?Bh:Bk)){return null;}return Bl;}function Ad(){var Bh=this.mChartContextPtr,Bp=Bh.GetGraphMatrixContext(),Bq={Include:false,DrawFromZero:false};if(Bp.isCombinationChart()){var Bl=Bh.mDataset,Bk=Bl.GetSeriesByShape(),Bs=this.mTripleId.mObjectId,Br=false,Bo=Ax.call(this,Bs),Bm=Bk.Bar,Bj=Bk.Area,Bi=0,Bg=0;var Bu=Bl.GetSeriesCount();if(Bh.IsDualAxis()){var Bn=Bo?1:0,Bt=Bo?"Secondary":"Primary";Bk=Bl.GetShapesDistributionByValueAxis(Bn)[Bt];Bm=Bk.BAR;Bj=Bk.AREA;Bu=Bl.GetSeriesByValueAxis(Bn).length;Br=(Bm&&Bm.indexOf(Bn)!==-1)||(Bj&&Bj.indexOf(Bn)!==-1);}else{Br=((Bm&&Bm.length>0)||(Bj&&Bj.length>0));}Br=!!Br;Bq.Include=Br;if(Bm&&Bm.length>0){Bi=Bm.length;}if(Bj&&Bj.length>0){Bg=Bj.length;}Bq.DrawFromZero=(Bg+Bi===Bu);}return Bq;}function J(Bg){return Math.log(Bg)/Math.log(10);}function R(){return this.mOptions.mUseMinValue&&this.mOptions.mShowMinLabel;}function Av(){return this.mGraphMajorType===a.GMT_HISTOGRAM&&this.mTripleId.mObjectId===A3.DssGraphX1Body;}function I(){var Bg=this.mChartContextPtr;if(Bg.mIsGraphMatrix){return !this.IsVerticalAxis();}if(!this.mChartContextPtr.mManualLayoutMode&&this.mTripleId.mObjectId===A3.DssGraphX1Body&&!this.IsVerticalAxis()){switch(this.mGraphMajorType){case a.GMT_HISTOGRAM:case a.GMT_SCATTER:case a.GMT_BUBBLE:return true;default:break;}}return false;}function AI(){var By,Bj,Br,Bx,Bi,Bu=0,Bo=this.mOptions,Bw,Bl,Bp,Bk=0;var Bh=this.mChartContextPtr,Bn=Bh.mIsGraphMatrix,Bg=Bh.getUniformAxisLabelRotateMode("x");By=[];this.GetTicks(By);if(By.length<2){if(!Bn||Bg===BG.Automatic){return ;}}Br=BW.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(Br,AK.GOT_AXIS_LABEL);Bi=this.mpAxisLabelSet.GetFormatFont();if(Bn){if(Bg!==BG.Automatic){Bi.mFontRotation=Bg;return ;}}Bw=By.length;Bx=50;Bj=false;AE.Reset(0,0,0,0);Bi.mFontRotation=BG.Normal;if(!Bn&&Bw>=2){if(this.mOptions.mUseMinValue){Bu=1;Bk=1;}if(this.mOptions.mUseMaxValue){Bw--;}}var Bs,Bt=Bu,Bv=this.mChartContextPtr.GetGraphMatrixContext();for(Bs=0;Bu<Bw;Bu++){if(this.hasLabelCreated){Bl=this.mLabelList[Bu];}Bl=Bl||new BW.NumberObject({TripleId:Br,GraphObjectManager:this,Number:By[Bu],NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});Bl.MoveTo(this.ValueToPosition(By[Bu]),Bx,Z.CENTER);Bp=Bl.GetBoundingRect(true);if(Bu!==Bk){if(Bn){var Bq=(Bu===1&&Bo.mUseMinValue)||(Bu===Bw-1&&Bo.mUseMaxValue);if(!Bq){var Bm=1;Bj=Bp.HasIntersection(AE)||Bv.checkPaddingBetweenLabels(AE,Bp,Bm,true);}}else{Bj=Bp.HasIntersection(AE);}}AE.ResetRect(Bp);}this.hasLabelCreated=this.mpAxisLabelSet.GetCollectionSize()===Bw;if(Bj){Bi.mFontRotation=Bn?BG.Rotate90:BG.Rotate270;}else{Bi.mFontRotation=BG.Normal;}this.maxLabelLength=this.fakeMaxLabelLength;if(this.maxLabelLength!==-1){this.restoreLabels(true);for(Bs=0;Bt<Bw;Bt++){Bl=this.mLabelList[Bt];Bl.MoveTo(this.ValueToPosition(By[Bt]),Bx,Z.CENTER);}}}function AZ(){switch(this.mChartContextPtr.GetGraphType()){case Ay.DssGraphTypeVertical_Area_DualAxis_Absolute:case Ay.DssGraphTypeVertical_Area_DualAxis_Stacked:case Ay.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Ay.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Ay.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Ay.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Ay.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Ay.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Ay.DssGraphTypeVertical_Line_DualAxis_Absolute:case Ay.DssGraphTypeVertical_Line_DualAxis_Stacked:case Ay.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Ay.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Ay.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Ay.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:return true;default:return false;}}function f(){if(this.mUseDepth){return(Ax.call(this,this.mTripleId.mObjectId)===false||!(AZ.call(this)));}return this.mAxisInfo.mShowAxisLine;}function x(Bi,Bg){var Bh;Bh=new BW.NumberObject({TripleId:Bi,GraphObjectManager:this,Number:Bg,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectedCondense:this.mCondenseLabels});this.mGraphObjectList.push(Bh);this.mpAxisLabelSet.AddGraphObject(Bh);}function Be(){var Bi,Bg,Bj,Bh;Bi=[];this.GetTicks(Bi);Bg=Bi.length;Bj=this.mLabelObjectId;for(Bh=0;Bh<Bg;++Bh){x.call(this,Bj,Bi[Bh]);}}function AB(Bo,Bh,Bm){var Bj=this.mChartContextPtr,Bp=this.mOptions,Bg=Bh,Bl=Bm;var Bi=Bj.mIsGraphMatrix&&Bp.mUseCustomMinMax;if(!Bj.mIsTimeSeriesChart&&!Bi){if(Bj.mIsGraphMatrix){var Bn=1e-9,Bk=Math.abs((Bo-this.mMaxTick)/(this.mMaxTick-this.mMinTick));if((Bo<this.mMinTick||(Bo>this.mMaxTick&&Bk>Bn))&&Bp.mOffScaleType===Ao.DssGraphOffScaleHide){return{Flag:false,Value:Bo,Min:Bg,Max:Bl};}if(Bo>this.mMaxTick&&Bp.mOffScaleType===Ao.DssGraphOffScaleHide){Bo=this.mMaxTick;}}else{if((Bo<this.mMinTick||Bo>this.mMaxTick)&&Bp.mOffScaleType===Ao.DssGraphOffScaleHide){return{Flag:false,Value:Bo,Min:Bg,Max:Bl};}}if(Bp.mOffScaleType===Ao.DssGraphOffScaleClip){Bo=(Bo>this.mMaxTick)?this.mMaxTick:Bo;Bo=(Bo<this.mMinTick)?this.mMinTick:Bo;}}Bg=this.mMinTick;Bl=this.mMaxTick;if(this.IsLogarithmic()){if(Bo<=0){return{Flag:false,Value:Bo,Min:Bg,Max:Bl};}Bo=J.call(this,Bo);Bg=J.call(this,Bg);Bl=J.call(this,Bl);}return{Flag:true,Value:Bo,Min:Bg,Max:Bl};}function C(){}function AW(Bj){if(z===null){z=new BW.Point2D();}else{U.Reset(0,0);}if(U===null){U=new BW.Point2D();}else{U.Reset(0,0);}var Bh=z,Bl=U,Bi=this.mDeviceDataArea,Bg,Bk;Bg=this.IsVerticalAxis()?Bi.x:Bi.x+Bi.width;Bk=this.IsVerticalAxis()?Bi.y:Bi.y+Bi.height;Bh.Reset(Bg,Bk);Bl.Reset(Bi.x+Bi.width,Bi.y);if(this.IsVerticalAxis()){Bh.y=this.ValueToPosition(Bj);Bl.y=Bh.y;}else{Bh.x=this.ValueToPosition(Bj);Bl.x=Bh.x;}return{LowEnd:Bh,HighEnd:Bl};}function Bc(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bk=this.mOptions;if(Bk.mUseCustomMinMax||Bk.mUseLogarithmicScale){return ;}var Bi=false,Bg=false,Bj=[];this.GetTicks(Bj);if(Bj.length>=2){var Bh=Bj.length;Bg=((Math.abs(this.mMaximum-Bj[Bh-2])<BT*this.mStep));Bi=((Math.abs(this.mMinimum-Bj[1])<BT*this.mStep));if(this.mIsPercent){Bg=false;}}if(Bg&&Bi){this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;Bk.mUseMinValue=true;Bk.mShowMinLabel=false;Bk.mUseMaxValue=true;Bk.mShowMaxLabel=false;}else{if(Bg){this.mMaxTick=this.mMaximum;Bk.mUseMaxValue=true;Bk.mShowMaxLabel=false;}else{if(Bi){this.mMinTick=this.mMinimum;Bk.mUseMinValue=true;Bk.mShowMinLabel=false;}else{BV++;}}}if(Bk.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}function Au(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}if(this.mGraphMajorType===a.GMT_BUBBLE&&this.mTripleId.mObjectId===A3.DssGraphZBody){return ;}Bc.call(this);}function u(){var Bk=this.mChartContextPtr;if(!Bk.mIsGraphMatrix){return false;}var Bj=Bk.mDataset;if(!Bj){return false;}if(!this.mIsUniformAxis){var Bi=Bk.GetGraphMatrixContext();if(Bi.isPieOrRingShape()===false&&Bj.showDatalabels()===false){return true;}if(Bi.isPieOrRingShape()===true&&Bj.showPieDatalabels()===false){return true;}}if(this.mPrimaryMetrics){if(!!this.mNumberFormat.isDefault){this.mNumberFormat=new BW.ChartAdvFormat();}var Bh=Bj.getValueAxisNumberFormat(this.mNumberFormat,this.mPrimaryMetrics);if(this.mIsPercent===false){return Bh;}}var Bg=this.mNumberFormat;if(this.mIsPercent){Bg.mFormatType=4;Bg.mCustomFormat="0%";return true;}return false;}function AR(Bj){var Bh,Bi,Bg;for(Bh=0;Bh<2;Bh++){Bi=(Bh===0)?this.mHighTicksToLabel:this.mLowTicksToLabel;Bg=Bi[Bj];if(Bg&&Bg.mIsShown){return Bg;}}return null;}function AV(Bl,Bi){var Bj,Bk=this.mChartContextPtr;if(Bk.mIsGraphMatrix){if(this.IsVerticalAxis()){if(Bi.y===Bk.mGraphHeight){--Bi.y;--Bl.y;}}if(Bk.isUADataAreaOutput()){var Bh=Bk.GetGraphMatrixContext().getPadding(BS.kEndTickToChart),Bg=Bk.getUniformAxisContext();if(this.IsVerticalAxis()){if(Bg.mDataAreaRightMargin>=0){if(Bl.x+Bg.mDataAreaRightMargin<=Bk.mGraphWidth){Bl.x+=Bg.mDataAreaRightMargin;}else{Bl.x=Bk.mGraphWidth;}}if(Bg.mDataAreaLeftMargin>=0){if(Bi.x>=Bg.mDataAreaLeftMargin){Bi.x-=Bg.mDataAreaLeftMargin;}}Bj=Bk.mGraphHeight;if(Math.abs(Bi.y-Bj)<Bh||Math.abs(Bi.y)<Bh){return false;}}else{if(Bg.mDataAreaBottomMargin>=0){if(Bi.y+Bg.mDataAreaBottomMargin<=Bk.mGraphHeight){Bi.y+=Bg.mDataAreaBottomMargin;}else{Bi.y=Bk.mGraphHeight;}}if(Bg.mDataAreaTopMargin>=0){if(Bl.y>=Bg.mDataAreaTopMargin){Bl.y-=Bg.mDataAreaTopMargin;}}Bj=Bk.mGraphWidth;if(Math.abs(Bi.x)<Bh||Math.abs(Bl.x-Bj)<Bh){return false;}}}}return true;}function Ac(Bo,Bp,Bq,Bi){var Br,Bs,Bk,Bl,Bg=[],Bh=this.mChartContextPtr,Bj;if(Bp>this.mMaxTick||Bp<this.mMinTick){return ;}if(Bh.mIsGraphMatrix){if(this.mAxisInfo.mAxisDirection>=g.AD_Z){return ;}if(Bh.isUADataAreaOutput()){var Bn=Bh.GetGraphMatrixContext().mShownValueTickSet[this.mAxisInfo.mAxisDirection];if(Bn[Bp]===undefined){return ;}}if(this.mIsUniformAxis){if(this.mAxisInfo.mShowAxisLabels===false){return ;}var Bm=AR.call(this,Bp);if(!Bm||!Bm.mIsShown){return ;}}}Bj=AW.call(this,Bp);Br=Bj.LowEnd;Bs=Bj.HighEnd;if(!AV.call(this,Bs,Br)){return ;}Bk=Bi?this.mMajorGrid.mGridStyle:this.mMinorGrid.mGridStyle;Bl=Math.floor(Bi?this.mTickLength:this.mTickLength*2/3+1);this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,Bk,Bl,Br,Bs,Bg);this.GenerateOneLineObject(Bo,Bg,Bq);if(this.HasTwoGridLineParts(Bk)){Bg.splice(0,Bg.length);this.GetOneGridLine(this.IsVerticalAxis()?T.ALL_RIGHT:T.ALL_TOP,Bk,Bl,Br,Bs,Bg);this.GenerateOneLineObject(Bo,Bg,Bq);}}function t(Bh,Bj,Bg){var Bi=Bh?this.mHighTicksToLabel:this.mLowTicksToLabel;Bi[Bj]=Bg;}function BX(Bi,Bj){var Bh,Bg=this.mpAxisLabelSet.GetCollectionSize(),Bk=Bi?this.mHighTicksToLabel:this.mLowTicksToLabel;Bk={};if(Bj<0||Bj>=Bg){return ;}for(Bh=Bj;Bh<Bg;Bh++){var Bl=this.mpAxisLabelSet.GetObjectByIndex(Bh);if(Bl){t.call(this,Bi,Bl.mNumber,Bl);}}}function P(Bg,Bi){if(Bi<=0){return 0;}var Bn=this.mOptions,Bm=this.mMaxTick,Bk=this.mMinTick,Bl=this.mMaximum,Bj=this.mMinimum,Bh;if(Bn.mUseLogarithmicScale){Bl=Bl<=0?-1:J.call(this,Bl);Bj=Bj<=0?-1:J.call(this,Bj);Bm=J.call(this,Bm);Bk=J.call(this,Bk);}Bh=Bg?Bm-Bl:Bj-Bk;Bh=Math.abs(Bh);return Bh/(Bm-Bk)*Bi;}function BE(){var Bi,Bj,Bg,Bh;if(this.mIsUniformAxis){Bi=this.mTripleId;}else{Bi=BW.gAxisObjects[this.getIndex()].mMajorId;}if(this.hasMajorTickCreated){this.clearTickObjects(Bi,true);this.hasMajorTickCreated=false;}this.InitObjectSet(Bi,AK.GOT_MAJOR_GRID);if(this.mChartContextPtr.mIsGraphMatrix){Ac.call(this,Bi,this.mMinTick,this.mpMajorGridSet,true);Ac.call(this,Bi,this.mMaxTick,this.mpMajorGridSet,true);}else{Bj=true;Bg=this.mChartContextPtr.GetProperty(A1.DssGraphLineAlpha,new BW.TripleId({ObjectId:A3.DssGraphFrame}));if(Bg){Bj=(Bg>0);}if(!Bj||this.mAxisInfo.mAxisDrawInReverse){Ac.call(this,Bi,this.mMinTick,this.mpMajorGridSet,true);}if(!Bj||!this.mAxisInfo.mAxisDrawInReverse){Ac.call(this,Bi,this.mMaxTick,this.mpMajorGridSet,true);}}for(Bh=0;Bh<this.mTicks.length;++Bh){Ac.call(this,Bi,this.mTicks[Bh],this.mpMajorGridSet,true);}this.hasMajorTickCreated=true;}function O(){var Bj,Bi=this.mOptions,Bg,Bl,Bk,Bh;Bj=1;if(Bi.mUseLogarithmicScale){Bj=8;}else{if(this.mMinorGrid.mUseManualGrid){Bj=Math.floor(this.mMinorGrid.mGridInterval);}}if(this.mIsUniformAxis){Bg=this.mTripleId;}else{Bg=BW.gAxisObjects[this.getIndex()].mMinorId;}if(this.hasMinorTickCreated){this.clearTickObjects(Bg,false);this.hasMinorTickCreated=false;}this.InitObjectSet(Bg,AK.GOT_MINOR_GRID);Bl=this.mStep/(Bj+1);for(Bk=0;Bk<this.mTicks.length;++Bk){Bl=Bi.mUseLogarithmicScale?this.mTicks[Bk]:Bl;for(Bh=1;Bh<=Bj;++Bh){Ac.call(this,Bg,this.mTicks[Bk]+Bh*Bl,this.mpMinorGridSet,false);}}if(this.mTicks.length===0){Bl=Math.floor(Bi.mUseLogarithmicScale?this.mMinTick:(this.mMaxTick-this.mMinTick)/(Bj+1));for(Bh=1;Bh<=Bj;++Bh){Ac.call(this,Bg,this.mMinTick+Bh*Bl,this.mpMinorGridSet,false);}return ;}Bl=Bi.mUseLogarithmicScale?this.mMinTick:Bl;for(Bh=1;Bh<=Bj;++Bh){Ac.call(this,Bg,this.mTicks[0]-Bh*Bl,this.mpMinorGridSet,false);}this.hasMinorTickCreated=true;}function Bd(){var Bj=this.mChartContextPtr;if(Bj.mIsGraphMatrix&&!Bj.isUADataAreaOutput()){if(this.mAxisInfo.mAxisDirection>=g.AD_Z){return ;}var Bh=Bj.GetGraphMatrixContext(),Bg=Bh.mShownValueTickSet[this.mAxisInfo.mAxisDirection]={},Bi=function(Bk){AJ.forEach(Bk,function(Bl){if(Bl.mIsShown){Bg[Bl]=true;}});};Bi(this.mHighTicksToLabel);Bi(this.mLowTicksToLabel);}}function At(Bh,Bj,Bi){var Bg=this.ValueToFloatPosition(Bh),Bk=Bj+0.5*Bi,Bl=this.mChartContextPtr;if(Bg>=Bk&&Bg+Bk<=Bl.mGraphWidth){return true;}return false;}function d(){var Bh=this.mChartContextPtr,Bl=Bh.GetGraphMatrixContext(),Bm=this.mDeviceDataArea,Bo=this.IsVerticalAxis(),Bg,Bp=this.mpAxisLabelSet.mFormatFontPtr,Bi=Bl.getPadding(BS.kEndLabelToChart);if(Bo){Bg=Math.max(Bm.height,Bh.mGraphHeight);}else{Bg=Math.max(Bm.width,Bh.mGraphWidth);}if(Bg<Bp.mFontSize+2*Bi){return false;}if(Bg<Bp.GetStringHeight("H")+2*Bi){return false;}if(Bm.width>=0&&Bm.height>0){var Bn=[];this.GetTicks(Bn);var Bj,Bk=Bn.length;for(Bj=0;Bj<Bk;Bj++){if(At.call(this,Bn[Bj],Bi,Bp.mFontSize)===true){return true;}}}return true;}function W(){if(this.hasLabelCreated){var Bh,Bi=this.mLabelList,Bg=Bi.length;for(Bh=0;Bh<Bg;Bh++){if(Bi[Bh]&&Bi[Bh].mIsShown){return true;}}return false;}return d.call(this);}function K(Bi){var Bj=this.mChartContextPtr,Bh=0,Bg=0;if(Bj.mIsGraphMatrix){Bg=Bh=Bj.GetGraphMatrixContext().getPadding(BS.kChartToChart);if(Bi){Bg=Bh=0;}else{if(this.mMaxTick<=0){Bh=0;}if(this.mMinTick>=0){Bg=0;}}}return{LowPadding:Bg,HighPadding:Bh};}function Af(){var Bk=this.mChartContextPtr,Bh=0,Bg=Bk.GetGraphMatrixContext(),Bj=Bk.mDataset.GetGroupCount();if(Bk.mIsGraphMatrix===false){return 0;}if(Bg.isCombinationChart()){var Bi=Bk.mDataset.GetSeriesByShape();if(Bi.Circle&&Bi.Circle.length){return Bg.getPadding(BS.kExtra);}if(Bi.Square&&Bi.Square.length){return Bg.getPadding(BS.kExtra);}if(Bi.Circle&&Bi.Circle.length){return Bg.getPadding(BS.kExtra);}if((Bi.Line&&Bi.Line.length)||(Bi.Area&&Bi.Area.length)){if(Bj===1){return Bg.getPadding(BS.kExtra);}}return 0;}switch(Bk.GetGraphMatrixGraphMajorType()){case S._BUBBLE:case S._SCATTER:case S._PIE:Bh=Bg.getPadding(BS.kExtra);break;case S._LINE:case S._AREA:if(Bj===1||Bg.mMarkerShape!==e.DssGraphMarkerShapeNone){Bh=Bg.getPadding(BS.kExtra);}break;}return Bh;}function V(Bo,B3,Bz,By){var Bj=this.mChartContextPtr,Bs=0,Bk=0,Bt=0,B2=0,Bx=0,B0=0,Bq=0,Bp=Bz,Bh=By,Bv=this.mTripleId.mObjectId===A3.DssGraphY1Body||this.mTripleId.mObjectId===A3.DssGraphX1Body,Bn=this.mAxisInfo.mAxisDirection===g.AD_X,Bl=this.mOptions.mUseCustomMinMax,Bg=!Bl||(Bl&&!this.mOptions.mUseMinValue),Bi=!Bl||(Bl&&!this.mOptions.mUseMaxValue),Bu=Bj.mUniformAxisContext,B1=Bj.GetGraphMatrixContext();if(Bi){Bs=Af.call(this);B0=B1.GetValueAxisPadding(Bn,true,Bv);B0=B0>0?B0+Bs:B0;Bk=P.call(this,true,B3-B0-Bq);B2=B0-Bk;Bp=Math.max(Bp,B2);}if(Bg){Bs=Af.call(this);Bq=B1.GetValueAxisPadding(Bn,false,Bv);Bq=Bq>0?Bq+Bs:Bq;Bt=P.call(this,false,B3-B0-Bq);Bx=Bq-Bt;Bh=Math.max(Bh,Bx);}var Br=0,Bm=Bn?Bu.mDataAreaRightMargin:Bu.mDataAreaTopMargin,Bw=Bn?Bu.mDataAreaLeftMargin:Bu.mDataAreaBottomMargin;if(!Bo){Br=Bp;if(Bm>=0&&Bm<Br){Bp=Br-Bm;}else{Bp=0;}Br=Bh;if(Bw>=0&&Bw<Br){Bh=Br-Bw;}else{Bh=0;}}return{HighPadding:Bp,LowPadding:Bh};}function F(Bj,Bi,Bm,Bh){var Bg=Bm,Bl=Bi,Bk=(this.mAxisInfo.mAxisDirection===g.AD_X)?Bh.width:Bh.height;if(Bg<0){Bg=0;}if(Bl<0){Bl=0;}if(Bk<=0||Bk<Bg+Bl){return ;}Bk-=Bg+Bl;this.mLowTrim=Bg;this.mHighTrim=Bl;if(!Bj){this.mIsTrimmedWithPadding=true;}if(this.mAxisInfo.mAxisDirection===g.AD_X){Bh.x+=Bg;Bh.width=Bk;}if(this.mAxisInfo.mAxisDirection===g.AD_Y){Bh.y+=Bl;Bh.height=Bk;}}function l(){if(this.mChartContextPtr.mIsGraphMatrix&&this.mOptions.mUseCustomMinMax){return AA;}return 32757;}function Ah(Bh,Bj){var Bi=this.mChartContextPtr,Bg=Bh.GetBoundingRect(true);if(this.IsVerticalAxis()){return(Bg.y>=Bj&&Bg.y+Bg.height+Bj<=Bi.mGraphHeight);}return(Bg.x>=Bj&&Bg.x+Bg.width+Bj<=Bi.mGraphWidth);}function AS(Bl,Bn){var Bm=this.mChartContextPtr,Bg=0,Bj=Bl-1;if(!Bm.mIsGraphMatrix){return -1;}if(this.mIsPercent&&!this.mOptions.mUseCustomMinMax){if(Bn&&this.mMaxTick===1){return Bj;}if(this.mMinTick===-1){return Bg;}}var Bi,Bk=Bm.GetGraphMatrixContext().getPadding(BS.kEndLabelToChart),Bh=this.mGraphObjectList;if(Bn){while(Bj>=0){Bi=Bh[Bj];if(!Bi.mIsShown){Bj--;continue;}if(Ah.call(this,Bi,Bk)){return Bj;}Bi.mIsShown=false;Bj--;}}else{while(Bg<=Bj){Bi=Bh[Bg];if(!Bi.mIsShown){Bg++;continue;}if(Ah.call(this,Bi,Bk)){return Bg;}Bi.mIsShown=false;Bg++;}}return -1;}function A7(B1,Bm,Bh,Bl,Bi){var Bu=true,By=this.mChartContextPtr.mIsGraphMatrix,B0=By&&this.mIsPercent,Bn=1,Bw=this.mLabelSpan,Bj=this.mOptions,Bk=this.mGraphObjectList,Br=Bk[Bl],Bo=Br;while(Bu){Bu=false;var Bx=B0?Bl-Bn:Bl+Bn,Bz=B0?(Bx>=Bm):(Bx<Bh);while(Bz){var Bv=Bk[Bx];if(Bv.HasOverlapForSameRotation(Bo,Bw,Bi)){Bu=true;Bo=Br;++Bn;break;}else{Bo=Bv;}Bx+=B0?-Bn:Bn;Bz=B0?(Bx>=Bm):(Bx<Bh);}}var Bs=this.mIsPercent?(Bl-Bm)/Bn:(Bh-Bl)/Bn;Bs=Math.floor(Bs);if(Bs<3){return Bn;}var Bt,Bg,Bp=AS.call(this,Bh,false),Bq=AS.call(this,Bh,true);if(Bp===-1||Bq===-1){return Bn;}if(this.mIsPercent){if(Bp<=Bl-Bs*Bn){return Bn;}if(Bp===0&&Bj.mUseMinValue&&Bj.mShowMinLabel&&this.mMinTick!==-1){Bp++;}Bt=(Bl-Bp)/Bn;Bg=(Bl-Bt*Bn)-Bp;Bn+=Bg/Bt;}else{if(Bq>=Bl+Bs*Bn){return Bn;}Bt=(Bq-Bl)/Bn;Bg=Bq-(Bl+Bt*Bn);Bn+=Math.floor(Bg/Bt);}return Bn;}function B(Bq,Bi,Bk,Bh,Bp){var Bm,Bg=this.mChartContextPtr,Bn=Bg.mIsGraphMatrix,Br=Bg.mIsTimeSeriesChart;if(this.mOptions.mShowMaxLabel){if((!Bn&&!Br)||(Bn&&this.mIsPercent)){var Bj=((Bi-1-Bk)%Bh);if(Bj!==0){Bm=this.mGraphObjectList[Bi-1];Bm.mIsShown=true;var Bl=Bi-1-Bj,Bo=this.mGraphObjectList[Bl];if(Bm.HasOverlapForSameRotation(Bo,this.mLabelSpan,Bp)&&(Bl>Bq||!this.mOptions.mShowMinLabel)){Bo.mIsShown=false;}}}else{if(Bn&&this.mOptions.mUseMaxValue&&Bi-Bq>2){Bm=this.mGraphObjectList[Bi-1];Bm.mIsShown=false;}}}}function AF(Bi){var Bg,Bh=this.mChartContextPtr.mIsGraphMatrix;if(this.mOptions.mShowMinLabel){if(Bh){if(this.mIsPercent&&this.mMinTick===-1){Bg=this.mGraphObjectList[Bi];Bg.mIsShown=true;}else{if(this.mIsPercent&&this.mOptions.mUseMinValue){Bg=this.mGraphObjectList[Bi];Bg.mIsShown=false;}}}}}function BD(Bo,Bh,Bl,Bi,Bj,Bq,Bp){var Bm=Bh,Bk=Bj?1:-1,Bg=0,Bn=Bj?(Bi?Bm-Bl<=0:Bm-Bl<0):(Bi?Bm-Bl>=0:Bm-Bl>0);while(Bn){if(Bj){Bg=Bm-Bq;}else{Bg=Bq-Bm;}if(Bg%Bo!==0){this.mGraphObjectList[Bm].mIsShown=false;}else{if(Bp&&Bp(Bm,Bo,Bh,Bl)){this.mGraphObjectList[Bm].mIsShown=false;}}Bm+=Bk;Bn=Bj?(Bi?Bm-Bl<=0:Bm-Bl<0):(Bi?Bm-Bl>=0:Bm-Bl>0);}}function w(Bh,Bi,Bo,Bj,Bg){var Bm=Bg,Bn=function(Br,Bq,Bt,Bs){return Br===Bs;},Bp=function(Br,Bq,Bt,Bs){return Br<Bq+Bs;};if(this.mChartContextPtr.mIsGraphMatrix&&this.mIsPercent){if(this.mMinTick===-1){if(this.mMaxTick===0){BD.call(this,Bm,Bi,Bj,true,true,0,Bn);}else{var Bl=(Bj-Bi)/Bg,Bk=(Bj-Bi)/Bl;BD.call(this,Bk,Bj-1,Bi,false,false,Bj,Bp);Bm=Bk;}}else{BD.call(this,Bm,Bj-1,Bi,true,false,Bj);}}else{BD.call(this,Bm,Bj+1,Bo,false,true,Bj);}return Bm;}function j(Bp,Bm,Bi){if(Bm>this.mMaxTick||Bm<this.mMinTick){return ;}var Bn={},Bo={},Bl,Bq=false,Bg=[];Bl=AW.call(this,Bm);Bn.x=Bl.LowEnd.x;Bn.y=Bl.LowEnd.y;Bo.x=Bl.HighEnd.x;Bo.y=Bl.HighEnd.y;var Bh=this.mChartContextPtr;if(Bh.mIsGraphMatrix){if(this.IsVerticalAxis()){Bq=Bn.y===Bh.mGraphHeight||Bn.y===0;}else{Bq=Bn.x===Bh.mGraphWidth||Bn.x===0;}}if(Bq){return ;}if(Bh.mIsGraphMatrix){if(this.IsVerticalAxis()){Bn.x=Math.min(Bn.x,0);Bo.x=Math.max(Bo.x,Bh.mGraphWidth);}else{Bo.y=Math.min(Bo.y,0);Bn.y=Math.max(Bn.y,Bh.mGraphHeight);}}if(this.mUseDepth){if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){Bn.swapPoints(Bo);}Bg.push(Bo.Shifted(this.mDepthOffset));}Bg.push(Bo);Bg.push(Bn);var Bj=new BW.TripleId({ObjectId:Bi,SeriesId:0,GroupId:0}),Bk;if(this.mTripleId.mSeriesId>0){Bk=this.mpManager.GetGraphObject(Bj,false);}if(!Bk){Bk=new BW.GraphCollectionObject({TripleId:Bj,GraphObjectManager:this,CollectionType:s.CT_LINE});this.mpManager.AddToMap(Bk);}var Br=new BW.PolyLineObject({TripleId:Bj,GraphObjectManager:this,PolyLine:Bg,GraphCollectionObject:Bk});Bk.AddGraphObject(Br);Bp.push(Br);}function AO(){this.mTicks.splice(0,this.mTicks.length);var Bg=AC.computeTicksForAxis(this);this.mMaxTick=Bg.mMaxTick;this.mMinTick=Bg.mMinTick;this.mTicks=Bg.mTicks;this.mStep=Bg.mStep;}function BO(Bk){var Bj,Bg,Bi,Bh;Bj=0;Bg=this.mTicks.length+(this.mOptions.mShowMinLabel?1:0)+(this.mOptions.mShowMaxLabel?1:0);for(Bi=0;Bi<Bg;++Bi){Bh=this.mGraphObjectList[Bi+this.mLabelStartIndex];if(Bh===undefined){continue;}Bh.GetBoundingRectEx(Bf);if(Bk){Bj=(Bj<Bf.width)?Bf.width:Bj;}else{Bj=(Bj<Bf.height)?Bf.height:Bj;}}return Bj;}function Aa(Bm,Bk,Bo){var Bh,Bg,Bn,Bl,Bj=true,Bi=this.mLabelArea;Bh=this.mGraphObjectList[Bm];if(!Bh){return ;}if(this.mUseDepth){Bg=new BW.Point2D();this.GetLabelOffset(Bk,Bg);Bn=Bg.x;Bl=Bg.y;}else{Bn=Bl=0;}if(Q===null){Q=new BW.Point2D();}else{Q.Reset(0,0);}if(E===null){E=new BW.Point2D();}else{E.Reset(1,0);}switch(Bk){case T.ALL_BOTTOM:case T.ALL_BOTTOM_TOP:Q.x=this.ValueToPosition(Bo)+Bn;Q.y=Bi.y+Bi.height;E.x=0;E.y=1;break;case T.ALL_TOP:Q.x=this.ValueToPosition(Bo)+Bn;Q.y=Bi.y;E.x=0;E.y=-1;break;case T.ALL_LEFT:case T.ALL_LEFT_RIGHT:Q.x=Bi.x;Q.y=this.ValueToPosition(Bo)+Bl;E.x=-1;E.y=0;break;case T.ALL_RIGHT:Q.x=Bi.x+Bi.width;Q.y=this.ValueToPosition(Bo)+Bl;E.x=1;E.y=0;break;default:Bj=false;break;}if(Bj){this.MoveLabel(Bh,Q,E);}}function BY(){var Bl,Bo=[],Bh,Bp,Bj,Bk;this.GetTicks(Bo);if(Bo.length===0){return ;}Bh=new BW.Rect2D({Rect2D:this.mLabelArea});if(this.mIsStagger){Bj=BO.call(this,this.IsVerticalAxis());if(this.IsVerticalAxis()){Bh.x-=Bj;Bh.width+=Bj*2;}else{Bh.x-=Bj;Bh.height+=Bj*2;}}else{var Bi,Bg,Bn=3,Bq=this.mGraphObjectList,Bm=Bq.length;if(this.hasLabelCreated){Bg=this.IsVerticalAxis()?this.mLabelArea.height:this.mLabelArea.width;Bg-=this.mChartContextPtr.GetGraphMatrixContext().getPadding(BS.kEndLabelToChart)+4;Bi=Bg>Bn;if(Bi===false){for(Bl=0;Bl<Bm;Bl++){Bq[Bl].mIsShown=false;}return ;}}}Bp=new BW.Rect2D({Rect2D:this.mLabelArea});Bk=Bo.length;for(Bl=0;Bl<Bk;++Bl){this.mLabelArea=(Bl&1)===0?Bp:Bh;Aa.call(this,Bl+this.mLabelStartIndex,this.mAxisInfo.mAxisLabelsLocation,Bo[Bl]);}this.HideOverlappedLabels(this.mLabelStartIndex,this.mLabelStartIndex+Bo.length);if(this.HasLabelsOnBothSides()){for(Bl=0;Bl<Bk;++Bl){this.mLabelArea=(Bl&1)===0?Bp:Bh;Aa.call(this,Bl+Bk+this.mLabelStartIndex,this.IsVerticalAxis()?T.ALL_RIGHT:T.ALL_TOP,Bo[Bl]);}this.HideOverlappedLabels(this.mLabelStartIndex+Bk,this.mLabelStartIndex+2*Bk);}Bd.call(this);}function BJ(Bh,Bn){var Bp,Bg=this.mChartContextPtr,Bl=Bg.mIsGraphMatrix,Bm=Bh+(R.call(this)||Bl?1:0),Bi=false,Bq=this.mLabelList,Bk=Bq.length,Bo=Bg.GetGraphMatrixContext().getPadding(BS.kLabelToChart),Bj;for(Bj=Bm;Bj<Bk;Bj++){Bp=Bq[Bj];if(Ah.call(this,Bp,Bo)){Bi=true;break;}}if(!Bl){return{Start:Bm,PaddingPossible:Bi};}if(this.mIsPercent){return{Start:Bn-1,PaddingPossible:Bi};}if(Bi){return{Start:Bj,PaddingPossible:Bi};}return{Start:Bm,PaddingPossible:Bi};}function Aw(){var Bn=0,Bm=0,Bo,Bg=this.mChartContextPtr,Bk=Bg.GetGraphMatrixContext(),Bi=this.mOptions,Bh=this.mAxisInfo,Bl=this.mDeviceDataArea,Bj;if(this.mLabelStartIndex>=this.mGraphObjectList.length){return{LowMargin:Bn,HighMargin:Bm};}if(Bi.mUseCustomMinMax){return{LowMargin:Bn,HighMargin:Bm};}if(this.mUseDepth){this.ReserveDepthAxisLine(Bl,false,this.mTripleId.mObjectId!==A3.DssGraphX1Body);}N.Reset(0,0,0,0);Bo=this.mLabelList[this.mLabelStartIndex];Bo.GetBoundingRectEx(N);Bj=this.ValueToPosition(Bo.mNumber);if(Bh.mAxisDrawInReverse){Bm=this.IsVerticalAxis()?N.height/2-(Bj-Bl.y):N.width/2-(Bl.x+Bl.width-Bj);Bm=(Bm<0)?0:Bm;}else{if(Bg.mIsGraphMatrix){if(this.mIsPercent&&this.mMinTick===-1){Bn=this.IsVerticalAxis()?N.height/2-(Bl.y+Bl.height-Bj):N.width/2-(Bj-Bl.x);Bn+=Bk.getPadding(BS.kLabelToChart);}else{Bn=0;}Bn=Math.max(Bn,0);}else{Bn=this.IsVerticalAxis()?N.height/2-(Bl.y+Bl.height-Bj):N.width/2-(Bj-Bl.x);Bn=(Bn<0)?0:Bn;}}N.Reset(0,0,0,0);Bo=this.mLabelList[this.mLabelList.length-1];Bo.GetBoundingRectEx(N);Bj=this.ValueToPosition(Bo.mNumber);if(!Bh.mAxisDrawInReverse){Bm=this.IsVerticalAxis()?N.height/2-(Bj-Bl.y):N.width/2-(Bl.x+Bl.width-Bj);if(Bg.mIsGraphMatrix){if(this.mIsPercent&&this.mMaxTick===1){Bm+=Bk.getPadding(BS.kLabelToChart);}else{Bm=0;}}Bm=(Bm<0)?0:Bm;}else{Bn=this.IsVerticalAxis()?N.height/2-(Bl.y+Bl.height-Bj):N.width/2-(Bj-Bl.x);Bn=(Bn<0)?0:Bn;}if(!this.mUseDepth){return{LowMargin:Bn,HighMargin:Bm};}var Bp=this.getDepthMargin(0,0);Bn=(Bn<Bp.lowMargin)?0:Bn-Bp.lowMargin;Bm=(Bm<Bp.highMargin)?0:Bm-Bp.highMargin;return{LowMargin:Bn,HighMargin:Bm};}function c(Bj){var Bi=this.mChartContextPtr;if(Bj.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Bj.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Bj.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<AG){var Bh=Bi.mIsGraphMatrix;if(this.mMinimum<-AG||this.mMinimum>AG){var Bg=Math.abs(this.mMinimum)*0.5;if(Bh===false){this.mMaximum=this.mMaximum+Bg;this.mMinimum=this.mMinimum-Bg;}else{if(this.mMaximum>0){this.mMinimum=0;}else{this.mMaximum=0;}}}else{if(Bh===false||Bh&&this.mMinimum!==this.mMaximum){this.mMinimum=-6;this.mMaximum=6;}}}}mstrmojo.chart.ValueAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.ValueAxis",mLargerGridInterval:false,mIsPercent:false,mMinimum:-1,mMaximum:-1,mMaxTick:-1,mMinTick:-1,mStep:-1,mLabelStartIndex:0,mTicks:null,mLabelSpan:0,mIsStagger:false,mNumberFormat:null,mLabelArea:null,mGraphMajorType:a.GMT_CATEGORY,mLabelObjectId:null,mIsMaxZoom:false,mPrimaryMetrics:-1,mHighTicksToLabel:null,mLowTicksToLabel:null,mIsTrimmedWithPadding:false,mCondenseLabels:null,init:function BZ(Bl){Bl.AxisLabelsLocation=T.ALL_LEFT;this._super(Bl);this.mOptions={mUseLogarithmicScale:false,mAlwaysIncludeZero:true,mDrawFromZero:true,mUseMinValue:false,mUseMaxValue:false,mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mDrawSecondCustomLine:false,mUseSmartScaleBreak:false,mOffScaleType:Ao.DssGraphOffScaleHide,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mAxisSecondCustomValue:0,mUseCustomMinMax:false};var Bh=this.mChartContextPtr,Bn=this.mTripleId.mObjectId;this.mTicks=[];this.mHighTicksToLabel={};this.mLowTicksToLabel={};this.mLargerGridInterval=Bl.LargerGridInterval;this.mIsPercent=Bl.IsPercent;this.mMinimum=Math.min(Bl.Max,Bl.Min);this.mMaximum=Math.max(Bl.Max,Bl.Min);this.mLabelStartIndex=0;this.mIsStagger=false;this.mLabelObjectId=null;this.mIsMaxZoom=false;if(Bl.IsShown!==null){this.mIsShown=Bl.IsShown;}if(Bh.mIsTimeSeriesChart){this.mIsShown=true;}if(Bh.mIsUniformAxisMode){this.mIsShown=!Bh.isUADataAreaOutput();}if(this.mIsUniformAxis||Bh.mIsGraphMatrix===false){this.mNumberFormat=new BW.ChartAdvFormat({});}else{this.mNumberFormat=BW.dNF;}if(Bl.PrimaryMetricIndex!==null){this.mPrimaryMetrics=Bl.PrimaryMetricIndex;}else{this.mPrimaryMetrics=[];}if(this.mDeviceDataArea===null){this.mDeviceDataArea=new BW.Rect2D();this.mDeviceDataArea.width=this.mDeviceDataArea.height=-1;}this.mGraphMajorType=Bh.GetGraphMajorType();if(this.mIsUniformAxis===false){if(this.mGraphMajorType===a.GMT_HISTOGRAM){this.mIsShown=this.mIsShown||(this.mTripleId.mObjectId===A3.DssGraphY1Body);if(this.mTripleId.mObjectId===A3.DssGraphX1Body){this.mMaximum+=(this.mMinimum===this.mMaximum)?10:(this.mMaximum-this.mMinimum)*0.01;}}}var Bi=this.mAxisInfo,Bj=this.mOptions,Bk=Bh.GetGraphMatrixContext(),Bo=Bk.AxisLayout;if(Bl.AxisDirection===g.AD_Y){if(Bn!==A3.DssGraphY1Body){Bi.mAxisLabelsLocation=T.ALL_RIGHT;}else{if(Bh.IsBubbleChart()||Bh.IsScatterChart()){var Bm=4;if(Bo&Bm){Bi.mAxisLabelsLocation=T.ALL_RIGHT;}}}}else{if(Bl.AxisDirection===g.AD_X){if(Bn===A3.DssGraphY1Body||Bn===A3.DssGraphX1Body){Bi.mAxisLabelsLocation=T.ALL_BOTTOM;if(Bh.IsBubbleChart()||Bh.IsScatterChart()){var Bg=8;if(Bo&Bg){Bi.mAxisLabelsLocation=T.ALL_TOP;}}}else{Bi.mAxisLabelsLocation=T.ALL_TOP;}}}this.hLoadProperties();c.call(this,Bj);AO.call(this);if(Bj.mUseLogarithmicScale&&Bh.IsStackedChart()){this.mMaximum=Bj.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bj.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bp=AC.computeTicksForLogScale(this);this.mMaxTick=Bp.mMaxTick;this.mMinTick=Bp.mMinTick;this.mTicks=Bp.mTicks;this.mStep=Bp.mStep;}Au.call(this);},IsBaseAtZero:function Bb(){var Bg=this.mOptions;return Bg.mDrawFromZero&&!Bg.mUseLogarithmicScale;},hLoadProperties:function A5(){var Bh=this.mChartContextPtr,Br=Bh.mIsGraphMatrix,Bn=Bh.GetGraphMatrixContext(),Bk=this.mOptions,Bp,Bs;AN.tripleId.reset(v,this.mTripleId.mObjectId);if(Br){var Bm=Bh.hasBarAreaInComb()||Bh.IsBarChart()||Bh.IsAreaChart()||Bh.IsPercentChart()||(Bh.IsStackedChart()&&this.mMaximum*this.mMinimum<0);Bk.mDrawFromZero=Bm;Bk.mAlwaysIncludeZero=Bm;if(Bn.isCombinationChart()){var Bo=Ad.call(this);Bk.mAlwaysIncludeZero=Bk.mAlwaysIncludeZero||Bo.Include;Bk.mDrawFromZero=Bk.mDrawFromZero||Bo.DrawFromZero;}if(this.mLabelSpan===0){this.mLabelSpan=Bn.getPadding(BS.kBetweenLabels);}var Bt=Bh.getUniformAxisInformation(this.mTripleId.mObjectId);if(Bt.CustomScale){Bk.mUseCustomMinMax=Bt.CustomScale;Bk.mUseMaxValue=!Bt.AutoMax;Bk.mUseMinValue=!Bt.AutoMin;Bk.mAxisMaxValue=Bt.Max;Bk.mAxisMinValue=Bt.Min;}var Bj=this.mDatasetPtr||Bh.mDataset,Bg=Bh.getAxisKeyFromObjectId(this.mTripleId.mObjectId);if(Bg==="Z"){return ;}var Bi=Bj.getAxisOriginFormat(Bg);Bk.mDrawCustomLine=Bi.show||false;Bk.mAxisCustomValue=Bi.number||0;Bk.mUseLogarithmicScale=Bj.isLogScaleAxis(Bg);if(Bk.mUseLogarithmicScale){Bk.mAlwaysIncludeZero=false;Bk.mDrawFromZero=false;}}else{Bp=Bh.GetProperty(A1.DssGraph2ExcludeZero,v);if(Bp){Bk.mAlwaysIncludeZero=Bp!==false;}if(Bh.mIsTimeSeriesChart){Bk.mShowMinLabel=false;}else{Bp=Bh.GetProperty(A1.DssGraph2ScaleEndMin,v);if(Bp){Bk.mShowMinLabel=Bp!==false;}}Bp=Bh.GetProperty(A1.DssGraph2ScaleEndMax,v);if(Bp){Bk.mShowMaxLabel=Bp!==false;}if(Bh.mImageUsage===0){Bp=Bh.GetProperty(A1.DssGraph2LogScale,v);if(!this.mIsPercent&&Bp){Bk.mUseLogarithmicScale=Bp!==false;}Bp=Bh.GetProperty(A1.DssGraph2ScaleUseMin,v);if(Bp){Bk.mUseMinValue=Bp!==false;}Bp=Bh.GetProperty(A1.DssGraph2ScaleUseMax,v);if(Bp){Bk.mUseMaxValue=Bp!==false;}Bp=Bh.GetProperty(A2.DssGraphOffScaleType,v);if(Bp){Bk.mOffScaleType=Bp;}Bp=Bh.GetProperty(A1.DssGraph2ScaleMin,v);if(Bk.mUseMinValue&&Bp){Bk.mAxisMinValue=Bp;}Bp=Bh.GetProperty(A1.DssGraph2ScaleMax,v);if(Bk.mUseMaxValue&&Bp){Bk.mAxisMaxValue=Bp;}if(Bk.mUseMinValue&&Bk.mUseMaxValue){if(Bk.mAxisMinValue>Bk.mAxisMaxValue){Bs=Bk.mAxisMinValue;Bk.mAxisMinValue=Bk.mAxisMaxValue;Bk.mAxisMaxValue=Bs;}else{if(Bk.mAxisMinValue===Bk.mAxisMaxValue){Bs=Bk.mAxisMinValue===0?10:Math.abs(Bk.mAxisMinValue);Bk.mAxisMaxValue=Bk.mAxisMaxValue+Bs*0.5;Bk.mAxisMinValue=Bk.mAxisMinValue-Bs*0.5;}}}}}var Bq=false;if(Br){Bq=u.call(this);}if(!Bq){Bp=Bh.GetProperty(A1.DssGraphAxisNumberFormat,v);if(Bp){Bh.ParseValueToFormat(Bp,this.mNumberFormat);}}if(this.mGraphMajorType===a.GMT_BUBBLE&&this.mTripleId.mObjectId===A3.DssGraphZBody){return ;}if(Bh.mIsGraphMatrix){var Bl=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=p.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){Bp=Bh.GetProperty(A1.DssGraphStyleMajor,Bl);if(this.mMajorGrid.mShowGridLines&&Bp){this.mMajorGrid.mGridStyle=Bp;}}return ;}if(Bh.mImageUsage===0&&!Bh.mIsGraphMatrix){Bp=Bh.GetProperty(A1.DssGraph2ScaleDirection,v);if(Bp){this.mAxisInfo.mAxisDrawInReverse=Bp!==false;}if(this.mGraphMajorType===a.GMT_GAUGE){return ;}Bp=Bh.GetProperty(A1.DssGraphAxisShowUserLine,v);if(Bp){Bk.mDrawCustomLine=Bp!==false;}Bp=Bh.GetProperty(A2.DssGraphAxisShowSecondUserLine,v);if(Bp){Bk.mDrawSecondCustomLine=Bp!==false;}Bp=Bh.GetProperty(A1.DssGraphManualMajor,v);if(Bp){this.mMajorGrid.mUseManualGrid=Bp!==false;}Bp=Bh.GetProperty(A1.DssGraphCountMajor,v);if(this.mMajorGrid.mUseManualGrid&&Bp){this.mMajorGrid.mGridInterval=Bp;}if(Av.call(this)){Bp=Bh.GetProperty(A1.DssGraphAxisStagger,v);if(Bp){this.mIsStagger=Bp!==false;}return ;}Bp=Bh.GetProperty(A1.DssGraphAxisUserLineValue,v);if(Bk.mDrawCustomLine&&Bp){Bk.mAxisCustomValue=Bp;}Bp=Bh.GetProperty(A2.DssGraphAxisSecondUserLineValue,v);if(Bk.mDrawSecondCustomLine&&Bp){Bk.mAxisSecondCustomValue=Bp;}}},GetStep:function Y(){return this.mStep;},IsLogarithmic:function AX(){return this.mOptions.mUseLogarithmicScale;},ReserveTitleAndLabels:function Ag(Bm,Bk,Bi){var Bg,Bl,Bh;if(!this.mIsShown||!this.mChartContextPtr.mIsValueAxisShown){return ;}if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(Bm);this.mLabelStartIndex=1;}else{this.mLabelStartIndex=0;}this.mDeviceDataArea.ResetRect(Bm);if(this.mAxisInfo.mShowAxisLabels){if(this.mLabelObjectId===null){this.mLabelObjectId=BW.gAxisObjects[this.getIndex()].mLabelId;}if(I.call(this)){this.fakeMaxLabelLength=this.maxLabelLength;this.maxLabelLength=-1;this.restoreLabels(true);AI.call(this);}else{this.restoreLabels(true);this.InitObjectSet(this.mLabelObjectId,AK.GOT_AXIS_LABEL);}if(d.call(this)===false){return ;}this.GenerateTickLabels();if(Bk<1000){if(this.mUseDepth&&this.mTripleId.mObjectId===A3.DssGraphX1Body){var Bj=this.TrimMarginsForDepthAxis(Bk,Bi);Bk=Bj.LowMargin;Bi=Bj.HighMargin;}Bh=Aw.call(this);Bg=Bh.LowMargin;Bl=Bh.HighMargin;Bg=Bg>Bk+this.mLowTrim?Bg-Bk-this.mLowTrim:0;Bl=Bl>Bi+this.mHighTrim?Bl-Bi-this.mHighTrim:0;if(this.IsVerticalAxis()){Bm.y+=Bl;Bm.height-=Bl+Bg;}else{Bm.x+=Bg;Bm.width-=Bg+Bl;}if(this.mIsUniformAxis){if(Bg>0){this.mLowTrim+=Bg;}if(Bl>0){this.mHighTrim+=Bl;}}}this.hReserveLabelOrTickArea(Bm,true,false);}},CreateAxisLine:function BL(){if(!this.mChartContextPtr.mIsValueAxisShown){return ;}if(!this.mIsShown&&!this.mUseDepth){return ;}if(f.call(this)){this._super();}},GenerateTickLabels:function Ai(){if(this.hasLabelCreated){return ;}this.mLabelList.splice(0,this.mLabelList.length);var Bi=this.mChartContextPtr.mIsGraphMatrix;Be.call(this);if(Bi){BX.call(this,true,0);}var Bh,Bg=this.mpAxisLabelSet.GetCollectionSize();if(this.mAxisInfo.mAxisLabelsLocation===T.ALL_LEFT_RIGHT||this.mAxisInfo.mAxisLabelsLocation===T.ALL_BOTTOM_TOP){Be.call(this);if(Bi){BX.call(this,false,Bg);}}Bg=this.mpAxisLabelSet.GetCollectionSize();for(Bh=0;Bh<Bg;Bh++){this.mLabelList.push(this.mpAxisLabelSet.GetObjectByIndex(Bh));}this.hasLabelCreated=true;},GetTicks:function A0(Bh){if(this.mOptions.mShowMinLabel){Bh.push(this.mMinTick);}var Bg;for(Bg=0;Bg<this.mTicks.length;++Bg){Bh.push(this.mTicks[Bg]);}if(this.mOptions.mShowMaxLabel){Bh.push(this.mMaxTick);}},hReserveLabelOrTickArea:function AY(Bl,Bm,Bh,Bn){var Bg=this.mAxisInfo.mAxisLabelsLocation,Bj,Bi;if(Bm){Bi=Bn!==undefined?Bn:BO.call(this,this.IsVerticalAxis());var Bk=this.mChartContextPtr.mpGraphMatrixContext.getPadding(BS.kLabelToChart);Bj=(Bi*(this.mIsStagger?2:1)+BW.Axis.gLabelMargin)+Bk;}else{Bj=this.GetOuterTickLength();}if(Bh){Bj=-Bj;}if(this.IsVerticalAxis()){if(Bg===T.ALL_LEFT||Bg===T.ALL_LEFT_RIGHT){Bl.x+=Bj;Bl.width-=Bj;}if(Bg===T.ALL_RIGHT||Bg===T.ALL_LEFT_RIGHT){Bl.width-=Bj;}}else{if(Bg===T.ALL_BOTTOM||Bg===T.ALL_BOTTOM_TOP){Bl.height-=Bj;}if(Bg===T.ALL_TOP||Bg===T.ALL_BOTTOM_TOP){Bl.y+=Bj;Bl.height-=Bj;}}},ValueToPosition:function k(Bh,Bg){if(Bg===undefined){if(this.mOptions.mOffScaleType!==Ao.DssGraphOffScaleHide){Bg=false;}else{Bg=true;}}if(Bg){Bh=(Bh>this.mMaxTick)?this.mMaxTick:Bh;Bh=(Bh<this.mMinTick)?this.mMinTick:Bh;}return Math.floor(this.ValueToFloatPosition(Bh)+0.5);},ValueToPosition2:function AQ(Bl,Bi,Bk){var Bh=this.mMinTick;var Bg=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bl=Bl<=0?-1:J.call(this,Bl);Bh=J.call(this,Bh);Bg=J.call(this,Bg);}var Bj=this.mAxisInfo.mAxisDrawInReverse?(Bg-Bl):(Bl-Bh);return Bi+((Bk-Bi)*Bj/(Bg-Bh));},ValueToFloatPosition:function As(Bo){var Bp=0,Bl=this.mMinTick,Bi=this.mMaxTick,Bk=this.mOptions,Bn=this.mDeviceDataArea,Bj=this.mAxisInfo,Bm;if(Bk.mUseLogarithmicScale){Bo=Bo<=0?-1:J.call(this,Bo);Bl=J.call(this,Bl);Bi=J.call(this,Bi);}Bm=Bj.mAxisDrawInReverse?(Bo-Bl):(Bi-Bo);if(Bi===Bl){return Bp;}if(Bj.mAxisDirection===g.AD_Y){Bp=Bn.y+Bm/(Bi-Bl)*Bn.height;}else{Bp=Bn.x+Bn.width-Bm/(Bi-Bl)*Bn.width;}var Bg=l.call(this),Bh=-Bg;if(Bp>Bg){Bp=Bg;this.mIsMaxZoom=true;}else{if(Bp<Bh){Bp=Bh;this.mIsMaxZoom=true;}}return Bp;},ValueToPositionCheckLogScale:function o(Bl,Bi,Bk){var Bj,Bh,Bg;Bj=this.mMinTick;Bh=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bl=Bl<=0?-1:J.call(this,Bl);Bj=J.call(this,Bj);Bh=J.call(this,Bh);}Bg=this.mAxisInfo.mAxisDrawInReverse?(Bh-Bl):(Bl-Bj);return Bi+((Bk-Bi)*Bg/(Bh-Bj));},ValueToPositionCheckValue:function BQ(Bn,Bk,Bm){var Bl,Bh,Bj,Bg,Bi;Bl=0;Bh=0;Bj=AB.call(this,Bn,Bl,Bh);Bn=Bj.Value;Bl=Bj.Min;Bh=Bj.Max;if(!Bj.Flag){return{Flag:false};}Bg=this.mAxisInfo.mAxisDrawInReverse?(Bh-Bn):(Bn-Bl);Bi=Bk+Math.floor((Bm-Bk)*Bg/(Bh-Bl));return{Flag:true,Position:Bi};},GetValueForUnit:function Ba(){var Bj=this.mAxisInfo,Bh,Bm=this.mDeviceDataArea,Bl=(this.mMinTick+this.mMaxTick)/2,Bk=0,Bg=0,Bi=AB.call(this,Bl,Bk,Bg);Bk=Bi.Min;Bg=Bi.Max;if(!this.mOptions.mUseLogarithmicScale&&Bi.Flag){if(Bj.mAxisDirection===g.AD_Y){Bh=(Bg-Bk)/Bm.height;}else{Bh=(Bg-Bk)/Bm.width;}}return Bh;},GetOuterTickLength:function A9(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength/2;}return 0;},AdjustDeviceDataArea:function Ab(Bh,Bg){if(this.mIsShown&&this.mAxisInfo.mShowAxisLabels){this.hReserveLabelOrTickArea(Bh,false,Bg);}if(this.mIsShown||this.mUseDepth){this.ReserveDepthAxisLine(Bh,Bg);}},UpdateTitleAndLabelArea:function AP(Bh){var Bi=this.mChartContextPtr,Bg=this.mAxisInfo;if(!this.mIsShown||!Bi.mIsValueAxisShown){return ;}if(this.mLabelArea===null||this.mLabelArea===undefined){this.mLabelArea=new BW.Rect2D({Rect2D:Bh});}else{this.mLabelArea.ResetRect(Bh);}if(Bg.mShowAxisLabels&&W.call(this)){BY.call(this);this.hReserveLabelOrTickArea(Bh,true,true);}if(Bg.mShowAxisTitle){this.UpdateTitleLocation(Bh);this.ReserveTitle(Bh,true);}},HideCustomPercentOverlappedLabels:function BN(){BP.visPrint("To be impl with percetn in custom scale");},HideOverlappedLabels:function Al(Bn,Bi){var Br,Bo,Bj,B1,Bk=this.mChartContextPtr,Bz=Bk.mIsGraphMatrix,Bh=this.IsVerticalAxis()?q.REC_EXP_VERTICAL:q.REC_EXP_HORIZONTAL;if(Bi-Bn<2){return ;}var B2=this.mIsPercent&&Bz,B3=BJ.call(this,Bn,Bi),Bm=B3.Start,Bv=this.mLabelList,Bl=this.mGraphObjectList,Bx=B3.PaddingPossible;Br=Bl[Bm];Bo=Br;if(Bx===false){var By,B0=Bv.length;for(By=0;By<B0;By++){if(Bv[By]){Bv[By].mIsShown=false;}}return ;}if(R.call(this)||(!this.mIsPercent&&Bz)){Bo=Bl[Bn];var Bt=Bz?Bo:Br;if(Bo.HasOverlapForSameRotation(Br,this.mLabelSpan,Bh)){Bt.mIsShown=false;}}var Bp,Bq=this.mOptions,Bu=this.mGraphMajorType,Bw=this.mTripleId.mObjectId,Bg=Bi;if(Bg-Bn>2&&!B2){if(Bq.mUseMaxValue&&Bq.mShowMaxLabel){Bg--;}}Bp=A7.call(this,B2,Bn,Bg,Bm,Bh);Bp=w.call(this,B2,Bn,Bg,Bm,Bp);B.call(this,Bn,Bi,Bm,Bp,Bh);AF.call(this,Bn);if(Br.mIsShown){var Bs=Bk.GetGraphMatrixContext().getPadding(BS.kEndLabelToChart);Br.mIsShown=Ah.call(this,Br,Bs);}if((Bu===a.GMT_POLAR&&Bw===A3.DssGraphX1Body)||(Bu===a.GMT_RADAR&&Bw===A3.DssGraphO1Body)){Bj=((Bi-1-Bm)%Bp);B1=Bl[Bi-1-Bj];if(B1.HasOverlapForSameRotation(Bo)){B1.mIsShown=false;}}if(Bx){AS.call(this,Bi,true);AS.call(this,Bi,false);}this.mLabelInterval=Bp;},ValueToBubbleSize:function D(Bg,Bm){var Bk,Bo,Bj,Bl,Bn,Bi,Bh=this.mChartContextPtr;Bm=(Bm>this.mMaxTick)?this.mMaxTick:Bm;Bm=(Bm<this.mMinTick)?this.mMinTick:Bm;Bk=this.mMinTick;Bo=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bm=Bm<=0?-1:(J.call(this,Bm));Bk=J.call(this,Bk);Bo=J.call(this,Bo);}Bj=Math.min(Bh.mGraphHeight,Bh.mGraphWidth)*Bg;Bl=Bj/5000;Bn=Bj/1000;Bi=Bl+((Bm-Bk)*(Bn-Bl)/(Bo-Bk));return Math.ceil(Bi);},GetBottomPosition:function AT(Bg){if(this.mChartContextPtr.mIsGraphMatrix){Bg=Bg||false;if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(this.GetBaseValue(Bg),false);}}return this.ValueToPosition(this.mMinTick);},GetAxisOriginValue:function Aj(){var Bg=this.mOptions;if(Bg.mDrawCustomLine){return Bg.mAxisCustomValue;}return null;},GetBasePosition:function Aq(Bh,Bg){Bh=Bh||false;if(Bg===null||Bg===undefined){Bg=this.GetBaseValue(Bh);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(Bg,false);}}return this.ValueToPosition(Bg);},GetMinTick:function An(){return this.mMinTick;},GetMaxTick:function BA(){return this.mMaxTick;},GetBaseValue:function Ap(Bh){Bh=Bh||false;var Bi=this.mChartContextPtr,Bg=this.mOptions;if(Bi.mIsGraphMatrix){if(Bh&&Bg.mDrawCustomLine){if(AN.isValidNumber(Bg.mAxisCustomValue)){return Bg.mAxisCustomValue;}}if(Bg.mUseCustomMinMax&&Bg.mDrawFromZero){return 0;}}if(this.mMaxTick<0){return this.mMaxTick;}if(!Bg.mDrawFromZero||this.mMinTick>0||this.mMaxTick<0){return this.mMinTick;}return 0;},GetPositionByValue:function Ak(Bh){var Bg=this.GetFloatPositionByValue(Bh);if(Bg===null){return Bg;}Bg=Math.floor(Bg+0.5);return Bg;},GetFloatPositionByValue:function BI(Bn){var Bh=0,Bm=0,Bj,Bo,Bl;Bl=AB.call(this,Bn,Bh,Bm);Bn=Bl.Value;Bh=Bl.Min;Bm=Bl.Max;if(!Bl.Flag){return null;}var Bi=this.mAxisInfo,Bk=this.mDeviceDataArea;Bj=Bi.mAxisDrawInReverse?(Bn-Bh):(Bm-Bn);Bo=0;if(Bm===Bh){return Bo;}if(Bi.mAxisDirection===g.AD_Y){Bo=Bk.y+Bj*Bk.height/(Bm-Bh);}else{Bo=Bk.x+Bk.width-Bj*Bk.width/(Bm-Bh);}var Bg=l.call(this);if(Bo>Bg){Bo=Bg;this.mIsMaxZoom=true;}if(Bo<-Bg){Bo=-Bg;this.mIsMaxZoom=true;}return Bo;},GenerateCustomLine:function b(Bg,Bj){var Bl=this.mOptions,Bi=this.mDeviceDataArea;if(this.mChartContextPtr.mIsGraphMatrix){if(this.mPrimaryMetrics.length===0){return ;}}if(!Bl.mDrawCustomLine&&!Bl.mDrawSecondCustomLine){return ;}var Bh,Bk;if(this.mChartContextPtr.mIsGraphMatrix){Bk=BW.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bh=Bi;}else{Bk=BW.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bh=new BW.Rect2D({Rect2D:this.mDeviceDataArea});Bi.ResetRect(Bg);}if(Bl.mDrawCustomLine){j.call(this,Bj,Bl.mAxisCustomValue,Bk);}if(this.mTripleId.mObjectId===A3.DssGraphY1Body&&Bl.mDrawSecondCustomLine){j.call(this,Bj,Bl.mAxisSecondCustomValue,A3.DssGraphY1SecondUserLine);}Bi.ResetRect(Bh);},GenerateMapAndList:function Az(){},generateGridsByArea:function AM(Bi){if(!this.mIsShown){return ;}var Bh=this.mMajorGrid,Bg=this.mMinorGrid;if(Bi){if(Bh.mShowGridLines&&Bh.mGridStyle!==p.DssGraphGridNone){BE.call(this);}if(Bg.mShowGridLines&&Bg.mGridStyle!==p.DssGraphGridNone){O.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){C.call(this);}}},GetNumberFormat:function A(){return this.mNumberFormat;},GetTrimWithPadding:function Am(){return this.mIsTrimmedWithPadding;},GetPositionAtTick:function BU(Bg){var Bh=this.GetFloatPositionByValue(Bg);if(Bh!==null){return Bh;}return 0;},GetMaxMinDataInput:function BH(){return{Max:this.mMaximum,Min:this.mMinimum};},GetMaxMinDataInputPosition:function L(){var Bg=this.GetPositionByValue(this.mMinimum),Bh=this.GetPositionByValue(this.mMaximum);return{LowBoundary:Bg,HighBoundary:Bh};},postProcessStep:function r(Bg,Bi){var Bh=Bg,Bm=this.mChartContextPtr;switch(this.mGraphMajorType){case a.GMT_HISTOGRAM:case a.GMT_POLAR:case a.GMT_SCATTER:case a.GMT_BUBBLE:case a.GMT_3D_SCATTER:case a.GMT_GANTT:break;case a.GMT_GAUGE:break;case a.GMT_CATEGORY:if(!this.IsVerticalAxis()&&!Bm.mIsGraphMatrix){this.mLargerGridInterval=true;}break;default:if(!this.IsVerticalAxis()&&!Bm.mIsGraphMatrix){this.mLargerGridInterval=true;}break;}if(this.mLargerGridInterval){if(Bi<Bh*7){Bh*=2;}else{Bh*=4;}}if(Bm.mIsGraphMatrix){var Bk=this.mChartContextPtr.GetGraphMatrixContext().GetValueAxisZoomScale(this.mTripleId.mObjectId);if(Bk>1){Bh/=Bk;}if(Math.abs(this.mMaximum)<0.3&&Math.abs(this.mMinimum)<0.3){var Bl=Math.ceil(this.mMaximum/Bh)*Bh,Bj=Math.floor(this.mMinimum/Bh)*Bh;if(Bl<Bj+Bh){Bh/=2;}}}return Bh;},GetLogicalCoord:function y(Bj){var Bh=0,Bl=this.mDeviceDataArea,Bi=this.mMinTick,Bg=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bi=J.call(this,Bi);Bg=J.call(this,Bg);}var Bk=this.IsVerticalAxis()?(Bg-Bi)*(Bj-Bl.y)/Bl.height:(Bg-Bi)*(Bl.x+Bl.width-Bj)/Bl.width;Bh=this.mAxisInfo.mAxisDrawInReverse?Bi+Bk:Bg-Bk;if(this.mOptions.mUseLogarithmicScale){Bh=Math.pow(10,Bh);}return Bh;},GetSlopeFactor:function BK(Bh){var Bg=this.IsVerticalAxis()?-this.mDeviceDataArea.height:this.mDeviceDataArea.width;if(this.mOptions.mUseLogarithmicScale){Bg/=((Math.log(this.mMaxTick)-Math.log(this.mMinTick))*Bh);}else{Bg/=(this.mMaxTick-this.mMinTick);}return this.mAxisInfo.mAxisDrawInReverse?-Bg:Bg;},GetMinMaxLogicalCoord:function A4(){return{Min:this.mMinTick,Max:this.mMaxTick};},GenerateLabelsFor3D:function BB(){},GetGridLinePositionsFor3D:function G(){},OnZooming:function M(){},getStatus:function X(){var Bi=0,Bj=2,Bh=this.getLabelRotation(),Bg=this.mLabelInterval;if(Bh===BG.Rotate90){return Bj;}if(Bg===1){return Bi;}return Bj;},getCondenseStatus:function h(){return this.mCondenseLabels;},checkCondense:function H(Bg){this.mCondenseLabels=Bg;return this.mCondenseLabels;},isBaseLineQualified:function AL(Bg){Bg=Bg||0;return this.mMaxTick>Bg&&this.mMinTick<Bg;},liftedFromZero:function AD(){return this.mMinTick===0&&this.mLowTrim>0;},getBandings:function Ar(){var Bi=0,Bg,Bh=this.mChartContextPtr;if(this.IsVerticalAxis()){Bg=Bh.mGraphHeight;}else{Bg=Bh.mGraphWidth;}return[{Start:Bi,Size:Bg}];},formatAsLabel:function Ae(Bh){var Bi=BW.gAxisObjects[this.getIndex()].mLabelId,Bg=new BW.NumberObject({TripleId:Bi,GraphObjectManager:this,Number:Bh,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});return Bg.mText;},getGridLinePosition:function A8(Bo){if(!(this.mIntegrity&4)){return[];}if(Bo===undefined){Bo=true;}var Bh,Bl,Br=[];var Bv=this.mLabelList,Bp=Bv.length;var Bk=10,Bi=this.mChartContextPtr,Bm=Bi.mGraphWidth,Bj=Bi.mGraphHeight,Bu=this.IsVerticalAxis();for(Bl=0;Bl<Bp;Bl++){if(Bv[Bl].mIsShown){Bh=this.ValueToPosition(Bv[Bl].mNumber);if(Bh<Bk||Bh+Bk>(Bu?Bj:Bm)){continue;}Br.push(Bh);}}if(Bo){return Br;}var Bs,Bt,Bg=[];Bp=Br.length;if(Bp===0){return Bg;}else{var Bq,Bn;for(Bl=1;Bl<Bp;Bl++){Bh=0.5*(Br[Bl-1]+Br[Bl]);if(Bl===1){Bq=Math.abs(Bh-Br[Bl-1]);}else{if(Bl===Bp-1){Bn=Math.abs(Bh-Br[Bl-1]);}}Bg.push(Bh);}Bt=!Bu?Bp-1:0;Bs=Br[Bt];Bh=BM.call(this,Bs,false,Bq);if(Bh!==null){Bg.push(Bh);}Bt=Bu?Bp-1:0;Bs=Br[Bt];Bh=BM.call(this,Bs,true,Bn);if(Bh!==null){Bg.push(Bh);}}return Bg;},TrimDeviceDataArea:function BF(Bh){var Bi=this.mChartContextPtr,Bg;Bg=Bi.getUniformAxisInformation(this.mTripleId.mObjectId);if(Bg.PerCell){return this.TrimAxisPadding(Bh,false);}this.mLowTrim=Bg.Trims[0];this.mHighTrim=Bg.Trims[1];F.call(this,false,this.mHighTrim,this.mLowTrim,Bh);},refresh:function AH(Bh,Bj){if(Bh==="clipping"){var Bl=this.mChartContextPtr,Bk=this.mOptions;if(this.mMaximum!==Bj.max||this.mMinimum!==Bj.min){this.mMaximum=Bj.max;this.mMinimum=Bj.min;Bk.mAxisMaxValue=Bj.max;Bk.mAxisMinValue=Bj.min;c.call(this,this.mOptions);this.mTicks=[];this.mMaxTick=this.mMinTick=-1;this.mStep=-1;AO.call(this);if(Bk.mUseLogarithmicScale&&Bl.IsStackedChart()){this.mMaximum=Bk.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bk.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bg=AC.computeTicksForLogScale(this);this.mMaxTick=Bg.mMaxTick;this.mMinTick=Bg.mMinTick;this.mTicks=Bg.mTicks;this.mStep=Bg.mStep;}Au.call(this);}var Bi={x:0,y:0,width:Bl.mGraphWidth,height:Bl.mGraphHeight};this.TrimAxisPadding(Bi,false);}},TrimAxisPadding:function n(Bk,Bj){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bi,Bg,Bh,Bl,Bm=this.mOptions.mUseCustomMinMax;this.mLowTrim=this.mHighTrim=0;Bi=K.call(this,Bm);Bg=Bi.LowPadding;Bh=Bi.HighPadding;Bl=this.mAxisInfo.mAxisDirection===g.AD_X?Bk.width:Bk.height;Bl-=(Bh+Bg);Bi=V.call(this,Bj,Bl,Bh,Bg);Bg=Bi.LowPadding;Bh=Bi.HighPadding;F.call(this,Bj,Bh,Bg,Bk);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphRegressionType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumDSSGraphOffScaleType","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphTrendLineOptions","GraphObject","Axis","FormatLine","Point2D","BezierCurve","CurveLineObject");mstrmojo.requiresCls("mstrmojo.VisUtility");var f=mstrmojo.chart,g=f.model.enums,d=mstrmojo.VisUtility,Y=f.enums,N=Y.EnumDSSGraphOffScaleType,U=g.EnumDSSGraphType,E=g.EnumShapeType,c=Y.EnumLineJoinType,C=Y.EnumLineStyle,D=g.EnumDSSGraphRegressionType,F=1e-10,K=100,I=0.25,J=0.01,h=0.15,O=0.3,a=1,P=1.001,B=0,R=1;function Q(j){var k=j.x;j.x=j.y;j.y=k;}function H(o){var k,j,n,l,q=this.mCoefficients,p=this.mTrendLineOptions.mRegressionType;j=o.length;for(k=0;k<j;++k){n=o[k];if(typeof (n)==="number"){q.push(n);}else{if(typeof (n)==="string"&&p===D.DssGraphRegressionExp){if(n.indexOf("Ln")===0){l=n.substr(2);n=parseFloat(l);if(isNaN(n)){return false;}this.subType=R;q.push(n);}}else{return false;}}}if((j===1)&&(p===D.DssGraphRegressionExp||p===D.DssGraphRegressionLog||p===D.DssGraphRegressionPow)){this.deformed=true;}return true;}function X(n,l){var j=n.mOptions.mOffScaleType,k;n.mOptions.mOffScaleType=N.DssGraphOffScaleShow;k=n.GetPositionByValue(l);n.mOptions.mOffScaleType=j;return k;}function b(AD){var p=this.mChartContextPtr,z=this.mFormatLinePtr.mLineStyle,u,s,AE;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||p.mUseAnimation){return ;}p.NewPath();var q=AD.length;if(q<2){return ;}var k=f.FormatLine.getLinePattern(z),r=k.length,w=0,o=0,l=[],v=[];for(u=0;u<q;++u){v.push(0);l.push(0);}var AC=AD[0].x;var AB=AD[0].y;var AA=0.05;if(z===C.LS_DOT_DOT_DOT){AA=0.03;k[r-1]*=3;}else{if(z===C.LS_DOT){AA=0.005;}}for(AE=0;AE<=1;AE+=AA/q){for(u=1;u<q;++u){for(s=0;s<q-u;++s){if(u===1){l[s]=AD[s].x*(1-AE)+AD[s+1].x*AE;v[s]=AD[s].y*(1-AE)+AD[s+1].y*AE;continue;}l[s]=l[s]*(1-AE)+l[s+1]*AE;v[s]=v[s]*(1-AE)+v[s+1]*AE;}}o+=Math.sqrt((AC-l[0])*(AC-l[0])+(AB-v[0])*(AB-v[0]));if(o>=k[w]){if(w%2===0){if(this.mIsVertical){p.MoveTo(AC,AB);p.LineTo(l[0],v[0]);}else{p.MoveTo(AB,AC);p.LineTo(v[0],l[0]);}}w=(w+1)%r;o=0;AC=l[0];AB=v[0];}}}function A(o,k,l,q,n){var p,j={};j.usedDefaultValueX=false;switch(o){case D.DssGraphRegressionLog:p=k;k*=l;if(k-p>n){k=p+n;j.usedDefaultValueX=true;}j.startX=k;break;case D.DssGraphRegressionExp:k+=l/Math.pow(q,k*0.25);j.startX=k;break;case D.DssGraphRegressionPoly:k+=l;j.startX=k;break;}return j;}function e(j,z,w,r,y,v,p,l){var AB=0,o,n=0,u,s,k,t,x,q,AA;for(x=z;x<w;){l.push(x);l.push(G.call(this,x));q=x;AA=A.call(this,j,x,r,p,y);x=AA.startX;t=AA.usedDefaultValueX;if(!t){AB=L.call(this,q);n=L.call(this,x);}o=Math.abs(AB);u=Math.abs(n-AB);if(v===0){s=this.mpXAxis.GetPositionByValue(q);k=this.mpXAxis.GetPositionByValue(x);}while(!t&&(x<w)&&((v===0&&Math.abs(k-s)<5)||(v!==0&&Math.abs(x-q)<v)||(o<=K&&o>I&&u<h*o)||(o<=I&&o>J&&u<O*o)||(o<=J&&u<a*o))){AA=A.call(this,j,x,r,p,y);x=AA.startX;t=AA.usedDefaultValueX;if(!t){n=L.call(this,x);u=Math.abs(n-AB);}if(v===0){k=this.mpXAxis.GetPositionByValue(x);}}if(x>=w){l.push(w);l.push(G.call(this,w));return ;}}}function W(){var n=this.mTrendLineOptions.mRegressionType,x,j=this.mTrendLineDataValues,r=this.mCoefficients,w=r.length-1,k=j.length,AE=[],l,AB,v,AA,t,AF,AD,o,q,z,AC=16,y,p;o=[];for(x=0;2*x<k-k%2;++x){if(j[2*x]!==null&&j[2*x+1]!==null){AE.push(j[2*x]);AE.push(j[2*x+1]);}}l=AE.length;if(l<2){this.isValid=false;return ;}AB=AE[0];v=AE[l-l%2-2];y=(v-AB)/AC;AA=G.call(this,AB);t=G.call(this,v);AF=this.mpXAxis.GetPositionByValue(AB);AD=this.mpYAxis.GetPositionByValue(AA);this.startPoint={x:AF,y:AD};AF=this.mpXAxis.GetPositionByValue(v);AD=this.mpYAxis.GetPositionByValue(t);this.endPoint={x:AF,y:AD};if(y<F){this.deformed=true;}if(this.deformed){o.push(AE[0]);o.push(AE[1]);o.push(AE[l-l%2-2]);o.push(AE[l-l%2-1]);}else{var u=this.mpXAxis.GetValueForUnit(),s;if(u!==undefined&&u!==null){s=5*u;}else{s=0;}switch(n){case D.DssGraphRegressionNone:break;case D.DssGraphRegressionLinear:o=AE;break;case D.DssGraphRegressionLog:if(r[1]!==0){q=1+Math.SQRT2/Math.pow(Math.abs(r[1]),0.25);}q=Math.max(q,P);e.call(this,n,AB,v,q,y,s,0,o);break;case D.DssGraphRegressionExp:if(this.subType===R){p=Math.pow(Math.E,r[1]);}else{p=r[1];}if((r[0]!==0)&&(p!==0)){q=Math.pow(24/Math.abs(r[0]),0.25)/Math.abs(Math.log(p));q=Math.min(q,y);q=Math.max(q,s);e.call(this,n,AB,v,q,y,s,p,o);break;}else{for(z=AB;z<v;){o.push(z);o.push(G.call(this,z));z+=y;if(z>=v){o.push(v);o.push(G.call(this,v));break;}}}break;case D.DssGraphRegressionPow:for(z=AB;z<v;){o.push(z);o.push(G.call(this,z));z+=y;if(z>=v){o.push(v);o.push(G.call(this,v));break;}}break;case D.DssGraphRegressionPoly:q=1;if(w>1){q=1/Math.pow(Math.abs(r[w]),1/w);}else{q=y;}q=Math.min(y,q);q=Math.max(q,s);e.call(this,n,AB,v,q,y,s,0,o);break;default:break;}}this.mCalcValues=o;}function G(n){var l=this.mTrendLineOptions.mRegressionType,p,o=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:p=null;break;case D.DssGraphRegressionLinear:p=null;break;case D.DssGraphRegressionLog:p=o[0]+o[1]*Math.log(n);break;case D.DssGraphRegressionExp:switch(this.subType){case B:p=o[0]*Math.pow(o[1],n);break;case R:p=o[0]*Math.pow(Math.E,o[1]*n);break;}break;case D.DssGraphRegressionPow:p=o[0]*Math.pow(n,o[1]);break;case D.DssGraphRegressionPoly:j=o.length-1;p=o[0];for(k=1;k<=j;++k){p+=o[k]*Math.pow(n,k);}break;default:p=null;break;}return p;}function L(n){var l=this.mTrendLineOptions.mRegressionType,p,o=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:p=null;break;case D.DssGraphRegressionLinear:p=null;break;case D.DssGraphRegressionLog:p=o[1]/n;break;case D.DssGraphRegressionExp:switch(this.subType){case B:p=o[0]*Math.log(o[1])*Math.pow(o[1],n);break;case R:p=o[0]*o[1]*Math.pow(Math.E,o[1]*n);}break;case D.DssGraphRegressionPow:p=o[0]*o[1]*Math.pow(n,o[1]-1);break;case D.DssGraphRegressionPoly:j=o.length-1;p=0;for(k=1;k<=j;++k){p+=o[k]*k*Math.pow(n,k-1);}break;default:p=null;break;}return p;}function T(r,o,q,p,k){var j,n=q,l=p;if(r){if(n>k){if(l>o&&l<k){n=(o+2*l)/3;}else{n=(o+2*k)/3;}}if(l<o||l<n){l=(n+k)/2;}}else{if(n<k){if(l<o&&l>k){n=(o+2*l)/3;}else{n=(o+2*k)/3;}}if(l>o||l>n){l=(n+k)/2;}}j={control1:n,control2:l};return j;}function S(r,l,o,n,k){var j,p=this.mCoefficients,q;if(r===D.DssGraphRegressionPow){if((p[1]<0&&p[0]>0)||(p[1]>0&&p[0]<0)){j=T(false,l,o,n,k);}else{if((p[1]>0&&p[0]>0)||(p[1]<0&&p[0]<0)){j=T(true,l,o,n,k);}}}else{if(r===D.DssGraphRegressionLog){if(p[1]>0){j=T(true,l,o,n,k);}else{if(p[1]<0){j=T(false,l,o,n,k);}}}else{if(r===D.DssGraphRegressionExp){if(this.subType===R){q=Math.pow(Math.E,p[1]);}else{q=p[1];}if((q<1&&p[0]>0)||(q>1&&p[0]<0)){j=T(false,l,o,n,k);}else{if((q>1&&p[0]>0)||(q<1&&p[0]<0)){j=T(true,l,o,n,k);}}}}}if(j===undefined||j===null){j={control1:o,control2:n};}return j;}mstrmojo.chart.TrendLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.TrendLineObject",mpXAxis:null,mpYAxis:null,mTrendLineOptions:null,mDataArea:null,mDepthOffset:null,mIsVertical:false,mTextPtr:null,mRealObjectId:U.DssGraphTypeReserved,mCurveLinePtr:null,mMinXLogical:0,mMaxXLogical:0,mMinYLogical:0,mMaxYLogical:0,mTrendLineType:0,mCoefficients:[],mTrendLineDataValues:[],mCalcValues:[],mBezierCurves:[],identity:null,isValid:null,subType:B,deformed:false,startPoint:{},midPoint:{},endPoint:{},init:function Z(k){var j=0,l;this._super(k);this.deformed=false;this.mCoefficients=[];this.mTrendLineDataValues=[];if(k){if(k.RealObjectId){this.mRealObjectId=k.RealObjectId;}if(k.XAxis){this.mpXAxis=k.XAxis;}if(k.YAxis){this.mpYAxis=k.YAxis;}if(k.TrendLineOptions){this.mTrendLineOptions=k.TrendLineOptions;}this.mDataArea=k.DataArea||new f.Rect2D();this.mDepthOffset=k.DepthOffset||new f.Point2D();this.mIsVertical=k.IsVertical||false;if(k.Coefficients){this.isValid=H.call(this,k.Coefficients);}else{this.isValid=false;}if(k.TrendLineValues){this.mTrendLineDataValues=k.TrendLineValues;}if(k.Identity){this.identity=k.Identity;}}this.startPoint={};this.midPoint={};this.endPoint={};this.mCalcValues=[];W.call(this);this.mBezierCurves=[];if(!this.mIsVertical){j=this.mDepthOffset.x;this.mDepthOffset.x=this.mDepthOffset.y;this.mDepthOffset.y=j;}if(this.mpXAxis){l=this.mpXAxis.GetMinMaxLogicalCoord();this.mMinXLogical=l.Min;this.mMaxXLogical=l.Max;}if(this.mpYAxis){l=this.mpYAxis.GetMinMaxLogicalCoord();this.mMinYLogical=l.Min;this.mMaxYLogical=l.Max;}},Draw:function V(){var j=this.mChartContextPtr,o=this.mBezierCurves,l=j.GetLineJoin(),n,u,r=[];if(!this.isValid){return ;}j.SetLineJoin(c.LJT_ROUND);this.SetLineWidth();u=o.length;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){j.NewPath();o[0].MoveToStart(j);for(n=0;n<u;++n){o[n].CurveToEnd(j);}}else{for(n=0;n<u;++n){o[n].GetControlPoints(r);b.call(this,r);this.ApplyLineFormat();}}if(this.isClosePath){j.ClosePath();}if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){this.ApplyLineFormat();}j.SetLineJoin(l);for(n=0;n<u;++n){var k=o[n],t=new f.Point2D({Point2D:k.mP0}),s=new f.Point2D({Point2D:k.mP1}),q=new f.Point2D({Point2D:k.mP2}),p=new f.Point2D({Point2D:k.mP3});if(!this.mIsVertical){t.swap();s.swap();q.swap();p.swap();Q.call(this,this.startPoint);Q.call(this,this.midPoint);Q.call(this,this.endPoint);}r.push(t);r.push(s);r.push(q);r.push(p);}j.FinishDrawCurves(r,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},CreateTrendLine:function M(){var AR,AQ,n=this.mTrendLineOptions,AF=n.mRegressionType,z,y,k,AX,AM,AO=[],AP,AD=new f.Point2D(),u=new f.Point2D(),AH,AG,AL,AK,w,v,AT,AJ,AW,x,AU,AC,AB,t,s,o,l,AA,AS=this.mTrendLineDataValues,AE=AS.length,p,r,AN=this.mBezierCurves,AI=0,AV,q=null;if(!this.isValid){return q;}AE=AE-(AE%2);if(AF===D.DssGraphRegressionLinear){if(n.mSeasonal){for(AR=0;2*AR<AE;++AR){z=AS[2*AR];y=AS[2*AR+1];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AR)+" and "+(2*AR+1));d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+k+", y = "+AX);}}}if(AO.length>=2){AC=AO[0].x;t=AO[AE-1].x;o=(AC+t)/2;for(AR=0;AR<AE;++AR){if(AO[AR].x===o){l=AO[AR].y;break;}else{if(AR<AE-1&&AO[AR].x<o&&AO[AR+1].x>o){AA=(AO[AR+1].y-AO[AR].y)/(AO[AR+1].x-AO[AR].x);l=AO[AR].y+AA*(o-AO[AR].x);break;}}}this.midPoint.x=o;this.midPoint.y=l;}}else{for(AR=0;AR*2<AE;++AR){z=AS[2*AR];y=AS[2*AR+1];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AR)+" and "+(2*AR+1));d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+k+", y = "+AX);}}}for(AQ=(AE/2)-1;AQ>AR;--AQ){z=AS[2*AQ];y=AS[2*AQ+1];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AQ)+" and "+(2*AQ+1));d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+AM.x+", y = "+AM.y);}}}if(AO.length>=2){o=(AO[0].x+AO[1].x)/2;l=(AO[0].y+AO[1].y)/2;this.midPoint.x=o;this.midPoint.y=l;}}if(AO.length>=2){AP=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AO,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}q=AP;}else{p=this.mCalcValues;r=p.length;if(this.deformed){z=p[0];y=p[1];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 0 and 1");d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+k+", y = "+AX);}}z=p[2];y=p[3];if(z!==null&&z!==undefined&&y!==null&&y!==undefined){k=X.call(this,this.mpXAxis,z);AX=X.call(this,this.mpYAxis,y);if(k!==undefined&&k!==null&&AX!==undefined&&AX!==null){AM=new f.Point2D({x:k,y:AX});AO.push(AM);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 2 and 3");d.visPrint("\tvalueX = "+z+", valueY = "+y);d.visPrint("\tx = "+AM.x+", y = "+AM.y);}}if(AO.length>=2){o=(AO[0].x+AO[1].x)/2;l=(p[0].y+AO[1].y)/2;this.midPoint.x=o;this.midPoint.y=l;AP=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AO,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}q=AP;}else{for(AR=0;2*AR+3<2*r;++AR){AH=p[2*AR];AG=p[2*AR+1];AL=p[2*AR+2];AK=p[2*AR+3];if(AH!==undefined&&AH!==null&&AG!==undefined&&AG!==null&&AL!==undefined&&AL!==null&&AK!==undefined&&AK!==null){x=L.call(this,AH);AU=L.call(this,AL);w=AG+x*((2*AH+AL)/3-AH);v=AK+AU*((AH+2*AL)/3-AL);if(AF===D.DssGraphRegressionExp||AF===D.DssGraphRegressionLog||AF===D.DssGraphRegressionPow){AW=S.call(this,AF,AG,w,v,AK);w=AW.control1;v=AW.control2;}AC=X.call(this,this.mpXAxis,AH);AB=X.call(this,this.mpYAxis,AG);t=X.call(this,this.mpXAxis,AL);s=X.call(this,this.mpYAxis,AK);AT=X.call(this,this.mpYAxis,w);AJ=X.call(this,this.mpYAxis,v);if(AC!==undefined&&AC!==null&&AB!==undefined&&AB!==null&&t!==undefined&&t!==null&&s!==undefined&&s!==null&&AT!==undefined&&AT!==null&&AJ!==undefined&&AJ!==null){AD=new f.Point2D({x:AC,y:AB});u=new f.Point2D({x:t,y:s});AN.push(new f.BezierCurve({P0:AD,F1:AT,F2:AJ,P3:u,IsVertical:this.mIsVertical}));}else{d.visPrint("Trendline point calculation abnormal:");if(AC===undefined||AC===null||AB===undefined||AB===null){d.visPrint("\tdata point #: "+(2*AR)+" and "+(2*AR+1));d.visPrint("\tvalueX = "+AH+", valueY = "+AG);d.visPrint("\tx = "+AC+", y = "+AB);}if(t===undefined||t===null||s===undefined||s===null){d.visPrint("\tdata point #: "+(2*AR+2)+" and "+(2*AR+3));d.visPrint("\tvalueX = "+AL+", valueY = "+AK);d.visPrint("\tx = "+t+", y = "+s);}}}}AI=AN.length;AC=AN[0].mP0.x;t=AN[AI-1].mP3.x;o=(AC+t)/2;AQ=-1;for(AR=0;AR<AI;++AR){if(AN[AR].mP0.x===o){l=AN[AR].mP0.y;AQ=AR;break;}else{if(AN[AR].mP3.x===o){l=AN[AR].mP3.y;AQ=AR+1;break;}else{if(AN[AR].mP0.x<o&&AN[AR].mP3.x>o){AQ=AR;break;}}}}if(l!==undefined){this.midPoint.x=o;this.midPoint.y=l;}else{if(AQ<AI){l=AN[AQ].evaluate(o);this.midPoint.x=o;this.midPoint.y=l;}}AV=new f.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this,IsVertical:true,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});for(AR=0;AR<AI;++AR){AV.AddBezierCurveLine(AN[AR]);}q=AV;}}return q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Axis","TripleId","Rect2D","CategoryAxisInfo","ChartConstants","StraightLineObject","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumCategoryAxisOidItem","EnumCategoryLabelStyle","EnumRectCompare","EnumChartStyle","EnumImageUsage","EnumRectExpandDirection","EnumGraphMatrixMajorGraphType","EnumLabelLevelOption");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType");var At=mstrmojo.chart,Ak=At.ChartConstants,Q=At.enums,A8=Q.EnumAnchorPoint,An=Q.EnumGraphMajorType,g=Q.EnumAxisLabelsLocation,Ax=Q.EnumAxisDirection,Y=Q.EnumGraphObjectType,c=Q.EnumCategoryAxisOidItem,G=Q.EnumCategoryLabelStyle,AK=Q.EnumImageUsage,Au=Q.EnumLabelLevelOption,AL=Q.EnumChartStyle,Ag=Q.EnumRectCompare,AQ=At.gNullGroupId,AS=At.gNullSeriesId;var Ai=mstrmojo.chart.model,AR=Ai.enums,A9=AR.EnumDSSGraphType,BE=AR.EnumDSSGraphProperty,BF=AR.EnumDSSGraphObject,J=AR.EnumDSSGraphFontRotation,BQ=AR.EnumDSSGraphGridLineType,Ae=0,BA=1,BI=2,C=3;var x=new At.Point2D(),AZ=new At.Point2D(),BL=new At.Rect2D(),Ay=new At.Rect2D(),H=new At.Rect2D(),v=new At.Rect2D(),Ac=new At.Rect2D();function h(BS,BR){if(BR===undefined){BR=-3;}switch(this.mTripleId.mObjectId){case BF.DssGraphO1Body:return new At.TripleId({ObjectId:BF.DssGraph2DO1Label,GroupId:BS,SeriesId:BR});case BF.DssGraphO2Body:return new At.TripleId({ObjectId:BF.DssGraph2DO2Label,GroupId:BS,SeriesId:BR});default:return new At.TripleId({ObjectId:BF.DssGraph2DO1Label,GroupId:BS,SeriesId:BR});}}function u(BT,BW,BS){var BR=BW||0,BV=BT||0,BU=(this.mAxisInfo.mAxisDirection===Ax.AD_X)?BS.width:BS.height;if(BR<0){BR=0;}if(BV<0){BV=0;}if(BU<=0||BU<BR+BV){return ;}BU-=BR+BV;this.mLowTrim=BR;this.mHighTrim=BV;if(this.mAxisInfo.mAxisDirection===Ax.AD_X){BS.x+=BR;BS.width=BU;}if(this.mAxisInfo.mAxisDirection===Ax.AD_Y){BS.y+=BV;BS.height=BU;}}function AN(BS){var BT,BU=this.mLabelList,BR=BU.length;for(BT=0;BT<BR;BT++){if(BU[BT]){BU[BT].Restore({LineCount:BS});}}}function j(BR,BV){var BU=this.mChartContextPtr,BS=BU.GetGraphMatrixContext(),BV=BV||BS.getPadding(Ak.kLabelToChart),BT=BR.GetBoundingRect(true);return(BT.y>=BV&&BT.y+BT.height+BV<=BU.mGraphHeight);}function I(){var BU=this.mChartContextPtr,BX=BU.GetGraphMatrixContext(),BW=BU.RenderClusterShapes(),BV=this.mDatasetPtr,BZ=false,BR=BW;if(BW===false){if(BX.isCombinationChart()){var BS=BU.mUniformAxisContext.CategoryAxis,BY=this.IsVerticalAxis()?"Y":"X";BW=BS[BY].EnforceFringe;if(BW){return true;}var BT=BV.GetSeriesByShape().Bar;BR=BZ=BT&&BT.length>0;BR=BR||BW;}else{BR=BU.IsBarChart()&&BU.IsAdvancedBarChart(AL._bullet)===false;}}return BR;}function Aw(){if(I.call(this)){var BX=this.mChartContextPtr,BS=BX.GetGraphMatrixContext(),BT=false,BV=false;if(BS.isCombinationChart()){var BR=BX.mUniformAxisContext.CategoryAxis,BU=this.IsVerticalAxis()?"Y":"X";BT=BR[BU].EnforceCluster;if(BT){return true;}var BW=this.mDatasetPtr.GetSeriesByShape().Bar;BV=BW&&BW.length>0;return(BX.IsBarChart(AL._cluster)||(BV&&!BX.IsPercentChart()&&!BX.IsStackedChart()));}return BX.IsBarChart(AL._cluster);}return false;}function Aj(){var BU=this.mChartContextPtr;if(BU.mPartialRendering&&BU.mRenderingWindow){var BS,BR,BT=BU.mRenderingWindow;if(this.IsVerticalAxis()){BS=BT.y;BR=BS+BT.height;}else{BS=BT.x;BR=BS+BT.width;}this.screenWindow={Min:this.getGroupSlotAt(BS)-1,Max:this.getGroupSlotAt(BR)+1};}}function Ab(BX,BV){if(BX===0&&BV===0){return 0;}var BR=0,Bg,BT=this.mChartContextPtr,BZ=BT.mIsGraphMatrix,Bc=BT.GetGraphMatrixContext(),BS=this.mCategoryOption.mLabelStyle,Bd=BZ?Bc.getPadding(Ak.kLabelToChart):0,BY=this.mLevelSize,BU=BZ?Bc.getPadding(Ak.kCategoricalLabelToTick):this.mLevelSpace,BW,Bf=this.mGroupCount;switch(BS){case G.CLS_NORMAL:case G.CLS_MANUAL:case G.CLS_AUTOMATIC:BY.push(Math.max(BX,BV));BR=Math.max(BX,BV)+BU;break;default:Bg=this.mpAxisLabelSet.GetFormatFont().mFontRotation;if(Bg===J.Rotate45||Bg===J.Rotate315){BX=0;var Be=this.getGroupSize(),Bb,Ba;for(BW=0;BW<(Bf+1)/2;++BW){Bb=this.mLabelList[BW].GetBoundingRectNoRotation(true);Ba=Math.max(Bb.width,Bb.height)*Math.SQRT1_2;if(Ba>Be){Ba+=(Ba-Be);}BX=Math.max(BX,(Ba+0.5));}}BY.push(BX);BY.push(BV);BR=BX+BU+BV+this.mLevelSpace;break;}return BR+Bd;}function Z(BR){var BS=this.mDeviceDataArea;return(BR>BS.x&&BR<BS.x+BS.width);}function L(BR){var BS=this.mDeviceDataArea;return(BR>BS.y&&BR<BS.y+BS.height);}function BM(){return this.mTripleId.mObjectId===BF.DssGraphO2Body;}function Ao(BR){return this.mGroupOrder.length===0?BR:this.mGroupOrder[BR];}function BH(BS,BV){var BU,BT,BR;BR=BS.length;for(BU=0;BU<BR;++BU){BT=new At.StraightLineObject({TripleId:BV.mTripleId,GraphObjectManager:this,StartPoint:BS[BU],EndPoint:BS[BU].Shifted(this.mDepthOffset),ParentObject:BV});BV.AddGraphObject(BT);this.mManagerGraphObjectList.push(BT);}}function n(BW,BU){var BV,BT,BS,BR,BX=this.mDeviceDataArea,BY;if(this.mChartContextPtr.mIsTimeSeriesChart){BR=this.mShownLabelList.length;for(BV=0;BV<BR;++BV){BT=this.mShownLabelList[BV].mTripleId.mGroupId;if(!this.IsVerticalAxis()){BS=new At.Point2D({x:this.getGroupMiddlePos(BT),y:BX.GetBottomMiddle().y});BW.push(BS);BS=new At.Point2D({x:this.getGroupMiddlePos(BT),y:BX.GetTopMiddle().y});BU.push(BS);}else{BS=new At.Point2D({x:BX.GetLeftMiddle().x,y:this.getGroupMiddlePos(BT)});BW.push(BS);BS=new At.Point2D({x:BX.GetRightMiddle().x,y:this.getGroupMiddlePos(BT)});BU.push(BS);}}}else{BY=this.mGroupCount;for(BV=0;BV<BY;++BV){if(this.mAxisCross&&BV===0){continue;}if(!this.IsVerticalAxis()){BS=new At.Point2D({x:this.getGroupMiddlePos(BV),y:BX.y+BX.height});BW.push(BS);BS=new At.Point2D({x:this.getGroupMiddlePos(BV),y:BX.y});BU.push(BS);}else{BS=new At.Point2D({x:BX.x,y:this.getGroupMiddlePos(BV)});BW.push(BS);BS=new At.Point2D({x:BX.x+BX.width,y:this.getGroupMiddlePos(BV)});BU.push(BS);}}}}function O(){var BU=this.mMajorGrid;if(!BU.mShowGridLines||(BU.mGridStyle!==BQ.DssGraphGridRegular&&BU.mGridStyle!==BQ.DssGraphGridBoth)){return ;}var BT=At.gAxisObjects[this.getIndex()].mMajorId;this.InitObjectSet(BT,Y.GOT_MAJOR_GRID);var BS=[],BR=[];n.call(this,BS,BR);BH.call(this,BR,this.mpMajorGridSet);}function w(Bb,Be){var BZ=this.mMinorGrid,Ba=this.mDeviceDataArea,BU=1,BR,BT,BX,Bc=this.mGroupCount,BY,BW,BV,BS,Bd;if(BZ.mUseManualGrid){BU=(BZ.mGridInterval);}BR=Math.floor(BU/2);BT=this.getGroupSize()/(BU+1);BX=((BU%2)===0)?BR:(BR+1);for(BY=0;BY<Bc;++BY){for(BW=-BR;BW<=BX;++BW){if((BW!==0)){if(BY===this.mGroupCount-1){if((BU%2)!==0&&BW===BX){continue;}}BV=(BT*BW+(BW>=0?0.5:-0.5));if(!this.IsVerticalAxis()){BS=this.getGroupMiddlePos(BY)+BV;if(Z.call(this,BS)){Bb.push(new At.Point2D({x:BS,y:Ba.y+Ba.height}));Be.push(new At.Point2D({x:BS,y:Ba.y}));}}else{Bd=this.getGroupMiddlePos(BY)+BV;if(L.call(this,Bd)){Bb.push(new At.Point2D({x:Ba.x,y:Bd}));Be.push(new At.Point2D({x:Ba.x+Ba.width,y:Bd}));}}}}}}function Ah(){var BT=this.mMinorGrid;if(!BT.mShowGridLines||(BT.mGridStyle!==BQ.DssGraphGridRegular&&BT.mGridStyle!==BQ.DssGraphGridBoth)){return ;}var BR=At.gAxisObjects[this.getIndex()].mMinorId;this.InitObjectSet(BR,Y.GOT_MINOR_GRID);var BU=[],BS=[];w.call(this,BU,BS);BH.call(this,BS,this.mpMinorGridSet);}function p(){}function M(BR,BS){return BR;}function BG(BT,BR){var BS=Au.LLO_NORMAL;if(this.mChartContextPtr.mIsGraphMatrix){return{Option:BS,Index:BR};}return{Option:BS,Index:BR};}function AH(BT,Bc,Bd){if(Bd){var BX=this.mDatasetPtr,BU=Bd.length,Be=BT?BX.GetSeriesLabelIdentities(Bc):BX.GetGroupLabelIdentities(Bc),Bb=Be.length,BZ=1,BS=[],BV=0,BY,BW;for(BY=0;BY<BU;++BY){var Ba=Bd[BY],BR=Ba.match(/ /g);if(BR){BZ=BR.length+1;}for(BW=0;BW<BZ;++BW){if(BY<Bb){BS[BV]=Be[BY];}else{BS[BV]=null;}BV++;}}return BS;}return null;}function q(){var BY=this.mChartContextPtr,BV=this.mLabelList,BR=BV.length,BT,BX=BM.call(this),BS,BW,BU;if(BY.mImageUsage===AK.GENERAL){for(BU=0;BU<BR;BU++){BT=BV[BU];if(BT&&BT.texts){if(BT.mIsShown===false){delete BT.texts;continue;}BS=BT.mTripleId.mGroupId;BW=AH.call(this,BX,BS,BT.texts);if(BW&&BW.length){BT.IdentityMap=BW;delete BT.texts;}}}}}function Am(Be,BU){BU=BU||false;var BT=this.mChartContextPtr,BS=!this.IsVerticalAxis(),Bc,Bd,BW=this.mDatasetPtr,BX=Au.LLO_NORMAL,BZ;if(BS&&this.mIsUniformAxis){var BY=BT.getUniformAxisContext(),BR=BY.CategoryAxis.X.Truncation;if(BR){var Ba=-1,Bb=BR.Indices,BV=BR.Texts;if(Bb&&Bb.length){Ba=Bb.indexOf(Be);if(Ba!==-1){Bc=BV[Ba];if(Bc){return Bc;}}}}}if(BM.call(this)){BZ=BG.call(this,false,Be);Be=BZ.Index;BX=BZ.Option;Bd=BW.GetSeriesLabel(Be,0,BX,BU);Bc=BW.GetMergedLabel(Bd,BX);if(BT.mImageUsage===AK.GENERAL&&BU){return{Text:Bc,Texts:Bd};}return{Text:Bc};}BZ=BG.call(this,true,Be);Be=Ao.call(this,BZ.Index);BX=BZ.Option;Bd=BW.GetGroupLabel(Be,0,BX,BU);Bc=BW.GetMergedLabel(Bd,BX);if(BT.mImageUsage===AK.GENERAL&&BU){return{Text:Bc,Texts:Bd};}return{Text:Bc};}function r(BR){var BU=this.mChartContextPtr;if(BU.mPartialRendering){var BT=BR.mTripleId.mGroupId,BS=this.screenWindow;return BT>=BS.Min&&BT<=BS.Max;}return true;}function z(BR){switch(this.mAxisInfo.mAxisLabelsLocation){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:return this.mAxisInfo.mAxisLabelsLocation;}if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){if(BR<this.mLabelSubIndex){return g.ALL_BOTTOM;}return g.ALL_TOP;}if(BR<this.mLabelSubIndex){return g.ALL_LEFT;}return g.ALL_RIGHT;}function AP(BR){var BS=this.HasOuterTicks(this.mMajorGrid.mGridStyle)||this.HasOuterTicks(this.mMinorGrid.mGridStyle);if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){return BS;}return BS&&(BR===this.mAxisInfo.mAxisLabelsLocation);}function l(BS,BU,BR){var BT=this.mDeviceDataArea;switch(BS){case g.ALL_BOTTOM:BR.Reset(0,1);return BT.y+BT.height+BU;case g.ALL_TOP:BR.Reset(0,-1);return BT.y-BU;case g.ALL_LEFT:BR.Reset(-1,0);return BT.x-BU;case g.ALL_RIGHT:BR.Reset(1,0);return BT.x+BT.width+BU;default:return 0;}}function V(){if(this.mIsUniformAxis===false){return false;}return this.restrictWidth>=0&&this.restrictHeight>=0;}function AO(BY,BX){var Ba=BX,BV=this.getLabelRotation(),BW=(BV===J.Rotate90),BS=V.call(this)&&BW,BU=this.mChartContextPtr.getUniformAxisContext();if(V.call(this)){if(BW){if(this.maxLabelLength===-1){var BR=this.mAxisInfo.mAxisDirection===Ax.AD_X;if(BR&&BW&&(this.resizeAction===Ag.ShrinkX||this.resizeAction===Ag.ExpandX)){Ba=1000;}else{Ba=this.calculateMaxAxisSpace(this.restrictHeight);}}else{Ba=this.maxLabelLength;}}else{Ba=this.calculateMaxAxisSpace(this.restrictWidth);BY.rect.width=BY.rect.height=0;BY.mIsRectCalculated=false;}}else{var BZ=false,BT=BU.CategoryAxis.X;if(BT.Layout===C){BZ=true;}if(!this.IsVerticalAxis()){if(BW||BZ){var Bb=BU.CategoryAxis.X.LabelWidthLimit;if(Bb){Ba=Bb;BS=true;}if((BW||BZ)&&!V.call(this)){BS=true;Ba=1000;}}else{if(!this.mWordWrap){Ba=1000;}}}}return{Stringent:BS,WidthLimit:Ba};}function AM(){if(this.mPaddingOnSide===-1){var BU=this.mDatasetPtr,BW=this.mChartContextPtr;if(!BW.mIsGraphMatrix){this.mPaddingOnSide=0;}else{if(I.call(this)){var BS=1,BV=this.mGroupCount;if(Aw.call(this)===false){BS=(BV+0.5);}else{BS=BV*BU.GetClusterSeriesCount()+0.5;}var BR=0,BT=this.mDeviceDataArea;switch(this.mAxisInfo.mAxisDirection){case Ax.AD_X:BR=BT.width;break;case Ax.AD_Y:BR=BT.height;break;case Ax.AD_Z:break;}this.mPaddingOnSide=BR/BS/4;}else{this.mPaddingOnSide=0;}this.mPaddingOnSide=Math.round(this.mPaddingOnSide);}}return this.mPaddingOnSide;}function P(){var BR=0;switch(this.mAxisInfo.mAxisDirection){case Ax.AD_X:BR=this.mDeviceDataArea.width;break;case Ax.AD_Y:BR=this.mDeviceDataArea.height;break;case Ax.AD_Z:break;}return BR-2*AM.call(this);}function AE(BY,Ba,BS){var BT,BZ,BU=this.mChartContextPtr,BV=!this.IsVerticalAxis(),BR=false;if(BV){BT=0;if(BU.mManualLayoutMode){BT=(Ba*this.getGroupSize(true)+0.5);}else{BT=BZ=Ba*this.getGroupSize(true);if(BU.mIsGraphMatrix===false){BT=Math.floor((BZ*Math.max(1,((P.call(this)/10)/BZ))-At.Axis.gLabelMargin+0.5));if(this.mAxisCross||BU.mIsTimeSeriesChart){BT=Math.min(BT,BS);}}BT=Math.max(1,BT);}if(this.mIsUniformAxis){var BX=AO.call(this,BY,BT);BT=BX.WidthLimit;BR=BR||BX.Stringent;}BY.mSubTextHolder.SetLineCount(1);BY.SetTextWidthLimit(BT,BR);}else{BT=this.mDeviceDataArea.width;if(!this.mIsUniformAxis){BT=BT/2;}else{var BW=BU.getUniformAxisContext(),Bb=BW.CategoryAxis.Y;BT=Bb.LabelWidthLimit||BT;}if(this.mIsUniformAxis){if(V.call(this)){BY.rect.width=BY.rect.height=0;BY.mIsRectCalculated=false;}}BY.SetTextWidthLimit(BT);}}function Av(BW,BS,BT){BT=(BT!==undefined)?BT:false;var BV=this.mDeviceDataArea,BR,BU;if(this.IsVerticalAxis()){BR=BV.x+BV.width/2;BU=this.getGroupMiddlePos(BW.mGroupId,BT);}else{BR=this.getGroupMiddlePos(BW.mGroupId,BT);BU=BV.y+BV.height;}BS.MoveTo(BR,BU,A8.CENTER);}function a(BY,BU,BX,BS){var BR,BV,BW;if(BS===undefined){if(this.maxLabelLength>0){BS=this.maxLabelLength;}else{BS=1000;}}var BT=BY.mGroupId;BR=this.mLabelList[BT];if(BR===undefined){BW=BY;BR=new At.TextObject({TripleId:BW,GraphObjectManager:this,GraphCollectionObject:this.mpAxisLabelSet,hasFill:false,hasLine:false});BV=Am.call(this,BW.mGroupId,true);BR.SetText(BV.Text);delete BV.Text;if(BV.Texts){BR.texts=BV.Texts;delete BV.Texts;}this.mLabelList[BT]=BR;}AE.call(this,BR,BU,BS);if(BX){Av.call(this,BY,BR);}return BR;}function BK(BV,BX,BW,BT){var BU=BW,BS=BT,BR;if(this.mUseDepth){BR=this.getDepthMargin(0,0);BU=BU-BR.lowMargin;BS=BS-BR.highMargin;}BU=(BU<0)?0:BU;BS=(BS<0)?0:BS;return{LowMargin:BU>BV?BU-BV:0,HighMargin:BS>BX?BS-BX:0};}function AC(BZ,BV,BS,BW,BX){var BY,BT;v.ResetRect(BW);Ac.ResetRect(BX);if(this.mChartContextPtr.mIsGraphMatrix){var BU=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ak.kLabelToChart);var BR=0;if(this.IsVerticalAxis()){v.y-=BU;v.height+=BU;Ac.height+=BU;}else{v.x-=(BU+BR);v.width+=BU+BR;Ac.width+=BU;}}BY=this.IsVerticalAxis()?Ac.y+Ac.height-(BS.y+BS.height):BS.x-v.x;BT=this.IsVerticalAxis()?BS.y-v.y:Ac.x+Ac.width-(BS.x+BS.width);return BK.call(this,BZ,BV,BY,BT);}function BJ(BX,BY,BW){BW=BW||0;var BS,BU,BV,BZ,BT=this.mChartContextPtr,BR={x:0,y:0,width:BT.mGraphWidth,height:BT.mGraphHeight};if(BY){BS=BX.x-BW;BU=BX.x+BX.width+BW;BV=BR.x;BZ=BR.x+BR.width;}else{BS=BX.y-BW;BU=BX.y+BX.height+BW;BV=BR.y;BZ=BR.y+BR.height;}return !(BS>=BV&&BU<=BZ);}function AG(Bb,BZ,BY,BU,BX){var BT=this.mChartContextPtr,BS=0,BV=1,BR=5,Ba=false,BW=BT.GetGraphMatrixContext();if(Bb){switch(BY){case Ae:case C:case BA:if(BZ){Ba=BW.checkPaddingBetweenLabels(BU,BX,BR,true);}else{Ba=BW.checkPaddingBetweenLabels(BU,BX,BV,true);}break;default:Ba=BW.checkPaddingBetweenLabels(BU,BX,BV,true);break;}}else{Ba=BW.checkPaddingBetweenLabels(BU,BX,BR,false);}return Ba;}function AF(BT,BS){var BR;var BU=h.call(this,BT,-3);BR=BR||a.call(this,BU,BS,true);return BR;}function AJ(BU,BV,BR,BZ,BS,BX,BW){var BY=false,BT=this.mChartContextPtr;if(!BU){BY=BV.HasIntersection(BR);BY=BY||(BT.mIsGraphMatrix&&AG.call(this,BZ,BS,BX,BR,BV));}if(BZ&&!BS){BY=BY||(BT.mIsGraphMatrix&&BJ.call(this,BV,BZ,BW));}return BY;}function AJ(BU,BV,BR,BZ,BS,BX,BW){var BY=false,BT=this.mChartContextPtr;if(!BU){BY=BV.HasIntersection(BR);BY=BY||(BT.mIsGraphMatrix&&AG.call(this,BZ,BS,BX,BR,BV));}if(BZ&&!BS){BY=BY||(BT.mIsGraphMatrix&&BJ.call(this,BV,BZ,BW));}return BY;}function BO(BU,Bd,Bb,BX){var BW,Ba=new At.Rect2D(),Bc,BV=true,Bf=!this.IsVerticalAxis(),BT=this.mChartContextPtr,BZ=0,BS=this.mPlotGroupCount,BY=this.mCategoryOption.mLabelStyle,BR=this.getLabelRotation()===J.Rotate90||this.getLabelRotation()===J.Rotate270,Be={Overlapped:false,MaxSpace:Bb};if(BT.mIsGraphMatrix){BZ=BT.GetGraphMatrixContext().getPadding(Ak.kLabelToChart);}Ay.Reset(0,0,0,0);for(BW=Bd;BW<BS;BW+=BU){Bc=AF.call(this,BW,BU);BX.push(Bc);Bc.GetTransformedRectEx(Ba);Be.Overlapped=AJ.call(this,BV,Ba,Ay,Bf,BR,BY,BZ);if(Be.Overlapped){Be.MaxSpace=Bb;return Be;}if(BV===true){BV=false;Ay.ResetRect(Ba);}else{Ay.ResetRect(Ba);Bb=Math.max(Bb,this.IsVerticalAxis()?Ba.width:Ba.height);Be.MaxSpace=Bb;}}if(Bd>=BU){BV=true;Ay.Reset(0,0,0,0);for(BW=Bd;BW>=0;BW-=BU){Bc=AF.call(this,BW,BU);if(BW!==Bd){BX.unshift(Bc);}Ba=Bc.GetTransformedRect(true);Be.Overlapped=AJ.call(this,BV,Ba,Ay,Bf,BR,BY,BZ);if(Be.Overlapped){Be.MaxSpace=Bb;return Be;}if(BV===true){BV=false;Ay.ResetRect(Ba);}else{Ay.ResetRect(Ba);Bb=Math.max(Bb,this.IsVerticalAxis()?Ba.width:Ba.height);Be.MaxSpace=Bb;}}}Be.Overlapped=false;return Be;}function AB(BR,BS){if(this.IsVerticalAxis()){this.mDeviceDataArea.y+=BS;this.mDeviceDataArea.height-=BS+BR;}else{this.mDeviceDataArea.x+=BR;this.mDeviceDataArea.width-=BR+BS;}}function U(BV,BS,BT,BR,BU){if(!BV){return ;}if(this.IsVerticalAxis()){if(BT>0){BR.mIsShown=false;}if(BS>0){BU.mIsShown=false;}}else{if(BS>0){BR.mIsShown=false;}if(BT>0){BU.mIsShown=false;}}}function AW(){var BT=this.mChartContextPtr,BR=BT.getUniformAxisContext();if(BT.mIsGraphMatrix){var BS=BR.CategoryAxis.X;return !!BS.ForbideStagger===false;}return true;}function e(Bd,BU,Bl,BZ,Ba,Bk,Bi,BT,Bm,BY){var Be,Bf,BW,Bh,Bc,BV,Bb,Bj,BS,BX,BR=[],Bg;BW={MaxSpace1:Bk,MaxSpace2:Bi,Overlapped:true};Bh=this.mPlotGroupCount-((this.mPlotGroupCount&1)===0?1:2);Be=h.call(this,Bh);BV=a.call(this,Be,2,true,BU*2);Bc=BV.GetBoundingRect();Bb=AC.call(this,Bd,BU,BZ,BT,Bc);BS=Bb.LowMargin;BX=Bb.HighMargin;if(BS>Bm||BX>BY){this.mDeviceDataArea=BZ;BS=Math.max(Bm,BS);BX=Math.max(BY,BX);if(!Bl){AB.call(this,BS,BX);}BW.MaxSpace1=0;Bb=BO.call(this,2,0,Bk,BR);BW.MaxSpace1=Bb.MaxSpace;if(Bb.Overlapped){return BW;}}else{BR=BR.concat(Ba);}Bb=BO.call(this,2,1,Bi,BR);BW.MaxSpace2=Bi=Bb.MaxSpace;if(Bb.Overlapped){return BW;}Bj=Bk+this.mLevelSpace+Bi+this.mLevelSpace;if(this.HasLabelsOnBothSides()){Bj+=Bj;}if(Bj*2>(this.IsVerticalAxis()?this.mDeviceDataArea.width:this.mDeviceDataArea.height)){return BW;}BV=(this.mPlotGroupCount&1)===0?BR[BR.length-1]:BR[Math.floor(this.mPlotGroupCount/2)];U.call(this,Bl,BS,BX,BR[0],BV);Ba.splice(0,Ba.length);Bg=BR.length;for(Bf=0;Bf<Bg;++Bf){Ba.push(BR[Bf]);}BW.Overlapped=false;return BW;}function B(BR){return e.call(this,BR.LowMargin,BR.HighMargin,BR.FixedMargin,BR.BackupRect2D,BR.LabelArray,BR.MaxSpace_1,BR.MaxSpace_2,BR.FirstRect,BR.LowLabelMargin,BR.HighLabelMargin);}function BP(BX,Bc,BU){Bc=Bc||0;var BT=this.mPlotGroupCount-1,BZ=Bc,BY,BW=false,Bb,BV,BS=this.mCategoryOption.mLabelStyle,BR=!this.IsVerticalAxis(),Ba;if(this.mPlotGroupCount<2){return 1;}if(BR&&this.mIsUniformAxis){if(BS===BA){if(BU===1){return BS;}}if(BS===BI){if(BU===2){return BS;}}}while(BT>BZ){BY=Math.floor((BT+BZ+1)/2);BV=h.call(this,BY);Ba=a.call(this,BV,BU,true);Bb=Ba.GetTransformedRect(true);if(BX.HasIntersection(Bb)){BZ=BY;BW=true;}else{BW=false;if(BT===BY){break;}BT=BY;}}return BW?this.mGroupCount:Math.max(BT-Bc,BU);}function BD(BR,BT,BS){switch(BR){case g.ALL_BOTTOM:BT.height-=BS;break;case g.ALL_TOP:BT.y+=BS;BT.height-=BS;break;case g.ALL_LEFT:BT.x+=BS;BT.width-=BS;break;case g.ALL_RIGHT:BT.width-=BS;break;}}function k(BR){var BS=this.mAxisInfo.mAxisLabelsLocation;switch(BS){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:BR.push(BS);break;}if(BS===g.ALL_BOTTOM_TOP){BR.push(g.ALL_BOTTOM);BR.push(g.ALL_TOP);}else{if(BS===g.ALL_LEFT_RIGHT){BR.push(g.ALL_LEFT);BR.push(g.ALL_RIGHT);}}}function W(Bb){var Ba,BW,BU,BY,BV=Bb.FirstLabel,BS=this.mChartContextPtr,BX=BS.mIsGraphMatrix,Bc=this.mCategoryOption.mManualSkip,BT=this.mDeviceDataArea,Bd=this.mAxisInfo.mAxisDirection===Ax.AD_Y,BR=this.mCategoryOption.mLabelStyle,BZ=new At.Rect2D({Rect2D:BT});switch(Bb.Interval){case 1:if(!this.IsVerticalAxis()&&Bb.FirstLabel.possibleTruncate()){BR=C;}else{BR=BA;}break;case 2:BW=this.getLabelRotation();Ba=(BW===J.Rotate90)||(BW===J.Rotate270);BU=true;if(BX){BU=BU&&!Bd&&!Ba;if(BU){BU=AW.call(this)&&(BV.mTripleId.mGroupId===0);}}else{}if(BU){BY=B.call(this,Bb);Bb.MaxSpace_1=BY.MaxSpace1;Bb.MaxSpace_2=BY.MaxSpace2;BU=BY.Overlapped===false;if(!Bb.MaxSpace_2){Bb.MaxSpace_2=Bb.MaxSpace_1;}}if(BU){if(BX&&this.mPlotGroupCount===2){BT.ResetRect(BZ);BR=C;Bc=2;}else{BR=BI;}}else{BT.ResetRect(BZ);BR=G.CLS_MANUAL;Bc=2;}break;default:BR=G.CLS_MANUAL;Bc=Bb.Interval;break;}this.mCategoryOption.mManualSkip=Bc;this.mCategoryOption.mLabelStyle=BR;}function A4(BY){var BU=this.mpAxisLabelSet;if(BU){var Bd=BU.GetFormatFont();if(!!Bd===false){return 1;}var Bc=this.getGroupSize(true),Bb=BY.mGroupId,BW=this.mDatasetPtr,BT;if(BM.call(this)){BT=BW.GetSeriesLabel(Bb);}else{BT=BW.GetGroupLabel(Bb);}var BX=Bd.mFontRotation,BS=this.mChartContextPtr,BZ=BS.getUniformAxisContext(),BR=BZ.CategoryAxis,Be=Bd.GetStringExtent(BT);if(BX===J.Rotate180||BX===J.Normal){var Ba=2;if(this.IsVerticalAxis()){if(Be.Height>=Bc){Ba=Math.ceil(Be.Height/Bc);return Math.min(Ba,this.mGroupCount);}}else{if(Be.Width>=Bc){Ba=Math.ceil(Be.Width/Bc);return Math.min(Ba,this.mGroupCount);}}if(this.IsVerticalAxis()===false){var BV=BR.X;if(BV&&BV.Layout===BI){return Math.min(2,this.mGroupCount);}}}else{if(BX===J.Rotate90||BX===J.Rotate270){if(Be.Height>=Bc){return Math.min(2,this.mGroupCount);}}}}return 1;}function A3(Bt,Bb,Bv,Bm){Bm=(Bm!==undefined)?Bm:0;var BZ,Bk,Bj,Br=this.mChartContextPtr,Bh,BU,Bu,Bq,BR,BW,BT,Bd=this.mGroupCount,Bn=this.mShownLabelList,Bw=this.mLabelList,Bc=0,By=0,Bp,Be,Bz,B2,BS,B0,Bf,B1,Bl;this.mLevelSize.splice(0,this.mLevelSize.length);Bk=Bj=0;if(Bd<1){return 0;}var Bg=Br.getUniformAxisLabelRotateMode("x"),BY=this.IsVerticalAxis()?"Y":"X";BS=Bg===-1;Bh=Br.mIsGraphMatrix?Bm:0;BU=Bd-1;Bh=AX.call(this,BY,Bh,BU);if(!Br.mManualLayoutMode||Br.mRecalculateFrame){Bu=h.call(this,Bh);BT=A4.call(this,Bu);Bq=a.call(this,Bu,BT,true);BR=Bq.GetBoundingRect(true);BW=Bq.GetTransformedRect(true);BT=BP.call(this,BW,Bh,BT);H.ResetRect(this.mDeviceDataArea);var BV=this.mDeviceDataArea;while(BT<=Bd){BV.ResetRect(H);Bk=0;Bj=0;if(true){Bu=h.call(this,Bh);AE.call(this,Bq,BT,Bt*2);Av.call(this,Bu,Bq);BR=Bq.GetBoundingRect(true);}Bk=this.IsVerticalAxis()?BR.width:BR.height;Bp=parseInt(BU/BT)*BT;Bu=h.call(this,Bp);if(this.mIsUniformAxis){Be=a.call(this,Bu,BT,true);}else{Be=a.call(this,Bu,BT,true,2*Bb);}Bz=Be.GetBoundingRect(true);if(this.mChartContextPtr.GetGraphType()===A9.DssGraphTypeGridChart&&BY==="X"){Bc=0;By=0;this.mLowTrim=0;this.mHighTrim=0;}else{Bl=AC.call(this,Bt,Bb,BV,BR,Bz);Bc=Bl.LowMargin;By=Bl.HighMargin;this.mLowTrim=Bc;this.mHighTrim=By;}if(!Bv){AB.call(this,Bc,By);}if(!this.IsVerticalAxis()){B0=this.getLabelRotation();Bf=(B0===J.Rotate90);if(Bf===false){Bu=h.call(this,Bh);AE.call(this,Bq,BT,Bt*2);Av.call(this,Bu,Bq);BR=Bq.GetBoundingRect(true);if(BJ.call(this,BR,true,5)){if(BS){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mLabelInterval=-1;this.mCategoryOption.mLabelStyle=C;return 0;}else{Bq.mIsShown=false;Bh++;}}}}Bn.splice(0,Bn.length);if(this.mGroupCount===1&&!this.IsVerticalAxis()){if(BV.width<BR.width){B0=this.getLabelRotation();Bf=(B0===J.Rotate90)||(B0===J.Rotate270);if(Bf){Bq.mIsShown=false;Bk=Bj=0;break;}BT=2;this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;Bw.splice(0,Bw.length);this.mLabelList.push(Bq);Bn.push(Bq);BR=Bq.GetBoundingRect();return BR.height+5;}}Bl=BO.call(this,BT,Bh,Bk,Bn);Bk=Bl.MaxSpace;if(Bl.Overlapped){++BT;}else{this.mLabelInterval=BT;if(Bn.length>=1){U.call(this,Bv,Bc,By,Bn[0],Bn[Bn.length-1]);if(this.mChartContextPtr.GetGraphType()===A9.DssGraphTypeGridChart&&BY==="X"){Bz=Bn[Bn.length-1].GetBoundingRect(true);if(BJ.call(this,Bz,true,0)){Bn.splice(Bn.length-1,1);}}}break;}}B1={Interval:BT,FirstLabel:Bq,LowMargin:Bt,HighMargin:Bb,BackupRect2D:H,FirstRect:BR,FixedMargin:Bv,MaxSpace_1:Bk,MaxSpace_2:Bj,LabelArray:Bn,LowLabelMargin:Bc,HighLabelMargin:By};W.call(this,B1);Bk=B1.MaxSpace_1;Bj=B1.MaxSpace_2;if(Br.mIsGraphMatrix){var Bo=[],Ba=this.mGraphObjectList,Bx=Ba.length,BX=Bn.length;for(B2=0;B2<BX;++B2){Bn[B2].mIsShown=true;Bo.push(Bn[B2].mTripleId.mGroupId);}var Bs,Bi;Bi=Bw.length;for(B2=0;B2<Bi;B2++){if(Bw[B2]){Bw[B2].mIsShown=false;}}Bi=Bn.length;for(B2=0;B2<Bi;B2++){Bs=Bn[B2].mTripleId.mGroupId;if(Bw[Bs]){Bw[Bs].mIsShown=true;}else{Bw[Bs]=Bn[B2];}}}else{Bw=Bw.concat(Bn);}}this.hasLabelCreated=true;BZ=Ab.call(this,Bk,Bj);return BZ;}function BC(BR){this.mDeviceDataArea.ResetRect(BR.Rect2D);this.mLevelSize.splice(0,this.mLevelSize.length);this.mShownLabelList.splice(0,this.mShownLabelList.length);return A3.call(this,BR.LowMargin,BR.HighMargin,BR.FixedMargin,BR.StartIndex);}function AX(BS,BZ,BX){var BW,BR,BT,BY,BV=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ak.kLabelToChart);var BU=function(){BW=h.call(this,BZ);BR=A4.call(this,BW);BT=a.call(this,BW,BR,true);BY=BT.GetBoundingRect(true);while(BZ<BX){if((BS==="Y"&&BY.y>=BV)||(BS==="X"&&BY.x>0)){break;}BZ++;BW=h.call(this,BZ);BR=A4.call(this,BW);BT=a.call(this,BW,BR,true);BY=BT.GetBoundingRect(true);}};if(BS==="Y"){BU.call(this);}else{if(this.mChartContextPtr.GetGraphType()===A9.DssGraphTypeGridChart&&BS==="X"){BU.call(this);}}return BZ;}function A5(){if(this.mLabelInterval<=1){return 0;}var BR=this.mGroupCount%this.mLabelInterval;if(BR<=0){BR=this.mLabelInterval;}return Math.ceil((BR+1)/2)-1;}function Af(BS){var BT=[[BF.DssGraph2DO1Label,BF.DssGraph2DO2Label],[BF.DssGraphO1Major,BF.DssGraphO2Major],[BF.DssGraphO1Minor,BF.DssGraphO2Minor]],BR=1;if(this.mTripleId.mObjectId===BF.DssGraphO1Body){BR=0;}return BT[BS][BR];}function F(BT){if(BT<0){return true;}var BX=new At.TripleId({ObjectId:Af.call(this,c.OID_LABEL)});this.InitObjectSet(BX,Y.GOT_AXIS_LABEL);var BV=this.mpAxisLabelSet.mFormatFontPtr,BS=4+2*BV.GetStringHeight("H"),BU=this.mChartContextPtr.GetGraphMatrixContext(),BW=this.mGroupCount,BR=BU.getPadding(Ak.kEndLabelToChart)*2+BS*BW+BU.getPadding(Ak.kBetweenLabels)*(BW-1);return BR<BT;}function A6(BS){var BT=this.mChartContextPtr,BR={Skip:false,Space:-1};if(!BT.mIsGraphMatrix){return BR;}if(!BS){if(this.resizeAction===-1||this.maxLabelLength===-1){return BR;}this.mWordWrap=F.call(this,this.mDeviceDataArea.height);if(this.resizeAction===Ag.ShrinkX||this.resizeAction===Ag.ExpandX){BR.Skip=!this.mWordWrap;BR.Space=Ab.call(this,this.maxLabelLength,0);}}else{if(this.resizeAction===-1||this.maxLabelLength===-1){return BR;}if(this.resizeAction===Ag.ExpandY||this.resizeAction===Ag.ShrinkY){if(this.getStatus()===2){this.mWordWrap=F.call(this,this.mDeviceDataArea.height);BR.Skip=!this.mWordWrap;this.mLevelSize.splice(0,this.mLevelSize.length);BR.Space=Ab.call(this,this.maxLabelLength,0);}}}return BR;}function Aa(BS){var BV=this.mChartContextPtr;if(!BV.mIsGraphMatrix){return false;}var Bc=BV.GetGraphMatrixContext(),Ba,Be,BW,BT=this.mPlotGroupCount,Bb=0,BR=1,Bd=this.getLabelRotation()===J.Rotate90,BU=1,BY,BZ=0,BX=0,Bf;for(BY=0;BY<BT;BY+=BU){Ba=h.call(this,BY,-3);Be=a.call(this,Ba,BU,false);if(this.maxLabelLength===-1){Be.Restore({Stringent:false,Restroke:true});}Bf=Be.GetBoundingRect(true);BW=Bd?Bf.height:Bf.width;if(BY%2===0){BZ+=BW;}else{BX+=BW;}}if(BS===BR){BW=Math.max(BZ,BX)+Math.ceil(BT/2)*Bc.getPadding(Ak.kBetweenLabels);}else{if(BS===Bb){BW=BZ+BX+(BT-1)*Bc.getPadding(Ak.kBetweenLabels);}else{BW=BZ+BX+(BT-1)*Bc.getPadding(Ak.kBetweenLabels);}}BW+=2*Bc.getPadding(Ak.kLabelToChart);return BW<=this.mDeviceDataArea.width;}function o(){var BT=V.call(this),BR=this.mChartContextPtr,BU=BR.getUniformAxisContext(),BZ=this.mAxisInfo.mAxisDirection===Ax.AD_X,BS=BU.CategoryAxis.X,BW=this.mpAxisLabelSet.GetFormatFont(),BX=false;if(this.mIsUniformAxis&&BZ&&BS){var BV=BR.getUniformAxisLabelRotateMode("x");if(BV===J.Automatic){if(BS.Layout){var BY=this.mCategoryOption;BY.mLabelStyle=BS.Layout;if(BT){this.restoreLabels();}if(BY.mLabelStyle===1||BY.mLabelStyle===2){BW.mFontRotation=J.Normal;}else{BW.mFontRotation=J.Rotate90;}BX=true;}}else{BX=true;BW.mFontRotation=BV;}}if(!BX){if(BT){this.restoreLabels();if(BT&&this.maxLabelLength===-1){BW.mFontRotation=J.Normal;}}if(this.mIsUniformAxis&&BZ&&BW.mFontRotation===J.Normal){if(Aa.call(this,1)===false){BW.mFontRotation=J.Rotate90;}}}}function d(BZ,BS,Bd,BY,Bj){var BV=this.mChartContextPtr,BU={Rect2D:BS,LowMargin:Bd,HighMargin:BY,FixedMargin:Bj,StartIndex:0},Bi;Bi=BC.call(this,BU);if(BV.mIsGraphMatrix===false){return Bi;}BU={Rect2D:BS,LowMargin:Bd,HighMargin:BY,FixedMargin:Bj,StartIndex:0};var Bf,Be=this.mCategoryOption.mLabelStyle,Bc=600,Bb=800,Bg=this.mLabelInterval;if(BZ){Bf=BV.getUniformAxisLabelRotateMode("x");if(Be!==BI&&Bg!==1&&this.mPlotGroupCount<=Bc){if(Bf===J.Automatic||Bf===J.Rotate90){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;}AN.call(this,1);BU.StartIndex=(Bg>=3)?A5.call(this):0;Bi=BC.call(this,BU);if(Be===C&&Bg>=3&&BV.GetGraphType()===Y.DssGraphTypeGridChart){BU.StartIndex=A5.call(this);Bi=BC.call(this,BU);}}}else{if(Bg>1&&this.mGroupCount>1){var Bh=this.checkShownLabelCount();if(Bh>=2){}else{if(Bh===1){var BW=true,BX=A5.call(this),BT=this.mLabelList[BX],BR=this.mShownLabelList[0],Ba=BR&&BT;if(Ba){BW=BR.mTripleId.mGroupId!==BT.mTripleId.mGroupId;}if(Ba&&BW){if(j.call(this,BT)){BR.mIsShown=false;BT.mIsShown=true;this.mShownLabelList=[];this.mShownLabelList.push(BT);BW=false;}}if(BW){BU.StartIndex=A5.call(this);Bi=BC.call(this,BU);}}}}}return Bi;}function b(BZ,BW,BV){var Ba=this.mLabelList,BY=[],BS,BU,Bc,BR,BT=V.call(this),Bb=this.mAxisInfo.mAxisDirection===Ax.AD_X,BX;BL.ResetRect(this.mDeviceDataArea);k.call(this,BY);Bc=A6.call(this,Bb);if(Bc.Skip&&BT){if(BT){this.restoreLabels();if(this.mLowTrim!==undefined&&this.mHighTrim!==undefined){if(this.mLowTrim>=0&&this.mHighTrim>=0){AB.call(this,this.mLowTrim,this.mHighTrim);}}}return Bc.Space;}o.call(this);BS=d.call(this,Bb,BL,BZ,BW,BV);BX=BY.length;for(BU=0;BU<BX;++BU){BR=BS;if(AP.call(this,BY[BU])){BR+=this.mTickLength;}BD.call(this,BY[BU],this.mDeviceDataArea,BR);}if(this.HasLabelsOnBothSides()){BX=Ba.length;for(BU=0;BU<BX;++BU){Ba.push(Ba[BU]);}}this.mLabelSubIndex=this.mLabelList.length/(this.HasLabelsOnBothSides()?2:1);if(this.hasLabelCreated){q.call(this);}}function AV(BR){switch(this.mAxisInfo.mAxisDirection){case Ax.AD_X:switch(BR){case g.ALL_BOTTOM:if(this.mDepthDirection>0&&this.mDepthDirection<180){return true;}break;case g.ALL_TOP:if(this.mDepthDirection>=180&&this.mDepthDirection<360){return true;}break;}break;case Ax.AD_Y:switch(BR){case g.ALL_LEFT:if(!(this.mDepthDirection>=90&&this.mDepthDirection<270)){return true;}break;case g.ALL_RIGHT:if(this.mDepthDirection>=90&&this.mDepthDirection<270){return true;}break;}break;}return false;}function A1(BR,BU){var BT,BS=this.mChartContextPtr.GetGraphMatrixContext(),BV=AP.call(this,BR)?this.mTickLength:0;if(this.mIsGraphMatrix){BV+=BS.getPadding(Ak.kCategoricalLabelToTick);}else{BV+=this.mLevelSpace*BU;}for(BT=0;BT+1<BU;++BT){BV+=this.mLevelSize[BT];}return BV;}function Al(){var BW,Be,BV,BX,Ba,BS,Bb,Bg=1,Bf=2,BZ=this.mShownLabelList,BR=BZ.length,BU=this.mChartContextPtr,BY=BU.getUniformAxisContext(),Bd=this.mIsUniformAxis,Bc=this.mCategoryOption,BT=BY.CategoryAxis.X;x.Reset(0,0);AZ.Reset(0,0);for(BW=0;BW<BR;++BW){Be=z.call(this,BW);BV=BZ[BW];if(!(BV.mIsShown)){continue;}BV.mIsOnScreen=r.call(this,BV);if(!BV.mIsOnScreen){continue;}BX=this.getGroupMiddlePos(BV.mTripleId.mGroupId,true);BS=Bg;if(Bc.mLabelStyle===G.CLS_STAGGER&&!(BU.mIsTimeSeriesChart)){Bb=(BW>=this.mLabelSubIndex)?(BW-this.mLabelSubIndex):BW;if(Bb>=Math.floor((this.mLabelSubIndex+1)/2)){BS=Bf;}if(Bd){if(BT.StartRow&&BT.StartRow===Bf){BS=Bf+Bg-BS;}}}Ba=A1.call(this,Be,BS);x.x=0;x.y=1;AZ.x=BX;AZ.y=l.call(this,Be,Ba,x);if(this.IsVerticalAxis()){AZ.swap();}if(this.mUseDepth){if(!AV.call(this,Be)){AZ.x+=this.mDepthOffset.x;AZ.y+=this.mDepthOffset.y;}}this.MoveLabel(BV,AZ,x,0);}}function Aq(BT,BV,BR){var BS=this.mAxisCross?this.getGroupMiddlePos(BT):(this.getGroupStartPos(BT)+0.5),BU=this.mAxisCross?this.getGroupMiddlePos(BT+1):(this.getGroupStartPos(BT)+this.getGroupSize()+0.5);BV.y=this.mDeviceDataArea.y;BR.y=this.mDeviceDataArea.y;if(this.IsVerticalAxis()){BV.x=this.mDeviceDataArea.x+this.mDeviceDataArea.width;BR.x=BV.x;BV.y=BS;BR.y=BU;}else{BV.y=this.mDeviceDataArea.y;BR.y=BV.y;BV.x=BS;BR.x=BU;}}function AU(BS,BZ,BY,BW,BT,BX){var BU=this.mChartContextPtr.getUtiliy().tripleId,BV,BR=[];BV=BU.create(BS,this.mTripleId.mSeriesId,M());this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,BY,this.mTickLength,BW,BT,BR);this.GenerateOneLineObject(BV,BR,BX);if(this.HasTwoGridLineParts(BY)){BR.splice(0,BR.length);this.GetOneGridLine(this.IsVerticalAxis()?g.ALL_RIGHT:g.ALL_TOP,BY,this.mTickLength,BW,BT,BR);this.GenerateOneLineObject(BV,BR,BX);}}function As(){var BV=At.gAxisObjects[this.getIndex()].mMajorId,BU=[],BS=[],BT,BR;n.call(this,BU,BS);this.InitObjectSet(BV,Y.GOT_MAJOR_GRID);BR=BU.length;for(BT=0;BT<BR;++BT){AU.call(this,BF.DssGraphO1Major,BT,this.mMajorGrid.mGridStyle,BU[BT],BS[BT],this.mpMajorGridSet);}}function A0(){var BS=[],BV=[],BU=At.gAxisObjects[this.getIndex()].mMinorId,BT,BR;w.call(this,BS,BV);this.InitObjectSet(BU,Y.GOT_MINOR_GRID);BR=BS.length;for(BT=0;BT<BR;++BT){AU.call(this,BF.DssGraphO1Minor,BT,this.mMinorGrid.mGridStyle,BS[BT],BV[BT],this.mpMinorGridSet);}}function t(BR){return BR?this.mPlotGroupCount:this.mGroupCount;}function AI(BR){return BR?this.mPlotGroupSize:this.mGroupSize;}mstrmojo.chart.CategoryAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.CategoryAxis",mLevelSpace:4,mLevelSize:null,mShownLabelList:null,mGroupOrder:null,mLabelSubIndex:0,mCategoryOption:null,mAxisCross:false,mGroupSize:-1,mPlotGroupSize:-1,mPlotGroupCount:0,mGroupCount:1,mDatasetPtr:null,mPaddingOnSide:-1,mWordWrap:true,screenWindow:null,init:function AT(BR){this._super(BR);if(this.mChartContextPtr.mIsGraphMatrix){this.mLevelSpace=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ak.kBetweenLabelLines);}this.mLevelSize=[];this.mShownLabelList=[];this.mGroupOrder=[];this.mCategoryOption={mLabelStyle:G.CLS_AUTOMATIC,mManualSkip:0};if(this.mChartContextPtr.mIsUniformAxisMode){this.mIsShown=this.mIsUniformAxis;}if(BR.AxisDirection===Ax.AD_X){this.mAxisInfo.mAxisLabelsLocation=g.ALL_BOTTOM;}if(BR.AxisDirection===Ax.AD_Y){this.mAxisInfo.mAxisLabelsLocation=g.ALL_LEFT;}this.mDatasetPtr=null;this.mWordWrap=false;this.LoadProperties();},SetDataset:function AD(BR){this.mGroupSize=-1;var BS=this.mDatasetPtr=BR;if(BS!==null){if(BM.call(this)){this.mGroupCount=BS.GetSeriesCount();}else{this.mGroupCount=BS.GetGroupCount();}this.mPlotGroupCount=this.mGroupCount;}},getSubGroupMiddlePos:function Az(BV,BU,BS,BW){if(BS<=0){return 0;}BW=BW||false;if(BS===1){return this.getGroupMiddlePos(BV);}var BR=this.getGroupSize(BW),BT=this.getGroupStartPos(BV,BW);BT+=BR/(2*BS);return BT+BU*(BR/BS);},getGroupMiddlePos:function BB(BR,BS){BS=(BS!==undefined)?BS:false;return Math.round(this.getGroupStartPos(BR,BS)+this.getGroupSize()/2);},getFloatGroupMiddlePos:function BN(BR,BS){BS=(BS!==undefined)?BS:false;return this.getGroupStartPos(BR,BS)+this.getGroupSize()/2;},getGroupStartPos:function f(BS,BT){BT=(BT!==undefined)?BT:false;var BR=0;switch(this.mAxisInfo.mAxisDirection){case Ax.AD_X:BR=this.mDeviceDataArea.x+AM.call(this);break;case Ax.AD_Y:BR=this.mDeviceDataArea.y+AM.call(this);break;}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mAxisCross){BR-=this.getGroupSize(BT)*0.5;}}else{if(this.mAxisCross){BR-=this.getGroupSize(BT)*0.5;}}return BR+this.getGroupSize(BT)*BS;},getGroupSize:function T(BS){BS=(BS!==undefined)?BS:false;var BR=AI.call(this,BS);if(BR!==-1){return BR;}BR=0;var BT=t.call(this,BS);if(this.mDatasetPtr!==null){if(!this.mAxisCross){if(BT===0){BT=1;}BR=P.call(this)/BT;}else{if(BT>1){BR=P.call(this)/(BT-1);}else{BR=P.call(this)*2;}}}return BR;},GenerateMapAndList:function AA(){var BW,BY,BT=this.mGraphObjectList,BV=this.mpAxisLabelSet,BU=this.mLabelList,BR;if(this.mIsShown===false){return ;}Aj.call(this);if(BU.length!==0){Al.call(this);if(this.mChartContextPtr.mIsGraphMatrix){var BS=[],BX=At.gAxisObjects[this.getIndex()].mLabelId;for(BW=0;BW<BT.length;BW++){if(BT[BW]&&BT[BW].mTripleId.mObjectId!==BX.mObjectId){BS.push(BT[BW]);}}BT=this.mGraphObjectList=[];BV.ClearCollection();BR=BU.length;for(BW=0;BW<BR;++BW){if(BU[BW]){BT.push(BU[BW]);BV.AddGraphObject(BU[BW]);}}for(BW=0;BW<BS.length;BW++){BT.push(BS[BW]);}}else{BR=BU.length;for(BW=0;BW<BR;++BW){if(BU[BW]){BT.push(BU[BW]);BV.AddGraphObject(BU[BW]);}}}}if(this.mAxisInfo.mShowAxisTitle){BY=this.getAdjustedTitleArea();this.UpdateTitleLocation(BY);}},getAdjustedTitleArea:function E(){var BU=new At.Rect2D({Rect2D:this.mDeviceDataArea}),BT,BS,BR=this.mLevelSize.length;if(this.IsVerticalAxis()){BS=g.ALL_LEFT;if(BS===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){BU.x-=AP.call(this,BS)?this.mTickLength:0;for(BT=0;BT<BR;++BT){BU.x-=this.mLevelSpace;BU.x-=this.mLevelSize[BT];}if(!AV.call(this,BS)){BU.x+=this.mDepthOffset.x;}}}else{BS=g.ALL_BOTTOM;if(BS===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){BU.height+=AP.call(this,BS)?this.mTickLength:0;for(BT=0;BT<BR;++BT){BU.height+=this.mLevelSpace;BU.height+=this.mLevelSize[BT];}if(!AV.call(this,BS)){BU.height+=this.mDepthOffset.y;}}}return BU;},generateInterlacedSection:function AY(){var BV=new At.TripleId({ObjectId:this.GetInterlacedGridId(),SeriesId:AS,GroupId:AQ}),BS,BR=[],BT,BU=this.mGroupCount;this.InitObjectSet(BV,Y.GOT_INTERLACED_GRID);for(BS=0;BS<BU;BS+=2){if(this.mAxisCross&&BS===BU-1){continue;}BR.splice(0,BR.length);this.getInterlacedSectionPolygon(BS,BR);BT=new At.PolygonObject({TripleId:BV,GraphObjectManager:this,Polygon:BR,GraphCollectionObject:this.mpInterlacedGridSet});this.mpInterlacedGridSet.AddGraphObject(BT);this.mManagerGraphObjectList.push(BT);}},getInterlacedSectionPolygon:function s(BW,Ba){var BX=this.mUseDepth,BU=this.mDeviceDataArea,BV=this.mDepthDirection,BR=this.mDepthOffset,BZ=new At.Point2D(),BY=new At.Point2D(),BT,BS;Aq.call(this,BW,BZ,BY);BT=new At.Point2D({Point2D:BZ});BS=new At.Point2D({Point2D:BY});if(!this.IsVerticalAxis()){BT.y=BU.GetBottomLeft().y;BS.y=BT.y;if(BX&&BV>=180&&BV<360){BT.swapPoints(BZ);BS.swapPoints(BY);}}else{BT.x=BU.x;BS.x=BT.x;if(BX&&BV>=90&&BV<270){BT.swapPoints(BZ);BS.swapPoints(BY);}}if(BX){Ba.push(BT);Ba.push(BS);Ba.push(BS.Shifted(BR));Ba.push(BY.Shifted(BR));Ba.push(BZ.Shifted(BR));Ba.push(BT.Shifted(BR));}else{Ba.push(BT);Ba.push(BS);Ba.push(BY);Ba.push(BZ);}},AdjustTitleArea:function Ar(BR){if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(BR);}},AdjustDataArea:function A(BR,BT,BV,BX){var BW;if(!this.mIsShown){return ;}if(BT===undefined){BT=1000;}if(BV===undefined){BV=1000;}if(BX===undefined){BX=false;}if(this.mUseDepth){this.ReserveDepthAxisLine(BR);}if(this.mDatasetPtr!==null&&this.mAxisInfo.mShowAxisLabels){if(this.mUseDepth){var BS=this.TrimMarginsForDepthAxis(BT,BV);BT=BS.LowMargin;BV=BS.HighMargin;BV=BS.HighMargin;}BW=At.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(BW,Y.GOT_AXIS_LABEL);if(this.mChartContextPtr.mIsGraphMatrix&&this.mAxisInfo.mAxisDirection===Ax.AD_Y){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Normal;}this.SetDeviceDataArea(BR);b.call(this,BT,BV,BX);var BU=this.mDeviceDataArea;BU.width=Math.max(BU.width,0);BU.height=Math.max(BU.height,0);BR.ResetRect(BU);}},generateGridsByArea:function y(BR){if(BR){if(this.mMajorGrid.mShowGridLines){As.call(this);}if(this.mMinorGrid.mShowGridLines){A0.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){this.generateInterlacedSection();}}},getMinMaxLogicalCoord:function Ap(){if(this.mAxisCross){return{min:1,max:(this.mGroupCount>1)?this.mGroupCount:2};}return{min:0.5,max:this.mGroupCount+0.5};},GenerateGridsOnMiddleWall:function N(BS,BR){var BT=this.mDeviceDataArea;this.mDeviceDataArea=BS;p.call(this);O.call(this);Ah.call(this);if(!this.mManagerGraphObjectList.empty()){this.MoveGraphObjectList(BR);}this.mDeviceDataArea=BT;},getTotalGroupCount:function X(){var BS=this.mDatasetPtr.GetSliceFlag(),BR;this.mDatasetPtr.EnableSlices(false);BR=this.mDatasetPtr.GetGroupCount();this.mDatasetPtr.EnableSlices(BS);return BR;},LoadProperties:function Ad(){var BU,BS;this._super();if(!this.mIsShown){return ;}var BT=this.mChartContextPtr,BR=this.mCategoryOption;if(!BT.mIsGraphMatrix){BU=new At.TripleId({ObjectId:this.mTripleId.mObjectId});BS=BT.GetProperty(BE.DssGraphAxisAutoFit,BU);if(BS!==null&&BS!==undefined){if(BS!==false){BR.mLabelStyle=G.CLS_NORMAL;}else{BS=BT.GetProperty(BE.DssGraphAxisStagger,BU);if(BS!==null&&BS!==undefined){if(BS!==false){BR.mLabelStyle=G.CLS_STAGGER;}else{BR.mLabelStyle=G.CLS_MANUAL;BS=BT.GetProperty(BE.DssGraphAxisScaleFreq,BU);if(BS){BR.mManualSkip=BS;if(BR.mManualSkip<1){BR.mManualSkip=1;}}}}}}switch(BT.GetGraphMajorType()){case An.GMT_RADAR:case An.GMT_3D_CATEGORY:return ;case An.GMT_CATEGORY:if(BT.isParetoChart()){return ;}break;default:break;}}},TrimAxisPadding:function R(BV){var BW=this.mChartContextPtr,BS=BW.getUniformAxisContext(),BU=BS.CategoryAxis;if(BW.mIsGraphMatrix===false){return ;}var BT,BR="X";if(this.IsVerticalAxis()){BR="Y";}if(this.mIsUniformAxis===false){BT=BU[BR];this.mHighTrim=BT.Trims[1]||0;this.mLowTrim=BT.Trims[0]||0;}u.call(this,this.mHighTrim,this.mLowTrim,BV);},ResetAxisPadding:function D(){this.mPaddingOnSide=-1;},getStatus:function K(){var BU=0,BR=1,BV=2,BT=this.getLabelRotation(),BS=this.mLabelInterval;if(BT===J.Rotate90){return BV;}if(BS===1){return BU;}if(BS===2&&this.mCategoryOption.mLabelStyle===G.CLS_STAGGER){return BR;}return BV;},getGroupSlotAt:function A7(BS){var BT=this.getGroupStartPos(0),BR=this.getGroupSize();return Math.ceil((BS-BT)/BR)-1;},getGridLinePosition:function A2(){return[];},getBandings:function S(){var BY=[],BX=0,BU=0,BT,BW=this.mGroupCount,BV=this.mChartContextPtr,BS;if(BW===1){if(this.IsVerticalAxis()){BU=BV.mGraphHeight;}else{BU=BV.mGraphWidth;}BY.push({Start:BX,Size:BU});}else{var BR=this.getGroupSize(true);for(BS=0;BS<BW;++BS){if(BS===0){BX=0;BU=this.getGroupStartPos(1,true);}else{if(BS===BW-1){if(this.IsVerticalAxis()){BU=BV.mGraphHeight;}else{BU=BV.mGraphWidth;}BT=BY[BS-1];BX=BT.Start+BT.Size;BU=BU-BX;}else{BT=BY[BS-1];BX=BT.Start+BT.Size;BU=BR;}}BY.push({Start:BX,Size:BU});}}return BY;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GridMap","TextObject","ChartContext","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixDataLabelPosition");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumShapeType");var I=mstrmojo.chart,G=I.ChartConstants,D=I.model,E=D.enums,M=I.enums,H=E.EnumDSSGraphMarkerShape,J=M.EnumGraphMatrixDataLabelPosition,C=E.EnumShapeType,L={};function A(){var U=this.ChartContext,g=U.IsPieChart(),c=(U.IsBubbleChart()||U.IsScatterChart()),a=this.SinglePointObjects.length,Y,d=new I.Rect2D(),b,f=this.GridMap,X=this.PolyLineObjects,R=this.PolygonObjects,V=this.RectangleObjects,e=this.DataAreaFrame,W=this.CirclePieObjects;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);b=this.SinglePointObjects[Y].GetBoundingRect();if(U.RectangleIntersection(b,e,d)){f.UpdateMatrixRect(d);}}a=X.length;for(Y=0;Y<a;++Y){f.UpdateMatrixPolyLine(X[Y]);}a=R.length;var T=document.createElement("canvas");T.width=this.ChartContext.mGraphWidth;T.height=this.ChartContext.mGraphHeight;for(Y=0;Y<a;++Y){f.UpdateMatrixPolygonWithCanvas(R[Y],T);}a=V.length;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);if(U.RectangleIntersection(V[Y],e,d)){f.UpdateMatrixRect(d);if(c){f.UpdateMatrixOccupyObject(d,V[Y]);}}}a=W.length;for(Y=0;Y<a;++Y){var Q=W[Y].mCenter,Z=W[Y].mRadius,S=new I.Rect2D({x:Q.x-Z,y:Q.y-Z,height:Z*2,width:Z*2});f.UpdateMatrixCircle(Q,Z,true);if(g){f.UpdateMatrixOccupyCircleObject(S,Q,Z);}}}function K(S,b){var R=this.ChartContext,Y=R.IsLineChart(),T=R.IsAreaChart(),Z=(R.IsBubbleChart()||R.IsScatterChart()),a=false,V=R.GetGraphMatrixContext(),X=S,W,U,Q=b.HostMarkerPoint;W=V.mMarkerShape;if(W===H.DssGraphMarkerShapeCircle||W===H.DssGraphMarkerShapeRectangle||W===H.DssGraphMarkerShapeSquare){a=true;}if((Y&&!a)||T){if(S===J._BOTTOM){X=J._TOP;}else{if(S===J._TOP){X=J._BOTTOM;}}}else{if(Z){U=new I.Rect2D({x:0,y:0,width:R.mGraphWidth,height:R.mGraphHeight});if(S===J._BOTTOM){if(Q.y<=U.height/2){X=J._TOP;}else{X=J._BOTTOM;}}else{if(S===J._TOP){if(Q.y<=U.height/2){X=J._BOTTOM;}else{X=J._TOP;}}}}}return X;}function B(Y,X,Q){var R=Y.HostMarkerPoint,V=Y.CenterXOffset,S=Y.CenterYOffset,U=R.x,T=R.y,W=Y.Label.GetBoundingRect(true);switch(X){case J._BOTTOM:T+=S+Q+W.height*0.5;break;case J._TOP:T-=S+Q+W.height*0.5;break;case J._LEFT:U-=V+Q+W.width*0.5;break;case J._RIGHT:U+=V+Q+W.width*0.5;break;default:break;}Y.Label.MoveToCenter(U,T);}function F(Q,R,S){if(Q.x+Q.width+S<=R.x||Q.x>=R.x+R.width+S){return true;}return(Q.y+Q.height+S<=R.y||Q.y>=R.y+R.height+S);}mstrmojo.chart.DataLabelManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataLabelManager",GridMap:null,DataAreaFrame:null,ChartContext:null,seriesOptions:[],SinglePointObjects:[],PolygonObjects:[],PolyLineObjects:[],RectangleObjects:[],CirclePieObjects:[],init:function N(R){var T=this.ChartContext,Q,S;if(R&&R.DataArea){this.DataAreaFrame=R.DataArea;L.height=2;L.width=2;if(T!==null&&T!==undefined){Q=T.GetGraphMatrixContext();S=Q.getPadding(G.kDataLabel);}this.GridMap=new I.GridMap({Rect:this.DataAreaFrame,Unit:L,dataLabelPadding:S});}this.allowOverlap=(T&&T.allowOverlapBetweenDatalabels())||false;this.SinglePointObjects=[];this.PolygonObjects=[];this.PolyLineObjects=[];this.RectangleObjects=[];this.CirclePieObjects=[];this.seriesOptions=[];},PlaceDataLabels:function P(h,n,Q){var Y=false,a=this.ChartContext,w=a.GetGraphMatrixContext(),d=a.IsLineChart(),V=a.IsAreaChart(),W=a.IsPieChart(),f=(a.IsBubbleChart()||a.IsScatterChart()),z=w.isCombinationChart(),x,v,t,r,X,q,y,Z,o=new I.Rect2D(),U,T,u,c,S,g,l,e,s,b=w.getPadding(G.kDataLabel);this.allowOverlap=(a&&a.allowOverlapBetweenDatalabels())||false;this.GridMap.populate();s=this.GridMap;Z=w.mMarkerShape;Q=Q||!(a.isCombinationChart()||a.IsDualAxis());if(Z===H.DssGraphMarkerShapeCircle||Z===H.DssGraphMarkerShapeRectangle||Z===H.DssGraphMarkerShapeSquare){Y=true;}A.call(this);x=h.length;for(v=0;v<x;++v){var R=h[v],p=R.isValid;if(!p){continue;}if(z){T=R.SeriesId;u=R.SeriesInfo;c=this.seriesOptions[u];if(c){S=c.mRealSereisType;if(S===C._LINE||S===C._GENERIC){d=true;}else{if(S===C._CIRCLE||S===C._SQUARE||S===C._RECTANGLE){d=true;Y=true;}else{if(S===C._AREA){V=true;}else{if(S===C._PIE){W=true;}}}}}}y=this.allowOverlap;for(t=J._BOTTOM;t<=J._RIGHT;++t){if(W&&t>0){break;}X=J._BOTTOM;if(!W){X=K.call(this,t,R);B.call(this,R,X,b);}U=R.Label.GetBoundingRectNoRotation(true);q=this.DataAreaFrame;if(this.allowOverlap===false){y=s.IsFitPaddingWithBorder(U,q);if(!y){continue;}if(d&&Y){y=s.IsAccomdatableConsiderLocation(U,X);}else{if((d&&!W)||V){y=s.IsAccomdatableConsiderLabelPaddingOnly(U,true);}else{if(f){y=s.IsAccomdatableConsiderAccuDistPaddingRect(U);}else{if(W){y=s.IsAccomdatableConsiderAccuDistPaddingCircle(R.HostMarkerPoint,R.HostMarkerBound.width/2,U);}}}}if(!y){continue;}g=(n!==undefined&&n!==null)?n.length:0;for(r=0;r<g;++r){l=n[r];if(l.mIsShown){e=l.GetBoundingRect(true);y=F.call(this,U,e,b);if(!y){break;}}}}if(y){R.display=true;R.DataLabelLocation=X;o.Reset(0,0,0,0);if(a.RectangleIntersection(U,this.DataAreaFrame,o)){s.UpdateMatrixDataLabelMarker(true,o);if(f||W){s.UpdateMatrixOccupyObject(o,U);}}R.Label.mIsShown=true;if(n!==undefined&&n!==null){n.push(R.Label);}break;}}if(!y){R.Label.mIsShown=false;}}if(Q){this.GridMap.destroy();}return true;},UpdateMatrixDataLabel:function O(Q){return this.GridMap.UpdateMatrixDataLabelMarker(true,Q);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","TrendLineObject","Rect2D","TripleId","TrendLineObject","ChartContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumValueAxis","EnumTrendLineIndex","EnumAnchorPoint","EnumCollectionType","EnumGraphMajorType","EnumFontRotation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var Z=mstrmojo.chart,V=Z.enums,c=V.EnumCollectionType,C=V.EnumGraphMajorType,X=V.EnumValueAxis,J=V.EnumAnchorPoint,d=Z.gNullTripleId,B=Z.gNullObjectId,R=mstrmojo.chart.model,e=R.enums,I=e.EnumDSSGraphType,K=e.EnumDSSGraphMarkerShape,L=e.EnumDSSGraphProperty,a=e.EnumDSSGraphDataTextPosition,M=e.EnumDSSGraphObject;mstrmojo.chart.Plot=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Plot",mDatasetPtr:null,mLegendPtr:null,mSeriesId:null,mDataArea:null,mTrendLines:null,mPostTrendLineObjects:null,mHasSizeBy:false,mHasColorBy:false,mPartialRendering:false,mClippedElementSize:null,shownDataLabels:[],shownRefLabels:[],dataLabelManager:null,axisOriginLabels:[],DPCount:0,seriesDPCount:[],init:function W(h){this._super(h);this.mSeriesId=[];this.mTrendLines=[[],[]];this.mPostTrendLineObjects=[];var j=this.mChartContextPtr,g=j.GetGraphMatrixContext();this.mHasSizeBy=g.mHasSizeBy;this.mHasColorBy=g.mHasColorBy;this.mPartialRendering=j.mPartialRendering;this.mClippedElementSize={};this.shownDataLabels=[];this.shownRefLabels=[];this.dataLabelManager=null;this.axisOriginLabels=[];if(h.Area){this.mDataArea=new Z.Rect2D({Rect2D:h.Area});}this.DPCount=0;this.seriesDPCount=[];},Draw:function T(g){var h=false;if(g&&g.Skip){g.Skip--;h=true;}this._super();if(!h){this.DrawTrendLinesAndEquationsInArea(this.mDataArea,false);this.DrawTrendLinesAndEquationsInArea(this.mDataArea,true);this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function b(){var g=this.mDataArea;this.DrawTrendLinesAndEquationsInArea(g,false);this.DrawTrendLinesAndEquationsInArea(g,true);},OnRectangleSelection:function H(j,h,g){g=g||0;return h;},SetDataArea:function F(g){if(this.mDataArea===null){this.mDataArea=new Z.Rect2D({Rect2D:g});}else{this.mDataArea.ResetRect(g);}},MoveLabel:function Y(o,r,v,j,g,n){var t,l,q,s,k,u,h,p;if(o===null){return ;}t=o.GetBoundingRect();l=t.width/2;q=t.height/2;s=r;k=v;if(j){u=s;s=k;k=u;}p=s;if(n===a.DssGraphDTPositionOutMin||n===a.DssGraphDTPositionInMin){p=k;}h=j?-1:1;switch(n){case a.DssGraphDTPositionCenter:p=s.MiddleTo(k);break;case a.DssGraphDTPositionInMin:case a.DssGraphDTPositionOutMax:if(g){p.y-=q*h;}else{p.x+=l*h;}break;case a.DssGraphDTPositionOutMin:case a.DssGraphDTPositionInMax:if(g){p.y+=q*h;}else{p.x-=l*h;}break;default:break;}o.MoveTo(p.x,p.y,J.CENTER);},AddLegendMarkerToCollection:function G(h,s,k,o,u,r,p){var j=this.mChartContextPtr,t,l,n,g,q;if(this.mLegendPtr===null||s===null){return ;}if(j.mIsGraphMatrix){return ;}k=k||false;u=u||K.DssGraphMarkerShapeRectangle;p=p||false;if(o===undefined){o=true;}if(r===undefined){r=true;}g=j.mGraphType;t=new Z.TripleId({ObjectId:M.DssGraphLegendMarker,SeriesId:h});l=this.mLegendPtr.GetGraphObject(t);if(l){if(k){n=l;s.AddGraphObject(l,false);if(r&&g!==I.DssGraphTypePareto_Percent){t.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h,p);}t.mObjectId=M.DssGraphRiser;n.SetFormatLine(j.GetFormatLine(t,c.CT_NO_COLLECTION));n.SetFormatFill(j.GetFormatFill(t,c.CT_DEPTH_LINE_OR_LINE_MARKER));n.mIsShown=o;if(o){n.SetMarkerShape(u);}}else{q=j.GetGraphMajorType();s.AddGraphObject(l);if(q===C.GMT_BUBBLE){if(r){t.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h);}if(o){n=l;n.SetMarkerShape(u);}}if(g===I.DssGraphTypePareto_Percent||q===C.GMT_GAUGE){if(o){n=l;n.SetMarkerShape(u);}}if(q===C.GMT_STOCK){if(r){t.mObjectId=M.DssGraphRiser;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(j.GetFormatLine(t,c.CT_LINE),h,p);}if(o){n=l;n.SetMarkerShape(u);}}}}},CreateTrendLine:function P(r,q,t,j,l,k,g,o,p,h,n,s){},AdjustTrendLineEquation:function N(h,g){},DrawTrendLinesAndEquationsInArea:function U(g,h){var n=this.mChartContextPtr,k=h?this.mTrendLines[1]:this.mTrendLines[0],j;if(k.length===0){return ;}n.saveState();n.DrawRectangle(g,true);n.Clip();for(j=0;j<k.length;++j){k[j].Draw();}n.RestoreState();for(j=0;j<k.length;++j){var l=k[j].mTextPtr;if(l!==null){l.Draw();}}},DrawPostTrendLineObjects:function f(){var j=this.mPostTrendLineObjects,g=j.length,h;for(h=0;h<g;++h){j[h].Draw();}},LoadTrendLineProperties:function D(j,h){var n=this.mChartContextPtr;if(n.mIsGraphMatrix||!!h){return ;}if(n.mIsGraphMatrix){var g=this.mDatasetPtr.GetTrendLinePropertiesBySeries(j);if(g){h.mRegressionType=g.RegressionType||h.mRegressionType;if(g.Order!==null&&g.Order!==undefined){h.mOrder=g.Order;}if(g.Period!==null&&g.Period!==undefined){h.mPeriod=g.Period;}h.mShowCoefficients=g.ShowCoefficients||h.mShowCoefficients;h.mShowEquation=g.ShowEquation||h.mShowEquation;h.mUserSeriesGraphColor=g.UserSeriesGraphColor||h.mUserSeriesGraphColor;}}else{var k,l=new Z.TripleId({ObjectId:M.DssGraphRiser,SeriesId:j});k=n.GetProperty(L.DssGraphSDRegressionType,l);if(k){h.mRegressionType=k;}k=n.GetProperty(L.DssGraphSDPolyFactor,l);if(k){h.mOrder=k;}k=n.GetProperty(L.DssGraphSDMOVAFactor,l);if(k){h.mPeriod=k;}k=n.GetProperty(L.DssGraphShowSDLinrCorr,l);if(k){h.mShowCoefficients=k;}k=n.GetProperty(L.DssGraphShowSDLinrFormula,l);if(k){h.mShowEquation=k;}l.mObjectId=B;k=n.GetProperty(L.DssGraphCurveColorAsSeries,l);if(k){h.mUserSeriesGraphColor=k;}}},LoadValueAxisInfo:function S(k,g){var o=this.mChartContextPtr,j=this.mSeriesId,h,n,l;if(g){if(o.mIsGraphMatrix){l=this.mDatasetPtr.GetValueAxisBySeries(j[k]);}else{h=o.GetProperty(L.DssGraph2DSplitYAutomatic,d);if(h===null||h===undefined){l=(k%2===0)?X.VA_Y1:X.VA_Y2;}else{n=new Z.TripleId({ObjectId:L.DssGraphRiser,SeriesId:j[k]});h=o.GetProperty(L.DssGraph2DSDSplitY,n);if(h){l=h?X.VA_Y2:X.VA_Y1;}}}}else{l=X.VA_Y1;}return l;},GetDataset:function Q(){return this.mDatasetPtr;},SetDataset:function O(g){this.mDatasetPtr=g;},AddSeries:function E(g){this.mSeriesId.push(g);},GetMaxElementOffsetClippedByBoundary:function A(h,j){var g={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},k=this.mChartContextPtr;if(k.IsBarChart()||k.mGraphType===I.DssGraphTypeGridChart){return g;}if(k.IsLineChart()||k.IsAreaChart()){return g;}return g;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Plot","CategoryAxis");var B=mstrmojo.chart;mstrmojo.chart.GridBasePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.GridBasePlot",mHasXAxis:false,mHasYAxis:false,mMarkerShape:0,mXaxis:null,mYaxis:null,mDataArea:null,init:function E(F){this._super(F);this.mMarkerShape=4;this.mHasXAxis=true;this.mHasYAxis=true;this.mDataArea=new B.Rect2D();},AssignSeries:function A(F){},AssignAxis:function D(G,F){if(F){this.mYAxis=G;}else{this.mXAxis=G;}},AssignDataArea:function C(F,G){this.mDataArea.ResetRect(F);if(G){this.mYAxis.SetDeviceDataArea(F);}else{this.mXAxis.SetDeviceDataArea(F);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","NumberObject","Rect2D","TextObject");var A=mstrmojo.chart;mstrmojo.chart.CategoryPlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.CategoryPlot",createRiserLabel:function C(G,F,K,H,E){var L,D=this.realComboChart;if((K===null&&H==="")||E===null){return null;}if(K){L=new A.NumberObject({TripleId:G,GraphObjectManager:this,Number:F,NumberFormat:K,GraphCollectionObject:E,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr,IsFinal:(H==="")});if(L===null){return null;}if(H&&H!==""){L.AddTextBeforeNumber(H);}if(D){L.strokeBBox();}this.AddToMap(L);E.AddGraphObject(L);return L;}var J=new A.Rect2D({x:0,y:0,width:0,height:0}),I=new A.TextObject({TripleId:G,GraphObjectManager:this,rect:J,GraphCollectionObject:E,clientDrag:true});if(I!==null){I.SetText(H);if(D){I.strokeBBox();}this.AddToMap(I);E.AddGraphObject(I);return I;}return null;},ReserveAreaForDataLabels:function B(D){}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","TripleId","Plot","GridMap","LabelInfo","TextObject","StraightLineObject","PolyLineObject","NumberObject","GraphCollectionObject","MarkerObject","DataLabelManager","GMDataLabelInfo","ChartConstants","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumCollectionType","EnumAnchorPoint","EnumImageUsage","EnumFontRotation","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphDataTextPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.VisUtility");var Ap=mstrmojo.chart;var Aq=Ap.gModuleMain,Ak=Ap.ChartConstants,AP=mstrmojo.VisUtility,R=Ap.enums,AM=R.EnumCollectionType,Al=R.EnumGraphMajorType,A2=R.EnumAnchorPoint,M=R.EnumFontRotation,Aj=R.EnumGraphMatrixMarkerTypeInChart,d=R.EnumGraphMatrixElementSizeMode,AO=R.EnumImageUsage,s=R.EnumGraphMatrixPiePlotType,n=Ap.common,AD=Ap.gNullTripleId,As=Ap.gNullGroupId,Ah=mstrmojo.chart.model,AT=Ah.enums,A5=AT.EnumDSSGraphProperty,Q=AT.EnumDSSGraphRegressionType,Ag=AT.EnumDSSGraphDataTextPosition,Ae=AT.EnumDSSGraphDataTextShowType,A1=AT.EnumDSSGraphDataTextPosition,A6=AT.EnumDSSGraphObject,Au=AT.EnumDSSExtraGraphProperty,c=AT.EnumShapeType,A9=AT.EnumDSSGraphMarkerShape;var F=-1,A8=0.7,AJ=2,J=3,AB=1,z=2,y=3,w=4,v=5,u=6,b=1,A4=1,O=2,A3=3,L=4;var Af=new Ap.Point2D();function k(BG,BF){var BH;if(BG.cannotFitVertically===true&&BF.cannotFitVertically===false){return 1;}if(BG.cannotFitVertically===false&&BF.cannotFitVertically===true){return -1;}if(BG.cannotFitHorizontally===true&&BF.cannotFitHorizontally===false){return 1;}if(BG.cannotFitHorizontally===false&&BF.cannotFitHorizontally===true){return -1;}BH=BG.overlapRefLabelCount-BF.overlapRefLabelCount;if(BH<0){return -1;}else{if(BH>0){return 1;}else{BH=BG.overlapRefLineCount-BF.overlapRefLineCount;if(BH<0){return -1;}else{if(BH>0){return 1;}else{BH=BG.overlapDataLabelCount-BF.overlapDataLabelCount;if(BH<=0){return -1;}else{return 1;}}}}}}function Av(){var BF={ConnectDataPoint:false,ShowDataLabel:false,MarkerSize:33,MarkerShape:4,ValueAxisIndex:0,SeriesID:0,IsNullData:[],TrendLineOptions:{mRegressionType:Q.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true}};return BF;}function r(BK){var BH,BO=this.labelMatrix.length,BF=this.mDataArea.width,BN=this.mDataArea.height,BL,BG=this.mChartContextPtr,BJ=0.25;if(BG.mIsGraphMatrix){var BI=BG.GetGraphMatrixContext(),BM=BI.mConstants.FixedTickerSize;if(BI.mMarkerShape===A9.DssGraphMarkerShapeGMTick){BN=BM;BF=this.minRadius*BJ;}else{BN=BF=this.minRadius*BJ;}}else{for(BH=0;BH<BO;++BH){BL=this.labelMatrix[BH].Label.GetBoundingRectNoRotation(true);BF=Math.min(BL.width,BF);BN=Math.min(BL.height,BN);if(this.isBubbleChart){BF=Math.min(this.labelMatrix[BH].HostMarker.width,BF);BN=Math.min(this.labelMatrix[BH].HostMarker.height,BN);}}if(!this.isBubbleChart){BF=Math.min(this.labelMatrix[0].HostMarker.width,BF);BN=Math.min(this.labelMatrix[0].HostMarker.height,BN);}if(BF>1){BF=Math.round(BF*BJ);}if(BN>1){BN=Math.round(BN*BJ);}}BK.width=Math.max(BF,1);BK.height=Math.max(BN,1);}function G(BF){return 3;}function AE(BJ,BK){var BH=BK.Size,BF=BK.Position,BG=BH+BF.y<BJ.y||BF.y-BH>BJ.y+BJ.height,BI=BH+BF.x<BJ.x||BF.x-BH>BJ.x+BJ.width;return !BI&&!BG;}function U(BN){var BG=this.mChartContextPtr,BI,BF=5;if(BG.mPartialRendering===false){return false;}if(BG.mIsGraphMatrix){BI=BG.GetGraphMatrixContext();BF=BI.getPadding(Ak.kDataLabel);if(AE.call(this,BG.mRenderingWindow,BN)===false){return true;}}if(this.shapeCanvas===null){var BK=new Ap.Rect2D();r.call(this,BK);this.shapeCanvas=new Ap.GridMap({Rect:this.mDataArea,Unit:BK,MatrixType:1,dataLabelPadding:BF});if(F<0){F=G.call(this,1);}}var BL,BM=this.shapeCanvas;if(BM.veryDense()){return true;}BL=BM.ToInspectedMetric(BN);if(BL.Min>=F-1||((BL.Occupied/BL.Total)>=F-1&&BL.Min>0)){return true;}var BJ=BN.BoundingBox,BH=BN.Position,BO=BN.Size;switch(BN.Shape){case c._CIRCLE:BM.UpdateMatrixCircle(BH,BO,true);break;case c._PIE:BM.UpdateMatrixCircle(BH,BO,true);if(BN.ExclusiveRect){BM.UpdateMatrixCircle(BH,BO*A8,false);}break;case c._TICKER:case c._RECTANGLE:BM.UpdateMatrixRect(BJ,true);break;default:console.alert("Bubble partial rendering: shape not support yet");break;}return false;}function H(BL,BM,BF){var BG=this.mChartContextPtr,BJ=BG.GetGraphMatrixContext(),BN,BK,BQ;switch(BL){case A9.DssGraphMarkerShapeGMTick:var BO=Math.round(BJ.mConstants.FixedTickerSize*0.5),BP=Math.round(0.5*BF);BN=new Ap.Rect2D();BN.x=BM.x-BP;BN.y=BM.y-BO;BN.width=2*BP;BN.height=2*BO;BK=c._TICKER;break;case A9.DssGraphMarkerShape2DPie:case A9.DssGraphMarkerShape2DRingPie:var BH=0;if(BL===A9.DssGraphMarkerShape2DRingPie){BH=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new Ap.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BG,Layout:BH,MaxRadius:this.maxUnitRadius,PlotType:s.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}var BI=this.mPieRenderer.GetPieRadius(0,0,0);BN=BG.transformToRect(BM,BI,true);BK=c._PIE;if(BH===1){BQ=BG.transformToRect(BM,BI*A8,true);}break;case A9.DssGraphMarkerShapeSquare:case A9.DssGraphMarkerShapeRectangle:BN=BG.transformToRect(BM,BF,true);BK=c._RECTANGLE;break;default:BN=BG.transformToRect(BM,BF,true);BK=c._CIRCLE;break;}return{BoundingBox:BN,Shape:BK,ExclusiveRect:BQ};}function Az(BI,BG,BH){var BJ,BK,BF;BJ=this.mDatasetPtr.GetData(this.VecSeriesInfo[BI].SeriesID,BG,0);if(BJ===null){return false;}BF=this.xAxis.GetPositionByValue(BJ);if(BF===null){return false;}BH.x=BF;BJ=this.mDatasetPtr.GetData(this.VecSeriesInfo[BI].SeriesID,BG,1);if(BJ===null){return false;}BK=(this.VecSeriesInfo[BI].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;BF=BK.GetPositionByValue(BJ);if(BF===null){return false;}BH.y=BF;return true;}function BC(BG,BN){var BQ,BO,BF=this.mChartContextPtr,BK=BF.GetGraphMatrixContext(),BH=this.mDatasetPtr,BI=this.VecSeriesInfo,BM,BP,BJ=c._CIRCLE,BL=BK.mMarkerShape;if(BF.mIsGraphMatrix){if(this.isBubbleChart){BM=BH.GetSizeByData(this.VecSeriesInfo[BG].SeriesID,BN);if(BM===null){return null;}BP=this.maxUnitRadius;if(BL===A9.DssGraphMarkerShapeGMTick){BJ=c._TICKER;BP=BK.GetScaledSize(BM,BP,BJ);}else{if(BL===A9.DssGraphMarkerShape2DPie||BL===A9.DssGraphMarkerShape2DRingPie){BJ=c._PIE;BP=BK.GetScaledSize(BM,BP,BJ);BP=Math.max(BP,BK.mConstants.MinimalSize.Pie);}else{if(BL!==A9.DssGraphMarkerShapeCircle){BJ=c._SQUARE;}BP=BK.GetScaledSize(BM,BP,BJ);}}BQ=BP;this.maxRadius=Math.max(this.maxRadius,BP);this.minRadius=Math.min(this.minRadius,BP);}else{BQ=this.maxUnitRadius;this.minRadius=this.maxRadius=this.maxUnitRadius;}}else{if(this.isBubbleChart){BO=0;BM=BH.GetProperty(A5.DssGraphMarkerSize,AD);if(BM){BO=BM;}BM=BH.GetData(this.VecSeriesInfo[BG].SeriesID,BN,2);if(BM===null){BI[BG].IsNullData[BN]=true;}else{BI[BG].IsNullData[BN]=false;BQ=this.zAxis.ValueToBubbleSize(BO,BM);}}else{BQ=BI[BG].MarkerSize;}}if(BQ){BQ=Math.max(BQ,1);BQ=Math.floor(BQ);}return BQ;}function g(BH,BG,BO,BI){var BN,BJ,BF,BK,BL,BM=null;if(BO===0){BN=this.xAxis;}else{if(BO===1){BN=(this.VecSeriesInfo[BH].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;}else{if(BO===2){BN=this.zAxis;}}}if(BN===null){return BM;}BJ=this.mDatasetPtr.GetData(this.VecSeriesInfo[BH].SeriesID,BG,BO);if(BJ===null){return BM;}BF=BN.GetNumberFormat();BK=new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:this.VecSeriesInfo[BH].SeriesID,GroupId:BG});BL=new Ap.NumberObject({TripleId:BK,GraphObjectManager:this,Number:BJ,NumberFormat:BF,GraphCollectionObject:BI,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:BO});if(BL!==null){BM=BL.mText;}return BM;}function Ai(BK,BF,BG,BJ){var BI,BH;BI=BK.GetBoundingRectNoRotation();BH=BI;BK.SetRect(BH);return Math.sqrt((BH.x-BF.x)*(BH.x-BF.x)+(BH.y-BF.y)*(BH.y-BF.y));}function AI(BK,BO,BU,BR){var BP=false,BM=false,BN=2,BQ,BF=0,BJ,BT=0,BI=0,BH,BS,BG,BL=this.isSmarted?BR:this.labelLocation;switch(BU){case M.FR_90:case M.FR_270:BP=true;break;case M.FR_45:case M.FR_315:BM=true;break;default:break;}if(BM){BN=1.414;}BQ=BK.GetBoundingRectNoRotation();if((BL===Ag.DssGraphDTPositionOutMin)||(BL===Ag.DssGraphDTPositionInMin)){BF=BM?BO.height/2+BO.width/2:BO.width;}else{BF=BM?BO.width/2+BO.height/2:BO.height;}BJ=BF;switch(BL){case Ag.DssGraphDTPositionCenter:BT=BI=0;break;case Ag.DssGraphDTPositionOutMin:BT=1;BJ+=(BP||BM)?BQ.Height/BN:BQ.Width/2;break;case Ag.DssGraphDTPositionInMin:BT=-1;BJ+=(BP||BM)?BQ.Height/BN:BQ.Width/2;break;case Ag.DssGraphDTPositionInMax:BI=-1;BG=BP?BQ.Width:BQ.Height;BJ+=(BP||BM)?BG/BN:BQ.Height/2;break;case Ag.DssGraphDTPositionOutMax:BI=1;BG=BP?BQ.Width:BQ.Height;BJ+=(BP||BM)?BG/BN:BQ.Height/2;break;default:break;}BH=BO.GetCenter().x+BT*BJ;BS=BO.GetCenter().y+BI*BJ;BK.MoveTo(BH,BS,A2.CENTER);return BF;}function AS(BJ,BM,BH,BG){var BF=BH.GetCenter(),BL=(BG.y+BG.height-BF.y)<0,BN=(BG.x+BG.width-BF.x)<0,BK=(BG.x-BF.x)*(BG.x+BG.width-BF.y),BI=(BG.y-BF.y)*(BG.y+BG.height-BF.y);if(BI<=0){BJ.x=BN?BH.x:BH.x+BH.width;BJ.y=BN?Math.round(BH.y+0.5*BH.height):Math.round(BH.y+0.5*BH.height);BM.y=BF.y;BM.x=BN?BG.x+BG.width:BG.x;}else{BJ.x=BL?Math.round(BH.x+0.5*BH.width):Math.round(BH.x+0.5*BH.width);BJ.y=BL?BH.y:BH.y+BH.height;if(BK<=0){BM.x=BF.x;BM.y=BL?BG.y+BG.height:BG.y;}else{if(BN){BM.x=BL?BG.x+BG.width:BG.x+BG.width;BM.y=BL?BG.y+BG.height:BG.y;}else{BM.x=BL?BG.x:BG.x;BM.y=BL?BG.y+BG.height:BG.y;}}}}function BE(BH,BG,BK,BL,BJ){var BI=0,BF=0;switch(BJ){case Ag.DssGraphDTPositionOutMin:BI=1;BH.x=BK.x+BK.width;BH.y=BK.y+0.5*BK.height;BL-=BK.width/2;break;case Ag.DssGraphDTPositionInMin:BI=-1;BH.x=BK.x;BH.y=BK.y+0.5*BK.height;BL-=BK.width/2;break;case Ag.DssGraphDTPositionInMax:BF=-1;BH.x=BK.x+0.5*BK.width;BH.y=BK.y;BL-=BK.height/2;break;case Ag.DssGraphDTPositionOutMax:BF=1;BH.x=BK.x+0.5*BK.width;BH.y=BK.y;BL-=BK.height/2;break;}BG.x=BH.x+BI*BL;BG.y=BH.y+BF*BL;}function Ac(BI,BL,BN,BH){var BF,BJ,BM,BK,BG;if(BI===null){return ;}BF=AI.call(this,BI,BL,BN,this.labelLocation);if(this.dataLabelLine){BJ=new Ap.Point2D();BM=new Ap.Point2D();BE.call(this,BJ,BM,BL,BF,this.labelLocation);BK=new Ap.TripleId({ObjectId:A6.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3});BG=new Ap.StraightLineObject({TripleId:BK,GraphObjectManager:this,Start:BJ,End:BM});this.mGraphObjectList.push(BG);BH.AddGraphObject(BG);}}function Ad(BL,BK,BJ){var BG=this.mDatasetPtr,BM=BG.dataLabelStyle,BI="",BH,BF,BN;switch(BM){case AJ:BH=g.call(this,BL,BK,0,BJ);BF=g.call(this,BL,BK,1,BJ);BI="("+BH+", "+BF+")";break;case J:BI=BG.GetTextLabel(this.VecSeriesInfo[BL].SeriesID,BK);break;}BN=new Ap.TextObject({TripleId:new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:this.VecSeriesInfo[BL].SeriesID,GroupId:BK}),GraphObjectManager:this,GraphCollectionObject:BJ});BN.SetText(BI);this.mPostTrendLineObjects.push(BN);return BN;}function Ax(BL){var BH,BI=this.VecSeriesInfo.length,BF=BL.length,BK,BJ;if(BF>0){BL.splice(0,BF);}for(BH=0;BH<BI;++BH){var BG=this.VecSeriesInfo[BH].ShowDataLabel;if(BG){BK=new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:this.VecSeriesInfo[BH].SeriesID});BJ=new Ap.GraphCollectionObject({TripleId:BK,GraphObjectManager:this,CollectionType:AM.CT_TEXT});BL.push(BJ);this.AddToMap(BJ);}}}function K(BM){var BI,BL=this.VecSeriesInfo,BK=BL.length,BH=BM.length,BF,BJ;if(BH>0){BM.splice(0,BH);}for(BI=0;BI<BK;++BI){var BG=BL[BI].ShowDataLabel;if(BG){BF=new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:BL[BI].SeriesID});BJ=new Ap.GraphCollectionObject({TripleId:BF,GraphObjectManager:this,CollectionType:AM.CT_TEXT});BM.push(BJ);this.AddToMap(BJ);}}}function x(){if(this.mChartContextPtr.mIsGraphMatrix){return(this.xAxis&&this.xAxis.mOptions.mUseCustomMinMax)||(this.y1Axis&&this.y1Axis.mOptions.mUseCustomMinMax)||(this.y2Axis&&this.y2Axis.mOptions.mUseCustomMinMax);}return false;}function Aa(BG){var BF=this.mDataArea,BH=x.call(this);if(BH){if(BG.x<BF.x||BG.x+BG.width>BF.x+BF.width){return false;}if(BG.y<BF.y||BG.y+BG.height>BF.y+BF.height){return false;}}return true;}function AY(BQ,BV){var BO=this.VecSeriesInfo,BK=BO.length,BG=this.waitingList,BJ,BI,BS=null,BN=0,BU,BT,BM,BR;if(BG&&this.waitingList.length){var BP=this.waitingList,BL=BP.length,BH;this.hiddenMarkers=this.hiddenMarkers||[];BS=this.hiddenMarkers;for(BJ=0;BJ<BL;BJ++){BH=BP[BJ].Id;BS[BH.mSeriesId]=BS[BH.mSeriesId]||[];BS[BH.mSeriesId][BH.mGroupId]=1;}}for(BJ=0;BJ<BK;++BJ){BN=0;BU=BO[BJ].SeriesID;BT=BO[BJ].IsNullData.length;for(BI=0;BI<BT;++BI){if(BS&&BS[BU][BI]!==undefined){if(!BO[BJ].IsNullData[BI]){++BN;}continue;}var BF=BO[BJ].ShowDataLabel;if(!BF){this.standAloneMarkers.push(BQ[BJ][BN++]);continue;}if(!BO[BJ].IsNullData[BI]){BM=new Ap.GMDataLabelInfo();BM.isValid=true;BM.GroupId=BI;BM.SeriesId=BU;BM.HostMarkerBound=BQ[BJ][BI];BM.HostMarkerPoint=BM.HostMarkerBound.GetCenter();BM.Label=Ad.call(this,BJ,BI,BV[BJ]);if(!Aa.call(this,BM.HostMarkerBound)){BM.isValid=false;continue;}if(BM.Label===null||BM.Label===undefined){BM.isValid=false;continue;}else{}this.mDataLabels.push(BM);BV[BJ].AddGraphObject(BM.Label);}}}delete this.hiddenMarkers;}function C(BH){var BK,BJ,BI=BH.length,BG=0,BF=[];for(BK=0;BK<BI;++BK){if(BH[BK].length>0){BG=BH[BK].length;for(BJ=0;BJ<BG;++BJ){BF.push(BH[BK][BJ]);}}}return BF;}function BB(BG){var BF=this.mDataArea;if(BG.x<BF.x||BG.y<BF.y){return true;}return(BG.x+BG.width>BF.x+BF.width||BG.y+BG.height>BF.y+BF.height);}function W(BG,BJ,BK,BF){var BI=Math.max(BG.y,BJ.y),BH=BG.y+BJ.y-BI;if(BH>BF.y||BI<BF.y){return false;}BI=Math.max(BG.x,BJ.x);BH=BG.x+BJ.x-BI;return !(BH>Math.max(BK.x,BF.x)||BI<Math.min(BK.x,BF.x));}function AK(BG,BJ,BK,BF){var BI=Math.max(BG.x,BJ.x),BH=BG.x+BJ.x-BI;if(BH>BF.x||BI<BF.x){return false;}BI=Math.max(BG.y,BJ.y);BH=BG.y+BJ.y-BI;return !(BH>Math.max(BK.y,BF.y)||BI<Math.min(BK.y,BF.y));}function Z(BJ,BK,BI){var BG=true,BF=BI.length,BH;for(BH=0;BH<BF;++BH){BG=(BH===0)||(BH===2);if(BG){if(W.call(this,BJ,BK,BI[BH],BI[(BH+1)%BF])){return true;}}else{if(AK.call(this,BJ,BK,BI[BH],BI[(BH+1)%BF])){return true;}}}return false;}function f(BS,BR){var BH=1,BN,BW,BQ,BO,BI,BX,BJ,BU,BL=[],BP,BM,BK,BV,BG,BF,BT;switch(BS.LabelRotation){case M.FR_NORMAL:case M.FR_CUSTOME:case M.FR_90:case M.FR_180:case M.FR_270:case M.FR_HOTEL:break;case M.FR_45:break;case M.FR_315:BH=-1;break;}BN=BS.Label.GetBoundingRectNoRotation();BW=BN.GetCenter();BQ=0.5*BN.width;BO=0.5*BN.height;BI=Math.sqrt(BQ*BQ+BO*BO);for(BT=0;BT<4;++BT){BJ=(BT===0||BT===3)?-1:1;BU=(BT===0||BT===1)?-1:1;BX=new Ap.Point2D({x:BJ*BQ,y:BU*BO});BL.push(BX);}for(BT=0;BT<4;BT++){BP=(BT===0||BT===3)?180:0;BM=Math.atan(BL[BT].x/BL[BT].y);BK=Aq.RadianToDegree(BM);BK+=(BP+BH*45);BV=Aq.DegreeToRadian(BK);BG=Math.round(BI*Math.cos(BV))+BW.x;BF=Math.round(BI*Math.sin(BV))+BW.y;BX=new Ap.Point2D({x:BG,y:BF});BR.push(BX);}}function e(BH,BK,BL,BJ){var BG=BK.length,BF=0,BI=0;BL=BL||false;BJ=BJ||false;if(!BJ){for(BI=0;BI<BG;++BI){if(BH.HasIntersection(BK[BI])){++BF;}}}else{AP.visPrint("Checking label overlap with tilt targets has not been implemented yet.");}return BF;}function q(BM,BF,BH){var BK=0,BG=BF.length,BO=((BM.LabelRotation===M.FR_45)||(BM.LabelRotation===M.FR_315)),BJ=[],BI=0,BN,BL;BH=BH||false;if(BO){f.call(this,BM,BJ);for(BI=0;BI<BG;++BI){BN=[];BN.push(BF[BI].GetBottomLeft());BN.push(BF[BI].GetBottomRight());BN.push(BF[BI].GetTopRight());BN.push(BF[BI].GetTopLeft());if(!BH){if(Z.call(this,BJ[0],BJ[1],BN)||Z.call(this,BJ[1],BJ[2],BN)||Z.call(this,BJ[2],BJ[3],BN)||Z.call(this,BJ[3],BJ[0],BN)){++BK;}}else{AP.visPrint("We currently do not support tilt rectangle against tilt targets");}}}else{BL=BM.Label.GetBoundingRect();BK=e.call(this,BL,BF,false,BH);}return BK;}function B(BL){var BK,BH,BG=this.mDataArea,BJ,BF,BM,BI;BJ=this.standAloneMarkers.length;BF=new Ap.Rect2D();for(BH=0;BH<BJ;++BH){BF.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.standAloneMarkers[BH],BG,BF)){BL.UpdateMatrixRect(BF);}}BJ=this.labelMatrix.length;for(BK=0;BK<BJ;++BK){BF.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.labelMatrix[BK].HostMarker,BG,BF)){BL.UpdateMatrixRect(BF);}if(this.labelMatrix[BK].IsPut){BM=this.labelMatrix[BK].Label.GetBoundingRectNoRotation();if(this.mChartContextPtr.RectangleIntersection(BM,BG,BF)){BL.UpdateMatrixRect(BF,true,this.labelMatrix[BK].LabelRotation);}}}BI=Math.round(0.95*BL.XCount*BL.YCount);return BL.Metric<BI;}function N(BI,BM,BL){var BG=new Ap.Point2D(),BH=new Ap.Point2D(),BF=new Ap.TripleId({ObjectId:A6.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3}),BK,BJ;if(!BI.IsValid){return false;}if(BI.IsPut){if(BI.SuggestedStart===Ag.DssGraphDTPositionPieSmart){if(this.dataLabelLine||(!this.dataLabelLine&&BI.IsMoved(this.labelLocation))){BK=BI.Label.GetBoundingRect();AS.call(this,BG,BH,BI.HostMarker,BK);}else{return false;}}else{if(this.dataLabelLine||(!this.dataLabelLine&&BI.IsMoved(this.labelLocation))){BE.call(this,BG,BH,BI.HostMarker,BL,BI.SuggestedStart);}else{return false;}}BJ=new Ap.StraightLineObject({TripleId:BF,GraphObjectManager:this,StartPoint:BG,EndPoint:BH,GraphCollectionObject:BM});this.mGraphObjectList.push(BJ);BM.AddGraphObject(BJ);return true;}if(this.dataLabelLine){BE.call(this,BG,BH,BI.HostMarker,BL,BI.SuggestedStart);}else{return false;}BJ=new Ap.StraightLineObject({TripleId:BF,GraphObjectManager:this,StartPoint:BG,EndPoint:BH,GraphCollectionObject:BM});this.mGraphObjectList.push(BJ);BM.AddGraphObject(BJ);return true;}function a(BI,BJ){var BN=this.labelMatrix.length,BL=new Ap.Point2D(),BO=new Ap.Rect2D(),BG,BM,BF,BK,BH;for(BK=0;BK<BN;++BK){BH=this.labelMatrix[BK];if(!BH.IsPut){BG=BH.Label.GetBoundingRectNoRotation();BM=BI.IsAccomdatableConsiderRotation(BH.HostMarker,BG,BL,BH.LabelRotation);if(BM){BH.IsPut=true;BH.SuggestedStart=A1.DssGraphDTPositionPieSmart;BF=Ai.call(this,BH.Label,BH.HostMarker,BL,BH.LabelRotation);BG=BH.Label.GetBoundingRectNoRotation();N.call(this,BH,BJ,BF);this.AddToMap(BH.Label);BO.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(BG,this.mDataArea,BO)){BI.UpdateMatrixRect(BO,true,BH.LabelRotation);}}}}return true;}function Ar(BK){var BH,BM,BF,BJ,BL,BI,BG=this.VecSeriesInfo.length;BF=this.isBubbleChart?A6.DssGraphRiser:A6.DssGraphDataLine;BJ=this.isBubbleChart?AM.CT_GENERAL_SHAPE:AM.CT_LINE;for(BH=0;BH<BG;++BH){BM=this.VecSeriesInfo[BH];BL=new Ap.TripleId({ObjectId:BF,SeriesId:BM.SeriesID,GroupId:As});BI=new Ap.GraphCollectionObject({TripleId:BL,GraphObjectManager:this,CollectionType:BJ});BK.push(BI);this.AddToMap(BK[BH]);if(!this.mChartContextPtr.mIsGraphMatrix){this.AddLegendMarkerToCollection(BM.SeriesID,BK[BH],!this.isBubbleChart,true,BM.MarkerShape,BM.ConnectDataPoint);}}}function BA(BI){var BG=this.labelMatrix.length,BL,BK,BH,BJ,BF;for(BJ=0;BJ<BG;++BJ){BF=this.labelMatrix[BJ];BL=BF.Label.mTripleId;BH=M.FR_NORMAL;BK=this.mChartContextPtr.GetProperty(A5.DssGraphFontRotation,BL);if(BK){BH=BK;}if(!BF.IsPut){Ac.call(this,BF.Label,BF.HostMarker,BH,BI);this.AddToMap(BF.Label);}}}function AZ(BK,BI,BF,BG){var BH,BJ;if(this.labelLocation===Ag.DssGraphDTPositionOutMin){BK.SuggestedStart=Ag.DssGraphDTPositionInMin;}BJ=AI.call(this,BK.Label,BK.HostMarker,BK.LabelRotation,BK.SuggestedStart);BH=BK.ToRectangle();if(BB.call(this,BH)||(q.call(this,BK,BI)>0)||(q.call(this,BK,this.standAloneMarkers)>0)||(q.call(this,BK,BF)>0)){if(BK.SuggestedStart>=Ag.DssGraphDTPositionOutMax){return false;}++BK.SuggestedStart;if(BK.SuggestedStart===this.labelLocation){++BK.SuggestedStart;}if(BK.SuggestedStart>Ag.DssGraphDTPositionOutMax){return false;}return AZ.call(this,BK,BI,BF,BG);}BF.push(BH);BK.IsPut=true;N.call(this,BK,BG,BJ);return true;}function AF(BL,BO,BG){var BN=this.labelMatrix.length,BJ=0,BK,BF,BM,BI,BH;for(BH=0;BH<BN;++BH){BK=this.labelMatrix[BH];BF=AI.call(this,BK.Label,BK.HostMarker,BK.LabelRotation,this.labelLocation);BM=BK.ToRectangle();BI=(BB.call(this,BM)||(q.call(this,BK,BL)>0)||(q.call(this,BK,this.standAloneMarkers)>0)||(q.call(this,BK,BO)>0));if(!BI){BO.push(BM);BK.IsPut=true;BK.SuggestedStart=this.labelLocation;N.call(this,BK,BG,BF);++BJ;this.AddToMap(BK.Label);continue;}if(AZ.call(this,BK,BL,BO,BG)){++BJ;this.AddToMap(BK.Label);}else{BK.SuggestedStart=this.labelLocation;}}return BJ;}function t(BL,BQ){var BN,BI=this.VecSeriesInfo.length,BK,BH,BG=0,BP,BO,BJ,BM;for(BH=0;BH<BI;++BH){BN=this.VecSeriesInfo[BH];BK=0;BP=this.VecSeriesInfo[BH].SeriesID;BO=this.VecSeriesInfo[BH].IsNullData.length;for(BG=0;BG<BO;++BG){var BF=this.VecSeriesInfo[BH].ShowDataLabel;if(!BF){this.standAloneMarkers.push(BL[BH][BK++]);continue;}if(!this.VecSeriesInfo[BH].IsNullData[BG]){BJ=new Ap.LabelInfo();BJ.IsValid=true;BJ.GroupId=BG;BJ.SeriesId=BP;BJ.HostMarker=BL[BH][BK++];BJ.Label=Ad.call(this,BH,BG,BQ[BH]);if(BJ.Label===null){BJ.IsValid=false;continue;}else{}this.labelMatrix.push(BJ);BQ[BH].AddGraphObject(BJ.Label);}}}}function S(BQ,BH){var BO,BM=this.VecSeriesInfo.length,BK,BI=0,BG,BL,BR,BT=0,BN,BP,BS,BJ;for(BK=0;BK<BM;++BK){BO=this.VecSeriesInfo[BK];var BF=this.mDatasetPtr.showSeriesDatalabel(BO.SeriesID);if(BF){BL=new Ap.TripleId({ObjectId:A6.DssGraphDataText,SeriesId:BO.SeriesID});BG=new Ap.GraphCollectionObject({TripleId:BL,GraphObjectManager:this,CollectionType:AM.CT_TEXT});BR=BQ[BK];BT=0;BP=BO.IsNullData.length;for(BI=0;BI<BP;++BI){if(BO.IsNullData[BI]){continue;}BS=Ad.call(this,BK,BI,BG);BG.AddGraphObject(BS);this.AddToMap(BS);BL=BS.mTripleId;BJ=M.FR_NORMAL;BN=this.mChartContextPtr.GetProperty(A5.DssGraphFontRotation,BL);if(BN){BJ=BN;}Ac.call(this,BS,BR[BT++],BJ,BH);}if(BG.GetCollectionSize()>0){this.AddToMap(BG);}}}}function A(){var BL=this.mChartContextPtr,BI=this.dataLabelManager,BH,BF=this.mDataLabels,BG=BF.length,BJ=[],BK=new Ap.Rect2D({x:0,y:0,width:BL.mGraphWidth,height:BL.mGraphHeight});if(BI===null||BI===undefined){BI=this.dataLabelManager=new Ap.DataLabelManager({DataArea:BK});BI.ChartContext=BL;}BI.RectangleObjects=BI.RectangleObjects.concat(this.standAloneMarkers);for(BH=0;BH<BG;++BH){BJ.push(BF[BH].HostMarkerBound);}BI.RectangleObjects=BI.RectangleObjects.concat(BJ);return BI;}function AW(){var BF=this.mDataLabels,BH=BF.length,BG;for(BG=0;BG<BH;++BG){BF[BG].CenterXOffset=BF[BG].HostMarkerBound.width/2;BF[BG].CenterYOffset=BF[BG].HostMarkerBound.height/2;}}function P(){var BV=this.VecSeriesInfo.length,BG,BQ,BT,BU,BH,BL,BK,BJ,BP,BW,BR,BS,BM=this.mDatasetPtr,BI=this.mChartContextPtr,BF,BN,BO;if(this.mTrendLineObjects===null){this.mTrendLineObjects=[];}if(BM.isBare(BI.IsPieChart())){return ;}for(BT=0;BT<BV;++BT){BQ=this.VecSeriesInfo[BT];BG=BQ.SeriesID;BJ=this.mDatasetPtr.GetTrendLineOfSeries(BG);BU=BQ.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BK=new Ap.TripleId({ObjectId:A6.DssGraphTrendLine,SeriesId:BG});if(BJ){BP=BJ.getTrendLineType();if(BP!==Q.DssGraphRegressionNone){BW=BJ.getIdentity();BH=BJ.getTrendLineValuesWithForecast();BL=BJ.getTrendLineValues();if(E(BL)<=1){continue;}BR=BJ.getCoefficients(true);BS=BR.length-1;if(BH&&BH.length){BF={mRegressionType:BP,mOrder:BS,mPeriod:0,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeasonal:false};BN=new Ap.TrendLineObject({TripleId:BK,GraphObjectManager:this,GraphCollectionObject:null,TrendLineOptions:BF,XAxis:this.xAxis,YAxis:BU,TrendLineValues:BH,Coefficients:BR,IsVertical:true,Identity:BW});if(BN!==undefined&&BN!==null){BO=BN.CreateTrendLine();if(BO!==undefined&&BO!==null){this.mTrendLineObjects.push(BO);}}}}}}}function AC(BI,BP,BL,BF,BH,BO,BN,BK,BJ,BM){var BG={};BG.rect=new Ap.Rect2D({x:0,y:0,width:BF+2*BJ,height:BP+2*BJ});switch(BI){case AB:if(BM){BG.xOffset=BO+BJ+BH;BG.yOffset=BJ+BL;BG.rect.x=BO;BG.rect.y=0;}else{BG.xOffset=BK-BJ-BH;BG.yOffset=BO-BJ-BL;BG.rect.x=BK-2*BJ-BF;BG.rect.y=BO-2*BJ-BP;}break;case z:if(BM){BG.xOffset=BO-BJ-BH;BG.yOffset=BJ+BL;BG.rect.x=BO-2*BJ-BF;BG.rect.y=0;}else{BG.xOffset=BK-BJ-BH;BG.yOffset=BO+BJ+BL;BG.rect.x=BK-2*BJ-BF;BG.rect.y=BO;}break;case y:if(BM){BG.xOffset=BO+BJ+BH;BG.yOffset=BN/2;BG.rect.x=BO;BG.rect.y=BN/2-BJ-BL;}else{BG.xOffset=BK/2;BG.yOffset=BO-BJ-BL;BG.rect.x=BK/2-BJ-BH;BG.rect.y=BO-2*BJ-BP;}break;case w:if(BM){BG.xOffset=BO-BJ-BH;BG.yOffset=BN/2;BG.rect.x=BO-2*BJ-BF;BG.rect.y=BN/2-BJ-BL;}else{BG.xOffset=BK/2;BG.yOffset=BO+BJ+BL;BG.rect.x=BK/2-BJ-BH;BG.rect.y=BO;}break;case v:if(BM){BG.xOffset=BO+BJ+BH;BG.yOffset=BN-BJ-BL;BG.rect.x=BO;BG.rect.y=BN-2*BJ-BP;}else{BG.xOffset=BJ+BH;BG.yOffset=BO-BJ-BL;BG.rect.x=0;BG.rect.y=BO-2*BJ-BP;}break;case u:if(BM){BG.xOffset=BO-BJ-BH;BG.yOffset=BN-BJ-BL;BG.rect.x=BO-2*BJ-BF;BG.rect.y=BN-2*BJ-BP;}else{BG.xOffset=BJ+BH;BG.yOffset=BO+BJ+BL;BG.rect.x=0;BG.rect.y=BO;}break;}return BG;}function Am(BJ,BQ,BM,BK,BH,BF){var BN=BJ.rect,BL,BI,BG,BO,BP;if(BN.y<0||BN.y+BN.height>BQ){BJ.cannotFitVertically=true;return ;}if(BN.x<0||BN.x+BN.width>BM){BJ.cannotFitHorizontally=true;}BL=BH.length;for(BI=0;BI<BL;++BI){BG=BH[BI].GetBoundingRect();if(BN.HasIntersection(BG)){++BJ.overlapRefLabelCount;}}BL=BF.length;for(BI=0;BI<BL;++BI){BP=BF[BI];if(BP.isVertical){if(BN.x<BP.position&&BN.x+BN.width>BP.position){++BJ.overlapRefLineCount;}}else{if(BN.y<BP.position&&BN.y+BN.height>BP.position){++BJ.overlapRefLineCount;}}}BL=BK.length;for(BI=0;BI<BL;++BI){BO=BK[BI];if(BO.mIsShown){BG=BO.GetBoundingRect();if(BN.HasIntersection(BG)){++BJ.overlapDataLabelCount;BJ.overlapDataLabels.push(BK[BI]);}}}}function AG(Ba,BV,BN){var BH=this.mChartContextPtr,BZ=BH.GetGraphMatrixContext(),BG=BZ.getPadding(Ak.kRefLabel),BM=BN.length,BK,BL,BS,BP,BJ,BQ,BF,BX,BW,BT,BI,BO,BU,BR,BY;for(BX=0;BX<BM;++BX){BK=BN[BX];BL=new Ap.TextObject({TripleId:BK.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:BK.identity});if(BL!==null){BL.SetText(BK.labelText);for(BW=0;BW<2;++BW){if(BW===1){BI=BL.mText;BL.SetText(BI[0]+"...");BL.rect.height=0;BL.rect.width=0;}BF=BL.GetBoundingRect();BP=BF.height;BQ=BP/2;BS=BF.width;BJ=BS/2;BR=[];for(BT=AB;BT<=u;++BT){BO={};BO.position=BT;BO.cannotFitVertically=false;BO.cannotFitHorizontally=false;BO.overlapRefLabelCount=0;BO.overlapRefLineCount=0;BO.overlapDataLabelCount=0;BO.overlapDataLabels=[];BU=AC.call(this,BT,BP,BQ,BS,BJ,BK.position,Ba,BV,BG,BK.isVertical);BO.xOffset=BU.xOffset;BO.yOffset=BU.yOffset;BO.rect=BU.rect;Am.call(this,BO,Ba,BV,this.shownDataLabels,this.shownRefLabels,BN);BR.push(BO);}BR.sort(k);if(BR[0].cannotFitVertically){break;}if(BR[0].cannotFitHorizontally){if(BX===0){continue;}else{break;}}BL.MoveTo(BR[0].xOffset,BR[0].yOffset,A2.CENTER);BL.mIsShown=true;BY=BR[0].overlapDataLabelCount;for(BT=0;BT<BY;++BT){BR[0].overlapDataLabels[BT].mIsShown=false;}this.mPostTrendLineObjects.push(BL);this.shownRefLabels.push(BL);break;}}}}function An(){var BR=this.VecSeriesInfo.length,BH,BU,Bc,BY,Bd,BV,Ba=[],BJ,Bb,BS,BI,BZ,Bj,Bh,BO,BK,Bi,Be,BG,BM={},Bg,BF,BP=this.mDatasetPtr,BX=BP.GetSeriesCount()*BP.GetGroupCount(),BL=this.mChartContextPtr,BW=BL.mGraphWidth,Bf=BL.mGraphHeight,BN,BQ=[];if(this.mReferenceLineObjects===null){this.mReferenceLineObjects=[];}if(BL.mPartialRendering===false){BX=this.DPCount;}for(Bc=0;Bc<BR;++Bc){BU=this.VecSeriesInfo[Bc];BH=BU.SeriesID;BS=this.mDatasetPtr.GetReferenceLinesOfSeries(BH);Bd=BU.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BF={};BF.Condense=Bd.mCondenseLabels;if(!BF.Condense){if(Bd.mNumberFormat.isDefault){var BT=new Ap.ChartAdvFormat();BL.getAxisAutoNumberFormat(BT,Bd.mPrimaryMetrics);Bd.mNumberFormat=BT;}BF.NumberFormat=Bd.mNumberFormat.mCustomFormat;}BN=BS.length;for(BY=0;BY<BN;++BY){BJ=new Ap.TripleId({GroupId:BY,ObjectId:A6.DssGraphReferenceLine,SeriesId:BH});Bg=new Ap.TripleId({ObjectId:A6.DssGraphRefLineText,SeriesId:BH,GroupId:BY});Ba=[];Bb=BS[BY];if(Bb){Bj=Bb.getIdentity();BV=Bb.getReferenceLineValue();Bh=Bb.getReferenceLineDirection();BI=Bb.getReferenceLineLabel(false,false,BF);BZ=Bb.getLevel();if(BX===0){continue;}if(BV===null&&BV===undefined){continue;}BO=(Bh!=="horizontal");if(BO){Bi=this.xAxis.GetPositionByValue(BV);}else{Bi=Bd.GetPositionByValue(BV);}if(Bi!==null){Be=1;if(BO){if(Bi===0){Bi=1;}else{if(Bi===BW){--Bi;}}BG=Bf-1;Ba.push(new Ap.Point2D({x:Bi,y:Be}));Ba.push(new Ap.Point2D({x:Bi,y:BG}));BM.x=Bi;BM.y=(Ba[0].y+Ba[1].y)/2;}else{if(Bi===0){Bi=1;}else{if(Bi===Bf){--Bi;}}BG=BW-1;Ba.push(new Ap.Point2D({x:Be,y:Bi}));Ba.push(new Ap.Point2D({x:BG,y:Bi}));BM.x=(Ba[0].x+Ba[1].x)/2;BM.y=Bi;}BK=new Ap.StraightLineObject({TripleId:BJ,GraphObjectManager:this,StartPoint:Ba[0],EndPoint:Ba[1],GraphCollectionObject:null,Identity:Bj,Shape:c._LINE,MidPoint:BM});if(BK!==null){if(!BK.mFormatLinePtr){BK.mFormatLinePtr=new Ap.FormatLine();}this.mReferenceLineObjects.push(BK);BQ.push({tripleId:Bg,identity:Bj,isVertical:BO,position:Bi,labelText:BI});}}else{AP.visPrint("Reference line point calculation abnormal:");AP.visPrint("\tref line #: "+BY+" direction: "+Bh);AP.visPrint("\tvalue = "+BV);if(BO){AP.visPrint("\tx = "+Bi);}else{AP.visPrint("\ty = "+Bi);}}}}}AG.call(this,Bf,BW,BQ);}function p(){var BG=this.mTrendLineObjects.length,BF;for(BF=0;BF<BG;++BF){this.mTrendLineObjects[BF].Draw();}}function X(){var BG=this.mReferenceLineObjects,BF;for(BF=0;BF<BG.length;++BF){BG[BF].Draw();}}function E(BH){var BG,BF=0;for(BG=0;BG<BH.length;BG++){if(BH[BG]!==null){BF++;}}return BF;}function Aw(BQ,BL){if(!BL){return ;}var BI=this.mChartContextPtr,BN=this.mDatasetPtr,Ba=this.mChartContextPtr.GetGraphMatrixContext(),Bb=BI.mIsGraphMatrix,BO,BV,Be,BH,BX,BT,BZ,BU,BG,Bc,BW;var BP=BN.showDatalabels();if(Bb&&BP){Bc=this.dataLabelManager;if(Bc===null||Bc===undefined){BW=new Ap.Rect2D({x:0,y:0,width:BI.mGraphWidth,height:BI.mGraphHeight});Bc=this.dataLabelManager=new Ap.DataLabelManager({DataArea:BW});Bc.ChartContext=BI;}if(Ba.mMarkerShape===A9.DssGraphMarkerShape2DPie||Ba.mMarkerShape===A9.DssGraphMarkerShape2DRingPie){this.mPieRenderer.enableDataLabel(Bc,this.shownDataLabels);BU=this.mPieRenderer.dataLabels;BT=BU.length;for(BZ=0;BZ<BT;++BZ){BG=BU[BZ].Label;if(BG.mIsShown){this.AddToMapAndList(BG);}}}else{BV=[];K.call(this,BV);AY.call(this,BQ,BV);AW.call(this);Bc=A.call(this);Bc.PlaceDataLabels(this.mDataLabels,this.shownDataLabels);}}else{if(this.isSmarted){BO=[];Be=[];BH=[];BX=C.call(this,BQ);if(BX){Be=BX;}Ax.call(this,BO);t.call(this,BQ,BO);var BK=new Ap.TripleId({ObjectId:A6.DssGraphDataTextConnectLine,SeriesId:this.TripleId.mSeriesId,GroupId:this.TripleId.mGroupId}),BJ=new Ap.GraphCollectionObject({TripleId:BK,GraphObjectManager:this,CollectionType:AM.CT_LINE});var Bd=this.labelMatrix.length,BM=AF.call(this,Be,BH,BJ);if(BM===Bd){return ;}if(BM===0){BL=false;}else{var BS=new Ap.Rect2D(),BY,BF;r.call(this,BS);BY=new Ap.GridMap({Rect:this.mDataArea,Unit:BS,dataLabelPadding:5});BF=B.call(this,BY);if(BF){var BR=function BR(Bg,Bf){return Bg.HostMarker.x-Bf.HostMarker.x;};this.labelMatrix.sort(BR);a.call(this,BY,BJ);}else{BA.call(this,BJ);}}if(BJ.GetCollectionSize()){this.AddToMap(BJ);}if(!this.isSmarted){if(this.isSmarted){this.mPostTrendLineObjects.splice(0,this.mPostTrendLineObjects.length);}if(!this.dataLabelLine){S.call(this,BQ);}else{BJ=new Ap.GraphCollectionObject({TripleId:BK,GraphObjectManager:this,CollectionType:AM.CT_LINE});S.call(this,BQ,BJ);if(BJ.GetCollectionSize()>0){this.AddToMap(BJ);}}}}}}function D(){var BH=this.mChartContextPtr,BF=this.mDataArea,BG=this.mPostTrendLineObjects;if(BH.mIsGraphMatrix){BG=[];}this.y1Axis.GenerateCustomLine(BF,BG);if(this.mChartContextPtr.IsDualAxis()){this.y2Axis.GenerateCustomLine(BF,BG);}this.xAxis.GenerateCustomLine(BF,BG);if(BH.mIsGraphMatrix&&BG.length){this.mGraphObjectList=BG.concat(this.mGraphObjectList);}}function I(BI){var BM=this.mChartContextPtr,BJ=BM.mGraphHeight,BH=BM.mGraphWidth,BL,BG,BK,BF;if(BI===undefined||BI===null){return false;}BL=BI.mOptions;BG=BL.mAxisCustomValue;BK=BI.IsVerticalAxis();BF=BI.ValueToPosition(BG);if(!BL.mDrawCustomLine){return false;}if(BG>BI.mMaxTick||BG<BI.mMinTick){return false;}if(BF===0){return false;}if(BK){if(BF===BJ){return false;}}else{if(BF===BH){return false;}}return true;}function AL(BK,BR,BF,BQ,BO,BM,BH,BI){var BG={},BL=BR/2,BJ=BF/2,BN=BI.IsVerticalAxis(),BP;if(BI.mTripleId.mObjectId===A6.DssGraphY2Body){BP=A3;}else{if(BI.mTripleId.mObjectId===A6.DssGraphX2Body){BP=L;}else{BP=BN?A4:O;}}BG.rect=new Ap.Rect2D({x:0,y:0,width:BF+2*BH,height:BR+2*BH});switch(BK){case 0:switch(BP){case A4:BG.xOffset=BH+BJ;BG.yOffset=BQ-BH-BL;BG.rect.y=BQ-2*BH-BR;BG.rect.x=0;break;case O:BG.xOffset=BQ-BH-BJ;BG.yOffset=BO-BH-BL;BG.rect.y=BO-2*BH-BR;BG.rect.x=BQ-2*BH-BF;break;case A3:BG.xOffset=BM-BH-BJ;BG.yOffset=BQ-BH-BL;BG.rect.y=BQ-2*BH-BR;BG.rect.x=BM-2*BH-BF;break;case L:BG.xOffset=BQ-BH-BJ;BG.yOffset=BH+BL;BG.rect.y=0;BG.rect.x=BQ-2*BH-BF;break;}break;case 1:switch(BP){case A4:BG.xOffset=BH+BJ;BG.yOffset=BQ+BH+BL;BG.rect.y=BQ;BG.rect.x=0;break;case O:BG.xOffset=BQ+BH+BJ;BG.yOffset=BO-BH-BL;BG.rect.y=BO-2*BH-BR;BG.rect.x=BQ;break;case A3:BG.xOffset=BM-BH-BJ;BG.yOffset=BQ+BH+BL;BG.rect.y=BQ;BG.rect.x=BM-2*BH-BF;break;case L:BG.xOffset=BQ+BH+BJ;BG.yOffset=BH+BL;BG.rect.y=0;BG.rect.x=BQ;break;}break;}return BG;}function Ay(BJ,BP,BM,BK,BG,BH){var BN=BJ.rect,BL,BI,BF,BO;if(BN.y<0||BN.y+BN.height>BP){return false;}if(BN.x<0||BN.x+BN.width>BM){return false;}BL=BH.length;for(BI=0;BI<BL;++BI){BF=BH[BI].GetBoundingRect(true);if(BN.HasIntersection(BF)){return false;}}BL=BG.length;for(BI=0;BI<BL;++BI){BF=BG[BI].GetBoundingRect(true);if(BN.HasIntersection(BF)){return false;}}BL=BK.length;for(BI=0;BI<BL;++BI){BO=BK[BI];if(BO.mIsShown){BF=BO.GetBoundingRect(true);if(BN.HasIntersection(BF)){return false;}}}return true;}function AR(BH){var BK=this.mChartContextPtr,BV=BK.mGraphWidth,BZ=BK.mGraphHeight,BX=BK.mpGraphMatrixContext,BO=BH.mOptions.mAxisCustomValue,BM=BH.Key==="Y1"||BH.Key==="Y2",BP=this.mDatasetPtr.fetchShownLabels(BM),Ba=BP&&BP[BH.Key],BJ=Ba&&Ba.length,BN,BI=false,BW,Bd,BG,BL,BS,BF,BQ,BR,Bc,BY,BU,BT,Bb=BX.getPadding(Ak.kAxisOriginLabel);BS=Ap.gAxisObjects[BH.getIndex()].mCustomLabelId;for(BW=0;BW<BJ&&!BI;++BW){BN=Ba[BW];if(BN===BO){BI=true;}}if(BI){return ;}Bd=new Ap.NumberObject({TripleId:BS,GraphObjectManager:this,Number:BO,NumberFormat:BH.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BH.mCondenseLabels});if(Bd===null||Bd===undefined){return ;}BL=Bd;BG=Bd.mText;BL.SetText(BG);BF=BL.GetBoundingRect(true);BQ=BF.height;BR=BF.width;Bc=BH.ValueToPosition(BO);BY=false;for(BW=0;BW<=1&&!BY;++BW){BU={};BT=AL.call(this,BW,BQ,BR,Bc,BZ,BV,Bb,BH);BU.xOffset=BT.xOffset;BU.yOffset=BT.yOffset;BU.rect=BT.rect;BY=Ay.call(this,BU,BZ,BV,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(BY){BL.MoveTo(BU.xOffset,BU.yOffset,A2.CENTER);BL.mIsShown=true;this.mPostTrendLineObjects.push(BL);this.axisOriginLabels.push(BL);}}function AV(BK,BN,BG,BF,BL,BI){var BH={},BM=BN/2,BJ=BG/2;BH.rect=new Ap.Rect2D({x:0,y:0,width:BG+2*BI,height:BN+2*BI});switch(BK){case 0:BH.xOffset=BF+BI+BJ;BH.yOffset=BL-BI-BM;BH.rect.x=BF;BH.rect.y=BL-2*BI-BN;break;case 1:BH.xOffset=BF-BI-BJ;BH.yOffset=BL-BI-BM;BH.rect.x=BF-2*BI-BG;BH.rect.y=BL-2*BI-BN;break;case 2:BH.xOffset=BF-BI-BJ;BH.yOffset=BL+BI+BM;BH.rect.x=BF-2*BI-BG;BH.rect.y=BL;break;case 3:BH.xOffset=BF+BI+BJ;BH.yOffset=BL+BI+BM;BH.rect.x=BF;BH.rect.y=BL;break;}return BH;}function A0(BH){var BK=this.mChartContextPtr,BW=BK.mGraphWidth,Bb=BK.mGraphHeight,BY=BK.mpGraphMatrixContext,BF,BR,BT,BJ,BO,BM,BL,BZ,BU,BI,BN,BG,BQ,BS,Ba,BP,BV,BX,Bc=BY.getPadding(Ak.kAxisOriginLabel);BO=this.xAxis;BU=Ap.gAxisObjects[BO.getIndex()].mCustomLabelId;BF=BH?this.y1Axis:this.y2Axis;BR=BF.mOptions.mAxisCustomValue;BT=BF.ValueToPosition(BR);BJ=new Ap.NumberObject({TripleId:BU,GraphObjectManager:this,Number:BR,NumberFormat:BF.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BO.mCondenseLabels});BM=BO.mOptions.mAxisCustomValue;BL=BO.ValueToPosition(BM);BZ=new Ap.NumberObject({TripleId:BU,GraphObjectManager:this,Number:BM,NumberFormat:BO.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BO.mCondenseLabels});BI="("+BZ.mText+", "+BJ.mText+")";BN=new Ap.TextObject({TripleId:BU,GraphObjectManager:this,GraphCollectionObject:null});BN.SetText(BI);BG=BN.GetBoundingRect(true);BQ=BG.height;BS=BG.width;Ba=false;for(BX=0;BX<4&&!Ba;++BX){BP={};BV=AV.call(this,BX,BQ,BS,BL,BT,Bc);BP.xOffset=BV.xOffset;BP.yOffset=BV.yOffset;BP.rect=BV.rect;Ba=Ay.call(this,BP,Bb,BW,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ba){BN.MoveTo(BP.xOffset,BP.yOffset,A2.CENTER);BN.mIsShown=true;this.mPostTrendLineObjects.push(BN);this.axisOriginLabels.push(BN);}}function AN(){var BH=0,BG,BF,BI;BG=I.call(this,this.y1Axis);BF=I.call(this,this.y2Axis);BI=I.call(this,this.xAxis);if((BG||BF)&&BI){BH=true;}if(BH){A0.call(this,BG);}else{if(BG){AR.call(this,this.y1Axis);}if(BF){AR.call(this,this.y2Axis);}if(BI){AR.call(this,this.xAxis);}}}function l(BV,BU){var BM=this.mChartContextPtr,BP=null,BJ,BF,BN,BI,BL=BV.Id,BQ=BV.MarkerType,BO=BV.Shape,BH=BV.Position,BS=BV.Size,BG=[];if(BM.mIsGraphMatrix){var BR=BV.BoundingBox;if(U.call(this,BV)){if(this.waitingList===null){this.waitingList=[];}this.waitingList.push(BV);return[];}BJ=null;switch(BQ){case A9.DssGraphMarkerShapeGMTick:var BT=BM.transformRectToTicker(BR,true);if(BT.length>=2){BP=new Ap.StraightLineObject({TripleId:BL,GraphObjectManager:this,StartPoint:BT[0],EndPoint:BT[1],GraphCollectionObject:null,Shape:c._TICKER});}else{return[];}break;case A9.DssGraphMarkerShape2DPie:case A9.DssGraphMarkerShape2DRingPie:var BK=0;if(BQ===A9.DssGraphMarkerShape2DRingPie){BK=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new Ap.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BM,Layout:BK,PlotType:s.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}BF=this.mDatasetPtr.GetPieCountAtOneDataPoint(BL.mSeriesId,BL.mGroupId);for(BI=0;BI<BF;++BI){BN=this.mPieRenderer.drawSinglePie(BL.mSeriesId,BL.mGroupId,BI,BH,BF);BG=BG.concat(BN);}break;case A9.DssGraphMarkerShapeSquare:case A9.DssGraphMarkerShapeRectangle:BP=new Ap.RectangleObject({TripleId:BL,GraphObjectManager:this,GraphCollectionObject:null,Area:BR,Shape:BO});break;default:BP=new Ap.MarkerObject({TripleId:BL,GraphObjectManager:this,MarkerPosition:BH,MarkerShape:BQ,IsIsometric:true,MarkerSize:BS,GraphCollectionObject:BJ,IsDialogSize:false,Shape:BO});break;}}else{BP=new Ap.MarkerObject({TripleId:BL,GraphObjectManager:this,MarkerPosition:BH,MarkerShape:BQ,IsIsometric:true,MarkerSize:BS,GraphCollectionObject:BU,IsDialogSize:!this.isBubbleChart});}if(BP!==null&&BP!==undefined){BG.push(BP);this.AddToMap(BP);if(BU){BU.AddGraphObject(BP);}}return BG;}function BD(BV,BN,BF,BT,BO){var BG=this.VecSeriesInfo[BT].MarkerShape,BK=0,BM=this.VecSeriesInfo[BT].IsNullData.length,BU,BS,BR,BP,BH,BJ,BW,BI,BL,BQ;BQ=new Ap.TripleId({ObjectId:A6.DssGraphRiser,SeriesId:this.VecSeriesInfo[BT].SeriesID});BU=new Ap.GraphCollectionObject({TripleId:BQ,GraphObjectManager:this,CollectionType:AM.CT_GENERAL_SHAPE});for(BS=0;BS<BM;++BS){if(this.VecSeriesInfo[BT].IsNullData[BS]){continue;}BH=BF[BK];BJ=this.isBubbleChart?BO:BU;BW=new Ap.TripleId({ObjectId:A6.DssGraphRiser,SeriesId:this.VecSeriesInfo[BT].SeriesID,GroupId:BS});BP={MarkerShape:BG,Size:BH,Position:BN,Id:BW,MarkerType:this.VecSeriesInfo[BT].MarkerShape};BI=l.call(this,BP,BO);if(BI.length>0){for(BR=0;BR<BI.length;++BR){this.mGraphObjectList.push(BI[BR]);this.AddToMap(BI[BR]);BJ.AddGraphObject(BI[BR]);BL=BI[BR].GetBoundingRect();BV[BT].push(BL);}}}if(!this.isBubbleChart){this.AddToMap(BU);}}function A7(BK,BH,BJ){var BG,BI,BF;if(BK.length===0){return ;}if(this.VecSeriesInfo[BH].ConnectDataPoint){BG=this.isBubbleChart?null:BJ;BF=new Ap.TripleId({ObjectId:A6.DssGraphDataLine,SeriesId:this.VecSeriesInfo[BH].mSeriesId,GroupId:As});BI=new Ap.PolyLineObject({TripleId:BF,GraphObjectManager:this,PolyLine:BK,Parent:BG});this.mGraphObjectList.push(BI);this.AddToMap(BI);if(!this.isBubbleChart){BJ.AddGraphObject(BI);}}}function AA(BL,BG){Ar.call(this,BL);var BJ,BI,BO=this.VecSeriesInfo,BM=BO.length,BS=this.mDatasetPtr.GetGroupCount(),BR,BK,BQ,BH,BP,BN=false;for(BJ=0;BJ<BM;++BJ){BH=[];BP=[];var BF=BO[BJ].ShowDataLabel;BN=BN||BF;for(BI=0;BI<BS;++BI){BK=new Ap.Point2D();BR=Az.call(this,BJ,BI,BK);this.VecSeriesInfo[BJ].IsNullData.push(!BR);if(!BR){continue;}BQ=BC.call(this,BJ,BI);if(BQ===undefined){continue;}BH.push(BK);BP.push(BQ);}A7.call(this,BH,BJ,BL[BJ]);BD.call(this,BG,BH,BP,BJ,BL[BJ]);}return{IsLabelPossible:BN,MarkerRectangles:BG};}function AX(BQ){var BX,BU,BP=this.VecSeriesInfo,Bb=BP.length,BH=this.mDatasetPtr.GetGroupCount(),BG,Bg,BY,BK=this.mGraphObjectList,Bf=this.drawBySize,Ba=[],BL=false,BJ=this.mChartContextPtr,BZ=BJ.GetGraphMatrixContext(),BI=BZ.mMarkerShape,BS=BI===A9.DssGraphMarkerShape2DPie||BI===A9.DssGraphMarkerShape2DRingPie,BF=BJ.mPartialRendering,Be=[],BW=function BW(Bj,Bi){if(Bj.Size<Bi.Size){return 1;}if(Bj.Size>Bi.Size){return -1;}return 0;};for(BX=0;BX<Bb;++BX){var Bd=BP[BX].ShowDataLabel;BL=BL||Bd;for(BU=0;BU<BH;++BU){Bg=new Ap.Point2D();BG=Az.call(this,BX,BU,Bg);BP[BX].IsNullData.push(!BG);if(!BG){continue;}BY=BC.call(this,BX,BU);if(BY===undefined){continue;}var Bh=new Ap.TripleId({ObjectId:A6.DssGraphRiser,SeriesId:BP[BX].SeriesID,GroupId:BU});if(BJ.checkColorByAndSizeByValue(Bh,this.mDatasetPtr,this.mHasColorBy&&!BS,this.mHasSizeBy)===false){BP[BX].IsNullData[BP[BX].IsNullData.length-1]=true;continue;}var BR=H.call(this,BI,Bg,BY);BR.Id=Bh;BR.Position=Bg;BR.Size=BY;BR.MarkerType=BP[BX].MarkerShape;Ba.push(BR);++this.DPCount;if(this.seriesDPCount[BX]===undefined||this.seriesDPCount[BX]===null){this.seriesDPCount[BX]=1;}else{++this.seriesDPCount[BX];}}}if(Bf||BF){Ba.sort(BW);if(BF){Ba.reverse();}}var BT;for(BX=0;BX<Ba.length;BX++){var BM=l.call(this,Ba[BX],null);for(BT=0;BT<BM.length;++BT){var Bc=Ba[BX],BN=Bc.Id.mSeriesId,BO=Bc.Id.mGroupId;BI=Bc.MarkerType;var BV=BI===A9.DssGraphMarkerShape2DPie||BI===A9.DssGraphMarkerShape2DRingPie;BQ[BN][BO]=Bc.BoundingBox;if(BV){this.AddToMap(BM[BT]);}Be.push(BM[BT]);}}if(BF){Be.reverse();this.shapeCanvas=null;}for(BX=0;BX<Be.length;BX++){BK.push(Be[BX]);}return{IsLabelPossible:BL,MarkerRectangles:BQ};}function h(BJ,BK,BN,BM){var BH=this.mChartContextPtr,BL=BH.GetGraphMatrixContext(),BF,BI,BG;if(BH.mIsGraphMatrix&&!BM){BL=BH.GetGraphMatrixContext();if(BL.isPieOrRingShape()){BF=BL.GetMaxMarkerSize(Aj._PIE,true,1,this.isBubbleChart);}else{if(BL.mMarkerShape===A9.DssGraphMarkerShapeGMTick){BF=BL.GetMaxMarkerSize(Aj._TICK_VALUE,true,this.isBubbleChart);}else{BF=BL.GetMaxMarkerSize(Aj._SHAPES_IN_BUBBLESCATTER,false,0,this.isBubbleChart);}}return Math.round(BF);}BI=BJ.width;BG=BJ.height;return Math.round(Math.min(BI/BK+0.5,BG/BN+0.5)*0.5);}function j(){var BI,BF,BJ=this.mDatasetPtr.GetSeriesCount(),BH=this.mDatasetPtr.GetGroupCount(),BG;if(this.mDatasetPtr.GetSeriesByColumn()){BI=BH;BF=BJ;}else{BF=BH;BI=BJ;}if(BI*BF===0){return 0;}BG=h.call(this,this.mDataArea,BI,BF,false);if(BG<3){BG=3;}return BG;}mstrmojo.chart.ValuePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.ValuePlot",dataLabelLine:false,isBubbleChart:false,isSmarted:false,maxUnitRadius:-1,maxRadius:-10,minRadius:10000,labelFormat:Ae.DssGraphDataTextSeriesDependent|Ae.DssGraphDataTextLabel,labelLocation:Ag.DssGraphDTPositionCenter,xAxis:null,y1Axis:null,y2Axis:null,zAxis:null,VecSeriesInfo:[],standAloneMarkers:[],labelMatrix:[],drawBySize:false,mPieRenderer:null,mDataLabels:[],mTrendLineObjects:null,mReferenceLineObjects:null,waitingList:null,shapeCanvas:null,viewPort:null,init:function AU(BF){var BG;this._super(BF);BG=this.mChartContextPtr;this.xAxis=null;this.y1Axis=null;this.y2Axis=null;this.zAxis=null;this.VecSeriesInfo=[];this.standAloneMarkers=[];this.labelMatrix=[];this.isBubbleChart=(BG.GetGraphMajorType()===Al.GMT_BUBBLE);this.drawBySize=this.isBubbleChart&&this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];},OnRectangleSelection:function o(BN,BQ,BL){BL=BL||0;var BG=this.mChartContextPtr;if(BL===0&&this.waitingList){var BP=this.waitingList,BJ=BP.length,BI,BO,BM,BK,BF,BH=(BP[0].Shape===c._PIE)?"pie":"shape";for(BI=0;BI<BJ;BI++){BO=BP[BI].Position.x;BM=BP[BI].Position.y;if((BO>=BN.x&&BO<=BN.x+BN.width)&&(BM>=BN.y&&BM<=BN.y+BN.height)){BF=BP[BI].Id;BK=BG.getIdentity(BF,BH);BQ.push(BK);}}}},GenerateMapAndList:function AH(){var BF,BL=[],BK,BJ,BM=this.mChartContextPtr,BH=BM.mIsGraphMatrix,BG=this.VecSeriesInfo.length;this.maxUnitRadius=j.call(this);BF=[];for(BK=0;BK<BG;++BK){BF.push([]);}if(BM.mImageUsage!==AO.GENERAL){return ;}var BI;if(BH){BI=AX.call(this,BF);}else{BI=AA.call(this,BL,BF);}BF=BI.MarkerRectangles;BJ=BI.IsLabelPossible;Aw.call(this,BF,BJ);P.call(this);An.call(this);D.call(this);AN.call(this);},Draw:function At(){var BH=this.drawBySize,BJ=this.mChartContextPtr,BG=this.VecSeriesInfo.length;if(BH){var BF=[],BI;for(BI=0;BI<BG;BI++){BF[BI]=0;}BJ.setDrawingOrderToCanvas(BF);}Ap.GraphObjectManager.prototype.Draw.apply(this,[]);p.call(this);X.call(this);this.DrawPostTrendLineObjects();},AssignValueAxis:function T(BG,BF){switch(BF){case 0:this.xAxis=BG;break;case 1:this.y1Axis=BG;break;case 2:this.y2Axis=BG;break;case 3:this.zAxis=BG;break;default:break;}},AssignSeriesInfo:function Y(BH,BK){var BG=BH.length,BJ,BI,BF;for(BF=0;BF<BG;++BF){BI=Av.call(this);this.VecSeriesInfo.push(BI);BJ=BH[BF];this.VecSeriesInfo[BF].SeriesID=BJ;this.VecSeriesInfo[BF].ValueAxisIndex=BK[BJ];}this.LoadProperties();},GetMaxElementRadius:function AQ(){var BG=new Ap.TripleId(),BF=this.mChartContextPtr.GetProperty(Au.DssGraphMatrixUsePerfectPadding,BG);if(BF===null||BF===undefined){return 0;}return this.maxUnitRadius;},GetMaxElementOffsetClippedByBoundary:function V(BH,BT){var Bd={LowOffset:0,HighOffset:0},BK=this.mChartContextPtr,BZ=BK.GetGraphMatrixContext(),BU,BM,Bf,BL,BS,BR,BQ,BP,BX,BJ,BW,BV,BI,BY;if(BT===undefined){BT=true;}if(!BK.mIsGraphMatrix){return Bd;}var BG=BH?(BT?"X1":"X2"):(BT?"Y1":"Y2"),BF=this.mClippedElementSize;if(BF[BG]!==undefined){return BF[BG];}if(this.maxUnitRadius<0){this.maxUnitRadius=j.call(this);}BX=this.mDatasetPtr.GetSeriesCount();BJ=this.mDatasetPtr.GetGroupCount();var BO={LowOffset:0,HighOffset:0};var BN={LowOffset:0,HighOffset:0};for(BW=0;BW<BX;++BW){for(BV=0;BV<BJ;++BV){Af.Reset(0,0);BI=Az.call(this,BW,BV,Af);if(!BI){continue;}BY=BC.call(this,BW,BV);if(BY===undefined){continue;}var Be=0,Bb=0;var Bc=0,Ba=0;Bd={LowOffset:0,HighOffset:0};BU=this.xAxis;BM=this.y1Axis;if(BU===null||BM===null){BF[BG]=Bd;return Bd;}Bf=BU.GetMaxMinDataInput();BL=BM.GetMaxMinDataInput();BS=BU.GetPositionByValue(Bf.Min);BR=BM.GetPositionByValue(BL.Min);if(BS===null||BR===null){BF[BG]=Bd;return Bd;}BQ=BU.GetPositionByValue(Bf.Max);BP=BM.GetPositionByValue(BL.Max);if(BQ===null||BP===null){BF[BG]=Bd;return Bd;}Be=BO.LowOffset;Bb=BO.HighOffset;BO=BZ.getClippedOffset(BS,BQ,BY,Af,true,Be,Bb);Be=Math.max(BO.LowOffset,Be);Bb=Math.max(BO.HighOffset,Bb);BF.X1=BO;Bc=BN.LowOffset;Ba=BN.HighOffset;BN=BZ.getClippedOffset(BR,BP,BY,Af,false,Bc,Ba);Bc=Math.max(BN.LowOffset,Bc);Ba=Math.max(BN.HighOffset,Ba);BF.Y1=BN;}}if(BF.X1){BF.X2=mstrmojo.hash.copy(BF.X1);}else{BF.X1=BF.X2={LowOffset:0,HighOffset:0};}if(BF.Y1){BF.Y2=mstrmojo.hash.copy(BF.Y1);}else{BF.Y1=BF.Y2={LowOffset:0,HighOffset:0};}return BF[BG];},refresh:function Ao(BF,BG){if(BF==="clipping"){this.mDataArea.width=this.mChartContextPtr.mGraphWidth;this.mDataArea.height=this.mChartContextPtr.mGraphHeight;this.maxUnitRadius=-1;this.mClippedElementSize={};}else{}},LoadProperties:function Ab(){var BH,BL,BF,BK=this.isBubbleChart?A5.DssGraphShowSDLine:A5.DssGraphShowLine,BJ,BM=this.mChartContextPtr,BG=BM.GetGraphMatrixContext(),BI=BM.mIsGraphMatrix;for(BJ=0;BJ<this.VecSeriesInfo.length;++BJ){BH=this.VecSeriesInfo[BJ];BF=new Ap.TripleId({ObjectId:A6.DssGraphRiser,SeriesId:BH.SeriesID});if(BI){BH.MarkerShape=BG.mMarkerShape;}else{BL=BM.GetProperty(A5.DssGraphSDMarkerShape,BF);if(BL){BH.MarkerShape=BL;}else{BH.MarkerShape=A9.DssGraphMarkerShapeCircle;}}switch(BH.MarkerShape){case A9.DssGraphMarkerShapeCircle:case A9.DssGraphMarkerShapeRectangle:case A9.DssGraphMarkerShapeSquare:case A9.DssGraphMarkerShape2DPie:case A9.DssGraphMarkerShape2DRingPie:break;default:this.drawBySize=false;break;}if(BM.mImageUsage!==0){return ;}BL=BM.GetProperty(BK,BF);if(BL){BH.ConnectDataPoint=BL;}BL=BM.GetProperty(A5.DssGraphSDShowDataText,BF);if(BL){BH.ShowDataLabel=BL;}if(BI){BH.ShowDataLabel=this.mDatasetPtr.showSeriesDatalabel(BF.mSeriesId);}this.LoadTrendLineProperties(this.VecSeriesInfo[BJ].SeriesID,BH.TrendLineOptions);}BL=BM.GetProperty(A5.DssGraphNewUseSmartLabels,AD);if(BL){this.isSmarted=BL;}BL=BM.GetProperty(A5.DssGraphAxisDataTextPlace,AD);if(BL){this.labelLocation=BL;}BL=BM.GetProperty(A5.DssGraphShowDataText,AD);if(BL){this.labelFormat=BL;}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumAnchorPoint","EnumGraphMatrixMarkerTypeInChart","EnumLineStyle","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode","EnumCollectionType","EnumFontStyle");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","PiePlotRenderer","Rect2D","Vector2D","NumberObject","MarkerObject","FormatFill","Point2D","GMDataLabelInfo");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure","mstrmojo.VisUtility");var AT=mstrmojo.chart,Y=AT.common,P=AT.enums,AP=AT.ChartConstants,AB=mstrmojo.VisUtility,AY=P.EnumLayout,AD=P.EnumOrientation,AA=P.EnumValueAxis,Ac=P.EnumAnchorPoint,AN=P.EnumGraphMatrixMarkerTypeInChart,AW=P.EnumAxisDirection,z=P.EnumImageUsage,a=P.EnumGraphMatrixPiePlotType,y=P.EnumCollectionType;var AM=AT.model,AC=AM.enums,Ag=AC.EnumDSSGraphMarkerShape,O=AC.EnumDSSGraphRegressionType,AL=AC.EnumDSSGraphDataTextPosition,U=AC.EnumShapeType,AF=P.EnumGraphMatrixElementSizeMode,Af=AC.EnumDSSGraphObject,E=P.EnumFontStyle;var D=AT.common.Utility;var AR=1e-10,v=0.00001,w=2,G=3,n=1,l=2,k=3,h=4,f=5,d=6;var r=new AT.ChartAdvFormat(),Aa=new AT.Point2D(),x=new AT.Point2D(),L=new AT.Point2D();function W(Am,Al){var An;if(Am.cannotFitVertically===true&&Al.cannotFitVertically===false){return 1;}if(Am.cannotFitVertically===false&&Al.cannotFitVertically===true){return -1;}if(Am.cannotFitHorizontally===true&&Al.cannotFitHorizontally===false){return 1;}if(Am.cannotFitHorizontally===false&&Al.cannotFitHorizontally===true){return -1;}An=Am.overlapRefLabelCount-Al.overlapRefLabelCount;if(An<0){return -1;}if(An>0){return 1;}An=Am.overlapRefLineCount-Al.overlapRefLineCount;if(An<0){return -1;}if(An>0){return 1;}An=Am.overlapDataLabelCount-Al.overlapDataLabelCount;return An;}function q(Al){switch(Al){case U._CIRCLE:return Ag.DssGraphMarkerShapeCircle;case U._RECTANGLE:return Ag.DssGraphMarkerShapeRectangle;case U._SQUARE:return Ag.DssGraphMarkerShapeSquare;case U._TICKER:return Ag.DssGraphMarkerShapeGMTick;default:return Ag.DssGraphMarkerShapeNone;}}function Aj(An,Am,Ar,Ay,Ao,Al,Aw){var At=-1,As=-1,Av=-1,Au=new AT.Point2D({x:-1,y:-1}),Aq=this.mpABLPlotContext,Ap=Aq.mCategoryAxisPtr,Ax=Aq.mValueAxis;if(this.mIsVertical){At=Ap.getSubGroupMiddlePos(Am,Ay,Al);Av=Ax[this.mSeriesInfo[An].mValueAxis].GetPositionByValue(Ar);if(Av!==null){As=Av;}}else{As=Ap.getSubGroupMiddlePos(Ar,Ao,Aw);Av=Ax[this.mSeriesInfo[An].mValueAxis].GetPositionByValue(Am);if(Av!==null){At=Av;}}if(At>=0&&As>=0){Au.x=At;Au.y=As;}return Au;}function e(Ax,Ap,Az,Am){var Ao=0,Ar,Al,Aq,An=1,Au=1,Ay,At,Av=[Ax,Ap,Az];if(this.mPieCentersPool===null){this.mPieCentersPool=new Y.MapStructure();}var As=this.mPieCentersPool.find(Av);if(As!==null&&As!==undefined){return As;}Ay=Am||this.mDatasetPtr.GetPieCountAtOneDataPoint(this.mSeriesInfo[Ax].mSeriesId,Ap);if(this.mIsVertical){An=Ay;}else{Au=Ay;}At=this.GetData(Ax,Ap);if(At!==null){Ao=At;}Al=this.mSeriesInfo[Ax].mSeriesId;Ar=Ap;Aq=Az;if(this.mIsVertical){var Aw;Aw=Ao;Ao=Ar;Ar=Aw;Aw=Al;Al=Aq;Aq=Aw;}As=Aj.call(this,Ax,Ao,Ar,Al,Aq,An,Au);this.mPieCentersPool.replace(Av,As);return As;}function Z(){var Am=this.mTrendLineObjects.length,Al;for(Al=0;Al<Am;++Al){this.mTrendLineObjects[Al].Draw();}}function R(){var Am=this.mReferenceLineObjects.length,Al;for(Al=0;Al<Am;++Al){this.mReferenceLineObjects[Al].Draw();}}function B(An){var Am,Al=0;for(Am=0;Am<An.length;Am++){if(An[Am]!==null){Al++;}}return Al;}function j(Ao,An,Au,Aw,As,Am){var Aq,Ap,Al,Av,Ax,Ar,At;if(this instanceof mstrmojo.chart.BarSeriesRenderer){Aq={groupID:An,seriesInfoID:Ao,groupIndex:0,useFloat:!Am};if(Am){Ap=this.GetRiserStartPosAndSize(Aq);Av=Aw.GetPositionByValue(Au);}else{Ap=this.GetRiserStartPosAndSize(Aq);Av=Aw.GetFloatPositionByValue(Au);}Al=Ap.Start+Ap.Size/2;}else{if(this instanceof mstrmojo.chart.AreaSeriesRenderer||this instanceof mstrmojo.chart.LineSeriesRenderer){if(Am){Al=this.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(An);Av=Aw.GetPositionByValue(Au);}else{Al=this.mpABLPlotContext.mCategoryAxisPtr.getFloatGroupMiddlePos(An);Av=Aw.GetFloatPositionByValue(Au);}}}Ax=As?Al:Av;Ar=As?Av:Al;At=new AT.Point2D({x:Ax,y:Ar});return At;}function b(Aq){var Ao,Al,An,Ap,Am,Ar;An=Aq.length;if(An<=2){Al=Aq;}else{Al=[];Al.push(Aq[0]);for(Ao=0;Ao+2<An;++Ao){Ar=false;if((Math.abs(Aq[Ao].x-Aq[Ao+1].x)>AR)&&(Math.abs(Aq[Ao+1].x-Aq[Ao+2].x)>AR)){Ap=(Aq[Ao+1].y-Aq[Ao].y)/(Aq[Ao+1].x-Aq[Ao].x);Am=(Aq[Ao+2].y-Aq[Ao+1].y)/(Aq[Ao+2].x-Aq[Ao+1].x);if(Math.abs(Ap-Am)<v){Ar=true;}}else{if((Math.abs(Aq[Ao].x-Aq[Ao+1].x)<=AR)&&(Math.abs(Aq[Ao+1].x-Aq[Ao+2].x)<=AR)){Ar=true;}else{if((Math.abs(Aq[Ao].x-Aq[Ao+1].x)>AR)&&(Math.abs(Aq[Ao+1].x-Aq[Ao+2].x)<=AR)){if(Math.abs(Aq[Ao+1].y-Aq[Ao+2].y)<=AR){Ar=true;}}}}if(!Ar){Al.push(Aq[Ao+1]);}}Al.push(Aq[An-1]);}return Al;}function o(Ao,Av,Ar,Al,An,Au,At,Aq,Ap,As){var Am={};Am.rect=new AT.Rect2D({x:0,y:0,width:Al+2*Ap,height:Av+2*Ap});switch(Ao){case n:if(As){Am.xOffset=Au+Ap+An;Am.yOffset=Ap+Ar;Am.rect.x=Au;Am.rect.y=0;}else{Am.xOffset=Aq-Ap-An;Am.yOffset=Au-Ap-Ar;Am.rect.x=Aq-2*Ap-Al;Am.rect.y=Au-2*Ap-Av;}break;case l:if(As){Am.xOffset=Au-Ap-An;Am.yOffset=Ap+Ar;Am.rect.x=Au-2*Ap-Al;Am.rect.y=0;}else{Am.xOffset=Aq-Ap-An;Am.yOffset=Au+Ap+Ar;Am.rect.x=Aq-2*Ap-Al;Am.rect.y=Au;}break;case k:if(As){Am.xOffset=Au+Ap+An;Am.yOffset=At/2;Am.rect.x=Au;Am.rect.y=At/2-Ap-Ar;}else{Am.xOffset=Aq/2;Am.yOffset=Au-Ap-Ar;Am.rect.x=Aq/2-Ap-An;Am.rect.y=Au-2*Ap-Av;}break;case h:if(As){Am.xOffset=Au-Ap-An;Am.yOffset=At/2;Am.rect.x=Au-2*Ap-Al;Am.rect.y=At/2-Ap-Ar;}else{Am.xOffset=Aq/2;Am.yOffset=Au+Ap+Ar;Am.rect.x=Aq/2-Ap-An;Am.rect.y=Au;}break;case f:if(As){Am.xOffset=Au+Ap+An;Am.yOffset=At-Ap-Ar;Am.rect.x=Au;Am.rect.y=At-2*Ap-Av;}else{Am.xOffset=Ap+An;Am.yOffset=Au-Ap-Ar;Am.rect.x=0;Am.rect.y=Au-2*Ap-Av;}break;case d:if(As){Am.xOffset=Au-Ap-An;Am.yOffset=At-Ap-Ar;Am.rect.x=Au-2*Ap-Al;Am.rect.y=At-2*Ap-Av;}else{Am.xOffset=Ap+An;Am.yOffset=Au+Ap+Ar;Am.rect.x=0;Am.rect.y=Au;}break;}return Am;}function AQ(Ap,Aw,As,Aq,An,Al){var At=Ap.rect,Ar,Ao,Am,Au,Av;if(At.y<0||At.y+At.height>Aw){Ap.cannotFitVertically=true;return ;}if(At.x<0||At.x+At.width>As){Ap.cannotFitHorizontally=true;}Ar=An.length;for(Ao=0;Ao<Ar;++Ao){Am=An[Ao].GetBoundingRect();if(At.HasIntersection(Am)){++Ap.overlapRefLabelCount;}}Ar=Al.length;for(Ao=0;Ao<Ar;++Ao){Av=Al[Ao];if(Av.isVertical){if(At.x<Av.position&&At.x+At.width>Av.position){++Ap.overlapRefLineCount;}}else{if(At.y<Av.position&&At.y+At.height>Av.position){++Ap.overlapRefLineCount;}}}Ar=Aq.length;for(Ao=0;Ao<Ar;++Ao){Au=Aq[Ao];if(Au.mIsShown){Am=Au.GetBoundingRect();if(At.HasIntersection(Am)){++Ap.overlapDataLabelCount;Ap.overlapDataLabels.push(Aq[Ao]);}}}}function t(A8,A3,At){var An=this.mChartContextPtr,A7=An.GetGraphMatrixContext(),Am=A7.getPadding(AP.kRefLabel),As=At.length,Aq,Ar,A0,Ax,Ap,Ay,Al,A5,A4,A1,Ao,Av,A2,Az,A6,Au=this.mpABLPlot.shownDataLabels,Aw=this.mpABLPlot.shownRefLabels;for(A5=0;A5<As;++A5){Aq=At[A5];Ar=new AT.TextObject({TripleId:Aq.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:Aq.identity});if(Ar!==null){Ar.SetText(Aq.labelText);for(A4=0;A4<2;++A4){if(A4===1){Ao=Ar.mText;Ar.SetText(Ao[0]+"...");Ar.rect.height=0;Ar.rect.width=0;}Al=Ar.GetBoundingRect();Ax=Al.height;Ay=Ax/2;A0=Al.width;Ap=A0/2;Az=[];for(A1=n;A1<=d;++A1){Av={};Av.position=A1;Av.cannotFitVertically=false;Av.cannotFitHorizontally=false;Av.overlapRefLabelCount=0;Av.overlapRefLineCount=0;Av.overlapDataLabelCount=0;Av.overlapDataLabels=[];A2=o.call(this,A1,Ax,Ay,A0,Ap,Aq.position,A8,A3,Am,Aq.isVertical);Av.xOffset=A2.xOffset;Av.yOffset=A2.yOffset;Av.rect=A2.rect;AQ.call(this,Av,A8,A3,Au,Aw,At);Az.push(Av);}Az.sort(W);if(Az[0].cannotFitVertically){break;}if(Az[0].cannotFitHorizontally){if(A5===0){continue;}else{break;}}Ar.MoveTo(Az[0].xOffset,Az[0].yOffset,Ac.CENTER);Ar.mIsShown=true;A6=Az[0].overlapDataLabelCount;for(A1=0;A1<A6;++A1){Az[0].overlapDataLabels[A1].mIsShown=false;}this.mpABLPlot.mPostTrendLineObjects.push(Ar);Aw.push(Ar);break;}}}}mstrmojo.chart.SeriesRenderer=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.SeriesRenderer",mDeviceDataArea:null,mpABLPlot:null,mGroupCount:0,mSeriesCount:0,mDatasetPtr:null,mLegendPtr:null,mSeriesInfo:null,mCumulateData:null,mSeriesNumber:null,mTextCollection:null,mTrendLineObjects:null,mReferenceLineObjects:null,mpABLPlotContext:null,mIsVertical:true,mUseDepth:false,mHasNegativeValue:false,mDepth:0,mDepthDirection:0,mStartLevel:0,mGroupIdMapPerSeries:[],mHasSizeBy:false,mHasColorBy:false,mClippedMarkerSize:null,mPieRenderer:null,mPieCentersPool:null,renderSequence:null,init:function AE(Am){this._super(Am);this.mSeriesInfo=[];this.mCumulateData=[[],[]];this.mClippedMarkerSize={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};this.mSeriesNumber=[0,0];this.mTextCollection=[];this.mTrendLineObjects=[];this.mReferenceLineObjects=[];this.mDatasetPtr=Am.DataSet;this.mLegendPtr=Am.Legend;this.mDepth=0;this.mDepthDirection=0;this.mHasNegativeValue=false;this.mpABLPlot=this.mpManager;this.mGroupCount=this.mDatasetPtr.GetGroupCount();var Ao=this.mpABLPlotContext=this.mpABLPlot.mABLPlotContext;this.mIsVertical=(Ao.mABLOptions.mOrientation===AD.OR_VERTICAL);this.mUseDepth=Ao.mABLOptions.mUseDepth;if(this.mUseDepth){this.mDepth=this.mpABLPlot.unitLevelDepth;this.mDepthDirection=Ao.mABLOptions.mDepthDirection;}var An=this.mChartContextPtr,Al=An.GetGraphMatrixContext();this.mHasSizeBy=Al.mHasSizeBy;this.mHasColorBy=Al.mHasColorBy;this.renderSequence=[];},AddSeries:function Ai(Am,Ao,Al,An){this.mSeriesInfo.push({mSeriesId:Am,mSeriesIndex:Ao,mDataIndex:Al,mValueAxis:An});++this.mSeriesNumber[An];},GetMinMaxValue:function Q(A1,Ap,Aw,At){var Am=this.mChartContextPtr,As,Ay,Az,Av=[],Aq,Ao,An,A0=this.mSeriesInfo,Au,Al;if(A0.length===0){return{Min:Ap,Max:Aw,AreInitialized:At};}if(Am.mIsUniformAxisMode){var Ar=Am.getUniformAxisContext(),Ax=Ar.ValueAxis;if(Am.IsVertical()===false){if(A1===0){return{Min:Ax.X1.Min,Max:Ax.X1.Max,AreInitialized:true};}else{return{Min:Ax.X2.Min,Max:Ax.X2.Max,AreInitialized:true};}}if(A1===0){return{Min:Ax.Y1.Min,Max:Ax.Y1.Max,AreInitialized:true};}return{Min:Ax.Y2.Min,Max:Ax.Y2.Max,AreInitialized:true};}As=Am.mIsTimeSeriesChart&&this.mpABLPlotContext.mABLOptions.mUseGlobalAutoScale;Ay=0;Az=this.mDatasetPtr.GetDataGroup();for(Aq=0;Aq<A0.length;++Aq){if(A0[Aq].mValueAxis===A1){if(As){Av.push(A0[Aq].mSeriesId);}else{for(Ao=0;Ao<this.mGroupCount;++Ao){for(An=0;An<Az;++An){Ay=this.GetData(Aq,Ao,false,An);if(Ay!==null){continue;}if(!At){At=true;Ap=Ay;Aw=Ay;}else{Aw=Math.max(Ay,Aw);Ap=Math.min(Ay,Ap);}}}}}}if(As&&Av.length!==0){Au=0;Al=0;Ay=this.mDatasetPtr.GetPeakValuesAcrossSeries(Al,Au,Av,0);Aw=(Ay.Max>Aw)?Ay.Max:Aw;Ap=(Ay.Min<Ap)?Ay.Min:Ap;At=true;}return{Min:Ap,Max:Aw,AreInitialized:At};},GetData:function AH(Ar,As,Ap,Am){var Aw=this.mpABLPlotContext,Au=Aw.mABLOptions,Ao=this.mpABLPlot,Av=Au.mLayout,Az=this.mSeriesInfo,Aq=this.mDatasetPtr,Ax=Az[Ar].mValueAxis,Ay,At,Al,An;Ap=Ap||false;Am=Am||0;if((Av===AY.LO_STACKED)||(Av===AY.LO_PERCENT)){Ay=this.hGetCumulateData(Ax,Az[Ar].mDataIndex,As);At=Aq.GetData(Az[Ar].mSeriesId,As,Am);if(At!==null){if(Ap){Al=Aw.mValueAxis[Ax].GetBaseValue();Ay=(Ay-Al-At)+Al;if(D.AlmostZero(Ay)){Ay=0;}}if(Av===AY.LO_PERCENT){An=Ao.getGroupTotals(As,Ax);if(An===0){Ay=0;}else{Ay/=An;}}return Ay;}if(Av===AY.LO_PERCENT){An=Ao.getGroupTotals(As,Ax);if(An===0){Ay=0;}else{Ay/=An;}}return null;}At=Aq.GetData(Az[Ar].mSeriesId,As,Am);if(At!==null){Ay=At;}else{Ay=null;}return Ay;},SetDeviceDataArea:function I(Al){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AT.Rect2D({Rect2D:Al});}else{this.mDeviceDataArea.ResetRect(Al);}}},IsReverseSeriesOrder:function c(An){var Al=this.mpABLPlotContext.mValueAxis,Am;if(An>=Al.length){return false;}Am=Al[An];return this.mChartContextPtr.IsReverseSeriesOrder(Am,this.mIsVertical,this.mDepthDirection);},IsReverseGroupOrder:function p(){return this.mChartContextPtr.IsReverseGroupOrder(this.mIsVertical,this.mDepthDirection);},PriorToNextSeries:function N(Am){var Ap=this.mChartContextPtr,An,Ao,Al=false;An=this.mIsVertical?new AT.Vector2D({x:1,y:0}):new AT.Vector2D({x:0,y:1});Ao=Ap.normalDirection(Am,this.mDepthDirection)*Ap.normalDirection(An,this.mDepthDirection);if(Ao===0){Al=this.mIsVertical?(Am.y>0):(Am.x<0);}else{Al=Ao>0;}return Al;},CreateTotalLabel:function S(As,Am,Aq){var At=this.mSeriesInfo,Ap=true,Ao=0,An,Ar,Al;for(An=0;An<At.length;++An){if(At[An].mValueAxis===As&&this.mpABLPlotContext.mSeriesOptions[At[An].mSeriesIndex].mShowDataLabels){Ar=this.mDatasetPtr.GetData(At[An].mSeriesId,Am);if(Ar!==null){Ao+=Ar;if(Ap){Ap=false;}}}}if(Ap){return null;}Al=new AT.NumberObject({TripleId:new AT.TripleId({ObjectId:401,SeriesId:As,GroupId:Am}),GraphObjectManager:this,Number:Ao,NumberFormat:this.mpABLPlotContext.mSeriesOptions[0].mGraphNumberFormat,GraphCollectionObject:Aq,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr});this.AddToMap(Al);Aq.AddGraphObject(Al);return Al;},GetUpmostIndexByValueAxisAndGroup:function M(Ar,Ao){var Ap=this.mSeriesInfo,Am,An,Aq,Al;Am=-1;Al=Ap.length;for(An=Al-1;An>-1;--An){if(Ap[An].mValueAxis===Ar){Aq=this.mDatasetPtr.GetData(Ap[An].mSeriesId,Ao);if(Aq!==null){Am=An;if(Aq>0){break;}}}}return Am;},createRiserLabel:function AU(Al,Am,Ap){var Au=this.mSeriesInfo,At=Au[Al],Ao=this.mpABLPlotContext.mABLOptions,An,Aq,As=null,Ar="";An=this.mDatasetPtr.GetData(At.mSeriesId,Am);if(An===null){return null;}Aq=0;if(((Ao.mLayout===AY.LO_STACKED)||(Ao.mLayout===AY.LO_PERCENT))&&(!Ao.mShowCumulate)){Aq=An;if(Ao.mLayout===AY.LO_PERCENT&&Ao.mShowAsPercentage){Aq/=this.mpABLPlot.getGroupTotals(Am,At.mValueAxis);}}else{if(Ao.mLayout===AY.LO_PERCENT&&!Ao.mShowAsPercentage){Aq=this.hGetCumulateData(At.mValueAxis,At.mDataIndex,Am);}else{Aq=this.GetData(Al,Am);if(Aq===null||Aq===undefined){return null;}}}Ao.mShowValue=true;if(Ao.mShowValue){As=this.mpABLPlotContext.mSeriesOptions[At.mSeriesIndex].mGraphNumberFormat;}if(Ao.mShowLabel){Ar=this.mDatasetPtr.GetSeriesLabel(At.mSeriesId,false);}return this.mpABLPlot.createRiserLabel(new AT.TripleId({ObjectId:Af.DssGraphDataText,SeriesId:At.mSeriesId,GroupId:Am}),Aq,As,Ar,Ap);},AddTextToMapAndList:function AJ(){},GetIndexFromSeriesId:function Ak(Ao){var An=this.mSeriesInfo,Al=An.length,Am;for(Am=0;Am<Al;++Am){if(An[Am].mSeriesId===Ao){return Am;}}return -1;},AddLegendMarkerToCollection:function u(Ap,Am,Al,An,Ao,Aq){Al=Al||false;An=(An===undefined)?true:An;Ao=Ao||Ag.DssGraphMarkerShapeRectangle;Aq=(Aq===undefined)?true:Aq;this.mpABLPlot.AddLegendMarkerToCollection(this.mSeriesInfo[Ap].mSeriesId,Am,Al,An,Ao,Aq);},MoveLabel:function AO(Az,Ay,A7,A5,Al){var A3=this.mSeriesInfo,A0=this.mpABLPlotContext.mABLOptions,BA,Au,A9,As,Ax,Ar,Am,At,A2,A4,Aq,Ap,Ao,A6,A8,An,Aw,Av,A1,BB;if(Ay===null||Ay===undefined){return ;}BA=this.mpABLPlotContext.mValueAxis[A3[Al].mValueAxis].IsReverseOrder();Au=BA;A9=BA?-1:1;As=0;BB=this.GetData(Al,Az);if(BB!==null&&BB!==undefined){As=BB;}if(BB&&(As<0)){A9=-A9;Au=!Au;}x.Reset(A7.x,A7.y);L.Reset(A5.x,A5.y);Ax=x;Ar=L;if(this.mIsVertical){if(Au){if(Ax.y<Ar.y){Ax.swapPoints(Ar);}}else{if(Ar.y<Ax.y){Ax.swapPoints(Ar);}}}else{if(Au){if(Ar.x<Ax.x){Ax.swapPoints(Ar);}}else{if(Ax.x<Ar.x){Ax.swapPoints(Ar);}}}Am=Ay.GetBoundingRect();At=Math.floor(Am.width/2);A2=Math.floor(Am.height/2);Aa.Reset(Ax.x,Ax.y);A4=Aa;Aq=Ay.mTripleId;Ap=(Aq.mObjectId===Af.DssGraphDataTextStackTotal);Ao=Ap?AL.DssGraphDTPositionOutMax:A0.mTextPosition;if(Ao===AL.DssGraphDTPositionOutMin||Ao===AL.DssGraphDTPositionInMin){A4.x=Ar.x;A4.y=Ar.y;}switch(Ao){case AL.DssGraphDTPositionCenter:A4.x=(A4.x+Ar.x)/2;A4.y=(A4.y+Ar.y)/2;break;case AL.DssGraphDTPositionInMin:case AL.DssGraphDTPositionOutMax:if(this.mIsVertical){A4.y-=A2*A9;}else{A4.x+=At*A9;}break;case AL.DssGraphDTPositionOutMin:case AL.DssGraphDTPositionInMax:if(this.mIsVertical){A4.y+=A2*A9;}else{A4.x-=At*A9;}break;default:break;}if(Ap&&A0.mTextPosition===AL.DssGraphDTPositionOutMax){A6=this.GetUpmostIndexByValueAxisAndGroup(AA.VA_Y1,Az);A8=this.mpManager.GetGraphObject(new AT.TripleId({ObjectId:Af.DssGraphDataText,SeriesId:A3[A6].mSeriesId,GroupId:Az}));if(!A8){Ay.MoveTo(A4.x,A4.y,Ac.CENTER);return ;}An=A8.GetBoundingRect();Aw=A8.GetFormatFont();Av=Ay.GetFormatFont();A1=Aw.mFontSize+Av.mFontSize;if(this.mIsVertical){if(Aw.isHorizontal()||Av.isHorizontal()){A4.y-=Math.floor(An.height+A1/3)*A9;}else{if(Aw.isVertical()){A4.x+=A1;}else{A4.x+=Math.floor(A1*Math.SQRT2);}}}else{if(Aw.isVertical()||Av.isVertical()){A4.x+=Math.floor(An.width+A1/3)*A9;}else{if(Aw.isHorizontal()){A4.y+=A1;}else{A4.y+=Math.floor(A1*Math.SQRT2);}}}}Ay.MoveTo(A4.x,A4.y,Ac.CENTER);},updateGroupStackInfoWithBase:function AI(Aw,Ap,A0){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}function Az(A5,A4){var A3=A4+1;for(;A3<A5.length;A3++){if(A5[A3]!==null&&A5[A3]!==undefined){return Math.min(A5[A3],A0);}}return A0;}function Aq(A5,A4){var A3=A4-1;for(;A3>=0;A3--){if(A5[A3]!==null&&A5[A3]!==undefined){return Math.max(A5[A3],A0);}}return A0;}var As=this.mStackedGroupInfos,Am;if(As[Aw]&&As[Aw][Ap]){return As[Aw][Ap];}var Ax=As[Aw],Au,A1=[],An=this.mSeriesInfo,Av=An.length;var Ar=[],At=[];for(Au=0;Au<Av;Au++){var Ao=this.GetData(Au,Ap),A2={Min:Ao,Max:Ao,SeriesIndex:Au};(Ao>=0)?Ar.push(A2):At.unshift(A2);}Am=At.concat(Ar);var Al=[],Ay=-1;for(Au=0;Au<Am.length;Au++){A1[Am[Au].SeriesIndex]=Au;Al.push(Am[Au].Max);}for(Au=0;Au<Am.length;Au++){if(Am[Au].Max!==null&&Am[Au].Max!==undefined){if(Am[Au].Max>=A0){Am[Au].Min=Aq(Al,Au);}else{Am[Au].Max=Az(Al,Au);}}}Ax[Ap]=Am;As[Aw+2][Ap]=A1;return Ax[Ap];},getGroupStackedInformation:function AS(Ax,Ar){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}var Ao=this.mStackedGroupInfos;if(Ao[Ax]&&Ao[Ax][Ar]){return Ao[Ax][Ar];}var Al=Ao[Ax],At,Am=[],Au=this.mSeriesInfo,Aq=Au.length;var As=[],Ap=[];for(At=0;At<Aq;At++){var Av=this.GetData(At,Ar,true),Aw=this.GetData(At,Ar),An={Min:Math.min(Av,Aw),Max:Math.max(Av,Aw),SeriesIndex:At};(Aw>=0)?As.push(An):Ap.unshift(An);}Al[Ar]=Ap.concat(As);for(At=0;At<Al[Ar].length;At++){Am[Al[Ar][At].SeriesIndex]=At;}Ao[Ax+2][Ar]=Am;return Al[Ar];},getSeriesOffsetIntoStackedInfo:function J(Ar,Ao,Am){var Aq=this.mStackedGroupInfos;if(Aq[Ar+2]&&Aq[Ar+2][Ao]){return Aq[Ar+2][Ao][Am];}var Al=Aq[Ar],Ap=Al[Ao],An;for(An=0;An<Ap.length;An++){if(Ap[An].SeriesIndex===Am){return An;}}return Am;},analyzeGroupInfo:function T(Ar,Aq,Ap){this.groupStackAnalysis=this.groupStackAnalysis||[[],[]];if(this.groupStackAnalysis[Ar][Aq]){return this.groupStackAnalysis[Ar][Aq];}var Al=this.groupStackAnalysis[Ar],Ao=this.getGroupStackedInformation(Ar,Aq),An,Am={Reverse:3};if(Ao&&Ao.length){An=Ao.length-1;if(Ao[An].Max<=Ap){Am={Reverse:0,CeilUpdated:An};}else{if(Ao[0].Min>=Ap){Am={Reverse:1,FloorUpdated:0};}else{for(An=0;An<Ao.length;An++){if(Ao[An].Max>=Ap){Am.FloorUpdated=An;Am.CeilUpdated=An>0?An-1:-1;}}}}}else{Am={Reverse:4};}Al[Aq]=Am;return Al[Aq];},UpdateCumulateData:function AZ(A1,Av,Az){var Au=this.mSeriesInfo,Ar=this.mDatasetPtr,An=this.mGroupCount,At=this.mCumulateData,A3,Am,Al,A0,Ay,Ax,Aw,As=this.mChartContextPtr.IsDualAxis(),A4=Az!==undefined&&Az>=0,Ao,A2,A5,Ap;if(A4){var Aq=Ar.GetValueAxisBySeries(Az);if(Aq!==A1){return Av;}}A3=Au.length;if(A3===0){return Av;}A0=A3;if(As){Am=this.mSeriesNumber[0];Al=A3-Am;}for(Ay=0;Ay<An;++Ay){Ao=(Av&&Av.positive[Ay])||0;A2=(Av&&Av.negative[Ay])||0;for(Ax=0;Ax<A3;++Ax){if(A4){if(Au[Ax].mSeriesId!==Az){continue;}}if(Au[Ax].mValueAxis===A1){A5=Ar.GetData(Au[Ax].mSeriesId,Ay);Ap=0;if(A5!==null&&A5!==undefined){Ap=A5;if(Ap<0){this.mHasNegativeValue=true;Ap+=A2;A2=Ap;}else{Ap+=Ao;Ao=Ap;}}else{Ap=Ao;}if(A4){if(Ap>=0){Av.positive[Ay]=Ap;}else{Av.negative[Ay]=Ap;}if(As){A0=A1===AA.VA_Y1?Am:Al;}Aw=Ay*A0+Au[Ax].mDataIndex;At[A1][Aw]=Ap;}else{At[A1].push(Ap);if(Ax===A3-1){if(Ap>=0){Av.positive[Ay]=Ap;}else{Av.negative[Ay]=Ap;}}}}}}return Av;},AddBaseToCumulateData:function AK(Ao,An){var Al=this.mCumulateData[Ao].length,Am;for(Am=0;Am<Al;++Am){this.mCumulateData[Ao][Am]+=An;}},drawSingleDataPoint:function V(Aw,Av,Am,As){var Aq=this.mChartContextPtr,Az=Aq.GetGraphMatrixContext(),An=0,Ay,Ax,A2,Ar,Al,A0,Au=[],At=this.mpABLPlot.shownDataLabels;var Ao=Az.mMarkerShape;if(Ao===Ag.DssGraphMarkerShape2DPie||Ao===Ag.DssGraphMarkerShape2DRingPie){if(this.mPieRenderer===null){var A1=0;if(Ao===Ag.DssGraphMarkerShape2DRingPie){A1=1;}this.mPieRenderer=new AT.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:this.mChartContextPtr,Layout:A1,PlotType:a.GMPPT_CATEGORY,ShownDataLabel:At});}var Ap=this.mPieRenderer;An=this.mDatasetPtr.GetPieCountAtOneDataPoint(Aw.mSeriesId,Aw.mGroupId);for(Ay=0;Ay<An;++Ay){if(Aq.checkColorByAndSizeByValue(Aw,this.mDatasetPtr,false,this.mHasSizeBy)===false){Au.push({Object:null,ShapeSize:Ar});continue;}if(Aq.mImageUsage===z.GENERAL){A2=e.call(this,Aw.mSeriesId,Aw.mGroupId,Ay,An);Al=Ap.drawSinglePie(Aw.mSeriesId,Aw.mGroupId,Ay,A2,An);for(Ax=0;Ax<Al.length;Ax++){if(Al[Ax]){Au.push({Object:Al[Ax],ShapeSize:Al[Ax].getShapeSize()});}}}else{if(Aq.mImageUsage===z.OBJECT_CLIP_COMPUTATION){Ar=Ap.getShapeSizeAt(Aw.mSeriesId,Aw.mGroupId,Ay,!this.mHasSizeBy);Au.push({Object:null,ShapeSize:Ar});}}}}else{if(Am===U._COMBINED){Am=this.mDatasetPtr.GetShapeByCell(Aw.mSeriesId,Aw.mGroupId);if(Am===U._GENERIC){Am=U._CIRCLE;}}A0=this.drawSinglePoint(Aw,Av,Am,As);Au.push(A0);}return Au;},drawSinglePoint:function Ae(A0,Az,Ao,Ay){var Ar=(Ao!==undefined)?Ao!==U._LINE:false,At=this.mChartContextPtr,A3=At.GetGraphMatrixContext(),Au=this.mGroupCount,A4,Aq,As,A2,Ap,Ax,An,A1=this.mDatasetPtr.getForecastCount();if(At.checkColorByAndSizeByValue(A0,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return{Object:null,ShapeSize:0};}if(Ay===U._AREA){Ar=false;}As=q.call(this,Ao);if(At.RenderClusterShapes()){if(!(Au===1&&Ao===2)){Au*=this.mSeriesInfo.length;}}if(As===Ag.DssGraphMarkerShapeGMTick){A2=A3.GetMaxMarkerSize(AN._TICK_CATEGORY,At.IsVertical(),Au);}else{if(Ao===U._AREA||Ay===U._AREA){A2=A3.GetMaxElementSizeInAreaChart(this.mIsVertical,Au,!Ar,A1);}else{A2=A3.GetMaxElementSizeInLineChart(this.mIsVertical,Au,!Ar,As);}}Aq=this.mDatasetPtr.GetGroupCount();if(this.mHasSizeBy){A4=this.mDatasetPtr.GetSizeByData(A0.mSeriesId,A0.mGroupId);if(A4!==null&&A4!==undefined){if(As===Ag.DssGraphMarkerShapeNone&&(A3.mMaxSizeVal===A3.mMinSizeVal)){if(!Ar&&Aq>=3){A2=A3.GetAdjustThicknessValue(A3.mConstants.MinimalSize.General);}A2=Math.round(Math.max(A2,1));}else{A2=A3.GetScaledSize(A4,A2,Ao);A2=Math.max(Math.round(A2),A3.mConstants.MinimalSize.General);}}}if(At.mImageUsage===z.OBJECT_CLIP_COMPUTATION){var Aw=A2;if(As===Ag.DssGraphMarkerShapeGMTick){Aw=Math.round(0.5*(this.mIsVertical?A3.mConstants.FixedTickerSize:A2));}return{Object:null,ShapeSize:Aw};}if(As===Ag.DssGraphMarkerShapeNone){As=Ag.DssGraphMarkerShapeCircle;}if(As===Ag.DssGraphMarkerShapeGMTick){var Am,Al,Av=Math.round(0.5*A2);if(At.IsVertical()){Am={x:Az.x-Av,y:Az.y};Al={x:Az.x+Av,y:Az.y};}else{Am={y:Az.y-Av,x:Az.x};Al={y:Az.y+Av,x:Az.x};}Ap=new AT.StraightLineObject({TripleId:A0,GraphObjectManager:this,StartPoint:Am,EndPoint:Al,GraphCollectionObject:null,Shape:U._TICKER});}else{if(As===Ag.DssGraphMarkerShapeSquare||As===Ag.DssGraphMarkerShapeRectangle){An=this.mChartContextPtr.transformToRect(Az,A2,true);Ap=new AT.RectangleObject({TripleId:A0,GraphObjectManager:this,GraphCollectionObject:null,Area:An,Shape:U._RECTANGLE,hasFill:true});}else{Ap=new AT.MarkerObject({TripleId:A0,GraphObjectManager:this,MarkerPosition:Az,MarkerShape:As,IsIsometric:true,MarkerSize:A2,GraphCollectionObject:null,IsDialogSize:false,Shape:U._CIRCLE,hasFill:true});}}if(A3.mMarkerShape===Ag.DssGraphMarkerShapeNone){A3.AddToIsolatedDotList(A0);if(A0.mObjectId!==Af.DssGraphDataMarker){Ax=new AT.TripleId({ObjectId:Af.DssGraphDataMarker,SeriesId:A0.mSeriesId,GroupId:A0.mGroupId});A3.AddToIsolatedDotList(Ax);}}return{Object:Ap,ShapeSize:Ap.getShapeSize()};},getCorrectGroupIdInSeriesPoints:function Ad(Al,An){var Am=this.mGroupIdMapPerSeries[Al];if(Am!==null&&Am!==undefined){return Am;}return An;},prepareTransitionalGradient:function g(Al,Aq,Ar){var Ao,An,Ap={Effective:false};if(Ar!==undefined){Ar=Math.min(Aq.length,Ar);}else{Ar=Aq.length;}Ap.Colors=[];for(Ao=0;Ao<Ar;Ao++){var Am=this.mDatasetPtr.GetColorByData(Al.mSeriesId,Al.mGroupId+Ao);if(Am===null){Am=this.mDatasetPtr.GetDefaultShapeFillColor();}if(Ao===0){An=Am;Ap.StartGraphColor=Am;}else{if(Ao===Ar-1){Ap.EndGraphColor=Am;Ap.Effective=Ap.Effective||Am!==An;}else{Ap.Colors.push({Color:Am,Step:Ao/(Ar-1)});Ap.Effective=Ap.Effective||Am!==An;}}}Ap.Style=1;Ap.EndAlpha=255;Ap.Angle=this.mChartContextPtr.IsVertical()?0:1;return Ap;},getMaxElementOffsetClippedByBoundary:function AG(Al,Ao,Am){var Ap=Ao?(Am?"X1":"X2"):(Am?"Y1":"Y2");if(this.mClippedMarkerSize[Ap]){var An=this.mClippedMarkerSize[Ap];Al.LowOffset=Math.max(An.LowOffset,Al.LowOffset);Al.HighOffset=Math.max(An.HighOffset,Al.HighOffset);}else{Al.LowOffset=Math.max(0,Al.LowOffset);Al.HighOffset=Math.max(0,Al.HighOffset);}},CreateOneDataMarker:function F(Am,Av,Au,A1,Ay,A8){var A0=this.mSeriesInfo[Am],Aq=this.mChartContextPtr,A2=new AT.TripleId({ObjectId:Af.DssGraphRiser,SeriesId:A0.mSeriesId,GroupId:Av}),A4=Aq.GetGraphMatrixContext(),Aw=this.mDatasetPtr,Ao=Aw.GetShapeBySeries(A0.mSeriesId),A5=(Ao===U._LINE||Ao===U._GENERIC),Az=(Ao===U._AREA),Ar=A4.IsIsolatedDot(A2),At=A4.mHasSizeBy,A6,Ax,Al,As;A8=A8||false;var A7,Ap=Ag.DssGraphMarkerShapeCircle;if(A4.mMarkerShape===Ag.DssGraphMarkerShapeCombined){A6=(Ao===U._CIRCLE||Ao===U._RECTANGLE||Ao===U._SQUARE);}else{A6=(A4.mMarkerShape===Ag.DssGraphMarkerShapeCircle||A4.mMarkerShape===Ag.DssGraphMarkerShapeRectangle||A4.mMarkerShape===Ag.DssGraphMarkerShapeSquare);}A7=(!Ar&&!A6&&!At);if(!A7){return ;}Al=this.mDatasetPtr.getMarkerShapeInfoAt(A0.mSeriesId,Av);A7=(Al.Show||A8)&&Ap!==undefined;if(!A7){return ;}Ap=Al.Shape;Au=null;var A9=new AT.TripleId({ObjectId:Af.DssGraphDataMarker,SeriesId:A0.mSeriesId,GroupId:Av}),A3=Al.Size||3;if(A8){Ap=Ag.DssGraphMarkerShapeCircle;A3=A4.mConstants.FixedDataMarkerSize;}if(Ap===Ag.DssGraphMarkerShapeCircle){Ax=new AT.MarkerObject({TripleId:A9,MarkerPosition:A1,MarkerShape:Ap,IsIsometric:true,MarkerSize:A3,GraphCollectionObject:Au,GraphObjectManager:this,IsDialogSize:false,Shape:U._CIRCLE});}else{if(Ap===Ag.DssGraphMarkerShapeRectangle||Ap===Ag.DssGraphMarkerShapeSquare){var An=this.mChartContextPtr.transformToRect(A1,A3,true);Ax=new AT.RectangleObject({TripleId:A9,GraphObjectManager:this,GraphCollectionObject:Au,Area:An,Shape:U._RECTANGLE});}}As=this.mGraphObjectList;if(A5){As.push(Ax);}else{if(Az){As.push(Ax);}}},CreateAllDataLabels:function A(){var Ao,Am,Ap,Aq,Av=this.mTextCollection,An,At,Aw=true,As=this.mDataLabels,Ar=this.mSeriesInfo,Al,Au;Ap=new AT.TripleId({ObjectId:Af.DssGraphDataText});if(Aw){Aq=new AT.GraphCollectionObject({TripleId:Ap,GraphObjectManager:this,CollectionType:y.CT_TEXT});}for(Ao=0;Ao<Ar.length;++Ao){Au=Ar[Ao].mSeriesId;if(this.mDatasetPtr.showSeriesDatalabel(Au)===false){continue;}if(!Aw){Aq=new AT.GraphCollectionObject({TripleId:Ap,GraphObjectManager:this,CollectionType:y.CT_TEXT});}Av.push(Aq);for(Am=0;Am<this.mGroupCount;++Am){An=this.mDatasetPtr.GetData(Au,Am);if(An!==undefined&&An!==null){At=this.CreateOneDataLabel(Au,Am,An,Aq);if(At!==null&&At!==undefined){Al=new AT.GMDataLabelInfo({SeriesId:Au,GroupId:Am,SeriesInfo:Ao,isValid:true,Label:At});At.mIsShown=false;As.push(Al);this.AddToMapAndList(At);}}}}},hGetCumulateData:function X(An,Am,Al){return this.mCumulateData[An][Al*this.mSeriesNumber[An]+Am];},GetAccompanyPoints:function Ab(An,Ap){var Ao=new AT.Point2D(),Al=new AT.Point2D(),Am={};Ao.x=An.x;Ao.y=An.y;Al.x=An.x;Al.y=An.y;if(this.mIsVertical){Ao.y-=Ap;Al.y+=Ap;}else{Ao.x-=Ap;Al.x+=Ap;}Am.lowPoint=Ao;Am.highPoint=Al;return Am;},CreateOneDataLabel:function Ah(Az,Ap,Al,Av){var Aq=Al,At="",Aw,As,An,A0,Ao,Ay,Ax,Ar,Au,Am;As=new AT.TripleId({ObjectId:Af.DssGraphDataText,SeriesId:Az,GroupId:Ap});Ao=this.mDatasetPtr;Ax=this.mpABLPlotContext;Ar=Ax.mABLOptions;Au=Ar.mLayout;if(Au===AY.LO_STACKED||Au===AY.LO_PERCENT){Aq=Ao.GetData(Az,Ap);}Ay=Ao.dataLabelStyle;switch(Ay){case w:Aw=this.mSeriesInfo[0].mValueAxis;r.restore();Ao.getGridDataFormat(r,Az,Ap,0);An=new AT.NumberObject({TripleId:As,GraphObjectManager:this,Number:Aq,NumberFormat:r,GraphCollectionObject:Av,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(An){At=An.mText;A0=An;}break;case G:At=this.mDatasetPtr.GetTextLabel(Az,Ap);A0=new AT.TextObject({TripleId:As,GraphObjectManager:this,GraphCollectionObject:Av});break;}if(At.length!==0){A0.SetText(At);return A0;}return null;},Draw:function AV(){this._super();Z.call(this);R.call(this);},updateSeriesRenderSequence:function s(Am,As,Ao){var Aq,An,Ap=0,Ar=this.renderSequence,Al=Ar.length;if(Ao===undefined){Ao=true;}As=Ao?As:0;for(Aq=0;Aq<Al;Aq++){An=Ar[Aq];if(An!==null&&An!==undefined){Ap++;Am[Aq]=An+As;}}if(Ao){return As+Ap;}return 0;},populateRenderSequence:function AX(Ap){if(Ap){this.renderSequence=Ap;}else{var Am,An=this.renderSequence,Ao=this.mSeriesInfo,Al=Ao.length;An.splice(0,An.length);for(Am=0;Am<Al;Am++){An[Ao[Am].mSeriesId]=Am;}}},evalBarStyleUnitWidth:function H(Al,Ao,Aq){var Ar=this.mChartContextPtr,An=Ar.GetGraphMatrixContext(),Am={unitWidth:0,columns:1,riserGap:0,groupGap:0,overlapRatio:0,gapRatio:10};if(Aq===undefined){Aq=10;var Ap=An.mElementsInfo;if(Ap.Max.Mode===AF._MANUAL){Aq=Ap.Max.Size*100;if(Aq<1){Aq=1;}if(Aq>100){Aq=99;}Am.gapRatio=100-Aq;}}else{Am.gapRatio=Aq;}Am.columns=Ao||this.mSeriesInfo.length;Am.unitWidth=(Al*(1-Am.gapRatio/100)/Am.columns);if(Ar.mIsGraphMatrix){if(Am.unitWidth>2){Am.unitWidth-=1;}if(An.mElementsInfo.Max.Mode===AF._AUTOMATIC){Am.unitWidth=Math.min(Am.unitWidth,An.mConstants.MaximalSize.Bar);}if(this.mHasSizeBy===false){if(!Ar.isCompactMode()){Am.unitWidth=Math.max(Am.unitWidth,An.mConstants.MinimalSize.Bar);}}Am.gapRatio=(1-Am.unitWidth*Am.columns/Al)*100;Am.riserGap=0;Am.groupGap=Al*Am.gapRatio/100;}return Am;},GenerateTrendLine:function K(){var A5=this.mpABLPlotContext,Av,A6,As=A5.mCategoryAxisPtr,BH,BF,BD,A0,BE,BK,Az,BB,BG=this.mDatasetPtr,A2=this.mChartContextPtr,A1=this.mSeriesInfo,At=A1.length,An,A3,A9,Ao,Ar,A4,A7=[],Au,A8,BJ,BA,Am,Al,Aw,Ax,Ap,BI,Ay={},BC={},Aq={};if(BG.isBare(A2.IsPieChart())){return ;}if(As.mAxisInfo.mAxisDirection===AW.AD_X){A6=true;}else{A6=false;}for(BH=0;BH<At;++BH){A7=[];An=A1[BH];A3=An.mSeriesId;Av=BG.GetTrendLineOfSeries(A3);Ao=An.mValueAxis;Ar=A5.mValueAxis[Ao];Au=new AT.TripleId({ObjectId:Af.DssGraphTrendLine,SeriesId:A3});if(!!Av===false){continue;}A0=Av.getTrendLineType();if(A0===O.DssGraphRegressionNone){continue;}BA=Av.getIdentity();BK=Av.getTrendLineValuesWithForecast();Az=Av.getTrendLineValues();BE=Av.getSeasonalityType();if(B(Az)<=1){continue;}if(!!BK===false||BK.length===0){continue;}BB=BK.length;if(A0===O.DssGraphRegressionLinear){if(BE!==0){for(BF=0;BF<BB;++BF){A9=BK[BF];if(A9!==null&&A9!==undefined){A4=j.call(this,BH,BF,A9,Ar,A6,true);if(A4.x!==null&&A4.y!==null){A7.push(A4);}else{AB.visPrint("Trendline point calculation abnormal:");AB.visPrint("\tseries #: "+BH+", data point #:"+BF);AB.visPrint("\tvalue = "+A9);AB.visPrint("\tx = "+A4.x+", y = "+A4.y);}}}A7=b.call(this,A7);BI=A7.length;if(BI>=2){Ax=A7[0].x;Ap=A7[BI-1].x;Am=(Ax+Ap)/2;for(BH=0;BH<BI;++BH){if(A7[BH].x===Am){Al=A7[BH].y;break;}else{if(BH<BI-1&&A7[BH].x<Am&&A7[BH+1].x>Am){Aw=(A7[BH+1].y-A7[BH].y)/(A7[BH+1].x-A7[BH].x);Al=A7[BH].y+Aw*(Am-A7[BH].x);break;}}}BC.x=Am;BC.y=Al;}}else{for(BF=0;BF<BB;++BF){A9=BK[BF];if(A9!==null&&A9!==undefined){A4=j.call(this,BH,BF,A9,Ar,A6,true);if(A4.x!==null&&A4.y!==null){A7.push(A4);break;}else{AB.visPrint("Trendline point calculation abnormal:");AB.visPrint("\tseries #: "+BH+", data point #:"+BF);AB.visPrint("\tvalue = "+A9);AB.visPrint("\tx = "+A4.x+", y = "+A4.y);}}}for(BD=BB-1;BD>BF;--BD){A9=BK[BD];if(A9!==null&&A9!==undefined){A4=j.call(this,BH,BD,A9,Ar,A6,true);if(A4.x!==null&&A4.y!==null){A7.push(A4);break;}else{AB.visPrint("Trendline point calculation abnormal:");AB.visPrint("\tseries #: "+BH+", data point #:"+BD);AB.visPrint("\tvalue = "+A9);AB.visPrint("\tx = "+A4.x+", y = "+A4.y);}}}BI=A7.length;if(BI>=2){Am=(A7[0].x+A7[1].x)/2;Al=(A7[0].y+A7[1].y)/2;BC.x=Am;BC.y=Al;}}if(BI>=2){Ay.x=A7[0].x;Ay.y=A7[0].y;Aq.x=A7[BI-1].x;Aq.y=A7[BI-1].y;A8=new AT.PolyLineObject({TripleId:Au,GraphObjectManager:this,PolyLine:A7,Shape:U._LINE,Identity:BA,startPoint:Ay,midPoint:BC,endPoint:Aq});if(A8!==null){this.mTrendLineObjects.push(A8);}}}else{for(BF=0;BF<BB;++BF){A9=BK[BF];if(A9!==null&&A9!==undefined){A4=j.call(this,BH,BF,A9,Ar,A6,false);if(A4.x!==null&&A4.y!==null){A7.push(A4);}else{AB.visPrint("Trendline point calculation abnormal:");AB.visPrint("\tseries #: "+BH+", data point #:"+BF);AB.visPrint("\tvalue = "+A9);AB.visPrint("\tx = "+A4.x+", y = "+A4.y);}}}if(A7.length>=2){BJ=new AT.CurveLineObject({TripleId:Au,GraphObjectManager:this,Points:A7,IsVertical:A6,Identity:BA,Shape:U._CURVE});if(BJ!==undefined&&BJ!==null){this.mTrendLineObjects.push(BJ);}}}}},GenerateRefLine:function C(){var Ap=this.mpABLPlotContext,At=this.mChartContextPtr,A7=At.mGraphWidth,BE=At.mGraphHeight,A0=this.mSeriesInfo.length,Ao,A3,BB,A8,Au,BC,A4,BG,A9=[],Aq,BA,A1,An,A6,BI,As,Ar,BH,BD,Am,Av={},BF,Al,Ay=this.mDatasetPtr,Ax,Az=[],Aw,A5=Ay.GetSeriesCount()*Ay.GetGroupCount();if(At.mPartialRendering===false){A5=this.mpABLPlot.DPCount;}for(BB=0;BB<A0;++BB){A3=this.mSeriesInfo[BB];Ao=A3.mSeriesId;A1=Ay.GetReferenceLinesOfSeries(Ao);Au=A3.mValueAxis;BC=Ap.mValueAxis[Au];Al={};Al.Condense=BC.mCondenseLabels;if(!Al.Condense){if(BC.mNumberFormat.isDefault){var A2=new AT.ChartAdvFormat();At.getAxisAutoNumberFormat(A2,BC.mPrimaryMetrics);BC.mNumberFormat=A2;}Al.NumberFormat=BC.mNumberFormat.mCustomFormat;}Aw=A1.length;for(A8=0;A8<Aw;++A8){A9=[];BA=A1[A8];if(BA){BI=BA.getIdentity();A4=BA.getReferenceLineValue();BG=BA.getReferenceLineDirection();Ax=(BG!=="horizontal");An=BA.getReferenceLineLabel(false,false,Al);As=BA.getRefLineLabelIdentity();if(A5===0){continue;}Aq=new AT.TripleId({ObjectId:Af.DssGraphReferenceLine,SeriesId:Ao,GroupId:A8});BF=new AT.TripleId({ObjectId:Af.DssGraphRefLineText,SeriesId:Ao,GroupId:A8});if(A4!==null&&A4!==undefined){BH=BC.GetPositionByValue(A4);if(BH!==null&&BH!==undefined){BD=1;if(Ax){if(BH===0){BH=1;}else{if(BH===A7){--BH;}}Am=BE-1;A9.push(new AT.Point2D({x:BH,y:BD}));A9.push(new AT.Point2D({x:BH,y:Am}));Av.x=BH;Av.y=(A9[0].y+A9[1].y)/2;}else{if(BH===0){BH=1;}else{if(BH===BE){--BH;}}Am=A7-1;A9.push(new AT.Point2D({x:BD,y:BH}));A9.push(new AT.Point2D({x:Am,y:BH}));Av.x=(A9[0].x+A9[1].x)/2;Av.y=BH;}Ar=new AT.StraightLineObject({TripleId:Aq,GraphObjectManager:this,StartPoint:A9[0],EndPoint:A9[1],GraphCollectionObject:null,Identity:BI,Shape:U._LINE,MidPoint:Av});if(Ar!==null){if(!Ar.mFormatLinePtr){Ar.mFormatLinePtr=new AT.FormatLine();}this.mReferenceLineObjects.push(Ar);Az.push({tripleId:BF,identity:As,isVertical:Ax,position:BH,labelText:An});}}else{AB.visPrint("Reference line point calculation abnormal:");AB.visPrint("\tseries #: "+BB+"ref line #: "+A8);AB.visPrint("\tvalue = "+A4);AB.visPrint("\ty = "+BH);}}}}}t.call(this,BE,A7,Az);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,M=O.enums,B=M.EnumOrientation,P=O.gNullObjectId,L=O.gNullTripleId;var J=mstrmojo.chart.model,Q=J.enums,E=Q.EnumDSSGraphType,F=Q.EnumDSSGraphObject,K=Q.EnumVariantBool.VARIANT_FALSE,R=Q.EnumDSSExtraGraphProperty;mstrmojo.chart.PlotManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.PlotManager",mLegendPtr:null,mDatasetPtr:null,mGraphType:E.DssGraphTypeVertical_Bar_Side_by_Side,mPlotArea:null,mChartAreaOptions:null,mRecalculateFrame:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,init:function N(S){this._super(S);this.mChartAreaOptions={useChartArea:false,chartAreaNumber:1,orientation:B.OR_VERTICAL,vecPercentageHeightOrWidth:[],seriesDistribution:[]};this.mPlotArea=S.Area||null;this.mChartContextPtr=S.GraphObjectManager.mChartContextPtr;},SetDataset:function G(S){this.mDatasetPtr=S;},SetMarginInfo:function H(V,T,S,U){this.mLeftMargin=V;this.mRightMargin=T;this.mTopMargin=S;this.mBottomMargin=U;},LoadProperties:function I(){var Z,U,b,W,X,S=[],V=[],a=[];var T=this.mChartContextPtr,Y=this.mChartAreaOptions;this.mGraphType=T.mGraphType;this.mRecalculateFrame=T.mRecalculateFrame;if(!T.mIsGraphMatrix){Z=T.GetProperty(R.DssGraphUseChartArea,P);if(Z){Y.useChartArea=Z!==K;}}U=this.mDatasetPtr.GetSeriesCount();b=1;W=0;if(Y.useChartArea){Z=T.GetProperty(R.DssGraphChartAreaNumber,P);if(Z){Y.chartAreaNumber=Z;if(Y.chartAreaNumber>U){Y.chartAreaNumber=U;}}Z=T.GetProperty(R.DssGraphChartAreaOrientation,P);if(Z){Y.orientation=(Z!==K?B.OR_VERTICAL:B.OR_HORIZONTAL);}for(X=0;X<Y.chartAreaNumber;X++){Z=T.GetProperty(R.DssGraphChartAreaSpacePercentage,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphFrame,SeriesId:X}));if(Z&&Z>=0){Y.vecPercentageHeightOrWidth.push(Z/100);b-=Z/100;}else{Y.vecPercentageHeightOrWidth.push(-1);W++;}}}else{Y.chartAreaNumber=1;Y.vecPercentageHeightOrWidth.push(1);}for(X=0;X<Y.chartAreaNumber;X++){Y.seriesDistribution.push(S);}this.mDatasetPtr.GetOneSliceRangeSimple(V,a);for(X=0;X<U;X++){if(T.mIsGraphMatrix){Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}else{Z=T.GetProperty(R.DssGraphChartAreaDestination,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphRiser,SeriesId:X}));if(Y.useChartArea&&Z){Y.seriesDistribution[Z].push(X);}else{Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}}}if(W>0){for(X=0;X<Y.chartAreaNumber;X++){if(Y.vecPercentageHeightOrWidth[X]<=0){Y.vecPercentageHeightOrWidth[X]=b/W;}}}},CalculateChartAreas:function A(W,a){var c,S,Y,V,Z=this.mChartAreaOptions,U,T,X,b;c=0;if(Z.orientation===B.OR_VERTICAL){S=W.height/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){U=(W.height-S*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V];a.push(new mstrmojo.chart.Rect2D({x:W.x,y:W.y+(W.height-S*(b-1))*c+S*V,width:W.width,height:U}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[Z.chartAreaNumber-1];X.height=W.y+W.height-X.y;}else{Y=W.width/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){T=(W.width-Y*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V]+0.5;a.push(new mstrmojo.chart.Rect2D({x:W.x+(W.width-Y*(b-1))*c+Y*V,y:W.y,widht:T,height:W.height}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[b-1];X.width=W.x+W.width-X.x;}},RectangleUnion:function C(S,U,T){T.x=Math.min(S.x,U.x);T.y=Math.min(S.y,U.y);T.width=Math.max(S.x+S.width,U.x+U.width)-T.x;T.height=Math.max(S.y+S.height,U.y+U.height)-T.y;},RectangleIntersection:function D(S,U,T){if((S.x>(U.x+U.width))||(U.x>(S.x+S.width))||(S.y>(U.y+U.height))||(U.y>(S.y+S.height))){return false;}T.x=Math.max(S.x,U.x);T.y=Math.max(S.y,U.y);T.width=Math.min(S.x+S.width,U.x+U.width)-T.x;T.height=Math.min(S.y+S.height,U.y+U.height)-T.y;return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","Point2D","RectangleObject","TextObject","NumberObject","GraphCollectionObject","GridDataLabelInfo","GridBasePlot","CategoryAxis","PiePlotRenderer","MarkerObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixElementSizeMode","EnumGraphMatrixMarkerTypeInChart","EnumAnchorPoint");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.common","Utility","MapStructure");var W=mstrmojo.chart,T=W.ChartConstants,J=W.enums,q=J.EnumAnchorPoint,C=J.EnumCollectionType,Q=J.EnumGraphMatrixMarkerTypeInChart,p=J.EnumGraphMatrixElementSizeMode,U=J.EnumGraphMatrixPiePlotType,S=mstrmojo.chart.model,O=S.enums,u=O.EnumDSSGraphMarkerShape,t=O.EnumDSSGraphObject,v=O.EnumShapeType,B=W.common,F=B.Utility,V=F.tripleId;var P=new W.Rect2D(),AG=new W.Point2D(),AE=new W.Point2D(),s=new W.ChartAdvFormat(),r=new W.Point2D();var L=0,d=1,b=2;var M=1,N=2,X=3;function K(AJ,AI){if(AJ.mYIndex===AI.mYIndex){return AJ.mXIndex-AI.mXIndex;}return AJ.mYIndex-AI.mYIndex;}function AA(){var AI=this.mXAxis,AO=this.mYAxis,AM=this.mDatasetPtr;if(this.mPartialRendering){var AK=this.mChartContextPtr,AQ={PartialRendering:true,Group:{},Series:{}},AJ,AN,AR,AL,AP=AK.mRenderingWindow;AJ=AP.x;AN=AJ+AP.width;AR=AP.y;AL=AR+AP.height;if(AI){AN=AI.getGroupSlotAt(AN)+1;AJ=AI.getGroupSlotAt(AJ)-1;}if(AO){AL=AO.getGroupSlotAt(AL)+1;AR=AO.getGroupSlotAt(AR)-1;}if(this.mDatasetPtr.GetSeriesByColumn()){if(AO){AQ.Group.Max=AL;AQ.Group.Min=AR;}if(AI){AQ.Series.Max=AN;AQ.Series.Min=AJ;}}else{if(AO){AQ.Series.Max=AL;AQ.Series.Min=AR;}if(AI){AQ.Group.Max=AN;AQ.Group.Min=AJ;}}AM.updateDataWindow(AQ);}else{AM.resetDataWindow();}}function AB(AP){if(!AP){var AK=this.mChartContextPtr.GetGraphMatrixContext(),AO=AK.mElementsInfo;if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){var AN=AO.Max.Size,AL=1;var AJ=this.mAutoFitMarkerRect;this.mAdjustMarkerRect=new W.Rect2D({Rect2D:AJ});var AI=this.mAdjustMarkerRect;if(AO.Max.Mode===p._MANUAL){AL=Math.min(AL,AN);if(AL<1){AI.width=AJ.width*AL;AI.height=AJ.height*AL;}}}if(this.mMarkerShape===u.DssGraphMarkerShapeGMTick){var AM=new W.Rect2D();AM.width=AK.mConstants.FixedTickerSize;AM.height=AK.GetMaxMarkerSize(Q._TICK_CATEGORY,false,this.mYArity);this.mAdjustMarkerRect=AM;}}return this.mAdjustMarkerRect;}function l(){var AI=this.mSeriesSet.length,AK=this.mDatasetPtr.GetGroupCount(),AJ=this.mDatasetPtr;if(this.mIsSeriesByCol){this.mXArity=AI;this.mYArity=AK;}else{this.mXArity=AK;this.mYArity=AI;}if(this.mXArity===0&&!this.mHasXAxis){this.mXArity=1;}if(this.mXArity===0&&!AJ.mHasMetrics){this.mXArity=1;}if(this.mYArity===0&&!this.mHasYAxis){this.mYArity=1;}if(this.mYArity===0&&!AJ.mHasMetrics){this.mYArity=1;}}function AD(){return this.mDatasetPtr.IsGridPieAngleBreakX();}function h(){var AK=this.mChartContextPtr,AN=AK.GetGraphMatrixContext(),AJ=AN.mElementsInfo,AS=0,AQ=this.mMarkerShape,AU=AQ===u.DssGraphMarkerShape2DPie||AQ===u.DssGraphMarkerShape2DRingPie,AP=1,AI=1,AM=2500,AO=1,AV,AT,AL;if(AQ!==u.DssGraphMarkerShapeRectangle){if(this.mHasXAxis){AT=this.mXAxis.getGroupSize();}else{AT=this.mDataArea.width;}if(this.mHasYAxis){AL=this.mYAxis.getGroupSize();}else{AL=this.mDataArea.height;}if(AU){if(AJ.Max.Mode===p._AUTOMATIC){AM=250;}AS=this.mDatasetPtr.GetAngleNumber();var AR=AD.call(this);if(AR){AP=AS;}else{AI=AS;}if(AJ.Max.Mode===p._AUTOMATIC){AO=this.mDatasetPtr.showDatalabels()?0.5:0.9;if(AO<0){AO=0.1;}AO=Math.min(AO,1);}}if(AJ.Max.Mode===p._MANUAL){AO=AJ.Max.Size;if(AO<0){AO=0.1;}AO=Math.min(AO,1);}AV=0.5*Math.min(AT/AP,AL/AI);if(AQ!==u.DssGraphMarkerShapeCircle||AV>=4){AV-=1;}AV=Math.max(AV,1);AV*=AO;AV=Math.min(AV,AM);AV=Math.max(AV,1);return Math.floor(AV);}return 1;}function E(){var AN=this.mDatasetPtr,AL=this.mDataArea,AM=this.mXAxis,AK=this.mYAxis,AJ=this.mAutoFitMarkerRect,AO=this.mChartContextPtr,AI=this.mpManager.mPlotOption;this.mIsAutoFitMode=AI.mIsAutoFitMode;this.mMaxDataVal=AI.mMaxDataVal;this.mMinDataVal=AI.mMinDataVal;this.mUniformColorMode=AN.GetSeriesByColumn()?b:d;if(this.mHasXAxis){AJ.width=AM.getGroupSize();}else{AJ.width=AL.width;}if(this.mHasYAxis){AJ.height=AK.getGroupSize();}else{AJ.height=AL.height;}this.mMarkerShape=AI.mMarkerShape;if(this.mMarkerShape===u.DssGraphMarkerShapeNone){this.mMarkerShape=u.DssGraphMarkerShapeRectangle;}this.mIsSeriesByCol=AN.GetSeriesByColumn();if(this.mHasXAxis){this.mPreXCoord=AM.getGroupStartPos(0);}else{this.mPreXCoord=AL.x;}if(this.mHasYAxis){this.mPreYCoord=AK.getGroupStartPos(0);}else{this.mPreYCoord=AL.y;}l.call(this);AB.call(this,false);this.mMinMarkerSize=1;this.mMaxMarkerSize=h.call(this);this.mDataGroup=AN.GetDataGroup();}function c(AI,AJ){if(this.mHasColorBy===false){return this.mMarkerCollectionSet[0]||null;}return null;}function e(AI,AK,AJ){if(!AJ){return ;}if(this.mLegendPtr===null||this.mLegendPtr===undefined){return ;}if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function j(AN,AJ,AM,AI){var AL=AN?AI.x:AI.y,AO=0,AK;if(AN){AO=AJ?this.mXAxis.getGroupMiddlePos(AM+1):this.mXAxis.getGroupMiddlePos(AM-1);AK=(AO+AL)/2;}else{AO=AJ?this.mYAxis.getGroupMiddlePos(AM+1):this.mYAxis.getGroupMiddlePos(AM-1);AK=(AO+AL)/2;}var AP=AK-Math.floor(AK);if(AP!==0){AK-=0.5;}if(AK===0){AK=1;}return AK;}function Y(AV,AT){var AX=1,AN=0,AQ=v._RECTANGLE,AJ=false,AM=this.mDatasetPtr.dataProvider;AG.x=this.mXAxis.getGroupMiddlePos(AV);AG.y=this.mYAxis.getGroupMiddlePos(AT);P.Reset(0,0,0,0);if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){if(this.mXArity*this.mYArity===1){P=AB.call(this,true);}else{var AS=0,AL=0;if(!this.resizerLine){this.resizerLine=AM.getResizerLineThickNess();}if(!this.chartInfo){this.chartInfo=AM.getChartRowColCount();}if(AV===0){AS=this.mDataArea.x+AX+AN;AL=j.call(this,true,true,AV,AG);}else{if(AV===this.mXArity-1){AS=j.call(this,true,false,AV,AG);AL=this.mDataArea.x+this.mDataArea.width;}else{AS=j.call(this,true,false,AV,AG);AL=j.call(this,true,true,AV,AG);}}if(AV===this.mXArity-1){if(AM.colIndex!==this.chartInfo.cir-1){AL-=this.resizerLine.MATRIX_VLINE_THICKNESS;}else{AL-=parseInt(this.resizerLine.MATRIX_VLINE_THICKNESS/2);}}P.x=AS;P.width=AL-AS;P.width=Math.max(0,P.width);if(AT===0){AS=this.mDataArea.y+AX;AL=j.call(this,false,true,AT,AG);}else{if(AT===this.mYArity-1){AS=j.call(this,false,false,AT,AG);AL=this.mDataArea.y+this.mDataArea.height;}else{AS=j.call(this,false,false,AT,AG);AL=j.call(this,false,true,AT,AG);}}if(AM.rowIndex!==0&&AT===0){AS+=this.resizerLine.MATRIX_HLINE_THICKNESS;}if(AM.rowIndex===this.chartInfo.cic-1&&AT===this.mYArity-1){AL-=this.resizerLine.AXIS_X_THICKNESS;}P.y=AS;P.height=AL-AS;P.height=Math.max(0,P.height);if(P.width>AX){P.width-=AX+AN*2;}if(P.height>AX){P.height-=AX+AN;}}}else{AJ=true;AQ=v._TICKER;var AU=AB.call(this,true);AE.x=AE.y=0;if(this.mHasXAxis){AE.x=this.mXAxis.getGroupMiddlePos(AV);}else{AE.x=this.mDataArea.GetCenter().x;}if(this.mHasYAxis){AE.y=this.mYAxis.getGroupMiddlePos(AT);}else{AE.y=this.mDataArea.GetCenter().y;}P.width=AU.width;P.height=AU.height;P.x=AE.x-0.5*P.width;P.y=AE.y-0.5*P.height;}if(this.mMinDataVal===this.mMaxDataVal){return P;}var AP=this.mChartContextPtr.GetGraphMatrixContext(),AO=AP.mElementsInfo.Max;if(this.mIsAutoFitMode){if(AO.Mode===p._AUTOMATIC){return P;}if(AO.Mode===p._MANUAL&&AO.Size===1){return P;}}var AK,AI;if(AO.Mode===p._MANUAL&&AO.Size!==1){var AR=AO.Size;AK=Math.round((1-AR)*0.5*P.width);AI=Math.round((1-AR)*0.5*P.height);P.x+=AK;P.y+=AI;P.width-=2*AK;P.height-=2*AI;}if(this.mIsAutoFitMode){return P;}var AW=0;if(this.mIsSeriesByCol){AW=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AV],AT);}else{AW=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AT],AV);}AK=0.5*P.width;AI=0.5*(P.height-AP.GetScaledSize(AW,P.height,AQ)+0.5);if(AJ){P.x+=AK-1;P.y+=AI;P.width=AP.mConstants.FixedTickerSize;}else{AK=0.5*(P.width-AP.GetScaledSize(AW,P.width,AQ)+0.5);P.x+=AK;P.y+=AI;P.width-=2*AK;}P.height-=2*AI;return P;}function x(AK,AN,AU,AL,AJ,AR){var AP=-1,AO=-1,AI,AS,AM,AT,AQ=new W.Point2D({x:-1,y:-1});if(this.mHasXAxis){AP=this.mXAxis.getSubGroupMiddlePos(AK,AU,AJ);}else{AI=this.mDataArea.x;AM=this.mDataArea.width/AJ;AP=AI+AM*AU+AM/2;}if(this.mHasYAxis){AO=this.mYAxis.getSubGroupMiddlePos(AN,AL,AR);}else{AT=this.mDatasetPtr.GetSeriesCount();AI=this.mDataArea.y;AS=this.mDataArea.height/AT;AM=this.mDataArea.height/AR/AT;AO=AI+AS*AN+AM*AL+AM/2;}if(AP>=0&&AO>=0){AQ.x=AP;AQ.y=AO;}return AQ;}function R(AR,AM,AU){var AS=[AR,AM,AU],AQ,AL,AO,AJ,AN,AK=1,AP=1;if(this.mPieCentersPool===null){this.mPieCentersPool=new B.MapStructure();}var AI=this.mPieCentersPool.find(AS);if(AI!==null&&AI!==undefined){return AI;}AL=AM;AJ=AU;AO=AR;AN=AU;var AT=this.mDatasetPtr.GetPieCountAtOneDataPoint(AR,AM);if(AD.call(this)){AJ=AU;AK=AT;}else{AN=AU;AP=AT;}AQ=x.call(this,AL,AO,AJ,AN,AK,AP);this.mPieCentersPool.replace(AS,AQ);return AQ;}function g(AJ,AM){var AL=this.mDataArea,AK=AJ,AI=AM;if(this.mIsSeriesByCol){if(this.mHasXAxis){AK=this.mSeriesSet.length>AJ?this.mSeriesSet[AJ]:AJ;}AI=AM;}else{AK=AJ;if(this.mHasYAxis){AI=this.mSeriesSet.length>AM?this.mSeriesSet[AM]:AM;}}if(this.mHasXAxis){r.x=this.mXAxis.getGroupMiddlePos(AK);}else{r.x=AL.x+AL.width/2;}if(this.mHasYAxis){r.y=this.mYAxis.getGroupMiddlePos(AI);}else{r.y=AL.y+AL.height/2;}return r;}function o(AJ,AO){var AI,AN,AL=v._SQUARE,AK=this.mChartContextPtr.GetGraphMatrixContext(),AM=AK.mMarkerShape;if(this.mIsAutoFitMode){AI=this.mMaxMarkerSize;}else{if(this.mMinDataVal===this.mMaxDataVal){return this.mMaxMarkerSize;}if(AM===u.DssGraphMarkerShapeCircle){AL=v._CIRCLE;}else{if(AM===u.DssGraphMarkerShape2DPie||AM===u.DssGraphMarkerShape2DRingPie){AL=v._PIE;}}if(this.mIsSeriesByCol){AN=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AJ],AO);}else{AN=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AO],AJ);}AI=AK.GetScaledSize(AN,this.mMaxMarkerSize,AL);}return AI;}function A(AQ,AP){var AO=this.mChartContextPtr,Aa=t.DssGraphRiser,AX,AU,AN=this.mMarkerShape,AS=(AN===u.DssGraphMarkerShape2DPie||AN===u.DssGraphMarkerShape2DRingPie),AK=null,AM,AW,Ab,AI,AR=[],AJ;AX=(this.mSeriesSet.length>AQ)?this.mSeriesSet[AQ]:AQ;AU=new W.TripleId({ObjectId:Aa,SeriesId:AX,GroupId:AP});if(!this.mIsSeriesByCol){AU.mSeriesId=(this.mSeriesSet.length>AP)?this.mSeriesSet[AP]:AP;AU.mGroupId=AQ;}if(this.mDatasetPtr&&this.mDatasetPtr.useSliceWindow){if(this.mDatasetPtr.IsInSlicedWindow(AU.mSeriesId,AU.mGroupId)===false){return AR;}}if(AO.checkColorByAndSizeByValue(AU,this.mDatasetPtr,this.mHasColorBy&&!AS,this.mHasSizeBy)===false){return AR;}var AL=v._RECTANGLE,Ac=c.call(this,AQ,AP);e.call(this,AQ,AP,Ac);if(AN===u.DssGraphMarkerShapeRectangle||AN===u.DssGraphMarkerShapeGMTick){AJ=Y.call(this,AQ,AP);if(AN===u.DssGraphMarkerShapeGMTick){AL=v._TICKER;}if(AJ.width<=0){AJ.width=1;}if(AJ.height<=0){AJ.height=1;}if(AN===u.DssGraphMarkerShapeRectangle){AK=new W.RectangleObject({TripleId:AU,GraphObjectManager:this,Area:AJ,GraphCollectionObject:Ac,IsOnlyForToolTip:false,Shape:AL});}else{var AV=AO.transformRectToTicker(AJ,false);if(AV.length>=2){AK=new W.StraightLineObject({TripleId:AU,GraphObjectManager:this,StartPoint:AV[0],EndPoint:AV[1],GraphCollectionObject:null,Shape:AL});}else{return AR;}}}else{if(AS){var AZ=0;if(AN===u.DssGraphMarkerShape2DRingPie){AZ=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new W.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:AO,Layout:0,PlotType:U.GMPPT_GRID,MaxRadius:this.mMaxMarkerSize,ShownDataLabels:this.shownDataLabels});}AM=this.mDatasetPtr.GetPieCountAtOneDataPoint(AU.mSeriesId,AU.mGroupId);for(AW=0;AW<AM;++AW){Ab=R.call(this,AU.mSeriesId,AU.mGroupId,AW);AI=this.mPieRenderer.drawSinglePie(AU.mSeriesId,AU.mGroupId,AW,Ab,AM);AR=AR.concat(AI);}}else{var AT=g.call(this,AQ,AP),AY=o.call(this,AQ,AP);if(AY<=0){return AR;}if(AN===u.DssGraphMarkerShapeSquare){AJ=this.mChartContextPtr.transformToRect(AT,AY,true,AJ);AK=new W.RectangleObject({TripleId:AU,GraphObjectManager:this,GraphCollectionObject:null,Area:AJ,Shape:AL});}else{AL=v._CIRCLE;AK=new W.MarkerObject({TripleId:AU,MarkerPosition:AT,MarkerShape:AN,IsIsometric:true,MarkerSize:AY,GraphObjectManager:this,GraphCollectionObject:Ac,Shape:AL});}}}if(AR.length===0&&AK){AR.push(AK);}return AR;}function n(AK,AO,AN,AI,AM){var AL=new W.TripleId(t.DssGraphDataText,AN,AI);s.restore();this.mDatasetPtr.getSizeByDataFormat(s,AN,AI);var AJ=new W.NumberObject({TripleId:AL,GraphObjectManager:this,Number:AK,NumberFormat:s,GraphCollectionObject:AM,Locale:0,clientDrag:false,DataSet:null});if(AJ){AO=AJ.mText;}return AO;}function D(AO,AN){var AL="",AQ=(this.mSeriesSet.length>AO)?this.mSeriesSet[AO]:AO,AK=AN,AM=this.mChartContextPtr.GetGraphMatrixContext(),AJ=this.mDatasetPtr,AP=AJ.dataLabelStyle;if(!this.mIsSeriesByCol){AQ=(this.mSeriesSet.length>AN)?this.mSeriesSet[AN]:AN;AK=AO;}if((AP===N)&&AM.mHasSizeBy){var AI;if(this.mIsSeriesByCol){AI=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AO],AN);}else{AI=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AN],AO);}if(!!AI===false){return null;}AL=n.call(this,AI,AL,AQ,AK,null);}var AR=new W.TextObject({TripleId:new W.TripleId({ObjectId:t.DssGraphDataText,SeriesId:AQ,GroupId:AK}),GraphObjectManager:this,OnMarker:true});AR.SetText(AL);return AR;}function Z(AJ,AM){if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle||this.mMarkerShape===u.DssGraphMarkerShapeGMTick){return new W.Rect2D({Rect2D:Y.call(this,AJ,AM)});}var AI=g.call(this,AJ,AM),AK=o.call(this,AJ,AM),AL=Math.floor(AK+0.5);return new W.Rect2D({x:AI.x-AL,y:AI.y-AL,width:AL*2,height:AL*2});}function k(){var AL,AI,AN=this.mXArity,AK=this.mYArity,AO;for(AL=0;AL<AN;++AL){for(AI=0;AI<AK;++AI){var AP=(this.mSeriesSet.length>AL)?this.mSeriesSet[AL]:AL;var AJ=AI;if(!this.mIsSeriesByCol){AP=(this.mSeriesSet.length>AI)?this.mSeriesSet[AI]:AI;AJ=AL;}if(this.mDatasetPtr.showSeriesDatalabel(AP)===false){continue;}var AM=new W.GridDataLabelInfo();AM.mIsValid=true;AM.mGroupId=AJ;AM.mSeriesId=AP;AM.mXIndex=AL;AM.mYIndex=AI;AM.mHostMarkerBound=Z.call(this,AL,AI);AM.mLabelPtr=D.call(this,AL,AI);if(AM.mLabelPtr===null||AM.mLabelPtr===undefined){AM.mIsValid=false;continue;}else{}this.mDataLabels.push(AM);}}}function AC(){var AK,AI=286,AP=this.mChartContextPtr,AM=AP.GetGraphMatrixContext(),AJ,AL,AN=this.mMarkerCollectionSet;AN.splice(0,AN.length);var AO;if(this.mHasColorBy){return ;}if(AP.mIsGraphMatrix){AL=AM.markerToShape(AM.mMarkerShape);}if(AL!==v._PIE){AK=V.create(AI,0,0);AJ=new W.GraphCollectionObject({TripleId:AK,GraphObjectManager:this,CollectionType:C.CT_GENERAL_SHAPE,Shape:AL});AN.push(AJ);}else{}}function f(AJ){var AK=this.mDataLabels,AM=AK[AJ].mHostMarkerBound,AL={x:AM.x+0.5*AM.width,y:AM.y+0.5*AM.height},AN=AL.x,AI=AL.y;AN+=AM.width%2;AI+=AM.height%2;AK[AJ].mLabelPtr.MoveTo(AN,AI,q.CENTER);}function I(AI,AJ){return AJ*this.mXArity+AI;}function AF(AI,AJ){return new W.Rect2D({x:AI.x-AJ,y:AI.y-AJ,width:AI.width+2*AJ,height:AI.height+2*AJ});}function G(AJ,AK){var AI=new W.Rect2D({x:0,y:0,width:this.mChartContextPtr.mGraphWidth,height:this.mChartContextPtr.mGraphHeight});if(AJ.x<AI.x+AK||AJ.x+AJ.width+AK>=AI.x+AI.width){return false;}return !(AJ.y<AI.y+AK||AJ.y+AJ.height+AK>=AI.y+AI.height);}function H(){var AR,AP,AI=this.mDataLabels,AY=AI.length,AL=this.mChartContextPtr,AX=AL.GetGraphMatrixContext(),AM=AX.getPadding(T.kDataLabel),AW,AS,AQ,AU,AZ={};for(AW=0;AW<AY;++AW){AU=I.call(this,AI[AW].mXIndex,AI[AW].mYIndex);AZ[AU]=AW;}for(AW=0;AW<AY;++AW){var AJ,AV,AT,AN,AK=false;f.call(this,AW);if(!AL.allowOverlapBetweenDatalabels()){AJ=this.mDataLabels[AW].mLabelPtr.GetBoundingRectNoRotation(true);AT=AF.call(this,AJ,AM);AV=G.call(this,AJ,AM);if(!AV){continue;}AR=AI[AW].mXIndex;AP=AI[AW].mYIndex;for(AS=AR-1;AS<=AR+1;AS++){if(AS<0||AS>=this.mXArity){continue;}for(AQ=AP-1;AQ<=AP+1;AQ++){if(AQ<0||AQ>=this.mYArity){continue;}if(AS===AR&&AQ===AP){continue;}AU=I.call(this,AS,AQ);AN=AZ[AU];if(AN>=AI.length){continue;}if(!!AI[AN]===false){continue;}if(AI[AN].mIsValid===false||!!AI[AN].mLabelPtr===false){continue;}AK=AT.HasIntersection(AI[AN].mHostMarkerBound);if(AK){break;}if(AI[AN].mIsDisPlayed){var AO=AI[AN].mLabelPtr.GetBoundingRectNoRotation(true);AK=AK||AT.HasIntersection(AO);}if(AK){break;}}if(AK){break;}}}if(!AK){AI[AW].mIsDisPlayed=true;AI[AW].mLabelPtr.mIsShown=true;this.AddToMapAndList(this.mDataLabels[AW].mLabelPtr);}else{AI[AW].mLabelPtr.mIsShown=false;}}}function a(){var AN,AI=this.mChartContextPtr;if(AI.mIsGraphMatrix){var AO=AI.GetGraphMatrixContext();if(this.mDatasetPtr.showDatalabels()){var AJ=this.dataLabelManager;if(AJ===null||AJ===undefined){AN=new W.Rect2D({x:0,y:0,width:AI.mGraphWidth,height:AI.mGraphHeight});AJ=this.dataLabelManager=new W.DataLabelManager({DataArea:AN});AJ.ChartContext=AI;}if(AO.mMarkerShape===u.DssGraphMarkerShape2DPie||AO.mMarkerShape===u.DssGraphMarkerShape2DRingPie){var AM=[];this.mPieRenderer.enableDataLabel(AJ,AM);var AK,AP=this.mPieRenderer.dataLabels,AL=AP.length;for(AK=0;AK<AL;++AK){var AQ=AP[AK].Label;if(AQ.mIsShown){this.AddToMapAndList(AQ);}}}else{k.call(this);this.mDataLabels.sort(K);H.call(this);}}}}mstrmojo.chart.GridChartPlot=mstrmojo.declare(mstrmojo.chart.GridBasePlot,null,{scriptClass:"mstrmojo.chart.GridChartPlot",mXArity:0,mYArity:0,mDataGroup:1,mIsSeriesByCol:false,mIsAutoFitMode:false,mDataLabelTextMode:0,mMaxDataVal:0,mMinDataVal:0,mMaxMarkerSize:0,mMinMarkerSize:0,mPreXCoord:0,mPreYCoord:0,mUniformColorMode:0,mSeriesSet:null,mMarkerCollectionSet:null,mAutoFitMarkerRect:null,mAdjustMarkerRect:null,mDataLabels:null,mPieRenderer:null,mPieCentersPool:null,init:function z(AI){this._super(AI);this.mSeriesSet=[];this.mMarkerCollectionSet=[];this.mDataLabels=[];this.mAutoFitMarkerRect=new W.Rect2D();this.mAdjustMarkerRect=new W.Rect2D();},AssignSeries:function w(AI){this.mSeriesSet=AI.slice();},GetMaxElementRadius:function AH(){if(this.mMarkerShape===u.DssGraphMarkerShapeRectangle){return Math.min(this.mAdjustMarkerRect.width,this.mAdjustMarkerRect.height);}return this.mMaxMarkerSize;},GenerateMapAndList:function y(){var AL=this.mDatasetPtr,AI=this.mDataArea,AN,AM,AJ,AP,AQ;if(AL===null||AL===undefined){return ;}if((AL.mHasMetrics)&&(this.mSeriesSet.length===0)){return ;}if(AI.width*AI.height===0){return ;}AA.call(this);E.call(this);AC.call(this);AP=this.mXArity;AQ=this.mYArity;for(AN=0;AN<AP;++AN){for(AM=0;AM<AQ;++AM){var AK=A.call(this,AN,AM),AO=AK.length;for(AJ=0;AJ<AO;++AJ){this.AddToMapAndList(AK[AJ]);}}}if(this.mChartContextPtr.mImageUsage===0){a.call(this);}AL.resetDataWindow();}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","CategoryAxis","PlotManager","GridChartPlot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,K=O.enums,A=K.EnumOrientation,E=K.EnumDSSGraphObjectManager,H=O.model,P=H.enums,D=P.EnumDSSGraphProperty;var C=new O.Rect2D(),B=new O.Rect2D();mstrmojo.chart.PlotOption=mstrmojo.provide("mstrmojo.chart.PlotOption",{});function R(S){var T,U;if(this.mChartContextPtr.mIsGraphMatrix){U=O.PlotId0;}else{U=new O.TripleId();U.mObjectId=E.DssPlot;U.mSeriesId=S;}T=new O.GridChartPlot({TripleId:U,GraphObjectManager:this,Area:O.gEmptyRect});T.SetDataset(this.mDatasetPtr);return T;}function Q(U,S){var T=this.mChartAreaOptions.chartAreaNumber,W=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet,V;W[0].SetDeviceDataArea(U);for(V=0;V<T;++V){this.mPlots[V].AssignDataArea(S[V],!this.mIsReuseYAxis);}}function N(Z,V){if(V){var X=new O.Rect2D({Rect2D:Z}),a=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;a[0].AdjustTitleArea(X);a[0].AdjustDataArea(X,0,0,true);return X;}var Y=!(this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet,b=Y.length,S=[],W,U;this.CalculateChartAreas(Z,S);for(U=0;U<b;++U){Y[U].AdjustTitleArea(S[U]);Y[U].AdjustDataArea(S[U],0,0,true);}W=S;var T=W.length;C.Reset(0,0,0,0);B.ResetRect(W[0]);for(U=1;U<T;++U){if(!this.RectangleIntersection(B,W[U],C)){B.Reset(0,0,0,0);break;}B.ResetRect(C);}return B;}function F(S){var T=new O.CategoryAxisInfo(),U,X,V,W=this.mDatasetPtr.GetSeriesByColumn();if(this.mIsReuseYAxis){T.ToY(!W);}else{T.ToX(W);}U=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;if(U.length===0){X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);U.push(X);}this.mPlots[S].AssignAxis(U[0],this.mIsReuseYAxis);if(this.mIsReuseYAxis){T.ToX(W);}else{T.ToY(!W);}T.mId.mSeriesId=S;V=(!this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet;X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);V.push(X);this.mPlots[S].AssignAxis(V[S],!this.mIsReuseYAxis);}function M(){var S=this.mChartContextPtr.GetGraphMatrixContext();if(S){this.mPlotOption.mIsAutoFitMode=!S.mHasSizeBy;this.mPlotOption.mMaxDataVal=S.mMaxSizeVal;this.mPlotOption.mMinDataVal=S.mMinSizeVal;this.mPlotOption.mMarkerShape=S.mMarkerShape;}}mstrmojo.chart.GridChartPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.GridChartPlotManager",mPlots:null,mXAxisSet:null,mYAxisSet:null,mIsReuseYAxis:false,mPlotOption:{},init:function L(S){this._super(S);this.mPlots=[];this.mXAxisSet=[];this.mYAxisSet=[];this.mPlotOption={mIsAutoFitMode:false,mMaxDataVal:100000,mMinDataVal:0,mMarkerShape:4};this.mIsReuseYAxis=false;},Draw:function J(){this._super();var U=this.mYAxisSet.length,V=this.mXAxisSet.length,T=this.mPlots.length,S;for(S=0;S<U;++S){this.mYAxisSet[S].Draw();}for(S=0;S<V;++S){this.mXAxisSet[S].Draw();}for(S=0;S<T;++S){this.mPlots[S].Draw();}},LoadProperties:function G(){this._super();this.mIsReuseYAxis=(this.mChartAreaOptions.mOrientation===A.OR_HORIZONTAL);M.call(this);},GenerateMapAndList:function I(){var S=this.mPlotArea,d=this.mChartAreaOptions,T=this.mGraphObjectManagerList,U=this.mChartContextPtr,Y,a;if(S.width*S.height===0){return ;}if(this.mDatasetPtr===null||this.mDatasetPtr===undefined){return ;}this.LoadProperties();var e=d.chartAreaNumber;for(Y=0;Y<e;++Y){var W=R.call(this,Y);W.AssignSeries(d.seriesDistribution[Y]);W.mLegendPtr=this.mLegendPtr;this.mPlots.push(W);F.call(this,Y);}a=this.mPlots.length;for(Y=0;Y<a;++Y){T.push(this.mPlots[Y]);}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mXAxisSet[Y]);}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mYAxisSet[Y]);}var c=N.call(this,S,true),V=N.call(this,c,false);if(V.width<0){V.width=0;}if(V.height<0){V.height=0;}var b=S.y+Math.max(c.y-S.y,V.y-c.y),f=S.y+S.height-Math.max(S.y+S.height-(c.y+c.height),c.y+c.height-(V.y+V.height))-b;V.y=b;V.height=f;if(U.mManualLayoutMode&&!this.mRecalculateFrame){V=S;}else{}var X=[];this.CalculateChartAreas(V,X);if(U.isUADataAreaOutput()){var Z=U.getUniformAxisContext();X[0].x=Z.mDataAreaLeftMargin;X[0].y=Z.mDataAreaTopMargin;X[0].width=U.mGraphWidth-X[0].x-Z.mDataAreaRightMargin;X[0].height=U.mGraphHeight-X[0].y-Z.mDataAreaBottomMargin;this.mXAxisSet[0].TrimAxisPadding(X[0],false);this.mYAxisSet[0].TrimAxisPadding(X[0],false);V=X[0];}Q.call(this,V,X);a=this.mPlots.length;for(Y=0;Y<a;++Y){this.mPlots[Y].GenerateMapAndList();}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){this.mXAxisSet[Y].GenerateMapAndList();}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){this.mYAxisSet[Y].GenerateMapAndList();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumValueAxis","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","ValuePlot","GraphObjectManager");var d=mstrmojo.chart,Z=d.enums,B=Z.EnumGraphMajorType,D=Z.EnumAxisDirection,A=Z.EnumOrientation,c=Z.EnumValueAxis,f=Z.EnumDSSGraphObjectManager,Y=d.gNullTripleId,T=mstrmojo.chart.model,h=T.enums,J=h.EnumDSSGraphType,K=h.EnumDSSGraphProperty,M=h.EnumDSSGraphObject;var G=new d.Rect2D(),I=new d.Rect2D();function F(j){var k=this.mChartContextPtr;return k.mirrorPrimaryInBubbleScatter(j);}function P(k,j,l){var n=this.mChartContextPtr;if(n.mIsGraphMatrix===false){return k;}if(k==="X1"||k==="Y1"){if(F.call(this,l)){k=k[0]+"2";j=(k==="X2")?4:2;}}return{Key:k,Index:j};}function N(){var j=this.mChartContextPtr.GetGraphType();return((j===J.DssGraphTypeDualAxis_X_Y_Scatter)||(j===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels)||(j===J.DssGraphTypeBubble_DualAxis)||(j===J.DssGraphTypeBubble_DualAxis_With_Labels));}function b(){return(this.mChartAreaOptions.orientation===A.OR_VERTICAL);}function O(p,n){var k=this.Y1Axis[n],q,o=new d.Rect2D({Rect2D:p}),l,r,j;k.TrimDeviceDataArea(o);k.SetDeviceDataArea(o);l=new d.Rect2D({Rect2D:o});k.AdjustDeviceDataArea(l,true);r=new d.Rect2D({Rect2D:l});if(N.call(this)){q=this.Y2Axis[n];q.TrimDeviceDataArea(o);q.SetDeviceDataArea(o);j=new d.Rect2D({Rect2D:o});q.AdjustDeviceDataArea(j,true);this.RectangleUnion(l,j,r);}k.UpdateTitleAndLabelArea(r);if(N.call(this)){q.UpdateTitleAndLabelArea(r);}}function C(k,l){var j=0,n=[this.XAxis,this.Y1Axis,this.Y2Axis];if(((l===1||l===2)&&b.call(this))||(l===0&&!b.call(this))){j=k;}return n[l][j];}function E(t,x){var n=0,s=0,o=Number.MAX_VALUE,w=-o,l,v,r=0,u=[],q=0,AA,k,j,z=false;if(this.mChartContextPtr.mIsUniformAxisMode){var p=this.mChartContextPtr.getUniformAxisContext(),y=p.ValueAxis;switch(x){case 0:o=y.X1.Min;w=y.X1.Max;l=y.X1.Metrics.concat();break;case 1:o=y.Y1.Min;w=y.Y1.Max;l=y.Y1.Metrics.concat();break;case 2:o=y.Y2.Min;w=y.Y2.Max;l=y.Y2.Metrics.concat();break;case 3:o=y.Z.Min;w=y.Z.Max;l=[];break;case 4:o=y.X2.Min;w=y.X2.Max;l=y.X2.Metrics.concat();break;default:o=y.Y1.Min;w=y.Y1.Max;l=y.Y1.Metrics.concat();break;}return{Min:o,Max:w,Metrics:l};}if(x===1||x===2){s=1;}else{if(x===3){s=2;}}v=this.mDatasetPtr.GetGroupCount();if(t===-3){r=this.mDatasetPtr.GetSeriesCount();for(n=0;n<r;++n){u.push(n);}}else{u=this.mChartAreaOptions.seriesDistribution[t];}AA=u.length;for(n=0;n<v;++n){for(q=0;q<AA;++q){if((x===0||x===3)||((x===1||x===2)&&((x-1)===this.VecSeriesVAIndex[u[q]]))){k=this.mDatasetPtr.GetData(u[q],n,s);}if(k!==null){j=k;if(!z){z=true;}if(o>j){o=j;}if(w<j){w=j;}}}}if(o>w){o=0;w=0;}if(z){return{Min:o,Max:w};}}function L(r){var k=[],j,n,q=this.Y1Axis.length,l,p,o;j=N.call(this);for(n=0;n<q;++n){p=new d.Rect2D({Rect2D:r});o=new d.Rect2D({Rect2D:r});if(j){this.Y2Axis[n].ReserveTitleAndLabels(o,this.mBottomMargin,this.mTopMargin);p=o;p.y=r.y;p.height=r.height;}this.Y1Axis[n].ReserveTitleAndLabels(p,this.mBottomMargin,this.mTopMargin);if(j){o=p;o.y=r.y;o.height=r.height;}this.Y1Axis[n].AdjustDeviceDataArea(p,false);k.push(p);if(j){this.Y2Axis[n].AdjustDeviceDataArea(o,false);}k.push(o);}l=k.length;I.ResetRect(k[0]);G.Reset(0,0,0,0);var s;for(n=1;n<l;++n){if(!this.RectangleIntersection(I,k[n],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function X(n){var p=[],l,j=this.XAxis.length,k,q,o;for(l=0;l<j;++l){o=this.XAxis[l];q=new d.Rect2D({Rect2D:n});o.ReserveTitleAndLabels(q,this.mLeftMargin,this.mRightMargin);o.AdjustDeviceDataArea(q,false);p.push(q);}I.ResetRect(p[0]);G.Reset(0,0,0,0);k=p.length;for(l=1;l<k;++l){if(!this.RectangleIntersection(I,p[l],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function S(p){var n,l,q=this.Y1Axis.length,k=this.XAxis.length,o=this.mChartAreaOptions.chartAreaNumber;for(n=0;n<q;++n){if(b.call(this)){this.Y1Axis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);}}else{for(l=0;l<o;++l){this.Y1Axis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);}}}}for(n=0;n<k;++n){if(b.call(this)){for(l=0;l<o;++l){this.XAxis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);}}else{this.XAxis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);}}}function e(j){}function U(){var l,n=this.Y1Axis.length,j=this.Y2Axis.length,k=this.XAxis.length;for(l=0;l<n;++l){this.Y1Axis[l].generateAxisLine(this.mGraphObjectList);}if(N.call(this)){for(l=0;l<j;++l){this.Y2Axis[l].generateAxisLine(this.mGraphObjectList);}}for(l=0;l<k;++l){this.XAxis[l].generateAxisLine(this.mGraphObjectList);}}function Q(){var l=this.mChartContextPtr.GetGraphMajorType(),j=0,k;if(l===B.GMT_SCATTER||l===B.GMT_BUBBLE){j=this.mDatasetPtr.GetSeriesCount();k=this.mChartContextPtr.GetGraphType();if(k===J.DssGraphTypeX_Y_Scatter||k===J.DssGraphTypeX_Y_Scatter_with_Labels||k===J.DssGraphTypeBubble||k===J.DssGraphTypeBubble_With_Labels){return j>=1;}if(k===J.DssGraphTypeDualAxis_X_Y_Scatter||k===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels||k===J.DssGraphTypeBubble_DualAxis||k===J.DssGraphTypeBubble_DualAxis_With_Labels){return j>=2;}}return false;}function H(l,r,s,j){var p=this.mChartContextPtr.getAxisTripleId(l),n=new d.ValueAxis({TripleId:p,GraphObjectManager:this,Min:r.Min,Max:r.Max,LargerGridInterval:false,PrimaryMetricIndex:r.Metrics,IsPercent:false,AxisDirection:s,IsShown:j,Key:l});var k=this.mChartContextPtr;if(k.mIsGraphMatrix&&n.mIsUniformAxis===false){var o=k.getUniformAxisInformation(p.mObjectId),q=o.CondenseEnforced;n.checkCondense(!!q);}return n;}function g(l,k,p,r,n,j){var q=E.call(this,k,p);if(q){var o=H.call(this,l,q,r,n);j.push(o);this.mGraphObjectManagerList.push(o);}}mstrmojo.chart.ValuePlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.ValuePlotManager",ValuePlot:[],XAxis:[],Y1Axis:[],Y2Axis:[],ZAxis:[],VecSeriesVAIndex:[],init:function a(j){this._super(j);this.ValuePlot=[];this.XAxis=[];this.Y1Axis=[];this.Y2Axis=[];this.ZAxis=[];this.VecSeriesVAIndex=[];},Draw:function W(){var o,l=0,p=[this.XAxis,this.Y2Axis,this.Y1Axis],n,k=this.ValuePlot;d.GraphObjectManager.prototype.Draw.apply(this,[]);for(o=0;o<=2;++o){n=p[o];for(l=0;l<n.length;++l){n[l].Draw();}}for(o=0;o<k.length;++o){k[o].Draw();}},GenerateMapAndList:function V(){var o=this.mChartContextPtr,p=this.mPlotArea,AE=this.mGraphObjectManagerList,q=o.isUADataAreaOutput(),x,z,u,v,k,AB,AC,AD=0,l,r,j,AG,AF,y,n,t=[],w,s;if(p.width<=0||p.height<=0){return ;}this.LoadProperties();if(!Q.call(this)){return ;}if(b.call(this)){z=P.call(this,"X1",0,true);g.call(this,z.Key,-3,z.Index,D.AD_X,!q,this.XAxis);for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){z=P.call(this,"Y1",1,false);g.call(this,z.Key,AD,z.Index,D.AD_Y,!q,this.Y1Axis);if(N.call(this)){z=P.call(this,"Y2",2,false);g.call(this,z.Key,AD,z.Index,D.AD_Y,!q,this.Y2Axis);}}}else{z=P.call(this,"Y1",1,false);g.call(this,z.Key,-3,z.Index,D.AD_Y,!q,this.Y1Axis);if(N.call(this)){z=P.call(this,"Y2",2,false);g.call(this,z.Key,-3,z.Index,D.AD_Y,!q,this.Y2Axis);}for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){z=P.call(this,"X1",0,true);g.call(this,z.Key,AD,z.Index,D.AD_X,!q,this.XAxis);}}if(o.GetGraphMajorType()===B.GMT_BUBBLE){if(o.isUADataAreaOutput()){l=o.getUniformAxisContext();x={Metrics:[]};x.Min=l.ValueAxis.Z.Min;x.Max=l.ValueAxis.Z.Max;}else{x=E.call(this,-3,3);}if(x){AB=H.call(this,"Z",x,D.AD_Z,false);this.ZAxis.push(AB);AE.push(AB);}}j=X.call(this,p);this.mLeftMargin+=j.x-p.x;this.mRightMargin+=p.x+p.width-(j.x+j.width);this.mTopMargin+=j.y-p.y;this.mBottomMargin+=p.y+p.height-(j.y+j.height);j.width=Math.max(0,j.width);j.height=Math.max(0,j.height);r=L.call(this,j);r.width=Math.max(0,r.width);r.height=Math.max(0,r.height);AF=p.y+Math.max(j.y-p.y,r.y-j.y);y=p.y+p.height-Math.max(p.y+p.height-(j.y+j.height),j.y+j.height-(r.y+r.height))-AF;r.y=AF;r.height=y;AG=p.x+Math.max(j.x-p.x,r.x-j.x);n=p.x+p.width-Math.max(p.x+p.width-(j.x+j.width),j.x+j.width-(r.x+r.width))-AG;r.x=AG;r.width=n;if(o.mManualLayoutMode&&!this.mRecalculateFrame){r=p;}else{}this.CalculateChartAreas(r,t);if(o.isUADataAreaOutput()){var AA=o.getUniformAxisContext();t[0].x=AA.mDataAreaLeftMargin;t[0].y=AA.mDataAreaTopMargin;t[0].width=o.mGraphWidth-t[0].x-AA.mDataAreaRightMargin;t[0].height=o.mGraphHeight-t[0].y-AA.mDataAreaBottomMargin;r=t[0];}if(b.call(this)){j=new d.Rect2D({Rect2D:r});u=this.XAxis[0];u.TrimDeviceDataArea(j);u.SetDeviceDataArea(j);u.AdjustDeviceDataArea(j,true);u.UpdateTitleAndLabelArea(j);for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){O.call(this,t[AD],AD);}}else{O.call(this,r,0);for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){u=this.XAxis[AD];j=new d.Rect2D({Rect2D:t[AD]});u.TrimDeviceDataArea(j);u.SetDeviceDataArea(j);u.AdjustDeviceDataArea(j,true);u.UpdateTitleAndLabelArea(j);}}if(o.mManualLayoutMode&&!this.mRecalculateFrame){r=p;}for(AD=0;AD<this.mChartAreaOptions.chartAreaNumber;++AD){if(!o.mIsGraphMatrix){AC=new d.TripleId({ObjectId:M.DssGraphFrame,SeriesId:AD});w=new d.RectangleObject({TripleId:AC,GraphObjectManager:this,Area:t[AD]});this.AddToMapAndList(w);}e.call(this,t);S.call(this,t);U.call(this);u=C.call(this,AD,0);v=C.call(this,AD,1);if(N.call(this)){k=C.call(this,AD,2);}if(o.mIsGraphMatrix){AC=d.PlotId0;}else{AC=new d.TripleId({ObjectId:f.DssPlot,SeriesId:AD});}s=new d.ValuePlot({TripleId:AC,GraphObjectManager:this,Area:t[AD]});this.ValuePlot.push(s);AE.push(s);s.SetDataset(this.mDatasetPtr);s.mLegendPtr=this.mLegendPtr;s.AssignValueAxis(u,0);s.AssignValueAxis(v,1);if(N.call(this)){s.AssignValueAxis(k,2);}if(o.GetGraphMajorType()===B.GMT_BUBBLE){s.AssignValueAxis(this.ZAxis[0],3);}s.AssignSeriesInfo(this.mChartAreaOptions.seriesDistribution[AD],this.VecSeriesVAIndex);s.GenerateMapAndList();}if(o.isUADataAreaOutput()){l=o.getUniformAxisContext();t[0].x=l.mDataAreaLeftMargin;t[0].y=l.mDataAreaTopMargin;t[0].width=o.mGraphWidth-t[0].x-l.mDataAreaRightMargin;t[0].height=o.mGraphHeight-t[0].y-l.mDataAreaBottomMargin;r.ResetRect(t[0]);}},LoadProperties:function R(){var q=this.mChartContextPtr,l=this.VecSeriesVAIndex,k,j,n,p,o;this._super();k=this.mDatasetPtr.GetSeriesCount();l.splice(0,l.length);for(j=0;j<k;++j){p=new d.TripleId({ObjectId:M.DssGraphRiser,SeriesId:j});l[j]=c.VA_Y1;if(N.call(this)){o=q.GetProperty(K.DssGraph2DSplitYAutomatic,Y);if(o){n=q.GetProperty(K.DssGraph2DSDSplitY,p);if(n){l[j]=(n===false)?c.VA_Y1:c.VA_Y2;}}else{l[j]=(j%2===0)?c.VA_Y1:c.VA_Y2;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","MarkerObject","SeriesRenderer","Plot","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumGraphMatrixElementSizeMode","EnumGraphMatrixDataLabelPosition","EnumFontRotation","EnumAnchorPoint","EnumImageUsage","EnumGenericDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphProperty","EnumDSSGraphObject");var AF=mstrmojo.chart,AC=AF.ChartConstants,I=AF.enums,h=I.EnumCollectionType,AJ=I.EnumLayout,o=I.EnumOrientation,k=I.EnumValueAxis,AL=I.EnumAnchorPoint,B=I.EnumFillType,AX=I.EnumGenericDirection,j=I.EnumImageUsage,t=I.EnumGraphMatrixElementSizeMode,W=I.EnumGraphMatrixDataLabelPosition,D=I.EnumFontRotation,AB=mstrmojo.chart.model,n=AB.enums,AS=n.EnumDSSGraphMarkerShape,N=n.EnumShapeType,AQ=n.EnumDSSGraphObject,A=AF.common.Utility;var AN=0,r=1,x=2,R=3;var z=new AF.Rect2D(),O=new AF.Rect2D();function L(){var Ab=this.mSeriesInfo,AZ=0,Ac=0,Aa,AY=Ab.length;for(Aa=0;Aa<AY;++Aa){if(Ab[Aa].mValueAxis===k.VA_Y1){AZ=1;}if(Ab[Aa].mValueAxis===k.VA_Y2){Ac=1;}}return AZ+Ac;}function e(AZ){var AY=0;switch(this.mBarRenderType){case r:AY=AZ.seriesInfoID;break;case x:if(L.call(this)>1&&!this.mpABLPlotContext.mABLOptions.mSplitDualAxes){AY=this.mSeriesInfo[AZ.seriesInfoID].mValueAxis;}break;}return AY;}function S(Ac){var AZ=this.mChartContextPtr.GetGraphMatrixContext(),Ad=this.mDatasetPtr,Ab=this.mSeriesInfo,Ae,Aa,AY;if(AZ&&this.mHasSizeBy){Ae=Ad.GetSizeByData(Ab[Ac.seriesInfoID].mSeriesId,Ac.groupID);Ae=Ae||0;Aa=AZ.GetScaledSize(Ae,this.mBarWidth,N._BAR);Aa=Math.max(Aa,1);if(this.mBarRenderType===x){AY=Aa;if(AY%2===0){AY++;}return AY;}return Aa;}return this.mBarWidth;}function P(Ah,Ak){var AZ,Al,Ae,Af,Ag,Aa,Ai,AY,Aj,Ab,Ad=this.mpABLPlotContext,Ac=false;if(Ah.useFloat!==undefined){Ac=Ah.useFloat;}Ak=Ak||this.mBarWidth;Af=Ad.mCategoryAxisPtr;Aa=Ah.groupID;if(Ad.takeGroupCenter){Aj=this.mDatasetPtr.GetClusterDataGroup();Ai=Af.getFloatGroupMiddlePos(Aa);if(Aj<=1){Ai=Ai-0.5*Ak;}else{Ab=Ah.seriesInfoID%Aj;Ai-=0.5*Aj*Ak;Ai+=Ab*Ak;}}else{Ag=e.call(this,Ah);Ai=Af.getGroupStartPos(Aa)+this.mSpaceBetweenGroup/2+(Ak+this.mSpaceBetweenRiser)*Ag;}AZ=Math.floor(Ai+0.5);if(this.mChartContextPtr.mIsGraphMatrix){Al=Ak;if(this.mHasSizeBy){if(!this.mUseDepth){AY=S.call(this,Ah);Ae=Al-AY;Ai+=Ae*0.5;AZ=Math.round(Ai);Al=Math.round(AY);}}else{Al=(Ac?(Ai+Ak):Math.round(Ai+Ak))-AZ;}}else{Al=(Ac?(Ai+Ak):Math.round(Ai+Ak))-AZ;}if(Al===0&&Ak>=0.5){Al=1;}return{Start:AZ,Size:Al};}function H(AZ){var AY,Aa;if(this.mBarOptions.mColorBySeries){if(AZ<0||AZ>=this.mSeriesInfo.length){return true;}}else{Aa=this.mDatasetPtr.GetGroupCount();if(AZ<0||AZ>=Aa){return true;}}AY=(this.mAddedLegendMarkerSet[AZ]!==undefined);if(!AY){this.mAddedLegendMarkerSet[AZ]=true;}return AY;}function p(Ae,Aa){var Ad,Ac,AZ,Ab,AY,Af;Af=Aa.length;for(Ad=0;Ad<(Af-1);++Ad){Ac=Aa[Ad].GetBoundingRect();AZ=Aa[Ad+1].GetBoundingRect();Ab=this.mpABLPlotContext.mValueAxis[Ae].IsReverseOrder()?1:-1;if(Ac.HasIntersection(AZ)){AY=new AF.Point2D({x:Math.floor(AZ.x+AZ.height/2),y:Ac.y});if(Ab===1){AY.y+=Ac.height;}AY.y+=Math.floor(Ab*AZ.height/2);Aa[Ad+1].MoveTo(AY.x,AY.y,AL.CENTER);}}}function AM(Af,AY,Ae){var Ag,Ad,AZ,Ac,Ab,Aa=this.mBarRenderType,Ah;Ag=this.createRiserLabel(Af.seriesInfoID,Af.groupID,Ae);if(Ag===null){return null;}if(Aa===x||Aa===R){Ag.mOnMarker=true;}Ad=this.mIsVertical?AY.GetTopMiddle():AY.GetRightMiddle();AZ=this.mIsVertical?AY.GetBottomMiddle():AY.GetLeftMiddle();Ac=false;Ab=this.GetData(Af.seriesInfoID,Af.groupID);if(Ab!==null&&Ab!==undefined){Ah=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[Af.seriesInfoID].mValueAxis];Ac=(Ab<0)^Ah.IsReverseOrder();}if(Ac){Ad.swapPoints(AZ);}this.MoveLabel(Af.groupID,Ag,Ad,AZ,Af.seriesInfoID);return Ag;}function T(Aa,Ac){var Ab=this.mSeriesInfo,AZ,AY=Ab.length;for(AZ=0;AZ<AY;++AZ){if(Ac===k.VA_BOTH||Ab[AZ].mValueAxis===Ac){Aa.push(AZ);}}}function AG(){var AZ=this.mpABLPlotContext.mABLOptions;var Aa=k.VA_Y1,AY=k.VA_Y2;if(AZ.mUseDepth&&L.call(this)>1&&AZ.mDualAxes&&!AZ.mSplitDualAxes){if((AZ.mOrientation===o.OR_VERTICAL&&AZ.mDepthDirection>=90&&AZ.mDepthDirection<270)||(AZ.mOrientation===o.OR_HORIZONTAL&&AZ.mDepthDirection>=0&&AZ.mDepthDirection<180)){Aa=k.VA_Y2;AY=k.VA_Y1;}}return{First:Aa,Second:AY};}function X(Ab,Ad){if(Ad.length===0){return Ad;}var AZ,AY=[],Aa,Ac;for(AZ in Ad){if(Ad.hasOwnProperty(AZ)){Ac=Ad[AZ];Aa=this.mDatasetPtr.GetData(Ac,Ab);if(Aa!==null&&Aa<0){AY.unshift(Ac);}else{AY.push(Ac);}}}return AY;}function M(Af,AZ,Ae){var Ad=this.mpABLPlotContext.mABLOptions,Aa=Ad.mDepthDirection,AY=Ad.mOrientation,Ab=this.mBarRenderType,Ac=false;switch(this.mBarRenderType){case AN:Ac=false;break;case r:if(Ad.mUseDepth&&((AY===o.OR_VERTICAL&&Aa>=90&&Aa<270)||(AY===o.OR_HORIZONTAL&&Aa>0&&Aa<180))){Ac=true;}break;case x:case R:if((Ad.mUseDepth)&&((AY===o.OR_VERTICAL&&Aa>=180&&Aa<360)||(AY===o.OR_HORIZONTAL&&Aa>=90&&Aa<270))){Ac=true;}break;}AZ.splice(0,AZ.length);T.call(this,AZ,Ae);if(AZ.length===0){return ;}if(Ab===x||(Ab===R&&Ae!==k.VA_BOTH)){AZ=X.call(this,Af,AZ);var Ag=this.mpABLPlotContext.mValueAxis[Ae];if(Ag.IsReverseOrder()){Ac=!Ac;}}if(Ac&&AZ.length>0){AZ.reverse();}}function U(){var Ab=this.mpABLPlotContext,Aa=this.mBarOptions;if(this.mBarColumns===-1){this.mBarColumns=1;switch(this.mBarRenderType){case r:this.mBarColumns=this.mSeriesInfo.length;break;case x:if(L.call(this)>1&&!Ab.mABLOptions.mSplitDualAxes){this.mBarColumns=2;}break;}var AY=this.mGroupSize,AZ=this.evalBarStyleUnitWidth(AY,this.mBarColumns,Aa.mGapWidth);this.mBarWidth=AZ.unitWidth;this.mSpaceBetweenRiser=AZ.riserGap;this.mSpaceBetweenGroup=AZ.groupGap;}}function l(){switch(this.mpABLPlotContext.mABLOptions.mLayout){case AJ.LO_ABSOLUTE:if(this.mChartContextPtr.GetGraphMatrixContext().isCombinationChart()){return r;}return AN;case AJ.LO_CLUSTER:return r;case AJ.LO_STACKED:return x;case AJ.LO_PERCENT:return R;default:return r;}}function AO(Ab,AZ){var AY,Aa;AY=this.mDatasetPtr.GetColorByData(Ab.mSeriesId,Ab.mGroupId);if(AY){Aa=new AF.FormatFill();Aa.mFillType=B.FT_SIMPLE;Aa.mAlpha=255*0.7;Aa.mSimpleColor=AY;AZ.SetFormatFill(Aa);}}function J(){if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function E(){}function AK(Ad,AY,Ak){var Ab,Ag,Ac,Al,AZ=this.mpABLPlot,Aa=this.mpABLPlotContext,Ai=this.mSeriesInfo[Ad.seriesInfoID].mValueAxis,Aj=Aa.mValueAxis[Ai],Af=Aj.mOptions.mDrawFromZero,Ah=Aj.GetAxisOriginValue();Aj.mOptions.mDrawFromZero=(Ah===null||Ah===0);Ab=this.hPrepareData(Ad);if(A.isValidNumber(Ab)===false){return ;}Ag=this.hPrepareRect(Ad,Ab);Al=Ag.Rect;Ac=Ag.AboveBase;if(!this.hUpdateBarRect(Ad,Al,Ac,Ab)){Aj.mOptions.mDrawFromZero=Af;return ;}if(Al.width<=0||Al.height<=0){Aj.mOptions.mDrawFromZero=Af;return ;}if(!Ak){var Ae=this.hPrepareRectangleObject(Ad,Al,Ac);if(Ae){this.hPostProcessOneBar(Ad,Ae);++AZ.DPCount;if(AZ.seriesDPCount[Ad.seriesInfoID]===undefined||AZ.seriesDPCount[Ad.seriesInfoID]===null){AZ.seriesDPCount[Ad.seriesInfoID]=1;}else{++(AZ.seriesDPCount[Ad.seriesInfoID]);}}}Aj.mOptions.mDrawFromZero=Af;}function AH(Ac,AZ,Ae){var Aa,Ad,AY,Ab=[];if((Ae===k.VA_BOTH&&this.mBarRenderType===x)||this.mBarRenderType===R){Aa=AG.call(this);Ad=Aa.First;AY=Aa.Second;M.call(this,Ac,AZ,Ad);M.call(this,Ac,Ab,AY);if(Ab.length>0){AZ=AZ.concat(Ab);}}else{M.call(this,Ac,AZ,Ae);}return AZ;}function g(Ah,Aj){var Ai=this.mChartContextPtr,Ag=1500,AY=-1,AZ=-1;if(this.mBarRenderType===r&&!this.mDatasetPtr.ShouldTakeGroupCenter()){if(Aj>=Ag&&Ai.mPartialRendering){var Ab,Ae,Ak=this.mBarWidth,Ad=Ai.mRenderingWindow,Af=Ai.IsVertical(),Aa=this.mpABLPlotContext,Ac=Aa.mCategoryAxisPtr;if(Af){Ab=Ad.x;Ae=Ab+Ad.width;}else{Ab=Ad.y;Ae=Ab+Ad.height;}AY=Ab-Ac.getGroupStartPos(Ah)-this.mSpaceBetweenGroup/2;AY=Math.round(AY/(Ak+this.mSpaceBetweenRiser))-1;AY=Math.max(AY,0);AZ=Ae-Ac.getGroupStartPos(Ah)-this.mSpaceBetweenGroup/2;AZ=Math.round(AZ/(Ak+this.mSpaceBetweenRiser))+1;AZ=Math.min(AZ,Aj-1);return[AY,AZ];}}return[];}function Y(Af){var AZ=this.mpABLPlotContext,Al=this.IsReverseGroupOrder(),Ak,Ah,Ag=[],AY=[],Aa,Ab,Ad=[],Ai=[],Ae,Ac,Aj;this.initialSeries=[];Ak=this.mDatasetPtr.GetGroupCount();for(Aj=0;Aj<Ak;++Aj){Ah=Aj;if(Al){Ah=Ak-1-Ah;}Ag=AH.call(this,Ah,Ag,Af);Aa=Ag.length;Ac=g.call(this,Ah,Aa);for(Ab=0;Ab<Aa;++Ab){if(Ac.length===2&&(Ab<Ac[0]||Ab>Ac[1])){continue;}Ae={groupID:Ah,seriesInfoID:Ag[Ab]};AK.call(this,Ae,AY);}if(this.mBarRenderType===r){Aa=AY.length;for(Ab=0;Ab<Aa;++Ab){if(AZ.mSeriesOptions[AY[Ab].first].mValueAxis===k.VA_Y1){Ad.push(AY[Ab].second);}else{Ai.push(AY[Ab].second);}}if(Ad.length!==0){p.call(this,k.VA_Y1,Ad);}if(Ai.length!==0){p.call(this,k.VA_Y2,Ai);}}AY.splice(0,AY.length);}}function AU(AZ){var Ac=this.mChartContextPtr;if(Ac.mIsGraphMatrix&&this.mHasColorBy){return null;}if(this.mGroupCount<2){return null;}var AY,Aa=this.mDatasetPtr;AY=new AF.TripleId({ObjectId:AQ.DssGraphRiser});if(this.mBarOptions.mColorBySeries){AY.mSeriesId=this.mSeriesInfo[AZ.seriesInfoID].mSeriesId;}else{AY.mSeriesId=AZ.groupID;}var Ab=this.GetGraphObject(AY);if(Ab===undefined){if(Ac.mIsGraphMatrix){if(Aa.findCell(true,AY.mSeriesId,1)!==-1){Ab=null;return Ab;}}if(Ab===undefined){Ab=new AF.GraphCollectionObject({TripleId:AY,GraphObjectManager:this,CollectionType:(this.mIsVertical?h.CT_VERTICAL_BAR:h.CT_HORIZONTAL_BAR)});}this.AddToMap(Ab);}return this.GetGraphObject(AY);}function V(AZ){if(this.mChartContextPtr.mIsGraphMatrix){var AY=this.mpABLPlotContext.mValueAxis[AZ];if(AY){return AY.mOptions.mUseCustomMinMax;}return false;}return false;}function b(AY,AZ){if(AY.x<AZ||AY.x+AY.width+AZ>this.mChartContextPtr.mGraphWidth){return false;}return(!(AY.y<AZ||AY.y+AY.height+AZ>this.mChartContextPtr.mGraphHeight));}function f(AY,AZ,Aa){if(AY.x+AY.width+Aa<=AZ.x||AY.x>=AZ.x+AZ.width+Aa){return true;}return(AY.y+AY.height+Aa<=AZ.y||AY.y>=AZ.y+AZ.height+Aa);}function AW(Af,Aj,Ah,Ae){var Ag,Ac=0,Ab=0,Aa,Ai,AZ=this.mChartContextPtr,Ad=AZ.GetGraphMatrixContext(),AY=5;if(AZ.mIsGraphMatrix){AY=Ad.getPadding(AC.kDataLabel);}if(Ae){Aj.GetFormatFont().mFontRotation=D.FR_90;}else{Aj.GetFormatFont().mFontRotation=D.FR_NORMAL;}Ag=Aj.GetBoundingRect();switch(Ah){case W._BOTTOM:Ac=0;Ab=(Af.height+Ag.height)/2+AY;break;case W._TOP:Ac=0;Ab=-1*((Af.height+Ag.height)/2+AY);break;case W._LEFT:Ac=-1*((Af.width+Ag.width)/2+AY);Ab=0;break;case W._RIGHT:Ac=(Af.width+Ag.width)/2+AY;Ab=0;break;case W._CENTER:Ac=0;Ab=0;break;}Aa=Af.GetCenter().x+Af.width%2+Ac;Ai=Af.GetCenter().y+Af.height%2+Ab;Aj.MoveTo(Aa,Ai,AL.CENTER);}function Q(Aj,Ah,Ag,Af,Ac,Ae){var Aa=this.mChartContextPtr,Ad=Aa.GetGraphMatrixContext(),AZ,Ai=this.mpABLPlotContext.mABLOptions,Ab=Ai.mLayout,AY=Ai.mOrientation;if(Ac===null||Ac===undefined){Ac=false;}if(Ae===null||Ae===undefined){Ae=false;}if(Ac){AZ=Ae;}else{AZ=Ad.mIsNeedRotateDataLabel;}if(AY===o.OR_VERTICAL){if(Ab===AJ.LO_ABSOLUTE||Ab===AJ.LO_CLUSTER){if(Ag-Af<0){AW.call(this,Aj,Ah,W._BOTTOM,AZ);}else{AW.call(this,Aj,Ah,W._TOP,AZ);}}else{if(this.mSeriesInfo.length===1){if(Ag-Af<0){AW.call(this,Aj,Ah,W._BOTTOM,AZ);}else{AW.call(this,Aj,Ah,W._TOP,AZ);}}else{AW.call(this,Aj,Ah,W._CENTER,AZ);}}}else{if(Ab===AJ.LO_ABSOLUTE||Ab===AJ.LO_CLUSTER){if(Ag-Af<0){AW.call(this,Aj,Ah,W._LEFT,AZ);}else{AW.call(this,Aj,Ah,W._RIGHT,AZ);}}else{if(this.mSeriesInfo.length===1){if(Ag-Af<0){AW.call(this,Aj,Ah,W._LEFT,AZ);}else{AW.call(this,Aj,Ah,W._RIGHT,AZ);}}else{AW.call(this,Aj,Ah,W._CENTER,AZ);}}}}function q(Am,Af,Ag,Ah,AY,Ai){var Aa=this.mChartContextPtr,Ad=this.mDatasetPtr,Al=Aa.mIsGraphMatrix,Ac={},Ae=new AF.TripleId({ObjectId:AQ.DssGraphDataText}),Ak=-3,Aj,Ab;if(Al){var AZ=Ad.showSeriesDatalabel(Am.mSeriesId);if(AZ){Ac.SeriesId=Am.mSeriesId;Ac.GroupId=Af.groupID;Ac.SeriesInfo=Af.seriesInfoID;Ac.HostMarkerBound=Ah;Aj=this.mSGMapLabel[Ak];if(Aj===null||Aj===undefined){this.mSGMapLabel[Ak]=new AF.GraphCollectionObject({TripleId:Ae,GraphObjectManager:this,CollectionType:h.CT_TEXT});}var An=false;if(An&&this.mBarRenderType===r){Ab=this.CreateOneDataLabel(Af.groupID,this.mSeriesInfo[Af.seriesInfoID].mSeriesId,AY,this.mSGMapLabel[Ak]);}else{Ab=this.CreateOneDataLabel(this.mSeriesInfo[Af.seriesInfoID].mSeriesId,Af.groupID,AY,this.mSGMapLabel[Ak]);}if(Ab!==null&&Ab!==undefined){Ac.Label=Ab;Ab.mIsShown=false;Q.call(this,Ah,Ab,AY,Ai);this.mDataLabels.push(Ac);this.AddToMapAndList(Ab);}}}}function AP(Ai,AZ,Ad,Ab,Al){var Ao,Aj,Ag,Af,Am,Aa,Ac,Ak,Ah,An,AY,Ap,Ae;Ao=this.hPrepareData(Ai);if(Ao===null||Ao===undefined){return ;}Aj=this.hPrepareRect(Ai,Ao);Am=new AF.Rect2D({Rect2D:Aj.Rect});Ag=Aj.AboveBase;Af=Aj.AxisOriginValue;if(Am.width<0||Am.height<0){return ;}Aa=new AF.Rect2D();Aa.x=Am.x;Aa.y=Am.y;Aa.width=Am.width;Aa.height=Am.height;if(!this.hUpdateBarRect(Ai,Am,Ag,Ao)){return ;}AZ.push(Am);if(Al){Ac=false;Ak=new AF.TripleId({ObjectId:AQ.DssGraphDataText});Ah=new AF.GraphCollectionObject({TripleId:Ak,GraphObjectManager:this,CollectionType:h.CT_TEXT});if(Ac&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===r){An=this.CreateOneDataLabel(Ai.groupID,this.mSeriesInfo[Ai.seriesInfoID].mSeriesId,Ao,Ah);}else{An=this.CreateOneDataLabel(this.mSeriesInfo[Ai.seriesInfoID].mSeriesId,Ai.groupID,Ao,Ah);}if(An!==null&&An!==undefined){Q.call(this,Am,An,Ao,Af,true,Ab);AY=An.GetBoundingRect();Ad.push(AY);}}else{Ak=new AF.TripleId({ObjectId:AQ.DssGraphDataText});Ap=this.mSeriesInfo[Ai.seriesInfoID].mSeriesId;Ak.mSeriesId=Ap;Ae=this.mSGMapLabel[Ap];if(Ae===null||Ae===undefined){this.mSGMapLabel[Ap]=new AF.GraphCollectionObject({TripleId:Ak,GraphObjectManager:this,CollectionType:h.CT_TEXT});}q.call(this,Ak,Ai,Am,Aa,Ao,Af);}}function AD(Al,Ai,Aj,AY){var Ae=this.IsReverseGroupOrder(),An,Af=this.mpABLPlotContext.mCategoryAxisPtr,Ab=false,Am,Ak,AZ=[],Aa,Ad,Ah,Ag,Ac;this.initialSeries=[];Al.splice(0,Al.length);Ai.splice(0,Ai.length);if(this.mChartContextPtr.mIsGraphMatrix){An=Af.mGroupCount;}else{An=this.mDatasetPtr.GetGroupCount();}for(Am=0;Am<An;++Am){Ak=Am;if(Ae){Ak=An-1-Ak;}if(Ab&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===r){Aa=this.mDatasetPtr.GetGroupCount();for(Ad=0;Ad<Aa;++Ad){AZ.push(Ad);}}else{AZ=AH.call(this,Ak,AZ,k.VA_BOTH);}Ac=AZ.length;for(Ah=0;Ah<Ac;++Ah){Ag={};Ag.groupID=Ak;Ag.seriesInfoID=AZ[Ah];AP.call(this,Ag,Al,Ai,Aj,AY);}}}function w(Aj){var Ak=[],Ai=[],Al=[],Ag=0,Ae,Ad,Ac,AZ,Af,Aa,Ab=this.mChartContextPtr,Ah=Ab.GetGraphMatrixContext(),AY=5;if(Ab.mIsGraphMatrix){AY=Ah.getPadding(AC.kDataLabel);}AD.call(this,Ak,Ai,Aj,true);for(Ae=0;Ae<Ai.length;++Ae){AZ=b.call(this,Ai[Ae],AY);if(!AZ){continue;}Af=true;for(Ad=0;Ad<Ak.length;++Ad){if(Ae===Ad){continue;}Aa=f.call(this,Ai[Ae],Ak[Ad],AY);if(!Aa){Af=false;break;}}if(!Af){continue;}for(Ac=0;Ac<Al.length;++Ac){Aa=f.call(this,Ai[Ae],Al[Ac],AY);if(!Aa){Af=false;break;}}if(Af){++Ag;Al.push(Ai[Ae]);}}return Ag;}function u(){var AY,AZ;if(this.mSeriesInfo.length===0){return false;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);AY=w.call(this,false);AZ=w.call(this,true);return(AZ>AY);}function AV(AY){var Ab=this.mChartContextPtr,Aa=Ab.mIsGraphMatrix,AZ;if(Aa&&Ab.mIsUniformAxisMode){AZ=Ab.getUniformAxisContext();if(AY.x<AZ.mDataAreaLeftMargin||AY.x+AY.width>Ab.mGraphWidth-AZ.mDataAreaRightMargin){return false;}if(AY.y<AZ.mDataAreaTopMargin||AY.y+AY.height>Ab.mGraphHeight-AZ.mDataAreaBottomMargin){return false;}}return true;}function AI(Ah){var Am,Al,Ak,Aj,Ac=this.mChartContextPtr,An=Ac.GetGraphMatrixContext(),Aq,AZ,Aa=this.mDataLabels,Ao,Ag=Ac.allowOverlapBetweenDatalabels(),Ab,Ai,Ad,Af,Ae=5;if(Ac.mIsGraphMatrix){Ae=An.getPadding(AC.kDataLabel);}Ao=Aa.length;for(Am=0;Am<Ao;++Am){for(Aj=0;Aj<4;++Aj){if(An.mMarkerShape===AS.DssGraphMarkerShapeGMTick){AZ=Aj;AW.call(this,Aa[Am].HostMarkerBound,Aa[Am].Label,AZ,false);}else{if(Aj>0){break;}}Aq=Aa[Am].Label.GetBoundingRect();Ai=Ag||b.call(this,Aq,Ae);if(!Ai){continue;}Ad=true;for(Al=0;Al<Ao;++Al){if(Al===Am){continue;}Af=Ag||f.call(this,Aq,Aa[Al].HostMarkerBound,Ae);if(!Af){Ad=false;break;}}if(!Ad){continue;}Ab=Ah.length;for(Ak=0;Ak<Ab;++Ak){Af=Ag||f.call(this,Aq,Ah[Ak].GetBoundingRect(),Ae);if(!Af){Ad=false;break;}}if(V.call(this,this.mSeriesInfo[Aa[Am].SeriesInfo].mValueAxis)){if(!AV.call(this,Aq)){Ad=false;}}if(Ad){Ah.push(Aa[Am].Label);Aa[Am].IsDisplayed=true;Aa[Am].Label.mIsShown=true;if(An.mMarkerShape===AS.DssGraphMarkerShapeGMTick){break;}}}}if(Ah&&Ah.length>0){var AY={x:0,y:0,width:0,height:0};Ah.forEach(function(As,Ar){var At=As.GetBoundingRect();if(Ar===0){AY={x:At.x,y:At.y,width:At.width,height:At.height};return true;}if(At.x<AY.x&&At.x+At.width>AY.x+AY.width){AY.width=At.width;AY.x=At.x;}else{if(At.x<AY.x){AY.width+=AY.x-At.x;AY.x=At.x;}else{if(At.x+At.width>AY.x+AY.width){AY.width+=At.x+At.width-AY.x-AY.width;}}}if(At.y<AY.y&&At.y+At.height>AY.y+AY.height){AY.height=At.height;AY.y=At.y;}else{if(At.y<AY.y){AY.height+=AY.y-At.y;AY.y=At.y;}else{if(At.y+At.height>AY.y+AY.height){AY.height+=At.y+At.height-AY.y-AY.height;}}}});var Ap=this.mpABLPlot.dataLabelManager;if(!Ap){Ap=this.mpABLPlot.dataLabelManager=new AF.DataLabelManager({DataArea:new AF.Rect2D(AY)});Ap.ChartContext=Ac;}if(Ad&&!Ag){Ah.forEach(function(Ar){Ap.UpdateMatrixDataLabel(Ar.GetBoundingRect());});}}}mstrmojo.chart.BarSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.BarSeriesRenderer",mSGMapLabel:[],mpSeriesLineInfo:null,mBarRenderType:AN,mBarWidth:0,mGroupSize:0,mSpaceBetweenRiser:0,mSpaceBetweenGroup:0,mBarColumns:-1,mBarOptions:null,mAddedLegendMarkerSet:null,mDataLabels:null,init:function s(AY){this._super(AY);this.mSGMapLabel=[];this.mAddedLegendMarkerSet=[];this.mDataLabels=[];this.mBarOptions={mOverlap:0,mGapWidth:40,mRiserShape:0,mShowErrorBar:false,mHasMiddleValue:false,mMiddleValueSize:50,mShowSeriesLines:false,mColorBySeries:true};this.LoadProperties();},SetDeviceDataArea:function F(AY){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AF.Rect2D({Rect2D:AY});}else{this.mDeviceDataArea.ResetRect(AY);}}this.mBarRenderType=l.call(this);},AddTextToMapAndList:function AA(AY,AZ){var Ab,Aa,Ad,Ac,Ae,Af;Ad=this.mSGMapLabel.length;for(Aa=0;Aa<Ad;++Aa){Ae=this.mSGMapLabel[Aa];if(Ae!==null&&Ae!==undefined){Ac=Ae.GetCollectionSize();for(Ab=0;Ab<Ac;++Ab){AZ.push(Ae.GetObjectByIndex(Ab));}Af=Ae.mTripleId;AY.push(Af,Ae);}}this.mSGMapLabel.splice(0,this.mSGMapLabel.length);this._super(AY,AZ);},CreateTrendLine:function Z(Aa,AZ,AY){this._super(Aa,AZ,AY);},GenerateMapAndList:function a(AY){var AZ=this.mChartContextPtr;if(AZ.mImageUsage!=j.OBJECT_CLIP_COMPUTATION){return this.GenerateByValueAxis(k.VA_BOTH,AY);}},GenerateByValueAxis:function G(Ac,Aa){var Ab=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);Y.call(this,Ac);if(Ab.mIsGraphMatrix){if(Ab.mImageUsage===j.GENERAL){if(this.mDatasetPtr.showDatalabels()){var AZ=[],AY=[];AD.call(this,AZ,AY,false,false);AI.call(this,Aa);}this.GenerateTrendLine();this.GenerateRefLine();}}this.populateRenderSequence();},LoadProperties:function y(){var Ac=this.mChartContextPtr,Aa=this.mBarOptions,Ab,AY=Ac.GetGraphMatrixContext(),AZ=AY.mElementsInfo;if(Ac.mIsGraphMatrix){Aa.mColorBySeries=!this.mChartContextPtr.isLegendByGroup();Aa.mGapWidth=10;if(AZ.Max.Mode===t._MANUAL){Ab=AZ.Max.Size*100;if(Ab<1){Ab=1;}if(Ab>100){Ab=99;}Aa.mGapWidth=100-Ab;}}if(Ac.mImageUsage!==0){return ;}},ShouldRotateDataLabel:function v(){var AZ=this.mChartContextPtr.GetGraphMatrixContext(),Aa=this.mpABLPlotContext.mABLOptions,AY=Aa.mOrientation,Ab=Aa.mLayout;if(AZ.mMarkerShape===AS.DssGraphMarkerShapeGMTick){return false;}if(AY===o.OR_HORIZONTAL){return false;}if(AZ.isCombinationChart()&&(Ab===AJ.LO_ABSOLUTE)){Ab=AJ.LO_CLUSTER;}if(Ab===AJ.LO_ABSOLUTE||this.mSeriesInfo.length===1){return u.call(this);}if(Ab===AJ.LO_CLUSTER){return true;}return false;},GetSeriesOrderByType:function d(AZ,AY,Aa){return AH.call(this,AZ,AY,Aa);},GetRiserStartPosAndSize:function c(AZ,AY){return P.call(this,AZ,AY);},hUpdateBarRect:function AR(Ah,Ai,Af,AZ){var Ab=this.mChartContextPtr,Ag,Al,Ad,AY,Ak=this.mpABLPlotContext,Am=Ak.mABLOptions,Ac=this.mDatasetPtr,Aj=this.mSeriesInfo,Aa=Am.mOrientation,Ae=Am.mLayout;if(!Ab.mIsGraphMatrix){return true;}if(AZ!==0&&(this.mBarRenderType===x||this.mBarRenderType===R)){AZ=Ac.GetData(Aj[Ah.seriesInfoID].mSeriesId,Ah.groupID,0);}if(AZ!==0){if(Aa===o.OR_VERTICAL&&Ai.height===0){Ai.height=1;}if(Aa===o.OR_HORIZONTAL&&Ai.width===0){Ai.width=1;}}if(Ai.width*Ai.height===0){return false;}Ag=this.mSeriesInfo[Ah.seriesInfoID].mValueAxis;Al=Ak.mValueAxis[Ag];if(Al===null){return false;}z.ResetRect(Ai);Ad=Al.GetBasePosition(true);AY=Al.GetBaseValue(true);if(Ad===null||AY===null){return false;}if(Aa===o.OR_VERTICAL){if(Al.isBaseLineQualified()){if(z.y===Ad){if(Af){--(z.y);--(z.y);}else{}if(z.height>1&&Ae===AJ.LO_STACKED){++(z.y);--(z.height);}}else{if(z.y+z.height===Ad){if(z.height>1){z.height--;}else{z.y--;}}}}else{if(z.y===Ad){if(AZ>=AY){--(z.y);--(z.y);}else{if(z.height>1){z.y++;z.height--;}}}if(z.y+z.height===Ad&&z.height===1){if(AZ>=AY){--(z.y);++(z.height);}}}}if(Aa===o.OR_HORIZONTAL){if(Al.isBaseLineQualified()){if(z.x===Ad){if(Af){++(z.x);}else{--(z.x);--(z.x);}if(z.width>1&&Ae===AJ.LO_STACKED){--(z.width);}}else{if(z.x+z.width===Ad){if(z.width>1){}else{z.x--;}}}}else{if(z.x===Ad){if(Af&&AZ>AY){if(z.x>Ad){z.width+=z.x;z.x=Ad;}}}if(z.x+z.width===Ad){--(z.x);++(z.width);}}}Ai.copy(z);return true;},hPrepareData:function K(AZ){var Aa,Ac=this.mChartContextPtr,AY;Aa=this.GetData(AZ.seriesInfoID,AZ.groupID);if(Aa===null){if(Ac.mIsGraphMatrix===false){AY=AU.call(this,AZ);if(AY){if(this.mBarOptions.mColorBySeries&&!H.call(this,AZ.seriesInfoID)){this.AddLegendMarkerToCollection(AZ.seriesInfoID,AY);}}}}else{var Ab={mSeriesId:this.mSeriesInfo[AZ.seriesInfoID].mSeriesId,mGroupId:AZ.groupID};if(Ac.checkColorByAndSizeByValue(Ab,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){Aa=null;}}return Aa;},hPrepareRect:function C(Ai,Ar,Ah){var Aa=this.mpABLPlotContext,Ag=Aa.mABLOptions,Ac=this.mSeriesInfo[Ai.seriesInfoID].mValueAxis,Am=Aa.mValueAxis[Ac];var Af=Am.GetAxisOriginValue(),Ap=Am.GetBaseValue(true),Ab=Ar>Ap,Ao=P.call(this,Ai,Ah),AZ=Ao.Start,Aj=Ao.Size,AY=Am.GetBasePosition(true),An=Am.GetPositionByValue(Ar);O.Reset(0,0,0,0);if(An===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ab};}if(this.mBarRenderType===x||this.mBarRenderType===R){var Ae,As=false,Ak,Al,Ad;if(Af===null||Af===0||this.mBarRenderType===R){As=true;}else{Ak=this.updateGroupStackInfoWithBase(Ac,Ai.groupID,Af);Al=this.getSeriesOffsetIntoStackedInfo(Ac,Ai.groupID,Ai.seriesInfoID);var Aq=Ak[Al];if(Aq.Max===null||Aq.Min===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ab};}AY=Am.ValueToPosition(Aq.Min);An=Am.ValueToPosition(Aq.Max);}if(As){if(this.mBarRenderType===x&&Am.mOptions.mUseLogarithmicScale&&this.initialSeries[Ai.groupID]===undefined){Ae=Math.max(Ap,1);this.initialSeries[Ai.groupID]=Ai.seriesInfoID;}else{Ae=this.GetData(Ai.seriesInfoID,Ai.groupID,true);}Ad=this.GetData(Ai.seriesInfoID,Ai.groupID);AY=Am.GetPositionByValue(Ae);An=Am.GetPositionByValue(Ad);}if(AY===null||An===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ab};}Ab=(Ad>=Ap);}switch(Ag.mOrientation){case o.OR_VERTICAL:O.x=AZ;O.y=Math.min(AY,An);O.width=Aj;O.height=Math.abs(AY-An);break;case o.OR_HORIZONTAL:O.x=Math.min(AY,An);O.y=AZ;O.width=Math.abs(AY-An);O.height=Aj;break;}return{Rect:O,AboveBase:Ab,AxisOriginValue:(Af||0)};},hPostProcessOneBar:function AT(Ab,Ad){var AY=AU.call(this,Ab);if(Ad!==null){var AZ=this.mBarOptions;if(AY){AY.AddGraphObject(Ad);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mHasColorBy&&!this.mChartContextPtr.mDebugUseNewProperties){var Ac=Ad.mTripleId;AO.call(this,Ac,Ad);}}this.mGraphObjectList.push(Ad);this.AddToMap(Ad);if(AZ.mColorBySeries&&!H.call(this,Ab.seriesInfoID)){this.AddLegendMarkerToCollection(Ab.seriesInfoID,AY);}else{if(!this.mBarOptions.mColorBySeries&&this.mChartContextPtr.mIsGraphMatrix){if(this.mAddedLegendMarkerSet[Ab.groupID]===null&&this.mLegendPtr!==null){var Aa;if(AY){Aa=AY.GetFormatFill();}else{Aa=Ad.GetFormatFill();}this.mLegendPtr.UpdateFormatForLegendMarker(Ab.groupID,Aa,null);this.mAddedLegendMarkerSet[Ab.groupID]=true;}}}}},hPrepareRectangleObject:function AE(Ae,Ag,AY){if(Ag.width<0||Ag.height<0){return null;}var AZ=this.mChartContextPtr,Ac=this.mpABLPlot.mABLPlotContext,Ad=Ac.mABLOptions,Af=AU.call(this,Ae),Aa=new AF.TripleId({ObjectId:AQ.DssGraphRiser,SeriesId:this.mSeriesInfo[Ae.seriesInfoID].mSeriesId,GroupId:Ae.groupID}),Ab;if(Ad.mUseDepth){console.alert("Missing method for depth rectangle object");}else{Ab=new AF.RectangleObject({TripleId:Aa,GraphObjectManager:this,Area:Ag,GraphCollectionObject:Af,Shape:N._BAR,hasFill:true});if(AZ.mIsGraphMatrix){if(AY){Ab.mBorderOpenType=this.mIsVertical?AX.BOTTOM:AX.LEFT;}else{Ab.mBorderOpenType=this.mIsVertical?AX.TOP:AX.RIGHT;}}}if(AZ.mUseAnimation){Ab.SetAnimationEnable(true);Ab.SetProgress(1);}return Ab;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Point2D","Vector2D","Polygon2D","SeriesRenderer","CategoryPlot","MarkerObject","NumberObject","Plot","ChartConstants","GraphObjectAggregation","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumValueAxis","EnumShowFace","EnumAttachedPointsStyle","EnumPictureFormatType","EnumImageUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape");var j=mstrmojo.chart,d=j.ChartConstants,O=mstrmojo.chart.enums,S=O.EnumAttachedPointsStyle,C=O.EnumCollectionType,q=O.EnumMajorGraphType,T=O.EnumLayout,D=O.EnumValueAxis,AA=O.EnumDSSExtraGraphObject,J=O.EnumImageUsage,z=O.EnumPictureFormatType,b=mstrmojo.chart.model,V=b.enums,AC=V.EnumDSSGraphObject,AD=V.EnumDSSGraphMarkerShape,AE=V.EnumShapeType,R=V.EnumDSSGraphFillEffect,y=j.gNullGroupId;var K=new j.Rect2D(),w=new j.TripleId();var A=new j.Point2D();A.Reset(-1,-1);A.isNull=true;function v(){var AN,AM,AL,AO,AP,AK=this.mAreaCollection;AK.splice(0,AK.length);AN=this.mIsVertical?C.CT_VERTICAL_AREA:C.CT_HORIZONTAL_AREA;AM=this.mSeriesInfo.length;for(AL=0;AL<AM;++AL){AO=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AL].mSeriesId});AP=new j.GraphCollectionObject({TripleId:AO,GraphObjectManager:this,CollectionType:AN});AK.push(AP);this.AddToMap(AK[AL]);this.AddLegendMarkerToCollection(AL,AK[AL]);}}function F(AL){var AQ,AM,AP,AO,AN,AK,AR;AQ=this.mSeriesInfo[AL].mSeriesId;AP=new j.TripleId({ObjectId:AC.DssGraphDataText,SeriesId:AQ,GroupId:y});AM=new j.GraphCollectionObject({TripleId:AP,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AM);AO=this.mFinalSeriesPolygons[AL];AR=this.mGroupCount;for(AN=0;AN<AR;++AN){if(AO[AN].x!==-1){AK=this.createRiserLabel(AL,AN,AM);this.MoveLabel(AN,AK,AO[AN],AO[2*this.mGroupCount-1-AN],AL);}}}function B(AP,AN){var AM,AO,AK,AL;for(AM=0;AM<this.mGroupCount;++AM){AO=this.CreateTotalLabel(AP,AM,AN);if(AO!==null){AK=this.GetUpmostIndexByValueAxisAndGroup(AP,AM);AL=this.mFinalSeriesPolygons[AK];this.MoveLabel(AM,AO,AL[AM],AL[2*this.mGroupCount-1-AM],AK);}}}function e(){var AM,AL,AQ,AO,AK,AP=this.mpABLPlotContext,AN=AP.mABLOptions;AM=this.mSeriesInfo.length;for(AL=0;AL<AM;++AL){if(AP.mSeriesOptions[this.mSeriesInfo[AL].mSeriesIndex].mShowDataLabels){F.call(this,AL);}}if(AN.mMajorGraphType===q.MGT_AREA&&AN.mLayout===T.LO_STACKED&&!AN.mShowCumulate&&AN.mShowValue&&AN.mShowTotal){AO=this.mpManager.mTripleId;AQ=new j.TripleId({ObjectId:AC.DssGraphDataTextStackTotal,SeriesId:AO.mSeriesId,GroupId:y});AK=new j.GraphCollectionObject({TripleId:AQ,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AK);B.call(this,D.VA_Y1,AK);if(AN.mDualAxes){B.call(this,D.VA_Y2,AK);}}}function r(){}function n(AK){var AL=AK,AN=this.mpABLPlotContext.mABLOptions.mLayout,AM=this.mChartContextPtr.mIsGraphMatrix;if(AM&&(AN===T.LO_STACKED||AN===T.LO_PERCENT)){if(AK>=0&&AK<this.mSeriesDrawingOrder.length){AL=this.mSeriesDrawingOrder[AK];}}return AL;}function G(AL){var AM=0,AK=0;this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);while(AM<this.mGroupCount){if(AL[AM].x===-1){++AM;continue;}this.mGroupIdMapPerSeries[AK]=AM;++AM;AK++;}}function k(AN){this.mGroupRangeList.splice(0,this.mGroupRangeList.length);if(AN.length===0){return ;}var AM=0,AQ,AP,AL,AO,AK;AK=AN.length;for(AO=0;AO<AK;++AO){AQ=AM+AN[AO].length/2;AP=this.getCorrectGroupIdInSeriesPoints(AM,AM);AL=this.getCorrectGroupIdInSeriesPoints(AQ-1,AQ-1);this.mGroupRangeList.push({Start:AP,End:AL});AM=AQ;}}function L(AS,AQ){var AW=[],AT=[],AX,AV,AN,AM,AU,AL=this.mChartContextPtr,AP=AL.mIsGraphMatrix,AR=AL.mIsTimeSeriesChart;AX=0;AV=AS.length;AU=(AR||AP)?0:1;for(AN=0;AN*2<=AV;++AN){if(AS[AN].x!==-1){continue;}if(AN-AX>AU){var AK=2*(AN-AX);for(AM=AX;AM<AN;++AM){AW[AM-AX]=AS[AM];AW[AK-1-(AM-AX)]=AS[AV-1-AM];}AT.push(AW);AQ.push(AW);AW=[];}AX=AN+1;}if(AX<AV/2){var AY=AV/2-AX;if(AY>AU){if(AX===0){AT.push(AS);AQ.push(AS);}else{if(AX<AV/2){var AO=AY*2,AZ=AS.slice(AX,AX+AO);AT.push(AZ);AQ.push(AZ);}}}}G.call(this,AS);k.call(this,AT);return AT;}function W(AK,AL){if(AK<0||AK>=this.mGroupRangeList.length){return AL;}return this.mGroupRangeList[AK].Start;}function AF(AO,AL,AR){var AN=new j.TripleId({TripleId:AO}),AM=null,AQ=this.mChartContextPtr;if(AL.length===2){AN.mObjectId=AC.DssGraphDataMarker;var AP=4,AK=AD.DssGraphMarkerShapeCircle;AM=new j.MarkerObject({TripleId:AN,MarkerPosition:AL[0],MarkerShape:AK,IsIsometric:true,MarkerSize:AP,GraphObjectManager:this,GraphCollectionObject:AR});return AM;}if(AQ.mImageUsage===J.OBJECT_CLIP_COMPUTATION){return AM;}AM=new j.PolygonObject({TripleId:AN,GraphObjectManager:this,Polygon:AL,ParentObject:AR,Shape:AE._POLYGON});if(AQ.mIsGraphMatrix&&this.mChartContextPtr.mImageFormat===z.SVG){AM.mPointsStyle=S.TOOLTIP_UPPER;}return AM;}function a(AK,AL,AO){var AN=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AK].mSeriesId,GroupId:y}),AP=this.mAreaCollection[AK],AM;AM=AF.call(this,AN,AL,AO,AP);if(AM){this.mGraphObjectList.push(AM);AP.AddGraphObject(AM);}}function AI(AV,AK,AS){var AL=this.mChartContextPtr,AP=AL.GetGraphMatrixContext(),AW=AV.GetMaxMinDataInputPosition(),AT=AV.mTripleId.mObjectId,AQ=AW.LowBoundary,AR=AW.HighBoundary,AN;if(this.mIsVertical){AN=(AT===AC.DssGraphY1Body)?"Y1":"Y2";}else{AN=(AT===AC.DssGraphX1Body)?"X1":"X2";}var AM=this.mClippedMarkerSize[AN],AU=AM.LowOffset,AO=AM.HighOffset;AW=AP.getClippedOffset(AQ,AR,AS,AK,!this.mIsVertical,AU,AO);AM.LowOffset=AU=AW.LowOffset;AM.HighOffset=AO=AW.HighOffset;}function AB(AQ,AT,AP){if(!this.mChartContextPtr.mIsGraphMatrix){return AQ;}var AO,AN=0,AU=false,AM;if(AT.IsBaseAtZero()){AO=AT.GetPositionByValue(0);if(AO!==null){AN=AO;if(AT.isBaseLineQualified()){var AS=AQ.length;if(AS%2===0&&AS>=4){var AK=AS/2,AR,AL;AR=AQ.slice(0,AK);AL=AQ.slice(AK,AQ.length+1);if(AP&&AL[0].y===AN){AU=true;for(AM=0;AM<AK;++AM){if(AR[AM].y!==AL[AK-1-AM].y){AL[AK-1-AM].y--;}}}if(!AP&&AL[0].x===AN){AU=true;for(AM=0;AM<AK;++AM){if(AR[AM].x!==AL[AK-1-AM].x){AL[AK-1-AM].x++;}}}if(AU){AQ.splice(0,AQ.length);AQ=AR.concat(AL);}}}}}return AQ;}function M(AO,AQ){if(!this.mChartContextPtr.mIsGraphMatrix){return AO;}var AK=AO.length,AN;if(AK%2===0&&AK>=4){var AM=AK/2,AP,AL;AP=AO.slice(0,AM);AL=AO.slice(AM,AO.length+1);for(AN=0;AN<AM;++AN){if(AQ){if(AP[AN].y!==AL[AM-1-AN].y){AL[AM-1-AN].y++;}}else{if(AP[AN].x!==AL[AM-1-AN].x){AL[AM-1-AN].x--;}}}AO.splice(0,AO.length);AO=AP.concat(AL);return AO;}return AO;}function t(AY,AO,AU,AM){var Aa=this.mChartContextPtr.mIsGraphMatrix,Ab,AZ,Ad,AR;if(!Aa){a.call(this,AY,AU,AM);}var AN=this.mpABLPlotContext.mValueAxis,AV=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AY].mSeriesId,GroupId:AO});if(AU.length===1){return ;}if(AU.length<=2){var AS=this.drawSinglePoint(AV,AU[0],AE._CIRCLE,AE._AREA);Ab=AS.Object;if(this.mDatasetPtr.showSeriesDatalabel(this.mSeriesInfo[AY].mSeriesId)){if(Ab!==undefined&&Ab!==null){this.mSinglePointObjects.push(Ab);}}AR=AS.ShapeSize;if(AR===undefined){if(Ab){AR=Ab.getShapeSize();}else{AR=0;}}AZ=AN[this.mSeriesInfo[AY].mValueAxis];if(AZ){AI.call(this,AZ,AU[0],AR);}}else{var AW=this.mHasColorBy&&this.mDatasetPtr.isGradientABL();AZ=AN[this.mSeriesInfo[AY].mValueAxis];Ad=AU.slice(0);Ad=AB.call(this,Ad,AZ,this.mIsVertical);if(AV.mSeriesId!==0){Ad=M.call(this,Ad,this.mIsVertical);Ab=AF.call(this,AV,Ad,AM,null);}else{Ab=AF.call(this,AV,Ad,AM,null);}if(AW){var AX=Ad;if(Ab){var AP=this.prepareTransitionalGradient(AV,AX,AX.length/2),AQ=Ab.GetFormatFill(),Ac=AQ.transformToGradient(AP);Ab.SetFormatFill(Ac);if(AP.Effective){var AT=Ac.getGradient(),AL=Ab.mFormatLinePtr.transformToGradientFromFill(AT,AX[0],AX[AX.length/2-1]);Ab.SetFormatLine(AL);}}}var AK=Ab&&(Ab instanceof j.MarkerObject);if(AK){AZ=AN[this.mSeriesInfo[AY].mValueAxis];if(AZ){AR=Ab.getShapeSize();AI.call(this,AZ,AU[0],AR);}}}if(Ab){this.mGraphObjectList.push(Ab);this.AddToMap(Ab);}}function g(AK,AM){var AP=AM.length/2,AO=AM.length-1,AN=[],AL;if(AK.mSeriesId===0&&this.mIgnoreBasesSeriesBorder){delete this.mIgnoreBasesSeriesBorder;return null;}AN.push(AM[AO]);for(AL=0;AL<=AP;++AL){AN.push(AM[AL]);}return new j.PolyLineObject({TripleId:AK,GraphObjectManager:this,PolyLine:AN});}function I(AM,AU,AP){var AL=this.mChartContextPtr,AV=this.mSeriesInfo[AM],AS=AV.mSeriesId,AT=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:AS,GroupId:AU}),AK,AN,AW,AO;if(AP.length<4){return ;}if(!AL.mIsGraphMatrix){return ;}AK=this.GetGraphObject(AT);if(AK!==undefined&&AK!==null){AN=new j.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:AS});AW=g.call(this,AN,AP,AM);if(AW){AO=AW.mFormatLinePtr;AO.mLineThickness=2;var AR=AK.mFormatLinePtr,AQ=AK.GetFormatFill();if(AR){AO=mstrmojo.hash.copy(AR,AO);}else{if(AQ){AO.mLineColor=AQ.mSimpleColor;}}}if(AW){AW.mIsDetectable=false;this.mGraphObjectList.push(AW);}}}function x(AN,AU,AR){var AL=this.mChartContextPtr,AM=this.mDatasetPtr,AP,AV=this.mSeriesInfo[AN],AT=AV.mSeriesId,AS,AK,AO,AW,AQ;if(AR.length<4){return ;}if(!AL.mIsGraphMatrix){return ;}AP=AM.showSeriesDatalabel(AT);if(AP){AS=new j.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:AT,GroupId:AU});AK=this.GetGraphObject(AS);if(AK!==undefined&&AK!==null){AO=new j.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:AT});AW=g.call(this,AO,AR,AN);if(AW===null){return ;}AQ=AW.mFormatLinePtr;AQ.mLineThickness=2;AQ.mAlpha=255;this.mAreaBoundForDataLabel.push(AW);}}}function H(AK,AM){var AP,AQ,AS,AL,AT=[],AO=this.mChartContextPtr.mIsGraphMatrix;var AN=n.call(this,AK);AP=this.mSeriesPolygons[AN];if(AP.length<4&&!AO){return ;}this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);this.mGroupRangeList.splice(0,this.mGroupRangeList.length);AQ=L.call(this,AP,AT);AS=AQ.length;for(AL=0;AL<AS;++AL){var AR=-3;if(AO){AR=W.call(this,AL,AR);}t.call(this,AN,AR,AQ[AL],AM);I.call(this,AN,AR,AT[AL],AM);x.call(this,AN,AR,AT[AL],AM);}}function l(){}function Q(AL,AN){var AM=this.mSeriesPolygons[AL];if(AM[AN-1].x===-1||AM[AN].x===-1){return ;}var AK=[];AK[0]=AM[AN-1];AK[1]=AM[AN];AK[2]=AM[AM.length-AN-1];AK[3]=AM[AM.length-AN];return AK;}function U(AQ,AM){var AU,AR=[],AS=[],AL=[],AP,AN,AV,AT,AK,AO;if(this.mHasNegativeValue){l.call(this,AQ,AM);return ;}AU=this.IsReverseSeriesOrder(AQ);AP=this.mSeriesInfo.length;for(AO=0;AO<AP;++AO){AN=AU?AP-1-AO:AO;if(this.mSeriesInfo[AN].mValueAxis===AQ){AV=Q.call(this,AN,AM);if(AV===undefined){continue;}AR.push(AV);AS.push(AN);AL.push(true);}}AT=AR.length;for(AO=0;AO+1<AT;++AO){if(AU){AK=new j.Vector2D({StartPoint:AR[AO][3],EndPoint:AR[AO][2]});}else{AK=new j.Vector2D({StartPoint:AR[AO][0],EndPoint:AR[AO][1]});}if(this.PriorToNextSeries(AK,AM)){r.call(this,AS[AO],AR[AO],AM);AL[AO]=false;}}for(AO=AT-1;AO>=0;--AO){if(AL[AO]){r.call(this,AS[AO],AR[AO],AM);}}}function o(AP){var AL,AO,AN,AM=this.mSeriesInfo,AK=AM.length;if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){for(AL=0;AL<AK;++AL){if(AP===AM[AL].mValueAxis||AP===D.VA_BOTH){H.call(this,AL,this.mUseDepth);}}}else{AO=this.IsReverseGroupOrder();if(this.mpABLPlotContext.mABLOptions.mCurvedLines){l.call(this,AP,0);}else{for(AL=1;AL<this.mGroupCount;++AL){AN=AO?this.mGroupCount-AL:AL;U.call(this,AP,AN);}}for(AL=0;AL<AK;++AL){if(AP===AM[AL].mValueAxis||AP===D.VA_BOTH){H.call(this,AL,false);}}}}function Y(AL,AM,AN,AK){if(AL){if(AN){return AK.y<AM;}return AK.y<=AM;}if(AN){return AK.x>AM;}return AK.x>=AM;}function E(Ag){var AK=this.mpABLPlotContext,AQ=this.mpABLPlot,AV=[],An=0,Al=0,Ad,Aj,AP,Aq,AY,AO,Af,AW,AR,Ab,Ak,AT,Am,AU,AN,Ai=false,AX=false,AZ=false,Ao=this.mpABLPlotContext.mABLOptions.mLayout,Ah=this.mChartContextPtr.mIsGraphMatrix,AM=this.mGroupCount;if(this.mUseDepth){Ad=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[Ag].mSeriesIndex);An=Ad.OffsetX;Al=Ad.OffsetY;}AP=this.mSeriesInfo[Ag].mValueAxis;Aj=AK.mValueAxis[AP];AU=Aj.GetAxisOriginValue();AW=Aj.mOptions.mDrawFromZero;Aj.mOptions.mDrawFromZero=(AU===null||AU===0)&&(Aj.mOptions.mUseLogarithmicScale===false);AO=Aj.GetBasePosition(true);Aq=Aj.GetBaseValue(true);AN=Aj.GetPositionByValue(AU!==null?AU:0);if(AN===null){AN=-100;}AY=Aj.GetBasePosition(AU);for(Af=0;Af<AM;++Af){AR=0;Ad=this.GetData(Ag,Af);Ab=(Ad===null);if(Ad!==null){AR=Ad;++AQ.DPCount;if(AQ.seriesDPCount[this.mSeriesInfo[Ag].mSeriesId]===undefined||AQ.seriesDPCount[this.mSeriesInfo[Ag].mSeriesId]===null){AQ.seriesDPCount[this.mSeriesInfo[Ag].mSeriesId]=1;}else{++(AQ.seriesDPCount[this.mSeriesInfo[Ag].mSeriesId]);}}Ak=0;Ad=Aj.GetPositionByValue(AR);if(Ad!==null){Ak=Ad;}if(Ah&&Ab){AV[Af]=A;AV[AM*2-Af-1]=A;continue;}if((this.mIsAbsolute&&Ab)||Ad===null){AV[Af]=A;AV[AM*2-Af-1]=A;continue;}AT=AK.mCategoryAxisPtr.getGroupMiddlePos(Af);if(!this.mIsAbsolute){var AS=Ao===T.LO_STACKED,AL=Aj.mOptions.mUseCustomMinMax,Ap=Aj.mOptions.mUseLogarithmicScale;if(Aj.mOptions.mDrawFromZero||T.LO_PERCENT===Ao||(AS&&!AL&&Ap)){if((AS&&!AL&&Ap)&&(Ag===0)){Am=Aq;}else{Am=0;Ad=this.GetData(Ag,Af,true);if(Ad!==null){Am=Ad;}}Ad=Aj.GetPositionByValue(Am);if(Ad!==null){AO=Ad;}else{AV[Af]=A;AV[AM*2-Af-1]=A;continue;}}else{var Aa=this.updateGroupStackInfoWithBase(AP,Af,AU);var Ac=this.getSeriesOffsetIntoStackedInfo(AP,Af,Ag);var Ar=Aa[Ac];AO=Aj.ValueToPosition(AR>=Aq?Ar.Min:Ar.Max);Ak=Aj.ValueToPosition(AR>=Aq?Ar.Max:Ar.Min);}}if(Ak===AY&&AR!==Aq){if(this.mIsAbsolute&&this.mSeriesInfo.length===1){if(this.mIsVertical){Al=AR>0?-1:1;}else{An=AR>0?1:-1;}}else{if(Ag===0){this.mIgnoreBasesSeriesBorder=true;}}}if(this.mIsVertical){AV[Af]=new j.Point2D({x:AT+An,y:Ak+Al});AV[AM*2-Af-1]=new j.Point2D({x:AT+An,y:AO+Al});}else{AV[Af]=new j.Point2D({x:Ak+An,y:AT+Al});AV[AM*2-Af-1]=new j.Point2D({x:AO+An,y:AT+Al});}if(!AZ&&Ah){var Ae=AV[Af];var As=Y.call(this,this.mIsVertical,AN,true,Ae);Ai=Ai||As;AX=AX||!As;Ae=AV[AM*2-Af-1];As=Y.call(this,this.mIsVertical,AN,false,Ae);Ai=Ai||As;AX=AX||!As;AZ=AX&&Ai;}}Aj.mOptions.mDrawFromZero=AW;return{POLYGON:AV,CROSS:AZ};}function p(){var AN=this.mFinalSeriesPolygons,AT=this.mSeriesPolygons,AL,AK,AM,AV,AU,AO=this.mpABLPlotContext.mABLOptions.mLayout;this.mSeriesDrawingOrder.splice(0,this.mSeriesDrawingOrder.length);AM=this.mSeriesInfo.length;for(AL=0;AL<AM;++AL){var AP=E.call(this,AL);var AR=AP.POLYGON;AU=AP.CROSS;AN.push(AR);if((AO===T.LO_STACKED||AO===T.LO_PERCENT)&&this.mChartContextPtr.mIsGraphMatrix){if(AU){this.mSeriesDrawingOrder.unshift(AL);}else{this.mSeriesDrawingOrder.push(AL);}}}AT.splice(0,AT.length);var AQ;AM=AN.length;for(AL=0;AL<AM;++AL){AQ=[];AV=AN[AL].length;for(AK=0;AK<AV;++AK){var AS=new j.Point2D();this.GetAreaPointByProgress(AL,AK,this.mProgress,AS);AQ.push(AS);}AT.push(AQ);}}function s(AL){var AK;for(AK=0;AK<this.mSeriesInfo.length;++AK){if(AL===this.mSeriesInfo[AK].mValueAxis||AL===D.VA_BOTH){h.call(this,AK);}}}function h(AK){var AT=this.mSeriesInfo,AQ=this.mSeriesPolygons[AK],AS=this.mChartContextPtr.mIsGraphMatrix,AM,AP,AN,AU,AO=d.kVirtualMarkerSize,AL,AR=AQ.length;for(AL=0;AL*2<AR;++AL){if(AQ[AL].x===-1){continue;}AM=this.mDatasetPtr.GetData(AT[AK].mSeriesId,AL,0);if(AM===null||AM===undefined){continue;}if(AS){this.CreateOneDataMarker(AK,AL,null,AQ[AL],AL);}else{AP=new j.Rect2D({x:AQ[AL].x-AO/2,y:AQ[AL].y-AO/2,height:AO,width:AO});AN=new j.TripleId({ObjectId:AC.DssGraphDataMarker,SeriesId:AT[AK].mSeriesId,GroupId:AL});AU=new j.RectangleObject({TripleId:AN,GraphObjectManager:this,Area:AP,GraphCollectionObject:null,IsOnlyForToolTip:true,IsVirtualMarker:true});this.AddToMapAndList(AU);}}}function AJ(AS){var AQ=this.mFinalSeriesPolygons[AS.SeriesInfo],AR=0,AO=0,AK=this.mChartContextPtr,AP=AK.GetGraphMatrixContext(),AL=AK.getUtiliy().tripleId,AN,AM;AL.reset(w,AC.DssGraphRiser,AS.SeriesId,AS.GroupId);AN=AP.IsIsolatedDot(w);if(AQ[AS.GroupId].x===-1){return false;}if(AN){AM=this.GetGraphObject(w);if(AM!==null&&AM!==undefined&&AM.mMarkerSize!==undefined&&AM.mMarkerSize!==null){AR=AM.mMarkerSize;}AO=AR;}AS.HostMarkerPoint=AQ[AS.GroupId];AS.CenterXOffset=AR;AS.CenterYOffset=AO;return true;}function c(){var AM,AL=this.mDataLabels,AK=AL.length;for(AM=0;AM<AK;++AM){AL[AM].isValid=AJ.call(this,AL[AM]);}}function X(){var AK=this.mpABLPlot.dataLabelManager,AM=this.mChartContextPtr,AL=new j.Rect2D({x:0,y:0,width:AM.mGraphWidth,height:AM.mGraphHeight});if(AK===null||AK===undefined){AK=this.mpABLPlot.dataLabelManager=new j.DataLabelManager({DataArea:AL});AK.ChartContext=AM;}AK.SinglePointObjects=AK.SinglePointObjects.concat(this.mSinglePointObjects);AK.PolyLineObjects=AK.PolyLineObjects.concat(this.mAreaBoundForDataLabel);AK.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AK;}function P(){var AL=this.mDataLabels,AK=AL.length,AM;for(AM=0;AM<AK;++AM){if(AL[AM].display){this.CreateOneDataMarker(AL[AM].SeriesInfo,AL[AM].GroupId,null,AL[AM].HostMarkerPoint,-3,true);}}}function f(AL){if(this.mChartContextPtr.mIsGraphMatrix){if(this.mDatasetPtr.showDatalabels()){this.CreateAllDataLabels();c.call(this);var AK=X.call(this);AK.PlaceDataLabels(this.mDataLabels,AL);P.call(this);}}else{e.call(this);}}mstrmojo.chart.AreaSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.AreaSeriesRenderer",mAreaCollection:null,mSeriesPolygons:null,mFinalSeriesPolygons:null,mIsAbsolute:false,mIsPolygonSplit:false,mSeriesDrawingOrder:null,mGroupRangeList:null,mSinglePointObjects:null,mHasCreatedMarkers:false,mAreaBoundForDataLabel:null,mDataLabels:null,init:function AH(AK){this._super(AK);this.mAreaCollection=[];this.mSeriesPolygons=[];this.mFinalSeriesPolygons=[];this.mSeriesDrawingOrder=[];this.mGroupRangeList=[];this.mIsAbsolute=this.mpABLPlot.isAbsoluteOrCluster();this.mProgress=1;this.mSinglePointObjects=[];this.mAreaBoundForDataLabel=[];this.mDataLabels=[];},GenerateMapAndList:function AG(AK){var AL=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}v.call(this);p.call(this);var AQ=new j.TripleId({ObjectId:AA.DssGraphRendererLayer,SeriesId:D.VA_BOTH}),AO=new j.GraphObjectAggregation({TripleId:AQ,GraphObjectManager:this}),AT=this.mGraphObjectList;AT.splice(0,AT.length);this.GenerateInterpolationFrame(1,AO);if(AL.mUseAnimation){this.GenerateInterpolationFrame(0,AO);}AT.push(AO);if(AL.mImageUsage===J.GENERAL){f.call(this,AK);this.GenerateTrendLine();this.GenerateRefLine();}if(this.mSeriesDrawingOrder&&this.mSeriesDrawingOrder.length){var AN=this.renderSequence,AM=this.mSeriesDrawingOrder,AU=this.mSeriesInfo,AP,AS=this.mSeriesDrawingOrder.length;AN.splice(0,AN.length);for(AP=0;AP<AS;AP++){var AR=AM[AP];AR=AU[AR].mSeriesId;AN[AR]=AP;}}else{this.populateRenderSequence();}},GenerateByValueAxis:function u(AR){var AO=[],AN=[],AL,AK,AM=this.mGraphObjectList,AQ,AP;if(this.mSeriesPolygons.length===0){v.call(this);p.call(this);}AQ=new j.TripleId({ObjectId:AA.DssGraphRendererLayer,SeriesId:AR,GroupId:y});AP=new j.GraphObjectAggregation({TripleId:AQ,GraphObjectManager:this});AO.push(AP);this.GenerateInterpolationFrame(1,AP);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0,AP);}AL=AM.length;for(AK=0;AK<AL;AK++){AN.push(AM[AK]);}AM.splice(0,AL);AM.splice(0,AL);for(AK=0;AK<AL;++AK){AM.push(AN[AK]);}if(AR===D.VA_Y1){e.call(this);this.GenerateTrendLine();this.GenerateRefLine();}},GenerateInterpolationFrame:function Z(AK,AL){var AS=this.mSeriesPolygons,AP=this.mGraphObjectList,AW=AP.slice(0),AN=this.mFinalSeriesPolygons.length,AO,AM,AQ,AU,AR,AV,AT;this.mProgress=AK;AS.splice(0,AS.length);for(AO=0;AO<AN;++AO){AQ=[];AU=this.mFinalSeriesPolygons[AO].length;for(AM=0;AM<AU;++AM){AR=new j.Point2D();this.GetAreaPointByProgress(AO,AM,this.mProgress,AR);AQ.push(AR);}AS.push(AQ);}AV=AL.mTripleId.mSeriesId;if(AV===D.VA_BOTH){if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){o.call(this,D.VA_BOTH);s.call(this,D.VA_BOTH);}else{o.call(this,D.VA_Y2);o.call(this,D.VA_Y1);s.call(this,D.VA_Y2);s.call(this,D.VA_Y1);}}else{o.call(this,AV===D.VA_Y1?D.VA_Y1:D.VA_Y2);s.call(this,AV===D.VA_Y1?D.VA_Y1:D.VA_Y2);}AL.Clear(AK<0.5,AK>=0.5);AT=AP.length;for(AO=0;AO<AT;++AO){AL.AddGraphObject(AP[AO],AK<0.5);}if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AL.SetAnimationEnable(true);AL.SetProgress(AK);}AP.splice(0,AP.length);AP=AP.concat(AW);this._super(AK);},GetAreaPointByProgress:function N(AP,AS,AK,AU){var AQ=this.mFinalSeriesPolygons,AM=this.mChartContextPtr,AT=false,AO=[],AN,AV;if(AQ[AP][AS].x===-1&&AQ[AP][AS].y===-1){AU.x=-1;AU.y=-1;return ;}if(!!AM.mpOldChartManager){AN=AM.mpOldChartManager;var AR=AN.GetGraphObjectManager(this.mTripleId,true);if(AR!==null){AV=AR;AO=AV.mFinalSeriesPolygons.slice(0);AT=true;}}if(AT&&AP<AO.length&&AS<AO[AP].length&&!(AO[AP][AS].x===-1&&AO[AP][AS].y===-1)){AU.x=AO[AP][AS].x+(AQ[AP][AS].x-AO[AP][AS].x)*AK;AU.y=AO[AP][AS].y+(AQ[AP][AS].y-AO[AP][AS].y)*AK;}else{var AL=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AP].mValueAxis].GetBasePosition();if(this.mIsVertical){AU.x=AQ[AP][AS].x;AU.y=AL-(AL-AQ[AP][AS].y)*AK;}else{AU.x=AL-(AL-AQ[AP][AS].x)*AK;AU.y=AQ[AP][AS].y;}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","MarkerObject","NumberObject","Point2D","SeriesRenderer","PolyLineObject","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumAttachedPointsStyle","EnumImageUsage","EnumGraphMatrixElementSizeMode","EnumValueAxis");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType","EnumDSSExtraGraphProperty");var f=mstrmojo.chart,O=f.enums,E=O.EnumCollectionType,AC=O.EnumDSSExtraGraphObject,p=O.EnumMajorGraphType,Q=O.EnumLayout,J=O.EnumOrientation,F=O.EnumValueAxis,P=O.EnumAttachedPointsStyle,L=O.EnumImageUsage,AJ=O.EnumGraphMatrixElementSizeMode,AB=f.gNullGroupId,Z=f.model,S=Z.enums,AF=S.EnumDSSGraphMarkerShape,AE=S.EnumDSSGraphObject,AG=S.EnumShapeType;var K=new f.TripleId(),U=new f.Point2D(),C=new f.Point2D();U.Reset(-2,-2);C.Reset(-1,-1);U.dangling=true;C.isNull=true;mstrmojo.chart.LineSeriesOptions=mstrmojo.provide("mstrmojo.chart.LineSeriesOptions",{});function b(){if(this.mExpectedLineCount===undefined){var AU=this.mSeriesInfo,AT,AW,AS=0,AV=this.mDatasetPtr,AR=AU.length;for(AT=0;AT<AR;AT++){AW=AU[AT].mSeriesId;if(AV.GetShapeBySeries(AW)===AG._LINE){AS++;}}this.mExpectedLineCount=AS;}return this.mExpectedLineCount;}function d(){return{mShowStepLine:false,mShowMarkers:true,mMarkerShape:0,mMarkerSize:50};}function AQ(AV){if(!this.mSupportDiscretePoints){return ;}var AR=[],AT=0,AW=new f.Point2D(),AZ=this.mVecGroupIdMapPerSeries,AS,AX;if(this.discreteMatrix===undefined){this.discreteMatrix=[];}var AU=[];AZ.splice(0,AZ.length);AX=this.mGroupCount;for(AS=0;AS<AX;++AS){if(this.GetLinePoint(AV,AS,AW)){AR[AT]=AS;AT++;}else{if(AR.length>0){var AY=AR.concat();AZ.push(AY);}AR.splice(0,AR.length);AT=0;AU.push(AS);}}AU.push(AX);this.discreteMatrix[AV]=AU;if(AR.length>0){AZ.push(AR);}}function y(){if(this.mChartContextPtr.mUseAnimation){return this.mProgress===1;}return true;}function h(){return true;}function M(AY,AV){var AU=-1,AT,AR,AS=this.clusterInfo,AW=this.mpABLPlotContext,AX=AW.mCategoryAxisPtr;AT=this.mSeriesInfo[AY].mDataIndex;if(AS.Circle){AU=AS.Circle.indexOf(AT);}if(AU===-1&&AS.Tick){AU=AS.Tick.indexOf(AT);}if(AU===-1&&AS.Square){AU=AS.Square.indexOf(AT);}if(AU===-1){AU=AT%AS.columns;}AR=AX.getGroupStartPos(AV)+0.5*AS.groupGap+(AS.unitWidth+AS.riserGap)*AU+0.5*AS.unitWidth;AR=Math.floor(AR+0.5);return AR;}function z(AV,AY,AT){var AR=this.mChartContextPtr;if(AR.RenderClusterShapes()&&this.mpABLPlotContext.takeGroupCenter===false){if(this.clusterInfo===undefined){var AU,AS=this.mDatasetPtr.GetClusterSeriesCount(),AZ=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),Ab=this.evalBarStyleUnitWidth(AZ,AS);this.clusterInfo=mstrmojo.hash.copy(Ab);if(AU){var Aa=this.clusterInfo;Aa.Circle=AU.Circle.concat();Aa.Tick=AU.Tick.concat();Aa.Square=AU.Square.concat();}}var AW=M.call(this,AV,AY),AX=new f.Point2D({Point2D:AT});if(this.mIsVertical){AX.x=AW;}else{AX.y=AW;}return AX;}return AT;}function N(Ad,AS,Ac,Aa){var Ai,Ar,Ao,Am,Ak,Ah,Al,AV=false,AX,AT=Ad.shape,AW,Ag,An=Ac[Aa],AU=this.mChartContextPtr,Ab=this.mDatasetPtr,Ae=this.mSinglePointObjects,Aq=AU.GetGraphMatrixContext(),As,Ap;Ar=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AS].mValueAxis];if(Ar){AV=true;Ai=Ar.GetMaxMinDataInputPosition();AW=Ai.LowBoundary;Ag=Ai.HighBoundary;Al="y1";var AR=Ar.mTripleId.mObjectId;Al=AU.getAxisKeyFromObjectId(AR);AX=this.mClippedMarkerSize[Al];}As=An.length;var At;var Af,Aj,AZ,Au,AY;for(Ao=0;Ao<As;++Ao){Ak=new f.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:this.mSeriesInfo[AS].mSeriesId,GroupId:this.getCorrectGroupIdInSeriesPoints(Ao,Aa)});At=An[Ao];Ah=this.drawSingleDataPoint(Ak,At,AT);Ap=Ah.length;for(Am=0;Am<Ap;++Am){if(Ah[Am].Object){this.AddToMapAndList(Ah[Am].Object);}}Af=Ab.showSeriesDatalabel(Ak.mSeriesId);if(Ah.length>0){if(Ah[0].Object!==null&&Ah[0].Object!==undefined&&Af){Ae.push(Ah[0].Object);}Ad.AlreadyInMapAndList=true;Ad.Obj=Ah[0];if(AV){Ap=Ah.length;for(Am=0;Am<Ap;++Am){Aj=Ah[Am];AZ=AX.LowOffset;Au=AX.HighOffset;AY=Aj.ShapeSize;if(AY===undefined){if(Aj.Object){AY=Aj.Object.getShapeSize();}else{AY=0;}}Ai=Aq.getClippedOffset(AW,Ag,AY,An[Ao],!AU.IsVertical(),AZ,Au);AX.LowOffset=AZ=Ai.LowOffset;AX.HighOffset=Au=Ai.HighOffset;}}}}Ad.AlreadyInMapAndList=true;Ad.Obj=null;return Ad;}function AA(AU){var AX=this.mChartContextPtr,AS,AV=[];if(AX.mIsGraphMatrix&&this.mGroupCount===1){AS=new f.Point2D();if(!this.GetLinePoint(AU,0,AS)){return ;}AV.push(AS);var AW=[];AW.push(AV);var AR={};var AT=j.call(this,AU);AR.shape=AT;N.call(this,AR,AU,AW,0);if(AR.AlreadyInMapAndList===false){this.AddToMapAndList(AR.Obj);}}}function o(AY,AT,AS){var AR,AV,AX=true,AU=0,AW=100;for(AR=0;AR<AS;++AR){AV=this.mDatasetPtr.GetSizeByData(AY,AT+AR);if(AV!==null){if(AX){AU=AV;AX=false;}else{if(AU!==AV){return true;}}}if(AR>AW){return true;}}return false;}function I(Ai,AY,AW,AS,AR){var AU=this.mChartContextPtr,Af=AY[AW],Ad=new f.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:this.mSeriesInfo[AS].mSeriesId,GroupId:AW}),Aa,Ae,AX=this.mDatasetPtr,Ah;Ad.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Ad.mGroupId);Aa=new f.PolyLineObject({TripleId:Ad,GraphObjectManager:this,PolyLine:Af,GraphCollectionObject:this.mLineCollections[AS],Shape:AG._LINE});Ae=Aa.mFormatLinePtr;Aa.movePointsAgainstBorder();Af=Aa.mLinePoints;var Ab=Ai&&this.mDatasetPtr.isGradientABL();if(Ab){var Ag,AV,AZ=Af.length,Ac,AT={Valid:true,Angle:AU.IsVertical()?0:1,EndAlpha:255,Style:1,Colors:[],Start:{x:Af[0].x,y:Af[0].y},End:{x:Af[AZ-1].x,y:Af[AZ-1].y}};Ah=Af.length;for(Ag=0;Ag<Ah;++Ag){AV=Ag/(Af.length-1);Ac=AX.GetColorByData(Ad.mSeriesId,Ad.mGroupId+Ag);AT.Colors.push({Step:AV,Color:Ac});}Aa.mFormatLinePtr=Ae.transformToGradient(AT);this.AddToMapAndList(Aa);}if(AX.showSeriesDatalabel(Ad.mSeriesId)){this.mPolyLineObjects.push(Aa);}return{Obj:Aa,AlreadyInMapAndList:Ab};}function l(AR,AY,AU,AX,AW){var AV=this.mChartContextPtr.GetGraphMatrixContext(),AZ=AV.GetScaledSizeWithRatio(AU,AY)/2,AT=new f.Point2D({Point2D:AR}),AS=new f.Point2D({Point2D:AR});if(this.mIsVertical){AT.y-=AZ;AS.y+=AZ;}else{AT.x-=AZ;AS.x+=AZ;}AX.x=AT.x;AX.y=AT.y;AW.x=AS.x;AW.y=AS.y;}function w(AW,Ae,AX){var AZ=this.mChartContextPtr.GetGraphMatrixContext(),AR=AZ.mElementsInfo.Min.Mode,AS,AU,AV=[],AY=[],Ab=0,Aa,Ad,AT,Af,Ac;Ac=Ae.length;for(AU=0;AU<Ac;++AU){AS=Ae[AU];Aa=this.mDatasetPtr.GetSizeByData(AW.mSeriesId,AW.mGroupId+AU);if(Aa!==null){Ab=AZ.ToRatioEx(Aa,(AR===AJ._PROPORTIONAL));if(Ab<0){Ab=0;}}Ad=new f.Point2D();AT=new f.Point2D();l.call(this,AS,AX,Ab,Ad,AT);AV.push(Ad);AY.push(AT);}AY.reverse();Af=AV.concat(AY);return Af;}function V(As,Af,Ad,AT,AS){var Ae=this.mDatasetPtr,Ab=Af[Ad],An,Am,Ao,Ag,AW,AU=null,AX=this.mChartContextPtr,Ac=this.mSeriesInfo,Aq=AX.GetGraphMatrixContext(),Ai=Aq.GetAdjustThicknessValue(AS),Al=new f.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:Ac[AT].mSeriesId,GroupId:Ad}),Ar,Aj,AY,Ah,Aa,Ak,AR;Al.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Al.mGroupId);Ag=w.call(this,Al,Ab,Ai);if(AX.mImageUsage===L.GENERAL){AU=new f.PolygonObject({TripleId:Al,GraphObjectManager:this,Polygon:Ag,Shape:AG._POLYGON});AU.mPointsStyle=P.TOOLTIP_TRAPEZOID;}var Ap=this.mpABLPlotContext.mValueAxis[Ac[AT].mValueAxis];if(Ap){Aj=Ap.GetMaxMinDataInputPosition();AY=Aj.LowBoundary;Ah=Aj.HighBoundary;AR=Ap.mTripleId.mObjectId;Ak=AX.getAxisKeyFromObjectId(AR);Aa=this.mClippedMarkerSize[Ak];}if(As&&AU){Am=AU.mFormatFillPtr;AW=this.prepareTransitionalGradient(Al,Ab);Ao=Am.transformToGradient(AW);AU.SetFormatFill(Ao);}Ar=Ag.length;var AZ,AV=2+2;for(An=0;An<Ar;++An){AZ=this.mChartContextPtr.IsVertical()?Ag[An].y:Ag[An].x;if(this.mChartContextPtr.IsVertical()){if(AZ<Ah){Aa.HighOffset=Math.max(Aa.HighOffset,Ah-AZ);Aa.HighOffset=Math.max(Aa.HighOffset,AV);}if(AY<AZ){Aa.LowOffset=Math.max(Aa.LowOffset,AZ-AY);Aa.LowOffset=Math.max(Aa.LowOffset,AV);}}else{if(AZ-Ah>0){Aa.HighOffset=Math.max(Aa.HighOffset,AZ-Ah);Aa.HighOffset=Math.max(Aa.HighOffset,AV);}if(AY-AZ>0){Aa.LowOffset=Math.max(Aa.LowOffset,AY-AZ);Aa.LowOffset=Math.max(Aa.LowOffset,AV);}}}if(AU){this.AddToMapAndList(AU);if(Ae.showSeriesDatalabel(Al.mSeriesId)){this.mPolygonObjects.push(AU);}}return{Obj:AU,AlreadyInMapAndList:true};}function v(AU,AV,AS){var AT=this.mChartContextPtr,AW=4,AY=AT.GetGraphMatrixContext(),AX=AY.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount,false,AF.DssGraphMarkerShapeNone),AR=false,AZ=true;if(this.mHasSizeBy){AZ=(AX<=AW)&&!o.call(this,this.mSeriesInfo[AU].mSeriesId,this.getCorrectGroupIdInSeriesPoints(0,AV),AS[AV].length);if(AY.mMaxSizeVal===AY.mMinSizeVal){AX=Math.max(AY.mElementsInfo.Max.Size,AY.mConstants.MinimalSize.Line);}}AR=AR||this.mHasColorBy;if(AZ){return I.call(this,AR,AS,AV,AU,AX);}return V.call(this,AR,AS,AV,AU,AX);}function j(AS){var AW=this.mChartContextPtr,AU=AW.GetGraphMatrixContext(),AT,AR=AU.mMarkerShape;if(AW.mIsGraphMatrix){if(AW.isCombinationChart()){var AV=this.mDatasetPtr;AS=this.mSeriesInfo[AS].mSeriesId;AT=AV.GetShapeBySeries(AS);return AT;}switch(AR){case AF.DssGraphMarkerShapeCircle:return AG._CIRCLE;case AF.DssGraphMarkerShapeRectangle:case AF.DssGraphMarkerShapeSquare:return AG._SQUARE;case AF.DssGraphMarkerShape2DPie:case AF.DssGraphMarkerShape2DRingPie:return AG._PIE;case AF.DssGraphMarkerShapeGMTick:return AG._TICKER;default:return AG._LINE;}}else{return 0;}}function T(AT,AU,AR){var AS=this.mChartContextPtr,AV,AW,AY=AS.mIsGraphMatrix,AZ={Obj:null,AlreadyInMapAndList:false};if(AY){var AX=j.call(this,AT);AZ.shape=AX;if(AR[AU].length===1){if(this.mDatasetPtr.ShouldTakeGroupCenter()&&AS.isCombinationChart()){if(AZ.shape===AG._LINE){AZ.shape=AG._CIRCLE;}}return N.call(this,AZ,AT,AR,AU);}switch(AX){case AG._CIRCLE:case AG._SQUARE:case AG._PIE:case AG._TICKER:case AG._COMBINED:return N.call(this,AZ,AT,AR,AU);default:return v.call(this,AT,AU,AR);}}AV=new f.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:this.mSeriesInfo[AT].mSeriesId,GroupId:AU});AW=new f.PolyLineObject({TripleId:AV,GraphObjectManager:this,PolyLine:AR[AU],GraphCollectionObject:this.mLineCollections[AT]});AZ.Obj=AW;return AZ;}function B(AT,AS){var AY=this.discreteMatrix,AV=0,AU,AW,AZ;if(AY&&AY[AT]){AZ=AY[AT];AW=AZ.length;for(AU=0;AU<AW;AU++){if(AS>=AV&&AS<AZ[AU]){return AU;}AV=AZ[AU];}}var AR=[],AX;AV=0;this.GetLinePointSet(AT,AR);AX=AR.length;for(AU=0;AU<AX;++AU){if(AS>=AV&&AS<AV+AR[AU].length){return AS;}AV+=AR[AU].length;}return AS;}function u(AW,AT,AV){var AR,AS=new f.Point2D(),AU=new f.Point2D();AS.x=AT.x;AS.y=AT.y;AU.x=AT.x;AU.y=AT.y;AR={HighPoint:AS,LowPoint:AU};if(AW){AU.y-=AV;AS.y+=AV;}else{AU.x-=AV;AS.y+=AV;}return AR;}function g(AT,AV,AS){var AR=this.mChartContextPtr.GetGraphMatrixContext(),AU=AR.GetScaledSizeWithRatio(AS,AV)/2;return u.call(this,this.mIsVertical,AT,AU);}function H(AX,Af){var AR=new f.Point2D(),AU,Ab=true,AZ=this.mChartContextPtr.GetGraphMatrixContext(),AS=AZ.mElementsInfo.Min.Mode,AY,Ag,Ac,AW=0,Ae,Aa=1,Ad,AV,AT={};this.GetLinePoint(AX,Af,AR);AU=AZ.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount);if(AZ.mHasSizeBy){Ab=false;if(AZ.mMaxSizeVal===AZ.mMinSizeVal){AU=Math.max(AZ.mElementsInfo.Max.Size,AZ.mConstants.MinimalSize.Line);Ab=true;}}if(Ab){AV=B.call(this,AX,Af);AY=new f.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:this.mSeriesInfo[AX].mSeriesId,GroupId:AV});Ag=this.GetGraphObject(AY);if(Ag!==undefined&&Ag!==null){Ac=Ag.mFormatLinePtr;AU=Ac.mLineThickness;AW=AU/2;}Ae=u.call(this,this.mIsVertical,AR,AW);}else{Ad=this.mDatasetPtr.GetData(this.mSeriesInfo[AX].mSeriesId,Af,AZ.mSizeIndex,false);if(Ad!==null&&Ad!==undefined){Aa=AZ.ToRatioEx(Ad,(AS===AJ._PROPORTIONAL));if(Aa<0){Aa=0;}}Ae=g.call(this,AR,AU,Aa);}AT.XCenterOffset=(Ae.HighPoint.x-Ae.LowPoint.x)/2;AT.YCenterOffset=(Ae.HighPoint.y-Ae.LowPoint.y)/2;return AT;}function AN(Ad){var AX=new f.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:Ad.SeriesId,GroupId:Ad.GroupId}),AS=this.mChartContextPtr,Aa=AS.GetGraphMatrixContext(),Ab=Aa.IsIsolatedDot(AX),AT,AR=new f.Point2D(),Ac=0,AW=0,AV,AY,AU=this.mDatasetPtr,AZ;if(this.GetLinePoint(Ad.SeriesInfo,Ad.GroupId,AR)){if(Aa.mMarkerShape===AF.DssGraphMarkerShapeCombined){AZ=AU.GetShapeBySeries(Ad.SeriesId);AT=(AZ===AG._CIRCLE||AZ===AG._RECTANGLE||AZ===AG._TICKER||AZ===AG._SQUARE);}else{AT=(Aa.mMarkerShape===AF.DssGraphMarkerShapeCircle||Aa.mMarkerShape===AF.DssGraphMarkerShapeRectangle||Aa.mMarkerShape===AF.DssGraphMarkerShapeGMTick||Aa.mMarkerShape===AF.DssGraphMarkerShapeSquare);}if(Ab||AT){AV=this.GetGraphObject(AX);if(AV!==null&&AV!==undefined){if(AV.mMarkerSize!==undefined&&AV.mMarkerSize!==null&&AV.MarkerPosition!==undefined&&AV.MarkerPosition!==null){Ac=AV.mMarkerSize;AW=Ac;AR.x=AV.MarkerPosition.x;AR.y=AV.MarkerPosition.y;}else{if(AV instanceof mstrmojo.chart.RectangleObject&&AV.mRect!==undefined&&AV.mRect!==null){Ac=AV.mRect.width/2;AW=AV.mRect.height/2;AR.x=AV.mRect.x+Ac;AR.y=AV.mRect.y+AW;}else{if(AV instanceof mstrmojo.chart.StraightLineObject){AR.x=0.5*(AV.mDeviceStartPoint.x+AV.mDeviceEndPoint.x);AR.y=0.5*(AV.mDeviceStartPoint.y+AV.mDeviceEndPoint.y);}}}}}else{AY=H.call(this,Ad.SeriesInfo,Ad.GroupId);if(AY!==null&&AY!==undefined){Ac=AY.XCenterOffset;}AW=AY.YCenterOffset;}Ad.HostMarkerPoint=AR;Ad.CenterXOffset=Ac;Ad.CenterYOffset=AW;return true;}return false;}function a(){var AT,AS=this.mDataLabels,AR=AS.length;for(AT=0;AT<AR;++AT){AS[AT].isValid=AN.call(this,AS[AT]);}}function W(){var AR=this.mpABLPlot.dataLabelManager,AT=this.mChartContextPtr,AS=new f.Rect2D({x:0,y:0,width:AT.mGraphWidth,height:AT.mGraphHeight});if(AR===null||AR===undefined){AR=this.mpABLPlot.dataLabelManager=new f.DataLabelManager({DataArea:AS});AR.ChartContext=AT;}AR.SinglePointObjects=AR.SinglePointObjects.concat(this.mSinglePointObjects);AR.PolyLineObjects=AR.PolyLineObjects.concat(this.mPolyLineObjects);AR.PolygonObjects=AR.PolygonObjects.concat(this.mPolygonObjects);AR.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AR;}function n(){var AU=this.mDataLabels.length,AT,AS,AR;for(AR=0;AR<AU;++AR){AS=this.mDataLabels[AR];if(AS.display){AT=AS.GroupId;this.CreateOneDataMarker(AS.SeriesInfo,AS.GroupId,this.mMarkerCollections[AS.SeriesInfo],AS.HostMarkerPoint,AT,true);}}}function AO(AR){var AS=this.mChartContextPtr,AV=this.mDatasetPtr,AY=AS.GetGraphMatrixContext(),Ab,AZ,AT=this.mpABLPlot;if(AS.mIsGraphMatrix){AZ=AV.showDatalabels();Ab=(AY.mMarkerShape===AF.DssGraphMarkerShape2DPie||AY.mMarkerShape===AF.DssGraphMarkerShape2DRingPie);}if(AZ){var AU=AT.dataLabelManager;if(AU===null||AU===undefined){var AX=new f.Rect2D({x:0,y:0,width:AS.mGraphWidth,height:AS.mGraphHeight});AU=AT.dataLabelManager=new f.DataLabelManager({DataArea:AX});AU.ChartContext=AS;}if(Ab){var Ae=this.mPieRenderer;Ae.enableDataLabel(this.mpABLPlot.dataLabelManager,AR);var AW,Aa=Ae.dataLabels,Ad,Ac=Aa.length;for(AW=0;AW<Ac;++AW){Ad=Aa[AW].Label;if(Ad.mIsShown){this.AddToMapAndList(Ad);}}}else{this.CreateAllDataLabels();a.call(this);AU=W.call(this);AU.PlaceDataLabels(this.mDataLabels,AR);n.call(this);}}}mstrmojo.chart.LineSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.LineSeriesRenderer",mLineCollections:null,mMarkerCollections:null,mVecSeriesPoints:null,mLineSeriesOptions:null,mDepth:0,mInitialized:false,mIsByValueAxis:false,mGroupIdMapPerSeries:null,mVecGroupIdMapPerSeries:null,mHasCreatedMarkers:false,mDataLabels:null,mSinglePointObjects:null,mPolyLineObjects:null,mPolygonObjects:null,init:function AL(AR){this._super(AR);this.mDepth=this.mpABLPlot.unitLevelDepth;this.mLineCollections=[];this.mMarkerCollections=[];this.mVecSeriesPoints=[];this.mLineSeriesOptions=[];this.mGroupIdMapPerSeries=[];this.mVecGroupIdMapPerSeries=[];this.mSupportDiscretePoints=this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];this.mSinglePointObjects=[];this.mPolyLineObjects=[];this.mPolygonObjects=[];},GenerateMapAndList:function AK(AT){var AX=this.mChartContextPtr,AS,AU,AW=mstrmojo.chart.RenderLayer2,AV=this.mSeriesInfo,AR=this.mLineSeriesOptions;if(AV.length===0){return ;}for(AS=0;AS<AV.length;++AS){AR.push(d());if(AX.mIsGraphMatrix){AR[this.mLineSeriesOptions.length-1].mShowMarkers=false;}this.loadSeriesProperties(AS);}this.GenerateLineCollections();this.GenerateMarkerCollections();AU=new f.GraphObjectAggregation({TripleId:AW,GraphObjectManager:this});this.mGraphObjectList.push(AU);this.GenerateInterpolationFrame(1);if(AX.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AX.mImageUsage===L.GENERAL){this.CreateAllSeriesLabels(AT);this.GenerateTrendLine();this.GenerateRefLine();this.populateRenderSequence();}},GenerateByValueAxis:function x(AU,AR){var AT=this.mSeriesInfo,AS;if(AT.length===0){return ;}if(!this.mInitialized){for(AS=0;AS<AT.length;++AS){this.mLineSeriesOptions.push(d());this.loadSeriesProperties(AS);}this.GenerateLineCollections();this.GenerateMarkerCollections();this.mInitialized=true;this.mIsByValueAxis=true;}this.mGraphObjectList.push(new f.GraphObjectAggregation({TripleId:new f.TripleId({ObjectId:AC.DssGraphRendererLayer,SeriesId:AU,GroupId:AB}),GraphObjectManager:this}));this.GenerateInterpolationFrame(1);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AU===F.VA_Y1){this.CreateAllSeriesLabels();}},loadSeriesProperties:function t(AR){if(this.mChartContextPtr.mImageUsage!==0){return ;}},LoadStepLine:function c(AR){this.mLineSeriesOptions[AR].mShowStepLine=false;},GenerateMapAndListForSeries:function r(AW){var AS=this.mChartContextPtr,AR=[],AT,AX,AY,AV,Ac,Ab,AZ;if(this.mGroupCount<2&&this.mSupportDiscretePoints){AA.call(this,AW);return ;}AQ.call(this,AW);this.GetLinePointSet(AW,AR);AT=y.call(this);if(!this.mpABLPlotContext.mABLOptions.mUseDepth){var Aa=this.mGraphObjectList,AU=this.mLineCollections;if(AR&&AR.length){if(this.mpABLPlotContext.mABLOptions.mCurvedLines){AZ=AR.length;for(AX=0;AX<AZ;++AX){AY=new f.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:this.mSeriesInfo[AW].mSeriesId,GroupId:AX});AV=null;if(AV){Aa.push(AV);}if(AT){this.mGraphObjectMap.push(AY,AV);AU[AW].AddGraphObject(AV);}}}else{AZ=AR.length;for(AX=0;AX<AZ;++AX){if(AS.mIsGraphMatrix){this.mGroupIdMapPerSeries=this.mVecGroupIdMapPerSeries[AX];}else{this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);}Ac=false;Ab=T.call(this,AW,AX,AR);AV=Ab.Obj;Ac=Ab.AlreadyInMapAndList;if(AS.mIsTimeSeriesChart){AV.mIsDetectable=false;}if(!Ac&&AV){Aa.push(AV);if(AT){this.AddToMap(AV);AU[AW].AddGraphObject(AV);}}}}}}},GenerateByValueAxisAndGroup:function AD(AX,AT){var AU,Ab,AV=[],Ac=[],AZ=[],AY,AR,Aa,AS,AW;if(this.mGroupCount<2){return ;}if((AT===-1)||this.mHasNegativeValue){this.GenerateOrderedDepthLine(AX,AT,false);}else{Ab=this.IsReverseSeriesOrder(AX);AW=this.mSeriesInfo.length;for(AU=0;AU<AW;++AU){AY=Ab?this.mSeriesInfo.length-AU:AU;if(this.mSeriesInfo[AY].mValueAxis===AX){AR=new f.Point2D();Aa=new f.Point2D();if(this.GetLinePoint(AY,AT-1,AR)&&this.GetLinePoint(AY,AT,Aa)){AV.push([AR,Aa]);Ac.push(AY);AZ.push(true);}}}AW=AV.length;for(AU=0;AU+1<AW;++AU){AS=new f.Vector2D({x:AV[AU+1][0],y:AV[AU+1][1]});if(this.PriorToNextSeries(AS,AT)){this.GenerateDepthLine(Ac[AU],AT,AV[AU]);AZ[AU]=false;}}for(AU=AV.length-1;AU>=0;--AU){if(AZ[AU]){this.GenerateDepthLine(Ac[AU],AT,AV[AU]);}}}},GetLinePointSet:function e(AX,AT){var AW=[],AV=this.mSupportDiscretePoints?0:1,AU,AS,AR,AY=this.mGroupCount;for(AU=0;AU<AY;++AU){AR=new f.Point2D();if(this.GetLinePoint(AX,AU,AR)){AW.push(AR);}else{if(AW.length>AV){AS=AW.slice(0);AT.push(AS);}AW.length=0;}}if(AW.length>AV){AT.push(AW);}},GetLinePoint:function AH(AY,Ad,AW){var AU=this.mChartContextPtr,Aa=0,AZ=0,Ac,AX,AS,AR=false,Ae,AV,AT,Ab;if(!this.GetFinalLinePoint(AY,Ad,AW,false)){return false;}if(this.mProgress===1){return true;}if(this.mUseDepth){Ab=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AY].mSeriesIndex);Aa=Ab.OffsetX;AZ=Ab.OffsetY;}if(AU.mOldChartManager!==null){AX=AU.mOldChartManager;Ac=AX.GetGraphObjectManager(this.mTripleId,true);}AS=new f.Point2D({Point2D:AW});if(Ac!==null){Ae=Ac;AR=Ae.GetFinalLinePoint(AY,Ad,AS,true);if(!AR){AV=Ae.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Ad);if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){if(this.mDeviceDataArea){if(AV>this.mDeviceDataArea.y+this.mDeviceDataArea.height){AV=this.mDeviceDataArea.y+this.mDeviceDataArea.height;}if(AV<this.mDeviceDataArea.y){AV=this.mDeviceDataArea.y;}AS.y=AV+AZ;}}else{if(this.mDeviceDataArea){if(AV>this.mDeviceDataArea.x+this.mDeviceDataArea.width){AV=this.mDeviceDataArea.x+this.mDeviceDataArea.width;}if(AV<this.mDeviceDataArea.x){AV=this.mDeviceDataArea.x;}AS.x=AV+Aa;}}}}if(!AR){AT=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AY].mValueAxis].GetBasePosition();if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){AS.x=AT+Aa;}else{AS.y=AT+AZ;}}AW.x=AS.x+(AW.x-AS.x)*this.mProgress;AW.y=AS.y+(AW.y-AS.y)*this.mProgress;return true;},GetFinalLinePoint:function D(AX,Ae,AS,Ad){var Af,AV=this.mVecSeriesPoints,AW=this.mpABLPlotContext,AT=this.mpABLPlot,Aa=0,AZ=0,AY,AR,Ac,Ab;if(Ad&&(AX>=AV.length||Ae>=AV[AX].length)){return false;}while(AV.length<=AX){Af=[];AV.push(Af);}while(AV[AX].length<=Ae){AV[AX].push(U);}var AU=AV[AX][Ae];if(AU.x!==-2&&!!AU.dangling===false){if(AU.x===-1&&AU.isNull){return false;}AS.ResetPoint(AU);return true;}if(Ad){return false;}AV[AX][Ae]=C;if(this.mUseDepth){Ab=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AX].mSeriesIndex);Aa=Ab.OffsetX;AZ=Ab.OffsetY;}AY=this.GetData(AX,Ae);if(AY===null){return false;}K.mSeriesId=this.mSeriesInfo[AX].mSeriesId;K.mGroupId=Ae;if(this.mDatasetPtr.GetShapeBySeries(K.mSeriesId)===AG._LINE){if(this.mChartContextPtr.checkColorByAndSizeByValue(K,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return false;}}AR=Math.floor(AW.mCategoryAxisPtr.getGroupMiddlePos(Ae));Ac=AW.mValueAxis[this.mSeriesInfo[AX].mValueAxis].GetPositionByValue(AY);if(Ac===null){return false;}if(AW.mABLOptions.mOrientation===J.OR_HORIZONTAL){AS.x=Ac+Aa;AS.y=AR+AZ;}else{AS.x=AR+Aa;AS.y=Ac+AZ;}AV[AX][Ae]=new f.Point2D({Point2D:AS});++AT.DPCount;if(AT.seriesDPCount[this.mSeriesInfo[AX].mSeriesId]===undefined||AT.seriesDPCount[this.mSeriesInfo[AX].mSeriesId]===null){AT.seriesDPCount[this.mSeriesInfo[AX].mSeriesId]=1;}else{++(AT.seriesDPCount[this.mSeriesInfo[AX].mSeriesId]);}return true;},GenerateDepthLine:function Y(AT,AS,AR){},GenerateLineCollections:function R(){var AR=this.mChartContextPtr,AT,AS,AY,AX,AU,Aa,AV,AW=AR.GetGraphMatrixContext(),AZ=AR.mIsGraphMatrix;AS=this.mUseDepth?E.CT_DEPTH_LINE_OR_LINE_MARKER:E.CT_LINE;AY=this.mUseDepth?AE.DssGraphRiser:AE.DssGraphDataLine;AX=this.mSeriesInfo.length;if(AZ){if(AR.isLegendByGroup()){AX=this.mGroupCount;}AS=E.CT_LINE;}for(AT=0;AT<AX;++AT){Aa=this.mSeriesInfo[AT].mSeriesId;AU=new f.TripleId({ObjectId:AY,SeriesId:Aa});if(AW.isCombinationChart()===false&&AW.isPieOrRingShape()){AV=null;}else{AV=new f.GraphCollectionObject({TripleId:AU,GraphObjectManager:this,CollectionType:AS});}this.mLineCollections.push(AV);if(this.mpABLPlotContext.mABLOptions.mMajorGraphType!==p.MGT_PARETO||this.mUseDepth){if(!AZ){this.AddLegendMarkerToCollection(AT,this.mLineCollections[AT],true,this.mLineSeriesOptions[AT].mShowMarkers,this.mLineSeriesOptions[AT].mMarkerShape,this.mpABLPlotContext.mABLOptions.mShowLines);}}}},GenerateMarkerCollections:function A(){var AS,AV,AT=this.mLineSeriesOptions,AR=this.mGraphObjectMap,AU=this.mMarkerCollections,AW,AX;AS=this.mSeriesInfo.length;for(AV=0;AV<AS;++AV){if(AT[AV].mShowMarkers&&(!this.mUseDepth)){AW=new f.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:this.mSeriesInfo[AV].mSeriesId});AX=new f.GraphCollectionObject({TripleId:AW,GraphObjectManager:this,CollectionType:E.CT_DEPTH_LINE_OR_LINE_MARKER});AR.push(AW,AX);AU.push(AX);}else{AU.push(null);}}},CreateSeriesMarkers:function G(AT){var AS,AR,AU;AU=this.mGroupCount;for(AS=0;AS<AU;++AS){AR=new f.Point2D();if(this.GetLinePoint(AT,AS,AR)){this.CreateMarker(AT,AS,this.mMarkerCollections[AT],AR);}}},CreateAllSeriesLabels:function AI(AS){var Ad,Ac,AX,AW,AV,Af,Aa,Ae,Ab,AU,AZ,AR=this.mpABLPlotContext,AY=AR.mABLOptions,AT=AR.mSeriesOptions,Ag=this.mGroupCount;if(this.mChartContextPtr.mIsGraphMatrix){AO.call(this,AS);return ;}AZ=this.mSeriesInfo.length;for(AX=0;AX<AZ;++AX){if(AT[this.mSeriesInfo[AX].mSeriesIndex].mShowDataLabels){Ad=new f.TripleId({ObjectId:AE.DssGraphDataText,SeriesId:this.mSeriesInfo[AX].mSeriesId});Ac=new f.GraphCollectionObject({TripleId:Ad,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Ac);for(AW=0;AW<Ag;++AW){AV=this.createRiserLabel(AX,AW,Ac);if(AV!==null){Af=new f.Point2D();Aa=new f.Point2D();this.GetMinMaxPoint(AX,AW,Af,Aa);this.MoveLabel(AW,AV,Aa,Af,AX);}}}}if((AY.mMajorGraphType===p.MGT_LINE)&&(AY.mLayout===Q.LO_STACKED)&&(!AY.mShowCumulate)&&(AY.mShowValue)&&(AY.mShowTotal)){Ad=new f.TripleId({ObjectId:AE.DssGraphDataTextStackTotal,SeriesId:this.mTripleId.mSeriesId});Ac=new f.GraphCollectionObject({TripleId:Ad,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Ac);if(AY.mDualAxes){for(AX=0;AX<Ag;++AX){Ae=this.CreateTotalLabel(F.VA_Y1,AX,Ac);Ab=this.CreateTotalLabel(F.VA_Y2,AX,Ac);if(Ae!==null){Af=new f.Point2D();Aa=new f.Point2D();AU=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AX);this.GetMinMaxPoint(AU,AX,Af,Aa);this.MoveLabel(AX,Ae,Aa,Af,AU);}if(Ab!==null){Af=new f.Point2D();Aa=new f.Point2D();AU=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y2,AX);this.GetMinMaxPoint(AU,AX,Af,Aa);this.MoveLabel(AX,Ab,Aa,Af,AU);}}}else{for(AX=0;AX<Ag;++AX){AV=this.CreateTotalLabel(F.VA_Y1,AX,Ac);if(AV!==null){Af=new f.Point2D();Aa=new f.Point2D();AU=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AX);this.GetMinMaxPoint(AU,AX,Af,Aa);this.MoveLabel(AX,AV,Aa,Af,AU);}}}}},CreateMarker:function AM(AS,AT,AU,AX){var AR=this.mChartContextPtr,AV,Aa,AW;AV=new f.TripleId({ObjectId:AE.DssGraphDataMarker,SeriesId:this.mSeriesInfo[AS].mSeriesId,GroupId:AT});if(AR.mIsTimeSeriesChart){var AZ=this.GetData(AS,AT-1);var AY=this.GetData(AS,AT+1);if((AT>0&&AZ!==null)||(AT<this.mGroupCount-1&&AY!==null)){return ;}Aa=4;AW=new f.MarkerObject({TripleId:AV,GraphObjectManager:this,MarkerPosition:AX,MarkerShape:AF.DssGraphMarkerShapeCircle,IsIsometric:true,MarkerSize:Aa,GraphCollectionObject:AU,IsDialogSize:false});AU.AddGraphObject(AW);this.mGraphObjectList.push(AW);}else{if(AR.mIsGraphMatrix){this.CreateOneDataMarker(AS,AT,AU,AX,AT);}else{}}},GetMinMaxPoint:function AP(AW,AV,AT,AU){var AS,AX,AR;AS=new f.Point2D();if(!this.GetFinalLinePoint(AW,AV,AS,false)){return ;}AX=this.mChartContextPtr.dialogSizeToPixelSize(this.mLineSeriesOptions[AW].mMarkerSize);AR=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AW].mValueAxis].IsReverseOrder();if(this.mIsVertical){if(AR){AT.Reset(AS.x,AS.y-AX);AU.Reset(AS.x,AS.y+AX);}else{AT.Reset(AS.x,AS.y+AX);AU.Reset(AS.x,AS.y-AX);}}else{if(AR){AT.Reset(AS.x+AX,AS.y);AU.Reset(AS.x-AX,AS.y);}else{AT.Reset(AS.x-AX,AS.y);AU.Reset(AS.x+AX,AS.y);}}},GetPointPair:function q(AU,AS,AT,AR){return this.GetLinePoint(AU,AS-1,AT)&&this.GetLinePoint(AU,AS,AR);},GenerateOrderedDepthLine:function s(AT,AR,AS){},GenerateInterpolationFrame:function X(AS){var AV,AT,AR,AU;this.mProgress=AS;AV=this.mGraphObjectList.length;AR=this.mGraphObjectList.concat();this.mGraphObjectList.splice(0,AV);for(AT=0;AT<AV;++AT){AU=AR[AT];if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AU.SetAnimationEnable(true);}AU.SetProgress(AS);this.GenerateFrameInOnePlot(AU,AS<0.5);}this.mGraphObjectList=AR.concat();this._super(AS);},GenerateFrameInOnePlot:function k(Aa,Ab){var AT=this.mChartContextPtr,AY=AT.GetGraphMatrixContext(),AS=this.mpABLPlotContext,AW=AS.mABLOptions,AV,Af,Ad,AX,AR,Ac=this.mGroupCount;if(this.mIsByValueAxis){var AZ=F.VA_BOTH;if(AW.mLayout===Q.LO_STACKED){if(AW.mCurvedLines){this.GenerateByValueAxisAndGroup(AZ,-1);}else{Af=this.IsReverseGroupOrder();for(AV=1;AV<this.mGroupCount;++AV){Ad=Af?Ac-AV:AV;this.GenerateByValueAxisAndGroup(AZ,Ad);}}}else{var Ae=this.mSeriesInfo,AU=this.mSeriesInfo.length;for(AV=0;AV<AU;++AV){if(Ae[AV].mValueAxis===AZ){this.GenerateMapAndListForSeries(AV);}}}}else{if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){AX=this.mSeriesInfo.length;for(AV=0;AV<AX;++AV){if(AW.mShowLines){this.GenerateMapAndListForSeries(AV);}if(!(AT.mIsGraphMatrix&&AY.isPieOrRingShape())){this.CreateSeriesMarkers(AV);this.mHasCreatedMarkers=true;}}}else{if(AW.mShowLines){if(AW.mCurvedLines){this.GenerateByValueAxisAndGroup(F.VA_Y2,-1);this.GenerateByValueAxisAndGroup(F.VA_Y1,-1);}else{Af=this.IsReverseGroupOrder();for(AV=1;AV<Ac;++AV){Ad=Af?Ac-AV:AV;this.GenerateByValueAxisAndGroup(F.VA_Y2,Ad);}for(AV=1;AV<Ac;++AV){Ad=Af?Ac-AV:AV;this.GenerateByValueAxisAndGroup(F.VA_Y1,Ad);}}}}}if(AT.mIsGraphMatrix===false){if(!this.mHasCreatedMarkers){AX=this.mSeriesInfo.length;for(AV=0;AV<AX;++AV){this.CreateSeriesMarkers(AV);}}}AR=this.mGraphObjectList.length;for(AV=0;AV<AR;++AV){Aa.AddGraphObject(this.mGraphObjectList[AV],Ab);}this.mGraphObjectList.splice(0,this.mGraphObjectList.length);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","StraightLineObject","MarkerObject","SeriesRenderer","BarSeriesRenderer","Plot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumOrientation","EnumGraphMatrixThemeType","EnumValueAxis","EnumFontRotation","EnumFontRotation","EnumGenericDirection");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var W=mstrmojo.chart,J=W.enums,F=J.EnumOrientation,V=J.EnumGraphMatrixThemeType,B=J.EnumCollectionType,E=J.EnumFontRotation,P=mstrmojo.chart.model,L=P.enums,b=L.EnumDSSGraphDataTextPosition,j=L.EnumDSSGraphObject;var R=W.ChartConstants,G=mstrmojo.chart.common.Utility,a=0.9,K=5,Z=0,Q=2,d=3,M=4,D=100,X=10,C=3,f=1,I=1;function k(x){var r={},v,q,p=[0.1,0.2,0.3],t,w,u,s=this.mChartContextPtr;if(this.oneGroupBandColors){return this.oneGroupBandColors;}this.oneGroupBandColors=null;switch(this.bandOptions.ColorMode){case Q:v=7697781;break;case Z:t=new W.TripleId([j.DssGraphRiser,C,x]);w=this.GetGraphObject(t,true);if(w&&w.mFormatFillPtr){u=w.mFormatFillPtr.mSimpleColor;}else{u=s.GetColorValue(t,0,true);}v=u;break;case M:q=[16711680,65280,16776960];break;case d:q=[255,16776960,65280];break;default:break;}if(v){r.Color=v;}if(q){if(this.bandOptions.DescentLayout){r.Colors=q.reverse();}else{r.Colors=q;}}r.Alphas=p;this.oneGroupBandColors=r;return r;}function O(z,q){q=q||0;var w,AB,s;w=this.mDatasetPtr.getBandDivision(z,q);if(w.Metrics&&w.Metrics.length){w=w.Metrics;AB=[];var y,r=this.mpABLPlotContext,v=this.mSeriesInfo[q].mValueAxis,AA=r.mValueAxis[v],u=AA.mMinTick,p=AA.mMaxTick-u,t=w.length;for(s=0;s<t;++s){if(s===t-1){y=1;}else{y=w[s];y=Math.max(y-u/p,0);y=Math.min(y,1);}AB.push(y);}}else{if(w.Ratios&&w.Ratios.length){AB=w.Ratios;}}return(AB||[3/11,6/11,1]);}function A(y,q){q=q||0;if(this.oneGroupBandValues){return this.oneGroupBandValues;}var t=O.call(this,y,q),r=this.mpABLPlotContext,w=this.mSeriesInfo[q].mValueAxis,z=r.mValueAxis[w],v=z.mMinTick,p=z.mMaxTick-v,x=[],s,u=t.length;for(s=0;s<u;++s){x.push(v+t[s]*p);}this.oneGroupBandValues=x;return x;}function Y(){if(this.mBarWidth<=0){var u=this.mBarOptions,v=this.bandOptions;if(this.mBarColumns===-1){u.mGapWidth=0;this.mBarColumns=1;var q=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),t=v.Width.Padding;this.mBarWidth=(q-2*t)*v.Width.Ratio;this.mBarWidth=Math.round(this.mBarWidth);var s=this.bandOptions.Width.Limit;this.mBarWidth=Math.min(this.mBarWidth,s.Max);this.mBarWidth=Math.max(this.mBarWidth,s.Min);this.mBarWidth=Math.round(this.mBarWidth);v.Width.Padding=t=Math.max((q-this.mBarWidth)/2,0);this.mSpaceBetweenRiser=0;this.mSpaceBetweenGroup=t*2;}}var p=this.mBarWidth,r;if(G.isIntegar(p)){r=p%3;this.bulletWidth=(p-r)/3+r;}else{this.bulletWidth=p/3;}}function o(AB,z){var AG=AB.seriesInfoID,x=AG>=C&&AG<C+f,t=z.mRect,v=0,r=this.mpABLPlotContext,AA=r.mABLOptions,AE=r.mCategoryAxisPtr,w=AB.groupID;this.hPostProcessOneBar(AB,z);if(x){switch(AA.mOrientation){case F.OR_VERTICAL:v=Math.abs(AE.getGroupMiddlePos(w)-t.GetBottomMiddle().x);t.x+=v;break;case F.OR_HORIZONTAL:v=Math.abs(AE.getGroupMiddlePos(w)-t.GetLeftMiddle().y);t.y-=v;break;}}else{var u=this.mSeriesInfo[AB.seriesInfoID].mValueAxis,AF=r.mValueAxis[u],q=A.call(this,AB.groupID),p=AB.seriesInfoID,AD=q[p],s=AF.ValueToPosition(AD),AH=AF.ValueToPosition(AF.mMinTick);switch(AA.mOrientation){case F.OR_VERTICAL:if(AB.seriesInfoID!==0){AD=q[p-1];AH=AF.ValueToPosition(AD);}t.y=s;t.height=Math.abs(s-AH);break;case F.OR_HORIZONTAL:if(AB.seriesInfoID!==0){AD=q[p-1];AH=AF.ValueToPosition(AD);}t.x=AH;t.width=Math.abs(s-AH);break;}var y=z.mFormatFillPtr,AC=k.call(this,AB.groupID);y.mSimpleColor=AC.Color||AC.Colors[AB.seriesInfoID]||255;y.mAlpha=AC.Alphas[AB.seriesInfoID]*255||255;}}function S(s,w){var t=s.seriesInfoID,u=t>=C&&t<C+f,y={Bar:null,AddToMapAndList:false};var q=this.PrepareData(s,u);if(q===null||q===undefined){return y;}var v=this.hPrepareRect(s,q,u?this.bulletWidth:this.mBarWidth),x=v.Rect,p=v.AboveBase;if(u){if(!this.hUpdateBarRect(s,x,p,q)){return y;}}if(x.width<=0||x.height<=0){return y;}if(!w){var r=this.hPrepareRectangleObject(s,x,p);if(r){o.call(this,s,r);}y.Bar=r;y.AddToMapAndList=true;}return y;}function U(AA,AD,w){w=w||0;AD=AD||false;if(AD){return ;}var t=this.mChartContextPtr,AG=t.GetGraphMatrixContext(),q=this.mpABLPlotContext,AC=this.mDatasetPtr.GetData(AA.seriesInfoID,AA.groupID),v=this.mSeriesInfo[w].mValueAxis,AF=q.mValueAxis[v],y=q.mABLOptions,z,AB,AE=[],s=new W.Point2D(),r=new W.Point2D(),u=new W.TripleId([j.DssGraphRiser,0,AA.groupID]),AH=new W.TripleId([j.DssGraphDataLine,AA.seriesInfoID,AA.groupID]);AB=this.GetGraphObject(u);if(AB){var p=AB.GetBoundingRect();switch(y.mOrientation){case F.OR_VERTICAL:s.x=p.GetLeftMiddle().x;r.x=p.GetRightMiddle().x;s.y=r.y=AF.ValueToPosition(AC);break;case F.OR_HORIZONTAL:s.y=p.GetTopMiddle().y;r.y=p.GetBottomMiddle().y;s.x=r.x=AF.ValueToPosition(AC);break;}}else{var x=this.GetRiserStartPosAndSize(AA);switch(y.mOrientation){case F.OR_VERTICAL:s.x=x.Start;r.x=x.Start+x.Size;s.y=r.y=AF.ValueToPosition(AC);break;case F.OR_HORIZONTAL:s.y=x.Start;r.y=x.Start+x.Size;s.x=r.x=AF.ValueToPosition(AC);break;}}AE.push(s);AE.push(r);z=new W.StraightLineObject({TripleId:AH,GraphObjectManager:this,StartPoint:AE[0],EndPoint:AE[1],GraphCollectionObject:null});if(z){this.AddToMapAndList(z);}}function H(x,AA,AD,r,AG,s){var u,v,AB,AC,t=this.mChartContextPtr,w=this.mIsVertical,AE;r=r||false;u=w?AD.GetTopMiddle():AD.GetRightMiddle();v=w?AD.GetBottomMiddle():AD.GetLeftMiddle();AB=false;AC=this.GetData(AA.seriesInfoID,AA.groupID);if(AC!==null){AE=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AA.seriesInfoID].mValueAxis];AB=(AC<0)^AE.IsReverseOrder();}else{return false;}if(AG===undefined){AG=0;}if(s===undefined){s=this.mIsVertical?t.mGraphHeight:t.mGraphWidth;}var p=x.GetBoundingRect(),AF=t.GetGraphMatrixContext();if(AB){u.swapPoints(v);AG=0;s=AE.GetBasePosition();}var z=AF.getPadding(R.kLabelToChart),y=this.mpABLPlotContext.mABLOptions,q=y.mTextPosition;switch(q){case b.DssGraphDTPositionCenter:break;case b.DssGraphDTPositionInMin:case b.DssGraphDTPositionOutMax:if(r){if(AB){if(w){u.y-=z;}else{u.x+=z;}}else{if(w){u.y+=z;}else{u.x-=z;}}}else{if(AB){if(w){u.y+=z;}else{u.x-=z;}}else{if(w){u.y-=z;}else{u.x+=z;}}}break;case b.DssGraphDTPositionOutMin:case b.DssGraphDTPositionInMax:break;default:break;}this.MoveLabel(AA.groupID,x,u,v,AA.seriesInfoID);p=x.GetBoundingRect();return AF.checkLabelPaddingToBorder(p,AG,s,!this.mIsVertical);}function T(p,q){var r=q.rect;if(this.mIsVertical){return !(r.GetBottomMiddle().y>=p&&r.GetTopMiddle().y<=p);}return !(r.GetRightMiddle().x>=p&&r.GetLeftMiddle().x<=p);}function h(s,t,r,v){v=v||false;var q=new W.Rect2D({Rect:s}),p,u;if(this.mIsVertical){if(r){if(v){q.height-=Math.max(0,t-q.y);q.y=Math.max(t,q.y);}else{q.height+=Math.max(0,q.y-t);q.y=Math.min(t,q.y);}}else{if(v){q.height-=Math.max(0,t-q.y);}else{q.height+=Math.max(0,q.y-t);}}}else{if(r){if(v){q.width=t-q.x;}else{q.width=t-q.x;}}else{if(v){q.width-=Math.max(t-q.x,0);q.x=t;}else{q.width+=Math.max(q.x-t,0);q.x=t;}}}return{Valid:true,Rect:q,Low:p,High:u};}function l(AB){var AE=new W.TripleId({ObjectId:j.DssGraphRiser,SeriesId:this.mSeriesInfo[AB.seriesInfoID].mSeriesId,GroupId:AB.groupID}),w=I>0,u=w,y,AH,AL=this.GetGraphObject(AE),AI,AK,AF;if(!AL){return null;}AH=AL.GetBoundingRect();AE.mObjectId=j.DssGraphDataText;if(this.mSGMapLabel[AE.mSeriesId]===undefined){this.mSGMapLabel[AE.mSeriesId]=new W.GraphCollectionObject({TripleId:AE,GraphObjectManager:this,CollectionType:B.CT_TEXT});}var z=this.mSGMapLabel[AE.mSeriesId],AC=0,AD=true,t=this.mDatasetPtr.GetData(AE.mSeriesId,AE.mGroupId),v=this.createRiserLabel(AB.seriesInfoID,AB.groupID,z);if(v===null){return null;}if(u){var s=this.mDatasetPtr.GetData(C+f,AE.mGroupId);if(s){if(s===0||s===t){u=false;}else{u=(s>0&&t>=0)||(s<0&&t<=0);if(u){AD=(s>t&&t>=0)||(s<t&&t<=0);}}}else{u=false;}}for(AI=0;AI<2;++AI){if(y===true){return v;}if(AI===1){v.SetRotation(E.FR_90);}y=H.call(this,v,AB,AH);if(u&&AD&&y){y=T.call(this,AC,v);if(!y){AK=h.call(this,AH,AC,(t>=0),false);if(AK.Valid){y=H.call(this,v,AB,AK.Rect,false,AK.High,AK.Low);}}}if(!y){var x=this.mpABLPlotContext.mABLOptions,p=x.mTextPosition,AG=p;x.mTextCollection=b.DssGraphDTPositionInMax;y=H.call(this,v,AB,AH,true);if(u&&!AD&&y){y=T.call(this,AC,v);if(!y){AK=h.call(this,AH,AC,(t>=0),true);if(AK.Valid){y=H.call(this,v,AB,AK.Rect,true,AK.High,AK.Low);}}}var r=true,AJ=false;if(this.mIsVertical){AJ=AH.height<=v.height;}else{AJ=AH.width<=v.width;}if(r){AF=this.mChartContextPtr.getDefaultContrastColor();var AA=1,q=new W.FormatFont({Font:v.mFormatFontPtr});q.mStrokeColor=AF;if(AJ){q.mFontStyle=AA;}v.mFormatFontPtr=q;}x.mTextCollection=AG;}}return v;}function N(AA,w,AC){var s=w,AB={groupID:AA,seriesInfoID:0},q=true,AE=true,x=true,p=true;var v,AD,z;if(q){for(v=0;v<f;++v){AB.seriesInfoID=s[C+v];AD=S.call(this,AB,AC);if(AD.Bar===null){return ;}}}else{return ;}if(AE){for(v=0;v<C;++v){AB.seriesInfoID=s[v];AD=S.call(this,AB,AC);}}if(x){for(v=0;v<I;++v){AB.seriesInfoID=s[C+f+v];z=U.call(this,AB,AC);}}if(p){for(v=0;v<f;++v){AB.seriesInfoID=s[C+v];var y=this.mpABLPlotContext.mABLOptions,u=y.mShowValue,t=this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AB.seriesInfoID].mSeriesIndex].mShowDataLabels;y.mShowValue=true;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AB.seriesInfoID].mSeriesIndex].mShowDataLabels=true;var r=l.call(this,AB);if(r){r.mTripleId.mSeriesID=C+f+I;this.AddToMapAndList(r);}y.mShowValue=u;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AB.seriesInfoID].mSeriesIndex].mShowDataLabels=t;}}}function g(v){var q=this.IsReverseGroupOrder(),r,u=[],p,s;var t=this.mDatasetPtr.GetGroupCount();for(s=0;s<t;++s){r=s;if(q){r=t-1-r;}u=this.GetSeriesOrderByType(r,u,v);p=u.length;A.call(this,r,v);k.call(this,r);N.call(this,r,u);this.oneGroupBandValues=null;this.oneGroupBandColors=null;}this.GenerateTrendLine();this.GenerateRefLine();}mstrmojo.chart.BulletSeriesRenderer=mstrmojo.declare(mstrmojo.chart.BarSeriesRenderer,null,{scriptClass:"mstrmojo.chart.BulletSeriesRenderer",bandOptions:null,bulletWidth:0,oneGroupBandValues:null,oneGroupBandColors:null,labelCollection:null,init:function n(p){this._super(p);this.bandOptions={DescentLayout:false,Width:{Ratio:a,Padding:K,Limit:{Max:D,Min:X}},ColorMode:Q,PositionByMetric:false};},GenerateByValueAxis:function e(p){this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();Y.call(this);if(this.mSeriesInfo.length===0){return ;}g.call(this,p);},PrepareData:function c(q,r){if(r){return this.hPrepareData(q);}var p=A.call(this,q.groupID);return p[q.seriesInfoID];}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","BarSeriesRenderer","AreaSeriesRenderer","LineSeriesRenderer","BulletSeriesRenderer","Plot","GraphObjectManager","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumMajorGraphType","EnumGraphSubType","EnumOrientation","EnumValueAxis","EnumAnchorPoint","EnumTrendLineIndex");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumShapeType","EnumDSSGraphObject");var R=mstrmojo.hash,f=mstrmojo.chart,Z=f.ChartConstants,M=f.enums,g=M.EnumMajorGraphType,O=M.EnumLayout,j=M.EnumGraphSubType,K=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumTrendLineIndex,p=M.EnumAnchorPoint,l=f.gNullTripleId,W=mstrmojo.chart.model,Q=W.enums,v=Q.EnumShapeType,q=Q.EnumDSSGraphType,t=Q.EnumDSSGraphProperty,S=Q.EnumDSSGraphDataTextShowType,u=Q.EnumDSSGraphObject,V=0,b=1,r=2,AC=1,N=2,z=3,L=4;var AD=new f.TripleId();function AF(){var AG=this.mChartContextPtr,AH=this.mABLPlotContext,AK=AH.mABLOptions,AJ,AO={positive:[],negative:[]},AL=this.mAreaSeriesRendererPtr,AP=this.mBarSeriesRendererPtr,AN=this.mLineSeriesRendererPtr;if((AK.mLayout===O.LO_STACKED)||(AK.mLayout===O.LO_PERCENT)){if(AG.isCombinationChart()){var AM=this.mSeriesId,AI=AM.length;for(AJ=0;AJ<AI;++AJ){if(AL){AO=AL.UpdateCumulateData(E.VA_Y1,AO,AM[AJ]);}if(AP){AO=AP.UpdateCumulateData(E.VA_Y1,AO,AM[AJ]);}if(AN){AO=AN.UpdateCumulateData(E.VA_Y1,AO,AM[AJ]);}}if(AK.mDualAxes){AO={positive:[],negative:[]};for(AJ=0;AJ<AI;++AJ){if(AL){AO=AL.UpdateCumulateData(E.VA_Y2,AO,AM[AJ]);}if(AP){AO=AP.UpdateCumulateData(E.VA_Y2,AO,AM[AJ]);}if(AN){AO=AN.UpdateCumulateData(E.VA_Y2,AO,AM[AJ]);}}}}else{if(AL){AO=AL.UpdateCumulateData(E.VA_Y1,AO);}if(AP){AO={positive:[],negative:[]};AO=AP.UpdateCumulateData(E.VA_Y1,AO);}if(AN){AO={positive:[],negative:[]};AN.UpdateCumulateData(E.VA_Y1,AO);}if(AK.mDualAxes){AO={positive:[],negative:[]};if(AL){AO=AL.UpdateCumulateData(E.VA_Y2,AO);}if(AP){AO={positive:[],negative:[]};AO=AP.UpdateCumulateData(E.VA_Y2,AO);}if(AN){AO={positive:[],negative:[]};AN.UpdateCumulateData(E.VA_Y2,AO);}}}}}function U(){var AK=[],AI=[this.mAreaSeriesRendererPtr,this.mBarSeriesRendererPtr,this.mLineSeriesRendererPtr],AG=AI.length,AH,AJ=0;for(AH=0;AH<AG;AH++){if(AI[AH]){AJ=AI[AH].updateSeriesRenderSequence(AK,AJ);}}return AK;}function y(){var AH=this.mABLPlotContext,AK=AH.mCategoryAxisPtr,AI=this.mDatasetPtr;this.DPCount=0;this.seriesDPCount.splice(0,this.seriesDPCount.length);if(this.mPartialRendering){var AG=this.mChartContextPtr,AM={PartialRendering:true,Group:{}},AJ,AN,AL=AG.mRenderingWindow,AO=AG.IsVertical();if(AO){AJ=AL.x;AN=AJ+AL.width;}else{AJ=AL.y;AN=AJ+AL.height;}AM.Group.Max=AK.getGroupSlotAt(AN)+1;AM.Group.Min=AK.getGroupSlotAt(AJ)-1;AM.Data={Max:-1,Min:-1};AI.updateDataWindow(AM);}else{AI.resetDataWindow();}}function AE(){var AH=this.mDatasetPtr,AO,AI,AN=E.VA_Y1,AG,AL,AJ,AP,AM,AK;AO=AH.GetGroupCount();AI=this.mSeriesId.length;if(this.mChartContextPtr.IsDualAxis()){AG=AH.GetSeriesByValueAxis(E.VA_Y2);}else{AG=[];}for(AL=0;AL<AO;++AL){AP=AM=0;for(AJ=0;AJ<AI;++AJ){AK=AH.GetData(this.mSeriesId[AJ],AL);if(AK!==null&&AK!==undefined){if(AG.indexOf(this.mSeriesId[AJ])!==-1){AN=E.VA_Y2;if(AK>0){AM+=AK;}else{AM+=Math.abs(AK);}}else{AN=E.VA_Y1;if(AK>0){AP+=AK;}else{AP+=Math.abs(AK);}}}}this.groupTotals[0].push(AP);this.groupTotals[1].push(AM);}}function c(){var AP=this.mABLPlotContext.mABLOptions,AJ=this.mABLPlotContext.mSeriesOptions,AI=this.mChartContextPtr,AV,AM,AL,AN,AO,AT,AR,AU=0;if(AI.mIsGraphMatrix&&AI.isCombinationChart()){var AS,AK=this.mDatasetPtr.GetSeriesByShape(),AH=[AK.Tick,AK.Line,AK.Square,AK.Circle,AK.Bar,AK.Area,AK.Pie],AQ=[v._TICKER,v._LINE,v._SQUARE,v._CIRCLE,v._BAR,v._AREA,v._PIE];AR=AH.length;for(AM=0;AM<AR;++AM){AS=AH[AM];AT=AQ[AM];if(AS&&AS.length){++AU;for(AL=0;AL<AS.length;AL++){AJ[AS[AL]].mRealSeriesType=AT;}}}this.countOfTypes=AU;this.realComboChart=(AU>1);return ;}var AG=AI.getUtiliy().tripleId;AN=AJ.length;for(AM=0;AM<AN;++AM){switch(AJ[AM].mSeriesType){case v._AREA:AJ[AM].mRealSeriesType=v._AREA;break;case v._BAR:AJ[AM].mRealSeriesType=v._BAR;break;case v._LINE:if(AP.mCurvedLines){AJ[AM].mRealSeriesType=v._LINE;}else{AO=AG.create(u.DssGraphRiser,this.mSeriesId[AM]);AV=AI.GetProperty(t.DssGraphShowStepLine,AO);if(AV!==undefined&&AV!==null){if(AV){AJ[AM].mRealSeriesType=v._STEPLINE;}else{AJ[AM].mRealSeriesType=v._LINE;}}}break;case v._PIE:AJ[AM].mRealSereisType=v._LINE;break;case v._DEFAULT:if(AP.mMajorGraphType===g.MGT_AREA){AJ[AM].mRealSeriesType=v._AREA;}else{if(AP.mMajorGraphType===g.MGT_BAR){AJ[AM].mRealSeriesType=v._BAR;}else{if(AP.mCurvedLines){AJ[AM].mRealSeriesType=v._LINE;}else{AO=AG.create(u.DssGraphRiser,this.mSeriesId[AM]);AV=AI.GetProperty(t.DssGraphShowStepLine,AO);if(AV!==undefined&&AV!==null){if(AV){AJ[AM].mRealSeriesType=v._STEPLINE;}else{AJ[AM].mRealSeriesType=v._LINE;}}else{AJ[AM].mRealSeriesType=v._LINE;}}}}break;}}}function Y(AH){var AM=this.mChartContextPtr,AL=this.mABLPlotContext,AJ=AL.mABLOptions,AG=AL.mSeriesOptions,AK;var AI=AM.getUtiliy().tripleId;AI.reset(AD,u.DssGraphRiser,this.mSeriesId[AH]);if(!AM.mIsGraphMatrix){AK=AM.GetProperty(t.DssGraphSDRiserType,AD);if(AK){switch(AK){case V:AG[AH].mSeriesType=v._DEFAULT;break;case b:if(AJ.mMajorGraphType===g.MGT_LINE){AG[AH].mSeriesType=v._BAR;}else{AG[AH].mSeriesType=v._LINE;}break;case r:if(AJ.mMajorGraphType===g.MGT_AREA){AG[AH].mSeriesType=v._BAR;}else{AG[AH].mSeriesType=v._AREA;}break;default:AG[AH].mSeriesType=AK;break;}}}AG[AH].mValueAxis=this.LoadValueAxisInfo(AH,AJ.mDualAxes);if(AM.mImageUsage!==0){return ;}this.LoadTrendLineProperties(this.mSeriesId[AH],AG[AH].mTrendLineOptions);if(AM.mIsGraphMatrix===false){AG[AH].mGraphNumberFormat=new f.ChartAdvFormat();AK=AM.GetProperty(-t.DssGraphFormatDataTextAdv,AD);if(AK){AM.ParseValueToFormat(AK,AG[AH].mGraphNumberFormat);}}}function I(){var AL=this.mChartContextPtr,AK=this.mABLPlotContext,AH=AK.mABLOptions,AI;this.SetGraphType(AL.mGraphType);if(AL.mImageUsage!==0){return ;}if(AL.mIsGraphMatrix){return ;}var AJ=new f.TripleId({SeriesId:this.mTripleId.mSeriesId});AI=AL.GetProperty(t.DssGraphShowDataText,AJ);if(AI){AH.mTextShowType=AI;AH.mShowCumulate=(AI&S.DssGraphDataTextAbs)===0;}var AG=21001;AI=AL.GetProperty(AG,AJ);if(AI){AH.mUseGlobalAutoScale=AI;}AI=AL.GetProperty(t.DssGraphDepthMode,AJ);if(AI){AH.mUseDepth=AI;}AI=AL.GetProperty(t.DssGraph2DDepth,AJ);if(AI){AH.mDepth=AI;}AI=AL.GetProperty(t.DssGraph2DAngle,AJ);if(AI){AH.mDepthDirection=AI;}AI=AL.GetProperty(t.DssGraphShowLine,AJ);if(AI){AH.mShowLines=AI;}AI=AL.GetProperty(t.DssGraphShowDivBiPolar,AJ);if(AI){AH.mShowAxisSplit=AI;}AI=AL.GetProperty(t.DssGraphShowDataLabel,AJ);if(AI){AH.mShowLabel=AI;}AI=AL.GetProperty(t.DssGraphShowDataValue,AJ);if(AI){AH.mShowValue=AI;}AI=AL.GetProperty(t.DssGraphShowDVPercent,AJ);if(AI){AH.mShowAsPercentage=AI;}AI=AL.GetProperty(t.DssGraphShowTotalValue,AJ);if(AI){AH.mShowTotal=AI;}AI=AL.GetProperty(t.DssGraphCurvedLines,AJ);if(AI){AH.mCurvedLines=AI;}AI=AL.GetProperty(t.DssGraphAxisDataTextPlace,AJ);if(AI){AH.mTextPosition=AI;}AI=AL.GetProperty(t.DssGraphSplitYPosition,AJ);if(AI){AH.mSplitAxisPosition=AI;}}function AA(AI){var AM=this.mChartContextPtr,AH=AM.GetGraphMatrixContext();if(AM.mIsGraphMatrix){if(AH.isCombinationChart()){var AJ=AM.mImageUsage===mstrmojo.chart.enums.EnumImageUsage.OBJECT_CLIP_COMPUTATION;var AK=this.mDatasetPtr,AL=AK.GetSeriesByShape(),AG=((AL.Square&&AL.Square.length)||(AL.Circle&&AL.Circle.length)||(AL.Tick&&AL.Tick.length));if((AL.Bar&&AL.Bar.length)){if(!AJ||AK.onlyBarDataLabelEnabled()){this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AI,{TripleId:f.BarRenderer0}));}}if(AL.Area&&AL.Area.length){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AI,{TripleId:f.AreaRenderer0}));}if((AL.Line&&AL.Line.length)||AG){if(!AJ||(AJ&&!(AL.Line.length===1&&AK.GetGroupCount()===1))){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AI,{TripleId:f.LineRenderer0}));}}return true;}if(AM.IsBarChart()){if(AM.IsBulletChart()){this.mBarSeriesRendererPtr=new f.BulletSeriesRenderer(R.copy(AI,{TripleId:f.BarRenderer0}));}else{this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AI,{TripleId:f.BarRenderer0}));}}else{if(AM.IsLineChart()){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AI,{TripleId:f.LineRenderer0}));}else{if(AM.IsAreaChart()){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AI,{TripleId:f.AreaRenderer0}));}else{return false;}}}return true;}this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AI,{TripleId:f.AreaRenderer0}));this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AI,{TripleId:f.BarRenderer0}));this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AI,{TripleId:f.LineRenderer0}));return true;}function P(AR,AI){var AP=AA.call(this,AR);if(!AP){return ;}var AN=this.mAreaSeriesRendererPtr,AT=this.mBarSeriesRendererPtr,AS=this.mLineSeriesRendererPtr;var AL=[[0,0],[0,0],[0,0],[0,0]],AG=[],AO,AK=0,AJ=this.mDatasetPtr,AH=this.mChartContextPtr,AQ=this.mSeriesId,AM=AQ.length;if(AH.isCombinationChart()){AG=AJ.GetSeriesIndexByPriority();}for(AO=0;AO<AM;++AO){if(AG&&AG.length>AO){AK=AG[AO];}else{AK=AO;}switch(AI[AK].mRealSeriesType){case v._AREA:if(AN){AN.AddSeries(AQ[AK],AK,AL[v._AREA][AI[AK].mValueAxis],AI[AK].mValueAxis);++AL[v._AREA][AI[AK].mValueAxis];}break;case v._BAR:if(AT){AT.AddSeries(AQ[AK],AK,AL[v._BAR][AI[AK].mValueAxis],AI[AK].mValueAxis);++AL[v._BAR][AI[AK].mValueAxis];}break;case v._TICKER:case v._LINE:case v._SQUARE:case v._CIRCLE:case v._PIE:if(AS){AS.AddSeries(AQ[AK],AK,AL[v._LINE][AI[AK].mValueAxis],AI[AK].mValueAxis);++AL[v._LINE][AI[AK].mValueAxis];}break;default:}}}function C(AL,AS,AG,AR,AP,AN,AI,AJ){var AH={},AM=AS/2,AK=AG/2,AO=AJ.IsVerticalAxis(),AQ;if(AJ.mTripleId.mObjectId===u.DssGraphY2Body){AQ=AO?z:L;}else{AQ=AO?AC:N;}AH.rect=new f.Rect2D({x:0,y:0,width:AG+2*AI,height:AS+2*AI});switch(AL){case 0:switch(AQ){case AC:AH.xOffset=AI+AK;AH.yOffset=AR-AI-AM;AH.rect.y=AR-2*AI-AS;AH.rect.x=0;break;case N:AH.xOffset=AR-AI-AK;AH.yOffset=AP-AI-AM;AH.rect.y=AP-2*AI-AS;AH.rect.x=AR-2*AI-AG;break;case z:AH.xOffset=AN-AI-AK;AH.yOffset=AR-AI-AM;AH.rect.y=AR-2*AI-AS;AH.rect.x=AN-2*AI-AG;break;case L:AH.xOffset=AR-AI-AK;AH.yOffset=AI+AM;AH.rect.y=0;AH.rect.x=AR-2*AI-AG;break;}break;case 1:switch(AQ){case AC:AH.xOffset=AI+AK;AH.yOffset=AR+AI+AM;AH.rect.y=AR;AH.rect.x=0;break;case N:AH.xOffset=AR+AI+AK;AH.yOffset=AP-AI-AM;AH.rect.y=AP-2*AI-AS;AH.rect.x=AR;break;case z:AH.xOffset=AN-AI-AK;AH.yOffset=AR+AI+AM;AH.rect.y=AR;AH.rect.x=AN-2*AI-AG;break;case L:AH.xOffset=AR+AI+AK;AH.yOffset=AI+AM;AH.rect.y=0;AH.rect.x=AR;break;}break;}return AH;}function k(AK,AQ,AN,AL,AH,AI){var AO=AK.rect,AM,AJ,AG,AP;if(AO.y<0||AO.y+AO.height>AQ){return false;}if(AO.x<0||AO.x+AO.width>AN){return false;}AM=AI.length;for(AJ=0;AJ<AM;++AJ){AG=AI[AJ].GetBoundingRect(true);if(AO.HasIntersection(AG)){return false;}}AM=AH.length;for(AJ=0;AJ<AM;++AJ){AG=AH[AJ].GetBoundingRect(true);if(AO.HasIntersection(AG)){return false;}}AM=AL.length;for(AJ=0;AJ<AM;++AJ){AP=AL[AJ];if(AP.mIsShown){AG=AP.GetBoundingRect(true);if(AO.HasIntersection(AG)){return false;}}}return true;}function D(){var Ad=this.mABLPlotContext.mValueAxis,Aj=this.mABLPlotContext.mABLOptions,AM=this.mChartContextPtr,AZ=AM.mGraphWidth,Ah=AM.mGraphHeight,Ae=AM.mpGraphMatrixContext,AG=Aj.mOrientation,AO=AG===1,AT=this.mDatasetPtr.fetchShownLabels(AO),AJ,AS,Af,Ab,Aa,Ai,AL,AQ,AR,AK,Am,AH,AW,AU,AV,Al,AY,AN,AI,AX,Ak=Ae.getPadding(Z.kAxisOriginLabel),Ag,AP;Af=Ad.length;for(Ab=0;Ab<Af;++Ab){AJ=Ad[Ab];AW=f.gAxisObjects[AJ.getIndex()].mCustomLabelId;AS=AJ.mOptions;AR=AS.mAxisCustomValue;Ai=AT&&AT[AJ.Key];AL=Ai&&Ai.length;AK=false;if(!AS.mDrawCustomLine){continue;}for(Aa=0;Aa<AL&&!AK;++Aa){AQ=Ai[Aa];if(AQ===AR){AK=true;}}if(AK){continue;}if(AR>AJ.mMaxTick||AR<AJ.mMinTick){continue;}var Ac={};if(AJ.mIsPercent){Ac.mFormatType=4;Ac.mCustomFormat="0%";}else{Ac=AJ.mNumberFormat;}Al=new f.NumberObject({TripleId:AW,GraphObjectManager:this,Number:AR,NumberFormat:Ac,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:AJ.mCondenseLabels});if(Al===null||Al===undefined){continue;}AN=Al;AI=Al.mText;AN.SetText(AI);AH=AN.GetBoundingRect(true);AU=AH.height;AV=AH.width;Am=AJ.ValueToPosition(AR);AP=AJ.IsVerticalAxis();if(Am===0){continue;}if(AP){if(Am===Ah){continue;}}else{if(Am===AZ){continue;}}Ag=false;for(Aa=0;Aa<=1&&!Ag;++Aa){AY={};AX=C.call(this,Aa,AU,AV,Am,Ah,AZ,Ak,AJ);AY.xOffset=AX.xOffset;AY.yOffset=AX.yOffset;AY.rect=AX.rect;Ag=k.call(this,AY,Ah,AZ,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ag){AN.MoveTo(AY.xOffset,AY.yOffset,p.CENTER);AN.mIsShown=true;this.mPostTrendLineObjects.push(AN);this.axisOriginLabels.push(AN);}}}function T(){return{mSeriesOptions:[],mValueAxis:[],mABLOptions:{mGraphType:q.DssGraphTypeVertical_Line_Absolute,mMajorGraphType:g.MGT_LINE,mLayout:O.LO_ABSOLUTE,mOrientation:K.OR_VERTICAL,mGraphSubType:j.GST_NULL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mShowAxisSplit:true,mShowLabel:false,mShowValue:false,mShowAsPercentage:false,mShowTotal:true,mShowCumulate:false,mCurvedLines:false,mShowLines:true,mUseGlobalAutoScale:true,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mTextPosition:4,mTextShowType:S.DssGraphDataTextValue,mTotalNumberFormat:null}};}mstrmojo.chart.ABLPlot=mstrmojo.declare(mstrmojo.chart.CategoryPlot,null,{scriptClass:"mstrmojo.chart.ABLPlot",mAreaSeriesRendererPtr:null,mBarSeriesRendererPtr:null,mLineSeriesRendererPtr:null,mABLPlotContext:null,mDepthLevel:null,mAxesAreas:null,unitLevelDepth:0,takeGroupCenter:false,groupTotals:null,groupOrder:null,countOfTypes:0,realComboChart:false,init:function x(AG){this._super(AG);this.mDepthLevel=[];this.groupTotals=[[],[]];this.mAxesAreas=[];this.groupOrder=[];this.mABLPlotContext=T.call(this);this.mABLPlotContext.takeGroupCenter=this.mChartContextPtr.mDatasetPtr.ShouldTakeGroupCenter();},getLayout:function J(){return this.mABLPlotContext.mABLOptions.mLayout;},getOrientation:function AB(){return this.mABLPlotContext.mABLOptions.mOrientation;},isAbsoluteOrCluster:function F(){var AG=this.mABLPlotContext.mABLOptions.mLayout;return AG===O.LO_ABSOLUTE||AG===O.LO_CLUSTER;},GenerateMapAndList:function w(){var AL=this.mChartContextPtr,AH=this.mABLPlotContext,AP=AH.mABLOptions,AM=this.mDataArea,AO,AN,AU,AY,AQ=this.shownDataLabels;if(AM.width<=0||AM.height<=0){return ;}y.call(this);var AK=this.mAxesAreas;if(AP.mDualAxes&&AP.mSplitDualAxes){AO=new f.Rect2D();AN=new f.Rect2D();this.mChartContextPtr.SplitRect(AM,AP.mOrientation===K.OR_VERTICAL,AP.mSplitAxisPosition,AO,AN);AK.push(AO);AK.push(AN);}else{AO=new f.Rect2D({x:AM.x,y:AM.y,width:AM.width,height:AM.height});AK.push(AO);if(AP.mDualAxes){AN=new f.Rect2D({x:AM.x,y:AM.y,width:AM.width,height:AM.height});AK.push(AN);}}var AR=this.mABLPlotContext.mValueAxis,AV,AW=AR.length,AG=this.mAreaSeriesRendererPtr,AT=this.mBarSeriesRendererPtr,AZ=this.mLineSeriesRendererPtr,AI=this.mGraphObjectManagerList,AS=this.mGraphObjectMap,AJ=this.mPostTrendLineObjects;if(AL.mIsGraphMatrix===false){for(AU=0;AU<AW;++AU){AV=AR[AU];if(!AV.IsBaseAtZero()&&AV.mOptions.mUseLogarithmicScale===false){AY=AV.GetBaseValue();if(AG){AG.AddBaseToCumulateData(AU,AY);}if(AT){AT.AddBaseToCumulateData(AU,AY);}if(AZ){AZ.AddBaseToCumulateData(AU,AY);}}}}if(AG){AG.SetDeviceDataArea(AM);}if(AT){AT.SetDeviceDataArea(AM);}if(AZ){AZ.SetDeviceDataArea(AM);}if(!(AP.mDualAxes&&AP.mSplitDualAxes&&AP.mUseDepth)){if(AG){AG.GenerateMapAndList(AQ);AI.push(AG);}if(AT){AT.GenerateMapAndList(AQ);AI.push(AT);}if(AZ){AZ.GenerateMapAndList(AQ);AI.push(AZ);}}if(AP.mDualAxes){if(AP.mSplitDualAxes){this.AdjustTrendLineEquation(AK[0],a.TLI_Y1);this.AdjustTrendLineEquation(AK[1],a.TLI_Y2);}else{this.AdjustTrendLineEquation(AM,a.TLI_BOTH);}}else{this.AdjustTrendLineEquation(AM,a.TLI_Y1);}AW=AR.length;this.axisOriginLines=[];var AX=this.axisOriginLines;for(AU=0;AU<AW;++AU){AV=AR[AU];if(this.mChartContextPtr.mIsGraphMatrix){AV.GenerateCustomLine(AK[AU],AX);}else{AV.GenerateCustomLine(AK[AU],AJ);}}D.call(this);if(AG){AG.AddTextToMapAndList(AS,AJ);}if(AT){AT.AddTextToMapAndList(AS,AJ);}if(AZ){AZ.AddTextToMapAndList(AS,AJ);}this.mDatasetPtr.resetDataWindow();},Draw:function s(){var AG=this.mChartContextPtr,AH=this.mDataArea,AO=this.mAreaSeriesRendererPtr,AR=this.mBarSeriesRendererPtr,AQ=this.mLineSeriesRendererPtr;var AP=this.axisOriginLines;if(AP&&AP.length){var AK,AM=AP.length;for(AK=0;AK<AM;AK++){AP[AK].Draw();}}if(this.mAreaSeriesRendererPtr){var AI=U.call(this);AG.setDrawingOrderToCanvas(AI);}if(AG.mIsTimeSeriesChart){var AN=new f.Rect2D({x:AH.x+1,y:AH.y,width:AH.width-1,height:AH.height});AG.DrawRectangle(AN,false);AG.saveState();AG.Clip();if(AO){AO.Draw();}if(AR){AR.Draw();}if(AQ){AQ.Draw();}this._super();this.DrawPostTrendLineObjects();AG.RestoreState();}else{var AJ=this.mABLPlotContext,AL=AJ.mABLOptions;if(!AL.mDualAxes||!AL.mSplitDualAxes||!AL.mUseDepth){if(AO){AO.Draw();}}if(AR){AR.Draw();}if(!AL.mDualAxes||!AL.mSplitDualAxes||!AL.mUseDepth){if(AQ){AQ.Draw();}}this._super({Skip:1});if(this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquations();}this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function e(){if(!this.mChartContextPtr.mIsTimeSeriesChart&&this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[0],false);if(this.mABLPlotContext.mABLOptions.mDualAxes){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[1],true);}}},AddValueAxis:function A(AG){this.mABLPlotContext.mValueAxis.push(AG);},SetCategoryAxis:function h(AL){var AG=this.mChartContextPtr,AJ=this.mABLPlotContext,AH,AO,AI,AP,AM,AK,AN=AJ.mCategoryAxisPtr=AL;AH=false;if(AG.mIsTimeSeriesChart){AH=true;}else{AO=AG.GetProperty(t.DssGraph2DOrdSpaceMode,l);if(AO){AH=AO;}}AI=AJ.mABLOptions.mMajorGraphType!==g.MGT_BAR;AP=true;AM=this.mSeriesId.length;for(AK=0;AK<AM;++AK){if(AJ.mSeriesOptions[AK].mRealSeriesType===v._BAR){AP=false;break;}}AN.mAxisCross=(AH&&AI&&AP);if(AG.mIsGraphMatrix&&AG.IsLineChart()){if(this.mDatasetPtr.GetGroupCount()<=1){AN.mAxisCross=false;}}},GetDepthOffset:function B(AG){return this.mChartContextPtr.CalculateDepthOffset(this.mDepthLevel[AG]*this.unitLevelDepth,this.mABLPlotContext.mABLOptions.mDepthDirection);},getGroupTotals:function o(AG,AH){return this.groupTotals[AH][AG];},Init:function n(){var AJ,AG,AL=this.mABLPlotContext,AI=AL.mSeriesOptions;AI.splice(0,AI.length);AG=this.mSeriesId.length;for(AJ=0;AJ<AG;++AJ){var AK={mSeriesType:v._DEFAULT,mRealSeriesType:v._LINE,mValueAxis:E.VA_Y1,mShowDataLabels:false,mTrendLineOptions:null,mGraphNumberFormat:f.dNF};if(this.mChartContextPtr.mIsGraphMatrix==false){AK.mTrendLineOptions=new f.GraphTrendLineOptions();}AI.push(AK);}I.call(this);for(AJ=0;AJ<AG;++AJ){Y.call(this,AJ);}c.call(this);var AH={GraphObjectManager:this,DataSet:this.mDatasetPtr,Legend:this.mLegendPtr};P.call(this,AH,AI);AE.call(this);AF.call(this);},SetGraphType:function d(AH){var AG=this.mABLPlotContext.mABLOptions;AG.mGraphType=AH;switch(AH){case q.DssGraphTypeVertical_Area_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Area_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Area_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Area_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Area_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_Percent:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Area_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Area_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_Percent:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_Percent:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_CLUSTER;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_Percent:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Line_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Line_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Line_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_Percent:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Line_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Line_BiPolar_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Stacked:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_STACKED;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_Percent:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bullet:case q.DssGraphTypeVertical_Bar_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeHorizontal_Bullet:case q.DssGraphTypeHorizontal_Bar_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_NULL;break;case q.DssGraphTypeVertical_Bar_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeVertical_Bar_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_BIPOLAR;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_ABSOLUTE;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Area_DualAxis_Percent:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Area_DualAxis_Percent:AG.mMajorGraphType=g.MGT_AREA;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Bar_DualAxis_Percent:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Bar_DualAxis_Percent:AG.mMajorGraphType=g.MGT_BAR;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeVertical_Line_DualAxis_Percent:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_VERTICAL;AG.mGraphSubType=j.GST_DUALAXIS;break;case q.DssGraphTypeHorizontal_Line_DualAxis_Percent:AG.mMajorGraphType=g.MGT_LINE;AG.mLayout=O.LO_PERCENT;AG.mOrientation=K.OR_HORIZONTAL;AG.mGraphSubType=j.GST_DUALAXIS;break;}switch(AG.mGraphSubType){case j.GST_NULL:AG.mDualAxes=false;AG.mSplitDualAxes=false;break;case j.GST_DUALAXIS:AG.mDualAxes=true;AG.mSplitDualAxes=false;break;case j.GST_BIPOLAR:AG.mDualAxes=true;AG.mSplitDualAxes=true;break;}},GetMinMaxValue:function H(AN,AJ,AG,AL){var AI,AM=this.mChartContextPtr;if(AM.mIsUniformAxisMode){var AH=AM.getUniformAxisContext(),AK=AH.ValueAxis;if(AN===E.VA_Y1){if(AM.IsVertical()===false){return{Min:AK.X1.Min,Max:AK.X1.Max,AreInitialized:true};}return{Min:AK.Y1.Min,Max:AK.Y1.Max,AreInitialized:true};}if(AM.IsVertical()===false){return{Min:AK.X2.Min,Max:AK.X2.Max,AreInitialized:true};}return{Min:AK.Y2.Min,Max:AK.Y2.Max,AreInitialized:true};}if(this.mAreaSeriesRendererPtr){AI=this.mAreaSeriesRendererPtr.GetMinMaxValue(AN,AJ,AG,AL);}if(this.mBarSeriesRendererPtr){AI=this.mBarSeriesRendererPtr.GetMinMaxValue(AN,AI.Min,AI.Max,AI.AreInitialized);}if(this.mLineSeriesRendererPtr){AI=this.mLineSeriesRendererPtr.GetMinMaxValue(AN,AI.Min,AI.Max,AI.AreInitialized);}return{Min:AI.Min,Max:AI.Max,AreInitialized:AI.AreInitialized};},ShouldRotateDataLabel:function X(){return this.mBarSeriesRendererPtr.ShouldRotateDataLabel();},GetMaxElementOffsetClippedByBoundary:function G(AO,AR){var AH={LowOffset:0,HighOffset:0},AN,AI,AL,AP;if(AR===undefined||AR===null){AR=true;}if(!this.mChartContextPtr.mIsGraphMatrix){return AH;}var AJ=AO?(AR?"X1":"X2"):(AR?"Y1":"Y2"),AG=this.mClippedElementSize;if(AG[AJ]!==undefined){return AG[AJ];}for(AI=0;AI<2;++AI){for(AL=0;AL<2;++AL){var AQ=[this.mLineSeriesRendererPtr,this.mAreaSeriesRendererPtr],AM=(AL===0),AK=(AI===0),AS=AM?(AK?"X1":"X2"):(AK?"Y1":"Y2");AH={LowOffset:0,HighOffset:0};AP=AQ.length;for(AN=0;AN<AP;++AN){if(AQ[AN]){AQ[AN].getMaxElementOffsetClippedByBoundary(AH,AM,AK);}}AG[AS]=AH;}}return AG[AJ];}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","CategoryPlot","ABLPlot","Axis","CategoryAxis","ValueAxis","GraphObjectManager","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumLayout","EnumOrientation","EnumValueAxis","EnumAxisLabelsLocation","EnumAxisDirection","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSExtraGraphProperty","EnumDSSGraphObject","EnumVariantBool");var W=mstrmojo.chart,M=W.enums,X=M.EnumGraphMajorType,d=M.EnumDSSGraphObjectManager.DssPlot,N=M.EnumLayout,J=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumAxisLabelsLocation,A=M.EnumAxisDirection,q=W.gNullTripleId,T=mstrmojo.chart.model,O=T.enums,g=O.EnumDSSGraphType,j=O.EnumDSSGraphProperty,f=O.EnumDSSExtraGraphProperty,l=O.EnumDSSGraphObject,B=O.EnumVariantBool.VARIANT_FALSE;var n=new W.Rect2D(),k=new W.Rect2D(),C=new W.Rect2D(),I=new W.Rect2D(),H=new W.Rect2D(),K=new W.Rect2D(),L=new W.Rect2D();function P(){var y=this.mChartContextPtr,w=this.mDatasetPtr,t=y.GetGraphMatrixContext(),x=false,u=false,v;if(y.mIsGraphMatrix&&this.mOrientation===J.OR_VERTICAL){var s=this.mCategoryPlots[0];v=y.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,q);if(v){x=v;}if(!x){if(y.isCombinationChart()&&!w.onlyBarDataLabelEnabled()){y.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,q,true);t.mIsNeedRotateDataLabel=false;y.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,q,false);return ;}if(y.IsBarChart()||(y.isCombinationChart()&&w.onlyBarDataLabelEnabled())){u=s.ShouldRotateDataLabel();y.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,q,true);t.mIsNeedRotateDataLabel=u;y.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,q,u);}}}}function b(z,u){var AB=this.mChartContextPtr;if(AB.mIsGraphMatrix){u.Reset(z.x,z.y,z.width,z.height);return ;}var t,v,AA,s,w=new W.Rect2D();Z.call(this,z,w);w.width=Math.max(0,w.width);w.height=Math.max(0,w.height);this.mLeftMargin+=w.x-z.x;this.mRightMargin+=z.x+z.width-(w.x+w.width);this.mTopMargin+=w.y-z.y;this.mBottomMargin+=z.y+z.height-(w.y+w.height);this.ReserveAreaCategoryAxis(w,u);if(u.width<0){u.width=0;}if(u.height<0){u.height=0;}if(this.mOrientation===J.OR_HORIZONTAL){t=z.x+Math.max(w.x-z.x,u.x-w.x);v=z.x+z.width-Math.max(z.x+z.width-(w.x+w.width),w.x+w.width-(u.x+u.width))-t;u.x=t;u.width=v;}else{AA=z.y+Math.max(w.y-z.y,u.y-w.y);s=z.y+z.height-Math.max(z.y+z.height-(w.y+w.height),w.y+w.height-(u.y+u.height))-AA;u.y=AA;u.height=s;}}function Y(s){var v=this.mChartContextPtr,u,t;u=v.GetGraphMajorType();if(v.mIsGraphMatrix){t=W.PlotId0;}else{t=new W.TripleId({ObjectId:d,SeriesId:s});}switch(u){case X.GMT_CATEGORY:return new W.ABLPlot({TripleId:t,GraphObjectManager:this,Area:W.gEmptyRect});default:break;}return null;}function Z(v,AG){var t=this.mChartContextPtr,u=[],AA=this.mVecY1Axis.length,x,AE,AB,w,AC,z,y,s,AF;for(x=0;x<AA;++x){AE=this.mOrientation===J.OR_VERTICAL?this.mBottomMargin:this.mLeftMargin;AB=this.mOrientation===J.OR_VERTICAL?this.mTopMargin:this.mRightMargin;w=AE;if(t.mIsGraphMatrix){L.ResetRect(v);K.ResetRect(v);}else{K=new W.Rect2D({Rect2D:v});L=new W.Rect2D({Rect2D:v});}if(this.mDualAxes){AC=AB;if(this.mSplitDualAxes){z=new W.Rect2D();y=new W.Rect2D();t.SplitRect(L,t.IsVertical(),this.mSplitAxisPosition,z,y);if(this.mOrientation===J.OR_VERTICAL){AC+=z.height;w+=y.height;}else{AC+=z.width;w+=y.width;}}this.mVecY2Axis[x].ReserveTitleAndLabels(K,AE,AC);if(!this.mSplitDualAxes){L.ResetRect(K);if(this.mOrientation===J.OR_VERTICAL){L.y=v.y;L.height=v.height;}else{L.x=v.x;L.width=v.width;}}if(this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&K.y>v.y){s=K.y+K.height;K.y=v.y+(K.y-v.y)*100/this.mSplitAxisPosition;K.height=s-K.y;}if(this.mOrientation===J.OR_HORIZONTAL&&K.x+K.width<v.x+v.width){K.width=v.width-(v.x+v.width-(K.x+K.width))*100/this.mSplitAxisPosition;}}}this.mVecY1Axis[x].ReserveTitleAndLabels(L,w,AB);if(this.mDualAxes&&this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&L.y+L.height<v.y+v.height){L.height=(v.y+v.height-(L.y+L.height))*100/this.mSplitAxisPosition;}if(this.mOrientation===J.OR_HORIZONTAL&&L.x>v.x){var AD=L.x+L.width;L.x=v.x+(L.x-v.x)*100/this.mSplitAxisPosition;L.width=AD-L.x;}}if(this.mDualAxes&&!this.mSplitDualAxes){K.ResetRect(L);if(this.mOrientation===J.OR_VERTICAL){K.y=v.y;K.height=v.height;}else{K.x=v.x;K.width=v.width;}}this.mVecY1Axis[x].AdjustDeviceDataArea(L,false);u.push(L);if(this.mDualAxes){this.mVecY2Axis[x].AdjustDeviceDataArea(K,false);u.push(K);}}n.Reset(0,0,0,0);k.ResetRect(u[0]);AF=u.length;for(x=1;x<AF;++x){if(!this.RectangleIntersection(k,u[x],n)){k.Reset(0,0,0,0);break;}k.ResetRect(n);}AG.ResetRect(k);}function r(t,v){var x=this.mChartContextPtr,u=x.mUniformAxisContext,s=new W.Rect2D({Rect2D:v});if(x.mIsGraphMatrix){var w=0;if(x.IsVertical()){w=u.yDataLabelPadding||0;w-=s.y;if(w){s.y+=w;s.height-=w;}}else{w=u.xDataLabelPadding||0;w-=x.mGraphWidth-s.x-s.width;if(w){s.width-=w;}}}return s;}function Q(s,u){var t=this.mChartContextPtr,AC=this.mVecY1Axis,AB=this.mVecY2Axis,AA=AC[u],z=AB[u],x,w,y,v;if(this.mDualAxes&&this.mSplitDualAxes){y=new W.Rect2D({Rect2D:s});x=new W.Rect2D();w=new W.Rect2D();t.SplitRect(y,t.IsVertical(),this.mSplitAxisPosition,x,w);AA.SetDeviceDataArea(x);AA.AdjustDeviceDataArea(x,true);AA.UpdateTitleAndLabelArea(x);z.SetDeviceDataArea(w);z.AdjustDeviceDataArea(w,true);z.UpdateTitleAndLabelArea(w);}else{if(this.mDualAxes){x=r.call(this,0,s);if(AC.length){AA.TrimDeviceDataArea(x);}AA.SetDeviceDataArea(x);AA.AdjustDeviceDataArea(x,true);w=r.call(this,1,s);if(AB.length){z.TrimDeviceDataArea(w);}z.SetDeviceDataArea(w);if(!t.mIsGraphMatrix){v=new W.Rect2D({Rect2D:x});z.AdjustDeviceDataArea(w,true);this.RectangleUnion(x,w,v);AA.UpdateTitleAndLabelArea(v);z.UpdateTitleAndLabelArea(v);}}else{x=r.call(this,0,s);if(AC.length){AA.TrimDeviceDataArea(x);}AA.SetDeviceDataArea(x);if(!t.mIsGraphMatrix){AA.AdjustDeviceDataArea(x,true);v=new W.Rect2D({Rect2D:x});AA.UpdateTitleAndLabelArea(v);}}}}function R(){var t=this.mGraphObjectList,u,v,s;u=this.mVecY1Axis.length;for(s=0;s<u;++s){this.mVecY1Axis[s].generateAxisLine(t);if(this.mDualAxes){this.mVecY2Axis[s].generateAxisLine(t);}}v=this.mVecO1Axis.length;for(s=0;s<v;++s){this.mVecO1Axis[s].generateAxisLine(t);}}function e(w){var s=this.mChartContextPtr,AA=this.mGraphObjectList,AC=this.mChartAreaOptions,AB=AC.chartAreaNumber,v,u,z,t,y,x;z=this.mVecY1Axis.length;for(v=0;v<z;++v){if(!this.isMutipleValueAxis()){for(u=0;u<AB;++u){if(this.mDualAxes&&this.mSplitDualAxes){y=new W.Rect2D();x=new W.Rect2D();s.SplitRect(w[u],s.IsVertical(),this.mSplitAxisPosition,y,x);this.mVecY1Axis[v].GenerateGridLines(y,u,AA);this.mVecY2Axis[v].GenerateGridLines(x,u,AA);}else{this.mVecY1Axis[v].GenerateGridLines(w[u],u,AA);if(this.mDualAxes){this.mVecY2Axis[v].GenerateGridLines(w[u],u,AA);}}}}else{if(this.mDualAxes&&this.mSplitDualAxes){y=new W.Rect2D();x=new W.Rect2D();s.SplitRect(w[v],s.IsVertical(),this.mSplitAxisPosition,y,x);this.mVecY1Axis[v].GenerateGridLines(y,v,AA);this.mVecY2Axis[v].GenerateGridLines(x,v,AA);}else{this.mVecY1Axis[v].GenerateGridLines(w[v],v,AA);if(this.mDualAxes){this.mVecY2Axis[v].GenerateGridLines(w[v],v,AA);}}}}t=this.mVecO1Axis.length;for(v=0;v<t;++v){if(this.isMutipleValueAxis()){for(u=0;u<AB;++u){this.mVecO1Axis[v].GenerateGridLines(w[u],u,AA);}}else{this.mVecO1Axis[v].GenerateGridLines(w[v],v,AA);}}}function D(t,s){var x=this.mChartContextPtr,w,u;I.Reset(t.x,t.y,t.width,t.height);H.Reset(t.x,t.y,t.width,t.height);if(!x.mIsGraphMatrix){if(x.mManualLayoutMode&&!this.mRecalculateFrame){I.ResetRect(this.mPlotArea);}else{x.PutLocation(j.DssGraphFrameLocationNEW,I);}s.splice(0,s.length);this.CalculateChartAreas(I,s);}else{s.splice(0,s.length);s.push(H);}if(x.isUADataAreaOutput()){var v=x.mUniformAxisContext;H.x=v.mDataAreaLeftMargin;H.y=v.mDataAreaTopMargin;H.width=x.mGraphWidth-H.x-v.mDataAreaRightMargin;H.height=x.mGraphHeight-H.y-v.mDataAreaBottomMargin;if(this.mVecO1Axis.length){this.mVecO1Axis[0].TrimAxisPadding(H,false);}I.ResetRect(H);this.mCategoryPlots[0].SetDataArea(H);if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);Q.call(this,H,0);}else{Q.call(this,I,0);this.mVecO1Axis[0].SetDeviceDataArea(H);}return ;}w=this.mChartAreaOptions.chartAreaNumber;for(u=0;u<w;++u){this.mCategoryPlots[u].SetDataArea(s[u]);}if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);for(u=0;u<this.mChartAreaOptions.chartAreaNumber;++u){Q.call(this,s[u],u);}}else{Q.call(this,I,0);for(u=0;u<this.mChartAreaOptions.chartAreaNumber;++u){this.mVecO1Axis[u].SetDeviceDataArea(s[u]);}}}function c(u,t){var y=this.mChartContextPtr,v;D.call(this,u,t);var s=this.mDatasetPtr.showDatalabels();if(s){P.call(this);if(!y.mIsGraphMatrix){var x=new W.Rect2D({Rect2D:u}),w=this.mCategoryPlots.length;for(v=0;v<w;++v){this.mCategoryPlots[v].ReserveAreaForDataLabels(u);}if(u.width!==x.width||u.height!==x.height){D.call(this,u,t);}}else{this.ShouldRotateDataLabel();}}}function G(v,w,AB,AD,s){var u=this.mChartContextPtr,y=u.getAxisTripleId(v),x=u.getUniformAxisInformation(y.mObjectId),AA=x.Metrics,AC=(this.mOrientation===J.OR_VERTICAL?A.AD_Y:A.AD_X),t=new W.ValueAxis({TripleId:y,GraphObjectManager:this,Min:w,Max:AB,PrimaryMetricIndex:AA,LargerGridInterval:AD!==1||(this.mDualAxes&&this.mSplitDualAxes),IsPercent:this.mLayout===N.LO_PERCENT,AxisDirection:AC,IsShown:s,Key:v});if(u.mIsGraphMatrix&&t.mIsUniformAxis===false){var z=x.CondenseEnforced;t.checkCondense(!!z);}return t;}mstrmojo.chart.CategoryPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.CategoryPlotManager",mGraphType:g.DssGraphTypeVertical_Line_Absolute,mLayout:N.LO_ABSOLUTE,mOrientation:J.OR_VERTICAL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mDataAreaSplitX:50,mCategoryPlots:null,mVecO1Axis:null,mVecY1Axis:null,mVecY2Axis:null,init:function p(s){this._super(s);this.mCategoryPlots=[];this.mVecO1Axis=[];this.mVecY1Axis=[];this.mVecY2Axis=[];this.mChartContextPtr=s.GraphObjectManager.mChartContextPtr;},GenerateMapAndList:function o(){var AC=this.mChartAreaOptions,z=AC.chartAreaNumber,y=this.mPlotArea,u=this.mCategoryPlots,x=this.mChartContextPtr,t=this.mGraphObjectManagerList,AQ,AO,s,AT,AR,AL,AP,AA,AE,AH,AW,AB,AK,AD=[],w,AI,AS;var AN="Y1",AF=this.mVecO1Axis,AV=this.mVecY1Axis,AU=this.mVecY2Axis;if(y.width<=0||y.height<=0){return ;}this.LoadProperties();for(AQ=0;AQ<z;++AQ){s=Y.call(this,AQ);s.SetDataset(this.mDatasetPtr);s.mLegendPtr=this.mLegendPtr;u.push(s);AS=AC.seriesDistribution[AQ].length;for(AO=0;AO<AS;++AO){u[AQ].AddSeries(AC.seriesDistribution[AQ][AO]);}s.Init();}var v;if(this.isMutipleValueAxis()){v=x.getAxisTripleId("O1");var AJ=new W.CategoryAxis({TripleId:v,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});AF.push(AJ);for(AQ=0;AQ<z;++AQ){AT=false;AR=false;AL=[0,0];AP=[0,0];AI=u[AQ].GetMinMaxValue(E.VA_Y1,AL[0],AP[0],AT);AL[0]=AI.Min;AP[0]=AI.Max;AT=AI.AreInitialized;if(this.mDualAxes){AI=u[AQ].GetMinMaxValue(E.VA_Y2,AL[1],AP[1],AR);AL[1]=AI.Min;AP[1]=AI.Max;AR=AI.AreInitialized;}u[AQ].SetCategoryAxis(AJ);if(x.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AN="X1";}AA=G.call(this,AN,AL[0],AP[0],z,AT);AV.push(AA);u[AQ].AddValueAxis(AA);if(this.mDualAxes){AN="Y2";if(x.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AN="X2";}AE=G.call(this,AN,AL[1],AP[1],z,AR);AU.push(AE);u[AQ].AddValueAxis(AE);}}}else{AT=false;AR=false;AL=[0,0];AP=[0,0];for(AQ=0;AQ<z;++AQ){AI=u[AQ].GetMinMaxValue(E.VA_Y1,AL[0],AP[0],AT);AL[0]=AI.Min;AP[0]=AI.Max;AT=AI.AreInitialized;if(this.mDualAxes){AI=u[AQ].GetMinMaxValue(E.VA_Y2,AL[1],AP[1],AR);AL[1]=AI.Min;AP[1]=AI.Max;AR=AI.AreInitialized;}v=x.mIsGraphMatrix?x.getAxisTripleId("O1"):new W.TripleId({ObjectId:l.DssGraphO1Body,SeriesId:AQ});AH=new W.CategoryAxis({TripleId:v,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});u[AQ].SetCategoryAxis(AH);AF.push(AH);}if(x.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AN="X1";}AA=G.call(this,AN,AL[0],AP[0],z,AT);AV.push(AA);for(AQ=0;AQ<z;++AQ){u[AQ].AddValueAxis(AA);}if(this.mDualAxes){AN="Y2";if(x.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AN="X2";}AE=G.call(this,AN,AL[1],AP[1],z,AR);AU.push(AE);for(AQ=0;AQ<z;++AQ){u[AQ].AddValueAxis(AE);}}}AW=this.mVecO1Axis.length;AB=this.mVecY1Axis.length;AK=this.mVecY2Axis.length;if(this.mUseDepth){for(AQ=0;AQ<AW;++AQ){AF[AQ].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AQ=0;AQ<AB;++AQ){AV[AQ].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AQ=0;AQ<AK;++AQ){AU[AQ].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}}AS=AF.length;for(AQ=0;AQ<AS;++AQ){AF[AQ].SetDataset(this.mDatasetPtr);}for(AQ=0;AQ<AW;++AQ){t.push(this.mVecO1Axis[AQ]);}for(AQ=0;AQ<AB;++AQ){t.push(this.mVecY1Axis[AQ]);if(this.mDualAxes){t.push(this.mVecY2Axis[AQ]);}}C.Reset(0,0,0,0);b.call(this,y,C);c.call(this,C,AD);w=u.length;for(AQ=0;AQ<w;++AQ){t.push(u[AQ]);u[AQ].GenerateMapAndList();}for(AQ=0;AQ<AW;++AQ){AV[AQ].GenerateMapAndList();}for(AQ=0;AQ<AB;++AQ){AV[AQ].GenerateMapAndList();if(this.mDualAxes){AU[AQ].GenerateMapAndList();}}var AG=x.mIsGraphMatrix,AM=x.isUADataAreaOutput();if(!(AG&&AM)){if(this.mUseDepth){R.call(this);e.call(this,AD);}else{e.call(this,AD);R.call(this);}}},LoadProperties:function V(){var t,u=this.mChartContextPtr;this._super();var s=this.mGraphType=u.mGraphType;if(!(u.mIsTimeSeriesChart)){if(!u.mIsGraphMatrix){t=u.GetProperty(j.DssGraphDepthMode,q);if(t){this.mUseDepth=(t!==B);}t=u.GetProperty(j.DssGraph2DDepth,q);if(t){this.mDepth=t;}t=u.GetProperty(j.DssGraph2DAngle,q);if(t){this.mDepthDirection=t;}}this.mOrientation=u.IsVertical()?J.OR_VERTICAL:J.OR_HORIZONTAL;this.mDualAxes=u.IsDualAxis();}if((s>=g.DssGraphTypeVertical_Area_Percent)&&(s<=g.DssGraphTypeHorizontal_Line_Percent)&&(s%7===0)){this.mLayout=N.LO_PERCENT;}if(this.mLayout!==N.LO_PERCENT&&(s>=g.DssGraphTypeVertical_Bar_DualAxis_Percent&&s<=g.DssGraphTypeHorizontal_Area_DualAxis_Percent)){this.mLayout=N.LO_PERCENT;}},isMutipleValueAxis:function S(){var s=this.mChartAreaOptions;return(this.mOrientation===s.mOrientation);},ReserveAreaCategoryAxis:function F(w,AE){var t=this.mChartContextPtr,v=[],z=[],x,y,AB,AA,u,AD,s,AC;if(!this.isMutipleValueAxis()){this.CalculateChartAreas(w,z);}x=this.mVecO1Axis.length;for(y=0;y<x;++y){if(t.mIsGraphMatrix){k.ResetRect(this.isMutipleValueAxis()?w:z[y]);}else{k=this.isMutipleValueAxis()?new W.Rect2D({Rect2D:w}):new W.Rect2D({Rect2D:z[y]});}this.mVecO1Axis[y].AdjustTitleArea(k);if(t.mIsTimeSeriesChart){this.mVecO1Axis[y].AdjustDataArea(k,0,0,true);}else{AB=this.mOrientation===J.OR_HORIZONTAL?this.mBottomMargin:this.mLeftMargin;AA=this.mOrientation===J.OR_HORIZONTAL?this.mTopMargin:this.mRightMargin;this.mVecO1Axis[y].AdjustDataArea(k,AB,AA);}if(t.mRecalculateFrame){if(this.mOrientation===J.OR_VERTICAL){u=w.x;s=w.width;if(y===0){if(k.x>w.x){u=k.x;s-=(k.x-w.x);}}if(y===this.mVecO1Axis.length-1){if(w.x+w.width>k.x+k.width){s=k.x+k.width-u;}}k.x=u;k.width=s;}else{AD=w.y;AC=w.height;if(y===0){if(k.y>w.y){AD=k.y;AC-=(k.y-w.y);}}if(y===this.mVecO1Axis.length-1){if(w.y+w.height>k.y+k.height){AC=k.y+k.height-AD;}}k.y=AD;k.height=AC;}}v.push(k);}k.ResetRect(v[0]);for(y=1;y<v.length;++y){if(!this.RectangleIntersection(k,v[y],n)){k.Reset(0,0,0,0);break;}k.ResetRect(n);}AE.ResetRect(k);},Draw:function h(){var t=this.mCategoryPlots,v,x,w,s,u;this._super();v=this.mVecY1Axis.length;for(u=0;u<v;++u){this.mVecY1Axis[u].Draw();}x=this.mVecY2Axis.length;for(u=0;u<x;++u){this.mVecY2Axis[u].Draw();}w=this.mVecO1Axis.length;for(u=0;u<w;++u){this.mVecO1Axis[u].Draw();}s=t.length;for(u=0;u<s;++u){t[u].Draw();}},ShouldRotateDataLabel:function U(){var z=this.mChartContextPtr,x=this.mDatasetPtr,s=z.GetGraphMatrixContext(),w=x.showDatalabels(),u=false,y=false;if(w&&z.mIsGraphMatrix&&x.onlyBarDataLabelEnabled()){var t=this.mCategoryPlots[0],v;if(this.mOrientation===J.OR_VERTICAL){v=z.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId);if(v!==undefined&&v!==null){y=v;}if(y){v=z.GetProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId);if(v!==undefined&&v!==null){s.mIsNeedRotateDataLabel=v;return ;}}u=t.ShouldRotateDataLabel();s.mIsNeedRotateDataLabel=u;z.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId,true);z.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId,u);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlotManager","TripleId","Rect2D","RectangleObject","TextObject","Legend","GridChartPlotManager","ValuePlotManager");var W=mstrmojo.chart,R=W.enums,A=R.EnumDSSExtraGraphObject,B=R.EnumGraphMajorType,J=W.ChartContext,X=R.EnumDSSGraphObjectManager,K=X.DssLegend,Y=W.gNullTripleId,C=W.gNullSeriesId,E=W.gNullGroupId;var M=mstrmojo.chart.model,Z=M.enums,D=Z.EnumDSSGraphType,F=Z.EnumDSSGraphProperty,G=Z.EnumDSSGraphObject,U=Z.EnumVariantBool,Q=U.VARIANT_FALSE,a=Z.EnumDSSExtraGraphProperty;function P(g,f){var j=this.mChartContextPtr,e=this.mGraphObjectList,d,b,c;f=f||false;if(!this.isSupportedChartType()||f){d="Graph Type Not Supported";b=new W.TextObject({TripleId:new W.TripleId({ObjectId:A.DssGraphWarningMessage}),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}if(!this.checkDataset()){d="Insufficient Data To Plot";b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphWarningMessage,C,E]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}var h=j.mImageUsage===32;if(h){d=this.mDatasetPtr.GetBannerText();b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphBanner,0,0]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}return false;}mstrmojo.chart.ChartManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.ChartManager",mGraphType:D.DssGraphTypeVertical_Bar_Side_by_Side,mPlotManagers:null,mDatasetPtr:null,mLegendPtr:null,mHighlightLayerObjectPtr:null,mIsTitleShown:false,mIsSubtitleShown:false,mIsFootnoteShown:false,mIsLegendShown:false,mIsExpanded:false,mIsInitialized:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,mAxisLabelsAutoFit:true,init:function T(b){this._super(b);this.mPlotManagers=[];},GenerateMapAndList:function N(){var j=this.mChartContextPtr,f,g,e,h,c,b,d;this.LoadProperties();f=new W.Rect2D({x:0,y:0,width:j.mGraphWidth,height:j.mGraphHeight});if(P.call(this,f)===true){this.mIsInitialized=true;return ;}if(!j.mIsGraphMatrix){g=j.GetProperty(F.DssGraph2ScaleDirection,new W.TripleId({ObjectId:G.DssGraphO1Body,SeriesId:-3}));if(g){this.mDatasetPtr.mReverseGroup=(g!==Q);}else{this.mDatasetPtr.mReverseGroup=false;}e=this.CreateBackground();this.mGraphObjectList.unshift(e);this.AddToMap(e);}h=null;c=null;switch(j.GetGraphMajorType()){case B.GMT_GRID:this.CalculateLayout(f);c=new W.GridChartPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_BOX:case B.GMT_CATEGORY:this.CalculateLayout(f);c=new W.CategoryPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_PIE:break;case B.GMT_SCATTER:case B.GMT_BUBBLE:this.CalculateLayout(f);c=new W.ValuePlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;default:P.call(this,f,true);break;}if(c!==null&&c!==undefined){this.mGraphObjectManagerList.unshift(c);c.SetDataset(this.mDatasetPtr);c.mLegendPtr=this.mLegendPtr;if(j.mIsTimeSeriesChart){this.mRightMargin=0;}c.SetMarginInfo(this.mLeftMargin,this.mRightMargin,this.mTopMargin,this.mBottomMargin);this.mPlotManagers.push(c);b=this.mPlotManagers.length;for(d=0;d<b;++d){this.mPlotManagers[d].GenerateMapAndList();}}this.mIsInitialized=true;},LoadProperties:function L(){var f=this.mChartContextPtr,d,e,c,b;d=f.GetProperty(F.DssGraphType,Y);if(d){this.mGraphType=d;}if(f.mIsTimeSeriesChart||f.mIsGraphMatrix){this.mIsTitleShown=false;this.mIsSubtitleShown=false;this.mIsFootnoteShown=false;this.mIsLegendShown=false;return ;}e=f.GetGraphMajorType();if(e!==B.GMT_3D_CATEGORY&&e!==B.GMT_HISTOGRAM&&e!==B.GMT_BOX){d=f.GetProperty(F.DssGraphShowLegendText,Y);if(d){this.mIsLegendShown=d!==Q;}}d=f.GetProperty(F.DssGraphShowTitle,Y);if(d){this.mIsTitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowSubtitle,Y);if(d){this.mIsSubtitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowfootnote,Y);if(d){this.mIsFootnoteShown=d!==Q;}c=false;if(!f.mManualLayoutMode){c=true;}else{d=f.GetProperty(a.DssGraphInfoRecalculateLegend,Y);if(d){if(d!==Q){c=true;}}}if(c){d=f.GetProperty(a.DssGraphInfoAutosizeHorizontal,Y);b=f.GetProperty(a.DssGraphInfoAutosizeVertical,Y);if(d&&b){this.mIsExpanded=(d!==Q&&b!==Q);}}if(f.mManualLayoutMode){d=f.GetProperty(F.DssGraphAxisAutoFit,new W.TripleId({ObjectId:G.DssGraphO1Body}));if(d){this.mAxisLabelsAutoFit=d!==Q;}if(this.mAxisLabelsAutoFit){f.mRecalculateFrame=true;}}},CreateBackground:function I(){var d=this.mChartContextPtr,c,b;c=new W.TripleId({ObjectId:G.DssGraphBackground,SeriesId:C,GroupId:E});b=new W.Rect2D({x:0,y:0,width:d.mGraphWidth,height:d.mGraphHeight});return new W.RectangleObject({TripleId:c,GraphObjectManager:this,Area:b});},isSupportedChartType:function V(){var c=this.mChartContextPtr,b;b=c.GetGraphMajorType();switch(b){case B.GMT_CATEGORY:case B.GMT_PIE:case B.GMT_BUBBLE:case B.GMT_SCATTER:case B.GMT_GRID:case B.GMT_BOX:return true;default:return false;}},checkDataset:function H(){var c=this.mDatasetPtr.GetSeriesCount(),e=this.mChartContextPtr;if(this.mDatasetPtr.CountMetric()===0&&this.mChartContextPtr.mIsGraphMatrix){var b=this.mDatasetPtr.IsHeaderEmpty(true),d=this.mDatasetPtr.IsHeaderEmpty(false);return(!d||!b);}return true;},CalculateLayout:function S(z){var h=this.mChartContextPtr,AA,t,AE,n,AG,f,v,AC,k,o,l,b,u,p,y,AF,x,e,d,j,q,AB,AD,s,w,c,r,g;AA=0;t=0;if(h.mIsTimeSeriesChart){g=J.sDefaultMarginForTimeSeries;AA=g;t=g;this.mRightMargin=0;}else{if(h.mIsUniformAxisMode&&!(h.mIsEntireChart)){g=J.sDefaultUniformAxisMargin;AA=g;t=g;this.mRightMargin=t;}else{g=J.sDefaultMargin;AA=h.vdHeight(g);t=h.vdWidth(g);this.mRightMargin=t;}}AE=z.x+z.width;n=z.y+z.height;z.x+=t;z.y+=AA;AE-=this.mRightMargin;n-=AA;z.width=AE-z.x;z.height=n-z.y;this.mLeftMargin=t;this.mTopMargin=AA;this.mBottomMargin=AA;if(h.mIsTimeSeriesChart){return ;}AG=null;if(this.mIsTitleShown){f=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultTitlePosition);v=new W.TripleId({ObjectId:G.DssGraphTitle});c=h.GetProperty(F.DssGraphTextContent,v);if(c){x=c;}else{x="Graph Title";}AG=new W.TextObject({TripleId:v,GraphObjectManager:this,rect:f});AG.SetText(x);this.AddToMapAndList(AG);if(!h.mManualLayoutMode||h.mRecalculateFrame){AC=AG.GetBoundingRect();n=z.y+z.height;z.y=AC.y+AC.height+AA;z.height=n-z.y;if(z.height<0){z.height=0;}}if(h.mManualLayoutMode){f=h.GetLocation(F.DssGraphTitleLocation);AG.SetRect(f);AG.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AC);}}}k=null;if(this.mIsSubtitleShown){l=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultSubtitlePosition);o=new W.TripleId({ObjectId:G.DssGraphSubtitle});c=h.GetProperty(F.DssGraphTextContent,o);x=(c===null||c===undefined)?("Graph Subtitle"):c;k=new W.TextObject({TripleId:o,GraphObjectManager:this,rect:l});k.SetText(x);this.AddToMapAndList(k);if(!h.mManualLayoutMode||h.mRecalculateFrame){k.MoveTo(l.x,z.y);b=k.GetBoundingRect();n=z.y+z.height;z.y=b.y+b.height+AA;z.height=n-z.y;if(z.height<0){z.height=0;}}if(h.mManualLayoutMode){l=h.GetLocation(W.DssGraphSubTitleLocation);k.SetRect(l);k.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(W.DssGraphTitleLocation,b);}}}u=null;if(this.mIsFootnoteShown){y=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultFootnotePosition);p=new W.TripleId({ObjectId:G.DssGraphFootnote});c=h.GetProperty(F.DssGraphTextContent,p);if(c===null||c===undefined){x="Graph Footnote";}else{x=c;}u=new W.TextObject({TripleId:p,GraphObjectManager:this,rect:y});u.SetText(x);this.AddToMapAndList(u);if(!h.mManualLayoutMode||h.mRecalculateFrame){AF=u.GetBoundingRect();u.MoveTo(y.x,z.y+z.height-AF.height);z.height=(z.y+z.height-AA-AF.height)-z.y;if(z.height<0){z.height=0;}}if(h.mManualLayoutMode){y=h.GetLocation(F.DssGraphFootnoteLocation);u.SetRect(y);u.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AF);}}}e=h.mGraphWidth;d=h.mGraphHeight;if(this.mIsLegendShown&&!h.mIsGraphMatrix){j=this.mDatasetPtr.GetSeriesCount();if(j===1){q=this.mDatasetPtr.GetSeriesLabel(0,false);if(q===""){this.mIsLegendShown=false;}}}if(this.mIsLegendShown){if(z.height>0){this.mLegendPtr=new W.Legend({TripleId:new W.TripleId({ObjectId:K}),GraphObjectManager:this,DataSet:this.mDatasetPtr,Area:z});this.mLegendPtr.GenerateMapAndList();this.mGraphObjectManagerList.push(this.mLegendPtr);if(!h.mManualLayoutMode||h.mRecalculateFrame){AB=new W.Rect2D({Rect2D:z});this.mLegendPtr.CalculateFrame(t,AA,z);this.mLeftMargin+=z.x-AB.x;this.mRightMargin+=AB.x+AB.width-(z.x+z.width);this.mBottomMargin+=AB.y+AB.height-(z.y+z.height);if(!h.mManualLayoutMode){if(this.mIsExpanded){if(AG!==null&&AG!==undefined){f=h.vdRect(W.gDefaultTitlePosition);AG.SetRect(f);AG.CalculateDeviceRect();h.PutLocation(F.DssGraphTitleLocation,f);}if(k!==null&&k!==undefined){l=h.vdRect(W.gDefaultSubtitlePosition);k.SetRect(l);k.CalculateDeviceRect();h.PutLocation(F.DssGraphSubTitleLocation,l);}if(u!==null&&u!==undefined){y=h.vdRect(W.gDefaultFootnotePosition);u.SetRect(y);u.CalculateDeviceRect();h.PutLocation(F.DssGraphFootnoteLocation,y);}}}}}}if(h.mManualLayoutMode&&!h.mRecalculateFrame){AD=h.mGraphWidth;s=h.mGraphHeight;if(this.mIsExpanded){h.SetGraphSize(e,d);}if(this.mIsExpanded){h.SetGraphSize(AD,s);}}else{if(!this.mChartContextPtr.mIsGraphMatrix){w=15;c=h.GetProperty(F.DssGraphFontSize100,new W.TripleId({ObjectId:G.DssGraphDataText,SeriesId:0}));if(c){w=Math.floor(c/100+0.5);}if(w>this.mTopMargin){r=w-this.mTopMargin;if(r>z.height/10){r=z.height/10;}z.y+=r;z.height-=r;this.mTopMargin=w;}}}},Draw:function O(){var b,d,c;if(!this.mIsInitialized){this.GenerateMapAndList();}b=this.mGraphObjectList.length;if(b>0){this.mGraphObjectList[0].Draw();}d=this.mPlotManagers.length;for(c=0;c<d;++c){this.mPlotManagers[c].Draw();}if(this.mLegendPtr!==null&&this.mLegendPtr!==undefined){this.mLegendPtr.Draw();}for(c=1;c<b;++c){this.mGraphObjectList[c].Draw();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","GenericContext","GraphObjectManager","ChartManager","Point2D","NumberObject","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory","EnumLabelLevelOption","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMajorGraphType","EnumAxisLabelsLocation","EnumGraphMatrixMarkerTypeInChart","EnumFontRotation","EnumRectCompare");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphFillEffect","EnumDSSGraphStockLayout");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var Au=mstrmojo.chart,Q=Au.enums,A6=Q.EnumLayout,BA=Q.EnumMajorGraphType,AY=Q.EnumOrientation,Af=Q.EnumGraphSubType,As=Q.EnumGraphMajorType,k=Q.EnumGraphMatrixMajorGraphType,Ay=Q.EnumAxisDirection,e=Q.EnumAxisLabelsLocation,t=Q.EnumGraphMatrixMajorGraphType,I=Q.EnumFontRotation,Ao=Q.EnumGraphMatrixMarkerTypeInChart,Ak=Q.EnumRectCompare,AR=Q.EnumImageUsage,Y=mstrmojo.hash,Ac=Au.gNullTripleId,An=mstrmojo.chart.model,AX=An.enums,BC=AX.EnumDSSGraphType,BD=AX.EnumDSSGraphProperty,BE=AX.EnumDSSGraphObject,AT=AX.EnumVariantBool,AO=AT.VARIANT_FALSE,Ax=AX.EnumDSSExtraGraphProperty,AV=mstrmojo.chart.common.Utility,AZ=AV.tripleId;var A2=0,Ae=2,X=0;var AE=new Au.Rect2D();var AG=new Au.TripleId();var AM=new Au.ChartAdvFormat();var AS=20;function S(BN){var BO=1,BT=2,BP=4,BS=8;var BR=this.mDatasetPtr.showHideItemsOnAxis(BN),BQ=0;if(BR.axisLabels){BQ=BQ|BP;}if(BR.majorGrids){BQ=BQ|BT;}if(BR.minorGrids){BQ=BQ|BS;}if(BR.axisBody){BQ=BQ|BO;}return BQ;}function Aw(BR){var BQ={HighTrim:0,LowTrim:0,isCaTrim:true};if(this.mUniformAxisPtr){var BP,BS=this.mChartContextPtr,BO=BS.getUniformAxisContext(),BN=BO.CategoryAxis;BP=BR?BN.X:BN.Y;BQ.HighTrim=BP.Trims[1];BQ.LowTrim=BP.Trims[0];}return BQ;}function AC(){var BP={PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};if(this.mUniformAxisPtr){var BO,BR=this.mUniformAxisPtr,BS=this.mChartContextPtr,BN=BS.getUniformAxisContext(),BQ=BN.ValueAxis;switch(BR.Key){case"x2":case"X2":BO=BQ.X2;BP.SecondaryLowTrim=BO.Trims[0];BP.SecondaryHighTrim=BO.Trims[1];break;case"y2":case"Y2":BO=BQ.Y2;BP.SecondaryLowTrim=BO.Trims[0];BP.SecondaryHighTrim=BO.Trims[1];break;case"x":case"x1":case"X":case"X1":BO=BQ.X1;BP.PrimaryLowTrim=BO.Trims[0];BP.PrimaryHighTrim=BO.Trims[1];break;default:BO=BQ.Y1;BP.PrimaryLowTrim=BO.Trims[0];BP.PrimaryHighTrim=BO.Trims[1];break;}}return BP;}function x(BV){var BT=this.mChartContextPtr.GetGraphMatrixContext(),BW=BV.ShapeType||BT.mMarkerShape;BT.mGraphType=this.mGraphType;BT.updateGMGraphTypeWithMarkerShape(BW);if(BV.DataAreaPaddings){BT.UpdateValueAxisPadding(BV.DataAreaPaddings);}if(BV.ColorBy){var BU=BV.ColorBy;BT.mHasColorBy=BU.HasColorBy||false;}if(BV.SizeBy){var BZ=BV.SizeBy;BT.mHasSizeBy=BZ.HasSizeBy||BT.mHasSizeBy;BT.mMaxSizeVal=BZ.Max||BT.mMaxSizeVal;BT.mMinSizeVal=BZ.Min||BT.mMinSizeVal;BT.mCustomScaleForSizeBy=BZ.mCustomScaleForSizeBy||BZ.CustomScaleForSizeBy;}var BQ=this.mChartContextPtr,BY=BQ.GetGraphMajorType();BT.mHasSizeBy=(BY===As.GMT_BUBBLE)||BT.mHasSizeBy;var BO=1,Ba=2;BT.AxisLayout=BV.AxisLayout||(BO|Ba);if(BV.ElementInfo){var BS=BT.mElementsInfo.Max,BP=BT.mElementsInfo.Min,BN=BV.ElementInfo;if(BN.Max){var BX=BN.Max;BS.Mode=BX.Mode||BS.Mode;BS.Size=BX.Size||BS.Size;}if(BN.Min){var BR=BN.Min;BP.Mode=BR.Mode||BP.Mode;BP.Size=BR.Size||BP.Size;}}}function r(BV){var BR=this.mChartContextPtr,BU=BR.getUniformAxisContext();if(BV.UniformAxisPaddings){var BS=BV.UniformAxisPaddings;this.UpdateUniformAxisMargins(BS);if(BR.IsGridChart()===false){var BY=BU.ValueAxis,BP=BY.X1,BO=BY.X2,BX=BY.Y1,BW=BY.Y2;BW.Trims[1]=BS.ySecondaryHighTrim;BO.Trims[1]=BS.xSecondaryHighTrim;BW.Trims[0]=BS.ySecondaryLowTrim;BO.Trims[0]=BS.xSecondaryLowTrim;BX.Trims[1]=BS.yPrimaryHighTrim;BP.Trims[1]=BS.xPrimaryHighTrim;BX.Trims[0]=BS.yPrimaryLowTrim;BP.Trims[0]=BS.xPrimaryLowTrim;BO.perCell=BS.x2PerCell;BW.PerCell=BS.y2PerCell;BX.PerCell=BS.yPerCell;BP.PerCell=BS.xPerCell;}if(BR.IsBubbleChart()===false&&BR.IsScatterChart()===false){var BT=BU.CategoryAxis,BQ=BT.X,BN=BT.Y;BQ.Trims[0]=BS.xCaLowTrim;BQ.Trims[1]=BS.xCaHighTrim;BN.Trims[0]=BS.yCaLowTrim;BN.Trims[1]=BS.yCaHighTrim;}}BU.mIsAxisTitleAndLabelRequired=false;}function BI(BN){switch(BN){case BE.DssGraphY1Body:case BE.DssGraphY2Body:case BE.DssGraphY3Body:case BE.DssGraphY4Body:case BE.DssGraphX1Body:case BE.DssGraphX2Body:return true;}return false;}function AF(){var BN=this.mChartContextPtr.mGraphType;switch(BN){case BC.DssGraphTypeX_Y_Scatter:case BC.DssGraphTypeDualAxis_X_Y_Scatter:case BC.DssGraphTypeX_Y_Scatter_with_Labels:case BC.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case BC.DssGraphTypeBubble:case BC.DssGraphTypeBubble_DualAxis:case BC.DssGraphTypeBubble_With_Labels:case BC.DssGraphTypeBubble_DualAxis_With_Labels:case BC.DssGraphTypeHorizontal_Line_Absolute:case BC.DssGraphTypeHorizontal_Line_Stacked:case BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BC.DssGraphTypeHorizontal_Line_Percent:case BC.DssGraphTypeHorizontal_Bar_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_Stacked:case BC.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BC.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BC.DssGraphTypeHorizontal_Bar_Percent:case BC.DssGraphTypeHorizontal_Bar_Absolute:case BC.DssGraphTypeHorizontal_Area_Absolute:case BC.DssGraphTypeHorizontal_Area_Stacked:case BC.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BC.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BC.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BC.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BC.DssGraphTypeHorizontal_Area_Percent:case BC.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BC.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BC.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function A3(){switch(this.mChartContextPtr.mGraphType){case BC.DssGraphTypeHorizontal_Line_Absolute:case BC.DssGraphTypeHorizontal_Line_Stacked:case BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BC.DssGraphTypeHorizontal_Line_Percent:case BC.DssGraphTypeHorizontal_Bar_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_Stacked:case BC.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BC.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BC.DssGraphTypeHorizontal_Bar_Percent:case BC.DssGraphTypeHorizontal_Bar_Absolute:case BC.DssGraphTypeHorizontal_Area_Absolute:case BC.DssGraphTypeHorizontal_Area_Stacked:case BC.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BC.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BC.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BC.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BC.DssGraphTypeHorizontal_Area_Percent:case BC.DssGraphTypeGridChart:case BC.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BC.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BC.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function At(BN){if(BN){return AF.call(this)?1:0;}return A3.call(this)?0:1;}function Ad(BN){BN.mDataAreaBottomMargin=BN.mDataAreaTopMargin=BN.mDataAreaRightMargin=BN.mDataAreaLeftMargin=0;}function f(BP,BQ){if(At.call(this,BP,BQ)===0){return true;}var BR=this.mChartContextPtr,BN=BR.getValueAxisKeyFromLayout(BP,BQ),BO=BR.getUniformAxisContext().ValueAxis;return BO[BN].Metrics.length>0;}function Az(){var BO=this.mChartContextPtr,BN;if(BO.mIsGraphMatrix){BO.mAbsoluteFontLineSize=true;BO.mManualLayoutMode=false;this.mFontAntiAlias=true;BO.mIsFontAntiAlias=this.mFontAntiAlias;return ;}if(!BO.mIsTimeSeriesChart){BN=BO.GetProperty(BD.DssGraphLockFontSize,Ac);if(BN){BO.mAbsoluteFontLineSize=(BN!==AO);}else{BO.mAbsoluteFontLineSize=true;}BN=BO.GetProperty(BD.DssGraphSeriesByColumn,Ac);if(BN){this.mDatasetPtr.mSeriesByColumn=(BN!==AO);}else{this.mDatasetPtr.mSeriesByColumn=true;}}BN=BO.GetProperty(BD.DssGraphAutoArrange,Ac);if(BN){BO.mManualLayoutMode=(BN===AO);if(BN===AO){BN=BO.GetProperty(Ax.DssGraphInfoRecalculateChartFrame,Ac);if(BN){BO.mRecalculateFrame=(BN!==AO);}else{BO.mRecalculateFrame=false;}}}else{BO.mManualLayoutMode=false;}BN=BO.GetProperty(BD.DssGraphFontAntiAlias,Ac);if(BN){this.mFontAntiAlias=BN;}else{this.mFontAntiAlias=true;}BO.SetFontAntiAlias(this.mFontAntiAlias);}function A8(BQ,BP,BR,BO){BP=(BP!==undefined)?BP:-1;BR=(BR!==undefined)?BR:true;this.mAxisLayoutHighPadding=0;this.mAxisLayoutLowPadding=0;if(f.call(this,BQ,BR)===false){BO.CanSkip=true;return ;}var BS=this.mChartContextPtr;BO.IsPrimary=BR;BO.MaxLabelLength=BP;var BN=BS.getUniformAxisContext();BN.mIsAxisTitleAndLabelRequired=true;BS.mIsEntireChart=false;Az.call(this);if(f.call(this,BQ,BR)===false){BO.CanSkip=true;}}function BM(){this.mAxisLayoutHighPadding=this.mUniformAxisPtr.mHighTrim||0;this.mAxisLayoutLowPadding=this.mUniformAxisPtr.mLowTrim||0;}function AQ(BR,BQ,BN,BS,BP){if(this.mVisualMode===A2){BP.CanSkip=true;return ;}if(BR){if(BQ<=AS&&AF.call(this)){BP.CanSkip=true;return ;}}else{if(BN<=AS&&A3.call(this)===false){BP.CanSkip=true;return ;}}var BT=this.mChartContextPtr;BT.SetGraphSize(BQ,BN);BT.mIsEntireChart=false;var BO=BT.getUniformAxisContext();BO.mIsAxisTitleAndLabelRequired=true;if(BS===undefined){BS=true;}BP.IsPrimary=BS;if(BP===undefined){BP={SkipLayout:false};}else{if(BP&&BP.SkipLayout){BP.SkipLayout=BP.SkipLayout&&(this.mUniformAxisPtr!==null);}else{BP.SkipLayout=false;}}BT.populateCanvas();}function a(BO,BV){var BP=200,BS=201,BN=202,BY=4,BQ=1,BZ=24,BR=this.mChartContextPtr,BX=BR.GetGraphMatrixContext(),BT=BR.mGraphType;BR.mGraphType=BO;var BW=BR.GetGraphMajorType(),BU=BX.isCombinationChart()||BV===203;if(BV===BP){if(BW===As.GMT_CATEGORY){if(BR.IsBarChart()){switch(BO){case BC.DssGraphTypeVertical_Bar_Absolute:case BC.DssGraphTypeVertical_Bar_Side_by_Side:BO=BC.DssGraphTypeVertical_Line_Absolute;break;case BC.DssGraphTypeVertical_Bar_Stacked:BO=BC.DssGraphTypeVertical_Line_Stacked;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Absolute:BO=BC.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Stacked:BO=BC.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Absolute:BO=BC.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Stacked:BO=BC.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BC.DssGraphTypeVertical_Bar_Percent:BO=BC.DssGraphTypeVertical_Line_Percent;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Percent:BO=BC.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Bar_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeHorizontal_Line_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeHorizontal_Bar_Absolute:case BC.DssGraphTypeHorizontal_Bar_Side_by_Side:BO=BC.DssGraphTypeHorizontal_Line_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;}}else{if(BR.IsAreaChart()){switch(BO){case BC.DssGraphTypeVertical_Area_Absolute:BO=BC.DssGraphTypeVertical_Line_Absolute;break;case BC.DssGraphTypeVertical_Area_Stacked:BO=BC.DssGraphTypeVertical_Line_Stacked;break;case BC.DssGraphTypeVertical_Area_BiPolar_Absolute:BO=BC.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BC.DssGraphTypeVertical_Area_BiPolar_Stacked:BO=BC.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BC.DssGraphTypeVertical_Area_DualAxis_Absolute:BO=BC.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BC.DssGraphTypeVertical_Area_DualAxis_Stacked:BO=BC.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BC.DssGraphTypeVertical_Area_Percent:BO=BC.DssGraphTypeVertical_Line_Percent;break;case BC.DssGraphTypeHorizontal_Area_Absolute:BO=BC.DssGraphTypeHorizontal_Line_Absolute;break;case BC.DssGraphTypeHorizontal_Area_Stacked:BO=BC.DssGraphTypeHorizontal_Line_Stacked;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BC.DssGraphTypeHorizontal_Area_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeVertical_Area_DualAxis_Percent:BO=BC.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Percent:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}else{if(BV===BS||BV===BN){if(BR.IsAreaChart()){switch(BO){case BC.DssGraphTypeVertical_Area_Absolute:BO=BC.DssGraphTypeVertical_Line_Absolute;break;case BC.DssGraphTypeVertical_Area_Stacked:BO=BC.DssGraphTypeVertical_Line_Stacked;break;case BC.DssGraphTypeVertical_Area_BiPolar_Absolute:BO=BC.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BC.DssGraphTypeVertical_Area_BiPolar_Stacked:BO=BC.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BC.DssGraphTypeVertical_Area_DualAxis_Absolute:BO=BC.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BC.DssGraphTypeVertical_Area_DualAxis_Stacked:BO=BC.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BC.DssGraphTypeVertical_Area_Percent:BO=BC.DssGraphTypeVertical_Line_Percent;break;case BC.DssGraphTypeHorizontal_Area_Absolute:BO=BC.DssGraphTypeHorizontal_Line_Absolute;break;case BC.DssGraphTypeHorizontal_Area_Stacked:BO=BC.DssGraphTypeHorizontal_Line_Stacked;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BC.DssGraphTypeHorizontal_Area_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeVertical_Area_DualAxis_Percent:BO=BC.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Percent:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BR.IsBarChart()){switch(BO){case BC.DssGraphTypeVertical_Bar_Absolute:case BC.DssGraphTypeVertical_Bar_Side_by_Side:BO=BC.DssGraphTypeVertical_Line_Absolute;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Stacked:BO=BC.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BC.DssGraphTypeVertical_Bar_Stacked:BO=BC.DssGraphTypeVertical_Line_Stacked;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Stacked:BO=BC.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BC.DssGraphTypeVertical_Bar_Percent:BO=BC.DssGraphTypeVertical_Line_Percent;break;case BC.DssGraphTypeHorizontal_Bar_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case BC.DssGraphTypeVertical_Bar_BiPolar_Absolute:BO=BC.DssGraphTypeVertical_Bar_BiPolar_Absolute;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BC.DssGraphTypeVertical_Bar_DualAxis_Absolute:BO=BC.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_Absolute;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Percent:BO=BC.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BV===BY||BV===BQ||BV===BZ){if(BR.IsAreaChart()){switch(BO){case BC.DssGraphTypeVertical_Area_Absolute:BO=BC.DssGraphTypeVertical_Line_Absolute;break;case BC.DssGraphTypeVertical_Area_Stacked:BO=BC.DssGraphTypeVertical_Line_Stacked;break;case BC.DssGraphTypeVertical_Area_BiPolar_Absolute:BO=BC.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BC.DssGraphTypeVertical_Area_BiPolar_Stacked:BO=BC.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BC.DssGraphTypeVertical_Area_DualAxis_Absolute:BO=BC.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BC.DssGraphTypeVertical_Area_DualAxis_Stacked:BO=BC.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BC.DssGraphTypeVertical_Area_Percent:BO=BC.DssGraphTypeVertical_Line_Percent;break;case BC.DssGraphTypeHorizontal_Area_Absolute:BO=BC.DssGraphTypeHorizontal_Line_Absolute;break;case BC.DssGraphTypeHorizontal_Area_Stacked:BO=BC.DssGraphTypeHorizontal_Line_Stacked;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BC.DssGraphTypeHorizontal_Area_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeVertical_Area_DualAxis_Percent:BO=BC.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Percent:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BR.IsBarChart()){switch(BO){case BC.DssGraphTypeVertical_Bar_Side_by_Side:case BC.DssGraphTypeVertical_Bar_Absolute:BO=BC.DssGraphTypeVertical_Line_Absolute;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Absolute:case BC.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BO=BC.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Absolute:case BC.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BO=BC.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_Side_by_Side:case BC.DssGraphTypeHorizontal_Bar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case BC.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case BC.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Stacked:BO=BC.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BC.DssGraphTypeVertical_Bar_Stacked:BO=BC.DssGraphTypeVertical_Line_Stacked;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Stacked:BO=BC.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BC.DssGraphTypeVertical_Bar_Percent:BO=BC.DssGraphTypeVertical_Line_Percent;break;case BC.DssGraphTypeHorizontal_Bar_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Percent:BO=BC.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BU){if(BR.IsBarChart()){switch(BO){case BC.DssGraphTypeVertical_Bar_Absolute:case BC.DssGraphTypeVertical_Bar_Side_by_Side:BO=BC.DssGraphTypeVertical_Line_Absolute;break;case BC.DssGraphTypeVertical_Bar_Stacked:BO=BC.DssGraphTypeVertical_Line_Stacked;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Absolute:BO=BC.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Stacked:BO=BC.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BC.DssGraphTypeVertical_Bar_DualAxis_Absolute:BO=BC.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Stacked:BO=BC.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BC.DssGraphTypeVertical_Bar_Percent:BO=BC.DssGraphTypeVertical_Line_Percent;break;case BC.DssGraphTypeHorizontal_Bar_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeHorizontal_Bar_Absolute:case BC.DssGraphTypeHorizontal_Bar_Side_by_Side:BO=BC.DssGraphTypeHorizontal_Line_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BC.DssGraphTypeHorizontal_Line_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Percent:BO=BC.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BR.IsAreaChart()){switch(BO){case BC.DssGraphTypeVertical_Area_Absolute:BO=BC.DssGraphTypeVertical_Line_Absolute;break;case BC.DssGraphTypeVertical_Area_Stacked:BO=BC.DssGraphTypeVertical_Line_Stacked;break;case BC.DssGraphTypeVertical_Area_BiPolar_Absolute:BO=BC.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BC.DssGraphTypeVertical_Area_BiPolar_Stacked:BO=BC.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BC.DssGraphTypeVertical_Area_DualAxis_Absolute:BO=BC.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BC.DssGraphTypeVertical_Area_DualAxis_Stacked:BO=BC.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BC.DssGraphTypeVertical_Area_Percent:BO=BC.DssGraphTypeVertical_Line_Percent;break;case BC.DssGraphTypeHorizontal_Area_Absolute:BO=BC.DssGraphTypeHorizontal_Line_Absolute;break;case BC.DssGraphTypeHorizontal_Area_Stacked:BO=BC.DssGraphTypeHorizontal_Line_Stacked;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BO=BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BC.DssGraphTypeHorizontal_Area_Percent:BO=BC.DssGraphTypeHorizontal_Line_Percent;break;case BC.DssGraphTypeVertical_Area_DualAxis_Percent:BO=BC.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Percent:BO=BC.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}}}BR.mGraphType=BT;return BO;}function H(BR,BQ,BO){var BN=BO.length,BP;for(BP=0;BP<BN;++BP){if(BO[BP].si===BR&&BO[BP].gi===BQ){return true;}}return false;}function p(BQ,Bb,BV,BT,BS,Ba){var Bc={},BR=this.mChartContextPtr,BU,BY;if(BR.mCanvas===null){BR.populateCanvas();}BQ=BQ||1014;Bb=Bb||694;Bc.GW=BQ;Bc.GH=Bb;BR.SaveSurfaceToObject(Bc);var BZ=this.mChartContextPtr.GetProperty(BD.DssGraphSeriesByColumn,Ac),BX,BN;if(BZ&&BZ!==AO){BX=BT;BN=BV;}else{BX=BV;BN=BT;}var BO=[];BY=BO.length;if(BY>0){Bc.Areas=[];for(BU=0;BU<BY;++BU){var BP={};var BW=new Au.TripleId({ObjectId:BO[BU].GetObjectID(),SeriesId:BO[BU].GetSeriesID(),GroupId:BO[BU].GetGroupID()});if(BW.mObjectId!==BE.DssGraphRiser&&BW.mObjectId!==BE.DssGraphDataMarker&&BW.mObjectId!==BE.DssGraphPieSlice&&BW.mObjectId!==BE.DssGraphLegendMarker&&BW.mObjectId!==BE.DssGraphLegendText&&BW.mObjectId!==BE.DssGraph2DO1Label){continue;}if(!H.call(this,BW.mSeriesId,BW.mGroupId,Ba)){continue;}BP.OID=BW.mObjectId;BP.SID=BW.mSeriesId;BP.GID=BW.mGroupId;BP.Shape=BO[BU].GetShape();BP.Coords=BO[BU].GetCoordinates();Bc.Areas.push(BP);}}if(Ba.length>0){BY=Ba.length;Bc.Selected=[];for(BU=0;BU!==BY;++BU){Bc.Selected.push(Ba[BU].sid);Bc.Selected.push(Ba[BU].gid);}}return Bc;}function B(BS){if(BS){var BR=this.mChartContextPtr,BP=this.mChartManagerPtr;if(!(BR&&BP&&BR.mIsGraphMatrix)){return ;}if(BR.mPartialRendering&&(BR.IsBubbleChart()||BR.IsScatterChart())){var BO=BP.GetGraphObjectManager(Au.PlotId0),BN,BQ=false;if(BO&&BO.waitingList){BN=BO.waitingList;if(BQ){BS.hiddenItems=BS.hiddenItems||[];BN.forEach(function(BT){BS.hiddenItems.push({x:BT.Position.x,y:BT.Position.y,shp:BT.Shape,sz:BT.Size,id:null});});}else{BS.hiddenItems=BO.waitingList;delete BO.waitingList;}}}}}function N(){this.mDatasetPtr.finalize();var BN=this.mChartManagerPtr;BN.Draw();}function A4(){var BN=this.mChartContextPtr;if(BN.GetGraphMatrixGraphMajorType()===t._AREA&&BN.IsVertical()){return 1;}return 2;}function AK(BO,BQ,BP,BN){if(BP===null||BP===undefined){return ;}if(BN){if(BQ){BP.ResetAxisPadding();BP.SetDataset(this.mDatasetPtr);BP.AdjustTitleArea(BO);BP.AdjustDataArea(BO,X,X,false);}else{BP.TrimAxisPadding(BO);BP.ReserveTitleAndLabels(BO,X,X);BP.AdjustDeviceDataArea(BO,false);}}else{if(BQ){BP.TrimAxisPadding(BO,false);BP.SetDeviceDataArea(BO);BP.ResetAxisPadding();BP.GenerateMapAndList();}else{BP.TrimAxisPadding(BO,false);BP.SetDeviceDataArea(BO);BP.AdjustDeviceDataArea(BO,true);BP.UpdateTitleAndLabelArea(BO);BP.GenerateGridLinesEx();}}}function C(BO,BV,BU){var BP=this.mChartContextPtr;if(!BP.mIsGraphMatrix){return null;}var BQ=null;if(BV){BQ=this.mUniformAxisPtr;}else{var BN=[BE.DssGraphO1Body,BE.DssGraphX1Body,BE.DssGraphY1Body,BE.DssGraphY2Body];if(!BU&&!BP.IsDualAxis()){BU=true;}if(BP.GetGraphType()===BC.DssGraphTypeGridChart){var BR=new Au.CategoryAxisInfo(),BT=this.mDatasetPtr.mSeriesByColumn;if(!BO){BR.ToY(!BT);}else{BR.ToX(BT);}AZ.reset(AG,BR.mId.mObjectId,BR.mId.mSeriesId,BR.mId.mGroupId);}else{var BS;if(BP.IsVertical()){BS=BO?0:2;}else{BS=BO?2:0;}if(!BU){BS++;}AZ.reset(AG,BN[BS],0,-3);}BQ=this.mChartManagerPtr.GetGraphObjectManager(AG,true);}return BQ;}function BG(BP){var BU=this.mChartContextPtr,BN=false;if(BU.mIsTimeSeriesChart){BN=true;}else{var BR=BU.GetProperty(BD.DssGraph2DOrdSpaceMode,Au.gNullTripleId);if(BR){BN=BR;}}var BO,BQ=BU.GetGraphType();if(BQ>=BC.DssGraphTypeVertical_Line_Absolute&&BQ<=BC.DssGraphTypeHorizontal_Line_Percent){BO=true;}var BT=this.mDatasetPtr.GetGroupCount(),BS=(BT<=1&&BO);BP.mAxisCross=(BN&&BO&&!BS);}function AN(BN,BT,BU){var BS=BT[BN.toUpperCase()],BP=BS.CondenseLabel,BQ=BU.PrimaryMetricIndex,BR=BQ.length>=1?BQ[0]:-1,BO=BP[BR],BV=BU.getCondenseStatus();if(BO!==null&&BO!==undefined){if(BV!==undefined){if(BV!==BO){BU.checkCondense(BO);}}}}function AP(BU,BX){BX=(BX!==undefined)?BX:true;var Bg="X1",Be="X1",BR=C.call(this,BU,true,BX),BS=0,Bc=BU?Ay.AD_X:Ay.AD_Y,BP=this.mChartContextPtr,BW=BP.getUniformAxisContext(),BV=BW.ValueAxis;var BY=At.call(this,BU,BX)===BS,Ba,Bb,BQ,Bd,BZ;if(BR){if(BY===false){BZ=BR.getCondenseStatus();if(BZ===null){Ba=Bg;AN.call(this,Ba,BV,BR);}}return BR;}var BT=1;if(BY){var BN=BP.GetGraphType();if(BN===BC.DssGraphTypeGridChart){var Bf=this.mDatasetPtr.mSeriesByColumn;if(BU){Be=!Bf?"O1":"O2";}else{Be=Bf?"O1":"O2";Bg="Y1";}}else{Be="O1";if(!BU){Bg="Y1";}}if(Be==="O1"){BP.caKeyMap.c1=Bg;}else{BP.caKeyMap.c2=Bg;}BR=this.mUniformAxisPtr=new Au.CategoryAxis({TripleId:BP.getAxisTripleId(Be),mChartContextPtr:this.mChartContextPtr,GraphObjectManager:this.mChartManagerPtr,AxisLabelsLocation:e.ALL_BOTTOM,AxisDirection:Bc,IsUA:true});BG.call(this,BR);Bb=S.call(this,Bg);BR.SetIntegrity(Bb);}else{if(!BU){Bg="Y1";Be="Y1";}var BO=BU?BV.X1:BV.Y1;if(BX===false){Bg=BU?"X2":"Y2";BO=BV[Bg];Be=BU?"X2":"Y2";}BQ=BO.Metrics;BR=this.mUniformAxisPtr=new Au.ValueAxis({mChartContextPtr:this.mChartContextPtr,TripleId:BP.getAxisTripleId(Be),GraphObjectManager:this.mChartManagerPtr,Min:BO.Min,Max:BO.Max,LargerGridInterval:false,IsPercent:BP.IsPercentChart(),AxisDirection:Bc,IsShown:true,PrimaryMetricIndex:BQ,IsUA:true});Ba=Bg;AN.call(this,Ba,BV,BR);Bd=BV[Ba.toUpperCase()];if(Bd.Valid===false){BR.SetIntegrity(BT);}else{Ba=Bg;if(Ba==="x"){Ba="X1";}Bb=S.call(this,Ba);BR.SetIntegrity(Bb);}}BR.mIsUniformAxis=true;BR.Key=Bg;return BR;}function AH(BV,BU,BN,BQ){var BP,BR,BT,BO=this.mChartContextPtr,BS=BO.getUniformAxisContext();if(BU===false){if(BV){BP=BN?"X1":"Y1";}else{BP=BN?"X2":"Y2";}BR=BS.ValueAxis[BP];BR.Trims[0]=BQ.mLowTrim||0;BR.Trims[1]=BQ.mHighTrim||0;}else{BP=BN?"X":"Y";BT=BS.CategoryAxis[BP];BT.Trims[0]=BQ.mLowTrim||0;BT.Trims[1]=BQ.mHighTrim||0;}}function L(BO,BS,BQ,BR){if(BR===undefined){BR=true;}this.mChartContextPtr.resetCanvas();this.mDatasetPtr.finalize();var BP=AP.call(this,BS,BR);BP.SetDeviceDataArea(BO);AK.call(this,BO,BQ,BP,false);BP.resetRestrictSpace();AH.call(this,BR,BQ,BS,BP);var BN=At.call(this,BS,BR)===1;if(BN){this.mDatasetPtr.saveShownLabels(BP);}BP.Draw();}function F(BS,BT,Ba){var BQ=this.mChartContextPtr,BU=BQ.mDataset,Bc,BX=BQ.getUniformAxisContext(),Bb=BX.ValueAxis,BP=BT?"X":"Y",BZ;BP+=Ba?"1":"2";BZ=Bb[BP].Max;var BW=true;var BO=BU.showDatalabels();if(BO){BW=(BU.dataLabelStyle===2);}var BN=BZ,BV,BY=null;if(BW){AM.restore();this.mDatasetPtr.getValueAxisNumberFormat(AM,BS);var BR=new Au.NumberObject({TripleId:new Au.TripleId({ObjectId:BE.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,Number:BN,NumberFormat:AM,GraphCollectionObject:BY,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(BR){BV=BR.mText;}Bc=BR;}else{BV=BU.GetTextLabel(0,0);Bc=new Au.TextObject({TripleId:new Au.TripleId({ObjectId:BE.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,GraphCollectionObject:BY});}if(Bc){Bc.SetText(BV);}return Bc;}function Aa(BO){var BN={};switch(BO){case BC.DssGraphTypeVertical_Area_Absolute:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Area_Stacked:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Area_BiPolar_Absolute:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeVertical_Area_BiPolar_Stacked:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeVertical_Area_DualAxis_Absolute:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Area_DualAxis_Stacked:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Area_Percent:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Area_Absolute:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Area_Stacked:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Area_Percent:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Bar_Side_by_Side:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_CLUSTER;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Bar_Stacked:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_CLUSTER;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Stacked:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_CLUSTER;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Stacked:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeVertical_Bar_Percent:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Bar_Side_by_Side:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_CLUSTER;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Bar_Stacked:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_CLUSTER;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_CLUSTER;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeHorizontal_Bar_Percent:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Line_Absolute:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Line_Stacked:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Line_BiPolar_Absolute:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeVertical_Line_BiPolar_Stacked:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeVertical_Line_DualAxis_Absolute:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Line_DualAxis_Stacked:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Line_Percent:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Line_Absolute:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Line_Stacked:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Line_BiPolar_Absolute:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeHorizontal_Line_BiPolar_Stacked:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeHorizontal_Line_DualAxis_Absolute:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Line_DualAxis_Stacked:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_STACKED;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Line_Percent:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Bullet:case BC.DssGraphTypeVertical_Bar_Absolute:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeHorizontal_Bullet:case BC.DssGraphTypeHorizontal_Bar_Absolute:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_NULL;break;case BC.DssGraphTypeVertical_Bar_BiPolar_Absolute:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Absolute:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_BIPOLAR;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_ABSOLUTE;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Area_DualAxis_Percent:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Area_DualAxis_Percent:BN.mMajorGraphType=BA.MGT_AREA;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Bar_DualAxis_Percent:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BN.mMajorGraphType=BA.MGT_BAR;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeVertical_Line_DualAxis_Percent:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_VERTICAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;case BC.DssGraphTypeHorizontal_Line_DualAxis_Percent:BN.mMajorGraphType=BA.MGT_LINE;BN.mLayout=A6.LO_PERCENT;BN.mOrientation=AY.OR_HORIZONTAL;BN.mGraphSubType=Af.GST_DUALAXIS;break;}switch(BN.mGraphSubType){case Af.GST_NULL:BN.mDualAxes=false;BN.mSplitDualAxes=false;break;case Af.GST_DUALAXIS:BN.mDualAxes=true;BN.mSplitDualAxes=false;break;case Af.GST_BIPOLAR:BN.mDualAxes=true;BN.mSplitDualAxes=true;break;}return BN;}function Al(BR,Bp,BQ,BZ,Bk){var BT=this.mChartContextPtr,Bd=this.mDatasetPtr,Bj,Bh=BT.getUniformAxisContext(),BY=this.mUniformAxisPtr,BU=new Au.Rect2D(),BW=false,Bm,BP,Bf,Ba,BV,Bc,Bb,BX,Bg,BS,BO,Bn;BU.ResetRect(BR);Bj=BT.GetProperty(Ax.DSSGraphMatrixDataLabelRotated,Au.gNullTripleId);var Be=Bd.showDatalabels();if(Be&&BT.IsBarChart()&&Bj!==null){var Bi=Bj,Bo=Bh.ValueAxis,Bl=BZ?"X":"Y";Bl+=Bk?"1":"2";Bm=Bo[Bl].Max;BO=F.call(this,Bp,BZ,Bk);if(BZ){BO.GetFormatFont().mFontRotation=I.FR_NORMAL;}else{var BN=Aa(BT.GetGraphType());if(BN.mLayout===A6.LO_CLUSTER){Bi=true;}if(Bi){BO.GetFormatFont().mFontRotation=I.FR_90;}else{BO.GetFormatFont().mFontRotation=I.FR_NORMAL;}}BP=BO.GetBoundingRect();Bf=5;Ba=BY.GetMaxTick();BV=BY.GetMinTick();Bc=BY.GetPositionByValue(Ba);Bb=BY.GetPositionByValue(BV);BX=BY.GetPositionByValue(Bm);if(BZ){if(BQ-BX<Bf*2+BP.width){BS=Bf*2+BP.width;Bg=BQ-BS;Bn=(Bg>Bb);if(Bn&&BS/(Bc-Bb)<0.2){BU.width-=BS;BW=true;BR.ResetRect(BU);BY.dataLabelPadding=BS;}}}else{if(Bm>0&&BX<Bf*2+BP.height){BS=Bf*2+BP.height;Bg=BS;Bn=(Bg>BX);if(Bn&&BS/(Bb-Bc)<0.2){BU.y+=BS;BU.height-=BS;BW=true;BR.ResetRect(BU);BY.dataLabelPadding=BS;}}}}return BW;}function A9(BP,BO,BN,BQ){return Al.call(this,BP,BO,BN,true,BQ);}function P(BP,BO,BN,BQ){return Al.call(this,BP,BO,BN,false,BQ);}function Z(BR,BT,BS){var BP=false,BO=false,BN=Ak.NONE,BQ=this.mUniformAxisSpace;if(BT<0||BS<0){BQ.width=BT;BQ.height=BS;return BN;}BP=BT===BQ.width;BO=BS===BQ.height;if(BP&&BO){BN=Ak.KeepBoth;}else{if(BP){BN=BS>BQ.height?Ak.ExpandY:Ak.ShrinkY;}else{if(BO){BN=BT>BQ.width?Ak.ExpandX:Ak.ShrinkX;}else{BN=Ak.NONE;if(BR){BN=BT>BQ.width?Ak.ExpandX:Ak.ShrinkX;}else{BN=BS>BQ.height?Ak.ExpandY:Ak.ShrinkY;}}}}BQ.width=BT;BQ.height=BS;return BN;}function E(BO,BN){var BP=this.mChartContextPtr;if(this.mInitialized){return false;}if(BP.GetGraphMajorType()===As.GMT_HISTOGRAM){this.mDatasetPtr.mIsForHistogram=true;}BP.SetGraphSize(BO,BN);Az.call(this);this.mChartManagerPtr=new Au.ChartManager({mTripleId:Au.ManagerId,mDatasetPtr:this.mDatasetPtr,mChartContextPtr:BP});this.mChartManagerPtr.GenerateMapAndList();this.mInitialized=true;return true;}function z(BN){switch(BN){case BC.DssGraphTypeVertical_Area_Absolute:case BC.DssGraphTypeVertical_Area_Stacked:case BC.DssGraphTypeVertical_Area_BiPolar_Absolute:case BC.DssGraphTypeVertical_Area_BiPolar_Stacked:case BC.DssGraphTypeVertical_Area_DualAxis_Absolute:case BC.DssGraphTypeVertical_Area_DualAxis_Stacked:case BC.DssGraphTypeVertical_Area_Percent:case BC.DssGraphTypeHorizontal_Area_Absolute:case BC.DssGraphTypeHorizontal_Area_Stacked:case BC.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BC.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BC.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BC.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BC.DssGraphTypeHorizontal_Area_Percent:case BC.DssGraphTypeD3_Connect_Group_Areas:case BC.DssGraphTypeD3_Connect_Group_Ribbons:case BC.DssGraphTypeD3_Connect_Series_Areas:case BC.DssGraphTypeD3_Connect_Series_Ribbons:case BC.DssGraphTypeD3_Surface:case BC.DssGraphTypeD3_Surface_with_Sides:case BC.DssGraphTypeD3_Honeycomb_Surface:return 2;default:return 1;}}function u(BX,BV,BN,BT){var BW=BX?BT:BN,BU=BX?BN:BT,BO=BN,BR=true,BP,BS,BQ=AP.call(this,BX,BV);BS=BQ.resizeAction=Z.call(this,BX,BW,BU);if(BS===Ak.KeepBoth){return BQ;}if(BN>=0){BQ.resetRestrictSpace(this.mUniformAxisSpace);}if(BX){BP=this.isAxisLabelRotated(BX,BV);if(BP){if(!(BS===Ak.ShrinkX||BS===Ak.ShrinkY||BS===Ak.ExpandY)){BO=-1;BR=false;}}else{if(BQ.getLabelRotation()===I.FR_NORMAL&&BQ.resizeAction===Ak.ExpandX){BO=BT;BR=false;}else{BO=-1;BR=false;}}}BQ.updateMaxLabelLength(BO,BR);return BQ;}function Aj(){if(this.mUniformAxisSpace===null){this.mUniformAxisSpace={width:0,height:0,x:0,y:0};this.mUniformAxisSpace.width=-1;}}mstrmojo.chart.ChartImpl=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.chart.ChartImpl",mFontAntiAlias:true,mDatasetPtr:null,mFormatManager:null,mChartManagerPtr:null,mOldChartManager:null,mChartContextPtr:null,mInitialized:false,mUniformAxisSpace:null,mUniformAxisPtr:null,mVisualMode:null,init:function Ab(BN){this._super(BN);this.mDatasetPtr=this.mDatasetPtr||BN.DataSet||null;this.mChartContextPtr=this.addDisposable(new Au.GenericContext(BN));this.mFormatManager=this.mFormatManager||BN.FormatManager||null;this.mVisualMode=Ae;},SetData:function AL(BO){var BN=this.mDatasetPtr=BO;this.mChartContextPtr.mDataset=BO;BN.SetFormatManager(this.mFormatManager);},GetOptions:function w(BN,BR,BO,BQ){var BP,BS=AZ.create(BN,BR,BO);BP=this.mChartContextPtr.GetProperty(BQ,BS);if(BP){return BP;}switch(BQ){case BD.DssGraphAutoArrange:return{Value:this.mChartContextPtr.mManualLayoutMode,IsValid:true};case BD.DssGraphType:case BD.DssGraphEnhancedSeriesEffect:case BD.DssGraphCurvedLines:case BD.DssGraphFontAntiAlias:case BD.DssGraphInfoSuppressLastLevel:case BD.DssGraphInfoIncludeSubtotal:case BD.DssGraphInfoNestedLabel:case BD.DssGraphInfoNestedLabelBracket:case BD.DssGraph2DSplitYAutomatic:case BD.DssGraphAxisNumberFormat:return{Value:this.mChartContextPtr.GetProperty(BQ,BS),IsValid:true};case BD.DssGraph2ScaleDirection:if(BN===BD.DssGraphO1Body){return{Value:this.mDatasetPtr.mReverseGroup,IsValid:true};}break;case BD.DssGraphSeriesByColumn:return{Value:this.mDatasetPtr.mSeriesByColumn,IsValid:true};}return{IsValid:false};},OnRectangleSelection:function l(BN,BO){var BQ=[],BR,BS=this.mChartManagerPtr,BP=new Au.Rect2D({x:BN.x,y:BN.y,width:BN.w,height:BN.h});BR=BS.GetGraphObjectManager(Au.PlotId0);if(!BR){return BQ;}BR.OnRectangleSelection(BP,BQ,BO.outPut);return BQ;},SaveImageToObject:function Av(BR,BO,BS,BN,BQ,BP){BR=BR||1014;BO=BO||694;E.call(this,BR,BO);N.call(this);return p.call(this,BR,BO,BS,BN,BQ,BP);},PlainDraw:function J(BN,BO){var BP=this.mChartContextPtr;BN=BN||BP.mGraphWidth;BO=BO||BP.mGraphHeight;return E.call(this,BN,BO);},GetDataGroup:function s(){if(this.mChartContextPtr.mIsGraphMatrix){return this.mDatasetPtr.GetDataGroup();}return 1;},setCanvasProps:function A5(BN){if(this.mChartContextPtr){this.mChartContextPtr.mCanvasInfo=Y.copy(BN,this.mChartContextPtr.mCanvasInfo);}},SetFormatManager:function BF(BN){this.mFormatManager=BN;this.mChartContextPtr.SetFormatManager(BN);this.mDatasetPtr.SetFormatManager(BN);},IsDataEnough:function O(){if(this.mChartContextPtr.mIsGraphMatrix){return true;}var BO,BN;BO=this.mDatasetPtr.GetGroupCount();BN=z.call(this,this.mChartContextPtr.mGraphType);return BO>=BN;},DrawUniformYAxis:function BL(BO,BW,BV,BU){var BP=this.mChartContextPtr;BP.startTimer({functionName:"DrawUniformYAxis",purpose:"render uniform Y axis",caller:arguments.caller||"unknown"});BU=BU||{};AQ.call(this,false,BO,BW,BV,BU);if(BU.CanSkip){BP.endTimer();return p.call(this,BO,BW,false,false,false,[]);}BV=BU.IsPrimary;var BS=BP.getUniformAxisContext();if(BU.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(f.call(this,false,BV)===false){BP.endTimer();return p.call(this,BO,BW,false,false,false,[]);}var BT=A3.call(this),BN=Math.round(BU.dataLabelPadding||0),BR=BS.mDataAreaTopMargin,BX=BW-BR-BS.mDataAreaBottomMargin,BQ=new Au.Rect2D({x:(BV?BO:0),y:BR,width:0,height:BX});if(BN){BQ.y=BN;BQ.height-=BN;}L.call(this,BQ,false,BT,BV);}BP.endTimer();return p.call(this,BO,BW,false,false,false,[]);},DrawUniformXAxis:function U(BO,BX,BV,BU){var BP=this.mChartContextPtr;this.mChartContextPtr.startTimer({functionName:"DrawUniformXAxis",purpose:"render uniform X axis",caller:arguments.caller||"unknown"});BU=BU||{};AQ.call(this,true,BO,BX,BV,BU);if(BU.CanSkip){BP.endTimer();return p.call(this,BO,BX,false,false,false,[]);}BV=BU.IsPrimary;var BS=BP.getUniformAxisContext();if(BU.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(f.call(this,true,BV)===false){BP.endTimer();return p.call(this,BO,BX,false,false,false,[]);}var BT=!AF.call(this),BN=Math.round(BU.dataLabelPadding||0),BY=BS.mDataAreaLeftMargin,BR=0,BW=BO-BY-BS.mDataAreaRightMargin,BQ=new Au.Rect2D({x:BY,y:(BV?BR:BX),width:BW,height:0});if(BN){BQ.width-=BN;}L.call(this,BQ,true,BT,BV);}BP.endTimer();return p.call(this,BO,BX,false,false,false,[]);},DrawDataAreaForUniformAxis:function AI(BQ,BN,BP){this.mChartContextPtr.startTimer({functionName:"DrawDataAreaForUniformAxis",purpose:"render data area for the mini chart",caller:arguments.caller||"unknown"});if(this.mVisualMode===A2){return p.call(this,BQ,BN,false,false,false,[]);}var BS=this.mChartContextPtr,BO=BS.getUniformAxisContext();BO.xDataLabelPadding=BP.xDataLabelPadding||0;BO.yDataLabelPadding=BP.yDataLabelPadding||0;BO.mIsAxisTitleAndLabelRequired=false;this.mInitialized=false;BS.mIsEntireChart=false;this.mChartContextPtr.populateCanvas();E.call(this,BQ,BN);N.call(this);BO.xDataLabelPadding=0;BO.yDataLabelPadding=0;BS.endTimer();var BR=p.call(this,BQ,BN,false,false,false,[]);B.call(this,BR);return BR;},GetUniformAxisMargins:function D(){var BP=this.mChartContextPtr,BO=BP.getUniformAxisContext(),BN={LEFT:BO.mDataAreaLeftMargin,RIGHT:BO.mDataAreaRightMargin,TOP:BO.mDataAreaTopMargin,BOTTOM:BO.mDataAreaBottomMargin};return BN;},UpdateUniformAxisMargins:function BB(BO){var BP=this.mChartContextPtr,BN=BP.getUniformAxisContext();if(BO.LEFT){BN.mDataAreaLeftMargin=BO.LEFT;}if(BO.RIGHT){BN.mDataAreaRightMargin=BO.RIGHT;}if(BO.TOP){BN.mDataAreaTopMargin=BO.TOP;}if(BO.BOTTOM){BN.mDataAreaBottomMargin=BO.BOTTOM;}},GetUniformAxisLabelsInfo:function BJ(BP,BQ,BO){var BN=AP.call(this,BP);if(BN){return BN.getUniformAxisLabelsInfo(BO);}return[];},GetPositionAtTick:function v(BR,BN,BU){var BO=this.mChartContextPtr,Ba,BQ,BX,BZ;if(!BO.mIsGraphMatrix){return 0;}var BT=BO.getUniformAxisContext();if(!BT){return 0;}var BP=this.mUniformAxisPtr;if(BP){var BW=BP.mTripleId.mObjectId;if(BI.call(this,BW)){var BY=BP.mDeviceDataArea;if(!BP.GetTrimWithPadding()){var BV=new Au.Rect2D();if(BN){Ba=BT.mDataAreaLeftMargin;BQ=0;BX=BU-Ba-BT.mDataAreaRightMargin;BV.Reset(Ba,BQ,BX,0);}else{Ba=0;BQ=BT.mDataAreaTopMargin;BZ=BU-BQ-BT.mDataAreaBottomMargin;BV.Reset(Ba,BQ,0,BZ);}BP.TrimAxisPadding(BV,false);BP.SetDeviceDataArea(BV);BP.SetTrimWithPadding(false);}var BS=BP.GetPositionAtTick(BR);BP.SetDeviceDataArea(BY);return BS;}}return 0;},getZeroLineInfo:function AU(BR,BQ,BP){var BO={};BO.Qualified=this.IsZeroBaseLineQualified(BR,BQ);if(BO.Qualified){var BN=this.mUniformAxisPtr;if(BN===null||BN===undefined){this.mUniformAxisPtr=AP.call(this,BR,BQ);}BO.Position=this.GetPositionAtTick(0,BR,BP);BO.Shapes=this.mDatasetPtr.GetShapesDistributionByValueAxis();}else{BO.Position=-1;BO.Shapes={};}return BO;},IsZeroBaseLineQualified:function j(BV,BT){BV=BV||false;if(BT===undefined){BT=true;}this.useOriginFormatForZeroLine=false;var BO=this.mChartContextPtr;if(!BO.mIsGraphMatrix){return false;}if(BO.IsBarChart()===false&&BO.IsLineChart()===false&&BO.IsAreaChart()===false){return false;}var BQ=this.mUniformAxisPtr;if(BQ){var BU=BQ.mTripleId.mObjectId;if(BI.call(this,BU)){if(BQ.isBaseLineQualified()){return true;}else{if(BO.isCombinationChart()===false){return false;}if(BQ.liftedFromZero()){var BW=this.mDatasetPtr.GetShapesDistributionByValueAxis();var BN=BW.Primary;if(BT&&BN&&(BN.BAR&&BN.BAR.length||BN.AREA&&BN.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}BN=BW.Secondary;if(!BT&&BN&&(BN.BAR&&BN.BAR.length||BN.AREA&&BN.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}}}}}else{var BP,BS=BO.getUniformAxisContext();if(BS.ValueAxis){if(BT){BP=BV?"X1":"Y1";}else{BP=BV?"X2":"Y2";}var BR=BS.ValueAxis[BP];if(BR){return BR.Min<0&&BR.Max>0;}}}return false;},GetAxisLabelRotation:function A7(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}var BN=this.mUniformAxisPtr;if(BN===null){return false;}return BN.getLabelRotation();},GetShownNumericTicks:function AB(BN){var BP=this.mChartContextPtr;if(BP.mIsGraphMatrix){var BO=BP.GetGraphMatrixContext();return BN?BO.mShownValueTickSet[0]:BO.mShownValueTickSet[1];}},SetShowNumericTicks:function n(BP,BN){var BQ=this.mChartContextPtr;if(BQ.mIsGraphMatrix){var BO=BQ.GetGraphMatrixContext();if(BN){BO.mShownValueTickSet[0]=BP;}else{BO.mShownValueTickSet[1]=BP;}}},refreshChartComponents:function AJ(BX){var BP=this.mChartContextPtr,Bb=BP.IsVertical(),Ba=BP.IsBarChart()||BP.IsAreaChart()||BP.IsLineChart(),BY=BP.IsBubbleChart()||BP.IsScatterChart();var Bd=BX.size;if(Bd){BP.SetGraphSize(Bd.w,Bd.h);}var BU=BX.dataProvider;if(BU){this.mDatasetPtr.refresh(BU);}var BQ="Y1",BR,BZ=this.mChartManagerPtr,BT;var BO=BX.plot;if(BO){var Bc={mObjectId:20002,mSeriesId:0,mGroupId:-3};var BW=BZ.GetGraphObjectManager(Bc);if(BW){BW.refresh(BX.purpose,BO);}}var BN=BX.primaryValueAxis;if(BN){if(Ba&&!Bb){BQ="X1";}BR=BP.getAxisTripleId(BQ);BT=BZ.GetGraphObjectManager(BR);if(BT){BT.refresh(BX.purpose,BN);}}BQ="X1";var BS=BX.secondaryValueAxis;if(BS){if(BY){BQ="X1";}BR=BP.getAxisTripleId(BQ);BT=BZ.GetGraphObjectManager(BR);if(BT){BT.refresh(BX.purpose,BS);}}BQ="O1";var BV=BX.primaryCategoryAxis;if(BV){BR=BP.getAxisTripleId(BQ);BT=BZ.GetGraphObjectManager(BR);if(BT){BT.refresh(BX.purpose,BV);}}},GetDataAreaPadding:function BK(){var BP=this.mChartContextPtr,Bi=BP.GetGraphMatrixContext(),BX={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},Bg,Bf;if(!BP.mIsGraphMatrix){return BX;}var Bj=function(Bo){var Bn=0;Bo.forEach(function(Bp){Bn+=Bp;});return Bn;};var BW,BO,BR=0,BT=0,BY=0,Bm=0,Bc=0;if(Bi.isCombinationChart()){var Bd=this.mDatasetPtr.GetSeriesByShape();if(Bd.Circle){BT=Bd.Circle.length;}if(Bd.Square){BY=Bd.Square.length;}if(Bd.Line){Bc=Bd.Line.length;}if(Bd.Area){Bm=Bd.Area.length;}if(Bd.Bar){BR=Bd.Bar.length;}BW=this.mDatasetPtr;BO=BW.GetDiscreteSeries();if(!(BT>0||BY>0||(Bi.mHasSizeBy&&Bc>0)||(!Bi.mHasSizeBy&&(Bc>0||Bm>0)&&BO.length>0&&(AV.HasArrayIntersection(BO,Bd.Line)||AV.HasArrayIntersection(BO,Bd.Area))))){return BX;}if(BR===BW.GetSeriesCount()){return BX;}}else{if(BP.IsBarChart()||BP.mGraphType===BC.DssGraphTypeGridChart||(Bi.mMarkerShape===200&&BP.IsBubbleChart()===false&&BP.IsScatterChart()===false)){return BX;}}var Bh=BP.IsAreaChart()||BP.IsLineChart(),Bk=Bi.isCombinationChart()===false,BS;if(Bk===false){Bk=Bj([BR,Bm,Bc,BY,BT])<=1;}if(Bk&&BP.GetGraphMajorType()===As.GMT_CATEGORY){var BZ=2;BW=this.mDatasetPtr;BO=BW.GetDiscreteSeries();if(Bi.mHasSizeBy===false&&(!(Bh&&BO.length>0)||(Bh&&BW.GetGroupCount()<=1&&BW.GetSeriesCount<=1))){BS=this.GetMaxElementRadius(BP.mGraphWidth,BP.mGraphHeight);if(BP.IsLineChart()){BS=Math.max(BS,BZ);}BX.Y1.LowOffset=BX.Y1.HighOffset=BX.Y2.LowOffset=BX.Y2.HighOffset=BS;BX.X2.LowOffset=BX.X2.HighOffset=BS;BX.X1.LowOffset=BX.X1.HighOffset=BS;return BX;}}var BU=true;if(BU){if(BP.IsScatterChart()){BS=this.GetMaxElementRadius(BP.mGraphWidth,BP.mGraphHeight);BX.Y1.LowOffset=BX.Y1.HighOffset=BX.Y2.LowOffset=BX.Y2.HighOffset=BS;BX.X2.LowOffset=BX.X2.HighOffset=BS;BX.X1.LowOffset=BX.X1.HighOffset=BS;return BX;}}var Ba=BP.getUniformAxisContext();Ba.mIsAxisTitleAndLabelRequired=false;BP.mImageUsage=AR.OBJECT_CLIP_COMPUTATION;E.call(this,BP.mGraphWidth,BP.mGraphHeight);BP.mImageUsage=AR.GENERAL;var Be=Au.PlotId0,Bl=this.mChartManagerPtr.GetGraphObjectManager(Be);if(!Bl){return BX;}var BQ;for(Bg=0;Bg<2;++Bg){for(Bf=0;Bf<2;++Bf){var BV=Bg===0,Bb=Bf===0,BN=BV?(Bb?"X1":"X2"):(Bb?"Y1":"Y2");BQ=Bl.GetMaxElementOffsetClippedByBoundary(BV,Bb);BX[BN].LowOffset=BQ.LowOffset;BX[BN].HighOffset=BQ.HighOffset;}}return BX;},GetUniformYAxisWidth:function Ah(BY,BN,BX){this.mChartContextPtr.startTimer({functionName:"GetUniformYAxisWidth",purpose:"Create uniform Y axis instance and do axis layout",caller:arguments.caller||"unknown"});Aj.call(this);var BW={};A8.call(this,false,BN,BX,BW);if(BW.CanSkip){return 0;}BN=BW.MaxLabelLength;BX=BW.IsPrimary;var BP=this.mChartContextPtr,BS=BP.mDataset,BU=BP.getUniformAxisContext(),BV=A3.call(this),BZ,BR,Ba,BT=900,BQ;AE.Reset(X,X,BY,BY-A4.call(this)*X);BP.SetGraphSize(BY,BY-A4.call(this)*X);BR=u.call(this,false,BX,BN,BY);if(BR.resizeAction===Ak.KeepBoth){return this.mUniformAxisSpace.width;}AE.width=Math.max(AE.width,0);AE.height=Math.max(AE.height,0);if(BR.restrictWidth===-1){AE.width=Math.max(AE.width,BT);}else{AE.width=Math.min(BR.restrictWidth,BT);}BQ=AE.width;AK.call(this,AE,BV,BR,true);var BO=BS.showDatalabels();if(!BV&&BO){this.AdjustingAxisPaddingForDataLabel(AE,false,BY,BY);}Ad.call(this,BU,AE,BY,BN,false,BX);BZ=0;this.mUniformAxisPtr=BR;if(BX){Ba=AE.x+BZ;}else{Ba=BQ-(AE.x+AE.width)-X+BZ;}if(this.mUniformAxisSpace.width===-1){BR.restrictWidth=this.mUniformAxisSpace.width=Ba;}BM.call(this);BP.endTimer();return Math.max(Ba,0);},GetUniformXAxisHeight:function h(BP,BN,BX){this.mChartContextPtr.startTimer({functionName:"GetUniformXAxisHeight",purpose:"Create uniform X axis instance and do axis layout",caller:arguments.caller||"unknown"});Aj.call(this);var BW={};A8.call(this,true,BN,BX,BW);if(BW.CanSkip){return 0;}BN=BW.MaxLabelLength;BX=BW.IsPrimary;var BQ=this.mChartContextPtr,BS=BQ.mDataset,BT=BQ.getUniformAxisContext(),BV=!AF.call(this),BU=400,BO,BY,BR,BZ;AE.Reset(0,0,BP,BU);BQ.SetGraphSize(BP,BU);BR=u.call(this,true,BX,BN,BP);if(BR.resizeAction===Ak.KeepBoth){return this.mUniformAxisSpace.height;}AK.call(this,AE,BV,BR,true);BO=BS.showDatalabels();if(!BV&&BO){this.AdjustingAxisPaddingForDataLabel(AE,true,BP,BX);}Ad.call(this,BT,AE,BP,BN,true,BX);BY=0;this.mUniformAxisPtr=BR;if(BX){BZ=BU-(AE.y+AE.height)-X+BY;}else{BZ=AE.y;}if(this.mUniformAxisSpace.height===-1){BR.restrictHeight=this.mUniformAxisSpace.height=BZ;}BM.call(this);BQ.endTimer();return Math.max(BZ,0);},UpdatePartialRenderingWindow:function G(BO,BP,BN){BO=BO||false;var BQ=this.mChartContextPtr;if(BQ.IsScatterChart()||BQ.IsBubbleChart()){BQ.mPartialRendering=BO;}else{BQ.mPartialRendering=BO&&(BP!==undefined);if(BQ.mPartialRendering){BQ.mPartialRendering=BQ.mPartialRendering&&(BP.x!==undefined&&BP.y!==undefined&&BP.width!==undefined&&BP.height!==undefined);}}if(BQ.mPartialRendering){if(BQ.mRenderingWindow===null){BQ.mRenderingWindow={};}if(BP){Y.copy(BP,BQ.mRenderingWindow);}}else{BQ.mRenderingWindow=null;}if(BN!==undefined){if(BQ.mPartialRendering){this.mVisualMode=BN;}else{this.mVisualMode=Ae;}}},updateUniformXAxisLayout:function A(BQ){var BO=BQ,BN=this.mChartContextPtr.getUniformAxisContext(),BT=BN.CategoryAxis.X,BP=1,BS=2,BR=3,BU=4;BT.Layout=BO.Layout;if(BO.Layout===BU){BT.Layout=BP;BT.ForbideStagger=true;}else{if(BO.Layout===BR){BT.ForbideStagger=true;}else{BT.ForbideStagger=false;}}BT.StartRow=0;if(BT.Layout===BS){BT.StartRow=BO.StartRow;}if(BO.LabelWidthLimit!==undefined){BT.LabelWidthLimit=BO.LabelWidthLimit;}BT.EnforceCluster=(!!BO.EnforceCluster)||BT.EnforceCluster;BT.EnforceFringe=(!!BO.EnforceFringe)||BT.EnforceFringe;},updateUniformAxisLabelRotation:function A1(BR,BP){if(BP===undefined){BP=-1;}var BO={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};var BQ=this.mChartContextPtr,BN=BQ.getUniformAxisContext();if(BP===-1){if(BR===undefined){return ;}switch(BR){case BO.NORMAL:case BO.STAGGER:BN.mLabelRotation.X1=I.FR_AUTOMATIC;break;default:BN.mLabelRotation.X1=I.FR_90;break;}}else{if(BP===2){BN.mLabelRotation.X1=I.FR_90;}else{BN.mLabelRotation.X1=I.FR_NORMAL;}}},EnableUniformAxis:function V(BS,BO){BO=BO||false;var BT=this.mChartContextPtr,BZ=BT.getUniformAxisContext(),Bh=BZ.ValueAxis,Bf,BP,Be=Bh.X1,Bd=Bh.X2,BW=Bh.Z,BR=Bh.Y1,BQ=Bh.Y2;Bf=AV.isValidNumber(BS.YMinValue);BP=AV.isValidNumber(BS.YMaxValue);BR.Valid=Bf&&BP;BR.Min=parseFloat(Bf?BS.YMinValue:0);BR.Max=parseFloat(BP?BS.YMaxValue:0);BR.CustomScale=(BS.YCustomScale!==undefined)?BS.YCustomScale:false;BR.CondenseLabel=(BS.YCondenseLabel!==undefined)?BS.YCondenseLabel:{};BR.CondenseEnforced=BS.YCondenseEnfored||false;BR.AutoMin=BS.YAutoMin;BR.AutoMax=BS.YAutoMax;Bf=AV.isValidNumber(BS.Y2MinValue)||AV.isValidNumber(BS.X2MinValue);BP=AV.isValidNumber(BS.Y2MaxValue)||AV.isValidNumber(BS.X2MaxValue);BQ.Valid=Bf&&BP;BQ.Min=parseFloat(AV.isValidNumber(BS.Y2MinValue)?BS.Y2MinValue:(AV.isValidNumber(BS.X2MinValue)?BS.X2MinValue:0));BQ.Max=parseFloat(AV.isValidNumber(BS.Y2MaxValue)?BS.Y2MaxValue:(AV.isValidNumber(BS.X2MaxValue)?BS.X2MaxValue:0));BQ.CustomScale=(BS.Y2CustomScale!==undefined)?BS.Y2CustomScale:((BS.X2CustomScale!==undefined)?BS.X2CustomScale:false);BQ.CondenseLabel=(BS.Y2CondenseLabel!==undefined)?BS.Y2CondenseLabel:(BS.X2CondenseLabel!==undefined?BS.X2CondenseLabel:{});BQ.CondenseEnforced=BS.Y2CondenseEnfored||BS.X2CondenseEnfored||false;BQ.AutoMin=BS.Y2AutoMin;BQ.AutoMax=BS.Y2AutoMax;Bf=AV.isValidNumber(BS.XMinValue);BP=AV.isValidNumber(BS.XMaxValue);Be.Valid=Bf&&BP;Be.Min=parseFloat(Bf?BS.XMinValue:0);Be.Max=parseFloat(BP?BS.XMaxValue:0);Be.CustomScale=(BS.XCustomScale!==undefined)?BS.XCustomScale:false;Be.CondenseLabel=(BS.XCondenseLabel!==undefined)?BS.XCondenseLabel:{};Be.CondenseEnforced=BS.XCondenseEnfored||false;Be.AutoMin=BS.XAutoMin;Be.AutoMax=BS.XAutoMax;Bf=AV.isValidNumber(BS.X2MinValue);BP=AV.isValidNumber(BS.X2MaxValue);Bd.Valid=Bf&&BP;Bd.Min=parseFloat(Bf?BS.X2MinValue:0);Bd.Max=parseFloat(BP?BS.X2MaxValue:0);Bd.CustomScale=(BS.X2CustomScale!==undefined)?BS.X2CustomScale:false;Bd.CondenseLabel=(BS.X2CondenseLabel!==undefined)?BS.X2CondenseLabel:{};Bd.CondenseEnforced=BS.X2CondenseEnfored||false;Bd.AutoMin=BS.X2AutoMin;Bd.AutoMax=BS.X2AutoMax;BW.Min=parseFloat(AV.isValidNumber(BS.ZMinValue)?BS.ZMinValue:0);BW.Max=parseFloat(AV.isValidNumber(BS.ZMaxValue)?BS.ZMaxValue:0);BW.CustomScale=(BS.ZCustomScale!==undefined)?BS.ZCustomScale:false;BW.AutoMin=BS.ZAutoMin;BW.AutoMax=BS.ZAutoMax;BZ.mGraphHeight=(BS.GraphHeight!==undefined)?BS.GraphHeight:0;if(BO){return ;}BT.mIsUniformAxisMode=true;BT.mIsGraphMatrix=true;if(BS.XMetrics){Be.Metrics.splice(0,Be.Metrics.length);Be.Metrics=Be.Metrics.concat(BS.XMetrics);}if(BS.YMetrics){BR.Metrics.splice(0,Bh.Y1.Metrics.length);BR.Metrics=Bh.Y1.Metrics.concat(BS.YMetrics);}if(BS.Y2Metrics){BQ.Metrics.splice(0,BQ.Metrics.length);BQ.Metrics=BQ.Metrics.concat(BS.Y2Metrics);}if(BS.X2Metrics){Bd.Metrics.splice(0,Bd.Metrics.length);Bd.Metrics=Bd.Metrics.concat(BS.X2Metrics);}if(BS.ZMetrics){BW.Metrics.splice(0,BW.Metrics.length);BW.Metrics=BW.Metrics.concat(BS.ZMetrics);}if(BS.LabelPlacement!==undefined){this.updateUniformAxisLabelRotation(BS.LabelPlacement,BS.xAxisRotateMode);}if(BS.XCategoryAxis){var Bg=BS.XCategoryAxis,Bb=BZ.CategoryAxis.X,BU=3;Bb.Truncation={Idices:[],Texts:[]};if(Bb.Layout!==BU){Bb.Truncation.Idices=BS.TruncatedIdices;Bb.Truncation.Texts=BS.TruncatedTexts;}this.updateUniformXAxisLayout(Bg);}if(BS.YCategoryAxis){var BY=BS.YCategoryAxis;var BV=BZ.CategoryAxis.Y;if(BY.LabelWidthLimit!==undefined){BV.LabelWidthLimit=BY.LabelWidthLimit;}BV.EnforceCluster=(!!BY.EnforceCluster)||BV.EnforceCluster;BV.EnforceFringe=(!!BY.EnforceFringe)||BV.EnforceFringe;}if(BT.IsScatterChart()||BT.IsBubbleChart()){var Bc=BT.GetGraphMatrixContext(),Ba=Bc.AxisLayout;if(Ba===null||Ba===undefined){return ;}var BX=4,BN=8;if(!!(Ba&BX)){BR.Min=parseFloat((BS.Y2MinValue!==undefined)?BS.Y2MinValue:0);BR.Max=parseFloat((BS.Y2MaxValue!==undefined)?BS.Y2MaxValue:0);BR.CustomScale=(BS.Y2CustomScale!==undefined)?BS.Y2CustomScale:false;BR.CondenseLabel=(BS.Y2CondenseLabel!==undefined)?BS.Y2CondenseLabel:{};BR.Metrics.splice(0,BR.Metrics.length);BR.Valid=BQ.Valid;if(BS.Y2Metrics){BR.Metrics=BR.Metrics.concat(BS.Y2Metrics);}BQ.Metrics.splice(0,BQ.Metrics.length);}if(!!(Ba&BN)){Be.Min=parseFloat((BS.X2MinValue!==undefined)?BS.X2MinValue:0);Be.Max=parseFloat((BS.X2MaxValue!==undefined)?BS.X2MaxValue:0);Be.CustomScale=(BS.X2CustomScale!==undefined)?BS.X2CustomScale:false;Be.CondenseLabel=(BS.X2CondenseLabel!==undefined)?BS.X2CondenseLabel:{};Be.Metrics.splice(0,Be.Metrics.length);Be.Valid=BQ.Valid;if(BS.X2Metrics){Be.Metrics=Bh.Y1.Metrics.concat(BS.X2Metrics);}BQ.Metrics.splice(0,BQ.Metrics.length);}}},AdjustingAxisPaddingForDataLabel:function c(BV,BP,BT,BU){var BN=this.mChartContextPtr,BO=BN.getValueAxisKeyFromLayout(BP,BU),BQ;var BS=BN.getAxisTripleId(BO);BQ=BN.getUniformAxisInformation(BS.mObjectId);var BX=BQ.Metrics||[];var BW=BN.GetProperty(Ax.DSSGraphMatrixUseCustomMinMax,BS),BR;if(BW){BR=BW;if(BR){return false;}}if(BP){return A9.call(this,BV,BX,BT,BU);}return P.call(this,BV,BX,BT,BU);},ShouldRotateDataLabel:function Ag(){var BO=this.mChartContextPtr,BP=this.mDatasetPtr,BT=BP.showDatalabels(),BU=BO.GetGraphMatrixContext();var BV=false;if(BT){BV=BO.IsBarChart();if(!BV&&BO.isCombinationChart()){var BN=BP.GetSeriesByShape().Bar,BQ=BP.GetSeriesCount();BV=(BN.length===BQ);if(!BV&&BN.length){BV=true;for(var BR=0;BR<BQ;BR++){if(BN.indexOf(BR)===-1&&BP.showSeriesDatalabel(BR)){BV=false;break;}}}}}if(BV){this.mInitialized=false;var BS=BO.getUniformAxisContext();BS.mIsAxisTitleAndLabelRequired=false;BO.mIsEntireChart=false;}return{Rotation:BU.mIsNeedRotateDataLabel,Adjust:BV};},ShouldAdjustValueAxis:function M(){return false;},GetMaxElementRadius:function AW(BO,Ba,BV){var BP=this.mChartContextPtr,BU=BP.GetGraphMatrixContext(),BN=BP.GetGraphType(),BS=BP.GetGraphMatrixGraphMajorType(),BZ=this.mDatasetPtr.GetGroupCount(),BW;BV=BV||false;switch(BS){case k._GRID:case k._SCATTER:case k._BUBBLE:return BU.GetMaxMarkerSize(Ao._SHAPES_IN_BUBBLESCATTER,false,BZ,BU.mHasSizeBy);case k._AREA:BW=((BN>=BC.DssGraphTypeVertical_Area_Absolute&&BN<=BC.DssGraphTypeVertical_Area_Percent));return BU.GetMaxElementSizeInAreaChart(BW,BZ);case k._LINE:BW=((BN>=BC.DssGraphTypeVertical_Line_Absolute&&BN<=BC.DssGraphTypeVertical_Line_Percent));if(BU.isCombinationChart()){var BY=0,BX=0,BT=0,BR=4,BQ=this.mDatasetPtr.GetSeriesByShape();if(BQ.Line&&BQ.Line.length>0){BY=BU.GetMaxElementSizeInLineChart(BW,BZ,false,BT);}if((BQ.Circle&&BQ.Circle.length>0)||(BQ.Square&&BQ.Square.length>0)){BX=BU.GetMaxElementSizeInLineChart(BW,BZ,true,BR);}return Math.max(BY,BX);}return BU.GetMaxElementSizeInLineChart(BW,BZ);case k._PIE:if(this.mDatasetPtr){BZ*=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);}BW=this.mChartContextPtr.IsVertical();return BU.GetMaxMarkerSize(Ao._PIE,BW,BZ,BU.mHasSizeBy);case k._BAR:return 0;default:break;}return 0;},setGraphType:function AD(BN){this.mGraphType=this.mChartContextPtr.mGraphType=BN;},setThemeType:function g(BN){this.mChartContextPtr.mThemeType=BN;},getCondenseStatus:function b(){var BO,BN=this.mUniformAxisPtr;if(BN){BO=BN.mCondenseLabels;}return BO;},enableCondense:function Aq(BO,BN){var BP=this.mUniformAxisPtr;if(BP){BP.checkCondense(BO,BN);}},isAxisLabelRotated:function y(){var BO=this.mUniformAxisPtr;if(BO===null){return false;}var BN=BO.getLabelRotation();return BN===I.FR_90;},liftedFromZero:function BH(){if(this.mUniformAxisPtr){if(this.mMinTick!==undefined){return this.mMinTick===0&&this.mLowTrim>0;}}return false;},configureChart:function Ar(BN){var BP=this.mChartContextPtr;BP.mIsUniformAxisMode=true;BP.mIsGraphMatrix=true;if(BN.ThemeType){this.setThemeType(BN.ThemeType);}if(BN.Usage){BP.mImageUsage=BN.Usage;}if(BN.Timer!==undefined){BP.mUseTimer=BN.Timer||false;}if(BP.mImageUsage===AR.BANNER){return ;}var BO;BO=BN.isABL&&BN.Extremes&&((BN.Extremes.X2Metrics&&BN.Extremes.X2Metrics.length)||(BN.Extremes.Y2Metrics&&BN.Extremes.Y2Metrics.length));if(BN.GraphType){if(BO){BN.GraphType=BP.mapGraphTypeToDualAxis(BN.GraphType);}if(BN.ShapeType){this.setGraphType(a.call(this,BN.GraphType,BN.ShapeType));}else{this.setGraphType(BN.GraphType);}}if(BN.GraphSize){BP.SetGraphSize(BN.GraphSize.W,BN.GraphSize.H);}if(BN.Extremes){this.EnableUniformAxis(BN.Extremes,false);}if(BN.OutputType){BP.mImageFormat=BN.OutputType;}r.call(this,BN);x.call(this,BN);},resetCanvas:function Ap(){var BN=this.mChartContextPtr;BN.resetCanvas();},updateUniformAxis:function q(BQ){var BP=this.mUniformAxisPtr,BO=BP.mDeviceDataArea.width,BN=BP.mDeviceDataArea.height;if(!BP){return p.call(this,BO,BN,false,false,false,[]);}if(BQ.Redraw){BP.Draw();}return p.call(this,BO,BN,false,false,false,[]);},getUniformAxisBanding:function AA(){var BN=true,BO=this.mUniformAxisPtr;if(BN&&BO){return BO.getBandings();}return[];},getUniformAxisGridLinePosition:function K(BO){var BN=true,BP=this.mUniformAxisPtr;if(BN&&BP){return BP.getGridLinePosition(BO);}return[];},echoCondenseStatus:function T(BQ,BO){var BP=this.mUniformAxisPtr;if(BP===null){return ;}var BN=BP.getCondenseStatus();if(BN!==undefined){BQ[BO]=BN;}},echoLayoutPaddings:function A0(BP,BN){var BO=this.mUniformAxisPtr;if(BO===null){return ;}BP[BN]=BP[BN]||{};BP[BN].HighOffset=this.mAxisLayoutHighPadding||0;BP[BN].LowOffset=this.mAxisLayoutLowPadding||0;},UpdateValueAxisPadding:function Am(BO){var BN=this.mChartContextPtr.GetGraphMatrixContext();BN.UpdateValueAxisPadding(BO);},getUniformAxisTrims:function Ai(BO){var BN=(BO&&AF.call(this)===false)||(!BO&&A3.call(this));if(BN){return Aw.call(this,BO);}else{return AC.call(this);}},getUniformAxisFormat:function R(){var BN=this.mUniformAxisPtr;if(!!BN){if(BN.mCondenseLabels){return"Condensed";}if(BN.mNumberFormat){return BN.mNumberFormat.mCustomFormat;}}return undefined;},formatAsUniformAxisLabel:function o(BN){if(!this.mUniformAxisPtr){return undefined;}return this.mUniformAxisPtr.formatAsLabel(BN);},getAxisPadding:function d(BP){var BO=0,BQ=1;if(BP===BO){return{L:0,H:(this.mUniformAxisPtr&&this.mUniformAxisPtr.dataLabelPadding||0)};}else{if(BP===BQ){var BN=this.mAxisLayoutLowPadding||0;var BR=this.mAxisLayoutHighPadding||0;return{L:BN,H:BR};}else{return{L:0,H:0};}}},getStatistics:function W(BO){var BW={},Bc,BY,Bd,BP,BT=0,Ba,BZ;Bc=Au.PlotId0;switch(BO.Type){case BT:var BX=0,BQ=this.mChartContextPtr,BV=this.mDatasetPtr;var Bb=BV.GetSeriesCount(),BN=BV.GetGroupCount();BW.Total=Bb*BN;if(BQ.IsScatterChart()||BQ.IsBubbleChart()){BY=this.mChartManagerPtr.GetGraphObjectManager(Bc);if(BY){Bd=BY.mGraphObjectList;BP=Bd.length;for(Ba=0;Ba<BP;++Ba){if(Bd[Ba].mTripleId.mObjectId===BE.DssGraphRiser){BX++;}}BW.Displayed=BX;}}else{if(BQ.IsBarChart()||BQ.IsAreaChart()||BQ.IsLineChart()||BQ.IsGridChart()){if(BV.endSeries!==-1||BV.endGroup!==-1){var Bf=Math.max(BV.startSeries,0),BS=Math.max(BV.startGroup,0),BU=BV.endSeries===-1?Bb:BV.endSeries,BR=BV.endGroup===-1?BN:BV.endGroup;BW.Displayed=(BR-BS)*(BU-Bf);}else{BY=this.mChartManagerPtr.GetGraphObjectManager(Bc);if(BY){var Be=[BY.AreaSeriesRenderer,BY.mBarSeriesRendererPtr,BY.mLineSeriesRendererPtr];for(BZ=0;BZ<Be.length;++BZ){if(Be[BZ]){Bd=Be[BZ].mGraphObjectList;BP=Bd.length;for(Ba=0;Ba<BP;++Ba){if(Bd[Ba].mTripleId.mObjectId===BE.DssGraphRiser){BX++;}}}}BW.Displayed=BX;}}}}break;default:break;}return BW;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.FormatManager","mstrmojo.chart.DataSetImpl","mstrmojo.chart.ChartImpl","mstrmojo.chart.CEModuleMain");var B=mstrmojo.chart,D=B.common;mstrmojo.chart.MsiChart=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.MsiChart",mUniversalProperty:null,createFormatManager:function E(L,H){var M,J,G;if(H.map&&H.map.gpp){M=H.map.gpp;}else{M=new D.MapStructure();var K;if(L){G=L.gp.length;for(J=0;J<G;++J){K=L.gp[J];M.push([-3,K.gsid,K.goid,K.gaid],K.v);}}H.map=H.map||{};H.map.gpp=M;}var I=new B.FormatManager({GraphPropertyMap:M});return I;},createDataSet:function C(G){return new B.DataSetImpl(G);},createChartFromFormatManager:function A(J,I,G,K){B.gModuleMain.ResetGraphObjectMap();this.mUniversalProperty=this.mUniversalProperty||{};var H=new B.ChartImpl({mDatasetPtr:J,mFormatManager:I,GDFFile:G,UseTimer:K});H.mChartContextPtr.globalFormats=this.mUniversalProperty;return H;},setController:function F(G){B.gModuleMain.setController(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.Obj","mstrmojo.Box","mstrmojo.Label","mstrmojo.Table","mstrmojo.VisEnum","mstrmojo.VisAxisLabel","mstrmojo.VisUtility","mstrmojo.PageNavigationPanel","mstrmojo._CanSupportTransaction","mstrmojo._Formattable","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.EnumVisualizationTemplates");mstrmojo.requiresClsP("mstrmojo.gm","GMEnums","TrendLineModel","GMDataModel","VecDrawer","GMUtility","GMIdentities","GMAxisScale");mstrmojo.requiresClsP("mstrmojo.chart","DataSetImpl","ChartImpl","MsiChart");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var Ar=100,j=100;var f=mstrmojo,B4=f.VisUtility,Ba=f.css,An=f.hash,By=f.array,A2=f.string,B8=f.chart,B5=B8.model,A1=B5.enums,v=mstrmojo.mstr.EnumDSSXMLObjectTypes,AR=mstrmojo.gm.EnumTrendLineModelType,BV=f.gm,Az=BV.GMAxisScale,BX=BV.EnumTrendRefModelLabels,n=BV.GMUtility,Bf=BV.EnumSelectionOptionLevel,D=f.num,B6=BV.EnumABLDirection,G=BV.EnumContextMenu,BW=f.VisEnum.ControlType,B9=f.vi.viz.EnumDSSDropZones,A6=f.vi.viz.EnumVisualizationTemplates,g=f.vi.viz.EnumAggregatedVisTemplates,BH=BV.EnumColorByType,M=BV.EnumDrawingAPI,Ae=BV.EnumXAxisLabelStatus,CA=BV.EnumABLDirection,C=BV.EnumAxis,BS=A1.EnumDSSGraphType,AO=BV.EnumFitTo,Bl=BV.EnumAxisType,B2=BV.EnumGraphType,BK=BV.EnumSizeByType,BD=BV.EnumAxis,AX=BV.EnumTheme,AG=BV.EnumMetricsPosition,l=B8.common.Utility,B0=BV.EnumShape,BL=BV.EnumSubtype,Ah=BV.EnumShape,Bm=BV.EnumAxisScale,Aj=BV.EnumMaxSizeType,Br=BV.EnumMinSizeType,c=BV.EnumIdentityType,AW=BV.WidgetPropertyTag,BJ=BV.FormatingPropertyTag,AV=BV.EnumRefLineModelType,CC=BV.StackExetrmeId,Z=BV.DualAxisSubAxisBit,A3=false,Bt="00000000000000000000000000000000",AM=0,Am="_tmsp",AU=0,At=-20,w=0,I=5,r=5,T=2,CJ=0,A9=1,x=3,e=0,BY=16,Ay=32,Bs=1,A8=2,Bg=4,Q=8,A5=["MAX","MIN","AVG","MED","FIRST","LAST","CONST"],BP=[mstrmojo.desc(5417,"Max"),mstrmojo.desc(5416,"Min"),mstrmojo.desc(12151,"Avg"),mstrmojo.desc(12152,"Med"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(12153,"Const")],F={isZeroPadding:true,X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},J={x:{first:"top",second:"bottom"},y:{first:"right",second:"left"}},p=[16756758,2701311,2275844,956159,14580142,2477516,14732825,11119017,15715763,9873407,9101208,8437759,15516634,9494752,15392673,14079702],Bn=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807];mstrmojo.requiresDescs(2058,2460,12091,12092);var Bk=[2,9,16,23,30,37];var AZ=[7,14,21,28,35,42];var Ag=n.filterInValidMetricIndex,a=n.getOptionObjArr;function Ab(CM){var CN=true,AS;for(AS in CM){if(CM.hasOwnProperty(AS)){CN=false;break;}}return CN;}function AB(CM,CQ){var CR=false,AS=["XAxis","YAxis"],CO=AS.length,CN,CP;for(CP=0;CP<CO;CP++){CN=CM&&CM[AS[CP]];if(CN){CR=!Ab(CN);if(CR){break;}}}return CR||CQ.isPie;}function k(){this.rwHdrSmrs=[];this.colHdrSmrs=[];delete this.mulAttsOnAxisForABL;delete this.ttlDispTp;delete this.chartInfo;delete this.defaultsForShape;delete this.rowHeaderCnt;delete this.colHeaderCnt;delete this.model;delete this.isPie;this.splitPlottingMetrics=undefined;this.metricInfos={};this.sharedPool={};this.metricSelectionInfo={};this.attributeSelectionInfo={};this.axisScaleCache=null;}function CL(AS,CS){var CN=this.getChartInfo();if(!CN.isABL){this.removeGroupInfo();}var CR=(CS===1||CS===8)||(CS===15||CS===22)||(CS===29||CS===36)||(CS===91||CS===92);if(CR){var CP;var CT=AS.dz,CO=CT.XAxis,CM=CT.YAxis,CQ=CT.BreakBy;if(CN.dirc===BV.EnumABLDirection.VERTICAL){CP=this.getMetricsOnYAxis();}else{CP=this.getMetricsOnXAxis();}if(CP.length>1){if(CN.dirc===BV.EnumABLDirection.VERTICAL){if((CO.MetricNames!==undefined&&(!CO.TemplateUnit||CO.TemplateUnit.length===0))||(CQ.MetricNames!==undefined&&(!CO.TemplateUnit||CO.TemplateUnit.length===0))){this.clusteredBarSpecialCase=true;}}else{if((CM.MetricNames!==undefined&&(!CM.TemplateUnit||CM.TemplateUnit.length===0))||(CQ.MetricNames!==undefined&&(!CM.TemplateUnit||CM.TemplateUnit.length===0))){this.clusteredBarSpecialCase=true;}}}}this.isGridPie=CN.isGrid&&CN.isPie;this.onlyMetricNamesOnAxisForGridPie=Bd.call(this);this.isMetricNamesOnXAxis=BI.call(this,"XAxis");this.isMetricNamesOnYAxis=BI.call(this,"YAxis");this.isMetricNamesOnRows=BI.call(this,"Rows");this.isMetricNamesOnColumns=BI.call(this,"Columns");if(CN.isABL){if(AH.call(this,"XAxis","n").length>1||AH.call(this,"YAxis","n").length>1){this.mulAttsOnAxisForABL=true;}}}function BG(AS){var CQ=B2;var CU=this.view,CX,CP;var CY=CU.getWidgetPropertyValue(AW.SHAPE);var CR=CU.getWidgetPropertyValue(AW.SUB_TYPE);var CS=this.getChartType();var CO=[B0.CIRCLE,B0.SQUARE,B0.PIE,B0.RING,B0.TICK];var CM=CO.concat([B0.BAR]);var CZ=function(Ca){var Ch=false,Cb=false;if(CS!==CQ.BAR&&CS!==CQ.LINE&&CS!==CQ.AREA){return{enableComb:false,hasBarShape:false};}var Ce=1,Cd,Cf=[],Cc=[],Ci=[];var Cj=Ca.dz,Ck=Cj.XAxis.TemplateMetric&&Cj.XAxis.TemplateMetric.concat()||[];Ck=Ck.concat(Cj.YAxis.TemplateMetric&&Cj.YAxis.TemplateMetric.concat()||[]);Ck.forEach(function(Cl){Cf.push(Cl.id);Ci.push(Cl.ax);});var Cg=Cj.visProp.fmt.metricShapes||"{}";Ck=JSON.parse(Cg.replace(/'/g,'"'));Cf.forEach(function(Cl){if(Ck.hasOwnProperty(Cl)){Cc.push(Ck[Cl]);}});Cb=Cc.length&&Cc[0]===Ce;for(Cd=1;Cd<Cc.length;Cd++){Ch=Ch||Cc[Cd]!==Cc[Cd-1];Cb=Cb||Cc[Cd]===Ce;if(Ch&&Cb){break;}}return{enableComb:Ch,hasBarShape:Cb};};var CW=CZ(AS);if(CR!==undefined){CX=CR;}if(((CS===CQ.BUBBLE||CS===CQ.SCATTER)&&CO.indexOf(CY)===-1)||((CS===CQ.GRID)&&(CM.indexOf(CY)===-1))){CY=B0.CIRCLE;}var CN=[4,24,201,202,200];var CV=CO.indexOf(CY);if(CV>=0&&CV<CO.length){this.ceMarkerShape=CN[CV];}var CT=BA.call(this,CS,CX,this.chartDirection,CY,CW.enableComb,CW.hasBarShape);this.chartSubType=CT.subType;CP=CT.ceChartType;this.ceChartType=CP;this.markerShape=CT.shape;this.isPercentage=Aq(CP,AZ);this.isStacked=Aq(CP,Bk.concat(AZ));}function Bo(CN){var CR=CN.dm.rct;var CM=CN.dm.cct;var CO=CN.ptt.row;var CQ=CN.ptt.col;var CP=this,AS=CN.dz;if(CO.length===0){CO.push(0);}if(CQ.length===0){CQ.push(0);}if(CR<0){CR=CN.dm.rct=CN.gvs.items.length;}if(CM<0){CM=CN.dm.cct=CN.gvs.items[0].items.length;}CP.rowHeaderCnt=Bx(AS.Rows);CP.colHeaderCnt=Bx(AS.Columns);}function z(CM,AS){if(this.isBubbleOrScatter()){return this.getAxisLayout4CE(CM,AS);}else{return this.axisLayout;}}function AI(AS){var CM=document.createElement("div");CM.innerHTML=AS;return CM.innerText;}function CG(CS,CM){var CU=CS.es,CP=CS.fs,CR=CS.otp,AS=CP&&CP.length,CQ=CU.length/AS,CT,CN=function(CV){CV=n.restoreSpecialChars(CV);CV=A2.decodeHtmlString(CV).trim();return CV;};CS.n=CN(CS.n);if(CU){By.forEach(CU,function(CV){CV.n=CN(CV.n);});}if(CR===12&&AS){for(var CO=0;CO<CU.length;CO++){switch(CM){case"row":CT=CO%AS;break;case"col":CT=Math.floor(CO/CQ);break;}switch(CP[CT].bftp){case 5:break;case 4:CU[CO].bftp=4;break;case 7:CU[CO].bftp=7;break;default:}}}}function V(CP,CR){var CM=this.model,AS,CN,CO,CQ;AS=this.mapFromChartToLDSIndex(CP,CR);CN=CM.getLocalDataSet(AS.r,AS.c);CO=CN.generateDataProvider();CQ=CO[AS.dpIdx];return CQ;}function CD(CM,CN){this.layoutPaddingEchos=this.layoutPaddingEchos||{X1:[],X2:[],Y1:[],Y2:[]};var AS=CM?"X2":"Y2";if(CN){AS=CM?"X1":"Y1";}return this.layoutPaddingEchos[AS];}function BC(CM,CN){this.condenseEchos=this.condenseEchos||{X1:[],X2:[],Y1:[],Y2:[]};var AS=CM?"X2":"Y2";if(CN){AS=CM?"X1":"Y1";}return this.condenseEchos[AS];}function R(){return true;}function CH(CN){if(this.enableCombiChart){return false;}var AS=CN.shape;if(AS===Ah.BAR||CN.tp===B2.GRID){return true;}if(AS===Ah.TICK){var CM=this.getChartInfo();return CM.isABL;}return false;}function CF(CR,CN,CQ){var CP,AS=CR.shape;if(this.enableCombiChart){CP=V.call(this,CN,CQ);var CO=CP.getSeriesByShape();if(CO.Circle.length||CO.Square.length){return false;}if(CO.Line.length&&this.hasSizeBy()){return false;}var CM=CP.GetDiscreteSeries();if(CM.length){if(CO.Line.length){if(l.HasArrayIntersection(CM,CO.Line)){return false;}}if(CO.Area.length){if(l.HasArrayIntersection(CM,CO.Area)){return false;}}}return true;}if(CH.call(this,CR)){return true;}if(AS===Ah.AREA){CP=V.call(this,CN,CQ);return CP.getGroupCount()>=2&&CP.GetDiscreteSeries().length===0;}if(AS===Ah.LINE){CP=V.call(this,CN,CQ);return !this.hasSizeBy()&&CP.getGroupCount()>=2&&CP.GetDiscreteSeries().length===0;}return false;}function A7(AS,CR,CN,CQ){var CT=this.view.getDefaultProperties(),CS=AS[CN]||{},CM=this.getChartInfo(),CO=(CR.fmt||CR.fms),CP;if(CO.length===0){CO={};}else{if(typeof CO==="string"){CO=JSON.parse(n.restoreSpecialChars(CO));}}CS.modix=CQ;CS[AW.TREND_TYPE]=CR.tp;CS[AW.TREND_LEVEL]=CR.lv;CS[AW.TREND_ENABLED]=CR.enabl===1;CS.fmt=CO;[AW.TREND_REF_LINE_THICKNESS,AW.TREND_REF_LINE_COLOR,AW.TREND_REF_LINE_STYLE].forEach(function(CU){CP=CO[CU];if(CP===undefined){CS[CU]=CT[CU];}else{CS[CU]=CP;}});if(CM.isABL){CS[AW.TREND_INCLUDE_BREAK_BY]=(CR.incl===1);}if(CR.cst.vv!==""&&!isNaN(CR.cst.vv)){CS[AW.TREND_POLY_DEGREE]=parseFloat(CR.cst.vv);}CS.existing=true;CR.clientDef=CS;AS[CN]=CS;}function K(CM,CQ,AS){var CN,CP,CO=this.view;[BJ.REF_LABELS_FONT_FAMILY,BJ.REF_LABELS_FONT_SIZE,BJ.REF_LABELS_FONT_STYLE,BJ.REF_LABELS_FONT_COLOR].forEach(function(CR){CP=CO.getWidgetPropertyValue(CR);CN=CM[CR];if((typeof CP==="object")&&(CN===undefined||typeof CN!=="object"||(CP[CR+Am]>CN[CR+Am]))){AS[CR]=CP[CR];CM[CR]=CP;}else{if(CN===undefined){AS[CR]=CQ[CR];}else{if(typeof CN!=="object"){AS[CR]=CN;}else{AS[CR]=CN[CR];}}}});}function H(CP,CT,AS,CQ){var CM=this.getChartInfo();if(CM.isBubbleOrScatter){if(CT.tp===AV.FIRST||CT.tp===AV.LAST){return ;}}var CU=this.view.getDefaultProperties(),CS=CP[AS]||{},CR={},CN=(CT.fmt||CT.fms),CO;CR.modix=CQ;CR[AW.REF_TYPE]=CT.tp;CR[AW.REF_LEVEL]=CT.lv;if(CN.length===0){CN={};}else{if(typeof CN==="string"){CN=JSON.parse(n.restoreSpecialChars(CN));}}CR.fmt=CN;[AW.TREND_REF_LINE_THICKNESS,AW.TREND_REF_LINE_COLOR,AW.TREND_REF_LINE_STYLE].forEach(function(CV){CO=CN[CV];if(CO===undefined){CR[CV]=CU[CV];}else{CR[CV]=CO;}});K.call(this,CN,CU,CR);CR[AW.REF_ENABLED]=CT.enabl===1;CR[AW.REF_SHOW_LABEL]=(CT.la!==BX.DssModelLabelsNone&&CT.la!==BX.DssModelLabelsReserved);CR[AW.REF_LABEL_TYPE]=CT.la;CR[AW.REF_CONST_VALUE]=CT.cst.vv;if(CT.tp===AV.CONST){CR[AW.REF_LINE_NAME]=CT.lin;}CR.existing=true;if(CS[CT.tp]===undefined){CS[CT.tp]=[];}CS[CT.tp].push(CR);CT.clientDef=CR;CP[AS]=CS;}function BQ(AS,CM){if(!AS&&!CM){return true;}if(AS&&CM){return(AS.x===CM.x&&AS.y===CM.y&&AS.width===CM.width&&AS.height===CM.height&&AS.flag===CM.flag);}return false;}function B1(CQ){var CP=[],CO=[],AS=CQ.length,CN,CM;for(CN=0;CN<AS;CN++){CM=CQ[CN];if(CM.actionId===27){CP.push(CM);}else{CO.push(CM);}}CP=CP.concat(CO.reverse());return CP;}function Ap(CS){var CT=CS.cellHandle,CW=CS.mid,CY=this.getMetricSortInfo(),CO=this.getChartInfo();if(CT&&CY.metricId===CW){var CZ=this.xtabModel,Ca=this.getRowHeadersByCell(CT),CP=Ca.headers,CM=CY.elements||[],CR=CM.length,CQ;if(CR===CP.length){for(CQ=0;CQ<CR;CQ++){if(CO.isABL&&this.isStacked){var CV=CP[CQ].id,AS=CM[CQ],CX,CU,CN=CV[2];if(CN!==":"){CN=";";}CX=CV.split(CN)[1];CU=AS.split(CN)[1];if(this.isAttrInZone(CX,"ColorBy")||this.isAttrInZone(CU,"BreakBy")){if(CX!==CU){return false;}}else{if(CZ.getNormalizedFormElementId(CM[CQ])!==CZ.getNormalizedFormElementId(CP[CQ].id)){return false;}}}else{if(CZ.getNormalizedFormElementId(CM[CQ])!==CZ.getNormalizedFormElementId(CP[CQ].id)){return false;}}}this.updateSortIndex(CT);this.showMetricSortIcon=true;return true;}}return false;}function AE(CR,CQ,CM,CS,CO,CT,CN,AS,CP){return{sortIndex:CR,sortType:CQ,objType:CM,objID:CS,ascending:CO,axisIndex:CT,subtotalsPosition:CN,eIds:AS,formId:CP,actionId:26};}function X(AS){return(this.getColTitleInfo(true).items)[AS];}function b(AS){return(this.getRowTitleInfo(true).items)[AS];}function q(AS,CY){var CZ=this.firstRes,CW=CZ.gsi,CQ=CY.id,CT=0,CM=1,CR=2,CS,CU=CW.sorts[AS-1],CP,CX,CO,CN,CV;for(CS=0;CS<CU.length;CS++){CP=CU[CS];CX=CP.key.split("!");CO=CX[CT];CN=CX[CM];CV=CX[CR];if(CN===CQ){if(CP.isAsc===true){return CJ;}return A9;}}return x;}function L(CP){var CO=this.chartType,AS=this.metricsType,CN=this.dz.SizeBy.TemplateMetric,CM=(CN&&CN.length)||0;if(CP===undefined){CP=this.getMetricsOnYAxis();}return((CO===B2.BUBBLE)||(CO===B2.SCATTER))&&(CP.length>1&&CM>1)&&(AS===AG.MetricsByColumn||AS===AG.MetricsByRow);}function Ad(){return this.getSizeByMetrics().length;}function AA(CQ,CR,CP){if(this.fakeGroupInfo===false){if(CR===false){return[];}return CQ;}var CM=CQ.length,CO,AS=Math.ceil(CM/2),CN=[];for(CO=0;CO<CM;CO++){if(CR){if(CO%2===0){CN.push(CQ[CO]);}}else{if(CO%2===1){CN.push(CQ[CO]);}}}if(CP&&CN.length<AS){CN.push(At);}return CN;}function BB(AS,CN){var CM=[];By.forEach(AS,function(CO){CM.push(CN[CO]);});return CM;}function AC(CO,CN){var CM=this.model,AS=CM.getMetricNumberFormat(CN);return D.formatByMask(AS,CO);}function O(CN,CO){var CM=function CM(CQ){return CQ.did===CO;},AS=CN.docModel,CP=AS.getDatasetUnits(["att"],CM);if(CP&&CP[0]){return CP[0];}return undefined;}function Bc(AS,CP){var CO={},CN,CM;CN=Math.max(AS.LowOffset,CP.LowOffset);CM=Math.max(AS.HighOffset,CP.HighOffset);CO.LowOffset=CN;CO.HighOffset=CM;return CO;}function Bv(CN,CM){if(CN.isZeroPadding&&CM.isZeroPadding){return CN;}var AS={};AS.X1=Bc(CN.X1,CM.X1);AS.X2=Bc(CN.X2,CM.X2);AS.Y1=Bc(CN.Y1,CM.Y1);AS.Y2=Bc(CN.Y2,CM.Y2);return AS;}function CE(AS,CM){var CN={};CN.Y1=AS.Y1;CN.Y2=AS.Y2;CN.X1=CM.X1;CN.X2=CM.X2;return CN;}function AD(CM,CO){var AS=this.condenseEchos,CN={};if(AS===undefined){return{X1:false,X2:false,Y1:false,Y2:false};}CN.X1=AS.X1[CO]||false;CN.X2=AS.X2[CO]||false;CN.Y1=AS.Y1[CM]||false;CN.Y2=AS.Y2[CM]||false;return CN;}function Bz(CM,CP,CN,AS){CM=CM||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};CP=CP||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};CN=CN||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};AS=AS||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};var CO={};CO.xPrimaryHighTrim=CM.PrimaryHighTrim||0;CO.xPrimaryLowTrim=CM.PrimaryLowTrim||0;CO.yPrimaryHighTrim=CP.PrimaryHighTrim||0;CO.yPrimaryLowTrim=CP.PrimaryLowTrim||0;CO.xSecondaryHighTrim=CN.SecondaryHighTrim||0;CO.xSecondaryLowTrim=CN.SecondaryLowTrim||0;CO.ySecondaryHighTrim=AS.SecondaryHighTrim||0;CO.ySecondaryLowTrim=AS.SecondaryLowTrim||0;return CO;}function P(AS,CM){AS=AS||{LowTrim:0,HighTrim:0};CM=CM||{LowTrim:0,HighTrim:0};return{xCaHighTrim:AS.HighTrim,yCaHighTrim:CM.HighTrim,xCaLowTrim:AS.LowTrim,yCaLowTrim:AS.LowTrim};}function U(CQ,CM){var CN={},CS=this.getChartInfo();CN.TOP=CQ.TOP;CN.BOTTOM=CQ.BOTTOM;CN.LEFT=CM.LEFT;CN.RIGHT=CM.RIGHT;var AS=false,CP,CO=CS.isABL&&CS.dirc===B6.VERTICAL,CR=true;if(CR){if(CO){AS=true;CP=CQ;}else{AS=true;CP=CM;}}return CN;}function Aq(CN,CM){var AS=CM.length,CO;for(CO=0;CO<AS;CO++){if(CN===CM[CO]){return true;}}return false;}function AY(CM,AS){var CN=AS.col,CX,CO,CR,CP,CV;if(this.view&&this.view.excludeData){var CW=this.firstRes,CS=CW.gsi,CU=CS&&CS.mx,CT=false,CQ;By.forEach(CU,function(CY,CZ){if(CY.did===CM){CT=true;CQ=CZ;}});if(CT){return CQ;}}if(CN){CX=CN.length;CO=CN[CX-1];if(CO&&CO.otp===-1&&CO.es){CV=CO.es;CR=CV.length;for(CP=0;CP<CR;CP++){if(CV[CP].oid===CM){return CP;}}}}return At;}function Ai(CO){var CN,CM,AS,CQ,CR,CP=this.metricsOnDropZone[CO];if(!CP){CN=this.gts;CM=this.dz[CO];AS=CM.TemplateMetric;CP=[];if(AS&&AS.length>0){CR=AS.length;for(CQ=0;CQ<CR;CQ++){CP.push(AY.call(this,AS[CQ].id,CN));}}this.metricsOnDropZone[CO]=CP;}return CP;}function Ak(CM,AS){if(CM.index<AS.index){return -1;}if(CM.index>AS.index){return 1;}return 0;}function A0(CQ){var CO,AS,CR,CP,CM,CN=[];CP=this.colorByInfo;if(CP.tp===BH.ATT||CP.tp===BH.ATT_METRICS){CR=CP.atts;AS=CR.length;for(CO=0;CO<AS;CO++){CM=CR[CO];if(CM.axis===CQ){CN.push({index:CM.uidx,order:CO});}}return CN.sort(Ak);}return[];}function Av(CO,CQ,CM,CP){var CN,AS=CO.length;for(CN=0;CN<AS;CN++){if(CQ===CO[CN]&&(CP===undefined||CP===CM[CN])){return CN;}}return -1;}function Aw(CM,CT,CQ,CW,CV){var CP,CN,CX,CR=CQ.length,AS,CO,CU;if(CR>0&&(CM===undefined||CT===undefined)){B4.visPrint("the extreme is likely missing");return{min:0,max:99999999};}if(CR===0){return undefined;}var CS=false;for(CP=0;CP<CR;CP++){CO=CQ[CP];if(CO===undefined||CO===At){return undefined;}CU=Av(CT,CO,CW,CV);if(CU>=0){AS=CM[CU];if(!CS&&AS.length>=1){CN=n.parseNumeric(AS[0]);CX=n.parseNumeric(AS[1]);CS=true;}else{if(CN>n.parseNumeric(AS[0])){CN=n.parseNumeric(AS[0]);}if(CX<n.parseNumeric(AS[1])){CX=n.parseNumeric(AS[1]);}}}else{B4.visPrint("the metric "+CO+" Not Found in extremes from back end");return{min:0,max:99999999};}}return{min:CN,max:CX};}function o(CR,CT,AS,CQ){var CO=this.extrs,CP,CM,CS,CN,CW,CV;if(CR!==Bm.GLOBAL){CN=this.mapFromChartToLDSIndex(AS,CQ);CW=CN.r;CV=CN.c;}if(CT==="XAxis"||CT==="X2Axis"){CT="x";}else{if(CT==="YAxis"||CT==="Y2Axis"){CT="y";}else{if(CT==="SizeBy"){CT="z";}}}if(CR===Bm.GLOBAL){if(CO.g){CM=CO.g.ex;CP=CO.g.mids;CS=CO.g.etp;}}else{if(CR===Bm.PERROWCOL){if(CT!=="z"){var CU=(CT==="y"?CO.r:CO.c);if(CU){CP=CU.mids;CM=CU.ex[(CT==="y"?CW:CV)];CS=CU.etp;}}else{if(CO.all){CP=CO.all.mids;CM=CO.all.ex[CW][CV];CS=CO.all.etp;}}}else{if(CR===Bm.PERCELL){if(CO.all){CP=CO.all.mids;CM=CO.all.ex[CW][CV];CS=CO.all.etp;}}}}return{mids:CP,exObj:CM,etp:CS};}function d(CM,AS){if(this.isHistogram){return CM;}var CP=this.chartSubType,CN=false,CO=BV.EnumShape.BAR;AS=AS||[];By.forEach(AS,function(CQ){if(CQ===CO){CN=true;}});if(CM&&(CM.min!==undefined&&CM.max!==undefined)){if(CM.min>0){if(CN){CM.min=0;}if(CP===BL.PERCENT){CM.max=1;CM.min=0;}}if(CM.max<0){if(CN){CM.max=0;}if(CP===BL.PERCENT){CM.min=-1;CM.max=0;}}}return CM;}function Ao(CM,CO,CN){var AS;if(CN==="YAxis"){AS=Ag(this.getMetricsOnAxisOfChart(CM,CO,"y",true,true));}else{if(CN==="Y2Axis"){AS=Ag(this.getMetricsOnAxisOfChart(CM,CO,"y",false,true));}else{if(CN==="XAxis"){AS=Ag(this.getMetricsOnAxisOfChart(CM,CO,"x",true,true));}else{if(CN==="X2Axis"){AS=Ag(this.getMetricsOnAxisOfChart(CM,CO,"x",false,true));}else{B4.visPrint("to support");}}}}return AS;}function y(CO,CS,CQ,CR){var AS=CQ[0];if(AS!=="X"&&AS!=="Y"){return null;}this.axisScaleCache=this.axisScaleCache||{};this.axisScaleCache[CR]=this.axisScaleCache[CR]||{};this.axisScaleCache[CR][CQ]=this.axisScaleCache[CR][CQ]||{};var CM=CR,CP=null,CN=this.axisScaleCache[CR][CQ];CN=CN||{};if(CQ[0]==="X"){if(CM===Bm.GLOBAL||CM===Bm.PERROWCOL){CP=CN[CS];}}else{if(CQ[0]==="Y"){if(CM===Bm.GLOBAL||CM===Bm.PERROWCOL){CP=CN[CO];}}else{}}if(!!CP){return CP;}return null;}function AF(CP,CS,CQ,CN,CR){var AS=CQ[0];if(AS!=="X"&&AS!=="Y"){return ;}this.axisScaleCache=this.axisScaleCache||{};this.axisScaleCache[CR]=this.axisScaleCache[CR]||{};this.axisScaleCache[CR][CQ]=this.axisScaleCache[CR][CQ]||{};var CM=CR,CO=this.axisScaleCache[CR][CQ];CO=CO||{};if(CQ[0]==="X"){if(CM===Bm.GLOBAL||CM===Bm.PERROWCOL){CO[CS]=CN;}}else{if(CQ[0]==="Y"){if(CM===Bm.GLOBAL||CM===Bm.PERROWCOL){CO[CP]=CN;}}else{}}}function AP(CR,CY,CO,CN){var CQ=this.getChartInfo(),Ca=this,CT=CQ.dirc,CP=BV.EnumABLDirection,Cd,CZ,Cc,CS,CW,CU,CV,AS,Cb,CM=[],CX;if(CN===undefined){CN=this.axisScale;}CS=y.call(this,CR,CY,CO,CN);if(!!CS){return CS;}Cb=Ao.call(Ca,CR,CY,CO);By.forEach(Cb,function(Ce){CM.push(Ca.getOnTheFlyShapeForMetric(Ce));});CX=o.call(this,CN,CT===CP.VERTICAL?"y":"x",CR,CY);Cd=CX.exObj;CZ=CX.mids;Cc=CX.etp;CS={};if(CT===CP.VERTICAL){if(this.isStacked&&!this.splitPlottingMetrics){CU=(CO==="YAxis")&&Aw(Cd,CZ,[CC.PRIMARY_Y_AXIS],Cc,e);AS=(CO==="Y2Axis")&&Aw(Cd,CZ,[CC.SECONDARY_Y_AXIS],Cc,e);}else{CU=(CO==="YAxis")&&Aw(Cd,CZ,Cb,Cc,e);AS=(CO==="Y2Axis")&&Aw(Cd,CZ,Cb,Cc,e);}if(CU){CU=d.call(Ca,CU,CM);CS.min=CS.YMin=CU.min;CS.max=CS.YMax=CU.max;}if(AS){AS=d.call(Ca,AS,CM);CS.min=CS.Y2Min=AS.min;CS.max=CS.Y2Max=AS.max;}}else{if(this.isStacked&&!this.splitPlottingMetrics){CW=(CO==="XAxis")&&Aw(Cd,CZ,[CC.PRIMARY_X_AXIS],Cc,e);CV=(CO==="X2Axis")&&Aw(Cd,CZ,[CC.SECONDARY_X_AXIS],Cc,e);}else{CW=(CO==="XAxis")&&Aw(Cd,CZ,Cb,Cc,e);CV=(CO==="X2Axis")&&Aw(Cd,CZ,Cb,Cc,e);}if(CW){CW=d.call(Ca,CW,CM);CS.min=CS.XMin=CW.min;CS.max=CS.XMax=CW.max;}if(CV){CV=d.call(Ca,CV,CM);CS.min=CS.X2Min=CV.min;CS.max=CS.X2Max=CV.max;}}AF.call(this,CR,CY,CO,CS,CN);return CS;}function Ac(CN,CW,CQ,CX){var CR,CP,CO,CT,CS,CY,CV,CU,CM,CZ,AS;if(CX===undefined){CX=this.axisScale;}CR=y.call(this,CN,CW,CQ,CX);if(!!CR){return CR;}CT=o.call(this,CX,"x",CN,CW);CV=CT.exObj;CM=CT.mids;CP=CT.etp;CS=o.call(this,CX,"y",CN,CW);CU=CS.exObj;CZ=CS.mids;CO=CS.etp;CY=Ao.call(this,CN,CW,CQ);if(CQ==="YAxis"){AS=Aw(CU,CZ,CY,CO,e);CR={YMin:AS&&AS.min,YMax:AS&&AS.max};}else{if(CQ==="Y2Axis"){AS=Aw(CU,CZ,CY,CO,e);CR={Y2Min:AS&&AS.min,Y2Max:AS&&AS.max};}else{if(CQ==="XAxis"){AS=Aw(CV,CM,CY,CP,e);CR={XMin:AS&&AS.min,XMax:AS&&AS.max};}else{if(CQ==="X2Axis"){AS=Aw(CV,CM,CY,CP,e);CR={X2Min:AS&&AS.min,X2Max:AS&&AS.max};}else{B4.visPrint("to support");}}}}CR.min=AS&&AS.min;CR.max=AS&&AS.max;AF.call(this,CN,CW,CQ,CR,CX);return CR;}function Ax(CO,CR){var CM,CQ,CP,AS,CN,CS=AY.call(this,CO,this.gts);CM=o.call(this,Bm.GLOBAL);CQ=CM.exObj;CP=CM.mids;AS=CM.etp;if(CR===true){CN=Aw(CQ,CP,[CS],AS,BY);}else{CN=Aw(CQ,CP,[CS],AS,e);}return CN;}function Bj(CP,CS){var CR=this.getChartInfo(),AS={},CO=this,CQ=["YAxis","Y2Axis","XAxis","X2Axis"],CM,CN;CN=CR.isABL?AP:Ac;CQ.forEach(function(CT){CM=CN.call(CO,CP,CS,CT);An.copy(CM,AS);});return AS;}function Bh(CM){var AS=["AllMetrics","XAxis","X2Axis","YAxis","Y2Axis","SizeBy"];return(AS.indexOf(CM)<0);}function A4(CQ,CO,CN){var CT,CP,Cb=0,CV=1,Ca=2,CR=3,CS,CX,CW=this.axisScale,CU,AS,CZ,CY;CY=this.view.getWidgetPropertyValue(AW.AXIS_SCALE_DATA);if(CQ!==undefined){CU=(this.model.getMetricIDsFromIndex([CQ]))[0];}if(CW!==Bm.CUSTOM||!CY){return CW;}CX=parseInt(CY[0][CV],10);if(CX!==Bm.DIFFERENT){if(CN!==undefined){CN.min=parseFloat(CY[0][Ca]);CN.max=parseFloat(CY[0][CR]);}return CX;}for(CT=1,CP=CY.length;CT<CP;CT++){CS=CY[CT];var CM=CS[Cb];if(CO!==undefined&&CM===CO){AS=parseInt(CS[CV],10);if(CN!==undefined){CN.min=parseFloat(CS[Ca]);CN.max=parseFloat(CS[CR]);}break;}if(CU!==undefined&&CU===CM){CZ=parseInt(CS[CV],10);if(CN!==undefined){CN.min=parseFloat(CS[Ca]);CN.max=parseFloat(CS[CR]);}}}return AS!==undefined?AS:CZ;}function AT(CR){var CM=Bh(CR),CN,CQ=[],AS,CP=0,CS=0,CO=this;if(CM){AS=this.getMetricIndexFromID(CR);return[this.getOnTheFlyShapeForMetric(AS)];}CN=Ao.call(this,CP,CS,CR);By.forEach(CN,function(CT){CQ.push(CO.getOnTheFlyShapeForMetric(CT));});return CQ;}function B7(CM,CV,CW){var CX=this,CN=this.getChartInfo(),Ca=o.call(this,Bm.GLOBAL),CR,CU,CY,CT,CS,CZ=Bh(CM);var AS;var CP={};if(CZ){var CQ=AY.call(this,CM,this.gts);AS=A4.call(this,CQ,undefined,CP);}else{AS=A4.call(this,undefined,CM,CP);}if(!CW){if(AS===Bm.CUSTOM){return{min:CP.min,max:CP.max,scaleType:AS};}}if(!CZ){if(CM==="SizeBy"){CR=Ca.exObj;CU=Ca.mids;CY=Ca.etp;if(CN.tp===B2.BUBBLE||CN.tp===B2.SCATTER){CS=Ag(this.getMetricsOnAxisOfChart(0,0,"z"));}else{CS=this.getSizeByMetrics();}CT=Aw(CR,CU,CS,CY,BY);}else{var CO=CN.isABL?AP:Ac;CT=CO.call(this,0,0,CM,Bm.GLOBAL);}}else{CT=Ax.call(this,CM,CV);}if(CT){if(CN.isABL&&AS!==Bm.CUSTOM){CT=d.call(CX,CT,AT.call(CX,CM));}return{min:CT.min,max:CT.max,scaleType:AS};}B4.visPrint("getGlobalExtremeForAxisOrMetric getting faked extreme");return{min:0,max:99999999,scaleType:AS};}function Bw(Cq,Cr,Cy,Cj){var C1=this.getChartInfo(),CX=this,Cm=0,CW=1,Cc=2,Cx=3,CQ=4,Cl=5,Cg=7,C2=8,CZ=Cj.length,Cu,Cn,CS,Cs,Ct=false,Cz,Ce,CR,Ck,CY,Cp,CU,Cw,CT,AS,Co,CM,Cf,C0=["Dumy","x","y","z","x2","y2"],Cd=["Dumy","XAxis","YAxis","SizeBy","X2Axis","Y2Axis"];Cf=C0[Cd.indexOf(Cq)];var CP=true,Ca;if(Cf==="x2"){Cf="x";CP=false;}if(Cf==="y2"){Cf="y";CP=false;}for(Cu=1;Cu<CZ;Cu++){Cn=Cj[Cu];CS=Cn[Cm];if(CS===Cq){Ct=true;Cs=parseInt(Cn[CW],10);if(Cs===Bm.CUSTOM){Ce=parseFloat(Cn[Cx]);Cz=parseFloat(Cn[Cc]);CR=n.isTrueForBoolValue(Cn[Cg]);Ck=n.isTrueForBoolValue(Cn[C2]);return{max:Ce,min:Cz,autoMin:CR,autoMax:Ck};}if(Cq==="SizeBy"){CT=o.call(this,Cs,Cq,Cr,Cy);CY=CT.exObj;Cp=CT.mids;CU=CT.etp;if(C1.tp===B2.BUBBLE||C1.tp===B2.SCATTER){Co=Ag(this.getMetricsOnAxisOfChart(Cr,Cy,"z"));}else{Co=this.getSizeByMetrics();}Cw=Aw(CY,Cp,Co,CU,BY);}else{Ca=C1.isABL?AP:Ac;Cw=Ca.call(this,Cr,Cy,Cq,Cs);}return{max:Cw.max,min:Cw.min,autoMin:false,autoMax:false};}}AS=this.gts;var CO,Ci,Ch,CN,Cv=Ag(this.getMetricsOnAxisOfChart(Cr,Cy,Cf,CP));if(Ct===false){var Cb=true;Ce=Cz=undefined;for(Cu=1;Cu<CZ;Cu++){Cn=Cj[Cu];CS=Cn[Cm];Cs=parseInt(Cn[CW],10);if(Bh(CS)){CM=AY.call(this,CS,AS);if(Aq(CM,Cv)){if(Cs===3){Ch=n.isTrueForBoolValue(Cn[Cg]);CN=n.isTrueForBoolValue(Cn[C2]);Ci=CN?parseFloat(Cn[Cl]):parseFloat(Cn[Cx]);CO=Ch?parseFloat(Cn[CQ]):parseFloat(Cn[Cc]);}else{CT=o.call(this,Cs,Cq,Cr,Cy);CY=CT.exObj;Cp=CT.mids;CU=CT.etp;Cw=Aw(CY,Cp,[CM],CU,Cq==="SizeBy"?BY:e);if(C1.isABL&&Cq!=="SizeBy"){var CV=CX.getOnTheFlyShapeForMetric(CM);Cw=d.call(CX,Cw,[CV]);}Ci=Cw.max;CO=Cw.min;Ch=false;CN=false;}if(Cb){Cz=CO;Ce=Ci;CR=Ch;Ck=CN;}else{Cz=Cz<CO?Cz:CO;Ce=Ce>Ci?Ce:Ci;CR=CR===Ch?CR:false;Ck=Ck===CN?Ck:false;}Cb=false;}}}return{max:Ce,min:Cz,autoMin:CR,autoMax:Ck};}}function Aa(CU,Ce,Cd){var CT=1,Ca=2,Cb=3,Cg=4,AS=5,CN=7,CP=8,Cf,CV,CY;Cf=Cd[0];CY=parseInt(Cf[CT],10);if(CY===Bm.CUSTOM){var CO,CQ,CX,CZ;CX=n.isTrueForBoolValue(Cf[CN]);CZ=n.isTrueForBoolValue(Cf[CP]);CO=CX?parseFloat(Cf[Cg]):parseFloat(Cf[Ca]);CQ=CZ?parseFloat(Cf[AS]):parseFloat(Cf[Cb]);CV={XMin:CO,XMax:CQ,YMin:CO,YMax:CQ,ZMin:CO,ZMax:CQ,X2Min:CO,X2Max:CQ,Y2Min:CO,Y2Max:CQ,XAutoMin:CX,XAutoMax:CZ,X2AutoMin:CX,X2AutoMax:CZ,YAutoMin:CX,YAutoMax:CZ,Y2AutoMin:CX,Y2AutoMax:CZ,ZAutoMin:CX,ZAutoMax:CZ};}else{var CM,Cc,CR,CS,CW;CM=Bw.call(this,"XAxis",CU,Ce,Cd);Cc=Bw.call(this,"YAxis",CU,Ce,Cd);CS=Bw.call(this,"X2Axis",CU,Ce,Cd);CW=Bw.call(this,"Y2Axis",CU,Ce,Cd);CR=Bw.call(this,"SizeBy",CU,Ce,Cd);CV={XMin:CM.min,XMax:CM.max,YMin:Cc.min,YMax:Cc.max,ZMin:CR.min,ZMax:CR.max,X2Min:CS.min,X2Max:CS.max,Y2Min:CW.min,Y2Max:CW.max,XAutoMin:CM.autoMin,XAutoMax:CM.autoMax,X2AutoMin:CS.autoMin,X2AutoMax:CS.autoMax,YAutoMin:Cc.autoMin,YAutoMax:Cc.autoMax,Y2AutoMin:CW.autoMin,Y2AutoMax:CW.autoMax,ZAutoMin:CR.autoMin,ZAutoMax:CR.autoMax};}return CV;}function BO(){var CO=this.colorByInfo,CM,CR,CQ,AS,CP,CN;if(CO.tp===BH.METRICS){CN=CO.colorByMetricIndex;CM=o.call(this,Bm.GLOBAL,"c",0,0);CR=CM.exObj;CQ=CM.mids;AS=CM.etp;CP=Aw(CR,CQ,[CN],AS,Ay);return CP;}return undefined;}function BR(CM){var AS;if(CM==="x1"){AS="x";}else{if(CM==="y1"){AS="y";}else{AS=CM;}}return AS.toUpperCase();}function BZ(Ca,Cg){var CN,CY=this.getChartInfo(),CR=B2,CO=this.axisScale,CM,CZ,CT,Cb,CW,CV,AS,Cc,CQ,Cf,CX=this.getSizeByMetrics(),CS=CX.length>0;if(CO===Bm.CUSTOM){Cf=this.view.getWidgetPropertyValue(AW.AXIS_SCALE_DATA);}if(CY.isABL){if(CO===Bm.CUSTOM){Cb=Aa.call(this,Ca,Cg,Cf);if(CY.isABL&&this.chartSubType===BL.PERCENT){if(CS){var Cj=CX[0];if(A4.call(this,Cj,"SizeBy")===Bm.CUSTOM){CW=this.model.mx[Cj].max;CV=this.model.mx[Cj].min;Cb.ZMin=Cb.ZMin*(CW-CV)+CV;Cb.ZMax=Cb.ZMax*(CW-CV)+CV;}}}}else{Cb=Bj.call(this,Ca,Cg);if(CS){var Ce=o.call(this,CO,"z",Ca,Cg);CM=Ce.exObj;CZ=Ce.mids;CT=Ce.etp;AS=Aw(CM,CZ,CX,CT,BY);if(AS){Cb.ZMin=AS.min;Cb.ZMax=AS.max;}}}}else{if(CY.tp===CR.BUBBLE||CY.tp===CR.SCATTER){CQ=Ag(this.getMetricsOnAxisOfChart(Ca,Cg,"z"));if(CO===Bm.CUSTOM){Cb=Aa.call(this,Ca,Cg,Cf);}else{Cb=Bj.call(this,Ca,Cg);if(CS){Cc=o.call(this,CO,"z",Ca,Cg);CM=Cc.exObj;CZ=Cc.mids;CT=Cc.etp;AS=Aw(CM,CZ,CQ,CT,BY);if(AS){Cb.ZMin=AS.min;Cb.ZMax=AS.max;}}}if(CS&&CQ.length>0&&Cb.ZMin===undefined&&Cb.ZMax===undefined){var CP=this.sizeByMetricsSharedInAxis;if(CP.length>1){var Cd=[],CU=[];CP.forEach(function(Ck){Cd.push(Cb[BR(Ck)+"Min"]);CU.push(Cb[BR(Ck)+"Max"]);});Cb.ZMin=Cd.sort()[0];Cb.ZMax=CU.sort()[CU.length-1];}else{if(CP.length===1){var Ci=this.collisionSizeByMetric;var Ch=A4.call(this,Ci[0],BR(CP[0])+"Axis");if(Ch===Bm){Cb.ZMin=Cb[BR(CP[0])+"Min"];Cb.ZMax=Cb[BR(CP[0])+"Max"];}else{if(Ch!==Bm.GLOBAL){Ch=Bm.PERCELL;}Cc=o.call(this,Ch,"z",Ca,Cg);CM=Cc.exObj;CZ=Cc.mids;CT=Cc.etp;AS=Aw(CM,CZ,CQ,CT,undefined);if(AS){Cb.ZMin=AS.min;Cb.ZMax=AS.max;}}}}}}else{if(CY.tp===CR.GRID){if(CO===Bm.CUSTOM){Cb=Aa.call(this,Ca,Cg,Cf);}else{Cc=o.call(this,CO,"z",Ca,Cg);CM=Cc.exObj;CZ=Cc.mids;CT=Cc.etp;AS=Aw(CM,CZ,CX,CT,BY);if(AS){Cb={ZMin:AS.min,ZMax:AS.max};}else{Cb={};}}}}}CN={YMinValue:Cb.YMin,YMaxValue:Cb.YMax,Y2MinValue:Cb.Y2Min,Y2MaxValue:Cb.Y2Max,XMinValue:Cb.XMin,XMaxValue:Cb.XMax,X2MinValue:Cb.X2Min,X2MaxValue:Cb.X2Max,ZMinValue:Cb.ZMin,ZMaxValue:Cb.ZMax};An.copyProps(["XAutoMin","XAutoMax","X2AutoMin","X2AutoMax","YAutoMin","YAutoMax","Y2AutoMin","Y2AutoMax","ZAutoMin","ZAutoMax"],Cb,CN);return CN;}function BU(CQ,CP){var CO=false,CM=this,AS,CN=false;By.forEach(CQ,function(CR){if(CR===undefined||CR<0){CN=true;}else{AS=A4.call(CM,CR,CP);if(AS===Bm.CUSTOM){CO=true;}}});return{emptyAxis:CN,customAxisEnabled:CO};}function BT(CP,CS){var CN,CQ,CO,AS,CM,CR;CQ=BZ.call(this,0,0);CN={origMin:CQ.ZMinValue,origMax:CQ.ZMaxValue};CO=CN.origMin;AS=CN.origMax;if(CS&&CO<0){CR=this.getSizeByExtremeForNegativeProportionalMode(CP);CO=CR.min||CO;AS=CR.max||AS;}CM=[AS];if(CO!==AS){CM.push(CO);}return CM;}function Al(CN){if(CN===undefined){CN=true;}var Cg,Cb=this.getMetricsOnXAxis(),CY=this.getMetricsOnYAxis(),CU=this.getChartInfo(),CQ=CU.tp,Cl=this.getSizeByMetrics(),CO=this.getColorByMetrics(),Ch=this.model,CX=Ch.getMetricNames(),Cc=BB(Cl,CX),Ck=this.markerShape,Cn=[],Cm=[],CT=0,Cd=true,Ci=0,Cf=0,CS=[],Ca=true,CM=this.model.cic,Cj=this.model.cir,AS,CV,CR,CZ,CW,CP,Ce;Cg=Math.min(Cb.length,CY.length);if(Cl.length>0){Cg=Math.min(Cg,Cl.length);}if(Cc&&Cc[0]&&Ck!==Ah.AREA){if((!L.call(this)&&this.getSizeByScaleType(0)===Bm.GLOBAL)||(!L.call(this)&&this.getSizeByScaleType(0)===Bm.CUSTOM)||(!L.call(this)&&(CM===1&&Cj===1&&((CQ===B2.BUBBLE||CQ===B2.SCATTER)||CQ===B2.GRID||CU.isABL)))){AS=BT.call(this,Cl[0],this.property.readItem(AW.MIN_SIZE_TYPE)===Br.PROPORTIONAL);CV=AS.length;CR=0;CZ=0;CW="";for(Ci=0;Ci<CV;Ci++){CZ=AS[Ci];if(isNaN(CZ)){CW="NaN";}else{CW=AC.call(this,CZ,Cl[0]);Ca=false;}Cn.push({diameter:CR,value:CW,num:CZ});}CP=Cn.length;if(CP>0){Ce=false;if(Ce){for(Ci=0;Ci<CP;++Ci){Cn[Ci].value=n.formatNumber(Cn[Ci].num,"up").s;}}}}else{Cd=false;for(Ci=0;Ci<Cc.length;Ci++){Ca=false;if(!Ca){break;}}}if(Cc.length>1&&!L.call(this)){for(Cf=0;Cf<Cg;Cf++){if(CU.isPie&&CO&&CO.indexOf(Cl[Cf])!==-1){Cm[Cf]="Total of "+Cc[Cf];}else{Cm[Cf]=Cc[Cf];}}}else{for(Cf=0;Cf<Cc.length;Cf++){if(CU.isPie&&CO&&CO.indexOf(Cl[Cf])!==-1){Cm[Cf]="Total of "+Cc[Cf];}else{Cm[Cf]=Cc[Cf];}}}if(Ck===Ah.CIRCLE||Ck===Ah.LINE){CT=BK.CIRCLE;}else{CT=BK.SQUARE;}for(Ci=0;Ci<Cc.length;Ci++){if(this.getSizeByScaleType(Ci)===Bm.CUSTOM){CS.push(Cc[Ci]);}}}if(Ca){Cm=[];}return{sizeByDataProvider:Cn,sizeByTitles:Cm,sizebyType:CT,sizeByMode:Cd,sizeByScaleType:CS};}function BA(CO,CS,CR,CN){var CM=B2,CT=BV.EnumABLDirection,AS,CP,CQ=(CO===CM.BAR||CO===CM.LINE||CO===CM.AREA);if(CQ){if(CN!==Ah.BAR){if(CS===BL.CLUSTERED){CS=BL.ABSOLUTE;}}else{if(CS===BL.ABSOLUTE){CS=BL.CLUSTERED;}}if(CO===CM.BAR){if(CS===BL.ABSOLUTE){if(CN===Ah.BAR){CS=BL.CLUSTERED;}}}}if(CQ&&CS===BL.AUTO){if(CN===B0.AREA){CS=BL.STACKED;}else{if(CN===B0.BAR){CS=BL.CLUSTERED;}else{CS=BL.ABSOLUTE;}}}if(CQ&&CN===B0.BAR&&CS===BL.ABSOLUTE){CS=BL.CLUSTERED;}if(CO===CM.AREA){if(CR===CT.VERTICAL){switch(CS){case BL.ABSOLUTE:AS=1;break;case BL.STACKED:AS=2;break;case BL.PERCENT:AS=7;break;}}else{switch(CS){case BL.ABSOLUTE:AS=8;break;case BL.STACKED:AS=9;break;case BL.PERCENT:AS=14;break;}}}else{if(CO===CM.BAR){if(CR===CT.VERTICAL){switch(CS){case BL.CLUSTERED:AS=15;break;case BL.ABSOLUTE:AS=91;break;case BL.STACKED:AS=16;break;case BL.PERCENT:AS=21;break;}}else{switch(CS){case BL.CLUSTERED:AS=22;break;case BL.ABSOLUTE:AS=92;break;case BL.STACKED:AS=23;break;case BL.PERCENT:AS=28;break;}}}else{if(CO===CM.LINE){if(CR===CT.VERTICAL){switch(CS){case BL.ABSOLUTE:AS=29;break;case BL.STACKED:AS=30;break;case BL.PERCENT:AS=35;break;}}else{switch(CS){case BL.ABSOLUTE:AS=36;break;case BL.STACKED:AS=37;break;case BL.PERCENT:AS=42;break;}}}else{if(CO===CM.BUBBLE){AS=61;}else{if(CO===CM.SCATTER){AS=51;}else{if(CO===CM.GRID){AS=20000;}else{B4.visPrint("the ce chart type is not found");}}}}}}return{ceChartType:AS,shape:CN,subType:CS};}function Bu(CQ,CU,CN,CX){var Ca=this.hasGroupInfoStored(),CO=this.gts,CW=[],Cb=this.dz,CP,CM,CR,CT,CZ,AS,CS,CY=this;if(this.shallWeUseGroupInfo&&CU&&Ca.existing){var CV=Ca.gi;if(CN===true){By.forEach(CV,function(Cd){var Cc=Cd[0];if(Cc!==At){Cd[0]=AY.call(CY,Cc,CO);}Cc=Cd[1];if(Cc!==At){Cd[1]=AY.call(CY,Cc,CO);}});}By.forEach(CV,function(Cc){if(CU===true){CW.push(Cc[CQ]);}else{if(Cc[CQ]!==At){CW.push(Cc[CQ]);}}});return CW;}CP=this.getChartInfo();if(CP.isABL){if(CP.dirc===B6.VERTICAL){if(CX==="x"){return CW;}CM=Cb.YAxis;}else{if(CX==="y"){return CW;}CM=Cb.XAxis;}}else{if(CX==="x"){CM=Cb.XAxis;}else{CM=Cb.YAxis;}}CR=CM.TemplateMetric;By.forEach(CR,function(Cc){CT=Cc.idx;CZ=Cc.id;AS=parseInt(Cc.ax,10);CS=(AS===Z.PRIMARY);if((CQ===0&&CS===true)||(CQ===1&&CS===false)){if(CN){CW.push(CT);}else{CW.push(CZ);}}});return CW;}function CK(){var CM,AS,CN=this.getChartInfo();if(CN.isABL){if(CN.dirc===B6.VERTICAL){CM=this.getMetricsOnYAxis();}else{CM=this.getMetricsOnXAxis();}}else{if(CN.tp===B2.GRID){CM=[];}else{CM=this.getMetricsOnYAxis();AS=this.bubbleSeriesNum;if(CN.isBubbleOrScatter&&AS!==undefined){CM=CM.slice(0,AS);}}}return CM;}function t(AS){var CM=[1,2,7,15,91,16,21,29,30,35];if(Aq(AS,CM)){return 1;}return 0;}function CB(AS){var CM=[8,9,14,22,92,23,28,36,37,42];if(Aq(AS,CM)){return 1;}return 0;}function Y(CO,AS){if(!CO||AS>=CO.length){return 1;}var CN,CM=0;for(CN=0;CN<AS;CN++){CM+=(CO[CN]||0);}return CM%2+1;}function AL(CS,CR,CT,CO,CM){var CN,AS=CM.items.slice(CR,CR+CO),CP=AS.length,CQ=[];for(CN=0;CN<CP;CN++){CQ.push({items:AS[CN].items.slice(CS,CS+CT)});}return CQ;}function Bb(AS,CQ){var CO=[];var CP=0;var CM=Math.floor(AS/CQ);var CN=CQ;while(CN--){CO.push(CP);CP+=CM;}CO.push(AS);return CO;}function Bx(AS){var CN=AS.TemplateUnit,CM=0;if(CN){By.forEach(CN,function(CO){CM+=n.getAttributeFormCnt(CO);});}return CM;}function BN(CN){var CQ=CN.gsi,CP=CQ.mx,CO=CN.nf,CM,AS=CP&&CP.length;for(CM=0;CM<AS;CM++){if(typeof CO[CM].nfs!=="string"){CO[CM].nfs=B4.getNumberFormat(CN,CM);}if(CP[CM].numfmt===undefined){CP[CM].numfmt=CO[CM].nfs;}}}function B3(CM,CS){var CP=CS.gts,CO=CP.row,CQ=CP.col,CN;function AS(CX,CU,CW){var CV=CU.length,CT;for(CT=0;CT<CV;CT++){if(CX===CU[CT][CW]){return CT;}}return -1;}[CQ,CO].forEach(function(CU){if(!CN&&CU){var CT=CU[CU.length-1];if(CT&&CT.otp===-1&&CT.es){CN=CT.es;}}});function CR(CW,CV,CY,CX){var CU=AS(CW.id,CV,"id");if(CU>=0){var Ca=CV[CU],CT=Ca.dropzones=Ca.dropzones||[],CZ=An.clone(Ca.fs);CW.uidx=CU;CW.axis=CY;CW.fs=CZ;CW.fcnt=CZ&&CZ.length;CW.n=Ca.n;CW.cs=Ca.cs;CW.rs=Ca.rs;CT.push(CX);}}["Rows","Columns","SizeBy","AngleBy","Angle","SliceBy","ColorBy","XAxis","YAxis","BreakBy","AdditionalMetrics"].forEach(function(CX){var CZ=CM[CX];if(CZ){var CV=0,CU=CZ.TemplateUnit,CW;if(CU){while(CV<CU.length){CW=CU[CV];if(CW.t===v.Dimension){var CT=[];CO.concat(CQ).forEach(function(Ca){if(Ca.hid===CW.id){CT.push({id:Ca.id,t:Ca.t,srcUnit:CW});}});Array.prototype.splice.apply(CU,[CV,1].concat(CT));CV+=CT.length;}else{CV++;}}CU.forEach(function(Cb,Ca){Cb.idx=Ca;});}(CU||[]).forEach(function(Ca){CR(Ca,CO,"row",CX);CR(Ca,CQ,"col",CX);});var CY=CZ.TemplateMetric;if(CN&&CY){CY.forEach(function(Cb){var Ca=AS(Cb.id,CN,"oid");if(Ca>=0){Cb.dzidx=Cb.idx;Cb.idx=Ca;Cb.n=CN[Ca].n;CN[Ca].cds=Cb.cds;}});}}});}function AJ(CN){var CO=["XAxis","YAxis","BreakBy","Rows","Columns","SliceBy"],CQ,CM,AS=CO.length,CP,CR=[];for(CP=0;CP<AS;CP++){CM=CO[CP];CQ=CN[CM];if(CQ&&CQ.MetricNames!==undefined){CR.push(CM);}}if(CR.length===1){switch(CR[0]){case"XAxis":return AG.MetricsByXAxis;case"YAxis":return AG.MetricsByYAxis;case"BreakBy":return AG.MetricsByBreakBy;case"Rows":return AG.MetricsByRow;case"Columns":return AG.MetricsByColumn;case"SliceBy":return AG.MetricsBySlice;}}else{if(CR.length===2){if((CR[0]==="XAxis"&&CR[1]==="YAxis")||(CR[1]==="XAxis"&&CR[0]==="YAxis")){return AG.MetricsByAxis;}B4.visPrint("the metricsBy item is incorrect #1");return AG.MetricsByRow;}}if(CR.length>2){B4.visPrint("the metricsBy item is incorrect #2");return AG.MetricsByRow;}if(CR.length===0){return AG.MetricsByRow;}}function BE(){var AS=this.dz,CP=this.getChartInfo(),CN=CP.isABL,CO=AS.Rows.MetricNames!==undefined,CM=AS.YAxis.TemplateUnit===undefined;return CN&&CO&&CM;}function W(){var AS=this.dz,CN=AS.Columns.MetricNames!==undefined,CM=AS.XAxis.TemplateMetric===undefined;return CN&&CM;}function BI(CN){var AS=this.dz,CM=AS[CN];return(CM.MetricNames!==undefined);}function BF(CO){var AS=this.dz,CM=AS[CO],CN=Object.keys(CM);return BI.call(this,CO)&&CN.length===1;}function Bd(){var CQ=this.getChartInfo(),CP=CQ.isPie,CN=CQ.isGrid,CO=BF.call(this,"XAxis")||BF.call(this,"YAxis"),AS=this.getMetricsOnAngleBy(),CM=AS.length>=2;return CN&&CP&&CO&&CM;}function AH(CV,CM){var CX=this.dz,CS=[],CR,CQ,CT,CW,CU,CO,CN,CP,AS=this.gts;CU=CX[CV].TemplateUnit;if(CU){CR=CU.length;for(CQ=0;CQ<CR;CQ++){CT=CU[CQ];CO=CT.axis;if(CO==="row"){CN=AS.row;}else{CN=AS.col;}CP=CT.uidx;CW=CN[CP];if(CW){if(CM&&CW[CM]){CS.push(CW[CM]);}else{CS.push(CW);}}}}return CS;}function As(CZ,AS){var Cb=CZ.ColorBy,CT=[],CU,CQ,CX,CW,CV=Cb.TemplateUnit,CR=Cb.TemplateMetric,Ca=false,CO=false,CP=false,CM=BH.NULL,CN;if(CV&&CV.length>0){Ca=true;}if(CR&&CR.length>0){CW=CR[0].idx;CO=true;CN=CR[0].id;}if(Cb.MetricNames!==undefined){CP=true;}if(!(CP||CR||Ca)){return{tp:BH.NULL};}if(Ca){if(CP){CM=BH.ATT_METRICS;}else{CM=BH.ATT;}CU=CV.length;for(CQ=0;CQ<CU;CQ++){CT.push(CV[CQ]);}return{tp:CM,atts:CT};}if(CP){CM=BH.METRICS_ITEM;return{tp:CM};}if(CO){CM=BH.METRICS;CX=AS.gsi;this.thresholds=CX.thresholds;var CY=this.thresholds&&this.thresholds[CN],CS;if(!CY){return{tp:BH.NULL};}CS=B4.getRankMode(CY);return{tp:CM,metrics:CR,rankMode:CS,colorByMetricIndex:CW,thresholds:CY};}}function h(CM,CN,AS){var CO=document.createElement("div");CO.setAttribute("class","gm-zero-line horizontal");CO.style.width=CM+"px";CO.style.top=CN+"px";CO.style.left="0px";if(AS){Ba.addClass(CO,"dashed");}else{Ba.addClass(CO,"nondashed");}return CO;}function BM(CM,CN,AS){var CO=document.createElement("div");CO.setAttribute("class","gm-zero-line vertical");CO.style.height=CM+"px";CO.style.top="0px";CO.style.left=CN+"px";if(AS){Ba.addClass(CO,"dashed");}else{Ba.addClass(CO,"nondashed");}return CO;}function AQ(CT){var CM,AS,CO,CS,CN=CT.dataProvider,CU=R.call(this),CP,CR=this.defn,CQ=CR.gpp;if(this.ChartFactory===undefined){this.ChartFactory=new B8.MsiChart();this.ChartFactory.setController(this.controller);}CO=this.ChartFactory;AS=this.sharedFormatManager;if(!AS){AS=CO.createFormatManager(CQ,this.sharedPool);}if(CU){this.sharedFormatManager=AS;}CM=CO.createDataSet({dataProvider:CN,formatManager:AS});if(CM===null){return null;}if(CM.GetStatus(true)===0){return null;}CS=this.addDisposable(CO.createChartFromFormatManager(CM,AS,null,this.view.enableCETimer));CP=CS.IsDataEnough();if(!CP){n.destroyDisposable(this,CS.id);return null;}if(this.useCECanvas){CS.setCanvasProps({type:"JSON"});}else{CS.setCanvasProps({type:"SVG",gradPrefix:"gmGrad",mGradientCount:++AU,seriesDrawOrder:CM.GetSeriesIndexByPriority()});}return CS;}function B(CM){var CV=CM?CM.length:0,CU,CT,CR,AS,CX,CN,CP;var CS=function(Ca){var CY,CZ=-1;if(Ca&&Ca.indexOf&&Ca.indexOf("idx")>=0){CY=Ca.split(":");if(CY&&CY.length===2){CZ=parseInt(CY[1]);}}return CZ;};var CQ=function(Ce,Cg){var Ca=this.getChartInfo(),Cd,Cc=null,Ch=this.dz,CZ,Cb,Cf,CY;if(Ca.dirc===B6.VERTICAL){CZ=Ch.YAxis;Cf=CZ.TemplateMetric;Cd=Cf&&Cf.length>0&&Cf[Ce];if(Cd){CY=parseInt(Cd.ax,10);if(CY===Z.PRIMARY&&Cg||CY===Z.SECONDARY&&!Cg){Cc=Cd.id;}}}else{if(Ca.dirc===B6.HORIZONTAL){Cb=Ch.XAxis;Cf=Cb.TemplateMetric;Cd=Cf&&Cf.length>0&&Cf[Ce];if(Cd){CY=parseInt(Cd.ax,10);if(CY===Z.PRIMARY&&Cg||CY===Z.SECONDARY&&!Cg){Cc=Cd.id;}}}}return Cc;};var CO=function(CZ,CY,Cc){var Cb=CZ[CY],Ca=Cc?0:1;if(Cb[0]===At||Cb[1]===At){CZ[CY]=undefined;}else{Cb[Ca]=At;}};for(CU=0;CU<CV;CU++){CT=CM[CU];CR=CT[0];AS=CS(CR);if(AS>=0){CP=CQ.call(this,AS,true);if(CP){CT[0]=CP;}else{CO(CM,CU,true);}}CX=CT[1];CN=CS(CX);if(CN>=0){CP=CQ.call(this,CN,false);if(CP){CT[1]=CP;}else{CO(CM,CU,false);}}}var CW=[];for(CU=0;CU<CV;CU++){if(CM[CU]!==undefined){CW.push(CM[CU]);}}this.setGroupInfo(CW);return CW;}function AN(AS,CT,CP,CN,CR){var CQ=document.createElement("div"),CO=(CN==="x"?CT:AS)-CP,CM,CS;CO=CO>0?CO:0;CM=CN==="x"?AS:CO;CS=CN==="x"?CO:CT;CQ.style.position="absolute";CQ.style.width=CM+"px";CQ.style.height=CS+"px";CQ.style[J[CN][CR?"first":"second"]]="0px";return CQ;}mstrmojo.gm.GMController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMController",dualAxisEnabled:false,model:undefined,firstRes:undefined,view:undefined,drawer:undefined,manager:undefined,horizontalMode:false,enablePartialRendering:false,chartType:-1,isBlankGrid:false,chartSubType:BL.AUTO,chartDirection:-1,rowHeaderCnt:2,colHeaderCnt:2,splitPlottingMetrics:undefined,inChartLayout:undefined,mWd:0,mHt:0,isEmpty:false,ceChartType:BS.DssGraphTypeVertical_Line_Absolute,isPercentage:false,isStacked:false,isPie:false,isHistogram:false,isBoxPlot:false,isWaterfall:false,piePartition:undefined,totalRows:undefined,totalStartCols:undefined,useCECanvas:false,maxPadding:undefined,maxRowPadding:undefined,maxColPadding:undefined,axisScale:Bm.GLOBAL,axisScaleCache:null,freezeChart:A3,markerShape:undefined,ceMarkerShape:undefined,palette:Bn,isLarge:false,metricsType:AG.MetricsByColumn,fakeGroupInfo:false,shallWeUseGroupInfo:false,enableCombiChart:false,pureAreaChart:false,globalColorMapping:true,ttlDispTp:undefined,mulAttsOnAxisForABL:false,trendlineDefined:false,clusteredBarSpecialCase:false,init:function(AS){this.rhStyles=null;this.chStyles=null;this.xTitleStyles=null;this.yTitleStyles=null;if(this._super){this._super(AS);}this.bandings=[];this.chartInstancePool=[];this.yZeroAxisPos=[];this.xZeroAxisPos=[];this.y2ZeroAxisPos=[];this.x2ZeroAxisPos=[];this.disabledUnits=[];this.yMajorGridLinePos=[];this.yMinorGridLinePos=[];this.xMajorGridLinePos=[];this.xMinorGridLinePos=[];this.xAxisTrims=[];this.x2AxisTrims=[];this.yAxisTrims=[];this.y2AxisTrims=[];this.caAxisTrims=[[],[]];this.axisFormats={x1:[],x2:[],y1:[],y2:[]};this.dz=AS.firstRes.dz;this.gts=AS.firstRes.gts;this.highLightShapeIndex={};this.resetHighLightIndex=true;this.metricsOnDropZone={};this.hasTotal=undefined;this.heightCache=[];this.widthCache=[];},postInit:function(){var AS=this.firstRes,CM=this.xtabModel;this.adjustMetricNamesInDropZone();this.consumeJSON(AS);this.getAxisScaleMode();this.setupDualAxis();this.composeCustomString();if(!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause())){this.configureTrendLineBubbleForecast(AS);}if(!AS.eg){this.initMaxMinSizeProps();this.initChartingDetails();}if(AS){this.disabledUnits=B4.findDisabledUnits(AS,CM);}},postInit4NoData:function(){BG.call(this,this.firstRes);},adjustMetricNamesInDropZone:function(){if(!this.getChartInfo().isPie){if(An.walk("firstRes.dz.XAxis",this)&&this.firstRes.dz.XAxis.MetricNames!==undefined){this.firstRes.dz.BreakBy.MetricNames=this.firstRes.dz.XAxis.MetricNames;delete this.firstRes.dz.XAxis.MetricNames;}if(An.walk("firstRes.dz.YAxis",this)&&this.firstRes.dz.YAxis.MetricNames!==undefined){this.firstRes.dz.BreakBy.MetricNames=this.firstRes.dz.YAxis.MetricNames;delete this.firstRes.dz.YAxis.MetricNames;}}},getMetricInGSIMx:function(AS){var CM=this.firstRes.gsi.mx;return CM[AS];},valueTypeDataLabelEnabled:function(){var CM=this.view;if(CM.noData){return false;}var AS=this.getShowDataLabelOptions();return AS.length>0;},isGradientABL:function(){var CM=this.colorByInfo,CP=this.getChartInfo(),AS,CO=false,CN=[];if(CP.isABL===false){return false;}if(CM.tp===BH.ATT){AS=AH.call(this,"YAxis","id");AS=AS.concat(AH.call(this,"XAxis","id"));CN=AH.call(this,"ColorBy","id");By.forEach(CN,function(CQ){if(AS.indexOf(CQ)>=0){CO=true;return false;}});return CO;}else{if(CM.tp===BH.NULL||CM.tp===BH.METRICS_ITEM){return false;}}return true;},textTypeDataLabelEnabled:function(){var AS=this.getChartInfo();if(AS.isPie){return this.getUnitsCountInSliceBy()>0;}return this.getBreakByAttributes().length>0;},checkAttributeIntersection:function(AS,CM){var CS=this.dz,CQ,CP,CR,CO=An.clone(AS||{}),CU=[],CN=this.view.model,CT=!!CN.docModel.als;if(this.view.interactor.fmtMode||this.view.interactor.fmtFake){return["mockid"];}By.forEach(CM||[],function(CV){CQ=CS[CV];CP=CQ.TemplateUnit;By.forEach(CP||[],function(CW){CR=[CW.id];if(CT){CR=CR.concat(CN.getLinkedAttributes(CW.id)||[]);}By.forEach(CR,function(CX){if(CO.hasOwnProperty(CX)){CU.push(CX);delete CO[CX];return false;}});});});return CU;},isSeasonalityEnabled:function(){var CR=this,CO=this.getChartInfo(),CQ=false,CT=this.xtabModel,CP,CS;if(CO.isABL){var AS=AH.call(this,"YAxis","id");AS=AS.concat(AH.call(this,"XAxis","id"));AS.forEach(function(CV){CP=O(CT,CV);CS=CR.getAttributeById(CV);if(CP&&CS){var CU=CP.fs,CW=CS.fs;By.forEach(CU,function(CX){if((CX.bftp===1||CX.bftp===8)&&By.find(CW,"id",CX.fid)!==-1){CQ=true;}});}});if(CQ){var CN=false,CM=this.trConfigPool;An.forEach(CM,function(CU){var CV=CU[AW.TREND_TYPE];if(CV){CN=CN||(CV!==AR.LOG&&CV!==AR.POW);}});if(!CN){CQ=false;}}}return CQ;},getGlobalExtremeForAxisOrMetric:function(CN,CM,AS){return B7.call(this,CN,CM,AS);},getAttributeById:function(CR){var CN,AS=this.gts,CP=AS.row,CM=AS.col,CO=CP.length,CQ=CM.length;for(CN=0;CN<CO;CN++){if(CP[CN].id===CR||CP[CN].hid===CR){return CP[CN];}}for(CN=0;CN<CQ;CN++){if(CM[CN].id===CR||CM[CN].hid===CR){return CM[CN];}}return null;},initMaxMinSizeProps:function(){var CR=this.view,CN=CR.getWidgetPropertyValue(AW.MAX_SIZE_TYPE),CS=CR.getWidgetPropertyValue(AW.MAX_SIZE_VALUE),CP=CR.getWidgetPropertyValue(AW.MIN_SIZE_TYPE),CO=CR.getWidgetPropertyValue(AW.MIN_SIZE_VALUE),CM=function(CT){if(CT===Aj.MANUAL){return 2;}return 0;},AS=function(CT){if(CT===Br.MANUAL){return 2;}if(CT===Br.PROPORTIONAL){return 1;}return 0;};this.sizeInfo=this.sizeInfo||{};var CQ=this.sizeInfo;CQ.Max={Mode:CM(CN),Size:CS};CQ.Min={Mode:AS(CP),Size:CO};CQ.ProportionalMinMax=CP===Br.MANUAL;},initChartingDetails:function(){var CM=this.model,AS=this.mapFromChartToLDSIndex(0,0),CN=CM.getLocalDataSet(AS.r,AS.c),CO=CN.generateDataProvider(),CP=CO[AS.dpIdx];this.chartingDetails={nSeries:CP.innerGetSeriesCount()};},getAxisModeForAxis:function(CM,CQ,CP,CO){var AS=this.getMetricsOnAxisOfChart(CM,CQ,CP,CO);if(AS&&AS[0]!==undefined){var CN;if(CP==="x"||CP==="y"){CN=CP.toUpperCase()+(CO?"":"2")+"Axis";}else{CN="SizeBy";}return A4.call(this,AS[0],CN);}return undefined;},isPerCellScaleOn:function(CM,CQ,AS){var CP,CO,CN;if(AS==="y"||AS==="y1"){CP="y";CN=true;}else{if(AS==="y2"){CP="y";CN=false;}else{if(AS==="x"||AS==="x1"){CP="x";CN=true;}else{CP="x";CN=false;}}}CO=this.getAxisModeForAxis(CM,CQ,CP,CN);return CO===Bm.PERCELL;},composeCustomString:function(){var Cb=this,Ca=this.property,CV=Ca.readItem(AW.AXIS_SCALE),CM=Ca.readItem(AW.AXIS_SCALE_DATA),CO=[],Ce=[],AS=this.getNumericAxisOptions(true,undefined,undefined,CO,Ce),CP={},Cd={},CZ,CU,CT=Cb.getChartInfo(),CW,CN,Cc,CQ,CS,CY,CX,CR=[];AS.forEach(function(Cf){CW=Cf.key;if(CW!=="AllMetrics"){if(Cf.sizeBy||Cf.key==="SizeBy"){CR.push(CW);}CZ=Cb.getGlobalExtremeForAxisOrMetric(CW,Cf.sizeBy,true);if(CT.isABL){CZ=d.call(Cb,CZ,AT.call(Cb,CW));}if(CZ.scaleType===undefined||isNaN(CZ.scaleType)){CZ.scaleType=Bm.GLOBAL;}CN={axKey:CW,rMin:CZ.min,rMax:CZ.max,minMax:CV,logScale:false,isCust:false,scaleType:CZ.scaleType};CU=new Az(CN);CP[CW]=CU;}});if(CM){Cd=Az.createAxisScaleCollectionFromArrays(CM,Cd);CX=Az.serializeCollection2String(Cd);for(Cc in CP){if(CP.hasOwnProperty(Cc)){CQ=CP[Cc];CS=Cd[Cc];if(CS){if(CV===Bm.CUSTOM){CQ.absorbInfo(CS);}else{CQ.logScale=CS.logScale===true;}if(CR.indexOf(Cc)>=0){CQ.logScale=false;}}}}}this.sizeByMetricsSharedInAxis=CO;this.collisionSizeByMetric=Ce;CY=Az.serializeCollection2String(CP);if(CX!==CY){Ca.updateItem(AW.AXIS_SCALE_DATA,CY);}},getBreakByAttributes:function(){return AH.call(this,"BreakBy");},getSliceByAttributes:function(){return AH.call(this,"SliceBy");},isMetricNamesInZone:function(AS){return BI.call(this,AS);},isAttrInZone:function(CO,CN){var CM=[],AS=AH.call(this,CN);AS.forEach(function(CP){if(CP.id){CM.push(CP.id);}});return CM.indexOf(CO)!==-1;},getSelectedObjectsInfo:function(AS,CO){var CN=[],CM;By.forEach(AS,function(CP){CM=CP.identity;CN.push(CM.getSelectedObjectInfo(CO));});return CN;},isEmptyBreakby:function(){var CM=this.getHostStructure(),AS=CM.BreakBy.length;return AS;},isEmptyVis:function(){var CR=this.getHostStructure(),CQ=this.isPie,CN=CR.Rows.length,CP=CR.Columns.length,CM=CR.XAxis.length,CS=CR.YAxis.length,CO=CR.SliceBy.length,AS=CR.AngleBy.length;if(CQ&&this.getChartType()===B2.GRID){return this.isBlankGrid;}if(CN>0||CP>0||CM>0||CS>0){return false;}if(CQ){if(CO>0||AS>0){return false;}}return true;},getHostStructure:function(){var CQ,CS,CX,CN,CY=this.dz||this.firstRes.dz,CM=["Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],CV=CM.length,CT={},AS=this.gts,CU=this,CP=CU.xtabModel.data,CW=CP.gsi||{},CO=(CW.rows||[]).concat(CW.cols||[]),CZ={},CR=function(Cc){if(Cc.srcUnit){Cc=Cc.srcUnit;if(CS.filter(function(Ce){return Cc.id===Ce.id;}).length>0){return ;}}var Cb=An.copy(Cc,{zone:CQ+1});var Ca;if(Cc.t!==4){if(Cc.axis!==undefined&&Cc.uidx!==undefined){Ca=AS[Cc.axis][Cc.uidx];}}var Cd=O(CU.xtabModel,Cc.id);if(Cd&&Cd.fs){Cb.fs=Cd.fs;}if(CZ[Cc.id]){Cb.st=CZ[Cc.id];}if(Ca){Cb.at=Ca.at;}CS.push(Cb);};CO.forEach(function(Ca){if(Ca.hasOwnProperty("st")&&Ca.hasOwnProperty("did")){CZ[Ca.did]=Ca.st;}});for(CQ=0;CQ<CV;CQ++){CX=CM[CQ];CN=CY[CX]||CY.Angle;CS=CT[CX]=[];if(CN.TemplateUnit){By.forEach(CN.TemplateUnit,CR);}if(CN.TemplateMetric){By.forEach(CN.TemplateMetric,CR);}if(CN.MetricNames!==undefined){CS.push({n:"Metric Names",id:Bt,t:AM,zone:CQ+1});}}return CT;},updatePalette:function(AS){if(AS===AX.DARK){this.palette=p;}else{this.palette=Bn;}},initYAxisMargins:function(){var AS,CN=this.getChartCountInCol(),CM=this.yAxisMargins=[];for(AS=0;AS<CN;AS++){CM.push(-1);}},initXAxisMargins:function(){var CM,AS=this.getChartCountInRow(),CN=this.xAxisMargins=[];for(CM=0;CM<AS;CM++){CN.push(-1);}},formatChartInstancePool:function(){var CM,CN,AS=this.chartInstancePool;CN=this.getChartCountInCol();for(CM=0;CM<CN;CM++){AS[CM]=[];}},configureTrendLine:function(CP){var CX=CP.gsi.mx,AS=this.getChartInfo(),CS=this,CT,CR,CW,CV={},CO=false,CU={},CY,CQ;if(AS.tp===B2.GRID){return ;}if(AS.isABL){CV={globalProp:{trdFwdFst:0,trdBwdFst:0,trdFstEnabled:false,trdSeason:CP.dz.sea!==undefined?parseInt(CP.dz.sea,10):0}};}else{CV={};if(AS.tp===B2.BUBBLE||AS.tp===B2.SCATTER){CO=true;}}CY=CV.globalProp;By.forEach(CX,function(Ca){CW=Ca.did;CV[CW]={min:Ca.min,max:Ca.max};if(Ca.foreBwd!==undefined||Ca.foreFwd!==undefined){CV[CW].trdBwdFst=Ca.foreBwd;CV[CW].trdFwdFst=Ca.foreFwd;if(!CO){CY.trdFstEnabled=CY.trdFstEnabled||Ca.fstEnabled!==false;}}CT=Ca.mdls;if(CT){if(AS.isABL){CY.trdFwdFst=CY.trdFwdFst<Ca.foreFwd?Ca.foreFwd:CY.trdFwdFst;CY.trdBwdFst=CY.trdBwdFst<Ca.foreBwd?Ca.foreBwd:CY.trdBwdFst;}CR=CT.mod_c;CQ=1;By.forEach(CR,function(Cb){if(Cb.tp>=AV.MAX&&Cb.tp<=AV.CONST){H.call(CS,CU,Cb,CW,CQ);}else{A7.call(CS,CV,Cb,CW,CQ);}CQ++;});}});if(AS.isABL&&this.isStacked&&!this.splitPlottingMetrics){var CZ=AS.dirc===B6.VERTICAL?"Y":"X",CN=CZ+"Axis",CM=CP.dz[CN];CT=CM.mdls;if(CT){CR=CT.mod_c;CQ=1;By.forEach(CR,function(Cb){if(Cb.tp>=AV.MAX&&Cb.tp<=AV.CONST){var Ca=Cb.dua===0?CN:CZ+"2Axis";H.call(CS,CU,Cb,Ca,CQ);}else{B4.visPrint("No way entering this branch");A7.call(CS,CV,Cb,CW,CQ);}CQ++;});}}this.trConfigPool=CV;this[AW.REF_LINE_DEF]=CU;},hasRefLineInOppositeAxis:function(CR){var CS=this.dz||this.firstRes.dz,AS=this.getChartInfo(),CM=false;if(AS.isABL&&this.isStacked&&!this.splitPlottingMetrics){var CT=AS.dirc===B6.HORIZONTAL?"Y":"X",CN=CT+"Axis",CO=CS[CN],CQ,CP;CQ=CO.mdls;if(CQ){CP=CQ.mod_c;By.forEach(CP,function(CU){if(CU.tp>=AV.MAX&&CU.tp<=AV.CONST){if(CU.dua===CR){CM=true;return false;}}});}}return CM;},getBubbleForcastExtremeForPieWithTotal:function(CO){var CT,CQ,CN,AS,CM,CW=this.model.getMetricCount(),CR=this.getMetricIndexFromID(CO.did),CY=this.totalRows||[],CZ=CY.length,CS=this.firstRes.gvs.items,CV,CX,CP,CU;AS=CS.length;for(CT=0;CT<CZ;CT++){CM=CY[CT];if(CM<AS){CV=CS[CM].items||[];CQ=CR;CN=CV.length;while(CQ<CN){CX=CV[CQ];if(CX!==undefined){CX=parseFloat(CX.rv);if(!isNaN(CX)){if(CP===undefined||CP>CX){CP=CX;}if(CU===undefined||CU<CX){CU=CX;}}}CQ+=CW;}}}if(CP!==undefined){return{min:CP,max:CU};}return{min:CO.min,max:CO.max};},configureTrendLineBubbleForecast:function(CO){var CU=CO.gsi.mx,AS=this.getChartInfo(),CS=this,CT,CR,CP,CQ={},CN=false,CM=false;if(AS.tp===B2.GRID){return ;}if(AS.tp===B2.BUBBLE||AS.tp===B2.SCATTER){CN=true;}if(this.isPie&&this.hasTotalForPie()){CM=true;}By.forEach(CU,function(CV){CT=CV.did;if(CN){if(CM){CP=CS.getBubbleForcastExtremeForPieWithTotal(CV);}else{CP={min:CV.min,max:CV.max};}CR={min:CP.min,max:CP.max};CQ[CT]=CR;CR[AW.TREND_BUBBLE_FORE_FWD]=CR[AW.TREND_BUBBLE_MAX]=CP.max;CR[AW.TREND_BUBBLE_FORE_BWD]=CR[AW.TREND_BUBBLE_MIN]=CP.min;if(CV.foreBwd!==undefined||CV.foreFwd!==undefined){CR[AW.TREND_BUBBLE_FORE_FWD]=CV.foreFwd;CR[AW.TREND_BUBBLE_FORE_BWD]=CV.foreBwd;CR[AW.TREND_BUBBLE_FORE_ENABLED]=CV.fstEnabled!==false;}}});this[AW.TREND_BUBBLE_FORE_DEF]=CQ;},getTrendLineJSON:function(AS){return AS.trendref;},getTrendLineObjectsForMetricAtScale:function(CQ,CV,CO,CN,CU,CP){var CS=this.trendLineJSON,AS=CS[CP],CT,CW,CR,CM=[];if(AS){By.forEach(AS,function(CX){CW=undefined;CT=CX["x-vars"];if(CX.mid===CQ&&(CN===undefined||(CT&&CT[0]===CN))){CW=An.copy(CX,{});if(CP==="g"){CW.inChartModel=CW.models;}else{if(CP==="all"){CW.inChartModel=CW.models[CV][CO];}else{if(CP==="r"){CW.inChartModel=CW.models[CV];}else{CW.inChartModel=CW.models[CO];}}}delete CW.models;}if(CW){CR=isNaN(CW.inChartModel[0].model);if((CR===true&&CU===true)||(!CR&&!CU)){CM.push(CW);}}});}return CM;},getTrendLinesObjectForMetric:function(CO,AS,CQ,CN,CR){var CP=this,CS=["g","all","r","c"],CM=[];CS.forEach(function(CT){CM=CM.concat(CP.getTrendLineObjectsForMetricAtScale(CO,AS,CQ,CN,CR,CT));});return CM;},isLogScale:function(CN,CS,CX){var CW=this,CO=CW.view,CV,CM=CW.getChartInfo(),Ca;if(CM.isABL&&CM.sbtp===BV.EnumSubtype.PERCENT){return false;}if(CW.logScaleCache===undefined){CW.logScaleCache=[{},{}];}var CQ,CT=CN[0]==="y"||CN[0]==="Y",CR=CN==="y"||CN==="Y"||CN==="y1"||CN==="Y1"||CN==="x"||CN==="X"||CN==="x1"||CN==="X1";Ca=CW.logScaleCache[CT?1:0];if(CT){CQ=Ca[CS]=Ca[CS]||{};}else{CQ=Ca[CX]=Ca[CX]||{};}if(CR){if(CQ.Primary!==undefined){return CQ.Primary;}}else{if(CQ.Secondary!==undefined){return CQ.Secondary;}}var CY;if(CT){if(CR){CY="YAxis";}else{CY="Y2Axis";}}else{if(CR){CY="XAxis";}else{CY="X2Axis";}}var AS=Ao.call(this,CS,CX,CY);if(AS&&AS.length>0){CV=a.call(CW,AS,CN,false);}if(!CV||CV.length===0){return undefined;}var CU,CZ,CP;CU=CO.getWidgetPropertyValue(AW.AXIS_SCALE_DATA);CP=Az.createAxisScaleCollectionFromArrays(CU);CZ=CP[CV.key];if(CZ){if(CR){CQ.Primary=CZ.logScale;}else{CQ.Secondary=CZ.logScale;}return CZ.logScale;}return false;},getDataLabelType:function(){var AS=this.getMetricLevelDataLabel();if(AS===undefined){var CM=this.property.readItem(AW.DATA_LABEL);if(CM===undefined||((CM===2)&&!this.valueTypeDataLabelEnabled())||(CM===3&&!this.textTypeDataLabelEnabled())){AS=mstrmojo.gm.EnumDataLabels.HIDE;}}return AS||this.property.readItem(AW.DATA_LABEL);},getMetricLevelDataLabel:function(){var CM=this.property.readItem(AW.DATA_LABEL),CO=this.getShowDataLabelOptions(),AS,CN;if(CM===2&&CO.length===1){AS=this.property.readItem(AW.METRIC_LEVEL_DATA_LABEL);if(AS){CN=CO[0].key;if(AS[CN]===false){AS[CN]=true;this.property.updateItem(AW.METRIC_LEVEL_DATA_LABEL,AS);}}}},consumeJSON:function(Cb){var CX,CV,CS,Cr,Ce,Cj,Ci,Cg,Cp=this,Cm=Cb;k.call(this);var Cq=this.view.model.data.dz.visProp.fmt.th;if(Cq!==undefined&&Cq!==null){if(typeof Cq==="number"){this.view.theme=Cq;}else{if(typeof Cq==="string"){this.view.theme=parseInt(Cq,10);}}}var CZ=Cb.dz,CM=CZ.visProp.fmt;Cp.trendLineJSON=this.getTrendLineJSON(Cb);Cp.ttlDispTp=Cb.lnm;Cp.fmt=CM;Cp.extrs=Cb.extrs;var AS=Cb.gts;Cp.th=[];By.forEach(AS.row,function(Cs){CG(Cs,"row");var Ct=O(Cp.xtabModel,Cs.id);if(Ct&&Ct.t){Cs.t=Ct.t;}if(Cs.cs===undefined){Cs.cs=1;}});By.forEach(AS.col,function(Cs){CG(Cs,"col");var Ct=O(Cp.xtabModel,Cs.id);if(Ct&&Ct.t){Cs.t=Ct.t;}if(Cs.rs===undefined){if(Cs.opt!==-1){Cs.rs=1;}}});B3(CZ,Cb);BN(Cb);Bo.call(this,Cb);CS=Cm.dm.rct;Cr=Cm.dm.cct;CX=Cm.ptt.row;CV=Cm.ptt.col;BG.call(this,Cb);Cg=As.call(this,CZ,Cb);if(Cg.tp===BH.METRICS){var CY=Cg.metrics[0].id;Cp.thresholds=Cb.gsi.thresholds[CY];}Cp.colorByInfo=Cg;Cp.metricsType=AJ.call(this,CZ);CL.call(this,Cb,this.ceChartType);Cp.configureTrendLine(Cb);if(Cm.gvs.items){Ce=AL(0,0,Cr,CS,Cm.gvs);}this.model=this.addDisposable(new BV.GMDataModel({ttlDispTp:this.ttlDispTp,eg:Cm.eg,rp:CX,cp:CV,rct:CS,cct:Cr,gts:Cm.gts,fullNf:Cm.nf,mx:Cm.gsi.mx,dz:CZ,trConfigPool:this.trConfigPool,clusteredBarSpecialCase:this.clusteredBarSpecialCase,onlyMetricNamesOnAxisForGridPie:this.onlyMetricNamesOnAxisForGridPie,isMetricNamesOnXAxis:this.isMetricNamesOnXAxis,colorType:Cg.tp,gmCtr:this,metricsType:this.metricsType,splitPlottingMetrics:this.getSplitPlottingMetrics(),getMetricsOnXAxis:this.getControllerAPI(M.GET_METRICS_ON_X),getMetricsOnYAxis:this.getControllerAPI(M.GET_METRICS_ON_Y),getSizeByMetrics:this.getControllerAPI(M.GET_METRICS_ON_SIZE_BY),property:this.property,isBlankGrid:this.isBlankGrid}));Cj=this.model;var Ca=this.getChartInfo();if(Ca.isABL&&this.getSplitPlottingMetrics()){Ci=this.getSecondaryMetrics();if(Ci.length>0){this.shallWeUseGroupInfo=true;}}Cj.shallWeUseGroupInfo=this.shallWeUseGroupInfo;Cp.shouldDrawShapeFlag=AB(CZ,Ca);if(!this.shallWeUseGroupInfo){this.removeGroupInfo();}else{this.updateGroupInfo();}if(Cm.gvs.items){Cj.feedLdss(0,0,Cr,CS);}if(this.scriptClass!=="mstrmojo.ngm.NewGMController"){if(Cm.ghs.chs.items){Cj.feedChs(Cm.ghs.chs);}if(Cm.ghs.rhs.items){Cj.feedRhs(Cm.ghs.rhs);}}if(Cj.cetSelectors){this.view.cetSelectors=Cj.cetSelectors;delete Cj.cetSelectors;}Cj.extractInfoLowestHeaderInfoToAttrObj();Cj.constructColorByInfo();this.inChartLayout=this.getSubChartsLayout();if(this.isPie){this.preprocessForPie(Cb);}var CR=this.getRowTitleInfo(true),CW=this.getColTitleInfo(true),Ch=this.attributeSelectionInfo;if(CR&&CR.items){By.forEach(CR.items,function(Cs){Ch[Cs.id]=Cs;});}if(CW&&CW.items){By.forEach(CW.items,function(Cs){Ch[Cs.id]=Cs;});}var Cf=Ca.isABL&&this.splitPlottingMetrics,Cd=this.metricSelectionInfo;for(var CU=0;CU<CS;CU++){for(var CQ=0;CQ<Cr;CQ++){[Cp.getXAxisInfo(CU,CQ,true,Cf),Cp.getXAxisInfo(CU,CQ,false,Cf),Cp.getYAxisInfo(CU,CQ,true,Cf),Cp.getYAxisInfo(CU,CQ,false,Cf)].forEach(function(Cs){if(Cs.isMetric){Cs.cellHandlers.forEach(function(Cu,Ct){if(Cu&&!isNaN(Cu.row)&&!isNaN(Cu.col)){Cd[Cs.ids[Ct]]={mid:Cs.ids[Ct],cellHandle:Cu};}});}});}}var Cl=this.getYAxisInfo(),CN=this.getXAxisInfo();this.xIsNumeric=CN.isMetric;this.yIsNumeric=Cl.isMetric;this.axisLayout=this.getAxisLayout4CE();this.enablePartialRendering=this.view.getWidgetPropertyValue(AW.PARTIAL_RENDER)==="true";if(Ca.isBubbleOrScatter&&(this.metricsType!==AG.MetricsByRow&&this.metricsType!==AG.MetricsByColumn)){var CP=this.getMetricsOnXAxis(),CO=this.getMetricsOnYAxis(),Cn=this.getSizeByMetrics(),Ck=Math.min(CP.length,CO.length);if(Cn.length>0){Ck=Math.min(Ck,Cn.length);}this.bubbleSeriesNum=Ck;}if(Ca.isABL){var Cc=AH.call(this,"YAxis","n"),Co=AH.call(this,"XAxis","n"),CT=AH.call(this,"BreakBy","n");if(Cc.length+Co.length===0&&CT.length>0){this.specialSortable=true;}}},getAxisOriginLineIdentity:function(AS){var CN=AS+"axOrLnId";if(this[CN]){return this[CN];}var CM,CO=["x1","x2"],CP=CO.indexOf(AS)!==-1?c.X_AXIS_ORIGIN_LINE:c.Y_AXIS_ORIGIN_LINE;CM=new mstrmojo.gm.GeneralIdentity({objType:CP});this[CN]=CM;return CM;},getAxisOriginLabelIdentity:function(AS){var CN=AS+"axOrLbId";if(this[CN]){return this[CN];}var CM,CO=["x1","x2"],CP=CO.indexOf(AS)!==-1?c.X_AXIS_ORIGIN_LABEL:c.Y_AXIS_ORIGIN_LABEL;CM=new mstrmojo.gm.GeneralIdentity({objType:CP});this[CN]=CM;return CM;},getAllAxisProperties:function(){var AS=this.view;return AS.getAllAxisProperties();},printExtremes:function(){var CO=this,CN,CM,CR,CQ,AS,CP;CQ=CO.getChartCountInCol();AS=CO.getChartCountInRow();for(CN=0;CN<CQ;CN++){for(CM=0;CM<AS;CM++){CR=V.call(this,CN,CM);CP=BZ.call(CO,CN,CM);B4.visPrint("("+CN+", "+CM+")"+JSON.stringify(CP));}}},getGraphShapeCount:function(CQ){var CS=this,CP,CO,CM,CR=0,AS=0,CN=0,CT,CU;CQ=CQ||false;CT=CS.getChartCountInCol();CU=CS.getChartCountInRow();for(CP=0;CP<CT;CP++){for(CO=0;CO<CU;CO++){CM=V.call(this,CP,CO);AS=CM.innerGetSeriesCount();CN=CM.innerGetGroupCount();if(CQ&&AS>0&&CN>0){return CT*CU*AS*CN;}CR+=AS*CN;}}return CR;},getColorByMetricExtremes:function(){return BO.call(this);},getCategoricalAxisLabelsInfo:function(CM,CU,CO,CX){CX=CX||{purpose:"content"};var CW=false,CV=0,Cc=0,CZ,Cd,AS,Ca,CY=[],Ce,CR=B2,CT=this.getChartInfo();if(CT.isABL&&CT.dirc===B6.VERTICAL&&CO==="y"){CW=true;}else{if(CT.isABL&&CT.dirc===B6.HORIZONTAL&&CO==="x"){CW=true;}else{CZ=V.call(this,CM,CU);Cd=CZ.innerGetSeriesCount();AS=CZ.innerGetGroupCount();Ca=CZ.getGroupCount();CW=(Cd===0||AS===0);}}if(CW){switch(CX.purpose){case"count":return 0;default:return CY;}}if(CT.tp===CR.GRID){switch(CX.purpose){case"count":return CO==="x"?AS:Cd;default:if(CO==="x"){for(Cc=0;Cc<AS;Cc++){Ce=CZ.getGraphCell(CV,Cc);CY.push(Ce.getGroupLabel(0).join(" "));}}else{for(CV=0;CV<Cd;CV++){Ce=CZ.getGraphCell(CV,Cc);CY.push(Ce.getSeriesLabel(0).join(" "));}}return CY;}}switch(CX.purpose){case"count":var Cf=0;if(Ca===AS){for(Cc=0;Cc<AS;Cc++){Ce=CZ.innerGetGraphCell(CV,Cc);if(!Ce.isFaked){Cf++;}}}else{Cf=Ca;}return Cf;default:if(Ca===AS){for(Cc=0;Cc<AS;Cc++){Ce=CZ.innerGetGraphCell(CV,Cc);if(!Ce.isFaked){CY.push(Ce.getGroupLabel(0).join(" "));}}}else{var CQ=CZ.bwdLbs||[],CS=CQ.length,Cb=CZ.fwdLbs||[],CP,CN;for(Cc=0;Cc<Ca;Cc++){if(Cc<CS){CP=(CQ[Cc]).join(" ");}else{if(Cc>=CS+AS){CN=Cb[Cc-(CS+AS)];if(CN){CP=CN.join(" ");}else{CP="";}}else{Ce=CZ.innerGetGraphCell(CV,Cc-CS);CP=Ce.getGroupLabel(0).join(" ");}}CY.push(CP);}}return CY;}},getColorByLegendInfo:function(){var AS=this.model;return AS.getColorByLegendInfo();},getSizeByLegendInfo:function(){return this.getAdaptedSizeByDataProvider();},constructSizebyDataProvider:function(){return Al.call(this);},getSizeByExtremeForNegativeProportionalMode:function(CT){var CS,CQ,CN,AS,CV,CX,CO,CP,CY,CU,CM,CW=this.model.getMetricCount(),CR=this.firstRes.gvs.items;AS=CR.length;for(CS=0;CS<AS;CS++){CV=CR[CS].items||[];CQ=CT;CN=CV.length;while(CQ<CN){CO=CV[CQ];if(CO!==undefined){CO=parseFloat(CO.rv);if(!isNaN(CO)){CX=Math.abs(CO);if(CP===undefined||CP>CX){CP=CX;CY=CO;}if(CU===undefined||CU<CX){CU=CX;CM=CO;}}}CQ+=CW;}}return{min:CY,max:CM};},getAdaptedSizeByDataProvider:function(){var AS=this.constructSizebyDataProvider(),CQ,CO={},CP=mstrmojo.desc(13966,"Size by:"),CN,CM=[];if(!AS.sizeByTitles||AS.sizeByTitles.length<=0){return null;}CO.custMetrics=AS.sizeByScaleType;CN=AS.sizeByTitles.length;By.forEach(AS.sizeByTitles,function(CR){CM.push(CR);});if(CN>1){CO.items=CM;}if(AS.sizeByMode===true&&AS.sizeByDataProvider.length>1){CO.item=CN>1?CP:AS.sizeByTitles[0];CQ=CO.elements=[];By.forEach(AS.sizeByDataProvider,function(CR){CQ.push({sign:"<",v:CR.value});});if(CQ.length===5){CQ[0].sign="=";CQ[4].sign="=";}CO.caseFlag=0;return CO;}if(AS.sizeByMode===true&&AS.sizeByDataProvider.length===1){CO.caseFlag=2;CO.item=CN>1?CP:AS.sizeByTitles[0];CO.elements=[{diameter:12,shape:"rect",sign:"=",v:AS.sizeByDataProvider[0].value}];return CO;}CO.item=CP;CO.items=CM;CO.elements=[];CO.caseFlag=1;return CO;},getXAxisLabels:function(CM){var AS=0;return this.getCategoricalAxisLabelsInfo(AS,CM,"x");},getYAxisLabels:function(AS){var CM=0;return this.getCategoricalAxisLabelsInfo(AS,CM,"y");},countXAxisLabels:function(CM){var AS=0;return this.getCategoricalAxisLabelsInfo(AS,CM,"x",{purpose:"count"});},countYAxisLabels:function(AS){var CM=0;return this.getCategoricalAxisLabelsInfo(AS,CM,"y",{purpose:"count"});},estimateXAxisSize:function(CR,CN,CP){var CO,CV,AS=CR.length,CS=0,CT=0,CQ=20,CM=20,CU=this.view.HTML5PROPS.AXIS_LABEL_X;for(CO=0;CO<AS;CO++){CV=B4.measureTextSize(CR[CO],CU,0);CS=Math.max(CS,CV.width);CT=Math.max(CT,CV.height);}if(CN===Ae.STAGGER){CQ=(CS+I)*((AS+1)>>1)+I;CM=CT*2+I*3;}else{if(CN===Ae.ROTATE){CQ=CT*AS+I*(AS+1);CM=CS+I*2;}else{CQ=CS*AS+I*(AS+1);CM=CT+I*2;}}if(CP&&!CN&&CQ>CP){CQ=CP;}if(CQ<AS*5){CQ=AS*5;}return{width:CQ,height:CM};},estimateYAxisSize:function(CO){var CN,CW,CP,CM,AS=CO.length,CT=0,CU=0,CV=this.view.HTML5PROPS.AXIS_LABEL_Y,CQ="H",CS,CR=true;for(CN=0;CN<AS;CN++){CW=B4.measureTextSize(CO[CN],CV,0);CT=Math.max(CT,CW.width);if(CR){if(CS===undefined){CS=B4.measureTextSize(CQ,CV,1).height;CS=Math.round(CS*0.85);}CU=CS;}else{CU=Math.max(CU,CW.height);}}CP=CT+I*2;CM=CU*AS+I*(2*AS);return{width:CP,height:CM};},initLayouter:function(CW){var CS,CR,Cc=this,Cd=this.view.getWidgetPropertyValue(AW.FIT_TO),CU=this.getChartCountInCol(),CV=this.getChartCountInRow(),CM=this.getXAxisInfo(),Ca=this.getYAxisInfo(),CY=function(){var Cg,Ch,Cj,Cf=0,Ci=0,Ce=Math.min(10,CV);for(Cg=0;Cg<Ce;Cg++){Cj=Cc.getXAxisLabels(Cg);Ch=Cc.estimateXAxisSize(Cj,Ae.NORMAL).width;Ci=Math.max(Ci,Ch);Cf+=Cj.length;if(Cf>100){break;}}return Ci;},CO=function(){var Cg,Ch,Cj,Cf=0,Ci=0,Ce=Math.min(10,CV);for(Cg=0;Cg<Ce;Cg++){Cj=Cc.getXAxisLabels(Cg);Ch=Cc.estimateXAxisSize(Cj,Ae.STAGGER).width;Ci=Math.max(Ci,Ch);Cf+=Cj.length;if(Cf>100){break;}}return Ci;},Cb=function(Ci){var Ch,Cm,Ce,Cf,Ck,Cj=0,Cg=Ci.length,Cl=Cc.view.HTML5PROPS.AXIS_LABEL_Y;for(Ch=0;Ch<Cg;Ch++){Cm=Ci[Ch];Ce=B4.measureTextWidth(Cm,Cl,0);if(Cm.length>10){Cf=Cm.substr(0,10)+"...";Ck=B4.measureTextWidth(Cf,Cl,0);Ce=Math.min(Ce,Ck);}Cj=Math.max(Cj,Ce);}return Cj;},CN=function(){var Cf,Cg,Ce=0;for(Cf=0;Cf<CV;Cf++){Cg=Cc.countXAxisLabels(Cf);Ce+=Cg;}return Ce;},CQ=function(){var Ce,Cg,Cf=[];for(Ce=0;Ce<CV;Ce++){Cg=Cc.getXAxisLabels(Ce);Cf=Cf.concat(Cg);}return Cf;},CZ=function(){var Ce,Cg,Cf=[];for(Ce=0;Ce<CV;Ce++){Cg=Cc.countXAxisLabels(Ce);Cf.push(Cg);}return Cf;},CT=function(){var Ce,Cg,Cf=[];for(Ce=0;Ce<CU;Ce++){Cg=Cc.countYAxisLabels(Ce);Cf.push(Cg);}return Cf;},CX=function(){var Ci,Ce,Cj,Ch=1,Cf=Cc.getChartInfo(),Co=Cf.shape,Cn=Cc.chartSubType,Cl=Cc.chartType,Cm=r,Ck=[],Cg=40;if(Co===Ah.BAR&&Cn===BL.CLUSTERED&&Cl!==B2.GRID){Ch=Cc.chartingDetails.nSeries;}if(Co===Ah.PIE||Co===Ah.RING){Cm=Math.max(24,Cm);}else{if((Co===Ah.LINE||Co===Ah.AREA)&&!Cf.isCombo){Cm=T;}}for(Ci=0;Ci<CV;Ci++){Cj=Cc.countXAxisLabels(Ci);Ce=(Ch*Cm)*(Cj+0.5);Ck.push(Math.max(Math.floor(Ce+0.5),Cg));}return Ck;},AS=function(){var Ch,Cn,Ci,Cg=1,Cf=Cc.getChartInfo(),Co=Cf.shape,Cm=Cc.chartSubType,Ck=Cc.chartType,Ce=r,Cj=[];if(Co===BV.EnumShape.BAR&&Cm===BL.CLUSTERED&&Ck!==B2.GRID){Cg=Cc.chartingDetails.nSeries;}if(Co===BV.EnumShape.PIE||Co===BV.EnumShape.RING){Ce=Math.max(24,Ce);}else{if((Co===Ah.LINE||Co===Ah.AREA)&&!Cf.isCombo){Ce=T;}}var Cl=An.walk("GENERAL_PROPS.ALL.minRowHeight",mstrApp.getThemeProps("OGM"))||0;for(Ch=0;Ch<CU;Ch++){Ci=Cc.countYAxisLabels(Ch);Cn=Math.max((Cg*Ce)*(Ci+0.5),Cl);Cj.push(Math.floor(Cn+0.5));}return Cj;},CP=function(Ch){var Ce,Ci,Cf,Cg=[];if(!Ch||Ch.length===0){for(Ce=0;Ce<CU;Ce++){Cg.push(Ce%2);}return Cg;}Ci=Ch.length;Cg=[0];Cf=Ch[0];for(Ce=1;Ce<Ci;Ce++){Cg.push(Cf%2);Cf+=Ch[1];}return Cg;};CW.fitTo=Cd;CW.chartType=this.chartType;CW.nRows=CU;CW.nCols=CV;CW.xInfo=CM;CW.yInfo=Ca;CW.xAxisType=CM.isMetric?Bl.METRIC:Bl.ATTRIBUTE;CW.yAxisType=Ca.isMetric?Bl.METRIC:Bl.ATTRIBUTE;CW.widthCache=this.widthCache;CW.heightCache=this.heightCache;CW.minWidths=CM.isMetric?null:CX();CW.minHeights=Ca.isMetric?null:AS();CS=CM.isMetric?undefined:CZ();CR=Ca.isMetric?undefined:CT();if(Cd===AO.NONE){CW.maxXAxisWidth=CM.isMetric?undefined:CY();CW.maxXAxisWidthStagger=CM.isMetric?undefined:CO();delete CW.widthRatio;delete CW.heightRatio;}else{CW.nLabels=CN();CW.minXLabelWidth=CM.isMetric?undefined:Cb(CQ());CW.widthRatio=CS;CW.heightRatio=CR;}this.widthRatio=CS;this.heightRatio=CR;this.bandingFlags=CP(CR);CW.API.owner=this;CW.API.getXAxisHeight=this.getXAxisHeight;CW.API.getXAxis2Height=this.getXAxis2Height;CW.API.getYAxisWidth=this.getYAxisWidth;CW.API.getYAxis2Width=this.getYAxis2Width;CW.API.getRowHeight=this.getControllerAPI(M.GET_CHART_HEIGHT);CW.API.getColWidth=this.getControllerAPI(M.GET_CHART_WIDTH);CW.API.calculateAllXAxisStyle=this.getControllerAPI(M.LAYOUT_ALL_X_AXIS_LABELS);CW.API.calculateOneXAxisStyle=this.getControllerAPI(M.LAYOUT_ONE_X_AXIS_LABELS);},preprocessForPie:function(Cc){var Cb=this.getChartInfo(),CN=false,CT=this.model,CU=B2,Ce=Cb.dirc,CX=BV.EnumABLDirection,CR=Cb.tp,Cd=this.getUnitsCountInSliceBy(),Ca=this.piePartition=[],CY=this.totalRows=[],CO=this.totalStartCols=[],CW,Cm,Cg,Ch,Cf,CZ,CQ,CP,Ci,Cl,CV,AS=0,CS;if(!CN){CZ=this.dz;CQ=CZ.SliceBy;CP=CQ.TemplateUnit;if(CP&&CP.length>0){AS=CP[0].uidx;}else{B4.visPrint("actually, it should be a bubble chart. not implemented!");}}CW=CT.rct;Cm=CT.cct;Ch=CT.getUnitAttributesCountOnRow();Cf=CT.getUnitAttributesCountOnCol();Cl=CT.getMetricCount();var CM,Cj;if((Cb.isABL&&Ce===CX.VERTICAL)||(CR===CU.BUBBLE||CR===CU.SCATTER)||(CR===CU.GRID)){CM=function(){if(CW>0){Ca.push(0);}if(!isNaN(AS)){AS=Ck(Cc.gts,"row",AS);for(Cg=0;Cg<CW;Cg++){CS=CT.getRowHeaderObj(Cg,AS);if(CS&&CS.stt===1){if(Cg+1<CW){Ca.push(Cg+1);}}}}Ci=Ca.length;for(Cg=1;Cg<Ci;Cg++){CY.push(Ca[Cg]-1);}CY.push(CW-1);};Cj=function(){CV=Ch-1-Cd;var Cp=0,Cn,Co,Cs=[],Cu=[];if(CV>=0){var Cr=this.gts.row[CV];Cr.fcnt=Cr.fcnt||Cr.cs||Cr.rs||1;if(Cr.t===1&&Cr.fcnt>1){var Ct=CT.modelRhs[CV];Cg=0;while(Cg<=Ct.mxIdx){if(Ct[Cg]){Ca.push(Cg);}Cg++;}}else{Cn=this.getBreakByAttributeIndices(true);Co=By.indexOf(Cn,CV)>=0;if(Co){for(var Cq=Cn.length-1;Cq>=0;Cq--){Cp=0;for(Cg=0;Cg<Cn[Cq];Cg++){Cp+=this.gts.row[Cg].cs||1;}Cs=this.getPiePartitions(Cp,true);if(Cs.length>Cu.length){Cu=Cs;}if(Cu.length===CW){break;}}Ca=this.piePartition=Cu;}else{for(Cg=0;Cg<CV;Cg++){Cp+=this.gts.row[Cg].cs||1;}Ca=this.piePartition=this.getPiePartitions(Cp,true);}}}else{Ca.push(0);}};if(CN){Cj.call(this);}else{if(this.hasTotalForPie()){CM.call(this);}else{Cj.call(this);}}}else{if(Cb.isABL&&Ce===CX.HORIZONTAL){CM=function(){if(Cm>0){Ca.push(0);}if(!isNaN(AS)){AS=Ck(Cc.gts,"col",AS);for(Cg=0;Cg<Cm;Cg++){CS=CT.getColHeaderObj(Cg,AS);if(CS&&CS.stt===1){Ca.push(Cg);}}}Ci=Ca.length;for(Cg=1;Cg<Ci;Cg++){CO.push(Ca[Cg]);}CO.push(Cm-Cl);};Cj=function(){CV=Cf-1-Cd;var Cn,Co,Cq=[],Cr=[];if(CV>=0){Cn=this.getBreakByAttributeIndices(false);Co=By.indexOf(Cn,CV)>=0;if(Co){for(var Cp=Cn.length-1;Cp>=0;Cp--){Cq=this.getPiePartitions(Cn[Cp],false);if(Cq.length>Cr.length){Cr=Cq;}if(Cr.length===Cm){break;}}Ca=this.piePartition=Cr;}else{Ca=this.piePartition=this.getPiePartitions(CV,false);}}else{Ca.push(0);}};if(CN){Cj.call(this);}else{if(this.hasTotalForPie()){CM.call(this);}else{Cj.call(this);}}}}function Ck(Cs,Co,Cr,Cp){Cr=Cr||0;if(!!!Cs){return Cr;}Cp=Cp||0;var Cq,Ct,Cn,Cv="cs",Cu=Cp;if(Co.toLowerCase()==="row"){Cn=Cs.row;}else{Cn=Cs.col;Cv="rs";}for(Cq=0;Cn&&Cq<Cr;Cq++){Ct=Cn[Cq];Cu+=(Ct[Cv]||1);}return Cu;}},getBreakByAttributeIndices:function Bp(CT){var CN=this.dz.BreakBy,CS=CN&&CN.TemplateUnit||[],CP,CO,AS,CM=this.gts,CQ=CT?CM.row:CM.col,CR=[];if(CS.length>0){for(CP=0;CP<CS.length;CP++){AS=CS[CP];for(CO=0;CO<CQ.length;CO++){if(CQ[CO].t===12&&AS.id===CQ[CO].id){CR.push(CO);break;}}}}return CR;},getPiePartitions:function Af(CW,CY){var CU=this.model,CV=CY?CU.rct:CU.cct,CT,CR,AS,CQ,CX,CS,CM,CP,CO,CN=[];for(CT=0;CT<CV;CT++){AS=CY?CU.getRowHeaderObj(CT,CW):CU.getColHeaderObj(CT,CW);CQ=[];CU.collectHeaderObj(AS,CQ);CX=CQ.length;CS=[];for(CR=0;CR<CX;CR++){CM=CQ[CR];CS.push(CM.idx);}CP=CS.join(",");if(CO!==CP){CN.push(CT);CO=CP;}}return CN;},hasTotalForPie:function(){if(this.hasTotal!==undefined){return this.hasTotal;}var CO,AS=this.dz,CN,CQ=false,CP=this.getUnitsCountInSliceBy()>0,CM=["XAxis","YAxis","SizeBy"];for(CO=0;CO<3;CO++){CN=AS[CM[CO]];if(CN&&CN.TemplateMetric&&CN.TemplateMetric.length>0){CQ=true;break;}}this.hasTotal=CQ&&CP;return this.hasTotal;},setCEChartType:function(AS){if(AS&&this.ceChartType===AS){return false;}if(AS===undefined){AS=this.ceChartType;}this.ceChartType=AS;this.isPercentage=Aq(AS,[7,21,35,14,28,42]);this.isStacked=Aq(AS,[2,16,21,28,30,9,23,37]);return true;},getUnitsCountInSliceBy:function(){return this.getSliceByAttrsID().length;},getCellHandler:function(CN,AS,CR,CW,CP){var CS=this.model,CT,CO,CX,CV,CQ;if(CR!==At){CO=this.mapFromChartToLDSIndex(CN,AS);CT=CO.r;CX=CO.c;CV=CS.mapChartIndexToGrid(CT,CS.rp);CQ=CS.mapChartIndexToGrid(CX,CS.cp);if(CP){var CU=this.piePartition,CY,CM=0;if(CW===B6.VERTICAL){CY=this.totalRows;if(CY.length>0&&CU.length>0){CM=CY[0]-CU[0];CV+=CM;}}else{if(CW===B6.HORIZONTAL){CY=this.totalStartCols;if(CY.length>0&&CU.length>0){CM=CY[0]-CU[0];CQ+=CM;}}}}return{row:CV+this.gts.col.length,col:CQ+CR+this.gts.row.length};}return undefined;},getYAxisInfo:function(Ca,CO,CW,CT,CS){var CV=this,CN=this.getChartInfo(),CR=this.model,CM=[],CQ,CZ=true,CU,AS,CP,CY=this.onlyMetricNamesOnAxisForGridPie,CX=this.isMetricNamesOnXAxis;if(this.chartType===B2.GRID||(CB(this.ceChartType))||CY){CZ=false;}CS=false;if(CZ){if(CN.isABL||CS){if(CW===false){CP=this.getSecondaryMetrics(CT);CU=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}else{CP=this.getPrimaryMetrics(CT);CU=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}if(Ca!==undefined&&CO!==undefined){By.forEach(CP,function(Cb){CM.push(CV.getCellHandler(Ca,CO,Cb,CN.dirc,CN.isPie));});}}else{if(CW===false){CP=this.getMetricsOnSecondaryYAxis();}else{CP=this.getMetricsOnPrimaryYAxis();}if(CN.isBubbleOrScatter&&this.bubbleSeriesNum!==undefined){CP=CP.slice(0,this.bubbleSeriesNum);}CU=CR.getMetricNamesFromIndex(CP);AS=CR.getMetricIDsFromIndex(CP);}}else{if(CY&&!CX){CU=["Metric Names"];AS=["0"];CP=this.getMetricsOnAngleBy();}else{CU=AH.call(this,"YAxis","n");AS=AH.call(this,"YAxis","id");}}return{isMetric:CZ,items:CU,ids:AS,cellHandlers:CM,mtsIdxArr:CP,displayItems:CQ};},getXAxisInfo:function(Ca,CO,CW,CT){var CV=this,CS=this.model,CP=this.chartType,CN=this.getChartInfo(),CM=[],CR,CZ=true,CU,AS,CQ,CY=this.onlyMetricNamesOnAxisForGridPie,CX=this.isMetricNamesOnXAxis;if((t(this.ceChartType))||CP===B2.GRID||CY){CZ=false;}if(CZ){if(CN.isABL){if(CW===false){CQ=this.getSecondaryMetrics(CT);CU=CS.getMetricNamesFromIndex(CQ);AS=CS.getMetricIDsFromIndex(CQ);}else{CQ=this.getPrimaryMetrics(CT);CU=CS.getMetricNamesFromIndex(CQ);AS=CS.getMetricIDsFromIndex(CQ);}if(Ca!==undefined&&CO!==undefined){By.forEach(CQ,function(Cb){CM.push(CV.getCellHandler(Ca,CO,Cb,CN.dirc,CN.isPie));});}}else{if(CW===false){CQ=this.getMetricsOnSecondaryXAxis();}else{CQ=this.getMetricsOnPrimaryXAxis();}if(CN.isBubbleOrScatter&&this.bubbleSeriesNum!==undefined){CQ=CQ.slice(0,this.bubbleSeriesNum);}CU=CS.getMetricNamesFromIndex(CQ);AS=CS.getMetricIDsFromIndex(CQ);}}else{if(CY&&CX){CU=["Metric Names"];AS=["0"];CQ=this.getMetricsOnAngleBy();}else{CU=AH.call(this,"XAxis","n");AS=AH.call(this,"XAxis","id");}}return{isMetric:CZ,items:CU,ids:AS,cellHandlers:CM,mtsIdxArr:CQ,displayItems:CR};},getRowTitleInfo:function(CM){var CO=this.model,CN=CO.getRowTitleInfo(),CP=this.rowHeaderCnt,AS=[];if(CP<CN.length){CN.slice(0,CP);}By.forEach(CN,function(CQ){if(CM){AS.push(CQ);}else{AS.push(CQ.n);}});return{items:AS};},getColTitleInfo:function(CM){var CO=this.model,CN=CO.getColTitleInfo(),CP=this.colHeaderCnt,AS=[];if(CP<CN.length){CN.slice(0,CP);}By.forEach(CN,function(CQ){if(CM){AS.push(CQ);}else{AS.push(CQ.n);}});return{items:AS};},isGrid:function(){return this.chartType===B2.GRID;},isBubble:function(){return this.chartType===B2.BUBBLE;},isScatter:function(){return this.chartType===B2.SCATTER;},isBubbleOrScatter:function(){var AS=this.chartType;return AS===B2.BUBBLE||AS===B2.SCATTER;},clearLayoutInfo:function(){this.widthCache=[];this.heightCache=[];},updateChartInfo:function(){delete this.chartInfo;},supportSort:function(){if(this.chartDirection===BV.EnumABLDirection.VERTICAL){return !(this.dz.Columns.TemplateUnit&&!this.dz.XAxis.TemplateUnit);}else{return !(this.dz.Rows.TemplateUnit&&!this.dz.YAxis.TemplateUnit);}},getChartInfo:function(){var CR=this.chartInfo;if(CR){return CR;}var CP=B2,CQ=this.getChartType(),CN=false,CM=this.property,CO=CM&&CM.readItem(AW.DATA_LABEL),AS=(CM&&CM.readItem(AW.DATA_LABELS_PLACEMENT))||1;if(CQ===CP.AREA||CQ===CP.BAR||CQ===CP.LINE){CN=true;}this.chartInfo={tp:CQ,sbtp:this.chartSubType,dirc:this.chartDirection,shape:this.markerShape,ceMarkerShape:this.ceMarkerShape,isABL:CN,isPie:this.isPie,isHistogram:this.isHistogram,isBoxPlot:this.isBoxPlot,isWaterfall:this.isWaterfall,isRing:false,hasSizeBy:this.hasSizeBy(),isCombo:this.enableCombiChart,isBubbleOrScatter:this.isBubbleOrScatter(),isGrid:this.isGrid(),dlTp:CO,dlPlmt:AS};return this.chartInfo;},getDrillableAttributes:function(){return["Year","Month"];},getDebugMenu:function(){var CM=[],AS=this.enablePartialRendering;if(AS){CM.push({n:"Disable Partial Rendering",did:G.DISABLE_PARTIAL_RENDERING});}else{CM.push({n:"Enable Partial Rendering",did:G.ENABLE_PARTIAL_RENDERING});}if(n.mUseTimer){CM.push({n:"Disable Timer",did:G.DISABLE_TIMER});}else{CM.push({n:"Enable Timer",did:G.ENABLE_TIMER});}if(this.view.enableCETimer){CM.push({n:"Disable CE Timer",did:G.DISABLE_CE_TIMER});}else{CM.push({n:"Enable CE Timer",did:G.ENABLE_CE_TIMER});}CM.push({n:"Print Extremes",did:G.OUTPUT_EXTREMES});CM.push({n:"Print #DataPoints",did:G.OUTPUT_DATA_COUNT});return CM;},getContextMenuData:function(CM){var AS=[];if(CM===BW.GM_ROW_HEADER_TITLE){AS.push({n:"CIRCLE",did:G.CIRCLE});AS.push({n:"SQUARE",did:G.SQUARE});AS.push({n:"PIE",did:G.PIE});AS.push({n:"TICKER",did:G.TICKER});AS.push({n:"RING",did:G.RING});}else{if(CM===BW.GM_COL_HEADER_TITLE){AS.push({n:"Print Extremes",did:G.OUTPUT_EXTREMES});AS.push({n:"Open Legend",did:G.OPEN_LEGEND});AS.push({n:"Switch Combination Chart",did:G.COMBINATION});}}return AS;},getChartType:function(){if(this.chartType===undefined||B2.UNDEFINED){var CS=this.firstRes,AS=CS.dz,CP=AS.XAxis,CM=AS.YAxis,CO,CQ=this.view,CN=CQ.getWidgetPropertyValue(AW.SHAPE),CR=CQ.getWidgetPropertyValue(AW.VIS_TYPE);if(CP.TemplateMetric&&CM.TemplateMetric){if(this.hasSizeBy()){CO=B2.BUBBLE;}else{CO=B2.SCATTER;}}else{if(!CP.TemplateMetric&&!CM.TemplateMetric){CO=B2.GRID;if((!CP.TemplateUnit||CP.TemplateUnit.length===0)&&(!CM.TemplateUnit||CM.TemplateUnit.length===0)){this.isBlankGrid=true;}}else{if(CN===B0.LINE){CO=B2.LINE;}else{if(CN===B0.BAR){CO=B2.BAR;}else{if(CN===B0.AREA){CO=B2.AREA;}else{if(CN===B0.PIE){CO=B2.BAR;}else{if(CN===B0.RING){CO=B2.BAR;}else{CO=B2.BAR;}}}}}if(CM.TemplateMetric){this.chartDirection=BV.EnumABLDirection.VERTICAL;}else{this.horizontalMode=true;this.chartDirection=BV.EnumABLDirection.HORIZONTAL;}}}this.chartType=CO;this.isHistogram=(CR===A6.GRAPHMATRIXVERTICALHISTOGRAM);this.isBoxPlot=(CR===A6.GRAPHMATRIXVERTICALBOXPLOT||CR===A6.GRAPHMATRIXHORIZONTALBOXPLOT);this.isWaterfall=(CR===A6.GRAPHMATRIXVERTICALWATERFALL||CR===A6.GRAPHMATRIXHORIZONTALWATERFALL);this.isPie=(CN===B0.PIE||CN===B0.RING);if(this.isPie){this.isBlankGrid=false;}if(CS.eg!==undefined&&!(CQ&&CQ.excludeData)){this.isBlankGrid=true;}}return this.chartType;},getChartDirection:function(){if(this.chartDirection===undefined){this.getChartType();}return this.chartDirection;},getVisType:function A(){return this.view.getWidgetPropertyValue(AW.VIS_TYPE);},getAggregatedVisType:function Bq(){var CM=this.getVisType(),AS="default";An.forEach(g,function(CO,CN){if(CO.indexOf(CM)>-1){AS=CN.toString().toLowerCase();return false;}});return AS;},getMetricsOnAxisOfChart:function(CS,Ce,CN,CZ,CX){var CT,CO,CQ=this.getChartInfo(),CY=CQ.dirc,CU,CR,Cg,CW,Ca,CP,Cb,Cd,CV,AS,CM,Cc,Cf;if(CQ.tp===B2.GRID){return[];}if(CN==="y"&&CQ.isABL&&CY===1){return[];}if(CN==="x"&&CQ.isABL&&CY===2){return[];}this.metricsOnAxisCache=this.metricsOnAxisCache||{};this.metricsOnAxisCache[CN]=this.metricsOnAxisCache[CN]||{};Cf=(CN==="y"||CN==="z")?CS:Ce;Cf+="#"+(CZ?1:0)+"#"+(CX?1:0);Cc=this.metricsOnAxisCache[CN][Cf];if(Cc!==undefined){return Cc;}CT=this.mapFromChartToLDSIndex(CS,Ce);CO=this.splitPlottingMetrics;CU=this.getMetricsOnXAxis();CR=this.getMetricsOnYAxis();Cg=CU.concat(CR);CW=this.getPrimaryMetrics(true);Ca=this.getSecondaryMetrics(true);CP=this.getSizeByMetrics();Cd=this.inChartLayout||this.getSubChartsLayout();Cb=Math.min(CU.length,CR.length);if(CP.length>0){Cb=Math.min(Cb,CP.length);}if(!CO){if(CN==="y"){if(CQ.isABL){if(CZ===false){Cc=Ca;}else{Cc=CW;}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if((this.haveY1&&CZ!==false)||(!this.haveY1&&CZ===false)){Cc=CR.slice(0,Cb);}}}}else{if(CN==="x"){if(CQ.isABL){if(CZ===false){Cc=Ca;}else{Cc=CW;}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if((this.haveX1&&CZ!==false)||(!this.haveX1&&CZ===false)){Cc=CU.slice(0,Cb);}}}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if(CP.length>0){Cc=CP.slice(0,Cb);}}else{Cc=CP;}}}}else{if(CN==="y"){if(CQ.isABL&&CY===2){CV=CZ?"YAxis":"Y2Axis";AS=CZ?CW[0]:Ca[0];if(AS!==undefined){CM=A4.call(this,AS,CV);}if(this.metricsType===AG.MetricsByRow){if(CZ===false){Cc=Ca.length>0?[Ca[CT.inchtRow]]:[];}else{Cc=CW.length>0?[CW[CT.inchtRow]]:[];}}else{if(CX&&this.metricsType===AG.MetricsByColumn&&CM===Bm.PERCELL){Cc=[Cg[Ce%Cg.length]];}else{if(CZ===false){Cc=Ca;}else{Cc=CW;}}}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if((this.haveY1&&CZ!==false)||(!this.haveY1&&CZ===false)){Cc=CR.length>0?[CR[CS%Cd.r]]:[];}}}}else{if(CN==="x"){if(CQ.isABL&&CY===1){CV=CZ?"XAxis":"X2Axis";AS=CZ?CW[0]:Ca[0];if(AS!==undefined){CM=A4.call(this,AS,CV);}if(this.metricsType===AG.MetricsByColumn){if(CZ===false){Cc=Ca.length>0?[Ca[CT.inchtCol]]:[];}else{Cc=CW.length>0?[CW[CT.inchtCol]]:[];}}else{if(CX&&this.metricsType===AG.MetricsByRow&&CM===Bm.PERCELL){Cc=[Cg[CS%Cg.length]];}else{if(CZ===false){Cc=Ca;}else{Cc=CW;}}}}else{if(CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER){if((this.haveX1&&CZ!==false)||(!this.haveX1&&CZ===false)){Cc=CU.length>0?[CU[Ce%Cd.c]]:[];}}}}else{if((CQ.tp===B2.BUBBLE||CQ.tp===B2.SCATTER)&&CP.length>0){Cc=CP.length>0?[CP[CS%CP.length]]:[];}else{Cc=CP;}}}}Cc=Cc||[];this.metricsOnAxisCache[CN][Cf]=Cc;return Cc;},getSubChartsLayout:function(){var CS=this.splitPlottingMetrics,CO=this.getChartInfo(),CN,AS=this.shallWeUseGroupInfo,CM=this.metricsType;if(!CS){return{r:1,c:1};}var CQ=B2,CT=this.model.plottingMetricsIndex;if(CO.tp===CQ.BUBBLE||CO.tp===CQ.SCATTER){var CR=this.getMetricsOnXAxis();var CP=this.getMetricsOnYAxis();return{r:CP.length,c:CR.length};}if(CM===AG.MetricsByRow){if(AS&&CO.isABL){CN=this.getGroupInfo();return{r:CN.length,c:1};}return{r:CT.length,c:1};}if(CM===AG.MetricsByColumn){if(AS&&CO.isABL){CN=this.getGroupInfo();return{r:1,c:CN.length};}return{r:1,c:CT.length};}B4.visPrint("getSubChartsLayout need to be implemented for this chart type");return{r:1,c:1};},getChartCountInCol:function(){return this.model.cic*this.inChartLayout.r;},getChartCountInRow:function(){return this.model.cir*this.inChartLayout.c;},getSplitPlottingMetrics:function(){var CM=B2;if(this.chartType===CM.GRID&&this.isPie===false){this.splitPlottingMetrics=false;}else{if(this.chartType===CM.GRID&&this.isPie&&this.getMetricsOnAngleBy().length===0){this.splitPlottingMetrics=false;}else{if(this.chartType===CM.GRID&&this.isPie&&BI.call(this,"SliceBy")){this.splitPlottingMetrics=false;}else{var AS=this.metricsType;this.splitPlottingMetrics=(AS===AG.MetricsByRow||AS===AG.MetricsByColumn);}}}return this.splitPlottingMetrics;},reRenderGM:function(){var AS=this.view;if(AS&&AS.excludeData){AS.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:AS.getVisEmptyMsgControls()});return ;}this.widthCache.length=0;this.heightCache.length=0;AS.reRender();},hideContextMenu:function(){var AS=this.view.contextMenu;if(AS!==undefined){AS.hideContextMenu();}},getAxisScaleMode:function(){var CM=this.view.getWidgetPropertyValue(AW.AXIS_SCALE),AS,CN;if(CM){this.axisScale=CM;if(CM===Bm.CUSTOM){CN=this.view.getWidgetPropertyValue(AW.AXIS_SCALE_DATA);if(CN&&CN.length>0){AS=parseInt(CN[0][1],10);if(AS<=Bm.PERCELL){this.axisScale=AS;}else{this.axisScale=Bm.CUSTOM;}}}}else{this.axisScale=Bm.GLOBAL;}return this.axisScale;},getPerCellSetting:function(AS,CM){return{xPerCell:this.isPerCellScaleOn(AS,CM,"x1")||false,x2PerCell:this.isPerCellScaleOn(AS,CM,"x2")||false,y2PerCell:this.isPerCellScaleOn(AS,CM,"y2")||false,yPerCell:this.isPerCellScaleOn(AS,CM,"y1")||false};},getChartUniformAxisTrims:function(AS,CU){var CM,CZ=this.yAxisTrims,CS=this.xAxisTrims,CW=CZ[AS],CY=CS[CU];var CV=this.y2AxisTrims,CP=this.x2AxisTrims,Ca=CV[AS],CT=CP[CU];CM=Bz.call(this,CY,CW,CT,Ca);var CR=this.caAxisTrims[0],CO=this.caAxisTrims[1],CX=CR[CU],CN=CO[AS],CQ;CQ=P.call(this,CX,CN);CM=mstrmojo.hash.copy(CQ,CM);return CM;},getChartUniformAxisMargins:function(CO,CR){var CN=this.yAxisMargins,CQ=this.xAxisMargins,AS=CN[CO],CP=CQ[CR],CM;if(!CP){B4.visPrint("cannot find the x-axis margin");}if(!AS){B4.visPrint("cannot find the y-axis margin");}CM=U.call(this,AS,CP);return CM;},getDataAreaPadding:function(CZ,Cf){var Cd=this.axisScale,CT=this.maxDataAreaPaddingCache,CU=Bm,CO,Ca,Cc,Cb,CQ,CM,AS,CV;if(Cd===CU.PERCELL){if(CT&&CT[CZ]&&CT[CZ][Cf]){return CT[CZ][Cf];}else{return null;}}if(Cd===CU.PERROWCOL||Cd===CU.GLOBAL||Cd===CU.CUSTOM){var CW;if(this.dataAreaPaddingGlobalZero){CW={X1:{HighOffset:0,LowOffset:0},Y1:{HighOffset:0,LowOffset:0},X2:{HighOffset:0,LowOffset:0},Y2:{HighOffset:0,LowOffset:0}};}else{if(!CT){return null;}if(CZ>=Ar){CZ=0;}if(Cf>=j){Cf=0;}CO=CT.length;Ca=CT[0].length;var Cg,CR;if(this.maxRowPadding===undefined){Cg=this.maxRowPadding=[];for(Cc=0;Cc<CO;Cc++){CQ=CT[Cc][0];for(Cb=0;Cb<Ca;Cb++){if(Cb!==0){CQ=Bv(CQ,CT[Cc][Cb]);}}Cg.push(CQ);}}if(this.maxColPadding===undefined){CR=this.maxColPadding=[];for(Cb=0;Cb<Ca;Cb++){AS=CT[0][Cb];for(Cc=0;Cc<CO;Cc++){if(Cc!==0){AS=Bv(AS,CT[Cc][Cb]);}}CR.push(AS);}}Cg=this.maxRowPadding;CR=this.maxColPadding;CQ=Cg[CZ];AS=CR[Cf];if(Cd===CU.GLOBAL||Cd===CU.CUSTOM){CM=this.inChartLayout;CV=CM.r;for(Cc=CZ%CO;Cc<CO;Cc+=CV){CQ=Bv(CQ,Cg[Cc]);}CV=CM.c;for(Cc=Cf%Ca;Cc<Ca;Cc+=CV){AS=Bv(AS,CR[Cc]);}}CW=CE(CQ,AS);}var Ch,CY,CN,CP,Ce=this.layoutPaddingEchos,CS=[Cf,Cf,CZ,CZ],CX=["X1","X2","Y1","Y2"];if(Ce){for(CY=0;CY<CX.length;CY++){Ch=CX[CY];CP=CS[CY];CN=Ce[Ch][CP];if(CN){CW[Ch].HighOffset=Math.max(CW[Ch].HighOffset,(CN.HighOffset||0));CW[Ch].LowOffset=Math.max(CW[Ch].LowOffset,(CN.LowOffset||0));}}}return CW;}},getMetricNameOnAngleBy:function(CM){function CN(CR){var CQ,CP,CO;CQ=this.dz;CP=CQ.AngleBy||CQ.Angle;if(CP){CO=CP.TemplateMetric;}if(CO&&CO.length>CR){return CO[CR];}return null;}var AS=CN.call(this,CM);if(AS){return AS.n;}return"";},getMetricsOnAngleBy:function(){return Ai.call(this,"AngleBy");},getMetricsOnXAxis:function(){return Ai.call(this,"XAxis");},setGroupInfo:function(AS){var CM=this.view;if(CM.GMController===undefined){CM.GMController=this;}CM.setWidgetPropertyValue(AW.GROUP_INFO,JSON.stringify(AS));},removeGroupInfo:function(){this.setGroupInfo([]);},updateGroupInfo:function(){var CP=this.view,CN=this.getGroupInfo(),CQ=[],CM=[At,At],AS=this.gts,CO=this;By.forEach(CN,function(CR){if(CR[0]!==At){CM[0]=AY.call(CO,CR[0],AS);}if(CR[1]!==At){CM[1]=AY.call(CO,CR[1],AS);}if(CM[0]!==At||CM[1]!==At){CQ.push(CR);}});CP.setWidgetPropertyValue(AW.GROUP_INFO,JSON.stringify(CQ));},hasGroupInfoStored:function(){var CM,AS=this.view.getWidgetPropertyValue(AW.GROUP_INFO);if(AS){AS=AS.replace(/'/g,'"');CM=JSON.parse(AS);}if(CM&&CM.length>0){if(AS.indexOf("idx")>=0){CM=B.call(this,CM);}return{existing:true,gi:CM};}return{existing:false};},getDummyGroupInfo:function(CO,CV,CM){var CW=this.model;var CT=[],CR,CS=this.getPrimaryMetrics(),CN=this.getSecondaryMetrics(),Cb=(CW&&CW.getMetricIds())||[],CZ=BB(CS,Cb),AS=BB(CN,Cb);if(CO){var Ca=function(Cd){var Cc;for(Cc=0;Cc<Cd.length;Cc++){if(Cd[Cc]===CO){Cd.splice(Cc,1);break;}}};Ca(CZ);Ca(AS);if(CM){if(CV){CZ=[CO].concat(CZ);}else{AS=[CO].concat(AS);}}else{if(CV){CZ=CZ.concat([CO]);}else{AS=AS.concat([CO]);}}}var CQ=CZ.length,CP=AS.length,CU=Math.max(CQ,CP);for(CR=0;CR<CU;CR++){var CY,CX;CY=(CZ[CR]!==undefined?CZ[CR]:At);CX=(AS[CR]!==undefined?AS[CR]:At);CT.push([CY,CX]);}return CT;},getMetricIndexFromID:function(AS){return AY.call(this,AS,this.gts);},getGroupInfo:function(CO){var CQ=this.view,CM=this.gts,CN=[],CP=this;if(CQ.GMController===undefined){CQ.GMController=this;}var AS=this.hasGroupInfoStored();if(AS.existing){CN=AS.gi;}else{CN=this.getDummyGroupInfo();CQ.setWidgetPropertyValue(AW.GROUP_INFO,JSON.stringify(CN));}if(CO===true){By.forEach(CN,function(CS){var CR=CS[0];if(CR!==At){CS[0]=AY.call(CP,CR,CM);}CR=CS[1];if(CR!==At){CS[1]=AY.call(CP,CR,CM);}});}return CN;},haveMetricAxisTitle:function(CR){var CM=this.haveX1||this.haveX2,CO=this.haveY1||this.haveY2,CS=this.getChartInfo(),CP=this.model,AS=CP&&CP.dz,CQ=AS?AS.XAxis:CP&&CP.getData().dz.XAxis,CN=AS?AS.YAxis:CP&&CP.getData().dz.YAxis;if(CS.isABL){CM=!!CQ.TemplateMetric;CO=!!CN.TemplateMetric;}if(CR==="x"){return CM;}if(CR==="y"){return CO;}return CO||CM;},haveAxisTitle:function(AS){var CP=this.haveX1||this.haveX2,CT=this.haveY1||this.haveY2,CN=this.getChartInfo(),CS=CN.dirc,CR,CQ,CO,CM=this.metricsType;if(CN.isABL){CQ=this.getMetricsOnYAxis();CR=this.getMetricsOnXAxis();CO=CR.concat(CQ);if(CO.length===1){if(CR.length===1){CP=false;}else{CT=false;}}else{if(CS===B6.VERTICAL){if(CM===AG.MetricsByRow||CM===AG.MetricsByYAxis){CP=false;}else{if(CM===AG.MetricsByXAxis){if(this.hasAttributesInDropzone("XAxis")){CP=false;}else{CP=true;CT=false;}}else{CP=false;CT=false;}}}else{if(CM===AG.MetricsByColumn||CM===AG.MetricsByXAxis){CT=false;}else{if(CM===AG.MetricsByYAxis){if(this.hasAttributesInDropzone("YAxis")){CT=false;}else{CP=false;CT=true;}}else{CP=false;CT=false;}}}}}if(AS==="x"){return CP;}if(AS==="y"){return CT;}return CT||CP;},haveAttributeAxisTitle:function(CN){var AS=this.haveX1||this.haveX2,CM=this.haveY1||this.haveY2;AS=this.hasAttributesInDropzone("XAxis");CM=this.hasAttributesInDropzone("YAxis");if(CN==="x"){return AS;}if(CN==="y"){return CM;}return CM||AS;},getShapeForOption:function(CQ){if(this.view.noData){return[];}var AS=this.metricShapeArr,CM=this.model.colorType,CO,CR=this.getChartInfo(),CP=[];if(!CR.isABL||!this.enableCombiChart){return[CR.shape];}if(CQ!==undefined&&(CM===BH.ATT_METRICS||CM===BH.METRICS_ITEM)){var CN;By.forEach(CQ.comb,function(CS){if(CS.tp===4){CN=CS.eid;return false;}});if(CN!==undefined){CO=this.getMetricIndexFromID(CN);}}if(CQ!==undefined&&CQ.optLvl===Bf.METRIC){CO=this.getMetricIndexFromID(CQ.key);}if(CO===undefined||CO===At){By.forEach(AS,function(CS){if(CS!==undefined&&CS>=0){CP.push(CS);}});return CP;}return[AS[CO]];},getOnTheFlyShapeForMetric:function(CN){var AS=this.getForbiddenShapeForMetric(CN),CM=this.getResolvedShapeForMetric(CN);if(AS.indexOf(CM)>=0){return Ah.LINE;}return CM;},getResolvedShapeForMetric:function(CQ){var CN=this.model,CO=CN&&CN.getMetricIDsFromIndex([CQ])[0],CM=this.property.generalProps,CP=CM.metricShapes,AS;if(CP){AS=CP[CO];}if(AS!==undefined){return AS;}return this.markerShape;},getForbiddenShapeForMetric:function(CP){var CS=this,CN=[],CU,CT=[],AS=this.getChartInfo(),CM=this.getPrimaryMetrics(false),CO=this.getSecondaryMetrics(false);if(AS.isABL){if(CO.indexOf(CP)>=0){CU=this.hasGroupInfoStored();if(CU.existing){var CR=this.getGroupInfo(true);CR.forEach(function(CW){if(CW[1]===CP&&CW[0]>=0){CN.push(CW[0]);}});}else{CN=CM;}}}var CV=false,CQ=false;CN.forEach(function(CW){var CX=CS.getResolvedShapeForMetric(CW);if(CX===Ah.BAR){CV=true;}else{if(CX===Ah.AREA){CQ=true;}}});if(CV){CT.push(Ah.BAR);}if(CQ){CT.push(Ah.AREA);}return CT;},getPrimaryMetrics:function(AS){if(!this.horizontalMode){return this.getMetricsOnPrimaryYAxis(AS);}return this.getMetricsOnPrimaryXAxis(AS);},getSecondaryMetrics:function(AS){if(!this.horizontalMode){return this.getMetricsOnSecondaryYAxis(AS);}return this.getMetricsOnSecondaryXAxis(AS);},getMetricsOnPrimaryXAxis:function(CM){var AS=Bu.call(this,0,CM,true,"x");if(AS){return AS;}var CN=this.getMetricsOnXAxis();return AA.call(this,CN,true,CM);},getMetricsOnSecondaryXAxis:function(CM){var AS=Bu.call(this,1,CM,true,"x");if(AS){return AS;}var CN=this.getMetricsOnXAxis();return AA.call(this,CN,false,CM);},getMetricsOnPrimaryYAxis:function(CM){var AS=Bu.call(this,0,CM,true,"y");if(AS){return AS;}var CN=this.getMetricsOnYAxis();return AA.call(this,CN,true,CM);},getMetricsOnSecondaryYAxis:function(CM){var AS=Bu.call(this,1,CM,true,"y");if(AS){return AS;}var CN=this.getMetricsOnYAxis();return AA.call(this,CN,false,CM);},getMetricsOnYAxis:function(){return Ai.call(this,"YAxis");},getMetricsOnTooltip:function(){return Ai.call(this,"AdditionalMetrics");},getSliceByAttrsID:function(){var CM=this.getSliceByAttributes(),AS=[];By.forEach(CM,function(CN){AS.push(CN.id);});return AS;},getBreakByAttrsID:function(){var CM=this.getBreakByAttributes(),AS=[];By.forEach(CM,function(CN){AS.push(CN.id);});return AS;},getColorByAttrsID:function(){var CO,CM=[],CN,AS,CP;CO=this.colorByInfo;if(CO.tp===BH.ATT||CO.tp===BH.ATT_METRICS){CP=CO.atts;AS=CP.length;for(CN=0;CN<AS;CN++){CM.push(CP[CN].id);}return CM;}return[];},getRowColorAttrsIndex:function(){return A0.call(this,"row");},getColColorAttrsIndex:function(){return A0.call(this,"col");},getColorByUnitIds:function(CZ){var CQ,CN,CT,CU,CV=[],CY,CS,CP,CR=[],CX=this,CW=false,CM=false;if(CZ===BV.EnumABLDirection.VERTICAL){CP=["Rows","YAxis","Columns","XAxis"];}else{CP=["Columns","XAxis","Rows","YAxis"];}CP.forEach(function(Ca){CS=AH.call(CX,Ca,"id");By.forEach(CS,function(Cb){CR.push({id:Cb,zone:Ca});});if((Ca==="Rows"||Ca==="Columns")&&CX.dz[Ca].MetricNames!==undefined){CR.push({id:-1,zone:Ca});}});CU=this.colorByInfo;if(CU.tp===BH.METRICS_ITEM||CU.tp===BH.ATT_METRICS){CW=true;}if(CU.tp===BH.ATT||CU.tp===BH.ATT_METRICS||CU.tp===BH.METRICS_ITEM){CT=CU.atts;CN=(CT&&CT.length)||0;By.forEach(CR,function(Ca){if(Ca.id===-1&&CW){CV.push({id:-1,unique:false,zone:Ca.zone,es:CX.getMetricIdsOfABLChart(CZ)});CM=true;return ;}for(CQ=0;CQ<CN;CQ++){CY=CT[CQ];if(Ca.id===CY.id){CV.push({id:CY.id,unique:false,zone:Ca.zone,es:CX.getElementsOfAttr(CY)});break;}}});if(!CM&&CW){CV.push({id:-1,unique:true,es:this.getMetricIdsOfABLChart(CZ)});}var AS=[],CO;for(CQ=0,CO=CV.length;CQ<CO;CQ++){AS.push(CV[CQ].id);}for(CQ=0;CQ<CN;CQ++){CY=CT[CQ];if(AS.indexOf(CY.id)<0){CV.push({id:CY.id,unique:true,es:this.getElementsOfAttr(CY)});}}}return CV;},getElementsOfAttr:function(AS){var CM=this.gts,CR=CM.row,CN=CM.col,CP=(AS.axis==="row"?CR:CN),CO=AS.uidx,CQ=[];By.forEach(CP[CO].es,function(CS){CQ.push(CS.id);});return CQ;},getMetricIdsOfABLChart:function(CN){var CP,CQ,CO=[],CR,CM=this.dz,AS;if(CN===BV.EnumABLDirection.VERTICAL){CR="YAxis";}else{CR="XAxis";}AS=CM[CR].TemplateMetric;if(AS&&AS.length>0){CQ=AS.length;for(CP=0;CP<CQ;CP++){CO.push(AS[CP].id);}}return CO;},splitPiesInGraphCellForABL:function(){if(this.chartType===5){return true;}return this.metricsType!==AG.MetricsBySlice;},getSizeByScaleType:function(AS){var CM,CO="SizeBy",CN;CM=this.getSizeByMetrics();CN=CM[AS];return A4.call(this,CN,CO);},getSizeByMetrics:function(){var CR,CM,CS,CN,AS,CT,CP,CQ="SizeBy",CO=this.metricsOnDropZone[CQ];if(!CO){AS=this.gts;CT=this.dz[CQ];CP=this.chartType;CR=CT.TemplateMetric;CO=[];if(CR&&CR.length>0){CN=this.getMetricsOnYAxis();if(L.call(this,CN)){CS=Math.min(CR.length,CN.length);}else{if((CP===B2.BUBBLE)||(CP===B2.SCATTER)){CS=CR.length;}else{CS=1;}}for(CM=0;CM<CS;CM++){CO.push(AY.call(this,CR[CM].id,AS));}}this.metricsOnDropZone[CQ]=CO;}return CO;},getColorByMetrics:function(){return Ai.call(this,"ColorBy");},getAttributesOnDropZone:function(AS,CM){return AH.call(this,AS,CM);},getGMHeaderCount:function(CM){var AS=this.dz;return Bx.call(this,AS[CM]);},setupDualAxis:function(){var CS,CO,CR=this.getChartInfo(),CN,CQ,CP=this;this.haveX1=false;this.haveX2=false;this.haveY1=false;this.haveY2=false;this.drawX1Numeric=false;this.drawX2Numeric=false;this.drawY1Numeric=false;this.drawY2Numeric=false;if(CR.isABL){if(this.horizontalMode){CO=this.getYAxisInfo();if(CO.items.length>0){this.haveY1=true;}if(this.clusteredBarSpecialCase){this.haveY1=true;}}else{CS=this.getXAxisInfo();CN=this.getMetricsOnPrimaryYAxis();CQ=this.getMetricsOnSecondaryYAxis();if(CS.items.length>0){this.haveX1=true;}if(this.clusteredBarSpecialCase){this.haveX1=true;}}}var CM=function(CU,CT){if(CU.length>0){if(CT==="XAxis"){CP.haveX1=true;}else{if(CT==="XAxis2"){CP.haveX2=true;}else{if(CT==="YAxis"){CP.haveY1=true;}else{if(CT==="YAxis2"){CP.haveY2=true;}}}}By.forEach(CU,function(CV){if(CV===undefined||CV<0){return ;}if(A4.call(CP,CV,CT)!==Bm.PERCELL){if(CT==="XAxis"){CP.drawX1Numeric=true;}else{if(CT==="XAxis2"){CP.drawX2Numeric=true;}else{if(CT==="YAxis"){CP.drawY1Numeric=true;}else{if(CT==="YAxis2"){CP.drawY2Numeric=true;}}}}}else{if(CT==="XAxis"){CP.drawX1Numeric=CP.drawX1Numeric||CP.getChartCountInCol()===1;}else{if(CT==="XAxis2"){CP.drawX2Numeric=CP.drawX2Numeric||CP.getChartCountInCol()===1;}else{if(CT==="YAxis"){CP.drawY1Numeric=CP.drawY1Numeric||CP.getChartCountInRow()===1;}else{if(CT==="YAxis2"){CP.drawY2Numeric=CP.drawY2Numeric||CP.getChartCountInRow()===1;}}}}}});}};CM(this.getMetricsOnPrimaryXAxis(),"XAxis");CM(this.getMetricsOnSecondaryXAxis(),"XAxis2");CM(this.getMetricsOnPrimaryYAxis(),"YAxis");CM(this.getMetricsOnSecondaryYAxis(),"YAxis2");if(CP.clusteredBarSpecialCase){if(CR.dirc===CA.VERTICAL){this.drawX1Numeric=true;}else{this.drawY1Numeric=true;}}if(this.isBubbleOrScatter()){var AS=this.axisLayout;this.haveY1=(AS&A8)!==0;this.haveY2=(AS&Bg)!==0;this.haveX1=(AS&Bs)!==0;this.haveX2=(AS&Q)!==0;}if(this.onlyMetricNamesOnAxisForGridPie){if(this.isMetricNamesOnXAxis){this.haveX1=true;}else{this.haveY1=true;}}if(CR.isGrid&&CR.isPie){if(this.isMetricNamesOnRows){this.haveY1=true;}}CO=this.getYAxisInfo();if(CR.isGrid&&CO.items.length>0&&CO.isMetric===false){this.haveY1=true;}},setupAxisLayout:function(){var Cc,CQ=0,Ch=false,CV=false,CX=false,CZ=false,CY=false,CO=false,CM=false,AS=false,CN=false,CW=false,CU=this.chartType,Ck=this.chartDirection,CS=this.metricsType,CR=this.getXAxisInfo(),Cb=this.getXAxisInfo(undefined,undefined,false,undefined),Ce=this.getYAxisInfo(),Ci=this.getYAxisInfo(undefined,undefined,false,undefined),Cj=this.getMetricsOnAngleBy(),Cd=CU===B2.AREA||CU===B2.BAR||CU===B2.LINE,Cf=this.isPie,CP=this.isGrid(),Cl=this.isBubbleOrScatter();if(Cd){if(Ck===CA.VERTICAL){Cc=Ce.items.length;if(Ci&&Ci.items){CQ=Ci.items.length;}if(Cc>0&&CQ>0){CV=true;}if(CV){if(CS===AG.MetricsByRow){CX=true;}else{CX=true;AS=true;}}else{if((Cc<=1&&CQ<=1)||CS===AG.MetricsByRow){CX=true;}else{if(CS===AG.MetricsByColumn){CZ=true;CY=true;}else{if(CS===AG.MetricsByXAxis||CS===AG.MetricsByBreakBy){if(CR.items.length===0){if(this.chartSubType!==BL.STACKED&&this.chartSubType!==BL.PERCENT){CO=true;}}else{CX=true;AS=true;}}}}}}else{Cc=CR.items.length;if(Cb&&Cb.items){CQ=Cb.items.length;}if(Cc>0&&CQ>0){Ch=true;}if(Ch){if(CS===AG.MetricsByColumn){CZ=true;}else{CZ=true;CN=true;}}else{if((Cc<=1&&CQ<=1)||CS===AG.MetricsByColumn){CZ=true;}else{if(CS===AG.MetricsByRow){if(BE.call(this)){CW=true;}CX=true;}else{if(CS===AG.MetricsByYAxis||CS===AG.MetricsByBreakBy){if(Ce.items.length===0){CM=true;}else{CZ=true;CN=true;}}}}}}}else{if(CP){if(Cf&&Cj.length>1){if(CS===AG.MetricsByRow){CX=true;CZ=false;this.haveY1=true;}if(CS===AG.MetricsByColumn){CX=false;CZ=true;CY=true;}}}else{if(Cl){if(CS===AG.MetricsByRow||CS===AG.MetricsByColumn){CX=true;CZ=true;}else{CX=true;CZ=true;AS=true;CN=true;}}}}var Cg=this.dz.XAxis.TemplateUnit;if(Cg&&Cg.length>0){CZ=true;}var Ca=this.view.getWidgetPropertyValue(BJ.Y_AXIS_TITLE_SHOW),CT=this.view.getWidgetPropertyValue(BJ.X_AXIS_TITLE_SHOW);if(Ca===undefined){Ca=this.view.getWidgetPropertyDefaultValue(BJ.Y_AXIS_TITLE_SHOW,{isMetric:this.yIsNumeric});}if(CT===undefined){CT=this.view.getWidgetPropertyDefaultValue(BJ.X_AXIS_TITLE_SHOW,{isMetric:this.xIsNumeric});}if(!Ca){CX=false;}if(!CT){if(CZ&&!CY){CZ=false;}}this.isXDualAxis=Ch;this.isYDualAxis=CV;this.hasHeaderInY=CX;this.hasFooterInX=CZ;this.isFooterAbove=CY;this.metricNameInX=CO;this.metricNameInY=CM;this.combineMetricNameInX=CN;this.combineMetricNameInY=AS;this.metricNamesOnRowMetricsOnXAxis=CW;this.metricNamesOnColumnMetricsOnYAxis=W.call(this);},getAxisLayout4CE:function(CS,CR){var CU=0,CV,CT,CO;var CN,CW,AS,CQ;if(CS!==undefined&&CR!==undefined){CO=this.chartAxisLayouts=this.chartAxisLayouts||{x:[],y:[]};CV=CO.y;CT=CO.x;var CP=0,CM=0;if(CT[CR]===undefined){CN=this.getXAxisInfo(CS,CR,true,false,true);CW=this.getXAxisInfo(CS,CR,false,false,true);if(CN.items.length>0){CP|=Bs;}if(CW.items.length>0){CP|=Q;}CT[CR]=CP;}else{CP=CT[CR];}if(CV[CS]===undefined){AS=this.getYAxisInfo(CS,CR,true,false,true);CQ=this.getYAxisInfo(CS,CR,false,false,true);if(AS.items.length>0){CM|=A8;}if(CQ.items.length>0){CM|=Bg;}CV[CS]=CM;}else{CM=CV[CS];}CU|=CP;CU|=CM;}else{CN=this.getXAxisInfo(CS,CR,true,false);CW=this.getXAxisInfo(CS,CR,false,false);AS=this.getYAxisInfo(CS,CR,true,false);CQ=this.getYAxisInfo(CS,CR,false,false);if(CN.items.length>0){CU|=Bs;}if(AS.items.length>0){CU|=A8;}if(CQ.items.length>0){CU|=Bg;}if(CW.items.length>0){CU|=Q;}}return CU;},getYAxisWidth4FitWindow:function(CQ){var CN,CR,AS,CO=0,CM=this.getChartCountInCol(),CP=this.getControllerAPI(M.GET_CHART_HEIGHT);CM=Math.min(CM,Ar);for(CN=0;CN<CM;CN++){CR=V.call(this,CN,0);AS=this.getSingleYAxisWidth(CP(CN,0),CR,CN,0,CQ);CO=Math.max(CO,AS);}return CO;},getYAxisWidth4FitContent:function(AS){if(AS){return this.getNumericYAxisWidth(true);}return this.getCategoricalYAxisWidth();},getYAxisWidth:function(){if(this.metricNamesOnRowMetricsOnXAxis){var CP=this.getXAxisInfo(0,0),CQ=[CP.items],CM=this.view.HTML5PROPS.RH,CO=this.view.layouter;var CR=CO.getRowHeadersWidth(CQ,CM);if(CR&&CR.length>0){this.haveY1=true;return CR[0];}}var CS,CN=0,CT=this.view.getWidgetPropertyValue(AW.FIT_TO),AS=this.getYAxisInfo(undefined,undefined,true,false);if(this.isBubbleOrScatter()){CS=this.axisLayout;if((CS&A8)===0){return 0;}}if(AS.items.length===0&&!this.metricNameInY){if(this.hasHeaderInY&&!this.haveY2){return this.view.textHeightInY+2*w;}return 0;}if(!AS.isMetric||this.drawY1Numeric){if(CT===AO.NONE){CN=this.getYAxisWidth4FitContent(AS.isMetric);}else{CN=this.getYAxisWidth4FitWindow(true);}}if(this.hasHeaderInY&&this.haveY1){CN+=this.view.textHeightInY+2*w;}return CN;},getYAxis2Width:function(){var AS,CN,CM=this.getYAxisInfo(undefined,undefined,false,true);if(this.isBubbleOrScatter()){AS=this.axisLayout;if((AS&Bg)===0){return 0;}}if(CM.items.length===0){if(this.hasHeaderInY&&!this.haveY1){CN=this.view.textHeightInY+2*w;return CN;}return 0;}if(!CM.isMetric){return 0;}CN=this.drawY2Numeric?this.getNumericYAxisWidth(false):0;if(this.hasHeaderInY){CN+=this.view.textHeightInY+2*w;}return CN;},getCategoricalYAxisWidth:function(){var CM,CP,CN,CO=0,AS=this.getChartCountInCol();for(CM=0;CM<AS;CM++){CP=this.getYAxisLabels(CM);CN=this.estimateYAxisSize(CP).width;CO=Math.max(CO,CN);}return CO;},getNumericYAxisWidth:function(CQ){var AS=-1,CO=this.getControllerAPI(M.GET_CHART_HEIGHT),CN,CM,CP;var CS=this.getChartCountInCol();for(CN=0;CN<CS;CN++){var CR=V.call(this,CN,0);CM=this.getSingleYAxisWidth(CO(CN,0),CR,CN,0,CQ);if(CM>AS){AS=CM;}}return AS;},getXAxisHeight:function(CN){var CM,AS,CO=this.getXAxisInfo();if(this.isBubbleOrScatter()){CM=this.axisLayout;if((CM&Bs)===0){return 0;}}if(CO.items.length===0&&!this.metricNameInX){if(this.metricNameInX&&!this.haveX2){return this.view.textHeightInX+w*2;}return 0;}if(CO.isMetric){AS=this.drawX1Numeric?this.getNumericXAxisHeight(CN,true):0;if(this.hasFooterInX&&!this.isFooterAbove){AS+=this.view.textHeightInX+2*w;}}else{AS=this.getCategoricalXAxisHeight(CN);if(this.hasFooterInX){AS+=this.view.textHeightInX+2*w;}}return AS;},getXAxis2Height:function(CO){var CM,CN=this.view,CP=CN.rowHeaderMaxHeightWithoutX2;if(!this.haveX2){return CP;}if(this.isBubbleOrScatter()){CM=this.axisLayout;if((CM&Q)===0){return CP;}}var AS=this.drawX2Numeric?this.getNumericXAxisHeight(CO,false):0;if(this.hasFooterInX&&!this.isFooterAbove){AS+=this.view.textHeightInX+2*w;}return Math.max(CP,AS);},getCategoricalXAxisHeight:function(AS){return this.getNumericXAxisHeight(AS,true);},getNumericXAxisHeight:function(CS,CR){var CM=0,AS=this.getControllerAPI(M.GET_CHART_WIDTH),CP,CO,CT;var CQ=this.getChartCountInRow(),CN=this.view.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH);CQ=Math.min(CQ,j);for(CP=0;CP<CQ;CP++){CO=V.call(this,0,CP);CT=this.getSingleXAxisHeight(AS(0,CP)*CN,CO,0,CP,CS,CR);CM=Math.max(CM,CT);}return CM;},getSingleYAxisWidth:function(CP,CN,AS,CR,CS){var CQ=this.getAxisChartInstance(CN,AS,CR,"y",CS,0,CP,true),CM;if(CQ===null){return 0;}CM=CQ.GetUniformYAxisWidth(CP,-1,CS);var CO=BC.call(this,false,CS);CQ.echoCondenseStatus(CO,AS);var CT=CD.call(this,false,CS);CQ.echoLayoutPaddings(CT,AS);return CM;},getSingleXAxisHeight:function(CT,CM,AS,CP,CU,CQ){var CO=this.getAxisChartInstance(CM,AS,CP,"x",CQ,CT,0,true),CS;if(CO===null){return 0;}CS=CO.GetUniformXAxisHeight(CT,-1,CQ);var CN=BC.call(this,true,CQ);CO.echoCondenseStatus(CN,CP);var CR=CD.call(this,true,CQ);CO.echoLayoutPaddings(CR,CP);return CS;},getCategoricalColWidth:function(CQ){var CP=this.getXAxisLabels(CQ),CM=this.xLabelPlacement,AS=this.view.GMW,CN=this.view.layouter.minWidths,CO;CO=this.estimateXAxisSize(CP,CM,AS).width;if(CN&&CN[CQ]){CO=Math.max(CO,CN[CQ]);}return CO;},checkBarColumnsForAxisPadding:function s(CN,AS){var CR=this.getChartInfo(),CQ=this.hasBarChart,CO=this.isCombo,CM=CQ&&(CO||CR.sbtp===BV.EnumSubtype.AUTO||CR.sbtp===BV.EnumSubtype.CLUSTERED);var CP=-1;if(CQ){var CS=V.call(this,CN,AS);CP=CS.getGroupCount();if(CM){CP*=CS.innerGetSeriesCount();}CP+=0.5;}return CP;},getCategoricalRowHeight:function(CO){var CP=this.getYAxisLabels(CO);var CN=this.estimateYAxisSize(CP).height;var CM=this.checkBarColumnsForAxisPadding(CO,0);if(CM>0){CN+=2*Math.round(CN/(4*CM-2));}var AS=this.view.layouter.minHeights;if(AS&&AS[CO]){CN=Math.max(CN,AS[CO]);}return CN;},getColHeaderSummary:function(CO){if(this.colHdrSmrs[CO]){return this.colHdrSmrs[CO];}var CQ,CU,CP,AS,CN,CV,CW,CR=this.model,CS=this.getChartCountInRow(),CT=[];for(CQ=0;CQ<CS;CQ++){CV=this.mapFromChartToLDSIndex(CO,CQ).c;CW=CR.mapChartIndexToGrid(CV,CR.cp);CP=CR.getColHeaderObj(CW,CO);AS=CR.headerInfoToProp(1,CP,"n&id");CN=AS[0].id;CU=CR.getColTitleInfo()[CP.tui].id;CT.push(CN);}var CM={unit:CU,elements:CT};this.colHdrSmrs.push(CM);return CM;},getRowHeaderSummary:function(CN){if(this.rwHdrSmrs[CN]){return this.rwHdrSmrs[CN];}var CP,CO,CM,CW,AS,CR,CU,CQ=this.model,CT=this.getChartCountInCol(),CS=[];for(CP=0;CP<CT;CP++){CR=this.mapFromChartToLDSIndex(CP,CN).r;CU=CQ.mapChartIndexToGrid(CR,CQ.rp);CO=CQ.getRowHeaderObj(CU,CN);AS=CQ.headerInfoToProp(0,CO,"n&id");CM=AS[0].id;CW=CQ.getRowTitleInfo()[CO.tui].id;CS.push(CM);}var CV={unit:CW,elements:CS};this.rwHdrSmrs.push(CV);return CV;},getRowHeadersByCell:function AK(CV){var CX=this.model,Ca=CX.getMetricCount(),CO=CX.getUnitAttributesCountOnRow(),CS=CX.getUnitAttributesCountOnCol(),CR=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],CQ,CT,CZ,CM,CU,CW,CY,CP,CN,AS=[];if(CV){CT=CV.row-this.gts.col.length;CZ=CV.col-this.gts.row.length;CM=CZ%Ca;CU=CX.getMetricProp(undefined);CP=An.copy(CU[CM],{});CP.gvsRI=CT;CP.gvsCI=CZ;}else{return{metricObj:undefined,headers:undefined};}if(this.horizontalMode){CP.axis=C.DssAxisRows;if(this.specialSortable){CP.axis=C.DssAxisColumns;}for(CQ=0;CQ<CS;CQ++){CW=X.call(this,CQ);if(this.specialSortable&&CW.dropzones.indexOf("BreakBy")>=0){continue;}CY=An.copyProps(CR,CX.getColHeaderObj(CZ,CQ),{});CN=CX.headerInfoToProp(1,CY,"n&id");An.copy(CN[0],CY);AS.push(CY);}}else{CP.axis=C.DssAxisColumns;if(this.specialSortable){CP.axis=C.DssAxisRows;}for(CQ=0;CQ<CO;CQ++){CW=b.call(this,CQ);if(this.specialSortable&&CW.dropzones.indexOf("BreakBy")>=0){continue;}CY=An.copyProps(CR,CX.getRowHeaderObj(CT,CQ),{});CN=CX.headerInfoToProp(0,CY,"n&id");An.copy(CN[0],CY);AS.push(CY);}}return{metricObj:CP,headers:AS};},getMetricSortInfo:function CI(){var Cb=this.firstRes,CZ=Cb.gsi,CM=CZ.sorts[0],CS=CZ.sorts[1],CP=CM.concat(CS),CV=0,AS=1,CU=4,CY=4,CT,Ca,CR,CO,CN,CQ,CX,CW={};if(this.metricSortInfo){return this.metricSortInfo;}for(CT=0;CT<CP.length;CT++){CR=CP[CT];Ca=CR.key.split("!");CO=parseInt(Ca[CV]);CN=Ca[AS];CQ=Ca[CU];if(CO===CY){CX=CQ!==""?CQ.split(""):[];CW={metricId:CN,elements:CX,order:CR.isAsc};}}this.metricSortInfo=CW;return CW;},updateSortIndex:function S(AS){var CN=this.view,CM=CN.getWidgetPropertyValue(AW.SORT_INDEX);if(CM&&(CM.row!==AS.row||CM.col!==AS.col)){CN.setWidgetPropertyValue(AW.SORT_INDEX,AS);}},getUpdateMetricSortAction:function N(CO,AS,CN){var CQ,CM,CP=this.getChartInfo();this.sortingMetric=true;CM=this.getMetricSortDefinition(CO,AS);CQ=this.getSortActions(CM);if(CP.isABL&&CN){this.fakeSortActionsStackTotal(CQ);}return{act:"sortGM",nodeKey:this.view.k,subActions:CQ,partialUpdate:{nodes:[this.view.k]}};},getControllerAPI:function Be(CM){var Ci=this,CY=this.view,CU=Ci.getChartInfo(),CO=Ci.model;var AS=function(Cn,Cm){var Cq,Ck,Co=0;if(Cm instanceof Array){Cq=Cm[0];Ck=Cm[1];}else{Cq=+Cm;Ck=+Cm+1;}var Cp=function(){var Cr;for(Cr=Cq;Cr<Ck;Cr++){if(Ci.widthCache[Cr]===undefined){return false;}}return true;};var Cl;if(Ci.manager.isAsync&&Cp()===false){for(Cl=Cq;Cl<Ck;Cl++){if(Ci.widthCache[Cl]===undefined){Ci.manager.queryColWidth(Cl);Co+=Ci.manager.chartW||Ci.manager.master.chartW;}else{Co+=Ci.widthCache[Cl];}}}else{for(Cl=Cq;Cl<Ck;Cl++){if(Ci.widthCache[Cl]===undefined){Ci.widthCache[Cl]=Ci.getCategoricalColWidth(Cl);}Co+=Ci.widthCache[Cl];}}return Co;};var CR=function(Cn,Cm){var Cq,Ck,Co=0;if(Cn instanceof Array){Cq=Cn[0];Ck=Cn[1];}else{Cq=+Cn;Ck=+Cn+1;}var Cp=function(){var Cr;for(Cr=Cq;Cr<Ck;Cr++){if(Ci.heightCache[Cr]===undefined){return false;}}return true;};var Cl;if(Ci.manager.isAsync&&Cp()===false){for(Cl=Cq;Cl<Ck;Cl++){if(Ci.heightCache[Cl]===undefined){Ci.manager.queryRowHeight(Cl);Co+=Ci.manager.chartH||Ci.manager.master.chartH;}else{Co+=Ci.heightCache[Cl];}}}else{for(Cl=Cq;Cl<Ck;Cl++){if(Ci.heightCache[Cl]===undefined){Ci.heightCache[Cl]=Ci.getCategoricalRowHeight(Cl);}Co+=Ci.heightCache[Cl];}}return Co;};var Ce=function(Co,Cn){if(Cn===undefined){Cn=0;}var Cp=Ci.mapFromChartToLDSIndex(Co,0).r,Cr=CO.mapChartIndexToGrid(Cp,CO.rp),Ck=CO.getRowHeaderObj(Cr,Cn),Cs=CO.mapGridIndexToChart(Ck.o,CO.rp),Cq=CO.mapGridIndexToChart(Ck.o+Ck.rs-1,CO.rp),Cl=Cq-Cs+1,Cm=Ci.inChartLayout.r;Cs*=Cm;Cq=Cs+Cl*Cm-1;return[Cs,Cq];};var CZ=function(Co,Cn){if(Cn===undefined){Cn=0;}var Cq=Ci.mapFromChartToLDSIndex(0,Co).c,Cm=CO.mapChartIndexToGrid(Cq,CO.cp),Ck=CO.getColHeaderObj(Cm,Cn),Cs=CO.mapGridIndexToChart(Ck.o,CO.cp),Cp=CO.mapGridIndexToChart(Ck.o+Ck.cs-1,CO.cp),Cl=Cp-Cs+1,Cr=Ci.inChartLayout.c;Cs*=Cr;Cp=Cs+Cl*Cr-1;return[Cs,Cp];};var Ch=function(Ct,C7,Cz,C4,Cq,Cp,Ck,Cs,Cu){var Cr,Cn,Cy,C3,Cv,Co,C2,C6,Cm,C1,Cx=Ci.view,C5=Cx.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cw=Cx.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cl=Cx.getWidgetPropertyValue(BJ.ROW_VALUES_SHOW);Cr=Ci.mapFromChartToLDSIndex(Cq,Cp).r;Cn=CO.mapChartIndexToGrid(Cr,CO.rp);Cy=CO.getRowHeaderObj(Cn,Cp);Cm=Cy.fid;C2=CO.headerInfoToProp(0,Cy,"n&id&bftp");C3=C2[0].n;Cv=C2[0].id;Co=C2[0].bftp;C6=Cy.tui;C1=CO.getRowTitleInfo()[C6];var C0=document.createElement("div");C0.setAttribute("row",Cq);C0.setAttribute("col","0");C0.setAttribute("rowSpan",Ck);C0.setAttribute("colSpan",Cs);C0.setAttribute("depth",Cp);C0.setAttribute("class",Cu);C0.setAttribute("type",BW.GM_ROW_HEADER);C0.setAttribute("text",n.replaceSpecialChars(C3));C0.style.width=Ct+"px";C0.style.height=C7+"px";C0.style.top=Cz+"px";C0.style.left=C4+"px";if(Cl){if(Co){n.fillImageInDiv(C0,Co,C3);}else{n.fillTextInDiv(C0,{objType:c.ROW_HEADER_TEXT},C3,Ct,C7,false,Ci.rhStyles,C5,Cw);}}n.fillBackgroundDiv(C0);C0.selectionInfo=[[{eid:Cv,v:C3,tid:C1.id,n:C1.n,isRowAttribute:true,tui:C6}]];C0.identity=new mstrmojo.gm.HeaderCellIdentity({objType:c.ROW_HEADER,eid:Cv,v:C3,tid:C1.id,n:C1.n,tui:C6,fid:Cm,isRowAttribute:true,o:Cy.o,dpt:Cy.dpt,dei:Cy.dei,at:Cy.at});C0.bftp=Co;return C0;};var CS=function(Ck,Cs,Cn,Cu,Cm){Ck.style.width=Cs+"px";Ck.style.height=Cn+"px";Ck.style.top=Cu+"px";Ck.style.left=Cm+"px";var Cr=Ci.view,Ct=n.restoreSpecialChars(Ck.getAttribute("text")),Cl=Cr.getWidgetPropertyValue(BJ.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Co=Cr.getWidgetPropertyValue(BJ.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cp=Cr.getWidgetPropertyValue(BJ.COLUMN_VALUES_SHOW),Cq=Ck.bftp;Ck.innerHTML="";if(Cp){if(Cq){n.fillImageInDiv(Ck,Cq,Ct);}else{n.fillTextInDiv(Ck,{objType:c.COL_HEADER_TEXT},Ct,Cs,Cn,false,Ci.chStyles,Cl,Co);}}n.fillBackgroundDiv(Ck);};var CT=function(Ck,Cs,Cn,Cu,Cm){Ck.style.width=Cs+"px";Ck.style.height=Cn+"px";Ck.style.top=Cu+"px";Ck.style.left=Cm+"px";var Cr=Ci.view,Ct=n.restoreSpecialChars(Ck.getAttribute("text")),Cl=Cr.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Co=Cr.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cp=Cr.getWidgetPropertyValue(BJ.ROW_VALUES_SHOW),Cq=Ck.bftp;Ck.innerHTML="";if(Cp){if(Cq){n.fillImageInDiv(Ck,Cq,Ct);}else{n.fillTextInDiv(Ck,{objType:c.ROW_HEADER_TEXT},Ct,Cs,Cn,false,Ci.rhStyles,Cl,Co);}}n.fillBackgroundDiv(Ck);};var Cg=function(Ct,C7,Cz,C4,Cr,Cp,Ck,Cs,Cu){var Cq,Cn,Cy,C2,C3,Cv,Co,C6,C1,Cm,Cx=Ci.view,C5=Cx.getWidgetPropertyValue(BJ.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cw=Cx.getWidgetPropertyValue(BJ.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cl=Cx.getWidgetPropertyValue(BJ.COLUMN_VALUES_SHOW);Cq=Ci.mapFromChartToLDSIndex(Cr,Cp).c;Cn=CO.mapChartIndexToGrid(Cq,CO.cp);Cy=CO.getColHeaderObj(Cn,Cr);Cm=Cy.fid;C2=CO.headerInfoToProp(1,Cy,"n&id&bftp");C3=C2[0].n;Cv=C2[0].id;Co=C2[0].bftp;C6=Cy.tui;C1=CO.getColTitleInfo()[C6];var C0=document.createElement("div");C0.setAttribute("row","0");C0.setAttribute("col",Cp);C0.setAttribute("rowSpan",Ck);C0.setAttribute("colSpan",Cs);C0.setAttribute("depth",Cr);C0.setAttribute("class",Cu);C0.setAttribute("type",BW.GM_COL_HEADER);C0.setAttribute("text",n.replaceSpecialChars(C3));C0.style.width=Ct+"px";C0.style.height=C7+"px";C0.style.top=Cz+"px";C0.style.left=C4+"px";if(Cl){if(Co){n.fillImageInDiv(C0,Co,C3);}else{n.fillTextInDiv(C0,{objType:c.COL_HEADER_TEXT},C3,Ct,C7,false,Ci.chStyles,C5,Cw);}}n.fillBackgroundDiv(C0);C0.selectionInfo=[[{eid:Cv,v:C3,tid:C1.id,n:C1.n,isRowAttribute:false,tui:C6}]];C0.identity=new mstrmojo.gm.HeaderCellIdentity({objType:c.COL_HEADER,eid:Cv,v:C3,tid:C1.id,n:C1.n,tui:C6,fid:Cm,isRowAttribute:false,o:Cy.o,dpt:Cy.dpt,dei:Cy.dei,at:Cy.at});C0.bftp=Co;return C0;};var Ca=function(Cv,C5,Cy,C4,Cr,Cq,Ck,Ct,Cw){var Cz,Cn,Cm,C2,Cp="",C0=document.createElement("div"),C1=[""],Co,Cu,C3=C1.length,Cx=Ci.view,Cl=Cx.getWidgetPropertyValue(BJ.COLUMN_VALUES_SHOW);if(Ci.metricsType===AG.MetricsByColumn&&Ci.isFooterAbove){Cn=Ci.getYAxisInfo(Cr,Cq,Ci.haveY1);C1=Cn.items;if(CU.isPie){Co=Ci.getMetricsOnAngleBy();if(!Cn.isMetric){C1=CO.getMetricNamesFromIndex(Co);}Cu=CO.getMetricIDsFromIndex(Co);}C3=C1.length;Cp=BW.GM_COL_HEADER_EXTRA;}Cm=B9.YAxis;C2=Cq%C3;Cz=C1[C2];C0.setAttribute("row","0");C0.setAttribute("col",Cq);C0.setAttribute("rowSpan",Ck);C0.setAttribute("colSpan",Ct);C0.setAttribute("depth",Cr);C0.setAttribute("class",Cw);C0.setAttribute("type",Cp);C0.setAttribute("text",Cz);if(Cz!==""){C0.setAttribute("dzId",Cm);C0.setAttribute("dzIndex",C2);}C0.style.width=Cv+"px";C0.style.height=C5+"px";C0.style.top=Cy+"px";C0.style.left=C4+"px";if(Cl&&Cz!==""){n.fillTextInDiv(C0,{objType:c.COL_HEADER_TEXT},Cz,Cv,C5,false,Ci.chStyles);}n.fillBackgroundDiv(C0);if(Ci.metricsType===AG.MetricsByColumn&&Ci.isFooterAbove){if(CU.isPie){C0.selectionInfo={mid:Cu[Cq],midx:Co[Cq]};}else{var Cs=Cn.cellHandlers;C0.selectionInfo={mid:Cn.ids[C2],midx:Cn.mtsIdxArr[C2],cellHandle:Cs[C2]};}}return C0;};var Cb=function(Cs,C3,Cv,C1,Cp,Co,Ck,Cr,Ct){var Cw,C2,Cm,Cz,Cn="",Cx=document.createElement("div"),Cy=[""],C0=Cy.length,Cu=Ci.view,Cl=Cu.getWidgetPropertyValue(BJ.ROW_VALUES_SHOW);if(Ci.metricsType===AG.MetricsByRow&&Ci.metricNamesOnRowMetricsOnXAxis){C2=Ci.getXAxisInfo(Cp,Co);Cy=C2.items;C0=Cy.length;Cn=BW.GM_ROW_HEADER_EXTRA;}Cm=B9.XAxis;Cz=Cp%C0;Cw=Cy[Cz];Cx.setAttribute("row",Cp);Cx.setAttribute("col",0);Cx.setAttribute("rowSpan",Ck);Cx.setAttribute("colSpan",Cr);Cx.setAttribute("depth",Co);Cx.setAttribute("class",Ct);Cx.setAttribute("type",Cn);Cx.setAttribute("text",Cw);if(Cw!==""){Cx.setAttribute("dzId",Cm);Cx.setAttribute("dzIndex",Cz);}Cx.style.width=Cs+"px";Cx.style.height=C3+"px";Cx.style.top=Cv+"px";Cx.style.left=C1+"px";if(Cl){n.fillTextInDiv(Cx,{objType:c.ROW_TITLE_TEXT},Cw,Cs,C3,false,Ci.rhStyles);}n.fillBackgroundDiv(Cx);if(Ci.metricsType===AG.MetricsByRow&&Ci.metricNamesOnRowMetricsOnXAxis){var Cq=C2.cellHandlers;Cx.selectionInfo={mid:C2.ids[Cz],midx:C2.mtsIdxArr[Cz],cellHandle:Cq[Cz]};}return Cx;};var Cj=function(Ck,Cr,Cn,Ct,Cm){Ck.style.width=Cr+"px";Ck.style.height=Cn+"px";Ck.style.top=Ct+"px";Ck.style.left=Cm+"px";var Cq=Ci.view,Cs=Ck.getAttribute("text"),Cl=Cq.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Co=Cq.getWidgetPropertyValue(BJ.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cp=Cq.getWidgetPropertyValue(BJ.ROW_VALUES_SHOW);Ck.innerHTML="";if(Cp){n.fillTextInDiv(Ck,{objType:c.ROW_HEADER_TEXT},Cs,Cr,Cn,false,Ci.rhStyles,Cl,Co);}n.fillBackgroundDiv(Ck);};var CN=function(DD,DN,DG,DK,Cx,Cr,DO,Cn,DH,Co,DI){if(Ci.metricNamesOnRowMetricsOnXAxis){DH="gm-rowheader-cell-dummy";return Cb(DD,DN,DG,DK,Cx,Cr,DO,Cn,DH);}var DP=document.createElement("div");DP.setAttribute("class",DH);DP.setAttribute("row",Cx);DP.setAttribute("col",Cr);DP.setAttribute("rowSpan",DO);DP.setAttribute("colSpan",Cn);if(Ci.clusteredBarSpecialCase){DP.setAttribute("type",BW.GM_Y_NUMERIC);}else{DP.setAttribute("type",Ci.yIsNumeric?BW.GM_Y_NUMERIC:BW.GM_Y_CATEGORY);}DP.style.width=DD+"px";DP.style.height=DN+"px";DP.style.top=DG+"px";DP.style.left=DK+"px";DP.style.backgroundColor="rgba(0,0,0,0)";DP.drawAxis=true;if(Cx%2===1&&Ci.view.getWidgetPropertyValue(AW.BANDING)){Ba.addClass(DP,"banding");}var DM,C6,C4,DV,DR,Ck,DB,C9,DU,Cw,Cl=B9.YAxis,C7,C0,DQ=[],DE=0,C2=false,Cv=false,Cm,C1,DC,C3,DF,C8,Cy=Ci.isGrid(),DL=Ci.isPie,DA=Ci.haveX1,DJ=CU.isABL&&Ci.splitPlottingMetrics;DV=Ci.mapFromChartToLDSIndex(Cx,Cr);DR=Ci.getXAxisInfo(Cx,Cr,true,DJ);Ck=Ci.getXAxisInfo(Cx,Cr,false,DJ);DB=Ci.getYAxisInfo(Cx,Cr,Co,DJ);if(Cy&&DL){DU=Ci.model.getMetricNamesFromIndex(Ci.getMetricsOnAngleBy());Cl=B9.Angle;}else{if(DB.isMetric){DU=DB.items;C0=DB.cellHandlers;}else{DU=[];}}if(DB.isMetric&&CU.isABL&&Ci.splitPlottingMetrics){C2=true;if(DB.mtsIdxArr[DV.inchtRow]<0){Cv=true;}}if(DB.isMetric&&!Cv){if(Co===false){C8=Ag(Ci.getMetricsOnAxisOfChart(Cx,Cr,"y",false));}else{C8=Ag(Ci.getMetricsOnAxisOfChart(Cx,Cr,"y",true));}DP.drawAxis=true;By.forEach(C8,function(DX){if(DX===undefined||DX<0){DP.drawAxis=false;}else{var DW=Co?"YAxis":"Y2Axis";if(A4.call(Ci,DX,DW)===Bm.PERCELL){DP.drawAxis=(Ci.getChartCountInRow()===1);}}});DF=new BV.AxisIdentity({isNumericAxis:true,objType:c.Y_NUMERIC,metricIdxArr:C8});}else{if(!DB.isMetric){DF=new BV.AxisIdentity({isNumericAxis:false,objType:c.Y_CATEGORY,attrIdArr:DB.ids});}}if(!Cv&&Ci.hasHeaderInY){if(DU.length===0&&DR.isMetric){DU=DA?DR.items:Ck.items;C0=DA?DR.cellHandlers:Ck.cellHandlers;Cl=B9.XAxis;}Cw=DU.length;DE=Ci.view.textHeightInY+2*w;C9=document.createElement("div");DP.metrics=[];var Cs,DT,DS=[],C5=[];if(Ci.combineMetricNameInY){for(DM=0;DM<Cw;DM++){C5.push(DM);DP.metrics.push(DU[DM]);}}else{if(C2){C7=DV.inchtRow;}else{C7=Cx%Cw;}C5.push(C7);DP.metrics.push(DU[C7]);}for(DM=0;DM<C5.length;DM++){C7=C5[DM];C6=DU[C7];Cs={};Cs.extraAttributes={};C4=Cs.extraAttributes;Cs.text=C6;C4.dzId=Cl;C4.dzIndex=C7;C4.type=BW.GM_YLABEL;if(CU.isABL&&C0){if(C0[C7]){DC=(C0[C7].col-Ci.gts.row.length)%CO.getMetricCount();DT=Ci.getMetricInGSIMx(DC);Cm=CO.getMetricIDsFromIndex([DC])[0];C1=CO.getMetricIDFromIndex(DC);C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:C1,midx:DC,cellHandle:C0[C7],objType:c.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cm]){C3[Cm]=C4.selectionInfo;}}else{C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({objType:c.Y_METRIC_AXIS_TITLE});}if(Ap.call(Ci,C4.selectionInfo)){Cs.sort=true;C4.sort=true;C4.sortOrder=Ci.metricSortInfo.order;C9.innerText+=Ci.metricSortInfo.order?"asc":"desc";}}else{if(CU.isBubbleOrScatter){DC=DB.mtsIdxArr[C7];DT=Ci.getMetricInGSIMx(DC);Cm=CO.getMetricIDsFromIndex([DC])[0];C1=CO.getMetricIDFromIndex(DC);C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:C1,midx:DC,objType:c.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cm]){C3[Cm]=C4.selectionInfo;}}}C4.customScale=(A4.call(Ci,DC,"YAxis")===Bm.CUSTOM);DQ.push(C4.selectionInfo);DS.push(Cs);}DP.appendChild(C9);var Cz=new mstrmojo.VisAxisLabel({placeholder:C9,width:DN+"px",height:Ci.view.textHeightInY+"px",cssClass:"gm-yaxis-cell-label",styles:Ci.yTitleStyles,align:Co?"left":"right",contentData:DS});Cz.render();Cz.parent=CY;Ci.addDisposable(Cz);if(C5.length===1){DP.labelDiv=Cz.domNode;}else{DP.combinedLabelDiv=Cz.domNode;}}else{if(!Cv&&DB.isMetric){if(DU.length===0&&DR.isMetric){DU=DA?DR.items:Ck.items;C0=DA?DR.cellHandlers:Ck.cellHandlers;Cl=B9.XAxis;}Cw=DU.length;DP.metrics=[];var C5=[];for(DM=0;DM<Cw;DM++){C5.push(DM);DP.metrics.push(DU[DM]);}for(DM=0;DM<C5.length;DM++){C7=C5[DM];C6=DU[C7];C4={};C4.dzId=Cl;C4.dzIndex=C7;C4.type=BW.GM_YLABEL;if(CU.isABL&&C0){if(C0[C7]){DC=(C0[C7].col-Ci.gts.row.length)%CO.getMetricCount();Cm=CO.getMetricIDsFromIndex([DC])[0];C1=CO.getMetricIDFromIndex(DC);C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:C1,midx:DC,cellHandle:C0[C7],objType:c.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cm]){C3[Cm]=C4.selectionInfo;}}else{C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({objType:c.Y_METRIC_AXIS_TITLE});}}else{if(CU.isBubbleOrScatter){DC=DB.mtsIdxArr[C7];Cm=CO.getMetricIDsFromIndex([DC])[0];C1=CO.getMetricIDFromIndex(DC);C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cm,mOriId:C1,midx:DC,objType:c.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cm]){C3[Cm]=C4.selectionInfo;}}}DQ.push(C4.selectionInfo);}}}DP.selectionInfos=DQ;var Cu=AN(DD,DN,DE,"y",Co);DP.setAttribute("isPrimary",Co);DP.appendChild(Cu);if(!Cv&&DP.drawAxis){var Ct=Ci.view.getWidgetPropertyValue(Co?AW.SCALE_Y:AW.SCALE_Y2),Cp=Ct!==undefined&&Ct!==1;Ci.drawYAxis(Cu,DD-DE,DN,Cx,DV.r,Cr,false,DV.dpIdx,Cp,Co,DI,Ci.hasHeaderInY);}else{if(Ci.view.getWidgetPropertyValue(AW.BANDING)){var Cq=[{Start:0,Size:DN}];Ci.drawInChartBanding(DP,Cq,Ci.bandingFlags[Cx]);}}DP.subRegion=DI;if(DF){DP.identity=DF;}return DP;};var CW=function(DC,DL,DF,DJ,Cx,Cr,DM,Co,DG,Cp,DH){var DN=document.createElement("div");DN.setAttribute("row",Cx);DN.setAttribute("col",Cr);DN.setAttribute("rowSpan",DM);DN.setAttribute("colSpan",Co);DN.setAttribute("class",DG);if(Ci.clusteredBarSpecialCase){DN.setAttribute("type",BW.GM_X_NUMERIC);}else{DN.setAttribute("type",Ci.xIsNumeric?BW.GM_X_NUMERIC:BW.GM_X_CATEGORY);}DN.innerHTML="";DN.style.width=DC+"px";DN.style.height=DL+"px";DN.style.top=DF+"px";DN.style.left=DJ+"px";DN.style.backgroundColor="rgba(0,0,0,0)";DN.drawAxis=true;var DT=Ci.mapFromChartToLDSIndex(Cx,Cr),DI=CU.isABL&&Ci.splitPlottingMetrics,DP=Ci.getXAxisInfo(Cx,Cr,Cp,DI),DA=Ci.getYAxisInfo(Cx,Cr,true,DI),C5=Ci.getYAxisInfo(Cx,Cr,false,DI),Cw=Ci.haveY1,DD=0,C9,Cv,Cl=B9.XAxis,C7,DS,Cy,DO=[],C0=false,Cu=false,Cn,Cz,DB,C1,C8,DE;if(DP.isMetric){DS=DP.items;Cy=DP.cellHandlers;}else{DS=[];}if(DP.isMetric&&CU.isABL&&Ci.splitPlottingMetrics){C0=true;if(DP.mtsIdxArr[DT.inchtCol]<0){Cu=true;}}if(DP.isMetric&&!Cu){if(Cp===false){C8=Ag(Ci.getMetricsOnAxisOfChart(Cx,Cr,"x",false));}else{C8=Ag(Ci.getMetricsOnAxisOfChart(Cx,Cr,"x",true));}DN.drawAxis=true;By.forEach(C8,function(DW){if(DW===undefined||DW<0){DN.drawAxis=false;}else{var DV=Cp?"XAxis":"X2Axis";if(A4.call(Ci,DW,DV)===Bm.PERCELL){DN.drawAxis=(Ci.getChartCountInCol()===1);}}});DE=new BV.AxisIdentity({isNumericAxis:true,objType:c.X_NUMERIC,metricIdxArr:C8});}else{if(!DP.isMetric){DE=new BV.AxisIdentity({isNumericAxis:false,objType:c.X_CATEGORY,attrIdArr:DP.ids});}}if(!Cu&&Ci.hasFooterInX){var DK,C6,C2,Cs,DR,DQ=[],C4=[],Cq;C9=document.createElement("div");DD=Ci.view.textHeightInX+2*w;if(DP.isMetric&&!Ci.isFooterAbove){DN.appendChild(C9);if(DS.length===0&&DA.isMetric){DS=Cw?DA.items:C5.items;Cy=Cw?DA.cellHandlers:C5.cellHandlers;Cl=B9.YAxis;}Cv=DS.length;DN.metrics=[];if(Ci.combineMetricNameInX){for(DK=0;DK<Cv;DK++){C4.push(DK);DN.metrics.push(DS[DK]);}}else{if(C0){C7=DT.inchtCol;}else{C7=Cr%Cv;}C4.push(C7);DN.metrics.push(DS[C7]);}for(DK=0;DK<C4.length;DK++){C7=C4[DK];C6=DS[C7];Cs={};Cs.extraAttributes={};C2=Cs.extraAttributes;Cs.text=C6;C2.dzId=Cl;C2.dzIndex=C7;C2.type=BW.GM_XLABEL;if(CU.isABL&&Cy){if(Cy[C7]){DB=(Cy[C7].col-Ci.gts.row.length)%CO.getMetricCount();DR=Ci.getMetricInGSIMx(DB);Cn=CO.getMetricIDsFromIndex([DB])[0];Cz=CO.getMetricIDFromIndex(DB);C2.selectionInfo=C2.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cn,mOriId:Cz,midx:DB,cellHandle:Cy[C7],objType:c.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}else{C2.selectionInfo=C2.identity=new BV.MetricAxisTitleIdentity({objType:c.X_METRIC_AXIS_TITLE});}if(Ap.call(Ci,C2.selectionInfo)){Cs.sort=true;C2.sort=true;C2.sortOrder=Ci.metricSortInfo.order;C9.innerText=Ci.metricSortInfo.order?"asc":"desc";}}else{if(CU.isBubbleOrScatter){DB=DP.mtsIdxArr[C7];DR=Ci.getMetricInGSIMx(DB);Cn=CO.getMetricIDsFromIndex([DB])[0];C2.selectionInfo=C2.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cn,midx:DB,objType:c.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}}C2.customScale=(A4.call(Ci,DB,"XAxis")===Bm.CUSTOM);DO.push(C2.selectionInfo);DQ.push(Cs);}Cq=new mstrmojo.VisAxisLabel({placeholder:C9,width:DC+"px",height:Ci.view.textHeightInX+"px",cssClass:(Cp?"gm-xaxis-cell-label":"gm-x2axis-cell-label"),styles:Ci.xTitleStyles,align:Cp?"bottom":"top",contentData:DQ});Cq.render();Cq.parent=CY;if(!Cp&&!Ci.drawX2Numeric){var Cm=Cq.domNode,Ck={};Ck.top=(DL-DD)>>1;B4.positionDomNode(Cm,Ck);}Ci.addDisposable(Cq);if(C4.length===1){DN.labelDiv=Cq.domNode;}else{DN.combinedLabelDiv=Cq.domNode;}}else{if(!DP.isMetric){DN.appendChild(C9);DQ=[];if(DP.items.length>0){By.forEach(DP.items,function(DW,DV){Cs={text:DW,extraAttributes:{type:BW.GM_XLABEL,dzId:B9.XAxis,dzIndex:DV,identity:new BV.AttributeAxisTitleIdentity({n:DW,tid:DP.ids[DV],objType:c.X_ATTRIBUTE_AXIS_TITLE})}};DQ.push(Cs);});}Cq=new mstrmojo.VisAxisLabel({placeholder:C9,width:DC+"px",height:Ci.view.textHeightInX+"px",cssClass:"gm-xaxis-cell-label",styles:Ci.xTitleStyles,align:"bottom",contentData:DQ});Cq.render();Cq.parent=CY;Ci.addDisposable(Cq);if(DQ.length===1){DN.labelDiv=Cq.domNode;}else{if(DQ.length>1){DN.combinedLabelDiv=Cq.domNode;}}}}}else{if(!Cu&&!Ci.hasFooterInX&&DP.isMetric){if(DS.length===0&&DA.isMetric){DS=Cw?DA.items:C5.items;Cy=Cw?DA.cellHandlers:C5.cellHandlers;Cl=B9.YAxis;}Cv=DS.length;DN.metrics=[];var DK,C6,C2,C4=[];for(DK=0;DK<Cv;DK++){C4.push(DK);DN.metrics.push(DS[DK]);}for(DK=0;DK<C4.length;DK++){C7=C4[DK];C6=DS[C7];C2={};C2.dzId=Cl;C2.dzIndex=C7;C2.type=BW.GM_XLABEL;if(CU.isABL&&Cy){DB=(Cy[C7].col-Ci.gts.row.length)%CO.getMetricCount();Cn=CO.getMetricIDsFromIndex([DB])[0];C2.selectionInfo=C2.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cn,midx:DB,cellHandle:Cy[C7],objType:c.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}else{if(CU.isBubbleOrScatter){DB=DP.mtsIdxArr[C7];Cn=CO.getMetricIDsFromIndex([DB])[0];Cz=CO.getMetricIDFromIndex(DB);C2.selectionInfo=C2.identity=new BV.MetricAxisTitleIdentity({n:C6,mid:Cn,mOriId:Cz,midx:DB,objType:c.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}}DO.push(C2.selectionInfo);}}}DN.selectionInfos=DO;var Ct=AN(DC,DL,DD,"x",Cp);DN.setAttribute("isPrimary",Cp);DN.appendChild(Ct);if(!Cu&&DN.drawAxis){var DU=Ci.view.getWidgetPropertyValue(Cp?AW.SCALE_X:AW.SCALE_X2),C3=DU!==undefined&&DU!==1;Ci.drawXAxis(Ct,DC,DL-DD,Cx,Cr,DT.c,false,DT.dpIdx,C3,Cp,DH);}DN.subRegion=DH;if(DE){DN.identity=DE;}return DN;};var CQ=function(){var Cr,Cq,Ct,Cp,Cw,Cx,Cn,Cm=Ci.getChartInfo(),Cy=Cm.isBubbleOrScatter&&this.hasSizeBy(),Cl=Cm.isBubbleOrScatter&&!this.hasSizeBy(),Co=false;Ci.dataAreaPaddingGlobalZero=CH.call(this,CU);if(Ci.dataAreaPaddingGlobalZero){return ;}Ci.maxRowPadding=undefined;Ci.maxColPadding=undefined;if(Ci.maxDataAreaPaddingCache){delete Ci.maxDataAreaPaddingCache;}var Ck=Ci.maxDataAreaPaddingCache=[];Cw=Ci.getChartCountInCol();Cx=Ci.getChartCountInRow();Cy=Cy&&(Cx*Cw>=1);var Cs=Math.min(Cw,Ar),Cv=Math.min(Cx,j);for(Cr=0;Cr<Cs;Cr++){Cn=[];Ck.push(Cn);for(Cq=0;Cq<Cv;Cq++){Co=CF.call(this,CU,Cr,Cq);if(Co){Cn.push(An.clone(F));}else{if(Cl){Ct=Ct||Ci.queryChartInstance(0,0,false,true);Cp=Cp||Ct.GetDataAreaPadding();}else{if(Cy){var Cu={purpose:"clipping"};Ct=Ci.getSharedChartInstance(Cr,Cq,Cu);}else{Ct=Ci.queryChartInstance(Cr,Cq,false,true);}Cp=Ct.GetDataAreaPadding();}Cn.push(Cp);}}}};var CV=function(Ct,Co,Cu,Cm,Cv,Cl,Cs,Cn,Cp,Cr,Cq){var Ck=document.createElement("div");Ck.setAttribute("chartDiv",1);Ck.svg=!this.useCECanvas;Ck.setAttribute("row",Cv);Ck.setAttribute("col",Cl);Ck.setAttribute("rowSpan",Cs);Ck.setAttribute("colSpan",Cn);Ck.setAttribute("class",Cp);Ck.setAttribute("type",BW.GM_MINI_CHART);Ck.innerHTML="";Ck.style.width=Ct+"px";Ck.style.height=Co+"px";Ck.style.top=Cu+"px";Ck.style.left=Cm+"px";if(Ci.view.getWidgetPropertyValue(AW.BANDING)&&!Ci.bandings[Cv]){Ci.bandings[Cv]=[{Start:0,Size:Co}];}Ci.drawOnDiv(Ck,Ct,Co,Cv,Cl,true,Cp,Cq);n.fillBackgroundDiv(Ck);if(Cv%2===1&&Ci.view.getWidgetPropertyValue(AW.BANDING)){Ba.addClass(Ck,"banding");}Ck.subRegion=Cq;return Ck;};var CX=function(Cl,Cs,Co,Cv,Cn,Cq,Cr){var Cu=false;var Cm=parseInt(Cl.style.width,10);var Ct=parseInt(Cl.style.height,10);if(Cs&&Cl.style.width!==Cs+"px"){Cl.style.width=Cs+"px";Cm=Cs;Cu=true;}if(Co&&Cl.style.height!==Co+"px"){Cl.style.height=Co+"px";Ct=Co;Cu=true;}if(Cv){Cl.style.top=Cv+"px";}if(Cn){Cl.style.left=Cn+"px";}if(Ci.enablePartialRendering&&!BQ(Cl.subRegion,Cr)){Cu=true;Cl.subRegion=Cr;}var Ck=parseInt(Cl.getAttribute("row"),10),Cp=parseInt(Cl.getAttribute("col"),10);if(Ck%2===1&&Ci.view.getWidgetPropertyValue(AW.BANDING)){Ba.addClass(Cl,"banding");}else{Ba.removeClass(Cl,"banding");}if(Cu){Cl.innerHTML="";Ci.drawOnDiv(Cl,Cm,Ct,Ck,Cp,true,"",Cr);n.fillBackgroundDiv(Cl);}};var Cf=function(DP,DF,DO,DH,DL,Cp,DJ){if(Ci.metricNamesOnRowMetricsOnXAxis){return Cj(DP,DF,DO,DH,DL);}var DN,Cr=false,Cl=B9.YAxis,C8;var C5=parseInt(DP.style.width,10);var DD=parseInt(DP.style.height,10);if(DF&&DP.style.width!==DF+"px"){DP.style.width=DF+"px";C5=DF;Cr=true;}if(DO&&DP.style.height!==DO+"px"){DP.style.height=DO+"px";DD=DO;Cr=true;}if(DH){DP.style.top=DH+"px";}if(DL){DP.style.left=DL+"px";}var DI=parseInt(DP.getAttribute("row"),10);var DT=parseInt(DP.getAttribute("col"),10);var DV=Ci.mapFromChartToLDSIndex(DI,DT);if(DI%2===1&&Ci.view.getWidgetPropertyValue(AW.BANDING)){Ba.addClass(DP,"banding");}else{Ba.removeClass(DP,"banding");}if(Ci.enablePartialRendering&&!BQ(DP.subRegion,DJ)){Cr=true;DP.subRegion=DJ;}if(Cr||Ci.forceUpdateAxis()){var DK=CU.isABL&&Ci.splitPlottingMetrics,DR=Ci.getXAxisInfo(DI,DT,true,DK),Ck=Ci.getXAxisInfo(DI,DT,false,DK),DC=Ci.getYAxisInfo(DI,DT,Cp,DK),DG=0,C9,DA,DQ=[],Cw,Co,DU,C2,Cx=Ci.isGrid(),DM=Ci.isPie,DB=Ci.haveX1,C1=false,Cv=false;if(Cx&&DM){C2=Ci.getMetricsOnAngleBy();DU=Ci.model.getMetricNamesFromIndex(C2);Cl=B9.Angle;}else{if(DC.isMetric){C2=DC.mtsIdxArr;DU=DC.items;}else{C2=[];DU=[];}}if(DC.isMetric&&CU.isABL&&Ci.splitPlottingMetrics){C1=true;if(DC.mtsIdxArr[DV.inchtRow]<0){Cv=true;}}DP.innerHTML="";var Cz=DC.cellHandlers,DE,Cn,C0,C3;if(!Cv&&Ci.hasHeaderInY){if(!DO){DO=DP.clientHeight;}if(DU.length===0&&DR.isMetric){DU=DB?DR.items:Ck.items;C2=DB?(DR.isMetric?DR.mtsIdxArr:[]):(Ck.isMetric?Ck.mtsIdxArr:[]);Cl=B9.XAxis;}Cw=DU.length;DG=Ci.view.textHeightInY+2*w;C9=document.createElement("div");Co=Ci.model.getMetricIDsFromIndex(C2);DP.metrics=[];var C7,C4,Cs,DS=[],C6=[];if(Ci.combineMetricNameInY){for(DN=0;DN<Cw;DN++){C6.push(DN);DP.metrics.push(DU[DN]);}}else{if(C1){C8=DV.inchtRow;}else{C8=DI%Cw;}C6.push(C8);DP.metrics.push(DU[C8]);}for(DN=0;DN<C6.length;DN++){C8=C6[DN];C7=DU[C8];DA=Ci.metricSelectionInfo[Co[C8]];Cs={};Cs.extraAttributes={};C4=Cs.extraAttributes;Cs.text=C7;C4.dzId=Cl;C4.dzIndex=C8;C4.type=BW.GM_YLABEL;DQ.push(DA);if(DA){C4.selectionInfo=C4.identity=DA;if(Ap.call(Ci,C4.selectionInfo)){Cs.sort=true;C4.sort=true;C4.sortOrder=Ci.metricSortInfo.order;C9.innerText+=Ci.metricSortInfo.order?"asc":"desc";}C4.customScale=(A4.call(Ci,C4.selectionInfo.midx,"YAxis")===Bm.CUSTOM);}DS.push(Cs);}DP.appendChild(C9);var Cy=new mstrmojo.VisAxisLabel({placeholder:C9,width:DO+"px",height:Ci.view.textHeightInY+"px",cssClass:"gm-yaxis-cell-label",styles:Ci.yTitleStyles,align:Cp?"left":"right",contentData:DS});Cy.render();Cy.parent=CY;Ci.addDisposable(Cy);if(C6.length===1){DP.labelDiv=Cy.domNode;DP.combinedLabelDiv=undefined;}else{DP.labelDiv=undefined;DP.combinedLabelDiv=Cy.domNode;}}else{if(!Cv&&DC.isMetric){if(DU.length===0&&DR.isMetric){DU=DB?DR.items:Ck.items;Cz=DB?DR.cellHandlers:Ck.cellHandlers;Cl=B9.XAxis;}Cw=DU.length;DP.metrics=[];var C6=[];for(DN=0;DN<Cw;DN++){C6.push(DN);DP.metrics.push(DU[DN]);}for(DN=0;DN<C6.length;DN++){C8=C6[DN];C7=DU[C8];C4={};C4.dzId=Cl;C4.dzIndex=C8;C4.type=BW.GM_YLABEL;if(CU.isABL&&Cz){if(Cz[C8]){DE=(Cz[C8].col-Ci.gts.row.length)%CO.getMetricCount();Cn=CO.getMetricIDsFromIndex([DE])[0];C0=CO.getMetricIDFromIndex(DE);C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({n:C7,mid:Cn,mOriId:C0,midx:DE,cellHandle:Cz[C8],objType:c.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cn]){C3[Cn]=C4.selectionInfo;}}else{C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({objType:c.Y_METRIC_AXIS_TITLE});}}else{if(CU.isBubbleOrScatter){DE=DC.mtsIdxArr[C8];Cn=CO.getMetricIDsFromIndex([DE])[0];C0=CO.getMetricIDFromIndex(DE);C4.selectionInfo=C4.identity=new BV.MetricAxisTitleIdentity({n:C7,mid:Cn,mOriId:C0,midx:DE,objType:c.Y_METRIC_AXIS_TITLE});C3=Ci.metricSelectionInfo;if(!C3[Cn]){C3[Cn]=C4.selectionInfo;}}}DQ.push(C4.selectionInfo);}}}DP.selectionInfos=DQ;var Cu=AN(C5,DD,DG,"y",Cp);DP.setAttribute("isPrimary",Cp);DP.appendChild(Cu);if(!Cv&&DP.drawAxis){var Ct=Ci.view.getWidgetPropertyValue(Cp?AW.SCALE_Y:AW.SCALE_Y2),Cm=Ct!==undefined&&Ct!==1;Ci.drawYAxis(Cu,C5-DG,DD,DI,DV.r,DT,true,DV.dpIdx,Cm,Cp,DJ);}else{if(Ci.view.getWidgetPropertyValue(AW.BANDING)){var Cq=[{Start:0,Size:DO}];Ci.drawInChartBanding(DP,Cq,Ci.bandingFlags[DI]);}}}};var CP=function(DN,DE,DM,DG,DK,Cp,DI){var Cr=false,DS,Cl=B9.XAxis,DA,DO=[],Co,C8;var C4=parseInt(DN.style.width,10);var DC=parseInt(DN.style.height,10);if(DE&&DN.style.width!==DE+"px"){DN.style.width=DE+"px";C4=DE;Cr=true;}if(DM&&DN.style.height!==DM+"px"){DN.style.height=DM+"px";DC=DM;Cr=true;}if(DG){DN.style.top=DG+"px";}if(DK){DN.style.left=DK+"px";}if(Ci.enablePartialRendering&&!BQ(DN.subRegion,DI)){Cr=true;DN.subRegion=DI;}var DH=parseInt(DN.getAttribute("row"),10);var DR=parseInt(DN.getAttribute("col"),10);var DT=Ci.mapFromChartToLDSIndex(DH,DR);if(Cr||Ci.forceUpdateAxis()){var DJ=CU.isABL&&Ci.splitPlottingMetrics,DP=Ci.getXAxisInfo(DH,DR,Cp,DJ),DB=Ci.getYAxisInfo(DH,DR,true,DJ),C6=Ci.getYAxisInfo(DH,DR,false,DJ),Cw=Ci.haveY1,DF=0,C9,Cv,Cz=false,Cu=false;DS=DP.isMetric?DP.items:[];var C0=DP.isMetric?DP.mtsIdxArr:[];if(DP.isMetric&&CU.isABL&&Ci.splitPlottingMetrics){Cz=true;if(DP.mtsIdxArr[DT.inchtCol]<0){Cu=true;}}DN.innerHTML="";var Cx=DP.cellHandlers,DD,Cn,Cy,C1;if(!Cu&&Ci.hasFooterInX){if(!DE){DE=DN.clientWidth;}var DL,C7,C2,Cs,DQ=[],C5=[],Cq;C9=document.createElement("div");DF=Ci.view.textHeightInX+2*w;if(DP.isMetric&&!Ci.isFooterAbove){DN.appendChild(C9);if(DS.length===0&&DB.isMetric){DS=Cw?DB.items:C6.items;C0=Cw?(DB.isMetric?DB.mtsIdxArr:[]):(C6.isMetric?C6.mtsIdxArr:[]);Cl=B9.YAxis;}Cv=DS.length;Co=Ci.model.getMetricIDsFromIndex(C0);DN.metrics=[];if(Ci.combineMetricNameInX){for(DL=0;DL<Cv;DL++){C5.push(DL);DN.metrics.push(DS[DL]);}}else{if(Cz){C8=DT.inchtCol;}else{C8=DR%Cv;}C5.push(C8);DN.metrics.push(DS[C8]);}for(DL=0;DL<C5.length;DL++){C8=C5[DL];C7=DS[C8];DA=Ci.metricSelectionInfo[Co[C8]];Cs={};Cs.extraAttributes={};C2=Cs.extraAttributes;Cs.text=C7;C2.dzId=Cl;C2.dzIndex=C8;C2.type=BW.GM_XLABEL;DO.push(DA);if(DA){C2.selectionInfo=C2.identity=DA;if(Ap.call(Ci,C2.selectionInfo)){Cs.sort=true;C2.sort=true;C2.sortOrder=Ci.metricSortInfo.order;C9.innerText+=Ci.metricSortInfo.order?"asc":"desc";}}C2.customScale=(A4.call(Ci,C2.selectionInfo.midx,"XAxis")===Bm.CUSTOM);DQ.push(Cs);}Cq=new mstrmojo.VisAxisLabel({placeholder:C9,width:DE+"px",height:Ci.view.textHeightInX+"px",cssClass:(Cp?"gm-xaxis-cell-label":"gm-x2axis-cell-label"),styles:Ci.xTitleStyles,align:Cp?"bottom":"top",contentData:DQ});Cq.render();Cq.parent=CY;if(!Cp&&!Ci.drawX2Numeric){var Cm=Cq.domNode,Ck={};Ck.top=(DM-DF)>>1;B4.positionDomNode(Cm,Ck);}Ci.addDisposable(Cq);if(C5.length===1){DN.labelDiv=Cq.domNode;DN.combinedLabelDiv=undefined;}else{DN.labelDiv=undefined;DN.combinedLabelDiv=Cq.domNode;}}else{if(!DP.isMetric){DN.appendChild(C9);DQ=[];if(DP.items.length>0){By.forEach(DP.items,function(DW,DV){Cs={text:DW,extraAttributes:{type:BW.GM_XLABEL,dzId:B9.XAxis,dzIndex:DV,identity:new BV.AttributeAxisTitleIdentity({n:DW,tid:DP.ids[DV],objType:c.X_ATTRIBUTE_AXIS_TITLE})}};DQ.push(Cs);});}Cq=new mstrmojo.VisAxisLabel({placeholder:C9,width:DE+"px",height:Ci.view.textHeightInX+"px",cssClass:"gm-xaxis-cell-label",styles:Ci.xTitleStyles,align:"bottom",contentData:DQ});Cq.render();Cq.parent=CY;Ci.addDisposable(Cq);if(DQ.length===1){DN.labelDiv=Cq.domNode;}else{if(DQ.length>1){DN.combinedLabelDiv=Cq.domNode;}}}}}else{if(!Cu&&!Ci.hasFooterInX&&DP.isMetric){if(DS.length===0&&DB.isMetric){DS=Cw?DB.items:C6.items;Cx=Cw?DB.cellHandlers:C6.cellHandlers;Cl=B9.YAxis;}Cv=DS.length;DN.metrics=[];var DL,C7,C2,C5=[];for(DL=0;DL<Cv;DL++){C5.push(DL);DN.metrics.push(DS[DL]);}for(DL=0;DL<C5.length;DL++){C8=C5[DL];C7=DS[C8];C2={};C2.dzId=Cl;C2.dzIndex=C8;C2.type=BW.GM_XLABEL;if(CU.isABL&&Cx){DD=(Cx[C8].col-Ci.gts.row.length)%CO.getMetricCount();Cn=CO.getMetricIDsFromIndex([DD])[0];Cy=CO.getMetricIDFromIndex(DD);C2.selectionInfo=C2.identity=new BV.MetricAxisTitleIdentity({n:C7,mid:Cn,mOriId:Cy,midx:DD,cellHandle:Cx[C8],objType:c.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}else{if(CU.isBubbleOrScatter){DD=DP.mtsIdxArr[C8];Cn=CO.getMetricIDsFromIndex([DD])[0];Cy=CO.getMetricIDFromIndex(DD);C2.selectionInfo=C2.identity=new BV.MetricAxisTitleIdentity({n:C7,mid:Cn,mOriId:Cy,midx:DD,objType:c.X_METRIC_AXIS_TITLE});C1=Ci.metricSelectionInfo;if(!C1[Cn]){C1[Cn]=C2.selectionInfo;}}}DO.push(C2.selectionInfo);}}}DN.selectionInfos=DO;var Ct=AN(C4,DC,DF,"x",Cp);DN.setAttribute("isPrimary",Cp);DN.appendChild(Ct);if(!Cu&&DN.drawAxis){var DU=Ci.view.getWidgetPropertyValue(Cp?AW.SCALE_X:AW.SCALE_X2),C3=DU!==undefined&&DU!==1;Ci.drawXAxis(Ct,C4,DC-DF,DH,DR,DT.c,true,DT.dpIdx,C3,Cp,DI);}}},Cd=function(Cy,Ct,Cq,Cu,Co){if(Cy.length<=0){return Ae.NORMAL;}Co=Co||false;var Cv=0,Cx=0,C2=Cq,C3=10,Cp=5,Cz=[],Cs=Cy.length,Cw=Ct-C2*2,Cm=Cy.length,Ck=Cw/Cm;var C1=function(){var C6,C8,C5,C4,C7=Ci.view.HTML5PROPS.AXIS_LABEL_Y;for(C6=0;C6<Cs;C6++){C8=Cy[C6];C5=B4.measureTextWidth(C8,C7,0);C4=C2+(C6+0.5)*Ck-0.5*C5;Cz.push({Size:C5,Start:C4});}};var C0=function(C5){var C6=C5.Start,C4=C6+C5.Size;return(C6>=Cp&&C4<=Ct-Cp);};var Cl=function(C7,DA,C8){var C6,C9,C5,C4=false;for(C6=DA;C6<C7.length;C6+=C8){C9=C7[C6];if(C0(C9)===false){return true;}if(C6>=C8){C5=C7[C6-C8];if(C5.Start+C5.Size+C3>C9.Start){return true;}}}return C4;};C1();if(Cl(Cz,0,1)===false){return Ae.NORMAL;}var Cr=false,Cn=false;Cr=Cl(Cz,0,2)===false;Cn=Cl(Cz,1,2)===false;if(Cr&&Cn){return Ae.STAGGER;}if(Cu){return Ae.ROTATE;}else{return Ae.HORI_DROP;}},Cc=function(){var Cq,Cr,Cm,Cw,Cu=Ci.view,Cn=1,Cp=0,Cs=this.getChartCountInRow(),Cv=this.property.readItem(BJ.X_AXIS_LABELS_ROTATION),Co=Cu.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH),Ck=Ci.getControllerAPI(M.GET_CHART_WIDTH),Ct=Math.min(100,Cs),Cl=Ae.NORMAL;if(Cv===undefined){Cv=-1;}Cw=Cv===-1||Cv===2;for(Cq=0;Cq<Ct;Cq++){Cr=Ci.getXAxisLabels(Cq);Cm=Ck(0,Cq)*Co;Cn=this.checkBarColumnsForAxisPadding(0,Cq);if(Cn>0){Cp=Math.round(Cm/Cn/4);}Cl=Math.max(Cl,Cd(Cr,Cm,Cp,Cw));if(Cl===Ae.ROTATE){break;}}return Cl;};switch(CM){case M.GET_CHART_WIDTH:return AS;case M.GET_CHART_HEIGHT:return CR;case M.GET_ROW_HEADER:return Ch;case M.UPDATE_ROW_HEADER:return CT;case M.GET_COLUMN_HEADER:return Cg;case M.UPDATE_COLUMN_HEADER:return CS;case M.GET_EXTRA_COLUMN_HEADER:return Ca;case M.CREATE_UNIT_Y_AXIS:return CN;case M.CREATE_UNIT_X_AXIS:return CW;case M.GET_FULL_FLEDGED_CHART:return CV;case M.GET_ROW_SPAN:return Ce;case M.GET_COLUMN_SPAN:return CZ;case M.GET_METRICS_ON_X:return this.getMetricsOnXAxis;case M.GET_METRICS_ON_Y:return this.getMetricsOnYAxis;case M.GET_METRICS_ON_SIZE_BY:return this.getSizeByMetrics;case M.UPDATE_MINI_CHART:return CX;case M.UPDATE_Y_AXIS:return Cf;case M.UPDATE_X_AXIS:return CP;case M.MAX_RADIUS_CALC:return CQ;case M.LAYOUT_ALL_X_AXIS_LABELS:return Cc;case M.LAYOUT_ONE_X_AXIS_LABELS:return Cd;}},getUnifiedMetricCondense:function(CN,CO,Cc,Cj){var Cl=this,Cb=this.getMetricCondense(CN),Cd=CO==="y"?Cl.model.cic:Cl.model.cir,CW=CO==="y"?Cl.inChartLayout.r:Cl.inChartLayout.c,AS,CX,Ca,CR=false,Ci,Ck,CV,CS,CU,CM,CZ,CQ,Cg,CY,CT=CO.toUpperCase()+(Cc?"":"2"),Ch,Cm=this.isBubbleOrScatter();if(!Cb){return false;}else{Cb=false;}for(var Cf=0;Cf<Cd;Cf++){if(CO=="y"){CM=Cj+Cf*CW;CZ=0;}else{CM=0;CZ=Cj+Cf*CW;}AS=Cl.isLogScale(CT,CM,CZ);CY=BZ.call(this,CM,CZ);Ck=CY[CT+"MinValue"];Ci=CY[CT+"MaxValue"];CX=Cl.getOnTheFlyShapeForMetric(Ao.call(Cl,CM,CZ,CT+"Axis"));Ca=0;if(Cl.chartSubType===3&&!Cm){Ca=2;}else{if(Cl.chartSubType===5&&!Cm){CR=true;Ca=1;}}Ch=!!(Ca&1)?10:6;CQ=l.prepareScalePlateOptions(AS,CX,Ca);Cg=l.getScalePlate(true);if(Cg){CY=Cg.getMaxMinTickValue(CQ,Ca,Ci,Ck);if(CR){CU="0%";}else{CU=Cl.model.getMetricNumberFormat(CN);if(CU.match("%")!==null){var Ce=this.model,CP=Ce.getFullNumberFormat()[CN];if(CP&&CP.nct===4){Ch=10;}}}CV=D.formatByMask(CU,CY.Max);CS=D.formatByMask(CU,CY.Min);if(CV.length>Ch||CS.length>Ch){Cb=true;break;}}}return Cb;},getMetricCondense:function(CM){var AS=this.getMetricFormat(CM);return AS&&AS.cds===true;},getMetricFormat:function(CQ){var CM=this.model,CN,CO=false,CP,AS;if(CQ>=0){CN=CM.getMetricIDsFromIndex([CQ])[0];CP=CM.getMetricNamesFromIndex([CQ])[0];CO=CM.getMetricCondenseFromIndex([CQ])[0];AS=CM.getMetricNumberFormat(CQ);return{mId:CN,n:CP,nf:AS,cds:CO};}return{};},getMetricFormatFromIndexArray:function(AS){var CM=[],CN=this;By.forEach(AS,function(CO){CM.push(CN.getMetricFormat(CO));});return CM;},hasTheSameFormat:function(AS,CP){var CO=this,CN=CO.getMetricFormat(AS),CM=CO.getMetricFormat(CP);return CN.nf===CM.nf;},hasCustomOnAxis:function(){var CO,CM,CP,CN;CM=Ag(this.getMetricsOnYAxis());CO=Ag(this.getMetricsOnXAxis());CP=BU.call(this,CO,"XAxis");CN=BU.call(this,CM,"YAxis");var AS=false;if(!CP.emptyAxis&&CP.customAxisEnabled){AS=true;}if(!CN.emptyAxis&&CN.customAxisEnabled){AS=true;}return AS;},populateChartRefreshment:function(AS,CU,CV){var CP=V.call(this,AS,CU);CP.rowIndex=AS;CP.colIndex=CU;CV.dataProvider=CP;var CM=this.getControllerAPI(M.GET_CHART_WIDTH);var CS=this.getControllerAPI(M.GET_CHART_HEIGHT);var CQ=this.view.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH);var CO=this.view.getWidgetPropertyValue(AW.SCALE_CHART_HEIGHT);CV.size={w:CM(AS,CU)*CQ,h:CS(AS,CU)*CO};var CR=BZ.call(this,AS,CU);var CN=this.getChartInfo(),CT=B2;if(CN.tp===CT.BUBBLE){CV.primaryValueAxis={min:CR.YMinValue,max:CR.YMaxValue};CV.secondaryValueAxis={min:CR.XMinValue,max:CR.XMaxValue};}else{}if(CN.tp===CT.BUBBLE){CV.plot={};}else{}},getSharedChartInstance:function(AS,CQ,CS){this.sharedCharts=this.sharedCharts||{};var CP=null,CT,CM=CS.purpose;if(CM==="clipping"){this.sharedCharts[CM]=this.sharedCharts[CM]||{};var CR,CN,CO=this.sharedCharts[CM];CT="x:",CR=Ag(this.getMetricsOnAxisOfChart(AS,CQ,"x",true));CT+=CR.join("-")+"; y:";CN=Ag(this.getMetricsOnAxisOfChart(AS,CQ,"y",true));CT+=CN.join("-");CP=CO[CT];}else{CP=this.sharedCharts[CM];}if(CP){this.populateChartRefreshment(AS,CQ,CS);CP.refreshChartComponents(CS);}else{CP=this.queryChartInstance(AS,CQ,false,true);if(CM==="dataLabelRotation"){if(CP.mDatasetPtr.showDatalabels()===false){return null;}}if(CM==="clipping"){this.sharedCharts[CS.purpose][CT]=CP;}else{this.sharedCharts[CS.purpose]=CP;}}return CP;},queryChartInstance:function(Cg,Co,CT,Cc){var Cf,CW,Cp,Cb,Ck,Ci,CU,CQ,Ch,Ce=this.chartsPosIdMap,Cd=this.getChartInfo();if(!Ce){Ce=this.chartsPosIdMap={};}if(!Ce[Cg]){Ce[Cg]={};}if(Ce[Cg][Co]){n.destroyDisposable(this,mstrmojo.all[Ce[Cg][Co]]);}Ci=V.call(this,Cg,Co);Ci.rowIndex=Cg;Ci.colIndex=Co;CU=BZ.call(this,Cg,Co);CQ=this.hasSizeBy();Ch={HasSizeBy:CQ};if(CQ){Ch.Max=CU.ZMaxValue;Ch.Min=CU.ZMinValue;}Cf=this.hGetChartInstance({dataProvider:Ci});Ce[Cg][Co]=Cf.id;CU.GraphHeight=400;CU.LabelPlacement=this.xLabelPlacement;Ch={HasSizeBy:CQ};if(CQ){Ch.Max=CU.ZMaxValue;Ch.Min=CU.ZMinValue;}var Cl={Extremes:CU,SizeBy:Ch};if(Cc){var CO=this.getControllerAPI(M.GET_CHART_WIDTH);var CY=this.getControllerAPI(M.GET_CHART_HEIGHT);var CP=this.view.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH);var CN=this.view.getWidgetPropertyValue(AW.SCALE_CHART_HEIGHT);Cl.GraphSize={W:CO(Cg,Co)*CP,H:CY(Cg,Co)*CN};}if(CT){CW=this.getDataAreaPadding(Cg,Co);Cp=this.getChartUniformAxisMargins(Cg,Co);Cb=this.getChartUniformAxisTrims(Cg,Co);Ck=this.getPerCellSetting(Cg,Co);mstrmojo.hash.copy(Cb,Cp);mstrmojo.hash.copy(Ck,Cp);Cl.DataAreaPaddings=CW;Cl.UniformAxisPaddings=Cp;}Cl.isABL=Cd.isABL;Cl.GraphType=this.ceChartType;this.completePropForCE(Cl,{dataProvider:Ci});var Cn,AS,Ca,CS;Cn=Ag(this.getMetricsOnAxisOfChart(Cg,Co,"x",true));AS=Ag(this.getMetricsOnAxisOfChart(Cg,Co,"y",true));Ca=Ag(this.getMetricsOnAxisOfChart(Cg,Co,"x",false));CS=Ag(this.getMetricsOnAxisOfChart(Cg,Co,"y",false));var CZ=BU.call(this,Cn,"XAxis"),CM=BU.call(this,AS,"YAxis"),Cq=BU.call(this,Ca,"XAxis"),CV=BU.call(this,CS,"YAxis");if(CZ.emptyAxis===false){CU.XCustomScale=CZ.customAxisEnabled;CU.XMetrics=Cn;}if(CM.emptyAxis===false){CU.YCustomScale=CM.customAxisEnabled;CU.YMetrics=AS;}if(Cq.emptyAxis===false){CU.X2CustomScale=Cq.customAxisEnabled;CU.X2Metrics=Ca;}if(CV.emptyAxis===false){CU.Y2CustomScale=CV.customAxisEnabled;CU.Y2Metrics=CS;}CU.XCategoryAxis=CU.XCategoryAxis||{};CU.YCategoryAxis=CU.YCategoryAxis||{};var Cj=(this.chartSubType===BL.CLUSTERED||this.chartSubType===BL.ABSOLUTE),CR=(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Cj,CX=(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart;CU.XCategoryAxis.EnforceCluster=CR;CU.XCategoryAxis.EnforceFringe=CX;CU.YCategoryAxis.EnforceCluster=CR;CU.YCategoryAxis.EnforceFringe=CX;var Cm=AD.call(this,Cg,Co);CU.X1CondenseEnfored=Cm.X1;CU.YCondenseEnfored=Cm.Y1;CU.X2CondenseEnfored=Cm.X2;CU.Y2CondenseEnfored=Cm.Y2;Cl.ElementInfo=this.sizeInfo;Cl.AxisLayout=z.call(this,Cg,Co);Cl.Extremes=CU;Cf.configureChart(Cl);return Cf;},calculateRadius:function(){this.getControllerAPI(M.MAX_RADIUS_CALC).call(this);},decideDataLabelRotation:function(){var Cd=this,Cc=false,Ce=this.getChartInfo(),AS=this.hasBarChart,CQ=this.isCombo;var CW=0,CY=V.call(this,0,0),CZ=CY&&CY.getSeriesCount()||0;if(!!CY===false||CZ===0){return ;}if(CQ){for(;CW<CZ;i++){Cc=Cc||CY.getShapeBySeries()===1;}}else{Cc=this.markerShape===1&&Ce.isABL;}if(Cc===false){return ;}var CO={purpose:"dataLabelRotation"},CX=Cd.getSharedChartInstance(0,0,CO);if(!!CX===false){return ;}if(CX.mDatasetPtr&&CX.mDatasetPtr.showDatalabels()===false){return ;}var CP=CX.mChartContextPtr,CT=CX.mDatasetPtr,CV=CP.mGraphWidth,Ca=CP.mGraphHeight;var CM=CP.IsBarChart();if(!CM&&CP.isCombinationChart()){var Cb=CT.GetSeriesByShape().Bar,CZ=CT.GetSeriesCount();CM=(Cb.length===CZ);if(!CM&&Cb.length){CM=true;}}if(CM){}else{return ;}var CR=21155,CN=mstrmojo.chart.gNullTripleId;CP.PutGraphProperty(CR,CN,null);var CU=CX.ShouldRotateDataLabel(CV,Ca);var CS=0;if(CU.Adjust&&(CP.IsBarChart(1)||CX.mDatasetPtr.GetSeriesCount()===1)){var CY=V.call(this,0,0);if(CP.IsVertical()){CX=this.getAxisChartInstance(CY,0,0,"y",true,0,Ca,false);if(CX!==null){CX.GetUniformYAxisWidth(Ca,-1,true);}else{if(CP.IsDualAxis()){CX.GetUniformYAxisWidth(Ca,-1,false);}}this.YAxisDataLabelPadding=CX&&CX.getAxisPadding(CS).H||0;}else{CX=this.getAxisChartInstance(CY,0,0,"x",true,0,CV,false);if(CX!==null){CX.GetUniformXAxisHeight(CV,-1,true);}else{if(CP.IsDualAxis()){CX.GetUniformXAxisHeight(CV,-1,false);}}this.XAxisDataLabelPadding=CX&&CX.getAxisPadding(CS).H||0;}}},setupAxisCondense:function(){var CR=this,CN={},CQ={},CP={},CT={},CM=this.getXAxisInfo(),AS=this.getYAxisInfo(),CU=this.getXAxisInfo(undefined,undefined,false),CO=this.getYAxisInfo(undefined,undefined,false),CS=function(Cb,CY,Cd){var Ca,CZ,CV,CX,Cc,Ce=CY==="y"?CR.inChartLayout.r:CR.inChartLayout.c,CW;for(Ca=0;Ca<Ce;Ca++){if(CY==="y"){CW=CR.getMetricsOnAxisOfChart(Ca,0,CY,Cd);}else{CW=CR.getMetricsOnAxisOfChart(0,Ca,CY,Cd);}CX=CW.length;if(CX===1){CV=CW[0];Cb[CV]=CR.getUnifiedMetricCondense(CV,CY,Cd,Ca);}else{if(CX>1){Cc=false;for(CZ=0;CZ<CX;CZ++){CV=CW[CZ];if(CR.getUnifiedMetricCondense(CV,CY,Cd,Ca)){Cc=true;break;}if(CR.chartSubType!==5){if(CZ!==0&&!CR.hasTheSameFormat(CV,CW[0])){Cc=true;break;}}}for(CZ=0;CZ<CX;CZ++){CV=CW[CZ];Cb[CV]=Cc;}}}}};if(CM.isMetric){CS(CN,"x",true);}if(AS.isMetric){CS(CQ,"y",true);}if(CU.isMetric){CS(CP,"x",false);}if(CO.isMetric){CS(CT,"y",false);}this.xCondense=CN;this.yCondense=CQ;this.x2Condense=CP;this.y2Condense=CT;},getRowHeadersToCalcWidth:function(){var CO=this.rowHeaderCnt,CN=[],CM,AS=this.model;for(CM=0;CM<CO;CM++){CN.push(AS.collectHeadersLabels(0,CM));}return CN;},getColHeadersToCalcWidth:function(){var CO=this.colHeaderCnt,CN=[],CM,AS=this.model;for(CM=0;CM<CO;CM++){CN.push(AS.collectHeadersLabels(1,CM));}return CN;},createACanvas:function E(CP,CN,AS,CO){var CM=document.createElement("canvas");CM.width=CP;CM.height=CN;CM.style.zIndex=8;CM.style.top=CO+"px";CM.style.left=AS+"px";CM.style.position="absolute";return CM;},parseNumericAxisFormat:function u(CP,CS,CR,CM){var AS=CP?"x":"y";var CO=Ag(this.getMetricsOnAxisOfChart(CR,CM,AS,CS));var CQ="General",CN=this.model;CO.forEach(function(CU,CT){var CV=CN.getMetricNumberFormat(CU);if(!!CV&&CV.hasOwnProperty("nfs")){CV=CV.nfs;if(CQ===undefined){CQ=CV;}else{if(CQ!==CV){CQ="General";return CQ;}}}});return CQ;},postDrawCollecting:function Bi(CQ,AS,CX,CV,CS,CU,Ca){var CO=CV.getUniformAxisTrims(CQ,CX),CT,Cc,Cb,CM,CR;var CY=CU,CP=0,CN=CS;if(!CQ){CP=CS;CN=0;CY=Ca;}if(CV.IsZeroBaseLineQualified(CQ,CX)){CT=CV.GetPositionAtTick(0,CQ,CY);}else{CT=null;}var CZ=0,CW=1;Cc=AS?CV.getUniformAxisGridLinePosition(true):[];Cb=AS?CV.getUniformAxisGridLinePosition(false):[];CM=AS?(CV.getUniformAxisFormat()||this.parseNumericAxisFormat(CQ,CX,CP,CN)):"";CR=!!CV.useOriginFormatForZeroLine?CW:CZ;return{MajorGrids:Cc,MinorGris:Cb,ZeroPos:CT,ZeroStyle:CR,AxisTrims:CO,AxisFormat:CM};},drawYAxis:function(CZ,CV,Ck,CP,Cc,CT,Ch,CN,Cf,Cg,CY,CM){var Cd,Ci=this.model,AS=this.yIsNumeric,CU=Cg?this.yZeroAxisPos:this.y2ZeroAxisPos,Cq=this.yMajorGridLinePos,Cn=this.yMinorGridLinePos,CQ=Ci.getLocalDataSet(Cc,CT),Cs=CQ.generateDataProvider(),Cm=this.yAxisMargins;var Ce=Cs[CN];if(Ch===true){Ce.clearGraphJSON();}var Ca=this.getAxisChartInstance(Ce,CP,0,"y",Cg,CV,Ck,true);if(Ca&&Ca.newBorn){Ca.GetUniformYAxisWidth(Ck,-1,Cg);Cm[CP]=Ca.GetUniformAxisMargins();delete Ca.newBorn;}var Cr=true;if(Ca&&!CM){Cr=!!Ca.visited;}if(!Ca){Ca=this.getAxisChartInstance(Ce,CP,0,"y",Cg,CV,Ck,true);Ca.GetUniformYAxisWidth(Ck,-1,Cg);Cm[CP]=Ca.GetUniformAxisMargins();}else{if(Cr||Cf){Ca.configureChart({GraphSize:{W:CV,H:Ck},ElementInfo:this.sizeInfo,AxisLayout:z.call(this,CP,0),Timer:this.view.enableCETimer});Ca.GetUniformYAxisWidth(Ck,CV,Cg);Cm[CP]=Ca.GetUniformAxisMargins();}else{Cm[CP]=Ca.GetUniformAxisMargins();}}Ca.UpdatePartialRenderingWindow(this.enablePartialRendering,CY,CY?CY.flag:2);var CS={};if(this.YAxisDataLabelPadding>0&&this.YAxisDataLabelPadding<Ck){CS.dataLabelPadding=this.YAxisDataLabelPadding;}var Cj=Ca.DrawUniformYAxis(CV,Ck,Cg,CS),Cb=Cj.svg;if(this.useCECanvas){var Cl=null;if(!this.drawer){Cl=this.drawer=new BV.VecDrawer();}else{Cl=this.drawer;}Cl.graphData=Cj;var CW=Cl.graphNode=this.createACanvas(CV,Ck,0,0);if(Cg){CW.style.left="";CW.style.right="0px";}else{CW.style.left="0px";CW.style.right="";}CZ.appendChild(CW);Cl.retrieveGraphSrc(Ck,CV);}else{if(this.clusteredBarSpecialCase){Cb.setAttribute("type",BW.GM_SVG_Y_NUMERIC);}else{Cb.setAttribute("type",this.yIsNumeric?BW.GM_SVG_Y_NUMERIC:BW.GM_SVG_Y_CATEGORY);}Cb.style.position="absolute";CZ.appendChild(Cb);AU=Ca.mChartContextPtr.mCanvas.mGradientCount;}if(this.view.getWidgetPropertyValue(AW.BANDING)){Cd=Ca.getUniformAxisBanding();this.bandings[CP]=Cd;this.drawInChartBanding(CZ.parentNode,Cd,this.bandingFlags[CP]);}var CO,CX=this.postDrawCollecting(false,AS,Cg,Ca,CP,CV,Ck);Cq[CP]=CX.MajorGrids;Cn[CP]=CX.MinorGris;CU[CP]=CX.ZeroPos;CO=CX.AxisTrims;if(CO.isCaTrim){var Cp=this.caAxisTrims[1];Cp[CP]=CO;}else{var CR=Cg?this.yAxisTrims:this.y2AxisTrims;CR[CP]=CO;}if(AS){var Co=this.axisFormats["y"+(Cg?"1":"2")];Co[CP]=CX.AxisFormat;}Ca.visited=true;},getAxisChartInstance2:function(CQ,CP,CV,CZ){var Ca=this.model,CM=this.getControllerAPI(M.GET_CHART_WIDTH),CT=this.getControllerAPI(M.GET_CHART_HEIGHT),CN=this.view.getWidgetPropertyValue(AW.SCALE_CHART_WIDTH),AS=this.view.getWidgetPropertyValue(AW.SCALE_CHART_HEIGHT),CW=this.mapFromChartToLDSIndex(CQ,CP),CX=CV==="x"?CQ:CW.r,CS=CV==="x"?CW.c:CP,CO=CW.dpIdx,CR=Ca.getLocalDataSet(CX,CS),Cc=CR.generateDataProvider(),CY=Cc[CO],CU=CM(CQ,CP)*CN,Cb=CT(CQ,CP)*AS;return this.getAxisChartInstance(CY,CQ,CP,CV,CZ,CU,Cb,true);},getAxisChartInstance:function(CY,CS,CQ,CV,CZ,CU,Ce,CR){var CM,CW,CO;var Cd=Ag(this.getMetricsOnAxisOfChart(CS,CQ,CV,CZ));var CT=BU.call(this,Cd,CV==="x"?"XAxis":"YAxis");var Cc=(CZ===false)?CV.toUpperCase()+"2AxisChart":CV.toUpperCase()+"AxisChart";var AS=CV==="x"&&{Layout:this.xLabelPlacement,StartRow:Y(this.widthRatio,CQ),EnforceCluster:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Ca,EnforceFringe:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart};CR=CR||false;if(CT.emptyAxis){return null;}if(CR&&!this.forceUpdateAxis()){if(CY[Cc]){if(CV==="x"){var Cg=this.property.readItem(BJ.X_AXIS_LABELS_ROTATION);CY[Cc].updateUniformAxisLabelRotation(this.xLabelPlacement,Cg);CY[Cc].updateUniformXAxisLayout(AS);}CO=this.getDataAreaPadding(CS,CQ);if(!!CO){CY[Cc].UpdateValueAxisPadding(CO);}if(CY[Cc].newBorn){delete CY[Cc].newBorn;}return CY[Cc];}}n.destroyDisposable(this,CY&&CY[Cc]);CY.rowIndex=CS;CY.colIndex=CQ;CY.EnforedCondense=CY.EnforedCondense||{};CW=this.hGetChartInstance({dataProvider:CY,isAxis:true});CM=BZ.call(this,CS,CQ);var Cb,Cf=CV.toUpperCase()+"MinValue";Cb=CM[Cf];if(Cb!==undefined&&Cb<0&&this.msgCenter){if(this.isLogScale(CZ?CV:CV+"2",CS,CQ)){var CX=this.view;if(CX.logScaleChanged){var CP=mstrmojo.desc(13656,"Data less than or equal to zero has been removed from the graph");this.msgCenter[CP]=true;CX.logScaleChanged=false;}}}CM.GraphHeight=400;CM.LabelPlacement=this.xLabelPlacement;CM.xAxisRotateMode=this.property.readItem(BJ.X_AXIS_LABELS_ROTATION);if(CZ===false){CY[Cc]=CW;CM[CV.toUpperCase()+"2Metrics"]=Cd;CM[CV.toUpperCase()+"2CustomScale"]=CT.customAxisEnabled;CM[CV.toUpperCase()+"2CondenseLabel"]=this[CV+"2Condense"];CM[CV.toUpperCase()+"2CondenseEnfored"]=CY.EnforedCondense[CV.toUpperCase()+"2"]||false;}else{CY[Cc]=CW;CM[CV.toUpperCase()+"Metrics"]=Cd;CM[CV.toUpperCase()+"CustomScale"]=CT.customAxisEnabled;CM[CV.toUpperCase()+"CondenseLabel"]=this[CV+"Condense"];CM[CV.toUpperCase()+"CondenseEnfored"]=CY.EnforedCondense[CV.toUpperCase()]||false;}if(this.forceUpdateAxis()){CO=this.getDataAreaPadding(CS,CQ);if(!!CO){CY[Cc].UpdateValueAxisPadding(CO);}}var Ca=(this.chartSubType===BL.CLUSTERED||this.chartSubType===BL.ABSOLUTE);if(CV==="x"){CM.XCategoryAxis=AS;}else{CM.YCategoryAxis={EnforceCluster:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Ca,EnforceFringe:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart};}var CN={Extremes:CM};this.completePropForCE(CN,{dataProvider:CY,isAxis:true});CN.AxisLayout=z.call(this,CS,CQ);CW.configureChart(CN);CW.newBorn=true;return CW;},drawXAxis:function(CY,CT,Cj,Cb,CN,CR,Cf,CM,Cd,Ce,CX){var Cg=this.model,Ck=this.xIsNumeric,CS=Ce?this.xZeroAxisPos:this.x2ZeroAxisPos,Co=this.xMajorGridLinePos,Cn=this.xMinorGridLinePos,CP=Cg.getLocalDataSet(Cb,CR),Cq=CP.generateDataProvider(),Cc=Cq[CM],Ci=this.xAxisMargins;if(Cf===true){Cc.clearGraphJSON();}var CZ=this.getAxisChartInstance(Cc,0,CN,"x",Ce,CT,Cj,true);if(CZ&&CZ.newBorn){CZ.GetUniformXAxisHeight(CT,-1,Ce);Ci[CN]=CZ.GetUniformAxisMargins();delete CZ.newBorn;}var Cp=true;if(CZ){Cp=!!CZ.visited;}if(!CZ){CZ=this.getAxisChartInstance(Cc,0,CN,"x",Ce,CT,Cj,true);CZ.GetUniformXAxisHeight(CT,-1,Ce);Ci[CN]=CZ.GetUniformAxisMargins();}else{if(Cp||Cd){CZ.configureChart({GraphSize:{W:CT,H:Cj},ElementInfo:this.sizeInfo,AxisLayout:z.call(this,0,CN),Timer:this.view.enableCETimer});CZ.GetUniformXAxisHeight(CT,Cj,Ce);Ci[CN]=CZ.GetUniformAxisMargins();}else{Ci[CN]=CZ.GetUniformAxisMargins();}}CZ.UpdatePartialRenderingWindow(this.enablePartialRendering,CX,CX?CX.flag:2);var CQ={};if(this.XAxisDataLabelPadding>0&&this.XAxisDataLabelPadding<CT){CQ.dataLabelPadding=this.XAxisDataLabelPadding;}var Ch=CZ.DrawUniformXAxis(CT,Cj,Ce,CQ),Ca=Ch.svg;if(this.useCECanvas){var Cm=null;if(!this.drawer){Cm=this.drawer=new BV.VecDrawer();}else{Cm=this.drawer;}Cm.graphData=Ch;var CV=Cm.graphNode=this.createACanvas(CT,Cj,0,0);if(Ce){CV.style.top="0px";CV.style.bottom="";}else{CV.style.top="";CV.style.bottom="0px";}CY.appendChild(CV);Cm.retrieveGraphSrc(Cj,CT);}else{if(this.clusteredBarSpecialCase){Ca.setAttribute("type",BW.GM_SVG_X_NUMERIC);}else{Ca.setAttribute("type",this.xIsNumeric?BW.GM_SVG_X_NUMERIC:BW.GM_SVG_X_CATEGORY);}Ca.style.position="absolute";CY.appendChild(Ca);AU=CZ.mChartContextPtr.mCanvas.mGradientCount;}var CO,CW=this.postDrawCollecting(true,Ck,Ce,CZ,CN,CT,Cj);Co[CN]=CW.MajorGrids;Cn[CN]=CW.MinorGris;CS[CN]=CW.ZeroPos;CO=CW.AxisTrims;if(CO.isCaTrim){var CU=this.caAxisTrims[0];CU[CN]=CO;}else{var AS=Ce?this.xAxisTrims:this.x2AxisTrims;AS[CN]=CO;}if(Ck){var Cl=this.axisFormats["x"+(Ce?"1":"2")];Cl[CN]=CW.AxisFormat;}CZ.visited=true;},mapFromChartToLDSIndex:function(CN,CS){var CP=this.inChartLayout,CQ=Math.floor(CN/CP.r),AS=Math.floor(CS/CP.c),CM=CN%CP.r,CR=CS%CP.c,CO=CM*CP.c+CR;return{r:CQ,c:AS,dpIdx:CO,inchtRow:CM,inchtCol:CR};},drawInChartZeroLine:function(CM,CV,CQ,AS,CS){var CR,CU=this.xZeroAxisPos[CS],CT=this.yZeroAxisPos[AS],CN=this.x2ZeroAxisPos[CS],CP=this.y2ZeroAxisPos[AS],CO=false;if(this.chartType===B2.BAR){if(this.axisFormat.xAxOriLnShw){CU=CN=null;}else{CO=true;}if(this.axisFormat.yAxOriLnShw){CT=CP=null;}else{CO=true;}}if(CT){CR=h(CV,CT,CO);CM.appendChild(CR);}if(CP){CR=h(CV,CP,CO);CM.appendChild(CR);}if(CU){CR=BM(CQ,CU,CO);CM.appendChild(CR);}if(CN){CR=BM(CQ,CN,CO);CM.appendChild(CR);}},drawInChartBanding:function(AS,CS,CQ){var CO,CM,CU,CP,CN=CS.length,CR=document,CT=CR.createElement("div");CT.setAttribute("class","gm-banding-container");for(CO=0;CO<CN;CO++){CM=CS[CO].Start;CU=CS[CO].Size;CP=CR.createElement("div");CP.setAttribute("class","gm-banding-div");CP.style.top=CM+"px";CP.style.height=CU+"px";if(CO%2!==CQ){Ba.addClass(CP,"odd");}CT.appendChild(CP);}AS.appendChild(CT);},drawOnDiv:function(CS,CO,Ca,CU,Ce,CY,CP,CR){var Cg=this.bandings,AS=CR?CR.flag:2,CN,Cf,CX,CT;CX=V.call(this,CU,Ce);if(CX.isBlankGrid){var Ch=this.getChartInfo();if(Ch.isGrid===false){return ;}}if(CY===true){CX.clearGraphJSON();}CN=CO;Cf=Ca;CX.r=CU;CX.c=Ce;var CZ=CX.graphJSON;if(!CZ){CT=this.queryChartInstance(CU,Ce,true,true);var Cd=true;if(this.enablePartialRendering){if(this.isBubbleOrScatter()){var Cc=1000;Cd=(CX.getGroupCount()>Cc);}}CT.UpdatePartialRenderingWindow(this.enablePartialRendering&&Cd,CR,AS);var CM={xDataLabelPadding:this.XAxisDataLabelPadding,yDataLabelPadding:this.YAxisDataLabelPadding};CZ=CT.DrawDataAreaForUniformAxis(CN,Cf,CM);CX.graphJSON=CZ;}CS.hiddenItems=CZ.hiddenItems;var CV=CZ.svg;if(this.useCECanvas){var Cb=null;if(!this.drawer){Cb=this.drawer=new BV.VecDrawer();}else{Cb=this.drawer;}Cb.graphData=CZ;var CQ;CQ=Cb.graphNode=this.createACanvas(CN,Cf,0,0);CS.appendChild(CQ);Cb.retrieveGraphSrc(Cf,CN);}else{CV.setAttribute("type",BW.GM_SVG_CHART);CS.appendChild(CV);AU=CT.mChartContextPtr.mCanvas.mGradientCount;}this.drawInChartZeroLine(CS,CO,Ca,CU,Ce);if(this.view.getWidgetPropertyValue(AW.BANDING)){if(this.yIsNumeric){var CW=[{Start:0,Size:Ca}];this.drawInChartBanding(CS,CW,this.bandingFlags[CU]);}else{if(Cg[CU]!==undefined){this.drawInChartBanding(CS,Cg[CU],this.bandingFlags[CU]);}}}},hasSizeBy:function(){var AS=this.dz.SizeBy.TemplateMetric;return(AS&&AS.length>0)||false;},hasColorBy:function(){var AS=this.view;if(AS.noData){return false;}return this.model.colorType!==BH.NULL;},isAxisAttributeInColorBy:function Au(){var AS=this.dz,CR=AS.XAxis,CN=AS.YAxis,CQ=AS.ColorBy,CP=(CR.TemplateUnit||[]).concat(CN.TemplateUnit||[]),CS=CQ.TemplateUnit||[],CM=function(CT){return typeof CT.MetricNames!=="undefined";};if((CM(CR)||CM(CN))&&CM(CQ)){return true;}for(var CO=0;CO<CP.length;++CO){if(By.find(CS,"n",CP[CO].n)>=0){return true;}}return false;},completePropForCE:function(CO,CP){var CN=CP.graphSize,CR=this.getChartInfo(),CM=this.model,AS,CQ;if(this.useCECanvas){CQ=105;}else{CQ=103;}AS={isABL:CR.isABL,OutputType:CQ,GraphType:this.ceChartType,ThemeType:this.view.theme,ColorBy:{HasColorBy:CM.colorType!==BH.NULL},ElementInfo:this.sizeInfo};if(CN){AS.GraphSize=CN;}if(this.enableCombiChart){AS.ShapeType=203;}else{if(this.ceMarkerShape){AS.ShapeType=this.ceMarkerShape;}}An.copy(AS,CO);},hGetChartInstance:function(CN){var AS=CN.dataProvider,CM=AQ.call(this,CN);if(!CM){B4.visPrint("chart instance is invalid");AS.testDataProvider();}return CM;},getStyleEffectsOptions:function(){var CP=this.view;if(CP.noData){return[];}var AS=[],CM,CN=this,CO=this.getColorByOptions();AS.push({opt:mstrmojo.desc(2058,"All"),optLvl:Bf.ALL_SHAPE,comb:-1});CM=this.getMetricsOnYAxis();CM=CM.concat(this.getMetricsOnXAxis());By.forEach(CM,function(CR){AS.push(a.call(CN,[CR]));});if(CO){AS.push(CO);}var CQ=CP.identity;if(CQ&&CQ.identityArr&&CQ.identityArr.length>0){AS.push({opt:mstrmojo.desc(12091,"Selected Elements"),optLvl:Bf.ITSELF,comb:-1});}return AS;},getColorByOptions:function(){var CO=this.view;if(CO.noData){return[];}var CN,CS=[],CR=this.model,CQ=CR.colorType,CU,AS,CP,CT;function CM(CZ){var CY,CW=[],Cb=CZ.levels,Ca=CZ.elements,CX=CZ.types,CV=Cb.length;for(CY=0;CY<CV;CY++){CW.push({eid:Ca[CY],tid:Cb[CY],tp:CX[CY]});}return CW;}if(CQ===BH.ATT||CQ===BH.ATT_METRICS||CQ===BH.METRICS_ITEM){CU=CR.getColorByLegendInfo();AS=CU.item;CP=CU.elements;By.forEach(CP,function(CV){CS.push({opt:CV.label,comb:CM(CV.token),optLvl:Bf.COLOR_BY});});CT=CO.arrayOfComb;if(CT&&CT.length>1){CS.push({opt:mstrmojo.desc(12092,"Multiple Elements"),comb:[],key:"multiple",optLvl:Bf.COLOR_BY});}CN={opt:AS,optLvl:Bf.COLOR_BY,comb:-1,subOptions:CS};if(CQ===BH.METRICS_ITEM){CN.isMetricNames=true;}return CN;}return undefined;},getNumericAxisOptions:function(Cf,CQ,Cd,CO,Cg){var CV=this.view;if(CV.noData){return[];}var CR=this.getChartInfo(),Ca=[],Ce=this,CN=this.inChartLayout,CP=CN.r,CW=CN.c,CT=[],CM=[],AS=[],CZ=[],CY=[],CU,Cc,CS,Cb;if(CR.tp!==B2.GRID){for(CU=0;CU<CP;CU++){CM=Ag(this.getMetricsOnAxisOfChart(CU,0,"y",true));if(CM.length>0){if(!Cd){CT.push(a.call(Ce,CM,"y",CQ));}Ca=Ca.concat(CM);}AS=Ag(this.getMetricsOnAxisOfChart(CU,0,"y",false));if(AS.length>0){if(!Cd){CT.push(a.call(Ce,AS,"y2",CQ));}Ca=Ca.concat(AS);}}for(Cc=0;Cc<CW;Cc++){CZ=Ag(this.getMetricsOnAxisOfChart(0,Cc,"x",true));if(CZ.length>0){if(!Cd){CT.push(a.call(Ce,CZ,"x",CQ));}Ca=Ca.concat(CZ);}CY=Ag(this.getMetricsOnAxisOfChart(0,Cc,"x",false));if(CY.length>0){if(!Cd){CT.push(a.call(Ce,CY,"x2",CQ));}Ca=Ca.concat(CY);}}}if(Cd){Ca.forEach(function(Ch){CT.push(a.call(Ce,[Ch],"x",CQ));});}if(Cf){var CX=false;CS=this.getSizeByMetrics();Cb=[];By.forEach(CS,function(Ch){if(Ca.indexOf(Ch)<0){Cb.push(Ch);}else{CX=true;if(Cg){Cg.push(Ch);}}});if(CR.isBubbleOrScatter&&!this.splitPlottingMetrics&&CX){}else{if(Cb.length>0){Ca=Ca.concat(Cb);CT.push(a.call(Ce,Cb,"z"));}}if(CO&&CX){By.forEach(CS,function(Ch){if(CM.indexOf(Ch)>=0){CO.push("y1");}if(AS.indexOf(Ch)>=0){CO.push("y2");}if(CZ.indexOf(Ch)>=0){CO.push("x1");}if(CY.indexOf(Ch)>=0){CO.push("x2");}});}}if(CT.length>1){CT.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(Ca),key:"AllMetrics"});}return CT;},getDependentMetricOptions:function(){var CO=this.view;if(CO.noData){return[];}var AS,CN=this,CM=[];AS=CK.call(this);By.forEach(AS,function(CP){CM.push(a.call(CN,[CP]));});return CM;},getIndependentMetricOptions:function(){var CO=this.view;if(CO.noData){return[];}var AS=[],CN=this,CP=this.getChartInfo(),CM=[];if(CP.tp===B2.BUBBLE||CP.tp===B2.SCATTER){AS=this.getMetricsOnXAxis();}By.forEach(AS,function(CQ){CM.push(a.call(CN,[CQ]));});return CM;},getRealReferenceOptionFromAxisOption:function(CM,AS,CQ){var CP=this.view;if(CP.noData){return[];}var CO=An.clone(CM),CN=AS-1;CO.opt=CO.opt+" - "+BP[CN];CO.key=CO.key+","+A5[CN];CO.refType=AS;if(CQ!==undefined){CO.modix=CQ;}return CO;},getReferenceAxisOption:function(){var CN=this.view;if(CN.noData){return[];}var CM=false,AS=[],CO;if(this.isStacked&&!this.splitPlottingMetrics){CM=true;}CO=this.getNumericAxisOptions(false,CM,!CM);CO.forEach(function(CP){if(CP.key!=="AllMetrics"){AS.push(CP);}});return AS;},getReferenceLineOptions:function(){var CN=this.view;if(CN.noData){return[];}var AS=[],CM=this,CO;CO=this.getReferenceAxisOption();CO.forEach(function(CQ){var CP;for(CP in AV){if(AV.hasOwnProperty(CP)){AS.push(CM.getRealReferenceOptionFromAxisOption(CQ,AV[CP]));}}});return AS;},getEnabledReferenceLineOptions:function(CM){var CO=this.view;if(CO.noData||CM===undefined){return[];}var AS=CM.key.split(",")[0],CS=this[AW.REF_LINE_DEF],CN=CS[AS],CP=[],CR,CT;var CQ=function(CV){var CW={};CW.refType=parseInt(CT,10);CW.key=AS+","+A5[CT-1]+","+CV.modix;CW.opt=AS+" - "+BP[CT-1];if(CW.refType===AV.CONST){CW.c=parseFloat(CV[AW.REF_CONST_VALUE]);CW.lin=CV[AW.REF_LINE_NAME];}CW.modix=CV.modix;CW.existing=true;CP.push(CW);};for(CT in CN){if(CN.hasOwnProperty(CT)){var CU=parseInt(CT,10);CR=CN[CU];By.forEach(CR,CQ);}}return CP;},getShowDataLabelOptions:function(){var CO=this.view;if(CO.noData){return[];}if(this.dlOptions){return this.dlOptions;}var CN=this,CP=this.getChartInfo(),AS,CM=[];if(CP.isPie){AS=this.getMetricsOnAngleBy();}else{if(CP.tp!==B2.GRID){AS=CK.call(this);}else{AS=this.getSizeByMetrics();}}By.forEach(AS,function(CQ){CM.push(a.call(CN,[CQ]));});if(CM.length>1){CM.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(AS),key:"AllMetrics"});}this.dlOptions=CM;return CM;},getAttributeSortPlusExistedMetricSort:function(CR,CN){if(CR.dropzones===undefined){CR=this.attributeSelectionInfo[CR.tid];}var AS=false,CP=this.view,CO=CP.getWidgetPropertyValue(AW.SORT_INDEX),CM=CP.getWidgetPropertyValue(AW.SORT_ORDER);var CQ=this.getChartInfo();if(CQ.isABL&&(CR.dropzones.indexOf("XAxis")>=0||CR.dropzones.indexOf("YAxis")>=0)){AS=true;if(CO){this.property.removeItem(AW.SORT_INDEX);this.property.removeItem(AW.SORT_ORDER);}}if(!CO){CO=null;}if(AS||!this.showMetricSortIcon){return this.getMetricSortDefinition(null,CM,CR,CN);}return this.getMetricSortDefinition(CO,CM,CR,CN);},getMetricSortDefinition:function(CX,CR,Ce,CP){var Cb=[],Co=this,CZ=this.getChartInfo(),Ch=this.jsonModel?this.jsonModel:this.model,Cp=Ch.getMetricCount(),Ci,CM=[],AS=[],Cc={},CO=null,CN=this.colHeaderCnt,Cn=this.rowHeaderCnt,CY,CQ,Cq,Cl,Ck,Cm=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],Cf,CV,Cj=Ch.getUnitAttributesCountOnRow(),Cg=Ch.getUnitAttributesCountOnCol(),CU=false,CW,CT;var CS=false,Cd=false;if(CZ.isABL&&this.sortingMetric){if(CZ.dirc===B6.VERTICAL){CS=true;}else{Cd=true;}}if(Ce===undefined){Ce=null;}if(CP===undefined){CP=true;}for(Ci=0;Ci<Cg;++Ci){CO=X.call(this,Ci);if(CO){if(!CS||CO.dropzones.indexOf("XAxis")<0){if(Ce&&!Ce.isRowAttribute&&(Ce.tui===Ci)){AS.push({unit:CO,isAsc:CP});}else{Cc=CO;if(Cc.otp===12||Cc.otp===47){CV=q.call(this,BD.DssAxisColumns,CO);if(CU){AS.push({unit:CO,isAsc:CV!==A9});}else{if(CV!==x){AS.push({unit:CO,isAsc:CV!==A9});}}}}}}}for(Ci=0;Ci<Cj;Ci++){CO=b.call(this,Ci);if(CO){if(!Cd||CO.dropzones.indexOf("YAxis")<0){if(Ce&&Ce.isRowAttribute&&(Ce.tui===Ci)){CM.push({unit:CO,isAsc:CP});}else{Cc=CO;if(Cc.otp===12||Cc.otp===47){CV=q.call(this,BD.DssAxisRows,CO);if(CU){CM.push({unit:CO,isAsc:CV!==A9});}else{if(CV!==x){CM.push({unit:CO,isAsc:CV!==A9});}}}}}}}if(CZ.isABL===false){return CM.concat(AS);}if(CX){CQ=CX.row-this.gts.col.length;Cq=CX.col-this.gts.row.length;Cl=Cq%Cp;Ck=Ch.getMetricProp(undefined);Cf=An.copy(Ck[Cl],{});Cf.gvsRI=CQ;Cf.gvsCI=Cq;}var Ca=[];if(this.horizontalMode){Cb=Cb.concat(CM);if(CX){Cf.axis=C.DssAxisRows;if(Co.specialSortable){Cf.axis=C.DssAxisColumns;}for(Ci=0;Ci<Cg;Ci++){CY=X.call(this,Ci);if(Co.specialSortable&&CY.dropzones.indexOf("BreakBy")>=0){continue;}CW=An.copyProps(Cm,Ch.getColHeaderObj(Cq,Ci),{});CT=Ch.headerInfoToProp(1,CW,"n&id");An.copy(CT[0],CW);Ca.push(CW);}Ca.push(Cf);}Cb=Cb.concat(AS);if(CX){Cb.push({unit:Cf,isAsc:CR,elements:Ca});}}else{Cb=Cb.concat(AS);Cb=Cb.concat(CM);if(CX){Cf.axis=C.DssAxisColumns;if(Co.specialSortable){Cf.axis=C.DssAxisRows;}for(Ci=0;Ci<Cj;Ci++){CY=b.call(this,Ci);if(Co.specialSortable&&CY.dropzones.indexOf("BreakBy")>=0){continue;}CW=An.copyProps(Cm,Ch.getRowHeaderObj(CQ,Ci),{});CT=Ch.headerInfoToProp(0,CW,"n&id");An.copy(CT[0],CW);Ca.push(CW);}Ca.push(Cf);Cb.push({unit:Cf,isAsc:CR,elements:Ca});}}return Cb;},getSortActions:function(Ck){var Ci=-1,Ca=-1,CZ=[],CY,CW,Cg=false,CU=this.firstRes,Ch=CU.gsi,CM=Ch.sorts[0],CT=Ch.sorts[1],CQ=false,Cm=false,Ce,Cc,Cd,CN,Cf,CP,CR;if(CM){if(CM.length>0){CQ=true;}}if(CT){if(CT.length>0){Cm=true;}}if(CQ&&Cm){CZ.push({actionId:27,axisName:C.DssAxisRows});CZ.push({actionId:27,axisName:C.DssAxisColumns});}else{if(CQ){CZ.push({actionId:27,axisName:C.DssAxisRows});}else{if(Cm){CZ.push({actionId:27,axisName:C.DssAxisColumns});}}}for(Ce=0;Ce<Ck.length;Ce++){var Cl=Ck[Ce],Cj=Cl.isAsc,AS=Cl.unit,CS,CO,CY=AS.otp;if(AS.otp===4){CY=4;CS=[];if(Cl.elements){for(Cc=0;Cc<Cl.elements.length;Cc++){CS.push(Cl.elements[Cc]);}}var CX=null;for(Cc=0;Cc<CS.length;Cc++){var CV=CS[Cc];if(CV.otp===4){CX=CV;CW=CX.oid;break;}}if(CX!==null){if(Cl.elements){Cf=AS.axis;if(Cf===C.DssAxisRows){CO=this.gts.col;}else{if(Cf===C.DssAxisColumns){CO=this.gts.row;}}}CN=CO.sorts;if(!CN){CN={sortCollection:[]};CO.sorts=CN;}Cd={sortType:4,subtotalsPosition:0};CN.sortCollection.push(Cd);Cd.isAsc=Cj;Cd.metricID=CW;Cd.elements=CS;Cd.objectID=CW;Cd.objectType=CY;}if(Cf===C.DssAxisRows&&Ci>0){Cd.subtotalsPosition=Ci;}else{if(Cf===C.DssAxisColumns&&Ca>0){Cd.subtotalsPosition=Ca;}}CZ=CZ.concat(AE.call(this,Ce,1,CY,CW,Cj,Cf,Cd.subtotalsPosition,CS,""));}else{if(CY===12||(CY===47&&(AS.ost===12033||AS.ost===12032))){var Cb=(CY===47&&AS.ost===12033);CP=AS;Cf=CP.isRowAttribute?C.DssAxisRows:C.DssAxisColumns;CR=CP.fid;CW=CP.id;var Cn;if(Cf===C.DssAxisRows){Cn=this.gts.row;}else{if(Cf===C.DssAxisColumns){Cn=this.gts.col;}}CN=Cn.sorts;if(!CN){CN={sortCollection:[]};Cn.sorts=CN;}Cd={sortType:2,subtotalsPosition:0};CN.sortCollection.push(Cd);Cd.isAsc=Cj;Cd.attributeID=CW;Cd.formID=CR;Cd.objectID=CW;Cd.objectType=CY;if(Cf===C.DssAxisRows&&Ci>0){Cd.subtotalsPosition=Ci;}else{if(Cf===C.DssAxisColumns&&Ca>0){Cd.subtotalsPosition=Ca;}}CZ=CZ.concat(AE.call(this,Ce,CY===47?(Cb?24:10):3,CY,CW,Cj,Cf,Cd.subtotalsPosition,null,CR));}}}return B1(CZ);},fakeSortActionsStackTotal:function(CS){if(CS&&CS.length){var AS,CO;for(AS=0;AS<CS.length;AS++){if(CS[AS]&&CS[AS].eIds){CO=CS[AS];break;}}var CR=CO&&CO.eIds;if(CO&&CR&&CR.length){for(AS=0;AS<CR.length;AS++){if(CR[AS].otp===4){continue;}var CQ=CR[AS],CN,CM=CQ.id[2];if(CM!==":"){CM=";";}CN=CQ.id.split(CM)[1];if(CN){if(this.isAttrInZone(CN,"ColorBy")||this.isAttrInZone(CN,"BreakBy")){CQ.headerText=CQ.n="StackedTotal";var CP=CQ.id.split(CM);CQ.id="DB:"+CP[1]+":-1";}}}}}},getShapeFormatsObject:function(){var AS;AS=this[AW.FORMATS_ON_COMBINATION];if(!this.shapeFormatsRead){AS=this.view.getWidgetPropertyValue(AW.FORMATS_ON_COMBINATION);this[AW.FORMATS_ON_COMBINATION]=AS;this.shapeFormatsRead=true;}return AS;},setShapeFormatsWithCombination:function(CO,AS){var CM,CN;CM=this.getShapeFormatsObject();if(CM===undefined){CM=this[AW.FORMATS_ON_COMBINATION]={};}CN=n.serializeCombination(CO);if(Object.keys(AS).length<=0){delete CM[CN];}else{CM[CN]=AS;}this.view.setWidgetPropertyValue(AW.FORMATS_ON_COMBINATION,CM);},getShapeFormatsWithCombination:function(CN){if(CN===undefined||CN.length===0){return undefined;}var AS,CM;AS=this.getShapeFormatsObject();if(AS){CM=n.serializeCombination(CN);return AS[CM];}return undefined;},getDataLabelFontFormat:function(){var CN=this.property,AS=[BJ.DATA_LABELS_FONT_FAMILY,BJ.DATA_LABELS_FONT_SIZE,BJ.DATA_LABELS_FONT_STYLE,BJ.DATA_LABELS_FONT_COLOR],CM={};AS.forEach(function(CO){CM[CO]=CN.readItem(CO);});return CM;},getDefaultsForShape:function(CN){var CM=this.defaultsForShape;if(!CM){CM=this.defaultsForShape={};}if(CM[CN]){return CM[CN];}var CP=this.view,CO=CP.getDefaultProperties(),AS=CP.model.data.dz.visProp.fmt,CR={},CQ=[BJ.SHAPE_LINE_THICKNESS,BJ.SHAPE_LINE_COLOR,BJ.SHAPE_LINE_STYLE,BJ.SHAPE_FILL_COLOR,BJ.SHAPE_FILL_STYLE,BJ.SHAPE_FILL_TRANSPARENCY,BJ.SHAPE_FILL_EFFECT,BJ.SHAPE_FILL_COLOR_DEFAULT,BJ.SHAPE_BORDER_COLOR,BJ.SHAPE_BORDER_STYLE,BJ.SHAPE_BORDER_THICKNESS,BJ.LINE_MARKER_SHOW,BJ.LINE_MARKER_SHAPE,BJ.LINE_MARKER_SIZE,BJ.LINE_MARKER_COLOR_EQUAL,BJ.PIE_EXPLODE,BJ.DATA_LABELS_FONT_FAMILY,BJ.DATA_LABELS_FONT_SIZE,BJ.DATA_LABELS_FONT_STYLE,BJ.DATA_LABELS_FONT_COLOR];this.property.updateDefaults(CO,AS);By.forEach(CQ,function(CS){CR[CS]=CO[CS];});CM[CN]=CR;return CR;},getVolatileDefaultsForShape:function(AS){var CM=this.volDefaultsForShape;if(!CM){CM=this.volDefaultsForShape={};}if(CM[AS]){return CM[AS];}var CN=this.getDefaultsForShape(AS);CM[AS]=An.copy(CN);return CM[AS];},refineShapeFormatsObject:function(){var CM=this[AW.FORMATS_ON_COMBINATION];var CS=["metricLevelProp","colorByLevelProp","concreteLevelProp"];this.levelPropCache={};var CQ=this.getColorByAttrsID()||[];var CR=this.getBreakByAttrsID()||[];CR=CR.filter(function(CT){return CQ.indexOf(CT)===-1;});function CP(CU){var CV=CR.some(function(CW){return CU.indexOf(CW)!==-1;});if(CV){return CS[2];}var CT=CQ.some(function(CW){return CU.indexOf(CW)!==-1;});if(CT){return CS[1];}return CS[0];}for(var CO in CM){var CN=CP(CO);this.levelPropCache[CN]=true;}var AS=this.view.model.data.dz.ColorBy;if("MetricNames" in AS&&!AS.TemplateUnit){this.levelPropCache.colorByLevelProp=true;}},clearShapeFormatsCache:function(AS){switch(AS){default:}this.property.clearReadItemCache();delete this.levelPropCache;delete this.sharePropCache;delete this.allPropFormatsRead;delete this.allPropFormatsCache;delete this.lineMarkerShowCache;delete this.metricLvlDLRead;delete this.metricLvlDLCache;delete this.shapeColorCache;delete this.shapeColorFormatsCache;delete this.shapeFormatsCache;},getDefaultsMergedWithAllPropsCachedObject:function(AS){if(!this.sharePropCache){var CN=this.getDefaultsForShape(this.chartInfo.shape);var CM=this.getAllPropsFormatsCachedObject(AS);this.sharePropCache=n.getResolvedFormatsObject([CN,CM]);this.sharePropCache.lnMkShw=this.getLineMarkerShowCachedObject(AS);}return this.sharePropCache;},getLineMarkerShowCachedObject:function(AS){this.lineMarkerShowCache=this.lineMarkerShowCache||AS.getPropertyValue(BJ.LINE_MARKER_SHOW);return this.lineMarkerShowCache;},getAllPropsFormatsCachedObject:function(AS){if(!this.allPropFormatsRead){this.allPropFormatsCache=AS.getPropertyValue(BJ.ALL_SHAPE_FORMAT);this.allPropFormatsRead=true;}return this.allPropFormatsCache;},getMetricDataLabelCachedObject:function(CP,CO){var CM=true;if(!this.metricLvlDLRead){this.metricLvlDLCache=CP.getPropertyValue(AW.METRIC_LEVEL_DATA_LABEL);this.metricLvlDLRead=true;}var CQ=this.metricLvlDLCache;var AS=CM;if(CQ===undefined){AS=CM;}else{var CN=CO.assMetricDLIDCache=CO.assMetricDLIDCache||CO.getAssMetricDataLabelID();if(CN!==undefined){AS=CQ[CN];}else{AS=false;}}return AS;},getShapeFormatsCachedObject:function(AS){this.shapeFormatsCache=this.shapeFormatsCache||{};var CM=AS.gc.groupData.map(function(CN){return[CN.mIdx,CN.C,CN.R].join("-");}).join(";");AS.idx="idx" in AS?AS.idx:[AS.gc.gID,AS.gc.sID,CM].join(";");return this.shapeFormatsCache[AS.idx];},setShapeFormatsCachedObject:function(CM,AS){this.shapeFormatsCache[CM.idx]=AS;},getComboLevelPropCachedObject:function(CM){var CP,CN,CO,AS=this.getShapeFormatsObject();if(!AS){return ;}if(!this.levelPropCache){this.refineShapeFormatsObject();}if(!CM.concreteCombStr&&this.levelPropCache.concreteLevelProp){CO=CM.getSelectedObjectLowestLevel(true);CM.concreteCombStr=(CO===undefined||CO.length===0)?"":n.serializeCombination(CO);}if(!CM.metricCombStr&&this.levelPropCache.metricLevelProp){CP=CM.getSelectedObjectMetricInfo();CM.metricCombStr=(CP===undefined||CP.length===0)?"":n.serializeCombination(CP);}if(!CM.colorByCombStr&&this.levelPropCache.colorByLevelProp){CN=CM.getSelectedObjectColorByInfo();CM.colorByCombStr=(CN===undefined||CN.length===0)?"":n.serializeCombination(CN);}return[AS[CM.concreteCombStr],AS[CM.metricCombStr],AS[CM.colorByCombStr]];},getShapeColorCachedObject:function(CM,AS){this.shapeColorCache=this.shapeColorCache||[];return this.shapeColorCache[AS.idx]=this.shapeColorCache[AS.idx]||CM.getColorByData();},getShapeColorFormatsCachedObject:function(CS,CP,CO,CU){var CM=CO,CT=mstrmojo.gm.ShapeFillType,CV=this.getMetricDataLabelCachedObject(CS,CP),CQ=this.getShapeColorCachedObject(CS,CP),CR=CQ+(CV?"T":"F");if(typeof CQ==="object"){CR=JSON.stringify(CQ)+(CV?"T":"F");}this.shapeColorFormatsCache=this.shapeColorFormatsCache||{};if(CU){if(this.shapeColorFormatsCache[CR]){return this.shapeColorFormatsCache[CR];}else{CM=this.shapeColorFormatsCache[CR]=An.copy(CO);}}CQ=(CQ!==undefined&&CQ!==null)?CQ:CM[BJ.SHAPE_FILL_COLOR];var AS=false;if(CQ&&typeof CQ==="object"){AS=true;}if(CQ!==undefined){CM[BJ.SHAPE_LINE_COLOR]=CM[BJ.SHAPE_FILL_COLOR]=CQ;var CW=CS.getPropertyValue(BJ.LINE_MARKER_COLOR);if(CW===undefined){CM[BJ.LINE_MARKER_COLOR]=AS?CQ.c1:CQ;}else{CM[BJ.LINE_MARKER_COLOR]=CW;}if(CM[BJ.LINE_MARKER_BORDER_COLOR]===undefined){CM[BJ.LINE_MARKER_BORDER_COLOR]=AS?CQ.c1:(CW!==undefined?CW:CQ);}if(CM[BJ.SHAPE_BORDER_COLOR]===undefined){CM[BJ.SHAPE_BORDER_COLOR]=AS?CQ.c1:CQ;}}CM[BJ.SHAPE_FILL_STYLE]=AS?CT.Gradient:CT.Solid;if(AS&&this.chartInfo.isABL){var CN=CS.getShape();if(CN===Ah.LINE||CN===Ah.TICK){CM[BJ.SHAPE_FILL_STYLE]=CT.Solid;CM[BJ.SHAPE_LINE_COLOR]=CM[BJ.SHAPE_FILL_COLOR]=CQ.c1;}}CM[BJ.DATA_LABELS_SHOW]=CV;return CM;},forceUpdateAxis:function(){var AS=this.view;if(AS){return AS.forceUpdateAxis;}return false;},forceUpdateCharts:function(){var AS=this.view;if(AS){return AS.forceUpdateCharts;}return false;},clearLogScaleCahce:function(){delete this.logScaleCache;},resetDataLabelType:function(){var AS=this.chartInfo;if(AS){AS.dlTp=this.getDataLabelType();}},resetDataLabelPlacement:function(){var AS=this.chartInfo;if(AS){AS.dlPlmt=this.property.readItem(AW.DATA_LABELS_PLACEMENT);}},resetFitTo:function(){if(this.dz){var AS=this.property,CM=((!!this.dz.Rows.TemplateUnit&&!this.dz.YAxis.TemplateMetric)||(!!this.dz.Columns.TemplateUnit&&!this.dz.XAxis.TemplateMetric))?AO.NONE:AO.AUTOMATIC;AS.reInitItem(AW.FIT_TO,CM);}},clearDataLabelFormatCache:function(){var AS=this.ChartFactory;if(AS&&AS.mUniversalProperty){delete AS.mUniversalProperty.DatatextFormat;}},resetDefaultShapeProp:function(){delete this.defaultsForShape;delete this.volDefaultsForShape;},formatAsAxisLabel:function(CN,CM){if(!CN||CN.length<=0){return undefined;}var AS;if(this.chartSubType===BL.PERCENT){AS=D.formatByMask("#%",CM);}else{AS=this.formatValue(CN,CM);}return AS;},formatValue:function(CW,CU){var CP,CV,CT,CQ,CS,CO,CM=this.inChartLayout,CR=CM.r,CN=CM.c,AS=this.mericsAxisMapCache;CV=this.getMetricIndexFromID(CW[0]);if(!AS){AS=this.mericsAxisMapCache={};}if(AS[CV]!==undefined){return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}for(CP=0;CP<CR;CP++){CQ=Ag(this.getMetricsOnAxisOfChart(CP,0,"y",true));if(CQ.indexOf(CV)>=0){AS[CV]={row:CP,col:0,axisName:"y",isPrimary:true};return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}CO=Ag(this.getMetricsOnAxisOfChart(CP,0,"y",false));if(CO.indexOf(CV)>=0){AS[CV]={row:CP,col:0,axisName:"y",isPrimary:false};return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}}for(CP=0;CP<CN;CP++){CT=Ag(this.getMetricsOnAxisOfChart(0,CP,"x",true));if(CT.indexOf(CV)>=0){AS[CV]={row:0,col:CP,axisName:"x",isPrimary:true};return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}CS=Ag(this.getMetricsOnAxisOfChart(0,CP,"x",false));if(CS.indexOf(CV)>=0){AS[CV]={row:0,col:CP,axisName:"x",isPrimary:false};return this.formatMetricsValueUniformly(CW,CU,AS[CV]);}}return AC.call(this,CU,CV);},getMetricInfo:function(CP){this.metricInfos=this.metricInfos||{};var CR=this.metricInfos;if(!!CR[CP]){return CR[CP];}var AS=this.gts,CN=AS.col,CQ=CN.length;if(CQ&&CN[CQ-1].otp===-1){var CO=CN[CQ-1].es;CO.forEach(function(CS){if(CS.oid===CP){CR[CP]=An.copy(CS,{});}});var CM=this.firstRes.gnf;CM.forEach(function(CS){if(CS.id===CP){CR[CP].nf=An.copy(CS,{});}});}},formatMetricsValueUniformly:function(Ce,CY,AS){var CU,CR,CQ=AS.row,CP=AS.col,CO=AS.axisName,CZ=AS.isPrimary,CN=this.condenseEchos,CV=this.mapFromChartToLDSIndex(CQ,CP),CW=CO==="x"?CQ:CV.r,CT=CO==="x"?CV.c:CP,CM=CV.dpIdx,CS=this.model.getLocalDataSet(CW,CT),Cg=CS.generateDataProvider(),CX=Cg[CM],Ca=CO.toUpperCase()+(CZ?"AxisChart":"2AxisChart");if(CX[Ca]){return CX[Ca].formatAsUniformAxisLabel(CY);}CR=CO==="x"?CP:CQ;Ca=CO.toUpperCase();if(CZ){Ca=Ca+"1";}else{Ca=Ca+"2";}CN=CN&&CN[Ca];CU=CN&&CN[CR];if(CU){return l.abbreviateNumber(CY,5);}else{Ca=Ca.toLowerCase();if(CZ){Ca=Ca[0];}Ca=Ca+"Condense";if(this[Ca]){return l.abbreviateNumber(CY,5);}}var Cf=this,Cd=[],Cc="General";Ce.forEach(function(Ci){var Ch=Cf.getMetricInfo(Ci);if(Ch&&Ch.nf){Cd.push(Ch.nf);}});if(Cd.length){var Cb=1;Cc=Cd[0].nfs;for(;Cb<Cd.length;Cb++){if(Cd[Cb].nfs!=Cc){Cc="General";break;}}}return D.formatByMask(Cc,CY);},hasAttributesInDropzone:function(CM){var AS=this.dz[CM].TemplateUnit;return(AS&&AS.length>0);},getAttributeIds:function(){if(!this.attributeIds){var CN=this.gts.row,AS=this.gts.col,CM={};By.forEach(CN,function(CO){if(CO.otp!==-1&&CO.otp!==4){CM[CO.id]=CO.es;}});By.forEach(AS,function(CO){if(CO.otp!==-1&&CO.otp!==4){CM[CO.id]=CO.es;}});this.attributeIds=CM;}return this.attributeIds;},getDataProvider:function(AS,CM){return V.call(this,AS,CM);},isOneDotCase:function(){var AS=this.model,CN,CM,CO;CN=AS.getLocalDataSet(0,0);if(this.chartDirection===BV.EnumABLDirection.VERTICAL){CO=AS.getMetricCount();if(CO===0){CM=CN.wd;}else{CM=CN.wd/CO;}}else{CM=CN.items.length;}return CM<2;},isCompactMode:function(){return this.view.getWidgetPropertyValue(AW.FIT_TO)===AO.COMPACT;},getMinMaxOnNumericAxis:function(AS,CM){return Bj.call(this,AS,CM);},getMinMaxForDP:function(AS,CM){return BZ.call(this,AS,CM);}});}());(function(){mstrmojo.ngm=mstrmojo.ngm||{};mstrmojo.requiresCls("mstrmojo.gm.GMController","mstrmojo.gm.GMEnums","mstrmojo.ngm.NewGMEnums","mstrmojo.ngm.NewGMJSONModel");var O=mstrmojo.hash,L=mstrmojo.array,V=mstrmojo.gm.GMUtility.getOptionObjArr,H=mstrmojo.gm.EnumColorByType,U=mstrmojo.VisUtility,D=mstrmojo.gm.WidgetPropertyTag,K=mstrmojo.gm.FormatingPropertyTag,C=mstrmojo.vi.viz.EnumVisualizationTemplates,S=mstrmojo.vi.viz.EnumAggregatedVisTemplates,W=mstrmojo.mstr.EnumDSSXMLObjectTypes,M=mstrmojo.gm.EnumShape,E=mstrmojo.gm.EnumSubtype,J=mstrmojo.gm.EnumABLDirection,Y=mstrmojo.gm.DualAxisSubAxisBit,R=-20,B=mstrmojo.gm.EnumContainerFitModes,X=mstrmojo.gm.EnumGraphType;var N="00000000000000000000000000000000",I=0;function T(){var a,Z,b=this.getChartInfo();if(b.isABL){if(b.dirc===mstrmojo.gm.EnumABLDirection.VERTICAL){a=this.getMetricsOnYAxis();}else{a=this.getMetricsOnXAxis();}}else{if(b.tp===X.GRID){a=[];}else{a=this.getMetricsOnYAxis();Z=this.bubbleSeriesNum;if(b.isBubbleOrScatter&&Z!==undefined){a=a.slice(0,Z);}}}return a;}function Q(p,Z){var r=p.ColorBy,h=[],j,e,n,l,k=r.TemplateUnit,f=r.TemplateMetric,q=false,c=false,d=false,a=H.NULL;if(k&&k.length>0){q=true;}if(f&&f.length>0){l=f[0].idx;c=true;}if(r.MetricNames!==undefined){d=true;}if(!(d||f||q)){return{tp:H.NULL};}if(q){if(d){a=H.ATT_METRICS;}else{a=H.ATT;}j=k.length;for(e=0;e<j;e++){h.push(k[e]);}return{tp:a,atts:h};}if(d){a=H.METRICS_ITEM;return{tp:a};}if(c){a=H.METRICS;n=Z.gsi;this.thresholds=n.thresholds;var b=n.mx[l].did,o=this.thresholds&&this.thresholds[b],g;if(!o){return{tp:H.NULL};}g=U.getRankMode(o);return{tp:a,metrics:f,rankMode:g,colorByMetricIndex:l,thresholds:o};}}function F(a){var k=a?a.length:0,j,h,f,Z,n,b,d;var g=function(q){var o,p=-1;if(q&&q.indexOf&&q.indexOf("idx")>=0){o=q.split(":");if(o&&o.length===2){p=parseInt(o[1]);}}return p;};var e=function(u,w){var q=this.getChartInfo(),t,s=null,x=this.dz,p,r,v,o;if(q.dirc===J.VERTICAL){p=x.YAxis;v=p.TemplateMetric;t=v&&v.length>0&&v[u];if(t){o=parseInt(t.ax,10);if(o===Y.PRIMARY&&w||o===Y.SECONDARY&&!w){s=t.id;}}}else{if(q.dirc===J.HORIZONTAL){r=x.XAxis;v=r.TemplateMetric;t=v&&v.length>0&&v[u];if(t){o=parseInt(t.ax,10);if(o===Y.PRIMARY&&w||o===Y.SECONDARY&&!w){s=t.id;}}}}return s;};var c=function(p,o,s){var r=p[o],q=s?0:1;if(r[0]===R||r[1]===R){p[o]=undefined;}else{r[q]=R;}};for(j=0;j<k;j++){h=a[j];f=h[0];Z=g(f);if(Z>=0){d=e.call(this,Z,true);if(d){h[0]=d;}else{c(a,j,true);}}n=h[1];b=g(n);if(b>=0){d=e.call(this,b,false);if(d){h[1]=d;}else{c(a,j,false);}}}var l=[];for(j=0;j<k;j++){if(a[j]!==undefined){l.push(a[j]);}}this.setGroupInfo(l);return l;}mstrmojo.ngm.NewGMController=mstrmojo.declare(mstrmojo.gm.GMController,null,{scriptClass:"mstrmojo.ngm.NewGMController",chartDirection:mstrmojo.ngm.EnumGraphDirection.UNDEFINED,init:function(Z){this._super(Z);this.axisRCache=null;this.axisCCache=null;this.jsonModel=this.addDisposable(new mstrmojo.ngm.NewGMJSONModel({node:this.firstRes,docModel:this.xtabModel.docModel,gmCtr:this}));this.inChartLayout=this.jsonModel._getInChartLayout();this.extrs=this.jsonModel.getData().extrs;this.splitPlottingMetrics=this.jsonModel.isSplitPlottingMetrics;this.model=this.jsonModel;this.dz=this.jsonModel.getData().dz;this.gts=this.jsonModel.getData().gts;this.gsi=this.jsonModel.getData().gsi;},adjustMetricNamesInDropZone:function(){if(!this.getChartInfo().isPie){if(O.walk("firstRes.dz.XAxis",this)&&this.firstRes.dz.XAxis.MetricNames!==undefined){this.firstRes.dz.BreakBy.MetricNames=this.firstRes.dz.XAxis.MetricNames;delete this.firstRes.dz.XAxis.MetricNames;}if(O.walk("firstRes.dz.YAxis",this)&&this.firstRes.dz.YAxis.MetricNames!==undefined){this.firstRes.dz.BreakBy.MetricNames=this.firstRes.dz.YAxis.MetricNames;delete this.firstRes.dz.YAxis.MetricNames;}}},postInit:function(){this.adjustMetricNamesInDropZone();this.consumeJSON(this.firstRes);this.setupDualAxis();this.colorByInfo=Q.call(this,this.jsonModel.getData().dz,this.jsonModel.getData());this.composeCustomString();this.disabledUnits=U.findDisabledUnits(this.firstRes,this.xtabModel);},setupDualAxis:function(){this.haveX1=false;this.haveX2=false;this.haveY1=false;this.haveY2=false;if(this.jsonModel.getData().dz.XAxis.TemplateMetric){this.haveX1=true;}if(this.jsonModel.getData().dz.YAxis.TemplateMetric){this.haveY1=true;}},hasGroupInfoStored:function(){var a,Z=this.view.getWidgetPropertyValue(D.GROUP_INFO);if(Z){Z=Z.replace(/'/g,'"');a=JSON.parse(Z);}if(a&&a.length>0){if(Z.indexOf("idx")>=0){a=F.call(this,a);}return{existing:true,gi:a};}return{existing:false};},consumeJSON:function(c){this.configureTrendLine(c);var Z=this.getRowTitleInfo(true),b=this.getColTitleInfo(true),a=this.attributeSelectionInfo={};if(Z&&Z.items){L.forEach(Z.items,function(d){a[d.id]=d;});}if(b&&b.items){L.forEach(b.items,function(d){a[d.id]=d;});}},getMetricFormat:function(Z){var a=this.jsonModel,c;if(typeof Z==="string"){return a.queryMetric({id:Z})||{};}else{c=Z;}if(c>=0){var b=a._getMetrics()[c];return{mId:b&&b.oid,n:b&&b.n,nf:b&&a.node.nf[c].nfs,cds:b&&b.cds||false};}return{};},getHeaderFormat:function(a){var Z;(a||[]).forEach(function(b){if("mIdx" in b&&!Z){Z=this.getMetricFormat(b.mIdx).nf;}}.bind(this));return Z;},resetFitTo:function(){if(this.dz){var Z=this.property,a=((!!this.dz.Rows.TemplateUnit&&!this.dz.YAxis.TemplateMetric)||(!!this.dz.Columns.TemplateUnit&&!this.dz.XAxis.TemplateMetric))?B.FIT_TO_CONTENT:B.AUTOMATIC;Z.reInitItem(K.CONTAINER_FIT_MODE,a);}},getShowDataLabelOptions:function(){var c=this.view;if(c.noData){return[];}if(this.dlOptions){return this.dlOptions;}var b=this,d=this.getChartInfo(),Z,a=[];if(d.isPie){Z=this.getMetricsOnAngleBy();}else{if(d.tp!==X.GRID){Z=T.call(this);}else{Z=this.getSizeByMetrics();}}L.forEach(Z,function(e){a.push(V.call(b,[e]));});if(a.length>1){a.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(Z),key:"AllMetrics"});}this.dlOptions=a;return a;},textTypeDataLabelEnabled:function(){var b=this.getChartInfo(),Z=false,a=this.getHostStructure();if(b.isWaterfall&&a.BreakBy.length>0){Z=true;}return Z;},getColorByLegendInfo:function(){return{itemName:"",elements:[]};},getRowHeaderTitles:function(){return this.jsonModel.getRowHeaderTitles();},getColumnHeaderTitles:function(){return this.jsonModel.getColumnHeaderTitles();},getXAxisHeaderTitles:function(Z,a){return this.jsonModel.getXAxisHeaderTitles(Z,a);},getYAxisHeaderTitles:function(Z,a){return this.jsonModel.getYAxisHeaderTitles(Z,a);},getBreakByHeaderTitles:function(Z,a){return this.jsonModel.getBreakByHeaderTitles(Z,a);},getYAxisHeaders:function(Z,a){return this.jsonModel.getYAxisHeaders(Z,a);},getXAxisHeaders:function(Z,a){return this.jsonModel.getXAxisHeaders(Z,a);},getBreakByHeaders:function(Z,a){return this.jsonModel.getBreakByHeaders(Z,a);},hasSizeBy:function(){return this.jsonModel.hasSizeBy();},hasColorBy:function(){return this.jsonModel.hasColorBy();},hasAttributesInDropzone:function(Z){return this.jsonModel.hasAttributesInDropzone(Z);},isUnitInTooltip:function(Z){return this.jsonModel.isUnitInTooltip(Z);},getTooltipItems:function(){return this.jsonModel.getTooltipItems();},queryAttribute:function(Z){return this.jsonModel.queryAttribute(Z);},getRowTitleInfo:function(Z){return this._getTitleInfo(Z,this.jsonModel.getRowTitleInfo(),this.rowHeaderCnt);},getColTitleInfo:function(Z){return this._getTitleInfo(Z,this.jsonModel.getColTitleInfo(),this.colHeaderCnt);},_getTitleInfo:function(a,b,c){var Z=[];if(c<b.length){b.slice(0,c);}L.forEach(b,function(d){Z.push(a?d:d.n);});return{items:Z};},getHeaderPath:function(Z,a){return this.jsonModel.getHeaderPath(Z,a);},getMetrics:function(Z,a){return this.jsonModel.fetchGVS(Z,a);},getMatrixDimension:function(){return this.jsonModel.getMatrixDimension();},getAxis:function P(Z,a){if(Z<0||Z>=this.getRowChartCount()||a<0||a>=this.getColChartCount){throw"getAxis: index out of range";}return Object.assign({},this.axisRCache[Z],this.axisCCache[a]);},getRowChartCount:function(){return this.jsonModel.getMatrixDimension().r;},getColChartCount:function(){return this.jsonModel.getMatrixDimension().c;},getRowHeaderTree:function(){return this.jsonModel.getRowHeaderTree();},getColHeaderTree:function(){return this.jsonModel.getColHeaderTree();},hasMetricNamesInXHeader:function(){return this.jsonModel.hasMetricNamesInXHeader();},hasMetricNamesInYHeader:function(){return this.jsonModel.hasMetricNamesInYHeader();},getAxisLabels:function(Z,a){return this.jsonModel.getAxisLabels(Z,a);},getWaterfallAxisLabels:function(Z){return this.waterfallLabels[Z];},addWaterfallAxisLabel:function(Z,a){if(!this.waterfallLabels){this.waterfallLabels=[];}this.waterfallLabels[Z]=a;},addWaterfallAxisVals:function(Z,a){if(!this.waterfallVals){this.waterfallVals=[];}this.waterfallVals[Z]=a;},getWaterfallAxisVals:function(Z){return this.waterfallVals[Z];},getExtremes:function(Z,a){return this.getMinMaxForDP(Z,a);},adjustMetricNamesInDropZone:function(){if(O.walk("firstRes.dz.XAxis",this)&&this.firstRes.dz.XAxis.MetricNames!==undefined){this.firstRes.dz.BreakBy.MetricNames=this.firstRes.dz.XAxis.MetricNames;delete this.firstRes.dz.XAxis.MetricNames;}if(O.walk("firstRes.dz.YAxis",this)&&this.firstRes.dz.YAxis.MetricNames!==undefined){this.firstRes.dz.BreakBy.MetricNames=this.firstRes.dz.YAxis.MetricNames;delete this.firstRes.dz.YAxis.MetricNames;}},getSortArray:function(e,c,l,a){var k=[],r=this.jsonModel,u=r._getMetrics().length,p,f,b,v,s,q,t=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],n,g=r.getUnitAttributesCountOnRow(),h=r.getUnitAttributesCountOnCol(),Z,o=e!==null,d;if(e){b=e.row-this.gts.col.length;v=e.col-this.gts.row.length;s=v%u;q=r._getMetrics();n=O.copy(q[s],{});n.gvsRI=b;n.gvsCI=v;}var j=[];for(p=0;p<h;p++){f=(this.getColTitleInfo(true).items)[p];if(o&&this.horizontalMode){Z=O.copyProps(t,r.getColHeaderObj(v,p),{});d=r._headerInfoToProp(1,Z,"n&id");O.copy(d[0],Z);j.push(Z);}else{if(l&&!l.isRowAttribute&&(l.tui===p)){k.push({unit:f,isAsc:a});}}}if(o&&this.horizontalMode){n.axis=1;j.push(n);}for(p=0;p<g;p++){f=(this.getRowTitleInfo(true).items)[p];if(o&&!this.horizontalMode){Z=O.copyProps(t,r.getRowHeaderObj(b,p),{});d=r._headerInfoToProp(0,Z,"n&id");O.copy(d[0],Z);j.push(Z);}else{if(l&&l.isRowAttribute&&(l.tui===p)){k.push({unit:f,isAsc:a});}}}if(o&&!this.horizontalMode){n.axis=2;j.push(n);}if(o){k.push({unit:n,isAsc:c,elements:j});}return k;},getSortActions:function(d){var c=[],b=this.jsonModel.getSorts(),a=b[0]&&b[0].length>0,Z=b[1]&&b[1].length>0;if(a){c.push({actionId:27,axisName:1});}if(Z){c.push({actionId:27,axisName:2});}d.forEach(function(g,f){var e=g.unit,j=g.elements,k,h,l;if(e.otp===W.Attribute||e.otp===W.Consolidation){h=e.isRowAttribute?1:2;l=e.id;if(e.otp===W.Consolidation&&e.ost===12033){k=24;}else{k=e.otp===W.Consolidation?10:3;}}else{if(e.otp!==W.Filter){k=1;h=e.axis;l=e.oid;}}c.push({sortIndex:f,sortType:k,objType:e.otp,objID:l,ascending:g.isAsc,axisIndex:h,subtotalsPosition:0,eIds:j?j:null,formId:e.fid?e.fid:"",actionId:26});});return c;},getModelRhs:function(){return this.jsonModel.modelRhs;},getModelChs:function(){return this.jsonModel.modelChs;},getSizeByMetricsInfo:function(c,d){var e=this.getSizeByMetrics()||[],a=this.jsonModel,Z=this.getExtremes(c,d),b=[];e=e.length>1?[e[0]]:e;e.forEach(function(h){var f=a._getMetrics()[h];var g={id:f.oid,name:f.n,max:Z.ZMaxValue,min:Z.ZMinValue};b.push(g);});return b;},getAttributeAxesLetters:function(){var Z=[];if(this.isHistogram){return Z;}if(this.jsonModel.isAttrInXAxis()){Z.push("x");}if(this.jsonModel.isAttrInYAxis()){Z.push("y");}return Z;},getMetricAxesLetters:function(){var Z=[];if(this.jsonModel.isMetricInXAxis()){Z.push("x");}if(this.jsonModel.isMetricInYAxis()){Z.push("y");}return Z;},getCellHandler:function(c,e,g){var d=this.jsonModel.getData(),Z=d.gts,f=Z.row,b=Z.col,a=this.jsonModel.mapChartToTemplatePartition(c,e);if(g>=0){return{row:a.r+b.length,col:a.c+g+f.length};}},getSizeByMetrics:function(){var Z=this.jsonModel.getSizeByMetrics();if(Z===undefined){return[];}else{if(L.isArray(Z)){return Z;}else{return[Z];}}},mapFromChartToLDSIndex:function(b,h){var e=this.jsonModel._getInChartLayout(),f=Math.floor(b/e.r),Z=Math.floor(h/e.c),a=b%e.r,g=h%e.c,d=a*e.c+g;return{r:f,c:Z,dpIdx:d,inchtRow:a,inchtCol:g};},getHostStructure:function(){var c,e,k,b,l=this.jsonModel.getData().dz,a=["Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],h=a.length,f={},Z=this.jsonModel.getData().gts,g=this,j=this.jsonModel.getData().gsi,d=function(p){if(p.srcUnit){p=p.srcUnit;if(e.filter(function(r){return p.id===r.id;}).length>0){return ;}}var o=O.copy(p,{zone:c+1});var n;if(p.t!==4){if(p.axis!==undefined&&p.uidx!==undefined){n=Z[p.axis][p.uidx];}}var q=g.jsonModel.queryAttribute({aid:p.id},["fs"]);if(q&&q.fs){o.fs=q.fs;}if(q&&("st" in q)){o.st=q.st;}if(n){o.at=n.at;}e.push(o);};for(c=0;c<h;c++){k=a[c];b=l[k]||l.Angle;e=f[k]=[];if(b.TemplateUnit){L.forEach(b.TemplateUnit,d);}if(b.TemplateMetric){L.forEach(b.TemplateMetric,d);}if(b.MetricNames!==undefined){e.push({n:"Metric Names",id:N,t:I,zone:c+1});}}return f;},isEmptyVis:function(){var f=this.getHostStructure(),e=this.isPie,b=f.Rows.length,d=f.Columns.length,a=f.XAxis.length,g=f.YAxis.length,c=f.SliceBy.length,Z=f.AngleBy.length;if(e&&this.getChartType()===X.GRID){return this.isBlankGrid;}if(b>0||d>0||a>0||g>0){return false;}if(e){if(c>0||Z>0){return false;}}return true;},getNewChartType:function(){return this.getChartType();},getChartType:function(){if(this.chartType===undefined||X.UNDEFINED){var g=this.firstRes,Z=g.dz,d=Z.XAxis,a=Z.YAxis,c,e=this.view,b=e.getWidgetPropertyValue(D.SHAPE),f=e.getWidgetPropertyValue(D.VIS_TYPE);if(f===C.GRAPHMATRIXVERTICALHISTOGRAM){c=X.HISTOGRAM;this.isHistogram=true;}else{if(f===C.GRAPHMATRIXVERTICALBOXPLOT||f===C.GRAPHMATRIXHORIZONTALBOXPLOT){c=X.BOXPLOT;this.isBoxPlot=true;}else{if(f===C.GRAPHMATRIXVERTICALWATERFALL||f===C.GRAPHMATRIXHORIZONTALWATERFALL){c=X.WATERFALL;this.isWaterfall=true;}else{if(d.TemplateMetric&&a.TemplateMetric){if(this.hasSizeBy()){c=X.BUBBLE;}else{c=X.SCATTER;}}else{if(!d.TemplateMetric&&!a.TemplateMetric){c=X.GRID;if((!d.TemplateUnit||d.TemplateUnit.length===0)&&(!a.TemplateUnit||a.TemplateUnit.length===0)){this.isBlankGrid=true;}}else{if(b===M.LINE){c=X.LINE;}else{if(b===M.BAR){c=X.BAR;}else{if(b===M.AREA){c=X.AREA;}else{if(b===M.PIE){c=X.BAR;}else{if(b===M.RING){c=X.BAR;}else{c=X.BAR;}}}}}}}}}}this.chartType=c;if(a.TemplateMetric&&!d.TemplateMetric){this.chartDirection=mstrmojo.gm.EnumABLDirection.VERTICAL;}else{if(!a.TemplateMetric&&d.TemplateMetric){this.horizontalMode=true;this.chartDirection=mstrmojo.gm.EnumABLDirection.HORIZONTAL;}else{this.chartDirection=mstrmojo.gm.EnumABLDirection.UNDEFINED;}}this.isPie=(b===M.PIE||b===M.RING);if(this.isPie){this.isBlankGrid=false;}if(g.eg!==undefined&&!(e&&e.excludeData)){this.isBlankGrid=true;}}return this.chartType;},getVisType:function G(){return this.view.getWidgetPropertyValue(D.VIS_TYPE);},getAggregatedVisType:function A(){var a=this.getVisType(),Z="default";O.forEach(S,function(c,b){if(c.indexOf(a)>-1){Z=b.toString().toLowerCase();return false;}});return Z;},isGrid:function(){return this.chartType===X.GRID;},isBubble:function(){return this.chartType===X.BUBBLE;},isScatter:function(){return this.chartType===X.SCATTER;},isBubbleOrScatter:function(){var Z=this.chartType;return Z===X.BUBBLE||Z===X.SCATTER;},getChartInfo:function(){var c=this.chartInfo;if(c){return c;}var a=X,b=this.getChartType(),Z=false;if(b===a.AREA||b===a.BAR||b===a.LINE||b===a.BOXPLOT||b===a.WATERFALL||b===a.HISTOGRAM){Z=true;}this.chartInfo={tp:b,sbtp:this.chartSubType,dirc:this.chartDirection,shape:this.markerShape,ceMarkerShape:this.ceMarkerShape,isABL:Z,isPie:this.isPie,isHistogram:this.isHistogram,isBoxPlot:this.isBoxPlot,isWaterfall:this.isWaterfall,isRing:false,hasSizeBy:this.hasSizeBy(),isCombo:this.enableCombiChart,isBubbleOrScatter:this.isBubbleOrScatter(),isGrid:this.isGrid()};return this.chartInfo;},resetChartInfo:function(){delete this.chartInfo;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.enums.EnumThemeProperties");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMLegend","GMController","GMProperty","GMAxisScale","GMPropertyNode","GMPropDefaults");var h=mstrmojo,Al=h.gm,Am=h.func.wrapMethods,Q=h.array,Y=h.hash,J=Al.GMProperty,Ap=Al.GMUtility,F=h.VisUtility,T=Al.EnumShape,Aj=Al.EnumSubtype,p=Al.EnumGridLines,o=Al.EnumLegendSlot,AH=Al.EnumTrendRefModelLabels,r=Al.EnumRefLineModelType,K=Al.EnumSelectionOptionLevel,Z=Al.GMPropDefaults,H=Al.EnumGraphType,n=Al.EnumColorByType,Ao=h.chart.enums.EnumLineStyle,AZ=Al.EnumCombinedLineStyle,Ai=Al.EnumShapeFormatStatus,l=Al.FormatingPropertyTag,AO=Al.WidgetPropertyTag,L=Al.GMAxisScale,q=Al.EnumAxisScale,AU=Al.EnumIdentityType,B=h.VisEnum.ControlType,AW=Al.GMPropertyNode,AF=h.VisEnum.VIS_CARDLIMIT.NON_GRID,t=h.vi.viz.EnumDSSDropZones,AR={n:"Metric Names",did:"00000000000000000000000000000000",t:0,cs:1},w=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME;var AQ="_tmsp",f="_default",S="allVal",AN="rfLnFnt",Ab=true;var AD={lgdBgFillClr:"lgdBgFillStyle",shpFillClr:"shpFillStyle",bgFillClr:"bgFillStyle",rwHdrFillClr:"rwHdrFillStyle",colHdrFillClr:"colHdrFillStyle"};var y=[{pos:o.LEFT_TOP},{pos:o.LEFT_MIDDLE},{pos:o.LEFT_BOTTOM},{pos:o.RIGHT_TOP},{pos:o.RIGHT_MIDDLE},{pos:o.RIGHT_BOTTOM}];var D=[AO.AXIS_SCALE,AO.AXIS_SCALE_DATA,AO.SUB_TYPE,AO.OUTSIDE_BORDER,AO.SELECTION_TYPE,AO.SELECTIONS,AO.AXIS_SCALE_MANUAL_MIN,AO.AXIS_SCALE_MANUAL_MAX,AO.SINGLE_AXIS_SCALE_TYPE,AO.TREND_LINE_DEF,AO.REF_LINE_DEF,l.OUTSIDE_BORDER_SHOW,l.OUTSIDE_BORDER_COLOR,l.OUTSIDE_BORDER_STYLE,l.OUTSIDE_BORDER_THICKNESS,l.COLOR_SQUARE_COLOR];var b=[l.MAJOR_GRID_LINES_SHOW,l.MAJOR_GRID_LINES_COLOR,l.MAJOR_GRID_LINES_THICKNESS,l.MAJOR_GRID_LINES_STYLE,l.MINOR_GRID_LINES_SHOW,l.MINER_GRID_LINES_COLOR,l.MINER_GRID_LINES_THICKNESS,l.MINER_GRID_LINES_STYLE,l.X_AXIS_LINE_SHOW,l.X_AXIS_LINE_COLOR,l.X_AXIS_LINE_STYLE,l.X_AXIS_LINE_THICKNESS,l.X_AXIS_TITLE_SHOW,l.X_AXIS_TITLE_CONTENT,l.X_AXIS_TITLE_FONT_COLOR,l.X_AXIS_TITLE_FONT_FAMILY,l.X_AXIS_TITLE_FONT_STYLE,l.X_AXIS_TITLE_FONT_SIZE,l.X_AXIS_LABELS_FONT_COLOR,l.X_AXIS_LABELS_FONT_SIZE,l.X_AXIS_LABELS_FONT_FAMILY,l.X_AXIS_LABELS_FONT_STYLE,l.X_AXIS_LABELS_ROTATION,l.X_AXIS_LABELS_SHOW,l.Y_AXIS_LINE_SHOW,l.Y_AXIS_LINE_COLOR,l.Y_AXIS_LINE_STYLE,l.Y_AXIS_LINE_THICKNESS,l.Y_AXIS_TITLE_SHOW,l.Y_AXIS_TITLE_CONTENT,l.Y_AXIS_TITLE_FONT_SIZE,l.Y_AXIS_TITLE_FONT_COLOR,l.Y_AXIS_TITLE_FONT_FAMILY,l.Y_AXIS_TITLE_FONT_STYLE,l.Y_AXIS_LABELS_FONT_SIZE,l.Y_AXIS_LABELS_FONT_COLOR,l.Y_AXIS_LABELS_FONT_FAMILY,l.Y_AXIS_LABELS_FONT_STYLE,l.Y_AXIS_LABELS_ROTATION,l.Y_AXIS_LABELS_SHOW,l.MAJOR_GRID_LINES_SHOW,l.MAJOR_GRID_LINES_COLOR,l.MAJOR_GRID_LINES_THICKNESS,l.MAJOR_GRID_LINES_STYLE,l.MINOR_GRID_LINES_SHOW,l.MINER_GRID_LINES_COLOR,l.MINER_GRID_LINES_THICKNESS,l.MINER_GRID_LINES_STYLE,l.X_AXIS_ORIGIN_LINE_SHOW,l.X_AXIS_ORIGIN_LINE_COLOR,l.X_AXIS_ORIGIN_LINE_STYLE,l.X_AXIS_ORIGIN_LINE_THICKNESS,l.Y_AXIS_ORIGIN_LINE_SHOW,l.Y_AXIS_ORIGIN_LINE_COLOR,l.Y_AXIS_ORIGIN_LINE_STYLE,l.Y_AXIS_ORIGIN_LINE_THICKNESS];var W=[AO.METRIC_SHAPES,AO.LOG_SCALE,AO.TREND_LINE_DEF,AO.TREND_BUBBLE_FORE_DEF,AO.REF_LINE_DEF,AO.AXIS_ORIGIN,AO.FORMATS_ON_COMBINATION,l.ALL_SHAPE_FORMAT,AO.METRIC_LEVEL_DATA_LABEL];var k={UNKNOW:-1,UPDATE_CHARTS:1,CHART_SCALE:2,SPLITTER_LINE_SCALE:3,UPDATE_ALL:4};var g=[l.ROW_TEXT_SHOW,l.ROW_HEADER_SHOW,l.ROW_VALUES_SHOW,l.COLUMN_TEXT_SHOW,l.COLUMN_HEADER_SHOW,l.COLUMN_VALUES_SHOW,l.ALL_ROW_COLUMN_SHOW,l.ROW_TEXT_TEXT_FONT_FAMILY,l.ROW_TEXT_TEXT_FONT_SIZE,l.ROW_TEXT_TEXT_FONT_STYLE,l.ROW_HEADER_TEXT_FONT_FAMILY,l.ROW_HEADER_TEXT_FONT_SIZE,l.ROW_HEADER_TEXT_FONT_STYLE,l.ROW_VAVLUE_TEXT_FONT_FAMILY,l.ROW_VAVLUE_TEXT_FONT_SIZE,l.ROW_VAVLUE_TEXT_FONT_STYLE,l.COLUMN_TEXT_TEXT_FONT_FAMILY,l.COLUMN_TEXT_TEXT_FONT_SIZE,l.COLUMN_TEXT_TEXT_FONT_STYLE,l.COLUMN_HEADER_TEXT_FONT_FAMILY,l.COLUMN_HEADER_TEXT_FONT_SIZE,l.COLUMN_HEADER_TEXT_FONT_STYLE,l.COLUMN_VAVLUE_TEXT_FONT_FAMILY,l.COLUMN_VAVLUE_TEXT_FONT_SIZE,l.COLUMN_VAVLUE_TEXT_FONT_STYLE,l.ALL_ROW_COLUMN_TEXT_FONT_FAMILY,l.ALL_ROW_COLUMN_TEXT_FONT_SIZE,l.ALL_ROW_COLUMN_TEXT_FONT_STYLE,l.V_MATRIX_LINES_SHOW,l.H_MATRIX_LINES_SHOW,l.ALL_MATRIX_LINES_SHOW,l.V_MATRIX_LINES_COMBINED_STYLE,l.H_MATRIX_LINES_COMBINED_STYLE,l.ALL_MATRIX_LINES_COMBINED_STYLE,l.X_AXIS_LINE_SHOW,l.X_AXIS_LINE_COMBINED_STYLE,l.Y_AXIS_LINE_SHOW,l.Y_AXIS_LINE_COMBINED_STYLE,l.ALL_AXIS_LINE_SHOW,l.ALL_AXIS_LINE_COMBINED_STYLE,l.ALL_LINE_SHOW,l.ALL_LINE_COMBINED_STYLE,l.X_AXIS_TITLE_SHOW,l.Y_AXIS_TITLE_SHOW,l.ALL_AXIS_TITLE_SHOW,l.X_AXIS_TITLE_CONTENT,l.Y_AXIS_TITLE_CONTENT,l.ALL_AXIS_TITLE_CONTENT,l.X_AXIS_LABELS_SHOW,l.Y_AXIS_LABELS_SHOW,l.ALL_AXIS_LABELS_SHOW,l.X_AXIS_LABELS_ROTATION,l.Y_AXIS_LABELS_ROTATION,l.ALL_AXIS_LABELS_ROTATION,l.X_AXIS_TITLE_FONT_FAMILY,l.X_AXIS_TITLE_FONT_STYLE,l.X_AXIS_TITLE_FONT_SIZE,l.Y_AXIS_TITLE_FONT_FAMILY,l.Y_AXIS_TITLE_FONT_STYLE,l.Y_AXIS_TITLE_FONT_SIZE,l.ALL_AXIS_TITLE_FONT_FAMILY,l.ALL_AXIS_TITLE_FONT_STYLE,l.ALL_AXIS_TITLE_FONT_SIZE,l.X_AXIS_LABELS_FONT_SIZE,l.X_AXIS_LABELS_FONT_FAMILY,l.X_AXIS_LABELS_FONT_STYLE,l.Y_AXIS_LABELS_FONT_SIZE,l.Y_AXIS_LABELS_FONT_FAMILY,l.Y_AXIS_LABELS_FONT_STYLE,l.ALL_AXIS_LABELS_FONT_SIZE,l.ALL_AXIS_LABELS_FONT_FAMILY,l.ALL_AXIS_LABELS_FONT_STYLE,l.ALL_TEXT_FONT_SIZE,l.ALL_TEXT_FONT_FAMILY,l.ALL_TEXT_FONT_STYLE,AO.AXIS_SCALE_DATA,AO.DATA_LABEL,AO.FIT_TO];var N=[l.X_AXIS_ORIGIN_LINE_SHOW,l.X_AXIS_ORIGIN_LINE_COMBINED_STYLE,l.Y_AXIS_ORIGIN_LINE_SHOW,l.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE,l.ALL_AXIS_ORIGIN_LINE_SHOW,l.ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE,AO.TREND_LINE_DEF,AO.REF_LINE_DEF,l.MODIFIED_DEF_FILL_COLOR,l.SHAPE_FILL_TRANSPARENCY,l.SHAPE_LINE_COMBINED_STYLE,l.SHAPE_BORDER_COLOR,l.SHAPE_BORDER_COMBINED_STYLE,l.LINE_MARKER_SHOW,l.LINE_MARKER_COLOR,l.REF_LABELS_FONT_FAMILY,l.REF_LABELS_FONT_STYLE,l.REF_LABELS_FONT_SIZE];var I=[AO.SCALE_CHART_WIDTH,AO.SCALE_CHART_HEIGHT];var C=[AO.SCALE_ROW_HEADERS,AO.SCALE_COL_HEADERS,AO.SCALE_Y,AO.SCALE_Y2,AO.SCALE_X,AO.SCALE_X2,AO.SCALE_V_EXTRA_LINE];var Aa=[l.ALL_TEXT_FONT_COLOR,l.ALL_TEXT_FONT_STYLE,l.ALL_AXIS_LABELS_FONT_COLOR,l.ALL_AXIS_LABELS_FONT_STYLE];var AX=[AO.BANDING,AO.AXIS_SCALE_DATA,AO.AXIS_ORIGIN,AO.MAX_SIZE_TYPE,AO.MAX_SIZE_VALUE,AO.MIN_SIZE_TYPE,AO.MIN_SIZE_VALUE];var An=[l.SHAPE_LINE_COMBINED_STYLE,l.SHAPE_BORDER_COMBINED_STYLE,l.SHAPE_FILL_TRANSPARENCY];function AE(Ar){var Aq=typeof Ar;if(Aq==="object"||Aq==="array"){return new AW({jsonObj:Ar,parent:undefined});}return Ar;}function AK(Aq){var As=1,Ar;if(Aq===AZ.NONE){Ar=Ao.LS_NONE;As=0;}else{if(Aq===AZ.DASHED){Ar=Ao.LS_DASH;}else{if(Aq===AZ.DOTTED){Ar=Ao.LS_DOT;}else{Ar=Ao.LS_SOLID;if(Aq===AZ.THICK){As=2;}}}}return{ceLnStyle:Ar,thk:As};}function AC(){var Aq={},Ar=this.getShowDataLabelOptions();Ar.forEach(function(As){Aq[As.key]=Ab;});return Aq;}function M(Aq){var At=this.getShowDataLabelOptions(),As=true,Ar;At.forEach(function(Au){Ar=Au.key;if(Ar!=="AllMetrics"){if(Aq[Ar]===undefined){Aq[Ar]=false;}if(Aq[Ar]===false){As=false;}}});Aq.AllMetrics=As;}function X(Aq){if(typeof Aq==="boolean"){return Aq===true?1:0;}return Aq;}function Ac(As,Ar){var Aq=AE({});Aq.setProperty(As,Ar,true);return Aq.jsonObj;}function AV(Av){var As={},Ax,Aq=Av.existing,Ar,Aw={},Ay={rfLnFntClr:true,rfLnFntFml:true,rfLnFntStyle:true,rfLnFntSz:true,trdRefLnClr:true,trdRefLnStyle:true,trdRefLnThk:true},Au={metricId:"metricId",trdTp:"lineType",trdLvl:"lineLevel",trdSeason:"seasonality",trdIncBB:"includeBreakby",trdEnabled:"enabled",dropzoneId:"dropzoneId",refTp:"lineType",refLvl:"lineLevel",refLbTp:"lineLabel",trdDgr:"lineConstant",refCstVl:"lineConstant",refEnabled:"enabled",modix:"lineIndex",trdFstEnabled:"enabled",trdBbForeEnabled:"enabled",trdBwdFst:"min",trdFwdFst:"max",trdBbForeBwd:"min",trdBbForeFwd:"max",subAxis:"subAxis",refLnName:"refLnName"};if(Av.trdRefLnCmbStyle!==undefined){var At=AK(Av.trdRefLnCmbStyle);Av.trdRefLnStyle=At.ceLnStyle;Av.trdRefLnThk=At.thk;}for(Ax in Av){if(Av.hasOwnProperty(Ax)){if(Ay[Ax]===true){if(Ax.indexOf(AN)>=0&&Aq){Aw[Ax]=Ac(Ax,Av[Ax]);}else{Aw[Ax]=X(Av[Ax]);}}else{Ar=Au[Ax];if(Ar!==undefined){As[Ar]=X(Av[Ax]);}}}}As.format=Ap.replaceSpecialChars(JSON.stringify(Aw));return As;}function AT(Ar,Ay,Ax){var A4=this.GMController,At=Ay.key.split(",")[0],A6=this.model.data,Av,A1,A5=Ar.jsonObj,A0=["existing","trdBwdFst","trdDgr","trdEnabled","trdFwdFst","trdIncBB","trdLvl","trdTp","refLvl","refTp","refEnabled","refCstVl"],A3,Az=false,A2,Au,As,Aq;if(A5.modix===undefined){return true;}A3=A5.modix-1;if(At.indexOf("Axis")>=0){A1=A6.dz[At[0]+"Axis"].mdls;}else{Av=A4.getMetricIndexFromID(At);A1=A6.gsi.mx[Av].mdls;}A2=A1.mod_c[A3];Au=A2.fms;if(Au===""||Au===undefined){Aq={};}else{As=Ap.restoreSpecialChars(Au);Aq=JSON.parse(As);}if(A5.trdRefLnCmbStyle!==undefined){var Aw=AK(A5.trdRefLnCmbStyle);A5.trdRefLnStyle=Aw.ceLnStyle;A5.trdRefLnThk=Aw.thk;Aq.trdRefLnStyle=A5.trdRefLnStyle;Aq.trdRefLnThk=Aw.thk;}Q.forEach(Ar.modifiedPropertyKeys,function(A7){if(A0.indexOf(A7)!==-1){Az=true;}var A8=A5[A7];if(Aq[A7]!==undefined){if(A7.indexOf(AN)>=0){Aq[A7]=Ac(A7,A8);}else{Aq[A7]=X(A8);}}if(A7===AO.REF_LINE_NAME){A2.lin=A8;}});A2.fms=Ap.replaceSpecialChars(JSON.stringify(Aq));if(!Ax){A2.la=A5.refLbTp;}return Az;}function AI(Au){var Aw=this.GMController[AO.REF_LINE_DEF],Ar=Au.key.split(","),Aq=Ar[0],Ay=Ar[1],As=Aw[Aq]||{},Ax=r[Ay],Av=As[Ax],At;Q.forEach(Av,function(Az){if(Az.modix===Au.modix){At=Az;return false;}});return At;}function AL(Ar,Au,Av){var Aw=Au.modifiedPropertyKeys,Ax=Au.jsonObj,Aq=Aw.length,At,As;for(At=0;At<Aq;At++){As=Aw[At];if(Ax[As]==="default"){delete Ar[As];delete Ar[As+AQ];continue;}Ar[As]=Ax[As];if(Av!==true){Ar[As+AQ]=Ax[As+AQ];}}return Ar;}function j(As){var Ar,At,Aq=[AO.TREND_SEASONALITY,AO.TREND_FORECAST_ENABLED,AO.TREND_BWD_FORECAST,AO.TREND_FWD_FORECAST];for(Ar=0,At=As.length;Ar<At;Ar++){if(Aq.indexOf(As[Ar])>=0){return true;}}return false;}function Ad(As){var Aq=typeof As,Ar;if(Aq==="number"||Aq==="string"){Ar=mstrmojo.gm.ShapeFillType.Solid;}else{Ar=mstrmojo.gm.ShapeFillType.Gradient;}return Ar;}function U(Ar,Aq){if(typeof Aq==="object"&&Ar.indexOf(AN)>=0){return Aq[Ar];}return Aq;}function AM(Ar,At,As,Aq){if(!Aq&&Ar.indexOf(AN)>=0){At=Ac(Ar,At);}if(As===undefined){var Av=AD[Ar];if(Av){this.setWidgetPropertyValue(Av,Ad(At));}this.setWidgetPropertyValue(Ar,(At&&At.jsonObj)||At);}else{var Au=this.getWidgetPropertyValue(Ar);if(Au===undefined){Au={};}Au[As.key]=(At&&At.jsonObj)||At;this.setWidgetPropertyValue(Ar,Au);}}function V(Au,Ar,Aq){if(this.noData){return ;}var Aw,Av,Ay=this,A0,At,As,Ax,A1=false,Az=this.GMController,A2;if(Au===AO.METRIC_SHAPES){A0=Ar.modifiedPropertyKeys[0];Av={key:A0};Aw=this.readGlobalProperty(AO.TREND_LINE_DEF,Av);if(Aw.jsonObj[AO.TREND_ENABLED]){At=Az.getMetricIndexFromID(A0);As=Ap.isTrendLineAvailableForMetric(this,At);Ax=Ap.isTrendLineAvailableForMetric(this,At,Ar.jsonObj[A0]);if(As!==Ax){A1=true;}}}else{if(Au===AO.SHAPE){if(Aq.isABL&&Aq.dirc===Al.EnumABLDirection.HORIZONTAL){A2=Az.getMetricsOnXAxis();}else{if(Aq.isBubbleOrScatter||(Aq.isABL&&Aq.dirc===Al.EnumABLDirection.VERTICAL)){A2=Az.getMetricsOnYAxis();}}Q.forEach(A2,function(A3){A0=Az.model.getMetricIDsFromIndex([A3])[0];Av={key:A0};Aw=Ay.readGlobalProperty(AO.TREND_LINE_DEF,Av);if(Aw.jsonObj[AO.TREND_ENABLED]){As=Ap.isTrendLineAvailableForMetric(Ay,A3);Ax=Ap.isTrendLineAvailableForMetric(Ay,A3,Ar);if(As!==Ax){A1=true;return false;}}});}}return A1;}function Ae(Ar,At,Av){if(this.noData){return false;}if(this.skipSuppressDataCheck){return false;}if(D.indexOf(Ar)>=0){return true;}if(V.call(this,Ar,At,Av)){return true;}if(Ar===AO.SHAPE){var Aq=this.readGlobalProperty(Ar),As=this.GMController,Au;if(As.getUnitsCountInSliceBy()>0&&(T.PIE===Aq||T.RING===Aq)){return true;}Au=this.readGlobalProperty(AO.SUB_TYPE);if((T.AREA===Aq||T.AREA===At)&&Au===Aj.AUTO){return true;}}return false;}function AJ(Aw,Au){var Av=this.GMController,Ax=this.getChartInfo();Au.puFiltersConfig={};if(Av.showMetricSortIcon){var At=this.getWidgetPropertyValue(AO.SORT_INDEX),Ar=this.getWidgetPropertyValue(AO.SORT_ORDER),As=(Aw===Aj.STACKED||Aw===Aj.PERCENT||(Aw===Aj.AUTO&&Ax.tp===H.AREA)),Aq=Av.getUpdateMetricSortAction(At,Ar,As);Au.actions.push(Aq);}}function Ah(Ar,Aq){Ar=parseInt(Ar,10);if(Aq===Ao.LS_NONE||Ar===0){return AZ.NONE;}if(Aq===Ao.LS_DASH){return AZ.DASHED;}if(Aq===Ao.LS_DOT){return AZ.DOTTED;}if(Aq===Ao.LS_SOLID){if(Ar===1){return AZ.THIN;}return AZ.THICK;}}function Af(As,Ar){var Aq={};if(Ar){Q.forEach(As,function(At){if(At===AO.TREND_REF_LINE_COMBINED_STYLE){Aq[AO.TREND_REF_LINE_THICKNESS]=Ar[AO.TREND_REF_LINE_THICKNESS];Aq[AO.TREND_REF_LINE_STYLE]=Ar[AO.TREND_REF_LINE_STYLE];Aq[AO.TREND_REF_LINE_COMBINED_STYLE]=Ah(Ar[AO.TREND_REF_LINE_THICKNESS],Ar[AO.TREND_REF_LINE_STYLE]);}else{Aq[At]=Ar[At];}});}return Aq;}function x(At,Az,Av){var BA,Aw,Ay,A9,A8=this.GMController,Ax=this.model.data.dz.visProp.fmt.allShpFmt,A0,As=A8.getDefaultsForShape(A8.getChartInfo().shape),Au=[];if(At===K.ALL_SHAPE){Au.push(As);Aw=l.ALL_SHAPE_FORMAT;Ay=this.getWidgetPropertyValue(Aw);Au.push(Ay);}else{if(At===K.COLOR_BY){Q.forEach(Av,function(BB){Au.push(As);A0=A8.getShapeFormatsWithCombination(BB);if(A0){Au.push(A0);}else{Au.push(Ap.stringToJSON(Ax));}});}else{if(At===K.METRIC){Q.forEach(Av,function(BB){Au.push(As);Au.push(A8.getShapeFormatsWithCombination(BB));});}else{if(At===K.ITSELF){Q.forEach(Az,function(BB){if(BB.isPie){Au.push(BB.sPieDP.getFormattingProperties(BB.sliceIdx));}else{A9=BB.getGraphCell();Au.push(A9.getFormattingProperties());}});}}}}BA=Ap.getResolvedFormatsObject(Au);var A1=BA.shpFillClr,A7;if(BA===As){A7=A8.getVolatileDefaultsForShape(A8.getChartInfo().shape);}else{A7=BA;}if(A1!==undefined){A7[l.SHAPE_LINE_COLOR]=A7[l.SHAPE_FILL_COLOR]=A1;}var A4=false,A3=false,Aq=false,A5,A2;var Ar=[],A6;Q.forEach(Au,function(BB){if(BB!==undefined){Ar.push(BB);}});A6=Ar.length;for(A5=0;A5<A6;A5++){A2=Ar[A5];if(A2[l.LINE_MARKER_COLOR]!==undefined){Aq=true;}if(A2[l.LINE_MARKER_BORDER_COLOR]!==undefined){A3=true;}if(A2[l.SHAPE_BORDER_COLOR]!==undefined){A4=true;}}if(!Aq){delete A7[l.LINE_MARKER_COLOR];}if(!A3){delete A7[l.LINE_MARKER_BORDER_COLOR];}if(!A4){delete A7[l.SHAPE_BORDER_COLOR];}return A7;}function AA(Aq){[l.SHAPE_LINE_COMBINED_STYLE,l.SHAPE_BORDER_COMBINED_STYLE].forEach(function(Ar){var Au=Ar.replace("CmbStyle","Thk"),At=Ar.replace("CmbStyle","Style"),As=Aq[Au],Av=Aq[At];if(As!==undefined&&Av!==undefined){Aq[Ar]=Ah(As,Av);}});}function v(Ar,Aq){if(!Ar){return ;}Q.forEach(An,function(As){if(Ar[As]!==undefined){if(Aq[As]===undefined){Aq[As]=[];}Aq[As].push({val:Ar[As],tmsp:Ar[As+AQ]});}});}function AS(Aw,As){var Ar,Aq,Av,Au,At;Q.forEach(An,function(Ax){Ar=Aw[Ax];Aq=As[Ax+AQ];Av=false;At=false;Au=undefined;Q.forEach(Ar,function(Ay){if(Aq!==undefined&&Ay.tmsp!==undefined&&Ay.tmsp>Aq){Av=true;}if(Au===undefined){Au=Ay.val;}else{if(Au!==Ay.val){At=true;}}});if(Aq===undefined||Av){if(At){As[Ax]=undefined;}else{if(Au!==undefined){As[Ax]=Au;}}}});}function s(Aq,As){var Ar;Q.forEach(As,function(At){Ar=false;Q.forEach(Aq,function(Au){if(Au.tp===4&&Au.eid===At.eid){Ar=true;return false;}});if(!Ar){return false;}});return true;}function z(Au,Ar,Aq){var As=[],At=Ap.reverseMapping(Ar);Q.forEach(Au,function(Av){if(Av.tid===-1){if(Aq){As.push(Av);}}else{if(At[Av.tid]!==undefined){As.push(Av);}}});return As;}function R(As,Ar,Aq){var Au={},At=[];As.forEach(function(Aw){var Av=z(Aw,Ar,Aq),Ax=Ap.serializeCombination(Av);if(Au[Ax]===undefined){Au[Ax]=true;At.push(Av);}});return At;}function G(){var Aq=this.model.data||{},Ar=F.getPropertyByPath(Aq,"gts.row",[]),At=F.getPropertyByPath(Aq,"gts.col",[]),As=Ar.concat(At);return As;}function AG(Aq){if(!Aq||Aq.length<=0){return undefined;}var Ar,As=true,At=Aq.length;if(At===1){return Aq[0];}for(Ar=1;Ar<At;Ar++){if(Aq[Ar]!==Aq[Ar-1]){As=false;break;}}if(As){return Aq[0];}return undefined;}function P(Au,Ar,At,As){var Aw,Av,Aq={};["jsonObj","modifiedPropertyKeys","opt"].forEach(function(Ax){if(Au.hasOwnProperty(Ax)){Aq[Ax]=Y.clone(Au[Ax]);}});Aw=Aq.jsonObj;if(At){for(Av in Ar){if(Ar.hasOwnProperty(Av)){Aw[Av]=Ar[Av];}}}else{Q.forEach(As||Aq.modifiedPropertyKeys,function(Ax){if(Ar.hasOwnProperty(Ax)){Aw[Ax]=Ar[Ax];}});}return Aq;}function E(Av,At,Aw,As){var Ar,Au,Aq=[];for(Ar in Aw){if(((As&&Ar==="AllMetrics")||(!As&&Ar!=="AllMetrics"))&&Aw.hasOwnProperty(Ar)){Au={};Au.modifiedPropertyKeys=Y.clone(At);Au.jsonObj=Y.clone(Aw[Ar]);Aq.push({name:Av,value:Au,option:{key:Ar}});}}return Aq;}function a(Aq,Ar){return Aq===AO.REF_LINE_DEF&&Ar[S].modifiedPropertyKeys[0]===AO.REF_LINE_NAME;}function d(){return{suppressData:true,needRefresh:true,actions:[],undoRedoCallback:undefined};}function e(Av,Ar,Az){var Au,As=Az.length,Aq,At,Ax,Aw,Ay;if(Av===AO.REF_LINE_DEF||Av===AO.TREND_LINE_DEF){Av=Ar.modifiedPropertyKeys[0];Ay=Av;if(Av===l.REF_LABELS_FONT_COLOR||Av===AO.TREND_REF_LINE_COLOR){return false;}if(Av===AO.TREND_REF_LINE_COMBINED_STYLE){Ay=AO.TREND_REF_LINE_THICKNESS;}if(!Ar.jsonObj.fmt){return true;}Az=[];Az.push(Ar.jsonObj.fmt[Ay]);As=Az.length;Ar=Ar.jsonObj[Ay];}if(As<=0){return true;}if(Av.indexOf("FntStyle")>=0){Ax=Ar&1;Aw=Ar&2;for(Au=0;Au<As;Au++){Aq=Az[Au];if(typeof Aq==="object"){Aq=Aq[Av];}if((Ax!==(Aq&1))||(Aw!==(Aq&2))){return true;}}return false;}if(Av.indexOf("LnCmbStyle")>=0){if(Ay===l.TREND_REF_LINE_THICKNESS){At=Ar;}else{At=AK(Ar).thk;}for(Au=0;Au<As;Au++){if((At!==2&&Az[Au]===2)||(At===2&&Az[Au]!==2)){return true;}}return false;}return true;}mstrmojo.gm._GMPropertyHandler=mstrmojo.provide("mstrmojo.gm._GMPropertyHandler",{scriptClass:"mstrmojo.gm._GMPropertyHandler",getWidgetPropertyDefaultValue:function(Ar,Aq){return this.property.readItemDefault(Ar,Aq);},getWidgetPropertyValue:function(Aq){return this.property.readItem(Aq);},setWidgetPropertyValue:function(Ar,Aq){if(Ar===l.V_MATRIX_LINES_SHOW||Ar===l.H_MATRIX_LINES_SHOW){this.property.removeItem(AO.MATRIX_LINES);}if(Ar===l.X_AXIS_LINE_SHOW||Ar===l.Y_AXIS_LINE_SHOW){this.property.removeItem(AO.AXES);}this.property.updateItem(Ar,Aq);},removeWidgetProperty:function(Aq){this.property.removeItem(Aq);},getWidgetProps:function(){return this.property.generalProps;},isXMLDirty:function(){return this.property.isXMLDirty();},resetXMLDirtyFlag:function(){this.property.resetXMLDirtyFlag();},readGlobalProperty:function(A1,A0){if(A1.indexOf("CmbStyle")!==-1){var A3=A1.replace("CmbStyle","Thk"),A5=A1.replace("CmbStyle","Style"),Ay=this.readGlobalProperty(A3,A0),BB=this.readGlobalProperty(A5,A0);if(Ay===undefined||BB===undefined){return undefined;}return Ah(Ay,BB);}if(A1===AO.TREND_BUBBLE_MAX||A1===AO.TREND_BUBBLE_MIN){var A8=this.getGlobalExtremeForAxisOrMetric(A0.key,A0.sizeBy);if(A1===AO.TREND_BUBBLE_MAX){return A8.max;}return A8.min;}if(A1===l.COLOR_SQUARE_COLOR){var A7=this.colorSqureIdentity;if(A7){return{color:A7.decodedColor,isDefaultColor:A7.isDefaultColor};}return{color:"#0000FF",isDefaultColor:true};}if(A1===AO.TREND_LINE_DEF){var Aq=this.GMController.trConfigPool||{},Az,At;if(A0===undefined){return AE.call(this,Aq.globalProp||{});}Az=Y.clone(Aq[A0.key]);At=this.makeDefaultsObjectAtOption(A1);Y.copy(Az,At);At.trdRefLnCmbStyle=Ah(At.trdRefLnThk,At.trdRefLnStyle);return AE.call(this,At);}if(A1===AO.TREND_BUBBLE_FORE_DEF){var A2=this.GMController[AO.TREND_BUBBLE_FORE_DEF],Av=A2[A0.key],BF=this.makeDefaultsObjectAtOption(A1);Y.copy(Av,BF);return AE.call(this,BF);}if(A1===AO.REF_LINE_DEF){var A6=AI.call(this,A0),BA=this.makeDefaultsObjectAtOption(A1);Y.copy(A6,BA);BA.trdRefLnCmbStyle=Ah(BA.trdRefLnThk,BA.trdRefLnStyle);return AE.call(this,BA);}if(A1===AO.AXIS_SCALE_DATA){var Ax,Au;Ax=this.getWidgetPropertyValue(A1);Au=L.createAxisScaleCollectionFromArrays(Ax);if(A0===undefined){return AE.call(this,Au);}return AE.call(this,Au[A0.key]);}if(A1===AO.METRIC_LEVEL_DATA_LABEL){var Ar=this.getWidgetPropertyValue(AO.METRIC_LEVEL_DATA_LABEL);if(!Ar){Ar=AC.call(this);}else{M.call(this,Ar);}if(!A0){return new AW({jsonObj:Ar,parent:undefined});}if(Ar[A0.key]!==undefined){return Ar[A0.key];}return this.makeDefaultsObjectAtOption(A1);}if(A1===AO.AXIS_ORIGIN){var A9=this.getWidgetPropertyValue(AO.AXIS_ORIGIN);if(!A9){A9=this.createAxisOriginObject();}if(!A0){return new AW({jsonObj:A9,parent:undefined});}if(A9[A0.key]!==undefined){return new AW({jsonObj:A9[A0.key],parent:undefined});}return new AW({jsonObj:this.makeDefaultsObjectAtOption(A1),parent:undefined});}if(A1===l.LINE_MARKER_COLOR){var Aw={},BD=this.GMController,A4=BD&&BD.colorByInfo,As=A4&&A4.tp,BE=this.getWidgetPropertyValue(l.LINE_MARKER_COLOR),BC;if(BE===undefined){if(As===n.NULL){BC=BD.getVolatileDefaultsForShape(BD.getChartInfo().shape);}Aw[l.LINE_MARKER_COLOR]=BC&&BC[l.SHAPE_FILL_COLOR];Aw[l.LINE_MARKER_COLOR+f]=true;}else{Aw[l.LINE_MARKER_COLOR]=BE;Aw[l.LINE_MARKER_COLOR+f]=false;}return AE(Aw);}return this.readPropertiesUniformly(A1,A0);},readPropertiesUniformly:function(Au,Av){var Aw,At,As,Aq,Ax,Ay,Ar=J.getUnderlyingPropertyNameWithAll(Au);Aw=Ar.length;if(Aw>1){As=this.getWidgetPropertyValue(Ar[0]);for(At=1;At<Aw;At++){Aq=U(Ar[At],this.getWidgetPropertyValue(Ar[At]));if(Aq!==As){if(Au===l.ALL_GRID_LINES_SHOW){if(As===p.SHOW&&Aq===p.HIDE){return p.SHOW_MAJOR_ONLY;}}return undefined;}}return As;}Ax=this.getWidgetPropertyValue(Au);if(Av!==undefined){if(Ax!==undefined){Ay=Ax[Av.key];if(Ay!==undefined){return new AW({jsonObj:Ay,parent:undefined});}Ay=this.makeDefaultsObjectAtOption(Au);}else{Ay=this.makeDefaultsObjectAtOption(Au);}return AE(Ay);}if(Ax!==undefined){return AE(Ax);}if(W.indexOf(Au)>=0){return new AW({jsonObj:{},parent:undefined});}return undefined;},writeGlobalProperty:function AP(Av,Aw,Ar,Au,Aq){var As=this,Ax,At=d();As.GMController.clearShapeFormatsCache();if(Av!==""&&Av!==undefined){if(this.syning){return ;}if(Av===l.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorByMap([this.colorSqureIdentity.comb],Aw);}return ;}if(Av.indexOf("CmbStyle")!==-1){At=this.processCombineLineStyle(Av,Aw,Ar);}else{if(Av===AO.TREND_LINE_DEF){At=this.processTrendLine(Av,Aw,Ar);}else{if(Av===AO.REF_LINE_DEF){At=this.processReferenceLine(Av,Aw,Ar);}else{if(Av===AO.TREND_BUBBLE_FORE_DEF){At=this.processTrendLineForcast(Av,Aw,Ar,Au);}else{if(Av===AO.AXIS_SCALE_DATA){At=this.processAxisScale(Av,Aw,Ar,Au);}else{if(Av===AO.METRIC_LEVEL_DATA_LABEL){At=this.processMetricLevelDataLabel(Av,Aw,Ar);}else{if(Av===AO.AXIS_ORIGIN){At=this.processAxisOrigin(Av,Aw,Ar);}else{if(Av===l.ALL_GRID_LINES_SHOW){At=this.processGridLineShow(Av,Aw);}else{if(Av===l.LINE_MARKER_COLOR){At=this.processLineMarkColor(Av,Aw);}else{At=this.processPropertiesUniformly(Av,Aw,Ar,Aq);}}}}}}}}}}if(Au){return ;}Ax=this.getPropertyUpdateCallback(Av,Aw,Ar,Aq,At.suppressData);if(At.suppressData){As.partialUpdate(Av,{allVal:Aw},At.needRefresh,Ar);if(Ax.success){Ax.success();}}this.submitUpdatesAndPersistXML(At.actions,Ax,At.undoRedoCallback,At.suppressData,false,At.puFiltersConfig);},getRaiseEventCallback:function(At,Au,Ar,Aq){var As=this.id;return{success:function(){var Av=h.all[As];Av.syning=true;if(At===l.MODIFIED_DEF_FILL_COLOR){Av.raiseEventShapeFormattingChanged(l.SHAPE_FILL_COLOR);}else{Av.raiseEventGlobalPropertyChanged(At,Au,Ar||{});}if(Aq){Aq.forEach(function(Aw){Av.raiseEventGlobalPropertyChanged(Aw.name,Aw.value,Aw.option);});}Q.forEach(J.propertyMap[At],function(Aw){Av.raiseEventGlobalPropertyChanged(Aw,Av.readGlobalProperty(Aw,Ar),Ar||{});});Av.syning=false;}};},getPropertyUpdateCallback:function(Av,As,Aw,Au,Aq){var Ax=false,Ar,Ay={},At;if(Av===AO.SHAPE||Av===AO.METRIC_SHAPES||Av===AO.SUB_TYPE||Av===l.TOTAL_SHOW||Av===l.INT_SUM_SHOW||Av===AO.SHOW_BOTH_TOTALS){Ax=true;}if(!Ax){At=this.getRaiseEventCallback(Av,As,Aw,Au);Am(At,Ay);}if(!Aq){if(Ax){Am(this.getXTabRefreshCallBack(),Ay);}else{Am(this.getDocModelSliceCallback(),Ay);}}else{if(Ax){Ar=this.zonesModel.getUpdateCallback();Am(Ar,Ay);}}return Ay;},processCombineLineStyle:function(As,Aq,Au){var Ax=this,At=this.id,Av=d(),Ay=this.readGlobalProperty(As,Au),Az=[],Aw,Ar=function(A5,A4){var A3=As.replace("CmbStyle","Thk"),A1=As.replace("CmbStyle","Style"),A2=AK(A4),A0=A2.thk,A6=A2.ceLnStyle;A5.writeGlobalProperty(A3,A0,Au,true);A5.writeGlobalProperty(A1,A6,Au,true);};J.getUnderlyingPropertyNameWithAll(As.replace("CmbStyle","Thk")).forEach(function(A0){Az.push(Ax.getWidgetPropertyValue(A0));});Ar(this,Aq);Av.needRefresh=e(As,Aq,Az);Aw=Av.needRefresh;Av.undoRedoCallback={undo:function(){var A0=h.all[At];Ar(A0,Ay);A0.doUpdateOnUndoRedo(As,Ay,{allVal:Ay},Aw,Au,undefined);},redo:function(){var A0=h.all[At];Ar(A0,Aq);A0.doUpdateOnUndoRedo(As,Aq,{allVal:Aq},Aw,Au,undefined);}};return Av;},processTrendLine:function(Av,At,Aw){var A4,A2,A3,Ax,A0=this,Az=d(),As=At.modifiedPropertyKeys,Aq=false,Au=false,Ay=this.GMController.trConfigPool,Ar=this.getChartInfo(),A1=Ar.isABL;if(Aw===undefined){Az.suppressData=false;A4=At.jsonObj;As.forEach(function(A5){if(A5===AO.TREND_SEASONALITY){Aq=true;}else{Au=true;}});for(A2 in Ay){if(A2.length===32&&Ay.hasOwnProperty(A2)){A3=Ay[A2];if(A3.existing&&(Aq||Au)){A0.collectABLForecastActions(A4,A2,Az.actions);}}}}else{A3=At.jsonObj;if(A1){A4=this.readGlobalProperty(Av,undefined).jsonObj;}else{A4=undefined;}Ax=Af(As,A3.fmt);Az.suppressData=!AT.call(A0,At,Aw,true);A0.collectTrendLineAction(A3,Az.actions,Aw.key);this.checkCustomScaleNotificationForTrendLine(Aw.key);if(A1){if(j(As)){A0.collectABLForecastActions(A4,Aw.key,Az.actions);}if(As[0]===AO.TREND_TYPE&&this.isSeasonalityEnabled()&&(A3[AO.TREND_TYPE]===Al.EnumTrendLineModelType.LOG||A3[AO.TREND_TYPE]===Al.EnumTrendLineModelType.POW)){this.trendSeasonalityError=true;}}Az.needRefresh=e(Av,At,[]);this.getUndoRedoCallBackForTrdRefLine(Az,Av,At,Ax,Az.needRefresh,Aw,true);}return Az;},getPartialUpdateFilterConfigForRefLine:function(){return{data:{include:{dz:true,gsi:true,ghs:true,trendref:true,extrs:true}}};},processReferenceLine:function(Av,Aq,Aw){var Az=this,Ax,Ay=d(),A1=this.GMController,Ar=Aq.modifiedPropertyKeys,A0=Aq.jsonObj,Au=false,At=Aw.key.split(","),As=At[0],A2=At[1];if(Ar[0]===AO.REF_CONST_VALUE){Aq.setProperty(AO.REF_ENABLED,true);}if(Ar.indexOf(AO.REF_SHOW_LABEL)>=0){Au=true;}if(Ar.indexOf(AO.REF_ENABLED)>=0&&Aq.jsonObj[AO.REF_ENABLED]){Au=true;}if(Au){if(A0[AO.REF_SHOW_LABEL]){if(A0[AO.REF_LABEL_TYPE]<=0){Aq.setProperty(AO.REF_LABEL_TYPE,AH.DssModelLabelsType);}}else{Aq.setProperty(AO.REF_LABEL_TYPE,AH.DssModelLabelsNone);}}Ax=Af(Ar,AI.call(this,Aw));Ay.puFiltersConfig=this.getPartialUpdateFilterConfigForRefLine();if(A1.isStacked&&!A1.splitPlottingMetrics){A0.dropzoneId=(As==="YAxis"||As==="Y2Axis")?4:3;A0.subAxis=As.search("2")>=0?1:0;}else{A0.metricId=As;}A0[AO.REF_TYPE]=r[A2];if(A0[AO.REF_ENABLED]===false&&Ar.indexOf(AO.REF_ENABLED)>=0){Ay.suppressData=false;Az.collectRemoveRefLineAction(A0,Ay.actions);}else{Ay.suppressData=!AT.call(Az,Aq,Aw,false);if(A1.isStacked&&!A1.splitPlottingMetrics){As=undefined;}Az.collectRefLineAction(A0,Ay.actions,As);}Ay.needRefresh=e(Av,Aq,[]);this.getUndoRedoCallBackForTrdRefLine(Ay,Av,Aq,Ax,Ay.needRefresh,Aw,false);return Ay;},processTrendLineForcast:function(Av,Ax,At,Au){var Ar=d(),Aw=this.GMController;Ar.suppressData=false;if(Au){AL((Aw[AO.TREND_BUBBLE_FORE_DEF])[At.key],Ax,true);}var As=Ax.jsonObj,Aq=AV(As);if(typeof Aq.max==="number"){Aq.max=String(Aq.max);}if(typeof Aq.min==="number"){Aq.min=String(Aq.min);}Aq.metricId=At.key;Ar.actions.push(this.getUpdateForecastInfoAction(Aq));return Ar;},generateUndoRedoConfigForAxisConfig:function(Ax,At,Ay,Aw,Ar){var A0,Aq,Av={},Az=Aw?this.undoPropValConfig:this.redoPropValConfig,As=this.undoPropValConfig.modifiedKeys,Au=Az[Ax];Av[Ax]=Ar?L.serializeCollection2String(Au):Au;if(Az.hasOwnProperty(AO.AXIS_SCALE)){Av[AO.AXIS_SCALE]=Az[AO.AXIS_SCALE];}Aq=E(Ax,As,Au,Ay.key!=="AllMetrics");if(Aw){A0=P(At,Au[Ay.key],false,As);return{undoPropValConfig:Av,associatedOptionsForUndo:Aq,undoValue:A0};}delete this.undoPropValConfig;delete this.redoPropValConfig;return{redoPropValConfig:Av,associatedOptionsForRedo:Aq,redoValue:At};},updateUndoRedoConfigForAxisConfig:function(Ar,Av,Au,As){if(!this.undoPropValConfig){this.undoPropValConfig={modifiedKeys:[]};}if(!this.redoPropValConfig){this.redoPropValConfig={};}var Aq=Ar?this.undoPropValConfig:this.redoPropValConfig,At=function(Ax,Ay){var Aw;if(Q.isArray(Ay)){Aw=Ax[Av];Q.forEach(Ay,function(Az){if(Aw.indexOf(Az)<0){Aw.push(Az);}});}else{if(typeof Ay==="object"){Aw=Y.clone(Ay);}else{Aw=Ay;}}Ax[Av]=Aw;};if(As||!Aq.hasOwnProperty(Av)){At(Aq,Au);}},processAxisScale:function(Ax,At,Ay,A1){var A3,A2,Aw,Az,Au,As,A0=d(),Ar=At.modifiedPropertyKeys;A2=this.getWidgetPropertyValue(Ax);Aw=L.createAxisScaleCollectionFromArrays(A2);this.updateUndoRedoConfigForAxisConfig(true,Ax,Aw);if(At.jsonObj.scaleType!==q.CUSTOM&&Ar[0]!==AO.LOG_SCALE){A0.suppressData=false;A0.puFiltersConfig={data:{include:{extrs:true}}};}if(Ar[0]!==AO.LOG_SCALE){this.updateUndoRedoConfigForAxisConfig(true,AO.AXIS_SCALE,this.getWidgetPropertyValue(AO.AXIS_SCALE));this.setWidgetPropertyValue(AO.AXIS_SCALE,q.CUSTOM);this.updateUndoRedoConfigForAxisConfig(false,AO.AXIS_SCALE,q.CUSTOM,true);}else{this.logScaleChanged=true;}if(Ar[0]===AO.SINGLE_AXIS_SCALE_TYPE&&At.jsonObj[AO.SINGLE_AXIS_SCALE_TYPE]!==q.CUSTOM){At.setProperty(AO.AXIS_SCALE_MANUAL_MIN,At.jsonObj[AO.AXIS_SCALE_REAL_MIN]);At.setProperty(AO.AXIS_SCALE_MANUAL_MAX,At.jsonObj[AO.AXIS_SCALE_REAL_MAX]);At.setProperty(AO.AXIS_SCALE_AUTO_MIN,false);At.setProperty(AO.AXIS_SCALE_AUTO_MAX,false);}if(Ay.key==="AllMetrics"){var Aq=[AO.AXIS_SCALE_AUTO_MIN,AO.AXIS_SCALE_AUTO_MAX,AO.AXIS_SCALE_MANUAL_MIN,AO.AXIS_SCALE_MANUAL_MAX,AO.SINGLE_AXIS_SCALE_TYPE];var Av=Aq.indexOf(Ar[0]);if(Av>=0){Q.forEach(Aq,function(A4){if(Ar.indexOf(A4)<0){Ar.push(A4);}});}for(A3 in Aw){if(A3!=="AllMetrics"&&Aw.hasOwnProperty(A3)){AL(Aw[A3],At,true);}}}else{AL(Aw[Ay.key],At,true);}delete Aw.AllMetrics;Az=L.serializeCollection2String(Aw);this.setWidgetPropertyValue(AO.AXIS_SCALE_DATA,Az);if(!A0.suppressData){this.setWidgetPropertyValue("axScaleModified",1);}this.updateUndoRedoConfigForAxisConfig(true,"modifiedKeys",Ar,true);this.updateUndoRedoConfigForAxisConfig(false,Ax,Aw,true);if(!A1){Au=this.generateUndoRedoConfigForAxisConfig(Ax,At,Ay,true,true);As=this.generateUndoRedoConfigForAxisConfig(Ax,At,Ay,false,true);this.getUndoRedoCallBackForAxisConfig(A0,Ax,Au,As,true,Ay);}return A0;},processMetricLevelDataLabel:function(At,Ar,Av){var Ay=d(),Az,Au=this.id,A1=true,A0=this.readGlobalProperty(At),Aw=A0.jsonObj,Aq=Aw[Av.key],As,Ax=Y.clone(Aw);if(Av.key==="AllMetrics"){for(Az in Aw){if(Aw.hasOwnProperty(Az)){Aw[Az]=Ar;}}}else{Aw[Av.key]=Ar;for(Az in Aw){if(Az!=="AllMetrics"&&Aw.hasOwnProperty(Az)){if(Aw[Az]===false){A1=false;}}}if(Aw.AllMetrics!==undefined){Aw.AllMetrics=A1;}}this.setWidgetPropertyValue(At,Aw);As=Aw;Ay.undoRedoCallback={undo:function(){var A2=h.all[Au];A2.setWidgetPropertyValue(At,Ax);A2.doUpdateOnUndoRedo(At,Aq,{allVal:Aq},true,Av,undefined);},redo:function(){var A2=h.all[Au];A2.setWidgetPropertyValue(At,As);A2.doUpdateOnUndoRedo(At,Ar,{allVal:Ar},true,Av,undefined);}};return Ay;},processAxisOrigin:function(Au,Aq,Av){var A1,At,As,Aw=d(),Ar=Aq.modifiedPropertyKeys,A0=this.readGlobalProperty(Au),Ay=A0.jsonObj,Ax=true,Az=null;if(Ar[0]===AO.AXIS_ORIGIN_AUTO&&Aq.jsonObj[AO.AXIS_ORIGIN_AUTO]===true){Aq.jsonObj[AO.AXIS_ORIGIN_VALUE]=0;Ar.push(AO.AXIS_ORIGIN_VALUE);}this.updateUndoRedoConfigForAxisConfig(true,Au,Ay);if(Av.key==="AllMetrics"){if(Ar[0]===AO.AXIS_ORIGIN_VALUE){Ar.push(AO.AXIS_ORIGIN_AUTO);}for(A1 in Ay){if(Ay.hasOwnProperty(A1)){AL(Ay[A1],Aq);}}if(Ay.AllMetrics===undefined){Ay.AllMetrics=Y.copy(Aq.jsonObj);}}else{AL(Ay[Av.key],Aq);Y.forEach(Ay,function(A2,A3){if(A3!=="AllMetrics"){Ax=Ax&&A2.axOriAuto;if(Az===null){Az=A2.axOriValue;}else{if(Az!==undefined){if(Az!==A2.axOriValue){Az=undefined;}}}}});Ay.AllMetrics={axOriAuto:Ax,axOriValue:Az};}this.setWidgetPropertyValue(Au,Ay);this.setWidgetPropertyValue(l.X_AXIS_ORIGIN_LINE_SHOW,!Aq.jsonObj[AO.AXIS_ORIGIN_AUTO]);this.setWidgetPropertyValue(l.Y_AXIS_ORIGIN_LINE_SHOW,!Aq.jsonObj[AO.AXIS_ORIGIN_AUTO]);this.updateUndoRedoConfigForAxisConfig(true,"modifiedKeys",Ar,true);this.updateUndoRedoConfigForAxisConfig(false,Au,Ay,true);At=this.generateUndoRedoConfigForAxisConfig(Au,Aq,Av,true,false);As=this.generateUndoRedoConfigForAxisConfig(Au,Aq,Av,false,false);this.getUndoRedoCallBackForAxisConfig(Aw,Au,At,As,true,Av);return Aw;},processGridLineShow:function(At,Au){var Aq=d(),As=this.id,Av=this.readGlobalProperty(At),Ar=function(Ay,Az){var Ax=Az,Aw=Az;if(Az===p.SHOW_MAJOR_ONLY){Ax=p.SHOW;Aw=p.HIDE;}Ay.setWidgetPropertyValue(l.MAJOR_GRID_LINES_SHOW,Ax);Ay.setWidgetPropertyValue(l.MINOR_GRID_LINES_SHOW,Aw);};Ar(this,Au);Aq.undoRedoCallback={undo:function(){var Aw=h.all[As];Ar(Aw,Av);Aw.doUpdateOnUndoRedo(At,Av,{allVal:Av},true,undefined,undefined);},redo:function(){var Aw=h.all[As];Ar(Aw,Au);Aw.doUpdateOnUndoRedo(At,Au,{allVal:Au},true,undefined,undefined);}};return Aq;},processLineMarkColor:function(Aw,Ax){var Av=this.id,Au=d(),At=this.readGlobalProperty(Aw),As=Y.clone(Ax),Ar=function(A2,A0,A1){var Ay=A1?A0:Y.clone(A0),A3=A0.jsonObj[Aw],Az;if(A3==="default"){A2.removeWidgetProperty(Aw);}else{A2.setWidgetPropertyValue(Aw,A3);}Az=A2.readGlobalProperty(Aw);Ay.jsonObj[Aw]=Az.jsonObj[Aw];Ay.jsonObj[Aw+f]=Az.jsonObj[Aw+f];return Ay;},Aq=function(A0){var Az=h.all[Av],Ay=Ar(Az,A0);Az.doUpdateOnUndoRedo(Aw,Ay,{allVal:Ay},true,undefined,undefined);};At.modifiedPropertyKeys.push(Aw);Ar(this,Ax,true);Au.undoRedoCallback={undo:function(){Aq(At);},redo:function(){Aq(As);}};return Au;},processPropertiesUniformly:function(Av,Ar,Aw,At){var Ay=this,Ax=d(),As,Aq=this.getChartInfo(),Au={},Az=[];if(Av===AO.SUB_TYPE){AJ.call(this,Ar,Ax);}As=J.getUnderlyingPropertyNameWithAll(Av);Q.forEach(As,function(A0){if(Ax.suppressData){Ax.suppressData=!Ae.call(Ay,A0,Ar,Aq);}Au[A0]=Ay.getWidgetPropertyValue(A0);if(Aw&&Au[A0]){Au[A0]=Au[A0][Aw.key];}if(A0.indexOf("FntStyle")>=0||A0.indexOf("LnThk")>=0){Az.push(Au[A0]);}AM.call(Ay,A0,Ar,Aw);});Q.forEach(At,function(A0){var A1=J.getUnderlyingPropertyNameWithAll(A0.name);Q.forEach(A1,function(A2){AM.call(Ay,A2,A0.value,A0.option);});});Ax.needRefresh=e(Av,Ar,Az);this.getUndoRedoCallBackForUniformProperty(Ax,Av,Ar,Au,Ax.needRefresh,Aw,At);return Ax;},getUndoRedoCallBackForUniformProperty:function(Ay,Au,Ar,Ax,Az,Aw,At){var Av=this.id,Aq;function As(A1,A0){Q.forEach(A0,function(A2){var A3=J.getUnderlyingPropertyNameWithAll(A2.name);Q.forEach(A3,function(A4){AM.call(A1,A4,A2.value,A2.option);});});}if(Ay.suppressData){if(At&&At.length>0){Aq=Y.clone(At);Q.forEach(Aq,function(A0){A0.value=A0.valueWas;});}Ay.undoRedoCallback={undo:function(){var A3,A0,A1=h.all[Av],A2=[];if(!A1){return ;}for(A3 in Ax){if(Ax.hasOwnProperty(A3)){A0=Ax[A3];AM.call(A1,A3,A0,Aw,true);A0=U(A3,A0);A2.push(A0);}}As(A1,Aq);A1.doUpdateOnUndoRedo(Au,AG(A2),Ax,Az,Aw,Aq);},redo:function(){var A0=h.all[Av],A1=J.getUnderlyingPropertyNameWithAll(Au);if(!A0){return ;}Q.forEach(A1,function(A2){AM.call(A0,A2,Ar,Aw);});As(A0,At);A0.doUpdateOnUndoRedo(Au,Ar,{allVal:Ar},Az,Aw,At);}};}},getUndoRedoCallBackForTrdRefLine:function(Aw,As,Aq,Av,Ay,Au,Ar){var At=this.id,Ax;if(Aw.suppressData){Ax=P(Aq,Av,true);Aw.undoRedoCallback={undo:function(){var Az=h.all[At];if(!Az){return ;}AT.call(Az,Ax,Au,Ar);Az.doUpdateOnUndoRedo(As,Ax,{allVal:Ax},Ay,Au,undefined);},redo:function(){var Az=h.all[At];if(!Az){return ;}AT.call(Az,Aq,Au,Ar);Az.doUpdateOnUndoRedo(As,Aq,{allVal:Aq},Ay,Au,undefined);}};}},getUndoRedoCallBackForAxisConfig:function(Ar,Ax,Aq,At,As,Au){var Av=this.id,Aw;if(Ar.suppressData){Aw=function(Az,Ay){var A0;if(!Az){return ;}for(A0 in Ay){if(Ay.hasOwnProperty(A0)){Az.setWidgetPropertyValue(A0,Ay[A0]);}}};Ar.undoRedoCallback={undo:function(){var Ay=h.all[Av];if(!Ay){return ;}Aw(Ay,Aq.undoPropValConfig);Ay.doUpdateOnUndoRedo(Ax,Aq.undoValue,{allVal:Aq.undoValue},As,Au,Aq.associatedOptionsForUndo);},redo:function(){var Ay=h.all[Av];if(!Ay){return ;}Aw(Ay,At.redoPropValConfig);Ay.doUpdateOnUndoRedo(Ax,At.redoValue,{allVal:At.redoValue},As,Au,At.associatedOptionsForRedo);}};}},doUpdateOnUndoRedo:function(Au,Av,Ar,As,At,Aq){var Aw;if(Au===mstrmojo.gm.FormatingPropertyTag.MODIFIED_DEF_FILL_COLOR){this.GMController.clearShapeFormatsCache();}this.partialUpdate(Au,Ar,As,At,true);Aw=this.getPropertyUpdateCallback(Au,Av,At,Aq,true);if(Aw.success){Aw.success();}},processChangeShape:function AB(Ax){var At=[],Au=this,Aw=Au.GMController.dz,As=Aw.SliceBy.TemplateUnit||[],Aq=Aw.AngleBy.TemplateMetric||[],Ar=Aw.SizeBy.TemplateMetric||[],Av=G.call(Au);this.zonesModel.CARDLIMIT=AF;this.zonesModel.checkAndWarnLargeItemsForAddUnits(Av,function(){if(Aw.SliceBy.MetricNames!==undefined){As.push(AR);}if(Ax===T.AREA){Q.forEach(Ar,function(Ay){Ay.zone=t.SizeBy;if(!Ay.did){Ay.did=Ay.id;}Ay.cs=1;});At=Ar;}if(Ax!==T.PIE&&Ax!==T.RING){Q.forEach(As,function(Ay){Ay.zone=t.SliceBy;if(!Ay.did){Ay.did=Ay.id;}Ay.cs=1;});Q.forEach(Aq,function(Ay){Ay.zone=t.Angle;if(!Ay.did){Ay.did=Ay.id;}Ay.cs=1;});At=(At||[]).concat((Aq.concat(As||[])));}if(At.length>0){Au.changeShapeProperty(AO.SHAPE,Ax);Au.zonesModel.gmZones.deleteItems(At,undefined,true);}else{Au.writeGlobalProperty(AO.SHAPE,Ax);}});},getPartialUpdateType:function(Aq){if(g.indexOf(Aq)>=0){return k.UPDATE_ALL;}if(N.indexOf(Aq)>=0){return k.UPDATE_CHARTS;}if(C.indexOf(Aq)>=0){return k.SPLITTER_LINE_SCALE;}if(I.indexOf(Aq)>=0){return k.CHART_SCALE;}return k.UNKNOW;},partialUpdate:function(At,Aq,Ay,Au,As){var Ar,Aw,Ax=this,Av=false;if(this.noData){return ;}Ap.startTimer({functionName:"VisGraphMatrix.partialUpdate",purpose:"Partial update of GraphMatrix ("+this.k+")"});Ar=J.getUnderlyingPropertyNameWithAll(At);this.resetAxisProps(Ar);this.resetHTML5Props();this.configureTrendAndRefLine(At);this.resetGMCtrlCache(At,Aq);this.setUpForceUpdateFlag(At);Av=a(At,Aq);if(Ay&&!Av){Av=this.handlePartialUpdate(this.getPartialUpdateType(At),As);}if(!Av){if(Aa.indexOf(At)>=0){Ar=[At];}Ar.forEach(function(Az){Aw=Ax.updateSingleProperty(Az,Aq,Ay,Au);Av=Av||Aw;});}this.clearForceUpdateFlag();if(!Av){this.clientRerenderGraphMatrix();}Ap.endTimer();},handlePartialUpdate:function(Aq,Ar){var As=this.GMController;switch(Aq){case k.UPDATE_CHARTS:this.updateCharts();break;case k.UPDATE_ALL:As.reRenderGM();break;case k.CHART_SCALE:if(Ar){As.reRenderGM();}else{this.onControlResized();}break;case k.SPLITTER_LINE_SCALE:if(Ar){As.reRenderGM();}else{this.onControlResized(false,false,true,true);}break;default:return false;}return true;},updateSingleProperty:function(Au,Aq,Az,Av){var Ar,Aw={},As=this.manager,A0=this.HTML5PROPS,At=Aq[S],Ay=Aq.hasOwnProperty(Au)?Aq[Au]:At,Ax=this.GMController;switch(Au){case l.BG_COLOR:case l.BG_FILL_TRANSPARENCY:break;case l.ROW_HEADER_FILL_COLOR:case l.ROW_HEADER_FILL_TRANSPARENCY:this.updateRowValueBackground();this.updateHeaderTitle("row","bg");break;case l.ROW_HEADER_TEXT_FONT_COLOR:case l.ROW_HEADER_TEXT_FONT_STYLE:case l.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case l.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("row","font");break;case l.ROW_VAVLUE_TEXT_FONT_COLOR:case l.ROW_VAVLUE_TEXT_FONT_STYLE:case l.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case l.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:As.updateSubSetOfVSlaves("row",Ax.metricNamesOnRowMetricsOnXAxis);break;case l.COLUMN_HEADER_FILL_COLOR:case l.COLUMN_HEADER_FILL_TRANSPARENCY:this.updateColumnValueBackground();this.updateHeaderTitle("col","bg");break;case l.COLUMN_HEADER_TEXT_FONT_COLOR:case l.COLUMN_HEADER_TEXT_FONT_STYLE:case l.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case l.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("col","font");break;case l.COLUMN_VAVLUE_TEXT_FONT_COLOR:case l.COLUMN_VAVLUE_TEXT_FONT_STYLE:case l.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case l.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:As.updateSubSetOfHSlaves("column",Ax.metricNamesOnColumnMetricsOnYAxis);break;case l.V_MATRIX_LINES_COLOR:case l.V_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.v",A0.MATRIX_LINE_V);break;case l.H_MATRIX_LINES_COLOR:case l.H_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.h",A0.MATRIX_LINE_H);break;case l.X_AXIS_LINE_COLOR:case l.X_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.h",A0.AXIS_LINE_X);break;case l.Y_AXIS_LINE_COLOR:case l.Y_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.v",A0.AXIS_LINE_Y);break;case l.X_AXIS_ORIGIN_LINE_COLOR:case l.X_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(Au,"v",".gm-set-originline",Ay);break;case l.Y_AXIS_ORIGIN_LINE_COLOR:case l.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(Au,"h",".gm-set-originline",Ay);break;case l.Y_AXIS_TITLE_FONT_COLOR:case l.Y_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontStyle("yaxis");break;case l.Y_AXIS_LABELS_FONT_COLOR:case l.Y_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("yaxis",Au);break;case l.X_AXIS_TITLE_FONT_COLOR:case l.X_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontStyle("xaxis");break;case l.X_AXIS_LABELS_FONT_COLOR:case l.X_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("xaxis",Au);break;case l.ALL_AXIS_LABELS_FONT_COLOR:case l.ALL_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("allaxis",Au);break;case l.GRID_LINE_AUTO:case l.ALL_GRID_LINES_SHOW:case l.MAJOR_GRID_LINES_SHOW:case l.MINOR_GRID_LINES_SHOW:case l.ALL_GRID_LINES_COLOR:case l.ALL_GRID_LINES_COMBINED_STYLE:case l.MAJOR_GRID_LINES_COLOR:case l.MAJOR_GRID_LINES_COMBINED_STYLE:case l.MINER_GRID_LINES_COLOR:case l.MINER_GRID_LINES_COMBINED_STYLE:this.hPlaceHGridLines(A0.GRID_LINE_MAJOR,A0.GRID_LINE_MINOR);this.hPlaceVGridLines(A0.GRID_LINE_MAJOR,A0.GRID_LINE_MINOR);break;case AO.LEGEND_VISIBLE:case AO.LEGEND_MODE:case AO.SCALE_LEGEND_WIDTH:case l.LEGEND_BG_COLOR:case l.LEGEND_BG_FILL_TRANSPARENCY:case l.LEGEND_FONT_COLOR:case l.LEGEND_FONT_STYLE:case l.LEGEND_FONT_SIZE:case l.LEGEND_FONT_FAMILY:this.legendPartialUpdate(Au,Az);break;case AO.LEGEND_POSITION:if(this.legend){this.legend.updateLegendSlot(Ay,this.getLegendDockPosIdx(Ay));}break;case l.ALL_TEXT_FONT_COLOR:case l.ALL_TEXT_FONT_STYLE:this.updateHeaderTitle("row","font");this.updateHeaderTitle("col","font");As.updateVSlaves();As.updateHSlaves();if(Aq.hasOwnProperty(S)){this.updateChartFontStyle(Au,"all-text",At);}else{if(Au.indexOf("FntClr")>=0){Aw.dl=l.DATA_LABELS_FONT_COLOR;Aw.rfl=l.REF_LABELS_FONT_COLOR;}else{if(Au.indexOf("FntStyle")>=0){Aw.dl=l.DATA_LABELS_FONT_STYLE;Aw.rfl=l.REF_LABELS_FONT_STYLE;}}this.updateChartFontStyle(Au,B.GM_ORIGIN_LABEL);this.updateChartFontStyle(Aw.dl,B.GM_DATA_LABEL,Aq[Aw.dl]);this.updateChartFontStyle(Aw.rfl,B.GM_REF_LABEL,Aq[Aw.rfl]);}if(this.legend){this.legend.updateStyle(A0.LEGEND);}break;case AO.BANDING:case AO.AXIS_ORIGIN:case AO.MAX_SIZE_TYPE:case AO.MAX_SIZE_VALUE:case AO.MIN_SIZE_VALUE:case AO.DATA_LABEL:case AO.DATA_LABELS_PLACEMENT:case AO.METRIC_LEVEL_DATA_LABEL:case l.DATA_LABELS_FONT_FAMILY:case l.DATA_LABELS_FONT_SIZE:this.updateAxisAndCharts(Au);break;case AO.MIN_SIZE_TYPE:if(Au===AO.MIN_SIZE_TYPE&&this.needLegend&&Ax.hasSizeBy()){this.sizeByData=Ax.getSizeByLegendInfo();}this.updateAxisAndCharts(Au);this.hUpdateLegend();break;case l.DATA_LABELS_FONT_STYLE:if(Az){this.updateAxisAndCharts(Au);}else{this.updateChartFontStyle(Au,B.GM_DATA_LABEL,Ay);}break;case l.DATA_LABELS_FONT_COLOR:this.updateChartFontStyle(Au,B.GM_DATA_LABEL,Ay);break;case AO.REF_LINE_DEF:Ar=Ay.modifiedPropertyKeys[0];if(Ar===AO.TREND_REF_LINE_COMBINED_STYLE||Ar===AO.TREND_REF_LINE_COLOR){this.updateTrdAndRefLineStyle(".gm-set-referenceline",Ay,Av);}else{this.updateChartFontStyle(Au,B.GM_REF_LABEL,Ay);}break;case AO.TREND_LINE_DEF:this.updateTrdAndRefLineStyle(".gm-set-trendline",Ay,Av);break;case l.REF_LABELS_FONT_COLOR:case l.REF_LABELS_FONT_STYLE:this.updateChartFontStyle(Au,B.GM_REF_LABEL,Ay);break;default:return false;}return true;},getHTML5Props:function(){return this.HTML5PROPS;},resetHTML5Props:function(){var Aq=this.property,Ar=this.HTML5PROPS;Aq.initHTML5Props(Ar);this.applyHTML5Props(Ar);this.adjustRHAndCHOpacity();this.postFillGMControllerStyle();this.updateLegendColorByOpacity();},adjustRHAndCHOpacity:function(){var At=this.HTML5PROPS;var Aq=At.BK;var As=At.RH_BK;var Ar=At.CH_BK;if(Aq.backgroundColor===As.backgroundColor){if(As.opacity<=Aq.opacity){As.opacity=0;}else{As.opacity-=Aq.opacity;}}if(Aq.backgroundColor===Ar.backgroundColor){if(Ar.opacity<=Aq.opacity){Ar.opacity=0;}else{Ar.opacity-=Aq.opacity;}}},getAllAxisProperties:function(){var Aq={},As=this.GMController,Ar=this;if(As.axisFormat){return As.axisFormat;}b.forEach(function(At){Aq[At]=Ar.readGlobalProperty(At);});As.axisFormat=Aq;return Aq;},resetAxisProps:function(As){var Ar=this.GMController.axisFormat,Au=this,At,Aq;if(Ar){As.forEach(function(Av){if(Av.indexOf("CmbStyle")>=0){At=Av.replace("CmbStyle","Thk");Aq=Av.replace("CmbStyle","Style");}b.forEach(function(Aw){if((Aw===Av)||(At&&Aw===At)||(Aq&&Aw===Aq)){Ar[Aw]=Au.readGlobalProperty(Aw);}});});}},getDefaultProperties:function(){var Az=this;if(this.theme===undefined){var At=Y.walk("model.data.dz.visProp.fmt.th",Az);if(At!==undefined&&At!==null){if(typeof At==="number"){this.theme=At;}else{if(typeof At==="string"){this.theme=parseInt(At,10);}}}}var A1=this.GMController,A0=this.scriptClass==="mstrmojo.ngm.VisNewGraphMatrix",Ax=mstrApp.getThemeProps("THEME_STYLE"),Aw=Ax===w.DEFAULT,Ay=A1&&(A1.isPie?H.PIE:A1.getChartType()),As=Z.lightTheme({isNGM:A0,chartType:Ay,isNewTheme:Aw}),A2=this.getDocModel(),Av=false;if(A2){var Ar=A2.getCurrentPaletteColors();if(Ar&&Ar.length){As.shpFillClr=As.shpLnClr=Ar[0];Av=true;}}if(A1){var Au=A0?"NGM":"OGM",Aq=mstrApp.getThemeProps(Au).DEFAULT_PROPS[Ay];Y.keyarray(Aq).forEach(function(A3){As[A3]=Aq[A3];});}if(!Av){Z.update(this.theme,["shpFillClr"]);Z.update(this.theme,["shpLnClr"]);}return As;},configureTrendAndRefLine:function AY(Aq){if(Aq===AO.TREND_LINE_DEF||Aq===AO.REF_LINE_DEF||Aq.indexOf("allTxtFnt")>=0||Aq.indexOf(AN)>=0){this.GMController.configureTrendLine(this.getData());}},isLogScaleChanged:function Ak(Ar){var Aq=Ar[AO.AXIS_SCALE_DATA]||Ar[S];return !!(Aq&&Aq.modifiedPropertyKeys&&Aq.modifiedPropertyKeys[0]===AO.LOG_SCALE);},resetGMCtrlCache:function A(Ar,As){var Aq=this.GMController;if(Ar===AO.MAX_SIZE_TYPE||Ar===AO.MAX_SIZE_VALUE||Ar===AO.MIN_SIZE_TYPE||Ar===AO.MIN_SIZE_VALUE){Aq.initMaxMinSizeProps();}else{if(Ar===AO.AXIS_SCALE_DATA){Aq.getAxisScaleMode();Aq.setupDualAxis();if(this.isLogScaleChanged(As)){Aq.clearLogScaleCahce();Aq.msgCenter={};}}else{if(Ar===AO.DATA_LABEL){Aq.resetDataLabelType();}else{if(Ar===AO.DATA_LABELS_PLACEMENT){Aq.resetDataLabelPlacement();}else{if(Ar.indexOf("dlFnt")>=0||Ar.indexOf("allTxtFnt")>=0){Aq.clearDataLabelFormatCache();}else{if(Ar===l.MODIFIED_DEF_FILL_COLOR||Ar===l.SHAPE_BORDER_COMBINED_STYLE||Ar===l.SHAPE_LINE_COMBINED_STYLE){Aq.resetDefaultShapeProp();}else{if(Ar===l.SHAPE_FILL_TRANSPARENCY){Aq.resetDefaultShapeProp();}else{if(Ar===AO.AXIS_ORIGIN){delete Aq.axisFormat;}}}}}}}}},getColorByComb:function O(As){var Ar,Au=As.levels,At=As.elements,Av=Au.length,Aq=[];for(Ar=0;Ar<Av;Ar++){Aq.push({tid:Au[Ar],eid:At[Ar]});}return Aq;},updateLegendColorByOpacity:function Ag(){var Aq=this.GMController,Ar=Aq.hasColorBy(),Aw=Aq.getDefaultsForShape(Aq.getChartInfo().shape),Av=this.property.readItem(l.ALL_SHAPE_FORMAT),Au,As,At=this;if(!Ar){return ;}this.colorByData=Aq.getColorByLegendInfo();if(!this.colorByData){return ;}if(Aq.colorByInfo.tp===n.METRICS){As=Ap.getResolvedFormatsObject([Aw,Av]);this.colorByData.elements.forEach(function(Ax){Ax.opacity=As[l.SHAPE_FILL_TRANSPARENCY]/100;});}else{this.colorByData.elements.forEach(function(Ax){Au=Aq.getShapeFormatsWithCombination(At.getColorByComb(Ax.token));As=Ap.getResolvedFormatsObject([Aw,Av,Au]);Ax.opacity=As[l.SHAPE_FILL_TRANSPARENCY]/100;});}},setUpForceUpdateFlag:function(Ar){if(Ar.indexOf("AxTt")>=0||Ar.indexOf("AxLb")>=0||Ar.indexOf("allTxtFnt")>=0){this.forceUpdateAxis=true;}var Aq=this;Q.forEach(AX,function(As){if(As===Ar){Aq.forceUpdateAxis=true;return false;}});},clearForceUpdateFlag:function c(){delete this.forceUpdateAxis;},updateDummyANodeStyle:function(Aq){var Ar=this.domDummyA;if(Ar.style.display!=="none"){F.applyStyles2DomNode(Ar,Aq);Ar.setAttribute("type",B.GM_DUMMY_A);}},updateHeaderTitle:function(A0,At){var Ay=A0==="row"?".gm-rowheader-title":".gm-colheader-title",Ar=this.domNode.querySelectorAll(Ay),Aw,As=Ar.length,Aq,Au,Ax,Az=this.HTML5PROPS,A1,Av;if(A0==="row"){A1=Az.RH_BK;Av=Az.RH_TITLE;Au=this.getWidgetPropertyValue(l.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL);Ax=this.getWidgetPropertyValue(l.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL);}else{A1=Az.CH_BK;Av=Az.CH_TITLE;Au=this.getWidgetPropertyValue(l.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL);Ax=this.getWidgetPropertyValue(l.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL);}for(Aw=0;Aw<As;Aw++){Aq=Ar[Aw];if(At==="bg"){F.applyStyles2DomNode(Aq,A1);}else{if(Aq.getAttribute("type")===null){F.applyStyles2DomNode(Aq.firstChild.firstChild,Av);}else{if(Aq.firstChild){Ap.updateTextColorAndAlignment(Aq,Au,Ax);}}}}},updateHeaderValueFontStyle:function(Au){var At=Au==="row"?"div.gm-rowheader-cell, div.gm-rowheader-cell-dummy":"div.gm-colheader-cell, div.gm-colheader-cell-dummy",Ar=this.domNode.querySelectorAll(At),As,Ax=Ar.length,Aw,Aq,Av;if(Au==="row"){Aq=this.getWidgetPropertyValue(l.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL);Av=this.getWidgetPropertyValue(l.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL);}else{Aq=this.getWidgetPropertyValue(l.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL);Av=this.getWidgetPropertyValue(l.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL);}for(As=0;As<Ax;As++){Aw=Ar[As];if(Aw.getAttribute("class").indexOf("gm-colheader-cell-dummy")>=0&&!this.GMController.metricNamesOnColumnMetricsOnYAxis){continue;}Ap.updateTextColorAndAlignment(Aw,Aq,Av);}},updateAxisTitleFontStyle:function(At){var As=At==="yaxis"?".gm-yaxis-cell-label .gm-text-body-nowrap":".gm-xaxis-cell-label .gm-text-body-nowrap, .gm-x2axis-cell-label .gm-text-body-nowrap",Aq=this.domNode.querySelectorAll(As),Ar,Av=Aq.length,Au=this.HTML5PROPS[At==="yaxis"?"AXIS_TITLE_Y":"AXIS_TITLE_X"];for(Ar=0;Ar<Av;Ar++){F.applyStyles2DomNode(Aq[Ar],Au);}},updateRowValueBackground:function(){var Aq=this.domRowHeader.childNodes,Ar,At=Aq.length,As=this.HTML5PROPS.RH_BK;for(Ar=0;Ar<At;Ar++){F.applyStyles2DomNode(Aq[Ar],As);}if(this.GMController.metricNamesOnRowMetricsOnXAxis){F.applyStyles2DomNode(this.domYAxis,As);}},updateColumnValueBackground:function(){var Aq=this.domColHeader.childNodes,Ar,At=Aq.length,As=this.HTML5PROPS.CH_BK;for(Ar=0;Ar<At;Ar++){if(Ar===At-1&&this.colHeaderExtraH>0&&!this.GMController.metricNamesOnColumnMetricsOnYAxis){break;}F.applyStyles2DomNode(Aq[Ar],As);}},updateMatrixLineStyle:function(Au,At){var Aq=this.domNode.querySelectorAll(Au),Ar,As,Av=Aq.length;for(As=0;As<Av;As++){Ar=Aq[As].firstChild;F.applyStyles2DomNode(Ar,At);}},updateOriginLineStyle:function(Ax,A0,Az,As){var Ar=this.domNode.querySelectorAll(Az),Aw,At=Ar.length,Au,Aq,Av,Ay;if(Ax.indexOf("Clr")>=0){Au=Ap.decodeColor(As);for(Aw=0;Aw<At;Aw++){if(Ar[Aw].getAttribute("subtype")===A0){Ar[Aw].style.stroke=Au;}}}else{if(Ax.indexOf("CmbStyle")>=0){Aq=AK(As);Av=Aq.thk;Ay=Aq.ceLnStyle;if(Ay===Ao.LS_DOT){Ay="1 1";}else{if(Ay===Ao.LS_DASH){Ay="3 1";}else{Ay="";}}for(Aw=0;Aw<At;Aw++){if(Ar[Aw].getAttribute("subtype")===A0){Ar[Aw].style.strokeDasharray=Ay;Ar[Aw].style.strokeWidth=Av;}}}}},updateTrdAndRefLineStyle:function(Az,Ar,Ax){var As=Ar.modifiedPropertyKeys[0],Aq=this.domNode.querySelectorAll(Az),Aw,At=Aq.length,Au,Av,Ay,A0=Ax.key;if(As===AO.TREND_REF_LINE_COLOR){Au=Ap.decodeColor(Ar.jsonObj[As]);for(Aw=0;Aw<At;Aw++){if(A0===Aq[Aw].identity.tlOpt.key){Aq[Aw].style.stroke=Au;}}}else{if(As===AO.TREND_REF_LINE_COMBINED_STYLE){Av=Ar.jsonObj[AO.TREND_REF_LINE_THICKNESS];Ay=Ar.jsonObj[AO.TREND_REF_LINE_STYLE];if(Ay===Ao.LS_DOT){Ay="1 1";}else{if(Ay===Ao.LS_DASH){Ay="3 1";}else{Ay="";}}for(Aw=0;Aw<At;Aw++){if(A0===Aq[Aw].identity.tlOpt.key){Aq[Aw].style.strokeDasharray=Ay;Aq[Aw].style.strokeWidth=Av;}}}}},updateAxisLabelFontStyle:function(As,At){var Ar=this.manager,Aq=this.GMController;if(As==="yaxis"){Ar.updateSubSetOfVSlaves("axis",Aq.metricNamesOnRowMetricsOnXAxis);}else{if(As==="xaxis"){Ar.updateSubSetOfHSlaves("axis",Aq.metricNamesOnColumnMetricsOnYAxis);}else{Ar.updateSubSetOfVSlaves("axis",Aq.metricNamesOnRowMetricsOnXAxis);Ar.updateSubSetOfHSlaves("axis",Aq.metricNamesOnColumnMetricsOnYAxis);}}this.updateChartFontStyle(At,B.GM_ORIGIN_LABEL);},updateChartFontStyle:function(Ay,A0,As){var Aw,Aq,A1,Av,A2,Au,Az,Ax,A4,Ar=this.domNode.querySelectorAll(".gm-chart .gm-tspan"),At=Ar.length,A3=this.HTML5PROPS;switch(A0){case B.GM_ORIGIN_LABEL:if(Ay.indexOf("FntClr")>=0){Au={p:"fill",v:A3.AXIS_LABEL_X.color};Az={p:"fill",v:A3.AXIS_LABEL_Y.color};}else{if(Ay.indexOf("FntStyle")>=0){Au={p:"textDecoration",v:A3.AXIS_LABEL_X.textDecoration||"none"};Az={p:"textDecoration",v:A3.AXIS_LABEL_Y.textDecoration||"none"};}}break;case B.GM_DATA_LABEL:case"all-text":Au=this.getPropValue(Ay,As);break;case B.GM_REF_LABEL:if(As.opt){Aq=As.opt.key;Ay=As.modifiedPropertyKeys[0];As=As.jsonObj[Ay];}else{As=U(Ay,As);}Au=this.getPropValue(Ay,As);break;default:break;}for(Aw=0;Aw<At;Aw++){Av=Ar[Aw].getAttribute("type");if(A0==="all-text"){A2=Ar[Aw].parentNode.style;A2[Au.p]=Au.v;}else{if(Av&&Av.indexOf(A0)>=0){A2=Ar[Aw].parentNode.style;switch(A0){case B.GM_ORIGIN_LABEL:if(Av.indexOf("v")>=0){A2[Au.p]=Au.v;}else{A2[Az.p]=Az.v;}break;case B.GM_DATA_LABEL:A2[Au.p]=Au.v;break;case B.GM_REF_LABEL:if(Aq){Ax=Ar[Aw].parentNode;if(Ax){A4=Ax.identity;}if(A4&&A4.tlOpt){A1=A4.tlOpt.key;}if(A1===Aq){A2[Au.p]=Au.v;}}else{A2[Au.p]=Au.v;}break;default:break;}}}}},getPropValue:function(Aq,Ar){var As;if(Aq.indexOf("FntClr")>=0){As=Ap.decodeColor(Ar);return{p:"fill",v:As};}if(Aq.indexOf("FntStyle")>=0){if((Ar&8)&&(Ar&4)){As="line-through underline";}else{if(Ar&8){As="line-through";}else{if(Ar&4){As="underline";}else{As="none";}}}return{p:"textDecoration",v:As};}},updateCharts:function(){if(this.excludeData){return ;}var Aq=this.manager.master;Aq.clearCharts();Aq.updateCharts();this.updateSelections();},updateAxisAndCharts:function(As){var Ar=this.manager,Aq=this.GMController;if(As!==AO.BANDING){this.hCalcRadiusAndMargin(true);}Ar.updateSubSetOfVSlaves("axis",Aq.metricNamesOnRowMetricsOnXAxis);Ar.updateSubSetOfHSlaves("axis",Aq.metricNamesOnColumnMetricsOnYAxis);if(As===AO.AXIS_ORIGIN){var At=this.HTML5PROPS;this.hPlaceHGridLines(At.GRID_LINE_MAJOR,At.GRID_LINE_MINOR);this.hPlaceVGridLines(At.GRID_LINE_MAJOR,At.GRID_LINE_MINOR);}this.updateCharts();},legendPartialUpdate:function(At,Aq){var As=true,Ar,Au=this.HTML5PROPS;if(!this.legend){this.hInitLegend();}Ar=this.legend;if(At===l.LEGEND_FONT_STYLE){As=Aq;}else{if((At===l.LEGEND_BG_COLOR)||(At===l.LEGEND_FONT_COLOR)||(At===l.LEGEND_BG_FILL_TRANSPARENCY)){As=false;}}Ar.updateStyle(Au.LEGEND);if(As){Ar.updateTitleLineHeight(Au.LEGEND);this.onControlResized(false,true,false,true);Ar.updateAfterResize();Ar.updateSplitter();}},getLegendDockPosIdx:function(As){var Aq,Ar=y.length;for(Aq=0;Aq<Ar;Aq++){if(As===y[Aq].pos){return Aq;}}return -1;},makeDefaultsObjectAtOption:function(Ar){var Aq,As=this.getDefaultProperties();if(W.indexOf(Ar)>=0){switch(Ar){case AO.METRIC_SHAPES:Aq=this.getWidgetPropertyValue(AO.SHAPE);break;case AO.LOG_SCALE:break;case AO.METRIC_LEVEL_DATA_LABEL:Aq=false;break;case AO.TREND_LINE_DEF:Aq={};Aq[AO.TREND_TYPE]=Al.EnumTrendLineModelType.BEST_FIT;Aq[AO.TREND_LEVEL]=Al.EnumTrendRefLevel.DssModelLevelPerCell;Aq[AO.TREND_ENABLED]=false;Aq[AO.TREND_INCLUDE_BREAK_BY]=!!this.getChartInfo().isABL;[AO.TREND_POLY_DEGREE,AO.TREND_REF_LINE_THICKNESS,AO.TREND_REF_LINE_COLOR,AO.TREND_REF_LINE_STYLE].forEach(function(At){Aq[At]=As[At];});break;case AO.TREND_BUBBLE_FORE_DEF:Aq={};Aq[AO.TREND_BUBBLE_FORE_FWD]=987654321;Aq[AO.TREND_BUBBLE_FORE_BWD]=-987654321;Aq[AO.TREND_BUBBLE_FORE_ENABLED]=false;break;case AO.REF_LINE_DEF:Aq={};Aq[AO.REF_TYPE]=r.AVG;Aq[AO.REF_ENABLED]=false;Aq[AO.REF_SHOW_LABEL]=true;Aq[AO.REF_LABEL_TYPE]=AH.DssModelLabelsType|AH.DssModelLabelsValue;Aq[AO.REF_LEVEL]=Al.EnumTrendRefLevel.DssModelLevelPerCell;[AO.TREND_REF_LINE_THICKNESS,AO.TREND_REF_LINE_COLOR,AO.TREND_REF_LINE_STYLE,l.REF_LABELS_FONT_FAMILY,l.REF_LABELS_FONT_SIZE,l.REF_LABELS_FONT_STYLE,l.REF_LABELS_FONT_COLOR].forEach(function(At){Aq[At]=As[At];});Aq[AO.TREND_REF_LINE_STYLE]=1;break;case AO.AXIS_ORIGIN:Aq={};Aq[AO.AXIS_ORIGIN_AUTO]=true;Aq[AO.AXIS_ORIGIN_VALUE]=0;break;case AO.FORMATS_ON_COMBINATION:break;case l.ALL_SHAPE_FORMAT:break;}}else{F.visPrint(Ar+"is not in COMPLEX_PROPERTY object! Add it in if it is complex property");}return Aq;},createAxisOriginObject:function(){var Aq={},As=this,At=AO.AXIS_ORIGIN,Ar=this.getNumericAxisOptions(false);Ar.forEach(function(Au){Aq[Au.key]=As.makeDefaultsObjectAtOption(At);});if(Aq.AllMetrics===undefined){Aq.AllMetrics=this.makeDefaultsObjectAtOption(At);}return Aq;},getPropertiesOfFormatable:function(){var A1=this,A4=A1.getDocModel(),Au,At=this.curSelOptLvl,Az,A2=this.GMController,A3=this.arrayOfComb,Ay=mstrApp.getThemeProps("THEME_STYLE"),Ax=Ay===w.DEFAULT,As=A2.getDefaultsForShape(A2.getChartInfo().shape)[l.SHAPE_BORDER_COLOR],Ar,Aw;if(this.interactor.fmtState===Ai.PER_COLORBY){Az=this.interactor.getColorByIdentities();Au=true;}else{Az=this.interactor.getBreakByIdentities();}Ar=x.call(this,At,Az,A3);if(Au&&A3&&A3[0]){var A5=[],Aq=[];Q.forEach(A3[0],function(A6){A5.push(A6.tid);Aq.push(A6.eid);});if(Aq.length>0){var Av=A4.getColorBy(A5,Aq);Ar[l.SHAPE_LINE_COLOR]=Ar[l.SHAPE_FILL_COLOR]=Av.color;Ar[l.SHAPE_FILL_COLOR_DEFAULT]=!Av.isManual;Ar[l.SHAPE_LINE_COLOR+f]=!Av.isManual;}}var A0=Ar[l.SHAPE_FILL_COLOR];if(Ar[l.LINE_MARKER_COLOR]===undefined){Ar[l.LINE_MARKER_COLOR]=A0;Ar[l.LINE_MARKER_COLOR+f]=true;}else{Ar[l.LINE_MARKER_COLOR+f]=false;}if(Ar[l.LINE_MARKER_BORDER_COLOR]===undefined){Ar[l.LINE_MARKER_BORDER_COLOR]=A0;Ar[l.LINE_MARKER_BORDER_COLOR+f]=true;}else{Ar[l.LINE_MARKER_BORDER_COLOR+f]=false;}if(Ar[l.SHAPE_BORDER_COLOR]===undefined){Ar[l.SHAPE_BORDER_COLOR]=Ax&&As!==undefined?As:A0;Ar[l.SHAPE_BORDER_COLOR+f]=true;}else{Ar[l.SHAPE_BORDER_COLOR+f]=false;}AA.call(this,Ar);if(At===K.ALL_SHAPE||At===K.METRIC){Aw=Y.clone(Ar);this.updateConflictShapeFormat(Aw,At);return AE(Aw);}return AE(Ar);},updateConflictShapeFormat:function(Ax,At){var Ar=this.getStyleEffectsOptions(),Av,Au,Aw=this,As=this.arrayOfComb&&this.arrayOfComb[0],Aq={};Q.forEach(Ar,function(Ay){Av=Ay.optLvl;if(Av===K.METRIC&&At===K.ALL_SHAPE){Au=x.call(Aw,Av,undefined,[Ay.comb]);v(Au,Aq);}else{if(Av===K.COLOR_BY){Q.forEach(Ay.subOptions,function(Az){if(!Az.key||Az.key!=="multiple"){if(At===K.ALL_SHAPE||(At===K.METRIC&&s(Az.comb,As))){Au=x.call(Aw,Av,undefined,[Az.comb]);v(Au,Aq);}}});}}});AS(Aq,Ax);},writeFormatableProperties:function(A5){var A3,Aq,A6,BE,A2,A9,Aw,Ay,BF=this,BD=this.GMController,A7=BD.model,BH=this.identity,A8=A5.jsonObj,Ax=A5.modifiedPropertyKeys,BG=true,Av=Ax.indexOf(l.SHAPE_FILL_COLOR),A4=Ax.indexOf(l.SHAPE_FILL_TRANSPARENCY),BA=Ax.indexOf(l.SHAPE_LINE_COLOR),As=true;if(Av>-1||BA>-1){BG=false;if(!BD.hasColorBy()){BF.writeGlobalProperty(l.MODIFIED_DEF_FILL_COLOR,A8[Ax[0]]);return ;}}if(!BH){return ;}A3=BH.objType;if(A3===AU.SHAPE_COLLECTION){var A0,Ar=this.curSelOptLvl,Au=this.arrayOfComb;if(this.interactor.fmtState===Ai.PER_COLORBY){A0=this.interactor.getColorByIdentities();}else{A0=this.interactor.getBreakByIdentities();}Ax.forEach(function(BN){if(BN.indexOf("CmbStyle")!==-1){var BL=BN.replace("CmbStyle","Thk"),BJ=BN.replace("CmbStyle","Style"),BK=AK(A8[BN]),BI=BK.thk,BM=BK.ceLnStyle;A5.setProperty(BL,BI);A5.setProperty(BJ,BM);}});if(Ar===K.ALL_SHAPE){Ay=l.ALL_SHAPE_FORMAT;A9=this.getWidgetPropertyValue(Ay);BF.mergeModifiedFormatsForSingleShape(undefined,Ar,A5);}else{if(Ar===K.COLOR_BY||Ar===K.METRIC||Ar===K.ITSELF){Ay=AO.FORMATS_ON_COMBINATION;A9=this.getWidgetPropertyValue(Ay);Q.forEach(Au,function(BI){if(Ax[0]!==l.SHAPE_FILL_COLOR&&Ax[0]!==l.SHAPE_LINE_COLOR){BF.mergeModifiedFormatsForSingleShape(BI,Ar,A5);}});}}Aw=this.getWidgetPropertyValue(Ay);if(Ar!==K.ALL_SHAPE&&Ax){if(Au){if(A7.colorType===n.ATT){As=false;}A6=BD.getColorByAttrsID();Aq=R(Au,A6,As);}else{Aq=this.collectUniqueCombination(A0,K.COLOR_BY);}if(Av>=0||BA>=0){BE=Ax[Av>=0?Av:BA];A2=A5.jsonObj[BE];}}}if(!BG){this.updateColorByMap(Aq,A2);}else{var BC=this.id,A1=Ax[0],At=function(){BF.GMController.clearShapeFormatsCache();BF.partialUpdate(A1,{allVal:A5},true);BF.raiseEventShapeFormattingChanged(A1);if(A4>=0){BF.hUpdateLegend();}},Az=function(BI){var BJ=h.all[BC];if(Ay===AO.FORMATS_ON_COMBINATION){BJ.GMController[Ay]=Y.clone(BI);}BJ.setWidgetPropertyValue(Ay,BI);At();},BB={undo:function(){Az(A9);},redo:function(){Az(Aw);}};At();this.submitUpdatesAndPersistXML(undefined,undefined,BB,true);}},mergeModifiedFormatsForSingleShape:function(As,Au,Aq){var Ar,At,Av=this.GMController;if(Au===K.ALL_SHAPE){Ar=l.ALL_SHAPE_FORMAT;At=this.getWidgetPropertyValue(Ar);if(At===undefined){At={};}AL(At,Aq);this.setWidgetPropertyValue(Ar,At);}else{At=Av.getShapeFormatsWithCombination(As);if(At===undefined){At={};}AL(At,Aq);Av.setShapeFormatsWithCombination(As,At);}},collectUniqueCombination:function(Ar,Au){var Av={},As,At,Aq=[];Q.forEach(Ar,function(Aw){if(Au===K.ITSELF){As=Aw.getSelectedObjectLowestLevel(true);}else{if(Au===K.COLOR_BY){As=Aw.getSelectedObjectColorByInfo();}else{if(Au===K.METRIC){As=Aw.getSelectedObjectMetricInfo();}}}At=Ap.serializeCombination(As);if(Av[At]===undefined){Av[At]=true;Aq.push(As);}});return Aq;},getTrendRefInfo:function(Aq){return AV(Aq);},changeShapeProperty:function u(Ar,As){var Aq=this;if(this.syning){return ;}Aq.setWidgetPropertyValue(Ar,As.jsonObj||As);},updateColorByMap:function(Aw,As){var Ar=JSON.stringify({color:As}),Aq=this.getDocModel(),Au=[],Av=Aq.getUpdateColorMapCallback(),At=F.getUpdateColorMapAction.bind(this);Q.forEach(Aw,function(Ax){Au.push(At(Ax,Ar));});this.submitUpdatesAndPersistXML(Au,Av,undefined,false,true);if(this.forceUpdateColorMap){if(Av.success&&Au.length>0){Av.success({defn:{epm:Au[0].epm}});}}},checkCustomScale:function(Ar){var As=false,Aq=this.getWidgetPropertyValue(AO.AXIS_SCALE_DATA);Q.forEach(Aq||[],function(Au){if(Au.length>1){if(Au[0]===Ar){var At=parseInt(Au[1],10);if(At===q.CUSTOM){As=true;return false;}}}});return As;},abandonCustomAxisScale:function(){if(this.GMController.hasCustomOnAxis()){this.setWidgetPropertyValue(AO.AXIS_SCALE,q.GLOBAL);}},absorbAxisOrigin:function(){var Aq=this.getWidgetPropertyValue(AO.AXIS_ORIGIN),Ar=this.createAxisOriginObject();if(Aq){Y.forEach(Ar,function(Au,Av){if(Aq[Av]){Ar[Av]=Aq[Av];}});}var As=true;var At=null;Y.forEach(Ar,function(Au,Av){if(Av!=="AllMetrics"){As=As&&Au.axOriAuto;if(At===null){At=Au.axOriValue;}else{if(At!==undefined){if(At!==Au.axOriValue){At=undefined;}}}}});Ar.AllMetrics={axOriAuto:As,axOriValue:At};this.setWidgetPropertyValue(AO.AXIS_ORIGIN,Ar);},resetAxisOrigin:function(){this.removeWidgetProperty(AO.AXIS_ORIGIN);},clearChartScale:function(){this.removeWidgetProperty(AO.SCALE_CHART_WIDTH);this.removeWidgetProperty(AO.SCALE_CHART_HEIGHT);},clearContainerFit:function(){this.removeWidgetProperty(AO.FIT_TO);},persistOnTheFlyShape:function(Aw){var Av=this.GMController,As=Av.model,At=As.getMetricIDsFromIndex([Aw])[0],Au=Av.getResolvedShapeForMetric(Aw),Aq=Av.getOnTheFlyShapeForMetric(Aw);if(Au!==Aq){var Ar=this.readGlobalProperty(AO.METRIC_SHAPES);Ar.setProperty(At,Aq);this.setWidgetPropertyValue(AO.METRIC_SHAPES,Ar.jsonObj);}},updateMetricShape:function(At){var Aq=this.readGlobalProperty(AO.METRIC_SHAPES),Ar=At.did,As=Aq.jsonObj,Au=false;if(Aq!==undefined&&As.hasOwnProperty(Ar)){delete As[Ar];delete As[Ar+AQ];Au=true;}if(Au){this.setWidgetPropertyValue(AO.METRIC_SHAPES,As);}},updateSubtype:function(Aq){this.setWidgetPropertyValue(AO.SUB_TYPE,Aq||this.getWidgetPropertyDefaultValue(AO.SUB_TYPE,{shapeType:this.getChartInfo().shape}));}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm._GMPropertyHandler");var G="allVal",K=mstrmojo,J=K.gm,M=K.VisEnum.ControlType,B=J.FormatingPropertyTag,E=J.WidgetPropertyTag,F=J.GMUtility,L=J.GMProperty,D=J.EnumNGMGridLines;var A=[B.ALL_TEXT_FONT_COLOR,B.ALL_TEXT_FONT_STYLE,B.ALL_AXIS_LABELS_FONT_COLOR,B.ALL_AXIS_LABELS_FONT_STYLE];function H(N,O){return(N===E.REF_LINE_DEF&&O[G].modifiedPropertyKeys[0]===E.REF_LINE_NAME)||(N===B.SHOW_MODEBAR);}function C(){return{suppressData:true,needRefresh:true,actions:[],undoRedoCallback:undefined};}mstrmojo.ngm._NewGMPropertyHandler=mstrmojo.provide("mstrmojo.ngm._NewGMPropertyHandler",mstrmojo.mixin({scriptClass:"mstrmojo.ngm._NewGMPropertyHandler",writeGlobalProperty:function I(S,T,O,R,N){var P=this,U,Q=C();P.GMController.clearShapeFormatsCache();if(S!==""&&S!==undefined){if(this.syning){return ;}if(S===B.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorByMap([this.colorSqureIdentity.comb],T);}return ;}if(S.indexOf("CmbStyle")!==-1){Q=this.processCombineLineStyle(S,T,O);}else{if(S===E.TREND_LINE_DEF){Q=this.processTrendLine(S,T,O);}else{if(S===E.REF_LINE_DEF){Q=this.processReferenceLine(S,T,O);}else{if(S===E.TREND_BUBBLE_FORE_DEF){Q=this.processTrendLineForcast(S,T,O,R);}else{if(S===E.AXIS_SCALE_DATA){Q=this.processAxisScale(S,T,O,R);}else{if(S===E.METRIC_LEVEL_DATA_LABEL){Q=this.processMetricLevelDataLabel(S,T,O);}else{if(S===E.AXIS_ORIGIN){Q=this.processAxisOrigin(S,T,O);}else{if(S===B.ALL_GRID_LINES_SHOW){Q=this.processGridLineShow(S,T);}else{if(S===B.LINE_MARKER_COLOR){Q=this.processLineMarkColor(S,T);}else{if([B.DATA_LABELS_FONT_COLOR,E.DATA_LABEL,E.DATA_LABELS_PLACEMENT,E.DATA_LABEL_FONT_SIZE_CONSTRAINT,E.DATA_LABEL_TEXT_ANGLE,B.DATA_LABELS_FONT_FAMILY,B.DATA_LABELS_FONT_SIZE].indexOf(S)!==-1){Q=this.processPropertiesUniformly(S,T,O,N);if(!P.GMController.isHistogram){Q.needRefresh=false;}}else{Q=this.processPropertiesUniformly(S,T,O,N);}}}}}}}}}}}if(R){return ;}U=this.getPropertyUpdateCallback(S,T,O,N,Q.suppressData);if(Q.suppressData){P.partialUpdate(S,{allVal:T},Q.needRefresh,O);if(U.success){U.success();}}this.submitUpdatesAndPersistXML(Q.actions,U,Q.undoRedoCallback,Q.suppressData,false,Q.puFiltersConfig);},partialUpdate:function(Q,N,V,R,P){var O,T,U=this,S=false;if(this.noData){return ;}F.startTimer({functionName:"VisNewGraphMatrix.partialUpdate",purpose:"Partial update of new graph matrix ("+this.k+")"});O=L.getUnderlyingPropertyNameWithAll(Q);this.resetAxisProps(O);this.resetHTML5Props();this.configureTrendAndRefLine(Q);this.resetGMCtrlCache(Q,N);this.setUpForceUpdateFlag(Q);S=H(Q,N);if(V&&!S){S=this.handlePartialUpdate(this.getPartialUpdateType(Q),P);}if(!S){if(A.indexOf(Q)>=0){O=[Q];}O.forEach(function(W){T=U.updateSingleProperty(W,N,V,R);S=S||T;});if(V){this.clientRerenderGraphMatrix();}}this.clearForceUpdateFlag();F.endTimer();},rerenderChart:function(){if(this.excludeData){return ;}this.setChartLayout();this.resize();},updateSingleProperty:function(P,N,V,Q){var O,S={},W=this.HTML5PROPS,R=N[G],U=N.hasOwnProperty(P)?N[P]:R,T=this.GMController;switch(P){case B.BG_COLOR:case B.BG_FILL_TRANSPARENCY:break;case B.ROW_HEADER_FILL_COLOR:case B.ROW_HEADER_FILL_TRANSPARENCY:this.updateRowValueBackground();this.updateHeaderTitle("row","bg");break;case B.ROW_HEADER_TEXT_FONT_COLOR:case B.ROW_HEADER_TEXT_FONT_STYLE:case B.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case B.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("row","font");break;case B.ROW_VAVLUE_TEXT_FONT_COLOR:case B.ROW_VAVLUE_TEXT_FONT_STYLE:case B.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case B.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:break;case B.COLUMN_HEADER_FILL_COLOR:case B.COLUMN_HEADER_FILL_TRANSPARENCY:this.updateColumnValueBackground();this.updateHeaderTitle("col","bg");break;case B.COLUMN_HEADER_TEXT_FONT_COLOR:case B.COLUMN_HEADER_TEXT_FONT_STYLE:case B.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case B.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("col","font");break;case B.COLUMN_VAVLUE_TEXT_FONT_COLOR:case B.COLUMN_VAVLUE_TEXT_FONT_STYLE:case B.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case B.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:break;case B.V_MATRIX_LINES_COLOR:case B.V_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.v",W.MATRIX_LINE_V);break;case B.H_MATRIX_LINES_COLOR:case B.H_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.h",W.MATRIX_LINE_H);break;case B.X_AXIS_LINE_COLOR:case B.X_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.h",W.AXIS_LINE_X);break;case B.Y_AXIS_LINE_COLOR:case B.Y_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.v",W.AXIS_LINE_Y);break;case B.X_AXIS_ORIGIN_LINE_COLOR:case B.X_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(P,"v",".gm-set-originline",U);break;case B.Y_AXIS_ORIGIN_LINE_COLOR:case B.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(P,"h",".gm-set-originline",U);break;case B.Y_AXIS_TITLE_FONT_COLOR:case B.Y_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontColor("y",N);break;case B.Y_AXIS_LABELS_FONT_COLOR:case B.Y_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontColor("y",N);break;case B.X_AXIS_TITLE_FONT_COLOR:case B.X_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontColor("x",N);break;case B.X_AXIS_LABELS_FONT_COLOR:case B.X_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontColor("x",N);break;case B.ALL_AXIS_LABELS_FONT_COLOR:case B.ALL_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontColor("x",N);this.updateAxisLabelFontColor("y",N);break;case B.ALL_NGM_GRID_LINES_SHOW:this.updateGridLine("x");this.updateGridLine("y");break;case B.X_GRID_LINES_SHOW:this.updateGridLine("x");break;case B.Y_GRID_LINES_SHOW:this.updateGridLine("y");break;case E.LEGEND_VISIBLE:case E.LEGEND_MODE:case E.SCALE_LEGEND_WIDTH:case B.LEGEND_BG_COLOR:case B.LEGEND_BG_FILL_TRANSPARENCY:case B.LEGEND_FONT_COLOR:case B.LEGEND_FONT_STYLE:case B.LEGEND_FONT_SIZE:case B.LEGEND_FONT_FAMILY:this.legendPartialUpdate(P,V);break;case E.LEGEND_POSITION:this.updateLegendPosition(U);break;case B.ALL_TEXT_FONT_COLOR:case B.ALL_TEXT_FONT_STYLE:this.updateAxisLabelFontColor("x",N);this.updateAxisLabelFontColor("y",N);this.updateAxisTitleFontColor("x",N);this.updateAxisTitleFontColor("y",N);break;case E.BANDING:case E.AXIS_ORIGIN:case E.MAX_SIZE_TYPE:case E.MAX_SIZE_VALUE:case E.MIN_SIZE_VALUE:case B.DATA_LABELS_FONT_COLOR:case E.DATA_LABEL:case E.DATA_LABELS_PLACEMENT:case E.DATA_LABEL_FONT_SIZE_CONSTRAINT:case E.DATA_LABEL_TEXT_ANGLE:case E.METRIC_LEVEL_DATA_LABEL:case B.DATA_LABELS_FONT_FAMILY:case B.DATA_LABELS_FONT_SIZE:this.restyleDataLabelData();break;case E.MIN_SIZE_TYPE:if(P===E.MIN_SIZE_TYPE&&this.needLegend&&T.hasSizeBy()){this.sizeByData=T.getSizeByLegendInfo();}this.updateAxisAndCharts(P);this.hUpdateLegend();break;case B.DATA_LABELS_FONT_STYLE:if(V){this.updateAxisAndCharts(P);}else{this.updateChartFontStyle(P,M.GM_DATA_LABEL,U);}break;case E.REF_LINE_DEF:O=U.modifiedPropertyKeys[0];if(O===E.TREND_REF_LINE_COMBINED_STYLE||O===E.TREND_REF_LINE_COLOR){this.updateTrdAndRefLineStyle(".gm-set-referenceline",U,Q);}else{this.updateChartFontStyle(P,M.GM_REF_LABEL,U);}break;case E.TREND_LINE_DEF:this.updateTrdAndRefLineStyle(".gm-set-trendline",U,Q);break;case B.REF_LABELS_FONT_COLOR:case B.REF_LABELS_FONT_STYLE:this.updateChartFontStyle(P,M.GM_REF_LABEL,U);break;default:return false;}return true;},updateGridLine:function(N){var O=N.toUpperCase();this.updateGridLineValue(O);},updateAxisLabelFontColor:function(N,O){this.updateAxesManagerColor(N,"label",O);},updateAxisTitleFontColor:function(N,O){this.updateAxesManagerColor(N,"title",O);},},mstrmojo.mixin(mstrmojo.gm._GMPropertyHandler)));}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.gm.GMEnums","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.ngm.NewGMController","mstrmojo.ngm._NewGMPropertyHandler","mstrmojo.ngm.NewGMInteractivity","mstrmojo.ngm.NewGMProperty","mstrmojo.vi.ui.rw._XtabDE","mstrmojo.ngm.NewGMProperty","mstrmojo._VizSelectionHelper","mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights");mstrmojo.requiresClsP("mstrmojo.vi.ui.rw","_HasVisSelections","selectors._IsMultiUnitControl","selectors._BrushesAndHighlights");mstrmojo.requiresClsP("mstrmojo.ui.menus","ToolbarEditorConfig","MenuConfig","_HasMenuPopup");var d=mstrmojo,Q=mstrmojo.array,U=mstrmojo.hash,s=mstrmojo.dom,K=d.VisUtility,AQ=d.vi.viz,AS=d.gm,r=d.ngm,f=AQ.EnumVizStyles,AN=f.GRAPH_MATRIX,AI=AQ.EnumVisualizationTemplates,B=AQ.EnumDSSDropZones,b=mstrmojo.vi.models.CombineDropZonesModel.EnumDropZones,AT=d.func.wrapMethods,L=AS.EnumGraphType,H=AS.EnumNGMSubtype,AW=AS.GMUtility,S=AS.EnumShape,w=AS.WidgetPropertyTag,k=AS.FormatingPropertyTag,p=AS.EnumContainerFitModes,G=1,AR=1,D=1,j=1,Y=0.75,t=200,l=AS.EnumGridLines,AG=AS.EnumNGMGridLines,AP=mstrmojo.vi.ui.rw.GhostImageContainer;var AV={barchart:mstrmojo.desc(11820,"Bar Chart"),linechart:mstrmojo.desc(8121,"Line Chart"),areachart:mstrmojo.desc(11821,"Area Chart"),bubblechart:mstrmojo.desc(11822,"Bubble Chart"),piechart:mstrmojo.desc(11823,"Pie Chart"),combochart:mstrmojo.desc(11824,"Combo Chart"),histogram:mstrmojo.desc(350,"Histogram"),boxplot:mstrmojo.desc(3156,"Boxplot"),waterfall:mstrmojo.desc(5594,"Waterfall")};var AM=38;var AA=16;var AU=20;var W="transform",V=function(AX,AZ,AY){if(AY){return"translate("+AX+","+AZ+")";}else{return"translate("+AX+"px,"+AZ+"px)";}};function AD(AY,AX,AZ){AY.attr("transform","translate("+AX+","+AZ+")");}function T(AX){return R(AX,"translate");}function I(AX){return R(AX,"rotate");}function R(AY,Ad){var AX=(mstrmojo.dom.isEdge||mstrmojo.dom.isIE||mstrmojo.dom.isIEW3C)?" ":",",Ae=Ad+"(",Af=AY.indexOf(Ae),Aa=Af!==-1;if(!Aa){return{x:null,y:null};}var AZ=Af+Ae.length,Ab=AY.indexOf(AX,AZ),Ac=AY.indexOf(")",AZ);if(Ab===-1){Ab=Ac;}return{x:+(AY.substring(AZ,Ab)),y:+(AY.substring(Ab+1,Ac))||0};}function AE(AX){return AX.model.controller.cmdMgr;}function AL(){var AY=this,AX=AY.getData(),Ae=AX.dz,Ab=AX.gsi;if(!this.excludeData&&!!AX.eg){return true;}var Af=Ab.rows,AZ=Ab.cols,Ad;[AZ,Af].forEach(function(Ah){if(!Ad&&Ah){var Ag=Ah[Ah.length-1];if(Ag&&Ag.did==="-1"){Ad=Ab.mx;}}});var Aa=["Rows","Columns","SizeBy","AngleBy","SliceBy","ColorBy","XAxis","YAxis","BreakBy","AdditionalMetrics"],Ac=true;Q.forEach(Aa,function(Ah){var Ag=Ae[Ah],Ai;if(Ag){Ai=Ag.TemplateMetric;if(Ai){Q.forEach(Ai,function(Aj){Ac=Ac&&(Q.find(Ad,"did",Aj.id)!==-1);});}}});return Ac;}function u(AZ){var AX=AZ.dz;if(!AX){AX=AZ.dz={};}var AY=["Rows","Columns","XAxis","YAxis","BreakBy","ColorBy","SizeBy","SliceBy","AdditionalMetrics","AngleBy","visProp"];Q.forEach(AY,function(Aa){if(!AX[Aa]){AX[Aa]={};}});if(!AX.visProp.fmt){AX.visProp.fmt={};}}function n(AX,AY,AZ){AY.clearCachedXMLDoc();AY.updateDefaults(this.getDefaultProperties(),AX);AY.setTemplateObjectMapping(AZ);AY.consumeJsonFmt(AX);AY.initFromXML();}function AF(AZ,Aa,Ac){var AX=AZ.gts,Ab=true,AY=Ac.supportViewFilterPool={};Q.forEach(AX.row,function(Ad){var Af=Ad.id,Ae;if(Af&&Af!==""){Ae=Aa.supportsViewFilterActions(Ad.id);if(!Ae){Ab=false;}AY[Ad.id]=Ae;}});Q.forEach(AX.col,function(Ad){var Af=Ad.id,Ae;if(Af&&Af!==""){Ae=Aa.supportsViewFilterActions(Ad.id);if(!Ae){Ab=false;}AY[Ad.id]=Ae;}});Ac.supportViewFilter=Ab;}function v(AX){var AZ=this.GMController,Aa=AZ.getChartInfo(),AY;if(Aa.isABL){AY=0;}else{if(Aa.isBubbleOrScatter){AY=1;}else{AY=2;}}if(AX||(this.lastChartType!==undefined&&AY!==this.lastChartType)){this.raiseEvent({name:"regenerateToolbar"});}this.lastChartType=AY;}function P(AX){return{act:"setProperty",nodeKey:this.getData().k,prs:"FormattingWidget",pri:4,v:AW.replaceSpecialChars(AX)};}function AJ(AY){var AX;(AY.children&&AY.children||[]).forEach(function(Aa,AZ){Aa=AJ(Aa);if(AZ){AX=AX.nextSibling=Aa;}else{AX=AY.firstChild=Aa;}});return AY;}function AC(AX,Aa){var AY={children:[]};for(var AZ in AX){AY.children.push(AX[AZ]);}a(AY,Aa);return AJ(AY);}function a(AX,AY){if(AY--){AX.children.forEach(function(AZ){a(AZ,AY);});}else{delete AX.children;}}function y(AX){return AX._rct+AX._cct<=2;}function AB(AX){return AX&&Math.ceil(parseInt(AX,10)/72*96);}function h(Aa){var AX=mstrmojo.dom.isMobile,AZ=Aa.getWidgetWidth(),AY=ngm.Modebar.MODE;if(AX){if(AZ<212){return AY.MINI;}else{if(AZ<550){return AY.COMPACT;}else{return AY.NORMAL;}}}else{if(AZ<168){return AY.MINI;}else{if(AZ<400){return AY.COMPACT;}else{return AY.NORMAL;}}}}function O(){var AZ=this.layouter,AY=AZ.getVisDim(),AX=this._slots;if(AY.width!==this.getWidth()||AY.height!==this.getHeight()){AZ.setDeltaX(0);AZ.setDeltaY(0);AZ.setScrollW(0);AZ.setScrollH(0);if(AX){AX.domColContainer.node().scrollLeft=0;AX.domRowContainer.node().scrollTop=0;}}}mstrmojo.ngm.VisNewGraphMatrix=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo.ngm._NewGMPropertyHandler,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights,mstrmojo.vi.ui.rw._XtabDE,mstrmojo._VizSelectionHelper],{scriptClass:"mstrmojo.ngm.VisNewGraphMatrix",cssClass:"gm-light-theme",noData:false,zIndex:1,formattingMode:false,curSelOptLvl:undefined,handleDndForParentNode:true,avatarCssClass:"mstrmojo-VIUnitList",normalizedIdCache:{},draggable:true,mainContainerNode:"domMainContainer",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px; position:absolute; height:{@height}px; left:{@left}px; top:{@top}px; z-index:{@zIndex};" ><table><tr><td></td><td></td></tr><tr><td><div class="gm-main-container"></div></td><td></td></tr><tr><td></td><td></td></tr></table></div>',markupSlots:{domMainContainer:function(){return this.domNode.children[0].children[0].children[1].children[0].children[0];},legendTop:function(){return this.domNode.children[0].children[0].children[0].children[0];},legendRight:function(){return this.domNode.children[0].children[0].children[1].children[1];},legendBottom:function(){return this.domNode.children[0].children[0].children[2].children[0];}},init:function(AZ){this.HTML5PROPS={};this.active=false;this._super(AZ);if(!window.d3v4){var AX=window.d3;delete window.d3;mstrmojo.requiresDepLib(mstrmojo.getJsRoot()+"libraries/d3.v4.js");window.d3v4=d3;window.d3=AX;}var AY=new r.NewGMProperty();this.property=this.addDisposable(AY);this.enableDomDommy=false;this.resizenow=true;this.highlights=[];this.rightMouseHighlights=[];this.hoveredShape=[];this.interactor=this.addDisposable(new r.NewGMInteractivity({widget:this}));},redraw:function(){if(this.noData){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});return false;}var AX=this;if(!this.layouter){this.initLayouter();}var AY=this.layouter.getVisDim();if(AY.width!==this.getWidth()||AY.height!==this.getHeight()){if(mstrApp&&mstrApp.isExporting){this.resize();}else{clearTimeout(this.resizeNow);this.resizeNow=setTimeout(function(){AX.resize();},250);}return true;}return false;},resize:function(){console.log("resize");var AX=this.layouter;O.call(this);AX.setVisDimWidth(this.getWidth());AX.setVisDimHeight(this.getHeight());AX.setWidgetWidth(this.getWidth());AX.setWidgetHeight(this.getHeight());this.placeLegend();if(this._slots){this.prepareHeaderDimensions();this.setChartLayout();this.sizeRowsAndCols();this.plotPlotly();this.postPlotly();}},destroy:function(){if(this.contextmenuListener){this.contextmenuListener.clear();}if(this._super){this._super();}},update:function g(Aa){var Af=this._super(Aa);if(!Af){return Af;}if(!AL.call(this)){mstrmojo.err({name:"Currently we do not support metric selector targeting to Widget",message:"Attribute/Metric in Dropzone doesn't match Grid Template"});return Af;}var Ag=this,An=Ag.model,Am=this.getData(),Al,AZ,Aj,Ai=this.property,Ak=An.docModel,Ab=Ak.datasets,AY,Ac;if(K.isOnExpressMode()){this.noData=Am.eg!==undefined;if(!Am.eg){this.INVALID_TEMP=AW.isInvalidTemplate(Am);}if(this.noData||this.INVALID_TEMP){this.errorMsg=AW.getInvalidTemplateErrMsg(Am.eg);return Af;}}Ag.sid=Am.sid;u(Am);AW.startTimer({functionName:"VisNewGraphMatrix.update",purpose:"JSON loading & consuming ("+this.k+")"});Al=Am.dz;AZ=Al.visProp.fmt;var Ah,Ae={},Ad,AX={};for(AY in Ab){if(Ab.hasOwnProperty(AY)){Ac=Ab[AY];Ad=Ac.did;Ah=Ac.att.concat(Ac.mx);Q.forEach(Ah,function(Ao){Ae[Ao.did]=Ao.t;AX[Ao.did]=Ad;});}}this.itemId2DsIdMap=AX;n.call(this,AZ,Ai,Ae);AW.destroyDisposable(this,this.GMController);Aj=this.GMController=this.addDisposable(new r.NewGMController({view:this,property:this.property,defn:this.defn,firstRes:Am,xtabModel:An}));Aj.msgCenter={};this.property.updateChartProps(Aj.getChartInfo().tp);this.noData=!this.excludeData&&!!Am.eg;if(!this.noData){Aj.postInit();this.absorbGraphStyle();this.resetHTML5Props();AF.call(this,Am,An,Aj);Aj.resetChartInfo();v.call(this,true);}else{this.errorMsg=Am.eg;}Aj.resetFitTo();AW.endTimer(undefined,true);return Af;},isEmpty:function N(){return(this.GMController.isHistogram&&this.gridInfo&&(!this.gridInfo.mx.length||this.gridInfo.cols.length===1))||this.noData||!this.GMController||this.GMController.isEmptyVis();},getChartInfo:function(){return this.GMController.getChartInfo();},getVisEmptyMsgControls:function C(){var AY=this.GMController,Ac=AY.getAggregatedVisType(),AZ=AV[Ac]||mstrmojo.desc(5614,"Graph Matrix"),AX=AP.getVisDesc(Ac),Ab=K.getAttMetricCount.call(this);if(this.excludeData){return[{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",cssClass:Ac,visName:AZ,visDropzoneMsg:mstrmojo.vi.ui.rw.FreezingImageContainer.getVisDropzoneMsg(Ab.attCount,Ab.metricCount)}];}var Aa;if(this.noData){if(this.model.data.egt===2){Aa=K.getVisEmptyMsg.call(this,"AE_ERROR");}else{Aa=K.getVisEmptyMsg.call(this,"NODATA_OTHERERROR");}}else{Aa=K.getVisEmptyMsg();}if(!(mstrApp&&mstrApp.isWSStyling)||this.noData){return[{scriptClass:"mstrmojo.Container",markupString:Aa,markupSlots:{containerNode:function(){return this.domNode;}}}];}return[{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",cssClass:Ac,visName:AZ,visDesc:AX}];},isClearAllDisabled:function AO(){var AX=this.findSelectorControl();if(!!AX&&!AX.showall){return true;}return false;},resetSelectionEmptyFlag:function(){this.selectionEmptyFlag=U.isEmpty(this.getSelectionHash());},addToggleToolbarMenuItem:function(AX){var Aa=this,AZ=function(Ab){Aa.writeGlobalProperty("showModeBar",Ab);Aa.modebar.setVisibility(Ab);};var AY=[{n:mstrmojo.desc(170,"Hide toolbar"),cls:"htb",fn:function(){AZ(false);},dsbld:false},{n:mstrmojo.desc(171,"Show toolbar"),cls:"stb",fn:function(){AZ(true);},dsbld:false}];if(!this.getWidgetPropertyValue("showModeBar")){AY.reverse();}AX.addDualStateItem(this.id,AY[0],AY[1]);},absorbGraphStyle:function(){var Ac=this,AX,AY=this.getChartInfo(),Ag=mstrmojo.chart.common.Utility,Aa=this.defn.gpp,AZ=Aa&&Aa.gp,Ab;AX={isGridChart:AY.isGrid,isPieShape:AY.isPie,isVertical:AY.dirc===AS.EnumABLDirection.VERTICAL};var Af,Ae=1,Ad=false;Q.forEach(AZ,function(Ah){Ab=Ag.transformProperty(Ah,0,AX);if(Ab&&Ab.Name){Ad=false;switch(Ab.Name){case"ShowSeriesDataLabel":if(!Af){Af=Af||Ab.Value;}break;case"DataLabel":Ae=Ab.Value;Ad=AX.isPieShape;break;default:Ad=true;break;}if(Ad&&Ac.property.readItem(Ab.Name,true)===undefined){Ac.setWidgetPropertyValue(Ab.Name,Ab.Value);}}});if(Af===false){Ac.setWidgetPropertyValue("DataLabel",1);}else{if(Af===true){Ac.setWidgetPropertyValue("DataLabel",Ae);}}},clientRerenderGraphMatrix:function(){this.update();this.GMController.reRenderGM();},applyHTML5Props:function(AZ){G=parseInt(AZ.MATRIX_LINE_V.borderWidth,10)||1;AR=parseInt(AZ.MATRIX_LINE_H.borderWidth,10)||1;D=parseInt(AZ.AXIS_LINE_Y.borderWidth,10)||1;j=parseInt(AZ.AXIS_LINE_X.borderWidth,10)||1;var AX=Math.floor((parseInt(AZ.AXIS_TITLE_X.fontSize,10)||11)/Y+0.5);var AY=Math.floor((parseInt(AZ.AXIS_TITLE_Y.fontSize,10)||11)/Y+0.5);AZ.AXIS_TITLE_X.lineHeight=AX+"px";AZ.AXIS_TITLE_Y.lineHeight=AY+"px";},postFillGMControllerStyle:function q(){var AY=this.GMController,AX=this.HTML5PROPS;AY.rhStyles=AX.RH;AY.chStyles=AX.CH;AY.xTitleStyles=AX.AXIS_TITLE_X;AY.yTitleStyles=AX.AXIS_TITLE_Y;},getNumericAxisOptions:function(AX){var AY=this.GMController;return AY.getNumericAxisOptions(AX);},loadNGMStrings:function(){this.tooltipStrings={boxPlot:{maxOutlier:mstrmojo.desc(15795,"Max Outlier"),upperWhisker:mstrmojo.desc(15771,"Upper Whisker"),q3:mstrmojo.desc(15699,"Q3"),median:mstrmojo.desc(15605,"Median"),mean:mstrmojo.desc(15608,"Mean"),sd:mstrmojo.desc(2130,"Standard Deviation"),q1:mstrmojo.desc(15603,"Q1"),lowerWhisker:mstrmojo.desc(15770,"Lower Whisker"),minOutlier:mstrmojo.desc(15794,"Min Outlier"),points:mstrmojo.desc(3704,"Points")},histogram:{bin:mstrmojo.desc(15611,"Bin"),count:mstrmojo.desc(15612,"Count")},waterfall:{subtotal:mstrmojo.desc(9713,"Subtotal")}};this.toolbarStrings={select2d:mstrmojo.desc(15641,"Box Select"),lasso2d:mstrmojo.desc(15642,"Lasso Select"),zoom2d:mstrmojo.desc(15766,"Box Zoom"),pan2d:mstrmojo.desc(15635,"Pan"),zoomIn2d:mstrmojo.desc(5567,"Zoom In"),zoomOut2d:mstrmojo.desc(15636,"Zoom Out"),resetScale2d:mstrmojo.desc(15639,"Reset Axes"),hoverCompareCartesian:mstrmojo.desc(15638,"Show data in category on hover"),NA:mstrmojo.desc(15774,"Not Applicable")};},getWaterfallOptions:function(){var Af={},Ad=k.TOTAL_SHOW,AX=k.TOTAL_LABEL,Ab=k.TOTAL_COLOR,Ae=k.POSITIVE_COLOR,AY=k.NEGATIVE_COLOR,Ac=k.INT_SUM_SHOW,Aa=k.INT_SUM_COLOR,AZ=k.INT_SUM_FULL;Af[Ad]=this.getWidgetPropertyValue(Ad);Af[AX]=this.getWidgetPropertyValue(AX);Af[Ab]=AW.decodeColor(this.getWidgetPropertyValue(Ab));Af[Ae]=AW.decodeColor(this.getWidgetPropertyValue(Ae));Af[AY]=AW.decodeColor(this.getWidgetPropertyValue(AY));Af[Ac]=this.getWidgetPropertyValue(Ac);Af[Aa]=AW.decodeColor(this.getWidgetPropertyValue(Aa));Af[AZ]=this.getWidgetPropertyValue(AZ);return Af;},getBoxPlotOptions:function(){var Aj={},Af,Ai,AZ,AX,Ac,Ab=k.MEAN_SD,Ae=k.SHOW_OUTLIERS,Ad=k.POINT_SIZE,AY=k.JITTER,Ah=k.POINT_POS;var Ag=[false,true,"sd"],Aa=["outliers","all"];Af=Ag[this.getWidgetPropertyValue(Ab)];Ai=this.getWidgetPropertyValue(Ae);AZ=this.getWidgetPropertyValue(k.JTR_TYPE);Ac=this.getWidgetPropertyValue(k.PTSZ_TYPE);AX=this.getWidgetPropertyValue(k.PTPOS_TYPE);Aj[Ab]=Af;Aj[Ae]=Aa[Ai];Aj[AY]=this.getWidgetPropertyValue(AY);Aj[Ad]=Ac===AS.EnumBoxPlotOutliers.POINT_SIZE?Ac:this.getWidgetPropertyValue(Ad);Aj[Ah]=AX===AS.EnumBoxPlotOutliers.POINT_POS?AX:this.getWidgetPropertyValue(Ah);return Aj;},getHistogramOptions:function(){var Al={},Ai,Ag,Aj,Ac=k.NUM_BINS,Ab,Ah,AX,Af,AZ,Aa,Ak;Ai=this.getWidgetPropertyValue(k.CUSTOM_BINS_MODE);Ag=this.getWidgetPropertyValue(k.MANUAL_BINS_MODE);Aj=this.getWidgetPropertyValue(Ac);if((Ai===AS.EnumHistogram.MANUAL||Ai==="false")&&Ag===AS.EnumHistogram.BY_BIN_NUMBER){Af=this.GMController.getExtremes(0,0);Ab=Af.YMinValue;Ah=Af.YMaxValue+(Ac>1?Math.min((Af.YMaxValue-Ab)/(Aj-1)*1e-8,0.01):0.000001);AX=(Ah-Ab)/Aj;Al.xBins={start:Ab,end:Ah,size:AX};}else{if(Ai===AS.EnumHistogram.MANUAL||Ai==="false"){var Ae=this.GMController.getExtremes(0,0);if(this.getWidgetPropertyValue(k.RANGE_TYPE)===AS.EnumHistogram.DATASET){Af=this.GMController.getExtremes(0,0);AZ=Af.YMinValue;Aa=Af.YMaxValue+(Ac>1?Math.min((Af.YMaxValue-AZ)/(Aj-1)*1e-8,0.01):0.000001);}else{AZ=this.getWidgetPropertyValue(k.XBINS_START);Aa=this.getWidgetPropertyValue(k.XBINS_END);}Ak=this.getWidgetPropertyValue(k.XBINS_SIZE);Ab=Ae.YMinValue;Al.xBins={start:AZ,end:Aa,size:Ak};if(Ab<Aa&&Ab>(AZ+Ak)){var AY=(Ab-AZ)/Ak;var Ad=AZ+(Math.floor(AY)*Ak);Al.originalStart=AZ;Al.xBins.start=Ad;}}}return Al;},getEnhancedOptions:function(AY,Ac,AZ,AX){var Ab=Ac.chartDirection===2?"y":"x",Aa=Ac.getHeaderFormat(Ac["get"+Ab.toUpperCase()+"AxisHeaders"](AZ,AX));AY=AY||{};AY.nf=Aa;return AY;},getHostStructure:function(){return this.GMController.getHostStructure();},getReferenceAxisOption:function(){return this.GMController.getReferenceAxisOption();},isMajorGridLineShow:function(){var AY=this.getWidgetPropertyValue(k.MAJOR_GRID_LINES_SHOW),AZ=this.GMInfo,AX=false;if(AY===l.AUTO){AX=AZ&&(AZ.nRows===1&&AZ.nCols===1);}else{if(AY===l.SHOW){AX=true;}}return AX;},getVisType:function E(){var Ab=this.getWidgetPropertyValue("visType");if(Ab===undefined){var Aa=this.GMController.chartType,AZ=this.getChartInfo(),AX=AS.EnumABLDirection.VERTICAL;if(AZ.isCombo){Ab=AI.GRAPHCOMBINATIONBARAREADUALAXIS;}else{if(AZ.isGrid){var AY=this.getWidgetPropertyValue(w.SHAPE);if(AY===S.LINE){Aa=L.LINE;}else{if(AY===S.BAR){Aa=L.BAR;}else{if(AY===S.AREA){Aa=L.AREA;}else{if(AY===S.PIE){Aa=L.BAR;}else{if(AY===S.RING){Aa=L.BAR;}else{Aa=L.BAR;}}}}}}switch(Aa){case L.AREA:Ab=(AZ.dirc===AX)?AI.GRAPHMATRIXVERTICALAREAAUTOMATIC:AI.GRAPHMATRIXHORIZONTALAREAAUTOMATIC;break;case L.BAR:Ab=(AZ.dirc===AX)?AI.GRAPHMATRIXVERTICALBARAUTOMATIC:AI.GRAPHMATRIXHORIZONTALBARAUTOMATIC;break;case L.LINE:Ab=(AZ.dirc===AX)?AI.GRAPHMATRIXVERTICALLINEAUTOMATIC:AI.GRAPHMATRIXHORIZONTALLINEAUTOMATIC;break;case L.SCATTER:case L.BUBBLE:Ab=AI.GRAPHMATRIXBUBBLECIRCLEMM;break;case L.PIE:Ab=AI.GRAPHMATRIXPIE;break;case L.GRID:break;}}}return{s:AN,vt:Ab};},getChartStyle:function(){return this.node.data.visName;},getExistingRefLineOptions:function(){return[];},getSubType:function(){var AX=this.getVisType();switch(AX.vt){case AI.GRAPHHORIZONTALBARCLUSTERED:case AI.GRAPHVERTICALBARCLUSTERED:case AI.GRAPHHORIZONTALAREAABSOLUTE:case AI.GRAPHVERTICALAREAABSOLUTE:return 0;case AI.GRAPHMATRIXHORIZONTALBARSTACKED:case AI.GRAPHMATRIXVERTICALBARSTACKED:case AI.GRAPHMATRIXHORIZONTALAREASTACKED:case AI.GRAPHMATRIXVERTICALAREASTACKED:return 1;case AI.GRAPHMATRIXHORIZONTALBARPERCENT:case AI.GRAPHMATRIXVERTICALBARPERCENT:case AI.GRAPHMATRIXHORIZONTALAREAPERCENT:case AI.GRAPHMATRIXVERTICALAREAPERCENT:case AI.GRAPHMATRIXVERTICALWATERFALL:case AI.GRAPHMATRIXHORIZONTALWATERFALL:return 2;default:return 0;}},copyRefLineInfoForSwap:function Z(){return[];},legendPartialUpdate:function(){this.layouter.setPlotlyLayout("showlegend",this.readGlobalProperty(w.LEGEND_VISIBLE));},copyTrendLineInfoForSwap:function(){return[];},getPersistAction:function(AX){AX=AX||this.property.getXMLString();return P.call(this,AX);},getModelController:function(){return this.model.controller||this.getDocModel().controller;},getXTabRefreshCallBack:function(){return this.getModelController()._getXtabCallback(this);},getUnSilentUndoRedoCallback:function(Aa,AY){var AZ=this.getXTabRefreshCallBack(),AX=false;Q.forEach(Aa,function(Ab){if(Ab.act==="updateElementsPropertiesMap"){AX=true;return false;}});if(AX){AT(AY.getUpdateColorMapCallback(),AZ);}return AZ;},updateSelections:function(){this.highlight(this.getSelectionType(),this.getSelectionHash());},clearSelectedHighlights:function(){var AX=this,AY=AX._slots.domChart.node();AX.interactor.onPaperClick(AX,AY);},raiseEventGlobalPropertyChanged:function(AZ,AY,AX){var Aa={name:"propertyChanged",n:AZ,opt:AX,v:AY};this.raiseEvent(Aa);return Aa;},submitUpdatesAndPersistXML:function x(Ab,Aj,AZ,AX,Ai,Ad){Ab=Ab||[];if(this.isXMLDirty()){Ab.push(this.getPersistAction());}if(Ab.length===0){return ;}var Ae=this,Ac,Aa,AY={},Ah=Ae.getDocModel(),Ag=Ah.getDataService();if(Ad){Aa=this.model.getDataService().newRetrievalKeysConfig();Aa.addNode(this.k,Ad);Ab[0].partialRetrieval=Aa;}if(AX){U.copy(mstrmojo.DocDataService.SUPPRESS_DATA,AY);}if(Ai){U.copy(mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION,AY);}if(AX&&AZ){Ac={silent:true,undo:AZ.undo,redo:AZ.redo};}else{Ac={callback:this.getUnSilentUndoRedoCallback(Ab,Ah)};}AE(Ae).execute({execute:function Af(){var Ak=Ag.newUpdate(this,undefined);Ak.add(Ab,Aj,AY);if(!AX){this.submitUpdate(Ak);}else{this.submitSilent(Ak.actions);}Ae.resetXMLDirtyFlag();},urInfo:Ac});},setActive:function(AX){this.active=AX;d3v4.select(this.domMainContainer).classed("active",this.active);},postBuildRendering:function(){this.waitingForData=this.waitingForData||this.excludeData&&mstrApp.isAppStatePause();if(this.waitingForData){if(this.excludeData&&mstrApp.isAppStatePause()){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});}return ;}AW.startTimer({functionName:"VisNewGraphMatrix.postBuildRendering",purpose:"preplot"});if(this.noData){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});return ;}if(this.excludeData){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});return ;}this.initLayouter();this.sizeMainContainer();if(!this.isEmpty()){this.loadNGMStrings();this._slots=this.makeSlots(this.domMainContainer);this.initAxesManager();this.generatePlotlyData();this.prepareHeaderDimensions();this.generateDataLabelData();this.setChartLayout();this.renderHeader();this.sizeRowsAndCols();AW.endTimer(undefined,true);AW.startTimer({functionName:"VisNewGraphMatrix.postBuildRendering",purpose:"plot"});this.plotPlotly();AW.endTimer(undefined,true);AW.startTimer({functionName:"VisNewGraphMatrix.postBuildRendering",purpose:"postplot"});this.postPlotly();var AX=this.getExp(),AY=this.getRowsAndCols();K.modifyScExp(AX,AY,this.model,this.normalizedIdCache);}else{AW.endTimer(undefined,true);AW.startTimer({functionName:"VisNewGraphMatrix.postBuildRendering",purpose:"postplot"});}if(this._super){this._super();}AW.endTimer(undefined,true);},makeSlots:function(AZ){var AY='<div class="row-divider-viewport"><div class = "row-divider-lines"></div></div><div class="col-divider-viewport"><div class = "col-divider-lines"></div></div><div class = "header-lines"></div><table class="ngm"><tr><td><div class="col-left-no-axis"></div></td><td colspan="3"><div class="col-container overflow-hidden"><div class="col-left"></div><div class="col-content"></div><div class="col-right"></div></div></td></tr><tr class="axis-row"><td style="vertical-align:top"><div class="row-top"></div></td><td><div class="axis-left"></div></td><td><div class="axis-content"></div></td><td><div class="axis-right"></div></td></tr><tr><td style="vertical-align:top"><div class="row-container overflow-hidden"><div class="row-content"></div><div class="row-bottom"></div></div></td><td colspan="3"></td></tr></table>';AZ.innerHTML=AY;var AX={rowViewport:AZ.children[0],rowDividers:AZ.children[0].firstChild,colViewport:AZ.children[1],colDividers:AZ.children[1].firstChild,headerLines:AZ.children[2]};var Ac;for(Ac in AX){AX[Ac]=d3v4.select(AX[Ac]);}this.lines=AX;var Aa=AZ.children[3].firstChild,Ab={tbody:Aa,domColContainer:Aa.firstChild.children[1].firstChild,domColLeftNoAxis:Aa.firstChild.firstChild.firstChild,domColLeft:Aa.firstChild.children[1].firstChild.firstChild,domColContent:Aa.firstChild.children[1].firstChild.children[1],domColRight:Aa.firstChild.children[1].firstChild.children[2],domRowContainer:Aa.children[2].firstChild.firstChild,domRowTop:Aa.children[1].firstChild.firstChild,domRowContent:Aa.children[2].firstChild.firstChild.firstChild,domRowBottom:Aa.children[2].firstChild.firstChild.children[1],domAxisLeft:Aa.children[1].children[1].firstChild,domAxisContent:Aa.children[1].children[2].firstChild,domAxisRight:Aa.children[1].children[3].firstChild,domChart:Aa.children[2].children[1]};for(Ac in Ab){Ab[Ac]=d3v4.select(Ab[Ac]);}return Ab;},setColorByOptions:function(AZ,Ab,Ad){var AY=ngm.converter.SCALE.attrColorMapping,Aa=Ab.ColorBy||[],Ah=AZ.ColorBy||[],Ae=this.GMController,Af=Ae.colorByInfo.thresholds,Ag=ngm.canvas.getContext(),Ai=Af?Af.map(function(Aj){return{text:Aj.flr+"% - "+Aj.ceil+"%",color:Aj.fmt.bc};}):Aa.map(function(Aj,Ak){return{text:Aj,color:AY(Ah[Ak])};}),Ac;if(Ai.length<AU){var AX=0;Ai.forEach(function(Aj){AX=Math.max(AX,Ag.measureText(Aj.text).width);});Ad.maxLegendItem=Ae.maxLegendItem=AX+AM+AA;}else{Ad.maxLegendItem=Ae.maxLegendItem=Ag.measureText(Ai.reduce(function(Ak,Aj){return Aj.text.length>Ak.length?Aj.text:Ak;},"")).width+AM+AA;}if(Ae.colorByInfo){Ac=Ae.getColorByAttrsID().map(function(Aj){return AW.restoreSpecialChars(Ae.getAttributeById(Aj).n);}).join(";");}else{Ac=AW.restoreSpecialChars(Ae.metricInfos[Ae.dz.ColorBy.TemplateMetric[0].id].n);}this.colorByTitles=Ad.colorByTitles=Ac;this.colorByOptions=Ai;},drawLegend:function(At,Av,Ae){var Ad=this.colorByOptions;if(!Ad.length){return ;}var Ar=20;var Ag=20;var AY=true;var AZ=4;var An=20;var Aq=12;var Ak=this.GMController.maxLegendItem;var Af=10;var Al=this.legendPosition==="right";var Ah=2,Ay=1;var Ao=+AY;if(Al){Ao=Ad.length;Ay=1;Ah=Math.min(Ad.length,Math.ceil(Ae/Ar));Av*=0.25;}else{Ay=Math.max(1,Math.floor(Av/Ak));Ao=Math.ceil(Ad.length/Ay);Ah=Math.min(2,Ao);Ae=Ah*Ar;}var As=Ak>Av;function Am(){var Az=d3v4.select(this),A1=Az.text(),A0=Az.node().getComputedTextLength();while(AM+A0+AA>Av&&A1.length>0){A1=A1.slice(0,-1);Az.text(A1+"...");A0=Az.node().getComputedTextLength();}}var Aa=At.append("g").attr("class","colorByLegend").attr("font-family","Arial").attr("font-size",11).attr("text-anchor","start");if(AY){Aa.append("text").attr("x",12).attr("y",9.5).attr("dy","0.32em").text(this.colorByTitles);}var Ab=Aa.append("rect").attr("class","bg").attr("pointer-events","all").attr("touch-action","none").attr("fill","white");function Ax(A2){var Az=0,A3=0;Aa.selectAll(".items").remove();var A0=Aa.append("g").attr("class","items").selectAll("g").data(A2).enter().append("g").attr("transform",function(A6,A4){if(Al){return"translate(0,"+(A4+AY)*Ar+")";}else{var A5="translate("+Az*Ak+","+(A3+AY)*Ar+")";if(++Az===Ay){Az=0;A3++;}return A5;}});A0.append("rect").attr("pointer-events","none").attr("touch-action","none").attr("x",Aq).attr("width",12).attr("height",12).attr("fill",function(A4){return A4.color;});var A1=A0.append("text").attr("x",AM).attr("y",9.5).attr("pointer-events","none").attr("touch-action","none").text(function(A4){return A4.text;});if(As){A1.each(Am);}}function Ap(A3){var A2=0;var A0=Ae-An;if(Al){var Az=(Ao*Ar-Ae)/(A0-A2);return Ad.slice(A3*Az/Ar,A3*Az/Ar+Ah);}else{var A1=Math.floor((Ao-Ah)/(A0-A2)*A3);return Ad.slice(A1*Ay,(A1+Ah)*Ay);}}if(Ao>Ah){Ax(Ap(0));function Aj(A1,A0){var A2=(+d3v4.select(A1).attr("y"));var Az=A0-A2;A2+=Az;if(A2<0){A2=0;}if(A2+An>Ae){A2=Ae-An;}d3v4.select(A1).attr("y",A2+Ag);Ax(Ap(A2));}var AX=Aa.append("rect").attr("class","scrollbar").attr("x",(Al?Math.min(Av,Ak):Av)-Af).attr("y",AY*Ar).attr("width",AZ).attr("height",An).attr("fill","#808BA4");var Ai=0;Aa.on("wheel",function(){Ai+=(d3v4.event.deltaY<0?-1:1);if(Ai<0){Ai=0;}else{if(Ai>Ao){Ai=Ao;}}Aj(AX.node(),Ai/Ao*Ae);});function Aw(Az){Ai+=(-Az.deltaY<0?-1:1);if(Ai<0){Ai=0;}else{if(Ai>Ao){Ai=Ao;}}Aj(AX.node(),Ai/Ao*Ae);}function Au(){}K.addBasicTouchSupport(Ab.node(),this,undefined,Aw.bind(this),Au.bind(this));}else{Ax(Ad);}Ab.attr("y",Ag).attr("width",Aq+Aa.node().getBBox().width+6).attr("height",Aa.node().getBBox().height);if(Al){var Ac=(Ae-Aa.node().getBBox().height>>1);Aa.attr("transform","translate(0,"+Math.max(Ac,0)+")");}return Aa;},initLayouter:function(){var AX=this.GMController;this._rct=AX.getRowChartCount();this._cct=AX.getColChartCount();this.layouter=new ngm.Layout(this._cct,this._rct,this.getWidth(),this.getHeight());this.calcMinCellDim();},calcMinCellDim:function(){var Ac=this._cct,Af=this._rct,Ag=this.GMController,AZ=this.layouter,Ab,Ai,Aa,AY=1,Ae=1,Ah=28,Ad=60,AX=Ag.getAttributeAxesLetters();["x","y"].forEach(function(Aj){var Al=[],Ak=Aj==="x";var Am=Ak?Ac:Af;if(Ag.isHistogram){Al.push(Ad);AZ._cellNumDataPoints[Aj][0]=1;}else{if(AX.indexOf(Aj)>-1){AZ._totalNumDataPoints[Aj]=0;for(Aa=0;Aa<Am;Aa++){Ab=Ak?Ag.getAxisLabels(0,Aa)[Aj].length:Ag.getAxisLabels(Aa,0)[Aj].length;AZ._cellNumDataPoints[Aj][Aa]=Ab;AZ._totalNumDataPoints[Aj]+=Ab;Ai=(AY*Ae)*(Ab+0.5);Al.push(Math.max(Math.floor(Ai+0.5),Ah));}}else{for(Aa=0;Aa<Am;Aa++){AZ._cellNumDataPoints[Aj][Aa]=1;Al.push(Ad);}}}if(Aj==="x"){AZ.setMinWidths(Al);}else{AZ.setMinHeights(Al);}});},sizeRowsAndCols:function(){var Aa=this.layouter,AY=this.domMainContainer.getElementsByClassName("ngm-row-header"),AZ=this.domMainContainer.getElementsByClassName("ngm-col-header");AX(AY,"height",Aa.getCellHeight.bind(Aa));AX(AZ,"width",Aa.getCellWidth.bind(Aa));function AX(Ab,Ae,Ad){for(var Ac=0;Ac<Ab.length;Ac++){Ab[Ac][Ae]=Ad(Ac);}}},sizeMainContainer:function(){var AX=this.layouter;d3v4.select(this.domMainContainer).style("width",AX.getWidgetWidth()+"px").style("height",AX.getWidgetHeight()+"px");},initAxesManager:function(){this.axesManager={x:{title:this.getAxisProps("X","TITLE"),label:this.getAxisProps("X","LABELS")},y:{title:this.getAxisProps("Y","TITLE"),label:this.getAxisProps("Y","LABELS")},x2:{},y2:{}};},updateGridLineValue:function(AZ){var Ab=AZ.toUpperCase(),AY=AZ.toLowerCase(),Ac=this.chartInfo.ori,Ae=this.getWidgetPropertyValue(k[Ab+"_GRID_LINES_SHOW"]),Aa=AY==="x"?AG.SHOW_X:AG.SHOW_Y,AX=(Ac==="v"&&AY==="y")||(Ac==="h"&&AY==="x"),Ad=(Ae===AG.SHOW)||(Ae===Aa)||(Ae===AG.AUTO&&AX);this.setAxesManager(AY,"showGrid",Ad);},updateAxesManagerColor:function(AZ,AY,AX){this.axesManager[AZ][AY].font.color=AW.decodeColor(AX.allVal);},updateAxesManagerNumberFormat:function(AY,AX,AZ){this.axesManager[AY].label.nf=AZ;},setAxesManager:function(Aa,AZ,Ab){var AY=AZ.split("."),AX=this.axesManager[Aa];AY.forEach(function(Ac,Ad){AX[Ac]=AX[Ac];if(Ad<AY.length-1){AX=AX[Ac];}});AX[AY[AY.length-1]]=Ab;},renderHeader:function(){var Ax=this.GMController,Ay=this,An=this.layouter,Ac=this._rct,A2=this._cct,Ai=Ax.getRowHeaderTree(),Ak=Ax.getColHeaderTree(),AY=Ai.length,Aa=Ak.length,A1=AC(Ai[0],AY),AZ=AC(Ak[0],Aa),Aj=Ax.dz,Am=this.hasYAxis;this._colSpan=(Aj.XAxis.TemplateMetric&&Aj.YAxis.TemplateMetric)?Aj.XAxis.TemplateMetric.length:(Aj.Columns.MetricNames&&Aj.XAxis.TemplateMetric?Aj.XAxis.TemplateMetric.length:1);this._rowSpan=1;var At=Am?this._slots.domColLeft:this._slots.domColLeftNoAxis;var Ad=this._slots.domRowTop.append("table").style("table-layout","fixed").append("tr"),Au=At.append("table").style("table-layout","fixed");var Ab=Ax.getRowHeaderTitles(),Ah=Ax.getColumnHeaderTitles();var As;for(As=0;As<AY;As++){Ad.append("td").text(Ab[As]);}for(As=0;As<Aa;As++){var Ag=Au.append("tr"),Aq,Az=Am?0:AY-1;for(var Ar=0;Ar<Az;Ar++){Aq=Ag.append("td");}Ag.append("td").text(Ah[As]);}this._slots.domRowContent.append("table");var Av=this._slots.domColContent.append("table");var AX;for(As=0;As<A2;As++){AX=Av.append("col");AX.classed("ngm-col-header",true);}if(A1&&A1.firstChild){this.renderRow(A1.firstChild,this._slots.domRowContent.node().firstChild,null,0);}if(AZ&&AZ.firstChild){this.renderCol(AZ.firstChild,this._slots.domColContent.node().firstChild,0,0);}if(An.getAxisLineLeft().length!==Ac&&Ac!==1){An.setAxisLineLefts(this.calcMetricNameLines(Ac,An.getAxisLineLeft()));}if(An.getAxisLineTop().length!==A2&&A2!==1){An.setAxisLineTops(this.calcMetricNameLines(A2,An.getAxisLineTop()));}var A0,Al,Ao,Aw;if(Ax.hasMetricNamesInXHeader()){var Af=this._slots.domColContent.node().getElementsByTagName("tr");if(Af.length){A0=Af[Af.length-1].getElementsByTagName("td");for(As=0;As<A0.length;As++){Al=A0[As];Al.classList.add("y"+As+"title");Ao=Ax.getYAxisHeaders(0,As)[0];Aw=Ax.getCellHandler(0,As,Ao.mIdx);Ao.cellHandler=Aw;Al.identity=Ao;Al.addEventListener("contextmenu",function(A3){var A4=A3&&(A3.ctrlKey||A3.metaKey);Ay.interactor.onPaperClick(Ay,Al,A3,A4);});}}}else{if(Ax.hasMetricNamesInYHeader()){var Ae=this._slots.domRowContent.node().getElementsByTagName("tr");for(As=0;As<Ae.length;As++){var Ap=Ae[As];A0=Ap.getElementsByTagName("td");if(A0&&A0.length){Al=A0[A0.length-1];Al.classList.add("x"+As+"title");Ao=Ax.getXAxisHeaders(As,0)[0];Aw=Ax.getCellHandler(As,0,Ao.mIdx);Ao.cellHandler=Aw;Al.identity=Ao;Al.addEventListener("contextmenu",function(A3){var A4=A3&&(A3.ctrlKey||A3.metaKey);Ay.interactor.onPaperClick(Ay,Al,A3,A4);});}}}}this.renderAxisHeader();this.setBGColor(this.getFormats());},renderAxisHeader:function(){var Ab=this.GMController,AZ=this._slots,Aa=this,Ae,AX=Ab.getRowHeaderTree().length>0,Ad=this.hasAxisHeader;if(Ad){var Ac=Ab.getYAxisHeaderTitles(0,0);var AY=Ac.length>1?"ytitle0":"ytitle";Ae=AZ.domAxisLeft.node().appendChild(document.createElement("div"));Ae.classList.add("header-text-wrap");Ae.classList.add(AY);Ae.addEventListener("contextmenu",function(Af){var Ag=Af&&(Af.ctrlKey||Af.metaKey);Aa.interactor.onPaperClick(Aa,Ae,Af,Ag);});Ae.innerText=Ac[0]||"";Ac.forEach(function(Ag,Af){if(Af!==0){Ae=AZ.domAxisLeft.node().appendChild(document.createElement("div"));Ae.innerText="|";Ae.classList.add("header-divider");Ae=AZ.domAxisLeft.node().appendChild(document.createElement("div"));Ae.classList.add("header-text-wrap");Ae.classList.add("ytitle"+Af);Ae.addEventListener("contextmenu",function(Ah){var Ai=Ah&&(Ah.ctrlKey||Ah.metaKey);Aa.interactor.onPaperClick(Aa,Ae,Ah,Ai);});Ae.innerText=Ac[Af];}});}else{if(!AX){d3v4.select(this.domMainContainer).select(".axis-row").selectAll("td").style("border","0px");}}AZ.domRowTop.style("height",this.extraHeaderHeight+"px");},checkExtraColHeight:function(){var AZ=this.GMController,Ac=this.layouter,AX=AZ.getRowHeaderTree().length>0,AY=AX||AZ.getColHeaderTree().length>0,Ab=AZ.getAttributeAxesLetters().indexOf("y")>=0,Aa=this.hasAxisHeader=AY&&Ab;if(AZ.hasMetricNamesInXHeader()){this.axesManager.y.title.isInHeader=true;}if(AZ.hasMetricNamesInYHeader()){this.axesManager.x.title.isInHeader=true;}this.axesManager.y.title.isInHeader=this.axesManager.y.title.isInHeader||Aa;this.extraHeaderHeight=Aa||AX?Ac.DIM.COL_HEIGHT:0;if(this.extraHeaderHeight){Ac.pushColHeaderHeight(Ac.DIM.COL_HEIGHT);}},checkExtraRowWidth:function(){var Aa=this.layouter,AZ=this.GMController,Ab=this.hasYAxis,AX=AZ.getRowHeaderTree().length>0,AY=AZ.getColHeaderTree().length>0;if(!AX&&!Ab&&AY){Aa.pushRowHeaderWidth(Aa.DIM.ROW_WIDTH);}},prepareHeaderDimensions:function(){var Ai=this.GMController;var Aa=this.layouter;var Ak=Ai.getRowHeaderTree(),Ae=Ai.getColHeaderTree(),Ac=Ak.length,Ad=Ae.length;var Af=Ai.getAttributeAxesLetters().indexOf("y")>=0,Ah=Ai.getMetricAxesLetters().indexOf("y")>=0,Ag=Ai.getAttributeAxesLetters().indexOf("x")>=0,Aj=Ai.getMetricAxesLetters().indexOf("x")>=0,AX=Ai.isWaterfall&&this.getWaterfallOptions().totalShw;Aa.clearRowHeaderWidth();Aa.clearColHeaderHeight();Ab(Ac,Aa.DIM.ROW_WIDTH,Aa.pushRowHeaderWidth);Ab(Ad,Aa.DIM.COL_HEIGHT,Aa.pushColHeaderHeight);this._slots.domRowContainer.style("width",Aa.getRowHeaderFullWidth()+"px");this._slots.domColContainer.style("height",Aa.getColHeaderFullHeight()+"px");this.checkExtraColHeight();var AY=Af||Ah&&!this.hasAxisHeader||(AX&&Aj),AZ=Ag||Aj||(AX&&Ah)||Ai.isHistogram;this.hasYAxis=AY;this.hasXAxis=AZ;this.checkExtraRowWidth();this.setPlotlyDimensions();function Ab(Ao,An,Al){for(var Am=0;Am<Ao;Am++){Al.call(Aa,An);}}},setPlotlyDimensions:function(){var AZ=this.layouter;var AX=AZ.getViewHeight(),AY=AZ.getViewWidth();AZ.setPlotlyDim(AX,AY);this._slots.domRowContainer.style("height",AZ.getViewHeight()+"px");this._slots.domColContainer.style("width",AZ.getViewWidth()+"px");},renderRow:function(AZ,Ae,Af,Aa){Af=Af||Ae.insertRow();var Ad=Af.insertCell();Ad.innerText=Ad.title=AZ.headerText;var AY=AZ.firstChild;var Ac=AY?this.renderRow(AY,Ae,Af,Aa+1):this._rowSpan;if(!AY){Ad.classList.add("ngm-row-header");}Ad.rowSpan=Ac;var Ab=AZ.nextSibling;if(!AY){if(!Ab){this.layouter.pushAxisLineLeft(Aa-1);}else{this.layouter.pushAxisLineLeft(Aa);}}else{if(!Ab){var AX=this.layouter.getAxisLineLeft().length;this.layouter.getAxisLineLeft()[AX-1]=Aa-1;}}Ac+=Ab?this.renderRow(Ab,Ae,null,Aa):0;return Ac;},renderCol:function(AZ,Af,Ab,Aa){var Ag=Af.rows[Ab]||Af.insertRow();var Ae=Ag.insertCell();Ae.innerText=Ae.title=AZ.headerText;var AY=AZ.firstChild;var Ad=AY?this.renderCol(AY,Af,Ab+1,Aa+1):this._colSpan;if(Ae){Ae.colSpan=Ad;}var Ac=AZ.nextSibling;if(!AY){if(!Ac){this.layouter.pushAxisLineTop(Aa-1);}else{this.layouter.pushAxisLineTop(Aa);}}else{if(!Ac){var AX=this.layouter.getAxisLineTop().length;this.layouter.getAxisLineTop()[AX-1]=Aa-1;}}Ad+=Ac?this.renderCol(Ac,Af,Ab,Aa):0;return Ad;},calcMetricNameLines:function(Aa,Ac){var Ab=Aa/Ac.length;var AZ=new Array(Aa);var AX,AY=0;for(AX=Ab;AX<Aa;AX+=Ab){AZ[AX-1]=Ac[AY++];}return AZ;},updateWaterfallLayout:function(AX,AY){AY.setPlotlyLayout("showlegend",false);AY.setPlotlyLayout("waterfall",true);},setLineAreaSpacing:function(Ad,Ac){var Ae=this.layouter,Ab=this.chartInfo,Aj=Ab.ori,Aa=Ac;var Ai=Aj==="v"?Ae.totalNumXPts():Ae.totalNumYPts(),AY=Aj==="v"?Ae._cct:Ae._rct;var AZ=6;var Ah=function(){return 12*Ai<=Ac;},Af=function(){return 12*Ai>Ac;},Ag=function(){return 2*(Ai+AY)>Ac;},AX=function(){return 2*(Ai+AY);},Ak=function(){return 12*(Ai+AY);};if(Ad===p.AUTOMATIC){if(Ah()){AZ=0.5*Ac/Ai/AY;}else{if(Af()){Aa=Ak();}}}else{if(Ad===p.FIT_TO_CONTAINER){if(Ah()){AZ=0.5*Ac/Ai/AY;}else{if(Ag()){Aa=AX();AZ=6;}}}else{if(Ad===p.FIT_TO_CONTENT){Aa=48*Ai-36*AY;AZ=6;}}}Ae.extraPadding=AZ;return Aa;},setHistogramSpacing:function(Aa,Ad){var Ac=this.layouter,AX=Ac.getWidgetWidth(),Ae=AX;var AZ=function(){return 144*Ad+12;},AY=function(){return 6*Ad+12;},Ab=function(){return 4*Ad+4;};if(AZ()<=AX){Ac.barSpace=144;Ac.extraPadding=(AX-144*Ad)/2;}else{if((AY()<=AX)&&(AX<AZ())){Ac.barSpace=(AX-12)/Ad;Ac.extraPadding=30;}else{if(Aa===p.AUTOMATIC){Ac.barSpace=30;Ae=AY();Ac.extraPadding=6;}else{if((Ab()<=AX)&&(AX<AY())){Ac.barSpace=AX/(Ad+2);Ac.extraPadding=(2.5*AX)/(Ad+5);}else{Ae=Ab();Ac.barSpace=2;Ac.extraPadding=10;}}}}return Ae;},setBoxPlotSpacing:function(Ad,Ac){var Ae=this.layouter,Aa=this.chartInfo,Ai=Aa.ori;var AZ=Ac,Ab=Ai==="v"?Ae.totalNumXPts():Ae.totalNumYPts(),AX=Ai==="v"?Ae._cct:Ae._rct,AY=(Ac-288*Ab)/AX;var Ah=function(){return(288*Ab+12*AX);},Af=function(){return(12*Ab+12*AX);},Ag=function(){return(8*Ab+4*2*AX);};if(Ad===p.FIT_TO_CONTENT){AZ=36*2*Ab+12*AX;AY=6;}if(Af()<=Ac&&Ac<Ah()){AY=6;}else{if(Ad===p.AUTOMATIC&&Af()>Ac){AY=6;AZ=Af();}else{if(Ad===p.FIT_TO_CONTAINER){if(Ag()<=Ac&&Ac<=Af()){AY=Ac/(Ab+AX);}else{if(Ac<=Ag()){AZ=Ag();AY=4;}}}}}Ae.extraPadding=AY;return AZ;},setBarSpacing:function(Al,Ab){var Ak=this.layouter,At=this.chartInfo,Af=this.allKeys,Au=At.ori;var Ap=Ab,Am=Au==="v"?Ak.totalNumXPts():Ak.totalNumYPts(),Aj=Au==="v"?Ak._cct:Ak._rct,Aa=Af.BreakBy,Ac,Ao,Ag=Aa&&At.subtype===H.CLUSTERED,An=(Ag||(Aa&&At.chartType===L.WATERFALL))?Af.BreakBy.length:1,Ad=Am*An,Ar=An===1?0:Am,AZ=10,AY=0,Ae=0,Aq,As=Af.BreakBy&&Af.BreakBy.length!==0;if(At.chartType===L.WATERFALL){Ac=As?this.getWidgetPropertyValue(k.INT_SUM_SHOW):false;Ao=this.getWidgetPropertyValue(k.TOTAL_SHOW);if(Ac&&As){Ad+=Am;}if(Ao){Ad+=Aj;}Ak.subGroup=An;Ak.showTotal=Ao;Ak.showSubtotal=Ac;}var Ah=function(){return(192*Ad+144*Ar+12*Aj);},Ai=function(){return(8*Ad+12*Aj);},AX=function(){return Ag?(2.7*Ad+2*Am+20*Aj):(2.7*Ad+20*Aj);};if(Al===p.FIT_TO_CONTENT){AY=0.25;Ap=Ag?(24+8)*Ad+24*Am+20*Aj:(24+8)*Ad+20*Aj;Ae=Ag?Am*24/Ap:0;AZ=10;}else{if(AX()>Ab&&Al===p.FIT_TO_CONTAINER){AZ=10;if(Ag){Ae=3/(4*An+3);AY=An/(4*An+3);Ap=2.7*Ad+2*Ad+20*Aj;}else{AY=0.25;Ae=0;Ap=(2.7*Ad)+(20*Aj);}}else{if(Ai()>Ab){AY=0.25;if(Ag){Ae=3/(4*An+3);}if(Al===p.FIT_TO_CONTAINER){AZ=Ab/(1.3*Ad+2);if(Ag){AY=An/(4*An+3);}}else{if(Ag){AY=An/(4*An+3);Ap=8*Ad+6*Am+12*Aj;}else{Ap=8*Ad+12*Aj;}}}else{if((Ai()<=Ab)&&(Ah()>Ab)){if(Ag){Ae=3/(4*An+3);AY=An/(4*An+3);}else{Ae=0.25;}}else{if((Ah()<Ab)){AY=0.25;if(Ag){Ae=3/(4*An+3);AZ=(Ab-192*Ad+144*Am)/(2*Aj);}else{AZ=(Ab-192*Ad)/(2*Aj);}Aq=192;}}}}}Ak.bargroupgap=AY;Ak.bargap=Ae;Ak.extraPadding=AZ;Ak.barSpace=Aq;return Ap;},spacingCalculations:function(AZ,AX){var Aa=this.getChartInfo(),AY=Aa.tp;if(AY===L.LINE||AY===L.AREA){return this.setLineAreaSpacing(AZ,AX);}else{if(AY===L.BAR||AY===L.WATERFALL){return this.setBarSpacing(AZ,AX);}else{if(AY===L.HISTOGRAM){return ;}else{if(AY===L.BOXPLOT){return this.setBoxPlotSpacing(AZ,AX);}}}}},setChartLayout:function(){var AY={},Ae=this.layouter,Ak=this.GMController,Ad=ngm.converter,Al=this.axesManager,Ac=this.chartInfo,Ah=this.allKeys,Ai=this.allNames,Af=this.data,Ab=this.axisTitles,AX=this.spacingCalculations.bind(this),Aj=this.getWidgetPropertyValue(k.CONTAINER_FIT_MODE);Ac.hasXAxis=this.hasXAxis;Ac.hasYAxis=this.hasYAxis;if(Ak.isWaterfall){AY.waterfall=this.getWaterfallOptions();}var Ag=this.marginConfig=Ad.calcMargins(Ae,Ak,ngm.canvas.getContext(),Ac,Ah,Ai,Al,Af,AX,Aj,AY);Ae.setMargin({l:Ag.l,b:Ag.b,t:Ag.t,r:Ag.r});if(this.getWidgetPropertyValue(k.CONTAINER_FIT_MODE)===p.FIT_TO_CONTENT){if(this.chartInfo.ori==="v"){if(Ag.newOAL+Ae.getMarginLeft()<Ae.getViewWidth()){Ae.setMargin({r:Ae.getViewWidth()-(Ag.newOAL+Ae.getMarginLeft())});}Ae.setPlotlyWidth(Ag.newOAL+Ae.getMarginRight()+Ae.getMarginLeft());}else{Ae.setPlotlyHeight(Ag.newOAL+Ae.getMarginTop()+Ae.getMarginBottom());}}else{Ad.setMinChartSize(Ae,Ac.ori==="v"?Ag.newOAL:0,Ac.ori==="h"?Ag.newOAL:0);}var AZ=Ad.calcCellDim(Ae.getChartWidth(),Ae.getMinWidths(),this._cct,Ae.getCellXRatios(),Ae.totalNumXPts()),Aa=Ad.calcCellDim(Ae.getChartHeight(),Ae.getMinHeights(),this._rct,Ae.getCellYRatios(),Ae.totalNumYPts());Ae.setCellWidths(AZ);Ae.setCellHeights(Aa);Ad.sizeMarginsAgain(Ae,Al);Ae.setScrollW(Ae.getViewHeight()<Math.floor(Ae.getPlotlyHeight())?Ae.DIM.SCROLL_SPACE:0);Ae.setScrollH(Ae.getViewWidth()<Math.floor(Ae.getPlotlyWidth())?Ae.DIM.SCROLL_SPACE:0);this.axesManager.gmCtr=this.GMController;Ad.generateAxes(Ae,Ab,Al,Ak);if(this.chartInfo.chartType===L.BAR||this.chartInfo.chartType===L.WATERFALL){Ae.setPlotlyLayout("bargap",Ae.bargap);Ae.setPlotlyLayout("bargroupgap",Ae.bargroupgap);}},getAxisProps:function(AY,AX){var AZ=this;return{show:AZ.getWidgetPropertyValue(k[AY+"_AXIS_"+AX+"_SHOW"]),angle:0,font:{family:AZ.getWidgetPropertyValue(k[AY+"_AXIS_"+AX+"_FONT_FAMILY"]),size:AB(AZ.getWidgetPropertyValue(k[AY+"_AXIS_"+AX+"_FONT_SIZE"])),style:AZ.getWidgetPropertyValue(k[AY+"_AXIS_"+AX+"_FONT_SIZE"]),color:AW.decodeColor(AZ.getWidgetPropertyValue(k[AY+"_AXIS_"+AX+"_FONT_COLOR"]))}};},setBGColor:function(AX){var AZ=this.layouter,AY=this.bgColor=AX["background-color"]||AW.decodeColor(this.property.defaultsObj.bgFillClr);var Ab={paper_bgcolor:AY,plot_bgcolor:AY};for(var Aa in Ab){AZ.setPlotlyLayout(Aa,Ab[Aa]);}this._slots.domColLeft.selectAll("td").style("background-color",AY);return Ab;},restylePlotly:function(AY){var Aa=this.setBGColor(AY),AX=this.rectBGs;Plotly.relayout(this.div,Aa);for(var AZ in AX){AX[AZ].attr("fill",this.bgColor);}},getDataLabelProps:function(){var Ab=this;var Ac=this.GMController;var AY=Ac.getDataLabelType();var AX=Ab.getShowDataLabelOptions();var AZ=this.getWidgetPropertyValue(w.METRIC_LEVEL_DATA_LABEL);var Aa=AX.map(function(Ae){var Ad={opt:Ae.opt,key:Ae.key,show:undefined};if(AY===AS.EnumDataLabels.SHOW_VALUE_ONLY&&!AZ){Ad.show=true;}else{Ad.show=AZ&&AZ[Ae.key];}return Ad;});return{isBubbleOrScatter:Ac.isBubbleOrScatter(),charttype:Ac.getNewChartType(),subtype:Ab.getSubType(),metric_level_data_label_options:Aa,datalabel:AY,textangle:Ab.getWidgetPropertyValue(w.DATA_LABEL_TEXT_ANGLE),constraintext:"none",textfont:{family:Ab.getWidgetPropertyValue(k.DATA_LABELS_FONT_FAMILY),size:AB(Ab.getWidgetPropertyValue(k.DATA_LABELS_FONT_SIZE)),color:AW.decodeColor(Ab.getWidgetPropertyValue(k.DATA_LABELS_FONT_COLOR))}};},getShowDataLabelOptions:function(){return this.GMController.getShowDataLabelOptions();},postPlotHistogram:function(BB,Ai){var A1=this.GMController,BC=BB.data[0],Au=BB.calcdata?BB.calcdata[0]:[],A4=Au.map(function(BF){return BF.y;}),BE=BC.x;var Av=this.getHistogramOptions();var Ax=ngm.converter,Ah=this.axesManager,At=this.chartInfo,A6=this.allKeys,Am=this.allNames,Ay=this.getWidgetPropertyValue(k.CUSTOM_BINS_MODE),Aa;if(BE.length>1||BE[0]){Ai.setPlotlyLayout("xaxis1.title","");Ai.setPlotlyLayout("yaxis1.title",mstrmojo.desc(2123,"Count"));var A9,A7=A1.getXAxisHeaderTitles(0,0),An=A7.length||0,As=A1.getYAxisHeaders(0,1);if(As){Ai.setPlotlyLayout("xaxis1.title",As[0].n);}if(A7){var Ac=[];Ac.push(Ai.getPlotlyLayout().xaxis1.title+" (");for(A9=0;A9<An;A9++){if(A9===An-1){Ac.push(A7[A9]+")");}else{Ac.push(A7[A9]);}}Ai.setPlotlyLayout("xaxis1.titles",Ac);Ai.setPlotlyLayout("xaxis1.titlesSkipFirst",true);}if(BE){var Aq=function(BG,BI){var BF=d3v4.formatLocale({decimal:mstrmojo.locales.number.DECIMALSEPARATOR,thousands:mstrmojo.locales.number.THOUSANDSEPARATOR,grouping:[3],currency:""}),BH=BG?BG:Math.abs(BI)<100?".2f":",.0f";return BF.format(BH)(BI);},AY=function(BF,BG){return mstrmojo.num.formatByMask(BF,BG);},AX=A1.getHeaderFormat(As),Ak=AX?AY:Aq;var BD=BC.xbins,Al=Av.originalStart!==undefined?Av.originalStart:BD.start,Ar=BD.end,Az=BD.size;var Aj=Ar-Al,A0=Math.ceil(Aj/Az),Ad=[],A2=[],Af=Az/2;var Ae=BB.calcdata[0];A2.push(Al-Az);Ae.forEach(function(BH,BG){var BF=Ak(AX,BH.p-Af)+" - "+Ak(AX,BH.p+Af);A2.push(BH.p-Af);Ad.push(BF);BC.text[BG]=Aq(",.0f",BH.s);});A2.push(Ar+Az);A1.binData=Ad;Aa=A0;Ai.setPlotlyLayout("xaxis1.tick0",A2[0]);Ai.setPlotlyLayout("xaxis1.autorange",false);Ai.setPlotlyLayout("xaxis1.tickformat",AX);Ai.setPlotlyLayout("xaxis1.tickformatfunc",Ak);if(Ay!==AS.EnumHistogram.MANUAL&&!this.getWidgetPropertyValue(k.HAS_UNCHECKED_AUTO)){if(Au&&Au.length){var A3=this.GMController.getExtremes(0,1);if(!this.getWidgetPropertyValue(k.HAS_UNCHECKED_DATASET_RANGE)){this.setWidgetPropertyValue(k.XBINS_START,A3.YMinValue);this.setWidgetPropertyValue(k.XBINS_END,A3.YMaxValue);this.setWidgetPropertyValue(k.XBINS_SIZE,Au[0].w);}Aa=Au.length;this.setWidgetPropertyValue(k.NUM_BINS,Au.length);}}var Aw=this.setHistogramSpacing.bind(this),Ag=this.getWidgetPropertyValue(k.CONTAINER_FIT_MODE);var Ap=this.marginConfig=Ax.calcMargins(Ai,A1,ngm.canvas.getContext(),At,A6,Am,Ah,BC,Aw,Ag,{axisLabels:A2,numBins:Aa,count:A4});var BA=Ah.x.title.show,Ab=Ah.y.title.show,Ao=Ah.y.label.calcShow,AZ=Ah.x.label.calcShow;Ai.setMargin({l:Ap.l,b:Ap.b,t:Ap.t,r:Ap.r});Ai.setPlotlyLayout("xaxis1.dtick",Ah.x.label.step);Ai.setPlotlyLayout("yaxis1.showticklabels",Ao);Ai.setPlotlyLayout("xaxis1.showticklabels",AZ);Ai.setPlotlyLayout("yaxis1.minDtick",1);Ai.setPlotlyLayout("xaxis1.tickangle",Ah.x.label.angle);if(!BA){Ai.setPlotlyLayout("xaxis1.title","");}if(!Ab){Ai.setPlotlyLayout("yaxis1.title","");}var A5=Ap.newOAL;var A8;if(Ai.extraPadding){A8=((Aa*Ai.extraPadding)/(A5-Ai.extraPadding))/(1-(Ai.extraPadding/(A5-Ai.extraPadding)));}else{if(Ag===p.AUTOMATIC){A8=((A5/Ai.barSpace)-Aa)/2;}else{A8=((A5/Ai.barSpace)/Aa)/2;}}A8*=Az;Ai.rangeMin=Al-A8;Ai.rangeMax=Al+(Aa*Az)+A8;Ai.setPlotlyLayout("xaxis1.range",[Ai.rangeMin,Ai.rangeMax]);Ai.setPlotlyLayout("bargroupgap",0);Ai.setPlotlyLayout("bargap",0);Ai.setPlotlyLayout("width",A5);}Plotly.relayout(BB,Ai.clonePlotlyLayout());}},generatePlotlyData:function(){if(this.excludeData){return ;}var BF=this._slots.domChart.node();var Ab=this.layouter;var AX=this._cct,Ah=this._rct;var Aa=this.axesManager;function Ai(BP,BL){BL=BL||{};var BR=BP.dz.YAxis,BK=BP.dz.XAxis,BQ=BR.TemplateMetric,BO=BK.TemplateMetric,BM=BR.TemplateUnit,BN=BK.TemplateUnit;BL.hasMetricInX=!!BO;BL.hasMetricInY=!!BQ;BL.hasAttributeInX=!!BN;BL.hasAttributeInY=!!BM;if(BQ&&BO||BM&&BN){return(BL.orientation="NA");}if(BN||BQ){return(BL.orientation="v");}if(BM||BO){return(BL.orientation="h");}}function Af(BM,BK){var BO=BM.dz[As].TemplateUnit||[],BL=BM.dz[BK].TemplateUnit||[],BN=false;BO.forEach(function(BP){BL.forEach(function(BQ){if(BQ.id===BP.id){BN=true;}});});return BN;}var AY=mstrmojo.color.decodeColor,BD=this.getDocModel().getCurrentPaletteColors().map(function(BK){return AY(BK);});var A0=["","scatter","bar","scatter","scatter","scatter","","","histogram","box","bar"],At=["","fill","","mode:markers+lines","mode:markers","mode:markers"],An=["group","relative","stack"];var Av=ngm.converter,A2=this.GMController,A6=Ai(A2,Av.config),BH=A6==="v"?"XAxis":"YAxis",Ax="BreakBy",As="ColorBy",A9=this.getSubType(),Ar=A2.getNewChartType(),BJ=A0[Ar],Az=At[Ar],BG=[],A5=this.allKeys={},Ag=this.allNames={},BE,Ap;this.axisTitles={x:[],y:[]};Ag.Labels=[];if(Ar===1&&A9===1){Ab.setPlotlyLayout("legend.tracetoggle",false);}Ab.setOrientation(A6);Ab.setPlotlyLayout("barmode",An[A9]);var Am=this.chartInfo={ori:A6||"v",type:BJ,chartType:Ar,subtype:A9,option:Az||"",isSingleChart:y(Ab)};this.updateGridLineValue("x");this.updateGridLineValue("y");Av.initGlobal(d3v4);Av.setPalette(BD);var BI=Ar===L.BUBBLE||Ar===L.SCATTER,Aq=Ar===L.GRID,BA=Ar===L.WATERFALL,Ad=Ar===L.BOXPLOT,Aw=false,A7,Ak=Af(A2,BH),A4=512,Aj,A8;Aa.hasRangeSlider=Am.isSingleChart&&!BI&&this.showRS;this.setGL=Am.isSingleChart&&A2.getMetrics(0,0).length>ngm.threshold.webgl&&BJ==="scatter"&&BI;function A1(){var BK=document.createElement("canvas"),BL=BK.getContext("webgl")||BK.getContext("experimental-webgl");if(BL&&BL instanceof WebGLRenderingContext){var BM=BL.getProgramParameter;BL.isProgram=function(){return true;};BL.getProgramParameter=function(BN,BO){if(BO===BL.LINK_STATUS){return true;}return BM.call(BL,BN,BO);};}}function Ac(){if(Ar===2&&A9===1){var BK=A2.dz,BL=BK.ColorBy,BM=BK.BreakBy;if(BL.TemplateMetric&&BM.TemplateUnit){return true;}}return false;}Am.stackedBarSpecialCase=Ac();Av.config.gl=this.setGL;if(this.setGL&&!this.setupGL){A1();this.setupGL=true;}console.time("trace");for(var BC=0;BC<Ah;BC++){for(var BB=0;BB<AX;BB++){if(BB===0){this.axisTitles.y.push(A2.getYAxisHeaderTitles(BC,BB));}if(BC===Ah-1){this.axisTitles.x.push(A2.getXAxisHeaderTitles(BC,BB));}var Ay={};Aj=A2.hasColorBy();A8=A2.hasSizeBy();if(A8){var Au=A2.getSizeByMetricsInfo(BC,BB)[0];if(Au){Av.SCALE.mxSize.domain([Au.min,Au.max]);Ay.has_N_size=true;}}if(Aj){var Ao=A2.getSizeByMetricsInfo(BC,BB)[0];if(Ao){Av.SCALE.mxColor.domain([Ao.min,Ao.max]);}}BE=A2.getMetrics(BC,BB);var AZ;if(A2.hasSizeBy()){AZ=A2.getSizeByMetricsInfo(BC,BB).concat(BE[0]&&BE[0].sbi);}BE=Av.attachKeys(BE,A2.jsonModel);Av.concludeKeys(BE,A5,Ag);if(BI||Aq){if(Aq){Aa.showGrid=false;}else{if(BI&&BE.length>t){BE=Av.filter(BE,A2.getExtremes(BC,BB),Ab.getWidgetDim());}}if(A5[As]){if(A5[As].length<A4){Ay.has_N_color=false;BE=Av.splitByColor(BE);BE=Av.trace4ScatterWithColor(BE,Ah-BC-1,BB,Ay,Aq);BG=BG.concat(BE);}else{Ay.has_N_color=true;BE=Av.trace4Scatter(BE,Ah-BC-1,BB,Ay,Aq);BG.push(BE);}}else{Ay.has_N_color=Aj;if(BE.length<ngm.threshold.density||Aj||Aq){BE=Av.trace4Scatter(BE,Ah-BC-1,BB,Ay,Aq);}else{Ay.exts=A2.getExtremes(BC,BB);BE=Av.trace4Density(BE,Ah-BC-1,BB,Ay);}BG.push(BE);}}else{if(Aw){if(A5[As]){if(A5[As].length<A4){if(A7&&Ak){Ay.has_N_color=true;BE=Av.splitByGroup(BE,Ax,BH);BE=Av.generateTraces(BE,A5[BH],BH,Ah-BC-1,BB,Am,AZ,A2.getAxisLabels(BC,BB),this.getEnhancedOptions(Ap,A2,BC,BB));BG=BG.concat(BE);}else{Ay.has_N_color=false;}}else{Ay.has_N_color=true;}}else{Ay.has_N_color=Aj;}}else{if(Ad){Ap=this.getBoxPlotOptions();Ap=this.getEnhancedOptions(Ap,A2,BC,BB);BE=Av.splitByGroup4BoxPlot(BE,BH,Ax);BE=Av.generateBoxPlotTraces(BE,Ah-BC-1,BB,Am.ori,Ap);BG=BG.concat(BE);}else{if(BA){BE=Av.splitByGroup(BE,BH,Ax);Ap=this.getWaterfallOptions();Ap=this.getEnhancedOptions(Ap,A2,BC,BB);BE=Av.generateWaterfallTraces(BE,A5[Ax],Ah-BC-1,BB,Am.ori,Ap,A2);BG=BG.concat(BE);}else{BE=Av.splitByGroup(BE,Ax,BH);BE=Av.generateTraces(BE,A5[BH],BH,Ah-BC-1,BB,Am,AZ,A2.getAxisLabels(BC,BB),this.getEnhancedOptions(Ap,A2,BC,BB).nf);BG=BG.concat(BE);}}}}if(BE.length===0){Ab.addEmptySubplot({x:BB+1,y:Ah-BC});}if((Ar===L.BUBBLE||Ar===L.SCATTER)&&Am.isSingleChart&&this.showHistogram){BG=BG.concat(Av.generateHistogramTraces(BG));Av.generateHistogramAxes(Ab);}}}console.timeEnd("trace");if(Ar===L.LINE||Ar===L.AREA){var Ae=[],A3=A2.getAttributeAxesLetters();for(BC=0;BC<A3.length;BC++){BG.forEach(function(BK,BL){if(BL%Ah===0){Ae.push(BK[A3[BC]][0]);}});}}var Al;if(BA){Al=false;}else{if(Ad){Al=!!A5[As];}else{Al=!!A5[As]&&!Ak;A2.customLegend=this.GMController.hasColorBy()&&!Al;}}Al=Al&&this.readGlobalProperty(w.LEGEND_VISIBLE);Ab.setPlotlyLayout("showlegend",Al);Ab.setPlotlyLayout("hovermode","closest");this.setColorByOptions(A5,Ag,BF);A2.showLegend=Al;this.div=BF;this.data=BG;this.placeLegend();if(BJ==="histogram"){Ap=this.getHistogramOptions();BG[0].nbinsx=Ap.numBins;if(Ap.xBins!==0){BG[0].autobinx=false;BG[0].xbins=Ap.xBins;}else{BG[0].autobinx=true;BG[0].xbins="";}Ab.setPlotlyLayout("bargroupgap",0);Ab.setPlotlyLayout("bargap",0);Ab.setPlotlyLayout("xaxis1.type","");}},placeLegend:function(){var Ah=this.GMController;if(Ah.showLegend||Ah.customLegend){var Ac=mstrmojo.gm.EnumLegendSlot,Aa="v",Af="right",Ad=this.layouter,AZ=this.div,Ae=0,Ag=0,Ab=Ah.maxLegendItem,AY=this.colorByOptions.length,AX;switch(this.readGlobalProperty(w.LEGEND_POSITION)){case Ac.LEFT_TOP:Aa="h";Af="top";AX=this.legendTop;Ae=(5+Ab)*AY>this.getWidth()?60:40;AX.style.height=Ae+"px";AX.style.width=this.getWidth()+"px";AX.style.borderBottom="1px solid #ddd";Ad.setWidgetHeight(this.getHeight()-Ae);break;case Ac.LEFT_BOTTOM:Aa="h";Af="bottom";AX=this.legendBottom;Ae=(5+Ab)*AY>this.getWidth()?60:40;AX.style.height=Ae+"px";AX.style.width=this.getWidth()+"px";AX.style.borderTop="1px solid #ddd";AX.style.position="absolute";AX.style.top=this.getHeight()-Ae+"px";Ad.setWidgetHeight(this.getHeight()-Ae);break;case Ac.LEFT:Aa="v";Af="left";break;case Ac.RIGHT:case Ac.RIGHT_MIDDLE:Aa="v";Af="right";AX=this.legendRight;Ag=Math.min(Ab,this.getWidth()/4);AX.style.width=Ag+"px";AX.style.height=this.getHeight()+"px";AX.style.borderLeft="1px solid #ddd";AX.style.position="absolute";AX.style.left=this.getWidth()-Ag+"px";Ad.setWidgetWidth(this.getWidth()-Ag);break;default:break;}this.legendInH=Ae;this.legendInW=Ag;this.legendPosition=Af;Ad.setPlotlyLayout("legend.orientation",Aa);Ad.setPlotlyLayout("legend.position",Af);AZ.reverseLegend=Ah.getNewChartType()===L.AREA;AZ.isLegendCollapsed=false;AZ.isLegendImage=false;AZ.legendDiv=AX;AZ.widgetDim={width:this.getWidth(),height:this.getHeight()};}this.sizeMainContainer();},getSeriesDataLabelProcessor:function z(){var AY=ngm.converter,AX=this.data,Aa=this.GMController;var AZ=function(Ac){var Ab=Ac.map(function(Ad){var Ai;if(Ad&&Ad.length){var Ag=[];for(var Af=Ad.length-1;Af>=0;Af--){var Ah=Ad[Af];if(Ah.dropzones.indexOf("BreakBy")!==-1){var Ae=Aa.jsonModel.queryByIdentity(Ah);Ag.push(Ae.headerText);}}if(Ag.length>0){Ai=Ag.join("|");}}return Ai;});return Ab;};return new AY.SeriesDataLabelProcessor(AX,this.getDataLabelProps(),L,function(Ac){var Ab=Aa.getMetricFormat(Ac);return Ab?Ab.nf:undefined;},AZ);},generateDataLabelData:function AH(){this.getSeriesDataLabelProcessor().attach();},restyleDataLabelData:function J(){var AX=this.getSeriesDataLabelProcessor().get();Plotly.restyle(this.div,AX.update,AX.traceIndices);},getCellForNode:function e(AX){return AX.identity;},getCellUnitIndex:function F(AX){return(AX.o!==undefined)?AX.o:AX._ei;},getAvailableRefLineTypes:function AK(){return ;},queryTrendLineStatusForMetric:function c(){return ;},updateLegendPosition:function M(Aa){var AZ=mstrmojo.gm.EnumLegendSlot,AY="v",AX="right";switch(Aa){case AZ.LEFT_TOP:AY="h";AX="top";break;case AZ.LEFT_BOTTOM:AY="h";AX="bottom";break;case AZ.LEFT:AY="v";AX="left";break;case AZ.RIGHT:AY="v";AX="right";break;default:break;}this.legendPosition=AX;this.layouter.setPlotlyLayout("legend.orientation",AY);this.layouter.setPlotlyLayout("legend.position",AX);},getTemplateUpdateForKeepOnlyAndShow:function X(Ax,An){var Am=this,Ah=B.Rows,A2=B.Columns,Ay=B.XAxis,Ar=B.YAxis,Ad=B.BreakBy,Av=B.ColorBy,As=B.SliceBy,Ae=B.AdditionalMetrics,Al=b.HORIZONTAL,Aq=b.VERTICAL;var Ac=Am.model,AX=Am.getDocModel(),A3=AX.getDataService(),Aw=A3.newUpdate(this);var Az={act:"updateTemplate",keyContext:Am.k,actions:[]},Aj,Af=true,Au=Az.actions,A1=Am.GMController,A5=A1.getChartInfo(),Ab=A5.tp,AY=Am.zonesModel,Aa=AY.gmZones,Ak={did:undefined,t:12},Ag={id:undefined,items:[]},A6=AY.getUpdateCallback(),A0=this.getXTabRefreshCallBack(),Ap=AY.getZoneModelByZoneId(Ae);if(An){Ag.id=An.isRowAttribute?Ah:A2;Ak.did=Ax.did;Ak.t=Ax.t;if(AX.prefs&&AX.prefs.rtprnt){Af=parseInt(AX.prefs.rtprnt,10)===1;}else{if(Ac.xtab.defn.tkp!==undefined){Af=parseInt(Ac.xtab.defn.tkp,10)===-1;}}var AZ,Ai=Aa.getZoneModelByZoneId(Ag.id);Ai.items.forEach(function(A7){if(A7.did===An.tid){AZ=A7;return false;}});if(Af){Au.push(AY.getAddDZUnitAction(Ag,Ak,AZ?AZ.uidx+1:0));}else{if(AZ){Array.prototype.push.apply(Au,Aa.getRemoveDropZoneUnitActions(Ag,AZ));Au.push(AY.getAddDZUnitAction(Ag,Ak,AZ.uidx));}}}else{if(A5.isPie){var At=B.SliceBy,A4=false;Ak.did=Ax.did;Ak.t=Ax.t;if(A1.hasColorBy()){var Ao=AY.getZoneModelByZoneId(Av);(Ao&&Ao.items||[]).forEach(function(A7){if(AY.isAttribute(A7)){Array.prototype.push.apply(Au,AY.getRemoveDropZoneUnitActions(Ao,A7));A4=true;}});if(A4){Au.push(AY.getAddDZUnitAction(U.copy({id:Av},U.copy(Ag,{})),Ak));}}Q.forEach([Al,Aq,Ad,As],function(A8){var A7=AY.getZoneModelByZoneId(A8);if(A7&&A7.items&&A7.items.length>0){if(A8===Al){A7.items.forEach(function(A9){if(A9.zone===Ay){if(AY.isAttribute(A9)){At=A9.zone;}}else{if(A9.zone===A2){if(At!==Ay&&At!==Ar){At=A9.zone;}}}});}else{if(A8===Aq){A7.items.forEach(function(A9){if(A9.zone===Ar){if(AY.isAttribute(A9)){if(At!==Ay){At=A9.zone;}}}else{if(A9.zone===Ah){if(At!==Ay&&At!==Ar&&At!==A2){At=A9.zone;}}}});}else{At=A8;}}}});Au.push(AY.getAddDZUnitAction(U.copy({id:At},U.copy(Ag,{})),Ak));}else{if(Ab===L.BUBBLE||Ab===L.SCATTER){Ag.id=Ad;Ak.did=Ax.did;Ak.t=Ax.t;Aj=Aa.getItemCountInZone(Ag.id);Au.push(AY.getAddDZUnitAction(Ag,Ak,Aj));}else{if(A5.isABL||Ab===L.GRID){if(A5.isPie){Ak.did=Ax.did;Ak.t=Ax.t;Au.push(AY.getAddDZUnitAction(U.copy({id:Av},U.copy(Ag,{})),Ak));Au.push(AY.getAddDZUnitAction(U.copy({id:As},U.copy(Ag,{})),Ak));}else{if(Ab===L.GRID||A5.dirc===mstrmojo.gm.EnumABLDirection.VERTICAL){Q.forEach(AY.moveAttributesToZone(Ay,A2),function(A7){Au.push(A7);});Ag.id=Ay;Ak.did=Ax.did;Ak.t=Ax.t;Au.push(AY.getAddDZUnitAction(Ag,Ak,0));if(Ap){Au.push(AY.getAddDZUnitAction(Ap,Ak,0));}}else{Q.forEach(AY.moveAttributesToZone(Ar,Ah),function(A7){Au.push(A7);});Ag.id=Ar;Ak.did=Ax.did;Ak.t=Ax.t;Au.push(AY.getAddDZUnitAction(Ag,Ak,0));if(Ap){Au.push(AY.getAddDZUnitAction(Ap,Ak,AY.gmZones.getTooltipDropzoneIdx(Ak)));}}}}}}}Aw.add(Az,AT(A6,A0));return Aw;},isDragValid:function o(){return false;},shouldDragBubble:function A(){return false;},plotPlotly:function(){var Ac=this.layouter;var AZ=this.div;var Ai=this.GMController;var Ad=this.data;var Ab=this.chartInfo,Ae=Ab.chartType===L.BAR||Ab.chartType===L.AREA||Ab.chartType===L.LINE;var Aa=h(Ac);var Ak=["toImage","sendDataToCloud","autoScale2d","hoverClosestCartesian","toggleSpikelines"];if(Aa===ngm.Modebar.MODE.COMPACT||Aa===ngm.Modebar.MODE.MINI){Ak=Ak.concat(["zoomOut2d","zoomIn2d"]);}this.config={displaylogo:false,displayModeBar:true,modeBarButtonsToRemove:Ak,isMobile:mstrmojo.dom.isMobile,modebarMode:Aa};if(this.dragmode===undefined){if(this.config.isMobile){this.dragmode=null;}else{this.dragmode=(Ab.chartType===L.BOXPLOT?"zoom":"select");}}Ac.setPlotlyLayout("dragmode",this.dragmode);if(!Ae){this.config.modeBarButtonsToRemove.push("hoverCompareCartesian");}if(Ai.isWaterfall){this.updateWaterfallLayout(Ad,Ac);}Ac.setPlotlyLayout("hasHorizontalScroll",Ac.getPlotlyWidth()>Ac.getWidgetWidth());console.time("render");AZ.widgetDim=AZ.widgetDim={width:this.getWidth(),height:this.getHeight()};Plotly.newPlot(this.div,this.data,Ac.clonePlotlyLayout(),this.config);console.timeEnd("render");var Ah=Ac.getWidgetDim(),AY=d3v4.select(this.domMainContainer),Aj=this.allKeys.BreakBy&&this.allKeys.BreakBy.length>0,Af=!(Ae&&Aj);var AX=this.modebar&&this.modebar.isExpanded;var Ag=new ngm.Modebar(AY,Ah.width,this.layouter,Af,this.toolbarStrings,Aa,AX);this.modebar=Ag;Ag.padding.top=this.parent.showTitleBar?ngm.Modebar.PADDING.TOP_WITH_TITLE:ngm.Modebar.PADDING.TOP_NO_TITLE;if(!this.getWidgetPropertyValue("showModeBar")||(Aa===ngm.Modebar.MODE.MINI&&Ah.height<300)){this.modebar.setVisibility(false);}if(this.GMController.isHistogram){this.postPlotHistogram(AZ,Ac);}if(this._viSelections){this.highlight("metric",this._viSelections,true);}},makeAxisLine:function(AZ,Aa,Ab,Ad,Ac,AX){var Ae=document.createElement("div");var AY=new mstrmojo.VisSplitter({draggable:false,placeholder:Ae,cssClass:"gm-axis-line",styles:{borderColor:"#E0E0E0",borderLeftStyle:"solid",borderWidth:"1px"},dir:Aa});this.addDisposable(AY);AY.render();Ae=AY.domNode;AZ.appendChild(Ae);AY.updatePosition({top:Ad,left:Ac,height:AX,width:Ab});return AY;},drawDividers:function(){var Ac=this.lines.colDividers,Ah=this.lines.colViewport,AX=this.lines.rowDividers,Ab=this.lines.rowViewport,Ai=this.lines.headerLines;var AZ=this.layouter,Ak=AZ.getWidgetDim(),An=AZ.getViewDim(),Al=AZ.getScrollW(),Ae=AZ.getScrollH(),AY=AZ.getMarginDim();var Ag=this;Am();Af();Aj();Ad();Aa();function Am(){Ac.selectAll("*").remove();AX.selectAll("*").remove();Ai.selectAll("*").remove();}function Af(){Ah.style("width",An.width-AY.left-Al+"px");Ah.style("height",Ak.height-AY.bottom-Ae+"px");Ah.style("left",AZ.getRowHeaderFullWidth()+AY.left+"px");var Ap=Ac.node(),Ar=AZ._cct;var Au=0,At,As=1,Ao;for(var Aq=0;Aq<Ar;Aq++){Au+=AZ.getCellWidth(Aq);Ao=Ak.height-AZ.getAxisLineTop(Aq);At=AZ.getAxisLineTop(Aq);Ag.makeAxisLine(Ap,"v",As,At,Au,Ao);}}function Aj(){Ab.style("width",Ak.width-Al+"px");Ab.style("height",An.height-AY.bottom-Ae+"px");Ab.style("top",AZ.getColHeaderFullHeight()+"px");var Ap=AX.node(),Au=AZ._rct;var At=AY.top,As,Ar,Ao=1;for(var Aq=0;Aq<Au;Aq++){At+=AZ.getCellHeight(Aq);As=AZ.getAxisLineLeft(Aq);Ar=Ak.width-AZ.getAxisLineLeft(Aq);Ag.makeAxisLine(Ap,"h",Ar,At,As,Ao);}}function Ad(){var Ar=AZ.getColHeaderHeight();var Ap=Ai.node();var Au=0,At=0,As=Ak.width,Ao=1;for(var Aq=0;Aq<Ar.length;Aq++){Au+=Ar[Aq];Ag.makeAxisLine(Ap,"h",As,Au,At,Ao);}}function Aa(){var Au=AZ.getRowHeaderWidth();var Ap=Ai.node();var At=0,As=0,Ar=1,Ao=Ak.height-AY.bottom;for(var Aq=0;Aq<Au.length;Aq++){As+=Au[Aq];Ag.makeAxisLine(Ap,"v",Ar,At,As,Ao);}}},postPlotly:function(){var Aw=this,Ar=Aw._rct,BT=Aw._slots,BS=BT.domChart,Ag=BS.node(),BI=d3v4.select(Aw.domNode).select(".legend-svg"),Ay=d3v4.select(Aw.domMainContainer),Aa=BS.select(".plot-container"),BK=this.legendPosition;var Am=this.layouter,AX=Am.getWidgetDim(),Ah=Am.getPlotlyDim(),Al=Am.getChartDim(),A0=Am.getViewDim(),Ae=Am.getScrollW(),Ap=Am.getScrollH(),Aj=Am.getMarginDim();var BD=this.GMController;this.drawDividers();var BU=this.lines.colDividers,A4=this.lines.colViewport,Ao=this.lines.rowDividers,BE=this.lines.rowViewport,Ab=this.lines.headerLines;BT.domRowContent.style("height",Al.height+"px");BT.domRowBottom.style("height",Aj.bottom+Ap+"px");BT.domColLeft.style("width",Aj.left+"px");BT.domColContent.style("width",1+"px");BT.domColRight.style("width",Aj.right+Ae+"px");BT.domRowContainer.style("height",A0.height-Aj.bottom-Ap+"px");BT.domRowContent.selectAll("td").attr("width",Am.DIM.ROW_WIDTH+"px");BT.domColContent.selectAll("td").attr("height",Am.DIM.COL_HEIGHT+"px");BT.domRowTop.selectAll("td").attr("width",Am.DIM.ROW_WIDTH+"px");BT.domColLeftNoAxis.selectAll("td").attr("width",Am.DIM.ROW_WIDTH+"px");BT.domColLeftNoAxis.selectAll("td").attr("height",Am.DIM.COL_HEIGHT+"px");BT.domColLeft.selectAll("td").attr("height",Am.DIM.COL_HEIGHT+"px");var Af=(Aj.left-(16*BD.getYAxisHeaderTitles(0,0).length)-(2*BD.getYAxisHeaderTitles(0,0).length-1))/BD.getYAxisHeaderTitles(0,0).length;BT.domAxisLeft.selectAll(".header-text-wrap").style("width",Af+"px");BT.domAxisLeft.style("width",Aj.left+"px");BT.domAxisRight.style("width",Aj.right+Ae+"px");BT.domAxisContent.style("width",Al.width+"px");var An=BT.domColContainer.node().scrollWidth-BT.domColContainer.node().clientWidth;var BP=BS.select(".infolayer");if(BD.customLegend){this.drawLegend(BI,this.getWidth(),this.getHeight());}var BA=[],BG=[];var A3=BP.selectAll(".axis .yaxislayer").each(function(){Aq(this,BG);}),BF=BP.selectAll(".axis .xaxislayer").each(function(){Aq(this,BA);}),BM=BP.selectAll("g[class^='g-y']"),BJ=BP.selectAll("g[class^='g-x']");this.rectBGs={yBg:BP.insert("rect","g").attr("width",Aj.left).attr("height",Ah.height).classed("y-bg",true).attr("fill",this.bgColor),xBg:BP.insert("rect","g").attr("height",Aj.bottom).attr("width",Ah.width).classed("x-bg",true).attr("fill",this.bgColor),intersect:BP.append("rect").attr("width",Aj.left).attr("height",Aj.bottom).classed("intersect",true).attr("fill",this.bgColor),rightBg:BI.insert("rect","g").attr("width",Aj.right).attr("height",Ah.height).classed("r-bg",true).attr("fill",this.bgColor)};var A2=this.rectBGs.xBg,Ax=this.rectBGs.yBg,A5=this.rectBGs.intersect,BQ=this.rectBGs.rightBg;if(this.hasYAxis){this.makeAxisLine(Ab.node(),"v",1,0,Am.getRowHeaderFullWidth()+Aj.left-1,Math.min(Ah.height+Am.getColHeaderFullHeight(),AX.height)-Aj.bottom+1);}if(this.hasXAxis||BD.isHistogram){this.makeAxisLine(Ab.node(),"h",Ar>1?AX.width-Ae:A0.width-Aj.left-3-Ae,Math.min(Ah.height+Am.getColHeaderFullHeight(),AX.height)-Aj.bottom+1,Ar>1?0:Am.getRowHeaderFullWidth()+Aj.left,1);}var Ai=BD.getAttributeAxesLetters(),At=Ai.indexOf("x")!==-1,AY=Ai.indexOf("y")!==-1;var Ac=At||BD.isHistogram?(A0.width-Aj.left-Aj.right)/2+Aj.left:0,AZ=Math.min(0,Am.getDeltaY()-(Ah.height-A0.height)),BR=AY?(Math.min(A0.height,Ah.height)-Aj.bottom)/2:0;var Az=this.modebar;if(Aw.axesManager.truncateAxes.length>0){As();}A6();BN(Aw.axesManager,Am);Ak();if(this.setGL){Ax.style("opacity",0);A2.style("opacity",0);}function A6(){var BV=Aw.axesManager;["x","y"].forEach(function(BY){if(!BV[BY].title.show||BV[BY].title.isInHeader){return ;}var BX=ngm.canvas.getContext(),Ba=BY==="y",Bb=Ba?BM:BJ,BZ;if(BD.getAttributeAxesLetters().indexOf(BY)<0){BZ=Ba?Am.getCellHeight(0,0):Am.getCellWidth(0,0);}else{BZ=Ba?Am.getViewHeight():Am.getViewWidth();}BW(BY,Bb,BZ-12,BX);});function BW(BY,Bb,Bc,BX){BX.font=Aw.axesManager[BY].title.font.size+"px "+Aw.axesManager[BY].title.font.family;var BZ=Bb.selectAll("text");if(BZ.node()===null){return ;}var Ba=0;BZ.each(function(){var Bg=d3v4.select(this).text(),Be=Bg.length,Bf=BX.measureText(Bg).width,Bd=Math.round(Be*Bc/Bf);Ba=Math.max(Ba,Bd);});BZ.each(function(){return A1.call(this,Ba,Bc);});}}function As(){var BW=Aw.axesManager;var BY;var BV=BW.truncateAxes;var BX={x:BF,y:A3};BV.forEach(function(BZ){var Be=BW[BZ].label.truncate;BY=Math.round(Be.longestChar*Be.requiredpx/Be.longestpx);for(var Bc=0;Bc<BX[BZ]._groups[0].length;Bc++){var Bb=ngm.canvas.getContext(),Bd=Be.requiredpx;Bb.font=BW[BZ].label.font.size+"px "+BW[BZ].label.font.family;var Ba=d3v4.select(BX[BZ]._groups[0][Bc]).selectAll("text");Ba.each(function(){return A1.call(this,BY,Bd);});}});}function A1(Bc,Ba){var BW=d3v4.select(this),Bb=BW.text(),BZ=Bb.length,BY=ngm.canvas.getContext();if(BZ>Bc&&BY.measureText(Bb).width>Ba){var BX=Bc-3;var BV=Bb.substring(0,BX);while(BY.measureText(BV+"...").width>Ba&&BV.length>0){BV=BV.substring(0,BV.length-1);BX--;}while(BY.measureText(BV+Bb[BX]+"...").width<Ba&&BX<BZ){BV+=Bb[BX];BX++;}BW.text(BV+"...");}}function Aq(BX,BZ){var BW=BX.getAttribute(W),BY=T(BW),BV=BY.x,Ba=BY.y||0;BZ.push({x:BV,y:Ba});}function Ad(BW,BX,BV,BY){BW.each(function(BZ,Ba){AD(d3v4.select(this),BX[Ba].x+BV,BX[Ba].y+BY);});}function Au(BW,BV){BW.each(function(){var BY=this.getAttribute(W),BZ=BV.y!==undefined?BV.y:BY?T(BY).y:0,BX=BV.x!==undefined?BV.x:BY?T(BY).x:0;AD(d3v4.select(this),BX,BZ);});}function BC(BW,BV,BX){BW.style(BV,BX+"px");}function A9(){var BW=Ah.width-Am.getScrollW(),BV=Ah.height-Am.getScrollH();if(BW<=A0.width&&BV<=A0.height){Aa.style("overflow-y","hidden");Aa.style("overflow-x","hidden");}else{if(BW>A0.width&&BV<=A0.height){Aa.style("overflow-y","hidden");Aa.style("overflow-x","scroll");}else{if(BV>A0.height&&BW<=A0.width){Aa.style("overflow-x","hidden");Aa.style("overflow-y","scroll");}else{Aa.style("overflow-y","scroll");Aa.style("overflow-x","scroll");}}}}function Ak(){A5.remove();A5=BP.append("rect").attr("width",Aj.left).attr("height",Aj.bottom).classed("intersect",true).attr("fill",Aw.bgColor);Ad(BF,BA,0,Math.min(0,Am.getDeltaY()-(Ah.height-A0.height)));Ad(A3,BG,Am.getDeltaX(),0);Au(BJ,{x:Ac,y:AZ});Au(BM,{x:0,y:BR});Au(A2,{x:0,y:A0.height-Aj.bottom+Am.getDeltaY()});Au(Ax,{x:Am.getDeltaX(),y:0});Au(A5,{x:Am.getDeltaX(),y:A0.height-Aj.bottom+Am.getDeltaY()});Au(BQ,{x:Ah.width-Aj.right+1,y:0});BU.style("left","0px");Ao.style("top","0px");}function BB(){var BW=mstrmojo.gm.EnumLegendSlot,BV="right";switch(Aw.readGlobalProperty(w.LEGEND_POSITION)){case BW.LEFT_TOP:BV="top";break;case BW.LEFT_BOTTOM:BV="bottom";break;case BW.LEFT:BV="left";break;case BW.RIGHT:BV="right";break;}return BV;}function BN(BW,Ba){var BX={x:BF,y:A3};var BZ=BD.isHistogram?["x","y"]:BD.getMetricAxesLetters();var BV=[];BZ.forEach(function(Bc){BV.push(BX[Bc]);});BV.forEach(function(Bc){Bb(Bc);});function Bb(Bf){var Be=Ba.getPlotlyWidth(),Bd=Ba.getChartHeight(),Bg=T(A3.node().getAttribute(W)).y,Bh=T(BF.nodes()[BF.size()-1].getAttribute(W)).x;var Bc={yMax:function(Bj,Bi){return Bi/2>Bj;},yMin:function(Bj,Bi){return Bj+Bi/2+Bg>Bd;},xMin:function(Bj,Bi){return Bi/2>Bj;},xMax:function(Bj,Bi){return Bj+Bi/2+Bh>Be;}};Bf.each(function(){var Bi=this.getAttribute("class")[0],Bj=this.querySelectorAll("[class$='ticklabels']"),Bk=Bj.length;if(Bk>0){BY.call(this,Bi,Bj[0],Bc[Bi+"Min"]);BY.call(this,Bi,Bj[Bk-1],Bc[Bi+"Max"]);}});}function BY(Bg,Bi,Bh){var Bd,Be,Bc,Bf,Bk,Bj;Bd=Bi.firstChild.getAttribute(W);Bj=I(Bd)[Bg];Be=T(Bd)[Bg];Bf=mstrmojo.VisUtility.getComputedFontStyle(Bi.firstChild);Bk=BW[Bg].label.font.size;Bc=(Bj===-90||Bg==="y")?Bk:mstrmojo.VisUtility.measureTextWidth(Bi.firstChild.textContent,Bf);if(Bh(Be,Bc)){Bi.style.display="none";}}}Ay.on("mouseleave",function(){if(!Az.isDragged){Az.setMouseLeave();Aw.setActive(false);}}).on("mouseenter",function(){Az.setMouseEnter();Aw.setActive(true);});var A8=this.tooltip||new ngm.Tooltip(this.tooltipStrings);if(!this.tooltip){this.tooltip=A8;}Ag.on("plotly_relayout",function(){if(Aw.axesManager.truncateAxes.length>0){As();}A6();BN(Aw.axesManager,Am);});Ag.on("plotly_afterplot",function(){O.call(Aw);A9();Aa.style("width",A0.width+"px").style("height",A0.height+"px");BM=BP.selectAll("g[class^='g-y']");BJ=BP.selectAll("g[class^='g-x']");AZ=Math.min(0,0-(Ah.height-A0.height));BK=BB();BC(Az.getModebar(),"left",AX.width-Az.getWidth()-ngm.Modebar.PADDING.RIGHT);BC(Az.getModebar(),"top",Az.padding.top);Ak();if(Aw.axesManager.truncateAxes.length>0){As();}A6();BN(Aw.axesManager,Am);});BE.on("wheel mousewheel",function(){Aa.node().scrollTop+=d3v4.event.deltaY;Aa.node().scrollLeft+=d3v4.event.deltaX;});A4.on("wheel mousewheel",function(){Aa.node().scrollTop+=d3v4.event.deltaY;Aa.node().scrollLeft+=d3v4.event.deltaX;});Aa.on("scroll",function(){var BW=d3v4.event.target,BX=BW.scrollLeft,BV=BW.scrollTop;if(Am.getDeltaX()!==BX){Am.setDeltaX(BX);Ad(A3,BG,BX,0);Au(BM,{x:BX});if(Ac){Au(BJ,{x:BX+Ac});}BT.domColContainer.node().scrollLeft=BX;BT.domColContainer.style(W,V(Math.min(0,An-BX),0));BT.domColLeft.style(W,V(BX,0));Au(Ax,{x:BX,y:0});BU.style("left",-BX+"px");}if(Am.getDeltaY()!==BV){Am.setDeltaY(BV);Ad(BF,BA,0,Math.min(0,BV-(Ah.height-A0.height)));Au(BJ,{y:BV+AZ});if(BR){Au(BM,{y:BV+BR});}BT.domRowContainer.node().scrollTop=BV;Au(A2,{x:0,y:A0.height-Aj.bottom+BV});Ao.style("top",-BV+"px");}A5.style(W,V(BX,A0.height-Aj.bottom+BV));});Ag.on("plotly_hover",function(BV){Aw.interactor.onHover(A8,BV,BD,ngm.canvas.getContext(),Aw._rct,Am,Aw.div.calcdata,Ag.firstChild,Aw);}).on("plotly_unhover",function(){Aw.interactor.onUnhover(Ag.firstChild,A8,Aw);});var BO=Ag,Av;Ag.on("ngm_contextmenu",function(BW){var BV=BW.event&&(BW.event.ctrlKey||BW.event.metaKey);Aw.model.docModel.setVisActive(Aw.id);Aw.interactor.onContextMenu(Aw,BO,BW,BV);BW.event.preventDefault();BW.event.stopPropagation();});Ag.on("plotly_click",function(BW){Av=BW.event&&(BW.event.ctrlKey||BW.event.metaKey);Aw.model.docModel.setVisActive(Aw.id);if(BW.event.which===3){Aw.interactor.onContextMenu(Aw,BO,BW,Av);BW.event.preventDefault();BW.event.stopPropagation();return false;}else{var BX=true;Aw.interactor.onHover(A8,BW,BD,ngm.canvas.getContext(),Aw._rct,Am,Aw.div.calcdata,Ag.firstChild,Aw,BX);A8.move.call(A8,Am)(BW.event);Aw.interactor.onClick(Aw,BO,BW,Av);function BV(Ba,BZ,BY,Bb){return function(){BY.interactor.onUnhover(Ba.firstChild,BZ,BY,Bb);};}setTimeout(BV(Ag,A8,Aw,BX),2500);}});Ag.on("plotly_selected",function(BV){Aw.model.docModel.setVisActive(Aw.id);Av=BV.event&&(BV.event.ctrlKey||BV.event.metaKey);Aw.interactor.onSelected(Aw,BO,BV,Av);});Ag.on("plotly_deselect",function(BV){Aw.model.docModel.setVisActive(Aw.id);Av=BV&&BV.event&&(BV.event.ctrlKey||BV.event.metaKey);Aw.interactor.onSelected(Aw,BO,BV,Av);});Ag.on("plotly_paper_click",function(BY){var BW=BY.event,BX=BW&&(BW.ctrlKey||BW.metaKey),BZ=true;Aw.interactor.onUnhover(Ag.firstChild,A8,Aw,BZ);Aw.model.docModel.setVisActive(Aw.id);Aw.interactor.onPaperClick(Aw,Ag,BW,BX);var BV=A5.node().getBoundingClientRect();if(BW.x-BV.left<Aj.l&&BV.bottom-BW.y<Aj.b){Aw.showRS=!Aw.showRS;Aw.showHistogram=!Aw.showHistogram;Aw.domMainContainer.innerHTML="";Aw.postBuildRendering();}return false;});Ag.addEventListener("contextmenu",function(BV){var BW=BV&&(BV.ctrlKey||BV.metaKey);Aw.model.docModel.setVisActive(Aw.id);Aw.interactor.onPaperClick(Aw,Ag,BV,BW);BV.preventDefault();BV.stopPropagation();return false;});Ag.on("ngm_change_dragmode",function(BV){Aw.dragmode=BV.dragmode;});Ag.on("ngm_layoutChanged",function(BV){Aw.interactor.onLayoutChanged(BV,Ag);});Ag.on("ngm_before_relayout_zooming",function(BY){if(Aw.dragmode==="pan"||Aw._rct!==1||Aw._cct!==1||!BY){return ;}else{var BX=Aw.layouter.getPlotlyWidth(),BV=Aw.layouter.getPlotlyHeight();for(var BW in BY){if(BY.hasOwnProperty(BW)){if(BW.indexOf(".range")!==-1&&BW.indexOf(".autorange")===-1){if(BW.indexOf("xaxis")!==-1){BX=Aw.layouter.getViewWidth();}if(BW.indexOf("yaxis")!==-1){BV=Aw.layouter.getViewHeight();}}else{if(BW.indexOf("xaxis")!==-1){BX=Aw.layouter.getPlotlyWidth();}if(BW.indexOf("yaxis")!==-1){BV=Aw.layouter.getPlotlyHeight();}}}}BY.width=BX;BY.height=BV;}});Ag.on("plotly_doubleclick",function(){Plotly.relayout(Ag,"");if(Aw.GMController.isHistogram){Aw.postPlotHistogram(Ag,Aw.layouter);}});Ag.on("ngm_after_relayout",function(){if(Aw._viSelections){Aw.highlight("metric",Aw._viSelections,true);}});var A7=function(BY,Bf,Be){Aw.model.docModel.setVisActive(Aw.id);var BZ=Aw._slots.domChart.select(".plot-container").node();var BX=BZ.getBoundingClientRect();var Bd=BZ.scrollLeft||0,Bc=BZ.scrollTop||0,Bb=Bd-Bf,Ba=Bc-Be,BW=Math.round(BZ.scrollWidth-BX.width),BV=Math.round(BZ.scrollHeight-BX.height);BW=(BW>0)?BW:0;BV=(BV>0)?BV:0;Ba=(Ba<0)?0:Ba;Ba=(Ba>BV)?BV:Ba;Bb=(Bb<0)?0:Bb;Bb=(Bb>BW)?BW:Bb;if(Bc===Ba){Aw.getDocModel().raiseEvent(U.copy({name:"visOutsideScrolled",deltaX:0,deltaY:Be,originalEvent:BY},{}));}else{if(Bc!==Ba){BZ.scrollTop=Ba;}}if(Bd===Bb){Aw.getDocModel().raiseEvent(U.copy({name:"visOutsideScrolled",deltaX:Bf,deltaY:0,originalEvent:BY},{}));}else{if(Bd!==Bb){BZ.scrollLeft=Bb;}}};K.addBasicTouchSupport(Ag,Aw,undefined,function(BV){A7(BV.event,BV.deltaX,BV.deltaY);});Ag.on("ngm_none_dragmode_move",function(BV){A7(BV.moveFnEvent,BV.dx,BV.dy);});this.contextmenuListener=s.attachEvent(document,"contextmenu",function(BV){if(BV.preventDefault){BV.preventDefault();}});if(BD.isHistogram){var BH=Ag.ownerDocument.getElementById("resetScale2d");BH.addEventListener("click",function(){Aw.postPlotHistogram(Ag,Am);});}var BL=this.id;this.model.docModel.attachEventListener("brushing",BL,function(BV){if(Aw.interactor&&Aw.interactor.onBrushing){Aw.interactor.onBrushing(BV);}});this.model.docModel.attachEventListener("contextmenu",Aw.id,function(BV){BV.preventDefault();return false;});this.model.docModel.attachEventListener("visActive",BL,function(BV){Aw.setActive(Aw.id===BV.id);});},requirePreload:true,getFonts:function(){var AZ=this,AX=[],AY={};["dlFntFml","rfLnFntFml","lgdFntFml","xAxTtFntFml","xAxLbFntFml","yAxTtFntFml","yAxLbFntFml","allTxtFntFml","rwHdrTxtFntFml","colHdrTxtFntFml","rwVlTxtFntFml","colVlTxtFntFml","ttlFntFml"].forEach(function(Ad){var Aa=AZ.getWidgetPropertyValue(Ad);Aa=typeof Aa==="object"?Aa[Ad]:Aa;var Ac={name:Aa,isItalic:false,isBold:false};var Ab=Ac.fontFamily+":"+Ac.isItalic+":"+Ac.isBold;if(!AY[Ab]){AY[Ab]=true;AX.push(Ac);}});return AX;}});}());