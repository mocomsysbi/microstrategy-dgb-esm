mstrmojo.chart.model.enums.EnumDSSGraphGradientType={DssGraphGradientReserved:0,DssGraphGradientCircular:9,DssGraphGradientRectangular:10,DssGraphGradientLinear:14};mstrmojo.chart.model.enums.EnumDSSGraphStockLayout={DssGraphStockLayoutDefault:0,DssGraphStockLayoutVerticalLine:1,DssGraphStockLayoutCandleStick:2,DssGraphStockLayoutLine:3,DssGraphStockLayoutArea:4,DssGraphStockLayoutLineCircle:5,DssGraphStockLayoutDot:6,DssGraphStockLayoutArea2:7};mstrmojo.chart.enums.EnumMarkerShape={MS_Rectangle:0,MS_XShape:1,MS_PlusSymbolthin:2,MS_PlusSymbolthick:3,MS_Circle:4,MS_Diamond:5,MS_Triangle:6,MS_Square:7,MS_Star:8,MS_Area:9,MS_Star45:10};mstrmojo.chart.enums.EnumMajorGraphType={MGT_AREA:0,MGT_BAR:1,MGT_LINE:2,MGT_PARETO:3};mstrmojo.chart.enums.EnumLineJoinType={LJT_MITER:0,LJT_BEVEL:1,LJT_ROUND:2};mstrmojo.chart.enums.EnumNumberCategory={Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10};mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};mstrmojo.chart.enums.EnumDSSGraphOffScaleType={DssGraphOffScaleHide:0,DssGraphOffScaleClip:1,DssGraphOffScaleShow:2};mstrmojo.chart.model.enums.EnumDSSGraphDataLineType={DssGraphDataLineNone:0,DssGraphDataLineMarker:1,DssGraphDataLineLine:2};mstrmojo.chart.model.enums.EnumDSSGraphGridLineType={DssGraphGridNone:0,DssGraphGridRegular:1,DssGraphGridBoth:2,DssGraphGridInnerTicks:3,DssGraphGridOuterTicks:4,DssGraphGridSpanningTicks:5};mstrmojo.vi.enums.EnumFilterClearActionType={CLEAR_ALL:0,CLEAR_KEEP_ONLY:1,CLEAR_ADV_QUALIFICATION:2,CLEAR_LINKING:3,CLEAR_KEEP_ONLY_AND_LINKING:4,CLEAR_DRILLING:5};mstrmojo.chart.model.enums.EnumDSSGraphMarkerShape={DssGraphMarkerShapeNone:0,DssGraphMarkerShapeRectangle:1,DssGraphMarkerShapeStar45:2,DssGraphMarkerShapePlus:3,DssGraphMarkerShapeCircle:4,DssGraphMarkerShapeDiamond:5,DssGraphMarkerShapeSpikedX:6,DssGraphMarkerShapePlainX:7,DssGraphMarkerShapeTriangle1:8,DssGraphMarkerShapeFatPlus:10,DssGraphMarkerShapeSquare:24,DssGraphMarkerShapeHouse:27,DssGraphMarkerShapeStar5:37,DssGraphMarkerShapeGMTick:200,DssGraphMarkerShape2DPie:201,DssGraphMarkerShape2DRingPie:202,DssGraphMarkerShapeCombined:203,DssGraphMarkerShapeGMPolyLine:204,DssGraphMarkerShapeGMBar:205,DssGraphMarkerShapeGMArea:206,DssGraphMarkerBullet:207};mstrmojo.gmaps.MapEnums={};mstrmojo.gmaps.EnumBaseMapType={Reserved:"-1",Esri:"1",Google:"2",Image:"3",Mapbox:"4"};mstrmojo.gmaps.EnumDefaultMapStyle={Esri:"Light Gray Map",Google:"0",Image:"",Mapbox:"mapbox://styles/microstrategy/cj4fnd0xu1ax82rnuq287rwvu"};mstrmojo.gmaps.EnumLanguageType={Local:"{name}",English:"{name_en}",Both:"{name_en}\n{name}"};mstrmojo.gmaps.EnumGraphicType={Marker:"1",Bubble:"2",Area:"3",Density:"4",Path:"5"};mstrmojo.gmaps.EnumMarkerType={Pin:"1",Square:"2",Diamond:"3",Image:"4",Circle:"5"};mstrmojo.gmaps.EnumPolygonSource={Cloud:"1",Custom:"2",MapBoxPolygon:"3"};mstrmojo.gmaps.EnumShapeType={polygon:"polygon",multiPolygon:"multipolygon"};mstrmojo.gmaps.EnumGeometryType={Point:"Point",Extent:"2",Polygon:"Polygon"};mstrmojo.gmaps.EnumExtraCfgTaskId={Esri:"getESRIExtraConfig",Google:"getGoogleExtraConfig"};mstrmojo.gmaps.EnumGlobalCfgName={Esri:"esriConfig",Google:"googleConfig"};mstrmojo.gmaps.EnumThresholdType={Default:-1,Number:2,Text:3,Image:4,Url:5,QuickSymbol:10};mstrmojo.gmaps.EnumPropertyType={applyThreshold:"at",clusterMode:"mc",clusterRadius:"cr",clusterMaxZoom:"cmz",shapeFile:"lid",mapStyle:"dv",languageType:"lang",themeType:"dms",markerType:"mtp",zoomSetting:"rosa",legendSwitch:"ls",tooltipSwitch:"ts",legendWidthScale:"lwr",imageUrl:"mstyl",needMapToolbar:"mt",attributeId:"atf",useAttributeForm:"af",showZoomBtns:"zb",showAffinityLines:"da",showArcsLines:"dal",maxLineThickness:"lwm",maxBubbleSize:"mbs",useAbsolute:"mss",customInfoWinTpl:"iwd",pathColor:"pcp",affinityLineGrid:"ag",collapseLegend:"clgd",legendSize:"lgds",satf:"satf",dm:"dm",mvo:"mvo",baseMapType:"bmt",editingLayerIdx:"elx",mapGeoExtent:"mext",graphicType:"gtp",layerName:"ln",layerIdx:"lx",isRemoved:"ird",isHidden:"ih",enableZoomThroughLayer:"eztl",minLayerZoomLvl:"minlzl",maxLayerZoomLvl:"maxlzl",MAX_SIZE_TYPE:"maxst",MAX_SIZE_VALUE:"maxsv",MIN_SIZE_TYPE:"minst",MIN_SIZE_VALUE:"minsv",showMapLable:"mlb",mapLabelOnTop:"mlbt",distUnit:"mdu",geoAttribute:"ga",latitude:"lat",longitute:"lng",slice:"slc",angle:"amt",colorby:"cmt",sizeby:"smt",tooltip:"tooltip",keepZoomAndPos:"kzp",zoomLevel:"mz",mapCenter:"mp",mapBearing:"mbr",mapPitch:"mpt",dirtyVp:"dirtyVp",colorByOpacity:"cbo"};mstrmojo.gmaps.EnumGeographicRole={EnumGeographicRoleNone:"0",EnumGeographicRoleCity:"1",EnumGeographicRoleState:"2",EnumGeographicRoleCountry:"3",EnumGeographicRoleLocation:"4",EnumGeographicRoleLatitiude:"5",EnumGeographicRoleLongitude:"6",EnumGeographicRoleOther:"7",EnumGeographicRoleZipCode:"8",EnumGeographicRoleCounty:"9",EnumGeographicRoleLastOne:"10"};mstrmojo.gmaps.EnumClusterMode={MOBILE_OFF:"0",MOBILE_ON:"1",ON:"2",OFF:"3",PIE:"4"};mstrmojo.gmaps.EnumZoomBehavior={Keep:"0",Automatic:"1"};mstrmojo.gmaps.EnumDistUnitType={KM:"0",Miles:"1"};mstrmojo.gmaps.EnumDataLabel={DATA_LABEL_SHOW:"dlShw",DATA_LABEL_SHOW_ALL:"dlShwAll",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",DATA_LABEL_FONT_HALO_COLOR:"dlFntHaloClr",DATA_LABEL_FONT_HALO_WIDTH:"dlFntHaloWidth"};mstrmojo.gmaps.EnumShapeFormatting={SHAPE_FORMAT_FILL_COLOR:"shapeClr",SHAPE_FORMAT_FILL_OPACITY:"shapeFillTrans",SHAPE_FORMAT_BORDER_COLOR:"shapeLineClr",SHAPE_FORMAT_BORDER_STYLE:"shapeLineStyle"};mstrmojo.gmaps.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gmaps.EnumDefaultShapeFormatStyle={FILL_COLOR:"#436CD3",FILL_OPACITY:"85",FILL_OPACITY_VALUE:"0.85",FILL_OPACITY_FACTOR_HOVER:0.75,FILL_OPACITY_FACTOR_UNSEL:0.5,BORDER_STYLE:mstrmojo.gmaps.EnumCombinedLineStyle.THIN,BORDER_COLOR:"#FFFFFF",BORDER_WIDTH:"1"};mstrmojo.gmaps.DEFAULT_DATA_LABEL_PROPS={dlShw:[0],dlShwAll:[false],dlFntFml:["Arial"],dlFntSz:["8pt"],dlFntStyle:[0],dlFntClr:[0]};mstrmojo.gmaps.EnumDataLabelShowOption={NONE:0,SHOW_TEXT:1,SHOW_VALUE:2,SHOW_BOTH:3};mstrmojo.gmaps.MarkerAlignOption={CENTER:0,TOP:1,LEFT:2,RIGHT:3,BOTTOM:4,TOP_LEFT:5,TOP_RIGHT:6,BOTTOM_LEFT:7,BOTTOM_RIGHT:8};mstrmojo.gmaps.EnumToolbarButtonType={DRILL:1,SINGLE_SELECT:2,RECTANGLE_SELECT:4,EDIT_INFO_WINDOW:8,CLEAR_ALL:16,AFFINITY:32,FREE_SELECT:64,CIRCLE_SELECT:128,ZOOM:256,LAYERS_SELECT:512,KEEP_ONLY:1024,EXCLUDE:2048,SHOW_DATA:4096,SEARCH_BAR:8192,MAP_STYLE:16384};mstrmojo.gmaps.EnumToolbarState={NORMAL:0,SINGLE_SELECT:1,RECTANGLE_SELECT:2,ZOOM:3,AFFINITY:4,FREE_SELECT:5,CIRCLE_SELECT:6,CLEAR_ALL:7,LAYERS_SELECT:8,MARKERTYPE:9,CLUSTER:10,MAP_TYPE:11};mstrmojo.gmaps.EnumActions={rename:"renameUnit",remove:"removeDropZoneUnit",add:"addDropZoneUnit",addForm:"addForm",removeForm:"removeForm"};mstrmojo.gmaps.TARGET_MAPOPTIONS=1;mstrmojo.gmaps.TARGET_FORMATTING_LAYERS=2;mstrmojo.gmaps.SelectionHashType={PRIMARY:0,TEMPLATE_SELECTION:1,EDITING_LAYER:2,RMC_LAYER:3};mstrmojo.gmaps.EnumTransformState={ReadyToUse:-1,UseExistingLine:0,CrossFromExistingToNewLine:1,UseNewLine:2,CrossFromNewToExistingLine:3};mstrmojo.gmaps.EnumDrillLinkAnswerType={SAME_PROMPT:1,DO_NOT_ANSWER:2,CLOSE:3,DYNAMIC:4,STATIC:5,CURRENT_UNIT:6,ALL_VALID_UNITS:7,USE_DEFAULT_ANSWER:8,DYNAMIC_OR_SAME_PROMPT:9};mstrmojo.gmaps.EnumMinSizeType={PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3};mstrmojo.gmaps.EnumMaxSizeType={AUTOMATIC:1,MANUAL:2};mstrmojo.gmaps.EnumDynamicZoomStatus={INIT:0,NO_GEO_ATTR:1,FIRST_ADD_GEO_ARR:2,FIRST_GEO_ADD_FINISHED:3};mstrmojo.gmaps.ZoomAnimationDelta=0.15;mstrmojo.gmaps.LAYER_INDEX_MAX=100;mstrmojo.gmaps.LASSOLAYER_ZINDEX=mstrmojo.gmaps.LAYER_INDEX_MAX+1;mstrmojo.gmaps.ZOOMBTN_ZINDEX=mstrmojo.gmaps.LAYER_INDEX_MAX+50;mstrmojo.gmaps.ENABLE_MAX_MIN_SIZE_CONTROL=true;mstrmojo.gmaps.EnumRenderMethod={svg:"svg",canvas:"canvas",mapbox:"mapbox"};mstrmojo.gmaps.EnumLayerZoneSource={DROP_ZONE:"dzpn",PROPERTY_PANEL:"pppn"};mstrmojo.chart.model.enums.EnumDSSGraphAxisLabelLocation={DssGraphAxisLabelLowSide:0,DssGraphAxisLabelHighSide:1,DssGraphAxisLabelBothSides:2,DssGraphAxisLabelNeitherSide:3};mstrmojo.chart.enums.EnumSliceType={SLICE_STEPWISE:0,SLICE_GROUPADJACENT:1,SLICE_INDEPENDENT:2,SLICE_STRIPPED:3,SLICE_SPECIFY:4,SLICE_MIXED_GROUP:5,SLICE_MIXED_SERIES:6};mstrmojo.chart.enums.EnumValueAxis={VA_Y1:0,VA_Y2:1,VA_BOTH:2,VA_Y3:3,VA_Y4:4};mstrmojo.warehouse.EnumDatabaseType={SAP:1200,MSAS:1500,EssBase:1600,TM1:2900,SAPHana:4000,BDE:5400,SearchEngineSOLR:5500,Hive:3100,Impala:4100,SearchEngineSPLUNK:5600,Pig:6400,PHOENIX:6800,IBMBigInsights:700,Drill:7300,DB_TYPE_NEWDB_1:8100,DB_TYPE_NEWDB_5:8500,AzureCosmosDB:8700};mstrmojo.chart.enums.EnumChartStyle={_general:0,_cluster:1,_absolute:2,_stacked:3,_percent:4,_ring:5,_bullet:6,_udf:100};mstrmojo.chart.enums.EnumGenericDirection={NONE:0,TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};mstrmojo.chart.enums.EnumFormatType={FMT_UNDEFINED:0,FMT_LINE:1,FMT_FILL:2,FMT_FONT:3};mstrmojo.chart.model.enums.EnumDSSGraphFillEffect={DssGraphFillSimple:0,DssGraphFillGenericGradient:1,DssGraphFillWash:3,DssGraphFillPicture:4,DssGraphFillUserPicture:6,DssGraphFillBrush:13,DssGraphFillAdvancedWash:14,DssGraphFillPattern:101};mstrmojo.chart.enums.EnumImageUsage={GENERAL:0,FIRST_IMAGE_OF_SCROLL_VIEW:1,SECOND_IMAGE_OF_SCROLL_VIEW:2,IMAGE_OF_SCROLL_VIEW:4,EMPTY_IMAGE:8,OBJECT_CLIP_COMPUTATION:16,BANNER:32};mstrmojo.chart.enums.EnumAxisLabelsLocation={ALL_LEFT:0,ALL_RIGHT:1,ALL_LEFT_RIGHT:2,ALL_BOTTOM:3,ALL_TOP:4,ALL_BOTTOM_TOP:5};mstrmojo.chart.Angle=mstrmojo.provide("mstrmojo.chart.Angle",{});mstrmojo.chart.model.enums.EnumDSSGraphPictureScaleType={DssGraphPictureScaleNone:0,DssGraphPictureScale2Fit:1,DssGraphPictureScale2Frame:2,DssGraphPictureScale2Background:3,DssGraphPictureTiled:4,DssGraphPictureTiled2Frame:5,DssGraphPictureTiled2Background:6,DssGraphPictureBrickHorizontal:7,DssGraphPictureBrickVertical:8,DssGraphPictureStack:9,DssGraphPictureScaleProportional:10};mstrmojo.chart.model.enums.EnumDSSAxisName={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5,DssAxisDropZoneIndexRoot:8,DssAxisDropZoneIndexEnd:8+255,DssAxisDynamicShortcutRoot:300,DssAxisDynamicShortcutEnd:300+255};mstrmojo.chart.enums.EnumAxisDirection={AD_X:0,AD_Y:1,AD_Z:2};mstrmojo.chart.enums.EnumLabelLevelOption={LLO_NORMAL:0,LLO_COMMON:1,LLO_SPECIFIC:2};mstrmojo.chart.model.enums.EnumDSSDynamicShortcut={DssDynamicShortcutReserved:0,DssDynamicShortcutAuto:1,DssDynamicShortcutAcrossThenDown:2,DssDynamicShortcutDownThenAcross:3,DssDynamicShortcutColumns:4,DssDynamicShortcutRows:5,DssDynamicShortcutCell:6,DssDynamicShortcutShape:7,DssDynamicShortcutLastOne:8,DssDynamicShortcutRangeEnd:255};mstrmojo.chart.ChartConstants={kPI:3.141592653589793,kHalfSqrt2:0.70710678,kVirtualCoordinateWidth:700,kVirtualCoordinateHeight:400,kGroupLabelsRatio:0.1,kGridLineMarginFactor:10,kAngleMargin:0.1,kLabelMarginFactor:20,kVirtualMarkerSize:2,kBetweenLabels:0,kBetweenLabelLines:1,kLabelToChart:2,kNumericLabelToTick:3,kChartToChart:4,kExtra:5,kEndTickToChart:6,kEndLabelToChart:7,kBetweenLabelCenters:8,kCategoricalLabelToTick:9,kBandSide:10,kDataLabel:11,kRefLabel:12,kAxisOriginLabel:13};mstrmojo.chart.model.enums.EnumDSSGraphNumberFormatType={DssGraphNumberFormatDefault:-2,DssGraphNumberFormatFixed:0,DssGraphNumberFormatCurrency:1,DssGraphNumberFormatDate:2,DssGraphNumberFormatTime:3,DssGraphNumberFormatPercentage:4,DssGraphNumberFormatFraction:5,DssGraphNumberFormatScientific:6,DssGraphNumberFormatCustom:7,DssGraphNumberFormatSpecial:8,DssGraphNumberFormatGeneral:9,DssGraphNumberFormatFromGrid:10};mstrmojo.chart.enums.EnumShowFace={SF_FRONT:1,SF_SIDE:2,SF_HIDDEN_SIDE:4};mstrmojo.chart.enums.EnumTrendLineIndex={TLI_Y1:0,TLI_Y2:1,TLI_BOTH:2};mstrmojo.chart.model.enums.EnumDSSGraphFillBevelEffect={DssGraphFillBevelNone:0,DssGraphFillBevelSmoothEdge:1,DssGraphFillBevelChiselEdge:2,DssGraphFillBevelDonut:3,DssGraphFillBevelSphere:4};mstrmojo.chart.enums.EnumRadientGradientUsage={RG_PIESLICE:0,RG_RING:1,RG_BORDERRING:2};mstrmojo.chart.model.enums.EnumDSSGraphPictureFormat={DssGraphPictureJPEG:0,DssGraphPictureGIF:1,DssGraphPicturePNG:2,DssGraphPictureWMF:3,DssGraphPictureBMP:4};mstrmojo.chart.model.enums.EnumDSSGraphFontRotation={Automatic:-1,Normal:0,RotateHotel:1,Rotate90:2,Rotate180:3,Rotate270:4,Rotate45:5,Rotate315:6,Custom:7};mstrmojo.chart.model.enums.EnumDSSGraphMarkerLayout={DssGraphMarkerLeft:0,DssGraphMarkerRight:1,DssGraphMarkerCentered:2,DssGraphMarkerAbove:3,DssGraphMarkerBelow:4,DssGraphMarkerAuto:5};mstrmojo.chart.enums.EnumGraphMatrixThemeType={UNDEFINED:-1,_black:0,_white:1};mstrmojo.chart.enums.EnumDSSExtraGraphObject={DssGraphO1Interlaced:20000,DssGraphO2Interlaced:20001,DssGraphX1Interlaced:20002,DssGraphY1Interlaced:20003,DssGraphY2Interlaced:20004,DssGraphY3Interlaced:20005,DssGraphY4Interlaced:20006,DssGraphZInterlaced:20007,DssGraphQualityBand:20008,DssGraphQualityBandTitle:20009,DssGraphY1SecondUserLine:21000,DssGraphWarningMessage:21001,DssGraphO1BracketLine:21002,DssGraphBaseLayer:21004,DssGraphMiddleWallLayer:21005,DssGraphPlotLayer:21006,DssGraphRendererLayer:21007,DssGraphBanner:22005};mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition={DssGraphDTPositionCenter:0,DssGraphDTPositionOutMin:1,DssGraphDTPositionInMin:2,DssGraphDTPositionInMax:3,DssGraphDTPositionOutMax:4,DssGraphDTPositionOnSide:5,DssGraphDTPositionPieSmart:6,DssGraphDTPositionPieSmartRadial:7,DssGraphDTPositionPieSmartStacked:8};mstrmojo.EnumDSSDisplayMode={RESERVED:0,GRID:1,GRAPH:2,ENGINE:3,TEXT:4,DATAMART:5,BASE:6,GRIDGRAPH:7,NONINTERACTIVE:8};mstrmojo.chart.enums.EnumDssGraphGridChartUniformColorMode={BYX:0,BYY:1,BYBOTH:2};(function(){mstrmojo.vi.ui._MonitorsTocPage=mstrmojo.provide("mstrmojo.vi.ui._MonitorsTocPage",{tocPanel:null,currentLayoutKey:undefined,currentPanelKey:undefined,onTocPageChange:function(B){if(B.value){this.currentLayoutKey=B.value.layoutKey;this.currentPanelKey=B.value.panelKey;}if(this._super){this._super(B);}},init:function A(B){this._super(B);if(!this.tocPanel){throw new Error("You must pass the tocPanel when instantiating mstrmojo.vi.ui._MonitorsTocPage.");}if(this.tocPanel.attachEventListener){this.tocPanel.attachEventListener("displayPageInfoChange",this.id,"onTocPageChange");}}});}());mstrmojo.chart.enums.EnumCollectionType={CT_NO_COLLECTION:0,CT_LINE:1,CT_GENERAL_SHAPE:2,CT_TEXT:3,CT_VERTICAL_AREA:4,CT_VERTICAL_BAR:5,CT_HORIZONTAL_AREA:6,CT_HORIZONTAL_BAR:7,CT_DEPTH_LINE_OR_LINE_MARKER:8,CT_NO_FORMAT:9};mstrmojo.chart.model.enums.EnumVariantType={VT_EMPTY:0,VT_NULL:1,VT_I2:2,VT_I4:3,VT_R4:4,VT_R8:5,VT_CY:6,VT_DATE:7,VT_BSTR:8,VT_DISPATCH:9,VT_ERROR:10,VT_BOOL:11,VT_VARIANT:12,VT_UNKNOWN:13,VT_DECIMAL:14,VT_I1:16,VT_UI1:17,VT_UI2:18,VT_UI4:19,VT_I8:20,VT_UI8:21,VT_INT:22,VT_UINT:23,VT_VOID:24,VT_HRESULT:25,VT_PTR:26,VT_SAFEARRAY:27,VT_CARRAY:28,VT_USERDEFINED:29,VT_LPSTR:30,VT_LPWSTR:31,VT_RECORD:36,VT_FILETIME:64,VT_BLOB:65,VT_STREAM:66,VT_STORAGE:67,VT_STREAMED_OBJECT:68,VT_STORED_OBJECT:69,VT_BLOB_OBJECT:70,VT_CF:71,VT_CLSID:72,VT_BSTR_BLOB:4095,VT_VECTOR:4096,VT_ARRAY:8192,VT_BYREF:16384,VT_RESERVED:32768,VT_ILLEGAL:65535,VT_ILLEGALMASKED:4095,VT_TYPEMASK:4095};mstrmojo.chart.model.enums.EnumDSSGraphLegendPosition={DssGraphLegendPositionFreeFloat:0,DssGraphLegendPositionRight:1,DssGraphLegendPositionLeft:2,DssGraphLegendPositionBottom:3};mstrmojo.chart.enums.EnumObjectShape={OS_ELLIPSE:2,OS_LINE:5,OS_POLYGON:6,OS_RECTANGLE:7,OS_WEDGE:12,OS_WEDGECRUST:13,OS_POLYLINE:18,OS_PATH:24,OS_CIRCLE:100,OS_RINGSECTOR:101,OS_NORMALSECTOR:102};mstrmojo.chart.enums.EnumPictureFormatType={JPEG:0,PNG:1,BMP:7,GIF:100,PDF:102,SVG:103,WIN32:104,INSTRUCTIONS:105};mstrmojo.chart.enums.EnumLegendMarkersStyle={LMS_LeftOfText:0,LMS_RightOfText:1,LMS_CenterOnMarkers:2,LMS_AboveText:3,LMS_BelowText:4};mstrmojo.chart.enums.EnumAttachedPointsStyle={NORMAL:0,TOOLTIP_UPPER:1,TOOLTIP_LOWER:2,TOOLTIP_MIDDLE:3,TOOLTIP_U2L:4,TOOLTIP_TRAPEZOID:5};mstrmojo.chart.model.enums.EnumVariantBool={VARIANT_TRUE:65535,VARIANT_FALSE:0};mstrmojo.chart.enums.EnumCategoryAxisOidItem={OID_LABEL:0,OID_MAJOR_TICKS:1,OID_MINOR_TICKS:2};mstrmojo.chart.enums.EnumFillType={FT_SIMPLE:0,FT_TEXTURE:4,FT_PICTURE:6,FT_GRADIENT:14,FT_PATTERN:101};mstrmojo.chart.enums.EnumAnchorPoint={TOP_LEFT:0,TOP_MIDDLE:1,TOP_RIGHT:2,LEFT_MIDDLE:3,CENTER:4,RIGHT_MIDDLE:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8};mstrmojo.chart.model.enums.EnumDSSGraphType={DssGraphTypeReserved:0,DssGraphTypeVertical_Area_Absolute:1,DssGraphTypeVertical_Area_Stacked:2,DssGraphTypeVertical_Area_BiPolar_Absolute:3,DssGraphTypeVertical_Area_BiPolar_Stacked:4,DssGraphTypeVertical_Area_DualAxis_Absolute:5,DssGraphTypeVertical_Area_DualAxis_Stacked:6,DssGraphTypeVertical_Area_Percent:7,DssGraphTypeHorizontal_Area_Absolute:8,DssGraphTypeHorizontal_Area_Stacked:9,DssGraphTypeHorizontal_Area_BiPolar_Absolute:10,DssGraphTypeHorizontal_Area_BiPolar_Stacked:11,DssGraphTypeHorizontal_Area_DualAxis_Absolute:12,DssGraphTypeHorizontal_Area_DualAxis_Stacked:13,DssGraphTypeHorizontal_Area_Percent:14,DssGraphTypeVertical_Bar_Side_by_Side:15,DssGraphTypeVertical_Bar_Stacked:16,DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:17,DssGraphTypeVertical_Bar_DualAxis_Stacked:18,DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:19,DssGraphTypeVertical_Bar_BiPolar_Stacked:20,DssGraphTypeVertical_Bar_Percent:21,DssGraphTypeHorizontal_Bar_Side_by_Side:22,DssGraphTypeHorizontal_Bar_Stacked:23,DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:24,DssGraphTypeHorizontal_Bar_DualAxis_Stacked:25,DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:26,DssGraphTypeHorizontal_Bar_BiPolar_Stacked:27,DssGraphTypeHorizontal_Bar_Percent:28,DssGraphTypeVertical_Line_Absolute:29,DssGraphTypeVertical_Line_Stacked:30,DssGraphTypeVertical_Line_BiPolar_Absolute:31,DssGraphTypeVertical_Line_BiPolar_Stacked:32,DssGraphTypeVertical_Line_DualAxis_Absolute:33,DssGraphTypeVertical_Line_DualAxis_Stacked:34,DssGraphTypeVertical_Line_Percent:35,DssGraphTypeHorizontal_Line_Absolute:36,DssGraphTypeHorizontal_Line_Stacked:37,DssGraphTypeHorizontal_Line_BiPolar_Absolute:38,DssGraphTypeHorizontal_Line_BiPolar_Stacked:39,DssGraphTypeHorizontal_Line_DualAxis_Absolute:40,DssGraphTypeHorizontal_Line_DualAxis_Stacked:41,DssGraphTypeHorizontal_Line_Percent:42,DssGraphTypePies:43,DssGraphTypeRing_Pie:44,DssGraphTypeMultiple_Pies:45,DssGraphTypeMultiple_Ring_Pies:46,DssGraphTypeMultiple_Proportional:47,DssGraphTypeMultiple_Proportional_Ring_Pies:48,DssGraphTypePie_Bar:49,DssGraphTypeRing_Pie_Bar:50,DssGraphTypeX_Y_Scatter:51,DssGraphTypeDualAxis_X_Y_Scatter:52,DssGraphTypeX_Y_Scatter_with_Labels:53,DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:54,DssGraphTypePolar_Coordinate_Chart:55,DssGraphTypeDualAxis_Polar_Coordinate_Chart:56,DssGraphTypeRadar_Line:57,DssGraphTypeRadar_Stacked_Area:58,DssGraphTypeDualAxis_Radar_Line:59,DssGraphTypeDualAxis_Radar_Stacked_Area:60,DssGraphTypeBubble:61,DssGraphTypeBubble_DualAxis:62,DssGraphTypeGantt_Chart:63,DssGraphTypeHiLo_Stock_Chart:64,DssGraphTypeHiLo_DualAxis_Stock_Chart:65,DssGraphTypeHiLoOpen_Stock_Chart:66,DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:67,DssGraphTypeHiLoOpenClose_Stock_Chart:68,DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:69,DssGraphTypeSpectral_Chart:70,DssGraphTypeVertical_Histogram:71,DssGraphTypeHorizontal_Histogram:72,DssGraphTypeTable_Chart:73,DssGraphTypeD3_Riser_Bars:74,DssGraphTypeD3_Riser_Pyramids:75,DssGraphTypeD3_Riser_Octogans:76,DssGraphTypeD3_Riser_Cut_Corner_Bars:77,DssGraphTypeD3_Floating_Cubes:78,DssGraphTypeD3_Floating_Spheres:79,DssGraphTypeD3_Connect_Group_Areas:80,DssGraphTypeD3_Connect_Group_Ribbons:81,DssGraphTypeD3_Connect_Group_Steps:82,DssGraphTypeD3_Connect_Series_Areas:83,DssGraphTypeD3_Connect_Series_Ribbons:84,DssGraphTypeD3_Connect_Series_Steps:85,DssGraphTypeD3_Surface:86,DssGraphTypeD3_Surface_with_Sides:87,DssGraphTypeD3_Honeycomb_Surface:88,DssGraphTypeD3_X_Y_Z_Scatter_Chart:89,DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart:90,DssGraphTypeVertical_Bar_Absolute:91,DssGraphTypeHorizontal_Bar_Absolute:92,DssGraphTypeBubble_With_Labels:93,DssGraphTypeBubble_DualAxis_With_Labels:94,DssGraphTypeGauge:95,DssGraphTypeFunnel:96,DssGraphTypePareto:97,DssGraphTypePareto_Percent:98,DssGraphTypeBoxPlot:99,DssGraphTypeRadar_Area_Stacked:100,DssGraphTypeRadar_Absolute_Area:101,DssGraphTypeVertical_Bar_BiPolar_Absolute:102,DssGraphTypeVertical_Bar_DualAxis_Absolute:103,DssGraphTypeHorizontal_Bar_BiPolar_Absolute:104,DssGraphTypeHorizontal_Bar_DualAxis_Absolute:105,DssGraphRadar_Line_Stacked:106,DssGraphRadar_DualAxis_Radar_Stacked_Line:107,DssGraphRadar_DualAxis_Radar_Area:108,DssGraphTypeMaxDeskTopGraphTypes:109,DssGraphTypeBarArea:201,DssGraphTypeBarLine:202,DssGraphTypeAreaLine:203,DssGraphTypeDualAxisBarArea:204,DssGraphTypeDualAxisBarLine:205,DssGraphTypeDualAxisAreaLine:206,DssGraphTypeGridChart:20000,DssGraphTypeVertical_Bar_DualAxis_Percent:20001,DssGraphTypeVertical_Line_DualAxis_Percent:20002,DssGraphTypeVertical_Area_DualAxis_Percent:20003,DssGraphTypeHorizontal_Bar_DualAxis_Percent:20004,DssGraphTypeHorizontal_Line_DualAxis_Percent:20005,DssGraphTypeHorizontal_Area_DualAxis_Percent:20006,DssGraphTypeHorizontal_CategoryPies_Absolute:21077,DssGraphTypeHorizontal_CategoryPies_Stacked:21078,DssGraphTypeHorizontal_CategoryPies_Percent:21079,DssGraphTypeVertical_CategoryPies_Absolute:21080,DssGraphTypeVertical_CategoryPies_Stacked:21081,DssGraphTypeVertical_CategoryPies_Percent:21082,DssGraphTypeScatter_Pies:21111,DssGraphTypeBubble_Pies:21121,DssGraphTypeGrid_Pies:21211,DssGraphTypeVertical_Bullet:21212,DssGraphTypeHorizontal_Bullet:21213};mstrmojo.chart.enums.EnumRectExpandDirection={REC_EXP_INVALID:0,REC_EXP_HORIZONTAL:1,REC_EXP_VERTICAL:2,REC_EXP_BOTH:3};mstrmojo.vi.enums.EnumDerivedElementType={LIST:1,CALCULATION:2,RESIDUE:4};mstrmojo.chart.enums.EnumGraphMatrixMarkerTypeInChart={_LINE_IN_LINE:0,_DOTS_IN_LINE:1,_ISODOT_IN_LINEAREA:2,_MUTATION_IN_LINE:3,_BAR:4,_SHAPES_IN_BUBBLESCATTER:5,_SHAPES_IN_GRID:6,_TICK_CATEGORY:7,_TICK_VALUE:8,_TICK_GRID:9,_PIE:10};mstrmojo.chart.enums.EnumInstructionName={JSONInsUndefined:0,JSONInsSaveState:1,JSONInsRestoreState:2,JSONInsClip:11,JSONInsScale:12,JSONInsRotate:13,JSONInsNewPath:101,JSONInsClosePath:102,JSONInsMoveTo:111,JSONInsLineTo:112,JSONInsBezierCurveTo:113,JSONInsAddRect:121,JSONInsAddArc:122,JSONInsAddNeedle:131,JSONInsAddGaugeMarker:132,JSONInsAddString:201,JSONInsSetLineDash:301,JSONInsSetLineWidth:302,JSONInsSetLineJoin:303,JSONInsSetFontSize:311,JSONInsSetRGBAFillColor:321,JSONInsSetRGBAStrokeColor:322,JSONInsFillPath:401,JSONInsStrokePath:402,JSONInsFillSimple:501,JSONInsFillPattern:502,JSONInsFillGradient:503,JSONInsFillEdgeType:511,JSONInsFillDonutOrSphere:512,JSONInsFillRadientGradient:513,JSONInsFillDonut2Rect:514,JSONInsFillBorderMetallic:515,JSONInsMakeDarker:521,JSONInsRestoreColor:522,JSONInsApplyLineFormat:601,JSONInsAddFormatedText:701,JSONInsApplyBeveledFrameToRectangle:801};mstrmojo.chart.model.enums.EnumDSSExtraGraphProperty={DssGraphOffScaleType:10139,DssGraphTypeRingPie:20015,DssGraphPieRadius:20016,DssGraphPieSliceQuadrant:20017,DssGraphUseInterlacedGrid:20018,DssGraphUseSmartBreak:20019,DssGraphSmartBreakStyle:20020,DssGraphSmartBreakStart:20021,DssGraphSmartBreakEnd:20022,DssGraphSmartBreakUsePercent:20023,DssGraphUseQualityBand:20024,DssGraphQualityBandUsePercent:20025,DssGraphQualityBandPosition:20026,DssGraphQualityBandShowTitle:20027,DssGraphUseChartArea:20028,DssGraphChartAreaNumber:20029,DssGraphChartAreaOrientation:20030,DssGraphChartAreaSpacePercentage:20031,DssGraphChartAreaDestination:20032,DssGraphChartAreaShowTitle:20033,DssGraphGaugeBorderClipped:20034,DssGraphCumulativePercentLabel:20035,DssGraphNewUseSmartLabels:20053,DssGraphIsIPhoneCharting:21000,DssGraphUseGlobalAutoScale:21001,DssGraphLegendItemText:21023,DssGraphAxisShowSecondUserLine:21024,DssGraphAxisSecondUserLineValue:21025,DssGraphCategoryLabelAreaHeight:21026,DssGraphGradientEndAlpha:21027,DssTimeSeriesYAxisLabelMinSpan:21076,DssTimeSeriesYAxisExtendHeight:21077,DssGraphMatrixUsePerfectPadding:21120,DssGraphMatrixIsValueAxisForPercentChart:21136,DssGraphMatrixDataLabelEnabled:21153,DSSGraphMatrixDataLabelRotated:21154,DssGraphMatrixInitedDataLabelRotation:21155,DSSGraphMatrixAxisAdjusted:21156,DSSGraphMatrixUseCustomMinMax:21157,DssGraphInfoReserved:30000,DssGraphInfoMajorType:30007,DssGraphInfoMinorType:30008,DssGraphInfoAutosizeHorizontal:30011,DssGraphInfoAutosizeVertical:30012,DssGraphInfoSeriesByColumn:30013,DssGraphInfoIncludeSubtotal:30014,DssGraphInfoSuppressLastLevel:30016,DssGraphInfoRecalculateChartFrame:30026,DssGraphInfoRecalculateLegend:30027,DssGraphInfoNestedLabel:30038,DssGraphInfoNestedLabelBracket:30039,DssGraphInfoUseMaxCategoriesAsMin:30048,DssGraphInfoUseZerosForGraphNulls:30049};mstrmojo.chart.enums.EnumLegendLayout={LL_LegendFreeFloat:0,LL_LegendOnRightSide:1,LL_LegendOnLeftSide:2,LL_LegendBelowChart:3};mstrmojo.chart.enums.EnumBoxStyle={BS_NOFRAME:0,BS_SINGLE_LINE_FRAME:1,BS_DOUBLE_LINE_FRAME:2,BS_EXTRUDE:3,BS_BEVELED_FRAME:4,BS_REVERSE_BEVELED_FRAME:5};mstrmojo.chart.enums.EnumBoundingRectType={BRT_TOP:0,BRT_BOTTOM:1,BRT_CYLINDER:2,BRT_RING_CYLINDER:3,BRT_START_RECT:4,BRT_END_RECT:5};(function(){mstrmojo.vi.ui._IsUnitContainerTitleBar=mstrmojo.provide("mstrmojo.vi.ui._IsUnitContainerTitleBar",{_mixinName:"mstrmojo.vi.ui._IsUnitContainerTitleBar",layoutConfig:{w:{leftToolNode:"auto",textNode:"100%",rightToolNode:"auto"},xt:true},setDimensions:function A(D,C){return this._super("auto",C);},getTitleChildrenLayoutOffsets:function B(){return{h:0,w:12};}});}());mstrmojo.chart.enums.EnumFontRotation={FR_NORMAL:0,FR_45:5,FR_90:2,FR_180:3,FR_270:4,FR_315:6,FR_CUSTOME:7,FR_HOTEL:1,FR_AUTOMATIC:-1};mstrmojo.chart.enums.EnumFontAlignment={FA_LEFT:0,FA_CENTER:1,FA_RIGHT:2};mstrmojo.chart.enums.EnumGraphMatrixPiePlotType={GMPPT_CATEGORY:0,GMPPT_VALUE:1,GMPPT_GRID:2};mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75,GRAPHMATRIXVERTICALHISTOGRAM:76,GRAPHMATRIXGRIDCHART:78,GRAPHMATRIXVERTICALBOXPLOT:79,GRAPHMATRIXHORIZONTALBOXPLOT:80,GRAPHMATRIXVERTICALWATERFALL:81,GRAPHMATRIXHORIZONTALWATERFALL:82,KPICARD:83};var T=mstrmojo.vi.viz.EnumVisualizationTemplates;mstrmojo.vi.viz.EnumAggregatedVisTemplates={COMBOCHART:[T.GRAPHHORIZONTALBARDUALAXISCLUSTERED,T.GRAPHHORIZONTALBARDUALAXISABSOLUTE,T.GRAPHHORIZONTALLINEDUALAXISABSOLUTE,T.GRAPHHORIZONTALAREADUALAXISABSOLUTE,T.GRAPHVERTICALBARDUALAXISCLUSTERED,T.GRAPHVERTICALBARDUALAXISABSOLUTE,T.GRAPHVERTICALBARDUALAXISSTACKED,T.GRAPHVERTICALLINEDUALAXISABSOLUTE,T.GRAPHVERTICALLINEDUALAXISSTACKED,T.GRAPHVERTICALAREADUALAXISABSOLUTE,T.GRAPHVERTICALAREADUALAXISSTACKED,T.GRAPHCOMBINATIONBARAREADUALAXIS,T.GRAPHCOMBINATIONBARAREA],BUBBLECHART:[T.GRAPHMATRIXSCATTERCIRCLEMM,T.GRAPHMATRIXSCATTERGRIDCIRCLEAA,T.GRAPHMATRIXBUBBLECIRCLEMM,T.GRAPHMATRIXBUBBLEGRIDCIRCLEAA,T.GRAPHMATRIXSCATTERSQUAREAM,T.GRAPHMATRIXSCATTERSQUAREMM,T.GRAPHMATRIXSCATTERGRIDSQUAREAA,T.GRAPHMATRIXBUBBLESQUAREAM,T.GRAPHMATRIXBUBBLESQUAREMM,T.GRAPHMATRIXBUBBLEGRIDSQUAREAA],BARCHART:[T.GRAPHMATRIXVERTICALBARSTACKED,T.GRAPHMATRIXVERTICALBARCLUSTERED,T.GRAPHMATRIXVERTICALBARPERCENT,T.GRAPHMATRIXHORIZONTALBARSTACKED,T.GRAPHMATRIXHORIZONTALBARCLUSTERED,T.GRAPHMATRIXHORIZONTALBARPERCENT,T.GRAPHHORIZONTALBARCLUSTERED,T.GRAPHVERTICALBARCLUSTERED,T.GRAPHHORIZONTALBARABSOLUTE,T.GRAPHHORIZONTALBARPERCENT,T.GRAPHHORIZONTALBARSTACKED,T.GRAPHVERTICALBARABSOLUTE,T.GRAPHVERTICALBARPERCENT,T.GRAPHVERTICALBARSTACKED,T.GRAPHMATRIXVERTICALBARAUTOMATIC,T.GRAPHMATRIXHORIZONTALBARAUTOMATIC],LINECHART:[T.GRAPHMATRIXVERTICALLINESTACKED,T.GRAPHMATRIXVERTICALLINECLUSTERED,T.GRAPHMATRIXVERTICALLINEPERCENT,T.GRAPHMATRIXHORIZONTALLINESTACKED,T.GRAPHMATRIXHORIZONTALLINECLUSTERED,T.GRAPHMATRIXHORIZONTALLINEPERCENT,T.GRAPHHORIZONTALLINEABSOLUTE,T.GRAPHVERTICALLINEABSOLUTE,T.GRAPHVERTICALLINESTACKED,T.GRAPHVERTICALLINEPERCENT,T.GRAPHMATRIXVERTICALLINEAUTOMATIC,T.GRAPHMATRIXHORIZONTALLINEAUTOMATIC],PIECHART:[T.PIE,T.RING,T.GRAPHMATRIXPIE,T.GRAPHMATRIXRING],AREACHART:[T.GRAPHMATRIXVERTICALAREASTACKED,T.GRAPHMATRIXVERTICALAREAPERCENT,T.GRAPHMATRIXVERTICALAREACLUSTERED,T.GRAPHMATRIXHORIZONTALAREASTACKED,T.GRAPHMATRIXHORIZONTALAREAPERCENT,T.GRAPHMATRIXHORIZONTALAREACLUSTERED,T.GRAPHHORIZONTALAREAABSOLUTE,T.GRAPHVERTICALAREAABSOLUTE,T.GRAPHVERTICALAREAPERCENT,T.GRAPHVERTICALAREASTACKED,T.GRAPHMATRIXVERTICALAREAAUTOMATIC,T.GRAPHMATRIXHORIZONTALAREAAUTOMATIC],HISTOGRAM:[T.GRAPHMATRIXVERTICALHISTOGRAM,],BOXPLOT:[T.GRAPHMATRIXVERTICALBOXPLOT,T.GRAPHMATRIXHORIZONTALBOXPLOT],WATERFALL:[T.GRAPHMATRIXVERTICALWATERFALL,T.GRAPHMATRIXHORIZONTALWATERFALL]};mstrmojo.chart.enums.EnumGraphObjectType={GOT_AXIS_TITLE:0,GOT_AXIS_LABEL:1,GOT_AXIS_LINE:2,GOT_MAJOR_GRID:3,GOT_MINOR_GRID:4,GOT_INTERLACED_GRID:5};mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition={_BOTTOM:0,_TOP:1,_LEFT:2,_RIGHT:3,_CENTER:4};mstrmojo.chart.enums.EnumGraphSubType={GST_NULL:0,GST_BIPOLAR:1,GST_DUALAXIS:2};mstrmojo.chart.enums.EnumDataSetStatus={DTST_INVALID:0,DTST_OKAY:1,DTST_DISABLED:2};mstrmojo.chart.enums.EnumLayout={LO_ABSOLUTE:0,LO_CLUSTER:1,LO_STACKED:2,LO_PERCENT:3};(function(){var A;mstrmojo.chart.Polygon2D=A=mstrmojo.provide("mstrmojo.chart.Polygon2D",{});A.clone=function(D){var B=D.length,C,E=[];for(C=0;C<B;++C){E.push(D[C].clone());}return E;};}());mstrmojo.chart.enums.EnumCategoryLabelStyle={CLS_AUTOMATIC:0,CLS_NORMAL:1,CLS_STAGGER:2,CLS_MANUAL:3};mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};mstrmojo.vi.viz.EnumDSSDropZones={Reserved:0,Rows:1,Columns:2,XAxis:3,YAxis:4,BreakBy:5,SliceBy:6,ColorBy:7,SizeBy:8,AdditionalMetrics:9,Angle:10,Grouping:11,GeoAttribute:12,Layout:13,FromItem:14,ToItem:15,ItemSize:16,Latitude:17,Longitude:18,Metric:19,Trend:20};mstrmojo.chart.enums.EnumLineStyle={LS_SOLID:0,LS_DASH:1,LS_DOT:2,LS_DOT_DASH:3,LS_DASH_DOT_DOT:4,LS_MEDIUM_DASH:5,LS_SHORT_DASH:6,LS_LONGEST_DASH:7,LS_LONG_DOT:8,LS_DOT_DOT_DOT:9,LS_DASH_DASH_DOT:10,LS_DASH_DASH_DOT_DOT:11,LS_LONG_DASH_DOT:12,LS_LONG_DASH_DOT_DOT:13,LS_LONG_DASH_DASH:14,LS_LONG_DASH_DASH_DASH:15,LS_GRADIENT:16,LS_NONE:99};mstrmojo.chart.enums.EnumGraphMatrixMajorGraphType={_UNDEFINED:0,_AREA:1,_BAR:2,_LINE:3,_SCATTER:4,_BUBBLE:5,_PIE:6,_GRID:7};mstrmojo.chart.model.enums.EnumShapeType={_COMBINED:-2,_GENERIC:-1,_AREA:0,_BAR:1,_LINE:2,_STEPLINE:3,_CIRCLE:4,_RECTANGLE:5,_SQUARE:6,_TICKER:7,_PIESLICE:8,_POLYGON:9,_PIE:10,_BULLET:11,_CURVE:12,_DEFAULT:100};(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum=this.mMaximum+M;this.mMinimum=this.mMinimum-M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());mstrmojo.chart.enums.EnumRectCompare={NONE:-1,ExpandX:0,ExpandY:1,ShrinkX:2,ShrinkY:3,KeepX:4,KeepY:5,KeepBoth:6};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};mstrmojo.chart.enums.EnumDSSGraphObjectManager={DssChartManager:20000,DssPlotManager:20001,DssPlot:20002,DssLegend:20003,DssAreaSeriesRenderer:20004,DssBarSeriesRenderer:20005,DssLineSeriesRenderer:20006,DssStepLineSeriesRenderer:20007};mstrmojo.chart.enums.EnumOrientation={OR_HORIZONTAL:0,OR_VERTICAL:1};mstrmojo.chart.enums.EnumGraphMatrixElementSizeMode={_AUTOMATIC:0,_PROPORTIONAL:1,_MANUAL:2};mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap={DssXmlAxisNone:0,DssXmlAxisRowsBit:1,DssXmlAxisColumnsBit:2,DssXmlAxisPagesBit:4,DssXmlAxisChaptersBit:8};(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphObject");var A=mstrmojo.chart.model,C=A.enums,B=C.EnumDSSGraphObject;mstrmojo.chart.model.enums.EnumDSSGraphTitleName={DssGraphTitleReserved:0,DssGraphTitleTitle:B.DssGraphTitle,DssGraphTitleSubtitle:B.DssGraphSubtitle,DssGraphTitleFootnote:B.DssGraphFootnote,DssGraphTitleCategory:B.DssGraphXTitle,DssGraphTitleSeries:B.DssGraphSeriesTitle,DssGraphTitleY1:B.DssGraphY1Title,DssGraphTitleY2:B.DssGraphY2Title,DssGraphTitleY1Right:B.DssGraphY1RightTitle};})();(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphProperty");var B=mstrmojo.chart.model,C=B.enums,A=C.EnumDSSGraphProperty;mstrmojo.chart.model.enums.EnumDSSGraphRegressionType={DssGraphRegressionNone:0,DssGraphRegressionLinear:A.DssGraphShowSDLinrLine,DssGraphRegressionLog:A.DssGraphShowSDLinrLog,DssGraphRegressionPoly:A.DssGraphShowSDLinrNPoly,DssGraphRegressionExp:A.DssGraphShowSDLinrExp,DssGraphRegressionMA:A.DssGraphShowSDMOVALine,DssGraphRegressionNatLog:A.DssGraphShowSDLinrNatLog,DssGraphRegressionSTDD:A.DssGraphShowSDSTDDLine,DssGraphRegressionMean:A.DssGraphShowSDMeanLine,DssGraphRegressionPow:200};})();(function(){mstrmojo.requiresCls("mstrmojo.array");var L=10,C=20,b=false,l=false,X=L,c=[],W=mstrmojo.array,J=false,P,g;var B=6,Y=7,A=100,j=101,O=102,F=103;function D(p,s,q){var o=s[0],n=s[1],r;p.beginPath();p.moveTo(o,n);for(r=2;r<s.length-1;r=r+2){p.lineTo(s[r],s[r+1]);}p.lineTo(o,n);p.fillStyle=q;p.stroke();p.fill();}function h(p,s,q){var o=s[0],t=s[1],r=s[2]-o,n=s[3]-t;p.fillStyle=q;p.strokeRect(o,t,r,n);p.fillRect(o,t,r,n);}function a(u,r,w){var p=r[0],o=r[1],t=r[2],q=r[3],s=r[4],n=r[5];u.beginPath();u.arc(p,o,q,s,n,false);u.lineTo(p+t*Math.cos(n),o+t*Math.sin(n));u.arc(p,o,t,n,s,true);u.closePath();u.fillStyle=w;u.stroke();u.fill();}function M(u,r,w){var q=r[0],p=r[1],s=r[2],t=r[3],n=r[4],o=r[5];u.scale(1,o);u.beginPath();u.arc(q,p,s,t,n,false);u.lineTo(q,p);u.arc(q,p,0,n,t,true);u.closePath();u.fillStyle=w;u.stroke();u.fill();u.scale(1,1/o);}function N(w,s,x){var q=s[0],p=s[1],t=s[2],u=s[3],n=s[4],r=s[5],o=s[6];w.scale(1,o);w.beginPath();w.arc(q,p,t,u,n,false);w.lineTo(q+t*Math.cos(n),p+t*Math.sin(n)-r);w.arc(q,p-r,t,n,u,true);w.closePath();w.fillStyle=x;w.stroke();w.fill();w.scale(1,1/o);}function E(n,p,o){n.fillStyle=o;n.beginPath();n.arc(p[0],p[1],p[2],0,Math.PI*2,true);n.stroke();n.fill();}function U(o,n){return o.Point.X-n.Point.X;}function I(o,AD,y){var AC=this.tooltipArr[y],q=o.Text,t=o.SC,n=AC.style,AB=this.model.getZoomFactor(),u=mstrMobileApp.getDeviceDPI()/160,z=2*u,AA=mstrApp.getScreenDimensions().w-(P*2);if(mstrApp.isTablet()){AB=(AB*u)+"em";}else{if(mstrMobileApp.getDeviceDPI()>240){AB=(AB*1.5)+"em";}else{AB+="em";}}var s="font-size:"+AB+";";s+="padding:"+z+"px;";s+="maxWidth:"+AA+"px;";if(t){s+="border-color:#"+t;}AC.innerHTML=q;n.cssText=s;n.display="block";var x=0,r=0;var p=AC.offsetHeight,w=AC.offsetWidth;x=AD.y-p-6;r=AD.x-w-6;c.push({x:o.Point.X,y:o.Point.Y,clr:t||"#000000",top:x,left:r,width:w,height:p});}function Q(p,o,n){var r=n.left,q=Math.max(n.top,g+C);width=n.width,style=o.style,newLeft=r+width+12;if(newLeft+width<=mstrApp.getScreenDimensions().w){r=newLeft;}else{if(r<0){r=P;}}style.left=r+"px";style.top=q+"px";p.showAreaMarker(n.x,n.y,n.clr);}function f(n,AG){var AB=c[AG],AD=n.tooltipArr,AA=AD[AG].style,p=AB.left,s=AB.top,x=AB.width,t=AB.height,y=mstrApp.getScreenDimensions().w,z,w;if(AG>0){var u=c[AG-1],r=u.top,o=u.left,AF=o+u.width,q=o+x,AE;p=o;if(q>AF){p-=(q-AF);}else{if(q<AF){p+=(AF-q);}}if(p<0){if((x*2)+12>y){b=false;J=true;p=P;for(z=0;z<AG;z++){AE=AD[z];u=c[z];w=p+x-u.width;u.left=w;AE.style.left=p+x-u.width+"px";}}else{b=true;}}s=r-C-t;if(s<g){var AC=Math.abs(s)+g+C;for(z=0;z<AG;z++){AE=AD[z];u=c[z];r=u.top+AC;u.top=r;AE.style.top=r+"px";}s+=AC;}}else{if(p<0){if((x*2)+12>y){J=true;p=P;}else{b=true;}}if(s<g){s=g+C;}}if(!b){AA.left=p+"px";AB.left=p;}AA.top=s+"px";AB.top=s;n.showAreaMarker(AB.x,AB.y,AB.clr);}function V(s,n,q,u){var p=s.tooltipArr[n].style,r=c[n],t=c[n-q].top,o=r.width;if(u+o>mstrApp.getScreenDimensions().w){l=true;p.display="none";return ;}p.left=u+"px";p.top=t+"px";s.showAreaMarker(r.x,r.y,r.clr);}function d(AC){var AD=c.length,o=AC.tooltipArr,r=Math.ceil(AD/2),t=0,AB=1,z=Math.min(AD,L/2),n=mstrApp.getScreenDimensions().w,q,p,y,w;for(t=0;t<r;t++){f(AC,t);}if(b||J){for(t;t<z;t++){f(AC,t);}if(!J){var s=t-1,AA=0,x=0,u,AE;q=c[s];p=q.left+q.width+12;for(s=t-1;s>=0;s--){y=o[s];AE=c[s].width;if(p+AE>n){x=P+AE;if(x>AA){w=x;u=c[s];}}y.style.left=p+"px";}if(AA>0){for(s=0;s<t;s++){y=o[s];y.style.left=(P+u.width-c[s].width)+"px";}}}}else{q=c[AD-1];p=q.left+q.width+12;for(t;t<AD;t++){V(AC,t,AB,p);AB+=2;if(l){break;}}if(l&&t<=z){for(t=r;t<AD;t++){f(AC,t);o[t].style.display="block";}}}}function S(){var n=this,o=c.length;if(o===0){return ;}g=mstrApp.rootView.getTitleHeight();if(o===1){Q(n,n.tooltipArr[0],c[0]);}else{d(n);}}function K(p,n,q,o){switch(p){case Y:h(n,q,o);break;case A:E(n,q,o);break;case j:a(n,q,o);break;case O:M(n,q,o);break;case F:N(n,q,o);break;default:D(n,q,o);}}mstrmojo.graph._MobileGraphAreaHelper=mstrmojo.provide("mstrmojo.graph._MobileGraphAreaHelper",{highlightArea:function k(r,p){var q=this,n=r.getContext("2d"),o="rgba(255, 255, 255, 0.5)";q.clearHighlightArea(r);n.strokeStyle="#FFFFFF";W.forEach(p,function(s){K(s.Shape,n,s.Coords,o);});},highlightAreaInInit:function G(y,u){var AA=y.getContext("2d"),n=this.graphData.Areas,r="rgba(255, 255, 255, 0.5)";AA.clearRect(0,0,y.width,y.height);AA.strokeStyle="#FFFFFF";var o=n.length,AB=286,t=259,z=341;var x=u.length/2,s,w;for(w=0;w<o;w++){var p=n[w],q=parseInt(p.OID,10);if(q!==AB&&q!==t&&q!==z){continue;}if(p.SID<0||p.GID<0){continue;}for(s=0;s<x;s++){if(p.SID!==u[2*s]||p.GID!==u[2*s+1]){continue;}K(p.Shape,AA,p.Coords,r);}}},clearHighlightArea:function R(o){if(o){var n=o.getContext("2d");n.clearRect(0,0,o.width,o.height);o.width=o.width;}},showAreaMarker:function H(n,q,p){if(n>=0&&q>=0){var o=this.highlightNode.getContext("2d");o.save();o.fillStyle="#FFFFFF";o.strokeStyle=p||"#000000";o.lineWidth=2;o.beginPath();o.arc(n,q,5,0,Math.PI*2,true);o.stroke();o.fill();o.fillStyle=p||"#000000";o.beginPath();o.arc(n,q,2,0,Math.PI*2,true);o.stroke();o.fill();o.restore();}},displayTooltips:function e(n,s,r){n.sort(U);var q=this.tooltipArr,t;b=false;l=false;c=[];this.clearHighlightArea(this.highlightNode);if(!q){P=8*(mstrMobileApp.getDeviceDPI()/160);q=[];for(t=0;t<L;t++){var w=document.createElement("div");w.id="mstrmojo-mobileGraph-tooltip";w.className=mstrmojo.GraphBase.tooltipCLS;document.body.appendChild(w);q[t]=w;}this.tooltipArr=q;}X=Math.min(n.length,L);var u=mstrmojo.touchManager;if(X===0&&this._touchListener){u.detachEventListener(this._touchListener);delete this._touchListener;}else{if(X>0&&!this._touchListener){this._touchListener=u.attachEventListener("touchesBegin",this.id,function(y){var z=mstrmojo.all[y.srcId];if(!(z instanceof mstrmojo.android.ui.ActionToolbarButtons||z instanceof mstrmojo.android.ui.Menu)){this.displayTooltips([],0,0);}});}}var p=null,x={},o;J=false;for(t=0;t<L;t++){o=q[t].style;o.left=-9999;o.display="none";}for(t=0;t<X;t++){p=n[t];x.x=p.Point.X+s;x.y=p.Point.Y+r;I.call(this,p,x,t);}S.call(this);window.setTimeout(function(){mstrMobileApp.forceRepaint();},0);},destroy:function Z(n){W.forEach(this.tooltipArr,function(o){document.body.removeChild(o);});delete this.tooltipArr;if(this._super){this._super(n);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo,D=A.array;mstrmojo.vi.util.TemplateUtils=mstrmojo.provide("mstrmojo.vi.util.TemplateUtils",{getTemplateUnits:function B(F){var E=[].concat(F.mx);(F.rows||[]).concat(F.cols||[]).forEach(function(G){if(G.did!=="-1"){E.push({did:G.did,t:G.t,n:G.n});}});return E;},findUnitsById:function C(H,F){var E=mstrmojo.vi.util.TemplateUtils.getTemplateUnits(H),G=[];D.ensureArray(F).forEach(function(K){var J=D.find(E,"did",K),I=J>-1?E[J]:null;if(I){G.push(I);}});return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.EnumRWUnitType");var F=mstrmojo.array;var G=2;var I={attribute:"attribute",metric:"metric",empty:"empty;"};function B(){var L=this.model.data.gts,O=(L&&L.row)||[],M=(L&&L.col)||[],N=O.concat(M);return N;}function C(){var L=this.model.scm,N=Object.keys(L||{}),P=(N&&N[0])||"",O=this.model.data.gts.row,M=this.model.data.gts.col;F.forEach(O.concat(M),function(Q){if(N.indexOf(Q.id)!==-1){P=Q.id;return false;}});return P;}mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights=mstrmojo.provide("mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights",{_mixinName:"mstrmojo.netviz._SupportNetworkBrushesAndHighlights",selectedMetricIds:null,TUSType:I.empty,init:function K(L){this.selectedMetricIds=[];if(this._super){this._super(L);}},addAttributeSelection:function(M,L,N){this.TUSType=I.attribute;this._super(M,L,N);},addContextMenuAttributeSelection:function(N,M,Q,P,R,O,L){this.TUSType=I.attribute;this._super.apply(this,arguments);},addMetricValueSelection:function(L){this.TUSType=I.attribute;this._super(L);},addContextMenuMetricValueSelection:function(L){this.TUSType=I.attribute;this._super(L);},getTUSType:function(){return this.TUSType;},precessSelectedAttributes:function(M,L,O){if(!O){var N=this.getSingleAttributeSelectorControl();if(!N){this.interactor.clearSelectedTargets();this.interactor.clearSelectRules();this.clearSelections(true);}}},processSelectedMetricIds:function(M,L,O){if(!O){var N=this.getMetricSelectorControl();if(N){this.interactor.clearMetricSelectorHighlight();this.selectedMetricIds=[];}}},highlight:function(N,O,L){if(this._super){this._super.apply(this,arguments);}if(this.noHighlightAfterKeepOnlyExcludeDrill){return ;}var M=this.interactor;if(M){M.doHighlight(N,O,L);}},singleUnitSelect:function A(){var Q=this.selectedMetricIds.length>0&&this.hasMetricSelector(),S=(this.getSelections().length>0||this.clearSelectionsFlag)&&this.hasAttributeSelector();if(this.clearSelectionsFlag){delete this.clearSelectionsFlag;}Q=false;if(S&&Q){var N={multiSelect:true,type:mstrmojo.EnumRWUnitType.GRID,src:this.model.k,sliceId:1,sid:1,anchor:this.domNode,selectorObjects:[]};var U=this.getSingleAttributeSelectorControl(),R=this.model.getSelectedAttributeElementIdStr();N.selectorObjects.push({ck:U.ck,ctlKey:U.ckey,tks:U.tks,eid:R});var M=this.getMetricSelectorControl(),P=this.getSelectedMetricIdStr();N.selectorObjects.push({ck:M.ck,ctlKey:M.ckey,tks:M.tks,eid:P});this.controller.onGridSelector(this,N);}else{if(Q){var O=this.getMetricSelectorControl();this.singleMetricSelect(O);}else{if(S){var L=function(){var W={};W.tid=C.call(this);W.eid="";W.isClearAll=false;W.anchor=this.domNode;W.at=G;W.selections=this.getSelections();W.selectionType=this.getSelectionType();return W;};var V=L.call(this);this.performAction([V]);}}}},getSelectedMetricIdStr:function(M){var P=this.selectedMetricIds,O=P.join("\u001E"),Q=M.sc,N=Q.showall&&P.length===0,L=N?"OA:(All)":O;return L;},singleMetricSelect:function E(M){var O=M.sc,L=this.getSelectedMetricIdStr(M),N={type:mstrmojo.EnumRWUnitType.GRID,anchor:this.domNode,ck:O.ck,tks:O.tks,eid:L,ctlKey:O.ckey,sliceId:this.sid,isUConDS:O.isUConDS,isDocVis:true};this.controller.onGridSelector(this,N);},getSingleAttributeSelectorControl:function(){var M=null;if(this.hasAttributeSelector()){var L=C.call(this);M=this.model.scm[L];}return M;},getMetricSelectorControl:function D(){var M=B.call(this),L=null;F.forEach(M,function(N){if(N.otp===-1&&N.hasOwnProperty("sc")){L=N;return false;}});return L;},hasAttributeSelector:function J(){var M=B.call(this),L=false;F.forEach(M,function(N){if(N.otp!==-1&&N.hasOwnProperty("sc")){L=true;return false;}});return L;},hasMetricSelector:function H(){var M=B.call(this),L=false;F.forEach(M,function(N){if(N.otp===-1&&N.hasOwnProperty("sc")){L=true;return false;}});return L;},hasRSSelector:function(){return this.hasAttributeSelector()||this.hasMetricSelector();},postBuildRendering:function(){if(this.cetSelectors){var L=this.cetSelectors.attrs,M=this.cetSelectors.metrics,N=this;if(L.length>0){L.forEach(function(O){N.addAttributeSelection(O.tid,O.id,O.n);});}if(M.length>0){M.forEach(function(O){N.addMetricValueSelection(O.tid,O.id,O.n);});}}this._super();},clearSelections:function(L,M){this.clearSelectionsFlag=true;this.TUSType=I.empty;if(this._super){this._super();}if(L){this.clearSelectedHighlights(M);}},clearCxtMnuSelection:function(L,M){this.clearSelectionsFlag=true;this.TUSType=I.empty;if(this._super){this._super();}if(L){this.clearSelectedContextMenuHighlights(M);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var H=mstrmojo.array,D={},G={},A="72px",F="abcdefghijklmnopqrstuvwxyz0123456789";function C(I){return I.name+":"+(I.isItalic?"i":"n")+(I.isBold?"7":"4");}mstrmojo.util.FontLoader=mstrmojo.provide("mstrmojo.util.FontLoader",{load:function E(N,O){var L=this,J=[],K;H.forEach(N,function(P){if(!L.isFontInstalled(P)){K=C(P);if(!D[K]&&!G[K]){J.push(K);}}});if(!window.WebFont||J.length===0){return true;}window.WebFont.load({custom:{families:J},fontactive:function(Q,P){D[Q+":"+P]=true;},fontinactive:function(Q,P){G[Q+":"+P]=true;},active:function M(){O.success();},inactive:function I(){O.failure();}});return false;},isFontInstalled:function B(J){var K=document.createElement("canvas"),L=K.getContext("2d"),P=J.isItalic?"italic":"normal",I=J.isBold?"bold":"normal",N=P+" "+I+" "+A,O,M;L.font=N+" monospace";O=L.measureText(F).width;L.font=N+" '"+J.name+"', monospace";M=L.measureText(F).width;K=null;return O!==M;}});})();(function(){mstrmojo.requiresCls("mstrmojo.EnumDSSDisplayMode");mstrmojo.requiresDescs(981);var B=mstrmojo.vi.viz;mstrmojo.vi.viz.KnownVisualizations={CUSTOM:-2,UNKNOWN:-1,GRID:0,ESRIMAP:2,GRAPHMATRIX:3,NEWGRAPHMATRIX:13,IMAGELAYOUT:4,HEATMAP:16,GOOGLEMAP:17,NETWORK:18,MAPBOX:19,KPICARD:20,getDefinition:function A(E){var F=B.KnownVisualizations,H={Grid:{id:F.GRID,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,title:mstrmojo.desc(981,"Grid")},visAjaxDatePicker:{id:1},ESRIMapVisualizationStyle:{id:F.ESRIMAP,mobileVIStyles:{IPhoneVisualization:"ViEsriMapAdapter",IPadVisualization:"ViEsriMapAdapter"}},GraphMatrixVisualizationStyle:{id:F.GRAPHMATRIX,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,widgetEnable:"-1",mobileVIStyles:{IPadVisualization:"IPadGraphMatrix2Style"}},NewGraphMatrixVisualizationStyle:{id:F.NEWGRAPHMATRIX,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,widgetEnable:"-1",mobileVIStyles:{IPadVisualization:"IPadGraphMatrix2Style"}},ImageLayoutVisualizationStyle:{id:F.IMAGELAYOUT,mobileVIStyles:{IPadVisualization:"IPhoneImageMapStyle",ATabletVisualization:"AndroidImageMapStyle"}},SurveyVisualizationStyle:{id:8,mobileVIStyles:{IPadVisualization:"SurveyVisualizationStyle"}},VIHeatMapVisualizationStyle:{id:F.HEATMAP,mobileVIStyles:{IPadVisualization:"IPadHeatMapStyle",ATabletVisualization:"HeatMapVisualizationStyle"}},GoogleMapVisualizationStyle:{id:F.GOOGLEMAP,mobileVIStyles:{IPhoneVisualization:"IPhoneMapStyle",IPadVisualization:"IPadMapStyle"}},MapboxVisualizationStyle:{id:F.MAPBOX,mobileVIStyles:{IPhoneVisualization:"IPhoneMapboxStyle",IPadVisualization:"IPhoneMapboxStyle"}},NetworkVisualizationStyle:{id:F.NETWORK,mobileVIStyles:{IPadVisualization:"IPhoneNetVizStyle"}},KPICardVisualizationStyle:{id:F.KPICARD,mobileVIStyles:{IPadVisualization:"IPhoneKPICardStyle"}}};var G=H[E];if(!G){var C=mstrConfig.pluginsVisList,D=C&&C[E];G={id:D?F.CUSTOM:F.UNKNOWN};G.mobileVIStyles=(D&&D.mobileVIStyles)||{};}return G;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom,D=Math;mstrmojo.gm._IsAnchorable={PLACEMENT_ABOVE:1,PLACEMENT_BELOW:2,PLACEMENT_LEFT:3,PLACEMENT_RIGHT:4,anchor:null,anchorPosition:null,boundary:null,boundaryPosition:null,popupNodeName:"infoNode",tipNodeName:"tipNode",baseTipClass:"arrow",infoNodeOffset:25,popupNodeOffset:0,placementOrder:[this.PLACEMENT_ABOVE,this.PLACEMENT_BELOW,this.PLACEMENT_LEFT,this.PLACEMENT_RIGHT],hasScrollbars:function G(){return(!mstrApp.isTouchApp||!mstrApp.isTouchApp());},positionDialog:function E(){if(!this.anchorPopup()){if(typeof this._super==="function"){this._super();}}},positionTipNode:function A(I){var J=this.baseTipClass,K=this[this.tipNodeName];K.className=J+" "+I;},getTipDimension:function B(){var J=this[this.tipNodeName],I=C.position(J);return I;},anchorPopup:function F(){this.positionTipNode("top");var K=this.anchor,c=this.boundary,p=this[this.popupNodeName],s=this.infoNodeOffset,j=this.popupNodeOffset,l=this.hasScrollbars(),Z=this.anchorPosition||C.position(K,true),M=this.boundaryPosition||C.position(c,true),u=M.w,L=M.h,d=p.offsetWidth,O=p.offsetHeight,V=d/2,I=O/2,X=this.getTipDimension(),h=D.min(X.h,X.w),P=D.max(X.h,X.w)/2;if(l){u-=15;L-=15;}var a=C.contains(c,p),k=a?0:M.y,t=u/2-V,Q=L/2-I+k,o=-1000,w=-1000;if(a){Z.x=Z.x-M.x;Z.y=Z.y-M.y;}var g=Z.y+Z.h,N=Z.x+Z.w,f=Z.x>d,q=((N+d)<u),R=Z.y>O,n=((g+O)<L),U=this,W=function(x,z,y){return D.min(D.max(x,y),D.max(z,0));},e=function(){if((Z.x<u)&&R){var x=Z.x+(Z.w/2);U.positionTipNode("bottom");w=Z.y-h-j;Q=w-O+s;t=W(0,u-d,x-V);o=W(Z.x,N,x)-P;return true;}return false;},J=function(){if((Z.x<u)&&n){var x=Z.x+(Z.w/2);U.positionTipNode("top");w=g+j;Q=w+h-s;t=W(0,u-d,x-V);o=W(Z.x,N,x)-P;return true;}return false;},b=function(){if((Z.y<L)&&f){var x=Z.y+(Z.h/2);U.positionTipNode("right");o=Z.x-h-j;t=o-d+s;Q=W(k,L-O,x-I);w=W(Z.y,g,x)-P;return true;}return false;},Y=function(){if((Z.y<L)&&q){var x=Z.y+(Z.h/2);U.positionTipNode("left");o=N+j;t=o+h-s;Q=W(k,L-O,x-I);w=W(Z.y,g,x)-P;return true;}return false;},S=[],r;for(r=0;r<this.placementOrder.length;r++){switch(this.placementOrder[r]){case this.PLACEMENT_ABOVE:S.push(e);break;case this.PLACEMENT_BELOW:S.push(J);break;case this.PLACEMENT_LEFT:S.push(b);break;case this.PLACEMENT_RIGHT:S.push(Y);break;}}for(r=0;r<S.length;r++){if(S[r]()){break;}}Q=D.round(Q);t=D.round(t);w=D.round(w);o=D.round(o);this.applyPopupNodePos(Q,t,w,o);return true;},applyPopupNodePos:function H(K,J,M,I){var O=this[this.tipNodeName],L=O.style,P=this[this.popupNodeName],N=P.style;L.top=M+"px";L.left=I+"px";N.top=K+"px";N.left=J+"px";}};}());(function(){mstrmojo.requiresCls("mstrmojo.gmaps.MapEnums");var E=mstrmojo.gmaps,M=E.EnumGeographicRole,G=E.EnumBaseMapType,L=E.EnumPolygonSource,J="4-s";function K(O){return !!(O&&O.custom&&(O.custom==="true"||O.custom===true));}mstrmojo.gmaps._AreaMapHelper=mstrmojo.provide("mstrmojo.gmaps._AreaMapHelper",{_mixinName:"mstrmojo.gmaps._AreaMapHelper",getAvailableShapes:function N(O,W,U,V){var R=[],Q,S,P;if(!O||U==undefined){return R;}if(V===G.Mapbox){return this.getShapesForMapbox(O,W);}for(S=0,P=O.length;S<P;S++){Q=O[S];if(V!==G.Esri&&!K(Q)){continue;}if(this.isMapBoxShapeConfig(Q,W)){continue;}if(U===M.EnumGeographicRoleNone||U===M.EnumGeographicRoleOther&&K(Q)||U==Q.roleId){R.push(Q);}}return R;},getShapesForMapbox:function C(O,U){var R=[],Q,S,P;for(S=0,P=O.length;S<P;S++){Q=O[S];if(this.isMapBoxShapeConfig(Q,U)){Q.supportedGeoRoles=[Q.roleId];if(Q.roleId===M.EnumGeographicRoleCity){Q.supportedGeoRoles.push(M.EnumGeographicRoleCounty);}R.push(Q);}}return R;},getPolygonSource:function D(O,P,Q,U){var R=O&&O.data,V=R&&R.vp,W=V&&V.lid,S,X;if(!V){return L.Cloud;}if(!!W){S=this.getMatchingShape(P,W,null);}else{X=this.getShapeAttributeGeoRole(R,O.dropZones.geoAttribute);P=this.getAvailableShapes(P,Q,X,U);S=this.getMatchingShape(P,null,X);}if(!!S){if(!W){V.lid=S.id;}if(K(S)){if(this.isMapBoxShapeConfig(S,Q)){return L.MapBoxPolygon;}return L.Custom;}}return L.Cloud;},isMapBoxShapeConfig:function A(O,S){var Q,P,R=(S&&S.length)||0;for(Q=0;Q<R;Q++){P=S[Q];if(O.layerId===P.id){return parseInt(P.scope)===parseInt(G.Mapbox);}}return false;},isMapboxStatisticalShape:function B(O,S){var Q,P,R=(S&&S.length)||0;for(Q=0;Q<R;Q++){P=S[Q];if(O&&O.layerId===P.id){return P.scope===J;}}return false;},getShapeAttributeGeoRole:function F(S,V){var P=S.gts,a=P&&P.row,O,Z,Y,U,X,Q,R,W=false;if(!a||!a.length){return ;}X=a.length;if(!!V){for(U=0;U<X;U++){Y=a[U];if(Y.id!==V){continue;}O=Y.fs;for(Q=0,R=O.length;Q<R;Q++){Z=O[Q].fgr;if(Z==undefined){continue;}Z=Z.toString();if(Z!==M.EnumGeographicRoleNone&&Z!==M.EnumGeographicRoleLatitiude&&Z!==M.EnumGeographicRoleLongitude){W=true;break;}}if(W){break;}}}else{for(U=0;U<X;U++){Y=a[U];O=Y.fs;for(Q=0,R=O.length;Q<R;Q++){Z=O[Q].fgr;if(Z!==M.EnumGeographicRoleNone&&Z!==M.EnumGeographicRoleLatitiude&&Z!==M.EnumGeographicRoleLongitude){break;}}}}return Z;},getMatchingShape:function I(P,U,X){var R,S,W,O,Q,V;if(!P){return null;}if(X===M.EnumGeographicRoleNone){X=null;}if(!!U){for(Q=0,V=P.length;Q<V;Q++){if(P[Q].id==U){R=P[Q];break;}}}else{if(!!X){for(Q=0,V=P.length;Q<V;Q++){O=P[Q];if(K(O)&&(O.roleId==X||(O.supportedGeoRoles&&O.supportedGeoRoles.indexOf(X)>-1))){if(!S){S=O;}if(!!O["default"]&&(O["default"]+"").toLowerCase()==="true"){R=O;break;}}else{if(!W&&O.roleId==X&&!!O["default"]&&(O["default"]+"").toLowerCase()==="true"){W=O;}}}if(!R){if(!!S){R=S;}else{if(!!W){R=W;}}}}}return R;},getShape4MapboxSecondGeoAttr:function H(P,Q,V,Y){var O,S,R,W,X,U;P=this.getAvailableShapes(P,Q,M.EnumGeographicRoleOther,G.Mapbox);W=(P&&P.length)||0;S=this.getMatchingShape(P,V,null);for(R=0;R<W;R++){O=P[R];if(O.roleId==Y||(O.supportedGeoRoles&&O.supportedGeoRoles.indexOf(Y)>-1)){if(Y==M.EnumGeographicRoleCountry){return O;}X=this.isMapboxStatisticalShape(S,Q);U=this.isMapboxStatisticalShape(O,Q);if(X===U){return O;}}}return null;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.vi.enums.EnumThemeProperties");var D=mstrmojo.hash,C=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME,A={shpLnThk:[2],shpLnClr:[11826975,16756758],shpLnStyle:[0],shpFillClr:[11826975,16756758],shpFillStyle:[0],shpFillTrans:[70],shpFillEff:[1],shpBdrClr:[undefined],shpBdrStyle:[0],shpBdrThk:[2],lnMkShw:[false],lnMkShp:[4],lnMkSz:[3],lnMkClr:[undefined],lnMkClrEq:[true],lnMkBdrClr:[undefined],pieExpl:[false],dlFntFml:["Arial"],dlFntSz:["8pt"],dlFntStyle:[0],dlFntClr:[5066061,16514043],rfLnFntFml:["Arial"],rfLnFntSz:["8pt"],rfLnFntStyle:[0],rfLnFntClr:[5066061,16514043],lgdBgFillClr:[15461355,1710618],lgdBgFillStyle:[0],lgdBgFillEff:[1],lgdBgFillTrans:[0,0],lgdFntSz:["8pt"],lgdFntFml:["Arial"],lgdFntStyle:[0],lgdFntClr:[6710886,16777215],lgdBdrShw:[false],lgdBdrClr:[11579568,5855577],lgdBdrThk:[1],lgdBdrStyle:[0],xAxOriLnShw:[false],xAxOriLnClr:[11579568,5855577],xAxOriLnStyle:[1],xAxOriLnThk:[1],yAxOriLnShw:[false],yAxOriLnClr:[11579568,5855577],yAxOriLnStyle:[1],yAxOriLnThk:[1],xAxShw:[true],xAxLnShw:[true],xAxLnClr:[11579568,5855577],xAxLnStyle:[0],xAxLnThk:[1],xAxTtShw:[true],xAxTtFntSz:["8pt"],xAxTtFntClr:[6710886,16777215],xAxTtFntFml:["Arial"],xAxTtFntStyle:[0],xAxLbFntClr:[6710886,16777215],xAxLbFntSz:["8pt"],xAxLbFntFml:["Arial"],xAxLbFntStyle:[0],xAxLbRtt:[-1],xAxLbShw:[true],yAxShw:[true],yAxLnShw:[true],yAxLnClr:[11579568,5855577],yAxLnStyle:[0],yAxLnThk:[1],yAxTtShw:[true],yAxTtFntSz:["8pt"],yAxTtFntClr:[6710886,16777215],yAxTtFntFml:["Arial"],yAxTtFntStyle:[0],yAxLbFntClr:[6710886,16777215],yAxLbFntSz:["8pt"],yAxLbFntFml:["Arial"],yAxLbFntStyle:[0],yAxLbRtt:[-1],yAxLbShw:[true],bgFillClr:[16777215,2631720],bgFillEff:[1],bgFillStyle:[0],bgFillTrans:[100],rwHdrFillClr:[16382457,2631720],rwHdrFillEff:[1],rwHdrFillStyle:[0],rwHdrFillTrans:[100],colHdrFillClr:[16382457,2631720],colHdrFillEff:[1],colHdrFillStyle:[0],colHdrFillTrans:[100],vMatrixLnShw:[true],vMatrixLnClr:[11579568,5855577],vMatrixLnThk:[1],vMatrixLnStyle:[0],hMatrixLnShw:[true],hMatrixLnClr:[11579568,5855577],hMatrixLnThk:[1],hMatrixLnStyle:[0],xGridLnShw:[4],yGridLnShw:[4],allTxtFntClr:[6710886],allTxtFntSz:["8pt"],allTxtFntFml:["Arial"],allTxtFntStyle:[0],outBdrClr:[11579568,5855577],outBdrStyle:[0],outBdrThk:[1],gridLineAuto:[true],gridLnClr:[11579568,5855577],gridLnThk:[1],gridLnStyle:[0],majorGridLnShw:[1],majorGridLnClr:[11579568,5855577],majorGridLnThk:[1],majorGridLnStyle:[0],minerGridLnShw:[1],minerGridLnClr:[11579568,5855577],minerGridLnThk:[1],minerGridLnStyle:[0],rwHdrShw:[true],colHdrShw:[true],rwVlShw:[true],colVlShw:[true],rwHdrTxtFntClr:[6710886,16777215],rwHdrTxtFntSz:["8pt"],rwHdrTxtFntFml:["Arial"],rwHdrTxtFntStyle:[0],rwHdrTxtAlignH:[1],rwHdrTxtAlignV:[1],colHdrTxtFntClr:[6710886,16777215],colHdrTxtFntSz:["8pt"],colHdrTxtFntFml:["Arial"],colHdrTxtFntStyle:[0],colHdrTxtAlignH:[1],colHdrTxtAlignV:[1],rwVlTxtFntClr:[6710886,16777215],rwVlTxtFntSz:["8pt"],rwVlTxtFntFml:["Arial"],rwVlTxtFntStyle:[0],rwVlTxtAlignH:[1],rwVlTxtAlignV:[1],colVlTxtFntClr:[6710886,16777215],colVlTxtFntSz:["8pt"],colVlTxtFntFml:["Arial"],colVlTxtFntStyle:[0],colVlTxtAlignH:[1],colVlTxtAlignV:[1],ttlFntClr:[6710886,16777215],ttlFntSz:["8pt"],ttlFntFml:["Arial"],ttlFntStyle:[0],prtRdn:[false],trdDgr:[2],trdRefLnThk:[1],trdRefLnClr:[5066061,16514043],trdRefLnStyle:[0],meanSD:[0],shwOutliers:[0],jtrType:[0],jitter:[0],ptPosType:[0],ptPos:[-1.8],ptSzType:[6],ptSize:[10],cntrFitMode:[0],slctnLmt:[50000],manualBinsMode:[5],custMode:[1],numBins:[15],rangeType:[3],xBinsStart:[0],xBinsEnd:[1000],xBinsSize:[100],hasUncheckedAuto:[false],hasUncheckedDstRng:[false],DataLabelFontSizeConstraint:[false],DataLabelTextAngle:[0],showModeBar:[true],totalShw:[true],intSumShw:[true],intSumFull:[true],totalLabel:["Total"],posClr:[8440970],negClr:[4342504],totalClr:[12025646],intSumClr:[14798774]};function B(E,F,G){var H={};D.keyarray(A).forEach(function(K){var J=A[K];H[K]=J[E]||J[0];});var I=F?"NGM":"OGM";themeProps=mstrApp.getThemeProps(I).DEFAULT_PROPS.ALL;D.keyarray(themeProps).forEach(function(J){H[J]=themeProps[J];});return H;}mstrmojo.gm.GMPropDefaults=mstrmojo.provide("mstrmojo.gm.GMPropDefaults",{propValuesLight:{},propValuesDark:null,prevTheme:null,prevChart:null,update:function(J,I){var H,G,E=1,F=J===E?this.propValuesLight:this.propValuesDark;if(F&&I&&I[0]){G=I[0];H=I[1]!==undefined?I[1]:A[G][J];F[G]=H;}},lightTheme:function(G){var F=this.prevTheme!==G.theme||this.prevChart!==G.chartType;var H=G.isNewTheme?C.DEFAULT:C.CLASSIC,E=this.propValuesLight[H];if(!E||F){E=B(0,G.isNGM,G.chartType);this.propValuesLight[H]=E;this.prevTheme=H;this.prevChart=G.chartType;}return E;},darkTheme:function(){var E=this.propValuesDark;if(!E){E=B(1);this.propValuesDark=E;}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType");var B=mstrmojo.chart.model,D=B.enums,A=D.EnumDSSGraphRegressionType;mstrmojo.chart.GraphTrendLineOptions=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphTrendLineOptions",mRegressionType:A.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeansonal:false,init:function C(E){if(E){if(E.RegressionType){this.mRegressionType=E.RegressionType;}if(E.Order){this.mOrder=E.Order;}if(E.Period){this.mPeriod=E.Period;}if(E.ShowEquation){this.mShowEquation=E.ShowEquation;}if(E.ShowCoefficients){this.mShowCoefficients=E.ShowCoefficients;}if(E.UserSeriesGraphColor){this.mUserSeriesGraphColor=E.UserSeriesGraphColor;}if(E.Seasonal){this.mSeasonal=E.Seasonal;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.Vector2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Vector2D",x:0,y:0,init:function H(I){if(I){if(I.x!==undefined&&I.y!==undefined){this.x=I.x;this.y=I.y;}else{if(I.Point){this.x=I.Point.x;this.y=I.Point.y;}else{if(I.StartPoint&&I.EndPoint){this.x=I.EndPoint.x-I.StartPoint.x;this.y=I.EndPoint.y-I.StartPoint.y;}}}}},Reset:function B(I,J){this.x=I;this.y=J;},LengthSquared:function G(){return this.x*this.x+this.y*this.y;},InnerProduct:function A(I){return(this.x*I.x+this.y*I.y);},CrossProduct:function D(I){return(this.x*I.y-this.y*I.x);},IncludedAngle:function F(J){var I;I=this.InnerProduct(J)/(Math.sqrt(this.LengthSquared()*J.LengthSquared()));I=I>1?1:I;I=I<-1?-1:I;return Math.acos(I);},Length:function E(){return Math.sqrt(this.LengthSquared());},Normalize:function C(){var I=this.Length();this.x/=I;this.y/=I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var A="_tmsp";var B=mstrmojo.gm.GMPropertyNode=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMPropertyNode",modifiedPropertyKeys:undefined,children:undefined,dirty:undefined,jsonObj:undefined,init:function(F){this._super(F);this.children={};this.modifiedPropertyKeys=[];var G=this.jsonObj,D,C,E;for(E in G){if(G.hasOwnProperty(E)){D=G[E];C=typeof D;if(C==="object"||C==="array"){this.setProperty(E,G[E],true);}}}},setProperty:function(D,C,E){if(typeof C==="object"){this.children[D]=new B({jsonObj:C,parent:this});this.jsonObj[D]=C;}else{this.jsonObj[D]=C;this.jsonObj[D+A]=(new Date()).getTime();}if(E!==true){this.modifiedPropertyKeys.push(D);}},manuallyAddModifiedPropertyName:function(C){this.modifiedPropertyKeys.push(C);},getRawJson:function(){return this.jsonObj;},toString:function(){return JSON.stringify(this.jsonObj);},getPropertyNode:function(C){return this.children[C];},getPropertyJSONValue:function(D){var C=this.children[D];if(C){return C.jsonObj;}return this.jsonObj[D];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var A=mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition;mstrmojo.chart.GMDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GMDataLabelInfo",display:false,isValid:false,SeriesId:0,GroupId:0,HostMarkerBound:null,Label:null,DataLabelLocation:A._BOTTOM,dataLabelLCenterPoints:[],CenterXOffset:0,CenterYOffset:0,dataLabelPosition:[],XIndex:0,YIndex:0,SeriesInfo:0,HostMarkerPoint:null,init:function B(C){this.dataLabelLCenterPoints=[];this.dataLabelPosition=[];this._super(C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var R=mstrmojo.chart;mstrmojo.chart.Point2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Point2D",x:0,y:0,init:function P(W){if(W){if(W.Point2D){this.x=W.Point2D.x;this.y=W.Point2D.y;}else{this._super(W);}}},Reset:function A(W,X){this.x=W;this.y=X;},ResetPoint:function N(W){this.x=W.x;this.y=W.y;},DistanceSquared:function D(W){return(this.x-W.x)*(this.x-W.x)+(this.y-W.y)*(this.y-W.y);},Distance:function C(W){return Math.sqrt(this.DistanceSquared(W));},isEqual:function O(W){return(this.x===W.x&&this.y===W.y);},IsInPolygon:function I(Z){var a=Z.length,W=false,Y,X;if(a<3){return false;}for(Y=0,X=a-1;Y<a;X=Y++){if(((Z[Y].y<=this.y&&this.y<Z[X].y)||(Z[X].y<=this.y&&this.y<Z[Y].y))&&this.x<=(Z[X].x-Z[Y].x)*(this.y-Z[Y].y)/(Z[X].y-Z[Y].y)+Z[Y].x){W=!W;}}return W;},IsStrictlyInPolygon:function K(a){var Z=new R.Point2D({x:this.x+0.1,y:this.y}),X=new R.Point2D({x:this.x-0.1,y:this.y}),W=new R.Point2D({x:this.x,y:this.y+0.1}),Y=new R.Point2D({x:this.x,y:this.y-0.1});if(Z.IsInPolygon(a)){return false;}if(X.IsInPolygon(a)){return false;}if(W.IsInPolygon(a)){return false;}return !Y.IsInPolygon(a);},Rotate:function M(X,Z){var W=this.x-X.x,Y=this.y-X.y;this.x=X.x+Math.cos(Z)*W-Math.sin(Z)*Y;this.y=X.y+Math.sin(Z)*W+Math.cos(Z)*Y;},MiddleTo:function F(W){return new R.Point2D({x:(this.x+W.x)/2,y:(this.y+W.y)/2});},Shifted:function Q(W){return new R.Point2D({x:this.x+W.x,y:this.y+W.y});},NegativeShifted:function U(W){return new R.Point2D({x:this.x-W.x,y:this.y-W.y});},swap:function L(){var W=this.x;this.x=this.y;this.y=W;},swapPoints:function B(X){var W;W=this.x;this.x=X.x;X.x=W;W=this.y;this.y=X.y;X.y=W;},IsOnSegment:function H(Z,X,Y){var W=Y?0.01:-0.01;if(Math.abs(Z.x-X.x)<0.01){if((this.y-Z.y)>W&&(X.y-this.y)>W){return true;}if((this.y-X.y)>W&&(Z.y-this.y)>W){return true;}}else{if((this.x-Z.x)>W&&(X.x-this.x)>W){return true;}if((this.x-X.x)>W&&(Z.x-this.x)>W){return true;}}return false;},IsOnVerOrHorSegment:function G(X,W){if(this.y===X.y&&this.y===W.y){return(((this.x-X.x)>=0&&(W.x-this.x)>=0)||((this.x-X.x)<=0&&(W.x-this.x)<=0));}if(this.x===X.x&&this.x===W.x){return(((this.y-X.y)>=0&&(W.y-this.y)>=0)||((this.y-X.y)<=0&&(W.y-this.y)<=0));}return false;},DistanceToLine:function J(e,a){var b=this.DistanceSquared(e),X=this.DistanceSquared(a),Z=e.DistanceSquared(a),d=0.01,W,c,Y;if(b<d||X<d){return 0;}if(Z<d){return Math.sqrt(b);}if(b>=X+Z){return Math.sqrt(X);}if(X>=b+Z){return Math.sqrt(b);}W=new R.Point2D({x:this.x-e.x,y:this.y-e.y});c=new R.Point2D({x:a.x-e.x,y:a.y-e.y});Y=W.x*c.y-W.y*c.x;return(Y<0?-Y:Y)/Math.sqrt(Z);},DistanceToPolygon:function S(Y){var a=Y.length,W=this.DistanceToLine(Y[0],Y[a-1]),Z,X;if(this.IsInPolygon(Y)){return 0;}for(X=0;X+1<a;++X){Z=this.DistanceToLine(Y[X],Y[X+1]);if(W>Z){W=Z;}}return W;},rotateAndClone:function E(W,X){this.Rotate(W,X);return this;},clone:function V(){return new R.Point2D({Point2D:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.GraphAxisGeneral=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphAxisGeneral",mAxisLabelsLocation:-1,mAxisDrawInReverse:false,mShowAxisLine:true,mShowAxisLabels:true,mShowAxisTitle:false,mAxisDirection:-1,mUseInterlacedGrids:false,init:function A(B){if(B.AxisLabelsLocation!==undefined){this.mAxisLabelsLocation=B.AxisLabelsLocation;}if(B.AxisDrawInReverse!==undefined){this.mAxisDrawInReverse=B.AxisDrawInReverse;}if(B.ShowAxisLine!==undefined){this.mShowAxisLine=B.ShowAxisLine;}if(B.ShowAxisLabels!==undefined){this.mShowAxisLabels=B.ShowAxisLabels;}if(B.ShowAxisTitle!==undefined){this.mShowAxisTitle=B.ShowAxisTitle;}if(B.AxisDirection!==undefined){this.mAxisDirection=B.AxisDirection;}if(B.UseInterlacedGrids!==undefined){this.mUseInterlacedGrids=B.UseInterlacedGrids;}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumShapeType","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumGraphMajorType","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixElementSizeMode");mstrmojo.requiresCls("mstrmojo.Base");var X=mstrmojo.chart,U=X.ChartConstants,C=X.common,Q=X.model,n=Q.enums,j=n.EnumDSSGraphMarkerShape,f=n.EnumDSSGraphType,k=n.EnumShapeType,b=X.enums,Y=b.EnumGraphMajorType,O=b.EnumGraphMatrixMarkerTypeInChart,e=b.EnumGraphMatrixElementSizeMode;function s(y){var x=0.9;switch(y){case O._MUTATION_IN_LINE:case O._ISODOT_IN_LINEAREA:x=this.mHasSizeBy?0.9:0.5;break;case O._PIE:if(this.getPieShapeLayout()===Y.GMT_GRID){var w=this.parentContext&&this.parentContext.mDatasetPtr&&this.parentContext.mDatasetPtr.showPieDatalabels();x=w?0.5:0.9;}break;case O._SHAPES_IN_BUBBLESCATTER:x=this.mHasSizeBy?0.9:0.5;break;case O._TICK_CATEGORY:case O._TICK_VALUE:case O._TICK_GRID:x=0.8;break;}return x;}function W(AB,AE,AH,y,z,AF){y=y||false;if(z!==0){z=z||this.mMarkerShape;}if(AF===undefined||AF===null){AF=0;}var AC=0,x=(z===j.DssGraphMarkerShapeNone);if(y){x=y;}var AD=AH-AF;if(this.mHasSizeBy||!x||AH===1||AD===1){var AG=x?O._LINE_IN_LINE:O._MUTATION_IN_LINE;if(x){if(AH===1){AG=O._DOTS_IN_LINE;if(!this.mHasSizeBy){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}}else{if(y){AG=O._DOTS_IN_LINE;}}}else{if(AH===1){AG=O._ISODOT_IN_LINEAREA;}if(!this.mHasSizeBy){AC=(this.mEstGraphWidth/(AH+1)/2);AC=Math.min(AC,12);return AC;}}AC=this.GetMaxMarkerSize(AG,AE,AH,this.mHasSizeBy);}else{if(AB){if(y){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}return 0;}else{if(y){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}var w=this.parentContext;if(w&&w.mDatasetPtr){var AA=w.mDatasetPtr.getGenericLineFormat(0,0);AC=AA&&AA.mLineThickness;if(AC<=2){AC=3;}}}AC=Math.max(AC,this.mConstants.MinimalSize.Line);}return AC;}function F(y,x,w){return y*3.25+(Math.min(w,x)*0.00375);}mstrmojo.chart.GraphMatrixContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphMatrixContext",mHasSizeBy:false,mMaxSizeVal:100000,mMinSizeVal:0,mCustomScaleForSizeBy:false,mHasColorBy:false,mEstGraphWidth:600,mEstGraphHeight:400,mMarkerShape:0,mGraphType:0,mClippedPaddings:null,mHasChartWithOnlyDataMarkers:false,mIsNeedRotateDataLabel:false,mIsNeedAdjustAxis:false,mShownValueTickSet:null,mIsolatedDots:null,mConstants:null,mInputs:null,mElementsInfo:null,parentContext:null,init:function q(w){this.mShownValueTickSet=[{},{}];this.mClippedPaddings={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};if(w&&w.GraphType){this.mGraphType=w.GraphType;}this.mElementsInfo={Max:{Size:0.9,Mode:0},Min:{Size:0,Mode:0}};this.mConstants={FixedTickerSize:2,FixedDataMarkerSize:3,MinimalSize:{Bar:5,Pie:10,Band:10,Line:1,ProportionalMin:1,General:2},MaximalSize:{Bar:44,Band:100},CondenseLimit:{Percentage:10,Default:-1}};},GetAdjustThicknessValue:function Z(w){switch(w){case 1:case 2:case 3:case 4:w++;break;default:break;}return w;},AddToIsolatedDotList:function u(w){if(this.mIsolatedDots===null){this.mIsolatedDots=new C.MapStructure();}this.mIsolatedDots.replaceByTripleId(w,true);},IsIsolatedDot:function l(x,w){if(this.mIsolatedDots===null){return false;}w=(w!==undefined)?w:false;if(w){if(this.mMarkerShape!==j.DssGraphMarkerShapeNone){return false;}}return(this.mIsolatedDots.findByTripleId(x)!==undefined);},IsIsolatedDotInLine:function D(w){return this.IsIsolatedDot(w,true);},GetMaxElementSizeInAreaChart:function N(y,z,w,x){return W.call(this,true,y,z,w,null,x);},GetMaxElementSizeInLineChart:function P(y,z,x,w){return W.call(this,false,y,z,x,w);},GetValueAxisPadding:function a(x,z,y){if(y===undefined){y=true;}var w=x?(y?"X1":"X2"):(y?"Y1":"Y2");return z?this.mClippedPaddings[w].HighOffset:this.mClippedPaddings[w].LowOffset;},UpdateValueAxisPadding:function R(y){var x,AA,z,AB,w;for(x=0;x<2;++x){for(w=0;w<2;++w){AA=x===0;AB=w===0;z=AA?(AB?"X1":"X2"):(AB?"Y1":"Y2");if(y[z]!==undefined){this.mClippedPaddings[z].LowOffset=y[z].LowOffset;this.mClippedPaddings[z].HighOffset=y[z].HighOffset;}}}},GetMaxMarkerSize:function d(AO,AE,AM,w){w=w===undefined?false:w;var AS=this.mElementsInfo,AA=10000,AJ=24,AL=12,AC=AE?this.mEstGraphWidth:this.mEstGraphHeight,AF=AC/(AM*2)+0.5,y=AS.Max.Size,AG=AS.Max.Size;if(AO===O._MUTATION_IN_LINE||AO===O._ISODOT_IN_LINEAREA){y=AG;}if(AS.Max.Mode===e._AUTOMATIC){if(AO!==O._LINE_IN_LINE){AA=this.mHasSizeBy?24:12;}if(AO!==O._LINE_IN_LINE&&AO!==O._DOTS_IN_LINE){AA=w?AJ:AL;}y=s.call(this,AO);}switch(AO){case O._LINE_IN_LINE:case O._DOTS_IN_LINE:var AQ=AE?this.mEstGraphHeight:this.mEstGraphWidth,AN=AQ*0.15;AN=Math.min(AN,AA*2);if(AO===O._DOTS_IN_LINE){if(AM!==1){AF=AF*2;}AN=Math.min(AN,AF);var x=AS.Min.Size;if(AS.Min.Mode===e._MANUAL){x=0;}AN=Math.max(AN/2,x);}return AN;case O._MUTATION_IN_LINE:case O._ISODOT_IN_LINEAREA:case O._SHAPES_IN_BUBBLESCATTER:var AB=1;AB=Math.min(this.mEstGraphHeight,this.mEstGraphWidth)*0.15;AB=Math.min(AB*y,AA);if(AO===O._MUTATION_IN_LINE||AO===O._ISODOT_IN_LINEAREA){AB=Math.min(AB,AF);AB=Math.ceil(AB);}return AB;case O._PIE:var AH=true,AK=0.2,z=this.getPieShapeLayout(),AD=Math.min(this.mEstGraphWidth,this.mEstGraphHeight);if(z===Y.GMT_CATEGORY){var AI=AE?this.mEstGraphHeight:this.mEstGraphWidth;if(AD/AI<0.15){AH=false;}}AB=y*AD/2;if(z===Y.GMT_GRID||(z===Y.GMT_CATEGORY&&!AH)){if(AS.Max.Mode===e._AUTOMATIC){AB=Math.min(AB,250);}}else{AB*=AK;AB=Math.min(AB,AD);if(AS.Max.Mode===e._AUTOMATIC){AB=Math.min(AB,50);}}if(z===Y.GMT_CATEGORY){AB=Math.min(AB,AF);}AB=Math.floor(Math.max(AB,10));return AB;case O._TICK_CATEGORY:case O._TICK_VALUE:case O._TICK_GRID:AA=24;var AP=24;if(AO===O._TICK_CATEGORY){AP=AC/AM;}var AR=AP*y;if(AO===O._TICK_CATEGORY){AR=Math.min(AR,AA);}return AR+0.5;default:return 0;}},GetScaledSize:function r(y,AA,x){if(!this.mHasSizeBy){return AA;}var w=this.mElementsInfo.Min.Mode,z=this.ToRatioEx(y,(w===e._PROPORTIONAL));if(w===e._PROPORTIONAL&&x!==null&&x!==undefined){if(x===k._CIRCLE||x===k._PIE||x===k._PIESLICE||x===k._SQUARE){z=Math.sqrt(z);}}return this.GetScaledSizeWithRatio(z,AA);},GetScaledSizeWithRatio:function J(AB,AD,x){var w=false,y=this.mElementsInfo,z=y.Min.Mode,AC;if(!(isNaN(x)||x===null)){AC=x;w=true;}else{AC=y.Min.Size;}if(z===e._MANUAL){AC=y.Min.Size*AD;if(AC<0){AC=0;}if(AC>AD){AC=AD;}}else{if(z===e._PROPORTIONAL){return Math.max(this.mConstants.MinimalSize.ProportionalMin,AB*AD);}else{if(!w){AC=this.mConstants.MinimalSize.General;}}}var AA=Math.max((AD-AC),0);var AE=AB*AA+AC;return Math.min(AE,AD);},ToRatio:function B(y,w,x,z){z=z||false;if(z){if(x>0){x=0;}if(w<0){w=0;}}if(x===w){return 1;}if(y>w){y=w;}if(y<x){y=x;}return Math.min((y-x)/(w-x),1);},ToRatioEx:function S(z,y){y=y||false;var w=this.mMaxSizeVal,x=this.mMinSizeVal;if(y){z=Math.abs(z);w=Math.max(Math.abs(w),Math.abs(x));x=0;}else{z=Math.min(w,z);z=Math.max(x,z);}if(this.mCustomScaleForSizeBy){return this.ToRatio(z,w,x,false);}return this.ToRatio(z,w,x,y);},getCondensedTextLimit:function g(w){switch(w){case 4:return this.mConstants.CondenseLimit.Percentage;}return this.mConstants.CondenseLimit.Default;},GetRealTripleId:function A(y,w,x){var z=800,AA=new X.TripleId({TripleId:x});if(x.mSeriesId>=0){AA.mSeriesId+=w*z;}if(x.mGroupId>=0){AA.mGroupId+=y*z;}return AA;},GetLogicalTripleId:function t(x){var y=new X.TripleId({TripleId:x}),w=341;if(x.mObjectId===w){y.mSeriesId=this.hGetLogicalId(y.mSeriesId);y.mGroupId=this.hGetLogicalId(y.mGroupId);}return y;},hGetLogicalId:function G(w){var x=800;if(w<0){return w;}w%=x;return w;},GetValueAxisZoomScale:function h(w){return 1;},checkPaddingBetweenLabels:function E(AD,AC,z,AE){if(z===undefined){return AD.HasIntersection(AC);}var x=0,AA=1,w=5,y,AB;if(AE){y=Math.abs(AD.x+AD.width/2-AC.x-AC.width/2);}else{y=Math.abs(AD.y+AD.height/2-AC.y-AC.height/2);}switch(z){case x:AB=this.getPadding(U.kBetweenLabelCenters);break;case w:y-=0.5*(AE?AD.width+AC.width:AD.height+AC.height);AB=this.getPadding(U.kExtra);break;case AA:if(AE){y-=0.5*(AD.width+AC.width);}else{y-=0.5*(AD.height+AC.height);}AB=this.getPadding(U.kBetweenLabels);break;default:return AD.HasIntersection(AC);}return y<AB;},checkLabelPaddingToBorder:function p(AA,x,AC,AB){var y,w,z=this.getPadding(U.kLabelToChart);if(AB){y=AA.x;w=AA.x+AA.width;}else{y=AA.y;w=AA.y+AA.height;}return(y>=x+z)&&(w+z<=AC);},getPadding:function M(w){switch(w){case U.kBetweenLabels:return 10;case U.kBetweenLabelLines:return 5;case U.kLabelToChart:return 5;case U.kNumericLabelToTick:return 4;case U.kExtra:return 2;case U.kChartToChart:return 10;case U.kEndTickToChart:return 10;case U.kEndLabelToChart:return 5;case U.kBetweenLabelCenters:return 20;case U.kBandSide:var x=this.mElementsInfo.Max.Mode;if(x===e._AUTOMATIC){return 5;}return 0;case U.kCategoricalLabelToTick:return 5;case U.kDataLabel:return 5;case U.kRefLabel:return 5;case U.kAxisOriginLabel:return 5;default:return 0;}},getClippedOffset:function c(y,AD,x,z,AC,AB,w){var AA=AC?z.x:z.y;return{LowOffset:Math.max(AB,x-Math.abs(AA-y)),HighOffset:Math.max(w,x-Math.abs(AD-AA))};},getSizeByPieRadius:function I(y,AF,z,AC,x,AB){if(y===undefined||y===null){return -1;}var AE=y.GetSizeByData(AF,z);if(AE===undefined){return -1;}var AG,w=this.mElementsInfo.Min.Mode;var AD=this.ToRatioEx(AE,w===e._PROPORTIONAL);if(w===e._PROPORTIONAL){var AA=Math.max(0,AB-this.mConstants.MinimalSize.Pie);AG=Math.round(AA*AD+this.mConstants.MinimalSize.Pie);}else{AG=this.GetScaledSizeWithRatio(AD,AB,this.mConstants.MinimalSize.Pie);}return AG;},updateGMGraphTypeWithMarkerShape:function L(w){if(w){this.mMarkerShape=w;}if(this.mMarkerShape!==202&&this.mMarkerShape!==201){return ;}switch(this.mGraphType){case f.DssGraphTypeGridChart:this.mGraphType=f.DssGraphTypeGrid_Pies;return ;case f.DssGraphTypeX_Y_Scatter:case f.DssGraphTypeDualAxis_X_Y_Scatter:case f.DssGraphTypeX_Y_Scatter_with_Labels:case f.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:this.mGraphType=f.DssGraphTypeScatter_Pies;return ;case f.DssGraphTypeBubble:case f.DssGraphTypeBubble_DualAxis:case f.DssGraphTypeBubble_With_Labels:case f.DssGraphTypeBubble_DualAxis_With_Labels:this.mGraphType=f.DssGraphTypeBubble_Pies;return ;case f.DssGraphTypeVertical_Area_Absolute:case f.DssGraphTypeVertical_Area_DualAxis_Absolute:case f.DssGraphTypeVertical_Area_BiPolar_Absolute:case f.DssGraphTypeVertical_Line_Absolute:case f.DssGraphTypeVertical_Line_BiPolar_Absolute:case f.DssGraphTypeVertical_Line_DualAxis_Absolute:case f.DssGraphTypeVertical_Bar_BiPolar_Absolute:case f.DssGraphTypeVertical_Bar_DualAxis_Absolute:case f.DssGraphTypeVertical_Bar_Absolute:case f.DssGraphTypeVertical_Bar_Side_by_Side:case f.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case f.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:this.mGraphType=f.DssGraphTypeVertical_CategoryPies_Absolute;return ;case f.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case f.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case f.DssGraphTypeHorizontal_Bar_Absolute:case f.DssGraphTypeHorizontal_Area_Absolute:case f.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case f.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case f.DssGraphTypeHorizontal_Line_Absolute:case f.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case f.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case f.DssGraphTypeHorizontal_Bar_Side_by_Side:case f.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case f.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:this.mGraphType=f.DssGraphTypeHorizontal_CategoryPies_Absolute;return ;case f.DssGraphTypeVertical_Bar_DualAxis_Stacked:case f.DssGraphTypeVertical_Bar_Stacked:case f.DssGraphTypeVertical_Bar_BiPolar_Stacked:case f.DssGraphTypeVertical_Area_BiPolar_Stacked:case f.DssGraphTypeVertical_Area_DualAxis_Stacked:case f.DssGraphTypeVertical_Area_Stacked:case f.DssGraphTypeVertical_Line_Stacked:case f.DssGraphTypeVertical_Line_BiPolar_Stacked:case f.DssGraphTypeVertical_Line_DualAxis_Stacked:this.mGraphType=f.DssGraphTypeVertical_CategoryPies_Stacked;return ;case f.DssGraphTypeHorizontal_Bar_Stacked:case f.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case f.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case f.DssGraphTypeHorizontal_Area_Stacked:case f.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case f.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case f.DssGraphTypeHorizontal_Line_Stacked:case f.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case f.DssGraphTypeHorizontal_Line_DualAxis_Stacked:this.mGraphType=f.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case f.DssGraphTypeVertical_Bar_Percent:case f.DssGraphTypeVertical_Line_Percent:case f.DssGraphTypeVertical_Area_Percent:this.mGraphType=f.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case f.DssGraphTypeHorizontal_Bar_Percent:case f.DssGraphTypeHorizontal_Line_Percent:case f.DssGraphTypeHorizontal_Area_Percent:this.mGraphType=f.DssGraphTypeVertical_CategoryPies_Percent;return ;}},isCombinationChart:function K(){return this.mMarkerShape===j.DssGraphMarkerShapeCombined;},isPieOrRingShape:function V(){return this.mMarkerShape===j.DssGraphMarkerShape2DPie||this.mMarkerShape===j.DssGraphMarkerShape2DRingPie;},getPieShapeLayout:function o(){switch(this.mGraphType){case f.DssGraphTypeHorizontal_CategoryPies_Absolute:case f.DssGraphTypeHorizontal_CategoryPies_Stacked:case f.DssGraphTypeHorizontal_CategoryPies_Percent:case f.DssGraphTypeVertical_CategoryPies_Absolute:case f.DssGraphTypeVertical_CategoryPies_Stacked:case f.DssGraphTypeVertical_CategoryPies_Percent:return Y.GMT_CATEGORY;case f.DssGraphTypeScatter_Pies:return Y.GMT_SCATTER;case f.DssGraphTypeBubble_Pies:return Y.GMT_BUBBLE;case f.DssGraphTypeGrid_Pies:return Y.GMT_GRID;default:return Y.GMT_SPECTRAL;}},markerToShape:function H(w){switch(w){case j.DssGraphMarkerShapeCircle:return k._CIRCLE;case j.DssGraphMarkerShapeRectangle:case j.DssGraphMarkerShapeSquare:return k._SQUARE;case j.DssGraphMarkerShape2DPie:case j.DssGraphMarkerShape2DRingPie:return k._PIE;case j.DssGraphMarkerShapeGMTick:return k._TICKER;default:return k._GENERIC;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumNumberCategory");var B=mstrmojo.chart,A=B.enums,F=A.EnumNumberCategory;mstrmojo.chart.ChartAdvFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartAdvFormat",mFormatType:F.General,mDigits:0,mGrouping:3,mCurrency:"$",mPosCurr:0,mNegFormat:3,mCustomFormat:"General",init:function E(I){var H=mstrmojo.hash;if(I&&I.ChartAdvFormat){var G=I.ChartAdvFormat;H.copy(G,this);this.mCurrency=this.mCurrency||"$";this.mCustomFormat=this.mCustomFormat||"General";}},reset:function D(H){var G=mstrmojo.hash;G.copy(H,this);},restore:function C(){this.mFormatType=F.General;this.mDigits=0;this.mGrouping=3;this.mCurrency="$";this.mPosCurr=0;this.mNegFormat=3;this.mCustomFormat="General";}});mstrmojo.chart.dNF=new B.ChartAdvFormat();mstrmojo.chart.dNF.isDefault=true;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=0;mstrmojo.chart.FormatBase=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatBase",init:function A(C){}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition","mstrmojo.chart.enums.EnumFontRotation");var D=mstrmojo.chart,G=D.enums,H=G.EnumFontRotation,A=mstrmojo.chart.model,B=A.enums,F=B.EnumDSSGraphDataTextPosition;mstrmojo.chart.LabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.LabelInfo",IsPut:false,IsClockWise:false,IsValid:false,SeriesId:0,GroupId:0,HostMarker:null,SuggestedStart:F.DssGraphDTPositionOutMin,LabelRotation:H.FR_NORMAL,Label:null,init:function I(J){this.Label=null;this.HostMarker=null;this._super(J);},IsMoved:function C(J){return(this.SuggestedStart!==J);},ToRectangle:function E(){return this.Label.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ChartCanvas=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartCanvas",chartContext:null});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumFormatType");var C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONFormat",mpOriginalAddress:0,mFormatType:A.FMT_UNDEFINED,init:function D(E){if(E.Font){this.mpOriginalAddress=E.Font.id;}else{if(E.Line){this.mpOriginalAddress=E.Line.id;}else{this.mpOriginalAddress=E.id;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.JSONUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUtil",AppendCompoundPointerVectorToJSONObject:function A(E,C,G){var F,B,D;D=G[E]=[];B=C.length;if(B>0){for(F=0;F<B;++F){C[F].AppendToJSONObject(D);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.MapStructure=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.MapStructure",map:null,init:function H(K){this._super(K);this.map={};},replace:function B(L,O){var N=(L&&L.length)||0,P,M,K;for(K=0,P=this.map;K<N-1;K++){M=P[L[K]];if(M===undefined){M=P[L[K]]={};}P=M;}P[L[N-1]]=O;},replaceByTripleId:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId],L);},replaceByGraphPropertyKey:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId],L);},push:function G(K,L){this.replace(K,L);},find:function F(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}return O[L[N-1]];},findByTripleId:function J(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId]);},findByGraphPropertyKey:function I(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},deleteElement:function A(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}delete O[L[N-1]];},deleteByTripleId:function E(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId]);},deleteByGraphPropertyKey:function C(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},clear:function D(){this.map={};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var S=mstrmojo.chart,M=295,B=301,H=289,C=271,U=277,E=10003,W=100200,G=20000,V=20001,O=20002,Q=20003,N=20004,P=20005,L=20006,J=20007,I=21007,A=S.gNullObjectId=-3,F=S.gNullSeriesId=-3,D=S.gNullGroupId=-3;mstrmojo.chart.TripleId=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.TripleId",mObjectId:A,mSeriesId:F,mGroupId:D,init:function R(X){if(!X){this.mObjectId=A;this.mSeriesId=F;this.mGroupId=D;}else{if((X instanceof Array)&&X.length>=3){this.mObjectId=X[0];this.mSeriesId=X[1];this.mGroupId=X[2];}else{if(X.TripleId){var Y=X.TripleId;this.mObjectId=Y.mObjectId;this.mSeriesId=Y.mSeriesId;this.mGroupId=Y.mGroupId;}else{this.mObjectId=(X.ObjectId!==undefined)?X.ObjectId:A;this.mSeriesId=(X.SeriesId!==undefined)?X.SeriesId:F;this.mGroupId=(X.GroupId!==undefined)?X.GroupId:D;}}}}});S.gNullTripleId=new mstrmojo.chart.TripleId({ObjectId:A,SeriesId:F,GroupId:D});var K=S.gAxisTripleIds={};K.Y1=new mstrmojo.chart.TripleId({ObjectId:M,SeriesId:0,GroupId:D});K.Y2=new mstrmojo.chart.TripleId({ObjectId:B,SeriesId:0,GroupId:D});K.X1=new mstrmojo.chart.TripleId({ObjectId:H,SeriesId:0,GroupId:D});K.X2=new mstrmojo.chart.TripleId({ObjectId:W,SeriesId:0,GroupId:D});K.Z=new mstrmojo.chart.TripleId({ObjectId:E,SeriesId:0,GroupId:D});K.O1=new mstrmojo.chart.TripleId({ObjectId:C,SeriesId:0,GroupId:D});K.O2=new mstrmojo.chart.TripleId({ObjectId:U,SeriesId:0,GroupId:D});mstrmojo.chart.ManagerId=new mstrmojo.chart.TripleId({ObjectId:G,SeriesId:-3,GroupId:D});mstrmojo.chart.PlotManagerId=new mstrmojo.chart.TripleId({ObjectId:V,SeriesId:F,GroupId:D});mstrmojo.chart.PlotId0=new mstrmojo.chart.TripleId({ObjectId:O,SeriesId:0,GroupId:D});mstrmojo.chart.BarRenderer0=new mstrmojo.chart.TripleId({ObjectId:P,SeriesId:0,GroupId:D});mstrmojo.chart.LineRenderer0=new mstrmojo.chart.TripleId({ObjectId:L,SeriesId:0,GroupId:D});mstrmojo.chart.AreaRenderer0=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:0,GroupId:D});mstrmojo.chart.RenderLayer2=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:2,GroupId:D});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ImageMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ImageMap",mShape:-1,mObjectID:-1,mSeriesID:-1,mGroupID:-1,mCoordinates:null,mToolTip:"",GetShape:function E(){return this.mShape;},GetObjectID:function D(){return this.mObjectID;},GetSeriesID:function C(){return this.mSeriesID;},GetGroupID:function A(){return this.mGroupID;},GetCoordinates:function B(){return this.mCoordinates;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=mstrmojo.chart;mstrmojo.chart.JSONParameter=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONParameter",mIsFirstFrameSet:false,mIsLastFrameSet:false,mParameterName:"",mParameterValue:null,mParameterStartValue:null,init:function E(H){this._super(H);this.mIsFirstFrameSet=!H.mIsLastFrameSet;if(this.mIsFirstFrameSet){this.mParameterStartValue=H.mParameterValue;}},SetName:function D(H){this.mParameterName=H;},GetName:function C(){return this.mParameterName;},SetValue:function G(H,I){if(I){this.mParameterValue=H;this.mIsLastFrameSet=true;}else{this.mParameterStartValue=H;this.mIsFirstFrameSet=true;}},GetValue:function A(H){return H?this.mParameterValue:this.mParameterStartValue;},AppendToJSONObject:function F(J){var H,I=function I(K,L){if(K instanceof B.Point2D){J[L]={X:K.x,Y:K.y};}else{if(K instanceof B.Rect2D){J[L]={X:K.x,Y:K.y,Width:K.width,Height:K.height};}else{if(K instanceof B.RGBColor){J[L]={R:K.mR,G:K.mG,B:K.mB};}else{J[L]=K;}}}};if(this.mIsLastFrameSet&&this.mIsFirstFrameSet){J[this.mParameterName]=[this.mParameterStartValue,this.mParameterValue];}else{if(this.mIsLastFrameSet){I(this.mParameterValue,this.mParameterName);}else{if(this.mIsFirstFrameSet){I(this.mParameterStartValue,this.mParameterName);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.HSLColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.HSLColor",h:0,s:0,l:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var E=0;mstrmojo.chart.common.FractionNumber=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.FractionNumber",mDenominator:0,mNumerator:0,init:function D(F){},Copy:function B(F){this.mDenominator=F.mDenominator;this.mNumerator=F.mNumerator;},ToDouble:function A(){if(this.mDenominator===0){if(this.mNumerator>=0){return Number.POSITIVE_INFINITY;}return Number.NEGATIVE_INFINITY;}return(this.mNumerator)/this.mDenominator;},ToString:function C(L,G,K){if(this.mDenominator===0){L=false;}var J="",I=this.mNumerator,F=false;if(L){var H=parseInt(this.mNumerator/this.mDenominator);I=this.mNumerator%this.mDenominator;K=K||(I!==0);if(H>0){F=true;J=H.toString();if(K){J+=" ";}}}if(!K&&!F&&I===0){J="0";}else{if(!K&&F&&I===0){E++;}else{J+=I.toString();J+="/";J+=this.mDenominator.toString();}}if(!G){J="-"+J;}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.gm.GMEnums");var A=mstrmojo.gm.EnumIdentityType;mstrmojo.gm.GMIdentities=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMIdentities"});mstrmojo.gm.HeaderCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.HeaderCellIdentity",eid:undefined,v:undefined,tid:undefined,n:undefined,tui:undefined,fid:undefined,o:undefined,isRowAttribute:undefined,at:undefined,dei:undefined,dpt:undefined});mstrmojo.gm.GeneralIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GeneralIdentity",objType:undefined});mstrmojo.gm.TitleCellIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TitleCellIdentity",tid:undefined,fid:undefined,n:undefined,tui:undefined,isRowAttribute:undefined,otp:undefined,init:function(B){this.fid=B.fid;this.tid=B.id;this.isRowAttribute=B.isRowAttribute;if(B.isRowAttribute){this.objType=A.ROW_TITLE;}else{this.objType=A.COL_TITLE;}this.n=B.n;this.otp=B.otp;this.ost=B.ost;this.tui=B.tui;}});mstrmojo.gm.MetricAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.MetricAxisTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AttributeAxisTitleIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AttributeAxiTitleIdentity",init:function(B){this._super(B);}});mstrmojo.gm.AxisIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.AxisIdentity",isNumericAxis:undefined,metricIdxArr:undefined,attrIdArr:undefined});mstrmojo.gm.ColorSquareIdentity=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.ColorSquareIdentity",init:function(B){this._super(B);this.comb=this.getElementsCombination();},getElementsCombination:function(){var B,F=this.token,C,H,G,E,I,D;if(F){D=[];C=F.levels;H=F.elements;G=F.types;B=C.length;for(E=0;E<B;E++){I={eid:H[E],tid:C[E]};if(G){I.tp=G[E];}D.push(I);}return D;}return undefined;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.string","mstrmojo.vi.enums.EnumFilterClearActionType","mstrmojo.vi.enums.EnumVisFilterType");var D=mstrmojo.array,M=mstrmojo.string,H=mstrmojo.vi.enums.EnumFilterClearActionType,J=mstrmojo.vi.enums.EnumVisFilterType;mstrmojo.vi.ui.rw._SupportViewFilterInVizBox=mstrmojo.provide("mstrmojo.vi.ui.rw._SupportViewFilterInVizBox",{_mixinName:"mstrmojo.vi.ui.rw._SupportViewFilterInVizBox",getSelectorObjectsFromTemplateLimit:function N(){return this.getSelObjsFromTemlateLimitHandler();},getSelectorObjectsFromViewFilter:function B(){return this.getSelObjsFromVFHandler();},getSelObjsFromVFHandler:function F(){var R=this,P=R.model,Q=R.node.data,S=Q&&Q.vfexpr;return P&&P.getSelectorDataFromViewFilter(S);},getSelObjsFromTemlateLimitHandler:function K(){var R=this,P=R.model,Q=R.node.data,S=Q&&Q.tpl;return P&&P.getSelectorDataFromTemplateLimit(S);},makeBold:function C(P){return"<span style='font-weight:bold;'>"+P+"</span>";},getSelectorExpr:function I(U,S){var V=[],W="",R=true,Q=U.keepOnly?"##":mstrmojo.desc(13232,"Not ##"),P,X=mstrmojo.desc(5283,"OR");if(S){X=this.makeBold(X);}U.data.every(function(Y){[].concat(Y).every(function(Z){if(W===""){W=Z.tn;}return(R=(W===Z.tn));});return R;});U.data.forEach(function(a,Y){if(Y>0){V.push(X);}var Z=[];[].concat(a).forEach(function(d){var c=S?M.encodeHtmlString(d.v):d.v,b=S?M.encodeHtmlString(d.tn):d.tn;Z.push((R?"":(d.tn+" = "))+(c||mstrmojo.desc(14323,"NULL")));});V.push(Z.join(" "));});if(V.length>0){P=Q.replace("##",(R?W+" = ":"")+V.join(" "));}return P;},getLinkingSelectorExpr:function O(S,R){var U=[],V="",Q=true,W=mstrmojo.desc(5283,"OR"),P=S.keepOnly?"##":mstrmojo.desc(13232,"Not ##");if(R){W=this.makeBold(W);}S.data.every(function(X){[].concat(X).every(function(Y){if(V===""){V=Y.tn;}return(Q=(V===Y.tn));});return Q;});S.data.forEach(function(Z,X){var Y=[];if(Q){if(X>0){Y.push(W);}else{Y.push(P.replace("##",V+" = "));}}[].concat(Z).forEach(function(c){var b=R?M.encodeHtmlString(c.v):c.v,a=R?M.encodeHtmlString(c.tn):c.tn;Y.push((Q?"":(a+" = "))+(b||mstrmojo.desc(14323,"NULL")));});U.push(Y.join(" "));});return U.join(" ");},getFilterMenuPairs:function G(P){var R=this,S=[],Q=mstrmojo.desc(2827,"Clear");if(P instanceof Array){P.forEach(function(X,W){var V=R.getSelectorExpr(X),U=R.getSelectorExpr(X,true);S.push({menuString:Q+' "'+V+'"',menuTtpString:Q+' "'+U+'"',ctxt:W});});}return S;},filterMenuHandler:function L(P,S){var R=this,Q=R.controller;switch(P.type){case H.CLEAR_KEEP_ONLY:P=P.idx;Q.applyKeepOnly(R,S,undefined,P,false);break;case H.CLEAR_ALL:Q.clearFiltersForVis(R,[J.KEEP_ONLY,J.LINKING,J.DRILLING],S);break;case H.CLEAR_ADV_QUALIFICATION:Q.clearFiltersForVis(R,[J.ADV_QUALIFICATION],S);break;case H.CLEAR_KEEP_ONLY_AND_LINKING:Q.clearFiltersForVis(R,[J.KEEP_ONLY,J.LINKING],S);break;case H.CLEAR_LINKING:Q.clearLinkingFilter(P,S);break;case H.CLEAR_DRILLING:Q.clearFiltersForVis(R,[J.DRILLING],S);break;default:break;}},hasKeepOnly:function E(P){return P===null||P.length>0;},getSelectorDataForKeepOnly:function A(Q,V){var S=this,R=S.model,U=S.model.data||S.node.data,P=U.tpl,W;if(V===-1){W=[];}else{W=[].concat(R.getSelectorDataFromTemplateLimit(P));if(V===-2){W=D.filter(W,function(X){return !X.keepOnly;});}else{if(V>=0){W.splice(V,1);}}}if(Q){W=W.concat(Q);}return W;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.StringBuffer");mstrmojo._XMLNode=mstrmojo.declare(null,null,{nodeName:null,init:function N(O){mstrmojo.hash.copy(O,this);},addChild:function F(P){var O=new mstrmojo._XMLNode({nodeName:P});return this.appendNode(O);},appendNode:function J(O){if(O){if(!this.children){this.children=[];}this.children.push(O);O.parent=this;}return O;},addAttribute:function L(O,P){if(O!=null){if(!this.attributes){this.attributes={};}this.attributes[O]=P;}return this;},addText:function M(O){this._addToStringMember("text",O);return this;},addRawXML:function K(O){this._addToStringMember("rawXML",O);return this;},getXMLString:function I(){var O=new mstrmojo.StringBuffer();this.buildXMLString(O);return O.toString();},buildXMLString:function E(O){O=O||new mstrmojo.StringBuffer();O.append("<").append(this.nodeName).append(" ");this._buildAttributesXMLString(O).append(">").append(((this.text!=null)?this._escapeString(this.text):"")).append(((this.rawXML!=null)?this.rawXML:""));this._buildChildrenXMLString(O).append("</").append(this.nodeName).append(">");return O;},_buildAttributesXMLString:function D(O){var Q=this.attributes;if(Q){var R;for(R in Q){if(Q[R]!=null){var P=String(Q[R]);switch(R){case"et":case"nt":case"dmt":case"ddt":case"fnt":case"tp":case"stp":break;default:P=this._escapeString(P);}O.append(R+'="'+P+'" ');}}}return O;},_escapeString:function C(O){return mstrmojo.string.escape4HTMLText(O);},_buildChildrenXMLString:function H(P){var R=this.children;var O=R&&R.length;if(O){var Q;for(Q=0;Q<O;Q++){if(R[Q]&&R[Q].buildXMLString){R[Q].buildXMLString(P);}}}return P;},_addToStringMember:function A(O,Q){var P=this[O];if(P==null){this[O]=Q;}else{this[O]=P+Q;}}});mstrmojo.XMLBuilder=mstrmojo.declare(null,null,{root:null,curNode:null,addChild:function F(O){if(!this.root){this.currentNode=this.root=new mstrmojo._XMLNode({nodeName:O});}else{this.currentNode=this.currentNode.addChild(O);}return this;},appendNode:function J(O){if(!this.root){this.currentNode=this.root=O;}else{this.currentNode=this.currentNode.appendNode(O);}return this;},addAttribute:function L(O,P){if(this.currentNode){this.currentNode.addAttribute(O,P);}else{alert("no root node");}return this;},addText:function M(O){if(this.currentNode){this.currentNode.addText(O);}else{alert("no root node");}return this;},addRawXML:function K(O){if(this.currentNode){this.currentNode.addRawXML(O);}else{alert("no root node");}return this;},closeElement:function G(){this.currentNode=this.currentNode.parent;return this;},toString:function B(){if(this.root){return this.root.getXMLString();}return"";}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.vi.viz.DropZoneHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.XMLBuilder","mstrmojo.gm.GMEnums");var L=mstrmojo,F=L.hash,I=L.array,P=L.vi.viz,B=P.EnumDSSDropZones,A=1,H=0,D=P.DropZoneHelper.METRIC_NAMES_ID,O,E=mstrmojo.gm.DualAxisSubAxisBit,G=E.PRIMARY;mstrmojo.vi.viz.GraphMatrixHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.GraphMatrixHelper",handled:false,rowObjects:null,columnObjects:null,xAxisObjects:null,yAxisObjects:null,angleObjects:null,sliceObjects:null,breakByObjects:null,colorByObjects:null,currentXML:"",sizeByObjects:null,tooltipMetrics:null,data:null,metricsDropZone:"",secondaryMetricsDropZone:"",shape:"",subtype:"",metricShapes:null,visType:-1,init:function N(Q){this._super(Q);this.rowObjects=[];this.columnObjects=[];this.xAxisObjects=[];this.yAxisObjects=[];this.angleObjects=[];this.sliceObjects=[];this.breakByObjects=[];this.colorByObjects=[];this.sizeByObjects=[];this.tooltipMetrics=[];this.currentXML="";this.metricsDropZone="";this.secondaryMetricsDropZone="";this.shape="";this.subtype="";this.metricShapes="{}";},clone:function J(R){var Q=this;Q.rowObjects=R.rowObjects.concat();Q.columnObjects=R.columnObjects.concat();Q.xAxisObjects=R.xAxisObjects.concat();Q.yAxisObjects=R.yAxisObjects.concat();Q.angleObjects=R.angleObjects.concat();Q.sliceObjects=R.sliceObjects.concat();Q.breakByObjects=R.breakByObjects.concat();Q.colorByObjects=R.colorByObjects.concat();Q.sizeByObjects=R.sizeByObjects.concat();Q.tooltipMetrics=R.tooltipMetrics.concat();Q.currentXML=R.currentXML;Q.metricsDropZone=R.metricsDropZone;Q.secondaryMetricsDropZone=R.secondaryMetricsDropZone;Q.shape=R.shape;Q.subtype=R.subtype;Q.metricShapes=R.metricShapes;},exists:function(S,Q){var U=this[Q],R=false;I.forEach(U,function(V){R=(V.did===S.did);if(R){return false;}});return R;},removeAngleMetricFromOthers:function(Q){["xAxisObjects","yAxisObjects","tooltipMetrics"].every(function(U){var S=this[U],R=I.find(S,"did",Q.did);if(R>-1){S.splice(R,1);return false;}});},getXml:function C(){var Q=this.data.dz,R=Q?F.copy(Q.visProp&&Q.visProp.fmt,{}):{},S=new mstrmojo.XMLBuilder();if(this.data.visName===mstrmojo.vi.viz.EnumVizStyles.MAPBOX){delete R.cr;}if(this.visStyle){R.visStyle=this.visStyle;}if(this.shape){R.Shape=this.shape;}if(this.subtype){R.Subtype=this.subtype;}if(this.metricShapes){R.metricShapes=this.metricShapes;}R.visType=this.visType;S.addChild("props");S.addChild("widgetProps");S.addChild("fmt");F.forEach(R,function(U,V){S.addChild(V);S.addAttribute("value",U);S.closeElement();});S.closeElement();S.closeElement();S.closeElement();return S.toString();},setData:function K(U){if(!U){return ;}var R=this,S=function(W,X){if(W){var V=(W.TemplateUnit||[]).concat(W.TemplateMetric||[]);if(V){V.forEach(function(Y){var Z=F.copy(Y);if(!Z.did){Z.did=Z.id;}X.push(Z);});}}};S(U[O.PROP_ROWS],this.rowObjects);S(U[O.PROP_COLUMNS],this.columnObjects);S(U[O.PROP_XAXIS],this.xAxisObjects);S(U[O.PROP_YAXIS],this.yAxisObjects);S(U[O.PROP_BREAKBY],this.breakByObjects);S(U[O.PROP_COLORBY],this.colorByObjects);S(U[O.PROP_SIZEBY],this.sizeByObjects);S(U[O.PROP_SLICE],this.sliceObjects);S(U[O.PROP_ANGLE],this.angleObjects);S(U[O.PROP_TOOLTIPMETRICS],this.tooltipMetrics);var Q=U.visProp.fmt;this.shape=Q[O.PROP_SHAPE];this.subtype=Q[O.PROP_SUBTYPE];},setMetricsDropZone:function M(Q){if(!Q){return ;}var R=this;[O.PROP_ROWS,O.PROP_COLUMNS,O.PROP_XAXIS,O.PROP_YAXIS,O.PROP_BREAKBY,O.PROP_SLICE,O.PROP_COLORBY].forEach(function(S){if(Q[S]&&Q[S].hasOwnProperty("MetricNames")){if(R.metricsDropZone){R.secondaryMetricsDropZone=S;}else{R.metricsDropZone=S;}}});},getAddDropZonesAction:function(){var V=this,R=this.metricsDropZone,Q=this.secondaryMetricsDropZone,S={act:"updateTemplate",keyContext:this.data.k,actions:[]},U=function(W){S.actions.push({act:"addDropZoneUnit",zoneId:B[W],unitId:D,unitType:H});};[{p:"rowObjects",v:"Rows"},{p:"columnObjects",v:"Columns"},{p:"xAxisObjects",v:"XAxis"},{p:"yAxisObjects",v:"YAxis"},{p:"breakByObjects",v:"BreakBy"},{p:"colorByObjects",v:"ColorBy"},{p:"sizeByObjects",v:"SizeBy"},{p:"angleObjects",v:"Angle"},{p:"sliceObjects",v:"SliceBy"},{p:"tooltipMetrics",v:"AdditionalMetrics"}].forEach(function(Y){var W=V[Y.p],Z=B[Y.v];W.forEach(function(a){if(a){S.actions.push({act:"addDropZoneUnit",zoneId:Z,unitId:a.did,unitType:a.t,ax:a.ax||G});}});if(R===Y.v){var X=function(a){return(a&&(a.length>A)&&V.isMetricZone(a));};if(X(V.xAxisObjects)||X(V.yAxisObjects)||X(V.angleObjects)){U(R);}}});if(Q==="ColorBy"){U(Q);}return S;}});O=mstrmojo.vi.viz.GraphMatrixHelper;O.PROP_ROWS="Rows";O.PROP_COLUMNS="Columns";O.PROP_HORIZONTAL_AXIS="HorizontalAxis";O.PROP_VERTICAL_AXIS="VerticalAxis";O.PROP_XAXIS="XAxis";O.PROP_YAXIS="YAxis";O.PROP_SLICE="SliceBy";O.PROP_ANGLE="AngleBy";O.PROP_BREAKBY="BreakBy";O.PROP_COLORBY="ColorBy";O.PROP_SIZEBY="SizeBy";O.PROP_TOOLTIPMETRICS="AdditionalMetrics";O.PROP_SHAPE="Shape";O.PROP_SUBTYPE="Subtype";O.PROP_METRICSHAPES="metricShapes";O.PROP_SHAPE_AREA="Area";O.PROP_SHAPE_LINE="Line";O.PROP_SHAPE_BAR="Bar";O.PROP_SHAPE_CIRCLE="Circle";O.PROP_SHAPE_SQUARE="Square";O.PROP_SHAPE_PIE="Pie";O.PROP_SHAPE_RING="Ring";O.PROP_SHAPE_TICK="Tick";O.PROP_SUBTYPE_CLUSTERED="Clustered";O.PROP_SUBTYPE_AUTOMATIC="Automatic";O.PROP_SUBTYPE_STACKED="Stacked";O.PROP_SUBTYPE_ABSOLUTE="Absolute";O.PROP_SUBTYPE_PERCENT="Percent";}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.DropZoneHelper","mstrmojo.gmaps.MapEnums","mstrmojo.gm.GMEnums","mstrmojo.VisEnum");var d=mstrmojo,e=d.array,f=d.vi.viz.EnumDSSDropZones,Q=d.hash,N=d.gmaps,l=mstrmojo.VisEnum,s=l.LegendPropertyTag,j=l.MAPS_PROPERTIES,I=N.EnumPropertyType,X=N.EnumZoomBehavior,h=N.EnumGraphicType,W=N.EnumClusterMode,k=N.EnumGeographicRole,E=N.EnumBaseMapType,V=N.EnumLanguageType,K=l.EnumLegendMode,D=mstrmojo.gm.EnumLegendSlot,p=l.EnumSingleLegendMode,Y=new RegExp(".{32}","g"),r;mstrmojo.vi.viz.MapHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.MapHelper",widget:null,data:null,vp:null,geoAttribute:null,latitude:null,longitude:null,slice:[],angle:null,colorBy:null,sizeBy:null,tooltip:null,markerType:null,useAttributeForm:null,supportAreaMap:true,defaultView:null,init:function q(x){this._super(x);this.tooltip=[];this.data=this.data||{};this.vp=this.data.vp||{};},setWidget:function O(x){if(!x){return ;}var AA=x.fnGetWidget(),z=x.k,y=x.node&&x.node.data&&x.node.data.vp;this.widget=x;this.geoAttribute=L(x,f.GeoAttribute);this.latitude=L(x,f.Latitude);this.longitude=L(x,f.Longitude);this.angle=L(x,f.Angle);this.colorBy=L(x,f.ColorBy);this.sizeBy=L(x,f.SizeBy);this.tooltip=AA.getDropZoneItems(f.AdditionalMetrics,z).map(function(AB){return AB.id;});this.slice=AA.getDropZoneItems(f.SliceBy,z).map(function(AB){return AB.id;});if(y){this.markerType=y.mtp;this.useAttributeForm=y[I.useAttributeForm];this.defaultView=y.dv;}},getGeoUnit:function G(){return n(this.widget,f.GeoAttribute);},getLatitudeUnit:function H(){return n(this.widget,f.Latitude);},getLongitudeUnit:function c(){return n(this.widget,f.Longitude);},getAngleUnit:function A(){return n(this.widget,f.Angle);},getColorByUnit:function P(){return n(this.widget,f.ColorBy);},getSizeByUnit:function g(){return n(this.widget,f.SizeBy);},getSliceByUnits:function C(){var x=this.widget.fnGetWidget();return x.getDropZoneItems(f.SliceBy,this.widget.k);},getTooltipUnits:function a(){var x=this.widget.fnGetWidget();return x.getDropZoneItems(f.AdditionalMetrics,this.widget.k);},setMapType:function(x){this.vp.gtp=x;},getMapType:function(){return this.vp.gtp;},getLayerName:function(){return this.vp.ln;},setShapeFile:function(x){this.vp.lid=x;},setUseAttributeForm:function Z(x){this.useAttributeForm=x?r.USE_ATTRIBUTE_FORM:r.USE_ATTRIBUTE;},getGeoForm:function t(AA,y){var x=AA&&AA.fs,z=null;if(!y){y=function(){return true;};}if((AA.otp===12||AA.t===12)&&x){e.forEach(x,function(AB){if(y(AB)){z=AB;return false;}});}return z;},getLatitudeForm:function u(x){return this.getGeoForm(x,function(y){return r.isLatitude(y.fnm,y.fgr)&&y.obf;});},getLongitudeForm:function S(x){return this.getGeoForm(x,function(y){return r.isLongitude(y.fnm,y.fgr)&&y.obf;});},getXml:function M(){var x=this.vp,z=this.tooltip,y=this.useAttributeForm;x[s.LEGEND_MODE]=x[s.LEGEND_MODE]||K.RESTORED.toString();x[s.LEGEND_POSITION]=x[s.LEGEND_POSITION]||D.RIGHT_MIDDLE.toString();x[j.SHOW_LEGEND]=x[j.SHOW_LEGEND]||"false";x[I.collapseLegend]=x[I.collapseLegend]||p.RESTORE.toString();x[I.legendSwitch]=x[I.legendSwitch]||"false";x[I.baseMapType]=x[I.baseMapType]||E.Reserved;x[I.layerIdx]=x[I.layerIdx]||0;x[I.layerName]=x[I.layerName]||mstrmojo.desc(14750,"Layer")+" 1";x[I.isHidden]=x[I.isHidden]||"0";x[I.zoomSetting]=x[I.zoomSetting]||X.Automatic;x[I.clusterRadius]=50;x[I.clusterMaxZoom]=22;x[I.languageType]=V.English;x[I.tooltipSwitch]=x[I.tooltipSwitch]||"true";x.ga=this.geoAttribute||"";x.lat=this.latitude||"";x.lng=this.longitude||"";x.cmt=this.colorBy||"";x.smt=this.sizeBy||"";if(y){x[I.useAttributeForm]=y;}x.tooltip="";if(z){z.forEach(function(AA){x.tooltip+=AA;});}return r.getXmlFromJson(this.vp);},showColorByZone:function(x){return r.canShowColorByZone(x);},showSizeByZone:function(x){return !!x&&x[I.graphicType]===h.Bubble;},showSliceZone:function(x){return !!x&&x[I.graphicType]===h.Bubble;},showAngleZone:function(x){return !!x&&x[I.graphicType]===h.Bubble||((x[I.graphicType]===h.Marker)&&x[I.clusterMode]===W.PIE);}});r=mstrmojo.vi.viz.MapHelper;r.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:f.GeoAttribute,prm:true,allowSingle:true,show:function(){return true;},v:function(x){return B(x,I.geoAttribute);},onDel:function(x){if(!!x){x[I.geoAttribute]="";x[I.shapeFile]="";}},onAdd:function(x,y){if(!!x){x[I.geoAttribute]=y.item.did;x[I.useAttributeForm]=r.USE_ATTRIBUTE_FORM;x[I.shapeFile]="";}}},{n:mstrmojo.desc(7696,"Latitude"),id:f.Latitude,prm:true,allowSingle:true,show:function(x){if(!!x){return(x[I.graphicType]!==h.Area);}},v:function(x){return B(x,I.latitude);},onDel:function(x){if(!!x){x[I.latitude]="";}},onAdd:function(x,y){var z=y.item;if(!!x){x[I.latitude]=z.did;x[I.useAttributeForm]=z.t===21?r.USE_ATTRIBUTE_FORM:r.USE_ATTRIBUTE;}}},{n:mstrmojo.desc(7697,"Longitude"),id:f.Longitude,prm:true,allowSingle:true,show:function(x){if(!!x){return(x[I.graphicType]!==h.Area);}},v:function(x){return B(x,I.longitute);},onDel:function(x){if(!!x){x[I.longitute]="";}},onAdd:function(x,y){var z=y.item;if(!!x&&!!z){x[I.longitute]=z.did;x[I.useAttributeForm]=z.t===21?r.USE_ATTRIBUTE_FORM:r.USE_ATTRIBUTE;}}},{n:mstrmojo.desc(6188,"Slice"),id:f.SliceBy,prm:true,allowSingle:false,show:function(x){if(!!x){return r.showSliceZone(x);}},v:function(x){if(!!x){var y=x[I.slice];return y&&y.match(Y);}},onDel:function(x,y){var z=y&&y.item;if(!!x&&z&&z.id&&x[I.slice]){x[I.slice]=x[I.slice].replace(z.did,"");}},onAdd:function(x,y){var AB=I.slice,AA=y&&y.item;if(!!x&&AA){var z=x[AB]?x[AB].match(Y):[];z.splice(y.idx,0,AA.did);x[AB]=z.join("");}}},{n:mstrmojo.desc(14294,"Angle"),id:f.Angle,prm:true,allowSingle:true,show:function(x){if(!!x){return r.showAngleZone(x);}},v:function(x){return B(x,I.angle);},onDel:function(x){if(!!x){x[I.angle]="";}},onAdd:function(x,y){F(x,y,I.angle);}},{n:mstrmojo.desc(11662,"Color By"),id:f.ColorBy,prm:true,allowSingle:true,show:function(x){return r.canShowColorByZone(x);},v:function(x){return B(x,I.colorby);},onDel:function(x){if(!!x){x[I.colorby]="";}},onAdd:function(x,y){F(x,y,I.colorby);}},{n:mstrmojo.desc(11663,"Size By"),id:f.SizeBy,prm:true,allowSingle:true,show:function(x){if(!!x){return r.canShowSizeByZone(x);}},v:function(x){return B(x,I.sizeby);},onDel:function(x){if(!!x){x[I.sizeby]="";}},onAdd:function(x,y){F(x,y,I.sizeby);}},{n:mstrmojo.desc(2962,"Tooltip"),id:f.AdditionalMetrics,prm:false,allowSingle:false,show:function(){return true;},v:function(x){if(!!x){var y=x[I.tooltip];return y&&y.match(Y);}},onDel:function(x,y){if(x&&x[I.tooltip]){x[I.tooltip]=x[I.tooltip].replace(y.item.did,"");}},onAdd:function(x,y){var AA=I.tooltip;if(!!x){var z=x[AA]?x[AA].match(Y):[];z.splice(y.idx,0,y.item.did);x[AA]=z.join("");}}}];r.USE_ATTRIBUTE="0";r.USE_ATTRIBUTE_FORM="1";r.canShowColorByZone=function(x){return !!x&&(x[I.graphicType]!==undefined)&&x[I.graphicType]!==h.Density;};r.canShowSizeByZone=function(x){return !!x&&x[I.graphicType]===h.Bubble;};r.showAngleZone=function(x){if(!x){return false;}return x[I.graphicType]===h.Bubble||((x[I.graphicType]===h.Marker)&&x[I.clusterMode]===W.PIE);};r.showSliceZone=function(x){return !!x&&x[I.graphicType]===h.Bubble;};r.supportImageThreshold=function(x){return !!x&&x[I.graphicType]===h.Marker;};r.isLatitude=function U(y,x){return x===5||(y&&y.toLowerCase().indexOf("latitude")>-1);};r.isLongitude=function o(y,x){return x===6||(y&&y.toLowerCase().indexOf("longitude")>-1);};r.isAxisAttribute=function w(y){var x=y&&y.fs,z;if(x&&x.length===1){z=x[0];return !!z&&(z.fgr===5||z.fgr===6);}return false;};r.getXmlFromJson=function R(x){var y=new mstrmojo.XMLBuilder();y.addChild("widgetProps");y.addChild("fmt");Q.forEach(x,function(z,AA){y.addChild(AA);y.addAttribute("value",z);y.closeElement();});y.closeElement();y.closeElement();return y.toString();};r.isGeoRoleSupportArea=function J(x){x=x&&x.toString();return x===k.EnumGeographicRoleCity||x===k.EnumGeographicRoleState||x===k.EnumGeographicRoleCountry||x===k.EnumGeographicRoleOther||x===k.EnumGeographicRoleZipCode||x===k.EnumGeographicRoleCounty;};r.zonesNeedSyncToTooltipZone=[f.GeoAttribute,f.SliceBy,f.Angle,f.SizeBy,f.ColorBy];r.shouldSyncItemToTooltipZone=function b(z,x,y){y=e.ensureArray(y);return r.zonesNeedSyncToTooltipZone.indexOf(x)>-1&&y.indexOf(z)<0;};function n(y,x){var AB=y.fnGetWidget(),AA=y.k,z=AB.getDropZoneItems(x,AA);return z[0];}function L(y,x,z){var AA=n(y,x,z);return AA?AA.id:"";}function B(y,x){if(!!y){return y[x]?[y[x]]:[];}}function F(y,z,x){var AA=z.item;if(!!y||!!AA){y[x]=AA.did;}return y;}}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=Math,I=mstrmojo.dom,K=mstrmojo.css,E="active",L="ready",J=6,F=10,O=10,P={LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",BUTTON:"button"};mstrmojo.util.ui.LassoSelectorParamsType=null;function Q(S,R,U){return function(V){S.call(mstrmojo.all[R],V,U);};}function M(S){var V=S.view,U=I.eventTarget(window,S),R=this.lassoSelector;if(this.clickFromLassoResizer||(U!==R&&this.clickFromCreatingLasso)){I.stopPropogation(V,S);I.preventDefault(V,S);}delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;}function D(c,V){var R,e,S,a,b=c.clientX,Z=c.clientY,U=this.lassoSelector,Y=V.startX,X=V.startY,W=V.containerPos,f=b-W.x,d=Z-W.y;f=C.min(f,V.maxX);f=C.max(f,V.minX);d=C.min(d,V.maxY);d=C.max(d,V.minY);R=C.abs(f-Y);e=C.abs(d-X);a=C.min(X,d);S=C.min(Y,f);U.style.width=R+"px";U.style.height=e+"px";U.style.left=S+"px";U.style.top=a+"px";V.width=R;V.height=e;V.left=S;V.top=a;if(R<=O&&e<=O){U.style.visibility="hidden";K.removeClass(U,E);}else{U.style.visibility="visible";K.addClass(U,E);document.body.style.cursor="crosshair";}}function H(U,X){var W=window.document,S=this.lassoSelector,V=X.width,R=X.height;I.detachEvent(W,"mousemove",X.fnMove);I.detachEvent(W,"mouseup",X.fnUp);delete X.fnMove;delete X.fnUp;document.body.style.cursor="default";if(!V||V===0||!R||R===0){this.dismissLassoSelector();}else{X.ctrlKey=U.ctrlKey;this.lassoSelected(X);this.clickFromCreatingLasso=true;K.addClass(S,L);this.positionBoxResizers();}}function N(h){var a,d=h.view,c,b,e=I.eventTarget(window,h),R=e.getAttribute("type"),W=this.lassoSelector,S=this.lassoContainer,j=this.excludeAttrArr,V=j.length,Z,Y={};delete this.clickFromLassoResizer;delete this.clickFromCreatingLasso;if(!W||!S||!this.lassoSelectorEnabled){return ;}if(I.contains(this.dropDownBtn,e,true)){return ;}for(a=0;a<V;a++){if(R===j[a]){return ;}}this.lassoSelecting();Z=I.position(S);c=h.clientX-Z.x;b=h.clientY-Z.y;Y.containerPos=Z;Y.maxX=Z.w;Y.maxY=Z.h;Y.startX=c;Y.startY=b;Y.minX=0;Y.minY=0;Y.info=this.getLassoSelectionInfo(e);Y.useAsSelectorOrBrushes=this.useAsSelectorOrBrushes||((this.hasAssociatedNodes&&this.hasAssociatedNodes())||this.selectorControl);W.style.visibility="hidden";W.style.left=c+"px";W.style.top=b+"px";W.style.width="0px";W.style.height="0px";K.removeClass(W,L);S.appendChild(W);var U=this.id,f=document,X=Q(D,U,Y),g=Q(H,U,Y);I.attachEvent(f,"mousemove",X);I.attachEvent(f,"mouseup",g);Y.fnMove=X;Y.fnUp=g;I.stopPropogation(d,h);I.preventDefault(d,h);}function G(b,V){var Z=V.index,Y=V.startX,X=V.startY,W=V.containerPos,g=b.clientX-W.x,f=b.clientY-W.y,U=this.lassoSelector;g=C.min(g,V.maxX);g=C.max(g,V.minX);f=C.min(f,V.maxY);f=C.max(f,V.minY);var e=g-Y,d=f-X;if(Z%3===1){e=0;}if(Z===3||Z===5){d=0;}var R=V.selWidth,c=V.selHeight,S=V.selLeft,a=V.selTop;if(e!==0){if(Z%3===0){S+=e;R-=e;}else{R+=e;}}if(d!==0){if(Z<3){a+=d;c-=d;}else{c+=d;}}U.style.width=R+"px";U.style.left=S+"px";U.style.top=a+"px";U.style.height=c+"px";V.width=R;V.left=S;V.height=c;V.top=a;this.positionBoxResizers();}function B(R,V){var U=R.view,S=window.document;I.detachEvent(S,"mousemove",V.fnMove);I.detachEvent(S,"mouseup",V.fnUp);delete V.fnMove;delete V.fnUp;this.clickFromLassoResizer=true;I.stopPropogation(U,R);I.preventDefault(U,R);this.lassoSelectorResized(V);}function A(W){var U=W.view,j=I.eventTarget(window,W),V=parseInt(j.getAttribute("index"),10),b=this.lassoSelector,a=b.offsetLeft,l=b.offsetTop,Z=a+b.offsetWidth,h=l+b.offsetHeight,R=I.position(this.lassoContainer),g=0,d=0,e=R.w,c=R.h,f={};if(V%3===0){e=Z-F;}if(V%3===2){g=a+F;}if(V<3){c=h-F;}if(V>=6){d=l+F;}f.minX=g;f.minY=d;f.maxX=e;f.maxY=c;f.startX=W.clientX-R.x;f.startY=W.clientY-R.y;f.index=V;f.containerPos=R;f.selWidth=b.clientWidth;f.selHeight=b.clientHeight;f.selLeft=b.offsetLeft;f.selTop=b.offsetTop;var Y=this.id,k=document,S=Q(G,Y,f),X=Q(B,Y,f);I.attachEvent(k,"mousemove",S);I.attachEvent(k,"mouseup",X);f.fnMove=S;f.fnUp=X;I.stopPropogation(U,W);I.preventDefault(U,W);}mstrmojo.util.ui._LassoSelector=mstrmojo.provide("mstrmojo.util.ui._LassoSelector",{_mixinName:"mstrmojo.util.ui._LassoSelector",lassoContainer:undefined,lassoSelector:undefined,lassoSelectorEnabled:true,excludeAttrArr:null,boxResizers:null,useDropDownBtn:false,dropDownBtn:undefined,init:function(R){if(this._super){this._super(R);}this.excludeAttrArr=[];this.boxResizers=[];},registerLassoSelector:function(S,W,V){W=W||[];W.push(P.LASSO_SELECTOR);W.push(P.LASSO_RESIZER);W.push(P.BUTTON);this.lassoContainer=S;this.excludeAttrArr=W;this.useDropDownBtn=V||false;I.attachEvent(S,"mousedown",Q(N,this.id));I.attachEvent(S,"click",Q(M,this.id));var R=this.lassoSelector;if(!R){R=this.createLassoSelector();this.lassoSelector=R;}var U=R.parentNode;if(U){U.removeChild(R);}},createLassoSelector:function(){var V,W,S,U=this.boxResizers,R=document.createElement("div");R.setAttribute("class","lasso-selector");R.setAttribute("type",P.LASSO_SELECTOR);R.setAttribute("draggable",false);R.draggable=false;for(V=0;V<9;V++){if(V!==4){W=document.createElement("div");W.setAttribute("class","lasso-selector-resizer");W.setAttribute("type",P.LASSO_RESIZER);W.setAttribute("index",String(V));W.setAttribute("draggable",false);W.draggable=false;R.appendChild(W);U[V]=W;I.attachEvent(W,"mousedown",Q(A,this.id));}}K.addClass(U[0],["top","left"]);K.addClass(U[1],["top"]);K.addClass(U[2],["top","right"]);K.addClass(U[3],["left"]);K.addClass(U[5],["right"]);K.addClass(U[6],["bottom","left"]);K.addClass(U[7],["bottom"]);K.addClass(U[8],["bottom","right"]);if(this.useDropDownBtn===true){S=document.createElement("div");S.setAttribute("type",P.BUTTON);S.setAttribute("class","lasso-selector-dropdown-button");R.appendChild(S);I.attachEvent(S,"click",Q(this.lassoButtonClicked,this.id));this.dropDownBtn=S;}return R;},positionBoxResizers:function(){var U=this.boxResizers,S=this.lassoSelector,V=S.clientWidth,R=S.clientHeight,X=(V-J)>>1,W=(R-J)>>1;U[1].style.left=X+"px";U[3].style.top=W+"px";U[5].style.top=W+"px";U[7].style.left=X+"px";},dismissLassoSelector:function(){var R=this.lassoSelector;if(R){K.removeClass(R,[E,L]);if(R.parentNode){R.parentNode.removeChild(R);}}},isLassoSelectorActive:function(){function S(W,V){var X=W.className.split(/\s+/),U;for(U=0;U<X.length;U++){if(X[U]===V){return true;}}return false;}var R=this.lassoSelector;if(R){return S(R,E);}return false;},getLassoSelectionInfo:mstrmojo.emptyFn,lassoSelected:mstrmojo.emptyFn,lassoSelecting:mstrmojo.emptyFn,lassoButtonClicked:mstrmojo.emptyFn,lassoSelectorResized:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var F=mstrmojo.dom,I=mstrmojo.css,C="active";var A=false;mstrmojo.util.ui.SplitterParamsType=null;function H(N,Q){var P=Q.info,O=P&&P.min,M=P&&P.max,L=Q.start+(F.getMousePosition(N,window)[Q.mouseProp]-Q.mousePosition)*(P&&!!P.isReverseMove?-1:1);if(O!==undefined){L=Math.max(L,O);}if(M!==undefined){L=Math.min(L,M);}return L;}function G(M,L,N){return function(O){M.call(mstrmojo.all[L],O,N);};}function B(L,M){M.target.style[M.styleProp]=H(L,M)+"px";}function K(L,N){if(!A){return ;}var M=window.document;F.detachEvent(M,"mousemove",N.fnMove);F.detachEvent(M,"mouseup",N.fnUp);delete N.fnMove;delete N.fnUp;A=false;mstrApp.setInteractive(true);this.splitterMoved(H(L,N)-N.start,N.info);I.removeClass(N.target,C);(this.children||[]).forEach(function(O){O.domNode.style.pointerEvents="inherit";});this.splitterMouseUp();}function J(W){if(A){return ;}mstrApp.setInteractive(false);var L=this.id,M,N,Q=F.eventTarget(window,W),S=(Q.className.indexOf("v")===-1),R=S?"y":"x",P={};P.target=Q;P.info=this.getSplitterInfo(Q);N=P.info&&!!P.info.isReverseMove;M=S?"Top":N?"Right":"Left";P.start=N?parseInt(Q.style.right):Q["offset"+M];P.mouseProp=R;P.mousePosition=F.getMousePosition(W,window)[R];P.styleProp=M.toLowerCase();I.addClass(Q,C);(this.children||[]).forEach(function(X){X.domNode.style.pointerEvents="none";});this.splitterMouseDown();var O=G(B,L,P),V=G(K,L,P);var U=window.document;F.attachEvent(U,"mousemove",O);F.attachEvent(U,"mouseup",V);P.fnMove=O;P.fnUp=V;A=true;}mstrmojo.util.ui._HostsSplitter=mstrmojo.provide("mstrmojo.util.ui._HostsSplitter",{_mixinName:"mstrmojo.util.ui._HostsSplitter",registerSplitter:function E(L){this.splitterEvtMouseDownHandler=G(J,this.id);F.attachEvent(L,"mousedown",this.splitterEvtMouseDownHandler);},unRegisterSplitter:function D(L){if(this.splitterEvtMouseDownHandler){F.detachEvent(L,"mousedown",this.splitterEvtMouseDownHandler);}},getSplitterInfo:mstrmojo.emptyFn,splitterMoved:mstrmojo.emptyFn,splitterMouseDown:mstrmojo.emptyFn,splitterMouseUp:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var U=mstrmojo.css,E=mstrmojo.dom,J=mstrmojo.array,K=[],F=null,L=function(X){return(X&&X.rw&&X.rw.row&&X.rw.row.tc)||0;},B=function(Y,X){if(X){if(Y===1){return mstrmojo.desc(11944,"1 of 1 Row selected");}return mstrmojo.desc(11945,"# of ## Rows selected").replace("##",Y).replace("#",X);}return Y===1?mstrmojo.desc(11946,"1 Row"):mstrmojo.desc(11947,"## Rows").replace("##",Y);},I=function(){var c="",Z,a,d=K[0]&&K[0].parentNode.firstChild,X=this.hiddenField,b=K.length,Y=L(this.gridData);for(Z=0;d&&Z<d.childNodes.length;Z++){a=d.childNodes[Z].innerText||d.childNodes[Z].textContent;c+=a?(a+"\t"):"";}c+="\n";K.forEach(function(e){for(Z=0;Z<e.childNodes.length;Z++){a=e.childNodes[Z].innerText||e.childNodes[Z].textContent;c+=a?(a+"\t"):"";}c+="\n";});X.value=c;X.focus();X.select();c=B(Y,b);this.viewDataDialog.updateToolbarChildren(c);},N=function N(a,X){var Y=this.controller,Z=Y.cmdMgr;Z.getInterimCmd().submitInterim(a,Y._getXtabCallback(this,X||{}),{preserveUndo:true,hideCancel:true});},H=function H(Y,X){N.call(this,this.controller.dataService().getUpdateTemplateAction(this.k,Y),X);},Q=function(Y,a){var X=J.indexOf(K,Y),Z=X>-1;if(Z||a===false){K.splice(X,1);}if(!Z||a===true){K.push(Y);F=Y;}U.toggleClass(Y,"selected",!Z||a===true);},C=function C(){K.forEach(function(X){U.removeClass(X,"selected");});K=[];};mstrmojo.vi.ui.rw._IsViewDataGrid=mstrmojo.provide("mstrmojo.vi.ui.rw._IsViewDataGrid",{_mixinName:"mstrmojo.vi.ui.rw._IsViewDataGrid",submitUndoRedoActionsWithCallback:function A(X,Y){N.call(this,X,Y);},doSelection:function O(s,X,f){if(f.getAttribute("r")==="0"){var t=this.getCellForNode(f);if(t.at&8&&E.getButton(X,s)!==E.MOUSE_BUTTON.RIGHT){this.sort(t);}return ;}if(f&&~f.className.indexOf("xtab-td")){var g=E.isMetaKey(X,s),q=E.shiftKey(X,s),b=E.findAncestorByName(f,"tr",true,this.domNode),Y=E.findAncestorByName(f,"tbody",true,this.domNode);if(g||(q&&!F)){Q(b);}else{if(q&&Y){var a=E.findAncestorByName(F,"tbody",true,this.domNode),r=this.zone.rowsPerPage,p=function(e){return e.tBodyN*r+e.index;},l=function(e){return this.zone.tableNode.childNodes[e+1].childNodes;}.bind(this),c={row:F,tBodyN:parseInt(a.getAttribute("n")||0),index:J.indexOf(a.childNodes,F),body:a},h={row:b,tBodyN:parseInt(Y.getAttribute("n")||0),index:J.indexOf(Y.childNodes,b),body:Y},k,Z,o,n,d;if(p(c)<p(h)){k=c;Z=h;}else{k=h;Z=c;}Q(k.row,true);if(k.tBodyN===Z.tBodyN){d=k.body.childNodes;for(n=k.index+1;n<Z.index;n++){Q(d[n]);}}else{for(o=k.tBodyN;o<=Z.tBodyN;o++){if(o===k.tBodyN){d=k.body.childNodes;for(n=k.index+1;n<d.length;n++){Q(d[n]);}}else{if(o===Z.tBodyN){d=Z.body.childNodes;for(n=0;n<Z.index;n++){Q(d[n]);}}else{d=l(o);for(n=0;n<d.length;n++){Q(d[n]);}}}}}Q(Z.row,true);}else{C();Q(b,true);}}}else{C();}I.call(this);},onclick:function W(b,X){if(!this.interactiveCellsArray.length){return ;}b=b.e||b;var Y=mstrmojo.dom,a=Y.eventTarget(X,b),Z=a&&Y.findAncestorByName(a,"td",true,this.viewport);if(Z){this.doSelection(b,X,Z);Y.clearBrowserHighlights();}},changeColumnWidth:function M(b,Z,a,Y,X){H.call(this,this._super(b,Z,a,Y,X,true));},preBuildRendering:function D(){this._super();U.addWidgetCssClass(this,"viewData");},postBuildRendering:function P(){this._super();var X=L(this.gridData);this.viewDataDialog.updateToolbarChildren(B(X));},lastSortedCell:[],sort:function R(f,d){var Y=f._ei,c=d===undefined,e=c?true:!!d,X=this.lastSortedCell,Z={success:function(){try{var l=this.tableContainerNode.lastElementChild.firstChild.firstChild.firstChild.lastChild.firstChild.childNodes,h=this.tableContainerNode.childNodes[1].firstChild.firstChild.lastChild.firstChild.childNodes,j;for(j=0;j<l.length;j++){if(Y===Number(l[j].getAttribute("ei"))){U.addClass(l[j],e?"asc":"desc");U.addClass(h[j],e?"asc":"desc");}}}catch(k){}}.bind(this)};if(X){if(X[0]===Y){e=c?!X[1]:d;}}X[0]=Y;X[1]=e;var b=this.controller,g=b.getSorts(this.model.getSortAction(f,e)),a={act:"sort",sorts:g.sorts,nodeKey:this.k,subTotalsPos:g.subTotalsPos};H.call(this,a,Z);},pivot:function G(X,Y){var Z=this.model.getPivotAction(X,Y);H.call(this,Z);},selectAll:function S(){var Y=this.zone,Z=Y.tableNode.childNodes,b,a,c,X,d,e=true;C();for(b=0;b<Z.length;b++){c=Z[b];if(c.tagName.toLowerCase()==="tbody"){X=c.getAttribute("n")||0;if(!Y.pageStatus[X].isOnDemand()){d=c.childNodes;for(a=0;a<d.length;a++){if(!e){Q(d[a],true);}e=false;}}}}I.call(this);},isMultiSelect:false,onHandleDblClick:function V(){var X={act:"changeXtabColWidthScenario",value:2};H.call(this,X);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.HSLColor");var F=mstrmojo.chart,H=0.01;function I(N){if(N<0){N+=1;}if((N-1)>0){N-=1;}return N;}function B(P,O,N){if((N-1/6)<0){return P+(O-P)*6*N;}if((N-0.5)<0){return O;}if((N-2/3)<0){return P+(O-P)*6*(2/3-N);}return P;}mstrmojo.chart.RGBColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.RGBColor",mR:0,mG:0,mB:0,init:function M(W,a){this._super(W);a=a||false;if(W!==null){if(W.Color){this.mR=W.Color.mR;this.mG=W.Color.mG;this.mB=W.Color.mB;}else{if(W.R!==undefined&&W.G!==undefined&&W.B!==undefined){this.mR=W.R;this.mG=W.G;this.mB=W.B;}else{if(W.H!==undefined&&W.S!==undefined&&W.L!==undefined){var S=W.H,Z=W.S,O=W.L;var R,U,X,N,V,Y;if(Z<H){this.mR=this.mG=this.mB=(O*255);}else{R=0;if((0.5-O)>0){R=O*(1+Z);}else{R=O+Z-(O*Z);}U=2*O-R;X=S/360;N=X+1/3;V=X;Y=X-1/3;N=I(N);V=I(V);Y=I(Y);this.mR=B(U,R,N)*255;this.mG=B(U,R,V)*255;this.mB=B(U,R,Y)*255;}}else{if(typeof W==="number"){if(a){this.mR=W&255;this.mG=(W&65280)>>8;this.mB=(W&16711680)>>16;}else{this.mB=W&255;this.mG=(W&65280)>>8;this.mR=(W&16711680)>>16;}}}}}}},ToInteger:function G(N){N=N||false;if(N){return this.mB+(this.mG<<8)+(this.mR<<16);}return this.mR+(this.mG<<8)+(this.mB<<16);},MakeDarker:function J(N){this.mR*=N;this.mG*=N;this.mB*=N;},Reset:function D(P,O,N){this.mR=P;this.mG=O;this.mB=N;},ResetFromColorValue:function L(O,N){N=N||false;if(N){this.mR=O&255;this.mG=(O&65280)>>8;this.mB=(O&16711680)>>16;}else{this.mB=O&255;this.mG=(O&65280)>>8;this.mR=(O&16711680)>>16;}},ResetFromHSLValue:function K(R){var U=R.H,Z=R.S,O=R.L;var S,V,X,N,W,Y;if(Z<H){this.mR=this.mG=this.mB=(O*255);}else{S=0;if((0.5-O)>0){S=O*(1+Z);}else{S=O+Z-(O*Z);}V=2*O-S;X=U/360;N=X+1/3;W=X;Y=X-1/3;N=I(N);W=I(W);Y=I(Y);this.mR=B(V,S,N)*255;this.mG=B(V,S,W)*255;this.mB=B(V,S,Y)*255;}},Copy:function E(N){this.mR=N.mR;this.mG=N.mG;this.mB=N.mB;},ToHSL:function A(){var O,R,N,Q,P;O=Math.max(this.mR,this.mG,this.mB);R=Math.min(this.mR,this.mG,this.mB);if(O===R){P=0;}else{if(O===this.mR){if(this.mG>=this.mB){P=60*(this.mG-this.mB)/(O-R);}else{P=60*(this.mG-this.mB)/(O-R)+360;}}else{if(O===this.mG){P=60*(this.mB-this.mR)/(O-R)+120;}else{P=60*(this.mR-this.mG)/(O-R)+240;}}}N=0.5*(O+R)/255;if(O===R){Q=0;}else{if((0.5-N)>0){Q=(O-R)/(O+R);}else{Q=(O-R)/(510-(O+R));}}return new F.HSLColor({h:P,s:Q,l:P});}});var C=mstrmojo.chart.RGBColor;F.gWhite=new C({R:255,G:255,B:255});F.gBlack=new C({R:0,G:0,B:0});F.gLeaderLineColor=new C({R:37,G:108,B:83});F.gStrokeColorForDarkBackground=new C({R:254,G:254,B:254});F.gStrokeColorForLightBackground=new C({R:230,G:230,B:230});F.gColorPalette=[new C({R:62,G:117,B:167}),new C({R:92,G:151,B:70}),new C({R:248,G:215,B:83}),new C({R:23,G:185,B:51}),new C({R:255,G:138,B:14}),new C({R:156,G:57,B:164}),new C({R:144,G:173,B:207}),new C({R:31,G:171,B:242}),new C({R:255,G:255,B:204}),new C({R:255,G:204,B:153}),new C({R:0,G:51,B:0}),new C({R:128,G:0,B:0}),new C({R:49,G:255,B:49}),new C({R:0,G:0,B:255}),new C({R:255,G:128,B:64}),new C({R:99,G:101,B:255}),new C({R:255,G:0,B:0}),new C({R:255,G:255,B:0}),new C({R:0,G:255,B:0}),new C({R:255,G:0,B:255})];F.gLightColorPalette=[new C({R:31,G:119,B:180}),new C({R:214,G:39,B:40}),new C({R:44,G:160,B:44}),new C({R:255,G:127,B:14}),new C({R:148,G:103,B:189}),new C({R:188,G:189,B:34}),new C({R:23,G:190,B:207}),new C({R:127,G:127,B:127}),new C({R:174,G:199,B:232}),new C({R:255,G:152,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:187,B:120}),new C({R:197,G:189,B:5}),new C({R:219,G:219,B:141}),new C({R:158,G:218,B:229}),new C({R:199,G:199,B:199})];F.gDarkColorPalette=[new C({R:22,G:176,B:255}),new C({R:255,G:55,B:41}),new C({R:4,G:186,B:34}),new C({R:255,G:150,B:14}),new C({R:174,G:121,B:222}),new C({R:204,G:205,B:37}),new C({R:25,G:206,B:224}),new C({R:169,G:169,B:169}),new C({R:179,G:205,B:239}),new C({R:255,G:167,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:223,B:128}),new C({R:218,G:195,B:236}),new C({R:225,G:224,B:144}),new C({R:161,G:223,B:234}),new C({R:214,G:214,B:214})];}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure","mstrmojo.chart.JSONParameter","mstrmojo.chart.enums.EnumInstructionName");var J=mstrmojo.chart,K=J.enums,N=K.EnumInstructionName;function I(P,Q){++this.mCurrentIndex;if(this.mIsFirstPass){this.mParameterList.push(new J.JSONParameter({mParameterName:P,mParameterValue:Q,mIsLastFrameSet:this.mIsLastFrame}));}}mstrmojo.chart.JSONInstruction=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONInstruction",mInstructionName:N.JSONInsUndefined,mpOriginalAddress:0,mFormatIdx:-1,mParameterList:[],mCurrentIndex:-1,mIsLastFrame:true,mIsFirstPass:true,init:function O(P){this._super(P);this.mParameterList=[];},SetInstructionName:function F(P){this.mInstructionName=P;},GetInstructionName:function H(){return this.mInstructionName;},SetSecondPass:function D(){this.mIsFirstPass=false;this.mCurrentIndex=-1;},SetLastFrame:function A(P){this.mIsLastFrame=P;},AppendToParameterList:function E(P,Q){I.call(this,P,Q);},AppendArrayToParameterList:function B(P,Q,R){if(R>0){I.call(this,P,Q);}},AppendSimpleVectorToParameterList:function M(P,Q){if(Q.length>0){I.call(this,P,Q);}},SetFormatAddress:function C(P){this.mpOriginalAddress=P;},CalculateFormatIndex:function G(S){var R=this.mpOriginalAddress,Q,U,P;if(R!==null&&R!==undefined){Q=0;P=S.length-1;while(Q<=P){U=Math.floor((Q+P)/2);if(S[U].mpOriginalAddress<R){Q=U+1;}else{if(S[U].mpOriginalAddress>R){P=U-1;}else{this.mFormatIdx=U;return ;}}}Q=0;P=S.length-1;while(Q<=P){U=Math.floor((Q+P)/2);if(S[U].id<R){Q=U+1;}else{if(S[U].id>R){P=U-1;}else{this.mFormatIdx=U;return ;}}}}},AppendToJSONObject:function L(V){var R=this.mParameterList,Q=this.mFormatIdx,U,P,S={Ins:this.mInstructionName};if(Q>=0){S.Format=Q;}P=R.length;for(U=0;U<P;U++){R[U].AppendToJSONObject(S);}V.push(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.model.enums.EnumDSSGraphObject");var F=mstrmojo.chart,A=mstrmojo.chart.model,B=A.enums,G=B.EnumDSSGraphObject,C=F.gNullObjectId;function H(J){return new F.TripleId({ObjectId:J});}mstrmojo.chart.AxisObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.AxisObject",mLabelId:-1,mMajorId:-1,mMinorId:-1,mTitleId:-1,mCustomLineId:-1,mCustomLabelId:-1,init:function I(J){this.mLabelId=J.LabelId;this.mMajorId=J.MajorId;this.mMinorId=J.MinorId;this.mTitleId=J.TitleId;this.mCustomLineId=J.CustomLineId;this.mCustomLabelId=J.CustomLabelId;}});var E=mstrmojo.chart.AxisObject;var D=F.gAxisObjects=[];D.push(new E({LabelId:H.call(this,G.DssGraph2DO1Label),MajorId:H.call(this,G.DssGraphO1Major),MinorId:H.call(this,G.DssGraphO1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraph2DO2Label),MajorId:H.call(this,G.DssGraphO2Major),MinorId:H.call(this,G.DssGraphO2Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphX1Label),MajorId:H.call(this,G.DssGraphX1Major),MinorId:H.call(this,G.DssGraphX1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,G.DssGraphUserLabel3)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphY1Title),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphY2Label),MajorId:H.call(this,G.DssGraphY2Major),MinorId:H.call(this,G.DssGraphY2Minor),TitleId:H.call(this,G.DssGraphY2Title),CustomLineId:H.call(this,G.DssGraphUserLine2),CustomLabelId:H.call(this,G.DssGraphUserLabel2)}));D.push(new E({LabelId:H.call(this,G.DssGraphY3Label),MajorId:H.call(this,G.DssGraphY3Major),MinorId:H.call(this,G.DssGraphY3Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY4Label),MajorId:H.call(this,G.DssGraphY4Major),MinorId:H.call(this,G.DssGraphY4Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphX2Label),MajorId:H.call(this,G.DssGraphX2Major),MinorId:H.call(this,G.DssGraphX2Minor),TitleId:H.call(this,G.DssGraphX2Title),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,G.DssGraphUserLabel4)}));}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.common.MapStructure");var I=mstrmojo.chart,E=I.gNullTripleId;var G=0;mstrmojo.chart.GraphObjectManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObjectManager",mGraphObjectList:null,mGraphObjectManagerList:null,mTripleId:null,mpManager:null,mChartContextPtr:null,mGraphObjectMap:null,init:function N(O){this._super(O);this.mGraphObjectList=[];this.mGraphObjectManagerList=[];this.mTripleId=this.mTripleId||O.TripleId||E;this.mpManager=O.GraphObjectManager||null;if(this.mpManager!==null){this.mChartContextPtr=this.mpManager.mChartContextPtr;}if(G===-1){}else{if(G===1||(!!this.mpManager)===false){this.mGraphObjectMap=new mstrmojo.chart.common.MapStructure();}else{this.mGraphObjectMap=this.mpManager.mGraphObjectMap||new mstrmojo.chart.common.MapStructure();}}},getMapGenesis:function A(){return G;},AddToMapAndList:function L(O){this.AddToMap(O);this.mGraphObjectList.push(O);},AddObjectsToMapAndList:function M(Q){var P,O;O=Q.length;for(P=0;P<O;++P){this.AddToMapAndList(Q[P]);}},AddToManagerList:function H(O){this.mGraphObjectManagerList.push(O);},AddToMap:function C(O){if(O){this.mGraphObjectMap.replaceByTripleId(O.mTripleId,O);}},getGraphObjectFromList:function J(W,R){var S,U,O,V=this.mGraphObjectManagerList,Q=this.mGraphObjectList,P=this.mChartContextPtr.getUtiliy();for(S=Q.length-1;S>=0;--S){U=Q[S].mTripleId;if(P.tripleId.equal(U,W)){O={object:Q[S],find:true};return O;}}if(R){for(S=V.length-1;S>=0;--S){O=V[S].getGraphObjectFromList(W);if(O.find){return O;}}}return{object:null,find:false};},GetGraphObject:function F(V,P){var S,R,Q=this.mGraphObjectMap,U=this.mGraphObjectManagerList,O;P=(P===undefined)?true:P;if(Q){S=Q.findByTripleId(V);if(S!==undefined){return S;}if(P){O=U.length;for(R=O-1;R>=0;--R){S=U[R].GetGraphObject(V,true);if(S!==undefined){return S;}}}return null;}S=this.getGraphObjectFromList(V,P);return S;},GetGraphObjectManager:function K(V,P){if(P===undefined){P=true;}var Q,U=this.mGraphObjectManagerList,O=this.mChartContextPtr.getUtiliy();for(Q=U.length-1;Q>=0;--Q){var S=U[Q].mTripleId;if(O.tripleId.equal(S,V)){return U[Q];}if(P){var R=U[Q].GetGraphObjectManager(V,true);if(R){return R;}}}return null;},Draw:function B(){var O,P;O=this.mGraphObjectList.length;for(P=0;P<O;++P){this.mGraphObjectList[P].Draw();}},GenerateInterpolationFrame:function D(O){var Q=this.mGraphObjectManagerList.length,P,R;this.mProgress=O;for(P=0;P<Q;++P){this.mGraphObjectManagerList[P].GenerateInterpolationFrame(O);}R=this.mGraphObjectList.length;for(P=0;P<R;++P){this.mGraphObjectList[P].SetProgress(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.gm.GMEnums");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumNumberCategory","EnumLabelLevelOption","EnumSliceType","EnumDataSetStatus");mstrmojo.requiresClsP("mstrmojo.chart","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumShapeType");var Ao=mstrmojo.chart,c=mstrmojo.hash,P=Ao.enums,AS=Ao.model.enums,Ar=P.EnumNumberCategory,Ap=P.EnumLabelLevelOption,AC=P.EnumDataSetStatus,d=AS.EnumShapeType;var A7=mstrmojo.gm,C=A7.FormatingPropertyTag;var F=1,AJ=2,I=3;var AW={lineShape:[C.SHAPE_LINE_COLOR,C.SHAPE_LINE_STYLE,C.SHAPE_LINE_THICKNESS],lineMarker:["lnMkBdrClr",C.LINE_MARKER_STYLE,C.LINE_MARKER_THICKNESS],shapeBorder:[C.SHAPE_BORDER_COLOR,C.SHAPE_BORDER_STYLE,C.SHAPE_BORDER_THICKNESS]};function A5(BM,BL){BM=BM||{};var BJ={mLineStyle:BM[BL[1]]||0,mAlpha:255,mLineThickness:BM[BL[2]]||null};if(BJ.mLineThickness!==null){BJ.mLineThickness=parseFloat(BJ.mLineThickness);}if(BJ.mLineThickness!==null&&BJ.mLineThickness!==undefined){BJ.mLineThicknessPt=75*BJ.mLineThickness;}var BK=BM[BL[0]];if(BK!==null&&BK!==undefined){if(typeof BK==="number"){BJ.mLineColor=BK;}else{if(BK.c1!==undefined&&typeof BK.c1==="number"){BJ.mLineColor=BK.c1;}}}if(BJ.mLineStyle===99){BJ.mAlpha=0;}return BJ;}function AT(BM,BL){BL=BL||"all";var BK,BJ={};switch(BL){case"lineShape":BK=AW.lineShape;return c.copyProps(BK,BM);case"targetLine":return BJ;case"lineMarker":BK=AW.lineMarker;return c.copyProps(BK,BM);case"shapeBorder":case"pieSliceBorder":BK=AW.shapeBorder;return c.copyProps(BK,BM,BJ);default:c.copy(BM,BJ);return BJ;}}function u(BK,BL){if(BK===undefined){return ;}var BJ=9;if(BK.nct!==undefined){BL.mFormatType=BK.nct;}if(BL.mFormatType===undefined){BL.mFormatType=BJ;}BL.mDigits=BK.ndp||0;if(BK.nth!==undefined){BL.mGrouping=BK.nth;}if(BL.mGrouping===undefined){BL.mGrouping=3;}BL.mPosCurr=BK.ncp||0;if(BK.nnn!==undefined){BL.mNegFormat=BK.nnn;}if(BL.mNegFormat===undefined){BL.mNegFormat=3;}BL.mCurrency=((typeof BK.ncs==="string")&&BK.ncs)||"$";BL.mCustomFormat=((typeof BK.nfs==="string")&&BK.nfs)||"General";}function Ae(){this.mHasMetrics=this.dataProvider.getMetricsCount()>0;return this.mHasMetrics;}function AN(){return false;}function AA(){var BJ=this.dataProvider;var BK=BJ.getDimensionSize(true),BL=BJ.getDimensionSize(false);if(BK*BL===0){return false;}this.SetDataGroup(BJ.getDataGroup());this.SetSeriesByColumn(BJ.getSeriesByColumn());this.dataLabelStyle=BJ.getDataLabelType();this.mDataGroup=BJ.getDataGroup();return true;}function M(BL,BK,BJ){if(!!BL===false){return"";}var BN=0,BM=BL.length;BJ=BJ||false;if(BM<=0){return"";}if(BK===Ap.LLO_COMMON){BM--;}else{if(BK===Ap.LLO_SPECIFIC){BN=BM-1;}}if(BJ){return BL;}if(BL.length===1){return BL[0].trim();}return BL.slice(BN,BM).join(" ").trim();}function A2(BJ,BM){if(this.useSliceWindow){var BL=this.startSeries;if(BL!==-1){if(!(BJ>=BL&&BJ<=this.endSeries)){return false;}}var BK=this.startGroup;if(BK!==-1){if(!(BM>=BK&&BM<=this.endGroup)){return false;}}}return true;}mstrmojo.chart.DataSetImpl=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataSetImpl",mpFormatManager:null,mDataGroup:1,mStatus:AC.DTST_OKAY,mSeriesByColumn:true,mSeriesSplit:null,mDiscreteSeries:null,dataLabelStyle:-1,mHasMetrics:false,useSliceWindow:false,startSeries:-1,startGroup:-1,endSeries:-1,endGroup:-1,gp:null,init:function AZ(BJ){this.InitFromDataProvider(BJ);this.reset();},reset:function AK(){this.resetDataWindow();this.genericFormats=undefined;this.gp={};},InitFromDataProvider:function Az(BK){if(BK===null||BK===undefined){return false;}this.mStatus=AC.DTST_INVALID;this.dataProvider=BK.dataProvider;if(this.dataProvider===null||this.dataProvider.isValid===false){return false;}this.SetFormatManager(BK.formatManager);var BJ=AA.call(this);if(BJ===false){return false;}Ae.call(this);this.mStatus=AC.DTST_OKAY;return this.dataProvider.isValid;},IsInSlicedWindow:function Aj(BK,BJ){return A2.call(this,BK,BJ);},SetDataGroup:function b(BJ){if(BJ>=1){this.mDataGroup=BJ;}},GetSeriesCount:function AP(){return this.dataProvider.getSeriesCount();},GetClusterSeriesCount:function D(){var BJ=this.GetSeriesByShape().Bar.length;if(BJ===0){BJ=this.GetSeriesCount();}return BJ;},GetGroupCount:function Au(){return this.dataProvider.getGroupCount();},SeriesGroupIndexToRowColumnIndex:function s(BN,BK,BM,BJ){BM=BM!==undefined?BM:0;BJ=BJ||false;var BO,BL;BO=this.dataProvider.getGraphCell(BN,BK).getRowIndex(BM);BL=this.dataProvider.getGraphCell(BN,BK).getColIndex(BM);return{RowIndex:BO,ColumnIndex:BL};},ShouldTakeGroupCenter:function G(){return this.dataProvider.isClusteredBarSpecialCase();},GetClusterDataGroup:function Ax(){return this.dataProvider.getClusterDataGroup();},GetOneSliceRangeSimple:function U(BK,BN){var BJ,BL,BM,BO;BJ=false;BM=this.GetSeriesCount();BO=this.GetGroupCount();for(BL=0;BL<BM;++BL){BK.push(BL);}for(BL=0;BL<BO;++BL){BN.push(BL);}return BJ;},GetSeriesLabel:function AY(BO,BM,BL,BJ){BM=BM||0;BL=BL||Ap.LLO_NORMAL;BJ=BJ||false;var BN=this.dataProvider.getGraphCell(BO,0);var BK=BN?BN.getSeriesLabel(BM):[];return M.call(this,BK,BL,BJ);},GetGroupLabel:function Ay(BP,BK,BO,BM){BK=BK!==undefined?BK:0;BO=BO!==undefined?BO:Ap.LLO_NORMAL;BM=BM||false;var BN=this.dataProvider,BR=BN.lds.gmm.gmCtr,BL=BN.getSeriesCount(),BS,BQ,BJ;if(BR.clusteredBarSpecialCase){for(BS=0;BS<BL;BS++){BQ=BN.getGraphCell(BS,BP);if(!BQ.isFaked&&!!BQ){BJ=BQ.getGroupLabel(BK);break;}}}else{BQ=BN.getGraphCell(0,BP);if(!!BQ){BJ=BQ.getGroupLabel(BK);}}return M.call(this,BJ,BO,BM);},GetGroupLabelIdentities:function e(BK){var BJ=this.dataProvider.getGraphCell(0,BK);if(BJ){return BJ.getGroupLabelIdentities();}return[];},GetSeriesLabelIdentities:function A(BK){var BJ=this.dataProvider.getGraphCell(BK,0);if(BJ){return BJ.getSeriesLabelIdentities();}return[];},GetMergedLabel:function E(BJ,BK){return M.call(this,BJ,BK,false);},GetDataGroup:function o(){return this.mDataGroup;},GetData:function Aa(BM,BJ,BK){BK=BK!==undefined?BK:0;var BL=null;if(A2.call(this,BM,BJ)){BL=this.dataProvider.getGraphCell(BM,BJ).getData(BK);}if(!!this.hasMetricCell===false){if(!(BL===null||BL===undefined||isNaN(BL))&&typeof BL==="number"){this.hasMetricCell=true;}}if(isNaN(BL)===true){return null;}return BL;},GetSizeByData:function Y(BK,BJ){return this.dataProvider.getGraphCell(BK,BJ).getSizeByData();},GetColorByData:function K(BO,BM,BL,BN){BN=BN||false;BL=(BL!==undefined)?BL:0;var BK=this.dataProvider.getGraphCell(BO,BM);if(!!BK===false||BK.isFaked){return 0;}var BJ=BK.getColorByData(BL,false);if(!BN){if(BJ&&BJ.c1){BJ=BJ.c1;}else{if(BJ==="transparent"){BJ=0;}}}return BJ;},GetDefaultShapeFillColor:function(){var BK=this.dataProvider,BJ=BK.lds.gmm.gmCtr;return BJ.property.defaultsObj.shpFillClr;},GetPieCountAtOneDataPoint:function Av(BL,BJ){var BK=this.dataProvider.getGraphCell(BL,BJ);if(!!BK){if(BK.isFaked){BK=this.dataProvider.innerGetGraphCell(BL,BJ);}return BK.getSinglePieDPs().length;}return 0;},GetPieSliceCount:function H(BN,BJ,BK){var BL=this.dataProvider.getGraphCell(BN,BJ);if(!!BL){if(BL.isFaked){BL=this.dataProvider.innerGetGraphCell(BN,BJ);}var BM=BL.getSinglePieDPs();if(!!BM){return BM[BK].getSliceCount();}}return 0;},GetSinglePieTotal:function BF(BN,BJ,BK){var BL=this.dataProvider.getGraphCell(BN,BJ);if(!!BL){if(BL.isFaked){BL=this.dataProvider.innerGetGraphCell(BN,BJ);}var BM=BL.getSinglePieDPs();if(!!BM){return BM[BK].getTotalValue();}}return 100000;},GetPieSliceData:function Ai(BP,BJ,BK,BL){var BN=this.dataProvider.getGraphCell(BP,BJ);if(!!BN){if(BN.isFaked){BN=this.dataProvider.innerGetGraphCell(BP,BJ);}var BO=BN.getSinglePieDPs(),BM;if(!!BO){BM=BO[BK].getData(BL);if(!!this.hasMetricCell===false){if(!(BM===null||BM===undefined||isNaN(BM))&&typeof BM==="number"){this.hasMetricCell=true;}}return BM;}}return null;},GetPieSliceColorByData:function AU(BQ,BK,BM,BN,BL){BL=BL||false;var BO=this.dataProvider.getGraphCell(BQ,BK);if(!!BO){if(BO.isFaked){BO=this.dataProvider.innerGetGraphCell(BQ,BK);}var BP=BO.getSinglePieDPs();if(!!BP){var BJ=BP[BM].getColorByData(BN,false,false);if(!BL){if(BJ&&BJ.c1){BJ=BJ.c1;}else{if(BJ==="transparent"){BJ=0;}}}return BJ;}}return null;},GetPieSlicePercentage:function z(BO,BJ,BK,BL){var BM=this.dataProvider.getGraphCell(BO,BJ);if(!!BM){if(BM.isFaked){BM=this.dataProvider.innerGetGraphCell(BO,BJ);}var BN=BM.getSinglePieDPs();if(!!BN){return BN[BK].getPercentage(BL);}}return 0;},GetAngleNumber:function w(){return this.GetPieCountAtOneDataPoint(0,0);},IsGridPieAngleBreakX:function Af(){return this.dataProvider.isGridPieSplitAlongXAxis();},isBare:function l(BM){if(this.hasOwnProperty("hasMetricCell")){return !this.hasMetricCell;}var BQ,BO,BL,BJ,BP,BN=this.GetSeriesCount(),BR=this.GetGroupCount(),BK=1,BS=1;if(BM){BS=this.GetAngleNumber();}for(BQ=0;BQ<BN;BQ++){for(BO=0;BO<BR;BO++){for(BL=0;BL<BS;BL++){if(BM){BK=this.GetPieSliceCount(BQ,BO,BL);}for(BJ=0;BJ<BK;BJ++){if(BM){BP=this.GetPieSliceData(BQ,BO,BL,BJ);}else{BP=this.GetData(BQ,BO);}if(!(BP===null||BP===undefined||isNaN(BP))&&typeof BP==="number"){this.hasMetricCell=true;return false;}}}}}this.hasMetricCell=false;return true;},getValueAxisNumberFormat:function BC(BV,BX,BR){BX=BX||null;BR=BR||false;var BM,BO,BL,BZ,BY,BJ=this.mDataGroup,BW=this.dataProvider.isMetricOnRowAxis(),BK=this.mSeriesByColumn,Ba=this.dataProvider,BN=new Ao.ChartAdvFormat(),BQ=new Ao.ChartAdvFormat(),BU,BT,BS;BV.mCustomFormat="General";BV.mFormatType=Ar.General;BV.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null||this.dataProvider===undefined){return false;}BM=true;BO=true;if(BR===false&&BX&&BX.length>0){this.GetMetricNumberFormat(BN,BX[0]);BU=1;for(;BU<BX.length&&BM;BU++){BL=BX[BU];this.GetMetricNumberFormat(BQ,BL);if((BN.mFormatType!==BQ.mFormatType)||(BN.mFormatType===Ar.Currency&&(BN.mCustomFormat.localeCompare(BQ.mCustomFormat)!==0))){BM=false;}}if(BM){BV.reset(BN);}return true;}BL=0;BM=true;BO=true;if(BW){BZ=!BK?Ba.getSeriesCount():Ba.getGroupCount();BY=1;}else{BZ=1;BY=BK?Ba.getSeriesCount():Ba.getGroupCount();}var BP;for(BU=0;BU<BZ&&BM;++BU){for(BT=0;BT<BY;++BT){for(BS=0;BS<BJ;++BS){BP={S:BU,G:BT,D:BS};if(BK){BP.S=BT;BP.G=BU;}if(BO){if(BX&&BX.length){BL=this.getHostMetricIndex(BP.S,BP.G,BP.D);if(BL===null){continue;}if(BX.indexOf(BL)!==-1){this.getChartAdvFormatForOneCell(BP,BN,BR);BO=false;}}else{this.getChartAdvFormatForOneCell(BP,BN,BR);BO=false;}}else{BL=this.getHostMetricIndex(BP.S,BP.G,BP.D);if(BL===null){continue;}if(BX&&BX.indexOf(BL)!==-1){this.getChartAdvFormatForOneCell(BP,BQ,BR);if((BN.mFormatType!==BQ.mFormatType)||(BN.mFormatType===Ar.Currency&&(BN.mCustomFormat.localeCompare(BQ.mCustomFormat)!==0))){BM=false;}}}}}}if(BM){BV.reset(BN);}return true;},getGridDataFormat:function A6(BJ,BK,BL,BM){BJ.mCustomFormat="General";BJ.mFormatType=Ar.General;BJ.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null){return false;}this.getChartAdvFormatForOneCell({S:BK,G:BL,D:BM},BJ,true);return true;},getGridDataFormatForPie:function A0(BP,BQ){var BR=BQ.mSeriesId,BN=BQ.mGroupId,BO=BQ.angleByIndex,BK=BQ.sliceById,BM,BL,BJ;BP.mCustomFormat="General";BP.mFormatType=Ar.General;BP.mGrouping=0;if(!this.mHasMetrics||this.dataProvider===null){return false;}BM=this.dataProvider.getGraphCell(BR,BN).getSinglePieDPs();if(BM&&BM.length>0&&BO<BM.length){BM=BM[BO];if(BM){BL=BM.getSliceCount();if(BK<BL){BJ=BM.getMetric(BK);if(BJ&&BJ.fullNf){u.call(this,BJ.fullNf,BP);return true;}}}}return false;},getSizeByDataFormat:function Ag(BL,BM,BN){var BK=this.dataProvider.getGraphCell(BM,BN);if(BK){var BJ=BK.getSizeByMetricFormat();if(BJ.fullNf){u.call(this,BJ.fullNf,BL);}}},getChartAdvFormatForOneCell:function AR(BK,BM,BL){BK.D=BK.D||0;BL=BL||false;var BJ=this.dataProvider.getGraphCell(BK.S,BK.G).getFormat(BK.D);if(BJ.fullNf){u.call(this,BJ.fullNf,BM);}},SetFormatManager:function A8(BJ){this.mpFormatManager=BJ;},GetStatus:function L(){return this.mStatus;},SetSeriesByColumn:function f(BJ){this.mSeriesByColumn=BJ;},GetSeriesByColumn:function J(){return this.mSeriesByColumn;},getHostMetricIndex:function Z(BL,BK,BJ){BJ=BJ!==undefined?BJ:0;return this.dataProvider.getGraphCell(BL,BK).getMetricIndex(BJ);},GetSliceGroupRange:function An(){return{};},GetSliceFlag:function n(){return false;},EnableSlices:function Ak(){},GetThresholdFillColor:function Aq(BJ,BK,BL){return this.dataProvider.getGraphCell(BJ,BK).getThreshold(BL).Color;},GetZoomScale:function g(){return 1;},IsHeaderEmpty:function h(BJ){BJ=BJ||false;return false;},CountMetric:function AI(){return this.dataProvider.getMetricsCount();},isMetricBySeries:function Aw(){return((!this.dataProvider.isMetricOnRowAxis()&&this.mSeriesByColumn)||(this.dataProvider.isMetricOnRowAxis()&&!this.mSeriesByColumn));},GetOneMetricName:function AB(BJ){return this.dataProvider.getOneMetricName(BJ);},GetMetricNumberFormat:function A4(BL,BK){var BJ=this.dataProvider.getMetricFormat(BK,true);u.call(this,BJ.fullNf,BL);},GetPeakValuesAcrossSeries:function q(BK,BJ,BM,BL){},GetSeriesByShape:function Ah(BL){var BK=true;if(BK){this.seriesByShapeMap=this.seriesByShapeMap||{Tick:null,Line:null,Bar:null,Area:null,Circle:null,Square:null,Pie:null,All:null};var BM=BL||"All";var BJ=this.seriesByShapeMap[BM];if(BJ===null){if(BM==="All"){BJ=BJ=this.seriesByShapeMap[BM]=this.dataProvider.getSeriesByShape(BL);}else{BJ=this.seriesByShapeMap[BM]=this.dataProvider.getSeriesByShape(BL).contact();}}return BJ;}else{return this.dataProvider.getSeriesByShape(BL);}},GetShapeBySeries:function W(BJ){return this.dataProvider.getShapeBySeries(BJ);},GetShapeByCell:function y(BL,BJ){var BK=this.dataProvider.getGraphCell(BL,BJ);if(!!BK){return BK.getShape();}return -1;},GetValueAxisBySeries:function Al(BJ){return this.dataProvider.getValueAxisBySeries(BJ);},GetSeriesByValueAxis:function B(BK){if(this.mSeriesSplit===null){this.mSeriesSplit=[];}var BJ=this.mSeriesSplit;if(!!BJ[BK]===false){var BL=this.dataProvider.getSeriesByValueAxis(BK);BJ[BK]=BL.slice(0);}return BJ[BK];},GetShapesDistributionByValueAxis:function k(BO){if(BO===undefined){BO=2;}var BJ={},BN,BQ,BK,BL,BP=this.GetSeriesCount(),BM;for(BM=0;BM<BP;++BM){if(BO===0||BO===2){BJ.Primary=BJ.Primary||{};}if(BO===1||BO===2){BJ.Secondary=BJ.Secondary||{};}BL=this.GetValueAxisBySeries(BM);BK=this.GetShapeBySeries(BM);if(BL===BO||BO===2){BQ=BL===0?BJ.Primary:BJ.Secondary;switch(BK){case 0:BN="AREA";break;case 1:BN="BAR";break;case 2:BN="LINE";break;case 4:BN="CIRCLE";break;case 5:BN="RECTANGLE";break;case 6:BN="SQUARE";break;case 7:BN="TICK";break;case 10:BN="PIE";break;default:BN="Generic";break;}BQ[BN]=BQ[BN]||[];BQ[BN].push(BL);}}return BJ;},GetTrendLinePropertiesBySeries:function AQ(BJ){BJ=BJ||0;return{};},GetTrendLinesOfChart:function At(){return this.dataProvider.getTrendsOfChart();},GetTrendLineOfSeries:function N(BN){var BK=this.dataProvider.getTrendsOfChart(),BM,BJ=null,BL;if(BK&&BK.length){for(BL=0;BL<BK.length;++BL){BM=BK[BL];if(BM){if(BM.seriesId===BN){BJ=BM;break;}}}}return BJ;},GetReferenceLinesOfChart:function BE(){return this.dataProvider.getRefsOfChart();},GetReferenceLinesOfSeries:function S(BN){var BL=this.dataProvider.getRefsOfChart(),BM,BJ=[],BK;if(BL&&BL.length){for(BK=0;BK<BL.length;++BK){BM=BL[BK];if(BM){if(BM.seriesId===BN){BJ.push(BM);}}}}return BJ;},GetTextLabel:function AO(BM,BK,BJ,BL){BJ=BJ||0;BL=BL||0;return this.dataProvider.getTextLabel(BM,BK,BJ,BL);},GetBannerText:function AX(BL,BJ,BK){return"Demo Demo Demo Demo Demo Demo Demo Demo Demo Demo";},GetDiscreteSeries:function Ac(){if(this.mDiscreteSeries===null){this.mDiscreteSeries=this.dataProvider.GetDiscreteSeries().slice(0);}return this.mDiscreteSeries;},GetSeriesIndexByPriority:function BH(){return this.dataProvider.getPrioritizedSeriesIndex();},updateDataWindow:function As(BK){if(BK.PartialRendering===true){this.useSliceWindow=true;var BJ=BK.Series;if(BJ){this.startSeries=BJ.Min;this.startSeries=Math.max(0,this.startSeries);this.endSeries=BJ.Max;this.endSeries=Math.max(this.startSeries,this.endSeries);}var BL=BK.Group;if(BL){this.startGroup=BL.Min;this.startGroup=Math.max(0,this.startGroup);this.endGroup=BL.Max;this.endGroup=Math.max(this.startGroup,this.endGroup);}}},resetDataWindow:function BB(){this.useSliceWindow=false;this.startGroup=this.endGroup=-1;this.startSeries=this.endSeries=-1;},getBandNumber:function r(){return 3;},getTargetNumber:function BI(){return 1;},getBandsByGroup:function Q(BJ,BK){return{Divisions:{Ratios:null,Metrics:null},Descent:false,Colors:null};},getBandDivision:function AM(BJ,BK){return{Ratios:null,Metrics:null};},getDataLabelFontFormat:function R(){var BK=this.dataProvider.getDataLabelFontFormat(),BL={mFontAlignment:null,mFontStyle:BK.dlFntStyle,mFontAlpha:255,mFontBox:0,mFontName:BK.dlFntFml,mFontSize:BK.dlFntSz};var BJ=BK.dlFntClr;if(BJ!==null&&BJ!==undefined){BL.mFontColor=BJ;}return BL;},showHideItemsOnAxis:function AH(BK){var BJ,BL=this.dataProvider.getAxisFormats(BK,"showHide");if(BK==="x1"||BK==="x2"||BK==="X1"||BK==="X2"){BJ={axisBody:BL[C.X_AXIS_LINE_SHOW]||false,axisLabels:BL[C.X_AXIS_LABELS_SHOW]||false,majorGrids:BL[C.MAJOR_GRID_LINES_SHOW]||false,minorGrids:BL[C.MINOR_GRID_LINES_SHOW]||false};}else{if(BK==="y1"||BK==="y2"||BK==="Y1"||BK==="Y2"){BJ={axisBody:BL[C.Y_AXIS_LINE_SHOW]||false,axisLabels:BL[C.Y_AXIS_LABELS_SHOW]||false,majorGrids:BL[C.MAJOR_GRID_LINES_SHOW]||false,minorGrids:BL[C.MINOR_GRID_LINES_SHOW]||false};}}return BJ;},showSeriesDatalabel:function X(BP){if(this.dataLabelStyle===F){return false;}var BN,BM,BK,BJ=this.dataProvider.getGraphCell(BP,0,true);if(BJ===null||BJ.isFaked){BK=this.findCell(false,BP,0);BJ=this.dataProvider.getGraphCell(BP,BK,true);}if(BJ){BN=BJ.chtInfo&&BJ.chtInfo.isPie;if(BN){var BL,BO=BJ.getSinglePieDPs()[0].getSliceCount();for(BL=0;BL<BO;++BL){if(this.showPieSliceDatalabel(BP,0,0,BL)){return true;}}}else{BM=BJ.getFormattingProperties();return BM&&(!!BM[C.DATA_LABELS_SHOW]);}}return false;},showPieSliceDatalabel:function Ab(BO,BL,BK,BN){BK=BK||0;BN=BN||0;if(this.dataLabelStyle===F){return false;}var BM,BJ=this.dataProvider.getGraphCell(BO,BL,true).getSinglePieDPs();if(BJ&&BJ.length>0){BJ=BJ[BK];if(BJ){BM=BJ.getFormattingProperties(BN);return BM&&(!!BM[C.DATA_LABELS_SHOW]);}return false;}return false;},showPieDatalabels:function AD(){if(this.dataLabelStyle===F){return false;}if(this.gp.showDatalabels!==undefined){return this.gp.showDatalabels;}var BK,BJ,BL=this.GetAngleNumber(),BM=this.GetPieSliceCount(0,0,0);for(BJ=0;BJ<BL;++BJ){for(BK=0;BK<BM;++BK){if(this.showPieSliceDatalabel(0,0,BJ,BK)){this.gp.showDatalabels=true;return true;}}}this.gp.showDatalabels=false;return false;},showDatalabels:function j(){if(this.dataLabelStyle===F){return false;}if(this.gp.showDatalabels!==undefined){return this.gp.showDatalabels;}var BJ,BK=this.GetSeriesCount();for(BJ=0;BJ<BK;++BJ){if(this.showSeriesDatalabel(BJ)){this.gp.showDatalabels=true;return true;}}this.gp.showDatalabels=false;return false;},onlyBarDataLabelEnabled:function AG(){var BL,BM=this.GetSeriesCount(),BJ=0,BK;if(this.dataLabelStyle===F){return false;}for(BL=0;BL<BM;++BL){if(this.showSeriesDatalabel(BL)){BK=this.GetShapeBySeries(BL);if(BK===d._BAR){++BJ;}else{return false;}}}return(BJ>0);},getAllFormats:function AV(BL){this.genericFormats=this.genericFormats||{id:{},formats:{}};var BK=this.genericFormats;for(var BJ in BL){if(BK.id[BJ]!==BL[BJ]){return null;}}return BK.formats;},setAllFormats:function AV(BL,BJ){this.genericFormats=this.genericFormats||{id:{},formats:{}};var BK=this.genericFormats;BK.id=c.copy(BL);BK.formats=BJ;},getGenericLineFormat:function p(BS,BO,BR,BM,BP){var BL,BK,BQ;if(BP==="pieSliceBorder"){BR=BR||0;var BJ=this.dataProvider.getGraphCell(BS,BO).getSinglePieDPs();BL=BJ[BR];}else{BL=this.dataProvider.getGraphCell(BS,BO);if(!!BL){if(BL.isFaked){BL=this.dataProvider.innerGetGraphCell(BS,BO);}}}if(BL){BQ=BL.getFormattingProperties(BM);BK=AT(BQ,BP);}var BN;switch(BP){case"lineShape":BN=["shpLnClr","shpLnStyle","shpLnThk"];break;case"targetLine":break;case"lineMarker":BN=["lnMkBdrClr",C.LINE_MARKER_STYLE,C.LINE_MARKER_THICKNESS];break;case"shapeBorder":case"pieSliceBorder":BN=["shpBdrClr","shpBdrStyle","shpBdrThk"];break;default:BN=["shpBdrClr","shpBdrStyle","shpBdrThk"];break;}return A5.call(this,BK||BQ,BN);},getGenericFillFormat:function BG(BW,BR,BU,BO,BQ){var BM,BT;if(BQ==="pieSlice"){BU=BU||0;var BK=this.dataProvider.getGraphCell(BW,BR).getSinglePieDPs();BM=BK[BU];}else{BM=this.dataProvider.getGraphCell(BW,BR);}if(BM){BT=BM.getFormattingProperties(BO);}BT=BT||{};var BP;switch(BQ){case"pieSlice":case"shape":BP=["shpFillClr","shpFillStyle","shpFillTrans","shpFillEff"];break;case"lineMarker":BP=["lnMkClr"];break;default:BP=["shpFillClr","shpFillStyle","shpFillTrans","shpFillEff"];break;}var BX={mSimpleColor:null,mAlpha:255,mFillType:0};if(BP[1]&&BT[BP[1]]!==undefined){BX.mFillType=BT[BP[1]];}if(BP[2]&&BT[BP[2]]!==undefined){BX.mAlpha=Math.round(255*BT[BP[2]]/100);}var BN=BT[BP[0]];if(BN!==null&&BN!==undefined){var BL=0,BV=14;var BJ=14,BS=9;if(typeof BN==="string"&&BN==="transparent"){BX.mAlpha=0;return BX;}switch(BX.mFillType){case BL:BX.mSimpleColor=BN;break;case BV:if(typeof BN==="object"){BX.mFillGradient={startGraphColor:BN.c1,endGraphColor:BN.c2,angle:1-BN.or,horizontalOffset:50,verticalOffset:50,gradientType:(BQ==="pieSlice"?BS:BJ),endAlpha:255,intermediateColors:[],style:1};}break;default:BX.mFillType=BL;if(typeof BN==="number"){BX.mSimpleColor=BN;}break;}}return BX;},getMarkerShapeInfoAt:function BA(BO,BN){var BL,BM,BP=1,BK=false,BJ=0;BL=this.dataProvider.getGraphCell(BO,BN);if(BL&&!!BL.isFaked===false){BM=BL.getFormattingProperties();BK=BM.lnMkShw;BJ=BM.lnMkShp;BP=BM.lnMkSz;}return{Show:BK,Size:BP,Shape:BJ};},isLogScaleAxis:function t(BJ){return !!this.dataProvider.isLogScale(BJ);},isGradientABL:function AF(){return this.dataProvider.isGradientABL();},getAxisOriginFormat:function AE(BL){var BK,BM=this.dataProvider.getAxisFormats(BL,"axisOrigin");if(BL==="x1"||BL==="x2"||BL==="X1"||BL==="X2"){BK=["xAxOriLnClr","xAxOriLnStyle","xAxOriLnThk","xAxOriLnShw"];}else{if(BL==="y1"||BL==="y2"||BL==="Y1"||BL==="Y2"){BK=["yAxOriLnClr","yAxOriLnStyle","yAxOriLnThk","yAxOriLnShw"];}}var BJ=A5.call(this,BM,BK);BJ.show=BM[BK[3]];BJ.number=this.dataProvider.getAxisOriginValue(BL);return BJ;},getAxisTickFormat:function A3(BK,BL){var BJ,BM=this.dataProvider.getAxisFormats(BK,BL);if(BL==="majorTick"){BJ=["majorGridLnClr","majorGridLnStyle","majorGridLnThk"];}else{BJ=["minorGridLnClr","minorGridLnStyle","minorGridLnThk"];}return A5.call(this,BM,BJ);},getAxisLineFormat:function A1(BL){var BK,BJ=this.dataProvider.getAxisFormats(BL,"body");if(BL==="x1"||BL==="x2"||BL==="X1"||BL==="X2"){BK=[C.X_AXIS_LINE_COLOR,C.X_AXIS_LINE_STYLE,C.X_AXIS_LINE_THICKNESS];}else{if(BL==="y1"||BL==="y2"||BL==="Y1"||BL==="Y2"){BK=[C.Y_AXIS_LINE_COLOR,C.Y_AXIS_LINE_STYLE,C.Y_AXIS_LINE_THICKNESS];}}return A5.call(this,BJ,BK);},findCell:function Ad(BP,BL,BO){BO=BO||0;var BN,BM,BJ,BK;if(BP===false){BN=this.dataProvider.getGroupCount();}else{BN=this.dataProvider.getSeriesCount();}for(BM=0;BM<BN;BM++){if(BP===false){BJ=this.dataProvider.getGraphCell(BL,BM);}else{BJ=this.dataProvider.getGraphCell(BM,BL);}if(!!BJ===false||BJ.isFaked){continue;}BK=BJ.isIndividualFormatted();if(BO===0){if(BK===false){return BM;}}else{if(BK){return BM;}}}return -1;},getUniformAxis:function AL(BJ,BK){return null;},finalize:function A9(){this.dataProvider.resetDPCache();},allowDatalabelOverlap:function BD(){var BJ=this.dataProvider;return BJ&&BJ.allowDatalabelOverlap();},getAxisLabelFontFormat:function a(BL){var BK,BM,BJ,BN=this.dataProvider.getAxisFormats(BL,"axisLabel");if(BL==="x1"||BL==="x2"||BL==="X1"||BL==="X2"){BK=[C.X_AXIS_LABELS_FONT_SIZE,C.X_AXIS_LABELS_FONT_FAMILY,C.X_AXIS_LABELS_FONT_STYLE,C.X_AXIS_LABELS_ROTATION,C.X_AXIS_LABELS_FONT_COLOR];}else{if(BL==="y1"||BL==="y2"||BL==="Y1"||BL==="Y2"){BK=[C.Y_AXIS_LABELS_FONT_SIZE,C.Y_AXIS_LABELS_FONT_FAMILY,C.Y_AXIS_LABELS_FONT_STYLE,C.Y_AXIS_LABELS_ROTATION,C.Y_AXIS_LABELS_FONT_COLOR];}}BM=BN[BK[3]];if(BM===-1){BM=0;}BJ=BN[BK[4]];return{mFontSize:parseInt(BN[BK[0]],10),mFontName:BN[BK[1]],mFontStyle:BN[BK[2]],mFontRotation:BM,mFontAlignment:1,mFontBox:0,mFontColor:BJ===undefined?null:BJ,mFontAlpha:255};},refresh:function Am(BJ){if(BJ){this.dataProvider=BJ;this.reset();}},getForecastCount:function V(){var BJ=this.dataProvider;return(BJ.fwdSteps+BJ.bwdSteps);},saveShownLabels:function O(BO){var BN=this.dataProvider,BM=BO.mLabelList,BJ=BM&&BM.length,BK=[],BL;for(BL=0;BL<BJ;BL++){if(BM[BL].mIsShown){BK.push(BM[BL].mNumber);}}BN.backupTicks=BN.backupTicks||{};BN.backupTicks[BO.Key]=BK;},fetchShownLabels:function x(BO){var BP=this.dataProvider,BL=BP.lds.gmm,BN=BL.gmCtr,BK,BJ;var BM=function(){var BQ,BR,BS;BQ=BN.mapFromChartToLDSIndex(this.rowIndex,this.colIndex);BR=BO?BL.getLocalDataSet(BQ.r,0):BL.getLocalDataSet(0,BQ.c);BS=BR.generateDataProvider();return BS[BQ.dpIdx];};BK=BM.call(BP);BJ=BK.backupTicks;return BJ;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphDataLineType");var S=mstrmojo.chart,D=S.common;var N=mstrmojo.chart.model,V=N.enums,H=V.EnumDSSGraphType,I=V.EnumDSSGraphProperty,A=V.EnumDSSGraphRegressionType,U=V.EnumDSSGraphDataTextPosition,F=V.EnumDSSGraphDataTextShowType,J=V.EnumDSSGraphObject,R=V.EnumVariantBool,W=V.EnumDSSExtraGraphProperty,B=V.EnumDSSGraphDataLineType;function C(Z,Y,X){var a;if(Y>=J.DssGraphX2Body&&Y<=J.DssGraphX2Title){Y-=99899;}if(Y===J.DssGraphTrendLine){Y=J.DssGraphLinrLine;a=this.GetGraphProperty(I.DssGraphSDRegressionType,J.DssGraphRiser,Z,-3);if(a){switch(a){case I.DssGraphShowSDLinrLine:case A.DssGraphRegressionNone:Y=J.DssGraphLinrLine;break;case I.DssGraphShowSDLinrLog:Y=J.DssGraphLinrLog;break;case I.DssGraphShowSDLinrNPoly:Y=J.DssGraphLinrNPoly;break;case I.DssGraphShowSDLinrExp:Y=J.DssGraphLinrExp;break;case I.DssGraphShowSDMOVALine:Y=J.DssGraphMovAvgLine;break;case I.DssGraphShowSDLinrNatLog:Y=J.DssGraphLinrNatLog;break;case I.DssGraphShowSDSTDDLine:Y=J.DssGraphStdDevLine;break;case I.DssGraphShowSDMeanLine:Y=J.DssGraphMeanLine;break;}}}switch(Y){case J.DssGraphFrame:case J.DssGraphPieFeelerLine:case J.DssGraphErrorBar:case J.DssGraphPieGroupLabel:case J.DssGraphDataTextConnectLine:case J.DssGraphGaugeBorder:case J.DssGraphGaugeNeedleBase:case J.DssGraphGaugeTitle:case J.DssGraphGauge:case J.DssGraphDataTextStackTotal:Z=-3;break;default:break;}switch(X){case W.DssGraphInfoAutosizeHorizontal:case W.DssGraphInfoAutosizeVertical:case W.DssGraphInfoSuppressLastLevel:case W.DssGraphInfoIncludeSubtotal:case W.DssGraphInfoNestedLabel:case W.DssGraphInfoNestedLabelBracket:case W.DssGraphInfoRecalculateChartFrame:case W.DssGraphInfoRecalculateLegend:Y=-3;break;case I.DssGraphSeriesByColumn:Y=-3;break;case I.DssGraphShow2DAxisLabels:if(this.mGraphType===H.DssGraphTypeGauge){Z=-3;}break;case I.DssGraphSDShowDataText:case I.DssGraphSDRegressionType:case I.DssGraphShowSDLinrCorr:case I.DssGraphShowSDLinrFormula:case I.DssGraphCurveColorAsSeries:case I.DssGraphShowStepLine:case I.DssGraphSDMarkerSize:case I.DssGraphShowMarker:case I.DssGraphShowLBLFeeler:case I.DssGraphShowFeeler:case I.DssGraphDetachSlice:case I.DssGraphDeleteSlice:case I.DssGraph2DSDSplitY:case I.DssGraphShowSDLine:case I.DssGraphShowLine:case I.DssGraphSDShowToolTip:case I.DssGraphSDToolTip:case I.DssGraphGauge1Show:case I.DssGraphGauge2Show:case I.DssGraphGauge3Show:case I.DssGraphGauge4Show:case I.DssGraphGauge5Show:case I.DssGraphGauge1Min:case I.DssGraphGauge2Min:case I.DssGraphGauge3Min:case I.DssGraphGauge4Min:case I.DssGraphGauge5Min:case I.DssGraphGauge1Max:case I.DssGraphGauge2Max:case I.DssGraphGauge3Max:case I.DssGraphGauge4Max:case I.DssGraphGauge5Max:Y=J.DssGraphRiser;break;case I.DssGraph2DAngle:case I.DssGraph2DDepth:case I.DssGraphShowDataText:case I.DssGraphMarkerLayout:case I.DssGraphLegendLock:case I.DssGraphLegendBox:case I.DssGraphDepthMode:case I.DssGraphCurvedLines:case I.DssGraphGroupSpacing:case I.DssGraphRiserWidth:case I.DssGraphACMColorModel:case I.DssGraphAxisHasErrorBar:case I.DssGraphSplitYPosition:case I.DssGraphAxisHasMiddleValue:case I.DssGraphMiddleValue:case I.DssGraphConnectStackBars:case I.DssGraphShowDivBiPolar:case I.DssGraphGaugeRangeStartAngleValue:case I.DssGraphGaugeRangeStopAngleValue:case I.DssGraphGaugeBorderThicknessValue:case I.DssGraphGaugeStyleValue:case I.DssGraphGaugeShowNeedle:case I.DssGraphGaugeFancyBox:case I.DssGraphGaugeNeedleStyleValue:case I.DssGraphGaugeBorderStyleValue:case I.DssGraphPiesPerRowValue:case I.DssGraphTailShape:case I.DssGraphOBPMedian:case I.DssGraphOBPStem:case I.DssGraphOBPTail:case I.DssGraphGaugeThickness:Z=-3;break;case I.DssGraphSDMOVAFactor:case I.DssGraphPieDataValueLoc:case I.DssGraphPieDataLabelLoc:Y=J.DssGraphRiser;Z=-3;break;case I.DssGraphGradient:X=I.DssGraphAreaSFX;break;case I.DssGraphFrameLocationNEW:X=I.DssGraphFrameLocation;break;case I.DssGraph3DRowTitleLocationNEW:X=I.DssGraph3DRowTitleLocation;break;case I.DssGraph3DColTitleLocationNEW:X=I.DssGraph3DColTitleLocation;break;case I.DssGraphLineAlpha:case I.DssGraphLineColor:case I.DssGraphLinePattern:case I.DssGraphLineWidth:if(this.mGraphType===H.DssGraphTypeBoxPlot&&Y===J.DssGraphRiser){Y=J.DssGraphOBPBox;}break;default:break;}return{ObjectId:Y,SeriesId:Z,PropertyId:X};}function M(Y){var Z,X,a;Z=((Y>>8)-((Y>>16)<<8))<<8;X=(Y-((Y>>8)<<8))<<8;a=((Y>>16)-((Y>>24)<<16))<<8;return(X>>8)*65536+(Z>>8)*256+(a>>8);}function O(Y){var X=-1;switch(Y){case J.DssGraphX1Body:X=J.DssGraphUserLine3;break;case J.DssGraphY1RightBody:case J.DssGraphY1Body:X=J.DssGraphUserLine1;break;case J.DssGraphY2Body:X=J.DssGraphUserLine2;break;case J.DssGraphY3Body:X=J.DssGraphUserLine3;break;case J.DssGraphY4Body:X=J.DssGraphUserLine4;break;case J.DssGraphZBody:X=J.DssGraphUserLine4;break;}return X;}mstrmojo.chart.FormatManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatManager",mpTemplate:null,mIsValid:false,mpGraphPropertyPool:null,mKey:"",mHasMetrics:true,mIsUseGraphProperties:true,mGraphType:H.DssGraphTypeVertical_Bar_Side_by_Side,init:function P(X){this.mIsValid=this.ConsumeJSON(X);},ConsumeJSON:function Q(X){if(X&&X.GraphPropertyMap){this.mpGraphPropertyPool=X.GraphPropertyMap;}else{this.mpGraphPropertyPool=new D.MapStructure();}return true;},IsValid:function G(){return this.mIsValid;},GetGraphProperty:function E(b,f,j,Z){var Y=this.mGraphType,d=null,c,h,e,a,X,g;if(!this.mIsUseGraphProperties){return d;}var k=this.mpGraphPropertyPool;c=f;h=C.call(this,j,f,b);j=h.SeriesId;f=h.ObjectId;b=h.PropertyId;if(!this.mpGraphPropertyPool){return d;}if(b===W.DssGraphMatrixInitedDataLabelRotation||b===W.DSSGraphMatrixDataLabelRotated){h=k.find([j,-3,b]);if(h!==undefined){return h;}}if(b>W.DssGraphTypeRingPie&&b<=W.DssGraphInfoReserved){return d;}switch(b){case W.DssGraphInfoAutosizeHorizontal:case W.DssGraphInfoAutosizeVertical:case W.DssGraphInfoSuppressLastLevel:case W.DssGraphInfoIncludeSubtotal:case W.DssGraphInfoSeriesByColumn:case W.DssGraphInfoNestedLabel:case W.DssGraphInfoNestedLabelBracket:case W.DssGraphInfoRecalculateChartFrame:case W.DssGraphInfoRecalculateLegend:case W.DssGraphInfoUseMaxCategoriesAsMin:case W.DssGraphInfoUseZerosForGraphNulls:h=k.find([j,-3,b-W.DssGraphInfoReserved]);if(h!==undefined){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphShowTitle:case I.DssGraphLockFontSize:case I.DssGraphShowSubtitle:case I.DssGraphShowfootnote:case I.DssGraphShowLegendText:case I.DssGraphCurvedLines:case I.DssGraphDepthMode:case I.DssGraphShow2DY1Title:case I.DssGraphShow2DY2Title:case I.DssGraphShow2DXTitle:case I.DssGraphEnhancedSeriesEffect:case I.DssGraphAxisHasErrorBar:case I.DssGraphAutoArrange:case I.DssGraphAxisHasMiddleValue:case I.DssGraphConnectStackBars:case I.DssGraph2DOrdSpaceMode:case I.DssGraphShowStepLine:case I.DssGraph2DSplitYAutomatic:case I.DssGraphFontAntiAlias:case I.DssGraphShowLBLPie:case I.DssGraphShowLBLRing:case I.DssGraphDeleteSlice:case I.DssGraph2DPie:case I.DssGraphDataTextShowConnectLine:case I.DssGraphShowSDLine:case I.DssGraphGaugeShowNeedle:case I.DssGraphSDShowToolTip:case I.DssGraphShow3DLineToLWall:case I.DssGraphShow3DLineToRWall:case I.DssGraphShow3DScatterLine:case I.DssGraphShow3DLineToFloor:case I.DssGraphSeriesByColumn:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphShowDivBiPolar:case I.DssGraphShowSDLinrCorr:case I.DssGraphShowSDLinrFormula:case I.DssGraphCurveColorAsSeries:case I.DssGraph2DSDSplitY:h=k.find([-3,j,f,b]);if(h!==undefined){d=(h!==R.VARIANT_FALSE);}else{d=0;}break;case I.DssGraphFontAlign:case I.DssGraphFontRotation:case I.DssGraphFontBox:case I.DssGraphAreaAlpha:case I.DssGraphLinePattern:case I.DssGraphLineAlpha:case I.DssGraphLineWidth:case I.DssGraphFontStyle:case I.DssGraphFontAlpha:case I.DssGraphSDRiserType:case I.DssGraphSDPolyFactor:case I.DssGraphSDMOVAFactor:case I.DssGraphRiserWidth:case I.DssGraphACMColorModel:case I.DssGraphPiesPerRowValue:case I.DssGraphPieRotationValue:case I.DssGraphSplitYPosition:case I.DssGraphMiddleValue:case I.DssGraphPieHoleSizeValue:case I.DssGraphPieDepthValue:case I.DssGraphPieTiltValue:case I.DssGraphPieDataValueLoc:case I.DssGraphPieDataLabelLoc:case I.DssGraphDetachSlice:case I.DssGraph2DAngle:case I.DssGraph2DDepth:case I.DssGraphMarkerLayout:case I.DssGraphLegendLock:case I.DssGraphLegendBox:case I.DssGraphMarkerSize:case I.DssGraphGaugeRangeStartAngleValue:case I.DssGraphGaugeRangeStopAngleValue:case I.DssGraphGaugeBorderThicknessValue:case I.DssGraphGaugeStyleValue:case I.DssGraphGaugeFancyBox:case I.DssGraphGaugeNeedleStyleValue:case I.DssGraphGaugeBorderStyleValue:case I.DssGraphTailShape:case I.DssGraphGaugeThickness:h=k.find([-3,j,f,b]);if(h!==undefined){d=h;}break;case I.DssGraphGroupSpacing:h=k.find([-3,j,f,b]);if(h!==undefined){d=(h%127);}break;case I.DssGraphShowDataText:h=k.find([-3,-3,f,b]);if(h!==undefined){d=h;}break;case I.DssGraphShowLBLFeeler:h=k.find([-3,j===-3?0:j,f,b]);if(h!==undefined){d=h;}break;case I.DssGraphShowFeeler:h=k.find([-3,j===-3?0:j,f,b]);if(h!==undefined){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphAreaSFX:h=k.find([-3,j,f,b]);if(h){e=h.split(",");d={StartColor:parseInt(M.call(this,e[0]),16),EndColor:parseInt(M.call(this,e[1]),16),gradientType:parseInt(e[2]),angle:parseInt(e[3]),horizontalOffset:parseInt(e[4]),verticalOffset:parseInt(e[5])};}break;case I.DssGraphAreaCustomBevelEffect:h=k.find([-3,j,f,b]);if(h){e=h.split(",");d={type:parseInt(e[0]),lightAngle:parseInt(e[1]),intensity:parseInt(e[2]),depth:parseInt(e[3])};}break;case I.DssGraphAxisDataTextPlace:if((Y>=H.DssGraphTypeX_Y_Scatter&&Y<=H.DssGraphTypeDualAxis_Polar_Coordinate_Chart)||Y===H.DssGraphTypeBubble||Y===H.DssGraphTypeBubble_DualAxis||Y===H.DssGraphTypeBubble_With_Labels||Y===H.DssGraphTypeBubble_DualAxis_With_Labels||Y===H.DssGraphTypeD3_X_Y_Z_Scatter_Chart||Y===H.DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart){X=k.find([-3,-3,f,I.DssGraph2DPlaceX]);g=k.find([-3,-3,f,I.DssGraph2DPlaceY1]);if(X&&g){switch(X){case U.DssGraphDTPositionOutMin:if(g===U.DssGraphDTPositionCenter){a=U.DssGraphDTPositionInMin;}break;case U.DssGraphDTPositionOutMax:if(g===U.DssGraphDTPositionCenter){a=U.DssGraphDTPositionOutMin;}break;case U.DssGraphDTPositionCenter:switch(g){case U.DssGraphDTPositionCenter:a=U.DssGraphDTPositionCenter;break;case U.DssGraphDTPositionOutMin:a=U.DssGraphDTPositionOutMax;break;case U.DssGraphDTPositionOutMax:a=U.DssGraphDTPositionInMax;break;}break;}d=a;}}else{g=k.find([-3,-3,f,I.DssGraph2DPlaceY1]);if(g!==undefined){d=g;}}break;case I.DssGraphShowLine:if(Y===H.DssGraphTypeBubble||Y===H.DssGraphTypeBubble_DualAxis||Y===H.DssGraphTypeBubble_With_Labels||Y===H.DssGraphTypeBubble_DualAxis_With_Labels){h=k.find([-3,j===-3?0:j,f,I.DssGraphShowSDLine]);if(h!==undefined){d=(h!==R.VARIANT_FALSE);}}else{h=k.find([-3,j===-3?0:j,f,I.DssGraphShowSDDataLineType]);if(h===undefined){h=k.find([-3,f,I.DssGraphShowSDDataLineType]);}if(h!==undefined){d=(h&B.DssGraphDataLineLine)?true:false;}}break;case I.DssGraphShowMarker:h=k.find([-3,j===-3?0:j,f,I.DssGraphShowSDDataLineType]);if(h===undefined){h=k.find([-3,f,I.DssGraphShowSDDataLineType]);}if(h!==undefined){d=(h&B.DssGraphDataLineMarker)?true:false;}break;case I.DssGraphSDMarkerSize:h=k.find([-3,j===-3?0:j,f,I.DssGraphSDMarkerSize]);if(h===undefined){h=k.find([-3,f,I.DssGraphMarkerSize]);}if(h!==undefined){d=h;}break;case I.DssGraphSDMarkerShape:h=k.find([-3,j===-3?0:j,f,I.DssGraphMarkerShape]);if(h===undefined){h=k.find([-3,f,I.DssGraphMarkerShape]);}if(h!==undefined){d=h;}break;case I.DssGraphShowDataLabel:h=k.find([-3,-3,f,-I.DssGraphShowDataText]);if(h!==undefined){d=(h&F.DssGraphDataTextLabel)?true:false;}break;case I.DssGraphShowDataValue:h=k.find([-3,-3,f,-I.DssGraphShowDataText]);if(h!==undefined){d=(h&F.DssGraphDataTextValue)?true:false;}break;case I.DssGraphShowTotalValue:h=k.find([-3,-3,f,-I.DssGraphShowDataText]);if(h!==undefined){d=(h&F.DssGraphDataTextTotal)?true:false;}break;case I.DssGraphShowDVPercent:h=k.find([-3,-3,f,-I.DssGraphShowDataText]);if(h!==undefined){d=(h&F.DssGraphDataTextPercent)?true:false;}break;case I.DssGraphLineColor:case I.DssGraphAreaColor:case I.DssGraphFontColor:case I.DssGraphSeriesColor:h=k.find([-3,j,f,b]);if(h){d=M.call(this,parseInt(h,16));}break;case I.DssGraphFontName:h=k.find([-3,j,f,b]);if(h){d=h;}break;case -I.DssGraphFormatDataTextAdv:case I.DssGraphTextContent:case I.DssGraphSDToolTip:h=k.find([-3,j,f,b]);if(h){d=h;}break;case I.DssGraphFontSize100:h=k.find([-3,j,f,I.DssGraphFontSize]);if(h!==undefined){d=h*100;}break;case I.DssGraphFillEffect:h=k.find([j,f,b]);if(h){d=parseInt(h);}break;case I.DssGraphSDRegressionType:h=k.find([-3,j,f,I.DssGraphShowSDLinrLog]);if(h&&(h!==R.VARIANT_FALSE)){d=A.DssGraphRegressionLog;break;}h=k.find([-3,j,f,I.DssGraphShowSDLinrNPoly]);if(h&&(h!==R.VARIANT_FALSE)){d=A.DssGraphRegressionPoly;break;}h=k.find([-3,j,f,I.DssGraphShowSDLinrExp]);if(h&&(h!==R.VARIANT_FALSE)){d=A.DssGraphRegressionExp;break;}h=k.find([-3,j,f,I.DssGraphShowSDMOVALine]);if(h&&(h!==R.VARIANT_FALSE)){d=A.DssGraphRegressionMA;break;}h=k.find([-3,j,f,I.DssGraphShowSDLinrLine]);if(h&&(h!==R.VARIANT_FALSE)){d=A.DssGraphRegressionLinear;break;}h=k.find([-3,j,f,I.DssGraphShowSDLinrNatLog]);if(h&&(h!==R.VARIANT_FALSE)){d=A.DssGraphRegressionNatLog;break;}h=k.find([-3,j,f,I.DssGraphShowSDSTDDLine]);if(h&&(h!==R.VARIANT_FALSE)){d=A.DssGraphRegressionSTDD;break;}h=k.find([-3,j,f,I.DssGraphShowSDMeanLine]);if(h&&(h!==R.VARIANT_FALSE)){d=A.DssGraphRegressionMean;break;}d=A.DssGraphRegressionNone;break;case I.DssGraphShow2DAxisLabels:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisMajor:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisMinor:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphShow2DAxisLine:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraph2ExcludeZero:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleUseMax:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleUseMin:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleMax:h=k.find([-3,j,f,b]);if(h!==undefined){d=parseFloat(d);}break;case I.DssGraph2ScaleMin:h=k.find([-3,j,f,b]);if(h!==undefined){d=parseFloat(d);}break;case I.DssGraph2LogScale:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphManualMajor:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphCountMajor:h=k.find([-3,j,f,b]);if(h!==undefined){d=parseFloat(d);}break;case I.DssGraph2ScaleEndMax:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraph2ScaleEndMin:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphAxisNumberFormat:h=k.find([-3,j,f,b]);if(h){d=h;}break;case I.DssGraphSDShowDataText:h=k.find([-3,j,f,b]);if(!h){d=false;}else{d=h;}break;case I.DssGraph2ScaleDirection:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphAxisShowUserLine:case I.DssGraphAxisUserLineValue:c=O.call(this,c);h=k.find([-3,j,c,b]);if(h!==undefined){d=h;}break;case I.DssGraphAxisAutoFit:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphOffScaleType:h=k.find([-3,j,f,b]);if(h!==undefined){d=parseInt(d);}break;case I.DssGraphStyleMajor:h=k.find([-3,j,f,b]);if(h!==undefined){d=parseInt(d);}break;case I.DssGraphStyleMinor:h=k.find([-3,j,f,b]);if(h!==undefined){d=parseInt(d);}break;case I.DssGraphCountMinor:h=k.find([-3,j,f,b]);if(h!==undefined){d=parseFloat(d);}break;case I.DssGraphManualMinor:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraph2DSide:h=k.find([-3,j,f,b]);if(h!==undefined){d=h;}break;case I.DssGraphAxisStagger:h=k.find([-3,j,f,b]);if(h){d=(h!==R.VARIANT_FALSE);}break;case I.DssGraphAxisScaleFreq:h=k.find([-3,j,f,b]);if(h!==undefined){d=parseInt(d);}break;default:d=undefined;break;}return d;},PutGraphProperty:function L(d,X,c,Y,a){var b;if(!this.mIsUseGraphProperties){return ;}var Z=this.mpGraphPropertyPool;if(!Z){return ;}b=C.call(this,c,X,d);c=b.SeriesId;X=b.ObjectId;d=b.PropertyId;if(d===W.DssGraphMatrixInitedDataLabelRotation||d===W.DSSGraphMatrixDataLabelRotated){Z.replace([c,-3,d],a);}},SetGraphType:function K(X){this.mGraphType=X;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.JSONUtil","mstrmojo.chart.enums.EnumInstructionName");var D=mstrmojo.chart,H=mstrmojo.chart.enums,K=H.EnumInstructionName,F=D.JSONUtil.prototype;mstrmojo.chart.JSONUnit=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUnit",mIsAnimated:false,mIsLastFrame:true,mIsFirstPass:true,mIsFirstFrameSet:false,mIsLastFrameSet:false,mInstructionList:[],mCurrentIndex:-1,init:function L(N){this.mInstructionList=[];if(N){this.mIsAnimated=N.mIsAnimated||false;this.mIsLastFrame=N.mIsLastFrame||false;}},AppendToJSONObject:function I(N){N.IsAnimated=this.mIsAnimated?1:0;if(this.mInstructionList.length>0){F.AppendCompoundPointerVectorToJSONObject("InstructionList",this.mInstructionList,N);}},AddInstruction:function J(O,N){if(O===undefined){O=K.JSONInsUndefined;}if(N===undefined){N=null;}++this.mCurrentIndex;if(this.mIsFirstPass){this.mInstructionList.push(new D.JSONInstruction({mInstructionName:O,mpOriginalAddress:N}));}else{this.mInstructionList[this.mCurrentIndex].SetSecondPass();}this.mInstructionList[this.mCurrentIndex].SetLastFrame(this.mIsLastFrame);return this.mInstructionList[this.mCurrentIndex];},SetAnimated:function A(N){this.mIsAnimated=N;},IsAnimated:function M(){return this.mIsAnimated;},IsValid:function E(){if(this.mInstructionList.length===0){return false;}if(this.mIsAnimated){return(this.mIsFirstFrameSet&&this.mIsLastFrameSet);}return true;},SetToFirstFrame:function G(){this.mIsFirstFrameSet=true;this.mIsLastFrame=false;this.mCurrentIndex=-1;if(this.mIsLastFrameSet){this.mIsFirstPass=false;}},SetToLastFrame:function C(){this.mIsLastFrameSet=true;this.mIsLastFrame=true;this.mCurrentIndex=-1;if(this.mIsFirstFrameSet){this.mIsFirstPass=false;}},CalculateFormatIndex:function B(O){var N,P;N=this.mInstructionList.length;for(P=0;P<N;++P){this.mInstructionList[P].CalculateFormatIndex(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatLine=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatLine",mLineStyle:0,mAlpha:0,mLineThickness:0,mLineThicknessPt:0,mLineColor:null,mGradient:null,init:function D(H){H.mFormatType=A.FMT_LINE;this._super(H);E.copyProps(["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","id"],H,this);this.mGradient={};var G=this.mGradient,J=H.mGradient;G.range={start:{x:0,y:0},end:{x:0,y:0}};if(J){G.valid=H.mGradient.valid||false;G.angle=H.mGradient.angle||0;G.endAlpha=H.mGradient.endAlpha||255;G.style=H.mGradient.style||1;G.colors=H.mGradient.colors.slice(0)||[];var I=J.range;if(H&&I!==undefined){if(I.start!==undefined){G.range.start.x=I.start.x;G.range.start.y=I.start.y;}if(I.end!==undefined){G.range.end.x=I.end.x;G.range.end.y=I.end.y;}}}else{G.valid=false;G.angle=0;G.endAlpha=255;G.style=1;G.colors=[];G.range={start:{x:0,y:0},end:{x:0,y:0}};}},AppendToJSONObject:function F(G){var I=this.mLineColor,H=this.mGradient;G.push({FormatType:this.mFormatType,Style:this.mLineStyle,Alpha:this.mAlpha,Thickness:this.mLineThickness,ThicknessPt:this.mLineThicknessPt,Color:{R:I.mR,G:I.mG,B:I.mB},Gradient:{Valid:H.valid,Angle:H.angle,EndAlpha:H.endAlpha,Style:H.style,Colors:H.colors.slice(0),Start:H.range.start,End:H.range.end}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatFont=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFont",mFontAlignment:0,mFontStyle:0,mFontRotation:0,mFontBox:0,mFontColor:null,mFontAlpha:0,mFontName:0,mFontSize:0,init:function D(G){G.mFormatType=A.FMT_FONT;this._super(G);E.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize","id"],G,this);},AppendToJSONObject:function F(H){var G=this.mFontColor;H.push({FormatType:this.mFormatType,Alignment:this.mFontAlignment,Style:this.mFontStyle,Rotation:this.mFontRotation,Box:this.mFontBox,Alpha:this.mFontAlpha,Name:this.mFontName,Size:this.mFontSize,Color:{R:G.mR,G:G.mG,B:G.mB}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Base","mstrmojo.chart.Point2D","mstrmojo.chart.enums.EnumRectExpandDirection");var M=mstrmojo.hash,U=mstrmojo.chart,W=U.enums,P=W.EnumRectExpandDirection;mstrmojo.chart.Rect2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Rect2D",x:0,y:0,width:0,height:0,init:function O(Z){if(Z){if(Z.Rect2D){var a=Z.Rect2D;mstrmojo.hash.copy(a,this);}else{this._super(Z);}}},Explode:function F(a,Z){this.x-=a;this.y-=Z;this.width+=(a*2);this.height+=(Z*2);},Implode:function A(a,Z){this.Explode(-a,-Z);},GetTopLeft:function H(Z){return new U.Point2D({x:this.x,y:this.y});},GetBottomLeft:function G(Z){return new U.Point2D({x:this.x,y:this.y+this.height});},GetTopRight:function E(Z){return new U.Point2D({x:this.x+this.width,y:this.y});},GetBottomRight:function Y(Z){return new U.Point2D({x:this.x+this.width,y:this.y+this.height});},GetCenter:function X(Z){return new U.Point2D({x:this.x+this.width/2,y:this.y+this.height/2});},GetLeftMiddle:function C(Z){return new U.Point2D({x:this.x,y:this.y+this.height/2});},GetTopMiddle:function I(Z){return new U.Point2D({x:this.x+this.width/2,y:this.y});},GetRightMiddle:function R(Z){return new U.Point2D({x:this.x+this.width,y:this.y+this.height/2});},GetBottomMiddle:function Q(Z){return new U.Point2D({x:this.x+this.width/2,y:this.y+this.height});},HasIntersection:function J(Z){return(this.x<(Z.x+Z.width)&&Z.x<(this.x+this.width)&&this.y<(Z.y+Z.height)&&Z.y<(this.y+this.height));},PointInRectangle:function S(Z){return((Z.x>=this.x)&&(Z.x<=this.x+this.width)&&(Z.y>=this.y)&&(Z.y<=this.y+this.height));},Reset:function B(Z,c,a,b){this.x=Z;this.y=c;this.width=a;this.height=b;},copy:function N(Z){return M.copyProps(["x","y","width","height"],Z,this);},ResetRect:function D(Z){this.copy(Z);},Expand:function L(a,Z){if((Z&P.REC_EXP_HORIZONTAL)>0){this.x-=a;this.width+=2*a;}if((Z&P.REC_EXP_VERTICAL)>0){this.y-=a;this.height+=2*a;}},clone:function V(){return new U.Rect2D({Rect2D:this});},ToPoints:function K(Z){if(Z){return{Center:this.GetCenter(),Origin:this.GetTopLeft(),Width:this.width,Height:this.height};}return{TopLeft:this.GetTopLeft(),TopRight:this.GetTopRight(),BottomLeft:this.GetBottomLeft(),BottomRight:this.GetBottomRight()};}});U.gDefaultTitlePosition=new U.Rect2D({x:15,y:15,width:670,height:21});U.gDefaultSubtitlePosition=new U.Rect2D({x:15,y:51,width:670,height:17});U.gDefaultFootnotePosition=new U.Rect2D({x:15,y:370,width:670,height:15});U.gEmptyRect=new U.Rect2D({x:0,y:0,width:0,height:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(U){if(!U||!U.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var W=23242571;var R=-693593;if(U.ifTime>W){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=U.ifTime-Math.floor(U.ifTime);}else{if(U.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(U.ifTime)+Math.ceil(U.ifTime);}else{if(U.ifTime>0){var X=this.DAYSToYMD(Math.floor(U.ifTime));this.mnYear=X.year;this.mnMonth=X.month;this.mnDay=X.day;S=U.ifTime-Math.floor(U.ifTime);}else{if(U.ifTime<0){var X=this.DAYSToYMD(Math.ceil(U.ifTime));this.mnYear=X.year;this.mnMonth=X.month;this.mnDay=X.day;S=Math.abs(U.ifTime)+Math.ceil(U.ifTime);}}}}S*=H;var V=S+0.5;if(V==H){V--;}if(V>0){this.mnHour=Math.floor(V/A);V-=this.mnHour*A;this.mnMinute=Math.floor(V/L);V-=this.mnMinute*L;this.mnSecond=Math.floor(V/C);V-=this.mnSecond*C;this.mnMillisecond=Math.floor(V);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S=S+H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var U=(S-R*H)/H;if(U<0){R--;U+=1;}return R>=0?R+U:R-U;},DAYSToYMD:function N(U){var X=0;var Z=0;var S=0;U+=693959;var W=Math.floor(U/365);var V=U-W*365;var Y=Math.floor(W/4)-Math.floor(W/100)+Math.floor(W/400);V=V-Y;if(V<0){W--;V+=365;while(V<=0){W--;V+=365;}}var R=U-(W*365+Math.floor(W/4)+(W%4?1:0)-Math.floor((W-1)/100)+Math.floor((W-1)/400));if(R==365&&!this.IsLeapYear(W)){X=W+1;Z=1;S=1;return{year:X,month:Z,day:S};}if(R==-1){X=W-1;Z=12;S=31;return{year:X,month:Z,day:S};}X=W;Z=12;while(R<B.DaysBeforeMonth[Z-1]){Z--;}S=R-B.DaysBeforeMonth[Z-1]+1;if(Z>2&&this.IsLeapYear(X)){S--;if(S==0){Z--;S=B.DaysInMonth[Z-1];if(Z==2){S++;}}}return{year:X,month:Z,day:S};},YMDToDAYS:function G(V,U,S){if(U<1||U>12){return 0;}var R=V*365+Math.floor(V/4)+(V%4?1:0)-Math.floor((V-1)/100)+Math.floor((V-1)/400);R+=B.DaysBeforeMonth[U-1];if(U>2&&this.IsLeapYear(V)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}else{return S-R;}},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}else{if(this.mnYear<R.mnYear){return -1;}}if(this.mnMonth>R.mnMonth){return 1;}else{if(this.mnMonth<R.mnMonth){return -1;}}if(this.mnDay>R.mnDay){return 1;}else{if(this.mnDay<R.mnDay){return -1;}}if(this.mnHour>R.mnHour){return 1;}else{if(this.mnHour<R.mnHour){return -1;}}if(this.mnMinute>R.mnMinute){return 1;}else{if(this.mnMinute<R.mnMinute){return -1;}}if(this.mnSecond>R.mnSecond){return 1;}else{if(this.mnSecond<R.mnSecond){return -1;}}if(this.mnMillisecond>R.mnMillisecond){return 1;}else{if(this.mnMillisecond<R.mnMillisecond){return -1;}}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D");var B=mstrmojo.chart,C=new B.Rect2D();mstrmojo.chart.GridDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridDataLabelInfo",mIsDisPlayed:false,mIsValid:false,mSeriesId:-3,mGroupId:-3,mXIndex:-1,mYIndex:-1,mHostMarkerBound:null,mLabelPtr:null,init:function D(E){this._super(E);this.mHostMarkerBound=C;},ToRectangle:function A(){return this.mLabelPtr.GetBoundingRect();}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","RGBColor","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillBevelEffect","EnumDSSGraphGradientType","EnumDSSGraphPictureScaleType","EnumDSSGraphPictureFormat");var Q=mstrmojo.chart,I=Q.enums,X=I.EnumFillType,N=mstrmojo.chart.model,J=N.enums,Z=J.EnumDSSGraphGradientType,e=J.EnumDSSGraphPictureScaleType,o=J.EnumDSSGraphPictureFormat,S=J.EnumDSSGraphFillBevelEffect;var A=0,L=1,P=2,j=3,B=4,Y=5;var D=Q.gWhite.ToInteger(),b=Q.gBlack.ToInteger();var M=["mFillType","mAlpha","mSimpleColor","mDarkerFactor"],d=[X.FT_SIMPLE,255,1],l=["startGraphColor","endGraphColor","angle","horizontalOffset","verticalOffset","gradientType","endAlpha","intermediateColors","style"],F=[null,null,0,50,50,Z.DssGraphGradientCircular,0,null,0],f=["fillFlip","scaleType","pictureFormat","nameLength","pictureFilePtr","tripleId"],g=[A,e.DssGraphPictureScaleNone,o.DssGraphPicturePNG,0,null,null],k=["type","depth","lightAngle","intensity"],V=[S.DssGraphFillBevelNone,0,270,10];var K=false;mstrmojo.chart.FormatFill=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFill",mFillType:X.FT_SIMPLE,mAlpha:255,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillPicture:null,mFillBevel:null,mDarkerFactor:1,init:function h(r){var q,p=M.length;this._super(r);if(r&&r.Bare){for(q=0;q<p;++q){this[M[q]]=null;}}else{if(r&&r.SimpleColor!==undefined){this.mSimpleColor=r.SimpleColor;}else{this.mSimpleColor=D;}if(r&&r.Alpha!==undefined){this.mAlpha=r.Alpha;}else{this.mAlpha=255;}}if(K){this.mFillPattern={foregroundColor:D,backgroundColor:b,patternId:28};this.mFillPicture={fillFlip:A,scaleType:e.DssGraphPictureScaleNone,pictureFormat:o.DssGraphPicturePNG,nameLength:0,pictureFilePtr:null,tripleId:null};this.mFillBevel={type:S.DssGraphFillBevelNone,depth:0,lightAngle:270,intensity:10};}},transformToGradient:function E(p){var q=new Q.FormatFill({SimpleColor:this.SimpleColor,Alpha:this.mAlpha});q.mFillType=X.FT_GRADIENT;var r=q.getGradient();r.startGraphColor=p.StartGraphColor;r.endGraphColor=p.EndGraphColor;r.angle=p.Angle;r.gradientType=Z.DssGraphGradientLinear;r.endAlpha=p.EndAlpha;r.style=p.Style;r.intermediateColors=p.Colors.slice(0);return q;},getGradient:function H(){if(this.mFillGradient===null){this.mFillGradient={startGraphColor:b,endGraphColor:D,angle:0,horizontalOffset:50,verticalOffset:50,gradientType:Z.DssGraphGradientCircular,endAlpha:0,intermediateColors:[],style:0};}return this.mFillGradient;},FillSimple:function R(p){p.FillSimple(this,this.mDarkerFactor,this.mSimpleColor,false);},FillGradient:function c(q,p){return q.FillGradient(this,p,this.mDarkerFactor);},EnhancedSeriesEffect:function U(u,s,p,q,t){this.mAlpha=u;if(K){var r=this.mFillBevel;r.type=s;r.depth=p;r.lightAngle=q;r.intensity=t;}},FillEdgeType:function C(q,p){q.FillEdgeType(this,p);},FillDonutOrSphere:function O(r,p,q){r.FillDonutOrSphere(this,p,q);},MakeDarker:function W(p){this.mDarkerFactor=p;},RestoreColor:function n(){this.mDarkerFactor=1;},supportAdvancedFill:function G(p){return K;},restoreDefaults:function a(w){var q,r,t,u,s,p;if(w){p=M.length;for(q=0;q<p;++q){this[M[q]]=d[q];}this.mSimpleColor=D;u=this.mFillGradient={};p=u.length;for(q=0;q<p;++q){u[l[q]]=F[q];}u.startGraphColor=b;u.endGraphColor=D;if(K){this.mFillPattern={foregroundColor:D,backgroundColor:b,patternId:28};r=this.mFillBevel={};p=k.length;for(q=0;q<p;++q){r[k[q]]=V[q];}t=this.mFillPicture={};p=f.length;for(q=0;q<p;++q){t[f[q]]=g[q];}}}else{p=M.length;for(q=0;q<p;++q){if(this[M[q]]===null){this[M[q]]=d[q];}}if(this.mSimpleColor===null){this.mSimpleColor=D;}if(this.mFillType===0){return ;}if(this.mFillGradient===null){this.mFillGradient={};}u=this.mFillGradient;p=l.length;for(q=0;q<p;++q){if(u[l[q]]===null||u[l[q]]===undefined){u[l[q]]=F[q];}}if(u.startGraphColor===null||u.startGraphColor===undefined){u.startGraphColor=b;}if(u.endGraphColor===null||u.endGraphColor===undefined){u.endGraphColor=D;}if(K){if(this.mFillPattern===null){this.mFillPattern={};}s=this.mFillPattern;if(s.foregroundColor===undefined||s.foregroundColor===null){s.foregroundColor=D;}if(s.backgroundColor===undefined||s.backgroundColor===null){s.backgroundColor=b;}if(s.patternId===undefined||s.patternId===null){s.patternId=28;}if(this.mFillBevel===null){this.mFillBevel={};}r=this.mFillBevel;p=k.length;for(q=0;q<p;++q){if(r[k[q]]===null){r[k[q]]=V[q];}}if(this.mFillPicture===null){this.mFillPicture={};}t=this.mFillPicture;p=f.length;for(q=0;q<p;++q){t[f[q]]=g[q];}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Vector2D","Point2D","RGBColor","ChartConstants");var J=mstrmojo.chart,F=J.ChartConstants,B=mstrmojo.chart.model,C=B.enums;mstrmojo.chart.CEModuleMain=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CEModuleMain",mTolerance:0.01,mDefaultGraphWidth:700,mDefaultGraphHeight:400,mRiserCountLimit:32767,mpController:null,mGlowWidth:10,mColorParser:null,mGraphObjectMap:null,DegreeToRadian:function G(O){return O*F.kPI/180;},GetColorParser:function I(){if(this.mColorParser===null){this.mColorParser=new J.RGBColor();}return this.mColorParser;},GetGraphObjectMap:function A(){if(this.mGraphObjectMap===null){this.mGraphObjectMap=new J.common.MapStructure();}return this.mGraphObjectMap;},ResetGraphObjectMap:function K(){if(this.mGraphObjectMap){this.mGraphObjectMap.clear();}},RadianToDegree:function E(O){return(O*180/F.kPI+(O>=0?0.5:-0.5));},setController:function D(O){this.mpController=O;},GetLocalizedValue:function N(){},ShiftPolygonBy:function M(Q,R){if(R<=0){return Q;}var S,O,P=Q.length;R%=P;if(P<=1){return Q;}S=Q.slice(R,Q.length);O=Q.slice(0,R);return S.concat(O);},GetAngularBisectorIntersectionPoint:function L(O,a,Z,S,U){var Y=new J.Vector2D({x:O.x-a.x,y:O.y-a.y}),X=new J.Vector2D({x:Z.x-a.x,y:Z.y-a.y}),W=Y.Length(),V=X.Length(),R=new J.Vector2D({x:Y.x/W,y:Y.y/W}),Q=new J.Vector2D({x:X.x/V,y:X.y/V}),P=0;if(Math.abs(R.x-Q.y)<this.mTolerance){P=S*(Q.x+R.x)/(R.y-Q.y);}else{P=S*(Q.y+R.y)/(Q.x-R.x);}U.x=a.x+P*Q.x+S*(-Q.y);U.y=a.y+P*Q.y+S*Q.x;},MakePolygonClockwise:function H(U){var Q=U.length,W=0,S,P,V,R,O;if(Q<3){return ;}for(S=1;S<Q;++S){if(U[S].x<U[W].x||(U[S].x<=U[W].x&&U[S].y<U[W].y)){W=S;}}P=(W+Q-1)%Q;V=new J.Vector2D({x:(U[P].x-U[W].x),y:(U[P].y-U[W].y)});P=(W+1)%Q;R=new J.Vector2D({x:(U[P].x-U[W].x),y:(U[P].y-U[W].y)});if(R.CrossProduct(V)<-this.mTolerance){for(S=0;S<Q/2;++S){O=U[S];U[S]=U[Q-S-1];U[Q-S-1]=O;}}}});J.gModuleMain=new J.CEModuleMain();}());(function(){mstrmojo.requiresCls("mstrmojo.chart.FormatBase","mstrmojo.chart.RGBColor","mstrmojo.chart.enums.EnumLineStyle");var E=mstrmojo.chart,J=E.enums,L=J.EnumLineStyle;E.gLinePatterns=[[1,0],[18,6],[3,3],[9,6,3,6],[9,3,3,3,3,3],[9,2],[3,8],[30,10],[10,10],[3,8,3,8,3,17],[12,8,12,8,3,8],[12,5,12,5,3,5,3,5],[25,10,10,10],[25,5,8,5,8,5],[35,10,25,10,10,10],[37,5,37,5,8,5,8,5]];var G=["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","mGradient"],I=[L.LS_SOLID,255,1,75,null,null];function M(){if(this.mGradient===null){this.mGradient={valid:false,angle:0,endAlpha:0,style:1,colors:[],range:{start:{x:0,y:0},end:{x:0,y:0}}};}}mstrmojo.chart.FormatLine=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatLine",mLineStyle:L.LS_SOLID,mAlpha:255,mLineThickness:1,mLineThicknessPt:75,mLineColor:0,mGradient:null,init:function K(Q){var O,N=G.length;this._super(Q);if(Q){if(Q.Line){var P=Q.Line;this.mLineStyle=P.LineStyle;this.mAlpha=P.Alpha;this.mLineThickness=P.LineThickness;this.mLineColor=P.LineColor;}else{if(Q.Bare){for(O=0;O<N;++O){this[G[O]]=null;}}else{this.mLineStyle=Q.LineStyle||L.LS_SOLID;this.mAlpha=Q.Alpha||255;this.mLineThickness=Q.LineThickness||1;this.mLineColor=Q.LineColor||0;}}}},getGradient:function C(){M.call(this);return this.mGradient;},transformToGradient:function B(N){var P=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var O=P.getGradient();O.valid=N.Valid;O.angle=N.Angle;O.endAlpha=N.EndAlpha;O.style=N.Style;O.colors=N.Colors.slice(0);O.range={start:{x:N.Start.x,y:N.Start.y},end:{x:N.End.x,y:N.End.y}};O.strokePatten=this.mLineStyle;return P;},transformToGradientFromFill:function D(N,O,Q){var R=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var P=R.getGradient();P.valid=true;P.angle=N.angle;P.endAlpha=N.endAlpha;P.style=N.style;P.colors=[];P.colors=N.intermediateColors.slice(0);P.colors.push({Color:N.endGraphColor,Step:1});P.colors.splice(0,0,{Color:N.startGraphColor,Step:0});P.range={start:{x:O.x,y:O.y},end:{x:Q.x,y:Q.y}};return R;},ApplyLineFormat:function A(N){N.ApplyLineFormat(this);},getLinePattern:function H(N){return E.gLinePatterns[N];},restoreDefaults:function F(O){var N;if(O){for(N=0;N<G.length;++N){this[G[N]]=I[N];}}else{for(N=0;N<G.length;++N){if(this[G[N]]===null){this[G[N]]=I[N];}}}if(this.mLineColor===null){this.mLineColor=E.gBlack.ToInteger();}}});mstrmojo.chart.FormatLine.getLinePattern=function H(N){return E.gLinePatterns[N];};E.gOutlineWhite=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:1,LineColor:E.gWhite.ToInteger()});E.gOutlineBlack=new E.FormatLine({LineStyle:L.LS_DASH,Alpha:255,LineThickness:2,LineColor:E.gBlack.ToInteger()});E.gLeaderLine=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:2,LineColor:E.gLeaderLineColor.ToInteger()});E.gStrokeForDarkBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForDarkBackground.ToInteger()});E.gStrokeForLightBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForLightBackground.ToInteger()});}());(function(){mstrmojo.requiresCls("mstrmojo.threshold.ThresholdModel","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel");var K=mstrmojo,F=mstrmojo.chart.model.enums.EnumDSSObjectType,E=mstrmojo.vi.viz.EnumVisualizationTemplates,H=1,D=["#ec7b75","#f6db7f","#84c87b"],I=[0.35,0.65],B=K.models.FormatModel,J=B.ENUM_PROPERTY_NAMES;function C(N,M,O,P){M.reverse().forEach(function(Q){P.push(N.getClearThresholdAction(O.did,O.t||F.DssTypeMetric,Q.tid));});}mstrmojo.vi.util.ThresholdUtils=mstrmojo.provide("mstrmojo.vi.util.ThresholdUtils",{addClearAllThresholdsActions:function L(M,O,S){var R=O.data.gsi,N=R.mx,P=R.thresholds,Q;if(P){N.forEach(function(U){Q=P[U.did];if(Q){C(M,Q,U,S);}});R.thresholds={};}},addThresholds:function A(V,a,P,U,R,M,N,Q){var S,X=[],W=new mstrmojo.threshold.ThresholdModel({data:P.data}),Y=W.data.gsi.thresholds,O=Y&&Y[U.did];R=R||[];if(!O||Q){M=M||D;N=N||I;for(S=0;S<M.length;S++){var Z={};Z.fmt=B.getFormatUpdate(J.BACKGROUND_COLOR,M[S]);B.getFormatUpdate(J.FILL_STYLE,0,Z.fmt);if(S>0){Z.flr=W.getRealValue(N[S-1],H);}if(S<N.length){Z.ceil=W.getRealValue(N[S],H);}X.push(Z);}if(O){C(V,O,U,R);}R.push(V.getCreateSimpleThresholdAction(X,a.k,U.did,H,null,4));}W.destroy();return R;},getDefaultGMThreshold:function G(O){var N,M;switch(O){case E.GRAPHMATRIXHORIZONTALBARCLUSTERED:case E.GRAPHMATRIXHORIZONTALBARSTACKED:case E.GRAPHMATRIXHORIZONTALBARPERCENT:case E.GRAPHMATRIXVERTICALBARCLUSTERED:case E.GRAPHMATRIXVERTICALBARSTACKED:case E.GRAPHMATRIXVERTICALBARPERCENT:case E.GRAPHMATRIXVERTICALBARAUTOMATIC:case E.GRAPHMATRIXPIE:N=["#d2e0e8","#a4cbe6","#80add9","#558dcc","#2e78bb"];M=[0.2,0.4,0.6,0.8];break;case E.GRAPHMATRIXVERTICALLINECLUSTERED:case E.GRAPHMATRIXVERTICALLINESTACKED:case E.GRAPHMATRIXVERTICALLINEPERCENT:case E.GRAPHMATRIXVERTICALLINEAUTOMATIC:case E.GRAPHMATRIXHORIZONTALLINECLUSTERED:case E.GRAPHMATRIXHORIZONTALLINESTACKED:case E.GRAPHMATRIXHORIZONTALLINEPERCENT:case E.GRAPHMATRIXHORIZONTALLINEAUTOMATIC:case E.GRAPHMATRIXVERTICALAREACLUSTERED:case E.GRAPHMATRIXVERTICALAREASTACKED:case E.GRAPHMATRIXVERTICALAREAPERCENT:case E.GRAPHMATRIXVERTICALAREAAUTOMATIC:case E.GRAPHMATRIXHORIZONTALAREACLUSTERED:case E.GRAPHMATRIXHORIZONTALAREASTACKED:case E.GRAPHMATRIXHORIZONTALAREAPERCENT:case E.GRAPHMATRIXHORIZONTALAREAAUTOMATIC:N=["#ec7b75","#f6db7f","#84c87b"];M=[0.35,0.65];break;case E.GRAPHMATRIXBUBBLECIRCLEMM:case E.GRAPHMATRIXBUBBLEGRIDCIRCLEAA:case E.GRAPHMATRIXBUBBLEGRIDSQUAREAA:case E.GRAPHMATRIXBUBBLESQUAREAM:case E.GRAPHMATRIXBUBBLESQUAREMM:N=["#abcffa","#7ca8de","#4570af","#224b8f","#0e3270"];M=[0.2,0.4,0.6,0.8];break;default:break;}return{colors:N,ranges:M};}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService","mstrmojo.mstr.EnumFunction","mstrmojo.warehouse.EnumDatabaseType","mstrmojo.mstr.EnumDSSXMLObjectTypes");mstrmojo.requiresDescs(5421,5422,13355);var P=mstrmojo.hash,L=mstrmojo.array,F=mstrmojo.desc,G=mstrmojo.DocDataService,C=mstrmojo.string,a=mstrmojo.mstr.EnumFunction,b=mstrmojo.mstr.EnumDSSXMLObjectTypes;var c=1;function K(o,d,t,x){var g=o.model,q=o.cmSelCells,u=[],AE=g.getCellTitleInfo(d).title,AG,y,j=function(e){var w=o.getCellForNode(e);u.push(o.getCellUnitIndex(w));AG=w.dpt;},p,AB=d.lv>=0,AH;if(typeof x==="string"&&x.indexOf(";")>0){y=parseInt(x.substring(x.indexOf(";")+1),10);x=parseInt(x.substring(0,x.indexOf(";")),10);}if(y===1&&!t){q.reverse().forEach(j);}else{if(y===1){p=1;q.forEach(j);}else{q.forEach(j);}}AH={oId:AE.id,oTp:AE.otp,depth:AG,ordinals:u.join(","),sliceId:o.sid,viewKey:o.k,funcVal:x,switchOrder:p,art:g.getObjectInfoFromDataset(AE.id).art,isRA:AB};if(AB&&x===a.FunctionApplySimple){var s=g.docModel.datasets[g.data.datasetId];if(s&&s.tables&&s.tables.length>=0&&s.tables[0].dbt===mstrmojo.warehouse.EnumDatabaseType.EssBase){AH.peName=AE.v||AE.n;}else{var k=o.getCellForNode(q[0]),AF=k._e.id;AH.peId=AF;AH.peName=k._e.ori_n||k._e.n;try{if(AE.fix>=0){var h=g.docModel.findUnitInDataSet(AE.id).fs,n=L.filterOne(h,function(e){return e.fnm==="DESC";}).fid;if(n){var AC=o.dataBlocks&&o.dataBlocks[k._gd]||g.data,AA=AC.gts[(AE.axis===c)?"row":"col"],l=L.filterOne(AA,function(e){return e.id===AE.id&&e.fid===n;}),AD=l.es[k.idx];AH.peName=AD&&(AD.ori_n||AD.n)||AH.peName;}}else{var r;L.forEach(AE.fs,function(w,e){if(w.n==="DESC"){r=e;return false;}});if(r!==undefined){var f=[];if(AE.axis===c){var z;for(z=k.idx;z>-1;z--){if(AE.es[z].id===AF){f=[AE.es[z].ori_n||AE.es[z].n].concat(f);}else{break;}}for(z=k.idx+1;z<AE.es.length;z++){if(AE.es[z].id===AF){f.push(AE.es[z].ori_n||AE.es[z].n);}else{break;}}}else{f=L.map(L.filter(AE.es,function(w){return w.id===AF;}),function(w){return w.ori_n||w.n;});}AH.peName=f[r]||AH.peName;}}}catch(AD){}}}return AH;}function D(f,e,h){var l=f.getDEInfo(e),k=l&&l.deObject&&l.deObject.des,j=1,g=h===-1?F(5187,"Group"):(h===a.FunctionApplySimple?F(13355,"Calculated Member"):F(5188,"Calculation")),d=function(n){return n.n===g+" "+j;};while(true&&k){if(k.some(d)){j++;}else{break;}}f.controller.onAddQuickDE(f,P.copy(K(f,e,false,h),{act:"addQuickDE",deName:g+" "+j}));}function Z(d,f){var e;for(e in d){if(L.find(d[e].att,"did",f)>-1){return e;}}return undefined;}function X(d){var f=d.split(";"),e;if(f.length>1&&f[f.length-2].slice(-1)!=="//"){f.splice(-1,1);}e=f.join(";");return e.replace(/\\:/g,"*:").replace(/\\;/g,";").replace(/\\\\/g,"\\").substring(1);}function A(r,e,n,h,d){var l=n.es,f=n.id,k;d.forEach(function(s){k=s[0];if(k.eid.indexOf(f)<0){l.push({n:C.decodeHtmlString(k.v,true),t:mstrmojo.vi.enums.EnumDerivedElementType.LIST,v:X(k.eid)});}});var g=r.controller,q=r.model&&r.model.docModel,p=g._getXtabCallback(r),j={act:"applyDEChanges",deId:e.did,attId:e.attId,attName:e.attName,dsId:e.dsId,k:r&&r.k,actions:[V(n,h)]};q.addUpdateObjects(j,{id:j.deId||j.attId,type:47,flag:G.PARTIAL_UPDATE_FLAGS.DATA_CHANGE});p=mstrmojo.func.wrapMethods(p,q.getDatasetsUpdateCallback(),q.getUpdateHiddenLayoutsCallback(),{success:function(){q.callOnNDECreated([n]);}});var o=function(s){return function(){if(j&&s){j.partialRetrieval={nodes:Y(r,q,e)};}var t=s?q.wrapUnsetVisualizationFilterAction(j):j;g.submitUndoRedoUpdates(t,{},p,G.REQUEST_DEFN_DATA);};};q.checkAndNotifyVFChangeOnGroupUpdate({actions:j},o(true),o(false));}function V(e,d){return{act:"update",position:d+1,item:e};}function E(f,e,j,h,g){var d=f.model.getCellTitleInfo(e).title;f.controller.onSetDEHierachyOptions(f,{act:"setDEHierarchyOptions",oId:d.id,eId:j.id,splice:h,expand:g});}function O(h,e){var d=[],g=e.t,f=e.did;h.getDropZones().zones.forEach(function(j){((j&&j.items)||[]).forEach(function(l){var n=l.t,k=l.did;if(n!==21&&k!=="-1"&&k!=="00000000000000000000000000000000"&&((n===4&&g===4)||(n!==4&&g!==4))&&k!==f&&L.find(d,"did",k)===-1){d.push(l);}});});h.docModel.getDatasetUnits(g===4?["mx"]:["att"]).forEach(function(j){if(L.find(d,"did",j.did)===-1&&j.did!==f&&!j.hide){d.push(j);}});return mstrmojo.vi.ui.DatasetUnitMenuUtils.getSortedDatasetUnits(d);}function Y(g,d,f){var e=d.getSourceFilterKeys(g.zonesModel.getHost().k);L.forEach(g.parent.parent.children,function(k){var h=k.boxContent.gridInfo;if(h){var l=(h.rows.concat(h.cols)).some(function(n){return n.did===f.did;}),j=e.some(function(n){return n===k.k;});if(l&&!j){e.push(k.k);}}});return e;}mstrmojo.vi.ui.rw._XtabDE=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabDE",{scriptClass:"mstrmojo.vi.ui.rw._XtabDE",derivedElementGroup:function M(d){D(this,d,-1);},addElementsToGroup:function N(f,g,e,d){A(this,f,g,e,d);},derivedElementCalculation:function B(e,d){D(this,e,d);},separateOthers:function Q(d,e){E(this,d,e,1,1);},renameDEList:function I(d){this.controller.onEditQuickDEList(this,P.copy(K(this,d,true,-1),{act:"editQuickDEList",deName:d.v}));},editQuickDECalculationNumberFormat:function J(e,f){var d=K(this,e);d.deId=f.de.id;d.act="editQuickDECalculationNumberFormat";this.controller.editQuickDECalculationNumberFormat(this,P.copy(d,this.model.docModel.createNumberFormatParams(f)));},editDECalculation:function H(e,d){if(d!==undefined&&d!==null){this.controller.editQuickDECalculation(this,P.copy(K(this,e,true,d),{act:"editQuickDECalculation"}));}else{this.controller.onEditQuickDECalculation(this,P.copy(K(this,e,true),{act:"editQuickDECalculation",deName:e.v}));}},createDEParam:function K(d,f,e){return K(this,d,f,e);},removeQuickDE:function S(l,q){var h=q&&q.deObject,j=(h&&h.des)||[],r=this,s=2,p=L.filter(j,function(u){return !u.ido;},{max:s+1});if(h&&(j.length<=s||p.length<=s)){var k=[],o=this.zonesModel.getZoneForObject(h.did),f=O(this.zonesModel,h),e=L.find(f,"did",h.attId),d=e>=0?f[e]:null,n={};if(d&&o){k.push(P.copy({isUngroup:1,deId:h.did},this.model.getAddTemplateUnitAction(d,h.dsId,o.id,L.find(o.items,"did",h.did))));k=[this.zonesModel.getUpdateTemplateAction(k)];n=this.controller._getXtabCallback(this);}k.push({act:"removeNDEFromDS",dsid:h.dsId,oid:h.did,disablePU:true});n=mstrmojo.func.wrapMethods(this.controller.model.getDatasetsUpdateCallback(),this.controller.model.getReloadLayoutModelCallback(),n,this.controller.getReloadLayoutViewCallback());var t=r.model&&r.model.docModel;var g=function(u){return function(){var w=(u&&t)?t.wrapUnsetVisualizationFilterAction(k):k;r.controller.submitUndoRedoUpdates(w,null,n,G.REQUEST_DEFN_DATA);};};t&&t.checkAndNotifyVFChangeOnGroupUpdate({actions:k,zm:t},g(true),g(false));}else{this.controller.removeQuickDE(this,P.copy(K(this,l),{act:"removeQuickDE"}));}},derivedElementsEdit:function U(n,g){if(!g){g=this.getDEInfo(n);}var h=this.model,e=h.getCellTitleInfo(n).title,f=g&&g.deObject,l=g&&g.de,d,k,j;if(!f){d=this.gridData.datasetId||Z(h.docModel.datasets,e.id);k=e.id;j=e.n?C.decodeHtmlString(e.n):undefined;}this.controller.openDEEditor(this,{dsId:d,attId:k,attName:j,deObj:f,elemId:l&&l.id,dispName:n.n?C.decodeHtmlString(n.n):j});},getDEInfo:function W(n){var g=this.model,j=g.getCellTitleInfo(n),k=j.isSrcTitle,e=j.title,d=n.dei,f,l;if((e&&e.ost!==12033)||(k&&n.otp!==b.Consolidation)){return null;}var h=(e&&e.id)||(k&&n.otp===b.Consolidation&&n.id);f=g.docModel.getDEObject(h);if(f&&d!==undefined){l=f.des[d];}return{deObject:f,de:l,ttl:e};},getOthersDEInfo:function R(e){var d;L.forEach(e.des,function(f){if(f.t===4){d=f;return false;}});return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var D=mstrmojo.dom;mstrmojo.gm.DndReplaceNode=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.gm.DndReplaceNode",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;"></div>',markupSlots:{nodesContainer:function(){return this.domNode;}},toggle:function A(E){if(E){this.nodesContainer.style.display="block";}else{this.nodesContainer.style.display="none";}},getBoundaryPosForAllNodes:function B(){var H,E=this.nodesContainer,K=E.children,I=K.length;if(I<1){return{x:0,y:0,w:0,h:0};}var F=D.position(K[0]),J=F.x+F.w,M=F.y+F.h;if(I===1){return F;}for(H=1;H<I;H++){var L=K[H],G=D.position(L);J=Math.max(J,G.x+G.w);M=Math.max(M,G.y+G.h);F.x=Math.min(F.x,G.x);F.y=Math.min(F.y,G.y);}F.w=J-F.x;F.h=M-F.y;return F;},updateNodes:function C(S,H,N){var L=this.nodesContainer,V,U,W,J,P,M,E=function(b,a,Y,X){var Z=b.style;if(Y&&X){if(U.svgNodePos){Y=Y+U.svgNodePos.x-J;X=X+U.svgNodePos.y-P;}Z.transformOrigin=Y+"px "+X+"px";Z.msTransformOrigin=Y+"px "+X+"px";Z.webkitTransformOrigin=Y+"px "+X+"px";}Z.transform="rotate("+a+"deg)";Z.msTransform="rotate("+a+"deg)";Z.webkitTransform="rotate("+a+"deg)";};L.innerHTML="";if(!S){return ;}this.toggle(true);for(V=0;V<S.length;V++){U=S[V];M=U.nodePos;if(U.clonedNode){W=U.clonedNode;}else{W=document.createElement("div");W.innerHTML=mstrmojo.string.encodeHtmlString(U.nodeContent,true);}L.appendChild(W);if(U.isMultipleTspan){M.w=W.offsetWidth;M.h=W.offsetHeight;}W.classList.add(this.nodeCss);if(N){W.classList.add(N);}J=Math.round(M.x-Math.ceil((W.offsetWidth-M.w)/2));P=Math.round(M.y-Math.ceil((W.offsetHeight-M.h)/2));W.style.left=(J-H.x)+"px";W.style.top=(P-H.y)+"px";var O=U.transform;if(O){var K=O.indexOf("("),I=O.indexOf(")");if(K>=0&&I>=0){var F=O.substring(K+1,I).split(" "),G=parseInt(F[0],10),R,Q;if(F.length===3){R=parseInt(F[1],10);Q=parseInt(F[2],10);}E(W,G,R,Q);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.desc","mstrmojo.Widget");var A=mstrmojo.css,B=mstrmojo.dom;mstrmojo.vi.ui.TargetMask=mstrmojo.declare(mstrmojo.Widget,[],{scriptClass:"mstrmojo.vi.ui.TargetMask",markupString:'<div class="mstrmojo-hasTgt" mstrAttach:contextmenu><div class="tgt"><div></div>'+mstrmojo.desc(4787,"Target")+'</div><div class="src"><div></div>'+mstrmojo.desc(4283,"Source")+"</div></div>",useRichTooltip:true,isDynamicTooltip:true,tooltipContent:mstrmojo.desc(15275,"This container cannot be selected as target"),allowFilters:false,init:function D(E){if(this._super){this._super(E);}},setMaskClass:function(H){var F=this.parent,G=F instanceof mstrmojo.vi.ui.rw.VizBox,E=F instanceof mstrmojo.vi.ui.rw.FilterBox;if(this.domNode){if(F.id===H){A.addClass(this.domNode,"sourced");}else{if(!G&&!(E&&this.allowFilters)){A.addClass(this.domNode,"disabled");}else{A.addClass(F.domNode,"targeted");}}this.domNode.style.display="block";return true;}return false;},clearMaskClass:function(){var E=this.parent;A.removeClass(this.domNode,"sourced");A.removeClass(this.domNode,"disabled");A.removeClass(E.domNode,"targeted");this.domNode.style.display="none";},moveTooltip:function C(E,F){this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-A tgt-tt",content:this.tooltipContent,top:E.clientY+15,left:E.clientX-15};this._super(E,F);},oncontextmenu:function(F,E){B.preventDefault(E,F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.boxmodel","mstrmojo.Widget");var Y=mstrmojo.hash,g=mstrmojo.css,L=mstrmojo.dom,d="animate",P="px";function b(h){return Y.copy(((!!mstrApp.isWSStyling)?Y.walk(h,window).boxConfigurationWS:undefined)||Y.walk(h,window).boxConfiguration||mstrmojo.vi.ui._IsBoxLayoutChild.boxConfiguration);}function H(k){var j=k.boxCache,l=j&&j[this.id],h=false;if(!l){h=this.domNode.className.indexOf(d)>-1;this.cacheCtxtBoxPosition(k);}k.boxAnimating=h;}mstrmojo.vi.ui._IsBoxLayoutChild=mstrmojo.provide("mstrmojo.vi.ui._IsBoxLayoutChild",{_mixinName:"mstrmojo.vi.ui._IsBoxLayoutChild",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onzIndexChange:function(){this.domNode.style.zIndex=this.zIndex||1;}},id:null,left:"0px",top:"0px",zIndex:1,draggable:false,dropZone:false,getBoxConfiguration:function C(){return b(this.scriptClass);},getBoxBorderWidth:function I(){return 0;},getMinBoxSize:function A(h){return mstrmojo.vi.ui._IsBoxLayoutChild.getBoxMinimums(this.scriptClass)[h];},getIdentifier:function Q(){return this.id;},updateLayout:function O(k,h){if(Y.equals(k,this._currentLayout)){return ;}var j=this.domNode,n=window.Modernizr,l=this.getBoxBorderWidth();if(j&&h&&n.testProp("transition")){g.addClass(j,d);g.onTransitionEnd(j,function(){g.removeClass(j,d);});}this._currentLayout=k;this.applyBoxSize(Math.max((parseInt(k.height,10)-l),0)+P,Math.max((parseInt(k.width,10)-l),0)+P,k.top,k.left);if(this.hasRendered&&this.doLayout){this.doLayout();}this.postUpdateLayout();},postUpdateLayout:function D(){},applyBoxSize:function Z(h,l,o,n){this.height=h;this.width=l;this.top=o;this.left=n;var k=this.domNode;if(k){var j=this.domNode.style;j.top=o;j.left=n;j.height=h;j.width=l;if(parseInt(h,10)<=0||parseInt(l,10)<=0){j.borderWidth="0";}}},createAvatar:function W(){return this.offsetAvatar(this.domNode);},offsetAvatar:function S(h){h.style.margin="20px 0 0 20px";return h;},setMaskVisibility:function U(h){var j=this.maskNode.style;j.display=h?"block":"none";if(!h){this.resetMask();}},isDragValid:function F(h){return true;},initializeDrag:function G(h){},ondragstart:function f(h){this.initializeDrag(h);delete this._currentLayout;this.parent.beginBoxMove(h,this);this._super(h);},ondragend:function N(h){this._super(h);this.parent.endBoxMove(h,this);if(!h.dropSuccessful){this.parent.cancelBoxMove(h);}var j=this.domNode;j.style.margin="0";},allowDrop:function K(h){var k=h.src,j=k&&k.widget;return(j&&j.parent===this.parent);},wasDropped:function M(h){},cancelBoxMove:function J(h){return false;},ondragenter:function V(h){this.setMaskVisibility(true);},ondragover:function X(h){H.call(this,h);this.highlightMask(this.parent.getPanelTargetEdge(h)||this.getTargetDropZone(h),h);if(h.boxAnimating){delete h.boxCache[this.id];}},cacheCtxtBoxPosition:function E(j){var h=j.boxCache=j.boxCache||{};h[this.id]=L.position(this.domNode);},ondrop:function c(h){H.call(this,h);var k=h.src.widget;if(k.wasDropped){k.wasDropped(h);}var j=this.parent;if(k.parent===j){j.dropBox(h,this,this.maskNode.zone,true);}this.setMaskVisibility(false);},ondragleave:function B(){this.setMaskVisibility(false);},highlightMask:function e(l,k){var h=this.maskNode,j=k.boxAnimating;if(l!==h.zone||j||h.isAnimating!==j){h.zone=l;h.isAnimating=j;this.parent.updateDropCue(l,k,k.boxCache[this.id]);}},getTargetDropZone:function R(h){return mstrmojo.boxmodel.getEdgeQuadrantByPoint(h.boxCache[this.id],h.tgt.pos);},resetMask:function a(){this.parent.updateDropCue("");var h=this.maskNode;delete h.zone;delete h.isAnimating;},getBoxDimension:mstrmojo.emptyFn,postDropBox:mstrmojo.emptyFn});mstrmojo.vi.ui._IsBoxLayoutChild.boxConfiguration={addToEnd:true};mstrmojo.vi.ui._IsBoxLayoutChild.getBoxMinimums=function(h){var j=b(h);return Y.copy(j.minSize||j.f||{h:75,v:75});};mstrmojo.vi.ui._IsBoxLayoutChild.BoxConfigurationType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget");var B=Math,F=mstrmojo.dom,H=mstrmojo.css,C=1,J=0;function G(M,O){if(isNaN(M[0])){console.log("Invalid input to function doHitTest.");return 0;}if(isNaN(O)){console.log("Invalid input to function doHitTest.");}O=O||0;var L,P,N,Q=M.length;if(Q<1||O<=M[0]){return 0;}if(O>M[Q-1]){return Q-1;}P=0;N=Q-1;while(N-P>1){L=P+((N-P)>>1);if(M[L]===O){return L;}if(M[L]<O){P=L;}else{if(M[L]>O){N=L;}}}return N;}function D(M){var L=parseFloat(M);if(isNaN(L)){L=0;}return Math.floor(L+0.5);}function I(Q,Z){var N=Q.x,X=Q.y,L=N+Q.w,V=X+Q.h,S=Z.x,P=Z.y,R=S+Z.w,O=P+Z.h;if(N>=R||X>=O||L<=S||V<=P){return{flag:0};}if(N<=S&&X<=P&&L>=R&&V>=O){return{flag:2};}var W=Math.max(N-S,0),U=Math.max(X-P,0),M=Math.min(L-S,Z.w)-W,Y=Math.min(V-P,Z.h)-U;return{flag:1,x:W,y:U,width:M,height:Y};}function E(L,O){var M,N=L.length;for(M=0;M<N;M++){if(L[M].id===O){return M;}}return -1;}function A(){return(this.parent.defn&&!!this.parent.defn.ttl)?" "+this.parent.defn.ttl:"";}mstrmojo.WidgetMatrix=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WidgetMatrix",left:0,top:0,width:100,height:100,phCss:"",nRows:1,nCols:1,chartW:100,chartH:100,fixWidth:false,fixHeight:false,depth:undefined,origin:undefined,offset:undefined,hArr:undefined,hAccArr:undefined,wArr:undefined,wAccArr:undefined,domHSBar:undefined,domVSBar:undefined,domHSBarBody:undefined,domVSBarBody:undefined,chartsPool:undefined,activeCharts:undefined,activeFlags:undefined,API:undefined,APIOwner:undefined,contentSummary:undefined,markupString:'<div class="{@cssClass}" style="position:absolute; left:{@left}px; top:{@top}px; width:{@width}px; height:{@height}px;"><div style="position:absolute; left:0px; bottom:0px; width:100%; height:100%; overflow:hidden"><div class="canvas" style="position:absolute; width:{@canvasW}px; height:{@canvasH}px"></div></div><span style="visibility:hidden"></span></div>',markupSlots:{domContainer:function(){return this.domNode.firstChild;},domCanvas:function(){return this.domNode.firstChild.firstChild;},domSpan:function(){return this.domNode.lastChild;}},init:function K(L){this.origin={x:0,y:0};this.offset={x:{s:0,e:0},y:{s:0,e:0}};this.hArr=[];this.hAccArr=[];this.wArr=[];this.wAccArr=[];this.chartsPool=[];this.activeCharts=[];this.activeFlags=[];this.contentSummary=null;this.canvasScrolled=L&&L.canvasScrolled;this.API={handleDroppedChart:undefined,getChartWidth:undefined,getChartHeight:undefined,createUnitChart:undefined,updateUnitChart:undefined,getRowSpan:function(N){return[N,N];},getColSpan:function(N){return[N,N];}};var M=L.placeholder;if(M!==undefined){this.cssClass=M.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(L.hasOwnProperty("width")===false){L.width=D(M.style.width);}if(L.hasOwnProperty("height")===false){L.height=D(M.style.height);}if(L.hasOwnProperty("left")===false){L.left=D(M.style.left);}if(L.hasOwnProperty("top")===false){L.top=D(M.style.top);}}if(this._super){this._super(L);}},preBuildRendering:function(){this.resetGrid();},postBuildRendering:function(){if(this._super){this._super();}var M=this.domSpan,L;M.setAttribute("class",this.phCss);L=H.getComputedStyle(M);this.borderL=D(L.borderLeftWidth);this.borderR=D(L.borderRightWidth);this.borderT=D(L.borderTopWidth);this.borderB=D(L.borderBottomWidth);this.borderH=this.borderL+this.borderR;this.borderV=this.borderT+this.borderB;},highlightText:function(L){if(L){H.addClass(this.domNode,"highlight-label");}else{H.removeClass(this.domNode,"highlight-label");}},clearCharts:function(){this.chartsPool=[];this.activeCharts=[];this.activeFlags=[];if(this.domCanvas){this.domCanvas.innerHTML="";}},getChart:function(N,L){var M=this.chartsPool;return M[N]&&M[N][L];},addChart:function(N,L,O){var M=this.chartsPool;M[N]=M[N]||[];M[N][L]=O;},getActiveFlag:function(N,M){var L=this.activeFlags;return !!(L[N]&&L[N][M]);},setActiveFlag:function(O,N,L){var M=this.activeFlags;M[O]=M[O]||[];M[O][N]=L;},filterChartsByRow:function(R,Q){var S,N,P,M,Y,O=false,W=this.nRows,V=this.contentSummary,X=V.unit,L=V.elements,U=[];for(M in R){if(R.hasOwnProperty(M)){Y=R[M];if(M===X){for(S=0;S<W;S++){if(E(Y,L[S])!==-1){if(O){P++;}else{N=P=S;O=true;}}else{if(O){U.push({start:N,end:P,depth:Q,byRow:true,att:X,elements:Y});O=false;}}}if(O){U.push({start:N,end:P,depth:Q,byRow:true,att:X,elements:Y});}return U;}return null;}}return null;},filterChartsByCol:function(R,Q){var S,N,P,O=false,U=this.nCols,M,Y,W=this.contentSummary,X=W.unit,L=W.elements,V=[];for(M in R){if(R.hasOwnProperty(M)){Y=R[M];if(M===X){for(S=0;S<U;S++){if(E(Y,L[S])!==-1){if(O){P++;}else{N=P=S;O=true;}}else{if(O){V.push({start:N,end:P,depth:Q,byRow:false});O=false;}}}if(O){V.push({start:N,end:P,depth:Q,byRow:false});}return V;}return null;}}return null;},filterRelevantDimension:function(S,Q){var P=this.contentSummary,R=P.unit;if(!Q.hasOwnProperty(R)){return S;}var N,V,O=[],M=S.length,U=Q[R],L=P.elements;for(N=0;N<M;N++){V=S[N];if(E(U,L[V])!==-1){O.push(V);}}return O;},filterRelevantRows:function(M,L){return this.filterRelevantDimension(M,L);},filterRelevantCols:function(M,L){return this.filterRelevantDimension(M,L);},resize:function(M,L){this.width+=M;this.height+=L;this.offset.x.e=B.max(this.domCanvas.clientWidth-this.width,0);this.offset.y.e=B.max(this.domCanvas.clientHeight-this.height,0);this.domNode.style.width=this.width+"px";this.domNode.style.height=this.height+"px";if(this.fixHeight&&this.nRows===1){this.chartH+=L;}if(this.fixWidth&&this.nCols===1){this.chartW+=M;}},resizeAbs:function(L,N){var M=L-this.width,O=N-this.height;this.width=L;this.height=N;this.offset.x.e=B.max(this.domCanvas.clientWidth-L,0);this.offset.y.e=B.max(this.domCanvas.clientHeight-N,0);this.domNode.style.width=L+"px";this.domNode.style.height=N+"px";if(this.fixHeight&&this.nRows===1){this.resizeRow([0],[O]);this.doUpdateChartsGlobally();this.chartH=N;}if(this.fixWidth&&this.nCols===1){this.resizeCol([0],[M]);this.doUpdateChartsGlobally();this.chartW=L;}},setRowHeight:function(L,M){this.hArr[L]=M;return this.updateAccHeight(L,L);},setColWidth:function(M,L){this.wArr[M]=L;return this.updateAccWidth(M,M);},resizeRow:function(Q,P,O){var N,M,L;for(N=0;N<Q.length;N+=1){M=Q[N];L=P[N];this.setRowHeight(M,this.getRowHeight(M)+L);}if(P[0]!==0){this.updateCanvas(0,P[0]*O);}},resizeCol:function(Q,P,O){var N,M,L;for(N=0;N<Q.length;N+=1){M=Q[N];L=P[N];this.setColWidth(M,this.getColWidth(M)+L);}if(P[0]!==0){this.updateCanvas(P[0]*O,0);}},toggleClsByRows:function(R,S,M,L){var O,N,Q,P=this.nCols;for(O=R;O<=S;O++){for(N=0;N<P;N++){Q=this.getChart(O,N);if(Q){if(M){H.addClass(Q,L);}else{H.removeClass(Q,L);}}}}},toggleClsByCols:function(S,L,N,M){var Q,O,R,P=this.nRows;for(O=S;O<=L;O++){for(Q=0;Q<P;Q++){R=this.getChart(Q,O);if(R){if(N){H.addClass(R,M);}else{H.removeClass(R,M);}}}}},scrollTo:function(L,Q,M){var P,N,O=this.origin;if(L===undefined){L=O.x;}if(Q===undefined){Q=O.y;}if(L===O.x&&Q===O.y){return ;}O.x=L;O.y=Q;if(!this.canvasScrolled){this.domCanvas.style[F.CSS3_TRANSFORM]=F.createTranslateString(-L,-Q,0);}if(M){P=this.domHSBar;N=this.domVSBar;if(P){P.scrollLeft=L;}if(N){N.scrollTop=Q;}}},adjustOriginIfNeeded:function(){var S,P,M=this.origin,O=this.offset,R=M.x,N=M.y,L=O.x,Q=O.y;if(R<L.s||R>L.e){S=L.s;}if(N<Q.s||N>Q.e){P=Q.s;}this.scrollTo(S,P,true);},createMiniChart:function(U,Q,V,N,W,M,S,O,R){var P=W,L=M;if(this.depth){if(this.depthOnRow){P=this.depth;}else{L=this.depth;}}U-=this.borderH;Q-=this.borderV;if(this.API.createUnitChart!==undefined){if(this.APIOwner){return this.API.createUnitChart.call(this.APIOwner,U,Q,V,N,P,L,S,O,this.phCss,this.isPrimary,R);}return this.API.createUnitChart(U,Q,V,N,P,L,S,O,this.phCss,this.isPrimary,R);}return this.createMiniPH(U,Q,V,N,P,L,S,O,this.phCss);},createMiniPH:function(S,P,U,N,V,M,R,O,Q){var L=document.createElement("div");L.setAttribute("row",V);L.setAttribute("col",M);L.setAttribute("class",Q);L.setAttribute("rowSpan",R);L.setAttribute("colSpan",O);L.style.width=S+"px";L.style.height=P+"px";L.style.top=U+"px";L.style.left=N+"px";return L;},updateMiniChart:function(Q,M,O,N,L,P){if(M){M-=this.borderH;}if(O){O-=this.borderV;}if(this.API.updateUnitChart!==undefined){if(this.APIOwner){this.API.updateUnitChart.call(this.APIOwner,Q,M,O,N,L,this.isPrimary,P);}else{this.API.updateUnitChart(Q,M,O,N,L,this.isPrimary,P);}}else{if(M){Q.style.width=M+"px";}if(O){Q.style.height=O+"px";}if(N){Q.style.top=N+"px";}if(L){Q.style.left=L+"px";}}},shiftCharts:function(N,M){if(N===0&&M===0){return ;}var O,Q,P=this.activeCharts,L=P.length;for(O=0;O<L;O+=1){Q=P[O];if(N!==0){Q.style.left=Q.offsetLeft+N+"px";}if(M!==0){Q.style.top=Q.offsetTop+M+"px";}}},updateCanvas:function(g,e,M,l){var b=this.domCanvas,U=b.offsetWidth,a=b.offsetHeight,d=U+g,P=a+e,N=this.domHSBarBody,Y=this.domVSBarBody,Q=this.offset,k=this.origin,c=k.x,Z=k.y,R=Q.x.e,V=Q.y.e,S=c===R,f=Z===V,j=c===0,O=Z===0,X=function(){if(g===0){return ;}if(N){N.style.width=d-C+"px";}b.style.width=d+"px";Q.x.e=B.max(R+g,0);},L=function(){if(e===0){return ;}if(Y){Y.style.height=P-C+"px";}b.style.height=P+"px";Q.y.e=B.max(V+e,0);},W=function(){if(M===true){c+=g;}if(l===true){Z+=e;}if((c>Q.x.e)){c=Q.x.e;}if((Z>Q.y.e)){Z=Q.y.e;}};this.canvasW=d;this.canvasH=P;X();L();W();this.scrollTo(c,Z,true);},calculateBBox:function(){var M=this.origin.x,O=this.origin.y,L=this.width,N=this.height;this._x1=M-L*J;this._x2=M+L*(J+1);this._y1=O-N*J;this._y2=O+N*(J+1);},calculateMatrixBBox:function(){var M,O,S,L,Q,N,P=this.activeCharts,R=P.length;this._minRow=this.nRows;this._maxRow=-1;this._minCol=this.nCols;this._maxCol=-1;for(M=0;M<R;M+=1){N=P[M];O=parseInt(N.getAttribute("row"),10);S=parseInt(N.getAttribute("col"),10);L=this.API.getRowSpan(O,this.depth);Q=this.API.getColSpan(S,this.depth);this._minRow=B.min(this._minRow,L[0]);this._maxRow=B.max(this._maxRow,L[1]);this._minCol=B.min(this._minCol,Q[0]);this._maxCol=B.max(this._maxCol,Q[1]);}},isRowInSight:function(L){this.calculateMatrixBBox();return L>=this._minRow&&L<=this._maxRow;},isColInSight:function(L){this.calculateMatrixBBox();return L>=this._minCol&&L<=this._maxCol;},detachDomCanvas:function(){this.domContainer.removeChild(this.domCanvas);},setupDomCanvas:function(){this.domContainer.appendChild(this.domCanvas);},handleDroppedChart:function(){this.calculateBBox();var Q,S,R,P,U,V,M,O,N=this.activeCharts,L=N.length;for(Q=L-1;Q>=0;Q-=1){O=N[Q];V=parseInt(O.getAttribute("row"),10);M=parseInt(O.getAttribute("col"),10);S=this.getColWidth(M);R=this.getRowHeight(V);P=this.getColPosition(M);U=this.getRowPosition(V);if(U+R<this._y1||U>this._y2||P+S<this._x1||P>this._x2){if(this.API.handleDroppedChart){if(this.APIOwner){this.API.handleDroppedChart.call(this.APIOwner,this.domCanvas,O);}else{this.API.handleDroppedChart(this.domCanvas,O);}}else{this.domCanvas.removeChild(O);N.splice(Q,1);this.setActiveFlag(V,M,false);}}}},initAccHeight:function(){var M,N=this.nRows,L=this.manager.heightCache,O=this.hAccArr,P=O[N-1];O[0]=L[0];for(M=1;M<N;M++){O[M]=O[M-1]+L[M];}this.updateCanvas(0,O[N-1]-P);},initAccWidth:function(){var N,P=this.nCols,M=this.manager.widthCache,L=this.wAccArr,O=L[P-1];L[0]=M[0];for(N=1;N<P;N++){L[N]=L[N-1]+M[N];}this.updateCanvas(L[P-1]-O,0);},resetHGrid:function(){var L=this.nCols,M=this.chartW,P=this.domCanvas,O=M*L,N=function(U,S,R,W,Q){var V;if(Q){for(V=0;V<R;V+=1){U[V]=W;}}S[0]=W;for(V=1;V<R;V+=1){S[V]=S[V-1]+W;}};this.canvasW=O;this.offset.x.e=B.max(this.canvasW-this.width,0);if(!this.wArr){this.wArr=[];}if(!this.wAccArr){this.wAccArr=[];}this.wArr.length=0;this.wArr.length=L;this.wAccArr.length=0;this.wAccArr.length=L;N(this.wArr,this.wAccArr,L,M,this.fixWidth);if(P){P.style.width=O+"px";}},resetVGrid:function(){var P=this.nRows,M=this.chartH,O=this.domCanvas,L=M*P,N=function(U,S,R,W,Q){var V;if(Q){for(V=0;V<R;V+=1){U[V]=W;}}S[0]=W;for(V=1;V<R;V+=1){S[V]=S[V-1]+W;}};this.canvasH=L;this.offset.y.e=B.max(this.canvasH-this.height,0);if(!this.hArr){this.hArr=[];}if(!this.hAccArr){this.hAccArr=[];}this.hArr.length=0;this.hArr.length=P;this.hAccArr.length=0;this.hAccArr.length=P;N(this.hArr,this.hAccArr,P,M,this.fixHeight);if(O){O.style.height=L+"px";}},resetGrid:function(){this.resetHGrid();this.resetVGrid();this.clearActiveCharts();},updateGrid:function(){this.calculateBBox();if(this.activeCharts.length===0){var Q=this.doRowIntersectionCheck(),N=this.doColIntersectionCheck();this.doUpdateGridXIYI(Q.start,N.start);}else{this.calculateMatrixBBox();var M=this._minRow,L=this._maxRow,P=this._minCol,O=this._maxCol;this.doUpdateGridXIYI({rowStart:L+1,colStart:P});this.doUpdateGridXIYD({rowStart:L,colStart:O+1});this.doUpdateGridXDYD({rowStart:M-1,colStart:O});this.doUpdateGridXDYI({rowStart:M,colStart:P-1});}},updateCharts:function(){if(!this.shouldDrawShapeFlag){return ;}this.handleDroppedChart();var M=this.doRowIntersectionCheck(),L=this.doColIntersectionCheck();this.doUpdateCharts(M.start,M.end,L.start,L.end);},updateVLayout:function(M,L){this.origin.y=L;this.domCanvas.style.height=M+"px";this.domCanvas.style[F.CSS3_TRANSFORM]=F.createTranslateString(0,-L,0);},updateHLayout:function(L,M){this.origin.x=M;this.domCanvas.style.width=L+"px";this.domCanvas.style[F.CSS3_TRANSFORM]=F.createTranslateString(-M,0,0);},doUpdateCharts:function(M,Q,b,e,k){var d,j,h,Y,O,P,L,S,X,V,U,l,a,Z,n=this.origin,N={x:n.x,y:n.y,w:this.width,h:this.height},W={};mstrApp.showProgress({category:"GM",message:mstrmojo.desc(15414,"##% Painted").replace("##",0)+A.call(this)});if(k===undefined){k=false;}var g=(Q-M+1)*(e-b+1),R=0;for(d=M;d<=Q;d+=1){h=this.API.getRowSpan(d,this.depth);O=h[0];L=h[1]-h[0]+1;V=this.getRowPosition(O);l=this.getRowHeight(h);if(l<=0){continue;}W.y=V;W.h=l-this.borderV;for(j=b;j<=e;j+=1){var f=((d-M)*(e-b)+(j-b))/g;if(f>R){mstrApp.showProgress({message:mstrmojo.desc(14806,"##% Painted").replace("##",(f*100).toFixed(0))+A.call(this)});while(R<f&&R<1){R+=0.05;}}Y=this.API.getColSpan(j,this.depth);P=Y[0];S=Y[1]-Y[0]+1;X=this.getColPosition(P);U=this.getColWidth(Y);W.x=X;W.w=U-this.borderH;Z=I(N,W);if(Z.flag!==0){a=this.getChart(O,P);if(!a&&!k){a=this.createMiniChart(U,l,V,X,O,P,L,S,Z);this.addChart(O,P,a);}else{if(a){this.updateMiniChart(a,U,l,V,X,Z);}}if(a){if(this.getActiveFlag(O,P)===false){this.domCanvas.appendChild(a);this.activeCharts.push(a);this.setActiveFlag(O,P,true);}}}j+=Y[1]-j;}d+=h[1]-d;}mstrApp.showProgress({message:mstrmojo.desc(14805,"Finalizing")+A.call(this)});mstrApp.hideProgress({category:"GM"});},doUpdateChartsGlobally:function(){if(!this.shouldDrawShapeFlag){return ;}this.handleDroppedChart();var M=this.doRowIntersectionCheck(),L=this.doColIntersectionCheck();this.doUpdateCharts(M.start,M.end,L.start,L.end);},updateActiveCharts:function(){var R,L,M,a,X,Q,b,O,V,U,P=this.activeCharts,N=P.length,Y=this.origin,W,S={x:Y.x,y:Y.y,w:this.width,h:this.height},Z={};for(R=0;R<N;R++){L=P[R];b=parseInt(L.getAttribute("row"),10);O=parseInt(L.getAttribute("col"),10);V=this.API.getRowSpan(b,this.depth);U=this.API.getColSpan(O,this.depth);X=this.getRowPosition(b);Q=this.getColPosition(O);a=this.getRowHeight(V);M=this.getColWidth(U);Z.y=X;Z.x=Q;Z.h=a-this.borderV;Z.w=M-this.borderH;W=I(S,Z);this.updateMiniChart(L,M,a,X,Q,W);}},clearActiveCharts:function(){var N,R,P,M,L=this.domCanvas,O=this.activeCharts,Q=O.length;for(N=0;N<Q;N++){R=O[N];P=parseInt(R.getAttribute("row"),10);M=parseInt(R.getAttribute("col"),10);this.setActiveFlag(P,M,false);L.removeChild(R);}O.length=0;},doUpdateGridXIYI:function(Z){var U,Q,L=this.nRows,M=this.nCols,R=this.hArr,W=this.wArr,N=Z.rowStart||0,S=Z.colStart||0,X=Z.rowEnd||L-1,b=Z.colEnd||M-1;if(N>X||S>b){return ;}var a=this.getColPosition(S),Y=this.getRowPosition(N),V=false;for(U=N;U<=X;U+=1){if(Y>this._y2){break;}if(R[U]===undefined){R[U]=this.getMiniChartHeight(U,S);V=true;}Y+=R[U];}X=U-1;for(Q=S;Q<=b;Q+=1){if(a>this._x2){break;}if(W[Q]===undefined){W[Q]=this.getMiniChartWidth(N,Q);V=true;}a+=W[Q];}b=Q-1;if(V===true){var P=this.updateAccWidth(S,b),O=this.updateAccHeight(N,X);if(P!==0||O!==0){this.updateCanvas(P,O,false,false);}}},doUpdateGridXDYD:function(P){var Z,Y,U=this.nRows,V=this.nCols,b=this.hArr,L=this.wArr,Q=P.rowStart||U-1,S=P.colStart||V-1,W=P.rowEnd||0,N=P.colEnd||0;if(Q<W||S<N){return ;}var O=this.getColPosition(S+1),R=this.getRowPosition(Q+1),M=O,X=R,a=false;for(Z=Q;Z>=W;Z-=1){if(X<this._y1){break;}if(b[Z]===undefined){b[Z]=this.getMiniChartHeight(Z,S);a=true;}X-=b[Z];}W=Z+1;for(Y=S;Y>=N;Y-=1){if(M<this._x1){break;}if(L[Y]===undefined){L[Y]=this.getMiniChartWidth(Q,Y);a=true;}M-=L[Y];}N=Y+1;if(a===true){var d=this.updateAccWidth(N,S),c=this.updateAccHeight(W,Q);if(d!==0||c!==0){this.updateCanvas(d,c,true,true);this.shiftCharts(d,c);}}},doUpdateGridXIYD:function(Z){var U,Q,L=this.nRows,M=this.nCols,R=this.hArr,W=this.wArr,N=Z.rowStart||L-1,S=Z.colStart||0,X=Z.rowEnd||0,b=Z.colEnd||M-1;if(N<X||S>b){return ;}var a=this.getColPosition(S),Y=this.getRowPosition(N+1),V=false;for(U=N;U>=X;U-=1){if(Y<this._y1){break;}if(R[U]===undefined){R[U]=this.getMiniChartHeight(U,S);V=true;}Y-=R[U];}X=U+1;for(Q=S;Q<=b;Q+=1){if(a>this._x2){break;}if(W[Q]===undefined){W[Q]=this.getMiniChartWidth(U,Q);V=true;}a+=W[Q];}b=Q-1;if(V===true){var P=this.updateAccWidth(S,b),O=this.updateAccHeight(X,N);if(P!==0||O!==0){this.updateCanvas(P,O,false,true);this.shiftCharts(0,O);}}},doUpdateGridXDYI:function(Z){var U,Q,L=this.nRows,M=this.nCols,R=this.hArr,W=this.wArr,N=Z.rowStart||0,S=Z.colStart||M-1,X=Z.rowEnd||L-1,b=Z.colEnd||0;if(N>X||S<b){return ;}var a=this.getColPosition(S+1),Y=this.getRowPosition(N),V=false;for(U=N;U<=X;U+=1){if(Y>this._y2){break;}if(R[U]===undefined){R[U]=this.getMiniChartHeight(U,S);V=true;}Y+=R[U];}X=U-1;for(Q=S;Q>=b;Q-=1){if(a<this._x1){break;}if(W[Q]===undefined){W[Q]=this.getMiniChartWidth(U,Q);V=true;}a-=W[Q];}b=Q+1;if(V===true){var P=this.updateAccWidth(b,S),O=this.updateAccHeight(N,X);if(P!==0||O!==0){this.updateCanvas(P,O,true,false);this.shiftCharts(P,0);}}},updateAccWidth:function(P,R){var O,L=this.nCols,M=0,N=this.wArr,Q=this.wAccArr;for(O=P;O<=R;O+=1){M+=N[O]-this.getColWidth(O)-M;Q[O]+=M;}if(M!==0){for(O=R+1;O<L;O+=1){Q[O]+=M;}}return M;},updateAccHeight:function(M,N){var P,R=this.nRows,L=0,O=this.hArr,Q=this.hAccArr;for(P=M;P<=N;P+=1){L+=O[P]-this.getRowHeight(P)-L;Q[P]+=L;}if(L!==0){for(P=N+1;P<R;P+=1){Q[P]+=L;}}return L;},getMiniChartWidth:function(L,M){if(this.API.getChartWidth){return Math.floor(this.API.getChartWidth(L,M)*this.manager.widthScale);}if(this.manager.API.getChartWidth){return Math.floor(this.manager.API.getChartWidth(L,M)*this.manager.widthScale);}return this.getColWidth(M);},getMiniChartHeight:function(L,M){if(this.API.getChartHeight){return Math.floor(this.API.getChartHeight(L,M)*this.manager.heightScale);}if(this.manager.API.getChartHeight){return Math.floor(this.manager.API.getChartHeight(L,M)*this.manager.heightScale);}return this.getRowHeight(L);},getRowHeight:function(O){var N,M,L=this.hAccArr;if(O instanceof Array){N=O[0]-1;M=O[1];}else{N=O-1;M=O;}return L[M]-((N===-1)?0:L[N]);},getColWidth:function(O){var N,M,L=this.wAccArr;if(O instanceof Array){N=O[0]-1;M=O[1];}else{N=O-1;M=O;}return L[M]-((N===-1)?0:L[N]);},getRowPosition:function(L){if(L===0){return 0;}return this.hAccArr[L-1];},getColPosition:function(L){if(L===0){return 0;}return this.wAccArr[L-1];},doRowIntersectionCheck:function(M,L,N){N=N||false;if(M===undefined){M=this._y1;}else{if(N){M+=this.origin.y;}}if(L===undefined){L=this._y2;}else{if(N){L+=this.origin.y;}}return{start:G(this.hAccArr,M),end:G(this.hAccArr,L)};},doColIntersectionCheck:function(M,L,N){N=N||false;if(M===undefined){M=this._x1;}else{if(N){M+=this.origin.x;}}if(L===undefined){L=this._x2;}else{if(N){L+=this.origin.x;}}return{start:G(this.wAccArr,M),end:G(this.wAccArr,L)};},getChartBBox:function(Q,O,N){var L,R,M=this.origin,P={};L=this.getColPosition(O);R=this.getRowPosition(Q);if(N){L-=M.x;R-=M.y;}P.left=L;P.top=R;P.width=this.getColWidth(O);P.height=this.getRowHeight(Q);return P;},filterRowsByType:function(L,Q,U){var N,M,R,S,O=this.nCols,P=[];for(N=L;N<=Q;N++){for(M=0;M<O;M++){R=this.getChart(N,M);if(R&&R.getAttribute){S=R.getAttribute("type");if(S===U){P.push(R);}}}}return P;},filterColsByType:function(M,U,R){var N,L,P,Q,S=this.nRows,O=[];for(L=M;L<=U;L++){for(N=0;N<S;N++){P=this.getChart(N,L);if(P&&P.getAttribute){Q=P.getAttribute("type");if(Q===R){O.push(P);}}}}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.ProgressBar=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ProgressBar",markupString:'<div id="{@id}" class="mstrmojo-ProgressBar {@cssClass}" style="{@cssText}"><div class="bar"><div class="indicator" style="width: 0"></div></div><div class="text">{@progressText}</div></div>',markupSlots:{barNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onprogressTextChange:function(){this.textNode.innerHTML=this.progressText||"";}},progressText:"",updateProgress:function A(C,B){if(this.hasRendered){this.barNode.firstChild.style.width=Math.min(100,Math.max(0,parseInt(C,10)))+"%";if(B!==undefined){this.set("progressText",B);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","JSONFormat","FormatFill");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumFormatType");var F=mstrmojo.hash,D=mstrmojo.chart,B=D.enums,A=B.EnumFormatType,C=B.EnumFillType;mstrmojo.chart.JSONFormatFill=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFill",mFillType:0,mAlpha:0,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillBevel:null,init:function E(H){H.mFormatType=A.FMT_FILL;this._super(H);F.copyProps(["mFillType","mAlpha","mSimpleColor","mFillGradient","mFillPattern","mFillBevel","id"],H,this);},AppendToJSONObject:function G(N){var I=this.mFillBevel,H=this.mFillGradient,O=this.mFillType,K={FormatType:this.mFormatType,FillType:O,Alpha:this.mAlpha,Bevel:{FillBevelType:I.type,Depth:I.depth,LightAngle:I.lightAngle,Intensity:I.intensity}};switch(O){case C.FT_SIMPLE:var L=this.mSimpleColor;K.SimpleColor={R:L.mR,G:L.mG,B:L.mB};break;case C.FT_TEXTURE:break;case C.FT_PICTURE:break;case C.FT_GRADIENT:var M=H.startGraphColor,J=H.endGraphColor;K.Gradient={StartGraphColor:{R:M.mR,G:M.mG,B:M.mB},EndGraphColor:{R:J.mR,G:J.mG,B:J.mB},Angle:H.angle,HorizontalOffset:H.horizontalOffset,VerticalOffset:H.verticalOffset,GradientType:H.gradientType,EndAlpha:H.endAlpha,Style:H.style,IntermediateColors:H.intermediateColors.slice(0)};break;case C.FT_PATTERN:break;default:break;}N.push(K);}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.Container");mstrmojo.requiresDescs(1442,2140);var C=mstrmojo.dom;mstrmojo.ui.menus.ToolbarEditor=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._IsMenuPopup,mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.menus.ToolbarEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-ToolbarEditor mstrmojo-ui-MenuEditor {@cssClass}" style="..." mstrAttach:mouseover,mouseout,click><div class="te-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},popupConfig:null,children:null,autoCloses:false,locksHover:true,visible:true,onclick:function B(E){C.stopPropogation(null,E.e);},init:function D(F){this._super(F);var E=this.popupConfig,G=E.contents;if(!G){throw new Error("Cannot open editor without editor content.");}this.cssClass=E.cssClass;this.addChildren(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo.Button","mstrmojo.vi._MonitorsAppState");var J=mstrmojo.array;var E=1,B=2,O=4,L=8,H=16,R=32;function K(X,W,U,V,Y,S){return mstrmojo.Button.newWebButton(X,function(Z){this.parent.set("_targetMode",W);Z.cancel();},U,{alias:V,flgVis:Y,flgEnabled:S||undefined});}mstrmojo.vi.ui.TargetSelector=mstrmojo.declare(mstrmojo.Container,[mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.TargetSelector",markupString:'<div id="{@id}" class="mstrmojo-TargetSelector {@cssClass}" style="{@cssText}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},init:function N(S){this._super(S);if(!this.hostId){throw new Error("You must pass the hostId when instantiating mstrmojo.vi.ui.TargetSelector.");}if(!this.srcId){this.srcId=this.hostId;}this.hostBox=mstrmojo.all[this.hostId];this.srcBox=mstrmojo.all[this.srcId];this._targetMode=E;},onAppStateChange:function M(S){var V=mstrmojo.vi.VisualInsightApp.APP_STATES,W=V.SELECTOR_TARGETING,U=this.btnSelect;if(S.valueWas&W||S.value&W){U.set("enabled",!mstrApp.isAppStateSelection());}},hostId:null,srcId:null,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onhostIdChange:function(){this.hostBox=mstrmojo.all[this.hostId];},onsrcIdChange:function(){this.srcBox=mstrmojo.all[this.srcId];},on_targetModeChange:function(){var Y=this._targetMode,Z=this.hostBox,S=this.srcBox,U=this.id,c=S.model,V=c.getVizContentPanel(),b=Y===R,W=function(){this.preChangeTargetSelectionMode(false,c);V.exitTargetSelectionMode(b,this.restoreChildren.bind(this));}.bind(this);this.children.forEach(function(d){d.set("visible",(d.flgVis&Y)>0);d.set("enabled",(!d.flgEnabled||(d.flgEnabled&Y)>0));d.refresh();});this.set("visible",Y!==E);if(b||Y===B){W();if(!b){this.set("_targetMode",this._cancelMode);this.cancel(Z);}this.exitTargetSelectionMode(Z);}else{if(Y===L){this.preChangeTargetSelectionMode(true,c);V.enterTargetSelectionMode(function(e,f){var d=f?E:L;if(!f&&Z.isSelectionDirty(e,f)){d=H;}mstrmojo.all[U].set("_targetMode",d);if(f){Z.setTargets(e);}},this.srcId,Z.getTargetKeys(),this.enterTargetSelectionMode.bind(this),W);}}var X=mstrmojo.vi.VisualInsightApp.APP_STATES,a=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();mstrApp.set("appState",Y===L||Y===H?(a?X.SELECTOR_TARGETING|X.PAUSE:X.SELECTOR_TARGETING):(a?X.PAUSE:X.DEFAULT));}},ignoreLayout:true,setSourceByKey:function(V){var X=this.srcBox.model.getVizContentPanel(),U=(X&&X.children)||[],S=J.find(U,"k",V),W=(S>-1)?U[S]:null;if(W){this.set("srcId",W.id);}},preChangeTargetSelectionMode:function Q(W,U){var X=U.getVizContentPanel().parent.selector,V=U.controller.view,S=V.layoutViewer.docLayout.selector;S.set("isMasked",W);X.set("isMasked",W);},enterTargetSelectionMode:function G(V){var U=this.srcId,S=mstrmojo.all[U].defn;V.setMaskClass(U);V.set("enabled",V.validateTarget&&V.validateTarget(S));},exitTargetSelectionMode:function D(S){S.close();},restoreChildren:function I(S){S.set("enabled",true);S.clearMaskClass();},cancel:function C(S){if(S){S.cancel();}},enterPreSelectMode:function F(){this._cancelMode=O;this.set("_targetMode",O);},enterSelectMode:function P(){this._cancelMode=E;this.set("_targetMode",L);},enterOffMode:function A(){this._cancelMode=E;this.set("_targetMode",E);},children:[K(mstrmojo.desc(4799,"Select Target"),L,true,"btnSelect",O),K(mstrmojo.desc(221,"Cancel"),B,false,"btnCancel",L+H),K(mstrmojo.desc(134,"Apply"),R,true,"btnApply",L+H,H)]});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui._HasScroller");var D=mstrmojo.Widget;mstrmojo.ui.ScrollableContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ScrollableContainer {@cssClass}" style="{@cssText}"><div class="ScrollableContainer-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:D.visibleMarkupMethod,onheightChange:D.heightMarkupMethod,onwidthChange:D.widthMarkupMethod},setupScrollNodes:function C(){this.scrollNode=this.containerNode;},onOpen:function B(){this.updateScrollbars();}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasContextMenu","mstrmojo._IsList","mstrmojo.css","mstrmojo.dom","mstrmojo.ListBase");var B=mstrmojo.css,F=mstrmojo.dom;function E(){var I,N,H=this.itemsContainerNode,J,O=this.items,R=[],Q,L,P=this.padding,M,K=0;this.items.pop();if(!this.width){return ;}I=parseInt(this.width,10);N=H.scrollWidth||F.position(H).w;if(N<=I){return ;}Q=H.lastChild;B.removeClass(Q,"hide");L=F.position(Q).w;J=H.children;M=J.length-1;while(K<M){I-=(F.position(H.children[K]).w+P);if(I<L){break;}K++;}while(K<M){H.removeChild(J[J.length-2]);R.push(O[K++]);}this.set("cm",R);Q.textContent=mstrmojo.desc(15124,"## more").replace("##",R.length);}mstrmojo.vi.ui.TruncatedList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo._HasContextMenu],{scriptClass:"mstrmojo.vi.ui.TruncatedList",cssClass:"mstr-truncList",padding:0,overflowCls:"",getAdditionalProperties:mstrmojo.emptyFn,getItemProps:function D(K,H){var J=this._super(K,H),I=K.style;if(I){J.addStyle(I);}this.getAdditionalProperties(J,H);return J;},buildRendering:function G(){this.items.push({alias:"overflowItem",cls:this.overflowCls+" hide",n:mstrmojo.desc(15124,"## more").replace("##",this.items.length)});if(this._super){this._super();}},setWidth:mstrmojo.emptyFn,postBuildRendering:function C(){this.setWidth();E.call(this);if(this._super){this._super();}},onclick:function A(I){var K=this.itemsContainerNode.children,H=K.length,J=H&&K[H-1];if(J&&J===I.getTarget()){this.cmPos=F.getMousePosition(I.e,I.hWin);this.showContextMenu();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.vi.ui.CalculationWidget=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.vi.ui.CalculationWidget",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-vi-calculation");},_set_selectedItems:function(G,E){var D=(E||[]).map(function(H){return H.t;}),F=this.prevSelection={};D.forEach(function(H){F[H]=true;});this.setSelectedItems(this.items.filter(function(H){return D.indexOf(H.v)>-1;}));},getCalculationTypes:function A(){var F=this.items,G=this.selectedIndices,I=this.prevSelection,E=F.filter(function(K,J){return G[J]&&!I[K.v];}),H=F.filter(function(K,J){return !G[J]&&I[K.v];}),D=function(J){return J.v;};return[E.map(D),H.map(D)];},onselectionChange:function B(D){this._super(D);this.parent.applyCalculation(this.selectedItem.v);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.WidgetMatrix","mstrmojo.array");function D(O){var N,M=[];M.length=O;for(N=0;N<O;N++){M[N]=N;}return M;}function F(Q){var N,P=this.master,R=this.hSlaves,M=this.vSlaves,S=R.length,O=M.length;for(N=0;N<S;N+=1){R[N][Q]();}for(N=0;N<O;N+=1){M[N][Q]();}if(P){P[Q]();}}function J(P){var N,O,M=this.vSlaves,R=M.length,Q=D(this.nRows);for(N=0;N<R;N++){O=M[N];if(O===this.yAxis||O===this.yAxis2){continue;}Q=O.filterRelevantRows(Q,P);}return Q;}function G(P){var N,O,M=this.hSlaves,R=M.length,Q=D(this.nCols);for(N=0;N<R;N++){O=M[N];if(O===this.xAxis||O===this.xAxis2){continue;}Q=O.filterRelevantCols(Q,P);}return Q;}function E(M,V){var S,R,Q,O,P,U,N=this.master;if(this.GMController.checkAttributeIntersection(M,["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy"]).length>0){P=J.call(this,M);U=G.call(this,M);}else{P=[];U=[];}for(S=0,Q=P.length;S<Q;S++){for(R=0,O=U.length;R<O;R++){if(N.filterShapes){N.filterShapes(V,P[S],U[R],M);}}}}function H(P,N,O,M){if(O<P.start||O>P.end){return false;}if(M<N.start||M>N.end){return false;}return true;}function I(M,N,W,X){var V,U,S,Q,Z,P,R,Y,O=this.master;if(this.GMController.checkAttributeIntersection(N,["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy"]).length>0){R=J.call(this,N);Y=G.call(this,N);}else{R=[];Y=[];}for(V=0,S=R.length;V<S;V++){for(U=0,Q=Y.length;U<Q;U++){Z=R[V];P=Y[U];if(H(W,X,Z,P)&&O.efficientFilterShapes){if(M[Z]===undefined){M[Z]={};}if(M[Z][P]===undefined){M[Z][P]={};}O.efficientFilterShapes(M[Z][P],Z,P,N);}}}}function C(M,X,P,V,Y,W){var U,S,R,O,a,N,Q,Z;if(X.checkAttributeIntersection(M,P).length>0){Q=J.call(this,M);Z=G.call(this,M);}else{Q=[];Z=[];}for(U=0,R=Q.length;U<R;U++){for(S=0,O=Z.length;S<O;S++){a=Q[U];N=Z[S];if(H(V,Y,a,N)){if(W[a]===undefined){W[a]={};}if(W[a][N]===undefined){W[a][N]=[];}W[a][N].push(M);}}}}function A(S,M,V){var R,O,N,U,P,Q;for(U in S){if(S.hasOwnProperty(U)&&U!=="rowIndex"&&U!=="colIndex"){Q=S[U];for(P in Q){if(Q.hasOwnProperty(P)){N=Q[P][M];O=(N&&N.length)||0;for(R=0;R<O;R++){V.push(N[R]);}}}}}}function K(S,R){var P,N,Q,O,M=this.vSlaves,U=M.length;for(P=0;P<U;P++){Q=M[P];if(Q===this.yAxis||Q===this.yAxis2){continue;}O=Q.filterChartsByRow(S,P);if(O){for(N=0;N<O.length;N++){R.push(O[N]);}return true;}}return false;}function B(S,R){var P,N,Q,O,M=this.hSlaves,U=M.length;for(P=0;P<U;P++){Q=M[P];if(Q===this.xAxis||Q===this.xAxis2){continue;}O=Q.filterChartsByCol(S,P);if(O){for(N=0;N<O.length;N++){R.push(O[N]);}return true;}}return false;}mstrmojo.WidgetMatrixManager=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.WidgetMatrixManager",isAsynchronous:false,widthScale:1,heightScale:1,hSlaves:null,vSlaves:null,yAxis:undefined,yAxis2:undefined,xAxis:undefined,xAxis2:undefined,master:undefined,hArr:null,wArr:null,hAccArr:null,wAccArr:null,widthCache:null,heightCache:null,API:null,GMController:null,init:function(M){if(this._super){this._super(M);}this.hArr=[];this.wArr=[];this.hAccArr=[];this.wAccArr=[];this.widthCache=[];this.heightCache=[];this.hSlaves=[];this.vSlaves=[];this.API={getChartWidth:undefined,getChartHeight:undefined};},setMaster:function(M){this.master=M;},setSlaves:function(M,N){this.hSlaves=M;this.vSlaves=N;},setAxises:function(P,M,N,O){this.yAxis=P;this.xAxis=M;this.yAxis2=N;this.xAxis2=O;},setDimensions:function(R,S,Q,N){var P,M=this.heightCache,O=this.widthCache;this.nRows=R;this.nCols=S;this.chartW=Q;this.chartH=N;for(P=0;P<R;P+=1){M[P]=N;}for(P=0;P<S;P+=1){O[P]=Q;}},enableXSplitter:function(N){var M=this.xAxis,O=this.xAxis2;if(M){M.enableSplitter(N);}if(O){O.enableSplitter(N);}},enableYSplitter:function(M){var O=this.yAxis,N=this.yAxis2;if(O){O.enableSplitter(M);}if(N){N.enableSplitter(M);}},enableRowHeaderSplitter:function(M){var N,Q,O,P=this.vSlaves;for(N=0,Q=P.length;N<Q;N++){O=P[N];if(O===this.yAxis||O===this.yAxis2){continue;}O.enableSplitter(M);}},enableColHeaderSplitter:function(M){var O,Q,P,N=this.hSlaves;for(O=0,Q=N.length;O<Q;O++){P=N[O];if(P===this.xAxis||P===this.xAxis2){continue;}P.enableSplitter(M);}},enableInChartRowSplitter:function(M){var N,P,O=this.vSlaves;for(N=0,P=O.length;N<P;N++){O[N].enableRowSplitter(M);}this.master.enableRowSplitter(M);},enableInChartColSplitter:function(M){var O,P,N=this.hSlaves;for(O=0,P=N.length;O<P;O++){N[O].enableColSplitter(M);}this.master.enableColSplitter(M);},doUpdateInChartSplitters:function(P,M){this.master.doUpdateInChartSplitters(true,true);var O,R,Q=this.vSlaves,N=this.hSlaves;for(O=0,R=Q.length;O<R;O++){Q[O].doUpdateInChartSplitters(P,M);}for(O=0,R=N.length;O<R;O++){N[O].doUpdateInChartSplitters(P,M);}},binding:function(){var R,Q,S=this,O=this.master,V=this.hSlaves,P=this.vSlaves,M=V.length,U=P.length,N=this.API;if(!O){return ;}if(!N.getChartWidth){N.getChartWidth=function(a,c){var Y,b,W,Z=0,X=S.widthCache;if(c instanceof Array){b=c[0];W=c[1];}else{b=c;W=c+1;}for(Y=b;Y<W;Y++){Z+=X[Y];}return Z;};}if(!N.getChartHeight){N.getChartHeight=function(a,c){var Y,b,X,Z=0,W=S.heightCache;if(a instanceof Array){b=a[0];X=a[1];}else{b=a;X=a+1;}for(Y=b;Y<X;Y++){Z+=W[Y];}return Z;};}for(R=0;R<M;R+=1){Q=V[R];Q.wArr=O.wArr;Q.wAccArr=O.wAccArr;Q.offset.x=O.offset.x;Q.API.getChartWidth=N.getChartWidth;Q.API.getChartHeight=N.getChartHeight;}for(R=0;R<U;R+=1){Q=P[R];Q.hArr=O.hArr;Q.hAccArr=O.hAccArr;Q.offset.y=O.offset.y;Q.API.getChartWidth=N.getChartWidth;Q.API.getChartHeight=N.getChartHeight;}this.master.API.getChartWidth=N.getChartWidth;this.master.API.getChartHeight=N.getChartHeight;},updateHSlaves:function(){if(!this.master){return ;}var N,R,Q=this.master,M=Q.origin,O=Q.domCanvas.offsetWidth,S=this.hSlaves,P=S.length;for(N=0;N<P;N++){R=S[N];R.updateHLayout(O,M.x);R.updateActiveCharts();R.updateCharts();}},updateVSlaves:function(){if(!this.master){return ;}var Q,S,R=this.master,P=R.origin,M=R.domCanvas.offsetHeight,O=this.vSlaves,N=O.length;for(Q=0;Q<N;Q++){S=O[Q];S.updateVLayout(M,P.y);S.updateActiveCharts();S.updateCharts();}},isVSlaveNodeValid:function(P,N,O){var M=(P===this.yAxis2)||(P===this.yAxis&&!O);if(N==="row"){return !M;}return M;},isHSlaveNodeValid:function(P,O,M){var N=(P===this.xAxis)||(P===this.xAxis2&&!M);if(O==="column"){return !N;}return N;},updateSubSetOfVSlaves:function(R,V){if(!this.master){return ;}var P,O,M=this.master,S=M.origin,U=M.domCanvas.offsetHeight,N=this.vSlaves,Q=N.length;for(P=0;P<Q;P++){O=N[P];if(this.isVSlaveNodeValid(O,R,V)){O.updateVLayout(U,S.y);O.updateActiveCharts();}}},updateSubSetOfHSlaves:function(S,N){if(!this.master){return ;}var R,Q,O=this.master,V=O.origin,P=O.domCanvas.offsetWidth,U=this.hSlaves,M=U.length;for(R=0;R<M;R++){Q=U[R];if(this.isHSlaveNodeValid(Q,S,N)){Q.updateHLayout(P,V.x);Q.updateActiveCharts();}}},drawCharts:function(){var M=this.master;if(!M){return ;}M.updateGrid();this.updateHSlaves();this.updateVSlaves();M.updateCharts();},dismissLassoSelector:function(){F.call(this,"dismissLassoSelector");},updateXYAxis:function(){var P=this.xAxis,N=this.xAxis2,O=this.yAxis,M=this.yAxis2;if(P){P.clearCharts();P.updateCharts();}if(N){N.clearCharts();N.updateCharts();}if(O){O.clearCharts();O.updateCharts();}if(M){M.clearCharts();M.updateCharts();}},scrollTo:function(M,O){var N=this.master;if(!N){return ;}N.scrollTo(M,O);this.translateHSlaves(M);this.translateVSlaves(O);},translateHSlaves:function(M){var N,P=this.hSlaves,O=P.length;for(N=0;N<O;N+=1){P[N].scrollTo(M,undefined);}},translateVSlaves:function(P){var O,N=this.vSlaves,M=N.length;for(O=0;O<M;O+=1){N[O].scrollTo(undefined,P);}},feedChartWidthInfo:function(M){var Q=this.master;if(!Q){return ;}Q.resetHGrid();var N,R,O=this.nCols,S=this.widthCache,P=Q.wArr;S.length=0;S.length=O;for(N=0;N<O;N++){R=M[N];if(R){R*=this.widthScale;S[N]=R;P[N]=R;}else{S[N]=this.chartW;}}Q.initAccWidth();},feedChartHeightInfo:function(M){var P=this.master;if(!P){return ;}P.resetVGrid();var O,R,N=this.nRows,S=this.heightCache,Q=P.hArr;S.length=0;S.length=N;for(O=0;O<N;O++){R=M[O];if(R){R*=this.heightScale;S[O]=R;Q[O]=R;}else{S[O]=this.chartH;}}P.initAccHeight();},resizeBorder:function(M,R,Q){var N=this.master;if(!N){return ;}var S,Z=M.nRows,W=M.nCols,X,V=[],P=[],O=[],Y=0,U=0;if(!!Q){for(S=0;S<Z;S++){Y+=M.getRowHeight(S);}X=Q/Y;this.heightScale*=(1+X);for(S=0;S<Z;S++){if(M.hArr[S]!==undefined){V.push(S);O.push(M.getMiniChartHeight(S,0)-M.getRowHeight(S));}else{M.hArr[S]=M.getMiniChartHeight(S,0);}}N.resizeRow(V,O,Z);M.updateAccHeight(0,Z-1);N.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartHeightScale:this.heightScale});}if(!!R){for(S=0;S<W;S++){U+=M.getColWidth(S);}X=R/U;this.widthScale*=(1+X);for(S=0;S<W;S++){if(M.wArr[S]!==undefined){P.push(S);O.push(M.getMiniChartWidth(0,S)-M.getColWidth(S));}else{M.wArr[S]=M.getMiniChartWidth(0,S);}}this.master.resizeCol(P,O,W);M.updateAccWidth(0,W-1);N.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale});}N.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeRow:function(M,W,X){var O=this.master;if(!O){return ;}var Q,V=M.nRows,U=M.API.getRowSpan(W,M.depth),N=M.getRowHeight(U),S=X/N,R=[],P=[];this.heightScale*=(1+S);for(Q=0;Q<V;Q++){if(M.hArr[Q]!==undefined){R.push(Q);P.push(M.getMiniChartHeight(Q,0)-M.getRowHeight(Q));}else{M.hArr[Q]=M.getMiniChartHeight(Q,0);}}O.resizeRow(R,P,V);M.updateAccHeight(0,V-1);O.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartHeightScale:this.heightScale});O.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeCol:function(M,W,X){var N=this.master;if(!N){return ;}var R,S=M.nCols,U=M.API.getColSpan(W,M.depth),Q=M.getColWidth(U),V=X/Q,P=[],O=[];this.widthScale*=(1+V);for(R=0;R<S;R++){if(M.wArr[R]!==undefined){P.push(R);O.push(M.getMiniChartWidth(0,R)-M.getColWidth(R));}else{M.wArr[R]=M.getMiniChartWidth(0,R);}}this.master.resizeCol(P,O,S);M.updateAccWidth(0,S-1);this.master.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale});this.master.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},resizeMiniCharts:function(N){var M=this;M.chartWidthScale=N;M.chartHeightScale=N;M.master.resizeMiniCharts(N);},resizeRowCol:function(N,a,Z){var O=this.master;if(!O){return ;}var S,V=N.nCols,W=N.API.getColSpan(a,N.depth),R=N.getColWidth(W),P=[],b=[],Y=N.nRows,X=N.API.getRowSpan(a,N.depth),M=N.getRowHeight(X),U=[],Q=[];this.widthScale=Z;this.heightScale=Z;for(S=0;S<Y;S++){if(N.hArr[S]!==undefined){U.push(S);Q.push(N.getMiniChartHeight(S,0)-N.getRowHeight(S));}}for(S=0;S<V;S++){if(N.wArr[S]!==undefined){P.push(S);b.push(N.getMiniChartWidth(0,S)-N.getColWidth(S));}}this.master.resizeCol(P,b,V);this.master.resizeRow(U,Q,Y);this.master.adjustOriginIfNeeded();this.raiseEvent({name:"MiniChartResized",chartWidthScale:this.widthScale,chartHeightScale:this.heightScale});this.master.doUpdateChartsGlobally();this.raiseEvent({name:"UpdateSelections"});},toggleClsByRows:function(N,Q,O,R,V){if(R===undefined){R=true;}var P,M=this.master,U=this.vSlaves,S=U.length;for(P=O;P<S;P++){U[P].toggleClsByRows(N,Q,R,V);}if(M){M.toggleClsByRows(N,Q,R,V);}},toggleClsByCols:function(O,V,P,R,U){if(R===undefined){R=true;}var Q,N=this.master,S=this.hSlaves,M=S.length;for(Q=P;Q<M;Q++){S[Q].toggleClsByCols(O,V,R,U);}if(N){N.toggleClsByCols(O,V,R,U);}},intersectCheck4Row:function(M){return this.master.doRowIntersectionCheck(0,M,true);},intersectCheck4Col:function(M){return this.master.doColIntersectionCheck(0,M,true);},getRowStartDepth:function(Q){var N,P,O,R=this.vSlaves,M=R.length;for(N=0;N<M;N++){P=R[N];if(P===this.yAxis||P===this.yAxis2){break;}O=P.API.getRowSpan(Q,N);if(O[1]===Q){return N;}}return N;},collectDepths:function L(W,V,Q,N,S){var P,O,R,M;if(N==="row"){R=this.vSlaves[W];M=R.API.getRowSpan;}else{if(N==="col"){R=this.hSlaves[W];M=R.API.getColSpan;}}if(!R){throw new Error("vSlave number does not match the depth");}if(R===this.yAxis||R===this.yAxis2||R===this.xAxis||R===this.xAxis2){for(P=V;P<Q;P++){S[P]=W;}return S;}for(P=V;P<Q;P++){var U=M(P,W),O=U[1]-U[0];if(U[1]-U[0]>0){this.collectDepths(W+1,P,P+O,N,S);P+=O;}S[U[1]]=W;}return S;},collectRowDepths:function(M){return this.collectDepths(0,0,M,"row",[]);},collectColDepths:function(M){return this.collectDepths(0,0,M,"col",[]);},getColStartDepth:function(M){var O,Q,R,N=this.hSlaves,P=N.length;for(O=0;O<P;O++){Q=N[O];if(Q===this.xAxis||Q===this.xAxis2){break;}R=Q.API.getColSpan(M,O);if(R[1]===M){return O;}}return O;},getRowOffset:function(N){var M=this.master;return M.getRowPosition(N)-M.origin.y;},getColOffset:function(M){var N=this.master;return N.getColPosition(M)-N.origin.x;},getRowHeight:function(M){return this.master.getRowHeight(M);},getColWidth:function(M){return this.master.getColWidth(M);},filterCharts:function(O){var N,R,M,Q,P=[];if(O.constructor===Array){R=O.length;for(N=0;N<R;N++){Q=O[N];delete Q.hashKey;if(!K.call(this,Q,P)){B.call(this,Q,P);}}}else{for(M in O){if(O.hasOwnProperty(M)){Q=O[M];if(!K.call(this,Q,P)){B.call(this,Q,P);}}}}return P;},isSelectionRuleEqual:function(N,M){},generateHighlightKeys:function(M){},filterShapesDeprecated:function(P){var O,Q,N,M=[];if(P.constructor===Array){Q=P.length;for(O=0;O<Q;O++){delete P[O].hashKey;E.call(this,P[O],M);}}else{for(N in P){if(P.hasOwnProperty(N)){E.call(this,P[N],M);}}}return M;},filterShapes:function(O){if(!O){return[];}var S,R,Q,P,N=this.master,U=N.doRowIntersectionCheck(),W=N.doColIntersectionCheck(),V=this.GMController,M=V.highLightShapeIndex,X=[];if(V.resetHighLightIndex){M=V.highLightShapeIndex={};this.selectHighLightShapes(M,O,U,W);}for(S=U.start,Q=U.end;S<=Q;S++){for(R=W.start,P=W.end;R<=P;R++){if(M[S]&&M[S][R]){N.selectHighLightShapes(M[S][R],S,R,X);}}}return X;},selectHighLightShapes:function(M,O,V,Z){var S,R,Y,a,Q,U,X=this.GMController,N=this.master,P=["Rows","Columns","XAxis","YAxis","ColorBy","BreakBy","SliceBy"],W={};if(O.constructor===Array){R=O.length;for(S=0;S<R;S++){delete O[S].hashKey;C.call(this,O[S],X,P,V,Z,W);}}else{for(Y in O){if(O.hasOwnProperty(Y)){C.call(this,O[Y],X,P,V,Z,W);}}}for(a in W){if(W.hasOwnProperty(a)){U=W[a];if(M[a]===undefined){M[a]={};}for(Q in U){if(U.hasOwnProperty(Q)){if(M[a][Q]===undefined){M[a][Q]={};}N.efficientFilterShapes(M[a][Q],a,Q,U[Q]);}}}}},getTheRightKey:function(c,Z){var U,M,R,O,b=this.GMController,V=b.view.model,S,Y=b.getAttributeIds(),W,d,a,N,X,Q=false,P={};for(N in Z){X=Z[N];if(Y.hasOwnProperty(N)){P[N]=X;continue;}Q=true;S=V.getLinkedAttributes(N)||[];M=S.length;for(U=0;U<M;U++){if(Y.hasOwnProperty(S[U])){W=S[U];break;}}a=Y[W]||[];M=a.length;for(U=0;U<M;U++){O=X.length;for(R=0;R<O;R++){if(V.compareElementsId(a[U].id,X[R].id)){d=a[U];break;}}if(d){break;}}P[W]=[d];}if(!Q){return c;}return this.master.getSelectionHash(P);},resetShapeHighlightMap:function(){},constructShapeHighlightMap:function(){},resize:function(O,M){var P,S,Q=this.master,R=this.hSlaves,N=this.vSlaves;if(O===undefined){O=0;}if(M===undefined){M=0;}if(O!==0){S=R.length;for(P=0;P<S;P++){R[P].resize(O,0);}}if(M!==0){S=N.length;for(P=0;P<S;P++){N[P].resize(0,M);}}if(O!==0||M!==0){Q.resize(O,M);}},queryRowHeight:function(M){var P=this,O=this.master,N=function(Q,R){if(O.isRowInSight(Q)){P.resizeRow(P.master,Q,R);P.doUpdateChartsGlobally();}};},queryColWidth:function(N){var P=this,O=this.master,M=function(R,Q){if(O.isColInSight(R)){P.resizeCol(P.master,R,Q);P.doUpdateChartsGlobally();}};},queryMiniChart:function(N,M){var P=this.master,O=function(R,Q){if(P.isRowInSight(R)&&P.isColInSight(Q)){P.doUpdateCharts(R,R,Q,Q);}};},queryYAxis:function(N){var M=this.yAxis,O=function(P){M.doUpdateCharts(P,P,0,0);};},queryXAxis:function(N){var O=this.xAxis,M=function(P){O.doUpdateCharts(0,0,P,P);};},queryRowHeader:function(O,P){var M=this.vSlaves[P],N=function(Q){M.doUpdateCharts(Q,Q,0,0);};},queryColHeader:function(M,P){var O=this.hSlaves[P],N=function(Q){O.doUpdateCharts(0,0,Q,Q);};},queryRowSpan:function(M){var P=this,O=this.master,R=this.vSlaves,Q=R.length,N=function(U){var S;for(S=0;S<Q-1;S+=1){R[S].doUpdateCharts(U,U,0,0);}};},queryColSpan:function(M){var N=this.hSlaves,P=N.length,O=function(){var Q;for(Q=0;Q<P-1;Q+=1){N[Q].doUpdateCharts(0,0,M,M);}};},filterRowHeaders:function(O,P,Q,N){var M,R=this.vSlaves;return R[Q].filterRowsByType(O,P,N);},filterColHeaders:function(R,M,Q,P){var O,N=this.hSlaves;return N[Q].filterColsByType(R,M,P);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Button","mstrmojo.EnumRWUnitType","mstrmojo.vi.models.VIComponentMap","mstrmojo.VisEnum","mstrmojo.gmaps.EnumGraphicType","mstrmojo.models.template.DataInterface");mstrmojo.requiresDescs(15518,15519,15526);var F=mstrmojo.array,C=12,B=4,D="-1",H=1,G=2,I=-1,E=mstrmojo.Button.newWebButton,J=mstrmojo.vi.models.VIComponentMap.TYPES,A=mstrmojo.models.template.DataInterface;mstrmojo.vi.models._CheckDataCards=mstrmojo.provide("mstrmojo.vi.models._CheckDataCards",{_mixinName:"mstrmojo.vi.models._CheckDataCards",CARDLIMIT:mstrmojo.VisEnum.VIS_CARDLIMIT.NON_GRID,isUnitRestrictedInViz:function(){var P=this.getHost&&this.getHost(),O=P&&P.defn,L=!!(O&&O.iifp);if(L){return false;}var K=this.docModel,M=[],N=K.getVIComponent(J.FILTER_PANEL),Q=N&&N.parent;M=M.concat((Q&&Q.getFilterDefinitions())||[]);return M.length;},_addInLargeItems:[],_columnCardinalityCount:1,_totalRow:0,clearCardinalityFlags:function(){this._addInLargeItems=[];this._columnCardinalityCount=1;this._totalRow=0;},existLargeOrManyItems:function(){return(!!this._addInLargeItems.length||this._columnCardinalityCount>this.CARDLIMIT);},existLargeRowCount:function(){return(this._totalRow>mstrmojo.vi.models.editors.XtabEditorModel.ENUM_MAX_ROWS_OUTLINE);},findTotalColumnCount:function(P,Q){var R=this,U,M=1,O=0,S=this.getHost().gridData;R._columnCardinalityCount=1;if(S){if(Q&&Q.id===H){var K=S.rw,V=K&&K.row;R._columnCardinalityCount=(V&&V.tc)||1;return ;}var L=S.ghs,N=L&&L.chs;F.forEach(N&&N.items,function(W){if(W.items){M=Math.max(M,W.items.length);}});}F.forEach(P,function(W){if(Q&&Q.id===G){Q.items.every(function(X){if(X.t===C&&X.did===W.did&&X.card){O++;M=M/X.card;return false;}return true;});}U=W.cardg>0?W.cardg:W.card;if(!U&&W.otp===C&&W.es){U=W.es.length+1;}if(U){M=M*U;}});R._columnCardinalityCount=(O===P.length)?1:M;},findEstimatedTotalRow:function(P,L,K){var R=this,X,U=1,M=0,S=this.getHost().gridData,W=this.docModel,K=K||[],Q=W&&W.datasets;R._totalRow=1;function O(a){var Z=0;Object.keys(Q).every(function(b){return Q[b].att&&Q[b].att.every(function(c){if(c.did===a){Z=c.card;return false;}return true;});});return Z;}function N(Z){return P.some(function(a){return Z.did===a.did;})||K.some(function(a){return Z.did===a.did;});}if(S){var Y=S.gsi.rows,V=S.gsi.mx;F.forEach(Y,function(Z){if(N(Z)){return ;}if(Z.t===C){U*=O(Z.did)||1;}else{if(Z.t===B){if(Z.did===D&&V){M=V.length;F.forEach(V,function(a){N(a)&&M--;});}}}});}F.forEach(P,function(Z){if(Z.t===B){if(L===H||L===I){if(Z.did===D&&S&&S.gsi.mx){M=S.gsi.mx.length;}else{M++;}}}X=Z.cardg>0?Z.cardg:Z.card;if(!X&&Z.otp===C&&Z.es){X=Z.es.length+1;}if(X){if(L===H){U=U*X;}}});U=U+U*M;R._totalRow=U;return R._totalRow;},addAttributeNameAndTargetVisForAddUnits:function(R,P,Q,O,M){if(!R){return ;}var N={data:R},K=R&&R.vp,L;Q=Q||R&&R.vis&&R.vis.vn;O=O||K&&K.gtp;M=M||K&&K.ln;L=Q===mstrmojo.vi.viz.EnumVizStyles.GOOGLE_MAP||Q===mstrmojo.vi.viz.EnumVizStyles.ESRI_MAP||Q===mstrmojo.vi.viz.EnumVizStyles.MAPBOX;F.forEach(P,function(S){var V=S.id,U;if(V&&!S.attributeName){U=A.prototype.getUnitById.call(N,V);S.attributeName=U&&U.unit&&U.unit.n;}if(O===mstrmojo.gmaps.EnumGraphicType.Area&&L){if(!S.targetVis){S.targetVis={};}S.targetVis.vis=Q;S.targetVis.gtp=O;S.targetVis.ln=M;}else{if(S.targetVis){S.targetVis=undefined;}}});},findLargeItemsForAddUnits:function(K,L,O){var N=this,P,M={};if((!L&&!N.isUnitRestrictedInViz())||L){K.forEach(function(S){var Q=S.cardg>0?S.cardg:S.card;P=!!O?O:N.CARDLIMIT;if(S.targetVis&&S.targetVis.gtp===mstrmojo.gmaps.EnumGraphicType.Area){P=mstrmojo.VisEnum.VIS_CARDLIMIT.AREA_MAP;}if(Q&&Q>P){var U=S.attributeName||S.n;if(!M[U]){M[U]=true;var R=S.targetVis&&S.targetVis.ln?(U+"("+S.targetVis.ln+") ("+Q+")"):U+" ("+Q+")";N._addInLargeItems.push(R);}}});}},warnAndExecCallBackForOutlineAddUnits:function(M,L){var K=this,L=L||mstrmojo.emptyFn;if(this.existLargeRowCount()){mstrmojo.confirm(mstrmojo.desc(15792,"The dossier will attempt to display more than 5000 rows in outline mode. This may affect performance and stability. Do you want to continue?"),null,{id:"OutlineModeWarningDialog",title:mstrmojo.desc(11812,"Notification"),allowHTML:false,buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(212,"Continue"),M),mstrmojo.Button.newWebButton(mstrmojo.desc(3416,"Cancel"),L)],onPreClose:function(){L();return true;}});}else{M();}},checkAndWarnForOutlineAddUnits:function(K,M,O,N,L){if(this.getHost().isOutlineMode){this.findEstimatedTotalRow(K,M,L);this.warnAndExecCallBackForOutlineAddUnits(O,N);}else{O();}},warnAndExecCallBackForAddUnits:function(R,P,M,Q){if(this.existLargeOrManyItems()&&!mstrApp.isAppStatePresentation()){var N=this._addInLargeItems,O=N.length,L;if(O>1){L=mstrmojo.desc(15518,"The following attributes contain a large number of elements: ##. This action may impact dossier performance.").replace("##",N);}else{if(O===1){L=mstrmojo.desc(15519,"The attribute ## has too many elements. This action may impact dossier performance.").replace("##",N);}else{L=mstrmojo.desc(15526,"The dossier will attempt to display more than ### columns. This can affect performance and stability.").replace("###",this.CARDLIMIT);}}var K=[];if(O&&P){K.push(E(mstrmojo.desc(7977,"Move to Rows"),function(){P();},true));}K.push(E(mstrmojo.desc(212,"Continue"),function(){R();}));K.push(E(mstrmojo.desc(2140,"Cancel"),function(){if(M){if(Q){Q();}else{if(mstrApp.isWorkstation&&mstrApp.isSingleTier){window.FormWrapper.closeWindow("{}");}else{mstrmojo._DocToolbarActions.close.call({model:{isnew:false}});}}}}));mstrmojo.warn(L,{},{buttons:K});N.splice(0,N.length);return ;}R();},checkAndWarnLargeItemsForAddUnits:function(N,R,P,K,M,L,O,Q){this.clearCardinalityFlags();if(!M||M.id===G){this.findLargeItemsForAddUnits(N,L,O);}if(K){this.findTotalColumnCount(N,M);}this.warnAndExecCallBackForAddUnits(R,P,L,Q);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TargetMask","mstrmojo.css","mstrmojo.desc");var A="targetMask";mstrmojo.vi.ui._HasTargets=mstrmojo.provide("mstrmojo.vi.ui._HasTargets",{_mixinName:"mstrmojo.vi.ui._HasTargets",init:function B(C){if(this._super){this._super(C);}this.addChildren([{scriptClass:"mstrmojo.vi.ui.TargetMask",alias:A,slot:"domNode",tooltipContent:this.maskTooltip,allowFilters:this.allowFilters}]);},setMaskClass:function(C){if(this[A].setMaskClass(C)){this._originalContextMenu=this.shouldShowCustomizeContextMenu;this.shouldShowCustomizeContextMenu=function(){return false;};this._originalIsDraggable=this.draggable;this.draggable=false;}},clearMaskClass:function(){this.shouldShowCustomizeContextMenu=this._originalContextMenu;delete this._originalContextMenu;this.draggable=this._originalIsDraggable;delete this._originalIsDraggable;this[A].clearMaskClass();}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.GraphMatrixHelper","mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.KnownVisualizations","mstrmojo.vi.util.ThresholdUtils","mstrmojo.gm.GMEnums","mstrmojo.gmaps.MapEnums","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.gmaps._AreaMapHelper");var X=mstrmojo,S=X.array,W=X.vi.viz,L=X.gmaps,M=W.GraphMatrixHelper,V=W.EnumDSSDropZones,A=W.KnownVisualizations,D=X.vi.util.ThresholdUtils,Q=X.chart.model.enums.EnumDSSObjectType,H=L.EnumGraphicType,N=L.EnumPropertyType,Z=X.gm.EnumABLDirection,J=L._AreaMapHelper;function P(a){return a&&a.getHostModel&&a.getHostModel();}function F(b){var a=false;if(b.t!==4){S.forEach(b.fs||[],function(c){if(c.ftr||c.bftp===1||c.bftp===8||c.bftp===9){a=true;return false;}});}return a;}function G(b,d){var a=b.getHost(),c=a.GMController;if(c){switch(d){case"bp":return c.isBoxPlot;case"wf":return c.isWaterfall;case"hg":return c.isHistogram;default:break;}}return false;}function I(AG,g,AJ,p,s){var f=AJ.dz,AH=AJ.gsi||{},c=[],h=false,b=false,d=false,y=p.getHost().getChartStyle()==="NewGraphMatrixVisualizationStyle",j=G(p,"bp"),a=G(p,"wf"),AD=G(p,"hg"),q=function(AK){return AK.shape==="Pie"||AK.shape==="Ring";},AE=function(){var AK=p.getHost();return AK&&AK.GMController&&AK.GMController.isBubbleOrScatter();},z=function(AK,AO){c.push({act:"addDropZoneUnit",zoneId:AK,datasetId:g,unitId:AG.did,unitType:AG.t,unitPos:AO||0});h=true;d=(AK===V.ColorBy);b=(AK===V.AdditionalMetrics);var AN=["Reserved","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy"],AM=AN[AK],AL=AG.t===4?"TemplateMetric":"TemplateUnit";if(f[AM]){if(!f[AM][AL]){f[AM][AL]=[];}f[AM][AL].push(AG);}},x=function(AK,AL){c.push({act:"removeDropZoneUnit",zoneId:AK,unitId:AL.did,unitType:AL.t});},AC=function(AK){c.push({act:"addDropZoneUnit",zoneId:AK,unitId:"00000000000000000000000000000000",unitType:0});},AF=new W.GraphMatrixHelper({data:AJ}),AI=function(AK){if(!AF.shape){AF.shape=AK;s=true;}},n=function(AK,AQ){z(AK,AQ);if(!AF.metricsDropZone){if(AK===V.XAxis&&AF.xAxisObjects.length){AC(V.Columns);}else{if(AK===V.YAxis&&AF.yAxisObjects.length){AC(V.Rows);}}}var AN=p.getHost(),AO=AN.GMController,AM,AP=AO.getChartInfo(),AL={dndGM:false};if(AO.shallWeUseGroupInfo){AM=AO.getGroupInfo();if((AP.dirc===Z.VERTICAL&&AK===V.YAxis)||(AP.dirc===Z.HORIZONTAL&&AK===V.XAxis)){AM=p.fillGroupInfo(AL,AM,AG.did,true);}AO.setGroupInfo(AM);s=true;}};AF.setData(AJ.dz);AF.setMetricsDropZone(AJ.dz);if(AG.t===Q.DssTypeMetric){if(AD){if(!AF.yAxisObjects.length){z(V.YAxis);}else{x(V.YAxis,AF.yAxisObjects[0]);z(V.YAxis);}}else{if(AF.exists(AG,"yAxisObjects")||AF.exists(AG,"xAxisObjects")||AF.exists(AG,"sizeByObjects")||AF.exists(AG,"colorByObjects")||AF.exists(AG,"angleObjects")){var AB=!AF.exists(AG,"yAxisObjects")&&!AF.exists(AG,"xAxisObjects");if(AB&&(!AF.yAxisObjects.length||AF.yAxisObjects[0].t===4)){n(V.YAxis);}else{if(AB&&(!AF.xAxisObjects.length||AF.xAxisObjects[0].t===4)){n(V.XAxis);}else{if(!AF.angleObjects.length&&q(AF)){z(V.Angle);}else{if(!j&&!AF.colorByObjects.length){z(V.ColorBy);}else{if(!AF.sizeByObjects.length||(!AF.exists(AG,"sizeByObjects")&&AE())){z(V.SizeBy);}}}}}}else{if(!j&&!AF.angleObjects.length&&q(AF)){z(V.Angle);}else{if((!AF.yAxisObjects.length)&&(!AF.xAxisObjects.length)){n(V.YAxis);if(!j&&!a){AI(M.PROP_SHAPE_BAR);}}else{if(AF.yAxisObjects.length&&!AF.xAxisObjects.length){if((j||a)&&AF.yAxisObjects[0].t===4){n(V.YAxis);}else{if(!AF.exists(AG,"yAxisObjects")){n(V.XAxis);if(!j&&!a){AI(p.isMetricZone(V.YAxis)?M.PROP_SHAPE_CIRCLE:M.PROP_SHAPE_BAR);}}}}else{if((!AF.yAxisObjects.length)&&AF.xAxisObjects.length){if((j||a)&&AF.xAxisObjects[0].t===4){n(V.XAxis);}else{if(!AF.exists(AG,"xAxisObjects")){n(V.YAxis);if(!j&&!a){AI(p.isMetricZone(V.XAxis)?M.PROP_SHAPE_CIRCLE:M.PROP_SHAPE_BAR);}}}}else{if((AF.xAxisObjects[0].t!==4)&&(AF.yAxisObjects[0].t===4)&&!AF.exists(AG,"yAxisObjects")&&!AF.exists(AG,"sizeByObjects")&&!AF.exists(AG,"colorByObjects")){n(V.YAxis);if(AF.metricsDropZone!==M.PROP_COLUMNS&&AF.metricsDropZone!==M.PROP_ROWS&&(!AF.colorByObjects.length||AF.colorByObjects[0].t!==4)){AC(V.ColorBy);}}else{if((AF.xAxisObjects[0].t===4)&&(AF.yAxisObjects[0].t!==4)&&!AF.exists(AG,"xAxisObjects")&&!AF.exists(AG,"sizeByObjects")&&!AF.exists(AG,"colorByObjects")){n(V.XAxis);if(AF.metricsDropZone!==M.PROP_COLUMNS&&AF.metricsDropZone!==M.PROP_ROWS&&(!AF.colorByObjects.length||AF.colorByObjects[0].t!==4)){AC(V.ColorBy);}}else{if((AF.xAxisObjects[0].t===4)&&(AF.yAxisObjects[0].t===4)&&!AF.exists(AG,"xAxisObjects")&&!AF.exists(AG,"yAxisObjects")&&!AF.exists(AG,"sizeByObjects")&&!AF.exists(AG,"colorByObjects")){if(!j&&!AF.colorByObjects.length&&AF.metricsDropZone!==M.PROP_COLORBY){z(V.ColorBy);}else{if(!AF.sizeByObjects.length&&AF.shape!=="Area"){z(V.SizeBy);}else{if(AF.xAxisObjects.length===1){n(V.XAxis);}else{if(AF.yAxisObjects.length===1){n(V.YAxis);}else{if(AF.sizeByObjects.length===1&&AF.shape!=="Area"){z(V.SizeBy);}else{if(!AF.exists(AG,"tooltipMetrics")){z(V.AdditionalMetrics);}}}}}}}else{if(!j&&!AF.colorByObjects.length&&AF.metricsDropZone!==M.PROP_COLORBY){z(V.ColorBy);}else{if(!AF.sizeByObjects.length){z(V.SizeBy);}else{if(!AF.exists(AG,"tooltipMetrics")){z(V.AdditionalMetrics);}}}}}}}}}}if((!b)&&h){if(AF.exists(AG,"tooltipMetrics")){var w=S.find(AF.tooltipMetrics,"did",AG.did);if(w>-1){AF.tooltipMetrics.splice(w,1);x(V.AdditionalMetrics,AG);}}}}if(h&&d){var u=p.getHost(),l=u.getVisType().vt,k=D.getDefaultGMThreshold(l);D.addThresholds(u.model,u,u.node,AG,c,k.colors,k.ranges,false);}}}else{if(AD){z(V.XAxis);}else{if((AH.rows||[]).concat(AH.cols||[]).some(function(AK){return AK.did===AG.did;})){if(j&&AF.exists(AG,"breakByObjects")){}else{if(!AF.colorByObjects.length||(AF.colorByObjects[0].t!==4&&!AF.exists(AG,"colorByObjects"))){z(V.ColorBy);}}}else{if(!j&&!AF.sliceObjects.length&&q(AF)){z(V.SliceBy);if(!AF.colorByObjects.length){z(V.ColorBy);}}else{if((!AF.yAxisObjects.length)&&(!AF.xAxisObjects.length)){z(V.XAxis);if(!j&&!a){AI(F(AG)?M.PROP_SHAPE_LINE:M.PROP_SHAPE_BAR);}}else{if((AF.yAxisObjects.length)&&(!AF.xAxisObjects.length)){if((j||a)&&AF.yAxisObjects[0].t!==4){z(V.Rows);}else{z(V.XAxis);if(!j&&!a){AI(F(AG)&&AF.yAxisObjects[0]===4?M.PROP_SHAPE_LINE:M.PROP_SHAPE_BAR);}}}else{if((!AF.yAxisObjects.length)&&(AF.xAxisObjects.length)){if((j||a)&&AF.xAxisObjects[0].t!==4){z(V.Columns);}else{z(V.YAxis);if(!j&&!a){AI(F(AG)&&AF.xAxisObjects[0]===4?M.PROP_SHAPE_LINE:M.PROP_SHAPE_BAR);}}}else{if((AF.xAxisObjects[0].t!==4)&&(AF.yAxisObjects[0].t===4)){if(j&&!AF.breakByObjects.length){z(V.BreakBy);}else{if(!AF.colorByObjects.length&&!j){z(V.ColorBy);if(!AF.exists(AG,"breakByObjects")){z(V.BreakBy);}}else{z(V.Columns);}}}else{if((AF.xAxisObjects[0].t===4)&&(AF.yAxisObjects[0].t!==4)){if((j||a)&&!AF.breakByObjects.length){z(V.BreakBy);}else{if(!AF.colorByObjects.length&&!j){z(V.ColorBy);if(!AF.exists(AG,"breakByObjects")){z(V.BreakBy);}}else{z(V.Rows);}}}else{if((AF.xAxisObjects[0].t!==4)&&(AF.yAxisObjects[0].t!==4)){z(V.Columns);}else{if((AF.xAxisObjects[0].t===4)&&(AF.yAxisObjects[0].t===4)){if((j||a)&&!AF.breakByObjects.length){z(V.BreakBy);}else{if(!AF.colorByObjects.length&&!j){z(V.ColorBy);if(!AF.exists(AG,"breakByObjects")){z(V.BreakBy);}}else{if(!AF.columnObjects.length&&AF.rowObjects.length&&AF.rowObjects[0].t!==4){z(V.Rows);}else{z(V.Columns);}}}}}}}}}}}}}}var o=[];if(c.length){if(y){z(V.AdditionalMetrics,p.getTooltipDropzoneIdx(AG));}var t=p.getUpdateTemplateAction(c);var e=p.docModel,AA=e.controller.view.builder,r=AA.getLayoutVIMap(e.getCurrentLayoutKey()).getComponent(mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK);if(r&&!mstrApp.isInVFConfigMode){t.partialRetrieval.nodes.push(r.k);}o.push(t);}if(s){o.push({act:"setProperty",nodeKey:AJ.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(AF.getXml())});}if(o.length){p.clearCardinalityFlags();p.findLargeItemsForAddUnits([AG]);}return o;}function R(d,f,e,a){var b,c=true;function g(l,o,k){var n=a.getZoneModelByZoneId(l);if(a.getUnitIndexInZone(n,d)===-1&&(!k||k(n))){var j=o?0:n.items.length;b=a.getAddItemActions(n,[d],j,false,o?n.items[j]:null,f);n.items.push(d);return false;}return true;}function h(j){return j.items.length===0;}if(!a.isMetric(d)){c=g(V.ColorBy,false,h);c=c&&g(V.Grouping);if(b){a.clearCardinalityFlags();a.findLargeItemsForAddUnits([d]);}}else{c=g(V.SizeBy,false,h);c=c&&g(V.ColorBy,false,h);c=c&&g(V.SizeBy,true,function(j){return j.items[0].did===a.getZoneModelByZoneId(V.ColorBy).items[0].did;});c=c&&g(V.AdditionalMetrics,false,function(){return a.getUnitIndexInZone(a.getZoneModelByZoneId(V.SizeBy),d)===-1&&a.getUnitIndexInZone(a.getZoneModelByZoneId(V.ColorBy),d)===-1;});}return b?[a.docModel.getDataService().getUpdateTemplateAction(a.getHost().k,b)]:[];}function U(c,e,d,a){var b=null,f=!a.isMetric(c)?[V.FromItem,V.ToItem]:[V.ColorBy,V.ItemSize,V.SizeBy];S.forEach(f,function(g){var h=a.getZoneModelByZoneId(g);if(h.items.length===0){b=a.getAddItemActions(h,[c],0,e);h.items.push(c);return false;}});if(b){a.clearCardinalityFlags();a.findLargeItemsForAddUnits([c]);return[a.docModel.getDataService().getUpdateTemplateAction(a.getHost().k,b)];}return[];}function E(b){var d=8,e=1,a=S.find(b.fs,"idf",true);if(a==-1){return null;}var c=b.fs[a];return((b.da||c.obf)&&(c.bftp===d||c.bftp===e))?c:null;}function C(a){return !!(a.fs&&E(a));}function O(e,g,f,a){var c=null,h=!a.isMetric(e)?[V.BreakBy,V.Trend]:[V.Metric];trendZone=a.getZoneModelByZoneId(V.Trend);if(C(e)&&trendZone.items.length===0){c=a.getAddItemActions(trendZone,[e],0,g);trendZone.items.push(e);}else{for(var d=0;d<h.length;d++){var b=a.getZoneModelByZoneId(h[d]);if(b.items.length===0){c=a.getAddItemActions(b,[e],0,g);b.items.push(e);break;}}}if(c){a.clearCardinalityFlags();a.findLargeItemsForAddUnits([e]);return[a.docModel.getDataService().getUpdateTemplateAction(a.getHost().k,c)];}return[];}function Y(c,e,d,a){var b=null,f=!a.isMetric(c)?[V.GeoAttribute,V.Layout]:[V.ColorBy,V.SizeBy,V.AdditionalMetrics];S.forEach(f,function(g){var h=a.getZoneModelByZoneId(g);if((g===V.AdditionalMetrics||h.items.length===0)&&a.isZoneAvalaible(g)){b=a.getAddDropZoneUnitsActions(h,[c],0,{datasetId:e});return false;}});return b?[a.docModel.getDataService().getUpdateTemplateAction(a.getHost().k,b)]:[];}function K(AC,g,AI,l,c,w){var AD=AI.gsi||{},k=l.getHost(),q=k.fnGetWidget(),x=q&&q.scriptClass==="mstrmojo.mapbox.VisMapbox",n=[],p=false,z=l.getZoneModelByZoneId(V.ColorBy),AA=l.getZoneModelByZoneId(V.SizeBy),y=l.getZoneModelByZoneId(V.Angle),s=l.getZoneModelByZoneId(V.SliceBy),e=l.getZoneModelByZoneId(V.AdditionalMetrics),AB=mstrmojo.vi.viz,o=AB.MapHelper,h=false,d=function(AO,AN,AL,AP){if(AO){var AM=l.getCreateDropZonesAction(AL);n=n.concat(AM.length?l.getUpdateTemplateAction(AM):[]);n.push(l.getUpdateTemplateAction([{act:"addDropZoneUnit",zoneId:AL,unitId:AO,unitType:AN,datasetId:AP}]));if(AL===V.ColorBy){n.push(l.getUpdateTemplateAction(D.addThresholds(k.model,k,k.node,AC)));}}switch(AL){case V.GeoAttribute:c.geoAttribute=AO;break;case V.Latitude:c.latitude=AO;break;case V.Longitude:c.longitude=AO;break;case V.SliceBy:if(!c.slice){c.slice=[];}c.slice.push(AO);break;case V.ColorBy:c.colorBy=AO;break;case V.SizeBy:c.sizeBy=AO;break;case V.Angle:c.angle=AO;break;case V.AdditionalMetrics:c.tooltip.push(AO);break;}h=true;},j=function(AN,AM,AL,AO){d(AN,AM,AL,AO);if(x&&o.shouldSyncItemToTooltipZone(AN,AL,c&&c.tooltip)){d(AN,AM,V.AdditionalMetrics,AO);}},AK=function(AO,AN,AL){if(AO){n.push(l.getUpdateTemplateAction([{act:"removeDropZoneUnit",zoneId:AL,unitId:AO,unitType:AN}]));}switch(AL){case V.geoAttribute:c.geoAttribute="";break;case V.Latitude:c.latitude="";break;case V.Longitude:c.longitude="";break;case V.SliceBy:var AM=c.slice.indexOf(AO);if(AM!==-1){c.slice(AM,1);}break;case V.Angle:c.angle="";break;case V.ColorBy:c.colorBy="";break;case V.SizeBy:c.sizeBy="";break;case V.AdditionalMetrics:c.tooltip=S.filter(c.tooltip,function(AP){return AP!==AO;},{max:c.tooltip.length});break;}},AH=function(AL,AM){n.push(l.getUpdateTemplateAction({act:"addForm",unitId:AL,attFormId:AM,unitPos:1}));};c.setWidget(k);S.forEach((AD.rows||[]).concat(AD.cols||[]),function(AL){if(AL.did===AC.did){p=true;return false;}});if(p){return[];}switch(AC.t){case 4:if(z&&!z.items.length){j(AC.did,AC.t,V.ColorBy,g);}else{if(AA&&!AA.items.length){j(AC.did,AC.t,V.SizeBy,g);}else{if(y&&!y.items.length){j(AC.did,AC.t,V.Angle,g);}else{if(e){var u=AC.did;if(c.colorBy.indexOf(u)<0&&c.sizeBy.indexOf(u)&&c.angle.indexOf(u)&&c.tooltip.indexOf(u)<0){j(u,AC.t,V.AdditionalMetrics,g);}}}}}break;default:var r=q.edtModel.getEditingPropertyVal(N.graphicType),a=!c.geoAttribute&&(!c.latitude&&!c.longitude||r===H.Area),b=c.getGeoForm(AC,function(AL){return o.isGeoRoleSupportArea(AL.fgr);}),f=c.getLatitudeForm(AC),AJ=c.getLongitudeForm(AC),t=function(){var AL=c.vp,AN=c.tooltip;if(!o.canShowSizeByZone(AL)&&c.sizeBy&&AN.indexOf(c.sizeBy)<0){j(c.sizeBy,4,V.AdditionalMetrics);AK(c.sizeBy,4,V.SizeBy);}if(!o.canShowColorByZone(AL)&&c.colorBy&&AN.indexOf(c.colorBy)<0){j(c.colorBy,4,V.AdditionalMetrics);AK(c.colorBy,4,V.ColorBy);}if(!o.showAngleZone(AL)&&c.angle&&AN.indexOf(c.angle)<0){j(c.angle,4,V.AdditionalMetrics);AK(c.angle,4,V.Angle);}if(!o.showSliceZone(AL)&&c.slice&&c.slice.length>0){var AM=c.slice;S.forEach(AM,function(AO){j(AO,12,V.AdditionalMetrics);AK(AO,12,V.SizeBy);});}};if(a&&c.supportAreaMap&&b&&!((r!==H.Area)&&(f||AJ))){c.setMapType(H.Area);c.setUseAttributeForm(false);j(AC.did,AC.t,V.GeoAttribute,g);AH(AC.did,b.fid);}else{var AF=(w&&AC.card>500)?H.Density:((r!==H.Area)?r:H.Marker);if(f&&AJ&&a){j(AC.did,AC.t,V.GeoAttribute,g);c.setMapType(AF);c.setUseAttributeForm(true);AH(AC.did,f.fid);AH(AC.did,AJ.fid);j(f.fid,21,V.Latitude,g);j(AJ.fid,21,V.Longitude,g);}else{if((f||o.isLatitude(AC.n))&&(!AJ&&!o.isLongitude(AC.n))&&!c.geoAttribute&&!c.latitude){j(AC.did,AC.t,V.Latitude,g);c.setMapType(AF);c.setUseAttributeForm(false);}else{if((!f&&!o.isLatitude(AC.n))&&(AJ||o.isLongitude(AC.n))&&!c.geoAttribute&&!c.longitude){j(AC.did,AC.t,V.Longitude,g);c.setMapType(AF);c.setUseAttributeForm(false);}else{if(!f&&!AJ&&!b&&s){j(AC.did,AC.t,V.SliceBy,g);}else{if(c.tooltip.indexOf(AC.did)<0){j(AC.did,AC.t,V.AdditionalMetrics,g);}}}}}}if(h){t();}break;}if(h){n.push({act:"setProperty",nodeKey:AI.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(c.getXml())});}if(n.length){var AE=AI.visName,r=c.getMapType(),AG=c.getLayerName();l.addAttributeNameAndTargetVisForAddUnits(AI,[AC],AE,r,AG);l.clearCardinalityFlags();l.findLargeItemsForAddUnits([AC]);}return n;}function B(o,e,d,l){var q=l.getHost().model,k=d.gsi||{},p=k.rows||[],h=k.cols||[],g=k.mx||[],c=[],b,j,a,n;l.clearCardinalityFlags();if(S.find(p.concat(h).concat(g),"did",o.did)===-1&&!q.hasSameRecursiveAttributeGroup(o)){n=!!S.filterOne(h,function(r){return r.t!==4;});a=!!S.filterOne(p,function(r){return r.t!==4;});if(o.t===4){b=-1;if(g.length===0){if(!a&&!!n){b=1;j=p.length;l.findEstimatedTotalRow([o],b);}else{b=2;j=h.length;}}else{if(p.some(function(r){return r.did==="-1";})){var f=1;l.findEstimatedTotalRow([o],f);}}j=g.length;}else{if(n&&!a){b=2;j=h.length;l.findLargeItemsForAddUnits([o]);l.findTotalColumnCount([o],null);}else{b=1;j=p.length;l.findEstimatedTotalRow([o],b);}}c.push({act:"updateTemplate",keyContext:d.k,actions:[q.getAddTemplateUnitAction(o,e,b,j)]});}return c;}mstrmojo.vi.models.DatasetDoubleClick=mstrmojo.provide("mstrmojo.vi.models.DatasetDoubleClick",{addObject:function(h,c,g){var b=P(g),a=[],f=g.getHost();if(!h||!b){return a;}var j=b.visName||"Grid";switch(A.getDefinition(j).id){case A.GRAPHMATRIX:case A.NEWGRAPHMATRIX:a=I(h,c,b,g);break;case A.ESRIMAP:case A.GOOGLEMAP:a=K(h,c,b,g,new W.MapHelper({data:b}),true);break;case A.MAPBOX:a=K(h,c,b,g,new W.MapHelper({data:b}),false);break;case A.HEATMAP:a=R(h,c,b,g);break;case A.NETWORK:a=U(h,c,b,g);break;case A.KPICARD:a=O(h,c,b,g);break;case A.IMAGELAYOUT:a=Y(h,c,b,g);break;case A.CUSTOM:a=(g.getCustomDropZones&&g.getCustomDropZones())?[]:B(h,c,b,g);break;default:a=B(h,c,b,g);break;}if(c!==b.datasetId){var e=g.getHost().model.data.gsi;var d=e?(e.rows||[]).concat(e.cols||[]).concat(e.mx||[]):[];if(c&&(a.length||mstrmojo.array.find(d,"did",h.did)!==-1)){a.push({act:"editNode",nodeKey:f.k,datasetId:c});}}return a;}});}());(function(){mstrmojo.requiresClsP("mstrmojo","Button","Box","vi.ui.CalculationWidget","mstr.EnumFunction");mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);var C=mstrmojo.desc,B=mstrmojo.mstr.EnumFunction,I=4,E=5,H=6,F=7;var D={SINGLE:[{n:C(358,"Absolute"),v:B.FunctionAbs}],PAIR:[{n:C(6017,"Add"),v:B.FunctionAdd},{n:C(2122,"Average"),v:B.FunctionAverage},{n:C(5868,"Least"),v:B.FunctionLeast},{n:C(5869,"Greatest"),v:B.FunctionGreatest},{n:"A-B",v:B.FunctionMinus+";0"},{n:"B-A",v:B.FunctionMinus+";1"},{n:"A/B",v:B.FunctionDivide+";0"},{n:"B/A",v:B.FunctionDivide+";1"}],MORE:[{n:C(6017,"Add"),v:B.FunctionAdd},{n:C(2122,"Average"),v:B.FunctionAverage},{n:C(5868,"Least"),v:B.FunctionLeast},{n:C(5869,"Greatest"),v:B.FunctionGreatest}]};mstrmojo.vi.ui.CalculationMenuEditor=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.vi.ui.CalculationMenuEditor",onSubmenuOpen:function G(){var P=this.parent,O=P.de,Q=O&&O.es,J=(Q&&Q.length)||P.cellsNum,L=(J===1)?"SINGLE":((J===2)?"PAIR":"MORE"),N=D[L],K=(O&&O.func)||P.func,M,R;if(L==="PAIR"){if(O){N[I].n=Q[0].n+" - "+Q[1].n;N[E].n=Q[1].n+" - "+Q[0].n;N[H].n=Q[0].n+" / "+Q[1].n;N[F].n=Q[1].n+" / "+Q[0].n;}else{R=this.xtab.selCells;N[I].n=R[0].innerText+" - "+R[1].innerText;N[E].n=R[1].innerText+" - "+R[0].innerText;N[H].n=R[0].innerText+" / "+R[1].innerText;N[F].n=R[1].innerText+" / "+R[0].innerText;}}this.checkList.set("items",N);for(M in N){if(typeof N[M].v==="string"&&N[M].v.indexOf(K)===0&&N[M].v.indexOf(";0")>0){this.checkList.set("selectedItem",N[M]);break;}if(N[M].v===K){this.checkList.set("selectedItem",N[M]);break;}}},applyCalculation:function A(L){var K=this.xtab,J=this.parent;if((J.de&&J.de.func===L)||(typeof L==="string"&&L.indexOf(J.de.func)===0&&L.indexOf(";0")>0)){return ;}if(this.parent.isEdit===true){K.editDECalculation(J.node,L);}else{K.derivedElementCalculation(J.node,L);}this.onSubmenuClosed();},children:[{scriptClass:"mstrmojo.vi.ui.CalculationWidget",alias:"checkList"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.Box","mstrmojo.css");var A=mstrmojo.css;mstrmojo.vi.ui.rw.VisFilterIndicator=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.vi.ui.rw.VisFilterIndicator",cssClass:"VisFilterIndicator",init:function D(F){var G=F.unitContainer.domNode,E=G.style;if(G){if(F.hasOwnProperty("width")===false){F.width=(E&&E.width)||(G.clientWidth+"px");}if(F.hasOwnProperty("left")===false){F.left=G.offsetLeft+"px";}if(F.hasOwnProperty("top")===false){F.top=(G.offsetTop)+"px";}}this._super(F);this.placeholder=G.appendChild(document.createElement("div"));},children:[{scriptClass:"mstrmojo.Label",slot:"containerNode",alias:"lblTitle",text:mstrmojo.desc(15297,"Items selected in configuration mode will not be applied to visualization filter.")}],postBuildRendering:function(){this._super();var F=this.domNode,E=this;F.style.left=this.left;F.style.top=this.top;if(!this.animationListener){var G=this.animationListener=function(H){if(H.animationName==="indicatorout"){A.addClass(F,"hidden");E.destroy();}};A.onAnimationEnd(F,G);}},updateDimension:function C(){if(this.hasRendered&&!this.destroyed&&this.unitContainer){var E=this.unitContainer.domNode;if(E){this.set("width",(E.style.width||(E.clientWidth+"px")));}}},destroy:function B(){if(this.animationListener){this.animationListener=null;}this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TargetSelector");mstrmojo.vi.ui.LinkTargetSelector=mstrmojo.declare(mstrmojo.vi.ui.TargetSelector,null,{scriptClass:"mstrmojo.vi.ui.LinkTargetSelector",preChangeTargetSelectionMode:function A(D,C){},enterTargetSelectionMode:function B(C){C.setMaskClass(this.srcId);C.set("enabled",C instanceof mstrmojo.vi.ui.rw.VizBox);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.ToolbarEditor","mstrmojo.hash");mstrmojo.ui.menus.ToolbarEditorConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.ToolbarEditorConfig",cssClass:"",contents:null,init:function C(D){this._super(D);this.initBindings();},clear:function A(){this._super();this.contents=null;},newInstance:function B(D){return new mstrmojo.ui.menus.ToolbarEditor(mstrmojo.hash.copy({popupConfig:this},D));}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.rw.VisFilterIndicator");mstrmojo.vi.ui.rw._HasVisFilterIndicator=mstrmojo.provide("mstrmojo.vi.ui.rw._HasVisFilterIndicator",{displayVisFilterIndicator:function B(){if(mstrApp.isInVFConfigMode){var D=this.parent,E=D&&D.isIndicatorDisplayed,C;if(E){return ;}C=new mstrmojo.vi.ui.rw.VisFilterIndicator({unitContainer:this});C.render();this.indicator=C;D.isIndicatorDisplayed=true;}},updateVisFilterIndicator:function A(){var C=this.indicator;if(mstrApp.isInVFConfigMode&&C){C.updateDimension();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.graph._MobileGraphAreaHelper","mstrmojo.GraphBase","mstrmojo.dom");var AB=0,Aq=0,BA=0,Aa=1,f=2,Z=11,X=12,AR=13,BG=101,l=102,Ax=111,AY=112,BB=113,k=121,A2=122,Ab=131,t=132,AE=201,H=301,F=302,y=303,q=311,g=321,A6=322,B=401,A0=402,Ah=501,J=502,AM=503,AK=511,p=512,M=513,BE=514,Ap=515,BH=521,AQ=522,Q=601,N=701,AT=801;var Ag=0,I=9,AG=10,a=14;var w=0,AI=1,G=2,Af=3,Ac=4;var n=0,Az=1,Ae=2;var V=2,d=3;var Aw=0,AL=3,A9=4,u=6,E=13,A=14,D=101;var A5=0,Av=1,Ak=2;var Ad=3.14159265;var e,b;var At=0,A3=1,An=2,R=3,AC=4,BF=5,AA=6,AV=7,AS=8,AX=9;var A4=100;var A7=[[-100,-100,100,-100,100,100,-100,100],[-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[],[0,-100,100,0,0,100,-100,0],[0,-100,100,100,-100,100],[-100,-100,100,-100,100,100,-100,100],[0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100]];function Ao(Cf,B1,C0,Bz){var Bf=C0.InstructionList,B8=Bf.length,Bn,CD,By,Bx,CG,B0,Be,Bj,BN,BR,CF,B6,BV,Cu,CM,CH,Cy;for(CD=0;CD<B8;CD++){Bn=Bf[CD];if(typeof (Bn)==="undefined"){continue;}switch(Bn.Ins){case BA:break;case Aa:Cf.save();break;case f:Cf.restore();break;case Z:Cf.clip();break;case X:Cf.scale(Bn.X,Bn.Y);break;case AR:if(Bn.Radian!==0){Cf.translate(Bn.Anchor.X,Bn.Anchor.Y);Cf.rotate(Bn.Radian);Cf.translate(-Bn.Anchor.X,-Bn.Anchor.Y);}break;case BG:Cf.beginPath();break;case l:Cf.closePath();break;case Ax:if(C0.IsAnimated===0){Cf.moveTo(Bn.X,Bn.Y);}else{if(Bn.CA[0]==0){By=Bn.X[0]*(1-B1)+Bn.X[1]*B1;Bx=Bn.Y[0]*(1-B1)+Bn.Y[1]*B1;Cf.moveTo(By,Bx);}else{var Bl=Math.sqrt((Bn.X[0]-Bn.BPX[0])*(Bn.X[0]-Bn.BPX[0])+(Bn.Y[0]-Bn.BPY[0])*(Bn.Y[0]-Bn.BPY[0]));var Bi=Math.sqrt((Bn.X[1]-Bn.BPX[0])*(Bn.X[1]-Bn.BPX[0])+(Bn.Y[1]-Bn.BPY[0])*(Bn.Y[1]-Bn.BPY[0]));var CJ=Math.sqrt((Bn.X[0]-Bn.X[1])*(Bn.X[0]-Bn.X[1])+(Bn.Y[0]-Bn.Y[1])*(Bn.Y[0]-Bn.Y[1]));var Bk=Math.acos((Bl*Bl+Bi*Bi-CJ*CJ)/(2*Bl*Bi));var C3=(Bn.X[0]-Bn.BPX[0])*Math.cos(Bk)-(Bn.Y[0]-Bn.BPY[0])*Math.sin(Bk)+Bn.BPX[0]-Bn.X[1];if(C3<-0.01||C3>0.01){Bk=2*Ad-Bk;}By=(Bn.X[0]-Bn.BPX[0])*Math.cos(B1*Bk)-(Bn.Y[0]-Bn.BPY[0])*Math.sin(B1*Bk)+Bn.BPX[0];Bx=(Bn.Y[0]-Bn.BPY[0])*Math.cos(B1*Bk)+(Bn.X[0]-Bn.BPX[0])*Math.sin(B1*Bk)+Bn.BPY[0];Cf.moveTo(By,Bx);}}break;case AY:if(C0.IsAnimated===0){Cf.lineTo(Bn.X,Bn.Y);}else{if(Bn.CA[0]==0){By=Bn.X[0]*(1-B1)+Bn.X[1]*B1;Bx=Bn.Y[0]*(1-B1)+Bn.Y[1]*B1;Cf.lineTo(By,Bx);}else{var Bl=Math.sqrt((Bn.X[0]-Bn.BPX[0])*(Bn.X[0]-Bn.BPX[0])+(Bn.Y[0]-Bn.BPY[0])*(Bn.Y[0]-Bn.BPY[0]));var Bi=Math.sqrt((Bn.X[1]-Bn.BPX[0])*(Bn.X[1]-Bn.BPX[0])+(Bn.Y[1]-Bn.BPY[0])*(Bn.Y[1]-Bn.BPY[0]));var CJ=Math.sqrt((Bn.X[0]-Bn.X[1])*(Bn.X[0]-Bn.X[1])+(Bn.Y[0]-Bn.Y[1])*(Bn.Y[0]-Bn.Y[1]));var Bk=Math.acos((Bl*Bl+Bi*Bi-CJ*CJ)/(2*Bl*Bi));var C3=(Bn.X[0]-Bn.BPX[0])*Math.cos(Bk)-(Bn.Y[0]-Bn.BPY[0])*Math.sin(Bk)+Bn.BPX[0]-Bn.X[1];if(C3<-0.02||C3>0.02){Bk=2*Ad-Bk;}By=(Bn.X[0]-Bn.BPX[0])*Math.cos(B1*Bk)-(Bn.Y[0]-Bn.BPY[0])*Math.sin(B1*Bk)+Bn.BPX[0];Bx=(Bn.Y[0]-Bn.BPY[0])*Math.cos(B1*Bk)+(Bn.X[0]-Bn.BPX[0])*Math.sin(B1*Bk)+Bn.BPY[0];Cf.lineTo(By,Bx);}}break;case BB:if(C0.IsAnimated===0){Cf.bezierCurveTo(Bn.CP1X,Bn.CP1Y,Bn.CP2X,Bn.CP2Y,Bn.X,Bn.Y);}else{cp1x=Bn.CP1X[0]*(1-B1)+Bn.CP1X[1]*B1;cp1y=Bn.CP1Y[0]*(1-B1)+Bn.CP1Y[1]*B1;cp2x=Bn.CP2X[0]*(1-B1)+Bn.CP2X[1]*B1;cp2y=Bn.CP2Y[0]*(1-B1)+Bn.CP2Y[1]*B1;By=Bn.X[0]*(1-B1)+Bn.X[1]*B1;Bx=Bn.Y[0]*(1-B1)+Bn.Y[1]*B1;Cf.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,By,Bx);}break;case k:if(C0.IsAnimated===0){Cf.rect(Bn.X,Bn.Y,Bn.W,Bn.H);}else{By=Bn.X[0]*(1-B1)+Bn.X[1]*B1;Bx=Bn.Y[0]*(1-B1)+Bn.Y[1]*B1;B0=Bn.W[0]*(1-B1)+Bn.W[1]*B1;CG=Bn.H[0]*(1-B1)+Bn.H[1]*B1;Cf.rect(By,Bx,B0,CG);}break;case A2:if(C0.IsAnimated===0){if(Bn.EndAngle==6.283){Bn.EndAngle=2*Ad;}Cf.arc(Bn.X,Bn.Y,Bn.Radius,Bn.StartAngle,Bn.EndAngle,Bn.AntiClockwise);}else{if(Bn.EndAngle[0]==6.283){Bn.EndAngle[0]=2*Ad;}if(Bn.EndAngle[1]==6.283){Bn.EndAngle[1]=2*Ad;}Cf.arc(Bn.X[0]*(1-B1)+Bn.X[1]*B1,Bn.Y[0]*(1-B1)+Bn.Y[1]*B1,Bn.Radius[0]*(1-B1)+Bn.Radius[1]*B1,Bn.StartAngle[0]*(1-B1)+Bn.StartAngle[1]*B1,Bn.EndAngle[0]*(1-B1)+Bn.EndAngle[1]*B1,Bn.AntiClockwise[0]);}break;case t:if(C0.IsAnimated==1){var Bt=Bn.Angle[0]*(1-B1)+Bn.Angle[1]*B1;var Bd=Bn.NeedleSize[0];var CK=Bn.BPX[0];var CI=Bn.BPY[0];var BO=Bn.MarkSize[0];var Ck=Bn.MarkShape[0];var CV={X:Bd*Math.cos(Bt)+CK,Y:Bd*Math.sin(Bt)*-1+CI};var B4=AN(Ck,CV,BO);C(Cf,B4,false,false);}break;case AE:case H:break;case F:Cf.lineWidth=Bn.LineWidth;break;case y:switch(Bn.Type){case A5:Cf.lineJoin="miter";break;case Av:Cf.lineJoin="bevel";break;case Ak:Cf.lineJoin="round";break;}break;case q:case g:case A6:break;case B:Cf.fill();break;case A0:Cf.stroke();break;case Ah:BN=Bn.Format;Be=Bz[BN];if(Bn.HEP==1){Bj=Bn.FC;}else{Bj=Be.SimpleColor;}Cf.fillStyle="RGBA("+Math.round(Bj.R*Bn.DarkerFactor)+", "+Math.round(Bj.G*Bn.DarkerFactor)+", "+Math.round(Bj.B*Bn.DarkerFactor)+", "+Be.Alpha/255+")";Cf.fill();break;case J:break;case AM:if(C0.IsAnimated===0){BV=Bn.BoundingRect;Cy=Bn.DarkerFactor;}else{BV=Bn.BoundingRect[0];Cy=Bn.DarkerFactor[0];var C1=Bn.BoundingRect[1];BV.X=BV.X*(1-B1)+C1.X*B1;BV.Y=BV.Y*(1-B1)+C1.Y*B1;BV.Width=BV.Width*(1-B1)+C1.Width*B1;BV.Height=BV.Height*(1-B1)+C1.Height*B1;}if(BV.Width<1||BV.Height<1){continue;}BV.Width=Math.floor(BV.Width);BV.Height=Math.floor(BV.Height);var Be=Bz[Bn.Format];if(Be.Bevel.FillBevelType!=Ac||B1<1){Au(Cf,Be,BV,Cy);}else{Al(Cf,Be);Au(Cf,Be,BV,Cy);}break;case AK:Be=Bz[Bn.Format];CM=Be.Bevel;B4=AD(Bn.Polygon);var Bs=B4.length;var BU=[];for(var CE=0;CE<Bs;CE++){BU.push(B4[CE]);}while(true){Bs=BU.length;if(Bs<3){break;}var Ba=[];var B5=[];var BP=false;if(Bs>3){var Ct={X:0,Y:0};for(var CE=0;((CE<(Bs-2))&&(!BP));++CE){for(var CB=CE+2;CB<(Bs-1);++CB){var Cw=c(BU[CE],BU[CE+1],BU[CB],BU[CB+1],Ct,false);Ct=Cw.interSection;if(Cw.val==1){BP=true;for(m=0;m<=CE;++m){if(!AU(BU[m],Ct)){Ba.push(BU[m]);}}Ba.push(Ct);for(m=CB+1;m<Bs;++m){if(!AU(BU[m],Ct)){Ba.push(BU[m]);}}B5.push(Ct);for(m=CB;m>CE;--m){if(!AU(BU[m],Ct)){B5.push(BU[m]);}}break;}}if((CE!=0)&&(!BP)){var Cw=c(BU[CE],BU[CE+1],BU[0],BU[Bs-1],Ct,false);Ct=Cw.interSection;if(Cw.val==1){for(m=0;m<=CE;++m){Ba.push(BU[m]);}Ba.push(Ct);B5.push(Ct);for(m=Bs-1;m>CE;--m){B5.push(BU[m]);}BP=true;}}}}if(!BP){Ba=BU;}var Cs=0;var Cg=BJ(Ba,Cs);Cs=Cg.depth;if(!Cg.mark){break;}Cs*=CM.Depth*0.01;var Bw=[];var BT=[];var B2=Ba.length;for(var CE=0;CE<B2;++CE){var Ca;var Bq;var Cg=As(Ba[(CE+B2-1)%B2],Ba[CE],Ba[(CE+1)%B2],Cs);Ca=Cg.start;Bq=Cg.end;Bw.push(Ca);BT.push(Bq);}for(var CE=0;CE<B2;++CE){var CS={X:BT[CE].X-Bw[CE].X,Y:BT[CE].Y-Bw[CE].Y};var BQ=Math.sqrt(Ar(CS));var CZ={X:CS.X/BQ,Y:CS.Y/BQ};var BL=x((540-CM.LightAngle)%360);var BW={X:Math.cos(BL),Y:Math.sin(BL)};var B3=AJ(CZ,BW);var CT=0;var CA=0;var Ci=0.1;var Cv=0.2;if(B3<-0.01){CT=(1+B3)*Ci;CA=(1+Math.abs(B3))*Cv*CM.Intensity*0.01;}else{CT=(1-Ci)+B3*Ci;CA=((1-Cv)+B3*Cv)*CM.Intensity*0.01;}var B9=CE+1;if(B9==B2){B9-=B2;}Cf.beginPath();Cf.moveTo(Ba[CE].X,Ba[CE].Y);Cf.lineTo(Ba[B9].X,Ba[B9].Y);Cf.lineTo(Bw[B9].X,Bw[B9].Y);Cf.lineTo(Bw[CE].X,Bw[CE].Y);Cf.closePath();var CR=Math.round(CT*255);if(isNaN(CR)){continue;}if(CM.FillBevelType==AI){Cf.save();Cf.clip();var BM=Cf.createLinearGradient(BT[CE].X,BT[CE].Y,Bw[CE].X,Bw[CE].Y);BM.addColorStop(0,"rgba("+CR+","+CR+","+CR+","+CA+")");BM.addColorStop(1,"rgba("+CR+","+CR+","+CR+","+0+")");Cf.fillStyle=BM;Cf.fill();Cf.restore();}else{Cf.fillStyle="RGBA("+CR+", "+CR+", "+CR+", "+CA+")";Cf.fill();}}if(BP){BU=B5;}else{break;}}if(B4.length!=0){Cf.beginPath();Cf.moveTo(B4[0].X,B4[0].Y);for(var CE=1;CE<B4.length;++CE){Cf.lineTo(B4[CE].X,B4[CE].Y);}Cf.closePath();}break;case p:Be=Bz[Bn.Format];CM=Be.Bevel;if(C0.IsAnimated===0){BV=Bn.BoundingRect;CH=Bn.IsCircularShape;}else{var C2=Bn.BoundingRect[0];var C1=Bn.BoundingRect[1];BV={X:0,Y:0,Width:0,Height:0};BV.X=C2.X*(1-B1)+C1.X*B1;BV.Y=C2.Y*(1-B1)+C1.Y*B1;BV.Width=C2.Width*(1-B1)+C1.Width*B1;BV.Height=C2.Height*(1-B1)+C1.Height*B1;}if(CM.FillBevelType===Af){var Cz=0.2;var CO=CM.Intensity*0.01*Be.Alpha/255;var CQ=1-CM.Depth*0.01;Cu=Cf.createLinearGradient(BV.X,BV.Y,BV.X+BV.Width,BV.Y);CF="RGBA(0,0,0,"+CO+")";B6="RGBA(255,255,255,"+CO+")";Cu.addColorStop(0,CF);Cu.addColorStop(CQ*Cz,CF);Cu.addColorStop(CQ,B6);Cu.addColorStop(1,CF);}else{CF=Be.SimpleColor;var BX={x:BV.X+BV.Width/2,y:BV.Y+BV.Height/2};Bm={x:0,y:0};Bh={x:0,y:0};z(BV,CM.LightAngle,BX);var Bb=Be.Alpha/255;var Bp=Bb;if(Be.FillType!=Aw){Bb*=0.8;Bp*=0.5;CF={R:128,G:128,B:128};}var BM=Cf.createLinearGradient(Bm.x,Bm.y,Bh.x,Bh.y);BM.addColorStop(0,"rgba(255,255,255,"+Bb+")");BM.addColorStop(0.05+CM.Intensity*0.001,"rgba(255,255,255,"+9*Bb/(10-Bb)+")");BM.addColorStop(0.5,"rgba("+CF.R+","+CF.G+","+CF.B+","+Bp+")");BM.addColorStop(0.85+(1-CM.Intensity*0.01)*0.05,"rgba(0,0,0,"+9*Bb/(10-Bb)+")");BM.addColorStop(1,"rgba(0,0,0,"+Bb+")");Cf.fillStyle=BM;Cf.fill();if(Be.FillType!=Aw){continue;}var BK=Math.max(BV.Width,BV.Height)*0.5*(2-CM.Intensity*0.01);BK*=CH?0.75:2;Cu=Cf.createRadialGradient(BX.x,BX.y,0,BX.x,BX.y,BK);Cu.addColorStop(0,"rgba("+CF.R+","+CF.G+","+CF.B+","+Bb+")");Cu.addColorStop(0.5,"rgba("+CF.R+","+CF.G+","+CF.B+","+Bb/2+")");Cu.addColorStop(0.8,"rgba("+CF.R+","+CF.G+","+CF.B+","+Bb/10+")");Cu.addColorStop(1,"rgba("+CF.R+","+CF.G+","+CF.B+",0)");}Cf.fillStyle=Cu;Cf.fill();break;case Ap:Be=Bz[Bn.Format];CM=Be.Bevel;var Cd=Bn.CX;var Cc=Bn.CY;var Cn=Bn.Radius;var BK;var CO;switch(Bn.BorderUse){case V:CO=0.4;Bm={x:Cd+Cn*Math.cos(Ad*1.25),y:Cc+Cn*Math.sin(Ad*1.25)};Bh={x:Cd+Cn*Math.cos(Ad*0.25),y:Cc+Cn*Math.sin(Ad*0.25)};Cf.save();Cf.clip();var BM=Cf.createLinearGradient(Bm.x,Bm.y,Bh.x,Bh.y);BM.addColorStop(0,"rgba(0,0,0,"+CO+")");BM.addColorStop(1,"rgba(255,255,255,"+CO+")");Cf.fillStyle=BM;Cf.fill();Cf.restore();CO=0.4;BK=Cn*0.3;Bj=Be.SimpleColor;Bm={x:Cd+BK*Math.cos(Ad*0.75),y:Cc+BK*Math.sin(Ad*0.75)};Bh={x:Cd+BK*Math.cos(Ad*1.75),y:Cc+BK*Math.sin(Ad*1.75)};Cf.save();Cf.clip();var BM=Cf.createLinearGradient(Bm.x,Bm.y,Bh.x,Bh.y);BM.addColorStop(0,"rgba("+Bj.R+","+Bj.G+","+Bj.B+","+0+")");BM.addColorStop(0.2,"rgba("+Bj.R+","+Bj.G+","+Bj.B+","+1+")");BM.addColorStop(0.8,"rgba("+Bj.R+","+Bj.G+","+Bj.B+","+1+")");BM.addColorStop(1,"rgba("+Bj.R+","+Bj.G+","+Bj.B+","+0+")");Cf.fillStyle=BM;Cf.fill();Cf.restore();break;case d:CO=0.6;BK=Cn*0.2;var CQ=0.3;Bm={x:Cd+BK*Math.cos(Ad*1.25),y:Cc+BK*Math.sin(Ad*1.25)};Bh={x:Cd+Cn*Math.cos(Ad*0.25),y:Cc+Cn*Math.sin(Ad*0.25)};Cf.save();Cf.clip();var BM=Cf.createLinearGradient(Bm.x,Bm.y,Bh.x,Bh.y);BM.addColorStop(0,"rgba(255,255,255,"+CO+")");BM.addColorStop(CQ,"rgba(0,0,0,"+CO+")");BM.addColorStop(1,"rgba(255,255,255,"+CO+")");Cf.fillStyle=BM;Cf.fill();Cf.restore();break;default:CO=0.4;BK=Cn-Bn.Thickness;Bm={x:Cd+BK*Math.cos(Ad*1.25),y:Cc+BK*Math.sin(Ad*1.25)};Bh={x:Cd+BK*Math.cos(Ad*0.25),y:Cc+BK*Math.sin(Ad*0.25)};Cf.save();Cf.clip();var BM=Cf.createLinearGradient(Bm.x,Bm.y,Bh.x,Bh.y);BM.addColorStop(0,"rgba(0,0,0,"+CO+")");BM.addColorStop(1,"rgba(255,255,255,"+CO+")");Cf.fillStyle=BM;Cf.fill();Cf.restore();break;}break;case M:Be=Bz[Bn.Format];CM=Be.Bevel;var CO;var CQ;var Cd;var Cc;var Bo;var BZ;var CP;var Bu;var Br;var Ch;if(C0.IsAnimated===0){Cd=Bn.CX;Cc=Bn.CY;Bo=Bn.InnerRadius;BZ=Bn.OuterRadius;CP=Bn.RGUsage;Bu=Bn.HEP;if(Bu==1){Br=Bn.ExtraDepth;Ch=Bn.ExtraIntensity;}}else{Cd=Bn.CX[0]*(1-B1)+Bn.CX[1]*B1;Cc=Bn.CY[0]*(1-B1)+Bn.CY[1]*B1;Bo=Bn.InnerRadius[0];BZ=Bn.OuterRadius[0];CP=Bn.RGUsage[0];Bu=Bn.HEP[0];if(Bu==1){Br=Bn.ExtraDepth[0];Ch=Bn.ExtraIntensity[0];}}switch(CP){case n:CO=CM.Intensity*0.01*Be.Alpha/255;CQ=1-CM.Depth*0.01;Cu=Cf.createRadialGradient(Cd,Cc,Bo,Cd,Cc,BZ);CF="RGBA(0,0,0,"+CO+")";B6="RGBA(255,255,255,"+CO+")";Cu.addColorStop(0,CF);Cu.addColorStop(CQ,B6);Cu.addColorStop(1,CF);Cf.fillStyle=Cu;Cf.fill();break;case Az:CO=CM.Intensity*0.01*Be.Alpha/255;Cu=Cf.createRadialGradient(Cd,Cc,Bo,Cd,Cc,BZ);CF="RGBA(0,0,0,"+CO+")";B6="RGBA(255,255,255,"+CO+")";Cu.addColorStop(0,CF);Cu.addColorStop(1,B6);Cf.fillStyle=Cu;Cf.fill();break;case Ae:if(Bu==0){CO=CM.Intensity*0.01*Be.Alpha/255;CQ=CM.Depth*0.01;}else{CO=Ch*0.01*Be.Alpha/255;CQ=Br*0.01;}Cu=Cf.createRadialGradient(Cd,Cc,Bo,Cd,Cc,BZ);CF="RGBA(0,0,0,"+CO+")";B6="RGBA(255,255,255,"+CO+")";Cu.addColorStop(0,CF);Cu.addColorStop(CQ,B6);Cu.addColorStop(1,CF);Cf.fillStyle=Cu;Cf.fill();break;}break;case BE:Be=Bz[Bn.Format];CM=Be.Bevel;CO=CM.Intensity*0.01*Be.Alpha/255;CQ=1-CM.Depth*0.01;CF="RGBA(0,0,0,"+CO+")";B6="RGBA(255,255,255,"+CO+")";Cu=Cf.createLinearGradient(Bn.StartPoint.X,Bn.StartPoint.Y,Bn.EndPoint.X,Bn.EndPoint.Y);Cu.addColorStop(0,CF);Cu.addColorStop(CQ,B6);Cu.addColorStop(1,CF);Cf.save();Cf.clip();Cf.fillStyle=Cu;Cf.fill();Cf.restore();break;case BH:case AQ:break;case Q:var Ce;BN=Bn.Format;Be=Bz[BN];if(Be.Gradient&&Be.Gradient.Valid){var Cr=Be.Gradient,Cl=Cr.Colors,Bm=Cr.Start,Bh=Cr.End;if(Cr.style==0){var Bv=Cf.createLinearGradient(Bm.x,Bm.y,Bh.x,Bh.y);}else{if(Cr.angle==0){Bv=Cf.createLinearGradient(Bm.x,0,Bh.x,0);}else{Bv=Cf.createLinearGradient(0,Bm.y,0,Bh.y);}}var Bc,B7=1,Cq=Cl.length;if(Cq>0){for(CE=0;CE<Cq;CE++){Bc="RGBA("+Math.round(B7*Cl[CE].Color.mR)+", "+Math.round(B7*Cl[CE].Color.mG)+", "+Math.round(B7*Cl[CE].Color.mB)+", "+Be.Alpha/255+")";Bv.addColorStop(Cl[CE].Step,Bc);}Ce=Bv;}else{Bj=Be.Color;Ce="RGBA("+Bj.R+", "+Bj.G+", "+Bj.B+", "+Be.Alpha/255+")";}}else{Bj=Be.Color;Ce="RGBA("+Bj.R+", "+Bj.G+", "+Bj.B+", "+Be.Alpha/255+")";}Cf.strokeStyle=Ce;Cf.stroke();break;case N:BN=Bn.Format;Be=Bz[BN];Bj=Be.Color;Cf.font=Be.Size+"px "+Be.Name;if(Be.Style&2){Cf.font="italic "+Cf.font;}if(Be.Style&1){Cf.font="bold "+Cf.font;}Cf.fillStyle="RGBA("+Bj.R+", "+Bj.G+", "+Bj.B+", "+Be.Alpha/255+")";Cf.fillText(Bn.Text,Bn.StartPoint.X,Bn.StartPoint.Y);if(Be.Style&12){Cf.beginPath();var CN=Cf.measureText(Bn.Text);if(Be.Style&4){Cf.moveTo(Math.round(Bn.StartPoint.X),Math.round(Bn.StartPoint.Y));Cf.lineTo(Math.round(Bn.StartPoint.X+CN.width),Math.round(Bn.StartPoint.Y));}if(Be.Style&8){Cf.moveTo(Math.round(Bn.StartPoint.X),Math.round(Bn.StartPoint.Y-Be.Size*0.5));Cf.lineTo(Math.round(Bn.StartPoint.X+CN.width),Math.round(Bn.StartPoint.Y-Be.Size*0.5));}Cf.strokeStyle="RGBA("+Bj.R+", "+Bj.G+", "+Bj.B+", "+Be.Alpha/255+")";Cf.lineWidth=Math.round(Math.max(1,Be.Size*3/40));Cf.stroke();}break;case AT:var Cx;if(C0.IsAnimated===0){Cx=Bn.Rect;}else{Cx=Bn.Rect[0];var C1=Bn.Rect[1];Cx.X=Cx.X*(1-B1)+C1.X*B1;Cx.Y=Cx.Y*(1-B1)+C1.Y*B1;Cx.Width=Cx.Width*(1-B1)+C1.Width*B1;Cx.Height=Cx.Height*(1-B1)+C1.Height*B1;}var CC=Bn.RotationAngle;var CL=Bn.BevelDepth;var CW=Bn.LTColor;var CU=Bn.LTAlpha;var Cp=Bn.RBColor;var Cm=Bn.RBAlpha;var Co={X:Cx.X+Cx.Width/2,Y:Cx.Y+Cx.Height/2};var Cb={X:0,Y:0,Width:0,Height:0};Cb.X=Cx.X;Cb.Y=Cx.Y;Cb.Width=Cx.Width;Cb.Height=Cx.Height;BD(Cb,CL,CL);var Bg=[];Bg.push(A1({X:Cx.X,Y:Cx.Y},Co,CC));Bg.push(A1({X:Cx.X+Cx.Width,Y:Cx.Y},Co,CC));Bg.push(A1({X:Cx.X+Cx.Width,Y:Cx.Y+Cx.Height},Co,CC));Bg.push(A1({X:Cx.X,Y:Cx.Y+Cx.Height},Co,CC));var Cj=[];Cj.push(A1({X:Cb.X,Y:Cb.Y},Co,CC));Cj.push(A1({X:Cb.X+Cb.Width,Y:Cb.Y},Co,CC));Cj.push(A1({X:Cb.X+Cb.Width,Y:Cb.Y+Cb.Height},Co,CC));Cj.push(A1({X:Cb.X,Y:Cb.Y+Cb.Height},Co,CC));var BY=[];BY.push(A1({X:Cx.X,Y:Cx.Y+Cx.Height},Co,CC));BY.push(A1({X:Cb.X,Y:Cb.Y+Cb.Height},Co,CC));BY.push(A1({X:Cb.X,Y:Cb.Y},Co,CC));BY.push(A1({X:Cb.X+Cb.Width,Y:Cb.Y},Co,CC));BY.push(A1({X:Cx.X+Cx.Width,Y:Cx.Y},Co,CC));BY.push(A1({X:Cx.X,Y:Cx.Y},Co,CC));C(Cf,BY,false,false);Cf.fillStyle="RGBA("+CW.R+", "+CW.G+", "+CW.B+", "+CU/255+")";Cf.fill();var BS=[];BS.push(A1({X:Cx.X,Y:Cx.Y+Cx.Height},Co,CC));BS.push(A1({X:Cb.X,Y:Cb.Y+Cb.Height},Co,CC));BS.push(A1({X:Cb.X+Cb.Width,Y:Cb.Y+Cb.Height},Co,CC));BS.push(A1({X:Cb.X+Cb.Width,Y:Cb.Y},Co,CC));BS.push(A1({X:Cx.X+Cx.Width,Y:Cx.Y},Co,CC));BS.push(A1({X:Cx.X+Cx.Width,Y:Cx.Y+Cx.Height},Co,CC));C(Cf,BS,false,false);Cf.fillStyle="RGBA("+Cp.R+", "+Cp.G+", "+Cp.B+", "+Cm/255+")";Cf.fill();Cf.strokeStyle="RGBA(230, 230, 230, "+CU*0.5/255+")";Cf.lineWidth=1;C(Cf,Bg,true,true);Cf.stroke();C(Cf,Cj,true,true);Cf.stroke();break;}}}function Ay(BK,BL){return 1-(Math.sqrt((BL-256)*(BL-256)+(BK-256)*(BK-256))/(1.5*256));}function W(BO,BK,BP,BM,BL){var BN=(BM&&BL)?0.5:0;BO.moveTo(BK+BN,BP+BN);}function BI(BO,BK,BP,BM,BL){var BN=(BM&&BL)?0.5:0;BO.lineTo(BK+BN,BP+BN);}function j(BN,BK,BM,BL){var BP=BK.length;if(BP<=0){return ;}BN.beginPath();W(BN,BK[0].X,BK[0].Y,BM,BL);var BO=0;for(i=1;i<BP;++i){BI(BN,BK[i].X,BK[i].Y,BM,BL);BO=i;}}function Y(BM){var BL=A7[BM];var BK=BL.length/2;return{number:BK,points:BL};}function AN(BT,BO,BL){var BK=[];if(BT==AC){BK.push({X:BO.X-BL,Y:BO.Y-BL});BK.push({X:BO.X+BL,Y:BO.Y-BL});BK.push({X:BO.X+BL,Y:BO.Y+BL});BK.push({X:BO.X-BL,Y:BO.Y+BL});return BK;}var BQ;var BS;var BP=Y(BT);BQ=BP.number;BS=BP.points;for(var BR=0;BR<BQ;BR++){var BN=(BS[2*BR])*BL/A4+BO.X;var BM=(BS[2*BR+1])*BL/A4+BO.Y;BK.push({X:BN,Y:BM});}return BK;}function C(BP,BL,BN,BM){var BR=BL.length;if(BR<3){return ;}BP.beginPath();if(BN&&BM){var BK=[];for(var BO=0;BO<BR;++BO){BK.push(BL[BO]);}var BQ=BR-1;for(var BO=0;BO<BR;++BO){lNextIndex=(BO+1==BR)?0:BO+1;if(BL[BO].X==BL[BQ].X||BL[BO].X==BL[lNextIndex].X){BK[BO].X+=0.5;}if(BL[BO].Y==BL[BQ].Y||BL[BO].Y==BL[lNextIndex].Y){BK[BO].Y+=0.5;}BQ=BO;}j(BP,BK,false,BM);}else{j(BP,BL,false,BM);}BP.closePath();}function A8(BK,BN,BM){var BO=BK.X-BN.X;var BL=BK.Y-BN.Y;BK.X=BN.X+Math.cos(BM)*BO-Math.sin(BM)*BL;BK.Y=BN.Y+Math.sin(BM)*BO+Math.cos(BM)*BL;return BK;}function A1(BK,BM,BL){return A8(BK,BM,BL);}function BD(BL,BM,BK){if(BM*2>BL.Width){BM=BL.Width/2;}if(BK*2>BL.Height){BK=BL.Height/2;}return AF(BL,-BM,-BK);}function AF(BL,BM,BK){BL.X-=BM;BL.Y-=BK;BL.Width+=(BM*2);BL.Height+=(BK*2);return BL;}function s(BL,BK,BM){return S(BL,BK)+S(BK,BM)+S(BM,BL);}function o(BL,BK){return Math.sqrt((BL.X-BK.X)*(BL.X-BK.X)+(BL.Y-BK.Y)*(BL.Y-BK.Y));}function P(BN,BR,Ba){var BW=Ba;var BM=BN.length;var BV=BR;var BX=BN[(BV+BM-1)%BM];var BU=BN[(BV+1)%BM];var BP=0;var BZ={X:0,Y:0};var BY={X:BN[BR].X-BN[(BR+BM-1)%BM].X,Y:BN[BR].Y-BN[(BR+BM-1)%BM].Y};for(var BS=(BV+2)%BM;BS!=BV;BS=(BS+1)%BM){var BT=BS-1;if(BT<0){BT+=BM;}var Bc={X:BN[BT].X-BN[BV].X,Y:BN[BT].Y-BN[BV].Y};var Bb={X:BN[BS].X-BN[BV].X,Y:BN[BS].Y-BN[BV].Y};if(S(BY,Bc)<0.01&&S(BY,Bb)>0.01){var BL=c(BX,BN[BV],BN[BT],BN[BS],BZ,false);BZ=BL.interSection;BP=BS;break;}}var BK=0;var BQ={X:0,Y:0};var BO={X:BN[BR].X-BN[(BR+1)%BM].X,Y:BN[BR].Y-BN[(BR+1)%BM].Y};for(var BS=(BV+BM-2)%BM;BS!=BV;BS=(BS-1+BM)%BM){var BT=BS+1;if(BT>=BM){BT-=BM;}var Bc={X:BN[BT].X-BN[BV].X,Y:BN[BT].Y-BN[BV].Y};var Bb={X:BN[BS].X-BN[BV].X,Y:BN[BS].Y-BN[BV].Y};if(S(BO,Bc)>-0.01&&S(BO,Bb)<-0.01){var BL=c(BU,BN[BV],BN[BT],BN[BS],BQ,false);BQ=BL.interSection;BK=BS;break;}}BW.push(BN[BV]);BW.push(BZ);for(m=BP;;m=(m+1)%BM){BW.push(BN[m]);if(m==BK){break;}}BW.push(BQ);return BW;}function h(BV,BS){var BT=BV.length;if(BT==3){var BL=BJ(BV,BS);return BL;}else{var Bc=BV[BT-1];var BK={X:BV[1].X-BV[0].X,Y:BV[1].Y-BV[0].Y};var BW={X:-BK.X,Y:-BK.Y};var BN={X:Bc.X-BV[0].X,Y:Bc.Y-BV[0].Y};var Bd={X:-BN.X,Y:-BN.Y};var BP=false;var BU=10000000000;for(var Bb=2;Bb<BT;++Bb){var BZ=Bb-1;var Ba={X:BV[Bb].X-BV[BZ].X,Y:BV[Bb].Y-BV[BZ].Y};if(S(BW,Ba)<-0.01){var BM={X:0,Y:0};var BQ=c(BV[0],BV[1],BV[BZ],BV[Bb],BM,false);BM=BQ.interSection;if(BQ.val>0){var BR={X:BM.X-BV[0].X,Y:BM.Y-BV[0].Y};if(AJ(BK,BR)>0.01){var BO={X:BM.X+Ba.X,Y:BM.Y+Ba.Y};var BX={X:0,Y:0};var BY;var BL=U(Bc,BV[0],BM,BO,BX,BY);BX=BL.point;BY=BL.val;if(BL.mark){BP=true;if((BY<BU)&&Am(BX,BV[BZ-1],BV[BZ],BV[Bb],BV[(Bb+1)%BT])){BU=BY;}}}}}else{if(S(Bd,Ba)<-0.01){var BM={X:0,Y:0};var BQ=c(BV[0],Bc,BV[BZ],BV[Bb],BM,false);BM=BQ.interSection;if(BQ.val>0){var BR={X:BM.X-BV[0].X,Y:BM.Y-BV[0].Y};if(AJ(BN,BR)>0.01){var BO={X:BM.x-Ba.x,Y:BM.y-Ba.y};var BX={X:0,Y:0};var BY;var BL=U(BO,BM,BV[0],BV[1],BX,BY);BX=BL.point;BY=BL.val;if(BL.mark){BP=true;if((BY<BU)&&Am(BX,BV[BZ-1],BV[BZ],BV[Bb],BV[(Bb+1)%BT])){BU=BY;}}}}}}}return{mark:BP,depth:BU};}}function Ar(BK){return BK.X*BK.X+BK.Y*BK.Y;}function As(BW,BU,BT,BO){var BP={X:BW.X-BU.X,Y:BW.Y-BU.Y};var BN={X:BT.X-BU.X,Y:BT.Y-BU.Y};var BM=Math.sqrt(Ar(BP));var BL=Math.sqrt(Ar(BN));var BS={X:BP.X/BM,Y:BP.Y/BM};var BR={X:BN.X/BL,Y:BN.Y/BL};var BV=0;if(Math.abs(BS.X-BR.X)<0.01){BV=BO*(BR.X+BS.X)/(BS.Y-BR.Y);}else{BV=BO*(BR.Y+BS.Y)/(BR.X-BS.X);}var BQ={X:0,Y:0};var BK={X:0,Y:0};BQ.X=BU.X+BV*BR.X;BQ.Y=BU.Y+BV*BR.Y;BK.X=BQ.X+BO*(-BR.Y);BK.Y=BQ.Y+BO*BR.X;return{start:BK,end:BQ};}function Aj(BL,BK){var BM=AJ(BL,BK)/(Math.sqrt(Ar(BL)*Ar(BK)));BM=(BM>1)?1:BM;BM=(BM<-1)?-1:BM;return Math.acos(BM);}function Am(BQ,BY,BX,BV,BU){var BS={X:BY.X-BX.X,Y:BY.Y-BX.Y};var BP={X:BV.X-BX.X,Y:BV.Y-BX.Y};var BW=r(Aj(BS,BP));if(S(BP,BS)<-0.01){BW=360-BW;}var BM={X:BQ.X-BX.X,Y:BQ.Y-BX.Y};var BR=r(Aj(BM,BP));if(S(BP,BM)<-0.01){BR=360-BR;}if(2*BR>BW){return false;}var BL={X:-BP.X,Y:-BP.Y};var BK={X:BU.X-BV.X,Y:BU.Y-BV.Y};var BT=r(Aj(BL,BK));if(S(BK,BL)<-0.01){BT=360-BT;}var BO={X:BQ.X-BV.X,Y:BQ.Y-BV.Y};var BN=r(Aj(BL,BO));if(S(BO,BL)<-0.01){BN=360-BN;}if(2*BN>BT){return false;}return true;}function AO(BK){return Math.sqrt(Ar(BK));}function U(BY,BX,BV,BT,BO,Bb){var Bj;var Ba;var Bh={X:BX.X-BY.X,Y:BX.Y-BY.Y};var Bd={X:BT.X-BV.X,Y:BT.Y-BV.Y};var BR={X:BV.X-BX.X,Y:BV.Y-BX.Y};var Bg=Math.sqrt(Ar(BR));var Be=S(Bh,Bd);if(Be>0.01||Be<-0.01){var BS={X:0,Y:0};var BU=c(BY,BX,BV,BT,BS,false);BS=BU.interSection;var Bf=o(BX,BS);var BL=o(BV,BS);if(Be<-0.01){var BN=Bg+Bf+BL;BO.X=(BL*BX.X+Bf*BV.X+Bg*BS.X)/BN;BO.Y=(BL*BX.Y+Bf*BV.Y+Bg*BS.Y)/BN;Bj=s(BX,BV,BS)/BN;Ba=true;}else{var BN=Bf+BL-Bg;if(BN<0.01){var Bc=0;if(Math.abs(S(Bh,BR))<0.01){var Bi={X:-BR.X/Bg,Y:-BR.Y/Bg};var BM=Math.sqrt(Ar(Bd));var BP={X:Bd.X/BM,Y:Bd.Y/BM};Bc=(Bi.Y-BP.Y)*Bg/(Bi.X+BP.X);BO.X=BX.X+Bc*Bi.Y;BO.Y=BX.Y+Bc*(-Bi.X);}else{var BW={X:BR.X/Bg,Y:BR.Y/Bg};var BZ=AO(Bh);var BQ={X:-Bh.X/BZ,Y:-Bh.Y/BZ};Bc=(BQ.Y-BW.Y)*Bg/(BQ.X+BW.X);BO.X=BV.X+Bc*(-BW.Y);BO.Y=BV.Y+Bc*BW.X;}Bj=Bc;Ba=true;return{val:Bj,mark:Ba,point:BO};}BO.X=(BL*BX.X+Bf*BV.X-Bg*BS.X)/BN;BO.Y=(BL*BX.Y+Bf*BV.Y-Bg*BS.Y)/BN;Bj=s(BX,BS,BV)/BN;Ba=true;}}else{if(Math.abs(S(Bh,BR))<0.01){Ba=false;return{val:Bj,mark:Ba,point:BO};}var BZ=Math.sqrt(Ar(Bh));var BK={X:-Bh.X/BZ,Y:-Bh.Y/BZ};BO.X=(BX.X+BV.X+Bg*BK.X)/2;BO.Y=(BX.Y+BV.Y+Bg*BK.Y)/2;Bj=S(BR,BK)/2;Ba=true;}return{val:Bj,mark:Ba,point:BO};}function BJ(BY,BV){var Bh=false;var BL=BY.length;if(BL==3){var BT=o(BY[0],BY[1]);var BS=o(BY[1],BY[2]);var BR=o(BY[2],BY[0]);var BK=BT+BS+BR;BV=s(BY[0],BY[1],BY[2])/BK;Bh=true;}else{var BQ=false;var BX=10000000000;for(var Bd=0;Bd<BL;++Bd){var Be=BY[Bd];var Bf=BY[(Bd+BL-1)%BL];var Bc=BY[(Bd+1)%BL];var Bb=BY[(Bd+2)%BL];var BO={X:Bf.X-Be.X,Y:Bf.Y-Be.Y};var BM={X:Bc.X-Be.X,Y:Bc.Y-Be.Y};var BZ={X:-BM.X,Y:-BM.Y};var BW={X:Bb.X-Bc.X,Y:Bb.Y-Bc.Y};var BU=S(BO,BM);if(BU<0.01){if(S(BZ,BW)<0.01){var BP={X:0,Y:0};var Ba=0;var BN=U(Bf,Be,Bc,Bb,BP,Ba);BP=BN.point;Ba=BN.val;if(BN.mark){BQ=true;BX=(BX>Ba)?Ba:BX;}}}else{if(BU>0.01){var Bg=[];Bg=P(BY,Bd,Bg);var BN=h(Bg,Ba);var Ba=BN.depth;if(BN.mark){BQ=true;BX=(BX>Ba)?Ba:BX;}}}}BV=BX;Bh=BQ;}return{mark:Bh,depth:BV};}function AU(BL,BK){return(Math.abs(BL.X-BK.X)<0.01&&Math.abs(BL.Y-BK.Y)<0.01);}function AD(BL){var BM=[];BM.push(BL[0]);pcount=BL.length;for(var BK=1;BK<pcount;BK++){if(BL[BK-1].X==BL[BK].X&&BL[BK-1].Y==BL[BK].Y){continue;}BM.push(BL[BK]);}var BN=new Array();pcount=BM.length;for(var BK=0;BK<pcount;BK++){if(BK===pcount-1){if(BM[BK].X==BM[0].X&&BM[BK].Y==BM[0].Y){continue;}}BN.push(BM[BK]);}return BN;}function AW(BL,BK,BO,BN){var BM=0.01;if(BN===false){BM=-0.01;}if(Math.abs(BK.X-BO.X)<0.01){if(BL.Y-BK.Y>BM&&BO.Y-BL.Y>BM){return true;}if(BL.Y-BO.Y>BM&&BK.Y-BL.Y>BM){return true;}}else{if(BL.X-BK.X>BM&&BO.X-BL.X>BM){return true;}if(BL.X-BO.X>BM&&BK.X-BL.X>BM){return true;}}return false;}function c(BU,BT,BR,BQ,BP,BL){var BM={X:BT.X-BU.X,Y:BT.Y-BU.Y};var BN={X:BQ.X-BR.X,Y:BQ.Y-BR.Y};if(Math.abs(S(BM,BN))<0.01){var BK={X:BR.X-BU.X,Y:BR.Y-BU.Y};if(Math.abs(S(BM,BK))<0.01){return{val:-1,interSection:BP};}else{return{val:0,interSection:BP};}}else{var BO={X:BU.X-BR.X,Y:BU.Y-BR.Y};var BS=S(BN,BO)/S(BM,BN);BP.X=BU.X+BS*BM.X;BP.Y=BU.Y+BS*BM.Y;if(AW(BP,BU,BT,BL)&&AW(BP,BR,BQ,BL)){return{val:1,interSection:BP};}else{return{val:2,interSection:BP};}}}function z(BT,BM,BO){var BL=BM;while(BL<0){BL+=360;}while(BL>=360){BL-=360;}var BW=BT.X+BT.Width-BO.x;var BR=BO.y-BT.Y;var BY=BO.x-BT.X;var BP=BT.Y+BT.Height-BO.y;var BU=x(BL);var BN={x:Math.cos(BU),y:-Math.sin(BU)};var BQ;var BK;if(BL>=0&&BL<90){var BZ={x:BW,y:-BR};var BV={x:-BY,y:BP};BQ=O(BZ,BN);BK=O(BV,BN);}else{if(BL>=90&&BL<180){var Ba={x:-BY,y:-BR};var BX={x:BW,y:BP};BQ=O(Ba,BN);BK=O(BX,BN);}else{if(BL>=180&&BL<270){var BZ={x:BW,y:-BR};var BV={x:-BY,y:BP};BQ=O(BV,BN);BK=O(BZ,BN);}else{var Ba={x:-BY,y:-BR};var BX={x:BW,y:BP};BQ=O(BX,BN);BK=O(Ba,BN);}}}b.x=BO.x+BQ*BN.x;b.y=BO.y+BQ*BN.y;e.x=BO.x+BK*BN.x;e.y=BO.y+BK*BN.y;var BS=-BK/(BQ-BK);if(BS<0){BS=0;}else{if(BS>1){BS=1;}}return BS;}function x(BK){return BK*Ad/180;}function r(BK){return BK*180/Ad;}function O(BL,BK){return(BL.x*BK.x+BL.y*BK.y);}function AJ(BL,BK){return(BL.X*BK.X+BL.Y*BK.Y);}function S(BL,BK){return(BL.X*BK.Y-BL.Y*BK.X);}function Au(BM,Bc,BL,BN){var BK=Bc.Gradient;var BY="RGBA("+Math.round(BN*BK.StartGraphColor.R)+", "+Math.round(BN*BK.StartGraphColor.G)+", "+Math.round(BN*BK.StartGraphColor.B)+", "+Bc.Alpha/255+")";var BW="RGBA("+Math.round(BN*BK.EndGraphColor.R)+", "+Math.round(BN*BK.EndGraphColor.G)+", "+Math.round(BN*BK.EndGraphColor.B)+", "+BK.EndAlpha/255+")";var BU;switch(BK.GradientType){case a:if(BK.style==0){var Be=BK.HorizontalOffset;if((BK.Angle>90&&BK.Angle<180)||BK.Angle>270){Be=100-Be;}var Ba={x:BL.X+BL.Width*Be/100,y:BL.Y+BL.Height*BK.VerticalOffset/100};e={x:0,y:0};b={x:0,y:0};var BO=z(BL,BK.Angle,Ba);BU=BM.createLinearGradient(e.x,e.y,b.x,b.y);BU.addColorStop(0,BW);BU.addColorStop(BO,BY);BU.addColorStop(1,BW);}else{var BR=BK.Angle==0;e={x:0,y:0};b={x:0,y:0};if(BR){e.x=BL.X;b.x=BL.X+BL.Width;e.y=b.y=0;}else{e.y=BL.Y;b.y=BL.Y+BL.Height;e.x=b.x=0;}BU=BM.createLinearGradient(e.x,e.y,b.x,b.y);BU.addColorStop(0,BY);var Bd=BK.IntermediateColors;for(var Bb=0;Bb<Bd.length;Bb++){var BX=Bd[Bb].Color;var BZ="RGBA("+Math.round(BN*BX.mR)+", "+Math.round(BN*BX.mG)+", "+Math.round(BN*BX.mB)+", "+Bc.Alpha/255+")";BU.addColorStop(Bd[Bb].Step,BZ);}BU.addColorStop(1,BW);}BM.fillStyle=BU;BM.fill();break;case I:var Ba={x:BL.X+BL.Width*BK.HorizontalOffset/100,y:BL.Y+BL.Height*BK.VerticalOffset/100};var BS=BL.Width*1/BL.Height;Ba.y*=BS;BU=BM.createRadialGradient(Ba.x,Ba.y,0,Ba.x,Ba.y,BL.Width*2);BU.addColorStop(0,BY);BU.addColorStop(0.5,BW);BU.addColorStop(1,BW);BM.fillStyle=BU;BM.save();BM.scale(1,1/BS);BM.fill();BM.restore();break;case AG:var Ba={x:BL.X+BL.Width*BK.HorizontalOffset/100,y:BL.Y+BL.Height*BK.VerticalOffset/100};var BP=BK.Angle%90;var BT=r(Math.atan(BL.Height/BL.Width));var BQ=2*BP-BT*BP/45+90+BT;e={x:0,y:0};b={x:0,y:0};var BO=z(BL,BQ,Ba);var BV=BM.createLinearGradient(e.x,e.y,b.x,b.y);BY="RGBA("+Math.round(BN*BK.StartGraphColor.R)+", "+Math.round(BN*BK.StartGraphColor.G)+", "+Math.round(BN*BK.StartGraphColor.B)+", "+Bc.Alpha/(255*2-Bc.Alpha)+")";BW="RGBA("+Math.round(BN*BK.EndGraphColor.R)+", "+Math.round(BN*BK.EndGraphColor.G)+", "+Math.round(BN*BK.EndGraphColor.B)+", "+BK.EndAlpha/(255*2-BK.EndAlpha)+")";BV.addColorStop(0,BW);BV.addColorStop(BO,BY);BV.addColorStop(1,BW);BM.fillStyle=BV;BM.fill();BQ=BT*BP/45+90-BT;BO=z(BL,BQ,Ba);BU=BM.createLinearGradient(e.x,e.y,b.x,b.y);BY="RGBA("+Math.round(BN*BK.StartGraphColor.R)+", "+Math.round(BN*BK.StartGraphColor.G)+", "+Math.round(BN*BK.StartGraphColor.B)+", "+Bc.Alpha/(255*2)+")";BW="RGBA("+Math.round(BN*BK.EndGraphColor.R)+", "+Math.round(BN*BK.EndGraphColor.G)+", "+Math.round(BN*BK.EndGraphColor.B)+", "+BK.EndAlpha/(255*2)+")";BU.addColorStop(0,BW);BU.addColorStop(BO,BY);BU.addColorStop(1,BW);BM.fillStyle=BU;BM.fill();break;}}function Al(BK,BM){var BL=BM.Alpha/255;BK.fillStyle="rgba(255,255,255,"+BM.Alpha/255+")";BK.fill();}function AH(BL){var BK=BL.canvas;BL.clearRect(0,0,BK.width,BK.height);}function Ai(BK){Aq=(new Date()).getTime();L(BK);}function L(BT){var BS=BT.graphData,BU=BS.UnitList,BV=BU.length,BN=BS.FormatList,BY=BT.graphNode,BQ=BT.highlightNode,BO=BQ.getContext("2d"),BX=BT.selectionNode,BP=BX.getContext("2d"),BM=BY.getContext("2d");AH(BM);AH(BO);AH(BP);var BZ=Math.min(((new Date()).getTime()-Aq)/AB,1),BW=(1-BZ),BR;var BK=0.3*BZ*BW*BW+2.7*BW*BZ*BZ+BZ*BZ*BZ;var BL=0;for(BR=0;BR<BV;BR++){Ao(BM,BK,BU[BR],BN);if(BU[BR].IsAnimated!==0){BL=1;}}if(BZ<1&&BL===1){setTimeout(function(){L(BT);},20);}}mstrmojo.graph._CanvasGraph=mstrmojo.provide("mstrmojo.graph._CanvasGraph",{markupString:'<div class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><canvas id="{@id}" height="{@height}" width="{@width}">{@unsupportedError}</canvas>{@map}<canvas id="{@id}-highlight" class="mobile-graph-selection-canvas" height="{@height}" width="{@width}" style="position:absolute;top:0;left:0"></canvas><canvas id="{@id}-highlight" class="'+mstrmojo.GraphBase.canvasCLS+'" height="{@height}" width="{@width}" style="position:relative;top:0;left:0"></canvas></div>',unsupportedError:"This text is displayed if your browser does not support HTML5 Canvas element.",markupSlots:{graphNode:function(){return this.domNode.childNodes[1];},imgNode:function(){return this.domNode.childNodes[1];},mapNode:function(){return null;},textNode:function(){return this.domNode.firstChild;},selectionNode:function(){return this.domNode.lastChild.previousSibling;},highlightNode:function(){return this.domNode.lastChild;}},graphData:null,retrieveGraphSrc:function BC(BN,BR){var BP=this.graphNode,BS=this.highlightNode,BO=this.selectionNode,BQ=this.graphData,BM=(BQ&&BQ.data);if(BM&&BM.eg){var BT=this.textNode,BL=this.imgNode;BL.style.display="none";BS.style.display="none";BO.style.display="none";BT.innerHTML=BM.eg||"";BT.style.display="block";BT.className="mstrmojo-message";}else{var BU=BQ.GH||parseInt(BN,10),BK=BQ.GW||parseInt(BR,10);BP.setAttribute("height",BU);BP.setAttribute("width",BK);BS.style.display="block";BS.setAttribute("height",BU);BS.setAttribute("width",BK);BS.style.top=-BU+"px";BO.style.display="block";BO.setAttribute("height",BU);BO.setAttribute("width",BK);this.displayTooltips([],0,0);Ai(this);if(BQ.Selected){this.highlightAreaInInit(BO,BQ.Selected);}}},unrender:function AP(BK){this._super(false);},invalidate:function K(){var BK=this.graphNode;if(BK){AH(BK.getContext("2d"));}},getCaptureDimensions:function AZ(){var BL=this.graphNode,BK=mstrmojo.dom.position(this.domNode,true);BK.w=BL.width;BK.h=BL.height;return BK;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo.css","mstrmojo.Pulldown","mstrmojo.ProgressBar");var N=mstrmojo.dom,Q=mstrmojo.css,R="disabled",C=-1;function O(){var W=this.selected,U=this.panels.length,X=this.getValidPanelsNum(W),V=this.getValidPanelsNum(U);if(X===V-1){Q.addClass(this.nextBtnNode,R);}else{Q.removeClass(this.nextBtnNode,R);}if(X===0){Q.addClass(this.prevBtnNode,R);}else{Q.removeClass(this.prevBtnNode,R);}}mstrmojo.PageNavigationPanel=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.PageNavigationPanel",markupString:'<div class="mstrmojo-PageNavPanel {@cssClass}" style="{@cssText}" mstrAttach:click><div class="header"><div class="titles"><div class="title">{@title}</div><div class="subtitle">{@subtitle}</div></div><div class="progress"></div><div class="navigation"></div></div><div class="content"></div><div class="footer"><div class="prev"><div class="btn" btnv="pre">{@prevText}</div></div><div class="pges"></div><div class="next"><div class="btn" btnv="nxt">{@nextText}</div></div></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},progressBarNode:function(){return this.domNode.firstChild.childNodes[1];},navigationNode:function(){return this.domNode.firstChild.childNodes[2];},containerNode:function(){return this.domNode.childNodes[1];},footerNode:function(){return this.domNode.lastChild;},prevBtnNode:function(){return this.domNode.lastChild.firstChild;},pagesNode:function(){return this.domNode.lastChild.childNodes[1];},nextBtnNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{onsubtitleChange:function(){this.headerNode.firstChild.lastChild.innerHTML=this.subtitle||"";},onheaderVisibleChange:function(){this.headerNode.style.display=this.headerVisible?"":"none";},ontitleVisibleChange:function(){this.headerNode.firstChild.style.display=this.titleVisible?"":"none";},onsubtitleVisibleChange:function(){this.headerNode.lastChild.style.display=this.subtitleVisible?"":"none";},onheightChange:function(){var V=this.headerHeight,U=this.footerHeight;if(this.height){if(!V||!U){V=this.headerHeight=this.headerNode.offsetHeight||0;U=this.headerHeight=this.footerNode.offsetHeight||0;}this.containerNode.style.height=(parseInt(this.height,10)-V-U)+"px";}}},title:"",subtitle:"",prevText:"Prev",nextText:"Next",selected:0,headerVisible:true,titleVisible:true,subtitleVisible:true,panels:null,renderedPanels:0,init:function M(U){this.panels=[];this._super(U);},onselectedChange:function K(){var W=this.selected,U=this._lastSelected,X=this.panels[W],V=this.panels[U];if(V){V.set("visible",false);}if(X){X.set("visible",true);}this.set("subtitle",X.title);this._lastSelected=this.selected;O.call(this);if(this.navlst){this.navlst.set("value",W);}this.updatePageNode();},onrenderedPanelsChange:function J(){var U=this.panels.length,V=this.renderedPanels;if(U>0){this.updateProgressNode(Math.floor(100*V/U));}else{this.updateProgressNode(0);}},updateProgressNode:function E(U){if(this.prgbar){this.prgbar.updateProgress(U,U+"% completed");}},updatePageNode:function A(){this.pagesNode.innerHTML=(this.getValidPanelsNum(this.selected)+1)+"/"+this.getValidPanelsNum(this.panels.length);},getValidPanelsNum:function D(Y){var X=0,V=this.panels||[];for(var W=0,U=V.length;W<U;W++){if(W===Y){return X;}if(!V[W].isHide){X++;}}return X;},getNextValidPanel:function H(X){var V=this.panels||[];for(var W=X+1,U=V.length;W<U;W++){if(!V[W].isHide){return W;}}return C;},getPreValidPanel:function F(W){var U=this.panels||[];for(var V=W-1;V>=0;V--){if(!U[V].isHide){return V;}}return C;},showNextPanel:function I(){var V=this.selected,W=this.panels[V],U=this.getNextValidPanel(V);if(U===C){return ;}if(!W.viewed){W.viewed=true;this.set("renderedPanels",this.renderedPanels+1);}this.set("selected",U);},showPreviousPanel:function L(){var U=this.selected,W=this.panels[U],V=this.getPreValidPanel(U);if(V===C){return ;}if(!W.viewed){W.viewed=true;this.set("renderedPanels",this.renderedPanels+1);}this.set("selected",V);},update:function G(X){var W=this.panels,U=W.length,Y=this.navlst,V;if(X>=U){return ;}V=this.panels[X];this.updatePageNode();O.call(this);Y.items[X].css=(!V.isHide)?"enabled":"disabled";},preBuildRendering:function B(){var V,U,a=this.panels||[],Z=[],Y=0,W=this;if(a.length>0){for(V=0,U=a.length;V<U;V++){if(V!==this.selected){a[V].visible=false;}else{Y=V;}Z.push({n:a[V].title,v:V,css:(Y===V)?"enabled":"disabled"});}this.set("children",[{scriptClass:"mstrmojo.ProgressBar",alias:"prgbar",slot:"progressBarNode"},{scriptClass:"mstrmojo.Pulldown",alias:"navlst",slot:"navigationNode",items:Z,itemIdField:"v",defaultSelection:Y,onvalueChange:function b(){var c=W.panels,d=c[W._lastSelected];W.set("selected",this.value);this.items[this.value].css="enabled";if(!d.viewed){d.viewed=true;W.set("renderedPanels",W.renderedPanels+1);}},prevalueChange:function X(){var c=W.panels;if(!c[this.value].viewed||c[this.value].isHide){this.value=W._lastSelected;}}}].concat(a));this.set("subtitle",a[0].title);this._lastSelected=this.selected;}this._super();},postBuildRendering:function P(){this._super();this.updateProgressNode(0);this.updatePageNode();O.call(this);},onclick:function S(a){var Y=N.eventTarget(window,a.e),V=Y.getAttribute("btnv"),Z=this.selected,W=this.panels,U=W.length,c=this.getValidPanelsNum(Z),X=this.getValidPanelsNum(U);if(V){if(V==="pre"&&c>0){this.showPreviousPanel();}else{if(V==="nxt"&&c<X-1){this.showNextPanel();}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.express.ui.SubtotalsWidget");mstrmojo.vi.ui.SubtotalsWidget=mstrmojo.declare(mstrmojo.express.ui.SubtotalsWidget,null,{scriptClass:"mstrmojo.vi.ui.SubtotalsWidget"});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.graph._CanvasGraph");function B(){var D=document.createElement("canvas");D.width=10;D.height=10;return D;}mstrmojo.gm.VecDrawer=mstrmojo.declare(mstrmojo.Base,[mstrmojo.graph._CanvasGraph],{scriptClass:"mstrmojo.gm.VecDrawer",init:function C(D){this._super(D);this.selectionNode=B();this.highlightNode=B();},displayTooltips:function A(){}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo.Box","mstrmojo.HBox","mstrmojo.Button","mstrmojo.Label","mstrmojo.TextArea","mstrmojo.Editor","mstrmojo.ui._HasScroller","mstrmojo.ui.ScrollableContainer");var D=mstrmojo.dom,C=mstrmojo.Button.newWebButton,E=mstrmojo.array,G=mstrmojo.css,H=mstrmojo.string;mstrmojo.vi.ui.editors.SQLCSIViewer=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.editors.SQLCSIViewer",title:mstrmojo.desc(15619,"Query Details"),cssClass:"mstrmojo-charcoalboxe mstrmojo-SQLV mstrmojo-vi-ui-SQLV",csiText:"",copied:false,onOpen:function A(){this.set("copied",false);this.updateScrollbars();},oncsiTextChange:function F(J){this.content.csiTextLabel.set("text",H.encodeHtmlString(J.value));this.updateScrollbars();},setupScrollNodes:function B(){this.scrollNode=this.content.containerNode;},children:[{scriptClass:"mstrmojo.Box",alias:"content",cssClass:"mstrmojo-SQLV-content-container",cssText:"",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"><div class="scroll-container" style="overflow:hidden;"></div><textarea name="csi_text" style="position:absolute;top:0;right:10000px"></textarea></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},csiInputNode:function(){return this.domNode.lastChild;}},slot:"containerNode",csiTextLabel:undefined,children:[{scriptClass:"mstrmojo.Label",alias:"csiTextLabel",allowHTML:false,text:""}]},{alias:"buttonBar",scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[{alias:"successIcon",cssClass:"success-icon",scriptClass:"mstrmojo.Label",bindings:{visible:"this.parent.parent.copied"}},{alias:"successTooltip",cssClass:"notice-toaster-label",scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15620,"Statement Copied to Clipboard"),bindings:{visible:"this.parent.parent.copied"}},C(mstrmojo.desc(14502,"Copy to Clipboard"),function I(){var M=this.parent.parent,L=M.content.csiInputNode;L.innerText=M.csiText;L.select();try{var K=document.execCommand("copy");M.set("copied",K);}catch(J){}},false,{cssClass:"copy-button",alias:"btnCopy"}),C(mstrmojo.desc(2102,"Close"),function I(){this.parent.parent.close();},false,{alias:"btnClose"})]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.ScrollableContainer","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.Button");var H=mstrmojo.Button.newWebButton,E=mstrmojo.hash,L=mstrmojo.css,J=mstrmojo.dom;var B="grouping",C="highlight",I="disabled";function F(O,Q){J.preventDefault(window,O);J.stopPropogation(window,O);if(this.groupingOverlay.domNode.className.indexOf(C)===-1&&this.domNode.className.indexOf("selected")===-1){return ;}Q=E.copy(Q,{supportsScroll:true,isHostedWithin:false,maxHeight:J.getMaxScrollHeight()});var P=this.parent.getGroupContextMenuConfig(new mstrmojo.ui.menus.MenuConfig(Q),this.k);if(P.hasMenuItems()){this.openPopup(P.newInstance());}}mstrmojo.vi.ui._CanGroup=mstrmojo.provide("mstrmojo.vi.ui._CanGroup",{_mixinName:"mstrmojo.vi.ui._CanGroup",startGrouping:function G(O){L.addClass(this.domNode,B);var Q=this.groupingOverlay;if(!Q){var P=this,S=this.id;this.addChildren({scriptClass:"mstrmojo.ui.ScrollableContainer",cssClass:"groupingOverlay",alias:"groupingOverlay",cssDisplay:"",slot:"domNode",children:[H(mstrmojo.desc(1911,"Group"),function(U){U.cancel();P.groupSelection();},true,{cssClass:"btnGroup",cssDisplay:""}),H("",function(U){var V=mstrmojo.ui.PopupConfig.prototype.ENUM_CORNERS;F.call(mstrmojo.all[S],U.e,{hostId:S,hostElement:this.domNode,alignment:{host:V.BOTTOM_LEFT,popup:V.TOP_LEFT}});},false,{cssClass:"btnMenu",cssDisplay:""})]});this.groupingOverlay.render();var R=this.groupingOverlay.domNode;J.attachEvent(R,"contextmenu",function(U){F.call(P,U,{position:J.getMousePosition(U,window)});});J.attachEvent(R,"click",function(U){var V=U.target;if(V.className.indexOf("mstrmojo-scrollbar")!==-1){J.stopPropogation(window,U);}});}this.setGroupingStatus(O?"":I);this._menuBtnInfo=this.menuBtnInfo;this.menuBtnInfo=null;this._originalContextMenu=this.shouldShowCustomizeContextMenu;this.shouldShowCustomizeContextMenu=function(){return false;};},setGroupingStatus:function K(O){var Q=this,P=[I,C];P.forEach(function(R){L.toggleClass(Q.groupingOverlay.domNode,R,O===R);});},endGrouping:function N(){L.removeClass(this.domNode,B);this.setGroupingStatus("");this.menuBtnInfo=this._menuBtnInfo;delete this._menuBtnInfo;this.shouldShowCustomizeContextMenu=this._originalContextMenu;delete this._originalContextMenu;},initializeDrag:function A(){return this.domNode.className.indexOf(B)===-1;},groupSelection:function D(){this.parent.groupSelection();},widgetResized:function M(){if(this._super){this._super();}var O=this.groupingOverlay;if(O){this.groupingOverlay.updateScrollbars();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.hash","mstrmojo.array","mstrmojo.Button","mstrmojo.Label","mstrmojo.ToolSeparator","mstrmojo.ui.ScrollableContainer","mstrmojo.ui.Pulldown");mstrmojo.requiresDescs(1442,8689,11952,11953,11954,11955,11956,11957,12136);var D=mstrmojo.hash,K=mstrmojo.array,G=mstrmojo.Button.newWebButton,O=function(Q){if(Q){var P=Q.t;return Math.round(P/10)==52||P==115;}return false;},M={},L,E,I,F,H,B=function(){var e=this,U=e.vis,X=[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",allowHTML:true,text:mstrmojo.desc(11952,"Use  <span>#</span> to filter the following targets:").replace("#",U.title),visible:true},{scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"VisContainer",cssClass:"mstrmojo-scrollable-container",children:[]},{scriptClass:"mstrmojo.ToolSeparator"},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-filter-type",cssDisplay:"table-cell",alias:"filterType",selectedIndex:(!!H&&H.length>0)&&!E&&!L?1:0,isHostedWithin:true,enabled:false,items:[{n:mstrmojo.desc(8689,"Filter"),v:true},{n:mstrmojo.desc(11953,"Highlight"),v:false}],onitemSelected:function(h){M.isFilter=h.v;this.isFilter=h.v;e.csl.set("enabled",Q>0&&this.isFilter);e.forType.set("enabled",this.isFilter);},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-type-label",cssDisplay:"table-cell",text:mstrmojo.desc(11954,"data on selection"),visible:true},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-for-type",cssDisplay:"table-cell",alias:"forType",value:0,visible:false,selectedIndex:0,isHostedWithin:true,enabled:false,items:[{n:mstrmojo.desc(11955,"for #").replace("#",(I[0]||{}).n),v:false},{n:mstrmojo.desc(11956,"for All Data"),v:true}],onitemSelected:function(h){M.forAllData=h.v;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);}},{scriptClass:"mstrmojo.CheckBox",cssClass:"mstrmojo-clear-check",alias:"csl",checked:(L?L.showall:true),cssDisplay:"block",label:mstrmojo.desc(11957,"Allow users to clear all selections"),enabled:false,oncheckedChange:function(){M.clearAll=this.checked;}}],R=U.parent.children,b,Z={},Q=0,V=function(l){var k=R[l],j=k.boxContent,o=j.isVisMap,p,q,h,n;if(H){p=mstrmojo.array.find(H,"k",k.k)!==-1;}else{if(I.length>0){if(I[0]&&I[0].sc&&I[0].sc.tks){p=I[0].sc.tks.indexOf(k.k)>-1;}}}Q+=p?1:0;if(k!==U&&O(k.defn)){q=k.boxContent.getFilterType();h=k.boxContent.model.getSelectorControlMapInfo();if(o){n=j.getAllLayerKeys(true);K.forEach(n,function(r){Z[r]={c:false,v:p,ft:q,cgbs:h};});}else{Z[k.k]={c:false,v:p,ft:q,cgbs:h};}X[1].children.unshift({scriptClass:"mstrmojo.CheckBox",cssDisplay:"block",label:k.title,checked:p,oncheckedChange:function(){var r=this.checked;if(o){n=j.getAllLayerKeys(true);K.forEach(n,function(s){Z[s]={c:true,v:r,ft:q,cgbs:h};});}else{Z[k.k]={c:true,v:r,ft:q,cgbs:h};}M.targetKeys=Z;Q+=this.checked?1:-1;e.forType.set("enabled",Q>0&&e.filterType.isFilter);e.filterType.set("enabled",Q>0);e.csl.set("enabled",Q>0&&e.filterType.isFilter);}});}};for(b=R.length-1;b>=0;b--){V(b);}var Y=U.boxContent,f=Y&&Y.isVisMap;if(f){var c=mstrmojo.desc(14751,"Use % of <span>#</span> to filter the following targets:"),S=c.split("%"),a=S&&S.length,g,P,W,d=K.map(Y.getGraphicLayerNameArr(),function(h){return{n:h.n,v:h.k};});if(a!==2){return ;}g=S[0].replace("#",U.title);P=S[1].replace("#",U.title);W={scriptClass:"mstrmojo.HBox",cssClass:"",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",allowHTML:true,text:g,visible:true},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"",cssDisplay:"table-cell",alias:"sourceLayer",selectedIndex:K.find(d,"v",Y.getKeyForTemplateSelection()),isHostedWithin:true,enabled:true,items:d,onitemSelected:function(h){M.layerKey=h.v;M.isLayerChanged=h.v!==Y.getKeyForTemplateSelection();}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",allowHTML:true,text:P,visible:true}]};X.splice(0,1,W);}this.addChildren(X);this.targetKeys=Z;};mstrmojo.vi.ui.editors.VisAsFilterDialog=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.VisAsFilterDialog",title:mstrmojo.desc(12136,"Filtering options"),cssClass:"mstrmojo-vis-as-filter",btnAlignment:"right",vis:null,buttons:null,modal:true,visible:false,help:"filtering_options_dialog_box_html5.htm",onOpen:function C(){this.VisContainer.onOpen();},postBuildRendering:function A(){this._super();M={};},toggleFields:function J(){if(I.length!==0){this.forType.set("visible",true);this.filterType.set("enabled",true);}if(H&&H.length>0){this.filterType.set("enabled",true);}if(L){this.csl.set("enabled",true);}},preBuildRendering:function N(){var U=this,P=U.id,W=U.vis,V=W.boxContent,S=V.isVisMap,R=S?V.getWidgetForTemplateSelection().node.defn:W.defn,Q=V.model;I=(Q.getSelectorControlMapInfo?Q.getSelectorControlMapInfo():[]);if(I.length>0){L=I[0].sc;F=I[0].did;E=true;}else{H=R.an;L=V.selectorControl||(V.findSelectorControl&&V.findSelectorControl());E=false;}this.set("buttons",[G(mstrmojo.desc(1442,"OK"),function(){if(!D.isEmpty(M)){M.targetKeys=U.targetKeys;M.singleUnit=E;if(E){M.unitId=F;}M.sc=L;W.model.setVisAsFilter(W,M);}mstrmojo.all[P].destroy();},true),G(mstrmojo.desc(221,"Cancel"),function(){mstrmojo.all[P].destroy();})]);B.call(this);this.toggleFields();this._super();}});mstrmojo.vi.ui.editors.VisAsFilterDialog.open=function(Q){var P=mstrmojo.insert({scriptClass:"mstrmojo.vi.ui.editors.VisAsFilterDialog",vis:Q});P.open();};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo._FillsBrowser","mstrmojo.Container","mstrmojo.EnumRWUnitType","mstrmojo.Label","mstrmojo.ui.PopupButton","mstrmojo.ui.Pulldown","mstrmojo.vi.ui.TargetSelector","mstrmojo.vi.ui.TruncatedList");var b=mstrmojo.hash,U=mstrmojo.array,j=mstrmojo.css,J=mstrmojo.dom,a=mstrmojo.Button.newWebButton,h=mstrmojo.EnumRWUnitType,k=null,E=function(l){var n=this.vis.model,p=l.panelKey,o=this.currentPanelKey||n.getVizContentPanel().k;if(p===o){return ;}if(this.targetContainer.getTargetChildren().length===0){this.goToPage(l);return ;}this._tocNavWarn(l);},M=function(){var l=mstrApp.rootCtrl,u=l.view,p=l.toggleViewBar,t=l.tocPanel,q=l.galleryPanel,n=l.datasetsPanel,r=this.vis.model,w=[],s,o;s=[p,n,q];this.isCPVisible=o=u.isCPVisible;U.forEach(s,function(x){w.push(x&&x.getOpenStatus());});this.panelsIsOpen=w;this.panels=s;if(this.tocEnabled){if(!o){u.setIsCPVisible(true,true);}this.isTocNav=t.visible;t.set("isMasked",false);this.setNavIcon(true,true);}if(r.attachEventListener){this.layoutSelectedSubscription=r.attachEventListener("targetLayoutSelected",this.id,E.bind(this));}},F=function(){var p=this.vis.model,n=mstrApp.rootCtrl.view,o=this.panelsIsOpen,l=this.isCPVisible;U.forEach(this.panels,function(q,r){q.setOpenStatus(o[r],true,undefined,false);});if(this.tocEnabled){if(!l){n.setIsCPVisible(l,true);}this.setNavIcon(false,true);}if(p.detachEventListener){p.detachEventListener(this.layoutSelectedSubscription);}},Z=function(w){var x=w.length,n=this.targetContainer.getTargetChildren(),q=n.map(function(y){return y.key;}).sort(U.stringSorter),s=q.length,l,o,t,r,u,p=[];if(x>s){l=s;o=w;r=true;}else{l=x;o=q;r=false;}for(t=0;t<l;t++){if(w[t]!==q[t]){this.targetContainer.addAndRemoveKeys([this.targetKeys[o[t]]],r);return ;}}for(t;t<o.length;t++){u=this.targetKeys[o[t]];if(u){p.push(u);}}if(p.length){this.targetContainer.addAndRemoveKeys(p,r);}},S=function(l){var n=l.getVizContentPanel()._tgtSelections;if(n){n.notify();}},e=function(l){if(this.options){this.csl.set("enabled",l);this.options.set("enabled",l);}};function W(){var l=this.vis.model,o=this.vis.k,n;if(!this.targetSelector){this.targetSelector=this._createTargetSelector();}else{this.targetSelector.set("hostId",this.id);if(!mstrmojo.all[this.vis.id]){n=l.getLayoutKeyByUnitKey(o);if(n===l.getCurrentLayoutKey()){this.targetSelector.setSourceByKey(o);}}}this.showControlOverlay([this.targetSelector]);this.targetSelector.enterSelectMode();}function D(){var o,p=this.sc,l=p&&p.isNavigation&&p.navPage,n=this.options;if(this.vis.model.getVizContentPanel().children){if(n){n.closeDialog();}delete this.children;this.refresh();if(!l||l===this.currentPanelKey){o=b.valarray(this.targetKeys).filter(function(q){return q.v;}).map(function(q){return q.k;}).sort(U.stringSorter);if(o.length){Z.call(this,o);}}}}function V(n){var l=n.boxContent,u=l.isVisMap,s=u?l.getWidgetForTemplateSelection().node.defn:n.defn,o=l.model,p=(this.srcPanelKey===n.model.getVizContentPanel().k),t,r,q;this.cgbs=q=(o&&o.getSelectorControlMapInfo?o.getSelectorControlMapInfo():[]);if(q.length>0){t=q[0].sc;this.unitId=q[0].did;this.singleUnit=true;}else{r=s.an;t=l.selectorControl||(o&&l.findSelectorControl&&l.findSelectorControl());this.singleUnit=false;}this.cachedFiltertypeIndex=(!!r&&r.length>0)&&!this.singleUnit&&!t?1:0;if(k===null){k=p&&(t?t.showall:true);}this.sc=t;this.an=r;}mstrmojo.vi.ui.InlineDialogBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser],{scriptClass:"mstrmojo.vi.ui.InlineDialogBase",cssClass:"mstrmojo-inline-dialog",title:mstrmojo.desc(12136,"Filtering options"),targetKeys:null,vis:null,buttons:null,origTargetKeys:[],changes:{},sc:null,singleUnit:null,cgbs:null,unitId:null,an:null,panelsIsOpen:null,panels:null,isCPVisible:null,srcPanelKey:null,shouldNavigate:true,cachedFiltertypeIndex:0,numBoxesChecked:0,optionsStateForRefresh:{openOnRefresh:false,showAll:false},layoutSelectedSubscription:null,tocEnabled:true,isTocNav:false,isOnTocChange:false,selectFilters:false,targetSelector:null,markupString:'<div id="{@id}" class="mstrmojo-Dialog-Bar {@cssClass}" tabindex="0" mstrAttach:click><div class="win mstrmojo-bar"><div class="mstrmojo-bar-content"></div><div class="mstrmojo-bar-buttons"></div></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[0];},buttonNode:function(){return this.domNode.firstChild.lastChild;}},init:function c(n){if(this._super){this._super(n);}this.srcPanelKey=this.vis.parent.k;var l=this.vis.model;if(l.attachEventListener){l.attachEventListener("buildBoxLayoutComplete",this.id,this.buildBoxLayoutComplete);}},buildBoxLayoutComplete:function O(){var l=this.vis.model;if(this.tocEnabled&&!this.isTocNav){this.setNavIcon(true,true);}D.call(this);if(this.isOnTocChange){var o=l.getVizContentPanel()._tgtSelections,n=b.valarray(this.targetKeys).filter(function(p){return p.v;}).map(function(p){return p.k;});if(o){U.forEach(n,function(p){l.getUnitInstance(p,1).parent.toggleBoxSelection(true);if(!o.toggleSelection(p)){o.toggleSelection(p);}});this.isOnTocChange=false;}}S(l);},_createTargetSelector:function B(){return new mstrmojo.vi.ui.TargetSelector({alias:"targetSelector",orientation:"h",hostId:this.id,srcId:this.vis.id});},_createOptionsButton:function R(){var p=this,r=p.vis,n=r.model,o=(this.srcPanelKey===(this.currentPanelKey||n.getVizContentPanel().k));return{scriptClass:"mstrmojo.ui.PopupButton",alias:"options",cssDisplay:"inline-block",isHostedWithin:false,anchorSlot:"btnNode",markupString:'<div id="{@id}" class="mstrmojo-ui-OptionsButton {@cssClass}" style="{@cssText}"><div class="opts" mstrAttach:click></div></div>',markupSlots:{btnNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},onRender:function(){if(this._super){this._super();}j.toggleClass(this.domNode,"disabled",!this.enabled);},onenabledChange:function(){j.toggleClass(this.domNode,"disabled",!this.enabled);},getPopupWidget:function q(){return this.optionEditor;},getPopupConfig:function l(){var t=mstrmojo.ui.PopupConfig.ENUM_CORNERS,s=this.constructor.prototype.getPopupConfig.call(this);s.alignment={host:t.BOTTOM_RIGHT,popup:t.TOP_RIGHT};return s;},openDialog:function(){var t=p.optionsStateForRefresh,s=this.optionEditor;if(t.openOnRefresh){t.openOnRefresh=false;s.clrSel.set("checked",t.showAll);s.open();}},closeDialog:function(){var t=p.optionsStateForRefresh,s=this.optionEditor;if(s.visible){t.openOnRefresh=true;t.showAll=s.clrSel.checked;s.close();}},children:[{scriptClass:"mstrmojo.ui.PopupWidget",alias:"optionEditor",visible:false,onClose:function(){this.clrSel.set("checked",k);this.buttons.enableApply(false);},handleSelectionSubmit:function(s){var t=p.changes;if(s){if(t.clearAll!==undefined){delete t.clearAll;}else{t.clearAll=p.csl.checked;}k=p.csl.checked;S(n);}this.close();},children:[{scriptClass:"mstrmojo.CheckBox",cssClass:"mstrmojo-clear-check",cssDisplay:"inline-block",alias:"clrSel",enabled:false,checked:k,label:mstrmojo.desc(11957,"Allow users to clear all selections"),onenabledChange:function(){if(!o){this.enabled=false;this.set("checked",false);}else{if(!p.filterType.isFilter){this.set("checked",true);}else{this.set("checked",k);}}},oncheckedChange:function(){var s=this.parent;if(s){s.buttons.enableApply(this.enabled&&this.checked!==k);}}},{scriptClass:"mstrmojo.Box",alias:"buttons",cssClass:"buttonBox",children:[a(mstrmojo.desc(8473,"Done"),function(){var s=this.parent.parent;s.handleSelectionSubmit(true);},true,{cssDisplay:"inline-block",enabled:false}),a(mstrmojo.desc(221,"Cancel"),function(){var s=this.parent.parent;s.handleSelectionSubmit(false);},false,{cssDisplay:"inline-block"})],enableApply:function(s){this.children[0].set("enabled",s);}}]}]};},validT:function d(n){if(n){var l=n.t;if(this.selectFilters){return Math.round(l/10)===52||l===h.SELECTOR||l===h.MOJOVISUALIZATION;}else{return Math.round(l/10)===52||l===h.MOJOVISUALIZATION;}}return false;},setNavIcon:function I(p,s){var w=this.vis,q=w.model,u=q.getVizContentPanel().parent.selector,t=q.controller.view,n=t.layoutViewer.docLayout.selector,l=mstrApp.rootCtrl,r=l.tocPanel,o=w.k;if(this.isTocNav){r.setTOCIcon(p,s);}else{if(s||!p){n.setLinkIcon(p,s?q.getLayoutKeyByUnitKey(o):null);}u.setLinkIcon(p,s&&w.defn.pnk);}},getTargetKeys:function(){var l=[];b.forEach(this.targetKeys,function(o,n){if(o.v){l.push(n);}});l.sort(U.stringSorter);return this.origTargetKeys=l;},setTargets:function(x){var q=this.targetKeys,n=this.vis,p=n.model,o=this.currentPanelKey||p.getVizContentPanel().k,r=[],w=this.changes,s=this.singleUnit,t=this.srcPanelKey,l=this.filterType;x=p.updateFilterTargetsForSdp(x);U.forEach(this.an,function(y){if(!q[y.k]){q[y.k]={c:false,v:true};}});b.forEach(q,function(z,y){if(U.some(x,function(AA){return AA===y;})){r.push(y);if(!z.v){z.v=true;z.c=true;}}else{if(z.v){z.v=false;z.c=true;}}});w.filterKeys=r;w.targetKeys=q;w.singleUnit=s;if(s){w.unitId=this.unitId;}if(t!==o){w.isNav=true;w.navPage=o;w.srcKey=t;}w.sc=this.sc;w.isFilter=l&&l.isFilter;var u=mstrmojo.vi.VisualInsightApp.APP_STATES;mstrApp.set("appState",mstrApp.isAppStatePause()?(u.PAUSE|u.SELECTOR_TARGETING):u.SELECTOR_TARGETING);this._setTargetsFunc();},_setTargetsFunc:mstrmojo.emptyFn,isSelectionDirty:function A(p){var n=false,l=p.length,q=this.origTargetKeys,o=this.changes;p.sort(U.stringSorter);Z.call(this,p);if(l===q.length){U.forEach(p,function(s,r){if(s!==q[r]){n=true;return false;}});if(n){return n;}if(l>0){if(this.cachedFiltertypeIndex!==this.filterType.selectedIndex){return true;}if(o.isLayerChanged){return true;}if(o.clearAll!==undefined){return true;}}return false;}return true;},goToPage:function Q(l){var n=this.vis.model,o=l.layoutKey,p=l.panelKey;n.raiseEvent({name:"layoutSelected",panelKey:p,layoutKey:o});},_tocNavWarn:mstrmojo.emptyFn,onTocPageChange:function(o){var n,l;if(this._super){this._super(o);}if(this.visible){if(this.srcPanelKey===this.currentPanelKey){n=this.vis.model.getVizContentPanel().children;if(n){l=U.find(n,"k",this.vis.k);if(l!==-1){this.vis=n[l];}}else{return ;}}this.setNavIcon();if(!this.isTocNav){this.setNavIcon(true,true);}this.isOnTocChange=true;D.call(this);}},open:function K(){var l=this.vis;this.shouldNavigate=false;W.call(this);M.call(this);if(l.setSelectTargetsState){l.setSelectTargetsState(false);}},close:function X(){var n=this.vis;mstrApp.rootCtrl.view.closeInlineDialog();F.call(this);this.targetContainer.addAndRemoveKeys(this.targetContainer.getTargetChildren());var l=mstrmojo.vi.VisualInsightApp.APP_STATES;mstrApp.set("appState",mstrApp.isAppStatePause()?l.PAUSE:l.DEFAULT);k=null;if(n.setSelectTargetsState){n.setSelectTargetsState(true);}},cancel:function P(){var l=this.vis.model,o=l.getLayoutKeyByUnitKey(this.vis.k);var n=mstrmojo.vi.VisualInsightApp.APP_STATES;mstrApp.set("appState",mstrApp.isAppStatePause()?(n.PAUSE|n.SELECTOR_TARGETING):n.SELECTOR_TARGETING);l.raiseEvent({name:"layoutSelected",panelKey:this.srcPanelKey,layoutKey:o});},onwidthChange:function(){if(this.editorNode){this.editorNode.style.width=this.width;}},updateViz:function N(l){this.vis=l;this.srcPanelKey=this.vis.parent.k;this.targetSelector.set("srcId",this.vis.id);this.shouldNavigate=true;D.call(this);this.shouldNavigate=false;},toggleFields:function g(){var n=this.filterType,l=this.cgbs;if(l.length!==0){this.forType.set("visible",true);}if(this.sc){e.call(this,true);}if(this.srcPanelKey===(this.currentPanelKey||this.vis.model.getVizContentPanel().k)&&(b.keyarray(this.targetKeys).length>0||l.length!==0)){n.set("enabled",true);}else{n.set("enabled",false);n.set("selectedIndex",0);}},_createTruncatedList:function H(){var l=this;return{scriptClass:"mstrmojo.vi.ui.TruncatedList",alias:"targetContainer",cssDisplay:"inline-block",items:[{alias:"defaultItem",cls:"tgtDefault",n:mstrmojo.desc(15090,"Please click on visualizations to select targets"),key:"-1"}],padding:12,overflowCls:"truncMore",cmCssClass:"mstrmojo-bar-overflow",setWidth:function n(){var r=this.parent,p=this.id,s,t=this.padding,q=parseInt(r.width,10);if(!this.width&&J.position(r.buttonNode).w){U.forEach(r.children,function(u){s=u.domNode;if(s&&u.id!==p){q-=Math.ceil(J.position(s).w+(u.scriptClass==="mstrmojo.ui.Pulldown"||u.alias==="ctrlOverlay"?0:t));}});if(J.isMac()&&(J.isSafari||mstrApp.isWorkstation)){q-=t;}this.width=q+"px";}this.domNode.style.width=this.width;},getAdditionalProperties:function o(q,p){if(p===0&&this.items.length>2){q.addCls("hide");}return q;},updateFields:function(){var q,p=l.filterType&&l.filterType.isFilter;l.numBoxesChecked=this.items.length-1;q=l.numBoxesChecked>0;l.forType.set("enabled",q&&p);e.call(l,q&&p);},getTargetChildren:function(){return this.items.slice(1);},addAndRemoveKeys:function(s,q){var p,t=false,r=this.items;if(q){t=true;U.forEach(s,function(u){if(!u.mp||u.mp===u.k){r.push({n:u.t,cls:"tgtItem",cssClass:"tgtItem",key:u.k});}});}else{U.forEach(s,function(u){p=u?U.find(r,"key",u.k||u.key):-1;if(p>-1){t=true;r.splice(p,1);}});}if(t){this.refresh();this.updateFields();l.setNavIcon(r.length!==1);}}};},_addVis:function Y(n,o){var w=this,l=w.vis,p=n.boxContent,x=p.isVisMap,t=w.cgbs||[],u=w.an,z,s,r,q;if(u){z=mstrmojo.array.find(u,"k",n.k)!==-1;}else{if(t.length>0){if(t[0]&&t[0].sc&&t[0].sc.tks){z=t[0].sc.tks.indexOf(n.k)>-1;}}}w.numBoxesChecked+=z?1:0;if(n!==l&&w.validT(n.defn)){var y=n.defn.t===h.SELECTOR;if(!y){s=p.getFilterType();r=p.model.getSelectorControlMapInfo();}if(x){q=p.getAllLayerKeys(true);U.forEach(q,function(AA){o[AA]={c:false,v:z,ft:s,cgbs:r,t:n.title,k:AA,mp:n.k};});}else{o[n.k]={c:false,v:z,ft:s,cgbs:r,t:n.title,k:n.k};}}},_addChildren:function L(){var AA=this,o=AA.vis,x=o.model,q={scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-filter-type",cssDisplay:"inline-block",alias:"filterType",selectedIndex:AA.filterType?AA.filterType.selectedIndex:this.cachedFiltertypeIndex,isHostedWithin:true,isFilter:true,enabled:false,items:[{n:mstrmojo.desc(8689,"Filter"),v:true},{n:mstrmojo.desc(11953,"Highlight"),v:false}],onitemSelected:function(AD){this.isFilter=AD.v;e.call(AA,AA.numBoxesChecked>0&&this.isFilter);AA.forType.set("enabled",this.isFilter);if(this.enabled){S(x);}},onenabledChange:function(){j.toggleClass(this.domNode,"disabled",!this.enabled);}},r=[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:mstrmojo.desc(15031,"Use visualization <span>#</span> to").replace("#",o.title),visible:true},q,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-type-label",cssDisplay:"inline-block",text:mstrmojo.desc(15032,"data on selection in"),visible:true},AA._createTruncatedList(),{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-for-type",cssDisplay:"inline-block",alias:"forType",value:0,visible:false,selectedIndex:0,isHostedWithin:true,enabled:false,items:[{n:mstrmojo.desc(11955,"for #").replace("#",(this.cgbs[0]||{}).n),v:false},{n:mstrmojo.desc(11956,"for All Data"),v:true}],onitemSelected:function(AD){AA.changes.forAllData=AD.v;},onenabledChange:function(){j.toggleClass(this.domNode,"disabled",!this.enabled);}},AA._createOptionsButton()],l=x.getPanel(this.currentPanelKey,this.currentLayoutKey).children||[],w,t={};for(w=l.length-1;w>=0;w--){AA._addVis(l[w],t);}var s=o.boxContent,AB=s&&s.mapViewer&&s.isVisMap;if(AB){var u=o.title,AC="Use % of <span>#</span> to % the following targets:",y=mstrmojo.desc(15162,AC),n=y.split("%")||[],p,z=U.map(s.getGraphicLayerNameArr(),function(AD){return{n:AD.n,v:AD.k};});if(n.length!==3){n=AC.split("%");}p=[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:n[0].replace("#",u),visible:true},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"",cssDisplay:"inline-block",alias:"sourceLayer",selectedIndex:U.find(z,"v",s.getKeyForTemplateSelection()),isHostedWithin:true,enabled:true,items:z,onitemSelected:function(AE){var AD=AA.changes;AD.layerKey=AE.v;AD.isLayerChanged=AE.v!==s.getKeyForTemplateSelection();S(x);}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:n[1].replace("#",u),visible:true},q,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:n[2].replace("#",u),visible:true}];r.splice(0,3);r=p.concat(r);}this.addChildren(r);this.targetKeys=t;this.csl=this.options.optionEditor.clrSel;},preBuildRendering:function C(){var p=this,q=p.vis,l=q.model,r,o,n,s;V.call(this,q);r=this.sc;o=this.an;if(this.shouldNavigate&&o&&o.length){n=l.getLayoutKeyByUnitKey(o[0].k);s=r&&r.isNavigation&&r.navPage;if(s&&s!==this.currentPanelKey){this.shouldNavigate=false;l.raiseEvent({name:"layoutSelected",panelKey:s,layoutKey:n});}}this._addChildren();this.addChildren([{scriptClass:"mstrmojo.Box",cssClass:"ctrlOverlay",alias:"ctrlOverlay",slot:"buttonNode"}]);this.toggleFields();this._super();},postBuildRendering:function f(){var l=this.targetContainer,n=this.sc;this.editorNode.style.width=this.width;this._super();this.changes={};if(k!==(n?n.showall:true)){this.changes.clearAll=k;S(this.vis.model);}W.call(this);if(l&&!l.width){l.setWidth();}if(this.options){this.options.openDialog();}},showControlOverlay:function G(o,n){var p=this.ctrlOverlay,r=p.domNode;function q(s){var t=s.children;if(t&&t.length){s.removeChildren();t.forEach(function(u){u.destroy();});}}if(r){var l=["ctrlOverlay","or-h"];if(n){l.push(n);}r.className=l.join(" ");}p.set("visible",true);q(p);p.addChildren(o);j.addClass(this.domNode,"overlay");}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui._MonitorsTocPage","mstrmojo.vi.ui.LinkTargetSelector","mstrmojo.vi.ui.InlineDialogBase");mstrmojo.vi.ui.VisAsFilterInlineDialog=mstrmojo.declare(mstrmojo.vi.ui.InlineDialogBase,[mstrmojo.vi.ui._MonitorsTocPage],{scriptClass:"mstrmojo.vi.ui.VisAsFilterInlineDialog",_createTargetSelector:function C(){return new mstrmojo.vi.ui.LinkTargetSelector({alias:"targetSelector",orientation:"h",hostId:this.id,srcId:this.vis.id});},_setTargetsFunc:function B(){var E=this.vis,D=E.model;D.setVisAsFilter(E,this.changes);},_tocNavWarn:function A(D){var F=this,E=F.vis.model;mstrmojo.warn(mstrmojo.desc(15094,"Selecting targets on another page will discard all the selected targets on the current page."),{confirmBtn:{t:mstrmojo.desc(212,"Continue"),fn:function(){var G=E.getVizContentPanel()._tgtSelections;G&&G.clear();F.goToPage(D);},hot:true},cancelBtn:{t:mstrmojo.desc(221,"Cancel")}},{title:mstrmojo.desc(15093,"Do you want to target visualizations on another page?")});}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBar","mstrmojo.ui.menus._HasMenuPopup");function E(H,F){var G=this.domPopupPH;G.style.top=H.y+"px";G.style.left=H.x+"px";G.innerHTML="";document.body.appendChild(G);F.hostId=this.id;F.hostElement=G;mstrmojo.css.toggleClass(G,mstrApp.getThemeClassName(),true);this.openPopup(F.newInstance());}function B(){var G=this.domPopupPH,H=G.firstChild,F=G.parentNode;if(H){G.removeChild(H);}if(F){F.removeChild(G);}}function A(G){var F;if(typeof this.parent.boxContent.getTitleRMCPopup==="function"){F=this.parent.boxContent.getTitleRMCPopup.call(this);}if(F){E.call(this,G,F);}}mstrmojo.vi.ui.TitleBarWithRMCPopup=mstrmojo.declare(mstrmojo.vi.ui.TitleBar,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.TitleBarWithRMCPopup",markupString:'<div id="{@id}" class="mstrmojo-VITitleBar {@cssClass}" style="{@cssText}" mstrAttach:contextmenu, click><div class="left-toolbar"></div><div class="title-text"></div><div class="right-toolbar"></div></div>',init:function D(F){this._super(F);var G=document.createElement("div");G.setAttribute("class","gm-menu-placeholder");this.domPopupPH=G;},oncontextmenu:function C(F){A.call(this,{x:F.e.pageX+2,y:F.e.pageY+2});},unrender:function(){this._super();B.call(this);},onclick:function(){B.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.AdvancedColorPickerPopup","mstrmojo.Label","mstrmojo.HBox","mstrmojo.array","mstrmojo.ui.Checkbox");function A(G,H){var E=new mstrmojo.Label({text:G}),F=[H,E];mstrmojo.array.forEach(F,function(I){I.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",children:F};}function C(){var F=this,G=F.parent.sourceColor;var E=new mstrmojo.ui.Checkbox({cssDisplay:"inline-block",checked:F.isChecked,oncheckedChange:function(){var H=this.checked;if(H){F.set("color",G);F.colorChanged(G);}}});F.addChildren([A(F.parent.checkboxLabel,E)]);}mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker=mstrmojo.declare(mstrmojo.ui.editors.controls.AdvancedColorPickerPopup,null,{scriptClass:"mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker",isChecked:false,init:function D(E){this._super(E);if(this.parent.sourceColor===this.parent.selectedValue){this.isChecked=true;}},renderContent:function B(){this._super();if(this.parent.checkboxLabel){C.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.desc","mstrmojo.vi.ui.NumberFormatter");var B=mstrmojo.desc;mstrmojo.vi.ui.NumberFormatterEditor=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatterEditor",onSubmenuOpen:function A(){},myData:null,oldData:null,formatValue:null,onOK:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",bindings:{myData:"this.parent.myData",oldData:"this.parent.oldData",formatValue:"this.parent.formatValue"}},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-subtotals-button",children:[{scriptClass:"mstrmojo.Button",text:B(221,"Cancel"),onclick:function(){this.parent.parent.onSubmenuClosed();}},{scriptClass:"mstrmojo.Button",text:B(1442,"OK"),onclick:function(){var C=this.parent.parent,D=C.xtab;C.onSubmenuClosed();this.parent.parent.onOk();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo.fe.RelationNode","mstrmojo.fe.RelationFilterExprTree","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumNodeDimty","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.Label","mstrmojo.vi.ui.toolbars.TitleToolbar","mstrmojo.vi.ui.toolbars._HasToolbar");mstrmojo.requiresDescs(2790,5895,5896,7931,12036,12037,15121,15122);var F=mstrmojo.hash,A=mstrmojo.array,G=mstrmojo.mstr.EnumDSSXMLObjectTypes,H=mstrmojo.mstr.EnumNodeDimty,C=mstrmojo.css,E=mstrmojo.string,D=function(P){var Q=P.data,O=Q.dmy&&Q.dmy.uts||[],L=O.length,K=[],N,M;for(N=0;N<L;N++){K.push(E.encodeHtmlString(O[N].n));}M=K.join(", ");return'<span class="mstrmojo-text" title="'+M+'">'+M+"</span>";};var I=function(){var M=mstrmojo.desc(2790,"Set of ##"),L=M.split("##")[0];var K=L.length;if(K>0&&L[K-1]===" "){L+="&nbsp;";}return L;};mstrmojo.vi.ui.editors.fe.RelationNode=mstrmojo.declare(mstrmojo.fe.RelationNode,[mstrmojo.vi.ui.toolbars._HasToolbar],{scriptClass:"mstrmojo.vi.ui.editors.fe.RelationNode",markupString:'<div id="{@id}" class="mstrmojo-relation {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-relation-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-relation-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-relationNode"><div class="mstrmojo-relationNode-inf"><div class="mstrmojo-relation-prefix-text">'+I()+'</div><div class="mstrmojo-textset"  mstrAttach:click></div><div class="mstrmojo-relation-prefix-text">'+(mstrmojo.desc(2790,"Set of ##").split("##")[1]||"")+'</div><div class="mstrmojo-relation-postfix-text">'+mstrmojo.desc(15121,"filtered by")+'</div><div class="mstrmojo-relation-related-by-box"></div><div class="mstrmojo-relation-toolbar"></div><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></div><div class="mstrmojo-relation-childTreeNode" style="position:relative;"></div></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},relationNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},relatedByBoxNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[4];},toolbarNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[5];},containerNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{onprefixedAndOrEditableChange:function(){C.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){C.toggleClass(this.relationNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=D(this);}},children:[{scriptClass:"mstrmojo.fe.RelationFilterExprTree",alias:"childTree",ignoreLayout:true,dropZone:false,draggable:false,nodeClassMap:{14:mstrmojo.fe.AndOrNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},onNew:function(K){this.parent.tree.onNew(K);},getItemConfig:function(N,K,O){var L=mstrmojo.fe.RelationFilterExprTree.prototype.getItemConfig.call(this,N,K,O),M=O.tree||O;return F.copy({tree:M,rootTree:this.parent.tree,noRelation:true,inRelation:true,onremove:function(){if(this.rootTree&&this.rootTree.onremove){this.rootTree.onremove();}},onadd:function(){if(this.rootTree&&this.rootTree.onadd){this.rootTree.onadd();}}},L);},prenodeclick:function(K){if(!K||!K.part){return ;}var L=this.rootTree;if(L&&L.onnodeclick&&this.editable){K.editor=L.editor;L.onnodeclick.call(this,K);}}},{scriptClass:"mstrmojo.Box",alias:"relBox",slot:"relatedByBoxNode",cssClass:"RelatedBy-Box",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12036,"Related by"),cssClass:"Label",cssDisplay:"inline-block"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"relPd",cssClass:"Pulldown",cssDisplay:"inline-block",isHostedWithin:false,allowHTML:false,onitemSelected:function B(O){var N=this.parent.parent,L=N.data,K=null;if(this.selectedIndex>0){K={n:O.n,did:O.did,t:O.t||G.Metric,st:O.st||1024};}L.dmt=H.NodeDimtyOutputLevel;L.dmy=L.dmy||{};var M=L.relation=L.relation||{};if(K){M.guide=K;L.useSchema=false;}else{delete M.guide;delete M.rsTp;delete M.joTp;delete M.paTp;delete M.erTp;L.useSchema=true;}N.set("data",L);}}]},{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",slot:"toolbarNode",alias:"toolbar",visible:true,hasContextMenuButton:true,cssClass:"relation-toolbar",cssDisplay:"inline-block"}],_set_data:function(N,S){var O=this._super(N,S);var L=this.data,P=!L.m,K=this.relBox.relPd,Q=A.filter(this.tree.editor.targetMetrics,function(V){return !V.um;}),U=[{n:mstrmojo.desc(12037,"System Default"),t:-1,did:"default"}].concat(Q);this.relBox.set("visible",P);if(P){var R=0;if(L.relation&&L.relation.guide){var M=L.relation.guide;R=A.find(U,"did",M.did);}if(R!==K.selectedIndex){K.set("items",U);K.set("selectedIndex",R>=0?R:0);}}return O;},updateToolbar:function J(K){var L=this;if(this._super){K=this._super(K);}K.addMenuItem(mstrmojo.desc(15122,"Convert to Condition"),"convert",function(){L.parent.removeSet(L);});K.isHostedWithin=false;return K;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker");mstrmojo.ui.editors.controls.MarkerColorPickerButton=mstrmojo.declare(mstrmojo.ui.editors.controls.ColorPickerButton,null,{scriptClass:"mstrmojo.ui.editors.controls.MarkerColorPickerButton",sourceColor:null,checkboxLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.AdvancedMarkerColorPicker",alias:"colorPicker",slot:"widgetHostNode",color:this.selectedValue,colorChanged:function(A){this.parent.set("selectedValue",A);this.close();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.hash","mstrmojo.array","mstrmojo.ValidationTextBox","mstrmojo.expr");var K=mstrmojo.emptyFn,B=mstrmojo.hash,H=mstrmojo.array,I=mstrmojo.expr.DTP,F={FILL_COLOR:"Clr",FILL_TRANSPARENT:"FillTrans"},C=1,J=2;function N(U,Q,P,S,R){return{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"fillColor",slot:U,showNoFill:S!==false,showAutomatic:!!R,showGradient:false,selectedValue:"#000000",isHostedWithin:Q||false,postselectedValueChange:function(V){if(this.propName&&this.parent&&this.parent.parent){this.parent.parent.raiseFormatValueChange(this.propName,V.value,V.valueWas);}},postclick:function(V){this.parent.parent.postclick(V);}};}function O(Q){return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillAlpha",slot:Q,col1Width:"100%",col2Width:"10px",children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",slot:"col1Node",value:"100",cssText:"text-align:right",dtp:I.INTEGER,required:true,constraints:{min:0,max:100},onvalueChange:function(R){this.valueWas=R.valueWas;},onValid:function P(){if(this.propName&&this.value!==this.valueWas){this.parent.parent.parent.raiseFormatValueChange(this.propName,this.value,this.valueWas);}},postclick:function(R){this.parent.parent.parent.postclick(R);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:"%"}]};}mstrmojo.ui.editors.controls.FillConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.FillConfigGroup",propNames:undefined,postclick:K,visibleControls:C+J,fillColorAndTrans:undefined,init:function M(U){this._super(U);var Q=[],X="col1Node",R=U&&U.colorPickerHostWithin,P=U&&U.showGradient,W=U&&U.showNoFill,S=U&&U.showAutomaticInColor,V;if((this.visibleControls&C)>0){Q.push(N(X,R,P,W,S));X="col2Node";}if((this.visibleControls&J)>0){Q.push(O(X));}if(Q.length===1){V={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}this.addChildren([B.copy(V,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillColorAndTrans",children:Q})]);},getChildComp:function L(P){if(P.indexOf(F.FILL_COLOR)!==-1){return this.fillColorAndTrans.fillColor;}if(P.indexOf(F.FILL_TRANSPARENT)!==-1){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;},iniChildrenComp:function E(P){this.propNames=P;H.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);},setChildValue:function D(Q,R){var P=this.getChildComp(Q);if(P===undefined){return false;}switch(P.alias){case"fillColor":if(R!==P.selectedValue){P.set("selectedValue",R==="undefined"?"conflict":R);}break;case"fillAlphaText":if(R!==P.value){P.set("value",R==="undefined"?"":R);}break;}},setChildEnable:function G(R,Q){var P=this.getChildComp(R);if(P!==undefined){P.set("enabled",Q);}},setChildrenValue:function A(P){var Q=this;P.forEach(function(R){Q.setChildValue(R[0],R[1]);});}});mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS={FILL_COLOR:C,FILL_TRANSPARENCY:J};mstrmojo.ui.editors.controls.FillConfigGroup.FillCompName=F;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton");var L=mstrmojo.emptyFn,I=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.gm.EnumCombinedLineStyle;var J={LINE_COLOR:"Clr",LINE_STYLE:"Style"},A={"1pt solid":E.THIN,"2pt solid":E.THICK,"1pt dashed":E.DASHED,"1pt dotted":E.DOTTED,none:E.NONE};function D(P,O){return C.copy(O,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"lineColor",slot:P,selectedValue:"#000000",postselectedValueChange:function(Q){if(this.propName){this.parent.parent.raiseFormatValueChange(this.propName,Q.value,Q.valueWas);}},postclick:function(Q){this.parent.parent.postclick(Q);}});}function K(P){return{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:true,showNoneOption:true,hideDashOptions:false,defaultSelectedIndex:3,propName:undefined,alias:"lineStyle",slot:P,postInit:function O(){var Q=["mstrmojo-ui-LineStyle"];if(!this.showNoneOption){Q.push("no-none");}if(this.hideDashOptions){Q.push("no-dash");}mstrmojo.css.addWidgetCssClass(this,Q);(this.list.items||[]).forEach(function(R){R.v=(A[R.id]!==undefined?A[R.id]:A["not defined"]);});},onshowNoneOptionChange:function(Q){var R=["no-none"];if(!Q.value){mstrmojo.css.addWidgetCssClass(this,R);}else{mstrmojo.css.removeWidgetCssClass(this,R);}var S=this.hasRendered;if(S){this.refresh();}},postselectedValueChange:function(R){this._super();var Q=I.find(this.list.items,"id",R.value);if(Q===-1){Q=this.defaultSelectedIndex;}var S=this.list.items[Q].v;if(this.propName){this.parent.parent.setChildEnable(J.LINE_COLOR,S!==A.none);this.parent.parent.raiseFormatValueChange(this.propName,S,A[R.valueWas]);}},postclick:function(Q){this.parent.parent.postclick(Q);}};}mstrmojo.ui.editors.controls.LineConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.LineConfigGroup",propNames:undefined,postclick:L,hideColorControl:false,showGradient:false,showNoFillInColor:true,showAutomaticInColor:false,showNoneOption:true,lineColorAndStyle:undefined,lineTitle:undefined,init:function N(Q){this._super(Q);var O=[],R;O.push(K("col1Node"));if(!this.hideColorControl){O.push(D("col2Node",{showGradient:this.showGradient,showNoFill:this.showNoFillInColor,showAutomatic:this.showAutomaticInColor}));}else{R={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}var P=[];if(this.lineTitle&&this.lineTitle!==""){P.push(new mstrmojo.Label({text:this.lineTitle}));}P.push(C.copy(R,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"lineColorAndStyle",children:O}));this.addChildren(P);},getChildComp:function M(O){if(O.indexOf(J.LINE_COLOR)!==-1){return this.lineColorAndStyle.lineColor;}if(O.indexOf(J.LINE_STYLE)!==-1){return this.lineColorAndStyle.lineStyle;}return null;},iniChildrenComp:function G(P){I.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);var O=this.lineColorAndStyle.lineStyle;O.showNoneOption=this.showNoneOption;O.hideDashOptions=this.hideDashOptions;O.postInit();},onshowNoneOptionChange:function(O){this.lineColorAndStyle.lineStyle.set("showNoneOption",O.value);},setChildValue:function F(Q,R){var O=this.getChildComp(Q);if(O===undefined){return false;}var P;switch(O.alias){case"lineColor":if(R!==O.selectedValue){O.set("selectedValue",typeof R==="undefined"?"conflict":R);}break;case"lineStyle":if(typeof R==="undefined"){O.list.clearSelect();this.syncControls(function(){O.set("selectedValue","conflict");});}else{P=I.find(O.list.items,"v",R);if(P===-1){P=O.defaultSelectedIndex;}var S=O.list.items[P].id;if(S!==O.selectedValue){O.set("selectedValue",S);}}break;}},setChildEnable:function H(Q,P){var O=this.getChildComp(Q);if(O!==undefined){O.set("enabled",P);}},setChildrenValue:function B(O){O.forEach(function(P){this.setChildValue(P[0],P[1]);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.CollapsibleTitleBar","mstrmojo.ui.menus.ToolbarConfig","mstrmojo.ui.menus.Menu","mstrmojo.dom","mstrmojo.css");var F=mstrmojo.css,C="visible",G="containerNode";function E(Q){Q.btn.style.display=!!Q.menuCfg?"block":"none";}mstrmojo.vi.ui._IsPanel=mstrmojo.provide("mstrmojo.vi.ui._IsPanel",{_mixinName:"mstrmojo.vi.ui._IsPanel",markupString:'<div id="{@id}" class="mstrmojo-VIPanel {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="mstrmojo-VIPanel-titlebar"></div><div class="mstrmojo-VIPanel-content"></div><div class="mstrmojo-VIDND-mask"></div><div class="mstrmojo-VIPanel-handle splitter v"></div></div>',markupSlots:{titlebarNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.childNodes[1];},maskNode:function(){return this.domNode.childNodes[2];},handleNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onisCollapsedChange:function L(){if(this.canCollapse){this.containerNode.style.display=this.isCollapsed?"none":"block";if(!this.isCollapsed){this.doLayout();}}}},title:"",titleBar:null,titlebarNode:null,containerNode:null,maskNode:null,handleNode:null,bubbleMouseOver:true,canCollapse:false,isCollapsed:false,autoHideToolbar:false,init:function K(Q){this._super(Q);this.addChildren([this.getTitleBarCfg()]);this.menuBtnInfo={};},skipsSlotLayout:function(Q){return Q===G&&this.isCollapsed;},getTitleBarCfg:function P(){return{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",slot:"titlebarNode",alias:"titleBar",isCollapsed:this.isCollapsed,title:this.title,close:function(){this.parent.setOpenStatus(false);mstrApp.rootCtrl.generateToolbar();},collapse:function(Q){this.parent.set("isCollapsed",Q);}};},ontitleChange:function H(){this.titleBar.set("title",this.title);},_set_children:function A(U,R,Q){if(R!==this.children){var S=this.titleBar;if(S){R.push(S);}}return this._super(U,R,Q);},preBuildRendering:function I(){this.generateToolbar();this.titleBar.setToolbarVisibility(!this.autoHideToolbar);return this._super();},generateToolbar:function B(){var Q=this.titleBar;Q.set("toolbarCfg",this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));if(!Q.visible){this.menuBtnInfo.menuCfg=Q.getMenuConfig();}},updateToolbar:function O(Q){return Q;},setOpenStatus:function N(Q){if(this.visible!==Q){this.set("visible",Q);this.parent.doLayout();}},setTitleBarVisibility:function D(Q){var S=this.titleBar;S.set("visible",Q);this.generateToolbar();var U=this.menuBtnInfo,R=U.btn;if(!R){R=U.btn=document.createElement("div");R.className="hover-menu-btn";var V=this.id;mstrmojo.dom.attachEvent(R,"click",function(){var X=mstrmojo.all[V],W=U.menuCfg;W.hostId=V;W.hostElement=R;X.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:W}));});this.domNode.appendChild(R);}U.menuCfg=Q?null:S.getMenuConfig();E(U);this.doLayout();},onmouseover:function M(Q){if(!mstrApp.isInteractive()){return ;}if(!this.bubbleMouseOver){Q.cancel();}var S=this._panelTimeout;if(S){window.clearTimeout(S);delete this._panelTimeout;}if(this.autoHideToolbar){this.titleBar.setToolbarVisibility(true);}var R=this.menuBtnInfo;if(!!R.menuCfg){F.addClass(R.btn,C);}},onmouseout:function J(){var Q=this.id;this._panelTimeout=window.setTimeout(function(){var R=mstrmojo.all[Q];if(R){if(R.autoHideToolbar){R.titleBar.setToolbarVisibility(false);}var S=R.menuBtnInfo;if(!!S.menuCfg){F.removeClass(S.btn,C);}}},200);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBarWithRMCPopup","mstrmojo.vi.ui._IsUnitContainerTitleBar","mstrmojo.vi.ui.toolbars.TitleToolbar");function C(F,D,E){return[{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",slot:F+"ToolNode",alias:D,visible:true,useRichTooltip:E}];}mstrmojo.vi.ui.VizBoxTitleBar=mstrmojo.declare(mstrmojo.vi.ui.TitleBarWithRMCPopup,[mstrmojo.vi.ui._IsUnitContainerTitleBar],{scriptClass:"mstrmojo.vi.ui.VizBoxTitleBar",leftToolbar:undefined,getLeftToolbarChildren:function A(){return C("left","leftToolbar",false);},getRightToolbarChildren:function B(){return C("right","tbToolbar",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.array","mstrmojo.hash","mstrmojo.color","mstrmojo._HasLayout","mstrmojo.vi.ui._IsPanel","mstrmojo._HasPopup","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._HasTargets","mstrmojo.vi.ui._IsBoxLayoutChild","mstrmojo.vi.ui._IsDropTarget","mstrmojo.vi._MonitorsAppState","mstrmojo.vi._MonitorsLayoutMode","mstrmojo._Formattable","mstrmojo.vi.ui._IsUnitContainerTitleBar","mstrmojo.DynamicClassFactory","mstrmojo.Box","mstrmojo.css","mstrmojo.dom","mstrmojo.func","mstrmojo.models.FormatModel","mstrmojo.DocDataService","mstrmojo.vi.ui.TitleBar","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.vi.ui.rw._HasVisFilterIndicator","mstrmojo.EnumRWUnitType","mstrmojo.vi.ui._CanGroup","mstrmojo.EnumRWUnitType");mstrmojo.requiresDescs(629,1388,11477,11478);var W=mstrmojo.array,A3=mstrmojo.css,AQ=mstrmojo.dom,Z=mstrmojo.hash,AH=mstrmojo.color,A9=mstrmojo.vi.models.EnumDragSources,n=mstrmojo.models.FormatModel,g=n.ENUM_PROPERTY_NAMES,Ak=1,AM="visible",k="mouse-left",A1="no-menu",AX="ctrlOverlay",q="or-v",H="or-h";var An={SHORT:"ghost-short",TALL:"ghost-tall",GRANDE:"ghost-grande",VENTI:"ghost-venti",HIDE_TITLE:"ghost-hide-title",HIDE_DESC:"ghost-hide-desc"};var b={BLACK:"ghost-black",WHITE:"ghost-white",GREY:"ghost-grey"};var D=Z.valarray(An);var c=Z.valarray(b);var U=D.concat(c);var j={W_LV1:{H_LV1:[An.VENTI],H_LV2:[An.GRANDE],H_LV3:[An.TALL],H_LV4:[An.TALL,An.HIDE_TITLE],H_LV5:[An.SHORT,An.HIDE_TITLE],H_LV6:[An.SHORT,An.HIDE_TITLE,An.HIDE_DESC]},W_LV2:{H_LV1:[An.GRANDE],H_LV2:[An.GRANDE],H_LV3:[An.TALL],H_LV4:[An.TALL,An.HIDE_TITLE],H_LV5:[An.SHORT,An.HIDE_TITLE],H_LV6:[An.SHORT,An.HIDE_TITLE,An.HIDE_DESC]},W_LV3:{H_LV1:[An.TALL],H_LV2:[An.TALL],H_LV3:[An.TALL],H_LV4:[An.TALL,An.HIDE_TITLE],H_LV5:[An.SHORT,An.HIDE_TITLE],H_LV6:[An.SHORT,An.HIDE_TITLE,An.HIDE_DESC]},W_LV4:{H_LV1:[An.SHORT],H_LV2:[An.SHORT],H_LV3:[An.SHORT],H_LV4:[An.SHORT,An.HIDE_TITLE],H_LV5:[An.SHORT,An.HIDE_TITLE],H_LV6:[An.SHORT,An.HIDE_TITLE,An.HIDE_DESC]},W_LV5:{H_LV1:[An.SHORT],H_LV2:[An.SHORT],H_LV3:[An.SHORT],H_LV4:[An.SHORT,An.HIDE_TITLE],H_LV5:[An.SHORT,An.HIDE_TITLE,An.HIDE_DESC],H_LV6:[An.SHORT,An.HIDE_TITLE,An.HIDE_DESC]}};function Ag(BD){var BG=BD?BD.c1||BD:"",BF=AH.getLuminance(BG),BC=255,BH=68.7914,BE=Math.max(BC/BF,BF/BC),BI=Math.max(BH/BF,BF/BH);if(BE>=BI){return b.WHITE;}if(BF<190){return b.BLACK;}return b.GREY;}function A2(BG,BD){var BI,BH,BF;if(BG>=1024){BI="W_LV1";}else{if(BG>=640){BI="W_LV2";}else{if(BG>=320){BI="W_LV3";}else{if(BG>=100){BI="W_LV4";}else{BI="W_LV5";}}}}if(BD>=1024){BH="H_LV1";}else{if(BD>=640){BH="H_LV2";}else{if(BD>=320){BH="H_LV3";}else{if(BD>=200){BH="H_LV4";}else{if(BD>=100){BH="H_LV5";}else{BH="H_LV6";}}}}}BF=j[BI][BH];if(this.getFormats){var BC=this.getFormats(),BE=BC&&BC["background-color"];BF=BF.concat(Ag(BE));}return BF;}mstrmojo.vi.ui.rw.UnitContainerTitleBar=mstrmojo.DynamicClassFactory.newComponent(mstrmojo.vi.ui.TitleBar,[mstrmojo.vi.ui._IsUnitContainerTitleBar],{scriptClass:"mstrmojo.vi.ui.rw.UnitContainerTitleBar"});var Aq={n:mstrmojo.desc(11477,"Hide Titlebar"),cls:"htb",fn:function(){this.toggleTitleBar(false);},dsbld:false};var A5={n:mstrmojo.desc(11478,"Show Titlebar"),cls:"stb",fn:function(){this.toggleTitleBar(true);},dsbld:false};function R(BD,BC,BE){var BF=mstrApp.isAppStatePresentation(),BG=this.domNode;A3.toggleClass(this.domNode,"pulse",BD&&!BF&&!BE);if(BC){setTimeout(function(){A3.toggleClass(BG,"pulse",false);},500);}}function Ay(BD,BC){return mstrmojo.all[BD].getPanel().getUnitByKey(BC);}function t(){var BE=this.menuBtnInfo,BG=BE&&BE.menuCfg,BD=BG&&BG.menus,BF=(BD&&BD.length>0),BC=BE&&BE.btn;if(BC){BC.style.display=BF?"block":"none";}A3.toggleClass(this.domNode,A1,!BF);}function A6(BC,BE){var BD=this.getContextDragData(BC);return !!(BD&&(BD.src===BE));}function x(BC){return A6.call(this,BC,A9.FILTERS);}function AS(BC){return A6.call(this,BC,A9.DATASETS);}function AI(BC){return A6.call(this,BC,A9.ALL_OBJECT_LIST);}function Az(BC){var BD=BC.children;if(BD&&BD.length){BC.removeChildren();BD.forEach(function(BE){BE.destroy();});}}function O(){var BC=this.boxContent;if(BC&&BC.getFormats){return BC.getFormats();}return null;}function As(BC){if(BC.visible){if(BC.controls){this.showControlOverlay(BC.controls);}else{throw new Error('mstrmojo.vi.ui.rw.UnitContainer: "controls" should be provided when showing the control overlay');}}else{this.hideControlOverlay();}}function Aj(BG,BD){var BE=this.model.controller,BF="propertiesPanel",BC=function(){var BI=this.getFormatMenuItemTarget(BG);var BK=this.getEditorModel();if(BK.selectTargetByValue){BK.selectTargetByValue(BI);}if(BD){BD(BI);}var BH=BE.getViPanel(BF),BJ=BH&&BH.parent;if(BJ&&BJ.highlightSelected){BJ.highlightSelected();}}.bind(this);if(BE.getViPanel(BF)){BE.selectViPanel(BF);BC();}else{BE.openViPanel(BF,{success:BC});}}function K(BE,BC){var BD=BE?"titlebarNode":"domNode";this.clearCache();this.clearSlotBackgroundCSS(BD);this.applyCSSFormatToNode(BD,BC);}mstrmojo.vi.ui.rw.UnitContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._HasPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsBoxLayoutChild,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState,mstrmojo.vi._MonitorsLayoutMode,mstrmojo.vi.ui._HasTargets,mstrmojo.vi.ui.rw._HasVisFilterIndicator,mstrmojo.vi.ui._CanGroup],{scriptClass:"mstrmojo.vi.ui.rw.UnitContainer",markupString:'<div id="{@id}" class="mstrmojo-UnitContainer {@cssClass}" style="{@cssText} {@domNodeCssText}" mstrAttach:mouseenter,mouseleave,mouseover,mouseout,mousemove,click,contextmenu><div class="mstrmojo-UnitContainer-titlebar" style="{@titlebarNodeCssText}"></div><div class="mstrmojo-UnitContainer-content"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{titlebarNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.childNodes[1];},maskNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onzIndexChange:function(){this.domNode.style.zIndex=this.zIndex||Ak;},onenabledChange:function(){A3.toggleClass(this.domNode,"inactive",!this.enabled);},onorientationChange:function(){var BD=this.ctrlOverlay.domNode,BC=this.orientation;A3.toggleClass(BD,q,BC==="v");A3.toggleClass(BD,H,BC==="h");this.orientationHasChanged();},onghostImgCssChange:function(){var BD=this.ctrlOverlay.domNode,BC=this.ghostImgCss;A3.removeClass(BD,U);A3.addClass(BD,BC);}},layoutConfig:{h:{titlebarNode:"auto",containerNode:"100%"},w:{titlebarNode:"100%",containerNode:"100%"},xt:true},formatHandlers:{domNode:["B","BG"],titlebarNode:{src:"ttl",props:["F","BG","text-align"]}},updateOverlay:mstrmojo.emptyFn,getCacheKey:function AL(){return this._super()+"-vi-uc";},getPanelForAddAction:function Ap(){return"propertiesPanel";},getExcludedPanels:function A4(){return["editPanel"];},titleBarCss:"",orientation:"h",k:"",boxContent:null,parent:null,enabled:true,draggable:true,ctrlOverlay:null,model:null,title:"",titleBar:null,showTitleBar:false,bubbleMouseOver:true,dimensionsSet:false,getEditOverlayControls:mstrmojo.emptyFn,isNewUnitContainer:true,ghostImgCss:[],shouldShowCustomizeContextMenu:function(BC){var BD=BC.getTarget(),BE=BD&&BD.nodeName.toLowerCase();return BE&&!(BE==="textarea"||(BE==="input"&&BD.type.toLowerCase()==="text"));},switchToEditMode:function Av(){this.showControlOverlay(this.getEditOverlayControls());},init:function AW(BE){this._super(BE);var BH=this.id,BD=this.model,BG=this.boxContent,BC;BD.attachEventListener("viUnitSelected",BH,function(BI){this.toggleBoxSelection(BH===BI.id);});BD.attachEventListener("viIconTabClicked",BH,function(BJ){var BI=BD.hgl;if(BD.getSelectedViUnit()&&BJ.id!=="vi_flt"&&!BI){R.call(this,BH===BD.getSelectedViUnit().id,true,false);}});BD.attachEventListener("viVizEditorDrag",BH,function(BJ){var BI=BD.hgl;if(BD.getSelectedViUnit()&&BJ.id!=="vi_flt"&&!BI){R.call(this,BH===BD.getSelectedViUnit().id,false,!BJ.isIn);}});this.addChildren([this.getTitleBarCfg(),{scriptClass:"mstrmojo.Box",cssClass:AX,alias:"ctrlOverlay",slot:"containerNode",visible:false}],0);BC=this.titleBar;if(BC&&BC.tbToolbar){BC.tbToolbar.toolbarClicked=function(){BD.selectVIUnit(BH);};}this.menuBtnInfo={};this.showTitleBar=!!this.defn.httl;this.draggable=mstrApp.allowWebDashboardDesign();BG.attachEventListener("toggleCtrlOverlay",this.id,As);var BF=BG.edtModel;if(BF){BF.attachEventListener("BEMFormatChange",this.id,"updateGhostImgCss");}},getDocModel:function J(){return this.model;},getBoxBorderWidth:function Ao(){var BC=O.call(this),BD=BC&&BC.border;if(BD){var BE=[2,4];if(mstrApp.isSingleTier&&AQ.getOSInfo().name.toLowerCase().indexOf("mac")>=0||mstrApp.isExporting){BE=[2.66,5.34];}return BD.indexOf("2pt")>-1?BE[1]:BE[0];}return 0;},onFormat:function y(){var BC=this.boxContent;if(BC.execFormatHandler){BC.execFormatHandler();return ;}Aj.call(this);},showControlOverlay:function F(BE,BD){var BF=this.ctrlOverlay,BG=BF.domNode;if(BG){var BC=[AX];BC.push((this.orientation==="v")?q:H);BC=BC.concat(this.ghostImgCss);if(BD){BC.push(BD);}BG.className=BC.join(" ");}BF.set("visible",true);Az(BF);BF.addChildren(BE);},hideControlOverlay:function At(){var BC=this.ctrlOverlay;BC.set("visible",false);Az(BC);},editingTitleCallback:function G(BC){var BD=this.menuBtnInfo;A3.toggleClass(BD.btn,"editing-title",BC);},getTitleBarCfg:function AN(){return{scriptClass:"mstrmojo.vi.ui.rw.UnitContainerTitleBar",slot:"titlebarNode",alias:"titleBar",title:this.title,editTitleOnDoubleClick:mstrApp.allowWebDashboardDesign(),beganEditingTitlebar:function BE(){this.parent.editingTitleCallback(true);},titleEdited:function BC(){this.parent.editingTitleCallback(false);},close:function(){this.parent.deleteSelf();},getLayoutOffsets:function BD(){return{h:mstrApp.getThemeProps(mstrmojo.vi.enums.EnumThemeProperties.SUBTYPE.LAYOUT).ucTBLOHeight,w:0};}};},getDisplayName:function Ab(){return this.title;},updateDisplayName:function AJ(BF,BG,BC){var BD=this.model,BE=this.k;if(BC){BD.renameRWUnitTitle(BF,BG,BE,{success:function(BH){this.set("title",BH);}.bind(this),failure:function(BH){mstrmojo.err(BH);this.set("title",BG);}.bind(this)});}else{BD.renameRWUnit(BF,BG,BE,{success:function(){this.synchronizeEditors();}.bind(this)});}},ontitleChange:function BB(){this.titleBar.set("title",this.title);},oncontextmenu:function Ai(BC){if(mstrApp.isInVFInteractMode||(this.boxContent&&this.boxContent.isCustomSort)){AQ.preventDefault(window,BC.e);}else{if(this.shouldShowCustomizeContextMenu(BC)){var BD=this.addContextMenuItems(new mstrmojo.ui.menus.MenuConfig({position:AQ.getMousePosition(BC.e,BC.hWin),isHostedWithin:false}),BC);AQ.preventDefault(window,BC.e);if(BD.hasMenuItems()){this.openPopup(BD.newInstance());}}}BC.cancel();},addContextMenuItems:function e(BF,BC){var BE=this.getEditorModel(),BD;if(BE.getFormattingToolbar){BD=function(BG){var BH=BE.getFormattingToolbar(BG,BC.getTarget());if(BH){this.openPopup(BH);}}.bind(this);}if(!mstrApp.isInVFConfigMode){this.addFormatMenuItem(BF,BC,BD);}return BF;},addFormatMenuItem:function L(BE,BD,BC){if(!mstrApp.isAppStatePresentation()&&mstrApp.allowWebDashboardDesign()){BE.addMenuItem(mstrmojo.desc(1918,"Format"),"",function(){this.selectVIUnit();Aj.call(this,BD,BC);}.bind(this));}return BE;},getFormatMenuItemTarget:function u(BC){return mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE;},applyBoxSize:function h(BC,BE,BH,BG){this._super(BC,BE,BH,BG);this.dimensionsSet=true;var BF=parseInt(BE,10),BI=parseInt(BC,10);var BD=BF>BI?"h":"v";if(BD!==this.orientation){this.set("orientation",BD);}this.set("ghostImgCss",A2.call(this,BF,BI));},childRenderCheck:function Aa(BD){var BC=this._super(BD);if(BD===this.boxContent){BC=BC&&this.dimensionsSet;}return BC;},postUpdateLayout:function AA(){var BE=this.boxContent;if(!this.domNode){return ;}if(!BE.hasRendered){BE.render();var BC=this.model.getLatestSelectedViUnitKey(),BD=BC&&this.parent.getUnitByKey(BC);if(BD){this.model.selectVIUnit(BD.id);}else{this.parent.selectFirstBox();}}else{this.updateVisFilterIndicator();BE.refresh(null,!mstrApp.isPartialUpdate);}this.isNewUnitContainer=false;},orientationHasChanged:mstrmojo.emptyFn,onRender:function Af(){this._super();var BC=this.model.getSelectedViUnit();this.toggleBoxSelection(BC&&BC.k===this.k);},onAppStateChange:function Ad(BD){var BH=mstrmojo.vi.VisualInsightApp.APP_STATES,BJ=BH.SELECTOR_TARGETING,BC=BH.PRESENTATION,BE=BH.PAUSE,BI=mstrApp.isAppStatePresentation(),BF=mstrApp.isAppStatePause();if(BI||BD.valueWas&BC){this.draggable=!(BI||mstrApp.isLayoutModePreview());this.generateToolbar();}if(BD.valueWas&BJ||mstrApp.isAppStateSelection()||BF||BD.valueWas&BE){this.generateToolbar();}var BG=this.model.getSelectedViUnit();this.toggleBoxSelection(BG&&BG.k===this.k);},onLayoutModeChange:function E(BC){var BD=mstrApp.isLayoutPreview(BC.value);if(BD||mstrApp.isLayoutPreview(BC.valueWas)){this.draggable=!(mstrApp.isAppStatePresentation()||BD);this.generateToolbar();}},selectVIUnit:function X(BC){var BD=this.parent;if(this.enabled&&BD&&BD.selectVIUnit&&!(mstrApp.isAppStateSelection()&&mstrApp.isLayoutModePreview())){this.toggleBoxSelection(this.parent.selectVIUnit(this,BC));}},synchronizeEditors:function AD(){if(this.model.getLatestSelectedViUnitKey()===this.k){this.selectVIUnit(true);}},addToggleTitleMenuItem:function P(BC){var BD=[Aq,A5];if(!this.showTitleBar){BD.reverse();}BC.addDualStateItem(this.id,BD[0],BD[1]);},canShowDesignMenuItems:function r(){return mstrApp.allowWebDashboardDesign();},updateToolbar:function o(BC){var BD=BC.ENUM_CORNERS,BE=this.boxContent,BG=BE&&BE.node,BF=BG&&(!BG.defn.vis||!BG.defn.vis.ve);BC.setAlignment(BD.BOTTOM_RIGHT,BD.TOP_RIGHT);BC.isHostedWithin=false;BC.showContextMenu=false;if(this.canShowDesignMenuItems()&&!mstrApp.isAppStatePresentation()){BC.addSeparator();if(!(mstrApp.isInVFConfigMode&&!BF)){this.addFormatMenuItem(BC);}if(this.showTitleBar){BC.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){this.draggable=false;this.titleBar.editTitle();}.bind(this));}if(undefined!==this.getEditOverlayControls()){BC.addMenuItem(mstrmojo.desc(3272,"Edit"),"cls",this.switchToEditMode.bind(this));}this.addDeleteMenuItem(BC);}return BC;},addDeleteMenuItem:function Am(BD){if(!mstrApp.isLayoutModePreview()&&!(mstrApp.isInVFConfigMode||mstrApp.isInVFInteractMode)){var BC=this.k,BE=this.model.id;BD.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){Ay(BE,BC).deleteSelf();});}return BD;},deleteSelf:function AU(BP){var BO,BH=this.k,BD=this.model,BN=BD.id,BR=BD.data,BL=Ay(BN,BH).parent,BM=BL.k,BQ=[BM],BC=[],BJ=function(BS){return BS.sections||BS.subsections||BS.objects||BS.panels||BS.layouts||BS.children;},BE=function(BV,BU){var BT=BJ(BV),BS;for(BS=0;BT&&(BS<BT.length);BS++){if((BT[BS]&&BT[BS].k)===BU){W.removeIndices(BT,BS,1);return ;}else{BE(BT[BS],BU);}}},BG=BD.getRebuildCallback(),BF=function(BW){var BU=Ay(BN,BH),BV=mstrmojo.all[BN],BX=BV.getCurrentLayoutDef(),BT=(BX&&BX.units)||{},BS=BT[BH];if(BU){if(BW){BU.defn._isDeleted=true;}else{delete BU.defn._isDeleted;}}if(BS){if(BW){BS._isDeleted=true;}else{delete BS._isDeleted;}}BV.syncLayerDefn(BH,BO,BW);};BC=BC.concat(BD.getSourceFilterKeys(BH,true));BC=BC.concat(BD.getTargetFilterKeys(this));this.model.execute({execute:function(){var BT=Ay(BN,BH);if(BT){var BS=BT.parent,BU=mstrmojo.all[BN],BX=BU.getDataService().newUpdate();var BV=BS.hasMultipleChildren();BX.addUpdate(BT.createDeleteUpdate());BO=BU.getMapLayerKeys(BT.boxContent);BX.addActions(BU.getDeleteMapLayersActions(BO));BX.addCallbacks({success:function BW(BY){BU.partialUpdate(BY.data,BU.getTargetDefn(BC),BY.defn,BC);BE(BR,BH);BU.deleteDataCache(BT.boxContent&&BT.boxContent.id);BT.defn._isDeleted=true;BU.syncLayerDefn(BH,BO,true);BT.destroy();}});BS.deleteBoxAndSubmitDeferred(BX,BT,null,true);if(!BV){BU.addVisualizationDeferred(BX,BS.k);}BS.selectFirstBox();BX.addCallbacks(BP);BX.addExtras({style:{params:{treesToRender:0}}});this.submitUpdate(BX);}},urInfo:{undo:function BK(){BF(false);},redo:function BI(){BF(true);},puKeys:BQ,extras:mstrmojo.DocDataService.REQUEST_DEFN_DATA,callback:BG}});},undoInsert:function Ah(){var BC=this.parent,BD=mstrmojo.all[this.model.id];BC.deleteBoxAndSubmitDeferred(BD.getDataService().newUpdate(),this,null,true);BC.selectFirstBox();this.destroy();},createDeleteUpdate:function w(){},getTitleBarVisibility:function V(){return this.titleBar&&this.showTitleBar;},setTitleBarVisibility:function s(BC){var BE=this.titleBar;BE.set("visible",BC);var BF=this.menuBtnInfo,BD=BF&&BF.btn;if(BF){if(!BF.menuCfg){BF.menuCfg=BE.getMenuConfig();}if(mstrApp&&mstrApp.isInVFInteractMode){BF.menuCfg=null;}if(!BD){BD=BF.btn=document.createElement("div");BD.className="hover-menu-btn";var BG=this.id;AQ.attachEvent(BD,"click",function(BJ){var BI=mstrmojo.all[BG],BH=BF.menuCfg;BH.hostId=BG;BH.hostElement=BD;BH.supportsScroll=true;BH.isHostedWithin=false;BH.maxHeight=AQ.getMaxScrollHeight();BI.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:BH}));BJ.preventDefault();});}this.domNode.appendChild(BD);}t.call(this);this.doLayout();},refresh:function Ar(){delete this._currentLayout;if(!this.parent.boxLayoutConfig.dirty){this._super();}else{K.call(this,false,this.getFormats());if(this.showTitleBar){K.call(this,true,this.getFormats());}}},addFormatProps:function a(BD,BC){return BD;},onclick:function AP(BC){BC.e.justSwitched=this.k!==this.getDocModel().getLatestSelectedViUnitKey();this.selectVIUnit();if(!BC.e.ptvSelected&&this.switchPropertyOnClick(BC)){this.boxContent.edtModel.selectTargetByValue(mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE);}},switchPropertyOnClick:function AV(){var BC=this.boxContent.edtModel;return !!(BC&&BC.selectTargetByValue);},getZonesModel:function Al(){return null;},getEditorModel:function A8(){return this.boxContent.edtModel;},onmouseenter:function AZ(){var BC=this.menuBtnInfo;if(BC&&BC.menuCfg){A3.addClass(BC.btn,AM);A3.removeClass(BC.btn,k);}},onmouseleave:function BA(){var BC=this.menuBtnInfo;if(BC&&BC.menuCfg){A3.addClass(BC.btn,k);A3.removeClass(BC.btn,AM);}},onmouseover:function I(BC){if(!mstrApp.isInteractive()){return ;}if(!this.bubbleMouseOver){BC.cancel();}var BD=this._panelTimeout;if(BD){window.clearTimeout(BD);delete this._panelTimeout;}if(this.titleBar.visible&&!mstrApp.isAppStateSelection()){this.titleBar.setToolbarVisibility(true);}},onmouseout:function AB(){var BC=this.id;this._panelTimeout=window.setTimeout(function(){var BD=mstrmojo.all[BC];if(BD){BD.titleBar.setToolbarVisibility(false);}},200);},menuDisplayCallback:function M(BD){var BC=this.menuBtnInfo;A3.toggleClass(BC.btn,AM,BD);A3.toggleClass(BC.btn,k,!BD);},onmousemove:function AO(){var BC=this,BD=BC.menuBtnInfo;if(BC.titleBar&&!BC.titleBar.visible&&BD&&BD.menuCfg){if(!!BC.mouseMovingTimer){clearTimeout(BC.mouseMovingTimer);clearTimeout(BC.menuDisplayTimeout);}BC.mouseMovingTimer=setTimeout(function(){clearTimeout(BC.menuDisplayDelay);BC.menuDisplayDelay=null;clearTimeout(BC.menuDisplayTimeout);BC.menuDisplayTimeout=setTimeout(function(){BC.menuDisplayCallback(false);},1500);},100);if(!BC.menuDisplayDelay){BC.menuDisplayDelay=setTimeout(function(){BC.menuDisplayCallback(true);},500);}}},isDragValid:function AK(BD){var BF=BD.src.node,BC=BF.tagName,BE=BF.className;BC=(BC&&BC.toLowerCase())||"";BE=(BE&&BE.toLowerCase())||"";if(BC==="input"||BC==="textarea"||BE.indexOf("hover-menu-btn")>-1||BE.indexOf("icn")>-1){return false;}return this.parent.hasMultipleChildren();},initializeDrag:function AF(){if(this._super()!==false){this.selectVIUnit();}},getTargetDropZone:function AE(BC){if(AS.call(this,BC)||AI.call(this,BC)){return"";}return this._super(BC);},allowDrop:function B(BC){var BE=BC.src,BD=BE&&BE.widget;if(BD&&BD===this){return false;}if(x.call(this,BC)&&this.allowDropFromFilter(BC)){return true;}if(AS.call(this,BC)&&this.allowDropFromDataset(BC)){return true;}if(AI.call(this,BC)&&this.allowDropFromAllObjectsBrowser(BC)){return true;}return this._super(BC);},allowDropFromFilter:function Ax(BC){var BE=BC&&BC.src,BD=BE&&BE.widget;return mstrApp.allowWebDashboardDesign()&&!(BD&&BD.isVisFilter());},allowDropFromDataset:function Ae(BC){return false;},allowDropFromAllObjectsBrowser:function Q(BC){return this.allowDropFromDataset(BC);},close:function(){this.parent.deleteBoxAndSubmit(this);this.parent.removeChildren(this);mstrApp.rootCtrl.generateToolbar();this.destroy();},createAvatar:function S(){this.domNode.style.zIndex="-1";var BC=document.createElement("div");BC.className=this.getAvatarCls().join(" ");BC.textContent=this.getDisplayName();return this.offsetAvatar(BC);},ondragend:function Y(BC){this.domNode.style.zIndex=Ak;this._super(BC);},wasDropped:function l(BC){this.domNode.style.zIndex=Ak;this._super(BC);},ondrop:function A(BC){var BE=x.call(this,BC),BD=this.maskNode.zone,BG,BK=this.getDocModel(),BJ=this;if(BE){BG=BC.src.widget.selector.node;}this._super(BC);if(AS.call(this,BC)){BK.selectVIUnit(this.id);this.dropFromDataset(BC);}if(AI.call(this,BC)){var BH=BC.src.widget,BF=BH&&BH.dataProvider;if(BF){BF.loadObjects(BC.getCtxtDragData().items,{success:function(){BJ.dropFromAllObjects(BC);}});}}if(BE){var BI=this;if(!BD){BD=this.parent.getPanelTargetEdge(BC);if(BD){BI=null;}}this.model.insertExistingFilter(BG,BI,BD);}},postDropBox:function Aw(){this.domNode.style.zIndex=Ak;},rebuildBoxContent:function AG(BC){var BE=this.boxContent,BD=this.parent;this.removeChildren(BE);BE.destroy();if(BC){BE=BD.builder.build([BC],this.model,{pk:BD.k})[0].boxContent;}else{BE=this.model.rebuildUnitFromDataCache(BE.id,BD.k,BD.builder).boxContent;}this.addChildren([BE]);},dropFromDataset:mstrmojo.emptyFn,dropFromAllObjects:mstrmojo.emptyFn,generateToolbar:function C(){var BC=this.titleBar,BD=BC.toolbarCfg,BE=this.menuBtnInfo;if(BE){if(BD){BD.destroy();}if(BE.menuCfg&&BE.menuCfg.destroy){BE.menuCfg.destroy();}if(mstrApp&&mstrApp.isInVFInteractMode||mstrApp.isAppStateSelection()){BE.menuCfg=null;}else{BC.set("toolbarCfg",this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));BE.menuCfg=BC.getMenuConfig();}}if(this.hasRendered){t.call(this);}},getTitleVisibilityFmts:function d(BC){return{FormattingView:{ShowTitleBar:BC}};},toggleTitleBar:function AR(BD){var BI=this.boxContent.id,BG=this.model,BH=function BH(BJ){var BL=mstrmojo.all[BI],BK=BL.parent;clearTimeout(BK.mouseMovingTimer);clearTimeout(BK.menuDisplayTimeout);clearTimeout(BK.menuDisplayDelay);BK.setTitleBarVisibility(BJ);BK.parent.selectVIUnit(BK,true);BK.applyBoxSize(BK.height,BK.width,BK.top,BK.left);BK.showTitleBar=BJ;BK.generateToolbar();BL.refresh(null,true);},BC=this.id;BH(BD);BG.controller.cmdMgr.execute({execute:function(){var BJ=mstrmojo.all[BI].parent;this.submit([BG.getUnitFormatAction(BJ,BJ.defn.t===mstrmojo.EnumRWUnitType.SELECTOR?5:1,BJ.getTitleVisibilityFmts(BD?1:0),true)],{success:function BL(){mstrmojo.all[BC].defn.httl=BD;},failure:function BK(){BH(!BD);}},mstrmojo.DocDataService.RAPID_EXEC);BH(BD);},urInfo:{silent:true,undo:function BE(){BH(!BD);},redo:function BF(){BH(BD);}}});},getFormats:function AT(){var BC=this.boxContent;if(BC){return BC.getFormats();}return null;},clearFormats:function N(){var BC=this.boxContent;if(BC&&BC.clearFormats){BC.clearFormats();}},preBuildRendering:function f(){var BC=this.boxContent;if(BC){BC.attachEventListener("regenerateToolbar",this.id,"generateToolbar");}this.generateToolbar();return this._super();},postBuildRendering:function A7(){var BC=this.showTitleBar;this.setTitleBarVisibility(BC);if((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isLayoutModePreview&&mstrApp.isLayoutModePreview())){this.draggable=false;}this._super();this.titleBar.setToolbarVisibility(false);this.applyBoxSize(this.height,this.width,this.top,this.left);return true;},changeUnitFormats:function A0(BF,BI,BM,BK,BE,BC,BG,BJ){var BH=function(BR){if(BG){BR=BG(BR);}n.updateFormatBlock(BF?BM.ttl:BM,BK,BR);var BP=this.parent?this:this.model.getSelectedViUnit();K.call(BP,BF,BM);var BQ=this.boxContent;if(!BQ.excludeData){if(!BF&&BQ.restylePlotly){BQ.restylePlotly(BM);}}if(BJ){BJ(BR);}BP.synchronizeEditors();if(BF&&BK===g.FONT_SIZE){BP.doLayout();BP.postUpdateLayout();}},BL=function(BP){this.model.updateDefnCache(BP.defn,[this.k]);this.clearFormats();BM=this.getFormats();},BN={success:BH.bind(this,BE)};var BO="none",BD=mstrmojo.DocDataService.SUPPRESS_DATA;if(BK===g.BORDER_STYLE&&BC===BO){BD=mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION;BN=mstrmojo.func.wrapMethods({success:BL.bind(this)},BN);}this.model.saveUnitFormatProperty(this,[{formatType:BI,propertyName:BK,newValue:BE,oldValue:BC}],BN,BD,{silent:true,undo:BH.bind(this,BC),redo:BH.bind(this,BE)});},redraw:function AC(){if(this.boxContent.redraw()===true){return true;}return this._super();},getAvatarCls:function Ac(){return["mstrmojo-VIUnit-avatar","icn-avi",mstrApp.getThemeClassName()];},addDragHandle:function z(){var BC=document.createElement("div");BC.className="uc-drag-handle";this.domNode.appendChild(BC);},toggleDragHandleVisibility:function Au(BC){A3.toggleClass(this.domNode,"no-handler",!BC);},toggleBoxSelection:function AY(BD){if(mstrApp.isInVFInteractMode){return ;}var BE=mstrApp.isAppStatePresentation(),BC=mstrApp.isAppStatePrintPreview(),BF=this.domNode;A3.toggleClass(BF,"selected",BD&&!(BE||BC));},updateGhostImgCss:function p(BC){if(BC.propertyName===g.BACKGROUND_COLOR&&!BC.isTitle){var BD=this.ghostImgCss||[];BD=W.filter(BD,function(BE){return c.indexOf(BE)===-1;});BD=BD.concat(Ag(BC.value));this.set("ghostImgCss",BD);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.models.EnumDragSources","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.models.DatasetDoubleClick","mstrmojo.vi.models._CheckDataCards","mstrmojo.vi.util.TemplateUtils");var U=mstrmojo.hash,k=mstrmojo.array,AB=mstrmojo.func,a=mstrmojo.vi.util.TemplateUtils,u=mstrmojo.vi.ui.DatasetUnitMenuUtils,X="00000000000000000000000000000000",l=mstrmojo.vi.models.EnumDragSources,W=mstrmojo.chart.model.enums.EnumDSSObjectType,d=mstrmojo.vi.enums.EnumFeatures,Y=mstrmojo.vi.viz.EnumDSSDropZones;var Z={ABOVE:0,ON:1,BELOW:2};mstrmojo.vi.models.DropZoneItemType=null;mstrmojo.vi.models.DropZoneType=null;mstrmojo.vi.models.DropZonesEditorConfigType=null;function J(AK,AG,AI,AL,AO,AJ,AM,AN){var AH={act:AK,zoneId:AG,unitId:AI,unitType:AL};if(AO!==undefined){AH.unitPos=AO+1;}if(AN!==undefined){AH.is_disableonly=AN;}if(AJ){AH.datasetId=String(AJ);AH.datasetType=String(AM);}return AH;}function O(AG){return function(AH){var AI=[{t:AG,did:NaN}];return !!this.getAllowDropInfo(AH,AI,AH.items.length-1,Z.BELOW,{src:{data:{src:l.DATASETS}}}).allowedItems.length;};}mstrmojo.vi.models.DropZonesModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.models._CheckDataCards],{scriptClass:"mstrmojo.vi.models.DropZonesModel",hostId:"",docModel:null,getDropZones:mstrmojo.emptyFn,getDZFlatStruct:function L(){var AJ=this.getHost().model.data,AK=AJ.gsi||{},AG=(AK.rows||[]).concat(AK.cols||[]),AI={},AH={};AG.forEach(function(AL){if(AL.hasOwnProperty("st")&&AL.hasOwnProperty("did")){AI[AL.did]=AL.st;}});if(AJ.dz){Object.keys(AJ.dz).forEach(function(AN){var AL=AJ.dz[AN],AM=(AL.TemplateUnit||[]).concat(AL.TemplateMetric||[]);AM.forEach(function(AO){var AP=AO.id;if(AO.st===undefined&&AI.hasOwnProperty(AP)){AO.st=AI[AP];}});AH[AN]=AM;});}return AH;},getAvatarIconClass:function c(){throw new Error(this.scriptClass+" must implement getAvatarIconClass method.");},canSwapAxis:function t(){return false;},swapAxis:function A(){if(this.canSwapAxis()){throw new Error(this.scriptClass+" must implement swapAxis method if this.canSwapAxis returns true.");}},canDefineSubtotals:function(){var AG=this.getHost();if(AG&&AG.GMController&&AG.GMController.isWaterfall){return true;}return false;},hasVisibleSubtotals:function j(){var AG=this.getHost();return AG.getWidgetPropertyValue("totalShw")||(AG.getWidgetPropertyValue("intSumShw")&&AG.GMController.hasAttributesInDropzone("BreakBy"));},showQuickSubtotals:function I(){var AG=this.getHost();AG.writeGlobalProperty("totalShw:intSumShw",true);},hideDefinedSubtotals:function AA(){var AG=this.getHost();AG.writeGlobalProperty("totalShw:intSumShw",false);},getZoneMenuItems:function x(AH,AG){},getUnitMenuItems:function o(AH,AG,AJ,AI){},getMultiUnitsMenuItems:function h(AH,AG,AI){var AJ=this.id;if(!mstrApp.isInVFConfigMode&&u.getMultiSelectionShortcutMetricFunctions(AI).length&&mstrmojo.resolveFeature(d.INSERT_NEW_METRIC)){AH.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[AJ].getMultipleMetricsCalcMenus(AG,AI,true);});}AH.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[AJ].deleteItems(AG,AI);});},deleteItem:function K(AH,AG){this.throwAbstractMethodError("deleteItem");},deleteItems:function K(AG,AH){this.throwAbstractMethodError("deleteItems");},addZoneItem:function g(AI,AJ){AI.t=AI.t||4;if(AI.did===undefined){AI.did=AI.id;}var AG=a.findUnitsById(this.getHost().model.data.gsi,AI.did)[0];if(AG){U.copyProps(["n","um"],AG,AI);}var AH=this.docModel.datasets,AL=false,AK=AI.t===4?"mx":"att";Object.keys(AH).every(function(AM){(AH[AM][AK]||[]).every(function(AO){if(AO.did===AI.did){AL=true;var AP,AN=AO.n;for(AP in AO){if(!AI.hasOwnProperty(AP)){AI[AP]=AO[AP];}}if(AN!==AI.n){AI.objectNameinDataset=AN;}}return !AL;});return !AL;});AJ.push(AI);},getZone:function w(AL,AK,AJ,AG,AH){var AI=[];(AJ||[]).forEach(function(AM){this.addZoneItem(U.copy(AM),AI,AH);},this);return{n:AL,id:AK,enabled:!AG,cssClass:(AH&&AH.allowSingle)?"singleUnitZone":"",getDropIconCls:function(){return"pivot";},title:(AH&&AH.title)||"",items:AI};},getZoneForObject:function R(AH){var AG=null;this.getDropZones().zones.every(function(AI){if(k.find(AI.items,"did",AH)>-1){AG=AI;return false;}return true;});return AG;},getUnitIndexInZone:function s(AG,AH){return k.find(AG.items,"did",AH.did);},isZoneDropAllowed:function V(AG){if(!AG.enabled){return false;}return true;},getAllowDropInfo:function C(AH,AI,AG,AJ){return{allowedItems:AI.concat(),removeReplaced:AJ===Z.ON&&AH&&AH.items&&AH.items[AG]&&k.find(AI,"did",AH.items[AG].did)===-1};},getTargetEdgePortion:function P(AG){return 0.33;},allowInsertNewMetric:O(4),allowInsertNewAttribute:O(12),unitsDropped:function AC(AG,AH,AI,AK,AJ){if(this.unitDropped!==mstrmojo.vi.models.DropZonesModel.prototype.unitDropped){return this.unitDropped(AG,AH,AI.idx,AI.edge,AK,AJ);}this.throwAbstractMethodError("unitsDropped");},getHost:function e(){return mstrmojo.all[this.hostId];},getHostModel:function B(){this.throwAbstractMethodError("getHostModel");},shouldMetricNameShowIcon:function AF(){return true;},addUnitsFromDataSource:function H(AN,AL,AJ,AH){var AO=this,AS=AO.docModel,AK=AS.controller,AG;AJ=AJ||[];var AI=false,AR=this.getHost(),AM=[],AT;[].concat(AN).forEach(function(AU){AT=this.isMetric(AU);AI=AT||AI;AG=mstrmojo.vi.models.DatasetDoubleClick.addObject(AU,AL,this);AJ=AJ.concat(AG);if(AT){AM.push(AU);}},this);if(AJ&&AJ.length){if(AI&&AG&&AG[0].actions){AG[0].actions.push(AR.model.getValuesDefaultFormatGridZoneAction(AM,true));}var AQ=AK._getXtabCallback(this.getHost());if(AH){AQ=AB.wrapMethods(AH,AQ);}var AP=function(){AS.checkAndNotifyVFChangeOnDZUnitsUpdate({actions:AJ,zm:AO},function(){AJ=AS.wrapUnsetVisualizationFilterAction(AJ);return AK.submitUndoRedoUpdates(AJ,{},AQ);},function(){return AK.submitUndoRedoUpdates(AJ,{},AQ);});};if(this.existLargeOrManyItems()){this.warnAndExecCallBackForAddUnits(function(){AP();});return ;}if(this.getHost().isOutlineMode){this.warnAndExecCallBackForOutlineAddUnits(function(){AP();});return ;}AP();}},changeZoneUnits:function r(AH,AG,AI){},getZoneAddCandidates:function b(AG){return[];},getRequiredItemsInfo:function n(AH){if(!AH){return 0;}var AG=[];this.getDropZones().zones.forEach(function(AI){AG=AG.concat(AI.items);});return Number(AG.reduce(function(AI,AJ){if(parseInt(AJ.did,10)!==-1&&AJ.t===AH){return AI+1;}return AI;},0));},getUpdateCallback:function S(){var AG=this.id;return{success:function(){var AK=mstrmojo.all[AG];if(!AK){return ;}var AM=AK.getHost();if(!AM){return ;}var AL=mstrmojo.all.visualizationFilterToolbar,AJ=AK.docModel,AO,AI,AN,AH;if(mstrApp.isInVFConfigMode){AO=AM.zonesModel;AM.parent.selectVIUnit(true);AH=AO&&AO.isTemplateContainAttCategoryItem();mstrApp.isEnableSaveBtn=AH;AL.toggleSaveBtn(AH);}else{AI=AM.parent&&AM.parent.k;AN=AJ.getPanel().getUnitByKey(AI);if(AN){AN.selectVIUnit(true);}}}};},getUpdateTemplateAction:function N(AG,AH){return this.docModel.getDataService().getUpdateTemplateAction(AH||this.getHost().k,AG);},getReplaceCandidates:function M(AJ,AO){var AK=[],AI=AO.t,AG=AO.did,AH=this.getHostModel().datasetId,AM=AJ.id===Y.AdditionalMetrics,AN=this.getHost(),AL=AN.getChartStyle&&AN.getChartStyle()==="NewGraphMatrixVisualizationStyle";this.getDropZones().zones.forEach(function(AP){((AP&&AP.items)||[]).forEach(function(AR){var AS=AR.t,AQ=AR.did;if(AS!=undefined&&AQ!=undefined&&AS!==21&&AQ!=="-1"&&AQ!==X&&((AS===4&&AI===4)||(AS!==4&&AI!==4))&&AQ!==AG&&k.find(AK,"did",AQ)===-1){AK.push(AR);}});});if(!AL||!AM){if(AH){this.docModel.getDatasetUnits(AI===4?["mx"]:["att"],null,AH).forEach(function(AP){if(k.find(AK,"did",AP.did)===-1&&AP.did!==AG&&!AP.hide&&!AN.model.hasSameRecursiveAttributeGroup(AP,AN.gridData,AO)){AK.push(AP);}});}}return u.getSortedDatasetUnits(AK);},getDropTargetIndex:function E(AH,AJ){var AG=AJ.idx,AI=(AJ.edge===Z.ON&&!AJ.removeReplaced)?Z.BELOW:AJ.edge,AL=AG,AK=this,AM={};AJ.allowedItems.forEach(function(AO){var AN=AK.getUnitIndexInZone(AH,AO);if(AN!==-1){AM[AN]=AO;}});U.forEach(AM,function(AO,AP){var AN=parseInt(AP,10);if(AN<AG){AL--;}else{if(AN===AG){AI=Z.ON;}}});return AI===Z.BELOW?(AL+1):AL;},getAddDropZoneUnitAction:function q(AH,AJ,AG,AI){return J("addDropZoneUnit",AH.id,AJ.did,AJ.t,AG,AI&&AI.datasetId,(AI&&AI.datasetType)||W.DssTypeReportDefinition);},getAddDropZoneUnitsActions:function AE(AH,AI,AG,AJ){return AI.reverse().map(function(AK){return J("addDropZoneUnit",AH.id,AK.did,AK.t,AG,AJ&&AJ.datasetId,(AJ&&AJ.datasetType)||W.DssTypeReportDefinition);});},getRemoveDropZoneUnitActions:function G(AK,AO,AM){if(AM===undefined||AM===null){AM=1;}var AH=[];if(AK.id===Y.ColorBy&&this.isMetric(AO)){var AG=AO.id||AO.did;var AJ=this.getHostModel(),AL=AJ&&AJ.gsi,AN=AL&&AL.thresholds&&AL.thresholds[AG]||[];for(var AI=AN.length-1;AI>=0;AI--){AH.push({act:"clearThreshold",unitId:AG,unitType:AO.t,tid:AN[AI].tid});}}if(AO){AH.push(J("removeDropZoneUnit",AK.id,AO.did,AO.t,undefined,undefined,undefined,AM));}return AH;},checkAndAddThresholdAction:function z(AI,AG,AH){return false;},getAllZones:function(){return this.getDropZones().zones||[];},getClearAllUnitsActions:function Q(){var AG=[];(this.getAllZones()).forEach(function(AH){((AH&&AH.items)||[]).forEach(function(AI){Array.prototype.push.apply(AG,this.getRemoveDropZoneUnitActions(AH,AI));},this);},this);return AG;},getClearAllUnitsUnTemplateActions:function f(){return[];},clearAllDropZones:function y(AK){var AH=this.docModel,AJ=this,AG=AJ.getAllZones().filter(function(AM){return AM&&AM.items&&AM.items.length;}).map(function(AM){return AM.id;}),AI=function(){AK=AK||{actions:[]};AK.actions=AH.wrapUnsetVisualizationFilterAction(AK.actions);AJ.clearAllDropZonesDeferred(AK);},AL=function(){AJ.clearAllDropZonesDeferred(AK);};return AH&&AH.checkAndNotifyVFChangeOnClearAll({zm:AJ,ca:AG,cmb:true},AI,AL);},clearAllDropZonesDeferred:function D(AP){var AI=this.getClearAllUnitsActions(),AK=this.getClearAllUnitsUnTemplateActions(),AR=this.getHost(),AN=AR.id,AJ=AR.gridData||AR.model.data||AR.node.data,AM=AJ.vlexpr,AS=this.docModel,AH=AR.model,AL=AS.controller,AO=AB.wrapMethods({success:function(){var AT=mstrmojo.all[AN];if(AT._viSelections){AT.clearSelections();AT.endSelections();}}},AL._getXtabCallback(AR),{success:function AQ(){mstrmojo.all[AN].raiseEvent({name:"regenerateToolbar"});}}),AG=AH.getKeepOnlyActionsForAssociatedNodes([],AO);if(AM){AG.actions.push(AL.dataService().getUpdateTemplateAction(AR.k,AH.getRemoveMetricLimitsAction(AM)));}if(AP){AP.actions=[].concat(AP.actions).concat(AG.actions);AP.callback=AB.wrapMethods(AP.callback,AG.callback);}else{AP=AG;}if(AK&&AK.length>0){AP.actions=AP.actions.concat(AK);}this.submitDropZoneTemplateUpdates(AI,AP);},submitDropZoneUpdates:function p(AM,AN,AI){var AK=this.getHost(),AH=this.docModel,AG=AH.controller,AJ=[].concat(AM||[]);if(AJ&&AJ.length){var AL=AN||AG._getXtabCallback(AK);AG.cmdMgr.execute({execute:function(){this.submit(AJ,AL,AI);},urInfo:{callback:AL}});}},submitDropZoneTemplateUpdates:function F(AG,AI){var AH=(AG&&AG.length)?[this.getUpdateTemplateAction(AG)]:[];if(AI&&AI.actions){AH=AH.concat(AI.actions);}this.submitDropZoneUpdates(AH,AI&&AI.callback,AI&&AI.extras);},getHighlightTargets:function AD(AH,AG){return[AG];}});mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION=Z;mstrmojo.vi.models.DropZonesModel.ENUM_REQUIREMENT_TYPE={ATTRIBUTE:12,METRIC:4,LONGITUDE:"long",LATITUDE:"lat"};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.elementHelper","mstrmojo.mstr.EnumFunction","mstrmojo.mstr.EnumDSSConsolidationType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.rw.xtab.XtabMenuConfig","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.ui.NumberFormatterEditor","mstrmojo.vi.ui.CalculationMenuEditor","mstrmojo.vi.enums.EnumDerivedElementType","mstrmojo.array");mstrmojo.requiresDescs(14388,14717,13355,12197,15356,15599);var W=mstrmojo.hash,j=mstrmojo.array,V=mstrmojo.dom,f=mstrmojo.elementHelper,b=mstrmojo.vi.enums.EnumDerivedElementType,p=mstrmojo.vi.ui.DatasetUnitMenuUtils,O=mstrmojo.mstr.EnumFunction,D=mstrmojo.mstr.EnumDSSConsolidationType,F=mstrmojo.mstr.EnumDSSXMLObjectTypes,Z=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,e=mstrmojo.vi.enums.EnumFeatures;var G=mstrmojo.rw.xtab.XtabMenuConfig.ACTION_TYPES,n=G.GROUP,h=G.CALCULATION,d=2,C=3,U=1;function Q(){return mstrApp.isAppStatePresentation();}function R(s){if(!s||!s.items||!s.data||!s.xtab){return{};}var y=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,isHostedWithin:false,alignWithAnchor:true,maxHeight:350}),t=s.items,w=s.data,x=s.xtab,u=[];if(mstrmojo.resolveFeature("sort-drill-paths")){t.sort(function(AA,z){if(AA.n>z.n){return 1;}if(AA.n<z.n){return -1;}return 0;});}t.forEach(function(AA,z){if(u.indexOf(AA.id)===-1){u.push(AA.id);if(AA.att){y.addPopupMenuItem(AA.n,this.id,R,"xt",{items:t[z].att,data:w,xtab:x});}else{y.addMenuItem(AA.n,"xt",function(){x.drill(w,t[z]);});}}});return y;}function r(AA){var AG=AA.xtab,w=AA.data,x=AG.model,z=x.getAllDrillWithinPathsForCell(w,undefined,true),AB=z.length,y=x.docModel,t=y.datasets[x.data.datasetId],AH,AC=[],AE=-1,AD,AF,u,s;if(t&&y.isMDXDataset(t)){z.sort(function(AJ,AI){AJ.did=AJ.id;AI.did=AI.id;if(AJ.id<AI.id){return -1;}if(AJ.id>AI.id){return 1;}return 0;});AH=t.tables[0];AH.dimensions.forEach(function(AI){u=true;AD=-1;AI.hierarchies.forEach(function(AJ){s=true;AJ.att.forEach(function(AK){if(AK){AF=j.findBin(z,AK,"did",AB);if(AF!==-1){if(u){AC.push({id:AI.did,n:AI.n,att:[]});AE++;u=false;}if(s){AC[AE].att.push({id:AJ.did,n:AJ.n,att:[]});AD++;s=false;}AC[AE].att[AD].att.push(z[AF]);}}});});});}else{AC=z;}return R({items:AC,data:w,xtab:AG});}function k(t){var x=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:250});var w=t.xtab,u=t.deObject,s=t.groups;s.forEach(function(z,y){if(z.t===b.LIST&&!z.ido){x.addMenuItem(z.n,"",function(){w.addElementsToGroup(u,s[y],y,w.getContextMenuSelections());});}});return x;}function l(t){var s=t&&t.des;return !!s&&s.some(function(u){return(u.t===b.LIST&&!u.ido);});}function g(s,y,u){var t=false,x=undefined;if(y){t=!f.isNonGroupNull(s.data)&&this.isActionAvailable(s.data,n)&&s.de===undefined;}else{if(u){var w=M.call(this,s);t=w.isActionAvailable;x=w.group;}}return{isAddToGroupSupported:t,group:x};}function M(t,u){var w,y=undefined,x=t.xtab,AA=0,z=x.cmSelCells;var s=z.filter(function(AB,AC){return z.indexOf(AB)===AC;});w=!s.some(function(AB){var AC=x.getCellForNode(AB);if(!f.isNonGroupNull(AC)&&this.isActionAvailable(AC,n)){if(AC.dei!==undefined){y=x.getDEInfo(AC).de;if(y.t!==b.LIST||++AA>1){return true;}}return false;}else{return true;}},this);if(u){w=(w)?!!y:w;}return{isActionAvailable:w,group:(w)?y:undefined};}function P(s){var t=s.xtab;return !t.cmSelCells.some(function(u){var w=t.getCellForNode(u);return f.isNonGroupNull(w)||!this.isActionAvailable(w,n)||w.dei!==undefined;},this);}function I(t){var s;return !t.cmSelCells.some(function(u){s=t.getCellForNode(u);return(f.isNonGroupNull(s)||!this.isActionAvailable(s,h));},this);}function X(w){var s=p.generateNumberFormat(w&&w.de&&w.de.nf),x=W.clone(s),z=W.clone(s),t=new mstrmojo.ui.menus.EditorConfig({contents:new mstrmojo.vi.ui.NumberFormatter({myData:x,oldData:z,formatValue:s}),data:x}),u=this.delegateActionToXtab;W.make(x,mstrmojo.Obj);W.make(z,mstrmojo.Obj);t.fnOk=function y(){u(w,"editQuickDECalculationNumberFormat",W.copy(this.data,{de:w.de}));};return t;}function a(x){var AH=new mstrmojo.ui.menus.MenuConfig(),AA=4,AK=5,AF=6,t=7,AI=" - ",z=" / ",AC={SINGLE:[{n:mstrmojo.desc(358,"Absolute"),v:O.FunctionAbs}],PAIR:[{n:mstrmojo.desc(6017,"Add"),v:O.FunctionAdd},{n:mstrmojo.desc(2122,"Average"),v:O.FunctionAverage},{n:mstrmojo.desc(5868,"Least"),v:O.FunctionLeast},{n:mstrmojo.desc(5869,"Greatest"),v:O.FunctionGreatest},{n:"A-B",v:O.FunctionMinus+";0"},{n:"B-A",v:O.FunctionMinus+";1"},{n:"A/B",v:O.FunctionDivide+";0"},{n:"B/A",v:O.FunctionDivide+";1"}],MORE:[{n:mstrmojo.desc(6017,"Add"),v:O.FunctionAdd},{n:mstrmojo.desc(2122,"Average"),v:O.FunctionAverage},{n:mstrmojo.desc(5868,"Least"),v:O.FunctionLeast},{n:mstrmojo.desc(5869,"Greatest"),v:O.FunctionGreatest}]},AG=x.isEdit,AJ=AG&&x.de,AN=x.data,AL=AJ&&AJ.es,AM=x.xtab,AE=AG?(AL&&AL.length):AM.getCxtMnuSelectionSize(),s=(AE===1)?"SINGLE":((AE===2)?"PAIR":"MORE"),AD=AC[s],y=(AJ&&AJ.func),w;if(s==="PAIR"){if(AG&&AJ){AD[AA].n=AL[0].n+AI+AL[1].n;AD[AK].n=AL[1].n+AI+AL[0].n;AD[AF].n=AL[0].n+z+AL[1].n;AD[t].n=AL[1].n+z+AL[0].n;}else{w=this.xtab.cmSelCells;var u=w[0].innerText||w[0].textContent,AB=w[1].innerText||w[1].textContent;AD[AA].n=u+AI+AB;AD[AK].n=AB+AI+u;AD[AF].n=u+z+AB;AD[t].n=AB+z+u;}}AD.forEach(function(AO){var AQ=AO.v,AP=AG&&((typeof AQ==="string"&&AQ.indexOf(y)===0&&AQ.indexOf(";0")>0)||AQ===y);AH.addMenuItem(AO.n,"xt "+(AP?"checked":""),function(){var AS=x.xtab,AR=AJ&&AJ.func;if((AJ&&AR===AQ)||(typeof AQ==="string"&&AQ.indexOf(AR)===0&&AQ.indexOf(";0")>0)){return ;}if(x.isEdit===true){AS.editDECalculation(AN,AQ);}else{AS.derivedElementCalculation(AN,AQ);}});},this);return AH;}function A(u){var AI=u.xtab,z=u.data,AC=AI.model,y=AC.getCellTitleInfo(z),AJ=AC.isRecursiveAttribute(z.id||y.title.id),AB=AI.getDEInfo(z),x=AB&&AB.deObject,AH=AB&&AB.de,AD=AH&&AH.t,AF=x&&AI.getOthersDEInfo(x),t=u.singleCellClick,AA=AI.isSingleContextMenuAttrSelection(),AE=true,w=AI.getContextMenuSelections(),s=AI.isSingleContextMenuSelection(),AG={de:AH,xtab:AI,data:z,td:u.td,singleClick:t};if(AF&&!s&&AA){w.forEach(function(AK){if(AK[0]&&AK[0].eid.indexOf(AF.id)>-1){AE=false;return false;}});}if(!mstrApp.isInVFConfigMode&&(t||AA)&&this.isActionAvailable(z,h)&&I.call(this,AI)&&mstrmojo.resolveFeature(e.INSERT_NEW_METRIC)){if(!AJ&&!(s&&AD===b.RESIDUE)&&AE){this.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,a,W.copy(AG,{isEdit:false}));}else{if(AJ&&s&&!AD&&!z.ln){this.addMenuItem(mstrmojo.desc(15356,"Calculated Member..."),"",function(){AI.derivedElementCalculation(z,O.FunctionApplySimple);});}}}if(!mstrApp.isInVFConfigMode&&s&&AJ&&AD===b.CALCULATION){this.addMenuItem(mstrmojo.desc(15366,"Delete Calculated Member"),"",function(){this.delegateActionToXtab(AG,"removeQuickDE",AB);}.bind(this));this.addMenuItem(mstrmojo.desc(15599,"Edit Calculated Member..."),"",function(){this.delegateActionToXtab(AG,"derivedElementsEdit",[AB]);}.bind(this));}}function S(){var x=this.xtab,s=x.model,u=this.selectedData,t=x.getContextMenuSelections(),w=!u.olap;if(t.length>0){t.forEach(function(y){y.forEach(function(z){w=w&&s.supportsViewFilterActions(z.tid);});});}else{w=w&&s.supportsViewFilterActions(s.getCellTitleInfo(u).title.id);}if(u.mix!==undefined){w=w&&s.getCellDataUnion(u).every(function(y){return s.supportsViewFilterActions(y.tid);});}return w;}function c(s){return s&&s.mix!==undefined&&!!s._e;}function Y(s){return s&&s.otp===F.Attribute;}function E(s){return s&&s.otp===F.Consolidation&&s.ost===Z.ConsolidationManaged;}function o(s){var y=s.data,z=this.xtab,u=z.model,AA=c(y),x=AA?y._e:u.getCellTitleInfo(y).title,t=!AA&&x.otp===-1,w;if(t){j.forEach([y._lp,y._tp],function(AC){var AD=AC;while(AD&&AD!==AD._p&&!w){if(AD.stt){continue;}var AB=u.getCellTitleInfo(AD),AG=AB.title,AF=AG&&AG.id;if(AF&&AG.ost===12033){var AE=z.getDEInfo(AD),AH=AE&&AE.de;if(AH&&AH.t===b.CALCULATION&&AH.nf&&Object.keys(AH.nf).length>0){w={de:AH,xtab:z,data:AD,td:s.td,singleClick:s.singleClick};break;}}AD=AD._p;}return !w;});}if(!w){if(t){x={oid:u.data.gsi.mx[y.mix].did,otp:4};}w={did:x.oid||x.id,t:x.otp,stp:x.ost,fs:x.fs};}return w;}function K(u,s){var t=u&&s.td&&u.getCellForNode(s.td);if(c(t)){t.id=t._e.oid;t.otp=t._e.otp;}return t;}function B(u){var w=u.de?u:o.call(this,u),x=w.de,y=u.xtab,t=y.model,AB,s,AA,z=t.id;if(x){if(y.isSingleSelection()&&x.t===b.CALCULATION&&x.func!==O.FunctionApplySimple){AB=true;AA=w;s=X;z=this.id;}}else{AB=t.showNumberFormat(w);AA={item:w};s=t.getNumberFormatEditorCfg;}if(AB){this.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),z,s,AA);}}function q(u,s){var t=this.delegateActionToXtab;if(Y(u)||(u.otp===47&&u.ost===12033)){this.addMenuItem(mstrmojo.desc(14655,"Expand All Levels"),"",function(){t(s,"raExpandAll",[true]);});this.addMenuItem(mstrmojo.desc(14656,"Collapse All Levels"),"",function(){t(s,"raExpandAll",[false]);});}else{this.addMenuItem(mstrmojo.desc(14669,"Expand All Lower Levels"),"",function(){t(s,"raExpandDescendants");});}}mstrmojo.vi.ui.rw.xtab.XtabMenuConfig=mstrmojo.declare(mstrmojo.rw.xtab.XtabMenuConfig,null,{scriptClass:"mstrmojo.vi.ui.rw.xtab.XtabMenuConfig",buildXtabMenuConfig:function N(AJ){var AH=this.xtab=AJ.xtab,Aj=Q(),z=AH.model,At=this.selectedData=AJ.data=AJ.data||K(AH,AJ),Ar=p.getDatasetFromAttributeId(z.docModel.datasets,At.id),AX=At.stt===1,Ad=AH.getCellForNode(AJ.td),AB=z.isSubtotalValue(Ad),Aa=At.otp,Am=At.ost,Ao=z.getCellTitleInfo(At),Ag=AH.zonesModel,Af=Ag.id,w=Ag.docModel,Ap=this.delegateActionToXtab,Aq=AH.isSingleContextMenuAttrSelection(),AC=AJ.singleCellClick,AW=S.call(this),Al=AH.getDEInfo(At),AT=Al&&Al.deObject,AE=Al&&Al.de,AK=AE&&AE.t,Ai=z.isRecursiveAttribute(At.id||Ao.title.id),x=AH.isSingleContextMenuSelection(),AD=mstrmojo.desc(190,"Remove"),AP,AM,AL=!Ar||!w.isMDXDataset(Ar),As=AH.isInFilterPanel()&&mstrApp&&mstrApp.isInVFInteractMode,Ac={did:At.id||AT&&AT.did,t:Aa||AT&&AT.t,st:Am||AT&&AT.st,attId:AT&&AT.attId,ndetype:AT&&AT.ndetype},AU=Ac.attId&&E(At)&&z.getNDEFormsFromDataset(Ac.attId),u={n:At.n,did:At.id,t:Ac.t,st:Ac.st,ndeForms:AU},Ab={de:AE,ndeInfo:u,xtab:AH,data:At,cfg:AJ,td:AJ.td,singleClick:AC},AF=AH.isCustomSort;this.selectedNode=AJ.td;if(AJ.onClose){this.addPopupHandlers(AH.id,mstrmojo.emptyFn,AJ.onClose);}if(!AB){if(AF){if(Ai&&!AX){q.call(this,At,Ab);}}else{if(As){this.addSortMenuItem(Ab);return ;}var AO=AH.model.getAttributeFormsInTemplate(At.id||Ao.title.id).length,y=At.fix;if(AO>1&&(!Al||Ac.ndetype===D.DssRecursiveDerivedElement)){var AA="pivot";var Ak=AT&&AT.t||Aa||"";var AG=!Aj&&!mstrApp.isInVFConfigMode&&x&&AK===b.LIST;if(!Y(At)&&!E(At)&&!AG){y=Ao.title.fix||(Ab.data.fi||0)+1;AA+="Form";}if(y&&!AX&&!mstrApp.isDossier){if(y>1){this.addMenuItem(mstrmojo.desc(5362,"Move Left"),"",function(){Ap(Ab,AA,["l",Ak]);});}if(y<AO){this.addMenuItem(mstrmojo.desc(5363,"Move Right"),"",function(){Ap(Ab,AA,["r",Ak]);});}this.addSeparator();}}if(Ai&&!AX){q.call(this,At,Ab);}if(!Aj&&!mstrApp.isInVFConfigMode){if(c(At)&&At.um){this.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){Ap(Ab,"derivedMetric",["edit"]);});}if(Y(At)){if(AH.getDerivedAttribute(At.id)&&AL){this.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){Ag.editDerivedAttribute({item:{did:Ac.did,t:Ac.t,n:At.n}});});}}if(this.isActionAvailable(At,G.GROUP_EDIT)&&AT){this.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"",function(){Ap(Ab,"derivedElementsEdit",[Al]);});}if(x&&AK===b.CALCULATION&&!Ai){this.addSubMenuItem(mstrmojo.desc(12196,"Edit Calculation"),"",this.id,a,W.copy(Ab,{isEdit:true}));}}this.addSeparator();this.addSortMenuItem(Ab);if(AH.model.getAllDrillPathsForCell(At).length>1){this.addSeparator();}if(!Aj&&!mstrApp.isInVFConfigMode){if(x&&AK===b.LIST){this.addSeparator();this.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"",function(){Ap(Ab,"derivedElementsEdit",Al);});}if(x&&AK===b.LIST){this.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"",function(){Ap(Ab,"removeQuickDE",Al);});}if(x&&AK===b.RESIDUE){this.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"",function(){Ap(Ab,"separateOthers",[AE]);});}if(Y(At)&&!Ag.isDynamicLink(Ac)){this.addSeparator();if((!Ar||!p.isCGorCon(Ac,Ar))&&AL&&mstrmojo.resolveFeature(e.INSERT_NEW_METRIC)){this.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){Ap(Ab,"newDerivedAttribute");});this.addMenuItem(mstrmojo.desc(14717,"Create Links..."),"",function(){Ap(Ab,"newDynamicLinkAttr");});}if(this.isActionAvailable(At,G.GROUP_EDIT)&&!AT){this.addMenuItem(mstrmojo.desc(13295,"Create Groups..."),"",function(){Ap(Ab,"derivedElementsEdit",[Al]);});}this.addSeparator();}}if(AH.isLinkedFilterEnabled&&AH.isLinkedFilterEnabled()){var t=function(){AH.handleContextMenuSelectionData(true);};this.addSeparator();this.addMenuItem(mstrmojo.desc(15070,"Go to Targets"),"",t);}if(!AX&&this.isActionAvailable(At,G.KEEP_ONLY)&&AW){this.addSeparator();var AR=function(Av){return function(){Ap(Ab,"keepOnlyOrExclude",[Av]);};};if(!mstrApp.isInVFInteractMode){this.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"",AR(true));this.addMenuItem(mstrmojo.desc(3946,"Exclude"),"",AR(false));}}if(!AX&&!(mstrApp.isInVFConfigMode||mstrApp.isInVFInteractMode)&&!Ai&&mstrmojo.resolveFeature(e.WEB_DRILL_AND_LINK)){this.addDrillMenuItem(Ab);}if(At&&At.mix===undefined&&Ao.isSrcTitle&&Aa!==-1&&Aa!==1&&!(Aa===47&&Am===12032)){this.addShowTotalMenuItem(Ab);}var AY=At.axis;if(!Aj){if(Ag.shouldShowDisplayFormsMenu(Ac)){this.addPopupMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),this.id,function(){return p.getDisplayFormsMenu(Ac,AH,AH.model.docModel.datasets,function(Av){Ag.submitDropZoneUpdates(Av);});});}this.addSeparator();if(!mstrApp.isInVFConfigMode&&(AC||Aq)&&this.isActionAvailable(At,n)&&P.call(this,Ab)&&mstrmojo.resolveFeature(e.INSERT_NEW_METRIC)){this.addMenuItem(mstrmojo.desc(1911,"Group"),"",function(){Ap(Ab,"derivedElementGroup");});}var Ae=l(AT)&&g.call(this,Ab,x,Aq);if(!!Ae.isAddToGroupSupported){this.addAddToGroupMenuItem(Ab.xtab,AT,Ae.group);}if(!mstrApp.isInVFConfigMode&&c(At)&&mstrmojo.resolveFeature(e.INSERT_NEW_METRIC)){var AS=AH&&AJ.td&&AH.getCellForNode(AJ.td)._e,An={did:AS.oid,t:AS.otp},AV={zone:{id:-1,items:AH.model.data.gsi.mx},axis:AY,idx:At.idx,item:An};this.addSeparator();if(w.findDatasetIdFromUnit(An.did)&&!w.isFromSolrCube(An.did)&&!w.isFromMDXCube(An.did)){this.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"",Af,Ag.getAggregateByMetricSubMenu,AV);this.addSeparator();}this.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",Af,Ag.getCalculationEditorCfg,AV);this.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"",Af,Ag.getShortcutMetricSubMenu,AV);this.addMenuItem(mstrmojo.desc(13624,"Create Metric..."),"",function(){Ap(Ab,"derivedMetric",["editNew"]);});}if(!c(At)&&!Aa&&mstrmojo.resolveFeature(e.INSERT_NEW_METRIC)){A.call(this,AJ);}this.addSeparator();if(!AX){B.call(this,Ab);}if(c(At)||Y(At)){this.addThresholdMenuOptions(Ab);}}if(c(At)){this.addToggleMenuItem(mstrmojo.desc(6193,"Show Totals"),"",function(){Ag.showQuickSubtotals();},function(){Ag.hideDefinedSubtotals();},null,Ag.hasVisibleSubtotals());}if(!AX&&this.isActionAvailable(At,G.KEEP_ONLY)&&AW&&!mstrApp.isDossier&&!AH.excludeData){this.addSeparator();this.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"",function(){mstrmojo.vi.ui.ViewDataDialog.open(AH.parent,true);});}var s=AH.gridData.gts,Ah,AQ=[s.rowSubPos,s.colSubPos],AZ,Au;if(AX){Au=AY===U;AZ=AQ[AY-1];if(AZ===d){Ah=Au?mstrmojo.desc(12206,"Move to Bottom"):mstrmojo.desc(13900,"Move to Right");AQ[AY-1]=C;}else{Ah=Au?mstrmojo.desc(12205,"Move to Top"):mstrmojo.desc(13901,"Move to Left");AQ[AY-1]=d;}this.addMenuItem(Ah,"",function(){z.moveSubTotals(Ab,AQ);});}if(this.isActionAvailable(At,G.TOTAL_HEADER)&&At.mix===undefined){AP=function(){Ap(Ab,"removeTotal");};}if(!Aj&&x){if(AK===b.LIST){AM=function(){Ap(Ab,"renameDEList",Al);};}else{if(AK===b.CALCULATION&&!mstrApp.isInVFConfigMode){AM=function(){this.delegateActionToXtab(Ab,"editDECalculation");}.bind(this);AP=function(){this.delegateActionToXtab(Ab,"removeQuickDE",Al);}.bind(this);AD=mstrmojo.desc(12197,"Delete Calculation");}}}this.addSeparator();}}if(!Aj&&!AF){var AN=AH.parent;if(AN.addFormatMenuItem){AN.addFormatMenuItem(this,{info:Ao,isMetricHeader:c(At)},function(Av){var Aw=AH.highlightFormatTarget(Av,AX||AB);AH.openPopup(AH.edtModel.getFormattingToolbar(Av,AJ.td,{onClose:function(){AH.restoreHighlights(Aw);}}));});}}if(!AB&&!AF){if(((Ao&&Ao.isSrcTitle)||c(At))&&(!Aj||!!mstrmojo.resolveFeature(e.WEB_DRILL_AND_LINK))){this.addPopupMenuItem(mstrmojo.desc(14003,"Replace with"),Af,Ag.getReplaceSubMenu,"",{zone:Ag.getZoneForObject(Ao.title.id||At.id),item:Ac});}if(AM){this.addMenuItem(mstrmojo.desc(2453,"Rename..."),"",AM);}if(AP&&!(Ai&&AK===b.CALCULATION)){this.addMenuItem(AD,"",AP);}if(!Aj){if((Ao&&Ao.isSrcTitle)||c(At)){if(!AM){this.addMenuItem(mstrmojo.desc(2453,"Rename..."),"",function(){Ap(Ab,"renameUnit");});}if(!AP){this.addMenuItem(AD,"",function(){Ap(Ab,"removeUnit");});}}}var AI=W.walk("node.data.olm",AH)&&!(W.walk("node.data.rw.row.bc",AH)>0);if(AH.isCopySupported&&!AX&&!Y(At)&&!c(At)&&!AI){this.addSeparator();this.addMenuItem(mstrmojo.desc(14388,"Copy Rows"),"",function(){Ap(Ab,"copyRowsFromXtab",[AH.cmSelCells]);});}}this.supportsScroll=true;this.isHostedWithin=false;this.maxHeight=V.getMaxScrollHeight();},addAddToGroupMenuItem:function(w,t,u){var s=(t&&t.des)||[];this.addPopupMenuItem(mstrmojo.desc(14553,"Add to Group"),this.id,k,"",{xtab:w,deObject:t,groups:u?[u]:s});},addDrillMenuItem:function J(s){var x=s.xtab,w=s.data,t=x.model.getUnHiddenDrillPathsForCell(w),u=t.length;if(!(c(w)||w.mix!==undefined)){if(u>1){this.addSubMenuItem(mstrmojo.desc(145,"Drill"),"",this.id,r,s);}else{if(u===1){this._super(s,t[0]);}else{this.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);}}}},getSubtotalEditorConfig:function H(t){var s=this._super(t),u=t.data,w=t.xtab;s.fnOk=w.getOnSubtotalsChangeFn(s,u);return s;},addThresholdMenuOptions:function L(t){var s=t.data._e||t.data,u={did:s.oid||s.id,t:s.otp,n:s.n};this.xtab.model.buildThresholdMenuOptions(this,{item:u},false,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.rw.xtab.XtabMenuConfig");var A=mstrmojo.rw.xtab.XtabMenuConfig.ACTION_TYPES;mstrmojo.vi.ui.rw.xtab.ViewDataXtabMenuConfig=mstrmojo.declare(mstrmojo.vi.ui.rw.xtab.XtabMenuConfig,null,{scriptClass:"mstrmojo.vi.ui.rw.xtab.ViewDataXtabMenuConfig",buildXtabMenuConfig:function B(C){this._super(C);this.menus=this.menus.filter(function(D){return D.ctxt&&!D.ctxt.isTotals&&(this.isActionAvailable(D.ctxt.data,A.SORT)||this.isActionAvailable(D.ctxt.data,A.PIVOT));},this);},addDrillMenuItem:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var N=mstrmojo.gm.EnumTRFManipulations;var J=mstrmojo.array,C=mstrmojo.hash,M=mstrmojo.func.wrapMethods,G=mstrmojo.func.composite,I=mstrmojo.VisEnum.GMLegendFormatingPropertyTag;var D={silent:false,undo:mstrmojo.emptyFn,redo:mstrmojo.emptyFn};function K(O){return O.model.controller.cmdMgr;}function L(){return(this.getDocModel&&this.getDocModel())||this.model.docModel;}function H(){return{success:function O(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function E(P,R){var O,V,Q,S,U={};U.tks=this.k;U.selectorObjects=P;U.keepOnly=!!R;U.isDocVis=true;O=L.call(this);V=O.getDataService();Q=V.getGMViewFilterAction(U);S=O.getSliceCallback(U);return{action:Q,callbacks:S};}function B(Q,P){var O,S,R;O=L.call(this);R=O.getDataService();if(!this.isXMLDirty()){R.submitUpdates(Q,P);}else{S=this.getPersistAction();R.submitUpdates([Q,S],P);this.resetXMLDirtyFlag();}}function A(){var c=this.modelData||this.model.data,S=c.k,a,Z="FormattingWidget",V,U,Y,P,Q,R=[],X=[],W=this.edtModel;if(!c){console.log("warning: modelData is missing");return null;}var b=function(e,g){var d=U.createElement(g),f;if(e instanceof Object){for(f in e){if(e.hasOwnProperty(f)){var h=b(e[f],f);if(h){d.appendChild(h);}}}}else{d.setAttribute("value",e);}return d;};var O=function(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;");};Y=this.createWidgetPropsXML?this.createWidgetPropsXML():null;if(!Y||Y.length===0){V=this.getProperties(S);if(this.useCompatibleXML){U=(new DOMParser()).parseFromString("<widgetProps></widgetProps>","text/xml");U.firstChild.appendChild(b(V,"fmt"));}else{U=(new DOMParser()).parseFromString("<props><widgetProps></widgetProps></props>","text/xml");U.firstChild.firstChild.appendChild(b(V,"fmt"));}Y=(new XMLSerializer()).serializeToString(U);}P=O(Y);Q={act:"setProperty",nodeKey:S,prs:Z,pri:4,v:P};R.push(Q);return R;}function F(P,Q,O,U){if(!(U instanceof Function)){return D;}var S=this.id;function R(V){return function(){var X=mstrmojo.all[S],W;if(!X){return ;}W=X.getProperties();W[P]=V;U.call(X,V,true);X.getDocModel().selectVIUnit(X.parent.id,true);};}return{silent:true,undo:R(O),redo:R(Q)};}mstrmojo._VizSelectionHelper=mstrmojo.provide("mstrmojo._VizSelectionHelper",{postBuilderingCalled:false,listenToUpdateColorMap:function(R){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var Q=this,P,O=(Q.getDocModel&&Q.getDocModel())||Q.model.docModel;if(O){return O.attachEventListener("colorMapChanged",Q.id,function(U){P=Q.parent&&Q.parent.parent;if(Q.forceUpdateColorMap||(P&&P.isPanelDisplaying())){R.call(Q);}else{var S=P.attachEventListener("panelDisplaying",Q.id,function(V){if(Q.postBuilderingCalled){R.call(Q);}P.detachEventListener(S);});}});}},detachUpdateColorMapListener:function(P){if(!P){return ;}var O=(this.getDocModel&&this.getDocModel())||this.model.docModel;O.detachEventListener(P);},updateTargets:function(P){var S={},Q=this,O=L.call(this);S.fromGM=true;S.type=1;S.src=this.k;S.selectorObjects=P;function R(W){var U=Q.modelData||Q.model.data,V=U.sc;if(V!==undefined){return V[W];}return undefined;}S.keepOnly=true;S.ck=R.call(this,"ck");S.keyContext=S.ck;S.tks=R.call(this,"tks");S.ckey=R.call(this,"ckey");S.isDocVis=true;S.include=true;S.showall=R.call(this,"showall");O.slice(S);},updateAfterViewFilter:function(Q,O){var W,V,P,U,S,X,R;W=L.call(this);V=W.getDataService();U=E.call(this,Q,O);P=U.action;S=U.callbacks;R=this.model.controller||W.controller;if(this.currKeepOnlyAction){X=[C.clone(this.currKeepOnlyAction)];}else{X=E.call(this,[],false).action;}this.currKeepOnlyAction=P;R.submitUndoRedoUpdates([P],X,S);},updateAfterKeepOnly:function(Q){var P=L.call(this),O=this.model.controller||P.controller,R=M(O._getXtabCallback(this),H.call(this));O.applyKeepOnly(this,R,{keepOnly:Q,data:this.getContextMenuSelections()},Q?-2:undefined);},updateAfterKeepOnlyForMultiTemplate:function(Q){var P=L.call(this),O=this.model.controller||P.controller,R=M(O._getXtabCallback(this),H.call(this));O.applyKeepOnlyForMutilTemplate(Q,R,true);},updateAfterDrill:function(O,d,Z){var a=this,e=L.call(this),c=e.getDataService(),U=c.newUpdate(),R=this.getContextMenuSelections(),P=Z||this,S=P.model,V=P.model.data||P.node.data,Y=S.getSelectorDataFromTemplateLimit(V.tpl).concat({keepOnly:true,data:R}),Q=e.getKeepOnlyOrExcludeAction(V.k,Y),W=a.model.controller||e.controller,X=W._getXtabCallback(a);U.add(O,M(d,X));U.add(Q,H.call(a));K(a).execute({execute:function b(){this.submitUpdate(U);},urInfo:{callback:U.callback}});},updateAfterSort:function(R){var P=this,O=L.call(this),S=O.getDataService(),U=O.getSliceCallback({tks:P.k});K(P).execute({execute:function Q(){var W=S.newUpdate(this,undefined),V={act:"sortGM",nodeKey:P.k,subActions:R,partialUpdate:{nodes:[P.k]}};W.add(V,U,undefined);if(P.isXMLDirty()){W.addActions(P.getPersistAction());}this.submitUpdate(W,undefined);},urInfo:{callback:U}});},updateAfterAction:function(U,O,P,b,Y){if(!U){return ;}var W=this,Q=W.parent&&W.parent.id,c=W.model.docModel,V=W.model.controller||c.controller,a,Z,S={},X,R=Y||D;if(P){a=mstrmojo.emptyFn;X=function(){this.submitSilent(U);};}else{a=c.getSliceCallback({tks:this.k});a.success=G([a.success,function(){c.selectVIUnit(Q,true);}]);X=function(){this.submit(U,a,S);};}Z=V._getXtabCallback(W);if(O){a=M(a,O);Z=M(Z,O);}Z.success=G([Z.success,function(){c.selectVIUnit(Q,true);}]);if(P){C.copy(mstrmojo.DocDataService.SUPPRESS_DATA,S);}if(b){C.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,S);}K(this).execute({execute:X,urInfo:{silent:R.silent,callback:Z,redo:R.redo,undo:R.undo}});},getProperties:mstrmojo.emptyFn,getSetPropertiesAction:A,updateAfterPropertiesChange:function(P,Q,O,R){this.updateAfterAction(A.call(this),P,Q,O,R);},setProperty:function(W,R,U){var P=U.callback,Q=!!U.suppressData,Y=U.requestDefinition,S=U.clientUndoRedoCallback,X=this.getProperties(),O=X[W],V;if(W===I.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorMap(this.colorSqureIdentity.comb,R);}}else{if(X&&(X[W]===undefined||X[W].toString()!==R.toString())){X[W]=R;V=F.call(this,W,R,O,S);this.updateAfterPropertiesChange(P,Q,Y,V);}}},showData:function(O){if(!this.gridData){this.gridData=this.model.data;}mstrmojo.vi.ui.ViewDataDialog.open(this.parent,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.WidgetMatrix","mstrmojo.gm.GMEnums","mstrmojo.util.ui._HostsSplitter","mstrmojo.util.ui._LassoSelector");var K=Math,S=mstrmojo.chart,I=mstrmojo.VisUtility,V=1,P=mstrmojo.hash,U=mstrmojo.array,G=2,C=mstrmojo.VisEnum.ControlType,X=mstrmojo.gm.EnumDockPosition,A="-1";function M(c,Z,b){var d=document.createElement("div"),a=c===X.LEFT||c===X.RIGHT,Y=a?"gm-resizer-v":"gm-resizer-h";d.setAttribute("class",Y);d.setAttribute("type",C.SPLITTER);d.setAttribute("dockPosition",c);d.setAttribute("splitterType",Z);d.setAttribute("splitterId",b);d.setAttribute("draggable","false");return d;}function L(d,f,Y,g){if(!d){return ;}var a,k,b,j,e=d.style,l=f===X.TOP,Z=f===X.BOTTOM,h=f===X.LEFT,c=f===X.RIGHT;if(l||Z){a=Y;k=V;b=0;j=-G;if(Z){j+=g;}else{j-=V;}}else{if(h||c){a=V;k=g;j=0;b=-G;if(c){b+=Y;}else{j-=V;}}}e.left=b+"px";e.top=j+"px";e.width=a+"px";e.height=k+"px";}function N(Y){return Y?Y.firstChild:null;}function E(Y){return(Y&&Y.firstChild)?Y.firstChild.childNodes:[];}function W(d,g,Y,f,j,c){var e,a=g.length,b,h,Z=c[Y];if(!Z){Z=f.getNormalizedFormElementId(Y);c[Y]=Z;}for(e=0;e<a;e++){h=g[e].id;if(h===Y){return true;}b=c[h];if(!b){b=f.getNormalizedFormElementId(h);c[h]=b;}if(j&&d!==A){if(f.compareNormalizedElementsId(b,Z)){return true;}}else{if(b===Z){return true;}}}return false;}function R(y,s,c,Z,x){var q,k,p,l,w,g,o,t=y.getSelectedObjectInfo(true),a,r,b={},f,d=s.length,e,Y,h,u;k=t.length;for(q=0;q<k;q++){r=String(t[q].tid);if(Z&&r!==A){b[q]=[r].concat(c.getLinkedAttributes(r)||[]);}else{b[q]=[r];}}for(f=0;f<d;f++){e=s[f];Y=true;h=false;for(g in e){if(e.hasOwnProperty(g)){o=e[g];a=true;u=false;for(q=0;q<k;q++){w=b[q];for(p=0,l=w.length;p<l;p++){if(w[p]===g){u=true;if(!W(g,o,t[q].eid,c,Z,x)){a=false;}else{h=true;}break;}}if(u){break;}}if(!a){Y=false;break;}}}if(Y&&h){return true;}}return false;}function O(Z){var a,c,b={},Y=Z.identity,d=Y.getSelectedObjectInfo(false),e=d.length;for(a=0;a<e;a++){c=d[a];if(b[c.tid]===undefined){b[c.tid]=[{id:c.eid,n:c.v}];}else{if(c.tid===-1){b[c.tid].push({id:c.eid,n:c.v});}else{b[c.tid][0].n+=(":"+c.v);}}}return b;}mstrmojo.gm.GMContainer=mstrmojo.declare(mstrmojo.WidgetMatrix,[mstrmojo.util.ui._HostsSplitter,mstrmojo.util.ui._LassoSelector],{scriptClass:"mstrmojo.gm.GMContainer",enableLassoSelect:false,useAsSelectorOrBrushes:false,shouldDrawShapeFlag:true,rowSplitterEnabled:true,colSplitterEnabled:true,useDropDownBtn:false,useOwnSplitter:true,minChartHeight:20,minChartWidth:20,init:function Q(Y){this.hSplitters=[];this.vSplitters=[];if(this._super){this._super(Y);}this.API.lassoSelected=undefined;this.API.lassoSelecting=undefined;},postBuildRendering:function(){if(this._super){this._super();}var Z=this.domNode,Y=this.domCanvas,a=this.styles,c=this.splitterConfig;if(a){I.applyStyles2DomNode(Z,a);}if(c){var b=M(c.dockPosition,c.splitterType,c.splitterId);Z.appendChild(b);this.registerSplitter(b);L(b,c.dockPosition,this.width,this.height);this.splitter=b;}if(this.enableLassoSelect){this.registerLassoSelector(Y,[C.SPLITTER],this.useDropDownBtn);}},getSplitterInfo:function F(Y){if(!Y){return{};}var e=Y.getAttribute("isInChart")==="yes",h={};if(e===true){var f=parseInt(Y.getAttribute("id"),10),b=Y.getAttribute("isRowIndex")==="yes",c=b?this.API.getRowSpan:this.API.getColSpan,k=c(f,this.depth)[0];h.min=b?(this.getRowPosition(k)+this.minChartHeight):(this.getColPosition(k)+this.minChartWidth);h.index=f;h.isRowIndex=b;h.isInChart=true;}else{var g=this.splitterConfig.dockPosition,j=g===X.LEFT,d=g===X.RIGHT,l=g===X.TOP,Z=g===X.BOTTOM,a=this.splitterConfig;if(j){h.max=K.max(this.width-this.minChartWidth,0);}else{if(d){h.min=this.minChartWidth;}else{if(l){h.max=K.max(this.height-this.minChartHeight,0);}else{if(Z){h.min=this.minChartHeight;}}}}if(a){h.dock=a.dockPosition;h.type=a.splitterType;h.id=a.splitterId;}}return h;},splitterMoved:function(Y,c){if(Y===0){return ;}if(c.isInChart){var Z=c.index,b=c.isRowIndex,a=this.manager;if(b){a.resizeRow(this,Z,Y);a.doUpdateInChartSplitters(true,false);}else{a.resizeCol(this,Z,Y);a.doUpdateInChartSplitters(false,true);}}else{this.manager.raiseEvent({name:"splitterMoved",position:Y,info:c});L(this.splitter,this.splitterConfig.dockPosition,this.width,this.height);}},enableSplitter:function(Y){var Z=this.splitter;if(Z){Z.style.display=Y?"block":"none";}},clearCharts:function(){this.hSplitters=[];this.vSplitters=[];if(this._super){this._super();}},resize:function(Z,Y){if(this._super){this._super(Z,Y);}if(this.splitterConfig){L(this.splitter,this.splitterConfig.dockPosition,this.width,this.height);}},resizeAbs:function(Y,Z){if(this._super){this._super(Y,Z);}if(this.splitterConfig){L(this.splitter,this.splitterConfig.dockPosition,Y,Z);}},updateCharts:function(){if(this._super){this._super();}this.doUpdateInChartSplitters(true,true);},doUpdateChartsGlobally:function(){if(this._super){this._super();}},enableRowSplitter:function(Y){if(Y!==this.rowSplitterEnabled){this.rowSplitterEnabled=Y;this.doUpdateInChartSplitters(true,false);}},enableColSplitter:function(Y){if(Y!==this.colSplitterEnabled){this.colSplitterEnabled=Y;this.doUpdateInChartSplitters(false,true);}},createRowSplitter:function D(Y){var Z=document.createElement("div");Z.setAttribute("class","gm-resizer-h");Z.setAttribute("type",C.SPLITTER);Z.setAttribute("isInChart","yes");Z.setAttribute("isRowIndex","yes");Z.setAttribute("draggable","false");Z.setAttribute("id",String(Y));return Z;},createColSplitter:function B(Z){var Y=document.createElement("div");Y.setAttribute("class","gm-resizer-v");Y.setAttribute("type",C.SPLITTER);Y.setAttribute("isInChart","yes");Y.setAttribute("isRowIndex","no");Y.setAttribute("draggable","false");Y.setAttribute("id",String(Z));return Y;},positionRowSplitter:function J(d,Z,Y,c){var a=Y-Z,b=c-G-V;d.style.cssText="width:"+a+"px; height:"+V+"px; left:"+Z+"px; top:"+b+"px; display:block";},positionColSplitter:function H(d,b,a,Z){var Y=a-b,c=Z-G-V;d.style.cssText="width:"+V+"px; height:"+Y+"px; left:"+c+"px; top:"+b+"px; display:block";},doUpdateInChartSplitters:function(s,r){if(!this.useOwnSplitter){return ;}this.calculateBBox();var q,d,c,h,p,Y=this.domCanvas,g=this.nRows,j=this.nCols,t=this.hSplitters,n=this.vSplitters,o=this.wAccArr,a=this.hAccArr,e=this.doRowIntersectionCheck(),k=this.doColIntersectionCheck(),b=e.start,l=e.end,f=k.start,Z=k.end;if(s){p=this.rowSplitterEnabled;for(q=0;q<g;q++){h=n[q];if(q>=b&&q<=l&&q!==g-1&&this.getActiveFlag(q+1,f)===true){c=a[q];if(h===undefined){h=this.createRowSplitter(q);Y.appendChild(h);this.registerSplitter(h);n[q]=h;}this.positionRowSplitter(h,K.max(this._x1,0),K.min(this._x2,this.canvasW),c);h.style.display=p?"block":"none";}else{if(h){h.style.display="none";}}}}if(r){p=this.colSplitterEnabled;for(q=0;q<j;q++){h=t[q];if(q>=f&&q<=Z&&q!==j-1&&this.getActiveFlag(b,q+1)===true){d=o[q];if(h===undefined){h=this.createColSplitter(q);Y.appendChild(h);this.registerSplitter(h);t[q]=h;}this.positionColSplitter(h,K.max(this._y1,0),K.min(this._y2,this.canvasH),d);h.style.display=p?"block":"none";}else{if(h){h.style.display="none";}}}}},filterShapes:function(f,Y,q,s){var k=this.APIOwner.model,d=this.APIOwner.normalizedIdCache,u=!!k.docModel.als,p=this.getChart(Y,q);if(!p){this.doUpdateCharts(Y,Y,q,q,false);p=this.getChart(Y,q);}var h,e,b,l,Z,o,a=E(p)||[],t=a.length;for(h=0;h<t;h++){l=a[h];if(!l){continue;}Z=l.childNodes;b=Z.length;for(e=0;e<b;e++){o=Z[e];if(o.getAttribute("type")==="shape"){if(R(o.identity,s,k,u,d)){f.push(o);}}}}},efficientFilterShapes:function(b,k,y,u){var d=this.APIOwner.model,x=this.APIOwner.normalizedIdCache,Z=!!d.docModel.als,h=this.getChart(k,y),AB,AA,o,e,z,s;if(!h){this.doUpdateCharts(k,k,y,y,false);h=this.getChart(k,y);}var q,p,l,t,f,Y,w=E(h)||[],a=w.length;for(q=0;q<a;q++){t=w[q];if(!t){continue;}f=t.childNodes;l=f.length;for(p=0;p<l;p++){Y=f[p];if(Y.getAttribute("type")==="shape"){AB=Y.identity;if(AB.isPie){AA=AB.sPieDP.graphCell;o=AA.gID;e=AA.sID;z=AB.sliceIdx;s=b[o]&&b[o][e]&&b[o][e][z];if(s===undefined){if(b[o]===undefined){b[o]={};}if(b[o][e]===undefined){b[o][e]={};}b[o][e][z]=R(AB,u,d,Z,x);}}else{AA=AB.gc;o=AA.gID;e=AA.sID;s=b[o]&&b[o][e];if(s===undefined){if(b[o]===undefined){b[o]={};}b[o][e]=R(AB,u,d,Z,x);}}}}}},selectHighLightShapes:function(a,f,t,h){var e=this.getChart(f,t),x,w,l,b,u;if(!e){this.doUpdateCharts(f,f,t,t,false);e=this.getChart(f,t);}var p,o,k,q,d,Y,s=E(e)||[],Z=s.length;for(p=0;p<Z;p++){q=s[p];if(!q){continue;}d=q.childNodes;k=d.length;for(o=0;o<k;o++){Y=d[o];if(Y.getAttribute("type")==="shape"){x=Y.identity;if(x.isPie){w=x.sPieDP.graphCell;u=x.sliceIdx;}else{w=x.gc;}l=w.gID;b=w.sID;if(a[l]===undefined){continue;}if(x.isPie){if(a[l][b]===undefined){continue;}if(a[l][b][u]){h.push(Y);}}else{if(a[l][b]){h.push(Y);}}}}}},getSelectionHash:function(a){var Y=P.keyarray(a).sort(),Z=[],c,b=this.APIOwner;U.forEach(Y,function(d){c=[];U.forEach(a[d],function(e){c.push(b.model.getNormalizedFormElementId(e.id));},b);Z.push(d+"-"+c.sort().join("@"));},b);return Z.join("#");},constructShapeMap:function(k,Y,p){var o=this.getChart(Y,p);if(!o){this.doUpdateCharts(Y,Y,p,p,false);o=this.getChart(Y,p);}var f,e,b,h,Z,l,s,d,a=E(o)||[],q=a.length;for(f=0;f<q;f++){h=a[f];if(!h){continue;}Z=h.childNodes;b=Z.length;for(e=0;e<b;e++){l=Z[e];if(l.getAttribute("type")==="shape"){s=O.call(this,l);s=this.getSelectionHash(s);d=k[s];if(d===undefined){k[s]=[];k[s].push(l);}else{d.push(l);}}}}},intersectionCheckOnChart:function(AG,AW,AV,q,p,Ad,Ac){var Ab=this.getChart(AW,AV),c=N(Ab);if(!Ab||!c){return ;}var AT,AQ,AR,t,AF,AE,AO,AY,AA=Ab.offsetLeft,z=Ab.offsetTop,AB=Ab.offsetWidth,AH=Ab.offsetHeight,l=E(Ab),o=l.length,s,AS;q=Math.max(q-AA,0);p=Math.min(p-AA,AB);Ad=Math.max(Ad-z,0);Ac=Math.min(Ac-z,AH);var d=S.ChartConstants.kPI,b=function(k,j,r,n,h,g){return h>=k&&h<=j&&g>=r&&g<=n;},f=function(h,g,k,j){return(k-h)*(k-h)+(j-g)*(j-g);},AI=function(g,j,h){return g>=j&&g<=h;},Z=function(g,j,h){while(g<h){g+=d*2;}while(g>h){g-=d*2;}return !j||!h||g>=j;},a=function(h,g){var k=h.x2-h.x1,j=h.y2-h.y1,r=g.x2-g.x1,n=g.y2-g.y1,w=function(x,Af,Ae,y){return x*y-Af*Ae;};return w(k,j,g.x1-h.x1,g.y1-h.y1)*w(k,j,g.x2-h.x1,g.y2-h.y1)<=0&&w(r,n,h.x1-g.x1,h.y1-g.y1)*w(r,n,h.x2-g.x1,h.y2-g.y1)<=0;},AC=function(j,n,h,k,g){return a({x1:j,y1:n,x2:j,y2:k},g)||a({x1:j,y1:n,x2:h,y2:n},g)||a({x1:h,y1:n,x2:h,y2:k},g)||a({x1:j,y1:k,x2:h,y2:k},g);},e=function(j,Ae,h,y,w,k,g,x,Af){var n=function(Aj,Ai){var r,Ah,Ag;if(Math.abs(Aj)>g){return false;}if(Ai){r=Math.acos(Aj/g);Ag=k+g*Math.sin(r);return AI(Ag,Ae,y)&&Z(r,x,Af)||AI(2*k-Ag,Ae,y)&&Z(-r,x,Af);}else{r=Math.asin(Aj/g);Ah=w+g*Math.cos(r);return AI(Ah,j,h)&&Z(r,x,Af)||AI(2*w-Ah,j,h)&&Z(d-r,x,Af);}};return n(j-w,true)||n(Ae-k,false)||n(h-w,true)||n(y-k,false);};for(AR=0;AR<o;AR++){AY=l[AR];if(!AY){continue;}AQ=AY.childNodes.length;for(AT=0;AT<AQ;AT++){t=AY.childNodes[AT];if(t.getAttribute("type")==="shape"){s=t.tagName;AS=false;if(s==="rect"){var AL=parseInt(t.getAttribute("x"),10),AK=parseInt(t.getAttribute("y"),10),AM=parseInt(t.getAttribute("width"),10),AX=parseInt(t.getAttribute("height"),10);AS=Math.max(AL,0)<=p&&Math.min(AL+AM,AB)>=q&&Math.max(AK,0)<=Ac&&Math.min(AK+AX,AH)>=Ad;}else{if(s==="circle"){AF=parseInt(t.getAttribute("cx"),10);AE=parseInt(t.getAttribute("cy"),10);AO=parseInt(t.getAttribute("r"),10);AS=f(AF,AE,q,Ad)<AO*AO||f(AF,AE,q,Ac)<AO*AO||f(AF,AE,p,Ad)<AO*AO||f(AF,AE,p,Ac)<AO*AO||b(q-AO,p+AO,Ad,Ac,AF,AE)||b(q,p,Ad-AO,Ac+AO,AF,AE);}else{if(s==="path"){AF=t.sX;AE=t.sY;AO=t.sR||t.sOutR;if(!!AO){var AP=t.sInR||0,Y=t.sRadStart,u=t.sRadEnd,AD=!!t.sRadStart,AN=AD&&(AC(q,Ad,p,Ac,{x1:AF+Math.cos(Y)*AP,y1:AE+Math.sin(Y)*AP,x2:AF+Math.cos(Y)*AO,y2:AE+Math.sin(Y)*AO})||AC(q,Ad,p,Ac,{x1:AF+Math.cos(u)*AP,y1:AE+Math.sin(u)*AP,x2:AF+Math.cos(u)*AO,y2:AE+Math.sin(u)*AO}));AS=AN||e(q,Ad,p,Ac,AF,AE,AP,Y,u)||e(q,Ad,p,Ac,AF,AE,AO,Y,u)||b(q,p,Ad,Ac,AF+Math.cos(Y)*AP,AE+Math.sin(Y)*AP)||AI(f(q,Ad,AF,AE),AP*AP,AO*AO)&&Z(Math.atan((Ad-AE)/(q-AF))+(q>AF?0:d),Y,u);}}else{if(s==="polyline"||s==="polygon"){var AJ=t.pointList||[],AU=AJ.length,Aa,AZ;if(AU>0){AS=b(q,p,Ad,Ac,AJ[0].x,AJ[0].y);for(AW=1;AW<AU&&!AS;AW++){Aa=AJ[AW-1];AZ=AJ[AW];AS=AC(q,Ad,p,Ac,{x1:Aa.x,y1:Aa.y,x2:AZ.x,y2:AZ.y});}if(s==="polygon"&&!AS){AS=(new S.Point2D({x:q,y:Ad})).IsInPolygon(AJ)||AC(q,Ad,p,Ac,{x1:AZ.x,y1:AZ.y,x2:AJ[0].x,y2:AJ[0].y});}}}}}}if(AS){AG.push(t);}}}}},lassoSelecting:function(){var Y=this.API.lassoSelecting;if(Y){Y.call(this.APIOwner);}},lassoSelected:function(a){if(!a||a.left===undefined||a.top===undefined||a.width===undefined||a.height===undefined){return ;}var g,e,h,o,c,k,f,p,d=[],q=[],b=this.API.lassoSelected,Z=a.left,n=a.top,Y=Z+a.width,l=n+a.height;h=this.doRowIntersectionCheck(n,l);o=this.doColIntersectionCheck(Z,Y);c=h.start;k=h.end;f=o.start;p=o.end;for(g=c;g<=k;g++){for(e=f;e<=p;e++){d.push({row:g,col:e});this.intersectionCheckOnChart(q,g,e,Z,Y,n,l);}}a.selectedCharts=d;a.selectedShapes=q;if(b){b.call(this.APIOwner,a);}},lassoSelectorResized:function(Y){this.lassoSelected(Y);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.VisUtility","mstrmojo.ui.menus.MenuConfig","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.rw._SupportViewFilterInVizBox","mstrmojo.util.FontLoader");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var R={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var L=["background-color","fx"],H={width:"width",height:"height"},Y=mstrmojo.array,K=mstrmojo.hash;mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate,mstrmojo.vi.ui.rw._SupportViewFilterInVizBox,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,excludeData:false,skipReRender:false,updateFormatsOnUpdate:true,bgFormats:{},init:function d(n){this.excludeData=!!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause());if(this._super){this._super(n);}},setModel:function g(n){this.set("model",n);},destroy:function c(){var n=this.model;if(n&&n.destroy){n.destroy();delete this.model;}this._super();},resize:function N(){var n=this.getFormats();if(parseInt(n.height,10)===0||parseInt(n.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(n.height,n.width);this.domNode.style.display="";}},setDimensions:function b(p,o){var n=this._super(p,o);if(n&&this.hasRendered&&!this.skipReRender){this.reRender();}return n;},reRender:function J(){this.unrender();this.render();},getWidth:function h(){return parseInt(this.width,10);},getHeight:function X(){return parseInt(this.height,10);},getLeft:function V(){return parseInt(this.left,10);},getTop:function B(){return parseInt(this.top,10);},getFonts:mstrmojo.emptyFn(),loadFonts:function E(n,o){if(mstrmojo.util.FontLoader.load(n,o)){o.success();}},preBuildRendering:function A(){if(this.requirePreload){var n=function n(){this.requirePreload=false;this.render();};if(mstrmojo.util.FontLoader.load(this.getFonts(),{success:n.bind(this),failure:n.bind(this)})){return this._super();}else{return false;}}return this._super();},buildRendering:function D(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function a(){},postBuildRendering:function(){var n=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:n||this.excludeData,controls:this.getVisEmptyMsgControls()});this.applyBackground();return !n;},applyBackground:function W(){var o=this.bgFormats,q,n,r,p;if(mstrApp.isExpress&&!K.isEmpty(o)){q=this.formatHandlers=this.formatHandlers||{};r=q.domNode=q.domNode||[];n="BG";p=Y.indexOf(r,n);if(p<0){r.push(n);}this.applyCSSFormatToNode("domNode",o);}},parseBgFormats:function G(){var n=this.id;return{success:function(t){var q,w,s,o,u,p,r=mstrmojo.all[n],x=r&&r.getDocModel();if(t.defn&&t.defn.layouts&&r&&x){w=t.defn.layouts;q=Y.find(w,"k",x.getCurrentLayoutKey());s=w[q];o=s&&s.units&&s.units[r.k];u=o&&o.fmts;if(u){p=r.bgFormats={};Y.forEach(L,function(y){if(u[y]){p[y]=u[y];}});}}}};},onAppStateChange:function(n){var o=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),p=n.valueWas&mstrmojo.vi.VisualInsightApp.APP_STATES.PAUSE;this.excludeData=!!(mstrConfig.resolveOnly||o);if(this._super){this._super(n);}if(o&&!p||(!o&&p&&!mstrApp.enableUpdate)){this.raiseEvent({name:"toggleCtrlOverlay",visible:this.excludeData||this.isEmpty(),controls:this.getVisEmptyMsgControls()});}},refresh:function j(n){if(this.excludeData){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});return ;}this._super(n);},update:function Z(q){q=q||this.node;if(q){var n=q.data;if(n){this.model.set("data",n);}this.waitingForData=!!n.nsj;if(this.waitingForData){var o="ServerJsonRWDStyle";var r=this.model,p=r.getDataService(),s={host:this,nodes:[this.k]},u;if(n.wid!==undefined){s.slices=[n.wid];}u=mstrmojo.func.wrapMethods(this.parseBgFormats(),r.docModel.getUpdateColorMapCallback(),r.docModel.getUpdateThemePaletteCallback(true),r.controller._getXtabCallback(this,false));p.retrieveServerJson(s,u,{preserveUndo:true,style:{name:o,params:{treesToRender:3}},params:{styleName:o}});this.updated=true;return false;}this.updateContentFormats(q);}if(this.model){var w=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(w&&w.getDocBuilder){var t=w.getDocBuilder().getMojoVisName(q);if(t){q.data.visName=t;}}}this.updated=true;if(this._super){return this._super(q);}return true;},updateContentFormats:function M(r){var p,s,o,q=r.defn,n=this.builder;if(this.updateFormatsOnUpdate&&q){if(n&&n.isPortlet&&n.isPortlet(q)){s=H;}else{s=R;}o=q.fmts||q.units[this.model.k].fmts;for(p in s){if(s.hasOwnProperty(p)&&o.hasOwnProperty(p)){this[s[p]]=o[p];}}}},isEmpty:function O(){return false;},getVisEmptyMsgControls:function I(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function k(){return this.model;},getData:function Q(){return this.model.data;},getRowsAndCols:function(){var n=this.model.data.gts;return(n.row||[]).concat(n.col||[]);},getExp:function(){var n=this.model.data,o=n&&n.sc&&n.sc.exp;return o;},getDocModel:function e(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function U(){return mstrmojo.emptyFn;},renderErrorMessage:function l(n){this.domNode.innerHTML='<div class="mstrmojo-message">'+n+"</div>";},getMessageID:function S(){return this.model.docModel.mid||this.model.mid;},performAction:function f(n){var o=this.model,r=this.scriptClass==="mstrmojo.heatmap.vi.VisHeatMap",q=r?o.getHMAction(n):o.getAction(n),p=q&&q.h;if(p&&this.controller[p]){this.controller[p](this,q.a);return true;}return false;},deleteSelectorControl:function P(){var n=this.getData(),o=n.sc;if(o&&parseInt(o.ct,10)===6){delete n.sc;}},findSelectorControl:function F(){var o=this.getData(),n=o&&o.sc;if(n&&parseInt(n.ct,10)===6){this.selectorControl=n;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;},displayVizBoxVisFilterIndicator:function C(n,o){if(n&&o&&o.displayVisFilterIndicator){o.displayVisFilterIndicator();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.Widget","mstrmojo.array","mstrmojo.VisUtility","mstrmojo.ui._HasScroller");var A=mstrmojo,E=A.dom,B=A.VisUtility,G=A.array,C=A.css;mstrmojo.gm.GMScroll=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMScroll",cssClass:undefined,bodyClass:undefined,view:undefined,direction:undefined,markupString:'<div id="{@id}" class="gm-scrollbar"><div class="{@cssClass}"><div class="{@bodyClass}"></div></div></div>',markupSlots:{domContainer:function(){return this.domNode.firstChild;},domBody:function(){return this.domNode.firstChild.firstChild;}},init:function(H){this._super(H);},addScrollListener:function(){if(this.useNativeScrollBar()){E.attachMarkupEvent(this.id,this.domContainer,"scroll");}this.overrideListeners();},setupScrollNodes:function(){this.scrollNode=this.domContainer;},onscroll:function D(){this.view.updateChartsPosition(this.direction,this.getCurrentPosition());this._super();},toggleHoverState:function(H){C.toggleClass(this.domNode,"hover",H);},updateScrollPosition:function(I){var H=this.domContainer;if(this.direction==="v"){if(H.scrollTop===I){return ;}H.scrollTop=I;}else{if(H.scrollLeft===I){return ;}H.scrollLeft=I;}},updateScrollbars:function F(){var J=this.domNode,I=J&&J.style,H;if(I===undefined){console.log("dom style is missing");return ;}this._super();if(this.scrollNode){H=this.scrollNode.style;if(this.direction==="v"){if(H.overflowY==="scroll"){I.display="block";}else{I.display="none";}}else{if(H.overflowX==="scroll"){I.display="block";}else{I.display="none";}}}},getCurrentPosition:function(){var H=this.domContainer;if(this.direction==="v"){return H.scrollTop;}return H.scrollLeft;},useNativeScrollBar:function(){return !this.hasCustomScrollbar;},overrideListeners:function(){var K=this;function L(M){if(M.stopPropagation){M.stopPropagation();}if(M.preventDefault){M.preventDefault();}M.cancelBubble=true;return false;}function J(M){L(M.event);}function H(){var M;G.forEach(K.installedEventListeners,function(O){if(O.evt==="click"){E.detachEvent(O.e,O.evt,O.fn);M=O.fn;}});function N(O){K.toggleHoverState(true);M.call(K,O.event);L(O.event);}B.addTouchSupportHelper(K.scrollTrackNodes.v,K,J.bind(K),J.bind(K),N.bind(K));B.addTouchSupportHelper(K.scrollTrackNodes.h,K,J.bind(K),J.bind(K),N.bind(K));}function I(){function O(P){var Q=K.scrollNode;mstrmojo.array.forEach(["h","v"],function(W){var V=K.getDefaultScrollBarProps(W),R="delta",U=P[R+{h:"X",v:"Y"}[W]],S=Math.abs(U);Q[V.scroll]+=U;});}function M(Q){K.toggleHoverState(true);var S=K.scrollNode,R=E.position(S),P={y:S.scrollHeight/R.h,x:S.scrollWidth/R.w};Q.deltaX=P.x*Q.deltaX;Q.deltaY=P.y*Q.deltaY;O(Q);L(Q.event);}function N(P){K.toggleHoverState(false);L(P.event);}B.addTouchSupportHelper(K.scrollBarNodes.v,K,J.bind(K),M.bind(K),N.bind(K));B.addTouchSupportHelper(K.scrollBarNodes.h,K,J.bind(K),M.bind(K),N.bind(K));}if(K.scrollTrackNodes){H();}if(K.scrollBarNodes){I();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var h=mstrmojo.chart,d=h.model,r=mstrmojo.VisUtility,Q=h.enums,E=Q.EnumFontStyle,S=d.enums,AB=S.EnumDSSGraphProperty,Y=S.EnumDSSGraphDataTextShowType,AC=S.EnumDSSGraphObject;var F=mstrmojo.gm.EnumDataLabels;var W=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var s=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var Z=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function V(AL){switch(AL){case AB.DssGraphFontColor:return 0;case AB.DssGraphFontName:return 1;case AB.DssGraphFontSize:return 2;case AB.DssGraphFontStyle:return 3;case AB.DssGraphFontSize100:return 4;default:return -1;}}function x(AL){switch(AL){case AB.DssGraphAreaColor:return 0;case AB.DssGraphFillEffect:return 1;case AB.DssGraphAreaAlpha:return 2;}return -1;}function z(AL){var AM;switch(AL){case AC.DssGraphX1Body:case AC.DssGraphX1Label:case AC.DssGraphX1Major:case AC.DssGraphX1Minor:case AC.DssGraphUserLabel3:case AC.DssGraphUserLine3:AM="X1";break;case AC.DssGraphX2Body:case AC.DssGraphX2Label:case AC.DssGraphX2Major:case AC.DssGraphX2Minor:case AC.DssGraphUserLabel4:case AC.DssGraphUserLine4:AM="X2";break;case AC.DssGraphY1Body:case AC.DssGraphY1Label:case AC.DssGraphY1Major:case AC.DssGraphY1Minor:case AC.DssGraphUserLabel1:case AC.DssGraphUserLine1:AM="Y1";break;case AC.DssGraphY2Body:case AC.DssGraphY2Label:case AC.DssGraphY2Major:case AC.DssGraphY2Minor:case AC.DssGraphUserLabel2:case AC.DssGraphUserLine2:AM="Y2";break;case AC.DssGraphZBody:AM="Z";break;case AC.DssGraphO1Body:case AC.DssGraph2DO1Label:case AC.DssGraphO1Major:case AC.DssGraphO1Minor:AM="O1";break;case AC.DssGraphO2Body:case AC.DssGraph2DO2Label:case AC.DssGraphO2Major:case AC.DssGraphO2Minor:AM="O2";break;default:AM="No_Axis";break;}return AM;}function e(AL,AM){if(!!AL===false){return undefined;}return undefined;}function X(AQ,AL){if(!!AQ===false){return undefined;}var AV,AT,AS=AL.isVertical!==undefined?AL.isVertical:true,AN=AL.isGridChart||false,AW=AL.isPieShape||false,AR={Name:0,Value:0},AO=AQ.gaid,AP=AQ.goid,AM=AQ.gsid,AU=AQ.v;if(!!AO===false){return undefined;}switch(AO){case AB.DssGraphShowLBLFeeler:if(AW){AR.Name="DataLabel";if((AU&Y.DssGraphDataTextValue)!==0){AR.Value=F.SHOW_VALUE_ONLY;}else{if((AU&Y.DssGraphDataTextLabel)!==0){AR.Value=F.SHOW_TEXT_ONLY;}else{AR.Value=F.HIDE;}}}break;case AB.DssGraphAreaColor:case AB.DssGraphFillEffect:case AB.DssGraphAreaAlpha:AT=x.call(this,AO);if(AT<0){return undefined;}if(AP===AC.DssGraphBackground){AR.Name=Z[AT][0];if(AR.Name.search("Trans")!==-1){AR.Value=AU/255*100;}else{AR.Value=AU;}}break;case AB.DssGraphShowLegendText:AR.Name="LegendVisibleness";AR.Value=AU===0?false:true;break;case AB.DssGraphSDShowDataText:AR.Name="ShowSeriesDataLabel";AR.Value=AU!==0;break;case AB.DssGraphShowDataText:if(AW===false){AR.Name="DataLabel";AR.Value=F.HIDE;if(AU&Y.DssGraphDataTextValue){AR.Value=F.SHOW_VALUE_ONLY;}else{if(AU&Y.DssGraphDataTextLabel){AR.Value=F.SHOW_TEXT_ONLY;}}}break;case AB.DssGraphFontColor:case AB.DssGraphFontName:case AB.DssGraphFontSize100:case AB.DssGraphFontSize:case AB.DssGraphFontStyle:AR.Value=AU;AV=z.call(this,AP);AT=V.call(this,AO);if(AT<0){return undefined;}if(AT===4){AT=3;AR.Value/=100;}if(AV==="No_Axis"){if(AP===AC.DssGraphDataText){if(AW){return undefined;}AR.Name=W[AT][2];}else{if(AP===AC.DssGraphPieFeelerLabel||AP===AC.DssGraphPieFeelerLabel){if(AW===false){return undefined;}AR.Name=W[AT][2];}else{if(AP===AC.DssGraphLegendText){AR.Name=W[AT][3];}else{return undefined;}}}}else{if(AV[0]==="X"){AR.Name=W[AT][0];}else{if(AV[0]==="Y"){AR.Name=W[AT][1];}else{if(AV[0]==="O"){AR.Name=AS?W[AT][0]:W[AT][1];}else{return undefined;}}}}break;}return AR;}var U,k=String.fromCharCode,AF=mstrmojo.locales.datetime,AK=0,L=document.getElementById("measureText"),B={},j={};var p=0.03,K=0,R=0,H=0.2;function q(AM){var AL,AN=[],AO;for(AL=0;AL<=AM;AL++){AO=AL.toString(16);if(AO.length===1){AO="0"+AO;}AN[AL]=AO;}U=AN;return AN;}function AI(AL){var AM=parseFloat(AL);if(isNaN(AM)===false&&AM!==undefined&&AM!==null){return AM;}return 0;}function D(AL){AL=AL.replace(/ddd/g,"EEE");AL=AL.replace(/AM\/PM/g,"a");AL=AL.replace(/tt/g,"a");AL=AL.replace(/:'/g,":");AL=AL.replace(/'\/'/g,"/");AL=AL.replace(/\\/g,"");var AM,AO=true,AN=AL.length;for(AM=0;AM<AN;AM++){if(AL[AM]==="h"||AL[AM]==="H"||AL[AM]===":"){AO=true;}else{if(AL[AM]===" "&&AO){AO=true;}}if(AL[AM]==="m"&&AO){AL=AL.substring(0,AM)+"M"+AL.substring(AM+1);}}return AL;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{point2D:{},rect2D:{},tripleId:{create:function M(AM,AQ,AO,AN,AP){if(AM===null||AM===undefined){AM=-3;}if(AQ===null||AQ===undefined){AQ=-3;}if(AO===null||AO===undefined){AO=-3;}var AL={mObjectId:AM,mSeriesId:AQ,mGroupId:AO};if(AN!==undefined&&AN!==null){AL.angleByIndex=AN;}if(AP!==undefined&&AP!==null){AL.sliceById=AP;}return AL;},walks:function n(AP,AN){if(!!AP===false||!!AN===false){return null;}if(AP.length===1){return AN[AP[0]];}var AO=(AP&&AP.length)||0,AM,AL=AP[AM];for(AM=0;AM<AO;AM++){if(AN[AL]===undefined){AN[AL]={};}AN=AN[AL];}return AN;},equal:function b(AL,AM){return(AL.mObjectId===AM.mObjectId&&AL.mSeriesId===AM.mSeriesId&&AL.mGroupId===AM.mGroupId);},reset:function t(AN,AP,AO,AM,AL,AQ){AN.mObjectId=AP!==undefined?AP:-3;AN.mSeriesId=AO!==undefined?AO:-3;AN.mGroupId=AM!==undefined?AM:-3;if(AL!==undefined&&AL!==null){AN.angleByIndex=AL;}if(AQ!==undefined&&AQ!==null){AN.sliceById=AQ;}return AN;}},transformProperty:function A(AL,AN,AM){if(AN===0){return X.call(this,AL,AM);}return e.call(this,AL,AM);},abbreviateNumber:function c(AV,AL){var AW,AM,AX="",AO=(AV<0),AY=(this.isIntegar(AV)===false);if(AY){AL++;}if(AV<0){AL++;}var AR=AO?-AV:AV;var AS=0;if(AR>=1e+27){AR=999;AX="Y";}else{if(AR>=1e+24){AR/=1e+24;AX="Y";}else{if(AR>=1e+21){AR/=1e+21;AX="Z";}else{if(AR>=1000000000000000000){AR/=1000000000000000000;AX="E";}else{if(AR>=1000000000000000){AR/=1000000000000000;AX="P";}else{if(AR>=1000000000000){AR/=1000000000000;AX="T";}else{if(AR>=1000000000){AR/=1000000000;AX="B";}else{if(AR>=1000000){AR/=1000000;AX="M";}else{if(AR>=1000){AR/=1000;AX="K";}else{if(AR>=1){AS++;}else{if(AR>=0.001){AS++;}else{if(AR>=0.000001){AS++;}else{if(AR>=1e-9){AS++;}else{if(AR>=1e-12){AS++;}else{AO=false;}}}}}}}}}}}}}}if(this.isIntegar(AR)===false){AW=AR.toString();var AN=5,AQ=2,AZ;AM=AW.indexOf(".");AZ=AW.length-AM-1;if(AZ>AN||(AZ>AQ&&AZ>AM)){if(AZ>AN&&AL-AZ<0){AQ=Math.max(AQ,Math.min(AQ,AL-AZ));}else{AQ=Math.max(1,Math.min(AQ,AL-AZ));}AR=AR.toFixed(AQ);}}AW=AR.toString();if(this.isIntegar(AR)===false){var AU=AW.length-1;AM=AW.indexOf(".");if(AM!==-1){if(AM>=AU){AW=AW.substring(0,AM);}else{var AT,AP=true;for(AT=AU;AT>AM&&AP;--AT){if(AW[AT]!=="0"){AP=false;}}if(AP){AW=AW.substring(0,AM);}}}}if(AO){AW="-"+AW;}AW+=AX;return AW;},getScalePlate:function AH(AL){AL=AL||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AL){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AE(AN,AM,AO){var AL={mUseLogarithmicScale:AN,mAlwaysIncludeZero:!AN&&(AM||!!(AO&1)||!!(AO&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AL;},evaluateTextMargin:function P(AL){this.mTextMargins=this.mTextMargins||{};var AM=this.mTextMargins;if(AM[AL]){return AM[AL];}var AN=[];AN[0]=Math.floor(AL*p+0.5);AN[1]=Math.floor(AL*K+0.5);AN[2]=Math.max(Math.floor(AL*R+0.5),1);AM[AL]=AN;return AN;},AlmostZero:function AA(AL){return(Math.abs(AL)<0.000001);},isValidNumber:function J(AL){if(typeof AL==="number"){if(AL===0){return true;}return !!AL;}return false;},isIntegar:function l(AL){return AL===+AL&&AL===(AL|0);},HasArrayIntersection:function O(AM,AL){var AN;for(AN=0;AN<AM.length;AN++){if(AL.indexOf(AM[AN])!==-1){return true;}}return false;},EscapeString:function C(AL){var AN='"',AM='\\"',AO=new RegExp(AN,"g");return String(AL).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AO,AM).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function N(AL){var AN='"',AM='\\"',AO=new RegExp(AN,"g");return String(AL).replace(/\\/g,"\\\\").replace(AO,AM).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AG(AM){var AL;if(!AM.buf||AM.len===-1){return ;}AL=AM.len;var AN=String(AM.buf[AL]);if(AN&&AN[AN.length-1]===","){AM.buf[AL]=AN.slice(0,-1);}},decodeUTF8:function g(AL){var AM="",AO=0,AQ=0,AP=0,AN=0;while(AO<AL.length){AQ=AL.charCodeAt(AO);if(AQ<128){AM+=k(AQ);AO++;}else{if((AQ>191)&&(AQ<224)){AP=AL.charCodeAt(AO+1);AM+=k(((AQ&31)<<6)|(AP&63));AO+=2;}else{AP=AL.charCodeAt(AO+1);AN=AL.charCodeAt(AO+2);AM+=k(((AQ&15)<<12)|((AP&63)<<6)|(AN&63));AO+=3;}}}return AM;},formatDateTimeValue:function f(AM,AR){var AP=new mstrmojo.chart.common.DSSDateTime({ifTime:AR});var AL="";var AO="";var AS=0;while(AS<AM.length){var AN=1;switch(AM.charAt(AS)){case"[":AS++;while(AS<AM.length&&AM.charAt(AS)!=="]"){AO+=AM.charAt(AS);AS++;}if(AO.length>0&&(AO[0]===">"||AO[0]==="<"||AO[0]==="=")){AO="";}AS++;break;case"y":AS++;while(AS<AM.length&&AM.charAt(AS)==="y"){AN++;AS++;if(AN===4){break;}}if(AN===1||AN===2){AL+=this.fillZeroToWidth(AP.mnYear%100,2);}else{if(AN===3){AL+=this.fillZeroToWidth(AP.mnYear%100,2);AS--;}else{if(AN===4){AL+=AP.mnYear;}}}break;case"M":AS++;while(AS<AM.length&&AM.charAt(AS)==="M"){AN++;AS++;}if(AN<3){AL+=this.fillZeroToWidth(AP.mnMonth,AN);}else{if(AN===3){AL+=AF.MONTHNAME_SHORT[AP.mnMonth];}else{AL+=AF.MONTHNAME_FULL[AP.mnMonth];}}break;case"d":AS++;while(AS<AM.length&&AM.charAt(AS)==="d"){AN++;AS++;}if(AN<3){AL+=this.fillZeroToWidth(AP.mnDay,AN);}else{if(AN===3){AL+=AF.dayShortNames[AP.mnDay];}else{AL+=AF.dayNames[AP.mnDay];}}break;case"h":AS++;while(AS<AM.length&&AM.charAt(AS)==="h"){AN++;AS++;}var AQ=AP.mnHour;if(AQ===0){AQ=12;}if(AQ>12){AQ-=12;}AL+=this.fillZeroToWidth(AQ,AN);break;case"H":AS++;while(AS<AM.length&&AM.charAt(AS)==="H"){AN++;AS++;}AL+=this.fillZeroToWidth(AP.mnHour,AN);break;case"m":AS++;while(AS<AM.length&&AM.charAt(AS)==="m"){AN++;AS++;}AL+=this.fillZeroToWidth(AP.mnMinute,AN);break;case"s":AS++;while(AS<AM.length&&AM.charAt(AS)==="s"){AN++;AS++;}AL+=this.fillZeroToWidth(AP.mnSecond,AN);break;case"S":AS++;while(AS<AM.length&&AM.charAt(AS)==="S"){AN++;AS++;}AL+=this.fillZeroToWidth(AP.mnMillisecond,AN);break;case"a":AQ=AP.mnHour;if(AQ<12){AL+=AF.AM_NAME;}else{AL+=AF.PM_NAME;}AS++;break;default:AL+=AM.charAt(AS++);break;}}if(AO.length!==0){AL='<SPAN STYLE="COLOR: '+AO+'" >'+AL+"</SPAN>";}return AL;},fillZeroToWidth:function o(AP,AN){var AM="",AO=AM+AP;var AL=AO.length;while(AL<AN){AO="0"+AO;AL++;}return AO;},updateCache:function AJ(AM,AP,AQ){var AO=(AP&&AP.length)||0,AN,AL,AR=AM;for(AN=0;AN<AO-1;AN++){AL=AP[AN];if(!AR[AL]){AR[AL]={};}AR=AR[AL];}AR[AP[AO-1]]=AQ;},measureTextHeight:function(AQ,AN,AU,AR,AL){var AT,AP=AQ;if(AP===" "){AP="\u00A0";}AL=AL||"pt";if(typeof AU==="number"){AU=AU+AL;}var AM="none",AS="normal";if(AR&E.FS_ITALIC){AM="italic";}if(AR&E.FS_BOLD){AS="bold";}var AO={fontFamily:AN,fontSize:AU,fontStyle:AM,fontWeight:AS};if(j&&j.H&&j.H[AN]&&j.H[AN][AU]&&j.H[AN][AU][AR]){AT=j.H[AN][AU][AR];}else{AT=r.measureTextHeight("H",AO,1);this.updateCache(j,["H",AN,AU,AR],AT);}return AT;},measureText:function y(AS,AP,AY,AT,AN){var AM=true,AL,AW=AY+1;var AR=AS;if(AR===" "){AR="\u00A0";}AN=AN||"pt";if(typeof AY==="number"){AY=AY+AN;}if(B&&B[AR]&&B[AR][AP]&&B[AR][AP][AY]&&B[AR][AP][AY][AT]){return B[AR][AP][AY][AT];}if(AM){var AO="normal",AU="normal";if(AT&E.FS_ITALIC){AO="italic";}if(AT&E.FS_BOLD){AU="bold";}var AQ={fontFamily:AP,fontSize:AY,fontStyle:AO,fontWeight:AU};if(j&&j.H&&j.H[AP]&&j.H[AP][AY]&&j.H[AP][AY][AT]){AW=j.H[AP][AY][AT];}else{AW=r.measureTextHeight("H",AQ,true);this.updateCache(j,["H",AP,AY,AT],AW);}AL=r.measureTextWidth(AS,AQ,0);}else{if(!L){var AV=document.createElement("div");AV.id="measureText";AV.style.position="absolute";AV.style.top="0";AV.style.visibility="hidden";AV.style.height="auto";AV.style.width="auto";document.body.appendChild(AV);L=AV;}L.innerHTML="";L.appendChild(document.createTextNode(AR));L.style.fontFamily=AP;L.style.fontSize=AY;L.style.fontWeight="normal";L.style.fontStyle="none";if(AT&E.FS_ITALIC){L.style.fontStyle="italic";}if(AT&E.FS_BOLD){L.style.fontWeight="bold";}AL=L.scrollWidth+1;AW=L.scrollHeight+1;}var AX={Width:AL,Height:AW};this.updateCache(B,[AR,AP,AY,AT],AX);return AX;},ReplaceDecimalPoint:function AD(AM,AL){return AM.replace(".",AL);},ReplaceMinusSign:function w(AL,AM){return AL.replace("-",AM);},insert:function G(AM,AL,AN){if(typeof AM==="string"&&typeof AL==="string"&&AN<=AM.length){return AM.substr(0,AN)+AL+AM.substr(AN);}return AM;},InsertThousandSeparator:function u(AN,AO,AS){var AL=AS.mstrDecimalPoint;var AM=AN.indexOf(AL);if(AM===-1){AM=AN.length;}var AP=0;while(AP<AM&&!this.chk_val(AN.charAt(AP))){AP++;}var AR=AN;var AQ;for(AQ=AM-3;AQ>AP;AQ-=3){AR=this.insert(AR,AO,AQ);}return AR;},chk_val:function I(AL){return/^\d+$/.test(AL);},hFormatValue:function a(AY,AP,Aj,A8){var AW=0;var Ar=0;var Af=AY.length;var BG=false;if(!A8){A8={};var Ap=window.navigator.userLanguage||window.navigator.language;var BR=Ap.split("-");this.mstrLanguageCode=BR[0];this.mstrCountryCode=BR[1]||BR[0];A8.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";A8.mstrCurrencySymbol="$";A8.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";A8.mstrPercentSign="%";A8.mstrMinusSign="-";}while(AW<Af){if(AY.charAt(AW)==='"'){AW++;while(AW<Af&&AY.charAt(AW)!=='"'){AW++;}AW++;}else{if(AY.charAt(AW)==="["){AW++;var Aq="";while(AW<Af&&AY.charAt(AW)!=="]"){Aq+=AY.charAt(AW);AW++;}if(Aq.length>1&&(Aq.charAt(0)===">"||Aq.charAt(0)==="<"||Aq.charAt(0)==="=")){var AM=-1;var BA=0;switch(Aq.charAt(0)){case">":if(Aq.charAt(1)>="0"&&Aq.charAt(1)<="9"){AM=1;BA=1;}else{if(Aq.charAt(1)==="="&&Aq.length>2&&Aq.charAt(2)>="0"&&Aq.charAt(2)<="9"){AM=2;BA=2;}}break;case"=":if(Aq.charAt(1)>="0"&&Aq.charAt(1)<="9"){AM=3;BA=1;}else{if(Aq.charAt(1)==="="&&Aq.length>2&&Aq.charAt(2)>="0"&&Aq.charAt(2)<="9"){AM=3;BA=2;}}break;case"<":if(Aq.charAt(1)>="0"&&Aq.charAt(1)<="9"){AM=5;BA=1;}else{if(Aq.charAt(1)==="="&&Aq.length>2&&Aq.charAt(2)>="0"&&Aq.charAt(2)<="9"){AM=4;BA=2;}}break;}if(AM>0){var Aa=Aq.substr(BA);var BJ=parseFloat(Aa);if((AM===1&&AP>BJ)||(AM===2&&AP>=BJ)||(AM===3&&AP===BJ)||(AM===4&&AP<=BJ)||(AM===5&&AP<BJ)){BG=true;}return mstrmojo.num.formatByMask(AY,AP);}}}else{if(AY.charAt(AW)===";"){if(BG){Af=AW;break;}else{Ar=AW+1;AW++;}}else{AW++;}}}}if(!BG){Ar=0;}AW=Ar;var Aw=false;while(AW<Af){if(AY.charAt(AW)==='"'){AW++;while(AW<Af&&AY.charAt(AW)!=='"'){AW++;}}else{if(AY.charAt(AW)==="["){AW++;while(AW<Af&&AY.charAt(AW)!=="]"){AW++;}}else{if(AY.charAt(AW)==="y"||AY.charAt(AW)==="M"||AY.charAt(AW)==="d"||AY.charAt(AW)==="h"||AY.charAt(AW)==="H"||AY.charAt(AW)==="m"||AY.charAt(AW)==="s"||AY.charAt(AW)==="S"){Aw=true;break;}else{AW++;}}}}if(Aw){var BE="";if(BG){BE=AY.substr(Ar,Af-Ar);}else{BE=AY;}return mstrmojo.num.formatByMask(BE,AP);}var BI;var An;var At=false;var AS=false;var BD=false;var Ae=false;var BO=[];var Ai="";var Ab=0;var A9=false;var AZ=0;var BP="";var AT="";var Am="";var A7="";var AX=0;var BL=0;var BK=false;var BB=A8.mstrCurrencySymbol;var A2=A8.mstrThousandSeparator;var Ay=A8.mstrDecimalPoint;var BC=A8.mstrPercentSign;var A6=A8.mstrMinusSign;AW=Ar;var Al="";if(AP<0&&!BG){while(AW<Af&&AY.charAt(AW)!==";"){if(AY.charAt(AW)==='"'){AW++;while(AW<Af&&AY.charAt(AW)!=='"'){AW++;}}AW++;}AW++;if(AW>=Af){if(AP<0){BP+="-";}AW=Ar;}}var BQ=false;while(AW<Af){var As=false;switch(AY.charAt(AW)){case"[":AW++;while(AW<Af&&AY.charAt(AW)!=="]"){Am+=AY.charAt(AW);AW++;}if(Am.length>0&&(Am.charAt(0)===">"||Am.charAt(0)==="<"||Am.charAt(0)==="=")){Am="";}AW++;break;case'"':AW++;while(AW<Af&&AY.charAt(AW)!=='"'){if(BQ){AT+=AY.charAt(AW);}else{BP+=AY.charAt(AW);}AW++;}AW++;break;case"#":case"0":var Ad=AY.charAt(AW);BQ=true;var Ah=1;AW++;while(AW<Af&&AY.charAt(AW)===Ad){Ah++;AW++;}if(AW+1<Af&&AY.charAt(AW)==="-"&&AY.charAt(AW+1)===Ad){Ae=true;BO.push(Ah);AW++;while(true){Ah=0;while(AW<Af&&AY.charAt(AW)===Ad){Ah++;AW++;}BO.push(Ah);if(AW>=Af||AY.charAt(AW)!=="-"){break;}AW++;}}while(AW<Af){if(AY.charAt(AW)===","){if(AW+1<Af&&AY.charAt(AW+1)===Ad){At=true;}else{break;}}else{if(AY.charAt(AW)!==Ad){break;}}AW++;}break;case".":BQ=true;AW++;Ab=0;while(AW<Af&&AY.charAt(AW)==="0"){Ab++;AW++;}if(Ab===0){while(AW<Af&&AY.charAt(AW)==="#"){Ab++;AW++;}}break;case"E":BL=6;while(AW<Af&&AY.charAt(AW)!=="0"){if(AY.charAt(AW)==="+"&&AW<Af&&AY.charAt(AW+1)==="0"){AS=true;}else{A7+=AY.charAt(AW);}AW++;}AX=0;while(AW<Af&&AY.charAt(AW)==="0"){AX++;AW++;}break;case"%":BL=4;AW++;break;case"(":AW++;BP+="(";break;case")":AW++;AT+=")";break;case"-":AW++;if(AP<0){BP+=A6;}break;case"?":AW++;break;case"/":if(AW>Ar&&AY.charAt(AW-1)==="?"&&AW+1<Af&&AY.charAt(AW+1)==="?"){BL=5;A9=false;An=AW-1;while(An>Ar&&AY.charAt(An)==="?"){An--;}while(An>Ar&&AY.charAt(An)===" "){An--;}if(An>=Ar&&(AY.charAt(An)==="#"||AY.charAt(An)==="0")){A9=true;}AZ=0;AW++;while(AW<Af&&AY.charAt(AW)==="?"){AZ++;AW++;}}else{AW++;}break;case",":if(AW>Ar&&(AY.charAt(AW-1)==="0"||AY.charAt(AW-1)==="#")){BD=true;AW++;}An=AW+1;while(An<Af){if(AY.charAt(An)===","){An++;continue;}else{break;}}if(An===Af||AY.charAt(An)==="."){BK=true;}if(BK||(!BK&&AW+1<Af&&AY.charAt(AW+1)===",")){while(AW<Af&&AY.charAt(AW)===","){AP/=1000;AW++;}AW--;}AW++;break;case";":As=true;break;case"$":if(BQ){AT+=BB;}else{BP+=BB;}AW++;break;case"_":if(BQ){AT+=" ";}else{BP+=" ";}AW++;AW++;break;default:if(BQ){AT+=AY.charAt(AW);}else{BP+=AY.charAt(AW);}AW++;}if(As){break;}}if(AP<0){AP=-AP;if(BP.length===0){BP=A6;}}var A0="";if(Ae){var Av=0;for(BI=0;BI<BO.length;BI++){Av+=BO[BI];}A0=Al=this.fillZeroToWidth(Av,AP.toFixed());for(BI=0;BI<BO.length-1;BI++){Av-=BO[BI];var Au=A0.length-Av;A0=A0.slice(0,Au)+"-"+A0.slice(Au);}}else{switch(BL){case 0:if(BD){AP/=1000;}var A4=AP;if(A4<0){A4=-A4;}var AL=0;while(A4>=10){A4/=10;AL++;}if(AL>=15){A0=Al=this.fillZeroToWidth((AP<0?-AP:AP),10);var Ao=A0.indexOf(".");if(Ao!==-1){A0=A0.slice(0,Ao)+A0.slice(Ao+1);}A0=A0.substr(0,16);if(A0.charAt(15)>="5"){var AV=14;while(AV>=0&&A0.charAt(AV)==="9"){A0=A0.slice(0,AV)+"0"+A0.slice(AV+1);AV--;}var AQ=A0.charAt(AV);AQ++;if(AV>=0){A0=A0.slice(0,AV)+AQ+A0.slice(AV+1);}else{A0="1"+A0;}}A0=A0.substr(0,15);var BH;for(BH=AL-14;BH>0;BH--){A0+="0";}if(AP<0){A0=A6+A0;}}else{Al+=(AP+Math.pow(0.1,Ab+6)).toFixed(Ab);A0=Al;A0=this.ReplaceDecimalPoint(A0,Ay);if(AP<0){A0=this.ReplaceMinusSign(A0,A6);}}if(At){A0=this.InsertThousandSeparator(A0,A2,A8);}if(BD){A0+=Ai;}break;case 5:if(BD){AP/=1000;}var Ak=10;for(BI=1;BI<AZ;BI++){Ak*=10;}var AN={numerator:0,denominator:1};var AU={numerator:1,denominator:1};var AR={numerator:1,denominator:2};var Az={numerator:0,denominator:1};var Ag=AP>=0;var A5=Math.abs(AP);var A3=parseInt(A5,10);A5-=A3;while(AR.denominator<Ak){if(Math.abs(AI.call(AR)-A5)<1e-15){Az=AR;break;}if(AI.call(AR)>A5){AU=AR;}else{AN=AR;}AR.denominator=AN.denominator+AU.denominator;AR.numerator=AN.numerator+AU.numerator;}if(AR.denominator>=Ak){if(A5-AI.call(AN)<AI.call(AU)-A5){Az=AN;}else{Az=AU;}}if(A3>0){Az.numerator+=A3*Az.denominator;}if(Az.denominator===0){A9=false;}var BF=false;var A1=false;var BN=Az.numerator;if(A9){A3=Math.floor(Az.numerator/Az.denominator);BN=Az.numerator%Az.denominator;A1=A1||(BN!==0);if(A3>0){BF=true;Al+=A3;if(A1){Al+=" ";}}}if(!A1&&!BF&&BN===0){Al+="0";}else{if(!A1&&BF&&BN===0){AK++;}else{Al+=BN;Al+="/";Al+=Az.denominator;}}A0=Al;if(!Ag){A0=A6+A0;}if(At){A0=this.InsertThousandSeparator(A0,A2,A8);}if(BD){A0+=Ai;}break;case 4:AP*=100;Al+=(AP+Math.pow(0.1,Ab+6)).toFixed(Ab);A0=Al;A0=this.ReplaceDecimalPoint(A0,Ay);if(AP<0){A0=this.ReplaceMinusSign(A0,A6);}if(At){A0=this.InsertThousandSeparator(A0,A2,A8);}A0+=BC;break;case 6:var Ax=AP;var BM=0;if(Ax>1){while(Ax>=10){Ax/=10;BM++;}}else{if(Ax!==0){while(Ax<1){Ax*=10;BM--;}}}Al+=(Ax+Math.pow(0.1,Ab+6)).toFixed(Ab);Al+=A7;if(AS&&BM>=0){Al<<"+";}if(BM<0){Al<<"-";BM=-BM;}Al+=this.fillZeroToWidth(BM,AX);A0=Al;A0=this.ReplaceDecimalPoint(A0,Ay);if(AP<0){A0=this.ReplaceMinusSign(A0,A6);}break;}}var AO=BP+A0+AT;var Ac=false;if(Am.length!==0&&Ac){AO='<SPAN STYLE="COLOR: '+Am+'" >'+AO+"</SPAN>";}return AO;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.string","mstrmojo.gm._IsAnchorable","mstrmojo.ui._HasUITheme","mstrmojo.VisUtility");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.VisUtility;mstrmojo.gm.DndTooltip=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.gm._IsAnchorable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.gm.DndTooltip",left:0,top:0,zIndex:10,boundaryNodeName:"boundary",popupNodeName:"infoNode",baseTipClass:"arrow",infoNodeOffset:0,popupNodeOffset:5,anchor:null,boundary:null,utils:mstrmojo.VisChartUtils,themeClassName:"mojo-theme-light",markupString:'<div id="{@id}" class="mstrmojo-Tooltip {@cssClass}" style="top:{@top}px;left:{@left}px;z-index:{@zIndex};position:absolute;{@cssText};"><div class="mstrmojo-Tooltip-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Tooltip-content {@contentNodeCssClass}" style="{@contentNodeCssText}"><div class="content"></div><div class="arrow"><div class="after"></div><div class="before"></div></div></div></div>',markupSlots:{infoNode:function(){return this.domNode.childNodes[1];},contentNode:function(){return this.domNode.childNodes[1].firstChild;},tipNode:function(){return this.domNode.childNodes[1].lastChild;}},toggle:function A(H){if(H){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},updateContent:function(H,J,I){this.set("themeClassName",mstrApp.getThemeClassName());this.fillContent(H,J,I);this.positionDialog();},fillContent:function C(J,N,L){this.anchor=J;this.anchorPosition=N;this.contentNode.innerText=L||this.anchor.innerText||this.anchor.textContent,true;this.toggle(true);var H=F.getComputedFontStyle(this.contentNode),M=this.contentNode.innerText,I=F.measureTextWidth(M,H),K=130;if(I<=K){this.contentNode.style.width=I+"px";}else{this.contentNode.innerText=F.truncateTextToLineWithWordWrap(M,H,K,3);this.contentNode.style.width=K+"px";}},getTipDimension:function B(){var I=this[this.tipNodeName],H=E.position(I.firstChild);return H;},applyPopupNodePos:function G(J,I,L,H){var N=this[this.tipNodeName],K=N.style,O=this[this.popupNodeName],M=O.style;M.top=J+"px";M.left=I+"px";K.top=(L-J)+"px";K.left=(H-I)+"px";}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.Widget","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo._HasOwnAvatar");var B=mstrmojo,G=B.dom,D=B.css,F=B.VisUtility,E=B.gm.EnumDockPosition,H=B.VisEnum.ControlType,C=3;mstrmojo.VisSplitter=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.VisSplitter",cssClass:"gm-matrix-line",bodyCssClass:"gm-matrix-line-body",ctnType:H.LINE_CONTAINER,dir:"h",draggable:true,markControlType:false,markupString:'<div id="{@id}" class="{@cssClass}" type={@ctnType} style="width:{@bodyWidth}px; height:{@bodyWidth}px;"><div class="{@bodyCssClass}" type={@type} style="width:{@width}px; height:{@height}px;"></div></div>',markupSlots:{domBody:function(){return this.domNode.firstChild;}},init:function(I){this._super(I);},preBuildRendering:function(){var K=this.dir,M=this.styles,I=this.draggable,J=this.cssClass,L=this.bodyCssClass;J+=" "+K;J+=(I?" draggable":"");this.cssClass=J;L+=" "+K;L+=(I?" draggable":"");this.bodyCssClass=L;this.bodyWidth=parseInt(M.borderWidth,10)||1;},postBuildRendering:function(){this.domNode.identity=this.identity;this.domBody.identity=this.identity;F.applyStyles2DomNode(this.domBody,this.styles);if(this.markControlType){this.domNode.setAttribute("ctrlType",this.context.type);this.domBody.setAttribute("ctrlType",this.context.type);}},hide:function(){this.domNode.style.display="none";},updateSize:function(I){this.sizeInfo=I;},updateStyle:function(K){var J=this.domNode.style,I=parseInt(K.borderWidth,10)||1;this.styles=K;J.width=I+"px";J.height=I+"px";F.applyStyles2DomNode(this.domBody,K);},updatePosition:function(P){var O=P.left,N=P.top,M=P.width,I=P.height,K=this.dir,L=this.domNode.style,J=this.domBody.style;if(O!==undefined){if(K==="v"){O-=C;}L.left=O+"px";}if(N!==undefined){if(K==="h"){N-=C;}L.top=N+"px";}if(M!==undefined){L.width=M+"px";J.width=M+"px";}if(I!==undefined){L.height=I+"px";J.height=I+"px";}L.display="block";},createAvatar:function(){var J=this.domBody,M=G.position(J),I=J.cloneNode(true),K=I.style,L=D.getStyleValue(J,"borderColor");K.top=M.y+"px";K.left=M.x+"px";K.borderColor=L;return I;},isDragValid:function A(){return true;},ondragstart:function(P){var J,O,N=P.src.pos,L=this.context.dock,K=this.sizeInfo,M=Math.max(K.size-K.min,0),Q=Math.max(K.max-K.size,0),I=(this.dir==="v"?"x":"y");if(L===E.RIGHT||L===E.BOTTOM){J=N[I]-M;O=N[I]+Q;}else{J=N[I]-Q;O=N[I]+M;}this.lower=J;this.upper=O;this.startPos=P.src.pos;this._super(P);},ondragend:function(Q){this._super(Q);var O,J=this.dir,L=this.startPos,I=Q.tgt.pos,K=this.lower,P=this.upper,N=I.x,M=I.y;if(J==="v"){N=Math.max(N,K);N=Math.min(N,P);O=N-L.x;}else{M=Math.max(M,K);M=Math.min(M,P);O=M-L.y;}if(O!==0){this.raiseEvent({name:"splitterMoved",position:O,info:this.context});}},positionAvatar:function(P){var L=this.avatar,N=L.style,K=this.dir,J=this.lower,M=this.upper,I=P.x,O=P.y;if(K==="v"){I=Math.max(I,J);I=Math.min(I,M);N.left=I+"px";}else{O=Math.max(O,J);O=Math.min(O,M);N.top=O+"px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.string","mstrmojo.Widget","mstrmojo.VisUtility");var M=mstrmojo,R=M.css,O=M.hash,H=M.VisUtility,D=M.dom,A=M.string,C=M.VisEnum.ControlType,K=5,Q=15,G=1,L=5,E=8,S=0,F=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values");function I(){var V,X,U=0,W=this.styles,Z=this.contentData,Y=Z.length;if(D.isFF){this.DOTS_WIDTH=H.measureTextWidth("W…",W,2*E+2*G);this.DOTS_WIDTH_NO_PADDING=H.measureTextWidth("W…",W,2*G);}else{this.DOTS_WIDTH=H.measureTextWidth("…",W,2*E+2*G);this.DOTS_WIDTH_NO_PADDING=H.measureTextWidth("…",W,2*G);}for(V=0;V<Y;V++){X=Z[V];X.width=H.measureTextWidth(X.text,W,2*E+2*G);if(X.sort){U++;}if(X.extraAttributes.customScale){U++;}}this.nSort=U;}function J(){var d,f,c,Y=false,e=this.contentData,X=e.length,a=X,V=parseInt(this.width,10),b=(X-1)*K,Z=this.nSort*Q,U=b+Z,g,W;for(d=0;d<X;d++){delete e[d].actualWidth;}while(!Y){while(a>0){g=Math.floor((V-U)/a);c=false;for(d=0;d<X;d++){if(e[d].actualWidth!==undefined){continue;}f=e[d].width;if(f<=g){e[d].actualWidth=f;U+=f;c=true;a--;}}if(!c){break;}}if(a>0){for(d=X-1;d>=0;d--){if(e[d].actualWidth===undefined){a--;if(g<this.DOTS_WIDTH_NO_PADDING){e[d].actualWidth=-1;W=0;if(e[d].sort){W++;}if(e[d].extraAttributes.customScale){W++;}if(d>0){U-=K;}U-=W*Q;break;}else{if(g<=this.DOTS_WIDTH){e[d].noPadding=true;}}e[d].actualWidth=g;U+=g;}}if(d===0||a===0){Y=true;}}else{Y=true;}}this.contentWidth=U;}function N(){var X=parseInt(this.width,10),c=parseInt(this.height,10),V=this.contentWidth,b=(X-c)>>1,W=(V-c-2*S)>>1,U=(X-V)>>1,Z=this.align,Y=this.domNode,a={};if(Z==="left"||Z==="right"){R.addClass(Y,"gm-rotate-270");if(V<X){a.width=V;}a.top=b;if(Z==="left"){a.left=-W;}else{a.right=-W;}}else{if(Z==="top"||Z==="bottom"){if(V<X){a.width=V;a.left=U;}}else{if(Z==="center"){if(V<=X){a.width=V;a.right=0;a.bottom=0;}}}}H.positionDomNode(Y,a);}function B(W,U,V){if(W==="left"||W==="right"){return U?mstrmojo.desc(16180,"This row is sorted ascendingly based on ##").replace("##",V):mstrmojo.desc(16181,"This row is sorted descendingly based on ##").replace("##",V);}else{return U?mstrmojo.desc(16182,"This column is sorted ascendingly based on ##").replace("##",V):mstrmojo.desc(16183,"This column is sorted descendingly based on ##").replace("##",V);}}function P(){var g,q,e,c,h,Y,Z,U,l,o,d,p=document,V=p.createDocumentFragment(),j=this.domNode,X=this.styles,k=this.contentData,f=this.align,b=k.length,a=parseInt(this.height,10),W=0;for(g=0;g<b;g++){c=k[g];if(c.actualWidth<0){continue;}Y=c.text;h=c.extraAttributes;d=h.sortOrder;if(f==="left"||f==="right"){if(h.customScale){Z=p.createElement("div");Z.setAttribute("class","gm-lock-icon");Z.setAttribute("title",F);Z.style.left=W+"px";Z.style.top=((a-Q)>>1)+"px";V.appendChild(Z);W+=Q;}if(h.sort){Z=p.createElement("div");Z.setAttribute("class",d?"gm-sort-icon ascend":"gm-sort-icon");Z.setAttribute("title",B(f,d,Y));Z.style.left=W+"px";Z.style.top=((a-Q)>>1)+"px";V.appendChild(Z);W+=Q;}}l=p.createElement("div");l.setAttribute("class","gm-text-body-nowrap");l.setAttribute("type",C.GM_TEXT_BODY);l.innerHTML=A.encodeHtmlString(Y,true);l.container=j;l.style.width=c.actualWidth-2*G+"px";l.style.height=a-2*G+"px";if(!c.noPadding){l.style.padding=L+"px "+E+"px";}else{l.style.padding="0px";l.innerHTML="…";}H.applyStyles2DomNode(l,X);if(f==="left"||f==="right"){l.rotated=true;}U=p.createElement("div");U.setAttribute("class","gm-textbody-unit");U.appendChild(l);if(c.actualWidth<c.width){l.setAttribute("title",Y);}else{l.style.overflow="visible";}U.style.left=W+"px";U.style.width=c.actualWidth-2*G+"px";U.style.height=a-2*G+"px";V.appendChild(U);for(q in h){if(h.hasOwnProperty(q)){e=h[q];if((typeof e)==="string"||(typeof e)==="number"){U.setAttribute(q,String(e));}else{U[q]=h[q];}}}W+=c.actualWidth;if(f!=="left"&&f!=="right"){if(h.customScale){Z=p.createElement("div");Z.setAttribute("class","gm-lock-icon");Z.setAttribute("title",F);Z.style.left=W+"px";Z.style.top=((a-Q)>>1)+"px";V.appendChild(Z);W+=Q;}if(h.sort){Z=p.createElement("div");Z.setAttribute("class",d?"gm-sort-icon ascend":"gm-sort-icon");Z.setAttribute("title",B(f,d,Y));Z.style.left=W+"px";Z.style.top=((a-Q)>>1)+"px";V.appendChild(Z);W+=Q;}}if(g!==b-1&&k[g+1].actualWidth>0){o=p.createElement("div");o.setAttribute("class","gm-text-body-nowrap");o.innerHTML="|";o.style.left=W-2+2+"px";o.style.width=K+"px";o.style.padding="5px 2px";o.style.overflow="visible";H.applyStyles2DomNode(o,X);V.appendChild(o);W+=K;}}j.appendChild(V);}mstrmojo.VisAxisLabel=mstrmojo.declare(mstrmojo.Widget,[],{scriptClass:"mstrmojo.VisAxisLabel",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}; height:{@height}"></div>',init:function(U){this.align="left";this.styles={};this.contentData=[];this.contentWidth=0;if(this._super){this._super(U);}I.call(this);},postBuildRendering:function(){J.call(this);N.call(this);P.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.VisUtility");var M=mstrmojo.css,I=mstrmojo.VisUtility,L=mstrmojo.array,N=mstrmojo.string,F="vis-tooltip",E=20,C=165,D="px";function Q(){var U=this.domNode;U.innerHTML="";var R=document.createElement("div");R.className=F+"-container";var V=document.createElement("table");V.className=F+"-table";for(var S=0;S<2;S++){V.appendChild(document.createElement("COL"));}R.appendChild(V);this.domNode.appendChild(R);return V;}function K(S){var R=[],U=false;L.forEach(S,function(V){if(!V.isSuper){R.push(V.v);}else{U=true;R.push("<sup>"+V.v+"</sup>");}});return{hasSuper:U,htmlText:R.join("")};}mstrmojo.VisTooltip=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.VisTooltip",init:function P(R){this._super(R);M.addWidgetCssClass(this,(R&&R.widgetClass)?[R.widgetClass,F]:F);},toggle:function H(R){var S=mstrApp.isAppStatePrintPreview&&mstrApp.isAppStatePrintPreview();if(this.domNode){this.domNode.style.display=R&&!S?"block":"none";}},displayInfo:function O(X,a,R,S){var V=this.domNode,c=Q.call(this),Y=false,U=0,Z=0,b=c.childNodes[0],W=c.childNodes[1];X.forEach(function(l){var u,j,x,q,d,h,s,o,y,n,w,t,p=false,k=false;var e=c.insertRow(-1),g=e.insertCell(-1),r=e.insertCell(-1);e.className=F+"-tr";g.className=F+"-name "+F+"-td";r.className=F+"-value "+F+"-td";if(l===null){M.addClass(e,"separator");Y=true;}else{if(Y){M.addClass(e,"below-separator");}u=l.n;t=!l.skipEncode;g.innerHTML=t?N.encodeHtmlString(u,true):u;x=I.getComputedFontStyle(g);if(S){q=Math.ceil(I.measureTextWidthWithSpan(g.innerHTML,x,x.bonus,null,true,true));}else{q=Math.ceil(I.measureTextWidth(g.innerHTML,x,x.bonus));}s=3;if(q>C){o=I.truncateTextToLineWithWordWrap(u,x,C,s,true);if(o.canWordWrap){g.innerHTML=t?N.encodeHtmlString(o.text,true):o.text;}else{o=I.truncateTextToLineWithWordWrap(u,x,C,1);g.innerHTML=t?N.encodeHtmlString(o,true):o;}p=true;}U=Math.min(Math.max(U,q),C);j=l.v;n=l.isTrendLineFuncToken;if(n){y=K(j);}if(!n||!y.hasSuper){if(n){j=y.htmlText;}r.innerHTML=t?N.encodeHtmlString(j,true):j;d=I.getComputedFontStyle(r);if(S){h=Math.ceil(I.measureTextWidthWithSpan(r.innerHTML,x,x.bonus,null,true,true));}else{h=Math.ceil(I.measureTextWidth(r.innerHTML,d,d.bonus,null,true));}if(h>C){o=I.truncateTextToLineWithWordWrap(j,d,C,l.noTruncate?100:s,true);if(!o.canWordWrap){o=I.truncateTextToLineWithWordWrap(j,d,C,1,true);}r.innerHTML=t?N.encodeHtmlString(o.text,true):o.text;h=o.maxLineLen;k=true;}Z=Math.min(Math.max(Z,h),C);}else{r.innerHTML=y.htmlText;d=I.getComputedFontStyle(r);h=0;L.forEach(j,function(z){z.textWidth=I.measureSuperTextWidth(z.isSuper,z.v,d,d.bonus);h+=z.textWidth;});h=Math.ceil(h);if(h>C){o=I.truncateTextToLineWithWordWrapForTokens(j,d,C,l.noTruncate?100:s,true,true);if(!o.canWordWrap){o=I.truncateTextToLineWithWordWrapForTokens(j,d,C,1,true);}r.innerHTML=K(o.text).htmlText;h=o.maxLineLen;k=true;}Z=Math.min(Math.max(Z,h),C);}var f=parseInt(M.getComputedStyle(g).paddingRight);b.style.width=(U+f+1)+"px";W.style.width=(Z+1)+"px";w=U+Z+f;c.style.width=(w+2)+"px";Y=false;if(p||k){M.addClass(e,"wrapped");}}});if(a){this.moveTo(a.x,a.y);}},moveTo:function(a,Z){var Y=mstrmojo.dom.position(document.body),W=this.domNode,b=W.offsetWidth,X=W.offsetHeight,V=Y.x+Y.w,c=Y.y+Y.h,S=a+E,R=Z+E;if(S>V-b||R>c-X){if(S<=V-b){R=c-X;}else{if(R<=c-X){S=V-b;}else{S=V-b;R=Z-E-X;}}}var U=W.style;U.left=S+D;U.top=R+D;},doLayout:function A(R){var U=this.domNode.getElementsByTagName("table")[0];if(!U){return ;}var V=M.getComputedStyle(this.domNode),S=R-parseInt(V.paddingLeft,10)-parseInt(V.paddingRight,10);S-=U.rows[0].cells[0].offsetWidth;U.getElementsByClassName(F+"-value").forEach(function(W){W.style.maxWidth=S+D;});},posTo:function B(S){var R=this.domNode.style;R.left=S.x+D;R.top=S.y+D;},renderErrMsg:function G(R){Q.call(this).insertRow(-1).insertCell(-1).innerText=R;},hide:function J(){var R=this.domNode;this.toggle(false);if(R&&R.parentNode){R.parentNode.removeChild(R);R.innerHTML="";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi.models.DropZonesModel");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");mstrmojo.requiresDescs(11819,11825,11827,16057,16058,16059,16060,16061,16062,16063,16064,16065,16066,16067,16068,16069,16070,16071,16072,16073,16074,16075,16076,16077,16078,16079,16080,16081,16082,16083,16084,16085,16086,16087,16088,16089,16090,16091,16092,16093,16208,16209);var c=mstrmojo,O=c.array,S=c.hash,G=mstrmojo.dom,V=mstrmojo.string,b=c.vi.viz,M=mstrmojo.vi.models.DropZonesModel.ENUM_REQUIREMENT_TYPE,N=M.ATTRIBUTE,W=M.METRIC,C=b.EnumVisualizationTemplates,R=b.EnumVizStyles,K=R.GRAPH_MATRIX,Z=R.NEW_GRAPH_MATRIX,e=b.EnumWidgetTypes.GRAPH_MATRIX,d=R.MAPBOX,B={},P="custom",U="plugins.";B[R.GOOGLE_MAP]=C.GOOGLEMAP;B[R.HEAT_MAP]=C.HEATMAP;B[R.ESRI_MAP]=C.ESRIMAP;B[R.NETWORK]=C.NETWORK;B[R.IMAGE_LAYOUT]=C.IMAGELAYOUT;var X=["plugins.KPIWidget.KPIWidget","plugins.SmartKPIWidget.SmartKPIWidget"];function H(j,h,n){var k=[],l=function(p,q){var o={t:p,r:q};if(p===W&&n){o.s=true;}k.push(o);};if(j){l(W,j);}if(h){l(N,h);}return k;}var Q=[{n:mstrmojo.desc(11820,"Bar Chart"),id:"BarChart",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALBARAUTOMATIC,h:C.GRAPHMATRIXHORIZONTALBARAUTOMATIC}},{n:mstrmojo.desc(8121,"Line Chart"),id:"LineChart",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALLINEAUTOMATIC,h:C.GRAPHMATRIXHORIZONTALLINEAUTOMATIC}},{n:mstrmojo.desc(11821,"Area Chart"),id:"AreaChart",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALAREAAUTOMATIC,h:C.GRAPHMATRIXHORIZONTALAREAAUTOMATIC}},{n:mstrmojo.desc(11822,"Bubble Chart"),id:"BubbleChart",mr:H(2,1),vt:C.GRAPHMATRIXBUBBLECIRCLEMM},{n:mstrmojo.desc(11823,"Pie Chart"),id:"PieChart",mr:H(1,1),vt:C.GRAPHMATRIXPIE},{n:mstrmojo.desc(11824,"Combo Chart"),id:"ComboChart",mr:H(2,1),vt:C.GRAPHCOMBINATIONBARAREADUALAXIS}];Q.forEach(function(h){h.s=K;h.wtp=e;});var g=[{n:mstrmojo.desc(15130,"Clustered Bar Chart"),id:"ClusteredBarChart",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALBARCLUSTERED,h:C.GRAPHMATRIXHORIZONTALBARCLUSTERED}},{n:mstrmojo.desc(15129,"Stacked Bar Chart"),id:"BarChart",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALBARSTACKED,h:C.GRAPHMATRIXHORIZONTALBARSTACKED}},{n:mstrmojo.desc(8121,"Line Chart"),id:"LineChart",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALLINEAUTOMATIC,h:C.GRAPHMATRIXHORIZONTALLINEAUTOMATIC}},{n:mstrmojo.desc(15233,"Stacked Area Chart"),id:"AreaChart",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALAREASTACKED,h:C.GRAPHMATRIXHORIZONTALAREASTACKED}},{n:mstrmojo.desc(11822,"Bubble Chart"),id:"BubbleChart",mr:H(2,1),vt:C.GRAPHMATRIXBUBBLECIRCLEMM},{n:mstrmojo.desc(350,"Histogram"),id:"Histogram",mr:H(1,1,true),vt:C.GRAPHMATRIXVERTICALHISTOGRAM},{n:mstrmojo.desc(15411,"Grid Chart"),id:"GridChart",mr:H(0,0),vt:C.GRAPHMATRIXGRIDCHART},{n:mstrmojo.desc(3156,"Box Plot"),id:"BoxPlot",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALBOXPLOT,h:C.GRAPHMATRIXHORIZONTALBOXPLOT}},{n:mstrmojo.desc(5594,"Waterfall"),id:"Waterfall",mr:H(1,1),vt:{v:C.GRAPHMATRIXVERTICALWATERFALL,h:C.GRAPHMATRIXHORIZONTALWATERFALL}}];g.forEach(function(h){h.cls="ngm";h.s=Z;h.wtp=e;});var L={GridChart:{summary:mstrmojo.desc(16057,"Displays data in a tabular format"),example:mstrmojo.desc(16058,"Example: Create directory with customer information and key performance indicators (KPIs)"),requirements:mstrmojo.desc(16059,"Uses 1+ ##attributes### and/or 1+ #metrics###")},BarChart:{summary:mstrmojo.desc(16060,"Uses length to compare data values across categories"),example:mstrmojo.desc(16061,"Example: Compare profit data of different sales teams"),requirements:mstrmojo.desc(16062,"Uses 1+ ##attributes### and 1+ #metrics###")},ClusteredBarChart:{summary:mstrmojo.desc(16060,"Uses length to compare data values across categories"),example:mstrmojo.desc(16061,"Example: Compare profit data of different sales teams"),requirements:mstrmojo.desc(16062,"Uses 1+ ##attributes### and 1+ #metrics###")},LineChart:{summary:mstrmojo.desc(16065,"Uses a line to show the value of a metric over time"),example:mstrmojo.desc(16066,"Example: Show stock prices over the past decade"),requirements:mstrmojo.desc(16067,"Uses 1+ ##attributes### and 1+ #metrics### (time attribute recommended)")},AreaChart:{summary:mstrmojo.desc(16068,"Uses the area within a line chart to show the value of a metric over time"),example:mstrmojo.desc(16069,"Example: Compare the amount of revenue from different sources over time"),requirements:mstrmojo.desc(16067,"Uses 1+ ##attributes### and 1+ #metrics### (time attribute recommended)")},BubbleChart:{summary:mstrmojo.desc(16070,"Uses position, color and size to show relationships and correlations"),example:mstrmojo.desc(16071,"Example: Compare GDP, population and life expectancy for different countries"),requirements:mstrmojo.desc(16072,"Uses 1+ ##attributes### and 2+ #metrics###")},PieChart:{summary:mstrmojo.desc(16073,"Shows the composition of a total value broken by category"),example:mstrmojo.desc(16074,"Example: Compare the proportions of funding sources for a university"),requirements:mstrmojo.desc(16075,"Uses 1+ ##attributes### and 1 #metric###")},ComboChart:{summary:mstrmojo.desc(16076,"Combines a line and bar chart for comparison of metrics with different units"),example:mstrmojo.desc(16077,"Example: Compare monthly precipitation and temperature in a given region"),requirements:mstrmojo.desc(16078,"Uses 1+ ##attributes### and 2+ #metrics###")},Histogram:{summary:mstrmojo.desc(16087,"Uses length to show the frequency of values within given categories/metric ranges"),example:mstrmojo.desc(16088,"Example: Determine the number of employees that fall within a given salary range"),requirements:mstrmojo.desc(16075,"Uses 1+ ##attributes### and 1 #metric###")},BoxPlot:{summary:mstrmojo.desc(16089,"Uses several data points to visualize means, medians, ranges and outliers"),example:mstrmojo.desc(16090,"Example: Show how customer satisfaction scores vary among different survey questions"),requirements:mstrmojo.desc(16091,"Uses 1+ ##attributes### and 1+ #metrics###")},Waterfall:{summary:mstrmojo.desc(16092,"Uses bars and colors to show how categories increase or decrease a metric value"),example:mstrmojo.desc(16093,"Example: Examine how different spending and income categories impact monthly budgeting"),requirements:mstrmojo.desc(16091,"Uses 1+ ##attributes### and 1+ #metrics###")},VIHeatMapVisualizationStyle:{summary:mstrmojo.desc(16063,"Uses rectangles of varying sizes and colors to show hierarchical data"),example:mstrmojo.desc(16064,"Example: Compare sales from different clothing categories at a retail store"),requirements:mstrmojo.desc(16062,"Uses 1+ ##attributes### and 1+ #metrics###")},MapboxVisualizationStyle:{summary:mstrmojo.desc(16079,"Uses Mapbox to visualize data geographically"),example:mstrmojo.desc(16080,"Example: Use layering and clustering features to visualize frequency of earthquakes around the world"),requirements:mstrmojo.desc(16081,"Uses 1+ ##attributes### (including one geographic) and 1+ #metrics###")},NetworkVisualizationStyle:{summary:mstrmojo.desc(16084,"Uses links and nodes to show relationships between data"),example:mstrmojo.desc(16085,"Example: Create a family tree"),requirements:mstrmojo.desc(16086,"Uses 2+ ##attributes### and 1+ #metrics###")},GoogleMapVisualizationStyle:{summary:mstrmojo.desc(16082,"Uses ESRI maps to visualize data geographically"),example:mstrmojo.desc(16083,"Example: Create a density map of world population"),requirements:mstrmojo.desc(16081,"Uses 1+ ##attributes### (including one geographic) and 1+ #metrics###")},KPICardVisualizationStyle:{summary:mstrmojo.desc(16208,"Provides quick performance indications as a single numeric or with an additional trend indicator"),example:mstrmojo.desc(16209,"Example: View daily unique visitor counts for a website over the last month"),requirements:mstrmojo.desc(16075,"Uses 1+ ##attributes### and 1 #metric###")}};var F={BUILT_IN_LIST:1,CUSTOM_LIST:2};function I(k){var l=[],h=mstrConfig.pluginsVisList||{},j=function(n,p,o){o=o||[];p=isNaN(p)?0:parseInt(p,10);if(p>0){o.push({t:n,r:p});}return o;};Object.keys(h).forEach(function(t){var u=h[t],w=u.s,n=u.d,p=u.c,r=p.indexOf(U)!==-1?F.CUSTOM_LIST:F.BUILT_IN_LIST;if(!(k&r)){return ;}if(w===K){u.st.forEach(function(y){var x=O.find(Q,"id",y);if(x>=0){l.push(Q[x]);}});return ;}if(w===Z){if(mstrApp.supportFeature("ngm")){var o=mstrApp.supportFeature("ngmPartial");u.st.forEach(function(y){var x=O.find(g,"id",y);if(x>=0){if(o){if(y==="Waterfall"||y==="Histogram"||y==="BoxPlot"){l.push(g[x]);}}else{l.push(g[x]);}}});}return ;}if(w===d&&!mstrApp.supportFeature("mbx")){return ;}if(w==="VisBuilderNew"&&!mstrApp.isVisBuilder){return ;}if(X.indexOf(p)>=0){return ;}var s=u.desc;if(s){n=mstrmojo.desc(s,"");}var q;if(w===R.KPICARD){q=H(u.mm,u.ma,true);}else{q=j(N,u.ma,j(W,u.mm));}l.push({n:n,s:w,mr:q,id:w,dz:u.dz,vt:B[w],wtp:u.wtp,isNS:u.isNS,pn:u.pn||null});});O.forEach(l,function(n){if(n.id in L){var o=L[n.id];n.summary=o.summary;n.example=o.example;n.requirements=o.requirements;}});return l;}function J(h){return I(F.BUILT_IN_LIST+F.CUSTOM_LIST).filter(function(j){return j.s===h;}).map(function(j){return{s:j.s,vt:j.vt||-1};})[0];}function A(h,j){window.FormWrapper.doVisRemove(h,j);}mstrmojo.vi.ui.VizGalleryList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.VizGalleryList",init:function Y(h){this._super(h);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIGalleryList");this.items=(this.items||[]).concat(I(this.type));},items:null,useRichTooltip:true,itemMarkup:null,type:F.BUILT_IN_LIST,getItemMarkup:function E(h){if(!this.itemMarkup){this.itemMarkup=this._super(h).replace(">{@en@n}<",'><div><div><div class="unsafe-icn"></div></div></div><');}return this.itemMarkup;},getItemProps:function f(k,h){var j=this._super(k,h);j.addCls("ic-"+k.id);if(k.isNS){j.addCls("nonsafe");}if(this.type===F.CUSTOM_LIST){j.addCls(P);}return j;},select:function(k,h){if(!k){return ;}k=O.ensureArray(k);var n=this._removeAll(),p=this._addSelections(k),l;if(this.selectionPolicy!=="reselect"){for(l=n.length-1;l>=0;l--){var o=O.indexOf(p,n[l]);if(o>-1){n.splice(l,1);p.splice(o,1);}}}var j={name:"selectionChange",added:p,removed:n};if(h){if(this.onselectionChange){this.onselectionChange(j);}}else{this.raiseEvent(j);}},showTooltip:function D(u,o){var j=G.eventTarget(o,u);if(j.className.indexOf("unsafe-ic")===-1){return ;}G.stopPropogation(null,u);var q=G.findAncestorByAttr(j,"idx",true,this.domNode),l=q&&q.node,s=l&&l.className.indexOf(P)>-1,x=this.parent,r=s?x&&x.customVizList:x&&x.vizList,w=q&&r&&r.items[q.value],h=w&&w.n;if(!h||h===""){return ;}var n=G.position(l),t=mstrmojo.desc(15365,"Visualizations that use it may display as a grid when this dossier is opened in a context where these plugins are not available."),k=mstrmojo.desc(15364,"## plugin is only available on your local machine.").replace("##",h),p='<div class="name">'+k+'</div><div class="dsc">'+t+"</div>";this.richTooltip={posType:mstrmojo.tooltip.POS_TOPRIGHT,cssClass:"viGallery-tooltip vi-warning nsicn-tooltip vi-regular vi-tooltip-D",content:p,top:n.y-12,left:n.x-7,keepArrowYPos:true};this._super(u,o);},onItemContextMenu:function a(j,h){var k;if(j.pn&&!(mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.SUPPORT_LIVEMODE)&&mstrApp.getWSLiveMode())){this.hideTooltip();k=new mstrmojo.ui.menus.MenuConfig({position:mstrmojo.dom.getMousePosition(h.e,h.hWin),isHostedWithin:false});k.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){A(j.id,j.pn);});this.openPopup(k.newInstance());}}});mstrmojo.vi.ui.VizGalleryList.getVizList=I;mstrmojo.vi.ui.VizGalleryList.getVisType=J;mstrmojo.vi.ui.VizGalleryList.VIZ_LIST_TYPE=F;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css","mstrmojo.Button","mstrmojo.Label","mstrmojo.rw.ConditionWalk","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.ui._IsIncFetchList","mstrmojo.ui.ColumnWalk","mstrmojo.mstr.DocElementDataHelper");var F=mstrmojo.expr.ET.MQ,B=mstrmojo.expr.ET.MC,H=mstrmojo.css,G=mstrmojo.desc(14387,"Evaluate this condition independent of other dataset level conditions");var D=function(Q,S){var P=Q.et,N=this.parent&&this.parent.docModel&&this.parent.docModel.datasets,M=Q.m&&mstrmojo.rw.ConditionWalk.isMdxDM(Q.m.did,N),R=((P===F||P===B)&&!this.inRelation&&!M)?"block":"none",O=(((S===1)||P!==F)&&!M)?1:0;H.toggleClass(this.toolNode,"unselectable",P===B);this.toolNode.style.display=R;this.level.set("selectedIndex",O);this.includeExist.set("visible",O===1&&(P===B||P===F));this.includeExist.set("checked",Q.idcsi===undefined?false:Q.idcsi);};mstrmojo.vi.ui.editors.fe.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,[mstrmojo.ui._IsIncFetchList],{scriptClass:"mstrmojo.vi.ui.editors.fe.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="tools"></div><div class="apply"></div></div>',markupSlots:mstrmojo.hash.copy({toolNode:function(){return this.domNode.childNodes[2];}},mstrmojo.hash.copy(mstrmojo.rw.ConditionWalk.prototype.markupSlots)),layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",toolNode:"auto",applyNode:"auto"},xt:true},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"800px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var M=this.parent;if(M.close){M.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var M=this.parent;if(M.onOK){M.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:"",ignoreLayout:true}],init:function K(M){this._super(M);this.attachEventListener("conditionWalkUpdateOkBtn",this.id,function(N){var P=N.valid,O=this.parent;O.toggleOkButtonStatus(P);});},postCreate:function I(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Label",slot:"toolNode",text:mstrmojo.desc(13517,"Calculate on")},{scriptClass:"mstrmojo.ui.Pulldown",slot:"toolNode",alias:"level",isHostedWithin:false,items:[{n:mstrmojo.desc(13518,"Template level"),v:0},{n:mstrmojo.desc(13519,"Dataset level"),v:1}],onitemSelected:function M(N){var O=this.parent;if(O&&O.condition&&O.visible){O.includeExist.set("visible",N.v===1);O.condition.level=N.v;}}},{scriptClass:"mstrmojo.ui.Checkbox",alias:"includeExist",slot:"toolNode",postBuildRendering:function(){this.domNode.innerHTML=G;},oncheckedChange:function(){var N=this.parent;if(N){N.model.set("idcsi",this.checked);}}}]);if(this._super){this._super();}},onvisibleChange:function J(M){var N=this.condition;if(N&&this.toolNode&&this.visible){D.call(this,N.data,N.tree.level);}if(this._super){this._super(M);}},onmodeledit:function A(M){if(this._super){this._super(M);}if(this.toolNode){D.call(this,this.model.get(),this.model.level);}},getAttributeForms:function L(M){return mstrmojo.rw.ConditionWalk.getAttForms(M,this.editor.docModel.datasets);},getElements:function E(P,R){var Q={},N=R.complete,O=this;this.scrollNode=this.columnWalk.es.scrollNode;var M=this.scrollNode&&this.scrollNode.style;if(M){M.height="100%";}if(!this.ifDataHelper){this.ifDataHelper=new mstrmojo.mstr.DocElementDataHelper({source:this.editor.docModel.getDataService()});}else{this.ifDataHelper.set("items",null);}this.columnWalk.es.es.allowUnlistedValues=false;this.updateBrowseElementsParams(Q,P);this.ifDataHelper.browseConfig=Q;R=mstrmojo.func.wrapMethods(R,{complete:function(S){O.initScroll();}});this.ifDataHelper.getItems(1,R);},postNext:function C(){this.columnWalk.es.updateList(this.ifDataHelper.items);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.UnitList","mstrmojo.vi.ui._HasUnitListAvatar","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo._CanHandleTwoClicks");mstrmojo.requiresDescs(629,6424);var I=mstrmojo.desc,F=mstrmojo.dom,J=mstrmojo.hash,B=mstrmojo.string,L="mnu",C="clsx",O="icn "+L+"_sub",M="icn "+C+"_sub",R;function Q(S,V,U){return function(){V.style.overflow=S?"visible":"hidden";if(U){U();}};}mstrmojo.vi.ui.InteractiveUnitList=mstrmojo.declare(mstrmojo.vi.ui.UnitList,[mstrmojo.vi.ui._HasUnitListAvatar,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._CanHandleTwoClicks],{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:true,panelId:"",useRichTooltip:true,hasTooltipContent:function(U,V){var S=this.getLabelNode(V);return S.scrollWidth>S.clientWidth;},getItemTooltip:function(e,V,b){var c=this.getLabelNode(V);if(this.hasTooltipContent(e,V)){var W=F.position(c),Y=e.desc?e.desc:e.dsc,d=(this.zonesModel||{}).docModel,U,a='<div class="name">'+B.encodeHtmlString(e.n,true)+"</div>"+(e.objectNameinDataset?('<div class="dsc">'+B.encodeHtmlString(mstrmojo.desc(15112,"Name in Dataset:")+" "+e.objectNameinDataset,true)+"</div>"):"");if(e.dsName){U=e.dsName;}else{if(e.datasetId){U=d&&d.datasets&&d.datasets[e.datasetId].name;}else{if(e.id){var Z=d&&d.getObjectInfo(e.id),X=Z&&d.findDatasetIdFromUnit(Z.did);U=d&&d.datasets&&X&&d.datasets[X].name;}}}a+=(U?'<div class="dataset">'+B.encodeHtmlString(mstrmojo.desc(8502,"Dataset")+": "+U,true)+"</div>":"")+(Y?'<div  class="dsc">'+B.encodeHtmlString(Y,true)+"</div>":"");var S={areaId:e._renderIdx+"text",cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:a,top:W.y-6,left:W.x,enableHover:true};return S;}return null;},showTooltip:function D(S,W){var V=S.target||F.eventTarget(S.hWin,S.e),U=this.getItemFromTarget(V);if(U&&U.n){var X=this.getItemNodeFromTarget(V);this.richTooltip=this.getItemTooltip(U,X,V);if(this.richTooltip){this._super(S,W);}}},getItemMarkup:function E(S){if(!R){R=this._super(S).replace(">{@en@n}",'><span class="txt" unselectable="on">{@en@n}</span><div class="'+L+'"><div title="'+I(6424,"Menu")+'" class="'+O+'"></div></div><div class="'+C+'"><div class="'+M+'"></div></div>').replace("<{@tag}",'<{@tag} unselectable="on" ');}return R;},getLabelNode:function N(S){return S.getElementsByClassName("txt")[0];},ondblclick:function H(S){var V=S.getTarget(),W=this.getItemNodeFromTarget(V),U=(F.findWidget(W)===this)&&this.getItemFromTarget(V);if(!!U){S.cancel();this.doubleClickItem(U);}},onItemContextMenu:function P(W,U){var Y=U.getTarget();if(W){this.closePopup();var S=mstrmojo.all[this.panelId],V=S&&S.getPanelSelectedItems&&S.getPanelSelectedItems(),X=V&&V.length>1;this[X?"showMultiSelectionMenu":"showItemMenu"](X?V:W,this.getItemNodeFromTarget(Y),F.getMousePosition(U.e,U.hWin));return true;}},configurePopup:function K(S,X,W,V){mstrmojo.all[this.panelId].addPopupHandlers(S);var U=X.parentNode;S.addPopupHandlers("iulMenuOverflow",Q(true,U,W),Q(false,U,V));S.hostId=this.id;S.isHostedWithin=false;S.hostElement=X;},showItemMenu:mstrmojo.emptyFn,showMultiSelectionMenu:mstrmojo.emptyFn,deleteItem:mstrmojo.emptyFn,doubleClickItem:mstrmojo.emptyFn,twoClicksItem:mstrmojo.emptyFn,onTwoClicks:function(S){if(S.firstTarget==S.secondTarget){var U=this.getItemFromTarget(S.secondTarget);S.cancel();if(!!U){this.twoClicksItem(U,S);}}},isDragValid:function A(S){return !isNaN(parseInt(S.src.node.getAttribute("idx"),10))||this._super(S)||false;},getSelectedItems:function G(){var W=this,S=this.items,V=null,U=[];J.forEach(this.selectedIndices,function(Y,X){V=S[X];if(Y&&V){V=J.copy(V);V.ulist=W;V.itemNode=W._getItemNode(V._renderIdx);U.push(V);}});return U;}});mstrmojo.vi.ui.InteractiveUnitList.CLS_HAS_MENU="has-m";mstrmojo.vi.ui.InteractiveUnitList.CLS_HAS_X="has-x";}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.gm.DndTooltip","mstrmojo.VisUtility","mstrmojo.vi.models.EnumDragSources");var N=mstrmojo,I=N.dom,K=N.VisUtility,C=N.vi.models.EnumDragSources,J=N.array;mstrmojo.gm._SupportDndAsBlackBox=mstrmojo.provide("mstrmojo.gm._SupportDndAsBlackBox",{_mixinName:"mstrmojo.gm._SupportDndAsBlackBox",mainContainerNode:"domNode",handleDndForParentNode:true,dndAsBlackBox:true,allowDrop:function H(R){var S=R.src.data,Q=S&&S.src;if(Q===C.DATASETS||Q===C.VIZ_EDITOR||Q===C.VIZ||Q===C.ALL_OBJECT_LIST){return true;}return false;},cleanUpAfterTarget:function E(Q){this._super(Q);if(this.domNode.contains(this.dndHighlightCanvas)){this.domNode.removeChild(this.dndHighlightCanvas);}delete this.dndHighlightCanvas;if(this.dndTooltip){this.dndTooltip.destroy();}delete this.dndTooltip;},ondragenter:function M(R){if(this._super){this._super(R);}var X=this.isEmpty();if(X&&!this.excludeData){R.tgt.widget=this;this.raiseEvent({name:"toggleCtrlOverlay",visible:false,controls:this.getVisEmptyMsgControls()});}var W;if(!this.dndHighlightCanvas){var Q=document.createElement("canvas"),V=I.position(this.domNode),U=I.position(this[this.mainContainerNode]);this.domNode.appendChild(Q);Q.style.position="absolute";Q.style.zIndex=1000;Q.width=U.w||V.w;Q.height=U.h||V.h;Q.style.top=(U.y-V.y)+"px";Q.style.left=(U.x-V.x)+"px";this.dndHighlightCanvas=Q;}if(!this.dndTooltip){W=document.createElement("div");document.body.appendChild(W);var S={placeholder:W,contentNodeCssClass:"gm-dnd-replace-node-tooltip",boundary:document.body};this.dndTooltip=new mstrmojo.gm.DndTooltip(S);this.dndTooltip.render();this.dndTooltip.parent=this;}this.ondragover(R);},ondragover:function B(Q){if(this._super){this._super(Q);}if(this.dndAsBlackBox){this.clearHighlightDropZoneOnGraph();this.drawBlackBoxHighlight(Q);}},ondragleave:function P(Q){var R=this.isEmpty();if(R){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});}if(this._super){this._super(Q);}},ondrop:function L(R){if(this._super){this._super(R);}if(this.dndAsBlackBox){var V=this.zonesModel,U=R.src.data,Q=U.items,S=R.getCtxtDragData().src;this.getDocModel().selectVIUnit(this.parent.id);V.addUnitsFromDataSource(Q,U.dsid,R.actions,S===C.ALL_OBJECT_LIST?R.callback:null);}},clearHighlightDropZoneOnGraph:function G(){var R=this.dndHighlightCanvas,Q=R.getContext("2d");Q.clearRect(0,0,R.width,R.height);this.dndTooltip.toggle(false);},isMetric:function O(Q){return Q&&Q.t===4;},isAttrCategory:function D(Q){return Q&&(Q.t===12||Q.t===1||Q.t===47);},singleTypeObject:function F(Q){var U=0,S=0,R=this;J.forEach(Q.src.data.items,function(V){if(R.isAttrCategory(V)){U++;}else{if(R.isMetric(V)){S++;}}});return !(U>0&&S>0);},drawBlackBoxHighlight:function A(S){var U=this.dndHighlightCanvas,b=U.getContext("2d"),Y=I.position(this[this.mainContainerNode]),Q=I.position(this.domNode),R=Y.w||Q.w,a=Y.h||Q.h,X=Math.min(30,0.25*R),c=Math.min(30,0.25*a);b.save();b.beginPath();b.rect(X,c,R-2*X,a-2*c);b.fillStyle="#bce8ff";b.globalAlpha=0.4;b.fill();b.strokeStyle="#34abeb";b.globalAlpha=1;K.drawDashLine(b,X,c,X,a-c,2,2);K.drawDashLine(b,X,c,R-X,c,2,2);K.drawDashLine(b,R-X,c,R-X,a-c,2,2);K.drawDashLine(b,X,a-c,R-X,a-c,2,2);b.restore();if(!this.singleTypeObject(S)){var V=this.dndTooltip,Z={x:S.tgt.e.x,y:S.tgt.e.y,w:0,h:0},W=S.src.widget.avatar;if(W){Z=I.position(W);}V.placementOrder=[V.PLACEMENT_ABOVE];V.popupNodeOffset=5;V.updateContent(null,Z,"Add Attributes and Metrics");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var q=mstrmojo,B=q.css,r=mstrmojo.array,Q=mstrmojo.hash,I=mstrmojo.num,H=mstrmojo.VisUtility,c=mstrmojo.chart,L=c.enums,d=L.EnumGraphMajorType,K=c.common.Utility,V=c.model,N=V.enums,z=N.EnumDSSGraphObject,AD=mstrmojo.VisEnum.ControlType,AA=q.gm,W=mstrmojo.gm.EnumTextAlignH,t=mstrmojo.gm.EnumTextAlignV,y=";",l=",",A="_tmsp",M=" ",a=-20,n=mstrmojo.gm.EnumSelectionOptionLevel,AF=mstrmojo.gm.EnumShape,h=mstrmojo.color,J=mstrmojo.gm.EnumIdentityType,S=0.00001,E,b=Math.pow(2,30),e=Math.pow(2,60);var g=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];function o(AL,AK){var AM,AJ=AL.length;if(AJ!==AK.length){return false;}for(AM=0;AM<AJ;AM++){if(AL[AM]!==AK[AM]){return false;}}return true;}function AE(AM,AK,AN){var AL=false,AO=AN+A,AJ=AM[AO],AP=AK[AO];if(AK[AN]===undefined){AL=true;}else{if((AP===undefined&&AJ!==undefined)||(AP!==undefined&&AJ!==undefined&&AP<AJ)){AL=true;}}if(AL){AK[AN]=AM[AN];if(AP!==undefined){AK[AO]=AJ;}}}function AI(AK,AJ){var AL;for(AL in AK){if(AK.hasOwnProperty(AL)){AE(AK,AJ,AL);}}return AJ;}function Y(AN){var AM={},AL,AK=[],AJ;r.forEach(AN,function(AO){if(AO!==undefined){AK.push(AO);}});AJ=AK.length;if(AJ===1){return AK[0];}for(AL=0;AL<AJ;AL++){AI(AK[AL],AM);}return AM;}function AC(AJ){return{n:AJ,s:AJ.toString(),on:AJ};}function Z(AL,AJ,AN){if(AJ===AL){return 0;}var AK=AJ-AL,AM=1;while(AK<1){AK*=10;AM/=10;}while(AK>=10){AK/=10;AM*=10;}if(AK<1.8){AM*=0.2;}else{if(AK<3.1){AM*=0.4;}else{if(AK<4.6){AM*=0.5;}else{if(AK>=8.1){AM*=2;}}}}if(AN){AM=Math.round(AM);if(AM<1){AM=1;}}return AM;}function C(AM,AQ,AS,AK){var AO=[];if(AM===AQ){if(AM<0){AO.push(mstrmojo.gm.GMUtility.formatNumber(AM,"nearest"));}AO.push({n:0,s:"0",on:0});if(AM>0){AO.push(mstrmojo.gm.GMUtility.formatNumber(AM,"nearest"));}return AO;}var AJ=AK>0?AK:Z(AM,AQ,AS);var AL=Math.ceil(AQ/AJ)*AJ;if(AL-AQ>=AJ*0.9){AL=Math.floor(AQ/AJ)*AJ;}var AP=Math.floor(AM/AJ)*AJ;if(AM-AP>=AJ*0.9){AP=Math.ceil(AM/AJ)*AJ;}var AR=Math.floor((AL-AP+AJ/100)/AJ)+1,AN;for(AN=0;AN<AR;++AN){AO.push(mstrmojo.gm.GMUtility.formatNumber(AP+AN*AJ,"nearest"));}return AO;}function U(AJ,AM){var AL;AJ.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AJ.mStep=this.mMinimum<0?0.2:0.1;if(AM.mUseCustomMinMax){var AK=AM;AJ.mMaxTick=AK.mAxisMaxValue;AJ.mMinTick=AK.mAxisMinValue;AJ.mMaxTick=Math.min(1,AJ.mMaxTick);AJ.mMinTick=Math.max(-1,AJ.mMinTick);AJ.mStep=0.1;}else{if(this.mMaximum>=0.5){AJ.mMaxTick=1;AJ.mMinTick=Math.floor(this.mMinimum/AJ.mStep)*AJ.mStep;AJ.mMinTick=(AJ.mMinTick*this.mMinimum<0)?0:(AJ.mMinTick>0?0:AJ.mMinTick);if(this.mMinimum<-0.5){AJ.mMinTick=-1;}}else{if(this.mMaximum>0){AJ.mMaxTick=Math.ceil(this.mMaximum/AJ.mStep)*AJ.mStep;AJ.mMinTick=-1;}else{AJ.mStep=0.1;AJ.mMaxTick=0;AJ.mMinTick=-1;}}}}else{AJ.mMinTick=(this.mMinimum<0)?-1:0;if(x.call(this,AJ)){return ;}AJ.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AJ.mMaxTick-AJ.mMinTick)/10;}for(AL=AJ.mMinTick+AJ.mStep;AL+c.gModuleMain.mTolerance<AJ.mMaxTick;AL+=AJ.mStep){AJ.mTicks.push(Math.round(AL*100)/100);}}function P(AJ,AO){var AN,AK,AQ=AO,AP=AQ.mDrawCustomLine,AL=AQ.mAxisCustomValue,AM;AJ.mStep=1;if(this.mMaximum<=0){AJ.mMinTick=1;AJ.mMaxTick=10;if(AP&&AL<=1){AQ.mAxisCustomValue=AJ.mMinTick;}return ;}if(this.mMinimum<=0){AK=this.mMaximum>1?0:-1;AJ.mMinTick=Math.pow(10,AK);if(AQ.mUseCustomMinMax){AJ.mMaxTick=this.mMaximum;AN=Math.floor(j.call(this,this.mMaximum));if(j.call(this,this.mMaximum)===AN){AN--;}}else{AN=Math.ceil(j.call(this,this.mMaximum));AJ.mMaxTick=Math.pow(10,AN);}for(AM=AK+1;AM<AN;++AM){AJ.mTicks.push(Math.pow(10,Math.floor(AM)));}if(AP&&AL<=0){AQ.mAxisCustomValue=Math.max(AJ.mMinTick,AQ.mAxisCustomValue);}return ;}if(AQ.mUseCustomMinMax){AN=j.call(this,this.mMaximum);AK=j.call(this,this.mMinimum);AJ.mMaxTick=this.mMaximum;AJ.mMinTick=this.mMinimum;}else{AN=Math.ceil(j.call(this,this.mMaximum));AK=Math.floor(j.call(this,this.mMinimum));AJ.mMaxTick=Math.pow(10,AN);AJ.mMinTick=Math.pow(10,AK);}for(AM=AK+1;AM<AN;++AM){AJ.mTicks.push(Math.pow(10,Math.floor(AM)));}if(AP&&AL<=0){AQ.mAxisCustomValue=AJ.mMinTick;}}function u(AT,AO){var AL=AO,AJ,AM;AT.mStep=f.call(this,this.mMaximum,this.mMinimum,AL.mAlwaysIncludeZero);AT.mMaxTick=Math.ceil(this.mMaximum/AT.mStep)*AT.mStep;AT.mMinTick=Math.floor(this.mMinimum/AT.mStep)*AT.mStep;AT.mMaxTick=AT.mMaxTick<this.mMaxmum?this.mMaxmum:AT.mMaxTick;AT.mMinTick=AT.mMinTick>this.mMinimum?this.mMinimum:AT.mMinTick;AT.mMinTick=(AT.mMinTick*this.mMinimum<0)?0:AT.mMinTick;if(AL.mAlwaysIncludeZero){AT.mMaxTick=(this.mMaximum<0)?0:AT.mMaxTick;AT.mMinTick=(this.mMinimum>0)?0:AT.mMinTick;}var AN=AT.mMaxTick-AT.mMinTick;if(AT.mStep>=AN){return ;}if(x.call(this,AT)){return ;}AJ=Math.floor((AT.mMaxTick-AT.mMinTick+AT.mStep/100)/AT.mStep)+1;var AP=this.mNumberFormat;for(AM=1;AM<AJ-1;++AM){var AR=AT.mMinTick+AM*AT.mStep,AS,AK,AQ;if(AT.mStep<1&&AP.mFormatType===4&&AP.mCustomFormat.indexOf("%")!==-1){AS=AR*100;if(!K.isIntegar(AS)){AK=Math.round(AS);AQ=Math.abs(AS-AK);if(AQ<S){AR=AK/100;}}}AT.mTicks.push(AR);}}function D(AT,AN){var AS=AN,AM,AJ,AQ,AL,AP,AO,AK,AR;AT.mMaxTick=AS.mAxisMaxValue;AT.mMinTick=AS.mAxisMinValue;if(x.call(this,AT)){return ;}if(!X.call(this)||this.mMajorGrid.mUseManualGrid){AT.mStep=f.call(this,AT.mMaxTick,AT.mMinTick,false);AM=AT.mMaxTick-AT.mMinTick;if(AT.mStep>=AM){return ;}AJ=Math.floor(AM/AT.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AM===AJ*AT.mStep){for(AL=1;AL<AJ;++AL){AT.mTicks.push(AT.mMinTick+AL*AT.mStep);}}else{AM=AT.mMaxTick-AT.mMinTick;AQ=10;AP=false;for(AL=3;AL<AJ;++AL){AO=AM/AL;while(AO<1){AO*=10;}while(AO>=10){AO/=10;}if(AO===Math.floor(AO)){AQ=AL;AP=true;break;}}if(AP){AT.mStep=AM/AQ;for(AL=1;AL<AQ;++AL){AT.mTicks.push(AT.mMinTick+AL*AT.mStep);}}else{AK=Math.ceil((AT.mMinTick+AT.mStep/100)/AT.mStep)*AT.mStep;AR=Math.floor((AT.mMaxTick-AT.mStep/100-AK)/AT.mStep)+3;for(AL=0;AL<AR-2;++AL){AT.mTicks.push(AK+AL*AT.mStep);}}}}else{AM=AT.mMaxTick-AT.mMinTick;AQ=10;for(AL=6;AL<=9;++AL){AO=AM/AL;while(AO<10){AO*=10;}while(AO>=100){AO/=10;}if(AO===Math.floor(AO)){AQ=AL;break;}}AT.mStep=AM/AQ;for(AL=1;AL<AQ;++AL){AT.mTicks.push(AT.mMinTick+AL*AT.mStep);}}}function F(AJ,AN){var AM,AK,AL;AJ.mMaxTick=AN.mAxisMaxValue;if(AJ.mMaxTick<=this.mMinimum){this.mMinimum=AJ.mMaxTick-1;}AJ.mStep=f.call(this,AJ.mMaxTick,this.mMinimum,AN.mAlwaysIncludeZero&&(AJ.mMaxTick>0));AM=(AN.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(X.call(this)){AJ.mMinTick=AJ.mMaxTick-Math.ceil((AJ.mMaxTick-AM)/AJ.mStep)*AJ.mStep;}else{AJ.mMinTick=Math.floor(AM/AJ.mStep)*AJ.mStep;}if(x.call(this,AJ)){return ;}AK=Math.floor((AJ.mMaxTick-AJ.mStep/100-AJ.mMinTick)/AJ.mStep)+2;for(AL=1;AL<AK-1;++AL){AJ.mTicks.push(AJ.mMinTick+AL*AJ.mStep);}}function k(AJ,AO){var AK,AN,AL,AM;AJ.mMinTick=AO.mAxisMinValue;if(AJ.mMinTick>=this.mMaximum){this.mMaximum=AJ.mMinTick+1;}AJ.mStep=f.call(this,this.mMaximum,AJ.mMinTick,AO.mAlwaysIncludeZero&&(AJ.mMinTick<0));AK=(AO.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(X.call(this)){AJ.mMaxTick=AJ.mMinTick+Math.ceil((AK-AJ.mMinTick)/AJ.mStep)*AJ.mStep;}else{AJ.mMaxTick=Math.ceil(AK/AJ.mStep)*AJ.mStep;}if(x.call(this,AJ)){return ;}AN=Math.ceil((AJ.mMinTick+AJ.mStep/100)/AJ.mStep)*AJ.mStep;AL=Math.floor((AJ.mMaxTick-AN+AJ.mStep/100)/AJ.mStep)+2;for(AM=0;AM<AL-2;++AM){AJ.mTicks.push(AN+AM*AJ.mStep);}}function f(AZ,AT,AL){var AS,AN;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AS=0;if(AL){AS=Math.max(AZ,AZ-AT);AS=Math.max(AS,-AT);}else{AS=AZ-AT;}if(AS===0){this.mIsShown=false;return 1;}if(AS>=1&&AS<=4&&parseInt(AS)===AS){var Aa=this.PrimaryMetricIndex,AO=Aa.length;for(var AV=0;AV<AO;AV++){var AR=this.mChartContextPtr.mDatasetPtr,AU=AR.dataProvider,AM=AU.getSeriesCount(),AQ=AU.getGroupCount(),AK=Aa[AV],AP,AX;for(var AY=0;AY<AM;AY++){AP=AU.getMetricIndexForSeries(AY);if(AP===AK){AX=true;for(var AW=0;AW<AQ;AW++){var Ab=AR.GetData(AY,AW);if(parseInt(Ab)!==Ab){AX=false;break;}}}if(AX){return 1;}}}}var AJ=AS;AN=1;while(AS<1){AS*=10;AN/=10;}while(AS>=10){AS/=10;AN*=10;}if(AS<1.8){AN*=2;AN/=10;}else{if(AS<3.1){AN*=4;AN/=10;}else{if(AS<4.6){AN*=5;AN/=10;}else{if(AS>=8.1){AN*=2;}}}}AN=this.postProcessStep(AN,AJ);return AN;}function x(AJ){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AK=this.mMajorGrid;return AK.mUseManualGrid&&(AK.mGridInterval<(AJ.mMaxTick-AJ.mMinTick)/30);}function j(AJ){return Math.log(AJ)/Math.log(10);}function X(){return(this.mGraphMajorType===d.GMT_HISTOGRAM||this.mGraphMajorType===d.GMT_POLAR)&&this.mTripleId.mObjectId===z.DssGraphX1Body;}function AB(AM){var AN=this,AJ=AN.id,AL=AM.metricId,AK=new q.ui.menus.MenuConfig();(AM.options).forEach(function(AO){if(AO!==AA.EnumRefLineModelType.CONST){AK.addMenuItem(g[AO],"xt",function(){AN.toggleRefLineEnabled(AL,AO,true);});}else{AK.addEditorMenuItem(g[AA.EnumRefLineModelType.CONST],AJ,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(AQ,AP){var AR=AP.constVal;if(AR.isValid()){AN.toggleRefLineEnabled(AL,AO,true,AR.value);}}});});}});return AK;}function w(AL){var AM=this,AK=AL.metricId,AJ=new q.ui.menus.MenuConfig();(AL.options).forEach(function(AP){var AN=AP.refType,AO=g[AN]+((AN===AA.EnumRefLineModelType.CONST)?("-["+I.toLocaleString(AP.c)+"]"):"");AJ.addMenuItem(AO,"xt",function(){AM.toggleRefLineEnabled(AK,AN,false,0,AP.modix);});});return AJ;}function AG(AN,AJ){var AM=AN.GMController,AK=AM.getForbiddenShapeForMetric(AJ),AL=[];[{text:mstrmojo.desc(12097,"Bar"),value:AF.BAR},{text:mstrmojo.desc(2059,"Line"),value:AF.LINE},{text:mstrmojo.desc(9738,"Area"),value:AF.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AF.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AF.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AF.TICK}].forEach(function(AO){if(AK.indexOf(AO.value)<0){AL.push(AO);}});if(AM.chartType===mstrmojo.gm.EnumGraphType.BAR||AM.chartType===mstrmojo.gm.EnumGraphType.LINE){AL=AL.filter(function(AO){return AO.value!==AF.AREA;});}return AL;}function s(AK,AJ){return function(AM,AL){if(AM!==AL){AJ({ctxt:{sp:AM,mid:AK}});}};}function AH(AM){var AK=AM.options,AJ=this.getMenuHandler("changeShape"),AL=new mstrmojo.ui.menus.MenuConfig();AL.addRadioMenuGroup(AM.currValue,s(AM.metricId,AJ),AK,"checkMark",undefined,true);return AL;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,timerHistory:[],timerHistoryMax:50,startTimer:function R(AK){if(this.mUseTimer){var AJ=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AJ,desc:AK.functionName+": "+AK.purpose});return AJ;}},endTimer:function G(AN,AP){if(this.mUseTimer){var AK,AL=this.mTimers,AQ=0;if(AN===undefined){AK=AL.pop();}else{var AO,AR;for(AO=0;AO<AL.length;AO++){AR=AL[AO];if(AR.timerId===AN){AK=AR;AL.splice(AO,1);AO--;}}}if(AK){var AJ=new Date();var AM=(AJ-AK.timeStamp);if(AP){this.timerHistory[this.timerId%this.timerHistoryMax]={desc:AK.desc,duration:AM,start:AK.timeStamp.getTime(),end:AJ.getTime()};}H.visPrint("%c"+AK.desc+": "+AM+"ms","color: blue");AQ=new Date()-AK.timeStamp;}return AQ;}},computeTicksForPercentchart:function(AK,AJ,AL){return C(AK,AJ,false,AL);},computeTicksForFlexMinMax:function(AK,AJ,AL,AM){return C(AK,AJ,AL,AM);},formatNumber:function(AL,AK,AJ){return AC(AL,AK,AJ===undefined?3:AJ);},sizeCalculator:{sum:function(AJ,AN,AO){var AL,AK=0,AM=0;if(AO===undefined){AO=AJ.length;}AN=AN||1;for(AL=0;AL<AO;AL++){if(AJ[AL]>0){AM+=AJ[AL];AK+=1;}}if(AK>1){AM+=(AK-1)*AN;}return AM;},add:function(AL,AJ,AK){AK=AK||1;if(AJ>0){AL+=(AJ+AK);}return AL;},minus:function(AL,AJ,AK){if(AJ>0){AL-=(AJ+AK);}return AL;}},replaceSpecialChars:function(AJ){return AJ.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");},restoreSpecialChars:function(AJ){return AJ.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&amp;/g,"&");},removeExtraSpace:function(AJ){return AJ.replace(/ {2,}/g," ");},stringToJSON:function(AJ){if(AJ===undefined){return undefined;}if(typeof AJ==="string"){AJ=AJ.replace(/'/g,'"');try{return JSON.parse(AJ);}catch(AK){return AJ;}}return AJ;},everythingToString:function(AK){if(AK===undefined){return undefined;}var AJ;if(typeof AK==="object"){AJ=JSON.stringify(AK.jsonObj||AK);}else{AJ=AK.toString();}AJ=AJ.replace(/"/g,"'");return AJ;},compareElementObj:function(AN,AK){var AM=AN.tid.toString(),AJ=AK.tid.toString(),AO=AN.eid,AL=AK.eid;if(AM!==AJ){return AM>AJ?1:-1;}if(AO===AL){return 0;}return AO>AL?1:-1;},isEqualComb:function(AK,AJ){var AO=true,AN,AM=AK.length,AL=AJ.length;if(AM!==AL){return false;}if(AK.length>1){AK.sort(this.compareElementObj);}if(AJ.length>1){AJ.sort(this.compareElementObj);}for(AN=0;AN<AM;AN++){if(this.compareElementObj(AK[AN],AJ[AN])!==0){AO=false;break;}}return AO;},serializeCombination:function(AK){var AJ="";if(AK.length>1){AK.sort(this.compareElementObj);}r.forEach(AK,function(AL){if(AJ!==""){AJ+=y;}AJ+=(AL.tid+l+AL.eid);});return AJ;},deserializeCombination:function(AK){var AL=AK.split(y),AJ=[];r.forEach(AL,function(AP){var AM=AP.split(l);var AO=AM[0];var AN=AM[1];AJ.push({tid:AO,eid:AN});});return AJ;},getElementCombinationForMetric:function(AJ){var AK=[];AK.push({tid:-1,eid:AJ});return AK;},getResolvedFormatsObject:function(AJ){return Y(AJ);},isDigitalArrayEqual:function(AK,AJ){return o.call(this,AK,AJ);},indexOf:function(AK,AM){var AL,AJ=AK.length;for(AL=0;AL<AJ;AL++){if(o(AK[AL],AM)){return AL;}}return -1;},parseAxisScaleData:function(AN){var AL,AO,AK,AJ=AN.split(","),AM=[];for(AL=0,AO=AJ.length;AL<AO;AL++){AK=AJ[AL].split(":");AM.push(AK);}return AM;},parseCSSColor:function(AN,AK){var AM=AN.slice(1),AJ=[],AL;if(AM.length===6){if(AK===true){AJ[0]=AM[4];AJ[1]=AM[5];AJ[2]=AM[2];AJ[3]=AM[3];AJ[4]=AM[0];AJ[5]=AM[1];}else{for(AL=0;AL<6;AL++){AJ[AL]=AM[AL];}}}else{if(AK===true){for(AL=2;AL>=0;AL--){AJ.push(AM[AL]);AJ.push(AM[AL]);}}else{for(AL=0;AL<3;AL++){AJ.push(AM[AL]);AJ.push(AM[AL]);}}}return parseInt("0x"+AJ.join(""),16);},RGB_BRG_Switch:function(AK){var AM=(AK>>16)&255,AL=(AK>>8)&255,AJ=(AK>>0)&255;return(AJ<<16)|(AL<<8)|(AM<<0);},encodeColor:function(AK){if(AK===undefined||AK===null||AK==="transparent"||AK==="default"){return AK;}var AL=false,AJ={};if(AL){if(typeof AK==="object"){AJ.c1=this.RGB_BRG_Switch(h.encodeColor(AK.c1));AJ.c2=this.RGB_BRG_Switch(h.encodeColor(AK.c2));AJ.or=AK.or;return AJ;}return this.RGB_BRG_Switch(h.encodeColor(AK));}if(typeof AK==="object"){AJ.c1=h.encodeColor(AK.c1);AJ.c2=h.encodeColor(AK.c2);AJ.or=AK.or;return AJ;}return h.encodeColor(AK);},checkEquality:function(AK,AJ){if(typeof AK==="object"&&AK.c1!==undefined){if(AK.c1!==AJ.c1){return false;}if(AK.c2!==AJ.c2){return false;}if(AK.or!==AJ.or){return false;}return true;}return AK===AJ;},decodeColor:function(AK){if(AK===undefined||AK===null||AK==="transparent"||AK==="default"){return AK;}var AL=false,AJ={};if(AL){if(typeof AK==="object"){AJ.c1=h.decodeColor(this.RGB_BRG_Switch(AK.c1));AJ.c2=h.decodeColor(this.RGB_BRG_Switch(AK.c2));AJ.or=AK.or;return AJ;}return h.decodeColor(this.RGB_BRG_Switch(AK));}if(typeof AK==="object"){AJ.c1=h.decodeColor(AK.c1);AJ.c2=h.decodeColor(AK.c2);AJ.or=AK.or;return AJ;}return h.decodeColor(AK);},getTrendLineToggleHandler:function(AJ,AL,AK){return function(){AJ.switchOnOffTrendLineForMetric(AL,AK);};},getTrendLineToggleState:function(AJ,AK){return AJ.queryTrendLineStatusForMetric(AK);},getEditTrendLineHandler:function(AJ,AK){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AJ.raiseEventCMSelection(J.TREND_LINE,AK);};},getEditRefLineHandler:function(AJ,AK){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AJ.raiseEventCMSelection(J.REF_LINE,AK);};},getEditAxisScaleHandler:function(AJ,AK){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AJ.raiseEventCMSelection(J.AXIS_SCALE,AK);};},getEditAxisOriginHandler:function(AJ,AK){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AJ.raiseEventCMSelection(J.AXIS_ORIGIN_DEFINE,AK);};},getEditLogScaleHandler:function(AJ,AK){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AJ.raiseEventCMSelection(J.LOG_SCALE,AK);};},getOptionObjArr:function(AJ,AL,AN){if(!E){E=mstrmojo.gm.GMUtility;}var AK={},AM;if(AL!==undefined){AL=AL.toLowerCase();if(AL==="x1"){AL="x";}else{if(AL==="y1"){AL="y";}}}if(AJ.length>1||(AN&&AJ.length===1)){if(AL==="x"){AK.opt=mstrmojo.desc(11712,"Bottom Axis");AK.key="XAxis";}else{if(AL==="x2"){AK.opt=mstrmojo.desc(11710,"Top Axis");AK.key="X2Axis";}else{if(AL==="y"){AK.opt=mstrmojo.desc(11715,"Left Axis");AK.key="YAxis";}else{if(AL==="y2"){AK.opt=mstrmojo.desc(11713,"Right Axis");AK.key="Y2Axis";}else{if(AL==="z"){AK.opt=mstrmojo.desc(12090,"SizeBy");AK.key="SizeBy";}}}}}AK.optLvl=n.AXIS;AK.mos=this.getMetricFormatFromIndexArray(AJ);}else{if(AJ.length===1){AM=this.getMetricFormat(AJ[0]);AK.opt=AM.n;AK.mos=[AM];AK.key=AM.mId;AK.comb=E.getElementCombinationForMetric(AM.mId);AK.optLvl=n.METRIC;if(AL==="z"){AK.sizeBy=true;}}}return AK;},filterInValidMetricIndex:function(AK){var AJ=[];r.forEach(AK,function(AL){if(AL!==a){AJ.push(AL);}});return AJ;},fillBackgroundDiv:function(AK){var AJ=document.createElement("div");AJ.setAttribute("class","gm-bk-div");AJ.style.backgroundColor="rgba(0,0,0,0)";AK.appendChild(AJ);},getSubMenu:function(AO,AP,AN,AM){var AL=AG(AO,AM),AJ=AO.getMenuHandler("changeShape"),AK=AO.GMController.getOnTheFlyShapeForMetric(AM);if(AL.length>1){AP.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AO.id,AH,{currValue:AK,options:AL,metricId:AN});}else{AP.addRadioMenuGroup(AK,s(AN,AJ),AL,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AK,AO,AP,AJ){var AQ=mstrmojo.gm.EnumSubtype,AN=AK.GMController.chartSubType;if(AP&&AN===AQ.PERCENT){return ;}var AR=AK.id,AL=AK.getAvailableRefLineTypes(AJ)||[];if(AL.length>0){AO.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AR,AB,{metricId:AJ,options:AL});}var AM=AK.getExistingRefLineOptions(AJ)||[];if(AM.length>0){AO.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",E.getEditRefLineHandler(AK,AJ));AO.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AR,w,{metricId:AJ,options:AM});}},reverseMapping:function p(AK){var AM={},AL,AJ=AK.length;for(AL=0;AL<AJ;AL++){AM[AK[AL]]=AL;}return AM;},longIntAnd:function(AK,AJ){var AL;if(AK===AJ){return AK;}if(AK>e||AJ>e){throw new Error("Operand exceeds valid data range.");}if(AK<b&&AJ<b){return AK&AJ;}if(AK>=b||AJ>=b){if(AK<AJ){AL=AK;AK=AJ;AJ=AL;}}var AN=Math.floor(AK/b),AM=Math.floor(AJ/b),AP=AK-AN*b,AO=AJ-AM*b;return(AP&AO)+(AN&AM)*b;},longIntOr:function(AK,AJ){var AL;if(AK===AJ){return AK;}if(AK<b&&AJ<b){return AK|AJ;}if(AK<AJ){AL=AK;AK=AJ;AJ=AL;}AL=this.longIntAnd(AK,AJ);return AJ-AL+AK;},parseNumeric:function(AJ){return +AJ||parseFloat(AJ);},fillImageInDiv:function(AM,AL,AK,AJ){AJ=AJ||"gm-img";AM.innerType=AL;if(AL===4){AM.innerHTML="<img class="+AJ+' src="'+AK+'"/>';}else{if(AL===7){AM.innerHTML=AK;B.addClass(AM.firstChild,AJ);}}},fillTextInDiv:function(AJ,AS,AU,AK,AV,AL,AX,AN,AQ){if(AK===undefined){AK=AJ.offsetWidth;}if(AV===undefined){AV=AJ.offsetHeight;}if(AN===undefined){AN=W.MIDDLE;}if(AQ===undefined){AQ=t.MIDDLE;}if(AL===undefined){AL=false;}AU=this.replaceSpecialChars(AU);var AR,AT,AP,AW=AL?"gm-text-body":"gm-text-body-nowrap",AM=false,AO;AR=H.measureTextWidth(AU,AX,6);AO=H.measureTextWidth("...",AX,6);if(AR>AK&&AO>AK){return ;}AP=document.createElement("div");AP.setAttribute("class",AW);AP.setAttribute("type",AD.GM_TEXT_BODY);AP.identity=AS;H.applyStyles2DomNode(AP,AX);AP.innerHTML=AU;AJ.appendChild(AP);if(AL){if(AR>AK){AT=AP.offsetHeight;}else{AT=H.measureTextHeight(AU,AX,4);}}else{AT=H.measureTextHeight(AU,AX,4);AM=AR>AK;}AR=Math.min(AR,AK);AP.style.width=AR+"px";if(AL){AM=AP.scrollWidth>AR||AP.scrollHeight>AT;}if(AM){AP.setAttribute("title",AU);}else{AP.setAttribute("title","");}switch(AN){case W.LEFT:AP.style.left="0px";AP.style.textAlign="left";break;case W.MIDDLE:AP.style.left=((AK-AR)>>1)+"px";break;case W.RIGHT:AP.style.right="0px";AP.style.textAlign="right";break;}switch(AQ){case t.TOP:AP.style.top="0px";break;case t.MIDDLE:AP.style.top=((AV-AT)>>1)+"px";break;case t.BOTTOM:AP.style.bottom="0px";break;}},updateTextColorAndAlignment:function(AJ,AL,AM){var AN=AJ.firstChild,AO=AN.style,AK=AJ.clientWidth,AP=AN.clientWidth,AR=AJ.clientHeight,AQ=AN.clientHeight;AO.left="auto";AO.right="auto";switch(AL){case W.LEFT:AO.left="0px";break;case W.MIDDLE:AO.left=((AK-AP)>>1)+"px";break;case W.RIGHT:AO.right="0px";break;}AO.top="auto";AO.bottom="auto";switch(AM){case t.TOP:AO.top="0px";break;case t.MIDDLE:AO.top=((AR-AQ)>>1)+"px";break;case t.BOTTOM:AO.bottom="0px";break;}},toggleDisplay:function(AK,AJ){if(!AK){return ;}if(AJ){AK.style.display="block";}else{AK.style.display="none";}},isTrendLineAvailableForMetric:function(AN,AO,AR){var AY=AN&&AN.excludeData,AV=mstrmojo.gm.EnumSubtype,AQ=q.gm.EnumShape,AW=AN.GMController,AS=AW.chartSubType,AX=AN.model.data.dz,AL=AX.XAxis,AJ=AX.YAxis,AM=AX.BreakBy,AP=AX.SliceBy,AT=AR,AK=AW.getChartInfo(),AU=AW.getBreakByAttrsID().length>0||(AK.isABL&&((AL.MetricNames!==undefined)||(AJ.MetricNames!==undefined)||(AM.MetricNames!==undefined)||(AP.MetricNames!==undefined)));if(AT===undefined){AT=AW.getOnTheFlyShapeForMetric(AO);}if(AK.isABL&&AS===AV.PERCENT){AY=true;}if(AU&&!AK.isBubbleOrScatter&&(AT===AQ.BAR||AS===AV.STACKED||(AS===AV.AUTO&&AT===AQ.AREA))){AY=true;}if(AK.isABL){if(AL.TemplateUnit&&AL.TemplateUnit.length>1){AY=true;}if(AJ.TemplateUnit&&AJ.TemplateUnit.length>1){AY=true;}if(AL.TemplateUnit===undefined&&AJ.TemplateUnit===undefined){AY=true;}}AY=AY||this.isIgnoredMetric(AN,AO);return !AY;},isTrendLineAvailableForAnyMetric:function(AL){var AK=AL.model.data.gsi.mx,AJ;for(AJ in AK){if(this.isTrendLineAvailableForMetric(AL,AJ)){return true;}}return false;},isIgnoredMetric:function(AM,AK){var AL=AM.GMController,AN,AJ;if(AL.bubbleSeriesNum!==undefined){AN=AL.getMetricsOnYAxis();AJ=AN.indexOf(AK);if(AJ>=AL.bubbleSeriesNum){return true;}AN=AL.getMetricsOnXAxis();AJ=AN.indexOf(AK);if(AJ>=AL.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AO){var AJ=AO.model.data.dz,AP=AO.model.data.gsi.mx,AK,AL,AN=[];if(!AJ||!AJ.ColorBy||!AP){return AP;}var AM=function(AQ){return(AQ&&AQ.TemplateMetric)||[];};AK=AM(AJ.YAxis).concat(AM(AJ.XAxis));r.forEach(AP,function(AQ){AL=false;r.forEach(AK,function(AR){if(AQ.did===AR.id){AL=true;return false;}});if(AL){AN.push(AQ);}});return AN;},isInvalidTemplate:function O(AM){if(AM.eg){return false;}var AK=AM.gts;var AJ=AK.row.length===0&&AK.col.length===0;r.forEach(AK.row,function(AP){if(AP.otp===-1){AJ=true;}});var AO=AK.col;if(AO.length>0){var AL,AN=AO.length-1;for(AL=0;AL<AN;AL++){if(AO[AL].otp===-1){AJ=true;}}}return AJ;},isNoData:function(AJ){return AJ.eg!==undefined;},getInvalidTemplateErrMsg:function(AJ){return AJ||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AK,AL){mstrmojo.func.override({showPickerForCurrentMode:function AJ(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AM=this.gradientOrientation,AN=AL.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AM.set("selectedIndex",r.find(AM.items,"id",AN?0:1));}}},AK.colorPicker);},generateToolTipContent:function(AS,AN,AJ,AO,AQ,AP,AV){var AM,AK,AL,AR,AT,AU;for(AM=AS;AM<AN;AM++){AK=AO[AM];AR=AQ[AM];if(AM>AS){AL=AO[AM-1];AT=AQ[AM-1];if(AK.id===AL.id){if(AR===""){continue;}if(AK.fid===AL.fid&&AR.idx===AT.idx){continue;}if(AK.n===""){AP[AP.length-1].v+=M+AR.n;continue;}}}if(AV){AP.push({n:AK.n,tid:AK.id,v:AR.n});}else{AU=AJ===undefined?AK.isRowAttribute:AJ;AP.push({n:AK.n,tid:AK.id,v:AR.n,eid:AR.id,tp:AK.otp,axis:AU?1:2,tui:AK.tui,ui:AK.tui,dpt:AK.tui+1,at:AR.at,isRowAttribute:AU,dei:AR.dei,o:AR.o});}}},getAttributeFormCnt:function(AJ){var AK;if((AJ.fcnt===undefined||AJ.fcnt===null)&&AJ.fs){AJ.fcnt=AJ.fs.length||1;}if(AJ.fcnt!==undefined&&AJ.fcnt!==null){AK=AJ.fcnt;}else{if(AJ.t===47){AK=1;}else{AK=AJ.cs!==undefined?AJ.cs:AJ.rs;}}return AK;},isTrueForBoolValue:function(AJ){return AJ===true||AJ==="true";},computeTicksForAxis:function(AM,AK){var AL=AM.mOptions,AN,AJ={mTicks:[]};if(AK){AN=Q.copy(AL);Q.copy(AK,AN);}else{AN=AL;}if(AM.mIsPercent){U.call(AM,AJ,AN);return AJ;}if(AN.mUseLogarithmicScale){P.call(AM,AJ,AN);return AJ;}if(AM.mGraphMajorType===d.GMT_BUBBLE&&AM.mTripleId.mObjectId===z.DssGraphZBody){AJ.mMinTick=AN.mUseMinValue?AN.mAxisMinValue:AM.mMinimum;AJ.mMaxTick=AN.mUseMaxValue?AN.mAxisMaxValue:AM.mMaximum;if(AM.mMinTick>=AM.mMaxTick){AJ.mMaxTick=AJ.mMinTick+1;}return AJ;}if(!AN.mUseMaxValue&&!AN.mUseMinValue){u.call(AM,AJ,AN);}else{if(AN.mUseMaxValue&&AN.mUseMinValue){D.call(AM,AJ,AN);}else{if(AN.mUseMaxValue){F.call(AM,AJ,AN);}else{k.call(AM,AJ,AN);}}}return AJ;},computeTicksForLogScale:function(AL){var AK=AL.mOptions,AJ={mTicks:[]};P.call(AL,AJ,AK);return AJ;},destroyDisposable:function(AJ,AK){if(AK){r.removeItem(AJ.disposables,AK);AK.destroy();}},handleDestroy:function(AN,AM,AK){if(!AN){return ;}var AO,AL=0,AJ=AN.disposables,AP=(AJ&&AJ.length)||0;while(AL<AP){AO=AJ[AL];if((!AO.scriptClass||AM.indexOf(AO.scriptClass)<0)&&r.indexOf(AK,AO.id)===-1){this.destroyDisposable(AN,AO);}if(AJ.length<AP){AP=AJ.length;}else{AL++;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle","EnumFontAlignment","EnumFontStyle","EnumFontRotation");var M=mstrmojo.chart,J=M.enums,H=J.EnumBoxStyle,D=J.EnumFontAlignment,R=J.EnumFontStyle,U=J.EnumFontRotation,I=M.common.Utility,N=1,S=3;var B=["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize"],F=[D.FA_CENTER,R.FS_NORMAL,U.FR_NORMAL,H.BS_NOFRAME,null,255,"Verdana",15];mstrmojo.chart.FormatFont=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFont",mFontAlignment:D.FA_CENTER,mFontStyle:R.FS_NORMAL,mFontRotation:U.FR_NORMAL,mFontBox:H.BS_NOFRAME,mFontColor:null,mFontAlpha:255,mFontName:null,mFontSize:15,init:function L(Y){var X,W=B.length;this._super(Y);if(Y&&Y.Font){var V=Y.Font;mstrmojo.hash.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontAlpha","mFontName","mFontSize"],V,this);this.mFontColor=V.mFontColor;}else{if(Y&&Y.Bare){for(X=0;X<W;++X){this[B[X]]=null;}}}if(!this.mFontColor&&!(Y&&Y.Bare)){this.mFontColor=M.gBlack.ToInteger();}this.mFontName=this.mFontName||"Verdana";},ApplyFontFormat:function K(W,V){if(this.mFontSize<S){this.mFontSize=S;}if(!V){W.applyFontFormat(this);}},GetFontExtent:function A(){return Math.floor(this.mFontSize<S?S:this.mFontSize*N);},GetStringExtent:function O(W){var X,V,Y;this.ApplyFontFormat(null,true);Y=I.measureText(W,this.mFontName,this.mFontSize,this.mFontStyle);X=Y.Width;V=Y.Height;return{Width:X,Height:V};},GetStringHeight:function P(V){this.ApplyFontFormat(null,true);return I.measureTextHeight(V,this.mFontName,this.mFontSize,this.mFontStyle);},isVertical:function E(){var V=this.mFontRotation;return V===U.FR_90||V===U.FR_270;},isHorizontal:function C(){var V=this.mFontRotation;return V===U.FR_NORMAL||V===U.FR_180;},evalMargins:function Q(){return I.evaluateTextMargin(this.mFontSize);},restoreDefaults:function G(W){var V;if(W){for(V=0;V<B.length;++V){this[B[V]]=F[V];}}else{for(V=0;V<B.length;++V){if(this[B[V]]===null){this[B[V]]=F[V];}}}if(this.mFontColor===null){this.mFontColor=M.gBlack.ToInteger();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.DocPortlet");var L={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"},P,B;mstrmojo.Vis=mstrmojo.declare(mstrmojo.VisBase,null,{scriptClass:"mstrmojo.Vis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,reRenderOnDimensionChg:true,isVis:function(){return true;},setModel:function Q(R){this._super(R);if(R.data){this.set("model",R.data);}this.xtabModel=R;if(this.controller&&typeof (this.controller.getPageByTree)!="undefined"){this.controller.getPageByTree(false);}},destroy:function O(){this._super();var R=this.xtabModel;if(R&&R.destroy){R.destroy();delete this.xtabModel;}},setDimensions:function N(U,S){var R=this._super(U,S);if(R&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return R;},buildRendering:function M(){if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function G(){P=this.width;B=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function E(){var R=mstrmojo.boxmodel.offset(this.domNode);this.offsetTop=R.top;this.offsetLeft=R.left;},update:function F(W){W=W||this.node;if(W){if(W.data){this.set("model",W.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",W.data);}this.model=W.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(W.data.extProps,this);}var U=this.controller,S=U.view,Y=(S.hasRendered&&S.getCurrentLayout&&S.getCurrentLayout());if(U.view.fullScreenInfoWindow&&(Y&&Y.defn.visName)){var X=mstrApp.rootView.getContentDimensions();this.height=X.h+"px";this.width=X.w+"px";}else{this.fmts=W.defn.fmts||W.defn.units[this.model.k].fmts;var R=this.fmts;if(R){for(var V in L){v=L[V];if(V in R){this[v]=R[V];}}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;return true;},getModel:function A(S){if(S){var R=mstrmojo.Vis.getVisGrid(this.layoutModel,this.layoutNode,S);if(R){return R.data;}else{alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));return{};}}else{return this.model;}},getDataParser:function K(R){return new mstrmojo.Vis.DataParser(this.getModel(R));},renderErrorMessage:function H(R){this.domNode.innerHTML='<div class="mstrmojo-message">'+R+"</div>";},getMessageID:function J(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function D(V){var c=this.xtabModel,b=(c&&c.docModel);var d=false;if(b){var a=b.defn&&b.defn.layouts,U=null;var S;if(a){for(S in a){if(a[S].loaded){U=a[S];break;}}}var W=U&&U.units;this.selectorTargets={};if(W&&V.scObjList){for(var S=0;S<V.scObjList.length;S++){var X=V.scObjList[S];var Y=X.sc.tks.split("\x1E");for(var R=0;R<Y.length;R++){var Z=W[Y[R]];if(Z){this.selectorTargets[Y[R]]=Z;if(!this.isChildOfIfw(W,Z)){d=true;}}}}}}return d;},isChildOfIfw:function I(R,S){while(S){if(S.ifw){return true;}S=R[S.pnk];}return false;},performAction:function C(R){var U=this.xtabModel.getAction(R),S=U&&U.h;if(S&&this.controller[S]){this.controller[S](this,U.a);return true;}return false;}});mstrmojo.Vis.getVisGrid=function(R,Z,S){var X=Z;var V=R.getChildren(Z,false);for(var U=0;U<V.length;U++){var Y=V[U];if(Y.k==S){return Y;}else{var W=mstrmojo.Vis.getVisGrid(R,Y,S);if(W){Z=X;return W;}}}};mstrmojo.Vis.DataParser=function(U){var b=mstrmojo.Vis;return{getRowTitles:function(){return new b.Titles(U,true);},getColTitles:function(){return new b.Titles(U,false);},findMetricValue:function(g,l){var k=U.ghs.rhs.items;for(var h in k){var j=k[h].items;var f=true;for(var d in g){if(g[d]!=j[d].idx){f=false;break;}}if(f){return new mstrmojo.Vis.MetricValue(U.gvs.items[h].items[l]);}}},getTotalRows:function X(){var c=U.ghs&&U.ghs.rhs&&U.ghs.rhs.items;return(U.eg||!c)?0:c.length;},getTotalColHeaderRows:function V(){return(!U.ghs.chs.items?0:U.ghs.chs.items.length);},getTotalCols:function R(){return this.getColHeaders(0).size();},getRowHeaders:function a(c){return new b.Headers(U,c,true);},getColHeaders:function Z(c){return new b.Headers(U,c,false);},getMetricValue:function Y(d,c){return new b.MetricValue(U,U.gvs.items[d].items[c]);},getColumnHeaderCount:function W(){return U.gvs.items[0].items.length;},getCSSString:function S(){return U.cssString;}};};mstrmojo.Vis.Titles=function(R,X){var W=(X)?R.gts.row:R.gts.col;return{size:function V(){return W.length;},getTitle:function U(Y){return new mstrmojo.Vis.Title(W[Y]);},getCSS:function S(Y){return R.css[W[Y].cni].n;}};};mstrmojo.Vis.Headers=function(S,U,Y){var Z=(Y)?S.gts.row:S.gts.col;var X=(Y)?S.ghs.rhs:S.ghs.chs;var V=X.items&&X.items[U].items;return{size:function a(){return(!V?0:V.length);},getHeader:function R(b){return V&&V[b]&&new mstrmojo.Vis.Header(V[b],Y?Z[b]:Z[U]);},getCSS:function W(b){return V&&S.css[V[b].cni].n;},getHeaderCell:function(b){return V&&V[b];}};};mstrmojo.Vis.Title=function(S){return{getActionType:function(){return S.at;},getDrillPath:function(){return S.dp;},getHeaderValues:function R(){return S.es;},getHeaderName:function U(W){return S.es[W].n;},getHeaderId:function U(W){return S.es[W].id;},getForms:function V(){return S.fs;},getFormId:function(){return S.fid;},getFormType:function(){return S.ftp;},getUnitId:function(){return S.id;},getLinkMap:function(){return S.lm;},getName:function(){return S.n;},getUnitDssType:function(){return S.otp;},getSelectorControl:function(){return S.sc;}};};mstrmojo.Vis.Header=function(U,R){return{getName:function W(){return(U.idx===-1)?"":R.es[U.idx].n;},getElementId:function Z(){return(U.idx===-1)?"":R.es[U.idx].id;},getObjectId:function V(){return(U.idx===-1)?"":R.es[U.idx].oid;},getElementIndex:function S(){return U.idx;},getActionType:function Y(){return U.at;},isTotal:function X(){return U.otr===1;}};};mstrmojo.Vis.MetricValue=function(R,Z){var Y=Z;return{getValue:function S(){return Y.v;},getThresholdType:function U(){return Y.ty;},getRawValue:function X(){return Y.rv;},getCSS:function V(){return R.css[Y.cni].n;},getThresholdValue:function a(b){if(Y.ti==undefined){return b;}return R.th[Y.ti].n;},getFillColor:function W(b){if(Y.ci==undefined){return b;}return R.fc[Y.ci].n;}};};})();(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.Box","mstrmojo.vi.ui.toolbars._HasToolbar","mstrmojo.vi.ui.toolbars.Toolbar","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.ui.rw._IsViewDataGrid","mstrmojo.vi.ui.rw.xtab.ViewDataXtabMenuConfig");mstrmojo.requiresClsP("mstrmojo.vi.models","VIComponentMap");var g=mstrmojo.array,b=mstrmojo.hash,d=mstrmojo.dom,a=mstrmojo.Button.newWebButton,O=mstrmojo.vi.ui.DatasetUnitMenuUtils,L=mstrmojo.vi.models,Z=L.VIComponentMap.TYPES,J=4,D=3,N=10,W,V=function V(k,l){var j=[],n=k.getDatasetUnits(["mx","att"]),h=l&&l.getDropZones();if(h&&h.zones){h.zones.forEach(function(o){o.items.forEach(function(p){if(parseInt(p.did,10)!==-1){j.push(n[g.find(n,"did",p.did)]);}});});}return j;},C=function(j,h,l){var k=V(j,h);return j.getDatasetUnits(["mx","att"],null,l).filter(function(n){return g.find(k,"did",n.did)===-1&&!n.hide;});},I=function I(){var o=this.grid,t=this.model,s=t.getSelectedViUnit(),j=s.boxContent.model.data.datasetId,p=s.getZonesModel(),n=[],k=function(y){y.tooltip=y.n+" ("+y.ds+")";return y;},x=C(t,p,j),r=(x.filter(function(y){return y.t!==4&&!o.model.hasSameRecursiveAttributeGroup(y,o.gridData);})).map(k),w=(x.filter(function(y){return y.t===4;})).map(k),l=function(y){var z={};(y||[]).forEach(function(AB,AA){if(g.find(V(t,o.zonesModel),"did",AB.did)>-1){z[AA]=true;}});return z;},u=function(y){return(y||[]).filter(function(z){return !z.hide||z.usedInDropZones;});},h=function(y){y.unshift({t:"All",formType:3,n:mstrmojo.desc(4928,"All"),tooltip:"Select All Objects"});return y;};function q(AA,y){y=u(y);y=h(y);if(y.length){var z=new mstrmojo.ui.CheckList({cssClass:"units",allIdx:0,items:y.map(function(AB){AB.tt=AB.n+" ("+AB.ds+")";AB.css=O.getUnitCssClass(AB);return AB;}),selectedIndices:l(y)});n.push({scriptClass:"mstrmojo.vi.ui.PanelPortlet",title:AA,children:[z],getSelectedItems:function(){var AB=z.getSelectedItems();if(AB.length>0&&AB[0].t=="All"){AB.shift();}return AB||[];}});}}q(mstrmojo.desc(3581,"Attributes"),O.getSortedDatasetUnits(r));q(mstrmojo.desc(3582,"Metrics"),O.getSortedDatasetUnits(w));return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mstrmojo-ui-Menu visible datasetObjects",contents:n,hostId:this.id,fnOk:function(){var AC=[],AI,AE,y=o.zonesModel,AA=y.getDropZones().zones,AG=AA[1],AJ=AA[0],AD=[],z=AG.items.length+1,AH=AJ.items.length+1,AB=V(y.docModel,y),AF=V(t,p);n.forEach(function(AK){AC=AC.concat(AK.getSelectedItems());});AI=(AC||[]).filter(function(AK){return g.find(AB,"did",AK.did)===-1;});AE=(AB||[]).filter(function(AK){if(AK.did==="-1"){return false;}return g.find(AC,"did",AK.did)===-1&&g.find(AF,"did",AK.did)===-1;});AI.forEach(function(AK){AD.push(o.model.getAddTemplateUnitAction(AK,j,(AK.t===4?AG:AJ).id,AK.t===4?z++:AH++));});AE.forEach(function(AK){AD.push(o.model.getRemoveTemplateUnitAction(AK));});o.controller.onSubmitTemplateUpdates(o,AD);}});},M=function(k,l,h){return{success:function n(p){var o=mstrmojo.insert({scriptClass:"mstrmojo.vi.ui.ViewDataDialog",grid:p,model:k,isViewFilter:l,showUnits:h});o.set("visible",true);o.render();},failure:function j(o){throw {message:"Couldn't open view data dialog <br>("+(o.message||"")+")",name:"Something went wrong"};}};},E=function(j){var h=mstrApp.isInVFConfigMode?Z.FILTER_STACK:Z.VIZ_CONTENT;return mstrApp.rootCtrl.docCtrl.view.builder.getLayoutVIMap(j.getCurrentLayoutKey()).getComponent(h).selectedKey;},A,S=function S(h){if(h&&mstrmojo.dom.isMetaKey(null,h)&&h.keyCode===65&&A){A.selectAll();return false;}return true;},K=function K(j){var k=mstrApp.isSingleTier,h=mstrApp.isWorkstation&&mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.SUPPORT_LIVEMODE)&&mstrApp.getWSLiveMode();if(mstrApp.isInVFConfigMode){return ;}if((k||!!mstrApp.features["web-export-to-excel-privilege"])&&!h){j.push({n:mstrmojo.desc(3958,"Excel"),v:J});}if(k||!!mstrApp.features["web-export-to-pdf-privilege"]){j.push({n:mstrmojo.desc(1877,"PDF"),v:D});}if(k||!!mstrApp.features["web-export-to-csv-privilege"]){j.push({n:mstrmojo.desc(11807,"Data"),v:N});}};B=function B(h){return{scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",alias:"toolbar",useRichTooltip:true,visible:h.showUnits};};F=function F(h){var j=this;return{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-export-type",alias:"exportType",value:mstrmojo.desc(13287,"Export Data"),isHostedWithin:true,items:h,visible:h.length>0&&f(A)>0,onitemSelected:function(k){this.selectedNode.innerHTML=mstrmojo.desc(121,"Export Data");j.xport(k.v);}};};X=function X(){var h=this;return{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-addGridButton mstrmojo-WebHoverButton",text:mstrmojo.desc(11893,"Add as Grid"),onclick:function(){h.close(true);},bindings:{visible:function(){return mstrApp.allowWebDashboardDesign();},enabled:function(){return !mstrApp.isLayoutModePreview();}}};};Y=function Y(){return{scriptClass:"mstrmojo.Label",alias:"rowCount",cssClass:"mstrmojo-rowcount",text:""};};U=function U(o,k){var p=B(o),j=X.call(this),n=F.call(this,k),h=Y(),l=[p,j,n,h];if(mstrApp.isInVFConfigMode||mstrApp.isAppStatePresentation()){l.splice(1,1);}return l;};f=function f(h){var j=h.gridData;return b.walk("rw.row.tc",j)||0;};mstrmojo.vi.ui.ViewDataDialog=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.vi.ui.toolbars._HasToolbar],{scriptClass:"mstrmojo.vi.ui.ViewDataDialog",title:mstrmojo.desc(11476,"Show Data"),help:"Show_Data_dialog_box.htm",cssClass:"mstrmojo-ViewDataDialog",modal:true,visible:false,btnAlignment:"right",init:function c(k){var j=k.grid,l=this,h=[];this.grid=j;j.viewDataDialog=this;A=j;j.openPopup=function(){};j.model.canShowCellMenu=function(n){var o=j.model.getCellDataUnion(n);return !!n&&(o.length===0||(o.length===1&&!o[0].eid));};this.set("buttons",[a(mstrmojo.desc(2177,"Close"),function(){l.close();})]);K.call(this,h);k.children=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:U.call(l,k,h),slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-gridBox",children:[j],slot:"containerNode"}];d.attachEvent(document.body,"keydown",S);this._super(k);},postBuildRendering:function e(){this._super();var j=this.tools.exportType;if(j.visible){j.list.popupConfig.clear();}var h=document.createElement("textarea");h.className="hiddenArea";h.onblur=function(){h.focus();h.select();};this.editorNode.appendChild(h);this.grid.hiddenField=h;},openXtabCellMenu:function R(h){var k=mstrApp.rootCtrl.document,j=new mstrmojo.vi.ui.rw.xtab.ViewDataXtabMenuConfig({isHostedWithin:false,position:h.cmPos||d.position(h.btn.domNode),hostId:this.id});j.buildXtabMenuConfig(b.copy({tabularGrid:true,hideAdvancedSort:true},h));if(j.hasMenuItems()){h.opener=this;k.openPopup(j.newInstance(),h);}},closePopup:function(){var h=mstrApp.rootCtrl.document;if(h){h.closePopup();}},close:function Q(k){var j=this;d.detachEvent(document.body,"keyup",S);A=null;if(mstrApp.isAppStatePresentation()){this.model.controller.startAutoRefresh();}this.model.removeViewDataGrid(this.grid,!!k,W,{failure:function h(l){throw {name:"Something went wrong.",message:"Couldn't close view data dialog <br>("+(l.message||"")+")"};}});j.destroy();},xport:function P(j){var h=this.model.controller;switch(j){case N:h.exportCSV(this.grid.k);break;default:h.exportVisualization(this.grid,j);}},updateToolbar:function H(j){var n=this,k=this.model,p=k.getSelectedViUnit(),o=p.boxContent.model.data.datasetId,h=p.getZonesModel(),l=C(k,h,o);j.btns.push({n:mstrmojo.desc(11780,"Add Data"),cls:"add "+(!!mstrApp.isWSStyling?"mojo-theme-light":"mojo-theme-dark")+" mstrmojo-Button mstrmojo-WebButton"+(l.length===0?" disabled":""),fn:function(r,q){if(l.length!==0){q.openMenu(I.call(n),r);}}});return j;},passToolbarCfg:function G(h){this.tools.toolbar.set("toolbarCfg",h);},oncontextmenu:function(h){d.preventDefault(window,h.e);return false;},updateToolbarChildren:function(h){this.tools.rowCount.set("text",h);if(f(A)>0){this.tools.exportType.set("visible",true);}}});mstrmojo.vi.ui.ViewDataDialog.openDS=function(h,k,j){W=h.createViewDataGrid(h.getDatasetUnits(["mx","att"],null,j),h.getCurrentLayoutKey(),null,M(h,false,false),j);};mstrmojo.vi.ui.ViewDataDialog.openDSTable=function(h,l,j,k){W=h.createViewDataGrid(h.getDatasetUnits(["mx","att"],null,j,k),h.getCurrentLayoutKey(),null,M(h,false,false),j);};mstrmojo.vi.ui.ViewDataDialog.open=function(t,q){var o=t.getDocModel(),p=o.controller;if(p.autoRefReqSent){mstrApp.serverProxy.cancelRequest(p.autoRefReqId);}p.pauseAutoRefresh();t.selectVIUnit();var h=t.boxContent,u=h.isVisMap,j=u&&h.getXtabForSelection()?h.getXtabForSelection():h,n=j.model,w=n.data,s=t.getZonesModel(),l=u?s.getDropZones(true,j.k):s.getDropZones(),k=(h.getContextMenuSelections&&h.getContextMenuSelections())||{},r,x=function x(){W=o.createViewDataGrid(null,E(o),r,M(o,q,true),null,j,l);};if(q){r=n.getSelectorDataFromTemplateLimit(w.tpl)||[];r=r.concat({keepOnly:true,data:k});x();}else{x();}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Vis","mstrmojo._HasOwnAvatar");var K=mstrmojo.css,I=mstrmojo.dom,F="px";function B(Q,P){return{x:Q.x-P.x,y:Q.y-P.y};}function M(Q,P){return(Q.x-P.x)*(Q.x-P.x)+(Q.y-P.y)*(Q.y-P.y);}function N(P){var Q=P.src.data;return(!Q||!Q.isScrollBar);}mstrmojo.VisLegend=mstrmojo.declare(mstrmojo.Vis,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.gm.VisLegend",bodyCssClass:"",avatarCssClass:"legend-dragged",dropZoneHighlightCss:"legend-dropZone",ownAvatar:true,draggable:true,dropZone:true,dockedPositions:null,calculateDockedPositions:mstrmojo.emptyFn,widget:null,boundaryNode:null,draggableNodeName:"domLegend",legendMarkup:"",extrasMarkup:"",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px;height:{@height}px;top:{@top}px;left:{@left}px;position:absolute;" mstrAttach:click,mouseover,mouseout><div class="gm-legend-bg"><div class="{@bodyCssClass}" style="width:{@width}px;height:{@height}px;text-decoration:inherit">{@legendMarkup}</div></div><div class="gm-anchor-point topLeft"></div><div class="gm-anchor-point topRight"></div><div class="gm-anchor-point bottomLeft"></div><div class="gm-anchor-point bottomRight"></div>{@extrasMarkup}</div>',markupSlots:{dropZoneNode:function(){return this.domNode;},domLegend:function(){return this.domNode.firstChild.firstChild;}},postBuildRendering:function(){this._super();this.calculateDockedPositions(this.widget.getWidth(),this.widget.getHeight());this.boundaryNode=this.widget.domNode;this.boundaryPosition=I.position(this.boundaryNode,true);},createAvatar:function D(){return this[this.draggableNodeName];},updateDropZoneNode:function C(R){var P=this.dockedPositions;if(P&&P.length>0){var X=B(R.tgt.pos,this.boundaryPosition);var V=M(X,P[0]),U=0,Q,W;for(Q=1;Q<P.length;Q++){W=M(X,P[Q]);if(W<V){V=W;U=Q;}}if(U!==this.currDockedPositionIdx){var S=this.dropZoneNode.style;S.left=P[U].x+F;S.top=P[U].y+F;if(this.widget.onLegendDropZoneChange){this.widget.onLegendDropZoneChange(P[U],U);}this.currDockedPositionIdx=U;this.updateAlignClass();return true;}}return false;},toggleDropZoneBorder:function O(P){K.toggleClass(this.dropZoneNode,this.dropZoneHighlightCss,P);},isDragValid:N,ondragstart:function E(P){if(!N(P)){return ;}this._super(P);this.toggleDropZoneBorder(true);},ondragmove:function A(P){if(!N(P)){return ;}this.updateDropZoneNode(P);this._super(P);},allowDrop:function H(P){var R=P.src,Q=R&&R.widget;return(Q&&Q!==this&&Q.parent===this.parent);},ondrop:function J(R){var P=this.domLegend;K.removeClass(P,this.avatarCssClass);var S=P.style;S.left="0";S.top="0";this.dropZoneNode.firstChild.appendChild(P);if(this.widget.onLegendDropped){var Q=this.getDockedPosition();this.widget.onLegendDropped(Q&&Q.pos);}R.dropSuccessful=true;},getDockedPosition:function G(){return this.dockedPositions&&this.dockedPositions[this.currDockedPositionIdx];},ondragend:function A(P){if(!N(P)){return ;}this._super(P);if(!P.dropSuccessful){this.ondrop(P);}this.toggleDropZoneBorder(false);},positionAvatar:function L(V){var R=this,Q=this.avatar,S=Q.style,U=this.boundaryPosition;var P=function(W,X){if(W==="x"){if(X<U.x){return U.x;}return Math.min(X,U.x+U.w-R.domNode.offsetWidth);}if(W==="y"){if(X<U.y){return U.y;}return Math.min(X,U.y+U.h-R.domNode.offsetHeight);}};S.left=P("x",V.x)+F;S.top=P("y",V.y)+F;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill","JSONInstruction","JSONUtil","JSONUnit","JSONFormatFill","JSONFormatFont","JSONFormatLine");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.enums.EnumInstructionName");var e=mstrmojo.chart,L=mstrmojo.chart.enums,z=L.EnumInstructionName,u=e.JSONUtil.prototype,N=mstrmojo.hash;function F(AG,AF){return AG.mpOriginalAddress-AF.mpOriginalAddress;}function Y(AG,AF){if(AG===undefined){AG=z.JSONInsUndefined;}if(AF===undefined){AF=null;}else{AF=AF.id;}if(this.mpCurrentUnit===null){this.mpCurrentUnit=new e.JSONUnit();this.mUnitList.push(this.mpCurrentUnit);}return this.mpCurrentUnit.AddInstruction(AG,AF);}function V(AH){var AF=this.mFormatMap,AG=AH.id;if(AH instanceof e.FormatFill){if(AF[AG]===undefined){AF[AG]=new e.JSONFormatFill(AH);}}else{if(AH instanceof e.FormatFont){if(AF[AG]===undefined){AF[AG]=new e.JSONFormatFont(AH);}}else{if(AH instanceof e.FormatLine){if(AF[AG]===undefined){AF[AG]=new e.JSONFormatLine(AH);}}}}}mstrmojo.chart.JSONCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.JSONCanvas",mIsJSONObjectConstructed:false,mpCurrentUnit:null,mUnitList:null,mFormatMap:null,mFormatList:null,mJSONObject:null,init:function x(AF){this._super(AF);this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};},reset:function r(){this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};this.mIsJSONObjectConstructed=false;this.mpCurrentUnit=null;},SaveToObject:function p(AG){var AF;if(!this.mIsJSONObjectConstructed){this.hConstructJSONObject();}for(AF in this.mJSONObject){AG[AF]=this.mJSONObject[AF];}return true;},saveState:function s(){Y.call(this,z.JSONInsSaveState);},RestoreState:function X(){Y.call(this,z.JSONInsRestoreState);},Clip:function j(){Y.call(this,z.JSONInsClip);},Scale:function Q(AF,AH){var AG=Y.call(this,z.JSONInsScale);AG.AppendToParameterList("X",AF);AG.AppendToParameterList("Y",AH);},Rotate:function U(AF,AH){var AG=Y.call(this,z.JSONInsRotate);AG.AppendToParameterList("Anchor",AF);AG.AppendToParameterList("Radian",AH);},NewPath:function S(){Y.call(this,z.JSONInsNewPath);},ClosePath:function n(){Y.call(this,z.JSONInsClosePath);},MoveTo:function d(AF,AJ,AH,AI){var AG=Y.call(this,z.JSONInsMoveTo);AG.AppendToParameterList("X",AF);AG.AppendToParameterList("Y",AJ);if(AH){AG.AppendToParameterList("CA",1);AG.AppendToParameterList("BPX",AI.x);AG.AppendToParameterList("BPY",AI.y);}else{AG.AppendToParameterList("CA",0);}},LineTo:function P(AF,AJ,AH,AI){var AG;AG=Y.call(this,z.JSONInsLineTo);AG.AppendToParameterList("X",AF);AG.AppendToParameterList("Y",AJ);if(AH){AG.AppendToParameterList("CA",1);AG.AppendToParameterList("BPX",AI.x);AG.AppendToParameterList("BPY",AI.y);}else{AG.AppendToParameterList("CA",0);}},BezierCurveTo:function K(AI,AH,AL,AJ,AF,AK){var AG;AG=Y.call(this,z.JSONInsBezierCurveTo);AG.AppendToParameterList("CP1X",AI);AG.AppendToParameterList("CP1Y",AH);AG.AppendToParameterList("CP2X",AL);AG.AppendToParameterList("CP2Y",AJ);AG.AppendToParameterList("X",AF);AG.AppendToParameterList("Y",AK);},SetRGBAFillColor:function g(AJ,AH,AF,AI){var AG;AG=Y.call(this,z.JSONInsSetRGBAFillColor);AG.AppendToParameterList("R",this.BoundedValue(AJ*256,0,255));AG.AppendToParameterList("G",this.BoundedValue(AH*256,0,255));AG.AppendToParameterList("B",this.BoundedValue(AF*256,0,255));AG.AppendToParameterList("A",this.BoundedValue(AI,0,1));},BoundedValue:function W(AH,AG,AF){if(AH<AG){return AG;}if(AH>AF){return AF;}return AH;},SetRGBAStrokeColor:function AA(AJ,AH,AF,AI){var AG;AG=Y.call(this,z.JSONInsSetRGBAStrokeColor);AG.AppendToParameterList("R",this.BoundedValue(AJ*256,0,255));AG.AppendToParameterList("G",this.BoundedValue(AH*256,0,255));AG.AppendToParameterList("B",this.BoundedValue(AF*256,0,255));AG.AppendToParameterList("A",this.BoundedValue(AI,0,1));},FillPath:function k(){Y.call(this,z.JSONInsFillPath);},StrokePath:function H(){Y.call(this,z.JSONInsStrokePath);},SetLineDash:function E(AH,AG){var AF=Y.call(this,z.JSONInsSetLineDash);AF.AppendArrayToParameterList("LinePattern",AH,AG);},SetLineWidth:function o(AF){var AG=Y.call(this,z.JSONInsSetLineWidth);AG.AppendToParameterList("LineWidth",AF);},SetLineJoin:function I(AG){var AF=Y.call(this,z.JSONInsSetLineJoin);AF.AppendToParameterList("Type",AG);},SetFontSize:function a(AG){var AF=Y.call(this,z.JSONInsSetFontSize);AF.AppendToParameterList("FontSize",AG);},AddRect:function w(AG,AJ,AI,AF){var AH=Y.call(this,z.JSONInsAddRect);AH.AppendToParameterList("X",AG);AH.AppendToParameterList("Y",AJ);AH.AppendToParameterList("W",AI);AH.AppendToParameterList("H",AF);},AddArc:function Z(AG,AL,AF,AJ,AH,AK){var AI=Y.call(this,z.JSONInsAddArc);AI.AppendToParameterList("X",AG);AI.AppendToParameterList("Y",AL);AI.AppendToParameterList("Radius",AF);AI.AppendToParameterList("StartAngle",AJ);AI.AppendToParameterList("EndAngle",AH);AI.AppendToParameterList("AntiClockwise",AK);},AddNeedle:function AB(AI,AH,AJ,AG){var AF=Y.call(this,z.JSONInsAddNeedle);AF.AppendToParameterList("NeedleStyle",AI);AF.AppendToParameterList("BasePoint",AH);AF.AppendToParameterList("Angle",AJ);AF.AppendToParameterList("Size",AG);},AddString:function c(AF,AH){var AG=Y.call(this,z.JSONInsAddString);AG.AppendToParameterList("Point",AF);AG.AppendToParameterList("Text",AH);},FillSimple:function h(AJ,AH,AF,AI){var AG=Y.call(this,z.JSONInsFillSimple,AJ);AG.AppendToParameterList("DarkerFactor",AH);if(AI){AG.AppendToParameterList("HEP",1);AG.AppendToParameterList("FC",AF);}else{AG.AppendToParameterList("HEP",0);}V.call(this,AJ);},FillPattern:function y(AF){Y.call(this,z.JSONInsFillPattern,AF);V.call(this,AF);},FillGradient:function t(AI,AF,AH){var AG=Y.call(this,z.JSONInsFillGradient,AI);AG.AppendToParameterList("BoundingRect",AF);AG.AppendToParameterList("DarkerFactor",AH);V.call(this,AI);},FillEdgeType:function C(AH,AG){var AF=Y.call(this,z.JSONInsFillEdgeType,AH);AF.AppendSimpleVectorToParameterList("Polygon",AG);V.call(this,AH);},FillRadientGradient:function G(AN,AM,AL,AK,AJ,AI,AF,AH,AO){var AG=Y.call(this,z.JSONInsFillRadientGradient,AN);AG.AppendToParameterList("RGUsage",AM);AG.AppendToParameterList("CX",AL);AG.AppendToParameterList("CY",AK);AG.AppendToParameterList("InnerRadius",AJ);AG.AppendToParameterList("OuterRadius",AI);if(AF){AG.AppendToParameterList("HEP",1);AG.AppendToParameterList("ExtraDepth",AH);AG.AppendToParameterList("ExtraIntensity",AO);}else{AG.AppendToParameterList("HEP",0);}V.call(this,AN);},FillBorderMetallic:function AC(AL,AG,AK,AJ,AF,AI){var AH=Y.call(this,z.JSONInsFillBorderMetallic,AL);AH.AppendToParameterList("BorderUse",AG);AH.AppendToParameterList("CX",AK);AH.AppendToParameterList("CY",AJ);AH.AppendToParameterList("Radius",AF);AH.AppendToParameterList("Thickness",AI);V.call(this,AL);},FillDonutOrSphere:function b(AI,AF,AH){var AG=Y.call(this,z.JSONInsFillDonutOrSphere,AI);AG.AppendToParameterList("BoundingRect",AF);AG.AppendToParameterList("IsCircularShape",AH);V.call(this,AI);},MakeDarker:function q(AH,AG){var AF=Y.call(this,z.JSONInsMakeDarker,AH);AF.AppendToParameterList("Factor",AG);V.call(this,AH);},RestoreColor:function AE(AF){Y.call(this,z.JSONInsRestoreColor,AF);V.call(this,AF);},ApplyLineFormat:function R(AF){Y.call(this,z.JSONInsApplyLineFormat,AF);V.call(this,AF);},AddFormatedText:function J(AF,AI,AJ,AH){var AG=Y.call(this,z.JSONInsAddFormatedText,AF);AG.AppendToParameterList("StartPoint",AI);AG.AppendToParameterList("Text",AJ);V.call(this,AF);},ApplyBeveledFrameToRectangle:function f(AK,AM,AJ,AL,AG,AI,AF){var AH=Y.call(this,z.JSONInsApplyBeveledFrameToRectangle);AH.AppendToParameterList("Rect",AK);AH.AppendToParameterList("RotationAngle",AM);AH.AppendToParameterList("BevelDepth",AJ);AH.AppendToParameterList("LTColor",AL);AH.AppendToParameterList("LTAlpha",AG);AH.AppendToParameterList("RBColor",AI);AH.AppendToParameterList("RBAlpha",AF);},DrawGaugeMarker:function l(AH,AK,AF,AJ,AI){var AG=Y.call(this,z.JSONInsAddGaugeMarker);AG.AppendToParameterList("MarkSize",AK);AG.AppendToParameterList("MarkShape",AF);AG.AppendToParameterList("Angle",AJ);AG.AppendToParameterList("NeedleSize",AI);AG.AppendToParameterList("BPX",AH.x);AG.AppendToParameterList("BPY",AH.y);},ApplyDonutToRect:function A(AH,AG,AI){var AF=Y.call(this,z.JSONInsFillDonut2Rect,AI);AF.AppendToParameterList("StartPoint",AH);AF.AppendToParameterList("EndPoint",AG);},BeginFirstFrame:function AD(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new e.JSONUnit({mIsAnimated:true,mIsLastFrame:false});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToFirstFrame();},BeginLastFrame:function B(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new e.JSONUnit({mIsAnimated:true,mIsLastFrame:true});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToLastFrame();},EndFrame:function D(){if(this.mpCurrentUnit!==null&&this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=null;}},EndUnit:function M(){this.mpCurrentUnit=null;},hConstructJSONObject:function O(){var AG=this.mFormatList,AK=this.mUnitList,AH,AF,AI,AJ,AL;AH=this.mJSONObject={};N.forEach(this.mFormatMap,function(AN,AM,AO){AG.push(AN);});AG.sort(F);AF=AK.length;for(AI=0;AI<AF;++AI){AK[AI].CalculateFormatIndex(AG);}AH.UnitList=[];if(AF>0){if(AF===1){AJ={};AK[0].AppendToJSONObject(AJ);AH.UnitList.push(AJ);}else{AL=0;AJ={};AK[0].AppendToJSONObject(AJ);AH.UnitList.push(AJ);for(AI=1;AI<AF;++AI){AJ={};AK[AI].AppendToJSONObject(AJ);if(AK[AI-1].IsAnimated()!==AK[AI].IsAnimated()){AH.UnitList.push(AJ);AL++;}else{AH.UnitList[AL].InstructionList=AH.UnitList[AL].InstructionList.concat(AJ.InstructionList);}}}}u.AppendCompoundPointerVectorToJSONObject("FormatList",AG,AH);this.mIsJSONObjectConstructed=true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.chart.common.Utility","mstrmojo.chart.enums.EnumInstructionName");var Ai=mstrmojo.chart.model,AU=Ai.enums,AR=mstrmojo.VisUtility,Au=AU.EnumDSSGraphGradientType,k=3.141592653589793,r={area:["gm-shape-scircle","",""],line:["gm-shape-scircle","",""],"line-sizeby":["gm-shape-sbar","",""],bar:["gm-shape-bar","","gm-shape-grid-bar"],circle:["gm-shape-circle","gm-shape-circle","gm-shape-grid-circle"],square:["gm-shape-square","gm-shape-square","gm-shape-grid-square"],ticker:["gm-shape-ticker","gm-shape-ticker","gm-shape-grid-ticker"],pie:["gm-shape-pie","gm-shape-pie","gm-shape-pie"],ring:["gm-shape-ring","gm-shape-ring","gm-shape-ring"],markerRect:["gm-shape-bar","gm-shape-bar","gm-shape-bar"],markerCircle:["gm-shape-circle","gm-shape-circle","gm-shape-circle"]},x={area:["scircle","",""],line:["scircle","",""],"line-sizeby":["sbar","",""],bar:["bar","","gbar"],circle:["circle","circle","circle"],square:["square","square","square"],ticker:["ticker","ticker","ticker"],pie:["pie","pie","pie"],ring:["ring","ring","ring"],markerRect:["gmMarker","gmMarker","gmMarker"],markerCircle:["gmMarker","gmMarker","gmMarker"]};var G=mstrmojo.chart.common.Utility;var M={mR:0,mG:0,mB:0},t={"stroke-width":0};function p(A7,A4){var A3=1,A6=2,A5=this.mStyle;if(A7===A3){A5["stroke-dasharray"]=Al.call(this,true,A4);}else{if(A7===A6){A5["stroke-dasharray"]=Al.call(this,false,A4);}}}function J(A3){var A5,A4=document.createElementNS(this.mXMLNS,"polygon"),A7=A3.length,A6="";for(A5=0;A5<A7;++A5){A6+=(A3[A5].x+","+A3[A5].y+" ");}A4.setAttribute("points",A6);return A4;}function AB(A6,A3){var A4,A5,A7=this.getDrawOrder(A6);this.mStyle["stroke-width"]="0";this.mAttributes["class"]="gm-set-line-polygon";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A6;A4=this.hCreateSVGPolygon(A3);this.hExtendGroups(A7);A5=this.mSvg.childNodes[A7+1];A5.appendChild(A4);return{Polygon:A4,Group:A5};}function Al(A5,A3){var A4=A3||1;return[A5?A4*3:A4,A4].join(" ");}function AG(){var A3=[].slice.call(arguments);return A3.some(function(A4){return typeof A4==="undefined";});}function s(A4,BD,A3,A9,BC,BB,A6,A5){var A7="stroke-width:3;stroke-opacity:1;fill:none;",BA="",A8=document.createElementNS(this.mXMLNS,"path");if(AG(A4,BD)){BA+=(" "+this.hMoveTo(A6,A5));BA+=(" "+this.hRelMoveTo(-A9,0));BA+=(" "+this.hRelArcTo(A9,A3,true,A9*2,0));BA+=(" "+this.hRelArcTo(A9,A3,true,-A9*2,0));}else{BA=this.hMoveTo(A4.x,A4.y),BA+=" "+this.hArcTo(A9,A3,true,BD.x,BD.y);}if(BB){A7+="stroke:rgb(255,255,255)";}else{A7+="stroke:rgb(0,0,0)";}A8.sX=A6;A8.sY=A5;A8.sR=A9;A8.sD=BA;A8.setAttribute("d",BA);A8.setAttribute("style",A7);this.mSvg.childNodes[BC+1].appendChild(A8);}mstrmojo.chart.SVGCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.SVGCanvas",mSvg:null,mG:null,mDefs:null,mXMLNS:"http://www.w3.org/2000/svg",mStyle:null,mAttributes:null,mMarkerAttributes:null,mGradientCount:0,mElements:null,seriesDrawOrder:null,init:function AX(A5){var A3;this._super(A5);A3=document.createElementNS(this.mXMLNS,"svg");A3.style.height="100%";A3.style.width="100%";A3.style.padding=0;this.mG=document.createElementNS(this.mXMLNS,"g");this.mDefs=document.createElementNS(this.mXMLNS,"defs");this.mG.appendChild(this.mDefs);A3.appendChild(this.mG);this.mStyle={};this.mSvg=A3;this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];if(A5.seriesDrawOrder&&A5.seriesDrawOrder.length){this.seriesDrawOrder=A5.seriesDrawOrder.concat();var A7=this.seriesDrawOrder,A4=A5.seriesDrawOrder,A8,A6;for(A6=0;A6<A7.length;A6++){A8=A4[A6];A7[A8]=A6;}}},reset:function AQ(){this.mStyle={};this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];this.seriesDrawOrder=null;var A3=this.mG;while(A3.firstChild){A3.removeChild(A3.firstChild);}A3=this.mSvg;while(A3.firstChild){A3.removeChild(A3.firstChild);}A3.appendChild(this.mG);this.mG.appendChild(this.mDefs);},setDrawOrder:function F(A3){if(A3){this.seriesDrawOrder=A3;}},getDrawOrder:function N(A4){if(A4===-3){A4=0;}var A3=this.seriesDrawOrder;if(A3&&A3.length){if(A4>=A3.length){AR.visPrint("Drawing order,Max index exceeded");}return A3[A4];}return A4;},SaveToObject:function D(A3){A3.svg=this.mSvg;return true;},saveState:function An(){},RestoreState:function Ay(){},Clip:function Af(){},Scale:function Ar(A3,A4){},Rotate:function AH(A4,A3){this.SetAttribute("transform","rotate("+A3*180/k+" "+A4.x+" "+A4.y+")");},NewPath:function O(){},ClosePath:function AS(){},MoveTo:function Aj(A3,A6,A4,A5){},LineTo:function AK(A3,A6,A4,A5){},BezierCurveTo:function X(A5,A4,A8,A6,A3,A7){},SetRGBAFillColor:function a(A4,A5,A3,A6){},BoundedValue:function AY(A5,A4,A3){if(A5<A4){return A4;}if(A5>A3){return A3;}return A5;},SetRGBAStrokeColor:function P(A4,A5,A3,A6){},FillPath:function S(){},StrokePath:function A(){},SetLineDash:function At(A3,A4){},SetLineWidth:function Ac(A3){this.mStyle["stroke-width"]=A3;},SetLineJoin:function d(A3){},SetFontSize:function o(A3){},AddRect:function AC(A3,A6,A4,A5){},SetAttribute:function AN(A3,A4){this.mAttributes[A3]=A4;},SetMarkerAttribute:function Q(A3,A4){this.mMarkerAttributes[A3]=A4;},CreateSVGCircle:function E(A9,A7,BC,BB,BD,A8){var A5=BB.isPie?BB.sPieDP.graphCell.sID:BB.gc.sID,BA=this.getDrawOrder(A5),A3=document.createElementNS(this.mXMLNS,"circle"),A6=this.hToCSSStyleStr();if(BC<=10){A3.setAttribute("size","small");}A3.sX=A9;A3.sY=A7;A3.sR=BC;A3.identity=BB;A3.setAttribute("cx",A9);A3.setAttribute("cy",A7);A3.setAttribute("r",BC);A3.setAttribute("style",A6);this.hExtendGroups(BA);this.hCopyAttribute(this.mAttributes,A3);var A4=BB.getChartInfo();if(BB.objType===17179869184){A4.currentMarkerShape=-1;}this.hSetExtraAttributes(A3,A4,"circle");this.mSvg.childNodes[BA+1].appendChild(A3);if(BD){s.call(this,undefined,undefined,true,BC,BA,A8,A9,A7);}this.hResetStyleAndAttribute();},CreateSVGTextBoundingBox:function Ah(A5,A4,A7,A6){var A3=this.hCreateSimpleSVGPolygon(A5,A4,true,A7);if(A7){if(this.mSvg.childNodes.length<=(A6+2)){this.hExtendGroups(A6+1);}this.mSvg.childNodes[A6+2].appendChild(A3);}else{this.mElements.push({Type:"BBox",Node:A3});}},hCreateSimpleSVGPolygon:function Y(BC,A6,A3,A5){var A9=document.createElementNS(this.mXMLNS,"polygon"),A8=BC.length,BA="",A7,BB=this.hToCSSColorStr(A6),A4;if(A5){A4="stroke-width:2;stroke:rgb(0,0,0);stroke-opacity:1";}else{A4="stroke-width:1;stroke:rgb(0,0,0);stroke-opacity:1";}A4+=";stroke:"+BB;A3=A3||false;if(A3){A4+=";fill-opacity:0";}for(A7=0;A7<A8;++A7){BA+=(BC[A7].x+","+BC[A7].y+" ");}A9.setAttribute("points",BA);A9.setAttribute("style",A4);this.hCopyAttribute(this.mAttributes,A9);return A9;},CreateSVGRect:function V(A8,A7,A9,A6,BC){var A4=BC.isPie?BC.sPieDP.graphCell.sID:BC.gc.sID,BA=this.getDrawOrder(A4),BB=document.createElementNS(this.mXMLNS,"rect"),A5=this.hToCSSStyleStr();if(A9<=5||A6<=5){BB.setAttribute("size","small");}BB.identity=BC;BB.setAttribute("x",A8);BB.setAttribute("y",A7);BB.setAttribute("width",A9);BB.setAttribute("height",A6);BB.setAttribute("style",A5);this.hExtendGroups(BA);this.hCopyAttribute(this.mAttributes,BB);var A3=BC.getChartInfo();if(BC.objType===17179869184){A3.currentMarkerShape=-2;}this.hSetExtraAttributes(BB,A3);this.mSvg.childNodes[BA+1].appendChild(BB);this.hResetStyleAndAttribute();},CreateSVGSector:function Aq(BG,BF,BJ,A6,A4,BK,BB,A3){var BI=BK.gc||BK.sPieDP.graphCell,BE=BI.sID,A9=this.getDrawOrder(BE),BC=document.createElementNS(this.mXMLNS,"path"),BD=this.hMoveTo(BG,BF),BA=this.hCalPoint(BG,BF,BJ,A6),A7=this.hCalPoint(BG,BF,BJ,A4),BH=A4-A6>Math.PI,A8=this.hToCSSStyleStr(),A5=this.hCalPoint(BG,BF,BJ/2,(A6+A4)/2);BD+=(" "+this.hLineTo(BA.x,BA.y));BD+=(" "+this.hArcTo(BJ,BH,true,A7.x,A7.y));BD+=(" "+this.hClosePath());BC.sX=BG;BC.sY=BF;BC.sR=BJ;BC.sRadStart=A6;BC.sRadEnd=A4;BC.sD=BD;BC.sGeoCenterX=A5.x;BC.sGeoCenterY=A5.y;if(BJ<=10){BC.setAttribute("size","small");}BC.setAttribute("d",BD);BC.setAttribute("style",A8);BC.identity=BK;this.hExtendGroups(A9);this.hCopyAttribute(this.mAttributes,BC);this.hSetExtraAttributes(BC,BK.getChartInfo());this.mSvg.childNodes[A9+1].appendChild(BC);if(BB){s.call(this,BA,A7,BH,BJ,A9,A3,BG,BF);}this.hResetStyleAndAttribute();},CreateSVGRingSector:function n(BI,BH,A3,BD,A7,A4,BK){var BG=BK.isPie?BK.sPieDP.graphCell.sID:BK.gc.sID,BC=this.getDrawOrder(BG),BE=document.createElementNS(this.mXMLNS,"path"),A6=this.hCalPoint(BI,BH,A3,A7),BA=this.hCalPoint(BI,BH,A3,A4),A9=this.hCalPoint(BI,BH,BD,A7),A8=this.hCalPoint(BI,BH,BD,A4),BJ=A4-A7>Math.PI,BF=this.hMoveTo(A9.x,A9.y),BB=this.hToCSSStyleStr(),A5=this.hCalPoint(BI,BH,(A3+BD)>>1,(A7+A4)/2);BF+=(" "+this.hArcTo(BD,BJ,true,A8.x,A8.y));BF+=(" "+this.hLineTo(BA.x,BA.y));BF+=(" "+this.hArcTo(A3,BJ,false,A6.x,A6.y));BF+=(" "+this.hClosePath());BE.sX=BI;BE.sY=BH;BE.sOutR=A3;BE.sInR=BD;BE.sRadStart=A7;BE.sRadEnd=A4;BE.sD=BF;BE.sGeoCenterX=A5.x;BE.sGeoCenterY=A5.y;if(A3<=10){BE.setAttribute("size","small");}BE.setAttribute("d",BF);BE.setAttribute("style",BB);BE.identity=BK;this.hExtendGroups(BC);this.hCopyAttribute(this.mAttributes,BE);this.hSetExtraAttributes(BE,BK.getChartInfo());this.mSvg.childNodes[BC+1].appendChild(BE);this.hResetStyleAndAttribute();BE.setAttribute("class","gm-shape-ring");BE.setAttribute("subtype","ring");},CreateSVGRing:function q(BC,BA,BE,BB,BG){var A4=BG.isPie?BG.sPieDP.graphCell.sID:BG.gc.sID,BD=this.getDrawOrder(A4),A8=document.createElementNS(this.mXMLNS,"path"),A7=this.hCalPoint(BC,BA,BE,Math.PI),BF=this.hCalPoint(BC,BA,BE,0),A3=this.hCalPoint(BC,BA,BB,Math.PI),A6=this.hCalPoint(BC,BA,BB,0),A9=this.hMoveTo(A7.x,A7.y),A5=this.hToCSSStyleStr();A9+=(" "+this.hArcTo(BE,true,true,BF.x,BF.y));A9+=(" "+this.hMoveTo(A6.x,A6.y));A9+=(" "+this.hArcTo(BB,true,false,A3.x,A3.y));A9+=(" "+this.hArcTo(BB,true,false,A6.x,A6.y));A9+=(" "+this.hMoveTo(BF.x,BF.y));A9+=(" "+this.hArcTo(BE,true,true,A7.x,A7.y));A8.sX=BC;A8.sY=BA;A8.sGeoCenterX=BC;A8.sGeoCenterY=BA;A8.sOutR=BE;A8.sInR=BB;A8.setAttribute("d",A9);A8.setAttribute("style",A5);A8.identity=BG;this.hExtendGroups(BD);this.hCopyAttribute(this.mAttributes,A8);this.hSetExtraAttributes(A8,BG.getChartInfo());this.mSvg.childNodes[BD+1].appendChild(A8);this.hResetStyleAndAttribute();},CreateSVGCurves:function j(BC,BE,A8,BN,BL,A5,BK,A4){var BF,BD,A9=BC.length,BA=document.createElementNS(this.mXMLNS,"path"),A7,BM="",BI=Math.floor(A9/4),A6="",BB,BJ,A3,BH,BG=(BL&&(this.mStyle["stroke-width"]<3));this.mStyle.fill="none";if(BG){A3=this.mStyle["stroke-opacity"];BJ=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BH=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;BB=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=A3;this.mStyle["stroke-width"]=BJ;if(BH){this.mStyle["stroke-dasharray"]=BH;}A7=document.createElementNS(this.mXMLNS,"path");}BF=this.hToCSSStyleStr();this.hCopyAttribute(this.mAttributes,BA);for(BD=0;BD<BI;++BD){if(BD===0){BM="M "+BC[BD].x+","+BC[BD].y+" ";}BM+=("C "+BC[BD*4+1].x+","+BC[BD*4+1].y+" ");BM+=(BC[BD*4+2].x+","+BC[BD*4+2].y+" ");BM+=(BC[BD*4+3].x+","+BC[BD*4+3].y+" ");}BA.identity=BN;BA.setAttribute("style",BF);BA.setAttribute("d",BM);if(BG){this.hCopyAttribute(this.mAttributes,A7);A7.identity=BN;A7.setAttribute("style",BB);A7.setAttribute("d",BM);}if(BL){BA.setAttribute("type","trendLine");BA.setAttribute("class","gm-set-trendline");A6="startpoint:"+A5.x+","+A5.y+";";A6+="midpoint:"+BK.x+","+BK.y+";";A6+="endpoint:"+A4.x+","+A4.y;BA.setAttribute("highlightPoints",A6);BA.setAttribute("hover-catcher","0");if(this.mSvg.childNodes.length<=(BE+2)){this.hExtendGroups(BE+1);}this.mSvg.childNodes[BE+2].appendChild(BA);if(BG){A7.setAttribute("type","trendLine");A7.setAttribute("class","gm-set-trendline");A7.setAttribute("highlightPoints",A6);A7.setAttribute("hover-catcher","1");this.mSvg.childNodes[BE+2].appendChild(A7);}}else{if(A8!==-1){if(this.mSvg.childNodes.length<=(A8+1)){this.hExtendGroups(A8);}this.mSvg.childNodes[A8+1].appendChild(BA);this.hSetExtraAttributes(BA,BN.getChartInfo());}}this.hReset();},CreateSVGPolyLineForTRLine:function AD(BE,BG,BL,BK,A6,BI,A4){var BF,A8=document.createElementNS(this.mXMLNS,"polyline"),A5,A9=BE.length,BC="",BA,BD,BJ,A3,BH,BB=(this.mStyle["stroke-width"]<3),A7;this.mStyle.fill="none";if(BB){A3=this.mStyle["stroke-opacity"];BJ=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BH=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;BD=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=A3;this.mStyle["stroke-width"]=BJ;if(BH){this.mStyle["stroke-dasharray"]=BH;}A5=document.createElementNS(this.mXMLNS,"polyline");}BA=this.hToCSSStyleStr();for(BF=0;BF<A9;++BF){BC+=(BE[BF].x+","+BE[BF].y+" ");}A8.identity=BL;A8.setAttribute("points",BC);A8.setAttribute("style",BA);if(BK){A8.setAttribute("type","trendLine");A8.setAttribute("class","gm-set-trendline");}else{A8.setAttribute("type","referenceLine");A8.setAttribute("class","gm-set-referenceline");}A7="startpoint:"+A6.x+","+A6.y+";";A7+="midpoint:"+BI.x+","+BI.y+";";A7+="endpoint:"+A4.x+","+A4.y;A8.setAttribute("highlightPoints",A7);A8.setAttribute("hover-catcher","0");this.hCopyAttribute(this.mAttributes,A8);if(this.mSvg.childNodes.length<=(BG+2)){this.hExtendGroups(BG+1);}this.mSvg.childNodes[BG+2].appendChild(A8);if(BB){A5.identity=BL;A5.setAttribute("points",BC);A5.setAttribute("style",BD);if(BK){A5.setAttribute("type","trendLine");A5.setAttribute("class","gm-set-trendline");}else{A5.setAttribute("type","referenceLine");A5.setAttribute("class","gm-set-referenceline");}A5.setAttribute("hover-catcher","1");this.hCopyAttribute(this.mAttributes,A5);this.mSvg.childNodes[BG+2].appendChild(A5);}this.hReset();},hCalPoint:function AT(A3,A8,A6,A7){var A5=A3+A6*Math.cos(A7),A4=A8+A6*Math.sin(A7);return{x:A5,y:A4};},hMoveTo:function Z(A3,A4){return"M "+A3+" "+A4;},hLineTo:function A0(A3,A4){return"L "+A3+" "+A4;},hArcTo:function AW(A5,A4,A7,A3,A6){return"A "+A5+","+A5+" 0 "+(A4?"1":"0")+","+(A7?"1 ":"0 ")+A3+","+A6;},hClosePath:function AO(){return"Z";},hRelMoveTo:function I(A3,A6,A4,A5){return"m "+A3+" "+A6;},hRelArcTo:function AW(A5,A4,A7,A3,A6){return"a "+A5+","+A5+" 0 "+(A4?"1":"0")+","+(A7?"1 ":"0 ")+A3+","+A6;},hExtendGroups:function(A6){var A5,A4=this.mSvg,A3=A4.childNodes,A7=A3.length-1;while(A7<=A6){A5=document.createElementNS(this.mXMLNS,"g");A4.appendChild(A5);A7++;}},CreateSVGPolyLine:function AL(A4,BH,A5,A9){var A8,BA=this.getDrawOrder(A4);var BD=0,A7=1,BG=2,BC=3,A6=4,A3=5;A9=A9||BD;this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A4;switch(A9){case BD:break;case A7:break;case BG:break;case BC:break;case A6:this.mAttributes["class"]="gm-set-originline";this.mAttributes.type="originLine";if(BH[0].x===BH[1].x){this.mAttributes.subtype="v";}else{this.mAttributes.subtype="h";}break;case A3:this.mAttributes.subtype="ticker";this.mAttributes.type="shape";this.mAttributes["class"]="gm-shape-ticker";break;default:break;}this.hExtendGroups(BA);A8=this.mSvg.childNodes[BA+1];var BF=this.hCreateSVGPolyline(BH,A8);if(A9===A3||A9===A6){if(A5.length){BF.identity=A5[0];}if(A9===A3){if(BH.length>=2){var BE=BH[0],BB=BH[1];BF.tickerCenter={x:Math.round(0.5*(BE.x+BB.x)),y:Math.round(0.5*(BE.y+BB.y))};}}}this.hResetStyleAndAttribute();},CreateSVGPolylineWithCircles:function AF(A9,A4,A8){var A5,A7,A3,A6,BA=this.getDrawOrder(A9);this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A9;this.hExtendGroups(BA);A6=this.mSvg.childNodes[BA+1];this.hCreateSVGPolyline(A4,A6);for(A5=0;A5<A4.length;++A5){A7=document.createElementNS(this.mXMLNS,"circle");A3=A8[A5];A7.identity=A3;A7.setAttribute("cx",A4[A5].x);A7.setAttribute("cy",A4[A5].y);A7.setAttribute("r","5.5");A7.style.fill=this.mStyle.stroke;this.hCopyAttribute(this.mMarkerAttributes,A7);A7.setAttribute("class","gm-shape-scircle");A7.setAttribute("type","shape");A7.setAttribute("subtype","scircle");A6.appendChild(A7);}this.hResetStyleAndAttribute();},hCreateSVGPolyline:function g(A5,A7){this.mStyle.fill="none";var A6,A4=document.createElementNS(this.mXMLNS,"polyline"),A3=A5.length,A8="",A9=this.hToCSSStyleStr();A4.pointList=A5;for(A6=0;A6<A3;++A6){A8+=(A5[A6].x+","+A5[A6].y+" ");}A4.setAttribute("points",A8);A4.setAttribute("style",A9);this.hCopyAttribute(this.mAttributes,A4);A7.appendChild(A4);return A4;},CreateSVGPolygonWithCircles:function AZ(A4,BC,A5){var A6,BA,A3,A9,A8,BB;BB=AB.call(this,A4,BC);BA=BB.Polygon;A8=BB.Group;var A7=BC.length;if((A7&1)!==0){return ;}for(A6=0;A6<A7/2;++A6){A3=document.createElementNS(this.mXMLNS,"circle");A9=A5[A6];A3.identity=A9;A3.setAttribute("cx",BC[A6].x);A3.setAttribute("cy",BC[A6].y);A3.setAttribute("r","5.5");A3.style.fill=this.mStyle.fill;this.hCopyAttribute(this.mMarkerAttributes,A3);A3.setAttribute("class","gm-shape-scircle");A3.setAttribute("type","shape");A3.setAttribute("subtype","scircle");A8.appendChild(A3);}BA.chartInfo=A9.getChartInfo();this.hResetStyleAndAttribute();},CreateSVGPolygonWithTrapezoid:function u(BI,BA,A7){var BH,BC,BD,A3,BO,BE,BB,BG,A9;BB=AB.call(this,BI,BA);BC=BB.Polygon;BE=BB.Group;var BJ=BA.length;if((BJ&1)!==0||BJ<4){return ;}BG=BJ/2;var BL,BK,BN,A6,BM,A5,A8,BF,A4;for(BH=0;BH<BG;++BH){BN=A6=BM=A5=null;A9=[];BL=BA[BH];BK=BA[BJ-1-BH];if(BH!==0){BN=BA[BH-1];A6=BA[BJ-BH];}if(BH!==BG-1){BM=BA[BH+1];A5=BA[BJ-2-BH];}if(BN){BN={x:0.5*(BN.x+BL.x),y:0.5*(BN.y+BL.y)};}if(A6){A6={x:0.5*(A6.x+BK.x),y:0.5*(A6.y+BK.y)};}if(BM){BM={x:0.5*(BM.x+BL.x),y:0.5*(BM.y+BL.y)};}if(A5){A5={x:0.5*(A5.x+BK.x),y:0.5*(A5.y+BK.y)};}A8=[BN,BL,BM,A5,BK,A6];for(BF=0;BF<A8.length;BF++){if(A8[BF]){A9.push(A8[BF]);}}A4=J.call(this,A9);if(A4&&A7[BH]){A4.identity=A7[BH];}A4.setAttribute("class","gm-shape-sbar");A4.setAttribute("type","shape");A4.setAttribute("subtype","sbar");this.hCopyAttribute(t,A4);BE.appendChild(A4);}BC.chartInfo=BD;this.hResetStyleAndAttribute();},CreateSVGPolygonWithRects:function L(A4,BD,A5){var A6,BB,A3,BA,A9,A8,BC;BC=AB.call(this,A4,BD);BB=BC.Polygon;A8=BC.Group;var A7=BD.length;if((A7&1)!==0){return ;}for(A6=0;A6<A7/2;++A6){BA=document.createElementNS(this.mXMLNS,"rect");A9=A5[A6];A3=A9.getChartInfo();BA.identity=A9;if(A3.dirc===1){BA.setAttribute("x",(BD[A6].x).toString());BA.setAttribute("y",String(BD[A6].y-3));BA.setAttribute("width",(BD[A7-A6-1].x-BD[A6].x).toString());BA.setAttribute("height","6");}else{BA.setAttribute("x",(BD[A6].x-3).toString());BA.setAttribute("y",BD[A6].y);BA.setAttribute("width","6");BA.setAttribute("height",(BD[A7-A6-1].y-BD[A6].y).toString());}this.hCopyAttribute(this.mMarkerAttributes,BA);BA.setAttribute("class","gm-shape-sbar");BA.setAttribute("type","shape");BA.setAttribute("subtype","sbar");A8.appendChild(BA);}BB.chartInfo=A3;this.hResetStyleAndAttribute();},hManipulateTextElements:function y(A5){if(A5.Tooltip){var A4=0,A3,A7=this.mElements,A6=A7.length;while(A4<A6){A3=A7[A4];if(A3.Tag&&A3.Tag==="tspan"){A3.Tooltip=A5.Tooltip;}A4++;}}},CreateSVGAxisText:function W(A6,A4,A3){var A5=this.hToCSSStyleStr(),A7=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A7);A7.setAttribute("style",A5);A7.setAttribute("type","axis-text");if(A3){A7.identity=A3;}this.hManipulateTextElements({Tooltip:A4});this.hCopyTextElements(A7,"axis-word");var A8=this.getDrawOrder(A6);this.hExtendGroups(A8);this.mSvg.childNodes[A8+1].appendChild(A7);this.hReset();},CreateSVGBannerText:function Ao(A5,A3){var A4=this.hToCSSStyleStr(),A6=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A6);A6.setAttribute("style",A4);A6.setAttribute("type","banner-text");if(A3){A6.identity=A3;}this.hCopyTextElements(A6,"banner-text");var A7=this.getDrawOrder(A5);this.hExtendGroups(A7);this.mSvg.childNodes[A7+1].appendChild(A6);this.hReset();},CreateSVGGenericText:function Ak(A6,A3,A5){var A4=this.hToCSSStyleStr(),A7=document.createElementNS(this.mXMLNS,"text");A5=A5||"data-label";if(!!A3){A7.identity=A3;}this.hCopyAttribute(this.mAttributes,A7);A7.setAttribute("style",A4);this.hCopyTextElements(A7,A5);if(A6){if(this.mSvg.childNodes.length<=(A6+2)){this.hExtendGroups(A6+1);}this.mSvg.childNodes[A6+2].appendChild(A7);}else{this.mG.appendChild(A7);}this.hReset();},hCopyTextElements:function e(BB,A8){A8=A8||"axis-word";var A7,A3,A4=0;for(A7=0;A7<this.mElements.length;A7++){var A5=this.mElements[A7];if(A5){if(A5.Type==="text"){var A9=document.createElementNS(this.mXMLNS,A5.Tag),A6=A5.Attributes;for(A3 in A6){A9.setAttribute(A3,A6[A3]);}A9.setAttribute("type",A8);if(A8==="axis-word"){A9.setAttribute("Index",A4);A4++;}A9.setAttribute("class","gm-tspan");A9.textContent=A5.Content;if(A5.Tooltip){var BA=document.createElementNS(this.mXMLNS,"title");BA.textContent=A5.Tooltip;A9.appendChild(BA);}if(A5.Style){A9.setAttribute("style",A5.Style);}BB.appendChild(A9);}else{if(A5.Type==="BBox"){if(A5.Node){this.mG.appendChild(A5.Node);}}}}}},CreateSVGPolygon:function w(A3,A4,A7){var A6,A8=this.getDrawOrder(A3);var A5=this.hCreateSVGPolygon(A4,A7);this.hExtendGroups(A8);A6=this.mSvg.childNodes[A8+1];A6.appendChild(A5);this.mG.appendChild(A5);this.hResetStyleAndAttribute();},hCreateSVGPolygon:function B(A3,A7){var A5,A6=this.hToCSSStyleStr(),A8=A3.length,A4=J.call(this,A3);A4.points=A3;if(A7!==undefined){A4.identity=A7;}A4.setAttribute("style",A6);this.hCopyAttribute(this.mAttributes,A4);return A4;},AddArc:function Aw(A3,A8,A7,A4,A6,A5){},AddNeedle:function Ax(A5,A6,A3,A4){},AddString:function Ae(A4,A3){},FillSimple:function Ap(A4,A6,A5,A3){this.mStyle.fill=this.hToCSSColorStr(A5);this.mStyle["fill-opacity"]=A4.mAlpha/255;},FillPattern:function C(A3){},FillGradient:function U(BA,A5,A4){var A8,BC,A6,A9,A7=BA.getGradient();switch(A7.gradientType){case Au.DssGraphGradientLinear:if(A5.width===0||A5.height===0){return ;}BC=document.createElementNS(this.mXMLNS,"linearGradient");BC.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));BC.setAttribute("x1","0%");BC.setAttribute("y1","0%");if(A7.angle===0){BC.setAttribute("x2","100%");BC.setAttribute("y2","0%");}else{BC.setAttribute("x2","0%");BC.setAttribute("y2","100%");}A9=this.hCreateLinearGradientStop(0,A7.startGraphColor,BA.mAlpha/255);BC.appendChild(A9);for(A8=0;A8<A7.intermediateColors.length;++A8){var BB=A7.intermediateColors[A8];A9=this.hCreateLinearGradientStop(BB.Step,BB.Color,BA.mAlpha/255);BC.appendChild(A9);}A9=this.hCreateLinearGradientStop(1,A7.endGraphColor,BA.mAlpha/255);BC.appendChild(A9);this.mDefs.appendChild(BC);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case Au.DssGraphGradientCircular:A6=document.createElementNS(this.mXMLNS,"radialGradient");A6.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A6.setAttribute("cx",String(A5.cx));A6.setAttribute("cy",String(A5.cy));A6.setAttribute("r",String(A5.r));A6.setAttribute("gradientUnits","userSpaceOnUse");A6.setAttribute("fx",String(A5.fx));A6.setAttribute("fy",String(A5.fy));var A3=A5.startStop||0;A9=this.hCreateLinearGradientStop(A3,A7.startGraphColor,BA.mAlpha/255);A6.appendChild(A9);A9=this.hCreateLinearGradientStop(1,A7.endGraphColor,BA.mAlpha/255);A6.appendChild(A9);this.mDefs.appendChild(A6);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case Au.DssGraphGradientRectangular:break;}},hCreateLinearGradientStop:function AV(A7,A5,A6){var A4=document.createElementNS(this.mXMLNS,"stop"),A3="stop-color:"+this.hToCSSColorStr(A5)+";stop-opacity:"+A6;A4.setAttribute("offset",A7*100+"%");A4.setAttribute("style",A3);return A4;},FillEdgeType:function A1(A3,A4){},FillRadientGradient:function As(A9,BA,A7,A6,BB,A3,A4,A8,A5){},FillBorderMetallic:function Az(A5,A3,A7,A6,A8,A4){},FillDonutOrSphere:function Av(A3,A4,A5){},MakeDarker:function R(A4,A3){},RestoreColor:function b(A3){},ApplyLineFormat:function l(A4){var A5=A4.getGradient();if(A5&&A5.valid&&A5.style===1){this.StrokeGradient(A5);p.call(this,A5.strokePatten,A4.mLineThickness);}else{var A3=this.mStyle;A3.stroke=this.hToCSSColorStr(A4.mLineColor);p.call(this,A4.mLineStyle,A4.mLineThickness);}this.mStyle["stroke-opacity"]=A4.mAlpha/255;},StrokeGradient:function AM(A9){var A5=document.createElementNS(this.mXMLNS,"linearGradient");A5.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A5.setAttribute("x1","0%");A5.setAttribute("y1","0%");if(A9.angle===0){A5.setAttribute("x2","100%");A5.setAttribute("y2","0%");}else{A5.setAttribute("x2","0%");A5.setAttribute("y2","100%");}var A6,A3=A9.colors[0].Color,A8=A9.colors[A9.colors.length-1].Color,A4=this.hCreateLinearGradientStop(0,A3,A9.endAlpha/255);A5.appendChild(A4);for(A6=1;A6<A9.colors.length-1;++A6){var A7=A9.colors[A6];A4=this.hCreateLinearGradientStop(A7.Step,A7.Color,A9.endAlpha/255);A5.appendChild(A4);}A4=this.hCreateLinearGradientStop(1,A8,A9.endAlpha/255);A5.appendChild(A4);this.mDefs.appendChild(A5);this.mStyle.stroke="url(#"+this.gradPrefix+(this.mGradientCount++)+")";},AddFormatedText:function f(A7,A3,A5,A6){var A4={Type:"text",Tag:"tspan",Attributes:{x:A3.x,y:A3.y},Content:A5};if(A6&&A6.BaselineOffset){A4.Attributes.y-=A6.BaselineOffset-0.5;A4.Attributes.dy="0.5ex";}this.mElements.push(A4);},ApplyBeveledFrameToRectangle:function K(A4,A8,A3,A5,A7,A6,A9){},DrawGaugeMarker:function Ab(A6,A4,A7,A3,A5){},ApplyDonutToRect:function Aa(A3,A5,A4){},BeginFirstFrame:function AJ(){},BeginLastFrame:function z(){},EndFrame:function Ag(){},EndUnit:function H(){},hToCSSColorStr:function AI(A4){var A3=true;if(typeof A4==="number"){if(A3){M.mR=A4&255;M.mG=(A4&65280)>>8;M.mB=(A4&16711680)>>16;}else{M.mB=A4&255;M.mG=(A4&65280)>>8;M.mR=(A4&16711680)>>16;}}else{return"rgb("+A4.mR+","+A4.mG+","+A4.mB+")";}return"rgb("+M.mR+","+M.mG+","+M.mB+")";},hToCSSStyleStr:function h(){var A5,A4=this.mStyle,A3="";for(A5 in A4){if(A4.hasOwnProperty(A5)){A3=A3+A5+":"+A4[A5]+";";}}return A3.substr(0,A3.length-1);},hCopyAttribute:function AE(A5,A3){var A4;for(A4 in A5){if(A5.hasOwnProperty(A4)){A3.setAttribute(A4,A5[A4]);}}},hResetStyle:function A2(){this.mStyle={};},hResetElements:function Ad(){this.mElements=[];},hResetAttribute:function AP(){this.mAttributes={};this.mMarkerAttributes={};},hResetStyleAndAttribute:function AA(){this.hResetStyle();this.hResetAttribute();},hReset:function Am(){this.hResetStyle();this.hResetAttribute();this.hResetElements();},hTranslateMarkerShape:function(A3,A4){var A5="";A3=A3||0;switch(A3){case -2:A5="markerRect";break;case -1:A5="markerCircle";break;case 0:if(A4===1){A5="area";}else{if(A4===2){A5="bar";}else{if(A4===3){A5="line";}}}break;case 4:A5="circle";break;case 24:A5="square";break;case 200:A5="ticker";break;case 201:A5="pie";break;case 202:A5="ring";break;case 204:A5="line";break;case 205:A5="bar";break;case 206:A5="area";break;default:break;}return A5;},hSetExtraAttributes:function(A9,A5,BC){var BA="",A7="shape",A4="",BB=A5.tp,A8=0,A6=A5.currentMarkerShape,BD=BC||(this.hTranslateMarkerShape(A6,BB)||"bar"),A3=A5.hasSizeBy;if(BD==="line"&&A3){BD+="-sizeby";}if(BB===4||BB===5){A8=1;}else{if(BB===7){A8=2;}}if(r.hasOwnProperty(BD)){BA=r[BD][A8];}if(x.hasOwnProperty(BD)){A4=x[BD][A8];}A9.setAttribute("class",BA);A9.setAttribute("type",A7);A9.setAttribute("subtype",A4);},ApplyFontFormat:function c(BE){var A3=this.mStyle,A9=BE.mFontStyle;if(A9!==undefined){var A8=0,BC=1,A5=2,BD=3,BB=4,A6=8;A3["text-decoration"]="none";A3["font-weight"]="normal";if(!!(A9&BC)){A3["font-weight"]="bold";}if(!!(A9&A5)){A3["font-style"]="italic";}if(!!(A9&BB)&&!!(A9&A6)){A3["text-decoration"]="underline line-through";}else{if(!!(A9&BB)){A3["text-decoration"]="underline";}if(!!(A9&A6)){A3["text-decoration"]="line-through";}}}if(BE.mFontAlignment){var BA=0,A4=1,A7=2;switch(BE.mFontAlignment){case BA:A3["text-anchor"]="start";break;case A4:A3["text-anchor"]="middle";break;case A7:A3["text-anchor"]="right";break;}}A3["text-anchor"]="start";if(BE.mFontColor){A3.fill=this.hToCSSColorStr(BE.mFontColor);}if(G.isValidNumber(BE.mStrokeColor)){A3.stroke=this.hToCSSColorStr(BE.mStrokeColor);}if(BE.mStrokeWidth){A3["stroke-width"]=BE.mStrokeWidth;}if(BE.mFontAlpha){A3["fill-opacity"]=BE.mFontAlpha;}if(BE.mFontName){A3["font-family"]=BE.mFontName;}if(BE.mFontSize){A3["font-size"]=BE.mFontSize+"pt";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","FormatFont");var O=mstrmojo.chart;mstrmojo.chart.SubTextHolder=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.SubTextHolder",mVecStr:null,mInitVecPartition:null,mVecPartition:null,mVecSize:null,mSpaceWidth:0,mMaxWordWidth:0,init:function M(S){this._super(S);this.mVecStr=[];this.mInitVecPartition=[];this.mVecPartition=[];this.mVecSize=[];},Clear:function P(){this.mVecStr.splice(0,this.mVecStr.length);},ParseText:function K(X,d,b){var Z=this.mInitVecPartition,S,a,W,V,U,c=[],Y;S=X.split("\n");Z.splice(0,this.mInitVecPartition.length);Z.push(0);W=0;a=S.length;for(V=0;V<a;++V){c=S[V].split(d);W+=c.length;Z.push(W);Y=c.length;for(U=0;U<Y;++U){this.mVecStr.push(this.TruncateWord(c[U],b));}}this.mVecPartition=Z.concat();},TruncateWord:function E(V,S){if(S<4||S>V.length){return V;}var U=V.substr(0,S-3);U+="...";return U;},UpdateText:function B(X,U){var W,V,S,a,Y,Z;this.mVecSize.splice(0,this.mVecSize.length);W=U;V=0;S=this.mVecStr.length;for(a=0;a<S;a++){Y={width:0,mX_bearing:0,mX_advance:0};if(this.mVecStr[a]===""){this.mVecSize.push(Y);}else{Z=W.GetStringExtent(this.mVecStr[a]);Y.width=Y.mX_advance=Z.Width;this.mVecSize.push(Y);if(Z.Width>V){V=Z.Width;}}}this.mMaxWordWidth=V;Z=W.GetStringExtent(" ");this.mSpaceWidth=Z.Width;},GetMaxWidth:function Q(){var W,S,U,V;W=0;S=this.mVecPartition.length;for(U=0;U+1<S;++U){V=this.GetOneLineWidth(U);if(V>W){W=V;}}return Math.floor(W+0.5);},GetOneLineWidth:function D(X){var S=this.mVecPartition,W=this.mVecSize,V,U;V=0;for(U=S[X];U<S[X+1];U++){if(U===S[X]&&U===S[X+1]-1){V+=W[U].width;}else{if(U===S[X]&&U!==S[X+1]-1){V+=W[U].mX_advance-W[U].mX_bearing;}else{if(U!==S[X]&&U===S[X+1]-1){V+=W[U].width+W[U].mX_bearing;}else{V+=W[U].mX_advance;}}}if(U!==S[X]){V+=this.mSpaceWidth;}}return V;},GetOneWordWidth:function F(S){return this.mVecSize[S].width;},GetStringWidth:function L(V,U){var S=U.GetStringExtent(V);return S.Width;},GetSpaceWidth:function N(){return this.mSpaceWidth;},GetSpaceWidthEx:function C(S){var U=S.GetStringExtent(" ");return U.Width;},GetLineCount:function G(){return this.mVecPartition.length>0?this.mVecPartition.length-1:0;},SetLineCount:function J(U,S){if(U<1){return ;}if(S!==0){S=S||-1;}var V=this.mVecPartition;if(U===1){V.splice(0,V.length);V.push(0);V.push(this.mVecSize.length);}else{if(this.GetLineCount()<=U){if(S===-1){return ;}if(this.GetMaxWidth()<=S){return ;}this.PartitionBy(S,true);if(this.GetLineCount()>U){V.length=U+1;V[V.length-1]=this.mVecSize.length;}}else{V.length=U+1;V[V.length-1]=this.mVecSize.length;}}},PartitionBy:function H(W,b){var V=this.mVecPartition,Z=this.mInitVecPartition,a,Y,X,U,S;b=(b!==undefined)?b:true;if(!b&&W<this.mMaxWordWidth){W=Math.floor(this.mMaxWordWidth+0.5);}V.splice(0,V.length);a=Z.length;for(Y=0;Y+1<a;++Y){V.push(Z[Y]);U=0;S=Z[Y];for(X=Z[Y];X<Z[Y+1];X++){U+=this.mVecSize[X].mX_advance;if(X!==Z[Y+1]-1){U+=this.mSpaceWidth;}if(U>W&&X!==S){U=0;S=X;V.push(X--);}}}if(a>0){V.push(Z[a-1]);}},GetOneLineString:function R(V){var S=this.mVecPartition,W="",U;for(U=S[V];U<S[V+1];U++){W=W.concat(this.mVecStr[U]);if(U!==S[V+1]-1){W=W.concat(" ");}}return W;},GetOneLineWords:function A(W){var U=this.mVecPartition,V,S=[];for(V=U[W];V<U[W+1];V++){S.push(V);}return S;},GetOneLineXBearing:function I(S){return this.mVecSize[this.mVecPartition[S]].mX_bearing;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");var C=mstrmojo.gm.EnumAxisScale,A=mstrmojo.gm.GMUtility;var B=mstrmojo.gm.GMAxisScale=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMAxisScale",axKey:undefined,rMin:undefined,rMax:undefined,mMin:undefined,mMax:undefined,logScale:false,scaleType:undefined,minMax:undefined,isCust:false,autoMin:false,autoMax:false,init:function(D){this._super(D);if(this.mMin===undefined){this.mMin=this.rMin;}if(this.mMax===undefined){this.mMax=this.rMax;}if(D.minMax!==undefined&&D.minMax!==C.CUSTOM){this.scaleType=D.minMax;}},absorbInfo:function(D){var E;if(this.axKey!==D.axKey){return ;}this.logScale=D.logScale;this.scaleType=D.scaleType;E=this.isCust=D.isCust;if(E===false){return ;}this.mMin=D.mMin;this.mMax=D.mMax;this.autoMin=D.autoMin;this.autoMax=D.autoMax;},serialize2String:function(){return[this.axKey,this.scaleType,this.mMin,this.mMax,this.rMin,this.rMax,this.logScale,this.autoMin,this.autoMax].join(":");}});mstrmojo.gm.GMAxisScale.createAxisScaleFromArr=function(D){var E={axKey:D[0],scaleType:parseInt(D[1],10),mMin:parseFloat(D[2]),mMax:parseFloat(D[3]),rMin:parseFloat(D[4]),rMax:parseFloat(D[5]),logScale:D[6]===""?undefined:A.isTrueForBoolValue(D[6]),autoMin:A.isTrueForBoolValue(D[7]),autoMax:A.isTrueForBoolValue(D[8])};E.isCust=(E.mMin!==E.rMin||E.mMax!==E.rMax)||E.scaleType===C.CUSTOM;return new B(E);};mstrmojo.gm.GMAxisScale.createAxisScaleCollectionFromArrays=function(E,D){D=D||{};E.forEach(function(F){D[F[0]]=mstrmojo.gm.GMAxisScale.createAxisScaleFromArr(F);});return D;};mstrmojo.gm.GMAxisScale.createAllMetricsAxObj=function(D){var M,I={axKey:"AllMetrics"},F=[],H=[],J,E=true,L=true,G=true;if(D.AllMetrics!==undefined){return ;}for(M in D){if(M!=="AllMetrics"&&D.hasOwnProperty(M)){J=D[M];if(I.rMin===undefined){I.rMin=J.rMin;}else{if(I.rMin>J.rMin){I.rMin=J.rMin;}}F.push(J.mMin);if(I.mMin===undefined){I.mMin=J.mMin;}else{if(I.mMin>J.mMin){I.mMin=J.mMin;}}if(I.rMax===undefined){I.rMax=J.rMax;}else{if(I.rMax<J.rMax){I.rMax=J.rMax;}}H.push(J.mMax);if(I.mMax===undefined){I.mMax=J.mMax;}else{if(I.mMax<J.mMax){I.mMax=J.mMax;}}if(I.logScale===undefined){I.logScale=J.logScale;}else{if(I.logScale!==J.logScale){E=false;}}if(I.scaleType===undefined){I.scaleType=J.scaleType;}else{if(I.scaleType!==J.scaleType){I.scaleType=C.DIFFERENT;}}if(I.autoMin===undefined){I.autoMin=J.autoMin;}else{if(I.autoMin!==J.autoMin){I.autoMin=false;L=false;}}if(I.autoMax===undefined){I.autoMax=J.autoMax;}else{if(I.autoMax!==J.autoMax){I.autoMax=false;G=false;}}}}if(!E){I.logScale=undefined;}I.isCust=(I.mMin!==I.rMin||I.mMax!==I.rMax)||I.scaleType===C.CUSTOM;if(I.scaleType===C.CUSTOM){var K=false;H.forEach(function(N){if(N!==I.mMax){K=true;}});F.forEach(function(N){if(N!==I.mMin){K=true;}});if(!L||!G){K=true;}if(K){I.scaleType=C.DIFFERENT;}}D.AllMetrics=new B(I);return D.AllMetrics;};mstrmojo.gm.GMAxisScale.serializeCollection2String=function(G){var E,F=G.AllMetrics,D=[];if(F===undefined){F=mstrmojo.gm.GMAxisScale.createAllMetricsAxObj(G);}D.push(F.serialize2String());for(E in G){if(E!=="AllMetrics"&&G.hasOwnProperty(E)){D.push(G[E].serialize2String());}}return D.join(",");};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.vi.viz.EnumVisualizationTemplates");var AH=mstrmojo.gm,u=mstrmojo.array,W=mstrmojo.hash,D=mstrmojo.css,J=AH.GMUtility,G=mstrmojo.chart.enums.EnumFontStyle,r=AH.WidgetPropertyTag,V=AH.FormatingPropertyTag,c=AH.ShapeFillType,AD=mstrmojo.vi.viz.EnumVisualizationTemplates,e=AH.EnumFitTo,K=AH.EnumAxisScale,O=AH.EnumShape,AE=AH.EnumSubtype,N=AH.EnumDataLabels,AN=AH.EnumDataLabelPlacements,X=AH.EnumLegend,B=AH.EnumLegendMode,g=AH.EnumTextAlignH,w=AH.EnumTextAlignV,l=AH.EnumMaxSizeType,h=AH.EnumMinSizeType,AF=AH.EnumAxes,AM=AH.EnumMatrixLines,z=AH.EnumGridLines,F=AH.EnumLegendSlot,q=AH.EnumGraphType,H=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME;var o={Content:1,Window:2,Compact:3,Manual:4},AQ={Global:0,PerRC:1,Local:2,Custom:3,Different:4},t={Area:0,Bar:1,Line:2,Circle:4,Square:6,Tick:7,Pie:10,Ring:11},AP={Automatic:1,Absolute:2,Stacked:3,Clustered:4,Percent:5},AC={Hide:1,"Show only values":2,"Show only text":3},Q={Automatic:1,Generic:2,Reserved:3},AA={Automatic:1,Manual:2,"Auto fit":3},y={Automatic:1,Manual:2,Proportional:3},p={"Show Both":1,"Show None":2,"Show Only X":3,"Show Only Y":4},U={"Show All":1,"Show None":2,"Show Only Horizontal":3,"Show Only Vertical":4},L={Automatic:1,Show:2,Hide:3};var AG=[null,"Content","Window","Compact"],n=["Global","PerRC","Local","Custom","Different"],b=["Area","Bar","Line","StepLine","Circle","Rectangle","Square","Tick","PieSlice","Polygon","Pie","Ring"],S=[null,"Automatic","Absolute","Stacked","Clustered","Percent"],Y=[null,"Hide","Show only values","Show only text"],AK=[null,"Automatic","Generic","Reserved"],AJ=[null,"Automatic","Manual","Auto fit"],AB=[null,"Automatic","Manual","Proportional"],A=[null,"Show Both","Show None","Show Only X","Show Only Y"],AO=[null,"Show All","Show None","Show Only Horizontal","Show Only Vertical"],k=[null,"Automatic","Show","Hide"];var R={allAxLnShw:"xAxLnShw:yAxLnShw",allAxLnClr:"xAxLnClr:yAxLnClr",allAxLnStyle:"xAxLnStyle:yAxLnStyle",allAxLnCmbStyle:"xAxLnCmbStyle:yAxLnCmbStyle",allAxLnThk:"xAxLnThk:yAxLnThk",allAxTtShw:"xAxTtShw:yAxTtShw",allAxTtCtt:"xAxTtCtt:yAxTtCtt",allAxTtFntClr:"xAxTtFntClr:yAxTtFntClr",allAxTtFntFml:"xAxTtFntFml:yAxTtFntFml",allAxTtFntStyle:"xAxTtFntStyle:yAxTtFntStyle",allAxTtFntSz:"xAxTtFntSz:yAxTtFntSz",allAxLbFntClr:"xAxLbFntClr:yAxLbFntClr",allAxLbFntSz:"xAxLbFntSz:yAxLbFntSz",allAxLbFntFml:"xAxLbFntFml:yAxLbFntFml",allAxLbFntStyle:"xAxLbFntStyle:yAxLbFntStyle",allAxLbRtt:"xAxLbRtt:yAxLbRtt",allAxLbShw:"xAxLbShw:yAxLbShw",allMatrixLnShw:"vMatrixLnShw:hMatrixLnShw",allMatrixLnClr:"vMatrixLnClr:hMatrixLnClr",allMatrixLnThk:"vMatrixLnThk:hMatrixLnThk",allMatrixLnStyle:"vMatrixLnStyle:hMatrixLnStyle",allMatrixLnCmbStyle:"vMatrixLnCmbStyle:hMatrixLnCmbStyle",allNGMGridLnShw:"xGridLnShw:yGridLnShw",allGridLnShw:"majorGridLnShw:minerGridLnShw",allGridLnClr:"majorGridLnClr:minerGridLnClr",allGridLnThk:"majorGridLnThk:minerGridLnThk",allGridLnStyle:"majorGridLnStyle:minerGridLnStyle",allGridLnCmbStyle:"majorGridLnCmbStyle:minerGridLnCmbStyle",allRwColShw:"rwHdrShw:colHdrShw:rwVlShw:colVlShw",allLnShw:"xAxLnShw:yAxLnShw:xAxOriLnShw:yAxOriLnShw",allLnClr:"xAxLnClr:yAxLnClr:xAxOriLnClr:yAxOriLnClr",allLnStyle:"xAxLnStyle:yAxLnStyle:xAxOriLnStyle:yAxOriLnStyle",allLnCmbStyle:"xAxLnCmbStyle:yAxLnCmbStyle:xAxOriLnCmbStyle:yAxOriLnCmbStyle",allLnThk:"xAxLnThk:yAxLnThk:xAxOriLnThk:yAxOriLnThk",allTxtFntClr:"rwHdrTxtFntClr:colHdrTxtFntClr:rwVlTxtFntClr:colVlTxtFntClr:lgdFntClr:dlFntClr:rfLnFntClr:xAxTtFntClr:xAxLbFntClr:yAxTtFntClr:yAxLbFntClr",allTxtFntSz:"rwHdrTxtFntSz:colHdrTxtFntSz:rwVlTxtFntSz:colVlTxtFntSz:lgdFntSz:dlFntSz:rfLnFntSz:xAxTtFntSz:xAxLbFntSz:yAxTtFntSz:yAxLbFntSz",allTxtFntFml:"rwHdrTxtFntFml:colHdrTxtFntFml:rwVlTxtFntFml:colVlTxtFntFml:lgdFntFml:dlFntFml:rfLnFntFml:xAxTtFntFml:xAxLbFntFml:yAxTtFntFml:yAxLbFntFml",allTxtFntStyle:"rwHdrTxtFntStyle:colHdrTxtFntStyle:rwVlTxtFntStyle:colVlTxtFntStyle:lgdFntStyle:dlFntStyle:rfLnFntStyle:xAxTtFntStyle:xAxLbFntStyle:yAxTtFntStyle:yAxLbFntStyle",allRwColTxtFntClr:"rwHdrTxtFntClr:colHdrTxtFntClr:rwVlTxtFntClr:colVlTxtFntClr",allRwColTxtFntSz:"rwHdrTxtFntSz:colHdrTxtFntSz:rwVlTxtFntSz:colVlTxtFntSz",allRwColTxtFntFml:"rwHdrTxtFntFml:colHdrTxtFntFml:rwVlTxtFntFml:colVlTxtFntFml",allRwColTxtFntStyle:"rwHdrTxtFntStyle:colHdrTxtFntStyle:rwVlTxtFntStyle:colVlTxtFntStyle",allRwColTxtAlignH:"rwHdrTxtAlignH:colHdrTxtAlignH:rwVlTxtAlignH:colVlTxtAlignH",allRwColTxtAlignV:"rwHdrTxtAlignV:colHdrTxtAlignV:rwVlTxtAlignV:colVlTxtAlignV",outBdrShw:"OutSideBorder",allFillClr:"bgFillClr:rwHdrFillClr:colHdrFillClr",allFillTrans:"bgFillTrans:rwHdrFillTrans:colHdrFillTrans",colTxtShw:"colHdrShw:colVlShw",rwTxtShw:"rwHdrShw:rwVlShw",rwTxtTxtFntClr:"rwHdrTxtFntClr:rwVlTxtFntClr",rwTxtTxtFntSz:"rwHdrTxtFntSz:rwVlTxtFntSz",rwTxtTxtFntFml:"rwHdrTxtFntFml:rwVlTxtFntFml",rwTxtTxtFntStyle:"rwHdrTxtFntStyle:rwVlTxtFntStyle",rwTxtTxtAlignH:"rwHdrTxtAlignH:rwVlTxtAlignH",rwTxtTxtAlignV:"rwHdrTxtAlignV:rwVlTxtAlignV",colTxtTxtFntClr:"colHdrTxtFntClr:colVlTxtFntClr",colTxtTxtFntSz:"colHdrTxtFntSz:colVlTxtFntSz",colTxtTxtFntFml:"colHdrTxtFntFml:colVlTxtFntFml",colTxtTxtFntStyle:"colHdrTxtFntStyle:colVlTxtFntStyle",colTxtTxtAlignH:"colHdrTxtAlignH:colVlTxtAlignH",colTxtTxtAlignV:"colHdrTxtAlignV:colVlTxtAlignV",axOriLnShw:"xAxOriLnShw:yAxOriLnShw",axOriLnClr:"xAxOriLnClr:yAxOriLnClr",axOriLnStyle:"xAxOriLnStyle:yAxOriLnStyle",axOriLnCmbStyle:"xAxOriLnCmbStyle:yAxOriLnCmbStyle",axOriLnThk:"xAxOriLnThk:yAxOriLnThk",autoGridLnClr:"majorGridLnClr",autoGridLnCmbStyle:"majorGridLnCmbStyle",autoGridLnThk:"majorGridLnThk",autoGridLnStyle:"majorGridLnStyle"};var C={metricShapes:1,mtcLvlDataLabel:1,axisOrigin:1,AxisScale:1,fmtOnComb:1,yr:1,xr:1,y2r:1,x2r:1,rvr:1,chr:1,groupInfo:1};var AL=/[{}\[\],"'_:;\s]/i;var x="@pLd";var I=/@pLd/g;function j(AR){var AS=new window.DOMParser();return AS.parseFromString(AR,"text/xml");}function AI(){var AR=this.xmlData,AS=this.xmlDoc;if(!AS&&AR){this.xmlDoc=AS=j(AR);}return AS;}function a(AS,AR){if(!C[AS]){return AR;}return AR.replace(I,"");}function f(AW,AR,AY){if(!C[AW]){return AR;}var AX="",AV=0,AU,AT,AS;if(!AR||AR.length===0){return AR;}AU=AR.search(AL);while(AU!==-1){if(AU!==AV){AT=AR.substring(AV,AU);if(AT.length===32){AS=AY[AT];if(AS!==undefined){AX+=x+AT;}}else{AX+=AT;}}AX+=AR[AU];AR=AR.substring(AU+1);AU=AR.search(AL);}AX+=AR;return AX;}function P(AS){var AR=new XMLSerializer();return AR.serializeToString(AS);}function E(AS,AU){var AR,AT="",AV=AU.length;for(AR=0;AR<AV;AR++){if(AR!==0){AT+=",";}AT+=AS[AR]+":"+AU[AR];}return AT;}function M(AV){AV=AV||"";var AT,AS,AR=AV.split(","),AW=AR.length,AU={};for(AT=0;AT<AW;AT++){AS=AR[AT].split(":");if(AS.length===2){AU[AS[0]]=parseFloat(AS[1]);}}return AU;}function Z(AT){AT=AT||"";var AR=AT.split(":"),AS={};if(AR.length===2){AS[AR[0]]=parseFloat(AR[1])||1;}return AS;}function s(AS){AS=AS||"";var AR=AS.split(",");return{first:parseInt(AR[0],10),second:parseInt(AR[1],10)};}mstrmojo.gm.GMProperty=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMProperty",scales:null,generalProps:null,xmlDoc:null,xmlData:null,xmlDirty:false,jsonData:null,controller:null,rhIds:null,chIds:null,yIds:null,xIds:null,y2Ids:null,x2Ids:null,templateObjectMapping:null,isItemCached:null,readItemCache:null,init:function(AR){if(this._super){this._super(AR);}this.resetScales();this.resetGeneralProps();this.rhIds=[];this.chIds=[];if(!mstrmojo.gm.GMProperty.propertyMap){this.generatePropertyMap();}this.isItemCached={};this.readItemCache={};this.gm="OGM";},generatePropertyMap:function(){var AS,AU=mstrmojo.gm.GMProperty.propertyMap={};function AR(AV,AW){if(!AU[AV]){AU[AV]=[AW];}else{if(AU[AV].indexOf(AW)<0){AU[AV].push(AW);}}}function AT(AV){return function(AW){AR(AW,AV);};}for(AS in R){if(R.hasOwnProperty(AS)){AU[AS]=R[AS].split(":");u.forEach(AU[AS],AT(AS));}}},updateDefaults:function(AV,AS){var AR=AS[V.MODIFIED_DEF_FILL_COLOR],AT;if(AR){if(AR==="transparent"){AT=AR;}else{if(AR==="default"){AT=undefined;}else{if(!isNaN(AR)){AT=parseInt(AS[V.MODIFIED_DEF_FILL_COLOR],10);}else{try{AT=JSON.parse(AR.replace(/'/g,'"'));}catch(AU){AT=undefined;}}}}}if(AT!==undefined){AV[V.SHAPE_FILL_COLOR]=AT;AV[V.SHAPE_FILL_COLOR_DEFAULT]=false;}else{AV[V.SHAPE_FILL_COLOR_DEFAULT]=true;}this.defaultsObj=AV;},resetScales:function(){this.scales={rh:[],ch:[],y:1,y2:1,x:1,x2:1,lgd:1,ctw:1,cth:1};},updateChartProps:function(AU){var AV=this,AT=this.jsonData,AS;AS=mstrApp.getThemeProps(this.gm);AS=W.mergeHashes(AS.GENERAL_PROPS.ALL,AS.GENERAL_PROPS[AU]);W.keyarray(AS).forEach(function(AW){AV.generalProps[AW]=AS[AW];});var AR={legendShow:r.LEGEND_VISIBLE,FitTo:r.FIT_TO,dataLabels:r.DATA_LABEL};W.keyarray(AR).forEach(function(AW){if(AT[AR[AW]]){AV.initItem(AR[AW]);}});},resetGeneralProps:function(){var AR={};AR.fitTo=e.NONE;AR.axisScale=K.GLOBAL;AR.shape=O.LINE;AR.subtype=AE.AUTO;AR.dataLabels=N.HIDE;AR.dataLabelPlacements=AN.AUTOMATIC;AR.banding=true;AR.legend=X.SHOW;AR.legendMode=B.RESTORED;AR.legendShow=true;AR.colAlign=g.CENTER;AR.rowAlignH=g.CENTER;AR.rowAlignV=w.CENTER;AR.maxSizeType=l.AUTO;AR.minSizeType=h.AUTO;AR.maxSizeValue=0.9;AR.minSizeValue=0.2;AR.outBorder=true;AR.axes=AF.SHOW_BOTH;AR.matrixLine=AM.SHOW_ALL;AR.gridLine=z.AUTO;AR.legendSlot=F.RIGHT_MIDDLE;this.generalProps=AR;},getXMLString:function(){return this.xmlData;},isXMLDirty:function(){return this.xmlDirty;},resetXMLDirtyFlag:function(){this.xmlDirty=false;},initFromXML:function(AU){if(AU){if(this.xmlData&&this.xmlData!==AU){this.xmlDoc=null;}this.xmlData=AU;}var AS,AV,AR=[r.FIT_TO,r.AXIS_SCALE,r.SHAPE,r.SUB_TYPE,r.DATA_LABEL,r.DATA_LABELS_PLACEMENT,r.BANDING,r.LEGEND_VISIBLE,r.COL_ALIGNMENT,r.ROW_ALIGNMENT,r.MAX_SIZE_TYPE,r.MAX_SIZE_VALUE,r.MIN_SIZE_TYPE,r.MIN_SIZE_VALUE,r.SELECTION_TYPE,r.SELECTIONS,r.OUTSIDE_BORDER,r.AXES,r.MATRIX_LINES,r.GRID_LINES,r.LEGEND_MODE,r.LEGEND_POSITION,r.SCALE_LEGEND_WIDTH,r.SCALE_CHART_WIDTH,r.SCALE_CHART_HEIGHT,r.METRIC_SHAPES,r.AXIS_ORIGIN,r.LOG_SCALE,r.TREND_LINE_DEF,r.TREND_BUBBLE_FORE_DEF,r.REF_LINE_DEF,V.FORMATS_ON_COMBINATION,V.ALL_SHAPE_FORMAT,V.V_MATRIX_LINES_SHOW,V.V_MATRIX_LINES_COLOR,V.V_MATRIX_LINES_THICKNESS,V.V_MATRIX_LINES_STYLE,V.H_MATRIX_LINES_SHOW,V.H_MATRIX_LINES_COLOR,V.H_MATRIX_LINES_THICKNESS,V.H_MATRIX_LINES_STYLE];for(AS=0,AV=AR.length;AS<AV;AS++){this.initItem(AR[AS]);}var AT=this.generalProps;if(AT.legendShow){AT.legend=(AT.legendMode===B.MINIMIZED)?X.MINIMIZED:X.SHOW;}else{AT.legend=X.HIDE;}},reInitItem:function(AU,AS){var AR=this.generalProps;var AT=this.hGetPropValue(AU);switch(AU){case r.FIT_TO:AR.fitTo=o[AT]||AS;break;case V.CONTAINER_FIT_MODE:AR[V.CONTAINER_FIT_MODE]=AT===undefined?AS:AT;break;default:break;}},initItem:function(Aa){var Ai,Ae,AY,AX,Ah,Ag,AZ,AT,Ak,AW,Al,AR,Ad,AU,Aj=this.rhIds,Ab=this.chIds,Ac=this.controller,AV=this.scales,AS=this.generalProps,Af;Af=this.hGetPropValue(Aa);switch(Aa){case r.FIT_TO:AS.fitTo=o[Af]||W.walk("GENERAL_PROPS.ALL.fitTo",mstrApp.getThemeProps(this.gm));break;case r.AXIS_SCALE:AS.axisScale=AQ[Af]||K.GLOBAL;break;case r.SHAPE:AY=t[Af];AS.shape=isNaN(AY)?O.LINE:AY;break;case r.METRIC_SHAPES:case r.METRIC_LEVEL_DATA_LABEL:case r.AXIS_ORIGIN:case r.LOG_SCALE:case r.TREND_LINE_DEF:case r.TREND_BUBBLE_FORE_DEF:case r.REF_LINE_DEF:case r.FORMATS_ON_COMBINATION:case V.ALL_SHAPE_FORMAT:AS[Aa]=J.stringToJSON(Af);break;case r.SUB_TYPE:AS.subtype=AP[Af]||AE.AUTO;break;case r.DATA_LABEL:AS.dataLabels=AC[Af];break;case r.DATA_LABELS_PLACEMENT:AS.dataLabelPlacements=Q[Af];break;case r.BANDING:AS.banding=Af==="true";break;case r.LEGEND_VISIBLE:AS.legendShow=Af!=="Hide";break;case r.COL_ALIGNMENT:if(Af!==undefined){AY=parseInt(Af,10);if(!isNaN(AY)&&AY>=0&&AY<=2){this.updateItem(V.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL,AY);this.updateItem(V.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL,AY);}}break;case r.ROW_ALIGNMENT:if(Af!==undefined){AY=s(Af).first;if(!isNaN(AY)&&AY>=0&&AY<=2){this.updateItem(V.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL,AY);this.updateItem(V.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL,AY);}AY=s(Af).second;if(!isNaN(AY)&&AY>=0&&AY<=2){this.updateItem(V.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL,AY);this.updateItem(V.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL,AY);}}break;case r.MAX_SIZE_TYPE:AS.maxSizeType=AA[Af]||l.AUTO;break;case r.MAX_SIZE_VALUE:AY=parseFloat(Af);AS.maxSizeValue=isNaN(AY)?0.9:AY;break;case r.MIN_SIZE_TYPE:AS.minSizeType=y[Af]||(mstrApp.getThemeProps("THEME_STYLE")===H.DEFAULT?h.AUTO:h.PROPORTIONAL);break;case r.MIN_SIZE_VALUE:AY=parseFloat(Af);AS.minSizeValue=isNaN(AY)?0.2:AY;break;case r.OUTSIDE_BORDER:AS.outBorder=Af!=="Hide";break;case r.AXES:if(Af!==undefined){AS.axes=p[Af]||AF.SHOW_BOTH;if(AS.axes===AF.SHOW_BOTH){Ah=Ag=true;}else{if(AS.axes===AF.SHOW_X){Ah=true;Ag=false;}else{if(AS.axes===AF.SHOW_Y){Ah=false;Ag=true;}else{Ah=Ag=false;}}}this.updateItem(V.X_AXIS_LINE_SHOW,Ah);this.updateItem(V.Y_AXIS_LINE_SHOW,Ag);}break;case r.MATRIX_LINES:if(Af!==undefined){AS.matrixLine=U[Af]||AM.SHOW_ALL;if(AS.matrixLine===AM.SHOW_ALL){Ah=Ag=true;}else{if(AS.matrixLine===AM.SHOW_HORIZONTAL){Ah=false;Ag=true;}else{if(AS.matrixLine===AM.SHOW_VERTICAL){Ah=true;Ag=false;}else{Ah=Ag=false;}}}this.updateItem(V.V_MATRIX_LINES_SHOW,Ah);this.updateItem(V.H_MATRIX_LINES_SHOW,Ag);}break;case r.GRID_LINES:AS.gridLine=L[Af]||z.AUTO;break;case r.LEGEND_MODE:AS.legendMode=parseInt(Af,10);break;case r.LEGEND_POSITION:AU=parseInt(Af,10);if(AU===F.LEFT){AU=F.LEFT_MIDDLE;}else{if(AU===F.RIGHT){AU=F.RIGHT_MIDDLE;}}AS.legendSlot=AU||F.RIGHT_MIDDLE;break;case r.SCALE_LEGEND_WIDTH:AV.lgd=parseFloat(Af)||undefined;break;case r.SCALE_CHART_WIDTH:AV.ctw=parseFloat(Af)||1;break;case r.SCALE_CHART_HEIGHT:AV.cth=parseFloat(Af)||1;break;case r.SCALE_ROW_HEADERS:Aj.length=0;Ak=M(Af);AT=Ac.getRowTitleInfo(true);Ae=AT.items.length;for(Ai=0;Ai<Ae;Ai++){AZ=AT.items[Ai].id;if(Ak.hasOwnProperty(AZ)){AV.rh[Ai]=Ak[AZ]||1;}else{AV.rh[Ai]=1;}Aj.push(AZ);}break;case r.SCALE_COL_HEADERS:Ab.length=0;Al=M(Af);AW=Ac.getColTitleInfo(true);Ae=AW.items.length;for(Ai=0;Ai<Ae;Ai++){AZ=AW.items[Ai].id;if(Al.hasOwnProperty(AZ)){AV.ch[Ai]=Al[AZ]||1;}else{AV.ch[Ai]=1;}Ab.push(AZ);}break;case r.SCALE_Y:case r.SCALE_X:case r.SCALE_Y2:case r.SCALE_X2:if(Aa===r.SCALE_Y){AR=Ac.getYAxisInfo(undefined,undefined,true,false);AX="y";}else{if(Aa===r.SCALE_X){AR=Ac.getXAxisInfo(undefined,undefined,true,false);AX="x";}else{if(Aa===r.SCALE_Y2){AR=Ac.getYAxisInfo(undefined,undefined,false,false);AX="y2";}else{if(Aa===r.SCALE_X2){AR=Ac.getXAxisInfo(undefined,undefined,false,false);AX="x2";}}}}Ad=Z(Af);Ae=AR.ids.length;AZ="";for(Ai=0;Ai<Ae;Ai++){if(Ai!==0){AZ+=",";}AZ+=AR.ids[Ai];}this[AX+"Ids"]=AZ;AV[AX]=Ad[AZ]||1;break;}},readItem:function(AV,AR){var AS=this.generalProps,AY=this.scales,AU,AX;switch(AV){case r.FIT_TO:if(AY.ctw!==1||AY.cth!==1){AX=e.MANUAL;}else{AX=AS.fitTo;}break;case V.CONTAINER_FIT_MODE:AX=AS[V.CONTAINER_FIT_MODE];break;case r.AXIS_SCALE:AX=AS.axisScale;break;case r.SHAPE:AX=AS.shape;break;case r.SUB_TYPE:AX=AS.subtype;break;case r.DATA_LABEL:AX=AS.dataLabels;break;case r.DATA_LABELS_PLACEMENT:AX=AS.dataLabelPlacements;break;case r.BANDING:AX=AS.banding;break;case r.LEGEND_VISIBLE:AX=AS.legendShow;break;case r.COL_ALIGNMENT:AX=AS.colAlign;break;case r.ROW_ALIGNMENT:AX={};AX.h=AS.rowAlignH;AX.v=AS.rowAlignV;break;case r.MAX_SIZE_TYPE:AX=AS.maxSizeType;break;case r.MAX_SIZE_VALUE:AX=AS.maxSizeValue;break;case r.MIN_SIZE_TYPE:AX=AS.minSizeType;break;case r.MIN_SIZE_VALUE:AX=AS.minSizeValue;break;case r.OUTSIDE_BORDER:AX=AS.outBorder;break;case r.AXES:AX=AS.axes;break;case r.MATRIX_LINES:AX=AS.matrixLine;break;case r.GRID_LINES:AX=AS.gridLine;break;case r.LEGEND_MODE:AX=AS.legendMode;break;case r.LEGEND_POSITION:AX=AS.legendSlot;break;case r.SCALE_LEGEND_WIDTH:AX=AY.lgd;break;case r.SCALE_CHART_WIDTH:AX=AY.ctw;break;case r.SCALE_CHART_HEIGHT:AX=AY.cth;break;case r.SCALE_ROW_HEADERS:AX=AY.rh;break;case r.SCALE_COL_HEADERS:AX=AY.ch;break;case r.SCALE_Y:AX=AY.y;break;case r.SCALE_X:AX=AY.x;break;case r.SCALE_Y2:AX=AY.y2;break;case r.SCALE_X2:AX=AY.x2;break;case r.SCALE_ALL:AX=AY;break;default:AX=this.hGetPropValue(AV);break;}AU=AX;switch(AV){case V.LINE_MARKER_SHOW:case V.LEGEND_BORDER_SHOW:case V.X_AXIS_ORIGIN_LINE_SHOW:case V.Y_AXIS_ORIGIN_LINE_SHOW:case V.X_AXIS_LINE_SHOW:case V.X_AXIS_TITLE_SHOW:case V.X_AXIS_LABELS_SHOW:case V.Y_AXIS_LINE_SHOW:case V.Y_AXIS_TITLE_SHOW:case V.Y_AXIS_LABELS_SHOW:case V.V_MATRIX_LINES_SHOW:case V.H_MATRIX_LINES_SHOW:case V.ALL_ROW_COLUMN_SHOW:case V.COLUMN_HEADER_SHOW:case V.ROW_HEADER_SHOW:case V.COLUMN_VALUES_SHOW:case V.ROW_VALUES_SHOW:case V.GRID_LINE_AUTO:case r.SORT_ORDER:case V.TOTAL_SHOW:case V.INT_SUM_SHOW:case V.INT_SUM_FULL:case V.SHOW_MODEBAR:if(AU){AX=(AU==="true"||AU===true);}break;case V.MAJOR_GRID_LINES_SHOW:if(AU===undefined){AU=AS.gridLine;}AX=parseInt(AU,10);break;case V.MINOR_GRID_LINES_SHOW:if(AU===undefined){AU=AS.gridLine;if(AU===2){AU=z.HIDE;}}AX=parseInt(AU,10);break;case V.X_AXIS_LABELS_ROTATION:if(AU){AX=parseInt(AU,10);}break;case r.SORT_INDEX:if(AU){AX={};AX.row=s(AU).first;AX.col=s(AU).second;}break;case r.AXIS_SCALE_DATA:if(AU){AX=J.parseAxisScaleData(AU);}break;case r.METRIC_SHAPES:case r.METRIC_LEVEL_DATA_LABEL:case r.AXIS_ORIGIN:case r.LOG_SCALE:case r.TREND_LINE_DEF:case r.TREND_BUBBLE_FORE_DEF:case r.REF_LINE_DEF:case r.SELECTIONS:case r.FORMATS_ON_COMBINATION:case V.ALL_SHAPE_FORMAT:var AW=this.isItemCached;var AT=this.readItemCache;if(!AW[AV]){AT[AV]=J.stringToJSON(AX);AW[AV]=true;}AX=AT[AV];break;case r.SCALE_V_EXTRA_LINE:AX=parseFloat(AX)||1;break;case r.MAX_SIZE_VALUE:case r.MIN_SIZE_VALUE:if(AU){AX=parseFloat(AU);}break;case V.REF_LABELS_FONT_FAMILY:case V.REF_LABELS_FONT_SIZE:case V.REF_LABELS_FONT_STYLE:case V.REF_LABELS_FONT_COLOR:if(AU&&typeof AU==="string"&&AU.indexOf("{")>=0){AX=J.stringToJSON(AU);}break;case V.POINT_SIZE:case V.POINT_POS:case V.JITTER:case V.JTR_TYPE:case V.PTSZ_TYPE:case V.PTPOS_TYPE:if(AU){AX=parseFloat(AU);}break;case V.XBINS_START:case V.XBINS_END:case V.XBINS_SIZE:if(AU){AX=parseFloat(AU);}case V.POSITIVE_COLOR:case V.NEGATIVE_COLOR:case V.TOTAL_COLOR:case V.INT_SUM_COLOR:if(AX==="default"){AX=undefined;}default:break;}if(AX===undefined){if(!AR){AX=this.defaultsObj&&this.defaultsObj[AV];}}else{if(AV.slice(-3)==="Clr"&&typeof AX==="string"){if(AX!=="transparent"){if(isNaN(AX)){AX=J.stringToJSON(AX);}else{AX=parseInt(AX,10);}}}}if(typeof AX==="string"&&!isNaN(AX)){AX=parseInt(AX,10);}return AX;},clearReadItemCache:function(){this.isItemCached={};},updateItem:function(AT,AS){var AV=this.scales,AR=this.generalProps,AU=J.everythingToString(AS);this.clearReadItemCache();switch(AT){case r.FIT_TO:AS=AS===o.Manual?AR.fitTo:AS;AR.fitTo=AS;AU=AG[AS===o.Manual?AR.fitTo:AS];break;case r.AXIS_SCALE:AR.axisScale=AS;AU=n[AS];break;case r.SHAPE:AR.shape=AS;AU=b[AS];break;case r.SUB_TYPE:AR.subtype=AS;AU=S[AS];break;case r.DATA_LABEL:AR.dataLabels=AS;AU=Y[AS];break;case r.DATA_LABELS_PLACEMENT:AR.dataLabelPlacements=AS===true?1:2;AU=AK[AR.dataLabelPlacements];break;case r.BANDING:AR.banding=AS;break;case r.LEGEND_VISIBLE:AR.legendShow=AS;AU=AS?"Show":"Hide";break;case r.ROW_ALIGNMENT:AR.rowAlignH=AS.h;AR.rowAlignV=AS.v;AU=AS.h+","+AS.v;break;case r.COL_ALIGNMENT:AR.colAlign=AS;break;case r.MAX_SIZE_TYPE:AR.maxSizeType=AS;AU=AJ[AS];break;case r.MAX_SIZE_VALUE:AR.maxSizeValue=AS;break;case r.MIN_SIZE_TYPE:AR.minSizeType=AS;AU=AB[AS];break;case r.MIN_SIZE_VALUE:AR.minSizeValue=AS;break;case r.OUTSIDE_BORDER:AR.outBorder=AS;AU=AS?"Show":"Hide";break;case r.AXES:AR.axes=AS;AU=A[AS];break;case r.MATRIX_LINES:AR.matrixLine=AS;AU=AO[AS];break;case r.GRID_LINES:AR.gridLine=AS;AU=k[AS];break;case r.LEGEND_MODE:AR.legendMode=AS;break;case r.LEGEND_POSITION:AR.legendSlot=AS;break;case r.SCALE_LEGEND_WIDTH:AV.lgd=AS;break;case r.SCALE_CHART_WIDTH:AV.ctw=parseFloat(AS)||1;break;case r.SCALE_CHART_HEIGHT:AV.cth=parseFloat(AS)||1;break;case r.SCALE_ROW_HEADERS:AV.rh=AS;AU=E(this.rhIds,AV.rh);break;case r.SCALE_COL_HEADERS:AV.ch=AS;AU=E(this.chIds,AV.ch);break;case r.SCALE_Y:AV.y=AS;AU=this.yIds+":"+AV.y;break;case r.SCALE_X:AV.x=AS;AU=this.xIds+":"+AV.x;break;case r.SCALE_Y2:AV.y2=AS;AU=this.y2Ids+":"+AV.y2;break;case r.SCALE_X2:AV.x2=AS;AU=this.x2Ids+":"+AV.x2;break;case r.SORT_INDEX:AU=AS.row+","+AS.col;break;default:break;}this.hSetPropValue(AT,AU);},removeItem:function(AR){this.hRemoveProp(AR);},updateItems:function(AU,AR){var AS,AT=AU.length;for(AS=0;AS<AT;AS++){this.updateItem(AU[AS],AR[AS]);}},setController:function(AR){this.controller=AR;this.initItem(r.SCALE_ROW_HEADERS);this.initItem(r.SCALE_COL_HEADERS);this.initItem(r.SCALE_Y);this.initItem(r.SCALE_X);this.initItem(r.SCALE_Y2);this.initItem(r.SCALE_X2);},initHTML5Props:function(AT){var AY=this.readItem,Ag=AT.LEGEND={},Am=AT.BK={},Aj=AT.RH_BK={},Ad=AT.CH_BK={},Ab=AT.RH_TITLE={},AZ=AT.RH={},Ac=AT.CH_TITLE={},AV=AT.CH={},Af=AT.AXIS_LABEL_X={},Ae=AT.AXIS_LABEL_Y={},Al=AT.AXIS_TITLE_X={},Ak=AT.AXIS_TITLE_Y={},AW=AT.AXIS_LINE_X={},AU=AT.AXIS_LINE_Y={},Ai=AT.MATRIX_LINE_H={},AX=AT.MATRIX_LINE_V={},AS=AT.GRID_LINE_MAJOR={},Aa=AT.GRID_LINE_MINOR={},AR=AT.OUTSIDE_BORDER={},Ao=function(As,Ap,Aq){if(Ap===c.Gradient){Aq=J.decodeColor(Aq);var Ar=D.buildGradient(Aq.or,Aq.c1,Aq.c2);if(Ar){As[Ar.n]=Ar.v;}}else{As.backgroundColor=J.decodeColor(Aq);}},An=function(Aq,Ap){Aq.fontWeight=(Ap&G.FS_BOLD?"bold":"normal");Aq.fontStyle=(Ap&G.FS_ITALIC?"italic":"normal");if((Ap&G.FS_STRIKETHROUGH)&&(Ap&G.FS_UNDERLINE)){Aq.textDecoration="line-through underline";}else{if(Ap&G.FS_STRIKETHROUGH){Aq.textDecoration="line-through";}else{if(Ap&G.FS_UNDERLINE){Aq.textDecoration="underline";}else{Aq.textDecoration="none";}}}},Ah=function(Ap){var Aq=["solid","dashed","dotted"];return Aq[Ap]||"none";};Ag.fontFamily=AY.call(this,V.LEGEND_FONT_FAMILY);Ag.fontSize=AY.call(this,V.LEGEND_FONT_SIZE);An(Ag,AY.call(this,V.LEGEND_FONT_STYLE));Ag.color=J.decodeColor(AY.call(this,V.LEGEND_FONT_COLOR));Ao(Ag,AY.call(this,V.LEGEND_BG_FILL_STYLE),AY.call(this,V.LEGEND_BG_COLOR));Ag.opacity=AY.call(this,V.LEGEND_BG_FILL_TRANSPARENCY)/100;if(AY.call(this,V.LEGEND_BORDER_SHOW)){Ag.borderWidth=parseInt(AY.call(this,V.LEGEND_BORDER_THICKNESS),10)+"px";Ag.borderStyle=Ah(AY.call(this,V.LEGEND_BORDER_LINE_STYLE));Ag.borderColor=J.decodeColor(AY.call(this,V.LEGEND_BORDER_COLOR));}Ao(Am,AY.call(this,V.BG_FILL_STYLE),AY.call(this,V.BG_COLOR));Am.opacity=AY.call(this,V.BG_FILL_TRANSPARENCY)/100;Ao(Aj,AY.call(this,V.ROW_HEADER_FILL_STYLE),AY.call(this,V.ROW_HEADER_FILL_COLOR));Aj.opacity=AY.call(this,V.ROW_HEADER_FILL_TRANSPARENCY)/100;Ao(Ad,AY.call(this,V.COLUMN_HEADER_FILL_STYLE),AY.call(this,V.COLUMN_HEADER_FILL_COLOR));Ad.opacity=AY.call(this,V.COLUMN_HEADER_FILL_TRANSPARENCY)/100;Ab.fontFamily=AY.call(this,V.ROW_HEADER_TEXT_FONT_FAMILY);Ab.fontSize=AY.call(this,V.ROW_HEADER_TEXT_FONT_SIZE);An(Ab,AY.call(this,V.ROW_HEADER_TEXT_FONT_STYLE));Ab.color=J.decodeColor(AY.call(this,V.ROW_HEADER_TEXT_FONT_COLOR));Ac.fontFamily=AY.call(this,V.COLUMN_HEADER_TEXT_FONT_FAMILY);Ac.fontSize=AY.call(this,V.COLUMN_HEADER_TEXT_FONT_SIZE);An(Ac,AY.call(this,V.COLUMN_HEADER_TEXT_FONT_STYLE));Ac.color=J.decodeColor(AY.call(this,V.COLUMN_HEADER_TEXT_FONT_COLOR));AZ.fontFamily=AY.call(this,V.ROW_VAVLUE_TEXT_FONT_FAMILY);AZ.fontSize=AY.call(this,V.ROW_VAVLUE_TEXT_FONT_SIZE);An(AZ,AY.call(this,V.ROW_VAVLUE_TEXT_FONT_STYLE));AZ.color=J.decodeColor(AY.call(this,V.ROW_VAVLUE_TEXT_FONT_COLOR));AV.fontFamily=AY.call(this,V.COLUMN_VAVLUE_TEXT_FONT_FAMILY);AV.fontSize=AY.call(this,V.COLUMN_VAVLUE_TEXT_FONT_SIZE);An(AV,AY.call(this,V.COLUMN_VAVLUE_TEXT_FONT_STYLE));AV.color=J.decodeColor(AY.call(this,V.COLUMN_VAVLUE_TEXT_FONT_COLOR));Ae.fontFamily=AY.call(this,V.Y_AXIS_LABELS_FONT_FAMILY);Ae.fontSize=AY.call(this,V.Y_AXIS_LABELS_FONT_SIZE);An(Ae,AY.call(this,V.Y_AXIS_LABELS_FONT_STYLE));Ae.color=J.decodeColor(AY.call(this,V.Y_AXIS_LABELS_FONT_COLOR));Af.fontFamily=AY.call(this,V.X_AXIS_LABELS_FONT_FAMILY);Af.fontSize=AY.call(this,V.X_AXIS_LABELS_FONT_SIZE);An(Af,AY.call(this,V.X_AXIS_LABELS_FONT_STYLE));Af.color=J.decodeColor(AY.call(this,V.X_AXIS_LABELS_FONT_COLOR));Ak.fontFamily=AY.call(this,V.Y_AXIS_TITLE_FONT_FAMILY);Ak.fontSize=AY.call(this,V.Y_AXIS_TITLE_FONT_SIZE);An(Ak,AY.call(this,V.Y_AXIS_TITLE_FONT_STYLE));Ak.color=J.decodeColor(AY.call(this,V.Y_AXIS_TITLE_FONT_COLOR));Al.fontFamily=AY.call(this,V.X_AXIS_TITLE_FONT_FAMILY);Al.fontSize=AY.call(this,V.X_AXIS_TITLE_FONT_SIZE);An(Al,AY.call(this,V.X_AXIS_TITLE_FONT_STYLE));Al.color=J.decodeColor(AY.call(this,V.X_AXIS_TITLE_FONT_COLOR));AW.borderWidth=parseInt(AY.call(this,V.X_AXIS_LINE_THICKNESS),10)+"px";AW.borderColor=J.decodeColor(AY.call(this,V.X_AXIS_LINE_COLOR));AW.borderTopStyle=Ah(AY.call(this,V.X_AXIS_LINE_STYLE));AU.borderWidth=parseInt(AY.call(this,V.Y_AXIS_LINE_THICKNESS),10)+"px";AU.borderColor=J.decodeColor(AY.call(this,V.Y_AXIS_LINE_COLOR));AU.borderLeftStyle=Ah(AY.call(this,V.Y_AXIS_LINE_STYLE));Ai.borderWidth=parseInt(AY.call(this,V.H_MATRIX_LINES_THICKNESS),10)+"px";Ai.borderColor=J.decodeColor(AY.call(this,V.H_MATRIX_LINES_COLOR));Ai.borderTopStyle=Ah(AY.call(this,V.H_MATRIX_LINES_STYLE));AX.borderWidth=parseInt(AY.call(this,V.V_MATRIX_LINES_THICKNESS),10)+"px";AX.borderColor=J.decodeColor(AY.call(this,V.V_MATRIX_LINES_COLOR));AX.borderLeftStyle=Ah(AY.call(this,V.V_MATRIX_LINES_STYLE));AS.borderWidth=parseInt(AY.call(this,V.MAJOR_GRID_LINES_THICKNESS),10)+"px";AS.borderColor=J.decodeColor(AY.call(this,V.MAJOR_GRID_LINES_COLOR));AS.borderTopStyle=Ah(AY.call(this,V.MAJOR_GRID_LINES_STYLE));AS.borderLeftStyle=AS.borderTopStyle;Aa.borderWidth=parseInt(AY.call(this,V.MINER_GRID_LINES_THICKNESS),10)+"px";Aa.borderColor=J.decodeColor(AY.call(this,V.MINER_GRID_LINES_COLOR));Aa.borderTopStyle=Ah(AY.call(this,V.MINER_GRID_LINES_STYLE));Aa.borderLeftStyle=Aa.borderTopStyle;AR.borderWidth=parseInt(AY.call(this,V.OUTSIDE_BORDER_THICKNESS),10)+"px";AR.borderColor=J.decodeColor(AY.call(this,V.OUTSIDE_BORDER_COLOR));AR.borderLeftStyle=Ah(AY.call(this,V.OUTSIDE_BORDER_STYLE));AR.borderTopStyle=Ah(AY.call(this,V.OUTSIDE_BORDER_STYLE));},readItemDefault:function(AW,AU){var AV,AS={CIRCLE:0.7,Bar:0.7,AREA:0.7,PIE:0.8,RING:0.8},AT={CIRCLE:2,Bar:1,AREA:2,PIE:1,RING:1},AR={1:AP.Stacked,2:AP.Automatic,0:AP.Automatic};switch(AW){case V.X_AXIS_TITLE_SHOW:case V.Y_AXIS_TITLE_SHOW:AV=AU.isMetric?true:false;break;case V.SHAPE_FILL_TRANSPARENCY:AV=AS[AU.shapeType];break;case V.SHAPE_BORDER_THICKNESS:AV=AT[AU.shapeType];break;case r.SUB_TYPE:AV=AR[AU.shapeType];break;}return AV;},consumeJsonFmt:function(AS){var AU,AT=[],AR=[];for(AU in AS){if(AS.hasOwnProperty(AU)){AT.push(AU);AS[AU]=a(AU,AS[AU],this.templateObjectMapping);AR.push(AS[AU]);}}this.xmlData=this.makeDefaultPropXML(AT,AR);this.jsonData=AS;},hSyncWithJson:function(AT,AS,AU){var AR=this.jsonData;if(AR){if(AU){delete AR[AT];}else{AR[AT]=AS;}}},hGetPropValue:function(AV){var AU,AS=this.jsonData,AT;if(AS){return AS[AV];}else{AU=AI.call(this);if(AU){var AR=AU.getElementsByTagName("fmt")[0],AW=AR.getElementsByTagName(AV)[0];if(AW){AT=AW.getAttribute("value");return a(AV,AT,this.templateObjectMapping);}}}return undefined;},hRemoveProp:function(AT){this.hSyncWithJson(AT,"",true);var AS=AI.call(this),AR=AS.getElementsByTagName("fmt")[0],AU=AR.getElementsByTagName(AT)[0];if(AU){AU.parentNode.removeChild(AU);this.xmlData=P(AS);this.xmlDirty=true;}return this.xmlData;},hSetPropValue:function(AU,AT){if(typeof AT==="undefined"){return this.hRemoveProp(AU);}if((typeof AT)!=="string"){AT=AT.toString();}this.hSyncWithJson(AU,AT);var AS=AI.call(this),AR=AS.getElementsByTagName("fmt")[0],AV=AR.getElementsByTagName(AU)[0];if(!AV){AV=AS.createElement(AU);AR.appendChild(AV);}AV.setAttribute("value",f(AU,AT,this.templateObjectMapping));this.xmlData=P(AS);this.xmlDirty=true;return this.xmlData;},hSetPropValues:function(AY,AX){var AV,AU,AR,AW,AS=AY.length,AZ=AI.call(this),AT=AZ.getElementsByTagName("fmt")[0];for(AV=0;AV<AS;AV++){AR=AY[AV];AW=AX[AV];this.hSyncWithJson(AR,AW);AU=AT.getElementsByTagName(AR)[0];if(!AU){AU=AZ.createElement(AR);AT.appendChild(AU);}AU.setAttribute("value",f(AR,AW,this.templateObjectMapping));}this.xmlData=P(AZ);this.xmlDirty=true;return this.xmlData;},clearCachedXMLDoc:function(){if(this.xmlDoc){delete this.xmlDoc;}},setTemplateObjectMapping:function(AR){this.templateObjectMapping=AR;},makeDefaultPropXML:function d(AX,AY){var AU,AT,AR=AX.length,AW=new window.DOMParser(),AV="<props><widgetProps><fmt></fmt></widgetProps></props>",AZ=AW.parseFromString(AV,"text/xml"),AS=AZ.getElementsByTagName("fmt")[0];for(AU=0;AU<AR;AU++){AT=AZ.createElement(AX[AU]);AT.setAttribute("value",f(AX[AU],AY[AU],this.templateObjectMapping));AS.appendChild(AT);}return P(AZ);}});mstrmojo.gm.GMProperty.getUnderlyingPropertyNameWithAll=function(AR){return(R[AR]||AR).split(":");};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility");var J=mstrmojo.hash,C=mstrmojo.VisUtility,K=mstrmojo.gm.GMUtility.sizeCalculator,R=mstrmojo.gm.EnumFitTo,L=mstrmojo.gm.EnumAxisType,S=mstrmojo.gm.EnumGraphType,Q=mstrmojo.gm.EnumXAxisLabelStatus,M=6,I=2,B=9,P=6,U=5,D=0.5,G=0.5,N=50,E=150;mstrmojo.gm.GMLayoutResult=null;mstrmojo.gm.GMLayoutConfig=null;function H(Z,X){var W,Y,V,a=Z.length;for(W=0;W<a;W++){Y=Z[W];V=X[W];if(Y!==undefined&&Y!==V){return true;}}return false;}function A(V){var X,Z,a=V.length,W=0,Y=0;for(X=0;X<a;X++){Z=V[X];if(Z){Y+=Z;W+=1;}}return(W===0)?40:Math.floor(Y/W+0.5);}function F(V,Z){var W,Y,a=V.length,X=0;for(W=0;W<a;W++){Y=V[W];if(Y){X+=Y;}else{X+=Z;}}return X;}function O(Z,Y,e,b){var X,V,d,W=Z.length,a=[],c;Y=Y||[];b=b||0;for(X=0;X<W;X++){d=Y[X];if(d){d-=2*b;}c=Z[X];if(c.bftp){V=E;}else{V=C.measureTextWidth(c.n||c,e,2*b,d);}a.push(V);}return a;}mstrmojo.gm.GMLayout=mstrmojo.provide("mstrmojo.gm.GMLayout",{fitTo:R.NONE,xAxisType:L.ATTRIBUTE,yAxisType:L.METRIC,chartType:S.BAR,sBarWidth:0,API:{owner:undefined,getXAxisHeight:undefined,getYAxisWidth:undefined,getX2AxisHeight:undefined,getY2AxisWidth:undefined,getRowHeight:undefined,getColWidth:undefined,calculateAllXAxisStyle:undefined,calculateOneXAxisStyle:undefined},nRows:1,nCols:1,widthCache:[],heightCache:[],nLabels:0,maxXAxisWidth:undefined,maxXAxisWidthStagger:undefined,minXLabelWidth:undefined,widthRatio:undefined,heightRatio:undefined,xInfo:undefined,yInfo:undefined,calculateLayout:function(o,j,g,n,d,s,b,e,W){var l=this.yInfo,X=this.xInfo,k=this.widthCache,h=this.heightCache,p=J.clone(k),c=J.clone(h),a=e.ctw!==1,V=e.cth!==1,Z=this.xAxisType===L.METRIC,Y=this.yAxisType===L.METRIC,q=Z&&Y,r={xAxisHeight:n,xAxis2Height:d,yAxisWidth:s,yAxis2Width:b};if(this.fitTo===R.NONE||this.fitTo===R.MANUAL){r.xScalable=X.items.length===0||Z;r.yScalable=l.items.length===0||Y;r.minChartHeight=J.walk("GENERAL_PROPS.ALL.minRowHeight",mstrApp.getThemeProps("OGM"))||0;}else{r.xScalable=true;r.yScalable=true;r.minChartWidth=q?60:20;r.minChartHeight=q?60:20;}if(!a){k.length=0;k.length=this.nCols;}if(!V){h.length=0;h.length=this.nRows;}var f=this.hLayout(o,j,g,r,e,W);f.widthCacheChanged=H(p,k);f.heightCacheChanged=H(c,h);return f;},hLayout:function(z,V,X,y,n,AK){var AH=0,e=this.yInfo.isMetric?"":this.yInfo.items.join(" "),AC=0,t=this.API,u=AK.styles,l=this.API.owner,f=0.2,W=Math.max((((V+z)*(1-f))-z),20),q=y.xScalable,AJ=y.yScalable,AG=y.xAxisHeight,c=y.xAxis2Height,d=y.yAxisWidth,p=y.yAxis2Width,g=AG!==undefined,s=c!==undefined,h=d!==undefined,j=p!==undefined,o=n.ctw,w=n.cth,a=d||20,AF=p||0,r=false,AI,AD,AA,AE,Y,Z,AB,b,x,k={};while(true){if(AH>=M){break;}if(e!==""&&AK.syat){AC=this.batchEvalTextHeight([e],[a],u,I);}AB=V;AB-=K.add(0,a,AK.va);AB-=K.add(0,AF,AK.va);if(q){this.hFakeWidthCache(AB+AK.v,y.minChartWidth);if(this.fitTo!==R.COMPACT){this.hProcessWidthCache();}}x=this.hCheckXLabelStatus(AB,n.ctw);t.owner.xLabelPlacement=x;l.layoutPaddingEchos={X1:[],X2:[],Y1:[],Y2:[]};AE=g?AG:(t.getXAxisHeight.call(l,x)*n.x);if(!AG){AE=(AE/X>D)?X*D:AE;}Y=s?c:Math.min(AK.rhMaxH,Math.max(AC,(t.getXAxis2Height.call(l)*n.x2)));Z=this.hCheckPageOverflowX(AB+AK.v,o);b=X;b-=K.add(0,AE,AK.ha);b-=K.add(0,Y,AK.dx?AK.ha:AK.h);if(AJ){this.hFakeHeightCache(b+AK.h,y.minChartHeight);if(this.fitTo!==R.COMPACT){this.hProcessHeightCache();}}AI=h?d:Math.min(W,(t.getYAxisWidth.call(l)*n.y));if(!d){AI=(AI/V>G)?V*G:AI;}AD=j?p:(t.getYAxis2Width.call(l)*n.y2);AA=this.hCheckPageOverflowY(b+AK.h,w);if(AI===a&&AD===AF&&AA===r){break;}a=AI;AF=AD;r=AA;AH++;}k.nRows=this.nRows;k.nCols=this.nCols;k.yAxisWidth=a;k.yAxis2Width=AF;k.xAxisHeight=AE;k.xAxis2Height=Y;k.needHSBar=Z;k.needVSBar=r;k.rotateLabelInXAxis=x;k.avgChartWidth=this.hGetChartAvgWidth(o);k.avgChartHeight=this.hGetChartAvgHeight(w);k.canvasWidth=this.hEstimateCanvasWidth(o,k.avgChartWidth);k.canvasHeight=this.hEstimateCanvasHeight(w,k.avgChartHeight);if(!Z){k.pageWidth=this.hGetPageWidth(o);}if(!r){k.pageHeight=this.hGetPageHeight(w);}return k;},hCheckXLabelStatus:function(Y,W){var X=this.fitTo,V=Q.NORMAL;if(X===R.NONE){V=this.hCheckXLabelStatus4FitContent(Y/this.nCols,W);}else{V=this.hCheckXLabelStatus4FitPanel((Y-2*U)/this.nLabels);}return V;},hCheckXLabelStatus4FitPanel:function(Z){var X=false;if(X){var V=this.minXLabelWidth;if(V>2*Z){return Q.ROTATE;}if(V>Z){return Q.STAGGER;}return Q.NORMAL;}else{var Y=this.API.owner,W=this.API.calculateAllXAxisStyle;return W.call(Y);}},hCheckXLabelStatus4FitContent:function(Z,Y){var W,a,V=this.widthCache,X=(Y!==1);if(X){Z=65535;a=V.length;for(W=0;W<a;W++){if(V[W]){Z=Math.min(Z,V[W]*Y);}}}if(Z>=this.maxXAxisWidth){return Q.NORMAL;}if(Z>=this.maxXAxisWidthStagger){return Q.STAGGER;}return Q.ROTATE;},hProcessWidthCache:function(){var X,Y=this.nCols,V=this.widthCache,W=this.minWidths;if(W){for(X=0;X<Y;X++){if(W[X]){V[X]=Math.max(V[X],W[X]);}}}},hProcessHeightCache:function(){var X,Y=this.nRows,V=this.heightCache,W=this.minHeights;if(W){for(X=0;X<Y;X++){if(W[X]){V[X]=Math.max(V[X],W[X]);}}}},hFakeWidthCache:function(V,Y){var X=this.widthRatio;if(!X){this.hFakeSizeCacheEvenly(V,Y,this.nCols,this.widthCache);return ;}var W=F(X,1);this.hFakeSizeCacheEvenly(V,Y,this.nCols,this.widthCache,this.widthRatio,W);},hFakeSizeCacheEvenly:function(b,W,Y,c,a,d){var Z,V=0,X=b/Y;c.length=0;for(Z=0;Z<Y;Z++){if(a){X=b*(a[Z]/d);c[Z]=Math.round(V+X+5e-14)-Math.round(V);}else{c[Z]=Math.round(V+X+5e-14)-Math.round(V);}V+=X;}if(W){for(Z=0;Z<Y;Z++){c[Z]=Math.max(c[Z],W);}}},hFakeHeightCache:function(W,Y){var V=this.heightRatio;if(!V){this.hFakeSizeCacheEvenly(W,Y,this.nRows,this.heightCache);return ;}var X=F(V,1);this.hFakeSizeCacheEvenly(W,Y,this.nRows,this.heightCache,this.heightRatio,X);},hGetChartAvgWidth:function(V){return Math.floor(A(this.widthCache)*(V||1));},hGetChartAvgHeight:function(V){return Math.floor(A(this.heightCache)*(V||1));},hEstimateCanvasWidth:function(W,V){return Math.floor(F(this.widthCache,V)*(W||1));},hEstimateCanvasHeight:function(W,V){return Math.floor(F(this.heightCache,V)*(W||1));},hGetPageWidth:function(Y){var W,Z=this.nCols,X=this.API.getColWidth,V=0;Y=Y||1;for(W=0;W<Z;W++){V+=Math.floor(X(0,W)*Y);}return V;},hGetPageHeight:function(Y){var W,Z=this.nRows,X=this.API.getRowHeight,V=0;Y=Y||1;for(W=0;W<Z;W++){V+=Math.floor(X(W,0)*Y);}return V;},hCheckPageOverflowX:function(X,Z){var W,a=this.nCols,Y=this.API.getColWidth,V=0;Z=Z||1;X=Math.ceil(X);for(W=0;W<a;W++){V+=Math.floor(Y(0,W)*Z);if(V>X){return true;}}return false;},hCheckPageOverflowY:function(V,Z){var X,a=this.nRows,Y=this.API.getRowHeight,W=0;Z=Z||1;V=Math.ceil(V);for(X=0;X<a;X++){W+=Math.floor(Y(X,0)*Z);if(W>V){return true;}}return false;},evalTextHeight:function(V,Y,X,Z){if(Z===undefined){Z=I;}var W=this.batchEvalTextHeight([V],[Y],X,Z);return W[0];},batchEvalTextHeight:function(a,V,g,c,Z){var Y,f,e,W=a.length,b=[],d;Z=Z===undefined?1:Z;V=V||[];c=c||0;for(Y=0;Y<W;Y++){e=V[Y];if(e){e-=2*c;}d=a[Y];if(d.bftp){f=E;}else{var X=C.measureTextHeight(d.n||d,g,0,100,undefined,true,true);f=C.measureTextHeight(d.n||d,g,2*c,e);f=Math.min(f,X*Z+2*c);}b.push(f);}return b;},getRowHeadersWidth:function(Y,X){var V,b,Z,a=Y.length,W=[];for(V=0;V<a;V++){b=Y[V];Z=O(b,[],X,B);W.push(Math.max(N,Math.max.apply(null,Z)));}return W;},getColHeadersHeight:function(V,Z){var W,b,X,a=V.length,Y=[];for(W=0;W<a;W++){b=V[W];X=this.batchEvalTextHeight(b,[],Z,P);Y.push(Math.max.apply(null,X));}return Y;},getRowHeaderP1Width:function(W,a,j,b,k,Y,V){var e,l=V.isMetricNamesOnYAxis,d=V.isMetricNamesOnRows,Z=V.hasHeaderInY,c=V.haveY2,X=V.getChartInfo().isPie,h=V.dz,f=h.AngleBy.TemplateMetric&&h.AngleBy.TemplateMetric.length>1,g=h.XAxis.TemplateMetric&&h.XAxis.TemplateMetric.length===1;if(W===0&&a>0&&V.haveY1===false&&Y&&(!l||(X&&f&&g))&&!(d&&(Z&&!c))){e=O(j.items,b,k,I);return Math.max.apply(null,e);}return 0;},getColHeaderP1Height:function(Z,V,X,e,b,Y){var c=[],a=[],d=[];if(b.hasAndShowRT){c=this.batchEvalTextHeight(Z.items,V,e.RH_TITLE,P,Y);}if(b.hasAndShowYAAT){a=this.batchEvalTextHeight(X.items,[],e.AXIS_TITLE_Y,P);}if(b.hasAndShowFA){d=this.batchEvalTextHeight(X.items,[],e.CH,P);}var W=c.concat(a).concat(d);return Math.max.apply(null,W);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.num","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.VisTooltip","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.models.DropZonesModel","mstrmojo.gm.DndReplaceNode","mstrmojo.gm.DndTooltip","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui._CanDropFromSchema","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.color");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig","ToolbarEditorConfig");mstrmojo.requiresClsP("mstrmojo.ui.editors.controls","LineConfigGroup","FillConfigGroup","ColorPickerButton","MarkerColorPickerButton","CharacterGroup");var W=mstrmojo,Ci=W.VisUtility,P=mstrmojo.ui.editors.controls.AdvancedColorPicker,BC=W.vi,Cd=W.string,BR=W.dom,D=W.num,CZ=W.array,B3=W.css,Av=W.hash,AF=W.color,k=mstrmojo.expr.DTP,Bo=W.gm.EnumShape,Cf=W.gm.EnumGraphType,Ab=W.VisEnum.ControlType,A4=BC.ui.rw.SelectionType,Cv=BC.ui.DatasetUnitMenuUtils,By=W.gm,p=By.GMUtility,Ac=By.WidgetPropertyTag,C6=By.FormatingPropertyTag,AG=W.models.FormatModel,Ax=AG.ENUM_PROPERTY_NAMES,y=mstrmojo.chart.enums.EnumFontStyle,Ae=By.EnumABLDirection,C1=BC.models.EnumDragSources,Ct=BC.models.DropZonesModel.ENUM_TARGET_POSITION,Cn=W.vi.viz.EnumDSSDropZones,AC=By.EnumIdentityType,z=mstrmojo.vi.enums.EnumFeatures,BU=Ct.ABOVE,r=Ct.ON,C=Ct.BELOW,Ar=3,A6=-20,BV=14,BJ=7,q=6,BQ=8,d=0,B6=1,C0=2,C2=BR.isIOSTouch?"touchstart":"mousedown",AW="default",Cm="hdtl",s={NORMAL:"normal",HOVER:"hover",SELECTED:"selected",RMSelected:"RMSelected",MultiSelected:"MultiSelected",SH:"sh"},C3={INVALID:-1,NORMAL2HOVER:0,NORMAL2SELECTED:1,HOVER2NORMAL:2,HOVER2SELECTED:3,SELECTED2NORMAL:4,SELECTED2HOVER:5,SH2SELECTED:6,SELECTED2SH:7,SH2NORMAL:8,NORMAL2RMSELECTED:9,HOVER2RMSELECTED:10,RMSELECTED2MULTISELECTED:11,SELECTED2MULTISELECTED:12,SH2RMSELECTED:13,RMSELECTED2NORMAL:14,MULTISELECTED2NORMAL:15,MULTISELECTED2SELECTED:16,RMSELECTED2HOVER:17,MULTISELECTED2HOVER:18,HOVER2MULTISELECTED:19,RMSELECTED2SELECTED:20},V={"normal-hover":C3.NORMAL2HOVER,"normal-selected":C3.NORMAL2SELECTED,"hover-normal":C3.HOVER2NORMAL,"hover-selected":C3.HOVER2SELECTED,"selected-normal":C3.SELECTED2NORMAL,"selected-hover":C3.SELECTED2HOVER,"sh-selected":C3.SH2SELECTED,"selected-sh":C3.SELECTED2SH,"sh-normal":C3.SH2NORMAL,"normal-RMSelected":C3.NORMAL2RMSELECTED,"hover-RMSelected":C3.HOVER2RMSELECTED,"hover-MultiSelected":C3.HOVER2MULTISELECTED,"RMSelected-MultiSelected":C3.RMSELECTED2MULTISELECTED,"selected-MultiSelected":C3.SELECTED2MULTISELECTED,"sh-RMSelected":C3.SH2RMSELECTED,"RMSelected-normal":C3.RMSELECTED2NORMAL,"MultiSelected-normal":C3.MULTISELECTED2NORMAL,"MultiSelected-selected":C3.MULTISELECTED2SELECTED,"RMSelected-hover":C3.RMSELECTED2HOVER,"MultiSelected-hover":C3.MULTISELECTED2HOVER,"RMSelected-selected":C3.RMSELECTED2SELECTED},BH={BAR:"bar",SBAR:"sbar",GBAR:"gbar",CIRCLE:"circle",SCIRCLE:"scircle",TICKER:"ticker",SQUARE:"square",PIE:"pie",RING:"ring",POLYGON:"polygon",LINE:"polyline"},B1={GLOBAL:"glb",FORMATTING:"fmt"},Y={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"},Bj={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2},Az,BP=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];var BG={};BG[AC.H_MATRIX_LINE]=[Ab.GM_H_MATRIX_LINE,Ab.GM_H_CHART_LINE];BG[AC.V_MATRIX_LINE]=[Ab.GM_V_MATRIX_LINE,Ab.GM_V_CHART_LINE];BG[AC.GRID_LINE]=[Ab.GM_H_GRID_LINE,Ab.GM_V_GRID_LINE];BG[AC.MINOR_GRID_LINE]=[Ab.GM_H_MINOR_GRID_LINE,Ab.GM_V_MINOR_GRID_LINE];BG[AC.ROW_TITLE]=[Ab.GM_ROW_HEADER_TITLE];BG[AC.ROW_HEADER]=[Ab.GM_ROW_HEADER,Ab.GM_ROW_HEADER_EXTRA];BG[AC.COL_TITLE]=[Ab.GM_COL_HEADER_TITLE];BG[AC.COL_HEADER]=[Ab.GM_COL_HEADER,Ab.GM_COL_HEADER_EXTRA];BG[AC.ROWS_BACKGROUND]=[];BG[AC.COLS_BACKGROUND]=[];BG[AC.X_AXIS]=[Ab.GM_XAXIS_LINE];BG[AC.Y_AXIS]=[Ab.GM_YAXIS_LINE];BG[AC.X2_AXIS]=[Ab.GM_XAXIS2_LINE];BG[AC.Y2_AXIS]=[Ab.GM_YAXIS2_LINE];BG[AC.X_METRIC_AXIS_TITLE]=[Ab.GM_XLABEL];BG[AC.Y_METRIC_AXIS_TITLE]=[Ab.GM_YLABEL];BG[AC.X_NUMERIC]=[Ab.GM_X_NUMERIC];BG[AC.X_CATEGORY]=[Ab.GM_X_CATEGORY];BG[AC.Y_NUMERIC]=[Ab.GM_Y_NUMERIC];BG[AC.Y_CATEGORY]=[Ab.GM_Y_CATEGORY];BG[AC.X_AXIS_ORIGIN_LABEL]=[Ab.GM_ORIGIN_LABEL_V];BG[AC.Y_AXIS_ORIGIN_LABEL]=[Ab.GM_ORIGIN_LABEL_H];BG[AC.AXIS_ORIGIN]=[Ab.GM_ORIGIN_LINE];var BX={NONE:0,ROW_VALUE:1,ROW_HEADER:2,COL_VALUE:4,COL_HEADER:8};var B=Math.PI,Ad=B/180*1,Q=Ad*0.0001,Ce=10;function F(C7){var C8=C7.parentNode;while(C8){if(C8.tagName==="svg"){return C8;}C8=C8.parentNode;}return undefined;}function AV(DB){var C9,DA=DB.getAttribute("type"),C7,C8,DD,DC=false;if(DA===null||DA===Ab.GM_TEXT_BODY){DB=DB.parentNode;DA=DB.getAttribute("type");}if(DA===Ab.GM_DATA_LABEL||DA===Ab.GM_ORIGIN_LABEL){DB.identity=DB.parentNode.identity;}if(DA===Ab.LINE_CONTAINER){DB=DB.firstChild;DA=DB.getAttribute("type");}if(DA===Ab.GM_AXIS_TEXT||DA===Ab.GM_AXIS_WORD){DB=F(DB);DA=DB.getAttribute("type");}switch(DA){case Ab.GM_H_MATRIX_LINE:case Ab.GM_V_MATRIX_LINE:case Ab.GM_H_CHART_LINE:case Ab.GM_V_CHART_LINE:case Ab.GM_YAXIS_LINE:case Ab.GM_XAXIS_LINE:case Ab.GM_YAXIS2_LINE:case Ab.GM_XAXIS2_LINE:case Ab.GM_H_GRID_LINE:case Ab.GM_V_GRID_LINE:case Ab.GM_H_MINOR_GRID_LINE:case Ab.GM_V_MINOR_GRID_LINE:case Ab.GM_ROW_HEADER:case Ab.GM_COL_HEADER:case Ab.GM_COL_HEADER_EXTRA:case Ab.GM_ROW_HEADER_EXTRA:case Ab.GM_ROW_HEADER_TITLE:case Ab.GM_COL_HEADER_TITLE:case Ab.GM_Y_NUMERIC:case Ab.GM_X_NUMERIC:case Ab.GM_ORIGIN_LINE:case Ab.GM_ORIGIN_LABEL_H:case Ab.GM_ORIGIN_LABEL_V:case Ab.GM_DUMMY_A:case Ab.GM_DATA_LABEL:case Ab.GM_YLABEL:case Ab.GM_XLABEL:C9=DB;break;case Ab.GM_TREND_LINE:case Ab.GM_REF_LINE:C7=DB.getAttribute("hover-catcher");if(C7!==undefined&&C7!==null&&C7==="1"){C8=DB.previousElementSibling;if(C8!==null){DD=C8.getAttribute("hover-catcher");if(DD!==undefined&&DD!==null&&DD==="0"&&C8.identity===DB.identity){DC=true;}}}if(DC){C9=C8;}else{C9=DB;}break;case Ab.GM_SHAPE:case Ab.GM_SET_SHAPE:case Ab.LASSO_SELECTOR:case Ab.GM_SVG_CHART:C9=DB;break;case Ab.GM_MARKER:C9=DB.source;break;case Ab.GM_SVG_Y_NUMERIC:case Ab.GM_SVG_X_NUMERIC:case Ab.GM_SVG_X_CATEGORY:case Ab.GM_SVG_Y_CATEGORY:C9=DB.parentNode.parentNode;break;default:break;}return C9;}function BL(DD){function C7(){var DF=[];CZ.forEach(DD||[],function(DI){var DG=AV(DI);var DH=DG.getAttribute("type");if(DH){DF.push(DH);}});return DF;}var DC=C7(),DB=0;var DE=DC.indexOf(Ab.GM_ROW_HEADER)>-1||DC.indexOf(Ab.GM_ROW_HEADER_EXTRA)>-1||DC.indexOf(Ab.GM_ROW_HEADER_TEXT)>-1;var C8=DC.indexOf(Ab.GM_ROW_HEADER_TITLE)>-1||DC.indexOf(Ab.GM_ROW_HEADER_TITLE_TEXT)>-1;var DA=DC.indexOf(Ab.GM_COL_HEADER)>-1||DC.indexOf(Ab.GM_COL_HEADER_EXTRA)>-1||DC.indexOf(Ab.GM_COL_HEADER_TEXT)>-1;var C9=DC.indexOf(Ab.GM_COL_HEADER_TITLE)>-1||DC.indexOf(Ab.GM_COL_HEADER_TITLE_TEXT)>-1;if(DE){DB=DB|BX.ROW_VALUE;}if(C8){DB=DB|BX.ROW_HEADER;}if(DA){DB=DB|BX.COL_VALUE;}if(C9){DB=DB|BX.COL_HEADER;}return DB;}function Aq(DH){var DL=this.widget,DR=DL.GMController,DP=DR.model,DB=DP.ldss&&DP.ldss[0],DN,DJ=DR.getChartInfo(),DS=this,DC=[],DI=[],DM=DR.getMetricsOnXAxis(),DK=DR.getMetricsOnYAxis(),DA=DL.readGlobalProperty(Ac.METRIC_SHAPES);var DE=false,DO=mstrmojo.gm.EnumSubtype,DG=DR.chartSubType,C9=DJ.shape;if(DJ.isABL&&DG===DO.PERCENT){DE=true;}if(DJ.isBubbleOrScatter){DC=p.filterInValidMetricIndex(DK);}else{if(DJ.isABL){if(DJ.dirc===By.EnumABLDirection.HORIZONTAL){DC=p.filterInValidMetricIndex(DM);}else{DC=p.filterInValidMetricIndex(DK);}if(DB){DN=DB.srsCnt;if(DN===undefined||DN===null){DN=DB.getSeriesCount();}}if(DG===DO.STACKED){if(DR.getBreakByAttrsID().length>0){DE=true;}if(DC&&DC.length>1&&!DR.splitPlottingMetrics){DE=true;}}else{if(DG===DO.CLUSTERED){if(DJ.isCombo){DI=DP.getMetricIDsFromIndex(DC);CZ.forEach(DI,function(DU){var DT=DA.jsonObj[DU];if(DT===Bo.BAR){DE=true;}});}else{if(C9===Bo.BAR){if(DR.getBreakByAttrsID().length>0){DE=true;}}else{if(DR.getBreakByAttrsID().length>0){DE=true;}if(DC&&DC.length>1&&!DR.splitPlottingMetrics){DE=true;}}}}else{if(DJ.isCombo){DI=DP.getMetricIDsFromIndex(DC);if(DR.getBreakByAttrsID().length>0){CZ.forEach(DI,function(DU){var DT=DA.jsonObj[DU];if(DT===Bo.BAR){DE=true;}});}}}}}}DE=DE||!p.isTrendLineAvailableForAnyMetric(DL);if(!DE&&DC&&DC.length>0){var DD=[],C8,DQ,C7=[],DF=[];CZ.forEach(DC,function(DT){C8=p.getOptionObjArr.call(DR,[DT]);DD.push(C8);DQ=DL.readGlobalProperty(Ac.TREND_LINE_DEF,C8);if(!DQ.jsonObj.trdEnabled){DQ.setProperty("trdEnabled",true);DL.getEnableTrendLineActions(DQ.jsonObj,C7,C8.key);}else{DQ.setProperty("trdEnabled",false);DL.getEnableTrendLineActions(DQ.jsonObj,DF,C8.key);}});DH.addToggleMenuItem(mstrmojo.desc(12160,"Enable trendline"),"xt",function(){if(C7.length>0){CZ.forEach(C7,function(DT){DL.checkCustomScaleNotificationForTrendLine(DT.metricId);});DL.submitUpdatesAndPersistXML(C7,DL.getXTabRefreshCallBack(),undefined,false,false);}},function(){if(DF.length>0){DL.submitUpdatesAndPersistXML(DF,DL.getXTabRefreshCallBack(),undefined,false,false);}},DS.id,C7.length===0);if(C7.length===0&&!(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())){DH.addMenuItem(mstrmojo.desc(12163,"Edit trendline..."),"xt",p.getEditTrendLineHandler(DL,DD[0].key));}}}function CU(C8){var C7="#34ABEB";C8.style.stroke=C7;return ;}function CK(C7){var C8=C7.identity.lineModel.getLineColor();C7.style.stroke=AF.decodeColor(C8)||"#000000";return ;}function AA(C7){return C7===Ab.GM_TREND_LINE;}function Bm(C7){return C7===Ab.GM_REF_LINE;}function Bf(DR){var C7=6,DK=6,DD=2,DQ=C7/2,DB=DK/2,DH=1,DF=1,DO=Number.MAX_VALUE,DN=Number.MAX_VALUE;var DI=function(DV){var DT=[];var DU=DV.getAttribute("highlightPoints"),DW=DU?DU.split(";"):[];CZ.forEach(DW||[],function(Da){var DY=Da.indexOf(":");if(DY>-1){var DX=Da.substring(DY+1);var DZ=DX.split(",");CZ.forEach(DZ||[],function(Dc,Db){DZ[Db]=parseFloat(Dc,10);});DT.push(DZ);}});return DT;};var C9=function(DV){var DT=[];var DU=DV.getAttribute("points");DU=DU.substring(0,DU.length-1);var DW=DU.split(" ");CZ.forEach(DW||[],function(DX,DY){var DZ=DX.split(",");CZ.forEach(DZ||[],function(Db,Da){DZ[Da]=parseFloat(Db,10);});if(DY===0){DT[DY]=DZ;}else{if(DY===1){DT[DY+1]=DZ;}}});if(DT[0]&&DT[2]){DT[1]=[(DT[0][0]+DT[2][0])/2,(DT[0][1]+DT[2][1])/2];}return DT;};var DP=function(DU){var DT=true;CZ.forEach(DU||[],function(DV){if(!DV||DV.length!==2){DT=false;return false;}});if(DT){if(!DU||DU.length!==3){DT=false;}}return DT;};var DG=function(DX,DV,DW,DU,DT){if(DT){return Math.min(Math.max(DX-DV,DW),DU);}else{return DX-DV;}};var DL=DR.getAttribute("type"),DA;if(AA(DL)&&DR.hasAttribute("highlightPoints")){DA=DI(DR);}else{if(Bm(DL)||!DR.hasAttribute("highlightPoints")){DA=C9(DR);}else{DA=DI(DR);}}if(!DP(DA)){return ;}var DE=DR.parentNode&&DR.parentNode.parentNode;if(DE){var DM=DE.clientWidth,C8=DE.clientHeight;DO=DM-(DD+C7);DN=C8-(DD+DK);}var DS=document.createElementNS("http://www.w3.org/2000/svg","rect"),DC=document.createElementNS("http://www.w3.org/2000/svg","rect");DS.setAttribute("type",Ab.GM_TREND_LINE_SELECT);DS.setAttribute("class","gm-trendline-select");DS.setAttribute("x",DG(DA[0][0],DQ,DH,DO,Bm(DL)));DS.setAttribute("y",DG(DA[0][1],DB,DF,DN,Bm(DL)));DS.setAttribute("width",C7.toString());DS.setAttribute("height",DK.toString());DC.setAttribute("type",Ab.GM_TREND_LINE_SELECT);DC.setAttribute("class","gm-trendline-select");DC.setAttribute("x",DG(DA[2][0],DQ,DH,DO,Bm(DL)));DC.setAttribute("y",DG(DA[2][1],DB,DF,DN,Bm(DL)));DC.setAttribute("width",C7.toString());DC.setAttribute("height",DK.toString());DR.parentNode.appendChild(DS);DR.parentNode.appendChild(DC);var DJ=document.createElementNS("http://www.w3.org/2000/svg","rect");DJ.setAttribute("type",Ab.GM_TREND_LINE_SELECT);DJ.setAttribute("class","gm-trendline-select");if(AA(DL)){DJ.setAttribute("x",DG(DA[1][0],DQ,DH,DO));DJ.setAttribute("y",DG(DA[1][1],DB,DF,DN));}else{if(Bm(DL)){DJ.setAttribute("x",DG(DA[1][0],DQ,DH,DO));DJ.setAttribute("y",DG(DA[1][1],DB,DF,DN));}}DJ.setAttribute("width",C7.toString());DJ.setAttribute("height",DK.toString());DR.parentNode.appendChild(DJ);}function Cy(DD){var DA=0,C7=0,DI=[],DB;if(DD.tagName==="circle"){DI.push(parseInt(DD.getAttribute("cx"),10));DI.push(parseInt(DD.getAttribute("cy"),10));}else{if(DD.tagName==="rect"){var DG=parseFloat(DD.getAttribute("x")),DF=parseFloat(DD.getAttribute("y")),DH=parseFloat(DD.getAttribute("width")),DC=parseFloat(DD.getAttribute("height"));DI.push(DG+DH/2);DI.push(DF+DC/2);}else{if(DD.tagName==="polygon"){var C9=DD.getAttribute("points");C9=C9.substring(0,C9.length-1);C9=C9.replace(/,/g," ");var C8=C9.split(" "),DE=C8.length;for(DB=0;DB<DE;DB++){if(DB%2===0){DA+=parseInt(C8[DB],10);}else{C7+=parseInt(C8[DB],10);}}DI.push(DA/DE*2);DI.push(C7/DE*2);}}}return DI;}function AS(C8){if(C8.constructor!==Array){C8=[C8];}var C7=[];CZ.forEach(C8||[],function(C9){var DA=Av.copy(C9);C7.push(DA);});CZ.forEach(C7||[],function(C9){if(C9.objType===AC.Y2_AXIS){C9.objType=AC.Y_AXIS;}else{if(C9.objType===AC.X2_AXIS){C9.objType=AC.X_AXIS;}else{if(C9.objType===AC.X_AXIS_ORIGIN_LINE||C9.objType===AC.Y_AXIS_ORIGIN_LINE){C9.objType=AC.AXIS_ORIGIN;}else{if(C9.objType===AC.X_AXIS_ORIGIN_LABEL){C9.objType=AC.X_NUMERIC;}else{if(C9.objType===AC.X_ATTRIBUTE_AXIS_TITLE){C9.objType=AC.X_METRIC_AXIS_TITLE;}else{if(C9.objType===AC.Y_AXIS_ORIGIN_LABEL){C9.objType=AC.Y_NUMERIC;}else{if(C9.objType===AC.Y_ATTRIBUTE_AXIS_TITLE){C9.objType=AC.Y_METRIC_AXIS_TITLE;}else{if(C9.objType===AC.ROW_HEADER_TEXT){C9.objType=AC.ROW_HEADER;}else{if(C9.objType===AC.ROW_TITLE_TEXT){C9.objType=AC.ROW_TITLE;}else{if(C9.objType===AC.COL_HEADER_TEXT){C9.objType=AC.COL_HEADER;}else{if(C9.objType===AC.COL_TITLE_TEXT){C9.objType=AC.COL_TITLE;}}}}}}}}}}}});return C7;}function CM(C7){if(C7.constructor!==Array){C7=[C7];}var C8=[];CZ.forEach(C7||[],function(C9){if(C9===AC.X_CATEGORY){C8.push(AC.X_CATEGORY);C8.push(AC.X_NUMERIC);C8.push(AC.X_AXIS_ORIGIN_LABEL);}else{if(C9===AC.Y_CATEGORY){C8.push(AC.Y_CATEGORY);C8.push(AC.Y_NUMERIC);C8.push(AC.Y_AXIS_ORIGIN_LABEL);}else{if(C9===AC.Y_AXIS){C8.push(AC.Y_AXIS);C8.push(AC.Y2_AXIS);}else{if(C9===AC.X_AXIS){C8.push(AC.X_AXIS);C8.push(AC.X2_AXIS);}else{if(C9===AC.Y_METRIC_AXIS_TITLE){C8.push(AC.Y_METRIC_AXIS_TITLE);C8.push(AC.Y_ATTRIBUTE_AXIS_TITLE);}else{if(C9===AC.X_METRIC_AXIS_TITLE){C8.push(AC.X_METRIC_AXIS_TITLE);C8.push(AC.X_ATTRIBUTE_AXIS_TITLE);}else{C8.push(C9);}}}}}}});return C8;}function CG(C9,DB,DA,C7){C7=!!C7;var DC=[];if(DA.constructor!==Array){DA=[DA];}var DD=function(DE){if(C7){return DE.identity&&DE.identity.tlOpt&&DE.identity.tlOpt[DB];}else{return DE.getAttribute(DB);}};function C8(DG){var DE=DD(DG),DF;if(DG.hasChildNodes()){DF=DG.firstChild;while(DF){if(DF.nodeType===1){DE=DD(DF);if(DA.indexOf(DE)!==-1){DC.push(DF);}else{C8(DF);}}DF=DF.nextSibling;}}}C8(C9);return DC;}function AB(C8){var C7=CG(C8.parentNode,"type",Ab.GM_TREND_LINE_SELECT);CZ.forEach(C7||[],function(C9){if(C9.parentNode===C8.parentNode){C8.parentNode.removeChild(C9);}});}function Bi(C9,C8){C8=C8||[];var C7=false;CZ.forEach(C9||[],function(DA){if(C8.indexOf(DA)!==-1){C7=true;}});return C7;}function B4(C7,DA){var C9,C8=C7.dropZones;CZ.forEach(C8,function(DB){CZ.forEach(DB.items,function(DC){if(C9===undefined&&DC.did===DA){C9=DC;}});});return C9;}function n(C7){if(C7.zonesModel&&C7.zonesModel.gmZones){return C7.zonesModel.gmZones;}return C7.zonesModel;}function U(C7){var C8,DA,C9={},DB=C7.getSelectedObjectInfo(false),DC=DB.length;for(C8=0;C8<DC;C8++){DA=DB[C8];if(DA.tid!==-1){if(C9[DA.tid]===undefined){C9[DA.tid]=[{id:DA.eid,n:DA.v,axis:DA.axis,o:DA.o,ui:DA.ui}];}else{C9[DA.tid][0].n+=(":"+DA.v);}}}return C9;}function w(DC,DB){if(!DC){return ;}if(DB.constructor!==Array){DB=[DB];}var C8=DC.getAttribute("class")||"",DE=" "+C8+" ",C9=false,C7=DB.length,DA;for(DA=0;DA<C7;DA++){var DD=DB[DA];if(!DE.match(new RegExp("\\s"+DD+"\\s"))){C8+=" "+DD;C9=true;}}if(C9){DC.setAttribute("class",Cd.trim(C8));}}function Bh(DB,DA){if(!DB){return ;}if(DA.constructor!==Array){DA=[DA];}var C8=" "+(DB.getAttribute("class")||"")+" ",C7=DA.length,C9;for(C9=0;C9<C7;C9++){C8=C8.replace(new RegExp("\\s"+DA[C9]+"\\s","g")," ");}DB.setAttribute("class",Cd.trim(C8));}function B8(C7,C8){var C9=V[C7+"-"+C8];if(C9===undefined){return C3.INVALID;}return C9;}function Au(C7,C8){switch(C8){case C3.NORMAL2HOVER:w(C7,"hover");break;case C3.NORMAL2SELECTED:w(C7,"selected");break;case C3.NORMAL2RMSELECTED:w(C7,"RMSelected");break;case C3.HOVER2NORMAL:Bh(C7,"hover");break;case C3.HOVER2SELECTED:Bh(C7,"hover");w(C7,"selected");break;case C3.HOVER2RMSELECTED:Bh(C7,"hover");w(C7,"RMSelected");break;case C3.HOVER2MULTISELECTED:Bh(C7,"hover");w(C7,"MultiSelected");break;case C3.SELECTED2NORMAL:Bh(C7,"selected");break;case C3.SELECTED2HOVER:Bh(C7,"selected");w(C7,"hover");break;case C3.RMSELECTED2HOVER:Bh(C7,"RMSelected");w(C7,"hover");break;case C3.MULTISELECTED2HOVER:Bh(C7,"MultiSelected");w(C7,"hover");break;case C3.RMSELECTED2MULTISELECTED:Bh(C7,"RMSelected");w(C7,"MultiSelected");break;case C3.RMSELECTED2NORMAL:Bh(C7,"RMSelected");break;case C3.SELECTED2MULTISELECTED:Bh(C7,"selected");w(C7,"MultiSelected");break;case C3.MULTISELECTED2SELECTED:Bh(C7,"MultiSelected");w(C7,"selected");break;case C3.RMSELECTED2SELECTED:Bh(C7,"RMSelected");w(C7,"selected");break;case C3.MULTISELECTED2NORMAL:Bh(C7,"MultiSelected");break;case C3.SH2SELECTED:Bh(C7,"sh");w(C7,"selected");break;case C3.SH2RMSELECTED:Bh(C7,"sh");w(C7,"RMSelected");break;case C3.SELECTED2SH:Bh(C7,"selected");w(C7,"sh");break;case C3.SH2NORMAL:Bh(C7,"sh");break;default:break;}}function A7(C7,DC,DA,DB){var C9=C7+DA*Math.cos(DB),C8=DC+DA*Math.sin(DB);return{x:C9,y:C8};}function AH(C7,C8){return"M "+C7+" "+C8;}function Cs(C7,C8){return"L "+C7+" "+C8;}function Bl(C9,C8,DB,C7,DA){return"A "+C9+","+C9+" 0 "+(C8?"1":"0")+","+(DB?"1 ":"0 ")+C7+","+DA;}function BK(){return"Z";}function BO(C7,C8){return"m "+C7+" "+C8;}function Cx(C9,C8,DB,C7,DA){return"a "+C9+","+C9+" 0 "+(C8?"1":"0")+","+(DB?"1 ":"0 ")+C7+","+DA;}function BY(){var C7=[].slice.call(arguments);return C7.some(function(C8){return typeof C8==="undefined";});}function Bk(DD,DA){var DF=DD.sX,DB=DD.sY,DG=DD.sOutR,DE=DD.sInR,DC="";if(BY(DF,DB,DG,DE)){return DC;}DG-=DA;DE+=DA;var C9=A7(DF,DB,DG,B),DH=A7(DF,DB,DG,0),C7=A7(DF,DB,DE,B),C8=A7(DF,DB,DE,0);DC=AH(C9.x,C9.y);DC+=(" "+Bl(DG,true,true,DH.x,DH.y));DC+=(" "+AH(C8.x,C8.y));DC+=(" "+Bl(DE,true,false,C7.x,C7.y));DC+=(" "+Bl(DE,true,false,C8.x,C8.y));DC+=(" "+AH(DH.x,DH.y));DC+=(" "+Bl(DG,true,true,C9.x,C9.y));return DC;}function AJ(DG,DA){var DH=DG.sX,DE=DG.sY,DD=(!DG.sR&&DG.sInR&&DG.sOutR),DF="";if(DH===undefined||DE===undefined){return DF;}if(DD){DF=Bk(DG,DA);}else{var DI=DG.sR-DA*2,C9=DG.sRadStart,DB=DG.sRadEnd;DF=AH(DH,DE);var C7=A7(DH,DE,DI,C9),C8=A7(DH,DE,DI,DB),DC=(DB-C9)>B;DF+=(" "+Cs(C7.x,C7.y));DF+=(" "+Bl(DI,DC,true,C8.x,C8.y));DF+=(" "+BK());}return DF;}function b(DA,DC){var DI=DA.sX,DF=DA.sY,DJ=DA.sOutR,DH=DA.sInR,C9=DA.sRadStart,DD=DA.sRadEnd;if(!C9&&!DD){return Bk(DA,DC);}if(DI===undefined||DF===undefined||DJ===undefined||DH===undefined||C9===undefined||DD===undefined){return"";}DJ-=DC;DH+=DC;C9+=DC*Ad;DD-=DC*Ad;var DK=A7(DI,DF,DJ,C9),C8=A7(DI,DF,DJ,DD),DB=A7(DI,DF,DH,C9),DG=A7(DI,DF,DH,DD),C7=DD-C9>B,DE=AH(DB.x,DB.y);DE+=(" "+Bl(DH,C7,true,DG.x,DG.y));DE+=(" "+Cs(C8.x,C8.y));DE+=(" "+Bl(DJ,C7,false,DK.x,DK.y));DE+=(" "+BK());return DE;}function S(C8){var DA=[],C7=C8.length;if(C7<1){return DA;}C8.sort(function(DD,DC){return DD.sRadStart-DC.sRadStart;});var DB={sRadStart:C8[0].sRadStart,sRadEnd:C8[0].sRadEnd};for(var C9=1;C9<C7;C9++){if(DB.sRadEnd>=C8[C9].sRadStart){DB.sRadEnd=Math.max(DB.sRadEnd,C8[C9].sRadEnd);}else{DA.push(DB);DB={sRadStart:C8[C9].sRadStart,sRadEnd:C8[C9].sRadEnd};}}DA.push(DB);if(DA.length>1&&Math.abs(DA[0].sRadStart+2*B-DA[DA.length-1].sRadEnd)<Q){DA[0].sRadStart=DA[0].sRadEnd;DA[0].sRadEnd=DA[DA.length-1].sRadStart;DA[0].bSeepFlag=true;DA.pop();}return DA;}var CL={createSVGElement:function(C7){return document.createElementNS("http://www.w3.org/2000/svg",C7);},getPiePointString:function(DH,DF,DI,DB,DD,DJ,DC){var DG="";if(BY(DH,DF,DI)){return DG;}if(!BY(DC)){var C8,DA=(DB+DD)/2;DI-=DC;if(DJ){C8=A7(DH,DF,2,DA>Math.PI?DA-Math.PI:DA+Math.PI);DB-=DC/DI;DD+=DC/DI;}else{C8=A7(DH,DF,2,DA);DB+=DC/DI;DD-=DC/DI;}DG=AH(C8.x,C8.y);}else{DG=AH(DH,DF);}var C7=A7(DH,DF,DI,DB),C9=A7(DH,DF,DI,DD),DE=(DD-DB)>Math.PI;if(DJ){DE=!DE;}DG+=(" "+Cs(C7.x,C7.y));DG+=(" "+Bl(DI,DE,!DJ,C9.x,C9.y));DG+=(" "+BK());return DG;},getRingPointString:function(DG,DF,DI,C9,C8,DC,DJ,DA){var DE="",DD=true;if(BY(DG,DF,DI,C9)){return DE;}if(!BY(C8,DC)&&Math.abs(DC-C8-2*B)>Q){var C7,DB,DK,DH;if(!BY(DA)){C9-=DA;DI+=DA;if(DJ){C8-=DA/C9;DC+=DA/C9;}else{C8+=DA/C9;DC-=DA/C9;}C7=A7(DG,DF,C9,C8);DB=A7(DG,DF,C9,DC);DK=A7(DG,DF,DI,C8);DH=A7(DG,DF,DI,DC);}else{C7=A7(DG,DF,C9,C8);DB=A7(DG,DF,C9,DC);DK=A7(DG,DF,DI,C8);DH=A7(DG,DF,DI,DC);}DD=(DC-C8)>Math.PI;if(DJ){DD=!DD;}DE+=(" "+AH(DK.x,DK.y));DE+=(" "+Cs(C7.x,C7.y));DE+=(" "+Bl(C9,DD,!DJ,DB.x,DB.y));DE+=(" "+Cs(DH.x,DH.y));DE+=(" "+Bl(DI,DD,!!DJ,DK.x,DK.y));DE+=(" "+BK());}else{if(!BY(DA)){C9-=DA;DI+=DA;}DE+=(" "+AH(DG,DF));DE+=(" "+BO(-C9,0));DE+=(" "+Cx(C9,DD,true,C9*2,0));DE+=(" "+Cx(C9,DD,true,-C9*2,0));DE+=(" "+AH(DG,DF));DE+=(" "+BO(-DI,0));DE+=(" "+Cx(DI,DD,true,DI*2,0));DE+=(" "+Cx(DI,DD,true,-DI*2,0));}return DE;},getPieRingDecoratorPie:function(DC,DB,DA,C7,C9){var C8=null;if(BY(DC.sRadStart,DC.sRadEnd)||Math.abs(DC.sRadStart+2*B-DC.sRadEnd)<Q){C8=CL.createSVGElement("circle");C8.setAttribute("cx",DB);C8.setAttribute("cy",DA);C8.setAttribute("r",C9?C7-C9:C7);}else{C8=CL.createSVGElement("path");C8.setAttribute("d",CL.getPiePointString(DB,DA,C7,DC.sRadStart,DC.sRadEnd,DC.bSeepFlag,C9));}return C8;},getPieRingDecoratorRing:function(DD,DC,DB,DA,C8,C9){var C7=null;C7=CL.createSVGElement("path");C7.setAttribute("d",CL.getRingPointString(DC,DB,DA,C8,DD.sRadStart,DD.sRadEnd,DD.bSeepFlag,C9));return C7;}};var Cw=function(DB){var DD=0,C9,C8={pie:{},ring:{}},DC,DE,DA,C7=[];for(C9=DB.length;DD<C9;DD++){DC=DB[DD];DA=DC.getAttribute("subtype");if(DA!==BH.PIE&&DA!==BH.RING&&DA!==BH.CIRCLE){continue;}if(typeof DC.sR!==undefined&&BY(DC.sInR,DC.sOutR)){DE=""+DC.sX+"-"+DC.sY+"-"+DC.sR;C7=C8.pie[DE]||(C8.pie[DE]=[]);}else{DE=""+DC.sX+"-"+DC.sY+"-"+DC.sInR+"-"+DC.sOutR;C7=C8.ring[DE]||(C8.ring[DE]=[]);}C7.push(DC);}return C8;};function o(DB,C9){if(C9!==BH.PIE&&C9!==BH.RING&&C9!==BH.CIRCLE){return ;}var DA=DB.decorator,C7=DB.selectedShapes;if(DA){DB.removeChild(DA);delete DB.decorator;}if(typeof C7==="undefined"||C7.length===0){return ;}DA=DB.decorator=CL.createSVGElement("g");DA.setAttribute("type","gm-group-decorator");var DD=Cw(C7),C8=Object.keys(DD.pie),DC=Object.keys(DD.ring);CZ.forEach(C8,function(DE){var DF=DD.pie[DE],DI=DF[0].sX,DH=DF[0].sY,DN=DF[0].sR,DG=DN<Ce;var DO=S(DF);for(var DK=0,DM=DO.length;DK<DM;DK++){var DP=DO[DK];var DL=CL.getPieRingDecoratorPie(DP,DI,DH,DN);DL.setAttribute("class","gm-outter-decorator");DA.appendChild(DL);if(!BY(DP.sRadEnd,DP.sRadStart)){var DQ=DP.sRadEnd-DP.sRadStart;if(DP.bSeepFlag){DQ=2*B-DQ;}if(DQ*DN<Ce){DG=true;}}var DJ=CL.getPieRingDecoratorPie(DP,DI,DH,DN,2);DJ.setAttribute("class","gm-inner-decorator");DA.appendChild(DJ);}});CZ.forEach(DC,function(DE){var DF=DD.ring[DE],DI=DF[0].sX,DH=DF[0].sY,DO=DF[0].sInR,DQ=DF[0].sOutR,DG=(DQ-DO<Ce);var DN=S(DF);for(var DK=0,DM=DN.length;DK<DM;DK++){var DP=DN[DK];var DL=CL.getPieRingDecoratorRing(DP,DI,DH,DO+1,DQ);DL.setAttribute("class","gm-outter-decorator");DA.appendChild(DL);if(!BY(DP.sRadEnd,DP.sRadStart)){var DR=DP.sRadEnd-DP.sRadStart;if(DP.bSeepFlag){DR=2*B-DR;}if(DR*(DQ+DO)<Ce){DG=true;}}var DJ=CL.getPieRingDecoratorRing(DP,DI,DH,DO,DQ,2);DJ.setAttribute("class","gm-inner-decorator");DA.appendChild(DJ);}});DB.appendChild(DA);}function Al(C8,DB){if(DB!==BH.PIE&&DB!==BH.RING&&DB!==BH.CIRCLE){return ;}var C9=C8.decorator,DD=C8.CMDecorator,C7=C8.isSelected,DE=C8.contextMenuSelection;if(DD){C8.removeChild(DD);delete C8.CMDecorator;}if(C7){if(C9){C8.removeChild(C9);delete C8.decorator;}}else{o(C8,DB);}if(typeof DE==="undefined"||DE.length===0){return ;}DD=C8.CMDecorator=CL.createSVGElement("g");DD.setAttribute("type","gm-group-CMDecorator");var DC=Cw(DE),DA=Object.keys(DC.pie),DF=Object.keys(DC.ring);CZ.forEach(DA,function(DG){var DH=DC.pie[DG],DK=DH[0].sX,DJ=DH[0].sY,DP=DH[0].sR,DI=DP<Ce;var DQ=S(DH);for(var DM=0,DO=DQ.length;DM<DO;DM++){var DR=DQ[DM];var DN=CL.getPieRingDecoratorPie(DR,DK,DJ,DP);if(C7){DN.setAttribute("class","gm-outter-decorator MultiSelected");DD.appendChild(DN);}else{DN.setAttribute("class","gm-outter-decorator RMSelected");DD.appendChild(DN);}if(!BY(DR.sRadEnd,DR.sRadStart)){var DS=DR.sRadEnd-DR.sRadStart;if(DR.bSeepFlag){DS=2*B-DS;}if(DS*DP<Ce){DI=true;}}if(!C7){var DL=CL.getPieRingDecoratorPie(DR,DK,DJ,DP,2);DL.setAttribute("class","gm-inner-decorator");DD.appendChild(DL);}}});CZ.forEach(DF,function(DG){var DH=DC.ring[DG],DK=DH[0].sX,DJ=DH[0].sY,DQ=DH[0].sInR,DS=DH[0].sOutR,DI=(DS-DQ<Ce);var DP=S(DH);for(var DM=0,DO=DP.length;DM<DO;DM++){var DR=DP[DM];var DN=CL.getPieRingDecoratorRing(DR,DK,DJ,DQ+1,DS);if(C7){DN.setAttribute("class","gm-outter-decorator MultiSelected");DD.appendChild(DN);}else{DN.setAttribute("class","gm-outter-decorator RMSelected");DD.appendChild(DN);}if(!BY(DR.sRadEnd,DR.sRadStart)){var DT=DR.sRadEnd-DR.sRadStart;if(DR.bSeepFlag){DT=2*B-DT;}if(DT*(DS+DQ)<Ce){DI=true;}}if(!C7){var DL=CL.getPieRingDecoratorRing(DR,DK,DJ,DQ,DS,2);DL.setAttribute("class","gm-inner-decorator");DD.appendChild(DL);}}});C8.appendChild(DD);}function G(C7,DD,DC){var C9=DC.left,DB=DC.top,C8=C9+DC.width,DA=DB+DC.height;return C7>=C9&&C7<C8&&DD>=DB&&DD<DA;}function AM(C7){return Math.round(C7*0.1);}function Cl(C7,DG,DE,DA){var DC,DB=C7.box;if(DE){var C9=DA.GMController,DF=C9.hasGroupInfoStored(),C8=DF.existing&&DF.gi,DD=this.getZoneItems(DA.currEnteredDropZoneID,DA),DH=DF.existing?C8.length:DD.length,DI=C7.axisIndex;DC=(DG==="H"?DB.width:DB.height);if(DH===1){DC=DC/2;}else{if(DH>1){if(DI===0){DC=DC*0.67;}else{if(DI===DH-1){DC=DC*0.33;}else{DC=DC*0.5;}}}}}else{if(DG==="H"){DC=3*AM(DB.width);}else{DC=3*AM(DB.height);}}return DC;}function E(DH,DD,C7,DG,DF,DA){var DB,DE,C8,C9=C7.box,DC=BR.position(DA.domMainContainer);DH=DH-DC.x;DD=DD-DC.y;if(DF){DE=DG==="H"?DH-C9.left:DD=DD-C9.top;DB=Cl.call(this,C7,DG,DF,DA);C8=(DE<DB)?BU:C;}else{if(DG==="H"){DH=DH-C9.left;DB=Cl.call(this,C7,DG,DF,DA);C8=(DH<DB)?BU:(DH>C9.width-DB)?C:Ar;}else{DD=DD-C9.top;DB=Cl.call(this,C7,DG,DF,DA);C8=(DD<DB)?BU:(DD>C9.height-DB)?C:Ar;}}return C8;}function CI(C9,DJ,DI){var DF=C9.length,DC=false,DB,C7,DK,DE,DA,DH,C8,DG,DD;if(DF/2<3){return false;}DK=C9[DF-2];DE=C9[DF-1];for(DD=0;DD<DF;DD=DD+2){DB=C9[DD];C7=C9[DD+1];if(DB>DK){DA=DK;C8=DB;DH=DE;DG=C7;}else{DA=DB;C8=DK;DH=C7;DG=DE;}if(DB===DK&&C7===DE){continue;}if((DB<DJ)===(DJ<=DK)&&((DI-DH)*(C8-DA)<(DG-DH)*(DJ-DA))){DC=!DC;}DK=DB;DE=C7;}return DC;}function g(C8){var DH,DG,DC,DB,DJ,C7,DA=C8.length,DI=this.widget,DD=DI.manager,C9,DF,DE;this.selectedTargets=this.selectedTargets||[];for(DH=0;DH<DA;DH++){DB=C8[DH];if(DB.byRow){DD.toggleClsByRows(DB.start,DB.end,DB.depth,true,"selected");this.highlightedRows.push({start:DB.start,end:DB.end});C9=DD.filterRowHeaders(DB.start,DB.end,DB.depth,Ab.GM_ROW_HEADER);DF=C9.length;for(DE=0;DE<DF;DE++){this.selectedTargets.push(C9[DE]);this.selectBorders(C9[DE]);}}else{DD.toggleClsByCols(DB.start,DB.end,DB.depth,true,"selected");this.highlightedCols.push({start:DB.start,end:DB.end});C9=DD.filterColHeaders(DB.start,DB.end,DB.depth,Ab.GM_COL_HEADER);DF=C9.length;for(DE=0;DE<DF;DE++){this.selectedTargets.push(C9[DE]);this.selectBorders(C9[DE]);}}DJ=DB.att;C7=DB.elements;if(DJ&&C7){for(DG=0,DC=C7.length;DG<DC;DG++){DI.addAttributeSelection(DJ,C7[DG].id,C7[DG].n);}}}}function Cc(C7){return C7.getAttribute("status")===s.SELECTED||C7.getAttribute("status")===s.MultiSelected||C7.getAttribute("status")===s.RMSelected;}function Ag(C7){return C7.getAttribute("status")===s.SH;}function CH(DA){if(DA.getAttribute("size")==="small"){if(DA.getAttribute("class")==="gm-shape-bar hover"){DA.setAttribute("class","gm-shape-bar small hover");}return undefined;}var C9=document.createElementNS("http://www.w3.org/2000/svg","rect"),C7=parseFloat(DA.getAttribute("x")),DC=parseFloat(DA.getAttribute("y")),C8=parseFloat(DA.getAttribute("width")),DB=parseFloat(DA.getAttribute("height"));C9.setAttribute("class",DA.getAttribute("subtype")===BH.SQUARE?"gm-marker-square":"gm-marker-bar");C9.setAttribute("type","marker");C9.setAttribute("x",C7+1.5);C9.setAttribute("y",DC+1.5);C9.setAttribute("width",C8-3);C9.setAttribute("height",DB-3);C9.identity=DA.identity;return C9;}function CX(C7,DB,C9,C8){var DA=document.createElementNS("http://www.w3.org/2000/svg","circle");DA.setAttribute("cx",C7);DA.setAttribute("cy",DB);DA.setAttribute("r",C9-C8);return DA;}function CE(C9){if(C9.getAttribute("size")==="small"){return undefined;}var C7=parseFloat(C9.getAttribute("cx")),DB=parseFloat(C9.getAttribute("cy")),DA=parseFloat(C9.getAttribute("r")),C8=CX(C7,DB,DA,1.5);C8.setAttribute("class","gm-marker-circle");C8.setAttribute("type","marker");C8.identity=C9.identity;return C8;}function Cz(C7){return C7.nodeName==="circle";}function BS(C9){if(C9.getAttribute("size")==="small"){return undefined;}var C8;if(Cz(C9)){C8=CX(C9.sX,C9.sY,C9.sR,2);}else{C8=document.createElementNS("http://www.w3.org/2000/svg","path");var C7=AJ(C9,2);if(C7!==""){C8.setAttribute("d",C7);}}C8.setAttribute("class","gm-marker-pie");C8.setAttribute("type","marker");C8.identity=C9.identity;return C8;}function Ch(C9){if(C9.getAttribute("size")==="small"){return undefined;}var C8=document.createElementNS("http://www.w3.org/2000/svg","path"),C7=b(C9,2);C8.setAttribute("class","gm-marker-ring");C8.setAttribute("type","marker");C8.setAttribute("d",C7);C8.identity=C9.identity;return C8;}function Bn(C9){if(C9.getAttribute("size")==="small"){return undefined;}var C8,C7,DD,DA;if(C9.status!=="MultiSelected"){C8=document.createElementNS("http://www.w3.org/2000/svg","circle");C7=parseFloat(C9.getAttribute("cx"));DD=parseFloat(C9.getAttribute("cy"));DA=parseFloat(C9.getAttribute("r"));C8.setAttribute("class","gm-marker-scircle");C8.setAttribute("type","marker");C8.setAttribute("cx",C7);C8.setAttribute("cy",DD);C8.setAttribute("r",DA-2);C8.identity=C9.identity;return C8;}else{C8=CL.createSVGElement("g");C8.setAttribute("type","gm-group-circle");var DC=document.createElementNS("http://www.w3.org/2000/svg","circle");C7=parseFloat(C9.getAttribute("cx"));DD=parseFloat(C9.getAttribute("cy"));DA=parseFloat(C9.getAttribute("r"));DC.setAttribute("class","gm-marker-scircle MultiSelected");DC.setAttribute("type","marker");DC.setAttribute("cx",C7);DC.setAttribute("cy",DD);DC.setAttribute("r",DA-2);DC.identity=C9.identity;C8.appendChild(DC);var DB=document.createElementNS("http://www.w3.org/2000/svg","circle");DB.setAttribute("class","gm-marker-scircle");DB.setAttribute("type","marker");DB.setAttribute("cx",C7);DB.setAttribute("cy",DD);DB.setAttribute("r",DA-3);DB.identity=C9.identity;C8.appendChild(DB);return C8;}}function AT(C7){var C9,C8=CL.createSVGElement("polygon"),DB=C7.length,DA="";for(C9=0;C9<DB;++C9){DA+=(C7[C9].x+","+C7[C9].y+" ");}C8.setAttribute("points",DA);return C8;}function Cq(C7,C8){this.x=C7;this.y=C8;}var Cr=Cq.prototype;Cr.dot=function(C7){return this.x*C7.x+this.y*C7.y;};Cr.add=function(C7){return new Cq(this.x+C7.x,this.y+C7.y);};Cr.diff=function(C7){return new Cq(this.x-C7.x,this.y-C7.y);};Cr.length=function(){return Math.sqrt(this.dot(this));};Cr.normalize=function(){var C7=this.length();this.x/=C7;this.y/=C7;return this;};Cr.scale=function(C7){return new Cq(this.x*C7,this.y*C7);};Cr.isInPolygon=function(DA){var DB=DA.length,C7=false,C9,C8;if(DB<3){return false;}for(C9=0,C8=DB-1;C9<DB;C8=C9++){if(((DA[C9].y<=this.y&&this.y<DA[C8].y)||(DA[C8].y<=this.y&&this.y<DA[C9].y))&&this.x<=(DA[C8].x-DA[C9].x)*(this.y-DA[C9].y)/(DA[C8].y-DA[C9].y)+DA[C9].x){C7=!C7;}}return C7;};function Ai(DK,DC){DC=DC||2.5;var DD=0,DG=DK.length,DB=[],DF=[],DA,DJ,DE,DH,C8;for(DD=0;DD<DG;DD++){DB.push(new Cq(DK[DD].x,DK[DD].y));}for(DD=0,DG=DB.length;DD<DG;DD++){DJ=DB[DD];DA=DB[DD===0?DG-1:DD-1];DE=DB[DD===DG-1?0:DD+1];var DM=DA.diff(DJ);var DL=DE.diff(DJ);DM.normalize();DL.normalize();DH=DM.dot(DL);C8=Math.sqrt((1-DH)/2);var C9=DC/C8;var C7=DM.add(DL).normalize();var DI=DJ.add(C7.scale(C9));if(!DI.isInPolygon(DB)){DI=DJ.add(C7.scale(-1*C9));}DF.push(DI);}return DF;}function CR(C8){if(C8.tagName==="circle"){return CE(C8);}var C7=CL.createSVGElement("g"),C9=C8.points;C7.setAttribute("type","gm-group-decorator");var DB=AT(C9);if(C8.status==="MultiSelected"){DB.setAttribute("class","gm-outter-decorator MultiSelected");}else{if(C8.status==="RMSelected"){DB.setAttribute("class","gm-outter-decorator RMSelected");}else{DB.setAttribute("class","gm-outter-decorator");}}C7.appendChild(DB);if(C8.getAttribute("size")==="small"){return C7;}if(C8.status==="MultiSelected"){return C7;}C9=Ai(C9,2.5);var DA=AT(C9);DA.setAttribute("class","gm-inner-decorator");C7.appendChild(DA);return C7;}function BZ(C8,C9){var C7=C8.decorator;if(C7){return C7;}if(!C9){C9=C8.getAttribute("subtype");}switch(C9){case BH.BAR:case BH.GBAR:case BH.SQUARE:C7=CH(C8);break;case BH.SCIRCLE:C7=Bn(C8);break;case BH.CIRCLE:C7=CE(C8);break;case BH.PIE:C7=BS(C8);break;case BH.RING:C7=Ch(C8);break;case BH.SBAR:C7=CR(C8);break;case BH.TICKER:break;}if(C7){C7.source=C8;C8.decorator=C7;}return C7;}function c(DA,DB){var C8=parseFloat(DA.getAttribute("x")),DD=parseFloat(DA.getAttribute("y")),C9=parseFloat(DA.getAttribute("width")),DC=parseFloat(DA.getAttribute("height")),C7=parseInt(DA.style.strokeWidth,10);if(DA.getAttribute("size")==="small"){switch(DB){case C3.NORMAL2HOVER:case C3.RMSELECTED2HOVER:case C3.MULTISELECTED2HOVER:case C3.SELECTED2HOVER:DA.setAttribute("x",C8-C7/2);DA.setAttribute("y",DD-C7/2);DA.setAttribute("width",C9+C7);DA.setAttribute("height",DC+C7);break;case C3.HOVER2NORMAL:case C3.HOVER2RMSELECTED:case C3.HOVER2MULTISELECTED:case C3.HOVER2SELECTED:DA.setAttribute("x",C8+C7/2);DA.setAttribute("y",DD+C7/2);DA.setAttribute("width",C9-C7);DA.setAttribute("height",DC-C7);break;default:break;}return ;}switch(DB){case C3.NORMAL2HOVER:case C3.NORMAL2RMSELECTED:case C3.NORMAL2SELECTED:DA.setAttribute("x",C8+0.5);DA.setAttribute("y",DD+0.5);DA.setAttribute("width",C9-1);DA.setAttribute("height",DC-1);DA.style.strokeWidth=C7+1;break;case C3.HOVER2NORMAL:case C3.RMSELECTED2NORMAL:case C3.MULTISELECTED2NORMAL:case C3.SELECTED2NORMAL:DA.setAttribute("x",C8-0.5);DA.setAttribute("y",DD-0.5);DA.setAttribute("width",C9+1);DA.setAttribute("height",DC+1);DA.style.strokeWidth=C7-1;break;default:break;}}function CV(DA,DB){var DC=DA.parentNode;if(!DC){return ;}var C9=DC.parentNode,C8=C9.getElementById("marker-layer"),C7=BZ(DA);if(!C8){C8=document.createElementNS("http://www.w3.org/2000/svg","g");C8.setAttribute("id","marker-layer");C9.appendChild(C8);}switch(DB){case C3.NORMAL2HOVER:case C3.NORMAL2RMSELECTED:case C3.HOVER2RMSELECTED:case C3.NORMAL2SELECTED:if(C8&&C7){C8.appendChild(C7);}break;case C3.HOVER2NORMAL:case C3.RMSELECTED2NORMAL:case C3.SELECTED2NORMAL:case C3.MULTISELECTED2NORMAL:if(C8&&C8.childElementCount>0&&C7){C8.removeChild(C7);delete DA.decorator;}break;case C3.SELECTED2MULTISELECTED:case C3.MULTISELECTED2SELECTED:case C3.RMSELECTED2SELECTED:case C3.RMSELECTED2MULTISELECTED:if(C8&&C8.childElementCount>0&&C7){C8.removeChild(C7);delete DA.decorator;C7=BZ(DA);C8.appendChild(C7);}break;default:break;}}function Cp(C8,C9){var DA=C8.parentNode,C7=BZ(C8);if(DA&&C8.tagName==="polygon"&&C8.getAttribute("subtype")===BH.SBAR){DA=DA.parentNode;if(!DA){return ;}switch(C9){case C3.NORMAL2SELECTED:case C3.NORMAL2RMSELECTED:case C3.NORMAL2HOVER:if(C7&&DA){DA.appendChild(C7);}break;case C3.SELECTED2NORMAL:case C3.RMSELECTED2NORMAL:case C3.MULTISELECTED2NORMAL:case C3.HOVER2NORMAL:if(C7){DA.removeChild(C7);delete C8.decorator;}break;case C3.SELECTED2MULTISELECTED:case C3.HOVER2RMSELECTED:case C3.MULTISELECTED2SELECTED:case C3.RMSELECTED2SELECTED:if(C7){DA.removeChild(C7);delete C8.decorator;C7=BZ(C8);DA.appendChild(C7);}break;}}else{if(!DA){return ;}switch(C9){case C3.NORMAL2SELECTED:case C3.NORMAL2RMSELECTED:case C3.MULTISELECTED2SELECTED:case C3.HOVER2RMSELECTED:case C3.HOVER2SELECTED:if(C7){DA.appendChild(C7);}break;case C3.SELECTED2NORMAL:case C3.SELECTED2MULTISELECTED:case C3.RMSELECTED2MULTISELECTED:case C3.RMSELECTED2NORMAL:case C3.SELECTED2HOVER:if(C7){DA.removeChild(C7);}break;}}}function CS(C9){var C8=C9.parentNode,DA=C8&&C8.parentNode,DB=[],DE=this.widget.GMController,DD=DE.getChartInfo(),DC=DD.isABL&&(DD.shape===Bo.CIRCLE||DD.shape===Bo.PIE||DD.shape===Bo.RING||DD.shape===Bo.SQUARE);var C7=function(){DA.removeChild(C8);var DF=DA.childNodes.length,DH=DF>0&&DA.childNodes[DF-1],DG=DH.childNodes.length>0&&DH.childNodes[0].nodeName==="text";if(DG){DA.insertBefore(C8,DH);}else{DA.appendChild(C8);}};if(!C8||!DA){return ;}switch(C9.getAttribute("subtype")){case BH.SQUARE:case BH.SCIRCLE:if(DC){C7();}break;case BH.PIE:case BH.RING:case BH.CIRCLE:if(DC){C7();}[].slice.call(C8.childNodes).forEach(function(DF){if(DF.sX===C9.sX&&DF.sY===C9.sY){DB.push(DF);}});DB.forEach(function(DF){C8.removeChild(DF);});DB.forEach(function(DF){C8.appendChild(DF);});break;}return ;}function Ca(C9,C8){if(!C9){return ;}var C7=C9.getAttribute("status")||s.NORMAL;C9.status=C8;if(C8===C7){return ;}var DA=B8(C7,C8);Au(C9,DA);switch(C9.getAttribute("subtype")){case BH.BAR:c(C9,DA);Cp(C9,DA);break;case BH.SCIRCLE:CV(C9,DA);break;case BH.GBAR:case BH.SQUARE:case BH.SBAR:case BH.TICKER:Cp(C9,DA);break;default:break;}C9.setAttribute("status",C8);}function BD(DA,C8){if(!DA){return ;}var C7=DA.getAttribute("status")||s.NORMAL;if(C8===C7){return ;}var C9=B8(C7,C8);Au(DA,C9);DA.setAttribute("status",C8);}function Ak(DB,C7){var C8=this.widget,C9=this.domMenuPH,DA=this;C9.innerHTML="";document.body.appendChild(C9);C8.configurePopup(C7,C9);C8.menuEditor=C7.newInstance({locksHover:false,unrender:function(){}});C8.menuEditor.onCloseMenuCallBack=function(){DA.clearContextMenuSelectedShapes();DA.clearContextMenuSelectedTargets();DA.gmMenuOnCloseFlag=true;};C8.menuEditorClosefn=function(DD){var DF=DD.target,DC=C8.menuEditor.domNode;if(!BR.contains(DC,DF,true,DC)&&!Ci.isHostedPopupNode(DF,"class",true,document.body)){if(C8.toolEditor){var DE=C8.toolEditor.domNode;if(!BR.contains(DE,DF,true,DE)){DA.hideContextMenu();}}else{DA.hideContextMenu();}}};BR.attachEvent(document.body,C2,C8.menuEditorClosefn,true);C8.openPopup(C8.menuEditor);}function AL(DB,C8){var C7=this.widget,C9=this.domToolbarPH,DA=this;C7._lastOpened=null;C9.innerHTML="";document.body.appendChild(C9);B3.toggleClass(C9,mstrApp.getThemeClassName(),true);C7.configurePopup(C8,C9);C7.toolEditor=C8.newInstance({unrender:function(){}});C7.toolEditorClosefn=function(DD){var DF=DD.target,DE=C7.toolEditor.domNode;if(!BR.contains(DE,DF,true,DE)&&!Ci.isHostedPopupNode(DF,"class",true,document.body)){if(C7.menuEditor){var DC=C7.menuEditor.domNode;if(!BR.contains(DC,DF,true,DC)){DA.hideToolbar();}}else{DA.hideToolbar();}}};BR.attachEvent(document.body,C2,C7.toolEditorClosefn,true);C7.openPopup(C7.toolEditor);B3.toggleClass(document.body,"hasToolbarPopup",true);}function AN(DB,C8){var C7=this.widget,C9=this.domToolbarPH,DA=this;if(C7._lastOpened){C7.closePopup();}C7._lastOpened=null;C9.style.top=DB.y+"px";C9.style.left=DB.x+"px";C9.innerHTML="";document.body.appendChild(C9);B3.toggleClass(C9,mstrApp.getThemeClassName(),true);C7.configurePopup(C8,C9);C7.toolEditor=C8.newInstance({unrender:function(){}});C7.toolEditorClosefn=function(DD){var DF=DD.target,DE=C7.toolEditor.domNode;if(!BR.contains(DE,DF,true,DE)&&!Ci.isHostedPopupNode(DF,"class",true,document.body)){if(C7.menuEditor){var DC=C7.menuEditor.domNode;if(!BR.contains(DC,DF,true,DC)){DA.hideToolbar();}}else{DA.hideToolbar();}}};BR.attachEvent(document.body,C2,C7.toolEditorClosefn,true);C7.openPopup(C7.toolEditor);B3.toggleClass(document.body,"hasToolbarPopup",true);}function BW(DA,C9,C8,C7){var DB;if(C7===undefined){if(C8===B1.GLOBAL){if(C9===C6.BG_COLOR){DB=DA.getFormats()["background-color"];}else{DB=DA.readGlobalProperty(C9);}}else{if(C8===B1.FORMATTING){DB=DA.getPropertiesOfFormatable();}}}else{DB=DA.readGlobalProperty(C7.realPropName,C7.opt);}if(typeof DB==="object"&&DB.jsonObj){DB=DB.jsonObj[C9];}if(C9.slice(-3)===Y.COLOR&&C9!==C6.BG_COLOR){DB=p.decodeColor(DB);}return DB;}function Aw(DA,C9,C8,C7){if(C7!==undefined){return function(DD){var DB=DA.readGlobalProperty(C7.realPropName,C7.opt),DC=DB.jsonObj[C9];if(C9.indexOf(Y.COLOR)!==-1){DD=p.encodeColor(DD);}if(DD!==DC){DB.setProperty(C9,DD);DA.writeGlobalProperty(C7.realPropName,DB,C7.opt);}};}if(C8===B1.GLOBAL){return function(DC){var DB=BW(DA,C9,B1.GLOBAL);if(DC!==DB){if(C9.indexOf(Y.COLOR)!==-1){DC=p.encodeColor(DC);}DA.writeGlobalProperty(C9,DC);}};}return function(DE){var DD=BW(DA,C9,B1.FORMATTING),DC=p.checkEquality(DE,DD);if(!DC){if(C9.indexOf(Y.COLOR)!==-1){DE=p.encodeColor(DE);}var DB=DA.getPropertiesOfFormatable();if(DB&&DB.jsonObj&&!p.checkEquality(DB.jsonObj[C9],DE)){DB.setProperty(C9,DE);DA.writeFormatableProperties(DB);}}};}function Cj(C8,C7){C8=C8||[];C7=C7||"";CZ.forEach(C8,function(C9){C9.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:C7,children:C8};}function Br(C7,C8){return new mstrmojo.Box({children:C7||[],cssText:C8});}function CJ(DB,DC,DD,C7){var C8=new mstrmojo.Label({text:DB}),DA=Br(C8,"white-space: nowrap; margin-right:9px;");var C9=[DA,DC];if(DD){C9=[DC,DA];}return Cj(C9,C7);}function BF(DB,C9,DA,C8,C7){C9=C9||{};if(C9.propNames===undefined){C9.propNames=DA;}if(C9.onGroupValueChange===undefined){C9.onGroupValueChange=function(DC,DE,DD){if(DE!==DD&&DE!==undefined){if(DC===C6.BG_COLOR){Ci.changeWidgetBackground(DB,DE,DD);}else{Aw(DB,DC,C8,C7).call(this,DE,DD);}}};}return C9;}function CP(DA,DB,C9,C8,C7){CZ.forEach(C9,function(DC){var DD=BW(DA,DC,C8,C7);DB.syncControls(function(){DB.setChildValue(DC,DD);});});}function CF(DC,C8,DB,DA,C7,C9){C9=BF(DC,C9,DB,DA,C7);Av.copy({cssClass:"mstrmojo-ui-ToolBarLineGroup",layoutConfig:null,height:null,width:C9.width||"125px",showNoFillInColor:false},C9);var DD=new mstrmojo.ui.editors.controls.LineConfigGroup(C9);if(DD){DD.iniChildrenComp(DB);CP(DC,DD,DB,DA,C7);}if(typeof C8==="string"){return CJ(C8,DD,false,(C9||[]).rowContainerCSSClass);}return DD;}function C5(DB,C7,DA,C9,C8){C8=BF(DB,C8,DA,C9);Av.copy({cssClass:"mstrmojo-ui-ToolBarFillGroup",height:null,width:C8.width||"140px",colorPickerHostWithin:true},C8);var DC=new mstrmojo.ui.editors.controls.FillConfigGroup(C8);if(DC){DC.iniChildrenComp(DA);CP(DB,DC,DA,C9);if(DC.children[0]&&DC.children[0].children[0]){p.initColorPickerBtnWithGradientDir(DC.children[0].children[0],DB);}}if(typeof C7==="string"){return CJ(C7,DC);}return DC;}function CD(DB,DA,DD,C9){var C8=DB.model.data.dz.ColorBy,DC=CF(DB,mstrmojo.desc(9736,"Border"),DA,C9,undefined,{rowContainerCSSClass:"mstrmojo-ui-rowContainer",showNoneOption:false}),C7=C5(DB,mstrmojo.desc(2885,"Fill"),DD,C9,{onGroupValueChange:function(DF,DJ,DG){if(DJ!==DG&&DJ!==undefined){var DH="shpBdrClr_default",DE=DB.getPropertiesOfFormatable(),DI=DE.jsonObj[DH];if(C8.TemplateUnit&&DF===C6.SHAPE_FILL_COLOR&&DI){DC.children[1].syncControls(function(){this.setChildValue(C6.SHAPE_BORDER_COLOR,DJ);});}Aw(DB,DF,C9).call(this,DJ,DG);}},showGradient:false});return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolbarBorderAndFill",children:[C7,DC]}]});}function Ah(DC,C8,DB,DA,C7,C9){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[CF(DC,C8,DB,DA,C7,C9)]}]});}function Aj(DB,C7,DA,C9,C8){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[C5(DB,C7,DA,C9,C8)]}]});}function f(C7){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-FillOpacityAndBorderStyleToolbar",children:[C5(C7,mstrmojo.desc(13658,"Fill Opacity"),[C6.SHAPE_FILL_TRANSPARENCY],B1.FORMATTING,{width:"60px",visibleControls:mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS.FILL_TRANSPARENCY}),CF(C7,mstrmojo.desc(3538,"Border Style"),[C6.SHAPE_BORDER_COMBINED_STYLE],B1.FORMATTING,undefined,{width:"60px",hideColorControl:true,rowContainerCSSClass:"mstrmojo-ui-rowContainer"})]}]});}function B7(DE,DC,DB,DA,C9,C7){var C8=BW(DC,DB,DA),DD={showGradient:!!C7,isHostedWithin:true,width:"40px",selectedValue:C8,postselectedValueChange:function(DF){Aw(DC,DB,DA).call(this,DF.value,DF.valueWas);}};DE=DE||"ColorPickerButton";C9=Av.copy(DD,C9);return new mstrmojo.ui.editors.controls[DE](C9);}function L(DB,C9,C8){var DA={sourceColor:C9,checkboxLabel:C8},C7=B7("MarkerColorPickerButton",DB,C6.LINE_MARKER_COLOR,B1.FORMATTING,DA);return CJ(mstrmojo.desc(6242,"Color"),C7);}function Bg(DD,DC,DB,DA){var C9=DD.readGlobalProperty(DC),C7=C9.color,DE=DD.interactor;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker(Av.copy(DA,{color:C9.isDefaultColor?P.VAL_AUTOMATIC:C7,autoPreviewColor:C9.isDefaultColor?C7:null,colorChanged:function(DF){DF=(this.showAutomatic&&DF===P.VAL_AUTOMATIC)?AW:DF;Aw(DD,DC,DB).call(this,DF,C7);DE.hideToolbar();},colorCanceled:function(){DE.hideToolbar();},showPickerForCurrentMode:function C8(){mstrmojo.ui.editors.controls.AdvancedColorPicker.prototype.showPickerForCurrentMode.call(this);if(this.pickerMode===2&&typeof this.color!=="object"){var DF=this.gradientOrientation,DG=DD.getChartInfo().dirc===By.EnumABLDirection.VERTICAL;DF.set("selectedIndex",CZ.find(DF.items,"id",DG?0:1));}}}))]});}function A5(C9,C8){var DA=[],C7=[];CZ.forEach(C9,function(DB){DA.push(DB.tid);C7.push(DB.eid);});return C8.getColorBy(DA,C7);}function Am(DB,DA,C9,C7,DC){var C8=C7.jsonObj[DA];return new mstrmojo.ui.menus.PopupConfig({contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({color:p.decodeColor(C8),showNoFill:DC,colorChanged:function(DD){var DE=p.encodeColor(DD);if(DE!==C8){C7.setProperty(DA,DE);C7.opt=C9.opt;DB.writeGlobalProperty(C9.realPropName,C7,C9.opt);DB.raiseEventFormatableChanged();}this.parent.popupConfig.close();},colorCanceled:function(){this.parent.popupConfig.close();}})]});}function Be(DD,DF,DI,DB){var DH,DG,C8,DE=false,C9;if(DI.TemplateUnit||DI.MetricNames!==undefined){C9=true;DH=(DD.getDocModel&&DD.getDocModel())||DD.model.docModel;DG=DF.identity.getSelectedObjectColorByInfo();var DA=A5(DG,DH);C8=DA.color;DE=DA.isManual;}else{C9=false;C8=DD.readGlobalProperty(C6.SHAPE_FILL_COLOR);}var C7=p.decodeColor(C8);return new mstrmojo.ui.menus.PopupConfig({contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker(Av.copy(DB,{color:DE?C7:P.VAL_AUTOMATIC,autoPreviewColor:DE?null:C7,colorChanged:function(DJ){var DK=(this.showAutomatic&&DJ===P.VAL_AUTOMATIC)?AW:p.encodeColor(DJ);if(DK!==C8){if(C9){DD.updateColorByMap([DG],DK);}else{Aw(DD,C6.SHAPE_FILL_COLOR,B1.FORMATTING).call(this,DJ);}}this.parent.popupConfig.close();},colorCanceled:function(){this.parent.popupConfig.close();},showPickerForCurrentMode:function DC(){mstrmojo.ui.editors.controls.AdvancedColorPicker.prototype.showPickerForCurrentMode.call(this);var DK=this.parent,DJ=function DJ(){DK.adjustCornersForPopupOverflow();};if(this.pickerMode===2){this.colorStyle.markupMethods=Av.copy({onselectedIndexChange:DJ},Av.copy(this.colorStyle.markupMethods));}if(this.pickerMode===2&&typeof this.color!=="object"){var DL=this.gradientOrientation,DM=DD.getChartInfo().dirc===By.EnumABLDirection.VERTICAL;DL.set("selectedIndex",CZ.find(DL.items,"id",DM?0:1));}DJ();}}))]});}function Ba(DE,C8,DC){var C7={},DD=BW(DC,C8+Y.FONT_STYLE,B1.GLOBAL),DA=BW(DC,C8+Y.FONT_COLOR,B1.GLOBAL),C9=BW(DC,C8+Y.FONT_FAMILY,B1.GLOBAL),DB=BW(DC,C8+Y.FONT_SIZE,B1.GLOBAL);if(DD!==undefined){C7[Ax.FONT_WEIGHT]=(!isNaN(DD)&&((DD&y.FS_BOLD)>0));C7[Ax.FONT_STYLE]=(!isNaN(DD)&&((DD&y.FS_ITALIC)>0));C7[Ax.UNDERLINE]=(!isNaN(DD)&&((DD&y.FS_UNDERLINE)>0));C7[Ax.LINE_THROUGH]=(!isNaN(DD)&&((DD&y.FS_STRIKETHROUGH)>0));}C7[Ax.COLOR]=DA!==undefined?DA:-1;C7[Ax.FONT_SIZE]=DB!==undefined?DB:-1;C7[Ax.FONT_FAMILY]=C9!==undefined?C9:-1;DE.setFormatSource(C7);}function Bw(DA,DB,C9,C7){var C8={bold:y.FS_BOLD,italic:y.FS_ITALIC,underline:y.FS_UNDERLINE,strikeout:y.FS_STRIKETHROUGH};C9.forEach(function(DC){var DD=null;if(DC.indexOf(Y.FONT_STYLE)>-1){DD=DB.fontStyle;DD.postselectionChange=function(DE){var DH=DE.added,DI=this.items[(DH&&DH[0]!==undefined)?DH[0]:DE.removed[0]],DG=!!DH,DF=BW(DA,DC,C7),DJ=(DF===undefined?0:DF);if(DG){DJ=DJ|C8[DI.css];}else{DJ=DJ&(~C8[DI.css]);}this.parent.raiseFormatValueChange(DC,DJ,DF);};}else{if(DC.indexOf(Y.FONT_FAMILY)>-1){DD=DB.fontFamily;DD.postselectedIndexChange=function(DE){var DH=DE.value,DG=DE.valueWas;if(DH!==DG){var DF=this.items;this.parent.raiseFormatValueChange(DC,DF[DH].id,DF[DG]&&DF[DG].id);}};}else{if(DC.indexOf(Y.FONT_SIZE)>-1){DD=DB.fontSize;DD.postselectedValueChange=function(DE){var DG=parseInt(DE.value,10)+"pt",DF=parseInt(DE.valueWas,10)+"pt";if(DG!==DF){this.parent.parent.raiseFormatValueChange(DC,DG,DF);}};DD.validateTextInput=function(DG,DE){var DF=parseInt(DG,10);if(isNaN(DF)){return DE;}return DF.toString();};}else{if(DC.indexOf(Y.FONT_COLOR)>-1){DD=DB.fontColor;DD.postselectedValueChange=function(DE){this.parent.parent.raiseFormatValueChange(DC,DE.value,DE.valueWas);};}}}}if(DD){DD.propName=DC;}});}function BB(DB,C7,DA,C9,C8,DD){if(C8===undefined){C8={};}if(DD!==undefined){C8.showNoFillInColor=DD;}C8=Av.copy(DB.getFontToolbarProps(),C8);if(C8.propNames===undefined){C8.propNames=DA;}if(C8.onGroupValueChange===undefined){C8.onGroupValueChange=function(DE,DG,DF){if(DG!==DF&&DG!==undefined){Aw(DB,DE,B1.GLOBAL).call(this,DG,DF);}};}var DC=new mstrmojo.ui.editors.controls.CharacterGroup(C8);Bw(DB,DC,DA,C9);Ba(DC,C7,DB);return DC;}function K(DB,C7,DA,C9,C8,DC){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[BB(DB,C7,DA,C9,C8,DC)]}]});}function A1(C9,C8,C7){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.HBox",children:[L(C9,C8,C7)]}]});}function Bp(C9){var C7=Av.keyarray(C9).sort(),C8=[],DA;C7.forEach(function(DB){DA=[];C9[DB].forEach(function(DC){DA.push(DC.id);});C8.push(DB+"-"+DA.sort().join("@"));});return C8.join("#");}function X(DA,C7){var DB,DE,C9=DA.identity,C8,DD={};if(C7){C8=C9.getSelectedObjectColorByInfo();}else{C8=C9.getSelectedObjectLowestLevel(true);}for(DB=0,DE=C8.length;DB<DE;DB++){var DC=DD[C8[DB].tid];if(DC===undefined){DD[C8[DB].tid]=[{id:C8[DB].eid}];}else{DC.push({id:C8[DB].eid});}}DD.hashKey=Bp(DD);return DD;}function A3(C7){return X.call(this,C7,true);}function Aa(C7){return X.call(this,C7,false);}function Bb(C9,C7){var C8,DA,DB=C9.length;for(C8=0;C8<DB;C8++){DA=C9[C8];if(DA.hashKey===C7.hashKey){return C8;}}return -1;}function Bx(C7){return C7===Ab.GM_SHAPE||C7===Ab.MARKER;}function CQ(C7){return C7===Ab.GM_ROW_HEADER||C7===Ab.GM_ROW_HEADER_TITLE||C7===Ab.GM_ROW_HEADER_EXTRA;}function Bu(C7){return C7===Ab.GM_ROW_HEADER_TITLE;}function CA(C7){return C7===Ab.GM_ROW_HEADER||C7===Ab.GM_ROW_HEADER_EXTRA;}function A2(C7){return C7===Ab.GM_COL_HEADER||C7===Ab.GM_COL_HEADER_TITLE||C7===Ab.GM_COL_HEADER_EXTRA;}function R(C7){return C7===Ab.GM_COL_HEADER_TITLE;}function Ap(C7){return C7===Ab.GM_COL_HEADER||C7===Ab.GM_COL_HEADER_EXTRA;}function h(C7){return C7===Ab.GM_H_MATRIX_LINE||C7===Ab.GM_V_MATRIX_LINE||C7===Ab.GM_H_CHART_LINE||C7===Ab.GM_V_CHART_LINE;}function Cg(C7){return C7===Ab.GM_V_MATRIX_LINE||C7===Ab.GM_V_CHART_LINE;}function B9(C7){return C7===Ab.GM_H_MATRIX_LINE||C7===Ab.GM_H_CHART_LINE;}function t(C7){return C7===Ab.GM_YAXIS_LINE||C7===Ab.GM_XAXIS_LINE||C7===Ab.GM_YAXIS2_LINE||C7===Ab.GM_XAXIS2_LINE;}function B0(C7){return C7===Ab.GM_ORIGIN_LINE;}function BM(C7){return C7===Ab.GM_ORIGIN_LABEL_V||C7===Ab.GM_ORIGIN_LABEL_H;}function BA(C7){return C7===Ab.GM_XAXIS_LINE||C7===Ab.GM_XAXIS2_LINE;}function CW(C7){return C7===Ab.GM_YAXIS_LINE||C7===Ab.GM_YAXIS2_LINE;}function M(C7){return C7===Ab.GM_XLABEL||C7===Ab.GM_YLABEL;}function BN(C7){return C7===Ab.GM_X_NUMERIC||C7===Ab.GM_Y_NUMERIC;}function AY(C7){return C7===Ab.GM_X_NUMERIC||C7===Ab.GM_X_CATEGORY||C7===Ab.GM_Y_NUMERIC||C7===Ab.GM_Y_CATEGORY;}function Ao(C7){return C7===Ab.GM_H_GRID_LINE||C7===Ab.GM_V_GRID_LINE||C7===Ab.GM_H_MINOR_GRID_LINE||C7===Ab.GM_V_MINOR_GRID_LINE;}function BI(C7){return C7===Ab.GM_H_GRID_LINE||C7===Ab.GM_V_GRID_LINE;}function H(C7){return C7===Ab.GM_H_MINOR_GRID_LINE||C7===Ab.GM_V_MINOR_GRID_LINE;}function Ay(C7){return C7===Ab.GM_DATA_LABEL;}function N(C8){if(C8.constructor!==Array){C8=[C8];}var C9=this.selectedTargets||[],C7=false;C9.forEach(function(DB){var DA=DB.getAttribute("type");if(C8.indexOf(DA)>-1){C7=true;}});return C7;}function AZ(DB){var C7,DE,C9,DD=DB.getAttribute("type"),DA,DC,C8,DF=false;if(DD===null&&DB.innerHTML==="|"&&DB.className==="gm-text-body-nowrap"){DD=Ab.GM_SVG_Y_NUMERIC;}if(DD===null){DB=DB.parentNode;DD=DB.getAttribute("type");}if(DD===Ab.LINE_CONTAINER){DB=DB.firstChild;DD=DB.getAttribute("type");}if(DD===Ab.GM_AXIS_TEXT||DD===Ab.GM_AXIS_WORD){DB=F(DB);DD=DB&&DB.getAttribute("type");}if(DD===Ab.GM_TEXT_BODY){C7=DB.parentNode;DE=C7.getAttribute("type");switch(DE){case Ab.GM_ROW_HEADER_TITLE:case Ab.GM_COL_HEADER_TITLE:case Ab.GM_COL_HEADER:case Ab.GM_ROW_HEADER:case Ab.GM_COL_HEADER_EXTRA:case Ab.GM_ROW_HEADER_EXTRA:case Ab.GM_YLABEL:case Ab.GM_XLABEL:C9=C7;break;}}else{switch(DD){case Ab.GM_YLABEL:case Ab.GM_XLABEL:case Ab.GM_SVG_Y_NUMERIC:case Ab.GM_SVG_X_NUMERIC:case Ab.GM_SVG_X_CATEGORY:case Ab.GM_SVG_Y_CATEGORY:C9=DB.parentNode.parentNode;break;case Ab.GM_Y_NUMERIC:case Ab.GM_X_NUMERIC:case Ab.GM_X_CATEGORY:case Ab.GM_Y_CATEGORY:case Ab.GM_COL_HEADER:case Ab.GM_ROW_HEADER:case Ab.GM_SHAPE:case Ab.GM_SET_SHAPE:case Ab.LASSO_SELECTOR:case Ab.LASSO_RESIZER:case Ab.GM_SVG_CHART:C9=DB;break;case Ab.GM_TREND_LINE:case Ab.GM_REF_LINE:DA=DB.getAttribute("hover-catcher");if(DA!==undefined&&DA!==null&&DA==="1"){DC=DB.previousElementSibling;if(DC!==null){C8=DC.getAttribute("hover-catcher");if(C8!==undefined&&C8!==null&&C8==="0"&&DC.identity===DB.identity){DF=true;}}}if(DF){C9=DC;}else{C9=DB;}break;case Ab.GM_MARKER:C9=DB.source;break;default:break;}}return C9;}function A9(DA,C8,C7,C9){var DD=parseInt(DA.getAttribute("row"),10),DB=parseInt(DA.getAttribute("rowSpan"),10),DC=parseInt(DA.getAttribute("depth"),10);C9.toggleClsByRows(DD,DD+DB-1,DC,C8,C7);}function a(DB,C8,C7,DA){var C9=parseInt(DB.getAttribute("col"),10),DC=parseInt(DB.getAttribute("colSpan"),10),DD=parseInt(DB.getAttribute("depth"),10);DA.toggleClsByCols(C9,C9+DC-1,DD,C8,C7);}function Bd(C9){var DJ=[C6.ROW_VAVLUE_TEXT_FONT_COLOR,C6.ROW_VAVLUE_TEXT_FONT_SIZE,C6.ROW_VAVLUE_TEXT_FONT_FAMILY,C6.ROW_VAVLUE_TEXT_FONT_STYLE],DC=[C6.ROW_TEXT_TEXT_FONT_COLOR,C6.ROW_TEXT_TEXT_FONT_SIZE,C6.ROW_TEXT_TEXT_FONT_FAMILY,C6.ROW_TEXT_TEXT_FONT_STYLE],DH=[C6.ROW_HEADER_TEXT_FONT_COLOR,C6.ROW_HEADER_TEXT_FONT_SIZE,C6.ROW_HEADER_TEXT_FONT_FAMILY,C6.ROW_HEADER_TEXT_FONT_STYLE],C8=[C6.ROW_HEADER_FILL_COLOR,C6.ROW_HEADER_FILL_TRANSPARENCY],DG=[C6.COLUMN_VAVLUE_TEXT_FONT_COLOR,C6.COLUMN_VAVLUE_TEXT_FONT_SIZE,C6.COLUMN_VAVLUE_TEXT_FONT_FAMILY,C6.COLUMN_VAVLUE_TEXT_FONT_STYLE],DQ=[C6.COLUMN_TEXT_TEXT_FONT_COLOR,C6.COLUMN_TEXT_TEXT_FONT_SIZE,C6.COLUMN_TEXT_TEXT_FONT_FAMILY,C6.COLUMN_TEXT_TEXT_FONT_STYLE],DM=[C6.COLUMN_HEADER_TEXT_FONT_COLOR,C6.COLUMN_HEADER_TEXT_FONT_SIZE,C6.COLUMN_HEADER_TEXT_FONT_FAMILY,C6.COLUMN_HEADER_TEXT_FONT_STYLE],DR=[C6.COLUMN_HEADER_FILL_COLOR,C6.COLUMN_HEADER_FILL_TRANSPARENCY],DS="rwTxtTxt",DE="rwVlTxt",DO="rwHdrTxt",DN="colTxtTxt",DB="colVlTxt",DD="colHdrTxt",DF,DK,DP,C7,DA=this.widget,DI,DL=(DA.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);switch(C9){case Ab.GM_ROW_HEADER_TITLE:DI=C6.ROW_HEADER_SHOW;DF=N.call(this,Ab.GM_ROW_HEADER);DK=DF?DS:DO;DP=DF?DC:DH;C7=C8;break;case Ab.GM_COL_HEADER_TITLE:DI=C6.COLUMN_HEADER_SHOW;DF=N.call(this,Ab.GM_COL_HEADER);DK=DF?DN:DD;DP=DF?DQ:DM;C7=DR;break;case Ab.GM_ROW_HEADER:case Ab.GM_ROW_HEADER_EXTRA:DI=C6.ROW_VALUES_SHOW;DF=N.call(this,Ab.GM_ROW_HEADER_TITLE);DK=DF?DS:DE;DP=DF?DC:DJ;C7=C8;break;case Ab.GM_COL_HEADER:case Ab.GM_COL_HEADER_EXTRA:DI=C6.COLUMN_VALUES_SHOW;DF=N.call(this,Ab.GM_COL_HEADER_TITLE);DK=DF?DN:DB;DP=DF?DQ:DG;C7=DR;break;}if(DL){if(DA.readGlobalProperty(DI)){return K(this.widget,DK,DP,B1.GLOBAL);}return Aj(this.widget,mstrmojo.desc(2885,"Fill"),C7,B1.GLOBAL);}return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxFontAndFill",children:[CJ(mstrmojo.desc(3433,"Font"),BB(DA,DK,DP,B1.GLOBAL,undefined,false),false,"mstrmojo-ui-rowContainer"),C5(DA,mstrmojo.desc(2885,"Fill"),C7,B1.GLOBAL)]}]});}function j(C8,C7){return(C7>=0)&&(C7<=C8);}function AR(C8){var C7;if(C8.textContent&&typeof (C8.textContent)!==undefined){C7=C8.textContent;}else{C7=C8.innerText;}return C7;}function CT(C7){return C7.outerHTML||new XMLSerializer().serializeToString(C7);}function Cb(C7,DB){var C9=this.selectedTargets,DA=this.selType;if(C9.length>1&&M(DA)&&BN(DB)){for(var C8=0;C8<C9.length;C8++){if(C9[C8].parentNode.parentNode===C7){return true;}}}return false;}function AE(C9){var DB=C9.parentNode.children||[],C7=DB.length,C8;for(var DA=0;DA<C7;DA++){C8=DB[DA].getAttribute("status");if(C8===s.SELECTED){return false;}}return true;}function Z(DB){var C9=this.selectedTargets||[],C7=C9.length,DD=DB.selectionInfo,DC=DD&&DD.mid;for(var C8=0;C8<C7;C8++){var DA=C9[C8].selectionInfo;if(DA&&DA.mid===DC){this.deselectTarget(C9[C8]);B3.removeClass(C9[C8],"like-normal");if(AE(C9[C8])){B3.removeClass(C9[C8].parentNode.parentNode,"like-selected");this.clearSingleSelectedMarker(C9[C8].parentNode.parentNode);}break;}}}function As(C8){if(!C8){return ;}if(C8.tagName==="polyline"){var DC=C8.parentNode,DA=DC&&DC.childNodes,C7,C9,DB=DA?DA.length:0;for(C9=0;C9<DB;C9++){C7=DA[C9];if(C7.tagName==="polygon"){return true;}}}return false;}function Bq(C8,C7){return Ci.getGroupAndCalculationContextMenuForDataPoints(C8,{selection:C7,fnCellName:function(C9){return C9.innerText||C9.textContent;},fnUnique:function(DB){var DE=[],DD=C8.GMController,DC=DD.dz.Rows.TemplateUnit||[],DA=DD.dz.Columns.TemplateUnit||[],C9=DC.concat(DA);DB.forEach(function(DF){DF.identity.objectInfo.forEach(function(DG){if(CZ.find(C9,"id",DG.tid)===-1){DE=DE.filter(function(DH){return DH.tid!==DG.tid||DH.eid!==DG.eid;});DE.push(DG);}});});return DE;},fnMakeNode:function(C9){return{identity:C9,innerText:C9.v};}});}function x(C7){return C7&&C7.parentNode&&C7.parentNode.childNodes[0];}function AI(C9,DA,C8,C7){DA.addMenuItem(mstrmojo.desc(1388,"Rename"),"xt",function(){var DB=Cv.renameItem(C8,C7,function(DF){var DD=C9.zonesModel.gmZones,DC=DF.text.trim(),DE=function(DG,DH){return{act:"updateTemplate",keyContext:DG.k,partialRetrieval:{nodes:[DG.k]},actions:DH};};DD.submitDropZoneUpdates(DE(C9,[{act:"renameUnit",id:C7.did,type:C7.t,name:DC,isDynamicAlias:false}]));},{allowEmptyText:true});C9.addDisposable(DB);});}mstrmojo.gm.GMInteractivity=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.ui._CanDropFromSchema],{scriptClass:"mstrmojo.gm.GMInteractivity",widget:null,highlightedRows:[],highlightedCols:[],selectedShapes:[],contextMenuSelection:[],selectedPolyShapes:[],contextMenuSelectedTargets:[],selectedTargets:[],selectedMarkerLines:[],selectedBorderLines:[],hoveredShape:undefined,hoveredSetShape:undefined,hoveredTargetArr:undefined,gmMenuOnCloseFlag:false,tooltipShape:undefined,domWidget:undefined,fmtState:Bj.NORMAL,init:function(C7){this.widget=null;this.highlightedRows=[];this.highlightedCols=[];this.selectedShapes=[];this.selectedTargets=[];this.contextMenuSelection=[];this.contextMenuSelectedTargets=[];this.selectedMarkerLines=[];this.selectedBorderLines=[];this.hoveredShape=undefined;this.hoveredSetShape=undefined;this.hoveredTargetArr=[];this.tooltipShape=undefined;this.domWidget=undefined;this.gmMenuOnCloseFlag=false;this.colorByRules=[];this.colorByShapes=[];this.breakByRules=[];this.breakByShapes=[];this.fmtSelections={};if(this._super){this._super(C7);}var C8=document.createElement("div");C8.setAttribute("type",Ab.GM_HIGHLIGHT_BOX);C8.setAttribute("class","gm-highlight-box");this.domHLBox=C8;C8=document.createElement("div");C8.setAttribute("class","gm-menu-placeholder");this.domMenuPH=C8;C8=document.createElement("div");C8.setAttribute("class","gm-menu-placeholder");this.domToolbarPH=C8;if(!Az){Az=new W.VisTooltip({placeholder:document.body.appendChild(document.createElement("div"))});Az.render();Az.toggle(false);Az.domNode.style.pointerEvents="none";}},destroy:function e(C7){delete this.domWidget;this._super(C7);},clearAll:function(){this.highlightedRows.length=0;this.highlightedCols.length=0;this.selectedShapes.length=0;this.contextMenuSelection.length=0;this.selectedPolyShapes.length=0;this.selectedTargets.length=0;this.contextMenuSelectedTargets.length=0;this.selectedMarkerLines.length=0;this.selectedBorderLines.length=0;this.hoveredTargetArr.length=0;this.hoveredShape=undefined;this.hoveredSetShape=undefined;this.hideTooltip();},getColorByIdentities:function(){var C7,C8=this.colorByShapes,DA=C8.length,C9=[];for(C7=0;C7<DA;C7++){C9.push(C8[C7].identity);}return C9;},getBreakByIdentities:function(){var C7,C8=this.breakByShapes,DA=C8.length,C9=[];for(C7=0;C7<DA;C7++){C9.push(C8[C7].identity);}return C9;},getIdentities:function(){var C7,C8=this.selectedShapes,DA=C8.length,C9=[];for(C7=0;C7<DA;C7++){C9.push(C8[C7].identity);}return C9;},hoverShape:function(C7){var C8=C7.parentNode.getElementsByClassName?C7.parentNode.getElementsByClassName("gm-marker-scircle"):document.getElementsByClassName("gm-marker-scircle");if(this.hoveredShape===C7||Cc(C7)){CZ.forEach(C8,function(C9){if(Cc(C7)&&C9.getAttribute("cx")===C7.getAttribute("cx")&&C9.getAttribute("cy")===C7.getAttribute("cy")){BD(C9,s.HOVER);}});return ;}CZ.forEach(C8,function(C9){BD(C9,s.NORMAL);});this.clearHoveredShape();Ca(C7,s.HOVER);this.hoveredShape=C7;},hoverOverSelectedShape:function(C7){if(Cc(C7)&&C7.getAttribute("subtype")===BH.BAR&&C7.getAttribute("size")==="small"){this.clearHoveredShape();Ca(C7,s.HOVER);C7.sh=true;this.hoveredShape=C7;}},clearHoveredShape:function(){var C8=this.hoveredShape;if(C8&&C8.sh){var DA=this.selectedShapes||[],C7=this.contextMenuSelection||[],C9=DA.indexOf(C8)!==-1,DB=C7.indexOf(C8)!==-1;if(C9&&DB){Ca(C8,s.MultiSelected);}else{if(!C9&&DB){Ca(C8,s.RMSelected);}else{Ca(C8,s.SELECTED);}}this.hoveredShape=undefined;delete C8.sh;}else{if(C8){Ca(C8,s.NORMAL);this.hoveredShape=undefined;}}},getTargetsWithSameTypeForDBL:function(DB){var C9=this.fmtMode,C8=[],DA=DB.getAttribute("type");if(C9){var C7=[[Ab.GM_XAXIS_LINE,Ab.GM_XAXIS2_LINE],[Ab.GM_YAXIS_LINE,Ab.GM_YAXIS2_LINE],[Ab.GM_X_NUMERIC,Ab.GM_X_CATEGORY,Ab.GM_ORIGIN_LABEL_V],[Ab.GM_Y_NUMERIC,Ab.GM_Y_CATEGORY,Ab.GM_ORIGIN_LABEL_H],[Ab.GM_H_CHART_LINE,Ab.GM_H_MATRIX_LINE],[Ab.GM_V_CHART_LINE,Ab.GM_V_MATRIX_LINE],[Ab.GM_H_GRID_LINE,Ab.GM_V_GRID_LINE],[Ab.GM_H_MINOR_GRID_LINE,Ab.GM_V_MINOR_GRID_LINE],[Ab.GM_ORIGIN_LINE],[Ab.GM_ROW_HEADER,Ab.GM_ROW_HEADER_EXTRA],[Ab.GM_ROW_HEADER_TITLE],[Ab.GM_COL_HEADER,Ab.GM_COL_HEADER_EXTRA],[Ab.GM_COL_HEADER_TITLE],[Ab.GM_TREND_LINE],[Ab.GM_REF_LINE]];CZ.forEach(C7,function(DC){if(DC.indexOf(DA)!==-1){if(AA(DA)||Bm(DA)){var DD=[DB.identity.tlOpt.key];C8=CG(this.widget.domNode,"key",DD,true);}else{C8=CG(this.widget.domNode,"type",DC);}return false;}},this);if(C8.length===0){C8=CG(this.widget.domNode,"type",DA);}}else{C8=CG(this.widget.domNode,"type",DA);}return C8;},getTargetsWithSameType:function(DC,DB){var C9=this.fmtMode,C8=[],DA=DC.getAttribute("type");if(AA(DA)||Bm(DA)){if(!DB){var DD=[DC.identity.tlOpt.key];C8=CG(this.widget.domNode,"key",DD,true);if(C8.length===0){C8.push(DC);}}else{C8.push(DC);}}else{if(C9){var C7=[[Ab.GM_YAXIS_LINE,Ab.GM_YAXIS2_LINE],[Ab.GM_XAXIS_LINE,Ab.GM_XAXIS2_LINE],[Ab.GM_XLABEL],[Ab.GM_YLABEL],[Ab.GM_Y_NUMERIC,Ab.GM_Y_CATEGORY,Ab.GM_ORIGIN_LABEL_H],[Ab.GM_X_NUMERIC,Ab.GM_X_CATEGORY,Ab.GM_ORIGIN_LABEL_V],[Ab.GM_V_CHART_LINE,Ab.GM_H_CHART_LINE,Ab.GM_V_MATRIX_LINE,Ab.GM_H_MATRIX_LINE],[Ab.GM_H_GRID_LINE,Ab.GM_V_GRID_LINE,Ab.GM_H_MINOR_GRID_LINE,Ab.GM_V_MINOR_GRID_LINE],[Ab.GM_ROW_HEADER,Ab.GM_ROW_HEADER_TITLE,Ab.GM_ROW_HEADER_EXTRA,Ab.GM_DUMMY_A],[Ab.GM_COL_HEADER,Ab.GM_COL_HEADER_TITLE,Ab.GM_COL_HEADER_EXTRA],[Ab.GM_DATA_LABEL],[Ab.GM_ORIGIN_LINE]];CZ.forEach(C7,function(DE){if(DE.indexOf(DA)!==-1){C8=CG(this.widget.domNode,"type",DE);return false;}},this);if(C8.length===0){C8.push(DC);}}else{C8.push(DC);}}return C8;},getMainContainer:function(C9){var C8=document.getElementsByClassName("gm-main-container"),C7=C8[0];CZ.forEach(C8,function(DA){if(C9&&C9.parentNode&&C9.parentNode.parentNode&&C9.parentNode.parentNode.parentNode&&C9.parentNode.parentNode.parentNode.parentNode&&C9.parentNode.parentNode.parentNode.parentNode.parentNode===DA){C7=DA;return false;}});return C7;},selectBorders:function(DD){var DA=this.fmtMode,DE=DD.getAttribute("type"),DH=this.getMainContainer(DD),C7=BR.position(DD),DI=BR.position(DH),C8=this.contextMenuSelectedTargets||[],DG=C8.indexOf(DD)!==-1,DC=DG?2:1,DF={},C9,DB=[];if(DA){return ;}DF.x=C7.x-DI.x;DF.y=C7.y-DI.y;if(DE===Ab.GM_ROW_HEADER){DF.h=C7.h;DF.w=DI.w-DF.x;}else{if(DE===Ab.GM_COL_HEADER){DF.w=C7.w;DF.h=DI.h-DF.y;}}C9=this.getLineDiv("border-line",DF.x,DF.y,DF.w,DC);DH.appendChild(C9);DB.push(C9);C9=this.getLineDiv("border-line",DF.x,DF.y,DC,DF.h);DH.appendChild(C9);DB.push(C9);C9=this.getLineDiv("border-line",DF.x+DF.w,DF.y,DC,DF.h);DH.appendChild(C9);DB.push(C9);C9=this.getLineDiv("border-line",DF.x,DF.y+DF.h,DF.w,DC);DH.appendChild(C9);DB.push(C9);this.selectedBorderLines.push({target:DD,borderLineArray:DB});},clearSelectedBorders:function(){CZ.forEach(this.selectedBorderLines,function(C7){CZ.forEach(C7.borderLineArray,function(C8){if(C8.parentNode){C8.parentNode.removeChild(C8);}});});this.selectedBorderLines=[];},deselectBorders:function(DA){var C8,C7=[];var C9=function(DB){DB.parentNode.removeChild(DB);};for(C8=0;C8<this.selectedBorderLines.length;C8++){if(this.selectedBorderLines[C8].target===DA){CZ.forEach(this.selectedBorderLines[C8].borderLineArray,C9);}else{C7.push(this.selectedBorderLines[C8]);}}this.selectedBorderLines=C7;},updateSelectedBroders:function(){var C7=this;this.clearSelectedBorders();CZ.forEach(this.selectedTargets||[],function(C9){var C8=C9.getAttribute("type");if(C8===Ab.GM_ROW_HEADER||C8===Ab.GM_COL_HEADER){C7.selectBorders(C9);}});},getLineDiv:function(C9,C8,DA,C7,DB){var DC=document.createElement("div");DC.setAttribute("class",C9);DC.style.zIndex="1000";DC.style.position="absolute";DC.style.display="block";DC.style.backgroundColor="#34abeb";DC.style.left=C8+"px";DC.style.top=DA+"px";DC.style.width=C7+"px";DC.style.height=DB+"px";return DC;},selectMarkers:function(DB){var DC=DB.getAttribute("type"),DF=this.getMainContainer(DB),C8=BR.position(DB),DI=BR.position(DF),DA,DE,C7,DH,DD,C9,DG;if(DC===Ab.GM_X_NUMERIC||DC===Ab.GM_X_CATEGORY){DA=C8.x-DI.x;if(DB.getAttribute("isPrimary")==="true"){DE=C8.y-DI.y-1;}else{DE=C8.y-DI.y+C8.h;}DH=1;C7=C8.w;}else{if(DC===Ab.GM_Y_NUMERIC||DC===Ab.GM_Y_CATEGORY){DE=C8.y-DI.y;if(DB.getAttribute("isPrimary")==="true"){DA=C8.x-DI.x+C8.w;}else{DA=C8.x-DI.x-1;}DH=C8.h;C7=1;}}DD=this.getLineDiv("marker-line",DA,DE,C7,DH);C9=DB.getAttribute("row")+"."+DB.getAttribute("col");DG=CZ.find(this.selectedMarkerLines,"key",C9);if(DG===-1){DF.appendChild(DD);this.selectedMarkerLines.push({key:C9,line:DD});}},clearSelectedMarkers:function(){CZ.forEach(this.selectedMarkerLines,function(C8){var C7=C8.line;C7.parentNode.removeChild(C7);});this.selectedMarkerLines=[];},clearSingleSelectedMarker:function(DB){var C8,DA,C7,C9=DB.getAttribute("type");if(BN(C9)){C8=DB.getAttribute("row")+"."+DB.getAttribute("col");C7=CZ.find(this.selectedMarkerLines,"key",C8);if(C7!==-1){DA=this.selectedMarkerLines[C7].line;DA.parentNode.removeChild(DA);this.selectedMarkerLines.splice(C7,1);}}},selectTarget:function(DA){var C7=this,DB=false,C9=C7.widget,C8=C9&&C9.parent;this.selectedTargets=this.selectedTargets?this.selectedTargets:[];if(DA&&DA.length>0&&Cc(DA[0])){return ;}if(Bi(DA,this.hoveredTargetArr)){this.clearHoveredTarget();}CZ.forEach(DA||[],function(DI){this.selectedTargets.push(DI);BD(DI,s.SELECTED);if(AA(DI.getAttribute("type"))||Bm(DI.getAttribute("type"))){Bf.call(this.widget,DI);}var DG=DI.getAttribute("type"),DD=DI.identity,DH=this.widget,DF=DH.manager,DE=this.fmtMode;if(DE){var DC=DH.domMainContainer;if(Cg(DG)){B3.addClass(DC,"select-ml-v");}if(B9(DG)){B3.addClass(DC,"select-ml-h");}if(BA(DG)){B3.addClass(DC,"select-al-x");}if(CW(DG)){B3.addClass(DC,"select-al-y");}if(BI(DG)){B3.addClass(DC,"select-gl-major");}if(H(DG)){B3.addClass(DC,"select-gl-minor");}if(Bu(DG)){B3.addClass(DC,"select-rh-header");}if(CA(DG)||(DG===Ab.GM_DUMMY_A)){B3.addClass(DC,"select-rh-value");}if(R(DG)){B3.addClass(DC,"select-ch-header");}if(Ap(DG)){B3.addClass(DC,"select-ch-value");}}else{if(DG===Ab.GM_ROW_HEADER){A9(DI,true,"selected",DF);C7.selectBorders(DI);DH.addAttributeSelection(DD.tid,DD.eid,DD.v);DB=true;}if(DG===Ab.GM_COL_HEADER){a(DI,true,"selected",DF);C7.selectBorders(DI);DH.addAttributeSelection(DD.tid,DD.eid,DD.v);DB=true;}if(DG===Ab.GM_YLABEL||DG===Ab.GM_XLABEL){B3.addClass(DI,"like-normal");B3.addClass(DI.parentNode.parentNode,"like-selected");C7.selectMarkers(DI.parentNode.parentNode);}}if(DG===Ab.GM_X_NUMERIC||DG===Ab.GM_Y_NUMERIC||DG===Ab.GM_X_CATEGORY||DG===Ab.GM_Y_CATEGORY){B3.addClass(DI,"with-text");C7.selectMarkers(DI);}},this);C9.displayVizBoxVisFilterIndicator(DB,C8);},RMSelectTarget:function(DB){var C8=this,DC=false,C7,DA=C8.widget,C9=DA&&DA.parent;this.clearContextMenuSelectedShapes();this.selectedTargets=this.selectedTargets?this.selectedTargets:[];CZ.forEach(DB||[],function(DK){this.contextMenuSelectedTargets.push(DK);C7=this.selectedTargets.indexOf(DK)!==-1;var DH=C7?"MultiSelected":"RMSelected";if(C7){BD(DK,s.MultiSelected);}else{BD(DK,s.RMSelected);}if(AA(DK.getAttribute("type"))||Bm(DK.getAttribute("type"))){Bf.call(this.widget,DK);}var DI=DK.getAttribute("type"),DE=DK.identity,DJ=this.widget,DG=DJ.manager,DF=this.fmtMode;if(DF){var DD=DJ.domMainContainer;if(Cg(DI)){B3.addClass(DD,"select-ml-v");}if(B9(DI)){B3.addClass(DD,"select-ml-h");}if(BA(DI)){B3.addClass(DD,"select-al-x");}if(CW(DI)){B3.addClass(DD,"select-al-y");}if(BI(DI)){B3.addClass(DD,"select-gl-major");}if(H(DI)){B3.addClass(DD,"select-gl-minor");}if(Bu(DI)){B3.addClass(DD,"select-rh-header");}if(CA(DI)||(DI===Ab.GM_DUMMY_A)){B3.addClass(DD,"select-rh-value");}if(R(DI)){B3.addClass(DD,"select-ch-header");}if(Ap(DI)){B3.addClass(DD,"select-ch-value");}}else{if(DI===Ab.GM_ROW_HEADER){if(C7){A9(DK,false,"selected",DG);}A9(DK,false,"hover",DG);A9(DK,true,DH,DG);C8.selectBorders(DK);DJ.addContextMenuAttributeSelection(DE.tid,DE.eid,DE.v,DE.tui,DE.o,DE.isRowAttribute?1:2);DC=true;}if(DI===Ab.GM_COL_HEADER){if(C7){a(DK,false,"selected",DG);}a(DK,false,"hover",DG);a(DK,true,DH,DG);C8.selectBorders(DK);DJ.addContextMenuAttributeSelection(DE.tid,DE.eid,DE.v,DE.tui,DE.o,DE.isRowAttribute?1:2);DC=true;}if(DI===Ab.GM_YLABEL||DI===Ab.GM_XLABEL){B3.addClass(DK,"like-normal");B3.addClass(DK.parentNode.parentNode,"like-selected");C8.selectMarkers(DK.parentNode.parentNode);}}if(DI===Ab.GM_X_NUMERIC||DI===Ab.GM_Y_NUMERIC||DI===Ab.GM_X_CATEGORY||DI===Ab.GM_Y_CATEGORY){B3.addClass(DK,"with-text");C8.selectMarkers(DK);}},this);DA.displayVizBoxVisFilterIndicator(DC,C9);},clearSelectedTargets:function(DB){var DA=this.widget,C7=DA.manager,C8=this.selectedTargets||[],C9=this;C8.forEach(function(DF){BD(DF,s.NORMAL);if(AA(DF.getAttribute("type"))||Bm(DF.getAttribute("type"))){AB(DF);}var DD=DF.identity,DE=DF.getAttribute("type"),DC=DA.domMainContainer;if(Cg(DE)){B3.removeClass(DC,"select-ml-v");}if(B9(DE)){B3.removeClass(DC,"select-ml-h");}if(BA(DE)){B3.removeClass(DC,"select-al-x");}if(CW(DE)){B3.removeClass(DC,"select-al-y");}if(BI(DE)){B3.removeClass(DC,"select-gl-major");}if(H(DE)){B3.removeClass(DC,"select-gl-minor");}if(Bu(DE)){B3.removeClass(DC,"select-rh-header");}if(CA(DE)||(DE===Ab.GM_DUMMY_A)){B3.removeClass(DC,"select-rh-value");}if(R(DE)){B3.removeClass(DC,"select-ch-header");}if(Ap(DE)){B3.removeClass(DC,"select-ch-value");}if(DE===Ab.GM_ROW_HEADER){A9(DF,false,"selected",C7);A9(DF,false,"sh",C7);DA.removeAttributeSelection(DD.tid,DD.eid);}if(DE===Ab.GM_COL_HEADER){a(DF,false,"selected",C7);a(DF,false,"sh",C7);DA.removeAttributeSelection(DD.tid,DD.eid);}if(DE===Ab.GM_YLABEL||DE===Ab.GM_XLABEL){B3.removeClass(DF,"like-normal");B3.removeClass(DF.parentNode.parentNode,"like-selected");C9.clearSelectedMarkers();}if(DE===Ab.GM_X_NUMERIC||DE===Ab.GM_Y_NUMERIC||DE===Ab.GM_X_CATEGORY||DE===Ab.GM_Y_CATEGORY){B3.removeClass(DF,"with-text");C9.clearSelectedMarkers();}});C9.clearSelectedBorders();if(!DB){DA.clearSelections();}this.selectedTargets=[];this.selType=undefined;},clearContextMenuSelectedTargets:function(){var DC=this.widget,C9=DC.manager,DA=this.selectedTargets||[],C7=this.contextMenuSelectedTargets||[],C8,DB=this;C7.forEach(function(DF){C8=DA.indexOf(DF)!==-1;C7.splice(C7.indexOf(DF),1);if(C8){BD(DF,s.SELECTED);}else{BD(DF,s.NORMAL);}if(AA(DF.getAttribute("type"))||Bm(DF.getAttribute("type"))){AB(DF);}var DE=DF.getAttribute("type"),DD=DC.domMainContainer;if(!C8){if(Cg(DE)){B3.removeClass(DD,"select-ml-v");}if(B9(DE)){B3.removeClass(DD,"select-ml-h");}if(BA(DE)){B3.removeClass(DD,"select-al-x");}if(CW(DE)){B3.removeClass(DD,"select-al-y");}if(BI(DE)){B3.removeClass(DD,"select-gl-major");}if(H(DE)){B3.removeClass(DD,"select-gl-minor");}if(Bu(DE)){B3.removeClass(DD,"select-rh-header");}if(CA(DE)||(DE===Ab.GM_DUMMY_A)){B3.removeClass(DD,"select-rh-value");}if(R(DE)){B3.removeClass(DD,"select-ch-header");}if(Ap(DE)){B3.removeClass(DD,"select-ch-value");}if(DE===Ab.GM_ROW_HEADER){A9(DF,false,"RMSelected",C9);A9(DF,false,"sh",C9);}if(DE===Ab.GM_COL_HEADER){a(DF,false,"RMSelected",C9);a(DF,false,"sh",C9);}if(DE===Ab.GM_YLABEL||DE===Ab.GM_XLABEL){B3.removeClass(DF,"like-normal");B3.removeClass(DF.parentNode.parentNode,"like-selected");DB.clearSelectedMarkers();}if(DE===Ab.GM_X_NUMERIC||DE===Ab.GM_Y_NUMERIC||DE===Ab.GM_X_CATEGORY||DE===Ab.GM_Y_CATEGORY){B3.removeClass(DF,"with-text");DB.clearSelectedMarkers();}DB.clearSelectedBorders();}else{if(DE===Ab.GM_ROW_HEADER){A9(DF,false,"MultiSelected",C9);A9(DF,false,"sh",C9);A9(DF,true,"selected",C9);}if(DE===Ab.GM_COL_HEADER){a(DF,false,"MultiSelected",C9);a(DF,false,"sh",C9);A9(DF,true,"selected",C9);}DB.clearSelectedBorders();DB.selectBorders(DF);}});this.contextMenuSelectedTargets=[];},clearMetricSelectorHighlight:function(){},hoverTarget:function(C7){this.clearHoveredTarget();if(!C7||C7.length===0){return ;}this.hoveredTargetArr=C7;CZ.forEach(C7||[],function(DC){if(!Cc(DC)){BD(DC,s.HOVER);if(AA(DC.getAttribute("type"))||Bm(DC.getAttribute("type"))){CU(DC);}var DA=DC.getAttribute("type"),DB=this.widget,C9=DB.manager,C8=this.fmtMode;if(C8){DB.toggleContainerCls(h(DA),"hover-ml");DB.toggleContainerCls(t(DA),"hover-al");DB.toggleContainerCls(Ao(DA),"hover-gl");DB.toggleContainerCls(CQ(DA)||(DA===Ab.GM_DUMMY_A),"hover-rh");DB.toggleContainerCls(A2(DA),"hover-ch");}else{if(DA===Ab.GM_ROW_HEADER){A9(DC,true,"hover",C9);}if(DA===Ab.GM_COL_HEADER){a(DC,true,"hover",C9);}if(DA===Ab.GM_YLABEL||DA===Ab.GM_XLABEL){B3.addClass(DC.parentNode.parentNode,"like-hover");}}}},this);},clearSHTargets:function(){var DB=this.widget,C8=DB.manager,C9=this.selectedTargets||[],DE=this.contextMenuSelectedTargets||[],C7=[],DF,DA,DC=this.fmtMode,DD=this;C9.forEach(function(DG){C7.push(DG);});DE.forEach(function(DG){if(C7.indexOf(DG)===-1){C7.push(DG);}});(C7||[]).forEach(function(DI){var DH=DI.getAttribute("type"),DG=C9.indexOf(DI)!==-1,DJ=DE.indexOf(DI)!==-1;if(DG&&DJ){DF=s.MultiSelected;DA="MultiSelected";}else{if(!DG&&DJ){DF=s.RMSelected;DA="RMSelected";}else{DF=s.SELECTED;DA="selected";}}if(!DC&&!DD.isToolbarShow()){if(DH===Ab.GM_ROW_HEADER){A9(DI,false,"sh",C8);A9(DI,false,"hover",C8);A9(DI,true,DA,C8);BD(DI,DF);}if(DH===Ab.GM_COL_HEADER){a(DI,false,"sh",C8);a(DI,false,"hover",C8);a(DI,true,DA,C8);BD(DI,DF);}}});},hoverSelectedTarget:function(C8){var C7;if(C8&&C8.length>0&&(!Cc(C8[0])||(C8[0].getAttribute("type")!==Ab.GM_ROW_HEADER&&C8[0].getAttribute("type")!==Ab.GM_COL_HEADER))){this.clearSHTargets();return ;}this.clearSHTargets();CZ.forEach(C8||[],function(DE){var DF=DE.getAttribute("type"),DC=this.widget,DA=DC.manager,DD=this.fmtMode,DB=this.selectedTargets||[],DH=this.contextMenuSelectedTargets||[],C9=DB.indexOf(DE)!==-1,DG=DH.indexOf(DE)!==-1;if(C9&&DG){C7="MultiSelected";}else{if(!C9&&DG){C7="RMSelected";}else{C7="selected";}}if(!DD){if(DF===Ab.GM_ROW_HEADER){A9(DE,false,C7,DA);A9(DE,false,"hover",DA);A9(DE,true,"sh",DA);BD(DE,s.SH);}if(DF===Ab.GM_COL_HEADER){a(DE,false,C7,DA);a(DE,false,"hover",DA);a(DE,true,"sh",DA);BD(DE,s.SH);}}},this);},clearHoveredTarget:function(){var C9=this.hoveredTargetArr;CZ.forEach(C9||[],function(DA){if(AA(DA.getAttribute("type"))||Bm(DA.getAttribute("type"))){BD(DA,s.NORMAL);CK(DA);}},this);var C8=this.selectedTargets||[];CZ.forEach(C8||[],function(DA){if(C9.indexOf(DA)!==-1){C9.splice(C9.indexOf(DA),1);}});var C7=this.contextMenuSelectedTargets||[];CZ.forEach(C7||[],function(DA){if(C9.indexOf(DA)!==-1){C9.splice(C9.indexOf(DA),1);}});CZ.forEach(C9||[],function(DE){BD(DE,s.NORMAL);var DC=DE.getAttribute("type"),DD=this.widget,DB=DD.manager,DA=this.fmtMode;if(DA){if(h(DC)){DD.toggleContainerCls(false,"hover-ml");}if(t(DC)){DD.toggleContainerCls(false,"hover-al");}if(Ao(DC)){DD.toggleContainerCls(false,"hover-gl");}if(CQ(DC)||(DC===Ab.GM_DUMMY_A)){DD.toggleContainerCls(false,"hover-rh");}if(A2(DC)){DD.toggleContainerCls(false,"hover-ch");}}else{if(DC===Ab.GM_ROW_HEADER){A9(DE,false,"hover",DB);}if(DC===Ab.GM_COL_HEADER){a(DE,false,"hover",DB);}if(DC===Ab.GM_YLABEL||DC===Ab.GM_XLABEL){B3.removeClass(DE.parentNode.parentNode,"like-hover");}}},this);this.hoveredTargetArr=[];},hoverSetShape:function(C7){var C8=this.hoveredSetShape;if(C8===C7){return ;}if(!As(C7)){Bh(C8,"hover");w(C7,"hover");}this.hoveredSetShape=C7;},clearHoveredSetShape:function(){var C7=this.hoveredSetShape;if(C7){Bh(C7,"hover");this.hoveredSetShape=undefined;}},selectShape:function(C8,DB,DC,C9){if(Cc(C8)){return ;}if(DC){this.widget.toggleShapeSelectionIndex(C8.identity,true);}if(!C9){CS.call(this,C8);}Ca(C8,s.SELECTED);this.selectedShapes.push(C8);if(C8===this.hoveredShape){this.hoveredShape=undefined;}var DA=F(C8),C7=DA.selectedShapes?DA.selectedShapes:(DA.selectedShapes=[]);C7.push(C8);if(!DB){o(F(C8),C8.getAttribute("subtype"));}},RMSelectShape:function(C7,DD){var C8=this.selectedShapes.indexOf(C7)!==-1,DE=this.widget,DA;this.contextMenuSelection.push(C7);if(C8){Ca(C7,s.MultiSelected);}else{Ca(C7,s.RMSelected);}DA=U.call(this,C7.identity);DE.addContextMenuMetricValueSelection(DA);if(C7===this.hoveredShape){this.hoveredShape=undefined;}var DC=F(C7),DB=DC.contextMenuSelection?DC.contextMenuSelection:(DC.contextMenuSelection=[]),C9;if(C8){for(C9=0;C9<DC.selectedShapes.length;C9++){DB.push(DC.selectedShapes[C9]);}}else{DB.push(C7);}if(!DD){DC.isSelected=C8;Al(F(C7),C7.getAttribute("subtype"));}DC.isSelected=false;},selectShapes:function(C7,DA){var DB,DH,C8=C7.length,DC=this.widget;var DG=DC.noReorderAfterShowData;for(DB=0;DB<C8;DB++){this.selectShape(C7[DB],true,DA,DG);DH=U.call(this,C7[DB].identity);DC.addMetricValueSelection(DH);}var DF=[],DE,C9;for(DB=0,C8=C7.length;DB<C8;DB++){DE=C7[DB];C9=F(DE);var DD=DE.getAttribute("subtype");if(DD===BH.PIE||DD===BH.RING||DD===BH.CIRCLE){if(DF.indexOf(C9)>-1){continue;}else{DF.push(C9);}}}for(DB=0,C8=DF.length;DB<C8;DB++){C9=DF[DB];o(C9,"pie");}},deselectShape:function(C9,DD){var DB,C8=this.selectedShapes,DE=C8.length;for(DB=0;DB<DE;DB++){if(C8[DB]===C9){Ca(C9,s.NORMAL);C8.splice(DB,1);}}this.widget.toggleShapeSelectionIndex(C9.identity,false);var DC=F(C9),C7=DC.selectedShapes,DA=C7.indexOf(C9);if(DA>-1){C7.splice(C7.indexOf(C9),1);}else{Ci.visPrint("THIS SHOULD NEVER HAPPEN");}if(!DD){o(F(C9),C9.getAttribute("subtype"));}},toggleSelectShape:function(C7){var C9=this.widget,C8=U.call(this,C7.identity);if(Cc(C7)){this.deselectShape(C7);C9.removeMetricValueSelection(C8);return false;}this.selectShape(C7,undefined,true);C9.addMetricValueSelection(C8);C9.GMController.resetHighLightIndex=true;this.doHighlight(A4.METRICS,C9.getSelectionHash());return true;},clearSelectedShapes:function(){var C8,C7,DA=this.selectedShapes,DE=DA.length,DB,DD,DC,C9;for(C8=0;C8<DE;C8++){C7=DA[C8];Ca(C7,s.NORMAL);C9=U.call(this,C7.identity);this.widget.removeMetricValueSelection(C9);DC=C7.getAttribute("subtype");if(DC===BH.PIE||DC===BH.RING||DC===BH.CIRCLE){DB=F(C7);DD=DB&&DB.selectedShapes;if(DB&&DD&&DD.length>0){DD.length=0;o(DB,DC);}}}DA.length=0;},clearContextMenuSelectedShapes:function(){var C9,C7,DA=this.contextMenuSelection,DE=DA.length,DB,DD,DC;for(C9=0;C9<DE;C9++){C7=DA[C9];var C8=this.selectedShapes.indexOf(C7)!==-1;if(C8){Ca(C7,s.SELECTED);}else{Ca(C7,s.NORMAL);}DC=C7.getAttribute("subtype");if(DC===BH.PIE||DC===BH.RING||DC===BH.CIRCLE){DB=F(C7);DD=DB&&DB.contextMenuSelection;if(DB&&DD&&DD.length>0){DD.length=0;Al(DB,DC);}}}DA.length=0;},clearSelectedPolyShapes:function(){var C8,C7,C9=this.selectedPolyShapes,DA=C9.length;for(C8=0;C8<DA;C8++){C7=C9[C8];Ca(C7,s.NORMAL);}C9.length=0;},clearSelectRules:function(){this.colorByRules.length=0;this.colorByShapes.length=0;this.breakByRules.length=0;this.breakByShapes.length=0;},getAreaPoint:function(DG,DF,DD,DC){var DL,C8,C9,C7,DJ,DN,DK,DE,DO=DF.dirc,DM=parseInt(DG.getAttribute("seriesID"),10),DH=F(DG),DP=DH.childNodes[DM+1],DB=DP.childNodes,DI=DB.length,DA=BR.position(DH,true);if(DO===1){C9=DC;DJ="cy";DK=DA.h;}else{C9=DD;DJ="cx";DK=DA.w;}for(DL=0;DL<DI;DL++){C8=DB[DL];C7=parseFloat(C8.getAttribute(DJ));DN=Math.abs(C7-C9);if(DN<DK){DK=DN;DE=C8;}}return DE;},mouseOnSetShape:function(DA,C7,DE,DB){var C9,DD=C7.dirc,C8=F(DA),DC=BR.position(C8,true),DG,DF;C9=this.getAreaPoint(DA,C7,DE,DB);if(C9&&C9!==this.hoveredShape){DG=parseFloat(C9.getAttribute("cx"));DF=parseFloat(C9.getAttribute("cy"));if(!j.call(this,DD===1?DC.w:DC.h,DD===1?DG:DF)){this.hideTooltip();this.clearHoveredShape();return ;}if(BR.isFF){DC.x=C8.parentNode.getBoundingClientRect().left;DC.y=C8.parentNode.getBoundingClientRect().top;}DE=DC.x+DG;DB=DC.y+DF;this.hoverShape(C9);this.showTooltip(C9,{x:DE,y:DB});}},clearSelectedCharts:function(){var DA,C7,DC=this.highlightedRows,DD=this.highlightedCols,C9=DC.length,DB=DD.length,C8=this.widget.manager;for(DA=0;DA<C9;DA++){C7=DC[DA];C8.toggleClsByRows(C7.start,C7.end,0,false,"selected");}for(DA=0;DA<DB;DA++){C7=DD[DA];C8.toggleClsByCols(C7.start,C7.end,0,false,"selected");}DC.length=0;DD.length=0;},showTooltip:function(C8,DA){Az.toggle(true);if(this.tooltipShape&&this.tooltipPos&&this.tooltipPos.x===DA.x&&this.tooltipPos.y===DA.y){return ;}if(C8===this.tooltipShape){Az.moveTo(DA.x,DA.y);return ;}var C9,C7=C8.identity;if(C7){C9=C7.getTooltipContent();if(C9){if(!Az.domNode.parentNode){B3.addClass(Az.domNode,["vis-tooltip-gm"]);document.body.appendChild(Az.domNode);}Az.displayInfo(C9,DA);this.tooltipShape=C8;this.tooltipPos=DA;}}},hideTooltip:function(){var C7=Az.domNode;if(C7&&C7.parentNode){C7.parentNode.removeChild(C7);this.tooltipShape=undefined;}},getToolbarConfig:function(DB,DF,C8){var DZ=DF?DF.identity:undefined,DT=DF.subType,DP,DW=this.widget&&this.widget.GMController;if(!C8){return DP;}switch(DB){case Ab.GM_ROW_HEADER_TITLE:case Ab.GM_COL_HEADER_TITLE:case Ab.GM_ROW_HEADER:case Ab.GM_COL_HEADER:case Ab.GM_COL_HEADER_EXTRA:case Ab.GM_ROW_HEADER_EXTRA:DP=Bd.call(this,DB);break;case Ab.GM_SVG_X_CATEGORY:case Ab.GM_X_CATEGORY:var DS=[C6.X_AXIS_LABELS_FONT_COLOR,C6.X_AXIS_LABELS_FONT_FAMILY,C6.X_AXIS_LABELS_FONT_STYLE,C6.X_AXIS_LABELS_FONT_SIZE];DP=K(this.widget,"xAxLb",DS,B1.GLOBAL,undefined,false);break;case Ab.GM_SVG_Y_CATEGORY:case Ab.GM_Y_CATEGORY:var DX=[C6.Y_AXIS_LABELS_FONT_COLOR,C6.Y_AXIS_LABELS_FONT_FAMILY,C6.Y_AXIS_LABELS_FONT_STYLE,C6.Y_AXIS_LABELS_FONT_SIZE];DP=K(this.widget,"yAxLb",DX,B1.GLOBAL,undefined,false);break;case Ab.LASSO_SELECTOR:DP=null;break;case Ab.GM_SHAPE:var DG=DZ.getShape(),DR=[C6.SHAPE_FILL_COLOR,C6.SHAPE_FILL_TRANSPARENCY],DY=[C6.SHAPE_LINE_COLOR,C6.SHAPE_LINE_COMBINED_STYLE],DC=[C6.SHAPE_BORDER_COLOR,C6.SHAPE_BORDER_COMBINED_STYLE],DO=this.widget.model.data.dz.ColorBy;if(DO.TemplateMetric&&!DO.MetricNames){DP=f(this.widget);break;}switch(DG){case Bo.TICK:DP=Ah(this.widget,mstrmojo.desc(3546,"Line"),DY,B1.FORMATTING);break;case Bo.LINE:if(DT===BH.SCIRCLE||DT===BH.SBAR){if(DW.hasSizeBy()){DP=CD(this.widget,DC,DR,B1.FORMATTING,DG);}else{DP=Ah(this.widget,mstrmojo.desc(3546,"Line"),DY,B1.FORMATTING);}}else{var C7=BW(this.widget,C6.SHAPE_LINE_COLOR,B1.FORMATTING);DP=A1(this.widget,C7,mstrmojo.desc(11970,"same as line color"));}break;case Bo.AREA:if(DT===BH.SCIRCLE){DP=CD(this.widget,DC,DR,B1.FORMATTING,DG);}else{var DD=BW(this.widget,C6.SHAPE_FILL_COLOR,B1.FORMATTING);DP=A1(this.widget,DD,mstrmojo.desc(11971,"same as area color"));}break;case Bo.BAR:case Bo.CIRCLE:case Bo.SQUARE:case Bo.PIE:case Bo.RING:DP=CD(this.widget,DC,DR,B1.FORMATTING,DG);break;default:DP=null;}break;case Ab.GM_DATA_LABEL:var DH=[C6.DATA_LABELS_FONT_FAMILY,C6.DATA_LABELS_FONT_SIZE,C6.DATA_LABELS_FONT_STYLE,C6.DATA_LABELS_FONT_COLOR];DP=K(this.widget,"dl",DH,B1.GLOBAL,undefined,false);break;case Ab.GM_SVG_X_NUMERIC:var DV=[C6.X_AXIS_LABELS_FONT_COLOR,C6.X_AXIS_LABELS_FONT_FAMILY,C6.X_AXIS_LABELS_FONT_STYLE,C6.X_AXIS_LABELS_FONT_SIZE];DP=K(this.widget,"xAxLb",DV,B1.GLOBAL);break;case Ab.GM_SVG_Y_NUMERIC:var DA=[C6.Y_AXIS_LABELS_FONT_COLOR,C6.Y_AXIS_LABELS_FONT_FAMILY,C6.Y_AXIS_LABELS_FONT_STYLE,C6.Y_AXIS_LABELS_FONT_SIZE];DP=K(this.widget,"yAxLb",DA,B1.GLOBAL);break;case Ab.GM_XLABEL:var DU=[C6.X_AXIS_TITLE_FONT_COLOR,C6.X_AXIS_TITLE_FONT_FAMILY,C6.X_AXIS_TITLE_FONT_STYLE,C6.X_AXIS_TITLE_FONT_SIZE];DP=K(this.widget,"xAxTt",DU,B1.GLOBAL,undefined,false);break;case Ab.GM_YLABEL:var DI=[C6.Y_AXIS_TITLE_FONT_COLOR,C6.Y_AXIS_TITLE_FONT_FAMILY,C6.Y_AXIS_TITLE_FONT_STYLE,C6.Y_AXIS_TITLE_FONT_SIZE];DP=K(this.widget,"yAxTt",DI,B1.GLOBAL,undefined,false);break;case Ab.GM_SVG_CHART:DP=Aj(this.widget,mstrmojo.desc(3905,"Background"),[C6.BG_COLOR],B1.GLOBAL,{width:"60px",visibleControls:mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS.FILL_COLOR,showNoFill:false,showGradient:false});break;case Ab.GM_TREND_LINE:var DM=[Ac.TREND_REF_LINE_COLOR,Ac.TREND_REF_LINE_COMBINED_STYLE];DP=Ah(this.widget,mstrmojo.desc(3546,"Line"),DM,B1.GLOBAL,{realPropName:Ac.TREND_LINE_DEF,opt:DZ.tlOpt});break;case Ab.GM_REF_LINE:var C9=[Ac.TREND_REF_LINE_COLOR,Ac.TREND_REF_LINE_COMBINED_STYLE];DP=Ah(this.widget,mstrmojo.desc(3546,"Line"),C9,B1.GLOBAL,{realPropName:Ac.REF_LINE_DEF,opt:DZ.tlOpt});break;case Ab.GM_XAXIS_LINE:case Ab.GM_XAXIS2_LINE:var DL=[C6.X_AXIS_LINE_COLOR,C6.X_AXIS_LINE_COMBINED_STYLE];DP=Ah(this.widget,mstrmojo.desc(3546,"Line"),DL,B1.GLOBAL);break;case Ab.GM_YAXIS_LINE:case Ab.GM_YAXIS2_LINE:var DQ=[C6.Y_AXIS_LINE_COLOR,C6.Y_AXIS_LINE_COMBINED_STYLE];DP=Ah(this.widget,mstrmojo.desc(3546,"Line"),DQ,B1.GLOBAL);break;case Ab.GM_V_MATRIX_LINE:case Ab.GM_V_CHART_LINE:case Ab.GM_H_MATRIX_LINE:case Ab.GM_H_CHART_LINE:var DJ=[C6.ALL_MATRIX_LINES_COLOR,C6.ALL_MATRIX_LINES_COMBINED_STYLE];DP=Ah(this.widget,mstrmojo.desc(3546,"Line"),DJ,B1.GLOBAL);break;case Ab.GM_H_GRID_LINE:case Ab.GM_V_GRID_LINE:case Ab.GM_H_MINOR_GRID_LINE:case Ab.GM_V_MINOR_GRID_LINE:DP=Ah(this.widget,mstrmojo.desc(11991,"Grid Lines"),[C6.ALL_GRID_LINES_COLOR,C6.ALL_GRID_LINES_COMBINED_STYLE],B1.GLOBAL,undefined,{showNoneOption:false});break;case Ab.GM_ORIGIN_LINE:var DE;DE=[C6.ALL_AXIS_ORIGIN_LINE_COLOR,C6.ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE];DP=Ah(this.widget,mstrmojo.desc(3546,"Line"),DE,B1.GLOBAL,undefined,{showNoneOption:false});break;case Ab.GM_X_NUMERIC:var DK=[C6.X_AXIS_LABELS_FONT_COLOR,C6.X_AXIS_LABELS_FONT_SIZE,C6.X_AXIS_LABELS_FONT_FAMILY,C6.X_AXIS_LABELS_FONT_STYLE,C6.X_AXIS_LABELS_ROTATION];DP=K(this.widget,"xAxLb",DK,B1.GLOBAL,undefined,false);break;case Ab.GM_Y_NUMERIC:var DN=[C6.Y_AXIS_LABELS_FONT_COLOR,C6.Y_AXIS_LABELS_FONT_SIZE,C6.Y_AXIS_LABELS_FONT_FAMILY,C6.Y_AXIS_LABELS_FONT_STYLE,C6.Y_AXIS_LABELS_ROTATION];DP=K(this.widget,"yAxLb",DN,B1.GLOBAL,undefined,false);break;default:DP=null;}return DP;},getMenuConfig:function(Dl,DP,Dr,Ds){var DV,C9,DW,D9,DT,Dx=this,De=Dr?Dr.selectionInfo:undefined,Dk=Dr?Dr.identity:undefined,EF=Dr.visGM,EA=EF.GMController,EG=EA.getChartInfo(),DQ=DP.length,Dz=new W.ui.menus.MenuConfig(),D8=mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation(),D6=EF&&EF.excludeData,DH,EC=function(EJ,EL){var EK=function(EP){var EN=(function(){var ER;CZ.forEach(EF.model.data.gts.row.concat(EF.model.data.gts.col),function(ES){if(ES.id&&ES.id===EP){ER=ES.dp;DH=ES;}});return ER;}()),EO=EF.model.docModel.datasets,EM=function(ER,EU){var ES=CZ.find(ER,"did",EU.id),ET=ER[ES];if(ET&&!ET.hide){EU.n=ET.n;return true;}return false;},EQ=CZ.filter(EN,function(ET){var ER;for(ER in EO){var ES=EO[ER];if(EM(ES.att,ET)){return true;}}return false;});if(EQ){DP=CZ.filter(DP,function(ES){for(var ER in EQ){if(EQ[ER].n===ES.n){ES.drillPath=EQ[ER];return true;}}return false;});DQ=DP.length;}else{DQ=0;}return DQ;},DZ=function(){var EM=new W.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});for(DV=0;DV<DQ;DV++){if(EL){EM.addMenuItem(DP[DV].n,"xt",EF.getMenuHandler("drill"),{drillUnit:DP[DV],fromUnit:Dk.objectInfo});}else{EM.addMenuItem(DP[DV].n,"xt",EF.getMenuHandler("headerDrill"),{drillUnit:DP[DV],fromUnit:{tid:Dk.tid,isRowAttribute:Dk.isRowAttribute}});}}return EM;},EI=function(){if(EL){Dz.addMenuItem(mstrmojo.desc(11698,"Drill to ##").replace("##",DP[0].n),"xt",EF.getMenuHandler("drill"),{drillUnit:DP[0],fromUnit:Dk.objectInfo});}else{Dz.addMenuItem(mstrmojo.desc(11698,"Drill to ##").replace("##",DP[0].n),"xt",EF.getMenuHandler("headerDrill"),{drillUnit:DP[0],fromUnit:{tid:Dk.tid,isRowAttribute:Dk.isRowAttribute}});}};DQ=EK(EJ);switch(DQ){case 0:Dz.addNonInteractiveMenuItem(mstrmojo.desc(145,"Drill"),"",true);break;case 1:EI();break;default:Dz.addSubMenuItem(mstrmojo.desc(145,"Drill"),"",Dx.id,DZ);}},Di=function(EI){var EJ=Dx.widget.zonesModel.gmZones,DZ=new W.ui.menus.MenuConfig();CZ.forEach(EI,function(EK){DZ.addEditorMenuItem(EK.n,EJ.id,function(){return Dx.getDisplayFormsMenu(EK);});});return DZ;},DL=function(){if(Dk&&mstrmojo.resolveFeature("set-attributeform-display")){var EN=Dk.attrIdArr,EK=Dx.widget.zonesModel.gmZones,EJ=Dx.widget.zonesModel.docModel.datasets,DZ=[],EI=[];if(EN&&EN.length>0){DZ=CZ.filter(EN,function(EO){return Cv.hasMultiForms(EO,EJ);});EI=DZ.map(function(EO){return B4(EK,EO);});if(EI.length>0){Dz.addEditorMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),EK.id,function(){return Di(EI);});}}else{var EM=Dk.tid,EL=B4(EK,EM);if(Cv.hasMultiForms(EL.did,EJ)){Dz.addEditorMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),EK.id,function(){return Dx.getDisplayFormsMenu(EL);});}}}},EE=function(){var EM=mstrmojo.gm.EnumSubtype,EI=EA.chartSubType,EP=EF.id;if(EG.isABL&&EI===EM.PERCENT){return ;}var EK=p.getAxisMetricsInfo(EF),EN=function(EQ){var ER=[];EK.forEach(function(ES){var ET=EF.getAvailableRefLineTypes(ES.did);if(ET.indexOf(EQ)!==-1){ER.push(ES.did);}});return ER;},EL=function(EQ,Ec,ES){var ER,EY,Ea,ET,Eb,EV,EW=true,EZ=[],EU=EF.getPartialUpdateFilterConfigForRefLine(),EX=[];EQ.forEach(function(Ed){EF.checkCustomScaleNotificationForReferenceLine(Ed);ER=EF.getReferenceOptionForMetricId(Ed);if(ER===undefined){return true;}EY=EF.getRealReferenceOptionFromAxisOption(ER,Ec,EV);Ea=EF.readGlobalProperty(Ac.REF_LINE_DEF,EY);if(Ec===By.EnumRefLineModelType.CONST){Ea.setProperty(Ac.REF_CONST_VALUE,D.parseNumeric(ES));}else{Ea.setProperty(Ac.REF_ENABLED,EW);}ET=EY.key.split(",")[0];if(EX[ET]){return true;}else{EX[ET]="record";}Eb=EF.processReferenceLine(Ac.REF_LINE_DEF,Ea,EY);EZ=EZ.concat(Eb.actions);});EF.submitUpdatesAndPersistXML(EZ,EF.getXTabRefreshCallBack(),undefined,false,false,EU);},EO=function(){var EQ=[];Object.keys(By.EnumRefLineModelType).forEach(function(ET){var ER=By.EnumRefLineModelType[ET],ES;ES=EN(ER);if(ES.length){EQ.push({refType:ER,metricIds:ES});}});return EQ;},EJ=function(ES){var EQ=ES.refLineCfg,ER=new W.ui.menus.MenuConfig();EQ.forEach(function(EU){var ET=EU.refType,EV=EU.metricIds;if(ET!==By.EnumRefLineModelType.CONST){ER.addMenuItem(BP[ET],"xt",function(){EL(EV,ET,0);});}else{ER.addEditorMenuItem(BP[ET],EP,function(){return new mstrmojo.ui.menus.EditorConfig({data:{constantValid:false},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:k.FLOAT,required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.NONE},onEnter:function(){this.blur();},onvalueChange:function(){this.validate();},onValid:function(){this.parent.data.set("constantValid",true);},onInvalid:function(){this.parent.data.set("constantValid",false);}}],bindings:{okEnabled:"this.data.constantValid"},fnOk:function(EX,EW){var EY=EW.constVal;if(EY.isValid()){EL(EV,ET,EY.value);}}});});}});return ER;};var DZ=EO();if(DZ.length>0){Dz.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",EP,EJ,{refLineCfg:DZ});}},Dq=function(EP,EQ){var EU=new W.ui.menus.MenuConfig();var EN=EF.zonesModel,EJ=EN.gmZones,EY=null,ES=[],EZ=(function(){var DZ,Ed,Ec;DZ=EJ.dropZones;for(Ed in DZ){if(DZ.hasOwnProperty(Ed)){ES=DZ[Ed].items;for(Ec in ES){if(ES.hasOwnProperty(Ec)){if(ES[Ec].did===EQ.mid){EY=ES[Ec];return DZ[Ed];}}}}}}()),EO={zone:EZ,axis:EZ&&EZ.id,idx:CZ.find(ES,"id",EY.id),cnt:ES.length,item:EY,useDropzone:true};if(EY.um&&!mstrApp.isInVFInteractMode&&!mstrApp.isInVFConfigMode){EU.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){EN.editDerivedMetric(EO,"edit");},EO);EU.addSeparator();}if(EG.isABL&&EA.supportSort()){EU.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:EQ});EU.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:EQ});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){EU.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}EU.addSeparator();}if(!mstrApp.isInVFInteractMode){EU.addMenuItem(mstrmojo.desc(11700,"Axis Scale..."),"xt",p.getEditAxisScaleHandler(EF,EQ.mid));EU.addMenuItem(mstrmojo.desc(11987,"Log Scale"),"xt",p.getEditLogScaleHandler(EF,EQ.mid));EU.addMenuItem(mstrmojo.desc(11988,"Axis Origin"),"xt",p.getEditAxisOriginHandler(EF,EQ.mid));EU.addSeparator();if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(z.INSERT_NEW_METRIC)){if(EJ.docModel.findDatasetIdFromUnit(EY.did)&&!EJ.docModel.isFromSolrCube(EY.did)&&!EJ.docModel.isFromMDXCube(EY.did)){EU.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"xt",EN.id,EN.getAggregateByMetricSubMenu,EO);EU.addSeparator();}EU.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),EN.id,EN.getCalculationEditorCfg,EO);EU.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"xt",EN.id,EN.getShortcutMetricSubMenu,EO);EU.addMenuItem(mstrmojo.desc(13624,"New Metric..."),"xt",function(){EN.newDerivedMetric(EO);},EO);EU.addSeparator();}if(EJ.shouldShowCondensedMenu(EZ,EY)){var EV=EY.cds;var ET=EJ.getCondenseLableHandler(EZ,EO,true),ER=EJ.getCondenseLableHandler(EZ,EO,false);EU.addToggleMenuItem(mstrmojo.desc(13660,"Condense Label"),"",ET,ER,EJ.id,EV);}if(EJ.showNumberFormat(EY)){EU.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),EJ.id,EJ.getNumberFormatEditorCfg,EO);EU.addSeparator();}if(EG.isABL&&!EG.isPie){EU.addSeparator();p.getSubMenu(EF,EU,EQ.mid,EQ.midx);}EU.addSeparator();var Ea=EA.getMetricsOnXAxis().concat(EA.getMetricsOnYAxis()),EM=EA.model.getMetricIDsFromIndex(Ea),Eb=false;if(EQ.mid){if(EM.indexOf(EQ.mid)>=0){Eb=true;}}var EX=false;if(EG.isBubbleOrScatter){var EK=EF.GMController.getMetricsOnXAxis();if(EK.indexOf(EQ.midx)>=0){EX=true;}}else{if(!Eb){EX=true;}}EX=EX||!p.isTrendLineAvailableForMetric(EF,EQ.midx);if(!EX){EU.addToggleMenuItem(mstrmojo.desc(12155,"Enable trendline for ##").replace("##",EP),"xt",p.getTrendLineToggleHandler(EF,EQ.mid,true),p.getTrendLineToggleHandler(EF,EQ.mid,false),Dx.id,p.getTrendLineToggleState(EF,EQ.mid));var EI=p.getOptionObjArr.call(EA,[EY.idx]),EW=EF.readGlobalProperty(Ac.TREND_LINE_DEF,EI);if(EW.jsonObj.trdEnabled){EU.addMenuItem(mstrmojo.desc(12163,"Edit trendline..."),"xt",p.getEditTrendLineHandler(EF,EQ.mid));}}var EL=false;if(EA.isStacked&&!EA.splitPlottingMetrics){EL=true;}else{if(!Eb){EL=true;}}EL=EL||p.isIgnoredMetric(EF,EQ.midx);if(!EL){p.getReferenceLineSubMenu(EF,EU,EG.isABL,EQ.mid);}EU.addSeparator();C9=EU.getMenuItems().length;if(EJ.hasReplaceCandidates(EO)&&(!D8||!!mstrmojo.resolveFeature(z.WEB_DRILL_AND_LINK))){EU.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",EF.zonesModel.id,EJ.getReplaceSubMenu,EO);}if(EQ.elem&&EQ.elem.firstChild){AI(EF,EU,EQ.elem.firstChild,EY);}EU.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){EJ.deleteItem(EZ,EO.idx);});}return EU;},Dc=function(){var EI=new W.ui.menus.MenuConfig();function DZ(){function EJ(){return function(EL,EK){if(EK!==EL){Dx.widget.writeGlobalProperty(C6.LINE_MARKER_SHOW,EL);}};}return function(){var EK=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EM){EK.push(EM);});var EL=Dx.widget.readGlobalProperty(C6.LINE_MARKER_SHOW);EI.addRadioMenuGroup(EL,EJ(),EK,"checkMark",undefined,true);return EI;};}(DZ())();return EI;},C8=function(){var DZ=new W.ui.menus.MenuConfig(),EI=Dk.getAssMetricDataLabelID(),EK=EF.readGlobalProperty(Ac.METRIC_LEVEL_DATA_LABEL).jsonObj;function EJ(EN){function EM(){return function(ER,EO){var EP;if(ER!==EO){if(ER!==By.EnumDataLabels.HIDE){EK[EI]=true;var EQ=true,ES;for(ES in EK){if(ES!=="AllMetrics"&&EK.hasOwnProperty(ES)){if(EK[ES]===false){EQ=false;}}}if(EK.AllMetrics!==undefined){EK.AllMetrics=EQ;}EN.setWidgetPropertyValue(Ac.METRIC_LEVEL_DATA_LABEL,EK);EP=[{value:true,valueWas:false,name:Ac.METRIC_LEVEL_DATA_LABEL,option:p.getOptionObjArr.call(EA,[EA.getMetricIndexFromID(EI)])}];}EN.writeGlobalProperty(Ac.DATA_LABEL,ER,undefined,undefined,EP);}};}function EL(){var EO=EN.readGlobalProperty(Ac.DATA_LABEL);if(!EK[EI]){return By.EnumDataLabels.HIDE;}return EO;}return function(){var EO=[];if(EA.textTypeDataLabelEnabled()){EO.push({text:mstrmojo.desc(13663,"Only Text"),value:By.EnumDataLabels.SHOW_TEXT_ONLY});}if(EA.valueTypeDataLabelEnabled()){EO.push({text:mstrmojo.desc(13664,"Only Value"),value:By.EnumDataLabels.SHOW_VALUE_ONLY});}EO.push({text:mstrmojo.desc(2057,"None"),value:By.EnumDataLabels.HIDE});DZ.addRadioMenuGroup(EL(),EM(),EO,"checkMark",undefined,true);return DZ;};}(EJ(EF))();return DZ;},DA=function(){var EI=function(){var EJ=new W.ui.menus.MenuConfig();function EL(EN,EM){if(EN!==EM){if(Dl===Ab.GM_ROW_HEADER||Dl===Ab.GM_ROW_HEADER_EXTRA){EF.writeGlobalProperty(C6.ROW_VALUES_SHOW,EN);if(N.call(Dx,Ab.GM_ROW_HEADER_TITLE)){EF.writeGlobalProperty(C6.ROW_HEADER_SHOW,EN);}}else{if(Dl===Ab.GM_COL_HEADER||Dl===Ab.GM_COL_HEADER_EXTRA){EF.writeGlobalProperty(C6.COLUMN_VALUES_SHOW,EN);if(N.call(Dx,Ab.GM_COL_HEADER_TITLE)){EF.writeGlobalProperty(C6.COLUMN_HEADER_SHOW,EN);}}}}}var EK=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EM){EK.push(EM);});if(Dl===Ab.GM_ROW_HEADER||Dl===Ab.GM_ROW_HEADER_EXTRA){EJ.addRadioMenuGroup(EF.readGlobalProperty(C6.ROW_VALUES_SHOW),EL,EK,"checkMark",undefined,true);}else{if(Dl===Ab.GM_COL_HEADER||Dl===Ab.GM_COL_HEADER_EXTRA){EJ.addRadioMenuGroup(EF.readGlobalProperty(C6.COLUMN_VALUES_SHOW),EL,EK,"checkMark",undefined,true);}}return EJ;};var DZ="default text";if(Dl===Ab.GM_ROW_HEADER||Dl===Ab.GM_ROW_HEADER_EXTRA){if(N.call(Dx,Ab.GM_ROW_HEADER_TITLE)){DZ=mstrmojo.desc(13665,"Row Text");}else{DZ=mstrmojo.desc(12016,"Row Values");}}else{if(Dl===Ab.GM_COL_HEADER||Dl===Ab.GM_COL_HEADER_EXTRA){if(N.call(Dx,Ab.GM_COL_HEADER_TITLE)){DZ=mstrmojo.desc(13666,"Column Text");}else{DZ=mstrmojo.desc(12017,"Column Values");}}}Dz.addSubMenuItem(DZ,"xt",this.id,EI);},Dm=function(){var EJ="no selection is made",EN;var EM=EF.readGlobalProperty(C6.ROW_HEADER_SHOW),EL=EF.readGlobalProperty(C6.ROW_VALUES_SHOW),EK=EF.readGlobalProperty(C6.COLUMN_HEADER_SHOW),EI=EF.readGlobalProperty(C6.COLUMN_VALUES_SHOW);var DZ=BL(Dx.contextMenuSelectedTargets||[]);if(DZ===BX.ROW_HEADER){EJ=EM?mstrmojo.desc(13667,"Hide row header"):mstrmojo.desc(13668,"Show row header");EN=function(){EF.writeGlobalProperty(C6.ROW_HEADER_SHOW,!EM);};}else{if(DZ===BX.ROW_VALUE){EJ=EL?mstrmojo.desc(13669,"Hide row value"):mstrmojo.desc(13670,"Show row value");EN=function(){EF.writeGlobalProperty(C6.ROW_VALUES_SHOW,!EL);};}else{if(DZ===BX.COL_HEADER){EJ=EK?mstrmojo.desc(13671,"Hide column header"):mstrmojo.desc(13672,"Show column header");EN=function(){EF.writeGlobalProperty(C6.COLUMN_HEADER_SHOW,!EK);};}else{if(DZ===BX.COL_VALUE){EJ=EI?mstrmojo.desc(13673,"Hide column value"):mstrmojo.desc(13674,"Show column value");EN=function(){EF.writeGlobalProperty(C6.COLUMN_VALUES_SHOW,!EI);};}else{if(DZ===(BX.ROW_VALUE|BX.ROW_HEADER)){EJ=mstrmojo.desc(13675,"Hide row text");EN=function(){EF.writeGlobalProperty(C6.ROW_TEXT_SHOW,false);};}else{if(DZ===(BX.COL_VALUE|BX.COL_HEADER)){EJ=mstrmojo.desc(13676,"Hide column text");EN=function(){EF.writeGlobalProperty(C6.COLUMN_TEXT_SHOW,false);};}}}}}}Dz.addMenuItem(EJ,"xt",EN);},D3=function(EI){var DZ=EI||new W.ui.menus.MenuConfig(),EK=[{text:mstrmojo.desc(6019,"Automatic"),value:By.EnumGridLines.AUTO},{text:mstrmojo.desc(13677,"Show Major and Minor"),value:By.EnumGridLines.SHOW},{text:mstrmojo.desc(13678,"Show Major Only"),value:By.EnumGridLines.SHOW_MAJOR_ONLY},{text:mstrmojo.desc(2772,"Hide"),value:By.EnumGridLines.HIDE}];function EJ(){return function(EM,EL){if(EL!==EM){EF.writeGlobalProperty(C6.ALL_GRID_LINES_SHOW,EM);}};}DZ.addRadioMenuGroup(EF.readGlobalProperty(C6.ALL_GRID_LINES_SHOW),EJ(),EK,"checkMark",undefined,true);return DZ;},Do=function(EO,EN){var EM=EF.zonesModel,EK=EM.gmZones,EL,EJ=(function(){var DZ,EQ,EP;DZ=EK.dropZones;for(EQ in DZ){EL=DZ[EQ].items;for(EP in EL){if(EL[EP].did===EO.mid){return DZ[EQ];}}}}()),EI=[];CZ.forEach(EN,function(EQ){var EP=EQ.mid,DZ=CZ.find(EL,"did",EP);if(DZ!==-1){EI.push(EL[DZ]);}});if(!mstrApp.isInVFConfigMode){Dz.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),EM.id,function(){return mstrmojo.all[EM.id].getMultipleMetricsCalcMenus(EJ,EI,true);});}Dz.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){EK.deleteItems(EI,true);});};if(De){De.elem=Dr.elem;}var Dg,DD,Dw,DK,DO,DN,Dy,D7,DI,DB,EH,ED,DG=mstrmojo.emptyFn,DS=mstrmojo.emptyFn,Dt,Dn=function(DZ){if(Dg.hasReplaceCandidates(DO)&&!mstrApp.isInVFInteractMode&&(!D8||!!mstrmojo.resolveFeature(z.WEB_DRILL_AND_LINK))){DZ.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",EF.zonesModel.id,Dg.getReplaceSubMenu,DO);}};switch(Dl){case Ab.GM_ROW_HEADER_TITLE:case Ab.GM_COL_HEADER_TITLE:Dg=EF.zonesModel.gmZones;DK=(function(){var DZ,EJ,EI;DZ=Dg.dropZones;for(EJ in DZ){Dw=DZ[EJ].items;for(EI in Dw){if(Dw[EI].did===Dr.identity.tid){DD=Dw[EI];return DZ[EJ];}}}}());DO={zone:DK,axis:DK&&DK.id,idx:CZ.find(Dw,"id",DD.id),cnt:Dw.length,item:DD,useDropzone:true};if(Ds){if(!mstrApp.isInVFInteractMode){Dm.call(this,Dx.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);}}else{if(D8){Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dk});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dk});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}Dz.addSeparator();if(!(mstrApp.isInVFConfigMode||mstrApp.isInVFInteractMode)&&mstrmojo.resolveFeature(z.WEB_DRILL_AND_LINK)){EC(Dk&&Dk.tid);}Dn(Dz);}else{if(Dk.otp===47&&(Dk.ost===12033||Dk.ost===12032)){Dg=EF.zonesModel.gmZones;DK=(function(){var DZ,EJ,EI;DZ=Dg.dropZones;for(EJ in DZ){Dw=DZ[EJ].items;for(EI in Dw){if(Dw[EI].did===Dr.identity.tid){DD=Dw[EI];return DZ[EJ];}}}}());DO={zone:DK,axis:DK&&DK.id,idx:CZ.find(Dw,"id",DD.id),cnt:Dw.length,item:DD,useDropzone:true};if(Dk.ost===12033&&!mstrApp.isInVFInteractMode&&!mstrApp.isInVFConfigMode){Dz.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",Dg.getCreateOrEditElementGroupFunc(DO));Dz.addSeparator();}Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dk});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dk});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}Dz.addSeparator();}else{DN=!Dg.docModel.isFromMDXCube(DD.did);if(DD.da&&DN&&!mstrApp.isInVFInteractMode&&!mstrApp.isInVFConfigMode){Dz.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){Dg.editDerivedAttribute(DO);},DO);Dz.addSeparator();}Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dk});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dk});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}if(mstrApp.isInVFInteractMode){break;}Dz.addSeparator();Dt=Dg.isDynamicLink(DD);if(!mstrApp.isInVFConfigMode){if(Dg.allowInsertNewAttribute(DK)&&!Ci.isCGorCon(EF,DD)&&DN&&!Dt&&mstrmojo.resolveFeature(z.INSERT_NEW_METRIC)){Dz.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){Dg.newDerivedAttribute(DO);},DO);}DB=DD.t===47&&Dg.getUnitInfoInTemplate(DD.did).unit.ost===12033;EH=Dg.isAttribute(DD)&&!Dg.hasOldDEOverDatasets(DD.did)?mstrmojo.desc(13295,"Create Groups..."):(DB?mstrmojo.desc(13296,"Edit Groups..."):null);if(EH!==null&&!Dt){Dz.addMenuItem(EH,"eg",Dg.getCreateOrEditElementGroupFunc(DO));}Dz.addSeparator();}if(Dg.showNumberFormat(DD)){Dz.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),Dg.id,Dg.getNumberFormatEditorCfg,DO);}if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(z.WEB_DRILL_AND_LINK)){EC(Dk&&Dk.tid);}if(!Dt){DL();}Dz.addSeparator();}C9=Dz.getMenuItems().length;Dn(Dz);if(Dr.elem&&Dr.elem.firstChild){AI(EF,Dz,Dr.elem.firstChild,DD);}Dz.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){Dg.deleteItem(DK,DO.idx);});}}break;case Ab.GM_ROW_HEADER:case Ab.GM_COL_HEADER:if(mstrApp.isInVFInteractMode){break;}if(Ds){Dm.call(this,Dx.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK);}else{var D0=true,Dv=EA.supportViewFilterPool;if(!Dv[Dk.tid]){D0=false;}(this.contextMenuSelectedTargets||[]).forEach(function(EI){var DZ=EI.identity;if(!Dv[DZ.tid]){D0=false;}});if(EF.isLinkedFilterEnabled&&EF.isLinkedFilterEnabled()){var C7=function(){EF.handleContextMenuSelectionData(true);};Dz.addMenuItem(mstrmojo.desc(15070,"Go to Targets"),"",C7);Dz.addSeparator();}if(D0){Dz.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"xt",EF.getMenuHandler("headerKeepOnly"),{selInfo:De,identity:Dk});Dz.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",EF.getMenuHandler("headerExclude"),{selInfo:De,identity:Dk});if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(z.WEB_DRILL_AND_LINK)){EC(Dk&&Dk.tid);}Dz.addSeparator();}if(D8){if(D0&&!mstrApp.isDossier&&!D6){Dz.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",EF.getMenuHandler("selectionShowData"));}}else{if(!mstrApp.isInVFConfigMode){var D4=Dx.contextMenuSelectedTargets[0].identity;DH={at:D4.at,dei:D4.dei,dpt:D4.dpt,o:D4.o,n:D4.n,tui:D4.tui,ui:D4.tui,axis:D4.isRowAttribute?1:2,v:D4.v,tid:D4.tid};ED=Ci.getGroupAndCalculationContextMenu(EF,DH,{selection:Dx.contextMenuSelectedTargets||[],fnCellName:function(DZ){return DZ.innerText||DZ.textContent;}});["editGroup","editCalculation","createDe"].forEach(function(DZ){Ci.absorbMenuItems(Dz,ED[DZ],true);});}if(D0&&!D6){Dz.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",EF.getMenuHandler("selectionShowData"));}if(!mstrApp.isInVFConfigMode){if(ED.renameDe.menus.length>0){Dz.addSeparator();}Ci.absorbMenuItems(Dz,ED.renameDe);if(ED.renameDe.menus.length>0){C9=Dz.getMenuItems().length-1;}}}}break;case Ab.GM_X_CATEGORY:case Ab.GM_Y_CATEGORY:if(D8){Dy=(Dr.identity.tid||Dr.identity.attrIdArr[0]);D7=EA.attributeSelectionInfo;DI=D7[Dy];Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:DI});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:DI});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}}else{if(Ds){if(mstrApp.isInVFInteractMode){break;}DG=function(){var DZ=new W.ui.menus.MenuConfig();function EI(EK){function EJ(){return function(EM,EL){if(EM!==EL){if(Dl===Ab.GM_X_CATEGORY){EK.writeGlobalProperty(C6.X_AXIS_LABELS_SHOW,EM);}else{if(Dl===Ab.GM_Y_CATEGORY){EK.writeGlobalProperty(C6.Y_AXIS_LABELS_SHOW,EM);}}}};}return function(){var EL=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EM){EL.push(EM);});if(Dl===Ab.GM_X_CATEGORY){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.X_AXIS_LABELS_SHOW),EJ(),EL,"checkMark",undefined,true);}else{if(Dl===Ab.GM_Y_CATEGORY){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.Y_AXIS_LABELS_SHOW),EJ(),EL,"checkMark",undefined,true);}}return DZ;};}(EI(EF))();return DZ;};Dz.addSubMenuItem(mstrmojo.desc(12003,"Axis Labels"),"xt",this.id,DG);var Du=function(){var DZ=new W.ui.menus.MenuConfig();function EI(EK){function EJ(){return function(EM,EL){if(EM!==EL){if(Dl===Ab.GM_X_CATEGORY){EK.writeGlobalProperty(C6.X_AXIS_LABELS_ROTATION,EM);}else{if(Dl===Ab.GM_Y_CATEGORY){EK.writeGlobalProperty(C6.Y_AXIS_LABELS_ROTATION,EM);}}}};}return function(){var EL=[];[{text:mstrmojo.desc(12284,"Automatic"),value:By.EnumLabelRotation.AUTOMATIC},{text:mstrmojo.desc(12285,"Vertical"),value:By.EnumLabelRotation.VERTICAL},{text:mstrmojo.desc(12286,"Horizontal"),value:By.EnumLabelRotation.HORIZONTAL}].forEach(function(EM){EL.push(EM);});if(Dl===Ab.GM_X_CATEGORY){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.X_AXIS_LABELS_ROTATION),EJ(),EL,"checkMark",undefined,true);}else{if(Dl===Ab.GM_Y_CATEGORY){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.Y_AXIS_LABELS_ROTATION),EJ(),EL,"checkMark",undefined,true);}}return DZ;};}(EI(EF))();return DZ;};if(Dx.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK&&Dl===Ab.GM_X_CATEGORY){Dz.addSubMenuItem(mstrmojo.desc(12283,"Rotation"),"xt",this.id,Du);}}else{Dy=(Dr.identity.tid||Dr.identity.attrIdArr[0]);D7=EA.attributeSelectionInfo;DI=D7[Dy];Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:DI});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:DI});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}if(mstrApp.isInVFInteractMode){break;}Dz.addSeparator();Dg=EF.zonesModel.gmZones;DK=(function(){var DZ,EJ,EI;DZ=Dg.dropZones;for(EJ in DZ){Dw=DZ[EJ].items;for(EI in Dw){if(Dw[EI].did===Dy){DD=Dw[EI];return DZ[EJ];}}}}());DO={zone:DK,axis:DK&&DK.id,idx:CZ.find(Dw,"id",DD.id),cnt:Dw.length,item:DD,useDropzone:true};DN=!Dg.docModel.isFromMDXCube(DD.did);if(DD.da&&DN&&!mstrApp.isInVFConfigMode){Dz.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){Dg.editDerivedAttribute(DO);},DO);}Dt=Dg.isDynamicLink(DD);if(!mstrApp.isInVFConfigMode){if(Dg.allowInsertNewAttribute(DK)&&!Ci.isCGorCon(EF,DD)&&DN&&!Dt&&mstrmojo.resolveFeature(z.INSERT_NEW_METRIC)){Dz.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){Dg.newDerivedAttribute(DO);},DO);}DB=DD.t===mstrmojo.chart.model.enums.EnumDSSObjectType.DssTypeConsolidation&&Dg.getUnitInfoInTemplate(DD.did).unit.ost===12033;EH=Dg.isAttribute(DD)&&!Dg.hasOldDEOverDatasets(DD.did)?mstrmojo.desc(13295,"Create Groups..."):(DB?mstrmojo.desc(13296,"Edit Groups..."):null);if(EH!==null&&!Dt){Dz.addMenuItem(EH,"eg",Dg.getCreateOrEditElementGroupFunc(DO));}Dz.addSeparator();}if(!Dt){DL();}Dz.addSeparator();if(Dg.showNumberFormat(DD)){Dz.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),Dg.id,Dg.getNumberFormatEditorCfg,DO);Dz.addSeparator();}C9=Dz.getMenuItems().length;Dz.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){Dg.deleteItem(DK,DO.idx);});}}break;case Ab.LASSO_SELECTOR:case Ab.GM_SHAPE:case Ab.GM_MARKER:if(mstrApp.isInVFInteractMode){break;}var DJ=Dk&&Dk.getShape();D9=Dr.subType;var D5=this.widget.model.data.dz.ColorBy,DM;if(EA.supportViewFilter&&Dx.contextMenuSelection){var DC=EF.model.data.dz,Da=[DC.SliceBy,DC.BreakBy,DC.XAxis,DC.YAxis,DC.Rows,DC.Columns],D2=[];Dx.contextMenuSelection.forEach(function(DZ){DZ.identity.objectInfo.forEach(function(EI){D2=D2.filter(function(EJ){return EJ!==EI.tid;});D2.push(EI.tid);});});CZ.forEach(Da,function(DZ){if(DZ.TemplateUnit){for(var EI=DZ.TemplateUnit.length-1;EI>=0;EI--){if(D2.indexOf(DZ.TemplateUnit[EI].id)!==-1){DM=DZ.TemplateUnit[EI].id;return false;}}}});if(EF.isLinkedFilterEnabled&&EF.isLinkedFilterEnabled()){var DE=function(){EF.handleContextMenuSelectionData(true);};Dz.addMenuItem(mstrmojo.desc(15070,"Go to Targets"),"",DE);Dz.addSeparator();}if(DM){Dz.addMenuItem(mstrmojo.desc(11701,"Keep Only"),"xt",EF.getMenuHandler("selectionKeepOnly"));Dz.addMenuItem(mstrmojo.desc(3946,"Exclude"),"xt",EF.getMenuHandler("selectionExclude"));if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(z.WEB_DRILL_AND_LINK)){EC(DM,true);}Dz.addSeparator();}}if(D8){if(DM&&!mstrApp.isDossier&&!D6){Dz.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",EF.getMenuHandler("selectionShowData"));Dz.addSeparator();}Dz.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,C8);}else{if(!Ds){if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(z.INSERT_NEW_METRIC)){ED=Bq(EF,Dx.contextMenuSelection);["editGroup","editCalculation","createDe"].forEach(function(DZ){Ci.absorbMenuItems(Dz,ED[DZ],true);});}if(DM&&!D6){Dz.addMenuItem(mstrmojo.desc(13537,"Show Data..."),"xt",EF.getMenuHandler("selectionShowData"));Dz.addSeparator();}Dz.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,C8);if(D9){if(!D5.TemplateMetric||D5.MetricNames!==undefined){if((DJ===Bo.LINE&&(D9===BH.SCIRCLE||D9===BH.SBAR))||D9==="ticker"){Dz.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Be(this.widget,Dr.elem,D5,{showNoFill:false,showAutomatic:true,});});}if((DJ===Bo.AREA&&D9===BH.SCIRCLE)||D9==="bar"||D9==="circle"||D9==="square"||D9==="gbar"||D9==="pie"||D9==="ring"){Dz.addPopupMenuItem(mstrmojo.desc(13619,"Shape Fill Color"),this.id,function(){return Be(this.widget,Dr.elem,D5,{showNoFill:true,showAutomatic:true,});});}}}if(D9){if(this.isLineOrAreaPaint(DJ)&&(D9===BH.SCIRCLE&&(DJ===Bo.LINE||DJ===Bo.AREA))||D9==="gmMarker"){Dz.addSubMenuItem(mstrmojo.desc(12159,"Marker"),"",this.id,Dc);}}Dz.addSeparator();if(D5.TemplateMetric&&!D5.MetricNames&&!mstrApp.isDossier){var Dd=Ci.getMetricsInDropZone(this.widget.zonesModel,mstrmojo.vi.viz.EnumDSSDropZones.ColorBy);Dz.addMenuItem(mstrmojo.desc(13174,"Select color ranges..."),"",function(){Dx.widget.model.openThresholdEditor(Dd[0],true,false);});}if(EG.isABL&&!EG.isPie){var DR=Dk&&Dk.getSelectedObjectMetricInfo(),D1=DR&&DR.length&&DR[0],DU=EF.model.data.gts.col[EF.model.data.gts.col.length-1].es,Dp=0;if(D1){CZ.forEach(DU,function(DZ){if(DZ.oid===D1.eid){return false;}Dp++;});Dz.addSeparator();p.getSubMenu(EF,Dz,D1.eid,Dp);}}else{if(EG.isBubbleOrScatter){Dz.addSeparator();var Db=EF.getMenuHandler("changeGlobalShape");if(Db){Dz.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",EF.id,Db);}}}if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(z.INSERT_NEW_METRIC)){if(ED.renameDe.menus.length>0){Dz.addSeparator();}Ci.absorbMenuItems(Dz,ED.renameDe);if(ED.renameDe.menus.length>0){C9=Dz.getMenuItems().length-1;}}}}break;case Ab.GM_DATA_LABEL:if(!mstrApp.isInVFInteractMode){Dz.addSubMenuItem(mstrmojo.desc(11993,"Data Labels"),"",this.id,C8);}break;case Ab.GM_X_NUMERIC:case Ab.GM_Y_NUMERIC:if(D8){De=De?De:Dr.selectionInfos[0];if(EG.isABL&&Dr.identity&&Dr.identity.objType!==AC.Y_ATTRIBUTE_AXIS_TITLE&&Dr.identity.objType!==AC.X_ATTRIBUTE_AXIS_TITLE){Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:De});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:De});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}}}else{if(Ds){if(mstrApp.isInVFInteractMode){break;}DG=function(){var DZ=new W.ui.menus.MenuConfig();function EI(EK){function EJ(){return function(EM,EL){if(EM!==EL){if(Dl===Ab.GM_X_NUMERIC){EK.writeGlobalProperty(C6.X_AXIS_LABELS_SHOW,EM);}else{if(Dl===Ab.GM_Y_NUMERIC){EK.writeGlobalProperty(C6.Y_AXIS_LABELS_SHOW,EM);}}}};}return function(){var EL=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EM){EL.push(EM);});if(Dl===Ab.GM_X_NUMERIC){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.X_AXIS_LABELS_SHOW),EJ(),EL,"checkMark",undefined,true);}else{if(Dl===Ab.GM_Y_NUMERIC){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.Y_AXIS_LABELS_SHOW),EJ(),EL,"checkMark",undefined,true);}}return DZ;};}(EI(EF))();return DZ;};Dz.addSubMenuItem(mstrmojo.desc(12003,"Axis Labels"),"xt",this.id,DG);var DF=function(){var DZ=new W.ui.menus.MenuConfig();function EI(EK){function EJ(){return function(EM,EL){if(EM!==EL){if(Dl===Ab.GM_X_NUMERIC){EK.writeGlobalProperty(C6.X_AXIS_LABELS_ROTATION,EM);}else{if(Dl===Ab.GM_Y_NUMERIC){EK.writeGlobalProperty(C6.Y_AXIS_LABELS_ROTATION,EM);}}}};}return function(){var EL=[];[{text:mstrmojo.desc(12284,"Automatic"),value:By.EnumLabelRotation.AUTOMATIC},{text:mstrmojo.desc(12285,"Vertical"),value:By.EnumLabelRotation.VERTICAL},{text:mstrmojo.desc(12286,"Horizontal"),value:By.EnumLabelRotation.HORIZONTAL}].forEach(function(EM){EL.push(EM);});if(Dl===Ab.GM_X_NUMERIC){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.X_AXIS_LABELS_ROTATION),EJ(),EL,"checkMark",undefined,true);}else{if(Dl===Ab.GM_Y_NUMERIC){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.Y_AXIS_LABELS_ROTATION),EJ(),EL,"checkMark",undefined,true);}}return DZ;};}(EI(EF))();return DZ;};if(Dx.widget.preClickType===mstrmojo.gm.EnumClickType.DOUBLE_CLICK&&Dl===Ab.GM_X_NUMERIC){Dz.addSubMenuItem(mstrmojo.desc(12283,"Rotation"),"xt",this.id,DF);}}else{var Dh=Dr.multiMetrics3;if(Dh&&Dh.length>1){if(!mstrApp.isInVFConfigMode){Do(Dh[0],Dh);}}else{DW=Dr.metrics;if(DW){DT=Dr.selectionInfos;DQ=DW.length;if(DQ===1){if(DT[0]&&DT[0].elem){delete DT[0].elem;}Ci.absorbMenuItems(Dz,Dq(DW[0],DT[0]));}else{CZ.forEach(DW,function(EI,DZ){Dz.addSubMenuItem(EI,"",Dx.id,function(){if(DT[DZ]&&DT[DZ].elem){delete DT[DZ].elem;}return Dq(EI,DT[DZ]);});});if(EA.isStacked&&!EA.splitPlottingMetrics&&!mstrApp.isInVFInteractMode){Dz.addSeparator();p.getReferenceLineSubMenu(EF,Dz,EG.isABL,DT[0].mid);}}break;}}}}break;case Ab.GM_XLABEL:case Ab.GM_YLABEL:if(Ds){DS=function(){var DZ=new W.ui.menus.MenuConfig();function EI(EK){function EJ(){return function(EM,EL){if(EM!==EL){if(Dl===Ab.GM_XLABEL){EK.writeGlobalProperty(C6.X_AXIS_TITLE_SHOW,EM);}else{if(Dl===Ab.GM_YLABEL){EK.writeGlobalProperty(C6.Y_AXIS_TITLE_SHOW,EM);}}}};}return function(){var EL=[];[{text:mstrmojo.desc(2969,"Show"),value:true},{text:mstrmojo.desc(2772,"Hide"),value:false}].forEach(function(EM){EL.push(EM);});if(Dl===Ab.GM_XLABEL){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.X_AXIS_TITLE_SHOW),EJ(),EL,"checkMark",undefined,true);}else{if(Dl===Ab.GM_YLABEL){DZ.addRadioMenuGroup(EK.readGlobalProperty(C6.Y_AXIS_TITLE_SHOW),EJ(),EL,"checkMark",undefined,true);}}return DZ;};}(EI(EF))();return DZ;};if(!mstrApp.isInVFInteractMode){Dz.addSubMenuItem(mstrmojo.desc(13679,"Axis Title"),"xt",this.id,DS);}}else{if(D8){if(Dr.identity){if(EG.isABL){if(Dr.identity.tid){Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dk});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dk});}else{Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:De});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:De});}if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}}Dz.addSeparator();var DY=EF.zonesModel,Df=De?De.mid:Dr.identity.tid;Dg=DY.gmZones;DD=null;Dw=[];DK=(function(){var DZ,EJ,EI;DZ=Dg.dropZones;for(EJ in DZ){if(DZ.hasOwnProperty(EJ)){Dw=DZ[EJ].items;for(EI in Dw){if(Dw.hasOwnProperty(EI)){if(Dw[EI].did===Df){DD=Dw[EI];return DZ[EJ];}}}}}}());DO={zone:DK,axis:DK&&DK.id,idx:CZ.find(Dw,"id",DD.id),cnt:Dw.length,item:DD,useDropzone:true};Dn(Dz);}}else{if(Dr.identity){if(Dr.identity.objType!==AC.Y_ATTRIBUTE_AXIS_TITLE&&Dr.identity.objType!==AC.X_ATTRIBUTE_AXIS_TITLE){var Dj=Dr.multiMetrics;if(Dj&&Dj.length>1){if(!mstrApp.isInVFInteractMode){Do(De,Dj);}}else{Ci.absorbMenuItems(Dz,Dq(Dr.metric,De));}}else{Dg=EF.zonesModel.gmZones;DK=(function(){var DZ,EJ,EI;DZ=Dg.dropZones;for(EJ in DZ){Dw=DZ[EJ].items;for(EI in Dw){if(Dw[EI].did===Dr.identity.tid){DD=Dw[EI];return DZ[EJ];}}}}());DO={zone:DK,axis:DK&&DK.id,idx:CZ.find(Dw,"id",DD.id),cnt:Dw.length,item:DD,useDropzone:true};DN=!Dg.docModel.isFromMDXCube(DD.did);if((DD.t===47&&(DD.st===12033||DD.st===12032))||(Dk.otp===47&&(Dk.ost===12033||Dk.ost===12032))){if(Dk.ost===12033&&!mstrApp.isInVFInteractMode){Dz.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",Dg.getCreateOrEditElementGroupFunc(DO));Dz.addSeparator();}Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dk});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dk});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}Dz.addSeparator();}else{if(DD.da&&DN&&!mstrApp.isInVFInteractMode&&!mstrApp.isInVFConfigMode){Dz.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){Dg.editDerivedAttribute(DO);},DO);Dz.addSeparator();}Dz.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:true,identity:Dk});Dz.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",EF.getMenuHandler("sortAttributeTitle"),{isAsc:false,identity:Dk});if(EA.firstRes.gsi.sorts[0].length!==0||EA.firstRes.gsi.sorts[1].length!==0){Dz.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",EF.getMenuHandler("clearSort"));}Dz.addSeparator();if(!mstrApp.isInVFInteractMode){Dt=Dg.isDynamicLink(DD);if(!mstrApp.isInVFConfigMode){if(Dg.allowInsertNewAttribute(DK)&&!Ci.isCGorCon(EF,DD)&&DN&&!Dt&&mstrmojo.resolveFeature(z.INSERT_NEW_METRIC)){Dz.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){Dg.newDerivedAttribute(DO);},DO);}DB=DD.t===47&&Dg.getUnitInfoInTemplate(DD.did).unit.ost===12033;EH=Dg.isAttribute(DD)&&!Dg.hasOldDEOverDatasets(DD.did)?mstrmojo.desc(13295,"Create Groups..."):(DB?mstrmojo.desc(13296,"Edit Groups..."):null);if(EH!==null&&!Dt){Dz.addMenuItem(EH,"eg",Dg.getCreateOrEditElementGroupFunc(DO));}Dz.addSeparator();}if(Dg.showNumberFormat(DD)){Dz.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),Dg.id,Dg.getNumberFormatEditorCfg,DO);}if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(z.WEB_DRILL_AND_LINK)){EC(Dk&&Dk.tid);}if(!Dt){DL();}Dz.addSeparator();}}C9=Dz.getMenuItems().length;if(!mstrApp.isInVFInteractMode){if(Dg.hasReplaceCandidates(DO)&&(!D8||!!mstrmojo.resolveFeature(z.WEB_DRILL_AND_LINK))){Dz.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",EF.zonesModel.id,Dg.getReplaceSubMenu,DO);}if(Dr.elem&&Dr.elem.firstChild){AI(EF,Dz,Dr.elem.firstChild,DD);}Dz.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){Dg.deleteItem(DK,DO.idx);});}}}}}break;case Ab.GM_ROW_HEADER_EXTRA:case Ab.GM_COL_HEADER_EXTRA:if(Ds){DA.call(this);}else{Ci.absorbMenuItems(Dz,Dq(Dr.metric,De));}break;case Ab.GM_SVG_CHART:if(!mstrApp.isInVFInteractMode){if(EF.legend){if(EF.legend.height===0&&EF.legend.width===0){Dz.addMenuItem(mstrmojo.desc(12001,"Show Legend"),"xt",function(){EF.writeGlobalProperty("LegendVisibleness",true);});}}Dz.addPopupMenuItem(mstrmojo.desc(11991,"Grid Lines"),this.id,D3);Dz.addSeparator();Aq.call(Dx,Dz);Dz.addSeparator();EE();}break;case Ab.GM_TREND_LINE:if(!Ds&&!mstrApp.isInVFInteractMode){var EB=EF.readGlobalProperty(Ac.TREND_LINE_DEF,Dk.tlOpt);Dz.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Am(this.widget,Ac.TREND_REF_LINE_COLOR,{realPropName:Ac.TREND_LINE_DEF,opt:Dk.tlOpt},EB,false);});Dz.addMenuItem(mstrmojo.desc(13680,"Disable trend line"),"xt",function(){EB.setProperty(Ac.TREND_ENABLED,false);EF.writeGlobalProperty(Ac.TREND_LINE_DEF,EB,Dk.tlOpt);});}break;case Ab.GM_REF_LINE:if(!Ds&&!mstrApp.isInVFInteractMode){var DX=EF.readGlobalProperty(Ac.REF_LINE_DEF,Dk.tlOpt);Dz.addPopupMenuItem(mstrmojo.desc(3523,"Line Color"),this.id,function(){return Am(this.widget,Ac.TREND_REF_LINE_COLOR,{realPropName:Ac.REF_LINE_DEF,opt:Dk.tlOpt},DX,false);});Dz.addMenuItem(mstrmojo.desc(13681,"Disable reference line"),"xt",function(){DX.setProperty(Ac.REF_ENABLED,false);EF.writeGlobalProperty(Ac.REF_LINE_DEF,DX,Dk.tlOpt);});}break;case Ab.GM_H_GRID_LINE:case Ab.GM_V_GRID_LINE:case Ab.GM_H_MINOR_GRID_LINE:case Ab.GM_V_MINOR_GRID_LINE:if(!mstrApp.isInVFInteractMode){D3(Dz);}break;default:}if(C9){Dz.fmtOptIdx=C9;}return Dz;},getSelectedTargetsIdentities:function(){var C8=this.selectedTargets,C7=[];(C8||[]).forEach(function(C9){if(C9.identity){C7.push(C9.identity);}});return C7;},handleRMClick:function(DS,DQ,DF,DO){DS=this.getRealTargetForSetShape(DS,DO);var DA,C9=this.fmtMode,C8=DO.ctrlKey||DO.metaKey,DC=this.widget,DN=DS.getAttribute("type"),DP=this.fmtMode?AV(DS):AZ(DS);var DL,DK;DC.clearCxtMnuSelection(true);if(!DP&&!this.fmtMode){DP=AV(DS);}if(!DP){var DG=new W.ui.menus.MenuConfig();if(!mstrApp.isInVFInteractMode&&!mstrApp.isInVFConfigMode){this.addFormatOption(DG);}if(DG&&DG.hasMenuItems()){this.hideTooltip();Ak.call(this,DF,DG);}return ;}DA=DP.getAttribute("type");if(Bx(DA)){this.clearSelectedTargets();this.clearContextMenuSelectedTargets();if(C9){if(this.fmtState===Bj.NORMAL){this.fmtState=Bj.PER_COLORBY;}this.handleClickOnShapeFMT(DP,C8);DC.onFormatableTargetChanged();}else{this.handleRMClickOnShape(DP,C8);}DF.x-=4;DF.y-=4;}else{if(C9){DL=this.contextMenuSelectedTargets||[];var DR=this.copeTargetChangeForDBLClick([DP])[0];DK=DL&&DL.indexOf(DR)!==-1;if(!DK){this.clearContextMenuSelectedTargets();this.RMSelectTarget(this.getTargetsWithSameType(DP));}}else{this.handleRMClickOnTarget(DP,C8);}}if(DA===Ab.LASSO_SELECTOR&&this.selectedShapes.length===0){return ;}var DH,C7,DT=DP.identity||(DP.parentNode&&DP.parentNode.identity),DE={};if(DA===Ab.LASSO_SELECTOR&&!DT){DT=this.contextMenuSelection.length&&this.contextMenuSelection[0].identity;}DE.visGM=DC;DE.identity=DT;DE.selectionInfo=DP.selectionInfo;DE.metric=DP.innerText||DP.textContent||"";DE.metrics=DP.metrics;DE.selectionInfos=DP.selectionInfos;DE.subType=DP.getAttribute("subtype");DE.orgType=DN;DE.elem=DP;DE.tagName=DP.tagName;if(M(this.selType)){var DD=[],DI;DL=this.contextMenuSelectedTargets||[];CZ.forEach(DL,function(DU){DI=DU.selectionInfo?CZ.find(DD,"mid",DU.selectionInfo.mid):null;if(DI===-1){DD.push(DU.selectionInfo);}});DE.multiMetrics=DD;}DH=this.getMenuConfig(DA,DQ,DE,C9);C7=this.getToolbarConfig(DA,DE,C9);if((!mstrApp.isInVFInteractMode&&!mstrApp.isInVFConfigMode)||(mstrApp.isInVFConfigMode&&DA!==Ab.GM_SVG_CHART)){this.addFormatOption(DH,DH.fmtOptIdx);}if(DH&&DH.menus&&DH.menus.length){this.hideTooltip();if(!(DP&&C8)){Ak.call(this,DF,DH);}}var DM=this.domMenuPH.firstChild;if(DM&&DM.offsetTop<0){DF.y+=DM.offsetTop;}if(C7){this.hideTooltip();AL.call(this,DF,C7);}if(DT&&DT.objType!==AC.GRAPH_SHAPE){var DJ;if(DN===Ab.GM_ROW_HEADER){DJ=Av.copy(DT);DJ.objType=AC.ROWS_BACKGROUND;}if(DN===Ab.GM_COL_HEADER){DJ=Av.copy(DT);DJ.objType=AC.COLS_BACKGROUND;}if(DJ){DC.raiseEventOnFormattingIdentity(AS([DJ]));}else{if(C9){var DB=this.getSelectedTargetsIdentities();DC.raiseEventOnFormattingIdentity(AS(DB));}else{DC.raiseEventOnFormattingIdentity(AS([DT]));}}}this.toggleGMFade();},formatHandler:function(C7){var DC=this,DD=this.widget,DE;mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");DD.parent.selectVIUnit();C7=C7||(DC.contextMenuSelectedTargets.length?DC.contextMenuSelectedTargets:DC.contextMenuSelection);if(C7.length===0||C7[0].getAttribute("type")===Ab.GM_DUMMY_A){DD.raiseEventOnNonFormattingIdentity(AS({objType:AC.VIZ_BOX_CONTAINER}));if(DD.mousePos){DE=DC.getToolbarConfig(Ab.GM_SVG_CHART,{},true);DC.hideTooltip();AN.call(DC,DD.mousePos,DE);}return ;}var DB=C7[0],DA=DB.getAttribute("type"),C9=DB.identity,C8={visGM:DD,identity:C9,subType:DB.getAttribute("subtype"),orgType:DA};this.fmtFake=true;this.highlightByFormat(DB);this.fmtFake=false;DE=DC.getToolbarConfig(DA,C8,true);if(DE){DC.hideTooltip();if(DD.mousePos){AN.call(DC,DD.mousePos,DE);}}},highlightByFormat:function(DB){var DA=DB.getAttribute("type"),C9=this.fmtState,DC=this.widget,DD=false,DE;if(Bx(DA)){this.clearSelectedTargets();this.clearContextMenuSelectedTargets();if(C9===Bj.NORMAL||C9===Bj.PER_COLORBY){DE=this.handleClickOnShapeFMT(DB,DD);C9=Bj.PER_COLORBY;}else{if(DD){DE=this.handleDblClickOnShapeFMT(DB,DD);}else{DC.clearUserSelections();DE=this.handleClickOnShapeFMT(DB,DD);C9=Bj.PER_COLORBY;}}if(DE===0){C9=Bj.NORMAL;}this.fmtState=C9;DC.onFormatableTargetChanged();}else{if(CQ(DA)||A2(DA)||h(DA)||t(DA)||M(DA)||AY(DA)||Ao(DA)||Ay(DA)||Ay(DA)||B0(DA)||BM(DA)||AA(DA)||Bm(DA)){DC.clearUserSelections();this.fmtMode=true;this.selectTarget(this.getTargetsWithSameType(DB));this.fmtMode=false;}else{this.clearSelectedTargets();this.clearContextMenuSelectedTargets();DC.clearUserSelections();}var C8=this.getSelectedTargetsIdentities(),C7=[];CZ.forEach(C8,function(DF){switch(DF.objType){case AC.ROW_TITLE:C7.push({objType:AC.ROWS_BACKGROUND});break;case AC.COL_TITLE:C7.push({objType:AC.COLS_BACKGROUND});break;case AC.REF_LINE:case AC.TREND_LINE:DF.key=DF.lineModel.trendLineModel.metricId;break;default:break;}});if(C8.length===0){C8={objType:AC.VIZ_BOX_CONTAINER};}else{if(C7.length){C8=C8.concat(C7);}}DC.raiseEventOnNonFormattingIdentity(AS(C8));}},addFormatOption:function(C8,C9){var DB=this;if(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()){return ;}if(!mstrApp.allowWebDashboardDesign()){return ;}if(C8&&C8.menus&&C8.menus.length>0){C8.addSeparator();}var C7=DB.contextMenuSelectedTargets.length?DB.contextMenuSelectedTargets:DB.contextMenuSelection;var DA=[];CZ.forEach(C7,function(DD){var DC=DD.cloneNode();DC.identity=DD.identity;DA.push(DC);});if(C9){C8.addMenuItem("","separator",function(){return false;},{},C9+1);C8.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){DB.formatHandler(DA);},{},C9+2);C8.addMenuItem("","separator",function(){return false;},{},C9+3);}else{C8.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){DB.formatHandler(DA);});}},copeTargetChangeForDBLClick:function(C9){var C8,C7=[];CZ.forEach(C9||[],function(DB){var DA=DB.getAttribute("type");if(DA===Ab.GM_ROW_HEADER||DA===Ab.GM_ROW_HEADER_EXTRA||DA===Ab.GM_ROW_HEADER_TITLE||DA===Ab.GM_COL_HEADER||DA===Ab.GM_COL_HEADER_TITLE||DA===Ab.GM_COL_HEADER_EXTRA){C8=CG(DB,"type",[Ab.GM_TEXT_BODY]);if(C8.length>0){C7.push(C8[0]);}else{C7.push(DB);}}else{C7.push(DB);}});return C7;},getRealTargetForSetShape:function(DF,DG){var DA=DF.getAttribute("type"),DC,DH=DF,DD=this.widget,DI=DD.domGM.childNodes[0],C9,C7=this.widget.GMController.getChartInfo(),DB=Ci.getMouseOffset(DG),DJ=(DG.button===2);if(DA===Ab.GM_SVG_CHART){DI.style.zIndex="-2";DC=document.elementFromPoint(DG.pageX,DG.pageY);DI.style.zIndex="auto";C9=DC.getAttribute("type");if(DJ&&(C9===Ab.LINE_CONTAINER||C9===Ab.GM_H_GRID_LINE||C9===Ab.GM_V_GRID_LINE||C9===Ab.GM_H_MINOR_GRID_LINE||C9===Ab.GM_V_MINOR_GRID_LINE)){DH=DC;}else{if(C7.tp===Cf.LINE&&C7.shape===Bo.LINE){var C8=this.getLinePoint(DF,C7,DB.x,DB.y);if(C8){DH=C8;}else{DH=DC;}}}}else{if(DA===Ab.GM_SET_SHAPE&&C7.tp===Cf.AREA&&C7.shape===Bo.AREA){var DE=this.getAreaPoint(DF,C7,DB.x,DB.y);if(DE){DH=DE;}}}return DH;},handleClick:function(DR,C8,DN,C7){var DG;DR=this.getRealTargetForSetShape(DR,DN);var DQ=x(DR);if(DQ&&(DQ.tagName===BH.POLYGON||DQ.tagName===BH.LINE)){DG=DQ;}var DC=this.widget,DM=DR.getAttribute("type"),DO=this.fmtMode?AV(DR):AZ(DR),C9=this.fmtMode,DI,DA,DS=this.gmMenuOnCloseFlag?true:false,DH=this.fmtState;var DF=DC.isClearAllDisabled();DC.clearCxtMnuSelection(true);this.gmMenuOnCloseFlag=false;if(!!C7){if(DO){DA=DO.getAttribute("type");if(!Bx(DA)){return ;}}else{return ;}}if(!DO){if(DF){return ;}if(DS===false){DC.clearUserSelections();this.clearSelectedTargets();}if(C9){DC.raiseEventOnFormattingIdentity([]);}if(Ci.isOnExpressMode()){DC.singleUnitSelect();}return ;}DA=DO.getAttribute("type");if(C9){if(Bx(DA)){this.clearSelectedTargets();this.clearContextMenuSelectedTargets();if(DH===Bj.NORMAL||DH===Bj.PER_COLORBY){DI=this.handleClickOnShapeFMT(DO,C8);DH=Bj.PER_COLORBY;}else{if(C8){DI=this.handleDblClickOnShapeFMT(DO,C8);}else{DC.clearUserSelections();DI=this.handleClickOnShapeFMT(DO,C8);DH=Bj.PER_COLORBY;}}if(DI===0){DH=Bj.NORMAL;}this.fmtState=DH;DC.onFormatableTargetChanged();}else{if((DM===Ab.GM_TEXT_BODY)||CQ(DA)||A2(DA)||h(DA)||t(DA)||M(DA)||AY(DA)||Ao(DA)||Ay(DA)||Ay(DA)||B0(DA)||BM(DA)||AA(DA)||Bm(DA)){DC.clearUserSelections();this.clearSelectedTargets();this.clearContextMenuSelectedTargets();this.selectTarget(this.getTargetsWithSameType(DO));}else{this.clearSelectedTargets();this.clearContextMenuSelectedTargets();DC.clearUserSelections();}var DB=this.getSelectedTargetsIdentities();DC.raiseEventOnFormattingIdentity(AS(DB));}}else{if(Ci.isOnExpressMode()){var DJ=M(DA)&&(DO.identity&&DO.identity.mOriId);var DK=Bx(DA)||CQ(DA)||A2(DA);DC.processSelectedMetricIds(DK,DJ,C8);DC.precessSelectedAttributes(DK,DJ,C8);if(Bx(DA)){this.handleClickOnShape(DO,C8);DC.endSelections();}else{if(DA===Ab.GM_ROW_HEADER||DA===Ab.GM_COL_HEADER||DA===Ab.GM_ROW_HEADER_TITLE||DA===Ab.GM_COL_HEADER_TITLE){DC.clearSelectedShapesAndCharts();this.handleClickOnTarget(DR,C8,Cm);DC.endSelections();}else{if(AA(DA)||Bm(DA)){DC.clearUserSelections();this.clearSelectedTargets();this.clearContextMenuSelectedTargets();this.selectTarget(this.getTargetsWithSameType(DO));}else{if(DC.hasMetricSelector()&&M(DA)){if(DO.identity.mOriId){DC.selectedMetricIds.push(DO.identity.mOriId);DC.endSelections();}}else{this.clearSelectedTargets();this.clearContextMenuSelectedTargets();DC.clearUserSelections();}}}}}else{if(Bx(DA)){if(DF&&this.selectedShapes.indexOf(DO)>-1){return ;}this.handleClickOnShape(DO,C8);DC.endSelections();}else{if(DA===Ab.GM_ROW_HEADER||DA===Ab.GM_COL_HEADER||DA===Ab.GM_ROW_HEADER_TITLE||DA===Ab.GM_COL_HEADER_TITLE){if(DF&&this.selectedTargets.indexOf(DO)>-1){return ;}DC.clearSelectedShapesAndCharts();this.handleClickOnTarget(DR,C8,Cm);DC.endSelections();}else{if(DA===Ab.GM_XLABEL||DA===Ab.GM_YLABEL){DC.clearSelectedShapesAndCharts();DC.endSelections();this.handleClickOnTarget(DR,C8,DA);}else{if(AA(DA)||Bm(DA)){this.clearSelectRules();DC.clearSelections(true);DC.endSelections();this.selectTarget(this.getTargetsWithSameType(DO));}else{if(DS===false){var DE=this.selectedTargets.length>0&&this.selectedTargets[0],DD=DE&&DE.getAttribute("type"),DL=this.selectedShapes.length>0&&this.selectedShapes[0],DP=DL&&DL.getAttribute("type");if(DF&&((DE&&(DD===Ab.GM_ROW_HEADER||DD===Ab.GM_COL_HEADER))||(DL&&Bx(DP)))){return ;}this.clearSelectRules();DC.clearSelections(true);DC.endSelections();}}}}}}}if(DG){this.selectPolyShape(DG);}this.toggleGMFade();this.gmMenuOnCloseFlag=false;},selectPolyShape:function(DE){var DF=this.selectedShapes,C7=this.selectedPolyShapes,C9=DF.length;if(C9===0&&C7.length>0){Ca(DE,s.NORMAL);C7.length=0;}var DD=this;CZ.forEach(DF,function(DG){if(x(DG)===DE){if(DE.getAttribute("status")!==s.SELECTED){Ca(DE,s.SELECTED);DD.selectedPolyShapes.push(DE);}}});var C8,DC;for(var DB=C7.length-1;DB>=0;DB--){C8=false;for(var DA=0;DA<C9;DA++){DC=DF[DA];DE=C7[DB];if(x(DC)===DE){C8=true;break;}}if(!C8){Ca(DE,s.NORMAL);C7.splice(DB,1);}}},deselectTarget:function(DB){var DA=this.widget,C8=DA.manager,C7=DB.identity,C9=DB.getAttribute("type");BD(DB,s.NORMAL);this.selectedTargets=(this.selectedTargets||[]).filter(function(DC){return DC!==DB;});if(C9===Ab.GM_ROW_HEADER){A9(DB,false,"selected",C8);A9(DB,false,"sh",C8);DA.removeAttributeSelection(C7.tid,C7.eid);}if(C9===Ab.GM_COL_HEADER){a(DB,false,"selected",C8);a(DB,false,"sh",C8);DA.removeAttributeSelection(C7.tid,C7.eid);}},toggleSelectTarget:function(C8){if(M(this.selType)){var C7=Cc(C8)||Ag(C8);Z.call(this,C8);if(C7){return false;}}else{if(Cc(C8)||Ag(C8)){this.deselectTarget(C8);this.deselectBorders(C8);return false;}}this.selectTarget(this.getTargetsWithSameType(C8));return true;},handleClickOnTarget:function(DA,DB,C9){var C8=this.fmtMode?AV(DA):AZ(DA);if(!DB||this.selType!==C9){var C7=(this.selectedTargets&&this.selectedTargets.length===1&&this.selectedTargets[0]===C8);this.clearSelectedTargets();this.selType=C9;if(C7){return 0;}}this.toggleSelectTarget(C8);},handleRMClickOnTarget:function(DA,DB){var C9=DA.getAttribute("type");this.clearContextMenuSelectedTargets();if(C9!==Ab.LASSO_SELECTOR){var C8=this.selectedTargets||[],C7=C8&&C8.indexOf(DA)!==-1;if(!C7&&!Cb.call(this,DA,C9)&&DB===false){if(!mstrApp.isAppStatePresentation()&&(h(C9)||t(C9)||Ao(C9)||Ay(C9))){this.fmtMode=true;this.RMSelectTarget(this.getTargetsWithSameType(DA));this.fmtMode=false;}else{this.RMSelectTarget(this.getTargetsWithSameType(DA));}}else{if(C7&&DB===false){this.cloneTargetSelectionToTargetContextMenuSelection();}}}else{this.cloneSelectionToContextMenuSelection();}return this.contextMenuSelectedTargets.length;},cloneTargetSelectionToTargetContextMenuSelection:function(){var C7=this.selectedTargets,C9;for(var C8=0;C8<C7.length;C8++){C9=C7[C8];this.RMSelectTarget(this.getTargetsWithSameType(C9));}},handleDblClick:function(DD,C7,DE){DD=this.getRealTargetForSetShape(DD,DE);var C8,DF,DC=this.fmtMode,DA=this.fmtState,C9=DC?AV(DD):AZ(DD),DB=this.widget;if(!C9){DB.clearUserSelections();this.clearSelectedTargets();this.clearContextMenuSelectedTargets();if(DC){DB.raiseEventOnFormattingIdentity([]);}return ;}if(C9&&DC){DF=C9.getAttribute("type");if(Bx(DF)){if(DA===Bj.NORMAL||DA===Bj.PER_SHAPE){C8=this.handleDblClickOnShapeFMT(C9,C7);DA=Bj.PER_SHAPE;}else{if(C7){C8=this.handleClickOnShapeFMT(C9,C7);}else{DB.clearUserSelections();C8=this.handleDblClickOnShapeFMT(C9,C7);DA=Bj.PER_SHAPE;}}if(C8===0){DA=Bj.NORMAL;}this.fmtState=DA;DB.onFormatableTargetChanged();}else{DB.clearUserSelections();this.clearSelectedTargets();this.clearContextMenuSelectedTargets();this.selectTarget(this.copeTargetChangeForDBLClick(this.getTargetsWithSameTypeForDBL(C9)));var DG=this.getSelectedTargetsIdentities();DB.raiseEventOnFormattingIdentity(AS(DG));}}},handleDblClickOnShapeFMT:function(DC,DE){var DA,C9,C7,DB=DC.getAttribute("type"),DD=this.breakByRules,C8=this.breakByShapes;if(DB===Ab.GM_MARKER){DA=DC.source;}else{DA=DC;}if(!DE){this.clearSelectRules();}C9=Aa(DA);if(Cc(DA)){C7=Bb(DD,C9);if(C7!==-1){DD.splice(C7,1);C8.splice(C7,1);}}else{DD.push(C9);C8.push(DA);}this.doHighlight(A4.METRICS,DD);return DD.length;},handleClickOnShapeFMT:function(DB,DD){var C9,C8,DA=DB.getAttribute("type"),DC=this.colorByRules,C7=this.colorByShapes;if(DA===Ab.GM_MARKER){C9=DB.source;}else{C9=DB;}if(!DD){this.clearSelectRules();}C8=A3(C9);DC.push(C8);C7.push(C9);this.widget.GMController.resetHighLightIndex=true;this.doHighlight(A4.METRICS,DC);return DC.length;},toggleGMFade:function(C8){var C7=this.widget.domGM;C8=(C8===undefined)?(this.selectedShapes.length>0||this.contextMenuSelection.length>0):C8;B3.toggleClass(C7,"gm-fade",C8);},handleClickOnShape:function(DC,C7){var DD,C8=false,DH=this.selectedShapes,DF=DC.getAttribute("type"),DB=this.widget,DG=DB&&DB.parent;if(!Bx(DF)){return -1;}if(DF===Ab.GM_MARKER){DD=DC.source;}else{DD=DC;}if(!C7){C8=DH.length===1&&DH[0]===DD;if(!C8||!DB.isClearAllDisabled()){DB.clearSelections(true);}if(C8){return 0;}}else{this.clearSelectedTargets(C7);this.clearContextMenuSelectedTargets();}var DA=DB.getWidgetPropertyValue(C6.SELECTION_LIMIT);if(C7&&(Object.keys(DB._viSelections).length+1>DA)){var DE=this,C9=function(){DB.clearSelections(true);DE.selectedShapes=[];};mstrmojo.alert(mstrmojo.desc(16269,"The amount of data points you have selected is outside the maximum limit.")+"\n \n"+mstrmojo.desc(16270,"To increase the maximum limit on data point selection, please go to Format Panel > Data Exploration > More Options."),C9);}else{this.toggleSelectShape(DD);}DB.displayVizBoxVisFilterIndicator(true,DG);return this.selectedShapes.length;},handleRMClickOnShape:function(DC,DD){var C7,C9=DC.getAttribute("type"),DB=this.widget,DA=DB&&DB.parent;if(!Bx(C9)){return -1;}if(C9===Ab.GM_MARKER){C7=DC.source;}else{C7=DC;}var C8=this.selectedShapes.indexOf(C7)!==-1;if(C8&&DD===false){this.cloneSelectionToContextMenuSelection();}else{if(C8===false&&DD===false){this.RMSelectShape(C7);}}DB.displayVizBoxVisFilterIndicator(true,DA);return this.contextMenuSelection.length;},cloneSelectionToContextMenuSelection:function(){var DE=[],DC=[],C8=this.selectedShapes,C9,C7,DB,DA,DD;for(DA=0,DD=C8.length;DA<DD;DA++){C9=C8[DA];this.RMSelectShape(C9,true);DB=F(C9);C7=C9.getAttribute("subtype");if(C7===BH.PIE||C7===BH.RING||C7===BH.CIRCLE){if(DE.indexOf(DB)<0){DE.push(DB);DC.push(C7);}}}for(DA=0,DD=DE.length;DA<DD;DA++){DB=DE[DA];C7=DC[DA];DB.isSelected=true;Al(DB,C7);DB.isSelected=false;}},getLinePoint:function(DI,C9,DH,DF){var DA=function(DM){var DL=DM.length,DP=[],DN,DO;for(DO=0;DO<DL;DO++){DN=DM[DO];DP.push({point:Cy(DN),dom:DN});}return DP;};var DC=function(DL,DW,DR,DQ){var Da=DL[0],DT=Da&&Da.length||0,DV,DO=null,DZ=DW===Ae.VERTICAL,DX=false,DN,DU,DY,DM,DP;var DS=function(Dk,Dh,Df,De,Di){var Dc=Df.point[0],Dj=Df.point[1],Db=De.point[0],Dg=De.point[1],Dd=(Dg-Dj)/(Db-Dc);return Di?Dd*(Dk-Dc)+Dj-Dh:Dk-Dc+(Dj-Dh)/Dd;};for(DP=0;DP<DT;DP++){DN=DZ?DR-Da[DP].point[0]:DQ-Da[DP].point[1];if(DP===0||DU>Math.abs(DN)){DU=Math.abs(DN);DY=DP;}if(DN<0){break;}}DM=DP;if(DM>0&&DM<DT){for(DP=0;DP<DL.length;DP++){DV=DL[DP][DY];DN=DS(DR,DQ,DL[DP][DM-1],DL[DP][DM],DZ);if(DN<=0){DN=Math.abs(DN);DX=true;}if(DP===0||DN<DU){DU=DN;DO=DV.dom;}}}return DX?DO:null;};var DG=DI.childNodes,DB=DG.length-1,DE,DD,C7=[],DJ,C8;for(DD=0;DD<DB;DD++){DE=DG[DD+1];C8=CG(DE,"type",Ab.GM_SHAPE);DJ=DA(C8);if(DJ&&DJ.length>0){C7.push(DJ);}}var DK=DC(C7,C9.dirc,DH,DF);return DK;},isLineOrAreaPaint:function(DC){var DA,C7,C9=0,DD=this.widget,DE=DD.GMController,DB=DD.model.data.gsi.mx,C8=function(DF){switch(DF){case Bo.AREA:return"polygon";case Bo.LINE:return"polyline";}};if(DC!==undefined){DA=C8(DC);}else{CZ.forEach(DB,function(){DC=DE.getOnTheFlyShapeForMetric(C9++);DA=C8(DC);if(DA){return false;}});}if(DA){C7=DD.domGM.getElementsByTagName(DA);for(C9=0;C9<C7.length;C9++){if(C7[C9].getAttribute("type")==="set-shape"){return true;}}}return false;},hoverAreaChartPoint:function(DC,C7,DA,C8){var C9=DC.parentNode,DG=CZ.filter(C9.childNodes,function(DH){return DH.tagName==="circle";}),DD,DB,DE;CZ.forEach(DG,function(DH,DJ){var DI=Cy(DH),DK;if(C7.dirc===Ae.VERTICAL){DK=Math.abs(DA-DI[0]);}else{DK=Math.abs(C8-DI[1]);}if(DJ===0||DK<DD){DD=DK;DB=DH;DE=DI;}});if(DB){var DF=BR.position(C9.parentNode);this.hoverShape(DB);this.showTooltip(DB,{x:DF.x+DE[0],y:DF.y+DE[1]});}},hoverLineChartPoint:function(DC,C7,DB,C9){var DF=this.getLinePoint(DC,C7,DB,C9);if(DF&&DF!==this.hoveredShape){var DE=Cy(DF),DD=BR.position(DC);var DA=DD.x+DE[0],C8=DD.y+DE[1];this.hoverShape(DF);this.showTooltip(DF,{x:DA,y:C8});}},hoverLineWithDataPoint:function(C9){var C8,C7;if((C9.getAttribute("subtype")===BH.SCIRCLE)){C8=C9.parentNode;C7=C8&&C8.querySelector(".gm-set-polyline");if(C7){this.hoverSetShape(C7);}}},handleMouseOver:function(DA,DC,C7,DB){var C9=this.fmtMode?AV(DA):AZ(DA),C8;if(!C9){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();return ;}C8=C9.getAttribute("type");if(C8===Ab.GM_SHAPE){this.clearHoveredSetShape();this.clearHoveredShape();this.clearHoveredTarget();this.hoverShape(C9);this.hoverLineWithDataPoint(C9);this.hoverOverSelectedShape(C9);}else{if(C8===Ab.GM_SET_SHAPE&&DC.tp===Cf.AREA&&DC.shape===Bo.AREA){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();this.hoverAreaChartPoint(C9,DC,C7,DB);}else{if(C8===Ab.GM_SET_SHAPE){this.clearHoveredSetShape();this.clearHoveredShape();this.clearHoveredTarget();this.hoverSetShape(C9);}else{if(C8===Ab.GM_SVG_CHART&&DC.tp===Cf.LINE&&DC.shape===Bo.LINE){this.clearHoveredShape();this.clearHoveredSetShape();this.clearHoveredTarget();this.hoverLineChartPoint(DA,DC,C7,DB);}else{this.clearHoveredShape();this.clearHoveredSetShape();this.hoverTarget(this.getTargetsWithSameType(C9,true));if(!this.isToolbarShow()){this.hoverSelectedTarget([C9]);}}}}}},isToolbarShow:function(){return this.domToolbarPH&&this.domToolbarPH.firstChild;},getDisplayFormsMenu:function(C8){var C7=this.widget.zonesModel;return Cv.getDisplayFormsMenu(C8,C7.getHost(),C7.docModel.datasets,function(C9){C7.submitDropZoneUpdates(C9);});},handleRMCOnLegend:function(DC,DG){var DF=DC.getAttribute("type"),DH=this.widget.legend,C7,DD,C9,DA,DE=this;if(mstrApp.isInVFInteractMode||mstrApp.isDossier||(mstrApp.appState&mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION)){return ;}if(DF!==Ab.LGD_COLORBOX&&DF!==Ab.LGD_COLORBOX_CTN){DA=new W.ui.menus.MenuConfig();if(!mstrApp.isAppStatePresentation()&&mstrApp.allowWebDashboardDesign()){DA.addMenuItem(mstrmojo.desc(1918,"Format"),"xt",function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");DE.widget.raiseEventOnNonFormattingIdentity(AS({objType:AC.LEGEND}));switch(DF){case Ab.LGD_TITLE:case Ab.LGD_TEXT:DH.selectText(true);var DI=[C6.LEGEND_FONT_SIZE,C6.LEGEND_FONT_FAMILY,C6.LEGEND_FONT_STYLE,C6.LEGEND_FONT_COLOR];C7=K(DE.widget,"lgd",DI,B1.GLOBAL,undefined,false);break;default:DH.selectLegendBody();var DJ=[C6.LEGEND_BG_COLOR,C6.LEGEND_BG_FILL_TRANSPARENCY];C7=Aj(DE.widget,mstrmojo.desc(2885,"Fill"),DJ,B1.GLOBAL);break;}if(C7){DE.hideTooltip();AN.call(DE,DG,C7,true);}});Ak.call(DE,DG,DA);switch(DF){case Ab.LGD_TITLE:case Ab.LGD_TEXT:DH.selectText(true);break;default:DH.selectLegendBody();break;}}}if(!this.fmtMode&&(DF!==Ab.LGD_COLORBOX)&&(DF!==Ab.LGD_COLORBOX_CTN)){return false;}switch(DF){case Ab.LGD_COLORBOX_CTN:case Ab.LGD_COLORBOX:if(DF===Ab.LGD_COLORBOX){DC=DC.parentNode;}DD=DC.firstChild.identity;if(DD&&DD.comb){this.widget.colorSqureIdentity=DD;DH.selectColorBox(DC,this.fmtMode);C7=Bg(this.widget,C6.COLOR_SQUARE_COLOR,B1.GLOBAL,{showAutomatic:true});DG=DH.adjustColorPickerPos(DC);if(!DG.alignLeft){C9=C7.ENUM_CORNERS;C7.setAlignment(C9.BOTTOM_LEFT,C9.TOP_RIGHT);}}break;case Ab.LGD_TITLE:case Ab.LGD_TEXT:DH.selectText(true);var DB=[C6.LEGEND_FONT_SIZE,C6.LEGEND_FONT_FAMILY,C6.LEGEND_FONT_STYLE,C6.LEGEND_FONT_COLOR];C7=K(this.widget,"lgd",DB,B1.GLOBAL,undefined,false);break;default:DH.selectLegendBody();var C8=[C6.LEGEND_BG_COLOR,C6.LEGEND_BG_FILL_TRANSPARENCY];C7=Aj(this.widget,mstrmojo.desc(2885,"Fill"),C8,B1.GLOBAL);break;}if(C7){this.hideTooltip();AL.call(this,DG,C7,true);}},hideContextMenu:function(){var C9=this.domMenuPH,DB=C9.firstChild,C7=C9.parentNode,C8=this.widget;p.destroyDisposable(C8,C8.menuEditor);if(DB){C9.removeChild(DB);}if(C7){C7.removeChild(C9);}var DA=C8.menuEditor;if(DA){C8.removeChildren(DA);DA.unrender=function(){DA._super();};DA.destroy();DA.unrender=function(){};delete C8.menuEditor;}if(C8.menuEditorClosefn){BR.detachEvent(document.body,C2,C8.menuEditorClosefn,true);delete C8.menuEditorClosefn;}},hideToolbar:function(){var C9=this.domToolbarPH,DB=C9.firstChild,C7=C9.parentNode,C8=this.widget;p.destroyDisposable(C8,C8.toolEditor);if(DB){C9.removeChild(DB);C8.clearUserSelections();if(C8.legend){C8.legend.clearSelectedTargets();}}if(C7){C7.removeChild(C9);}var DA=C8.toolEditor;if(DA){C8.removeChildren(DA);DA.unrender=function(){DA._super();};DA.destroy();DA.unrender=function(){};delete C8.toolEditor;B3.toggleClass(document.body,"hasToolbarPopup",false);B3.toggleClass(C9,mstrApp.getThemeClassName(),false);}if(C8.toolEditorClosefn){BR.detachEvent(document.body,C2,C8.toolEditorClosefn,true);delete C8.toolEditorClosefn;}},handleMouseMove4DropZone:function(C7,DA){var C9=this.widget,C8=this.prepare4DropZoneManipulation(C7,DA,C9);if(!C8.process){return ;}},doHighlight:function(DE,DB){var C7,DD,DC=this.widget,DA=DC.manager,C8=Av.clone(DB);DC.clearSelections(true,true);if(DE===A4.METRICS){Av.forEach(DB,function(DL){DC.addMetricValueSelection(DL);});}else{if(DE===A4.ATTS){Av.forEach(DB,function(DL){Av.forEach(DL,function(DM,DN){CZ.forEach(DM,function(DO){DC.addAttributeSelection(DN,DO.id,DO.n);});});});}}if(DA){if(DE===A4.METRICS){var DH=Object.keys(DB);if(DH[0]){C8={};var DK=DC.GMController.checkAttributeIntersection(DB[DH[0]],["Rows","Columns","XAxis","YAxis","BreakBy"]);if(DK.length===1){var DG=DK[0],DJ=[];Av.forEach(DB,function(DL,DM){Av.forEach(DL,function(DO,DN){if(DN===DG&&DJ.indexOf(DO[0].id)===-1){DJ.push(DO[0].id);C8[DM]={};C8[DM][DN]=DO;}});});}DD=DA.filterCharts(C8);if(DD&&DD.length>0){g.call(this,DD);}else{C8=Av.clone(DB);C7=DA.filterShapes(C8);if(C7&&C7.length>0){this.selectShapes(C7);}}}else{C8=Av.clone(DB);C7=DA.filterShapes(C8);if(C7&&C7.length>0){this.selectShapes(C7);}}}else{if(DE===A4.ATTS){C8=Av.clone(DB);DD=DA.filterCharts(C8);if(DD&&DD.length>0){g.call(this,DD);}else{if(!Av.isEmpty(DB)){C8=Av.clone(DB);var DF=DC.model.data.dz,DI=(DF.XAxis.TemplateUnit||[]).concat(DF.YAxis.TemplateUnit||[]),C9=[];CZ.forEach(DI,function(DL){C9.push(DL.id);});C7=DA.filterShapes(C8);if(C7&&C7.length>0){this.selectShapes(C7);}}}}}}if((DD&&DD.length>0)||Av.isEmpty(DB)||(DB&&DB.length===1&&DB[0].hashKey==="")){this.toggleGMFade(false);}DC.resetSelectionEmptyFlag();},prepare4DropZoneManipulation:function(DJ,DI,DA,Da){if(DA.isEmpty()){return{process:true,box:this.getComponentBBox(DA,Ab.GM_MINI_CHART),row:0,col:0};}var DU,DD,DC,Dc,DH,DG,DZ,DW,DO=BR.position(DA.domMainContainer),DV=this.getComponentBBox(DA,Ab.GM_YAXIS,true),DT=this.getComponentBBox(DA,Ab.GM_YAXIS),DP=this.getComponentBBox(DA,Ab.GM_XAXIS),DL=this.getComponentBBox(DA,Ab.GM_MINI_CHART),DY=this.getComponentBBox(DA,Ab.GM_YAXIS2),DB=this.getComponentBBox(DA,Ab.GM_XAXIS2),DQ=this.isAxisPrimary(DA.currEnteredDropZoneID),DN=DA.manager,DF=DQ?DN.yAxis:DN.yAxis2,DS=DQ?DN.xAxis:DN.xAxis2,C9=DQ?DN.xAxis2:DN.xAxis,DX=DQ?DN.yAxis2:DN.yAxis,DM=DN.master,Db={process:false},C7=function(Dg,Df,De){Dg.left+=Df;Dg.top+=De;};var DK=this.getZoneItems(DA.currEnteredDropZoneID,DA,true),DR=DK.length,C8=function(Dl,Dk,Dh){var Dm=Dl%Dk,De=Dl-Dm,Dg=De+Dk-1,Dj=[],Df,Di;for(DU=De;DU<=Dg;DU++){Df=Da==="V"?Dh.getChart(DU,0):Dh.getChart(0,DU);Di=Df&&Df.labelDiv;Di=Di&&Di.firstChild;if(Di){Dj.push({node:Di,nodePos:BR.position(Di),nodeContent:AR(Di)});}}return Dj;},Dd=function(Dh,Df,De,Dg){DZ=Dh&&Dh.labelDiv;DW=Dh&&Dh.combinedLabelDiv;DZ=DZ&&DZ.firstChild;if(DZ){Db.dzId=parseInt(DZ.getAttribute("dzId"),10);Db.axisIndex=parseInt(DZ.getAttribute("dzIndex"),10);if(De){Db.labelNodes=C8(Df,DR,De);}}if(DW&&!Dg){Db.labelNodes=[{node:DW,nodePos:BR.position(DW),clonedNode:DW.cloneNode(true)}];}return DZ;},DE=function(Dh,Df,De,Dg){if(!Dd(Dh,Df,De)){Dd(Dg,null,null,true);}};DJ=DJ-DO.x;DI=DI-DO.y;if(G(DJ,DI,DV)){DJ-=DT.left;DI-=DT.top;DD=DF.doRowIntersectionCheck(DI,DI,true).start;Dc=DF.getChartBBox(DD,0,true);DG=DF.getChart(DD,0);C7(Dc,DT.left,DT.top);Db.process=true;Db.box=Dc;Db.nearToV=((DI-Dc.top)<(Dc.height>>1))?0:1;Db.row=DD;Db.col=0;DE(DG,DD,DF,DX&&DX.getChart(DD,0));}else{if(G(DJ,DI,DP)){DJ-=DP.left;DI-=DP.top;DC=DS.doColIntersectionCheck(DJ,DJ,true).start;Dc=DS.getChartBBox(0,DC,true);DH=DS.getChart(0,DC);DZ=DH.labelDiv;DW=DH.combinedLabelDiv;C7(Dc,DP.left,DP.top);Db.process=true;Db.box=Dc;Db.row=0;Db.col=DC;Db.nearToH=((DJ-Dc.left)<(Dc.width>>1))?0:1;DE(DH,DC,DS,C9&&C9.getChart(0,DC));}else{if(G(DJ,DI,DL)){DJ-=DL.left;DI-=DL.top;DM=DN.master;DD=DM.doRowIntersectionCheck(DI,DI,true).start;DC=DM.doColIntersectionCheck(DJ,DJ,true).start;Dc=DM.getChartBBox(DD,DC,true);DG=DF&&DF.getChart(DD,0);DH=DS&&DS.getChart(0,DC);C7(Dc,DL.left,DL.top);Db.process=true;Db.box=Dc;Db.row=DD;Db.col=DC;Db.nearToV=((DI-Dc.top)<(Dc.height>>1))?0:1;Db.nearToH=((DJ-Dc.left)<(Dc.width>>1))?0:1;if(Da==="H"){DE(DH,DC,DS,C9&&C9.getChart(0,DC));}else{DE(DG,DD,DF,DX&&DX.getChart(DD,0));}}else{if(G(DJ,DI,DY)){DJ-=DY.left;DI-=DY.top;if(!DF){return Db;}DD=DF.doRowIntersectionCheck(DI,DI,true).start;Dc=DF.getChartBBox(DD,0,true);DG=DF.getChart(DD,0);C7(Dc,DY.left,DY.top);Db.process=true;Db.box=Dc;Db.nearToV=((DI-Dc.top)<(Dc.height>>1))?0:1;Db.row=DD;Db.col=0;DE(DG,DD,DF,DX&&DX.getChart(DD,0));}else{if(G(DJ,DI,DB)){DJ-=DB.left;DI-=DB.top;if(!DS){return Db;}DC=DS.doColIntersectionCheck(DJ,DJ,true).start;Dc=DS.getChartBBox(0,DC,true);DH=DS.getChart(0,DC);C7(Dc,DB.left,DB.top);Db.process=true;Db.box=Dc;Db.row=0;Db.col=DC;Db.nearToH=((DJ-Dc.left)<(Dc.width>>1))?0:1;DE(DH,DC,DS,C9&&C9.getChart(0,DC));}}}}}return Db;},getBackGroundColor:function CC(C7){return B3.getComputedStyle(C7.domGM).backgroundColor;},toggleHoverEffect:function Bc(C7,C9){var C8,DB,DC,DA;if(C9){C8=C7.domNode.getElementsByClassName("disable-draggable");DB=C8.length;for(DA=DB-1;DA>=0;DA--){DC=C8[DA];B3.addClass(DC,"draggable");B3.removeClass(DC,"disable-draggable");}}else{C8=C7.domNode.getElementsByClassName("draggable");DB=C8.length;for(DA=DB-1;DA>=0;DA--){DC=C8[DA];B3.removeClass(DC,"draggable");B3.addClass(DC,"disable-draggable");}}},getComponentBBox:function(DD,DH,DF){var DK,DJ,C9,DE={};DK=DJ=0;DE.left=DE.top=DE.width=DE.height=0;if(DD.isEmpty()){var DI=DD.domNode.offsetWidth,DC=DD.domNode.offsetHeight;switch(DH){case Ab.GM_ROW_HEADER:DE.height=DC;break;case Ab.GM_COL_HEADER:DE.width=DI;break;case Ab.GM_YAXIS:DE.height=DC;break;case Ab.GM_XAXIS:DE.top=DC;DE.width=DI;break;case Ab.GM_MINI_CHART:DE.width=DI;DE.height=DC;break;case Ab.GM_YAXIS2:DE.height=DC;DE.left=DI;break;case Ab.GM_XAXIS2:DE.width=DI;break;}return DE;}switch(DH){case Ab.GM_ROW_HEADER:C9=DD.domRowHeader;break;case Ab.GM_COL_HEADER:C9=DD.domColHeader;break;case Ab.GM_YAXIS:C9=DD.domYAxis;break;case Ab.GM_XAXIS:C9=DD.domXAxis;break;case Ab.GM_MINI_CHART:C9=DD.domGM;break;case Ab.GM_YAXIS2:C9=DD.domYAxis2;break;case Ab.GM_XAXIS2:C9=DD.domXAxis2;break;}var DG=function(DM){var DL=parseFloat(DM);DL=isNaN(DL)?0:DL;return Math.floor(DL+0.5);};if(C9){if(DH===Ab.GM_XAXIS2&&DD.domColHeader){DK=DG(DD.domColHeader.style.left);}DE.left=DG(C9.style.left)+DK;DE.top=DG(C9.style.top)+DJ;DE.width=DG(C9.style.width);DE.height=DG(C9.style.height);}else{if(DH===Ab.GM_XAXIS2){DE.left=DD.offsetX;DE.top=DD.offsetY;DE.width=DD.GMW;DE.height=0;}}if(DF){if(DH===Ab.GM_COL_HEADER){var C8=DD.colHeaderHArr,C7=0;var DB;for(DB=0;C8&&DB<C8.length;DB++){C7+=C8[DB];}DE.height=C7;DE.width+=DG(DD.colTitleW);DE.left-=DG(DD.colTitleW);}else{if(DH===Ab.GM_ROW_HEADER){DE.top-=DG(DD.rowTitleH);DE.height+=DD.actualHeight-DE.top;}else{if(DH===Ab.GM_YAXIS){var DA=this.getComponentBBox(DD,Ab.GM_COL_HEADER,true);DE.top=DA.height;DE.height=DD.actualHeight-DE.top;}}}}return DE;},getOppositeZoneID:function Bz(C8){var C7=null;switch(C8){case Ab.GM_XAXIS:C7=Ab.GM_XAXIS2;break;case Ab.GM_XAXIS2:C7=Ab.GM_XAXIS;break;case Ab.GM_YAXIS:C7=Ab.GM_YAXIS2;break;case Ab.GM_YAXIS2:C7=Ab.GM_YAXIS;break;}return C7;},isZoneOnGraphDropAllowed:function Co(C7,DE,DH){var DI=DH.dropZonesOnGraph[C7],DF=DI.zoneModel,DK=DE.item,DB=this.getOppositeZoneID(C7),DG=this.getZoneItems(DB,DH,true),C8=0,DJ=n(DH),DD,DC;if(DJ.isGraphDroppingAllowed(DF,DE.src,DE.item)){if(DJ.isMetric(DK)){if(DG&&DG.length>0&&DJ.isAttrCategory(DG[0])){return false;}if(DE.src!==C1.VIZ){for(DD in DH.dropZonesOnGraph){var DA=this.hasMetricInGraphZone(DD,DH,DE);if(DD!==C7&&DA){C8++;}}if(C8>=2){return false;}}if(DJ.isMetricZone(DF.id)&&DG.length>0){var DL=this.getDropZoneModelByCtlType(this.isWhichAxis(C7)==="x"?Ab.GM_ROW_HEADER:Ab.GM_COL_HEADER,DH),C9=false;for(DC=0;DC<DL.items.length;DC++){if(DJ.isMetricName(DL.items[DC])){C9=true;}}if(C9){if(DJ.isMetric(DG[0])&&DK.zone!==DG[0].zone){return false;}}}}return true;}return false;},getDropZoneIdByCtlType:function J(C7){var C8=null;if(C7===Ab.GM_ROW_HEADER){C8=Cn.Rows;}else{if(C7===Ab.GM_COL_HEADER){C8=Cn.Columns;}else{if(C7===Ab.GM_XAXIS||C7===Ab.GM_XAXIS2){C8=Cn.XAxis;}else{if(C7===Ab.GM_YAXIS||C7===Ab.GM_YAXIS2){C8=Cn.YAxis;}}}}return C8;},getDropZoneModelByCtlType:function AP(C8,C7){var C9=this.getDropZoneIdByCtlType(C8);return this.getZoneModelByZoneId(C9,C7);},getZoneModelByZoneId:function Bt(C9,C7){var C8=n(C7);return C8&&C8.getZoneModelByZoneId(C9);},hasMetricInGraphZone:function Bs(DD,C7,DE){var C8=this.getZoneItems(DD,C7,true),DB=C8.length,DA,C9=n(C7);if(DB<=0){return false;}if(DE.item&&(DE.src===C1.VIZ_EDITOR||DE.src===C1.VIZ)){var DC=CZ.find(C8,"did",DE.item.did);if(DC>=0){C8.splice(DC,1);}}for(DA=0;DA<C8.length;DA++){if(C9.isMetric(C8[DA])){return true;}}return false;},getDropZoneDirection:function AO(C8){var C7=null;if(C8===Ab.GM_COL_HEADER||C8===Ab.GM_XAXIS||C8===Ab.GM_XAXIS2){C7="H";}else{if(C8===Ab.GM_ROW_HEADER||C8===Ab.GM_YAXIS||C8===Ab.GM_YAXIS2){C7="V";}}return C7;},isWhichAxis:function l(C8){var C7=null;if(C8===Ab.GM_XAXIS||C8===Ab.GM_XAXIS2){C7="x";}else{if(C8===Ab.GM_YAXIS||C8===Ab.GM_YAXIS2){C7="y";}}return C7;},isAxisPrimary:function A(C8){var C7=null;if(C8===Ab.GM_XAXIS||C8===Ab.GM_YAXIS){C7=true;}else{if(C8===Ab.GM_XAXIS2||C8===Ab.GM_YAXIS2){C7=false;}}return C7;},getMetricIDAndDZIdxFromAxisIdx:function AD(C7,DE,DH,DD,DN){var C8=DD.GMController,DF=this.isWhichAxis(C7)==="x"?C8.isXDualAxis:C8.isYDualAxis,DG,DK,DL=this.getZoneItems(C7,DD),DR,DC,DB;var DP=C8.shallWeUseGroupInfo,DI=C8.hasGroupInfoStored();if(DP){DB=DI.gi;if(DE>=0&&DE<DB.length){DC=DB[DE];DK=DC.length===2&&(DH?DC[0]:DC[1]);}DG=CZ.find(DL,"did",DK);}else{if(DF){if(!DP){var DA=DH?C8.getPrimaryMetrics():C8.getSecondaryMetrics(),DM=C8.model.getMetricIds();if(DE>=0&&DE<DA.length){DG=DA[DE];DK=DM[DG];}}}else{DG=DE;var DQ={x:C8.getMetricsOnPrimaryXAxis,x2:C8.getMetricsOnSecondaryXAxis,y:C8.getMetricsOnPrimaryYAxis,y2:C8.getMetricsOnSecondaryYAxis};var DO=DQ[C7];if(DO&&DO.call(C8).length===0){DK=A6;}else{if(DE>=0&&DE<DL.length){DK=DL[DG].did;}}}}DR={metricID:DK,dzIndex:DG};var C9=[],DJ=0;if(DN){if(DB){if(!DH){C9[DJ++]=DC[0];}if(DE-1>=0){C9[DJ++]=DB[DE-1][1];C9[DJ++]=DB[DE-1][0];}DR.prevMetricDZIdx=-1;for(DJ=0;DJ<C9.length;DJ++){if(C9[DJ]!==A6){DR.prevMetricDZIdx=CZ.find(DL,"did",C9[DJ]);break;}}}else{DR.prevMetricDZIdx=DE;}}return DR;},getDropZonesOnGraph:function CO(C7,DD){var DA=C7.src.data,DG=DA.item,DH=n(DD),DE,DF,DB,DC=this;var C8=[];if(DH.isAttrCategory(DG)){C8=[Ab.GM_ROW_HEADER,Ab.GM_COL_HEADER];var C9=function(DI,DK,DJ){if(DH.isAttrCategoryZone(DI)){C8.push(DK);}else{if(DH.isMetricZone(DI)){if(DC.getZoneItems(DK,DD,true).length>0){C8.push(DK);}if(DC.getZoneItems(DJ,DD,true).length>0){C8.push(DJ);}}else{C8.push(DK);}}};C9(Cn.XAxis,Ab.GM_XAXIS,Ab.GM_XAXIS2);C9(Cn.YAxis,Ab.GM_YAXIS,Ab.GM_YAXIS2);}else{if(DH.isMetric(DG)){C8=[Ab.GM_XAXIS,Ab.GM_YAXIS,Ab.GM_XAXIS2,Ab.GM_YAXIS2];}}DD.dropZonesOnGraph={};for(DE in C8){DB=C8[DE];DF={zoneModel:this.getDropZoneModelByCtlType(DB,DD),direction:this.getDropZoneDirection(DB,DD)};DD.dropZonesOnGraph[DB]=DF;}for(DB in DD.dropZonesOnGraph){if(!this.isZoneOnGraphDropAllowed(DB,DA,DD)){delete DD.dropZonesOnGraph[DB];}}},calculateDropZoneOnGraphRange:function An(DD,C9){if(!DD.dropZonesOnGraph){this.getDropZonesOnGraph(C9,DD);}var DW=this,DK=Object.keys(DD.dropZonesOnGraph),DJ=DD.actualWidth,DS=DD.actualHeight,DU=DW.getComponentBBox(DD,Ab.GM_MINI_CHART),C8=DW.getComponentBBox(DD,Ab.GM_ROW_HEADER),DR=DW.getComponentBBox(DD,Ab.GM_YAXIS),DL=DW.getComponentBBox(DD,Ab.GM_COL_HEADER,true),DE=DW.getComponentBBox(DD,Ab.GM_XAXIS2),DP={x:DU.left+0.75*DU.width,y:DU.top+0.25*DU.height},DQ=DK.length,DC=C9.src.data,C7=DC.item,DN=n(DD),DO=DW.getZoneItems(DD.currEnteredDropZoneID,DD);var DH=function(DX){return DW.getDropZoneModelByCtlType(DX,DD).items.length===0;},DT=false;if(!DO&&DN.isAttrCategory(C7)&&DH(Ab.GM_YAXIS)){DT=true;}if(DD.dropZonesOnGraph[Ab.GM_ROW_HEADER]){DK.splice(DK.indexOf(Ab.GM_ROW_HEADER),1);DQ--;if(DT){delete DD.dropZonesOnGraph[Ab.GM_ROW_HEADER];}else{if(C8.width===0){if(DU.left<=1){C8.width+=30;DU.left+=30;DU.width-=30;}else{if(DR.width>0){var DF=Math.min(30,0.5*DR.width);C8.width+=DF;DR.left+=DF;DR.width-=DF;}}}DD.dropZonesOnGraph[Ab.GM_ROW_HEADER].areaCoords=[[0,DE.top,C8.width,DE.top,C8.width,DS,0,DS]];}}if(DD.dropZonesOnGraph[Ab.GM_COL_HEADER]){DK.splice(DK.indexOf(Ab.GM_COL_HEADER),1);DQ--;if(DL.height===0){if(DU.top>1){DL.height+=DU.top;DE.top+=DU.top;}else{DL.height+=30;DU.top+=30;DU.height-=30;DE.top+=30;}}DD.dropZonesOnGraph[Ab.GM_COL_HEADER].areaCoords=[[0,0,DJ,0,DJ,DE.top,0,DE.top]];}var DV=[DU.left,DS,DU.left,DU.top+DU.height,DU.left+DU.width,DU.top+DU.height,DU.left+DU.width,DS],DB=[C8.width,DU.top,DU.left,DU.top,DU.left,DS,C8.width,DS],DI=[DU.left,DE.top,DU.left+DU.width,DE.top,DU.left+DU.width,DU.top,DU.left,DU.top],DM=[DU.left+DU.width,DE.top,DJ,DE.top,DJ,DS,DU.left+DU.width,DS],DG=[C8.width,DE.top,DU.left,DE.top,DU.left,DU.top,C8.width,DU.top];switch(DQ){case 4:DD.dropZonesOnGraph[Ab.GM_XAXIS].areaCoords=[DV,[DU.left,DU.top+DU.height,DP.x,DP.y,DU.left+DU.width,DU.top+DU.height]];DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords=[DB,[DU.left,DU.top,DP.x,DP.y,DU.left,DU.top+DU.height]];DD.dropZonesOnGraph[Ab.GM_XAXIS2].areaCoords=[DI,[DU.left,DU.top,DP.x,DP.y,DU.left+DU.width,DU.top]];DD.dropZonesOnGraph[Ab.GM_YAXIS2].areaCoords=[DM,[DU.left+DU.width,DU.top,DP.x,DP.y,DU.left+DU.width,DU.top+DU.height]];break;case 3:if(DK.indexOf(Ab.GM_XAXIS2)<0){DP={x:DU.left+0.75*DU.width,y:DU.top+0.75*DU.height};DD.dropZonesOnGraph[Ab.GM_XAXIS].areaCoords=[DV,[DU.left,DU.top+DU.height,DP.x,DP.y,DU.left+DU.width,DU.top+DU.height]];DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords=[DB,[DU.left,DU.top,DP.x,DU.top,DP.x,DP.y,DU.left,DU.top+DU.height],[DU.left,DE.top,DP.x,DE.top,DP.x,DU.top,DU.left,DU.top]];DD.dropZonesOnGraph[Ab.GM_YAXIS].coordsTransferMap={2:{y:DU.top+1}};DD.dropZonesOnGraph[Ab.GM_YAXIS2].areaCoords=[DM,[DP.x,DP.y,DP.x,DU.top,DU.left+DU.width,DU.top,DU.left+DU.width,DU.top+DU.height],[DP.x,DE.top,DU.left+DU.width,DE.top,DU.left+DU.width,DU.top,DP.x,DU.top]];DD.dropZonesOnGraph[Ab.GM_YAXIS2].coordsTransferMap={2:{y:DU.top+1}};}else{if(DK.indexOf(Ab.GM_YAXIS2)<0){DP={x:DU.left+0.25*DU.width,y:DU.top+0.25*DU.height};DD.dropZonesOnGraph[Ab.GM_XAXIS].areaCoords=[DV,[DU.left,DU.top+DU.height,DP.x,DP.y,DU.left+DU.width,DP.y,DU.left+DU.width,DU.top+DU.height],[DU.left+DU.width,DP.y,DJ,DP.y,DJ,DS,DU.left+DU.width,DS]];DD.dropZonesOnGraph[Ab.GM_XAXIS].coordsTransferMap={2:{x:DU.left+DU.width-1}};DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords=[DB,[DU.left,DU.top,DP.x,DP.y,DU.left,DU.top+DU.height]];DD.dropZonesOnGraph[Ab.GM_XAXIS2].areaCoords=[DI,[DU.left,DU.top,DP.x,DP.y,DU.left+DU.width,DP.y,DU.left+DU.width,DU.top],[DU.left+DU.width,DP.y,DJ,DP.y,DJ,DE.top,DU.left+DU.width,DE.top]];DD.dropZonesOnGraph[Ab.GM_XAXIS2].coordsTransferMap={2:{x:DU.left+DU.width-1}};}}if((DK.indexOf(Ab.GM_XAXIS2)<0||DK.indexOf(Ab.GM_YAXIS2)<0)){break;}break;case 2:var DA=this.isWhichAxis(DK[0])!==this.isWhichAxis((DK[1]));if(!DA){if(DK.indexOf(Ab.GM_YAXIS)>=0){DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords=[[C8.width,DU.top,DP.x,DU.top,DP.x,DU.top+DU.height,C8.width,DU.top+DU.height],[C8.width,DU.top+DU.height,DP.x,DU.top+DU.height,DP.x,DS,C8.width,DS],[C8.width,DE.top,DP.x,DE.top,DP.x,DU.top,C8.width,DU.top]];DD.dropZonesOnGraph[Ab.GM_YAXIS].coordsTransferMap={1:{y:DU.top+DU.height-1},2:{y:DU.top+1}};DD.dropZonesOnGraph[Ab.GM_YAXIS2].areaCoords=[[DP.x,DU.top,DP.x,DU.top+DU.height,DJ,DU.top+DU.height,DJ,DU.top],[DP.x,DU.top+DU.height,DP.x,DS,DJ,DS,DJ,DU.top+DU.height],[DP.x,DE.top,DP.x,DU.top,DJ,DU.top,DJ,DE.top]];DD.dropZonesOnGraph[Ab.GM_YAXIS2].coordsTransferMap={1:{y:DU.top+DU.height-1},2:{y:DU.top+1}};}else{if(DK.indexOf(Ab.GM_XAXIS)>=0){DD.dropZonesOnGraph[Ab.GM_XAXIS].areaCoords=[[DU.left,DP.y,DJ,DP.y,DJ,DS,DU.left,DS],[C8.width,DP.y,DU.left,DP.y,DU.left,DS,C8.width,DS]];DD.dropZonesOnGraph[Ab.GM_XAXIS].coordsTransferMap={1:{x:DU.left+1}};DD.dropZonesOnGraph[Ab.GM_XAXIS2].areaCoords=[[DU.left,DE.top,DJ,DE.top,DJ,DP.y,DU.left,DP.y],[C8.width,DE.top,DU.left,DE.top,DU.left,DP.y,C8.width,DP.y]];DD.dropZonesOnGraph[Ab.GM_XAXIS2].coordsTransferMap={1:{x:DU.left+1}};}}}else{if(DK.indexOf(Ab.GM_XAXIS)>=0&&DK.indexOf(Ab.GM_YAXIS)>=0){DD.dropZonesOnGraph[Ab.GM_XAXIS].areaCoords=[DV,DM,[DU.left,DU.top+DU.height,DU.left+DU.width,DU.top,DU.left+DU.width,DU.top+DU.height]];DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords=[DB,DI,[DU.left,DU.top,DU.left+DU.width,DU.top,DU.left,DU.top+DU.height]];if(DT){DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords.push([0,DE.top,C8.width,DE.top,C8.width,DU.top+DU.height,0,DU.top+DU.height]);DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords.push([0,DU.top+DU.height,C8.width,DU.top+DU.height,C8.width,DS,0,DS]);DD.dropZonesOnGraph[Ab.GM_YAXIS].coordsTransferMap={3:{x:DU.left+1},4:{x:DU.left+1,y:DU.top+DU.height-1}};}}else{if(DK.indexOf(Ab.GM_XAXIS2)>=0&&DK.indexOf(Ab.GM_YAXIS2)>=0){DD.dropZonesOnGraph[Ab.GM_XAXIS2].areaCoords=[DB,DI,[DU.left,DU.top,DU.left+DU.width,DU.top,DU.left,DU.top+DU.height]];DD.dropZonesOnGraph[Ab.GM_YAXIS2].areaCoords=[DV,DM,[DU.left,DU.top+DU.height,DU.left+DU.width,DU.top,DU.left+DU.width,DU.top+DU.height]];if(!(DK.indexOf(Ab.GM_XAXIS2)<0||DK.indexOf(Ab.GM_YAXIS2)<0)){if(C7.ax===0&&C7.zone===4){DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords=[DB,[DU.left,DU.top,DP.x,DP.y,DU.left,DU.top+DU.height]];}else{if(C7.ax===0&&C7.zone===3){DD.dropZonesOnGraph[Ab.GM_XAXIS].areaCoords=[DV,[DU.left,DU.top+DU.height,DP.x,DP.y,DU.left+DU.width,DU.top+DU.height]];}else{if(C7.ax===1&&C7.zone===4){DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords=[DB,[DU.left,DU.top,DP.x,DP.y,DU.left,DU.top+DU.height]];}else{if(C7.ax===1&&C7.zone===3){DD.dropZonesOnGraph[Ab.GM_XAXIS2].areaCoords=[DI,[DU.left,DU.top,DP.x,DP.y,DU.left+DU.width,DU.top]];}}}}}}else{if(DK.indexOf(Ab.GM_XAXIS)>=0&&DK.indexOf(Ab.GM_YAXIS2)>=0){DD.dropZonesOnGraph[Ab.GM_XAXIS].areaCoords=[DV,DB,[DU.left,DU.top,DU.left+DU.width,DU.top+DU.height,DU.left,DU.top+DU.height]];DD.dropZonesOnGraph[Ab.GM_YAXIS2].areaCoords=[DI,DM,[DU.left,DU.top,DU.left+DU.width,DU.top,DU.left+DU.width,DU.top+DU.height]];}else{if(DK.indexOf(Ab.GM_XAXIS2)>=0&&DK.indexOf(Ab.GM_YAXIS)>=0){DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords=[DV,DB,[DU.left,DU.top,DU.left+DU.width,DU.top+DU.height,DU.left,DU.top+DU.height]];DD.dropZonesOnGraph[Ab.GM_XAXIS2].areaCoords=[DI,DM,[DU.left,DU.top,DU.left+DU.width,DU.top,DU.left+DU.width,DU.top+DU.height]];}}}}}break;case 1:DD.dropZonesOnGraph[DK[0]].areaCoords=[[C8.width,DL.height,DJ,DL.height,DJ,DS,C8.width,DS]];break;}if(DD.extraTitleDiv&&DK.indexOf(Ab.GM_YAXIS)>=0){DB=DD.dropZonesOnGraph[Ab.GM_YAXIS].areaCoords;DB=DB.push(DG);}},getDropAvatarIcon:function AU(C9){var DA=C9.src.data,C8,C7=C9.tgtData;if(C7){if(DA.src===C1.DATASETS||DA.src===C1.ALL_OBJECT_LIST){if(C7.edge===r){C8="replace";}else{C8="add";}}else{if(DA.src===C1.VIZ_EDITOR||DA.src===C1.VIZ){if(C7.edge===r){C8="swap";}else{C8="move";}}}}else{if(C9.isDragingMultipleObj||(this.widget&&this.widget.excludeData)){C8="add";}}return C8;},drawReplaceHighlight:function At(C8,DN,DB,DM,DJ,DE,DD){var C9=C8.tgtData,DI=this.getBackGroundColor(DD),DH=DD.currEnteredDropZoneID,DC;DB=Math.max(DB,0);DM=Math.max(DM,0);var DG=BR.position(DD.domMainContainer),DA=DD.dndTooltip;C9.tooltipAnchorPos={x:DB+DG.x,y:DM+DG.y,w:DJ,h:DE};var DF;if(C9.isReplaceAll||(C9.highlightNodes&&C9.highlightNodes.length>1)){var C7=this.getZoneItems(DD.currEnteredDropZoneID,DD),DK=C7.length;if(DK===1){DF=mstrmojo.desc(14438,"Replace")+" "+C7[0].n;}else{if(DK>1){DF=mstrmojo.desc(14439,"Replace All")+"( "+DK+"): ";for(DC=0;DC<DK;DC++){DF+=C7[DC].n;if(DC<DK-1){DF+=", ";}}}}}else{var DL=(C9.zoneSource&&C9.zoneSource.zoneModel.items[C9.tgtIdx])||(C9.highlightNodes&&C9.highlightNodes[0]&&C9.highlightNodes[0].item);DF=mstrmojo.desc(14438,"Replace")+" "+DL.n;}C9.tooltipText=DF;C9.placementOrder=[DA.PLACEMENT_ABOVE];C9.popupNodeOffset=5;DN.save();DN.beginPath();DN.rect(DB,DM,DJ,DE);DN.fillStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#bce8ff":"#20516b";DN.globalAlpha=0.4;DN.fill();DN.lineWidth=2;DN.strokeStyle=DI;DN.beginPath();DN.moveTo(DB,DM);if(DH===Ab.GM_XAXIS||DH===Ab.GM_XAXIS2||DH===Ab.GM_COL_HEADER){DN.lineTo(DB+DJ,DM);DN.moveTo(DB,DM+DE);}else{if(DH===Ab.GM_YAXIS||DH===Ab.GM_YAXIS2||DH===Ab.GM_ROW_HEADER){DN.lineTo(DB,DM+DE);DN.moveTo(DB+DJ,DM);}}DN.lineTo(DB+DJ,DM+DE);DN.stroke();DN.strokeStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#e4f6ff":"#1f333d";DN.globalAlpha=1;DN.stroke();DN.strokeStyle="#34abeb";DN.globalAlpha=1;if(DH===Ab.GM_XAXIS||DH===Ab.GM_XAXIS2||DH===Ab.GM_COL_HEADER){Ci.drawDashLine(DN,DB,DM,DB+DJ,DM,2,2);Ci.drawDashLine(DN,DB,DM+DE,DB+DJ,DM+DE,2,2);}else{if(DH===Ab.GM_YAXIS||DH===Ab.GM_YAXIS2||DH===Ab.GM_ROW_HEADER){Ci.drawDashLine(DN,DB,DM,DB,DM+DE,2,2);Ci.drawDashLine(DN,DB+DJ,DM,DB+DJ,DM+DE,2,2);}}DN.restore();},showDndArrow:function AQ(C8,DE,C7,DG,DA){var DB=BR.position(DE.canvas),DC=DA.currEnteredDropZoneID,DD,C9,DF;DD=C7-q+DB.x;C9=DG-BQ+DB.y;if(DC===Ab.GM_XAXIS){DF="gm-dnd-arrow below";}else{if(DC===Ab.GM_XAXIS2){DF="gm-dnd-arrow above";}else{if(DC===Ab.GM_YAXIS){DF="gm-dnd-arrow left";}else{if(DC===Ab.GM_YAXIS2){DF="gm-dnd-arrow right";}}}}if(DA.dndArrow){DA.dndArrow.className=DF;DA.dndArrow.style.top=C9+"px";DA.dndArrow.style.left=DD+"px";DA.dndArrow.style.display="block";}},hideDndArrow:function C4(C7){if(C7.dndArrow){C7.dndArrow.style.display="none";}},drawAddHighlight:function u(C9,DS,DY,DA,DX,C8,DE,DW){var Da=C9.tgtData,DG=Da&&Da.edge,DD=C9.src.data;DW=DW||{x:0,y:0,w:DE.actualWidth,h:DE.actualHeight};var DP=DW.x,DH=DW.y,DZ=DW.w,DQ=DW.h,DK=(DY===DX),Db=2,DI=-(Db-1),DL=function(Dd,De,Dc){return Math.max(De+BJ,Math.min(Dd,Dc-BJ-DI));};if(DK){DY=DL(DY,DP,DZ);DX=DL(DX,DP,DZ);}else{DA=DL(DA,DH,DQ);C8=DL(C8,DH,DQ);}var DR=DK?DY-BJ:DY,DO=DK?DA:DA-BJ,DM=DK?BV:DX-DY,DV=DK?C8-DA:BV;var DN=BR.position(DS.canvas),C7=DE.dndTooltip,DJ=DR+DN.x,DC=DO+DN.y,DF=DD.items,DU=DF.length||0,DB=mstrmojo.desc(531,"Add");for(var DT=0;DT<DU;DT++){if(DT===0){DB+=" "+DF[DT].n;}else{if(DT===DU-1){DB+=" "+mstrmojo.desc(14450,"add")+" "+DF[DT].n;}else{DB+=", "+DF[DT].n;}}}Da.tooltipText=DB;Da.tooltipAnchorPos={x:DJ,y:DC,w:DM,h:DV};Da.placementOrder=[C7.PLACEMENT_ABOVE];if(!Da.isAttr&&(DG===BU||DG===C)){Da.popupNodeOffset=5;}else{Da.popupNodeOffset=DK?-7:-3;}DS.save();DS.beginPath();DS.rect(DR,DO,DM,DV);DS.fillStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#bce8ff":"#20516b";DS.globalAlpha=0.4;DS.fill();DS.lineWidth=2;DS.strokeStyle=mstrApp.getThemeClassName()==="mojo-theme-light"?"#e4f6ff":"#1f333d";DS.globalAlpha=1;DS.beginPath();DS.moveTo(DY,DA);DS.lineTo(DX,C8);DS.stroke();DS.strokeStyle="#34abeb";Ci.drawDashLine(DS,DY,DA,DX,C8,2,2);DS.restore();},drawGridScale:function A0(C8,DJ,DK,DH,DG,DM,C7,C9){var DO=C8.tgtData,DC=DO&&DO.edge,DD=DO.highlightType,DB=this.getBackGroundColor(C9),DN=C9.currEnteredDropZoneID;DK=Math.max(DK,0);DH=Math.max(DH,0);DJ.save();DJ.lineWidth=2;if(DC===r){DJ.strokeStyle=DB;DJ.beginPath();DJ.moveTo(DK,DH);if(DN===Ab.GM_XAXIS||DN===Ab.GM_XAXIS2||DN===Ab.GM_COL_HEADER){DJ.lineTo(DK+DG,DH);DJ.moveTo(DK,DH+DM);}else{if(DN===Ab.GM_YAXIS||DN===Ab.GM_YAXIS2||DN===Ab.GM_ROW_HEADER){DJ.lineTo(DK,DH+DM);DJ.moveTo(DK+DG,DH);}}DJ.lineTo(DK+DG,DH+DM);DJ.stroke();DJ.strokeStyle="#34abeb";if(DN===Ab.GM_XAXIS||DN===Ab.GM_XAXIS2||DN===Ab.GM_COL_HEADER){Ci.drawDashLine(DJ,DK,DH,DK+DG,DH,2,2);Ci.drawDashLine(DJ,DK,DH+DM,DK+DG,DH+DM,2,2);}else{if(DN===Ab.GM_YAXIS||DN===Ab.GM_YAXIS2||DN===Ab.GM_ROW_HEADER){Ci.drawDashLine(DJ,DK,DH,DK,DH+DM,2,2);Ci.drawDashLine(DJ,DK+DG,DH,DK+DG,DH+DM,2,2);}}DJ.beginPath();DJ.rect(DK,DH,DG,DM);DJ.fillStyle="#34abeb";DJ.globalAlpha=0.2;DJ.fill();}else{DJ.strokeStyle="#1BA11B";DJ.beginPath();DJ.rect(DK,DH,DG,DM);DJ.stroke();}DJ.lineWidth=1;DJ.beginPath();var DF,DE,DL,DI=6,DA=10;if(DN===Ab.GM_XAXIS||DN===Ab.GM_XAXIS2||DN===Ab.GM_COL_HEADER){if(C7){if(DD!==C0){for(DF=DK+45;DF<(DK+DG);DF+=45){DJ.moveTo(DF,DH);DJ.lineTo(DF,DH+DM);}}}else{if(DD!==C0){if(DN===Ab.GM_XAXIS){for(DL=1;12*DL<DG;DL++){DF=DK+12*DL;DJ.moveTo(DF,DH);if(DL%2===1){DJ.lineTo(DF,DH+DI);}else{DJ.lineTo(DF,DH+DA);}}}else{for(DL=1;12*DL<DG;DL++){DF=DK+12*DL;if(DL%2===1){DJ.moveTo(DF,DH+DM-DI);}else{DJ.moveTo(DF,DH+DM-DA);}DJ.lineTo(DF,DH+DM);}}}}}else{if(DN===Ab.GM_YAXIS||DN===Ab.GM_YAXIS2||DN===Ab.GM_ROW_HEADER){if(C7){if(DD!==C0){for(DE=DH+45;DE<DH+DM;DE+=45){DJ.moveTo(DK,DE);DJ.lineTo(DK+DG,DE);}}}else{if(DD!==C0){if(DN===Ab.GM_YAXIS){for(DL=1;12*DL<DM;DL++){DE=DH+12*DL;if(DL%2===1){DJ.moveTo(DK+DG-DI,DE);}else{DJ.moveTo(DK+DG-DA,DE);}DJ.lineTo(DK+DG,DE);}}else{for(DL=1;12*DL<DM;DL++){DE=DH+12*DL;DJ.moveTo(DK,DE);if(DL%2===1){DJ.lineTo(DK+DI,DE);}else{DJ.lineTo(DK+DA,DE);}}}}}}}DJ.stroke();DJ.restore();},drawRoundRect:function BT(C9,C7,DC,C8,DA,DB){DB=Math.min(C8/2,DA/2,DB||5);C9.beginPath();C9.moveTo(C7+DB,DC);C9.arcTo(C7+C8,DC,C7+C8,DC+DA,DB);C9.arcTo(C7+C8,DC+DA,C7,DC+DA,DB);C9.arcTo(C7,DC+DA,C7,DC,DB);C9.arcTo(C7,DC,C7+C8,DC,DB);C9.closePath();C9.stroke();},drawHighlightOnWholeAxis:function O(C8,DH,DE,DD,DI,DA,DF){var DB=C8.tgtData,C9=DB.edge,DC=DB.highlightType,C7=2,DG=-(C7-2);if(DC===B6){if(DE===Ab.GM_XAXIS){this.drawReplaceHighlight(C8,DH,DD.left+d,DI.top+d,DD.width-2*DG,DI.height-2*DG,DF);}else{if(DE===Ab.GM_XAXIS2){this.drawReplaceHighlight(C8,DH,DD.left+d,DI.top+d,DD.width-2*DG,DI.height-2*DG,DF);}else{if(DE===Ab.GM_YAXIS){this.drawReplaceHighlight(C8,DH,DI.left+d,DD.top+d,DI.width-2*DG,DD.height-2*DG,DF);}else{if(DE===Ab.GM_YAXIS2){this.drawReplaceHighlight(C8,DH,DI.left+d,DD.top+d,DI.width-2*DG,DD.height-2*DG,DF);}}}}}else{if(DC===C0){if(C9===Ar&&DA){if(DE===Ab.GM_XAXIS){this.drawAddHighlight(C8,DH,DI.left+d,DI.top+d,DI.left+DI.width,DI.top+d,DF);}else{if(DE===Ab.GM_YAXIS){this.drawAddHighlight(C8,DH,DI.left+d+DI.width,DI.top+d,DI.left+d+DI.width,DI.top+d+DI.height,DF);}}}else{this.drawReplaceHighlight(C8,DH,DI.left+d,DI.top+d,DI.width-2*DG,DI.height-2*DG,DF);}}else{if(DE===Ab.GM_XAXIS){this.drawAddHighlight(C8,DH,DD.left+d,DI.top+d,DD.left+d+DD.width-2*DG,DI.top+d,DF);}else{if(DE===Ab.GM_XAXIS2){this.drawAddHighlight(C8,DH,DD.left+d,DI.top+DI.height+d,DD.left+d+DD.width-2*DG,DI.top+DI.height+d,DF);}else{if(DE===Ab.GM_YAXIS){this.drawAddHighlight(C8,DH,DI.left+DI.width+d,DD.top+d,DI.left+DI.width+d,DD.top+d+DD.height-2*DG,DF);}else{if(DE===Ab.GM_YAXIS2){this.drawAddHighlight(C8,DH,DI.left+d,DD.top+d,DI.left+d,DD.top+d+DD.height-2*DG,DF);}}}}}}},drawHighlightOnHeaders:function CN(C8,DI,DE,DJ,DG){var DB=C8.tgtData,C9=DB.edge,DA=DB.tgtIdx,C7=2,DH=-(C7-2),DD,DC,DF=0;if(DG.currEnteredDropZoneID===Ab.GM_COL_HEADER){DD=DG.colHeaderHArr;}else{if(DG.currEnteredDropZoneID===Ab.GM_ROW_HEADER){DD=DG.rowHeaderWArr;}}if(DA===0&&C9===BU){if(DE===Ab.GM_COL_HEADER){this.drawAddHighlight(C8,DI,DJ.left+d,DJ.top+d,DJ.left+d+DJ.width-2*DH,DJ.top+d,DG);}else{if(DE===Ab.GM_ROW_HEADER){this.drawAddHighlight(C8,DI,DJ.left+d,DJ.top+d,DJ.left+d,DJ.top+d+DJ.height-2*DH,DG);}}}else{if(DA===DD.length-1&&C9===C&&DE===Ab.GM_ROW_HEADER){this.drawAddHighlight(C8,DI,DJ.left+DJ.width+d,DJ.top+d,DJ.left+DJ.width+d,DJ.top+d+DJ.height,DG);}else{if(C9===r){for(DC=0;DC<DA;DC++){DF+=DD[DC]+1;}DF-=1;if(DE===Ab.GM_COL_HEADER){this.drawReplaceHighlight(C8,DI,DJ.left+d,DJ.top+d+DF,DJ.width-2*DH,DD[DA]-2*DH,DG);}else{if(DE===Ab.GM_ROW_HEADER){this.drawReplaceHighlight(C8,DI,DJ.left+d+DF,DJ.top+d,DD[DA]-2*DH,DJ.height-2*DH,DG);}}}else{for(DC=0;DC<DA;DC++){DF+=DD[DC]+1;}if(C9===C){DF+=DD[DA]+1;}DF-=1;if(DE===Ab.GM_COL_HEADER){this.drawAddHighlight(C8,DI,DJ.left+d,DJ.top+d+DF,DJ.left+d+DJ.width,DJ.top+d+DF,DG);}else{if(DE===Ab.GM_ROW_HEADER){this.drawAddHighlight(C8,DI,DJ.left+d+DF,DJ.top+d,DJ.left+d+DF,DJ.top+d+DJ.height,DG);}}}}}},updateAvatarIcon:function BE(C8,C7){var C9=C8.src.data;if(C9.setAvatarClass){C9.setAvatarClass(C7||this.getDropAvatarIcon(C8));}},onHighLightObjectChange:function(C8){if(this.fmtMode){var C9=BG,DA=[],C7;C8.identities=CM(C8.identities);CZ.forEach(C8.identities||[],function(DB){if(C9.hasOwnProperty(DB)){DA=DA.concat(C9[DB]);}});C7=CG(this.widget.domNode,"type",DA);this.widget.clearUserSelections();this.clearSelectedTargets();this.selectTarget(C7);}},clearHighlightDropZoneOnGraph:function Ck(DB){var C9=DB.dndHighlightCanvas,C7=C9.getContext("2d");C7.clearRect(0,0,C9.width,C9.height);var C8=DB.dndHighlightNodes,DA=DB.dndTooltip;C8.toggle(false);DA.toggle(false);this.hideDndArrow(DB);},highlightDropZoneOnGraph:function B5(Dh,DZ){var DD=DZ.dndHighlightCanvas,DO=DD.getContext("2d");if(!Dh.isDragingMultipleObj){var DS=Dh.tgtData,DR=DS&&DS.tgtInfo,DU=DZ.currEnteredDropZoneID,Dd=Dh.src.data;if(DS){var DI=DS.zonePos,DC=DR&&DR.box,DX=BR.position(DZ.domNode);if(DZ.currEnteredDropZoneID===Ab.GM_COL_HEADER||DZ.currEnteredDropZoneID===Ab.GM_ROW_HEADER){this.drawHighlightOnHeaders(Dh,DO,DU,DI,DZ);}else{if(DS.edge===r||DS.edge===Ar){this.drawHighlightOnWholeAxis(Dh,DO,DU,DC,DI,Dd.isAttr,DZ);}else{if(DS.edge===BU||DS.edge===C){var De=DZ.GMController,DJ=De.hasGroupInfoStored(),DW=DJ.existing&&DJ.gi,DN=this.getZoneItems(DZ.currEnteredDropZoneID,DZ),DK=DJ.existing?DW.length:DN.length,Db=DR.axisIndex,C8=this.isAxisPrimary(DS.zoneID),DH=DS.pivotMetricNameTo===Ab.GM_COL_HEADER||DS.pivotMetricNameTo===Ab.GM_ROW_HEADER,DQ=this.getMetricIDAndDZIdxFromAxisIdx(DZ.currEnteredDropZoneID,DS.edge===BU?DR.axisIndex-1:DR.axisIndex+1,C8,DZ).metricID,DT=(DS.edge===BU&&Db===0)||((DQ===A6||DH)&&DS.edge===BU),DG=(DS.edge===C&&Db===DK-1)||((DQ===A6||DH)&&DS.edge===C),DB=DT||DG,DV=DB?(DN.length===1?3:5):5,DE=DB?0:2.5,DM,Dj,DL,Di,DA,C9;if(DS.edge===BU){if(DU===Ab.GM_XAXIS){DM=DC.left-DE*AM(DC.width)+d;Dj=DI.top+d;DL=DC.left+d+(DV-DE)*AM(DC.width);Di=DI.top+d;}else{if(DU===Ab.GM_XAXIS2){DM=DC.left-DE*AM(DC.width)+d;Dj=DI.top+DI.height+d;DL=DC.left+(DV-DE)*AM(DC.width)+d;Di=DI.top+DI.height+d;}else{if(DU===Ab.GM_YAXIS){DM=DI.left+DI.width+d;Dj=DC.top-DE*AM(DC.height)+d;DL=DI.left+DI.width+d;Di=DC.top+(DV-DE)*AM(DC.height)+d;}else{if(DU===Ab.GM_YAXIS2){DM=DI.left+d;Dj=DC.top-DE*AM(DC.height)+d;DL=DI.left+d;Di=DC.top+(DV-DE)*AM(DC.height)+d;}}}}}else{if(DS.edge===C){if(DU===Ab.GM_XAXIS){DM=DC.left+DC.width-(DV-DE)*AM(DC.width)+d;Dj=DI.top+d;DL=DC.left+DC.width+DE*AM(DC.width)+d;Di=DI.top+d;}else{if(DU===Ab.GM_XAXIS2){DM=DC.left+DC.width-(DV-DE)*AM(DC.width)+d;Dj=DI.top+DI.height+d;DL=DC.left+DC.width+DE*AM(DC.width)+d;Di=DI.top+DI.height+d;}else{if(DU===Ab.GM_YAXIS){DM=DI.left+DI.width+d;Dj=DC.top+DC.height-(DV-DE)*AM(DC.height)+d;DL=DI.left+DI.width+d;Di=DC.top+DC.height+DE*AM(DC.height)+d;}else{if(DU===Ab.GM_YAXIS2){DM=DI.left+d;Dj=DC.top+DC.height-(DV-DE)*AM(DC.height)+d;DL=DI.left+d;Di=DC.top+DC.height+DE*AM(DC.height)+d;}}}}}}this.drawAddHighlight(Dh,DO,DM,Dj,DL,Di,DZ);if(DU===Ab.GM_XAXIS||DU===Ab.GM_XAXIS2){C9=Dj;if(DT){DA=DM;}else{if(DG){DA=DL;}else{DA=Math.round((DM+DL)/2);}}}else{if(DU===Ab.GM_YAXIS||DU===Ab.GM_YAXIS2){DA=DM;if(DT){C9=Dj;}else{if(DG){C9=Di;}else{C9=Math.round((Dj+Di)/2);}}}}this.showDndArrow(Dh,DO,DA,C9,DZ);}}}var Dc=DZ.dndHighlightNodes,C7=DZ.dndTooltip;var DF=DS.highlightNodes,Da=DS.tooltipText;if(DF&&DF.length>0){var Df="gm-rotate-270",DY=DF[0].node,Dg=DY&&DY.parentNode,DP=false;while(Dg&&Dg.classList){if(Dg.classList.contains([Df])){DP=true;break;}Dg=Dg.parentNode;}Df=DP?Df:"";Dc.updateNodes(DS.highlightNodes,DX,Df);C7.placementOrder=[C7.PLACEMENT_ABOVE];C7.popupNodeOffset=5;C7.updateContent(null,Dc.getBoundaryPosForAllNodes(),Da);}else{if(DS.tooltipAnchorPos){C7.placementOrder=DS.placementOrder;C7.popupNodeOffset=DS.popupNodeOffset;C7.updateContent(null,DS.tooltipAnchorPos,Da);}}}}},findEnteredDropZoneOnGraph:function Bv(C7,DF){var DC=C7.tgt.pos,C9,C8,DB=BR.position(DF.domMainContainer),DE=DC.x-DB.x,DD=DC.y-DB.y,DA=function(DK,DH,DM){var DJ=DF.dropZonesOnGraph[DK],DI=DJ.areaCoords,DL=DJ.coordsTransferMap,DG=function(DO,DN){DC[DN]=DO+DB[DN];};for(C9=0;C9<DI.length;C9++){if(CI(DI[C9],DH,DM)){if(DL&&DL[C9]){Av.forEach(DL[C9],DG);}return true;}}return false;};if(DF.currEnteredDropZoneID&&DF.dropZonesOnGraph[DF.currEnteredDropZoneID]){if(DA(DF.currEnteredDropZoneID,DE,DD)){return true;}}for(C8 in DF.dropZonesOnGraph){if(DA(C8,DE,DD)){DF.currEnteredDropZoneID=C8;return true;}}DF.currEnteredDropZoneID=null;C7.tgtData=null;return false;},prepareDP4Axis:function(DJ,C7,DE,DF){var DB=DF.GMController,C9=DB.mapFromChartToLDSIndex(DJ,C7),DI=DE==="x"?DJ:C9.r,DG=DE==="x"?C9.c:C7,DH=C9.dpIdx,DA=DB.model,DC=DA.getLocalDataSet(DI,DG),DD=DC.generateDataProvider(),C8=DD[DH];return C8;},getTgtNode4Dnd:function AX(C8,C7){return this.getTargetInfo(C7,C8&&C8.pos,true);},getZoneItems:function A8(DB,DH,C8,DG){var DD=this.getDropZoneModelByCtlType(DB,DH),DC=Av.cloneArray(DD&&DD.items)||[],DJ,DA,DF,DI=n(DH);for(DA=0;DA<DC.length;DA++){if(DI.isMetricName(DC[DA])){DC.splice(DA,1);}}if(DG){for(DA=0;DA<DC.length;DA++){if(!DI.isMetric(DC[DA])){DC.splice(DA,1);}}}if(DC.length>0&&C8){if(DI.isMetric(DC[0])){var C7=DH.GMController,C9=[],DE=[];if(DB===Ab.GM_XAXIS){C9=C7.getMetricsOnPrimaryXAxis();}else{if(DB===Ab.GM_YAXIS){C9=C7.getMetricsOnPrimaryYAxis();}else{if(DB===Ab.GM_XAXIS2){C9=C7.getMetricsOnSecondaryXAxis();}else{if(DB===Ab.GM_YAXIS2){C9=C7.getMetricsOnSecondaryYAxis();}}}}for(DA=0;DA<C9.length;DA++){DF=CZ.find(DC,"idx",C9[DA]);DJ=DC[DF];DE.push(DJ||{});}return DE;}if(DI.isAttrCategory(DC[0])){if(DB===Ab.GM_XAXIS2||DB===Ab.GM_YAXIS2){return[];}return DC;}return[];}return DC;},handleDropZoneNoChange:function I(Dh,DW,DY){var DB=n(DW),DV=DW.GMController,DJ=Dh.tgtData,DE=DJ.zoneSource,Da=Dh.src.data,DA=Da.item,DZ=Da.items,Db=DB.getUnitIndexInZone(DE.zoneModel,DA),DC=DJ.edge,Df=DJ.tgtIdx,DI=DJ.tgtInfo,C7=Dh.tgt,DU=C7.pos,DT=DU.x,DS=DU.y,DG=Db>=0,Dg,DX,De,C8,Dd,DF,C9=this.isAxisPrimary(DW.currEnteredDropZoneID),DD=this.isWhichAxis(DW.currEnteredDropZoneID)==="x"?DV.isXDualAxis:DV.isYDualAxis;if(DZ.length>1){return false;}if(DB.isMetric(DA)&&DV.shallWeUseGroupInfo){var DR=DI.axisIndex,DO=DV.getGroupInfo(),DP=Av.cloneArray(DO),DN=function(Dj,Di){for(Dd=0;Dd<Di.length;Dd++){DF=Di[Dd];if(DF[0]===Dj||DF[1]===Dj){return Dd;}}return -1;},DK=DN(DA.did,DO);DP=DB.fillGroupInfo(Dh,DP,DA.did,C9);if(Da.src===C1.VIZ&&DC===Ar&&DK!==DR){C8=false;}else{C8=Av.equals(DO,DP);}}else{if(DD){var DQ=C9!==Da.isPrimary;if(DJ.edge!==Ar||DQ){C8=false;}else{C8=true;}}else{Dg=Db===Df+1&&DJ.edge===C;DX=Db===Df-1&&DJ.edge===BU;De=Db===Df;C8=DG&&(De||Dg||DX);}}if(C8){DJ.edge=r;if(DW.currEnteredDropZoneID===Ab.GM_COL_HEADER||DW.currEnteredDropZoneID===Ab.GM_ROW_HEADER){DJ.tgtIdx=Db;}else{var Dc=Dg?1:De?0:-1;if(DE.direction==="H"){DT+=Dc*DY;}else{DS+=Dc*DY;}DJ.tgtInfo=this.prepare4DropZoneManipulation(DT,DS,DW,DE.direction);DJ.highlightType=B6;DJ.dropZoneNoChange=true;var DL=this.isAxisPrimary(DJ.zoneID),DH=this.getMetricIDAndDZIdxFromAxisIdx(DW.currEnteredDropZoneID,DJ.tgtInfo.axisIndex,DL,DW),DM=DH.dzIndex;DJ.tgtIdx=DM;}}return C8;},findTargetInDropZoneOnGraph:function B2(Dh,Db){var C7=Dh.tgt,DZ=C7.pos,Dd=Dh.src.data,DN=Dd.item,DB=null,DQ={};DB=this.getTgtNode4Dnd(C7,Db);if(DB){DQ.highlightNodes=[];DQ.highlightNodes.push(DB);DQ.edge=r;if(DB.dropZoneID&&DB.dropZoneID!==Db.currEnteredDropZoneID){Db.currEnteredDropZoneID=DB.dropZoneID;}}var DH=Db.dropZonesOnGraph[Db.currEnteredDropZoneID],DL=this.getZoneItems(Db.currEnteredDropZoneID,Db),DE=this.getZoneItems(Db.currEnteredDropZoneID,Db,true),DF=this.getComponentBBox(Db,Db.currEnteredDropZoneID),DS=this.getComponentBBox(Db,Db.currEnteredDropZoneID,true),DY=DZ.x,DX=DZ.y,DW=BR.position(Db.domMainContainer),DA,Dg,DJ,DC=n(Db),Da,DM,Dc;Dh.tgtData=DQ;DQ.zonePos=DS;DQ.zoneSource=DH;DQ.zoneID=Db.currEnteredDropZoneID;if(Db.currEnteredDropZoneID===Ab.GM_COL_HEADER||Db.currEnteredDropZoneID===Ab.GM_ROW_HEADER){DY=DY-DF.left-DW.x;DX=DX-DF.top-DW.y;Dd.isAttr=true;DQ.isAttr=true;if(DB){DQ.tgtIdx=DB.tgtIdx;DQ.highlightType=C0;}else{DA=Db.currEnteredDropZoneID===Ab.GM_COL_HEADER?Db.colHeaderHArr:Db.rowHeaderWArr;if(!DA||DA.length===0){DQ.tgtIdx=0;DQ.edge=BU;}else{DJ=Db.currEnteredDropZoneID===Ab.GM_COL_HEADER?DX:DY;for(Dg=0;Dg<DA.length;Dg++){if(Dg===0){if(DA.length>1){if(DJ<0.67*DA[Dg]){DQ.tgtIdx=Dg;DQ.edge=BU;break;}else{if(DJ<DA[Dg]){DQ.tgtIdx=Dg;DQ.edge=C;break;}}}else{if(DJ<0.5*DA[Dg]){DQ.tgtIdx=Dg;DQ.edge=BU;break;}else{if(DJ<DA[Dg]){DQ.tgtIdx=Dg;DQ.edge=C;break;}}}}else{if(Dg===DA.length-1){if(DJ<0.33*DA[Dg]){DQ.tgtIdx=Dg;DQ.edge=BU;break;}else{if(Db.currEnteredDropZoneID===Ab.GM_COL_HEADER&&DJ>0.67*DA[Dg]&&DJ<DA[Dg]*1.33){DQ.tgtIdx=Dg;DQ.edge=C;break;}else{if(Db.currEnteredDropZoneID===Ab.GM_ROW_HEADER&&DJ<DA[Dg]){DQ.tgtIdx=Dg;DQ.edge=C;break;}}}}else{if(DJ<0.33*DA[Dg]){DQ.tgtIdx=Dg;DQ.edge=BU;break;}else{if(DJ<0.67*DA[Dg]){Dh.tgtData=null;return ;}}if(DJ<DA[Dg]){DQ.tgtIdx=Dg;DQ.edge=C;break;}}}DJ-=DA[Dg];}if(Dg>=DA.length){Dh.tgtData=null;return ;}this.handleDropZoneNoChange(Dh,Db);}}}else{var DP=this.prepare4DropZoneManipulation(DY,DX,Db,DH.direction);if(!DP.process){Dh.tgtData=null;return ;}var Df=this.isWhichAxis(Db.currEnteredDropZoneID)==="x"?Ab.GM_YAXIS:Ab.GM_XAXIS,DG=this.getZoneItems(Df,Db,false,true),Di=DG.length;DQ.tgtIdx=0;DQ.tgtInfo=DP;DQ.isSideBySide=true;if(DC.isAttrCategory(DN)){if(DL.length<=0){DQ.edge=Ar;}else{if(DC.isMetric(DL[0])){DQ.edge=r;DQ.highlightNodes=DP.labelNodes;DQ.highlightType=C0;DQ.isAttr=false;DQ.isReplaceAll=true;}else{if(DC.isAttrCategory(DL[0])){DQ.isAttr=true;if(DB){DQ.tgtIdx=DB.dzIndex||0;DQ.highlightType=C0;}else{DQ.edge=Ar;DQ.highlightType=C0;DQ.tgtIdx=DL.length;}}}}Dd.isAttr=true;}else{if(DC.isMetric(DN)){Da=Db.GMController;DM=Da.getSplitPlottingMetrics();DQ.isSideBySide=DM;if(DL.length<=0){DQ.edge=Ar;}else{if(DC.isMetric(DL[0])){DQ.isAttr=false;if(DB){DP.axisIndex=DB.axisIndex;DQ.tgtIdx=this.getMetricIDAndDZIdxFromAxisIdx(Db.currEnteredDropZoneID,DP.axisIndex,this.isAxisPrimary(Db.currEnteredDropZoneID),Db).dzIndex;DQ.highlightType=B6;}else{if((DL.length===1&&Di<=1)||(DL.length===2&&DE.length===1)){if(DE.length===0){DQ.isSideBySide=true;DQ.edge=Ar;}else{DQ.edge=E.call(this,DY,DX,DP,DH.direction,false,Db);Dc=Cl.call(this,DP,DH.direction,false,Db);this.handleDropZoneNoChange(Dh,Db,Dc);DQ.isSideBySide=DQ.edge===BU||DQ.edge===C;}}else{Da=Db.GMController;DM=Da.getSplitPlottingMetrics();var De=this.isWhichAxis(Db.currEnteredDropZoneID)==="x",DO=De?Ab.GM_COL_HEADER:Ab.GM_ROW_HEADER,DD=De?Ab.GM_ROW_HEADER:Ab.GM_COL_HEADER;if(DM){var DV=this.getDropZoneModelByCtlType(DD,Db),DI=false;for(Dg=0;Dg<DV.items.length;Dg++){if(DC.isMetricName(DV.items[Dg])){DI=true;}}var DU=Di>0&&DC.isMetric(DG[0]);if(DI&&!DU){DQ.isSideBySide=true;DQ.edge=Ar;DQ.tgtIdx=DL.length;DP.axisIndex=DL.length;}else{var C8=this.isAxisPrimary(DQ.zoneID),DK=this.getMetricIDAndDZIdxFromAxisIdx(Db.currEnteredDropZoneID,DP.axisIndex,C8,Db),DR=DK.metricID,C9=DR===A6,DT=DK.dzIndex;DQ.tgtIdx=DT;if(Dd.src===C1.VIZ&&!C9){DQ.edge=E.call(this,DY,DX,DP,DH.direction,false,Db);Dc=Cl.call(this,DP,DH.direction,false,Db);if(!this.handleDropZoneNoChange(Dh,Db,Dc)&&DQ.edge===Ar){DQ.pivotMetricNameTo=DC.isMetricZone(this.getDropZoneIdByCtlType(Ab.GM_YAXIS))?Ab.GM_XAXIS:Ab.GM_YAXIS;}}else{DQ.isSideBySide=true;if(C9){DQ.edge=Ar;DT=this.getMetricIDAndDZIdxFromAxisIdx(Db.currEnteredDropZoneID,DP.axisIndex,C8,Db,true).prevMetricDZIdx;DQ.tgtIdx=DT;}else{DQ.edge=E.call(this,DY,DX,DP,DH.direction,true,Db);Dc=Cl.call(this,DP,DH.direction,true,Db);this.handleDropZoneNoChange(Dh,Db,Dc);}}}}else{if(Dd.src===C1.VIZ){DQ.edge=E.call(this,DY,DX,DP,DH.direction,false,Db);if(DQ.edge===BU){DQ.isSideBySide=true;DQ.tgtIdx=0;DQ.pivotMetricNameTo=DO;}else{if(DQ.edge===C){DQ.isSideBySide=true;DQ.tgtIdx=DL.length;DQ.pivotMetricNameTo=DO;}else{if(DQ.edge===Ar){DQ.isSideBySide=false;DQ.tgtIdx=parseInt(DN.zoneIdx,10);}}}}else{DQ.isSideBySide=false;DQ.edge=Ar;DQ.tgtIdx=DL.length;}}}}}else{if(DC.isAttrCategory(DL[0])){DQ.edge=r;DQ.highlightType=C0;DQ.isAttr=true;DQ.isReplaceAll=true;}}}Dd.isAttr=false;}}}},ondrop:function Cu(C7,DF){var C9=C7.tgtData,DH=DF.zonesModel;this.augmentDropContextForSchema(C7,DH.docModel);if(C9&&!C9.dropZoneNoChange){var DB=C9.zoneSource,DG=C9.tgtIdx,C8=C9.edge,DA=C9.zoneID,DC=this.isAxisPrimary(DA),DD=C9.isSideBySide,DE=this.getDropZoneIdByCtlType(C9.pivotMetricNameTo);DH.unitsDropped(DB.zoneModel,C7,{idx:DG,edge:C8,allowedItems:C7.src.data.items},DC,DD,DE);}},allowDrag:function AK(){},getElementFromPoint:function(C8,DE,C9){var DD,DB=[],C7=function(){var DF;for(DF=0;DF<DB.length;DF++){DB[DF].display="none";}},DC=function(){var DF;for(DF=0;DF<DB.length;DF++){DB[DF].display="block";}},DA=function(DF){if(DF&&DF.style.display!=="none"){DB.push(DF.style);}};DA(C9.dndHighlightCanvas);DA(this.domHLBox);C7();DD=document.elementFromPoint(C8,DE);DC();return DD;},getTargetInfo:function CY(DZ,DK,DW){var DL=this.getElementFromPoint(DK.x,DK.y,DZ),DQ=DL&&DL.parentNode,Dm=DQ.getAttribute("type"),DG=DL.getAttribute("type"),De,Dj,DN,DP,DT,DI,C7,DR=n(DZ),DS=BR.position(DZ.domMainContainer),Dh={},DX=DK.x-DS.x,DV=DK.y-DS.y;if(Dm===Ab.GM_COL_HEADER||Dm===Ab.GM_COL_HEADER_TITLE){De=this.getDropZoneModelByCtlType(Ab.GM_COL_HEADER,DZ);if(Dm===Ab.GM_COL_HEADER_TITLE){DQ=DQ.parentNode.parentNode;}Dj=DQ.getAttribute("depth");DN=De&&De.items[Dj];if(DW){Dh.node=DL;Dh.nodePos=BR.position(DL);Dh.tgtIdx=Dj;Dh.nodeContent=AR(DL);Dh.dropZoneID=Ab.GM_COL_HEADER;}}else{if(Dm===Ab.GM_ROW_HEADER||Dm===Ab.GM_ROW_HEADER_TITLE){De=this.getDropZoneModelByCtlType(Ab.GM_ROW_HEADER,DZ);if(Dm===Ab.GM_ROW_HEADER_TITLE){DQ=DQ.parentNode.parentNode;}Dj=DQ.getAttribute("depth");DN=De&&De.items[Dj];if(DW){Dh.node=DL;Dh.nodePos=BR.position(DL);Dh.tgtIdx=Dj;Dh.nodeContent=AR(DL);Dh.dropZoneID=Ab.GM_ROW_HEADER;}}else{if(Dm===Ab.GM_YLABEL||Dm===Ab.GM_XLABEL||Dm===Ab.GM_COL_HEADER_EXTRA){DP=parseInt(DQ.getAttribute("dzid"),10);DT=parseInt(DQ.getAttribute("dzindex"),10);if(!isNaN(DP)&&!isNaN(DT)){De=this.getZoneModelByZoneId(DP,DZ);if(G(DX,DV,this.getComponentBBox(DZ,Ab.GM_YAXIS))){DI=Ab.GM_YAXIS;C7=true;}else{if(G(DX,DV,this.getComponentBBox(DZ,Ab.GM_XAXIS))){DI=Ab.GM_XAXIS;C7=true;}else{if(G(DX,DV,this.getComponentBBox(DZ,Ab.GM_YAXIS2))){DI=Ab.GM_YAXIS2;C7=false;}else{if(G(DX,DV,this.getComponentBBox(DZ,Ab.GM_XAXIS2))){DI=Ab.GM_XAXIS2;C7=false;}}}}if(DI){Dj=this.getMetricIDAndDZIdxFromAxisIdx(DI,DT,C7,DZ).dzIndex;DN=this.getZoneItems(DI,DZ,false,true)[Dj];}if(!DN){Dj=DT;DN=De&&De.items[DT];}Dh.axisIndex=DT;Dh.dzId=DP;Dh.isPrimary=C7;Dh.sourceNode=DL;Dh.sourcePos=DK;if(DW){Dh.node=DL;Dh.nodePos=BR.position(DL);Dh.nodeContent=AR(DL);Dh.dropZoneID=DI;}}}else{if(DG===Ab.GM_AXIS_WORD){var DJ=BR.findAncestorByName(DL,"svg"),Df=DJ.getAttribute("type");if(Df===Ab.GM_SVG_Y_CATEGORY||Df===Ab.GM_SVG_X_CATEGORY){var Db=DQ.identity,Dl=parseInt(DL.getAttribute("Index"),10),DO=Db&&Db[Dl];DP=DO&&DO.dzid;DT=DO&&DO.dzindex;if(DP!==undefined&&DT!==undefined){De=this.getZoneModelByZoneId(DP,DZ);Dj=DT;DN=De&&De.items[Dj];Dh.dzIndex=Dj;}if(DW){if(Df===Ab.GM_SVG_Y_CATEGORY){Dh.dropZoneID=Ab.GM_YAXIS;}else{Dh.dropZoneID=Ab.GM_XAXIS;}var C9=BR.position(DJ.parentNode),DB=BR.position(DL),DA=parseInt(DL.getAttribute("x"),10),DD=parseInt(DL.getAttribute("y"),10),DH=DL.parentNode.style.fontSize,Da=parseInt(DH,10)||11;Dh.svgNodePos=C9;var DF=DL.parentNode.cloneNode(true),Dk=DF.childNodes,DM=Dk.length,DU="",DY,C8,Dd,Dc,Di=0;for(var Dg=0;Dg<DM;Dg++){DY=Dk[Dg];C8=parseInt(DY.getAttribute("Index"),10);Dd=Db&&Db[C8];Dc=Dd&&Dd.dzindex;if(Dc===DT){Di++;if(Di===1){DA=parseInt(DY.getAttribute("x"),10);DD=parseInt(DY.getAttribute("y"),10);}else{DY.style.paddingLeft="5px";Dh.isMultipleTspan=true;}DY.style.fontSize=DH;DU+=CT(DY);}}Dh.nodeContent=DU;Dh.transform=DL.parentNode.getAttribute("transform");var DE=Dh.transform&&(Dh.transform.indexOf("rotate(-90")>=0||Dh.transform.indexOf("rotate(90")>=0||Dh.transform.indexOf("rotate(270")>=0),DC=DE?DB.w:DB.h;Dh.nodePos={x:C9.x+DA,y:C9.y+DD-(DC+Da)/2,w:Math.round(DL.getComputedTextLength()),h:DC};}}}}}}if(DN&&!DW){DN.fromZoneId=De.id;DN.zoneIdx=DR.getUnitIndexInZone(De,DN);}Dh.item=DN;if(DN){return Dh;}else{return null;}},getDragData:function Af(C9,C8){var DC=C8.id,C7=C9.src.pos,DB=this.getTargetInfo(C8,C7);if(DB){DB.setAvatarClass=function DA(DD){var DG=W.all[DC],DE=DG.avatar;if(DE){var DF=[DG.avatarCssClass,"hasOwnAvatar",DD];DE.className=DF.join(" ");}};if(DB.item){DB.items=[];DB.items.push(DB.item);}DB.src=C1.VIZ;DB.onRemove=function(DD){C8.deleteItem(DD);};}return DB;},deleteItem:function CB(C9,C7){var C8=n(C7);C8.deleteItem(this.getZoneModelByZoneId(C9.fromZoneId,C7),C9.zoneIdx);},getShapeSelectionInfo:function(C7){return U.call(this,C7);}});mstrmojo.gm.GMInteractivity.SHAPE_SUBTYPE=BH;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.Widget","mstrmojo.VisUtility","mstrmojo.VisEnum","mstrmojo.gm.GMUtility");var H=mstrmojo.VisUtility,K=mstrmojo.VisEnum.ControlType,J=mstrmojo.gm.GMUtility,D=mstrmojo.array,C=mstrmojo.dom.isIE||mstrmojo.dom.isIEW3C,B=mstrmojo.dom.isFF,I=1,G=5,F=8;function L(){var W=this.labelObj,O=H.measureTextHeight(W.text,this.styles,0,100,undefined,true,true);W.textWidth=H.measureTextWidth(W.text,this.styles,0,undefined,true);W.textHeight=H.measureTextHeight(W.text,this.styles,0,this.width-2*I-2*F,((C||B)?"break-all":"break-word"),true,false);this.lineChanged=this.width<W.textWidth+2*I+2*F;if(this.lineChanged){this.actualOffsetWidth=this.width;}else{this.actualOffsetWidth=W.textWidth+2*F+2*I;}var N=Math.floor((this.height-2*I-2*G)/O);this.hasEllipsis=this.height<W.textHeight+2*I+2*G;if(this.hasEllipsis){this.domNode.setAttribute("title",W.text);this.lineCount=Math.min(this.maxLineCount,N);if(this.lineCount===0){W.truncatedText="...";}else{W.truncatedText=H.truncateTextToLineWithWordWrap(W.text,this.styles,this.width-2*I-2*F,this.lineCount,false,true);var Q=W.truncatedText.split(" "),M="";for(var P=0;P<Q.length;P++){var R=H.measureTextWidth(Q[P],this.styles);if(R>this.width-2*I){M+="...";}else{M+=Q[P];}if(P===0&&P!==Q.length-1){M+=" ";}}W.truncatedText=M;}}else{var U=W.text.split(" "),V=false,S=0;D.forEach(U,function(Y){var X=H.measureTextWidth(Y,this.styles);S+=X;if(S>this.width-2*I-2*G){V=true;return false;}},this);if(V){this.domNode.setAttribute("title",W.text);}this.lineCount=Math.min(this.maxLineCount,Math.round(W.textHeight/O));}if(this.lineCount===0){this.actualOffsetHeight=this.height;}else{this.actualOffsetHeight=this.lineCount*O+2*I+2*G;}this.domNode.style.width=this.actualOffsetWidth+"px";this.domNode.style.height=this.actualOffsetHeight+"px";}function A(){var M,U,Q,O,S=document,R=S.createDocumentFragment(),P=this.domNode,X=this.styles,W=this.labelObj,V=W.extraAttributes,N=0;O=S.createElement("div");O.setAttribute("class","gm-text-body-nowrap");O.style.whiteSpace="normal";O.style.textAlign="center";O.setAttribute("type",K.GM_TEXT_BODY);O.innerHTML=J.replaceSpecialChars(this.hasEllipsis?W.truncatedText:W.text);O.container=P;O.style.width=this.actualOffsetWidth-2*I+"px";O.style.height=this.actualOffsetHeight-2*I+"px";O.style.padding=G+"px "+F+"px";H.applyStyles2DomNode(O,X);Q=S.createElement("div");Q.setAttribute("class","gm-textbody-unit");Q.style.left=N+"px";Q.style.width=this.actualOffsetWidth-2*I+"px";Q.style.height=this.actualOffsetHeight-2*I+"px";for(M in V){if(V.hasOwnProperty(M)){U=V[M];if((typeof U)==="string"||(typeof U)==="number"){Q.setAttribute(M,String(U));}else{Q[M]=V[M];}}}Q.appendChild(O);R.appendChild(Q);P.appendChild(R);}function E(){var N=this.domNode,Q=this.width,O=this.height,M=this.actualOffsetWidth,P=this.actualOffsetHeight;N.style.left=Math.floor((Q-M)/2)+"px";N.style.top=Math.floor((O-P)/2)+"px";}mstrmojo.gm.TitleLabelCapsule=mstrmojo.declare(mstrmojo.Widget,[],{scriptClass:"mstrmojo.gm.TitleLabelCapsule",cssClass:"",width:10,height:10,labelObj:null,styles:null,actualOffsetWidth:0,actualOffsetHeight:0,hasEllipsis:false,lineChanged:false,lineCound:1,maxLineCount:2,markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px; height:auto"></div>',init:function(M){this.labelObj={};this.styles={};if(this._super){this._super(M);}},postBuildRendering:function(){L.call(this);A.call(this);E.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMUtility","mstrmojo.color","mstrmojo.ui.menus.EditorConfig","mstrmojo.ui.menus.ToolbarEditorConfig","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.LineConfigGroup","mstrmojo.ui.editors.controls.FillConfigGroup","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.AdvancedColorPicker");var a=mstrmojo,I=a.dom,K=a.hash,b=a.array,A=a.css,k=a.VisEnum.ControlType,j=mstrmojo.gm,F=mstrmojo.color,V=j.GMUtility,R=a.VisUtility,l=j.FormatingPropertyTag,f=mstrmojo.models.FormatModel,d=f.ENUM_PROPERTY_NAMES,P=mstrmojo.chart.enums.EnumFontStyle,g=mstrmojo.VisEnum.GMLegendFormatingPropertyTag,G=mstrmojo.VisEnum.NetworkLegendFormattingCategory,W=mstrmojo.ui.editors.controls.AdvancedColorPicker,X={GLOBAL:"glb",FORMATTING:"fmt"},D={FONT_COMP:"FntCmp",FONT_FAMILY:"FntFml",FONT_STYLE:"FntStyle",FONT_SIZE:"FntSz",FONT_COLOR:"FntClr",LINE_COMP:"LnCmp",SHOW:"Shw",COLOR:"Clr",STYLE:"Style",THICKNESS:"Thk"};function N(t,q){var p=this.widget,r=p.domToolbarPH,s=this;p._lastOpened=null;r.innerHTML="";document.body.appendChild(r);A.toggleClass(r,mstrApp.getThemeClassName(),true);this.configureLegendPopup(q,r);p.toolEditor=q.newInstance({unrender:function(){}});p.toolEditorClosefn=function(u){var x=u.target,w=p.toolEditor.domNode;if(!I.contains(w,x,true,w)&&!R.isHostedPopupNode(x,"class",true,document.body)){s.hideToolbar();}};I.attachEvent(document.body,"mousedown",p.toolEditorClosefn,true);p.openPopup(this.widget.toolEditor);A.toggleClass(document.body,"hasToolbarPopup",true);}function L(q,p){var r;if(p===X.GLOBAL){r=this.readGlobalProperty(q);}else{if(p===X.FORMATTING){r=this.widget.getPropertiesOfFormatable();}}if(q.slice(-3)===D.COLOR){if(q!==l.COLOR_SQUARE_COLOR||p!==X.GLOBAL){r=V.decodeColor(r);}}return r;}function Q(q,p){var r=this;if(p===X.GLOBAL){return function(t){var s=L.call(r,q,X.GLOBAL);if(q===l.COLOR_SQUARE_COLOR){s=s.color;}if(!K.equals(t,s)){if(q.indexOf(D.COLOR)!==-1){t=V.encodeColor(t);}r.writeGlobalProperty(q,t);}};}return function(u,s){var t=L.call(r,q,X.FORMATTING);if(u!==t){if(q.indexOf(D.COLOR)!==-1){u=F.encodeColor(u);}r.widget.writeFormatableProperties(q,u,s);}};}function O(q,p){q=q||[];p=p||"";b.forEach(q,function(r){r.cssDisplay="inline-block";});return{scriptClass:"mstrmojo.HBox",cssClass:p,children:q};}function e(q,r){q=q||[];var p=new mstrmojo.Box({children:q,cssText:r});return p;}function B(t,u,p){var s="white-space: nowrap; width: 50px;";if(t===mstrmojo.desc(3905,"Background")||t===mstrmojo.desc(6242,"Color")){s="white-space: nowrap;";}else{if(t===mstrmojo.desc(2885,"Fill")){s="white-space: nowrap; margin-right: 9px;";}}var q=new mstrmojo.Label({text:t}),r=e(q,s);return O([r,u],p);}function c(q,r,p){var s=this;q=q||{};if(q.propNames===undefined){q.propNames=r;}q.onGroupValueChange=function(t,w,u){if(w!==u&&w!==undefined){(Q.call(s,t,p))(w,u);}};return q;}function S(r,q,p){var s=this;b.forEach(q,function(t){var u=L.call(s,t,p);if(u!==undefined){r.setChildValue(t,u);}});}function C(p,s,r,q){q=c.call(this,q,s,r);K.copy({width:"140px",height:"22px",colorPickerHostWithin:true},q);var t=new mstrmojo.ui.editors.controls.FillConfigGroup(q);if(t){t.iniChildrenComp(s);S.call(this,t,s,r);}if(typeof p==="string"){return B(p,t,(q||[]).rowContainerCSSClass);}return t;}function Z(r,q,p){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-ui-ToolBoxBackgroundFill",children:[C.call(this,mstrmojo.desc(2885,"Fill"),r,q,K.copy({rowContainerCSSClass:"mstrmojo-ui-rowContainer"},p))]}]});}function n(t,r,w,u,q){var s=L.call(this,w,u),x=this;var p=new mstrmojo.ui.editors.controls.ColorPickerButton({isHostedWithin:true,width:"40px",selectedValue:s,showNoFill:false,postselectedValueChange:function(y){(Q.call(x,w,u))(y.value,y.valueWas);}});if(t){p.alias=t;}if(typeof r==="string"){return B(r,p);}return p;}function o(q){var p;if(q.listenToUpdateColorMap instanceof Function){p=q.listenToUpdateColorMap(function(){q.raiseEvent({name:"colorByColorChange",type:"invalidateCache"});if(p&&q.detachUpdateColorMapListener instanceof Function){q.detachUpdateColorMapListener(p);}});}}function h(r,q){var p=L.call(this,r,q),s=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({cssClass:"cbsquare-colorpicker",contents:[new mstrmojo.ui.editors.controls.AdvancedColorPicker({showAutomatic:!p.isDefaultColor,color:p.color,colorChanged:function(t){t=(this.showAutomatic&&t===W.VAL_AUTOMATIC)?"default":t;o(s.widget);(Q.call(s,r,q))(t,p.color);s.hideToolbar();},colorCanceled:function(){s.hideToolbar();}})]});}function U(w,q){var p={},u=L.call(this,q+D.FONT_STYLE,X.GLOBAL),s=L.call(this,q+D.FONT_COLOR,X.GLOBAL),r=L.call(this,q+D.FONT_FAMILY,X.GLOBAL),t=L.call(this,q+D.FONT_SIZE,X.GLOBAL);if(u!==undefined){p[d.FONT_WEIGHT]=(!isNaN(u)&&((u&P.FS_BOLD)>0));p[d.FONT_STYLE]=(!isNaN(u)&&((u&P.FS_ITALIC)>0));p[d.UNDERLINE]=(!isNaN(u)&&((u&P.FS_UNDERLINE)>0));p[d.LINE_THROUGH]=(!isNaN(u)&&((u&P.FS_STRIKETHROUGH)>0));}if(s!==undefined){p[d.COLOR]=s;}if(t!==undefined){p[d.FONT_SIZE]=t;}if(r!==undefined){p[d.FONT_FAMILY]=r;}w.setFormatSource(p);}function H(q,p){var r=null;if(p.indexOf(D.FONT_FAMILY)!==-1){r=q.fontFamily;}else{if(p.indexOf(D.FONT_STYLE)!==-1){r=q.fontStyle;}else{if(p.indexOf(D.FONT_SIZE)!==-1){r=q.fontSize;}else{if(p.indexOf(D.FONT_COLOR)!==-1){r=q.fontColor;}}}}return r;}function M(s,r,p){var q={bold:P.FS_BOLD,italic:P.FS_ITALIC,underline:P.FS_UNDERLINE,strikeout:P.FS_STRIKETHROUGH},t=this;r.forEach(function(u){var w=H(s,u);if(w){w.propName=u;if(u.indexOf(D.FONT_STYLE)!==-1){w.postselectionChange=function(x){var AA=x.added,AB=w.items[(AA&&AA[0]!==undefined)?AA[0]:x.removed[0]],z=!!AA,y=L.call(t,u,p),AC=(y===undefined?0:y);if(z){AC=AC|q[AB.css];}else{AC=AC&(~q[AB.css]);}w.parent.raiseFormatValueChange(u,AC,y);};}else{if(u.indexOf(D.FONT_FAMILY)!==-1){w.postselectedIndexChange=function(x){var AA=x.value,z=x.valueWas;if(AA!==z){var y=w.items;w.parent.raiseFormatValueChange(u,y[AA].id,y[z]&&y[z].id);}};}else{if(u.indexOf(D.FONT_SIZE)!==-1){w.postselectedValueChange=function(x){var z=parseInt(x.value,10)+"pt",y=parseInt(x.valueWas,10)+"pt";if(z!==y){w.parent.parent.raiseFormatValueChange(u,z,y);}};}else{w.postselectedValueChange=function(x){w.parent.parent.raiseFormatValueChange(u,x.value,x.valueWas);};}}}}});}function Y(q,t,s,r){var x=this;r=r||{};if(r.propNames===undefined){r.propNames=t;}if(r.onGroupValueChange===undefined){r.onGroupValueChange=function(y,AA,z){if(AA!==z&&AA!==undefined){(Q.call(x,y,X.GLOBAL))(AA,z);}};}var p={cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"397px",height:"22px"};r=K.copy(p,r);var w=new mstrmojo.ui.editors.controls.CharacterGroup(r),u=H(w,l.LEGEND_FONT_COLOR);u.showNoFill=false;M.call(this,w,t,s);U.call(this,w,q);return w;}function J(t,s){var y=s.firstChild,AC=y?y.offsetWidth:0,q=y?y.offsetHeight:0,u=document.body.offsetWidth,AB=document.body.offsetHeight,w=10,x=5,AA=5;if(y){y.style.left="0";y.style.right="auto";y.style.top="0";y.style.bottom="auto";}var z={w:AC,h:0};var r=q>0;if(r){z.h=q;}else{return false;}if(r){s.style.left=t.x+"px";s.style.top=t.y-q-w/2+"px";}if(t.x+z.w>u){s.style.left=t.x-AC+"px";}if(r){var p=0;if(t.y-q-w/2<x){p=x;s.style.top=p+"px";}else{if(t.y+w/2>AB){p=Math.max(AB-w-q,x);s.style.top=p+"px";}}}}function E(p,s,r,q){return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[Y.call(this,p,s,r,q)]}]});}mstrmojo._FormateVisLegend=mstrmojo.provide("mstrmojo._FormateVisLegend",{_mixinName:"mstrmojo._FormateVisLegend",widget:null,readGlobalProperty:undefined,writeGlobalProperty:undefined,configureLegendPopup:undefined,init:function(p){this.widget=null;if(this._super){this._super(p);}if(this.widget&&!this.widget.domToolbarPH){var q;q=document.createElement("div");q.setAttribute("class","gm-menu-placeholder");this.widget.domToolbarPH=q;}},handleRMCOnLegend:function(AB){var u=AB.getTarget(),w=AB.e,z={x:w.pageX,y:w.pageY},y=u.getAttribute("type"),q,x,s,t=this,r=this.widget;AB.cancel();AB.preventDefault();if(mstrApp.isAppStatePresentation()||!mstrApp.allowWebDashboardDesign()||mstrApp.isInVFInteractMode){return ;}var AA,p=function(AC){switch(AC){case k.LGD_COLORBOX_CTN:case k.LGD_COLORBOX:if(AC===k.LGD_COLORBOX){u=u.parentNode;}x=u.firstChild.identity;if(x&&x.comb){this.widget.colorSqureIdentity=x;this.selectColorBox(u,this.fmtMode);q=h.call(this,l.COLOR_SQUARE_COLOR,X.GLOBAL);z=this.adjustColorPickerPos(u);if(!z.alignLeft){s=q.ENUM_CORNERS;q.setAlignment(s.BOTTOM_LEFT,s.TOP_RIGHT);}}break;case k.LGD_TITLE:case k.LGD_TEXT:this.selectText(true);var AD=[l.LEGEND_FONT_SIZE,l.LEGEND_FONT_FAMILY,l.LEGEND_FONT_STYLE,l.LEGEND_FONT_COLOR];q=E.call(this,"lgd",AD,X.GLOBAL);AA="lgd";break;default:this.selectLegendBody();var AE=[l.LEGEND_BG_COLOR,l.LEGEND_BG_FILL_TRANSPARENCY];q=Z.call(this,AE,X.GLOBAL);AA="lgd";break;}if(q){N.call(this,z,q);if(!!AA){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");r.parent.selectVIUnit();var AF=r.edtModel._targetPulldown;if(AF){AF.selectItemByField("v",AA);}}}};p.call(this,y);J.call(this,z,this.widget.domToolbarPH);},hideToolbar:function(){var q=this.widget,r=q.domToolbarPH,t=r.firstChild,p=r.parentNode;if(t){r.removeChild(t);}if(p){p.removeChild(r);}var s=q.toolEditor;if(s){s.unrender=function(){s._super();};s.destroy();s.unrender=function(){};delete q.toolEditor;A.toggleClass(document.body,"hasToolbarPopup",false);A.toggleClass(r,mstrApp.getThemeClassName(),false);}if(q.toolEditorClosefn){I.detachEvent(document.body,"mousedown",q.toolEditorClosefn,true);delete q.toolEditorClosefn;}},highlightText:function(p){throw new Error("subclass need to implement highlightText function");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility","mstrmojo.Obj","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.num","mstrmojo.string");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var a=mstrmojo,G=mstrmojo.gm,b=G.GMUtility,K=a.VisUtility,H=a.array,D=a.gm.EnumGraphType,U=mstrmojo.num,C=mstrmojo.string,J=a.chart.model.enums.EnumDSSGraphRegressionType,I=G.EnumRefLineModelType,L=G.EnumIdentityType,E=G.WidgetPropertyTag,V=G.EnumTrendRefModelLabels,M=a.chart.model.enums.EnumDSSObjectType;var X=mstrmojo.chart,W=X.common.Utility;function F(f,d){var h=[],e=[],g,c=Math.min(f.length,d.length),j=function(l,k){return l.x>k.x?1:-1;};for(g=0;g<c;g++){e.push({x:f[g],y:d[g]});}e.sort(j);H.forEach(e,function(k){h.push(k.x);h.push(k.y);});return h;}function S(g,e){var d,f;if(this.isTrendLine===false){return undefined;}d=this.getBBSection();if(g){f=d.fl||[];}else{f=d.bl||[];}if(e){var c=[];H.forEach(f,function(h){c.push(h.join());});return c;}return f;}function P(f,d){var e=1000000000;if(f!==0&&(Math.abs(f)<0.001||Math.abs(f)>e)){return U.format(6,3,"",f);}return parseFloat(f.toFixed(d).replace(/0+$/,"")).toString();}function Q(g,d,j){var c=j,f="",h=[];H.forEach(d,function(k){if(isNaN(k)){h.push(k);}else{h.push(P(k,3));}});function e(q){var o,n="",k,s,l,r;k=q.length;for(o=k-1;o>=0;o--){s=q[o];l=parseFloat(s);r=o;if(l===0){continue;}if(n!==""){if(l>0){n+=" + ";}else{n+=" - ";l=-l;s=s.slice(1);}}if(r!==0){if(r===1){n+=s+c;}else{n+=s+c+"^("+r+")";}}else{n+=s;}}return n;}if(g==="Linear"){f=e(h);}else{if(g==="Exponential"){if(h.length<2){return h[0];}if(typeof h[1]==="string"&&h[1].slice(0,2)==="Ln"){f=h[0]+"e^("+h[1].slice(2)+c+")";}else{if(h[1]>0){f=h[1];}else{f="("+h[1]+")";}f+="^("+c+")*"+h[0];}}else{if(g==="Power"){if(h.length<2){return h[0];}f=c+"^("+h[1]+")*"+h[0];}else{if(g==="Poly"){f=e(h);}else{if(g==="Log"){if(h.length<2){return h[0];}f=h[1]+"ln("+c+")";if(h[0]!==0){if(h[0]>0){f+=" + ";f+=h[0];}else{f+=" - ";f+=(-h[0]);}}}}}}}return f;}function O(g,d,k){var c=k,e="",h=[],j=[];H.forEach(d,function(l){if(isNaN(l)){h.push(l);}else{h.push(P(l,3));}});function f(r){var q,l,u,n,t,o=[],s;l=r.length;for(q=l-1;q>=0;q--){u=r[q];n=parseFloat(u);t=q;if(n===0){continue;}s="";if(o.length){if(n>0){s+=" + ";}else{s+=" - ";n=-n;u=u.slice(1);}}if(t!==0){if(t===1){s+=u+c;o.push({v:s});}else{s+=u+c;o.push({v:s});o.push({v:"("+t+")",isSuper:true});}}else{s+=u;o.push({v:s});}}return o;}if(g==="Linear"){j=f(h);}else{if(g==="Exponential"){if(h.length<2){j.push({v:h[0]});return j;}if(typeof h[1]==="string"&&h[1].slice(0,2)==="Ln"){j.push({v:h[0]+"e"});j.push({v:"("+h[1].slice(2)+c+")",isSuper:true});}else{if(h[1]>0){j.push({v:h[1]});}else{j.push({v:"("+h[1]+")"});}j.push({v:"("+c+")",isSuper:true});j.push({v:"*"+h[0]});}}else{if(g==="Power"){if(h.length<2){j.push({v:h[0]});return j;}j.push({v:c});j.push({v:"("+h[1]+")",isSuper:true});j.push({v:"*"+h[0]});}else{if(g==="Poly"){j=f(h);}else{if(g==="Log"){if(h.length<2){j.push({v:h[0]});return j;}e=h[1]+"ln("+c+")";if(h[0]!==0){if(h[0]>0){e+=" + ";e+=h[0];}else{e+=" - ";e+=(-h[0]);}}j.push({v:e});}}}}}return j;}function N(f,d,e){var c;for(c=0;c<e;c++){f.push(d);}return f;}function Y(e){var d,c=0;for(d=0;d<e.length;d++){if(e[d]!==null){c++;}}return c;}function Z(d){var c="";switch(d){case"Linear":c=mstrmojo.desc(4888,"Linear");break;case"Exponential":c=mstrmojo.desc(12022,"Exponential");break;case"Power":c=mstrmojo.desc(12023,"Power");break;case"Poly":c=mstrmojo.desc(12024,"Polynomial");break;case"Log":c=mstrmojo.desc(12021,"Logarithmic");break;}return c;}var A=mstrmojo.declare(mstrmojo.Base,null,{getTooltipContent:function(){var w,c,AJ,y,r,s,AG,n,AB,AC,p,q,AA,AH,h,AK,o,u,e=this.objType,d=this.lineModel,AD=[],x="x",k=[];if(d){q=d.def;}if(e===L.TREND_LINE){AJ=d.trendLineModel;y=AJ.tmData;s=AJ.dp;AB=s.lds.gmm;AG=AB.gmCtr;n=AG.getChartInfo();AD.push(y.mid);if(n.tp===D.BUBBLE||n.tp===D.SCATTER){AA=y["x-vars"];if(AA!==undefined){AD.push(AG.getMetricIndexFromID(y["x-vars"][0]));}}r=AB.getMetricNamesFromIndex(AD);k.push({n:mstrmojo.desc(14440,"Trendline of"),v:r.join(", ")});var AI=false;if(q&&this.lineModel.def.incl===1){AI=true;}if(n.isABL&&AI){var j=AG.getBreakByAttributes();var AF=[],g=[];H.forEach(j,function(f){AF.push(f.n);});if(AF.length>0){var l=this.lineModel.getBBSection();if(l){var z=l.bbes;for(AC=0;AC<AF.length;AC++){g.push(j[AC].es[z[AC]].n);}k.push({n:AF.join(", "),v:g.join(", ")});}}}k.push(null);var AE=d.getFormulas();if(AE){AE=AE[0];AA=y["x-vars"];AH=y["x-types"];if(AA!==undefined){if(AH[0]===M.DssTypeAttribute){h=AG.getAttributeById(AA[0]);if(h&&h.n){x=h.n;}}else{if(AH[0]===M.DssTypeMetric){h=AG.getMetricIndexFromID(AA[0]);if(!isNaN(h)){h=AB.getMetricNamesFromIndex([h]);if(h.length>0){x=h[0];}}}}}if(AE.coefficients){o=O.call(this,AE.type,AE.coefficients,C.encodeHtmlString(x,true));k.push({n:mstrmojo.desc(14441,"Trendline function"),v:o,noTruncate:true,isTrendLineFuncToken:true,skipEncode:true});}for(AK in AE){if(AE.hasOwnProperty(AK)){if(AK.indexOf("coefficients")<0){p=isNaN(AE[AK])?AE[AK]:P(AE[AK],3);if(AK.slice(-2)==="R2"&&(p===0||p==="0")){AK=AK.slice(0,AK.length-2)+"R<sup>2</sup>";u=mstrmojo.desc(6098,"N/A");}else{if(AK==="type"){AK=mstrmojo.desc(8733,"Type");u=Z(AE.type);}else{AK=(AK.slice(-2)==="R2")?AK.slice(0,AK.length-2)+"R<sup>2</sup>":AK;u=b.everythingToString(p);}}k.push({n:AK,v:u,skipEncode:true});}}}}return k;}w=d.getReferenceLineLabel(false,true);c=w.split(":");if(c.length>1){return[{n:c[0],v:c[1]}];}return[];}});var B=mstrmojo.declare(mstrmojo.Base,null,{init:function R(g){this._super(g);var e=this.trendLineModel,f=e.midx,j=e.mx,d,c,k,h;if(j&&j[f]){d=j[f].mdls;if(d){c=d.mod_c;k=e.tmData.modix;h=c[k-1];this.def=h;}}else{if(this.isTrendLine===false&&this.trendLineModel.refIsDefOnAxis){this.def=this.trendLineModel.defOnZone;}}},getSeasonalityType:function(){if(this.isTrendLine){return this.trendLineModel.dp.lds.gmm.gmCtr.firstRes.dz.sea;}return 0;},getLevel:function(){var c=this.def,d=c&&c.clientDef;if(d){if(this.isTrendLine){return d.trdLvl;}return d.refLvl;}return -1;},getLineThickness:function(){var c=this.def,d=c&&c.clientDef;if(d){return parseInt(d.trdRefLnThk,10);}return 1;},getLineColor:function(){var d=this.def,e=d&&d.clientDef,c;if(e){c=e.trdRefLnClr;if(typeof c==="string"&&c[0]==="#"){b.encodeColor(c);}return parseInt(e.trdRefLnClr,10);}return 16711680;},getLineRenderType:function(){var c=this.def,d=c&&c.clientDef;if(d){return parseInt(d.trdRefLnStyle,10);}return mstrmojo.chart.enums.EnumLineStyle.LS_DASH;},getTrendLineValuesWithForecast:function(){var g=this.getTrendLineStartingGroup(),f=this.trendLineModel.dp,d=f.getChartInfo(),l=[],h=[],k,n,c,e=false,j;k=this.getBwdData();n=this.getFwdData();if(d.tp===D.BUBBLE||d.tp===D.SCATTER){j=this.getBwdData(true);c=this.getFwdData(true);e=true;}if(k&&k.length>0){h=h.concat(k);if(e){l=l.concat(j);}}else{if(!e){N(h,undefined,g);}}h=h.concat(this.getTrendLineValues());if(e){l=l.concat(this.getTrendLineValues(true));}if(n&&n.length>0){h=h.concat(n);if(e){l=l.concat(c);}}else{if(f.fwdEnabled){if(!e){N(h,undefined,f.fwdSteps);}}}if(e){return F(l,h);}return h;},getTrendLineStartingGroup:function(){var c=this.trendLineModel.dp;if(c.bwdEnabled){return c.bwdSteps;}return 0;},getTrendLineValues:function(c){if(this.isTrendLine===false){K.visPrint("this function is only for trend line only, for reference line, call getReferenceLineValue instead");return undefined;}var h=this,n=h.seriesId,p=h.trendLineModel,o=p.tmData,k=o.trm,e=p.dp,f,d=e.innerGetGroupCount(),l,g=[],j;for(f=0;f<d;f++){l=e.innerGetGraphCell(n,f);if(c){j=l.getData(0);}else{j=l.getAssoDataWithMetricIndex(k,true);}g.push(j);}return g;},getReferenceLineLabelFont:function(){var d=this.def,c={},e=d&&d.clientDef;if(e){["rfLnFntFml","rfLnFntSz","rfLnFntStyle","rfLnFntClr"].forEach(function(f){if(f!=="rfLnFntFml"){c[f]=parseInt(e[f],10);}else{c[f]=e[f];}});return c;}return{rfLnFntFml:"Verdana",rfLnFntSz:"11pt",rfLnFntStyle:0,rfLnFntClr:0};},getReferenceLineLabel:function(z,l,AH){var AI=this,AE=false,y=this.getReferenceLineValue(),AJ=AI.trendLineModel,AC=AJ.midx,e,u=AJ.dp,AA=u.lds.gmm,d,AB,AD,j,t,h=[],n=!!this.trendLineModel.defOnZone;if(!n){d=AA.getMetricNumberFormat(AC);e=AA.getMetricNamesFromIndex([AC])[0];}else{if(AH){if(AH.Condense){AE=true;}else{if(AH.NumberFormat){d=AH.NumberFormat;}}}else{var s=AJ.direction==="horizontal",w=true,q=u.rowIndex,AF=u.colIndex,k=s?q:AF,x=(s?"y":"x")+(w?"1":"2");d=AA.gmCtr.axisFormats[x][k];AE=d==="Condensed";}}if(AE){AB=W.abbreviateNumber(y,5);}else{if(d){AB=U.formatByMask(d,y);}else{AB=y;}}var o=this.def,p=o&&o.clientDef;AD="Average";j=I.AVG;if(!!(o&&o.tp)){j=o.tp;switch(j){case I.MAX:AD=mstrmojo.desc(2125,"Maximum");break;case I.MIN:AD=mstrmojo.desc(2127,"Minimum");break;case I.AVG:AD=mstrmojo.desc(2122,"Average");break;case I.MED:AD=mstrmojo.desc(2126,"Median");break;case I.FIRST:AD=mstrmojo.desc(4046,"First");break;case I.LAST:AD=mstrmojo.desc(4049,"Last");break;case I.CONST:AD=mstrmojo.desc(7194,"Constant");break;}}if(l===true){if(j===I.CONST&&p&&!!p[E.REF_LINE_NAME]){t=p[E.REF_LINE_NAME];}else{t=n?(AD+" Axis"):(AD+" "+e);}return t+": "+AB;}if(p){var g=p.refLbShw;if(!g){return"";}var f=p.refLbTp;if(f&V.DssModelLabelsType){h.push(AD);}if(f&V.DssModelLabelsMetric){if(!n){h.push(e);}else{h.push("Axis");}}if(f&V.DssModelLabelsValue){h.push(AB);}if(z){return h;}return h.join(" ");}var AG;if(n){AG=[AD,"Axis",AB];}else{AG=[AD,e,AB];}if(z){return AG;}return AG.join(" ");},getReferenceLineValue:function(){return this.trendLineModel.tmData.inChartModel[0].model;},getReferenceLineDirection:function(){return this.trendLineModel.direction;},getBBSection:function(){var g=this,e,d,c=g.trendLineModel,f=c.tmData,h=f.inChartModel;e=g.bbIdx;d=h[e];return d;},getForcastLabelDataPairs:function(j,g){if(!this.isTrendLine){return undefined;}if(g===undefined){g=true;}var d=j?this.getFwdLabels(g):this.getBwdLabels(g),c=d.length,f=[],e,h=j?this.getFwdData():this.getBwdData();for(e=0;e<c;e++){f.push({lb:d[e],v:h[e]});}return f;},getFwdLabels:function(c){if(!this.isTrendLine){return undefined;}return S.call(this,true,c);},getFormulas:function(){if(!this.isTrendLine){return undefined;}var d=this.getBBSection(),c=d.model;return c.formulas;},getCoefficients:function(c){c=c||false;var e=this.getFormulas()[0],d=["coefficients","coefficients(seasonal)"];if(c){return(e&&(e[d[0]]||e[[d[1]]]))||[];}return(e&&e[d[0]])||[];},getTrendLineType:function(){var f=["Linear","Exponential","Power","Poly","Log"],d=[J.DssGraphRegressionLinear,J.DssGraphRegressionExp,J.DssGraphRegressionPow,J.DssGraphRegressionPoly,J.DssGraphRegressionLog],g,e,c;g=this.getFormulas();if(g){e=g[0].type;c=f.indexOf(e);if(c>=0){return d[c];}}return J.DssGraphRegressionNone;},getFwdData:function(f){if(!this.isTrendLine){return undefined;}var h=this.trendLineModel.dp;if(!h.fwdEnabled){return[];}var d=this.getBBSection(),e,g=h.getChartInfo(),c=d.model;if(f){e=[];H.forEach(c.fwdins,function(j){e.push(j[0]);});return e;}if(!d.fse&&g.isABL){return[];}return c.fwdfsts;},getBwdLabels:function(c){if(!this.isTrendLine){return undefined;}return S.call(this,false,c);},getBwdData:function(f){if(!this.isTrendLine){return undefined;}var h=this.trendLineModel.dp;if(!h.bwdEnabled){return[];}var d=this.getBBSection(),e,g=h.getChartInfo(),c=d.model;if(f){e=[];H.forEach(c.bwdins,function(j){e.push(j[0]);});return e;}if(!d.bse&&g.isABL){return[];}return c.bwdfsts;},getRefLineLabelIdentity:function(){var c={objType:L.REF_LINE_LABEL,lineModel:this,tlOpt:this.trendLineOpt};return new A(c);},getIdentity:function(){var c={objType:this.isTrendLine?L.TREND_LINE:L.REF_LINE,lineModel:this,tlOpt:this.trendLineOpt};return new A(c);},testSingleTrendLineModel:function(){var d=this.seriesId,c;if(this.isTrendLine){c=this.getTrendLineValues();K.visPrint("trend line values for seriers "+d+" : "+JSON.stringify(c));K.visPrint("fwd info :"+JSON.stringify(this.getForcastLabelDataPairs(true,true)));K.visPrint("bwd info :"+JSON.stringify(this.getForcastLabelDataPairs(false,true)));K.visPrint("values including forecast: "+JSON.stringify(this.getTrendLineValuesWithForecast()));}else{c=this.getReferenceLineValue();K.visPrint("reference line  for "+this.getReferenceLineLabel()+" : "+JSON.stringify(c));K.visPrint("direction of reference line is "+this.getReferenceLineDirection());}K.visPrint("thickness: "+this.getLineThickness());K.visPrint("line color "+this.getLineColor());K.visPrint("line style "+this.getLineRenderType());K.visPrint("-------------------------------------------------------------------");}});mstrmojo.gm.TrendLineModel=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.TrendLineModel",isTrendLine:undefined,init:function R(c){this._super(c);},getValidSeriesIndex:function(){var p=this.tmData,l=p.trm,d=this.dp,g,f,q=this.seriesIds,c=q.length,e=d.innerGetGroupCount(),h,o,k,n;for(g=0;g<c;g++){n=q[g];h=[];for(f=0;f<e;f++){o=d.innerGetGraphCell(n,f);k=o.getAssoDataWithMetricIndex(l,true);h.push(k);}if(Y(h)>1){return g;}}return 0;},getSingleTrendLines:function(c){var l=this,f=this.tmData,o=this.seriesBBUnits,n=this.seriesIds,g=0,d=f.inChartModel,h=[],k,j,e;H.forEach(d,function(p){k=p.bbes;if(k){j=b.indexOf(o,k);}else{if(l.isTrendLine){j=l.getValidSeriesIndex();}else{j=0;}}e=n[j];p.seriesId=e;h.push(new B({trendLineModel:l,bbIdx:g,seriesId:e,isTrendLine:l.isTrendLine,trendLineOpt:l.trendLineOpt}));g++;});if(l.isTrendLine&&c){H.forEach(h,function(r){var q=r.getFwdLabels(false);var p=r.getBwdLabels(false);if(c.fwdLbs===undefined||c.fwdLbs.length<q.length){c.fwdLbs=q;}if(c.bwdLbs===undefined||c.bwdLbs.length<p.length){c.bwdLbs=r.getBwdLabels(false);}});}return h;}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.fe.FilterEditor","mstrmojo.fe.AndOrNode","mstrmojo.fe.DynamicNode","mstrmojo.fe.ConditionNode","mstrmojo.ui._HasScroller","mstrmojo.vi.ui.editors.fe.RelationNode");var C=mstrmojo.hash,B=mstrmojo.expr,A=B.ET;mstrmojo.vi.ui.editors.fe.RWViewFilterExprTree=mstrmojo.declare(mstrmojo.fe.RWViewFilterExprTree,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.editors.fe.RWViewFilterExprTree",markupString:'<div id="{@id}"><div class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},nodeClassMap:{14:mstrmojo.fe.AndOrNode,15:mstrmojo.vi.ui.editors.fe.RelationNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},levelSwitchValidTypes:[A.MQ,A.MC],setupScrollNodes:function(){this.scrollNode=this.scrollboxNode;},getItemConfig:function(F,D,G){var E=this._super(F,D,G);return C.copy({getConditionTextPostfix:function(){return"";}},E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.fe.FilterEditor","mstrmojo.ui._HasScroller");var C=mstrmojo.hash,B=mstrmojo.expr,A=B.ET;mstrmojo.vi.ui.editors.fe.RWViewLimitExprTree=mstrmojo.declare(mstrmojo.fe.RWViewLimitExprTree,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.editors.fe.RWViewLimitExprTree",markupString:'<div id="{@id}"><div class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},levelSwitchValidTypes:[A.MQ,A.MC],getItemConfig:function(F,D,G){var E=this._super(F,D,G);return C.copy({getConditionTextPostfix:function(){return"";}},E);},setupScrollNodes:function(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.VisEnum","mstrmojo.VisLegend","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.gm.GMIdentities","mstrmojo.gm.GMUtility","mstrmojo.array","mstrmojo.string","mstrmojo.hash","mstrmojo._FormateVisLegend","mstrmojo.ui._HasScroller");var Al=mstrmojo,Ah=Al.gm,AE=Al.dom,Ag=Al.css,S=Al.hash,AS=Al.VisUtility,b=Ah.GMUtility,P=mstrmojo.array,Z=mstrmojo.string,AF=mstrmojo.ui.editors.controls.AdvancedColorPicker,g=Ah.ColorSquareIdentity,C=Al.VisEnum.ControlType,l=Ah.EnumLegendSlot,AQ=Ah.EnumDockPosition,q=Ah.EnumLegendSlot,AK=Ah.EnumIdentityType,AI=Ah.EnumShape,Ac=Al.VisEnum.GMLegendDataType,J=mstrmojo.desc(13966,"Size by:"),AA="px",F=1.35,a=0.75,X=5,K=20,o=K,AJ=5,A=5,AB=16,f=15,H=16,AN=20,G=150,w=15,Aj=1,AD="setAttribute",n=3,j=2,Q=8,u=15,AX=14,y=1,R=2,h=4,Am=8,Ak=16,L=10,AZ=3,AO=50,AU=-3,x=5,AV="gm-legend-lock-icon",AR=mstrmojo.desc(14442,"This metric has its axis scale set to custom min and max values"),O="http://www.w3.org/2000/svg",z="\u2026",N=/[ \-]/;function AW(As,Au,An,Av){if(!As){return ;}var Ap,Ay,Aq,Ax,At=As.style,Az=Au===AQ.TOP,Ao=Au===AQ.BOTTOM,Aw=Au===AQ.LEFT,Ar=Au===AQ.RIGHT;if(Az||Ao){Ap=An;Ay=1;Aq=-1;Ax=AU;if(Ao){Ax+=Av;}}else{if(Aw||Ar){Ap=1;Ay=Av;Ax=-1;Aq=AU;if(Ar){Aq+=An;}}}At.cssText="left:"+Aq+AA+";top:"+Ax+AA+";width:"+Ap+AA+";height:"+Ay+AA+";";if(mstrApp.isInVFInteractMode){At.cursor="default";}}function I(Ao){var An=String(Ao);return An.indexOf(" ")>=0||An.indexOf("-")>=0;}function Y(Ap,Ao,Aq){var An=typeof Ap==="string"?b.restoreSpecialChars(Ap):Ap;return AS.measureTextWidth(An,Ao,Aq);}function AM(Ar,Aq,Ao,An){var Ap=Y(Aq,Ao,L);Ar.setAttribute("measureWidth",Ap);if(Ap>An){Ap=An;}else{Ar.style.overflow="visible";}Ar.setAttribute("displayWidth",Ap);Ar.style.width=Ap+AA;return Ap;}function Ai(Ap,Ao){var An;if(parseInt(Ap.getAttribute("measureWidth"))>Ao){An=parseInt(Ap.style.maxHeight);}else{An=parseInt(Ap.style.lineHeight);}return An;}function B(Ao){var An;if(Ao.textContent&&typeof (Ao.textContent)!==undefined){An=Ao.textContent;}else{An=Ao.innerText;}return An;}function c(Ap){var Ao=Ap.getAttribute("measureWidth"),An=Ap.getAttribute("displayWidth");if(!Ao){Ap[AD]("title","");}Ao=parseFloat(Ao,10);An=parseFloat(An,10);if((Ao-An)>0.1){Ap[AD]("title",B(Ap));}else{Ap[AD]("title","");}}function AP(Ar,An,Ao,Aq){var Ap=document.createElement("div");Ap[AD]("class","gm-legend-underLine");Ap.style.width=Aq-L+AA;Ap.style.left=An+5+AA;Ap.style.top=Ao+AA;Ar.appendChild(Ap);}function Ab(Aq,An,Ao){var Ap=document.createElement("div");Ap[AD]("class","gm-legend-underLine-anchorPoint");Ap.style.left=An+AA;Ap.style.top=Ao-3+AA;Aq.appendChild(Ap);}function AL(Aq,An,Ao,Ap){AP(Aq,An,Ao,Ap);Ab(Aq,An,Ao);}function p(Ap,A0,Aw,Au,Ay){var Av,Aq,Ax,An,Az=b.restoreSpecialChars(Ap.innerHTML),At=Az.length,Ar=0,Ao=At,As=false;if(Ap.scrollHeight>1.5*H){Av=Y(Ap.innerHTML,A0,L);Aq=Av-Aw+L;if(Aq>Ay){while((Ao-Ar)>1){Ax=(Ar+Ao)>>1;An=Az.substring(0,Ax)+z;Av=Y(An,A0,L);Aq=Av-Aw+L;if(Aq>Ay){Ao=Ax;}else{Ar=Ax;}}Ap.innerHTML=Z.encodeHtmlString(Az.substring(0,Ar)+z,true);Ap[AD]("title",Az);As=true;Av=Y(Ap.innerHTML,A0,L);Aq=Av-Aw+L;}AP(Ap,0,Au+H,(Aq<Ay)?Aq:Ay);}if(Aw>Ay){Ap[AD]("title",Az);}else{if(!As){Ap[AD]("title","");}}}function AC(An,Aw,As,Ao,Av,Ax){var Ap,Ar,At,Au,Aq=document.createElement("div");Aq[AD]("class","gm-legend-textcell");Aq[AD]("type",C.LGD_TEXT);Aq.style.lineHeight=f+AA;if(Av){Au=AM(Aq,Aw,Ax,Av);}if(Ao&y){Ap=(AN+AX)/2+As*AN;At=AB;}else{Ap=(w+AX)/2+As*w;if(Ao&Am){if(Ao&Ak){At=0;}else{At=u;}}else{if(Ao&h){At=Q;}else{At=0;}}}Ar=Au||u+L;Aq.innerText=Aw;Aq.identity={objType:AK.LEGEND_TEXT};AL(An,At,Ap,Ar);this.textDivs.push(Aq);An.appendChild(Aq);}function Ae(An,Aq){var Ao,As,Ar,Ap=0;if(An){Ar=An.elements;for(Ao=0,As=Ar.length;Ao<As;Ao++){Ap=Math.max(Ap,Y(Ar[Ao].label,Aq,L));}Ap+=AB+A*2+AZ;}return Ap;}function W(Aq,Ap){var At,An,As,Ar=Aq.items,Ao=0;if(!Ar){return 0;}At=Ar.length;As=Aq.custMetrics;for(An=0;An<At;An++){if(As&&As.indexOf(Ar[An])!==-1){Ao=Math.max(Ao,Y(Ar[An],Ap,L)+Q);}else{Ao=Math.max(Ao,Y(Ar[An],Ap,L));}}return Ao;}function AT(Aq,Ap){var An,As,Ar,Ao=0;if(Aq){Ar=Aq.elements;As=Ar.length;if(Aq.caseFlag===1){Ao=W(Aq,Ap);}else{if(Aq.caseFlag===0){for(An=0;An<As;An++){Ao=Math.max(Ao,Y("Max: "+Ar[An].v,Ap,L));}Ao+=w*n;Ao=Math.max(Ao,W(Aq,Ap));}else{if(Aq.caseFlag===2){for(An=0;An<As;An++){Ao=Math.max(Ao,Y(Ar[An].v,Ap,L));}Ao+=w*As+u;Ao=Math.max(Ao,W(Aq,Ap));}else{if(Aq.caseFlag===3){for(An=0;An<As;An++){Ao=Math.max(Ao,Y(Ar[An].v,Ap,L));}Ao+=w*x;}}}}Ao=Math.max(Ao,Y(J,Ap,L));Ao+=A*3;}return Ao;}function e(Ay,Aq,A2){if(!Ay||!Ay.length||Ay.length<1){return 0;}var Ar,Ao,A1,An,Au,Ax,At,Aw,Av,Ap,As,A0=o+2*Aj,Az=A0;for(Ar=0;Ar<Ay.length;Ar++){At=Ay[Ar];if(At.dataType===Ac.COLOR_BY){Aw=At.dataObj;if(Aw){Ap=2*AJ+H;A1=b.removeExtraSpace(Aw.item);Ax=Y(A1,A2,L);if((Ax+2*A>Aq-2*Aj)&&I(A1)){Ap+=H;}An=Aw.elements;Ao=An.length;Ap+=A;Ap+=j;An.forEach(function(A3){if(A3.bftp){Ah.GMLegend.IMAGE_SIZE_FIXED=G;AN=G;}});A0+=Ap+AN*Ao;Az+=Ap+(Ao>0?AN:0);}}else{if(At.dataType===Ac.SIZE_BY){Av=At.dataObj;if(Av){As=2*AJ+H;A1=b.removeExtraSpace(Av.item);Ax=Y(A1,A2,L);if((Ax+2*A>Aq-2*Aj)&&I(A1)){As+=H;}Au=Av.caseFlag;if(Au===1){Ao=0;}else{if(Au===0){Ao=2;}else{if(Av.caseFlag===2||Au===3){Ao=Av.elements.length;}}}Ao+=(Av.items&&Av.items.length)||0;As+=w*Ao;As+=A;As+=j;A0+=As;Az+=As;}}}}return{height:A0,minHeight:Az};}function Af(An,Ao){var Aq=0,Ap=0;P.forEach(An||[],function(Ar){var As;if(Ar.dataType===Ac.COLOR_BY){As=Ae(Ar.dataObj,Ao);if(As>Aq){Aq=As;}}else{if(Ar.dataType===Ac.SIZE_BY){As=AT(Ar.dataObj,Ao);if(As>Ap){Ap=As;}}}});return Math.max(Aq,Ap)+2*Aj;}function k(Ao,Au,As,Ar){var Ap=e(Ao,Au,Ar),An=Ap.height,At=As-X*2,Aq={};Aq.autoCollapse=Ap.minHeight>At;Aq.minHeight=Ap.minHeight;Aq.width=Au;Aq.height=Math.min(An,At);if(An>At){Aq.cutBy=An-At;}return Aq;}function E(Ao,Ap){var Aq=Ao.decodedColor||Ao.color||AF.VAL_AUTOMATIC,An;if(Aq.c1){An=Ag.buildGradient(Aq.or,Aq.c1,Aq.c2);Ap.style[Ag.convertCssToCamelCase(An.n)]=An.v;}else{Ap.style.backgroundColor=Aq;}if(Ao.image){Ap.style.backgroundImage=Ao.image;}if(Ao.opacity!==undefined){Ap.style.opacity=Ao.opacity;}Ap.identity=new g({objType:AK.COLOR_SQUARE,parentIdentity:this.identity,token:Ao.token,decodedColor:Ao.decodedColor,encodedColor:Ao.encodedColor,isDefaultColor:Ao.isDefaultColor});}function AY(){var A2,Az,Ax,An,Ay,A4,Ao,Av,At,Aq,A6=document,A5=this.triBtn,A1=this.closeBtn,As=this.cbContainer,Ap=this.sb1Container,A0=this.sb2Container,Au=this.cbTableContainer,Ar=null,A3=this.height-o-A-2*Aj,Aw=this.width-2*A-2*Aj;A5[AD]("class","gm-legend-tri-button-collapsed");if(this.autoCollapse){A5[AD]("title",mstrmojo.desc(13682,"There is not enough space to display the legend"));}else{A5[AD]("title",mstrmojo.desc(13683,"Maximize Legend"));}A1.style.display="none";this.splitter.style.display="none";this.domNode.style.overflow="hidden";for(A2=0;this.dataArray&&A2<this.dataArray.length;A2++){An=this.dataArray[A2];if(An.dataType===Ac.COLOR_BY){Ar=An.dataObj;break;}}As.style.display=Ar?"block":"none";Ap.style.display="none";A0.style.display="none";if(Ar){Ax=Ar.elements;Az=Ax.length;Ay=this.cbTitle;Ay.style.display="none";As.style.top=o+AA;As.style.width=Aw+AA;Au.style.top="0px";A4=this.cbTable;A4.innerHTML="";for(A2=0;A2<Az;A2++){Ao=A6.createElement("tr");Av=A6.createElement("td");Aq=A6.createElement("div");At=A6.createElement("div");Aq[AD]("class","gm-legend-colorbox-ctn-div");Aq[AD]("type",C.LGD_COLORBOX_CTN);Aq[AD]("title",Ax[A2].label);At[AD]("class","gm-legend-colorbox-div");At[AD]("type",C.LGD_COLORBOX);E.call(this,Ax[A2],At);Ao[AD]("class","gm-legend-tr");Ao.style.height=AN+AA;Av[AD]("class","gm-legend-colorbox");Aq.appendChild(At);Av.appendChild(Aq);Ao.appendChild(Av);A4.appendChild(Ao);if(A4.offsetHeight+AN>A3){break;}}A4.style.top="0px";A4.style.marginLeft="0px";Au.style.top=A+AA;Au.style.height=A4.offsetHeight+AA;}As.style.height=A3+AA;}function r(Ap,Ao,Ar,An){var Aq=document.createElementNS(O,"circle");Aq.setAttribute("cx",Ao);Aq.setAttribute("cy",Ar);Aq.setAttribute("r",An);Aq.setAttribute("class","gm-legend-sizeby-circle");Ap.appendChild(Aq);}function AH(Ap,Aq,At,Ao,As,Au,Ar){var An=document.createElementNS(O,"line");An.setAttribute("x1",Aq);An.setAttribute("y1",At);An.setAttribute("x2",Ao);An.setAttribute("y2",As);An.style.strokeWidth=Au;if(Ar){An.setAttribute("class",Ar);}Ap.appendChild(An);}function Ad(Ao,A2){var A1,Ap,Ar,As,Aq,An,A0,At,A3,Au,Ay=Math.PI,Av=A2.elements,Aw=Av.length,Ax=Aw*w,Az=Ao.getContext("2d"),A4={LINE_COLOR:"#b0b0b0",MIN_WIDTH:1,MAX_WIDTH:10},A5=AS.getPropertyByPath(this,"widget.model.data.visName")||AS.getPropertyByPath(this,"widget.model.data.vis.vn");switch(A5){case"GraphMatrixVisualizationStyle":if(this.shapeType===AI.SQUARE||this.shapeType===AI.TICK||this.shapeType===AI.LINE||this.shapeType===AI.BAR||this.shapeType===AI.AREA||this.shapeType===AI.RECTANGLE){Au="rectangle";}else{Au="circle";}break;case"VIHeatMapVisualizationStyle":Au="rectangle";break;default:Au="circle";break;}switch(A2.caseFlag){case 0:Az.save();if(mstrApp.getThemeClassName().indexOf("dark")>=0){Az.strokeStyle="rgba(116, 116, 117, 0.7)";Az.fillStyle="rgba(116, 116, 117, 0.7)";}else{Az.strokeStyle="rgba(188, 188, 189, 0.7)";Az.fillStyle="rgba(188, 188, 189, 0.7)";}Ax=w*n;A3=Math.floor(w*0.75+0.5);Ap=Math.floor(A3/3.5+0.5);if(Au==="circle"){As=A3+1;Aq=w;Az.beginPath();Az.arc(As,Aq,A3,0,2*Ay,false);Az.fill();Az.stroke();As=2*As+2*Ap;Aq=Math.floor(0.53*w+0.5);Az.beginPath();Az.arc(As,Aq,Ap,0,2*Ay,false);Az.fill();Az.stroke();}else{As=1;Aq=w-A3;Az.beginPath();Az.fillRect(As,Aq,2*A3,2*A3);As=2*A3+2+Ap;Aq=Math.floor(0.53*w-Ap+0.5);Az.beginPath();Az.fillRect(As,Aq,2*Ap,2*Ap);}Az.translate(0.5,0.5);Az.lineWidth=1;Az.strokeStyle="#9C9C9C";As=2*A3+3*Ap+3;Aq=Math.floor(0.53*w+0.5);Az.beginPath();Az.moveTo(As,Aq);Az.lineTo(Ax,Aq);Az.stroke();As=2*A3+2;Aq=Math.floor(1.53*w-Ap+0.5);Az.beginPath();Az.moveTo(As,Aq);Az.lineTo(As+Ap,Aq+Ap);Az.lineTo(Ax,Aq+Ap);Az.stroke();Az.restore();break;case 1:break;case 2:Ar=parseInt(Av[0].diameter,10);Ar=Math.min(Ar,Ax);Az.fillStyle="#ADADAC";Az.strokeStyle="#ADADAC";if(Au==="circle"){As=Ax>>1;Aq=As;Az.arc(As,Aq,Ar>>1,0,2*Ay,false);Az.fill();Az.stroke();}else{As=(Ax-Ar)>>1;Aq=As;Az.rect(As,Aq,Ar,Ar);Az.fill();Az.stroke();}break;case 3:An=A4.MIN_WIDTH;A0=(Aw===1?0:(A4.MAX_WIDTH-A4.MIN_WIDTH)/(Aw-1));Ax=Ao.width;At=w;As=0;Aq=w/2;Az.strokeStyle=A4.LINE_COLOR;for(A1=0;A1<Aw;A1++){Az.lineWidth=An;Az.beginPath();Az.moveTo(As,Aq);Az.lineTo(Ax-As,Aq);Az.stroke();Aq+=At;An+=A0;}break;default:break;}}function Aa(Ao,Aw){var Au=1,An,As=1.5*H,Av=Ao.innerHTML,At=b.restoreSpecialChars(Av),Ap=At.split(N),Ax,Aq;var Ar=function(Ay){Aq=At[Ay];return Aq!==undefined?Aq:"";};if(Ao.scrollHeight>As){if(!Ap[0]){return 0;}An=Ap[0]+Ar(Ap[0].length);while(Ap[Au]!==undefined){Ax=An+Ap[Au];Ax+=Ar(Ax.length);Ao.innerHTML=b.replaceSpecialChars(Ax);if(Ao.scrollHeight>As){break;}An=Ax;Au++;}Ao.innerHTML=Av;}else{An=At;}return Y(An,Aw,L);}function d(A3,A1,A2,Ax){var A0,Ap,As,Ar,Aw,Az,Av=A1.elements,Ay=Av.length,Au=[],A4=document,An=A4.createDocumentFragment(),Aq=false,At=this.styles,Ao=A2;switch(Ax){case 0:if(Ay>0){Au.push({v:"Min: "+Av[Ay-1].v});Au.push({v:"Max: "+Av[0].v});Ay=2;}break;case 1:Av=A1.items;P.forEach(Av,function(A5){Au.push({v:A5});});break;case 3:Au=Av;break;default:Au=Av;Aq=true;break;}Ay=Au.length;for(A0=0;A0<Ay;A0++){Ap=A4.createElement("tr");Ap[AD]("class","gm-legend-tr2");Ap.style.height=w+AA;if(Aq){As=A4.createElement("td");AC.call(this,As,Au[A0].sign,A0,R|Am|Ak);As[AD]("class","gm-legend-sign");Ap.appendChild(As);Ao-=u;}Ar=A4.createElement("td");Ar[AD]("class","gm-legend-desc");if(A1.custMetrics&&A1.custMetrics.indexOf(Au[A0].v)!==-1){AC.call(this,Ar,Au[A0].v,A0,R|h,Ao-Q,At);Az=parseInt(Ar.lastChild.style.width,10);Aw=A4.createElement("div");Aw.setAttribute("class",AV);Aw.setAttribute("title",AR);Ar.appendChild(Aw);Aw.style.top=(w-8)/2+A0*w+AA;Ar.lastChild.style.marginLeft=Az+AA;}else{if(Aq){AC.call(this,Ar,Au[A0].v,A0,R|Am,Ao,At);}else{AC.call(this,Ar,Au[A0].v,A0,R,Ao,At);}}Ap.appendChild(Ar);An.appendChild(Ap);}A3.appendChild(An);}function V(){var Ap="."+AV,An=this.domLegend.querySelectorAll(Ap),Ao;P.forEach(An,function(Aq){Ao=Aq.parentNode;if(Ao){Ao.removeChild(Aq);}});}function U(){var BG,A8,BL=0,BM,A3,BA,A4,Aq,BE,BH,Au,BK,BF,An=this.width-2*Aj,Ay=An-2*A,As=document,Ap=this.triBtn,A9=this.closeBtn,A7=this.cbContainer,Az=this.cbTableContainer,BN=this.sb1Container,At=this.sb2Container,Ax,Av,Ar,Aw,BC,A1,BB=this.cutBy,A6=o,BI=0,A5=this.styles,BD,BJ,A2=(H+AX)/2,Ao,A0;Ap[AD]("class","gm-legend-tri-button");Ap[AD]("title",mstrmojo.desc(13684,"Minimize Legend"));A9.style.display="block";A9[AD]("title",mstrmojo.desc(12002,"Hide Legend"));this.updateSplitter();V.call(this);this.domNode.style.overflow="visible";A7.style.display="none";BN.style.display="none";At.style.display="none";for(A8=0;this.dataArray&&A8<this.dataArray.length;A8++){Av=this.dataArray[A8];BC=null;A1=null;if(Av.dataType===Ac.COLOR_BY){BC=Av.dataObj;if(BC){A7.style.display="block";A4=b.removeExtraSpace(BC.item);Aq=BC.elements;BG=Aq.length;A7.style.top=A6+AA;A7.style.width=Ay+AA;BK=0;if(BI===0){Ag.addClass(this.sepLine1,"toggleHide");BI++;}BM=this.cbTitle;BM.style.display="block";AM(BM,A4,A5,Ay);BM.innerHTML=Z.encodeHtmlString(A4,true);BK+=Ai(BM,Ay)+2*AJ;Ao=Aa(BM,A5);p(BM,A5,Ao,A2,Ay);AL(BM,0,A2,(Ao<Ay)?Ao:Ay);A3=this.cbTable;A3.style.display="block";A3.style.width=(Ay-AZ)+AA;A3.style.marginLeft=AZ+AA;A3.innerHTML="";A3.appendChild(this.fillColorByTable(BC,0));BE=AN*BG+1;Az.style.top=BK+AA;A3.style.display="table";BK+=BE+A;if(BB){BK-=BB;BE-=BB;}A7.style.height=BK+AA;Az.style.height=BE+AA;A6+=BK+j;}}else{if(Av.dataType===Ac.SIZE_BY){A1=Av.dataObj;if(A1){BL++;if(BL===1){Ar=BN;Aw=this.sb1Title;BA=this.sb1MetricNamesTable;A3=this.sb1DataTable;Ax=this.sb1Canvas;}else{Ar=At;Aw=this.sb2Title;BA=this.sb2MetricNamesTable;A3=this.sb2DataTable;Ax=this.sb2Canvas;}Ar.style.display="block";A4=b.removeExtraSpace(A1.item);Aq=A1.elements;BG=Aq.length;Ar.style.top=A6+AA;Ar.style.width=Ay+AA;BK=0;if(BI===0){Ag.addClass(this.sepLine2,"toggleHide");BI++;}if(A1.caseFlag===0){BH=n*w;Au=2*w;}else{if(A1.caseFlag===3){BH=x*w;Au=BG*w;}else{BH=BG*w;Au=BH;}}BM=Aw;BM.innerHTML=Z.encodeHtmlString(A4,true);BJ=A1.custMetrics&&A1.custMetrics.indexOf(A4)!==-1;if(BJ){A0=Ay-Q;}else{A0=Ay;}AM(BM,A4,A5,A0);if(BJ){BD=As.createElement("div");BD.setAttribute("class",AV);BD.setAttribute("title",AR);Ar.appendChild(BD);BD.style.top=(BM.offsetHeight-8)/2+AJ+j+AA;BD.style.left=BM.offsetWidth+"px";}Ao=Aa(BM,A5);p(BM,A5,Ao,A2,A0);AL(BM,0,A2,(Ao<A0)?Ao:A0);BK+=Ai(BM,A0)+2*AJ;BF=Ay;BA.innerHTML="";if(A1.items&&A1.items.length>0){BA.style.display="block";d.call(this,BA,A1,BF,1);}else{BA.style.display="none";}BA.style.top=BK+AA;BA.style.left="0"+AA;BA.style.width=BF+AA;BK+=BA.offsetHeight;if(BH>0){BF-=BH+A;}A3.innerHTML="";if(A1.elements&&A1.elements.length>0){A3.style.display="block";d.call(this,A3,A1,BF,A1.caseFlag);}else{A3.style.display="none";}Ax.style.position="absolute";Ax.style.top=BK+AA;Ax.style.marginLeft=A+AA;A3.style.top=BK+AA;A3.style.left=(BH+A)+AA;A3.style.width=BF+AA;BK+=Au+A;Ar.style.height=BK+AA;A3.style.display="table";Ax.width=BH;Ax.height=Au;Ad.call(this,Ax,A1);A6+=BK+j;}}}}}function s(){var An,Ao=this.textDivs,Ap=Ao.length;for(An=0;An<Ap;An++){c(Ao[An]);}}mstrmojo.gm.GMLegend=mstrmojo.declare(mstrmojo.VisLegend,[mstrmojo._FormateVisLegend,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.gm.GMLegend",cssClass:"gm-legend",dropZoneHighlightCss:"gm-legend-slot",dockedPositions:null,dockPos:AQ.LEFT,GMW:0,GMH:0,isMinimal:false,shapeType:undefined,legendMarkup:'<div class="gm-legend-button"><div class="gm-legend-tri-button"></div><div class="gm-legend-name"></div><div class="gm-legend-close-button"></div></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><div class="gm-legend-table-container"><table class="gm-legend-table"></table></div></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-container"><div class="gm-legend-separator-line" style="width:{@coreWidth}px"></div><div class="gm-legend-title" type="lgd-title" style="line-height:{@lineHeight}px; max-height:{@maxHeight}px"></div><table class="gm-legend-table"></table><table class="gm-legend-table"></table><canvas type="lgd-canvas"></canvas></div><div class="gm-legend-resizer-v" draggable="false"></div><div class="gm-legend-resizeRect"></div>',init:function AG(Ao){this.styles={};this.cutBy=null;this.dataArray=null;this.textDivs=[];this.dockedPositions=[{pos:q.LEFT_TOP},{pos:q.LEFT_MIDDLE},{pos:q.LEFT_BOTTOM},{pos:q.RIGHT_TOP},{pos:q.RIGHT_MIDDLE},{pos:q.RIGHT_BOTTOM}];var Ap=Ao.placeholder,An=Ap.style;if(Ap){this.cssClass=Ap.getAttribute("class");if(!this.cssClass){this.cssClass="";}if(Ao.hasOwnProperty("width")===false){Ao.width=(An&&An.width)||Ap.clientWidth;}if(Ao.hasOwnProperty("height")===false){Ao.height=(An&&An.height)||Ap.clientHeight;}if(Ao.hasOwnProperty("left")===false){Ao.left=Ap.offsetLeft;}if(Ao.hasOwnProperty("top")===false){Ao.top=Ap.offsetTop;}}this._super(Ao);},setupScrollNodes:function M(){this.scrollNode=this.cbTableContainer;},getSplitterDockPos:function(){return(this.currDockedPositionIdx<3)?AQ.RIGHT:AQ.LEFT;},updateAlignClass:function(){var Ar=this.getDockedPosition(),As=Ar&&Ar.pos,Ap=(As===q.RIGHT_MIDDLE||As===q.RIGHT_TOP||As===q.RIGHT_BOTTOM||As===q.RIGHT),An=this.domLegend,Ao=this.domNode,Aq=this.resizeRect;if(Ap){Ag.removeClass(An,"gm-align-left");Ag.addClass(An,"gm-align-right");Ag.toggleClass(An,"gm-legend-alignRight",true);Ag.toggleClass(An,"gm-legend-alignLeft",false);Ag.toggleClass(Ao,"gm-legend-alignRight",true);Ag.toggleClass(Ao,"gm-legend-alignLeft",false);Ag.toggleClass(Aq,"gm-legend-alignRight",true);Ag.toggleClass(Aq,"gm-legend-alignLeft",false);}else{Ag.removeClass(An,"gm-align-right");Ag.addClass(An,"gm-align-left");Ag.toggleClass(An,"gm-legend-alignRight",false);Ag.toggleClass(An,"gm-legend-alignLeft",true);Ag.toggleClass(Ao,"gm-legend-alignRight",false);Ag.toggleClass(Ao,"gm-legend-alignLeft",true);Ag.toggleClass(Aq,"gm-legend-alignRight",false);Ag.toggleClass(Aq,"gm-legend-alignLeft",true);}},postBuildRendering:function(){this._super();var Az=this.styles,A1=this.domNode,Aq=this.domLegend.childNodes,Au=Aq[1],As=Aq[2],A0=Aq[3],A4={objType:AK.LEGEND};this.addSlots({lgdBtn:Aq[0],triBtn:Aq[0].firstChild,lgdName:Aq[0].childNodes[1],closeBtn:Aq[0].lastChild,cbContainer:Aq[1],sepLine1:Au.firstChild,cbTitle:Au.childNodes[1],cbTableContainer:Au.childNodes[2],cbTable:Au.childNodes[2].firstChild,sb1Container:As,sepLine2:As.firstChild,sb1Title:As.childNodes[1],sb1MetricNamesTable:As.childNodes[2],sb1DataTable:As.childNodes[3],sb1Canvas:As.childNodes[4],sb2Container:A0,sepLine3:A0.firstChild,sb2Title:A0.childNodes[1],sb2MetricNamesTable:As.childNodes[2],sb2DataTable:A0.childNodes[3],sb2Canvas:A0.childNodes[4],splitter:Aq[4],resizeRect:Aq[5]});Ah.GMLegend.applyHTML5Props(Az);this.bgColor=Az.background||Az.backgroundColor||"transparent";AS.applyStyle2Legend(Az,A1,this.domLegend);if(mstrApp.isInVFInteractMode){this.closeBtn.style.visibility="hidden";}var At=this.getSplitterDockPos(),A3=this.width-2*A-2*Aj,Av=this.cbTitle,Ao=Av.style,Ap=this.sb1Title,Ar=this.sb2Title,A2=Ap.style,An=Ar.style,Ay=this.sepLine1,Ax=this.sepLine2,Aw=this.sepLine3;Ay.style.width=A3+AA;Ax.style.width=A3+AA;Aw.style.width=A3+AA;Ao.lineHeight=H+AA;A2.lineHeight=H+AA;An.lineHeight=H+AA;Ao.maxHeight=2*H+AA;A2.maxHeight=2*H+AA;An.maxHeight=2*H+AA;Av.identity={objType:AK.LEGEND_TEXT,parentIdentity:A4};Ap.identity={objType:AK.LEGEND_TEXT,parentIdentity:A4};Ar.identity={objType:AK.LEGEND_TEXT,parentIdentity:A4};this.dockPos=At;this.identity=A1.identity=A4;this.updateAlignClass();},feedData:function(An,Ao){this.dataArray=An;this.isMinimal=Ao;this.textDivs=[];Ah.GMLegend.applyHTML5Props(this.styles);this.autoCollapseLegend();if(Ao||this.autoCollapse){AY.call(this);this.draggable=false;}else{U.call(this);this.draggable=true;}s.call(this);this.updateScrollbars();},autoCollapseLegend:function(){this.autoCollapse=false;},updateColorBySquare:function(Ap){var Aq,Ar,Ao,An;if(Ap){An=this.domNode.querySelectorAll(".gm-legend-colorbox-div");Aq=Ap.elements;Ar=Math.min(Aq.length,An.length);for(Ao=0;Ao<Ar;Ao++){E.call(this,Aq[Ao],An[Ao]);}}},updateContainerSize:function(An,Ao){this.GMW=An;this.GMH=Ao;this.calculateDockedPositions(An,Ao);},updateAfterResize:function(){Ah.GMLegend.applyHTML5Props(this.styles);var As=0,Ar=this.width,At=this.cbContainer,Av=this.sb1Container,Ap=this.sb2Container,Aq=this.sepLine1,Ao=this.sepLine2,An=this.sepLine3,Au=Ar-2*A-2*Aj;P.forEach(this.dataArray||[],function(Aw){if(Aw.dataType===Ac.COLOR_BY){if(Aw.dataObj){if(At){At.style.width=Au+AA;}}}else{if(Aw.dataType===Ac.SIZE_BY){if(Aw.dataObj){As++;if(As===1&&Av){Av.style.width=Au+AA;}if(As===2&&Ap){Ap.style.width=Au+AA;}}}}});if(Aq){Aq.style.width=Au+AA;}if(Ao){Ao.style.width=Au+AA;}if(An){An.style.width=Au+AA;}this.domLegend.style.width=this.width+AA;this.domLegend.style.height=this.height+AA;},updateStyle:function(An){this.styles=An;this.bgColor=An.background||An.backgroundColor||"transparent";AS.applyStyle2Legend(An,this.domNode,this.domLegend);},updateTitleLineHeight:function(){var Ao=this.cbTitle,Ar=Ao.style,Ap=this.sb1Title,An=this.sb2Title,As=Ap.style,Aq=An.style;Ah.GMLegend.applyHTML5Props(this.styles);Ar.lineHeight=H+AA;As.lineHeight=H+AA;Aq.lineHeight=H+AA;Ar.maxHeight=2*H+AA;As.maxHeight=2*H+AA;Aq.maxHeight=2*H+AA;},getSplitterPosition:function(Ap){var Ao=Ap.src.startPos+Ap.tgt.pos.x-Ap.src.pos.x,Ar=Ap.src.posInfo,Aq=Ar&&Ar.min,An=Ar&&Ar.max;if(Aq!==undefined){Ao=Math.max(Ao,Aq);}if(An!==undefined){Ao=Math.min(Ao,An);}return Ao;},positionResizeRect:function(An,Ao){var Aq=An.src.posInfo.dockPosition===AQ.LEFT,Ar=Ao-AU,As=Aq?Ar:0,Ap=Aq?this.width-Ar:Ar;this.resizeRect.style.left=(As-1)+AA;this.resizeRect.style.width=(Ap-2)+AA;},updateLegendSlot:function(Aq,An){var Ap=this.getDockedPosition(),Ao=Ap&&Ap.pos;if(Ao!==Aq){this.currDockedPositionIdx=An;this.dockPos=this.getSplitterDockPos();this.updateDropZonePosition();this.updateAlignClass();this.updateSplitter();this.widget.onLegendDropZoneChange(this.getDockedPosition());}},isDragValid:function t(An){return !mstrApp.isInVFInteractMode&&this._super(An);},ondragstart:function(An){var Ap=An.src.e.target,Ao=An.src.data;if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(false);}if(Ap===this.splitter){An.src.startPos=Ap.offsetLeft;An.src.posInfo=this.getSplitterInfo(Ap);this.positionResizeRect(An,An.src.startPos);Ag.addClass(this.resizeRect,"resizing");}else{this.cbTableScrollTop=this.cbTableContainer.scrollTop;this._super(An);if(!Ao||!Ao.isScrollBar){this.clearSelectedTargets();Ag.toggleClass(this.domNode,"gm-legend-hover",false);Ag.toggleClass(this.domLegend,"active",false);this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background=this.bgColor;this.isDragging=true;}}},ondragmove:function D(An){var Ap=An.src.e.target,Ao;if(Ap===this.splitter){Ao=this.getSplitterPosition(An);Ap.style.left=Ao+AA;this.positionResizeRect(An,Ao);}else{this._super(An);}},ondragend:function(An){var Ap=An.src.e.target;if(Ap===this.splitter){Ag.removeClass(this.resizeRect,"resizing");this.splitterMoved(this.getSplitterPosition(An)-An.src.startPos,An.src.posInfo);}else{this._super(An);var Ao=An.src.data;if(!Ao||!Ao.isScrollBar){this.cbTableContainer.scrollTop=this.cbTableScrollTop;this.domLegend.style.background="transparent";this.isDragging=false;}delete this.cbTableScrollTop;}if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},onscroll:function(){var Ao,As,Ar=this.scrollNode.scrollTop,Aq,Ap,An;if(this.prevScrpllTop===Ar){return ;}As=(this.dataArray&&this.dataArray.length)||0;for(Ao=0;Ao<As;Ao++){Ap=this.dataArray[Ao];if(Ap.dataType===Ac.COLOR_BY){An=Ap.dataObj;break;}}if(An){Aq=this.cbTable;Aq.innerHTML="";Aq.appendChild(this.fillColorByTable(An,Math.floor(Ar/AN)));this.prevScrpllTop=Ar;this.scrollNode.scrollTop=Ar;this._super();}},fillColorByTable:function(A3,At){var A4,A1,Ap,As,Ar,Au,Av,Aw=this.styles,An,Az=this.cutBy,Ax=this.width-2*Aj-2*A,Ay,Aq,Ao,A5,A0,A6;Ay=A3.elements;A1=Ay.length;An=document.createDocumentFragment();Aq=Ax-AB-AZ;Ao=0;A5=AN*A1;A0=At*AN;function A2(A7){Ap=document.createElement("tr");As=document.createElement("td");Ap.style.height=A7+AA;As[AD]("class","gm-legend-colorbox");Ap.appendChild(As);An.appendChild(Ap);}if(At>0){A2(A0);}for(A4=At;A4<A1;A4++){Ap=document.createElement("tr");As=document.createElement("td");Ar=document.createElement("td");Au=document.createElement("div");Av=document.createElement("div");Au[AD]("class","gm-legend-colorbox-ctn-div");Au[AD]("type",C.LGD_COLORBOX_CTN);Av[AD]("class","gm-legend-colorbox-div");Av[AD]("type",C.LGD_COLORBOX);E.call(this,Ay[A4],Av);Ap[AD]("class","gm-legend-tr");Ap.style.height=AN+AA;As[AD]("class","gm-legend-colorbox");Ar[AD]("class","gm-legend-desc");A6=Ay[A4];if(A6.bftp){b.fillImageInDiv(Ar,A6.bftp,A6.label,"gm-img-legend");}else{AC.call(this,Ar,A6.label,A4,y,Aq,Aw);}Au.appendChild(Av);As.appendChild(Au);Ap.appendChild(As);Ap.appendChild(Ar);An.appendChild(Ap);Ao+=AN;if(Az&&(Az+Ao-AN)>A5){A2(A5-Ao-A0);break;}}return An;},calculateDockedPositions:function(Ao,Ar){var Aq,At=this.getWidth(),An=this.getHeight(),Ap=this.dockedPositions,As=function(Au){switch(Au.pos){case l.LEFT_TOP:Au.x=0;Au.y=X;break;case l.LEFT_MIDDLE:Au.x=0;Au.y=Math.max(X,(Ar-An)>>1);break;case l.LEFT_BOTTOM:Au.x=0;Au.y=Math.max(0,Ar-An-X);break;case l.RIGHT_TOP:Au.x=Ao-At;Au.y=X;break;case l.RIGHT_MIDDLE:Au.x=Ao-At;Au.y=Math.max(X,(Ar-An)>>1);break;case l.RIGHT_BOTTOM:Au.x=Ao-At;Au.y=Math.max(0,Ar-An-X);break;}};for(Aq=0;Aq<Ap.length;Aq++){As(Ap[Aq]);}this.updateDropZonePosition();},updateDropZonePosition:function(){var An=this.getDockedPosition(),Ao=this.dropZoneNode.style;Ao.left=An.x+AA;Ao.top=An.y+AA;},updateDropZoneNode:function(An){this._super(An);this.dockPos=this.getSplitterDockPos();this.updateSplitter();},onmouseover:function(An){var Ap=this.domLegend,At=An.getTarget(),Aq=At.getAttribute("type"),As=this.widget,Ao;if(this.isDragging){return ;}var Ar=S.copy(this.styles);Ar.opacity+=0.4;AS.applyStyles2DomNode(this.domNode,Ar);if(AE.contains(Ap,At,true)){Ag.addClass(Ap,"active");}if(Aq===C.LGD_COLORBOX){At=At.parentNode;Aq=At.getAttribute("type");}if(Aq===C.LGD_COLORBOX_CTN){Ao=At.firstChild.identity;if(!Ao||!Ao.comb){return ;}Ag.toggleClass(At,"hover-colorsquare",true);return ;}if(As.formattingMode){switch(Aq){case C.LGD_TITLE:case C.LGD_TEXT:Ag.toggleClass(Ap,"hover-txt",true);break;default:Ag.toggleClass(this.domNode,"gm-legend-hover",true);break;}}},onmouseout:function(Ao){var Aq=this.domLegend,An=Ao.e.toElement||Ao.e.relatedTarget,At=Ao.getTarget(),Ar=At.getAttribute("type"),As=this.widget,Ap;AS.applyStyles2DomNode(this.domNode,this.styles);if(!AE.contains(Aq,An,true)){Ag.removeClass(Aq,"active");}if(Ar===C.LGD_COLORBOX){At=At.parentNode;Ar=At.getAttribute("type");}if(Ar===C.LGD_COLORBOX_CTN){Ap=At.firstChild.identity;if(!Ap||!Ap.comb){return ;}Ag.toggleClass(At,"hover-colorsquare",false);return ;}if(As.formattingMode||As.isOnFormattingMode){switch(Ar){case C.LGD_COLORBOX_CTN:case C.LGD_COLORBOX:break;case C.LGD_TITLE:case C.LGD_TEXT:Ag.toggleClass(Aq,"hover-txt",false);break;default:Ag.toggleClass(this.domNode,"gm-legend-hover",false);break;}}},onclick:function(An){var Aq=An.getTarget(),Ao=Aq.getAttribute("type"),Ap=this.widget;if(Aq===this.triBtn){if(!this.autoCollapse){this.raiseEvent({name:"gm-legend-clicked",action:(this.isMinimal?"restore":"minimize")});}}else{if(Aq===this.closeBtn){this.raiseEvent({name:"gm-legend-clicked",action:"close",mousePos:An.e});}else{if(Ao===C.LGD_COLORBOX){Aq=Aq.parentNode;Ao=Aq.getAttribute("type");}if(Ap.formattingMode||Ap.isOnFormattingMode){if(Ao===C.LGD_COLORBOX_CTN){this.selectColorBox(Aq,true);}else{if(Ao===C.LGD_TEXT||Ao===C.LGD_TITLE){this.selectText();}else{this.selectLegendBody();}}}else{this.clearSelectedColorBox();}}}AE.stopPropogation(null,An.e);},attachClearEvent:function(){if(this.clearSelectTargetfn){return ;}var Ao=this,An=this.domLegend;this.clearSelectTargetfn=function(As){var Ar=As.target,Ap=Ao.widget.toolEditor,Aq;if(!AE.contains(An,Ar,true,An)){if(Ap){Aq=Ap.domNode;if(!AE.contains(Aq,Ar,true,Aq)){Ao.clearSelectedTargets();}}else{Ao.clearSelectedTargets();}}};AE.attachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);},clearSelectedColorBox:function(){var An=this.selectedColorBox;if(An){Ag.toggleClass(An,"select",false);Ag.toggleClass(An,"selectfmt",false);this.selectedColorBox=undefined;}},clearSelectedText:function(){Ag.removeClass(this.domNode,"select-txt");},clearSelectedLegendBody:function(){Ag.removeClass(this.domNode,"gm-legend-select");},clearSelectedTargets:function(){this.clearSelectedColorBox();this.clearSelectedText();this.clearSelectedLegendBody();if(this.clearSelectTargetfn){AE.detachEvent(document.body,"mousedown",this.clearSelectTargetfn,true);delete this.clearSelectTargetfn;}},selectColorBox:function(Ap,Ao){var An=Ap.firstChild.identity;if(!An||!An.comb){return ;}this.clearSelectedText();this.clearSelectedLegendBody();if(this.selectedColorBox!==Ap){this.clearSelectedColorBox();this.selectedColorBox=Ap;if(Ao){Ag.toggleClass(Ap,"selectfmt",true);}else{Ag.toggleClass(Ap,"select",true);}this.attachClearEvent();}},selectText:function(){this.clearSelectedColorBox();this.clearSelectedLegendBody();Ag.addClass(this.domNode,"select-txt");this.attachClearEvent();},selectLegendBody:function(){this.clearSelectedColorBox();this.clearSelectedText();Ag.addClass(this.domNode,"gm-legend-select");this.attachClearEvent();},adjustColorPickerPos:function(An){var Aq=AE.position(An),Ao=0,Ap={};if(this.currDockedPositionIdx<3){Ap.x=Aq.x+Aq.w+Ao;Ap.alignLeft=true;}else{Ap.x=Aq.x-Ao;Ap.alignLeft=false;}Ap.y=Aq.y+Aq.h+Ao;return Ap;},getSplitterInfo:function(As){if(!As){return{};}var Ao=this.dockPos,Ar={},Aq=this.width,An=AO,Ap=Math.floor(this.GMW/3);Ar.dockPosition=Ao;if(Ao===AQ.LEFT){Ar.min=Math.min(Aq-Ap,0);Ar.max=Math.max(Aq-An,0);}else{if(Ao===AQ.RIGHT){Ar.min=An;Ar.max=Ap;}}Ar.min+=AU;Ar.max+=AU;return Ar;},splitterMoved:function(An,Ao){if(An===0){return ;}if(Ao.dockPosition===AQ.LEFT){An=-An;}this.raiseEvent({name:"gm-legend-resized",position:An});this.updateSplitter();if(this.widget&&this.widget.setInteractive){this.widget.setInteractive(true);}},updateSplitter:function(){AW(this.splitter,this.dockPos,this.width,this.height);this.resizeRect.style.height=this.height-2+AA;}});Ah.GMLegend.IMAGE_SIZE_FIXED=0;Ah.GMLegend.applyHTML5Props=function(Ap){var Aq=parseInt(Ap.fontSize,10)||8,Ao;if(Ap.fontSize.indexOf("px")>=0){Aq=Math.floor(Aq*a+0.5);}Ao=Math.floor(Aq/a*F+0.5);H=Math.max(Aq,8)+9;AX=Math.floor(Aq/a+0.5);f=Math.max(Ao,15);AN=Ah.GMLegend.IMAGE_SIZE_FIXED||(Math.max(Ao,20)+2);w=Math.max(Ao,14)+2;Aj=parseInt(Ap.borderWidth,10)||1;var An=parseInt(Ap.tbHeight,10);o=isNaN(An)?K:An;};Ah.GMLegend.getLegendSize4MinMode=function(Ao,Ap){var Ar,Aq,An=o+2*Aj;if(Ao){Aq=Ao.elements;Ar=Aq.length;An+=AN*Ar;An+=2*A;}An=Math.min(An,Ap-X*2);return{width:AB+5+7+2*Aj,height:An};};Ah.GMLegend.getLegendSize=function(A1,Aq,An,At,A3,Au){var Av,Ao,A2,As,Ar=At-X*2,Az=0,Ap=0,Ay={},Ax,Aw,A0;if(!A1||!A1.length||A1.length<1){return{};}if(Aq!==undefined){if(!Au){Au=Math.floor(Af(A1,A3)*Aq);}As=Math.min(Au,Math.floor(An/3));As=Math.max(As,50);return k(A1,As,At,A3);}As=Math.min(Math.floor(0.2*An),300);for(Av=0;Av<A1.length;Av++){Aw=A1[Av];if(Aw.dataType===Ac.COLOR_BY){Ax=Ae(Aw.dataObj,A3);if(Ax>Az){Az=Ax;}}else{if(Aw.dataType===Ac.SIZE_BY){Ax=AT(Aw.dataObj,A3);if(Ax>Ap){Ap=Ax;}}}}Ao=Math.max(Az,Ap)+2*Aj;Ay.width=Math.min(Ao,As);Ay.scale=Ay.width/Ao;A0=e(A1,Ay.width,A3);A2=A0.height;Ay.autoCollapse=A0.minHeight>Ar;Ay.minHeight=A0.minHeight;Ay.height=Math.min(A2,Ar);if(A2>Ar){Ay.cutBy=A2-Ar;}return Ay;};}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFontAlignment","EnumFontStyle","EnumFontRotation","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMAxisScale");var AQ=mstrmojo.chart,W=mstrmojo.hash,AZ=mstrmojo.gm,Ad=AZ.GMUtility,O=mstrmojo.VisUtility,P=AZ.EnumGraphType,D=AZ.EnumSubtype,M=AZ.EnumABLDirection,k=AZ.EnumColorByType,a=AZ.EnumShape,t=AZ.EnumGMZoneIds,U=mstrmojo.array,p=AZ.EnumIdentityType,K=AZ.FormatingPropertyTag,c=AZ.WidgetPropertyTag,AY=false,J=3,AW=4,E=mstrmojo.gm.ShapeFillType,AP=true;function AL(){var An=this.dp,Am=An.lds,Ag=this.groupData.length,Ak=[],Aj=Am.getOffsetX(),Ah=Am.getOffsetY(),Al,Ai;for(Al=0;Al<Ag;Al++){Ak.push(this.groupData[Al].C-Aj);}Ai=this.groupData[0].R-Ah;return{lr:Ai,lcs:Ak};}function AF(Ak){var Ag=parseInt(Ak,10),An=this.dp,Aj=An.lds,Ai=Aj.gmm,Ah=An.getMetricIds(),Am,Al=An.getMetricNames();if(Ag<0){return undefined;}Am=Ai.getFullNumberFormat();return{idx:Ag,metric:Al[Ag],id:Ah[Ag],fullNf:Am!==undefined?Am[Ag]:undefined};}function AR(Ap,Aj){var Ai=this.dataSbc,Ag,Ak,As,Ah=this.getChartInfo(),Al=this.lds,Am=Al.gmm,Ar=Am.onlyMetricNamesOnAxisForGridPie,Aq=Am.isMetricNamesOnXAxis,An=-1;if(Ai===true){Ak=parseInt(Ap,10);Ag=parseInt(Aj,10);}else{Ag=parseInt(Ap,10);Ak=parseInt(Aj,10);}if(this.cache[Ag]===undefined){this.cache[Ag]=[];}if(this.cache[Ag][Ak]!==undefined){return this.cache[Ag][Ak];}if(Ar){if(Aq){An=this.metricsOnAngleBy[Ag];}else{An=this.metricsOnAngleBy[Ak];}}As=this.data&&this.data[Ag]&&this.data[Ag][Ak];var Ao=null;if(As){Ao=new w({groupData:As,dp:this,chtInfo:Ah,metricsOnAngleBy:Ar?[An]:this.metricsOnAngleBy,splitPie:this.splitPie,sID:Ap,gID:Aj,metricIndexForLabelForGridPie:An});this.cache[Ag][Ak]=Ao;}return Ao;}function Y(Am){var At=this,Ak,Ao=this.dp.lds,Ar=Ao.gmm,Al=[t.XAXIS,t.YAXIS,t.COLORBY,t.SIZEBY,t.TOOLTIP],Ah=this.chtInfo,Ap,An=Am.length;function Au(Av){var Aw=[];U.forEach(Av,function(Ax){if(Ax.toDelete!==true){Aw.push(Ax);}});return Aw;}function Aq(Av){if(Ar.isMetricInZone(Am[Ak].midx,Av)){Ap.push(Av);}}if(Ah.isABL){var Ai=At.getMetricIndex(0);var Ag=Ah.dirc===M.VERTICAL?t.YAXIS:t.XAXIS;for(Ak=0;Ak<An;Ak++){Ap=[];U.forEach(Al,Aq);if(Ap.length===0){Am[Ak].toDelete=true;}if(Ap.length===1&&Ap[0]===Ag){if(Ai!==Am[Ak].midx){Am[Ak].toDelete=true;}}}}if(Ah.isBubbleOrScatter){var Aj=[];this.getMetricsIndexArray(Aj);for(Ak=0;Ak<An;Ak++){Ap=[];U.forEach(Al,Aq);if(Ap.length===0){Am[Ak].toDelete=true;}if(!!!Am[Ak].toDelete&&Aj.indexOf(Am[Ak].midx)<=-1){if(Ap.indexOf(t.TOOLTIP)===-1&&Ap.indexOf(t.COLORBY)===-1){Am[Ak].toDelete=true;}}}}if(Ah.isPie){var As=[t.XAXIS,t.YAXIS,t.SIZEBY];for(Ak=0;Ak<An;Ak++){if(Am[Ak].toDelete===true){continue;}Ap=[];U.forEach(As,Aq);if(Ap.length===0){Am[Ak].toDelete=true;}}}return Au(Am);}function AE(Ag){return(Ag.R!==undefined&&Ag.C!==undefined&&Ag.oy!==undefined&&Ag.ox!==undefined);}function AV(Ay,BC,A8){var A6=this.dp.lds,BK=this.chtInfo,Ai=A6.gmm,BD=Ai.gmCtr,Al=BD.rowHeaderCnt,Ah=BD.colHeaderCnt,A7,BA,Ar=Ai.getUnitAttributesCountOnRow(true),Ak=Ai.getUnitAttributesCountOnCol(true),Av=BD.getGMHeaderCount("SliceBy"),A2=Ar,Aq=Ak,At,Ag,BF=Ay.length===0,Am,BM,BI,Aj,BL=Ai.getMetricNames(),Az=BL.length,BE,A5,Au;var BG=this.groupData[0],A3=A6.getOffsetX(),A1=A6.getOffsetY(),A4=BG.R-A1,A9=BG.C-A3;At=Ar-Al;Ag=Ak-Ah;if(Av>0&&BK.isPie){if(BK.isABL&&BK.dirc===AZ.EnumABLDirection.HORIZONTAL){Ag-=Av;Aq-=Av;}else{At-=Av;A2-=Av;}}if(At>0){A7=A6.getRowHeaders(A4,"all",BC===true?"n&id&dei&o&at&idx":"n&idx");Am=Ai.getRowTitleInfo();if(Ay.length>0){if(!BC){Ay.push(null);}BF=true;}Ad.generateToolTipContent(Al,A2,true,Am,A7,Ay,!BC);}if(Ag>0){BA=A6.getColHeaders(A9,"all",BC===true?"n&id&dei&o&at&idx":"n&idx");BM=Ai.getColTitleInfo();if(!BF&&Ay.length>0){if(!BC){Ay.push(null);}BF=true;}Ad.generateToolTipContent(Ah,Aq,false,BM,BA,Ay,!BC);}if(!BC&&Az>0){if(!BF&&Ay.length>0){if(!BC){Ay.push(null);}BF=true;}A5=[];Aj=[];Aj.push(A9);for(BI=0;BI<Az;BI++){BE=A6.getAssoDataWithMetricIndex(A4,Aj,BI,false);A5.push({n:BL[BI],v:BE,midx:BI});}A5=Y.call(this,A5);Au=A5.length;for(BI=0;BI<Au;BI++){Ay.push(A5[BI]);}if(BK.isABL&&BK.sbtp===D.PERCENT){var An=BG.grp,Ap=this.dp.getTotalOfGroup(An),BB=this.getData(0),Ao=mstrmojo.desc(14141,"Percent Contribution"),A0=BB/Ap;A0=(A0*100).toFixed(2)+"%";Ay.push({n:Ao,v:A0,isPerCon:true});}}if(BC&&A8){var Ax=[],BH,As,Aw,BJ;this.getMetricsIndexArray(Ax);Ax=Ax.slice(0,this.groupData.length);As=Ax.length;Aw=Ai.getMetricIDsFromIndex(Ax);BJ=Ai.getMetricNamesFromIndex(Ax);for(BH=0;BH<As;BH++){Ay.push({eid:Aw[BH],n:"Metrics",tid:-1,v:BJ[BH]});}}return Ay;}function Ab(Aj,Al){var Ai=Aj.getOffsetX(),Ag=Aj.getOffsetY(),Ah=Al.R-Ag,Ak=Al.C-Ai;return Aj.getData(Ah,Ak);}function R(Aj,Am){var Al=this.isPie,Ak=this.gc,Ag=this.sPieDP,Ai=this.sliceIdx,Ah;if(!Al){Ah=Ak.getTooltipContent(Aj,Am);}else{Ah=Ag.getTooltipContent(Ai,Aj,Am);}return Ah;}function AN(Ai,Aj){var Ah,Ag;if(Ai){Ag=Ai.length;for(Ah=0;Ah<Ag;Ah++){if(Ai[Ah].id===Aj){return Ah;}}}return -1;}function AD(Ah,Ag){var Ak,Ai=[],Aj;Ak=this.getSelectedObjectInfo(Ag);Aj=Ad.reverseMapping(Ah);U.forEach(Ak,function(Al){if(Al.tid===-1){Ai.push(Al);}else{if(Aj[Al.tid]!==undefined){Ai.push(Al);}}});return Ai;}var g=mstrmojo.declare(mstrmojo.Base,null,{init:function AG(Al){this._super(Al);var Ap=this.gc,Ao,Aq,Aj,An,Ar,Ag,Ai,Ak=-1,Ah=-1;if(this.isFaked){return ;}Ao=Ap.dp.lds.gmm.gmCtr;Aq=Ao.dz;Aj=this.hInfo;if(Aj.isAtt===false){return ;}An=Aj.unit;Ar=["XAxis","YAxis"];if(An.otp!==4){for(Ai=0;Ai<Ar.length;Ai++){Ag=Aq[Ar[Ai]];var Am=AN(Ag.TemplateUnit,An.id);if(Am>=0){Ah=Am;if(Ai===0){Ak=J;}else{Ak=AW;}break;}}this.dzindex=Ah;this.dzid=Ak;}}});var AB=mstrmojo.declare(mstrmojo.Base,null,{getGraphCell:function(){var Ag;if(this.isPie){Ag=this.sPieDP.graphCell;}else{Ag=this.gc;}return Ag;},getShape:function(){var Ag=this.getChartInfo();if(Ag.isABL){return this.getGraphCell().getShape();}return Ag.shape;},getAssMetricDataLabelID:function(){var Ak,Ai=this.getGraphCell(),Aj=Ai.getGMCtr(),Al=Ai.chtInfo;if(this.isPie===false){if(Al.isABL){Ak=Ai.getMetric(0);}else{if(Al.tp===P.BUBBLE||Al.tp===P.SCATTER){Ak=Ai.getMetric(1);}else{if(!Aj.hasSizeBy()){Ak=undefined;}else{Ak=AF.call(Ai,Aj.getSizeByMetrics()[0]);}}}}else{var Ag=this.sPieDP,Ah=this.sliceIdx;Ak=Ag.getMetric(Ah);}if(Ak!==undefined){return Ak.id;}return undefined;},getTooltipContent:function(){return R.call(this,false);},getSelectedObjectInfo:function(Aj){var Ai=Aj?"objectInfoWithMetric":"objectInfo";if(this[Ai]){return this[Ai];}var Ag=R.call(this,true,Aj),Ah=[];U.forEach(Ag,function(Ak){if(Ak){Ah.push(Ak);}});if(Ah.length>1){Ah.sort(Ad.compareElementObj);}this[Ai]=Ah;return Ah;},getSelectedObjectMetricInfo:function(Ai){if(this.objectMetricInfo){return this.objectMetricInfo;}var Ah,Ag=[];if(Ai){Ah=Ai;}else{Ah=this.getSelectedObjectInfo(true);}U.forEach(Ah,function(Aj){if(Aj.tid===-1){Ag.push(Aj);}});this.objectMetricInfo=Ag;return Ag;},getSelectedObjectColorByInfo:function(){if(this.objectColorByInfo){return this.objectColorByInfo;}var Ak=[],Al,Ai,Am,An,Aj,Ah=false;if(this.isPie){Al=this.sPieDP.graphCell;}else{Al=this.gc;}Ai=Al.dp.lds.gmm;Am=Ai.gmCtr;if(Ai.colorType!==k.NULL){An=Am.getColorByAttrsID();if(Ai.colorType===k.ATT_METRICS||Ai.colorType===k.METRICS_ITEM){Ah=true;}Ak=AD.call(this,An,Ah);Aj=Am.colorByInfo.tp;if(Aj===k.METRICS_ITEM||Aj===k.ATT_METRICS){if(Al&&Al.chtInfo&&Al.chtInfo.isBubbleOrScatter){var Ag=Al.getSizeByMetricFormat();if(Ag){Ak.push({eid:Ag.id,n:"Metrics",tid:-1,v:Ag.metric});}}}}this.objectColorByInfo=Ak;return Ak;},getSelectedObjectBreakByInfo:function(Am){var Al=Am?"objectBreakByInfoWithMetric":"objectBreakByInfo";if(this[Al]){return this[Al];}var Ah,Ai,Ag,Aj,Ak,An;if(this.isPie){Ai=this.sPieDP.graphCell;}else{Ai=this.gc;}Ag=Ai.dp.lds.gmm;Aj=Ag.gmCtr;Ak=Aj.getColorByAttrsID();An=Aj.getBreakByAttrsID();Ah=AD.call(this,An.concat(Ak),Am);this[Al]=Ah;return Ah;},getSelectedObjectSliceByInfo:function(Ah){var Aj=Ah?"objectSliceByInfoWithMetric":"objectSliceByInfo";if(this[Aj]){return this[Aj];}var Ak,Ao,Ai,An,Ag,Al,Am;if(this.isPie){Ao=this.sPieDP.graphCell;}else{Ao=this.gc;}Ai=Ao.dp.lds.gmm;An=Ai.gmCtr;Ag=An.getColorByAttrsID();Al=An.getBreakByAttrsID();Am=An.getSliceByAttrsID();Ak=AD.call(this,Al.concat(Ag.concat(Am)),Ah);this[Aj]=Ak;return Ak;},getSelectedSliceAngleByMetric:function(){if(this.isPie){return this.sPieDP.getSelectedSliceAngleByMetric(this.sliceIdx);}return undefined;},getSelectedObjectLowestLevel:function(Ah){var Ag=this.getGraphCell(),Ai=Ag.chtInfo;if(Ai.isPie){return this.getSelectedObjectSliceByInfo(Ah);}return this.getSelectedObjectBreakByInfo(Ah);},isEqualToObjectInfo:function(Ag,Ai){var Ah=this.getSelectedObjectInfo(Ai);return Ad.isEqualComb(Ah,Ag);},isEqualToIdentity:function(Ag,Ah){if(!Ag){return false;}return this.isEqualToObjectInfo(Ag.getSelectedObjectInfo(Ah),Ah);},getChartInfo:function(){var Ag=this.gc||this.sPieDP.graphCell,Aj=Ag.dp,Ai=Aj.lds.gmm.gmCtr;var Ah=Ai.getChartInfo();if(Ah.isCombo){Ah.currentMarkerShape=Aj.getShapeBySeries(Ag.sID);if(Ah.currentMarkerShape===7){Ah.currentMarkerShape=200;}else{if(Ah.currentMarkerShape===2){Ah.currentMarkerShape=204;}else{if(Ah.currentMarkerShape===1){Ah.currentMarkerShape=205;}else{if(Ah.currentMarkerShape===0){Ah.currentMarkerShape=206;}else{if(Ah.currentMarkerShape===4){Ah.currentMarkerShape=4;}else{if(Ah.currentMarkerShape===5||Ah.currentMarkerShape===6){Ah.currentMarkerShape=24;}}}}}}}else{if(Ah.isABL&&Ah.ceMarkerShape===undefined){Ah.ceMarkerShape=Aj.getShapeBySeries(Ag.sID);if(Ah.ceMarkerShape===7){Ah.ceMarkerShape=200;}else{if(Ah.ceMarkerShape===2){Ah.ceMarkerShape=204;}else{if(Ah.ceMarkerShape===1){Ah.ceMarkerShape=205;}else{if(Ah.ceMarkerShape===0){Ah.ceMarkerShape=206;}else{if(Ah.ceMarkerShape===4){Ah.ceMarkerShape=4;}else{if(Ah.ceMarkerShape===5||Ah.ceMarkerShape===6){Ah.ceMarkerShape=24;}}}}}}}Ah.currentMarkerShape=Ah.ceMarkerShape;}return Ah;}});var s=mstrmojo.declare(mstrmojo.Base,null,{graphCell:undefined,tot:undefined,sliceByMetrics:undefined,sliceIdentities:undefined,init:function AG(Ai){this._super(Ai);this.dataCache={};this.sliceIdentities=[];this.sliceDataLabelIdentities=[];var Ak=this.innerGetSliceCount(),Ah,Aj=true,Ag=[];for(Ah=0;Ah<Ak;Ah++){if(this.innerGetData(Ah)!==0){Ag.push(Ah);}else{Aj=false;}}this.allValid=Aj;this.validSlices=Ag;},innerGetSliceCount:function(){var Ak=this.graphCell,Aj=Ak.groupData,Ai=Aj.slicesOfPie,Al=this.angleBy.length,Ah=Ak.dp.lds.gmm,Ag=Ah.onlyMetricNamesOnAxisForGridPie;if(Al===0){return Ai.length;}if(Ag){Al=1;}return Ai.length*Al;},getInnerSliceIndex:function(Ah,Ag){if(Ag){return Ah;}return this.validSlices[Ah];},getOutSliceIndex:function(Ai,Ah){if(Ah){var Ag;if(this.allValid){return Ai;}for(Ag=0;Ag<this.validSlices.length;Ag++){if(this.validSlices[Ag]===Ai){return Ag;}}}return Ai;},getSelectedSliceAngleByMetric:function(Ai){var Ak=this.getInnerSliceIndex(Ai),Ag=this.graphCell.dp.lds.gmm,Al=this.angleBy.length;if(Al>0){var Aj=this.getMetricNameOfSlice(Ak,true),Ah=this.getMetricIndexOfSlice(Ak,true);return{n:"Metrics",tid:-1,v:Aj,eid:Ag.getMetricIDsFromIndex([Ah])[0]};}return undefined;},getSliceCount:function(){return this.validSlices.length;},getTooltipContent:function(Az,Au,Aj){var At=this.getInnerSliceIndex(Az),As,A2=this.graphCell,Ap=this.getSliceTitles(),A0=this.getSliceLabel(At,true),Ax=Ap.length,Ar=this.angleBy.length,Ay,An,Ao,Aw,Ah,Al,Ai,Ak=A2.dp.lds.gmm,A1=Ak.gmCtr,Am,Ag=Ak.getMetricNames();As=A2.getTooltipContent(Au,Aj);if(As.length>0&&As[As.length-1]!==null){if(!Au){As.push(null);}}Ad.generateToolTipContent(0,Ax,undefined,Ap,A0,As);if(Ar>0){Ao=this.getMetricNameOfSlice(At,true);Am=this.getMetricIndexOfSlice(At,true);if(!Au){Aw=this.innerGetData(At,Am,false);for(Ay=0;Ay<As.length;Ay++){if(As[Ay]!==null&&(As[Ay].n===Ao||As[Ay].isPerCon)){As[Ay].n=mstrmojo.desc(2121,"Total")+" "+As[Ay].n;}}As.push({n:Ao,v:Aw});Ah=mstrmojo.desc(14141,"Percent Contribution");Al=this.getPercentage(At,true);Al=(Al*100).toFixed(2)+"%";As.push({n:Ah,v:Al});var Av=A1.colorByInfo;if(Av.tp===k.METRICS&&Av.metrics){var Aq=Av.metrics[0].n;if(Aq!==Ao){for(Ay=0;Ay<As.length;Ay++){if(As[Ay]!==null&&As[Ay].n===Aq){As[Ay].n=mstrmojo.desc(2121,"Total")+" "+As[Ay].n;}}As.push({n:Aq,v:this.innerGetData(At,Av.metrics[0].idx,false)});}}}else{if(Ak.colorType===k.ATT_METRICS||Ak.colorType===k.METRICS_ITEM){As.push({n:"Metrics",tid:-1,v:Ao,eid:Ak.getMetricIDsFromIndex([Am])[0]});}}}if(!Au){An=A1.getMetricsOnTooltip();Ax=An.length;for(Ay=0;Ay<Ax;Ay++){Ai=An[Ay];Ao=Ag[Ai];Aw=this.innerGetData(At,Ai,false);As.push({n:Ao,v:Aw});}}return As;},getDataLabelIdentity:function(Ak,Ai){var An=this.getOutSliceIndex(Ak,Ai);var Am=this.sliceDataLabelIdentities;if(Am[An]===undefined){var Al=this.graphCell,Ah=Al.dp.lds.gmm.cct,Ag=this.getCoordinates(An),Aj=Ag.R*Ah+Ag.C;Am[An]=new AB({objType:p.DATA_LABEL,sPieDP:this,isPie:true,sliceIdx:An,id:Aj});}return Am[An];},getIdentity:function(Ak,Ai){var An=this.getOutSliceIndex(Ak,Ai);var Am=this.sliceIdentities;if(Am[An]===undefined){var Al=this.graphCell,Ah=Al.dp.lds.gmm.cct,Ag=this.getCoordinates(An),Aj=Ag.R*Ah+Ag.C;Am[An]=new AB({objType:p.GRAPH_SHAPE,sPieDP:this,isPie:true,sliceIdx:An,id:Aj});}return Am[An];},getCoordinates:function(Av,Ai,Ah){var As=this.getInnerSliceIndex(Av,Ah);var Aw=this.graphCell,Au=Aw.dp.lds.gmm,Aj=Au.onlyMetricNamesOnAxisForGridPie,At=this.angleBy,Ar=Aj?1:At.length;var Ax=Aw.groupData,Ag=Ax.slicesOfPie,Am,Aq,Ao=Aw.dp.lds,Al=Ao.getOffsetX(),Ak=Ao.getOffsetY(),Ay=[],An,Ap;if(Ar>0){Am=parseInt(As/Ar,10);}else{Am=As;}Aq=Ag[Am];Ap=Aq[0];An=Ap.R-Ak;Ay.push(Ap.C-Al);if(Ai!==undefined){return Ao.getAssoCoordinatesWithMetricIndex(An,Ay,Ai);}if(Ar>0){return Ao.getAssoCoordinatesWithMetricIndex(An,Ay,At[As%Ar]);}return Ao.getAssoCoordinatesWithMetricIndex(An,Ay,0);},getMetricNameOfSlice:function(Ak,Aj){var Ai=this.getMetricIndexOfSlice(Ak,Aj),Al=this.graphCell,Ah=Al.dp.lds.gmm,Ag;if(Ai<0){return"";}Ag=Ah.getMetricNames();return Ag[Ai];},getMetricIndexOfSlice:function(Ag,Am){var Aj=this.getInnerSliceIndex(Ag,Am),Al=this.graphCell,Ao=this.angleBy,Ai=Ao.length,Ak,Ah=Al.dp.lds.gmm,An=Ah.onlyMetricNamesOnAxisForGridPie;if(Ai===0){return -1;}if(An){Ak=Al.metricIndexForLabelForGridPie;}else{Ak=Ao[Aj%Ai];}return Ak;},getMetric:function z(Ai,Ah){var Aj=this.getInnerSliceIndex(Ai,Ah);var Ag=this.getMetricIndexOfSlice(Aj,true);if(Ag>=0){return AF.call(this.graphCell,Ag);}return undefined;},isIndividualFormatted:function(Aj,Ai){var Am=this.getInnerSliceIndex(Aj,Ai);var Al=this.graphCell.getGMCtr(),Ah,Ak,Ag;Ah=this.getIdentity(Am,true);Ak=Ah.getSelectedObjectLowestLevel(true);Ag=Al.getShapeFormatsWithCombination(Ak);return !!Ag;},getFormattingProperties:function(Ar,Ah){var A0,An=this.getInnerSliceIndex(Ar,Ah),Az,Au=this.graphCell.getGMCtr(),Ap,Ay,Ai,Aw,Av,Aj=K.ALL_SHAPE_FORMAT,Ao,Ax,As;Ap=Au.getDefaultsForShape(Au.getChartInfo().shape);Az=this.getIdentity(An,true);var Ag=Au.getShapeFormatsObject();if(Ag){As=Az.getSelectedObjectLowestLevel(true);Ao=Az.getSelectedObjectMetricInfo(As);Ax=Az.getSelectedObjectColorByInfo();}Ay=this.graphCell.getPropertyValue(Aj);Ai=Au.getShapeFormatsWithCombination(Ao);Aw=Au.getShapeFormatsWithCombination(Ax);Av=Au.getShapeFormatsWithCombination(As);A0=Ad.getResolvedFormatsObject([Ap,Ay,Ai,Aw,Av]);var Am=this.getColorByData(An,true),At;if(A0===Ap){At=Au.getVolatileDefaultsForShape(Au.getChartInfo().shape);}else{At=A0;}Am=(Am!==undefined&&Am!==null)?Am:At[K.SHAPE_FILL_COLOR];var Ak=false;if(Am&&typeof Am==="object"){Ak=true;}if(Am!==undefined){At[K.SHAPE_LINE_COLOR]=At[K.SHAPE_FILL_COLOR]=Am;if(A0[K.LINE_MARKER_COLOR]===undefined){At[K.LINE_MARKER_COLOR]=Ak?Am.c1:Am;}if(A0[K.LINE_MARKER_BORDER_COLOR]===undefined){At[K.LINE_MARKER_BORDER_COLOR]=Ak?Am.c1:Am;}if(A0[K.SHAPE_BORDER_COLOR]===undefined){At[K.SHAPE_BORDER_COLOR]=Ak?Am.c1:Am;}}At[K.SHAPE_FILL_STYLE]=Ak?E.Gradient:E.Solid;var Al=this.graphCell.getPropertyValue(c.METRIC_LEVEL_DATA_LABEL);if(Al===undefined){At[K.DATA_LABELS_SHOW]=AP;}else{var Aq=Az.getAssMetricDataLabelID();if(Aq!==undefined){At[K.DATA_LABELS_SHOW]=Al[Aq];}else{At[K.DATA_LABELS_SHOW]=false;}}return At;},getData:function(Ah,Aj,Ag){var Ai=this.validSlices[Ah];return this.innerGetData(Ai,Aj,Ag);},innerGetData:function(Am,Aj,Aq){if(this.dataCache[Am]){return this.dataCache[Am];}var Ap=this.graphCell,At=this.angleBy,Ak=At.length,As,Ar,Ai,Ah,Al=Ap.dp.lds;As=this.getCoordinates(Am,Aj,true);Ai=As.R-As.oy;Ah=As.C-As.ox;var Ag=false,An=Al.gmm,Ao=An.gmCtr;Ag=(Ao.isGrid()&&An.getMetricCount()===0);if(!Ag&&Al.checkExcluded(Ai,Ah)){return 0;}if(Ak===0&&Aj===undefined){return 1;}Ar=Al.getData(Ai,Ah,Aq,Aj);if(Aq&&isNaN(Ar)){return 0;}return Ar;},getColorByData:function(Ag,Ar,Ah){var Am=this.getInnerSliceIndex(Ag,Ar),Ao;var Aq=this.graphCell,Aj=[],An,As=this.angleBy,Ak=As.length,Ap,Al=Aq.dp.lds,Ai=Al.gmm;if(Ai.colorType===k.NULL){return null;}An=this.getCoordinates(Am,undefined,true);if(Ai.colorType===k.ATT_METRICS||Ai.colorType===k.METRICS_ITEM){Aq.getMetricsIndexArray(Aj);if(As.length!==0){Ao=this.getMetricIndexOfSlice(Ag,Ar);if(Ao<0){Ao=As[Am%Ak];}Aj.push(Ao);}}Ap=Al.getColorByValue(An.R-An.oy,An.C-An.ox,Aj,Ah);return Ap;},getPercentage:function(Aj,Ai){var Ak=this.getInnerSliceIndex(Aj,Ai),Ag=Math.abs(this.innerGetData(Ak)),Ah=this.getAbsTotalValue();return Ag/Ah;},getSliceTitles:function(){var Am=this.graphCell.dp.lds,Aj=Am.gmm,Ah=Aj.gmCtr,Ag=Ah.getChartInfo(),Ai=Ah.getGMHeaderCount("SliceBy"),An=Ag.isABL,Al=P,Ar=Ag.dirc,Aq=Ag.tp,Ap=AZ.EnumABLDirection,Ak;if((An&&Ar===Ap.VERTICAL)||(Aq===Al.GRID)||(Aq===Al.BUBBLE||Aq===Al.SCATTER)){Ak=Aj.getRowTitleInfo();}else{Ak=Aj.getColTitleInfo();if(Ak.length>0){var Ao=Ak[Ak.length-1];if(Ao.otp===-1){Ak=Ak.slice(0,Ak.length-1);}}}return Ak.slice(Ak.length-Ai);},getSliceLabel:function(A2,Ai){var Au=this.getInnerSliceIndex(A2,Ai);var Ao=this.graphCell.dp.lds,A3=Ao.gmm.gmCtr,As=A3.getChartInfo(),Av=A3.getGMHeaderCount("SliceBy"),A4=this.graphCell,Aw=this.angleBy,A0=Aw.length,At=A0>0&&!Ao.gmm.onlyMetricNamesOnAxisForGridPie?A0:1,A5=A4.groupData,Ag=A5.slicesOfPie,Am=parseInt(Au/At,10),Aq=Ag[Am],Ak=Ao.getOffsetX(),Aj=Ao.getOffsetY(),Ay,An,Ap=Aq[0],Ax,A1=As.isABL,Al=P,Az=As.dirc,Ah=As.tp,Ar=AZ.EnumABLDirection;if(Av<=0){return[];}if((A1&&Az===Ar.VERTICAL)||(Ah===Al.GRID)||(Ah===Al.BUBBLE||Ah===Al.SCATTER)){An=Ap.R-Aj;Ay=Ap.C-Ak;Ax=Ao.getRowHeaders(An,"SliceBy","n&id&tid&dei&o&at&idx");if(Ax.length>Av){return Ax.slice(Ax.length-Av);}return Ax;}An=Ap.R-Aj;Ay=Ap.C-Ak;Ax=Ao.getColHeaders(Ay,"SliceBy","n&id&tid&dei&o&at&idx");if(Ax.length>Av){Ax=Ax.slice(0,Ax.length-1);return Ax.slice(Ax.length-Av);}return Ax;},getTotalValue:function(){if(this.tot!==undefined){return this.tot;}var Ah=0,Ag,Ai=this.getSliceCount();for(Ag=0;Ag<Ai;Ag++){Ah=Ah+this.getData(Ag);}this.tot=Ah;return Ah;},getAbsTotalValue:function(){if(this.tot!==undefined){return this.tot;}var Ah=0,Ag,Ai=this.getSliceCount();for(Ag=0;Ag<Ai;Ag++){Ah=Ah+Math.abs(this.getData(Ag));}this.tot=Ah;return Ah;},testSinglePieDP:function(){var Ag,Al,An,Ak,Ap,Ar=this.graphCell,Ao=Ar.dp.lds,Am=Ao.gmm,Ah="default",Ai;Ag=this.getSliceCount();An=this.getTotalValue();O.visPrint("the angle by metric is "+this.angleBy.join(","));function Aj(As){Ai.push(As.n);}for(Al=0;Al<Ag;Al++){Ak=this.getData(Al);if(Am.colorType!==k.NULL){Ah=this.getColorByData(Al);}Ap=this.getIdentity(Al).id;var Aq=this.getSliceLabel(Al);Ai=[];U.forEach(Aq,Aj);O.visPrint("slice "+Al+" ("+Ap+")  is "+Ak+" ("+this.getPercentage(Al)+") with slice labels: "+Ai.join(","));O.visPrint("color is: "+Ah);this.getIdentity(Al).getTooltipContent();}}});var AC=mstrmojo.declare(mstrmojo.Base,null,{getGroupLabelIdentities:function(){var Ah,Ag=[];for(Ah=0;Ah<10;Ah++){Ag.push(new g({gc:this,isGroup:true,isFaked:true}));}return Ag;},getFormattingProperties:function(){return undefined;},getSeriesLabelIdentities:function(){var Ah,Ag=[];for(Ah=0;Ah<10;Ah++){Ag.push(new g({gc:this,isGroup:false,isFaked:true}));}return Ag;},getSinglePieDPs:function(){return null;},getFormat:function AX(){return{};},getMetric:function z(){return null;},getMetricIndex:function j(){return null;},getMetricNumberWithDataIndex:function(){return null;},getMetricFormat:function(){return null;},getAxisMetricIndexArr:function(){return null;},getData:function Ab(){return null;},getIdentity:function(){return{isFaked:true};},getSliceIdentity:function(){return null;},getAssoDataWithMetricIndex:function(){return null;},getSizeByData:function r(){return null;},getMetricsIndexArray:function AM(){return null;},getColorByData:function o(){return null;},getSeriesLabel:function C(){return null;},getGroupLabel:function Q(){var Ah=this.dp,An=Ah.lds,Aj=An.flb,Al=An.blb,Ao=this.gIdx,Ag=Ah.bwdSteps,Ak=Ah.fwdSteps,Ai,Am;if(!Ah.bwdEnabled){Ag=0;}if(!Ah.fwdEnabled){Ak=0;}if(Ah.oriGroupCount<0){this.getGroupCount();}Ai=Ah.oriGroupCount;if(Ao<Ag){Am=Al[Ao];}else{Am=Aj[Ao-Ag-Ai];}if(Am){return Am;}return[];},getThresholdIndex:function d(){return null;},getThreshold:function AI(){return null;},getRowIndex:function q(){return null;},getColIndex:function AO(){return null;},getTooltipContent:function(){return null;}});var w=mstrmojo.declare(mstrmojo.Base,null,{getGMCtr:function(){var Ai=this.dp,Ah=Ai.lds,Ag=Ah.gmm;return Ag.gmCtr;},getGroupLabelIdentities:function(Aq){if(Aq===undefined){Aq=0;}if(this.gCateAxisLbIdCache===undefined){this.gCateAxisLbIdCache=[];}if(this.gCateAxisLbIdCache[Aq]){return this.gCateAxisLbIdCache[Aq];}var Al,Ao=[],Ai,Ak,Ap,Aj,Ah,Am,Ag,An;Ai=this.groupData[Aq];Ak=this.dp;Ap=Ak.lds;Aj=Ap.getOffsetX();Ah=Ap.getOffsetY();Am=Ai.R-Ah;Ag=Ai.C-Aj;An=Ap.getGroupLabel(Am,Ag,true);for(Al=0;Al<An.length;Al++){Ao.push(new g({gc:this,isGroup:true,hInfo:An[Al]}));}this.gCateAxisLbIdCache[Aq]=Ao;return Ao;},getPropertyValue:function(Aj){var Ak=this.dp,Ah=Ak.lds,Ag=Ah.gmm,Ai=Ag.property;return Ai.readItem(Aj);},getShapeFormatsWithCombination:function(Ag){return this.getGMCtr().getShapeFormatsWithCombination(Ag);},isIndividualFormatted:function(){var Aj=this.getGMCtr(),Ah,Ai,Ag;Ah=this.getIdentity();Ai=Ah.getSelectedObjectLowestLevel(true);Ag=Aj.getShapeFormatsWithCombination(Ai);return !!Ag;},getFormattingProperties:function(){var Ai,Ag,Ah,Ak=this.getGMCtr(),Al,Aj;if(Ak.getChartInfo().isPie){O.visPrint("for pie chart, call getFormattingPropertiesOfSlice of SinglePieDataProvider instead");return undefined;}Ah=this.getIdentity();Ag=Ak.getShapeFormatsCachedObject(Ah);if(!Ag){Al=Ak.getDefaultsMergedWithAllPropsCachedObject(this);Aj=Ak.getComboLevelPropCachedObject(Ah);Ai=Ad.getResolvedFormatsObject([Al].concat(Aj));Ag=Ak.getShapeColorFormatsCachedObject(this,Ah,Ai,Ai===Al);Ak.setShapeFormatsCachedObject(Ah,Ag);}return Ag;},getSeriesLabelIdentities:function(Aq){if(Aq===undefined){Aq=0;}if(this.sCateAxisLbIdCache===undefined){this.sCateAxisLbIdCache=[];}if(this.sCateAxisLbIdCache[Aq]){return this.sCateAxisLbIdCache[Aq];}var Al,Ao=[],Ai,Ak,Ap,Aj,Ah,Am,Ag,An;Ai=this.groupData[Aq];Ak=this.dp;Ap=Ak.lds;Aj=Ap.getOffsetX();Ah=Ap.getOffsetY();Am=Ai.R-Ah;Ag=Ai.C-Aj;An=Ap.getSeriesLabel(Am,Ag,true);for(Al=0;Al<An.length;Al++){Ao.push(new g({gc:this,isGroup:false,hInfo:An[Al]}));}this.sCateAxisLbIdCache[Aq]=Ao;return Ao;},getGroupElementIndexArray:function(Am,Ao){var Ai=this.groupData[Ao],Ak=this.dp,An=Ak.lds,Aj=An.getOffsetX(),Ah=An.getOffsetY(),Al=Ai.R-Ah,Ag=Ai.C-Aj;return An.getGroupElementIndexArray(Al,Ag,Am);},getBreakByElementIndexArray:function(An){var Am=this.dp,As=Am.lds,Ak=As.getOffsetX(),Ai=As.getOffsetY(),Aj,Ao,Ah,Aq,Al,Ag=As.getChartInfo();Aj=this.groupData[0];Ao=Aj.R-Ai;Ah=Aj.C-Ak;if(Ag.isABL&&Ag.dirc===M.HORIZONTAL){Al=1;Aq=Ah;}else{Aq=Ao;Al=0;}var Ap=As.getHeaderObjectList(Aq,Al,"BreakBy");if(An){var Ar=[];U.forEach(Ap,function(At){Ar.push(At.idx);});return Ar;}return Ap;},getSinglePieDPs:function(){if(this.pieDps){return this.pieDps;}var Ai=this.getGMCtr().getChartInfo(),Al=Ai.isPie,Ah=this.metricsOnAngleBy,Am=this.splitPie,Aj,Ao=[],An,Ak,Ag=false,Ap;if(!Al){return Ao;}if(Am){Aj=Ah.length;if(Aj===0){Ag=true;Aj=1;}for(An=0;An<Aj;An++){if(Ag){Ap=[];}else{Ap=Ah.slice(An,An+1);}Ak=new s({angleBy:Ap,graphCell:this,chtInfo:Ai});Ao.push(Ak);}}else{Ak=new s({angleBy:Ah,graphCell:this,chtInfo:Ai});Ao.push(Ak);}this.pieDps=Ao;return Ao;},getFormat:function AX(Ag){return this.getMetric(Ag);},getMetric:function z(Ah){var Ag=this.getMetricIndex(Ah);return AF.call(this,Ag);},getShape:function u(Aj){Aj=Aj||0;var Ag=this.getMetricIndex(Aj),Al=this.dp,Ai=Al.lds,Ah=Ai.gmm,Ak=Ah.gmCtr;return Ak.getOnTheFlyShapeForMetric(Ag);},getMetricIndex:function j(Ag){var Ah=this.groupData[Ag];return Ah.mIdx;},getMetricNumberWithDataIndex:function(Ah){var Ag=this.dp.lds,Ai=this.getMetricIndex(Ah);return Ag.getMetricNumberFormat(Ai);},getMetricFormat:function(Ah){var Ag=this.dp.lds;return Ag.getMetricNumberFormat(Ah);},getAxisMetricIndexArr:function(Ah){var Ai=this.groupData,Ag=Ai.length,Aj;for(Aj=0;Aj<Ag;Aj++){Ah.push(this.getMetricIndex(Aj));}return Ah;},getData:function Ab(Ak){var Am=this.groupData[Ak],An=this.dp,Aj=An.lds,Ai=Aj.getOffsetX(),Ag=Aj.getOffsetY(),Ah=Am.R-Ag,Al=Am.C-Ai;return Aj.getData(Ah,Al);},getIdentity:function(){if(!this.identity){var Aj=this.getGMCtr().getChartInfo().isPie,Ah=this.dp.lds.gmm.cct,Ag=this.groupData[0],Ai=Ag.R*Ah+Ag.C;this.identity=new AB({objType:p.GRAPH_SHAPE,gc:this,id:Ai,isPie:Aj});}return this.identity;},getMarkerIdentity:function(){if(!this.mkIdentity){var Aj=this.getGMCtr().getChartInfo().isPie,Ah=this.dp.lds.gmm.cct,Ag=this.groupData[0],Ai=Ag.R*Ah+Ag.C;this.mkIdentity=new AB({objType:p.LINE_MARKER,gc:this,id:Ai,isPie:Aj});}return this.mkIdentity;},getDataLabelIdentity:function(){if(!this.dataLabelIdentity){var Aj=this.getGMCtr().getChartInfo().isPie,Ah=this.dp.lds.gmm.cct,Ag=this.groupData[0],Ai=Ag.R*Ah+Ag.C;this.dataLabelIdentity=new AB({objType:p.DATA_LABEL,gc:this,id:Ai,isPie:Aj});}return this.dataLabelIdentity;},getSliceIdentity:function(Ag,Ai){var Ah=this.getSinglePieDPs()[Ag];return Ah.getIdentity(Ai);},getAssoDataWithMetricIndex:function(Ak,Ap){var Aj=this.dp,Ao=Aj.lds,An=this.groupData.length,Ag=[],Ai=Ao.getOffsetX(),Ah=Ao.getOffsetY(),Al,Am;for(Al=0;Al<An;Al++){Ag.push(this.groupData[Al].C-Ai);}Am=this.groupData[0].R-Ah;return Ao.getAssoDataWithMetricIndex(Am,Ag,Ak,Ap);},getSizeByMetricFormat:function f(){var Al=this.dp.getChartInfo(),Ak=this.dp,Ag=Ak.lds,Ah;if(!Al.isBubbleOrScatter){var Aj=this.getGMCtr();if(!Aj.hasSizeBy()){return undefined;}Ah=Aj.getSizeByMetrics()[0];}else{var Ai=AL.call(this);Ah=Ag.getSizeByMetricIndexForBubble(Ai.lr,Ai.lcs);}return AF.call(this,Ah);},getSizeByData:function r(){var An=this.dp,Am=An.lds,Ag=this.groupData.length,Ak=[],Aj=Am.getOffsetX(),Ah=Am.getOffsetY(),Al,Ai;for(Al=0;Al<Ag;Al++){Ak.push(this.groupData[Al].C-Aj);}Ai=this.groupData[0].R-Ah;return Am.getSizeByData(Ai,Ak);},getAbsSizeByData:function AA(){return Math.abs(this.getSizeByData());},getMetricsIndexArray:function AM(Ao){var Al=this.dp,Ai=Al.getChartInfo(),Aj,Aq=Al.lds,Ap=this.groupData.length,Ag=[],Ak=Aq.getOffsetX(),Ah=Aq.getOffsetY(),Am,An;if(Ai.tp!==P.GRID){this.getAxisMetricIndexArr(Ao);}if((Ai.tp===P.BUBBLE||Ai.tp===P.SCATTER)&&Ai.hasSizeBy){for(Am=0;Am<Ap;Am++){Ag.push(this.groupData[Am].C-Ak);}An=this.groupData[0].R-Ah;Aj=Aq.getSizeByMetricIndexForBubble(An,Ag);Ao.push(Aj);}},getColorByData:function o(Ap){var Ai=this.groupData[0],Ak=this.dp,Ao=Ak.lds,Aj=Ao.getOffsetX(),Ah=Ao.getOffsetY(),An=Ai.R-Ah,Ag=Ai.C-Aj,Am=[],Al=Ao.gmm;if(Al.colorType===k.NULL){return undefined;}if(Al.getChartInfo().isPie){O.visPrint("not expected to call getColorByData of graph cell when in pie mode");return undefined;}if(Al.colorType===k.ATT_METRICS||Al.colorType===k.METRICS_ITEM){this.getMetricsIndexArray(Am);}return Ao.getColorByValue(An,Ag,Am,Ap);},isSubtotal:function AK(){},getSeriesLabel:function C(Ap){var Ai,Ak,Ao,Al,Aj,Ah,Am,Ag;if(this.seriesLabel===undefined){this.seriesLabel={};}if(this.seriesLabel[Ap]!==undefined){return this.seriesLabel[Ap];}Ai=this.groupData[Ap];Ak=this.dp;Ao=Ak.lds;Al=Ao.gmm;Aj=Ao.getOffsetX();Ah=Ao.getOffsetY();Am=Ai.R-Ah;Ag=Ai.C-Aj;if(Al.onlyMetricNamesOnAxisForGridPie&&!Al.isMetricNamesOnXAxis){var An=[];An.push(Ak.getOneMetricName(this.metricIndexForLabelForGridPie));this.seriesLabel[Ap]=An;return An;}this.seriesLabel[Ap]=Ao.getSeriesLabel(Am,Ag);return this.seriesLabel[Ap];},getGroupLabel:function Q(Ap){var Ai,Ak,Ao,Al,Aj,Ah,Am,Ag;if(this.groupLabel===undefined){this.groupLabel={};}if(this.groupLabel[Ap]!==undefined){return this.groupLabel[Ap];}Ai=this.groupData[Ap];Ak=this.dp;Ao=Ak.lds;Al=Ao.gmm;Aj=Ao.getOffsetX();Ah=Ao.getOffsetY();Am=Ai.R-Ah;Ag=Ai.C-Aj;if(Al.onlyMetricNamesOnAxisForGridPie&&Al.isMetricNamesOnXAxis){var An=[];An.push(Ak.getOneMetricName(this.metricIndexForLabelForGridPie));this.groupLabel[Ap]=An;return An;}this.groupLabel[Ap]=Ao.getGroupLabel(Am,Ag);return this.groupLabel[Ap];},getThresholdIndex:function d(){return 0;},getThreshold:function AI(){},getRowIndex:function q(Ag){var Ah=this.groupData[Ag];return Ah.R;},getColIndex:function AO(Ag){var Ah=this.groupData[Ag];return Ah.C;},getTooltipContent:function(Ai,Al){Ai=!!Ai;Al=!!Al;var Ah=this.gcTtpCcnt||{},Ak=Ai+","+Al;if(Ah[Ak]!==undefined){return Ah[Ak];}var Ag=this.dp.lds,Aj=[];Ag.getTooltipForChartHeader(Aj,"r",Ai);Ag.getTooltipForChartHeader(Aj,"c",Ai);AV.call(this,Aj,Ai,Al);Ah[Ak]=Aj;return Aj;},testGraphCell:function l(){O.visPrint("");O.visPrint("start testing gcell...");var Al=this.dp,Ao=Al.lds.gmm,Ai=Al.getDataGroup(),Aq,At,Am,Ap,Ah,An,Ar,As,Ag=Ao.getChartInfo(),Ak=Ag.isPie,Aj;for(Aq=0;Aq<Ai;Aq++){At=this.getData(Aq);if(Ao.colorType!==k.NULL){Aj=this.getColorByData(Aq);}O.visPrint("data with data index "+Aq+": "+At);if(Ao.colorType!==k.NULL){O.visPrint("color with data index "+Aq+": "+Aj);}O.visPrint("sizeBy data: "+this.getSizeByData());Am=this.getSeriesLabel(Aq);O.visPrint("series labels are: "+Am.join());Ap=this.getGroupLabel(Aq);O.visPrint("group labels are: "+Ap.join());}if(Ak){O.visPrint("start testing pie dps");Ar=this.getSinglePieDPs();Ah=Ar.length;for(An=0;An<Ah;An++){As=Ar[An];As.testSinglePieDP();if(An!==Ah-1){O.visPrint("-----------------------");}}O.visPrint("end testing pie dps");}this.getTooltipContent();O.visPrint("end testing gcell...");}});mstrmojo.gm.GMDataProvider=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.gm.GMDataProvider",lds:null,data:null,sbc:false,graphJSON:null,isValid:true,fwdEnabled:false,bwdEnabled:false,cache:null,getController:function(){var Ah=this.lds,Ag=Ah.gmm,Ai=Ag.gmCtr;return Ai;},allowDatalabelOverlap:function(){var Ag=this.getController();return Ag.getChartInfo().dlPlmt>1;},isClusteredBarSpecialCase:function(){var Ag=this.getController();return Ag.clusteredBarSpecialCase;},getChartInfo:function(){return this.lds.getChartInfo();},init:function AG(Ag){this._super(Ag);this.cache=[];var Ah=this.getChartInfo();if(Ah.isABL||Ah.tp===P.BUBBLE||Ah.tp===P.SCATTER){this.getTrendsOfChart();}},destroy:function I(){delete this.cache;},isGradientABL:function(){return this.lds.gmm.gmCtr.isGradientABL();},getTotalOfGroup:function(Ak){var Ai=this.innerGetSeriesCount(),Ah=0,Ag,Aj;for(Ag=0;Ag<Ai;Ag++){Aj=this.innerGetGraphCell(Ag,Ak);Ah+=Aj.getData(0);}return Ah;},getAxisOriginLineIdentity:function(Ag){var Ah=this.getController();return Ah.getAxisOriginLineIdentity(Ag);},getAxisOriginLabelIdentity:function(Ag){var Ah=this.getController();return Ah.getAxisOriginLabelIdentity(Ag);},getMetricsOnAxis:function(Ai){var Ag=this.rowIndex,Aj=this.colIndex;var Ah=this.getController();if(Ag===undefined||Aj===undefined){O.visPrint("row index or column index of data provider is not found");}if(Ai==="x"||Ai==="x1"||Ai==="X1"){return Ad.filterInValidMetricIndex(Ah.getMetricsOnAxisOfChart(Ag,Aj,"x",true));}if(Ai==="y"||Ai==="y1"||Ai==="Y1"){return Ad.filterInValidMetricIndex(Ah.getMetricsOnAxisOfChart(Ag,Aj,"y",true));}if(Ai==="x2"||Ai==="X2"){return Ad.filterInValidMetricIndex(Ah.getMetricsOnAxisOfChart(Ag,Aj,"x",false));}if(Ai==="y2"||Ai==="Y2"){return Ad.filterInValidMetricIndex(Ah.getMetricsOnAxisOfChart(Ag,Aj,"y",false));}return[];},isLogScale:function(Ah){var Ag=this.getController();return Ag.isLogScale(Ah,this.rowIndex,this.colIndex);},getNumericOption:function(Ai){var Ag=this.getMetricsOnAxis(Ai),Ah=this.getController();if(Ag.length>0){return Ad.getOptionObjArr.call(Ah,Ag,Ai,false);}return[];},getAxisOriginValue:function(Ak){var Aj=this.getController(),Ai=Aj.view,Am=this.getNumericOption(Ak),Ah=Ai.readGlobalProperty(c.AXIS_ORIGIN,Am).jsonObj;if(Ah){var Al=Ah[c.AXIS_ORIGIN_AUTO];var Ag=parseFloat(Ah[c.AXIS_ORIGIN_VALUE]);if(Al){return 0;}return Ag;}return 0;},getAxisFormats:function G(Ah,Ak){Ak=Ak||"all";var Al=this.getController(),Ai,Ag=Al.getAllAxisProperties();switch(Ak){case"axisLabel":if(Ah==="x1"||Ah==="x2"||Ah==="X1"||Ah==="X2"){Ai=[K.X_AXIS_LABELS_FONT_SIZE,K.X_AXIS_LABELS_FONT_FAMILY,K.X_AXIS_LABELS_FONT_STYLE,K.X_AXIS_LABELS_ROTATION,K.X_AXIS_LABELS_FONT_COLOR];}else{if(Ah==="y1"||Ah==="y2"||Ah==="Y1"||Ah==="Y2"){Ai=[K.Y_AXIS_LABELS_FONT_SIZE,K.Y_AXIS_LABELS_FONT_FAMILY,K.Y_AXIS_LABELS_FONT_STYLE,K.Y_AXIS_LABELS_ROTATION,K.Y_AXIS_LABELS_FONT_COLOR];}}return W.copyProps(Ai,Ag);case"majorTick":case"minorTick":var Aj=Ak==="majorTick",Am={};if(Aj){Ai=[K.MAJOR_GRID_LINES_COLOR,K.MAJOR_GRID_LINES_THICKNESS,K.MAJOR_GRID_LINES_STYLE];}else{Ai=[K.MINER_GRID_LINES_COLOR,K.MINER_GRID_LINES_THICKNESS,K.MINER_GRID_LINES_STYLE];}return W.copyProps(Ai,Ag);case"body":if(Ah==="x1"||Ah==="x2"||Ah==="X1"||Ah==="X2"){Ai=[K.X_AXIS_LINE_COLOR,K.X_AXIS_LINE_STYLE,K.X_AXIS_LINE_THICKNESS];}else{if(Ah==="y1"||Ah==="y2"||Ah==="Y1"||Ah==="Y2"){Ai=[K.Y_AXIS_LINE_COLOR,K.Y_AXIS_LINE_STYLE,K.Y_AXIS_LINE_THICKNESS];}}return W.copyProps(Ai,Ag);case"axisOrigin":if(Ah==="x1"||Ah==="x2"||Ah==="X1"||Ah==="X2"){Ai=[K.X_AXIS_ORIGIN_LINE_SHOW,K.X_AXIS_ORIGIN_LINE_COLOR,K.X_AXIS_ORIGIN_LINE_STYLE,K.X_AXIS_ORIGIN_LINE_THICKNESS];}else{if(Ah==="y1"||Ah==="y2"||Ah==="Y1"||Ah==="Y2"){Ai=[K.Y_AXIS_ORIGIN_LINE_SHOW,K.Y_AXIS_ORIGIN_LINE_COLOR,K.Y_AXIS_ORIGIN_LINE_STYLE,K.Y_AXIS_ORIGIN_LINE_THICKNESS];}}return W.copyProps(Ai,Ag);case"showHide":if(Ah==="x1"||Ah==="x2"||Ah==="X1"||Ah==="X2"){Ai=[K.X_AXIS_LINE_SHOW,K.X_AXIS_TITLE_SHOW,K.X_AXIS_LABELS_SHOW,K.MAJOR_GRID_LINES_SHOW,K.MINOR_GRID_LINES_SHOW];}else{if(Ah==="y1"||Ah==="y2"||Ah==="Y1"||Ah==="Y2"){Ai=[K.Y_AXIS_LINE_SHOW,K.Y_AXIS_TITLE_SHOW,K.Y_AXIS_LABELS_SHOW,K.MAJOR_GRID_LINES_SHOW,K.MINOR_GRID_LINES_SHOW];}}return W.copyProps(Ai,Ag);default:W.copy(Ag,Am);return Am;}},getDataLabelType:function(){return this.getChartInfo().dlTp;},getDataLabelFontFormat:function(){var Aj=this.getController(),Ai=mstrmojo.hash,Ah=[K.DATA_LABELS_FONT_FAMILY,K.DATA_LABELS_FONT_SIZE,K.DATA_LABELS_FONT_STYLE,K.DATA_LABELS_FONT_COLOR],Ag=Aj.getDataLabelFontFormat();return Ai.copyProps(Ah,Ag);},clearGraphJSON:function(){this.graphJSON=null;},resetDPCache:function S(){if(this.rCache){this.rCache={};delete this.rCache;}if(this.cCache){this.cCache={};delete this.cCache;}},innerGetGraphCell:function n(Ah,Ag){return AR.call(this,Ah,Ag);},getGraphCell:function h(Aj,Ah){var Ai=this.getController();if(Ai.clusteredBarSpecialCase){var Ag=this.getClusterDataGroup();if(Aj>=Ah*Ag&&Aj<(Ah+1)*Ag){Aj=Math.round(Aj%Ag);}else{return new AC({gIdx:Ah,dp:this,isFaked:true});}}return AR.call(this,Aj,Ah);},countValidGraphCell:function(){var Ai,Ag,Al,Ak,Ah,Aj=0;Ai=this.innerGetGroupCount();Ag=this.innerGetSeriesCount();for(Ak=0;Ak<Ai;Ak++){for(Ah=0;Ah<Ag;Ah++){Al=this.innerGetGraphCell(Ah,Ak);if(Al.getData(0)!==null){Aj++;}}}return Aj;},collectElementsIndexArrayOnXVar:function(Aj){var Am=this.getChartInfo(),Ai,Ak,Al,Ah=[],Ag=this.innerGetGroupCount();if(Am.isABL){for(Ai=0;Ai<Ag;Ai++){Ak=this.innerGetGraphCell(0,Ai);Al=Ak.getGroupElementIndexArray(Aj,0);Ah.push(Al);}return Ah;}return undefined;},isNullGC:function(Ag){return isNaN(Ag.getData(0));},isDiscreteSeries:function(Ai){var Ah=this.innerGetGroupCount(),Ak,Ag,Al=true,Aj;for(Aj=0;Aj<Ah;Aj++){Ak=this.innerGetGraphCell(Ai,Aj);if(!this.isNullGC(Ak)){if(Al){if(Aj===Ah-1){return true;}Ag=this.innerGetGraphCell(Ai,Aj+1);if(this.isNullGC(Ag)){return true;}}Al=false;}else{Al=true;}}return false;},GetDiscreteSeries:function AJ(){var Am=this.getChartInfo(),Aj,Ai=[],Ah=this.lds.gmm,Al=Ah.gmCtr,Ak=Al.clusteredBarSpecialCase,Ag=this.getSeriesCount();if(!Am.isABL){return[];}for(Aj=0;Aj<Ag;Aj++){if(Ak||this.isDiscreteSeries(Aj)){Ai.push(Aj);}}return Ai;},prepareForTrendLines:function(){var Ay=this,BQ=this.getChartInfo(),BR={},At={},BJ,Au,BC,A5,Av,As,BL,BA=this.lds,Aw,BD=this.getGroupCount(),A7=this.getSeriesCount(),BN,A9,Ai=BA.gmm,Ao=Ai.mx,Ar=BA.cri,Am=BA.cci,A2=Ai.getBreakByUnits(),A1=A2.length>0,BF=Ai.gmCtr,A6=BA.validFse,Ah=BA.validBse,BG=BA.validXVar,BP,Ax,BM,BO,Aj,Al=false,Aq,A0;var A4=BF.getDependentMetricOptions();function BE(BT){var BS;A4.forEach(function(BU){if(BT===BU.key){BS=BU;}});return BS;}var An=BF.trendLineErrors={};var BI=false,A8,BH;var Ak=function(BU){var BX={MID_IN_Y1:-131072,MID_IN_Y2:-1179648,MID_IN_X1:-65536,MID_IN_X2:-1114112},BS=Ai.dz[BH],BW=BS&&BS.TemplateMetric,BT=BW&&BW[BU],BV;if(BT&&BT.ax===0){if(BQ.dirc===M.VERTICAL){BV=BX.MID_IN_Y1;}else{BV=BX.MID_IN_X1;}}else{if(BQ.dirc===M.VERTICAL){BV=BX.MID_IN_Y2;}else{BV=BX.MID_IN_X2;}}return BV;};var Ag=function(BW){function BS(Bb,Bd){var Bc=false;U.forEach(Bb,function(Be){if(Be.tmData.modix===Bd){Bc=true;}});return Bc;}var BV,Ba,BX,BU;if(!BI){BV=BO;}else{Ba=Ay.lds.gmm.dz;BX=Ba[BH];BU=BX.mdls&&BX.mdls.mod_c[BW.modix-1];if(BU===undefined){return ;}if(BU.dua===0){BV=BH;}else{BV=A8+"2Axis";}}if(BC.indexOf(BV)<0){BC.push(BV);}if(At[BV]===undefined){At[BV]=[];}var BZ,BY;if(BW){if(!BI){var BT=BF.model.getMetricIDsFromIndex([BW.mid])[0];BZ=BF.view.getExistingRefLineOptions(BT);BZ.forEach(function(Bb){if(Bb.modix===BW.modix){BY=Bb;}});if(!BS(At[BV],BW.modix)){At[BV].push(new AZ.TrendLineModel({tmData:BW,dp:Ay,mx:Ao,isTrendLine:false,direction:Aq,refIsDefOnAxis:BI,seriesIds:[BN],midx:BV,trendLineOpt:BY,metricId:Aj,ldsCri:Ar,ldsCci:Am}));}}else{BZ=BF.view.getExistingRefLineOptionsForAxis(BV);BZ.forEach(function(Bb){if(Bb.modix===BW.modix){BY=Bb;}});if(!BS(At[BV],BW.modix)){At[BV].push(new AZ.TrendLineModel({tmData:BW,dp:Ay,isTrendLine:false,direction:BQ.dirc===M.VERTICAL?"horizontal":"vertical",defOnZone:BU,seriesIds:[BN],trendLineOpt:BY,refIsDefOnAxis:BI,ldsCri:Ar,ldsCci:Am}));}}}};if(BQ.isABL&&BF.isStacked&&!BF.splitPlottingMetrics){A8=BQ.dirc===M.VERTICAL?"Y":"X";BH=A8+"Axis";BI=true;}this.trendLineCalculated=true;this.inDpTrMdls=BR;this.inDpRfMdls=At;this.seriesWithTrendLineDefined=BJ=[];this.metricIndexesWithTrendLineDefined=Au=[];this.metricIndexesWithRefLineDefined=BC=[];if(BQ.tp===P.BUBBLE||BQ.tp===P.SCATTER){Al=true;}var Az=1;for(BN=0;BN<A7;BN++){if(this.isClusteredBarSpecialCase()){Az=this.getClusterDataGroup();Aw=this.getGraphCell(BN,Math.round(BN/Az));}else{Aw=this.innerGetGraphCell(BN,0);}if(Aw.isFaked){continue;}if(BQ.isABL){A5=Aw.getMetricIndex(0);}else{if(Al===true){Av=Aw.getMetricIndex(0);BL=Ai.getMetricIDsFromIndex([Av])[0];A5=Aw.getMetricIndex(1);}}As=Ai.getMetricIDsFromIndex([A5])[0];if(BG&&(A6||Ah)){A9=this.collectElementsIndexArrayOnXVar(BG);this.unitElementIndexArray=A9;if(BD>1){if(A6&&A9.length>0&&Ad.indexOf(A9,A6)>=0){this.fwdEnabled=true;}if(Ah&&A9.length>0&&Ad.indexOf(A9,Ah)>=0){this.bwdEnabled=true;}}}if(Al===true){this.bwdEnabled=true;this.fwdEnabled=true;}BP=BF.getTrendLinesObjectForMetric(A5,Ar,Am,BL,true)[0];if(BP&&BP.inChartModel[0]&&BP.inChartModel[0].model){var Ap=BP.inChartModel[0].model.error_message;if(Ap){var A3=BP.mid+","+BP.modix;if(!An[A3]){An[A3]=Ap;}}else{BJ.push(BN);if(BR[A5]){BR[A5].seriesIds.push(BN);BR[A5].seriesBBUnits.push(Aw.getBreakByElementIndexArray(true));}else{Au.push(A5);var BB=BE(As);BR[A5]=new AZ.TrendLineModel({tmData:BP,hasBb:A1,dp:Ay,isTrendLine:true,mx:Ao,seriesBBUnits:[Aw.getBreakByElementIndexArray(true)],seriesIds:[BN],midx:A5,metricId:As,trendLineOpt:BB,ldsCri:Ar,ldsCci:Am});}}}if(!BI){Ax=[A5];if(Al===true){Ax.push(Aw.getMetricIndex(0));}for(BM=0;BM<Ax.length;BM++){if(Al){if(BM===0){Aq="horizontal";}else{Aq="vertical";}}else{if(BQ.isABL){if(BQ.dirc===M.VERTICAL){Aq="horizontal";}else{Aq="vertical";}}}BO=Ax[BM];Aj=Ai.getMetricIDsFromIndex([BO])[0];A0=BF.getTrendLinesObjectForMetric(BO,Ar,Am,undefined,false);A0.forEach(Ag);}}else{var BK=Ak(A5);A0=BF.getTrendLinesObjectForMetric(BK,Ar,Am,undefined,false);A0.forEach(Ag);}}},getTrendsOfChart:function(){if(this.trendLinesOfChart){return this.trendLinesOfChart;}if(!this.trendLineCalculated){this.prepareForTrendLines();}var Ak=this.inDpTrMdls,Ai=[],Ag={},Aj=this.metricIndexesWithTrendLineDefined;if(Aj){U.forEach(Aj,function(An){var Am=Ak[An],Al=Am.getSingleTrendLines(Ag);Ai=Ai.concat(Al);});}function Ah(Al){if(Al===undefined){return Al;}var Am;Al.forEach(function(An){for(Am=0;Am<An.length;Am++){An[Am]=An[Am].toString();}});return Al;}this.trendLinesOfChart=Ai;this.fwdLbs=Ag.fwdLbs=Ah(Ag.fwdLbs);this.bwdLbs=Ag.bwdLbs=Ah(Ag.bwdLbs);return Ai;},getRefsOfChart:function(){if(this.refLinesOfChart){return this.refLinesOfChart;}if(!this.trendLineCalculated){this.prepareForTrendLines();}var Aj=this.inDpRfMdls,Ai=[],Ah={},Ag=this.metricIndexesWithRefLineDefined;if(Ag){U.forEach(Ag,function(Am){var Al=Aj[Am],Ak;Al.forEach(function(An){Ak=An.getSingleTrendLines(Ah);Ai=Ai.concat(Ak);});});}this.refLinesOfChart=Ai;return Ai;},getMetricsIndexOnAxis:function F(){return this.mpos;},getMinMetricValue:function Aa(){},getMaxMetricValue:function A(){},getMinMaxValueForABL:function(){var Ak,An,Ah=this.innerGetSeriesCount(),Aj=this.innerGetGroupCount(),Au,Al,As,Ag,Am,Ar,Aq=this.lds.gmm.gmCtr,Ap=Aq.hasSizeBy(),Ao,Ai,At;for(Au=0;Au<Ah;Au++){for(Al=0;Al<Aj;Al++){As=this.innerGetGraphCell(Au,Al);if(Ap){Ao=As.getSizeByData();if(At===undefined){At=Ao;}else{if(At>Ao){At=Ao;}}if(Ai===undefined){Ai=Ao;}else{if(Ai<Ao){Ai=Ao;}}}Ag=As.dp.getDataGroup();for(Am=0;Am<Ag;Am++){Ar=As.getData(Am);if(Ak===undefined){Ak=Ar;}else{if(Ak>Ar){Ak=Ar;}}if(An===undefined){An=Ar;}else{if(An<Ar){An=Ar;}}}}}return{XMax:An,XMin:Ak,YMax:An,YMin:Ak,ZMin:At,ZMax:Ai};},getMinMaxValueForGrid:function(){var Ao,Ah,Ag=this.getSeriesCount(),Ai=this.getGroupCount(),Ap,Aj,An,Ak,Am=this.lds.gmm.gmCtr,Al=Am.hasSizeBy();if(Al){for(Ap=0;Ap<Ag;Ap++){for(Aj=0;Aj<Ai;Aj++){An=this.innerGetGraphCell(Ap,Aj);Ak=An.getSizeByData();if(Ao===undefined){Ao=Ak;}else{if(Ao>Ak){Ao=Ak;}}if(Ah===undefined){Ah=Ak;}else{if(Ah<Ak){Ah=Ak;}}}}}return{YMax:20000,YMin:0,XMin:0,XMax:20000,ZMin:Ao,ZMax:Ah};},getMinMaxValueForBubbleOrScatter:function(){var Al,Aq,Ah,An,Av,Aj,Ai=this.innerGetSeriesCount(),Ak=this.innerGetGroupCount(),Aw,Am,Au,Ag,Ap,Ao,At=this.lds.gmm.gmCtr,As=At.hasSizeBy();for(Aw=0;Aw<Ai;Aw++){for(Am=0;Am<Ak;Am++){Au=this.innerGetGraphCell(Aw,Am);Ag=Au.dp.getDataGroup();if(As){Ap=Au.getSizeByData();if(Av===undefined){Av=Ap;}else{if(Av>Ap){Av=Ap;}}if(Aj===undefined){Aj=Ap;}else{if(Aj<Ap){Aj=Ap;}}}for(Ao=0;Ao<Ag;Ao++){var Ar=Au.getData(Ao);if(Ao===0){if(Al===undefined){Al=Ar;}else{if(Al>Ar){Al=Ar;}}if(Aq===undefined){Aq=Ar;}else{if(Aq<Ar){Aq=Ar;}}}else{if(Ah===undefined){Ah=Ar;}else{if(Ah>Ar){Ah=Ar;}}if(An===undefined){An=Ar;}else{if(An<Ar){An=Ar;}}}}}}return{YMax:An,YMin:Ah,XMin:Al,XMax:Aq,ZMin:Av,ZMax:Aj};},getMetricFormat:function e(Ah,Ai){Ai=Ai||false;if(Ai){var Am=parseInt(Ah,10),Ag=this,Ak=Ag.lds,Al=Ak.gmm,Aj=Ag.getMetricIds(),An,Ao=Ag.getMetricNames();if(Am<0){O.visPrint("invalid metric index");return undefined;}An=Al.getFullNumberFormat();return{idx:Am,metric:Ao[Am],id:Aj[Am],fullNf:An!==undefined?An[Am]:undefined};}return this.lds.getMetricNumberFormat(Ah);},isMetricOnRowAxis:function AT(){return false;},getMetricsCount:function Z(){var Ag=this.metrics;if(!Ag){return 0;}return Ag.es.length;},getMetricNames:function AS(){var Ah=this.lds,Ag=Ah.gmm;return Ag.getMetricNames();},getMetricIds:function AU(){var Ah=this.lds,Ag=Ah.gmm;return Ag.getMetricIds();},getOneMetricName:function L(Ah){var Ag=this.metrics;if(Ag){if(Ag.es.length-1>=Ah){return Ag.es[Ah].n;}}},getSeriesCount:function Af(){return this.innerGetSeriesCount();},innerGetSeriesCount:function(){var Ag=this.dataSbc;if(Ag===true){return this.data[0].length;}return this.data.length;},getGroupCount:function H(){var Ag=this.dataSbc;if(Ag===false){return this.data[0].length;}return this.data.length;},innerGetGroupCount:function H(){var Ag=this.dataSbc;if(Ag===false){return this.data[0].length;}return this.data.length;},getDimensionSize:function V(){return 5;},getDataGroup:function B(){var Ag=this.data[0][0];if(Ag===undefined){return 1;}return Ag.length;},getSeriesByColumn:function N(){return this.sbc;},seriesGroupIndexToRowColumnIndex:function Ae(Aj,Ak,Ag,Ai){Ai=Ai||false;var Ah=this.dataSbc;var Al,An;if(Ah===true){An=Aj;Al=Ak;}else{Al=Aj;An=Ak;}var Am=this.data&&this.data[Al]&&this.data[Al][An];if(Am){return{Row:Am[Ag].R,Col:Am[Ag].C};}return{Row:-1,Col:-1};},getTextLabel:function X(As,Ak,Al,Au){var At=this.getGraphCell(As,Ak),Ah=this.getChartInfo(),Ao,Ai,Ar,Ag,An,Aj,Aq;if(At!==null&&At!==undefined){Ar=At.getGMCtr();if(Ah.isPie){var Ap=At.getSinglePieDPs()[Al];var Am=Ap.getSliceLabel(Au);if(Am.length===0){return"";}An=Ar.getSliceByAttrsID();Aj=An[An.length-1];Aq=U.find(Am,"tid",Aj);return Am[Aq].n;}Ao=At.getIdentity();Ai=Ao.getSelectedObjectBreakByInfo(false);if(Ai.length===0){return"";}Ag=Ar.getBreakByAttrsID();Aj=Ag[Ag.length-1];Aq=U.find(Ai,"tid",Aj);if(Aq>=0){return Ai[Aq].v;}}return"";},isGridPieSplitAlongXAxis:function(){var Aj=this.getChartInfo(),Ah=this.lds,Ag=Ah.gmm,Ai=Ag.gmCtr;if(Aj.isPie&&Aj.tp===P.GRID){return Ai.isMetricNamesInZone("XAxis");}return undefined;},getMetricIndexForSeries:function(Ag){var Aj=this.getGroupCount(),Ai,Ah;for(Ah=0;Ah<Aj;Ah++){Ai=this.getGraphCell(Ag,Ah);if(!Ai.isFaked){break;}}return Ai.getMetricIndex(0);},getShapeBySeries:function(Ah){var Ai=this.lds.gmm.gmCtr,Ag;if(Ai.enableCombiChart===false){return Ai.markerShape;}Ag=this.getMetricIndexForSeries(Ah);return Ai.getOnTheFlyShapeForMetric(Ag);},getPrioritizedSeriesIndex:function(){var Al=this.lds.gmm.gmCtr,Ak=this.getSeriesCount(),Ai,Ag,Aj=[];if(Al.enableCombiChart===false){var Ah=[];for(Ai=0;Ai<Ak;Ai++){Ah.push(Ai);}return Ah;}Ag=this.getSeriesByShape();Aj=Aj.concat(Ag.Area);Aj=Aj.concat(Ag.Bar);Aj=Aj.concat(Ag.Circle);Aj=Aj.concat(Ag.Square);Aj=Aj.concat(Ag.Line);Aj=Aj.concat(Ag.Tick);return Aj;},getSeriesByShape:function(Ah){var Am=this.getSeriesCount(),Aj,Ai,Ag,Ak={Tick:[],Line:[],Bar:[],Area:[],Circle:[],Square:[],Pie:[]};function Al(Ao){var An;switch(Ao){case a.TICK:An=Ak.Tick;break;case a.LINE:An=Ak.Line;break;case a.BAR:An=Ak.Bar;break;case a.AREA:An=Ak.Area;break;case a.CIRCLE:An=Ak.Circle;break;case a.SQUARE:An=Ak.Square;break;case a.PIE:An=Ak.Pie;break;}return An;}for(Aj=0;Aj<Am;Aj++){Ai=this.getShapeBySeries(Aj);Ag=Al(Ai);Ag.push(Aj);}if(Ah===undefined){return Ak;}return Al(Ah);},getValueAxisBySeries:function(Ah){var Aj=this.lds.gmm.gmCtr,Ag,Ai;Ag=this.getMetricIndexForSeries(Ah);Ai=Aj.getPrimaryMetrics();if(Ai.indexOf(Ag)>=0){return 0;}return 1;},getSeriesByValueAxis:function(Al){var Am=this.lds.gmm.gmCtr,Ai,Ah=this.getSeriesCount(),Aj,Ag=[],Ak;Ak=(Al===0)?Am.getPrimaryMetrics():Am.getSecondaryMetrics();for(Aj=0;Aj<Ah;Aj++){Ai=this.getMetricIndexForSeries(Aj);if(Ak.indexOf(Ai)!==-1){Ag.push(Aj);}}return Ag;},testDataProvider:function Ac(){var Ah=this.getSeriesCount(),Aj=this.innerGetGroupCount(),Ao=this.getMetricsCount(),An=this.lds,Am=An.cci,Ai=An.cri,Ak,Aq,Al;O.visPrint("");O.visPrint("======================chart with index: ("+Ai+", "+Am+")=============================");for(Ak=0;Ak<Ao;Ak++){var Ag=this.getOneMetricName(Ak);O.visPrint("single metric name of "+Ak+" is: "+Ag);}for(Aq=0;Aq<Ah;Aq++){for(Al=0;Al<Aj;Al++){var Ap=this.innerGetGraphCell(Aq,Al);if(!Ap.isFaked){Ap.testGraphCell();}}}},getResizerLineThickNess:function b(){var Ah=this.lds.gmm,Aj=Ah.gmCtr,Ag=Aj.view,Ai=Ag.getHTML5Props();return{MATRIX_VLINE_THICKNESS:parseInt(Ai.MATRIX_LINE_V.borderWidth,10)||1,MATRIX_HLINE_THICKNESS:parseInt(Ai.MATRIX_LINE_H.borderWidth,10)||1,AXIS_X_THICKNESS:parseInt(Ai.AXIS_LINE_X.borderWidth,10)||1,AXIS_Y_THICKNESS:parseInt(Ai.AXIS_LINE_Y.borderWidth,10)||1};},getChartRowColCount:function AH(){var Ag=this.lds.gmm;return{cir:Ag.cir,cic:Ag.cic};},isCompactMode:function x(){var Ag=this.lds.gmm,Ah=Ag.gmCtr;return Ah.isCompactMode();}});mstrmojo.gm.GMEnhancedDataProvider=mstrmojo.declare(mstrmojo.gm.GMDataProvider,null,{scriptClass:"mstrmojo.gm.GMEnhancedDataProvider",fwdSteps:0,bwdSteps:0,oriGroupCount:-1,getGroupCount:function(){if(AY){return this._super();}var Ag=this.bwdSteps,Ah=this.fwdSteps;if(!this.bwdEnabled){Ag=0;}if(!this.fwdEnabled){Ah=0;}this.oriGroupCount=this._super();if(!this.fwdSteps&&!this.bwdSteps){return this.oriGroupCount;}return Ag+this.oriGroupCount+Ah;},getGraphCell:function h(Ak,Ai,Ah){if(AY||Ah===true){return this._super(Ak,Ai);}var Ag=this.bwdSteps,Al=this.fwdSteps,Aj;if(!this.bwdEnabled){Ag=0;}if(!this.fwdEnabled){Al=0;}if(this.oriGroupCount<0){this.getGroupCount();}if(!this.fwdSteps&&!this.bwdSteps){Aj=this._super(Ak,Ai);return Aj;}if(Ai<Ag||Ai>=(this.oriGroupCount+Ag)){return new AC({gIdx:Ai,dp:this,isFaked:true});}Aj=this._super(Ak,Ai-Ag);return Aj;},getClusterDataGroup:function y(){if(!!!this.mClusterDataGroup){var Ag=this.lds.gmm,Ah=Ag.gmCtr;if(Ah.clusteredBarSpecialCase){this.mClusterDataGroup=this.innerGetSeriesCount();}else{this.mClusterDataGroup=1;}}return this.mClusterDataGroup;},getSeriesCount:function Af(){var Ag=this.lds.gmm,Ah=Ag.gmCtr;if(!Ah.clusteredBarSpecialCase){return this.innerGetSeriesCount();}return this.getGroupCount()*this.getClusterDataGroup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.hash");mstrmojo.requiresCls("mstrmojo.VisEnum");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Vector2D","Point2D","CEModuleMain","TripleId","FormatLine","JSONCanvas","SVGCanvas","GraphMatrixContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumPictureFormatType","EnumGraphMajorType","EnumLineJoinType","EnumLineStyle","EnumImageUsage","EnumDSSExtraGraphObject","EnumChartStyle","EnumGraphMatrixMajorGraphType","EnumGraphMatrixThemeType","EnumDssGraphGridChartUniformColorMode","EnumAttachedPointsStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumVariantBool","EnumDSSGraphFillEffect");var CI=mstrmojo.chart,Bu=CI.enums,e=Bu.EnumPictureFormatType,h=Bu.EnumGraphMajorType,A5=Bu.EnumLineJoinType,AY=Bu.EnumImageUsage,Ao=CI.common.Utility,l=CI.gModuleMain,CE=CI.gNullTripleId,Ab=CI.gNullSeriesId,M=CI.gNullGroupId,Bc=Bu.EnumLineStyle,Bm=Bu.EnumDSSExtraGraphObject,H=Bu.EnumChartStyle,b=Bu.EnumGraphMatrixMajorGraphType,BE=Bu.EnumGraphMatrixThemeType,C=Bu.EnumAttachedPointsStyle,Al=mstrmojo.VisEnum.ControlType,Ai=mstrmojo.hash;var A1=700,Bb=400,Af=-16383,J=16383,BW=-16383,AC=16383,AG=500,At=0.1667,BS=96,U=72;var CC=mstrmojo.chart.model,Ax=CC.enums,Bi=Ax.EnumDSSGraphType,Bk=Ax.EnumDSSGraphProperty,Bl=Ax.EnumDSSGraphObject,a=Ax.EnumDSSGraphFillBevelEffect,B3=Ax.EnumDSSGraphFillEffect;var x=[],AS=new CI.TripleId();var BZ=mstrmojo.chart.ChartContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartContext",mBaseLayerObject:null,mPropertyMap:null,mGraphWidth:l.mDefaultGraphWidth,mGraphHeight:l.mDefaultGraphHeight,mGraphType:Bi.DssGraphTypeReserved,mDataset:null,mFormatManager:null,mCanvas:null,mCanvasInfo:null,caKeyMap:null,mLineJoinType:A5.LJT_MITER,mIsLineWidthOdd:false,mAbsoluteFontLineSize:true,mIsFontAntiAlias:true,mFontScaleRatio:1,mAxisAutoNumberFormat:null,mSelectedAxisAutoNumberFormat:null,mThresholdColorCache:{},globalFormats:null,mManualLayoutMode:false,mRecalculateFrame:true,mIsValueAxisShown:true,mUseAnimation:false,mIsTimeSeriesChart:false,mIsUniformAxisMode:false,mIsEntireChart:true,mIsGraphMatrix:false,mThemeType:BE._black,mUniformAxisContext:null,mpGraphMatrixContext:null,mPartialRendering:false,mRenderingWindow:null,mImageUsage:AY.GENERAL,mImageFormat:e.SVG,mDebugUseNewProperties:true,mTimers:[],mUseTimer:false,init:function CP(CX){this._super(CX);this.caKeyMap={c1:"x1",c2:"x1"};this.mUseTimer=CX.UseTimer||false;this.mGraphWidth=l.mDefaultGraphWidth;this.mGraphHeight=l.mDefaultGraphHeight;this.mDataset=CX.DataSet||CX.mDatasetPtr||null;this.mThemeType=BE._black;this.mSelectedAxisAutoNumberFormat={Array:[],Format:null};},getUtiliy:function An(){return mstrmojo.chart.common.Utility;},populateCanvas:function AZ(CY){CY=CY||false;if(CY){this.mCanvas=null;}if(!!this.mCanvas){return ;}var CX="SVG";if(this.mCanvasInfo){CX=this.mCanvasInfo.type||"SVG";delete this.mCanvasInfo.type;}else{this.mCanvasInfo={type:"SVG",gradPrefix:"gmGrad",mGradientCount:0,seriesDrawOrder:this.mDataset.GetSeriesIndexByPriority()};}switch(CX){case"JSON":this.mCanvas=new CI.JSONCanvas({});break;default:this.mCanvas=new CI.SVGCanvas(this.mCanvasInfo);break;}this.mCanvasInfo=null;},startTimer:function Bw(CY){if(this.mUseTimer){var CX=CY.functionName+": "+CY.purpose;console.time(CX);this.mTimers.push(CX);}},endTimer:function By(){if(this.mUseTimer){var CX=this.mTimers.pop();if(CX){console.timeEnd(CX);}}},vdWidth:function Bp(CX){return Math.floor(CX*this.mGraphWidth/A1+0.5);},vdHeight:function CD(CY){var CX=this.mGraphHeight;if(this.mIsUniformAxisMode&&!this.mIsEntireChart){CX=this.mUniformAxisContext.mGraphHeight;}return Math.floor(CY*CX/Bb+0.5);},NeedAdjustedLinePath:function Bn(){var CX=this.mImageFormat;return this.mIsLineWidthOdd&&(CX!==e.PDF);},SetGraphSize:function Aa(CY,CX){if(CY>0&&CX>0){this.mGraphWidth=CY;this.mGraphHeight=CX;if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}}},GetGraphType:function A7(){return this.mGraphType;},dialogSizeToPixelSize:function z(CX){return CX*Math.min(this.mGraphWidth,this.mGraphHeight)/2000;},DrawPolygon:function Bz(CZ,Cc,Ca,Cb,CY){if(this.mImageFormat===e.SVG){return ;}if((Cc===undefined)||(Cc===null)){Cc=true;}Ca=Ca||false;Cb=Cb||null;CY=CY||Bc.LS_SOLID;if(CZ.length<3){return ;}this.NewPath();if(Cc&&this.NeedAdjustedLinePath()){var CX=this.hAdjustLinePath(CZ);this.DrawPolyLine(CX,false,Ca,Cb,CY);}else{this.DrawPolyLine(CZ,false,Ca,Cb,CY);}this.ClosePath();},DrawStraightLine:function Ad(CZ,CX){if(this.mImageFormat===e.SVG){return ;}this.NewPath();if(this.NeedAdjustedLinePath()){var CY=0,Ca=0;if(CZ.x===CX.x){CY=0.5;}if(CZ.y===CX.y){Ca=0.5;}this.hMoveTo(CZ.x+CY,CZ.y+Ca,true);this.hLineTo(CX.x+CY,CX.y+Ca,true);}else{this.hMoveTo(CZ.x,CZ.y,true);this.hLineTo(CX.x,CX.y,true);}},DrawPolyLine:function AT(Ce,Cd,Ca,CX,Cc){if(this.mImageFormat===e.SVG){return ;}if((Cd===undefined)||(Cd===null)){Cd=true;}Ca=Ca||false;CX=CX||null;Cc=Cc||Bc.LS_SOLID;if(Cc===Bc.LS_GRADIENT){Cc=Bc.LS_SOLID;}var Cf=Ce.length,Cb,CY,Cg;if(Cf<=0){return ;}var CZ;if(this.NeedAdjustedLinePath()){CZ=this.hAdjustLinePath(Ce);}Cf=CZ.length;this.NewPath();this.hMoveTo(CZ[0].x,CZ[0].y,Cd,Ca,CX);CY=0;for(Cb=1;Cb<Cf;++Cb){if(Cc===Bc.LS_SOLID){this.hLineTo(CZ[Cb].x,CZ[Cb].y,Cd,Ca,CX);}else{Cg=CI.gLinePatterns[Cc];this.DrawDashedLine(CZ[CY],CZ[Cb],Cg);}CY=Cb;}},DrawDashedLine:function CK(CZ,Cg,Ce){if(this.mImageFormat===e.SVG){return ;}var Ca,Ch,Cf,Cb,Ci,CX=0,Cc=0,Cd,CY;Ca=Math.sqrt((CZ.x-Cg.x)*(CZ.x-Cg.x)+(CZ.y-Cg.y)*(CZ.y-Cg.y));Ch=(Cg.x-CZ.x)/Ca;Cf=(Cg.y-CZ.y)/Ca;Cd=Ce.length;Cb=CZ.x;Ci=CZ.y;while(CX<Ca){CY=Math.min(Ce[Cc%Cd],Ca-CX);++Cc;CX+=CY;if(Cc%2===1){this.MoveTo(Cb,Ci);}Cb+=CY*Ch;Ci+=CY*Cf;if(Cc%2===1){this.LineTo(Cb,Ci);}}},isParetoChart:function BN(){return this.mGraphType===Bi.DssGraphTypePareto||this.mGraphType===Bi.DssGraphTypePareto_Percent;},isCombinationChart:function S(){var CX=this.GetGraphMatrixContext();return this.mIsGraphMatrix&&CX.isCombinationChart();},hasBarAreaInComb:function A3(){if(this.isCombinationChart()===false){return false;}var CX=this.mDatasetPtr.GetSeriesByShape();return CX.Bar.length>0||CX.Area.length>0;},getFontScale:function Ah(){if(this.mAbsoluteFontLineSize){return this.mFontScaleRatio;}return 1;},vdRect:function u(CX){return(new CI.Rect2D({x:this.vdWidth(CX.x),y:this.vdHeight(CX.y),width:this.vdWidth(CX.width),height:this.vdHeight(CX.height)}));},vdPoint:function CJ(CX){return(new CI.Point2D({x:this.vdWidth(CX.x),y:this.vdHeight(CX.y)}));},vdFontSize:function B6(CX){var CZ=CX;if(this.mIsGraphMatrix){return CZ;}if(!this.mAbsoluteFontLineSize){CZ=this.vdHeight(CZ);}if(!this.mIsTimeSeriesChart){CZ=this.PtSizeToPixelSize(CZ);CZ*=this.getFontScale();if(this.mIsGraphMatrix){var CY=this.mDataset.GetZoomScale();CZ=CZ*CY+0.5;}if(CZ===0){CZ=1;}}return CZ;},vdLineWidth:function BA(CY){var CX=CY;if(!this.mAbsoluteFontLineSize){CX=this.vdHeight(CX);}CX=this.PtSizeToPixelSize(CX);CX=Math.floor(CX/100+0.5);return CX;},TDGToMSTRPoint:function BO(CZ,CY){var CX,Ca;CX=Math.floor((CZ-Af)*this.mGraphWidth/(J-Af)+0.5);Ca=Math.floor((AC-CY)*this.mGraphHeight/(AC-BW)+0.5);return(new CI.Point2D({x:CX,y:Ca}));},setCanvas:function AX(CX){this.mCanvas=CX;},saveState:function Be(){this.mCanvas.saveState();},Rotate:function CG(CX,CY){this.mCanvas.Rotate(CX,CY);},Scale:function BY(CX,CY){this.mCanvas.Scale(CX,CY);},RestoreState:function X(){this.mCanvas.RestoreState();},Clip:function Bq(){this.mCanvas.Clip();},DrawRectangle:function N(CX,CY){if(this.mImageFormat===e.SVG){return ;}this.NewPath();if(CY&&this.NeedAdjustedLinePath()){this.mCanvas.AddRect(CX.x+0.5,CX.y+0.5,CX.width,CX.height);}else{this.mCanvas.AddRect(CX.x,CX.y,CX.width,CX.height);}},FinishTextBoundingBox:function L(CY,CX,Ca){var CZ=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){this.mCanvas.CreateSVGTextBoundingBox(CY,CX,Ca,CZ);}},FinishDrawCircle:function A8(CY,CZ){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CX=this.hGetIdentity(CZ.mSeriesId,CZ.mGroupId);this.mCanvas.CreateSVGCircle(CY.x,CY.y,CY.r,CX);}},FinishDrawRect:function As(CY,CZ){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CX;if(CZ.mObjectId===Bl.DssGraphDataMarker){CX=this.hGetIdentityEx(CZ.mSeriesId,CZ.mGroupId,"marker");}else{CX=this.hGetIdentity(CZ.mSeriesId,CZ.mGroupId);}if(this.NeedAdjustedLinePath()){CY.x=parseInt(CY.x)===CY.x?CY.x+0.5:CY.x;CY.y=parseInt(CY.y)===CY.y?CY.y+0.5:CY.y;}this.mCanvas.CreateSVGRect(CY.x,CY.y,CY.width,CY.height,CX);}},FinishDrawPieSlice:function B8(CY,Cc,CX,Cb,Ce,Cd,Ca){var CZ;if(Cd===undefined){Cd=false;}if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Ce.angleByIndex!==undefined){CZ=this.hGetPieIdentity(Ce.mSeriesId,Ce.mGroupId,Ce.angleByIndex,Ce.sliceById);}else{CZ=this.hGetIdentity(Ce.mSeriesId,Ce.mGroupId);}if(Cd){this.mCanvas.CreateSVGCircle(CY.x,CY.y,Cc,CZ,Ca,this.mThemeType===BE._white);}else{this.mCanvas.CreateSVGSector(CY.x,CY.y,Cc,CX,Cb,CZ,Ca,this.mThemeType===BE._white);}}},FinishDrawRingPieSlice:function t(CY,Cc,Cb,CX,Ca,Cd){var CZ;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Cd.angleByIndex!==undefined){CZ=this.hGetPieIdentity(Cd.mSeriesId,Cd.mGroupId,Cd.angleByIndex,Cd.sliceById);}else{CZ=this.hGetIdentity(Cd.mSeriesId,Cd.mGroupId);}this.mCanvas.CreateSVGRingSector(CY.x,CY.y,Cc,Cb,CX,Ca,CZ);}},FinishDrawRing:function BI(Cc,Cb,CX,CY,CZ){CZ=CZ||false;var Ca;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(CZ){Ca=this.hGetPieIdentity(CY.mSeriesId,CY.mGroupId,CY.angleByIndex,CY.sliceById);}else{Ca=this.hGetIdentity(CY.mSeriesId,CY.mGroupId);}this.mCanvas.CreateSVGRing(Cc.x,Cc.y,Cb,CX,Ca);}},FinishDrawPolyline:function CT(Cl,CY,Ch,Cf,CZ,Ci,Cb){var Cd=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){Ch=Ch||false;var Ck=0,Ce=1,Cn=2,Cj=3,Cc=4,Cm,Cg=CY.mObjectId,Ca=this.mCanvas;var CX=Cl;if(this.NeedAdjustedLinePath()){CX=this.hAdjustLinePath(Cl);}switch(Cg){case Bl.DssGraphUserLine1:case Bl.DssGraphUserLine2:case Bl.DssGraphUserLine3:case Bl.DssGraphUserLine4:Cf=this.hGetIdentityEx(Cg-Bl.DssGraphUserLine1,0,"originLine");if(Cf){Cm=[Cf];}else{Cm=[];}Ca.CreateSVGPolyLine(CY.mSeriesId,CX,Cm,Cc);break;case Bl.DssGraphO1Major:case Bl.DssGraphO2Major:case Bl.DssGraphY1Major:case Bl.DssGraphY2Major:case Bl.DssGraphX1Major:case Bl.DssGraphX2Major:case Bl.DssGraphO1Minor:case Bl.DssGraphO2Minor:case Bl.DssGraphY1Minor:case Bl.DssGraphY2Minor:case Bl.DssGraphX1Minor:case Bl.DssGraphX2Minor:Cm=[];Ca.CreateSVGPolyLine(CY.mSeriesId,CX,Cm,Cn);break;case Bl.DssGraphO1Body:case Bl.DssGraphO2Body:case Bl.DssGraphX1Body:case Bl.DssGraphX2Body:case Bl.DssGraphY1Body:case Bl.DssGraphY2Body:Cm=[];Ca.CreateSVGPolyLine(CY.mSeriesId,CX,Cm,Cj);break;case Bl.DssGraphTrendLine:Ca.CreateSVGPolyLineForTRLine(Cl,Cd,Cf,true,CZ,Ci,Cb);break;default:if(Ch){Cm=[];Ca.CreateSVGPolyLine(CY.mSeriesId,CX,Cm,Ck);}else{Cm=this.hGetIdentities(CY.mSeriesId,CY.mGroupId,Cl.length);Ca.CreateSVGPolylineWithCircles(CY.mSeriesId,CX,Cm);}break;}}},FinishDrawTickerShape:function B0(Cb,CZ,Cc){var Ca=[Cb,CZ],CX=this.mCanvas;if(CX instanceof mstrmojo.chart.SVGCanvas){var CY=this.hGetIdentities(Cc.mSeriesId,Cc.mGroupId,1);CX.CreateSVGPolyLine(Cc.mSeriesId,Ca,CY,5);}},FinishDrawStraightLine:function Y(CY,Cd,CX,Cb,Cc){var Ca=this.mDataset.GetSeriesCount(),Ce=[CY],CZ=this.mCanvas;Ce.push(Cd);if(this.NeedAdjustedLinePath()){Ce=this.hAdjustLinePath(Ce);}if(CZ instanceof mstrmojo.chart.SVGCanvas){if(Cb){if(CX.mObjectId===Bl.DssGraphTrendLine){CZ.CreateSVGPolyLineForTRLine(Ce,Ca,Cb,true,CY,Cc,Cd);}else{if(CX.mObjectId===Bl.DssGraphReferenceLine){CZ.CreateSVGPolyLineForTRLine(Ce,Ca,Cb,false,CY,Cc,Cd);}}}else{switch(CX.mObjectId){case Bl.DssGraphO1Body:case Bl.DssGraphO2Body:case Bl.DssGraphX1Body:case Bl.DssGraphX2Body:case Bl.DssGraphY1Body:case Bl.DssGraphY2Body:var Cf=[];CZ.CreateSVGPolyLine(CX.mSeriesId,Ce,Cf);return ;}Cf=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,1);Cf.push(Cf[0]);CZ.CreateSVGPolylineWithCircles(CX.mSeriesId,Ce,Cf);}}},FinishDrawPolygon:function Aq(Cc,Cd,Cb){var CY,CZ=this.mCanvas,Ca=Cc.length;if(Ca<3){return ;}if(CZ instanceof mstrmojo.chart.SVGCanvas){var CX=Cc;if(this.NeedAdjustedLinePath()){CX=this.hAdjustLinePath(Cc);}switch(Cd){case C.NORMAL:CY=this.hGetIdentity(Cb.mSeriesId,Cb.mGroupId);CZ.CreateSVGPolygon(Cb.mSeriesId,CX,CY);break;case C.TOOLTIP_UPPER:if((Ca&1)!==0){return ;}CY=this.hGetIdentities(Cb.mSeriesId,Cb.mGroupId,Ca/2);CZ.CreateSVGPolygonWithCircles(Cb.mSeriesId,CX,CY);break;case C.TOOLTIP_U2L:if((Ca&1)!==0){return ;}CY=this.hGetIdentities(Cb.mSeriesId,Cb.mGroupId,Ca/2);CZ.CreateSVGPolygonWithRects(Cb.mSeriesId,CX,CY);break;case C.TOOLTIP_TRAPEZOID:if((Ca&1)!==0){return ;}CY=this.hGetIdentities(Cb.mSeriesId,Cb.mGroupId,Ca/2);CZ.CreateSVGPolygonWithTrapezoid(Cb.mSeriesId,CX,CY);break;default:CZ.CreateSVGPolygon(Cb.mSeriesId,CX);break;}}},allowOverlapBetweenDatalabels:function(){var CX=this.mDataset;return CX&&CX.allowDatalabelOverlap();},hGetLabelIdentity:function A9(Ca){var CX={identity:null,type:"data-label"};switch(Ca.mObjectId){case Bl.DssGraph2DO1Label:case Bl.DssGraph2DO2Label:case Bl.DssGraphY1Label:case Bl.DssGraphY2Label:case Bl.DssGraphX2Label:case Bl.DssGraphX1Label:CX.type="axis-text";break;case Bl.DssGraphUserLabel1:case Bl.DssGraphUserLabel2:case Bl.DssGraphUserLabel3:case Bl.DssGraphUserLabel4:var CZ=Ca.mObjectId-Bl.DssGraphUserLabel1;CX.identity=this.hGetIdentityEx(CZ,0,"origin-label");CX.type=CZ<=1?Al.GM_ORIGIN_LABEL_H:Al.GM_ORIGIN_LABEL_V;break;case Bl.DssGraphRefLineText:CX.type="ref-label";break;case Bl.DssGraphTrendLineText:CX.type="trend-label";break;default:var CY=null;if(Ca.mSeriesId>=0&&Ca.mGroupId>=0){if(Ca.angleByIndex!==undefined){CY=this.hGetPieIdentityEx(Ca.mSeriesId,Ca.mGroupId,Ca.angleByIndex,Ca.sliceById,"data-label");}else{CY=this.hGetIdentityEx(Ca.mSeriesId,Ca.mGroupId,"data-label");}}CX.identity=CY;break;}return CX;},FinishDrawText:function n(Cb,Ca){var CY=this.mCanvas;if(CY instanceof mstrmojo.chart.SVGCanvas){switch(Cb.mObjectId){case Bl.DssGraph2DO1Label:case Bl.DssGraph2DO2Label:case Bl.DssGraphY1Label:case Bl.DssGraphY2Label:case Bl.DssGraphX2Label:case Bl.DssGraphX1Label:CY.CreateSVGAxisText(Cb.mSeriesId,Ca.Tooltip,Ca.Identities);break;case Bm.DssGraphBanner:if(!Ca.Identities){Ca.Identities=this.hGetIdentities(Cb.mSeriesId,Cb.mGroupId,1);}CY.CreateSVGBannerText(Cb.mSeriesId,Ca.Identities);break;default:var CX=this.hGetLabelIdentity(Cb);var CZ=this.mDataset.GetSeriesCount();if(CX.type==="ref-label"){CX.identity=Ca.Identity;}CY.CreateSVGGenericText(CZ,CX.identity,CX.type);break;}}},FinishDrawCurves:function G(Cg,Cd,Cc,CX,Ce,CZ){var Ca=this.mDataset.GetSeriesCount(),Cf=Cd.mSeriesId,CY=this.mCanvas,Cb;if(CY instanceof mstrmojo.chart.SVGCanvas){CY.CreateSVGCurves(Cg,Ca,Cf,Cc,Cd.mObjectId===Bl.DssGraphTrendLine,CX,Ce,CZ);}},hGetIdentities:function BV(Ca,Cb,Cc){var CZ=[],CY;for(CY=0;CY<Cc;++CY){var CX=this.hGetIdentity(Ca,Cb+CY);CZ.push(CX);}return CZ;},hGetPieIdentity:function Az(Ca,CY,CX,CZ){if(Ca<0){Ca=0;}if(CY<0){CY=0;}if(CX===undefined||CX<0){CX=0;}if(CZ===undefined||CZ<0){CZ=0;}return this.mDataset.dataProvider.getGraphCell(Ca,CY).getSliceIdentity(CX,CZ);},hGetIdentity:function AL(CX,CY){if(CX<0){CX=0;}if(CY<0){CY=0;}return this.mDataset.dataProvider.getGraphCell(CX,CY).getIdentity();},hGetIdentityEx:function P(Ca,Cc,CZ){CZ=CZ||"generic";if(Ca<0){Ca=0;}if(Cc<0){Cc=0;}var CY=this.mDataset.dataProvider;switch(CZ){case"data-label":return CY.getGraphCell(Ca,Cc).getDataLabelIdentity();case"marker":return CY.getGraphCell(Ca,Cc).getMarkerIdentity();case"originLine":case"origin-label":var Cb=["y1","y2","x1","x2"],CX=Cb[Ca]||"y1";if(CZ==="originLine"){return CY.getAxisOriginLineIdentity(CX);}return CY.getAxisOriginLabelIdentity(CX);default:return this.hGetIdentity(Ca,Cc);}},hGetPieIdentityEx:function CF(Ce,CY,CX,Cb,CZ){if(Ce<0){Ce=0;}if(CY<0){CY=0;}if(CX===undefined||CX<0){CX=0;}if(Cb===undefined||Cb<0){Cb=0;}var Cc=this.mDataset;switch(CZ){case"data-label":var Ca=Cc.dataProvider.getGraphCell(Ce,CY);if(!!Ca){if(Ca.isFaked){Ca=Cc.dataProvider.innerGetGraphCell(Ce,CY);}var Cd=Ca.getSinglePieDPs();if(!!Cd){return Cd[CX].getDataLabelIdentity(Cb,true);}}break;default:return this.hGetPieIdentity(Ce,CY,CX,Cb);}},getIdentity:function Av(CZ,Cc,Cg){Cg=Cg||"shape";var Ce=[],Cf;if(Cc==="pie"){var Cb=this.mDataset,CX=0,CY=0,Cd,Ca;if(Cb){CX=Cb.GetPieCountAtOneDataPoint(CZ.mSeriesId,CZ.mGroupId);CY=Cb.GetPieSliceCount(CZ.mSeriesId,CZ.mGroupId);}for(Cd=0;Cd<CX;Cd++){for(Ca=0;Ca<CY;Ca++){Cf=this.hGetPieIdentityEx(CZ.mSeriesId,CZ.mGroupId,Cd,Ca,Cg);Ce.push(Cf);}}}else{Cf=this.hGetIdentityEx(CZ.mSeriesId,CZ.mGroupId,Cg);Ce.push(Cf);}return Ce;},hAdjustLinePath:function AV(CZ){var Cb=CZ.length,Cc,CY,Ca;var CX=Ai.cloneArray(CZ);Cc=Cb-1;for(Ca=0;Ca<Cb;++Ca){CY=(Ca+1===Cb)?0:Ca+1;if(CZ[Ca].x===CZ[Cc].x||CZ[Ca].x===CZ[CY].x){CX[Ca].x+=0.5;}if(CZ[Ca].y===CZ[Cc].y||CZ[Ca].y===CZ[CY].y){CX[Ca].y+=0.5;}Cc=Ca;}return CX;},NewPath:function D(){this.mCanvas.NewPath();},ClosePath:function AD(){this.mCanvas.ClosePath();},SetFontAntiAlias:function CH(CX){this.mIsFontAntiAlias=CX;},SaveSurfaceToObject:function Ay(CX){return this.mCanvas.SaveToObject(CX);},CalculateDepthOffset:function Ae(Ca,CY,Cf){var Cb=0,CZ=Math.cos(l.DegreeToRadian(CY)),Cg=Math.sin(l.DegreeToRadian(CY)),Ce,Cd,Cc,CX;if(Cf===undefined){Cf=false;}if(Cf){Cb=1/Math.sqrt(Math.pow(this.mGraphWidth*CZ,2)+Math.pow(this.mGraphHeight*Cg,2));}else{Cb=At/AG;}Cc=this.mGraphWidth*Cb*Ca;CX=this.mGraphHeight*Cb*Ca;Ce=Math.floor(Cc*CZ+0.5);Cd=-Math.floor(CX*Cg+0.5);return{OffsetX:Ce,OffsetY:Cd};},hApplyEnhancedSeriesEffect:function O(CY,CZ){if(this.mIsGraphMatrix){return ;}var CX=CY.EnhancedSeriesEffect,Ca,Cc;switch(this.mGraphType){case Bi.DssGraphTypePies:case Bi.DssGraphTypeMultiple_Pies:case Bi.DssGraphTypeMultiple_Proportional:case Bi.DssGraphTypeX_Y_Scatter:case Bi.DssGraphTypeDualAxis_X_Y_Scatter:case Bi.DssGraphTypeX_Y_Scatter_with_Labels:case Bi.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Bi.DssGraphTypeBubble:case Bi.DssGraphTypeBubble_DualAxis:case Bi.DssGraphTypeBubble_With_Labels:case Bi.DssGraphTypeBubble_DualAxis_With_Labels:CX.call(CY,204,a.DssGraphFillBevelSphere,0,270,10);break;case Bi.DssGraphTypeRing_Pie:case Bi.DssGraphTypeMultiple_Ring_Pies:case Bi.DssGraphTypeMultiple_Proportional_Ring_Pies:CX.call(CY,204,a.DssGraphFillBevelDonut,50,0,30);break;default:var Cb=Bu.EnumCollectionType;switch(CZ){case Cb.CT_VERTICAL_AREA:CX.call(CY,204,a.DssGraphFillBevelSphere,0,270,20);break;case Cb.CT_VERTICAL_BAR:Cc=204;Ca=this.GetProperty(Bk.DssGraphDepthMode,CE);if(this.isVerticalBar()&&Ca){Cc=255;}CX.call(CY,Cc,a.DssGraphFillBevelDonut,50,0,30);break;case Cb.CT_HORIZONTAL_AREA:CX.call(CY,204,a.DssGraphFillBevelSphere,0,180,20);break;case Cb.CT_HORIZONTAL_BAR:CX.call(CY,204,a.DssGraphFillBevelSphere,0,270,30);break;case Cb.CT_DEPTH_LINE_OR_LINE_MARKER:CX.call(CY,204,a.DssGraphFillBevelSphere,0,270,10);break;default:break;}break;}},GetLocation:function w(CY){var Ca,CZ,CX;Ca=this.GetProperty(CY,CE);if(Ca===null||Ca===undefined){return ;}CZ=this.TDGToMSTRPoint(Ca.Left,Ca.Top);CX=this.TDGToMSTRPoint(Ca.Right,Ca.Bottom);return new CI.Rect2D({x:CZ.x,y:CZ.y,width:CX.x-CZ.x,height:CX.y-CZ.y});},GetLocationRect:function CL(CZ){var CY,CX;CY=this.GetLocation(CZ);if(CY){CX=new CI.Rect2D({x:CY.Left,y:CY.Top,width:CY.Right-CY.Left,height:CY.Bottom-CY.Top});}return CX;},PutLocation:function A0(CX,CY){},GetProperty:function CO(CX,CY){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CX,this.MapObject(CY.mObjectId),CY.mSeriesId]);},GetLocalProperty:function BH(CX,CY){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CX,this.MapObject(CY.mObjectId),CY.mSeriesId]);},PutProperty:function o(CX,CY,CZ){if(this.mPropertyMap===null){this.mPropertyMap=new CI.common.MapStructure();}this.mPropertyMap.push([CX,this.MapObject(CY.mObjectId),CY.mSeriesId],CZ);if(CX===Bk.DssGraphType){this.mGraphType=CZ;}},normalDirection:function BL(Ca,CZ){var Cc=this.CalculateDepthOffset(1000,CZ),CY=Cc.OffsetX,Cd=Cc.OffsetY,CX=new CI.Vector2D({x:CY,y:Cd}),Cb=CX.CrossProduct(Ca);if(Cb===0){return 0;}return Cb>0?1:-1;},IsVertical:function f(){switch(this.mGraphType){case Bi.DssGraphTypeVertical_Area_Absolute:case Bi.DssGraphTypeVertical_Area_Stacked:case Bi.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Area_Percent:case Bi.DssGraphTypeVertical_Bar_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_Stacked:case Bi.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Bar_Percent:case Bi.DssGraphTypeVertical_Line_Absolute:case Bi.DssGraphTypeVertical_Line_Stacked:case Bi.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Line_Percent:case Bi.DssGraphTypeVertical_Bar_Absolute:case Bi.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bi.DssGraphTypeVertical_Line_DualAxis_Percent:case Bi.DssGraphTypeVertical_Area_DualAxis_Percent:case Bi.DssGraphTypeVertical_Bullet:case Bi.DssGraphTypeVertical_CategoryPies_Absolute:case Bi.DssGraphTypeVertical_CategoryPies_Percent:case Bi.DssGraphTypeVertical_CategoryPies_Stacked:case Bi.DssGraphTypeGrid_Pies:case Bi.DssGraphTypeScatter_Pies:case Bi.DssGraphTypeBubble_Pies:return true;}switch(this.GetGraphMajorType()){case h.GMT_BUBBLE:case h.GMT_SCATTER:case h.GMT_STOCK:return true;}return false;},IsDualAxis:function AA(){switch(this.mGraphType){case Bi.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bi.DssGraphTypeDualAxis_X_Y_Scatter:case Bi.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Bi.DssGraphTypeDualAxis_Polar_Coordinate_Chart:case Bi.DssGraphTypeDualAxis_Radar_Line:case Bi.DssGraphTypeDualAxis_Radar_Stacked_Area:case Bi.DssGraphTypeBubble_DualAxis:case Bi.DssGraphTypeHiLo_DualAxis_Stock_Chart:case Bi.DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:case Bi.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:case Bi.DssGraphTypeBubble_DualAxis_With_Labels:case Bi.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bk.DssGraphRadar_DualAxis_Radar_Stacked_Line:case Bk.DssGraphRadar_DualAxis_Radar_Area:case Bi.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bi.DssGraphTypeVertical_Line_DualAxis_Percent:case Bi.DssGraphTypeVertical_Area_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}},IsStackedChart:function BP(){switch(this.mGraphType){case Bi.DssGraphTypeVertical_Area_Stacked:case Bi.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Area_Stacked:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Bar_Stacked:case Bi.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Bar_Stacked:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Line_Stacked:case Bi.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Line_Stacked:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bi.DssGraphTypeRadar_Stacked_Area:case Bi.DssGraphTypeDualAxis_Radar_Stacked_Area:case Bi.DssGraphTypeRadar_Area_Stacked:case Bk.DssGraphRadar_Line_Stacked:case Bk.DssGraphRadar_DualAxis_Radar_Stacked_Line:return true;default:return false;}},IsPieChart:function Z(){if(this.mIsGraphMatrix){switch(this.GetGraphMatrixContext().mGraphType){case Bi.DssGraphTypeVertical_CategoryPies_Absolute:case Bi.DssGraphTypeVertical_CategoryPies_Percent:case Bi.DssGraphTypeVertical_CategoryPies_Stacked:case Bi.DssGraphTypeHorizontal_CategoryPies_Absolute:case Bi.DssGraphTypeHorizontal_CategoryPies_Percent:case Bi.DssGraphTypeHorizontal_CategoryPies_Stacked:case Bi.DssGraphTypeGrid_Pies:case Bi.DssGraphTypeScatter_Pies:case Bi.DssGraphTypeBubble_Pies:return true;default:return false;}}else{return this.GetGraphMajorType()===h.GMT_PIE;}},MapObject:function Bh(CX){if(CX===Bk.DssGraphPieSlice){return Bk.DssGraphRiser;}return CX;},SplitRect:function BT(Cb,CX,CZ,Cd,Cc){var Ca,CY;if(CX){Ca=Cb.height*CZ/100;Cd.Reset(Cb.x,Cb.y,Cb.width,Cb.height-Ca);Cc.Reset(Cb.x,Cb.y+Cd.height,Cb.width,Ca);}else{CY=Cb.width*CZ/100;Cd.Reset(Cb.x+CY,Cb.y,Cb.width-CY,Cb.height);Cc.Reset(Cb.x,Cb.y,CY,Cb.height);}},getAxisAutoNumberFormat:function AN(Ce,Cb,Cd){Cd=Cd||false;var CY=this.mDataset,Ca;if(Cb&&Cb.length){var CX=this.mSelectedAxisAutoNumberFormat;if(CX.Format!==null){var Cc=true,CZ=CX.Array;if(CZ&&CZ.length===Cb.length){for(Ca=0;Ca<CZ.length;CZ++){if(CZ[Ca]!==Cb[Ca]){Cc=false;break;}}}if(Cc){Ce.reset(CX.Format);return ;}}CY.getValueAxisNumberFormat(Ce,Cb,Cd);CX.Array=Cb.slice(0);CX.Format=new CI.ChartAdvFormat({ChartAdvFormat:Ce});}else{var Cf=this.mAxisAutoNumberFormat;if(Cf!==null){Ce.reset(Cf);}else{CY.getValueAxisNumberFormat(Ce);this.mAxisAutoNumberFormat=new CI.ChartAdvFormat({ChartAdvFormat:Ce});}}},GetGraphMajorType:function W(){switch(this.mGraphType){case Bi.DssGraphTypeVertical_Area_Absolute:case Bi.DssGraphTypeVertical_Area_Stacked:case Bi.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Area_Percent:case Bi.DssGraphTypeHorizontal_Area_Absolute:case Bi.DssGraphTypeHorizontal_Area_Stacked:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Area_Percent:case Bi.DssGraphTypeVertical_Bar_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_Stacked:case Bi.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Bar_Percent:case Bi.DssGraphTypeHorizontal_Bar_Side_by_Side:case Bi.DssGraphTypeHorizontal_Bar_Stacked:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Bar_Percent:case Bi.DssGraphTypeVertical_Line_Absolute:case Bi.DssGraphTypeVertical_Line_Stacked:case Bi.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Line_Percent:case Bi.DssGraphTypeHorizontal_Line_Absolute:case Bi.DssGraphTypeHorizontal_Line_Stacked:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Line_Percent:case Bi.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Bullet:case Bi.DssGraphTypeHorizontal_Bullet:case Bi.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bi.DssGraphTypeVertical_Line_DualAxis_Percent:case Bi.DssGraphTypeVertical_Area_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_CategoryPies_Absolute:case Bi.DssGraphTypeHorizontal_CategoryPies_Stacked:case Bi.DssGraphTypeHorizontal_CategoryPies_Percent:case Bi.DssGraphTypeVertical_CategoryPies_Absolute:case Bi.DssGraphTypeVertical_CategoryPies_Stacked:case Bi.DssGraphTypeVertical_CategoryPies_Percent:return h.GMT_CATEGORY;case Bi.DssGraphTypePies:case Bi.DssGraphTypeRing_Pie:case Bi.DssGraphTypeMultiple_Pies:case Bi.DssGraphTypeMultiple_Ring_Pies:case Bi.DssGraphTypeMultiple_Proportional:case Bi.DssGraphTypeMultiple_Proportional_Ring_Pies:case Bi.DssGraphTypePie_Bar:case Bi.DssGraphTypeRing_Pie_Bar:return h.GMT_PIE;case Bi.DssGraphTypeScatter_Pies:case Bi.DssGraphTypeX_Y_Scatter:case Bi.DssGraphTypeDualAxis_X_Y_Scatter:case Bi.DssGraphTypeX_Y_Scatter_with_Labels:case Bi.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return h.GMT_SCATTER;case Bi.DssGraphTypeBubble_Pies:case Bi.DssGraphTypeBubble:case Bi.DssGraphTypeBubble_DualAxis:case Bi.DssGraphTypeBubble_With_Labels:case Bi.DssGraphTypeBubble_DualAxis_With_Labels:return h.GMT_BUBBLE;case Bi.DssGraphTypeVertical_Bar_Absolute:case Bi.DssGraphTypeHorizontal_Bar_Absolute:return h.GMT_CATEGORY;case Bi.DssGraphTypeGrid_Pies:case Bi.DssGraphTypeGridChart:return h.GMT_GRID;case Bi.DssGraphTypeMaxDeskTopGraphTypes:return h.GMT_INVALID;default:return h.GMT_INVALID;}},isLegendByGroup:function CV(){return false;},isVerticalBar:function Bo(){switch(this.mGraphType){case Bi.DssGraphTypeVertical_Bar_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_Stacked:case Bi.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Bar_Percent:case Bi.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bi.DssGraphTypeVertical_Bullet:return true;default:return false;}},MoveTo:function BC(CX,Ca,CY,CZ){this.mCanvas.MoveTo(CX,Ca,CY,CZ);},BezierCurveTo:function Br(CZ,CY,Cc,Ca,CX,Cb){this.mCanvas.BezierCurveTo(CZ,CY,Cc,Ca,CX,Cb);},LineTo:function AE(CX,Ca,CY,CZ){this.mCanvas.LineTo(CX,Ca,CY,CZ);},hMoveTo:function p(CX,Cc,CY,CZ,Cb){var Ca;Ca=(CY&&this.NeedAdjustedLinePath())?0.5:0;this.MoveTo(CX+Ca,Cc+Ca,CZ,Cb);},hLineTo:function CM(CX,Cc,CY,CZ,Cb){var Ca;Ca=(CY&&this.NeedAdjustedLinePath())?0.5:0;this.LineTo(CX+Ca,Cc+Ca,CZ,Cb);},SetRGBAFill:function Bf(CY,CZ,CX,Ca){this.mCanvas.SetRGBAFillColor(CY,CZ,CX,Ca);},SetRGBAStroke:function CQ(CY,CZ,CX,Ca){this.mCanvas.SetRGBAStrokeColor(CY,CZ,CX,Ca);},FillPath:function AU(){this.mCanvas.FillPath();},StrokePath:function k(){this.mCanvas.StrokePath();},SetLineDash:function AQ(CX,CY){this.mCanvas.SetLineDash(CX,CY);},SetLineWidth:function B7(CX){this.mCanvas.SetLineWidth(CX);},SetFormatManager:function g(CY){var CX;this.mFormatManager=CY;CX=this.mFormatManager.GetFormat(Bk.DssGraphType);this.mGraphType=CX+1;this.mFormatManager.SetGraphType(this.mGraphType);this.mIsFontAntiAlias=true;},SetFontSize:function B5(CX){this.mCanvas.SetFontSize(CX);},PtSizeToPixelSize:function s(CX){return Math.floor(CX*BS/U+0.5);},IsReverseSeriesOrder:function A4(Ca,CY,CX){var CZ;if(Ca===null){return false;}CZ=Ca.IsReverseOrder();if((CY&&CX>=180&&CX<360)||(!CY&&CX>=90&&CX<270)){CZ=!CZ;}return CZ;},IsReverseGroupOrder:function BG(CY,CX){return((CY&&CX>=90&&CX<270)||(!CY&&CX>=0&&CX<180));},GetPointByAngleRadiusCenter:function Bj(CX,CZ,CY){return new CI.Point2D({x:Math.floor(CY.x+CZ*Math.cos(CX)+0.5),y:Math.floor(CY.y-CZ*Math.sin(CX)+0.5)});},RectangleIntersection:function E(Cd,Cc,Cb){var Ca,CY,CX,CZ;if((Cd.x>(Cc.x+Cc.width))||(Cc.x>(Cd.x+Cd.width))||(Cd.y>(Cc.y+Cc.height))||(Cc.y>(Cd.y+Cd.height))){return false;}Ca=Math.max(Cd.x,Cc.x);CY=Math.max(Cd.y,Cc.y);CX=Math.min(Cd.x+Cd.width,Cc.x+Cc.width)-Ca;CZ=Math.min(Cd.y+Cd.height,Cc.y+Cc.height)-CY;Cb.Reset(Ca,CY,CX,CZ);return true;},RectangleUnion:function Ar(Cd,Cc,Cb){var Ca,CY,CX,CZ;Ca=Math.min(Cd.x,Cc.x);CY=Math.min(Cd.y,Cc.y);CX=Math.max(Cd.x+Cd.width,Cc.x+Cc.width)-Ca;CZ=Math.max(Cd.y+Cd.height,Cc.y+Cc.height)-CY;Cb.Reset(Ca,CY,CX,CZ);},getUniformAxisLabelRotateMode:function(CZ){var CY=CZ,CX=this.getUniformAxisContext();switch(CZ){case"x":case"X":CY="X1";break;case"y":case"Y":CY="Y1";break;default:break;}return CX.mLabelRotation[CY];},getUniformAxisContext:function q(){if(this.mUniformAxisContext===null){this.mUniformAxisContext={mDataAreaLeftMargin:0,mDataAreaRightMargin:0,mDataAreaTopMargin:0,mDataAreaBottomMargin:0,mGraphHeight:400,mIsAxisTitleAndLabelRequired:true,mLabelRotation:{X1:-1,Y1:-1,X2:-1,Y2:-1},xDataLabelPadding:0,yDataLabelPadding:0,ValueAxis:{X1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},X2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Z:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false}},CategoryAxis:{X:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]},Y:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]}}};}return this.mUniformAxisContext;},isUADataAreaOutput:function Bv(){if(this.mIsUniformAxisMode){var CX=this.getUniformAxisContext();if(!CX.mIsAxisTitleAndLabelRequired){return true;}}return false;},IsBackgroundBright:function AM(){var Ck,Ch,Cl,Ci,CY,Cc,Cf,CX,Ca,Cj,CZ,Cd,Cb,Cg,Ce;Cb=new CI.TripleId({ObjectId:Bk.DssGraphFrame,SeriesId:Ab,GroupId:M});Cg=this.hGetColorById(Cb);Ck=Cg.Alpha;Ci=Cg.R;CY=Cg.G;Cc=Cg.B;Cb.reset(Bk.DssGraphBackground,Ab,M);Cg=this.hGetColorById(Cb);Ch=Cg.Alpha;Cf=Cg.R;CX=Cg.G;Ca=Cg.B;Cl=1-(1-Ck)*(1-Ch);if(Cl>0.5){Cj=Cf*Ch*(1-Ck)+Ci*Ck;CZ=CX*Ch*(1-Ck)+CY*Ck;Cd=Ca*Ch*(1-Ck)+Cc*Ck;}Ce=(Cj*299+CZ*587+Cd*114)/1000;return Ce>150;},hGetColorById:function CN(Cb){var Cf,Ce,CY=1,CX=255,CZ=255,Cc=255,Cd;Cd=this.GetProperty(Bk.DssGraphAreaAlpha,Cb);if(Cd){CY=Cd/255;}Cd=this.GetProperty(Bk.DssGraphFillEffect,Cb);if(Cd){switch(Cd){case B3.DssGraphFillSimple:Cd=this.GetProperty(Bk.DssGraphAreaColor,Cb);if(Cd){var Ca=l.GetColorParser();Ca.ResetFromColorValue(Cd,true);CX=Ca.mR;CZ=Ca.mG;Cc=Ca.mB;}break;case B3.DssGraphFillAdvancedWash:Cd=this.GetProperty(Bk.DssGraphGradient,Cb);if(Cd){Cf=Cd.StartColor;Ce=Cd.EndColor;CX=(Cf.mR+Ce.mR)/2;CZ=(Cf.mG+Ce.mG)/2;Cc=(Cf.mB+Ce.mB)/2;}break;default:break;}}return{R:CX,G:CZ,B:Cc,Alpha:CY};},FillSimple:function BK(CZ,Ca,CY,CX){this.mCanvas.FillSimple(CZ,Ca,CY,CX);},FillPattern:function r(CX){this.mCanvas.FillPattern(CX);},FillGradient:function A2(CY,CX,CZ){this.mCanvas.FillGradient(CY,CX,CZ);},FillEdgeType:function BQ(CY,CX){this.mCanvas.FillEdgeType(CY,CX);},FillDonutOrSphere:function AR(CZ,CX,CY){this.mCanvas.FillDonutOrSphere(CZ,CX,CY);},FillBorderMetallic:function c(CZ,CX,Cb,Ca,Cc,CY){this.mCanvas.FillBorderMetallic(CZ,CX,Cb,Ca,Cc,CY);},FillRadientGradient:function Ap(CY,Ce,Cc,Cb,Cf,CX,CZ,Cd,Ca){this.mCanvas.FillRadientGradient(CY,Ce,Cc,Cb,Cf,CX,CZ,Cd,Ca);},MakeDarker:function V(CY,CX){this.mCanvas.MakeDarker(CY,CX);},RestoreColor:function AO(CX){this.mCanvas.RestoreColor(CX);},ApplyLineFormat:function Bt(CX){this.mCanvas.ApplyLineFormat(CX);},AddFormatedText:function Bd(CY,Ca,CX,CZ){this.mCanvas.AddFormatedText(CY,Ca,CX,CZ);},BeginFirstFrame:function Ac(){this.mCanvas.BeginFirstFrame();},BeginLastFrame:function Bx(){this.mCanvas.BeginLastFrame();},EndFrame:function BB(){this.mCanvas.EndFrame();},EndUnit:function d(){this.mCanvas.EndUnit();},SetLineJoin:function AK(CX){this.mLineJoinType=CX;this.mCanvas.SetLineJoin(this.mLineJoinType);},GetLineJoin:function AW(){return this.mLineJoinType;},UpdateFormatLine:function Am(Cb,CZ,CY){CY=CY||false;if(this.mIsGraphMatrix){return ;}var Ca;Ao.tripleId.reset(AS,Cb.mObjectId,Cb.mSeriesId,Cb.mGroupId);if(this.mIsGraphMatrix&&AS.mObjectId===Bk.DssGraphX1Major){AS.mObjectId=Bk.DssGraphY1Major;}if(CZ.mLineColor===null||!CY){Ca=this.GetProperty(Bk.DssGraphLineColor,AS);if(Ca){var CX=l.GetColorParser();CX.ResetFromColorValue(Ca,true);CZ.mLineColor=CX.ToInteger();}}if(CZ.mLineStyle===null||!CY){Ca=this.GetProperty(Bk.DssGraphLinePattern,AS);if(Ca){CZ.mLineStyle=Ca;}}if(CZ.mAlpha===null||!CY){Ca=this.GetProperty(Bk.DssGraphLineAlpha,AS);if(Ca){CZ.mAlpha=Ca;}}if(CZ.mLineThicknessPt===null||!CY){Ca=this.GetProperty(Bk.DssGraphLineWidth,AS);if(Ca){CZ.mLineThicknessPt=Ca;}}},UpdateFormatFill:function AJ(Ce,CZ,Cc,Cb){Cb=Cb||false;if(this.mIsGraphMatrix){return ;}var Cd;Ao.tripleId.reset(AS,Ce.mObjectId,Ce.mSeriesId,Ce.mGroupId);AS.mObjectId=this.MapObject(Ce.mObjectId);if(CZ.mAlpha===null||!Cb){Cd=this.GetProperty(Bk.DssGraphAreaAlpha,AS);if(Cd!==null&&Cd!==undefined){CZ.mAlpha=Cd;}}var CY;if(CZ.mFillType===null||!Cb){Cd=this.GetProperty(Bk.DssGraphFillEffect,AS);if(Cd!==null&&Cd!==undefined){CZ.mFillType=Cd;}var Ca=CZ.mFillType;switch(Ca){case B3.DssGraphFillSimple:Cd=this.GetProperty(Bk.DssGraphAreaColor,AS);if(Cd!==null&&Cd!==undefined){if(CZ.mSimpleColor===null||!Cb){CY=l.GetColorParser();CY.ResetFromColorValue(Cd,true);CZ.mSimpleColor=CY.ToInteger();}}break;case B3.DssGraphFillAdvancedWash:var CX=CZ.mFillGradient;Cd=this.GetProperty(Bk.DssGraphGradient,AS);if(Cd!==null&&Cd!==undefined){if(CX===null||!Cb){if(CX===null){CZ.mFillGradient={};}CX=CZ.mFillGradient;Ai.copyProps(["gradientType","angle","horizontalOffset","verticalOffset"],Cd,CX);CY=l.GetColorParser();CY.ResetFromColorValue(Cd.StartColor,true);CX.startGraphColor=CY.ToInteger();CY.ResetFromColorValue(Cd.EndColor,true);CX.endGraphColor=CY.ToInteger();}}Cd=this.GetProperty(Bk.DssGraphGradientEndAlpha,AS);if(Cd!==null&&Cd!==undefined){if(CX.endAlpha===null||!Cb){CX.endAlpha=Cd;}}else{CX.endAlpha=CZ.mAlpha;}break;case B3.DssGraphFillPattern:break;default:break;}}},UpdateFormatFont:function K(Ca,CY){var CZ;if(this.mIsGraphMatrix){return ;}CZ=this.GetProperty(Bk.DssGraphFontColor,Ca);if(CZ){var CX=l.GetColorParser();CX.ResetFromColorValue(CZ,true);CY.mFontColor=CX.ToInteger();}CZ=this.GetProperty(Bk.DssGraphFontName,Ca);if(CZ){CY.mFontName=CZ;}CZ=this.GetProperty(Bk.DssGraphFontSize100,Ca);if(CZ){CY.mFontSize=Math.floor(CZ/100+0.5);}CZ=this.GetProperty(Bk.DssGraphFontStyle,Ca);if(CZ){CY.mFontStyle=CZ;}CZ=this.GetProperty(Bk.DssGraphFontAlpha,Ca);if(CZ){CY.mFontAlpha=CZ;}CZ=this.GetProperty(Bk.DssGraphFontAlign,Ca);if(CZ){CY.mFontAlignment=CZ;}CZ=this.GetProperty(Bk.DssGraphFontRotation,Ca);if(CZ){CY.mFontRotation=CZ;}CZ=this.GetProperty(Bk.DssGraphFontBox,Ca);if(CZ){CY.mFontBox=CZ;}},ParseValueToFormat:function y(Cd,CZ){var CX=[],Ca,Cc,CY,Cb=10;Cc=0;for(Ca=0;Ca<6;++Ca){CY=Cd.indexOf(",",Cc);CX[Ca]=Cd.substring(Cc,CY);Cc=CY+1;}CX[Ca]=Cd.substring(Cc);if(CX[0].length){CZ.mFormatType=parseInt(CX[0],Cb);}if(CX[1].length){CZ.mDigits=parseInt(CX[1],Cb);}if(CX[2].length){CZ.mGrouping=parseInt(CX[2],Cb);}if(CX[3].length){CZ.mPosCurr=parseInt(CX[3],Cb);}if(CX[4].length){CZ.mNegFormat=parseInt(CX[4],Cb);}if(CX[5].length){CZ.mCurrency=CX[5];}if(CX[6].length){CZ.mCustomFormat=CX[6];}},DrawSector:function Ag(CX,Ca,CY,CZ){this.NewPath();this.mCanvas.AddArc(CX.x,CX.y,Ca,CY,CZ,false);this.LineTo(CX.x,CX.y);this.ClosePath();},DrawRingSector:function B1(CZ,CY,CX,Ca,Cb){this.NewPath();this.mCanvas.AddArc(CZ.x,CZ.y,CY,Ca,Cb,false);this.LineTo(CZ.x+CX*Math.cos(Cb),CZ.y+CX*Math.sin(Cb));this.mCanvas.AddArc(CZ.x,CZ.y,CX,Cb,Ca,true);this.ClosePath();},DrawCylinder:function AH(CY,Cb,CZ,Ca,CX){console.alert("to be impl");},ApplyBeveledFrameToRectangle:function F(CY,Cc,CX,CZ,Cb,Ca,Cd){this.mCanvas.ApplyBeveledFrameToRectangle(CY,Cc,CX,CZ,Cb,Ca,Cd);},drawArc:function B(CX,Cb,CZ,Ca,CY){if(CY===undefined){CY=true;}if(CY){this.NewPath();}this.mCanvas.AddArc(CX.x,CX.y,Cb,CZ,Ca,false);},GetGraphMatrixContext:function Ba(){if(this.mpGraphMatrixContext===null){this.mpGraphMatrixContext=new CI.GraphMatrixContext({GraphType:this.mGraphType});if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}this.mpGraphMatrixContext.parentContext=this;}return this.mpGraphMatrixContext;},HideAxisElements:function BR(CX){this.mShouldHideAxisElements=CX;},IsHidingAxisElements:function CA(){return this.mShouldHideAxisElements;},IsPercentChart:function I(){switch(this.mGraphType){case Bi.DssGraphTypeVertical_Bar_Percent:case Bi.DssGraphTypeHorizontal_Bar_Percent:case Bi.DssGraphTypeVertical_Area_Percent:case Bi.DssGraphTypeHorizontal_Area_Percent:case Bi.DssGraphTypeVertical_Line_Percent:case Bi.DssGraphTypeHorizontal_Line_Percent:case Bi.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bi.DssGraphTypeVertical_Line_DualAxis_Percent:case Bi.DssGraphTypeVertical_Area_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;}return false;},IsGridChart:function BX(){return this.mGraphType===Bi.DssGraphTypeGridChart;},IsScatterChart:function Q(){switch(this.mGraphType){case Bi.DssGraphTypeX_Y_Scatter:case Bi.DssGraphTypeDualAxis_X_Y_Scatter:case Bi.DssGraphTypeX_Y_Scatter_with_Labels:case Bi.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return true;}return false;},IsBubbleChart:function AB(){switch(this.mGraphType){case Bi.DssGraphTypeBubble:case Bi.DssGraphTypeBubble_DualAxis:case Bi.DssGraphTypeBubble_With_Labels:case Bi.DssGraphTypeBubble_DualAxis_With_Labels:return true;}return false;},IsBulletChart:function A6(){switch(this.mGraphType){case Bi.DssGraphTypeVertical_Bullet:case Bi.DssGraphTypeHorizontal_Bullet:return true;}return false;},IsBarChart:function Au(CX){CX=(CX===undefined)?H._general:CX;CX=(CX>=H._ring)?H._general:CX;switch(this.mGraphType){case Bi.DssGraphTypeVertical_Bar_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Bi.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Bi.DssGraphTypeHorizontal_Bar_Side_by_Side:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:return(CX===H._general||CX===H._cluster);case Bi.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Bar_Stacked:case Bi.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Bar_Stacked:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:return(CX===H._general||CX===H._stacked);case Bi.DssGraphTypeVertical_Bar_Percent:case Bi.DssGraphTypeHorizontal_Bar_Percent:case Bi.DssGraphTypeVertical_Bar_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Percent:return(CX===H._general||CX===H._percent);case Bi.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Bar_Absolute:case Bi.DssGraphTypeHorizontal_Bar_Absolute:case Bi.DssGraphTypeVertical_Bullet:case Bi.DssGraphTypeHorizontal_Bullet:return(CX===H._general||CX===H._absolute);}return false;},IsAdvancedBarChart:function BF(CX){CX=(CX===undefined)?H._general:CX;switch(this.mGraphType){case Bi.DssGraphTypeVertical_Bullet:case Bi.DssGraphTypeHorizontal_Bullet:return CX===H._general||CX===H._bullet;default:return false;}},IsLineChart:function Bg(CX){CX=(CX===undefined)?H._general:CX;CX=(CX>=H._ring)?H._general:CX;if(CX===H._cluster){return false;}switch(this.mGraphType){case Bi.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Line_Stacked:case Bi.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Line_Stacked:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Stacked:return(CX===H._general||CX===H._stacked);case Bi.DssGraphTypeVertical_Line_Percent:case Bi.DssGraphTypeHorizontal_Line_Percent:case Bi.DssGraphTypeVertical_Line_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Percent:return(CX===H._general||CX===H._percent);case Bi.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Line_Absolute:case Bi.DssGraphTypeHorizontal_Line_Absolute:return(CX===H._general||CX===H._absolute);}return false;},IsAreaChart:function CR(CX){CX=(CX===undefined)?H._general:CX;CX=(CX>=H._ring)?H._general:CX;if(CX===H._cluster){return false;}switch(this.mGraphType){case Bi.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Area_Stacked:case Bi.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Area_Stacked:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Stacked:return(CX===H._general||CX===H._stacked);case Bi.DssGraphTypeVertical_Area_Percent:case Bi.DssGraphTypeHorizontal_Area_Percent:case Bi.DssGraphTypeVertical_Area_DualAxis_Percent:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Percent:return(CX===H._general||CX===H._percent);case Bi.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Area_Absolute:case Bi.DssGraphTypeHorizontal_Area_Absolute:return(CX===H._general||CX===H._absolute);}return false;},GetGraphMatrixGraphMajorType:function CU(){var CX=this.mpGraphMatrixContext.mMarkerShape,CY=201,Ca=202;if(CX===CY||CX===Ca){return b._PIE;}if(this.IsBarChart()){return b._BAR;}if(this.IsLineChart()){return b._LINE;}if(this.IsAreaChart()){return b._AREA;}var CZ=this.GetGraphType();switch(CZ){case Bi.DssGraphTypeGridChart:return b._GRID;case Bi.DssGraphTypeX_Y_Scatter:case Bi.DssGraphTypeDualAxis_X_Y_Scatter:case Bi.DssGraphTypeX_Y_Scatter_with_Labels:case Bi.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return b._SCATTER;case Bi.DssGraphTypeBubble:case Bi.DssGraphTypeBubble_DualAxis:case Bi.DssGraphTypeBubble_With_Labels:case Bi.DssGraphTypeBubble_DualAxis_With_Labels:return b._BUBBLE;case Bi.DssGraphTypeVertical_Area_Absolute:case Bi.DssGraphTypeVertical_Area_Stacked:case Bi.DssGraphTypeVertical_Area_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Area_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Area_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Area_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Area_Percent:case Bi.DssGraphTypeHorizontal_Area_Absolute:case Bi.DssGraphTypeHorizontal_Area_Stacked:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Area_Percent:return b._AREA;case Bi.DssGraphTypeVertical_Line_Absolute:case Bi.DssGraphTypeVertical_Line_Stacked:case Bi.DssGraphTypeVertical_Line_BiPolar_Absolute:case Bi.DssGraphTypeVertical_Line_BiPolar_Stacked:case Bi.DssGraphTypeVertical_Line_DualAxis_Absolute:case Bi.DssGraphTypeVertical_Line_DualAxis_Stacked:case Bi.DssGraphTypeVertical_Line_Percent:case Bi.DssGraphTypeHorizontal_Line_Absolute:case Bi.DssGraphTypeHorizontal_Line_Stacked:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Bi.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Bi.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Bi.DssGraphTypeHorizontal_Line_Percent:return b._LINE;}return b._UNDEFINED;},GetThresholdFillColor:function j(CZ,Ca){var CX=true;if(CX){if(CZ===this.mThresholdColorCache.mSeriesId&&Ca===this.mThresholdColorCache.mGroupId){if(this.mThresholdColorCache.mUseThreshold){return this.mThresholdColorCache.mThresholdColor;}}else{var CY=this.mDatasetPtr.GetThresholdFillColor(CZ,Ca,0);this.mThresholdColorCache.mSeriesId=CZ;this.mThresholdColorCache.mGroupId=Ca;this.mThresholdColorCache.mUseThreshold=CY!==null;if(this.mThresholdColorCache.mUseThreshold){this.mThresholdColorCache.mThresholdColor=CY;return CY;}}}return null;},GetColorFromPalette:function B4(CX){var CY,CZ;if(this.mIsGraphMatrix){if(this.mThemeType===BE._white){CY=CI.gLightColorPalette;}else{CY=CI.gDarkColorPalette;}}else{CY=CI.gColorPalette;}CX%=CY.length;CZ=CY[CX];return CZ.ToInteger();},getInt:function B2(CX){if(CX>=0){return Math.floor(CX);}return Math.ceil(CX);},transformRectToTicker:function B9(CY,CZ){var CX=[],Cb,Ca;if(CZ){Cb={x:Math.round(CY.x),y:Math.round(CY.y+0.5*CY.height)};Ca={x:Math.round(CY.x+CY.width),y:Math.round(CY.y+0.5*CY.height)};}else{Cb={x:Math.round(CY.x+0.5*CY.width),y:Math.round(CY.y)};Ca={x:Math.round(CY.x+0.5*CY.width),y:Math.round(CY.y+CY.height)};}CX.push(Cb);CX.push(Ca);return CX;},transformToRect:function BU(CX,Ck,CY,CZ){var Cc=100,Ci=4,Cj=[4,-100,-100,100,-100,100,100,-100,100],Ca,Cf,Ce;x=[];if(CY){for(Ca=0;Ca<Ci;++Ca){Cf=Cj[2*Ca+1]*Ck/Cc+CX.x;Ce=Cj[2*Ca+2]*Ck/Cc+CX.y;x.push({x:Cf,y:Ce});}}else{for(Ca=0;Ca<Ci;++Ca){Cf=Cj[2*Ca+1]*Ck/Cc+CX.x;Ce=Cj[2*Ca+2]*Ck/Cc+CX.y;var Ch={x:Cf,y:Ce};Ch=this.vdPoint(Ch);x.push(Ch);}}var Cg=Math.abs(x[3].x-x[2].x),Cb=Math.abs(x[3].y-x[0].y);if(CZ){CZ.Reset(x[0].x,x[0].y,Cg,Cb);return CZ;}else{var Cd=new CI.Rect2D();Cd.x=x[0].x;Cd.y=x[0].y;Cd.width=Math.abs(x[3].x-x[2].x);Cd.height=Math.abs(x[3].y-x[0].y);return Cd;}},resetCanvas:function BJ(){this.mCanvas.reset();},applyFontFormat:function Aj(CX){if(this.mImageFormat===e.SVG){this.mCanvas.ApplyFontFormat(CX);}},setDrawingOrderToCanvas:function Bs(CX){if(this.mImageFormat===e.SVG){this.mCanvas.setDrawOrder(CX);}},getDefaultThemeColor:function CW(){switch(this.mThemeType){case BE._black:return 0;case BE._white:return 16777215;default:return 16777215;}},getDefaultContrastColor:function CB(CX){CX=CX||-1;var CZ=0,CY=1;switch(CX){case CZ:return(this.mThemeType===BE._black?5855577:10066329);case CY:return(this.mThemeType===BE._black?16777215:3355443);default:return(this.mThemeType===BE._black?16777215:0);}},mapGraphTypeToDualAxis:function Aw(CY){var CX=mstrmojo.chart.model.enums.EnumDSSGraphType;switch(CY){case CX.DssGraphTypeVertical_Bar_Side_by_Side:return CX.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side;case CX.DssGraphTypeHorizontal_Bar_Side_by_Side:return CX.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side;case CX.DssGraphTypeVertical_Bar_Stacked:return CX.DssGraphTypeVertical_Bar_DualAxis_Stacked;case CX.DssGraphTypeHorizontal_Bar_Stacked:return CX.DssGraphTypeHorizontal_Bar_DualAxis_Stacked;case CX.DssGraphTypeVertical_Bar_Percent:return CX.DssGraphTypeVertical_Bar_DualAxis_Percent;case CX.DssGraphTypeHorizontal_Bar_Percent:return CX.DssGraphTypeHorizontal_Bar_DualAxis_Percent;case CX.DssGraphTypeVertical_Bar_Absolute:return CX.DssGraphTypeVertical_Bar_DualAxis_Absolute;case CX.DssGraphTypeHorizontal_Bar_Absolute:return CX.DssGraphTypeHorizontal_Bar_DualAxis_Absolute;case CX.DssGraphTypeVertical_Line_Stacked:return CX.DssGraphTypeVertical_Line_DualAxis_Stacked;case CX.DssGraphTypeHorizontal_Line_Stacked:return CX.DssGraphTypeHorizontal_Line_DualAxis_Stacked;case CX.DssGraphTypeVertical_Line_Percent:return CX.DssGraphTypeVertical_Line_DualAxis_Percent;case CX.DssGraphTypeHorizontal_Line_Percent:return CX.DssGraphTypeHorizontal_Line_DualAxis_Percent;case CX.DssGraphTypeVertical_Line_Absolute:return CX.DssGraphTypeVertical_Line_DualAxis_Absolute;case CX.DssGraphTypeHorizontal_Line_Absolute:return CX.DssGraphTypeHorizontal_Line_DualAxis_Absolute;case CX.DssGraphTypeVertical_Area_Stacked:return CX.DssGraphTypeVertical_Area_DualAxis_Stacked;case CX.DssGraphTypeHorizontal_Area_Stacked:return CX.DssGraphTypeHorizontal_Area_DualAxis_Stacked;case CX.DssGraphTypeVertical_Area_Percent:return CX.DssGraphTypeVertical_Area_DualAxis_Percent;case CX.DssGraphTypeHorizontal_Area_Percent:return CX.DssGraphTypeHorizontal_Area_DualAxis_Percent;case CX.DssGraphTypeVertical_Area_Absolute:return CX.DssGraphTypeVertical_Area_DualAxis_Absolute;case CX.DssGraphTypeHorizontal_Area_Absolute:return CX.DssGraphTypeHorizontal_Area_DualAxis_Absolute;default:return CY;}},getAxisTripleId:function AP(CX){return CI.gAxisTripleIds[CX];},RenderClusterShapes:function BD(){var Ca=this,CY=Ca.mUniformAxisContext.CategoryAxis,CZ=CY.X,CX=CY.Y;if(Ca.isCombinationChart()||Ca.IsDualAxis()){return(CZ.EnforceCluster&&CZ.EnforceFringe)||(CX.EnforceCluster&&CX.EnforceFringe);}return false;},checkColorByAndSizeByValue:function BM(Cc,CY,Cb,CX){CY=CY||this.mDataset;Cb=Cb||false;CX=CX||false;if(!this.mIsGraphMatrix){return true;}var Ca=Cc.angleByIndex!==undefined,CZ;if(Cb){if(Ca===false){CZ=CY.GetColorByData(Cc.mSeriesId,Cc.mGroupId);}else{CZ=CY.GetPieSliceColorByData(Cc.mSeriesId,Cc.mGroupId,Cc.angleByIndex,Cc.sliceById);}if(Ao.isValidNumber(CZ)===false){return false;}}if(CX){CZ=CY.GetSizeByData(Cc.mSeriesId,Cc.mGroupId);if(Ao.isValidNumber(CZ)===false){return false;}}return true;},getValueAxisKeyFromLayout:function AF(CX,CY){if(CY){return CX?"X1":"Y1";}else{return CX?"X2":"Y2";}},getAxisKeyFromObjectId:function AI(CX,Ca,CY){CY=CY||false;Ca=Ca||false;var CZ;switch(CX){case Bl.DssGraphX1Body:case Bl.DssGraphX1Label:case Bl.DssGraphX1Major:case Bl.DssGraphX1Minor:case Bl.DssGraphXTitle:case Bl.DssGraphUserLabel3:case Bl.DssGraphUserLine3:CZ="X1";break;case Bl.DssGraphX2Body:case Bl.DssGraphX2Label:case Bl.DssGraphX2Major:case Bl.DssGraphX2Minor:case Bl.DssGraphX2Title:case Bl.DssGraphUserLabel4:case Bl.DssGraphUserLine4:CZ="X2";break;case Bl.DssGraphY1Body:case Bl.DssGraphY1Label:case Bl.DssGraphY1Major:case Bl.DssGraphY1Minor:case Bl.DssGraphY1Title:case Bl.DssGraphUserLabel1:case Bl.DssGraphUserLine1:CZ="Y1";break;case Bl.DssGraphY2Body:case Bl.DssGraphY2Label:case Bl.DssGraphY2Major:case Bl.DssGraphY2Minor:case Bl.DssGraphY2Title:case Bl.DssGraphUserLabel2:case Bl.DssGraphUserLine2:CZ="Y2";break;case Bl.DssGraphZBody:CZ="Z";break;case Bl.DssGraphO1Body:case Bl.DssGraph2DO1Label:case Bl.DssGraphO1Major:case Bl.DssGraphO1Minor:case Bl.DssGraphO1Title:if(Ca){CZ=this.caKeyMap.c1||this.IsVertical()?"X1":"Y1";}else{CZ="O1";}break;case Bl.DssGraphO2Body:case Bl.DssGraph2DO2Label:case Bl.DssGraphO2Major:case Bl.DssGraphO2Minor:case Bl.DssGraphO2Title:if(Ca){CZ=this.caKeyMap.c1||this.IsVertical()?"X2":"Y2";}else{CZ="O2";}break;default:CZ="";break;}if(CY){CZ=CZ.toLowerCase();}return CZ;},getUniformAxisInformationFromKey:function CS(Ca,CZ){CZ=CZ||false;var CY=this.getUniformAxisContext(),CX=CY.ValueAxis;switch(Ca){case"X1":case"X2":case"Y1":case"Y2":case"Z":return CX[Ca];case"O1":case"O2":CX=CY.CategoryAxis;return CZ?CX.Y:CX.X;default:return CX.Y1;}},getUniformAxisInformation:function R(Ca,CZ){var CY=this.getUniformAxisContext(),Cc=CY.ValueAxis,CX=CY.CategoryAxis,Cb;switch(Ca){case Bl.DssGraphO1Body:case Bl.DssGraphO2Body:CZ=CZ||false;return CZ?CX.Y:CX.X;case Bl.DssGraphX1Body:Cb=Cc.X1;break;case Bl.DssGraphY1Body:Cb=Cc.Y1;break;case Bl.DssGraphX2Body:Cb=Cc.X2;break;case Bl.DssGraphY2Body:Cb=Cc.Y2;break;case Bl.DssGraphZBody:Cb=Cc.Z;break;}return Cb;},mirrorPrimaryInBubbleScatter:function A(Cd){var Ce=this,CZ=Ce.GetGraphMatrixContext(),CX=CZ.AxisLayout;if(Ce.mIsGraphMatrix===false){return false;}if(CX===null||CX===undefined){return false;}var Ca=1,Cc=2,Cb=4,CY=8;if(Cd){return !!(CX&CY);}return !!(CX&Cb);},isCompactMode:function Ak(){return this.mDataset.dataProvider.isCompactMode();}});BZ.sDefaultMargin=10;BZ.sDefaultMarginForTimeSeries=3;BZ.sDefaultUniformAxisMargin=0;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","ChartContext","ImageMap");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumCollectionType");var X=mstrmojo.chart,O=mstrmojo.chart.model,V=X.enums,e=O.enums,c=V.EnumCollectionType,Q=V.EnumObjectShape,F=Q.OS_RECTANGLE,g=e.EnumDSSGraphObject,S=X.gNullTripleId,d=X.gNullObjectId,M=2147483647;mstrmojo.chart.GraphObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObject",mpParentObject:null,mFormatLinePtr:null,mTripleId:S,mChartContextPtr:null,mpManager:null,mIsDetectable:true,mIsAnimationEnabled:false,mIsVirtual:false,mShapeType:0,init:function W(j){this._super(j);this.mpParentObject=j.GraphCollectionObject||null;this.mTripleId=j.TripleId||S;this.mpManager=j.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(j.Shape){this.mShapeType=j.Shape;}if(j.hasLine&&this.mTripleId.mObjectId!==d){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,c.CT_NO_COLLECTION,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;},SetAnimationEnable:function H(j){this.mIsAnimationEnabled=j;this.SetProgress(0.1);},IsLayerObject:function J(){return false;},SetFormatLine:function Y(j){this.mFormatLinePtr=j;},SetLineWidth:function f(){var j;j=this.mFormatLinePtr.mLineThickness;j=(j<1)?1:j;this.hSetLineWidth(j);},ApplyLineFormat:function E(){this.mFormatLinePtr.ApplyLineFormat(this.mChartContextPtr);},SetOutlineWidth:function R(){this.hSetLineWidth(X.gOutlineWhite.mLineThickness);},SetOutlineWidthEx:function P(j){if(j>0){this.hSetLineWidth(j);}},ApplyOutlineFormat:function h(){var j=this.mChartContextPtr;if(j.IsBackgroundBright()){X.gStrokeForLightBackground.ApplyLineFormat(j);}else{X.gStrokeForDarkBackground.ApplyLineFormat(j);}},MakePolygonClockwise:function I(p){var l=p.length,r=0,o,k,q,n,j;if(l<3){return ;}for(o=1;o<l;++o){if(p[o].x<p[r].x||(p[o].x<=p[r].x&&p[o].y<p[r].y)){r=o;}}k=(r+l-1)%l;q=new X.Vector2D({x:p[k].x-p[r].x,y:p[k].y-p[r].y});k=(r+1)%l;n=new X.Vector2D({x:p[k].x-p[r].x,y:p[k].y-p[r].y});if(n.CrossProduct(q)<-X.gModuleMain.mTolerance){for(o=0;o<Math.floor(l/2);++o){j=p[o];p[o]=p[l-o-1];p[l-o-1]=j;}}},DrawOutLine:function U(){this.SetOutlineWidth();this.mChartContextPtr.DrawPolygon(this.GetClockwisePolygon());this.ApplyOutlineFormat();},PointInObject:function A(j){if(!this.mIsDetectable){return false;}return j.IsInPolygon(this.GetClockwisePolygon());},hSetLineWidth:function G(j){this.mChartContextPtr.SetLineWidth(j);this.mChartContextPtr.mIsLineWidthOdd=((j&1)===1);},GetChartAreaId:function Z(){var j=this.mpManager.mTripleId;switch(j.mObjectId){case g.DssGraphY1Body:case g.DssGraphY2Body:case g.DssGraphX2Body:case g.DssGraphO1Body:return this.mTripleId.mSeriesId;default:return this.mpManager.GetChartAreaId();}},GetBoundingRect:function L(){var j=new X.Rect2D();return j;},SetProgress:function C(j){},DistanceToPoint:function a(j){if(!this.mIsDetectable){return M;}var k=this.GetClockwisePolygon();if(k.length<3){return M;}return j.DistanceToPolygon(k);},GetAngularBisectorIntersectionPoint:function D(x,u,t,n,o){var p={x:x.x-u.x,y:x.y-u.y};var l={x:t.x-u.x,y:t.y-u.y};var k=Math.sqrt(p.x*p.x+p.y*p.y);var j=Math.sqrt(l.x*l.x+l.y*l.y);var s={x:p.x/k,y:p.y/k};var r={x:l.x/j,y:l.y/j};var w=0;if(Math.abs(s.x-r.x)<0.01){w=n*(r.x+s.x)/(s.y-r.y);}else{w=n*(r.y+s.y)/(r.x-s.x);}var q={x:0,y:0};q.x=u.x+w*r.x;q.y=u.y+w*r.y;o.x=q.x+n*(-r.y);o.y=q.y+n*r.x;},getFormatFromParent:function b(){this.mFormatLinePtr=this.mpParentObject.mFormatLinePtr;},getBoundingPoints:function K(){var j=this.GetBoundingRect(),k=j.ToPoints(false);return{Shape:0,Points:[k.TopLeft,k.TopRight,k.BottomRight,k.BottomLeft]};},getShapeSize:function N(){return 0;},fallOut:function B(q){var k=0,p=this.mChartContextPtr,o=this.getBoundingPoints(),n=o.Points,l,j;for(l=0;l<n.length;++l){j=n[l];if(j.x<0||j.y<0||j.x>p.mGraphWidth||j.y>p.mGraphHeight){k++;}if(k>0&&!q){return true;}}return(k===n.length);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumFontAlignment","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumVariantBool","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","ChartConstants","ChartContext","FormatFont","Rect2D","FormatLine","FormatFill");var Z=mstrmojo.chart,Y=mstrmojo.VisUtility,O=mstrmojo.hash,V=Z.ChartConstants,J=Z.enums,D=J.EnumCollectionType,u=D.CT_LINE,a=J.EnumGraphMajorType,g=J.EnumDSSExtraGraphObject,N=J.EnumFontAlignment,I=J.EnumLineStyle,E=J.EnumFillType,s=Z.gNullTripleId,b=J.EnumGraphMatrixMajorGraphType,U=Z.model,M=U.enums,l=M.EnumDSSGraphMarkerShape,f=M.EnumDSSGraphType,j=M.EnumDSSGraphProperty,k=M.EnumDSSGraphObject,e=M.EnumDSSExtraGraphProperty,F=M.EnumDSSGraphFontRotation,p=M.EnumDSSGraphGridLineType,L=M.EnumDSSGraphFillEffect,C=M.EnumVariantBool,n=M.EnumShapeType,S=0,B=1,r=7;var h=0,t=1,X=2;function Q(AB,AK,AA){var AP,AG=this.mDataset,AM,AN=false,AH={valid:false,object:AB},z=AK.mObjectId;if(z===k.DssGraphTrendLine||z===k.DssGraphReferenceLine){var AL=z===k.DssGraphTrendLine,AS,AQ;if(AL){AS=AG.GetTrendLineOfSeries(AK.mSeriesId);AQ=AS;}else{AS=AG.GetReferenceLinesOfSeries(AK.mSeriesId);if(AK.mGroupId>=0){AQ=AS[AK.mGroupId];}}if(AQ){AB.mLineThickness=AQ.getLineThickness();AB.mLineThicknessPt=75*AB.mLineThickness;AB.mAlpha=255;AB.mLineStyle=AQ.getLineRenderType();AB.mLineColor=AQ.getLineColor();AH.valid=true;}}if(AH.valid){return AH;}AH.valid=true;var AF;switch(AK.mObjectId){case k.DssGraphUserLine1:AF="y1";break;case k.DssGraphUserLine2:AF="x1";break;case k.DssGraphUserLine3:AF="y2";break;case k.DssGraphUserLine4:AF="x2";break;default:AH.valid=false;break;}if(AH.valid){var AO=AG.getAxisOriginFormat(AF);delete AO.show;O.copy(AO,AB);return AH;}var AE="all",AC=0,AR=0,AD=AK.mGroupId;AH.valid=true;if(z===k.DssGraphRiser){if(AA===n._PIE||AA===n._PIESLICE){z=k.DssGraphPieSlice;}}switch(z){case k.DssGraphDataMarker:AE="lineMarker";break;case k.DssGraphRiser:if(AA===n._TICKER){AE="lineShape";}else{AE="shapeBorder";}break;case k.DssGraphDataLine:AE="lineShape";AD=0;break;case k.DssGraphTargetLine:break;case k.DssGraphPieSlice:AC=AK.angleByIndex||0;AR=AK.sliceById||0;AE="pieSliceBorder";break;default:AH.valid=false;break;}if(AH.valid){AM=AG.getGenericLineFormat(AK.mSeriesId,AD,AC,AR,AE);AB=O.copy(AM,AB);AH.object=AB;return AH;}var AI,y=this.IsVertical();switch(z){case k.DssGraphY1Major:AP="majorTick";AI="y1";break;case k.DssGraphY1Minor:AP="minorTick";AI="y1";break;case k.DssGraphY2Major:AP="majorTick";AI=y?"y2":"x2";break;case k.DssGraphY2Minor:AP="minorTick";AI=y?"y2":"x2";break;case k.DssGraphX1Major:AP="majorTick";AI="x1";break;case k.DssGraphX1Minor:AP="minorTick";AI="x1";break;case k.DssGraphX2Major:AP="majorTick";AI="x2";break;case k.DssGraphX2Minor:AP="minorTick";AI="x2";break;case k.DssGraphO1Major:AP="majorTick";AI=this.caKeyMap.c1||"x1";break;case k.DssGraphO1Minor:AP="minorTick";AI=this.caKeyMap.c1||"x1";break;case k.DssGraphO2Major:AP="majorTick";AI=this.caKeyMap.c2||"x2";break;case k.DssGraphO2Minor:AP="minorTick";AI=this.caKeyMap.c2||"x2";break;case k.DssGraphY1Body:AP="axisBody";AI="y1";break;case k.DssGraphX2Body:AP="axisBody";AI="x2";break;case k.DssGraphY2Body:AP="axisBody";AI=y?"y2":"x2";break;case k.DssGraphX1Body:AP="axisBody";AI="x1";break;case k.DssGraphO1Body:AP="axisBody";AI=this.caKeyMap.c1||"x1";break;case k.DssGraphO2Body:AP="axisBody";AI=this.caKeyMap.c2||"x2";break;}var AJ;if(AN){switch(AP){case"axisBody":AJ=this.globalFormats.AxisBodies;break;case"majorTick":AJ=this.globalFormats.AxisMajorTicks;break;case"minorTick":AJ=this.globalFormats.AxisMinorTicks;break;default:AH.valid=false;break;}AH.valid=!!AJ;if(AH.valid&&AJ[AI]){AH.object=AJ[AI];return AH;}}AH.valid=true;switch(AP){case"axisBody":AM=AG.getAxisLineFormat(AI);break;case"majorTick":case"minorTick":AM=AG.getAxisTickFormat(AI,AP);break;default:AH.valid=false;Y.visPrint("failed to get a match for this line format");break;}if(AN){switch(AP){case"axisBody":this.globalFormats.AxisBodies=this.globalFormats.AxisBodies||{};AJ=this.globalFormats.AxisBodies;break;case"majorTick":this.globalFormats.AxisMajorTicks=this.globalFormats.AxisMajorTicks||{};AJ=this.globalFormats.AxisMajorTicks;break;case"minorTick":this.globalFormats.AxisMinorTicks=this.globalFormats.AxisMinorTicks||{};AJ=this.globalFormats.AxisMinorTicks;break;default:AH.valid=false;break;}if(AH.valid){if(AJ[AI]===undefined){AJ[AI]=O.copy(AM,AJ[AI]);AB=AJ[AI];if(AP==="minorTick"&&AB.mAlpha!==undefined&&AB.mAlpha!==null){AB.mAlpha*=0.6;}}AH.object=AJ[AI];return AH;}}else{if(AH.valid){O.copy(AM,AB);if(AP==="minorTick"&&AB.mAlpha!==undefined&&AB.mAlpha!==null){AB.mAlpha*=0.6;}AH.object=AB;}}return AH;}function x(y,AC,AD){var AG,AB=this.mDataset,AF=0,z=0,AA,AH={valid:false,object:y},AE=AC.mObjectId;if(AE===k.DssGraphRiser){if(AD===n._PIE||AD===n._PIESLICE){AE=k.DssGraphPieSlice;}}AH.valid=true;switch(AE){case k.DssGraphRiser:AA="shape";break;case k.DssGraphDataMarker:AA="lineMarker";break;case k.DssGraphPieSlice:AA="pieSlice";AF=AC.angleByIndex!==undefined?AC.angleByIndex:0;z=AC.sliceById!==undefined?AC.sliceById:0;break;default:Y.visPrint("fail to find a match for this fill format");AH.valid=false;break;}if(AH.valid){if(AC.mSeriesId>=0&&AC.mGroupId>=0){AG=AB.getGenericFillFormat(AC.mSeriesId,AC.mGroupId,AF,z,AA);AH.object=O.copy(AG,y);}}return AH;}function P(y){switch(y.mObjectId){case k.DssGraphUserLabel1:return k.DssGraphY1Label;case k.DssGraphUserLabel2:return k.DssGraphY2Label;case k.DssGraphUserLabel3:return k.DssGraphX1Label;case k.DssGraphUserLabel4:return k.DssGraphX2Label;default:return y.mObjectId;}}function H(z,AD,AG){var AL,AO=false,AC=this.mDataset,AI=P.call(this,AD);if(AI===k.DssGraphDataText||AI===k.DssGraphRefLineText||AI===k.DssGraphTrendLineText){var AB=0,AF=1,AM=2;AO=true;if(AG<0){switch(AI){case k.DssGraphRefLineText:AG=AF;break;case k.DssGraphTrendLineText:AG=AM;break;default:AG=AB;break;}}switch(AG){case AB:if(AO){var AE=this.globalFormats;if(AE.DatatextFormat===null||AE.DatatextFormat===undefined){AE.DatatextFormat=new Z.FormatFont({Bare:true});if(AC===null||AC===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:z};}AL=AC.getDataLabelFontFormat();O.copy(AL,AE.DatatextFormat);var y=AE.DatatextFormat;if(y&&y.mFontSize&&typeof y.mFontSize!=="number"){y.mFontSize=parseFloat(y.mFontSize);}}z=AE.DatatextFormat;}else{if(AC===null||AC===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:z};}AL=AC.getDataLabelFontFormat();O.copy(AL,z);}return{valid:true,object:z};case AF:var AA,AH=AC.GetReferenceLinesOfSeries(AD.mSeriesId);if(AD.mGroupId>=0){AA=AH[AD.mGroupId];}if(AA){var AN=AA.getReferenceLineLabelFont();if(AN){z.mFontColor=AN.rfLnFntClr;z.mFontSize=parseInt(AN.rfLnFntSz,10);z.mFontStyle=AN.rfLnFntStyle;z.mFontName=AN.rfLnFntFml;}}break;case AM:break;default:return{valid:false,object:z};}return{valid:false,object:z};}var AK;switch(AI){case k.DssGraphY1Label:AK="y1";break;case k.DssGraphX2Label:AK="x2";break;case k.DssGraphY2Label:AK=this.IsVertical()?"y2":"x2";break;case k.DssGraphX1Label:AK="x1";break;case k.DssGraph2DO1Label:AK=this.caKeyMap.c1||"x1";break;case k.DssGraph2DO2Label:AK=this.caKeyMap.c2||"x2";break;default:return{valid:false,object:z};}AO=false;if(AO){var AJ=this.globalFormats.AxisLabelFormats;if(AJ===null||AJ===undefined){this.globalFormats.AxisLabelFormats={};}AJ=this.globalFormats.AxisLabelFormats;if(!!AJ[AK]){return AJ[AK];}AJ[AK]={};O.copy(AL,AJ[AK]);return AJ[AK];}else{AL=AC.getAxisLabelFontFormat(AK);O.copy(AL,z);}return{valid:true,object:z};}function A(AB,AD,y){AD=AD||0;y=y||false;var AC=this.GetGraphMatrixContext(),AH,AA=this.mDataset;y=y&&AC.mHasColorBy;if(AA&&y){var z;if(AB.mObjectId===k.DssGraphPieSlice){var AG=AB.angleByIndex||0,AF=AB.sliceById||0;z=AA.GetPieSliceColorByData(AB.mSeriesId,AB.mGroupId,AG,AF);}else{z=AA.GetColorByData(AB.mSeriesId,AB.mGroupId,AD);}if(z!==null&&z!==undefined){AH=z;}}if(AH===undefined){if(this.mIsGraphMatrix&&!AC.mHasColorBy){AH=this.GetColorFromPalette(0);}else{if(AB.mSeriesId<0&&AB.mGroupId<0){AH=0;}else{var AE=AB.mSeriesId;if(AE<0){AE=AB.mGroupId;}AE=Math.max(0,AE);AH=this.GetColorFromPalette(AE);}}}return AH;}mstrmojo.chart.GenericContext=mstrmojo.declare(mstrmojo.chart.ChartContext,null,{scriptClass:"mstrmojo.chart.GenericContext",init:function q(y){this._super(y);this.mGraphType=f.DssGraphTypeVertical_Bar_Side_by_Side;this.mFormatManager=this.mFormatManager||y.FormatManager||null;this.mIsFontAntiAlias=true;},GetColorValue:function G(AA,y,z){return A.call(this,AA,y,z);},GetProperty:function d(AA,AC){var y,z,AB;if(AA===j.DssGraphType){return this.mGraphType;}if(!this.mIsTimeSeriesChart){z=this.mFormatManager.GetGraphProperty(AA,AC.mObjectId,AC.mSeriesId,AC.mGroupId);if(z!==undefined&&z!==null){return z;}}if(!this.mIsGraphMatrix){z=this._super(AA,AC);if(!z){z=this._super(AA,new Z.TripleId({ObjectId:AC.mObjectId}));if(!z){z=this._super(AA,new Z.TripleId({SeriesId:AC.mSeriesId}));if(!z){z=this._super(AA,s);}}}if(z){return z;}}switch(AA){case j.DssGraphAxisNumberFormat:case -j.DssGraphFormatDataTextAdv:y="-2,0,0,0,0,$,#";return y;case j.DssGraphTextContent:switch(AC.mObjectId){case k.DssGraphY1Title:y="Y1";return y;}return y;case j.DssGraphStyleMajor:if(this.mIsGraphMatrix){switch(AC.mObjectId){case k.DssGraphY1Body:case k.DssGraphY2Body:case k.DssGraphX1Body:case k.DssGraphX2Body:y=p.DssGraphGridOuterTicks;break;default:y=p.DssGraphGridNone;break;}}else{y=p.DssGraphGridRegular;}return y;case j.DssGraphShow2DAxisMinor:case j.DssGraphShow2DAxisLine:y=!this.mIsGraphMatrix;return y;case j.DssGraph2DSide:switch(AC.mObjectId){case k.DssGraphY1Body:y=p.DssGraphAxisLabelLowSide;return y;case k.DssGraphO1Body:y=p.DssGraphAxisLabelLowSide;return y;}break;case e.DssGraphChartAreaNumber:y=3;return y;case j.DssGraphDepthMode:y=false;return y;case j.DssGraphEnhancedSeriesEffect:y=false;return y;case j.DssGraphCurveColorAsSeries:case j.DssGraphShowLegendText:case j.DssGraphShowTitle:y=true;return y;case e.DssGraphUseChartArea:case j.DssGraphShowDataValue:case j.DssGraphShowTotalValue:case e.DssGraphChartAreaOrientation:case j.DssGraphLockFontSize:y=false;return y;case j.DssGraphSDShowDataText:y=false;return y;case j.DssGraphShow2DAxisMajor:AB=this.GetGraphMajorType();if(AB===a.GMT_3D_CATEGORY||AB===a.GMT_3D_SCATTER){if(AC.mObjectId===k.DssGraphY1Body){y=true;return y;}}if(this.mIsGraphMatrix){return true;}y=(this.mIsTimeSeriesChart?true:false);return y;case e.DssGraphCumulativePercentLabel:y="Cumulative Percent";return y;case e.DssGraphInfoNestedLabel:case e.DssGraphInfoNestedLabelBracket:y=false;return y;case j.DssGraphShowDataLabel:y=false;return y;case j.DssGraphLineColor:if(this.mIsTimeSeriesChart){if(AC.mSeriesId>=0){y=parseInt(this.GetColorFromPalette(AC.mSeriesId),10);return y;}switch(AC.mObjectId){case k.DssGraphO1Major:y=5460819;return y;case k.DssGraphY1Major:y=5658198;return y;case k.DssGraphO1Body:case k.DssGraphY1Body:y=13421772;return y;default:return undefined;}}if(this.mIsGraphMatrix){switch(AC.mObjectId){case k.DssGraphY1Major:case k.DssGraphX1Major:case k.DssGraphX2Major:case k.DssGraphY2Major:y=this.getDefaultContrastColor(S);break;default:return undefined;}}else{return undefined;}break;case j.DssGraphFillEffect:y=L.DssGraphFillSimple;return y;case j.DssGraphLineAlpha:if(AC.mObjectId===k.DssGraphRiser){y=0;return y;}return undefined;case j.DssGraphMarkerSize:y=33;return y;case j.DssGraph2DDepth:y=1000;return y;case j.DssGraphAxisAutoFit:AB=this.GetGraphMajorType();y=AB===a.GMT_CATEGORY;return y;case j.DssGraphFontColor:if(this.mIsGraphMatrix){y=this.getDefaultContrastColor();return y;}break;default:return undefined;}return undefined;},PutGraphProperty:function W(y,z,AA){this.mFormatManager.PutGraphProperty(y,z.mObjectId,z.mSeriesId,z.mGroupId,AA);},GetFormatFont:function w(AB){var y,z=this.mDebugUseNewProperties;y=this.GetFormatObject(AB,-1,2,z);switch(AB.mObjectId){case k.DssGraphPieGroupLabel:case k.DssGraphPieRingLabel:if(y.mFontAlignment===null||!z){y.mFontAlignment=N.FA_CENTER;}if(y.mFontSize===null||!z){y.mFontSize=Math.floor(y.mFontSize*3/4+1);}break;case k.DssGraphOPILBLValue:case k.DssGraphPieFeelerLabel:if(y.mFontAlignment===null||!z){y.mFontAlignment=N.FA_CENTER;}if(y.mFontSize===null||!z){y.mFontSize=r;}break;case k.DssGraphY1Label:case k.DssGraph2DO1Label:case k.DssGraph2DO2Label:case k.DssGraphX1Label:case k.DssGraphX2Label:case k.DssGraphY2Label:if(this.mIsTimeSeriesChart){y.mFontSize=14;y.mFontColor=13158600;}else{if(y.mFontColor===null||!z){y.mFontColor=this.getDefaultContrastColor();}if(y.mFontSize===null||!z){y.mFontSize=8;}}break;case k.DssGraphDataText:if(y.mFontSize===null||!z){y.mFontSize=Math.floor(V.kVirtualCoordinateHeight/45);}if(this.isVerticalBar()&&!this.IsBulletChart()){if(y.mFontRotation===null||!z){y.mFontRotation=F.Rotate90;}}break;case g.DssGraphWarningMessage:y.mFontColor=255;break;case g.DssGraphBanner:var AA=this.getDefaultContrastColor(B);y.mFontColor=AA;y.mFontSize=11;break;default:break;}this.UpdateFormatFont(AB,y);y.mFontSize=this.vdFontSize(y.mFontSize);if(z){y.restoreDefaults(false);}return y;},GetFormatObject:function o(AE,AA,z,AD){var AC,y,AB;AD=AD&&(!!this.mDataset)&&this.mDebugUseNewProperties;if(AD){AC={Bare:true};}else{AC=undefined;}switch(z){case h:y=new Z.FormatLine(AC);break;case t:y=new Z.FormatFill(AC);break;case X:y=new Z.FormatFont(AC);break;default:break;}if(AD){AB=this.ResolveFormat(y,AE,z,AA);return AB.object;}return y;},GetFormatLine:function K(AA,AG,AB){if(AB===undefined){AB=n._GENERIC;}var AF=AA.mGroupId,AD=AA.mObjectId,z;switch(AD){case k.DssGraphTrendLine:case k.DssGraphReferenceLine:case k.DssGraphY1Major:case k.DssGraphY2Major:case k.DssGraphY3Major:case k.DssGraphY4Major:case k.DssGraphX1Major:case k.DssGraphX2Major:case k.DssGraphO1Major:case k.DssGraphY1Minor:case k.DssGraphY2Minor:case k.DssGraphY3Minor:case k.DssGraphY4Minor:case k.DssGraphX1Minor:case k.DssGraphX2Minor:case k.DssGraphO1Minor:case k.DssGraphO1Body:case k.DssGraphX1Body:case k.DssGraphY1Body:case k.DssGraphY2Body:case k.DssGraphX2Body:case k.DssGraphY3Body:case k.DssGraphY4Body:case k.DssGraphUserLine1:case k.DssGraphUserLine2:case k.DssGraphUserLine3:case k.DssGraphUserLine4:case k.DssGraphDataLine:z=true;break;default:if(AF===-3){var y=AA.mSeriesId;y=Math.max(y,0);AA.mGroupId=this.mDataset.findCell(false,y,0);}z=AA.mSeriesId>=0&&AA.mGroupId>=0;break;}var AE=true,AC;AC=this.GetFormatObject(AA,AB,h,z);switch(AD){case k.DssGraphBackground:case k.DssGraphLegendArea:AC.mAlpha=0;break;case k.DssGraphRiser:case k.DssGraphDataLine:if(AG===u&&AA.mSeriesId>=0){if(AC.mLineColor===null||!z){AC.mLineColor=A.call(this,AA,0);}}if(AD===k.DssGraphRiser&&this.mIsGraphMatrix){if(AC.mLineColor===null||!z){AC.mLineColor=A.call(this,AA,0,(AA.mGroupId>=0&&AA.mSeriesId>=0));}switch(AB){case n._TICKER:if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()){if(AC.mLineThickness===null||!z){AC.mLineThicknessPt=200;AC.mLineThickness=2;}AE=false;}break;case n._CIRCLE:case n._RECTANGLE:case n._SQUARE:if(AB===n._CIRCLE||AB===n._RECTANGLE||AB===n._SQUARE){if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()||this.IsBarChart()||this.IsLineChart()||this.IsAreaChart()){if(AC.mLineThickness===null||!z){AC.mLineThicknessPt=200;AC.mLineThickness=2;}AE=false;}}break;default:break;}}break;case k.DssGraphY1Major:case k.DssGraphY2Major:case k.DssGraphX1Major:case k.DssGraphX2Major:if(this.mIsTimeSeriesChart){AC.mLineStyle=I.LS_DOT;}else{if(this.mIsGraphMatrix){if(AC.mLineColor===null||!z){AC.mLineColor=this.getDefaultContrastColor(S);}}}break;default:break;}this.UpdateFormatLine(AA,AC,z);if(AE||!z){AC.mLineThickness=AC.mLineThicknessPt;if(!this.mAbsoluteFontLineSize){AC.mLineThicknessPt=this.vdHeight(AC.mLineThicknessPt);}AC.mLineThickness=this.vdLineWidth(AC.mLineThickness);}if(z){AC.restoreDefaults(false);}AA.mGroupId=AF;return AC;},GetFormatFill:function R(AA,AG,AC){if(AC===undefined){AC=n._GENERIC;}var AF=AA.mGroupId;if(AF===-3){var y=AA.mSeriesId;y=Math.max(y,0);AA.mGroupId=this.mDataset.findCell(false,y,0);}var z=(AA.mSeriesId>=0&&AA.mGroupId>=0)&&this.mDebugUseNewProperties,AE,AD=this.mpGraphMatrixContext;AE=this.GetFormatObject(AA,AC,t,z);switch(AA.mObjectId){case k.DssGraphPieSlice:case k.DssGraphRiser:case k.DssGraphDataLine:if(this.mIsGraphMatrix){if(AE.mFillType===null||!z){AE.mFillType=E.FT_SIMPLE;}var AB=this.GetGraphMatrixGraphMajorType();switch(AB){case b._BAR:case b._SCATTER:case b._BUBBLE:case b._AREA:if(AE.mAlpha===null||!z){AE.mAlpha=178.5;}break;case b._LINE:if(AD.mMarkerShape!==l.DssGraphMarkerShapeNone||AA.mObjectId===k.DssGraphRiser){if(AE.mAlpha===null||!z){AE.mAlpha=178.5;}}break;default:break;}if(AD.mMarkerShape===l.DssGraphMarkerShapeGMTick){if(AE.mAlpha===null||!z){AE.mAlpha=255;}}if(AE.mSimpleColor===null||!z){AE.mSimpleColor=A.call(this,AA,0,(AA.mSeriesId>=0&&AA.mGroupId>=0));}}else{if((AA.mSeriesId>=0&&AA.mGroupId===-3)){AE.mSimpleColor=Z.gColorPalette[AA.mSeriesId];}else{if((AA.mGroupId>=0&&AA.mSeriesId===-3)){AE.mSimpleColor=Z.gColorPalette[AA.mGroupId];}}}break;default:break;}this.UpdateFormatFill(AA,AE,AG,z);if(z){AE.restoreDefaults(false);}AA.mGroupId=AF;return AE;},ResolveFormat:function c(z,AB,y,AA){if(z){switch(y){case h:return Q.call(this,z,AB,AA);case t:return x.call(this,z,AB,AA);case X:return H.call(this,z,AB,AA);default:return{valid:false,object:z};}}return{valid:false,object:z};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.Obj","mstrmojo.num","mstrmojo.array","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMDataProvider");var u=mstrmojo,w=u.array,J=u.num,S=u.hash,AF=u.gm,B=AF.GMUtility,I=u.VisUtility,p=AF.EnumGraphType,AC=AF.EnumSubtype,AN=AF.EnumColorByType,P=AF.EnumMetricsPosition,AR=", ",R=" ",O=" ",b=AF.FormNameType;function H(AU){var AV=[];AU.forEach(function(AW){if(AW!==undefined){AV.push(AW);}});return AV;}function E(){var AZ=this.attributesColorMap,Ac=this.attributesColorMapID,Aa=AZ.length,AV,AX,AW,AY,AU;for(AX=0;AX<Aa;AX++){AY=Ac[AX];AU=typeof AY==="string"?AY.split(","):[AY];AV=AU.length;for(AW=0;AW<AV;AW++){var Ab=parseInt(AU[AW],10);if(Ab===-1){AZ[AX]=undefined;Ac[AX]=undefined;}}}this.attributesColorMap=H(AZ);this.attributesColorMapID=H(Ac);}function AH(AW,AU){var AV;if(AU>AW.mxIdx){return -1;}AV=AU;while(true){if(AW[AV]){return AV;}AV++;}}function Q(Aa,AV,AY,AZ){var AU=Aa.n,AX=Aa.fs&&Aa.fs[AY].n,AW="";if(AX===undefined){AX=" ";}if(AV===b.OFF){if(AY===0){AW=AU;}else{AW="";}}else{if(AV===b.ON){AW=AU+" "+AX;}else{if(AV===b.FORM_NAME_ONLY){AW=AX;}else{if(AV===b.SHOW_ATT_NAME_ONCE){if(AY===0){AW=AU+" "+AX;}else{AW=AX;}}else{if(AV===b.AUTO){if(AZ===1){AW=AU;}else{AW=AU+" "+AX;}}}}}}return AW;}function e(AW,AY,Aa){var Ab=this.ttlDispTp,AV=[],AX,AU=AY?AW.cs:AW.rs,AZ;for(AX=0;AX<AU;AX++){if(AW.otp===12){AZ=S.clone(AW);AZ.fid=AZ.fs[AX].id;delete AZ.fs;AZ.isRowAttribute=AY;AZ.tui=Aa;AZ.n=Q(AW,Ab,AX,AU);AV.push(AZ);}else{AZ=S.clone(AW);if(AW.fid!==undefined){AZ.fid=AW.fid;}else{AZ.fid=AW.id;}delete AZ.fs;AZ.isRowAttribute=AY;AZ.tui=Aa;if(AX===0){AZ.n=AW.n;}else{AZ.n="";}AV.push(AZ);}}return AV;}function AQ(AY){var AZ,AU,AX,AV=function(Aa){if(AU!==""){AU+=O;}AU+=Aa.headerText;},AW=function(Aa){if(/^(\-|\+)?([0-9]+|Infinity)$/.test(Aa)){return Number(Aa);}return NaN;};w.forEach(AY,function(Aa){for(var Ab in Aa){if(Aa.hasOwnProperty(Ab)&&!isNaN(AW(Ab))){AX=Aa[Ab];AU="";AZ=AX.forms[0];AX.cs=AZ.cs;AX.rs=AZ.rs;AX.headerID=AZ.headerID;AX.idx=AZ.idx;AX.o=AZ.o;AX.tui=AZ.tui;AX.ui=AZ.ui;AX.um=AZ.um;AX.stt=AZ.stt;w.forEach(AX.forms,AV);AX.headerText=AU;}}});}function AI(Aa,AV,AZ){var AY,AX=0,AW,AU;if(Aa&&Aa.length>0){AU=Aa.length;for(AY=0;AY<AU;AY++){AW=Aa[AY];if(!AW.fcnt){AW.fcnt=AZ?AW.cs:AW.rs;if(AW.otp===-1){AW.fcnt=1;}}if(AX+AW.fcnt>AV){return{depth:AY,formIndex:AV-AX};}AX+=AW.fcnt;}}return -1;}function l(AZ,AV,AX){var AU=AV.length,AY=[],Ab,Aa,AW;for(AW=0;AW<AU;AW++){Aa=AV[AW];if(Aa>=0&&AZ.es[Aa]){Ab=(AZ.es[Aa])[AX];}else{Ab="-1";}AY.push(Ab);}return AY;}function t(AU){if(!AU||AU.length===0){return undefined;}var AW={},AV,AX=AU.length;for(AV=0;AV<AX;++AV){AW[AU[AV]]=AV;}return AW;}function o(AX,AY){if(AY===null||AX<=0){return -1;}var AW=0;if(AX===1){AW=AY.children[0].levelIndex;}else{var AV=AY.children[0];var AU;for(AU=1;AU<AX;++AU){AV=AV.children[0];}AW=AV.levelIndex;}return AW;}function AP(AV,Ag,Ad){if(AV===null||AV.length===0||Ag===null||Ad===null){return null;}var AY=AV.length,Af=AV[0],AW=Ag[Af.index];if(AY===1){return AW;}var Ab,AX,AU={},Ac=[],Aa=[AW],Ae=[];for(Ab=1;Ab<AY;++Ab){AU=AV[Ab];Ac=Ag[AU.index];Aa.push(Ac);Ae=[];Ad.push(Ae);var AZ=AU.index-Af.index;AX=0;var Ah=0;while(AX<=AW.mxIdx){AX=AH(AW,AX+1);if(AX===-1){break;}Ae[Ah]=o(AZ,AW[AX]);Ah=AX;}Ae[Ah]=Ac.mxIdx+1;Af=AU;AW=Ac;}return Aa;}function AL(AU){AU=AU.replace(/\(/g,"-");AU=AU.replace(/\)/g,"");AU=AU.replace("$","");AU=AU.replace(/ /g,"");AU=AU.replace(/&nbsp;/g,"");AU=AU.replace(/,/g,"");if(isNaN(AU[0])){return AU.slice(1);}return AU;}function A(AZ,AX,AW,AY){if(!this.items[AZ]){I.visPrint("Cannot find data at index ("+AZ+", "+AX+")");}var Aa=this.items[AZ][AX];if(Aa===undefined){return null;}if(Aa===""||Aa.rv===""||Aa.rv==="--"){return null;}if(AW===undefined||AW===true){if(Aa.rv!==undefined){return B.parseNumeric(Aa.rv);}var AV=B.parseNumeric(AL(Aa.v));if(isNaN(AV)){I.visPrint("NaN from GetDataInLocalDataSet");AL(Aa.v);}return AV;}if(Aa.v!==undefined){return Aa.v;}var AU=this.getMetricNumberFormat(AY);if(AY!==undefined){return J.formatByMask(AU,Aa.rv);}return B.parseNumeric(Aa.rv);}function a(AV,AU,AX){if(!this.items[AV]){I.visPrint("Cannot find data at index ("+AV+", "+AU+")");}var AW=this.items[AV][AU];if(AW===""){return null;}return AW[AX];}function Y(Ae,Af,Ag,AV){var Ai=[],Ad=Ag.length,Ac,Aa=Ae.length,Ab=[],Ah,AZ;for(Ac=0;Ac<Ad;Ac++){Ah=Ag[Ac];AZ=Ah-Af;if(AZ>=0&&AZ<=Aa-1){Ai.push(Ae[AZ]);Ab.push(AZ);}}if(AV){var AX=Ab.length;var AU=0;var AY;for(Ac=0;Ac<AX;Ac++){AY=Ab[Ac];var AW=Ae.slice(AU,AY);AV.push(AW);AU=AY+1;}}return Ai;}function j(Aa,Ac,AU,Ad,Aj,Ag){var AW=Ac.length,AZ,Ab=[],AV,AX,Ae,Ai,AY=0,Af,Ah;for(AZ=0;AZ<AW;AZ++){AV=Ac[AZ];if(AZ===AW-1){AX=AU;}else{AX=Ac[AZ+1];}Ae=AX-AV;Ai=Ae/Ad;Af=Ai;Ah=[];while(Af--){if(Ag){if(Af===0){Ab.push(Aa[AY]);}else{if(Aj){Ah.push(Aa[AY]);}}AY++;}else{Ah.push(Aa[AY]);AY++;}}if(Aj){Aj.push(Ah);}}return Ab;}function y(AY,Aa,Ae,Ab,AV,AW){var AX,AZ=[],Ad,Ac;Ad=(AY||[]).length;Ac=[];if(Ab){for(AX=0;AX<Ad;AX++){var Af=AY[AX];if(Af&&Af.length&&AV.indexOf(Af[0].C)!==-1){AZ.push(Af);Ae.push(Ac);Ac=[];}else{Ac.push(AY[AX]);}}}else{var AU={};(AW||[]).forEach(function(Ag){AU[Ag/Aa]=true;});for(AX=0;AX<Ad;AX++){if(AU[AX]&&AX!==0){Ae.push(Ac);Ac=[];Ac.push(AY[AX]);}else{Ac.push(AY[AX]);}}Ae.push(Ac);}return AZ;}function AT(Ab,Ac,Ad){var Aa=Ad.length,AZ,AY,Af,Ae=Ab.length,AU=0,AX=0,AW=[],AV;for(AZ=0;AZ<Aa;AZ++){Af=Ad[AZ];AY=Af-Ac;if(AY>=0&&AY<=Ae-1){if(AY===0){continue;}AX=AY;AV=Ab.slice(AU,AX);AW.push(AV);AU=AX;}else{if(AY>Ae-1){break;}}}AV=Ab.slice(AU);AW.push(AV);return AW;}function AM(AU){return parseInt(AU,10)===AU;}function AS(AY,AX,Ad,AW){var AZ=0,AV,Aa=AY.mxIdx,Ac=[],AU,Ab=AW===0?"rs":"cs";while(AZ<=Aa){AV=AY[AZ];if(AV){AU=AV.forms[Ad];Ac.push(AU);AZ+=AU[Ab]||1;}else{AZ+=1;}if(AX>0&&AZ>AX){break;}}return Ac;}function V(AU,AW){var AV;if(AW==="All"){return true;}AV=AU.dropzones;if(AV){if(AV.indexOf(AW)>=0){return true;}}return false;}function n(AU,AW,AV){if(AU.ui!==AV){if(AU.pHd){n(AU.pHd,AW);}}AW.push(AU);}function h(AZ,AW,AY,Aa){var AV,AU=this.gts,AX;if(!AW){return ;}if(AZ==="all"||AZ===undefined){if(AZ===undefined){I.visPrint("zoneName use 'all' instead of undefined!");}n(AW,AY);return ;}if(AW.pHd){h.call(this,AZ,AW.pHd,AY,Aa);}AX=(Aa==="row"?AU.row:AU.col);AV=AX[AW.ui];if(V.call(this,AV,AZ)){AY.push(AW);}}function c(AU){return AU.textContent||AU.innerText||AU.nodeValue||"";}function f(Aa,AU,AY){var AZ=[],Ad,Ac,AX,Ab,AV,AW;for(AW=0;AW<AU.length;AW++){Ad=AU[AW];Ac=Aa[Ad.ui];AV=Ac.id;AX=Ac.es[Ad.idx];Ab=AY.indexOf(AV);if(Ab>=0){AZ[Ab]=Ad.idx;}}return AZ;}function X(Ab,AU){var Aa=[],Ad,Ac,AZ,AW,AY=AU.length,AX,AV;for(AV=0;AV<AY;AV++){Ad=AU[AV];AZ=Ad.forms.length;Ac=Ab[Ad.ui];for(AX=0;AX<AZ;AX++){AW=Ac.es[Ad.forms[AX].idx];Aa.push({unit:Ac,header:AW,o:Ad.o,tui:Ad.tui,dpt:Ad.tui+1});}}return Aa;}function g(AU){return B.restoreSpecialChars(AU);}function C(Aa,AZ){var AX=false,AW,AV;if(AZ){AW=AZ.split("&");if(AW.length>1){AX=true;}}if(Aa===undefined){var AU;if(AX){AU={};w.forEach(AW,function(Ab){AU[Ab]="";});}else{AU="";}return AU;}if(AZ){if(AX){var AY={};w.forEach(AW,function(Ab){AV=Aa[Ab];if(AV!==undefined&&typeof AV==="string"){AV=g(Aa[Ab]);}AY[Ab]=AV;});return AY;}return g(Aa[AZ]);}return Aa;}function AB(Ag,AW,AV,Ad){var Ae=[],Ak,Ai,Ah,AZ,AY=AW.length,Aa,AX,Ac;for(AX=0;AX<AY;AX++){Ak=AW[AX];if(Ak.stt===1){continue;}Ac=Ak.forms.length;Ah=Ag[Ak.ui];AZ=Ah.es[Ak.idx];var AU;if(Ad===true){var Aj={forms:[]};Ae.push(Aj);AU=Aj;}else{AU=Ae;}var Ab=[];for(Aa=0;Aa<Ac;Aa++){var Af=Ak.forms[Aa].idx;if(Ab[Af]){AU.push("");continue;}else{Ab[Af]=true;}if(Af>=0){AZ=Ah.es[Af];if(AV.length===1&&AZ&&AZ[AV]!==undefined){AU.push(C(AZ,AV));}else{Ai=Ai||S.copy(Ak);S.copy(Ak.forms[Aa],Ai);AZ.tid=Ah.id;AU.push(C(S.copy(AZ,Ai),AV));}if(Aa===Ac-1){Ai=null;}}else{AU.push("");}}}return Ae;}function AE(AZ,AV,AU){var AY=[],Ac,Aa,AX,AW,Ab=true;for(AW=0;AW<AV.length;AW++){Ac=AV[AW];Aa=AZ[Ac.ui];AX=Aa.es[Ac.idx];if(C(AX,AU)!==""){Ab=false;}AY.push(C(AX,AU));}if(Ab){AY.push(C(Aa,AU));}return AY;}function AA(Ae,Ag){var AU=Ae.mxIdx,AY,Af,AV=true,AW=false,Ac,Ad=-1,Ab,Ah=null,AX;for(AY=0;AY<=AU;AY++){Af=Ae[AY];if(Af){if(AV){var AZ=AH(Ae,AY+1);var Aa=Ae[AZ];if(Aa.idx===Af.idx){AW=true;}AV=false;if(AW===false){return ;}}Ab=Af.idx;if(Ab!==Ad){if(Ah){Ah[Ag]=Ac;}Ac=1;Ad=Ab;Ah=Af;}else{delete Ae[AY];Ac++;}}}if(Ah){Ah[Ag]=Ac;}if(AW){for(AY=0;AY<=AU;AY++){if(Ae[AY]){AX=AY;}}Ae.mxIdx=AX;}}function s(Aa,Ad){var AU=Aa.mxIdx,AY,Ac,AZ,Ab,AV,AX=this.getMetricCount(),AW=AX>0?AX:1;AV=(Ad==="cs");for(AY=0;AY<=AU;AY++){Ac=Aa[AY];if(Ac){AZ=Ac.forms[0];Ab=AZ[Ad];if(!Ab){Ab=1;}if(AV){Ac.numLeaves=Ab/AW;}else{Ac.numLeaves=Ab;}Ac.levelIndex=AY;}}}function k(Ab,AU,Ae){var AV=AU.mxIdx,Ac=0,AW,Ad,AZ,Aa,Af,AX,AY;for(AY=0;AY<=AV;AY++){AW=AU[AY];Ad=AW&&AW.forms[0];if(AW){while(true){Ac=AH(Ab,Ac);Af=Ab[Ac];if(Ab.isCustomGroupWithBanding){AX=Af.forms[1];}else{AX=Af.forms[0];}if(!Af.children){Af.children=[];}AZ=AX[Ae];if(!AZ){AZ=1;}Aa=Ad[Ae];if(!Aa){Aa=1;}if(AX.o<=Ad.o&&(AX.o+AZ)>=(Ad.o+Aa)){AW.pHd=Af;AW.pHdIdx=Ac;Af.children.push(AW);break;}else{Ac++;}}}}}function U(AY){var AX,AU,AZ=[],AW,AV,Aa={};for(AX in AY){AV=AY[AX].token;if(AV){AU=AV.elements;AW=AU.join();if(Aa[AW]===undefined){Aa[AW]=true;AZ.push(AY[AX]);}}else{AZ.push(AY[AX]);}}return AZ;}function D(AZ,AX){var AU=AZ.mxIdx,Aa=0,AY,AV,Ab=AX==="r"?"rs":"cs",AW,Ad,Ac;while(Aa<=AU){Ad=AZ[Aa];if(!Ad){Aa+=1;continue;}AV=Ad.forms[0].o;Ac=Ad.forms[0][Ab]||1;if(Ac>1){AY=Aa+(Ad.forms[1][Ab]||1);while(AY<Ac+AV){if(AZ[AY]){AW=AZ[AY].forms[0][Ab]||1;AZ[AY].forms.splice(0,0,Ad.forms[0]);AY+=AW;}else{AY+=1;}}}Aa+=Ac;}}var N=mstrmojo.declare(mstrmojo.Obj,null,{grpCnt:-1,srsCnt:-1,dps:null,gmm:null,getChartInfo:function(){return this.gmm.getChartInfo();},getTooltipForChartHeader:function(Ac,AX,Ae){var AZ=this.gmm,Ad=AZ.gmCtr,Aa=Ad.rowHeaderCnt,AY=Ad.colHeaderCnt,AV,Ab,AW=AX==="r",AU;if(AW){if(Aa===0){return ;}if(Ac.length>0){if(!Ae){Ac.push(null);}}AV=Aa;Ab=AZ.getRowTitleInfo();AU=this.getRowHeaders(0,"Rows","n&id&dei&o&at&idx");}else{if(AY===0){return ;}if(Ac.length>0){if(!Ae){Ac.push(null);}}AV=AY;Ab=AZ.getColTitleInfo();AU=this.getColHeaders(0,"Columns","n&id&dei&o&at&idx");}B.generateToolTipContent(0,AV,AW,Ab,AU,Ac);},getColorByValue:function(Aj,Ai,Ae,Ab){var AV=this.gmm,Ao=AV.gmCtr,Ak=Ao.view.model.docModel,Ag=AV.globalAttrMetricsColorMap,Ap=AV.colorType,AY,Ah,Al=Ao.palette,Ac=Al.length,Af=AV.attrMetricsColorMapIDMap,AZ,AW,Am,AU=Ao.thresholds,Aa,AX,Ad=AV.metricsColorMapID;if(Ab===undefined){Ab=true;}if(Ap===AN.METRICS){Aa=Ao.getColorByMetrics()[0];AX=this.getAssoCoordinatesWithMetricIndex(Aj,[Ai],Aa);AW=this.getPropValue(Aj,AX.C-this.getOffsetX(),"ti");if(AW!==undefined){AW=parseInt(AW,10)-1;Am=AU[AW];return(Am.fmt&&Am.fmt.bc)?mstrmojo.VisUtility.parseCSSColor(Am.fmt.bc,true):Ao.property.defaultsObj.shpFillClr;}if(Ab){return Ao.property.defaultsObj.shpFillClr;}else{return null;}}else{if(Ap===AN.NULL){return null;}}AY=this.getColorByToken(Aj,Ai,Ae);if(Ap===AN.METRICS_ITEM){AZ=Ad.indexOf(AY);}else{AZ=Af&&Af[AY];}if(AZ===undefined||AZ<0){return null;}if(Ao.globalColorMapping){var An=Ag[AZ];Ah=An&&Ak.getColorBy(An.levels,An.elements).color;}else{Ah=Al[AZ%Ac];}return Ah;},getColorByToken:function(Aj,Ai,Ae){var AW=this.gmm,Al=AW.gmCtr,An=AW.colorType,Ac=Al.getRowColorAttrsIndex(),Ah=Al.getColColorAttrsIndex(),Am=[],Ag,Ak,Ab,Af,AY,AZ,AU,Ad,AV;if(An===AN.METRICS_ITEM){Af=AW.getMetricCount();if(Af>0){if(Ae&&Ae.length>0){w.forEach(Ae,function(Ao){AU=(AW.getMetricIds())[Ao];Am.push(AU);});AY=Am.join(AR);return AY;}Ab=Ai%Af;AU=(AW.getMetricIds())[Ab];return AU;}I.visPrint("metric count is zero!!");return"";}if(An===AN.ATT||An===AN.ATT_METRICS){Ak=Ac.length;if(Ak>0){Ad=this.getHeaderObjectList(Aj,0,"all");}for(Ag=0;Ag<Ak;Ag++){AZ=Ac[Ag];Am[AZ.order]=Ad[AZ.index];}Ak=Ah.length;if(Ak>0){AV=this.getHeaderObjectList(Ai,1,"all");}for(Ag=0;Ag<Ak;Ag++){AZ=Ah[Ag];Am[AZ.order]=AV[AZ.index];}}else{I.visPrint("Unsupported Color By Type!");}Ak=Am.length;for(Ag=0;Ag<Ak;Ag++){Am[Ag]=Am[Ag].idx;}if(An===AN.ATT_METRICS&&Ae){var AX=Ae.length,Aa;for(Aa=0;Aa<AX;Aa++){Ab=Ae[Aa];AU=(AW.getMetricIds())[Ab];Am.push(AU);}}AY=Am.join(AR);return AY;},getHeaderObjectList:function d(AZ,AW,Ab){var AY=this.gmm,Ac=AY.modelRhs,Aa=AY.modelChs,AX=[],AV,AU;if(AW===0){AU=(Ac[Ac.length-1]);if(AU){AV=AU[AZ+this.oy];h.call(AY,Ab,AV,AX,AW===0?"row":"col");}}else{AU=(Aa[Aa.length-1]);if(AU){AV=AU[AZ+this.ox];h.call(AY,Ab,AV,AX,AW===0?"row":"col");}}return AX;},getRowHeaders:function r(AY,Ab,Af){var Aa,Ad=[AY,Ab,Af].join(":");if(this.rowHeaderPool===undefined){this.rowHeaderPool={};}Aa=this.rowHeaderPool;if(Aa[Ad]){return Aa[Ad];}var AZ=this.gmm,Ae=AZ.modelRhs,AW=[],Ac,AX,AV,AU=(Ae[Ae.length-1]);if(AU){AV=AU[AY+this.oy];h.call(AZ,Ab,AV,AW,"row");Ac=this.gmm.gts.row;AX=AB(Ac,AW,Af);}Aa[Ad]=AX;return AX;},getColHeaders:function x(AY,Ab,Af){var Ae,Ad=[AY,Ab,Af].join(":");if(this.colHeaderPool===undefined){this.colHeaderPool={};}Ae=this.colHeaderPool;if(Ae[Ad]){return Ae[Ad];}var AZ=this.gmm,Aa=AZ.modelChs,AW=[],Ac,AX,AV,AU=Aa[Aa.length-1];if(AU){AV=AU[AY+this.ox];h.call(AZ,Ab,AV,AW,"col");Ac=this.gmm.gts.col;AX=AB(Ac,AW,Af||"n");}Ae[Ad]=AX;return AX;},getSeriesLabel:function q(Ad,Ab,Ah){var AY,Ae=this.gmm,Ac,AZ=[],Ai=null,AV=false,AX=this.getChartInfo(),AW=AF.EnumABLDirection,Aa=AX.tp,Af=p,AU;if(AX.isABL&&AX.dirc===AW.VERTICAL){AV=true;}else{if(AX.isABL&&AX.dirc===AW.HORIZONTAL){AV=false;}else{if(Aa===Af.BUBBLE||Aa===Af.SCATTER){AV=true;}else{if(Aa===Af.GRID){AV=true;}else{I.visPrint("need to be implemented for this chart type!");}}}}if(AV){var Aj=this.gmm.modelRhs;if(!Aj||Aj.length===0){return[];}AU=(Aj[Aj.length-1]);if(AU){AY=AU[Ad+this.oy];h.call(Ae,"YAxis",AY,AZ,"row");Ai=this.gmm.gts.row;if(Ah===true){Ac=X(Ai,AZ);}else{Ac=AB(Ai,AZ,"n");}}}else{var Ag=this.gmm.modelChs;if(!Ag||Ag.length===0){return[];}AU=(Ag[Ag.length-1]);if(AU){AY=AU[this.ox+Ab];h.call(Ae,"XAxis",AY,AZ,"col");Ai=this.gmm.gts.col;if(Ah===true){Ac=X(Ai,AZ);}else{Ac=AB(Ai,AZ,"n");}}}return Ac;},getGroupElementIndexArray:function(Ac,Ab,Ae){var AZ,Ah,Ad=this.gmm,AW=Ad.clusteredBarSpecialCase,Aa=[],Ag=null,AV=false,AY=this.getChartInfo(),AX=AF.EnumABLDirection,AU;if(AW){return[-1];}if(AY.isABL&&AY.dirc===AX.VERTICAL){AV=true;}else{if(AY.isABL&&AY.dirc===AX.HORIZONTAL){AV=false;}}if(AV){var Af=this.gmm.modelChs;if(!Af||Af.length===0){return[];}AU=(Af[Af.length-1]);if(AU){AZ=AU[this.ox+Ab];h.call(Ad,"XAxis",AZ,Aa,"col");Ag=this.gmm.gts.col;Ah=f(Ag,Aa,Ae);}}else{var Ai=this.gmm.modelRhs;if(!Ai||Ai.length===0){return[];}AU=(Ai[Ai.length-1]);if(AU){AZ=AU[this.oy+Ac];h.call(Ad,"YAxis",AZ,Aa,"row");Ag=this.gmm.gts.row;Ah=f(Ag,Aa,Ae);}}return Ah;},getGroupLabel:function AO(Al,Ak,AZ){var Ah,Af,AW=this.gmm,Aa=AW.clusteredBarSpecialCase,AU=[],Ag=null,AV=false,Ad=this.getChartInfo(),Ac=AF.EnumABLDirection,Am=Ad.tp,AX=p,An=AW.getMetricCount(),AY;if(Aa){if(AZ===true){var Aj,Ae=[];for(Aj=0;Aj<An;Aj++){Ae.push({isAtt:false});}return Ae;}return[AW.getMetricNames()[Ak%An]];}if(Ad.isABL&&Ad.dirc===Ac.VERTICAL){AV=true;}else{if(Ad.isABL&&Ad.dirc===Ac.HORIZONTAL){AV=false;}else{if(Am===AX.BUBBLE||Am===AX.SCATTER){AV=true;}else{if(Am===AX.GRID){AV=true;}else{I.visPrint("need to be implemented for this chart type!");}}}}if(AV){var Ab=this.gmm.modelChs;if(!Ab||Ab.length===0){return[];}AY=(Ab[Ab.length-1]);if(AY){Ah=AY[this.ox+Ak];h.call(AW,"XAxis",Ah,AU,"col");Ag=this.gmm.gts.col;if(AZ===true){Af=X(Ag,AU);}else{Af=AB(Ag,AU,"n");}}}else{var Ai=this.gmm.modelRhs;if(!Ai||Ai.length===0){return[];}AY=(Ai[Ai.length-1]);if(AY){Ah=AY[this.oy+Al];h.call(AW,"YAxis",Ah,AU,"row");Ag=this.gmm.gts.row;if(AZ===true){Af=X(Ag,AU);}else{Af=AB(Ag,AU,"n");}}}return Af;},checkExcluded:function(AX,AW){var AZ=this.gmm.getMetricCount(),AY=false,AU;for(AU=0;AU<AZ;AU++){var AV=this.getData(AX,AW,true,AU);if(AV!==""&&AV!==undefined&&AV!==null&&!isNaN(AV)){AY=true;break;}}return !AY;},getData:function(AX,AV,AU,AW){var AY=this.getChartInfo();if((AY.tp===p.GRID)&&!AY.isPie){return 1234;}return A.call(this,AX,AV,AU,AW);},getPropValue:function(AV,AU,AX){var AW=this.getChartInfo();if(AW.tp===p.GRID&&AX===undefined){return 1234;}return a.call(this,AV,AU,AX);},getAssoDataWithMetricIndex:function(AU,AY,AX,AW){var Aa=this.gmm.getMetricCount(),AV=AY[0],AZ=Math.floor(AV/Aa)*Aa;return A.call(this,AU,AZ+AX,AW,AX);},getAssoCoordinatesWithMetricIndex:function(AU,AZ,AY){var Ab=this.gmm.getMetricCount(),AX=this.getOffsetX(),AW=this.getOffsetY(),AV=AZ[0],Aa=0;if(Ab>0){Aa=Math.floor(AV/Ab)*Ab;}else{Aa=AV;}return{R:AU+AW,C:Aa+AY+AX,ox:AX,oy:AW};},getSizeByMetricIndexForBubble:function W(AY,Ad){var Ab,Ac=this.gmm,Ae=Ac.gmCtr,AX=Ae.getSizeByMetrics(),AW=Ac.getMetricCount(),Af,Aa,AZ,AV,AU;if(AX.length<=0){return -1;}if(this.splitPlottingMetrics){Af=Ad[1];Aa=Af%AW;AU=Ae.getMetricsOnYAxis();AZ=AU.indexOf(Aa);Ab=AX[AZ%AX.length];}else{Af=Ad[0];Aa=Af%AW;AV=Ae.getMetricsOnXAxis();AZ=AV.indexOf(Aa);if(AZ===-1){I.visPrint("have no size by for this metric");return -1;}Ab=AX[AZ%AX.length];}return Ab;},getSizeByData:function AD(Ab,Ah){var Ae,Ag=p,AY=AF.EnumABLDirection,Af=this.gmm,Aj=Af.gmCtr,Aa=Aj.getSizeByMetrics(),AX=this.getChartInfo(),AZ=Af.getMetricCount(),Ai,AV,Ad,Ac,AW,AU;if(AX.tp!==Ag.BUBBLE){if((AX.isABL&&AX.dirc===AY.VERTICAL)||AX.tp===Ag.GRID){if(Aa.length>0&&AZ>0){Ae=Aa[0];Ai=Ah[0];AV=Math.floor(Ai/AZ)*AZ;return A.call(this,Ab,AV+Ae);}return -1;}if(AX.isABL&&AX.dirc===AY.HORIZONTAL){if(Aa.length>0&&AZ>0){Ae=Aa[0];Ai=Ah[0];AV=Math.floor(Ai/AZ)*AZ;return A.call(this,Ab,AV+Ae);}return -1;}}else{if(Aa.length<=0){return -1;}if(this.splitPlottingMetrics){Ai=Ah[1];Ad=Ai%AZ;AV=Math.floor(Ai/AZ)*AZ;AU=Aj.getMetricsOnYAxis();Ac=AU.indexOf(Ad);Ae=Aa[Ac%Aa.length];}else{Ai=Ah[0];Ad=Ai%AZ;AV=Math.floor(Ai/AZ)*AZ;AW=Aj.getMetricsOnXAxis();Ac=AW.indexOf(Ad);if(Ac===-1){I.visPrint("have no size by for this metric");return -1;}Ae=Aa[Ac];}return A.call(this,Ab,AV+Ae);}},getMetricNumberFormat:function(AV){var AU=this.gmm;return AU.getMetricNumberFormat(AV);},printAll:function(){I.visPrint("-----------------------("+this.cri+","+this.cci+")+------------------------------");var AV,AU;for(AV=0;AV<this.ht;AV++){var AW="";for(AU=0;AU<this.wd;AU++){var AX=this.items[AV][AU];if(!AX.v){I.visPrint("Why!");}AW+=(AX.v+" ");}I.visPrint(AW);}},getASingleColumn:function(Aa,Ab){var AX=Aa+Ab,AZ=[],AV=this.ox,AU=this.oy,AY,AW;for(AY=0;AY<this.ht;AY++){for(AW=0;AW<this.wd;AW++){if(AW===AX){AZ.push({R:AY+AU,C:AW+AV,mIdx:Ab});if(AM(AW+AV)===false){I.visPrint("warning");}}}}},getGraphCellSingleColumn:function(AU,AX,AY){var Ad=AX.length,Ab=[],AW=this.ox,AV=this.oy,Aa,AZ,Ae,Ac;for(Aa=0;Aa<this.ht;Aa++){Ae=[];for(AZ=0;AZ<Ad;AZ++){Ac=AX[AZ];Ae.push({R:Aa+AV,C:AU+Ac+AW,mIdx:Ac,grp:AY,didx:AZ});if(AM(AU+Ac+AW)===false){I.visPrint("warning");}}Ab.push(Ae);}return Ab;},getGraphCellSingleRow:function(AY,AZ){var AW=this.gmm.getMetricCount(),Ah=this.items[AZ],Ac=Ah.length/AW,Af=AY.length,Ad=[],AX=this.ox,AV=this.oy,Ab,Aa,Ae,AU,Ag;for(Ab=0;Ab<Ac;Ab++){AU=Ab*AW;Ag=[];for(Aa=0;Aa<Af;Aa++){Ae=AY[Aa];Ag.push({R:AZ+AV,C:AU+Ae+AX,mIdx:Ae,grp:AZ,didx:Aa});if(AM(AU+Ae+AX)===false){I.visPrint("warning");}}Ad.push(Ag);}return Ad;},getGroupCount:function(){if(this.grpCnt>0){return this.grpCnt;}var AZ,AV=this.getChartInfo(),AX=AV.tp,AW=AF.EnumABLDirection,AY=p,Aa=this.gmm,AU=Aa.clusteredBarSpecialCase,Ab=this.gmm.getMetricCount();if(AV.isABL&&AV.dirc===AW.VERTICAL){if(AU){AZ=this.pmi.length;}else{if(Ab===0){AZ=this.wd;}else{AZ=this.wd/Ab;}}this.grpCnt=AZ;return AZ;}if(AV.isABL&&AV.dirc===AW.HORIZONTAL){if(AU){AZ=this.pmi.length;}else{AZ=this.items.length;}this.grpCnt=AZ;return AZ;}if(AX===AY.BUBBLE||AX===AY.SCATTER){if(!this.splitPlottingMetrics){var Ac=this.pmi;AZ=Ac.length;this.grpCnt=AZ;return AZ;}AZ=1;this.grpCnt=AZ;return AZ;}if(AX===AY.GRID){if(Ab===0){return this.wd;}return this.wd/Ab;}I.visPrint("LocalDataSet::getGroupCount for this type is not implemented");return 0;},getSeriesCount:function(){if(this.srsCnt>0){return this.srsCnt;}var Ab=this.getChartInfo(),Aa=AF.EnumABLDirection,AX=p,AW,AV=this.gmm,AZ=AV.clusteredBarSpecialCase,AY=AV.getMetricCount(),AU;if(Ab.isABL&&Ab.dirc===Aa.VERTICAL){if(AZ){AU=this.ht;}else{if(!this.splitPlottingMetrics){AU=this.ht*this.pmi.length;}else{AU=this.ht;}}}else{if(Ab.isABL&&Ab.dirc===Aa.HORIZONTAL){if(AZ){AU=this.ht;}else{if(AY===0){AW=this.wd;}else{AW=this.wd/AY;}if(!this.splitPlottingMetrics){AU=AW*this.pmi.length;}else{AU=AW;}}}else{if(Ab.tp===AX.BUBBLE||Ab.tp===AX.SCATTER){if(!this.splitPlottingMetrics){AU=this.ht;}else{AU=this.ht;}}else{if(Ab.tp===AX.GRID){if(this.items){AU=this.items.length;}else{AU=1;}}else{AU=0;I.visPrint("LocalDataSet::getSeriesCount for this type is not implemented");}}}}this.srsCnt=AU;return AU;},getDataInGroup:function(AZ,Ax,Ag){var Ar,At,A0,Av,Au,An=this.getChartInfo(),Al=AF.EnumABLDirection,Ae=p,Aw=An.isPie,Aa=this.gmm,Ay=Aa.gmCtr,Ac=Ay.onlyMetricNamesOnAxisForGridPie,Ap=Ay.hasTotalForPie(),AW,Ai,Ak,AY,Aj,Aq,AX,Ab,Ah,As,Ao,Az,Af=false,AV=Ay.totalStartCols,Am=Ay.piePartition;if(An.tp===Ae.BUBBLE||An.tp===Ae.SCATTER){Ab=this.splitPlottingMetrics;Ah=Aa.getMetricCount();if(Ah===0){Ah=1;}Ar=[];As=this.wd/Ah;for(Av=0;Av<As;Av++){Az=Av*Ah;Ao=AZ;if(Ab){Ao=0;}A0=this.getGraphCellSingleColumn(Az,Ax[Ao],AZ);if(Aw){if(!Ap){Ai=[];AW=AT(A0,this.oy,Ay.piePartition);Ak=AW.length;for(Au=0;Au<Ak;Au++){AX=mstrmojo.hash.clone(AW[Au][0]);AX.fakeTotal=true;Ai.push(AX);}}else{AW=[];Ai=Y(A0,this.oy,Ay.totalRows,AW);Ak=AW.length;}for(Au=0;Au<Ak;Au++){Ai[Au].slicesOfPie=AW[Au];}Ar=Ar.concat(Ai);}else{Ar=Ar.concat(A0);}}return Ar;}if((An.isABL&&An.dirc===Al.VERTICAL)||(An.tp===Ae.GRID)){Ar=[];var Ad=this.wd/this.getGroupCount();Az=Ad*AZ;At=Ax.length;if(At===0&&(An.tp===Ae.GRID)&&Aw){At=1;Af=true;}for(Av=0;Av<At;Av++){if(Ac){A0=this.getGraphCellSingleColumn(Az,[Ag],AZ);}else{if(Af){A0=this.getGraphCellSingleColumn(Az,[0],AZ);}else{A0=this.getGraphCellSingleColumn(Az,Ax[Av],AZ);}}if(Aw){if(!Ap){Ai=[];AW=AT(A0,this.oy,Ay.piePartition);Ak=AW.length;for(Au=0;Au<Ak;Au++){AX=mstrmojo.hash.clone(AW[Au][0]);AX.fakeTotal=true;Ai.push(AX);}}else{AW=[];Ai=Y(A0,this.oy,Ay.totalRows,AW);Ak=AW.length;}for(Au=0;Au<Ak;Au++){Ai[Au].slicesOfPie=AW[Au];}Ar=Ar.concat(Ai);}else{Ar=Ar.concat(A0);}}return Ar;}if(An.isABL&&An.dirc===Al.HORIZONTAL){Ar=[];At=Ax.length;for(Av=0;Av<At;Av++){A0=this.getGraphCellSingleRow(Ax[Av],AZ);if(Aw){if(!Ap){AY=[];Aj=y(A0,Aa.getMetricCount(),AY,false,AV,Am);Aq=AY.length;for(Au=0;Au<Aq;Au++){var AU=mstrmojo.hash.clone(AY[Au][0]);AU.fakeTotal=true;Aj.push(AU);}}else{AY=[];Aj=y(A0,Aa.getMetricCount(),AY,true,AV,Am);Aq=AY.length;}for(Au=0;Au<Aq;Au++){Aj[Au].slicesOfPie=AY[Au];}Ar=Ar.concat(Aj);}else{Ar=Ar.concat(A0);}}return Ar;}I.visPrint("LocalDataSet::getDataInGroup for this type is not implemented");},getMaxValue:function(){return 9999;},getMinValue:function(){return -9999;},getRowCount:function(){return this.ht;},getColumnCount:function(){return this.wd;},getOffsetX:function(){return this.ox;},getOffsetY:function(){return this.oy;},getMetrics:function(){var AU=this.gmm.metrics;if(!AU){I.visPrint("none metrics found!");return null;}return AU;},getMetric:function(AV){var AU=this.getMetrics();if(AU){if(AU.es.length>AV){return AU.es[AV];}return null;}return null;},clearDataProviders:function(){this.dps=null;},generateDataProvider:function K(){if(this.dps){return this.dps;}var AU=this.gmm,AX,Ar,Az,At,Aj,As,Al,Ap,Am,Ak=this.trConfigPool,Aw=AU.gmCtr,Ab,Ay=this,Ax=AU.shallWeUseGroupInfo,Ac=AU.clusteredBarSpecialCase,AW=AU.onlyMetricNamesOnAxisForGridPie,Au=AU.isMetricNamesOnXAxis,AV=this.splitPlottingMetrics,Af=this.getChartInfo(),AZ=p,Ad=AF.EnumABLDirection,Ae=this.metricsOnAngleBy,Ag=this.mpos,An=this.metrics,Ai=0,Ao=0,Aq=this.splitPie,Av=AU.isBlankGrid;if(Ak){var Ah=Ak.globalProp;if(Ah){Ai=Ah.trdBwdFst!==undefined?Ah.trdBwdFst:0;Ao=Ah.trdFwdFst!==undefined?Ah.trdFwdFst:0;}}if(Ax){Ab=Aw.getGroupInfo(true);}Aj=this.getGroupCount();if(Af.tp===AZ.BUBBLE||Af.tp===AZ.SCATTER){Ar=this.pmi;Az=[];if(!AV){At=[];for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(Ap,Ar);At.push(As);}Al=this.addDisposable(new AF.GMEnhancedDataProvider({fwdSteps:Ao,bwdSteps:Ai,pmi:Ar,data:At,lds:this,sbc:true,dataSbc:false,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq}));Az.push(Al);this.dps=Az;}else{for(Am=0;Am<Ar.length;Am++){AX=Ar.slice(Am,Am+1);At=[];for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(Ap,AX);At.push(As);}Al=this.addDisposable(new AF.GMEnhancedDataProvider({fwdSteps:Ao,bwdSteps:Ai,pmi:AX,data:At,lds:this,sbc:true,dataSbc:false,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq}));Az.push(Al);}this.dps=Az;}w.forEach(Az,function(A1){var A2=A1.fwdLbs,A0=A1.bwdLbs;if(A2&&A2.length>0){Ay.flb=A2;}if(A0&&A0.length>0){Ay.blb=A0;}});return Az;}if(Af.isABL&&Af.dirc===Ad.VERTICAL){Ar=this.pmi;Az=[];if(!AV){At=[];if(Ac){for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(0,Ar.slice(Ap,Ap+1));At.push(As);}}else{for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(Ap,Ar);At.push(As);}}Al=this.addDisposable(new AF.GMEnhancedDataProvider({fwdSteps:Ao,bwdSteps:Ai,pmi:Ar,data:At,lds:this,sbc:true,dataSbc:true,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq}));Az.push(Al);this.dps=Az;w.forEach(Az,function(A1){var A2=A1.fwdLbs,A0=A1.bwdLbs;if(A2&&A2.length>0){Ay.flb=A2;}if(A0&&A0.length>0){Ay.blb=A0;}});}else{if(Ax){w.forEach(Ab,function(A0){AX=[];w.forEach(A0,function(A1){if(A1!==undefined&&A1>=0){AX.push([A1]);}});At=[];for(Ap=0;Ap<Aj;Ap++){As=Ay.getDataInGroup(Ap,AX);At.push(As);}Al=Ay.addDisposable(new AF.GMEnhancedDataProvider({fwdSteps:Ao,bwdSteps:Ai,pmi:AX,data:At,lds:Ay,sbc:true,dataSbc:true,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq}));Az.push(Al);});}else{for(Am=0;Am<Ar.length;Am++){AX=Ar.slice(Am,Am+1);At=[];for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(Ap,AX);At.push(As);}Al=this.addDisposable(new AF.GMEnhancedDataProvider({fwdSteps:Ao,bwdSteps:Ai,pmi:AX,data:At,lds:this,sbc:true,dataSbc:true,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq}));Az.push(Al);}}this.dps=Az;w.forEach(Az,function(A1){var A2=A1.fwdLbs,A0=A1.bwdLbs;if(A2&&A2.length>0){Ay.flb=A2;}if(A0&&A0.length>0){Ay.blb=A0;}});}return Az;}if(Af.isABL&&Af.dirc===Ad.HORIZONTAL){Ar=this.pmi;Az=[];if(!AV){At=[];if(Ac){for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(0,Ar.slice(Ap,Ap+1));At.push(As);}}else{for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(Ap,Ar);At.push(As);}}Al=this.addDisposable(new AF.GMEnhancedDataProvider({fwdSteps:Ao,bwdSteps:Ai,pmi:Ar,data:At,lds:this,sbc:true,dataSbc:true,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq}));Az.push(Al);this.dps=Az;w.forEach(Az,function(A1){var A2=A1.fwdLbs,A0=A1.bwdLbs;if(A2&&A2.length>0){Ay.flb=A2;}if(A0&&A0.length>0){Ay.blb=A0;}});}else{if(Ax){w.forEach(Ab,function(A0){AX=[];w.forEach(A0,function(A1){if(A1!==undefined&&A1>=0){AX.push([A1]);}});At=[];for(Ap=0;Ap<Aj;Ap++){As=Ay.getDataInGroup(Ap,AX);At.push(As);}Al=Ay.addDisposable(new AF.GMEnhancedDataProvider({fwdSteps:Ao,bwdSteps:Ai,pmi:AX,data:At,lds:Ay,sbc:true,dataSbc:true,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq}));Az.push(Al);});}else{for(Am=0;Am<Ar.length;Am++){AX=Ar.slice(Am,Am+1);At=[];for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(Ap,AX);At.push(As);}Al=this.addDisposable(new AF.GMEnhancedDataProvider({fwdSteps:Ao,bwdSteps:Ai,pmi:AX,data:At,lds:this,sbc:true,dataSbc:true,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq}));Az.push(Al);}}this.dps=Az;w.forEach(Az,function(A1){var A2=A1.fwdLbs,A0=A1.bwdLbs;if(A2&&A2.length>0){Ay.flb=A2;}if(A0&&A0.length>0){Ay.blb=A0;}});}return Az;}if(Af.tp===AZ.GRID){Ar=this.pmi;Az=[];if(!AV){At=[];var AY,Aa;for(Ap=0;Ap<Aj;Ap++){if(AW){AY=[];Aa=[];w.forEach(Ae||[],function(A0){As=this.getDataInGroup(Ap,Ar,A0);AY.push(As);},this);if(Au){At=At.concat(AY);}else{w.forEach(AY||[],function(A0){Aa=Aa.concat(A0);});At.push(Aa);}}else{As=this.getDataInGroup(Ap,Ar);At.push(As);}}if(AW){Aq=false;}Al=this.addDisposable(new AF.GMDataProvider({pmi:Ar,data:At,lds:this,sbc:false,dataSbc:true,metrics:An,mpos:Ag,metricsOnAngleBy:Ae,splitPie:Aq,isBlankGrid:Av}));Az.push(Al);this.dps=Az;}else{for(Am=0;Am<Ar.length;Am++){AX=Ar.slice(Am,Am+1);At=[];for(Ap=0;Ap<Aj;Ap++){As=this.getDataInGroup(Ap,AX);At.push(As);}Al=this.addDisposable(new AF.GMDataProvider({pmi:AX,data:At,lds:this,sbc:false,dataSbc:true,metrics:An,mpos:Ag,metricsOnAngleBy:AX[0],splitPie:Aq,isBlankGrid:Av}));Az.push(Al);}this.dps=Az;}return Az;}I.visPrint("generateDataProvider Need to be implemented!");}});mstrmojo.gm.GMDataModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMDataModel",gmCtr:undefined,modelChs:[],modelRhs:[],rp:null,cp:null,gts:null,rct:-1,cct:-1,cir:-1,cic:-1,ldss:[],plottingMetricsIndex:null,splitPlottingMetrics:null,zoneNames:["dummy","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],metrics:null,chtInfo:null,colorType:AN.ATT,metricsType:undefined,getBreakByUnits:function(){var AU=this.dz,AV=[],AW,AX=AU.BreakBy;if(AX){AW=AX.TemplateUnit;if(AW){w.forEach(AW,function(AY){AV.push(S.clone(AY));});}}return AV;},getChartInfo:function(){return this.gmCtr.getChartInfo();},getMetricNames:function(){return this.getMetricProp("n");},getMetricIds:function(){return this.getMetricProp("oid");},getFullNumberFormat:function(){return this.fullNf;},isMetricInZone:function(Aa,AW){var AV=this.dz,AZ,AX=false,AY,AU;AZ=this.zoneNames[AW];if(AV&&AZ){AU=AV[AZ];AY=AU.TemplateMetric;w.forEach(AY,function(Ab){if(Ab.idx===Aa){AX=true;}});}return AX;},getMetricProp:function(Aa){var AY=[],AX,AW,AV=this.metrics,AZ;if(!AV){return AY;}AZ=AV.es;AW=AZ.length;for(AX=0;AX<AW;AX++){var AU=AZ[AX];if(Aa){AY.push(AU[Aa]);}else{AY.push(AU);}}return AY;},getUnitAttributesCountOnRow:function(AY){var Ac=this.gts.row,Aa=Ac.length,AZ=this.gmCtr,Ad,AV,AX,AW,AU=this.getChartInfo(),Ab=0;if(Aa!==1){if(AY){w.forEach(Ac,function(Ae){Ab+=B.getAttributeFormCnt(Ae);});}else{Ab=Aa;}return Ab;}if(AY){Ad=AZ.getGMHeaderCount("Rows");AV=AZ.getGMHeaderCount("YAxis");AX=AZ.getGMHeaderCount("BreakBy");AW=AZ.getGMHeaderCount("SliceBy");}else{Ad=AZ.getAttributesOnDropZone("Rows","n").length;AV=AZ.getAttributesOnDropZone("YAxis","n").length;AX=AZ.getAttributesOnDropZone("BreakBy","n").length;AW=AZ.getAttributesOnDropZone("SliceBy","n").length;}if(AU.isABL&&AU.dirc===AF.EnumABLDirection.HORIZONTAL){return Ad+AV;}return Ad+AX+AV+AW;},getUnitAttributesCountOnCol:function(AY){var AX,AV,Aa=this.gts.col,AZ=0;AV=Aa.length;var AU=this.gts.col[AV-1];if(AU&&AU.otp===-1){AZ=AV-1;}else{AZ=AV;}if(AY){var AW=0;for(AX=0;AX<AZ;AX++){AW+=B.getAttributeFormCnt(Aa[AX]);}return AW;}else{return AZ;}},getPathToHeaderObject:function(AX,AV,AZ){var AW=[],AU,AY;n(AV,AW);if(AX===0){AY=this.gts.row;}else{AY=this.gts.col;}AU=AB(AY,AW,AZ);return AU;},collectHeaderObj:function(AU,AW,AV){n.call(this,AU,AW,AV);},getMetricCount:function(){var AU=this.metrics;if(!AU){return 0;}return(AU.es?AU.es.length:0);},getMetricNumberFormat:function(AU){var AW=this.mx,AV=AW[AU];if(AW&&AV){return g(AV.numfmt);}return undefined;},init:function AK(AY){this.ldss=[];this.modelChs=[];this.modelRhs=[];this._super(AY);this.cir=this.cp.length;this.cic=this.rp.length;var AX,AW,AZ=this.gts.row.length,AV=this.gts.col.length;var AU=this.gts.col[AV-1];this.mpos=-1;if(AU&&AU.otp===-1){this.metrics=AU;this.mpos=AV-1;if(this.gmCtr&&this.gmCtr.view&&this.gmCtr.view.excludeData){this.metrics.es=this.mx;w.forEach(this.metrics.es,function(Aa){if(Aa.did&&!Aa.oid){Aa.oid=Aa.did;}});}}for(AX=0;AX<AZ;AX++){this.modelRhs.push({});}for(AW=0;AW<AV;AW++){this.modelChs.push({});}this.createPlottingMetricsIndex();},createLocalDataSet:function M(Af,Ae){var Ah=this.gmCtr,Aj=Ah.getChartInfo(),Ab=Ah.getMetricsOnAngleBy(),Aa=this.rp,AW=this.cp,AV=this.rct,Al=this.cct,AU=this.ldss,AX,Ak,Ac;var AZ=-1;var Ai=-1;if(Ae===AW.length-1){AZ=Al-AW[Ae];}else{AZ=AW[Ae+1]-AW[Ae];}if(Af===Aa.length-1){Ai=AV-Aa[Af];}else{Ai=Aa[Af+1]-Aa[Af];}if(Ai===0){Ai=1;}if(AZ===0){AZ=1;}var AY=this.addDisposable(new N({trConfigPool:this.trConfigPool,cri:Af,cci:Ae,ox:AW[Ae],oy:Aa[Af],wd:AZ,ht:Ai,gmm:this,pmi:this.plottingMetricsIndex,metrics:this.metrics,mpos:this.mpos,splitPlottingMetrics:this.splitPlottingMetrics,metricsOnAngleBy:Ab,splitPie:Ah.splitPiesInGraphCellForABL()}));AU[this.cir*Af+Ae]=AY;this.feedLds(Af,Ae);if(Aj.isABL){AY.fses={};AY.bses={};AY.xvar={};Ak=this.getMetricCount();for(AX=0;AX<Ak;AX++){Ac=Ah.getTrendLinesObjectForMetric(AX,Af,Ae,undefined,true)[0];if(Ac&&Ac.inChartModel[0]){var Ag=Ac.inChartModel,Ad=Ac["x-vars"];if(Ad&&Ad.length>0){AY.validXVar=Ad;}w.forEach(Ag,function(An){var Ao=An.fse,Am=An.bse;if(Ao&&Ao.length>0){AY.validFse=Ao;}if(Am&&Am.length>0){AY.validBse=Am;}});}}}},feedLds:function G(Ab,Aa){var Aj=this.gmCtr,Ae=Aj.firstRes,AV=Ae.gvs,AW=AV.items,Ai=this.dataRect,Ad=this.ldss,Ac=this.rp,Ah=this.cp,AY=this.rct,AU=this.cct,Af,Ag=Ad[Ab*this.cir+Aa],AX,AZ;if(!AW||Ac[Ab]===undefined||Ah[Aa]===undefined||Ac[Ab]>Ai.y+Ai.h||Ah[Aa]>Ai.x+Ai.w){return ;}AX=AW.slice(Ac[Ab],(Ac[Ab+1]||AY));Af=[];for(AZ=0;AZ<AX.length;AZ++){Af.push(AX[AZ].items.slice(Ah[Aa],(Ah[Aa+1]||AU)));}Ag.items=Af;},feedLdss:function AG(AU,AX,AV,AW){this.dataRect={x:AU,y:AX,w:AV,h:AW};},feedChs:function AJ(Al){var Ap,Am,Ai,Ad=this.modelChs,Ah=Al.items,Au=Ah.length,Ab=this.getUnitAttributesCountOnCol(),As=this.gts.col,AV,An,AY,Ak,Ao,Ag,Af,At=false,AX;for(Ap=0;Ap<Au;Ap++){AV=AI(this.gts.col,Ap,false);An=AV.depth;Af=this.gts.col[An];Ag=An;Ai=Ad[An];AY=Ah[Ap].items;Ak=AY.length;Ao=null;for(Am=0;Am<Ak;Am++){var Aa=AY[Am];At=true;if(!Ai[Aa.o]){Ai[Aa.o]={forms:[]};}else{At=false;}Ai[Aa.o].forms.push(Aa);if(Aa.rs!==undefined&&Aa.rs>1){var Ac=Aa.rs;for(var AU=0;AU<Ac-1;AU++){var Aj=S.copy(Aa);Aj.rs=1;Aj.headerText="";Ai[Aa.o].forms.push(Aj);}}if(Ai.mxIdx===undefined||Ai.mxIdx<Aa.o){Ai.mxIdx=Aa.o;}Ao=Aa;Aa.headerID=Aa.idx;if(Aa.idx>=0){AX=this.headerInfoToProp(1,Aa,"n&bftp")[0];Aa.headerText=AX.n;Aa.bftp=AX.bftp;if(Aa.cet){var AW=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Ar=Af.es[lastHeaderInRow.idx];AW.attrs.push({tid:lastHeaderInRow.cet,id:Ar.id,n:Ar.n});}}else{Aa.headerText="";}if(Aa.fi!==undefined){if(As[An].otp===12){Aa.fid=As[An].fs[Aa.fi].id;}else{if(As[An].otp>=0){Aa.fid=As[An].id;}}}if(Aa.stt){Aa.headerID=-1;if(Aa.cs===undefined&&Aa.rs!==undefined){Aa.cs=Aa.rs;}}if(Ai.length===undefined){Ai.length=1;}else{if(At){Ai.length++;}}}}var Ae=this.gts.col,AZ,Aq;for(Ap=0,Aq=Ae.length;Ap<Aq;Ap++){AZ=Ae[Ap];if(typeof AZ.t==="number"&&AZ.t===1){if(!AZ.rs||AZ.rs<=1){continue;}Ai=Ad[Ap];Ai.isCustomGroupWithBanding=true;D(Ai,"c");}}for(Ap=1;Ap<=Ag;Ap++){k(Ad[Ap-1],Ad[Ap],"cs");}for(Ap=0;Ap<Ab;Ap++){s.call(this,Ad[Ap],"cs");}},feedRhs:function F(AV){var Ar,Ap,As,Ao=this.modelRhs,Ak=AV.items,Aw=this.gmCtr,Au=this.gts.row,An=Au.length,Ac=Ak.length,Aq,Aa;if(Ac===1){var AZ=Aw.getAttributesOnDropZone("Rows","n"),AW=Aw.getAttributesOnDropZone("YAxis","n");if(this.eg||(An===0&&(AZ.length+AW.length===0))){Ac=0;}}for(Ar=0;Ar<Ac;Ar++){var Al=Ak[Ar].items;var Ay=Al.length;while(Ay--){var Av=Al[Ay];Av.headerID=Av.idx;Aq=Av.tui;if(Av.stt){Av.headerText="Subtotal";Av.headerID=-1;}else{if(Av.idx>=0){Aa=this.headerInfoToProp(0,Av,"n&bftp")[0];Av.headerText=Aa.n;Av.bftp=Aa.bftp;if(Av.cet){var AY=this.cetSelectors=this.cetSelectors||{attrs:[],metrics:[]},Aj=this.gts.row[Aq],At=Aj.es[Av.idx];AY.attrs.push({tid:Av.cet,id:At.id,n:At.n});}}else{Av.headerText="";}}if(Av.fi!==undefined){Av.fid=Au[Aq].fs[Av.fi].id;}var AU=Ao[Aq];if(!AU[Av.o]){AU[Av.o]={forms:[]};if(AU.length===undefined){AU.length=1;}else{AU.length++;}}var AX=S.copy(Av);AU[Av.o].forms.push(AX);if(AU.mxIdx===undefined||AU.mxIdx<Av.o){AU.mxIdx=Av.o;}if(Av.cs&&Av.cs>1){var Ab=Av.cs,Ah,Am;for(Ah=0;Ah<Ab-1;Ah++){Am=S.copy(Av);Am.cs=1;Am.headerText="";AU[Av.o].forms.push(Am);}AX.cs=1;}}}var Ag,Ax;for(Ar=0;Ar<An;Ar++){Ag=Ao[Ar];Ax=Ag.mxIdx;for(Ap=0;Ap<=Ax;Ap++){var Ad=Ag[Ap];if(Ad&&Ad.forms){Ad.forms.reverse();}}}var Af=this.gts.row,Ae,Ai;for(Ar=0,As=Af.length;Ar<As;Ar++){Ae=Af[Ar];if(typeof Ae.t==="number"&&Ae.t===1){if(!Ae.cs||Ae.cs<=1){continue;}Ai=Ao[Ar];Ai.isCustomGroupWithBanding=true;D(Ai,"r");}}for(Ar=1;Ar<An;Ar++){k(Ao[Ar-1],Ao[Ar],"rs");}for(Ar=0;Ar<An;Ar++){s.call(this,Ao[Ar],"rs");}},extractInfoLowestHeaderInfoToAttrObj:function(){AQ(this.modelChs);AQ(this.modelRhs);},createPlottingMetricsIndex:function(){var Am=this.gmCtr,AY=p,Ab=Am.getChartInfo(),An,Ae,Ad,Ai,Ag,Ak,AW,Ac,Aa,AV,Al,AU,Ah,AX,AZ=AF.EnumABLDirection,Af;Ac=Am.getMetricsOnXAxis();Aa=Am.getMetricsOnYAxis();AV=Am.getSizeByMetrics();Al=Ac.length;AU=Aa.length;AX=AV.length;if(Ab.isABL){AW=[];if(Ab.dirc===AZ.VERTICAL){Af=Aa;}else{Af=Ac;}Ah=Af.length;for(Ai=0;Ai<Ah;Ai++){AW.push([Af[Ai]]);}}if(Ab.tp===AY.GRID){if(Am.isPie){if(this.splitPlottingMetrics){An=Am.getMetricsOnAngleBy();Ae=An.length;AW=[];for(Ad=0;Ad<Ae;Ad++){Ak=[];Ak.push(An[Ad]);AW.push(Ak);}}else{AW=[[0]];}}else{AW=[[0]];}}else{if(Ab.tp===AY.BUBBLE||Ab.tp===AY.SCATTER){AW=[];if(this.splitPlottingMetrics){for(Ag=0;Ag<AU;Ag++){for(Ai=0;Ai<Al;Ai++){AW.push([Ac[Ai],Aa[Ag]]);}}}else{var Aj=Math.min(Al,AU);if(Ab.tp===AY.BUBBLE){Aj=Math.min(Aj,AX);}for(Ai=0;Ai<Aj;Ai++){AW.push([Ac[Ai],Aa[Ai]]);}}}}this.plottingMetricsIndex=AW;return AW;},headerInfoToProp:function(AU,AX,AY){var AW=[AX];var AV;if(AU===0){AV=this.gts.row;}else{AV=this.gts.col;}return AE(AV,AW,AY);},collectHeadersObjects:function(AW,AY){var AU=null;var AV;if(AW===0){AU=this.modelRhs;AV=AI(this.gts.row,AY,true);}else{AU=this.modelChs;AV=AI(this.gts.col,AY,false);}var AX=AU[AV.depth];return AS(AX,100,AV.formIndex,AW);},collectHeadersLabels:function(AU,AX){var AW=this.collectHeadersObjects(AU,AX);var AV;if(AU===0){AV=this.gts.row;}else{AV=this.gts.col;}return AE(AV,AW,"n&bftp");},getRowHeaderObj:function(AZ,AV){var Ac=this.modelRhs,AX=AI(this.gts.row,AV,true),AW=AX.depth,Aa=AX.formIndex,AY=Ac[AW],Ab=AZ;while(AY[Ab]===undefined&&Ab>=0){Ab--;}if(Ab>=0){var AU=AY[Ab].forms[Aa];if(!AU.rs){AU.rs=1;}if(AU.o<=AZ&&(AU.o+AU.rs)>AZ){return AU;}}I.visPrint("no row header is found! maybe we need to retrieve it from server");},getColHeaderObj:function(Ab,AU){var AY=this.modelChs,AX=AI(this.gts.col,AU,false),AW=AX.depth,AZ=AX.formIndex,Ac=AY[AW],Aa=Ab;while(Ac[Aa]===undefined&&Aa>=0){Aa--;}if(Aa>=0){var AV=Ac[Aa].forms[AZ];if(!AV.cs){AV.cs=1;}if(AV.o<=Ab&&(AV.o+AV.cs)>Ab){return AV;}}I.visPrint("no column header is found! maybe we need to retrieve it from server");},getDropZoneInfo:function Z(){},getLocalDataSet:function L(AV,AW){var AU=AV*this.cir+AW;if(!this.ldss[AU]){this.createLocalDataSet(AV,AW);}return this.ldss[AU];},linearSearchMapGridIndexToChart:function(AV,AW){var AU=AW.length-1;while(true){if(AV>=AW[AU]){return AU;}AU--;}},mapGridIndexToChart:function(AX,AY){var AU=0,AV,AW=AY.length-1;if(AX>=AY[AW]){return AW;}AW--;AV=parseInt((AU+AW)/2);while(AW>=AU){if(AY[AV]<=AX&&AY[AV+1]>AX){return AV;}else{if(AY[AV+1]<=AX){AU=AV+1;}else{AW=AV-1;}AV=parseInt((AU+AW)/2);}}return this.linearSearchMapGridIndexToChart(AX,AY);},mapChartIndexToGrid:function(AU,AV){return AV[AU];},getRowTitleInfo:function(){if(this.rwTtInfo){return this.rwTtInfo;}var AV=this.gts,AY=AV.row,AU=[],AX=AY.length,AW;for(AW=0;AW<AX;AW++){AU=AU.concat(e.call(this,AY[AW],true,AW));}this.rwTtInfo=AU;return AU;},isSepByMetricsForBubbleScatter:function(){var AU=this.gmCtr,AW=AU.getChartInfo(),AV=AW.tp;return(AV===p.BUBBLE||AV===p.SCATTER)&&(P.MetricsByColumn===this.metricsType||P.MetricsByRow===this.metricsType);},getColTitleInfo:function(){if(this.colTtInfo){return this.colTtInfo;}var AV=this.gts,AW=AV.col,AU=[],AY=AW.length,AX;for(AX=0;AX<AY;AX++){AU=AU.concat(e.call(this,AW[AX],false,AX));}this.colTtInfo=AU;return AU;},getMetricIDsFromIndex:function(AU){return l(this.metrics,AU,"oid");},getMetricIDFromIndex:function(AU){return l(this.metrics,[AU],"id")[0];},getMetricNamesFromIndex:function(AU){return l(this.metrics,AU,"n");},getMetricCondenseFromIndex:function(AU){return l(this.metrics,AU,"cds");},addColorMetricInAngle:function(){var Ac=0,Ab=0,Ai=this.metricsColorMap,AY=this.metricsColorMapID,Ae,AZ,Ah=this.gmCtr,AX=Ah.getChartInfo(),Ag=Ah.getMetricsOnAngleBy(),Af=this.getMetricIDsFromIndex(Ag),Aa=this.getMetricNamesFromIndex(Ag),AU=Af.length,AW=Ai.length;if((AX.isPie||AX.isRing)&&AU){var AV=[];var Ad=[];for(Ab=0;Ab<AW;++Ab){for(Ac=0;Ac<AU;++Ac){Ae=Ai[Ab]+AR+Aa[Ac];AZ=AY[Ab]+AR+Af[Ac];AV.push(Ae);Ad.push(AZ);}}this.metricsColorMap=AV;this.metricsColorMapID=Ad;}},constructMetricColorMap:function(){var Ak=0,Ah=0,Ao=this.gmCtr,Ac=Ao.getChartInfo(),AV=Ac.tp,Aj=Ao.getMetricsOnXAxis(),Aa=Ao.getMetricsOnYAxis(),An=Ao.getSizeByMetrics(),Al=Ao.getMetricsOnAngleBy(),Af=this.getMetricIDsFromIndex(Aj),AU=this.getMetricIDsFromIndex(Aa),Ad=this.getMetricIDsFromIndex(An),Aq=this.getMetricIDsFromIndex(Al),Am=Ac.dirc===1,AZ=this.getMetricNamesFromIndex(Al),Ai=Math.min(Aj.length,Aa.length),Ae=this.getMetricNames();if(An.length>0){Ai=Math.min(Ai,An.length);}var Ap=this.metricsColorMap=[];var AW=this.metricsColorMapID=[];if(Ac.isABL){var AX=Am?Af:AU;var Ag=Am?Aj:Aa;for(Ak=0;Ak<AX.length;++Ak){Ah=Ak;Ap.push(Ae[Ag[Ah]]);AW.push(AX[Ah]);}this.addColorMetricInAngle();}else{if(AV===p.BUBBLE||AV===p.SCATTER){var AY;var Ab;if(this.isSepByMetricsForBubbleScatter()){for(Ak=0;Ak<Aj.length;++Ak){for(Ah=0;Ah<Aa.length;++Ah){AY=Ae[Aj[Ak]]+AR+Ae[Aa[Ah]];Ab=Af[Ak]+AR+AU[Ah];if(AV===p.BUBBLE){AY+=(AR+Ae[An[Ah%An.length]]);Ab+=(AR+Ad[Ah%An.length]);}Ap.push(AY);AW.push(Ab);}}this.addColorMetricInAngle();}else{for(Ak=0;Ak<Ai;Ak++){AY=Ae[Aj[Ak]]+AR+Ae[Aa[Ak]];Ab=Af[Ak]+AR+AU[Ak];if(AV===p.BUBBLE){AY+=(AR+Ae[An[Ak]]);Ab+=(AR+Ad[Ak]);}Ap.push(AY);AW.push(Ab);}this.addColorMetricInAngle();}}else{if(Ac.isPie||Ac.isRing){for(Ak=0;Ak<Aq.length;++Ak){Ap.push(AZ[Ak]);AW.push(Aq[Ak]);}}}}},constructAttrMetricColorMap:function(){var AZ=this.attributesColorMap,Ab=this.attributesColorMapID,AU=this.metricsColorMap,AW=this.metricsColorMapID,AV,Aa,AY,AX;if(!AZ||!AU){return ;}AV=this.attrMetricsColorMap=[];Aa=this.attrMetricsColorMapID=[];if(AZ.length>0&&AU.length>0){for(AY=0;AY<AZ.length;++AY){for(AX=0;AX<AU.length;++AX){AV.push(AZ[AY]+R+AU[AX]);Aa.push(Ab[AY]+AR+AW[AX]);}}}else{if(AZ.length>0){this.attrMetricsColorMap=AZ;this.attrMetricsColorMapID=Ab;}else{if(AU.length>0){this.attrMetricsColorMap=AU;this.attrMetricsColorMapID=AW;}}}},clearColorMaps:function(){this.attrMetricsColorMap=this.attributesColorMap=undefined;this.attrMetricsColorMapID=this.attributesColorMapID=undefined;this.metricsColorMap=undefined;this.attrMetricsColorMapID=this.metricsColorMapID=undefined;this.attrMetricsColorMapIDMap=undefined;this.metricsColorMapMap=undefined;},getColorByLegendInfo:function(){var AV=this,Am=AV.gmCtr,Ak=Am.view.model.docModel,Ag=AV.globalAttrMetricsColorMap,Ar=this.colorType,Al=Am.palette,Ac=Al.length,Ai,Ah=this.attrMetricsColorMap,Ao=this.colorBftp,AX,Af=Am.colorByInfo,Aj="",As=[],An,AW,Ae,Aa,Aq=Am.chartInfo;if(Ar===AN.ATT||Ar===AN.ATT_METRICS||Ar===AN.METRICS_ITEM){AX=Ah.length;for(Ai=0;Ai<AX;Ai++){var AZ;if(Am.globalColorMapping){An=Ag[Ai];AW=Ak.getColorBy(An.levels,An.elements);AZ=AW.color;Ae=!AW.isManual;}else{AZ=Al[Ai%Ac];Ae=true;}As.push({label:Ah[Ai],color:AZ,isDefaultColor:Ae,token:An,bftp:Ao&&Ao[Ai]});}if(Ar===AN.ATT||Ar===AN.ATT_METRICS){w.forEach(Af.atts,function(At){Aj=Aj+" "+At.n;});}if(Ar===AN.ATT_METRICS||Ar===AN.METRICS_ITEM){Aj=Aj+" "+mstrmojo.desc(962,"Metrics");}Aj=Aj.trim();w.forEach(As,function(At){At.decodedColor=B.decodeColor(At.color);At.encodedColor=At.color;});As=U(As);if(Aq&&Aq.isABL){Aa=Aq.sbtp;if(Aa===AC.STACKED||Aa===AC.PERCENT){this.colorByUnitIds=Am.getColorByUnitIds(Aq.dirc);As.sort(this.compareColorByOrder.bind(this,Aq.dirc));}}}else{if(Ar===AN.METRICS){Aj=Af.metrics[0].n;var AU=Af.thresholds;var Ab=Af.rankMode;var Ap,Ad=Af.metrics[0].id;w.forEach(AV.mx,function(At){if(At.did===Ad){Ap=At;return false;}});if(Ap){var AY=mstrmojo.VisUtility.getColorByFormatStr(this.getMetricNumberFormat(AV.gmCtr.getColorByMetrics()[0]),Ab);As=mstrmojo.VisUtility.getColorByItems(AU,Ab,Ap.max,Ap.min,Ap.cnt,AY);Aj=mstrmojo.VisUtility.getColorByTitle(Aj,Ab);if(As===undefined||As.length===0){return undefined;}}}}if(Ar===AN.NULL){return undefined;}return{item:Aj,elements:As};},compareColorByOrder:function(AZ,Aa,AY){var AW,AX=this.colorByUnitIds,Ac=Aa.token.levels,Af=Aa.token.elements,Ad=AY.token.elements,AV=AX.length,Ab,AU,Ae;for(AW=0;AW<AV;AW++){Ab=Ac.indexOf(AX[AW].id);Ae=AX[AW].es;if(Ab<0||Af[Ab]===Ad[Ab]){continue;}else{if(!AX[AW].unique&&(AZ===AF.EnumABLDirection.VERTICAL||(AX[AW].zone==="Rows"||AX[AW].zone==="YAxis"))){AU=1;}else{AU=-1;}return AU*(Ae.indexOf(Af[Ab])-Ae.indexOf(Ad[Ab]));}}},adaptForGlobalColor:function(){var AY=this.dz,Al=AY.ColorBy,Ad=Al.TemplateUnit,Am=this.gmCtr,Aj=[],AU=this.gts,AX=AU.row,AW=AU.col,Ao,Ah,Ae,AZ,Ac,AV,Ab,Af,Ak,Ag,Ai,An,Aa;w.forEach(Ad,function(Aq){var Ar=(Aq.axis==="row"?AX:AW);var Ap=Aq.uidx;Aj.push(Ar[Ap].es);});if(!Am.globalColorMapping){return ;}Ao=this.globalAttrMetricsColorMap=[];Ah=Ad===undefined?0:Ad.length;Ae=this.attrMetricsColorMapID;w.forEach(Ae,function(Ap){Ap=Ap.toString();AZ={};Ac=AZ.types=[];AV=AZ.levels=[];Ab=AZ.elements=[];Af=Ap.split(AR);Ak=Af.length;for(Ag=0;Ag<Ak;Ag++){if(Ag<Ah){Ai=Ad[Ag].id;An=Aj[Ag];Aa=!isNaN(Af[Ag])&&An[parseInt(Af[Ag],10)].id;Ac.push(Ad[Ag].t);AV.push(Ai);Ab.push(Aa);}else{var Aq=Af[Ag];AV.push(-1);Ab.push(Aq);Ac.push(4);}}Ao.push(AZ);});return Ao;},constructColorByInfo:function(){var AV=this.colorType,AU=this.dz;if(AV===AN.ATT||AV===AN.ATT_METRICS){this.constructAttrColorMap();E.call(this);this.attrMetricsColorMap=this.attributesColorMap;this.attrMetricsColorMapID=this.attributesColorMapID;if(AV===AN.ATT){this.adaptForGlobalColor();}}if(AV===AN.METRICS_ITEM||AV===AN.ATT_METRICS){this.constructMetricColorMap();this.attrMetricsColorMap=this.metricsColorMap;this.attrMetricsColorMapID=this.metricsColorMapID;if(AV===AN.METRICS_ITEM){this.adaptForGlobalColor();}}if(AV===AN.ATT_METRICS){this.constructAttrMetricColorMap();this.adaptForGlobalColor();}this.attrMetricsColorMapIDMap=t(this.attrMetricsColorMapID);this.metricsColorMapMap=t(this.metricsColorMap);},constructAttrColorMap:function(){var BB,A3,A2,A0,Az,BJ,BD,Ar,Aq,A8,Ap,Ak,A5,AW,BE,Av,Al,Af,As,A4=this.gmCtr,BA=A4.firstRes.gvs.items,BF=A4.getChartInfo(),Ay=BF.tp,A7=A4.getSizeByMetrics(),AY=A4.getRowColorAttrsIndex(),A9=A4.getColColorAttrsIndex(),Aw=this.getMetricCount(),Ax=Aw===0?1:Aw,Ac=A4.getColorByAttrsID(),BG=AY.length,AZ=A9.length,At=[],BH=[],Ao=[],Ah=[],Ag=1,AX=[],AV=[],Ae=[],Aj=[],Ai=1,Au=[];if(!Ac||Ac.length===0){return ;}A5=Ac.length;AW=this.attributesColorMap=[];BE=this.attributesColorMapID=[];Av=this.colorBftp=[];Ak=(Ay===p.GRID&&A7.length===0);Ap=(Ay===p.GRID)&&!BF.isPie;Ar=A4.getMetricsOnXAxis();Aq=A4.getMetricsOnYAxis();A8=Math.min(Ar.length,Aq.length);if(A7.length>0){A8=Math.min(A8,A7.length);}function A1(BL,BN){if(Ap){return 1234;}var BK=BA[BL],BM=BK&&BK.items&&BK.items[BN];if(BM===undefined||BM.rv===undefined||BM===""||BM.rv===""||BM.rv==="--"){return false;}return true;}function A6(BR,BT,BK,BN){var BU,BL,BM,BS,BQ,BP=false,BO,BV;for(BL=0;BL<BR&&!BP;++BL){BO=BK+BL;for(BM=0;BM<BT&&!BP;++BM){BV=BN+BM;if(BF.isABL){for(BU=0;BU<Aw;++BU){BS=A1(BO,BV*Aw+BU);if(BS){BP=true;break;}}}else{if(Ay===p.BUBBLE||Ay===p.SCATTER){for(BU=0;BU<A8;++BU){BS=A1(BO,BV*Aw+Ar[BU]);BQ=A1(BO,BV*Aw+Aq[BU]);if(BS&&BQ&&(Ay===p.SCATTER||(Ay===p.BUBBLE&&!isNaN(A7[BU])))){BP=true;break;}}}else{if(Ay===p.GRID&&A7.length>0){BS=A1(BO,BV*Aw+A7[0]);if(BS){BP=true;break;}}}}}}return BP;}if(BG>0){Ao=[];BH=AP(AY,this.modelRhs,Ao);Ah=(BG===1?BH:BH[BG-1]);Ag=Ah.mxIdx+1;AX=[];for(A2=0;A2<BG-1;++A2){At[AY[A2].order]=BH[A2][0];AX[A2]=0;}}if(AZ>0){Ae=[];AV=AP(A9,this.modelChs,Ae);Aj=(AZ===1?AV:AV[AZ-1]);Ai=Aj.mxIdx+1;Au=[];}var Am=null,Ad=null,An=this.rct,BC=this.cct/Ax,AU=0,Aa=0,Ab={};for(A3=0;A3<Ag;++A3){if(BG>0){Am=Ah[A3];if(!Am){continue;}An=Am.numLeaves;At[AY[BG-1].order]=Am;AX[BG-1]=A3;for(A2=BG-2;A2>=0;--A2){if(Ao[A2][AX[A2]]>AX[A2+1]){break;}Al=AX[A2];Af=BH[A2][Al];if(BH[A2].isCustomGroupWithBanding){As=Af.forms[1].rs;}else{As=Af.rs;}if(!As){As=1;}AX[A2]+=As;At[AY[A2].order]=BH[A2][AX[A2]];}}Aa=0;if(AZ>0){for(Az=0;Az<AZ-1;++Az){At[A9[Az].order]=AV[Az][0];Au[Az]=0;}}for(A0=0;A0<Ai;++A0){if(AZ>0){Ad=Aj[A0];if(!Ad){continue;}BC=Ad.numLeaves;At[A9[AZ-1].order]=Ad;Au[AZ-1]=A0;for(Az=AZ-2;Az>=0;--Az){if(Ae[Az][Au[Az]]>Au[Az+1]){break;}Al=Au[Az];Af=AV[Az][Al];if(AV[Az].isCustomGroupWithBanding){As=Af.forms[1].cs;}else{As=Af.cs;}if(!As){As=1;}Au[Az]+=As;At[A9[Az].order]=AV[Az][Au[Az]];}}if(Ak||A6(An,BC,AU,Aa)){BJ=At[0].headerID;BD=At[0].headerText;var BI=At[0].forms[0].bftp;for(BB=1;BB<A5;++BB){BJ+=AR+At[BB].headerID;BD+=R+At[BB].headerText;}if(!Ab.hasOwnProperty(BJ)){AW.push(BD);BE.push(BJ);Av.push(BI);Ab[BJ]=true;}}Aa+=BC;}AU+=An;}},testLocalDataSet:function z(){var Aa=this.cir,AU=this.cic,AX,AV,AZ,Ab;for(AX=0;AX<AU;AX++){for(AV=0;AV<Aa;AV++){var AW=this.getLocalDataSet(AX,AV);AW.printAll();var AY=AW.generateDataProvider();I.visPrint("========"+AY.length+" data providers for this local data set===");for(AZ=0;AZ<AY.length;AZ++){Ab=AY[AZ];I.visPrint("");I.visPrint("====start Testing data provider: "+AZ+" ======");Ab.testDataProvider();I.visPrint("====end Testing data provider: "+AZ+" ======");}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr","mstrmojo.Box","mstrmojo.Button","mstrmojo.Editor","mstrmojo.Dial","mstrmojo.Label","mstrmojo.fe.CreateSetEditor","mstrmojo.fe.FilterEditor","mstrmojo.vi.ui.editors.fe.RWViewLimitExprTree","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.vi.ui.ConditionWalk","mstrmojo.vi.ui.ConditionEditor","mstrmojo.vi.ui.editors.fe.ConditionWalk","mstrmojo.vi.ui.editors.fe.RWViewFilterExprTree","mstrmojo.warehouse.EnumObjectTypes");mstrmojo.requiresDescs(118,2397,5758,14915,15540,15005,15014,15091);var b=mstrmojo.hash,W=mstrmojo.array,f=mstrmojo.css,L=mstrmojo.dom,Z=mstrmojo.expr,h=mstrmojo.mstr.EnumDSSXMLObjectTypes,S={TEMPLATE:0,DATASET:1},O=Z.ET,Y=Z.BRANCH_FNS,B=mstrmojo.warehouse.EnumObjectTypes,K=mstrmojo.mstr.EnumNodeProperties,I="VFEmpty";var G=10,U=46,H=116,P=286,R=369,F=42;DL_LABEL_HEIGHT=26;function g(k){var j={et:k.defaultExpressionType};if(k.disableElementsBrowsing&&k.disableElementsBrowsing()){j={et:O.AQ};}k.mainExpr.newCondition(j,true);}function N(j){var k=G;if(j<G){k=G;}else{if(j<=U){k=U;}else{k=H;}}return k;}function A(p,AA){var w=p&&p.domNode,t=AA&&AA.domNode,k=w&&w.style,u=t&&t.style;var n=p.parent.domNode.offsetHeight;if(!AA){k.height=n+"px";if(p.updateScrollbars){p.updateScrollbars();}return ;}if(w&&t){var s=R-P;if(!p.editor.showLimits){s-=F+DL_LABEL_HEIGHT;}var j=n-s;var l=L.position(p.itemsContainerNode),q=L.position(AA.itemsContainerNode),y=l.h,z=q.h;var o=N(z),x=j-o;var r=Math.min(G+y,x);k.height=r+"px";u.height=j-r+"px";if(p.updateScrollbars){p.updateScrollbars();}if(AA.updateScrollbars){AA.updateScrollbars();}}}function D(k){var l=b.clone(k);if(k&&k.et===O.ANDOR&&(k.node&K.CONDITION)){var n=b.valarray(Z.findTargets(k,"did"))[0],j={et:O.ANDOR,data:l};switch(n&&n.t){case h.Attribute:j.a=n;break;case h.Metric:j.m=n;break;}return j;}return l;}mstrmojo.vi.ui.editors.FilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditor,null,{scriptClass:"mstrmojo.vi.ui.editors.FilterEditor",titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-subtitle-container"></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:b.copy({subTitleNode:function X(){return this.showTitle?this.domNode.firstChild.children[1]:null;},containerNode:function d(){return this.domNode.firstChild.childNodes[3];},buttonNode:function J(){return this.domNode.firstChild.childNodes[4];},curtainNode:function E(){return this.domNode.lastChild;}},b.copy(mstrmojo.fe.FilterEditor.prototype.markupSlots)),help:"view_filter_editor_for_dossiers.htm",cssClass:"mstrmojo-charcoalboxe mstrmojo-FE mstrmojo-vi-ui-FE",postCreate:function C(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Box",slot:"subTitleNode",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14915,"New Qualification"),cssDisplay:"inline-block",cssClass:"mstrmojo-relation-relateby-text",bindings:{text:function(){return this.editor.isNewCond?mstrmojo.desc(14915,"New Qualification"):mstrmojo.desc(15540,"Edit Qualification");},editor:"this.parent.parent",visible:function(){return !!this.editor.showCondWalk;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"newQualificationBtn",cssText:"float: left",cssDisplay:"inline-block",text:mstrmojo.desc(15005,"Add New Qualification"),onclick:function(){g(this.editor);},bindings:{enabled:function(){return !this.editor.readOnly;},visible:function(){return !this.editor.showCondWalk;},editor:"this.parent.parent"}}]}]);if(this._super){this._super();}},editorTitle:mstrmojo.desc(5758,"Filter Editor"),defaultExpressionType:O.AE,onvizTitleChange:function(){this.set("title",this.editorTitle+" - "+this.vizTitle);},getExpressionContainerCfg:function(){var j=this._super();j.cssDisplay="flex";return j;},onOpen:function M(){var j=this.mainExpr,k=this.limitExpr;if(j){A(j,k);}if(!this.model.expr){g(this);}},getExpressionContentsConfig:function(){return[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15091,"Metric values are not aggregated."),cssClass:"mstrmojo-FE-expr-header dl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"ve",scriptClass:"mstrmojo.vi.ui.editors.fe.RWViewFilterExprTree",level:S.DATASET,bindings:{items:"this.editor.model.exprForest || []"},onBlankClick:function(p){this.parent.clearSelect(p);},supportRelation:true,postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);},onNew:function(q){q.data.isNew=true;if(!q.data.ph){this.editor.openWalk(q.data,q.widget.ctxtBuilder.itemWidgets[q.index],"condition");}var p=this.parent.vle;A(this,p);},onadd:function j(){f.toggleClass(this.parent.domNode,I,this.items.length===0);var p=this.parent.vle;A(this,p);},onremove:function l(){f.toggleClass(this.parent.domNode,I,this.items.length===0);var p=this.parent.vle;A(this,p);},onnodeadd:function k(){var p=this.tree.parent.vle;A(this.tree,p);},onnoderemove:function o(){var p=this.tree.parent.vle;A(this.tree,p);},onitemsChange:function n(p){var r=this.items.length===0,q=this.parent;if(this.hasRendered){f.toggleClass(q.domNode,I,r);}else{if(r){f.addWidgetCssClass(q,I);}else{f.removeWidgetCssClass(q,I);}}}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15014,"Metric values are aggregated based on the attributes in the visualization."),cssClass:"mstrmojo-FE-expr-header tl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"vle",scriptClass:"mstrmojo.vi.ui.editors.fe.RWViewLimitExprTree",level:S.TEMPLATE,validExprTypes:W.hash([O.MQ,O.MC]),bindings:{visible:"this.editor.showLimits",items:"this.editor.model.limitExprForest || []"},onBlankClick:function(p){this.parent.clearSelect(p);},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("limitExpr",this);},onnodeadd:function k(){var p=this.tree.parent.ve;A(p,this.tree);},onnoderemove:function o(){var p=this.tree.parent.ve;A(p,this.tree);},onadd:function j(){var p=this.parent.ve;A(p,this);},onremove:function l(){var p=this.parent.ve;A(p,this);}}];},getConditionWalkConfig:function c(){return undefined;},toggleOkButtonStatus:function V(j){var k=this.buttonBar.children[0].btnSave;k.set("enabled",!!j);},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-FE-andOrPopup mstrmojo-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",slot:"containerNode",modal:false,autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var j=this.condition,n=j&&j.data&&j.data.not,o=j&&j.parent,k=o&&o.data,l=(k&&k.fn)+(n?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(l)?null:{did:l});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",animate:false,itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",renderOnScroll:false,items:[{did:19,n:Y[19]},{did:20,n:Y[20]},{did:19+21,n:Y["19_21"]},{did:20+21,n:Y["20_21"]}],onchange:function(){if(this.opening){return ;}var k=this.parent,j=k.condition,q=this.selectedItem,p=q&&q.did,o=p>21?true:null,n=p-(o?21:0);k.close();var l=j&&j.parent;if(l&&l.data&&l.data.et===O.ANDOR){l.edit(j,n,o);}else{var r=j&&j.data;if(r&&(r.not!==o)){r.not=o;j.paint();}}}}]},createSetPopupRef:{scriptClass:"mstrmojo.fe.CreateSetEditor",contentNodeCssClass:"",cssClass:"VI-CreateSet-Editor",slot:"containerNode",autoClose:true,showTitle:false,isHostedWithin:false},conditionEditorPopupRef:{scriptClass:"mstrmojo.vi.ui.ConditionEditor",isHostedWithin:false,getIfDataSource:function e(){return this.editor.getIfDataSource();},getDatasets:function Q(){return this.editor.getDatasets();},onUpdateBrowseElementsParams:function a(j){this.editor.onUpdateBrowseElementsParams(j);}},docModel:null,targetMetrics:null,_set_model:function(o,k){var l=this._super(o,k);if(l){var j=this.model.targets;this.targetMetrics=W.filter(j,function(n){n.title=n.n||"";return n.t===h.Metric;});}return l;},openWalk:function(p,q,u,w){var s=this,k=L.delta(q.domNode,s.containerNode);k.y+=(u==="andor"?16:parseInt(q.domNode.offsetHeight,10));var t={condition:q,zIndex:s.zIndex+10,left:k.x+"px",top:k.y+"px"},j;switch(u){case"andor":if(s.skipAndOrPopup){return ;}j="andOrPopupRef";break;case"createSet":case"createSetOpt":if(mstrApp&&mstrApp.isWSStyling&&w&&w.e&&w.e.target){var l=w&&w.e&&w.e.target,o=L.delta(l,s.containerNode);t.left=o.x+"px";t.top=o.y+parseInt(l.offsetHeight,10)+"px";}var r=s.model.targets;j="createSetPopupRef";t.type=u;t.model={attrs:W.filter(r,function(n){return n.t===B.ATTRIBUTE;}),metrics:W.filter(r,function(n){return n.t===B.METRIC;})};if(u==="createSetOpt"){t.condition=q.parent;t.model.childIdx=q.childIndex();}break;case"condition":var x=L.position(this.titleNode);t=b.copy({editor:s,objectBrowsingEnabled:s.objectBrowsingEnabled,showLimits:s.showLimits,targets:s.model.targets,targetsLastMod:s.modelLastSet,ets:q.tree.validExprTypes||s.validExprTypes,condition:q,hasPrompt:s.model.hasPrompt,disableElementsBrowsing:s.disableElementsBrowsing,inRelation:q.inRelation,model:D(p),left:x.x+50+"px",top:x.y+20+"px",draggable:!s.conditionEditorNotDraggable},t);if(!!p.isNew){t.title=mstrmojo.desc(14915,"New Qualification");}else{t.title=mstrmojo.desc(15540,"Edit Qualification");}j="conditionEditorPopupRef";}s.openPopup(j,t);},getIfDataSource:function e(){if(this.docModel){return this.docModel.getDataService();}return null;},onUpdateBrowseElementsParams:mstrmojo.emptyFn,getDatasets:function Q(){if(this.docModel){return this.docModel.datasets;}return null;},conditionEditorNotDraggable:false});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.func","mstrmojo.hash","mstrmojo.array","mstrmojo.ToolSeparator","mstrmojo.CheckBox","mstrmojo.Label","mstrmojo.Dialog","mstrmojo.Button","mstrmojo.fe._HasFilterEditor","mstrmojo.fe.FilterUtils","mstrmojo.vi.ui.editors.SQLCSIViewer","mstrmojo.ui.menus.MenuConfig","mstrmojo.vi.models.VIComponentMap","mstrmojo.vi.ui.VizBoxTitleBar","mstrmojo.vi.ui.ViewDataDialog","mstrmojo.vi.ui.VisAsFilterInlineDialog","mstrmojo.vi.ui.rw.UnitContainer","mstrmojo.vi.ui.editors.VisAsFilterDialog","mstrmojo.vi.ui.editors.FilterEditor","mstrmojo.vi.ui.VizGalleryList","mstrmojo.EnumRWUnitType","mstrmojo.vi.viz.KnownVisualizations","mstrmojo.vi.viz.EnumWidgetTypes","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.enums.EnumFilterClearActionType");mstrmojo.requiresDescs(2827,5282,6985,9126,11671,11672,13402,13528,14389,14810,15076,15123,15621);var AU=mstrmojo.css,AB=mstrmojo.dom,c=mstrmojo.func,O=mstrmojo.hash,K=mstrmojo.array,AG=mstrmojo.EnumRWUnitType,AR=mstrmojo.vi.viz.KnownVisualizations,AS=mstrmojo.fe.FilterUtils.isExprEmpty,S=mstrmojo.fe.FilterUtils.getExprText,AQ=mstrmojo.vi.models.EnumDragSources,w="px",AN=0,AT=2,M=mstrmojo.vi.models.VIComponentMap.TYPES,F=mstrmojo.vi.enums.EnumFilterClearActionType;var a=mstrmojo;var s="invalid",l="hasViewFilter",Ac="hasSelector",x="visible",V="mouse-left";var AW=3,AA=4;var u="web-export-to-pdf-privilege",AK="web-export-to-excel-privilege",Q="web-export-to-csv-privilege";var k=4;function N(Ad){mstrApp.onerror(Ad);}function f(Af){var Ae=this.model,Ai=this,Aj=mstrApp.isWSStyling,Ad=[{n:mstrmojo.desc(11670,"Copy to"),toLayoutTitle:mstrmojo.desc(13933,"Copy to #"),toNewLayoutTitle:mstrmojo.desc(13934,"Copy to a New Sheet"),crossLayoutMessage:mstrmojo.desc(12137,"Copying will clear all filters from the new visualization. Do you want to continue?"),cls:"",fn:function Ah(Ak,Am,An,Al){Ae.copyVisualization(Ak,Am,An,Al);}},{n:mstrmojo.desc(10461,"Move to"),toLayoutTitle:mstrmojo.desc(13935,"Move to #"),toNewLayoutTitle:mstrmojo.desc(13936,"Move to a New Sheet"),crossLayoutMessage:mstrmojo.desc(13937,"Moving will clear all filters from the new visualization. Do you want to continue?"),cls:"",fn:function Ah(Ak,An,Ao,Am){var Al=Ae.getVizContentPanel();Al.restoreAnyMaxedVizBox();Ae.moveVisualization(Ak,An,Ao,Am);}}],Ag=function Ag(Am,Al,Ak){return function(){mstrmojo.warn(Al,{confirmBtn:{fn:Ak}},{title:Am});};};Ad.forEach(function(Ak){Af.addPopupMenuItem(Ak.n,null,function(){var Aq=Ak.fn,Am=new mstrmojo.ui.menus.MenuConfig(),An=Ai.boxContent.builder.getLayoutVIMap(Ae.getCurrentLayoutKey()).getComponent(M.VIZ_CONTENT),Al=Ae.getCurrentLayoutKey(),Ao=An.panels.filter(function(Ar){return Ar.k!==An.selectedKey;}),Ap=Ae.defn.layouts.filter(function(Ar){return Ar.k!==Al;});Ao.forEach(function(Ar){var As=Ar.k;Am.addMenuItem(Ar.titleText,"",function(){Aq(Ai,An,As,Al);});});Am.addMenuItem(Aj?mstrmojo.desc(6985,"New Page"):mstrmojo.desc(11671,"New Panel"),"",function(){Aq(Ai,An,null,Al);});Am.addSeparator();Ap.forEach(function(Ar){Am.addMenuItem(Ar.title,"",Ag(Ak.toLayoutTitle.replace("#",Ar.title),Ak.crossLayoutMessage,function(){Aq(Ai,An,null,Ar.k);}));});Am.addMenuItem(Aj?mstrmojo.desc(14810,"New Chapter"):mstrmojo.desc(11672,"New Sheet"),"",Ag(Ak.toNewLayoutTitle,Ak.crossLayoutMessage,function(){Aq(Ai,An,null,null);}));return Am;},Ak.cls);});}function H(){AU.toggleClass(this.domNode,Ac,!!(this.selectorMenuCfg));AU.toggleClass(this.domNode,l,!!(this.filterMenuCfg));AU.toggleClass(this.filterBtnNode,s,!(this.filterMenuCfg));AU.toggleClass(this.selectorBtnNode,s,!(this.selectorMenuCfg));var Ae=this.parent,Ad=!!(Ae&&Ae.hasMultipleChildren&&Ae.hasMultipleChildren()&&!mstrApp.isAppStateSelection());AU.toggleClass(this.maxRestoreBtnNode,s,!Ad);AU.toggleClass(this.maxRestoreBtnNode,"restore",this.isMaxed);}function j(Ad){AU.toggleClass(this.filterBtnNode,x,Ad);AU.toggleClass(this.filterBtnNode,V,!Ad);AU.toggleClass(this.selectorBtnNode,x,Ad);AU.toggleClass(this.selectorBtnNode,V,!Ad);AU.toggleClass(this.maxRestoreBtnNode,x,Ad);AU.toggleClass(this.maxRestoreBtnNode,V,!Ad);}function d(Ad){return{scriptClass:"mstrmojo.vi.ui.VisAsFilterInlineDialog",vis:Ad,tocPanel:mstrApp.rootCtrl.view.tocPanel,shouldNavigate:true};}function P(){this.selectorMenuCfg=null;if(mstrApp.isAppStateSelection()){return ;}var Al=this,Ah=Al.model,Am=this.boxContent,Af=Am.model,Ai,Ad=function(An,Ao){return Am[An]&&Am[An](Ao);},Ak=Am.selectorControl||Ad("findSelectorControl"),Ae=Ad("isLinkedFilter"),Ag=function(){mstrApp.rootCtrl.view.openInlineDialog(d(Al));},Aj=function(){var Ar={},Aq=Ad("getAssociatedNodes")||[],As=Am.getFilterType(),Ap=Am.isVisMap,Ao=Ad("getAllLayerKeys",true),An=Af.getSelectorControlMapInfo&&Af.getSelectorControlMapInfo();K.forEach(Aq,function(At){if(Ap){K.forEach(Ao,function(Au){Ar[Au]={c:true,v:false,ft:As,cgbs:An,k:Au};});}else{Ar[At.k]={c:true,v:false,ft:As,cgbs:An,k:At.k};}});Ah.setVisAsFilter(Al,{sc:Ak,targetKeys:Ar});};if(Ae&&!mstrApp.isAppStatePresentation()){Ai=this.addDisposable(new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstrmojo-viz-fe-menu",isHostedWithin:false,useTooltip:true}));Ai.addMenuItem(mstrmojo.desc(15069,"Edit Targets..."),"",Ag);Ai.addMenuItem(mstrmojo.desc(11473,"Clear All Targets"),"",Aj);}this.selectorMenuCfg=Ai;}function A(){this.filterMenuCfg=null;if(mstrApp.isInVFInteractMode||mstrApp.isAppStateSelection()){return ;}var A5=mstrmojo.desc(2827,"Clear"),Ar=this.boxContent,A3=Ar.model,Av=this.k,At=this,BD=Ar.controller,A0=Ar.node,BG=A0.data||null,Aw=function(BI,BL,BK){var BJ=At.boxContent;return BJ&&BJ[BI]&&BJ[BI](BL,BK);},A7=mstrmojo.desc(5283,"OR"),Aq=mstrmojo.desc(5282,"AND"),BH=Aw("makeBold",A7),Ax=Aw("makeBold",Aq);if(!BG){this.filterMenuCfg=null;return ;}var BA=BG.vfexpr,Ai,Ak=BG.vlexpr,Ap=Aw("getSelectorObjectsFromTemplateLimit"),Au,An=Aw("hasKeepOnly",Ap),Ae=this.model,Am,Ad;Ai=Ae.getVfNdFromExpr(BA);Am=!AS(Ai);Ad=Ai!==BA;var Ah=this.model,Ao=Ah.getCurrentLayoutKey(),Az=(Ah.defn.layouts).filter(function(BI){return BI.k===Ao;})[0],BE=Az.cgbMap||{},A6=O.keyarray(BE).filter(function(BI){return BE[BI]===At.k;}),A9,Af,BB,BC,A1=[],Ay,Al;function Aj(BK){var BM=" "+(BK?BH:A7)+" ",BL=" "+(BK?Ax:Aq)+" ",BJ=Af.fn===20?BM:Af.fn===19?BL:"",BI=[A5+' "'];BC=A3.getSelectorDataFromViewFilter(Af);K.forEach(BC,function(BN){Al=Aw("getLinkingSelectorExpr",BN,BK);if(BI.length>1){Al=BJ+Al;}BI.push(Al);});BI.push('"');return BI.join("");}if(A6.length){K.forEach(A6,function(BI){A9=Ah.getLayoutUnitDefn(BI);Af=A9&&A9.t&&A9.t===AG.UNITCONTAINER&&A9.exp;if(Af){BB=A9.latestctlkey;if((K.filterOne(Az.units[BI].scs,function(BJ){return BJ.ckey===BB;})||{}).isNavigation){A1.push({menuString:Aj(),menuTtpString:Aj(true),ucKey:BI,ckey:BB});}}});}Ay=A1.length;if(An||Ak||Am||Ay||Ad){var A4=function A4(BI){var BK=c.wrapMethods(BD._getXtabCallback(Ar),{success:function BJ(){var BL=At.boxContent;if(BL){BL.raiseEvent({name:"regenerateToolbar"});}}});if(Ay){BK=c.wrapMethods({success:function BJ(BM){var BN=At.boxContent,BL=A6;if(BN.getSdpKeyArr){BL=A6.concat(BN.getSdpKeyArr());}Ah.partialUpdate(BM.data,Ah.getUnitDefinitions(BL),BM.defn,A6,BM.puFilters);}},BK);}if(Ar.filterMenuHandler){Ar.filterMenuHandler(BI.ctxt,BK);}};Au=this.addDisposable(new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstrmojo-viz-fe-menu",isHostedWithin:false,useTooltip:true}));if(!mstrApp.isDossier&&(An||Ay||Ad)){Au.addMenuItem(mstrmojo.desc(1763,"Clear All"),"",A4,{type:F.CLEAR_ALL});}if(An){if(Au.hasMenuItems()){Au.addSeparator();}var As=Aw("getFilterMenuPairs",Ap)||[];K.forEach(As,function(BI){Au.addMenuItem({n:BI.menuString,ttp:BI.menuTtpString},"",A4,{type:F.CLEAR_KEEP_ONLY,idx:BI.ctxt});});}if(Ad){if(Au.hasMenuItems()){Au.addSeparator();}Au.addMenuItem({n:mstrmojo.desc(15076,"Clear drill conditions"),ttp:S(Ae.getVfexprWithUpdatedVf(Av,null),true)},"",A4,{type:F.CLEAR_DRILLING});}if(Am||Ak){if(Au.hasMenuItems()){Au.addSeparator();}var A8;var A2=[];var BF=S(Ai,true),Ag=S(Ak,true);if(BF){A2.push(BF);}if(Ag){A2.push(Ag);}A2=A2.join(" "+Ax+" ");if(mstrApp.isWSStyling&&mstrApp.isAppStateDefault()){A8={n:mstrmojo.desc(14016,"Advanced Qualification")};Au.addMenuItem(A8,"",function(){At.onShowFilterEditor(At);});}else{if(!(mstrApp.isDossier||(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()))){A8={n:mstrApp.isWSStyling?mstrmojo.desc(15123,"Clear advanced qualification"):mstrmojo.desc(13528,"Clear existing filter"),ttp:A2||BG.vftext};Au.addMenuItem(A8,"",A4,{type:F.CLEAR_ADV_QUALIFICATION});}}}if(Ay){Au.addSeparator();K.forEach(A1,function(BI){Au.addMenuItem({n:BI.menuString,ttp:BI.menuTtpString},"",A4,{type:F.CLEAR_LINKING,nodeKey:BI.ucKey,ckey:BI.ckey});});}}this.filterMenuCfg=Au&&(Au.hasMenuItems()?Au:null);}function AY(Ad){var Ae=mstrApp.isWorkstation&&mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.SUPPORT_LIVEMODE)&&mstrApp.getWSLiveMode();return(Ad===AR.GRID&&!Ae&&(!!mstrApp.features[AK]||!!mstrApp.isSingleTier));}function W(Ad){return([AR.UNKNOWN].indexOf(Ad)===-1&&(!!mstrApp.features[u]||!!mstrApp.isSingleTier));}function L(){return !!mstrApp.features[Q]||!!mstrApp.isSingleTier;}function AJ(){var Ad=AR.getDefinition(this.boxContent.model.data.visName||"Grid").id;return !(mstrApp&&mstrApp.isVisBuilder)&&(AY(Ad)||W(Ad)||L());}function AZ(Ad){var Ag=this.model.controller.id,Af=this.boxContent,Ae=Af.k;var Ah=!O.walk("gridInfo.cols.length",Af)&&!O.walk("gridInfo.rows.length",Af),Ai=mstrmojo.desc(246,"Export");if(Ah){Ad.addNonInteractiveMenuItem(Ai,null,true);}else{Ad.addPopupMenuItem(Ai,this.id,function(){var Ak=new mstrmojo.ui.menus.MenuConfig(),Aj=AR.getDefinition(this.boxContent.model.data.visName||"Grid").id;if(AY(Aj)){Ak.addMenuItem(mstrmojo.desc(3958,"Excel"),"exportToExcel",function(){mstrmojo.all[Ag].exportVisualization(Af,AA);});}if(W(Aj)){Ak.addMenuItem(mstrmojo.desc(1877,"PDF"),"exportToPDF",function(){if(Af.isClientExport&&Af.exportVisualization){Af.exportVisualization(AW);}else{mstrmojo.all[Ag].exportVisualization(Af,AW);}});}if(L()){Ak.addMenuItem(mstrmojo.desc(11807,"Data"),"exportToCSV",function(){mstrmojo.all[Ag].exportCSV(Ae);});}return Ak;},"export");}}function h(Ae){var Af=this.boxContent,Ad=(Af.getDocModel&&Af.getDocModel())||Af.model.docModel;Ae.addPopupMenuItem(mstrmojo.desc(13165,"Change Visualization"),this.id,function(){var Ai=new a.ui.menus.MenuConfig({supportsScroll:true,maxHeight:AB.windowDim().h-50}),Aj=Ad.getVizOfSelectedViUnit(),Ag=Af.controller.galleryPanel,Ak=Ag.vizList,Al=Ak.items.length>0,Am=Ag.customVizList;function Ah(An,Ao){if(An.id!=="VisGrid"&&a.ExpressVisList.getVis(An.s)===null){return ;}Ai.addMenuItem(An.n,An.id===(Aj&&Aj.id)?"on":"",function(){var Ap=K.find(Ao.items,"id",An.id);Ao.select([Ap]);});}Ai.hasToggleItem=true;if(Al){Ai.addMenuTitle(mstrmojo.desc(14119,"Built-in"));Ak.items.forEach(function(An){Ah(An,Ak);});}if(Am.items.length>0){if(Al){Ai.addSeparator();}Ai.addMenuTitle(mstrmojo.desc(2056,"Custom"));Am.items.forEach(function(An){Ah(An,Am);});}return Ai;},"");}function AL(Ad,Af){var Ae=Ad.getCtxtDragData();this.getZonesModel().addUnitsFromDataSource(Ae.items,Ae.dsid,Ad.actions,Af?Ad.callback:null);}function AX(){var Af=this.parent,Ad=this.boxContent,Ae=false;if(Ad.handlesMultiSelection){if(mstrApp.isWSStyling){if(this.getDocModel().getVisibleUnitKeysByType([AG.GRID,AG.GRAPH,AG.MOJOVISUALIZATION]).length>1){Ae=true;}}else{if(Af&&Af.getTargetKeysByType([AG.GRID,AG.GRAPH,AG.MOJOVISUALIZATION]).length>1){Ae=true;}}}return Ae;}function AM(Ae,Ad,Ag){var Ah=this.id;Ae=document.createElement("div");Ae.className=Ad;var Af=function(){var Al=mstrmojo.all[Ah],Aj=Al[Ag];Aj.hostId=Ah;Aj.hostElement=Ae;if(Aj.hasMenuItems()){var Am=new mstrmojo.ui.menus.Menu({popupConfig:Aj,getTooltipText:function Ai(An){return(An&&An.ttp)||"";}});Am.tooltipCss={enableHover:true,leftCssClass:"menuTooltip mstrmojo-VIBox",rightCssClass:"menuTooltip mstrmojo-VIBox",updatePosition:function Ak(){mstrmojo.Tooltip.prototype.updatePosition.call(this);var Av=this.domNode,As=this.arrowNode,At=Av.getBoundingClientRect(),An=At.top,Ap=Math.max(document.documentElement.clientHeight,window.innerHeight||0),Au=Am._getItemNode(Am._lastHoverIx),Ar=(Au&&Au.getBoundingClientRect())||{},Ao=At.top+this.containerNode.offsetHeight,Aq=Ao+10-Ap;if(Aq>0){Av.style.top=(An=At.top-Aq)+"px";}if(Ar&&Ar.top){As.style.top=Ar.top-An+6+"px";}}};Al.openPopup(Am);}};AB.attachEvent(Ae,"click",Af);this.domNode.appendChild(Ae);this.installedEvtListeners.push({e:Ae,evt:"click",fn:Af});return Ae;}function o(Ad){var Af=this.id;Ad=document.createElement("div");Ad.className="hover-max-restore-btn";var Ae=function(){var Ag=mstrmojo.all[Af],Ah=Ag.isMaxed;Ag.parent.setPortalState(Ag,Ah?AN:AT);if(Ah){delete Ag.isMaxed;}else{Ag.isMaxed=true;}AU.toggleClass(Ad,"restore",Ag.isMaxed);};AB.attachEvent(Ad,"click",Ae);this.domNode.appendChild(Ad);this.installedEvtListeners.push({e:Ad,evt:"click",fn:Ae});return Ad;}mstrmojo.vi.ui.rw.VizBox=mstrmojo.declare(mstrmojo.vi.ui.rw.UnitContainer,[mstrmojo.vi.ui._CanDropFromSchema,mstrmojo.fe._HasFilterEditor],{scriptClass:"mstrmojo.vi.ui.rw.VizBox",filterEditorScriptClass:"mstrmojo.vi.ui.editors.FilterEditor",showTitleBar:true,titleBar:null,selectorMenuCfg:null,selectorBtnNode:null,filterMenuCfg:null,filterBtnNode:null,maxRestoreBtnNode:null,generateToolbarSub:null,init:function AD(Ad){this._super(Ad);AU.addWidgetCssClass(this,"mstrmojo-VIBox");this.isMaxed=(this.defn.ds===AT);this.installedEvtListeners=[];},unrender:function(Ad){K.forEach(this.installedEvtListeners,function(Ae){AB.detachEvent(Ae.e,Ae.evt,Ae.fn);});this.installedEvtListeners=[];delete this.filterBtnNode;delete this.selectorBtnNode;delete this.maxRestoreBtnNode;this._super(Ad);},getPanelForAddAction:function AP(){return"editPanel";},getExcludedPanels:function AV(){return[];},getDocModel:function E(){var Ad=this.model;return Ad.docModel||Ad;},editingTitleCallback:function C(Ad){this._super(Ad);AU.toggleClass(this.filterBtnNode,"editing-title",Ad);AU.toggleClass(this.selectorBtnNode,"editing-title",Ad);AU.toggleClass(this.maxRestoreBtnNode,"editing-title",Ad);},getTitleBarCfg:function y(){var Ad=this._super();Ad.scriptClass="mstrmojo.vi.ui.VizBoxTitleBar";Ad.close=function Ag(){var Ai=this.parent,Ah=Ai.parent;Ah.deleteBoxAndSubmit(Ai);Ah.removeChildren(Ai);Ai.destroy();};Ad.beganEditingTitlebar=function Af(){var Ah=this.parent;Ah.draggable=false;Ah.editingTitleCallback(true);};Ad.titleEdited=function Ae(Ai,Am,Ah){var Al=this.parent;Al.draggable=true;if(Am){var Ak=Al.getDocModel();Ak.renameRWUnitTitle(Ai,this.title,Al.k,{success:function An(Ao){Al.defn.ttl=Ao;Al.set("title",Ao);},failure:function Aj(Ao){N(Ao);Al.titleBar.set("title",Ah);}});}Al.editingTitleCallback(false);};return Ad;},getTitleVisibilityFmts:function R(Ae){var Ad=this._super(Ae);Ad.FormattingView.ShowWidgetTitleBar=Ae;return Ad;},onclick:function z(){this.model.setVizBoxActive(this.id);this.titleBar.onclick();},switchPropertyOnClick:function AE(Ad){var Ae=this.boxContent;if(!Ae||!Ae.supportsEditorClickSwitching||Ad.e.justSwitched){return false;}return this._super();},postBuildRendering:function Aa(){try{this._super();this.selectorBtnNode=AM.call(this,this.selectorBtnNode,"hover-selector-btn","selectorMenuCfg");this.filterBtnNode=AM.call(this,this.filterBtnNode,"hover-filter-btn","filterMenuCfg");if(this.defn.ds===AT){this.parent.setPortalState(this,AT,true);}this.maxRestoreBtnNode=o.call(this,this.maxRestoreBtnNode);H.call(this);if(this.menuBtnInfo&&this.menuBtnInfo.btn){AB.attachEvent(this.menuBtnInfo.btn,"mousedown",function(){this.generateToolbar();}.bind(this));}var Ae=this;this.getDocModel().attachEventListener("vizBoxActive",Ae.id,function(Ah){j.call(Ae,Ae.id===Ah.id);var Ai=Ae.menuBtnInfo;if(Ai&&Ai.menuCfg){AU.toggleClass(Ai.btn,x,Ae.id===Ah.id);AU.toggleClass(Ai.btn,V,Ae.id!==Ah.id);}if(Ae.id===Ah.id){Ae.selectVIUnit();}});this.getDocModel().attachEventListener("visActive",Ae.id,function(Ah){if(Ae.boxContent&&Ae.boxContent.id===Ah.id){this.model.setVizBoxActive(Ae.id);}});}catch(Af){var Ag=this.domNode.appendChild(document.createElement("div"));Ag.className="errorNode";Ag.innerText=mstrmojo.desc(11461,"There was an error rendering your visualization");this.getZonesModel=function Ad(){return null;};}},doLayout:function t(){var Ad=this.boxContent;if(Ad){Ad.skipReRender=true;}this._super();if(Ad){delete Ad.skipReRender;}},applyBoxSize:function U(Ad,Af,Aj,Ai){this._super(Ad,Af,Aj,Ai);var Ah=this.boxContent,Ae=Ah&&Ah.getFormats();if(Ae){var Ag=this.titleBar.visible?AB.position(this.titlebarNode).h:0;Ae.height=(parseInt(Ad,10)-Ag)+w;Ae.width=Af;}},updateDisplayName:function q(Ad,Ae){this._super(Ad,Ae,true);},createDeleteUpdate:function g(){var Ah=this.model,Ak=Ah.getDataService().newUpdate(),Aj=this.boxContent.node.k,Ai=this.parent._tgtSelections,Ag=Ah.getSourceFilterKeys(Aj,true),Ae=Ag.concat(Ah.getTargetFilterKeys(this)),Af=[],Ad;this.parent.children.forEach(function(Am){var Al=Am.defn,An=Al.tks;if(An){if((An||"").split("\u001E").indexOf(Aj)>-1){Ak.addActions(Ah.getDataService().getRemoveCtrlTargetAction(Al.ck,Aj,undefined,true));if(Am.defn&&Am.defn.srct&&Am.defn.srct===k){Ak.setTreesToRender(3);}}}});if(Ai){Ai.remove(Aj);}if(Ae){Ak.setTreesToRender(3);}Ak.addUpdate(Ah.getRemoveUnitUpdate({unit:this,partialRetrievalKeys:Ae,clearTargets:true}));K.forEach(Ag,function(Al){Ad=Ah.getVisualizationByKey(Al);if(Ad){Af.push(Ad);}});Ak.addUpdate(Ah.associatedNodesUpdate(Af.concat(this.parent.children)));return Ak;},generateToolbar:function B(){var Ai=this.parent,Ae=Ai&&Ai.parent;if(Ae){var Ad=this.model.controller,Ag=this.model.getLayoutKeyByUnitKey(Ae.k),Af=Ad.view.getLayoutByKey(Ag),Ah=Ad.view.layoutViewer;if(Af){if(Af.k===Ah.k){if(this.generateToolbarSub){Af.detachEventListener(this.generateToolbarSub);delete this.generateToolbarSub;}}else{if(!this.generateToolbarSub){this.generateToolbarSub=Af.attachEventListener("generateVizBoxToolbar",this.id,"generateToolbar");}return ;}}}P.call(this);A.call(this);if(this.hasRendered){H.call(this);}this._super();},updateToolbar:function Y(Aj){var Al=this,Ao=this.boxContent,Ag=this.canShowDesignMenuItems(),Am=Ao&&Ao.excludeData,Ai=function(){if(!mstrApp.isDossier&&!mstrApp.isInVFConfigMode&&!Am){Aj.addMenuItem(mstrmojo.desc(11476,"Show Data"),"shwd",function(){mstrmojo.vi.ui.ViewDataDialog.open(mstrmojo.all[Al.id]);});}},Af=mstrApp.isAppStatePresentation(),Ak=mstrApp.isLayoutModePreview(),An=mstrApp.isWSStyling,Ah=An?mstrmojo.desc(15087,"Select Targets..."):mstrmojo.desc(11958,"Use as Filter...");Aj.supportsScroll=true;Aj.isHostedWithin=false;Aj.maxHeight=AB.getMaxScrollHeight();if(!Af&&mstrApp.allowWebDashboardDesign()){var Ae=this.model.hasMDXRADataset();h.call(this,Aj);if(Ao.getContainerMenuItems){Ao.getContainerMenuItems(Aj);}Aj.addSeparator();var Ad=Ao.zonesModel;if(Ad&&Ad.canSwapAxis()){Aj.addMenuItem(mstrmojo.desc(11658,"Swap"),"",function(){Ad.swapAxis();});Aj.addSeparator();}if(Ad&&Ad.canDefineSubtotals()){Aj.addToggleMenuItem(mstrmojo.desc(6193,"Show Totals"),"",function(){Ad.showQuickSubtotals();},function(){Ad.hideDefinedSubtotals();},null,Ad.hasVisibleSubtotals());Aj.addSeparator();}if(mstrApp.supportAdvFilter&&!mstrApp.isInVFInteractMode&&!Ae){Aj.addMenuItem(mstrmojo.desc(13402,"Edit Filter..."),"",function(){Al.onShowFilterEditor(Al);});}if(!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode){if(AX.call(this)){Aj.addMenuItem(Ah,"uaf",function(){var Aq=mstrmojo.all[Al.id],Ap=Al.model&&Al.model.getVizContentPanel();if(Ap){Ap.restoreAnyMaxedVizBox();}mstrApp.rootCtrl.view.openInlineDialog(d(Aq));});Aj.addSeparator();}}if(!Am){Aj.addMenuItem(mstrmojo.desc(15621,"Query Details..."),"",function(){var Aq=mstrmojo.all.sqlViewer,Ar=Al.boxContent&&Al.boxContent.model&&Al.boxContent.model.data,Ap=Ar&&Ar.csi;if(!Aq){Aq=mstrmojo.insert({id:"sqlViewer",title:mstrmojo.desc(15619,"Query Details"),scriptClass:"mstrmojo.vi.ui.editors.SQLCSIViewer"});}Aq.set("csiText",Ap||"");Aq.open();});}Ai();if(!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode){Aj.addMenuItem(mstrmojo.desc(14389,"Remove Data"),"",function(){Al.vizRemoveDataHandler(Ao);});}Aj.addPopupMenuItem(mstrmojo.desc(12949,"Data Source"),this.id,function(){var At=new mstrmojo.ui.menus.MenuConfig(),Ar=Al.model,As=Ar.datasets,Aq=Al.boxContent.model.data.datasetId||"",Ap=[];O.forEach(As,function(Au,Av){Ap.push({name:Au.name,id:Av});});if(!Ae){Ap.push({name:mstrmojo.desc(5949,"None"),id:""});}Ap.forEach(function(Au){var Av=Au.id;At.addMenuItem(Au.name,Aq===Av?"on":"",function(){var Aw=Al.k,Ax=Av;if(Aq===Av){return ;}Ao.zonesModel.submitActionForDatasetUpdate({act:"editNode",nodeKey:Aw,treeType:Al.defn.tt,datasetId:Ax||"00000000000000000000000000000000",partialRetrieval:{nodes:[Aw]}});});});At.hasToggleItem=true;return At;});Aj.addSeparator();if(AJ.call(this)&&!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode&&!Am){AZ.call(this,Aj);}if(!Ak&&Ag&&!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode&&!mstrApp.isVisBuilder){Aj.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"dup",function(){var Ap=Al.model&&Al.model.getVizContentPanel();if(Ap){Ap.restoreAnyMaxedVizBox();}Al.model.duplicateVisualization(Al);});f.call(this,Aj);}Aj.addSeparator();if(!mstrApp.isInVFConfigMode){this.addToggleTitleMenuItem(Aj);if(Ao.addToggleToolbarMenuItem){Ao.addToggleToolbarMenuItem(Aj);}}}else{Ai();if(AJ.call(this)&&!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode){AZ.call(this,Aj);}}this._super(Aj);if(!Af&&mstrApp.allowWebDashboardDesign()&&!mstrApp.isInVFConfigMode&&!mstrApp.isInVFInteractMode){Aj.addSeparator();Aj.addMenuItem(mstrmojo.desc(9126,"More Options...")+"...","",function(){var Ap=Al.getEditorModel(),Aq=Ap.getHost().model,As=Aq&&Aq.data,Ar=(As&&As.gsi&&As.gsi.prop)||{};if(Ao instanceof mstrmojo.vi.ui.rw.Xtab){Ap.openMoreOptionsEditor(Ar,true,As.lhv);}else{Ap.openMoreOptionsEditor(Ar);}});}return Aj;},vizRemoveDataHandler:function X(Ad){if(Ad.scriptClass==="mstrmojo.VisMapBase"){Ad.reset();}else{var Ae=Ad&&Ad.zonesModel;if(Ae&&Ae.docModel){Ae.clearAllDropZones(Ae.docModel.clearVisAsFilterAction(this));}}},addFormatMenuItem:function G(Ah,Ag,Ad){var Af=this.getEditorModel(),Ae=Af.getFormatToTargetFn&&Af.getFormatToTargetFn();if(Ae){Ad=Ad?c.composite([Ad,Ae]):Ae;}return this._super(Ah,Ag,Ad);},getFormatMenuItemTarget:function e(Af){var Ad=this.boxContent;if(Ad.getFormatMenuItemTarget){var Ae=Ad.getFormatMenuItemTarget(Af);if(Ae!==undefined){return Ae;}}return this._super(Af);},getZonesModel:function AO(){return this.boxContent.zonesModel;},allowDropFromDataset:function AI(Ad){var Ae=this.boxContent;if(Ae&&Ae.allowBoxDropFromDataset){return Ae.allowBoxDropFromDataset(Ad);}return true;},dropFromDataset:function p(Ad){AL.call(this,Ad,false);},dropFromAllObjects:function Z(Ad){this.augmentDropContextForSchema(Ad,this.getZonesModel().docModel);AL.call(this,Ad,true);},isDragValid:function r(Ad){var Ae=this.boxContent;if(Ae.canOnlyDragOnTitleBar){if(!AB.contains(this.titleBar.getLabelNode(),Ad.src.node,true,this.domNode)){return false;}}return this._super(Ad)&&!this.isMaxed;},menuDisplayCallback:function I(Ad){this._super(Ad);j.call(this,Ad);},getAvatarCls:function AH(){return this._super().concat(["viz-avi"]);},ondragenter:function D(Ae){var Af=this.boxContent,Ad=Ae.getCtxtDragData().src;if(Af.handleDndForParentNode&&Af.ondragenter){if(Ad===AQ.DATASETS||Ad===AQ.VIZ_EDITOR||Ad===AQ.VIZ||Ad===AQ.ALL_OBJECT_LIST){Af.ondragenter(Ae);return ;}}this._super(Ae);},ondragleave:function n(Ae){var Af=this.boxContent,Ad=Ae.getCtxtDragData().src;if(Af.handleDndForParentNode&&Af.ondragleave){if(Ad===AQ.DATASETS||Ad===AQ.VIZ_EDITOR||Ad===AQ.VIZ||Ad===AQ.ALL_OBJECT_LIST){Af.ondragleave(Ae);return ;}}this._super(Ae);},setTitleBarVisibility:function b(Ad){this._super(Ad);this.titleBar.onclick();},onmouseenter:function AF(Ad){this._super(Ad);j.call(this,true);},onmouseleave:function Ab(Ad){this._super(Ad);j.call(this,false);},validateTarget:function AC(){return true;},getNodeKeys:function J(){var Ae=this.boxContent,Ad=Ae&&Ae.isVisMap;return(Ad&&Ae.getNodeKeys)?Ae.getNodeKeys():[this.k];}});mstrmojo.vi.ui.rw.VizBox.ENUM_PORTAL_STATE={RESTORE:AN,MAXIMIZE:AT};}());(function(){mstrmojo.requiresCls("mstrmojo.chart.enums.EnumLineStyle");mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Point2D");var F=mstrmojo.chart,H=F.enums,J=H.EnumLineStyle,C=F.model.enums,A=C.EnumShapeType;mstrmojo.chart.StraightLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.StraightLineObject",mDeviceStartPoint:null,mDeviceEndPoint:null,midPoint:null,identity:null,init:function I(K){if(K.hasLine===undefined){K.hasLine=true;}this._super(K);this.mDeviceStartPoint=new F.Point2D({Point2D:K.StartPoint});this.mDeviceEndPoint=new F.Point2D({Point2D:K.EndPoint});if(K.MidPoint!==undefined&&K.MidPoint!==null){this.midPoint=K.MidPoint;}if(K.Identity!==undefined&&K.Identity!==null){this.identity=K.Identity;}},Draw:function B(){var O=this.mChartContextPtr,K=this.mFormatLinePtr,M=this.mDeviceStartPoint,L=this.mDeviceEndPoint,N;this.SetLineWidth();if(K.mLineStyle===J.LS_SOLID){O.DrawStraightLine(M,L);}else{O.NewPath();N=K.getLinePattern(K.mLineStyle);O.DrawDashedLine(M,L,N);}this.ApplyLineFormat();if(this.Shape===A._TICKER){O.FinishDrawTickerShape(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId);}else{O.FinishDrawStraightLine(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId,this.identity,this.midPoint);}},getShapeSize:function D(){if(this.Shape===A._TICKER){var K=this.mChartContextPtr.GetGraphMatrixContext();return Math.round(0.5*K.mConstants.FixedTickerSize);}return 0;},GetBoundingRect:function E(){if(this.Shape===A._TICKER){this.mBBox=this.mBBox||new F.Rect2D();if(this.mBBox.width!==0){return this.mBBox;}var N=this.mDeviceStartPoint,M=this.mDeviceEndPoint,K=this.mBBox,L=Math.max(1,0.5*this.mFormatLinePtr.mLineThickness);if(N.x===M.x){K.x=Math.max(N.x-L,0);K.y=Math.min(N.y,M.y);K.width=2*L;K.height=Math.abs(N.y-M.y);}else{K.y=Math.max(N.y-L,0);K.x=Math.min(N.x,M.x);K.height=2*L;K.width=Math.abs(N.x-M.x);}return K;}else{return this._super();}},GetClockwisePolygon:function G(){var K=[new F.Point2D(),new F.Point2D(),new F.Point2D(),new F.Point2D()];var P=this.mDeviceStartPoint,M=this.mDeviceEndPoint;if(!P.isEqual(M)){var O=Math.max(this.mFormatLinePtr.mLineThickness/2,F.gOutlineBlack.mLineThickness/2);O=Math.max(O,2);var N=new F.Point2D({x:2*P.x-M.x,y:2*P.y-M.y});var L=new F.Point2D({x:2*M.x-P.x,y:2*M.y-P.y});this.GetAngularBisectorIntersectionPoint(M,P,N,O,K[0]);this.GetAngularBisectorIntersectionPoint(L,M,P,O,K[1]);this.GetAngularBisectorIntersectionPoint(P,M,L,O,K[2]);this.GetAngularBisectorIntersectionPoint(N,P,M,O,K[3]);}else{K[0].Reset(P.x-1,P.y-1);K[1].Reset(P.x+1,P.y-1);K[2].Reset(P.x+1,P.y+1);K[3].Reset(P.x-1,P.y+1);}return K;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartContext","GraphObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumBoxStyle");var F=mstrmojo.chart,H=F.enums,K=H.EnumCollectionType,C=H.EnumBoxStyle;mstrmojo.chart.GraphCollectionObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphCollectionObject",mGraphObjectCollection:[],mFormatFillPtr:null,mFormatFontPtr:null,mCollectionType:K.CT_NO_COLLECTION,init:function N(P){P.hasLine=false;this._super(P);var S=this.mChartContextPtr,R=this.mTripleId,Q=this.mCollectionType=P.CollectionType,O=P.Shape;this.mGraphObjectCollection=[];switch(this.mCollectionType){case K.CT_LINE:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);break;case K.CT_GENERAL_SHAPE:case K.CT_VERTICAL_AREA:case K.CT_VERTICAL_BAR:case K.CT_HORIZONTAL_AREA:case K.CT_HORIZONTAL_BAR:case K.CT_DEPTH_LINE_OR_LINE_MARKER:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);this.mFormatFillPtr=S.GetFormatFill(R,Q,O);break;case K.CT_TEXT:this.mFormatFontPtr=S.GetFormatFont(R);if(this.mFormatFontPtr.mFontBox!==C.BS_NOFRAME&&!S.mIsGraphMatrix){this.mFormatFillPtr=S.GetFormatFill(R,Q);this.mFormatLinePtr=S.GetFormatLine(R,Q,O);}break;case K.CT_NO_FORMAT:break;default:break;}},AddGraphObject:function G(P,O){if(O===undefined){O=true;}this.mGraphObjectCollection.push(P);P.mpParentObject=this;if(O){P.getFormatFromParent();}},ClearCollection:function J(){this.mGraphObjectCollection=[];},GetCollectionSize:function M(){return this.mGraphObjectCollection.length;},GetObjectByIndex:function D(O){return this.mGraphObjectCollection[O];},SetFormatFill:function A(O){this.mFormatFillPtr=O;},SetFormatFont:function E(O){this.mFormatFontPtr=O;},GetFormatFill:function L(){return this.mFormatFillPtr;},GetFormatFont:function B(){return this.mFormatFontPtr;},Replace:function I(O,P,Q){if(O>=0&&O<this.mGraphObjectCollection.length){if(Q===undefined){Q=true;}this.mGraphObjectCollection[O]=P;P.mpParentObject=this;if(Q){P.getFormatFromParent();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Vector2D","Point2D");var V=mstrmojo.chart,L=1e-14,I=0.1,p=0.001,S=1.732050807568877;function k(x){return(x-this.mP0.x)/(this.mP3.x-this.mP0.x);}function l(){return(this.mP0.y===this.mP1.y)&&(this.mP1.y===this.mP2.y)&&(this.mP2.y===this.mP3.y);}function Q(y){var x=1/(y+1);return(((this.mP0.y*y+3*this.mP1.y)*y+3*this.mP2.y)*y+this.mP3.y)*x*x*x;}function D(y){var x=1/(y+1);return(((this.mP1.y-this.mP0.y)*y+2*(this.mP2.y-this.mP1.y))*y+this.mP3.y-this.mP2.y)*x*x/(this.mP1.x-this.mP0.x);}function s(AE){var AD=(1-AE)*this.mP0.y+AE*this.mP1.y,y=(1-AE)*this.mP1.y+AE*this.mP2.y,AF=(1-AE)*this.mP2.y+AE*this.mP3.y,AC=(1-AE)*AD+AE*y,x=(1-AE)*y+AE*AF,AB=(1-AE)*AC+AE*x,AA=new V.Point2D({x:((1-AE)*this.mP0.x+AE*this.mP3.x),y:AB}),z=new V.BezierCurve({P0:AA,P1:x,P2:AF,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});this.mP3=AA;this.mP1.Reset((2*this.mP0.x+this.mP3.x)/3,AD);this.mP2.Reset((this.mP0.x+2*this.mP3.x)/3,AC);return z;}function W(AD,AB,y,AF){var AA;if(-L<AD&&AD<L){if(-L<AB&&AB<L){return ;}AA=-y/(2*AB);if(AA<L){return ;}AF.push(AA);return ;}var AC=AB*AB-AD*y;if(AC<-L){return ;}if(-L<AC&&AC<L){AA=-AB/AD;if(AA<L){return ;}AF.push(AA);return ;}var x=Math.sqrt(AC),AE=(-AB+x)/AD,z=(-AB-x)/AD;if(AE>L){AF.push(AE);}if(z>L){AF.push(z);}}function w(y){var x=(y<0)?-1:1;return x*Math.pow(x*y,1/3);}function n(AO,AN,AK,AJ,AL){if(-L<=AO&&AO<=L){W.call(this,3*AN,3*AK/2,AJ,AL);return ;}var y=AN/AO,AG=AK/AO,AP=AJ/AO,AE=AG-y*y,AD=(3*y*AG-AP)/2-y*y*y,AM=AE*AE*AE+AD*AD;if(AM>L){var AI=Math.sqrt(AM),AH=w.call(this,AD+AI)+w.call(this,AD-AI)-y;AL.push(AH);}else{if(AM>-L){var z=w.call(this,AD);AL.push(2*z-y);AL.push((AD<0?0.5:-1)*z-y);}else{var AC=AD*AD-AM,AA=Math.acos(AD/Math.sqrt(AC))/3,x=Math.pow(AC,1/6),AF=x*Math.cos(AA);AL.push(2*AF-y);var AB=S*x*Math.sin(AA);AL.push(-AF-y+AB);AL.push(-AF-y-AB);}}AL.sort();AL.reverse();while(AL.length!==0&&AL[AL.length-1]<=L){AL.pop();}}function e(x,y){var AC=this.mP1.y-this.mP0.y,AB=this.mP2.y-this.mP1.y,AA=this.mP3.y-this.mP2.y,z=x*(this.mP3.x-this.mP0.x)/3;W.call(this,AC-z,AB-z,AA-z,y);}function J(z,AA){z.sort();z.reverse();var AC=1;while(z.length!==0){var AB=1/(z[z.length-1]+1);AB*=AC;z.pop();var y=this.mP0.x+(this.mP3.x-this.mP0.x)*AB;if(Math.abs(y-this.mP0.x)>p&&Math.abs(this.mP3.x-y)>p){AC=AB;AA.push(s.call(this,AB));}}AA.reverse();}function c(){if(this.mP0.x<this.mP3.x){return ;}this.mP0.swapPoints(this.mP3);var x=this.mP1;this.mP1=this.mP2;this.mP2=x;}function f(AA,x){var z=this.Clone();c.call(z);if(AA-z.mP0.x<L){return x?z:null;}if(z.mP3.x-AA<L){return x?null:z;}var y=s.call(z,k.call(z,AA));return x?y:z;}function R(x){this.mP0.y-=x.mP0.y;this.mP1.y-=x.mP1.y;this.mP2.y-=x.mP2.y;this.mP3.y-=x.mP3.y;}function Z(AB){var x=[],z;n.call(this,this.mP0.y,this.mP1.y,this.mP2.y,this.mP3.y,x);if(x.length===0){return ;}var y=x.length;for(z=0;z<y;++z){var AA=(x[z]*this.mP0.x+this.mP3.x)/(x[z]+1);AB.push(AA);}}function F(x,AA){var AF=this.getMinX(),AE=this.getMaxX(),z=Math.min(x.x,AA.x),AB=Math.max(x.x,AA.x);if(AB-AF<I||AE-z<I){return false;}if(AB-z<I){var AC=this.evaluate(x.x);return(AC-x.y)*(AA.y-AC)>-I;}z=Math.max(AF,z);AB=Math.min(AE,AB);var AG=(AA.y-x.y)/(AA.x-x.x),AD=x.y+AG*(z-x.x),y=x.y+AG*(AB-x.x);return(this.evaluate(z)-AD)*(this.evaluate(AB)-y)<-I;}function u(y,AE){var AD=this.getMinX(),AA=this.getMaxX(),x=y.getMinX(),AC=y.getMaxX();if(AA-I<x||AC-I<AD){return ;}if(AD>x){u.call(y,this,AE);return ;}var z=null,AB=null;if(AA<AC){z=f.call(this,x,true);AB=f.call(y,AA,false);}else{z=f.call(this,x,true);z=f.call(z,AC,false);AB=y.Clone();c.call(AB);}R.call(z,AB);Z.call(z,AE);}mstrmojo.chart.BezierCurve=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.BezierCurve",mP0:null,mP1:null,mP2:null,mP3:null,mIsVertical:false,init:function o(x){if(x.P0!==undefined&&x.P1!==undefined&&x.P2!==undefined&&x.P3!==undefined){this.mP0=new V.Point2D({Point2D:x.P0});this.mP1=new V.Point2D({Point2D:x.P1});this.mP2=new V.Point2D({Point2D:x.P2});this.mP3=new V.Point2D({Point2D:x.P3});this.mIsVertical=true;}if(x.P0!==undefined&&x.F1!==undefined&&x.F2!==undefined&&x.P3!==undefined){x.IsXAlwaysIndependent=x.IsXAlwaysIndependent||false;this.mP0=new V.Point2D({Point2D:x.P0});this.mP3=new V.Point2D({Point2D:x.P3});this.mIsVertical=x.IsVertical;if(!this.mIsVertical&&!x.IsXAlwaysIndependent){this.mP0.swap();this.mP3.swap();}if(this.mP3.x-this.mP0.x<L&&this.mP0.x-this.mP3.x<L){this.mP3.x=this.mP0.x+0.01;}this.mP1=new V.Point2D({x:(2*this.mP0.x+this.mP3.x)/3,y:x.F1});this.mP2=new V.Point2D({x:(this.mP0.x+2*this.mP3.x)/3,y:x.F2});}},getStartPoint:function E(){return this.mIsVertical?this.mP0:new V.Point2D({x:this.mP0.y,y:this.mP0.x});},getEndPoint:function C(){return this.mIsVertical?this.mP3:new V.Point2D({x:this.mP3.y,y:this.mP3.x});},getMinX:function M(){return this.mP0.x<this.mP3.x?this.mP0.x:this.mP3.x;},getMaxX:function r(){return this.mP0.x<this.mP3.x?this.mP3.x:this.mP0.x;},getStartIndependent:function h(){return this.mP0.x;},getEndIndependent:function O(){return this.mP3.x;},GetApproximatePolygon:function q(AE,AI){var AJ=[],AD;this.GetApproximatePolyline(AJ);var AF=[],z=AJ.length-1,AB=this.mP1.x-this.mP0.x;AF.push((this.mP1.y-this.mP0.y)/AB);for(AD=1;AD<z;++AD){var AH=z/AD-1;AF.push(D.call(this,AH));}AF.push((this.mP3.y-this.mP2.y)/AB);var AC=(AE+3)/2,y=AJ.length,AK=2*y;if(AI===undefined){AI=[];}for(AD=0;AD<AK;++AD){AI.push(null);}for(AD=0;AD<y;++AD){var x=new V.Vector2D({x:-AF[AD],y:1}),AG=AC/x.Length(),AA=new V.Point2D({x:x.x*AG+0.5,y:(x.y*AG+0.5)});AI[AD]=AJ[AD].Shifted(AA);AI[AK-1-AD]=AJ[AD].NegativeShifted(AA);}if(!this.mIsVertical){for(AD=0;AD<AK;++AD){AI[AD].swap();}}},GetApproximatePolyline:function N(AA){var z=10,x=3,AB=Math.floor(this.getMaxX()-this.getMinX()+0.5)/z,AC;AB=Math.max(x,AB);AA.push(new V.Point2D({x:this.mP0.x+0.5,y:this.mP0.y+0.5}));for(AC=1;AC<AB;++AC){var AD=AC/AB;var y=1/AD-1;AA.push(new V.Point2D({x:((1-AD)*this.mP0.x+AD*this.mP3.x+0.5),6:(Q.call(this,y)+0.5)}));}AA.push(new V.Point2D({x:this.mP3.x+0.5,y:(this.mP3.y+0.5)}));},isBefore:function a(AB,y){if(!this.mIsVertical){AB.swap();}if(F.call(y,this.mP0,this.mP0.Shifted(AB))||F.call(y,this.mP3,this.mP3.Shifted(AB))){return true;}AB.Reset(-AB.x,-AB.y);if(F.call(this,y.mP0,y.mP0.Shifted(AB))||F.call(this,y.mP3,y.mP3.Shifted(AB))){return true;}var x=Math.max(this.getMinX(),y.getMinX()),AA=Math.min(this.getMaxX(),y.getMaxX());if(x-AA>-0.1*I){return false;}var AC=(x+AA)/2,z=new V.Point2D({x:AC,y:y.evaluate(AC)});return F.call(this,z,z.Shifted(AB));},SplitAtTangentPoints:function A(AE,z){if(AE.x===0){return ;}var AD=[];e.call(this,AE.y/AE.x,AD);var AC=AD.length,AB=[],AA;for(AA=0;AA<AC;++AA){var y=(AD[AA]*this.mP0.x+this.mP3.x)/(AD[AA]+1);if(Math.abs(this.evaluate2ndDerivative(y))>0.01*I){AB.push(AD[AA]);}}J.call(this,AB,z);},SplitAtIntersections:function b(x,z){var AC=[];u.call(this,x,AC);if(AC.length===0){return ;}var AB=[],AA;var AD=AC.length;for(AA=0;AA<AD;++AA){var y=(AC[AA]-this.mP0.x);if(Math.abs(y)>p){AB.push((this.mP3.x-this.mP0.x)/y-1);}}if(AB.length===0){return ;}J.call(this,AB,z);},GetControlPoints:function K(x){x.push(this.mP0);x.push(this.mP1);x.push(this.mP2);x.push(this.mP3);},Reverse:function d(){this.mP0.swapPoints(this.mP3);this.mP1.swapPoints(this.mP2);},MoveToStart:function Y(x,AA){var y=AA?0.5:0,z=AA&&l.call(this)?0.5:0;if(this.mIsVertical){x.MoveTo(this.mP0.x+y,this.mP0.y+z);}else{x.MoveTo(this.mP0.y+z,this.mP0.x+y);}},CurveToEnd:function g(y,AB){var z=AB?0.5:0,AA=AB&&l.call(this)?0.5:0,x=(Math.abs(this.mP0.x-this.mP1.x)<0.5)?0.5:0;if(this.mIsVertical){y.BezierCurveTo(this.mP1.x+x,this.mP1.y+AA,this.mP2.x+x,this.mP2.y+AA,this.mP3.x+z,this.mP3.y+AA);}else{y.BezierCurveTo(this.mP1.y+AA,this.mP1.x+x,this.mP2.y+AA,this.mP2.x+x,this.mP3.y+AA,this.mP3.x+z);}},LineToStart:function U(x,AA){var y=AA?0.5:0,z=AA&&l.call(this)?0.5:0;if(this.mIsVertical){x.LineTo(this.mP0.x+y,this.mP0.y+z);}else{x.LineTo(this.mP0.y+z,this.mP0.x+y);}},GetMinMax:function j(){var y={MinY:Math.min(this.mP0.y,this.mP3.y)+0.5,MaxY:Math.max(this.mP0.y,this.mP3.y)+0.5};if((this.mP1.y>=y.MinY&&this.mP2.y>=y.MinY)&&(this.mP1.y<=y.MaxY&&this.mP2.y<=y.MaxY)){return y;}var x=[];e.call(this,0,x);while(x.length!==0){var z=(Q.call(this,x[x.length-1])+0.5);x.pop();y.MinY=Math.min(y.MinY,z);y.MaxY=Math.max(y.MaxY,z);}return y;},Clone:function G(){return new V.BezierCurve({P0:this.mP0,P1:this.mP1.y,P2:this.mP2.y,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});},evaluate:function X(y){var x=(y-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*x+(this.mP2.y-2*this.mP1.y+this.mP0.y)*3)*x+(this.mP1.y-this.mP0.y)*3)*x+this.mP0.y;},evaluateDerivative:function B(y){var x=(y-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*x+(this.mP2.y-2*this.mP1.y+this.mP0.y)*2)*x+(this.mP1.y-this.mP0.y))*3/(this.mP3.x-this.mP0.x);},evaluate2ndDerivative:function P(z){var AC=this.mP1.y-this.mP0.y,AB=this.mP2.y-this.mP1.y,AA=this.mP3.y-this.mP2.y,x=this.mP3.x-this.mP0.x,y=(z-this.mP0.x)/(this.mP3.x-this.mP0.x);return 6*(AB-AC+(AA-2*AB+AC)*y)/(x*x);},evaluate3rdDerivative:function H(){var x=this.mP3.x-this.mP0.x;return 6*(this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)/(x*x*x);},CloneReverseShift:function t(x){if(!this.mIsVertical){x.swap();}return new V.BezierCurve({P0:this.mP3.Shifted(x),P1:this.mP2.y+x.y,P2:this.mP1.y+x.y,P3:this.mP0.Shifted(x),IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine");var E=mstrmojo.chart,J=mstrmojo.chart.enums,I=J.EnumLineJoinType,H=10;function M(Q,P,O){return Q?P.x===O.x:P.y===O.y;}function F(){var S=this.mChartContextPtr,O=this.mFormatLinePtr,Q=O.getGradient(),P=O&&Q&&Q.valid;if(!S.mIsGraphMatrix||!P){this.ApplyLineFormat();}else{if(Q.style===0){this.ApplyLineFormat();}else{var R=Q.angle===1;this.Vibrate(0.01,R);this.ApplyLineFormat();}}}function L(S,R){var Q,O=S.length;for(Q=1;Q<=O*2;Q++){R.push({});}var P=Math.max(this.mFormatLinePtr.mLineThickness/2,E.gOutlineBlack.mLineThickness/1.3);var V={x:2*S[0].x-S[1].x,y:2*S[0].y-S[1].y};var U={x:2*S[O-1].x-S[O-2].x,y:2*S[O-1].y-S[O-2].y};this.GetAngularBisectorIntersectionPoint(S[1],S[0],V,P,R[0]);this.GetAngularBisectorIntersectionPoint(U,S[O-1],S[O-2],P,R[O-1]);this.GetAngularBisectorIntersectionPoint(S[O-2],S[O-1],U,P,R[O]);this.GetAngularBisectorIntersectionPoint(V,S[0],S[1],P,R[2*O-1]);for(Q=1;Q<O-1;++Q){this.GetAngularBisectorIntersectionPoint(S[Q+1],S[Q],S[Q-1],P,R[Q]);this.GetAngularBisectorIntersectionPoint(S[Q-1],S[Q],S[Q+1],P,R[2*O-1-Q]);}}mstrmojo.chart.PolyLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.PolyLineObject",mLinePoints:null,isClosePath:false,identity:null,init:function N(Q){Q.hasLine=Q.hasLine||true;Q.isClosePath=Q.isClosePath||false;this._super(Q);var P,S=this.mLinePoints=[],R=Q.PolyLine,O=R.length;for(P=0;P<O;P++){S.push(R[P]);}if(Q.Identity!==undefined&&Q.Identity!==null){this.identity=Q.Identity;}},Draw:function C(){if(this.mLinePoints.length<2){return ;}var P=this.mChartContextPtr,O=P.GetLineJoin();P.SetLineJoin(I.LJT_ROUND);this.SetLineWidth();this.SetPath();F.call(this);P.SetLineJoin(O);P.FinishDrawPolyline(this.mLinePoints,this.mTripleId,!this.mIsDetectable,this.identity,this.startPoint,this.midPoint,this.endPoint);},GetPolygons:function G(U){var R,Q,Y=this.mLinePoints,V=Y.length;if(V<2){return ;}var P=2/(H*H);var O=[];O.push(0);for(R=1;R+1<V;++R){var Z={x:Y[R-1].x-Y[R].x,y:Y[R-1].y-Y[R].y};var W={x:Y[R+1].x-Y[R].x,y:Y[R+1].y-Y[R].y};Z.x=Z.x/Math.sqrt(Z.x*Z.x+Z.y*Z.y);Z.y=Z.y/Math.sqrt(Z.x*Z.x+Z.y*Z.y);W.x=W.x/Math.sqrt(W.x*W.x+W.y*W.y);W.y=W.y/Math.sqrt(W.x*W.x+W.y*W.y);if(1-(Z.x*W.x+Z.y*W.y)<P){O.push(R);}}O.push(V-1);V=O.length;for(R=1;R<V;++R){var S=[];for(Q=O[R-1];Q<=O[R];++Q){S.push(Y[Q]);}var X=[];L.call(this,S,X);U.push(X);}},SetPath:function D(){var R=this.mChartContextPtr,O=this.mFormatLinePtr,Q=this.mLinePoints,P=[];if(this.isClosePath){P=P.concat(Q);P.pop();R.DrawPolygon(P,true,false,0,O.mLineStyle);}else{R.DrawPolyLine(Q,true,false,0,O.mLineStyle);}},getBoundingPoints:function B(){return{Shape:1,Points:this.mLinePoints};},movePointsAgainstBorder:function A(){var W=this.mChartContextPtr,U=this.mLinePoints,O=U.length,V=W.IsVertical();if(W.mIsGraphMatrix===false){return ;}var S=this.mFormatLinePtr.mLineThickness;if(S>2){return ;}var R,P=V?W.mGraphHeight:0,Q=V?0:W.mGraphWidth;for(R=0;R<O;R++){if(V){if(U[R].y>=P){U[R].y--;}if(U[R].y<=Q){U[R].y++;}}else{if(U[R].x<=P){U[R].x++;}if(U[R].x>=P){U[R].x--;}}}},Vibrate:function K(O,R){var P,Q=this.mLinePoints;for(P=0;P+1<Q.length;P+=2){if(M.call(this,R,Q[P],Q[P+1])){if(R){Q[P+1].x+=O;}else{Q[P+1].y+=O;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumDSSGraphFillEffect");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","GraphObject","FormatFill","ChartContext");var L=mstrmojo.chart,I=L.enums,P=I.EnumCollectionType,H=mstrmojo.chart.model,Q=H.enums,F=Q.EnumDSSGraphObject,N=Q.EnumDSSGraphFillBevelEffect,D=Q.EnumDSSGraphFillEffect;mstrmojo.chart.ShapeObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.ShapeObject",init:function J(S){if(S.hasFill===undefined){S.hasFill=true;}if(S.hasLine===undefined){S.hasLine=true;}this._super(S);if(S.hasFill&&this.mTripleId.mObjectId!==F.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,P.CT_NO_COLLECTION):this.mpParentObject.GetFormatFill();}},getRadialInfo:function K(){return null;},ApplyFillFormat:function E(a){var Z,U=false,W,S=this.mFormatFillPtr;if(S===null){return ;}if(a===undefined){a=false;}if(S.mAlpha===0){if(S.supportAdvancedFill((0))){var Y=S.mFillBevel.type;if(Y===N.DssGraphFillBevelSmoothEdge||Y===N.DssGraphFillBevelChiselEdge){if(!a){this.FillBevel();}}}}Z=S.mSimpleColor;if(U){W=new L.FormatFill();W.mSimpleColor=Z;W.mFillType=D.DssGraphFillSimple;W.mAlpha=S.mAlpha;W.mDarkerFactor=S.mDarkerFactor;W.mFillBevel=S.mFillBevel;W.mFillGradient=S.getGradient();W.mFillPattern=S.mFillPattern;S=this.mFormatFillPtr=W;}switch(S.mFillType){case D.DssGraphFillSimple:S.FillSimple(this.mChartContextPtr);break;case D.DssGraphFillAdvancedWash:case D.DssGraphFillGenericGradient:if(S.mFillGradient.gradientType===9){var X=this.getRadialInfo();if(X){S.FillGradient(this.mChartContextPtr,X);return ;}}var V=this.GetBoundingRect();S.FillGradient(this.mChartContextPtr,V);break;case D.DssGraphFillPattern:break;case D.DssGraphFillPicture:case D.DssGraphFillUserPicture:break;default:break;}if(!a){this.FillBevel();}},FillBevel:function G(){var S,U=this.mFormatFillPtr;if(U.supportAdvancedFill(0)===false){return ;}switch(U.mFillBevel.type){case N.DssGraphFillBevelNone:break;case N.DssGraphFillBevelSmoothEdge:case N.DssGraphFillBevelChiselEdge:if(this.SupportBevelEffect()){U.FillEdgeType(this.mChartContextPtr,this.GetClockwisePolygon());}break;case N.DssGraphFillBevelDonut:case N.DssGraphFillBevelSphere:S=this.GetBoundingRect();U.FillDonutOrSphere(this.mChartContextPtr,S,this.IsCircularShape());break;}},SupportBevelEffect:function M(){return true;},IsCircularShape:function A(){return false;},SetFormatFill:function B(S){this.mFormatFillPtr=S;},GetFormatFill:function R(){return this.mFormatFillPtr;},getFormatFromParent:function O(){var S=this.mpParentObject;this.mFormatLinePtr=S.mFormatLinePtr;this.mFormatFillPtr=S.GetFormatFill();},GetBoundingRectFromPolygon:function C(W){var U=new L.Rect2D(),Y,V;U.x=W[0].x;U.y=W[0].y;var S=W[0].x,X=W[0].y;Y=W.length;for(V=1;V<Y;++V){U.x=Math.min(U.x,Math.floor(W[V].x));U.y=Math.min(U.y,Math.floor(W[V].y));S=Math.max(S,W[V].x);X=Math.max(X,W[V].y);}U.width=S-U.x;U.height=X-U.y;return U;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","GraphObjectManager");mstrmojo.chart.GraphObjectAggregation=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphObjectAggregation",mGraphObjectList:null,mStartFrameGraphObjectList:null,init:function I(J){this._super(J);this.mGraphObjectList=[];this.mStartFrameGraphObjectList=[];},AddGraphObject:function F(K,J){if(J){this.mStartFrameGraphObjectList.push(K);}else{this.mGraphObjectList.push(K);}},Clear:function B(K,J){if(K){this.mStartFrameGraphObjectList=[];}if(J){this.mGraphObjectList=[];}},ObjectInRectangle:function D(J){return false;},GetClockwisePolygon:function G(){return[];},SetProgress:function H(K){var J=this.mGraphObjectList,M=J.length,L;this._super(K);for(L=0;L<M;++L){J[L].SetProgress(this.mProgress);}},OnPointDetectionEx:function C(N,L,O,J,K,M){return mstrmojo.chart.GraphObjectManager.prototype.OnPointDetectionByList.apply(this,[this.mGraphObjectList,N,L,O,J,K,M]);},Draw:function A(){var M=this.mChartContextPtr,J=this.mGraphObjectList,L=J.length,K;if(this.mIsAnimationEnabled){M.BeginFirstFrame();for(K=0;K<L;++K){this.mStartFrameGraphObjectList[K].Draw();}M.EndFrame();M.BeginLastFrame();}for(K=0;K<L;++K){J[K].Draw();}M.EndFrame();},IsLayerObject:function E(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","ImageMap","FormatLine","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumMarkerShape","EnumLineStyle","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject");var Y=mstrmojo.chart,U=Y.enums,N=U.EnumObjectShape.OS_CIRCLE,X=U.EnumMarkerShape,B=U.EnumLineStyle,C=U.EnumGraphMajorType,O=mstrmojo.hash,R=103,P=Y.model,c=P.enums,I=c.EnumDSSGraphMarkerShape,J=c.EnumDSSGraphObject,E=10,b=31,D=100,H=[[4,-100,-100,100,-100,100,100,-100,100],[12,-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[12,-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[12,-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[0],[4,0,-100,100,0,0,100,-100,0],[3,0,-100,100,100,-100,100],[4,-100,-100,100,-100,100,100,-100,100],[10,0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[7,0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100],[8,-100,-100,0,-50,100,-100,50,0,100,100,0,50,-100,100,-50,0]];Y.gMarkerShapeMap=[I.DssGraphMarkerShapeRectangle,I.DssGraphMarkerShapePlainX,I.DssGraphMarkerShapePlus,I.DssGraphMarkerShapeFatPlus,I.DssGraphMarkerShapeCircle,I.DssGraphMarkerShapeDiamond,I.DssGraphMarkerShapeTriangle1,I.DssGraphMarkerShapeSquare,I.DssGraphMarkerShapeStar5,I.DssGraphMarkerShapeHouse,I.DssGraphMarkerShapeStar45];Y.gMarkerShapeDict=[];function d(g){var f=H.length,j=Y.gMarkerShapeMap,k=Y.gMarkerShapeDict,h=false,e;if(k.length===0){for(e=0;e<j.length;e++){k[j[e]]=e;}}if(h){for(e=0;e<f;++e){if(j[e]===g){return e;}}}else{return k[g]||0;}return 0;}function L(){var e=this.mPolygon=[],h=this.mMarkerShape,l=this.mMarkerSize,g=this.mMarkerPosition;var o,j,f,q=false,n,k;if(h===X.MS_Circle){if(q){for(o=0;o<360;o+=E){j=Y.gModuleMain.DegreeToRadian(o);e.push(new Y.Point2D({x:g.x+l*Math.cos(j),y:g.y+l*Math.sin(j)}));}}else{e.push(new Y.Point2D({x:g.x-l,y:g.y-l}));e.push(new Y.Point2D({x:g.x+l,y:g.y-l}));e.push(new Y.Point2D({x:g.x+l,y:g.y+l}));e.push(new Y.Point2D({x:g.x-l,y:g.y+l}));}return ;}var s=H[h];var r=s[0];if(this.mIsIsometric){for(f=0;f<r;++f){n=s[2*f+1]*l/D+g.x;k=s[2*f+2]*l/D+g.y;e.push(new Y.Point2D({x:n,y:k}));}}else{var p;for(f=0;f<r;++f){n=s[2*f+1]*l/D+g.x;k=s[2*f+2]*l/D+g.y;p={x:n,y:k};p=this.mChartContextPtr.vdPoint(p);e.push(p);}}}function S(g){var e={drawBorder:true,shapeSize:g},f=this.mFormatLinePtr;if(f&&g>=f.mLineThickness+1&&f.mLineStyle!==B.LS_NONE){e.shapeSize=g-f.mLineThickness;}else{e.drawBorder=false;}return e;}mstrmojo.chart.MarkerObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.MarkerObject",mMarkerSize:0,mMarkerShape:I.DssGraphMarkerShapeNone,mMarkerPosition:null,mIsIsometric:true,mPolygon:null,mIsShown:true,init:function V(e){e.hasLine=e.MarkerSize>=2;this._super(e);var f=this.mChartContextPtr;this.mMarkerPosition=new Y.Point2D({Point2D:e.MarkerPosition});this.mMarkerShape=d.call(this,e.MarkerShape);this.mIsIsometric=e.IsIsometric;this.mMarkerSize=e.MarkerSize;this.mIsShown=true;if(e.IsDialogSize){this.mMarkerSize=f.dialogSizeToPixelSize(e.MarkerSize);}},fallOut:function A(k){var o=this.mChartContextPtr,g=o.mGraphWidth,j=o.mGraphHeight,f=this.mMarkerPosition,e=f.x,n=f.y,l=this.mMarkerSize;if(k){return e+l<0||e-l>g||n+l<0||n-l>j;}else{return(e-l>=0&&e+l<=g)&&(n-l>=0&&n+l<=j);}},Draw:function Q(){if(!this.mIsShown){return ;}var f=this.mChartContextPtr,e=f.GetGraphMajorType();if(f.mPartialRendering){if(this.fallOut(true)){return ;}}if(this.mIsAnimationEnabled&&e===C.GMT_BUBBLE){f.BeginFirstFrame();this.SetProgress(0);this.DoDraw();f.EndFrame();f.BeginLastFrame();}this.DoDraw();if(this.mIsAnimationEnabled&&e===C.GMT_BUBBLE){this.mChartContextPtr.EndFrame();}},DoDraw:function a(){var f=this.mChartContextPtr;var o,g,p,k,q,n,h,j,r,e,l;q=this.mMarkerSize;o=S.call(this,q);this.mMarkerSize=o.shapeSize;r=o.drawBorder;if(r){this.SetLineWidth();}this.setMarkerPath(false);this.ApplyFillFormat();if(f.NeedAdjustedLinePath()){this.setMarkerPath(true);}if(r&&this.mFormatLinePtr.mLineStyle!==B.LS_SOLID&&!f.mUseAnimation){if(this.mMarkerShape===X.MS_Circle){o=Y.FormatLine.getLinePattern(this.mFormatLinePtr.mLineStyle);g=this.mMarkerSize*Math.abs(2*Math.PI);p=0;k=0;n=o.length;h=Math.PI/5;j=0;while(p<g){e=Math.min(o[k%n],g-p);l=e/this.mMarkerSize;++k;if(h>l){l=h;}p+=l*this.mMarkerSize;if(k%2===1){f.NewPath();f.drawArc(this.mMarkerPosition,this.mMarkerSize,j,j+l,false);this.ApplyLineFormat();}j+=l;}}}if(r){this.ApplyLineFormat();}if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){f.FinishDrawCircle({x:this.mMarkerPosition.x,y:this.mMarkerPosition.y,r:this.mMarkerSize},this.mTripleId);}else{f.FinishDrawPolygon(this.mPolygon,0,this.mTripleId);}this.mMarkerSize=q;},setMarkerPath:function F(g){var j=this.mChartContextPtr,f,h=this.mMarkerSize,e=this.mMarkerShape;if(j.mImageFormat===R){return ;}if(this.mPolygon===null){L.call(this);}if(e===I.DssGraphMarkerShapeCircle){j.drawArc(this.mMarkerPosition,h,0,Math.PI*2);}else{j.DrawPolygon(this.mPolygon,g);}},GetBoundingRect:function K(){if(this.mPolygon===null){L.call(this);}return this.GetBoundingRectFromPolygon(this.mPolygon);},GetClockwisePolygon:function Z(){if(this.mPolygon===null){L.call(this);}return Y.Polygon2D.clone(this.mPolygon);},SetMarkerShape:function G(f){var e=d.call(this,f);if(this.mMarkerShape===e){return ;}this.mMarkerShape=e;L.call(this);},getRadialInfo:function W(){if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){var e={r:this.mMarkerSize,cx:this.mMarkerPosition.x,cy:this.mMarkerPosition.y,fx:0,fy:0};e.fx=e.cx;e.fy=e.cy;return e;}return null;},getShapeSize:function M(){return this.mMarkerSize;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGenericDirection","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","FormatLine","Rect2D");var V=mstrmojo.chart,L=mstrmojo.chart.model,X=L.enums,C=X.EnumShapeType,G=X.EnumDSSGraphObject,M=V.FormatLine,P=mstrmojo.chart.enums,A=P.EnumLineStyle,N=P.EnumGenericDirection,R=P.EnumRectExpandDirection,E=V.model.enums.EnumDSSGraphMarkerShape;var H=new V.Rect2D();function D(){var a=[],Z=this.mRect;if(this.mBorderOpenType===N.NONE){a.push(Z.GetTopLeft());a.push(Z.GetTopRight());a.push(Z.GetBottomRight());a.push(Z.GetBottomLeft());a.push(Z.GetTopLeft());}else{a.push(Z.GetBottomLeft());a.push(Z.GetTopLeft());a.push(Z.GetTopRight());a.push(Z.GetBottomRight());var Y=0;switch(this.mBorderOpenType){case N.BOTTOM:break;case N.LEFT:Y=1;break;case N.TOP:Y=2;break;case N.RIGHT:Y=3;break;default:break;}if(Y!==0){a=V.gModuleMain.ShiftPolygonBy(a,Y);}}return a;}function S(a,Z){var Y,b=[];if(this.mChartContextPtr.mImageFormat===103){return b;}if(Z){Y=a.GetBottomLeft();if(Y.x>1){Y.x--;}b.push(Y);Y=a.GetTopLeft();if(Y.x>1){Y.x--;}if(Y.y>1){Y.y--;}b.push(Y);Y=a.GetTopRight();if(Y.y>1){Y.y--;}b.push(Y);b.push(a.GetBottomRight());}else{Y=a.GetTopLeft();if(Y.x>0){Y.x--;}if(Y.y>0){Y.y--;}b.push(Y);Y=a.GetTopRight();if(Y.y>0){Y.y--;}b.push(Y);b.push(a.GetBottomRight());Y=a.GetBottomLeft();if(Y.x>0){Y.x--;}b.push(Y);}return b;}function U(Z){var d=this.mChartContextPtr,Y=this.mFormatLinePtr.mLineStyle,c,b,a;if(Y!==A.LS_SOLID){d.NewPath();c=M.getLinePattern(Y);b=new V.Point2D({x:Z.x+0.5,y:Z.y+0.5});a=new V.Point2D({x:Z.x+0.5+Z.width,y:Z.y+0.5});d.DrawDashedLine(b,a,c);b.ResetPoint(a);a.x=Z.x+0.5+Z.width;a.y=Z.y+0.5+Z.height;d.DrawDashedLine(b,a,c);b.ResetPoint(a);a.x=Z.x+0.5;a.y=Z.y+0.5+Z.height;d.DrawDashedLine(b,a,c);b.ResetPoint(a);a.x=Z.x+0.5;a.y=Z.y+0.5;d.DrawDashedLine(b,a,c);}}function K(Z,Y){if(Y){if(Z.x>1){--Z.x;++Z.width;}if(Z.y>1){--Z.y;++Z.height;}}else{if(Z.x>0){--Z.x;++Z.width;}if(Z.y>0){--Z.y;++Z.height;}}}function B(a){var Z=this.mFormatLinePtr,Y=Z.mLineThickness,b=true;if(Y>=1){var c=Y/2;if(this.mShapeType===C._BAR){switch(this.mBorderOpenType){case N.BOTTOM:if((a.width>Y)&&(a.height>c)){a.Expand(-c,R.REC_EXP_HORIZONTAL);a.y+=c;}else{b=false;}break;case N.LEFT:if((a.height>Y)&&(a.width>c)){a.Expand(-c,R.REC_EXP_VERTICAL);a.wdith-=c;}else{b=false;}break;case N.TOP:if((a.width>Y)&&(a.height>c)){a.Expand(-c,R.REC_EXP_HORIZONTAL);a.y-=c;}else{b=false;}break;case N.RIGHT:if((a.height>Y)&&(a.width>c)){a.Expand(-c,R.REC_EXP_VERTICAL);a.wdith+=c;}else{b=false;}break;default:if(a.height>Y&&a.width>Y){a.Expand(-c,R.REC_EXP_BOTH);}else{b=false;}break;}}else{if(a.height>Y&&a.width>Y){a.Expand(-c,R.REC_EXP_BOTH);}else{b=false;}}}return b;}function F(){var a=this.mChartContextPtr,g=this.mFormatLinePtr,b=a.mIsGraphMatrix,e=a.GetGraphMatrixContext(),d=(this.mShapeType===C._TICKER)||(e.mMarkerShape===E.DssGraphMarkerShapeGMTick);if(this.mTripleId.mObjectId===G.DssGraphRiser&&a.mPartialRendering){if(this.fallOut(true)){return ;}}var c=B.call(this,this.mRect);a.DrawRectangle(this.mRect,false);this.ApplyFillFormat();H.ResetRect(this.mRect);var Y=g.mLineThickness;this.SetLineWidth();if(b){if(d===false){var f=this.mTripleId.mObjectId;if(f===G.DssGraphRiser){if(a.IsBarChart()){c=true;this.SetOutlineWidthEx(Y);var j=a.IsVertical(),Z=S.call(this,H,j);if((Z.length===4)&&((j&&this.mBorderOpenType!==N.BOTTOM)||(!j&&this.mBorderOpenType!==N.LEFT))){Z[0].swapPoints(Z[1]);Z[2].swapPoints(Z[3]);a.DrawPolyLine(Z,true);}}else{if(a.IsGridChart()||a.IsLineChart()||a.IsBubbleChart()||a.IsScatterChart()){c=true;a.DrawRectangle(H,true);}}}}}else{if(a.NeedAdjustedLinePath()&&!b){if(this.mBorderOpenType!==N.NONE){var h;h=D.call(this);a.DrawPolyLine(h,true);}else{a.DrawRectangle(H,true);}}else{a.DrawRectangle(this.mRect,true);}}if(c){if(!b){U.call(this,this.mRect);}this.ApplyLineFormat();}else{this.hSetLineWidth(0);}a.FinishDrawRect(H,this.mTripleId);}mstrmojo.chart.RectangleObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.RectangleObject",mRect:null,mBorderOpenType:0,init:function Q(Y){if(Y.hasFill===undefined){Y.hasFill=true;}if(Y.hasLine===undefined){Y.hasLine=true;}this.mpParentObject=Y.GraphCollectionObject||null;this.mTripleId=Y.TripleId;this.mpManager=Y.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(Y.Shape){this.mShapeType=Y.Shape;}if(Y.hasLine&&this.mTripleId.mObjectId!==-3){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,0,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;if(Y.hasFill&&this.mTripleId.mObjectId!==G.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,0):this.mpParentObject.GetFormatFill();}if(Y&&Y.Area){this.mRect=new V.Rect2D({Rect2D:Y.Area});}this.mIsVirtual=Y.IsVirtualMarker||false;},Draw:function O(){var Y=this.mChartContextPtr;if(this.mIsVirtual){return ;}if(this.mIsAnimationEnabled){Y.BeginFirstFrame();this.SetProgress(0);F.call(this);Y.EndFrame();Y.BeginLastFrame();}F.call(this);if(this.mIsAnimationEnabled){Y.EndFrame();}},GetClockwisePolygon:function W(){var Y=this.mRect;return[Y.GetTopLeft(),Y.GetTopRight(),Y.GetBottomRight(),Y.GetBottomLeft()];},GetBoundingRect:function I(Y){Y=Y||false;if(Y){return this.mRect;}return new V.Rect2D({Rect2D:this.mRect});},getShapeSize:function J(){return Math.round(Math.max(0.5*this.mRect.width,0.5*this.mRect.height)+0.5);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Angle","Rect2D","ChartContext","ShapeObject","ImageMap","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumObjectShape","EnumBoundingRectType","EnumRadientGradientUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphFillBevelEffect");var g=mstrmojo.chart,O=g.enums,AN=O.EnumLineJoinType,D=O.EnumBoundingRectType,p=O.EnumRadientGradientUsage,o=g.gModuleMain,Z=g.model,R=Z.enums,k=R.EnumDSSGraphFillBevelEffect,AJ=0,x=0,h=1,I=8;function a(){var AQ=this.mFormatFillPtr;AQ.MakeDarker(0.75);this.ApplyFillFormat(true);AQ.RestoreColor();}function A(){if(this.mIsOutline){this.ApplyOutlineFormat();}else{var AQ=this.mBoundingRectType;if((AQ===D.BRT_TOP)||(AQ===D.BRT_BOTTOM)){this.ApplyFillFormat();}else{a.call(this);}this.ApplyLineFormat();}}function Y(){var AR=o.mGlowWidth,AS=this.mChartContextPtr,AQ=this.mSliceInfo;AS.DrawRingSector(AQ.mCenter,AQ.mRadius+AR,AQ.mRadius,o.DegreeToRadian(AQ.mStartAngle),o.DegreeToRadian(AQ.mEndAngle));AS.saveState();AS.Clip();AS.RestoreState();}function L(){var AT=this.mChartContextPtr,AS=this.mSliceInfo,AR=new g.Point2D({x:AS.mCenter.x,y:AS.mCenter.y-AS.mDepth}),AQ=AS.mRadius*(AS.mRingPieFactor*0.01);if(this.mIsOutline){AT.drawArc(AR,AS.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AT.drawArc(AR,AQ,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AT.DrawRingSector(AR,AS.mRadius,AQ,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);this.ApplyFillFormat();AT.drawArc(AR,AS.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AT.drawArc(AR,AQ,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function AB(){var AS=this.mChartContextPtr,AR=this.mSliceInfo,AQ=AR.mRadius*(AR.mRingPieFactor*0.01);if(this.mIsOutline){AS.drawArc(AR.mCenter,AR.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AS.drawArc(AR.mCenter,AQ,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AS.DrawRingSector(AR.mCenter,AR.mRadius,AQ,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);this.ApplyFillFormat();AS.drawArc(AR.mCenter,AR.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AS.drawArc(AR.mCenter,AQ,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function AE(){var AS=this.mSliceInfo,AR=new g.Point2D({x:AS.mCenter.x,y:AS.mCenter.y-AS.mDepth});var AQ=AS.mRadius*(AS.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AR,AS.mRadius,AQ,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function S(){var AR=this.mSliceInfo,AQ=AR.mRadius*(AR.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AR.mCenter,AR.mRadius,AQ,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function n(AS){var AU=this.mSliceInfo,AT,AY=0;if(AS===x){AT=AU.mStartAngle%360;if((AT<=90)||(AT>=270)){return ;}AY=this.mStartAngleRadian;}else{AT=AU.mEndAngle%360;if((AT>=90)&&(AT<=270)){return ;}AY=this.mEndAngleRadian;}var AW=AU.mRadius;var AV=AU.mRadius;AW*=Math.cos(AY);AV*=Math.sin(AY);var Aa=new g.Point2D({x:AU.mCenter.x,y:AU.mCenter.y});Aa.x+=AW;Aa.y+=AV;var AX=new g.Point2D({x:AU.mCenter.x,y:AU.mCenter.y});AX.x+=AW*(AU.mRingPieFactor*0.01);AX.x+=AV*(AU.mRingPieFactor*0.01);var AR=[];AR.push(AX);AR.push(Aa);var AQ=new g.Point2D({x:Aa.x,y:Aa.y-AU.mDepth});AR.push(AQ);var AZ=new g.Point2D({x:AX.x,y:AX.y-AU.mDepth});AR.push(AZ);this.mChartContextPtr.DrawPolygon(AR);if(AS===x){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function F(AQ,AU,AW){var AV=this.mSliceInfo;if(this.mIsOutline&&AQ){return ;}var AT=o.DegreeToRadian(AU);var AS=o.DegreeToRadian(AW);var AR=AV.mRadius;if(AQ){AR*=(AV.mRingPieFactor*0.01);}this.mChartContextPtr.DrawCylinder(AV.mCenter,AR,AT,AS,AV.mDepth);if(AQ){this.SetBoundingRectType(D.BRT_RING_CYLINDER);}else{this.SetBoundingRectType(D.BRT_CYLINDER);}this.SetCylinderStart(AU);this.SetCylinderEnd(AW);A.call(this);}function N(){var AS=this.mSliceInfo,AR=AS.mStartAngle,AQ=AS.mEndAngle;if(AR<180){if(AQ<180){F.call(this,false,AR,AQ);}else{if(AQ<=360){F.call(this,true,180,AQ);F.call(this,false,AR,180);}else{F.call(this,true,180,360);F.call(this,false,AR,180);F.call(this,false,360,AQ);}}}else{if(AR<360){if(AQ<=360){F.call(this,true,AR,AQ);}else{if(AQ<540){F.call(this,true,AR,360);F.call(this,false,360,AQ);}else{F.call(this,true,AR,360);F.call(this,true,540,AQ);F.call(this,false,360,540);}}}else{if(AR<540){if(AQ<540){F.call(this,false,AR,AQ);}else{F.call(this,true,540,AQ);F.call(this,false,AR,540);}}else{F.call(this,true,AR,AQ);}}}}function B(){N.call(this);n.call(this,x);n.call(this,h);}function z(){var AQ=this.mSliceInfo;if(this.mOneSeries){if(AQ.mIs2DCircular){AB.call(this);}else{N.call(this);L.call(this);}this.mChartContextPtr.FinishDrawRing(AQ.mCenter,AQ.mRadius,AQ.mRadius*AQ.mRingPieFactor/100,this.mTripleId,true);}else{if(AQ.mIs2DCircular){S.call(this);}else{B.call(this);AE.call(this);}this.mChartContextPtr.FinishDrawRingPieSlice(AQ.mCenter,AQ.mRadius,AQ.mRadius*AQ.mRingPieFactor/100,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId);}}function G(){var AR=this.mSliceInfo,AQ=new g.Point2D({x:AR.mCenter.x,y:AR.mCenter.y-AR.mDepth});this.mChartContextPtr.drawArc(AQ,AR.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function H(){var AQ=this.mSliceInfo;this.mChartContextPtr.drawArc(AQ.mCenter,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function l(){var AR=this.mSliceInfo,AQ=new g.Point2D({x:AR.mCenter.x,y:AR.mCenter.y-AR.mDepth});this.mChartContextPtr.DrawSector(AQ,AR.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function j(){var AQ=this.mSliceInfo;this.mChartContextPtr.DrawSector(AQ.mCenter,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function AP(AR){var AW=this.mSliceInfo,AV,AU=0;if(AR===x){AV=AW.mStartAngle%360;if((AV<=90)||(AV>=270)){return ;}AU=this.mStartAngleRadian;}else{AV=AW.mEndAngle%360;if((AV>=90)&&(AV<=270)){return ;}AU=this.mEndAngleRadian;}var AT=new g.Point2D({x:AW.mCenter.x,y:AW.mCenter.y});AT.x+=AW.mRadius*Math.cos(AU);AT.y+=AW.mRadius*Math.sin(AU);var AS=[];AS.push(AW.mCenter);AS.push(AT);var AQ=new g.Point2D({x:AT.x,y:AT.y-AW.mDepth});AS.push(AQ);var AX=new g.Point2D({x:AW.mCenter.x,y:AW.mCenter.y-AW.mDepth});AS.push(AX);this.mChartContextPtr.DrawPolygon(AS);if(AR===x){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function AF(){var AS=this.mSliceInfo,AR=AS.mStartAngle,AQ=AS.mEndAngle;if(AR<180){if(AQ<180){F.call(this,false,AR,AQ);}else{if(AQ<=360){F.call(this,false,AR,180);}else{F.call(this,false,AR,180);F.call(this,false,360,AQ);}}}else{if(AR<360){if(AQ<=360){AJ++;}else{if(AQ<540){F.call(this,false,360,AQ);}else{F.call(this,false,360,540);}}}else{if(AR<540){if(AQ<540){F.call(this,false,AR,AQ);}else{F.call(this,false,AR,540);}}else{AJ++;}}}}function M(){AF.call(this);AP.call(this,x);AP.call(this,h);}function P(){var AQ=this.mSliceInfo;if(this.mOneSeries){if(AQ.mIs2DCircular){H.call(this);}else{AF.call(this);G.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AQ.mCenter,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,true,this.mIsWhitenOuterBorder);}else{if(AQ.mIs2DCircular){j.call(this);}else{M.call(this);l.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AQ.mCenter,AQ.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,false,this.mIsWhitenOuterBorder);}}function AM(AR){var AU=this.mSliceInfo,AQ={mStartAngle:AU.mStartAngle,mEndAngle:AU.mEndAngle};this.ConvertAngle(AQ);if(AQ.mStartAngle>AQ.mEndAngle){var AS=[{mStartAngle:0,mEndAngle:AQ.mEndAngle},{mStartAngle:AQ.mStartAngle,mEndAngle:360}];if(AR.mStartAngle>AR.mEndAngle){return true;}return this.GetIntersectionAngle(AR,AS[0])||this.GetIntersectionAngle(AR,AS[1]);}if(AR.mStartAngle>AR.mEndAngle){var AT=[{mStartAngle:0,mEndAngle:AR.mEndAngle},{mStartAngle:AR.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AQ,AT[0])||this.GetIntersectionAngle(AQ,AT[1]);}return this.GetIntersectionAngle(AQ,AR);}function d(Ad){var Af,AW,AX=this.mSliceInfo,AY=AX.mCenter,Ae=AX.mRadius;if(AX.mIs2DCircular){Af=(Ad.x-AY.x);AW=(Ad.y-AY.y);var AU=Math.sqrt(Af*Af+AW*AW);if(((Ae-AU)>-o.mTolerance)&&((AU-(Ae*AX.mRingPieFactor/100))>-o.mTolerance)){var Ag=o.RadianToDegree(Math.acos(Af/AU));if(AW<-o.mTolerance){Ag=360-Ag;}if((Ag>=AX.mStartAngle)&&(Ag<=AX.mEndAngle)){return true;}Ag+=360;if((Ag>=AX.mStartAngle)&&(Ag<=AX.mEndAngle)){return true;}return false;}return false;}Af=(Ad.x-AY.x);var AT,AQ,Ac,AS,AZ,Ah=(Ae*Ae-Af*Af),AV=Ae*Ae*(AX.mRingPieFactor*AX.mRingPieFactor/10000)-Af*Af;if(Ah<-o.mTolerance){return false;}if(AV<-o.mTolerance){AT=o.RadianToDegree(Math.asin(Math.sqrt(Ah)/Ae));AW=(Ad.y-(AY.y-AX.mDepth));AS=new g.Angle();AZ=new g.Angle();if(Af>o.mTolerance){AS.mEndAngle=AT;AS.mStartAngle=360-AT;AQ=Math.sqrt(Af*Af+AW*AW);if(AW>o.mTolerance){AZ.mEndAngle=o.RadianToDegree(Math.asin(AW/AQ));}else{AZ.mEndAngle=360+o.RadianToDegree(Math.asin(AW/AQ));}AW-=AX.mDepth;AQ=Math.sqrt(Af*Af+AW*AW);if(AW>o.mTolerance){AZ.mStartAngle=o.RadianToDegree(Math.asin(AW/AQ));}else{AZ.mStartAngle=360+o.RadianToDegree(Math.asin(AW/AQ));}}else{AS.mStartAngle=180-AT;AS.mEndAngle=180+AT;AQ=Math.sqrt(Af*Af+AW*AW);AZ.mStartAngle=180-o.RadianToDegree(Math.asin(AW/AQ));AW-=AX.mDepth;AQ=Math.sqrt(Af*Af+AW*AW);AZ.mEndAngle=180-o.RadianToDegree(Math.asin(AW/AQ));}Ac=new g.Angle();if(!this.GetIntersectionConvertedAngles(AS,AZ,Ac)){return false;}return AM.call(this,Ac);}AT=o.RadianToDegree(Math.asin(Math.sqrt(Ah)/Ae));var AR=o.RadianToDegree(Math.asin(Math.sqrt(AV)/(Ae*AX.mRingPieFactor)));AW=(Ad.y-(AY.y-AX.mDepth));var Ab=new g.Angle();var Aa=new g.Angle();AZ={};if(Af>o.mTolerance){Ab.mStartAngle=360-AT;Ab.mEndAngle=360-AR;Aa.mStartAngle=AR;Aa.mEndAngle=AT;AQ=Math.sqrt(Af*Af+AW*AW);if(AW>o.mTolerance){AZ.mEndAngle=o.RadianToDegree(Math.asin(AW/AQ));}else{AZ.mEndAngle=360+o.RadianToDegree(Math.asin(AW/AQ));}AW-=AX.mDepth;AQ=Math.sqrt(Af*Af+AW*AW);if(AW>o.mTolerance){AZ.mStartAngle=o.RadianToDegree(Math.asin(AW/AQ));}else{AZ.mStartAngle=360+o.RadianToDegree(Math.asin(AW/AQ));}}else{Ab.mStartAngle=180-AT;Ab.mEndAngle=180-AR;Aa.mStartAngle=180+AR;Aa.mEndAngle=180+AT;AQ=Math.sqrt(Af*Af+AW*AW);AZ.mStartAngle=180-o.RadianToDegree(Math.asin(AW/AQ));AW-=AX.mDepth;AQ=Math.sqrt(Af*Af+AW*AW);AZ.mEndAngle=180-o.RadianToDegree(Math.asin(AW/AQ));}Ac=[new g.Angle(),new g.Angle()];if(!this.GetIntersectionConvertedAngles(Ab,AZ,Ac[0])){if(!this.GetIntersectionConvertedAngles(Aa,AZ,Ac[1])){return false;}return AM.call(this,Ac[1]);}if(!this.GetIntersectionConvertedAngles(Aa,AZ,Ac[1])){return AM.call(this,Ac[0]);}return(AM.call(this,Ac[0])||AM.call(this,Ac[1]));}function u(AV){var AY,AX,AQ,AU=this.mSliceInfo,Ab=AU.mCenter,AT=AU.mRadius;if(AU.mIs2DCircular){AY=(AV.x-Ab.x);AX=(AV.y-Ab.y);AQ=Math.sqrt(AY*AY+AX*AX);if((AT-AQ)>-o.mTolerance){if(AQ<o.mTolerance){return false;}var AR=o.RadianToDegree(Math.acos(AY/AQ));if(AX<-o.mTolerance){AR=360-AR;}if((AR>=AU.mStartAngle)&&(AR<=AU.mEndAngle)){return true;}AR+=360;if((AR>=AU.mStartAngle)&&(AR<=AU.mEndAngle)){return true;}return false;}return false;}AY=(AV.x-Ab.x);var Ad,AZ,Aa,Ac=AT*AT-AY*AY;if(Ac<-o.mTolerance){return false;}var AS=o.RadianToDegree(Math.asin(Math.sqrt(Ac)/AT));AX=(AV.y-(Ab.y-AU.mDepth));Ad={mStartAngle:0,mEndAngle:0};AZ={mStartAngle:0,mEndAngle:0};if(AY>o.mTolerance){Ad.mEndAngle=AS;Ad.mStartAngle=360-AS;Aa=Math.sqrt(AY*AY+AX*AX);if(AX>o.mTolerance){AZ.mEndAngle=o.RadianToDegree(Math.asin(AX/Aa));}else{AZ.mEndAngle=360+o.RadianToDegree(Math.asin(AX/Aa));}AX-=AU.mDepth;Aa=Math.sqrt(AY*AY+AX*AX);if(AX>o.mTolerance){AZ.mStartAngle=o.RadianToDegree(Math.asin(AX/Aa));}else{AZ.mStartAngle=360+o.RadianToDegree(Math.asin(AX/Aa));}}else{Ad.mStartAngle=180-AS;Ad.mEndAngle=180+AS;Aa=Math.sqrt(AY*AY+AX*AX);AZ.mStartAngle=180-o.RadianToDegree(Math.asin(AX/Aa));AX-=AU.mDepth;Aa=Math.sqrt(AY*AY+AX*AX);AZ.mEndAngle=180-o.RadianToDegree(Math.asin(AX/Aa));}var AW={mStartAngle:0,mEndAngle:0};if(!this.GetIntersectionConvertedAngles(Ad,AZ,AW)){return false;}return AM.call(this,AW);}function AC(AW){var Ag,AT=this.mSliceInfo,Aa=AT.mDepth,AU=AT.mCenter,Ae=AT.mRadius,AS=o.DegreeToRadian(AT.mStartAngle),AX=o.DegreeToRadian(AT.mEndAngle);var Ad=new g.Point2D({x:AU.x+Ae*Math.cos(AS),y:AU.y+Ae*Math.sin(AS)});var AY=new g.Point2D({x:AU.x+Ae*Math.cos(AX),y:AU.y+Ae*Math.sin(AX)});if(this.mBoundingRectType===D.BRT_TOP){Ad.y-=Aa;AY.y-=Aa;}var Ai=new g.Point2D({x:Math.min(Ad.x,AY.x),y:Math.min(Ad.y,AY.y)});var AZ=new g.Point2D({x:Math.max(Ad.x,AY.x),y:Math.max(Ad.y,AY.y)});if(AT.mIsRingPie){Ag=Ae*(AT.mRingPieFactor/100);var AR=new g.Point2D({x:AU.x+Ag*Math.cos(AS),y:AU.y+Ag*Math.sin(AS)});var Ac=new g.Point2D({x:AU.x+Ag*Math.cos(AX),y:AU.y+Ag*Math.sin(AX)});if(this.mBoundingRectType===D.BRT_TOP){AR.y-=Aa;Ac.y-=Aa;}Ai.x=Math.min(Ai.x,AR.x);Ai.y=Math.min(Ai.y,AR.y);AZ.x=Math.max(AZ.x,AR.x);AZ.y=Math.max(AZ.y,AR.y);Ai.x=Math.min(Ai.x,Ac.x);Ai.y=Math.min(Ai.y,Ac.y);AZ.x=Math.max(AZ.x,Ac.x);AZ.y=Math.max(AZ.y,Ac.y);}else{Ai.x=Math.min(Ai.x,AU.x);AZ.x=Math.max(AZ.x,AU.x);var Ab=AU.y;if(this.mBoundingRectType===D.BRT_TOP){Ab-=Aa;}Ai.y=Math.min(Ai.y,Ab);AZ.y=Math.max(AZ.y,Ab);}var AQ;for(AQ=(AT.mStartAngle/90+1)*90;AQ<AT.mEndAngle;(AQ+=90)){var Af=o.DegreeToRadian(AQ);var Ah=new g.Point2D({x:AU.x+Ae*Math.cos(Af),y:AU.y+Ae*Math.sin(Af)});if(this.mBoundingRectType===D.BRT_TOP){Ah.y-=Aa;}Ai.x=Math.min(Ai.x,Ah.x);Ai.y=Math.min(Ai.y,Ah.y);AZ.x=Math.max(AZ.x,Ah.x);AZ.y=Math.max(AZ.y,Ah.y);if(AT.mIsRingPie){Ag=Ae*(AT.mRingPieFactor/100);var AV=new g.Point2D({x:AU.x+Ag*Math.cos(Af),y:AU.y+Ag*Math.sin(Af)});if(this.mBoundingRectType===D.BRT_TOP){AV.y-=Aa;}Ai.x=Math.min(Ai.x,AV.x);Ai.y=Math.min(Ai.y,AV.y);AZ.x=Math.max(AZ.x,AV.x);AZ.y=Math.max(AZ.y,AV.y);}}AW.x=Ai.x;AW.y=Ai.y;AW.width=AZ.x-Ai.x;AW.height=AZ.y-Ai.y;}function K(AZ){var AX=this.mSliceInfo,AS=AX.mDepth,Ad=AX.mCenter,Ac=AX.mRadius;if(this.mBoundingRectType===D.BRT_RING_CYLINDER){Ac*=(AX.mRingPieFactor/100);}var AW=o.DegreeToRadian(this.mCylinderStart);var AR=o.DegreeToRadian(this.mCylinderEnd);var AQ=new g.Point2D({x:Ad.x+Ac*Math.cos(AW),y:Ad.y+Ac*Math.sin(AW)});var AV=new g.Point2D({x:Ad.x+Ac*Math.cos(AR),y:Ad.y+Ac*Math.sin(AR)});var AY=new g.Point2D({x:Math.min(AQ.x,AV.x),y:Math.min(AQ.y-AS,AV.y-AS)});var AT=new g.Point2D({x:Math.max(AQ.x,AV.x),y:Math.max(AQ.y,AV.y)});var AU;for(AU=(this.mCylinderStart/90+1)*90;AU<this.mCylinderEnd;(AU+=90)){var Ab=o.DegreeToRadian(AU);var Aa=new g.Point2D({x:Ad.x+Ac*Math.cos(Ab),y:Ad.y+Ac*Math.sin(Ab)});AY.x=Math.min(AY.x,Aa.x);AY.y=Math.min(AY.y,(Aa.y-AS));AT.x=Math.max(AT.x,Aa.x);AT.y=Math.max(AT.y,Aa.y);}AZ.x=AY.x;AZ.y=AY.y;AZ.width=AT.x-AY.x;AZ.height=AT.y-AY.y;}function s(AS){var AX=this.mSliceInfo,AV=AX.mRadius,AQ=AX.mDepth,AU=AX.mCenter,AT=AX.mRingPieFactor,AW=(this.mBoundingRectType===D.BRT_START_RECT)?AX.mStartAngle:AX.mEndAngle;if(AW>=360){AW-=360;}var AR=o.DegreeToRadian(AW);if(AX.mIsRingPie){AS.width=(AV*(1-AT/100)*Math.abs(Math.cos(AR)));AS.height=(AQ+AV*(1-AT/100)*Math.abs(Math.sin(AR)));}else{AS.width=(AV*Math.abs(Math.cos(AR)));AS.height=(AQ+Math.abs(AV*Math.sin(AR)));}if(AW<90){if(AX.mIsRingPie){AS.x=(AU.x+AV*(AT/100)*Math.cos(AR));AS.y=(AU.y-AQ+AV*(AT/100)*Math.sin(AR));}else{AS.x=AU.x;AS.y=AU.y-AQ;}}else{if(AW<180){AS.x=(AU.x+AV*Math.cos(AR));if(AX.mIsRingPie){AS.y=(AU.y-AQ+AV*(AT/100)*Math.sin(AR));}else{AS.y=AU.y-AQ;}}else{if(AW<270){AS.x=(AU.x+AV*Math.cos(AR));AS.y=(AU.y-AQ+AV*Math.sin(AR));}else{AS.y=(AU.y-AQ+AV*Math.sin(AR));if(AX.mIsRingPie){AS.x=(AU.x+AV*(AT/100)*Math.cos(AR));}else{AS.x=AU.x;}}}}}mstrmojo.chart.PieSliceObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PieSliceObject",mSliceInfo:null,mBoundingRectType:D.BRT_TOP,mCylinderStart:0,mCylinderEnd:0,mOneSeries:false,mIsOutline:false,mStartAngleRadian:0,mEndAngleRadian:0,mMiddleAngleRadian:0,mMiddleAngle:0,mIsShown:false,mIsWhitenOuterBorder:false,init:function AH(AS){if(AS.TripleId){AS.TripleId.angleByIndex=AS.AngleIndex||0;AS.TripleId.sliceById=AS.SliceId||0;}this._super(AS);this.mSliceInfo={};var AR=this.mSliceInfo;AR.mStartAngle=AS.StartAngle;AR.mEndAngle=AS.EndAngle;AR.mRingPieFactor=AS.RingPieFactor;AR.mIsRingPie=AS.IsRing;AR.mIs2DCircular=AS.Is2DCircular;AR.mScale=AS.Scale;AR.mCenter=AS.Center;AR.mRadius=AS.Radius;AR.mDepth=AS.Depth;this.mOneSeries=AS.OneSeries;this.mIsShown=AS.IsShown;this.mStartAngleRadian=o.DegreeToRadian(AR.mStartAngle);this.mEndAngleRadian=o.DegreeToRadian(AR.mEndAngle);this.mMiddleAngleRadian=0.5*(this.mStartAngleRadian+this.mEndAngleRadian);this.mMiddleAngle=(0.5*(AR.mStartAngle+AR.mEndAngle));var AQ=this.mMiddleAngle;if(AQ>=360){AQ%=360;}this.mMiddleAngleQuadrant=Math.floor(AQ/90+1);if(!this.mOneSeries){AR.mCenter.x+=(AS.Explode*Math.cos(this.mMiddleAngleRadian));AR.mCenter.y+=(AS.Explode*Math.sin(this.mMiddleAngleRadian));}this.mIsWhitenOuterBorder=AS.IsWhitenOuterBorder||false;},SetCylinderStart:function Q(AQ){this.mCylinderStart=AQ;},SetCylinderEnd:function f(AQ){this.mCylinderEnd=AQ;},SetBoundingRectType:function t(AQ){this.mBoundingRectType=AQ;},SetDrawOutline:function AI(AQ){this.mIsOutline=AQ;},GetSliceInfo:function AA(){return this.mSliceInfo;},GetMiddleAngleQuadrant:function U(){return this.mMiddleAngleQuadrant;},GetMiddleAngle:function b(){return this.mMiddleAngle;},GetMiddleAngleRadian:function r(){return this.mMiddleAngleRadian;},Draw:function AD(){if(this.mIsShown){this.SetLineWidth();this.mIsOutline=false;if(this.mSliceInfo.mIsRingPie){z.call(this);}else{P.call(this);}}},DrawOutLine:function AL(){if(this.mIsShown){var AS=this.mChartContextPtr,AR=this.mSliceInfo;if(!(AR.mIsRingPie)&&AR.mIs2DCircular){Y.call(this);}var AQ=this.mChartContextPtr.GetLineJoin();AS.SetLineJoin(AN.LJT_BEVEL);this.SetOutlineWidth();if(!AR.mIs2DCircular){AS.Scale(1,AR.mScale);}this.mIsOutline=true;if(AR.mIsRingPie){z.call(this);}else{P.call(this);}if(!AR.mIs2DCircular){AS.Scale(1,1/AR.mScale);}AS.SetLineJoin(AQ);}},PointInObject:function J(AR){if(this.mIsShown&&this.mFormatLinePtr){var AQ=false;if(this.mSliceInfo.mIsRingPie){AQ=d.call(this,AR);}else{AQ=u.call(this,AR);}return AQ;}return false;},GetBoundingRect:function y(AQ){if(AQ===undefined){AQ=new g.Rect2D();}var AU=this.mFormatFillPtr,AT=this.mSliceInfo,AS=AT.mCenter,AR=AT.mRadius;switch(this.mBoundingRectType){case D.BRT_TOP:case D.BRT_BOTTOM:if(AU.supportAdvancedFill(0)&&AU.mFillBevel.type===k.DssGraphFillBevelSphere){AQ.x=AS.x-AR;AQ.y=AS.y-AT.mDepth-AR;AQ.width=2*AR;AQ.height=2*AR;}else{AC.call(this,AQ);}break;case D.BRT_CYLINDER:case D.BRT_RING_CYLINDER:K.call(this,AQ);break;case D.BRT_START_RECT:case D.BRT_END_RECT:s.call(this,AQ);break;}return AQ;},FillBevel:function w(){var AW=this.mFormatFillPtr,AU=this.mSliceInfo,AV=this.mChartContextPtr;if(AW.supportAdvancedFill(0)===false){return ;}if(AW.mFillBevel.type===k.DssGraphFillBevelDonut){var AQ=0;if(AU.mIsRingPie){AQ=AU.mRadius*AU.mRingPieFactor/100;}var AT=AU.mCenter.x;var AS=AU.mCenter.y;if(!(AU.mIs2DCircular)){AS-=AU.mDepth;}AV.saveState();AV.Clip();AV.FillRadientGradient(AW,p.RG_PIESLICE,AT,AS,AQ,AU.mRadius);AV.RestoreState();}else{if(AW.mFillBevel.type===k.DssGraphFillBevelSphere){var AR=AW.mFillBevel.lightAngle;AW.mFillBevel.lightAngle=270;g.ShapeObject.prototype.FillBevel.apply(this,[]);AW.mFillBevel.lightAngle=AR;}}},ConvertAngle:function AG(AQ){while(AQ.mStartAngle<0){AQ.mStartAngle+=360;}while(AQ.mStartAngle>360){AQ.mStartAngle-=360;}while(AQ.mEndAngle<0){AQ.mEndAngle+=360;}while(AQ.mEndAngle>360){AQ.mEndAngle-=360;}},GetIntersectionConvertedAngles:function V(AR,AQ,AT){var AU,AS;if(AR.mStartAngle>AR.mEndAngle){AU=[{mStartAngle:0,mEndAngle:AR.mEndAngle},{mStartAngle:AR.mStartAngle,mEndAngle:360}];if(AQ.mStartAngle>AQ.mEndAngle){AS=[{mStartAngle:0,mEndAngle:AQ.mEndAngle},{mStartAngle:AQ.mStartAngle,mEndAngle:360}];var AV={mStartAngle:0,mEndAngle:0};this.GetIntersectionAngle(AU[0],AS[0],AV);AT.mEndAngle=AV.mEndAngle;this.GetIntersectionAngle(AU[1],AS[1],AV);AT.mStartAngle=AV.mStartAngle;return true;}return this.GetIntersectionAngle(AQ,AU[0],AT)||this.GetIntersectionAngle(AQ,AU[1],AT);}if(AQ.mStartAngle>AQ.mEndAngle){AS=[{mStartAngle:0,mEndAngle:AQ.mEndAngle},{mStartAngle:AQ.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AR,AS[0],AT)||this.GetIntersectionAngle(AR,AS[1],AT);}return this.GetIntersectionAngle(AR,AQ,AT);},GetIntersectionAngle:function X(AT,AS,AU){var AQ=(AT.mStartAngle>AS.mStartAngle)?AT.mStartAngle:AS.mStartAngle;var AR=(AT.mEndAngle>AS.mEndAngle)?AS.mEndAngle:AT.mEndAngle;if(AQ>AR){return false;}if(AU){AU.mStartAngle=AQ;AU.mEndAngle=AR;}return true;},ElementDrawRingPieTop:function e(){AE.call(this);},ElementDrawNormalPieTop:function c(){l.call(this);},ElementFillSide:function C(){a.call(this);},GetClockwisePolygon:function E(){var AQ=[],AV=this.mSliceInfo;var AR=new g.Point2D({x:AV.mCenter.x,y:AV.mCenter.y});if(!(AV.mIs2DCircular)){AR.y-=AV.mDepth;}AQ.push(new g.Point2D({x:AR.x,y:AR.y*AV.mScale}));var AU;for(AU=AV.mStartAngle;AU-AV.mEndAngle<0;AU+=I){var AT=o.DegreeToRadian(AU);AQ.push(new g.Point2D({x:AR.x+AV.mRadius*Math.cos(AT),y:((AR.y+AV.mRadius*Math.sin(AT))*AV.mScale)}));}var AS=o.DegreeToRadian(AV.mEndAngle);AQ.push(new g.Point2D({x:AR.x+AV.mRadius*Math.cos(AS),y:(AR.y+AV.mRadius*Math.sin(AS))*AV.mScale}));return AQ;},IsCircularShape:function AK(){return true;},SetWhitenOuterBorder:function W(AQ){this.mIsWhitenOuterBorder=AQ;},getRadialInfo:function AO(){var AR=this.mSliceInfo,AQ={r:AR.mRadius,cx:AR.mCenter.x,cy:AR.mCenter.y,fx:0,fy:0};AQ.fx=AQ.cx;AQ.fy=AQ.cy;if(AR.mIsRingPie){AQ.startStop=AR.mRingPieFactor/100;}return AQ;},getShapeSize:function q(){if(this.mSliceInfo){return this.mSliceInfo.mRadius||0;}return 0;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","FormatFont","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresCls("mstrmojo.chart.common.Utility","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumAnchorPoint","EnumBoxStyle","EnumFontAlignment","EnumFontRotation","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var u=mstrmojo.chart,Y=u.enums,n=u.model,e=n.enums,K=Y.EnumCollectionType,w=Y.EnumGraphMajorType,s=mstrmojo.VisUtility,AF=Y.EnumAnchorPoint,k=Y.EnumBoxStyle,g=Y.EnumFontAlignment,P=Y.EnumFontRotation,M=Y.EnumRectExpandDirection,AJ=e.EnumDSSGraphObject,W=u.common.Utility;var AO=true;var R=false,d=65280,AB=0.03,V=0,Z=0,U=0.2,F=0.85,f=0,G=0;var AK=new u.Point2D(),r=new u.Point2D(),a=new u.Point2D(),x=new u.Rect2D(),N=new u.Rect2D();function p(AZ){var AY=this.mChartContextPtr,AV=true,AW,AX=AY.IsVertical();if(!AV){return 0;}if(AX){switch(AZ.mObjectId){case AJ.DssGraphY1Label:case AJ.DssGraphY2Label:return(0.5*this.mFontHeight);case AJ.DssGraphX1Label:if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){AW=this.GetTransformedRect(true);return(0.5*AW.height)+1;}return 0;default:return 0;}}if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){switch(AZ.mObjectId){case AJ.DssGraphX1Label:case AJ.DssGraphX2Label:case AJ.DssGraph2DO1Label:AW=this.GetTransformedRect(true);return(0.5*AW.height)+1;default:return 0;}}return 0;}function AD(AX){var AV=true;var AW=this.mChartContextPtr;if(AV){switch(AX.mObjectId){case AJ.DssGraph2DO1Label:case AJ.DssGraph2DO2Label:if(AW.IsGridChart()||AW.IsVertical()){return Math.ceil(0.25*this.mFontHeight);}return 0;case AJ.DssGraphDataText:return Math.ceil(0.2*this.mFontHeight);default:return 0;}}return 0;}function AI(){if(!this.mIsShown||!this.mText.localeCompare("")){return false;}if(!this.mIsOnScreen){return false;}if(this.mChartContextPtr.mImageFormat===103){var AV=this.rect;return(AV.width>0&&AV.height>0);}return true;}function y(Ad,Aa,AW){var AZ=this.mSubTextHolder,Ac=this.mFormatFontPtr,Ab,AX,AV=0,AY=AZ.mVecPartition[Ad];for(AX=0;AX<Aa-AY;AX++){Ab=AW[AX];if(Ab.Truncated){AV+=AZ.GetStringWidth(Ab.Word,Ac);}else{AV+=AZ.GetOneWordWidth(Ab.Index);}if(AW.length>0){AV+=AZ.GetSpaceWidth();}}return AV;}function AU(){var AX=this.mChartContextPtr,AW=this.mpParentObject;this.mFormatFontPtr=(AW===null)?AX.GetFormatFont(this.mTripleId):AW.GetFormatFont();var AV=this.mFormatFontPtr;if(AV.mFontBox!==k.BS_NOFRAME&&AX.mIsGraphMatrix===false){if(AW===null){this.mFormatFillPtr=AX.GetFormatFill(this.mTripleId,K.CT_NO_COLLECTION);if(!R){this.mFormatLinePtr=AX.GetFormatLine(this.mTripleId,K.CT_NO_COLLECTION,-1);}}else{this.mFormatFillPtr=AW.GetFormatFill();if(!R){this.mFormatLinePtr=AW.mFormatLinePtr;}}}}function D(AW){AW=AW||false;var AV=8,AX=this.mFormatFontPtr;if(AX){if(AW){AV=AX.GetStringExtent("H").Height;}else{AV=AX.GetFontExtent();}}AV=Math.floor(AV*F+0.5);return AV;}function J(){var AV=this.mFormatFontPtr,Aa=this.mChartContextPtr,AX,AZ,AW;this.mFontHeight=D.call(this,true);if(Aa.mIsGraphMatrix){var AY=AV.evalMargins();this.mWidthEdgeMargin=AY[0]||0;this.mHeightEdgeMargin=AY[1]||0;this.mTextLineSpace=AY[2]||0;}else{AZ=this.mChartContextPtr.GetGraphMajorType();AW=(AZ===w.GMT_3D_SCATTER||AZ===w.GMT_3D_CATEGORY);AX=AV.mFontBox!==k.BS_NOFRAME;this.mDoubleLineMargin=this.mDoubleLineMargin||0;this.mDoubleLineMargin=Math.floor(AV.mFontSize*U+0.5);if(this.mDoubleLineMargin===0){this.mDoubleLineMargin=1;}this.mWidthEdgeMargin=Math.floor(AV.mFontSize*AB+0.5);if((this.mWidthEdgeMargin===0&&AX)||AW){this.mWidthEdgeMargin=1;}this.mHeightEdgeMargin=Math.floor(AV.mFontSize*V+0.5);if((this.mHeightEdgeMargin===0&&AX)||AW){this.mHeightEdgeMargin=1;}this.mTextLineSpace=Math.floor(AV.mFontSize*Z+0.5);if(this.mTextLineSpace===0){this.mTextLineSpace=1;}switch(AV.mFontBox){case k.BS_NOFRAME:break;case k.BS_SINGLE_LINE_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin;this.mHeightEdgeMargin+=this.mDoubleLineMargin;break;case k.BS_DOUBLE_LINE_FRAME:case k.BS_BEVELED_FRAME:case k.BS_REVERSE_BEVELED_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin*2;this.mHeightEdgeMargin+=this.mDoubleLineMargin*2;break;}}}function AM(){var AV=0;switch(this.mFormatFontPtr.mFontRotation){case P.FR_45:AV=45;break;case P.FR_90:AV=90;break;case P.FR_180:AV=180;break;case P.FR_270:AV=270;break;case P.FR_315:AV=315;break;default:break;}return u.gModuleMain.DegreeToRadian(-AV);}function j(){var AX;var AV=[],AW=this.rect;AK.x=AW.x+AW.width/2;AK.y=AW.y+AW.height/2;AX=AM.call(this);AV.push(new u.Point2D({x:AW.x,y:AW.y}).rotateAndClone(AK,AX));AV.push(new u.Point2D({x:AW.x+AW.width,y:AW.y}).rotateAndClone(AK,AX));AV.push(new u.Point2D({x:AW.x+AW.width,y:AW.y+AW.height}).rotateAndClone(AK,AX));AV.push(new u.Point2D({x:AW.x,y:AW.y+AW.height}).rotateAndClone(AK,AX));return AV;}function AA(Ab,AX,Ad){var AZ,AY,AW,AV,Aa,Ac=Ab.length;for(AZ=1;AZ<=Ac;++AZ){AY=Ab.substring(0,Ac-AZ);AW=AY.concat("...");Aa=this.mFormatFontPtr.GetStringExtent(AW);AV=Aa.Width;if(AV<AX){Ad.Text=AW;Ad.TextWidth=AV;return true;}}return false;}function L(Aa,Aj,AZ,Ab){var Al={},Ad=Aa.length;Ab=Ab||false;if(Ab){var Af=0,Ak=0,Ai=true,Am=this.mSubTextHolder,AV=Am.GetSpaceWidthEx(this.mFormatFontPtr),AW=this.mFormatFontPtr.GetStringExtent("...").Width,AX="",Ae=-1;if(AW>Aj){return false;}var Ah;for(Ah=0;Ah<Ad;Ah++){Ak=Am.GetOneWordWidth(Aa[Ah]);if(Af+(Ah>0?AV:0)>Aj-AW){break;}if(Af+Ak+(Ah>0?AV:0)>Aj-AW){break;}AX=AX.concat(Am.mVecStr[Aa[Ah]]);if(Ah>0){AX=AX.concat(" ");}Af+=Ak+(Ah>0?AV:0);Ae=Ah;}var Ag,Ac=0;for(Ag=0;Ag<=Ae;Ag++){Ac=Aa[Ag];AZ.Texts.push({Truncated:true,Index:Ac,Word:Am.mVecStr[Ac]});}if(Ah>=Ad){s.visPrint("where is the truncated word....");return true;}Aj-=Af;if(Ai===false&&Ae!==-1){Aj-=AV;}Ac=Aa[Ah];var AY="";AY=AY.concat(Am.mVecStr[Ac]);if(AA.call(this,AY,Aj,Al)){AZ.Texts.push({Truncated:true,Highlighted:false,Index:Ac,Word:Al.Text});Af+=Al.TextWidth;}else{s.visPrint("Should have truncated, but...");AZ.Texts.push({Truncated:false,Highlighted:false,Index:Ac,Word:Am.mVecStr[Ac]});Af+=((Ac===0?0:AV)+Am.GetOneWordWidth(Ac));}AZ.TextWidth=Af;AZ.TextXBearing=0;return true;}if(AA.call(this,Aa,Aj,Al)){AZ.TextWidth=Al.TextWidth;AZ.TextXBearing=0;AZ.Texts.push({Truncated:true,Highlighted:false,Index:-1,Word:Al.Text});return true;}return false;}function AS(Ai,Ad){var AV=this.mChartContextPtr,Ac=this.mSubTextHolder,AX={TextWidth:0,TextXBearing:0,Texts:[]},AZ,AW,AY;Ad=Ad||false;AW=Ac.GetOneLineWidth(Ai);AZ=Ac.GetOneLineString(Ai);if(AW<=this.rect.width+(AO?4:0)){AX.TextXBearing=Ac.GetOneLineXBearing(Ai);AX.TextWidth=AW;if(Ad){var Aa,Ah=-1,Ae=Ac.GetOneLineWords(Ai);for(Aa=0;Aa<Ae.length;Aa++){Ah=Ae[Aa];AX.Texts.push({Index:Ah,Word:Ac.mVecStr[Ah],Highlighted:false,Truncated:false});}}else{AX.Texts.push({Index:-1,Word:AZ,Highlighted:false,Truncated:false});}return AX;}var Ab=AV.mIsGraphMatrix,Ag=Ad?Ac.GetOneLineWords(Ai):AZ;if(Ab&&!AV.isUADataAreaOutput()){if(this.mFormatFontPtr.mFontRotation===P.FR_90){var Af=this.GetBoundingRect(true);if(Af.y+AW>AV.mGraphHeight){if(L.call(this,Ag,AV.mGraphHeight,AX,Ad)){this.mIsTruncated=true;return AX;}}}if(this.rect.x<0&&AW>this.rect.width+this.rect.x){if(L.call(this,Ag,this.rect.width+this.rect.x,AX,Ad)){this.mIsTruncated=true;return AX;}}}if(L.call(this,Ag,this.rect.width,AX,Ad)){this.mIsTruncated=true;return AX;}this.mIsTruncated=true;AY=this.mFormatFontPtr.GetStringExtent(AX.Text);AX.TextWidth=AY.Width;AX.TextXBearing=0;AX.Texts.push({Index:-1,Word:Ab?"":"...",Highlighted:false,Truncated:true});return AX;}function O(Ag,Aj,Ae){var AY=this.mChartContextPtr,Ac,Af,AV,Ai,AZ=this.mFormatFontPtr,Ad;Ae=Ae||false;Ac=AS.call(this,Aj,Ae);Af=Ac.Text;AV=Ac.Texts;Ad=Ac.TextWidth;switch(this.mFormatFontPtr.mFontAlignment){case g.FA_LEFT:Ag.x+=this.mWidthEdgeMargin;break;case g.FA_CENTER:Ag.x+=Math.floor((this.rect.width-Ad)/2+0.5);break;case g.FA_RIGHT:Ag.x+=Math.floor(this.rect.width-Ad-this.mWidthEdgeMargin+0.5);break;}if(AY.mIsGraphMatrix&&!AY.isUADataAreaOutput()){if(this.rect.x<0&&this.mIsTruncated){Ag.x=this.rect.width+this.rect.x-Ad+0.5;}if(AZ.mFontRotation===P.FR_90){var AW=this.GetBoundingRect();if(AW.y+AW.height>AY.mGraphHeight&&this.mIsTruncated){var Ak=this.mSubTextHolder.GetOneLineWidth(Aj),Am=Ak-Ad;Ag.x-=Am/2;Ag.x+=Am;}}}if(AV===undefined){return ;}f=AD.call(this,this.mTripleId);G=p.call(this,this.mTripleId);var Al={x:Ag.x,y:Ag.y-f},Ah,AX,Aa;for(Ai=0;Ai<AV.length;Ai++){Af=AV[Ai];Ag.x=Al.x;Ag.y=Al.y;if(Ai>0){Aa=y.call(this,Aj,Af.Index,AV);Ag.x+=Aa;}AX={};if(G!==0){AX={BaselineOffset:G};}Ah=Ag;if(Af.Highlighted){var Ab=AZ.mFontColor;AZ.mFontColor=d;AY.AddFormatedText(AZ,Ah,Af.Word,AX);AZ.mFontColor=Ab;}else{AY.AddFormatedText(AZ,Ah,Af.Word,AX);}}}function X(){var AX,Ab=this.mChartContextPtr,AY=false;if(Ab.mIsGraphMatrix){if(this.showBBox){AX=j.call(this);Ab.DrawPolygon(AX,true);if(this.mTripleId.mObjectId===AJ.DssGraphDataText){AY=true;}this.mChartContextPtr.FinishTextBoundingBox(AX,this.BBoxColor,AY);}else{if(W.isValidNumber(this.BBoxColor)){var Aa=true,AZ=true;if(Aa){var AV=1,AW=new u.FormatFont({Font:this.mFormatFontPtr});AW.mStrokeColor=this.BBoxColor;AW.mStrokeWidth=this.mChartContextPtr.isCombinationChart()?0.01:0.5;if(AZ){AW.mFontStyle=AV;}this.mFormatFontPtr=AW;}}}}else{if(R||this.mFormatFontPtr.mFontBox!==k.BS_NOFRAME){AX=j.call(this);Ab.DrawPolygon(AX,false,null,null,null);this.ApplyFillFormat();}}return this.mFormatFontPtr;}mstrmojo.chart.TextObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.TextObject",clientDrag:false,rect:null,mFormatFontPtr:null,mText:"",mSubTextHolder:null,mIsShown:true,mWidthEdgeMargin:0,mHeightEdgeMargin:0,mTextLineSpace:0,mFontHeight:0,mIsRectCalculated:false,mTextWidthLimit:-1,mIsStringent:true,mLineCount:-1,mIsTruncated:false,mOnMarker:false,mIsOnScreen:true,init:function AL(AV){AV.hasLine=false;AV.hasFill=false;if(AV.hasLine||AV.hasFill){this._super(AV);}else{this.mpParentObject=AV.GraphCollectionObject||null;this.mTripleId=AV.TripleId||u.gNullTripleId;this.mpManager=AV.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(AV.Shape){this.mShapeType=AV.Shape;}}if(AV.Identity!==undefined&&AV.Identity!==null){this.identity=AV.Identity;}this.rect=this.rect||new u.Rect2D();this.mSubTextHolder=new u.SubTextHolder();if(AV&&AV.OnMarker){this.mOnMarker=AV.OnMarker;}AU.call(this);J.call(this);},GetFormatFont:function AR(){return this.mFormatFontPtr;},SetText:function AT(AV,AX){if(AX===undefined){AX=-1;}this.mText=AV;this.mIsRectCalculated=false;if(this.mText!==""){var AW=this.mSubTextHolder;AW.Clear();AW.ParseText(this.mText," ",AX);AW.UpdateText(this.mChartContextPtr,this.mFormatFontPtr);}},GetBoundingRectEx:function AQ(AX){var AV=this.mFormatFontPtr.mFontRotation;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AW=this.rect;if(AV!==P.FR_NORMAL){if(AV===P.FR_90||AV===P.FR_270){AX.Reset(AW.x,AW.y,AW.width,AW.height);var AZ=AW.x+0.5*AW.width,AY=AW.y+0.5*AW.height;AX.width=this.rect.height;AX.height=this.rect.width;AX.x=AZ-0.5*AX.width;AX.y=AY-0.5*AX.height;}else{var Aa=this.GetBoundingRectFromPolygon(j.call(this));AX.ResetRect(Aa);}}else{AX.Reset(AW.x,AW.y,AW.width,AW.height);}},GetBoundingRect:function AC(AV){var AX=this.mFormatFontPtr.mFontRotation,AW;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}if(AX!==P.FR_NORMAL){if(AX===P.FR_90||AX===P.FR_270){AW=new u.Rect2D({Rect2D:this.rect});var AY=this.rect,Aa=AY.x+0.5*AY.width,AZ=AY.y+0.5*AY.height;AW.width=this.rect.height;AW.height=this.rect.width;AW.x=Aa-0.5*AW.width;AW.y=AZ-0.5*AW.height;}else{AW=this.GetBoundingRectFromPolygon(j.call(this));}}else{AV=AV||false;if(AV){return this.rect;}AW=new u.Rect2D({Rect2D:this.rect});}return AW;},GetClockwisePolygon:function I(){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}return j.call(this);},CalculateDeviceRect:function AN(){var Ab=this.mSubTextHolder,Ad=this.rect,AV=this.mFontHeight,AY=this.mTextWidthLimit,Aa=this.mTextLineSpace,AZ=this.mWidthEdgeMargin,Ac=this.mHeightEdgeMargin,AW=1,AX=this.mLineCount;if(Ad.width===0||Ad.height===0){if(AY===-1&&AX===-1){AW=Ab.GetLineCount();Ad.width=Ab.GetMaxWidth();Ad.height=(AV+(AW===1?0:Aa))*AW;Ad.Explode(AZ,Ac);}else{if(AY!==-1&&AX===-1){Ab.PartitionBy(AY,this.mIsStringent);AW=Ab.GetLineCount();Ad.height=(AV+(AW===1?0:Aa))*AW+Ac*2;if(this.mIsStringent){Ad.width=Math.min(Ab.GetMaxWidth(),AY)+AZ*2;}else{Ad.width=Ab.GetMaxWidth()+AZ*2;}}else{if(AY===-1&&AX!==-1){Ab.SetLineCount(AX);AW=Ab.GetLineCount();Ad.width=Ab.GetMaxWidth();Ad.height=(AV+(AW===1?0:Aa))*AW;Ad.Explode(AZ,Ac);}else{Ab.SetLineCount(AX,AY);AW=Ab.GetLineCount();Ad.height=(AV+(AW===1?0:Aa))*AW+Ac*2;if(this.mIsStringent){Ad.width=Math.min(Ab.GetMaxWidth(),AY)+AZ*2;}else{Ad.width=Ab.GetMaxWidth()+AZ*2;}}}}}else{if(AY===-1){if(Ab.GetMaxWidth()>Ad.width){Ab.PartitionBy(Ad.width);}}else{if(Ab.GetMaxWidth()>AY){Ab.PartitionBy(AY,this.mIsStringent);if(this.mIsStringent){Ad.width=Math.min(Ab.GetMaxWidth(),AY)+AZ*2;}else{Ad.width=Ab.GetMaxWidth()+AZ*2;}}else{Ad.width=Ab.GetMaxWidth()+AZ*2;}}AW=Ab.GetLineCount();Ad.height=(AV+(AW===1?0:Aa))*AW+Ac*2;}this.mIsRectCalculated=true;},GetLineCount:function C(){return this.mSubTextHolder.GetLineCount();},SetTextWidthLimit:function z(AW,AV){if(AV===undefined){AV=true;}this.mTextWidthLimit=AW;this.mIsStringent=AV;this.mIsRectCalculated=false;},SetRect:function B(AV){this.rect.copy(AV);},SetRotation:function AE(AX){var AW=this.mFormatFontPtr.mFontRotation;if(AX!==AW){var AV=new u.FormatFont({Font:this.mFormatFontPtr});AV.mFontRotation=AX;this.mFormatFontPtr=AV;}},MoveTo:function t(AX,AW,AV){AV=AV||AF.TOP_LEFT;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AY=this.rect;switch(AV){case AF.TOP_LEFT:AY.x=AX;AY.y=AW;break;case AF.CENTER:AY.x=AX-AY.width/2;AY.y=AW-AY.height/2;break;case AF.TOP_MIDDLE:AY.x=AX-AY.width/2;AY.y=AW;break;case AF.TOP_RIGHT:AY.x=AX-AY.width;AY.y=AW;break;case AF.LEFT_MIDDLE:AY.x=AX;AY.y=AW-AY.height/2;break;case AF.RIGHT_MIDDLE:AY.x=AX-AY.width;AY.y=AW-AY.height/2;break;case AF.BOTTOM_LEFT:AY.x=AX;AY.y=AW-AY.height;break;case AF.BOTTOM_MIDDLE:AY.x=AX-AY.width/2;AY.y=AW-AY.height;break;case AF.BOTTOM_RIGHT:AY.x=AX-AY.width;AY.y=AW-AY.height;break;}},MoveToCenter:function AH(AW,AV){this.rect.x=Math.round(AW-this.rect.width/2);this.rect.y=Math.round(AV-this.rect.height/2);},GetTransformedRect:function H(AW){var AV,AZ,AX;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AY=this.mFormatFontPtr.mFontRotation;if(AY===P.DssGraphFontRotate45||AY===P.DssGraphFontRotate315){AX=new u.Rect2D({Rect2D:this.rect});AV=new u.Point2D({x:AX.x+AX.width*0.5,y:AX.y+AX.height*0.5});AZ=(AY===P.DssGraphFontRotate45)?1:-1;AX.x=Math.floor((AV.x-AZ*AV.y)*Math.SQRT1_2+(AX.x-AV.x)+0.5);AX.y=Math.floor((AZ*AV.x+AV.y)*Math.SQRT1_2+(AX.y-AV.y)+0.5);}else{AX=this.GetBoundingRect(AW);}return AX;},GetTransformedRectEx:function AP(AX){var AZ,AY,AW;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AV=this.mFormatFontPtr.mFontRotation;if(AV===P.FR_45||AV===P.FR_315){AX.ResetRect(this.rect);AZ=AX.x+AX.width*0.5;AY=AX.y+AX.height*0.5;AW=(AV===P.FR_45)?1:-1;AX.x=Math.floor((AZ-AW*AY)*Math.SQRT1_2+(AX.x-AZ)+0.5);AX.y=Math.floor((AW*AZ+AY)*Math.SQRT1_2+(AX.y-AY)+0.5);}else{this.GetBoundingRectEx(AX);}},HasOverlapForSameRotation:function A(AV,AW,AY){AW=AW||0;AY=AY||M.REC_EXP_INVALID;var AX=this.GetTransformedRect(true),AZ=AV.GetTransformedRect(true),Aa=AW/2;if(Aa>0){x.ResetRect(AX);N.ResetRect(AZ);x.Expand(Aa,AY);N.Expand(Aa,AY);return x.HasIntersection(N);}return AX.HasIntersection(AZ);},strokeBBox:function E(AW){var AV=false,AX=this.mChartContextPtr;if(AW===undefined){if(AV){AW=AX.getDefaultContrastColor();}else{AW=AX.getDefaultThemeColor();}}this.BBoxColor=AW;},Draw:function AG(){var Ab=this.mChartContextPtr,AZ=this.mFormatFontPtr,AW,Aa,AY,AX,AV=false;if(AI.call(this)===false){return ;}if(isNaN(this.rect.x)||isNaN(this.rect.y)){return ;}this.mIsTruncated=false;AZ=X.call(this);AZ.ApplyFontFormat(Ab,false);switch(this.mTripleId.mObjectId){case AJ.DssGraph2DO1Label:case AJ.DssGraph2DO2Label:AV=true;break;default:AV=false;break;}if(AZ.mFontRotation!==P.FR_NORMAL){Ab.saveState();a.x=this.rect.x+this.rect.width/2;a.y=this.rect.y+this.rect.height/2;Ab.Rotate(a,AM.call(this));}AW=this.mSubTextHolder.GetLineCount();Aa=this.mFontHeight+this.mTextLineSpace;AY=Math.max((this.rect.height-Aa*AW)/2,0);for(AX=0;AX<AW;AX++){r.x=this.rect.x;r.y=this.rect.y+AY+(AX+1)*this.mFontHeight;O.call(this,r,AX,AV);}if(AZ.mFontRotation!==P.FR_NORMAL){Ab.RestoreState();}Ab.FinishDrawText(this.mTripleId,{OnMarker:this.mOnMarker,Tooltip:this.mIsTruncated?this.mText:null,Identities:this.IdentityMap,Identity:this.identity});},getFormatFromParent:function q(){var AV=this.mpParentObject;this.mFormatLinePtr=AV.mFormatLinePtr;this.mFormatFillPtr=AV.GetFormatFill();this.mFormatFontPtr=AV.GetFormatFont();},GetBoundingRectNoRotation:function c(AV){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}AV=AV||false;if(AV){return this.rect;}return new u.Rect2D({Rect2D:this.rect});},RestoreWidthAndHeight:function S(){this.mSubTextHolder.ParseText(this.mText," ",-1);this.rect.width=0;this.rect.height=0;this.mTextWidthLimit=-1;this.mIsStringent=true;this.mLineCount=-1;this.CalculateDeviceRect();},Restore:function h(AV){if(AV===undefined){this.RestoreWidthAndHeight();return ;}this.rect.width=0;this.rect.height=0;this.rect.x=0;this.rect.y=0;this.mTextWidthLimit=(AV.TextWidthLimit!==undefined)?AV.TextWidthLimit:-1;this.mLineCount=(AV.LineCount!==undefined)?AV.LineCount:-1;this.mIsStringent=(AV.Stringent!==undefined)?AV.Stringent:true;if(AV.Restroke!==undefined&&AV.Restroke){this.SetText(this.mText,this.mTextWidthLimit);}},GetOneLineHeight:function b(){return this.mFontHeight;},getWidthHeightMargin:function l(AV){return AV?this.mWidthEdgeMargin:this.mHeightEdgeMargin;},possibleTruncate:function o(){return this.mTextWidthLimit>0&&this.rect.width>this.mTextWidthLimit&&!this.mIsStringent;},getDevicePolygon:function Q(){return j.call(this);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect");mstrmojo.requiresClsP("mstrmojo.chart","Polygon2D","ShapeObject","FormatLine");var H=mstrmojo.chart,M=H.enums,K=M.EnumLineJoinType,Q=M.EnumLineStyle,B=mstrmojo.chart.model,C=B.enums,J=C.EnumDSSGraphObject,N=C.EnumDSSGraphFillBevelEffect;function I(){var Y=this.mChartContextPtr,W=this.mFormatLinePtr,S=this.mDevicePolygon,R=S.length,X,U=[],V;if(W.mLineStyle!==Q.LS_SOLID&&W.mLineStyle!==Q.LS_GRADIENT&&!Y.mUseAnimation){Y.NewPath();Y.MoveTo(S[R-1].x,S[R-1].y);X=R-1;for(V=0;V<R;++V){U=W.getLinePattern(W.mLineStyle);Y.DrawDashedLine(S[X],S[V],U);X=V;}Y.ClosePath();}}mstrmojo.chart.PolygonObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PolygonObject",mDevicePolygon:[],mHasHole:false,mPointsStyle:0,init:function P(U){var R,S;this._super(U);this.mDevicePolygon=[];if(U){if(U.Polygon!==undefined){R=U.Polygon.length;for(S=0;S<R;++S){this.mDevicePolygon.push(U.Polygon[S]);}}else{if(U.Points!==undefined){R=U.Points.length;for(S=0;S<R;++S){this.mDevicePolygon.push(U.Points[S]);}}}if(U.HasHole!==undefined){this.mHasHole=U.HasHole;}}},Draw:function A(){var Z=this.mChartContextPtr,R=this.mDevicePolygon,U=Z.GetLineJoin(),V=[],W,X=[],Y=0,S;Z.SetLineJoin(K.LJT_ROUND);this.SetLineWidth();Z.DrawPolygon(R,false);this.ApplyFillFormat();if(this.mHasHole){W=Math.floor(R.length/2);V=V.concat(R.slice(0,W-1));Z.DrawPolygon(V,true);if(this.mFormatLinePtr||this.mFormatLinePtr.mLineStyle===Q.LS_SOLID){this.ApplyLineFormat();}V.splice(0,V.length);V=V.concat(R.slice(W+1,R.length));Z.DrawPolygon(V,true);I.call(this);this.ApplyLineFormat();}else{if(Z.mIsTimeSeriesChart&&this.mTripleId.mObjectId===J.DssGraphRiser){Y=Math.floor(R.length/2);for(S=0;S<Y;++S){X.push(R[S]);}Z.DrawPolyLine(X,true);}else{if(Z.NeedAdjustedLinePath()){Z.DrawPolygon(R,true);}}I.call(this);this.ApplyLineFormat();}Z.SetLineJoin(U);Z.FinishDrawPolygon(R,this.mPointsStyle,this.mTripleId);},PointInObject:function E(S){var R=this.mDevicePolygon;if(!this.mIsDetectable){return false;}if(R.length<3){return false;}return S.IsInPolygon(R);},DrawOutLine:function G(){var V=this.mChartContextPtr,R=this.mDevicePolygon,S=[],U;if(R.length<3){return ;}this.SetOutlineWidth();if(this.mHasHole){U=Math.floor(R.length/2);S=S.concat(R.slice(0,U-1));V.DrawPolygon(S,true);this.ApplyOutlineFormat();S.splice(0,S.length);S=S.concat(R.slice(U+1,R.length));V.DrawPolygon(S,true);this.ApplyOutlineFormat();}else{V.DrawPolygon(R,true);this.ApplyOutlineFormat();}},ObjectInRectangle:function D(U){var R=this.mDevicePolygon,V=R.length,S;if(!this.mIsDetectable){return false;}if(V<3){return false;}for(S=0;S<V;++S){if(!U.PointInRectangle(R[S])){return false;}}return true;},GetBoundingRect:function F(){return this.GetBoundingRectFromPolygon(this.mDevicePolygon);},GetClockwisePolygon:function L(){var R=H.Polygon2D.clone(this.mDevicePolygon);this.MakePolygonClockwise(R);return R;},FillBevel:function O(){var X=this.mFormatFillPtr;if(X.supportAdvancedFill(0)===false){return ;}var S=this.mDevicePolygon,W=X.mFillBevel.type,U=[],R,V;if(S.length<3){return ;}if(this.mHasHole&&(W===N.DssGraphFillBevelChiselEdge||W===N.DssGraphFillBevelSmoothEdge)){U=U.concat(S);R=U.length;S.splice(0,R);for(V=0;(V+1)*2<R;++V){S[0]=U[V];S[1]=U[V+1];S[2]=U[R-2-V];S[3]=U[R-1-V];this._super();}S.splice(0,S.length);this.mDevicePolygon=S.concat(U);}else{this._super();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","BezierCurve");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");var Q=mstrmojo.chart,L=Q.enums,n=L.EnumLineJoinType,F=L.EnumLineStyle,R=103,b=0.087,d=0.01;function V(q){var r=q.x;q.x=q.y;q.y=r;}function C(q,s){var r=this.mBezierCurves,u=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),t;if(q){u.AddBezierCurveLine(q);}var w=r.length;for(t=s;t<w;++t){u.AddBezierCurveLine(r[t]);}r.splice(s,r.length-s);return u;}function g(u,AD){var AA=this.mBezierCurves,AB=(u.y)/u.x,AF=AA.length,y,x,w;for(x=0;x<AF;++x){var t=[];AA[x].SplitAtTangentPoints(u,t);if(t.length!==0){var r=t.length;for(w=0;(w+1)<r;++w){AD.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:t[w]}));}y=C.call(this,t[t.length-1],x+1);g.call(y,u,AD);AD.push(y);return ;}if((x+1)<AA.length){var z=AA[x].getEndIndependent(),s=AA[x].evaluateDerivative(z);if(Math.abs(s-AB)<Math.abs(1+s*AB)*b){var AC=AA[x].evaluate2ndDerivative(z),q=AA[x].evaluate3rdDerivative(),AE=AA[x].evaluate3rdDerivative();if((Math.abs(AC)>=0.1*d)||(q*AE<-d)){y=C.call(this,null,x+1);g.call(y,u,AD);AD.push(y);return ;}}}}}function p(w,z){var x=this.mBezierCurves,AB=this.mBezierCurves.length,q=w.mBezierCurves.length,u,t,s;for(u=0;u<AB;++u){for(t=0;t<q;++t){var y=[];x[u].SplitAtIntersections(w.mBezierCurves[t],y);if(y.length!==0){var r=y.length;for(s=0;(s+1)<r;++s){z.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:y[s]}));}var AA=C.call(this,y[y.length-1],u+1);p.call(AA,w,z);z.push(AA);return ;}}}}function S(y,AA){var z=this.mBezierCurves,AD=z.length,u=y.mBezierCurves.length,x,w;for(x=1;x<AD;++x){var s=z[x].getStartPoint();for(w=1;w<u;++w){var t=y.mBezierCurves[w].getStartPoint();if(Math.abs(s.x-t.x)<d&&Math.abs(s.y-t.y)<d){var AB=z[x].evaluateDerivative(z[x].getStartIndependent());var q=y.mBezierCurves[w].evaluateDerivative(y.mBezierCurves[w].getStartIndependent());var r=Math.abs(AB-q)<Math.abs(1+AB*q)*b;if(!r){var AC=C.call(this,null,x);S.call(AC,y,AA);AA.push(AC);return ;}}}}}function E(s,y,w,r){var q=y.length,u;for(u=0;u<q;++u){r.push(0);}y[0]/=s[0];w[0]/=s[0];for(u=1;u<q;++u){var t=s[u]-y[u-1];y[u]/=t;w[u]=(w[u]-w[u-1])/t;}r[q-1]=w[q-1];for(u=q-2;u>=0;u--){r[u]=w[u]-y[u]*r[u+1];}}function J(AA){var y=this.mBezierCurves,u=[],s=[],r=[],AB=AA.length,t;for(t=0;t<AB;++t){var z,w;if(t===0){z=0;w=1;}else{if(t===AA.length-1){z=AA.length-2;w=AA.length-1;}else{z=t-1;w=t+1;}}var q=this.mIsVertical?AA[z].y:AA[z].x,x=this.mIsVertical?AA[w].y:AA[w].x;r.push(x-q);}for(t=0;t<AA.length;++t){u.push(4);}u[0]-=2;u[u.length-1]-=2;for(t=0;t<AA.length;++t){s.push(1);}var AC=[];E.call(this,u,s,r,AC);for(t=0;t<AB-1;++t){if(this.mIsVertical){y.push(new Q.BezierCurve({P0:AA[t],F1:AA[t].y+AC[t],F2:AA[t+1].y-AC[t+1],P3:AA[t+1],IsVertical:this.mIsVertical}));}else{y.push(new Q.BezierCurve({P0:AA[t],F1:AA[t].x+AC[t],F2:AA[t+1].x-AC[t+1],P3:AA[t+1],IsVertical:this.mIsVertical}));}}}function O(AI){var u=this.mChartContextPtr,AE=this.mFormatLinePtr.mLineStyle,AB,AA,AJ;if(u.mImageFormat===R){return ;}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||u.mUseAnimation){return ;}u.NewPath();var w=AI.length;if(w<2){return ;}var q=Q.FormatLine.getLinePattern(AE),z=q.length,AD=0,s=0,r=[],AC=[];for(AB=0;AB<w;++AB){AC.push(0);r.push(0);}var AH=AI[0].x;var AG=AI[0].y;var AF=0.05;if(AE===F.LS_DOT_DOT_DOT){AF=0.03;q[z-1]*=3;}else{if(AE===F.LS_DOT){AF=0.005;}}for(AJ=0;AJ<=1;AJ+=AF/w){for(AB=1;AB<w;++AB){for(AA=0;AA<w-AB;++AA){if(AB===1){r[AA]=AI[AA].x*(1-AJ)+AI[AA+1].x*AJ;AC[AA]=AI[AA].y*(1-AJ)+AI[AA+1].y*AJ;continue;}r[AA]=r[AA]*(1-AJ)+r[AA+1]*AJ;AC[AA]=AC[AA]*(1-AJ)+AC[AA+1]*AJ;}}s+=Math.sqrt((AH-r[0])*(AH-r[0])+(AG-AC[0])*(AG-AC[0]));if(s>=q[AD]){if(AD%2===0){if(this.mIsVertical){u.MoveTo(AH,AG);u.LineTo(r[0],AC[0]);}else{u.MoveTo(AG,AH);u.LineTo(AC[0],r[0]);}}AD=(AD+1)%z;s=0;AH=r[0];AG=AC[0];}}}mstrmojo.chart.CurveLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.CurveLineObject",mBezierCurves:[],mIsVertical:false,isClosePath:false,identity:null,startPoint:null,midPoint:null,endPoint:null,init:function j(q){this.mBezierCurves=[];if(q.hasLine===undefined){q.hasLine=true;}if(q.IsVertical===undefined){q.IsVertical=true;}if(q.IsClosePath===undefined){q.IsClosePath=false;}q.GraphCollectionObject=q.GraphCollectionObject||null;this._super(q);this.isClosePath=q.IsClosePath;if(q.BezierCurvePtr){this.mBezierCurves.push(q.BezierCurvePtr);this.mIsVertical=q.BezierCurvePtr.mIsVertical;}else{this.mIsVertical=q.IsVertical;if(q.Points){J.call(this,q.Points);}}if(q.Identity){this.identity=q.Identity;}},Draw:function f(){var w=this.mChartContextPtr,x=this.mBezierCurves,u=w.GetLineJoin(),AI,AA,AH=[],AD=[],AJ,y,AF,AE,AK,z,AB,AG,AL;if(x.length===0){return ;}w.SetLineJoin(n.LJT_ROUND);this.SetLineWidth();AA=x.length;if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||w.mUseAnimation){w.NewPath();x[0].MoveToStart(w);for(AI=0;AI<AA;++AI){x[AI].CurveToEnd(w);}}else{for(AI=0;AI<AA;++AI){x[AI].GetControlPoints(AH);O.call(this,AH);this.ApplyLineFormat();}}if(this.isClosePath){w.ClosePath();}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||w.mUseAnimation){this.ApplyLineFormat();}w.SetLineJoin(u);for(AI=0;AI<AA;++AI){var AC=x[AI],t=new Q.Point2D({Point2D:AC.mP0}),s=new Q.Point2D({Point2D:AC.mP1}),r=new Q.Point2D({Point2D:AC.mP2}),q=new Q.Point2D({Point2D:AC.mP3});if(!this.mIsVertical){t.swap();s.swap();r.swap();q.swap();}AD.push(t);AD.push(s);AD.push(r);AD.push(q);}if((this.startPoint===undefined||this.startPoint===null)&&(this.endPoint===undefined||this.endPoint===null)&&(this.midPoint===undefined||this.midPoint===null)){AJ=AD.length;this.startPoint={x:AD[0].x,y:AD[0].y};this.endPoint={x:AD[AJ-1].x,y:AD[AJ-1].y};if(AA%2===0){this.midPoint={x:AD[AJ/2-1].x,y:AD[AJ/2-1].y};}else{y=(AA-1)/2;AF=(x[y].mP0.x+x[y].mP3.x)/2;AE=x[y].evaluate(AF);if(!this.mIsVertical){AK=AF;AF=AE;AE=AK;}this.midPoint={x:AF,y:AE};}}else{if(!this.mIsVertical){V.call(this,this.startPoint);V.call(this,this.midPoint);V.call(this,this.endPoint);}}w.FinishDrawCurves(AD,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},DrawOutLine:function l(){var t=this.mChartContextPtr,q=this.mBezierCurves,r;this.SetOutlineWidth();t.NewPath();q[0].MoveToStart(t);var s=q.length;for(r=0;r<s;++r){q[r].CurveToEnd(t);}this.ApplyOutlineFormat();},PointInObject:function K(t){var s=this.mBezierCurves,r=(this.mFormatLinePtr.mLineThickness<4)?4:this.mFormatLinePtr.mLineThickness,q=s.length,w,u;for(w=0;w<q;++w){u=[];s[w].GetApproximatePolygon(r,u);if(t.IsInPolygon(u)){return true;}}return false;},ObjectInRectangle:function k(w){var r=this.mBezierCurves,q=(this.mFormatLinePtr.mLineThickness<1)?1:this.mFormatLinePtr.mLineThickness,x=r.length,u,s,t;for(u=0;u<x;++u){t=[];r[u].GetApproximatePolygon(q,t);for(s=0;s<t.length;++s){if(!w.PointInRectangle(t[s])){return false;}}}return true;},AddBezierCurveLine:function X(q){var r=this.mBezierCurves;if(r.length===0){this.mIsVertical=q.mIsVertical;}r.push(q);},GetClockwisePolygon:function B(){return[];},MoveToStart:function W(q){var r=this.mChartContextPtr;this.mBezierCurves[0].MoveToStart(r,q&&r.NeedAdjustedLinePath());},CurveToEnd:function c(t){var u=this.mChartContextPtr,q=this.mBezierCurves,s=q.length,r;for(r=0;r<s;++r){q[r].CurveToEnd(u,t&&u.NeedAdjustedLinePath());}},DashedCurveToEnd:function N(r,w){var z=this.mChartContextPtr,AA=this.mBezierCurves,AH=AA.length,AO,AM,AI;for(AO=0;AO<AH;++AO){var AN=[];AA[AO].GetControlPoints(AN);var AP=AN.length;if(AP<4){return ;}var s=(w&&z.NeedAdjustedLinePath()),AR=s?0.5:0,AD=s&&(AN[0].y===AN[1].y&&AN[1].y===AN[2].y&&AN[2].y===AN[3].y)?0.5:0,q=(Math.abs(AN[0].x-AN[1].x)<0.5)?0.5:0;AN[1].x+=q;AN[1].y+=AD;AN[2].x+=q;AN[2].y+=AD;AN[3].x+=AR;AN[3].y+=AD;var AK=Q.FormatLine.getLinePattern(r),AJ=AK.length,AQ=0,u=0,AC=[],AG=[];for(AO=0;AO<AP;++AO){AG.push(0);AC.push(0);}var AF=AN[0].x,AE=AN[0].y;var AB=0.05;if(r===F.LS_DOT_DOT_DOT){AB=0.03;AK[AJ-1]*=2;}else{var AL=11.2;for(AM=0;AM<AJ;++AM){if(AM%2===0){AK[AM]*=AL;}}}for(AI=0;AI<=1;AI+=AB/AP){for(AO=1;AO<AP;++AO){for(AM=0;AM<AP-AO;++AM){if(AO===1){AC[AM]=AN[AM].x*(1-AI)+AN[AM+1].x*AI;AG[AM]=AN[AM].y*(1-AI)+AN[AM+1].y*AI;continue;}AC[AM]=AC[AM]*(1-AI)+AC[AM+1]*AI;AG[AM]=AG[AM]*(1-AI)+AG[AM+1]*AI;}}u+=Math.sqrt((AF-AC[0])*(AF-AC[0])+(AE-AG[0])*(AE-AG[0]));if(u>=AK[AQ]){if(AQ%2===0){if(this.mIsVertical){z.MoveTo(AF,AE);z.LineTo(AC[0],AG[0]);}else{z.MoveTo(AE,AF);z.LineTo(AG[0],AC[0]);}}AQ=(AQ+1)%AJ;u=0;AF=AC[0];AE=AG[0];}}}},LineToStart:function P(q){var r=this.mChartContextPtr;this.mBezierCurves[0].LineToStart(r,q&&r.NeedAdjustedLinePath());},getStartPoint:function Y(){return this.mBezierCurves[0].getStartPoint();},getEndPoint:function D(){var q=this.mBezierCurves;return q[q.length-1].getEndPoint();},evaluate:function U(t){var r=this.mBezierCurves,w=r.length,s;for(s=0;(s+1)<w;++s){var q=r[s].getMinX();var u=r[s].getMaxX();if(q-t<d&&t-u<d){return r[s].evaluate(t);}}return r[r.length-1].evaluate(t);},GetMinMax:function e(){var q=this.mBezierCurves,u=q.length,s,r,t;if(u>0){s=q[0].GetMinMax();for(r=1;r<u;++r){t=q[r].GetMinMax();if(t.MinY<s.MinY){s.MinY=t.MinY;}if(t.MaxY>s.MaxY){s.MaxY=t.MaxY;}}}return s;},GetApproximatePolyline:function M(t){var q=this.mBezierCurves,s,r,w,x,u;q[0].GetApproximatePolyline(t);w=q.length;for(s=1;s<w;++s){x=[];q[s].GetApproximatePolyline(x);u=x.length;for(r=1;r<u;++r){t.push(x[r]);}}},CloneReverseShift:function o(t){var q=this.mBezierCurves,s=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),r;for(r=q.length-1;r>-1;--r){s.AddBezierCurveLine(q[r].CloneReverseShift(t));}return s;},Clone:function I(){var q=this.mBezierCurves,s=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),t=q.length,r;for(r=0;r<t;++r){s.AddBezierCurveLine(q[r].Clone());}return s;},Reverse:function a(){var q=this.mBezierCurves,s=q.length,r;for(r=0;r<s;++r){q[r].Reverse();}q.reverse();},getMinX:function H(){var q=this.mBezierCurves,s=Number.MAX_VALUE,u=q.length,r;for(r=0;r<u;++r){var t=q[r].getMinX();if(t<s){s=t;}}return s;},getMaxX:function h(){var r=this.mBezierCurves,q=Number.MIN_VALUE,u=r.length,s;for(s=0;s<u;++s){var t=r[s].getMaxX();if(t>q){q=t;}}return q;},isBefore:function G(x,u){var r=this.mBezierCurves,w=r.length,q=u.mBezierCurves.length,t,s;for(t=0;t<w;++t){for(s=0;s<q;++s){if(r[t].isBefore(x,u.mBezierCurves[s])){return true;}}}return false;},SplitAtTangentPoints:function A(r,q){if(!this.mIsVertical){r.swap();}if(r.x===0){return ;}g.call(this,r,q);},SplitAtIntersections:function Z(t,q){var s=[];p.call(this,t,s);q=s;S.call(this,t,q);var u=s.length,r;for(r=0;r<u;++r){S.call(s[r],t,q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","StraightLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumAxisDirection","EnumAxisLabelsLocation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var D=mstrmojo.chart,H=D.enums,J=H.EnumAxisDirection,C=H.EnumAxisLabelsLocation,A=mstrmojo.chart.model,B=A.enums,E=B.EnumDSSGraphObject,F=D.gNullTripleId;mstrmojo.chart.CategoryAxisInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CategoryAxisInfo",mId:F,mAxisLabelsLocation:C.ALL_BOTTOM,mAxisDirection:J.AD_X,init:function K(L){this._super(L);this.mId=new D.TripleId({ObjectId:E.DssGraphO1Body,SeriesId:0});this.mAxisLabelsLocation=C.ALL_BOTTOM;this.mAxisDirection=J.AD_X;},ToX:function I(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_X;this.mAxisLabelsLocation=C.ALL_BOTTOM;},ToY:function G(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_Y;this.mAxisLabelsLocation=C.ALL_LEFT;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.models.template.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus.EditorConfig","mstrmojo.Button","mstrmojo.Label","mstrmojo.ui.CheckList","mstrmojo.ui.Pulldown","mstrmojo.models.datasets.DataInterface","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.models.VIComponentMap","mstrmojo.threshold.ThresholdController","mstrmojo.threshold.ThresholdModel","mstrmojo.chart.model.enums.EnumDSSAxisName","mstrmojo.chart.model.enums.EnumDSSDynamicShortcut","mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.ME.MetricDataService","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType");var c=mstrmojo,N=c.array,S=c.hash,AQ=mstrmojo.chart.model.enums.EnumDSSObjectType,f=c.vi.ui.DatasetUnitMenuUtils,X=mstrmojo.models.datasets.DataInterface,AL=c.vi.models.VIComponentMap,g=mstrmojo.vi.viz.EnumDSSDropZones,I=mstrmojo.ME.MetricDataService,H=1,AJ=2,F=3,AS=4,P=5,AE=6,k=7,O=8,x=9,AV=10,A=11,AB=12,D="00000000000000000000000000000000",AH=-1,d=mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap,AD=mstrmojo.chart.model.enums.EnumDSSAxisName,Ac=mstrmojo.chart.model.enums.EnumDSSDynamicShortcut,R=mstrmojo.mstr.EnumDSSXMLBaseFormType,V=mstrmojo.mstr.EnumDSSXMLObjectTypes,Ab=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,G=mstrmojo.mstr.EnumDSSConsolidationType;function W(Ah){var Ai=this.getHost(),Aj=Ai.model.data.gsi;return Aj.cols.concat(Aj.rows).filter(function(Ak){return Ak.t===Ah;});}function AA(Ah,Aj,Ai){return{act:"updateTemplate",keyContext:Ah.k,partialRetrieval:{nodes:Ai?null:[Ah.k]},actions:Aj};}function AR(Ak,Ai,Al){var Ap=this,Am=[],An=[],Aq={};if(Ai.useDropzone){Ak.useDropzone=true;Aq.dropzoneId=Ai.zone.id;if(Ai.item.ax!==undefined){Aq.ax=Ai.item.ax;}}Aq.position=Ai.idx+1+(Al.offset||0);if(Al.replaceSourceId){Ak.replaceSourceId=Al.replaceSourceId;}if(Al.addToTooltip){An.push({dropzoneId:x,position:Ap.gmZones.getTooltipDropzoneIdx(Ai.item),});}Ak.partialRetrieval={nodes:[Ak.nodeKey]};An.push(Aq);Ak.dropzones=An;Am.push(Ak);var Ao="$GUID_115",Ah=[],Aj=this.checkAndAddThresholdAction(Ai.zone.id,{did:Ao,t:4},Ah);if(Aj){Ak.newObjectIds=[Ao];Am.push(this.getUpdateTemplateAction(Ah));}return Am;}function Ag(Ak){var Ah=this.getHost().model.data.datasetId,Aj=N.ensureArray(Ak),Ai=N.hash(Aj);if(!Ah){S.forEach(this.docModel.datasets,function(An,Ao){var Al=(An.att||[]).concat(An.mx||[]),Am=Al.some(function(Ap){return Ai[Ap.did];});if(Am){Ah=Ao;return false;}});}return Ah;}function AW(Ah,Al,Ai){var Ao=this,At=this.docModel,An=Ah.item,Ar=f.getUnitFromDataset(Ao.docModel.datasets,An.did,An.t)||An,Au=this.getHost(),Aq=Ao.docModel.getDataService(),Am=Al==="edit",Ap=Au.getChartStyle&&Au.getChartStyle()==="NewGraphMatrixVisualizationStyle",Aj,Ak={dsid:Am?At.findDatasetIdFromUnit(Ar.did):Ag.call(Ao,Ar.did),alias:Ar.alias||Ar.n},As=null;if(Ar.t===V.Metric){if(Am){Aj={metricId:Ar.did,metric:Ar,action:{cmd:Al,n:Ar.n,alias:An.n}};Ak.did=Ar.did;Ak.nodeKey=Au.k;As=Aq.getEditDerivedMetricSubmitFunc(Ak);}else{Aj={metricId:"",action:{cmd:Al,refOi:{did:Ar.did,n:Ar.n}}};Ak.nodeKey=Au.k;Ak.idx=Ah.idx;Ak.host=Au;Ak.zoneid=Ah.zone.id;if(Ap){Ak.extraZone={id:x,idx:Ao.gmZones.getTooltipDropzoneIdx(Ah.item),};}if(Ai){Ak.replace={did:Ar.did,t:Ar.t};}if(Ah.useDropzone){As=Aq.getAddNewDerivedMetricToDropzoneSubmitFunc(Ak);}else{As=Aq.getAddNewDerivedMetricToXtabSubmitFunc(Ak);}}if(Ao.docModel.isFromSolrCube(Ar.did)||Ao.docModel.isFromMDXCube(Ar.did)){Aj.disableAFB=true;}Ao.docModel.controller.openDME(Au,Aj,As);}}mstrmojo.vi.models._DropZoneCommon=mstrmojo.provide("mstrmojo.vi.models._DropZoneCommon",{_mixinName:"mstrmojo.vi.models._DropZoneCommon",isMetric:function j(Ah){return Ah&&Ah.t===V.Metric&&Ah.id!==D;},isAttribute:function AF(Ah){return Ah&&Ah.t===V.Attribute;},isRecursiveAttribute:function b(Ah){return Ah&&Ah.t===V.Attribute&&Ah.st===Ab.AttributeRecursive;},isNewDerivedElement:function AM(Ah){return Ah.t===V.Consolidation&&Ah.st===Ab.ConsolidationManaged;},isNewDerivedRecursiveElement:function AM(Ah){return Ah.t===V.Consolidation&&Ah.st===Ab.ConsolidationManaged&&Ah.ndetype===G.DssRecursiveDerivedElement;},isConsolidation:function Aa(Ah){return Ah.t===V.Consolidation&&Ah.st===Ab.Consolidation;},isCustomGroup:function C(Ah){return Ah.t===V.Filter;},isAttrCategory:function Y(Ah){return Ah&&(Ah.t===V.Attribute||Ah.t===V.Filter||Ah.t===V.Consolidation||Ah.t===V.Dimension);},isMetricName:function AU(Ah){return Ah&&(Ah.id===D||Ah.did===D);},differInType:function U(Ai,Ah){return(this.isMetric(Ai)&&this.isAttrCategory(Ah))||(this.isAttrCategory(Ai)&&this.isMetric(Ah));},isDynamicLink:function J(Ai){if(this.isAttribute(Ai)){var Ah=Ai.fs||X.getFormsByAttrId(Ai.did,this.docModel.datasets);return Ah.length===2&&Ah[1].bftp===R.DssXmlBaseFormHTMLTag&&Ah[1].fnm==="DYNAMICLINK";}return false;},hasOldDEOverDatasets:function(Ak){var Aj=this.docModel.datasets,Ai=false,Ah;S.forEach(Aj,function(Al){Ah=N.find((Al.att||[]),"did",Ak);if(Ah!==-1&&Al.att[Ah].de){Ai=true;return false;}});return Ai;},getZoneModelByZoneId:function(Ah){var Ai=this.dropZones,Aj;N.forEach(Ai,function(Ak){if(Ak.id===Ah){Aj=Ak;return false;}});return Aj;},hGetItemOccurrence:function(Al,An){An=An||[];if(An.length===0){An=[H,AJ,F,AS,k,P,O,x,AE,AV];}var Aj,Ah,Ai,Am=An.length,Ak=[];for(Aj=0;Aj<Am;Aj++){Ai=this.getZoneModelByZoneId(An[Aj]);if(!Ai){continue;}Ah=this.getUnitIndexInZone(Ai,Al);if(Ah!==-1){Ak.push({zoneId:An[Aj],itemIndex:Ah});}}return Ak;},removeColorByItemFromBreakByIfExists:function AC(Ak,Am){var Al,Aj,Ah,Ai;Al=this.hGetItemOccurrence(Ak,[H,AJ,F,AS,P,O,AE]);if((Al.length===1)&&(Al[0].zoneId===P||Al[0].zoneId===AE)){Aj=Al[0];Ah=this.getZoneModelByZoneId(Aj.zoneId);Ai=Ah.items[Aj.itemIndex];if(Ai.hidden){Array.prototype.push.apply(Am,this.getRemoveDropZoneUnitActions(Ah,Ai));}}},updateBreakByAndSliceUnits:function n(){var Ah=this,Aj=[H,AJ,F,AS,k,O,A,AB],Ai=this.getZoneModelByZoneId(AE)||this.getZoneModelByZoneId(P),Ak;Ai.items.forEach(function(Al){if(Ah.isAttrCategory(Al)||Ah.isMetricName(Al)){Ak=Ah.hGetItemOccurrence(Al,Aj);if((Ak.length===1)&&(Ak[0].zoneId===k)){Al.hidden=true;}}});},getAxisSummary:function AN(){var Ah={};Ah[F]=this.getItemCountInZone(F);Ah[AS]=this.getItemCountInZone(AS);Ah[AV]=this.getItemCountInZone(AV);return Ah;},getItemCountInZone:function(Ah){var Ai=this.getZoneModelByZoneId(Ah);if(Ai){return Ai.items.length;}return 0;},isOnlyMetricZone:function h(Ah){var Aj,Al,Ak,Ai=this.getZoneModelByZoneId(Ah);if(!Ai){return false;}Ak=Ai.items;Al=Ak.length;if(Al===0){return false;}for(Aj=0;Aj<Al;Aj++){if(!this.isMetric(Ak[Aj])){return false;}}return true;},isMetricZone:function z(Ah){var Aj,Al,Ak,Ai=this.getZoneModelByZoneId(Ah);if(!Ai){return false;}Ak=Ai.items;Al=Ak.length;if(Al===0){return false;}for(Aj=0;Aj<Al;Aj++){if(!this.isMetric(Ak[Aj])){if(this.isMetricName(Ak[Aj])){continue;}else{return false;}}}return true;},getMetricCntInZone:function(Ah){var Aj=this,Ai=this.getZoneModelByZoneId(Ah),Al=Ai.items,Ak=0;N.forEach(Al,function(Am){if(Aj.isMetric(Am)){Ak++;}});return Ak;},isAttrCategoryZone:function(Ah){var Aj,Al,Ak,Ai=this.getZoneModelByZoneId(Ah);if(!Ai){return false;}Ak=Ai.items;Al=Ak.length;if(Al===0){return false;}for(Aj=0;Aj<Al;Aj++){if(!this.isAttrCategory(Ak[Aj])&&!this.isMetricName(Ak[Aj])){return false;}}return true;},getZoneSummary:function AK(Ah){var Ak=this,Ai=this.getZoneModelByZoneId(Ah),Am=Ai?Ai.items:[],Al=0,An=0,Aj=false;N.forEach(Am,function(Ao){if(Ak.isMetric(Ao)){Al++;}else{if(Ak.isAttrCategory(Ao)){An++;}else{if(Ak.isMetricName(Ao)){Aj=true;}}}});return{metricCount:Al,attributeCount:An,hasMetricName:Aj};},isTemplateContainAttCategoryItem:function AP(){var Ak=this,Aj=Ak.getHost(),Al=Aj.model.data.gsi,Ai=(Al.rows||[]).concat(Al.cols||[]),Ah=false;if(Ai&&Ai.length){N.forEach(Ai,function(Am){if(Ak.isAttrCategory(Am)){Ah=true;return false;}});}return Ah;},showNumberFormat:function(Ah){return mstrmojo.all[this.hostId].model.showNumberFormat(Ah);},renameItem:function(Ai,Ah){var Aj=this.id;f.renameItem(Ai,Ah,function(An){var Ap=mstrmojo.all[Aj],As=Ap.getHost(),Am=Ap.getHostModel().gsi,Ao=An.allowTrimming?An.text.trim():An.text,At=Ah.t===V.Metric,Al=At?Am.mx:Am.rows.concat(Am.cols),Ar=function(){Ap.submitDropZoneUpdates(AA(As,[{act:"renameUnit",id:Ah.did,type:Ah.t,name:Ao,isDynamicAlias:false}]));},Ak=function(){An.set("text",Ah.n);},Aq=Al.some(function(Au){return Au.did!==Ah.did&&(At||Au.t===Ah.t)&&Au.n===Ao;});if(Aq){mstrmojo.warn(mstrmojo.desc(11664,'"##" already exists in the visualization. Do you want to proceed?').replace("##",Ao),{confirmBtn:{fn:Ar},cancelBtn:{fn:Ak}});}else{Ar();}},{allowEmptyText:true,cssClass:Ai.className});},getPageByUnit:function Ad(){var Ai=this.getHost(),Ah=Ai.builder.getLayoutVIMap(Ai.defn._lkz).getComponent(AL.TYPES.PAGEBY_PANEL);return Ah&&Ah.unit;},shouldShowDisplayFormsMenu:function E(Ak){if(!mstrmojo.resolveFeature("set-attributeform-display")||!this.isAttribute(Ak)&&!this.isNewDerivedRecursiveElement(Ak)||this.isDynamicLink(Ak)){return false;}var Ah=X.getFormsByAttrId(Ak.attId||Ak.did,this.docModel.datasets),Al=this.getHost().model.data,Ai=Al&&Al.gts,Aj=!!Ai&&Ah.length>1;if(Ai&&Ah.length===1){var Am=false;N.forEach((Ai.row||[]).concat(Ai.col||[]),function(An){if(An.id===Ak.did&&N.find(An.fs||[],"id",Ah[0].fid)>-1){Am=true;return false;}});if(!Am){Aj=true;}}return Aj;},getDisplayFormsMenu:function(Ai){var Ah=this;return f.getDisplayFormsMenu(Ai,Ah.getHost(),Ah.docModel.datasets,function(Aj){Ah.submitDropZoneUpdates(Aj);});},editDerivedMetric:function(Ah){AW.call(this,Ah,"edit");},newDerivedMetric:function(Ai){var Ah=mstrmojo.all[this.hostId].zonesModel.allowInsertNewMetric(Ai.zone);if(Ai.zone.id===k){Ah=false;}AW.call(this,Ai,"editNew",!Ah);},newDerivedAttribute:function e(An,Aj){var Ao=An.item,Am=f.getUnitFromDataset(this.docModel.datasets,Ao.did,Ao.t)||Ao,Al=this.getHost(),Ai=Al.getChartStyle&&Al.getChartStyle()==="NewGraphMatrixVisualizationStyle",Ak=this,Ah={forceRefresh:true,alias:"New Attribute",precreate:function(Aq){if(Ak.getAddItemActions){var Ap=Ak.getAddItemActions(An.zone,[{did:"$GUID_1",t:12}]);Aq.newObjectIds=["$GUID_1"];if(Aj){Ap=Ak.getRemoveDropZoneUnitActions(An.zone,Am).concat(Ap);}Aq=[Aq,{act:"updateTemplate",keyContext:Al.k,actions:Ap}];}else{Aq=S.copy({act:"addDAToTemplate",nodeKey:Al.k,treeType:Al.defn.tt},Aq);if(An.useDropzone){Aq.useDropzone=true;Aq.dropzones=[{dropzoneId:An.zone.id,position:0}];if(An.item.ax!==undefined){Aq.dropzones[0].ax=An.item.ax;}if(Aj){Aq.dropzones[0].replaceSourceId=Am.did;}}else{Aq.axis=An.axis;}if(Ai){Aq.dropzones.push({dropzoneId:x,position:0});}}return Aq;}};this.docModel.controller.openDAE(this,Ah,mstrmojo.emptyFn,Am);},newDynamicLinkAttr:function y(Am,Ai){var An=Am.item,Al=f.getUnitFromDataset(this.docModel.datasets,An.did,An.t)||An,Ak=this.getHost(),Aj=this,Ah={forceRefresh:true,alias:"New Link",precreate:function(Ap){if(Aj.getAddItemActions){var Ao=Aj.getAddItemActions(Am.zone,[{did:"$GUID_1",t:12}]);Ap.newObjectIds=["$GUID_1"];if(Ai){Ao=Aj.getRemoveDropZoneUnitActions(Am.zone,Al).concat(Ao);}Ap=[Ap,{act:"updateTemplate",keyContext:Ak.k,actions:Ao}];}else{Ap=S.copy({act:"addDAToTemplate",nodeKey:Ak.k,treeType:Ak.defn.tt},Ap);if(Am.useDropzone){Ap.useDropzone=true;Ap.dropzoneId=Am.zone.id;if(Am.item.ax!==undefined){Ap.ax=Am.item.ax;}if(Ai){Ap.replaceSourceId=Al.did;}}else{Ap.axis=Am.axis;Ap.pos=Am.idx+2;}}return Ap;}};this.docModel.controller.openDynamicLinkEditor(this,Ah,mstrmojo.emptyFn,Al);},editDerivedAttribute:function(Ak){var Aj=this.getHost(),Am=Ak.item,Ai=f.getUnitFromDataset(this.docModel.datasets,Am.did,Am.t)||Am,Al=this.docModel.findDatasetIdFromUnit(Ai.did),Ah={dsid:Al,did:Ai.did,n:Ai.n,alias:Am.n,forms:Ai.fs,preupdate:function(Ao){var An=Ao.name;Ao.name=Ai.n;Ao=[Ao,AA(Aj,[{act:"renameUnit",id:Ai.did,type:12,name:An}],true)];return Ao;}};if(this.isDynamicLink(Am)){this.docModel.controller.openDynamicLinkEditor(this,Ah,mstrmojo.emptyFn);}else{this.docModel.controller.openDAE(this,Ah,mstrmojo.emptyFn);}},getTemplateAttributes:function l(){return W.call(this,12);},getTemplateHierarchies:function Z(){return W.call(this,14);},getTemplateDEs:function AY(){var Ah=this.getHost(),Ai=Ah.model.data.gsi;return Ai.cols.concat(Ai.rows).filter(function(Aj){return Aj.st===Ab.ConsolidationManaged;});},getUnitInfoInTemplate:function p(Ai){var Aj={},Ah=this.getHost().model.data.gts;[{axis:H,name:"row"},{axis:AJ,name:"col"}].forEach(function(Ak){N.forEach(Ah[Ak.name],function(Am,Al){if(Am.id===Ai){Aj.axis=Ak.axis;Aj.axisName=Ak.name;Aj.tplIdx=Al;Aj.unit=Am;return false;}});});return Aj;},sortGrid:function t(An,Al){var Ao=this.getHost(),Ak=An.t,Am=An.did,Ah=null,Aj=null;if(Ak===AQ.DssTypeMetric){Aj=["","","",1];}else{Ah=this.getUnitInfoInTemplate(An.did);Aj=[Ah.unit.fid||(Ah.unit.fs&&Ah.unit.fs[0].id),"21","",Ah.axis];}var Ap=Ah?Ah.axis:H,Ai=Ao.model.data.gts[(Ap===H?"row":"col")+"SubPos"];Ao.controller.onSort(Ao,Ao.model.getSortGridAction(Ai,[Ak,Am].concat(Aj).join("!"),Ap,Al));},addSortMenu:function a(Ai,Am,Aq){var Ap=this,Ar=this.getHost(),As=Ai.item,Aj=Ai.axis,Ak=Ar.model.data,Ah=Ak.gts,Ao=Ak.gsi.tma,An=S.copy(As);if(As.t===AQ.DssTypeFilter){return ;}if(As.t===AQ.DssTypeDimension){N.forEach((Ah.row||[]).concat(Ah.col||[]),function(Au){if(Au.hid===An.did){An.did=Au.id;An.t=Au.otp;return false;}});}if(Aj!==AH||Ao!==H){if(Ai.zone.id!==AH||Ah.col.length<=1){Am.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",function(){Ap.sortGrid(An,true);});Am.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",function(){Ap.sortGrid(An,false);});}if(Ar.isVIXtab&&Ar.model.isRecursiveAttribute(As.did)&&mstrApp&&mstrApp.isAppStateDefault()&&!mstrApp.isDossier){Am.addMenuItem(mstrmojo.desc(15676,"Custom Sort..."),"xt",function(){if(Ar.customSort){Ar.customSort(N.filterOne(Ah.col.concat(Ah.row),function(Au){return Au.id===As.did;}),Aj);}});}}if(Aq){if(!Ar.excludeData){Am.addMenuItem(mstrmojo.desc(11099,"Advanced Sort..."),"xt",function(){if(Aj===AH){Aj=Ao;}Ar.controller.onGetAdvSortData(Ar,Aj,An.t);});}}else{var Al=Ak.gsi.sorts.some(function(Au){return !!Au.length;}),At=mstrmojo.desc(11699,"Clear Sort");if(Al){Am.addMenuItem(At,"",function(){Ap.submitDropZoneTemplateUpdates([{act:"clearSort"}]);});}}},convertToMetric:function q(An){var Am=this.getHost(),Ah=Am.model&&Am.model.data&&Am.model.data.datasetId,Aj=Am.k,Al=Am.defn.tt,Ak=An.item;if(!Ah){mstrmojo.hash.forEach(this.docModel.datasets,function(Ap,Aq){if(mstrmojo.array.find((Ap.att||[]),"did",Ak.did)!==-1){Ah=Aq;return false;}});}var Ai=mstrmojo.mstr.EnumFunction,Ao=AR.call(this,{act:"addShortcutMetric",nodeKey:Aj,treeType:Al,funcType:Ak.formType===2?Ai.FunctionSum:Ai.FunctionCount,units:[{id:Ak.did,type:Ak.t}],prs:[{n:"UseLookupForAttributes",v:"0"}],dsid:Ah,replaceSourceId:Ak.did},An);this.submitActionForDatasetUpdate(Ao);},getAddMetricNameAction:function(Aq,Am){if(!this.gmZones){return null;}var Ao=this,Ai=0,An=false,Al,Ah=Ao.gmZones.getZoneModelByZoneId((Am===H)?AS:F),Ap={n:"Metric Names",did:D,t:0},Ak=S.clone(Ap),Aj=Ao.gmZones.hGetItemOccurrence(Ak,[H,AJ,F,AS,k]);N.forEach(Ah.items,function(Ar){if(Ao.isMetric(Ar)){Ai++;}});if(Aj.length===0&&Ai<=1){An=true;}if(An){Al={act:"updateTemplate",keyContext:Aq.k,actions:Ao.gmZones.getUpdateMetricNameUnitActions(An,Am)};}return Al;},getAggregateByMetricSubMenu:function(Ai){var Am=this,Al=Ai.item,Ap=f.getUnitFromDataset(this.docModel.datasets,Al.did,Al.t)||Al,Ah=this.id,Aq=this.getHost(),Ak=Aq.k,Aj=Aq.defn.tt,An=this.submitActionForDatasetUpdate,Ao=Aq.getChartStyle&&Aq.getChartStyle()==="NewGraphMatrixVisualizationStyle";return f.getAggregateByMenu(Ap,function(Av,At){var As=Am.allowInsertNewMetric(Ai.zone),Ax=[];if(Ai.zone.id===k){As=false;}if(As&&Ai.useDropzone&&Am.gmZones){var Aw=Am.gmZones.getZoneModelByZoneId((Ai.zone.id===AS)?H:AJ);var Au=Am.getAddMetricNameAction(Aq,Aw.id);if(Au){Ax.push(Au);}Au=Am.gmZones.getUpdateGroupInfoActionForNewMetric(Ai.zone.id,Ai.idx+1,Al.ax===0);if(Au){Ax.push(Au);}}var Ar=[];if(I.isFuncHasUseLookupForAttributeProp(At)){Ar=[{n:"UseLookupForAttributes",v:"0"}];}An.call(mstrmojo.all[Ah],Ax.concat(AR.call(Am,{act:"addShortcutMetric",dsid:Ag.call(Am,Ap.did),nodeKey:Ak,treeType:Aj,funcType:At,units:[{id:Av.did,type:Av.t}],prs:Ar},Ai,{offset:As?1:0,replaceSourceId:As?null:Ap.did,addToTooltip:Ao})));});},getCalculationEditorCfg:function AT(Ah){var Am=this,Ap=this.getHost(),Al=this.submitActionForDatasetUpdate.bind(this),Ak=Ap.k,Ao=Ap.model.data.gsi,Ai=Ap.defn.tt,Aq=Am.allowInsertNewMetric(Ah.zone),Aj=[],An=Ap.getChartStyle&&Ap.getChartStyle()==="NewGraphMatrixVisualizationStyle";if(Ah.zone.id===k){Aq=false;}return f.getCalculationMetricEditor(Ao.mx,Ah.item,function(As,Ar,Aw,At){if(Aq&&Ah.useDropzone&&Am.gmZones){var Av=Am.gmZones.getZoneModelByZoneId((Ah.zone.id===AS)?H:AJ);var Au=Am.getAddMetricNameAction(Ap,Av.id);if(Au){Aj.push(Au);}Au=Am.gmZones.getUpdateGroupInfoActionForNewMetric(Ah.zone.id,Ah.idx+1,Ah.item.ax===0);if(Au){Aj.push(Au);}}Al(Aj.concat(AR.call(Am,{act:"addShortcutMetric",dsid:Ag.call(Am,Ah.item.did),nodeKey:Ak,treeType:Ai,funcType:Aw,funcType2:At,units:[As,Ar]},Ah,{offset:Aq?1:0,replaceSourceId:Aq?null:Ah.item.did,addToTooltip:An})));});},submitAddShortcutMetric:function(An,Az){var A1=this,Au=A1.id,Ar=this.getHost(),Ai=Ar.k,Ak=Ar.defn.tt,A2=A1.submitActionForDatasetUpdate,Ax=A1.allowInsertNewMetric(An.zone),Ap=[],As=Ar.getChartStyle&&Ar.getChartStyle()==="NewGraphMatrixVisualizationStyle";if(An.zone.id===k){Ax=false;}if(Ax&&An.useDropzone&&A1.gmZones){var Am=A1.gmZones.getZoneModelByZoneId((An.zone.id===AS)?H:AJ);var Aw=A1.getAddMetricNameAction(Ar,Am.id);if(Aw){Ap.push(Aw);}Aw=A1.gmZones.getUpdateGroupInfoActionForNewMetric(An.zone.id,An.idx+1,An.item.ax===0);if(Aw){Ap.push(Aw);}}var Ay=Az.item,Aq=Az.extraItem,A0=Az.funcType,Aj=Az.funcType2,Ao=Az.breakBys,Ah=Az.sortBys,Al=Az.prs,Av=[{id:Ay.did,type:Ay.t}],At;if(Aq){Av.push(Aq);}At={act:"addShortcutMetric",dsid:Ag.call(A1,Ay.did),nodeKey:Ai,treeType:Ak,funcType:A0,units:Av,breakBys:Ao,sortBys:Ah};if(Aj){At.funcType2=Aj;}if(Al){At.prs=Al;}if(I.isFuncHasUseLookupForAttributeProp(A0)){At.prs=At.prs||[];At.prs.push({n:"UseLookupForAttributes",v:"0"});}Ap=Ap.concat(AR.call(A1,At,An,{offset:Ax?1:0,replaceSourceId:Ax?null:Ay.did,addToTooltip:As}));A2.call(mstrmojo.all[Au],Ap);},getDynamicBreakByAxisOptions:function(Aj){var Al=this,Ak=Al.getHost(),Am=Ak.model.data.gsi,Ah=[],Ai=function Ai(An){return An.some(function(Ao){return Al.isAttribute(Ao)||Al.isNewDerivedElement(Ao)||Al.isCustomGroup(Ao)||Al.isConsolidation(Ao);});};if(Ai(Am.rows)){Ah.push({n:Aj?mstrmojo.desc(3326,"By Columns"):mstrmojo.desc(122,"Columns"),axes_bitmap:d.DssXmlAxisRowsBit,dmy:"@cols"});}if(Ai(Am.cols)){Ah.push({n:Aj?mstrmojo.desc(3327,"By Rows"):mstrmojo.desc(2968,"Rows"),axes_bitmap:d.DssXmlAxisColumnsBit,dmy:"@rows"});}return Ah;},getBreakByAxisOptions:function(Ai){var Ah=[{n:mstrmojo.desc(4531,"Automatic"),axes_bitmap:AD.DssAxisDynamicShortcutRoot+Ac.DssDynamicShortcutAuto,dmy:"@auto"},{n:Ai?mstrmojo.desc(13408,"By None"):mstrmojo.desc(2057,"None"),axes_bitmap:d.DssXmlAxisPagesBit,dmy:"@p"}];if(Ai){Ah.splice(1,0,{isSeparator:true});}return Ah.concat(this.getDynamicBreakByAxisOptions(Ai));},getBreakByAttributeOptions:function(){var Ah=this,Ai=[],Ak=Ah.getTemplateAttributes().concat(Ah.getTemplateDEs()),Aj=Ah.getPageByUnit();Ai=Ai.concat(Ak);if(Aj&&Aj.srcid){if(N.find(Ai,"did",Aj.srcid)===-1){Ai.push({n:Aj.n,did:Aj.srcid,t:Aj.srct});}}return Ai;},getDynamicBreakByOptions:function(Ah){var Ai=this,Aj=Ai.getBreakByAttributeOptions();if(Ah&&Aj.length){Aj.unshift({isSeparator:true});}return Ai.getBreakByAxisOptions(Ah).concat(Aj);},getDynamicLevelOptions:function(){var Ah=this,Aj=Ah.getBreakByAxisOptions(true),Ai=Ah.getBreakByAttributeOptions();Aj.some(function(Ak){if(Ak.axes_bitmap===d.DssXmlAxisPagesBit){Ak.n=mstrmojo.desc(3329,"Grand Total");return true;}});if(Ai.length){Ai.unshift({isSeparator:true});}return Aj.concat(Ai);},getShortcutMetricSubMenu:function(Al){var Ak=this,Ah=new mstrmojo.ui.menus.MenuConfig(),Am=Al.item,Aj=f.getUnitFromDataset(this.docModel.datasets,Am.did,Am.t)||Am,Ai=Ak.allowInsertNewMetric(Al.zone);if(Aj.t===V.Metric){Ak.addRankShortcutMenu(Al,Ah);Ak.addPercentileShortcutMenu(Al,Ah);Ak.addPercentToTotalShortcutMenu(Al,Ah);Ah.addSeparator();Ak.addPercentOfShortcutMenu(Al,Ah);Ak.addPercentChangeShortcutMenu(Al,Ah);Ak.addDifferenceShortcutMenu(Al,Ah);Ah.addSeparator();Ak.addMovingTotalShortcutMenu(Al,Ah);Ak.addRunningTotalShortcutMenu(Al,Ah);Ak.addPercentRunningTotalShortcutMenu(Al,Ah);}Ah.addSeparator();Ah.addMenuItem(mstrmojo.desc(11491,"More Functions..."),"",function(){AW.call(Ak,Al,"add",!Ai);},Aj);return Ah;},hasReplaceCandidates:function(Ah){var Ai=this.getReplaceCandidates(Ah.zone,Ah.item);return Ai&&Ai.length>0;},getReplaceSubMenu:function(Ai,Ak){var Ao,Ap=Ai.item,Al=Ai.zone,Aj=this.getReplaceCandidates(Al,Ap),Am=this;Ao=Ak?[Ak]:[];Ao.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"scrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:Aj,listHooks:{select:function An(Aq,Ar){Am.unitsDropped(Al,{src:{data:{item:Ar,items:[Ar],dsid:Ar.dsId}},getCtxtDragData:function(){var As=this.src;return(As&&As.data)||{};}},{allowedItems:[Ar],idx:N.find(Al.items,"did",Ap.did)===-1?Ap._renderIdx:N.find(Al.items,"did",Ap.did),edge:mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION.ON,removeReplaced:true});if(this.parent&&this.parent.parent&&this.parent.parent.closeAllMenus){this.parent.parent.closeAllMenus();}}}}]});return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"replaceReference",okVisible:false,cancelVisible:false,contents:Ao,onOpen:function Ah(){this.scrollableContainer.updateScrollbars();}});},addRankShortcutMenu:function s(Ak,Ai){var Aj=this,Am=this.id;function Ah(Ap,Ao,An){Aj.submitAddShortcutMetric(Ak,{item:Ap,funcType:mstrmojo.mstr.EnumFunction.FunctionRank,prs:[{n:"ASC",v:Ao}],breakBys:An});}function Al(An){return f.getRankMetricEditor(An.item,Aj.getDynamicBreakByOptions(),Ah);}Ai.addActionPopupMenuItem(mstrmojo.desc(2789,"Rank"),Am,function(){Ah(Ak.item,"0",[{dmy:"@auto"}]);},Al,"",Ak);},addPercentileShortcutMenu:function r(Aj,Ah){var Ai=this,Am=this.id;function Ak(An){var Ao;if(An.dmy){Ao={dmy:An.dmy};}else{Ao={id:An.did,type:An.t};}Ai.submitAddShortcutMetric(Aj,{item:Aj.item,funcType:mstrmojo.mstr.EnumFunction.FunctionPercentRank,breakBys:[Ao],prs:[{n:"inclusive",v:"False"}]});}function Al(){var Ao=new mstrmojo.ui.menus.MenuConfig(),An=Ai.getDynamicBreakByOptions(true);An.forEach(function(Ap){if(Ap.isSeparator){Ao.addSeparator();return ;}Ao.addMenuItem(Ap.n,"",function(){Ak(Ap);});});return Ao;}Ah.addActionPopupMenuItem(mstrmojo.desc(13409,"Percentile Rank"),Am,function(){Ak({dmy:"@auto"});},Al,"",Aj);},addPercentToTotalShortcutMenu:function AG(Ai,Ao){var Aq=this,Ah=this.id,At=Ai.item,Au=Aq.getHost(),Ap=Aq.submitActionForDatasetUpdate.bind(Aq),An=Aq.getDynamicLevelOptions(),Am=Au.k,Aj=Au.defn.tt,As=Aq.allowInsertNewMetric(Ai.zone),Al=[];if(Ai.zone.id===k){As=false;}function Ar(Av){if(As&&Ai.useDropzone&&Aq.gmZones){var Ax=Aq.gmZones.getZoneModelByZoneId((Ai.zone.id===AS)?H:AJ);var Aw=Aq.getAddMetricNameAction(Au,Ax.id);if(Aw){Al.push(Aw);}Aw=Aq.gmZones.getUpdateGroupInfoActionForNewMetric(Ai.zone.id,Ai.idx+1,Ai.item.ax===0);if(Aw){Al.push(Aw);}}Ap(Al.concat(AR.call(Aq,{act:"addPercentToTotalMetric",nodeKey:Am,treeType:Aj,metric_id:At.did,axes_bitmap:Av.axes_bitmap||0,units:Av.did&&[{id:Av.did,type:Av.t}]},Ai,{offset:As?1:0,replaceSourceId:As?null:Ai.item.did})));}function Ak(){var Av=new mstrmojo.ui.menus.MenuConfig();An.forEach(function(Aw){if(Aw.isSeparator){Av.addSeparator();return ;}Av.addMenuItem(Aw.n,"",function(){Ar(Aw);});});return Av;}Ao.addActionPopupMenuItem(mstrmojo.desc(3323,"Percent to Total"),Ah,function(){Ar({axes_bitmap:AD.DssAxisDynamicShortcutRoot+Ac.DssDynamicShortcutAuto});},Ak,"",Ai);},addPercentOfShortcutMenu:function M(Al,Ah){var Ak=this,Am=this.id;function Aj(Ao,Ap,An){Ak.submitAddShortcutMetric(Al,{item:Ao,funcType:Ap,funcType2:mstrmojo.mstr.EnumFunction.FunctionDivide,breakBys:An,sortBys:[{dmy:"@auto"}]});}function Ai(An){return f.getRelativeReferenceMenu(An.item,mstrmojo.desc(13394,"Percent of:"),Ak.getDynamicBreakByOptions(),Aj);}Ah.addActionPopupMenuItem(mstrmojo.desc(13390,"Percent Of"),Am,function(){Aj(Al.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},Ai,"",Al);},addPercentChangeShortcutMenu:function o(Ak,Ai){var Aj=this,Am=this.id;function Al(Ao,Ap,An){Aj.submitAddShortcutMetric(Ak,{item:Ao,funcType:Ap,funcType2:mstrmojo.mstr.EnumFunction.FunctionVar,breakBys:An,sortBys:[{dmy:"@auto"}]});}function Ah(An){return f.getRelativeReferenceMenu(An.item,mstrmojo.desc(146,"From:"),Aj.getDynamicBreakByOptions(),Al);}Ai.addActionPopupMenuItem(mstrmojo.desc(13391,"Percent Change"),Am,function(){Al(Ak.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},Ah,"",Ak);},addDifferenceShortcutMenu:function K(Ak,Ah){var Aj=this,Am=this.id;function Ai(Ao,Ap,An){Aj.submitAddShortcutMetric(Ak,{item:Ao,funcType:Ap,funcType2:mstrmojo.mstr.EnumFunction.FunctionMinus,breakBys:An,sortBys:[{dmy:"@auto"}]});}function Al(An){return f.getRelativeReferenceMenu(An.item,mstrmojo.desc(146,"From:"),Aj.getDynamicBreakByOptions(),Ai);}Ah.addActionPopupMenuItem(mstrmojo.desc(11495,"Difference"),Am,function(){Ai(Ak.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},Al,"",Ak);},addMovingTotalShortcutMenu:function AI(Aj,Ah){var Ai=this,Am=this.id;function Al(Aq,Ap,Ao,An){Ai.submitAddShortcutMetric(Aj,{item:Aq,funcType:Ap,breakBys:An,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"3"},{n:"OLAPWinStOffset",v:Ao.toString()},{n:"OLAPWinEndType",v:"2"}]});}function Ak(An){return f.getMovingTotalMenu(An.item,Ai.getDynamicBreakByOptions(),Al);}Ah.addActionPopupMenuItem(mstrmojo.desc(13392,"Moving Average"),Am,function(){Al(Aj.item,mstrmojo.mstr.EnumFunction.FunctionOLAPAvg,1,[{dmy:"@auto"}]);},Ak,"",Aj);},addRunningTotalShortcutMenu:function AZ(Al,Ah){var Ak=this,Am=this.id;function Aj(Ap,Ao,An){Ak.submitAddShortcutMetric(Al,{item:Ap,funcType:Ao,breakBys:An,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"0"},{n:"OLAPWinEndType",v:"2"}]});}function Ai(An){return f.getRunningTotalMenu(An.item,Ak.getDynamicBreakByOptions(),Aj);}Ah.addActionPopupMenuItem(mstrmojo.desc(11906,"Running Total"),Am,function(){Aj(Al.item,mstrmojo.mstr.EnumFunction.FunctionOLAPSum,[{dmy:"@auto"}]);},Ai,"",Al);},addPercentRunningTotalShortcutMenu:function B(Ak,Ai){var Aj=this,Am=this.id;function Ah(Ap,An){var Ao=[];An.forEach(function(Aq){if(Aq.dmy){Ao.push({dmy:Aq.dmy});}else{Ao.push({id:Aq.did,type:Aq.t});}});Aj.submitAddShortcutMetric(Ak,{item:Ap,funcType:mstrmojo.mstr.EnumFunction.FunctionOLAPSum,funcType2:mstrmojo.mstr.EnumFunction.FunctionDivide,breakBys:Ao,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"0"},{n:"OLAPWinEndType",v:"2"}]});}function Al(Ap){var Ao=new mstrmojo.ui.menus.MenuConfig(),An=Aj.getDynamicLevelOptions();An.forEach(function(Aq){if(Aq.isSeparator){Ao.addSeparator();return ;}Ao.addMenuItem(Aq.n,"",function(){Ah(Ap.item,[Aq]);});});return Ao;}Ai.addActionPopupMenuItem(mstrmojo.desc(13393,"Percent Running Total"),Am,function(){Ah(Ak.item,[{dmy:"@auto"}]);},Al,"",Ak);},getMultipleMetricsCalcMenus:function w(Ao,An,Aq){var Ap=this,Ar=this.getHost(),Am=this.submitActionForDatasetUpdate.bind(this),Ak=Ar.k,Ai=Ar.defn.tt,Aj=An.map(function(As){return As.did;}),Ah=Ao.items.map(function(As){return As.did;}),Al=-1;Aj.forEach(function(As){var At=N.indexOf(Ah,As);if(At>Al){Al=At;}});return f.getMultipleMetricsCalculationMenus(An,Ar.model.data.datasetId,function(Au){var At={act:"addShortcutMetric",dsid:Ag.call(Ap,Aj),nodeKey:Ak,treeType:Ai,funcType:Au.funcType,funcType2:Au.funcType2,units:Au.items.map(function(Aw){return{id:Aw.did,type:Aw.t};}),position:Al+2,partialRetrieval:{nodes:[Ak]}},Av=[],As;if(Aq){At.useDropzone=Aq;At.dropzoneId=Ao.id;}Av.push(At);if(Ap.gmZones){As=Ap.gmZones.getUpdateGroupInfoActionForNewMetric(Ao.id,Al+1,true);}if(As){Av.push(As);}Am(Av);});},getCreateOrEditElementGroupFunc:function Af(Ai){var Ah=this;return function(){var Am=Ah.getHost(),An=Am.model,Al=Ai.item,Ak=Al.did,Aj=Ah.getUnitInfoInTemplate(Ak),Ap="$GUID_1",Ao=Aj.unit.ost===Ab.ConsolidationManaged&&An.docModel.getDEObject(Ak);Am.controller.openDEEditor(Am,Ao?{deObj:Ao}:{dsId:An.data.datasetId,attId:Ak,attName:Al.n,deId:Ap,getExtraSaveActions:function(){var Aq=Ai.zone,Ar=Ah.getRemoveDropZoneUnitActions(Aq,Al);Ar.push(Ah.getAddDropZoneUnitAction(Aq,{did:Ap,t:AQ.DssTypeConsolidation},Ai.idx));return Ah.getUpdateTemplateAction(Ar);}});};},buildThresholdMenuOptions:function u(Ai,Aj,Ah){mstrmojo.all[this.hostId].model.buildThresholdMenuOptions(Ai,Aj,Ah,this.canSupportImageThreshold());},canSupportImageThreshold:function L(){return false;},getNumberFormatEditorCfg:function Q(Ah){return mstrmojo.all[this.hostId].model.getNumberFormatEditorCfg(Ah);},submitUpdatesAndPersistWidgetXMLIfNecessary:function Ae(Ak,Aj,Ai){var Ah=Ak.model.docModel,Al=Ah.getDataService(),An,Am;if(!Ak.isXMLDirty()){Ak.controller.onSubmitTemplateUpdates(Ak,Aj,Ai);}else{Am={act:"updateTemplate",keyContext:Ak.k,actions:Aj};An=Ak.getPersistAction();Al.submitUpdates([Am,An],mstrmojo.func.wrapMethods(Ak.controller._getXtabCallback(Ak),Ai));Ak.resetXMLDirtyFlag();}},submitActionForDatasetUpdate:function AO(Ai){var Ah=this.docModel;this.submitDropZoneUpdates(Ai,mstrmojo.func.wrapMethods(Ah.getDatasetsUpdateCallback(),Ah.controller._getXtabCallback(this.getHost())));},getVFNotifierBlackList:function AX(Aj,Ah){var Ai=11,Ak=12;switch(Aj){case"XtabGrid":return[g.Rows,g.Columns];case"GraphMatrixVisualizationStyle":case"NewGraphMatrixVisualizationStyle":if(Ah){return[g.Rows,g.Columns,g.XAxis,g.YAxis,g.BreakBy,g.SliceBy,g.Angle,Ai,Ak];}else{return[g.Rows,g.Columns,g.XAxis,g.YAxis,g.BreakBy,g.SliceBy,g.Angle];}case"VIHeatMapVisualizationStyle":return[g.Rows,g.Columns,g.XAxis,g.YAxis,g.Grouping];case"NetworkVisualizationStyle":return[g.Rows,g.Columns,g.XAxis,g.YAxis,g.FromItem,g.ToItem];case"ImageLayoutVisualizationStyle":return[g.GeoAttribute,g.Layout];case"GoogleMapVisualizationStyle":case"ESRIMapVisualizationStyle":case"MapboxVisualizationStyle":return[g.Rows,g.Columns,g.XAxis,g.YAxis,g.SliceBy,g.Angle,g.GeoAttribute,g.Latitude,g.Longitude];case"KPICardVisualizationStyle":return[g.Rows,g.Columns,g.XAxis,g.YAxis,g.Metric,g.BreakBy];default:return[];}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.gm.GMEnums","mstrmojo.gm.GMUtility","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.util.ThresholdUtils","mstrmojo.vi.viz.EnumVisualizationTemplates");mstrmojo.requiresClsP("mstrmojo.vi.ui","SubtotalsWidget","DatasetUnitMenuUtils");mstrmojo.requiresClsP("mstrmojo.vi.models","DropZonesModel","EnumDragSources","_DropZoneCommon");mstrmojo.requiresDescs(101,122,144,190,1018,2453,2968,3582,7974,7975,7976,7978,7979,11099,11699,12143,12144,12145,12146,12147);var r=mstrmojo,s=r.array,R=r.hash,AN=r.func,AK=mstrmojo.gm,H=AK.GMUtility,AT=AK.EnumABLDirection,Z=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION,W=mstrmojo.vi.models.EnumDragSources,Y=mstrmojo.vi.viz.EnumDSSDropZones,M=mstrmojo.vi.util.ThresholdUtils,AE=mstrmojo.vi.ui.DatasetUnitMenuUtils,AQ=3,o=AK.WidgetPropertyTag,j=mstrmojo.vi.enums.EnumFeatures,D=r.vi.viz,L=D.EnumVizStyles,k=L.NEW_GRAPH_MATRIX,z=AK.EnumShape,O=Y.Rows,AI=Y.Columns,AA=Y.XAxis,a=Y.YAxis,I=Y.BreakBy,e=Y.SliceBy,n=Y.ColorBy,U=Y.SizeBy,K=Y.AdditionalMetrics,x=Y.Angle,c=1,P=AK.DualAxisSubAxisBit,X="00000000000000000000000000000000",d=0,AJ={n:"Metric Names",did:X,t:d},h=3,g=-20;function f(AU){return(AU===O||AU===AI||AU===a||AU===AA||AU===I||AU===e);}function C(AU){return AU===a||AU===AA;}function Q(AV,AW){var AX=[];function AU(AY){return !!(AY[0]===g&&AY[1]===g);}s.forEach(AV,function(AY){if(AY[0]===AW){AY[0]=g;}if(AY[1]===AW){AY[1]=g;}if(!AU(AY)){AX.push(AY);}});return AX;}function AM(AV,AZ,AY){var AW=false,AX=[g,g],AU=AY?0:1;s.forEach(AV,function(Aa){if(!AW&&Aa[AU]===g){AW=true;Aa[AU]=AZ;}});if(AW){return AV;}AX[AU]=AZ;AV.push(AX);return AV;}function F(AY,AX,Ah,Ag){var Ac=AY.tgtData,Aa=Ac.edge,AV=Ac&&Ac.tgtInfo,Aj=AV&&(parseInt(AV.axisIndex,10)+(Aa===Z.BELOW?1:0)),Ab=Ag?0:1,AW=Aa===Z.ABOVE||Aa===Z.BELOW,Ai,AU,AZ,Ae,Af,Ad;for(Af=0;Af<AX.length;Af++){Ae=AX[Af];for(Ad=0;Ad<Ae.length;Ad++){if(Ae[Ad]===Ah){if(Ae[1-Ad]===g&&(Aj!==Af||AW)){AX.splice(Af,1);if(Af<Aj){Aj--;}}else{Ae[Ad]=g;}}}}if(Aj>AX.length){Aj=AX.length;}if(Aa===AQ&&Aj<AX.length&&AX[Aj][Ab]===g){AX[Aj][Ab]=Ah;}else{if(Aa===Z.ON){AX[Aj][Ab]=Ah;}else{Ai=AX.slice(0,Aj);AU=AX.slice(Aj);AZ=[g,g];AZ[Ab]=Ah;AX=Ai.concat([AZ],AU);}}return AX;}mstrmojo.vi.models.XtabDropZonesMenuContextType=null;function l(){return mstrmojo.all[this.hostId];}function AH(){var AU=l.call(this);return AU.getHostStructure();}function b(AU){return AN.wrapMethods(AU.controller._getXtabCallback(AU),{success:function(){AU.resetXMLDirtyFlag();}});}function AG(){var Ah=l.call(this),Ad=this.getZoneModelByZoneId(O),AZ=this.getZoneModelByZoneId(AI),AW=this.getZoneModelByZoneId(a),AY=this.getZoneModelByZoneId(AA),AX=[],AU=Ah.GMController.getChartInfo(),AV=[],Ag=[],Ae=Ah.getChartStyle()==="NewGraphMatrixVisualizationStyle";if(AU.isBubbleOrScatter){AV=Ah.copyTrendLineInfoForSwap(AW,AY);}if(AU.isABL){Ag=Ah.copyRefLineInfoForSwap();}AX=AX.concat(this.getSwapDZUnitActions(Ad,AZ,Ae));AX=AX.concat(this.getSwapDZUnitActions(AW,AY,Ae));var Af=this.docModel.getDataService(),Ab=Ah.k,Ac=b(Ah),Aa=[Af.getUpdateTemplateAction(Ab,AX)].concat(AV).concat(Ag);if(Ah.isXMLDirty()){Aa.push(Ah.getPersistAction());}Ah.controller.submitUndoRedoUpdates(Aa,null,Ac);}function AF(AU,AZ){var AW,AX=this,AY=[],AV=[];AW=this.getZoneModelByZoneId(AU);s.forEach(AW.items,function(Aa){if(Aa.t===12){AV.push(Aa);Array.prototype.push.apply(AY,AX.getRemoveDropZoneUnitActions(AW,Aa,AZ));}});return{actions:AY,removedItems:AV};}function AB(AU,AX){var AW=[],AZ=this,AV=this.getZoneModelByZoneId(AU),AY=this.getItemCountInZone(AU);s.forEach(AX,function(Aa){AW.push(AZ.getAddDropZoneUnitAction(AV,Aa,AY++));});return{actions:AW};}function AD(AU,AZ){var AX=[],AY=this,AV=this.getZoneModelByZoneId(AU),AW=AV.items;s.forEach(AZ,function(Ab){var Aa=s.find(AW,"did",Ab.did);if(Aa!==-1&&f(Ab.zone)){AX.push(AY.getAddDropZoneUnitAction(AV,Ab,Aa));}});return{actions:AX};}function AP(AU,AV){var AW=AU.id;if((AW===AA||AW===a)&&this.isMetric(AV)){return true;}return false;}function AO(AU,AX,AW){var AZ="0",AV=AX.item,AY=AX.idx;if(AW){AZ="1";}return function(){var Ae=this.getAddDropZoneUnitAction(AU,AV,AY,{isPrimary:AV.ax===0});Ae.condense=AZ;var Ad=l.call(this),Ah=Ad.id,Ag=Ad.getDocModel().getDataService(),Aa=Ad.k,Ab=Ag.getUpdateTemplateAction(Aa,Ae);var Ac=function(Am){var Ak=r.all[Ah],Al=Ak.model.data,Ai=Al.dz,Aj=[Ai.AngleBy,Ai.Rows,Ai.YAxis,Ai.Columns,Ai.XAxis,Ai.ColorBy,Ai.SizeBy,Ai.AdditionalMetrics],An=Ak.parent.getZonesModel&&Ak.parent.getZonesModel().getUpdateCallback();s.forEach(Aj,function(Ao){if(Ao&&Ao.TemplateMetric){s.forEach(Ao.TemplateMetric,function(Ap){if(Ap.id===AV.id){Ap.cds=Am;return false;}});}});Ak.clientRerenderGraphMatrix();if(An&&An.success){An.success();}};var Af={undo:function(){Ac(!AW);},redo:function(){Ac(AW);}};Ac(AW);Ad.submitUpdatesAndPersistXML([Ab],undefined,Af,true);};}mstrmojo.vi.models.GMDropZones=mstrmojo.declare(mstrmojo.vi.models.DropZonesModel,[mstrmojo.vi.models._DropZoneCommon],{scriptClass:"mstrmojo.vi.models.GMDropZones",dropZones:[],getHostStructure:function AH(){var AU=l.call(this);return AU.getHostStructure();},isZonesEmptyAfterDelItem:function V(AV){var AW={},AX=this.getHostStructure(),AU=AV.zone;AW[O]=AX.Rows.length;AW[AI]=AX.Columns.length;AW[AA]=AX.XAxis.length;AW[a]=AX.YAxis.length;AW[U]=AX.SizeBy.length;AW[I]=AX.BreakBy.length;AW[x]=AX.AngleBy.length;AW[K]=this.getItemCountInZone(K);AW[AU]--;if(AW[O]>0||AW[AI]>0||AW[AA]>0||AW[a]>0||AW[U]>0||AW[x]>0||AW[K]>0){return false;}return true;},getAutoSubtypeControl:function(AW){var Ad,AZ,Ac,AY,Ab;var Aa=mstrmojo.gm.EnumSubtype,AV=mstrmojo.gm.WidgetPropertyTag.SUB_TYPE,AU=l.call(this),AX=AU.GMController.chartSubType,Ae=AU.readGlobalProperty(AV);AZ={scriptClass:"mstrmojo.ui.Checkbox",enabled:!AW,alias:"AutoSubType",checked:Ae===Aa.AUTO,oncheckedChange:function(Af){if(Af.value){AU.writeGlobalProperty(AV,Aa.AUTO);}else{AU.writeGlobalProperty(AV,AX);}}};Ac={scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12135,"Automatic subtype"),setDimensions:function(Ah,Af){var Ag=this.domNode;if(Ag){Ag.style.width=Af;}}};AZ.slot="col1Node";Ac.slot="col2Node";Ad={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",col1Width:AY||"20%",col2Width:Ab||"80%",children:[AZ,Ac]};return Ad;},getSubtypeButtonBar:function B(AY,AV,Ac){var AX=[null,{id:12143,desc:"Automatic",css:"automatic"},{id:12144,desc:"Absolute",css:"clustered"},{id:12145,desc:"Stacked",css:"stacked"},{id:12146,desc:"Clustered",css:"clustered"},{id:12147,desc:"Percent",css:"percent"}],Af=mstrmojo.gm.EnumSubtype,Ab=mstrmojo.gm.WidgetPropertyTag.SUB_TYPE,Aa=l.call(this),Ah=Aa.GMController.chartSubType,AW=Aa.getChartInfo();function Ag(Ak){var Ai=[],Aj;if(Ak.shape===z.BAR){Aj=[Af.CLUSTERED,Af.STACKED,Af.PERCENT];}else{Aj=[Af.ABSOLUTE,Af.STACKED,Af.PERCENT];}if(!Ak.isCombo){Aj.forEach(function(Al){var Am=AX[Al];Ai.push({n:Am?mstrmojo.desc(Am.id,Am.desc):null,id:Al,css:Am?Am.css:null});});}else{Aj.forEach(function(Al){var Am=AX[Al],An=AX[Af.ABSOLUTE];Ai.push({n:(Al===Af.CLUSTERED)?mstrmojo.desc(An.id,An.desc):(Am?mstrmojo.desc(Am.id,Am.desc):null),id:Al,css:Am?Am.css:null});});}return Ai;}function AU(Ak){var Aj=-1,Ai=0;Ak.forEach(function(Al){if(Al.id===Ah){Aj=Ai;}Ai++;});return Aj;}function AZ(Aj,Ai){if(Ai!==Aj&&(Ai===Af.PERCENT||Aj===Af.PERCENT)){Aa.abandonCustomAxisScale();Aa.resetAxisOrigin();}Aa.writeGlobalProperty(Ab,Aj);}var Ae={scriptClass:"mstrmojo.ui.ButtonBar",cssClass:"mstrmojo-chart-brkby-subtype",n:"Subtype",selectedIndex:-1,enabled:!Ac,showIcon:true,alias:"SubtypeBB",useRichTooltip:true,updateTooltipConfig:function Ad(Ak){var An=mstrmojo.dom,Am=Ak.target||An.eventTarget(Ak.hWin,Ak.e),Al=this.getItemFromTarget(Am),Ao=this.getItemNodeFromTarget(Am),Ai=An.position(Ao),Aj=8;if(Al){this.richTooltip={posType:mstrmojo.tooltip.POS_TOPCENTER,content:Al.n,top:Ai.y+Ai.h+Aj,left:Ai.x+Ai.w/2,cssClass:"vi-regular vi-tooltip-A A-center"};}},postselectionChange:function(Ai){AZ(Ai.src.items[Ai.added[0]].id,Ai.src.items[Ai.removed[0]].id);}};Ae.items=Ag(AW);Ae.selectedIndex=AU(Ae.items,Ah);return Ae;},getDropZones:function(){var AU=AH.call(this),AY=l.call(this),Ab=AY.GMController,Aa=Ab.isPie,Ac=Ab.isHistogram,AV=Ab.isBoxPlot,AX=Ab.isWaterfall,AZ=[this.getZone(mstrmojo.desc(14294,"Angle"),x,AU.AngleBy),this.getZone(mstrmojo.desc(6188,"Slice"),e,AU.SliceBy),this.getZone(mstrmojo.desc(2968,"Rows"),O,AU.Rows),this.getZone(mstrmojo.desc(122,"Columns"),AI,AU.Columns),this.getZone(mstrmojo.desc(12086,"XAxis"),AA,AU.XAxis),this.getZone(mstrmojo.desc(12088,"YAxis"),a,AU.YAxis),this.getZone(mstrmojo.desc(11662,"Color By"),n,AU.ColorBy)];var AW=this.getZone(mstrmojo.desc(12173,"Break By"),I,AU.BreakBy);if(AY.getChartInfo().isABL&&AW.items.length>0&&!(AY.getChartStyle()===k)){AW.siblings=[this.getSubtypeButtonBar("Subtype",[],false)];}AZ.push(AW);AZ.push(this.getZone(mstrmojo.desc(12090,"Size By"),U,AU.SizeBy));AZ.push(this.getZone(mstrmojo.desc(2962,"Tooltip"),K,AU.AdditionalMetrics));if(!Aa){AZ=AZ.slice(2);}else{AZ.splice(1,0,AZ.splice(6,1)[0]);}if(Ac){AZ=[this.getZone(mstrmojo.desc(517,"Metric"),a,AU.YAxis),this.getZone(mstrmojo.desc(11806,"Aggregate By"),AA,AU.XAxis),this.getZone(mstrmojo.desc(2962,"Tooltip"),K,AU.AdditionalMetrics)];}else{if(AV){AZ=[this.getZone(mstrmojo.desc(2968,"Rows"),O,AU.Rows),this.getZone(mstrmojo.desc(122,"Columns"),AI,AU.Columns),this.getZone(mstrmojo.desc(12086,"XAxis"),AA,AU.XAxis),this.getZone(mstrmojo.desc(12088,"YAxis"),a,AU.YAxis),AW,this.getZone(mstrmojo.desc(11662,"Color By"),n,AU.ColorBy),this.getZone(mstrmojo.desc(2962,"Tooltip"),K,AU.AdditionalMetrics)];}else{if(AX){AZ=[this.getZone(mstrmojo.desc(2968,"Rows"),O,AU.Rows),this.getZone(mstrmojo.desc(122,"Columns"),AI,AU.Columns),this.getZone(mstrmojo.desc(12086,"XAxis"),AA,AU.XAxis),this.getZone(mstrmojo.desc(12088,"YAxis"),a,AU.YAxis),AW,this.getZone(mstrmojo.desc(2962,"Tooltip"),K,AU.AdditionalMetrics)];}}}this.dropZones=AZ;return{n:l.call(this).defn.ttl,zones:AZ};},updateMetricNameUnit:function(){var AW,AY,AZ,Ab=l.call(this),AU=R.clone(AJ),Aa=this.shouldShowMetricNames(),Ac=this.hGetItemOccurrence(AU),AX=Ac.length,AV=[];if(Aa&&AX===0){AZ=this.getZoneModelByZoneId(O);AU.zone=O;AV.push(this.getAddDropZoneUnitAction(AZ,AU,AZ.items.length));AZ.items.push(AU);}if(!Aa&&AX>0){for(AW=0;AW<AX;AW++){AZ=this.getZoneModelByZoneId(Ac[AW].zoneId);AY=Ac[AW].itemIndex;AV=AV.concat(this.getRemoveDropZoneUnitActions(AZ,AZ.items[AY]));AZ.items.splice(AY,1);}}if(AV.length>0){this.submitUpdatesAndPersistWidgetXMLIfNecessary(Ab,AV,mstrmojo.emptyFn);}},shouldShowMetricNames:function(){var AV=this;if(AV.getMetricCntInZone(AA)>c){return true;}if(AV.getMetricCntInZone(a)>c){return true;}var AU=AV.getZoneModelByZoneId(x)!==undefined;if(AU&&AV.getMetricCntInZone(x)>c){return true;}return false;},hHasMetricInZone:function(AU){var AX,AV=false,AW=this.getZoneModelByZoneId(AU).items,AY=AW.length;for(AX=0;AX<AY;AX++){if(AW[AX].t===4){AV=true;break;}}return AV;},hHasAttributeInZone:function(AU){var AX,AV=false,AW=this.getZoneModelByZoneId(AU).items,AY=AW.length;for(AX=0;AX<AY;AX++){if(AW[AX].t===12){AV=true;break;}}return AV;},getAttributesZone:function(){var AU=AA;if(this.hHasMetricInZone(AA)){AU=a;}return AU;},canSwapAxis:function AC(){return true;},swapAxis:function A(){var AU=l.call(this);AU.clearChartScale();AU.clearContainerFit();AG.call(this);},shouldShowCondensedMenu:function(AU,AV){return AP.call(this,AU,AV);},getCondenseLableHandler:function(AU,AW,AV){return AO(AU,AW,AV);},getUnitMenuItems:function t(Ab,Ar,Aq,AV){if(!Aq){throw new Error(this.scriptClass+"::getUnitMenuItems: Item must be provided.");}var Au=this,Al=mstrmojo.all[this.hostId].zonesModel.id,AU=l.call(this),Ak=AU,As=AU.GMController,Ag=As.getChartInfo(),Aj=Ar.items,An=Aj.length,AW=Ar.id,Ac={zone:Ar,axis:AW,idx:s.find(Aj,"id",Aq.id),cnt:An,item:Aq,metricsAxis:AH.call(this).tma,useDropzone:true},AY;function Am(Aw,Ax){if(Ax.axis===O||Ax.axis===AI){}}if(this.isMetricName(Aq)){if(Ar.id===n){Ab.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[Al].deleteItem(Ar,Ac.idx);});return ;}return ;}var AX=As.attributeSelectionInfo;if(this.isNewDerivedElement(Aq)){if(!mstrApp.isInVFConfigMode){Ab.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",this.getCreateOrEditElementGroupFunc(Ac));}if((AW===O||AW===AI||AW===AA||AW===a)&&Ak.getChartStyle()!=="NewGraphMatrixVisualizationStyle"){Ab.addSeparator();AY=AX&&AX[Aq.id];Ab.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",AU.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:AY});Ab.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",AU.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:AY});if(As.firstRes.gsi.sorts[0].length!==0||As.firstRes.gsi.sorts[1].length!==0){Ab.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",AU.getMenuHandler("clearSort"));}Ab.addSeparator();}}else{if(this.isConsolidation(Aq)){if(AW===O||AW===AI||AW===AA||AW===a){Ab.addSeparator();AY=AX&&AX[Aq.id];Ab.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",AU.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:AY});Ab.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",AU.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:AY});if(As.firstRes.gsi.sorts[0].length!==0||As.firstRes.gsi.sorts[1].length!==0){Ab.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",AU.getMenuHandler("clearSort"));}Ab.addSeparator();}}else{if(this.isMetric(Aq)){if(Aq.um&&!mstrApp.isInVFConfigMode){Ab.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){Au.editDerivedMetric(Ac,"edit");},Ac);Ab.addSeparator();}if(As.supportSort()&&Ag.isABL&&(AW===a||AW===AA)&&Ak.getChartStyle()!=="NewGraphMatrixVisualizationStyle"&&!Ak.excludeData){var Ao=As.metricSelectionInfo;AY=Ao&&Ao[Aq.id];Ab.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",AU.getMenuHandler("sortMetricTitle"),{isAsc:true,selInfo:AY});Ab.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",AU.getMenuHandler("sortMetricTitle"),{isAsc:false,selInfo:AY});Am(Ab,Ac);if(As.firstRes.gsi.sorts[1].length!==0||As.firstRes.gsi.sorts[0].length!==0){Ab.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",AU.getMenuHandler("clearSort"));}}Ab.addSeparator();if(!mstrApp.isInVFConfigMode&&mstrmojo.resolveFeature(j.INSERT_NEW_METRIC)){if(this.docModel.findDatasetIdFromUnit(Aq.did)&&!this.docModel.isFromSolrCube(Aq.did)&&!this.docModel.isFromMDXCube(Aq.did)){Ab.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"",Al,Au.getAggregateByMetricSubMenu,Ac);Ab.addSeparator();}Ab.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),Al,Au.getCalculationEditorCfg,Ac);if(As.getChartInfo().isABL){Ab.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"",Al,Au.getShortcutMetricSubMenu,Ac);}Ab.addMenuItem(mstrmojo.desc(13624,"Create Metric..."),"",function(){Au.newDerivedMetric(Ac);},Ac);Ab.addSeparator();}if(AP.call(this,Ar,Aq)&&Ak.getChartStyle()!=="NewGraphMatrixVisualizationStyle"){var Ap=Aq.cds;var Ai=AO.call(this,Ar,Ac,true),Ah=AO.call(this,Ar,Ac,false);Ab.addToggleMenuItem(mstrmojo.desc(14324,"Condense Axis Labels"),"",Ai,Ah,this.id,Ap);}if(mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(j.NUMBER_FORMATTING)){Ab.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),Al,this.getNumberFormatEditorCfg,Ac);}if(Ar.id===n){this.buildThresholdMenuOptions(Ab,Ac,true);}Ab.addSeparator();if(Ag.isABL&&(Ar.id===AA||Ar.id===a)&&!Ag.isPie&&Ak.getChartStyle()!=="NewGraphMatrixVisualizationStyle"){H.getSubMenu(Ak,Ab,Aq.id,Aq.idx);}Ab.addSeparator();if((AW===AA||AW===a)&&Ak.getChartStyle()!=="NewGraphMatrixVisualizationStyle"){if((Ag.isBubbleOrScatter&&AW===a)||Ag.isABL){if(H.isTrendLineAvailableForMetric(AU,Aq.idx)){Ab.addToggleMenuItem(mstrmojo.desc(12155,"Enable trendline for ##").replace("##",Aq.n),"xt",H.getTrendLineToggleHandler(AU,Aq.id,true),H.getTrendLineToggleHandler(AU,Aq.id,false),Al,H.getTrendLineToggleState(AU,Aq.id));if(H.getTrendLineToggleState(AU,Aq.id)){Ab.addMenuItem(mstrmojo.desc(12163,"Edit trendline..."),"xt",H.getEditTrendLineHandler(AU,Aq.id));}}}}var At=As.getMetricsOnXAxis().concat(As.getMetricsOnYAxis()),Aa=As.model&&As.model.getMetricIDsFromIndex(At),Av=false;if(Aq.id){if(Aa&&Aa.indexOf(Aq.id)>=0){Av=true;}}var AZ=false;if(As.isStacked&&!As.splitPlottingMetrics){AZ=true;}else{if(!Av){AZ=true;}}AZ=AZ||H.isIgnoredMetric(Ak,Aq.idx);if(!AZ){H.getReferenceLineSubMenu(Ak,Ab,Ag.isABL,Aq.id);}Ab.addSeparator();}else{if(this.isAttrCategory(Aq)){var Af=Aq.did||"",Ae=Af?AE.getDatasetFromAttributeId(this.docModel.datasets,Af):null,Ad=!Ae||!this.docModel.isMDXDataset(Ae);if(Aq.da&&Ad&&!mstrApp.isInVFConfigMode){Ab.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){Au.editDerivedAttribute(Ac);},Ac);Ab.addSeparator();}if((AW===O||AW===AI||AW===AA||AW===a)&&Ak.getChartStyle()!=="NewGraphMatrixVisualizationStyle"){AY=AX&&AX[Aq.id];Ab.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",AU.getMenuHandler("sortAttributeTitle"),{isAsc:true,selInfo:AY});Ab.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",AU.getMenuHandler("sortAttributeTitle"),{isAsc:false,selInfo:AY});Am(Ab,Ac);if(As.firstRes.gsi.sorts[0].length!==0||As.firstRes.gsi.sorts[1].length!==0){Ab.addMenuItem(mstrmojo.desc(11699,"Clear Sort"),"xt",AU.getMenuHandler("clearSort"));}Ab.addSeparator();}if(!mstrApp.isInVFConfigMode&&!this.isDynamicLink(Aq)){if(this.allowInsertNewAttribute(Ar)&&((!Ae)||!AE.isCGorCon(Aq,Ae))&&Ad&&mstrmojo.resolveFeature(j.INSERT_NEW_METRIC)){Ab.addMenuItem(mstrmojo.desc(13625,"Create Attribute..."),"",function(){Au.newDerivedAttribute(Ac);},Ac);}if(!AE.hasOldDEOverDatasets(Aq.did,this.docModel.datasets)&&!this.isRecursiveAttribute(Aq)&&!this.isCustomGroup(Aq)){Ab.addMenuItem(mstrmojo.desc(13295,"Create Groups..."),"eg",this.getCreateOrEditElementGroupFunc(Ac));}Ab.addSeparator();}if(this.showNumberFormat(Aq)&&!(As.isHistogram||As.isBoxPlot||As.isWaterfall)){Ab.addEditorMenuItem(mstrmojo.desc(13237,"Number Format"),Al,this.getNumberFormatEditorCfg,Ac);}if(this.shouldShowDisplayFormsMenu(Aq)&&!As.isHistogram){Ab.addEditorMenuItem(mstrmojo.desc(11908,"Display Attribute Forms"),Al,function(){return Au.getDisplayFormsMenu(Aq);});}}}}}Ab.addSeparator();if(Au.hasReplaceCandidates(Ac)&&(!(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||!!mstrmojo.resolveFeature(j.WEB_DRILL_AND_LINK))){Ab.addSubMenuItem(mstrmojo.desc(14003,"Replace with"),"",Al,Au.getReplaceSubMenu,Ac);}Ab.addMenuItem(mstrmojo.desc(1388,"Rename"),"xt",function(){Au.renameItem(AV,Aq);});Ab.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){Au.deleteItem(Ar,Ac.idx);});},isGraphDroppingAllowed:function S(AY,AU,Ac){var AV=AY.id,AZ=true,Ab=l.call(this).GMController,AX=Ab.isBubbleOrScatter();var Aa=this.isMetric(Ac),AW=this.isMetricName(Ac);switch(AV){case O:case AI:if(Aa){AZ=false;}break;case AA:case a:if(!AX&&AW&&this.hHasMetricInZone(AV)){AZ=false;}break;default:break;}return AZ;},allowDropOnTarget:function G(AV,AW){var AU=true;if(AV===W.DATASETS&&this.isMetricName(AW.item)){AU&=(AW.srcZoneId===n);}return AU;},allowMoveMetricName:function J(AU,AV){if(this.isDualAxis(a)&&AU===AI&&AV===AA){return false;}else{if(this.isDualAxis(AA)&&AU===O&&AV===a){return false;}}return true;},isItemDropAllowed:function q(Aq,Af,Ak,AY,AZ){var Ac;if(AY&&AY.src){Ac=AY.src.data.src;}var Ae,Ah=Aq.id,Ad=this.getItemCountInZone(Ah),Al=l.call(this).scriptClass==="mstrmojo.ngm.VisNewGraphMatrix",AV=l.call(this).GMController,An=AV.getChartInfo().isABL,Am=AV.isHistogram,Ab=AV.isBoxPlot,AU=AV.isWaterfall,Ao=AV.isBubbleOrScatter(),AW=AV.isGrid()&&!AV.isEmptyVis(),AX=this.isMetric(Af),Ai=this.isAttrCategory(Af),Aj=this.isMetricName(Af);if(AZ===Z.BELOW||AZ===AQ){AZ=Z.ABOVE;Ak++;}if(AZ===Z.ON){Ae=Aq.items[Ak];if(this.isMetricName(Ae)&&Aq.id!==n){return false;}}if(Af===Aq.items[Ak]){return false;}switch(Ah){case O:case AI:if(AX){return false;}if(Aj&&(Ak<Ad||!this.allowMoveMetricName(Aq.id,Af.zone))){return false;}break;case AA:case a:if(Am){if((this.isAttrCategory(Af)&&Ah===AA)||(Ah===a&&this.isMetric(Af)&&(Ad===0||AZ===Z.ON))){return true;}return false;}else{if(AU||Ab){var Ag=Ah===AA?a:AA;if(this.isMetric(Af)&&this.hHasMetricInZone(Ag)&&(this.getUnitIndexInZone(this.getZoneModelByZoneId(Ag),Af)===-1||this.getZoneModelByZoneId(Ag).items.length>1)){return false;}if(this.isAttribute(Af)&&this.hHasAttributeInZone(Ag)&&(this.getUnitIndexInZone(this.getZoneModelByZoneId(Ag),Af)===-1||this.getZoneModelByZoneId(Ag).items.length>1)){return false;}}else{if(!Aj&&An&&AZ!==Z.ON){return true;}}}if(Aj){if(Ao||An){return false;}else{if(this.hHasMetricInZone(Ah)||AZ===Z.ON){return false;}}}break;case U:if(Ai||Aj){return false;}if(AX){if(Ad>0&&!Ao&&AZ!==Z.ON){if(this.getUnitIndexInZone(Aq,Af)===-1){return false;}}}break;case I:if(AW||AX){return false;}break;case n:if(Ab){if(this.isMetric(Af)){return false;}var Ap=this.hGetItemOccurrence(Af,[I]);if(Ap.length){return false;}}if(AX){if(Ad>0&&AZ!==Z.ON){return false;}}else{if(Ai){if(Ad>0&&this.isMetric(Aq.items[0])&&AZ!==Z.ON){return false;}}}break;case e:if(AX){return false;}break;case x:if(AX){return true;}else{return false;}break;case K:var Ar=this.getMetricCntInZone(Ah),Aa=Ad-Ar;if(Aj){return false;}if(Ai){if(!Al){return false;}Ap=this.hGetItemOccurrence(Af);if(Ap.length<=0){return false;}if(Ar>0){if(Aa===0){if(Ak!==0||AZ!==0){return false;}}else{if(Ak===Aa&&AZ!==0||Ak>Aa-1&&Ak!==Aa){return false;}}}}if(AX){if(Aa>0&&Ak<Aa){return false;}}break;default:break;}return true;},changeToDualAxis:function y(AU){var AV=0,AW=0;s.forEach(AU.items,function(AX){if(AX.ax===0){AV++;}else{if(AX.ax===1){AW++;}}});return AV>0&&AW>0;},getActionsOnUnitDropped:function(A0,Aj,BO,BJ,Ah,AW,Ag,BP){var Am=this,BE,BB,Ao,Af=false,Ar=Am.getZoneModelByZoneId(I),Aq=Am.getZoneModelByZoneId(K),Ac=l.call(Am),A6=Ac.GMController,At=Ac.getChartStyle()==="NewGraphMatrixVisualizationStyle",BL=A6.getChartInfo(),BD=Am.getUnitIndexInZone(Aj,A0),Aa=Am.getUnitIndexInZone(Aq,A0),Ae=Aj.id,Ai=Aj.items,A4=[],An={},Ad={},Ap,AV=Am.isAttrCategory(A0),AZ=Am.isMetricName(A0),Az,A9,BG,BC,BK=BO.src.data.src,BI=Am.isDualAxis(Aj.id),BF=Am.isMetricZone(Ae),Al=function(){if(Ae===n){Ao=Am.hGetItemOccurrence(A0,[O,AI,AA,a,I,e]);if(Ao.length===0&&!Am.isMetric(A0)){var BV=function(BW){var BY=Am.getZoneModelByZoneId(n),BZ,BX;if(BW.id===e||BW.id===I){for(BX=BJ-1;BX>=0;BX--){BZ=s.find(BW.items,"did",BY.items[BX].did);if(BZ!==-1){return BZ+1;}}}return 0;};var BQ,BS,BU;if(A6.isBoxPlot){BQ=Am.getAttributesZone();BS=Am.getZoneModelByZoneId(BQ);BU=BS.items.length;var BR=BQ;BR=Am.getZoneModelByZoneId(BR);s.forEach(BS.items,function(BX,BW){A4.push(Am.getAddDropZoneUnitAction(BR,BX,BU-BW));});}else{BQ=BL.isPie?e:(A6.isGrid()?AA:I);BS=Am.getZoneModelByZoneId(BQ);BU=BV(BS);}A4.push(Am.getAddDropZoneUnitAction(BS,A0,BU));}}else{if((A0.zone===n)&&f(Ae)){A4=A4.concat(Am.getRemoveDropZoneUnitActions(Am.getZoneModelByZoneId(n),A0,1));}else{if(Ae===I&&BL.tp===2&&A6.view.chartInfo&&A6.view.chartInfo.subtype===1){var BT=Am.getZoneModelByZoneId(n),BS;if(!(BT.items.length&&BT.items[0].t===4)){BS=Am.getZoneModelByZoneId(n);A4.push(Am.getAddDropZoneUnitAction(BS,A0));}}}}};AW=(AW===undefined?true:AW);An[AA]=Am.isMetricZone(AA);An[a]=Am.isMetricZone(a);Ad[AA]=Am.getMetricCntInZone(AA);Ad[a]=Am.getMetricCntInZone(a);Ap=Am.getZoneModelByZoneId(x)!==undefined;if(Ap){An[x]=Am.isMetricZone(x);Ad[x]=Am.getMetricCntInZone(x);}else{An[x]=false;Ad[x]=0;}if(Ai.length){if(Ae===n&&Ah!==Z.ON&&(Am.isMetric(A0)||((Am.isAttrCategory(A0)||Am.isMetricName(A0))&&Am.isOnlyMetricZone(Ae)))){Ah=Z.ON;}if(C(Ae)&&this.differInType(A0,Ai[0])){if(AV){An[Ae]=false;}if(this.isMetric(A0)){An[Ae]=true;}Ad[Ae]=1;A4=A4.concat(this.getClearDZUnitActions(Aj));if(At){for(var BE=0;BE<Ai.length;BE++){A4=A4.concat(Am.removeFromTooltipDropZone(Ai[BE],Ae));}}BJ=0;}else{if(Ah===Z.ON){A9=Aj.items.filter(function(BQ){return BQ.dzidx!==undefined?BQ.dzidx===BJ:BQ.idx!==undefined?BQ.idx===BJ:true;})[0];BG=(A0.did===A9.did);BC=(Ae===n);if(Am.getUnitIndexInZone(Aj,A0)!==-1&&A9.did!==A0.did){Ad[Ae]--;}if(Am.isMetric(A0)&&Am.isMetric(A9)){AW=A9.ax===0;}if(BC&&((Am.isAttrCategoryZone(n)&&Am.isMetric(A0))||(Am.isMetricZone(n)&&AV))){if(At){for(var BE=0;BE<Ai.length;BE++){A4=A4.concat(Am.removeFromTooltipDropZone(Ai[BE],Ae));}}A4=A4.concat(Am.getClearDZUnitActions(Aj,false));BJ=0;}else{if(!BG){A4=A4.concat(Am.getRemoveDropZoneUnitActions(Aj,A9));if(At){A4=A4.concat(Am.removeFromTooltipDropZone(A9,Ae));}if(BD<BJ&&BD>=0){BJ--;}}}if(BC&&Am.isAttrCategory(A9)&&!BG){this.removeColorByItemFromBreakByIfExists(A9,A4);}else{Al();}}else{if(Ah===Z.ABOVE&&Am.getUnitIndexInZone(Aj,A0)===-1){Ad[Ae]+=1;if(Ad[Ae]===1&&A0.t===4){An[Ae]=true;}}else{if((Ah===Z.BELOW||Ah===AQ)&&Am.getUnitIndexInZone(Aj,A0)===-1){Ad[Ae]+=1;if(Ad[Ae]===1&&A0.t===4){An[Ae]=true;}if((BJ<Ai.length)&&(BD===-1)){BJ++;}}}}}}else{Ad[Ae]+=1;if(Ad[Ae]===1&&Am.isMetric(A0)){An[Ae]=true;}BJ=0;}if(C(Ae)&&A0.zone===Ae&&BL.isBubbleOrScatter&&Ai.length>1){var A3=(A0.ax===0);if(A3!==AW){s.forEach(Ai,function(BQ){if(BQ.did!==A0.did){A4.push(Am.getAddDropZoneUnitAction(Aj,BQ,BJ,{isPrimary:AW}));}});}}if(Ae===I&&A6.isBoxPlot){Ao=Am.hGetItemOccurrence(A0);for(BE=0,BB=Ao.length;BE<BB;BE++){if(Ao[BE].zoneId===n){Az=Am.getZoneModelByZoneId(Ao[BE].zoneId);A4=A4.concat(Am.getRemoveDropZoneUnitActions(Az,Az.items[Ao[BE].itemIndex],1));if(Ad[Az.id]){Ad[Az.id]--;}}}}if(!At){if(Ae!==K&&Aa!==-1){A4=A4.concat(Am.getRemoveDropZoneUnitActions(Aq,Aq.items[Aa],1));}if(Ae===K){Ao=Am.hGetItemOccurrence(A0);for(BE=0,BB=Ao.length;BE<BB;BE++){if(Ao[BE].zoneId!==K){Az=Am.getZoneModelByZoneId(Ao[BE].zoneId);A4=A4.concat(Am.getRemoveDropZoneUnitActions(Az,Az.items[Ao[BE].itemIndex],1));if(Ad[Az.id]){Ad[Az.id]--;}}}}}else{if(!AZ&&Ae!==K){var AY=Am.getTooltipDropzoneIdx(A0);A4.push(Am.getAddDropZoneUnitAction(Aq,A0,AY,{isPrimary:AW}));}}if(!An[AA]&&!An[a]&&Aj.id!==I&&Ar!==undefined){if(At){var A7=Ar.items;for(var BE=0;BE<A7.length;BE++){A4=A4.concat(Am.removeFromTooltipDropZone(A7[BE],I));}}A4=A4.concat(Am.getClearDZUnitActions(Ar));var Ak=Am.hGetItemOccurrence(AJ,[I]);if(Ak){A4=A4.concat(Am.getClearDZUnitActions(Ar,false));}}if(AV||AZ){if(BD!==-1){if(Ae===I||Ae===e){if(Ai[BD].hidden){A4=A4.concat(Am.getRemoveDropZoneUnitActions(Am.getZoneModelByZoneId(n),A0));}}else{if(Ae===n){Al();}}}else{Al();}}else{if(this.isMetric(A0)){var Av=this.hGetItemOccurrence(A0,[AA,a,x]),A8=([AA,a,x,n,U,K]).filter(function(BQ){return BQ!==A0.zone;}),AX=Am.hGetItemOccurrence(A0,A8),Ab=AX.length>0?1:0;if((BK===W.VIZ_EDITOR||BK===W.VIZ)&&A0.zone&&(A0.zone!==Ae&&(!At||Ae!==K))){A4=A4.concat(Am.getRemoveDropZoneUnitActions(Am.getZoneModelByZoneId(A0.zone),A0,1));if(Av.length&&Ad[Av[0].zoneId]&&Av[0].zoneId!==Ae){Ad[Av[0].zoneId]--;}}else{if(BK===W.DATASETS&&Av.length!==0&&Ae!==n&&Ae!==U&&Ae!==x&&Av[0].zoneId!==Ae&&Av[0].zoneId!==x){if(!At){A4=A4.concat(Am.getRemoveDropZoneUnitActions(Am.getZoneModelByZoneId(Av[0].zoneId),A0,Ab));Ad[Av[0].zoneId]--;}}}}}A4.push(Am.getAddDropZoneUnitAction(Aj,A0,BJ,{isPrimary:AW}));if(!BO.metricNamesHandled){if(!this.isMetricName(A0)){var Ax=R.clone(AJ,[O,AI,AA,a]),BN=Am.hGetItemOccurrence(Ax),Ay=BN.length>0,As=Am.hGetItemOccurrence(AJ,[O]),AU=Am.hGetItemOccurrence(AJ,[AI]),A5=Am.hGetItemOccurrence(AJ,[AA]),Au=Am.hGetItemOccurrence(AJ,[a]),A2=Am.hGetItemOccurrence(AJ,[O,AI,AA,a,I]);if((An[AA]&&Ad[AA]>c)||(An[a]&&Ad[a]>c)||(An[x]&&Ad[x]>c)){Af=true;}var Aw=A2.length?A2[0].zoneId:O,BH=Am.changeToDualAxis(Aj);if(!Ay&&Ae===AA){Aw=AI;}if(!Ay&&BO.dndGM&&Am.isMetric(A0)&&Ah!==Z.ON){if(Ag){if(Ae===AA){Aw=AI;}else{Aw=O;}}else{if(Ae===AA){Aw=a;}else{Aw=AA;}}}var BA=false;if(Am.isAttrCategory(A0)&&Ae!==O&&Ae!==AI&&Ae!==n&&Ae!==I&&Ae!==e){s.forEach(BN,function(BQ){if(BQ.zoneId===Ae){BA=true;}});if(!BF&&(Ae===AA||Ae===a)){BA=true;}if(Af&&Ay&&!BA){if(A5.length){Aw=AI;}else{if(Au.length){Aw=O;}}Aj=Am.getZoneModelByZoneId(Aw);Ax.zone=Aw;A4.push(Am.getAddDropZoneUnitAction(Aj,Ax,Aj.items.length));}}if(!BI&&BH&&(A0.zone===AA||Ae===AA)&&As.length>0){Aw=a;}else{if(!BI&&BH&&(A0.zone===a||Ae===a)&&AU.length>0){Aw=AA;}}if(Af!==Ay||BK===W.VIZ||(Ay&&Ag!==[AI,O].indexOf(BN[0].zoneId)>=0)){A4=A4.concat(Am.getUpdateMetricNameUnitActions(Af,Aw));}}}if(A0.t===4){var A1;if(A6.shallWeUseGroupInfo){if(Am.isMetricName(A0)&&(Ae===AA||Ae===a)){A6.shallWeUseGroupInfo=false;A6.removeGroupInfo();}else{A1=A6.getGroupInfo();if((BL.dirc===AT.VERTICAL&&Ae===a)||(BL.dirc===AT.HORIZONTAL&&Ae===AA)){if(Ah===Z.ON&&A9!==undefined&&Am.isMetric(A9)){A1=Am.replaceItemInGroupInfo(A1,A0.did,AW,A9.did);}else{A1=Am.fillGroupInfo(BO,A1,A0.did,AW);}}A6.setGroupInfo(A1);}}else{if((AW===false&&A6.getSplitPlottingMetrics())){A6.shallWeUseGroupInfo=true;if(BL.isBubbleOrScatter&&Ad[a]===0){A6.horizontalMode=true;}A1=A6.getDummyGroupInfo();A1=Am.fillGroupInfo(BO,A1,A0.did,AW);}else{if(Am.isMetricName(A0)&&(Ae===O||Ae===AI)&&A6.getSecondaryMetrics().length>0){A6.shallWeUseGroupInfo=true;A1=A6.getDummyGroupInfo();}else{if(BP){A6.shallWeUseGroupInfo=true;A1=A6.getDummyGroupInfo(A0.did,AW,Ah===Z.ABOVE);}}}}if(A6.shallWeUseGroupInfo){Ac.setWidgetPropertyValue(o.GROUP_INFO,JSON.stringify(A1));}}Am.checkAndAddThresholdAction(Ae,A0,A4);var BM=function(BS){if(!AV){return BS;}var BR=Am.getZoneModelByZoneId(n),BW=Am.getZoneModelByZoneId(e),BV=Am.getZoneModelByZoneId(I),BY,BT,BU=[],BZ=function(){for(BE=s.find(BR.items,"did",A0.did)-1;BE>=0;BE--){BY=s.find(Aj.items,"did",BR.items[BE].did);if(BY!==-1){return BY+1;}}return 0;},BX=function(Bb,Ba,Bc){Bb.items=Bb.items.filter(function(Bd){return Bd.did!==Bc.did;});Bb.items.splice(Ba,0,Bc);},BQ=function(Ba,Bb){return BS.some(function(Bc){return(Bc.zoneId===Ba.id&&Bc.unitId===Bb.did);});};BS.forEach(function(Ba){if(Ba.act==="addDropZoneUnit"){Aj=Am.getZoneModelByZoneId(Ba.zoneId);A0={t:Ba.unitType,did:Ba.unitId};BJ=Ba.unitPos-1;BJ=BJ>=0?BJ:0;if(Aj.id===I||Aj.id===e){if(s.find(BR.items,"did",A0.did)!==-1){BJ=BZ();Ba.unitPos=BJ+1;}BX(Aj,BJ,A0);}else{if(Aj.id===n){BX(Aj,BJ,A0);if(BW&&s.find(BW.items,"did",A0.did)!==-1){BY=BZ();BX(BW,BY,A0);if(!BQ(BW,A0)){BT=R.clone(Ba);BT.zoneId=BW.id;BT.unitPos=BY+1;BU.push(BT);}}if(BV&&s.find(BV.items,"did",A0.did)!==-1){BY=BZ();BX(BV,BY,A0);if(!BQ(BV,A0)){BT=R.clone(Ba);BT.zoneId=BV.id;BT.unitPos=BY+1;BU.push(BT);}}}}}});return BS.concat(BU);};return A4;},checkAndAddThresholdAction:function AL(AZ,AW,AX){var AV=this.getHost(),AU=AV.getVisType().vt,AY=M.getDefaultGMThreshold(AU);if(this.isMetric(AW)&&AZ===n){M.addThresholds(AV.model,AV,AV.node,AW,AX,AY.colors,AY.ranges,false);return true;}return false;},isDualAxis:function N(AU){var AZ=this,AY=AZ.getZoneModelByZoneId(AU),AW=0,AX=0;var AV=function(Aa){if(Aa===true||Aa===1){AW++;}else{if(Aa===false||Aa===0){AX++;}}};s.forEach(AY.items,function(Aa){if(AZ.isMetric(Aa)){AV(Aa.ax);}});return AW>0&&AX>0;},getUnitDroppedActions:function(Aj,Ac,AV,Ah,AW,Ad,AU,Ag){var AZ=[],Ae=(Ag===O||Ag===AI);AZ=AZ.concat(this.getActionsOnUnitDropped(Aj,Ac,AV,Ah,AW,Ad,AU,Ae));if(Ag){var AY=R.clone(AJ,[O,AI,AA,a]),Ai=this.hGetItemOccurrence(AY),Aa=this.getZoneModelByZoneId(Ag),AX=Aa.items.length,Af;if(Ai.length>0){var Ab=this.getZoneModelByZoneId(Ai[0].zoneId);Af=Ab.items[Ai[0].itemIndex];}else{Af=AY;Af.zone=Ag;}AZ=AZ.concat(this.getActionsOnUnitDropped(Af,Aa,AV,AX,Z.BELOW,true));}return AZ;},getUpdateMetricNameUnitActions:function(Ac,Ad){var AX,AZ,Ab,AV=R.clone(AJ),Ae=this.hGetItemOccurrence(AV),AY=Ae.length,AW=[];if(Ac&&AY===0){Ab=this.getZoneModelByZoneId(Ad);AV.zone=Ad;AW.push(this.getAddDropZoneUnitAction(Ab,AV,Ab.items.length));}if(!Ac&&AY>0){for(AX=0;AX<AY;AX++){Ab=this.getZoneModelByZoneId(Ae[AX].zoneId);AZ=Ae[AX].itemIndex;AW=AW.concat(this.getRemoveDropZoneUnitActions(Ab,Ab.items[AZ]));}}if(AW.length===0&&Ad!==O){if(AY>0){var Aa=false;var AU;for(AX=0;AX<AY;AX++){AU=Ae[AX].zoneId;if(AU===Ad){Aa=true;break;}}if(Aa===false){Ab=this.getZoneModelByZoneId(Ad);AV.zone=Ad;AW.push(this.getAddDropZoneUnitAction(Ab,AV,Ab.items.length));}}}return AW;},getClearDZUnitActions:function(AV,AU){var AW,AX,AY=AV.items,Aa=AY.length,AZ=[];if(AU===undefined){AU=true;}for(AW=Aa-1;AW>=0;AW--){AX=AY[AW];if(this.isMetricName(AX)&&AU){continue;}AZ=AZ.concat(this.getRemoveDropZoneUnitActions(AV,AX));}return AZ;},getClearDZMetricActions:function(AY,Ab,Aa){var AX,Ac,Ae=AY.items,AU=Ae.length,Ad=this.getZoneModelByZoneId(K),AZ=Ad.items.length,AV=Ad.items.map(function(Af){return Af.did;}),AW=[];for(AX=AU-1;AX>=0;AX--){Ac=Ae[AX];if(!this.isMetric(Ac)){continue;}if(AV.indexOf(Ac.did)===-1){Aa.push(Ac.did);}AW.push(this.getAddDropZoneUnitAction(Ad,Ac,AZ++,{isPrimary:Ac.ax===0}));AW=AW.concat(this.getRemoveDropZoneUnitActions(AY,Ac,Ab));}return AW;},removeMetricFromTooltips:function(AU){var AV,AW,Aa=this.getZoneModelByZoneId(K),AX=Aa.items,AZ=AX.length,AY=[];for(AV=AZ-1;AV>=0;AV--){AW=AX[AV];if(this.isMetric(AW)&&AU.indexOf(AW.did)>=0){AY=AY.concat(this.getRemoveDropZoneUnitActions(Aa,AW,1));}}return AY;},getSwapDZUnitActions:function(AY,AW,Ae){var AZ,Ai,Aa=AY.items.slice(0),Ag=AW.items.slice(0),Ah=Aa.length,Af=Ag.length,AX=[],Ac=[],Ab=[],Ad=[],AV,AU=this.isAttrCategoryZone(AY.id);AX=AX.concat(this.getClearDZMetricActions(AY,1,Ad));AX=AX.concat(this.getClearDZMetricActions(AW,1,Ad));for(AZ=0;AZ<Ah;AZ++){Ai=Aa[AZ];if(this.isMetric(Ai)){AV={isPrimary:Ai.ax===0};}else{AV={};}Ac.push(this.getAddDropZoneUnitAction(AW,Ai,AZ,AV));}for(AZ=0;AZ<Af;AZ++){Ai=Ag[AZ];if(this.isMetric(Ai)){AV={isPrimary:Ai.ax===0};}else{AV={};}Ab.push(this.getAddDropZoneUnitAction(AY,Ai,AZ,AV));}if(AU){AX=AX.concat(Ac);AX=AX.concat(Ab);}else{AX=AX.concat(Ab);AX=AX.concat(Ac);}AX=AX.concat(this.removeMetricFromTooltips(Ad));return AX;},getAddDropZoneUnitAction:function w(AZ,Ac,Aa,AW){var Ab=l.call(this),AX=Ab.model,Ad=AX.data,AY=Ab.itemId2DsIdMap[Ac.did]||Ad.datasetId,AU,AV;AW=AW||{};AW.datasetId=AY;AW.datasetType=AY===X?d:h;if(this.isMetricName(Ac)){Aa=AZ.items.length;}AV=this._super(AZ,Ac,Aa,AW);if(AW.isPrimary===undefined||AW.isPrimary===true){AU=P.PRIMARY;}else{AU=P.SECONDARY;}if(AZ.id===AA||AZ.id===a){Ac.ax=AU;AV.ax=AU;if(Ac.zone===AA||Ac.zone===a){Ac.zone=AZ.id;}}if(AZ.items===undefined){return AV;}if(Aa<=AZ.items.length){if(AZ.id===I){s.forEach(AZ.items,function(Ae){if(Ae.did===Ac.did&&Ae.hidden){Ac.hidden=true;}});}AZ.items=AZ.items.filter(function(Ae){return Ae.did!==Ac.did;});AZ.items.splice(Aa,0,Ac);}return AV;},getRemoveDropZoneUnitActions:function E(AU,AV,AW){var AX=this._super(AU,AV,AW);if(AU.items===undefined){return AX;}AU.items=AU.items.filter(function(AY){return AY.did!==AV.did;});return AX;},moveAttributesToZone:function(AZ,AV){var AW,AY,AU;var Aa=l.call(this),AX=Aa.getChartStyle()==="NewGraphMatrixVisualizationStyle";AW=AF.call(this,AZ,1);AY=AB.call(this,AV,AW.removedItems);appendTooltip=AX?AB.call(this,9,AW.removedItems):{actions:[]};if(this.getZoneModelByZoneId(n)){AU=AD.call(this,n,AW.removedItems);return AW.actions.concat(AY.actions).concat(AU.actions).concat(appendTooltip.actions);}return AW.actions.concat(AY.actions).concat(appendTooltip.actions);},deleteItem:function(AV,AU,AX,AW){this.deleteItems([AV.items[AU]],AX,AW);},deleteItems:function(Al,Av,Ao){var A0=l.call(this),Af,Au=A0.GMController,Ag=Au.getChartInfo(),Ad=[],Ab,Aq=R.clone(AJ),AU={},Ar={},At,As,Aj,AZ,Ae,AY,Ak=A0.getChartStyle()==="NewGraphMatrixVisualizationStyle",Ax=this;var Ah=function(BC,A7){Af=BC.zone;if(f(Af)&&Ax.isMetricName(BC)){var A8=Au.dz.XAxis.TemplateMetric||[],BD=Au.dz.YAxis.TemplateMetric||[];if(BC.cs&&(A8.length>1||BD.length>1)){Ad=Ad.concat(Ax.getUpdateMetricNameUnitActions(true,I));}return ;}var A9=Ax.getZoneModelByZoneId(Af),A1=Ax.getZoneModelByZoneId(n),A3=Ax.getZoneModelByZoneId(I),A4=Ax.getZoneModelByZoneId(K),A5=Ax.hGetItemOccurrence(BC,[n]),A6=Ax.hGetItemOccurrence(BC,[AA,a,n,I]);if(BC.cs&&BC.zone===e&&A5.length){Ad=Ad.concat(Ax.getRemoveDropZoneUnitActions(A9,BC));if(A7){Ad=Ad.concat(Ax.getAddDropZoneUnitAction(A1,BC,A1.items.length));Ad=Ad.concat(Ax.getAddDropZoneUnitAction(A3,BC,A3.items.length));}return ;}if(BC.cs&&BC.zone===U&&!A6.length){Ad=Ad.concat(Ax.getRemoveDropZoneUnitActions(A9,BC));Ad=Ad.concat(Ax.getAddDropZoneUnitAction(A4,BC,A4.items.length));return ;}Av=Av||c;Aj=Ax.getZoneModelByZoneId(x)!==undefined;AU[AA]=Ax.isMetricZone(AA);AU[a]=Ax.isMetricZone(a);Ar[AA]=Ax.getMetricCntInZone(AA);Ar[a]=Ax.getMetricCntInZone(a);if(Aj){AU[x]=Ax.isMetricZone(x);Ar[x]=Ax.getMetricCntInZone(x);}else{AU[x]=false;Ar[x]=0;}if(BC.t===4&&(Af===AA||Af===a||Af===x)){Ar[Af]-=1;if(Ar[Af]===0){AU[Af]=false;}}if(!((AU[AA]&&Ar[AA]>Av)||(AU[a]&&Ar[a]>Av)||(AU[x]&&Ar[x]>Av))){At=Ax.hGetItemOccurrence(Aq);AY=At.length;for(As=0;As<AY;As++){Ae=Ax.getZoneModelByZoneId(At[As].zoneId);AZ=At[As].itemIndex;Ad=Ad.concat(Ax.getRemoveDropZoneUnitActions(Ae,Ae.items[AZ]));}}if(!(AU[AA]&&Ar[AA])&&!(AU[a]&&Ar[a])){if(!Ax.isZonesEmptyAfterDelItem(BC)){var A2=Ax.getZoneModelByZoneId(I);if(A2!==undefined){s.forEach(A2.items,function(BE){if(Ax.isMetricName(BE)){var BF=Ax.getZoneModelByZoneId(O);Ad.push(Ax.getAddDropZoneUnitAction(BF,Aq,BF.items.length));}Ad=Ad.concat(Ax.getRemoveDropZoneUnitActions(A2,BE));});}}}if(Ax.isMetricName(BC)&&BC.zone===n){var BA=Ax.hGetItemOccurrence(AJ,[O,AI,AA,a,I,e]);if(BA.length===0){if(Ag.isPie){Ad=Ad.concat(Ax.getUpdateMetricNameUnitActions(true,e));}else{Ad=Ad.concat(Ax.getUpdateMetricNameUnitActions(true,I));}}}if(Ak&&Af!==K){Ad=Ad.concat(Ax.removeFromTooltipDropZone(BC,Af));}Ad=Ad.concat(Ax.getRemoveDropZoneUnitActions(A9,BC));if(Ax.isAttrCategory(BC)&&Af===n){Ax.removeColorByItemFromBreakByIfExists(BC,Ad);}if(Ag.isABL&&BC.t===4){A0.updateMetricShape(BC);var BB=Au.hasGroupInfoStored();if(BB.existing){Ab=BB.gi;if((Ag.dirc===AT.VERTICAL&&Af===a)||(Ag.dirc===AT.HORIZONTAL&&Af===AA)){Ab=Q(Ab,BC.did);}Au.setGroupInfo(Ab);}}};var An=Ax.getZoneModelByZoneId(I);An=An&&An.items.length||0;s.forEach(Al,function(A1){Ah(A1,Ao);});if(Ax.getZoneModelByZoneId(I)!==undefined){var Aw=Ax.getZoneModelByZoneId(I).items.length;if(Aw===0&&An>0){A0.updateSubtype();}}if(Ad.length===0&&!A0.isXMLDirty()){return ;}var AX=this.docModel,Ap=AX.getDataService(),AW=A0.k,Az=b(A0),Ai=Ap.getUpdateTemplateAction(AW,Ad),Am=Ai.partialRetrieval.nodes,AV=[Ai],Ay=AX.getSelectedViUnit(),Ac=Ay&&Ay.boxContent,Aa=!(Ac&&Ac.isInFilterPanel());Ai.partialRetrieval.nodes=Am.concat(Aa?this.docModel.getSourceFilterKeys(AW):[]);if(A0.isXMLDirty()){AV.push(A0.getPersistAction());}return AX&&AX.checkAndNotifyVFChangeOnDZUnitsUpdate({actions:AV,zm:Ax,cmb:true},function(){AV=AX.wrapUnsetVisualizationFilterAction(AV);A0.controller.submitUndoRedoUpdates(AV,null,Az);},function(){A0.controller.submitUndoRedoUpdates(AV,null,Az);});},getHostModel:function(){return this.getHost().model.data;},replaceItemInGroupInfo:function(AU,Ac,Aa,Ab){var AZ=AU.length,AW,AX,AY,AV;AX=Aa?0:1;for(AY=0;AY<AZ;AY++){AW=AU[AY];AV=false;if(AW[AX]===Ac){AW[AX]=g;if(AW[1-AX]===g){AV=true;}}else{if(AW[1-AX]===Ac){AW[1-AX]=g;if(AW[AX]===g){AV=true;}}}if(AV){AU.splice(AY,1);AZ=AU.length;AY-=1;}}for(AY=0;AY<AZ;AY++){AW=AU[AY];if(AW[AX]===Ab){AW[AX]=Ac;break;}}return AU;},fillGroupInfo:function p(AV,AU,Ad,Ab){var AY,AW,Aa,AX=-1,Ac=-1,AZ=AU.length;if(!AV.dndGM){for(AY=0;AY<AZ;AY++){AW=AU[AY];if(AW[0]===Ad){AX=AY;}if(AW[1]===Ad){Ac=AY;}}if((Ab&&AX!==-1)||(!Ab&&Ac!==-1)){return AU;}if(Ab&&Ac!==-1){Aa=Ac;AW=AU[Aa];AW[1]=g;if(AW[0]===g){AW[0]=Ad;return AU;}}if(!Ab&&AX!==-1){Aa=AX;AW=AU[Aa];AW[0]=g;if(AW[1]===g){AW[1]=Ad;return AU;}}AU=AM(AU,Ad,Ab);}else{AU=F(AV,AU,Ad,Ab);}return AU;},removeFromTooltipDropZone:function u(AY,AU){var AX=this,Aa=AX.hGetItemOccurrence(AY),AZ=[],Ab=AX.getZoneModelByZoneId(K);if(f(AU)){for(var AV=0;AV<Aa.length;AV++){var AW=AX.getZoneModelByZoneId(Aa[AV].zoneId);AZ=AZ.concat(AX.getRemoveDropZoneUnitActions(AW,AY));}}else{if(Aa.length===2){for(var AV=0;AV<Aa.length;AV++){if(Aa[AV].zoneId===K){AZ=AZ.concat(AX.getRemoveDropZoneUnitActions(Ab,AY));}}}}return AZ;},getTooltipDropzoneIdx:function AS(AX){var AW=this,AU=AW.getZoneModelByZoneId(K),AY=this.isAttribute(AX),AZ=AW.hGetItemOccurrence(AX);for(var AV=0;AV<AZ.length;AV++){if(AZ[AV].zoneId===K){return AZ[AV].itemIndex;}}if(AY){return AU.items.filter(function(Aa){return AW.isAttribute(Aa);}).length;}else{return AU.items.length;}return index;},getHighlightTargets:function AR(AZ,AW,AY){if(!AZ.items.length){return null;}var AV=true;AY.allowedItems.forEach(function(Aa){if(Aa.t===AZ.items[AY.idx].t){AV=false;}});if(AV){var AX=[],AU;AZ.items.forEach(function(Ab,Aa){AU=Aa+(AW||0);AX.push({idx:AU,edge:AY.edge});},this);return AX;}return null;},getUpdateGroupInfoActionForNewMetric:function(AU,AV,Aa){if(AV<=0){return null;}var AZ=l.call(this),AY=AZ.GMController,Ab,AW,AX;if(AY.shallWeUseGroupInfo){AW=AY.getGroupInfo();Ab=AY.getChartInfo();if(Ab.isABL&&((Ab.dirc===AT.VERTICAL&&AU===a)||(Ab.dirc===AT.HORIZONTAL&&AU===AA))){AX="idx:"+AV;AW=this.fillGroupInfo({dndGM:false},AW,AX,Aa);AY.setGroupInfo(AW);if(AZ.isXMLDirty()){return AZ.getPersistAction();}}}return null;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Point2D","Rect2D","PolyLineObject","PolygonObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFontRotation","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var $C=mstrmojo.chart,$M=mstrmojo.chart.model,$MODEL_ENUMS=$M.enums,$CHART_ENUMS=$C.enums,$FR=$MODEL_ENUMS.EnumDSSGraphFontRotation,$GO=$MODEL_ENUMS.EnumDSSGraphObject,$SHP=$MODEL_ENUMS.EnumShapeType,$GMDLP=$CHART_ENUMS.EnumGraphMatrixDataLabelPosition,kOffset=[[0,0],[0,1],[1,0],[1,1]],kGridGeneric=1,kGridOccupy=2,kGridObject=4,kGridCircle=8,k_MaxCount=10000000;function hPointToIndex(point,isUseFloorValue){var x=point.x-this.Origin.x,y=point.y-this.Origin.y,xIndex,yIndex;if(isUseFloorValue===undefined){isUseFloorValue=true;}if(isUseFloorValue){xIndex=Math.floor(x/this.XUnit);yIndex=Math.floor(y/this.YUnit);}else{xIndex=Math.ceil(x/this.XUnit);yIndex=Math.ceil(y/this.YUnit);}return{flag:!(xIndex<0||yIndex<0),col:xIndex,row:yIndex};}function hGetRectPosition(rect,adjustValue){var x,y,xCover,yCover,temp,result;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;if(x<0||y<0||xCover>this.XCount||yCover>this.YCount||x+xCover>this.XCount||y+yCover>this.YCount){if(!adjustValue){result=null;}else{result={x:Math.max(0,x),y:Math.max(0,y),xRange:Math.min(xCover,this.XCount),yRange:Math.min(yCover,this.YCount)};}}else{result={x:x,y:y,xRange:xCover,yRange:yCover};}return result;}function hIndexToPoint(x,y,point){if(point){point.x=this.Origin.x+x*this.XUnit;point.y=this.Origin.y+y*this.YUnit;return point;}return new $C.Point2D({x:this.Origin.x+x*this.XUnit,y:this.Origin.y+y*this.YUnit});}function hIsOccupiedByHostMarkerRect(hostMarker,x,y){var lX,lY,lXRange,lYRange,lRetVal;lRetVal=hGetRectPosition.call(this,hostMarker,true);lX=lRetVal.x;lY=lRetVal.y;lXRange=lRetVal.xRange;lYRange=lRetVal.yRange;return(x>=lX&&x<=lX+lXRange&&y>=lY&&lY<=lY+lYRange);}function hIsOccupiedByHostMarkerCircle(center,radius,x,y){var i,xIndex,yIndex,point=new $C.Point2D();for(i=0;i<4;++i){xIndex=x+kOffset[i][0];yIndex=y+kOffset[i][1];point=hIndexToPoint.call(this,xIndex,yIndex,point);if(point.Distance(center)<radius){return true;}}return false;}function hGetApproximateCenterFromTopLeft(topLeftPoint,xOffset,yOffset){var point=new $C.Point2D({Point2D:topLeftPoint});point.x+=Math.ceil((0.5*xOffset)*this.XUnit);point.y+=Math.ceil((0.5*yOffset)*this.YUnit);return point;}function hCountOverlapsInRect(startX,startY,xCover,yCover,point,limit){var count=0,i,j,matrix=this.Matrix,tempPoint;for(j=0;j<yCover;++j){for(i=0;i<xCover;++i){count+=matrix[startY+j][startX+i];if(count>limit){return count;}}}tempPoint=hIndexToPoint.call(this,startX,startY);point.x=tempPoint.x;point.y=tempPoint.y;return count;}function hTreatTiltOccupation(occupy,isAdd,is45){return true;}function hGetRectRange(rect){var x,y,xCover,yCover,temp;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;return{xRange:xCover,yRange:yCover};}function hDirection(point1,point2,point3){var dir1,dir2;dir1=new $C.Vector2D({StartPoint:point1,EndPoint:point3});dir2=new $C.Vector2D({StartPoint:point1,EndPoint:point2});return dir1.CrossProduct(dir2);}function hOnSegment(point1,point2,point3){var xMax,xMin,yMax,yMin;if(point1.x<point2.x){xMin=point1.x;xMax=point2.x;}else{xMin=point2.x;xMax=point1.x;}if(point1.y<point2.y){yMin=point1.y;yMax=point2.y;}else{yMin=point2.y;yMax=point1.y;}return !(point3.x<xMin||point3.x>xMax||point3.y<yMin||point3.y>yMax);}function hSegmentsIntersection(point1,point2,point3,point4){var d1=hDirection.call(this,point3,point4,point1),d2=hDirection.call(this,point3,point4,point2),d3=hDirection.call(this,point1,point2,point3),d4=hDirection.call(this,point1,point2,point4);if(d1*d2<0&&d3*d4<0){return true;}if(d1===0&&hOnSegment.call(this,point3,point4,point1)){return true;}if(d2===0&&hOnSegment.call(this,point3,point4,point2)){return true;}if(d3===0&&hOnSegment.call(this,point1,point2,point3)){return true;}if(d4===0&&hOnSegment.call(this,point1,point2,point4)){return true;}return false;}function hSearchAlongAxes(point,markerCenter,originIndex,xyOffset,rectCover,alreadyHasOnePlacement,isYFirst){var position=new $C.Point2D(),limit=1,outerStart,innerStart,outerRange,innerRange,outerOffset,innerOffset,outerCover,innerCover,needCheckForFullAccommodation,i,j,startX,startY,tempPoint1,tempPoint2,distSqr1,distSqr2,result=null;if(isYFirst===undefined){isYFirst=true;}outerStart=isYFirst?originIndex.x:originIndex.y;innerStart=originIndex.x+originIndex.y-outerStart;outerRange=isYFirst?this.XCount:this.YCount;innerRange=this.XCount+this.YCount-outerRange;outerOffset=isYFirst?xyOffset.x:xyOffset.y;innerOffset=xyOffset.x+xyOffset.y-outerOffset;outerCover=isYFirst?rectCover.x:rectCover.y;innerCover=rectCover.x+rectCover.y-outerCover;needCheckForFullAccommodation=(xyOffset.x===-1);for(i=outerStart;
/*lIsFound && */
(i>=0&&i<outerRange);i+=outerOffset){if(i+outerCover>outerRange||i+outerCover<0){continue;}for(j=innerStart;
/*lIsFound &&*/
(j>=0&&j<innerRange);j+=innerOffset){if(j+innerCover>innerRange||j+innerCover<0){continue;}startX=isYFirst?i:j;startY=i+j-startX;if(startX<0||startY<0){continue;}if(hCountOverlapsInRect.call(this,startX,startY,rectCover.x,rectCover.y,position,limit)<=limit){if(alreadyHasOnePlacement){tempPoint1=hGetApproximateCenterFromTopLeft.call(this,point,rectCover.x,rectCover.y);distSqr1=tempPoint1.DistanceSquared(markerCenter);tempPoint2=hGetApproximateCenterFromTopLeft.call(this,position,rectCover.x,rectCover.y);distSqr2=tempPoint2.DistanceSquared(markerCenter);if(distSqr1>distSqr2){result=position;}}else{result=position;alreadyHasOnePlacement=true;}if(!needCheckForFullAccommodation||(isYFirst&&needCheckForFullAccommodation&&(startX+rectCover.x)<=originIndex.x)){return result;}if(isYFirst){i=originIndex.x-rectCover.x;j=innerStart;}}}}return result;}function hSearchInAreas(position,markerCenter,originX,originY,width,height){var atLeastOneFound=false,eachArea,addX,addY,offset,originIndex,xyOffset,rectCover;for(eachArea=0;eachArea<4;++eachArea){addX=(eachArea===0||eachArea===1)?-1:1;addY=(eachArea===1||eachArea===2)?-1:1;offset=(eachArea===0||eachArea===1)?0:1;originIndex=new $C.Point2D({x:originX+offset,y:originY});xyOffset=new $C.Point2D({x:addX,y:addY});rectCover=new $C.Point2D({x:width,y:height});atLeastOneFound=(hSearchAlongAxes.call(this,position,markerCenter,originIndex,xyOffset,rectCover,atLeastOneFound)!==null);}return atLeastOneFound;}function hAreTwoRectsFitPadding(rectDataLabel,rect,padding){return((rectDataLabel.x+rectDataLabel.width+padding<=rect.x)||(rectDataLabel.x>=rect.x+rect.width+padding)||(rectDataLabel.y+rectDataLabel.height+padding<=rect.y)||(rectDataLabel.y>=rect.y+rect.height+padding));}function hAreTwoObjectsFitPadding(center,radius,rectDataLabel,padding){return !((center.Distance(rectDataLabel.GetTopLeft())<radius+padding)||(center.Distance(rectDataLabel.GetBottomLeft())<radius+padding)||(center.Distance(rectDataLabel.GetTopRight())<radius+padding)||(center.Distance(rectDataLabel.GetBottomRight())<radius+padding));}function hPopulateOneColumn(columnObject,columnElementCount,defaultValue){var oneColumnVector=[];for(var i=0;i<columnElementCount;i++){oneColumnVector[i]=defaultValue===0?0:[];}columnObject.push(oneColumnVector);}function hPopulateGrid(props){var propRect,propUnit,propRectWidth,propRectHeight,propUnitWidth,propUnitHeight,i=0,j=0,matrixType,gridOccupyCircleVector;props.MatrixType=props.MatrixType||15;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];if(props&&props.Rect&&props.Unit){propRect=props.Rect;propUnit=props.Unit;propRectWidth=propRect.width;propRectHeight=propRect.height;propUnitWidth=propUnit.width;propUnitHeight=propUnit.height;matrixType=props.MatrixType;this.IsValid=((propRectWidth*propRectHeight>propUnitWidth*propUnitHeight)&&(propRectWidth>=propUnitWidth)&&(propRectHeight>=propUnitHeight));if(!this.IsValid){return false;}this.Origin=propRect.GetTopLeft();this.XCount=Math.ceil(propRectWidth/propUnitWidth);this.YCount=Math.ceil(propRectHeight/propUnitHeight);this.XUnit=propUnitWidth;this.YUnit=propUnitHeight;for(i=0;i<this.YCount;++i){if(matrixType&kGridGeneric){hPopulateOneColumn.call(this,this.Matrix,this.XCount,0);}if(matrixType&kGridOccupy){hPopulateOneColumn.call(this,this.MatrixOccupy,this.XCount,1);}if(matrixType&kGridObject){hPopulateOneColumn.call(this,this.MatrixOccupyObject,this.XCount,1);}if(matrixType&kGridCircle){hPopulateOneColumn.call(this,this.MatrixOccupyCircleObject,this.XCount,1);}}return true;}return false;}mstrmojo.chart.GridMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridMap",IsValid:false,Metric:0,XUnit:0,YUnit:0,XCount:0,YCount:0,Origin:null,Matrix:null,MatrixOccupy:null,MatrixOccupyObject:null,MatrixOccupyCircleObject:null,dataLabelPadding:5,initialized:false,init:function init(props){this.initialized=hPopulateGrid.call(this,props);},populate:function populate(props){this.initialized=this.initialized||hPopulateGrid.call(this,props);},destroy:function destroy(){this.initialized=this.IsValid=false;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];},ToMetric:function ToMetric(){var i,j,count=0,xCount=this.XCount,yCount=this.YCount;for(i=0;i<yCount;++i){for(j=0;j<xCount;++j){if(this.Matrix[i][j]>=2){++count;}}}return count;},ToInspectedMetric:function ToInspectedMetric(shapeInfo){var density={Max:-100,Min:10000000000,Occupied:0,Total:0},rect=shapeInfo.BoundingBox,range=hGetRectPosition.call(this,rect,true),isPie=shapeInfo.Shape===$SHP._PIE,position=shapeInfo.Position,isCircle=isPie||(shapeInfo.Shape===$SHP._CIRCLE),inspectPoint=new $C.Point2D(),x=range.x,y=range.y,i,j,k,radius=shapeInfo.Size,restrictRadius=0,xRange=range.xRange,yRange=range.yRange;if(isPie&&shapeInfo.ExclusiveRect){restrictRadius=0.5*shapeInfo.ExclusiveRect.width;}for(i=0;i<range.xRange;++i){for(j=0;j<range.yRange;++j){x=range.x+i;y=range.y+j;if(x>=this.XCount||y>=this.YCount){continue;}var shouldCount=false;if(isCircle){for(k=0;k<4;++k){var distance,tempIndexY=y+kOffset[k][0],tempIndexX=x+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}inspectPoint=hIndexToPoint.call(this,tempIndexX,tempIndexY,inspectPoint);distance=inspectPoint.Distance(position);if(distance<radius&&distance>=restrictRadius){shouldCount=true;break;}}}else{shouldCount=true;}if(shouldCount){var metric=this.Matrix[y][x];density.Max=Math.max(metric,density.Max);density.Min=Math.min(metric,density.Min);density.Occupied+=metric;}}}density.Total=range.xRange*range.yRange;return density;},veryDense:function veryDense(){return false;},UpdateMatrixCircle:function UpdateMatrixCircle(center,radius,isAdd){var x,y,xRange,yRange,occupyArea=new $C.Rect2D({x:center.x-radius,y:center.y-radius,height:radius*2,width:radius*2}),returnVal,delta=isAdd?1:-1,i,j,gridCellIndexPie,xIndex,yIndex,k,addMetric=0,matrix=this.Matrix,tempIndexX,tempIndexY,point=new $C.Point2D();returnVal=hGetRectPosition.call(this,occupyArea,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){gridCellIndexPie=false;xIndex=x+i;yIndex=y+j;if(xIndex>=this.XCount||yIndex>=this.YCount){continue;}for(k=0;k<4;++k){tempIndexY=y+i+kOffset[k][0];tempIndexX=x+j+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}point=hIndexToPoint.call(this,tempIndexX,tempIndexY,point);if(point.Distance(center)<radius){gridCellIndexPie=true;break;}}if(gridCellIndexPie){matrix[yIndex][xIndex]+=delta;if(matrix[yIndex][xIndex]===1){++addMetric;}}}}this.Metric+=addMetric;return true;},UpdateMatrixDataLabelMarker:function UpdateMatrixDataLabelMarker(isDataLabel,occupy){var x,y,xRange,yRange,i,j,xIndex,yIndex,matrix=this.Matrix,addMetric=0,returnVal;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(matrix[yIndex]&&matrix[yIndex][xIndex]!==undefined){matrix[yIndex][xIndex]+=k_MaxCount;if(matrix[yIndex][xIndex]===k_MaxCount){addMetric++;}}}}this.Metric+=addMetric;return true;},UpdateMatrixPolyLine:function UpdateMatrixPolyLine(occupy,isAdd){var linePoints,i,numberOfLinePoints;if(isAdd===undefined){isAdd=true;}if(occupy===null||occupy===undefined){return false;}linePoints=occupy.mLinePoints;numberOfLinePoints=linePoints.length;for(i=0;i<numberOfLinePoints-1;++i){this.UpdateMatrixLineSegment(linePoints[i],linePoints[i+1],isAdd);}return true;},UpdateMatrixLineSegment:function UpdateMatrixLineSegment(segmentStart,segmentEnd,isAdd){var startPoint=new $C.Point2D({Point2D:segmentStart}),endPoint=new $C.Point2D({Point2D:segmentEnd}),tempPoint,startX,startY,endX,endY,deltaX,deltaY,ratio,temp,interEnd,tempStartY,tempEndX,tempEndY,i,j,matrix=this.Matrix,addMetric=0,subtractMetric=0,yOffset,yExchanged,xIndex,yIndex,delta;if(segmentStart.x>segmentEnd.x){tempPoint=startPoint;startPoint=endPoint;endPoint=tempPoint;}temp=hPointToIndex.call(this,startPoint);startX=temp.col;startY=temp.row;temp=hPointToIndex.call(this,endPoint);endX=temp.col;endY=temp.row;if(startPoint.x!==endPoint.x){deltaX=endPoint.x-startPoint.x;deltaY=endPoint.y-startPoint.y;ratio=deltaY/deltaX;interEnd=new $C.Point2D({Point2D:endPoint});tempStartY=startY;for(i=startX;i<=endX;++i){if(i<0||i>=this.XCount){continue;}deltaX=(i+1)*this.XUnit-startPoint.x;if(i===endX){deltaX=endPoint.x-startPoint.x;}yOffset=deltaX*ratio;interEnd.x=(i+1)*this.XUnit;interEnd.y=startPoint.y+yOffset;temp=hPointToIndex.call(this,interEnd);tempEndX=temp.col;tempEndY=temp.row;yExchanged=false;if(tempStartY>tempEndY){temp=tempStartY;tempStartY=tempEndY;tempEndY=temp;yExchanged=true;}for(j=tempStartY;j<=tempEndY;++j){if(j<0||j>=this.YCount){continue;}xIndex=i;yIndex=j;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}if(!yExchanged){tempStartY=tempEndY;}}}else{if(startY>endY){temp=startY;startY=endY;endY=temp;}for(i=startY;i<=endY;++i){if(i<0||i>=this.YCount){continue;}if(startX<0||startX>=this.XCount){break;}xIndex=startX;yIndex=i;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygon:function UpdateMatrixPolygon(occupy,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);if(occupy.PointInObject(vertex)){occupied=true;break;}}if(!occupied){vertex=hIndexToPoint.call(this,xIndex,yIndex);currentUnit=new $C.Rect2D({x:vertex.x,y:vertex.y,width:this.XUnit,height:this.YUnit});for(k=0;k<polygonPoints.length;++k){if(currentUnit.PointInRectangle(polygonPoints[k])){occupied=true;break;}}}if(!occupied){len=polygonPoints.length;for(k=0;k<4;++k){occupied=false;for(l=0;l<len;++l){var lP1,lP2,lP3,lP4;lP1=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);lP2=hIndexToPoint.call(this,xIndex+kOffset[(k+1)%4][0],yIndex+kOffset[(k+1)%4][1]);lP3=polygonPoints[l];lP4=polygonPoints[(l+1)%len];occupied=hSegmentsIntersection.call(this,lP1,lP2,lP3,lP4);if(occupied){break;}}if(occupied){break;}}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygonWithCanvas:function UpdateMatrixPolygonWithCanvas(occupy,canvas,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}var ctx=canvas.getContext("2d");ctx.globalAlpha=0.01;ctx.beginPath();ctx.moveTo(polygonPoints[0].x,polygonPoints[0].y);for(i=1;i<polygonPoints.length;i++){ctx.lineTo(polygonPoints[i].x,polygonPoints[i].y);}ctx.closePath();ctx.fill();var imagedata=ctx.getImageData(0,0,canvas.width,canvas.height);var data=imagedata.data;function getAlpha(x,y){var i=((y*canvas.width)+x)*4;var a=data[i+3];return a/2;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);var alpha=getAlpha(vertex.x,vertex.y);if(alpha>0){occupied=true;break;}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixRect:function UpdateMatrixRect(occupy,isAdd,rotation){var isTilt,delta,x,y,xRange,yRange,lVal,i,j,addMetric=0,subtractMetric=0,matrix=this.Matrix,indexX,indexY;if(isAdd===undefined){isAdd=true;}rotation=rotation||$FR.Normal;isTilt=(rotation===$FR.Rotate45||rotation===$FR.Rotate315);if(isTilt){return hTreatTiltOccupation.call(this,occupy,(rotation===$FR.Rotate45));}delta=isAdd?1:-1;lVal=hGetRectPosition.call(this,occupy,true);x=lVal.x;y=lVal.y;xRange=lVal.xRange;yRange=lVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){indexY=y+i;indexX=x+j;matrix[indexY][indexX]+=delta;if(isAdd&&matrix[indexY][indexX]===2){addMetric++;}if(!isAdd&&matrix[indexY][indexX]===0){subtractMetric++;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixOccupyCircleObject:function UpdateMatrixOccupyCircleObject(occupy,center,radius){var x,y,xRange,yRange,i,j,xIndex,yIndex,circleOccupied={},returnVal,circleMatrix=this.MatrixOccupyCircleObject;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){if((yIndex<circleMatrix.length)&&(xIndex<circleMatrix[yIndex].length)){circleOccupied.c=center;circleOccupied.r=radius;circleMatrix[yIndex][xIndex].push(circleOccupied);}}}}return true;},UpdateMatrixOccupyObject:function UpdateMatrixOccupyObject(occupy,occupiedObject){var x,y,xRange,yRange,xIndex,yIndex,returnVal,i,j,rectMatrix=this.MatrixOccupyObject;returnVal=hGetRectPosition.call(this,occupy);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;rectMatrix[yIndex][xIndex].push(occupiedObject);}}return true;},UpdateMatrixOccupy:function UpdateMatrixOccupy(isDataLabel,occupy,dataLabelIndex){var x,y,xRange,yRange,returnVal,i,j,occupyMatrix=this.MatrixOccupy,xIndex,yIndex;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(isDataLabel){occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:1});}else{occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:0});}}}},IsFitPaddingWithBorder:function IsFitPaddingWithBorder(occupy,frame){var dataLabelPadding=this.dataLabelPadding;if(occupy.x<frame.x+dataLabelPadding||occupy.x+occupy.width+dataLabelPadding>frame.x+frame.width){return false;}if(occupy.y<frame.y+dataLabelPadding||occupy.y+occupy.height+dataLabelPadding>frame.y+frame.height){return false;}return true;},IsAccomdatableConsiderRotation:function IsAccomdatableConsiderRotation(hostMarker,occupy,position,rotation){var isFound,xCover,yCover,returnVal,markerPosition,col,row,rowColInfo;if(rotation===undefined){rotation=$FR.Normal;}returnVal=hGetRectRange.call(this,occupy);xCover=returnVal.xRange;yCover=returnVal.yRange;if((xCover>this.XCount)||(yCover>this.YCount)){return false;}markerPosition=hostMarker.GetCenter();rowColInfo=hPointToIndex.call(this,markerPosition);if(!rowColInfo.flag){return false;}row=rowColInfo.row;col=rowColInfo.col;isFound=hSearchInAreas.call(this,position,markerPosition,col,row,xCover,yCover);return isFound;},IsAccomdatableDataLabel:function IsAccomdatableDataLabel(hostMarker,occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=2){return false;}if(count===1){if(!hIsOccupiedByHostMarkerRect.call(this,hostMarker,x+j,y+i)){return false;}}}}return true;},IsAccomdatableConsiderLocation:function IsAccomdatableConsiderLocation(occupy,location){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<=xRange;++j){switch(location){case $GMDLP._TOP:if(i===yRange){continue;}break;case $GMDLP._BOTTOM:if(i===-1){continue;}break;case $GMDLP._LEFT:if(j===xRange){continue;}break;case $GMDLP._RIGHT:if(j===-1){continue;}break;default:}count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableConsiderLabelPaddingOnly:function IsAccomdatableConsiderLabelPaddingOnly(occupy,isExceptDataLabel){var returnVal,x,y,xRange,yRange,xIndex,yIndex,count,i;if(isExceptDataLabel){returnVal=this.IsAccomdatableNoPadding(occupy);if(!returnVal){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}return true;}return this.IsAccomdatableNoPadding(occupy);},IsAccomdatableNoPadding:function IsAccomdatableNoPadding(occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableCircle:function IsAccomdatableCircle(center,radius,occupy){var lX,lY,lXRange,lYRange,lVal,lCount,i,j;lVal=hGetRectPosition.call(this,occupy,false);if(lVal===null){return false;}lX=lVal.x;lY=lVal.y;lXRange=lVal.xRange;lYRange=lVal.yRange;for(i=0;i<lYRange;++i){for(j=0;j<lXRange;++j){lCount=this.Matrix[lY+i][lX+j];if(lCount>=2){return false;}if(lCount===1){if(!hIsOccupiedByHostMarkerCircle.call(this,center,radius,lX+j,lY+i)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingCircle:function IsAccomdatableConsiderAccuDistPaddingCircle(center,radius,occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,objects,i,j,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableCircle(center,radius,occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingRect:function IsAccomdatableConsiderAccuDistPaddingRect(occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,i,j,objects,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableNoPadding(occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}return true;},ToDraw:function ToDraw(graphObjManager){var xCount=this.XCount,yCount=this.YCount,matrix=this.Matrix,gridCellOccupied=[],i,j,k,gridPoints,point,tripleId,gridCell,formatLine;for(i=0;i<xCount;++i){for(j=0;j<yCount;++j){if(matrix[i][j]>=1){gridPoints=[];for(k=0;k<5;++k){point=hIndexToPoint.call(this,j+kOffset[k%4][0],i+kOffset[k%4][1]);gridPoints.push(point);}tripleId=new $C.TripleId({ObjectId:$GO.DssGraphDataLine});gridCell=new $C.PolyLineObject({TripleId:tripleId,GraphObjectManager:graphObjManager,PolyLine:gridPoints});formatLine=gridCell.mFormatLinePtr;formatLine.mLineColor=65280;formatLine.mLineThickness=1;gridCellOccupied.push(gridCell);}}}return gridCellOccupied;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","GraphObjectManager","ShapeObject","TextObject","StraightLineObject","GraphCollectionObject","PolygonObject","PolyLineObject","GraphAxisGeneral","AxisObject","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphTitleName","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphAxisLabelLocation");var Ag=mstrmojo.chart,AZ=Ag.ChartConstants,N=Ag.enums,AC=N.EnumCollectionType,Ad=N.EnumGraphMajorType,Al=N.EnumDSSExtraGraphObject,Ar=N.EnumAnchorPoint,a=N.EnumAxisLabelsLocation,Ak=N.EnumAxisDirection,W=N.EnumGraphObjectType,AJ=Ag.gNullGroupId,p=Ag.gNullTripleId,AE=Ag.gNullObjectId,F=0,E=1,AI=2,s=3,r=4,q=5,o=6,w=7,AG=8,D=100,Ao=2;var AX=mstrmojo.chart.model,AL=AX.enums,Aw=AL.EnumDSSGraphProperty,Ax=AL.EnumDSSGraphObject,AQ=AL.EnumDSSGraphTitleName,Aj=AL.EnumDSSExtraGraphProperty,H=AL.EnumDSSGraphFontRotation,Ay=AL.EnumDSSGraphGridLineType,O=AL.EnumDSSGraphAxisLabelLocation;var h=1,AH=2,c=4,z=8;var Y=null,M=null,L=null,Ab=null,y=null;function AT(){if(!this.mUseDepth){return ;}var A4=this.mDeviceDataArea,A3=this.mDepthOffset;A4.x+=A3.x;A4.y+=A3.y;this.mUseDepth=false;}function At(A3){switch(A3.mGridStyle){case Ay.DssGraphGridRegular:case Ay.DssGraphGridBoth:A3.mGridStyle=Ay.DssGraphGridRegular;break;case Ay.DssGraphGridInnerTicks:case Ay.DssGraphGridOuterTicks:case Ay.DssGraphGridSpanningTicks:A3.mShowGridLines=false;break;default:A3.mGridStyle=Ay.DssGraphGridRegular;}}function U(A6,BA,BB){var BD,A8,A7,A3,BE,A9,BF,A5=this.mDeviceDataArea,A4=true,BC=true;if(this.IsVerticalAxis()){A4=(A6.x===A5.x);BC=(A6.x+A6.width===A5.x+A5.width);}else{A4=(A6.y+A6.height===A5.y+A5.height);BC=(A6.y===A5.y);}if(A4&&BC){this.generateGridsByArea(BB);this.MoveGraphObjectList(BA);return ;}BD=this.mUseDepth;A8=A5;A7=this.mMajorGrid.mShowGridLines;A3=this.mMinorGrid.mShowGridLines;BE=this.mMajorGrid.mGridStyle;A9=this.mMinorGrid.mGridStyle;BF=this.mAxisInfo.mAxisLabelsLocation;this.mDeviceDataArea=A6;if(A4||BC){if(A4){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?a.ALL_LEFT:a.ALL_BOTTOM;}else{this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?a.ALL_RIGHT:a.ALL_TOP;}if(!this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){AT.call(this);}}else{AT.call(this);At.call(this,this.mMajorGrid);At.call(this,this.mMinorGrid);}this.generateGridsByArea(BB);this.MoveGraphObjectList(BA);this.mUseDepth=BD;this.mDeviceDataArea.ResetRect(A8);this.mMajorGrid.mShowGridLines=A7;this.mMinorGrid.mShowGridLines=A3;this.mMajorGrid.mGridStyle=BE;this.mMinorGrid.mGridStyle=A9;this.mAxisInfo.mAxisLabelsLocation=BF;}function AN(A3){var A6=this.mDeviceDataArea,A5,A4;switch(A3){case a.ALL_BOTTOM:A5=A6.GetBottomLeft();A4=A6.GetBottomRight();if(this.mChartContextPtr.mIsTimeSeriesChart){A5.x=0;}break;case a.ALL_TOP:A5=A6.GetTopLeft();A4=A6.GetTopRight();break;case a.ALL_LEFT:A5=A6.GetTopLeft();A4=A6.GetBottomLeft();break;case a.ALL_RIGHT:A5=A6.GetTopRight();A4=A6.GetBottomRight();break;default:A5=null;A4=null;break;}return{Start:A5,End:A4};}function A1(A3){var A7,A4,A6,A5;if(this.mUseDepth){return ;}A5=AN.call(this,A3);A7=A5.Start;A4=A5.End;A6=new Ag.StraightLineObject({TripleId:this.mTripleId,GraphObjectManager:this,StartPoint:A7,EndPoint:A4,GraphCollectionObject:this.mpAxisLineSet});this.mManagerGraphObjectList.push(A6);this.mpAxisLineSet.AddGraphObject(A6);}function B(){var A4,A5,A7,A8,BB=[],A3,A9,BA,A6;A7=this.IsVerticalAxis()?a.ALL_LEFT:a.ALL_BOTTOM;A8=this.IsVerticalAxis()?a.ALL_RIGHT:a.ALL_TOP;if(this.hasDepthAxisLine(A7)){BA=AN.call(this,A7);}else{if(this.hasDepthAxisLine(A8)){BA=AN.call(this,A8);}else{return ;}}A4=BA.Start;A5=BA.End;BB.push(A4);BB.push(A5);BB.push(A5.Shifted(this.mDepthOffset));BB.push(A4.Shifted(this.mDepthOffset));A6=new Ag.TripleId({ObjectId:Ax.DssGraphFrame});A3=new Ag.PolygonObject({TripleId:A6,GraphObjectManager:this,Polygon:BB});A3.mIsDetectable=false;A9=A3.GetFormatFill();A9.MakeDarker(this.IsVerticalAxis()?0.8:0.6);this.mManagerGraphObjectList.push(A3);}function f(BC,A7,A9,BB,BD,A3){var A5,BA,A6,A4,A8;BA=this.mChartContextPtr.CalculateDepthOffset(A9,this.mDepthDirection,true);A5=new Ag.Point2D({x:BA.OffsetX,y:BA.OffsetY});A3.splice(0,A3.length);A6=new Ag.Point2D();A4=new Ag.Point2D();A6.init({Point2D:BB});A4.init({Point2D:BD});if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){A6.init({Point2D:BD});A4.init({Point2D:BB});}A4=A4.Shifted(this.mDepthOffset);A8=new Ag.Point2D();A8.Reset(0,0);if(this.IsVerticalAxis()){A8.x=this.IsLeftDirection()?A9:-A9;}else{A8.y=this.IsDownDirection()?-A9:A9;}switch(A7){case Ay.DssGraphGridRegular:A3.push(A6);A3.push(A6.Shifted(this.mDepthOffset));A3.push(A4);break;case Ay.DssGraphGridBoth:if(this.hasDepthAxisLine(BC)||this.HasLabelsOnBothSides()){A3.push(A6.Shifted(A8));}A3.push(A6);A3.push(A6.Shifted(this.mDepthOffset));A3.push(A4);if(!this.hasDepthAxisLine(BC)||this.HasLabelsOnBothSides()){A3.push(A4.Shifted(-A8));}break;case Ay.DssGraphGridInnerTicks:if(this.hasDepthAxisLine(BC)){A3.push(A6);A3.push(A6.Shifted(A5));}else{A3.push(A4);A3.push(A4.Shifted(A8));}break;case Ay.DssGraphGridOuterTicks:if(this.hasDepthAxisLine(BC)){A3.push(A6.Shifted(A8));A3.push(A6);}else{A3.push(A4);A3.push(A4.Shifted(-A8));}break;case Ay.DssGraphGridSpanningTicks:if(this.hasDepthAxisLine(BC)){A3.push(A6.Shifted(A8));A3.push(A6);A3.push(A6.Shifted(A5));}else{A3.push(A4.Shifted(A8));A3.push(A4.Shifted(-A8));}break;}}mstrmojo.chart.Axis=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Axis",mDeviceDataArea:null,mTickLength:-1,mUseDepth:false,mDepth:0,mDepthDirection:0,mDepthOffset:null,mManagerGraphObjectList:null,mpMajorGridSet:null,mpMinorGridSet:null,mpAxisLabelSet:null,mpAxisLineSet:null,mIsUniformAxis:false,maxLabelLength:-1,hasLabelCreated:false,hasMajorTickCreated:false,hasMinorTickCreated:false,mLabelInterval:0,resizeAction:-1,mLabelList:null,restrictWidth:null,restrictHeight:null,mIsShown:true,mIntegrity:15,init:function AM(A3){this._super(A3);var A4=this.mChartContextPtr;this.mLabelList=[];if(this.mUseDepth){this.mDepthOffset=new Ag.Point2D();}this.mManagerGraphObjectList=[];if(!!A3.IsUA){this.mIsUniformAxis=true;}if(this.mIsUniformAxis){this.restrictHeight=this.restrictWidth=-1;}this.mAxisInfo=new Ag.GraphAxisGeneral(A3);this.mMajorGrid={mShowGridLines:true,mGridStyle:Ay.DssGraphGridRegular,mUseManualGrid:false,mGridInterval:0};this.mMinorGrid={mShowGridLines:false,mGridStyle:Ay.DssGraphGridNone,mUseManualGrid:false,mGridInterval:0};switch(A3.AxisDirection){case Ak.AD_X:this.mTickLength=A4.mGraphHeight/D+1;break;case Ak.AD_Y:this.mTickLength=A4.mGraphWidth/D+1;break;case Ak.AD_Z:this.mTickLength=2;break;}this.mTickLength=Math.max(4,this.mTickLength);},SetDeviceDataArea:function I(A3){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Ag.Rect2D({Rect2D:A3});}else{this.mDeviceDataArea.ResetRect(A3);}},IsReverseOrder:function X(){return this.mAxisInfo.mAxisDrawInReverse;},SetIntegrity:function t(A3){this.mIntegrity=A3;if((A3&h)===0){this.mAxisInfo.mShowAxisLine=false;this.mMajorGrid.mGridStyle=Ay.DssGraphGridNone;}if((A3&AH)===0){this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Ay.DssGraphGridNone;}if((A3&z)===0){this.mMinorGrid.mShowGridLines=false;this.mMinorGrid.mGridStyle=Ay.DssGraphGridNone;}if((A3&c)===0){this.mAxisInfo.mShowAxisLabels=false;}},HasLabelsOnBothSides:function Ac(){return(this.mAxisInfo.mAxisLabelsLocation===a.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===a.ALL_LEFT_RIGHT)&&!(this.mChartContextPtr.mIsTimeSeriesChart);},IsVerticalAxis:function J(){return this.mAxisInfo.mAxisDirection===Ak.AD_Y;},IsLeftDirection:function Ap(){return this.mDepthDirection>90&&this.mDepthDirection<270;},IsDownDirection:function AB(){return this.mDepthDirection>180;},HasOuterTicks:function AV(A3){return A3===Ay.DssGraphGridOuterTicks||A3===Ay.DssGraphGridBoth||A3===Ay.DssGraphGridSpanningTicks;},HasTwoGridLineParts:function AK(A3){return this.HasLabelsOnBothSides()&&(A3===Ay.DssGraphGridInnerTicks||A3===Ay.DssGraphGridOuterTicks||A3===Ay.DssGraphGridSpanningTicks);},IsLogarithmic:function Aq(){return false;},getIndex:function Q(){switch(this.mTripleId.mObjectId){case Ax.DssGraphO1Body:return F;case Ax.DssGraphO2Body:return E;case Ax.DssGraphX1Body:return AI;case Ax.DssGraphY1Body:return s;case Ax.DssGraphY2Body:return r;case Ax.DssGraphY3Body:return q;case Ax.DssGraphY4Body:return o;case Ax.DssGraphZBody:return w;case Ax.DssGraphX2Body:return AG;default:return 0;}},GetInterlacedGridId:function A2(){return Al.DssGraphO1Interlaced+this.getIndex();},ReserveTitleArea:function e(A6){var A4,A3,A8,A5,A7;if(!this.mAxisInfo.mShowAxisTitle){return ;}A4=this.getIndex();A3=Ag.gAxisObjects[A4].mTitleId;if(A3.mObjectId===Ag.gNullObjectId){return ;}A8=new Ag.TripleId({ObjectId:A3.mObjectId,SeriesId:Ag.gNullSeriesId,GroupId:AJ});A5=new Ag.Rect2D();this.InitObjectSet(A8,W.GOT_AXIS_TITLE);A7=new Ag.TextObject({TripleId:A8,GraphObjectManager:this,rect:A5,ParentObject:this.mpAxisTitleSet});this.mpAxisTitleSet.AddGraphObject(A7);A7.SetText(this.mAxisTitle);this.mGraphObjectList.push(A7);this.ReserveTitle(A6,false);},ReserveTitle:function Aa(A8,A5){var A7,A4,A3,A6;if(!this.mAxisInfo.mShowAxisTitle){return ;}A7=this.mGraphObjectList[0];A4=A7.GetBoundingRect();A3=A5?-1:1;A6=((this.IsVerticalAxis()?A4.width:A4.height)+Ao)*A3;switch(this.mAxisInfo.mAxisLabelsLocation){case a.ALL_BOTTOM:case a.ALL_BOTTOM_TOP:A8.height-=A6;break;case a.ALL_TOP:if(this.mTripleId.mObjectId===Ax.DssGraphO1Body){A8.height-=A6;}else{A8.y+=A6;A8.height-=A6;}break;case a.ALL_LEFT:case a.ALL_LEFT_RIGHT:A8.x+=A6;A8.width-=A6;break;case a.ALL_RIGHT:if(this.mTripleId.mObjectId===Ax.DssGraphO1Body){A8.x+=A6;A8.width-=A6;}else{A8.width-=A6;}break;}},UpdateTitleLocation:function As(A8){var A7,A5,A4,A3,A6,A9;if(!this.mAxisInfo.mShowAxisTitle){return ;}A7=this.mGraphObjectList[0];if(this.mChartContextPtr.mManualLayoutMode&&!this.mChartContextPtr.mRecalculateFrame){this.MoveTitleForManual(A7);return ;}A5=A7.GetBoundingRect();A4=this.GetLabelOffset(this.mAxisInfo.mAxisLabelsLocation);if(this.IsVerticalAxis()){A3=A8.y+A8.height/2+A4.y;}else{A3=A8.x+A8.width/2+A4.x;}A6=(this.IsVerticalAxis()?A5.width:A5.height)/2+Ao;switch(this.mAxisInfo.mAxisLabelsLocation){case a.ALL_BOTTOM:case a.ALL_BOTTOM_TOP:A7.MoveTo(A3,A8.y+A8.height+A6,Ar.CENTER);break;case a.ALL_TOP:if(this.mTripleId.mObjectId===Ax.DssGraphO1Body){A7.MoveTo(A3,A8.y+A8.height+A6,Ar.CENTER);}else{A7.MoveTo(A3,A8.y-A6,Ar.CENTER);}break;case a.ALL_LEFT:case a.ALL_LEFT_RIGHT:A7.MoveTo(A8.x-A6,A3,Ar.CENTER);break;case a.ALL_RIGHT:if(this.mTripleId.mObjectId===Ax.DssGraphO1Body){A7.MoveTo(A8.x-A6,A3,Ar.CENTER);}else{A7.MoveTo(A8.x+A8.width+A6,A3,Ar.CENTER);}break;}A9=A7.mTripleId;A5=A7.GetBoundingRectNoRotation();this.mChartContextPtr.PutLocation(this.getAxisTitleLocationId(A9.mObjectId),A5);},generateAxisLine:function Az(A3){this.CreateAxisLine();return this.MoveGraphObjectList(A3);},CreateAxisLine:function l(){var A3;if(this.mUseDepth){B.call(this);return ;}if(!this.mAxisInfo.mShowAxisLine){return ;}A3=new Ag.TripleId({ObjectId:this.mTripleId.mObjectId});this.InitObjectSet(A3,W.GOT_AXIS_LINE);switch(this.mAxisInfo.mAxisLabelsLocation){case a.ALL_BOTTOM_TOP:A1.call(this,a.ALL_BOTTOM);A1.call(this,a.ALL_TOP);break;case a.ALL_LEFT_RIGHT:A1.call(this,a.ALL_LEFT);A1.call(this,a.ALL_RIGHT);break;default:A1.call(this,this.mAxisInfo.mAxisLabelsLocation);break;}},ReserveDepthAxisLine:function An(A6,A4,A3){var A5;if(!this.mUseDepth){return ;}A5=new Ag.Point2D({Point2D:this.mDepthOffset});A5.x=Math.abs(A5.x);A5.y=Math.abs(A5.y);if(A4){A5.x=-A5.x;A5.y=-A5.y;}if(this.mAxisInfo.mAxisDirection===Ak.AD_X||A3){if(this.mDepthDirection<180){A6.y+=A5.y;A6.height-=A5.y;}else{A6.height-=A5.y;}}else{if(this.mAxisInfo.mAxisDirection===Ak.AD_Y||A3){if(this.mDepthDirection<90||this.mDepthDirection>270){A6.width-=A5.x;}else{A6.x+=A5.x;A6.width-=A5.x;}}}},TrimMarginsForDepthAxis:function AS(A6,A7){var A5,A3,A4;A5=A6;A3=A7;if(!this.mUseDepth){A4={HighMargin:A3,LowMargin:A5};return A4;}if(this.IsVerticalAxis()){if(this.mDepthDirection<180){A3+=this.mDepthOffset.y;}else{A5-=this.mDepthOffset.y;}}else{if(this.mDepthDirection<90||this.mDepthDirection>270){A3-=this.mDepthOffset.x;}else{A5+=this.mDepthOffset.x;}}A3=(A3>=0)?A3:0;A5=(A5>=0)?A5:0;A4={HighMargin:A3,LowMargin:A5};return A4;},getDepthMargin:function AA(A6,A7){if(!this.mUseDepth){return null;}var A4=this.mDepthOffset,A5=A6,A3=A7;switch(this.mAxisInfo.mAxisLabelsLocation){case a.ALL_LEFT:case a.ALL_RIGHT:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A4.y>0){A5=A4.y;}else{A3=-A4.y;}}else{if(A4.y>0){A3=A4.y;}else{A5=-A4.y;}}break;case a.ALL_BOTTOM:case a.ALL_TOP:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A4.x>0){A3=A4.x;}else{A5=-A4.x;}}else{if(A4.x>0){A5=A4.x;}else{A3=-A4.x;}}break;case a.ALL_LEFT_RIGHT:case a.ALL_BOTTOM_TOP:break;default:return null;}return{highMargin:A3,lowMargin:A5};},GetLabelOffset:function S(A3,A4){if(!A4){A4=new Ag.Point2D();}A4.Reset(0,0);if((!this.mUseDepth)||this.hasDepthAxisLine(A3)){return A4;}A4.ResetPoint(this.mDepthOffset);return A4;},GenerateGridLinesEx:function Ah(){this.GenerateGridLines(this.mDeviceDataArea,0,this.mGraphObjectList);},GenerateGridLines:function d(A4,A5,A3){if((this.mMajorGrid.mShowGridLines&&this.mMajorGrid.mGridStyle!==Ay.DssGraphGridNone)||(this.mMinorGrid.mShowGridLines&&this.mMinorGrid.mGridStyle!==Ay.DssGraphGridNone)){U.call(this,A4,A3,true);}},GenerateInterlacedGrids:function b(A4,A5,A3){if(this.mAxisInfo.mUseInterlacedGrids){U.call(this,A4,A3,false);}},MoveGraphObjectList:function C(A4){var A3,A5;A3=this.mManagerGraphObjectList.length;for(A5=0;A5<A3;++A5){A4.push(this.mManagerGraphObjectList[A5]);}this.mManagerGraphObjectList.splice(0,this.mManagerGraphObjectList.length);},GenerateOneLineObject:function Av(A6,A5,A4){var A3;A3=new Ag.PolyLineObject({TripleId:A6,GraphObjectManager:this,PolyLine:A5,GraphCollectionObject:A4});A4.AddGraphObject(A3);this.mManagerGraphObjectList.push(A3);},SetDepthAndDirection:function Ae(A5,A3){var A4;this.mUseDepth=true;this.mDepth=A5;this.mDepthDirection=A3;A4=this.mChartContextPtr.CalculateDepthOffset(this.mDepth,this.mDepthDirection);this.mDepthOffset.x=A4.OffsetX;this.mDepthOffset.y=A4.OffsetY;},getAxisTitleLocationId:function Af(A3){switch(A3){case AQ.DssGraphTitleCategory:return Aw.DssGraphTitleXLocation;case AQ.DssGraphTitleY1:return Aw.DssGraphTitleY1Location;case AQ.DssGraphTitleY2:return Aw.DssGraphTitleY2Location;case AQ.DssGraph3DRowTitle:return Aw.DssGraph3DRowTitleLocationNEW;case AQ.DssGraph3DColTitle:return Aw.DssGraph3DColTitleLocationNEW;case AQ.DssGraph3DLYTitle:return Aw.DssGraph3DLYTitleLocation;case AQ.DssGraph3DRYTitle:return Aw.DssGraph3DRYTitleLocation;default:return 0;}},MoveLabel:function AY(A9,A3,A5,BB){var A8,A6,BD,A7,A4;if(BB===undefined){BB=Ag.Axis.gLabelMargin;}A8=A9.GetTransformedRect(true);BD=A9.mFormatFontPtr.mFontRotation;if(Y===null){Y=new Ag.Point2D();}else{Y.Reset(0,0);}switch(BD){case H.Rotate45:case H.Rotate315:case H.Normal:if(BD===H.Rotate45||BD===H.Rotate315){A6=(BD===H.Rotate45)?1:-1;A5.Reset((A5.x-A6*A5.y)*Math.SQRT1_2,(A6*A5.x+A5.y)*Math.SQRT1_2);A3.Reset((A3.x-A6*A3.y)*Math.SQRT1_2,(A6*A3.x+A3.y)*Math.SQRT1_2);}Y.Reset(A8.width/2,A8.height/2);break;case H.Rotate90:Y.Reset(A8.width/2,(A8.height+1)/2);break;case H.Rotate180:Y.Reset((A8.width+1)/2,(A8.height+1)/2);break;case H.Rotate270:Y.Reset((A8.width+1)/2,A8.height/2);break;case H.Custom:break;default:}A7=0.1;var BC=0,BA=0;if(Math.abs(A5.x)<A7||Math.abs(A5.y)<A7){if(Math.abs(A5.x)<A7&&A5.y<0){Y.y=A8.height-Y.y;}else{if(A5.x<0&&Math.abs(A5.y)<A7){Y.x=A8.width-Y.x;}}A4=Y.x*Math.abs(A5.x)+Y.y*Math.abs(A5.y)+BB;BC=A3.x+A4*A5.x;BA=A3.y+A4*A5.y;}else{if(A5.x>0&&A5.y<0){Y.y=-(A8.height-Y.y);}else{if(A5.x<0&&A5.x>0){Y.x=-(A8.width-Y.x);}else{if(A5.x<0&&A5.y<0){Y.Reset(-(A8.width-Y.x),-(A8.height-Y.y));}}}BC=A3.x+BB*A5.x+Y.x;BA=A3.y+BB*A5.y+Y.y;}if(BD===H.Rotate45||BD===H.Rotate315){A6=(BD===H.Rotate45)?-1:1;BC=(BC-A6*BA)*Math.SQRT1_2;BA=(A6*BC+BA)*Math.SQRT1_2;}A9.MoveTo(Math.floor(BC+(BC<0?-0.5:0.5)),Math.floor(BA+(BA<0?-0.5:0.5)),Ar.CENTER);},MoveTitleForManual:function AO(A5){if(!this.mChartContextPtr.mManualLayoutMode){return ;}var A4=A5.mTripleId,A3=this.mChartContextPtr.GetLocationRect(this.getAxisTitleLocationId(A4.mObjectId));if(A3){A5.SetRect(A3);A5.CalculateDeviceRect();}else{A5.mIsShown=false;}},InitObjectSet:function AP(A6,A5){var A4,A3=AC.CT_LINE;switch(A5){case W.GOT_AXIS_TITLE:A4=this.mpAxisTitleSet;A3=AC.CT_TEXT;break;case W.GOT_AXIS_LABEL:A4=this.mpAxisLabelSet;A3=AC.CT_TEXT;break;case W.GOT_AXIS_LINE:A4=this.mpAxisLineSet;break;case W.GOT_MAJOR_GRID:A4=this.mpMajorGridSet;break;case W.GOT_MINOR_GRID:A4=this.mpMinorGridSet;break;case W.GOT_INTERLACED_GRID:A4=this.mpInterlacedGridSet;A3=AC.CT_GENERAL_SHAPE;break;default:}if(A4!==null&&A4!==undefined){return ;}if(this.mTripleId.mSeriesId>0){A4=this.GetGraphObject(A6,false);}if(!A4){A4=new Ag.GraphCollectionObject({TripleId:A6,GraphObjectManager:this,CollectionType:A3});this.AddToMap(A4);}switch(A5){case W.GOT_AXIS_TITLE:this.mpAxisTitleSet=A4;break;case W.GOT_AXIS_LABEL:this.mpAxisLabelSet=A4;break;case W.GOT_AXIS_LINE:this.mpAxisLineSet=A4;break;case W.GOT_MAJOR_GRID:this.mpMajorGridSet=A4;break;case W.GOT_MINOR_GRID:this.mpMinorGridSet=A4;break;case W.GOT_INTERLACED_GRID:this.mpInterlacedGridSet=A4;break;default:}},LoadProperties:function AU(){var A6,A9,A8=this.mChartContextPtr,A7,A5,A3,A4;if(A8.mIsGraphMatrix){A9=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Ay.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){A6=A8.GetProperty(Aw.DssGraphStyleMajor,A9);if(this.mMajorGrid.mShowGridLines&&A6){this.mMajorGrid.mGridStyle=A6;}}return ;}A9=new Ag.TripleId({ObjectId:this.mTripleId.mObjectId});A6=A8.GetProperty(Aw.DssGraphShow2DAxisLabels,A9);if(A6){this.mAxisInfo.mShowAxisLabels=A6!==false;}if(A8.GetGraphMajorType()===Ad.GMT_GAUGE){return ;}A7=0;switch(this.mTripleId.mObjectId){case Ax.DssGraphO1Body:A7=Aw.DssGraphShow2DXTitle;break;case Ax.DssGraphO2Body:A7=Aw.DssGraphShowTitleSeries;break;case Ax.DssGraphX1Body:A7=Aw.DssGraphShow2DXTitle;break;case Ax.DssGraphY1Body:A7=Aw.DssGraphShow2DY1Title;break;case Ax.DssGraphY2Body:case Ax.DssGraphX2Body:A7=Aw.DssGraphShow2DY2Title;break;case Ax.DssGraphY3Body:case Ax.DssGraphY4Body:break;case Ax.DssGraphZBody:A7=Aw.DssGraphShow3DColTitle;break;default:}A6=A8.GetProperty(A7,p);if(A7!==0&&A6){this.mAxisInfo.mShowAxisTitle=A6!==false;}if(A8.isUADataAreaOutput()){this.mAxisInfo.mShowAxisLabels=false;this.mAxisInfo.mShowAxisTitle=false;}A5=this.mAxisInfo.mShowAxisTitle;if(A5){A4=Ag.gAxisObjects[this.getIndex()].mTitleId;A6=A8.GetProperty(Aw.DssGraphTextContent,A4);if(A4.mObjectId!==AE&&A6){this.mAxisTitle=A6;}}A6=A8.GetProperty(Aj.DssGraphUseInterlacedGrid,A9);if(A6){this.mAxisInfo.mUseInterlacedGrids=A6!==false;}A6=A8.GetProperty(Aw.DssGraphShow2DAxisMajor,A9);if(A6){this.mMajorGrid.mShowGridLines=A6!==false;}A6=A8.GetProperty(Aw.DssGraphStyleMajor,A9);if(this.mMajorGrid.mShowGridLines&&A6){this.mMajorGrid.mGridStyle=A6;}A6=A8.GetProperty(Aw.DssGraphShow2DAxisMinor,A9);if(A6){this.mMinorGrid.mShowGridLines=A6!==false;}A6=A8.GetProperty(Aw.DssGraphStyleMinor,A9);if(this.mMinorGrid.mShowGridLines&&A6){this.mMinorGrid.mGridStyle=A6;}A6=A8.GetProperty(Aw.DssGraphManualMinor,A9);if(A6){this.mMinorGrid.mUseManualGrid=A6!==false;}A6=A8.GetProperty(Aw.DssGraphCountMinor,A9);if(A6){this.mMinorGrid.mGridInterval=A6;}A6=A8.GetProperty(Aw.DssGraphShow2DAxisLine,A9);if(A6){this.mAxisInfo.mShowAxisLine=A6;}switch(A8.GetGraphMajorType()){case Ad.GMT_POLAR:case Ad.GMT_RADAR:return ;default:break;}A6=A8.GetProperty(Aw.DssGraph2DSide,A9);if(A6){if(A6===O.DssGraphAxisLabelLowSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?a.ALL_LEFT:a.ALL_BOTTOM;}else{if(A6===O.DssGraphAxisLabelHighSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?a.ALL_RIGHT:a.ALL_TOP;}else{if(A6===O.DssGraphAxisLabelBothSides){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?a.ALL_LEFT_RIGHT:a.ALL_BOTTOM_TOP;}}}}},generateGridsByArea:function u(){},GetOneGridLine:function Z(A4,A7,A6,A3,A5,A8){if(this.mUseDepth){f.call(this,A4,A7,A6,A3,A5,A8);return ;}A8.splice(0,A8.length);M=new Ag.Point2D({Point2D:A3});L=new Ag.Point2D({Point2D:A5});A8.push(M);A8.push(L);if(Ab===null){Ab=new Ag.Point2D();}else{Ab.Reset(0,0);}if(y===null){y=new Ag.Point2D();}else{y.Reset(0,0);}if(this.IsVerticalAxis()){if(A4===a.ALL_RIGHT){y.x=A6;}else{Ab.x=-A6;}}else{if(A4===a.ALL_TOP){y.y=-A6;}else{Ab.y=A6;}}switch(A7){case Ay.DssGraphGridRegular:break;case Ay.DssGraphGridBoth:A8[0].x+=Ab.x;A8[0].y+=Ab.y;if(this.HasLabelsOnBothSides()){A8[1].x-=Ab.x;A8[1].y-=Ab.y;}else{A8[1].x+=y.x;A8[1].y+=y.y;}break;case Ay.DssGraphGridInnerTicks:if(A4!==a.ALL_RIGHT&&A4!==a.ALL_TOP){A8[1].x=A8[0].x-Ab.x;A8[1].y=A8[0].y-Ab.y;}else{A8[0].x=A8[1].x-y.x;A8[0].y=A8[1].y-y.y;}break;case Ay.DssGraphGridOuterTicks:if(A4!==a.ALL_RIGHT&&A4!==a.ALL_TOP){A8[1].x=A8[0].x+Ab.x;A8[1].y=A8[0].y+Ab.y;}else{A8[0].x=A8[1].x+y.x;A8[0].y=A8[1].y+y.y;}break;case Ay.DssGraphGridSpanningTicks:if(A4!==a.ALL_RIGHT&&A4!==a.ALL_TOP){A8[1].x=A8[0].x-Ab.x;A8[1].y=A8[0].y-Ab.y;A8[0].x+=Ab.x;A8[0].y+=Ab.y;}else{A8[0].x=A8[1].x-y.x;A8[0].y=A8[1].y-y.y;A8[1].x+=y.x;A8[1].y+=y.y;}break;default:}},hasDepthAxisLine:function g(A3){if(!this.mUseDepth){return false;}switch(A3){case a.ALL_LEFT:case a.ALL_LEFT_RIGHT:return(this.mDepthDirection<90||this.mDepthDirection>270);case a.ALL_RIGHT:return(this.mDepthDirection>90&&this.mDepthDirection<270);case a.ALL_BOTTOM:case a.ALL_BOTTOM_TOP:return(this.mDepthDirection<180);case a.ALL_TOP:return(this.mDepthDirection>180);default:return false;}},TrimAxisPadding:function P(){},resetRestrictSpace:function Au(A3){if(A3!==undefined){this.restrictWidth=A3.width;this.restrictHeight=A3.height;}else{this.restrictWidth=this.restrictHeight=-1;}},GetAxisLabelRotation:function Am(){},isBaseLineQualified:function G(A3){return false;},liftedFromZero:function A0(){return false;},SetTrimWithPadding:function AD(){},GetPositionAtTick:function k(){},getLabelRotation:function AR(){if(this.mpAxisLabelSet){var A3=this.mpAxisLabelSet.GetFormatFont();return A3.mFontRotation;}return -1;},GetOuterTickLength:function n(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength;}return 0;},updateMaxLabelLength:function AW(A4,A3){if(A4>0){if(A3===undefined){A3=false;}if(A3){A4=this.calculateMaxAxisSpace(A4);}}this.maxLabelLength=A4;},calculateMaxAxisSpace:function R(A4){var A3=this.mChartContextPtr.GetGraphMatrixContext();A4-=(this.GetOuterTickLength()+A3.getPadding(AZ.kLabelToChart));if(this instanceof mstrmojo.chart.CategoryAxis){A4-=A3.getPadding(AZ.kCategoricalLabelToTick);}else{A4-=A3.getPadding(AZ.kNumericLabelToTick);}return Math.max(A4,0);},getNextStatus:function Ai(A4){var A6=-1,A7=1,BB=!this.IsVerticalAxis(),BA=0,A9=1,A8=2,A5=this.getStatus(),A3=this.mLabelInterval;if(BB){if(A4===BA){if(A3>1){A5=A6;}}else{if(A4===A8){if(A3>=2&&A5!==A7){A5=A6;}}}}else{if(A4===A9){if(A3!==1){A5=A6;}}else{if(A3<2){A5=A6;}}}return A5;},clearTickObjects:function AF(A9,A7){var A6,A4=this.mChartContextPtr.getUtiliy().tripleId,A5=this.mGraphObjectList,A3=A5.length,A8=A7?this.mpMajorGridSet:this.mpMinorGridSet;if(A8){A8.ClearCollection();}for(A6=A3-1;A6>=0;A6--){if(A4.equal(A5[A6].mTripleId,A9)){A5.splice(A6,1);}}},restoreLabels:function K(A4){var A6;if(this.hasLabelCreated){var A5,A3=this.mpAxisLabelSet.GetCollectionSize(),A8=A3<=0,A7;if(A3===0){A3=this.mLabelList.length;}for(A6=0;A6<A3;++A6){if(A8){A5=this.mLabelList[A6];}else{A5=this.mpAxisLabelSet.GetObjectByIndex(A6);}if(!!A5===false){continue;}A7={Stringent:true,Restroke:true,TextWidthLimit:this.maxLabelLength,DivideByWord:true};if(this instanceof mstrmojo.chart.CategoryAxis&&this.mChartContextPtr.mIsGraphMatrix){if(this.mWordWrap===false){A7.LineCount=1;}else{A7.LineCount=2;}}A5.Restore(A7);if(A4){A5.mIsShown=true;}}}},checkShownLabelCount:function x(A7){var A8=this.mLabelList,A3=A8.length,A4=0,A9=-2,A5=-1;for(var A6=0;A6<A3;A6++){if(A8[A6]&&A8[A6].mIsShown){A4++;}if(A7!==undefined&&A4>=A7){return A9;}}if(A7!==undefined){return A5;}return A4;},checkCondense:function A(){return false;},getCondenseStatus:function V(){return undefined;},getUniformAxisLabelsInfo:function j(A6){var A5=0,A7=[],A3=this.mLabelList.length;while(A5<A3){var A4=this.mLabelList[A5];if(A4.mIsShown){if(A6){if(A6.CheckTruncated){if(A4.mIsTruncated===false){continue;}}}A7.push({Text:A4.mText,Rect:A4.GetBoundingRect()});}++A5;}return A7;}});Ag.Axis.gLabelMargin=4;}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","FractionNumber","Utility");mstrmojo.requiresClsP("mstrmojo.chart","TextObject","ChartAdvFormat","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumDSSGraphProperty");var d=mstrmojo.chart,K=d.enums,c=mstrmojo.VisUtility,e=K.EnumGraphMajorType,j=K.EnumNumberCategory,N=5,u=5;var W=mstrmojo.chart.model,M=W.enums,o=M.EnumDSSGraphType,w=M.EnumDSSGraphObject,t=M.EnumDSSGraphProperty,F=mstrmojo.num,D=mstrmojo.chart.common,G=D.Utility,A=G.tripleId;var B=["[SF:-3]","[SF:-6]","[SF:-9]"];var k=new d.TripleId(),n=new d.ChartAdvFormat(),L=new d.ChartAdvFormat(),h=new d.ChartAdvFormat();function Z(AB){switch(AB){case w.DssGraphY1Label:case w.DssGraphY2Label:case w.DssGraphY3Label:case w.DssGraphY4Label:case w.DssGraphX1Label:case w.DssGraphX2Label:return true;}return false;}function O(AB){switch(AB.mObjectId){case w.DssGraphUserLabel1:return w.DssGraphY1Label;case w.DssGraphUserLabel2:return w.DssGraphY2Label;case w.DssGraphUserLabel3:return w.DssGraphX1Label;case w.DssGraphUserLabel4:return w.DssGraphX2Label;default:return AB.mObjectId;}}function E(AE){var AB,AC=this.mSuffix,AD=AE;if(AD.length&&this.mNumber<0){if(AD[0]==="-"&&this.mPrefix!=="-"){AD=AD.substring(1);this.mPrefix="-"+this.mPrefix;}}AB=this.mPrefix;if(this.mHasBracket){if(AD.length>=2&&AD[0]==="("&&AD[AD.length-1]===")"){AD="("+AB+AD.substring(1,AD.length-1)+AC+")";}else{AD=AB+AD+AC;}}else{AD=AB+AD+AC;}if(this.mIsFinal){this.SetText(AD);}else{this.mText=AD;}}function S(AB){return(AB.search(/\?\/[0-9\?]/)!==-1);}function U(AB){return AB.replace(/[^"]E-/,"E");}function x(AH,AG,AL,AJ){var AE,AF,AD,AI,AB,AK,AC;AC=AL;AE=new D.FractionNumber();AF=new D.FractionNumber();AD=new D.FractionNumber();AI=new D.FractionNumber();AF.mNumerator=0;AF.mDenominator=AD.mDenominator=AD.mNumerator=1;AI.mDenominator=AF.mDenominator+AD.mDenominator;AI.mNumerator=AF.mNumerator+AD.mNumerator;AK=AH>=0;AH=Math.abs(AH);AB=Math.floor(AH);AH-=AB;while(AI.mDenominator<AC){if(Math.abs(AI.ToDouble()-AH)<1e-15){AE.Copy(AI);break;}if(AI.ToDouble()>AH){AD.Copy(AI);}else{AF.Copy(AI);}AI.mDenominator=AF.mDenominator+AD.mDenominator;AI.mNumerator=AF.mNumerator+AD.mNumerator;}if(AI.mDenominator>=AC){if(AH-AF.ToDouble()<AD.ToDouble()-AH){AE.Copy(AF);}else{AE.Copy(AD);}}if(AB>0){AE.mNumerator+=AB*AE.mDenominator;}return AE.ToString(AG,AK,AJ);}function X(AH,AC,AE){var AF,AD,AJ,AB=10,AI,AK;AK=AC.indexOf("# ",0);AI=(AK!==-1);for(AF=5;AF>0;AF--){AJ="/";for(AD=0;AD<AF;AD++){AJ+="?";}AK=AC.indexOf(AJ,0);if(AK!==-1){for(AD=1;AD<AF;AD++){AB*=10;}break;}}var AG;AG=x(AH,AI,AB,AE);return AG;}function s(AN,AH){var AE,AP,AO,AL=AH.lastIndexOf("/"),AC=AH.substr(AL+1,AH.length);AE=(AC.indexOf("?")===-1);if(AE){var AG=AN<0,AM=(AH.indexOf("# ",0)!==-1),AB,AD=AC.ToInteger();AN=Math.abs(AN);AB=Math.floor(AN);AN-=AB;var AI=Math.floor(AN*AD+0.5);AB+=AI/AD;AI%=AD;if(!AM){AI+=AB*AD;AB=0;}if(AB===0&&AI===0){return"0";}if(AB!==0){AO=AB.ToString();if(AI!==0){AO+=" ";}}if(AI!==0){AO=AI.ToString();AO+="/";AO+=AD.ToString();}AP=AO;if(AG){AP="-"+AP;}return AP;}var AK=this.mTripleId.mObjectId,AF=Z.call(this,AK),AJ=AK===w.DssGraphDataText;AP=X(AN,AH,!AF&&!AJ);return AP;}function C(AG){var AF,AE,AC,AB="",AD="";AF='"';AE=AG.indexOf(AF);if(AE===-1){return{Format:AG,HasLeftOver:true,Prefix:AB,Suffix:AD};}AC=AG.indexOf(AF,AE+1);if(AC===-1){return{Format:AG,HasLeftOver:false,Prefix:AB,Suffix:AD};}if(AE===0){AB=AG.substring(1,AC);AG=AG.substring(AC+1);}AE=AG.lastIndexOf(AF);if(AE===-1){return{Format:AG,HasLeftOver:true,Prefix:AB,Suffix:AD};}AC=AG.lastIndexOf(AF,AE-1);if(AC===-1){return{Format:AG,HasLeftOver:false,Prefix:AB,Suffix:AD};}if(AE===AG.length-1){AD=AG.substring(AC+1,AE);AG=AG.substring(0,AC);}return{Format:AG,HasLeftOver:true,Prefix:AB,Suffix:AD};}function R(AE,AL){AL=AL||false;var AN,AP="",AF="",AI,AO,AH,AC,AD,AG,AK,AB,AM=false,AJ;AI=AE.indexOf(";");AN=false;if(AI!==-1){AP=AE.substring(0,AI);AF=AE.substring(AI+1);}else{AP=AE;if(AL===false){AF=AP;AM=true;}}AO=AF.length>0;AH=AO;if(AH){AH=AF[0]==="[";if(AH){AD=AF.indexOf("]");AH=AD!==-1;if(AH){AC=AF.substring(0,AD+1);AF=AF.substring(AD+1);}}}if(AF.length>=2){AN=(AF[0]==="("&&AF[AF.length-1]===")");}if(AN){AF=AF.substring(1,AF.length-1);}AG=false;if(this.mNumber>=0){AJ=C.call(this,AP);AP=AJ.Format;AG=AJ.HasLeftOver;AK=AJ.Prefix;AB=AJ.Suffix;AJ=C.call(this,AF);AF=AJ.Format;}else{AJ=C.call(this,AF);AF=AJ.Format;AG=AJ.HasLeftOver;AK=AJ.Prefix;AB=AJ.Suffix;AJ=C.call(this,AP);AP=AJ.Format;}if(AN){AF="("+AF+")";}if(AH){AF=AC+AF;}if(AO){if(AM){AE=AF;}else{AE=AP+";"+AF;}}else{AE=AP;}return{Format:AE,HasLeftOver:AG,HasBracket:AN,Prefix:AK,Suffix:AB};}function J(AC,AF){AF=(AF!==undefined)?AF:true;var AB,AE,AG,AD;if(this.mPrefix.length>0||this.mSuffix.length>0){return AC;}AB=AC.substring(0);AD=R.call(this,AB,AF);AB=AD.Format;AE=AD.Prefix;AG=AD.Suffix;if(AE.length){this.mPrefix=AE;}if(AG.length){this.mSuffix=AG;}return AB.substring(0);}function P(AB,AC,AF){var AE,AD;AE=this.mNumber;if(this.mNumber<0&&AC>=2&&AC!==5){AE=-this.mNumber;}AD=G.hFormatValue(AB,AE);if(this.mNumber<0){if(AC===3||AC===4){AD="("+AD+")";}if(AC===2||AC===4||AC===5){this.mColor=255;}}E.call(this,AD);}function z(AJ,AM){var AF,AL,AD,AB,AG,AH=-1,AE=-1,AI=["[SF:-3]","[SF:-6]","[SF:-9]"];AF=AJ.mCustomFormat[0];AB=AJ.mCustomFormat.length;AL=AJ.mCustomFormat[AB-1];AG=AJ.mCustomFormat.substring(0);if(AF==="K"){AH=1;AE=0;AD="K";}else{if(AL==="K"){AH=AB;AE=0;AD="K";}else{if(AF==="M"){AH=1;AE=1;AD="M";}else{if(AL==="M"){AH=AB;AE=1;AD="M";}else{if(AF==="B"){AH=1;AE=2;AD="B";}else{if(AL==="B"){AH=AB;AE=2;AD="B";}}}}}}if(AH!==-1){AG.replace(/([KMB])/g,'"$1"');var AC;var AK=AG.indexOf(";");if(AK!==-1){if(AF===AD){AC='"'+AD+'"'+B[AE];}else{AC=B[AE]+'"'+AD+'"';}AG.replace(";",";"+AI[AE]);}AG=B[AE]+AG;}P.call(this,AG,AJ.mNegFormat,AM);}function Q(AC,AI){var AE,AB=AC.mCustomFormat.substring(0);AE=R.call(this,AB);this.mHasBracket=this.mHasBracket||AE.HasBracket;AB=AE.Format;var AF=!AE.HasLeftOver,AD=AE.HasBracket,AG=AE.Prefix,AH=AE.Suffix;if(AG.length){this.mPrefix=AG.substring(0);}if(AH.length){this.mSuffix=AH.substring(0);}AC.mCustomFormat=AB.substring(0);if(AF){AC.mCustomFormat=J.call(this,AC.mCustomFormat);}P.call(this,AC.mCustomFormat,AC.mNegFormat,AI);}function Y(AF){var AE,AD,AC,AB=AF.length;if(AB===0){return{Format:AF,Base:1};}if(AF[AB-1]!==","){return{Format:AF,Base:1};}if(AF===","){return{Format:AF,Base:1000};}AD=AF.reverse();AE=AD.search(/[^,]/);if(AE===-1){AC=Math.pow(1000,AB);return{Format:"",Base:AC};}AC=Math.pow(1000,AE);return{Format:AF.substring(0,AB-AE),Base:AC};}function I(AZ,AL){var AY=this.mNumber,Ab,AU,AJ,AN,AH,AR,AI,AD,AG,AS,AE,AC,AW,AX,AP,AT,AF,AO,AQ,AB,AV;if(AZ===null){E.call(this,G.hFormatValue("General",this.mNumber));}else{L.restore();Ab=AZ.getGridDataFormat(L,(this.mTripleId.mSeriesId<0)?0:this.mTripleId.mSeriesId,(this.mTripleId.mGroupId<0)?0:this.mTripleId.mGroupId,this.mColumnOffset);if(Ab!==true){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AU=L.mCustomFormat.substring(0);if(S.call(this,AU)){L.mFormatType=j.Fraction;}if(L.mFormatType===j.Fraction){AJ=L.mCustomFormat.substring(0);AN=s.call(this,this.mNumber,AJ);E.call(this,AN);return ;}L.mCustomFormat=J.call(this,L.mCustomFormat);AJ=L.mCustomFormat.substring(0);U.call(this,AJ);var Aa=Y.call(this,AJ);AH=Aa.Base;AJ=Aa.Format;this.mNumber/=AH;if(this.replaceQuestionMarkWithHash(AJ)){AR=AJ.indexOf(".");AI=AJ.length-AR-1;AP=G.hFormatValue(AJ,this.mNumber);AD=AP.indexOf(".");AG=0;if(AD===-1){AD=AP.length;AI=AG;}else{AG=AP.length-AR-1;}AR-=AD;AI-=AG;if(AR>0){this.mPrefix="";for(AV=0;AV<AR;AV++){this.mPrefix+=" ";}}if(AI>0){this.mSuffix="";for(AV=0;AV<AR;AV++){this.mSuffix+=" ";}}E.call(this,AP);this.mNumber=AY;return ;}if(L.mFormatType===j.Scientific){AJ.replace("#","0");}AS=".";AH=1;AE=AJ.lastIndexOf(AS);AC=this.mNumber;if(AE!==-1&&L.mFormatType===j.Custom){var AK=this.AdjustFormatStringWithDot(AJ,AE);AH=AK.BASE;AJ=AK.STRING;AC/=AH;}else{if(L.mFormatType===j.Custom){AW=AJ.length;if(AW>2){var AM=AJ[AW-1];if(AJ[AW-2]==="\\"&&(AM==="B"||AM==="b"||AM==="M"||AM==="m"||AM==="K"||AM==="k")){AX=AJ[AW-1];AT='"';AJ=AJ.substring(0,AW-2);AJ+=AT;AJ+=AX;AJ+=AT;AF="";AH=this.getBaseForCustomFormatting(AJ);AC/=AH;AJ+=AT;AJ+=AF;AJ+=AT;}}}}AO=false;if(AJ.indexOf("* -")!==-1){AO=this.mNumber<0;if(AO){AJ.replace("* -","* ");}}if(AJ===""){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AP=G.hFormatValue(AJ,AC);AQ=AP.length;if(AP.length){AB=L.mNegFormat>=3&&AP[0]==="("&&AP[AQ-1]===")";if(AB&&AP.length>this.mPrefix.length&&this.mPrefix.length&&this.mNumber<0){AP="("+this.mPrefix+AP.substring(1);this.mPrefix=this.mSuffix="";}}if(AO){this.mText=AP;AI=this.mText.search(/[0-9]/);if(AI!==-1){if(AI>0){AP=this.mText.substring(0,AI);}AP=AP+"-"+this.mText.substring(AI);}}E.call(this,AP);this.mNumber=AY;}}function V(AV,AI,AK){var AT,AS,AU,AM,AG,AR,AJ,AL,AO,AE,AP,AF,AB,AD,AQ,AC,AN;switch(AI.mFormatType){case j.Default:c.visPrint("should not reach here.");break;case j.General:E.call(this,G.hFormatValue("",this.mNumber));break;case j.FromGrid:I.call(this,AV,AK);break;case j.Fixed:z.call(this,AI,AK);break;case j.Date:case j.Time:AG=AI.mCustomFormat.substring(0);AG.replace(/[:(tt)]/g,"");E.call(this,G.hFormatValue(AG,this.mNumber));break;case j.Percentage:AG=AI.mCustomFormat.substring(0);P.call(this,AG,AI.mNegFormat,AK);break;case j.Fraction:AG=AI.mCustomFormat.substring(0);AM=s.call(this,this.mNumber,AG);E.call(this,AM);break;case j.Special:AT=new d.ChartAdvFormat({ChartAdvFormat:AI});if(AT.mCustomFormat.localeCompare("#####")===false&&this.mNumber===0){AT.mCustomFormat[4]="0";}E.call(this,G.hFormatValue(AT.mCustomFormat,this.mNumber));break;case j.Currency:AT=new d.ChartAdvFormat({ChartAdvFormat:AI});Q.call(this,AT,AK);break;case j.Scientific:AG=AI.mCustomFormat.substring(0);AG.replace("#","0");E.call(this,F.formatByMask(AG,this.mNumber));break;default:AU=this.mNumber;AJ=false;AT=new d.ChartAdvFormat({ChartAdvFormat:AI});AL=AT.mCustomFormat.substring(0);if(AL==="?"){AL="0";}if(AT.mFormatType===j.Custom){AO=S.call(this,AL);if(AO){AM=s.call(this,this.mNumber,AL);E.call(this,AM);return ;}AL=U.call(this,AL);AR=Y.call(this,AL);AE=AR.Base;AL=AR.Format;this.mNumber/=AE;if(this.replaceQuestionMarkWithHash(AL)){AP=AL.indexOf(".");AF=AL.length-AP-1;AN=G.hFormatValue(AL,this.mNumber);AB=AN.indexOf(".");AD=0;if(AB===-1){AB=AN.length;AF=AD;}else{AD=AN.length-AP-1;}AP-=AB;AF-=AD;if(AP>0){this.mPrefix="";for(AS=0;AS<AP;AS++){this.mPrefix+=" ";}}if(AF>0){this.mSuffix="";for(AS=0;AS<AP;AS++){this.mSuffix+=" ";}}E.call(this,AN);this.mNumber=AU;return ;}if(AL.indexOf("* -")!==-1){AL.replace("* -","* ");AJ=true;}}AQ=".";AC=AL.lastIndexOf(AQ);if(AC!==-1){var AH=this.AdjustFormatStringWithDot(AL,AC);AE=AH.BASE;AL=AH.STRING;this.mNumber/=AE;}E.call(this,G.hFormatValue(AL,this.mNumber));if(AJ&&this.mNumber<0){AN=this.mText.substring(0);AF=AN.search(/[0-9]/);if(AF!==-1){if(AF>0){this.mText=AN.substring(0,AF);}this.mText=this.mText+"-"+AN.substring(AF);E.call(this,this.mText);}}this.mNumber=AU;break;}}function b(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}return this.expectCondense===true;}function p(AF,AK,AH){var AB=this.mChartContextPtr,AE,AJ=this.mChartContextPtr.mIsGraphMatrix,AI=O.call(this,this.mTripleId);if(AB.mIsTimeSeriesChart&&AI===w.DssGraphY1Label){this.SetNumberFormatForTimeSeries(AF);return ;}if(AJ===false){return ;}if(Z.call(this,AI)){if(this.shouldCondense){this.SetNumberFormatForTimeSeries(AF);return ;}h.reset(AF);AE=this.mNumber;if(h.mFormatType===j.Default){var AC=AB.getAxisKeyFromObjectId(AI),AD=AB.getUniformAxisInformationFromKey(AC),AL=AD.Metrics;if(AL===undefined||AL.length===0){AL=[0];}AB.getAxisAutoNumberFormat(h,AL);h.mCustomFormat=J.call(this,h.mCustomFormat);}V.call(this,AH,h,AK);var AG=this.mChartContextPtr.GetGraphMatrixContext();if(b.call(this)){if(this.mText.length>AG.getCondensedTextLimit(h.mFormatType)){this.mNumber=AE;this.mPrefix=this.mSuffix="";this.SetNumberFormatForTimeSeries(AF);}}}}mstrmojo.chart.NumberObject=mstrmojo.declare(mstrmojo.chart.TextObject,null,{scriptClass:"mstrmojo.chart.NumberObject",mNumber:0,mColor:-1,mIsFinal:false,mIsAbbreviated:false,mColumnOffset:0,mHasBracket:false,mPrefix:"",mSuffix:"",expectCondense:false,shouldCondense:false,init:function y(AB){if(AB.Locale===undefined){AB.Locale=0;}this._super(AB);this.mNumber=AB.Number;this.mIsFinal=AB.IsFinal!==undefined?AB.IsFinal:true;this.mColumnOffset=AB.ColumnOffset!==undefined?AB.ColumnOffset:0;this.mPrefix="";this.mSuffix="";if(AB.ExpectCondense){this.expectCondense=AB.ExpectCondense;}if(AB.ShouldCondense){this.shouldCondense=AB.ShouldCondense;}this.SetNumberFormat(AB.NumberFormat,AB.Locale,AB.DataSet);},SetNumberFormat:function a(AF,AL,AG){var AB=this.mChartContextPtr,AH,AE=this.mChartContextPtr.mIsGraphMatrix,AI=O.call(this,this.mTripleId),AK,AJ,AC,AD;if(AB.mIsTimeSeriesChart&&AI===w.DssGraphY1Label){return p.call(this,AF,AL,AG);}if(AB.mIsGraphMatrix&&Z.call(this,AI)){return p.call(this,AF,AL,AG);}n.reset(AF);AC=n.mFormatType;AH=AB.GetGraphMajorType();A.reset(k,this.mTripleId.mObjectId);if(((AI===w.DssGraphDataText||AI===w.DssGraphRiser)&&(AH===e.GMT_SCATTER||AH===e.GMT_BUBBLE))&&!AE){switch(this.mColumnOffset){case 0:A.reset(k,w.DssGraphX1Body);break;case 1:A.reset(k,w.DssGraphY1Body);break;case 2:A.reset(k,w.DssGraphZBody);break;default:break;}AK=AB.GetProperty(t.DssGraphAxisNumberFormat,k);if(AK){AB.ParseValueToFormat(AK,n);}switch(this.mColumnOffset){case 0:A.reset(k,w.DssGraphX1Label);break;case 1:A.reset(k,w.DssGraphY1Label);break;default:break;}}AI=k.mObjectId;if(Z.call(this,AI)){if(AE===false){if(((AC===j.FromGrid)||(AC===j.Default))){if(AB.mGraphType===o.DssGraphTypePareto_Percent){n.mFormatType=j.General;}else{AB.getAxisAutoNumberFormat(n);n.mCustomFormat=J.call(this,n.mCustomFormat);}}}}else{if(AC===j.Default){n.mFormatType=j.FromGrid;}if(AI===w.DssGraphDataText&&AC===j.FromGrid&&AH===e.GMT_HISTOGRAM){n.mFormatType=j.General;}}if((this.mNumber>1000000000000000||this.mNumber<-1000000000000000)&&AC===j.Currency){AJ="0";for(AD=0;AD<n.mDigits;AD++){if(AD===0){AJ+=".";}AJ+="0";}AJ+="E+00";n.mCustomFormat=AJ.substr(0);n.mFormatType=j.Scientific;}V.call(this,AG,n,AL);},Draw:function r(){var AC=this.mFormatFontPtr,AB=this.mColor;if(AB>=0){var AD=AB;if(AC){AD=AC.mFontColor;AC.mFontColor=AB;}this._super();if(AC){AC.mFontColor=AD;}}else{this._super();}},replaceQuestionMarkWithHash:function AA(AF){var AD,AC,AE,AB="";if(AF.length===0){return false;}AC=AF.length;AD=0;for(AE=0;AE<AC;AE++){if(AB.indexOf(AF[AE])===-1){AB+=AF[AE];}if(AF[AE]==="."){AD++;}}if(AB===".?"||AB==="?."){if(AD===1){AF.replace("?","#");return true;}}return false;},AddTextBeforeNumber:function H(AD){var AB,AC;AB=new d.Rect2D();this.SetRect(AB);AC=AD+"\n"+this.mText;this.SetText(AC);this.mIsFinal=true;},getBaseForCustomFormatting:function q(AE){var AH="",AK="",AG=1000,AC='"',AI=AE.lastIndexOf(AC);if(AI!==-1&&AI===AE.length-1){AI=AE.lastIndexOf(AC,AI-1);if(AI!==-1){if(AI!==0&&!(AI===1&&AE.charAt(0)==="-")){if(AE.lastIndexOf("(",AI-1)===-1){var AD=AE.substr(AI,AE.length);AK=AD.replace(/"""/gi,"");AE=AE.substr(0,AI);}}}}AI=AE.length-1;var AB=1,AJ=AE.charAt(AI),AF=true;switch(AJ){case"K":case"k":AB*=AG;AH=AJ;AI-=1;break;case"M":case"m":AB*=AG*AG;AH=AJ;AI-=1;break;case"B":case"b":AB*=AG*AG*AG;AH=AJ;AI-=1;break;default:AF=false;break;}AE=AE.substr(0,AI+1);if(AF){AI=AE.length-1;if(AE.charAt(AI)===","){AE=AE.substr(0,AI);}return{BASE:AB,STRING:AE,TAG:AH,SUFFIX:AK};}var AL=",";while(AI>0){if(AE.charAt(AI)!==AL){break;}AI--;AB*=AG;}AE=AE.substr(0,AI+1);return{BASE:AB,STRING:AE,TAG:AH,SUFFIX:AK};},AdjustFormatStringWithDot:function f(AI,AL){var AD=".",AF=",",AQ=0,AJ=0,AE=1,AP="",AR=".",AO=AL-1;while(AO>=0){if(AI[AO]===AF){AJ++;AE*=1000;}else{break;}AO--;AP+=AF;}AP+=AD;if(!(AQ===0&&AJ===0)){var AC=0,AH=AI.indexOf(AP),AB="";while(AH!==-1){AB=AB.concat(AI.substr(AC,AH-AC));AC=AH+AP.length;AB=AB.concat(AR);AH=AI.indexOf(AP,AC);}AB+=AI.substr(AC,AI.length);AI=AB;}var AK,AG,AM,AN=AI.lastIndexOf(AD);while(AN!==-1){AM=AI.lastIndexOf(AF,AN);if((AM!==-1)&&(AM<AN)&&(AN-AM>1)&&(AN-AM<4)){AG="";AG=AG.concat(AI.substr(0,AM+1));for(AK=0;AK<4-(AN-AM);AK++){AG=AG.concat(AI[AM+1]);}AG=AG.concat(AI.substr(AM+1));AI=AG;}AN=AI.lastIndexOf(AD,AN-1);}return{BASE:AE,STRING:AI};},SetNumberFormatForTimeSeries:function l(AG){var AC=this.mChartContextPtr,AE=this.mNumber,AK,AD,AF=AC.mIsGraphMatrix;if(AG.mFormatType===0&&!AF){var AJ;if(this.mNumber>0){AJ=AC.getInt(AE);AK="$"+AJ.ToString();}else{AE=-AE;AJ=AC.getInt(AE);AK="($"+AJ.ToString()+")";}E.call(this,AK);return ;}this.mIsAbbreviated=this.mIsAbbreviated||AF;var AI=this.mTripleId.mObjectId,AH=AF&&Z.call(this,AI),AB=AH?u:N;AK=G.abbreviateNumber(this.mNumber,AB);if(AG.mFormatType===1){AK=AG.mCurrency+AK;}E.call(this,AK);},GetNumberFromText:function g(){if(this.mText!==""){var AB=parseFloat(this.mText);if(G.isValidNumber(AB)){return AB;}return null;}return null;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","FormatFill","FormatLine","PieSliceObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixPiePlotType","EnumGraphMatrixMarkerTypeInChart");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphNumberFormatType");var e=mstrmojo.chart,d=mstrmojo.VisUtility,X=e.ChartConstants,Z=e.enums,S=Z.EnumGraphMatrixPiePlotType,J=Z.EnumGraphMatrixMarkerTypeInChart,U=e.model,j=U.enums,N=j.EnumDSSGraphObject,E=j.EnumShapeType,L=j.EnumDSSGraphMarkerShape,h=0,P=1,I=1,A=2,Y=3;var Q=new e.TripleId(),W=new e.ChartAdvFormat();var O=0.1;function g(){var l=this.mChartContextPtr,k=l.GetGraphMatrixContext();this.mMinSizeByTotal=0;if(!this.mHasSizeBy){return this.mMinSizeByTotal;}this.mMinSizeByTotal=k.mMinSizeVal;return this.mMinSizeByTotal;}function f(){var l=this.mChartContextPtr,k=l.GetGraphMatrixContext();if(!this.mHasSizeBy){this.mMaxSizeByTotal=1;return this.mMaxSizeByTotal;}this.mMaxSizeByTotal=k.mMaxSizeVal;return this.mMaxSizeByTotal;}function F(){var l=this.mChartContextPtr,k=l.GetGraphMatrixContext();f.call(this);g.call(this);if(k.mMarkerShape===L.DssGraphMarkerShape2DPie){this.mPieOption.mLayout=h;}else{this.mPieOption.mLayout=P;}}function b(p,q,s,n){var l=this.mChartContextPtr.GetGraphMatrixContext(),o,r,k=2;if(this.mHasSizeBy){k=l.getSizeByPieRadius(this.mDatasetPtr,p,q,this.mMaxSizeByTotal,this.mMinSizeByTotal,this.mPieOption.mMaxRadius);if(k>=0&&k<1){k=1;}}else{k=this.mPieOption.mMaxRadius;}o=1;if(this.mPlotType===S.GMPPT_VALUE){r=n||this.mDatasetPtr.GetPieCountAtOneDataPoint(p,q);o=(s+1)/r;k=o*k;if(r>1){k-=1;}}return k;}function D(k,l,o){var p,n,s,r,q=this.mDatasetPtr,t=this.mPieOption,w={};w.Angles=[];w.ValidSeriesNumber=0;w.ValidSeriesIndex=[];w.IsValid=false;p=360-t.mPieRotation;w.Angles.push(p);w.ValidSeriesIndex.splice(0,w.ValidSeriesIndex.length);n=this.mDatasetPtr.GetPieSliceCount(k,l,0);s=0;for(r=0;r<n;++r){var u=q.GetPieSlicePercentage(k,l,o,r);if(u!==null){if(u<=1||u>=-1){++w.ValidSeriesNumber;w.ValidSeriesIndex.push(r);}s+=u;if(r===(n-1)){p=720-t.mPieRotation;}else{p=Math.round(Math.abs(360*s)*10)/10+O+(360-t.mPieRotation);}}else{if(r===(n-1)){p=720-t.mPieRotation;}}if(p>720-t.mPieRotation){p=720-t.mPieRotation;}w.Angles.push(p);}w.IsValid=true;return w;}function R(AE,y){var p=this.mChartContextPtr,AF=p.GetGraphMatrixContext(),AC="",t,z=this.mDatasetPtr,AD=new e.TripleId({ObjectId:N.DssGraphDataText,SeriesId:AE.mSeriesId,GroupId:AE.mGroupId}),x,AB,k,AA=z.dataLabelStyle,l,s=y.GetSliceInfo(),o,n,AG,w,u,q=false,r=5;if(z.showPieSliceDatalabel(AE.mSeriesId,AE.mGroupId,AE.angleByIndex,AE.sliceById)===false){return null;}AD.angleByIndex=AE.angleByIndex;AD.sliceById=AE.sliceById;if(p.mIsGraphMatrix){r=AF.getPadding(X.kDataLabel);}switch(AA){case A:t=z.GetPieSliceData(AE.mSeriesId,AE.mGroupId,AE.angleByIndex,AE.sliceById);if(t===undefined||t===null){return null;}W.restore();z.getGridDataFormatForPie(W,AE);x=new e.NumberObject({TripleId:AD,GraphObjectManager:this.mpManager,Number:t,NumberFormat:W,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(x!==undefined&&x!==null){AC=x.mText;}k=x;break;case Y:AB=z.GetTextLabel(AE.mSeriesId,AE.mGroupId,AE.angleByIndex,AE.sliceById);AC=AB;k=new e.TextObject({TripleId:AD,GraphObjectManager:this.mpManager,GraphCollectionObject:null});break;}if(k!==undefined&&k!==null&&AC!==""){k.SetText(AC);l=k.GetBoundingRect();}else{return null;}o=y.GetMiddleAngleRadian();AG=(s.mRadius+r)*Math.cos(o);w=(s.mRadius+r)*Math.sin(o);n=y.GetMiddleAngleQuadrant();if(n===2||n===3){q=true;}u=l.height*0.5*Math.sin(o);if(q){k.MoveToCenter(s.mCenter.x+AG-(l.width+1)/2,s.mCenter.y+w+u);}else{k.MoveToCenter(s.mCenter.x+AG+(l.width+1)/2,s.mCenter.y+w+u);}return k;}function C(AI,x,n,AG,AA,AF,AC,r,o){var t={mObjectId:N.DssGraphPieSlice,mSeriesId:AI,mGroupId:x},q=this.mChartContextPtr,AE=q.getUtiliy().tripleId,AD=this.mPieOption,y=q.mIsGraphMatrix,w,s,l,u=(this.mPlotType===S.GMPPT_VALUE),p=AD.mLayout,k,AB;var AH=o||this.mDatasetPtr.GetPieCountAtOneDataPoint(iSeriesId,x);if(AC-AF<=O){return null;}AE.reset(Q,t.mObjectId,t.mSeriesId,t.mGroupId,n,AG);if(q.checkColorByAndSizeByValue(Q,this.mDatasetPtr,this.mHasColorBy,false)===false){return null;}if(AC-AF===360){r=true;}w=((p===P)||(u&&n>0));if(w){if(p===P){if(u&&n>0){AD.mRingFactor=(1-1/(n+1)*0.3)*100;}else{AD.mRingFactor=70;}}else{AD.mRingFactor=100/(n+1);}}s=b.call(this,AI,x,n);if(s<=0){return null;}l=new e.PieSliceObject({TripleId:t,AngleIndex:n,SliceId:AG,GraphObjectManager:this.mpManager,Explode:0,StartAngle:AF,EndAngle:AC,RingPieFactor:AD.mRingFactor,IsRing:w,Is2DCircular:true,Scale:AD.mScale,Center:AA,Radius:s,MaxRadius:AD.mMaxRadius,Depth:AD.mDepthInChart,OneSeries:r,ParentObject:null,IsShown:true,Shape:E._PIESLICE,hasFill:true});if(y){var z=this.mDatasetPtr.showPieDatalabels();if(z&&!(u&&n<AH-1)){k=R.call(this,t,l);if(k!==undefined&&k!==null){k.mIsShown=false;AB=new e.GMDataLabelInfo({SeriesId:AI,GroupId:x,isValid:true,Label:k});AB.HostMarkerPoint=AA;AB.HostMarkerBound=new e.Rect2D({x:AA.x-s,y:AA.y-s,height:2*s,width:2*s});this.dataLabels.push(AB);}}}return l;}function H(){var n,k=this.mChartContextPtr.GetGraphMatrixContext(),l=J._PIE;if(this.mPlotType===S.GMPPT_CATEGORY){var o=this.mChartContextPtr.IsVertical(),p=this.mDatasetPtr.GetGroupCount();n=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);return k.GetMaxMarkerSize(l,o,p*n);}else{if(this.mPlotType===S.GMPPT_VALUE){return k.GetMaxMarkerSize(l,true,1,this.mHasSizeBy);}}return 0;}function G(o){var x=this.mPieCircles,y=x.length,r,p,q=false,n=[],u=[],s=[],w,t,l,k;for(r=0;r<y;++r){q=false;k=x[r];for(p=0;p<n.length;++p){if(k.mCenter.x===n[p].x&&k.mCenter.y===n[p].y&&k.mRadius===u[p]){q=true;break;}}if(!q){w=k.mCenter;t=k.mRadius;u.push(t);n.push(w);s.push(k);}}o.CirclePieObjects=o.CirclePieObjects.concat(s);}mstrmojo.chart.PiePlotRenderer=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.PiePlotRenderer",mDatasetPtr:null,mChartContextPtr:null,mMaxSizeByTotal:0,mMinSizeByTotal:0,mHasColorBy:false,mHasSizeBy:false,mPlotType:S.GMPPT_CATEGORY,mPieOption:{mLayout:h,mRingFactor:70,mScale:1,mDepthInChart:0,mPieRotation:90},mpManager:null,dataLabels:[],shownDataLabels:[],mPieCircles:[],init:function a(k){this._super(k);this.mpManager=k.GraphObjectManager;this.mChartContextPtr=k.ChartContext;this.mDatasetPtr=k.Dataset;this.mPieOption={mLayout:h,mRingFactor:70,mScale:1,mMaxRadius:10,mDepthInChart:0,mPieRotation:90};this.mPieOption.mLayout=k.Layout;this.mPlotType=k.PlotType;if(k.MaxRadius){this.mPieOption.mMaxRadius=k.MaxRadius;}else{this.mPieOption.mMaxRadius=H.call(this);}this.mHasColorBy=this.mChartContextPtr.GetGraphMatrixContext().mHasColorBy;this.mHasSizeBy=this.mChartContextPtr.GetGraphMatrixContext().mHasSizeBy;this.dataLabels=[];this.shownDataLabels=[];this.mPieCircles=[];if(k.shownDatalabels!==undefined&&k.shownDataLabels!==null){this.shownDataLabels=k.shownDataLabels;}F.call(this);},getShapeSizeAt:function c(o,l,k,n){if(n===undefined){n=true;}if(n){return this.mPieOption.mMaxRadius;}return b.call(this,o,l,k);},drawSinglePie:function B(n,u,l,w,k){var o=[],r,AA,y,p,x,AB,AC,q={},z;if(w.x<0||w.y<0){return o;}p=b.call(this,n,u,l,k);q.mCenter=w;q.mRadius=p;x=D.call(this,n,u,l);if(!x.IsValid){return o;}AA=x.ValidSeriesIndex;r=x.ValidSeriesNumber;y=x.Angles;var AD=k||this.mDatasetPtr.GetPieCountAtOneDataPoint(n,u),s=(this.mPlotType===S.GMPPT_VALUE),t=((this.mPieOption.mLayout===P)||(s&&l>0));if(r===0){d.visPrint("pieplotRenderer::Should not reach here");}else{if(r===1){AB=C.call(this,n,u,l,AA[0],w,360-this.mPieOption.mPieRotation,720-this.mPieOption.mPieRotation,true,AD);if(AB){AB.SetWhitenOuterBorder(s&&l<AD-1&&!t);o.push(AB);}this.mPieCircles.push(q);}else{for(z=0;z<r;++z){AC=AA[z];AB=C.call(this,n,u,l,AC,w,y[AC],y[AC+1],false,AD);if(AB){AB.SetWhitenOuterBorder(s&&l<AD-1&&!t);o.push(AB);}}this.mPieCircles.push(q);}}return o;},SetInfo:function V(l,k,n){this.mPieOption.mLayout=l;this.mPieOption.mMaxRadius=n;this.mPlotType=k;},enableDataLabel:function M(o,n){var p=this.mChartContextPtr,l=p.mIsGraphMatrix,k=p.GetGraphMatrixContext();if(l){G.call(this,o);o.PlaceDataLabels(this.dataLabels,n);}},GetPieRadius:function K(k,l,n){return b.call(this,k,l,n);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","RectangleObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle");var D=mstrmojo.chart,B=mstrmojo.chart.enums,C=B.EnumBoxStyle;function A(){var N=this.mChartContextPtr,L=this.mBoxStyle,M=this.mFormatFillPtr.mAlpha,I,K,H,J,G;I=4;K=new D.Rect2D({Rect2D:this.mRect});K.Implode(I,I);N.DrawRectangle(this.mRect,false);this.ApplyFillFormat();if(L===C.BS_BEVELED_FRAME||L===C.BS_REVERSE_BEVELED_FRAME){H=D.gBlack.ToInteger();J=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.153:0.353));G=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.353:0.153));N.ApplyBeveledFrameToRectangle(this.mRect,0,I,H,J,H,G);}else{if(L===C.BS_DOUBLE_LINE_FRAME){if(L===C.BS_DOUBLE_LINE_FRAME){N.DrawRectangle(K,true);this.ApplyLineFormat();}}}this.SetLineWidth();N.DrawRectangle(this.mRect,true);this.hSetBorderStyle(this.mRect);this.ApplyLineFormat();}mstrmojo.chart.FancyBoxObject=mstrmojo.declare(mstrmojo.chart.RectangleObject,null,{scriptClass:"mstrmojo.chart.FancyBoxObject",mBoxStyle:C.BS_NOFRAME,init:function F(G){this._super(G);this.mBoxStyle=G.BoxStyle||C.BS_NOFRAME;},Draw:function E(){if(this.mBoxStyle===C.BS_NOFRAME){this.mChartContextPtr.DrawRectangle(this.mRect,false);this.ApplyFillFormat();}else{A.call(this);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Point2D","GraphObjectManager","TripleId","FormatFont","ChartContext","GraphCollectionObject","FancyBoxObject","MarkerObject","FormatFill","StraightLineObject","TextObject","Rect2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMarkerShape","EnumBoxStyle","EnumLineStyle","EnumLegendLayout","EnumLegendMarkersStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantType","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphMarkerLayout","EnumDSSGraphLegendPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");var W=mstrmojo.chart,M=mstrmojo.chart.enums,L=M.EnumCollectionType.CT_TEXT,V=M.EnumMarkerShape,S=M.EnumBoxStyle,G=M.EnumLineStyle,K=M.EnumLegendLayout,s=M.EnumLegendMarkersStyle,p=W.gNullTripleId,N=0.75,t=16,A=0.5,j=0.15,d=0.9,F=1742,P=725,D=2;var U=mstrmojo.chart.model,O=U.enums,g=O.EnumDSSGraphMarkerShape,b=O.EnumDSSGraphType,e=O.EnumDSSGraphProperty,f=O.EnumDSSGraphObject,E=O.EnumVariantBool,B=E.VARIANT_FALSE,a=O.EnumDSSExtraGraphProperty,q=O.EnumDSSGraphMarkerLayout,I=O.EnumDSSGraphLegendPosition;var C=0;function Y(u){this.mLegendMarkerSize=u.mFontSize<t?u.mFontSize:t;this.mLegendMarkerSize=Math.floor(this.mLegendMarkerSize*N+1.5);if(this.mLegendMarkerSize<2){this.mLegendMarkerSize=2;}this.mItemMargin=Math.floor(this.mLegendMarkerSize*0.3);this.mEdgeMargin=Math.floor(this.mLegendMarkerSize*0.8);}function o(AK,AB){var x=this.mChartContextPtr,AG=this.mDatasetPtr,u=this.mGraphOptionsLegend,AI,y,AH,AF,z,AA,w,AE,AM,AC,AN,AD,AJ,AL;AI=AG.GetSeriesCount();y=new W.Rect2D();AL=this.mLegendItemCount;for(AH=0;AH<AL;++AH){AF=new W.TripleId({ObjectId:f.DssGraphLegendText,SeriesId:AH});z=new W.TextObject({TripleId:AF,GraphObjectManager:this,GraphCollectionObject:AB});z.mIsShown=false;AB.AddGraphObject(z);w=x.mGraphType;if(AH>=AI&&w!==b.DssGraphTypeGridChart){if(x.mGraphType===b.DssGraphTypePareto_Percent){AE=x.GetProperty(e.DssGraphCumulativePercentLabel,new W.TripleId({SeriesId:AH-AI}));if(AE){AA=AE;}else{AA="Cumulative Percent";}}else{if(w>=b.DssGraphTypeHiLo_Stock_Chart&&w<=b.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){AA=this.mStockMetricValue[this.mLegendItemIndexToStockMetricIndex[AH]];}}}else{if(u.mIsByGroup){AA=AG.GetGroupLabel(AH,false);}else{AA=AG.GetSeriesLabel(AH,false);}}z.SetText(AA);AJ=z.GetBoundingRect();this.AddToMapAndList(z);if(AJ.width>y.width){y.width=AJ.width;}}if(!x.mManualLayoutMode||u.mReposition){AC=Math.floor(AK.width*j+0.5);if(u.mLegendPosition===I.DssGraphLegendPositionBottom){AC=AK.width;}AM=(y.width<AC)?y.width:AC;}else{AN=x.GetLocation(e.DssGraphLegendLocation);if(AN.width===0){AC=Math.floor(AK.width*j+0.5);AM=(y.width<AC)?y.width:AC;}else{AM=AN.width-2*this.mEdgeMargin;if(u.mLegendMarkersStyle===q.DssGraphMarkerLeft||u.mLegendMarkersStyle===q.DssGraphMarkerRight){AM-=this.mLegendMarkerSize*(1+A);}}}y.width=0;for(AH=0;AH<AL;++AH){AD=this.GetGraphObject(new W.TripleId({ObjectId:f.DssGraphLegendText,SeriesId:AH}));AD.SetTextWidthLimit(AM);AJ=AD.GetBoundingRect();if(AJ.height>y.height){y.height=AJ.height;}if(AJ.width>y.width){y.width=AJ.width;}}return y;}function Z(){var u=this.mChartContextPtr.mGraphType;switch(u){case b.DssGraphTypeVertical_Area_Stacked:case b.DssGraphTypeVertical_Area_BiPolar_Stacked:case b.DssGraphTypeVertical_Area_DualAxis_Stacked:case b.DssGraphTypeVertical_Area_Percent:case b.DssGraphTypeVertical_Bar_Stacked:case b.DssGraphTypeVertical_Bar_DualAxis_Stacked:case b.DssGraphTypeVertical_Bar_BiPolar_Stacked:case b.DssGraphTypeVertical_Bar_Percent:case b.DssGraphTypeVertical_Line_Stacked:case b.DssGraphTypeVertical_Line_BiPolar_Stacked:case b.DssGraphTypeVertical_Line_DualAxis_Stacked:case b.DssGraphTypeVertical_Line_Percent:case b.DssGraphRadar_Line_Stacked:case b.DssGraphTypePareto:case b.DssGraphTypePareto_Percent:return true;default:return false;}}function J(AX,AI){var AA=this.mGraphOptionsLegend,Ae=o.call(this,AX,AI),AZ=new W.Rect2D(),Ag=this.mItemMargin,AL=this.mItemMargin,AC=this.mDatasetPtr.GetSeriesCount(),AU=new W.Rect2D({x:0,y:0,width:this.mLegendMarkerSize,height:this.mLegendMarkerSize}),AG=0,Ak=0,Ab,Al,AE,AK,AP,Ad,AQ,AJ,AS,x,AV,Ah,u,AB,AR,Af,AM,AF,AW,Aa,w,AH,z,Ac,AO,AN,AD,Aj,y,Ai,AT;switch(AA.mLegendMarkersStyle){case q.DssGraphMarkerLeft:case q.DssGraphMarkerRight:AG=Math.floor(Ae.width+AU.width*(1+A));Ak=Ae.height;break;case q.DssGraphMarkerCentered:AG=Ae.width;Ak=Ae.height;break;case q.DssGraphMarkerAbove:case q.DssGraphMarkerBelow:AG=Ae.width;Ak=Math.floor(Ae.height+AU.height*(1+A));break;default:break;}if(Ak===0){Ak=1;}if(AG===0){AG=1;}Ab=0;Al=0;AE=this.mLegendItemCount;switch(AA.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:AK=Math.floor((AX.height-Ag)/(Ak+Ag));if(AK===0){AK=1;}Ab=Math.floor(this.mLegendItemCount/AK);if(Ab*AK<this.mLegendItemCount){Ab++;}Al=Math.floor(this.mLegendItemCount/Ab);if(Al*Ab<this.mLegendItemCount){Al++;}break;case I.DssGraphLegendPositionBottom:AK=Math.floor((AX.width-AL)/(AG+AL));if(AK===0){AK=1;}Al=Math.floor(this.mLegendItemCount/AK);if(Al*AK<this.mLegendItemCount){Al++;}Ab=Math.floor(this.mLegendItemCount/Al);if(Al*Ab<this.mLegendItemCount){Ab++;}break;case I.DssGraphLegendPositionFreeFloat:AP=this.mChartContextPtr.GetLocation(e.DssGraphLegendLocation);AZ.y=AP.y;AZ.x=AP.x;if(!AA.mRecalculate){AZ.width=AP.width;AZ.height=AP.height;Ad=Math.floor((AZ.height-this.mEdgeMargin*2+D)/Ak);AQ=Math.floor((AZ.width-this.mEdgeMargin*2+D)/AG);if(Ad*AQ<AE){AE=Ad*AQ;Al=Ad;Ab=AQ;}else{Ab=Math.floor(this.mLegendItemCount/Ad);if(Ab===0){Ab=1;}if(Ab*Ad<this.mLegendItemCount){Ab++;}Al=Math.floor(this.mLegendItemCount/Ab);if(Al*Ab<this.mLegendItemCount){Al++;}}if(Al>0){Ag=Math.floor((AZ.height-Al*Ak-this.mEdgeMargin*2)/Al);}if(Ab>0){AL=Math.floor((AZ.width-Ab*AG-this.mEdgeMargin*2)/Ab);}}else{AK=Math.floor((AX.height-Ag)/(Ak+Ag));if(AK===0){AK=1;}Ab=Math.floor(this.mLegendItemCount/AK);if(Ab*AK<this.mLegendItemCount){Ab++;}Al=Math.floor(this.mLegendItemCount/Ab);if(Al*Ab<this.mLegendItemCount){Al++;}}break;default:break;}if(AA.mLegendPosition!==I.DssGraphLegendPositionFreeFloat||AA.mRecalculate){AZ.height=Math.floor(Ak*Al+Ag*Al+this.mEdgeMargin*2);AZ.width=Math.floor(AG*Ab+AL*Ab+this.mEdgeMargin*2);if(AA.mRecalculate){if(!this.mIsExpanded){AJ=this.mChartContextPtr.mGraphWidth;AS=this.mChartContextPtr.mGraphHeight;if(AZ.x+AZ.width>AJ){AZ.width=AJ-AZ.x;}if(AZ.y+AZ.height>AS){AZ.height=AS-AZ.y;}}}}if(this.mIsExpanded){switch(AA.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:this.mArea.width=AZ.width*1.8+530;if(this.mArea.width>F){this.mArea.width=F;}this.mChartContextPtr.SetGraphSize(this.mArea.x+this.mArea.width+this.mChartContextPtr.vdWidth(C),this.mChartContextPtr.mGraphHeight);break;case I.DssGraphLegendPositionBottom:this.mArea.height=AZ.height*0.4+400;if(this.mArea.height>P){this.mArea.height=P;}this.mChartContextPtr.SetGraphSize(this.mChartContextPtr.mGraphWidth,this.mArea.y+this.mArea.height+this.mChartContextPtr.vdHeight(C));break;case I.DssGraphLegendPositionFreeFloat:x=this.mChartContextPtr.mGraphWidth;AV=this.mChartContextPtr.mGraphHeight;if(AZ.x+AZ.width>this.mChartContextPtr.mGraphWidth){x=AZ.x+AZ.width+this.mChartContextPtr.vdWidth(C);}if(AZ.y+AZ.height>this.mChartContextPtr.mGraphHeight){AV=AZ.y+AZ.height+this.mChartContextPtr.vdHeight(C);}this.mChartContextPtr.SetGraphSize(x,AV);break;default:break;}}switch(AA.mLegendPosition){case I.DssGraphLegendPositionRight:AZ.y=Math.floor(this.mArea.y+this.mArea.height/2-AZ.height/2);AZ.x=Math.floor(this.mArea.x+this.mArea.width-AZ.width);break;case I.DssGraphLegendPositionLeft:AZ.y=Math.floor(this.mArea.y+this.mArea.height/2-AZ.height/2);AZ.x=this.mArea.x;break;case I.DssGraphLegendPositionBottom:AZ.y=this.mArea.y+this.mArea.height-AZ.height;AZ.x=Math.floor(this.mArea.x+(this.mArea.width-AZ.width)/2);break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}if(!this.mChartContextPtr.mManualLayoutMode||AA.mReposition){this.mChartContextPtr.PutLocation(e.DssGraphLegendLocation,AZ);}for(Ah=0;Ah<AE;++Ah){u=Math.floor(Ah/Ab);AB=Ah-u*Ab;AR=0;switch(AA.mLegendMarkersStyle){case q.DssGraphMarkerRight:AR=AL;break;case q.DssGraphMarkerCentered:case q.DssGraphMarkerAbove:case q.DssGraphMarkerBelow:AR=AL/2;break;}Af=new W.Point2D();Af.x=AZ.x+(AG+AL)*AB+this.mEdgeMargin+AR;Af.y=Math.floor(AZ.y+(Ak+Ag)*u+this.mEdgeMargin+Ag/2);AM=new W.Point2D();AF=new W.Point2D();switch(AA.mLegendMarkersStyle){case q.DssGraphMarkerLeft:AM.x=Math.floor(Af.x+AU.width/2);AM.y=Math.floor(Af.y+Ak/2);AF.x=Math.floor(Af.x+AU.width*(1+A));AF.y=Af.y;break;case q.DssGraphMarkerRight:AM.x=Math.floor(Af.x+AG-AU.width/2);AM.y=Math.floor(Af.y+Ak/2);AF.x=Af.x;AF.y=Af.y;break;case q.DssGraphMarkerCentered:AM.x=Math.floor(Af.x+AG/2);AM.y=Math.floor(Af.y+Ak/2);AF.x=Af.x;AF.y=Af.y;break;case q.DssGraphMarkerAbove:AM.x=Math.floor(Af.x+AG/2);AM.y=Math.floor(Af.y+AU.height/2);AF.x=Af.x;AF.y=Af.y+AU.height*(1+A);break;case q.DssGraphMarkerBelow:AM.x=Math.floor(Af.x+AG/2);AM.y=Math.floor(Af.y+Ak-AU.height/2);AF.x=Af.x;AF.y=Af.y;break;default:break;}AW=Z.call(this)?(this.mLegendItemCount-Ah-1):Ah;Aa=new W.TripleId({ObjectId:f.DssGraphLegendMarker,SeriesId:AW});AH=this.mChartContextPtr.mGraphType;if(AH>=b.DssGraphTypeHiLo_Stock_Chart&&AH<=b.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart&&Ah>=AC){var AY=this.mLegendItemIndexToStockMetricIndex[Ah];if(AY===undefined){break;}z=AY.value;if(this.mStockMetricLayout[z]===f.DssGraphMetricVerticalLine||this.mStockMetricLayout[z]===f.DssGraphMetricLine){Ac=new W.Point2D({Point2D:AM});AO=this.mLegendMarkerSize/2;AN=this.mStockMetricLayout[z]===f.DssGraphMetricVerticalLine?new W.Point2D({x:Ac.x,y:Math.floor(Ac.y-1.75*AO)}):new W.Point2D({x:Math.floor(Ac.x-1.75*AO),y:Ac.y});AD=this.mStockMetricLayout[z]===f.DssGraphMetricVerticalLine?new W.Point2D({x:Ac.x,y:Math.floor(Ac.y+1.75*AO)}):W.Point2D({x:Math.floor(Ac.x+1.75*AO),y:Ac.y});Aj=new W.StraightLineObject({TripleId:Aa,GraphObjectManager:this,StartPoint:AN,EndPoint:AD});y=new W.FormatLine({LineStyle:G.LS_SHORT_DASH,Alpha:255,LineThickness:1,LineColor:W.gBlack.ToInteger()});Aj.SetFormatLine(y);this.mLegendMarkerLines.push(Aj);w=new W.MarkerObject({TripleId:Aa,GraphObjectManager:this,MarkerPosition:AM,MarkerShape:V.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});w.mIsShown=false;}else{Ai=this.mStockMetricLayout[z]===f.DssGraphMetricBar?g.DssGraphMarkerShapeRectangle:g.DssGraphMarkerShapeHouse;w=new W.MarkerObject({TripleId:Aa,GraphObjectManager:this,MarkerPosition:AM,MarkerShape:Ai,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});w.SetFormatFill(new W.FormatFill({SimpleColor:W.gBlack.ToInteger()}));}}else{w=new W.MarkerObject({TripleId:Aa,GraphObjectManager:this,MarkerPosition:AM,MarkerShape:V.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});}this.AddToMapAndList(w);AT=this.GetGraphObject(new W.TripleId({ObjectId:f.DssGraphLegendText,SeriesId:AW}));AT.SetRect(Ae);AT.MoveTo(AF.x,AF.y);AT.mIsShown=true;}return AZ;}function X(){var u=this.mDatasetPtr;if(!this.mGraphOptionsLegend.mIsByGroup){return u.GetSeriesCount();}return u.GetGroupCount();}function Q(){var AB=this.mChartContextPtr,z,y,AA=[],x,u,w;z=AB.GetLocationRect(e.DssGraphLegendLocation);y=new W.Point2D({x:Math.floor(z.x+z.width/2),y:Math.floor(z.y+z.height/2)});AA[0]=y.Distance(new W.Point2D({x:AB.mGraphWidth,y:Math.floor(AB.mGraphHeight/2)}));AA[1]=y.Distance(new W.Point2D({x:0,y:Math.floor(AB.mGraphHeight/2)}));AA[2]=y.Distance(new W.Point2D({x:Math.floor(AB.mGraphWidth/2),y:AB.mGraphHeight}));x=AA[0];u=0;for(w=1;w<3;++w){if(AA[w]<x){x=AA[w];u=w;}}return(u+1);}function H(){var AC=this.mChartContextPtr,w=this.mGraphOptionsLegend,z,u,AA,AB,y,x;z=AC.GetProperty(e.DssGraphShowLegendText,p);if(z){w.mShowLegend=(z!==B);}z=AC.GetProperty(e.DssGraphMarkerLayout,p);if(z){w.mLegendMarkersStyle=z;}z=AC.GetProperty(e.DssGraphLegendLock,p);if(z){w.mLegendPosition=z;if(!AC.mManualLayoutMode&&w.mLegendPosition===K.LL_LegendFreeFloat){w.mLegendPosition=K.LL_LegendOnRightSide;}}if(AC.mManualLayoutMode){w.mLegendPosition=K.LL_LegendFreeFloat;z=AC.GetProperty(e.DssGraphInfoRecalculateLegend,p);if(z){w.mRecalculate=z!==B;if(w.mRecalculate){z=AC.GetProperty(a.DssGraphInfoRecalculateChartFrame,p);if(z){w.mReposition=z!==B;if(w.mReposition){w.mLegendPosition=Q.call(this);}}}}z=AC.GetProperty(e.DssGraphAxisAutoFit,p);if(z){w.mAxisLabelsAutoFit=z!==B;}if(w.mAxisLabelsAutoFit){w.mRecalculate=true;w.mReposition=true;w.mLegendPosition=Q.call(this);}}w.mIsByGroup=AC.isLegendByGroup();if(!AC.mManualLayoutMode||w.mRecalculate){z=AC.GetProperty(a.DssGraphInfoAutosizeHorizontal,p);u=AC.GetProperty(a.DssGraphInfoAutosizeVertical,p);if(z&&u){this.mIsExpanded=z!==B&&u!==B;}this.mIsExpanded=false;}this.mLegendItemCount=X.call(this);y=AC.mGraphType;if(y===b.DssGraphTypePareto_Percent){AA=false;AB=1;z=AC.GetProperty(a.DssGraphUseChartArea,p);if(z){AA=z!==B;}if(AA){z=AC.GetProperty(a.DssGraphChartAreaNumber,p);if(z){AB=z;if(AB>this.mLegendItemCount){AB=this.mLegendItemCount;}}}this.mLegendItemCount+=AB;}else{if(y>=b.DssGraphTypeHiLo_Stock_Chart&&y<=b.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){for(x=0;x<3;++x){z=AC.GetProperty(e.DssGraphShowMetric1+x,p);if(z){if(z!==B){this.mLegendItemIndexToStockMetricIndex[this.mLegendItemCount++]=x;z=AC.GetProperty(e.DssGraphMetric1Value+x,p);if(z){this.mStockMetricValue[x]=z;}z=AC.GetProperty(e.DssGraphMetric1Style+x,p);if(z){this.mStockMetricLayout[x]=z;}}}}}}}mstrmojo.chart.Legend=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Legend",mDatasetPtr:null,mLegendArea:null,mArea:null,mGraphOptionsLegend:null,mStockMetricLayout:null,mStockMetricValue:null,mLegendMarkerLines:null,mItemMargin:0,mEdgeMargin:0,mLegendMarkerSize:0,mIsExpanded:false,mLegendItemCount:0,mLegendItemIndexToStockMetricIndex:null,init:function n(u){this._super(u);this.mDatasetPtr=u.DataSet||null;this.mLegendArea=u.Area?new W.Rect2D({Rect2D:u.Area}):null;this.mArea=u.Area?new W.Rect2D({Rect2D:u.Area}):null;this.mGraphOptionsLegend={mShowLegend:true,mShowSeriesTitles:true,mLegendPosition:K.LL_LegendOnRightSide,mLegendMarkersStyle:s.LMS_LeftOfText,mLegendBoxStyle:S.BS_NOFRAME,mLegendItemsNum:0,mAxisLabelsAutoFit:true,mVertical:true,mRecalculate:false,mReposition:false,mIsByGroup:false};this.mStockMetricLayout=[0,0,0];this.mStockMetricValue=new Array(3);this.mLegendMarkerLines=[];this.mLegendItemIndexToStockMetricIndex={};H.call(this);},GenerateMapAndList:function l(){var AA=this.mChartContextPtr,z,w,x,y,u;z=new W.TripleId({ObjectId:f.DssGraphLegendText});w=new W.GraphCollectionObject({TripleId:z,GraphObjectManager:this,CollectionType:L});this.AddToMap(w);x=AA.GetFormatFont(new W.TripleId({ObjectId:f.DssGraphLegendText}));w.SetFormatFont(x);Y.call(this,x);this.mLegendArea=J.call(this,this.mArea,w);y=AA.GetProperty(e.DssGraphLegendBox,p);if(y===null||y===undefined){y=S.BS_NOFRAME;}z=new W.TripleId({ObjectId:f.DssGraphLegendArea});u=new W.FancyBoxObject({TripleId:z,GraphObjectManager:this,BoxStyle:y,Area:this.mLegendArea});this.AddToMapAndList(u);},GetLegendArea:function k(){return this.mLegendArea;},CalculateFrame:function R(z,y,x){var u,w;u=this.GetLegendArea();switch(this.mGraphOptionsLegend.mLegendPosition){case I.DssGraphLegendPositionRight:if(u.width<this.mArea.width*d){x.width=u.x-z-this.mArea.x;}break;case I.DssGraphLegendPositionLeft:if(u.width<this.mArea.width*d){w=this.mArea.x+this.mArea.width;x.x=u.x+u.width+z;x.width=w-x.x;}break;case I.DssGraphLegendPositionBottom:if(u.height<this.mArea.height*d){x.height=u.y-y-this.mArea.y;}break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}},Draw:function c(){var x=this.mGraphObjectList,y=this.mLegendMarkerLines,u,w;x[0].Draw();u=y.length;for(w=0;w<u;++w){y[w].Draw();}u=x.length;for(w=1;w<u;++w){x[w].Draw();}},SetFormatLineOfLegendMarkerLine:function h(AC,AF,y){var w=this.mChartContextPtr,z,AA,AE,AB,u,AD;if(y===undefined){y=false;}z=this.GetGraphObject(new W.TripleId({ObjectId:f.DssGraphLegendMarker,SeriesId:AF}));if(!z){return false;}AA=z.mMarkerPosition;AE=z.mMarkerSize;AB=w.mIsGraphMatrix?1:1.75;u=y?new W.Point2D({x:AA.x,6:AA.y-AB*AE}):new W.Point2D({x:AA.x-AB*AE,y:AA.y});AD=y?new W.Point2D({x:AA.x,y:AA.y+AB*AE}):new W.Point2D({x:AA.x+AB*AE,y:AA.y});var x=new W.StraightLineObject({TripleId:new W.TripleId({ObjectId:f.DssGraphLegendMarker,SeriesId:AF}),GraphObjectManager:this,StartPoint:u,EndPoint:AD});x.SetFormatLine(AC);this.mLegendMarkerLines.push(x);return true;},UpdateFormatForLegendMarker:function r(u,AB,y,AA,w){if(u<0||u>=this.mLegendItemCount){return ;}AA=(AA!==undefined)?AA:false;w=(w!==undefined)?w:false;var z=new W.TripleId({ObjectId:f.DssGraphLegendMarker,SeriesId:u});var x=this.GetGraphObject(z);if(!x){return ;}if(AB){x.SetFormatFill(AB);}if(y){if(AA){this.SetFormatLineOfLegendMarkerLine(y,u,w);}else{x.SetFormatLine(y);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","Axis","ChartAdvFormat","NumberObject","AxisObject","Vector2D","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphOffScaleType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumNumberCategory","EnumCollectionType","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphMarkerShape");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresCls("mstrmojo.gm.GMUtility");var AL=mstrmojo.hash,BY=mstrmojo.chart,BU=BY.ChartConstants,BE=BY.enums,BR=mstrmojo.VisUtility,b=BE.EnumGraphMajorType,Aq=BE.EnumDSSGraphOffScaleType,a=BE.EnumAnchorPoint,U=BE.EnumAxisLabelsLocation,h=BE.EnumAxisDirection,AM=BE.EnumGraphObjectType,t=BE.EnumCollectionType,BT=BY.model,AW=BT.enums,f=AW.EnumDSSGraphMarkerShape,A0=AW.EnumDSSGraphType,A3=AW.EnumDSSGraphProperty,A5=AW.EnumDSSGraphObject,A4=AW.EnumDSSExtraGraphProperty,BI=AW.EnumDSSGraphFontRotation,q=AW.EnumDSSGraphGridLineType,r=BE.EnumRectExpandDirection,S=BE.EnumGraphMatrixMajorGraphType,AP=BY.common.Utility,A8=mstrmojo.gm,AE=A8.GMUtility,BX=0,AI=1e-14,AC=10000,BV=0.1;var AG=new BY.Rect2D(),Bh=new BY.Rect2D(),N=new BY.Rect2D(),Q=null,E=null,AB=null,V=null,x=new BY.TripleId();function Az(Bi){switch(Bi){case A5.DssGraphY2Body:case A5.DssGraphX2Body:return true;}return false;}function BO(Bp,Bo,Bk){var Bn=Bp,Bl=10,Bi=this.mChartContextPtr,Bm=Bi.mGraphWidth,Bj=Bi.mGraphHeight,Br=this.IsVerticalAxis();if(Bk===undefined){var Bq=Br?Bj:Bm;if((Br^Bo)===0){Bk=0.5*Bp;}else{Bk=0.5*(Bq-Bp);}}Bk=Bo?-Bk:Bk;if(!Br){Bk=-Bk;}Bn+=Bk;if(Bn<Bl||Bn+Bl>(Br?Bj:Bm)){return null;}return Bn;}function Af(){var Bj=this.mChartContextPtr,Br=Bj.GetGraphMatrixContext(),Bs={Include:false,DrawFromZero:false};if(Br.isCombinationChart()){var Bn=Bj.mDataset,Bm=Bn.GetSeriesByShape(),Bu=this.mTripleId.mObjectId,Bt=false,Bq=Az.call(this,Bu),Bo=Bm.Bar,Bl=Bm.Area,Bk=0,Bi=0;var Bw=Bn.GetSeriesCount();if(Bj.IsDualAxis()){var Bp=Bq?1:0,Bv=Bq?"Secondary":"Primary";Bm=Bn.GetShapesDistributionByValueAxis(Bp)[Bv];Bo=Bm.BAR;Bl=Bm.AREA;Bw=Bn.GetSeriesByValueAxis(Bp).length;Bt=(Bo&&Bo.indexOf(Bp)!==-1)||(Bl&&Bl.indexOf(Bp)!==-1);}else{Bt=((Bo&&Bo.length>0)||(Bl&&Bl.length>0));}Bt=!!Bt;Bs.Include=Bt;if(Bo&&Bo.length>0){Bk=Bo.length;}if(Bl&&Bl.length>0){Bi=Bl.length;}Bs.DrawFromZero=(Bi+Bk===Bw);}return Bs;}function J(Bi){return Math.log(Bi)/Math.log(10);}function R(){return this.mOptions.mUseMinValue&&this.mOptions.mShowMinLabel;}function Ax(){return this.mGraphMajorType===b.GMT_HISTOGRAM&&this.mTripleId.mObjectId===A5.DssGraphX1Body;}function I(){var Bi=this.mChartContextPtr;if(Bi.mIsGraphMatrix){return !this.IsVerticalAxis();}if(!this.mChartContextPtr.mManualLayoutMode&&this.mTripleId.mObjectId===A5.DssGraphX1Body&&!this.IsVerticalAxis()){switch(this.mGraphMajorType){case b.GMT_HISTOGRAM:case b.GMT_SCATTER:case b.GMT_BUBBLE:return true;default:break;}}return false;}function AK(){var B0,Bl,Bt,Bz,Bk,Bw=0,Bq=this.mOptions,By,Bn,Br,Bm=0;var Bj=this.mChartContextPtr,Bp=Bj.mIsGraphMatrix,Bi=Bj.getUniformAxisLabelRotateMode("x");B0=[];this.GetTicks(B0);if(B0.length<2){if(!Bp||Bi===BI.Automatic){return ;}}Bt=BY.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(Bt,AM.GOT_AXIS_LABEL);Bk=this.mpAxisLabelSet.GetFormatFont();if(Bp){if(Bi!==BI.Automatic){Bk.mFontRotation=Bi;return ;}}By=B0.length;Bz=50;Bl=false;AG.Reset(0,0,0,0);Bk.mFontRotation=BI.Normal;if(!Bp&&By>=2){if(this.mOptions.mUseMinValue){Bw=1;Bm=1;}if(this.mOptions.mUseMaxValue){By--;}}var Bu,Bv=Bw,Bx=this.mChartContextPtr.GetGraphMatrixContext();for(Bu=0;Bw<By;Bw++){if(this.hasLabelCreated){Bn=this.mLabelList[Bw];}Bn=Bn||new BY.NumberObject({TripleId:Bt,GraphObjectManager:this,Number:B0[Bw],NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});Bn.MoveTo(this.ValueToPosition(B0[Bw]),Bz,a.CENTER);Br=Bn.GetBoundingRect(true);if(Bw!==Bm){if(Bp){var Bs=(Bw===1&&Bq.mUseMinValue)||(Bw===By-1&&Bq.mUseMaxValue);if(!Bs){var Bo=1;Bl=Br.HasIntersection(AG)||Bx.checkPaddingBetweenLabels(AG,Br,Bo,true);}}else{Bl=Br.HasIntersection(AG);}}AG.ResetRect(Br);}this.hasLabelCreated=this.mpAxisLabelSet.GetCollectionSize()===By;if(Bl){Bk.mFontRotation=Bp?BI.Rotate90:BI.Rotate270;}else{Bk.mFontRotation=BI.Normal;}this.maxLabelLength=this.fakeMaxLabelLength;if(this.maxLabelLength!==-1){this.restoreLabels(true);for(Bu=0;Bv<By;Bv++){Bn=this.mLabelList[Bv];Bn.MoveTo(this.ValueToPosition(B0[Bv]),Bz,a.CENTER);}}}function Ab(){switch(this.mChartContextPtr.GetGraphType()){case A0.DssGraphTypeVertical_Area_DualAxis_Absolute:case A0.DssGraphTypeVertical_Area_DualAxis_Stacked:case A0.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case A0.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case A0.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case A0.DssGraphTypeVertical_Bar_DualAxis_Stacked:case A0.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case A0.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case A0.DssGraphTypeVertical_Line_DualAxis_Absolute:case A0.DssGraphTypeVertical_Line_DualAxis_Stacked:case A0.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case A0.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case A0.DssGraphTypeVertical_Bar_DualAxis_Absolute:case A0.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:return true;default:return false;}}function g(){if(this.mUseDepth){return(Az.call(this,this.mTripleId.mObjectId)===false||!(Ab.call(this)));}return this.mAxisInfo.mShowAxisLine;}function z(Bk,Bi){var Bj;Bj=new BY.NumberObject({TripleId:Bk,GraphObjectManager:this,Number:Bi,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectedCondense:this.mCondenseLabels});this.mGraphObjectList.push(Bj);this.mpAxisLabelSet.AddGraphObject(Bj);}function Bg(){var Bk,Bi,Bl,Bj;Bk=[];this.GetTicks(Bk);Bi=Bk.length;Bl=this.mLabelObjectId;for(Bj=0;Bj<Bi;++Bj){z.call(this,Bl,Bk[Bj]);}}function AD(Bq,Bj,Bo){var Bl=this.mChartContextPtr,Br=this.mOptions,Bi=Bj,Bn=Bo;var Bk=Bl.mIsGraphMatrix&&Br.mUseCustomMinMax;if(!Bl.mIsTimeSeriesChart&&!Bk){if(Bl.mIsGraphMatrix){var Bp=1e-9,Bm=Math.abs((Bq-this.mMaxTick)/(this.mMaxTick-this.mMinTick));if((Bq<this.mMinTick||(Bq>this.mMaxTick&&Bm>Bp))&&Br.mOffScaleType===Aq.DssGraphOffScaleHide){return{Flag:false,Value:Bq,Min:Bi,Max:Bn};}if(Bq>this.mMaxTick&&Br.mOffScaleType===Aq.DssGraphOffScaleHide){Bq=this.mMaxTick;}}else{if((Bq<this.mMinTick||Bq>this.mMaxTick)&&Br.mOffScaleType===Aq.DssGraphOffScaleHide){return{Flag:false,Value:Bq,Min:Bi,Max:Bn};}}if(Br.mOffScaleType===Aq.DssGraphOffScaleClip){Bq=(Bq>this.mMaxTick)?this.mMaxTick:Bq;Bq=(Bq<this.mMinTick)?this.mMinTick:Bq;}}Bi=this.mMinTick;Bn=this.mMaxTick;if(this.IsLogarithmic()){if(Bq<=0){return{Flag:false,Value:Bq,Min:Bi,Max:Bn};}Bq=J.call(this,Bq);Bi=J.call(this,Bi);Bn=J.call(this,Bn);}return{Flag:true,Value:Bq,Min:Bi,Max:Bn};}function C(){}function AY(Bl){if(AB===null){AB=new BY.Point2D();}else{V.Reset(0,0);}if(V===null){V=new BY.Point2D();}else{V.Reset(0,0);}var Bj=AB,Bn=V,Bk=this.mDeviceDataArea,Bi,Bm;Bi=this.IsVerticalAxis()?Bk.x:Bk.x+Bk.width;Bm=this.IsVerticalAxis()?Bk.y:Bk.y+Bk.height;Bj.Reset(Bi,Bm);Bn.Reset(Bk.x+Bk.width,Bk.y);if(this.IsVerticalAxis()){Bj.y=this.ValueToPosition(Bl);Bn.y=Bj.y;}else{Bj.x=this.ValueToPosition(Bl);Bn.x=Bj.x;}return{LowEnd:Bj,HighEnd:Bn};}function Be(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bm=this.mOptions;if(Bm.mUseCustomMinMax||Bm.mUseLogarithmicScale){return ;}var Bk=false,Bi=false,Bl=[];this.GetTicks(Bl);if(Bl.length>=2){var Bj=Bl.length;Bi=((Math.abs(this.mMaximum-Bl[Bj-2])<BV*this.mStep));Bk=((Math.abs(this.mMinimum-Bl[1])<BV*this.mStep));if(this.mIsPercent){Bi=false;}}if(Bi&&Bk){this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;Bm.mUseMinValue=true;Bm.mShowMinLabel=false;Bm.mUseMaxValue=true;Bm.mShowMaxLabel=false;}else{if(Bi){this.mMaxTick=this.mMaximum;Bm.mUseMaxValue=true;Bm.mShowMaxLabel=false;}else{if(Bk){this.mMinTick=this.mMinimum;Bm.mUseMinValue=true;Bm.mShowMinLabel=false;}else{BX++;}}}if(Bm.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}function Aw(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}if(this.mGraphMajorType===b.GMT_BUBBLE&&this.mTripleId.mObjectId===A5.DssGraphZBody){return ;}Be.call(this);}function w(){var Bm=this.mChartContextPtr;if(!Bm.mIsGraphMatrix){return false;}var Bl=Bm.mDataset;if(!Bl){return false;}if(!this.mIsUniformAxis){var Bk=Bm.GetGraphMatrixContext();if(Bk.isPieOrRingShape()===false&&Bl.showDatalabels()===false){return true;}if(Bk.isPieOrRingShape()===true&&Bl.showPieDatalabels()===false){return true;}}if(this.mPrimaryMetrics){if(!!this.mNumberFormat.isDefault){this.mNumberFormat=new BY.ChartAdvFormat();}var Bj=Bl.getValueAxisNumberFormat(this.mNumberFormat,this.mPrimaryMetrics);if(this.mIsPercent===false){return Bj;}}var Bi=this.mNumberFormat;if(this.mIsPercent){Bi.mFormatType=4;Bi.mCustomFormat="0%";return true;}return false;}function AT(Bl){var Bj,Bk,Bi;for(Bj=0;Bj<2;Bj++){Bk=(Bj===0)?this.mHighTicksToLabel:this.mLowTicksToLabel;Bi=Bk[Bl];if(Bi&&Bi.mIsShown){return Bi;}}return null;}function AX(Bn,Bk){var Bl,Bm=this.mChartContextPtr;if(Bm.mIsGraphMatrix){if(this.IsVerticalAxis()){if(Bk.y===Bm.mGraphHeight){--Bk.y;--Bn.y;}}if(Bm.isUADataAreaOutput()){var Bj=Bm.GetGraphMatrixContext().getPadding(BU.kEndTickToChart),Bi=Bm.getUniformAxisContext();if(this.IsVerticalAxis()){if(Bi.mDataAreaRightMargin>=0){if(Bn.x+Bi.mDataAreaRightMargin<=Bm.mGraphWidth){Bn.x+=Bi.mDataAreaRightMargin;}else{Bn.x=Bm.mGraphWidth;}}if(Bi.mDataAreaLeftMargin>=0){if(Bk.x>=Bi.mDataAreaLeftMargin){Bk.x-=Bi.mDataAreaLeftMargin;}}Bl=Bm.mGraphHeight;if(Math.abs(Bk.y-Bl)<Bj||Math.abs(Bk.y)<Bj){return false;}}else{if(Bi.mDataAreaBottomMargin>=0){if(Bk.y+Bi.mDataAreaBottomMargin<=Bm.mGraphHeight){Bk.y+=Bi.mDataAreaBottomMargin;}else{Bk.y=Bm.mGraphHeight;}}if(Bi.mDataAreaTopMargin>=0){if(Bn.y>=Bi.mDataAreaTopMargin){Bn.y-=Bi.mDataAreaTopMargin;}}Bl=Bm.mGraphWidth;if(Math.abs(Bk.x)<Bj||Math.abs(Bn.x-Bl)<Bj){return false;}}}}return true;}function Ae(Bq,Br,Bs,Bk){var Bt,Bu,Bm,Bn,Bi=[],Bj=this.mChartContextPtr,Bl;if(Br>this.mMaxTick||Br<this.mMinTick){return ;}if(Bj.mIsGraphMatrix){if(this.mAxisInfo.mAxisDirection>=h.AD_Z){return ;}if(Bj.isUADataAreaOutput()){var Bp=Bj.GetGraphMatrixContext().mShownValueTickSet[this.mAxisInfo.mAxisDirection];if(Bp[Br]===undefined){return ;}}if(this.mIsUniformAxis){if(this.mAxisInfo.mShowAxisLabels===false){return ;}var Bo=AT.call(this,Br);if(!Bo||!Bo.mIsShown){return ;}}}Bl=AY.call(this,Br);Bt=Bl.LowEnd;Bu=Bl.HighEnd;if(!AX.call(this,Bu,Bt)){return ;}Bm=Bk?this.mMajorGrid.mGridStyle:this.mMinorGrid.mGridStyle;Bn=Math.floor(Bk?this.mTickLength:this.mTickLength*2/3+1);this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,Bm,Bn,Bt,Bu,Bi);this.GenerateOneLineObject(Bq,Bi,Bs);if(this.HasTwoGridLineParts(Bm)){Bi.splice(0,Bi.length);this.GetOneGridLine(this.IsVerticalAxis()?U.ALL_RIGHT:U.ALL_TOP,Bm,Bn,Bt,Bu,Bi);this.GenerateOneLineObject(Bq,Bi,Bs);}}function u(Bj,Bl,Bi){var Bk=Bj?this.mHighTicksToLabel:this.mLowTicksToLabel;Bk[Bl]=Bi;}function BZ(Bk,Bl){var Bj,Bi=this.mpAxisLabelSet.GetCollectionSize(),Bm=Bk?this.mHighTicksToLabel:this.mLowTicksToLabel;Bm={};if(Bl<0||Bl>=Bi){return ;}for(Bj=Bl;Bj<Bi;Bj++){var Bn=this.mpAxisLabelSet.GetObjectByIndex(Bj);if(Bn){u.call(this,Bk,Bn.mNumber,Bn);}}}function P(Bi,Bk){if(Bk<=0){return 0;}var Bp=this.mOptions,Bo=this.mMaxTick,Bm=this.mMinTick,Bn=this.mMaximum,Bl=this.mMinimum,Bj;if(Bp.mUseLogarithmicScale){Bn=Bn<=0?-1:J.call(this,Bn);Bl=Bl<=0?-1:J.call(this,Bl);Bo=J.call(this,Bo);Bm=J.call(this,Bm);}Bj=Bi?Bo-Bn:Bl-Bm;Bj=Math.abs(Bj);return Bj/(Bo-Bm)*Bk;}function BG(){var Bk,Bl,Bi,Bj;if(this.mIsUniformAxis){Bk=this.mTripleId;}else{Bk=BY.gAxisObjects[this.getIndex()].mMajorId;}if(this.hasMajorTickCreated){this.clearTickObjects(Bk,true);this.hasMajorTickCreated=false;}this.InitObjectSet(Bk,AM.GOT_MAJOR_GRID);if(this.mChartContextPtr.mIsGraphMatrix){Ae.call(this,Bk,this.mMinTick,this.mpMajorGridSet,true);Ae.call(this,Bk,this.mMaxTick,this.mpMajorGridSet,true);}else{Bl=true;Bi=this.mChartContextPtr.GetProperty(A3.DssGraphLineAlpha,new BY.TripleId({ObjectId:A5.DssGraphFrame}));if(Bi){Bl=(Bi>0);}if(!Bl||this.mAxisInfo.mAxisDrawInReverse){Ae.call(this,Bk,this.mMinTick,this.mpMajorGridSet,true);}if(!Bl||!this.mAxisInfo.mAxisDrawInReverse){Ae.call(this,Bk,this.mMaxTick,this.mpMajorGridSet,true);}}for(Bj=0;Bj<this.mTicks.length;++Bj){Ae.call(this,Bk,this.mTicks[Bj],this.mpMajorGridSet,true);}this.hasMajorTickCreated=true;}function O(){var Bl,Bk=this.mOptions,Bi,Bn,Bm,Bj;Bl=1;if(Bk.mUseLogarithmicScale){Bl=8;}else{if(this.mMinorGrid.mUseManualGrid){Bl=Math.floor(this.mMinorGrid.mGridInterval);}}if(this.mIsUniformAxis){Bi=this.mTripleId;}else{Bi=BY.gAxisObjects[this.getIndex()].mMinorId;}if(this.hasMinorTickCreated){this.clearTickObjects(Bi,false);this.hasMinorTickCreated=false;}this.InitObjectSet(Bi,AM.GOT_MINOR_GRID);Bn=this.mStep/(Bl+1);for(Bm=0;Bm<this.mTicks.length;++Bm){Bn=Bk.mUseLogarithmicScale?this.mTicks[Bm]:Bn;for(Bj=1;Bj<=Bl;++Bj){Ae.call(this,Bi,this.mTicks[Bm]+Bj*Bn,this.mpMinorGridSet,false);}}if(this.mTicks.length===0){Bn=Math.floor(Bk.mUseLogarithmicScale?this.mMinTick:(this.mMaxTick-this.mMinTick)/(Bl+1));for(Bj=1;Bj<=Bl;++Bj){Ae.call(this,Bi,this.mMinTick+Bj*Bn,this.mpMinorGridSet,false);}return ;}Bn=Bk.mUseLogarithmicScale?this.mMinTick:Bn;for(Bj=1;Bj<=Bl;++Bj){Ae.call(this,Bi,this.mTicks[0]-Bj*Bn,this.mpMinorGridSet,false);}this.hasMinorTickCreated=true;}function Bf(){var Bl=this.mChartContextPtr;if(Bl.mIsGraphMatrix&&!Bl.isUADataAreaOutput()){if(this.mAxisInfo.mAxisDirection>=h.AD_Z){return ;}var Bj=Bl.GetGraphMatrixContext(),Bi=Bj.mShownValueTickSet[this.mAxisInfo.mAxisDirection]={},Bk=function(Bm){AL.forEach(Bm,function(Bn){if(Bn.mIsShown){Bi[Bn]=true;}});};Bk(this.mHighTicksToLabel);Bk(this.mLowTicksToLabel);}}function Av(Bj,Bl,Bk){var Bi=this.ValueToFloatPosition(Bj),Bm=Bl+0.5*Bk,Bn=this.mChartContextPtr;if(Bi>=Bm&&Bi+Bm<=Bn.mGraphWidth){return true;}return false;}function e(){var Bj=this.mChartContextPtr,Bn=Bj.GetGraphMatrixContext(),Bo=this.mDeviceDataArea,Bq=this.IsVerticalAxis(),Bi,Br=this.mpAxisLabelSet.mFormatFontPtr,Bk=Bn.getPadding(BU.kEndLabelToChart);if(Bq){Bi=Math.max(Bo.height,Bj.mGraphHeight);}else{Bi=Math.max(Bo.width,Bj.mGraphWidth);}if(Bi<Br.mFontSize+2*Bk){return false;}if(Bi<Br.GetStringHeight("H")+2*Bk){return false;}if(Bo.width>=0&&Bo.height>0){var Bp=[];this.GetTicks(Bp);var Bl,Bm=Bp.length;for(Bl=0;Bl<Bm;Bl++){if(Av.call(this,Bp[Bl],Bk,Br.mFontSize)===true){return true;}}}return true;}function X(){if(this.hasLabelCreated){var Bj,Bk=this.mLabelList,Bi=Bk.length;for(Bj=0;Bj<Bi;Bj++){if(Bk[Bj]&&Bk[Bj].mIsShown){return true;}}return false;}return e.call(this);}function K(Bk){var Bl=this.mChartContextPtr,Bj=0,Bi=0;if(Bl.mIsGraphMatrix){Bi=Bj=Bl.GetGraphMatrixContext().getPadding(BU.kChartToChart);if(Bk){Bi=Bj=0;}else{if(this.mMaxTick<=0){Bj=0;}if(this.mMinTick>=0){Bi=0;}}}return{LowPadding:Bi,HighPadding:Bj};}function Ah(){var Bm=this.mChartContextPtr,Bj=0,Bi=Bm.GetGraphMatrixContext(),Bl=Bm.mDataset.GetGroupCount();if(Bm.mIsGraphMatrix===false){return 0;}if(Bi.isCombinationChart()){var Bk=Bm.mDataset.GetSeriesByShape();if(Bk.Circle&&Bk.Circle.length){return Bi.getPadding(BU.kExtra);}if(Bk.Square&&Bk.Square.length){return Bi.getPadding(BU.kExtra);}if(Bk.Circle&&Bk.Circle.length){return Bi.getPadding(BU.kExtra);}if((Bk.Line&&Bk.Line.length)||(Bk.Area&&Bk.Area.length)){if(Bl===1){return Bi.getPadding(BU.kExtra);}}return 0;}switch(Bm.GetGraphMatrixGraphMajorType()){case S._BUBBLE:case S._SCATTER:case S._PIE:Bj=Bi.getPadding(BU.kExtra);break;case S._LINE:case S._AREA:if(Bl===1||Bi.mMarkerShape!==f.DssGraphMarkerShapeNone){Bj=Bi.getPadding(BU.kExtra);}break;}return Bj;}function W(Bq,B5,B1,B0){var Bl=this.mChartContextPtr,Bu=0,Bm=0,Bv=0,B4=0,Bz=0,B2=0,Bs=0,Br=B1,Bj=B0,Bx=this.mTripleId.mObjectId===A5.DssGraphY1Body||this.mTripleId.mObjectId===A5.DssGraphX1Body,Bp=this.mAxisInfo.mAxisDirection===h.AD_X,Bn=this.mOptions.mUseCustomMinMax,Bi=!Bn||(Bn&&!this.mOptions.mUseMinValue),Bk=!Bn||(Bn&&!this.mOptions.mUseMaxValue),Bw=Bl.mUniformAxisContext,B3=Bl.GetGraphMatrixContext();if(Bk){Bu=Ah.call(this);B2=B3.GetValueAxisPadding(Bp,true,Bx);B2=B2>0?B2+Bu:B2;Bm=P.call(this,true,B5-B2-Bs);B4=B2-Bm;Br=Math.max(Br,B4);}if(Bi){Bu=Ah.call(this);Bs=B3.GetValueAxisPadding(Bp,false,Bx);Bs=Bs>0?Bs+Bu:Bs;Bv=P.call(this,false,B5-B2-Bs);Bz=Bs-Bv;Bj=Math.max(Bj,Bz);}var Bt=0,Bo=Bp?Bw.mDataAreaRightMargin:Bw.mDataAreaTopMargin,By=Bp?Bw.mDataAreaLeftMargin:Bw.mDataAreaBottomMargin;if(!Bq){Bt=Br;if(Bo>=0&&Bo<Bt){Br=Bt-Bo;}else{Br=0;}Bt=Bj;if(By>=0&&By<Bt){Bj=Bt-By;}else{Bj=0;}}return{HighPadding:Br,LowPadding:Bj};}function F(Bl,Bk,Bo,Bj){var Bi=Bo,Bn=Bk,Bm=(this.mAxisInfo.mAxisDirection===h.AD_X)?Bj.width:Bj.height;if(Bi<0){Bi=0;}if(Bn<0){Bn=0;}if(Bm<=0||Bm<Bi+Bn){return ;}Bm-=Bi+Bn;this.mLowTrim=Bi;this.mHighTrim=Bn;if(!Bl){this.mIsTrimmedWithPadding=true;}if(this.mAxisInfo.mAxisDirection===h.AD_X){Bj.x+=Bi;Bj.width=Bm;}if(this.mAxisInfo.mAxisDirection===h.AD_Y){Bj.y+=Bn;Bj.height=Bm;}}function n(){if(this.mChartContextPtr.mIsGraphMatrix&&this.mOptions.mUseCustomMinMax){return AC;}return 32757;}function Aj(Bj,Bl){var Bk=this.mChartContextPtr,Bi=Bj.GetBoundingRect(true);if(this.IsVerticalAxis()){return(Bi.y>=Bl&&Bi.y+Bi.height+Bl<=Bk.mGraphHeight);}return(Bi.x>=Bl&&Bi.x+Bi.width+Bl<=Bk.mGraphWidth);}function AU(Bn,Bp){var Bo=this.mChartContextPtr,Bi=0,Bl=Bn-1;if(!Bo.mIsGraphMatrix){return -1;}if(this.mIsPercent&&!this.mOptions.mUseCustomMinMax){if(Bp&&this.mMaxTick===1){return Bl;}if(this.mMinTick===-1){return Bi;}}var Bk,Bm=Bo.GetGraphMatrixContext().getPadding(BU.kEndLabelToChart),Bj=this.mGraphObjectList;if(Bp){while(Bl>=0){Bk=Bj[Bl];if(!Bk.mIsShown){Bl--;continue;}if(Aj.call(this,Bk,Bm)){return Bl;}Bk.mIsShown=false;Bl--;}}else{while(Bi<=Bl){Bk=Bj[Bi];if(!Bk.mIsShown){Bi++;continue;}if(Aj.call(this,Bk,Bm)){return Bi;}Bk.mIsShown=false;Bi++;}}return -1;}function A9(B3,Bo,Bj,Bn,Bk){var Bw=true,B0=this.mChartContextPtr.mIsGraphMatrix,B2=B0&&this.mIsPercent,Bp=1,By=this.mLabelSpan,Bl=this.mOptions,Bm=this.mGraphObjectList,Bt=Bm[Bn],Bq=Bt;while(Bw){Bw=false;var Bz=B2?Bn-Bp:Bn+Bp,B1=B2?(Bz>=Bo):(Bz<Bj);while(B1){var Bx=Bm[Bz];if(Bx.HasOverlapForSameRotation(Bq,By,Bk)){Bw=true;Bq=Bt;++Bp;break;}else{Bq=Bx;}Bz+=B2?-Bp:Bp;B1=B2?(Bz>=Bo):(Bz<Bj);}}var Bu=this.mIsPercent?(Bn-Bo)/Bp:(Bj-Bn)/Bp;Bu=Math.floor(Bu);if(Bu<3){return Bp;}var Bv,Bi,Br=AU.call(this,Bj,false),Bs=AU.call(this,Bj,true);if(Br===-1||Bs===-1){return Bp;}if(this.mIsPercent){if(Br<=Bn-Bu*Bp){return Bp;}if(Br===0&&Bl.mUseMinValue&&Bl.mShowMinLabel&&this.mMinTick!==-1){Br++;}Bv=(Bn-Br)/Bp;Bi=(Bn-Bv*Bp)-Br;Bp+=Bi/Bv;}else{if(Bs>=Bn+Bu*Bp){return Bp;}Bv=(Bs-Bn)/Bp;Bi=Bs-(Bn+Bv*Bp);Bp+=Math.floor(Bi/Bv);}return Bp;}function B(Bs,Bk,Bm,Bj,Br){var Bo,Bi=this.mChartContextPtr,Bp=Bi.mIsGraphMatrix,Bt=Bi.mIsTimeSeriesChart;if(this.mOptions.mShowMaxLabel){if((!Bp&&!Bt)||(Bp&&this.mIsPercent)){var Bl=((Bk-1-Bm)%Bj);if(Bl!==0){Bo=this.mGraphObjectList[Bk-1];Bo.mIsShown=true;var Bn=Bk-1-Bl,Bq=this.mGraphObjectList[Bn];if(Bo.HasOverlapForSameRotation(Bq,this.mLabelSpan,Br)&&(Bn>Bs||!this.mOptions.mShowMinLabel)){Bq.mIsShown=false;}}}else{if(Bp&&this.mOptions.mUseMaxValue&&Bk-Bs>2){Bo=this.mGraphObjectList[Bk-1];Bo.mIsShown=false;}}}}function AH(Bk){var Bi,Bj=this.mChartContextPtr.mIsGraphMatrix;if(this.mOptions.mShowMinLabel){if(Bj){if(this.mIsPercent&&this.mMinTick===-1){Bi=this.mGraphObjectList[Bk];Bi.mIsShown=true;}else{if(this.mIsPercent&&this.mOptions.mUseMinValue){Bi=this.mGraphObjectList[Bk];Bi.mIsShown=false;}}}}}function BF(Bq,Bj,Bn,Bk,Bl,Bs,Br){var Bo=Bj,Bm=Bl?1:-1,Bi=0,Bp=Bl?(Bk?Bo-Bn<=0:Bo-Bn<0):(Bk?Bo-Bn>=0:Bo-Bn>0);while(Bp){if(Bl){Bi=Bo-Bs;}else{Bi=Bs-Bo;}if(Bi%Bq!==0){this.mGraphObjectList[Bo].mIsShown=false;}else{if(Br&&Br(Bo,Bq,Bj,Bn)){this.mGraphObjectList[Bo].mIsShown=false;}}Bo+=Bm;Bp=Bl?(Bk?Bo-Bn<=0:Bo-Bn<0):(Bk?Bo-Bn>=0:Bo-Bn>0);}}function y(Bj,Bk,Bq,Bl,Bi){var Bo=Bi,Bp=function(Bt,Bs,Bv,Bu){return Bt===Bu;},Br=function(Bt,Bs,Bv,Bu){return Bt<Bs+Bu;};if(this.mChartContextPtr.mIsGraphMatrix&&this.mIsPercent){if(this.mMinTick===-1){if(this.mMaxTick===0){BF.call(this,Bo,Bk,Bl,true,true,0,Bp);}else{var Bn=(Bl-Bk)/Bi,Bm=(Bl-Bk)/Bn;BF.call(this,Bm,Bl-1,Bk,false,false,Bl,Br);Bo=Bm;}}else{BF.call(this,Bo,Bl-1,Bk,true,false,Bl);}}else{BF.call(this,Bo,Bl+1,Bq,false,true,Bl);}return Bo;}function k(Br,Bo,Bk){if(Bo>this.mMaxTick||Bo<this.mMinTick){return ;}var Bp={},Bq={},Bn,Bs=false,Bi=[];Bn=AY.call(this,Bo);Bp.x=Bn.LowEnd.x;Bp.y=Bn.LowEnd.y;Bq.x=Bn.HighEnd.x;Bq.y=Bn.HighEnd.y;var Bj=this.mChartContextPtr;if(Bj.mIsGraphMatrix){if(this.IsVerticalAxis()){Bs=Bp.y===Bj.mGraphHeight||Bp.y===0;}else{Bs=Bp.x===Bj.mGraphWidth||Bp.x===0;}}if(Bs){return ;}if(Bj.mIsGraphMatrix){if(this.IsVerticalAxis()){Bp.x=Math.min(Bp.x,0);Bq.x=Math.max(Bq.x,Bj.mGraphWidth);}else{Bq.y=Math.min(Bq.y,0);Bp.y=Math.max(Bp.y,Bj.mGraphHeight);}}if(this.mUseDepth){if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){Bp.swapPoints(Bq);}Bi.push(Bq.Shifted(this.mDepthOffset));}Bi.push(Bq);Bi.push(Bp);var Bl=new BY.TripleId({ObjectId:Bk,SeriesId:0,GroupId:0}),Bm;if(this.mTripleId.mSeriesId>0){Bm=this.mpManager.GetGraphObject(Bl,false);}if(!Bm){Bm=new BY.GraphCollectionObject({TripleId:Bl,GraphObjectManager:this,CollectionType:t.CT_LINE});this.mpManager.AddToMap(Bm);}var Bt=new BY.PolyLineObject({TripleId:Bl,GraphObjectManager:this,PolyLine:Bi,GraphCollectionObject:Bm});Bm.AddGraphObject(Bt);Br.push(Bt);}function AQ(){this.mTicks.splice(0,this.mTicks.length);var Bi=AE.computeTicksForAxis(this);this.mMaxTick=Bi.mMaxTick;this.mMinTick=Bi.mMinTick;this.mTicks=Bi.mTicks;this.mStep=Bi.mStep;}function BQ(Bm){var Bl,Bi,Bk,Bj;Bl=0;Bi=this.mTicks.length+(this.mOptions.mShowMinLabel?1:0)+(this.mOptions.mShowMaxLabel?1:0);for(Bk=0;Bk<Bi;++Bk){Bj=this.mGraphObjectList[Bk+this.mLabelStartIndex];if(Bj===undefined){continue;}Bj.GetBoundingRectEx(Bh);if(Bm){Bl=(Bl<Bh.width)?Bh.width:Bl;}else{Bl=(Bl<Bh.height)?Bh.height:Bl;}}return Bl;}function Ac(Bo,Bm,Bq){var Bj,Bi,Bp,Bn,Bl=true,Bk=this.mLabelArea;Bj=this.mGraphObjectList[Bo];if(!Bj){return ;}if(this.mUseDepth){Bi=new BY.Point2D();this.GetLabelOffset(Bm,Bi);Bp=Bi.x;Bn=Bi.y;}else{Bp=Bn=0;}if(Q===null){Q=new BY.Point2D();}else{Q.Reset(0,0);}if(E===null){E=new BY.Point2D();}else{E.Reset(1,0);}switch(Bm){case U.ALL_BOTTOM:case U.ALL_BOTTOM_TOP:Q.x=this.ValueToPosition(Bq)+Bp;Q.y=Bk.y+Bk.height;E.x=0;E.y=1;break;case U.ALL_TOP:Q.x=this.ValueToPosition(Bq)+Bp;Q.y=Bk.y;E.x=0;E.y=-1;break;case U.ALL_LEFT:case U.ALL_LEFT_RIGHT:Q.x=Bk.x;Q.y=this.ValueToPosition(Bq)+Bn;E.x=-1;E.y=0;break;case U.ALL_RIGHT:Q.x=Bk.x+Bk.width;Q.y=this.ValueToPosition(Bq)+Bn;E.x=1;E.y=0;break;default:Bl=false;break;}if(Bl){this.MoveLabel(Bj,Q,E);}}function Ba(){var Bn,Bq=[],Bj,Br,Bl,Bm;this.GetTicks(Bq);if(Bq.length===0){return ;}Bj=new BY.Rect2D({Rect2D:this.mLabelArea});if(this.mIsStagger){Bl=BQ.call(this,this.IsVerticalAxis());if(this.IsVerticalAxis()){Bj.x-=Bl;Bj.width+=Bl*2;}else{Bj.x-=Bl;Bj.height+=Bl*2;}}else{var Bk,Bi,Bp=3,Bs=this.mGraphObjectList,Bo=Bs.length;if(this.hasLabelCreated){Bi=this.IsVerticalAxis()?this.mLabelArea.height:this.mLabelArea.width;Bi-=this.mChartContextPtr.GetGraphMatrixContext().getPadding(BU.kEndLabelToChart)+4;Bk=Bi>Bp;if(Bk===false){for(Bn=0;Bn<Bo;Bn++){Bs[Bn].mIsShown=false;}return ;}}}Br=new BY.Rect2D({Rect2D:this.mLabelArea});Bm=Bq.length;for(Bn=0;Bn<Bm;++Bn){this.mLabelArea=(Bn&1)===0?Br:Bj;Ac.call(this,Bn+this.mLabelStartIndex,this.mAxisInfo.mAxisLabelsLocation,Bq[Bn]);}this.HideOverlappedLabels(this.mLabelStartIndex,this.mLabelStartIndex+Bq.length);if(this.HasLabelsOnBothSides()){for(Bn=0;Bn<Bm;++Bn){this.mLabelArea=(Bn&1)===0?Br:Bj;Ac.call(this,Bn+Bm+this.mLabelStartIndex,this.IsVerticalAxis()?U.ALL_RIGHT:U.ALL_TOP,Bq[Bn]);}this.HideOverlappedLabels(this.mLabelStartIndex+Bm,this.mLabelStartIndex+2*Bm);}Bf.call(this);}function BL(Bj,Bp){var Br,Bi=this.mChartContextPtr,Bn=Bi.mIsGraphMatrix,Bo=Bj+(R.call(this)||Bn?1:0),Bk=false,Bs=this.mLabelList,Bm=Bs.length,Bq=Bi.GetGraphMatrixContext().getPadding(BU.kLabelToChart),Bl;for(Bl=Bo;Bl<Bm;Bl++){Br=Bs[Bl];if(Aj.call(this,Br,Bq)){Bk=true;break;}}if(!Bn){return{Start:Bo,PaddingPossible:Bk};}if(this.mIsPercent){return{Start:Bp-1,PaddingPossible:Bk};}if(Bk){return{Start:Bl,PaddingPossible:Bk};}return{Start:Bo,PaddingPossible:Bk};}function Ay(){var Bp=0,Bo=0,Bq,Bi=this.mChartContextPtr,Bm=Bi.GetGraphMatrixContext(),Bk=this.mOptions,Bj=this.mAxisInfo,Bn=this.mDeviceDataArea,Bl;if(this.mLabelStartIndex>=this.mGraphObjectList.length){return{LowMargin:Bp,HighMargin:Bo};}if(Bk.mUseCustomMinMax){return{LowMargin:Bp,HighMargin:Bo};}if(this.mUseDepth){this.ReserveDepthAxisLine(Bn,false,this.mTripleId.mObjectId!==A5.DssGraphX1Body);}N.Reset(0,0,0,0);Bq=this.mLabelList[this.mLabelStartIndex];Bq.GetBoundingRectEx(N);Bl=this.ValueToPosition(Bq.mNumber);if(Bj.mAxisDrawInReverse){Bo=this.IsVerticalAxis()?N.height/2-(Bl-Bn.y):N.width/2-(Bn.x+Bn.width-Bl);Bo=(Bo<0)?0:Bo;}else{if(Bi.mIsGraphMatrix){if(this.mIsPercent&&this.mMinTick===-1){Bp=this.IsVerticalAxis()?N.height/2-(Bn.y+Bn.height-Bl):N.width/2-(Bl-Bn.x);Bp+=Bm.getPadding(BU.kLabelToChart);}else{Bp=0;}Bp=Math.max(Bp,0);}else{Bp=this.IsVerticalAxis()?N.height/2-(Bn.y+Bn.height-Bl):N.width/2-(Bl-Bn.x);Bp=(Bp<0)?0:Bp;}}N.Reset(0,0,0,0);Bq=this.mLabelList[this.mLabelList.length-1];Bq.GetBoundingRectEx(N);Bl=this.ValueToPosition(Bq.mNumber);if(!Bj.mAxisDrawInReverse){Bo=this.IsVerticalAxis()?N.height/2-(Bl-Bn.y):N.width/2-(Bn.x+Bn.width-Bl);if(Bi.mIsGraphMatrix){if(this.mIsPercent&&this.mMaxTick===1){Bo+=Bm.getPadding(BU.kLabelToChart);}else{Bo=0;}}Bo=(Bo<0)?0:Bo;}else{Bp=this.IsVerticalAxis()?N.height/2-(Bn.y+Bn.height-Bl):N.width/2-(Bl-Bn.x);Bp=(Bp<0)?0:Bp;}if(!this.mUseDepth){return{LowMargin:Bp,HighMargin:Bo};}var Br=this.getDepthMargin(0,0);Bp=(Bp<Br.lowMargin)?0:Bp-Br.lowMargin;Bo=(Bo<Br.highMargin)?0:Bo-Br.highMargin;return{LowMargin:Bp,HighMargin:Bo};}function d(Bl){var Bk=this.mChartContextPtr;if(Bl.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Bl.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Bl.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<AI){var Bj=Bk.mIsGraphMatrix;if(this.mMinimum<-AI||this.mMinimum>AI){var Bi=Math.abs(this.mMinimum)*0.5;if(Bj===false){this.mMaximum=this.mMaximum+Bi;this.mMinimum=this.mMinimum-Bi;}else{if(this.mMaximum>0){this.mMinimum=0;}else{this.mMaximum=0;}}}else{if(Bj===false||Bj&&this.mMinimum!==this.mMaximum){this.mMinimum=-6;this.mMaximum=6;}}}}mstrmojo.chart.ValueAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.ValueAxis",mLargerGridInterval:false,mIsPercent:false,mMinimum:-1,mMaximum:-1,mMaxTick:-1,mMinTick:-1,mStep:-1,mLabelStartIndex:0,mTicks:null,mLabelSpan:0,mIsStagger:false,mNumberFormat:null,mLabelArea:null,mGraphMajorType:b.GMT_CATEGORY,mLabelObjectId:null,mIsMaxZoom:false,mPrimaryMetrics:-1,mHighTicksToLabel:null,mLowTicksToLabel:null,mIsTrimmedWithPadding:false,mCondenseLabels:null,init:function Bb(Bn){Bn.AxisLabelsLocation=U.ALL_LEFT;this._super(Bn);this.mOptions={mUseLogarithmicScale:false,mAlwaysIncludeZero:true,mDrawFromZero:true,mUseMinValue:false,mUseMaxValue:false,mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mDrawSecondCustomLine:false,mUseSmartScaleBreak:false,mOffScaleType:Aq.DssGraphOffScaleHide,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mAxisSecondCustomValue:0,mUseCustomMinMax:false};var Bj=this.mChartContextPtr,Bp=this.mTripleId.mObjectId;this.mTicks=[];this.mHighTicksToLabel={};this.mLowTicksToLabel={};this.mLargerGridInterval=Bn.LargerGridInterval;this.mIsPercent=Bn.IsPercent;this.mMinimum=Math.min(Bn.Max,Bn.Min);this.mMaximum=Math.max(Bn.Max,Bn.Min);this.mLabelStartIndex=0;this.mIsStagger=false;this.mLabelObjectId=null;this.mIsMaxZoom=false;if(Bn.IsShown!==null){this.mIsShown=Bn.IsShown;}if(Bj.mIsTimeSeriesChart){this.mIsShown=true;}if(Bj.mIsUniformAxisMode){this.mIsShown=!Bj.isUADataAreaOutput();}if(this.mIsUniformAxis||Bj.mIsGraphMatrix===false){this.mNumberFormat=new BY.ChartAdvFormat({});}else{this.mNumberFormat=BY.dNF;}if(Bn.PrimaryMetricIndex!==null){this.mPrimaryMetrics=Bn.PrimaryMetricIndex;}else{this.mPrimaryMetrics=[];}if(this.mDeviceDataArea===null){this.mDeviceDataArea=new BY.Rect2D();this.mDeviceDataArea.width=this.mDeviceDataArea.height=-1;}this.mGraphMajorType=Bj.GetGraphMajorType();if(this.mIsUniformAxis===false){if(this.mGraphMajorType===b.GMT_HISTOGRAM){this.mIsShown=this.mIsShown||(this.mTripleId.mObjectId===A5.DssGraphY1Body);if(this.mTripleId.mObjectId===A5.DssGraphX1Body){this.mMaximum+=(this.mMinimum===this.mMaximum)?10:(this.mMaximum-this.mMinimum)*0.01;}}}var Bk=this.mAxisInfo,Bl=this.mOptions,Bm=Bj.GetGraphMatrixContext(),Bq=Bm.AxisLayout;if(Bn.AxisDirection===h.AD_Y){if(Bp!==A5.DssGraphY1Body){Bk.mAxisLabelsLocation=U.ALL_RIGHT;}else{if(Bj.IsBubbleChart()||Bj.IsScatterChart()){var Bo=4;if(Bq&Bo){Bk.mAxisLabelsLocation=U.ALL_RIGHT;}}}}else{if(Bn.AxisDirection===h.AD_X){if(Bp===A5.DssGraphY1Body||Bp===A5.DssGraphX1Body){Bk.mAxisLabelsLocation=U.ALL_BOTTOM;if(Bj.IsBubbleChart()||Bj.IsScatterChart()){var Bi=8;if(Bq&Bi){Bk.mAxisLabelsLocation=U.ALL_TOP;}}}else{Bk.mAxisLabelsLocation=U.ALL_TOP;}}}this.hLoadProperties();d.call(this,Bl);AQ.call(this);if(Bl.mUseLogarithmicScale&&Bj.IsStackedChart()){this.mMaximum=Bl.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bl.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Br=AE.computeTicksForLogScale(this);this.mMaxTick=Br.mMaxTick;this.mMinTick=Br.mMinTick;this.mTicks=Br.mTicks;this.mStep=Br.mStep;}Aw.call(this);},IsBaseAtZero:function Bd(){var Bi=this.mOptions;return Bi.mDrawFromZero&&!Bi.mUseLogarithmicScale;},hLoadProperties:function A7(){var Bj=this.mChartContextPtr,Bt=Bj.mIsGraphMatrix,Bp=Bj.GetGraphMatrixContext(),Bm=this.mOptions,Br,Bu;AP.tripleId.reset(x,this.mTripleId.mObjectId);if(Bt){var Bo=Bj.hasBarAreaInComb()||Bj.IsBarChart()||Bj.IsAreaChart()||Bj.IsPercentChart()||(Bj.IsStackedChart()&&this.mMaximum*this.mMinimum<0);Bm.mDrawFromZero=Bo;Bm.mAlwaysIncludeZero=Bo;if(Bp.isCombinationChart()){var Bq=Af.call(this);Bm.mAlwaysIncludeZero=Bm.mAlwaysIncludeZero||Bq.Include;Bm.mDrawFromZero=Bm.mDrawFromZero||Bq.DrawFromZero;}if(this.mLabelSpan===0){this.mLabelSpan=Bp.getPadding(BU.kBetweenLabels);}var Bv=Bj.getUniformAxisInformation(this.mTripleId.mObjectId);if(Bv.CustomScale){Bm.mUseCustomMinMax=Bv.CustomScale;Bm.mUseMaxValue=!Bv.AutoMax;Bm.mUseMinValue=!Bv.AutoMin;Bm.mAxisMaxValue=Bv.Max;Bm.mAxisMinValue=Bv.Min;}var Bl=this.mDatasetPtr||Bj.mDataset,Bi=Bj.getAxisKeyFromObjectId(this.mTripleId.mObjectId);if(Bi==="Z"){return ;}var Bk=Bl.getAxisOriginFormat(Bi);Bm.mDrawCustomLine=Bk.show||false;Bm.mAxisCustomValue=Bk.number||0;Bm.mUseLogarithmicScale=Bl.isLogScaleAxis(Bi);if(Bm.mUseLogarithmicScale){Bm.mAlwaysIncludeZero=false;Bm.mDrawFromZero=false;}}else{Br=Bj.GetProperty(A3.DssGraph2ExcludeZero,x);if(Br){Bm.mAlwaysIncludeZero=Br!==false;}if(Bj.mIsTimeSeriesChart){Bm.mShowMinLabel=false;}else{Br=Bj.GetProperty(A3.DssGraph2ScaleEndMin,x);if(Br){Bm.mShowMinLabel=Br!==false;}}Br=Bj.GetProperty(A3.DssGraph2ScaleEndMax,x);if(Br){Bm.mShowMaxLabel=Br!==false;}if(Bj.mImageUsage===0){Br=Bj.GetProperty(A3.DssGraph2LogScale,x);if(!this.mIsPercent&&Br){Bm.mUseLogarithmicScale=Br!==false;}Br=Bj.GetProperty(A3.DssGraph2ScaleUseMin,x);if(Br){Bm.mUseMinValue=Br!==false;}Br=Bj.GetProperty(A3.DssGraph2ScaleUseMax,x);if(Br){Bm.mUseMaxValue=Br!==false;}Br=Bj.GetProperty(A4.DssGraphOffScaleType,x);if(Br){Bm.mOffScaleType=Br;}Br=Bj.GetProperty(A3.DssGraph2ScaleMin,x);if(Bm.mUseMinValue&&Br){Bm.mAxisMinValue=Br;}Br=Bj.GetProperty(A3.DssGraph2ScaleMax,x);if(Bm.mUseMaxValue&&Br){Bm.mAxisMaxValue=Br;}if(Bm.mUseMinValue&&Bm.mUseMaxValue){if(Bm.mAxisMinValue>Bm.mAxisMaxValue){Bu=Bm.mAxisMinValue;Bm.mAxisMinValue=Bm.mAxisMaxValue;Bm.mAxisMaxValue=Bu;}else{if(Bm.mAxisMinValue===Bm.mAxisMaxValue){Bu=Bm.mAxisMinValue===0?10:Math.abs(Bm.mAxisMinValue);Bm.mAxisMaxValue=Bm.mAxisMaxValue+Bu*0.5;Bm.mAxisMinValue=Bm.mAxisMinValue-Bu*0.5;}}}}}var Bs=false;if(Bt){Bs=w.call(this);}if(!Bs){Br=Bj.GetProperty(A3.DssGraphAxisNumberFormat,x);if(Br){Bj.ParseValueToFormat(Br,this.mNumberFormat);}}if(this.mGraphMajorType===b.GMT_BUBBLE&&this.mTripleId.mObjectId===A5.DssGraphZBody){return ;}if(Bj.mIsGraphMatrix){var Bn=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=q.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){Br=Bj.GetProperty(A3.DssGraphStyleMajor,Bn);if(this.mMajorGrid.mShowGridLines&&Br){this.mMajorGrid.mGridStyle=Br;}}return ;}if(Bj.mImageUsage===0&&!Bj.mIsGraphMatrix){Br=Bj.GetProperty(A3.DssGraph2ScaleDirection,x);if(Br){this.mAxisInfo.mAxisDrawInReverse=Br!==false;}if(this.mGraphMajorType===b.GMT_GAUGE){return ;}Br=Bj.GetProperty(A3.DssGraphAxisShowUserLine,x);if(Br){Bm.mDrawCustomLine=Br!==false;}Br=Bj.GetProperty(A4.DssGraphAxisShowSecondUserLine,x);if(Br){Bm.mDrawSecondCustomLine=Br!==false;}Br=Bj.GetProperty(A3.DssGraphManualMajor,x);if(Br){this.mMajorGrid.mUseManualGrid=Br!==false;}Br=Bj.GetProperty(A3.DssGraphCountMajor,x);if(this.mMajorGrid.mUseManualGrid&&Br){this.mMajorGrid.mGridInterval=Br;}if(Ax.call(this)){Br=Bj.GetProperty(A3.DssGraphAxisStagger,x);if(Br){this.mIsStagger=Br!==false;}return ;}Br=Bj.GetProperty(A3.DssGraphAxisUserLineValue,x);if(Bm.mDrawCustomLine&&Br){Bm.mAxisCustomValue=Br;}Br=Bj.GetProperty(A4.DssGraphAxisSecondUserLineValue,x);if(Bm.mDrawSecondCustomLine&&Br){Bm.mAxisSecondCustomValue=Br;}}},GetStep:function Z(){return this.mStep;},IsLogarithmic:function AZ(){return this.mOptions.mUseLogarithmicScale;},ReserveTitleAndLabels:function Ai(Bo,Bm,Bk){var Bi,Bn,Bj;if(!this.mIsShown||!this.mChartContextPtr.mIsValueAxisShown){return ;}if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(Bo);this.mLabelStartIndex=1;}else{this.mLabelStartIndex=0;}this.mDeviceDataArea.ResetRect(Bo);if(this.mAxisInfo.mShowAxisLabels){if(this.mLabelObjectId===null){this.mLabelObjectId=BY.gAxisObjects[this.getIndex()].mLabelId;}if(I.call(this)){this.fakeMaxLabelLength=this.maxLabelLength;this.maxLabelLength=-1;this.restoreLabels(true);AK.call(this);}else{this.restoreLabels(true);this.InitObjectSet(this.mLabelObjectId,AM.GOT_AXIS_LABEL);}if(e.call(this)===false){return ;}this.GenerateTickLabels();if(Bm<1000){if(this.mUseDepth&&this.mTripleId.mObjectId===A5.DssGraphX1Body){var Bl=this.TrimMarginsForDepthAxis(Bm,Bk);Bm=Bl.LowMargin;Bk=Bl.HighMargin;}Bj=Ay.call(this);Bi=Bj.LowMargin;Bn=Bj.HighMargin;Bi=Bi>Bm+this.mLowTrim?Bi-Bm-this.mLowTrim:0;Bn=Bn>Bk+this.mHighTrim?Bn-Bk-this.mHighTrim:0;if(this.IsVerticalAxis()){Bo.y+=Bn;Bo.height-=Bn+Bi;}else{Bo.x+=Bi;Bo.width-=Bi+Bn;}if(this.mIsUniformAxis){if(Bi>0){this.mLowTrim+=Bi;}if(Bn>0){this.mHighTrim+=Bn;}}}this.hReserveLabelOrTickArea(Bo,true,false);}},CreateAxisLine:function BN(){if(!this.mChartContextPtr.mIsValueAxisShown){return ;}if(!this.mIsShown&&!this.mUseDepth){return ;}if(g.call(this)){this._super();}},GenerateTickLabels:function Ak(){if(this.hasLabelCreated){return ;}this.mLabelList.splice(0,this.mLabelList.length);var Bk=this.mChartContextPtr.mIsGraphMatrix;Bg.call(this);if(Bk){BZ.call(this,true,0);}var Bj,Bi=this.mpAxisLabelSet.GetCollectionSize();if(this.mAxisInfo.mAxisLabelsLocation===U.ALL_LEFT_RIGHT||this.mAxisInfo.mAxisLabelsLocation===U.ALL_BOTTOM_TOP){Bg.call(this);if(Bk){BZ.call(this,false,Bi);}}Bi=this.mpAxisLabelSet.GetCollectionSize();for(Bj=0;Bj<Bi;Bj++){this.mLabelList.push(this.mpAxisLabelSet.GetObjectByIndex(Bj));}this.hasLabelCreated=true;},GetTicks:function A2(Bj){if(this.mOptions.mShowMinLabel){Bj.push(this.mMinTick);}var Bi;for(Bi=0;Bi<this.mTicks.length;++Bi){Bj.push(this.mTicks[Bi]);}if(this.mOptions.mShowMaxLabel){Bj.push(this.mMaxTick);}},hReserveLabelOrTickArea:function Aa(Bn,Bo,Bj,Bp){var Bi=this.mAxisInfo.mAxisLabelsLocation,Bl,Bk;if(Bo){Bk=Bp!==undefined?Bp:BQ.call(this,this.IsVerticalAxis());var Bm=this.mChartContextPtr.mpGraphMatrixContext.getPadding(BU.kLabelToChart);Bl=(Bk*(this.mIsStagger?2:1)+BY.Axis.gLabelMargin)+Bm;}else{Bl=this.GetOuterTickLength();}if(Bj){Bl=-Bl;}if(this.IsVerticalAxis()){if(Bi===U.ALL_LEFT||Bi===U.ALL_LEFT_RIGHT){Bn.x+=Bl;Bn.width-=Bl;}if(Bi===U.ALL_RIGHT||Bi===U.ALL_LEFT_RIGHT){Bn.width-=Bl;}}else{if(Bi===U.ALL_BOTTOM||Bi===U.ALL_BOTTOM_TOP){Bn.height-=Bl;}if(Bi===U.ALL_TOP||Bi===U.ALL_BOTTOM_TOP){Bn.y+=Bl;Bn.height-=Bl;}}},ValueToPosition:function l(Bj,Bi){if(Bi===undefined){if(this.mOptions.mOffScaleType!==Aq.DssGraphOffScaleHide){Bi=false;}else{Bi=true;}}if(Bi){Bj=(Bj>this.mMaxTick)?this.mMaxTick:Bj;Bj=(Bj<this.mMinTick)?this.mMinTick:Bj;}return Math.floor(this.ValueToFloatPosition(Bj)+0.5);},ValueToPosition2:function AS(Bn,Bk,Bm){var Bj=this.mMinTick;var Bi=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bn=Bn<=0?-1:J.call(this,Bn);Bj=J.call(this,Bj);Bi=J.call(this,Bi);}var Bl=this.mAxisInfo.mAxisDrawInReverse?(Bi-Bn):(Bn-Bj);return Bk+((Bm-Bk)*Bl/(Bi-Bj));},ValueToFloatPosition:function Au(Bq){var Br=0,Bn=this.mMinTick,Bk=this.mMaxTick,Bm=this.mOptions,Bp=this.mDeviceDataArea,Bl=this.mAxisInfo,Bo;if(Bm.mUseLogarithmicScale){Bq=Bq<=0?-1:J.call(this,Bq);Bn=J.call(this,Bn);Bk=J.call(this,Bk);}Bo=Bl.mAxisDrawInReverse?(Bq-Bn):(Bk-Bq);if(Bk===Bn){return Br;}if(Bl.mAxisDirection===h.AD_Y){Br=Bp.y+Bo/(Bk-Bn)*Bp.height;}else{Br=Bp.x+Bp.width-Bo/(Bk-Bn)*Bp.width;}var Bi=n.call(this),Bj=-Bi;if(Br>Bi){Br=Bi;this.mIsMaxZoom=true;}else{if(Br<Bj){Br=Bj;this.mIsMaxZoom=true;}}return Br;},ValueToPositionCheckLogScale:function p(Bn,Bk,Bm){var Bl,Bj,Bi;Bl=this.mMinTick;Bj=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bn=Bn<=0?-1:J.call(this,Bn);Bl=J.call(this,Bl);Bj=J.call(this,Bj);}Bi=this.mAxisInfo.mAxisDrawInReverse?(Bj-Bn):(Bn-Bl);return Bk+((Bm-Bk)*Bi/(Bj-Bl));},ValueToPositionCheckValue:function BS(Bp,Bm,Bo){var Bn,Bj,Bl,Bi,Bk;Bn=0;Bj=0;Bl=AD.call(this,Bp,Bn,Bj);Bp=Bl.Value;Bn=Bl.Min;Bj=Bl.Max;if(!Bl.Flag){return{Flag:false};}Bi=this.mAxisInfo.mAxisDrawInReverse?(Bj-Bp):(Bp-Bn);Bk=Bm+Math.floor((Bo-Bm)*Bi/(Bj-Bn));return{Flag:true,Position:Bk};},GetValueForUnit:function Bc(){var Bl=this.mAxisInfo,Bj,Bo=this.mDeviceDataArea,Bn=(this.mMinTick+this.mMaxTick)/2,Bm=0,Bi=0,Bk=AD.call(this,Bn,Bm,Bi);Bm=Bk.Min;Bi=Bk.Max;if(!this.mOptions.mUseLogarithmicScale&&Bk.Flag){if(Bl.mAxisDirection===h.AD_Y){Bj=(Bi-Bm)/Bo.height;}else{Bj=(Bi-Bm)/Bo.width;}}return Bj;},GetOuterTickLength:function BB(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength/2;}return 0;},AdjustDeviceDataArea:function Ad(Bj,Bi){if(this.mIsShown&&this.mAxisInfo.mShowAxisLabels){this.hReserveLabelOrTickArea(Bj,false,Bi);}if(this.mIsShown||this.mUseDepth){this.ReserveDepthAxisLine(Bj,Bi);}},UpdateTitleAndLabelArea:function AR(Bj){var Bk=this.mChartContextPtr,Bi=this.mAxisInfo;if(!this.mIsShown||!Bk.mIsValueAxisShown){return ;}if(this.mLabelArea===null||this.mLabelArea===undefined){this.mLabelArea=new BY.Rect2D({Rect2D:Bj});}else{this.mLabelArea.ResetRect(Bj);}if(Bi.mShowAxisLabels&&X.call(this)){Ba.call(this);this.hReserveLabelOrTickArea(Bj,true,true);}if(Bi.mShowAxisTitle){this.UpdateTitleLocation(Bj);this.ReserveTitle(Bj,true);}},HideCustomPercentOverlappedLabels:function BP(){BR.visPrint("To be impl with percetn in custom scale");},HideOverlappedLabels:function An(Bp,Bk){var Bt,Bq,Bl,B3,Bm=this.mChartContextPtr,B1=Bm.mIsGraphMatrix,Bj=this.IsVerticalAxis()?r.REC_EXP_VERTICAL:r.REC_EXP_HORIZONTAL;if(Bk-Bp<2){return ;}var B4=this.mIsPercent&&B1,B5=BL.call(this,Bp,Bk),Bo=B5.Start,Bx=this.mLabelList,Bn=this.mGraphObjectList,Bz=B5.PaddingPossible;Bt=Bn[Bo];Bq=Bt;if(Bz===false){var B0,B2=Bx.length;for(B0=0;B0<B2;B0++){if(Bx[B0]){Bx[B0].mIsShown=false;}}return ;}if(R.call(this)||(!this.mIsPercent&&B1)){Bq=Bn[Bp];var Bv=B1?Bq:Bt;if(Bq.HasOverlapForSameRotation(Bt,this.mLabelSpan,Bj)){Bv.mIsShown=false;}}var Br,Bs=this.mOptions,Bw=this.mGraphMajorType,By=this.mTripleId.mObjectId,Bi=Bk;if(Bi-Bp>2&&!B4){if(Bs.mUseMaxValue&&Bs.mShowMaxLabel){Bi--;}}Br=A9.call(this,B4,Bp,Bi,Bo,Bj);Br=y.call(this,B4,Bp,Bi,Bo,Br);B.call(this,Bp,Bk,Bo,Br,Bj);AH.call(this,Bp);if(Bt.mIsShown){var Bu=Bm.GetGraphMatrixContext().getPadding(BU.kEndLabelToChart);Bt.mIsShown=Aj.call(this,Bt,Bu);}if((Bw===b.GMT_POLAR&&By===A5.DssGraphX1Body)||(Bw===b.GMT_RADAR&&By===A5.DssGraphO1Body)){Bl=((Bk-1-Bo)%Br);B3=Bn[Bk-1-Bl];if(B3.HasOverlapForSameRotation(Bq)){B3.mIsShown=false;}}if(Bz){AU.call(this,Bk,true);AU.call(this,Bk,false);}this.mLabelInterval=Br;},ValueToBubbleSize:function D(Bi,Bo){var Bm,Bq,Bl,Bn,Bp,Bk,Bj=this.mChartContextPtr;Bo=(Bo>this.mMaxTick)?this.mMaxTick:Bo;Bo=(Bo<this.mMinTick)?this.mMinTick:Bo;Bm=this.mMinTick;Bq=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bo=Bo<=0?-1:(J.call(this,Bo));Bm=J.call(this,Bm);Bq=J.call(this,Bq);}Bl=Math.min(Bj.mGraphHeight,Bj.mGraphWidth)*Bi;Bn=Bl/5000;Bp=Bl/1000;Bk=Bn+((Bo-Bm)*(Bp-Bn)/(Bq-Bm));return Math.ceil(Bk);},GetBottomPosition:function AV(Bi){if(this.mChartContextPtr.mIsGraphMatrix){Bi=Bi||false;if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(this.GetBaseValue(Bi),false);}}return this.ValueToPosition(this.mMinTick);},GetAxisOriginValue:function Al(){var Bi=this.mOptions;if(Bi.mDrawCustomLine){return Bi.mAxisCustomValue;}return null;},GetBasePosition:function As(Bj,Bi){Bj=Bj||false;if(Bi===null||Bi===undefined){Bi=this.GetBaseValue(Bj);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(Bi,false);}}return this.ValueToPosition(Bi);},GetMinTick:function Ap(){return this.mMinTick;},GetMaxTick:function BC(){return this.mMaxTick;},GetBaseValue:function Ar(Bj){Bj=Bj||false;var Bk=this.mChartContextPtr,Bi=this.mOptions;if(Bk.mIsGraphMatrix){if(Bj&&Bi.mDrawCustomLine){if(AP.isValidNumber(Bi.mAxisCustomValue)){return Bi.mAxisCustomValue;}}if(Bi.mUseCustomMinMax&&Bi.mDrawFromZero){return 0;}}if(this.mMaxTick<0){return this.mMaxTick;}if(!Bi.mDrawFromZero||this.mMinTick>0||this.mMaxTick<0){return this.mMinTick;}return 0;},GetPositionByValue:function Am(Bj){var Bi=this.GetFloatPositionByValue(Bj);if(Bi===null){return Bi;}Bi=Math.floor(Bi+0.5);return Bi;},GetFloatPositionByValue:function BK(Bp){var Bj=0,Bo=0,Bl,Bq,Bn;Bn=AD.call(this,Bp,Bj,Bo);Bp=Bn.Value;Bj=Bn.Min;Bo=Bn.Max;if(!Bn.Flag){return null;}var Bk=this.mAxisInfo,Bm=this.mDeviceDataArea;Bl=Bk.mAxisDrawInReverse?(Bp-Bj):(Bo-Bp);Bq=0;if(Bo===Bj){return Bq;}if(Bk.mAxisDirection===h.AD_Y){Bq=Bm.y+Bl*Bm.height/(Bo-Bj);}else{Bq=Bm.x+Bm.width-Bl*Bm.width/(Bo-Bj);}var Bi=n.call(this);if(Bq>Bi){Bq=Bi;this.mIsMaxZoom=true;}if(Bq<-Bi){Bq=-Bi;this.mIsMaxZoom=true;}return Bq;},GenerateCustomLine:function c(Bi,Bl){var Bn=this.mOptions,Bk=this.mDeviceDataArea;if(this.mChartContextPtr.mIsGraphMatrix){if(this.mPrimaryMetrics.length===0){return ;}}if(!Bn.mDrawCustomLine&&!Bn.mDrawSecondCustomLine){return ;}var Bj,Bm;if(this.mChartContextPtr.mIsGraphMatrix){Bm=BY.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bj=Bk;}else{Bm=BY.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bj=new BY.Rect2D({Rect2D:this.mDeviceDataArea});Bk.ResetRect(Bi);}if(Bn.mDrawCustomLine){k.call(this,Bl,Bn.mAxisCustomValue,Bm);}if(this.mTripleId.mObjectId===A5.DssGraphY1Body&&Bn.mDrawSecondCustomLine){k.call(this,Bl,Bn.mAxisSecondCustomValue,A5.DssGraphY1SecondUserLine);}Bk.ResetRect(Bj);},GenerateMapAndList:function A1(){},generateGridsByArea:function AO(Bk){if(!this.mIsShown){return ;}var Bj=this.mMajorGrid,Bi=this.mMinorGrid;if(Bk){if(Bj.mShowGridLines&&Bj.mGridStyle!==q.DssGraphGridNone){BG.call(this);}if(Bi.mShowGridLines&&Bi.mGridStyle!==q.DssGraphGridNone){O.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){C.call(this);}}},GetNumberFormat:function A(){return this.mNumberFormat;},GetTrimWithPadding:function Ao(){return this.mIsTrimmedWithPadding;},GetPositionAtTick:function BW(Bi){var Bj=this.GetFloatPositionByValue(Bi);if(Bj!==null){return Bj;}return 0;},GetMaxMinDataInput:function BJ(){return{Max:this.mMaximum,Min:this.mMinimum};},GetMaxMinDataInputPosition:function L(){var Bi=this.GetPositionByValue(this.mMinimum),Bj=this.GetPositionByValue(this.mMaximum);return{LowBoundary:Bi,HighBoundary:Bj};},postProcessStep:function s(Bi,Bk){var Bj=Bi,Bo=this.mChartContextPtr;switch(this.mGraphMajorType){case b.GMT_HISTOGRAM:case b.GMT_POLAR:case b.GMT_SCATTER:case b.GMT_BUBBLE:case b.GMT_3D_SCATTER:case b.GMT_GANTT:break;case b.GMT_GAUGE:break;case b.GMT_CATEGORY:if(!this.IsVerticalAxis()&&!Bo.mIsGraphMatrix){this.mLargerGridInterval=true;}break;default:if(!this.IsVerticalAxis()&&!Bo.mIsGraphMatrix){this.mLargerGridInterval=true;}break;}if(this.mLargerGridInterval){if(Bk<Bj*7){Bj*=2;}else{Bj*=4;}}if(Bo.mIsGraphMatrix){var Bm=this.mChartContextPtr.GetGraphMatrixContext().GetValueAxisZoomScale(this.mTripleId.mObjectId);if(Bm>1){Bj/=Bm;}if(Math.abs(this.mMaximum)<0.3&&Math.abs(this.mMinimum)<0.3){var Bn=Math.ceil(this.mMaximum/Bj)*Bj,Bl=Math.floor(this.mMinimum/Bj)*Bj;if(Bn<Bl+Bj){Bj/=2;}}}return Bj;},GetLogicalCoord:function AA(Bl){var Bj=0,Bn=this.mDeviceDataArea,Bk=this.mMinTick,Bi=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bk=J.call(this,Bk);Bi=J.call(this,Bi);}var Bm=this.IsVerticalAxis()?(Bi-Bk)*(Bl-Bn.y)/Bn.height:(Bi-Bk)*(Bn.x+Bn.width-Bl)/Bn.width;Bj=this.mAxisInfo.mAxisDrawInReverse?Bk+Bm:Bi-Bm;if(this.mOptions.mUseLogarithmicScale){Bj=Math.pow(10,Bj);}return Bj;},GetSlopeFactor:function BM(Bj){var Bi=this.IsVerticalAxis()?-this.mDeviceDataArea.height:this.mDeviceDataArea.width;if(this.mOptions.mUseLogarithmicScale){Bi/=((Math.log(this.mMaxTick)-Math.log(this.mMinTick))*Bj);}else{Bi/=(this.mMaxTick-this.mMinTick);}return this.mAxisInfo.mAxisDrawInReverse?-Bi:Bi;},GetMinMaxLogicalCoord:function A6(){return{Min:this.mMinTick,Max:this.mMaxTick};},GenerateLabelsFor3D:function BD(){},GetGridLinePositionsFor3D:function G(){},OnZooming:function M(){},getStatus:function Y(){var Bk=0,Bl=2,Bj=this.getLabelRotation(),Bi=this.mLabelInterval;if(Bj===BI.Rotate90){return Bl;}if(Bi===1){return Bk;}return Bl;},getCondenseStatus:function j(){return this.mCondenseLabels;},checkCondense:function H(Bi){this.mCondenseLabels=Bi;return this.mCondenseLabels;},isBaseLineQualified:function AN(Bi){Bi=Bi||0;return this.mMaxTick>Bi&&this.mMinTick<Bi;},liftedFromZero:function AF(){return this.mMinTick===0&&this.mLowTrim>0;},getBandings:function At(){var Bk=0,Bi,Bj=this.mChartContextPtr;if(this.IsVerticalAxis()){Bi=Bj.mGraphHeight;}else{Bi=Bj.mGraphWidth;}return[{Start:Bk,Size:Bi}];},formatAsLabel:function Ag(Bj){var Bk=BY.gAxisObjects[this.getIndex()].mLabelId,Bi=new BY.NumberObject({TripleId:Bk,GraphObjectManager:this,Number:Bj,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});return Bi.mText;},getGridLinePosition:function BA(Bq){if(!(this.mIntegrity&4)){return[];}if(Bq===undefined){Bq=true;}var Bj,Bn,Bt=[];var Bx=this.mLabelList,Br=Bx.length;var Bm=10,Bk=this.mChartContextPtr,Bo=Bk.mGraphWidth,Bl=Bk.mGraphHeight,Bw=this.IsVerticalAxis();for(Bn=0;Bn<Br;Bn++){if(Bx[Bn].mIsShown){Bj=this.ValueToPosition(Bx[Bn].mNumber);if(Bj<Bm||Bj+Bm>(Bw?Bl:Bo)){continue;}Bt.push(Bj);}}if(Bq){return Bt;}var Bu,Bv,Bi=[];Br=Bt.length;if(Br===0){return Bi;}else{var Bs,Bp;for(Bn=1;Bn<Br;Bn++){Bj=0.5*(Bt[Bn-1]+Bt[Bn]);if(Bn===1){Bs=Math.abs(Bj-Bt[Bn-1]);}else{if(Bn===Br-1){Bp=Math.abs(Bj-Bt[Bn-1]);}}Bi.push(Bj);}Bv=!Bw?Br-1:0;Bu=Bt[Bv];Bj=BO.call(this,Bu,false,Bs);if(Bj!==null){Bi.push(Bj);}Bv=Bw?Br-1:0;Bu=Bt[Bv];Bj=BO.call(this,Bu,true,Bp);if(Bj!==null){Bi.push(Bj);}}return Bi;},TrimDeviceDataArea:function BH(Bj){var Bk=this.mChartContextPtr,Bi;Bi=Bk.getUniformAxisInformation(this.mTripleId.mObjectId);if(Bi.PerCell){return this.TrimAxisPadding(Bj,false);}this.mLowTrim=Bi.Trims[0];this.mHighTrim=Bi.Trims[1];F.call(this,false,this.mHighTrim,this.mLowTrim,Bj);},refresh:function AJ(Bj,Bl){if(Bj==="clipping"){var Bn=this.mChartContextPtr,Bm=this.mOptions;if(this.mMaximum!==Bl.max||this.mMinimum!==Bl.min){this.mMaximum=Bl.max;this.mMinimum=Bl.min;Bm.mAxisMaxValue=Bl.max;Bm.mAxisMinValue=Bl.min;d.call(this,this.mOptions);this.mTicks=[];this.mMaxTick=this.mMinTick=-1;this.mStep=-1;AQ.call(this);if(Bm.mUseLogarithmicScale&&Bn.IsStackedChart()){this.mMaximum=Bm.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bm.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bi=AE.computeTicksForLogScale(this);this.mMaxTick=Bi.mMaxTick;this.mMinTick=Bi.mMinTick;this.mTicks=Bi.mTicks;this.mStep=Bi.mStep;}Aw.call(this);}var Bk={x:0,y:0,width:Bn.mGraphWidth,height:Bn.mGraphHeight};this.TrimAxisPadding(Bk,false);}},TrimAxisPadding:function o(Bm,Bl){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bk,Bi,Bj,Bn,Bo=this.mOptions.mUseCustomMinMax;this.mLowTrim=this.mHighTrim=0;Bk=K.call(this,Bo);Bi=Bk.LowPadding;Bj=Bk.HighPadding;Bn=this.mAxisInfo.mAxisDirection===h.AD_X?Bm.width:Bm.height;Bn-=(Bj+Bi);Bk=W.call(this,Bl,Bn,Bj,Bi);Bi=Bk.LowPadding;Bj=Bk.HighPadding;F.call(this,Bl,Bj,Bi,Bm);}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Axis","TripleId","Rect2D","CategoryAxisInfo","ChartConstants","StraightLineObject","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumCategoryAxisOidItem","EnumCategoryLabelStyle","EnumRectCompare","EnumChartStyle","EnumImageUsage","EnumRectExpandDirection","EnumGraphMatrixMajorGraphType","EnumLabelLevelOption");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType");var Av=mstrmojo.chart,Am=Av.ChartConstants,Q=Av.enums,BA=Q.EnumAnchorPoint,Ap=Q.EnumGraphMajorType,h=Q.EnumAxisLabelsLocation,Az=Q.EnumAxisDirection,Z=Q.EnumGraphObjectType,d=Q.EnumCategoryAxisOidItem,G=Q.EnumCategoryLabelStyle,AM=Q.EnumImageUsage,Aw=Q.EnumLabelLevelOption,AN=Q.EnumChartStyle,Ai=Q.EnumRectCompare,AS=Av.gNullGroupId,AU=Av.gNullSeriesId;var Ak=mstrmojo.chart.model,AT=Ak.enums,BB=AT.EnumDSSGraphType,BG=AT.EnumDSSGraphProperty,BH=AT.EnumDSSGraphObject,J=AT.EnumDSSGraphFontRotation,BS=AT.EnumDSSGraphGridLineType,Ag=0,BC=1,BK=2,C=3;var z=new Av.Point2D(),Ab=new Av.Point2D(),BN=new Av.Rect2D(),A0=new Av.Rect2D(),H=new Av.Rect2D(),x=new Av.Rect2D(),Ae=new Av.Rect2D();function j(BU,BT){if(BT===undefined){BT=-3;}switch(this.mTripleId.mObjectId){case BH.DssGraphO1Body:return new Av.TripleId({ObjectId:BH.DssGraph2DO1Label,GroupId:BU,SeriesId:BT});case BH.DssGraphO2Body:return new Av.TripleId({ObjectId:BH.DssGraph2DO2Label,GroupId:BU,SeriesId:BT});default:return new Av.TripleId({ObjectId:BH.DssGraph2DO1Label,GroupId:BU,SeriesId:BT});}}function w(BV,BY,BU){var BT=BY||0,BX=BV||0,BW=(this.mAxisInfo.mAxisDirection===Az.AD_X)?BU.width:BU.height;if(BT<0){BT=0;}if(BX<0){BX=0;}if(BW<=0||BW<BT+BX){return ;}BW-=BT+BX;this.mLowTrim=BT;this.mHighTrim=BX;if(this.mAxisInfo.mAxisDirection===Az.AD_X){BU.x+=BT;BU.width=BW;}if(this.mAxisInfo.mAxisDirection===Az.AD_Y){BU.y+=BX;BU.height=BW;}}function AP(BU){var BV,BW=this.mLabelList,BT=BW.length;for(BV=0;BV<BT;BV++){if(BW[BV]){BW[BV].Restore({LineCount:BU});}}}function k(BT,BX){var BW=this.mChartContextPtr,BU=BW.GetGraphMatrixContext(),BX=BX||BU.getPadding(Am.kLabelToChart),BV=BT.GetBoundingRect(true);return(BV.y>=BX&&BV.y+BV.height+BX<=BW.mGraphHeight);}function I(){var BW=this.mChartContextPtr,BZ=BW.GetGraphMatrixContext(),BY=BW.RenderClusterShapes(),BX=this.mDatasetPtr,Bb=false,BT=BY;if(BY===false){if(BZ.isCombinationChart()){var BU=BW.mUniformAxisContext.CategoryAxis,Ba=this.IsVerticalAxis()?"Y":"X";BY=BU[Ba].EnforceFringe;if(BY){return true;}var BV=BX.GetSeriesByShape().Bar;BT=Bb=BV&&BV.length>0;BT=BT||BY;}else{BT=BW.IsBarChart()&&BW.IsAdvancedBarChart(AN._bullet)===false;}}return BT;}function Ay(){if(I.call(this)){var BZ=this.mChartContextPtr,BU=BZ.GetGraphMatrixContext(),BV=false,BX=false;if(BU.isCombinationChart()){var BT=BZ.mUniformAxisContext.CategoryAxis,BW=this.IsVerticalAxis()?"Y":"X";BV=BT[BW].EnforceCluster;if(BV){return true;}var BY=this.mDatasetPtr.GetSeriesByShape().Bar;BX=BY&&BY.length>0;return(BZ.IsBarChart(AN._cluster)||(BX&&!BZ.IsPercentChart()&&!BZ.IsStackedChart()));}return BZ.IsBarChart(AN._cluster);}return false;}function Al(){var BW=this.mChartContextPtr;if(BW.mPartialRendering&&BW.mRenderingWindow){var BU,BT,BV=BW.mRenderingWindow;if(this.IsVerticalAxis()){BU=BV.y;BT=BU+BV.height;}else{BU=BV.x;BT=BU+BV.width;}this.screenWindow={Min:this.getGroupSlotAt(BU)-1,Max:this.getGroupSlotAt(BT)+1};}}function Ad(BZ,BX){if(BZ===0&&BX===0){return 0;}var BT=0,Bi,BV=this.mChartContextPtr,Bb=BV.mIsGraphMatrix,Be=BV.GetGraphMatrixContext(),BU=this.mCategoryOption.mLabelStyle,Bf=Bb?Be.getPadding(Am.kLabelToChart):0,Ba=this.mLevelSize,BW=Bb?Be.getPadding(Am.kCategoricalLabelToTick):this.mLevelSpace,BY,Bh=this.mGroupCount;switch(BU){case G.CLS_NORMAL:case G.CLS_MANUAL:case G.CLS_AUTOMATIC:Ba.push(Math.max(BZ,BX));BT=Math.max(BZ,BX)+BW;break;default:Bi=this.mpAxisLabelSet.GetFormatFont().mFontRotation;if(Bi===J.Rotate45||Bi===J.Rotate315){BZ=0;var Bg=this.getGroupSize(),Bd,Bc;for(BY=0;BY<(Bh+1)/2;++BY){Bd=this.mLabelList[BY].GetBoundingRectNoRotation(true);Bc=Math.max(Bd.width,Bd.height)*Math.SQRT1_2;if(Bc>Bg){Bc+=(Bc-Bg);}BZ=Math.max(BZ,(Bc+0.5));}}Ba.push(BZ);Ba.push(BX);BT=BZ+BW+BX+this.mLevelSpace;break;}return BT+Bf;}function a(BT){var BU=this.mDeviceDataArea;return(BT>BU.x&&BT<BU.x+BU.width);}function L(BT){var BU=this.mDeviceDataArea;return(BT>BU.y&&BT<BU.y+BU.height);}function BO(){return this.mTripleId.mObjectId===BH.DssGraphO2Body;}function Aq(BT){return this.mGroupOrder.length===0?BT:this.mGroupOrder[BT];}function BJ(BU,BX){var BW,BV,BT;BT=BU.length;for(BW=0;BW<BT;++BW){BV=new Av.StraightLineObject({TripleId:BX.mTripleId,GraphObjectManager:this,StartPoint:BU[BW],EndPoint:BU[BW].Shifted(this.mDepthOffset),ParentObject:BX});BX.AddGraphObject(BV);this.mManagerGraphObjectList.push(BV);}}function o(BY,BW){var BX,BV,BU,BT,BZ=this.mDeviceDataArea,Ba;if(this.mChartContextPtr.mIsTimeSeriesChart){BT=this.mShownLabelList.length;for(BX=0;BX<BT;++BX){BV=this.mShownLabelList[BX].mTripleId.mGroupId;if(!this.IsVerticalAxis()){BU=new Av.Point2D({x:this.getGroupMiddlePos(BV),y:BZ.GetBottomMiddle().y});BY.push(BU);BU=new Av.Point2D({x:this.getGroupMiddlePos(BV),y:BZ.GetTopMiddle().y});BW.push(BU);}else{BU=new Av.Point2D({x:BZ.GetLeftMiddle().x,y:this.getGroupMiddlePos(BV)});BY.push(BU);BU=new Av.Point2D({x:BZ.GetRightMiddle().x,y:this.getGroupMiddlePos(BV)});BW.push(BU);}}}else{Ba=this.mGroupCount;for(BX=0;BX<Ba;++BX){if(this.mAxisCross&&BX===0){continue;}if(!this.IsVerticalAxis()){BU=new Av.Point2D({x:this.getGroupMiddlePos(BX),y:BZ.y+BZ.height});BY.push(BU);BU=new Av.Point2D({x:this.getGroupMiddlePos(BX),y:BZ.y});BW.push(BU);}else{BU=new Av.Point2D({x:BZ.x,y:this.getGroupMiddlePos(BX)});BY.push(BU);BU=new Av.Point2D({x:BZ.x+BZ.width,y:this.getGroupMiddlePos(BX)});BW.push(BU);}}}}function O(){var BW=this.mMajorGrid;if(!BW.mShowGridLines||(BW.mGridStyle!==BS.DssGraphGridRegular&&BW.mGridStyle!==BS.DssGraphGridBoth)){return ;}var BV=Av.gAxisObjects[this.getIndex()].mMajorId;this.InitObjectSet(BV,Z.GOT_MAJOR_GRID);var BU=[],BT=[];o.call(this,BU,BT);BJ.call(this,BT,this.mpMajorGridSet);}function y(Bd,Bg){var Bb=this.mMinorGrid,Bc=this.mDeviceDataArea,BW=1,BT,BV,BZ,Be=this.mGroupCount,Ba,BY,BX,BU,Bf;if(Bb.mUseManualGrid){BW=(Bb.mGridInterval);}BT=Math.floor(BW/2);BV=this.getGroupSize()/(BW+1);BZ=((BW%2)===0)?BT:(BT+1);for(Ba=0;Ba<Be;++Ba){for(BY=-BT;BY<=BZ;++BY){if((BY!==0)){if(Ba===this.mGroupCount-1){if((BW%2)!==0&&BY===BZ){continue;}}BX=(BV*BY+(BY>=0?0.5:-0.5));if(!this.IsVerticalAxis()){BU=this.getGroupMiddlePos(Ba)+BX;if(a.call(this,BU)){Bd.push(new Av.Point2D({x:BU,y:Bc.y+Bc.height}));Bg.push(new Av.Point2D({x:BU,y:Bc.y}));}}else{Bf=this.getGroupMiddlePos(Ba)+BX;if(L.call(this,Bf)){Bd.push(new Av.Point2D({x:Bc.x,y:Bf}));Bg.push(new Av.Point2D({x:Bc.x+Bc.width,y:Bf}));}}}}}}function Aj(){var BV=this.mMinorGrid;if(!BV.mShowGridLines||(BV.mGridStyle!==BS.DssGraphGridRegular&&BV.mGridStyle!==BS.DssGraphGridBoth)){return ;}var BT=Av.gAxisObjects[this.getIndex()].mMinorId;this.InitObjectSet(BT,Z.GOT_MINOR_GRID);var BW=[],BU=[];y.call(this,BW,BU);BJ.call(this,BU,this.mpMinorGridSet);}function q(){}function M(BT,BU){return BT;}function BI(BV,BT){var BU=Aw.LLO_NORMAL;if(this.mChartContextPtr.mIsGraphMatrix){return{Option:BU,Index:BT};}return{Option:BU,Index:BT};}function AJ(BV,Be,Bf){if(Bf){var BZ=this.mDatasetPtr,BW=Bf.length,Bg=BV?BZ.GetSeriesLabelIdentities(Be):BZ.GetGroupLabelIdentities(Be),Bd=Bg.length,Bb=1,BU=[],BX=0,Ba,BY;for(Ba=0;Ba<BW;++Ba){var Bc=Bf[Ba],BT=Bc.match(/ /g);if(BT){Bb=BT.length+1;}for(BY=0;BY<Bb;++BY){if(Ba<Bd){BU[BX]=Bg[Ba];}else{BU[BX]=null;}BX++;}}return BU;}return null;}function r(){var Ba=this.mChartContextPtr,BX=this.mLabelList,BT=BX.length,BV,BZ=BO.call(this),BU,BY,BW;if(Ba.mImageUsage===AM.GENERAL){for(BW=0;BW<BT;BW++){BV=BX[BW];if(BV&&BV.texts){if(BV.mIsShown===false){delete BV.texts;continue;}BU=BV.mTripleId.mGroupId;BY=AJ.call(this,BZ,BU,BV.texts);if(BY&&BY.length){BV.IdentityMap=BY;delete BV.texts;}}}}}function Ao(Bg,BW){BW=BW||false;var BV=this.mChartContextPtr,BU=!this.IsVerticalAxis(),Be,Bf,BY=this.mDatasetPtr,BZ=Aw.LLO_NORMAL,Bb;if(BU&&this.mIsUniformAxis){var Ba=BV.getUniformAxisContext(),BT=Ba.CategoryAxis.X.Truncation;if(BT){var Bc=-1,Bd=BT.Indices,BX=BT.Texts;if(Bd&&Bd.length){Bc=Bd.indexOf(Bg);if(Bc!==-1){Be=BX[Bc];if(Be){return Be;}}}}}if(BO.call(this)){Bb=BI.call(this,false,Bg);Bg=Bb.Index;BZ=Bb.Option;Bf=BY.GetSeriesLabel(Bg,0,BZ,BW);Be=BY.GetMergedLabel(Bf,BZ);if(BV.mImageUsage===AM.GENERAL&&BW){return{Text:Be,Texts:Bf};}return{Text:Be};}Bb=BI.call(this,true,Bg);Bg=Aq.call(this,Bb.Index);BZ=Bb.Option;Bf=BY.GetGroupLabel(Bg,0,BZ,BW);Be=BY.GetMergedLabel(Bf,BZ);if(BV.mImageUsage===AM.GENERAL&&BW){return{Text:Be,Texts:Bf};}return{Text:Be};}function s(BT){var BW=this.mChartContextPtr;if(BW.mPartialRendering){var BV=BT.mTripleId.mGroupId,BU=this.screenWindow;return BV>=BU.Min&&BV<=BU.Max;}return true;}function AB(BT){switch(this.mAxisInfo.mAxisLabelsLocation){case h.ALL_BOTTOM:case h.ALL_TOP:case h.ALL_LEFT:case h.ALL_RIGHT:return this.mAxisInfo.mAxisLabelsLocation;}if(this.mAxisInfo.mAxisLabelsLocation===h.ALL_BOTTOM_TOP){if(BT<this.mLabelSubIndex){return h.ALL_BOTTOM;}return h.ALL_TOP;}if(BT<this.mLabelSubIndex){return h.ALL_LEFT;}return h.ALL_RIGHT;}function AR(BT){var BU=this.HasOuterTicks(this.mMajorGrid.mGridStyle)||this.HasOuterTicks(this.mMinorGrid.mGridStyle);if(this.mAxisInfo.mAxisLabelsLocation===h.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===h.ALL_LEFT_RIGHT){return BU;}return BU&&(BT===this.mAxisInfo.mAxisLabelsLocation);}function n(BU,BW,BT){var BV=this.mDeviceDataArea;switch(BU){case h.ALL_BOTTOM:BT.Reset(0,1);return BV.y+BV.height+BW;case h.ALL_TOP:BT.Reset(0,-1);return BV.y-BW;case h.ALL_LEFT:BT.Reset(-1,0);return BV.x-BW;case h.ALL_RIGHT:BT.Reset(1,0);return BV.x+BV.width+BW;default:return 0;}}function W(){if(this.mIsUniformAxis===false){return false;}return this.restrictWidth>=0&&this.restrictHeight>=0;}function AQ(Ba,BZ){var Bc=BZ,BX=this.getLabelRotation(),BY=(BX===J.Rotate90),BU=W.call(this)&&BY,BW=this.mChartContextPtr.getUniformAxisContext();if(W.call(this)){if(BY){if(this.maxLabelLength===-1){var BT=this.mAxisInfo.mAxisDirection===Az.AD_X;if(BT&&BY&&(this.resizeAction===Ai.ShrinkX||this.resizeAction===Ai.ExpandX)){Bc=1000;}else{Bc=this.calculateMaxAxisSpace(this.restrictHeight);}}else{Bc=this.maxLabelLength;}}else{Bc=this.calculateMaxAxisSpace(this.restrictWidth);Ba.rect.width=Ba.rect.height=0;Ba.mIsRectCalculated=false;}}else{var Bb=false,BV=BW.CategoryAxis.X;if(BV.Layout===C){Bb=true;}if(!this.IsVerticalAxis()){if(BY||Bb){var Bd=BW.CategoryAxis.X.LabelWidthLimit;if(Bd){Bc=Bd;BU=true;}if((BY||Bb)&&!W.call(this)){BU=true;Bc=1000;}}else{if(!this.mWordWrap){Bc=1000;}}}}return{Stringent:BU,WidthLimit:Bc};}function AO(){if(this.mPaddingOnSide===-1){var BW=this.mDatasetPtr,BY=this.mChartContextPtr;if(!BY.mIsGraphMatrix){this.mPaddingOnSide=0;}else{if(I.call(this)){var BU=1,BX=this.mGroupCount;if(Ay.call(this)===false){BU=(BX+0.5);}else{BU=BX*BW.GetClusterSeriesCount()+0.5;}var BT=0,BV=this.mDeviceDataArea;switch(this.mAxisInfo.mAxisDirection){case Az.AD_X:BT=BV.width;break;case Az.AD_Y:BT=BV.height;break;case Az.AD_Z:break;}this.mPaddingOnSide=BT/BU/4;}else{this.mPaddingOnSide=0;}this.mPaddingOnSide=Math.round(this.mPaddingOnSide);}}return this.mPaddingOnSide;}function P(){var BT=0;switch(this.mAxisInfo.mAxisDirection){case Az.AD_X:BT=this.mDeviceDataArea.width;break;case Az.AD_Y:BT=this.mDeviceDataArea.height;break;case Az.AD_Z:break;}return BT-2*AO.call(this);}function AG(Ba,Bc,BU){var BV,Bb,BW=this.mChartContextPtr,BX=!this.IsVerticalAxis(),BT=false;if(BX){BV=0;if(BW.mManualLayoutMode){BV=(Bc*this.getGroupSize(true)+0.5);}else{BV=Bb=Bc*this.getGroupSize(true);if(BW.mIsGraphMatrix===false){BV=Math.floor((Bb*Math.max(1,((P.call(this)/10)/Bb))-Av.Axis.gLabelMargin+0.5));if(this.mAxisCross||BW.mIsTimeSeriesChart){BV=Math.min(BV,BU);}}BV=Math.max(1,BV);}if(this.mIsUniformAxis){var BZ=AQ.call(this,Ba,BV);BV=BZ.WidthLimit;BT=BT||BZ.Stringent;}Ba.mSubTextHolder.SetLineCount(1);Ba.SetTextWidthLimit(BV,BT);}else{BV=this.mDeviceDataArea.width;if(!this.mIsUniformAxis){BV=BV/2;}else{var BY=BW.getUniformAxisContext(),Bd=BY.CategoryAxis.Y;BV=Bd.LabelWidthLimit||BV;}if(this.mIsUniformAxis){if(W.call(this)){Ba.rect.width=Ba.rect.height=0;Ba.mIsRectCalculated=false;}}Ba.SetTextWidthLimit(BV);}}function Ax(BY,BU,BV){BV=(BV!==undefined)?BV:false;var BX=this.mDeviceDataArea,BT,BW;if(this.IsVerticalAxis()){BT=BX.x+BX.width/2;BW=this.getGroupMiddlePos(BY.mGroupId,BV);}else{BT=this.getGroupMiddlePos(BY.mGroupId,BV);BW=BX.y+BX.height;}BU.MoveTo(BT,BW,BA.CENTER);}function b(Ba,BW,BZ,BU){var BT,BX,BY;if(BU===undefined){if(this.maxLabelLength>0){BU=this.maxLabelLength;}else{BU=1000;}}var BV=Ba.mGroupId;BT=this.mLabelList[BV];if(BT===undefined){BY=Ba;BT=new Av.TextObject({TripleId:BY,GraphObjectManager:this,GraphCollectionObject:this.mpAxisLabelSet,hasFill:false,hasLine:false});BX=Ao.call(this,BY.mGroupId,true);BT.SetText(BX.Text);delete BX.Text;if(BX.Texts){BT.texts=BX.Texts;delete BX.Texts;}this.mLabelList[BV]=BT;}AG.call(this,BT,BW,BU);if(BZ){Ax.call(this,Ba,BT);}return BT;}function BM(BX,BZ,BY,BV){var BW=BY,BU=BV,BT;if(this.mUseDepth){BT=this.getDepthMargin(0,0);BW=BW-BT.lowMargin;BU=BU-BT.highMargin;}BW=(BW<0)?0:BW;BU=(BU<0)?0:BU;return{LowMargin:BW>BX?BW-BX:0,HighMargin:BU>BZ?BU-BZ:0};}function AE(Bb,BX,BU,BY,BZ){var Ba,BV;x.ResetRect(BY);Ae.ResetRect(BZ);if(this.mChartContextPtr.mIsGraphMatrix){var BW=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Am.kLabelToChart);var BT=0;if(this.IsVerticalAxis()){x.y-=BW;x.height+=BW;Ae.height+=BW;}else{x.x-=(BW+BT);x.width+=BW+BT;Ae.width+=BW;}}Ba=this.IsVerticalAxis()?Ae.y+Ae.height-(BU.y+BU.height):BU.x-x.x;BV=this.IsVerticalAxis()?BU.y-x.y:Ae.x+Ae.width-(BU.x+BU.width);return BM.call(this,Bb,BX,Ba,BV);}function BL(BZ,Ba,BY){BY=BY||0;var BU,BW,BX,Bb,BV=this.mChartContextPtr,BT={x:0,y:0,width:BV.mGraphWidth,height:BV.mGraphHeight};if(Ba){BU=BZ.x-BY;BW=BZ.x+BZ.width+BY;BX=BT.x;Bb=BT.x+BT.width;}else{BU=BZ.y-BY;BW=BZ.y+BZ.height+BY;BX=BT.y;Bb=BT.y+BT.height;}return !(BU>=BX&&BW<=Bb);}function AI(Bd,Bb,Ba,BW,BZ){var BV=this.mChartContextPtr,BU=0,BX=1,BT=5,Bc=false,BY=BV.GetGraphMatrixContext();if(Bd){switch(Ba){case Ag:case C:case BC:if(Bb){Bc=BY.checkPaddingBetweenLabels(BW,BZ,BT,true);}else{Bc=BY.checkPaddingBetweenLabels(BW,BZ,BX,true);}break;default:Bc=BY.checkPaddingBetweenLabels(BW,BZ,BX,true);break;}}else{Bc=BY.checkPaddingBetweenLabels(BW,BZ,BT,false);}return Bc;}function AH(BV,BU){var BT;var BW=j.call(this,BV,-3);BT=BT||b.call(this,BW,BU,true);return BT;}function AL(BW,BX,BT,Bb,BU,BZ,BY){var Ba=false,BV=this.mChartContextPtr;if(!BW){Ba=BX.HasIntersection(BT);Ba=Ba||(BV.mIsGraphMatrix&&AI.call(this,Bb,BU,BZ,BT,BX));}if(Bb&&!BU){Ba=Ba||(BV.mIsGraphMatrix&&BL.call(this,BX,Bb,BY));}return Ba;}function AL(BW,BX,BT,Bb,BU,BZ,BY){var Ba=false,BV=this.mChartContextPtr;if(!BW){Ba=BX.HasIntersection(BT);Ba=Ba||(BV.mIsGraphMatrix&&AI.call(this,Bb,BU,BZ,BT,BX));}if(Bb&&!BU){Ba=Ba||(BV.mIsGraphMatrix&&BL.call(this,BX,Bb,BY));}return Ba;}function BQ(BW,Bf,Bd,BZ){var BY,Bc=new Av.Rect2D(),Be,BX=true,Bh=!this.IsVerticalAxis(),BV=this.mChartContextPtr,Bb=0,BU=this.mPlotGroupCount,Ba=this.mCategoryOption.mLabelStyle,BT=this.getLabelRotation()===J.Rotate90||this.getLabelRotation()===J.Rotate270,Bg={Overlapped:false,MaxSpace:Bd};if(BV.mIsGraphMatrix){Bb=BV.GetGraphMatrixContext().getPadding(Am.kLabelToChart);}A0.Reset(0,0,0,0);for(BY=Bf;BY<BU;BY+=BW){Be=AH.call(this,BY,BW);BZ.push(Be);Be.GetTransformedRectEx(Bc);Bg.Overlapped=AL.call(this,BX,Bc,A0,Bh,BT,Ba,Bb);if(Bg.Overlapped){Bg.MaxSpace=Bd;return Bg;}if(BX===true){BX=false;A0.ResetRect(Bc);}else{A0.ResetRect(Bc);Bd=Math.max(Bd,this.IsVerticalAxis()?Bc.width:Bc.height);Bg.MaxSpace=Bd;}}if(Bf>=BW){BX=true;A0.Reset(0,0,0,0);for(BY=Bf;BY>=0;BY-=BW){Be=AH.call(this,BY,BW);if(BY!==Bf){BZ.unshift(Be);}Bc=Be.GetTransformedRect(true);Bg.Overlapped=AL.call(this,BX,Bc,A0,Bh,BT,Ba,Bb);if(Bg.Overlapped){Bg.MaxSpace=Bd;return Bg;}if(BX===true){BX=false;A0.ResetRect(Bc);}else{A0.ResetRect(Bc);Bd=Math.max(Bd,this.IsVerticalAxis()?Bc.width:Bc.height);Bg.MaxSpace=Bd;}}}Bg.Overlapped=false;return Bg;}function AD(BT,BU){if(this.IsVerticalAxis()){this.mDeviceDataArea.y+=BU;this.mDeviceDataArea.height-=BU+BT;}else{this.mDeviceDataArea.x+=BT;this.mDeviceDataArea.width-=BT+BU;}}function V(BX,BU,BV,BT,BW){if(!BX){return ;}if(this.IsVerticalAxis()){if(BV>0){BT.mIsShown=false;}if(BU>0){BW.mIsShown=false;}}else{if(BU>0){BT.mIsShown=false;}if(BV>0){BW.mIsShown=false;}}}function AY(){var BV=this.mChartContextPtr,BT=BV.getUniformAxisContext();if(BV.mIsGraphMatrix){var BU=BT.CategoryAxis.X;return !!BU.ForbideStagger===false;}return true;}function f(Bf,BW,Bn,Bb,Bc,Bm,Bk,BV,Bo,Ba){var Bg,Bh,BY,Bj,Be,BX,Bd,Bl,BU,BZ,BT=[],Bi;BY={MaxSpace1:Bm,MaxSpace2:Bk,Overlapped:true};Bj=this.mPlotGroupCount-((this.mPlotGroupCount&1)===0?1:2);Bg=j.call(this,Bj);BX=b.call(this,Bg,2,true,BW*2);Be=BX.GetBoundingRect();Bd=AE.call(this,Bf,BW,Bb,BV,Be);BU=Bd.LowMargin;BZ=Bd.HighMargin;if(BU>Bo||BZ>Ba){this.mDeviceDataArea=Bb;BU=Math.max(Bo,BU);BZ=Math.max(Ba,BZ);if(!Bn){AD.call(this,BU,BZ);}BY.MaxSpace1=0;Bd=BQ.call(this,2,0,Bm,BT);BY.MaxSpace1=Bd.MaxSpace;if(Bd.Overlapped){return BY;}}else{BT=BT.concat(Bc);}Bd=BQ.call(this,2,1,Bk,BT);BY.MaxSpace2=Bk=Bd.MaxSpace;if(Bd.Overlapped){return BY;}Bl=Bm+this.mLevelSpace+Bk+this.mLevelSpace;if(this.HasLabelsOnBothSides()){Bl+=Bl;}if(Bl*2>(this.IsVerticalAxis()?this.mDeviceDataArea.width:this.mDeviceDataArea.height)){return BY;}BX=(this.mPlotGroupCount&1)===0?BT[BT.length-1]:BT[Math.floor(this.mPlotGroupCount/2)];V.call(this,Bn,BU,BZ,BT[0],BX);Bc.splice(0,Bc.length);Bi=BT.length;for(Bh=0;Bh<Bi;++Bh){Bc.push(BT[Bh]);}BY.Overlapped=false;return BY;}function B(BT){return f.call(this,BT.LowMargin,BT.HighMargin,BT.FixedMargin,BT.BackupRect2D,BT.LabelArray,BT.MaxSpace_1,BT.MaxSpace_2,BT.FirstRect,BT.LowLabelMargin,BT.HighLabelMargin);}function BR(BZ,Be,BW){Be=Be||0;var BV=this.mPlotGroupCount-1,Bb=Be,Ba,BY=false,Bd,BX,BU=this.mCategoryOption.mLabelStyle,BT=!this.IsVerticalAxis(),Bc;if(this.mPlotGroupCount<2){return 1;}if(BT&&this.mIsUniformAxis){if(BU===BC){if(BW===1){return BU;}}if(BU===BK){if(BW===2){return BU;}}}while(BV>Bb){Ba=Math.floor((BV+Bb+1)/2);BX=j.call(this,Ba);Bc=b.call(this,BX,BW,true);Bd=Bc.GetTransformedRect(true);if(BZ.HasIntersection(Bd)){Bb=Ba;BY=true;}else{BY=false;if(BV===Ba){break;}BV=Ba;}}return BY?this.mGroupCount:Math.max(BV-Be,BW);}function BF(BT,BV,BU){switch(BT){case h.ALL_BOTTOM:BV.height-=BU;break;case h.ALL_TOP:BV.y+=BU;BV.height-=BU;break;case h.ALL_LEFT:BV.x+=BU;BV.width-=BU;break;case h.ALL_RIGHT:BV.width-=BU;break;}}function l(BT){var BU=this.mAxisInfo.mAxisLabelsLocation;switch(BU){case h.ALL_BOTTOM:case h.ALL_TOP:case h.ALL_LEFT:case h.ALL_RIGHT:BT.push(BU);break;}if(BU===h.ALL_BOTTOM_TOP){BT.push(h.ALL_BOTTOM);BT.push(h.ALL_TOP);}else{if(BU===h.ALL_LEFT_RIGHT){BT.push(h.ALL_LEFT);BT.push(h.ALL_RIGHT);}}}function X(Bd){var Bc,BY,BW,Ba,BX=Bd.FirstLabel,BU=this.mChartContextPtr,BZ=BU.mIsGraphMatrix,Be=this.mCategoryOption.mManualSkip,BV=this.mDeviceDataArea,Bf=this.mAxisInfo.mAxisDirection===Az.AD_Y,BT=this.mCategoryOption.mLabelStyle,Bb=new Av.Rect2D({Rect2D:BV});switch(Bd.Interval){case 1:if(!this.IsVerticalAxis()&&Bd.FirstLabel.possibleTruncate()){BT=C;}else{BT=BC;}break;case 2:BY=this.getLabelRotation();Bc=(BY===J.Rotate90)||(BY===J.Rotate270);BW=true;if(BZ){BW=BW&&!Bf&&!Bc;if(BW){BW=AY.call(this)&&(BX.mTripleId.mGroupId===0);}}else{}if(BW){Ba=B.call(this,Bd);Bd.MaxSpace_1=Ba.MaxSpace1;Bd.MaxSpace_2=Ba.MaxSpace2;BW=Ba.Overlapped===false;if(!Bd.MaxSpace_2){Bd.MaxSpace_2=Bd.MaxSpace_1;}}if(BW){if(BZ&&this.mPlotGroupCount===2){BV.ResetRect(Bb);BT=C;Be=2;}else{BT=BK;}}else{BV.ResetRect(Bb);BT=G.CLS_MANUAL;Be=2;}break;default:BT=G.CLS_MANUAL;Be=Bd.Interval;break;}this.mCategoryOption.mManualSkip=Be;this.mCategoryOption.mLabelStyle=BT;}function A6(Ba){var BW=this.mpAxisLabelSet;if(BW){var Bf=BW.GetFormatFont();if(!!Bf===false){return 1;}var Be=this.getGroupSize(true),Bd=Ba.mGroupId,BY=this.mDatasetPtr,BV;if(BO.call(this)){BV=BY.GetSeriesLabel(Bd);}else{BV=BY.GetGroupLabel(Bd);}var BZ=Bf.mFontRotation,BU=this.mChartContextPtr,Bb=BU.getUniformAxisContext(),BT=Bb.CategoryAxis,Bg=Bf.GetStringExtent(BV);if(BZ===J.Rotate180||BZ===J.Normal){var Bc=2;if(this.IsVerticalAxis()){if(Bg.Height>=Be){Bc=Math.ceil(Bg.Height/Be);return Math.min(Bc,this.mGroupCount);}}else{if(Bg.Width>=Be){Bc=Math.ceil(Bg.Width/Be);return Math.min(Bc,this.mGroupCount);}}if(this.IsVerticalAxis()===false){var BX=BT.X;if(BX&&BX.Layout===BK){return Math.min(2,this.mGroupCount);}}}else{if(BZ===J.Rotate90||BZ===J.Rotate270){if(Bg.Height>=Be){return Math.min(2,this.mGroupCount);}}}}return 1;}function A5(Bv,Bd,Bx,Bo){Bo=(Bo!==undefined)?Bo:0;var Bb,Bm,Bl,Bt=this.mChartContextPtr,Bj,BW,Bw,Bs,BT,BY,BV,Bf=this.mGroupCount,Bp=this.mShownLabelList,By=this.mLabelList,Be=0,B0=0,Br,Bg,B1,B4,BU,B2,Bh,B3,Bn;this.mLevelSize.splice(0,this.mLevelSize.length);Bm=Bl=0;if(Bf<1){return 0;}var Bi=Bt.getUniformAxisLabelRotateMode("x"),Ba=this.IsVerticalAxis()?"Y":"X";BU=Bi===-1;Bj=Bt.mIsGraphMatrix?Bo:0;BW=Bf-1;Bj=AZ.call(this,Ba,Bj,BW);if(!Bt.mManualLayoutMode||Bt.mRecalculateFrame){Bw=j.call(this,Bj);BV=A6.call(this,Bw);Bs=b.call(this,Bw,BV,true);BT=Bs.GetBoundingRect(true);BY=Bs.GetTransformedRect(true);BV=BR.call(this,BY,Bj,BV);H.ResetRect(this.mDeviceDataArea);var BX=this.mDeviceDataArea;while(BV<=Bf){BX.ResetRect(H);Bm=0;Bl=0;if(true){Bw=j.call(this,Bj);AG.call(this,Bs,BV,Bv*2);Ax.call(this,Bw,Bs);BT=Bs.GetBoundingRect(true);}Bm=this.IsVerticalAxis()?BT.width:BT.height;Br=parseInt(BW/BV)*BV;Bw=j.call(this,Br);if(this.mIsUniformAxis){Bg=b.call(this,Bw,BV,true);}else{Bg=b.call(this,Bw,BV,true,2*Bd);}B1=Bg.GetBoundingRect(true);if(this.mChartContextPtr.GetGraphType()===BB.DssGraphTypeGridChart&&Ba==="X"){Be=0;B0=0;this.mLowTrim=0;this.mHighTrim=0;}else{Bn=AE.call(this,Bv,Bd,BX,BT,B1);Be=Bn.LowMargin;B0=Bn.HighMargin;this.mLowTrim=Be;this.mHighTrim=B0;}if(!Bx){AD.call(this,Be,B0);}if(!this.IsVerticalAxis()){B2=this.getLabelRotation();Bh=(B2===J.Rotate90);if(Bh===false){Bw=j.call(this,Bj);AG.call(this,Bs,BV,Bv*2);Ax.call(this,Bw,Bs);BT=Bs.GetBoundingRect(true);if(BL.call(this,BT,true,5)){if(BU){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mLabelInterval=-1;this.mCategoryOption.mLabelStyle=C;return 0;}else{Bs.mIsShown=false;Bj++;}}}}Bp.splice(0,Bp.length);if(this.mGroupCount===1&&!this.IsVerticalAxis()){if(BX.width<BT.width){B2=this.getLabelRotation();Bh=(B2===J.Rotate90)||(B2===J.Rotate270);if(Bh){Bs.mIsShown=false;Bm=Bl=0;break;}BV=2;this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;By.splice(0,By.length);this.mLabelList.push(Bs);Bp.push(Bs);BT=Bs.GetBoundingRect();return BT.height+5;}}Bn=BQ.call(this,BV,Bj,Bm,Bp);Bm=Bn.MaxSpace;if(Bn.Overlapped){++BV;}else{this.mLabelInterval=BV;if(Bp.length>=1){V.call(this,Bx,Be,B0,Bp[0],Bp[Bp.length-1]);if(this.mChartContextPtr.GetGraphType()===BB.DssGraphTypeGridChart&&Ba==="X"){B1=Bp[Bp.length-1].GetBoundingRect(true);if(BL.call(this,B1,true,0)){Bp.splice(Bp.length-1,1);}}}break;}}B3={Interval:BV,FirstLabel:Bs,LowMargin:Bv,HighMargin:Bd,BackupRect2D:H,FirstRect:BT,FixedMargin:Bx,MaxSpace_1:Bm,MaxSpace_2:Bl,LabelArray:Bp,LowLabelMargin:Be,HighLabelMargin:B0};X.call(this,B3);Bm=B3.MaxSpace_1;Bl=B3.MaxSpace_2;if(Bt.mIsGraphMatrix){var Bq=[],Bc=this.mGraphObjectList,Bz=Bc.length,BZ=Bp.length;for(B4=0;B4<BZ;++B4){Bp[B4].mIsShown=true;Bq.push(Bp[B4].mTripleId.mGroupId);}var Bu,Bk;Bk=By.length;for(B4=0;B4<Bk;B4++){if(By[B4]){By[B4].mIsShown=false;}}Bk=Bp.length;for(B4=0;B4<Bk;B4++){Bu=Bp[B4].mTripleId.mGroupId;if(By[Bu]){By[Bu].mIsShown=true;}else{By[Bu]=Bp[B4];}}}else{By=By.concat(Bp);}}this.hasLabelCreated=true;Bb=Ad.call(this,Bm,Bl);return Bb;}function BE(BT){this.mDeviceDataArea.ResetRect(BT.Rect2D);this.mLevelSize.splice(0,this.mLevelSize.length);this.mShownLabelList.splice(0,this.mShownLabelList.length);return A5.call(this,BT.LowMargin,BT.HighMargin,BT.FixedMargin,BT.StartIndex);}function AZ(BU,Bb,BZ){var BY,BT,BV,Ba,BX=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Am.kLabelToChart);var BW=function(){BY=j.call(this,Bb);BT=A6.call(this,BY);BV=b.call(this,BY,BT,true);Ba=BV.GetBoundingRect(true);while(Bb<BZ){if((BU==="Y"&&Ba.y>=BX)||(BU==="X"&&Ba.x>0)){break;}Bb++;BY=j.call(this,Bb);BT=A6.call(this,BY);BV=b.call(this,BY,BT,true);Ba=BV.GetBoundingRect(true);}};if(BU==="Y"){BW.call(this);}else{if(this.mChartContextPtr.GetGraphType()===BB.DssGraphTypeGridChart&&BU==="X"){BW.call(this);}}return Bb;}function A7(){if(this.mLabelInterval<=1){return 0;}var BT=this.mGroupCount%this.mLabelInterval;if(BT<=0){BT=this.mLabelInterval;}return Math.ceil((BT+1)/2)-1;}function Ah(BU){var BV=[[BH.DssGraph2DO1Label,BH.DssGraph2DO2Label],[BH.DssGraphO1Major,BH.DssGraphO2Major],[BH.DssGraphO1Minor,BH.DssGraphO2Minor]],BT=1;if(this.mTripleId.mObjectId===BH.DssGraphO1Body){BT=0;}return BV[BU][BT];}function F(BV){if(BV<0){return true;}var BZ=new Av.TripleId({ObjectId:Ah.call(this,d.OID_LABEL)});this.InitObjectSet(BZ,Z.GOT_AXIS_LABEL);var BX=this.mpAxisLabelSet.mFormatFontPtr,BU=4+2*BX.GetStringHeight("H"),BW=this.mChartContextPtr.GetGraphMatrixContext(),BY=this.mGroupCount,BT=BW.getPadding(Am.kEndLabelToChart)*2+BU*BY+BW.getPadding(Am.kBetweenLabels)*(BY-1);return BT<BV;}function A8(BU){var BV=this.mChartContextPtr,BT={Skip:false,Space:-1};if(!BV.mIsGraphMatrix){return BT;}if(!BU){if(this.resizeAction===-1||this.maxLabelLength===-1){return BT;}this.mWordWrap=F.call(this,this.mDeviceDataArea.height);if(this.resizeAction===Ai.ShrinkX||this.resizeAction===Ai.ExpandX){BT.Skip=!this.mWordWrap;BT.Space=Ad.call(this,this.maxLabelLength,0);}}else{if(this.resizeAction===-1||this.maxLabelLength===-1){return BT;}if(this.resizeAction===Ai.ExpandY||this.resizeAction===Ai.ShrinkY){if(this.getStatus()===2){this.mWordWrap=F.call(this,this.mDeviceDataArea.height);BT.Skip=!this.mWordWrap;this.mLevelSize.splice(0,this.mLevelSize.length);BT.Space=Ad.call(this,this.maxLabelLength,0);}}}return BT;}function Ac(BU){var BX=this.mChartContextPtr;if(!BX.mIsGraphMatrix){return false;}var Be=BX.GetGraphMatrixContext(),Bc,Bg,BY,BV=this.mPlotGroupCount,Bd=0,BT=1,Bf=this.getLabelRotation()===J.Rotate90,BW=1,Ba,Bb=0,BZ=0,Bh;for(Ba=0;Ba<BV;Ba+=BW){Bc=j.call(this,Ba,-3);Bg=b.call(this,Bc,BW,false);if(this.maxLabelLength===-1){Bg.Restore({Stringent:false,Restroke:true});}Bh=Bg.GetBoundingRect(true);BY=Bf?Bh.height:Bh.width;if(Ba%2===0){Bb+=BY;}else{BZ+=BY;}}if(BU===BT){BY=Math.max(Bb,BZ)+Math.ceil(BV/2)*Be.getPadding(Am.kBetweenLabels);}else{if(BU===Bd){BY=Bb+BZ+(BV-1)*Be.getPadding(Am.kBetweenLabels);}else{BY=Bb+BZ+(BV-1)*Be.getPadding(Am.kBetweenLabels);}}BY+=2*Be.getPadding(Am.kLabelToChart);return BY<=this.mDeviceDataArea.width;}function p(){var BV=W.call(this),BT=this.mChartContextPtr,BW=BT.getUniformAxisContext(),Bb=this.mAxisInfo.mAxisDirection===Az.AD_X,BU=BW.CategoryAxis.X,BY=this.mpAxisLabelSet.GetFormatFont(),BZ=false;if(this.mIsUniformAxis&&Bb&&BU){var BX=BT.getUniformAxisLabelRotateMode("x");if(BX===J.Automatic){if(BU.Layout){var Ba=this.mCategoryOption;Ba.mLabelStyle=BU.Layout;if(BV){this.restoreLabels();}if(Ba.mLabelStyle===1||Ba.mLabelStyle===2){BY.mFontRotation=J.Normal;}else{BY.mFontRotation=J.Rotate90;}BZ=true;}}else{BZ=true;BY.mFontRotation=BX;}}if(!BZ){if(BV){this.restoreLabels();if(BV&&this.maxLabelLength===-1){BY.mFontRotation=J.Normal;}}if(this.mIsUniformAxis&&Bb&&BY.mFontRotation===J.Normal){if(Ac.call(this,1)===false){BY.mFontRotation=J.Rotate90;}}}}function e(Bb,BU,Bf,Ba,Bl){var BX=this.mChartContextPtr,BW={Rect2D:BU,LowMargin:Bf,HighMargin:Ba,FixedMargin:Bl,StartIndex:0},Bk;Bk=BE.call(this,BW);if(BX.mIsGraphMatrix===false){return Bk;}BW={Rect2D:BU,LowMargin:Bf,HighMargin:Ba,FixedMargin:Bl,StartIndex:0};var Bh,Bg=this.mCategoryOption.mLabelStyle,Be=600,Bd=800,Bi=this.mLabelInterval;if(Bb){Bh=BX.getUniformAxisLabelRotateMode("x");if(Bg!==BK&&Bi!==1&&this.mPlotGroupCount<=Be){if(Bh===J.Automatic||Bh===J.Rotate90){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;}AP.call(this,1);BW.StartIndex=(Bi>=3)?A7.call(this):0;Bk=BE.call(this,BW);if(Bg===C&&Bi>=3&&BX.GetGraphType()===Z.DssGraphTypeGridChart){BW.StartIndex=A7.call(this);Bk=BE.call(this,BW);}}}else{if(Bi>1&&this.mGroupCount>1){var Bj=this.checkShownLabelCount();if(Bj>=2){}else{if(Bj===1){var BY=true,BZ=A7.call(this),BV=this.mLabelList[BZ],BT=this.mShownLabelList[0],Bc=BT&&BV;if(Bc){BY=BT.mTripleId.mGroupId!==BV.mTripleId.mGroupId;}if(Bc&&BY){if(k.call(this,BV)){BT.mIsShown=false;BV.mIsShown=true;this.mShownLabelList=[];this.mShownLabelList.push(BV);BY=false;}}if(BY){BW.StartIndex=A7.call(this);Bk=BE.call(this,BW);}}}}}return Bk;}function c(Bb,BY,BX){var Bc=this.mLabelList,Ba=[],BU,BW,Be,BT,BV=W.call(this),Bd=this.mAxisInfo.mAxisDirection===Az.AD_X,BZ;BN.ResetRect(this.mDeviceDataArea);l.call(this,Ba);Be=A8.call(this,Bd);if(Be.Skip&&BV){if(BV){this.restoreLabels();if(this.mLowTrim!==undefined&&this.mHighTrim!==undefined){if(this.mLowTrim>=0&&this.mHighTrim>=0){AD.call(this,this.mLowTrim,this.mHighTrim);}}}return Be.Space;}p.call(this);BU=e.call(this,Bd,BN,Bb,BY,BX);BZ=Ba.length;for(BW=0;BW<BZ;++BW){BT=BU;if(AR.call(this,Ba[BW])){BT+=this.mTickLength;}BF.call(this,Ba[BW],this.mDeviceDataArea,BT);}if(this.HasLabelsOnBothSides()){BZ=Bc.length;for(BW=0;BW<BZ;++BW){Bc.push(Bc[BW]);}}this.mLabelSubIndex=this.mLabelList.length/(this.HasLabelsOnBothSides()?2:1);if(this.hasLabelCreated){r.call(this);}}function AX(BT){switch(this.mAxisInfo.mAxisDirection){case Az.AD_X:switch(BT){case h.ALL_BOTTOM:if(this.mDepthDirection>0&&this.mDepthDirection<180){return true;}break;case h.ALL_TOP:if(this.mDepthDirection>=180&&this.mDepthDirection<360){return true;}break;}break;case Az.AD_Y:switch(BT){case h.ALL_LEFT:if(!(this.mDepthDirection>=90&&this.mDepthDirection<270)){return true;}break;case h.ALL_RIGHT:if(this.mDepthDirection>=90&&this.mDepthDirection<270){return true;}break;}break;}return false;}function A3(BT,BW){var BV,BU=this.mChartContextPtr.GetGraphMatrixContext(),BX=AR.call(this,BT)?this.mTickLength:0;if(this.mIsGraphMatrix){BX+=BU.getPadding(Am.kCategoricalLabelToTick);}else{BX+=this.mLevelSpace*BW;}for(BV=0;BV+1<BW;++BV){BX+=this.mLevelSize[BV];}return BX;}function An(){var BY,Bg,BX,BZ,Bc,BU,Bd,Bi=1,Bh=2,Bb=this.mShownLabelList,BT=Bb.length,BW=this.mChartContextPtr,Ba=BW.getUniformAxisContext(),Bf=this.mIsUniformAxis,Be=this.mCategoryOption,BV=Ba.CategoryAxis.X;z.Reset(0,0);Ab.Reset(0,0);for(BY=0;BY<BT;++BY){Bg=AB.call(this,BY);BX=Bb[BY];if(!(BX.mIsShown)){continue;}BX.mIsOnScreen=s.call(this,BX);if(!BX.mIsOnScreen){continue;}BZ=this.getGroupMiddlePos(BX.mTripleId.mGroupId,true);BU=Bi;if(Be.mLabelStyle===G.CLS_STAGGER&&!(BW.mIsTimeSeriesChart)){Bd=(BY>=this.mLabelSubIndex)?(BY-this.mLabelSubIndex):BY;if(Bd>=Math.floor((this.mLabelSubIndex+1)/2)){BU=Bh;}if(Bf){if(BV.StartRow&&BV.StartRow===Bh){BU=Bh+Bi-BU;}}}Bc=A3.call(this,Bg,BU);z.x=0;z.y=1;Ab.x=BZ;Ab.y=n.call(this,Bg,Bc,z);if(this.IsVerticalAxis()){Ab.swap();}if(this.mUseDepth){if(!AX.call(this,Bg)){Ab.x+=this.mDepthOffset.x;Ab.y+=this.mDepthOffset.y;}}this.MoveLabel(BX,Ab,z,0);}}function As(BV,BX,BT){var BU=this.mAxisCross?this.getGroupMiddlePos(BV):(this.getGroupStartPos(BV)+0.5),BW=this.mAxisCross?this.getGroupMiddlePos(BV+1):(this.getGroupStartPos(BV)+this.getGroupSize()+0.5);BX.y=this.mDeviceDataArea.y;BT.y=this.mDeviceDataArea.y;if(this.IsVerticalAxis()){BX.x=this.mDeviceDataArea.x+this.mDeviceDataArea.width;BT.x=BX.x;BX.y=BU;BT.y=BW;}else{BX.y=this.mDeviceDataArea.y;BT.y=BX.y;BX.x=BU;BT.x=BW;}}function AW(BU,Bb,Ba,BY,BV,BZ){var BW=this.mChartContextPtr.getUtiliy().tripleId,BX,BT=[];BX=BW.create(BU,this.mTripleId.mSeriesId,M());this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,Ba,this.mTickLength,BY,BV,BT);this.GenerateOneLineObject(BX,BT,BZ);if(this.HasTwoGridLineParts(Ba)){BT.splice(0,BT.length);this.GetOneGridLine(this.IsVerticalAxis()?h.ALL_RIGHT:h.ALL_TOP,Ba,this.mTickLength,BY,BV,BT);this.GenerateOneLineObject(BX,BT,BZ);}}function Au(){var BX=Av.gAxisObjects[this.getIndex()].mMajorId,BW=[],BU=[],BV,BT;o.call(this,BW,BU);this.InitObjectSet(BX,Z.GOT_MAJOR_GRID);BT=BW.length;for(BV=0;BV<BT;++BV){AW.call(this,BH.DssGraphO1Major,BV,this.mMajorGrid.mGridStyle,BW[BV],BU[BV],this.mpMajorGridSet);}}function A2(){var BU=[],BX=[],BW=Av.gAxisObjects[this.getIndex()].mMinorId,BV,BT;y.call(this,BU,BX);this.InitObjectSet(BW,Z.GOT_MINOR_GRID);BT=BU.length;for(BV=0;BV<BT;++BV){AW.call(this,BH.DssGraphO1Minor,BV,this.mMinorGrid.mGridStyle,BU[BV],BX[BV],this.mpMinorGridSet);}}function u(BT){return BT?this.mPlotGroupCount:this.mGroupCount;}function AK(BT){return BT?this.mPlotGroupSize:this.mGroupSize;}mstrmojo.chart.CategoryAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.CategoryAxis",mLevelSpace:4,mLevelSize:null,mShownLabelList:null,mGroupOrder:null,mLabelSubIndex:0,mCategoryOption:null,mAxisCross:false,mGroupSize:-1,mPlotGroupSize:-1,mPlotGroupCount:0,mGroupCount:1,mDatasetPtr:null,mPaddingOnSide:-1,mWordWrap:true,screenWindow:null,init:function AV(BT){this._super(BT);if(this.mChartContextPtr.mIsGraphMatrix){this.mLevelSpace=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Am.kBetweenLabelLines);}this.mLevelSize=[];this.mShownLabelList=[];this.mGroupOrder=[];this.mCategoryOption={mLabelStyle:G.CLS_AUTOMATIC,mManualSkip:0};if(this.mChartContextPtr.mIsUniformAxisMode){this.mIsShown=this.mIsUniformAxis;}if(BT.AxisDirection===Az.AD_X){this.mAxisInfo.mAxisLabelsLocation=h.ALL_BOTTOM;}if(BT.AxisDirection===Az.AD_Y){this.mAxisInfo.mAxisLabelsLocation=h.ALL_LEFT;}this.mDatasetPtr=null;this.mWordWrap=false;this.LoadProperties();},SetDataset:function AF(BT){this.mGroupSize=-1;var BU=this.mDatasetPtr=BT;if(BU!==null){if(BO.call(this)){this.mGroupCount=BU.GetSeriesCount();}else{this.mGroupCount=BU.GetGroupCount();}this.mPlotGroupCount=this.mGroupCount;}},getSubGroupMiddlePos:function A1(BX,BW,BU,BY){if(BU<=0){return 0;}BY=BY||false;if(BU===1){return this.getGroupMiddlePos(BX);}var BT=this.getGroupSize(BY),BV=this.getGroupStartPos(BX,BY);BV+=BT/(2*BU);return BV+BW*(BT/BU);},getGroupMiddlePos:function BD(BT,BU){BU=(BU!==undefined)?BU:false;return Math.round(this.getGroupStartPos(BT,BU)+this.getGroupSize()/2);},getFloatGroupMiddlePos:function BP(BT,BU){BU=(BU!==undefined)?BU:false;return this.getGroupStartPos(BT,BU)+this.getGroupSize()/2;},getGroupStartPos:function g(BU,BV){BV=(BV!==undefined)?BV:false;var BT=0;switch(this.mAxisInfo.mAxisDirection){case Az.AD_X:BT=this.mDeviceDataArea.x+AO.call(this);break;case Az.AD_Y:BT=this.mDeviceDataArea.y+AO.call(this);break;}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mAxisCross){BT-=this.getGroupSize(BV)*0.5;}}else{if(this.mAxisCross){BT-=this.getGroupSize(BV)*0.5;}}return BT+this.getGroupSize(BV)*BU;},getGroupSize:function U(BU){BU=(BU!==undefined)?BU:false;var BT=AK.call(this,BU);if(BT!==-1){return BT;}BT=0;var BV=u.call(this,BU);if(this.mDatasetPtr!==null){if(!this.mAxisCross){if(BV===0){BV=1;}BT=P.call(this)/BV;}else{if(BV>1){BT=P.call(this)/(BV-1);}else{BT=P.call(this)*2;}}}return BT;},GenerateMapAndList:function AC(){var BY,Ba,BV=this.mGraphObjectList,BX=this.mpAxisLabelSet,BW=this.mLabelList,BT;if(this.mIsShown===false){return ;}Al.call(this);if(BW.length!==0){An.call(this);if(this.mChartContextPtr.mIsGraphMatrix){var BU=[],BZ=Av.gAxisObjects[this.getIndex()].mLabelId;for(BY=0;BY<BV.length;BY++){if(BV[BY]&&BV[BY].mTripleId.mObjectId!==BZ.mObjectId){BU.push(BV[BY]);}}BV=this.mGraphObjectList=[];BX.ClearCollection();BT=BW.length;for(BY=0;BY<BT;++BY){if(BW[BY]){BV.push(BW[BY]);BX.AddGraphObject(BW[BY]);}}for(BY=0;BY<BU.length;BY++){BV.push(BU[BY]);}}else{BT=BW.length;for(BY=0;BY<BT;++BY){if(BW[BY]){BV.push(BW[BY]);BX.AddGraphObject(BW[BY]);}}}}if(this.mAxisInfo.mShowAxisTitle){Ba=this.getAdjustedTitleArea();this.UpdateTitleLocation(Ba);}},getAdjustedTitleArea:function E(){var BW=new Av.Rect2D({Rect2D:this.mDeviceDataArea}),BV,BU,BT=this.mLevelSize.length;if(this.IsVerticalAxis()){BU=h.ALL_LEFT;if(BU===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===h.ALL_LEFT_RIGHT){BW.x-=AR.call(this,BU)?this.mTickLength:0;for(BV=0;BV<BT;++BV){BW.x-=this.mLevelSpace;BW.x-=this.mLevelSize[BV];}if(!AX.call(this,BU)){BW.x+=this.mDepthOffset.x;}}}else{BU=h.ALL_BOTTOM;if(BU===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===h.ALL_BOTTOM_TOP){BW.height+=AR.call(this,BU)?this.mTickLength:0;for(BV=0;BV<BT;++BV){BW.height+=this.mLevelSpace;BW.height+=this.mLevelSize[BV];}if(!AX.call(this,BU)){BW.height+=this.mDepthOffset.y;}}}return BW;},generateInterlacedSection:function Aa(){var BX=new Av.TripleId({ObjectId:this.GetInterlacedGridId(),SeriesId:AU,GroupId:AS}),BU,BT=[],BV,BW=this.mGroupCount;this.InitObjectSet(BX,Z.GOT_INTERLACED_GRID);for(BU=0;BU<BW;BU+=2){if(this.mAxisCross&&BU===BW-1){continue;}BT.splice(0,BT.length);this.getInterlacedSectionPolygon(BU,BT);BV=new Av.PolygonObject({TripleId:BX,GraphObjectManager:this,Polygon:BT,GraphCollectionObject:this.mpInterlacedGridSet});this.mpInterlacedGridSet.AddGraphObject(BV);this.mManagerGraphObjectList.push(BV);}},getInterlacedSectionPolygon:function t(BY,Bc){var BZ=this.mUseDepth,BW=this.mDeviceDataArea,BX=this.mDepthDirection,BT=this.mDepthOffset,Bb=new Av.Point2D(),Ba=new Av.Point2D(),BV,BU;As.call(this,BY,Bb,Ba);BV=new Av.Point2D({Point2D:Bb});BU=new Av.Point2D({Point2D:Ba});if(!this.IsVerticalAxis()){BV.y=BW.GetBottomLeft().y;BU.y=BV.y;if(BZ&&BX>=180&&BX<360){BV.swapPoints(Bb);BU.swapPoints(Ba);}}else{BV.x=BW.x;BU.x=BV.x;if(BZ&&BX>=90&&BX<270){BV.swapPoints(Bb);BU.swapPoints(Ba);}}if(BZ){Bc.push(BV);Bc.push(BU);Bc.push(BU.Shifted(BT));Bc.push(Ba.Shifted(BT));Bc.push(Bb.Shifted(BT));Bc.push(BV.Shifted(BT));}else{Bc.push(BV);Bc.push(BU);Bc.push(Ba);Bc.push(Bb);}},AdjustTitleArea:function At(BT){if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(BT);}},AdjustDataArea:function A(BT,BV,BX,BZ){var BY;if(!this.mIsShown){return ;}if(BV===undefined){BV=1000;}if(BX===undefined){BX=1000;}if(BZ===undefined){BZ=false;}if(this.mUseDepth){this.ReserveDepthAxisLine(BT);}if(this.mDatasetPtr!==null&&this.mAxisInfo.mShowAxisLabels){if(this.mUseDepth){var BU=this.TrimMarginsForDepthAxis(BV,BX);BV=BU.LowMargin;BX=BU.HighMargin;BX=BU.HighMargin;}BY=Av.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(BY,Z.GOT_AXIS_LABEL);if(this.mChartContextPtr.mIsGraphMatrix&&this.mAxisInfo.mAxisDirection===Az.AD_Y){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Normal;}this.SetDeviceDataArea(BT);c.call(this,BV,BX,BZ);var BW=this.mDeviceDataArea;BW.width=Math.max(BW.width,0);BW.height=Math.max(BW.height,0);BT.ResetRect(BW);}},generateGridsByArea:function AA(BT){if(BT){if(this.mMajorGrid.mShowGridLines){Au.call(this);}if(this.mMinorGrid.mShowGridLines){A2.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){this.generateInterlacedSection();}}},getMinMaxLogicalCoord:function Ar(){if(this.mAxisCross){return{min:1,max:(this.mGroupCount>1)?this.mGroupCount:2};}return{min:0.5,max:this.mGroupCount+0.5};},GenerateGridsOnMiddleWall:function N(BU,BT){var BV=this.mDeviceDataArea;this.mDeviceDataArea=BU;q.call(this);O.call(this);Aj.call(this);if(!this.mManagerGraphObjectList.empty()){this.MoveGraphObjectList(BT);}this.mDeviceDataArea=BV;},getTotalGroupCount:function Y(){var BU=this.mDatasetPtr.GetSliceFlag(),BT;this.mDatasetPtr.EnableSlices(false);BT=this.mDatasetPtr.GetGroupCount();this.mDatasetPtr.EnableSlices(BU);return BT;},LoadProperties:function Af(){var BW,BU;this._super();if(!this.mIsShown){return ;}var BV=this.mChartContextPtr,BT=this.mCategoryOption;if(!BV.mIsGraphMatrix){BW=new Av.TripleId({ObjectId:this.mTripleId.mObjectId});BU=BV.GetProperty(BG.DssGraphAxisAutoFit,BW);if(BU!==null&&BU!==undefined){if(BU!==false){BT.mLabelStyle=G.CLS_NORMAL;}else{BU=BV.GetProperty(BG.DssGraphAxisStagger,BW);if(BU!==null&&BU!==undefined){if(BU!==false){BT.mLabelStyle=G.CLS_STAGGER;}else{BT.mLabelStyle=G.CLS_MANUAL;BU=BV.GetProperty(BG.DssGraphAxisScaleFreq,BW);if(BU){BT.mManualSkip=BU;if(BT.mManualSkip<1){BT.mManualSkip=1;}}}}}}switch(BV.GetGraphMajorType()){case Ap.GMT_RADAR:case Ap.GMT_3D_CATEGORY:return ;case Ap.GMT_CATEGORY:if(BV.isParetoChart()){return ;}break;default:break;}}},TrimAxisPadding:function R(BX){var BY=this.mChartContextPtr,BU=BY.getUniformAxisContext(),BW=BU.CategoryAxis;if(BY.mIsGraphMatrix===false){return ;}var BV,BT="X";if(this.IsVerticalAxis()){BT="Y";}if(this.mIsUniformAxis===false){BV=BW[BT];this.mHighTrim=BV.Trims[1]||0;this.mLowTrim=BV.Trims[0]||0;}w.call(this,this.mHighTrim,this.mLowTrim,BX);},ResetAxisPadding:function D(){this.mPaddingOnSide=-1;},getStatus:function K(){var BW=0,BT=1,BX=2,BV=this.getLabelRotation(),BU=this.mLabelInterval;if(BV===J.Rotate90){return BX;}if(BU===1){return BW;}if(BU===2&&this.mCategoryOption.mLabelStyle===G.CLS_STAGGER){return BT;}return BX;},getGroupSlotAt:function A9(BU){var BV=this.getGroupStartPos(0),BT=this.getGroupSize();return Math.ceil((BU-BV)/BT)-1;},getGridLinePosition:function A4(){return[];},getBandings:function S(){var Ba=[],BZ=0,BW=0,BV,BY=this.mGroupCount,BX=this.mChartContextPtr,BU;if(BY===1){if(this.IsVerticalAxis()){BW=BX.mGraphHeight;}else{BW=BX.mGraphWidth;}Ba.push({Start:BZ,Size:BW});}else{var BT=this.getGroupSize(true);for(BU=0;BU<BY;++BU){if(BU===0){BZ=0;BW=this.getGroupStartPos(1,true);}else{if(BU===BY-1){if(this.IsVerticalAxis()){BW=BX.mGraphHeight;}else{BW=BX.mGraphWidth;}BV=Ba[BU-1];BZ=BV.Start+BV.Size;BW=BW-BZ;}else{BV=Ba[BU-1];BZ=BV.Start+BV.Size;BW=BT;}}Ba.push({Start:BZ,Size:BW});}}return Ba;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphRegressionType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumDSSGraphOffScaleType","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphTrendLineOptions","GraphObject","Axis","FormatLine","Point2D","BezierCurve","CurveLineObject");mstrmojo.requiresCls("mstrmojo.VisUtility");var g=mstrmojo.chart,h=g.model.enums,e=mstrmojo.VisUtility,Z=g.enums,N=Z.EnumDSSGraphOffScaleType,V=h.EnumDSSGraphType,E=h.EnumShapeType,d=Z.EnumLineJoinType,C=Z.EnumLineStyle,D=h.EnumDSSGraphRegressionType,F=1e-10,K=100,I=0.25,J=0.01,j=0.15,O=0.3,b=1,P=1.001,B=0,R=1;function Q(k){var l=k.x;k.x=k.y;k.y=l;}function H(p){var l,k,o,n,r=this.mCoefficients,q=this.mTrendLineOptions.mRegressionType;k=p.length;for(l=0;l<k;++l){o=p[l];if(typeof (o)==="number"){r.push(o);}else{if(typeof (o)==="string"&&q===D.DssGraphRegressionExp){if(o.indexOf("Ln")===0){n=o.substr(2);o=parseFloat(n);if(isNaN(o)){return false;}this.subType=R;r.push(o);}}else{return false;}}}if((k===1)&&(q===D.DssGraphRegressionExp||q===D.DssGraphRegressionLog||q===D.DssGraphRegressionPow)){this.deformed=true;}return true;}function Y(o,n){var k=o.mOptions.mOffScaleType,l;o.mOptions.mOffScaleType=N.DssGraphOffScaleShow;l=o.GetPositionByValue(n);o.mOptions.mOffScaleType=k;return l;}function c(AE){var p=this.mChartContextPtr,AA=this.mFormatLinePtr.mLineStyle,u,s,AF;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||p.mUseAnimation){return ;}p.NewPath();var q=AE.length;if(q<2){return ;}var k=g.FormatLine.getLinePattern(AA),r=k.length,z=0,o=0,l=[],w=[];for(u=0;u<q;++u){w.push(0);l.push(0);}var AD=AE[0].x;var AC=AE[0].y;var AB=0.05;if(AA===C.LS_DOT_DOT_DOT){AB=0.03;k[r-1]*=3;}else{if(AA===C.LS_DOT){AB=0.005;}}for(AF=0;AF<=1;AF+=AB/q){for(u=1;u<q;++u){for(s=0;s<q-u;++s){if(u===1){l[s]=AE[s].x*(1-AF)+AE[s+1].x*AF;w[s]=AE[s].y*(1-AF)+AE[s+1].y*AF;continue;}l[s]=l[s]*(1-AF)+l[s+1]*AF;w[s]=w[s]*(1-AF)+w[s+1]*AF;}}o+=Math.sqrt((AD-l[0])*(AD-l[0])+(AC-w[0])*(AC-w[0]));if(o>=k[z]){if(z%2===0){if(this.mIsVertical){p.MoveTo(AD,AC);p.LineTo(l[0],w[0]);}else{p.MoveTo(AC,AD);p.LineTo(w[0],l[0]);}}z=(z+1)%r;o=0;AD=l[0];AC=w[0];}}}function A(p,l,n,r,o){var q,k={};k.usedDefaultValueX=false;switch(p){case D.DssGraphRegressionLog:q=l;l*=n;if(l-q>o){l=q+o;k.usedDefaultValueX=true;}k.startX=l;break;case D.DssGraphRegressionExp:l+=n/Math.pow(r,l*0.25);k.startX=l;break;case D.DssGraphRegressionPoly:l+=n;k.startX=l;break;}return k;}function f(k,AB,y,s,AA,x,q,n){var AD=0,p,o=0,w,t,l,u,z,r,AC;for(z=AB;z<y;){n.push(z);n.push(G.call(this,z));r=z;AC=A.call(this,k,z,s,q,AA);z=AC.startX;u=AC.usedDefaultValueX;if(!u){AD=L.call(this,r);o=L.call(this,z);}p=Math.abs(AD);w=Math.abs(o-AD);if(x===0){t=this.mpXAxis.GetPositionByValue(r);l=this.mpXAxis.GetPositionByValue(z);}while(!u&&(z<y)&&((x===0&&Math.abs(l-t)<5)||(x!==0&&Math.abs(z-r)<x)||(p<=K&&p>I&&w<j*p)||(p<=I&&p>J&&w<O*p)||(p<=J&&w<b*p))){AC=A.call(this,k,z,s,q,AA);z=AC.startX;u=AC.usedDefaultValueX;if(!u){o=L.call(this,z);w=Math.abs(o-AD);}if(x===0){l=this.mpXAxis.GetPositionByValue(z);}}if(z>=y){n.push(y);n.push(G.call(this,y));return ;}}}function X(){var o=this.mTrendLineOptions.mRegressionType,z,k=this.mTrendLineDataValues,s=this.mCoefficients,y=s.length-1,l=k.length,AG=[],n,AD,x,AC,u,AH,AF,p,r,AB,AE=16,AA,q;p=[];for(z=0;2*z<l-l%2;++z){if(k[2*z]!==null&&k[2*z+1]!==null){AG.push(k[2*z]);AG.push(k[2*z+1]);}}n=AG.length;if(n<2){this.isValid=false;return ;}AD=AG[0];x=AG[n-n%2-2];AA=(x-AD)/AE;AC=G.call(this,AD);u=G.call(this,x);AH=this.mpXAxis.GetPositionByValue(AD);AF=this.mpYAxis.GetPositionByValue(AC);this.startPoint={x:AH,y:AF};AH=this.mpXAxis.GetPositionByValue(x);AF=this.mpYAxis.GetPositionByValue(u);this.endPoint={x:AH,y:AF};if(AA<F){this.deformed=true;}if(this.deformed){p.push(AG[0]);p.push(AG[1]);p.push(AG[n-n%2-2]);p.push(AG[n-n%2-1]);}else{var w=this.mpXAxis.GetValueForUnit(),t;if(w!==undefined&&w!==null){t=5*w;}else{t=0;}switch(o){case D.DssGraphRegressionNone:break;case D.DssGraphRegressionLinear:p=AG;break;case D.DssGraphRegressionLog:if(s[1]!==0){r=1+Math.SQRT2/Math.pow(Math.abs(s[1]),0.25);}r=Math.max(r,P);f.call(this,o,AD,x,r,AA,t,0,p);break;case D.DssGraphRegressionExp:if(this.subType===R){q=Math.pow(Math.E,s[1]);}else{q=s[1];}if((s[0]!==0)&&(q!==0)){r=Math.pow(24/Math.abs(s[0]),0.25)/Math.abs(Math.log(q));r=Math.min(r,AA);r=Math.max(r,t);f.call(this,o,AD,x,r,AA,t,q,p);break;}else{for(AB=AD;AB<x;){p.push(AB);p.push(G.call(this,AB));AB+=AA;if(AB>=x){p.push(x);p.push(G.call(this,x));break;}}}break;case D.DssGraphRegressionPow:for(AB=AD;AB<x;){p.push(AB);p.push(G.call(this,AB));AB+=AA;if(AB>=x){p.push(x);p.push(G.call(this,x));break;}}break;case D.DssGraphRegressionPoly:r=1;if(y>1){r=1/Math.pow(Math.abs(s[y]),1/y);}else{r=AA;}r=Math.min(AA,r);r=Math.max(r,t);f.call(this,o,AD,x,r,AA,t,0,p);break;default:break;}}this.mCalcValues=p;}function G(o){var n=this.mTrendLineOptions.mRegressionType,q,p=this.mCoefficients,k,l;switch(n){case D.DssGraphRegressionNone:q=null;break;case D.DssGraphRegressionLinear:q=null;break;case D.DssGraphRegressionLog:q=p[0]+p[1]*Math.log(o);break;case D.DssGraphRegressionExp:switch(this.subType){case B:q=p[0]*Math.pow(p[1],o);break;case R:q=p[0]*Math.pow(Math.E,p[1]*o);break;}break;case D.DssGraphRegressionPow:q=p[0]*Math.pow(o,p[1]);break;case D.DssGraphRegressionPoly:k=p.length-1;q=p[0];for(l=1;l<=k;++l){q+=p[l]*Math.pow(o,l);}break;default:q=null;break;}return q;}function L(o){var n=this.mTrendLineOptions.mRegressionType,q,p=this.mCoefficients,k,l;switch(n){case D.DssGraphRegressionNone:q=null;break;case D.DssGraphRegressionLinear:q=null;break;case D.DssGraphRegressionLog:q=p[1]/o;break;case D.DssGraphRegressionExp:switch(this.subType){case B:q=p[0]*Math.log(p[1])*Math.pow(p[1],o);break;case R:q=p[0]*p[1]*Math.pow(Math.E,p[1]*o);}break;case D.DssGraphRegressionPow:q=p[0]*p[1]*Math.pow(o,p[1]-1);break;case D.DssGraphRegressionPoly:k=p.length-1;q=0;for(l=1;l<=k;++l){q+=p[l]*l*Math.pow(o,l-1);}break;default:q=null;break;}return q;}function U(s,p,r,q,l){var k,o=r,n=q;if(s){if(o>l){if(n>p&&n<l){o=(p+2*n)/3;}else{o=(p+2*l)/3;}}if(n<p||n<o){n=(o+l)/2;}}else{if(o<l){if(n<p&&n>l){o=(p+2*n)/3;}else{o=(p+2*l)/3;}}if(n>p||n>o){n=(o+l)/2;}}k={control1:o,control2:n};return k;}function S(s,n,p,o,l){var k,q=this.mCoefficients,r;if(s===D.DssGraphRegressionPow){if((q[1]<0&&q[0]>0)||(q[1]>0&&q[0]<0)){k=U(false,n,p,o,l);}else{if((q[1]>0&&q[0]>0)||(q[1]<0&&q[0]<0)){k=U(true,n,p,o,l);}}}else{if(s===D.DssGraphRegressionLog){if(q[1]>0){k=U(true,n,p,o,l);}else{if(q[1]<0){k=U(false,n,p,o,l);}}}else{if(s===D.DssGraphRegressionExp){if(this.subType===R){r=Math.pow(Math.E,q[1]);}else{r=q[1];}if((r<1&&q[0]>0)||(r>1&&q[0]<0)){k=U(false,n,p,o,l);}else{if((r>1&&q[0]>0)||(r<1&&q[0]<0)){k=U(true,n,p,o,l);}}}}}if(k===undefined||k===null){k={control1:p,control2:o};}return k;}mstrmojo.chart.TrendLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.TrendLineObject",mpXAxis:null,mpYAxis:null,mTrendLineOptions:null,mDataArea:null,mDepthOffset:null,mIsVertical:false,mTextPtr:null,mRealObjectId:V.DssGraphTypeReserved,mCurveLinePtr:null,mMinXLogical:0,mMaxXLogical:0,mMinYLogical:0,mMaxYLogical:0,mTrendLineType:0,mCoefficients:[],mTrendLineDataValues:[],mCalcValues:[],mBezierCurves:[],identity:null,isValid:null,subType:B,deformed:false,startPoint:{},midPoint:{},endPoint:{},init:function a(l){var k=0,n;this._super(l);this.deformed=false;this.mCoefficients=[];this.mTrendLineDataValues=[];if(l){if(l.RealObjectId){this.mRealObjectId=l.RealObjectId;}if(l.XAxis){this.mpXAxis=l.XAxis;}if(l.YAxis){this.mpYAxis=l.YAxis;}if(l.TrendLineOptions){this.mTrendLineOptions=l.TrendLineOptions;}this.mDataArea=l.DataArea||new g.Rect2D();this.mDepthOffset=l.DepthOffset||new g.Point2D();this.mIsVertical=l.IsVertical||false;if(l.Coefficients){this.isValid=H.call(this,l.Coefficients);}else{this.isValid=false;}if(l.TrendLineValues){this.mTrendLineDataValues=l.TrendLineValues;}if(l.Identity){this.identity=l.Identity;}}this.startPoint={};this.midPoint={};this.endPoint={};this.mCalcValues=[];X.call(this);this.mBezierCurves=[];if(!this.mIsVertical){k=this.mDepthOffset.x;this.mDepthOffset.x=this.mDepthOffset.y;this.mDepthOffset.y=k;}if(this.mpXAxis){n=this.mpXAxis.GetMinMaxLogicalCoord();this.mMinXLogical=n.Min;this.mMaxXLogical=n.Max;}if(this.mpYAxis){n=this.mpYAxis.GetMinMaxLogicalCoord();this.mMinYLogical=n.Min;this.mMaxYLogical=n.Max;}},Draw:function W(){var k=this.mChartContextPtr,p=this.mBezierCurves,n=k.GetLineJoin(),o,w,s=[];if(!this.isValid){return ;}k.SetLineJoin(d.LJT_ROUND);this.SetLineWidth();w=p.length;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||k.mUseAnimation){k.NewPath();p[0].MoveToStart(k);for(o=0;o<w;++o){p[o].CurveToEnd(k);}}else{for(o=0;o<w;++o){p[o].GetControlPoints(s);c.call(this,s);this.ApplyLineFormat();}}if(this.isClosePath){k.ClosePath();}if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||k.mUseAnimation){this.ApplyLineFormat();}k.SetLineJoin(n);for(o=0;o<w;++o){var l=p[o],u=new g.Point2D({Point2D:l.mP0}),t=new g.Point2D({Point2D:l.mP1}),r=new g.Point2D({Point2D:l.mP2}),q=new g.Point2D({Point2D:l.mP3});if(!this.mIsVertical){u.swap();t.swap();r.swap();q.swap();Q.call(this,this.startPoint);Q.call(this,this.midPoint);Q.call(this,this.endPoint);}s.push(u);s.push(t);s.push(r);s.push(q);}k.FinishDrawCurves(s,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},CreateTrendLine:function M(){var AS,AR,n=this.mTrendLineOptions,AG=n.mRegressionType,AA,z,k,AY,AN,AP=[],AQ,AE=new g.Point2D(),u=new g.Point2D(),AI,AH,AM,AL,x,w,AU,AK,AX,y,AV,AD,AC,t,s,o,l,AB,AT=this.mTrendLineDataValues,AF=AT.length,p,r,AO=this.mBezierCurves,AJ=0,AW,q=null;if(!this.isValid){return q;}AF=AF-(AF%2);if(AG===D.DssGraphRegressionLinear){if(n.mSeasonal){for(AS=0;2*AS<AF;++AS){AA=AT[2*AS];z=AT[2*AS+1];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=Y.call(this,this.mpXAxis,AA);AY=Y.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new g.Point2D({x:k,y:AY});AP.push(AN);}else{e.visPrint("Trendline point calculation abnormal:");e.visPrint("\tdata point #: "+(2*AS)+" and "+(2*AS+1));e.visPrint("\tvalueX = "+AA+", valueY = "+z);e.visPrint("\tx = "+k+", y = "+AY);}}}if(AP.length>=2){AD=AP[0].x;t=AP[AF-1].x;o=(AD+t)/2;for(AS=0;AS<AF;++AS){if(AP[AS].x===o){l=AP[AS].y;break;}else{if(AS<AF-1&&AP[AS].x<o&&AP[AS+1].x>o){AB=(AP[AS+1].y-AP[AS].y)/(AP[AS+1].x-AP[AS].x);l=AP[AS].y+AB*(o-AP[AS].x);break;}}}this.midPoint.x=o;this.midPoint.y=l;}}else{for(AS=0;AS*2<AF;++AS){AA=AT[2*AS];z=AT[2*AS+1];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=Y.call(this,this.mpXAxis,AA);AY=Y.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new g.Point2D({x:k,y:AY});AP.push(AN);break;}else{e.visPrint("Trendline point calculation abnormal:");e.visPrint("\tdata point #: "+(2*AS)+" and "+(2*AS+1));e.visPrint("\tvalueX = "+AA+", valueY = "+z);e.visPrint("\tx = "+k+", y = "+AY);}}}for(AR=(AF/2)-1;AR>AS;--AR){AA=AT[2*AR];z=AT[2*AR+1];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=Y.call(this,this.mpXAxis,AA);AY=Y.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new g.Point2D({x:k,y:AY});AP.push(AN);break;}else{e.visPrint("Trendline point calculation abnormal:");e.visPrint("\tdata point #: "+(2*AR)+" and "+(2*AR+1));e.visPrint("\tvalueX = "+AA+", valueY = "+z);e.visPrint("\tx = "+AN.x+", y = "+AN.y);}}}if(AP.length>=2){o=(AP[0].x+AP[1].x)/2;l=(AP[0].y+AP[1].y)/2;this.midPoint.x=o;this.midPoint.y=l;}}if(AP.length>=2){AQ=new g.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AP,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}q=AQ;}else{p=this.mCalcValues;r=p.length;if(this.deformed){AA=p[0];z=p[1];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=Y.call(this,this.mpXAxis,AA);AY=Y.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new g.Point2D({x:k,y:AY});AP.push(AN);}else{e.visPrint("Trendline point calculation abnormal:");e.visPrint("\tdata point #: 0 and 1");e.visPrint("\tvalueX = "+AA+", valueY = "+z);e.visPrint("\tx = "+k+", y = "+AY);}}AA=p[2];z=p[3];if(AA!==null&&AA!==undefined&&z!==null&&z!==undefined){k=Y.call(this,this.mpXAxis,AA);AY=Y.call(this,this.mpYAxis,z);if(k!==undefined&&k!==null&&AY!==undefined&&AY!==null){AN=new g.Point2D({x:k,y:AY});AP.push(AN);}else{e.visPrint("Trendline point calculation abnormal:");e.visPrint("\tdata point #: 2 and 3");e.visPrint("\tvalueX = "+AA+", valueY = "+z);e.visPrint("\tx = "+AN.x+", y = "+AN.y);}}if(AP.length>=2){o=(AP[0].x+AP[1].x)/2;l=(p[0].y+AP[1].y)/2;this.midPoint.x=o;this.midPoint.y=l;AQ=new g.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AP,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}q=AQ;}else{for(AS=0;2*AS+3<2*r;++AS){AI=p[2*AS];AH=p[2*AS+1];AM=p[2*AS+2];AL=p[2*AS+3];if(AI!==undefined&&AI!==null&&AH!==undefined&&AH!==null&&AM!==undefined&&AM!==null&&AL!==undefined&&AL!==null){y=L.call(this,AI);AV=L.call(this,AM);x=AH+y*((2*AI+AM)/3-AI);w=AL+AV*((AI+2*AM)/3-AM);if(AG===D.DssGraphRegressionExp||AG===D.DssGraphRegressionLog||AG===D.DssGraphRegressionPow){AX=S.call(this,AG,AH,x,w,AL);x=AX.control1;w=AX.control2;}AD=Y.call(this,this.mpXAxis,AI);AC=Y.call(this,this.mpYAxis,AH);t=Y.call(this,this.mpXAxis,AM);s=Y.call(this,this.mpYAxis,AL);AU=Y.call(this,this.mpYAxis,x);AK=Y.call(this,this.mpYAxis,w);if(AD!==undefined&&AD!==null&&AC!==undefined&&AC!==null&&t!==undefined&&t!==null&&s!==undefined&&s!==null&&AU!==undefined&&AU!==null&&AK!==undefined&&AK!==null){AE=new g.Point2D({x:AD,y:AC});u=new g.Point2D({x:t,y:s});AO.push(new g.BezierCurve({P0:AE,F1:AU,F2:AK,P3:u,IsVertical:this.mIsVertical}));}else{e.visPrint("Trendline point calculation abnormal:");if(AD===undefined||AD===null||AC===undefined||AC===null){e.visPrint("\tdata point #: "+(2*AS)+" and "+(2*AS+1));e.visPrint("\tvalueX = "+AI+", valueY = "+AH);e.visPrint("\tx = "+AD+", y = "+AC);}if(t===undefined||t===null||s===undefined||s===null){e.visPrint("\tdata point #: "+(2*AS+2)+" and "+(2*AS+3));e.visPrint("\tvalueX = "+AM+", valueY = "+AL);e.visPrint("\tx = "+t+", y = "+s);}}}}AJ=AO.length;AD=AO[0].mP0.x;t=AO[AJ-1].mP3.x;o=(AD+t)/2;AR=-1;for(AS=0;AS<AJ;++AS){if(AO[AS].mP0.x===o){l=AO[AS].mP0.y;AR=AS;break;}else{if(AO[AS].mP3.x===o){l=AO[AS].mP3.y;AR=AS+1;break;}else{if(AO[AS].mP0.x<o&&AO[AS].mP3.x>o){AR=AS;break;}}}}if(l!==undefined){this.midPoint.x=o;this.midPoint.y=l;}else{if(AR<AJ){l=AO[AR].evaluate(o);this.midPoint.x=o;this.midPoint.y=l;}}AW=new g.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this,IsVertical:true,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});for(AS=0;AS<AJ;++AS){AW.AddBezierCurveLine(AO[AS]);}q=AW;}}return q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GridMap","TextObject","ChartContext","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixDataLabelPosition");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumShapeType");var I=mstrmojo.chart,G=I.ChartConstants,D=I.model,E=D.enums,M=I.enums,H=E.EnumDSSGraphMarkerShape,J=M.EnumGraphMatrixDataLabelPosition,C=E.EnumShapeType,L={};function A(){var V=this.ChartContext,h=V.IsPieChart(),d=(V.IsBubbleChart()||V.IsScatterChart()),b=this.SinglePointObjects.length,Z,e=new I.Rect2D(),c,g=this.GridMap,Y=this.PolyLineObjects,R=this.PolygonObjects,W=this.RectangleObjects,f=this.DataAreaFrame,X=this.CirclePieObjects;for(Z=0;Z<b;++Z){e.Reset(0,0,0,0);c=this.SinglePointObjects[Z].GetBoundingRect();if(V.RectangleIntersection(c,f,e)){g.UpdateMatrixRect(e);}}b=Y.length;for(Z=0;Z<b;++Z){g.UpdateMatrixPolyLine(Y[Z]);}b=R.length;var U=document.createElement("canvas");U.width=this.ChartContext.mGraphWidth;U.height=this.ChartContext.mGraphHeight;for(Z=0;Z<b;++Z){g.UpdateMatrixPolygonWithCanvas(R[Z],U);}b=W.length;for(Z=0;Z<b;++Z){e.Reset(0,0,0,0);if(V.RectangleIntersection(W[Z],f,e)){g.UpdateMatrixRect(e);if(d){g.UpdateMatrixOccupyObject(e,W[Z]);}}}b=X.length;for(Z=0;Z<b;++Z){var Q=X[Z].mCenter,a=X[Z].mRadius,S=new I.Rect2D({x:Q.x-a,y:Q.y-a,height:a*2,width:a*2});g.UpdateMatrixCircle(Q,a,true);if(h){g.UpdateMatrixOccupyCircleObject(S,Q,a);}}}function K(S,c){var R=this.ChartContext,Z=R.IsLineChart(),U=R.IsAreaChart(),a=(R.IsBubbleChart()||R.IsScatterChart()),b=false,W=R.GetGraphMatrixContext(),Y=S,X,V,Q=c.HostMarkerPoint;X=W.mMarkerShape;if(X===H.DssGraphMarkerShapeCircle||X===H.DssGraphMarkerShapeRectangle||X===H.DssGraphMarkerShapeSquare){b=true;}if((Z&&!b)||U){if(S===J._BOTTOM){Y=J._TOP;}else{if(S===J._TOP){Y=J._BOTTOM;}}}else{if(a){V=new I.Rect2D({x:0,y:0,width:R.mGraphWidth,height:R.mGraphHeight});if(S===J._BOTTOM){if(Q.y<=V.height/2){Y=J._TOP;}else{Y=J._BOTTOM;}}else{if(S===J._TOP){if(Q.y<=V.height/2){Y=J._BOTTOM;}else{Y=J._TOP;}}}}}return Y;}function B(Z,Y,Q){var R=Z.HostMarkerPoint,W=Z.CenterXOffset,S=Z.CenterYOffset,V=R.x,U=R.y,X=Z.Label.GetBoundingRect(true);switch(Y){case J._BOTTOM:U+=S+Q+X.height*0.5;break;case J._TOP:U-=S+Q+X.height*0.5;break;case J._LEFT:V-=W+Q+X.width*0.5;break;case J._RIGHT:V+=W+Q+X.width*0.5;break;default:break;}Z.Label.MoveToCenter(V,U);}function F(Q,R,S){if(Q.x+Q.width+S<=R.x||Q.x>=R.x+R.width+S){return true;}return(Q.y+Q.height+S<=R.y||Q.y>=R.y+R.height+S);}mstrmojo.chart.DataLabelManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataLabelManager",GridMap:null,DataAreaFrame:null,ChartContext:null,seriesOptions:[],SinglePointObjects:[],PolygonObjects:[],PolyLineObjects:[],RectangleObjects:[],CirclePieObjects:[],init:function N(R){var U=this.ChartContext,Q,S;if(R&&R.DataArea){this.DataAreaFrame=R.DataArea;L.height=2;L.width=2;if(U!==null&&U!==undefined){Q=U.GetGraphMatrixContext();S=Q.getPadding(G.kDataLabel);}this.GridMap=new I.GridMap({Rect:this.DataAreaFrame,Unit:L,dataLabelPadding:S});}this.allowOverlap=(U&&U.allowOverlapBetweenDatalabels())||false;this.SinglePointObjects=[];this.PolygonObjects=[];this.PolyLineObjects=[];this.RectangleObjects=[];this.CirclePieObjects=[];this.seriesOptions=[];},PlaceDataLabels:function P(l,o,Q){var Z=false,b=this.ChartContext,y=b.GetGraphMatrixContext(),e=b.IsLineChart(),W=b.IsAreaChart(),X=b.IsPieChart(),g=(b.IsBubbleChart()||b.IsScatterChart()),AB=y.isCombinationChart(),z,x,u,s,Y,r,AA,a,p=new I.Rect2D(),V,U,w,d,S,h,n,f,t,c=y.getPadding(G.kDataLabel);this.allowOverlap=(b&&b.allowOverlapBetweenDatalabels())||false;this.GridMap.populate();t=this.GridMap;a=y.mMarkerShape;Q=Q||!(b.isCombinationChart()||b.IsDualAxis());if(a===H.DssGraphMarkerShapeCircle||a===H.DssGraphMarkerShapeRectangle||a===H.DssGraphMarkerShapeSquare){Z=true;}A.call(this);z=l.length;for(x=0;x<z;++x){var R=l[x],q=R.isValid;if(!q){continue;}if(AB){U=R.SeriesId;w=R.SeriesInfo;d=this.seriesOptions[w];if(d){S=d.mRealSereisType;if(S===C._LINE||S===C._GENERIC){e=true;}else{if(S===C._CIRCLE||S===C._SQUARE||S===C._RECTANGLE){e=true;Z=true;}else{if(S===C._AREA){W=true;}else{if(S===C._PIE){X=true;}}}}}}AA=this.allowOverlap;for(u=J._BOTTOM;u<=J._RIGHT;++u){if(X&&u>0){break;}Y=J._BOTTOM;if(!X){Y=K.call(this,u,R);B.call(this,R,Y,c);}V=R.Label.GetBoundingRectNoRotation(true);r=this.DataAreaFrame;if(this.allowOverlap===false){AA=t.IsFitPaddingWithBorder(V,r);if(!AA){continue;}if(e&&Z){AA=t.IsAccomdatableConsiderLocation(V,Y);}else{if((e&&!X)||W){AA=t.IsAccomdatableConsiderLabelPaddingOnly(V,true);}else{if(g){AA=t.IsAccomdatableConsiderAccuDistPaddingRect(V);}else{if(X){AA=t.IsAccomdatableConsiderAccuDistPaddingCircle(R.HostMarkerPoint,R.HostMarkerBound.width/2,V);}}}}if(!AA){continue;}h=(o!==undefined&&o!==null)?o.length:0;for(s=0;s<h;++s){n=o[s];if(n.mIsShown){f=n.GetBoundingRect(true);AA=F.call(this,V,f,c);if(!AA){break;}}}}if(AA){R.display=true;R.DataLabelLocation=Y;p.Reset(0,0,0,0);if(b.RectangleIntersection(V,this.DataAreaFrame,p)){t.UpdateMatrixDataLabelMarker(true,p);if(g||X){t.UpdateMatrixOccupyObject(p,V);}}R.Label.mIsShown=true;if(o!==undefined&&o!==null){o.push(R.Label);}break;}}if(!AA){R.Label.mIsShown=false;}}if(Q){this.GridMap.destroy();}return true;},UpdateMatrixDataLabel:function O(Q){return this.GridMap.UpdateMatrixDataLabelMarker(true,Q);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.gm.EnumGraphType","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.gm.EnumShape","mstrmojo.chart.model.enums.EnumDSSAxisName","mstrmojo.chart.model.enums.EnumDSSDynamicShortcut","mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap");mstrmojo.requiresClsP("mstrmojo.vi.models","DropZonesModel","GMDropZones","EnumDragSources");mstrmojo.requiresDescs(11710,11711,11712,11713,11714,11715);var x=mstrmojo,y=x.array,U=x.hash,AN=x.func,AV=x.vi,Q=x.chart.model.enums.EnumDSSObjectType,c=AV.models.DropZonesModel.ENUM_TARGET_POSITION,a=mstrmojo.vi.models.EnumDragSources,AQ=c.ABOVE,AA=c.ON,S=c.BELOW,h=1,b="00000000000000000000000000000000",j=0,AI={n:"Metric Names",did:b,t:j},r=false,AC=mstrmojo.gm.EnumShape,N=mstrmojo.gm.DualAxisSubAxisBit,V=N.PRIMARY,e=N.SECONDARY,AL=x.gm,AK=AL.WidgetPropertyTag,n=mstrmojo.vi.enums.EnumFeatures,M=1,AH=2,AD=3,g=4,F=5,l=6,q=7,W=8,H=9,AB=10,R=11,f=12,p={1:4,4:1,2:3,3:2},Y=mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap,Z=mstrmojo.chart.model.enums.EnumDSSAxisName,E=mstrmojo.chart.model.enums.EnumDSSDynamicShortcut;function C(AW){return AW===g||AW===AD;}function AG(AY,Ab){var AX=Ab.getZoneModelByZoneId(q),Ae=Ab.getZoneModelByZoneId(l),Ad=Ab.getZoneModelByZoneId(F),Ah,Ag,Ac,AW,AZ=[],Af=function(){return[Ae&&Ae.items,Ad&&Ad.items].every(function(Ai){for(Ac=0,AW=0;Ai&&Ac<Ai.length;Ac++){Ah=Ai[Ac];Ag=y.find(AX.items,"did",Ah.did);if(Ag!==-1&&Ag<AW){return false;}AW=Ag>AW?Ag:AW;}return true;});},Aa=function(){[Ae,Ad].forEach(function(Ai){for(Ac=0;Ai&&Ai.items&&Ac<AX.items.length;Ac++){Ah=AX.items[Ac];Ag=y.find(Ai.items,"did",Ah.did);if(Ag!==-1){AZ.push(Ab.getAddDropZoneUnitAction(Ai,Ah,Ai.items.length-1));}}});};if((AY===l||AY===F||AY===q)&&!Af()){Aa();}return AZ;}function AT(Ac,Ah,AY,Af,AX){AY=(AY===undefined)?AA:AY;var Ab=this.gmZones,Aa,AW,Ad,AZ,Ag,Ae=AY;switch(Ac.id){case R:case f:AW=Ab.getZoneModelByZoneId((Ac.id===f)?g:AD);Aa=Ab.getZoneModelByZoneId((Ac.id===f)?M:AH);if(AW.items.length===0&&Aa.items.length===0){if(AX){AZ=Aa;Ag=0;Ae=S;}else{AZ=AW;Ag=0;Ae=AQ;}}else{Ad=Aa.items.length;if(Ah===Ad-1&&AY===S&&Af){AZ=AW;Ag=0;Ae=AQ;}else{if(Ah<Ad){AZ=Aa;Ag=Ah;}else{if(Ah===Ad&&AY===AQ&&!Af){AZ=Aa;Ag=(Ad>0)?(Ad-1):0;Ae=S;}else{AZ=AW;Ag=Ah-Ad;}}}}break;default:AZ=Ab.getZoneModelByZoneId(Ac.id);Ag=Ah;break;}return{zone:AZ,idx:Ag,edge:Ae};}function w(AY,AZ,AX,Ab,Ac){var Aa=AT.call(this,AY,AX,Ac,this.isMetric(AZ),this.isMetricName(AZ));var AW=this.gmZones.isItemDropAllowed(Aa.zone,AZ,Aa.idx,Ab,Aa.edge);if(r){window.console.log("isItemDrop: zone="+AY.id+",idx="+AX+",edge="+Ac+",xzone="+Aa.zone.id+",xidx="+Aa.idx+",xedge="+Aa.edge+",res="+AW);}return AW;}function K(){var AX=this,AW=[AD,g];return AW.some(function(AY){return AX.gmZones.isDualAxis(AY);});}function P(Ab,Aa,Ac){var AZ,Ad,AW=[],AY=this;y.forEach(Aa,function(Ae){if(AY.isMetric(Ae)){AW.push(Ae);}});AZ=Ab.readGlobalProperty(AK.METRIC_SHAPES);Ad=AZ.jsonObj[Ac.did];if(Ad!==undefined){Ab.updateMetricShape(Ac);for(var AX=0;AX<AW.length;AX++){AZ=Ab.readGlobalProperty(AK.METRIC_SHAPES);AZ.setProperty(AW[AX].did,Ad);Ab.setWidgetPropertyValue(AK.METRIC_SHAPES,AZ.jsonObj);}}}mstrmojo.vi.models.CombineDropZonesModel=mstrmojo.declare(mstrmojo.vi.models.DropZonesModel,[mstrmojo.vi.models._DropZoneCommon],{scriptClass:"mstrmojo.vi.models.CombineDropZonesModel",help:"editor_panel_graph.htm",dropZones:[],gmZones:null,init:function AM(AW){this._super(AW);},getMetricCntInAxis:function d(AW){var AY=0,AX=this;y.forEach(AW.items,function(AZ){if(AX.isMetric(AZ)){AY++;}});return AY;},shouldMetricNameShowIcon:function AS(Aa,AX){var AZ=this,AY=this.gmZones,Ac=AY.getHost(),Ab=Ac.GMController,AW=K.call(AZ);if(AZ.isMetricName(Aa)){if(!Ab.isPie){return false;}}return true;},addZoneItem:function t(AX,AY,AW){if(!AX.did){AX.did=AX.id;}this._super(AX,AY,AW);},getDropZones:function(){var Ah=this.gmZones,AX=Ah.getHostStructure(),Ae=Ah.getHost(),Ak=Ae.GMController,Aa=Ae.getChartInfo(),Ai=Ae.getChartStyle(),Ag=Ak.isPie,Al=Ak.isHistogram,AY=Ak.isBoxPlot,Ac=Ak.isWaterfall,Af=(Ak.chartType===mstrmojo.gm.EnumGraphType.GRID&&!Ak.isEmptyVis()&&!Ak.isEmptyBreakby()),Aj=Ak.pureAreaChart||(Aa.tp===3&&Ai==="NewGraphMatrixVisualizationStyle"),Ab=this.getZone(mstrmojo.desc(12173,"Break By"),F,AX.BreakBy,Af,{title:mstrmojo.desc(13828)}),AZ=this.getZone(mstrmojo.desc(12090,"Size By"),W,AX.SizeBy,Aj,{allowSingle:!Ak.isBubbleOrScatter(),title:mstrmojo.desc(13829)}),Am=this.getZone(mstrmojo.desc(2962,"Tooltip"),H,AX.AdditionalMetrics,false,{title:mstrmojo.desc(13827)}),Ad=[this.getZone(mstrmojo.desc(14294,"Angle"),AB,AX.AngleBy,false,{title:mstrmojo.desc(13827)}),this.getZone(mstrmojo.desc(6188,"Slice"),l,AX.SliceBy,false,{title:mstrmojo.desc(13828)}),this.getZone(mstrmojo.desc(2069,"Vertical"),f,AX.Rows.concat(AX.YAxis),false,{title:mstrmojo.desc(11668)}),this.getZone(mstrmojo.desc(3691,"Horizontal"),R,AX.Columns.concat(AX.XAxis),false,{title:mstrmojo.desc(11668)}),this.getZone(mstrmojo.desc(11662,"Color By"),q,AX.ColorBy,false,{title:mstrmojo.desc(11668)}),Ab,AZ,Am];if(!Ag){Ad=Ad.slice(2);}else{Ad.splice(1,0,Ad.splice(4,1)[0]);}if(Al){this.help="creating_histogram.htm";Ad=[this.getZone(mstrmojo.desc(517,"Metric"),g,AX.YAxis,false,{allowSingle:true,title:mstrmojo.desc(11668)}),this.getZone(mstrmojo.desc(11806,"Aggregate By"),AD,AX.XAxis,false,{title:mstrmojo.desc(11668)})];}else{if(AY){this.help="create_box_plot.htm";Ad=[this.getZone(mstrmojo.desc(2069,"Vertical"),f,AX.Rows.concat(AX.YAxis),false,{title:mstrmojo.desc(11668)}),this.getZone(mstrmojo.desc(3691,"Horizontal"),R,AX.Columns.concat(AX.XAxis),false,{title:mstrmojo.desc(11668)}),Ab,this.getZone(mstrmojo.desc(11662,"Color By"),q,AX.ColorBy,false,{title:mstrmojo.desc(11668)})];}else{if(Ac){this.help="create_waterfall.htm";Ad=[this.getZone(mstrmojo.desc(2069,"Vertical"),f,AX.Rows.concat(AX.YAxis),false,{title:mstrmojo.desc(11668)}),this.getZone(mstrmojo.desc(3691,"Horizontal"),R,AX.Columns.concat(AX.XAxis),false,{title:mstrmojo.desc(11668)}),Ab,Am];}}}this.dropZones=Ad;if(Aj){AZ.items.forEach(function(An){An.hidden=true;});}if(Af){Ab.items.forEach(function(An){An.hidden=true;});}var AW=Ah.getDropZones();AW.zones.forEach(function(An){if(An.id===F){Ab.siblings=An.siblings;}});return{n:Ah.getHost().defn.ttl,zones:Ad};},getZone:function AF(Ad,Ac,Ab,AX,AZ){var AW=this._super(Ad,Ac,Ab,AX,AZ),AY=this.getHost(),Aa=AY.GMController;if(Ac===R||Ac===f){AW.cssClass=AW.cssClass+" mergedZone";}if(Aa.isHistogram){if(Ac===AD||Ac===g){AW.cssClass+=" hideIcz";}}return AW;},canSwapAxis:function AE(){var AW=this.getHost(),AX=AW.GMController;if(!AX.isHistogram){return this.gmZones.canSwapAxis();}else{return false;}},swapAxis:function A(){this.gmZones.swapAxis();},getClearAllUnitsActions:function O(){var AX=[],AW=this;y.forEach(AW.gmZones.getDropZones().zones,function(AY){y.forEach((AY&&AY.items)||[],function(AZ){Array.prototype.push.apply(AX,AW.getRemoveDropZoneUnitActions(AY,AZ));});});return AX;},getClearAllUnitsUnTemplateActions:function s(){var AZ=[],AX=this,AW=this.getHost(),AY=AW.GMController;AY.removeGroupInfo();if(AW.isXMLDirty()){AZ.push(AW.getPersistAction());}return AZ;},getUnitMenuItems:function z(AZ,Am,Al,AY){if(!Al){throw new Error(this.scriptClass+"::getUnitMenuItems: Item must be provided.");}var Ar=this,AX=Ar.gmZones,Ag=(Al.t===Q.DssTypeMetric&&!this.isMetricName(Al)),Ao=(Al.ax||V),AW=(Ao===V),Ab=AX.getZoneModelByZoneId((Am.id===f)?M:AH),Ad=AX.getZoneModelByZoneId((Am.id===f)?g:AD),Ap,An=Ar.isMetricName(Al),Ai=K.call(Ar),Af=Ar.getHost(),Ah=Af.GMController.isBubbleOrScatter(),Aj=Af.GMController.isPie,Aq=Ar.getMetricCntInAxis(Am);if(An){Ap=AX.getZoneModelByZoneId(Al.zone);}else{var Ac=AT.call(this,Am,Al._renderIdx);Ap=Ac.zone;}var Ak=Ag?Ao:(Ap.id===Ad.id?V:e),Ae=function(As,At,Av){var Au=As!==At,Aw=C(Av.newZone.id);if(Au){Ar.unitsDropped(Av.newZone,{src:{data:{src:a.VIZ_EDITOR}}},{idx:Aw?0:Av.newZone.items.length,edge:Aw?AQ:S,allowedItems:[Al]},Av.isPrimary);}return Au;};if(Am.id===R){if(!(Ag&&Af.getChartStyle()==="NewGraphMatrixVisualizationStyle")&&(!An||(An&&Aj&&!Ai&&(Ah||(!Ah&&Aq<=0))))){AZ.addRadioMenuGroup(Ak,Ae,[{value:e,text:Ag?mstrmojo.desc(11710,"Top Axis"):mstrmojo.desc(11711,"Top Column"),newZone:Ag?Ad:Ab,isPrimary:Ag?!AW:true},{value:V,text:mstrmojo.desc(11712,"Bottom Axis"),newZone:Ad,isPrimary:true}],"checkMark");}}else{if(Am.id===f){var Aa=[];if(!(Ag&&Af.getChartStyle()==="NewGraphMatrixVisualizationStyle")&&(!An||(An&&Aj&&!Ai&&(Ah||(!Ah&&Aq<=0))))){if(!Ag){Aa.push({value:e,text:mstrmojo.desc(11714,"Left Row"),newZone:Ab,isPrimary:true});}Aa.push({value:V,text:mstrmojo.desc(11715,"Left Axis"),newZone:Ad,isPrimary:true});}if(Ag&&Af.getChartStyle()!=="NewGraphMatrixVisualizationStyle"){Aa.push({value:e,text:mstrmojo.desc(11713,"Right Axis"),newZone:Ad,isPrimary:!AW});}AZ.addRadioMenuGroup(Ak,Ae,Aa,"checkMark");}}if(!this.isMetricName(Al)&&(Am.id===R||Am.id===f)){AZ.addSeparator();}if(Af.getChartStyle()==="NewGraphMatrixVisualizationStyle"){return Af.interactor.getMenuConfig(Af,{type:"title"},AZ,{attributeAxis:!Ag,identity:Al,el:AY});}return this.gmZones.getUnitMenuItems(AZ,Ap,Al,AY);},getDynamicBreakByAxisOptions:function(AX){var AY=this.getHost(),AZ=AY.GMController,AW=[];if(AZ.getAttributesOnDropZone("Rows").length){AW.push({n:AX?mstrmojo.desc(3326,"By Columns"):mstrmojo.desc(122,"Columns"),axes_bitmap:Y.DssXmlAxisRowsBit,dmy:"@cols"});}if(AZ.getAttributesOnDropZone("Columns").length){AW.push({n:AX?mstrmojo.desc(3327,"By Rows"):mstrmojo.desc(2968,"Rows"),axes_bitmap:Y.DssXmlAxisColumnsBit,dmy:"@rows"});}if(AZ.getAttributesOnDropZone("Rows").length||AZ.getAttributesOnDropZone("Columns").length){AW.push({n:AX?mstrmojo.desc(13283,"By Cell"):mstrmojo.desc(13399,"Cell"),axes_bitmap:Z.DssAxisDynamicShortcutRoot+E.DssDynamicShortcutCell,dmy:"@cell"});}if(AZ.getAttributesOnDropZone("BreakBy").length){AW.push({n:AX?mstrmojo.desc(13284,"By Shape"):mstrmojo.desc(2923,"Shape"),axes_bitmap:Z.DssAxisDynamicShortcutRoot+E.DssDynamicShortcutShape,dmy:"@shape"});}return AW;},filterAllowItems:function X(Ab,AX,AZ,Aa){var AY,AW;if(AZ>0&&Aa>0){for(AY=Ab.length-1;AY>=0;AY--){AW=this.isMetric(Ab[AY]);if((AW&&AX)||(!AW&&!AX)){Ab.splice(AY,1);}}}if(Ab.length>1&&this.isMetric(Ab[0])){Ab.splice(1,Ab.length-1);}return Ab;},allowDropOnTarget:function AJ(AW,AY){var AX=AT.call(this,this.getZoneModelByZoneId(AY.srcZoneId),AY.itemIdx),AZ=U.copy(AY);AZ.srcZoneId=AX.zone.id;AZ.itemIdx=AX.idx;return this.gmZones.allowDropOnTarget(AW,AZ);},getAllowDropInfo:function B(Am,AX,Ad,AY,AW){var Al=this._super(Am,AX,Ad,AY,AW),Ac=Al.allowedItems,An=this,Ak,Ah=0,Ao=0,Ae=0,Aj={},Ai=AW.src.data.src,Af=this.gmZones.getZoneModelByZoneId(AB)!==undefined;Aj[AD]=An.gmZones.getMetricCntInZone(AD);Aj[g]=An.gmZones.getMetricCntInZone(g);if(Af){Aj[AB]=this.gmZones.getItemCountInZone(AB);}y.forEach(Ac,function(Ap){if(An.isMetric(Ap)){Ao++;}else{if(An.isMetricName(Ap)){Ae++;}else{Ah++;}}});if(Ao>0&&Ae>0&&Am.id!==Ai){var AZ=Am;if(Am.id===f||Am.id===R){AZ=this.gmZones.getZoneModelByZoneId((Am.id===f)?g:AD);if(Ai===AH||Ai===M){Ai=this.gmZones.getZoneModelByZoneId((Am.id===f)?AD:g);}}Aj[AZ.id]+=Ao;Aj[Ai.id]-=Ao;y.forEach(Ac,function(Aq,Ap){if(An.isMetricName(Aq)&&!(Aj[AD]>1||Aj[g]>1||Aj[AB]>1)){Ac.splice(Ap,1);}});}if(Ao>0&&Ah>0&&(Am.id===R||Am.id===f)){if(AY===c.ON){var Ab=Am.items[Ad];if(this.isMetricName(Ab)){Al.allowedItems=[];}}return Al;}else{if(Ac.length>1&&(Ao>=1||Ah>=1)&&Am.id===q){if(this.getItemCountInZone(q)===0){var Aa=(Ah+Ae>=Ao);Ac=this.filterAllowItems(Ac,Aa,Ao,Ah+Ae);return Al;}var Ag=this.isAttrCategory(Am.items[0])||this.isMetricName(Am.items[0]);Ac=this.filterAllowItems(Ac,Ag,Ao,Ah+Ae);return Al;}}for(Ak=Ac.length-1;Ak>=0;Ak--){if(!w.call(An,Am,Ac[Ak],Ad,AW,AY)){Ac.splice(Ak,1);}}return Al;},getAvatarIconClass:function k(){var AW=this.gmZones,AY=AW.getHost(),AZ=AY.getChartInfo();if(AZ.isCombo){return"viGMCombo";}if(AZ.isPie){return"viGMPie";}if(AZ.isBubbleOrScatter){return"viGMBubble";}if(AZ.isABL){var AX=AZ.shape;if(AX===AC.BAR){return"viGMBar";}if(AX===AC.LINE){return"viGMLine";}if(AX===AC.AREA){return"viGMArea";}return"viGMLine";}return"viGMCombo";},shouldAddMetricCount:function L(Ab,AX,Aa,AW){var AY=1,AZ=this.gmZones.hGetItemOccurrence(AI,[F]);Ab.forEach(function(Ac){if(Ac.did===AX.did){AY=0;}});if(Aa===AA&&AZ.length&&Ab[AW].did===AX.did){AY=-1;}return AY;},processDualAxis:function J(Ac,Ah){var Ad=0,Ae=this,AX=Ae.gmZones.getZoneModelByZoneId(AD),AW=Ae.gmZones.getZoneModelByZoneId(g),AZ=[],Aa,Ag=Ac===AD?AX:AW,Af=Ag===AX?AW:AX,AY=Ac===AD?g:AD,Ab=Ae.gmZones.getMetricCntInZone(AY);if(Ab){y.forEach(Ag.items,function(Ai){if(Ae.isMetric(Ai)&&Ai.id!==Ah.id&&Ai.ax!==Ah.ax){Ad=1;AZ.push(Ae.gmZones.getAddDropZoneUnitAction(Ag,Ai,Ai.idx,{isPrimary:Ah.ax===0?true:false}));}});}if(Ad!==1){Aa=Ae.gmZones.isDualAxis(AY);if(Aa){y.forEach(Af.items,function(Ai){if(Ai.id!==Ah.id&&Ai.ax===1){AZ.push(Ae.gmZones.getAddDropZoneUnitAction(Af,Ai,Ai.idx,{isPrimary:true}));}});}}return AZ;},getUnitDroppedActions:function I(Au,AY,As,Ag,Ac,Ak,Aq,AZ){var Ax=this,AW=this.gmZones,Av=AT.call(this,Au,Ag,Ac,this.isMetric(As),this.isMetricName(As)),At=AY.src.data.src,Af=[],AX=Ax.isMetric(As);if(AY&&(At===a.DATASETS||At===a.VIZ_EDITOR)&&!w.call(Ax,Au,As,Ag,AY,Ac)){return Af;}if(r){window.console.log("unitDropped: zone="+Au.id+", idx="+Ag+", edge="+Ac+", xzone="+Av.zone.id+", xidx="+Av.idx+", xedge="+Av.edge);}if(!As.did){As.did=As.id;}if(Au.id===f||Au.id===R){var Ae=AW.getZoneModelByZoneId((Au.id===f)?g:AD),Ad=AW.getZoneModelByZoneId((Au.id===f)?M:AH),Aj=AW.isMetricZone(Ae.id),Ao=false,An;if((Av.zone.id===Ae.id)&&Ae.id!==As.zone&&!Aj&&Ac!==AA&&!this.isMetricName(As)){y.forEach(Ae.items,function(Ay){if(!Ax.isMetricName(Ay)&&Ay.did!==As.did){An=Ay;return false;}});if(An){Af.push(AW.getAddDropZoneUnitAction(Ad,An,Ad.items.length));Ae.items.splice(y.indexOf(Ae.items,An),1);if(Av.idx){Av.idx--;}else{if(Av.idx===0&&Av.edge===S){Av.edge=AQ;}}Af.callback=AN.wrapMethods(AW.getUpdateCallback(),{failure:function(){Ad.items.pop();Ae.items=[An].concat(Ae.items);}});}AY.metricNamesHandled=true;}if(AX){var Ap=AW.getZoneModelByZoneId(AB),Ah=false,Aa=0,Ab=Ad.id;if(Ap!==undefined){Ah=this.isMetricZone(AB);Aa=Ap.items.length;}var Aw=0;y.forEach(Ae.items,function(Ay){if(Ax.isMetric(Ay)){Aw++;}});var Am=Ax.shouldAddMetricCount(Ae.items,As,Av.edge,Av.idx);if(Aw+(Am&&Ac!==AA?1:0)>h){Ao=true;}if(AY.dndGM&&!Aq&&Ac!==c.ON){if(Ae.id===AD){Ab=g;}else{Ab=AD;}}var Al=U.clone(AI),Ar=this.gmZones.hGetItemOccurrence(Al,[M,AH,AD,g,q,F,l]);if(Ar.length===0){Af=Af.concat(AW.getUpdateMetricNameUnitActions(Ao,Ab));AY.metricNamesHandled=true;}else{AY.metricNamesHandled=false;}}}Af=Af.concat(AW.getUnitDroppedActions(As,Av.zone,AY,Av.idx,Av.edge,Ak,Aq,AZ));if(AX&&(Au.id===f||Au.id===R)){var Ai=AW.getZoneModelByZoneId((Au.id===f)?g:AD);if(Ai.id===AD){Af=Af.concat(Ax.processDualAxis(AD,As));}else{if(Ai.id===g){Af=Af.concat(Ax.processDualAxis(g,As));}}}if(AX&&AY.src.data.src===mstrmojo.vi.models.EnumDragSources.VIZ){if(Au.id===AD){Af=Af.concat(Ax.processDualAxis(AD,As));}else{if(Au.id===g){Af=Af.concat(Ax.processDualAxis(g,As));}}}return Af;},unitsDropped:function AP(Af,BA,Ar,AZ,Ad,As){var Au=this.gmZones,Ax=BA.actions||[],A0=[],AX,A9=Ar.idx,Ae=Ar.edge,Aq=Ar.allowedItems,Aj=this,A7,Aa=x.all[this.hostId],A1=false,A8,A3=K.call(this);if(Af.id===f||Af.id===R){if(this.isMetric(Af.items[A9])&&AZ===undefined){if(Ae===AA){AZ=(Af.items[A9].ax===0);}else{if(Aq.length>0&&this.isMetric(Aq[0])&&Aq[0].ax!==undefined){AZ=(Aq[0].ax===0);}}}}if(Ae===AA&&this.isMetric(Af.items[A9])){P.call(this,Aa,Aq,Af.items[A9]);}if(Aq.length>1&&(Af.id===R||Af.id===f)){var Ak=[],A5=[];y.forEach(Aq,function(BB){if(Aj.isMetric(BB)){Ak.push(BB);}else{A5.push(BB);}});if(Ak.length>0&&A5.length>0){var At=AT.call(this,Af,A9,Ae,false),Ab=At.zone,An=Au.getZoneModelByZoneId(p[Ab.id]),Al=(Ab.id===AD||Ab.id===g)?Ak:A5,A4=(An.id===AD||An.id===g)?Ak:A5,Ah=function(BC,BB){return Aj.isAttrCategory(BC)&&Aj.isMetricName(BB.items[BB.items.length-1]);};A9=At.idx;Ae=At.edge;if(Ah(Al[0],Ab)&&(A9>=Ab.items.length-1)){A9-=1;}Al.forEach(function(BC,BB){A8=(BB!==0?S:Ae);AX=Aj.getUnitDroppedActions(Ab,BA,BC,A9,A8,true,Ad);A9+=(AX.length>0&&A8===S?1:0);A0=A0.concat(AX);});A9=An.items.length-1;if(Ah(A4[0],An,A9)){A9-=1;}A4.forEach(function(BB){AX=Aj.getUnitDroppedActions(An,BA,BB,A9++,S,true,Ad);A0=A0.concat(AX);});A1=true;}}if(!A1){for(A7=0;A7<Aq.length;A7++){A8=(A7!==0?S:Ae);AX=Aj.getUnitDroppedActions(Af,BA,Aq[A7],A9,A8,AZ,Ad,As);A9+=(AX.length>0&&A8===S?1:0);A0=A0.concat(AX);}}var AW=K.call(this);var Ai=Au.getZoneModelByZoneId(q);if(!A3&&AW&&Ai!==undefined&&Ai.items.length===0){A0=A0.concat(Au.getUpdateMetricNameUnitActions(true,q));}var Ap=Au.getZoneModelByZoneId(F);if(Ap!==undefined){var Am=Ap.items.length;if(Af.id!==q&&Am>0){Ap.items.forEach(function(BB){if(y.find(Aq,"did",BB.did)>=0){Am--;}});if((!Aq||Aq&&(Aq.length===0||Af.id!==F))&&Am===0){Aa.updateSubtype();}}}var AY=this.docModel,A6=AY.getDataService(),Az=Aa.k,Ac=AN.wrapMethods({success:function(){Aa.resetXMLDirtyFlag();}},Aa.controller._getXtabCallback(Aa)),Ay=A6.getUpdateTemplateAction(Az,A0),Av=Ay.partialRetrieval.nodes,Aw=AY.getSelectedViUnit(),A2=Aw&&Aw.boxContent,Ag=!(A2&&A2.isInFilterPanel());Ac=AN.wrapMethods(BA.callback,Ac);Ay.partialRetrieval.nodes=Av.concat(Ag?AY.getSourceFilterKeys(Az):[]);Ax.push(Ay);if(Aa.isXMLDirty()){Ax.push(Aa.getPersistAction());}var Ao=function(BB){return function(){var BC=BB?AY.wrapUnsetVisualizationFilterAction(Ax):Ax;Aj.checkAndWarnLargeItemsForAddUnits(Aq,function(){Aa.controller.submitUndoRedoUpdates(BC,null,Ac);});};};AY.checkAndNotifyVFChangeOnDZUnitsUpdate({actions:Ax,zm:Aj},Ao(true),Ao(false));},getRemoveDZUnitAction:function AO(AX,AW){var AY=AT.call(this,AX,AW);return this.gmZones.getRemoveDZUnitAction(AY.zone,AY.idx);},getClearDZUnitActions:function AU(AX,AW){var AY=this.gmZones,AZ=[];switch(AX.id){case R:AZ.concat(AY.getClearDZUnitActions(AY.getZoneModelByZoneId(AH),AW));AZ.concat(AY.getClearDZUnitActions(AY.getZoneModelByZoneId(AD),AW));break;case f:AZ.concat(AY.getClearDZUnitActions(AY.getZoneModelByZoneId(M),AW));AZ.concat(AY.getClearDZUnitActions(AY.getZoneModelByZoneId(g),AW));break;default:AZ=AY.getClearDZUnitActions(AX,AW);break;}return AZ;},getAddDZUnitAction:function(AX,AZ,AW,Aa){var AY=this.gmZones;return AY.getAddDropZoneUnitAction(AX,AZ,AW,{isPrimary:Aa});},moveAttributesToZone:function o(AX,AW){return this.gmZones.moveAttributesToZone(AX,AW);},deleteItem:function G(AX,AW){var AY=AT.call(this,AX,AW);this.gmZones.deleteItem(AY.zone,AY.idx,h-1);},deleteItems:function(AW,AX){this.gmZones.deleteItems(AX,h-1);},getHostModel:function(){return this.gmZones.getHostModel();},getMultiUnitsMenuItems:function u(AX,AW,AY){var Aa=this.id;if(!mstrApp.isInVFConfigMode&&mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(AY).length&&mstrmojo.resolveFeature(n.INSERT_NEW_METRIC)){var AZ=AW;if(AW.id===f||AW.id===R){AZ=this.gmZones.getZoneModelByZoneId((AW.id===f)?g:AD);}AX.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[Aa].getMultipleMetricsCalcMenus(AZ,AY,true);});}AX.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[Aa].deleteItems(AW,AY);});},addUnitsFromDataSource:function D(AX,AY,AZ,AW){this.gmZones.addUnitsFromDataSource(AX,AY,AZ,AW);},getHighlightTargets:function AR(Aa,Ae){var AW=AT.call(this,Aa,Ae.dzidx||Ae.idx,Ae.edge),Ac=AW.zone,AZ=this.gmZones,AY=AZ.getHost(),Ag=AY.GMController,Ab,AX,Ad;if(!Ag.isHistogram&&(Ac.id===AD||Ac.id===g)){AX=this.gmZones.getZoneModelByZoneId((Aa.id===f)?M:AH);Ad=AX.items.length;Ab=this.gmZones.getHighlightTargets(Ac,Ad,{allowedItems:Ae.allowedItems,idx:AW.idx,edge:AW.edge});}var Af=(this.isAttrCategory(Ae.item)&&this.isMetric(Aa.items[Ae.idx]))||(this.isMetric(Ae.item)&&(this.isAttrCategory(Aa.items[Ae.idx])||this.isMetricName(Aa.items[Ae.idx])));if(Aa.id===q&&Aa.items.length&&Af){Ab=[];Aa.items.forEach(function(Ai,Ah){Ab.push({idx:Ah,edge:Ae.edge});},this);return Ab;}if(!Ab){return this._super(Aa,Ae);}return Ab;},clearAllDropZones:function(AX){var AW=x.all[this.hostId];AW.updateSubtype();this._super(AX);}});mstrmojo.vi.models.CombineDropZonesModel.EnumDropZones={HORIZONTAL:R,VERTICAL:f};}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.InteractiveUnitList","mstrmojo.vi.ui._IsDropTarget","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus.EditorConfig","mstrmojo.vi.models.CombineDropZonesModel","mstrmojo.vi.models.DropZonesModel","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.dom","mstrmojo.hash","mstrmojo.css","mstrmojo.array","mstrmojo.gm.GMEnums","mstrmojo.boxmodel","mstrmojo.tooltip","mstrmojo.vi.viz.DropZoneHelper");var N=mstrmojo.dom,C=mstrmojo.css,P=mstrmojo.hash,q=mstrmojo.array,W=mstrmojo.boxmodel,s=mstrmojo.vi.viz.EnumDSSDropZones,AM=mstrmojo.tooltip,U=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION,AH=U.ABOVE,AG=U.ON,O=U.BELOW,AI=mstrmojo.vi.models.EnumDragSources,AL="is-mh",c="icon",A="zone",H="form",S=mstrmojo.vi.viz.EnumDSSDropZones,k=mstrmojo.vi.models.CombineDropZonesModel.EnumDropZones,M=k.HORIZONTAL,Y=k.VERTICAL,z=S.XAxis,Z=S.YAxis,j=S.ColorBy,AB="mstrmojo-VIVizEditor-Menu",K=mstrmojo.gm.DualAxisSubAxisBit,X=K.SECONDARY,g=mstrmojo.vi.viz.DropZoneHelper.isMetricNames,Q=mstrmojo._HasTooltip.TOOLTIP_OPEN_DELAY;var R={};R[AH]="Top";R[AG]="";R[O]="Bottom";var p='<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}"><div class="outer-wrap"><div unselectable="on" class="inner-wrap"><span unselectable="on" class="txt">{@en@n}</span><div class="'+c+'"></div><div class="'+A+'"></div></div></div></{@tag}>';var l=[];function w(AP){var AO=Array.prototype.slice.apply(this.itemsContainerNode.childNodes),AN=function(AR){var AQ=AR.idx===undefined?AR:AO[AR.idx];P.keyarray(R).forEach(function(AS){C.removeClass(AQ,"dragIn"+R[AS]);});};q.forEach(AO,AN);l=[];AN(AP);}function u(AQ,AT,AO){var AS=AQ.y-2,AN=AQ.h*this.zonesModel.getTargetEdgePortion(AO),AP=N.getMousePosition(AT).y,AR=AG;if((AP>=AS)&&(AP<AS+AN)){AR=AH;}else{if(AP>=AS+AQ.h-AN){AR=O;}}return AR;}function h(AP,AN){if(!g(AP)){var AO={zone:this.zonesSource,item:AP};if(this.zonesModel.hasReplaceCandidates(AO)){var AQ=this.zonesModel.getReplaceSubMenu(AO,{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11703,"Replace with:"),cssClass:"mstrmojo-menu-replaceLabel"});AQ.position=AN;AQ.isHostedWithin=false;AQ.hostId=this.id;this.openPopup(AQ.newInstance());}}}function AF(AQ,AN){var AP=this.zonesSource.id;if(AP===s.Latitude||AP===s.Longitude){var AO={zone:this.zonesSource,item:AQ};if(this.zonesModel.getSelectGeoFormMenu){var AR=this.zonesModel.getSelectGeoFormMenu(AO);if(AR){AR.position=AN;AR.isHostedWithin=false;AR.hostId=this.id;this.openPopup(AR.newInstance());}}}}function AJ(){if(this.panelId==undefined){return ;}var AN=mstrmojo.all[this.panelId];if(!!AN){AN.set&&AN.set("activeZoneId",this.id);}}function G(){var AN=mstrmojo.all[this.panelId]&&mstrmojo.all[this.panelId].activeZoneId;return !AN||(AN===this.id);}function AD(AP,AN,AO){var AR=new mstrmojo.ui.menus.MenuConfig({menuCssClass:AB,supportsScroll:true,alignWithAnchor:true,isHostedWithin:false,maxHeight:N.getMaxScrollHeight()}),AQ=this.getLabelNode(AP);AO.call(this,AR,AQ);if(AR.hasMenuItems()){AR.position=AN;AR.isHostedWithin=false;AR.hostId=this.id;this.openPopup(AR.newInstance());}}function V(Ab,AY,AV,AS){if(!this.visible&&!AS){return ;}var AU=this.content,AR=this.contentNode,Ah=this.domNode,Ai=Ah.style;if(AR&&AU){Ai.left=0+"px";AR.innerHTML=AU;}mstrmojo.Tooltip.prototype.updatePosition.call(this,AS);var Ac=Ah.className,AX=(Ac&&Ac.split(" "))||[],Aa=q.indexOf(AX,"offset")!==-1;if(Aa){var AQ=this.refNode,AP=AQ?W.offset(AQ,document.body):{left:N.getHorizontalScroll()},Ad=this.containerNode,Ag=Ad.offsetWidth,AN=this.posType,AW=AN===AM.POS_BOTTOMRIGHT||AN===AM.POS_TOPRIGHT,AT=AN===AM.POS_BOTTOMLEFT||AN===AM.POS_BOTTOMRIGHT||AN===AM.POS_BOTTOMCENTER,AO=parseInt(this.left,10)+AP.left-(AW?Ag:((AN.indexOf("C")>-1)?Math.floor(Ag/2):0)),AZ,Af=N.windowDim(),Ae=N.getHorizontalScroll()+Af.w;if(AO!==null&&!AW&&!AT&&AO>Ae-Ag){AZ=parseInt(Ab.x-6,10)+AP.left-Ag;if(AZ>0){this.posType=AT?AM.POS_BOTTOMRIGHT:AM.POS_TOPRIGHT;this.left=Ab.x-6;this.cssClass=AV+" vi-tooltip-D";}else{this.posType=AM.POS_BOTTOMLEFT;this.left=AY.x;this.top=AY.y-6;this.cssClass=AV+" vi-tooltip-V";}}}}mstrmojo.vi.ui.VisualizationEditorUnitList=mstrmojo.declare(mstrmojo.vi.ui.InteractiveUnitList,[mstrmojo.vi.ui._IsDropTarget],{scriptClass:"mstrmojo.vi.ui.VisualizationEditorUnitList",zonesModel:null,zonesSource:null,multiSelect:true,useListModKeys:true,useRichTooltip:true,tooltipOpenDelay:Q,hasTooltipContent:function(AN,AO){return true;},getItemTooltip:function(AR,AU,AT){var AN=N.position(AT),AO=N.position(AU),AS=N.position(this.getLabelNode(AU));if(AT===this.getIconNode(AU)&&!g(AR)){return{areaId:AR._renderIdx+"icon",cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:AM.POS_BOTTOMLEFT,content:mstrmojo.desc(11687,"Click to replace"),top:AN.y-8,left:AN.x-4};}else{if(AT===this.getZoneNode(AU)){if(AR.geoWarning){return{areaId:AR._renderIdx+"zone",cssClass:"vi-regular vi-tooltip-A",contentNodeCssClass:"regular-unitlist-tooltips",posType:AM.POS_TOPLEFT,content:mstrmojo.desc(14113,"Select an attribute form as geographic role"),top:AN.y+28,left:AN.x-4};}else{if(AU.className.indexOf("icz12")>0){var AQ=this.zonesModel.getHost(true),AP=AQ&&AQ.getTtpContent4GeoItem&&AQ.getTtpContent4GeoItem(AR._renderIdx);return{areaId:AR._renderIdx+"zone",cssClass:"vi-warning vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:AM.POS_TOPLEFT,content:AP||"",enableHover:true,top:AN.y-6,left:AN.x+AN.w+6,updatePosition:function(AV){return V.call(this,AO,AS,"vi-warning",AV);}};}}}}return P.copy({cssClass:"vi-regular vi-tooltip-C",posType:AM.POS_TOPLEFT,top:AO.y-2,left:AO.x+AO.w+6,keepArrowXPos:true,updatePosition:function(AV){return V.call(this,AO,AS,"vi-regular",AV);}},this._super(AR,AU,AT));},doItemSelect:function(AP,AO){var AN=AO.hWin,AQ=AO.e;if(G.call(this)||(!N.shiftKey(AN,AQ)&&!N.isMetaKey(AN,AQ))){AJ.call(this);this._super(AP,AO);}},isDragValid:function d(AN){var AO=AN.src.e;return !(!G.call(this)&&(AO.ctrlKey||AO.shiftKey||AO.metaKey))||this._super(AN)||false;},ondragstart:function AA(AN){this.isIgnoreTooltipCloseDelay=true;this.hideTooltip();this.selectDragNode(AN);this._super(AN);},onItemContextMenu:function b(AW,AV){var AS=AV.e,AO=this.getItemNodeFromTarget(AV.getTarget()),AQ=AV.hWin,AP=this.getSelectedItems().some(function(AX){return AX.itemNode===AO;});if(AW&&!AP){this.doItemSelect(AW,AV);}var AT=AV.getTarget(),AU=this.getSelectedItems();if(AU.length){this.closePopup();var AR=AU&&AU.length>1,AN=AR?"showMultiSelectionMenu":"showItemMenu";this[AN](AR?AU:AW,this.getItemNodeFromTarget(AT),N.getMousePosition(AS,AQ));return true;}},showItemMenu:function I(AP,AO,AN){AD.call(this,AO,AN,function(AQ,AR){this.zonesModel.getUnitMenuItems(AQ,this.zonesSource,AP,AR);});},showMultiSelectionMenu:function e(AO,AP,AN){AD.call(this,AP,AN,function(AQ){this.zonesModel.getMultiUnitsMenuItems(AQ,this.zonesSource,AO,null);});},deleteItem:function F(AN){this.zonesModel.deleteItem(this.zonesSource,AN._renderIdx);},deleteItems:function E(AN){this.zonesModel.deleteItems(this.zonesSource,AN);},getItemProps:function r(AP,AN){var AO=this._super(AP,AN);AO.n=AO.n||"&nbsp; ";if(AP.t===4&&g(AP)){AO.addCls(AL);AO.n=mstrmojo.desc(11808,"Metric Names");}var AQ=AP.zone;if((!this.zonesModel||this.zonesModel.destroyed)||this.zonesModel.shouldMetricNameShowIcon(AP,AP.zone)){if(AQ!==undefined){AQ="icz"+AQ;if(AP.ax===X){AQ+="s";}AO.addCls(AQ);}}if(AP.hidden){AO.addCls("hidden");}if(AP.attn&&AP.fnm){AO.attn=AP.attn;AO.fnm=AP.fnm;}if(AP.geoWarning){AO.addCls(AP.geoWarning);}return AO;},getItemMarkup:function J(AO){var AN=p.replace("{@midTruncateCssClass}",this.midTruncateCssClass);if(AO&&AO.attn&&AO.fnm){AN.replace("{@en@n}",'{@en@attn}@<span unselectable="on" class="'+H+'">{@en@fnm}</span>');}return AN;},getDragData:function t(AN){this.selectDragNode(AN);var AP=this._super(AN),AO=this;AP.itemIdx=AN.src.node.getAttribute("idx");AP.item=this.items[AP.itemIdx];if(AP.items===undefined){AP.items=[];}if(!!AP.item&&q.find(AP.items,"did",AP.item.did)===-1){AP.items.push(AP.item);}AP.src=AI.VIZ_EDITOR;AP.srcZoneId=this.zonesSource&&this.zonesSource.id;AP.onRemove=function(AQ){if(AQ.length>1){AO.deleteItems(AQ);}else{AO.deleteItem(AQ);}};AP.allowDropOnTarget=function(AS,AR){var AQ=true;if(this.allowDropOnTarget){AQ&=this.allowDropOnTarget(AR,AS);}return AQ;}.bind(AO.zonesModel,AP);return AP;},createAvatar:function f(AP,AO){var AN=this._super(AP,AO);Array.prototype.slice.call((AN&&AN.childNodes)||[]).forEach(function(AQ){C.removeClass(AQ,mstrmojo.vi.ui.InteractiveUnitList.CLS_HAS_X);C.addClass(AQ,mstrApp.rootCtrl.view.themeClassName);},this);return AN;},getIconNode:function AK(AO){var AN=AO.firstElementChild.firstElementChild.childNodes;return AN&&AN[1];},getZoneNode:function L(AO){var AN=AO.firstElementChild.firstElementChild.childNodes;return AN&&AN[2];},ondragover:function o(Az){var Ac=this,AN=Az.tgt,AX=Ac.getItemNodeFromTarget(AN.node)||AN.node,Aw=parseInt(AX.getAttribute("idx"),10),Ag=Az.tgtData,Ab=Ag&&Ag.node,Ap=(AN.widget||{}).items,AO=Ap&&Ap[0];if(!Ag||Ab!==AX){Ag=Az.tgtData={item:Ac.zonesSource.items[Aw],node:AX,pos:N.position(AX,true)};if(Ab){w.call(Ac,Ab);}}w.call(Ac,AX);var Ay=this.getTargetEdgeAndIndex(Ag.pos,AN.e,Az,AX),AS=Ay&&Ay.edge,Ak=AS===AH,Ai=AS===AG,AR=AS===O,Ar=this.getContextDragData(Az),Al=this.zonesModel,AZ=this.zonesSource,AW=AZ.id,Au=Al.getZoneSummary(AW),AT=AW===j,AQ=AW===M,Ax=AW===Y,Ah=Ay&&P.copy(Ay,Al.getAllowDropInfo(AZ,Ar.items,Ay.idx,Ay.edge,Az)),Ad=false,Ae=Ai&&Ah.removeReplaced,Am=Au.attributeCount+(Au.hasMetricName?1:0),At=false,Aa=Al.isAttrCategory(AO),AY=Al.isMetric(AO),Ao=Al.isMetricName(AO);if(Ah&&Ah.allowedItems.length){var AV=this.itemsContainerNode,Aq=Array.prototype.slice.apply(AV.childNodes);if((AQ||Ax)&&AY&&!Ag.item&&Al.isAttrCategory(Ah.item)&&Ap.length===1&&Az.last.y<=Ag.pos.y){At=true;}if(!!mstrApp.isWSStyling){this.parent.addBorder();}if(!Aq.length||Aq.every(function(A1){return(A1.className||"").indexOf("hidden")>-1;})){C.addClass(AV,"dragIn");this.raiseHLToggle(true);}else{var An=Al.getHighlightTargets(AZ,Ah);q.forEach(An,function(A8){var A1=Aq[A8.idx],A3=AZ.items[A8.idx],BD=Ar.item,BC=Al.differInType(BD,A3),A2=Al.isMetricName(A3),BE=Al.isMetric(A3),A4=Al.isAttrCategory(A3),BB=BC&&BE,A6=BE&&A8.idx>Am,A5=Aw===A8.idx;l.push(A3);if(AT&&(BC||BE||A2)){var A7=Al.isAttrCategory(BD);if(A2&&A7&&(Ak||AR)){C.addClass(A1,"dragInTop");return false;}else{C.addClass(A1,"dragIn");}}else{if((Ax||AQ)&&(BB||A2)){if(At){C.addClass(A1,"dragInTop");}else{if(Al.isMetric(BD)){if(A2){C.addClass(A1,"dragInBottom");}}else{if(A2&&AR){C.addClass(A1,"dragInTop");return false;}else{if(!A6){Ad=(!(Ak&&A5)||Ae)&&!A2;if(!Ad){var A9=null,BA=false;q.forEach(AZ.items,function(BF){if(Al.isAttrCategory(BF)){A9=BF;}else{if(!!A9){C.addClass(Aq[A9.idx],"dragInBottom");BA=true;return false;}else{if(Al.isMetricName(BF)){C.addClass(Aq[BF._renderIdx],"dragInTop");BA=true;return false;}else{return false;}}}});if(!A9&&!BA){C.addClass(A1,"dragIn"+R[A8.edge]);}return false;}else{C.addClass(A1,"dragIn");}}else{if(Ad){C.addClass(A1,"dragIn");}}}}}}else{if(Ax||AQ){if(A4&&BC){C.addClass(A1,Ai?"dragIn":"dragIn"+R[O]);}else{C.addClass(A1,"dragIn"+R[A8.edge]);}}else{C.addClass(A1,"dragIn"+R[A8.edge]);}}}});this.raiseHLToggle(true);}if(Ar.setAvatarClass){var Af=Ar.src,AP="";if(Af===AI.DATASETS||Af===AI.ALL_OBJECT_LIST){AP=Ai?"replace":"add";q.forEach(Ap,function(A1){if(A1.zone===j){var A2=0,A3=0;q.forEach(Ar.items,function(A4){if(Al.isMetric(A4)){A2++;}else{if(Al.isAttrCategory(A4)){A3++;}}});if(!(A2&&A3)&&(Al.differInType(A1,Ar.item)||Al.isMetric(Ar.item))){AP="replace";}}if((A1.zone===z||A1.zone===Z)&&Al.differInType(A1,Ar.item)){if(!Ai&&Al.isMetric(Ar.item)){AP="add";}else{AP="replace";}}});if(AQ||Ax){if(At){AP="add";}else{if(AO){var As,Aj,AU=Al.isAttrCategory(Ar.item);if(Aa&&AU){var A0=true;AP=Ai?"replace":"add";for(As=0;As<l.length;As++){Aj=l[As];if(!Aj&&!Aj.hasOwnProperty("idx")){var Av=parseInt(Aj.getAttribute("idx"));Aj=AZ.items[Av];}if(Al.isMetric(Aj)){if(A0){AP=Ak?"add":"replace";}else{AP="replace";}A0=false;}}}else{if((AY||Ao)&&AU){AP=Ad?"replace":"add";}}}}}}else{if(Af===AI.VIZ_EDITOR||Af===AI.VIZ){AP=(Ak||AR||AN.node===AV)?"move":(Ai?"replace":"");}}Ar.setAvatarClass(AP);}}else{if(Ar.setInvalidAvatarClass){Ar.setInvalidAvatarClass();}}},getDropAvatarIcon:function B(AP){var AQ=AP.getCtxtDragData(),AN=AQ.src,AO=this.zonesSource.getDropIconCls(AQ);if(AN===AI.DATASETS||AN===AI.ALL_OBJECT_LIST){AO="add";}return AO;},ondrop:function n(AO){this.ondragover(AO);var AV=AO.tgt,AS=AO.src&&AO.src.data,AP=AS&&AS.src,AN=this.getTargetEdgeAndIndex(AO.tgtData.pos,AV.e,AO,this.getItemNodeFromTarget(AV.node)||AV.node),AU=this.zonesModel,AW=this.zonesSource,AX=AN&&P.copy(AN,AU.getAllowDropInfo(AW,AO.getCtxtDragData().items,AN.idx,AN.edge,AO));if(AX&&AX.allowedItems.length&&AP!==AI.VIZ_LAYER){AU.getHost().model.addEditNodeForDatasetAction(AO,AU.getHost().k);var AQ=function(){AU.unitsDropped(AW,AO,AX);};if(AP===AI.ALL_OBJECT_LIST){var AT=AO.src.widget,AR=AT&&AT.dataProvider;if(AR){AR.loadObjects(AX.allowedItems,{success:AQ},true);}}else{AQ();}}this._super(AO);},allowDrop:function D(AO){var AP=AO.getCtxtDragData(),AN=AP.src;if(AN===AI.DATASETS||AN===AI.VIZ_EDITOR||AN===AI.ALL_OBJECT_LIST||AN===AI.VIZ){return this.zonesModel.isZoneDropAllowed(this.zonesSource,AP);}return false;},onclick:function x(AN){var AP=AN.target||N.eventTarget(AN.hWin,AN.e),AO=this.getItemFromTarget(AP);if(AO!==undefined){switch(AP.className){case c:N.preventDefault(window,AN.e);AP=AN.getTarget();AO=this.getItemFromTarget(AP);if(AO){AN.cancel();this.closePopup();h.call(this,AO,N.getMousePosition(AN.e,AN.hWin));}break;case A:case H:N.preventDefault(window,AN.e);AP=AN.getTarget();AO=this.getItemFromTarget(AP);if(AO&&(AO.geoWarning||(AO.attn&&AO.fnm))){AN.cancel();this.closePopup();AF.call(this,AO,N.getMousePosition(AN.e,AN.hWin));break;}default:this._super(AN);}}},cleanUpAfterTarget:function y(AN){var AO=AN.tgtData;if(AO){w.call(this,AO.node);if(!!mstrApp.isWSStyling&&this.parent.clearBorder){this.parent.clearBorder();}this.raiseHLToggle(false);}this._super(AN);},clearBorderClasses:w,raiseHLToggle:function AC(AO){var AN;try{this.parent.parent.parent.model.raiseEvent(P.copy({name:"viVizEditorDrag",isIn:AO,id:this.parent.parent.parent.viPanelType},AN));}catch(AP){}},getTargetEdgeAndIndex:function AE(AO,AR,AN,AS){if(N.contains(this.itemsContainerNode,AS,true,this.domNode)){var AU=AN.tgtData.item,AV=(this.items||[]).length-1,AP=u.call(this,AO,AR,AN);if(AU){AV=AU._renderIdx;}else{var AQ=N.getMousePosition(AR).y,AT=AQ>AO.y;if(AT){AP=O;}else{AV=0;AP=AH;}}return{item:AN.getCtxtDragData().item,edge:AP,idx:Math.max(AV,0)};}return null;},twoClicksItem:function a(AP,AN){var AQ=this.getLabelNode(this.getItemNodeFromTarget(AN.getTarget())),AR=new mstrmojo.ui.menus.MenuConfig({menuCssClass:AB});this.zonesModel.getUnitMenuItems(AR,this.zonesSource,AP,AQ);var AO=AR.menus;if(q.some(AO,function(AS){return AS.n===mstrmojo.desc(1388,"Rename");})){this.zonesModel.renameItem(AQ,AP);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","TrendLineObject","Rect2D","TripleId","TrendLineObject","ChartContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumValueAxis","EnumTrendLineIndex","EnumAnchorPoint","EnumCollectionType","EnumGraphMajorType","EnumFontRotation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var a=mstrmojo.chart,W=a.enums,d=W.EnumCollectionType,C=W.EnumGraphMajorType,Y=W.EnumValueAxis,J=W.EnumAnchorPoint,e=a.gNullTripleId,B=a.gNullObjectId,R=mstrmojo.chart.model,f=R.enums,I=f.EnumDSSGraphType,K=f.EnumDSSGraphMarkerShape,L=f.EnumDSSGraphProperty,b=f.EnumDSSGraphDataTextPosition,M=f.EnumDSSGraphObject;mstrmojo.chart.Plot=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Plot",mDatasetPtr:null,mLegendPtr:null,mSeriesId:null,mDataArea:null,mTrendLines:null,mPostTrendLineObjects:null,mHasSizeBy:false,mHasColorBy:false,mPartialRendering:false,mClippedElementSize:null,shownDataLabels:[],shownRefLabels:[],dataLabelManager:null,axisOriginLabels:[],DPCount:0,seriesDPCount:[],init:function X(j){this._super(j);this.mSeriesId=[];this.mTrendLines=[[],[]];this.mPostTrendLineObjects=[];var k=this.mChartContextPtr,h=k.GetGraphMatrixContext();this.mHasSizeBy=h.mHasSizeBy;this.mHasColorBy=h.mHasColorBy;this.mPartialRendering=k.mPartialRendering;this.mClippedElementSize={};this.shownDataLabels=[];this.shownRefLabels=[];this.dataLabelManager=null;this.axisOriginLabels=[];if(j.Area){this.mDataArea=new a.Rect2D({Rect2D:j.Area});}this.DPCount=0;this.seriesDPCount=[];},Draw:function U(h){var j=false;if(h&&h.Skip){h.Skip--;j=true;}this._super();if(!j){this.DrawTrendLinesAndEquationsInArea(this.mDataArea,false);this.DrawTrendLinesAndEquationsInArea(this.mDataArea,true);this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function c(){var h=this.mDataArea;this.DrawTrendLinesAndEquationsInArea(h,false);this.DrawTrendLinesAndEquationsInArea(h,true);},OnRectangleSelection:function H(k,j,h){h=h||0;return j;},SetDataArea:function F(h){if(this.mDataArea===null){this.mDataArea=new a.Rect2D({Rect2D:h});}else{this.mDataArea.ResetRect(h);}},MoveLabel:function Z(p,s,x,k,h,o){var u,n,r,t,l,w,j,q;if(p===null){return ;}u=p.GetBoundingRect();n=u.width/2;r=u.height/2;t=s;l=x;if(k){w=t;t=l;l=w;}q=t;if(o===b.DssGraphDTPositionOutMin||o===b.DssGraphDTPositionInMin){q=l;}j=k?-1:1;switch(o){case b.DssGraphDTPositionCenter:q=t.MiddleTo(l);break;case b.DssGraphDTPositionInMin:case b.DssGraphDTPositionOutMax:if(h){q.y-=r*j;}else{q.x+=n*j;}break;case b.DssGraphDTPositionOutMin:case b.DssGraphDTPositionInMax:if(h){q.y+=r*j;}else{q.x-=n*j;}break;default:break;}p.MoveTo(q.x,q.y,J.CENTER);},AddLegendMarkerToCollection:function G(j,t,l,p,w,s,q){var k=this.mChartContextPtr,u,n,o,h,r;if(this.mLegendPtr===null||t===null){return ;}if(k.mIsGraphMatrix){return ;}l=l||false;w=w||K.DssGraphMarkerShapeRectangle;q=q||false;if(p===undefined){p=true;}if(s===undefined){s=true;}h=k.mGraphType;u=new a.TripleId({ObjectId:M.DssGraphLegendMarker,SeriesId:j});n=this.mLegendPtr.GetGraphObject(u);if(n){if(l){o=n;t.AddGraphObject(n,false);if(s&&h!==I.DssGraphTypePareto_Percent){u.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(k.GetFormatLine(u,d.CT_LINE),j,q);}u.mObjectId=M.DssGraphRiser;o.SetFormatLine(k.GetFormatLine(u,d.CT_NO_COLLECTION));o.SetFormatFill(k.GetFormatFill(u,d.CT_DEPTH_LINE_OR_LINE_MARKER));o.mIsShown=p;if(p){o.SetMarkerShape(w);}}else{r=k.GetGraphMajorType();t.AddGraphObject(n);if(r===C.GMT_BUBBLE){if(s){u.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(k.GetFormatLine(u,d.CT_LINE),j);}if(p){o=n;o.SetMarkerShape(w);}}if(h===I.DssGraphTypePareto_Percent||r===C.GMT_GAUGE){if(p){o=n;o.SetMarkerShape(w);}}if(r===C.GMT_STOCK){if(s){u.mObjectId=M.DssGraphRiser;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(k.GetFormatLine(u,d.CT_LINE),j,q);}if(p){o=n;o.SetMarkerShape(w);}}}}},CreateTrendLine:function P(s,r,u,k,n,l,h,p,q,j,o,t){},AdjustTrendLineEquation:function N(j,h){},DrawTrendLinesAndEquationsInArea:function V(h,j){var o=this.mChartContextPtr,l=j?this.mTrendLines[1]:this.mTrendLines[0],k;if(l.length===0){return ;}o.saveState();o.DrawRectangle(h,true);o.Clip();for(k=0;k<l.length;++k){l[k].Draw();}o.RestoreState();for(k=0;k<l.length;++k){var n=l[k].mTextPtr;if(n!==null){n.Draw();}}},DrawPostTrendLineObjects:function g(){var k=this.mPostTrendLineObjects,h=k.length,j;for(j=0;j<h;++j){k[j].Draw();}},LoadTrendLineProperties:function D(k,j){var o=this.mChartContextPtr;if(o.mIsGraphMatrix||!!j){return ;}if(o.mIsGraphMatrix){var h=this.mDatasetPtr.GetTrendLinePropertiesBySeries(k);if(h){j.mRegressionType=h.RegressionType||j.mRegressionType;if(h.Order!==null&&h.Order!==undefined){j.mOrder=h.Order;}if(h.Period!==null&&h.Period!==undefined){j.mPeriod=h.Period;}j.mShowCoefficients=h.ShowCoefficients||j.mShowCoefficients;j.mShowEquation=h.ShowEquation||j.mShowEquation;j.mUserSeriesGraphColor=h.UserSeriesGraphColor||j.mUserSeriesGraphColor;}}else{var l,n=new a.TripleId({ObjectId:M.DssGraphRiser,SeriesId:k});l=o.GetProperty(L.DssGraphSDRegressionType,n);if(l){j.mRegressionType=l;}l=o.GetProperty(L.DssGraphSDPolyFactor,n);if(l){j.mOrder=l;}l=o.GetProperty(L.DssGraphSDMOVAFactor,n);if(l){j.mPeriod=l;}l=o.GetProperty(L.DssGraphShowSDLinrCorr,n);if(l){j.mShowCoefficients=l;}l=o.GetProperty(L.DssGraphShowSDLinrFormula,n);if(l){j.mShowEquation=l;}n.mObjectId=B;l=o.GetProperty(L.DssGraphCurveColorAsSeries,n);if(l){j.mUserSeriesGraphColor=l;}}},LoadValueAxisInfo:function S(l,h){var p=this.mChartContextPtr,k=this.mSeriesId,j,o,n;if(h){if(p.mIsGraphMatrix){n=this.mDatasetPtr.GetValueAxisBySeries(k[l]);}else{j=p.GetProperty(L.DssGraph2DSplitYAutomatic,e);if(j===null||j===undefined){n=(l%2===0)?Y.VA_Y1:Y.VA_Y2;}else{o=new a.TripleId({ObjectId:L.DssGraphRiser,SeriesId:k[l]});j=p.GetProperty(L.DssGraph2DSDSplitY,o);if(j){n=j?Y.VA_Y2:Y.VA_Y1;}}}}else{n=Y.VA_Y1;}return n;},GetDataset:function Q(){return this.mDatasetPtr;},SetDataset:function O(h){this.mDatasetPtr=h;},AddSeries:function E(h){this.mSeriesId.push(h);},GetMaxElementOffsetClippedByBoundary:function A(j,k){var h={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},l=this.mChartContextPtr;if(l.IsBarChart()||l.mGraphType===I.DssGraphTypeGridChart){return h;}if(l.IsLineChart()||l.IsAreaChart()){return h;}return h;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","TripleId","Plot","GridMap","LabelInfo","TextObject","StraightLineObject","PolyLineObject","NumberObject","GraphCollectionObject","MarkerObject","DataLabelManager","GMDataLabelInfo","ChartConstants","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumCollectionType","EnumAnchorPoint","EnumImageUsage","EnumFontRotation","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphDataTextPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.VisUtility");var Ar=mstrmojo.chart;var As=Ar.gModuleMain,Am=Ar.ChartConstants,AR=mstrmojo.VisUtility,R=Ar.enums,AO=R.EnumCollectionType,An=R.EnumGraphMajorType,A4=R.EnumAnchorPoint,M=R.EnumFontRotation,Al=R.EnumGraphMatrixMarkerTypeInChart,e=R.EnumGraphMatrixElementSizeMode,AQ=R.EnumImageUsage,t=R.EnumGraphMatrixPiePlotType,o=Ar.common,AF=Ar.gNullTripleId,Au=Ar.gNullGroupId,Aj=mstrmojo.chart.model,AV=Aj.enums,A7=AV.EnumDSSGraphProperty,Q=AV.EnumDSSGraphRegressionType,Ai=AV.EnumDSSGraphDataTextPosition,Ag=AV.EnumDSSGraphDataTextShowType,A3=AV.EnumDSSGraphDataTextPosition,A8=AV.EnumDSSGraphObject,Aw=AV.EnumDSSExtraGraphProperty,d=AV.EnumShapeType,BB=AV.EnumDSSGraphMarkerShape;var F=-1,BA=0.7,AL=2,J=3,AD=1,AB=2,AA=3,y=4,x=5,w=6,c=1,A6=1,O=2,A5=3,L=4;var Ah=new Ar.Point2D();function l(BI,BH){var BJ;if(BI.cannotFitVertically===true&&BH.cannotFitVertically===false){return 1;}if(BI.cannotFitVertically===false&&BH.cannotFitVertically===true){return -1;}if(BI.cannotFitHorizontally===true&&BH.cannotFitHorizontally===false){return 1;}if(BI.cannotFitHorizontally===false&&BH.cannotFitHorizontally===true){return -1;}BJ=BI.overlapRefLabelCount-BH.overlapRefLabelCount;if(BJ<0){return -1;}else{if(BJ>0){return 1;}else{BJ=BI.overlapRefLineCount-BH.overlapRefLineCount;if(BJ<0){return -1;}else{if(BJ>0){return 1;}else{BJ=BI.overlapDataLabelCount-BH.overlapDataLabelCount;if(BJ<=0){return -1;}else{return 1;}}}}}}function Ax(){var BH={ConnectDataPoint:false,ShowDataLabel:false,MarkerSize:33,MarkerShape:4,ValueAxisIndex:0,SeriesID:0,IsNullData:[],TrendLineOptions:{mRegressionType:Q.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true}};return BH;}function s(BM){var BJ,BQ=this.labelMatrix.length,BH=this.mDataArea.width,BP=this.mDataArea.height,BN,BI=this.mChartContextPtr,BL=0.25;if(BI.mIsGraphMatrix){var BK=BI.GetGraphMatrixContext(),BO=BK.mConstants.FixedTickerSize;if(BK.mMarkerShape===BB.DssGraphMarkerShapeGMTick){BP=BO;BH=this.minRadius*BL;}else{BP=BH=this.minRadius*BL;}}else{for(BJ=0;BJ<BQ;++BJ){BN=this.labelMatrix[BJ].Label.GetBoundingRectNoRotation(true);BH=Math.min(BN.width,BH);BP=Math.min(BN.height,BP);if(this.isBubbleChart){BH=Math.min(this.labelMatrix[BJ].HostMarker.width,BH);BP=Math.min(this.labelMatrix[BJ].HostMarker.height,BP);}}if(!this.isBubbleChart){BH=Math.min(this.labelMatrix[0].HostMarker.width,BH);BP=Math.min(this.labelMatrix[0].HostMarker.height,BP);}if(BH>1){BH=Math.round(BH*BL);}if(BP>1){BP=Math.round(BP*BL);}}BM.width=Math.max(BH,1);BM.height=Math.max(BP,1);}function G(BH){return 3;}function AG(BL,BM){var BJ=BM.Size,BH=BM.Position,BI=BJ+BH.y<BL.y||BH.y-BJ>BL.y+BL.height,BK=BJ+BH.x<BL.x||BH.x-BJ>BL.x+BL.width;return !BK&&!BI;}function V(BP){var BI=this.mChartContextPtr,BK,BH=5;if(BI.mPartialRendering===false){return false;}if(BI.mIsGraphMatrix){BK=BI.GetGraphMatrixContext();BH=BK.getPadding(Am.kDataLabel);if(AG.call(this,BI.mRenderingWindow,BP)===false){return true;}}if(this.shapeCanvas===null){var BM=new Ar.Rect2D();s.call(this,BM);this.shapeCanvas=new Ar.GridMap({Rect:this.mDataArea,Unit:BM,MatrixType:1,dataLabelPadding:BH});if(F<0){F=G.call(this,1);}}var BN,BO=this.shapeCanvas;if(BO.veryDense()){return true;}BN=BO.ToInspectedMetric(BP);if(BN.Min>=F-1||((BN.Occupied/BN.Total)>=F-1&&BN.Min>0)){return true;}var BL=BP.BoundingBox,BJ=BP.Position,BQ=BP.Size;switch(BP.Shape){case d._CIRCLE:BO.UpdateMatrixCircle(BJ,BQ,true);break;case d._PIE:BO.UpdateMatrixCircle(BJ,BQ,true);if(BP.ExclusiveRect){BO.UpdateMatrixCircle(BJ,BQ*BA,false);}break;case d._TICKER:case d._RECTANGLE:BO.UpdateMatrixRect(BL,true);break;default:console.alert("Bubble partial rendering: shape not support yet");break;}return false;}function H(BN,BO,BH){var BI=this.mChartContextPtr,BL=BI.GetGraphMatrixContext(),BP,BM,BS;switch(BN){case BB.DssGraphMarkerShapeGMTick:var BQ=Math.round(BL.mConstants.FixedTickerSize*0.5),BR=Math.round(0.5*BH);BP=new Ar.Rect2D();BP.x=BO.x-BR;BP.y=BO.y-BQ;BP.width=2*BR;BP.height=2*BQ;BM=d._TICKER;break;case BB.DssGraphMarkerShape2DPie:case BB.DssGraphMarkerShape2DRingPie:var BJ=0;if(BN===BB.DssGraphMarkerShape2DRingPie){BJ=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new Ar.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BI,Layout:BJ,MaxRadius:this.maxUnitRadius,PlotType:t.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}var BK=this.mPieRenderer.GetPieRadius(0,0,0);BP=BI.transformToRect(BO,BK,true);BM=d._PIE;if(BJ===1){BS=BI.transformToRect(BO,BK*BA,true);}break;case BB.DssGraphMarkerShapeSquare:case BB.DssGraphMarkerShapeRectangle:BP=BI.transformToRect(BO,BH,true);BM=d._RECTANGLE;break;default:BP=BI.transformToRect(BO,BH,true);BM=d._CIRCLE;break;}return{BoundingBox:BP,Shape:BM,ExclusiveRect:BS};}function A1(BK,BI,BJ){var BL,BM,BH;BL=this.mDatasetPtr.GetData(this.VecSeriesInfo[BK].SeriesID,BI,0);if(BL===null){return false;}BH=this.xAxis.GetPositionByValue(BL);if(BH===null){return false;}BJ.x=BH;BL=this.mDatasetPtr.GetData(this.VecSeriesInfo[BK].SeriesID,BI,1);if(BL===null){return false;}BM=(this.VecSeriesInfo[BK].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;BH=BM.GetPositionByValue(BL);if(BH===null){return false;}BJ.y=BH;return true;}function BE(BI,BP){var BS,BQ,BH=this.mChartContextPtr,BM=BH.GetGraphMatrixContext(),BJ=this.mDatasetPtr,BK=this.VecSeriesInfo,BO,BR,BL=d._CIRCLE,BN=BM.mMarkerShape;if(BH.mIsGraphMatrix){if(this.isBubbleChart){BO=BJ.GetSizeByData(this.VecSeriesInfo[BI].SeriesID,BP);if(BO===null){return null;}BR=this.maxUnitRadius;if(BN===BB.DssGraphMarkerShapeGMTick){BL=d._TICKER;BR=BM.GetScaledSize(BO,BR,BL);}else{if(BN===BB.DssGraphMarkerShape2DPie||BN===BB.DssGraphMarkerShape2DRingPie){BL=d._PIE;BR=BM.GetScaledSize(BO,BR,BL);BR=Math.max(BR,BM.mConstants.MinimalSize.Pie);}else{if(BN!==BB.DssGraphMarkerShapeCircle){BL=d._SQUARE;}BR=BM.GetScaledSize(BO,BR,BL);}}BS=BR;this.maxRadius=Math.max(this.maxRadius,BR);this.minRadius=Math.min(this.minRadius,BR);}else{BS=this.maxUnitRadius;this.minRadius=this.maxRadius=this.maxUnitRadius;}}else{if(this.isBubbleChart){BQ=0;BO=BJ.GetProperty(A7.DssGraphMarkerSize,AF);if(BO){BQ=BO;}BO=BJ.GetData(this.VecSeriesInfo[BI].SeriesID,BP,2);if(BO===null){BK[BI].IsNullData[BP]=true;}else{BK[BI].IsNullData[BP]=false;BS=this.zAxis.ValueToBubbleSize(BQ,BO);}}else{BS=BK[BI].MarkerSize;}}if(BS){BS=Math.max(BS,1);BS=Math.floor(BS);}return BS;}function h(BJ,BI,BQ,BK){var BP,BL,BH,BM,BN,BO=null;if(BQ===0){BP=this.xAxis;}else{if(BQ===1){BP=(this.VecSeriesInfo[BJ].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;}else{if(BQ===2){BP=this.zAxis;}}}if(BP===null){return BO;}BL=this.mDatasetPtr.GetData(this.VecSeriesInfo[BJ].SeriesID,BI,BQ);if(BL===null){return BO;}BH=BP.GetNumberFormat();BM=new Ar.TripleId({ObjectId:A8.DssGraphDataText,SeriesId:this.VecSeriesInfo[BJ].SeriesID,GroupId:BI});BN=new Ar.NumberObject({TripleId:BM,GraphObjectManager:this,Number:BL,NumberFormat:BH,GraphCollectionObject:BK,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:BQ});if(BN!==null){BO=BN.mText;}return BO;}function Ak(BM,BH,BI,BL){var BK,BJ;BK=BM.GetBoundingRectNoRotation();BJ=BK;BM.SetRect(BJ);return Math.sqrt((BJ.x-BH.x)*(BJ.x-BH.x)+(BJ.y-BH.y)*(BJ.y-BH.y));}function AK(BM,BQ,BW,BT){var BR=false,BO=false,BP=2,BS,BH=0,BL,BV=0,BK=0,BJ,BU,BI,BN=this.isSmarted?BT:this.labelLocation;switch(BW){case M.FR_90:case M.FR_270:BR=true;break;case M.FR_45:case M.FR_315:BO=true;break;default:break;}if(BO){BP=1.414;}BS=BM.GetBoundingRectNoRotation();if((BN===Ai.DssGraphDTPositionOutMin)||(BN===Ai.DssGraphDTPositionInMin)){BH=BO?BQ.height/2+BQ.width/2:BQ.width;}else{BH=BO?BQ.width/2+BQ.height/2:BQ.height;}BL=BH;switch(BN){case Ai.DssGraphDTPositionCenter:BV=BK=0;break;case Ai.DssGraphDTPositionOutMin:BV=1;BL+=(BR||BO)?BS.Height/BP:BS.Width/2;break;case Ai.DssGraphDTPositionInMin:BV=-1;BL+=(BR||BO)?BS.Height/BP:BS.Width/2;break;case Ai.DssGraphDTPositionInMax:BK=-1;BI=BR?BS.Width:BS.Height;BL+=(BR||BO)?BI/BP:BS.Height/2;break;case Ai.DssGraphDTPositionOutMax:BK=1;BI=BR?BS.Width:BS.Height;BL+=(BR||BO)?BI/BP:BS.Height/2;break;default:break;}BJ=BQ.GetCenter().x+BV*BL;BU=BQ.GetCenter().y+BK*BL;BM.MoveTo(BJ,BU,A4.CENTER);return BH;}function AU(BL,BO,BJ,BI){var BH=BJ.GetCenter(),BN=(BI.y+BI.height-BH.y)<0,BP=(BI.x+BI.width-BH.x)<0,BM=(BI.x-BH.x)*(BI.x+BI.width-BH.y),BK=(BI.y-BH.y)*(BI.y+BI.height-BH.y);if(BK<=0){BL.x=BP?BJ.x:BJ.x+BJ.width;BL.y=BP?Math.round(BJ.y+0.5*BJ.height):Math.round(BJ.y+0.5*BJ.height);BO.y=BH.y;BO.x=BP?BI.x+BI.width:BI.x;}else{BL.x=BN?Math.round(BJ.x+0.5*BJ.width):Math.round(BJ.x+0.5*BJ.width);BL.y=BN?BJ.y:BJ.y+BJ.height;if(BM<=0){BO.x=BH.x;BO.y=BN?BI.y+BI.height:BI.y;}else{if(BP){BO.x=BN?BI.x+BI.width:BI.x+BI.width;BO.y=BN?BI.y+BI.height:BI.y;}else{BO.x=BN?BI.x:BI.x;BO.y=BN?BI.y+BI.height:BI.y;}}}}function BG(BJ,BI,BM,BN,BL){var BK=0,BH=0;switch(BL){case Ai.DssGraphDTPositionOutMin:BK=1;BJ.x=BM.x+BM.width;BJ.y=BM.y+0.5*BM.height;BN-=BM.width/2;break;case Ai.DssGraphDTPositionInMin:BK=-1;BJ.x=BM.x;BJ.y=BM.y+0.5*BM.height;BN-=BM.width/2;break;case Ai.DssGraphDTPositionInMax:BH=-1;BJ.x=BM.x+0.5*BM.width;BJ.y=BM.y;BN-=BM.height/2;break;case Ai.DssGraphDTPositionOutMax:BH=1;BJ.x=BM.x+0.5*BM.width;BJ.y=BM.y;BN-=BM.height/2;break;}BI.x=BJ.x+BK*BN;BI.y=BJ.y+BH*BN;}function Ae(BK,BN,BP,BJ){var BH,BL,BO,BM,BI;if(BK===null){return ;}BH=AK.call(this,BK,BN,BP,this.labelLocation);if(this.dataLabelLine){BL=new Ar.Point2D();BO=new Ar.Point2D();BG.call(this,BL,BO,BN,BH,this.labelLocation);BM=new Ar.TripleId({ObjectId:A8.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3});BI=new Ar.StraightLineObject({TripleId:BM,GraphObjectManager:this,Start:BL,End:BO});this.mGraphObjectList.push(BI);BJ.AddGraphObject(BI);}}function Af(BN,BM,BL){var BI=this.mDatasetPtr,BO=BI.dataLabelStyle,BK="",BJ,BH,BP;switch(BO){case AL:BJ=h.call(this,BN,BM,0,BL);BH=h.call(this,BN,BM,1,BL);BK="("+BJ+", "+BH+")";break;case J:BK=BI.GetTextLabel(this.VecSeriesInfo[BN].SeriesID,BM);break;}BP=new Ar.TextObject({TripleId:new Ar.TripleId({ObjectId:A8.DssGraphDataText,SeriesId:this.VecSeriesInfo[BN].SeriesID,GroupId:BM}),GraphObjectManager:this,GraphCollectionObject:BL});BP.SetText(BK);this.mPostTrendLineObjects.push(BP);return BP;}function Az(BN){var BJ,BK=this.VecSeriesInfo.length,BH=BN.length,BM,BL;if(BH>0){BN.splice(0,BH);}for(BJ=0;BJ<BK;++BJ){var BI=this.VecSeriesInfo[BJ].ShowDataLabel;if(BI){BM=new Ar.TripleId({ObjectId:A8.DssGraphDataText,SeriesId:this.VecSeriesInfo[BJ].SeriesID});BL=new Ar.GraphCollectionObject({TripleId:BM,GraphObjectManager:this,CollectionType:AO.CT_TEXT});BN.push(BL);this.AddToMap(BL);}}}function K(BO){var BK,BN=this.VecSeriesInfo,BM=BN.length,BJ=BO.length,BH,BL;if(BJ>0){BO.splice(0,BJ);}for(BK=0;BK<BM;++BK){var BI=BN[BK].ShowDataLabel;if(BI){BH=new Ar.TripleId({ObjectId:A8.DssGraphDataText,SeriesId:BN[BK].SeriesID});BL=new Ar.GraphCollectionObject({TripleId:BH,GraphObjectManager:this,CollectionType:AO.CT_TEXT});BO.push(BL);this.AddToMap(BL);}}}function z(){if(this.mChartContextPtr.mIsGraphMatrix){return(this.xAxis&&this.xAxis.mOptions.mUseCustomMinMax)||(this.y1Axis&&this.y1Axis.mOptions.mUseCustomMinMax)||(this.y2Axis&&this.y2Axis.mOptions.mUseCustomMinMax);}return false;}function Ac(BI){var BH=this.mDataArea,BJ=z.call(this);if(BJ){if(BI.x<BH.x||BI.x+BI.width>BH.x+BH.width){return false;}if(BI.y<BH.y||BI.y+BI.height>BH.y+BH.height){return false;}}return true;}function Aa(BS,BX){var BQ=this.VecSeriesInfo,BM=BQ.length,BI=this.waitingList,BL,BK,BU=null,BP=0,BW,BV,BO,BT;if(BI&&this.waitingList.length){var BR=this.waitingList,BN=BR.length,BJ;this.hiddenMarkers=this.hiddenMarkers||[];BU=this.hiddenMarkers;for(BL=0;BL<BN;BL++){BJ=BR[BL].Id;BU[BJ.mSeriesId]=BU[BJ.mSeriesId]||[];BU[BJ.mSeriesId][BJ.mGroupId]=1;}}for(BL=0;BL<BM;++BL){BP=0;BW=BQ[BL].SeriesID;BV=BQ[BL].IsNullData.length;for(BK=0;BK<BV;++BK){if(BU&&BU[BW][BK]!==undefined){if(!BQ[BL].IsNullData[BK]){++BP;}continue;}var BH=BQ[BL].ShowDataLabel;if(!BH){this.standAloneMarkers.push(BS[BL][BP++]);continue;}if(!BQ[BL].IsNullData[BK]){BO=new Ar.GMDataLabelInfo();BO.isValid=true;BO.GroupId=BK;BO.SeriesId=BW;BO.HostMarkerBound=BS[BL][BK];BO.HostMarkerPoint=BO.HostMarkerBound.GetCenter();BO.Label=Af.call(this,BL,BK,BX[BL]);if(!Ac.call(this,BO.HostMarkerBound)){BO.isValid=false;continue;}if(BO.Label===null||BO.Label===undefined){BO.isValid=false;continue;}else{}this.mDataLabels.push(BO);BX[BL].AddGraphObject(BO.Label);}}}delete this.hiddenMarkers;}function C(BJ){var BM,BL,BK=BJ.length,BI=0,BH=[];for(BM=0;BM<BK;++BM){if(BJ[BM].length>0){BI=BJ[BM].length;for(BL=0;BL<BI;++BL){BH.push(BJ[BM][BL]);}}}return BH;}function BD(BI){var BH=this.mDataArea;if(BI.x<BH.x||BI.y<BH.y){return true;}return(BI.x+BI.width>BH.x+BH.width||BI.y+BI.height>BH.y+BH.height);}function X(BI,BL,BM,BH){var BK=Math.max(BI.y,BL.y),BJ=BI.y+BL.y-BK;if(BJ>BH.y||BK<BH.y){return false;}BK=Math.max(BI.x,BL.x);BJ=BI.x+BL.x-BK;return !(BJ>Math.max(BM.x,BH.x)||BK<Math.min(BM.x,BH.x));}function AM(BI,BL,BM,BH){var BK=Math.max(BI.x,BL.x),BJ=BI.x+BL.x-BK;if(BJ>BH.x||BK<BH.x){return false;}BK=Math.max(BI.y,BL.y);BJ=BI.y+BL.y-BK;return !(BJ>Math.max(BM.y,BH.y)||BK<Math.min(BM.y,BH.y));}function a(BL,BM,BK){var BI=true,BH=BK.length,BJ;for(BJ=0;BJ<BH;++BJ){BI=(BJ===0)||(BJ===2);if(BI){if(X.call(this,BL,BM,BK[BJ],BK[(BJ+1)%BH])){return true;}}else{if(AM.call(this,BL,BM,BK[BJ],BK[(BJ+1)%BH])){return true;}}}return false;}function g(BU,BT){var BJ=1,BP,BY,BS,BQ,BK,BZ,BL,BW,BN=[],BR,BO,BM,BX,BI,BH,BV;switch(BU.LabelRotation){case M.FR_NORMAL:case M.FR_CUSTOME:case M.FR_90:case M.FR_180:case M.FR_270:case M.FR_HOTEL:break;case M.FR_45:break;case M.FR_315:BJ=-1;break;}BP=BU.Label.GetBoundingRectNoRotation();BY=BP.GetCenter();BS=0.5*BP.width;BQ=0.5*BP.height;BK=Math.sqrt(BS*BS+BQ*BQ);for(BV=0;BV<4;++BV){BL=(BV===0||BV===3)?-1:1;BW=(BV===0||BV===1)?-1:1;BZ=new Ar.Point2D({x:BL*BS,y:BW*BQ});BN.push(BZ);}for(BV=0;BV<4;BV++){BR=(BV===0||BV===3)?180:0;BO=Math.atan(BN[BV].x/BN[BV].y);BM=As.RadianToDegree(BO);BM+=(BR+BJ*45);BX=As.DegreeToRadian(BM);BI=Math.round(BK*Math.cos(BX))+BY.x;BH=Math.round(BK*Math.sin(BX))+BY.y;BZ=new Ar.Point2D({x:BI,y:BH});BT.push(BZ);}}function f(BJ,BM,BN,BL){var BI=BM.length,BH=0,BK=0;BN=BN||false;BL=BL||false;if(!BL){for(BK=0;BK<BI;++BK){if(BJ.HasIntersection(BM[BK])){++BH;}}}else{AR.visPrint("Checking label overlap with tilt targets has not been implemented yet.");}return BH;}function r(BO,BH,BJ){var BM=0,BI=BH.length,BQ=((BO.LabelRotation===M.FR_45)||(BO.LabelRotation===M.FR_315)),BL=[],BK=0,BP,BN;BJ=BJ||false;if(BQ){g.call(this,BO,BL);for(BK=0;BK<BI;++BK){BP=[];BP.push(BH[BK].GetBottomLeft());BP.push(BH[BK].GetBottomRight());BP.push(BH[BK].GetTopRight());BP.push(BH[BK].GetTopLeft());if(!BJ){if(a.call(this,BL[0],BL[1],BP)||a.call(this,BL[1],BL[2],BP)||a.call(this,BL[2],BL[3],BP)||a.call(this,BL[3],BL[0],BP)){++BM;}}else{AR.visPrint("We currently do not support tilt rectangle against tilt targets");}}}else{BN=BO.Label.GetBoundingRect();BM=f.call(this,BN,BH,false,BJ);}return BM;}function B(BN){var BM,BJ,BI=this.mDataArea,BL,BH,BO,BK;BL=this.standAloneMarkers.length;BH=new Ar.Rect2D();for(BJ=0;BJ<BL;++BJ){BH.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.standAloneMarkers[BJ],BI,BH)){BN.UpdateMatrixRect(BH);}}BL=this.labelMatrix.length;for(BM=0;BM<BL;++BM){BH.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.labelMatrix[BM].HostMarker,BI,BH)){BN.UpdateMatrixRect(BH);}if(this.labelMatrix[BM].IsPut){BO=this.labelMatrix[BM].Label.GetBoundingRectNoRotation();if(this.mChartContextPtr.RectangleIntersection(BO,BI,BH)){BN.UpdateMatrixRect(BH,true,this.labelMatrix[BM].LabelRotation);}}}BK=Math.round(0.95*BN.XCount*BN.YCount);return BN.Metric<BK;}function N(BK,BO,BN){var BI=new Ar.Point2D(),BJ=new Ar.Point2D(),BH=new Ar.TripleId({ObjectId:A8.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3}),BM,BL;if(!BK.IsValid){return false;}if(BK.IsPut){if(BK.SuggestedStart===Ai.DssGraphDTPositionPieSmart){if(this.dataLabelLine||(!this.dataLabelLine&&BK.IsMoved(this.labelLocation))){BM=BK.Label.GetBoundingRect();AU.call(this,BI,BJ,BK.HostMarker,BM);}else{return false;}}else{if(this.dataLabelLine||(!this.dataLabelLine&&BK.IsMoved(this.labelLocation))){BG.call(this,BI,BJ,BK.HostMarker,BN,BK.SuggestedStart);}else{return false;}}BL=new Ar.StraightLineObject({TripleId:BH,GraphObjectManager:this,StartPoint:BI,EndPoint:BJ,GraphCollectionObject:BO});this.mGraphObjectList.push(BL);BO.AddGraphObject(BL);return true;}if(this.dataLabelLine){BG.call(this,BI,BJ,BK.HostMarker,BN,BK.SuggestedStart);}else{return false;}BL=new Ar.StraightLineObject({TripleId:BH,GraphObjectManager:this,StartPoint:BI,EndPoint:BJ,GraphCollectionObject:BO});this.mGraphObjectList.push(BL);BO.AddGraphObject(BL);return true;}function b(BK,BL){var BP=this.labelMatrix.length,BN=new Ar.Point2D(),BQ=new Ar.Rect2D(),BI,BO,BH,BM,BJ;for(BM=0;BM<BP;++BM){BJ=this.labelMatrix[BM];if(!BJ.IsPut){BI=BJ.Label.GetBoundingRectNoRotation();BO=BK.IsAccomdatableConsiderRotation(BJ.HostMarker,BI,BN,BJ.LabelRotation);if(BO){BJ.IsPut=true;BJ.SuggestedStart=A3.DssGraphDTPositionPieSmart;BH=Ak.call(this,BJ.Label,BJ.HostMarker,BN,BJ.LabelRotation);BI=BJ.Label.GetBoundingRectNoRotation();N.call(this,BJ,BL,BH);this.AddToMap(BJ.Label);BQ.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(BI,this.mDataArea,BQ)){BK.UpdateMatrixRect(BQ,true,BJ.LabelRotation);}}}}return true;}function At(BM){var BJ,BO,BH,BL,BN,BK,BI=this.VecSeriesInfo.length;BH=this.isBubbleChart?A8.DssGraphRiser:A8.DssGraphDataLine;BL=this.isBubbleChart?AO.CT_GENERAL_SHAPE:AO.CT_LINE;for(BJ=0;BJ<BI;++BJ){BO=this.VecSeriesInfo[BJ];BN=new Ar.TripleId({ObjectId:BH,SeriesId:BO.SeriesID,GroupId:Au});BK=new Ar.GraphCollectionObject({TripleId:BN,GraphObjectManager:this,CollectionType:BL});BM.push(BK);this.AddToMap(BM[BJ]);if(!this.mChartContextPtr.mIsGraphMatrix){this.AddLegendMarkerToCollection(BO.SeriesID,BM[BJ],!this.isBubbleChart,true,BO.MarkerShape,BO.ConnectDataPoint);}}}function BC(BK){var BI=this.labelMatrix.length,BN,BM,BJ,BL,BH;for(BL=0;BL<BI;++BL){BH=this.labelMatrix[BL];BN=BH.Label.mTripleId;BJ=M.FR_NORMAL;BM=this.mChartContextPtr.GetProperty(A7.DssGraphFontRotation,BN);if(BM){BJ=BM;}if(!BH.IsPut){Ae.call(this,BH.Label,BH.HostMarker,BJ,BK);this.AddToMap(BH.Label);}}}function Ab(BM,BK,BH,BI){var BJ,BL;if(this.labelLocation===Ai.DssGraphDTPositionOutMin){BM.SuggestedStart=Ai.DssGraphDTPositionInMin;}BL=AK.call(this,BM.Label,BM.HostMarker,BM.LabelRotation,BM.SuggestedStart);BJ=BM.ToRectangle();if(BD.call(this,BJ)||(r.call(this,BM,BK)>0)||(r.call(this,BM,this.standAloneMarkers)>0)||(r.call(this,BM,BH)>0)){if(BM.SuggestedStart>=Ai.DssGraphDTPositionOutMax){return false;}++BM.SuggestedStart;if(BM.SuggestedStart===this.labelLocation){++BM.SuggestedStart;}if(BM.SuggestedStart>Ai.DssGraphDTPositionOutMax){return false;}return Ab.call(this,BM,BK,BH,BI);}BH.push(BJ);BM.IsPut=true;N.call(this,BM,BI,BL);return true;}function AH(BN,BQ,BI){var BP=this.labelMatrix.length,BL=0,BM,BH,BO,BK,BJ;for(BJ=0;BJ<BP;++BJ){BM=this.labelMatrix[BJ];BH=AK.call(this,BM.Label,BM.HostMarker,BM.LabelRotation,this.labelLocation);BO=BM.ToRectangle();BK=(BD.call(this,BO)||(r.call(this,BM,BN)>0)||(r.call(this,BM,this.standAloneMarkers)>0)||(r.call(this,BM,BQ)>0));if(!BK){BQ.push(BO);BM.IsPut=true;BM.SuggestedStart=this.labelLocation;N.call(this,BM,BI,BH);++BL;this.AddToMap(BM.Label);continue;}if(Ab.call(this,BM,BN,BQ,BI)){++BL;this.AddToMap(BM.Label);}else{BM.SuggestedStart=this.labelLocation;}}return BL;}function u(BN,BS){var BP,BK=this.VecSeriesInfo.length,BM,BJ,BI=0,BR,BQ,BL,BO;for(BJ=0;BJ<BK;++BJ){BP=this.VecSeriesInfo[BJ];BM=0;BR=this.VecSeriesInfo[BJ].SeriesID;BQ=this.VecSeriesInfo[BJ].IsNullData.length;for(BI=0;BI<BQ;++BI){var BH=this.VecSeriesInfo[BJ].ShowDataLabel;if(!BH){this.standAloneMarkers.push(BN[BJ][BM++]);continue;}if(!this.VecSeriesInfo[BJ].IsNullData[BI]){BL=new Ar.LabelInfo();BL.IsValid=true;BL.GroupId=BI;BL.SeriesId=BR;BL.HostMarker=BN[BJ][BM++];BL.Label=Af.call(this,BJ,BI,BS[BJ]);if(BL.Label===null){BL.IsValid=false;continue;}else{}this.labelMatrix.push(BL);BS[BJ].AddGraphObject(BL.Label);}}}}function S(BS,BJ){var BQ,BO=this.VecSeriesInfo.length,BM,BK=0,BI,BN,BT,BV=0,BP,BR,BU,BL;for(BM=0;BM<BO;++BM){BQ=this.VecSeriesInfo[BM];var BH=this.mDatasetPtr.showSeriesDatalabel(BQ.SeriesID);if(BH){BN=new Ar.TripleId({ObjectId:A8.DssGraphDataText,SeriesId:BQ.SeriesID});BI=new Ar.GraphCollectionObject({TripleId:BN,GraphObjectManager:this,CollectionType:AO.CT_TEXT});BT=BS[BM];BV=0;BR=BQ.IsNullData.length;for(BK=0;BK<BR;++BK){if(BQ.IsNullData[BK]){continue;}BU=Af.call(this,BM,BK,BI);BI.AddGraphObject(BU);this.AddToMap(BU);BN=BU.mTripleId;BL=M.FR_NORMAL;BP=this.mChartContextPtr.GetProperty(A7.DssGraphFontRotation,BN);if(BP){BL=BP;}Ae.call(this,BU,BT[BV++],BL,BJ);}if(BI.GetCollectionSize()>0){this.AddToMap(BI);}}}}function A(){var BN=this.mChartContextPtr,BK=this.dataLabelManager,BJ,BH=this.mDataLabels,BI=BH.length,BL=[],BM=new Ar.Rect2D({x:0,y:0,width:BN.mGraphWidth,height:BN.mGraphHeight});if(BK===null||BK===undefined){BK=this.dataLabelManager=new Ar.DataLabelManager({DataArea:BM});BK.ChartContext=BN;}BK.RectangleObjects=BK.RectangleObjects.concat(this.standAloneMarkers);for(BJ=0;BJ<BI;++BJ){BL.push(BH[BJ].HostMarkerBound);}BK.RectangleObjects=BK.RectangleObjects.concat(BL);return BK;}function AY(){var BH=this.mDataLabels,BJ=BH.length,BI;for(BI=0;BI<BJ;++BI){BH[BI].CenterXOffset=BH[BI].HostMarkerBound.width/2;BH[BI].CenterYOffset=BH[BI].HostMarkerBound.height/2;}}function P(){var BX=this.VecSeriesInfo.length,BI,BS,BV,BW,BJ,BN,BM,BL,BR,BY,BT,BU,BO=this.mDatasetPtr,BK=this.mChartContextPtr,BH,BP,BQ;if(this.mTrendLineObjects===null){this.mTrendLineObjects=[];}if(BO.isBare(BK.IsPieChart())){return ;}for(BV=0;BV<BX;++BV){BS=this.VecSeriesInfo[BV];BI=BS.SeriesID;BL=this.mDatasetPtr.GetTrendLineOfSeries(BI);BW=BS.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BM=new Ar.TripleId({ObjectId:A8.DssGraphTrendLine,SeriesId:BI});if(BL){BR=BL.getTrendLineType();if(BR!==Q.DssGraphRegressionNone){BY=BL.getIdentity();BJ=BL.getTrendLineValuesWithForecast();BN=BL.getTrendLineValues();if(E(BN)<=1){continue;}BT=BL.getCoefficients(true);BU=BT.length-1;if(BJ&&BJ.length){BH={mRegressionType:BR,mOrder:BU,mPeriod:0,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeasonal:false};BP=new Ar.TrendLineObject({TripleId:BM,GraphObjectManager:this,GraphCollectionObject:null,TrendLineOptions:BH,XAxis:this.xAxis,YAxis:BW,TrendLineValues:BJ,Coefficients:BT,IsVertical:true,Identity:BY});if(BP!==undefined&&BP!==null){BQ=BP.CreateTrendLine();if(BQ!==undefined&&BQ!==null){this.mTrendLineObjects.push(BQ);}}}}}}}function AE(BK,BR,BN,BH,BJ,BQ,BP,BM,BL,BO){var BI={};BI.rect=new Ar.Rect2D({x:0,y:0,width:BH+2*BL,height:BR+2*BL});switch(BK){case AD:if(BO){BI.xOffset=BQ+BL+BJ;BI.yOffset=BL+BN;BI.rect.x=BQ;BI.rect.y=0;}else{BI.xOffset=BM-BL-BJ;BI.yOffset=BQ-BL-BN;BI.rect.x=BM-2*BL-BH;BI.rect.y=BQ-2*BL-BR;}break;case AB:if(BO){BI.xOffset=BQ-BL-BJ;BI.yOffset=BL+BN;BI.rect.x=BQ-2*BL-BH;BI.rect.y=0;}else{BI.xOffset=BM-BL-BJ;BI.yOffset=BQ+BL+BN;BI.rect.x=BM-2*BL-BH;BI.rect.y=BQ;}break;case AA:if(BO){BI.xOffset=BQ+BL+BJ;BI.yOffset=BP/2;BI.rect.x=BQ;BI.rect.y=BP/2-BL-BN;}else{BI.xOffset=BM/2;BI.yOffset=BQ-BL-BN;BI.rect.x=BM/2-BL-BJ;BI.rect.y=BQ-2*BL-BR;}break;case y:if(BO){BI.xOffset=BQ-BL-BJ;BI.yOffset=BP/2;BI.rect.x=BQ-2*BL-BH;BI.rect.y=BP/2-BL-BN;}else{BI.xOffset=BM/2;BI.yOffset=BQ+BL+BN;BI.rect.x=BM/2-BL-BJ;BI.rect.y=BQ;}break;case x:if(BO){BI.xOffset=BQ+BL+BJ;BI.yOffset=BP-BL-BN;BI.rect.x=BQ;BI.rect.y=BP-2*BL-BR;}else{BI.xOffset=BL+BJ;BI.yOffset=BQ-BL-BN;BI.rect.x=0;BI.rect.y=BQ-2*BL-BR;}break;case w:if(BO){BI.xOffset=BQ-BL-BJ;BI.yOffset=BP-BL-BN;BI.rect.x=BQ-2*BL-BH;BI.rect.y=BP-2*BL-BR;}else{BI.xOffset=BL+BJ;BI.yOffset=BQ+BL+BN;BI.rect.x=0;BI.rect.y=BQ;}break;}return BI;}function Ao(BL,BS,BO,BM,BJ,BH){var BP=BL.rect,BN,BK,BI,BQ,BR;if(BP.y<0||BP.y+BP.height>BS){BL.cannotFitVertically=true;return ;}if(BP.x<0||BP.x+BP.width>BO){BL.cannotFitHorizontally=true;}BN=BJ.length;for(BK=0;BK<BN;++BK){BI=BJ[BK].GetBoundingRect();if(BP.HasIntersection(BI)){++BL.overlapRefLabelCount;}}BN=BH.length;for(BK=0;BK<BN;++BK){BR=BH[BK];if(BR.isVertical){if(BP.x<BR.position&&BP.x+BP.width>BR.position){++BL.overlapRefLineCount;}}else{if(BP.y<BR.position&&BP.y+BP.height>BR.position){++BL.overlapRefLineCount;}}}BN=BM.length;for(BK=0;BK<BN;++BK){BQ=BM[BK];if(BQ.mIsShown){BI=BQ.GetBoundingRect();if(BP.HasIntersection(BI)){++BL.overlapDataLabelCount;BL.overlapDataLabels.push(BM[BK]);}}}}function AI(Bc,BX,BP){var BJ=this.mChartContextPtr,Bb=BJ.GetGraphMatrixContext(),BI=Bb.getPadding(Am.kRefLabel),BO=BP.length,BM,BN,BU,BR,BL,BS,BH,BZ,BY,BV,BK,BQ,BW,BT,Ba;for(BZ=0;BZ<BO;++BZ){BM=BP[BZ];BN=new Ar.TextObject({TripleId:BM.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:BM.identity});if(BN!==null){BN.SetText(BM.labelText);for(BY=0;BY<2;++BY){if(BY===1){BK=BN.mText;BN.SetText(BK[0]+"...");BN.rect.height=0;BN.rect.width=0;}BH=BN.GetBoundingRect();BR=BH.height;BS=BR/2;BU=BH.width;BL=BU/2;BT=[];for(BV=AD;BV<=w;++BV){BQ={};BQ.position=BV;BQ.cannotFitVertically=false;BQ.cannotFitHorizontally=false;BQ.overlapRefLabelCount=0;BQ.overlapRefLineCount=0;BQ.overlapDataLabelCount=0;BQ.overlapDataLabels=[];BW=AE.call(this,BV,BR,BS,BU,BL,BM.position,Bc,BX,BI,BM.isVertical);BQ.xOffset=BW.xOffset;BQ.yOffset=BW.yOffset;BQ.rect=BW.rect;Ao.call(this,BQ,Bc,BX,this.shownDataLabels,this.shownRefLabels,BP);BT.push(BQ);}BT.sort(l);if(BT[0].cannotFitVertically){break;}if(BT[0].cannotFitHorizontally){if(BZ===0){continue;}else{break;}}BN.MoveTo(BT[0].xOffset,BT[0].yOffset,A4.CENTER);BN.mIsShown=true;Ba=BT[0].overlapDataLabelCount;for(BV=0;BV<Ba;++BV){BT[0].overlapDataLabels[BV].mIsShown=false;}this.mPostTrendLineObjects.push(BN);this.shownRefLabels.push(BN);break;}}}}function Ap(){var BT=this.VecSeriesInfo.length,BJ,BW,Be,Ba,Bf,BX,Bc=[],BL,Bd,BU,BK,Bb,Bl,Bj,BQ,BM,Bk,Bg,BI,BO={},Bi,BH,BR=this.mDatasetPtr,BZ=BR.GetSeriesCount()*BR.GetGroupCount(),BN=this.mChartContextPtr,BY=BN.mGraphWidth,Bh=BN.mGraphHeight,BP,BS=[];if(this.mReferenceLineObjects===null){this.mReferenceLineObjects=[];}if(BN.mPartialRendering===false){BZ=this.DPCount;}for(Be=0;Be<BT;++Be){BW=this.VecSeriesInfo[Be];BJ=BW.SeriesID;BU=this.mDatasetPtr.GetReferenceLinesOfSeries(BJ);Bf=BW.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BH={};BH.Condense=Bf.mCondenseLabels;if(!BH.Condense){if(Bf.mNumberFormat.isDefault){var BV=new Ar.ChartAdvFormat();BN.getAxisAutoNumberFormat(BV,Bf.mPrimaryMetrics);Bf.mNumberFormat=BV;}BH.NumberFormat=Bf.mNumberFormat.mCustomFormat;}BP=BU.length;for(Ba=0;Ba<BP;++Ba){BL=new Ar.TripleId({GroupId:Ba,ObjectId:A8.DssGraphReferenceLine,SeriesId:BJ});Bi=new Ar.TripleId({ObjectId:A8.DssGraphRefLineText,SeriesId:BJ,GroupId:Ba});Bc=[];Bd=BU[Ba];if(Bd){Bl=Bd.getIdentity();BX=Bd.getReferenceLineValue();Bj=Bd.getReferenceLineDirection();BK=Bd.getReferenceLineLabel(false,false,BH);Bb=Bd.getLevel();if(BZ===0){continue;}if(BX===null&&BX===undefined){continue;}BQ=(Bj!=="horizontal");if(BQ){Bk=this.xAxis.GetPositionByValue(BX);}else{Bk=Bf.GetPositionByValue(BX);}if(Bk!==null){Bg=1;if(BQ){if(Bk===0){Bk=1;}else{if(Bk===BY){--Bk;}}BI=Bh-1;Bc.push(new Ar.Point2D({x:Bk,y:Bg}));Bc.push(new Ar.Point2D({x:Bk,y:BI}));BO.x=Bk;BO.y=(Bc[0].y+Bc[1].y)/2;}else{if(Bk===0){Bk=1;}else{if(Bk===Bh){--Bk;}}BI=BY-1;Bc.push(new Ar.Point2D({x:Bg,y:Bk}));Bc.push(new Ar.Point2D({x:BI,y:Bk}));BO.x=(Bc[0].x+Bc[1].x)/2;BO.y=Bk;}BM=new Ar.StraightLineObject({TripleId:BL,GraphObjectManager:this,StartPoint:Bc[0],EndPoint:Bc[1],GraphCollectionObject:null,Identity:Bl,Shape:d._LINE,MidPoint:BO});if(BM!==null){if(!BM.mFormatLinePtr){BM.mFormatLinePtr=new Ar.FormatLine();}this.mReferenceLineObjects.push(BM);BS.push({tripleId:Bi,identity:Bl,isVertical:BQ,position:Bk,labelText:BK});}}else{AR.visPrint("Reference line point calculation abnormal:");AR.visPrint("\tref line #: "+Ba+" direction: "+Bj);AR.visPrint("\tvalue = "+BX);if(BQ){AR.visPrint("\tx = "+Bk);}else{AR.visPrint("\ty = "+Bk);}}}}}AI.call(this,Bh,BY,BS);}function q(){var BI=this.mTrendLineObjects.length,BH;for(BH=0;BH<BI;++BH){this.mTrendLineObjects[BH].Draw();}}function Y(){var BI=this.mReferenceLineObjects,BH;for(BH=0;BH<BI.length;++BH){BI[BH].Draw();}}function E(BJ){var BI,BH=0;for(BI=0;BI<BJ.length;BI++){if(BJ[BI]!==null){BH++;}}return BH;}function Ay(BS,BN){if(!BN){return ;}var BK=this.mChartContextPtr,BP=this.mDatasetPtr,Bc=this.mChartContextPtr.GetGraphMatrixContext(),Bd=BK.mIsGraphMatrix,BQ,BX,Bg,BJ,BZ,BV,Bb,BW,BI,Be,BY;var BR=BP.showDatalabels();if(Bd&&BR){Be=this.dataLabelManager;if(Be===null||Be===undefined){BY=new Ar.Rect2D({x:0,y:0,width:BK.mGraphWidth,height:BK.mGraphHeight});Be=this.dataLabelManager=new Ar.DataLabelManager({DataArea:BY});Be.ChartContext=BK;}if(Bc.mMarkerShape===BB.DssGraphMarkerShape2DPie||Bc.mMarkerShape===BB.DssGraphMarkerShape2DRingPie){this.mPieRenderer.enableDataLabel(Be,this.shownDataLabels);BW=this.mPieRenderer.dataLabels;BV=BW.length;for(Bb=0;Bb<BV;++Bb){BI=BW[Bb].Label;if(BI.mIsShown){this.AddToMapAndList(BI);}}}else{BX=[];K.call(this,BX);Aa.call(this,BS,BX);AY.call(this);Be=A.call(this);Be.PlaceDataLabels(this.mDataLabels,this.shownDataLabels);}}else{if(this.isSmarted){BQ=[];Bg=[];BJ=[];BZ=C.call(this,BS);if(BZ){Bg=BZ;}Az.call(this,BQ);u.call(this,BS,BQ);var BM=new Ar.TripleId({ObjectId:A8.DssGraphDataTextConnectLine,SeriesId:this.TripleId.mSeriesId,GroupId:this.TripleId.mGroupId}),BL=new Ar.GraphCollectionObject({TripleId:BM,GraphObjectManager:this,CollectionType:AO.CT_LINE});var Bf=this.labelMatrix.length,BO=AH.call(this,Bg,BJ,BL);if(BO===Bf){return ;}if(BO===0){BN=false;}else{var BU=new Ar.Rect2D(),Ba,BH;s.call(this,BU);Ba=new Ar.GridMap({Rect:this.mDataArea,Unit:BU,dataLabelPadding:5});BH=B.call(this,Ba);if(BH){var BT=function BT(Bi,Bh){return Bi.HostMarker.x-Bh.HostMarker.x;};this.labelMatrix.sort(BT);b.call(this,Ba,BL);}else{BC.call(this,BL);}}if(BL.GetCollectionSize()){this.AddToMap(BL);}if(!this.isSmarted){if(this.isSmarted){this.mPostTrendLineObjects.splice(0,this.mPostTrendLineObjects.length);}if(!this.dataLabelLine){S.call(this,BS);}else{BL=new Ar.GraphCollectionObject({TripleId:BM,GraphObjectManager:this,CollectionType:AO.CT_LINE});S.call(this,BS,BL);if(BL.GetCollectionSize()>0){this.AddToMap(BL);}}}}}}function D(){var BJ=this.mChartContextPtr,BH=this.mDataArea,BI=this.mPostTrendLineObjects;if(BJ.mIsGraphMatrix){BI=[];}this.y1Axis.GenerateCustomLine(BH,BI);if(this.mChartContextPtr.IsDualAxis()){this.y2Axis.GenerateCustomLine(BH,BI);}this.xAxis.GenerateCustomLine(BH,BI);if(BJ.mIsGraphMatrix&&BI.length){this.mGraphObjectList=BI.concat(this.mGraphObjectList);}}function I(BK){var BO=this.mChartContextPtr,BL=BO.mGraphHeight,BJ=BO.mGraphWidth,BN,BI,BM,BH;if(BK===undefined||BK===null){return false;}BN=BK.mOptions;BI=BN.mAxisCustomValue;BM=BK.IsVerticalAxis();BH=BK.ValueToPosition(BI);if(!BN.mDrawCustomLine){return false;}if(BI>BK.mMaxTick||BI<BK.mMinTick){return false;}if(BH===0){return false;}if(BM){if(BH===BL){return false;}}else{if(BH===BJ){return false;}}return true;}function AN(BM,BT,BH,BS,BQ,BO,BJ,BK){var BI={},BN=BT/2,BL=BH/2,BP=BK.IsVerticalAxis(),BR;if(BK.mTripleId.mObjectId===A8.DssGraphY2Body){BR=A5;}else{if(BK.mTripleId.mObjectId===A8.DssGraphX2Body){BR=L;}else{BR=BP?A6:O;}}BI.rect=new Ar.Rect2D({x:0,y:0,width:BH+2*BJ,height:BT+2*BJ});switch(BM){case 0:switch(BR){case A6:BI.xOffset=BJ+BL;BI.yOffset=BS-BJ-BN;BI.rect.y=BS-2*BJ-BT;BI.rect.x=0;break;case O:BI.xOffset=BS-BJ-BL;BI.yOffset=BQ-BJ-BN;BI.rect.y=BQ-2*BJ-BT;BI.rect.x=BS-2*BJ-BH;break;case A5:BI.xOffset=BO-BJ-BL;BI.yOffset=BS-BJ-BN;BI.rect.y=BS-2*BJ-BT;BI.rect.x=BO-2*BJ-BH;break;case L:BI.xOffset=BS-BJ-BL;BI.yOffset=BJ+BN;BI.rect.y=0;BI.rect.x=BS-2*BJ-BH;break;}break;case 1:switch(BR){case A6:BI.xOffset=BJ+BL;BI.yOffset=BS+BJ+BN;BI.rect.y=BS;BI.rect.x=0;break;case O:BI.xOffset=BS+BJ+BL;BI.yOffset=BQ-BJ-BN;BI.rect.y=BQ-2*BJ-BT;BI.rect.x=BS;break;case A5:BI.xOffset=BO-BJ-BL;BI.yOffset=BS+BJ+BN;BI.rect.y=BS;BI.rect.x=BO-2*BJ-BH;break;case L:BI.xOffset=BS+BJ+BL;BI.yOffset=BJ+BN;BI.rect.y=0;BI.rect.x=BS;break;}break;}return BI;}function A0(BL,BR,BO,BM,BI,BJ){var BP=BL.rect,BN,BK,BH,BQ;if(BP.y<0||BP.y+BP.height>BR){return false;}if(BP.x<0||BP.x+BP.width>BO){return false;}BN=BJ.length;for(BK=0;BK<BN;++BK){BH=BJ[BK].GetBoundingRect(true);if(BP.HasIntersection(BH)){return false;}}BN=BI.length;for(BK=0;BK<BN;++BK){BH=BI[BK].GetBoundingRect(true);if(BP.HasIntersection(BH)){return false;}}BN=BM.length;for(BK=0;BK<BN;++BK){BQ=BM[BK];if(BQ.mIsShown){BH=BQ.GetBoundingRect(true);if(BP.HasIntersection(BH)){return false;}}}return true;}function AT(BJ){var BM=this.mChartContextPtr,BX=BM.mGraphWidth,Bb=BM.mGraphHeight,BZ=BM.mpGraphMatrixContext,BQ=BJ.mOptions.mAxisCustomValue,BO=BJ.Key==="Y1"||BJ.Key==="Y2",BR=this.mDatasetPtr.fetchShownLabels(BO),Bc=BR&&BR[BJ.Key],BL=Bc&&Bc.length,BP,BK=false,BY,Bf,BI,BN,BU,BH,BS,BT,Be,Ba,BW,BV,Bd=BZ.getPadding(Am.kAxisOriginLabel);BU=Ar.gAxisObjects[BJ.getIndex()].mCustomLabelId;for(BY=0;BY<BL&&!BK;++BY){BP=Bc[BY];if(BP===BQ){BK=true;}}if(BK){return ;}Bf=new Ar.NumberObject({TripleId:BU,GraphObjectManager:this,Number:BQ,NumberFormat:BJ.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BJ.mCondenseLabels});if(Bf===null||Bf===undefined){return ;}BN=Bf;BI=Bf.mText;BN.SetText(BI);BH=BN.GetBoundingRect(true);BS=BH.height;BT=BH.width;Be=BJ.ValueToPosition(BQ);Ba=false;for(BY=0;BY<=1&&!Ba;++BY){BW={};BV=AN.call(this,BY,BS,BT,Be,Bb,BX,Bd,BJ);BW.xOffset=BV.xOffset;BW.yOffset=BV.yOffset;BW.rect=BV.rect;Ba=A0.call(this,BW,Bb,BX,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ba){BN.MoveTo(BW.xOffset,BW.yOffset,A4.CENTER);BN.mIsShown=true;this.mPostTrendLineObjects.push(BN);this.axisOriginLabels.push(BN);}}function AX(BM,BP,BI,BH,BN,BK){var BJ={},BO=BP/2,BL=BI/2;BJ.rect=new Ar.Rect2D({x:0,y:0,width:BI+2*BK,height:BP+2*BK});switch(BM){case 0:BJ.xOffset=BH+BK+BL;BJ.yOffset=BN-BK-BO;BJ.rect.x=BH;BJ.rect.y=BN-2*BK-BP;break;case 1:BJ.xOffset=BH-BK-BL;BJ.yOffset=BN-BK-BO;BJ.rect.x=BH-2*BK-BI;BJ.rect.y=BN-2*BK-BP;break;case 2:BJ.xOffset=BH-BK-BL;BJ.yOffset=BN+BK+BO;BJ.rect.x=BH-2*BK-BI;BJ.rect.y=BN;break;case 3:BJ.xOffset=BH+BK+BL;BJ.yOffset=BN+BK+BO;BJ.rect.x=BH;BJ.rect.y=BN;break;}return BJ;}function A2(BJ){var BM=this.mChartContextPtr,BY=BM.mGraphWidth,Bd=BM.mGraphHeight,Ba=BM.mpGraphMatrixContext,BH,BT,BV,BL,BQ,BO,BN,Bb,BW,BK,BP,BI,BS,BU,Bc,BR,BX,BZ,Be=Ba.getPadding(Am.kAxisOriginLabel);BQ=this.xAxis;BW=Ar.gAxisObjects[BQ.getIndex()].mCustomLabelId;BH=BJ?this.y1Axis:this.y2Axis;BT=BH.mOptions.mAxisCustomValue;BV=BH.ValueToPosition(BT);BL=new Ar.NumberObject({TripleId:BW,GraphObjectManager:this,Number:BT,NumberFormat:BH.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BQ.mCondenseLabels});BO=BQ.mOptions.mAxisCustomValue;BN=BQ.ValueToPosition(BO);Bb=new Ar.NumberObject({TripleId:BW,GraphObjectManager:this,Number:BO,NumberFormat:BQ.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BQ.mCondenseLabels});BK="("+Bb.mText+", "+BL.mText+")";BP=new Ar.TextObject({TripleId:BW,GraphObjectManager:this,GraphCollectionObject:null});BP.SetText(BK);BI=BP.GetBoundingRect(true);BS=BI.height;BU=BI.width;Bc=false;for(BZ=0;BZ<4&&!Bc;++BZ){BR={};BX=AX.call(this,BZ,BS,BU,BN,BV,Be);BR.xOffset=BX.xOffset;BR.yOffset=BX.yOffset;BR.rect=BX.rect;Bc=A0.call(this,BR,Bd,BY,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Bc){BP.MoveTo(BR.xOffset,BR.yOffset,A4.CENTER);BP.mIsShown=true;this.mPostTrendLineObjects.push(BP);this.axisOriginLabels.push(BP);}}function AP(){var BJ=0,BI,BH,BK;BI=I.call(this,this.y1Axis);BH=I.call(this,this.y2Axis);BK=I.call(this,this.xAxis);if((BI||BH)&&BK){BJ=true;}if(BJ){A2.call(this,BI);}else{if(BI){AT.call(this,this.y1Axis);}if(BH){AT.call(this,this.y2Axis);}if(BK){AT.call(this,this.xAxis);}}}function n(BX,BW){var BO=this.mChartContextPtr,BR=null,BL,BH,BP,BK,BN=BX.Id,BS=BX.MarkerType,BQ=BX.Shape,BJ=BX.Position,BU=BX.Size,BI=[];if(BO.mIsGraphMatrix){var BT=BX.BoundingBox;if(V.call(this,BX)){if(this.waitingList===null){this.waitingList=[];}this.waitingList.push(BX);return[];}BL=null;switch(BS){case BB.DssGraphMarkerShapeGMTick:var BV=BO.transformRectToTicker(BT,true);if(BV.length>=2){BR=new Ar.StraightLineObject({TripleId:BN,GraphObjectManager:this,StartPoint:BV[0],EndPoint:BV[1],GraphCollectionObject:null,Shape:d._TICKER});}else{return[];}break;case BB.DssGraphMarkerShape2DPie:case BB.DssGraphMarkerShape2DRingPie:var BM=0;if(BS===BB.DssGraphMarkerShape2DRingPie){BM=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new Ar.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BO,Layout:BM,PlotType:t.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}BH=this.mDatasetPtr.GetPieCountAtOneDataPoint(BN.mSeriesId,BN.mGroupId);for(BK=0;BK<BH;++BK){BP=this.mPieRenderer.drawSinglePie(BN.mSeriesId,BN.mGroupId,BK,BJ,BH);BI=BI.concat(BP);}break;case BB.DssGraphMarkerShapeSquare:case BB.DssGraphMarkerShapeRectangle:BR=new Ar.RectangleObject({TripleId:BN,GraphObjectManager:this,GraphCollectionObject:null,Area:BT,Shape:BQ});break;default:BR=new Ar.MarkerObject({TripleId:BN,GraphObjectManager:this,MarkerPosition:BJ,MarkerShape:BS,IsIsometric:true,MarkerSize:BU,GraphCollectionObject:BL,IsDialogSize:false,Shape:BQ});break;}}else{BR=new Ar.MarkerObject({TripleId:BN,GraphObjectManager:this,MarkerPosition:BJ,MarkerShape:BS,IsIsometric:true,MarkerSize:BU,GraphCollectionObject:BW,IsDialogSize:!this.isBubbleChart});}if(BR!==null&&BR!==undefined){BI.push(BR);this.AddToMap(BR);if(BW){BW.AddGraphObject(BR);}}return BI;}function BF(BX,BP,BH,BV,BQ){var BI=this.VecSeriesInfo[BV].MarkerShape,BM=0,BO=this.VecSeriesInfo[BV].IsNullData.length,BW,BU,BT,BR,BJ,BL,BY,BK,BN,BS;BS=new Ar.TripleId({ObjectId:A8.DssGraphRiser,SeriesId:this.VecSeriesInfo[BV].SeriesID});BW=new Ar.GraphCollectionObject({TripleId:BS,GraphObjectManager:this,CollectionType:AO.CT_GENERAL_SHAPE});for(BU=0;BU<BO;++BU){if(this.VecSeriesInfo[BV].IsNullData[BU]){continue;}BJ=BH[BM];BL=this.isBubbleChart?BQ:BW;BY=new Ar.TripleId({ObjectId:A8.DssGraphRiser,SeriesId:this.VecSeriesInfo[BV].SeriesID,GroupId:BU});BR={MarkerShape:BI,Size:BJ,Position:BP,Id:BY,MarkerType:this.VecSeriesInfo[BV].MarkerShape};BK=n.call(this,BR,BQ);if(BK.length>0){for(BT=0;BT<BK.length;++BT){this.mGraphObjectList.push(BK[BT]);this.AddToMap(BK[BT]);BL.AddGraphObject(BK[BT]);BN=BK[BT].GetBoundingRect();BX[BV].push(BN);}}}if(!this.isBubbleChart){this.AddToMap(BW);}}function A9(BM,BJ,BL){var BI,BK,BH;if(BM.length===0){return ;}if(this.VecSeriesInfo[BJ].ConnectDataPoint){BI=this.isBubbleChart?null:BL;BH=new Ar.TripleId({ObjectId:A8.DssGraphDataLine,SeriesId:this.VecSeriesInfo[BJ].mSeriesId,GroupId:Au});BK=new Ar.PolyLineObject({TripleId:BH,GraphObjectManager:this,PolyLine:BM,Parent:BI});this.mGraphObjectList.push(BK);this.AddToMap(BK);if(!this.isBubbleChart){BL.AddGraphObject(BK);}}}function AC(BN,BI){At.call(this,BN);var BL,BK,BQ=this.VecSeriesInfo,BO=BQ.length,BU=this.mDatasetPtr.GetGroupCount(),BT,BM,BS,BJ,BR,BP=false;for(BL=0;BL<BO;++BL){BJ=[];BR=[];var BH=BQ[BL].ShowDataLabel;BP=BP||BH;for(BK=0;BK<BU;++BK){BM=new Ar.Point2D();BT=A1.call(this,BL,BK,BM);this.VecSeriesInfo[BL].IsNullData.push(!BT);if(!BT){continue;}BS=BE.call(this,BL,BK);if(BS===undefined){continue;}BJ.push(BM);BR.push(BS);}A9.call(this,BJ,BL,BN[BL]);BF.call(this,BI,BJ,BR,BL,BN[BL]);}return{IsLabelPossible:BP,MarkerRectangles:BI};}function AZ(BS){var BZ,BW,BR=this.VecSeriesInfo,Bd=BR.length,BJ=this.mDatasetPtr.GetGroupCount(),BI,Bi,Ba,BM=this.mGraphObjectList,Bh=this.drawBySize,Bc=[],BN=false,BL=this.mChartContextPtr,Bb=BL.GetGraphMatrixContext(),BK=Bb.mMarkerShape,BU=BK===BB.DssGraphMarkerShape2DPie||BK===BB.DssGraphMarkerShape2DRingPie,BH=BL.mPartialRendering,Bg=[],BY=function BY(Bl,Bk){if(Bl.Size<Bk.Size){return 1;}if(Bl.Size>Bk.Size){return -1;}return 0;};for(BZ=0;BZ<Bd;++BZ){var Bf=BR[BZ].ShowDataLabel;BN=BN||Bf;for(BW=0;BW<BJ;++BW){Bi=new Ar.Point2D();BI=A1.call(this,BZ,BW,Bi);BR[BZ].IsNullData.push(!BI);if(!BI){continue;}Ba=BE.call(this,BZ,BW);if(Ba===undefined){continue;}var Bj=new Ar.TripleId({ObjectId:A8.DssGraphRiser,SeriesId:BR[BZ].SeriesID,GroupId:BW});if(BL.checkColorByAndSizeByValue(Bj,this.mDatasetPtr,this.mHasColorBy&&!BU,this.mHasSizeBy)===false){BR[BZ].IsNullData[BR[BZ].IsNullData.length-1]=true;continue;}var BT=H.call(this,BK,Bi,Ba);BT.Id=Bj;BT.Position=Bi;BT.Size=Ba;BT.MarkerType=BR[BZ].MarkerShape;Bc.push(BT);++this.DPCount;if(this.seriesDPCount[BZ]===undefined||this.seriesDPCount[BZ]===null){this.seriesDPCount[BZ]=1;}else{++this.seriesDPCount[BZ];}}}if(Bh||BH){Bc.sort(BY);if(BH){Bc.reverse();}}var BV;for(BZ=0;BZ<Bc.length;BZ++){var BO=n.call(this,Bc[BZ],null);for(BV=0;BV<BO.length;++BV){var Be=Bc[BZ],BP=Be.Id.mSeriesId,BQ=Be.Id.mGroupId;BK=Be.MarkerType;var BX=BK===BB.DssGraphMarkerShape2DPie||BK===BB.DssGraphMarkerShape2DRingPie;BS[BP][BQ]=Be.BoundingBox;if(BX){this.AddToMap(BO[BV]);}Bg.push(BO[BV]);}}if(BH){Bg.reverse();this.shapeCanvas=null;}for(BZ=0;BZ<Bg.length;BZ++){BM.push(Bg[BZ]);}return{IsLabelPossible:BN,MarkerRectangles:BS};}function j(BL,BM,BP,BO){var BJ=this.mChartContextPtr,BN=BJ.GetGraphMatrixContext(),BH,BK,BI;if(BJ.mIsGraphMatrix&&!BO){BN=BJ.GetGraphMatrixContext();if(BN.isPieOrRingShape()){BH=BN.GetMaxMarkerSize(Al._PIE,true,1,this.isBubbleChart);}else{if(BN.mMarkerShape===BB.DssGraphMarkerShapeGMTick){BH=BN.GetMaxMarkerSize(Al._TICK_VALUE,true,this.isBubbleChart);}else{BH=BN.GetMaxMarkerSize(Al._SHAPES_IN_BUBBLESCATTER,false,0,this.isBubbleChart);}}return Math.round(BH);}BK=BL.width;BI=BL.height;return Math.round(Math.min(BK/BM+0.5,BI/BP+0.5)*0.5);}function k(){var BK,BH,BL=this.mDatasetPtr.GetSeriesCount(),BJ=this.mDatasetPtr.GetGroupCount(),BI;if(this.mDatasetPtr.GetSeriesByColumn()){BK=BJ;BH=BL;}else{BH=BJ;BK=BL;}if(BK*BH===0){return 0;}BI=j.call(this,this.mDataArea,BK,BH,false);if(BI<3){BI=3;}return BI;}mstrmojo.chart.ValuePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.ValuePlot",dataLabelLine:false,isBubbleChart:false,isSmarted:false,maxUnitRadius:-1,maxRadius:-10,minRadius:10000,labelFormat:Ag.DssGraphDataTextSeriesDependent|Ag.DssGraphDataTextLabel,labelLocation:Ai.DssGraphDTPositionCenter,xAxis:null,y1Axis:null,y2Axis:null,zAxis:null,VecSeriesInfo:[],standAloneMarkers:[],labelMatrix:[],drawBySize:false,mPieRenderer:null,mDataLabels:[],mTrendLineObjects:null,mReferenceLineObjects:null,waitingList:null,shapeCanvas:null,viewPort:null,init:function AW(BH){var BI;this._super(BH);BI=this.mChartContextPtr;this.xAxis=null;this.y1Axis=null;this.y2Axis=null;this.zAxis=null;this.VecSeriesInfo=[];this.standAloneMarkers=[];this.labelMatrix=[];this.isBubbleChart=(BI.GetGraphMajorType()===An.GMT_BUBBLE);this.drawBySize=this.isBubbleChart&&this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];},OnRectangleSelection:function p(BP,BS,BN){BN=BN||0;var BI=this.mChartContextPtr;if(BN===0&&this.waitingList){var BR=this.waitingList,BL=BR.length,BK,BQ,BO,BM,BH,BJ=(BR[0].Shape===d._PIE)?"pie":"shape";for(BK=0;BK<BL;BK++){BQ=BR[BK].Position.x;BO=BR[BK].Position.y;if((BQ>=BP.x&&BQ<=BP.x+BP.width)&&(BO>=BP.y&&BO<=BP.y+BP.height)){BH=BR[BK].Id;BM=BI.getIdentity(BH,BJ);BS.push(BM);}}}},GenerateMapAndList:function AJ(){var BH,BN=[],BM,BL,BO=this.mChartContextPtr,BJ=BO.mIsGraphMatrix,BI=this.VecSeriesInfo.length;this.maxUnitRadius=k.call(this);BH=[];for(BM=0;BM<BI;++BM){BH.push([]);}if(BO.mImageUsage!==AQ.GENERAL){return ;}var BK;if(BJ){BK=AZ.call(this,BH);}else{BK=AC.call(this,BN,BH);}BH=BK.MarkerRectangles;BL=BK.IsLabelPossible;Ay.call(this,BH,BL);P.call(this);Ap.call(this);D.call(this);AP.call(this);},Draw:function Av(){var BJ=this.drawBySize,BL=this.mChartContextPtr,BI=this.VecSeriesInfo.length;if(BJ){var BH=[],BK;for(BK=0;BK<BI;BK++){BH[BK]=0;}BL.setDrawingOrderToCanvas(BH);}Ar.GraphObjectManager.prototype.Draw.apply(this,[]);q.call(this);Y.call(this);this.DrawPostTrendLineObjects();},AssignValueAxis:function U(BI,BH){switch(BH){case 0:this.xAxis=BI;break;case 1:this.y1Axis=BI;break;case 2:this.y2Axis=BI;break;case 3:this.zAxis=BI;break;default:break;}},AssignSeriesInfo:function Z(BJ,BM){var BI=BJ.length,BL,BK,BH;for(BH=0;BH<BI;++BH){BK=Ax.call(this);this.VecSeriesInfo.push(BK);BL=BJ[BH];this.VecSeriesInfo[BH].SeriesID=BL;this.VecSeriesInfo[BH].ValueAxisIndex=BM[BL];}this.LoadProperties();},GetMaxElementRadius:function AS(){var BI=new Ar.TripleId(),BH=this.mChartContextPtr.GetProperty(Aw.DssGraphMatrixUsePerfectPadding,BI);if(BH===null||BH===undefined){return 0;}return this.maxUnitRadius;},GetMaxElementOffsetClippedByBoundary:function W(BJ,BV){var Bf={LowOffset:0,HighOffset:0},BM=this.mChartContextPtr,Bb=BM.GetGraphMatrixContext(),BW,BO,Bh,BN,BU,BT,BS,BR,BZ,BL,BY,BX,BK,Ba;if(BV===undefined){BV=true;}if(!BM.mIsGraphMatrix){return Bf;}var BI=BJ?(BV?"X1":"X2"):(BV?"Y1":"Y2"),BH=this.mClippedElementSize;if(BH[BI]!==undefined){return BH[BI];}if(this.maxUnitRadius<0){this.maxUnitRadius=k.call(this);}BZ=this.mDatasetPtr.GetSeriesCount();BL=this.mDatasetPtr.GetGroupCount();var BQ={LowOffset:0,HighOffset:0};var BP={LowOffset:0,HighOffset:0};for(BY=0;BY<BZ;++BY){for(BX=0;BX<BL;++BX){Ah.Reset(0,0);BK=A1.call(this,BY,BX,Ah);if(!BK){continue;}Ba=BE.call(this,BY,BX);if(Ba===undefined){continue;}var Bg=0,Bd=0;var Be=0,Bc=0;Bf={LowOffset:0,HighOffset:0};BW=this.xAxis;BO=this.y1Axis;if(BW===null||BO===null){BH[BI]=Bf;return Bf;}Bh=BW.GetMaxMinDataInput();BN=BO.GetMaxMinDataInput();BU=BW.GetPositionByValue(Bh.Min);BT=BO.GetPositionByValue(BN.Min);if(BU===null||BT===null){BH[BI]=Bf;return Bf;}BS=BW.GetPositionByValue(Bh.Max);BR=BO.GetPositionByValue(BN.Max);if(BS===null||BR===null){BH[BI]=Bf;return Bf;}Bg=BQ.LowOffset;Bd=BQ.HighOffset;BQ=Bb.getClippedOffset(BU,BS,Ba,Ah,true,Bg,Bd);Bg=Math.max(BQ.LowOffset,Bg);Bd=Math.max(BQ.HighOffset,Bd);BH.X1=BQ;Be=BP.LowOffset;Bc=BP.HighOffset;BP=Bb.getClippedOffset(BT,BR,Ba,Ah,false,Be,Bc);Be=Math.max(BP.LowOffset,Be);Bc=Math.max(BP.HighOffset,Bc);BH.Y1=BP;}}if(BH.X1){BH.X2=mstrmojo.hash.copy(BH.X1);}else{BH.X1=BH.X2={LowOffset:0,HighOffset:0};}if(BH.Y1){BH.Y2=mstrmojo.hash.copy(BH.Y1);}else{BH.Y1=BH.Y2={LowOffset:0,HighOffset:0};}return BH[BI];},refresh:function Aq(BH,BI){if(BH==="clipping"){this.mDataArea.width=this.mChartContextPtr.mGraphWidth;this.mDataArea.height=this.mChartContextPtr.mGraphHeight;this.maxUnitRadius=-1;this.mClippedElementSize={};}else{}},LoadProperties:function Ad(){var BJ,BN,BH,BM=this.isBubbleChart?A7.DssGraphShowSDLine:A7.DssGraphShowLine,BL,BO=this.mChartContextPtr,BI=BO.GetGraphMatrixContext(),BK=BO.mIsGraphMatrix;for(BL=0;BL<this.VecSeriesInfo.length;++BL){BJ=this.VecSeriesInfo[BL];BH=new Ar.TripleId({ObjectId:A8.DssGraphRiser,SeriesId:BJ.SeriesID});if(BK){BJ.MarkerShape=BI.mMarkerShape;}else{BN=BO.GetProperty(A7.DssGraphSDMarkerShape,BH);if(BN){BJ.MarkerShape=BN;}else{BJ.MarkerShape=BB.DssGraphMarkerShapeCircle;}}switch(BJ.MarkerShape){case BB.DssGraphMarkerShapeCircle:case BB.DssGraphMarkerShapeRectangle:case BB.DssGraphMarkerShapeSquare:case BB.DssGraphMarkerShape2DPie:case BB.DssGraphMarkerShape2DRingPie:break;default:this.drawBySize=false;break;}if(BO.mImageUsage!==0){return ;}BN=BO.GetProperty(BM,BH);if(BN){BJ.ConnectDataPoint=BN;}BN=BO.GetProperty(A7.DssGraphSDShowDataText,BH);if(BN){BJ.ShowDataLabel=BN;}if(BK){BJ.ShowDataLabel=this.mDatasetPtr.showSeriesDatalabel(BH.mSeriesId);}this.LoadTrendLineProperties(this.VecSeriesInfo[BL].SeriesID,BJ.TrendLineOptions);}BN=BO.GetProperty(A7.DssGraphNewUseSmartLabels,AF);if(BN){this.isSmarted=BN;}BN=BO.GetProperty(A7.DssGraphAxisDataTextPlace,AF);if(BN){this.labelLocation=BN;}BN=BO.GetProperty(A7.DssGraphShowDataText,AF);if(BN){this.labelFormat=BN;}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Plot","CategoryAxis");var B=mstrmojo.chart;mstrmojo.chart.GridBasePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.GridBasePlot",mHasXAxis:false,mHasYAxis:false,mMarkerShape:0,mXaxis:null,mYaxis:null,mDataArea:null,init:function E(F){this._super(F);this.mMarkerShape=4;this.mHasXAxis=true;this.mHasYAxis=true;this.mDataArea=new B.Rect2D();},AssignSeries:function A(F){},AssignAxis:function D(G,F){if(F){this.mYAxis=G;}else{this.mXAxis=G;}},AssignDataArea:function C(F,G){this.mDataArea.ResetRect(F);if(G){this.mYAxis.SetDeviceDataArea(F);}else{this.mXAxis.SetDeviceDataArea(F);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","NumberObject","Rect2D","TextObject");var A=mstrmojo.chart;mstrmojo.chart.CategoryPlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.CategoryPlot",createRiserLabel:function C(G,F,K,H,E){var L,D=this.realComboChart;if((K===null&&H==="")||E===null){return null;}if(K){L=new A.NumberObject({TripleId:G,GraphObjectManager:this,Number:F,NumberFormat:K,GraphCollectionObject:E,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr,IsFinal:(H==="")});if(L===null){return null;}if(H&&H!==""){L.AddTextBeforeNumber(H);}if(D){L.strokeBBox();}this.AddToMap(L);E.AddGraphObject(L);return L;}var J=new A.Rect2D({x:0,y:0,width:0,height:0}),I=new A.TextObject({TripleId:G,GraphObjectManager:this,rect:J,GraphCollectionObject:E,clientDrag:true});if(I!==null){I.SetText(H);if(D){I.strokeBBox();}this.AddToMap(I);E.AddGraphObject(I);return I;}return null;},ReserveAreaForDataLabels:function B(D){}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.VisualizationEditorUnitList");mstrmojo.gm.DndItemRenderer=mstrmojo.declare(mstrmojo.vi.ui.VisualizationEditorUnitList,null,{scriptClass:"mstrmojo.gm.DndItemRenderer",renderItem:function A(E,B){var F=this.itemRenderer,C=F&&F.render,D=document.createElement("div");D.innerHTML=C(E,B,this);return D.firstChild;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,M=O.enums,B=M.EnumOrientation,P=O.gNullObjectId,L=O.gNullTripleId;var J=mstrmojo.chart.model,Q=J.enums,E=Q.EnumDSSGraphType,F=Q.EnumDSSGraphObject,K=Q.EnumVariantBool.VARIANT_FALSE,R=Q.EnumDSSExtraGraphProperty;mstrmojo.chart.PlotManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.PlotManager",mLegendPtr:null,mDatasetPtr:null,mGraphType:E.DssGraphTypeVertical_Bar_Side_by_Side,mPlotArea:null,mChartAreaOptions:null,mRecalculateFrame:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,init:function N(S){this._super(S);this.mChartAreaOptions={useChartArea:false,chartAreaNumber:1,orientation:B.OR_VERTICAL,vecPercentageHeightOrWidth:[],seriesDistribution:[]};this.mPlotArea=S.Area||null;this.mChartContextPtr=S.GraphObjectManager.mChartContextPtr;},SetDataset:function G(S){this.mDatasetPtr=S;},SetMarginInfo:function H(W,U,S,V){this.mLeftMargin=W;this.mRightMargin=U;this.mTopMargin=S;this.mBottomMargin=V;},LoadProperties:function I(){var a,V,c,X,Y,S=[],W=[],b=[];var U=this.mChartContextPtr,Z=this.mChartAreaOptions;this.mGraphType=U.mGraphType;this.mRecalculateFrame=U.mRecalculateFrame;if(!U.mIsGraphMatrix){a=U.GetProperty(R.DssGraphUseChartArea,P);if(a){Z.useChartArea=a!==K;}}V=this.mDatasetPtr.GetSeriesCount();c=1;X=0;if(Z.useChartArea){a=U.GetProperty(R.DssGraphChartAreaNumber,P);if(a){Z.chartAreaNumber=a;if(Z.chartAreaNumber>V){Z.chartAreaNumber=V;}}a=U.GetProperty(R.DssGraphChartAreaOrientation,P);if(a){Z.orientation=(a!==K?B.OR_VERTICAL:B.OR_HORIZONTAL);}for(Y=0;Y<Z.chartAreaNumber;Y++){a=U.GetProperty(R.DssGraphChartAreaSpacePercentage,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphFrame,SeriesId:Y}));if(a&&a>=0){Z.vecPercentageHeightOrWidth.push(a/100);c-=a/100;}else{Z.vecPercentageHeightOrWidth.push(-1);X++;}}}else{Z.chartAreaNumber=1;Z.vecPercentageHeightOrWidth.push(1);}for(Y=0;Y<Z.chartAreaNumber;Y++){Z.seriesDistribution.push(S);}this.mDatasetPtr.GetOneSliceRangeSimple(W,b);for(Y=0;Y<V;Y++){if(U.mIsGraphMatrix){Z.seriesDistribution[Y%Z.chartAreaNumber].push(W[Y]);}else{a=U.GetProperty(R.DssGraphChartAreaDestination,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphRiser,SeriesId:Y}));if(Z.useChartArea&&a){Z.seriesDistribution[a].push(Y);}else{Z.seriesDistribution[Y%Z.chartAreaNumber].push(W[Y]);}}}if(X>0){for(Y=0;Y<Z.chartAreaNumber;Y++){if(Z.vecPercentageHeightOrWidth[Y]<=0){Z.vecPercentageHeightOrWidth[Y]=c/X;}}}},CalculateChartAreas:function A(X,b){var d,S,Z,W,a=this.mChartAreaOptions,V,U,Y,c;d=0;if(a.orientation===B.OR_VERTICAL){S=X.height/20;c=a.chartAreaNumber;for(W=0;W<c;W++){V=(X.height-S*(a.chartAreaNumber-1))*a.vecPercentageHeightOrWidth[W];b.push(new mstrmojo.chart.Rect2D({x:X.x,y:X.y+(X.height-S*(c-1))*d+S*W,width:X.width,height:V}));d+=a.vecPercentageHeightOrWidth[W];}Y=b[a.chartAreaNumber-1];Y.height=X.y+X.height-Y.y;}else{Z=X.width/20;c=a.chartAreaNumber;for(W=0;W<c;W++){U=(X.width-Z*(a.chartAreaNumber-1))*a.vecPercentageHeightOrWidth[W]+0.5;b.push(new mstrmojo.chart.Rect2D({x:X.x+(X.width-Z*(c-1))*d+Z*W,y:X.y,widht:U,height:X.height}));d+=a.vecPercentageHeightOrWidth[W];}Y=b[c-1];Y.width=X.x+X.width-Y.x;}},RectangleUnion:function C(S,V,U){U.x=Math.min(S.x,V.x);U.y=Math.min(S.y,V.y);U.width=Math.max(S.x+S.width,V.x+V.width)-U.x;U.height=Math.max(S.y+S.height,V.y+V.height)-U.y;},RectangleIntersection:function D(S,V,U){if((S.x>(V.x+V.width))||(V.x>(S.x+S.width))||(S.y>(V.y+V.height))||(V.y>(S.y+S.height))){return false;}U.x=Math.max(S.x,V.x);U.y=Math.max(S.y,V.y);U.width=Math.min(S.x+S.width,V.x+V.width)-U.x;U.height=Math.min(S.y+S.height,V.y+V.height)-U.y;return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumAnchorPoint","EnumGraphMatrixMarkerTypeInChart","EnumLineStyle","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode","EnumCollectionType","EnumFontStyle");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","PiePlotRenderer","Rect2D","Vector2D","NumberObject","MarkerObject","FormatFill","Point2D","GMDataLabelInfo");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure","mstrmojo.VisUtility");var AV=mstrmojo.chart,Z=AV.common,P=AV.enums,AR=AV.ChartConstants,AD=mstrmojo.VisUtility,Aa=P.EnumLayout,AF=P.EnumOrientation,AC=P.EnumValueAxis,Ae=P.EnumAnchorPoint,AP=P.EnumGraphMatrixMarkerTypeInChart,AY=P.EnumAxisDirection,AB=P.EnumImageUsage,b=P.EnumGraphMatrixPiePlotType,AA=P.EnumCollectionType;var AO=AV.model,AE=AO.enums,Ai=AE.EnumDSSGraphMarkerShape,O=AE.EnumDSSGraphRegressionType,AN=AE.EnumDSSGraphDataTextPosition,V=AE.EnumShapeType,AH=P.EnumGraphMatrixElementSizeMode,Ah=AE.EnumDSSGraphObject,E=P.EnumFontStyle;var D=AV.common.Utility;var AT=1e-10,x=0.00001,y=2,G=3,o=1,n=2,l=3,j=4,g=5,e=6;var s=new AV.ChartAdvFormat(),Ac=new AV.Point2D(),z=new AV.Point2D(),L=new AV.Point2D();function X(Ao,An){var Ap;if(Ao.cannotFitVertically===true&&An.cannotFitVertically===false){return 1;}if(Ao.cannotFitVertically===false&&An.cannotFitVertically===true){return -1;}if(Ao.cannotFitHorizontally===true&&An.cannotFitHorizontally===false){return 1;}if(Ao.cannotFitHorizontally===false&&An.cannotFitHorizontally===true){return -1;}Ap=Ao.overlapRefLabelCount-An.overlapRefLabelCount;if(Ap<0){return -1;}if(Ap>0){return 1;}Ap=Ao.overlapRefLineCount-An.overlapRefLineCount;if(Ap<0){return -1;}if(Ap>0){return 1;}Ap=Ao.overlapDataLabelCount-An.overlapDataLabelCount;return Ap;}function r(An){switch(An){case V._CIRCLE:return Ai.DssGraphMarkerShapeCircle;case V._RECTANGLE:return Ai.DssGraphMarkerShapeRectangle;case V._SQUARE:return Ai.DssGraphMarkerShapeSquare;case V._TICKER:return Ai.DssGraphMarkerShapeGMTick;default:return Ai.DssGraphMarkerShapeNone;}}function Al(Ap,Ao,At,A0,Aq,An,Ay){var Av=-1,Au=-1,Ax=-1,Aw=new AV.Point2D({x:-1,y:-1}),As=this.mpABLPlotContext,Ar=As.mCategoryAxisPtr,Az=As.mValueAxis;if(this.mIsVertical){Av=Ar.getSubGroupMiddlePos(Ao,A0,An);Ax=Az[this.mSeriesInfo[Ap].mValueAxis].GetPositionByValue(At);if(Ax!==null){Au=Ax;}}else{Au=Ar.getSubGroupMiddlePos(At,Aq,Ay);Ax=Az[this.mSeriesInfo[Ap].mValueAxis].GetPositionByValue(Ao);if(Ax!==null){Av=Ax;}}if(Av>=0&&Au>=0){Aw.x=Av;Aw.y=Au;}return Aw;}function f(Az,Ar,A1,Ao){var Aq=0,At,An,As,Ap=1,Aw=1,A0,Av,Ax=[Az,Ar,A1];if(this.mPieCentersPool===null){this.mPieCentersPool=new Z.MapStructure();}var Au=this.mPieCentersPool.find(Ax);if(Au!==null&&Au!==undefined){return Au;}A0=Ao||this.mDatasetPtr.GetPieCountAtOneDataPoint(this.mSeriesInfo[Az].mSeriesId,Ar);if(this.mIsVertical){Ap=A0;}else{Aw=A0;}Av=this.GetData(Az,Ar);if(Av!==null){Aq=Av;}An=this.mSeriesInfo[Az].mSeriesId;At=Ar;As=A1;if(this.mIsVertical){var Ay;Ay=Aq;Aq=At;At=Ay;Ay=An;An=As;As=Ay;}Au=Al.call(this,Az,Aq,At,An,As,Ap,Aw);this.mPieCentersPool.replace(Ax,Au);return Au;}function a(){var Ao=this.mTrendLineObjects.length,An;for(An=0;An<Ao;++An){this.mTrendLineObjects[An].Draw();}}function R(){var Ao=this.mReferenceLineObjects.length,An;for(An=0;An<Ao;++An){this.mReferenceLineObjects[An].Draw();}}function B(Ap){var Ao,An=0;for(Ao=0;Ao<Ap.length;Ao++){if(Ap[Ao]!==null){An++;}}return An;}function k(Aq,Ap,Aw,Ay,Au,Ao){var As,Ar,An,Ax,Az,At,Av;if(this instanceof mstrmojo.chart.BarSeriesRenderer){As={groupID:Ap,seriesInfoID:Aq,groupIndex:0,useFloat:!Ao};if(Ao){Ar=this.GetRiserStartPosAndSize(As);Ax=Ay.GetPositionByValue(Aw);}else{Ar=this.GetRiserStartPosAndSize(As);Ax=Ay.GetFloatPositionByValue(Aw);}An=Ar.Start+Ar.Size/2;}else{if(this instanceof mstrmojo.chart.AreaSeriesRenderer||this instanceof mstrmojo.chart.LineSeriesRenderer){if(Ao){An=this.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Ap);Ax=Ay.GetPositionByValue(Aw);}else{An=this.mpABLPlotContext.mCategoryAxisPtr.getFloatGroupMiddlePos(Ap);Ax=Ay.GetFloatPositionByValue(Aw);}}}Az=Au?An:Ax;At=Au?Ax:An;Av=new AV.Point2D({x:Az,y:At});return Av;}function c(As){var Aq,An,Ap,Ar,Ao,At;Ap=As.length;if(Ap<=2){An=As;}else{An=[];An.push(As[0]);for(Aq=0;Aq+2<Ap;++Aq){At=false;if((Math.abs(As[Aq].x-As[Aq+1].x)>AT)&&(Math.abs(As[Aq+1].x-As[Aq+2].x)>AT)){Ar=(As[Aq+1].y-As[Aq].y)/(As[Aq+1].x-As[Aq].x);Ao=(As[Aq+2].y-As[Aq+1].y)/(As[Aq+2].x-As[Aq+1].x);if(Math.abs(Ar-Ao)<x){At=true;}}else{if((Math.abs(As[Aq].x-As[Aq+1].x)<=AT)&&(Math.abs(As[Aq+1].x-As[Aq+2].x)<=AT)){At=true;}else{if((Math.abs(As[Aq].x-As[Aq+1].x)>AT)&&(Math.abs(As[Aq+1].x-As[Aq+2].x)<=AT)){if(Math.abs(As[Aq+1].y-As[Aq+2].y)<=AT){At=true;}}}}if(!At){An.push(As[Aq+1]);}}An.push(As[Ap-1]);}return An;}function p(Aq,Ax,At,An,Ap,Aw,Av,As,Ar,Au){var Ao={};Ao.rect=new AV.Rect2D({x:0,y:0,width:An+2*Ar,height:Ax+2*Ar});switch(Aq){case o:if(Au){Ao.xOffset=Aw+Ar+Ap;Ao.yOffset=Ar+At;Ao.rect.x=Aw;Ao.rect.y=0;}else{Ao.xOffset=As-Ar-Ap;Ao.yOffset=Aw-Ar-At;Ao.rect.x=As-2*Ar-An;Ao.rect.y=Aw-2*Ar-Ax;}break;case n:if(Au){Ao.xOffset=Aw-Ar-Ap;Ao.yOffset=Ar+At;Ao.rect.x=Aw-2*Ar-An;Ao.rect.y=0;}else{Ao.xOffset=As-Ar-Ap;Ao.yOffset=Aw+Ar+At;Ao.rect.x=As-2*Ar-An;Ao.rect.y=Aw;}break;case l:if(Au){Ao.xOffset=Aw+Ar+Ap;Ao.yOffset=Av/2;Ao.rect.x=Aw;Ao.rect.y=Av/2-Ar-At;}else{Ao.xOffset=As/2;Ao.yOffset=Aw-Ar-At;Ao.rect.x=As/2-Ar-Ap;Ao.rect.y=Aw-2*Ar-Ax;}break;case j:if(Au){Ao.xOffset=Aw-Ar-Ap;Ao.yOffset=Av/2;Ao.rect.x=Aw-2*Ar-An;Ao.rect.y=Av/2-Ar-At;}else{Ao.xOffset=As/2;Ao.yOffset=Aw+Ar+At;Ao.rect.x=As/2-Ar-Ap;Ao.rect.y=Aw;}break;case g:if(Au){Ao.xOffset=Aw+Ar+Ap;Ao.yOffset=Av-Ar-At;Ao.rect.x=Aw;Ao.rect.y=Av-2*Ar-Ax;}else{Ao.xOffset=Ar+Ap;Ao.yOffset=Aw-Ar-At;Ao.rect.x=0;Ao.rect.y=Aw-2*Ar-Ax;}break;case e:if(Au){Ao.xOffset=Aw-Ar-Ap;Ao.yOffset=Av-Ar-At;Ao.rect.x=Aw-2*Ar-An;Ao.rect.y=Av-2*Ar-Ax;}else{Ao.xOffset=Ar+Ap;Ao.yOffset=Aw+Ar+At;Ao.rect.x=0;Ao.rect.y=Aw;}break;}return Ao;}function AS(Ar,Ay,Au,As,Ap,An){var Av=Ar.rect,At,Aq,Ao,Aw,Ax;if(Av.y<0||Av.y+Av.height>Ay){Ar.cannotFitVertically=true;return ;}if(Av.x<0||Av.x+Av.width>Au){Ar.cannotFitHorizontally=true;}At=Ap.length;for(Aq=0;Aq<At;++Aq){Ao=Ap[Aq].GetBoundingRect();if(Av.HasIntersection(Ao)){++Ar.overlapRefLabelCount;}}At=An.length;for(Aq=0;Aq<At;++Aq){Ax=An[Aq];if(Ax.isVertical){if(Av.x<Ax.position&&Av.x+Av.width>Ax.position){++Ar.overlapRefLineCount;}}else{if(Av.y<Ax.position&&Av.y+Av.height>Ax.position){++Ar.overlapRefLineCount;}}}At=As.length;for(Aq=0;Aq<At;++Aq){Aw=As[Aq];if(Aw.mIsShown){Ao=Aw.GetBoundingRect();if(Av.HasIntersection(Ao)){++Ar.overlapDataLabelCount;Ar.overlapDataLabels.push(As[Aq]);}}}}function u(BA,A5,Av){var Ap=this.mChartContextPtr,A9=Ap.GetGraphMatrixContext(),Ao=A9.getPadding(AR.kRefLabel),Au=Av.length,As,At,A2,Az,Ar,A0,An,A7,A6,A3,Aq,Ax,A4,A1,A8,Aw=this.mpABLPlot.shownDataLabels,Ay=this.mpABLPlot.shownRefLabels;for(A7=0;A7<Au;++A7){As=Av[A7];At=new AV.TextObject({TripleId:As.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:As.identity});if(At!==null){At.SetText(As.labelText);for(A6=0;A6<2;++A6){if(A6===1){Aq=At.mText;At.SetText(Aq[0]+"...");At.rect.height=0;At.rect.width=0;}An=At.GetBoundingRect();Az=An.height;A0=Az/2;A2=An.width;Ar=A2/2;A1=[];for(A3=o;A3<=e;++A3){Ax={};Ax.position=A3;Ax.cannotFitVertically=false;Ax.cannotFitHorizontally=false;Ax.overlapRefLabelCount=0;Ax.overlapRefLineCount=0;Ax.overlapDataLabelCount=0;Ax.overlapDataLabels=[];A4=p.call(this,A3,Az,A0,A2,Ar,As.position,BA,A5,Ao,As.isVertical);Ax.xOffset=A4.xOffset;Ax.yOffset=A4.yOffset;Ax.rect=A4.rect;AS.call(this,Ax,BA,A5,Aw,Ay,Av);A1.push(Ax);}A1.sort(X);if(A1[0].cannotFitVertically){break;}if(A1[0].cannotFitHorizontally){if(A7===0){continue;}else{break;}}At.MoveTo(A1[0].xOffset,A1[0].yOffset,Ae.CENTER);At.mIsShown=true;A8=A1[0].overlapDataLabelCount;for(A3=0;A3<A8;++A3){A1[0].overlapDataLabels[A3].mIsShown=false;}this.mpABLPlot.mPostTrendLineObjects.push(At);Ay.push(At);break;}}}}mstrmojo.chart.SeriesRenderer=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.SeriesRenderer",mDeviceDataArea:null,mpABLPlot:null,mGroupCount:0,mSeriesCount:0,mDatasetPtr:null,mLegendPtr:null,mSeriesInfo:null,mCumulateData:null,mSeriesNumber:null,mTextCollection:null,mTrendLineObjects:null,mReferenceLineObjects:null,mpABLPlotContext:null,mIsVertical:true,mUseDepth:false,mHasNegativeValue:false,mDepth:0,mDepthDirection:0,mStartLevel:0,mGroupIdMapPerSeries:[],mHasSizeBy:false,mHasColorBy:false,mClippedMarkerSize:null,mPieRenderer:null,mPieCentersPool:null,renderSequence:null,init:function AG(Ao){this._super(Ao);this.mSeriesInfo=[];this.mCumulateData=[[],[]];this.mClippedMarkerSize={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};this.mSeriesNumber=[0,0];this.mTextCollection=[];this.mTrendLineObjects=[];this.mReferenceLineObjects=[];this.mDatasetPtr=Ao.DataSet;this.mLegendPtr=Ao.Legend;this.mDepth=0;this.mDepthDirection=0;this.mHasNegativeValue=false;this.mpABLPlot=this.mpManager;this.mGroupCount=this.mDatasetPtr.GetGroupCount();var Aq=this.mpABLPlotContext=this.mpABLPlot.mABLPlotContext;this.mIsVertical=(Aq.mABLOptions.mOrientation===AF.OR_VERTICAL);this.mUseDepth=Aq.mABLOptions.mUseDepth;if(this.mUseDepth){this.mDepth=this.mpABLPlot.unitLevelDepth;this.mDepthDirection=Aq.mABLOptions.mDepthDirection;}var Ap=this.mChartContextPtr,An=Ap.GetGraphMatrixContext();this.mHasSizeBy=An.mHasSizeBy;this.mHasColorBy=An.mHasColorBy;this.renderSequence=[];},AddSeries:function Ak(Ao,Aq,An,Ap){this.mSeriesInfo.push({mSeriesId:Ao,mSeriesIndex:Aq,mDataIndex:An,mValueAxis:Ap});++this.mSeriesNumber[Ap];},GetMinMaxValue:function Q(A3,Ar,Ay,Av){var Ao=this.mChartContextPtr,Au,A0,A1,Ax=[],As,Aq,Ap,A2=this.mSeriesInfo,Aw,An;if(A2.length===0){return{Min:Ar,Max:Ay,AreInitialized:Av};}if(Ao.mIsUniformAxisMode){var At=Ao.getUniformAxisContext(),Az=At.ValueAxis;if(Ao.IsVertical()===false){if(A3===0){return{Min:Az.X1.Min,Max:Az.X1.Max,AreInitialized:true};}else{return{Min:Az.X2.Min,Max:Az.X2.Max,AreInitialized:true};}}if(A3===0){return{Min:Az.Y1.Min,Max:Az.Y1.Max,AreInitialized:true};}return{Min:Az.Y2.Min,Max:Az.Y2.Max,AreInitialized:true};}Au=Ao.mIsTimeSeriesChart&&this.mpABLPlotContext.mABLOptions.mUseGlobalAutoScale;A0=0;A1=this.mDatasetPtr.GetDataGroup();for(As=0;As<A2.length;++As){if(A2[As].mValueAxis===A3){if(Au){Ax.push(A2[As].mSeriesId);}else{for(Aq=0;Aq<this.mGroupCount;++Aq){for(Ap=0;Ap<A1;++Ap){A0=this.GetData(As,Aq,false,Ap);if(A0!==null){continue;}if(!Av){Av=true;Ar=A0;Ay=A0;}else{Ay=Math.max(A0,Ay);Ar=Math.min(A0,Ar);}}}}}}if(Au&&Ax.length!==0){Aw=0;An=0;A0=this.mDatasetPtr.GetPeakValuesAcrossSeries(An,Aw,Ax,0);Ay=(A0.Max>Ay)?A0.Max:Ay;Ar=(A0.Min<Ar)?A0.Min:Ar;Av=true;}return{Min:Ar,Max:Ay,AreInitialized:Av};},GetData:function AJ(At,Au,Ar,Ao){var Ay=this.mpABLPlotContext,Aw=Ay.mABLOptions,Aq=this.mpABLPlot,Ax=Aw.mLayout,A1=this.mSeriesInfo,As=this.mDatasetPtr,Az=A1[At].mValueAxis,A0,Av,An,Ap;Ar=Ar||false;Ao=Ao||0;if((Ax===Aa.LO_STACKED)||(Ax===Aa.LO_PERCENT)){A0=this.hGetCumulateData(Az,A1[At].mDataIndex,Au);Av=As.GetData(A1[At].mSeriesId,Au,Ao);if(Av!==null){if(Ar){An=Ay.mValueAxis[Az].GetBaseValue();A0=(A0-An-Av)+An;if(D.AlmostZero(A0)){A0=0;}}if(Ax===Aa.LO_PERCENT){Ap=Aq.getGroupTotals(Au,Az);if(Ap===0){A0=0;}else{A0/=Ap;}}return A0;}if(Ax===Aa.LO_PERCENT){Ap=Aq.getGroupTotals(Au,Az);if(Ap===0){A0=0;}else{A0/=Ap;}}return null;}Av=As.GetData(A1[At].mSeriesId,Au,Ao);if(Av!==null){A0=Av;}else{A0=null;}return A0;},SetDeviceDataArea:function I(An){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AV.Rect2D({Rect2D:An});}else{this.mDeviceDataArea.ResetRect(An);}}},IsReverseSeriesOrder:function d(Ap){var An=this.mpABLPlotContext.mValueAxis,Ao;if(Ap>=An.length){return false;}Ao=An[Ap];return this.mChartContextPtr.IsReverseSeriesOrder(Ao,this.mIsVertical,this.mDepthDirection);},IsReverseGroupOrder:function q(){return this.mChartContextPtr.IsReverseGroupOrder(this.mIsVertical,this.mDepthDirection);},PriorToNextSeries:function N(Ao){var Ar=this.mChartContextPtr,Ap,Aq,An=false;Ap=this.mIsVertical?new AV.Vector2D({x:1,y:0}):new AV.Vector2D({x:0,y:1});Aq=Ar.normalDirection(Ao,this.mDepthDirection)*Ar.normalDirection(Ap,this.mDepthDirection);if(Aq===0){An=this.mIsVertical?(Ao.y>0):(Ao.x<0);}else{An=Aq>0;}return An;},CreateTotalLabel:function S(Au,Ao,As){var Av=this.mSeriesInfo,Ar=true,Aq=0,Ap,At,An;for(Ap=0;Ap<Av.length;++Ap){if(Av[Ap].mValueAxis===Au&&this.mpABLPlotContext.mSeriesOptions[Av[Ap].mSeriesIndex].mShowDataLabels){At=this.mDatasetPtr.GetData(Av[Ap].mSeriesId,Ao);if(At!==null){Aq+=At;if(Ar){Ar=false;}}}}if(Ar){return null;}An=new AV.NumberObject({TripleId:new AV.TripleId({ObjectId:401,SeriesId:Au,GroupId:Ao}),GraphObjectManager:this,Number:Aq,NumberFormat:this.mpABLPlotContext.mSeriesOptions[0].mGraphNumberFormat,GraphCollectionObject:As,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr});this.AddToMap(An);As.AddGraphObject(An);return An;},GetUpmostIndexByValueAxisAndGroup:function M(At,Aq){var Ar=this.mSeriesInfo,Ao,Ap,As,An;Ao=-1;An=Ar.length;for(Ap=An-1;Ap>-1;--Ap){if(Ar[Ap].mValueAxis===At){As=this.mDatasetPtr.GetData(Ar[Ap].mSeriesId,Aq);if(As!==null){Ao=Ap;if(As>0){break;}}}}return Ao;},createRiserLabel:function AW(An,Ao,Ar){var Aw=this.mSeriesInfo,Av=Aw[An],Aq=this.mpABLPlotContext.mABLOptions,Ap,As,Au=null,At="";Ap=this.mDatasetPtr.GetData(Av.mSeriesId,Ao);if(Ap===null){return null;}As=0;if(((Aq.mLayout===Aa.LO_STACKED)||(Aq.mLayout===Aa.LO_PERCENT))&&(!Aq.mShowCumulate)){As=Ap;if(Aq.mLayout===Aa.LO_PERCENT&&Aq.mShowAsPercentage){As/=this.mpABLPlot.getGroupTotals(Ao,Av.mValueAxis);}}else{if(Aq.mLayout===Aa.LO_PERCENT&&!Aq.mShowAsPercentage){As=this.hGetCumulateData(Av.mValueAxis,Av.mDataIndex,Ao);}else{As=this.GetData(An,Ao);if(As===null||As===undefined){return null;}}}Aq.mShowValue=true;if(Aq.mShowValue){Au=this.mpABLPlotContext.mSeriesOptions[Av.mSeriesIndex].mGraphNumberFormat;}if(Aq.mShowLabel){At=this.mDatasetPtr.GetSeriesLabel(Av.mSeriesId,false);}return this.mpABLPlot.createRiserLabel(new AV.TripleId({ObjectId:Ah.DssGraphDataText,SeriesId:Av.mSeriesId,GroupId:Ao}),As,Au,At,Ar);},AddTextToMapAndList:function AL(){},GetIndexFromSeriesId:function Am(Aq){var Ap=this.mSeriesInfo,An=Ap.length,Ao;for(Ao=0;Ao<An;++Ao){if(Ap[Ao].mSeriesId===Aq){return Ao;}}return -1;},AddLegendMarkerToCollection:function w(Ar,Ao,An,Ap,Aq,As){An=An||false;Ap=(Ap===undefined)?true:Ap;Aq=Aq||Ai.DssGraphMarkerShapeRectangle;As=(As===undefined)?true:As;this.mpABLPlot.AddLegendMarkerToCollection(this.mSeriesInfo[Ar].mSeriesId,Ao,An,Ap,Aq,As);},MoveLabel:function AQ(A1,A0,A9,A7,An){var A5=this.mSeriesInfo,A2=this.mpABLPlotContext.mABLOptions,BC,Aw,BB,Au,Az,At,Ao,Av,A4,A6,As,Ar,Aq,A8,BA,Ap,Ay,Ax,A3,BD;if(A0===null||A0===undefined){return ;}BC=this.mpABLPlotContext.mValueAxis[A5[An].mValueAxis].IsReverseOrder();Aw=BC;BB=BC?-1:1;Au=0;BD=this.GetData(An,A1);if(BD!==null&&BD!==undefined){Au=BD;}if(BD&&(Au<0)){BB=-BB;Aw=!Aw;}z.Reset(A9.x,A9.y);L.Reset(A7.x,A7.y);Az=z;At=L;if(this.mIsVertical){if(Aw){if(Az.y<At.y){Az.swapPoints(At);}}else{if(At.y<Az.y){Az.swapPoints(At);}}}else{if(Aw){if(At.x<Az.x){Az.swapPoints(At);}}else{if(Az.x<At.x){Az.swapPoints(At);}}}Ao=A0.GetBoundingRect();Av=Math.floor(Ao.width/2);A4=Math.floor(Ao.height/2);Ac.Reset(Az.x,Az.y);A6=Ac;As=A0.mTripleId;Ar=(As.mObjectId===Ah.DssGraphDataTextStackTotal);Aq=Ar?AN.DssGraphDTPositionOutMax:A2.mTextPosition;if(Aq===AN.DssGraphDTPositionOutMin||Aq===AN.DssGraphDTPositionInMin){A6.x=At.x;A6.y=At.y;}switch(Aq){case AN.DssGraphDTPositionCenter:A6.x=(A6.x+At.x)/2;A6.y=(A6.y+At.y)/2;break;case AN.DssGraphDTPositionInMin:case AN.DssGraphDTPositionOutMax:if(this.mIsVertical){A6.y-=A4*BB;}else{A6.x+=Av*BB;}break;case AN.DssGraphDTPositionOutMin:case AN.DssGraphDTPositionInMax:if(this.mIsVertical){A6.y+=A4*BB;}else{A6.x-=Av*BB;}break;default:break;}if(Ar&&A2.mTextPosition===AN.DssGraphDTPositionOutMax){A8=this.GetUpmostIndexByValueAxisAndGroup(AC.VA_Y1,A1);BA=this.mpManager.GetGraphObject(new AV.TripleId({ObjectId:Ah.DssGraphDataText,SeriesId:A5[A8].mSeriesId,GroupId:A1}));if(!BA){A0.MoveTo(A6.x,A6.y,Ae.CENTER);return ;}Ap=BA.GetBoundingRect();Ay=BA.GetFormatFont();Ax=A0.GetFormatFont();A3=Ay.mFontSize+Ax.mFontSize;if(this.mIsVertical){if(Ay.isHorizontal()||Ax.isHorizontal()){A6.y-=Math.floor(Ap.height+A3/3)*BB;}else{if(Ay.isVertical()){A6.x+=A3;}else{A6.x+=Math.floor(A3*Math.SQRT2);}}}else{if(Ay.isVertical()||Ax.isVertical()){A6.x+=Math.floor(Ap.width+A3/3)*BB;}else{if(Ay.isHorizontal()){A6.y+=A3;}else{A6.y+=Math.floor(A3*Math.SQRT2);}}}}A0.MoveTo(A6.x,A6.y,Ae.CENTER);},updateGroupStackInfoWithBase:function AK(Ay,Ar,A2){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}function A1(A7,A6){var A5=A6+1;for(;A5<A7.length;A5++){if(A7[A5]!==null&&A7[A5]!==undefined){return Math.min(A7[A5],A2);}}return A2;}function As(A7,A6){var A5=A6-1;for(;A5>=0;A5--){if(A7[A5]!==null&&A7[A5]!==undefined){return Math.max(A7[A5],A2);}}return A2;}var Au=this.mStackedGroupInfos,Ao;if(Au[Ay]&&Au[Ay][Ar]){return Au[Ay][Ar];}var Az=Au[Ay],Aw,A3=[],Ap=this.mSeriesInfo,Ax=Ap.length;var At=[],Av=[];for(Aw=0;Aw<Ax;Aw++){var Aq=this.GetData(Aw,Ar),A4={Min:Aq,Max:Aq,SeriesIndex:Aw};(Aq>=0)?At.push(A4):Av.unshift(A4);}Ao=Av.concat(At);var An=[],A0=-1;for(Aw=0;Aw<Ao.length;Aw++){A3[Ao[Aw].SeriesIndex]=Aw;An.push(Ao[Aw].Max);}for(Aw=0;Aw<Ao.length;Aw++){if(Ao[Aw].Max!==null&&Ao[Aw].Max!==undefined){if(Ao[Aw].Max>=A2){Ao[Aw].Min=As(An,Aw);}else{Ao[Aw].Max=A1(An,Aw);}}}Az[Ar]=Ao;Au[Ay+2][Ar]=A3;return Az[Ar];},getGroupStackedInformation:function AU(Az,At){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}var Aq=this.mStackedGroupInfos;if(Aq[Az]&&Aq[Az][At]){return Aq[Az][At];}var An=Aq[Az],Av,Ao=[],Aw=this.mSeriesInfo,As=Aw.length;var Au=[],Ar=[];for(Av=0;Av<As;Av++){var Ax=this.GetData(Av,At,true),Ay=this.GetData(Av,At),Ap={Min:Math.min(Ax,Ay),Max:Math.max(Ax,Ay),SeriesIndex:Av};(Ay>=0)?Au.push(Ap):Ar.unshift(Ap);}An[At]=Ar.concat(Au);for(Av=0;Av<An[At].length;Av++){Ao[An[At][Av].SeriesIndex]=Av;}Aq[Az+2][At]=Ao;return An[At];},getSeriesOffsetIntoStackedInfo:function J(At,Aq,Ao){var As=this.mStackedGroupInfos;if(As[At+2]&&As[At+2][Aq]){return As[At+2][Aq][Ao];}var An=As[At],Ar=An[Aq],Ap;for(Ap=0;Ap<Ar.length;Ap++){if(Ar[Ap].SeriesIndex===Ao){return Ap;}}return Ao;},analyzeGroupInfo:function U(At,As,Ar){this.groupStackAnalysis=this.groupStackAnalysis||[[],[]];if(this.groupStackAnalysis[At][As]){return this.groupStackAnalysis[At][As];}var An=this.groupStackAnalysis[At],Aq=this.getGroupStackedInformation(At,As),Ap,Ao={Reverse:3};if(Aq&&Aq.length){Ap=Aq.length-1;if(Aq[Ap].Max<=Ar){Ao={Reverse:0,CeilUpdated:Ap};}else{if(Aq[0].Min>=Ar){Ao={Reverse:1,FloorUpdated:0};}else{for(Ap=0;Ap<Aq.length;Ap++){if(Aq[Ap].Max>=Ar){Ao.FloorUpdated=Ap;Ao.CeilUpdated=Ap>0?Ap-1:-1;}}}}}else{Ao={Reverse:4};}An[As]=Ao;return An[As];},UpdateCumulateData:function Ab(A3,Ax,A1){var Aw=this.mSeriesInfo,At=this.mDatasetPtr,Ap=this.mGroupCount,Av=this.mCumulateData,A5,Ao,An,A2,A0,Az,Ay,Au=this.mChartContextPtr.IsDualAxis(),A6=A1!==undefined&&A1>=0,Aq,A4,A7,Ar;if(A6){var As=At.GetValueAxisBySeries(A1);if(As!==A3){return Ax;}}A5=Aw.length;if(A5===0){return Ax;}A2=A5;if(Au){Ao=this.mSeriesNumber[0];An=A5-Ao;}for(A0=0;A0<Ap;++A0){Aq=(Ax&&Ax.positive[A0])||0;A4=(Ax&&Ax.negative[A0])||0;for(Az=0;Az<A5;++Az){if(A6){if(Aw[Az].mSeriesId!==A1){continue;}}if(Aw[Az].mValueAxis===A3){A7=At.GetData(Aw[Az].mSeriesId,A0);Ar=0;if(A7!==null&&A7!==undefined){Ar=A7;if(Ar<0){this.mHasNegativeValue=true;Ar+=A4;A4=Ar;}else{Ar+=Aq;Aq=Ar;}}else{Ar=Aq;}if(A6){if(Ar>=0){Ax.positive[A0]=Ar;}else{Ax.negative[A0]=Ar;}if(Au){A2=A3===AC.VA_Y1?Ao:An;}Ay=A0*A2+Aw[Az].mDataIndex;Av[A3][Ay]=Ar;}else{Av[A3].push(Ar);if(Az===A5-1){if(Ar>=0){Ax.positive[A0]=Ar;}else{Ax.negative[A0]=Ar;}}}}}}return Ax;},AddBaseToCumulateData:function AM(Aq,Ap){var An=this.mCumulateData[Aq].length,Ao;for(Ao=0;Ao<An;++Ao){this.mCumulateData[Aq][Ao]+=Ap;}},drawSingleDataPoint:function W(Ay,Ax,Ao,Au){var As=this.mChartContextPtr,A1=As.GetGraphMatrixContext(),Ap=0,A0,Az,A4,At,An,A2,Aw=[],Av=this.mpABLPlot.shownDataLabels;var Aq=A1.mMarkerShape;if(Aq===Ai.DssGraphMarkerShape2DPie||Aq===Ai.DssGraphMarkerShape2DRingPie){if(this.mPieRenderer===null){var A3=0;if(Aq===Ai.DssGraphMarkerShape2DRingPie){A3=1;}this.mPieRenderer=new AV.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:this.mChartContextPtr,Layout:A3,PlotType:b.GMPPT_CATEGORY,ShownDataLabel:Av});}var Ar=this.mPieRenderer;Ap=this.mDatasetPtr.GetPieCountAtOneDataPoint(Ay.mSeriesId,Ay.mGroupId);for(A0=0;A0<Ap;++A0){if(As.checkColorByAndSizeByValue(Ay,this.mDatasetPtr,false,this.mHasSizeBy)===false){Aw.push({Object:null,ShapeSize:At});continue;}if(As.mImageUsage===AB.GENERAL){A4=f.call(this,Ay.mSeriesId,Ay.mGroupId,A0,Ap);An=Ar.drawSinglePie(Ay.mSeriesId,Ay.mGroupId,A0,A4,Ap);for(Az=0;Az<An.length;Az++){if(An[Az]){Aw.push({Object:An[Az],ShapeSize:An[Az].getShapeSize()});}}}else{if(As.mImageUsage===AB.OBJECT_CLIP_COMPUTATION){At=Ar.getShapeSizeAt(Ay.mSeriesId,Ay.mGroupId,A0,!this.mHasSizeBy);Aw.push({Object:null,ShapeSize:At});}}}}else{if(Ao===V._COMBINED){Ao=this.mDatasetPtr.GetShapeByCell(Ay.mSeriesId,Ay.mGroupId);if(Ao===V._GENERIC){Ao=V._CIRCLE;}}A2=this.drawSinglePoint(Ay,Ax,Ao,Au);Aw.push(A2);}return Aw;},drawSinglePoint:function Ag(A2,A1,Aq,A0){var At=(Aq!==undefined)?Aq!==V._LINE:false,Av=this.mChartContextPtr,A5=Av.GetGraphMatrixContext(),Aw=this.mGroupCount,A6,As,Au,A4,Ar,Az,Ap,A3=this.mDatasetPtr.getForecastCount();if(Av.checkColorByAndSizeByValue(A2,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return{Object:null,ShapeSize:0};}if(A0===V._AREA){At=false;}Au=r.call(this,Aq);if(Av.RenderClusterShapes()){if(!(Aw===1&&Aq===2)){Aw*=this.mSeriesInfo.length;}}if(Au===Ai.DssGraphMarkerShapeGMTick){A4=A5.GetMaxMarkerSize(AP._TICK_CATEGORY,Av.IsVertical(),Aw);}else{if(Aq===V._AREA||A0===V._AREA){A4=A5.GetMaxElementSizeInAreaChart(this.mIsVertical,Aw,!At,A3);}else{A4=A5.GetMaxElementSizeInLineChart(this.mIsVertical,Aw,!At,Au);}}As=this.mDatasetPtr.GetGroupCount();if(this.mHasSizeBy){A6=this.mDatasetPtr.GetSizeByData(A2.mSeriesId,A2.mGroupId);if(A6!==null&&A6!==undefined){if(Au===Ai.DssGraphMarkerShapeNone&&(A5.mMaxSizeVal===A5.mMinSizeVal)){if(!At&&As>=3){A4=A5.GetAdjustThicknessValue(A5.mConstants.MinimalSize.General);}A4=Math.round(Math.max(A4,1));}else{A4=A5.GetScaledSize(A6,A4,Aq);A4=Math.max(Math.round(A4),A5.mConstants.MinimalSize.General);}}}if(Av.mImageUsage===AB.OBJECT_CLIP_COMPUTATION){var Ay=A4;if(Au===Ai.DssGraphMarkerShapeGMTick){Ay=Math.round(0.5*(this.mIsVertical?A5.mConstants.FixedTickerSize:A4));}return{Object:null,ShapeSize:Ay};}if(Au===Ai.DssGraphMarkerShapeNone){Au=Ai.DssGraphMarkerShapeCircle;}if(Au===Ai.DssGraphMarkerShapeGMTick){var Ao,An,Ax=Math.round(0.5*A4);if(Av.IsVertical()){Ao={x:A1.x-Ax,y:A1.y};An={x:A1.x+Ax,y:A1.y};}else{Ao={y:A1.y-Ax,x:A1.x};An={y:A1.y+Ax,x:A1.x};}Ar=new AV.StraightLineObject({TripleId:A2,GraphObjectManager:this,StartPoint:Ao,EndPoint:An,GraphCollectionObject:null,Shape:V._TICKER});}else{if(Au===Ai.DssGraphMarkerShapeSquare||Au===Ai.DssGraphMarkerShapeRectangle){Ap=this.mChartContextPtr.transformToRect(A1,A4,true);Ar=new AV.RectangleObject({TripleId:A2,GraphObjectManager:this,GraphCollectionObject:null,Area:Ap,Shape:V._RECTANGLE,hasFill:true});}else{Ar=new AV.MarkerObject({TripleId:A2,GraphObjectManager:this,MarkerPosition:A1,MarkerShape:Au,IsIsometric:true,MarkerSize:A4,GraphCollectionObject:null,IsDialogSize:false,Shape:V._CIRCLE,hasFill:true});}}if(A5.mMarkerShape===Ai.DssGraphMarkerShapeNone){A5.AddToIsolatedDotList(A2);if(A2.mObjectId!==Ah.DssGraphDataMarker){Az=new AV.TripleId({ObjectId:Ah.DssGraphDataMarker,SeriesId:A2.mSeriesId,GroupId:A2.mGroupId});A5.AddToIsolatedDotList(Az);}}return{Object:Ar,ShapeSize:Ar.getShapeSize()};},getCorrectGroupIdInSeriesPoints:function Af(An,Ap){var Ao=this.mGroupIdMapPerSeries[An];if(Ao!==null&&Ao!==undefined){return Ao;}return Ap;},prepareTransitionalGradient:function h(An,As,At){var Aq,Ap,Ar={Effective:false};if(At!==undefined){At=Math.min(As.length,At);}else{At=As.length;}Ar.Colors=[];for(Aq=0;Aq<At;Aq++){var Ao=this.mDatasetPtr.GetColorByData(An.mSeriesId,An.mGroupId+Aq);if(Ao===null){Ao=this.mDatasetPtr.GetDefaultShapeFillColor();}if(Aq===0){Ap=Ao;Ar.StartGraphColor=Ao;}else{if(Aq===At-1){Ar.EndGraphColor=Ao;Ar.Effective=Ar.Effective||Ao!==Ap;}else{Ar.Colors.push({Color:Ao,Step:Aq/(At-1)});Ar.Effective=Ar.Effective||Ao!==Ap;}}}Ar.Style=1;Ar.EndAlpha=255;Ar.Angle=this.mChartContextPtr.IsVertical()?0:1;return Ar;},getMaxElementOffsetClippedByBoundary:function AI(An,Aq,Ao){var Ar=Aq?(Ao?"X1":"X2"):(Ao?"Y1":"Y2");if(this.mClippedMarkerSize[Ar]){var Ap=this.mClippedMarkerSize[Ar];An.LowOffset=Math.max(Ap.LowOffset,An.LowOffset);An.HighOffset=Math.max(Ap.HighOffset,An.HighOffset);}else{An.LowOffset=Math.max(0,An.LowOffset);An.HighOffset=Math.max(0,An.HighOffset);}},CreateOneDataMarker:function F(Ao,Ax,Aw,A3,A0,BA){var A2=this.mSeriesInfo[Ao],As=this.mChartContextPtr,A4=new AV.TripleId({ObjectId:Ah.DssGraphRiser,SeriesId:A2.mSeriesId,GroupId:Ax}),A6=As.GetGraphMatrixContext(),Ay=this.mDatasetPtr,Aq=Ay.GetShapeBySeries(A2.mSeriesId),A7=(Aq===V._LINE||Aq===V._GENERIC),A1=(Aq===V._AREA),At=A6.IsIsolatedDot(A4),Av=A6.mHasSizeBy,A8,Az,An,Au;BA=BA||false;var A9,Ar=Ai.DssGraphMarkerShapeCircle;if(A6.mMarkerShape===Ai.DssGraphMarkerShapeCombined){A8=(Aq===V._CIRCLE||Aq===V._RECTANGLE||Aq===V._SQUARE);}else{A8=(A6.mMarkerShape===Ai.DssGraphMarkerShapeCircle||A6.mMarkerShape===Ai.DssGraphMarkerShapeRectangle||A6.mMarkerShape===Ai.DssGraphMarkerShapeSquare);}A9=(!At&&!A8&&!Av);if(!A9){return ;}An=this.mDatasetPtr.getMarkerShapeInfoAt(A2.mSeriesId,Ax);A9=(An.Show||BA)&&Ar!==undefined;if(!A9){return ;}Ar=An.Shape;Aw=null;var BB=new AV.TripleId({ObjectId:Ah.DssGraphDataMarker,SeriesId:A2.mSeriesId,GroupId:Ax}),A5=An.Size||3;if(BA){Ar=Ai.DssGraphMarkerShapeCircle;A5=A6.mConstants.FixedDataMarkerSize;}if(Ar===Ai.DssGraphMarkerShapeCircle){Az=new AV.MarkerObject({TripleId:BB,MarkerPosition:A3,MarkerShape:Ar,IsIsometric:true,MarkerSize:A5,GraphCollectionObject:Aw,GraphObjectManager:this,IsDialogSize:false,Shape:V._CIRCLE});}else{if(Ar===Ai.DssGraphMarkerShapeRectangle||Ar===Ai.DssGraphMarkerShapeSquare){var Ap=this.mChartContextPtr.transformToRect(A3,A5,true);Az=new AV.RectangleObject({TripleId:BB,GraphObjectManager:this,GraphCollectionObject:Aw,Area:Ap,Shape:V._RECTANGLE});}}Au=this.mGraphObjectList;if(A7){Au.push(Az);}else{if(A1){Au.push(Az);}}},CreateAllDataLabels:function A(){var Aq,Ao,Ar,As,Ax=this.mTextCollection,Ap,Av,Ay=true,Au=this.mDataLabels,At=this.mSeriesInfo,An,Aw;Ar=new AV.TripleId({ObjectId:Ah.DssGraphDataText});if(Ay){As=new AV.GraphCollectionObject({TripleId:Ar,GraphObjectManager:this,CollectionType:AA.CT_TEXT});}for(Aq=0;Aq<At.length;++Aq){Aw=At[Aq].mSeriesId;if(this.mDatasetPtr.showSeriesDatalabel(Aw)===false){continue;}if(!Ay){As=new AV.GraphCollectionObject({TripleId:Ar,GraphObjectManager:this,CollectionType:AA.CT_TEXT});}Ax.push(As);for(Ao=0;Ao<this.mGroupCount;++Ao){Ap=this.mDatasetPtr.GetData(Aw,Ao);if(Ap!==undefined&&Ap!==null){Av=this.CreateOneDataLabel(Aw,Ao,Ap,As);if(Av!==null&&Av!==undefined){An=new AV.GMDataLabelInfo({SeriesId:Aw,GroupId:Ao,SeriesInfo:Aq,isValid:true,Label:Av});Av.mIsShown=false;Au.push(An);this.AddToMapAndList(Av);}}}}},hGetCumulateData:function Y(Ap,Ao,An){return this.mCumulateData[Ap][An*this.mSeriesNumber[Ap]+Ao];},GetAccompanyPoints:function Ad(Ap,Ar){var Aq=new AV.Point2D(),An=new AV.Point2D(),Ao={};Aq.x=Ap.x;Aq.y=Ap.y;An.x=Ap.x;An.y=Ap.y;if(this.mIsVertical){Aq.y-=Ar;An.y+=Ar;}else{Aq.x-=Ar;An.x+=Ar;}Ao.lowPoint=Aq;Ao.highPoint=An;return Ao;},CreateOneDataLabel:function Aj(A1,Ar,An,Ax){var As=An,Av="",Ay,Au,Ap,A2,Aq,A0,Az,At,Aw,Ao;Au=new AV.TripleId({ObjectId:Ah.DssGraphDataText,SeriesId:A1,GroupId:Ar});Aq=this.mDatasetPtr;Az=this.mpABLPlotContext;At=Az.mABLOptions;Aw=At.mLayout;if(Aw===Aa.LO_STACKED||Aw===Aa.LO_PERCENT){As=Aq.GetData(A1,Ar);}A0=Aq.dataLabelStyle;switch(A0){case y:Ay=this.mSeriesInfo[0].mValueAxis;s.restore();Aq.getGridDataFormat(s,A1,Ar,0);Ap=new AV.NumberObject({TripleId:Au,GraphObjectManager:this,Number:As,NumberFormat:s,GraphCollectionObject:Ax,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(Ap){Av=Ap.mText;A2=Ap;}break;case G:Av=this.mDatasetPtr.GetTextLabel(A1,Ar);A2=new AV.TextObject({TripleId:Au,GraphObjectManager:this,GraphCollectionObject:Ax});break;}if(Av.length!==0){A2.SetText(Av);return A2;}return null;},Draw:function AX(){this._super();a.call(this);R.call(this);},updateSeriesRenderSequence:function t(Ao,Au,Aq){var As,Ap,Ar=0,At=this.renderSequence,An=At.length;if(Aq===undefined){Aq=true;}Au=Aq?Au:0;for(As=0;As<An;As++){Ap=At[As];if(Ap!==null&&Ap!==undefined){Ar++;Ao[As]=Ap+Au;}}if(Aq){return Au+Ar;}return 0;},populateRenderSequence:function AZ(Ar){if(Ar){this.renderSequence=Ar;}else{var Ao,Ap=this.renderSequence,Aq=this.mSeriesInfo,An=Aq.length;Ap.splice(0,Ap.length);for(Ao=0;Ao<An;Ao++){Ap[Aq[Ao].mSeriesId]=Ao;}}},evalBarStyleUnitWidth:function H(An,Aq,As){var At=this.mChartContextPtr,Ap=At.GetGraphMatrixContext(),Ao={unitWidth:0,columns:1,riserGap:0,groupGap:0,overlapRatio:0,gapRatio:10};if(As===undefined){As=10;var Ar=Ap.mElementsInfo;if(Ar.Max.Mode===AH._MANUAL){As=Ar.Max.Size*100;if(As<1){As=1;}if(As>100){As=99;}Ao.gapRatio=100-As;}}else{Ao.gapRatio=As;}Ao.columns=Aq||this.mSeriesInfo.length;Ao.unitWidth=(An*(1-Ao.gapRatio/100)/Ao.columns);if(At.mIsGraphMatrix){if(Ao.unitWidth>2){Ao.unitWidth-=1;}if(Ap.mElementsInfo.Max.Mode===AH._AUTOMATIC){Ao.unitWidth=Math.min(Ao.unitWidth,Ap.mConstants.MaximalSize.Bar);}if(this.mHasSizeBy===false){if(!At.isCompactMode()){Ao.unitWidth=Math.max(Ao.unitWidth,Ap.mConstants.MinimalSize.Bar);}}Ao.gapRatio=(1-Ao.unitWidth*Ao.columns/An)*100;Ao.riserGap=0;Ao.groupGap=An*Ao.gapRatio/100;}return Ao;},GenerateTrendLine:function K(){var A7=this.mpABLPlotContext,Ax,A8,Au=A7.mCategoryAxisPtr,BJ,BH,BF,A2,BG,BM,A1,BD,BI=this.mDatasetPtr,A4=this.mChartContextPtr,A3=this.mSeriesInfo,Av=A3.length,Ap,A5,BB,Aq,At,A6,A9=[],Aw,BA,BL,BC,Ao,An,Ay,Az,Ar,BK,A0={},BE={},As={};if(BI.isBare(A4.IsPieChart())){return ;}if(Au.mAxisInfo.mAxisDirection===AY.AD_X){A8=true;}else{A8=false;}for(BJ=0;BJ<Av;++BJ){A9=[];Ap=A3[BJ];A5=Ap.mSeriesId;Ax=BI.GetTrendLineOfSeries(A5);Aq=Ap.mValueAxis;At=A7.mValueAxis[Aq];Aw=new AV.TripleId({ObjectId:Ah.DssGraphTrendLine,SeriesId:A5});if(!!Ax===false){continue;}A2=Ax.getTrendLineType();if(A2===O.DssGraphRegressionNone){continue;}BC=Ax.getIdentity();BM=Ax.getTrendLineValuesWithForecast();A1=Ax.getTrendLineValues();BG=Ax.getSeasonalityType();if(B(A1)<=1){continue;}if(!!BM===false||BM.length===0){continue;}BD=BM.length;if(A2===O.DssGraphRegressionLinear){if(BG!==0){for(BH=0;BH<BD;++BH){BB=BM[BH];if(BB!==null&&BB!==undefined){A6=k.call(this,BJ,BH,BB,At,A8,true);if(A6.x!==null&&A6.y!==null){A9.push(A6);}else{AD.visPrint("Trendline point calculation abnormal:");AD.visPrint("\tseries #: "+BJ+", data point #:"+BH);AD.visPrint("\tvalue = "+BB);AD.visPrint("\tx = "+A6.x+", y = "+A6.y);}}}A9=c.call(this,A9);BK=A9.length;if(BK>=2){Az=A9[0].x;Ar=A9[BK-1].x;Ao=(Az+Ar)/2;for(BJ=0;BJ<BK;++BJ){if(A9[BJ].x===Ao){An=A9[BJ].y;break;}else{if(BJ<BK-1&&A9[BJ].x<Ao&&A9[BJ+1].x>Ao){Ay=(A9[BJ+1].y-A9[BJ].y)/(A9[BJ+1].x-A9[BJ].x);An=A9[BJ].y+Ay*(Ao-A9[BJ].x);break;}}}BE.x=Ao;BE.y=An;}}else{for(BH=0;BH<BD;++BH){BB=BM[BH];if(BB!==null&&BB!==undefined){A6=k.call(this,BJ,BH,BB,At,A8,true);if(A6.x!==null&&A6.y!==null){A9.push(A6);break;}else{AD.visPrint("Trendline point calculation abnormal:");AD.visPrint("\tseries #: "+BJ+", data point #:"+BH);AD.visPrint("\tvalue = "+BB);AD.visPrint("\tx = "+A6.x+", y = "+A6.y);}}}for(BF=BD-1;BF>BH;--BF){BB=BM[BF];if(BB!==null&&BB!==undefined){A6=k.call(this,BJ,BF,BB,At,A8,true);if(A6.x!==null&&A6.y!==null){A9.push(A6);break;}else{AD.visPrint("Trendline point calculation abnormal:");AD.visPrint("\tseries #: "+BJ+", data point #:"+BF);AD.visPrint("\tvalue = "+BB);AD.visPrint("\tx = "+A6.x+", y = "+A6.y);}}}BK=A9.length;if(BK>=2){Ao=(A9[0].x+A9[1].x)/2;An=(A9[0].y+A9[1].y)/2;BE.x=Ao;BE.y=An;}}if(BK>=2){A0.x=A9[0].x;A0.y=A9[0].y;As.x=A9[BK-1].x;As.y=A9[BK-1].y;BA=new AV.PolyLineObject({TripleId:Aw,GraphObjectManager:this,PolyLine:A9,Shape:V._LINE,Identity:BC,startPoint:A0,midPoint:BE,endPoint:As});if(BA!==null){this.mTrendLineObjects.push(BA);}}}else{for(BH=0;BH<BD;++BH){BB=BM[BH];if(BB!==null&&BB!==undefined){A6=k.call(this,BJ,BH,BB,At,A8,false);if(A6.x!==null&&A6.y!==null){A9.push(A6);}else{AD.visPrint("Trendline point calculation abnormal:");AD.visPrint("\tseries #: "+BJ+", data point #:"+BH);AD.visPrint("\tvalue = "+BB);AD.visPrint("\tx = "+A6.x+", y = "+A6.y);}}}if(A9.length>=2){BL=new AV.CurveLineObject({TripleId:Aw,GraphObjectManager:this,Points:A9,IsVertical:A8,Identity:BC,Shape:V._CURVE});if(BL!==undefined&&BL!==null){this.mTrendLineObjects.push(BL);}}}}},GenerateRefLine:function C(){var Ar=this.mpABLPlotContext,Av=this.mChartContextPtr,A9=Av.mGraphWidth,BG=Av.mGraphHeight,A2=this.mSeriesInfo.length,Aq,A5,BD,BA,Aw,BE,A6,BI,BB=[],As,BC,A3,Ap,A8,BK,Au,At,BJ,BF,Ao,Ax={},BH,An,A0=this.mDatasetPtr,Az,A1=[],Ay,A7=A0.GetSeriesCount()*A0.GetGroupCount();if(Av.mPartialRendering===false){A7=this.mpABLPlot.DPCount;}for(BD=0;BD<A2;++BD){A5=this.mSeriesInfo[BD];Aq=A5.mSeriesId;A3=A0.GetReferenceLinesOfSeries(Aq);Aw=A5.mValueAxis;BE=Ar.mValueAxis[Aw];An={};An.Condense=BE.mCondenseLabels;if(!An.Condense){if(BE.mNumberFormat.isDefault){var A4=new AV.ChartAdvFormat();Av.getAxisAutoNumberFormat(A4,BE.mPrimaryMetrics);BE.mNumberFormat=A4;}An.NumberFormat=BE.mNumberFormat.mCustomFormat;}Ay=A3.length;for(BA=0;BA<Ay;++BA){BB=[];BC=A3[BA];if(BC){BK=BC.getIdentity();A6=BC.getReferenceLineValue();BI=BC.getReferenceLineDirection();Az=(BI!=="horizontal");Ap=BC.getReferenceLineLabel(false,false,An);Au=BC.getRefLineLabelIdentity();if(A7===0){continue;}As=new AV.TripleId({ObjectId:Ah.DssGraphReferenceLine,SeriesId:Aq,GroupId:BA});BH=new AV.TripleId({ObjectId:Ah.DssGraphRefLineText,SeriesId:Aq,GroupId:BA});if(A6!==null&&A6!==undefined){BJ=BE.GetPositionByValue(A6);if(BJ!==null&&BJ!==undefined){BF=1;if(Az){if(BJ===0){BJ=1;}else{if(BJ===A9){--BJ;}}Ao=BG-1;BB.push(new AV.Point2D({x:BJ,y:BF}));BB.push(new AV.Point2D({x:BJ,y:Ao}));Ax.x=BJ;Ax.y=(BB[0].y+BB[1].y)/2;}else{if(BJ===0){BJ=1;}else{if(BJ===BG){--BJ;}}Ao=A9-1;BB.push(new AV.Point2D({x:BF,y:BJ}));BB.push(new AV.Point2D({x:Ao,y:BJ}));Ax.x=(BB[0].x+BB[1].x)/2;Ax.y=BJ;}At=new AV.StraightLineObject({TripleId:As,GraphObjectManager:this,StartPoint:BB[0],EndPoint:BB[1],GraphCollectionObject:null,Identity:BK,Shape:V._LINE,MidPoint:Ax});if(At!==null){if(!At.mFormatLinePtr){At.mFormatLinePtr=new AV.FormatLine();}this.mReferenceLineObjects.push(At);A1.push({tripleId:BH,identity:Au,isVertical:Az,position:BJ,labelText:Ap});}}else{AD.visPrint("Reference line point calculation abnormal:");AD.visPrint("\tseries #: "+BD+"ref line #: "+BA);AD.visPrint("\tvalue = "+A6);AD.visPrint("\ty = "+BJ);}}}}}u.call(this,BG,A9,A1);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","Point2D","RectangleObject","TextObject","NumberObject","GraphCollectionObject","GridDataLabelInfo","GridBasePlot","CategoryAxis","PiePlotRenderer","MarkerObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixElementSizeMode","EnumGraphMatrixMarkerTypeInChart","EnumAnchorPoint");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.common","Utility","MapStructure");var X=mstrmojo.chart,U=X.ChartConstants,J=X.enums,r=J.EnumAnchorPoint,C=J.EnumCollectionType,Q=J.EnumGraphMatrixMarkerTypeInChart,q=J.EnumGraphMatrixElementSizeMode,V=J.EnumGraphMatrixPiePlotType,S=mstrmojo.chart.model,O=S.enums,w=O.EnumDSSGraphMarkerShape,u=O.EnumDSSGraphObject,x=O.EnumShapeType,B=X.common,F=B.Utility,W=F.tripleId;var P=new X.Rect2D(),AI=new X.Point2D(),AG=new X.Point2D(),t=new X.ChartAdvFormat(),s=new X.Point2D();var L=0,e=1,c=2;var M=1,N=2,Y=3;function K(AL,AK){if(AL.mYIndex===AK.mYIndex){return AL.mXIndex-AK.mXIndex;}return AL.mYIndex-AK.mYIndex;}function AC(){var AK=this.mXAxis,AQ=this.mYAxis,AO=this.mDatasetPtr;if(this.mPartialRendering){var AM=this.mChartContextPtr,AS={PartialRendering:true,Group:{},Series:{}},AL,AP,AT,AN,AR=AM.mRenderingWindow;AL=AR.x;AP=AL+AR.width;AT=AR.y;AN=AT+AR.height;if(AK){AP=AK.getGroupSlotAt(AP)+1;AL=AK.getGroupSlotAt(AL)-1;}if(AQ){AN=AQ.getGroupSlotAt(AN)+1;AT=AQ.getGroupSlotAt(AT)-1;}if(this.mDatasetPtr.GetSeriesByColumn()){if(AQ){AS.Group.Max=AN;AS.Group.Min=AT;}if(AK){AS.Series.Max=AP;AS.Series.Min=AL;}}else{if(AQ){AS.Series.Max=AN;AS.Series.Min=AT;}if(AK){AS.Group.Max=AP;AS.Group.Min=AL;}}AO.updateDataWindow(AS);}else{AO.resetDataWindow();}}function AD(AR){if(!AR){var AM=this.mChartContextPtr.GetGraphMatrixContext(),AQ=AM.mElementsInfo;if(this.mMarkerShape===w.DssGraphMarkerShapeRectangle){var AP=AQ.Max.Size,AN=1;var AL=this.mAutoFitMarkerRect;this.mAdjustMarkerRect=new X.Rect2D({Rect2D:AL});var AK=this.mAdjustMarkerRect;if(AQ.Max.Mode===q._MANUAL){AN=Math.min(AN,AP);if(AN<1){AK.width=AL.width*AN;AK.height=AL.height*AN;}}}if(this.mMarkerShape===w.DssGraphMarkerShapeGMTick){var AO=new X.Rect2D();AO.width=AM.mConstants.FixedTickerSize;AO.height=AM.GetMaxMarkerSize(Q._TICK_CATEGORY,false,this.mYArity);this.mAdjustMarkerRect=AO;}}return this.mAdjustMarkerRect;}function n(){var AK=this.mSeriesSet.length,AM=this.mDatasetPtr.GetGroupCount(),AL=this.mDatasetPtr;if(this.mIsSeriesByCol){this.mXArity=AK;this.mYArity=AM;}else{this.mXArity=AM;this.mYArity=AK;}if(this.mXArity===0&&!this.mHasXAxis){this.mXArity=1;}if(this.mXArity===0&&!AL.mHasMetrics){this.mXArity=1;}if(this.mYArity===0&&!this.mHasYAxis){this.mYArity=1;}if(this.mYArity===0&&!AL.mHasMetrics){this.mYArity=1;}}function AF(){return this.mDatasetPtr.IsGridPieAngleBreakX();}function j(){var AM=this.mChartContextPtr,AP=AM.GetGraphMatrixContext(),AL=AP.mElementsInfo,AU=0,AS=this.mMarkerShape,AW=AS===w.DssGraphMarkerShape2DPie||AS===w.DssGraphMarkerShape2DRingPie,AR=1,AK=1,AO=2500,AQ=1,AX,AV,AN;if(AS!==w.DssGraphMarkerShapeRectangle){if(this.mHasXAxis){AV=this.mXAxis.getGroupSize();}else{AV=this.mDataArea.width;}if(this.mHasYAxis){AN=this.mYAxis.getGroupSize();}else{AN=this.mDataArea.height;}if(AW){if(AL.Max.Mode===q._AUTOMATIC){AO=250;}AU=this.mDatasetPtr.GetAngleNumber();var AT=AF.call(this);if(AT){AR=AU;}else{AK=AU;}if(AL.Max.Mode===q._AUTOMATIC){AQ=this.mDatasetPtr.showDatalabels()?0.5:0.9;if(AQ<0){AQ=0.1;}AQ=Math.min(AQ,1);}}if(AL.Max.Mode===q._MANUAL){AQ=AL.Max.Size;if(AQ<0){AQ=0.1;}AQ=Math.min(AQ,1);}AX=0.5*Math.min(AV/AR,AN/AK);if(AS!==w.DssGraphMarkerShapeCircle||AX>=4){AX-=1;}AX=Math.max(AX,1);AX*=AQ;AX=Math.min(AX,AO);AX=Math.max(AX,1);return Math.floor(AX);}return 1;}function E(){var AP=this.mDatasetPtr,AN=this.mDataArea,AO=this.mXAxis,AM=this.mYAxis,AL=this.mAutoFitMarkerRect,AQ=this.mChartContextPtr,AK=this.mpManager.mPlotOption;this.mIsAutoFitMode=AK.mIsAutoFitMode;this.mMaxDataVal=AK.mMaxDataVal;this.mMinDataVal=AK.mMinDataVal;this.mUniformColorMode=AP.GetSeriesByColumn()?c:e;if(this.mHasXAxis){AL.width=AO.getGroupSize();}else{AL.width=AN.width;}if(this.mHasYAxis){AL.height=AM.getGroupSize();}else{AL.height=AN.height;}this.mMarkerShape=AK.mMarkerShape;if(this.mMarkerShape===w.DssGraphMarkerShapeNone){this.mMarkerShape=w.DssGraphMarkerShapeRectangle;}this.mIsSeriesByCol=AP.GetSeriesByColumn();if(this.mHasXAxis){this.mPreXCoord=AO.getGroupStartPos(0);}else{this.mPreXCoord=AN.x;}if(this.mHasYAxis){this.mPreYCoord=AM.getGroupStartPos(0);}else{this.mPreYCoord=AN.y;}n.call(this);AD.call(this,false);this.mMinMarkerSize=1;this.mMaxMarkerSize=j.call(this);this.mDataGroup=AP.GetDataGroup();}function d(AK,AL){if(this.mHasColorBy===false){return this.mMarkerCollectionSet[0]||null;}return null;}function f(AK,AM,AL){if(!AL){return ;}if(this.mLegendPtr===null||this.mLegendPtr===undefined){return ;}if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function k(AP,AL,AO,AK){var AN=AP?AK.x:AK.y,AQ=0,AM;if(AP){AQ=AL?this.mXAxis.getGroupMiddlePos(AO+1):this.mXAxis.getGroupMiddlePos(AO-1);AM=(AQ+AN)/2;}else{AQ=AL?this.mYAxis.getGroupMiddlePos(AO+1):this.mYAxis.getGroupMiddlePos(AO-1);AM=(AQ+AN)/2;}var AR=AM-Math.floor(AM);if(AR!==0){AM-=0.5;}if(AM===0){AM=1;}return AM;}function Z(AX,AV){var AZ=1,AP=0,AS=x._RECTANGLE,AL=false,AO=this.mDatasetPtr.dataProvider;AI.x=this.mXAxis.getGroupMiddlePos(AX);AI.y=this.mYAxis.getGroupMiddlePos(AV);P.Reset(0,0,0,0);if(this.mMarkerShape===w.DssGraphMarkerShapeRectangle){if(this.mXArity*this.mYArity===1){P=AD.call(this,true);}else{var AU=0,AN=0;if(!this.resizerLine){this.resizerLine=AO.getResizerLineThickNess();}if(!this.chartInfo){this.chartInfo=AO.getChartRowColCount();}if(AX===0){AU=this.mDataArea.x+AZ+AP;AN=k.call(this,true,true,AX,AI);}else{if(AX===this.mXArity-1){AU=k.call(this,true,false,AX,AI);AN=this.mDataArea.x+this.mDataArea.width;}else{AU=k.call(this,true,false,AX,AI);AN=k.call(this,true,true,AX,AI);}}if(AX===this.mXArity-1){if(AO.colIndex!==this.chartInfo.cir-1){AN-=this.resizerLine.MATRIX_VLINE_THICKNESS;}else{AN-=parseInt(this.resizerLine.MATRIX_VLINE_THICKNESS/2);}}P.x=AU;P.width=AN-AU;P.width=Math.max(0,P.width);if(AV===0){AU=this.mDataArea.y+AZ;AN=k.call(this,false,true,AV,AI);}else{if(AV===this.mYArity-1){AU=k.call(this,false,false,AV,AI);AN=this.mDataArea.y+this.mDataArea.height;}else{AU=k.call(this,false,false,AV,AI);AN=k.call(this,false,true,AV,AI);}}if(AO.rowIndex!==0&&AV===0){AU+=this.resizerLine.MATRIX_HLINE_THICKNESS;}if(AO.rowIndex===this.chartInfo.cic-1&&AV===this.mYArity-1){AN-=this.resizerLine.AXIS_X_THICKNESS;}P.y=AU;P.height=AN-AU;P.height=Math.max(0,P.height);if(P.width>AZ){P.width-=AZ+AP*2;}if(P.height>AZ){P.height-=AZ+AP;}}}else{AL=true;AS=x._TICKER;var AW=AD.call(this,true);AG.x=AG.y=0;if(this.mHasXAxis){AG.x=this.mXAxis.getGroupMiddlePos(AX);}else{AG.x=this.mDataArea.GetCenter().x;}if(this.mHasYAxis){AG.y=this.mYAxis.getGroupMiddlePos(AV);}else{AG.y=this.mDataArea.GetCenter().y;}P.width=AW.width;P.height=AW.height;P.x=AG.x-0.5*P.width;P.y=AG.y-0.5*P.height;}if(this.mMinDataVal===this.mMaxDataVal){return P;}var AR=this.mChartContextPtr.GetGraphMatrixContext(),AQ=AR.mElementsInfo.Max;if(this.mIsAutoFitMode){if(AQ.Mode===q._AUTOMATIC){return P;}if(AQ.Mode===q._MANUAL&&AQ.Size===1){return P;}}var AM,AK;if(AQ.Mode===q._MANUAL&&AQ.Size!==1){var AT=AQ.Size;AM=Math.round((1-AT)*0.5*P.width);AK=Math.round((1-AT)*0.5*P.height);P.x+=AM;P.y+=AK;P.width-=2*AM;P.height-=2*AK;}if(this.mIsAutoFitMode){return P;}var AY=0;if(this.mIsSeriesByCol){AY=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AX],AV);}else{AY=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AV],AX);}AM=0.5*P.width;AK=0.5*(P.height-AR.GetScaledSize(AY,P.height,AS)+0.5);if(AL){P.x+=AM-1;P.y+=AK;P.width=AR.mConstants.FixedTickerSize;}else{AM=0.5*(P.width-AR.GetScaledSize(AY,P.width,AS)+0.5);P.x+=AM;P.y+=AK;P.width-=2*AM;}P.height-=2*AK;return P;}function z(AM,AP,AW,AN,AL,AT){var AR=-1,AQ=-1,AK,AU,AO,AV,AS=new X.Point2D({x:-1,y:-1});if(this.mHasXAxis){AR=this.mXAxis.getSubGroupMiddlePos(AM,AW,AL);}else{AK=this.mDataArea.x;AO=this.mDataArea.width/AL;AR=AK+AO*AW+AO/2;}if(this.mHasYAxis){AQ=this.mYAxis.getSubGroupMiddlePos(AP,AN,AT);}else{AV=this.mDatasetPtr.GetSeriesCount();AK=this.mDataArea.y;AU=this.mDataArea.height/AV;AO=this.mDataArea.height/AT/AV;AQ=AK+AU*AP+AO*AN+AO/2;}if(AR>=0&&AQ>=0){AS.x=AR;AS.y=AQ;}return AS;}function R(AT,AO,AW){var AU=[AT,AO,AW],AS,AN,AQ,AL,AP,AM=1,AR=1;if(this.mPieCentersPool===null){this.mPieCentersPool=new B.MapStructure();}var AK=this.mPieCentersPool.find(AU);if(AK!==null&&AK!==undefined){return AK;}AN=AO;AL=AW;AQ=AT;AP=AW;var AV=this.mDatasetPtr.GetPieCountAtOneDataPoint(AT,AO);if(AF.call(this)){AL=AW;AM=AV;}else{AP=AW;AR=AV;}AS=z.call(this,AN,AQ,AL,AP,AM,AR);this.mPieCentersPool.replace(AU,AS);return AS;}function h(AL,AO){var AN=this.mDataArea,AM=AL,AK=AO;if(this.mIsSeriesByCol){if(this.mHasXAxis){AM=this.mSeriesSet.length>AL?this.mSeriesSet[AL]:AL;}AK=AO;}else{AM=AL;if(this.mHasYAxis){AK=this.mSeriesSet.length>AO?this.mSeriesSet[AO]:AO;}}if(this.mHasXAxis){s.x=this.mXAxis.getGroupMiddlePos(AM);}else{s.x=AN.x+AN.width/2;}if(this.mHasYAxis){s.y=this.mYAxis.getGroupMiddlePos(AK);}else{s.y=AN.y+AN.height/2;}return s;}function p(AL,AQ){var AK,AP,AN=x._SQUARE,AM=this.mChartContextPtr.GetGraphMatrixContext(),AO=AM.mMarkerShape;if(this.mIsAutoFitMode){AK=this.mMaxMarkerSize;}else{if(this.mMinDataVal===this.mMaxDataVal){return this.mMaxMarkerSize;}if(AO===w.DssGraphMarkerShapeCircle){AN=x._CIRCLE;}else{if(AO===w.DssGraphMarkerShape2DPie||AO===w.DssGraphMarkerShape2DRingPie){AN=x._PIE;}}if(this.mIsSeriesByCol){AP=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AL],AQ);}else{AP=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AQ],AL);}AK=AM.GetScaledSize(AP,this.mMaxMarkerSize,AN);}return AK;}function A(AS,AR){var AQ=this.mChartContextPtr,Ac=u.DssGraphRiser,AZ,AW,AP=this.mMarkerShape,AU=(AP===w.DssGraphMarkerShape2DPie||AP===w.DssGraphMarkerShape2DRingPie),AM=null,AO,AY,Ad,AK,AT=[],AL;AZ=(this.mSeriesSet.length>AS)?this.mSeriesSet[AS]:AS;AW=new X.TripleId({ObjectId:Ac,SeriesId:AZ,GroupId:AR});if(!this.mIsSeriesByCol){AW.mSeriesId=(this.mSeriesSet.length>AR)?this.mSeriesSet[AR]:AR;AW.mGroupId=AS;}if(this.mDatasetPtr&&this.mDatasetPtr.useSliceWindow){if(this.mDatasetPtr.IsInSlicedWindow(AW.mSeriesId,AW.mGroupId)===false){return AT;}}if(AQ.checkColorByAndSizeByValue(AW,this.mDatasetPtr,this.mHasColorBy&&!AU,this.mHasSizeBy)===false){return AT;}var AN=x._RECTANGLE,Ae=d.call(this,AS,AR);f.call(this,AS,AR,Ae);if(AP===w.DssGraphMarkerShapeRectangle||AP===w.DssGraphMarkerShapeGMTick){AL=Z.call(this,AS,AR);if(AP===w.DssGraphMarkerShapeGMTick){AN=x._TICKER;}if(AL.width<=0){AL.width=1;}if(AL.height<=0){AL.height=1;}if(AP===w.DssGraphMarkerShapeRectangle){AM=new X.RectangleObject({TripleId:AW,GraphObjectManager:this,Area:AL,GraphCollectionObject:Ae,IsOnlyForToolTip:false,Shape:AN});}else{var AX=AQ.transformRectToTicker(AL,false);if(AX.length>=2){AM=new X.StraightLineObject({TripleId:AW,GraphObjectManager:this,StartPoint:AX[0],EndPoint:AX[1],GraphCollectionObject:null,Shape:AN});}else{return AT;}}}else{if(AU){var Ab=0;if(AP===w.DssGraphMarkerShape2DRingPie){Ab=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new X.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:AQ,Layout:0,PlotType:V.GMPPT_GRID,MaxRadius:this.mMaxMarkerSize,ShownDataLabels:this.shownDataLabels});}AO=this.mDatasetPtr.GetPieCountAtOneDataPoint(AW.mSeriesId,AW.mGroupId);for(AY=0;AY<AO;++AY){Ad=R.call(this,AW.mSeriesId,AW.mGroupId,AY);AK=this.mPieRenderer.drawSinglePie(AW.mSeriesId,AW.mGroupId,AY,Ad,AO);AT=AT.concat(AK);}}else{var AV=h.call(this,AS,AR),Aa=p.call(this,AS,AR);if(Aa<=0){return AT;}if(AP===w.DssGraphMarkerShapeSquare){AL=this.mChartContextPtr.transformToRect(AV,Aa,true,AL);AM=new X.RectangleObject({TripleId:AW,GraphObjectManager:this,GraphCollectionObject:null,Area:AL,Shape:AN});}else{AN=x._CIRCLE;AM=new X.MarkerObject({TripleId:AW,MarkerPosition:AV,MarkerShape:AP,IsIsometric:true,MarkerSize:Aa,GraphObjectManager:this,GraphCollectionObject:Ae,Shape:AN});}}}if(AT.length===0&&AM){AT.push(AM);}return AT;}function o(AM,AQ,AP,AK,AO){var AN=new X.TripleId(u.DssGraphDataText,AP,AK);t.restore();this.mDatasetPtr.getSizeByDataFormat(t,AP,AK);var AL=new X.NumberObject({TripleId:AN,GraphObjectManager:this,Number:AM,NumberFormat:t,GraphCollectionObject:AO,Locale:0,clientDrag:false,DataSet:null});if(AL){AQ=AL.mText;}return AQ;}function D(AQ,AP){var AN="",AS=(this.mSeriesSet.length>AQ)?this.mSeriesSet[AQ]:AQ,AM=AP,AO=this.mChartContextPtr.GetGraphMatrixContext(),AL=this.mDatasetPtr,AR=AL.dataLabelStyle;if(!this.mIsSeriesByCol){AS=(this.mSeriesSet.length>AP)?this.mSeriesSet[AP]:AP;AM=AQ;}if((AR===N)&&AO.mHasSizeBy){var AK;if(this.mIsSeriesByCol){AK=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AQ],AP);}else{AK=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AP],AQ);}if(!!AK===false){return null;}AN=o.call(this,AK,AN,AS,AM,null);}var AT=new X.TextObject({TripleId:new X.TripleId({ObjectId:u.DssGraphDataText,SeriesId:AS,GroupId:AM}),GraphObjectManager:this,OnMarker:true});AT.SetText(AN);return AT;}function a(AL,AO){if(this.mMarkerShape===w.DssGraphMarkerShapeRectangle||this.mMarkerShape===w.DssGraphMarkerShapeGMTick){return new X.Rect2D({Rect2D:Z.call(this,AL,AO)});}var AK=h.call(this,AL,AO),AM=p.call(this,AL,AO),AN=Math.floor(AM+0.5);return new X.Rect2D({x:AK.x-AN,y:AK.y-AN,width:AN*2,height:AN*2});}function l(){var AN,AK,AP=this.mXArity,AM=this.mYArity,AQ;for(AN=0;AN<AP;++AN){for(AK=0;AK<AM;++AK){var AR=(this.mSeriesSet.length>AN)?this.mSeriesSet[AN]:AN;var AL=AK;if(!this.mIsSeriesByCol){AR=(this.mSeriesSet.length>AK)?this.mSeriesSet[AK]:AK;AL=AN;}if(this.mDatasetPtr.showSeriesDatalabel(AR)===false){continue;}var AO=new X.GridDataLabelInfo();AO.mIsValid=true;AO.mGroupId=AL;AO.mSeriesId=AR;AO.mXIndex=AN;AO.mYIndex=AK;AO.mHostMarkerBound=a.call(this,AN,AK);AO.mLabelPtr=D.call(this,AN,AK);if(AO.mLabelPtr===null||AO.mLabelPtr===undefined){AO.mIsValid=false;continue;}else{}this.mDataLabels.push(AO);}}}function AE(){var AM,AK=286,AR=this.mChartContextPtr,AO=AR.GetGraphMatrixContext(),AL,AN,AP=this.mMarkerCollectionSet;AP.splice(0,AP.length);var AQ;if(this.mHasColorBy){return ;}if(AR.mIsGraphMatrix){AN=AO.markerToShape(AO.mMarkerShape);}if(AN!==x._PIE){AM=W.create(AK,0,0);AL=new X.GraphCollectionObject({TripleId:AM,GraphObjectManager:this,CollectionType:C.CT_GENERAL_SHAPE,Shape:AN});AP.push(AL);}else{}}function g(AL){var AM=this.mDataLabels,AO=AM[AL].mHostMarkerBound,AN={x:AO.x+0.5*AO.width,y:AO.y+0.5*AO.height},AP=AN.x,AK=AN.y;AP+=AO.width%2;AK+=AO.height%2;AM[AL].mLabelPtr.MoveTo(AP,AK,r.CENTER);}function I(AK,AL){return AL*this.mXArity+AK;}function AH(AK,AL){return new X.Rect2D({x:AK.x-AL,y:AK.y-AL,width:AK.width+2*AL,height:AK.height+2*AL});}function G(AL,AM){var AK=new X.Rect2D({x:0,y:0,width:this.mChartContextPtr.mGraphWidth,height:this.mChartContextPtr.mGraphHeight});if(AL.x<AK.x+AM||AL.x+AL.width+AM>=AK.x+AK.width){return false;}return !(AL.y<AK.y+AM||AL.y+AL.height+AM>=AK.y+AK.height);}function H(){var AT,AR,AK=this.mDataLabels,Aa=AK.length,AN=this.mChartContextPtr,AZ=AN.GetGraphMatrixContext(),AO=AZ.getPadding(U.kDataLabel),AY,AU,AS,AW,Ab={};for(AY=0;AY<Aa;++AY){AW=I.call(this,AK[AY].mXIndex,AK[AY].mYIndex);Ab[AW]=AY;}for(AY=0;AY<Aa;++AY){var AL,AX,AV,AP,AM=false;g.call(this,AY);if(!AN.allowOverlapBetweenDatalabels()){AL=this.mDataLabels[AY].mLabelPtr.GetBoundingRectNoRotation(true);AV=AH.call(this,AL,AO);AX=G.call(this,AL,AO);if(!AX){continue;}AT=AK[AY].mXIndex;AR=AK[AY].mYIndex;for(AU=AT-1;AU<=AT+1;AU++){if(AU<0||AU>=this.mXArity){continue;}for(AS=AR-1;AS<=AR+1;AS++){if(AS<0||AS>=this.mYArity){continue;}if(AU===AT&&AS===AR){continue;}AW=I.call(this,AU,AS);AP=Ab[AW];if(AP>=AK.length){continue;}if(!!AK[AP]===false){continue;}if(AK[AP].mIsValid===false||!!AK[AP].mLabelPtr===false){continue;}AM=AV.HasIntersection(AK[AP].mHostMarkerBound);if(AM){break;}if(AK[AP].mIsDisPlayed){var AQ=AK[AP].mLabelPtr.GetBoundingRectNoRotation(true);AM=AM||AV.HasIntersection(AQ);}if(AM){break;}}if(AM){break;}}}if(!AM){AK[AY].mIsDisPlayed=true;AK[AY].mLabelPtr.mIsShown=true;this.AddToMapAndList(this.mDataLabels[AY].mLabelPtr);}else{AK[AY].mLabelPtr.mIsShown=false;}}}function b(){var AP,AK=this.mChartContextPtr;if(AK.mIsGraphMatrix){var AQ=AK.GetGraphMatrixContext();if(this.mDatasetPtr.showDatalabels()){var AL=this.dataLabelManager;if(AL===null||AL===undefined){AP=new X.Rect2D({x:0,y:0,width:AK.mGraphWidth,height:AK.mGraphHeight});AL=this.dataLabelManager=new X.DataLabelManager({DataArea:AP});AL.ChartContext=AK;}if(AQ.mMarkerShape===w.DssGraphMarkerShape2DPie||AQ.mMarkerShape===w.DssGraphMarkerShape2DRingPie){var AO=[];this.mPieRenderer.enableDataLabel(AL,AO);var AM,AR=this.mPieRenderer.dataLabels,AN=AR.length;for(AM=0;AM<AN;++AM){var AS=AR[AM].Label;if(AS.mIsShown){this.AddToMapAndList(AS);}}}else{l.call(this);this.mDataLabels.sort(K);H.call(this);}}}}mstrmojo.chart.GridChartPlot=mstrmojo.declare(mstrmojo.chart.GridBasePlot,null,{scriptClass:"mstrmojo.chart.GridChartPlot",mXArity:0,mYArity:0,mDataGroup:1,mIsSeriesByCol:false,mIsAutoFitMode:false,mDataLabelTextMode:0,mMaxDataVal:0,mMinDataVal:0,mMaxMarkerSize:0,mMinMarkerSize:0,mPreXCoord:0,mPreYCoord:0,mUniformColorMode:0,mSeriesSet:null,mMarkerCollectionSet:null,mAutoFitMarkerRect:null,mAdjustMarkerRect:null,mDataLabels:null,mPieRenderer:null,mPieCentersPool:null,init:function AB(AK){this._super(AK);this.mSeriesSet=[];this.mMarkerCollectionSet=[];this.mDataLabels=[];this.mAutoFitMarkerRect=new X.Rect2D();this.mAdjustMarkerRect=new X.Rect2D();},AssignSeries:function y(AK){this.mSeriesSet=AK.slice();},GetMaxElementRadius:function AJ(){if(this.mMarkerShape===w.DssGraphMarkerShapeRectangle){return Math.min(this.mAdjustMarkerRect.width,this.mAdjustMarkerRect.height);}return this.mMaxMarkerSize;},GenerateMapAndList:function AA(){var AN=this.mDatasetPtr,AK=this.mDataArea,AP,AO,AL,AR,AS;if(AN===null||AN===undefined){return ;}if((AN.mHasMetrics)&&(this.mSeriesSet.length===0)){return ;}if(AK.width*AK.height===0){return ;}AC.call(this);E.call(this);AE.call(this);AR=this.mXArity;AS=this.mYArity;for(AP=0;AP<AR;++AP){for(AO=0;AO<AS;++AO){var AM=A.call(this,AP,AO),AQ=AM.length;for(AL=0;AL<AQ;++AL){this.AddToMapAndList(AM[AL]);}}}if(this.mChartContextPtr.mImageUsage===0){b.call(this);}AN.resetDataWindow();}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","CategoryAxis","PlotManager","GridChartPlot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,K=O.enums,A=K.EnumOrientation,E=K.EnumDSSGraphObjectManager,H=O.model,P=H.enums,D=P.EnumDSSGraphProperty;var C=new O.Rect2D(),B=new O.Rect2D();mstrmojo.chart.PlotOption=mstrmojo.provide("mstrmojo.chart.PlotOption",{});function R(S){var U,V;if(this.mChartContextPtr.mIsGraphMatrix){V=O.PlotId0;}else{V=new O.TripleId();V.mObjectId=E.DssPlot;V.mSeriesId=S;}U=new O.GridChartPlot({TripleId:V,GraphObjectManager:this,Area:O.gEmptyRect});U.SetDataset(this.mDatasetPtr);return U;}function Q(V,S){var U=this.mChartAreaOptions.chartAreaNumber,X=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet,W;X[0].SetDeviceDataArea(V);for(W=0;W<U;++W){this.mPlots[W].AssignDataArea(S[W],!this.mIsReuseYAxis);}}function N(a,W){if(W){var Y=new O.Rect2D({Rect2D:a}),b=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;b[0].AdjustTitleArea(Y);b[0].AdjustDataArea(Y,0,0,true);return Y;}var Z=!(this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet,c=Z.length,S=[],X,V;this.CalculateChartAreas(a,S);for(V=0;V<c;++V){Z[V].AdjustTitleArea(S[V]);Z[V].AdjustDataArea(S[V],0,0,true);}X=S;var U=X.length;C.Reset(0,0,0,0);B.ResetRect(X[0]);for(V=1;V<U;++V){if(!this.RectangleIntersection(B,X[V],C)){B.Reset(0,0,0,0);break;}B.ResetRect(C);}return B;}function F(S){var U=new O.CategoryAxisInfo(),V,Y,W,X=this.mDatasetPtr.GetSeriesByColumn();if(this.mIsReuseYAxis){U.ToY(!X);}else{U.ToX(X);}V=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;if(V.length===0){Y=new O.CategoryAxis({TripleId:U.mId,GraphObjectManager:this,AxisLabelsLocation:U.mAxisLabelsLocation,AxisDirection:U.mAxisDirection});Y.SetDataset(this.mDatasetPtr);V.push(Y);}this.mPlots[S].AssignAxis(V[0],this.mIsReuseYAxis);if(this.mIsReuseYAxis){U.ToX(X);}else{U.ToY(!X);}U.mId.mSeriesId=S;W=(!this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet;Y=new O.CategoryAxis({TripleId:U.mId,GraphObjectManager:this,AxisLabelsLocation:U.mAxisLabelsLocation,AxisDirection:U.mAxisDirection});Y.SetDataset(this.mDatasetPtr);W.push(Y);this.mPlots[S].AssignAxis(W[S],!this.mIsReuseYAxis);}function M(){var S=this.mChartContextPtr.GetGraphMatrixContext();if(S){this.mPlotOption.mIsAutoFitMode=!S.mHasSizeBy;this.mPlotOption.mMaxDataVal=S.mMaxSizeVal;this.mPlotOption.mMinDataVal=S.mMinSizeVal;this.mPlotOption.mMarkerShape=S.mMarkerShape;}}mstrmojo.chart.GridChartPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.GridChartPlotManager",mPlots:null,mXAxisSet:null,mYAxisSet:null,mIsReuseYAxis:false,mPlotOption:{},init:function L(S){this._super(S);this.mPlots=[];this.mXAxisSet=[];this.mYAxisSet=[];this.mPlotOption={mIsAutoFitMode:false,mMaxDataVal:100000,mMinDataVal:0,mMarkerShape:4};this.mIsReuseYAxis=false;},Draw:function J(){this._super();var V=this.mYAxisSet.length,W=this.mXAxisSet.length,U=this.mPlots.length,S;for(S=0;S<V;++S){this.mYAxisSet[S].Draw();}for(S=0;S<W;++S){this.mXAxisSet[S].Draw();}for(S=0;S<U;++S){this.mPlots[S].Draw();}},LoadProperties:function G(){this._super();this.mIsReuseYAxis=(this.mChartAreaOptions.mOrientation===A.OR_HORIZONTAL);M.call(this);},GenerateMapAndList:function I(){var S=this.mPlotArea,e=this.mChartAreaOptions,U=this.mGraphObjectManagerList,V=this.mChartContextPtr,Z,b;if(S.width*S.height===0){return ;}if(this.mDatasetPtr===null||this.mDatasetPtr===undefined){return ;}this.LoadProperties();var f=e.chartAreaNumber;for(Z=0;Z<f;++Z){var X=R.call(this,Z);X.AssignSeries(e.seriesDistribution[Z]);X.mLegendPtr=this.mLegendPtr;this.mPlots.push(X);F.call(this,Z);}b=this.mPlots.length;for(Z=0;Z<b;++Z){U.push(this.mPlots[Z]);}b=this.mXAxisSet.length;for(Z=0;Z<b;++Z){U.push(this.mXAxisSet[Z]);}b=this.mYAxisSet.length;for(Z=0;Z<b;++Z){U.push(this.mYAxisSet[Z]);}var d=N.call(this,S,true),W=N.call(this,d,false);if(W.width<0){W.width=0;}if(W.height<0){W.height=0;}var c=S.y+Math.max(d.y-S.y,W.y-d.y),g=S.y+S.height-Math.max(S.y+S.height-(d.y+d.height),d.y+d.height-(W.y+W.height))-c;W.y=c;W.height=g;if(V.mManualLayoutMode&&!this.mRecalculateFrame){W=S;}else{}var Y=[];this.CalculateChartAreas(W,Y);if(V.isUADataAreaOutput()){var a=V.getUniformAxisContext();Y[0].x=a.mDataAreaLeftMargin;Y[0].y=a.mDataAreaTopMargin;Y[0].width=V.mGraphWidth-Y[0].x-a.mDataAreaRightMargin;Y[0].height=V.mGraphHeight-Y[0].y-a.mDataAreaBottomMargin;this.mXAxisSet[0].TrimAxisPadding(Y[0],false);this.mYAxisSet[0].TrimAxisPadding(Y[0],false);W=Y[0];}Q.call(this,W,Y);b=this.mPlots.length;for(Z=0;Z<b;++Z){this.mPlots[Z].GenerateMapAndList();}b=this.mXAxisSet.length;for(Z=0;Z<b;++Z){this.mXAxisSet[Z].GenerateMapAndList();}b=this.mYAxisSet.length;for(Z=0;Z<b;++Z){this.mYAxisSet[Z].GenerateMapAndList();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","MarkerObject","NumberObject","Point2D","SeriesRenderer","PolyLineObject","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumAttachedPointsStyle","EnumImageUsage","EnumGraphMatrixElementSizeMode","EnumValueAxis");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType","EnumDSSExtraGraphProperty");var g=mstrmojo.chart,O=g.enums,E=O.EnumCollectionType,AE=O.EnumDSSExtraGraphObject,q=O.EnumMajorGraphType,Q=O.EnumLayout,J=O.EnumOrientation,F=O.EnumValueAxis,P=O.EnumAttachedPointsStyle,L=O.EnumImageUsage,AL=O.EnumGraphMatrixElementSizeMode,AD=g.gNullGroupId,a=g.model,S=a.enums,AH=S.EnumDSSGraphMarkerShape,AG=S.EnumDSSGraphObject,AI=S.EnumShapeType;var K=new g.TripleId(),V=new g.Point2D(),C=new g.Point2D();V.Reset(-2,-2);C.Reset(-1,-1);V.dangling=true;C.isNull=true;mstrmojo.chart.LineSeriesOptions=mstrmojo.provide("mstrmojo.chart.LineSeriesOptions",{});function c(){if(this.mExpectedLineCount===undefined){var AW=this.mSeriesInfo,AV,AY,AU=0,AX=this.mDatasetPtr,AT=AW.length;for(AV=0;AV<AT;AV++){AY=AW[AV].mSeriesId;if(AX.GetShapeBySeries(AY)===AI._LINE){AU++;}}this.mExpectedLineCount=AU;}return this.mExpectedLineCount;}function e(){return{mShowStepLine:false,mShowMarkers:true,mMarkerShape:0,mMarkerSize:50};}function AS(AX){if(!this.mSupportDiscretePoints){return ;}var AT=[],AV=0,AY=new g.Point2D(),Ab=this.mVecGroupIdMapPerSeries,AU,AZ;if(this.discreteMatrix===undefined){this.discreteMatrix=[];}var AW=[];Ab.splice(0,Ab.length);AZ=this.mGroupCount;for(AU=0;AU<AZ;++AU){if(this.GetLinePoint(AX,AU,AY)){AT[AV]=AU;AV++;}else{if(AT.length>0){var Aa=AT.concat();Ab.push(Aa);}AT.splice(0,AT.length);AV=0;AW.push(AU);}}AW.push(AZ);this.discreteMatrix[AX]=AW;if(AT.length>0){Ab.push(AT);}}function AA(){if(this.mChartContextPtr.mUseAnimation){return this.mProgress===1;}return true;}function j(){return true;}function M(Aa,AX){var AW=-1,AV,AT,AU=this.clusterInfo,AY=this.mpABLPlotContext,AZ=AY.mCategoryAxisPtr;AV=this.mSeriesInfo[Aa].mDataIndex;if(AU.Circle){AW=AU.Circle.indexOf(AV);}if(AW===-1&&AU.Tick){AW=AU.Tick.indexOf(AV);}if(AW===-1&&AU.Square){AW=AU.Square.indexOf(AV);}if(AW===-1){AW=AV%AU.columns;}AT=AZ.getGroupStartPos(AX)+0.5*AU.groupGap+(AU.unitWidth+AU.riserGap)*AW+0.5*AU.unitWidth;AT=Math.floor(AT+0.5);return AT;}function AB(AX,Aa,AV){var AT=this.mChartContextPtr;if(AT.RenderClusterShapes()&&this.mpABLPlotContext.takeGroupCenter===false){if(this.clusterInfo===undefined){var AW,AU=this.mDatasetPtr.GetClusterSeriesCount(),Ab=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),Ad=this.evalBarStyleUnitWidth(Ab,AU);this.clusterInfo=mstrmojo.hash.copy(Ad);if(AW){var Ac=this.clusterInfo;Ac.Circle=AW.Circle.concat();Ac.Tick=AW.Tick.concat();Ac.Square=AW.Square.concat();}}var AY=M.call(this,AX,Aa),AZ=new g.Point2D({Point2D:AV});if(this.mIsVertical){AZ.x=AY;}else{AZ.y=AY;}return AZ;}return AV;}function N(Af,AU,Ae,Ac){var Ak,At,Aq,Ao,Am,Aj,An,AX=false,AZ,AV=Af.shape,AY,Ai,Ap=Ae[Ac],AW=this.mChartContextPtr,Ad=this.mDatasetPtr,Ag=this.mSinglePointObjects,As=AW.GetGraphMatrixContext(),Au,Ar;At=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AU].mValueAxis];if(At){AX=true;Ak=At.GetMaxMinDataInputPosition();AY=Ak.LowBoundary;Ai=Ak.HighBoundary;An="y1";var AT=At.mTripleId.mObjectId;An=AW.getAxisKeyFromObjectId(AT);AZ=this.mClippedMarkerSize[An];}Au=Ap.length;var Av;var Ah,Al,Ab,Aw,Aa;for(Aq=0;Aq<Au;++Aq){Am=new g.TripleId({ObjectId:AG.DssGraphRiser,SeriesId:this.mSeriesInfo[AU].mSeriesId,GroupId:this.getCorrectGroupIdInSeriesPoints(Aq,Ac)});Av=Ap[Aq];Aj=this.drawSingleDataPoint(Am,Av,AV);Ar=Aj.length;for(Ao=0;Ao<Ar;++Ao){if(Aj[Ao].Object){this.AddToMapAndList(Aj[Ao].Object);}}Ah=Ad.showSeriesDatalabel(Am.mSeriesId);if(Aj.length>0){if(Aj[0].Object!==null&&Aj[0].Object!==undefined&&Ah){Ag.push(Aj[0].Object);}Af.AlreadyInMapAndList=true;Af.Obj=Aj[0];if(AX){Ar=Aj.length;for(Ao=0;Ao<Ar;++Ao){Al=Aj[Ao];Ab=AZ.LowOffset;Aw=AZ.HighOffset;Aa=Al.ShapeSize;if(Aa===undefined){if(Al.Object){Aa=Al.Object.getShapeSize();}else{Aa=0;}}Ak=As.getClippedOffset(AY,Ai,Aa,Ap[Aq],!AW.IsVertical(),Ab,Aw);AZ.LowOffset=Ab=Ak.LowOffset;AZ.HighOffset=Aw=Ak.HighOffset;}}}}Af.AlreadyInMapAndList=true;Af.Obj=null;return Af;}function AC(AW){var AZ=this.mChartContextPtr,AU,AX=[];if(AZ.mIsGraphMatrix&&this.mGroupCount===1){AU=new g.Point2D();if(!this.GetLinePoint(AW,0,AU)){return ;}AX.push(AU);var AY=[];AY.push(AX);var AT={};var AV=k.call(this,AW);AT.shape=AV;N.call(this,AT,AW,AY,0);if(AT.AlreadyInMapAndList===false){this.AddToMapAndList(AT.Obj);}}}function p(Aa,AV,AU){var AT,AX,AZ=true,AW=0,AY=100;for(AT=0;AT<AU;++AT){AX=this.mDatasetPtr.GetSizeByData(Aa,AV+AT);if(AX!==null){if(AZ){AW=AX;AZ=false;}else{if(AW!==AX){return true;}}}if(AT>AY){return true;}}return false;}function I(Ak,Aa,AY,AU,AT){var AW=this.mChartContextPtr,Ah=Aa[AY],Af=new g.TripleId({ObjectId:AG.DssGraphDataLine,SeriesId:this.mSeriesInfo[AU].mSeriesId,GroupId:AY}),Ac,Ag,AZ=this.mDatasetPtr,Aj;Af.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Af.mGroupId);Ac=new g.PolyLineObject({TripleId:Af,GraphObjectManager:this,PolyLine:Ah,GraphCollectionObject:this.mLineCollections[AU],Shape:AI._LINE});Ag=Ac.mFormatLinePtr;Ac.movePointsAgainstBorder();Ah=Ac.mLinePoints;var Ad=Ak&&this.mDatasetPtr.isGradientABL();if(Ad){var Ai,AX,Ab=Ah.length,Ae,AV={Valid:true,Angle:AW.IsVertical()?0:1,EndAlpha:255,Style:1,Colors:[],Start:{x:Ah[0].x,y:Ah[0].y},End:{x:Ah[Ab-1].x,y:Ah[Ab-1].y}};Aj=Ah.length;for(Ai=0;Ai<Aj;++Ai){AX=Ai/(Ah.length-1);Ae=AZ.GetColorByData(Af.mSeriesId,Af.mGroupId+Ai);AV.Colors.push({Step:AX,Color:Ae});}Ac.mFormatLinePtr=Ag.transformToGradient(AV);this.AddToMapAndList(Ac);}if(AZ.showSeriesDatalabel(Af.mSeriesId)){this.mPolyLineObjects.push(Ac);}return{Obj:Ac,AlreadyInMapAndList:Ad};}function n(AT,Aa,AW,AZ,AY){var AX=this.mChartContextPtr.GetGraphMatrixContext(),Ab=AX.GetScaledSizeWithRatio(AW,Aa)/2,AV=new g.Point2D({Point2D:AT}),AU=new g.Point2D({Point2D:AT});if(this.mIsVertical){AV.y-=Ab;AU.y+=Ab;}else{AV.x-=Ab;AU.x+=Ab;}AZ.x=AV.x;AZ.y=AV.y;AY.x=AU.x;AY.y=AU.y;}function y(AY,Ag,AZ){var Ab=this.mChartContextPtr.GetGraphMatrixContext(),AT=Ab.mElementsInfo.Min.Mode,AU,AW,AX=[],Aa=[],Ad=0,Ac,Af,AV,Ah,Ae;Ae=Ag.length;for(AW=0;AW<Ae;++AW){AU=Ag[AW];Ac=this.mDatasetPtr.GetSizeByData(AY.mSeriesId,AY.mGroupId+AW);if(Ac!==null){Ad=Ab.ToRatioEx(Ac,(AT===AL._PROPORTIONAL));if(Ad<0){Ad=0;}}Af=new g.Point2D();AV=new g.Point2D();n.call(this,AU,AZ,Ad,Af,AV);AX.push(Af);Aa.push(AV);}Aa.reverse();Ah=AX.concat(Aa);return Ah;}function W(Au,Ah,Af,AV,AU){var Ag=this.mDatasetPtr,Ad=Ah[Af],Ap,Ao,Aq,Ai,AY,AW=null,AZ=this.mChartContextPtr,Ae=this.mSeriesInfo,As=AZ.GetGraphMatrixContext(),Ak=As.GetAdjustThicknessValue(AU),An=new g.TripleId({ObjectId:AG.DssGraphRiser,SeriesId:Ae[AV].mSeriesId,GroupId:Af}),At,Al,Aa,Aj,Ac,Am,AT;An.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,An.mGroupId);Ai=y.call(this,An,Ad,Ak);if(AZ.mImageUsage===L.GENERAL){AW=new g.PolygonObject({TripleId:An,GraphObjectManager:this,Polygon:Ai,Shape:AI._POLYGON});AW.mPointsStyle=P.TOOLTIP_TRAPEZOID;}var Ar=this.mpABLPlotContext.mValueAxis[Ae[AV].mValueAxis];if(Ar){Al=Ar.GetMaxMinDataInputPosition();Aa=Al.LowBoundary;Aj=Al.HighBoundary;AT=Ar.mTripleId.mObjectId;Am=AZ.getAxisKeyFromObjectId(AT);Ac=this.mClippedMarkerSize[Am];}if(Au&&AW){Ao=AW.mFormatFillPtr;AY=this.prepareTransitionalGradient(An,Ad);Aq=Ao.transformToGradient(AY);AW.SetFormatFill(Aq);}At=Ai.length;var Ab,AX=2+2;for(Ap=0;Ap<At;++Ap){Ab=this.mChartContextPtr.IsVertical()?Ai[Ap].y:Ai[Ap].x;if(this.mChartContextPtr.IsVertical()){if(Ab<Aj){Ac.HighOffset=Math.max(Ac.HighOffset,Aj-Ab);Ac.HighOffset=Math.max(Ac.HighOffset,AX);}if(Aa<Ab){Ac.LowOffset=Math.max(Ac.LowOffset,Ab-Aa);Ac.LowOffset=Math.max(Ac.LowOffset,AX);}}else{if(Ab-Aj>0){Ac.HighOffset=Math.max(Ac.HighOffset,Ab-Aj);Ac.HighOffset=Math.max(Ac.HighOffset,AX);}if(Aa-Ab>0){Ac.LowOffset=Math.max(Ac.LowOffset,Aa-Ab);Ac.LowOffset=Math.max(Ac.LowOffset,AX);}}}if(AW){this.AddToMapAndList(AW);if(Ag.showSeriesDatalabel(An.mSeriesId)){this.mPolygonObjects.push(AW);}}return{Obj:AW,AlreadyInMapAndList:true};}function x(AW,AX,AU){var AV=this.mChartContextPtr,AY=4,Aa=AV.GetGraphMatrixContext(),AZ=Aa.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount,false,AH.DssGraphMarkerShapeNone),AT=false,Ab=true;if(this.mHasSizeBy){Ab=(AZ<=AY)&&!p.call(this,this.mSeriesInfo[AW].mSeriesId,this.getCorrectGroupIdInSeriesPoints(0,AX),AU[AX].length);if(Aa.mMaxSizeVal===Aa.mMinSizeVal){AZ=Math.max(Aa.mElementsInfo.Max.Size,Aa.mConstants.MinimalSize.Line);}}AT=AT||this.mHasColorBy;if(Ab){return I.call(this,AT,AU,AX,AW,AZ);}return W.call(this,AT,AU,AX,AW,AZ);}function k(AU){var AY=this.mChartContextPtr,AW=AY.GetGraphMatrixContext(),AV,AT=AW.mMarkerShape;if(AY.mIsGraphMatrix){if(AY.isCombinationChart()){var AX=this.mDatasetPtr;AU=this.mSeriesInfo[AU].mSeriesId;AV=AX.GetShapeBySeries(AU);return AV;}switch(AT){case AH.DssGraphMarkerShapeCircle:return AI._CIRCLE;case AH.DssGraphMarkerShapeRectangle:case AH.DssGraphMarkerShapeSquare:return AI._SQUARE;case AH.DssGraphMarkerShape2DPie:case AH.DssGraphMarkerShape2DRingPie:return AI._PIE;case AH.DssGraphMarkerShapeGMTick:return AI._TICKER;default:return AI._LINE;}}else{return 0;}}function U(AV,AW,AT){var AU=this.mChartContextPtr,AX,AY,Aa=AU.mIsGraphMatrix,Ab={Obj:null,AlreadyInMapAndList:false};if(Aa){var AZ=k.call(this,AV);Ab.shape=AZ;if(AT[AW].length===1){if(this.mDatasetPtr.ShouldTakeGroupCenter()&&AU.isCombinationChart()){if(Ab.shape===AI._LINE){Ab.shape=AI._CIRCLE;}}return N.call(this,Ab,AV,AT,AW);}switch(AZ){case AI._CIRCLE:case AI._SQUARE:case AI._PIE:case AI._TICKER:case AI._COMBINED:return N.call(this,Ab,AV,AT,AW);default:return x.call(this,AV,AW,AT);}}AX=new g.TripleId({ObjectId:AG.DssGraphDataLine,SeriesId:this.mSeriesInfo[AV].mSeriesId,GroupId:AW});AY=new g.PolyLineObject({TripleId:AX,GraphObjectManager:this,PolyLine:AT[AW],GraphCollectionObject:this.mLineCollections[AV]});Ab.Obj=AY;return Ab;}function B(AV,AU){var Aa=this.discreteMatrix,AX=0,AW,AY,Ab;if(Aa&&Aa[AV]){Ab=Aa[AV];AY=Ab.length;for(AW=0;AW<AY;AW++){if(AU>=AX&&AU<Ab[AW]){return AW;}AX=Ab[AW];}}var AT=[],AZ;AX=0;this.GetLinePointSet(AV,AT);AZ=AT.length;for(AW=0;AW<AZ;++AW){if(AU>=AX&&AU<AX+AT[AW].length){return AU;}AX+=AT[AW].length;}return AU;}function w(AY,AV,AX){var AT,AU=new g.Point2D(),AW=new g.Point2D();AU.x=AV.x;AU.y=AV.y;AW.x=AV.x;AW.y=AV.y;AT={HighPoint:AU,LowPoint:AW};if(AY){AW.y-=AX;AU.y+=AX;}else{AW.x-=AX;AU.y+=AX;}return AT;}function h(AV,AX,AU){var AT=this.mChartContextPtr.GetGraphMatrixContext(),AW=AT.GetScaledSizeWithRatio(AU,AX)/2;return w.call(this,this.mIsVertical,AV,AW);}function H(AZ,Ah){var AT=new g.Point2D(),AW,Ad=true,Ab=this.mChartContextPtr.GetGraphMatrixContext(),AU=Ab.mElementsInfo.Min.Mode,Aa,Ai,Ae,AY=0,Ag,Ac=1,Af,AX,AV={};this.GetLinePoint(AZ,Ah,AT);AW=Ab.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount);if(Ab.mHasSizeBy){Ad=false;if(Ab.mMaxSizeVal===Ab.mMinSizeVal){AW=Math.max(Ab.mElementsInfo.Max.Size,Ab.mConstants.MinimalSize.Line);Ad=true;}}if(Ad){AX=B.call(this,AZ,Ah);Aa=new g.TripleId({ObjectId:AG.DssGraphDataLine,SeriesId:this.mSeriesInfo[AZ].mSeriesId,GroupId:AX});Ai=this.GetGraphObject(Aa);if(Ai!==undefined&&Ai!==null){Ae=Ai.mFormatLinePtr;AW=Ae.mLineThickness;AY=AW/2;}Ag=w.call(this,this.mIsVertical,AT,AY);}else{Af=this.mDatasetPtr.GetData(this.mSeriesInfo[AZ].mSeriesId,Ah,Ab.mSizeIndex,false);if(Af!==null&&Af!==undefined){Ac=Ab.ToRatioEx(Af,(AU===AL._PROPORTIONAL));if(Ac<0){Ac=0;}}Ag=h.call(this,AT,AW,Ac);}AV.XCenterOffset=(Ag.HighPoint.x-Ag.LowPoint.x)/2;AV.YCenterOffset=(Ag.HighPoint.y-Ag.LowPoint.y)/2;return AV;}function AP(Af){var AZ=new g.TripleId({ObjectId:AG.DssGraphRiser,SeriesId:Af.SeriesId,GroupId:Af.GroupId}),AU=this.mChartContextPtr,Ac=AU.GetGraphMatrixContext(),Ad=Ac.IsIsolatedDot(AZ),AV,AT=new g.Point2D(),Ae=0,AY=0,AX,Aa,AW=this.mDatasetPtr,Ab;if(this.GetLinePoint(Af.SeriesInfo,Af.GroupId,AT)){if(Ac.mMarkerShape===AH.DssGraphMarkerShapeCombined){Ab=AW.GetShapeBySeries(Af.SeriesId);AV=(Ab===AI._CIRCLE||Ab===AI._RECTANGLE||Ab===AI._TICKER||Ab===AI._SQUARE);}else{AV=(Ac.mMarkerShape===AH.DssGraphMarkerShapeCircle||Ac.mMarkerShape===AH.DssGraphMarkerShapeRectangle||Ac.mMarkerShape===AH.DssGraphMarkerShapeGMTick||Ac.mMarkerShape===AH.DssGraphMarkerShapeSquare);}if(Ad||AV){AX=this.GetGraphObject(AZ);if(AX!==null&&AX!==undefined){if(AX.mMarkerSize!==undefined&&AX.mMarkerSize!==null&&AX.MarkerPosition!==undefined&&AX.MarkerPosition!==null){Ae=AX.mMarkerSize;AY=Ae;AT.x=AX.MarkerPosition.x;AT.y=AX.MarkerPosition.y;}else{if(AX instanceof mstrmojo.chart.RectangleObject&&AX.mRect!==undefined&&AX.mRect!==null){Ae=AX.mRect.width/2;AY=AX.mRect.height/2;AT.x=AX.mRect.x+Ae;AT.y=AX.mRect.y+AY;}else{if(AX instanceof mstrmojo.chart.StraightLineObject){AT.x=0.5*(AX.mDeviceStartPoint.x+AX.mDeviceEndPoint.x);AT.y=0.5*(AX.mDeviceStartPoint.y+AX.mDeviceEndPoint.y);}}}}}else{Aa=H.call(this,Af.SeriesInfo,Af.GroupId);if(Aa!==null&&Aa!==undefined){Ae=Aa.XCenterOffset;}AY=Aa.YCenterOffset;}Af.HostMarkerPoint=AT;Af.CenterXOffset=Ae;Af.CenterYOffset=AY;return true;}return false;}function b(){var AV,AU=this.mDataLabels,AT=AU.length;for(AV=0;AV<AT;++AV){AU[AV].isValid=AP.call(this,AU[AV]);}}function X(){var AT=this.mpABLPlot.dataLabelManager,AV=this.mChartContextPtr,AU=new g.Rect2D({x:0,y:0,width:AV.mGraphWidth,height:AV.mGraphHeight});if(AT===null||AT===undefined){AT=this.mpABLPlot.dataLabelManager=new g.DataLabelManager({DataArea:AU});AT.ChartContext=AV;}AT.SinglePointObjects=AT.SinglePointObjects.concat(this.mSinglePointObjects);AT.PolyLineObjects=AT.PolyLineObjects.concat(this.mPolyLineObjects);AT.PolygonObjects=AT.PolygonObjects.concat(this.mPolygonObjects);AT.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AT;}function o(){var AW=this.mDataLabels.length,AV,AU,AT;for(AT=0;AT<AW;++AT){AU=this.mDataLabels[AT];if(AU.display){AV=AU.GroupId;this.CreateOneDataMarker(AU.SeriesInfo,AU.GroupId,this.mMarkerCollections[AU.SeriesInfo],AU.HostMarkerPoint,AV,true);}}}function AQ(AT){var AU=this.mChartContextPtr,AX=this.mDatasetPtr,Aa=AU.GetGraphMatrixContext(),Ad,Ab,AV=this.mpABLPlot;if(AU.mIsGraphMatrix){Ab=AX.showDatalabels();Ad=(Aa.mMarkerShape===AH.DssGraphMarkerShape2DPie||Aa.mMarkerShape===AH.DssGraphMarkerShape2DRingPie);}if(Ab){var AW=AV.dataLabelManager;if(AW===null||AW===undefined){var AZ=new g.Rect2D({x:0,y:0,width:AU.mGraphWidth,height:AU.mGraphHeight});AW=AV.dataLabelManager=new g.DataLabelManager({DataArea:AZ});AW.ChartContext=AU;}if(Ad){var Ag=this.mPieRenderer;Ag.enableDataLabel(this.mpABLPlot.dataLabelManager,AT);var AY,Ac=Ag.dataLabels,Af,Ae=Ac.length;for(AY=0;AY<Ae;++AY){Af=Ac[AY].Label;if(Af.mIsShown){this.AddToMapAndList(Af);}}}else{this.CreateAllDataLabels();b.call(this);AW=X.call(this);AW.PlaceDataLabels(this.mDataLabels,AT);o.call(this);}}}mstrmojo.chart.LineSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.LineSeriesRenderer",mLineCollections:null,mMarkerCollections:null,mVecSeriesPoints:null,mLineSeriesOptions:null,mDepth:0,mInitialized:false,mIsByValueAxis:false,mGroupIdMapPerSeries:null,mVecGroupIdMapPerSeries:null,mHasCreatedMarkers:false,mDataLabels:null,mSinglePointObjects:null,mPolyLineObjects:null,mPolygonObjects:null,init:function AN(AT){this._super(AT);this.mDepth=this.mpABLPlot.unitLevelDepth;this.mLineCollections=[];this.mMarkerCollections=[];this.mVecSeriesPoints=[];this.mLineSeriesOptions=[];this.mGroupIdMapPerSeries=[];this.mVecGroupIdMapPerSeries=[];this.mSupportDiscretePoints=this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];this.mSinglePointObjects=[];this.mPolyLineObjects=[];this.mPolygonObjects=[];},GenerateMapAndList:function AM(AV){var AZ=this.mChartContextPtr,AU,AW,AY=mstrmojo.chart.RenderLayer2,AX=this.mSeriesInfo,AT=this.mLineSeriesOptions;if(AX.length===0){return ;}for(AU=0;AU<AX.length;++AU){AT.push(e());if(AZ.mIsGraphMatrix){AT[this.mLineSeriesOptions.length-1].mShowMarkers=false;}this.loadSeriesProperties(AU);}this.GenerateLineCollections();this.GenerateMarkerCollections();AW=new g.GraphObjectAggregation({TripleId:AY,GraphObjectManager:this});this.mGraphObjectList.push(AW);this.GenerateInterpolationFrame(1);if(AZ.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AZ.mImageUsage===L.GENERAL){this.CreateAllSeriesLabels(AV);this.GenerateTrendLine();this.GenerateRefLine();this.populateRenderSequence();}},GenerateByValueAxis:function z(AW,AT){var AV=this.mSeriesInfo,AU;if(AV.length===0){return ;}if(!this.mInitialized){for(AU=0;AU<AV.length;++AU){this.mLineSeriesOptions.push(e());this.loadSeriesProperties(AU);}this.GenerateLineCollections();this.GenerateMarkerCollections();this.mInitialized=true;this.mIsByValueAxis=true;}this.mGraphObjectList.push(new g.GraphObjectAggregation({TripleId:new g.TripleId({ObjectId:AE.DssGraphRendererLayer,SeriesId:AW,GroupId:AD}),GraphObjectManager:this}));this.GenerateInterpolationFrame(1);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AW===F.VA_Y1){this.CreateAllSeriesLabels();}},loadSeriesProperties:function u(AT){if(this.mChartContextPtr.mImageUsage!==0){return ;}},LoadStepLine:function d(AT){this.mLineSeriesOptions[AT].mShowStepLine=false;},GenerateMapAndListForSeries:function s(AY){var AU=this.mChartContextPtr,AT=[],AV,AZ,Aa,AX,Ae,Ad,Ab;if(this.mGroupCount<2&&this.mSupportDiscretePoints){AC.call(this,AY);return ;}AS.call(this,AY);this.GetLinePointSet(AY,AT);AV=AA.call(this);if(!this.mpABLPlotContext.mABLOptions.mUseDepth){var Ac=this.mGraphObjectList,AW=this.mLineCollections;if(AT&&AT.length){if(this.mpABLPlotContext.mABLOptions.mCurvedLines){Ab=AT.length;for(AZ=0;AZ<Ab;++AZ){Aa=new g.TripleId({ObjectId:AG.DssGraphDataLine,SeriesId:this.mSeriesInfo[AY].mSeriesId,GroupId:AZ});AX=null;if(AX){Ac.push(AX);}if(AV){this.mGraphObjectMap.push(Aa,AX);AW[AY].AddGraphObject(AX);}}}else{Ab=AT.length;for(AZ=0;AZ<Ab;++AZ){if(AU.mIsGraphMatrix){this.mGroupIdMapPerSeries=this.mVecGroupIdMapPerSeries[AZ];}else{this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);}Ae=false;Ad=U.call(this,AY,AZ,AT);AX=Ad.Obj;Ae=Ad.AlreadyInMapAndList;if(AU.mIsTimeSeriesChart){AX.mIsDetectable=false;}if(!Ae&&AX){Ac.push(AX);if(AV){this.AddToMap(AX);AW[AY].AddGraphObject(AX);}}}}}}},GenerateByValueAxisAndGroup:function AF(AZ,AV){var AW,Ad,AX=[],Ae=[],Ab=[],Aa,AT,Ac,AU,AY;if(this.mGroupCount<2){return ;}if((AV===-1)||this.mHasNegativeValue){this.GenerateOrderedDepthLine(AZ,AV,false);}else{Ad=this.IsReverseSeriesOrder(AZ);AY=this.mSeriesInfo.length;for(AW=0;AW<AY;++AW){Aa=Ad?this.mSeriesInfo.length-AW:AW;if(this.mSeriesInfo[Aa].mValueAxis===AZ){AT=new g.Point2D();Ac=new g.Point2D();if(this.GetLinePoint(Aa,AV-1,AT)&&this.GetLinePoint(Aa,AV,Ac)){AX.push([AT,Ac]);Ae.push(Aa);Ab.push(true);}}}AY=AX.length;for(AW=0;AW+1<AY;++AW){AU=new g.Vector2D({x:AX[AW+1][0],y:AX[AW+1][1]});if(this.PriorToNextSeries(AU,AV)){this.GenerateDepthLine(Ae[AW],AV,AX[AW]);Ab[AW]=false;}}for(AW=AX.length-1;AW>=0;--AW){if(Ab[AW]){this.GenerateDepthLine(Ae[AW],AV,AX[AW]);}}}},GetLinePointSet:function f(AZ,AV){var AY=[],AX=this.mSupportDiscretePoints?0:1,AW,AU,AT,Aa=this.mGroupCount;for(AW=0;AW<Aa;++AW){AT=new g.Point2D();if(this.GetLinePoint(AZ,AW,AT)){AY.push(AT);}else{if(AY.length>AX){AU=AY.slice(0);AV.push(AU);}AY.length=0;}}if(AY.length>AX){AV.push(AY);}},GetLinePoint:function AJ(Aa,Af,AY){var AW=this.mChartContextPtr,Ac=0,Ab=0,Ae,AZ,AU,AT=false,Ag,AX,AV,Ad;if(!this.GetFinalLinePoint(Aa,Af,AY,false)){return false;}if(this.mProgress===1){return true;}if(this.mUseDepth){Ad=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[Aa].mSeriesIndex);Ac=Ad.OffsetX;Ab=Ad.OffsetY;}if(AW.mOldChartManager!==null){AZ=AW.mOldChartManager;Ae=AZ.GetGraphObjectManager(this.mTripleId,true);}AU=new g.Point2D({Point2D:AY});if(Ae!==null){Ag=Ae;AT=Ag.GetFinalLinePoint(Aa,Af,AU,true);if(!AT){AX=Ag.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Af);if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){if(this.mDeviceDataArea){if(AX>this.mDeviceDataArea.y+this.mDeviceDataArea.height){AX=this.mDeviceDataArea.y+this.mDeviceDataArea.height;}if(AX<this.mDeviceDataArea.y){AX=this.mDeviceDataArea.y;}AU.y=AX+Ab;}}else{if(this.mDeviceDataArea){if(AX>this.mDeviceDataArea.x+this.mDeviceDataArea.width){AX=this.mDeviceDataArea.x+this.mDeviceDataArea.width;}if(AX<this.mDeviceDataArea.x){AX=this.mDeviceDataArea.x;}AU.x=AX+Ac;}}}}if(!AT){AV=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[Aa].mValueAxis].GetBasePosition();if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){AU.x=AV+Ac;}else{AU.y=AV+Ab;}}AY.x=AU.x+(AY.x-AU.x)*this.mProgress;AY.y=AU.y+(AY.y-AU.y)*this.mProgress;return true;},GetFinalLinePoint:function D(AZ,Ag,AU,Af){var Ah,AX=this.mVecSeriesPoints,AY=this.mpABLPlotContext,AV=this.mpABLPlot,Ac=0,Ab=0,Aa,AT,Ae,Ad;if(Af&&(AZ>=AX.length||Ag>=AX[AZ].length)){return false;}while(AX.length<=AZ){Ah=[];AX.push(Ah);}while(AX[AZ].length<=Ag){AX[AZ].push(V);}var AW=AX[AZ][Ag];if(AW.x!==-2&&!!AW.dangling===false){if(AW.x===-1&&AW.isNull){return false;}AU.ResetPoint(AW);return true;}if(Af){return false;}AX[AZ][Ag]=C;if(this.mUseDepth){Ad=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AZ].mSeriesIndex);Ac=Ad.OffsetX;Ab=Ad.OffsetY;}Aa=this.GetData(AZ,Ag);if(Aa===null){return false;}K.mSeriesId=this.mSeriesInfo[AZ].mSeriesId;K.mGroupId=Ag;if(this.mDatasetPtr.GetShapeBySeries(K.mSeriesId)===AI._LINE){if(this.mChartContextPtr.checkColorByAndSizeByValue(K,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return false;}}AT=Math.floor(AY.mCategoryAxisPtr.getGroupMiddlePos(Ag));Ae=AY.mValueAxis[this.mSeriesInfo[AZ].mValueAxis].GetPositionByValue(Aa);if(Ae===null){return false;}if(AY.mABLOptions.mOrientation===J.OR_HORIZONTAL){AU.x=Ae+Ac;AU.y=AT+Ab;}else{AU.x=AT+Ac;AU.y=Ae+Ab;}AX[AZ][Ag]=new g.Point2D({Point2D:AU});++AV.DPCount;if(AV.seriesDPCount[this.mSeriesInfo[AZ].mSeriesId]===undefined||AV.seriesDPCount[this.mSeriesInfo[AZ].mSeriesId]===null){AV.seriesDPCount[this.mSeriesInfo[AZ].mSeriesId]=1;}else{++(AV.seriesDPCount[this.mSeriesInfo[AZ].mSeriesId]);}return true;},GenerateDepthLine:function Z(AV,AU,AT){},GenerateLineCollections:function R(){var AT=this.mChartContextPtr,AV,AU,Aa,AZ,AW,Ac,AX,AY=AT.GetGraphMatrixContext(),Ab=AT.mIsGraphMatrix;AU=this.mUseDepth?E.CT_DEPTH_LINE_OR_LINE_MARKER:E.CT_LINE;Aa=this.mUseDepth?AG.DssGraphRiser:AG.DssGraphDataLine;AZ=this.mSeriesInfo.length;if(Ab){if(AT.isLegendByGroup()){AZ=this.mGroupCount;}AU=E.CT_LINE;}for(AV=0;AV<AZ;++AV){Ac=this.mSeriesInfo[AV].mSeriesId;AW=new g.TripleId({ObjectId:Aa,SeriesId:Ac});if(AY.isCombinationChart()===false&&AY.isPieOrRingShape()){AX=null;}else{AX=new g.GraphCollectionObject({TripleId:AW,GraphObjectManager:this,CollectionType:AU});}this.mLineCollections.push(AX);if(this.mpABLPlotContext.mABLOptions.mMajorGraphType!==q.MGT_PARETO||this.mUseDepth){if(!Ab){this.AddLegendMarkerToCollection(AV,this.mLineCollections[AV],true,this.mLineSeriesOptions[AV].mShowMarkers,this.mLineSeriesOptions[AV].mMarkerShape,this.mpABLPlotContext.mABLOptions.mShowLines);}}}},GenerateMarkerCollections:function A(){var AU,AX,AV=this.mLineSeriesOptions,AT=this.mGraphObjectMap,AW=this.mMarkerCollections,AY,AZ;AU=this.mSeriesInfo.length;for(AX=0;AX<AU;++AX){if(AV[AX].mShowMarkers&&(!this.mUseDepth)){AY=new g.TripleId({ObjectId:AG.DssGraphRiser,SeriesId:this.mSeriesInfo[AX].mSeriesId});AZ=new g.GraphCollectionObject({TripleId:AY,GraphObjectManager:this,CollectionType:E.CT_DEPTH_LINE_OR_LINE_MARKER});AT.push(AY,AZ);AW.push(AZ);}else{AW.push(null);}}},CreateSeriesMarkers:function G(AV){var AU,AT,AW;AW=this.mGroupCount;for(AU=0;AU<AW;++AU){AT=new g.Point2D();if(this.GetLinePoint(AV,AU,AT)){this.CreateMarker(AV,AU,this.mMarkerCollections[AV],AT);}}},CreateAllSeriesLabels:function AK(AU){var Af,Ae,AZ,AY,AX,Ah,Ac,Ag,Ad,AW,Ab,AT=this.mpABLPlotContext,Aa=AT.mABLOptions,AV=AT.mSeriesOptions,Ai=this.mGroupCount;if(this.mChartContextPtr.mIsGraphMatrix){AQ.call(this,AU);return ;}Ab=this.mSeriesInfo.length;for(AZ=0;AZ<Ab;++AZ){if(AV[this.mSeriesInfo[AZ].mSeriesIndex].mShowDataLabels){Af=new g.TripleId({ObjectId:AG.DssGraphDataText,SeriesId:this.mSeriesInfo[AZ].mSeriesId});Ae=new g.GraphCollectionObject({TripleId:Af,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Ae);for(AY=0;AY<Ai;++AY){AX=this.createRiserLabel(AZ,AY,Ae);if(AX!==null){Ah=new g.Point2D();Ac=new g.Point2D();this.GetMinMaxPoint(AZ,AY,Ah,Ac);this.MoveLabel(AY,AX,Ac,Ah,AZ);}}}}if((Aa.mMajorGraphType===q.MGT_LINE)&&(Aa.mLayout===Q.LO_STACKED)&&(!Aa.mShowCumulate)&&(Aa.mShowValue)&&(Aa.mShowTotal)){Af=new g.TripleId({ObjectId:AG.DssGraphDataTextStackTotal,SeriesId:this.mTripleId.mSeriesId});Ae=new g.GraphCollectionObject({TripleId:Af,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Ae);if(Aa.mDualAxes){for(AZ=0;AZ<Ai;++AZ){Ag=this.CreateTotalLabel(F.VA_Y1,AZ,Ae);Ad=this.CreateTotalLabel(F.VA_Y2,AZ,Ae);if(Ag!==null){Ah=new g.Point2D();Ac=new g.Point2D();AW=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AZ);this.GetMinMaxPoint(AW,AZ,Ah,Ac);this.MoveLabel(AZ,Ag,Ac,Ah,AW);}if(Ad!==null){Ah=new g.Point2D();Ac=new g.Point2D();AW=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y2,AZ);this.GetMinMaxPoint(AW,AZ,Ah,Ac);this.MoveLabel(AZ,Ad,Ac,Ah,AW);}}}else{for(AZ=0;AZ<Ai;++AZ){AX=this.CreateTotalLabel(F.VA_Y1,AZ,Ae);if(AX!==null){Ah=new g.Point2D();Ac=new g.Point2D();AW=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AZ);this.GetMinMaxPoint(AW,AZ,Ah,Ac);this.MoveLabel(AZ,AX,Ac,Ah,AW);}}}}},CreateMarker:function AO(AU,AV,AW,AZ){var AT=this.mChartContextPtr,AX,Ac,AY;AX=new g.TripleId({ObjectId:AG.DssGraphDataMarker,SeriesId:this.mSeriesInfo[AU].mSeriesId,GroupId:AV});if(AT.mIsTimeSeriesChart){var Ab=this.GetData(AU,AV-1);var Aa=this.GetData(AU,AV+1);if((AV>0&&Ab!==null)||(AV<this.mGroupCount-1&&Aa!==null)){return ;}Ac=4;AY=new g.MarkerObject({TripleId:AX,GraphObjectManager:this,MarkerPosition:AZ,MarkerShape:AH.DssGraphMarkerShapeCircle,IsIsometric:true,MarkerSize:Ac,GraphCollectionObject:AW,IsDialogSize:false});AW.AddGraphObject(AY);this.mGraphObjectList.push(AY);}else{if(AT.mIsGraphMatrix){this.CreateOneDataMarker(AU,AV,AW,AZ,AV);}else{}}},GetMinMaxPoint:function AR(AY,AX,AV,AW){var AU,AZ,AT;AU=new g.Point2D();if(!this.GetFinalLinePoint(AY,AX,AU,false)){return ;}AZ=this.mChartContextPtr.dialogSizeToPixelSize(this.mLineSeriesOptions[AY].mMarkerSize);AT=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AY].mValueAxis].IsReverseOrder();if(this.mIsVertical){if(AT){AV.Reset(AU.x,AU.y-AZ);AW.Reset(AU.x,AU.y+AZ);}else{AV.Reset(AU.x,AU.y+AZ);AW.Reset(AU.x,AU.y-AZ);}}else{if(AT){AV.Reset(AU.x+AZ,AU.y);AW.Reset(AU.x-AZ,AU.y);}else{AV.Reset(AU.x-AZ,AU.y);AW.Reset(AU.x+AZ,AU.y);}}},GetPointPair:function r(AW,AU,AV,AT){return this.GetLinePoint(AW,AU-1,AV)&&this.GetLinePoint(AW,AU,AT);},GenerateOrderedDepthLine:function t(AV,AT,AU){},GenerateInterpolationFrame:function Y(AU){var AX,AV,AT,AW;this.mProgress=AU;AX=this.mGraphObjectList.length;AT=this.mGraphObjectList.concat();this.mGraphObjectList.splice(0,AX);for(AV=0;AV<AX;++AV){AW=AT[AV];if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AW.SetAnimationEnable(true);}AW.SetProgress(AU);this.GenerateFrameInOnePlot(AW,AU<0.5);}this.mGraphObjectList=AT.concat();this._super(AU);},GenerateFrameInOnePlot:function l(Ac,Ad){var AV=this.mChartContextPtr,Aa=AV.GetGraphMatrixContext(),AU=this.mpABLPlotContext,AY=AU.mABLOptions,AX,Ah,Af,AZ,AT,Ae=this.mGroupCount;if(this.mIsByValueAxis){var Ab=F.VA_BOTH;if(AY.mLayout===Q.LO_STACKED){if(AY.mCurvedLines){this.GenerateByValueAxisAndGroup(Ab,-1);}else{Ah=this.IsReverseGroupOrder();for(AX=1;AX<this.mGroupCount;++AX){Af=Ah?Ae-AX:AX;this.GenerateByValueAxisAndGroup(Ab,Af);}}}else{var Ag=this.mSeriesInfo,AW=this.mSeriesInfo.length;for(AX=0;AX<AW;++AX){if(Ag[AX].mValueAxis===Ab){this.GenerateMapAndListForSeries(AX);}}}}else{if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){AZ=this.mSeriesInfo.length;for(AX=0;AX<AZ;++AX){if(AY.mShowLines){this.GenerateMapAndListForSeries(AX);}if(!(AV.mIsGraphMatrix&&Aa.isPieOrRingShape())){this.CreateSeriesMarkers(AX);this.mHasCreatedMarkers=true;}}}else{if(AY.mShowLines){if(AY.mCurvedLines){this.GenerateByValueAxisAndGroup(F.VA_Y2,-1);this.GenerateByValueAxisAndGroup(F.VA_Y1,-1);}else{Ah=this.IsReverseGroupOrder();for(AX=1;AX<Ae;++AX){Af=Ah?Ae-AX:AX;this.GenerateByValueAxisAndGroup(F.VA_Y2,Af);}for(AX=1;AX<Ae;++AX){Af=Ah?Ae-AX:AX;this.GenerateByValueAxisAndGroup(F.VA_Y1,Af);}}}}}if(AV.mIsGraphMatrix===false){if(!this.mHasCreatedMarkers){AZ=this.mSeriesInfo.length;for(AX=0;AX<AZ;++AX){this.CreateSeriesMarkers(AX);}}}AT=this.mGraphObjectList.length;for(AX=0;AX<AT;++AX){Ac.AddGraphObject(this.mGraphObjectList[AX],Ad);}this.mGraphObjectList.splice(0,this.mGraphObjectList.length);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Point2D","Vector2D","Polygon2D","SeriesRenderer","CategoryPlot","MarkerObject","NumberObject","Plot","ChartConstants","GraphObjectAggregation","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumValueAxis","EnumShowFace","EnumAttachedPointsStyle","EnumPictureFormatType","EnumImageUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape");var k=mstrmojo.chart,e=k.ChartConstants,O=mstrmojo.chart.enums,S=O.EnumAttachedPointsStyle,C=O.EnumCollectionType,r=O.EnumMajorGraphType,U=O.EnumLayout,D=O.EnumValueAxis,AC=O.EnumDSSExtraGraphObject,J=O.EnumImageUsage,AB=O.EnumPictureFormatType,c=mstrmojo.chart.model,W=c.enums,AE=W.EnumDSSGraphObject,AF=W.EnumDSSGraphMarkerShape,AG=W.EnumShapeType,R=W.EnumDSSGraphFillEffect,AA=k.gNullGroupId;var K=new k.Rect2D(),y=new k.TripleId();var A=new k.Point2D();A.Reset(-1,-1);A.isNull=true;function x(){var AP,AO,AN,AQ,AR,AM=this.mAreaCollection;AM.splice(0,AM.length);AP=this.mIsVertical?C.CT_VERTICAL_AREA:C.CT_HORIZONTAL_AREA;AO=this.mSeriesInfo.length;for(AN=0;AN<AO;++AN){AQ=new k.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:this.mSeriesInfo[AN].mSeriesId});AR=new k.GraphCollectionObject({TripleId:AQ,GraphObjectManager:this,CollectionType:AP});AM.push(AR);this.AddToMap(AM[AN]);this.AddLegendMarkerToCollection(AN,AM[AN]);}}function F(AN){var AS,AO,AR,AQ,AP,AM,AT;AS=this.mSeriesInfo[AN].mSeriesId;AR=new k.TripleId({ObjectId:AE.DssGraphDataText,SeriesId:AS,GroupId:AA});AO=new k.GraphCollectionObject({TripleId:AR,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AO);AQ=this.mFinalSeriesPolygons[AN];AT=this.mGroupCount;for(AP=0;AP<AT;++AP){if(AQ[AP].x!==-1){AM=this.createRiserLabel(AN,AP,AO);this.MoveLabel(AP,AM,AQ[AP],AQ[2*this.mGroupCount-1-AP],AN);}}}function B(AR,AP){var AO,AQ,AM,AN;for(AO=0;AO<this.mGroupCount;++AO){AQ=this.CreateTotalLabel(AR,AO,AP);if(AQ!==null){AM=this.GetUpmostIndexByValueAxisAndGroup(AR,AO);AN=this.mFinalSeriesPolygons[AM];this.MoveLabel(AO,AQ,AN[AO],AN[2*this.mGroupCount-1-AO],AM);}}}function f(){var AO,AN,AS,AQ,AM,AR=this.mpABLPlotContext,AP=AR.mABLOptions;AO=this.mSeriesInfo.length;for(AN=0;AN<AO;++AN){if(AR.mSeriesOptions[this.mSeriesInfo[AN].mSeriesIndex].mShowDataLabels){F.call(this,AN);}}if(AP.mMajorGraphType===r.MGT_AREA&&AP.mLayout===U.LO_STACKED&&!AP.mShowCumulate&&AP.mShowValue&&AP.mShowTotal){AQ=this.mpManager.mTripleId;AS=new k.TripleId({ObjectId:AE.DssGraphDataTextStackTotal,SeriesId:AQ.mSeriesId,GroupId:AA});AM=new k.GraphCollectionObject({TripleId:AS,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AM);B.call(this,D.VA_Y1,AM);if(AP.mDualAxes){B.call(this,D.VA_Y2,AM);}}}function s(){}function o(AM){var AN=AM,AP=this.mpABLPlotContext.mABLOptions.mLayout,AO=this.mChartContextPtr.mIsGraphMatrix;if(AO&&(AP===U.LO_STACKED||AP===U.LO_PERCENT)){if(AM>=0&&AM<this.mSeriesDrawingOrder.length){AN=this.mSeriesDrawingOrder[AM];}}return AN;}function G(AN){var AO=0,AM=0;this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);while(AO<this.mGroupCount){if(AN[AO].x===-1){++AO;continue;}this.mGroupIdMapPerSeries[AM]=AO;++AO;AM++;}}function l(AP){this.mGroupRangeList.splice(0,this.mGroupRangeList.length);if(AP.length===0){return ;}var AO=0,AS,AR,AN,AQ,AM;AM=AP.length;for(AQ=0;AQ<AM;++AQ){AS=AO+AP[AQ].length/2;AR=this.getCorrectGroupIdInSeriesPoints(AO,AO);AN=this.getCorrectGroupIdInSeriesPoints(AS-1,AS-1);this.mGroupRangeList.push({Start:AR,End:AN});AO=AS;}}function L(AU,AS){var AY=[],AV=[],AZ,AX,AP,AO,AW,AN=this.mChartContextPtr,AR=AN.mIsGraphMatrix,AT=AN.mIsTimeSeriesChart;AZ=0;AX=AU.length;AW=(AT||AR)?0:1;for(AP=0;AP*2<=AX;++AP){if(AU[AP].x!==-1){continue;}if(AP-AZ>AW){var AM=2*(AP-AZ);for(AO=AZ;AO<AP;++AO){AY[AO-AZ]=AU[AO];AY[AM-1-(AO-AZ)]=AU[AX-1-AO];}AV.push(AY);AS.push(AY);AY=[];}AZ=AP+1;}if(AZ<AX/2){var Aa=AX/2-AZ;if(Aa>AW){if(AZ===0){AV.push(AU);AS.push(AU);}else{if(AZ<AX/2){var AQ=Aa*2,Ab=AU.slice(AZ,AZ+AQ);AV.push(Ab);AS.push(Ab);}}}}G.call(this,AU);l.call(this,AV);return AV;}function X(AM,AN){if(AM<0||AM>=this.mGroupRangeList.length){return AN;}return this.mGroupRangeList[AM].Start;}function AH(AQ,AN,AT){var AP=new k.TripleId({TripleId:AQ}),AO=null,AS=this.mChartContextPtr;if(AN.length===2){AP.mObjectId=AE.DssGraphDataMarker;var AR=4,AM=AF.DssGraphMarkerShapeCircle;AO=new k.MarkerObject({TripleId:AP,MarkerPosition:AN[0],MarkerShape:AM,IsIsometric:true,MarkerSize:AR,GraphObjectManager:this,GraphCollectionObject:AT});return AO;}if(AS.mImageUsage===J.OBJECT_CLIP_COMPUTATION){return AO;}AO=new k.PolygonObject({TripleId:AP,GraphObjectManager:this,Polygon:AN,ParentObject:AT,Shape:AG._POLYGON});if(AS.mIsGraphMatrix&&this.mChartContextPtr.mImageFormat===AB.SVG){AO.mPointsStyle=S.TOOLTIP_UPPER;}return AO;}function b(AM,AN,AQ){var AP=new k.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:this.mSeriesInfo[AM].mSeriesId,GroupId:AA}),AR=this.mAreaCollection[AM],AO;AO=AH.call(this,AP,AN,AQ,AR);if(AO){this.mGraphObjectList.push(AO);AR.AddGraphObject(AO);}}function AK(AX,AM,AU){var AN=this.mChartContextPtr,AR=AN.GetGraphMatrixContext(),AY=AX.GetMaxMinDataInputPosition(),AV=AX.mTripleId.mObjectId,AS=AY.LowBoundary,AT=AY.HighBoundary,AP;if(this.mIsVertical){AP=(AV===AE.DssGraphY1Body)?"Y1":"Y2";}else{AP=(AV===AE.DssGraphX1Body)?"X1":"X2";}var AO=this.mClippedMarkerSize[AP],AW=AO.LowOffset,AQ=AO.HighOffset;AY=AR.getClippedOffset(AS,AT,AU,AM,!this.mIsVertical,AW,AQ);AO.LowOffset=AW=AY.LowOffset;AO.HighOffset=AQ=AY.HighOffset;}function AD(AS,AV,AR){if(!this.mChartContextPtr.mIsGraphMatrix){return AS;}var AQ,AP=0,AW=false,AO;if(AV.IsBaseAtZero()){AQ=AV.GetPositionByValue(0);if(AQ!==null){AP=AQ;if(AV.isBaseLineQualified()){var AU=AS.length;if(AU%2===0&&AU>=4){var AM=AU/2,AT,AN;AT=AS.slice(0,AM);AN=AS.slice(AM,AS.length+1);if(AR&&AN[0].y===AP){AW=true;for(AO=0;AO<AM;++AO){if(AT[AO].y!==AN[AM-1-AO].y){AN[AM-1-AO].y--;}}}if(!AR&&AN[0].x===AP){AW=true;for(AO=0;AO<AM;++AO){if(AT[AO].x!==AN[AM-1-AO].x){AN[AM-1-AO].x++;}}}if(AW){AS.splice(0,AS.length);AS=AT.concat(AN);}}}}}return AS;}function M(AQ,AS){if(!this.mChartContextPtr.mIsGraphMatrix){return AQ;}var AM=AQ.length,AP;if(AM%2===0&&AM>=4){var AO=AM/2,AR,AN;AR=AQ.slice(0,AO);AN=AQ.slice(AO,AQ.length+1);for(AP=0;AP<AO;++AP){if(AS){if(AR[AP].y!==AN[AO-1-AP].y){AN[AO-1-AP].y++;}}else{if(AR[AP].x!==AN[AO-1-AP].x){AN[AO-1-AP].x--;}}}AQ.splice(0,AQ.length);AQ=AR.concat(AN);return AQ;}return AQ;}function u(Aa,AQ,AW,AO){var Ac=this.mChartContextPtr.mIsGraphMatrix,Ad,Ab,Af,AT;if(!Ac){b.call(this,Aa,AW,AO);}var AP=this.mpABLPlotContext.mValueAxis,AX=new k.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:this.mSeriesInfo[Aa].mSeriesId,GroupId:AQ});if(AW.length===1){return ;}if(AW.length<=2){var AU=this.drawSinglePoint(AX,AW[0],AG._CIRCLE,AG._AREA);Ad=AU.Object;if(this.mDatasetPtr.showSeriesDatalabel(this.mSeriesInfo[Aa].mSeriesId)){if(Ad!==undefined&&Ad!==null){this.mSinglePointObjects.push(Ad);}}AT=AU.ShapeSize;if(AT===undefined){if(Ad){AT=Ad.getShapeSize();}else{AT=0;}}Ab=AP[this.mSeriesInfo[Aa].mValueAxis];if(Ab){AK.call(this,Ab,AW[0],AT);}}else{var AY=this.mHasColorBy&&this.mDatasetPtr.isGradientABL();Ab=AP[this.mSeriesInfo[Aa].mValueAxis];Af=AW.slice(0);Af=AD.call(this,Af,Ab,this.mIsVertical);if(AX.mSeriesId!==0){Af=M.call(this,Af,this.mIsVertical);Ad=AH.call(this,AX,Af,AO,null);}else{Ad=AH.call(this,AX,Af,AO,null);}if(AY){var AZ=Af;if(Ad){var AR=this.prepareTransitionalGradient(AX,AZ,AZ.length/2),AS=Ad.GetFormatFill(),Ae=AS.transformToGradient(AR);Ad.SetFormatFill(Ae);if(AR.Effective){var AV=Ae.getGradient(),AN=Ad.mFormatLinePtr.transformToGradientFromFill(AV,AZ[0],AZ[AZ.length/2-1]);Ad.SetFormatLine(AN);}}}var AM=Ad&&(Ad instanceof k.MarkerObject);if(AM){Ab=AP[this.mSeriesInfo[Aa].mValueAxis];if(Ab){AT=Ad.getShapeSize();AK.call(this,Ab,AW[0],AT);}}}if(Ad){this.mGraphObjectList.push(Ad);this.AddToMap(Ad);}}function h(AM,AO){var AR=AO.length/2,AQ=AO.length-1,AP=[],AN;if(AM.mSeriesId===0&&this.mIgnoreBasesSeriesBorder){delete this.mIgnoreBasesSeriesBorder;return null;}AP.push(AO[AQ]);for(AN=0;AN<=AR;++AN){AP.push(AO[AN]);}return new k.PolyLineObject({TripleId:AM,GraphObjectManager:this,PolyLine:AP});}function I(AO,AW,AR){var AN=this.mChartContextPtr,AX=this.mSeriesInfo[AO],AU=AX.mSeriesId,AV=new k.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:AU,GroupId:AW}),AM,AP,AY,AQ;if(AR.length<4){return ;}if(!AN.mIsGraphMatrix){return ;}AM=this.GetGraphObject(AV);if(AM!==undefined&&AM!==null){AP=new k.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:AU});AY=h.call(this,AP,AR,AO);if(AY){AQ=AY.mFormatLinePtr;AQ.mLineThickness=2;var AT=AM.mFormatLinePtr,AS=AM.GetFormatFill();if(AT){AQ=mstrmojo.hash.copy(AT,AQ);}else{if(AS){AQ.mLineColor=AS.mSimpleColor;}}}if(AY){AY.mIsDetectable=false;this.mGraphObjectList.push(AY);}}}function z(AP,AW,AT){var AN=this.mChartContextPtr,AO=this.mDatasetPtr,AR,AX=this.mSeriesInfo[AP],AV=AX.mSeriesId,AU,AM,AQ,AY,AS;if(AT.length<4){return ;}if(!AN.mIsGraphMatrix){return ;}AR=AO.showSeriesDatalabel(AV);if(AR){AU=new k.TripleId({ObjectId:AE.DssGraphRiser,SeriesId:AV,GroupId:AW});AM=this.GetGraphObject(AU);if(AM!==undefined&&AM!==null){AQ=new k.TripleId({ObjectId:AE.DssGraphDataLine,SeriesId:AV});AY=h.call(this,AQ,AT,AP);if(AY===null){return ;}AS=AY.mFormatLinePtr;AS.mLineThickness=2;AS.mAlpha=255;this.mAreaBoundForDataLabel.push(AY);}}}function H(AM,AO){var AR,AS,AU,AN,AV=[],AQ=this.mChartContextPtr.mIsGraphMatrix;var AP=o.call(this,AM);AR=this.mSeriesPolygons[AP];if(AR.length<4&&!AQ){return ;}this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);this.mGroupRangeList.splice(0,this.mGroupRangeList.length);AS=L.call(this,AR,AV);AU=AS.length;for(AN=0;AN<AU;++AN){var AT=-3;if(AQ){AT=X.call(this,AN,AT);}u.call(this,AP,AT,AS[AN],AO);I.call(this,AP,AT,AV[AN],AO);z.call(this,AP,AT,AV[AN],AO);}}function n(){}function Q(AN,AP){var AO=this.mSeriesPolygons[AN];if(AO[AP-1].x===-1||AO[AP].x===-1){return ;}var AM=[];AM[0]=AO[AP-1];AM[1]=AO[AP];AM[2]=AO[AO.length-AP-1];AM[3]=AO[AO.length-AP];return AM;}function V(AS,AO){var AW,AT=[],AU=[],AN=[],AR,AP,AX,AV,AM,AQ;if(this.mHasNegativeValue){n.call(this,AS,AO);return ;}AW=this.IsReverseSeriesOrder(AS);AR=this.mSeriesInfo.length;for(AQ=0;AQ<AR;++AQ){AP=AW?AR-1-AQ:AQ;if(this.mSeriesInfo[AP].mValueAxis===AS){AX=Q.call(this,AP,AO);if(AX===undefined){continue;}AT.push(AX);AU.push(AP);AN.push(true);}}AV=AT.length;for(AQ=0;AQ+1<AV;++AQ){if(AW){AM=new k.Vector2D({StartPoint:AT[AQ][3],EndPoint:AT[AQ][2]});}else{AM=new k.Vector2D({StartPoint:AT[AQ][0],EndPoint:AT[AQ][1]});}if(this.PriorToNextSeries(AM,AO)){s.call(this,AU[AQ],AT[AQ],AO);AN[AQ]=false;}}for(AQ=AV-1;AQ>=0;--AQ){if(AN[AQ]){s.call(this,AU[AQ],AT[AQ],AO);}}}function p(AR){var AN,AQ,AP,AO=this.mSeriesInfo,AM=AO.length;if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){for(AN=0;AN<AM;++AN){if(AR===AO[AN].mValueAxis||AR===D.VA_BOTH){H.call(this,AN,this.mUseDepth);}}}else{AQ=this.IsReverseGroupOrder();if(this.mpABLPlotContext.mABLOptions.mCurvedLines){n.call(this,AR,0);}else{for(AN=1;AN<this.mGroupCount;++AN){AP=AQ?this.mGroupCount-AN:AN;V.call(this,AR,AP);}}for(AN=0;AN<AM;++AN){if(AR===AO[AN].mValueAxis||AR===D.VA_BOTH){H.call(this,AN,false);}}}}function Z(AN,AO,AP,AM){if(AN){if(AP){return AM.y<AO;}return AM.y<=AO;}if(AP){return AM.x>AO;}return AM.x>=AO;}function E(Ai){var AM=this.mpABLPlotContext,AS=this.mpABLPlot,AX=[],Ap=0,An=0,Af,Al,AR,As,Aa,AQ,Ah,AY,AT,Ad,Am,AV,Ao,AW,AP,Ak=false,AZ=false,Ab=false,Aq=this.mpABLPlotContext.mABLOptions.mLayout,Aj=this.mChartContextPtr.mIsGraphMatrix,AO=this.mGroupCount;if(this.mUseDepth){Af=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[Ai].mSeriesIndex);Ap=Af.OffsetX;An=Af.OffsetY;}AR=this.mSeriesInfo[Ai].mValueAxis;Al=AM.mValueAxis[AR];AW=Al.GetAxisOriginValue();AY=Al.mOptions.mDrawFromZero;Al.mOptions.mDrawFromZero=(AW===null||AW===0)&&(Al.mOptions.mUseLogarithmicScale===false);AQ=Al.GetBasePosition(true);As=Al.GetBaseValue(true);AP=Al.GetPositionByValue(AW!==null?AW:0);if(AP===null){AP=-100;}Aa=Al.GetBasePosition(AW);for(Ah=0;Ah<AO;++Ah){AT=0;Af=this.GetData(Ai,Ah);Ad=(Af===null);if(Af!==null){AT=Af;++AS.DPCount;if(AS.seriesDPCount[this.mSeriesInfo[Ai].mSeriesId]===undefined||AS.seriesDPCount[this.mSeriesInfo[Ai].mSeriesId]===null){AS.seriesDPCount[this.mSeriesInfo[Ai].mSeriesId]=1;}else{++(AS.seriesDPCount[this.mSeriesInfo[Ai].mSeriesId]);}}Am=0;Af=Al.GetPositionByValue(AT);if(Af!==null){Am=Af;}if(Aj&&Ad){AX[Ah]=A;AX[AO*2-Ah-1]=A;continue;}if((this.mIsAbsolute&&Ad)||Af===null){AX[Ah]=A;AX[AO*2-Ah-1]=A;continue;}AV=AM.mCategoryAxisPtr.getGroupMiddlePos(Ah);if(!this.mIsAbsolute){var AU=Aq===U.LO_STACKED,AN=Al.mOptions.mUseCustomMinMax,Ar=Al.mOptions.mUseLogarithmicScale;if(Al.mOptions.mDrawFromZero||U.LO_PERCENT===Aq||(AU&&!AN&&Ar)){if((AU&&!AN&&Ar)&&(Ai===0)){Ao=As;}else{Ao=0;Af=this.GetData(Ai,Ah,true);if(Af!==null){Ao=Af;}}Af=Al.GetPositionByValue(Ao);if(Af!==null){AQ=Af;}else{AX[Ah]=A;AX[AO*2-Ah-1]=A;continue;}}else{var Ac=this.updateGroupStackInfoWithBase(AR,Ah,AW);var Ae=this.getSeriesOffsetIntoStackedInfo(AR,Ah,Ai);var At=Ac[Ae];AQ=Al.ValueToPosition(AT>=As?At.Min:At.Max);Am=Al.ValueToPosition(AT>=As?At.Max:At.Min);}}if(Am===Aa&&AT!==As){if(this.mIsAbsolute&&this.mSeriesInfo.length===1){if(this.mIsVertical){An=AT>0?-1:1;}else{Ap=AT>0?1:-1;}}else{if(Ai===0){this.mIgnoreBasesSeriesBorder=true;}}}if(this.mIsVertical){AX[Ah]=new k.Point2D({x:AV+Ap,y:Am+An});AX[AO*2-Ah-1]=new k.Point2D({x:AV+Ap,y:AQ+An});}else{AX[Ah]=new k.Point2D({x:Am+Ap,y:AV+An});AX[AO*2-Ah-1]=new k.Point2D({x:AQ+Ap,y:AV+An});}if(!Ab&&Aj){var Ag=AX[Ah];var Au=Z.call(this,this.mIsVertical,AP,true,Ag);Ak=Ak||Au;AZ=AZ||!Au;Ag=AX[AO*2-Ah-1];Au=Z.call(this,this.mIsVertical,AP,false,Ag);Ak=Ak||Au;AZ=AZ||!Au;Ab=AZ&&Ak;}}Al.mOptions.mDrawFromZero=AY;return{POLYGON:AX,CROSS:Ab};}function q(){var AP=this.mFinalSeriesPolygons,AV=this.mSeriesPolygons,AN,AM,AO,AX,AW,AQ=this.mpABLPlotContext.mABLOptions.mLayout;this.mSeriesDrawingOrder.splice(0,this.mSeriesDrawingOrder.length);AO=this.mSeriesInfo.length;for(AN=0;AN<AO;++AN){var AR=E.call(this,AN);var AT=AR.POLYGON;AW=AR.CROSS;AP.push(AT);if((AQ===U.LO_STACKED||AQ===U.LO_PERCENT)&&this.mChartContextPtr.mIsGraphMatrix){if(AW){this.mSeriesDrawingOrder.unshift(AN);}else{this.mSeriesDrawingOrder.push(AN);}}}AV.splice(0,AV.length);var AS;AO=AP.length;for(AN=0;AN<AO;++AN){AS=[];AX=AP[AN].length;for(AM=0;AM<AX;++AM){var AU=new k.Point2D();this.GetAreaPointByProgress(AN,AM,this.mProgress,AU);AS.push(AU);}AV.push(AS);}}function t(AN){var AM;for(AM=0;AM<this.mSeriesInfo.length;++AM){if(AN===this.mSeriesInfo[AM].mValueAxis||AN===D.VA_BOTH){j.call(this,AM);}}}function j(AM){var AV=this.mSeriesInfo,AS=this.mSeriesPolygons[AM],AU=this.mChartContextPtr.mIsGraphMatrix,AO,AR,AP,AW,AQ=e.kVirtualMarkerSize,AN,AT=AS.length;for(AN=0;AN*2<AT;++AN){if(AS[AN].x===-1){continue;}AO=this.mDatasetPtr.GetData(AV[AM].mSeriesId,AN,0);if(AO===null||AO===undefined){continue;}if(AU){this.CreateOneDataMarker(AM,AN,null,AS[AN],AN);}else{AR=new k.Rect2D({x:AS[AN].x-AQ/2,y:AS[AN].y-AQ/2,height:AQ,width:AQ});AP=new k.TripleId({ObjectId:AE.DssGraphDataMarker,SeriesId:AV[AM].mSeriesId,GroupId:AN});AW=new k.RectangleObject({TripleId:AP,GraphObjectManager:this,Area:AR,GraphCollectionObject:null,IsOnlyForToolTip:true,IsVirtualMarker:true});this.AddToMapAndList(AW);}}}function AL(AU){var AS=this.mFinalSeriesPolygons[AU.SeriesInfo],AT=0,AQ=0,AM=this.mChartContextPtr,AR=AM.GetGraphMatrixContext(),AN=AM.getUtiliy().tripleId,AP,AO;AN.reset(y,AE.DssGraphRiser,AU.SeriesId,AU.GroupId);AP=AR.IsIsolatedDot(y);if(AS[AU.GroupId].x===-1){return false;}if(AP){AO=this.GetGraphObject(y);if(AO!==null&&AO!==undefined&&AO.mMarkerSize!==undefined&&AO.mMarkerSize!==null){AT=AO.mMarkerSize;}AQ=AT;}AU.HostMarkerPoint=AS[AU.GroupId];AU.CenterXOffset=AT;AU.CenterYOffset=AQ;return true;}function d(){var AO,AN=this.mDataLabels,AM=AN.length;for(AO=0;AO<AM;++AO){AN[AO].isValid=AL.call(this,AN[AO]);}}function Y(){var AM=this.mpABLPlot.dataLabelManager,AO=this.mChartContextPtr,AN=new k.Rect2D({x:0,y:0,width:AO.mGraphWidth,height:AO.mGraphHeight});if(AM===null||AM===undefined){AM=this.mpABLPlot.dataLabelManager=new k.DataLabelManager({DataArea:AN});AM.ChartContext=AO;}AM.SinglePointObjects=AM.SinglePointObjects.concat(this.mSinglePointObjects);AM.PolyLineObjects=AM.PolyLineObjects.concat(this.mAreaBoundForDataLabel);AM.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AM;}function P(){var AN=this.mDataLabels,AM=AN.length,AO;for(AO=0;AO<AM;++AO){if(AN[AO].display){this.CreateOneDataMarker(AN[AO].SeriesInfo,AN[AO].GroupId,null,AN[AO].HostMarkerPoint,-3,true);}}}function g(AN){if(this.mChartContextPtr.mIsGraphMatrix){if(this.mDatasetPtr.showDatalabels()){this.CreateAllDataLabels();d.call(this);var AM=Y.call(this);AM.PlaceDataLabels(this.mDataLabels,AN);P.call(this);}}else{f.call(this);}}mstrmojo.chart.AreaSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.AreaSeriesRenderer",mAreaCollection:null,mSeriesPolygons:null,mFinalSeriesPolygons:null,mIsAbsolute:false,mIsPolygonSplit:false,mSeriesDrawingOrder:null,mGroupRangeList:null,mSinglePointObjects:null,mHasCreatedMarkers:false,mAreaBoundForDataLabel:null,mDataLabels:null,init:function AJ(AM){this._super(AM);this.mAreaCollection=[];this.mSeriesPolygons=[];this.mFinalSeriesPolygons=[];this.mSeriesDrawingOrder=[];this.mGroupRangeList=[];this.mIsAbsolute=this.mpABLPlot.isAbsoluteOrCluster();this.mProgress=1;this.mSinglePointObjects=[];this.mAreaBoundForDataLabel=[];this.mDataLabels=[];},GenerateMapAndList:function AI(AM){var AN=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}x.call(this);q.call(this);var AS=new k.TripleId({ObjectId:AC.DssGraphRendererLayer,SeriesId:D.VA_BOTH}),AQ=new k.GraphObjectAggregation({TripleId:AS,GraphObjectManager:this}),AV=this.mGraphObjectList;AV.splice(0,AV.length);this.GenerateInterpolationFrame(1,AQ);if(AN.mUseAnimation){this.GenerateInterpolationFrame(0,AQ);}AV.push(AQ);if(AN.mImageUsage===J.GENERAL){g.call(this,AM);this.GenerateTrendLine();this.GenerateRefLine();}if(this.mSeriesDrawingOrder&&this.mSeriesDrawingOrder.length){var AP=this.renderSequence,AO=this.mSeriesDrawingOrder,AW=this.mSeriesInfo,AR,AU=this.mSeriesDrawingOrder.length;AP.splice(0,AP.length);for(AR=0;AR<AU;AR++){var AT=AO[AR];AT=AW[AT].mSeriesId;AP[AT]=AR;}}else{this.populateRenderSequence();}},GenerateByValueAxis:function w(AT){var AQ=[],AP=[],AN,AM,AO=this.mGraphObjectList,AS,AR;if(this.mSeriesPolygons.length===0){x.call(this);q.call(this);}AS=new k.TripleId({ObjectId:AC.DssGraphRendererLayer,SeriesId:AT,GroupId:AA});AR=new k.GraphObjectAggregation({TripleId:AS,GraphObjectManager:this});AQ.push(AR);this.GenerateInterpolationFrame(1,AR);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0,AR);}AN=AO.length;for(AM=0;AM<AN;AM++){AP.push(AO[AM]);}AO.splice(0,AN);AO.splice(0,AN);for(AM=0;AM<AN;++AM){AO.push(AP[AM]);}if(AT===D.VA_Y1){f.call(this);this.GenerateTrendLine();this.GenerateRefLine();}},GenerateInterpolationFrame:function a(AM,AN){var AU=this.mSeriesPolygons,AR=this.mGraphObjectList,AY=AR.slice(0),AP=this.mFinalSeriesPolygons.length,AQ,AO,AS,AW,AT,AX,AV;this.mProgress=AM;AU.splice(0,AU.length);for(AQ=0;AQ<AP;++AQ){AS=[];AW=this.mFinalSeriesPolygons[AQ].length;for(AO=0;AO<AW;++AO){AT=new k.Point2D();this.GetAreaPointByProgress(AQ,AO,this.mProgress,AT);AS.push(AT);}AU.push(AS);}AX=AN.mTripleId.mSeriesId;if(AX===D.VA_BOTH){if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){p.call(this,D.VA_BOTH);t.call(this,D.VA_BOTH);}else{p.call(this,D.VA_Y2);p.call(this,D.VA_Y1);t.call(this,D.VA_Y2);t.call(this,D.VA_Y1);}}else{p.call(this,AX===D.VA_Y1?D.VA_Y1:D.VA_Y2);t.call(this,AX===D.VA_Y1?D.VA_Y1:D.VA_Y2);}AN.Clear(AM<0.5,AM>=0.5);AV=AR.length;for(AQ=0;AQ<AV;++AQ){AN.AddGraphObject(AR[AQ],AM<0.5);}if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AN.SetAnimationEnable(true);AN.SetProgress(AM);}AR.splice(0,AR.length);AR=AR.concat(AY);this._super(AM);},GetAreaPointByProgress:function N(AR,AU,AM,AW){var AS=this.mFinalSeriesPolygons,AO=this.mChartContextPtr,AV=false,AQ=[],AP,AX;if(AS[AR][AU].x===-1&&AS[AR][AU].y===-1){AW.x=-1;AW.y=-1;return ;}if(!!AO.mpOldChartManager){AP=AO.mpOldChartManager;var AT=AP.GetGraphObjectManager(this.mTripleId,true);if(AT!==null){AX=AT;AQ=AX.mFinalSeriesPolygons.slice(0);AV=true;}}if(AV&&AR<AQ.length&&AU<AQ[AR].length&&!(AQ[AR][AU].x===-1&&AQ[AR][AU].y===-1)){AW.x=AQ[AR][AU].x+(AS[AR][AU].x-AQ[AR][AU].x)*AM;AW.y=AQ[AR][AU].y+(AS[AR][AU].y-AQ[AR][AU].y)*AM;}else{var AN=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AR].mValueAxis].GetBasePosition();if(this.mIsVertical){AW.x=AS[AR][AU].x;AW.y=AN-(AN-AS[AR][AU].y)*AM;}else{AW.x=AN-(AN-AS[AR][AU].x)*AM;AW.y=AS[AR][AU].y;}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","MarkerObject","SeriesRenderer","Plot","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumGraphMatrixElementSizeMode","EnumGraphMatrixDataLabelPosition","EnumFontRotation","EnumAnchorPoint","EnumImageUsage","EnumGenericDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphProperty","EnumDSSGraphObject");var AH=mstrmojo.chart,AE=AH.ChartConstants,I=AH.enums,j=I.EnumCollectionType,AL=I.EnumLayout,p=I.EnumOrientation,l=I.EnumValueAxis,AN=I.EnumAnchorPoint,B=I.EnumFillType,AZ=I.EnumGenericDirection,k=I.EnumImageUsage,u=I.EnumGraphMatrixElementSizeMode,X=I.EnumGraphMatrixDataLabelPosition,D=I.EnumFontRotation,AD=mstrmojo.chart.model,o=AD.enums,AU=o.EnumDSSGraphMarkerShape,N=o.EnumShapeType,AS=o.EnumDSSGraphObject,A=AH.common.Utility;var AP=0,s=1,z=2,R=3;var AB=new AH.Rect2D(),O=new AH.Rect2D();function L(){var Ad=this.mSeriesInfo,Ab=0,Ae=0,Ac,Aa=Ad.length;for(Ac=0;Ac<Aa;++Ac){if(Ad[Ac].mValueAxis===l.VA_Y1){Ab=1;}if(Ad[Ac].mValueAxis===l.VA_Y2){Ae=1;}}return Ab+Ae;}function f(Ab){var Aa=0;switch(this.mBarRenderType){case s:Aa=Ab.seriesInfoID;break;case z:if(L.call(this)>1&&!this.mpABLPlotContext.mABLOptions.mSplitDualAxes){Aa=this.mSeriesInfo[Ab.seriesInfoID].mValueAxis;}break;}return Aa;}function S(Ae){var Ab=this.mChartContextPtr.GetGraphMatrixContext(),Af=this.mDatasetPtr,Ad=this.mSeriesInfo,Ag,Ac,Aa;if(Ab&&this.mHasSizeBy){Ag=Af.GetSizeByData(Ad[Ae.seriesInfoID].mSeriesId,Ae.groupID);Ag=Ag||0;Ac=Ab.GetScaledSize(Ag,this.mBarWidth,N._BAR);Ac=Math.max(Ac,1);if(this.mBarRenderType===z){Aa=Ac;if(Aa%2===0){Aa++;}return Aa;}return Ac;}return this.mBarWidth;}function P(Aj,Am){var Ab,An,Ag,Ah,Ai,Ac,Ak,Aa,Al,Ad,Af=this.mpABLPlotContext,Ae=false;if(Aj.useFloat!==undefined){Ae=Aj.useFloat;}Am=Am||this.mBarWidth;Ah=Af.mCategoryAxisPtr;Ac=Aj.groupID;if(Af.takeGroupCenter){Al=this.mDatasetPtr.GetClusterDataGroup();Ak=Ah.getFloatGroupMiddlePos(Ac);if(Al<=1){Ak=Ak-0.5*Am;}else{Ad=Aj.seriesInfoID%Al;Ak-=0.5*Al*Am;Ak+=Ad*Am;}}else{Ai=f.call(this,Aj);Ak=Ah.getGroupStartPos(Ac)+this.mSpaceBetweenGroup/2+(Am+this.mSpaceBetweenRiser)*Ai;}Ab=Math.floor(Ak+0.5);if(this.mChartContextPtr.mIsGraphMatrix){An=Am;if(this.mHasSizeBy){if(!this.mUseDepth){Aa=S.call(this,Aj);Ag=An-Aa;Ak+=Ag*0.5;Ab=Math.round(Ak);An=Math.round(Aa);}}else{An=(Ae?(Ak+Am):Math.round(Ak+Am))-Ab;}}else{An=(Ae?(Ak+Am):Math.round(Ak+Am))-Ab;}if(An===0&&Am>=0.5){An=1;}return{Start:Ab,Size:An};}function H(Ab){var Aa,Ac;if(this.mBarOptions.mColorBySeries){if(Ab<0||Ab>=this.mSeriesInfo.length){return true;}}else{Ac=this.mDatasetPtr.GetGroupCount();if(Ab<0||Ab>=Ac){return true;}}Aa=(this.mAddedLegendMarkerSet[Ab]!==undefined);if(!Aa){this.mAddedLegendMarkerSet[Ab]=true;}return Aa;}function q(Ag,Ac){var Af,Ae,Ab,Ad,Aa,Ah;Ah=Ac.length;for(Af=0;Af<(Ah-1);++Af){Ae=Ac[Af].GetBoundingRect();Ab=Ac[Af+1].GetBoundingRect();Ad=this.mpABLPlotContext.mValueAxis[Ag].IsReverseOrder()?1:-1;if(Ae.HasIntersection(Ab)){Aa=new AH.Point2D({x:Math.floor(Ab.x+Ab.height/2),y:Ae.y});if(Ad===1){Aa.y+=Ae.height;}Aa.y+=Math.floor(Ad*Ab.height/2);Ac[Af+1].MoveTo(Aa.x,Aa.y,AN.CENTER);}}}function AO(Ah,Aa,Ag){var Ai,Af,Ab,Ae,Ad,Ac=this.mBarRenderType,Aj;Ai=this.createRiserLabel(Ah.seriesInfoID,Ah.groupID,Ag);if(Ai===null){return null;}if(Ac===z||Ac===R){Ai.mOnMarker=true;}Af=this.mIsVertical?Aa.GetTopMiddle():Aa.GetRightMiddle();Ab=this.mIsVertical?Aa.GetBottomMiddle():Aa.GetLeftMiddle();Ae=false;Ad=this.GetData(Ah.seriesInfoID,Ah.groupID);if(Ad!==null&&Ad!==undefined){Aj=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[Ah.seriesInfoID].mValueAxis];Ae=(Ad<0)^Aj.IsReverseOrder();}if(Ae){Af.swapPoints(Ab);}this.MoveLabel(Ah.groupID,Ai,Af,Ab,Ah.seriesInfoID);return Ai;}function U(Ac,Ae){var Ad=this.mSeriesInfo,Ab,Aa=Ad.length;for(Ab=0;Ab<Aa;++Ab){if(Ae===l.VA_BOTH||Ad[Ab].mValueAxis===Ae){Ac.push(Ab);}}}function AI(){var Ab=this.mpABLPlotContext.mABLOptions;var Ac=l.VA_Y1,Aa=l.VA_Y2;if(Ab.mUseDepth&&L.call(this)>1&&Ab.mDualAxes&&!Ab.mSplitDualAxes){if((Ab.mOrientation===p.OR_VERTICAL&&Ab.mDepthDirection>=90&&Ab.mDepthDirection<270)||(Ab.mOrientation===p.OR_HORIZONTAL&&Ab.mDepthDirection>=0&&Ab.mDepthDirection<180)){Ac=l.VA_Y2;Aa=l.VA_Y1;}}return{First:Ac,Second:Aa};}function Y(Ad,Af){if(Af.length===0){return Af;}var Ab,Aa=[],Ac,Ae;for(Ab in Af){if(Af.hasOwnProperty(Ab)){Ae=Af[Ab];Ac=this.mDatasetPtr.GetData(Ae,Ad);if(Ac!==null&&Ac<0){Aa.unshift(Ae);}else{Aa.push(Ae);}}}return Aa;}function M(Ah,Ab,Ag){var Af=this.mpABLPlotContext.mABLOptions,Ac=Af.mDepthDirection,Aa=Af.mOrientation,Ad=this.mBarRenderType,Ae=false;switch(this.mBarRenderType){case AP:Ae=false;break;case s:if(Af.mUseDepth&&((Aa===p.OR_VERTICAL&&Ac>=90&&Ac<270)||(Aa===p.OR_HORIZONTAL&&Ac>0&&Ac<180))){Ae=true;}break;case z:case R:if((Af.mUseDepth)&&((Aa===p.OR_VERTICAL&&Ac>=180&&Ac<360)||(Aa===p.OR_HORIZONTAL&&Ac>=90&&Ac<270))){Ae=true;}break;}Ab.splice(0,Ab.length);U.call(this,Ab,Ag);if(Ab.length===0){return ;}if(Ad===z||(Ad===R&&Ag!==l.VA_BOTH)){Ab=Y.call(this,Ah,Ab);var Ai=this.mpABLPlotContext.mValueAxis[Ag];if(Ai.IsReverseOrder()){Ae=!Ae;}}if(Ae&&Ab.length>0){Ab.reverse();}}function V(){var Ad=this.mpABLPlotContext,Ac=this.mBarOptions;if(this.mBarColumns===-1){this.mBarColumns=1;switch(this.mBarRenderType){case s:this.mBarColumns=this.mSeriesInfo.length;break;case z:if(L.call(this)>1&&!Ad.mABLOptions.mSplitDualAxes){this.mBarColumns=2;}break;}var Aa=this.mGroupSize,Ab=this.evalBarStyleUnitWidth(Aa,this.mBarColumns,Ac.mGapWidth);this.mBarWidth=Ab.unitWidth;this.mSpaceBetweenRiser=Ab.riserGap;this.mSpaceBetweenGroup=Ab.groupGap;}}function n(){switch(this.mpABLPlotContext.mABLOptions.mLayout){case AL.LO_ABSOLUTE:if(this.mChartContextPtr.GetGraphMatrixContext().isCombinationChart()){return s;}return AP;case AL.LO_CLUSTER:return s;case AL.LO_STACKED:return z;case AL.LO_PERCENT:return R;default:return s;}}function AQ(Ad,Ab){var Aa,Ac;Aa=this.mDatasetPtr.GetColorByData(Ad.mSeriesId,Ad.mGroupId);if(Aa){Ac=new AH.FormatFill();Ac.mFillType=B.FT_SIMPLE;Ac.mAlpha=255*0.7;Ac.mSimpleColor=Aa;Ab.SetFormatFill(Ac);}}function J(){if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function E(){}function AM(Af,Aa,Am){var Ad,Ai,Ae,An,Ab=this.mpABLPlot,Ac=this.mpABLPlotContext,Ak=this.mSeriesInfo[Af.seriesInfoID].mValueAxis,Al=Ac.mValueAxis[Ak],Ah=Al.mOptions.mDrawFromZero,Aj=Al.GetAxisOriginValue();Al.mOptions.mDrawFromZero=(Aj===null||Aj===0);Ad=this.hPrepareData(Af);if(A.isValidNumber(Ad)===false){return ;}Ai=this.hPrepareRect(Af,Ad);An=Ai.Rect;Ae=Ai.AboveBase;if(!this.hUpdateBarRect(Af,An,Ae,Ad)){Al.mOptions.mDrawFromZero=Ah;return ;}if(An.width<=0||An.height<=0){Al.mOptions.mDrawFromZero=Ah;return ;}if(!Am){var Ag=this.hPrepareRectangleObject(Af,An,Ae);if(Ag){this.hPostProcessOneBar(Af,Ag);++Ab.DPCount;if(Ab.seriesDPCount[Af.seriesInfoID]===undefined||Ab.seriesDPCount[Af.seriesInfoID]===null){Ab.seriesDPCount[Af.seriesInfoID]=1;}else{++(Ab.seriesDPCount[Af.seriesInfoID]);}}}Al.mOptions.mDrawFromZero=Ah;}function AJ(Ae,Ab,Ag){var Ac,Af,Aa,Ad=[];if((Ag===l.VA_BOTH&&this.mBarRenderType===z)||this.mBarRenderType===R){Ac=AI.call(this);Af=Ac.First;Aa=Ac.Second;M.call(this,Ae,Ab,Af);M.call(this,Ae,Ad,Aa);if(Ad.length>0){Ab=Ab.concat(Ad);}}else{M.call(this,Ae,Ab,Ag);}return Ab;}function h(Aj,Al){var Ak=this.mChartContextPtr,Ai=1500,Aa=-1,Ab=-1;if(this.mBarRenderType===s&&!this.mDatasetPtr.ShouldTakeGroupCenter()){if(Al>=Ai&&Ak.mPartialRendering){var Ad,Ag,Am=this.mBarWidth,Af=Ak.mRenderingWindow,Ah=Ak.IsVertical(),Ac=this.mpABLPlotContext,Ae=Ac.mCategoryAxisPtr;if(Ah){Ad=Af.x;Ag=Ad+Af.width;}else{Ad=Af.y;Ag=Ad+Af.height;}Aa=Ad-Ae.getGroupStartPos(Aj)-this.mSpaceBetweenGroup/2;Aa=Math.round(Aa/(Am+this.mSpaceBetweenRiser))-1;Aa=Math.max(Aa,0);Ab=Ag-Ae.getGroupStartPos(Aj)-this.mSpaceBetweenGroup/2;Ab=Math.round(Ab/(Am+this.mSpaceBetweenRiser))+1;Ab=Math.min(Ab,Al-1);return[Aa,Ab];}}return[];}function Z(Ah){var Ab=this.mpABLPlotContext,An=this.IsReverseGroupOrder(),Am,Aj,Ai=[],Aa=[],Ac,Ad,Af=[],Ak=[],Ag,Ae,Al;this.initialSeries=[];Am=this.mDatasetPtr.GetGroupCount();for(Al=0;Al<Am;++Al){Aj=Al;if(An){Aj=Am-1-Aj;}Ai=AJ.call(this,Aj,Ai,Ah);Ac=Ai.length;Ae=h.call(this,Aj,Ac);for(Ad=0;Ad<Ac;++Ad){if(Ae.length===2&&(Ad<Ae[0]||Ad>Ae[1])){continue;}Ag={groupID:Aj,seriesInfoID:Ai[Ad]};AM.call(this,Ag,Aa);}if(this.mBarRenderType===s){Ac=Aa.length;for(Ad=0;Ad<Ac;++Ad){if(Ab.mSeriesOptions[Aa[Ad].first].mValueAxis===l.VA_Y1){Af.push(Aa[Ad].second);}else{Ak.push(Aa[Ad].second);}}if(Af.length!==0){q.call(this,l.VA_Y1,Af);}if(Ak.length!==0){q.call(this,l.VA_Y2,Ak);}}Aa.splice(0,Aa.length);}}function AW(Ab){var Ae=this.mChartContextPtr;if(Ae.mIsGraphMatrix&&this.mHasColorBy){return null;}if(this.mGroupCount<2){return null;}var Aa,Ac=this.mDatasetPtr;Aa=new AH.TripleId({ObjectId:AS.DssGraphRiser});if(this.mBarOptions.mColorBySeries){Aa.mSeriesId=this.mSeriesInfo[Ab.seriesInfoID].mSeriesId;}else{Aa.mSeriesId=Ab.groupID;}var Ad=this.GetGraphObject(Aa);if(Ad===undefined){if(Ae.mIsGraphMatrix){if(Ac.findCell(true,Aa.mSeriesId,1)!==-1){Ad=null;return Ad;}}if(Ad===undefined){Ad=new AH.GraphCollectionObject({TripleId:Aa,GraphObjectManager:this,CollectionType:(this.mIsVertical?j.CT_VERTICAL_BAR:j.CT_HORIZONTAL_BAR)});}this.AddToMap(Ad);}return this.GetGraphObject(Aa);}function W(Ab){if(this.mChartContextPtr.mIsGraphMatrix){var Aa=this.mpABLPlotContext.mValueAxis[Ab];if(Aa){return Aa.mOptions.mUseCustomMinMax;}return false;}return false;}function c(Aa,Ab){if(Aa.x<Ab||Aa.x+Aa.width+Ab>this.mChartContextPtr.mGraphWidth){return false;}return(!(Aa.y<Ab||Aa.y+Aa.height+Ab>this.mChartContextPtr.mGraphHeight));}function g(Aa,Ab,Ac){if(Aa.x+Aa.width+Ac<=Ab.x||Aa.x>=Ab.x+Ab.width+Ac){return true;}return(Aa.y+Aa.height+Ac<=Ab.y||Aa.y>=Ab.y+Ab.height+Ac);}function AY(Ah,Al,Aj,Ag){var Ai,Ae=0,Ad=0,Ac,Ak,Ab=this.mChartContextPtr,Af=Ab.GetGraphMatrixContext(),Aa=5;if(Ab.mIsGraphMatrix){Aa=Af.getPadding(AE.kDataLabel);}if(Ag){Al.GetFormatFont().mFontRotation=D.FR_90;}else{Al.GetFormatFont().mFontRotation=D.FR_NORMAL;}Ai=Al.GetBoundingRect();switch(Aj){case X._BOTTOM:Ae=0;Ad=(Ah.height+Ai.height)/2+Aa;break;case X._TOP:Ae=0;Ad=-1*((Ah.height+Ai.height)/2+Aa);break;case X._LEFT:Ae=-1*((Ah.width+Ai.width)/2+Aa);Ad=0;break;case X._RIGHT:Ae=(Ah.width+Ai.width)/2+Aa;Ad=0;break;case X._CENTER:Ae=0;Ad=0;break;}Ac=Ah.GetCenter().x+Ah.width%2+Ae;Ak=Ah.GetCenter().y+Ah.height%2+Ad;Al.MoveTo(Ac,Ak,AN.CENTER);}function Q(Al,Aj,Ai,Ah,Ae,Ag){var Ac=this.mChartContextPtr,Af=Ac.GetGraphMatrixContext(),Ab,Ak=this.mpABLPlotContext.mABLOptions,Ad=Ak.mLayout,Aa=Ak.mOrientation;if(Ae===null||Ae===undefined){Ae=false;}if(Ag===null||Ag===undefined){Ag=false;}if(Ae){Ab=Ag;}else{Ab=Af.mIsNeedRotateDataLabel;}if(Aa===p.OR_VERTICAL){if(Ad===AL.LO_ABSOLUTE||Ad===AL.LO_CLUSTER){if(Ai-Ah<0){AY.call(this,Al,Aj,X._BOTTOM,Ab);}else{AY.call(this,Al,Aj,X._TOP,Ab);}}else{if(this.mSeriesInfo.length===1){if(Ai-Ah<0){AY.call(this,Al,Aj,X._BOTTOM,Ab);}else{AY.call(this,Al,Aj,X._TOP,Ab);}}else{AY.call(this,Al,Aj,X._CENTER,Ab);}}}else{if(Ad===AL.LO_ABSOLUTE||Ad===AL.LO_CLUSTER){if(Ai-Ah<0){AY.call(this,Al,Aj,X._LEFT,Ab);}else{AY.call(this,Al,Aj,X._RIGHT,Ab);}}else{if(this.mSeriesInfo.length===1){if(Ai-Ah<0){AY.call(this,Al,Aj,X._LEFT,Ab);}else{AY.call(this,Al,Aj,X._RIGHT,Ab);}}else{AY.call(this,Al,Aj,X._CENTER,Ab);}}}}function r(Ao,Ah,Ai,Aj,Aa,Ak){var Ac=this.mChartContextPtr,Af=this.mDatasetPtr,An=Ac.mIsGraphMatrix,Ae={},Ag=new AH.TripleId({ObjectId:AS.DssGraphDataText}),Am=-3,Al,Ad;if(An){var Ab=Af.showSeriesDatalabel(Ao.mSeriesId);if(Ab){Ae.SeriesId=Ao.mSeriesId;Ae.GroupId=Ah.groupID;Ae.SeriesInfo=Ah.seriesInfoID;Ae.HostMarkerBound=Aj;Al=this.mSGMapLabel[Am];if(Al===null||Al===undefined){this.mSGMapLabel[Am]=new AH.GraphCollectionObject({TripleId:Ag,GraphObjectManager:this,CollectionType:j.CT_TEXT});}var Ap=false;if(Ap&&this.mBarRenderType===s){Ad=this.CreateOneDataLabel(Ah.groupID,this.mSeriesInfo[Ah.seriesInfoID].mSeriesId,Aa,this.mSGMapLabel[Am]);}else{Ad=this.CreateOneDataLabel(this.mSeriesInfo[Ah.seriesInfoID].mSeriesId,Ah.groupID,Aa,this.mSGMapLabel[Am]);}if(Ad!==null&&Ad!==undefined){Ae.Label=Ad;Ad.mIsShown=false;Q.call(this,Aj,Ad,Aa,Ak);this.mDataLabels.push(Ae);this.AddToMapAndList(Ad);}}}}function AR(Ak,Ab,Af,Ad,An){var Aq,Al,Ai,Ah,Ao,Ac,Ae,Am,Aj,Ap,Aa,Ar,Ag;Aq=this.hPrepareData(Ak);if(Aq===null||Aq===undefined){return ;}Al=this.hPrepareRect(Ak,Aq);Ao=new AH.Rect2D({Rect2D:Al.Rect});Ai=Al.AboveBase;Ah=Al.AxisOriginValue;if(Ao.width<0||Ao.height<0){return ;}Ac=new AH.Rect2D();Ac.x=Ao.x;Ac.y=Ao.y;Ac.width=Ao.width;Ac.height=Ao.height;if(!this.hUpdateBarRect(Ak,Ao,Ai,Aq)){return ;}Ab.push(Ao);if(An){Ae=false;Am=new AH.TripleId({ObjectId:AS.DssGraphDataText});Aj=new AH.GraphCollectionObject({TripleId:Am,GraphObjectManager:this,CollectionType:j.CT_TEXT});if(Ae&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===s){Ap=this.CreateOneDataLabel(Ak.groupID,this.mSeriesInfo[Ak.seriesInfoID].mSeriesId,Aq,Aj);}else{Ap=this.CreateOneDataLabel(this.mSeriesInfo[Ak.seriesInfoID].mSeriesId,Ak.groupID,Aq,Aj);}if(Ap!==null&&Ap!==undefined){Q.call(this,Ao,Ap,Aq,Ah,true,Ad);Aa=Ap.GetBoundingRect();Af.push(Aa);}}else{Am=new AH.TripleId({ObjectId:AS.DssGraphDataText});Ar=this.mSeriesInfo[Ak.seriesInfoID].mSeriesId;Am.mSeriesId=Ar;Ag=this.mSGMapLabel[Ar];if(Ag===null||Ag===undefined){this.mSGMapLabel[Ar]=new AH.GraphCollectionObject({TripleId:Am,GraphObjectManager:this,CollectionType:j.CT_TEXT});}r.call(this,Am,Ak,Ao,Ac,Aq,Ah);}}function AF(An,Ak,Al,Aa){var Ag=this.IsReverseGroupOrder(),Ap,Ah=this.mpABLPlotContext.mCategoryAxisPtr,Ad=false,Ao,Am,Ab=[],Ac,Af,Aj,Ai,Ae;this.initialSeries=[];An.splice(0,An.length);Ak.splice(0,Ak.length);if(this.mChartContextPtr.mIsGraphMatrix){Ap=Ah.mGroupCount;}else{Ap=this.mDatasetPtr.GetGroupCount();}for(Ao=0;Ao<Ap;++Ao){Am=Ao;if(Ag){Am=Ap-1-Am;}if(Ad&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===s){Ac=this.mDatasetPtr.GetGroupCount();for(Af=0;Af<Ac;++Af){Ab.push(Af);}}else{Ab=AJ.call(this,Am,Ab,l.VA_BOTH);}Ae=Ab.length;for(Aj=0;Aj<Ae;++Aj){Ai={};Ai.groupID=Am;Ai.seriesInfoID=Ab[Aj];AR.call(this,Ai,An,Ak,Al,Aa);}}}function y(Al){var Am=[],Ak=[],An=[],Ai=0,Ag,Af,Ae,Ab,Ah,Ac,Ad=this.mChartContextPtr,Aj=Ad.GetGraphMatrixContext(),Aa=5;if(Ad.mIsGraphMatrix){Aa=Aj.getPadding(AE.kDataLabel);}AF.call(this,Am,Ak,Al,true);for(Ag=0;Ag<Ak.length;++Ag){Ab=c.call(this,Ak[Ag],Aa);if(!Ab){continue;}Ah=true;for(Af=0;Af<Am.length;++Af){if(Ag===Af){continue;}Ac=g.call(this,Ak[Ag],Am[Af],Aa);if(!Ac){Ah=false;break;}}if(!Ah){continue;}for(Ae=0;Ae<An.length;++Ae){Ac=g.call(this,Ak[Ag],An[Ae],Aa);if(!Ac){Ah=false;break;}}if(Ah){++Ai;An.push(Ak[Ag]);}}return Ai;}function w(){var Aa,Ab;if(this.mSeriesInfo.length===0){return false;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();V.call(this);Aa=y.call(this,false);Ab=y.call(this,true);return(Ab>Aa);}function AX(Aa){var Ad=this.mChartContextPtr,Ac=Ad.mIsGraphMatrix,Ab;if(Ac&&Ad.mIsUniformAxisMode){Ab=Ad.getUniformAxisContext();if(Aa.x<Ab.mDataAreaLeftMargin||Aa.x+Aa.width>Ad.mGraphWidth-Ab.mDataAreaRightMargin){return false;}if(Aa.y<Ab.mDataAreaTopMargin||Aa.y+Aa.height>Ad.mGraphHeight-Ab.mDataAreaBottomMargin){return false;}}return true;}function AK(Aj){var Ao,An,Am,Al,Ae=this.mChartContextPtr,Ap=Ae.GetGraphMatrixContext(),As,Ab,Ac=this.mDataLabels,Aq,Ai=Ae.allowOverlapBetweenDatalabels(),Ad,Ak,Af,Ah,Ag=5;if(Ae.mIsGraphMatrix){Ag=Ap.getPadding(AE.kDataLabel);}Aq=Ac.length;for(Ao=0;Ao<Aq;++Ao){for(Al=0;Al<4;++Al){if(Ap.mMarkerShape===AU.DssGraphMarkerShapeGMTick){Ab=Al;AY.call(this,Ac[Ao].HostMarkerBound,Ac[Ao].Label,Ab,false);}else{if(Al>0){break;}}As=Ac[Ao].Label.GetBoundingRect();Ak=Ai||c.call(this,As,Ag);if(!Ak){continue;}Af=true;for(An=0;An<Aq;++An){if(An===Ao){continue;}Ah=Ai||g.call(this,As,Ac[An].HostMarkerBound,Ag);if(!Ah){Af=false;break;}}if(!Af){continue;}Ad=Aj.length;for(Am=0;Am<Ad;++Am){Ah=Ai||g.call(this,As,Aj[Am].GetBoundingRect(),Ag);if(!Ah){Af=false;break;}}if(W.call(this,this.mSeriesInfo[Ac[Ao].SeriesInfo].mValueAxis)){if(!AX.call(this,As)){Af=false;}}if(Af){Aj.push(Ac[Ao].Label);Ac[Ao].IsDisplayed=true;Ac[Ao].Label.mIsShown=true;if(Ap.mMarkerShape===AU.DssGraphMarkerShapeGMTick){break;}}}}if(Aj&&Aj.length>0){var Aa={x:0,y:0,width:0,height:0};Aj.forEach(function(Au,At){var Av=Au.GetBoundingRect();if(At===0){Aa={x:Av.x,y:Av.y,width:Av.width,height:Av.height};return true;}if(Av.x<Aa.x&&Av.x+Av.width>Aa.x+Aa.width){Aa.width=Av.width;Aa.x=Av.x;}else{if(Av.x<Aa.x){Aa.width+=Aa.x-Av.x;Aa.x=Av.x;}else{if(Av.x+Av.width>Aa.x+Aa.width){Aa.width+=Av.x+Av.width-Aa.x-Aa.width;}}}if(Av.y<Aa.y&&Av.y+Av.height>Aa.y+Aa.height){Aa.height=Av.height;Aa.y=Av.y;}else{if(Av.y<Aa.y){Aa.height+=Aa.y-Av.y;Aa.y=Av.y;}else{if(Av.y+Av.height>Aa.y+Aa.height){Aa.height+=Av.y+Av.height-Aa.y-Aa.height;}}}});var Ar=this.mpABLPlot.dataLabelManager;if(!Ar){Ar=this.mpABLPlot.dataLabelManager=new AH.DataLabelManager({DataArea:new AH.Rect2D(Aa)});Ar.ChartContext=Ae;}if(Af&&!Ai){Aj.forEach(function(At){Ar.UpdateMatrixDataLabel(At.GetBoundingRect());});}}}mstrmojo.chart.BarSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.BarSeriesRenderer",mSGMapLabel:[],mpSeriesLineInfo:null,mBarRenderType:AP,mBarWidth:0,mGroupSize:0,mSpaceBetweenRiser:0,mSpaceBetweenGroup:0,mBarColumns:-1,mBarOptions:null,mAddedLegendMarkerSet:null,mDataLabels:null,init:function t(Aa){this._super(Aa);this.mSGMapLabel=[];this.mAddedLegendMarkerSet=[];this.mDataLabels=[];this.mBarOptions={mOverlap:0,mGapWidth:40,mRiserShape:0,mShowErrorBar:false,mHasMiddleValue:false,mMiddleValueSize:50,mShowSeriesLines:false,mColorBySeries:true};this.LoadProperties();},SetDeviceDataArea:function F(Aa){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AH.Rect2D({Rect2D:Aa});}else{this.mDeviceDataArea.ResetRect(Aa);}}this.mBarRenderType=n.call(this);},AddTextToMapAndList:function AC(Aa,Ab){var Ad,Ac,Af,Ae,Ag,Ah;Af=this.mSGMapLabel.length;for(Ac=0;Ac<Af;++Ac){Ag=this.mSGMapLabel[Ac];if(Ag!==null&&Ag!==undefined){Ae=Ag.GetCollectionSize();for(Ad=0;Ad<Ae;++Ad){Ab.push(Ag.GetObjectByIndex(Ad));}Ah=Ag.mTripleId;Aa.push(Ah,Ag);}}this.mSGMapLabel.splice(0,this.mSGMapLabel.length);this._super(Aa,Ab);},CreateTrendLine:function a(Ac,Ab,Aa){this._super(Ac,Ab,Aa);},GenerateMapAndList:function b(Aa){var Ab=this.mChartContextPtr;if(Ab.mImageUsage!=k.OBJECT_CLIP_COMPUTATION){return this.GenerateByValueAxis(l.VA_BOTH,Aa);}},GenerateByValueAxis:function G(Ae,Ac){var Ad=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();V.call(this);Z.call(this,Ae);if(Ad.mIsGraphMatrix){if(Ad.mImageUsage===k.GENERAL){if(this.mDatasetPtr.showDatalabels()){var Ab=[],Aa=[];AF.call(this,Ab,Aa,false,false);AK.call(this,Ac);}this.GenerateTrendLine();this.GenerateRefLine();}}this.populateRenderSequence();},LoadProperties:function AA(){var Ae=this.mChartContextPtr,Ac=this.mBarOptions,Ad,Aa=Ae.GetGraphMatrixContext(),Ab=Aa.mElementsInfo;if(Ae.mIsGraphMatrix){Ac.mColorBySeries=!this.mChartContextPtr.isLegendByGroup();Ac.mGapWidth=10;if(Ab.Max.Mode===u._MANUAL){Ad=Ab.Max.Size*100;if(Ad<1){Ad=1;}if(Ad>100){Ad=99;}Ac.mGapWidth=100-Ad;}}if(Ae.mImageUsage!==0){return ;}},ShouldRotateDataLabel:function x(){var Ab=this.mChartContextPtr.GetGraphMatrixContext(),Ac=this.mpABLPlotContext.mABLOptions,Aa=Ac.mOrientation,Ad=Ac.mLayout;if(Ab.mMarkerShape===AU.DssGraphMarkerShapeGMTick){return false;}if(Aa===p.OR_HORIZONTAL){return false;}if(Ab.isCombinationChart()&&(Ad===AL.LO_ABSOLUTE)){Ad=AL.LO_CLUSTER;}if(Ad===AL.LO_ABSOLUTE||this.mSeriesInfo.length===1){return w.call(this);}if(Ad===AL.LO_CLUSTER){return true;}return false;},GetSeriesOrderByType:function e(Ab,Aa,Ac){return AJ.call(this,Ab,Aa,Ac);},GetRiserStartPosAndSize:function d(Ab,Aa){return P.call(this,Ab,Aa);},hUpdateBarRect:function AT(Aj,Ak,Ah,Ab){var Ad=this.mChartContextPtr,Ai,An,Af,Aa,Am=this.mpABLPlotContext,Ao=Am.mABLOptions,Ae=this.mDatasetPtr,Al=this.mSeriesInfo,Ac=Ao.mOrientation,Ag=Ao.mLayout;if(!Ad.mIsGraphMatrix){return true;}if(Ab!==0&&(this.mBarRenderType===z||this.mBarRenderType===R)){Ab=Ae.GetData(Al[Aj.seriesInfoID].mSeriesId,Aj.groupID,0);}if(Ab!==0){if(Ac===p.OR_VERTICAL&&Ak.height===0){Ak.height=1;}if(Ac===p.OR_HORIZONTAL&&Ak.width===0){Ak.width=1;}}if(Ak.width*Ak.height===0){return false;}Ai=this.mSeriesInfo[Aj.seriesInfoID].mValueAxis;An=Am.mValueAxis[Ai];if(An===null){return false;}AB.ResetRect(Ak);Af=An.GetBasePosition(true);Aa=An.GetBaseValue(true);if(Af===null||Aa===null){return false;}if(Ac===p.OR_VERTICAL){if(An.isBaseLineQualified()){if(AB.y===Af){if(Ah){--(AB.y);--(AB.y);}else{}if(AB.height>1&&Ag===AL.LO_STACKED){++(AB.y);--(AB.height);}}else{if(AB.y+AB.height===Af){if(AB.height>1){AB.height--;}else{AB.y--;}}}}else{if(AB.y===Af){if(Ab>=Aa){--(AB.y);--(AB.y);}else{if(AB.height>1){AB.y++;AB.height--;}}}if(AB.y+AB.height===Af&&AB.height===1){if(Ab>=Aa){--(AB.y);++(AB.height);}}}}if(Ac===p.OR_HORIZONTAL){if(An.isBaseLineQualified()){if(AB.x===Af){if(Ah){++(AB.x);}else{--(AB.x);--(AB.x);}if(AB.width>1&&Ag===AL.LO_STACKED){--(AB.width);}}else{if(AB.x+AB.width===Af){if(AB.width>1){}else{AB.x--;}}}}else{if(AB.x===Af){if(Ah&&Ab>Aa){if(AB.x>Af){AB.width+=AB.x;AB.x=Af;}}}if(AB.x+AB.width===Af){--(AB.x);++(AB.width);}}}Ak.copy(AB);return true;},hPrepareData:function K(Ab){var Ac,Ae=this.mChartContextPtr,Aa;Ac=this.GetData(Ab.seriesInfoID,Ab.groupID);if(Ac===null){if(Ae.mIsGraphMatrix===false){Aa=AW.call(this,Ab);if(Aa){if(this.mBarOptions.mColorBySeries&&!H.call(this,Ab.seriesInfoID)){this.AddLegendMarkerToCollection(Ab.seriesInfoID,Aa);}}}}else{var Ad={mSeriesId:this.mSeriesInfo[Ab.seriesInfoID].mSeriesId,mGroupId:Ab.groupID};if(Ae.checkColorByAndSizeByValue(Ad,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){Ac=null;}}return Ac;},hPrepareRect:function C(Ak,At,Aj){var Ac=this.mpABLPlotContext,Ai=Ac.mABLOptions,Ae=this.mSeriesInfo[Ak.seriesInfoID].mValueAxis,Ao=Ac.mValueAxis[Ae];var Ah=Ao.GetAxisOriginValue(),Ar=Ao.GetBaseValue(true),Ad=At>Ar,Aq=P.call(this,Ak,Aj),Ab=Aq.Start,Al=Aq.Size,Aa=Ao.GetBasePosition(true),Ap=Ao.GetPositionByValue(At);O.Reset(0,0,0,0);if(Ap===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ad};}if(this.mBarRenderType===z||this.mBarRenderType===R){var Ag,Au=false,Am,An,Af;if(Ah===null||Ah===0||this.mBarRenderType===R){Au=true;}else{Am=this.updateGroupStackInfoWithBase(Ae,Ak.groupID,Ah);An=this.getSeriesOffsetIntoStackedInfo(Ae,Ak.groupID,Ak.seriesInfoID);var As=Am[An];if(As.Max===null||As.Min===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ad};}Aa=Ao.ValueToPosition(As.Min);Ap=Ao.ValueToPosition(As.Max);}if(Au){if(this.mBarRenderType===z&&Ao.mOptions.mUseLogarithmicScale&&this.initialSeries[Ak.groupID]===undefined){Ag=Math.max(Ar,1);this.initialSeries[Ak.groupID]=Ak.seriesInfoID;}else{Ag=this.GetData(Ak.seriesInfoID,Ak.groupID,true);}Af=this.GetData(Ak.seriesInfoID,Ak.groupID);Aa=Ao.GetPositionByValue(Ag);Ap=Ao.GetPositionByValue(Af);}if(Aa===null||Ap===null){O.width=O.height=-1;return{Rect:O,AboveBase:Ad};}Ad=(Af>=Ar);}switch(Ai.mOrientation){case p.OR_VERTICAL:O.x=Ab;O.y=Math.min(Aa,Ap);O.width=Al;O.height=Math.abs(Aa-Ap);break;case p.OR_HORIZONTAL:O.x=Math.min(Aa,Ap);O.y=Ab;O.width=Math.abs(Aa-Ap);O.height=Al;break;}return{Rect:O,AboveBase:Ad,AxisOriginValue:(Ah||0)};},hPostProcessOneBar:function AV(Ad,Af){var Aa=AW.call(this,Ad);if(Af!==null){var Ab=this.mBarOptions;if(Aa){Aa.AddGraphObject(Af);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mHasColorBy&&!this.mChartContextPtr.mDebugUseNewProperties){var Ae=Af.mTripleId;AQ.call(this,Ae,Af);}}this.mGraphObjectList.push(Af);this.AddToMap(Af);if(Ab.mColorBySeries&&!H.call(this,Ad.seriesInfoID)){this.AddLegendMarkerToCollection(Ad.seriesInfoID,Aa);}else{if(!this.mBarOptions.mColorBySeries&&this.mChartContextPtr.mIsGraphMatrix){if(this.mAddedLegendMarkerSet[Ad.groupID]===null&&this.mLegendPtr!==null){var Ac;if(Aa){Ac=Aa.GetFormatFill();}else{Ac=Af.GetFormatFill();}this.mLegendPtr.UpdateFormatForLegendMarker(Ad.groupID,Ac,null);this.mAddedLegendMarkerSet[Ad.groupID]=true;}}}}},hPrepareRectangleObject:function AG(Ag,Ai,Aa){if(Ai.width<0||Ai.height<0){return null;}var Ab=this.mChartContextPtr,Ae=this.mpABLPlot.mABLPlotContext,Af=Ae.mABLOptions,Ah=AW.call(this,Ag),Ac=new AH.TripleId({ObjectId:AS.DssGraphRiser,SeriesId:this.mSeriesInfo[Ag.seriesInfoID].mSeriesId,GroupId:Ag.groupID}),Ad;if(Af.mUseDepth){console.alert("Missing method for depth rectangle object");}else{Ad=new AH.RectangleObject({TripleId:Ac,GraphObjectManager:this,Area:Ai,GraphCollectionObject:Ah,Shape:N._BAR,hasFill:true});if(Ab.mIsGraphMatrix){if(Aa){Ad.mBorderOpenType=this.mIsVertical?AZ.BOTTOM:AZ.LEFT;}else{Ad.mBorderOpenType=this.mIsVertical?AZ.TOP:AZ.RIGHT;}}}if(Ab.mUseAnimation){Ad.SetAnimationEnable(true);Ad.SetProgress(1);}return Ad;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumValueAxis","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","ValuePlot","GraphObjectManager");var e=mstrmojo.chart,a=e.enums,B=a.EnumGraphMajorType,D=a.EnumAxisDirection,A=a.EnumOrientation,d=a.EnumValueAxis,g=a.EnumDSSGraphObjectManager,Z=e.gNullTripleId,U=mstrmojo.chart.model,j=U.enums,J=j.EnumDSSGraphType,K=j.EnumDSSGraphProperty,M=j.EnumDSSGraphObject;var G=new e.Rect2D(),I=new e.Rect2D();function F(k){var l=this.mChartContextPtr;return l.mirrorPrimaryInBubbleScatter(k);}function P(l,k,n){var o=this.mChartContextPtr;if(o.mIsGraphMatrix===false){return l;}if(l==="X1"||l==="Y1"){if(F.call(this,n)){l=l[0]+"2";k=(l==="X2")?4:2;}}return{Key:l,Index:k};}function N(){var k=this.mChartContextPtr.GetGraphType();return((k===J.DssGraphTypeDualAxis_X_Y_Scatter)||(k===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels)||(k===J.DssGraphTypeBubble_DualAxis)||(k===J.DssGraphTypeBubble_DualAxis_With_Labels));}function c(){return(this.mChartAreaOptions.orientation===A.OR_VERTICAL);}function O(q,o){var l=this.Y1Axis[o],r,p=new e.Rect2D({Rect2D:q}),n,s,k;l.TrimDeviceDataArea(p);l.SetDeviceDataArea(p);n=new e.Rect2D({Rect2D:p});l.AdjustDeviceDataArea(n,true);s=new e.Rect2D({Rect2D:n});if(N.call(this)){r=this.Y2Axis[o];r.TrimDeviceDataArea(p);r.SetDeviceDataArea(p);k=new e.Rect2D({Rect2D:p});r.AdjustDeviceDataArea(k,true);this.RectangleUnion(n,k,s);}l.UpdateTitleAndLabelArea(s);if(N.call(this)){r.UpdateTitleAndLabelArea(s);}}function C(l,n){var k=0,o=[this.XAxis,this.Y1Axis,this.Y2Axis];if(((n===1||n===2)&&c.call(this))||(n===0&&!c.call(this))){k=l;}return o[n][k];}function E(u,z){var o=0,t=0,p=Number.MAX_VALUE,y=-p,n,x,s=0,w=[],r=0,AC,l,k,AB=false;if(this.mChartContextPtr.mIsUniformAxisMode){var q=this.mChartContextPtr.getUniformAxisContext(),AA=q.ValueAxis;switch(z){case 0:p=AA.X1.Min;y=AA.X1.Max;n=AA.X1.Metrics.concat();break;case 1:p=AA.Y1.Min;y=AA.Y1.Max;n=AA.Y1.Metrics.concat();break;case 2:p=AA.Y2.Min;y=AA.Y2.Max;n=AA.Y2.Metrics.concat();break;case 3:p=AA.Z.Min;y=AA.Z.Max;n=[];break;case 4:p=AA.X2.Min;y=AA.X2.Max;n=AA.X2.Metrics.concat();break;default:p=AA.Y1.Min;y=AA.Y1.Max;n=AA.Y1.Metrics.concat();break;}return{Min:p,Max:y,Metrics:n};}if(z===1||z===2){t=1;}else{if(z===3){t=2;}}x=this.mDatasetPtr.GetGroupCount();if(u===-3){s=this.mDatasetPtr.GetSeriesCount();for(o=0;o<s;++o){w.push(o);}}else{w=this.mChartAreaOptions.seriesDistribution[u];}AC=w.length;for(o=0;o<x;++o){for(r=0;r<AC;++r){if((z===0||z===3)||((z===1||z===2)&&((z-1)===this.VecSeriesVAIndex[w[r]]))){l=this.mDatasetPtr.GetData(w[r],o,t);}if(l!==null){k=l;if(!AB){AB=true;}if(p>k){p=k;}if(y<k){y=k;}}}}if(p>y){p=0;y=0;}if(AB){return{Min:p,Max:y};}}function L(s){var l=[],k,o,r=this.Y1Axis.length,n,q,p;k=N.call(this);for(o=0;o<r;++o){q=new e.Rect2D({Rect2D:s});p=new e.Rect2D({Rect2D:s});if(k){this.Y2Axis[o].ReserveTitleAndLabels(p,this.mBottomMargin,this.mTopMargin);q=p;q.y=s.y;q.height=s.height;}this.Y1Axis[o].ReserveTitleAndLabels(q,this.mBottomMargin,this.mTopMargin);if(k){p=q;p.y=s.y;p.height=s.height;}this.Y1Axis[o].AdjustDeviceDataArea(q,false);l.push(q);if(k){this.Y2Axis[o].AdjustDeviceDataArea(p,false);}l.push(p);}n=l.length;I.ResetRect(l[0]);G.Reset(0,0,0,0);var t;for(o=1;o<n;++o){if(!this.RectangleIntersection(I,l[o],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function Y(o){var q=[],n,k=this.XAxis.length,l,r,p;for(n=0;n<k;++n){p=this.XAxis[n];r=new e.Rect2D({Rect2D:o});p.ReserveTitleAndLabels(r,this.mLeftMargin,this.mRightMargin);p.AdjustDeviceDataArea(r,false);q.push(r);}I.ResetRect(q[0]);G.Reset(0,0,0,0);l=q.length;for(n=1;n<l;++n){if(!this.RectangleIntersection(I,q[n],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function S(p){var n,l,q=this.Y1Axis.length,k=this.XAxis.length,o=this.mChartAreaOptions.chartAreaNumber;for(n=0;n<q;++n){if(c.call(this)){this.Y1Axis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);}}else{for(l=0;l<o;++l){this.Y1Axis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);}}}}for(n=0;n<k;++n){if(c.call(this)){for(l=0;l<o;++l){this.XAxis[n].GenerateGridLines(p[l],l,this.mGraphObjectList);}}else{this.XAxis[n].GenerateGridLines(p[n],n,this.mGraphObjectList);}}}function f(k){}function V(){var n,o=this.Y1Axis.length,k=this.Y2Axis.length,l=this.XAxis.length;for(n=0;n<o;++n){this.Y1Axis[n].generateAxisLine(this.mGraphObjectList);}if(N.call(this)){for(n=0;n<k;++n){this.Y2Axis[n].generateAxisLine(this.mGraphObjectList);}}for(n=0;n<l;++n){this.XAxis[n].generateAxisLine(this.mGraphObjectList);}}function Q(){var n=this.mChartContextPtr.GetGraphMajorType(),k=0,l;if(n===B.GMT_SCATTER||n===B.GMT_BUBBLE){k=this.mDatasetPtr.GetSeriesCount();l=this.mChartContextPtr.GetGraphType();if(l===J.DssGraphTypeX_Y_Scatter||l===J.DssGraphTypeX_Y_Scatter_with_Labels||l===J.DssGraphTypeBubble||l===J.DssGraphTypeBubble_With_Labels){return k>=1;}if(l===J.DssGraphTypeDualAxis_X_Y_Scatter||l===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels||l===J.DssGraphTypeBubble_DualAxis||l===J.DssGraphTypeBubble_DualAxis_With_Labels){return k>=2;}}return false;}function H(n,s,t,k){var q=this.mChartContextPtr.getAxisTripleId(n),o=new e.ValueAxis({TripleId:q,GraphObjectManager:this,Min:s.Min,Max:s.Max,LargerGridInterval:false,PrimaryMetricIndex:s.Metrics,IsPercent:false,AxisDirection:t,IsShown:k,Key:n});var l=this.mChartContextPtr;if(l.mIsGraphMatrix&&o.mIsUniformAxis===false){var p=l.getUniformAxisInformation(q.mObjectId),r=p.CondenseEnforced;o.checkCondense(!!r);}return o;}function h(n,l,q,s,o,k){var r=E.call(this,l,q);if(r){var p=H.call(this,n,r,s,o);k.push(p);this.mGraphObjectManagerList.push(p);}}mstrmojo.chart.ValuePlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.ValuePlotManager",ValuePlot:[],XAxis:[],Y1Axis:[],Y2Axis:[],ZAxis:[],VecSeriesVAIndex:[],init:function b(k){this._super(k);this.ValuePlot=[];this.XAxis=[];this.Y1Axis=[];this.Y2Axis=[];this.ZAxis=[];this.VecSeriesVAIndex=[];},Draw:function X(){var o,l=0,p=[this.XAxis,this.Y2Axis,this.Y1Axis],n,k=this.ValuePlot;e.GraphObjectManager.prototype.Draw.apply(this,[]);for(o=0;o<=2;++o){n=p[o];for(l=0;l<n.length;++l){n[l].Draw();}}for(o=0;o<k.length;++o){k[o].Draw();}},GenerateMapAndList:function W(){var p=this.mChartContextPtr,q=this.mPlotArea,AG=this.mGraphObjectManagerList,r=p.isUADataAreaOutput(),z,AB,w,x,l,AD,AE,AF=0,n,s,k,AI,AH,AA,o,u=[],y,t;if(q.width<=0||q.height<=0){return ;}this.LoadProperties();if(!Q.call(this)){return ;}if(c.call(this)){AB=P.call(this,"X1",0,true);h.call(this,AB.Key,-3,AB.Index,D.AD_X,!r,this.XAxis);for(AF=0;AF<this.mChartAreaOptions.chartAreaNumber;++AF){AB=P.call(this,"Y1",1,false);h.call(this,AB.Key,AF,AB.Index,D.AD_Y,!r,this.Y1Axis);if(N.call(this)){AB=P.call(this,"Y2",2,false);h.call(this,AB.Key,AF,AB.Index,D.AD_Y,!r,this.Y2Axis);}}}else{AB=P.call(this,"Y1",1,false);h.call(this,AB.Key,-3,AB.Index,D.AD_Y,!r,this.Y1Axis);if(N.call(this)){AB=P.call(this,"Y2",2,false);h.call(this,AB.Key,-3,AB.Index,D.AD_Y,!r,this.Y2Axis);}for(AF=0;AF<this.mChartAreaOptions.chartAreaNumber;++AF){AB=P.call(this,"X1",0,true);h.call(this,AB.Key,AF,AB.Index,D.AD_X,!r,this.XAxis);}}if(p.GetGraphMajorType()===B.GMT_BUBBLE){if(p.isUADataAreaOutput()){n=p.getUniformAxisContext();z={Metrics:[]};z.Min=n.ValueAxis.Z.Min;z.Max=n.ValueAxis.Z.Max;}else{z=E.call(this,-3,3);}if(z){AD=H.call(this,"Z",z,D.AD_Z,false);this.ZAxis.push(AD);AG.push(AD);}}k=Y.call(this,q);this.mLeftMargin+=k.x-q.x;this.mRightMargin+=q.x+q.width-(k.x+k.width);this.mTopMargin+=k.y-q.y;this.mBottomMargin+=q.y+q.height-(k.y+k.height);k.width=Math.max(0,k.width);k.height=Math.max(0,k.height);s=L.call(this,k);s.width=Math.max(0,s.width);s.height=Math.max(0,s.height);AH=q.y+Math.max(k.y-q.y,s.y-k.y);AA=q.y+q.height-Math.max(q.y+q.height-(k.y+k.height),k.y+k.height-(s.y+s.height))-AH;s.y=AH;s.height=AA;AI=q.x+Math.max(k.x-q.x,s.x-k.x);o=q.x+q.width-Math.max(q.x+q.width-(k.x+k.width),k.x+k.width-(s.x+s.width))-AI;s.x=AI;s.width=o;if(p.mManualLayoutMode&&!this.mRecalculateFrame){s=q;}else{}this.CalculateChartAreas(s,u);if(p.isUADataAreaOutput()){var AC=p.getUniformAxisContext();u[0].x=AC.mDataAreaLeftMargin;u[0].y=AC.mDataAreaTopMargin;u[0].width=p.mGraphWidth-u[0].x-AC.mDataAreaRightMargin;u[0].height=p.mGraphHeight-u[0].y-AC.mDataAreaBottomMargin;s=u[0];}if(c.call(this)){k=new e.Rect2D({Rect2D:s});w=this.XAxis[0];w.TrimDeviceDataArea(k);w.SetDeviceDataArea(k);w.AdjustDeviceDataArea(k,true);w.UpdateTitleAndLabelArea(k);for(AF=0;AF<this.mChartAreaOptions.chartAreaNumber;++AF){O.call(this,u[AF],AF);}}else{O.call(this,s,0);for(AF=0;AF<this.mChartAreaOptions.chartAreaNumber;++AF){w=this.XAxis[AF];k=new e.Rect2D({Rect2D:u[AF]});w.TrimDeviceDataArea(k);w.SetDeviceDataArea(k);w.AdjustDeviceDataArea(k,true);w.UpdateTitleAndLabelArea(k);}}if(p.mManualLayoutMode&&!this.mRecalculateFrame){s=q;}for(AF=0;AF<this.mChartAreaOptions.chartAreaNumber;++AF){if(!p.mIsGraphMatrix){AE=new e.TripleId({ObjectId:M.DssGraphFrame,SeriesId:AF});y=new e.RectangleObject({TripleId:AE,GraphObjectManager:this,Area:u[AF]});this.AddToMapAndList(y);}f.call(this,u);S.call(this,u);V.call(this);w=C.call(this,AF,0);x=C.call(this,AF,1);if(N.call(this)){l=C.call(this,AF,2);}if(p.mIsGraphMatrix){AE=e.PlotId0;}else{AE=new e.TripleId({ObjectId:g.DssPlot,SeriesId:AF});}t=new e.ValuePlot({TripleId:AE,GraphObjectManager:this,Area:u[AF]});this.ValuePlot.push(t);AG.push(t);t.SetDataset(this.mDatasetPtr);t.mLegendPtr=this.mLegendPtr;t.AssignValueAxis(w,0);t.AssignValueAxis(x,1);if(N.call(this)){t.AssignValueAxis(l,2);}if(p.GetGraphMajorType()===B.GMT_BUBBLE){t.AssignValueAxis(this.ZAxis[0],3);}t.AssignSeriesInfo(this.mChartAreaOptions.seriesDistribution[AF],this.VecSeriesVAIndex);t.GenerateMapAndList();}if(p.isUADataAreaOutput()){n=p.getUniformAxisContext();u[0].x=n.mDataAreaLeftMargin;u[0].y=n.mDataAreaTopMargin;u[0].width=p.mGraphWidth-u[0].x-n.mDataAreaRightMargin;u[0].height=p.mGraphHeight-u[0].y-n.mDataAreaBottomMargin;s.ResetRect(u[0]);}},LoadProperties:function R(){var r=this.mChartContextPtr,n=this.VecSeriesVAIndex,l,k,o,q,p;this._super();l=this.mDatasetPtr.GetSeriesCount();n.splice(0,n.length);for(k=0;k<l;++k){q=new e.TripleId({ObjectId:M.DssGraphRiser,SeriesId:k});n[k]=d.VA_Y1;if(N.call(this)){p=r.GetProperty(K.DssGraph2DSplitYAutomatic,Z);if(p){o=r.GetProperty(K.DssGraph2DSDSplitY,q);if(o){n[k]=(o===false)?d.VA_Y1:d.VA_Y2;}}else{n[k]=(k%2===0)?d.VA_Y1:d.VA_Y2;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","StraightLineObject","MarkerObject","SeriesRenderer","BarSeriesRenderer","Plot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumOrientation","EnumGraphMatrixThemeType","EnumValueAxis","EnumFontRotation","EnumFontRotation","EnumGenericDirection");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var X=mstrmojo.chart,J=X.enums,F=J.EnumOrientation,W=J.EnumGraphMatrixThemeType,B=J.EnumCollectionType,E=J.EnumFontRotation,P=mstrmojo.chart.model,L=P.enums,c=L.EnumDSSGraphDataTextPosition,k=L.EnumDSSGraphObject;var R=X.ChartConstants,G=mstrmojo.chart.common.Utility,b=0.9,K=5,a=0,Q=2,e=3,M=4,D=100,Y=10,C=3,g=1,I=1;function l(z){var s={},x,r,q=[0.1,0.2,0.3],u,y,w,t=this.mChartContextPtr;if(this.oneGroupBandColors){return this.oneGroupBandColors;}this.oneGroupBandColors=null;switch(this.bandOptions.ColorMode){case Q:x=7697781;break;case a:u=new X.TripleId([k.DssGraphRiser,C,z]);y=this.GetGraphObject(u,true);if(y&&y.mFormatFillPtr){w=y.mFormatFillPtr.mSimpleColor;}else{w=t.GetColorValue(u,0,true);}x=w;break;case M:r=[16711680,65280,16776960];break;case e:r=[255,16776960,65280];break;default:break;}if(x){s.Color=x;}if(r){if(this.bandOptions.DescentLayout){s.Colors=r.reverse();}else{s.Colors=r;}}s.Alphas=q;this.oneGroupBandColors=s;return s;}function O(AB,r){r=r||0;var z,AD,t;z=this.mDatasetPtr.getBandDivision(AB,r);if(z.Metrics&&z.Metrics.length){z=z.Metrics;AD=[];var AA,s=this.mpABLPlotContext,y=this.mSeriesInfo[r].mValueAxis,AC=s.mValueAxis[y],w=AC.mMinTick,q=AC.mMaxTick-w,u=z.length;for(t=0;t<u;++t){if(t===u-1){AA=1;}else{AA=z[t];AA=Math.max(AA-w/q,0);AA=Math.min(AA,1);}AD.push(AA);}}else{if(z.Ratios&&z.Ratios.length){AD=z.Ratios;}}return(AD||[3/11,6/11,1]);}function A(AA,r){r=r||0;if(this.oneGroupBandValues){return this.oneGroupBandValues;}var u=O.call(this,AA,r),s=this.mpABLPlotContext,y=this.mSeriesInfo[r].mValueAxis,AB=s.mValueAxis[y],x=AB.mMinTick,q=AB.mMaxTick-x,z=[],t,w=u.length;for(t=0;t<w;++t){z.push(x+u[t]*q);}this.oneGroupBandValues=z;return z;}function Z(){if(this.mBarWidth<=0){var w=this.mBarOptions,x=this.bandOptions;if(this.mBarColumns===-1){w.mGapWidth=0;this.mBarColumns=1;var r=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),u=x.Width.Padding;this.mBarWidth=(r-2*u)*x.Width.Ratio;this.mBarWidth=Math.round(this.mBarWidth);var t=this.bandOptions.Width.Limit;this.mBarWidth=Math.min(this.mBarWidth,t.Max);this.mBarWidth=Math.max(this.mBarWidth,t.Min);this.mBarWidth=Math.round(this.mBarWidth);x.Width.Padding=u=Math.max((r-this.mBarWidth)/2,0);this.mSpaceBetweenRiser=0;this.mSpaceBetweenGroup=u*2;}}var q=this.mBarWidth,s;if(G.isIntegar(q)){s=q%3;this.bulletWidth=(q-s)/3+s;}else{this.bulletWidth=q/3;}}function p(AD,AB){var AI=AD.seriesInfoID,z=AI>=C&&AI<C+g,u=AB.mRect,x=0,s=this.mpABLPlotContext,AC=s.mABLOptions,AG=s.mCategoryAxisPtr,y=AD.groupID;this.hPostProcessOneBar(AD,AB);if(z){switch(AC.mOrientation){case F.OR_VERTICAL:x=Math.abs(AG.getGroupMiddlePos(y)-u.GetBottomMiddle().x);u.x+=x;break;case F.OR_HORIZONTAL:x=Math.abs(AG.getGroupMiddlePos(y)-u.GetLeftMiddle().y);u.y-=x;break;}}else{var w=this.mSeriesInfo[AD.seriesInfoID].mValueAxis,AH=s.mValueAxis[w],r=A.call(this,AD.groupID),q=AD.seriesInfoID,AF=r[q],t=AH.ValueToPosition(AF),AJ=AH.ValueToPosition(AH.mMinTick);switch(AC.mOrientation){case F.OR_VERTICAL:if(AD.seriesInfoID!==0){AF=r[q-1];AJ=AH.ValueToPosition(AF);}u.y=t;u.height=Math.abs(t-AJ);break;case F.OR_HORIZONTAL:if(AD.seriesInfoID!==0){AF=r[q-1];AJ=AH.ValueToPosition(AF);}u.x=AJ;u.width=Math.abs(t-AJ);break;}var AA=AB.mFormatFillPtr,AE=l.call(this,AD.groupID);AA.mSimpleColor=AE.Color||AE.Colors[AD.seriesInfoID]||255;AA.mAlpha=AE.Alphas[AD.seriesInfoID]*255||255;}}function S(t,y){var u=t.seriesInfoID,w=u>=C&&u<C+g,AA={Bar:null,AddToMapAndList:false};var r=this.PrepareData(t,w);if(r===null||r===undefined){return AA;}var x=this.hPrepareRect(t,r,w?this.bulletWidth:this.mBarWidth),z=x.Rect,q=x.AboveBase;if(w){if(!this.hUpdateBarRect(t,z,q,r)){return AA;}}if(z.width<=0||z.height<=0){return AA;}if(!y){var s=this.hPrepareRectangleObject(t,z,q);if(s){p.call(this,t,s);}AA.Bar=s;AA.AddToMapAndList=true;}return AA;}function V(AC,AF,y){y=y||0;AF=AF||false;if(AF){return ;}var u=this.mChartContextPtr,AI=u.GetGraphMatrixContext(),r=this.mpABLPlotContext,AE=this.mDatasetPtr.GetData(AC.seriesInfoID,AC.groupID),x=this.mSeriesInfo[y].mValueAxis,AH=r.mValueAxis[x],AA=r.mABLOptions,AB,AD,AG=[],t=new X.Point2D(),s=new X.Point2D(),w=new X.TripleId([k.DssGraphRiser,0,AC.groupID]),AJ=new X.TripleId([k.DssGraphDataLine,AC.seriesInfoID,AC.groupID]);AD=this.GetGraphObject(w);if(AD){var q=AD.GetBoundingRect();switch(AA.mOrientation){case F.OR_VERTICAL:t.x=q.GetLeftMiddle().x;s.x=q.GetRightMiddle().x;t.y=s.y=AH.ValueToPosition(AE);break;case F.OR_HORIZONTAL:t.y=q.GetTopMiddle().y;s.y=q.GetBottomMiddle().y;t.x=s.x=AH.ValueToPosition(AE);break;}}else{var z=this.GetRiserStartPosAndSize(AC);switch(AA.mOrientation){case F.OR_VERTICAL:t.x=z.Start;s.x=z.Start+z.Size;t.y=s.y=AH.ValueToPosition(AE);break;case F.OR_HORIZONTAL:t.y=z.Start;s.y=z.Start+z.Size;t.x=s.x=AH.ValueToPosition(AE);break;}}AG.push(t);AG.push(s);AB=new X.StraightLineObject({TripleId:AJ,GraphObjectManager:this,StartPoint:AG[0],EndPoint:AG[1],GraphCollectionObject:null});if(AB){this.AddToMapAndList(AB);}}function H(z,AC,AF,s,AI,t){var w,x,AD,AE,u=this.mChartContextPtr,y=this.mIsVertical,AG;s=s||false;w=y?AF.GetTopMiddle():AF.GetRightMiddle();x=y?AF.GetBottomMiddle():AF.GetLeftMiddle();AD=false;AE=this.GetData(AC.seriesInfoID,AC.groupID);if(AE!==null){AG=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AC.seriesInfoID].mValueAxis];AD=(AE<0)^AG.IsReverseOrder();}else{return false;}if(AI===undefined){AI=0;}if(t===undefined){t=this.mIsVertical?u.mGraphHeight:u.mGraphWidth;}var q=z.GetBoundingRect(),AH=u.GetGraphMatrixContext();if(AD){w.swapPoints(x);AI=0;t=AG.GetBasePosition();}var AB=AH.getPadding(R.kLabelToChart),AA=this.mpABLPlotContext.mABLOptions,r=AA.mTextPosition;switch(r){case c.DssGraphDTPositionCenter:break;case c.DssGraphDTPositionInMin:case c.DssGraphDTPositionOutMax:if(s){if(AD){if(y){w.y-=AB;}else{w.x+=AB;}}else{if(y){w.y+=AB;}else{w.x-=AB;}}}else{if(AD){if(y){w.y+=AB;}else{w.x-=AB;}}else{if(y){w.y-=AB;}else{w.x+=AB;}}}break;case c.DssGraphDTPositionOutMin:case c.DssGraphDTPositionInMax:break;default:break;}this.MoveLabel(AC.groupID,z,w,x,AC.seriesInfoID);q=z.GetBoundingRect();return AH.checkLabelPaddingToBorder(q,AI,t,!this.mIsVertical);}function U(q,r){var s=r.rect;if(this.mIsVertical){return !(s.GetBottomMiddle().y>=q&&s.GetTopMiddle().y<=q);}return !(s.GetRightMiddle().x>=q&&s.GetLeftMiddle().x<=q);}function j(t,u,s,x){x=x||false;var r=new X.Rect2D({Rect:t}),q,w;if(this.mIsVertical){if(s){if(x){r.height-=Math.max(0,u-r.y);r.y=Math.max(u,r.y);}else{r.height+=Math.max(0,r.y-u);r.y=Math.min(u,r.y);}}else{if(x){r.height-=Math.max(0,u-r.y);}else{r.height+=Math.max(0,r.y-u);}}}else{if(s){if(x){r.width=u-r.x;}else{r.width=u-r.x;}}else{if(x){r.width-=Math.max(u-r.x,0);r.x=u;}else{r.width+=Math.max(r.x-u,0);r.x=u;}}}return{Valid:true,Rect:r,Low:q,High:w};}function n(AD){var AG=new X.TripleId({ObjectId:k.DssGraphRiser,SeriesId:this.mSeriesInfo[AD.seriesInfoID].mSeriesId,GroupId:AD.groupID}),y=I>0,w=y,AA,AJ,AN=this.GetGraphObject(AG),AK,AM,AH;if(!AN){return null;}AJ=AN.GetBoundingRect();AG.mObjectId=k.DssGraphDataText;if(this.mSGMapLabel[AG.mSeriesId]===undefined){this.mSGMapLabel[AG.mSeriesId]=new X.GraphCollectionObject({TripleId:AG,GraphObjectManager:this,CollectionType:B.CT_TEXT});}var AB=this.mSGMapLabel[AG.mSeriesId],AE=0,AF=true,u=this.mDatasetPtr.GetData(AG.mSeriesId,AG.mGroupId),x=this.createRiserLabel(AD.seriesInfoID,AD.groupID,AB);if(x===null){return null;}if(w){var t=this.mDatasetPtr.GetData(C+g,AG.mGroupId);if(t){if(t===0||t===u){w=false;}else{w=(t>0&&u>=0)||(t<0&&u<=0);if(w){AF=(t>u&&u>=0)||(t<u&&u<=0);}}}else{w=false;}}for(AK=0;AK<2;++AK){if(AA===true){return x;}if(AK===1){x.SetRotation(E.FR_90);}AA=H.call(this,x,AD,AJ);if(w&&AF&&AA){AA=U.call(this,AE,x);if(!AA){AM=j.call(this,AJ,AE,(u>=0),false);if(AM.Valid){AA=H.call(this,x,AD,AM.Rect,false,AM.High,AM.Low);}}}if(!AA){var z=this.mpABLPlotContext.mABLOptions,q=z.mTextPosition,AI=q;z.mTextCollection=c.DssGraphDTPositionInMax;AA=H.call(this,x,AD,AJ,true);if(w&&!AF&&AA){AA=U.call(this,AE,x);if(!AA){AM=j.call(this,AJ,AE,(u>=0),true);if(AM.Valid){AA=H.call(this,x,AD,AM.Rect,true,AM.High,AM.Low);}}}var s=true,AL=false;if(this.mIsVertical){AL=AJ.height<=x.height;}else{AL=AJ.width<=x.width;}if(s){AH=this.mChartContextPtr.getDefaultContrastColor();var AC=1,r=new X.FormatFont({Font:x.mFormatFontPtr});r.mStrokeColor=AH;if(AL){r.mFontStyle=AC;}x.mFormatFontPtr=r;}z.mTextCollection=AI;}}return x;}function N(AC,y,AE){var t=y,AD={groupID:AC,seriesInfoID:0},r=true,AG=true,z=true,q=true;var x,AF,AB;if(r){for(x=0;x<g;++x){AD.seriesInfoID=t[C+x];AF=S.call(this,AD,AE);if(AF.Bar===null){return ;}}}else{return ;}if(AG){for(x=0;x<C;++x){AD.seriesInfoID=t[x];AF=S.call(this,AD,AE);}}if(z){for(x=0;x<I;++x){AD.seriesInfoID=t[C+g+x];AB=V.call(this,AD,AE);}}if(q){for(x=0;x<g;++x){AD.seriesInfoID=t[C+x];var AA=this.mpABLPlotContext.mABLOptions,w=AA.mShowValue,u=this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AD.seriesInfoID].mSeriesIndex].mShowDataLabels;AA.mShowValue=true;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AD.seriesInfoID].mSeriesIndex].mShowDataLabels=true;var s=n.call(this,AD);if(s){s.mTripleId.mSeriesID=C+g+I;this.AddToMapAndList(s);}AA.mShowValue=w;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[AD.seriesInfoID].mSeriesIndex].mShowDataLabels=u;}}}function h(x){var r=this.IsReverseGroupOrder(),s,w=[],q,t;var u=this.mDatasetPtr.GetGroupCount();for(t=0;t<u;++t){s=t;if(r){s=u-1-s;}w=this.GetSeriesOrderByType(s,w,x);q=w.length;A.call(this,s,x);l.call(this,s);N.call(this,s,w);this.oneGroupBandValues=null;this.oneGroupBandColors=null;}this.GenerateTrendLine();this.GenerateRefLine();}mstrmojo.chart.BulletSeriesRenderer=mstrmojo.declare(mstrmojo.chart.BarSeriesRenderer,null,{scriptClass:"mstrmojo.chart.BulletSeriesRenderer",bandOptions:null,bulletWidth:0,oneGroupBandValues:null,oneGroupBandColors:null,labelCollection:null,init:function o(q){this._super(q);this.bandOptions={DescentLayout:false,Width:{Ratio:b,Padding:K,Limit:{Max:D,Min:Y}},ColorMode:Q,PositionByMetric:false};},GenerateByValueAxis:function f(q){this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();Z.call(this);if(this.mSeriesInfo.length===0){return ;}h.call(this,q);},PrepareData:function d(r,s){if(s){return this.hPrepareData(r);}var q=A.call(this,r.groupID);return q[r.seriesInfoID];}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","BarSeriesRenderer","AreaSeriesRenderer","LineSeriesRenderer","BulletSeriesRenderer","Plot","GraphObjectManager","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumMajorGraphType","EnumGraphSubType","EnumOrientation","EnumValueAxis","EnumAnchorPoint","EnumTrendLineIndex");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumShapeType","EnumDSSGraphObject");var R=mstrmojo.hash,g=mstrmojo.chart,a=g.ChartConstants,M=g.enums,h=M.EnumMajorGraphType,O=M.EnumLayout,k=M.EnumGraphSubType,K=M.EnumOrientation,E=M.EnumValueAxis,b=M.EnumTrendLineIndex,q=M.EnumAnchorPoint,n=g.gNullTripleId,X=mstrmojo.chart.model,Q=X.enums,x=Q.EnumShapeType,r=Q.EnumDSSGraphType,u=Q.EnumDSSGraphProperty,S=Q.EnumDSSGraphDataTextShowType,w=Q.EnumDSSGraphObject,W=0,c=1,s=2,AE=1,N=2,AB=3,L=4;var AF=new g.TripleId();function AH(){var AI=this.mChartContextPtr,AJ=this.mABLPlotContext,AM=AJ.mABLOptions,AL,AQ={positive:[],negative:[]},AN=this.mAreaSeriesRendererPtr,AR=this.mBarSeriesRendererPtr,AP=this.mLineSeriesRendererPtr;if((AM.mLayout===O.LO_STACKED)||(AM.mLayout===O.LO_PERCENT)){if(AI.isCombinationChart()){var AO=this.mSeriesId,AK=AO.length;for(AL=0;AL<AK;++AL){if(AN){AQ=AN.UpdateCumulateData(E.VA_Y1,AQ,AO[AL]);}if(AR){AQ=AR.UpdateCumulateData(E.VA_Y1,AQ,AO[AL]);}if(AP){AQ=AP.UpdateCumulateData(E.VA_Y1,AQ,AO[AL]);}}if(AM.mDualAxes){AQ={positive:[],negative:[]};for(AL=0;AL<AK;++AL){if(AN){AQ=AN.UpdateCumulateData(E.VA_Y2,AQ,AO[AL]);}if(AR){AQ=AR.UpdateCumulateData(E.VA_Y2,AQ,AO[AL]);}if(AP){AQ=AP.UpdateCumulateData(E.VA_Y2,AQ,AO[AL]);}}}}else{if(AN){AQ=AN.UpdateCumulateData(E.VA_Y1,AQ);}if(AR){AQ={positive:[],negative:[]};AQ=AR.UpdateCumulateData(E.VA_Y1,AQ);}if(AP){AQ={positive:[],negative:[]};AP.UpdateCumulateData(E.VA_Y1,AQ);}if(AM.mDualAxes){AQ={positive:[],negative:[]};if(AN){AQ=AN.UpdateCumulateData(E.VA_Y2,AQ);}if(AR){AQ={positive:[],negative:[]};AQ=AR.UpdateCumulateData(E.VA_Y2,AQ);}if(AP){AQ={positive:[],negative:[]};AP.UpdateCumulateData(E.VA_Y2,AQ);}}}}}function V(){var AM=[],AK=[this.mAreaSeriesRendererPtr,this.mBarSeriesRendererPtr,this.mLineSeriesRendererPtr],AI=AK.length,AJ,AL=0;for(AJ=0;AJ<AI;AJ++){if(AK[AJ]){AL=AK[AJ].updateSeriesRenderSequence(AM,AL);}}return AM;}function AA(){var AJ=this.mABLPlotContext,AM=AJ.mCategoryAxisPtr,AK=this.mDatasetPtr;this.DPCount=0;this.seriesDPCount.splice(0,this.seriesDPCount.length);if(this.mPartialRendering){var AI=this.mChartContextPtr,AO={PartialRendering:true,Group:{}},AL,AP,AN=AI.mRenderingWindow,AQ=AI.IsVertical();if(AQ){AL=AN.x;AP=AL+AN.width;}else{AL=AN.y;AP=AL+AN.height;}AO.Group.Max=AM.getGroupSlotAt(AP)+1;AO.Group.Min=AM.getGroupSlotAt(AL)-1;AO.Data={Max:-1,Min:-1};AK.updateDataWindow(AO);}else{AK.resetDataWindow();}}function AG(){var AJ=this.mDatasetPtr,AQ,AK,AP=E.VA_Y1,AI,AN,AL,AR,AO,AM;AQ=AJ.GetGroupCount();AK=this.mSeriesId.length;if(this.mChartContextPtr.IsDualAxis()){AI=AJ.GetSeriesByValueAxis(E.VA_Y2);}else{AI=[];}for(AN=0;AN<AQ;++AN){AR=AO=0;for(AL=0;AL<AK;++AL){AM=AJ.GetData(this.mSeriesId[AL],AN);if(AM!==null&&AM!==undefined){if(AI.indexOf(this.mSeriesId[AL])!==-1){AP=E.VA_Y2;if(AM>0){AO+=AM;}else{AO+=Math.abs(AM);}}else{AP=E.VA_Y1;if(AM>0){AR+=AM;}else{AR+=Math.abs(AM);}}}}this.groupTotals[0].push(AR);this.groupTotals[1].push(AO);}}function d(){var AR=this.mABLPlotContext.mABLOptions,AL=this.mABLPlotContext.mSeriesOptions,AK=this.mChartContextPtr,AX,AO,AN,AP,AQ,AV,AT,AW=0;if(AK.mIsGraphMatrix&&AK.isCombinationChart()){var AU,AM=this.mDatasetPtr.GetSeriesByShape(),AJ=[AM.Tick,AM.Line,AM.Square,AM.Circle,AM.Bar,AM.Area,AM.Pie],AS=[x._TICKER,x._LINE,x._SQUARE,x._CIRCLE,x._BAR,x._AREA,x._PIE];AT=AJ.length;for(AO=0;AO<AT;++AO){AU=AJ[AO];AV=AS[AO];if(AU&&AU.length){++AW;for(AN=0;AN<AU.length;AN++){AL[AU[AN]].mRealSeriesType=AV;}}}this.countOfTypes=AW;this.realComboChart=(AW>1);return ;}var AI=AK.getUtiliy().tripleId;AP=AL.length;for(AO=0;AO<AP;++AO){switch(AL[AO].mSeriesType){case x._AREA:AL[AO].mRealSeriesType=x._AREA;break;case x._BAR:AL[AO].mRealSeriesType=x._BAR;break;case x._LINE:if(AR.mCurvedLines){AL[AO].mRealSeriesType=x._LINE;}else{AQ=AI.create(w.DssGraphRiser,this.mSeriesId[AO]);AX=AK.GetProperty(u.DssGraphShowStepLine,AQ);if(AX!==undefined&&AX!==null){if(AX){AL[AO].mRealSeriesType=x._STEPLINE;}else{AL[AO].mRealSeriesType=x._LINE;}}}break;case x._PIE:AL[AO].mRealSereisType=x._LINE;break;case x._DEFAULT:if(AR.mMajorGraphType===h.MGT_AREA){AL[AO].mRealSeriesType=x._AREA;}else{if(AR.mMajorGraphType===h.MGT_BAR){AL[AO].mRealSeriesType=x._BAR;}else{if(AR.mCurvedLines){AL[AO].mRealSeriesType=x._LINE;}else{AQ=AI.create(w.DssGraphRiser,this.mSeriesId[AO]);AX=AK.GetProperty(u.DssGraphShowStepLine,AQ);if(AX!==undefined&&AX!==null){if(AX){AL[AO].mRealSeriesType=x._STEPLINE;}else{AL[AO].mRealSeriesType=x._LINE;}}else{AL[AO].mRealSeriesType=x._LINE;}}}}break;}}}function Z(AJ){var AO=this.mChartContextPtr,AN=this.mABLPlotContext,AL=AN.mABLOptions,AI=AN.mSeriesOptions,AM;var AK=AO.getUtiliy().tripleId;AK.reset(AF,w.DssGraphRiser,this.mSeriesId[AJ]);if(!AO.mIsGraphMatrix){AM=AO.GetProperty(u.DssGraphSDRiserType,AF);if(AM){switch(AM){case W:AI[AJ].mSeriesType=x._DEFAULT;break;case c:if(AL.mMajorGraphType===h.MGT_LINE){AI[AJ].mSeriesType=x._BAR;}else{AI[AJ].mSeriesType=x._LINE;}break;case s:if(AL.mMajorGraphType===h.MGT_AREA){AI[AJ].mSeriesType=x._BAR;}else{AI[AJ].mSeriesType=x._AREA;}break;default:AI[AJ].mSeriesType=AM;break;}}}AI[AJ].mValueAxis=this.LoadValueAxisInfo(AJ,AL.mDualAxes);if(AO.mImageUsage!==0){return ;}this.LoadTrendLineProperties(this.mSeriesId[AJ],AI[AJ].mTrendLineOptions);if(AO.mIsGraphMatrix===false){AI[AJ].mGraphNumberFormat=new g.ChartAdvFormat();AM=AO.GetProperty(-u.DssGraphFormatDataTextAdv,AF);if(AM){AO.ParseValueToFormat(AM,AI[AJ].mGraphNumberFormat);}}}function I(){var AN=this.mChartContextPtr,AM=this.mABLPlotContext,AJ=AM.mABLOptions,AK;this.SetGraphType(AN.mGraphType);if(AN.mImageUsage!==0){return ;}if(AN.mIsGraphMatrix){return ;}var AL=new g.TripleId({SeriesId:this.mTripleId.mSeriesId});AK=AN.GetProperty(u.DssGraphShowDataText,AL);if(AK){AJ.mTextShowType=AK;AJ.mShowCumulate=(AK&S.DssGraphDataTextAbs)===0;}var AI=21001;AK=AN.GetProperty(AI,AL);if(AK){AJ.mUseGlobalAutoScale=AK;}AK=AN.GetProperty(u.DssGraphDepthMode,AL);if(AK){AJ.mUseDepth=AK;}AK=AN.GetProperty(u.DssGraph2DDepth,AL);if(AK){AJ.mDepth=AK;}AK=AN.GetProperty(u.DssGraph2DAngle,AL);if(AK){AJ.mDepthDirection=AK;}AK=AN.GetProperty(u.DssGraphShowLine,AL);if(AK){AJ.mShowLines=AK;}AK=AN.GetProperty(u.DssGraphShowDivBiPolar,AL);if(AK){AJ.mShowAxisSplit=AK;}AK=AN.GetProperty(u.DssGraphShowDataLabel,AL);if(AK){AJ.mShowLabel=AK;}AK=AN.GetProperty(u.DssGraphShowDataValue,AL);if(AK){AJ.mShowValue=AK;}AK=AN.GetProperty(u.DssGraphShowDVPercent,AL);if(AK){AJ.mShowAsPercentage=AK;}AK=AN.GetProperty(u.DssGraphShowTotalValue,AL);if(AK){AJ.mShowTotal=AK;}AK=AN.GetProperty(u.DssGraphCurvedLines,AL);if(AK){AJ.mCurvedLines=AK;}AK=AN.GetProperty(u.DssGraphAxisDataTextPlace,AL);if(AK){AJ.mTextPosition=AK;}AK=AN.GetProperty(u.DssGraphSplitYPosition,AL);if(AK){AJ.mSplitAxisPosition=AK;}}function AC(AK){var AO=this.mChartContextPtr,AJ=AO.GetGraphMatrixContext();if(AO.mIsGraphMatrix){if(AJ.isCombinationChart()){var AL=AO.mImageUsage===mstrmojo.chart.enums.EnumImageUsage.OBJECT_CLIP_COMPUTATION;var AM=this.mDatasetPtr,AN=AM.GetSeriesByShape(),AI=((AN.Square&&AN.Square.length)||(AN.Circle&&AN.Circle.length)||(AN.Tick&&AN.Tick.length));if((AN.Bar&&AN.Bar.length)){if(!AL||AM.onlyBarDataLabelEnabled()){this.mBarSeriesRendererPtr=new g.BarSeriesRenderer(R.copy(AK,{TripleId:g.BarRenderer0}));}}if(AN.Area&&AN.Area.length){this.mAreaSeriesRendererPtr=new g.AreaSeriesRenderer(R.copy(AK,{TripleId:g.AreaRenderer0}));}if((AN.Line&&AN.Line.length)||AI){if(!AL||(AL&&!(AN.Line.length===1&&AM.GetGroupCount()===1))){this.mLineSeriesRendererPtr=new g.LineSeriesRenderer(R.copy(AK,{TripleId:g.LineRenderer0}));}}return true;}if(AO.IsBarChart()){if(AO.IsBulletChart()){this.mBarSeriesRendererPtr=new g.BulletSeriesRenderer(R.copy(AK,{TripleId:g.BarRenderer0}));}else{this.mBarSeriesRendererPtr=new g.BarSeriesRenderer(R.copy(AK,{TripleId:g.BarRenderer0}));}}else{if(AO.IsLineChart()){this.mLineSeriesRendererPtr=new g.LineSeriesRenderer(R.copy(AK,{TripleId:g.LineRenderer0}));}else{if(AO.IsAreaChart()){this.mAreaSeriesRendererPtr=new g.AreaSeriesRenderer(R.copy(AK,{TripleId:g.AreaRenderer0}));}else{return false;}}}return true;}this.mAreaSeriesRendererPtr=new g.AreaSeriesRenderer(R.copy(AK,{TripleId:g.AreaRenderer0}));this.mBarSeriesRendererPtr=new g.BarSeriesRenderer(R.copy(AK,{TripleId:g.BarRenderer0}));this.mLineSeriesRendererPtr=new g.LineSeriesRenderer(R.copy(AK,{TripleId:g.LineRenderer0}));return true;}function P(AT,AK){var AR=AC.call(this,AT);if(!AR){return ;}var AP=this.mAreaSeriesRendererPtr,AV=this.mBarSeriesRendererPtr,AU=this.mLineSeriesRendererPtr;var AN=[[0,0],[0,0],[0,0],[0,0]],AI=[],AQ,AM=0,AL=this.mDatasetPtr,AJ=this.mChartContextPtr,AS=this.mSeriesId,AO=AS.length;if(AJ.isCombinationChart()){AI=AL.GetSeriesIndexByPriority();}for(AQ=0;AQ<AO;++AQ){if(AI&&AI.length>AQ){AM=AI[AQ];}else{AM=AQ;}switch(AK[AM].mRealSeriesType){case x._AREA:if(AP){AP.AddSeries(AS[AM],AM,AN[x._AREA][AK[AM].mValueAxis],AK[AM].mValueAxis);++AN[x._AREA][AK[AM].mValueAxis];}break;case x._BAR:if(AV){AV.AddSeries(AS[AM],AM,AN[x._BAR][AK[AM].mValueAxis],AK[AM].mValueAxis);++AN[x._BAR][AK[AM].mValueAxis];}break;case x._TICKER:case x._LINE:case x._SQUARE:case x._CIRCLE:case x._PIE:if(AU){AU.AddSeries(AS[AM],AM,AN[x._LINE][AK[AM].mValueAxis],AK[AM].mValueAxis);++AN[x._LINE][AK[AM].mValueAxis];}break;default:}}}function C(AN,AU,AI,AT,AR,AP,AK,AL){var AJ={},AO=AU/2,AM=AI/2,AQ=AL.IsVerticalAxis(),AS;if(AL.mTripleId.mObjectId===w.DssGraphY2Body){AS=AQ?AB:L;}else{AS=AQ?AE:N;}AJ.rect=new g.Rect2D({x:0,y:0,width:AI+2*AK,height:AU+2*AK});switch(AN){case 0:switch(AS){case AE:AJ.xOffset=AK+AM;AJ.yOffset=AT-AK-AO;AJ.rect.y=AT-2*AK-AU;AJ.rect.x=0;break;case N:AJ.xOffset=AT-AK-AM;AJ.yOffset=AR-AK-AO;AJ.rect.y=AR-2*AK-AU;AJ.rect.x=AT-2*AK-AI;break;case AB:AJ.xOffset=AP-AK-AM;AJ.yOffset=AT-AK-AO;AJ.rect.y=AT-2*AK-AU;AJ.rect.x=AP-2*AK-AI;break;case L:AJ.xOffset=AT-AK-AM;AJ.yOffset=AK+AO;AJ.rect.y=0;AJ.rect.x=AT-2*AK-AI;break;}break;case 1:switch(AS){case AE:AJ.xOffset=AK+AM;AJ.yOffset=AT+AK+AO;AJ.rect.y=AT;AJ.rect.x=0;break;case N:AJ.xOffset=AT+AK+AM;AJ.yOffset=AR-AK-AO;AJ.rect.y=AR-2*AK-AU;AJ.rect.x=AT;break;case AB:AJ.xOffset=AP-AK-AM;AJ.yOffset=AT+AK+AO;AJ.rect.y=AT;AJ.rect.x=AP-2*AK-AI;break;case L:AJ.xOffset=AT+AK+AM;AJ.yOffset=AK+AO;AJ.rect.y=0;AJ.rect.x=AT;break;}break;}return AJ;}function l(AM,AS,AP,AN,AJ,AK){var AQ=AM.rect,AO,AL,AI,AR;if(AQ.y<0||AQ.y+AQ.height>AS){return false;}if(AQ.x<0||AQ.x+AQ.width>AP){return false;}AO=AK.length;for(AL=0;AL<AO;++AL){AI=AK[AL].GetBoundingRect(true);if(AQ.HasIntersection(AI)){return false;}}AO=AJ.length;for(AL=0;AL<AO;++AL){AI=AJ[AL].GetBoundingRect(true);if(AQ.HasIntersection(AI)){return false;}}AO=AN.length;for(AL=0;AL<AO;++AL){AR=AN[AL];if(AR.mIsShown){AI=AR.GetBoundingRect(true);if(AQ.HasIntersection(AI)){return false;}}}return true;}function D(){var Af=this.mABLPlotContext.mValueAxis,Al=this.mABLPlotContext.mABLOptions,AO=this.mChartContextPtr,Ab=AO.mGraphWidth,Aj=AO.mGraphHeight,Ag=AO.mpGraphMatrixContext,AI=Al.mOrientation,AQ=AI===1,AV=this.mDatasetPtr.fetchShownLabels(AQ),AL,AU,Ah,Ad,Ac,Ak,AN,AS,AT,AM,Ao,AJ,AY,AW,AX,An,Aa,AP,AK,AZ,Am=Ag.getPadding(a.kAxisOriginLabel),Ai,AR;Ah=Af.length;for(Ad=0;Ad<Ah;++Ad){AL=Af[Ad];AY=g.gAxisObjects[AL.getIndex()].mCustomLabelId;AU=AL.mOptions;AT=AU.mAxisCustomValue;Ak=AV&&AV[AL.Key];AN=Ak&&Ak.length;AM=false;if(!AU.mDrawCustomLine){continue;}for(Ac=0;Ac<AN&&!AM;++Ac){AS=Ak[Ac];if(AS===AT){AM=true;}}if(AM){continue;}if(AT>AL.mMaxTick||AT<AL.mMinTick){continue;}var Ae={};if(AL.mIsPercent){Ae.mFormatType=4;Ae.mCustomFormat="0%";}else{Ae=AL.mNumberFormat;}An=new g.NumberObject({TripleId:AY,GraphObjectManager:this,Number:AT,NumberFormat:Ae,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:AL.mCondenseLabels});if(An===null||An===undefined){continue;}AP=An;AK=An.mText;AP.SetText(AK);AJ=AP.GetBoundingRect(true);AW=AJ.height;AX=AJ.width;Ao=AL.ValueToPosition(AT);AR=AL.IsVerticalAxis();if(Ao===0){continue;}if(AR){if(Ao===Aj){continue;}}else{if(Ao===Ab){continue;}}Ai=false;for(Ac=0;Ac<=1&&!Ai;++Ac){Aa={};AZ=C.call(this,Ac,AW,AX,Ao,Aj,Ab,Am,AL);Aa.xOffset=AZ.xOffset;Aa.yOffset=AZ.yOffset;Aa.rect=AZ.rect;Ai=l.call(this,Aa,Aj,Ab,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ai){AP.MoveTo(Aa.xOffset,Aa.yOffset,q.CENTER);AP.mIsShown=true;this.mPostTrendLineObjects.push(AP);this.axisOriginLabels.push(AP);}}}function U(){return{mSeriesOptions:[],mValueAxis:[],mABLOptions:{mGraphType:r.DssGraphTypeVertical_Line_Absolute,mMajorGraphType:h.MGT_LINE,mLayout:O.LO_ABSOLUTE,mOrientation:K.OR_VERTICAL,mGraphSubType:k.GST_NULL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mShowAxisSplit:true,mShowLabel:false,mShowValue:false,mShowAsPercentage:false,mShowTotal:true,mShowCumulate:false,mCurvedLines:false,mShowLines:true,mUseGlobalAutoScale:true,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mTextPosition:4,mTextShowType:S.DssGraphDataTextValue,mTotalNumberFormat:null}};}mstrmojo.chart.ABLPlot=mstrmojo.declare(mstrmojo.chart.CategoryPlot,null,{scriptClass:"mstrmojo.chart.ABLPlot",mAreaSeriesRendererPtr:null,mBarSeriesRendererPtr:null,mLineSeriesRendererPtr:null,mABLPlotContext:null,mDepthLevel:null,mAxesAreas:null,unitLevelDepth:0,takeGroupCenter:false,groupTotals:null,groupOrder:null,countOfTypes:0,realComboChart:false,init:function z(AI){this._super(AI);this.mDepthLevel=[];this.groupTotals=[[],[]];this.mAxesAreas=[];this.groupOrder=[];this.mABLPlotContext=U.call(this);this.mABLPlotContext.takeGroupCenter=this.mChartContextPtr.mDatasetPtr.ShouldTakeGroupCenter();},getLayout:function J(){return this.mABLPlotContext.mABLOptions.mLayout;},getOrientation:function AD(){return this.mABLPlotContext.mABLOptions.mOrientation;},isAbsoluteOrCluster:function F(){var AI=this.mABLPlotContext.mABLOptions.mLayout;return AI===O.LO_ABSOLUTE||AI===O.LO_CLUSTER;},GenerateMapAndList:function y(){var AN=this.mChartContextPtr,AJ=this.mABLPlotContext,AR=AJ.mABLOptions,AO=this.mDataArea,AQ,AP,AW,Aa,AS=this.shownDataLabels;if(AO.width<=0||AO.height<=0){return ;}AA.call(this);var AM=this.mAxesAreas;if(AR.mDualAxes&&AR.mSplitDualAxes){AQ=new g.Rect2D();AP=new g.Rect2D();this.mChartContextPtr.SplitRect(AO,AR.mOrientation===K.OR_VERTICAL,AR.mSplitAxisPosition,AQ,AP);AM.push(AQ);AM.push(AP);}else{AQ=new g.Rect2D({x:AO.x,y:AO.y,width:AO.width,height:AO.height});AM.push(AQ);if(AR.mDualAxes){AP=new g.Rect2D({x:AO.x,y:AO.y,width:AO.width,height:AO.height});AM.push(AP);}}var AT=this.mABLPlotContext.mValueAxis,AX,AY=AT.length,AI=this.mAreaSeriesRendererPtr,AV=this.mBarSeriesRendererPtr,Ab=this.mLineSeriesRendererPtr,AK=this.mGraphObjectManagerList,AU=this.mGraphObjectMap,AL=this.mPostTrendLineObjects;if(AN.mIsGraphMatrix===false){for(AW=0;AW<AY;++AW){AX=AT[AW];if(!AX.IsBaseAtZero()&&AX.mOptions.mUseLogarithmicScale===false){Aa=AX.GetBaseValue();if(AI){AI.AddBaseToCumulateData(AW,Aa);}if(AV){AV.AddBaseToCumulateData(AW,Aa);}if(Ab){Ab.AddBaseToCumulateData(AW,Aa);}}}}if(AI){AI.SetDeviceDataArea(AO);}if(AV){AV.SetDeviceDataArea(AO);}if(Ab){Ab.SetDeviceDataArea(AO);}if(!(AR.mDualAxes&&AR.mSplitDualAxes&&AR.mUseDepth)){if(AI){AI.GenerateMapAndList(AS);AK.push(AI);}if(AV){AV.GenerateMapAndList(AS);AK.push(AV);}if(Ab){Ab.GenerateMapAndList(AS);AK.push(Ab);}}if(AR.mDualAxes){if(AR.mSplitDualAxes){this.AdjustTrendLineEquation(AM[0],b.TLI_Y1);this.AdjustTrendLineEquation(AM[1],b.TLI_Y2);}else{this.AdjustTrendLineEquation(AO,b.TLI_BOTH);}}else{this.AdjustTrendLineEquation(AO,b.TLI_Y1);}AY=AT.length;this.axisOriginLines=[];var AZ=this.axisOriginLines;for(AW=0;AW<AY;++AW){AX=AT[AW];if(this.mChartContextPtr.mIsGraphMatrix){AX.GenerateCustomLine(AM[AW],AZ);}else{AX.GenerateCustomLine(AM[AW],AL);}}D.call(this);if(AI){AI.AddTextToMapAndList(AU,AL);}if(AV){AV.AddTextToMapAndList(AU,AL);}if(Ab){Ab.AddTextToMapAndList(AU,AL);}this.mDatasetPtr.resetDataWindow();},Draw:function t(){var AI=this.mChartContextPtr,AJ=this.mDataArea,AQ=this.mAreaSeriesRendererPtr,AT=this.mBarSeriesRendererPtr,AS=this.mLineSeriesRendererPtr;var AR=this.axisOriginLines;if(AR&&AR.length){var AM,AO=AR.length;for(AM=0;AM<AO;AM++){AR[AM].Draw();}}if(this.mAreaSeriesRendererPtr){var AK=V.call(this);AI.setDrawingOrderToCanvas(AK);}if(AI.mIsTimeSeriesChart){var AP=new g.Rect2D({x:AJ.x+1,y:AJ.y,width:AJ.width-1,height:AJ.height});AI.DrawRectangle(AP,false);AI.saveState();AI.Clip();if(AQ){AQ.Draw();}if(AT){AT.Draw();}if(AS){AS.Draw();}this._super();this.DrawPostTrendLineObjects();AI.RestoreState();}else{var AL=this.mABLPlotContext,AN=AL.mABLOptions;if(!AN.mDualAxes||!AN.mSplitDualAxes||!AN.mUseDepth){if(AQ){AQ.Draw();}}if(AT){AT.Draw();}if(!AN.mDualAxes||!AN.mSplitDualAxes||!AN.mUseDepth){if(AS){AS.Draw();}}this._super({Skip:1});if(this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquations();}this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function f(){if(!this.mChartContextPtr.mIsTimeSeriesChart&&this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[0],false);if(this.mABLPlotContext.mABLOptions.mDualAxes){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[1],true);}}},AddValueAxis:function A(AI){this.mABLPlotContext.mValueAxis.push(AI);},SetCategoryAxis:function j(AN){var AI=this.mChartContextPtr,AL=this.mABLPlotContext,AJ,AQ,AK,AR,AO,AM,AP=AL.mCategoryAxisPtr=AN;AJ=false;if(AI.mIsTimeSeriesChart){AJ=true;}else{AQ=AI.GetProperty(u.DssGraph2DOrdSpaceMode,n);if(AQ){AJ=AQ;}}AK=AL.mABLOptions.mMajorGraphType!==h.MGT_BAR;AR=true;AO=this.mSeriesId.length;for(AM=0;AM<AO;++AM){if(AL.mSeriesOptions[AM].mRealSeriesType===x._BAR){AR=false;break;}}AP.mAxisCross=(AJ&&AK&&AR);if(AI.mIsGraphMatrix&&AI.IsLineChart()){if(this.mDatasetPtr.GetGroupCount()<=1){AP.mAxisCross=false;}}},GetDepthOffset:function B(AI){return this.mChartContextPtr.CalculateDepthOffset(this.mDepthLevel[AI]*this.unitLevelDepth,this.mABLPlotContext.mABLOptions.mDepthDirection);},getGroupTotals:function p(AI,AJ){return this.groupTotals[AJ][AI];},Init:function o(){var AL,AI,AN=this.mABLPlotContext,AK=AN.mSeriesOptions;AK.splice(0,AK.length);AI=this.mSeriesId.length;for(AL=0;AL<AI;++AL){var AM={mSeriesType:x._DEFAULT,mRealSeriesType:x._LINE,mValueAxis:E.VA_Y1,mShowDataLabels:false,mTrendLineOptions:null,mGraphNumberFormat:g.dNF};if(this.mChartContextPtr.mIsGraphMatrix==false){AM.mTrendLineOptions=new g.GraphTrendLineOptions();}AK.push(AM);}I.call(this);for(AL=0;AL<AI;++AL){Z.call(this,AL);}d.call(this);var AJ={GraphObjectManager:this,DataSet:this.mDatasetPtr,Legend:this.mLegendPtr};P.call(this,AJ,AK);AG.call(this);AH.call(this);},SetGraphType:function e(AJ){var AI=this.mABLPlotContext.mABLOptions;AI.mGraphType=AJ;switch(AJ){case r.DssGraphTypeVertical_Area_Absolute:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Area_Stacked:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Area_BiPolar_Absolute:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeVertical_Area_BiPolar_Stacked:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeVertical_Area_DualAxis_Absolute:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Area_DualAxis_Stacked:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Area_Percent:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Area_Absolute:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Area_Stacked:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Area_BiPolar_Absolute:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeHorizontal_Area_BiPolar_Stacked:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeHorizontal_Area_DualAxis_Absolute:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Area_DualAxis_Stacked:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Area_Percent:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Bar_Side_by_Side:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_CLUSTER;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Bar_Stacked:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_CLUSTER;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Bar_DualAxis_Stacked:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_CLUSTER;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeVertical_Bar_BiPolar_Stacked:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeVertical_Bar_Percent:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Bar_Side_by_Side:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_CLUSTER;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Bar_Stacked:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_CLUSTER;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_CLUSTER;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeHorizontal_Bar_Percent:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Line_Absolute:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Line_Stacked:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Line_BiPolar_Absolute:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeVertical_Line_BiPolar_Stacked:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeVertical_Line_DualAxis_Absolute:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Line_DualAxis_Stacked:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Line_Percent:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Line_Absolute:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Line_Stacked:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Line_BiPolar_Absolute:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeHorizontal_Line_BiPolar_Stacked:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeHorizontal_Line_DualAxis_Absolute:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Line_DualAxis_Stacked:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_STACKED;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Line_Percent:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Bullet:case r.DssGraphTypeVertical_Bar_Absolute:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeHorizontal_Bullet:case r.DssGraphTypeHorizontal_Bar_Absolute:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_NULL;break;case r.DssGraphTypeVertical_Bar_BiPolar_Absolute:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeVertical_Bar_DualAxis_Absolute:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_BIPOLAR;break;case r.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_ABSOLUTE;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Area_DualAxis_Percent:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Area_DualAxis_Percent:AI.mMajorGraphType=h.MGT_AREA;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Bar_DualAxis_Percent:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Bar_DualAxis_Percent:AI.mMajorGraphType=h.MGT_BAR;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeVertical_Line_DualAxis_Percent:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_VERTICAL;AI.mGraphSubType=k.GST_DUALAXIS;break;case r.DssGraphTypeHorizontal_Line_DualAxis_Percent:AI.mMajorGraphType=h.MGT_LINE;AI.mLayout=O.LO_PERCENT;AI.mOrientation=K.OR_HORIZONTAL;AI.mGraphSubType=k.GST_DUALAXIS;break;}switch(AI.mGraphSubType){case k.GST_NULL:AI.mDualAxes=false;AI.mSplitDualAxes=false;break;case k.GST_DUALAXIS:AI.mDualAxes=true;AI.mSplitDualAxes=false;break;case k.GST_BIPOLAR:AI.mDualAxes=true;AI.mSplitDualAxes=true;break;}},GetMinMaxValue:function H(AP,AL,AI,AN){var AK,AO=this.mChartContextPtr;if(AO.mIsUniformAxisMode){var AJ=AO.getUniformAxisContext(),AM=AJ.ValueAxis;if(AP===E.VA_Y1){if(AO.IsVertical()===false){return{Min:AM.X1.Min,Max:AM.X1.Max,AreInitialized:true};}return{Min:AM.Y1.Min,Max:AM.Y1.Max,AreInitialized:true};}if(AO.IsVertical()===false){return{Min:AM.X2.Min,Max:AM.X2.Max,AreInitialized:true};}return{Min:AM.Y2.Min,Max:AM.Y2.Max,AreInitialized:true};}if(this.mAreaSeriesRendererPtr){AK=this.mAreaSeriesRendererPtr.GetMinMaxValue(AP,AL,AI,AN);}if(this.mBarSeriesRendererPtr){AK=this.mBarSeriesRendererPtr.GetMinMaxValue(AP,AK.Min,AK.Max,AK.AreInitialized);}if(this.mLineSeriesRendererPtr){AK=this.mLineSeriesRendererPtr.GetMinMaxValue(AP,AK.Min,AK.Max,AK.AreInitialized);}return{Min:AK.Min,Max:AK.Max,AreInitialized:AK.AreInitialized};},ShouldRotateDataLabel:function Y(){return this.mBarSeriesRendererPtr.ShouldRotateDataLabel();},GetMaxElementOffsetClippedByBoundary:function G(AQ,AT){var AJ={LowOffset:0,HighOffset:0},AP,AK,AN,AR;if(AT===undefined||AT===null){AT=true;}if(!this.mChartContextPtr.mIsGraphMatrix){return AJ;}var AL=AQ?(AT?"X1":"X2"):(AT?"Y1":"Y2"),AI=this.mClippedElementSize;if(AI[AL]!==undefined){return AI[AL];}for(AK=0;AK<2;++AK){for(AN=0;AN<2;++AN){var AS=[this.mLineSeriesRendererPtr,this.mAreaSeriesRendererPtr],AO=(AN===0),AM=(AK===0),AU=AO?(AM?"X1":"X2"):(AM?"Y1":"Y2");AJ={LowOffset:0,HighOffset:0};AR=AS.length;for(AP=0;AP<AR;++AP){if(AS[AP]){AS[AP].getMaxElementOffsetClippedByBoundary(AJ,AO,AM);}}AI[AU]=AJ;}}return AI[AL];}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","CategoryPlot","ABLPlot","Axis","CategoryAxis","ValueAxis","GraphObjectManager","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumLayout","EnumOrientation","EnumValueAxis","EnumAxisLabelsLocation","EnumAxisDirection","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSExtraGraphProperty","EnumDSSGraphObject","EnumVariantBool");var X=mstrmojo.chart,M=X.enums,Y=M.EnumGraphMajorType,e=M.EnumDSSGraphObjectManager.DssPlot,N=M.EnumLayout,J=M.EnumOrientation,E=M.EnumValueAxis,b=M.EnumAxisLabelsLocation,A=M.EnumAxisDirection,r=X.gNullTripleId,U=mstrmojo.chart.model,O=U.enums,h=O.EnumDSSGraphType,k=O.EnumDSSGraphProperty,g=O.EnumDSSExtraGraphProperty,n=O.EnumDSSGraphObject,B=O.EnumVariantBool.VARIANT_FALSE;var o=new X.Rect2D(),l=new X.Rect2D(),C=new X.Rect2D(),I=new X.Rect2D(),H=new X.Rect2D(),K=new X.Rect2D(),L=new X.Rect2D();function P(){var AA=this.mChartContextPtr,y=this.mDatasetPtr,u=AA.GetGraphMatrixContext(),z=false,w=false,x;if(AA.mIsGraphMatrix&&this.mOrientation===J.OR_VERTICAL){var t=this.mCategoryPlots[0];x=AA.GetProperty(g.DssGraphMatrixInitedDataLabelRotation,r);if(x){z=x;}if(!z){if(AA.isCombinationChart()&&!y.onlyBarDataLabelEnabled()){AA.PutGraphProperty(g.DssGraphMatrixInitedDataLabelRotation,r,true);u.mIsNeedRotateDataLabel=false;AA.PutGraphProperty(g.DSSGraphMatrixDataLabelRotated,r,false);return ;}if(AA.IsBarChart()||(AA.isCombinationChart()&&y.onlyBarDataLabelEnabled())){w=t.ShouldRotateDataLabel();AA.PutGraphProperty(g.DssGraphMatrixInitedDataLabelRotation,r,true);u.mIsNeedRotateDataLabel=w;AA.PutGraphProperty(g.DSSGraphMatrixDataLabelRotated,r,w);}}}}function c(AB,w){var AD=this.mChartContextPtr;if(AD.mIsGraphMatrix){w.Reset(AB.x,AB.y,AB.width,AB.height);return ;}var u,z,AC,t,AA=new X.Rect2D();a.call(this,AB,AA);AA.width=Math.max(0,AA.width);AA.height=Math.max(0,AA.height);this.mLeftMargin+=AA.x-AB.x;this.mRightMargin+=AB.x+AB.width-(AA.x+AA.width);this.mTopMargin+=AA.y-AB.y;this.mBottomMargin+=AB.y+AB.height-(AA.y+AA.height);this.ReserveAreaCategoryAxis(AA,w);if(w.width<0){w.width=0;}if(w.height<0){w.height=0;}if(this.mOrientation===J.OR_HORIZONTAL){u=AB.x+Math.max(AA.x-AB.x,w.x-AA.x);z=AB.x+AB.width-Math.max(AB.x+AB.width-(AA.x+AA.width),AA.x+AA.width-(w.x+w.width))-u;w.x=u;w.width=z;}else{AC=AB.y+Math.max(AA.y-AB.y,w.y-AA.y);t=AB.y+AB.height-Math.max(AB.y+AB.height-(AA.y+AA.height),AA.y+AA.height-(w.y+w.height))-AC;w.y=AC;w.height=t;}}function Z(t){var x=this.mChartContextPtr,w,u;w=x.GetGraphMajorType();if(x.mIsGraphMatrix){u=X.PlotId0;}else{u=new X.TripleId({ObjectId:e,SeriesId:t});}switch(w){case Y.GMT_CATEGORY:return new X.ABLPlot({TripleId:u,GraphObjectManager:this,Area:X.gEmptyRect});default:break;}return null;}function a(x,AI){var u=this.mChartContextPtr,w=[],AC=this.mVecY1Axis.length,z,AG,AD,y,AE,AB,AA,t,AH;for(z=0;z<AC;++z){AG=this.mOrientation===J.OR_VERTICAL?this.mBottomMargin:this.mLeftMargin;AD=this.mOrientation===J.OR_VERTICAL?this.mTopMargin:this.mRightMargin;y=AG;if(u.mIsGraphMatrix){L.ResetRect(x);K.ResetRect(x);}else{K=new X.Rect2D({Rect2D:x});L=new X.Rect2D({Rect2D:x});}if(this.mDualAxes){AE=AD;if(this.mSplitDualAxes){AB=new X.Rect2D();AA=new X.Rect2D();u.SplitRect(L,u.IsVertical(),this.mSplitAxisPosition,AB,AA);if(this.mOrientation===J.OR_VERTICAL){AE+=AB.height;y+=AA.height;}else{AE+=AB.width;y+=AA.width;}}this.mVecY2Axis[z].ReserveTitleAndLabels(K,AG,AE);if(!this.mSplitDualAxes){L.ResetRect(K);if(this.mOrientation===J.OR_VERTICAL){L.y=x.y;L.height=x.height;}else{L.x=x.x;L.width=x.width;}}if(this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&K.y>x.y){t=K.y+K.height;K.y=x.y+(K.y-x.y)*100/this.mSplitAxisPosition;K.height=t-K.y;}if(this.mOrientation===J.OR_HORIZONTAL&&K.x+K.width<x.x+x.width){K.width=x.width-(x.x+x.width-(K.x+K.width))*100/this.mSplitAxisPosition;}}}this.mVecY1Axis[z].ReserveTitleAndLabels(L,y,AD);if(this.mDualAxes&&this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&L.y+L.height<x.y+x.height){L.height=(x.y+x.height-(L.y+L.height))*100/this.mSplitAxisPosition;}if(this.mOrientation===J.OR_HORIZONTAL&&L.x>x.x){var AF=L.x+L.width;L.x=x.x+(L.x-x.x)*100/this.mSplitAxisPosition;L.width=AF-L.x;}}if(this.mDualAxes&&!this.mSplitDualAxes){K.ResetRect(L);if(this.mOrientation===J.OR_VERTICAL){K.y=x.y;K.height=x.height;}else{K.x=x.x;K.width=x.width;}}this.mVecY1Axis[z].AdjustDeviceDataArea(L,false);w.push(L);if(this.mDualAxes){this.mVecY2Axis[z].AdjustDeviceDataArea(K,false);w.push(K);}}o.Reset(0,0,0,0);l.ResetRect(w[0]);AH=w.length;for(z=1;z<AH;++z){if(!this.RectangleIntersection(l,w[z],o)){l.Reset(0,0,0,0);break;}l.ResetRect(o);}AI.ResetRect(l);}function s(u,x){var z=this.mChartContextPtr,w=z.mUniformAxisContext,t=new X.Rect2D({Rect2D:x});if(z.mIsGraphMatrix){var y=0;if(z.IsVertical()){y=w.yDataLabelPadding||0;y-=t.y;if(y){t.y+=y;t.height-=y;}}else{y=w.xDataLabelPadding||0;y-=z.mGraphWidth-t.x-t.width;if(y){t.width-=y;}}}return t;}function Q(t,w){var u=this.mChartContextPtr,AE=this.mVecY1Axis,AD=this.mVecY2Axis,AC=AE[w],AB=AD[w],z,y,AA,x;if(this.mDualAxes&&this.mSplitDualAxes){AA=new X.Rect2D({Rect2D:t});z=new X.Rect2D();y=new X.Rect2D();u.SplitRect(AA,u.IsVertical(),this.mSplitAxisPosition,z,y);AC.SetDeviceDataArea(z);AC.AdjustDeviceDataArea(z,true);AC.UpdateTitleAndLabelArea(z);AB.SetDeviceDataArea(y);AB.AdjustDeviceDataArea(y,true);AB.UpdateTitleAndLabelArea(y);}else{if(this.mDualAxes){z=s.call(this,0,t);if(AE.length){AC.TrimDeviceDataArea(z);}AC.SetDeviceDataArea(z);AC.AdjustDeviceDataArea(z,true);y=s.call(this,1,t);if(AD.length){AB.TrimDeviceDataArea(y);}AB.SetDeviceDataArea(y);if(!u.mIsGraphMatrix){x=new X.Rect2D({Rect2D:z});AB.AdjustDeviceDataArea(y,true);this.RectangleUnion(z,y,x);AC.UpdateTitleAndLabelArea(x);AB.UpdateTitleAndLabelArea(x);}}else{z=s.call(this,0,t);if(AE.length){AC.TrimDeviceDataArea(z);}AC.SetDeviceDataArea(z);if(!u.mIsGraphMatrix){AC.AdjustDeviceDataArea(z,true);x=new X.Rect2D({Rect2D:z});AC.UpdateTitleAndLabelArea(x);}}}}function R(){var u=this.mGraphObjectList,w,x,t;w=this.mVecY1Axis.length;for(t=0;t<w;++t){this.mVecY1Axis[t].generateAxisLine(u);if(this.mDualAxes){this.mVecY2Axis[t].generateAxisLine(u);}}x=this.mVecO1Axis.length;for(t=0;t<x;++t){this.mVecO1Axis[t].generateAxisLine(u);}}function f(y){var t=this.mChartContextPtr,AC=this.mGraphObjectList,AE=this.mChartAreaOptions,AD=AE.chartAreaNumber,x,w,AB,u,AA,z;AB=this.mVecY1Axis.length;for(x=0;x<AB;++x){if(!this.isMutipleValueAxis()){for(w=0;w<AD;++w){if(this.mDualAxes&&this.mSplitDualAxes){AA=new X.Rect2D();z=new X.Rect2D();t.SplitRect(y[w],t.IsVertical(),this.mSplitAxisPosition,AA,z);this.mVecY1Axis[x].GenerateGridLines(AA,w,AC);this.mVecY2Axis[x].GenerateGridLines(z,w,AC);}else{this.mVecY1Axis[x].GenerateGridLines(y[w],w,AC);if(this.mDualAxes){this.mVecY2Axis[x].GenerateGridLines(y[w],w,AC);}}}}else{if(this.mDualAxes&&this.mSplitDualAxes){AA=new X.Rect2D();z=new X.Rect2D();t.SplitRect(y[x],t.IsVertical(),this.mSplitAxisPosition,AA,z);this.mVecY1Axis[x].GenerateGridLines(AA,x,AC);this.mVecY2Axis[x].GenerateGridLines(z,x,AC);}else{this.mVecY1Axis[x].GenerateGridLines(y[x],x,AC);if(this.mDualAxes){this.mVecY2Axis[x].GenerateGridLines(y[x],x,AC);}}}}u=this.mVecO1Axis.length;for(x=0;x<u;++x){if(this.isMutipleValueAxis()){for(w=0;w<AD;++w){this.mVecO1Axis[x].GenerateGridLines(y[w],w,AC);}}else{this.mVecO1Axis[x].GenerateGridLines(y[x],x,AC);}}}function D(u,t){var z=this.mChartContextPtr,y,w;I.Reset(u.x,u.y,u.width,u.height);H.Reset(u.x,u.y,u.width,u.height);if(!z.mIsGraphMatrix){if(z.mManualLayoutMode&&!this.mRecalculateFrame){I.ResetRect(this.mPlotArea);}else{z.PutLocation(k.DssGraphFrameLocationNEW,I);}t.splice(0,t.length);this.CalculateChartAreas(I,t);}else{t.splice(0,t.length);t.push(H);}if(z.isUADataAreaOutput()){var x=z.mUniformAxisContext;H.x=x.mDataAreaLeftMargin;H.y=x.mDataAreaTopMargin;H.width=z.mGraphWidth-H.x-x.mDataAreaRightMargin;H.height=z.mGraphHeight-H.y-x.mDataAreaBottomMargin;if(this.mVecO1Axis.length){this.mVecO1Axis[0].TrimAxisPadding(H,false);}I.ResetRect(H);this.mCategoryPlots[0].SetDataArea(H);if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);Q.call(this,H,0);}else{Q.call(this,I,0);this.mVecO1Axis[0].SetDeviceDataArea(H);}return ;}y=this.mChartAreaOptions.chartAreaNumber;for(w=0;w<y;++w){this.mCategoryPlots[w].SetDataArea(t[w]);}if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);for(w=0;w<this.mChartAreaOptions.chartAreaNumber;++w){Q.call(this,t[w],w);}}else{Q.call(this,I,0);for(w=0;w<this.mChartAreaOptions.chartAreaNumber;++w){this.mVecO1Axis[w].SetDeviceDataArea(t[w]);}}}function d(w,u){var AA=this.mChartContextPtr,x;D.call(this,w,u);var t=this.mDatasetPtr.showDatalabels();if(t){P.call(this);if(!AA.mIsGraphMatrix){var z=new X.Rect2D({Rect2D:w}),y=this.mCategoryPlots.length;for(x=0;x<y;++x){this.mCategoryPlots[x].ReserveAreaForDataLabels(w);}if(w.width!==z.width||w.height!==z.height){D.call(this,w,u);}}else{this.ShouldRotateDataLabel();}}}function G(x,y,AD,AF,t){var w=this.mChartContextPtr,AA=w.getAxisTripleId(x),z=w.getUniformAxisInformation(AA.mObjectId),AC=z.Metrics,AE=(this.mOrientation===J.OR_VERTICAL?A.AD_Y:A.AD_X),u=new X.ValueAxis({TripleId:AA,GraphObjectManager:this,Min:y,Max:AD,PrimaryMetricIndex:AC,LargerGridInterval:AF!==1||(this.mDualAxes&&this.mSplitDualAxes),IsPercent:this.mLayout===N.LO_PERCENT,AxisDirection:AE,IsShown:t,Key:x});if(w.mIsGraphMatrix&&u.mIsUniformAxis===false){var AB=z.CondenseEnforced;u.checkCondense(!!AB);}return u;}mstrmojo.chart.CategoryPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.CategoryPlotManager",mGraphType:h.DssGraphTypeVertical_Line_Absolute,mLayout:N.LO_ABSOLUTE,mOrientation:J.OR_VERTICAL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mDataAreaSplitX:50,mCategoryPlots:null,mVecO1Axis:null,mVecY1Axis:null,mVecY2Axis:null,init:function q(t){this._super(t);this.mCategoryPlots=[];this.mVecO1Axis=[];this.mVecY1Axis=[];this.mVecY2Axis=[];this.mChartContextPtr=t.GraphObjectManager.mChartContextPtr;},GenerateMapAndList:function p(){var AE=this.mChartAreaOptions,AB=AE.chartAreaNumber,AA=this.mPlotArea,w=this.mCategoryPlots,z=this.mChartContextPtr,u=this.mGraphObjectManagerList,AS,AQ,t,AV,AT,AN,AR,AC,AG,AJ,AY,AD,AM,AF=[],y,AK,AU;var AP="Y1",AH=this.mVecO1Axis,AX=this.mVecY1Axis,AW=this.mVecY2Axis;if(AA.width<=0||AA.height<=0){return ;}this.LoadProperties();for(AS=0;AS<AB;++AS){t=Z.call(this,AS);t.SetDataset(this.mDatasetPtr);t.mLegendPtr=this.mLegendPtr;w.push(t);AU=AE.seriesDistribution[AS].length;for(AQ=0;AQ<AU;++AQ){w[AS].AddSeries(AE.seriesDistribution[AS][AQ]);}t.Init();}var x;if(this.isMutipleValueAxis()){x=z.getAxisTripleId("O1");var AL=new X.CategoryAxis({TripleId:x,GraphObjectManager:this,AxisLabelsLocation:b.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});AH.push(AL);for(AS=0;AS<AB;++AS){AV=false;AT=false;AN=[0,0];AR=[0,0];AK=w[AS].GetMinMaxValue(E.VA_Y1,AN[0],AR[0],AV);AN[0]=AK.Min;AR[0]=AK.Max;AV=AK.AreInitialized;if(this.mDualAxes){AK=w[AS].GetMinMaxValue(E.VA_Y2,AN[1],AR[1],AT);AN[1]=AK.Min;AR[1]=AK.Max;AT=AK.AreInitialized;}w[AS].SetCategoryAxis(AL);if(z.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AP="X1";}AC=G.call(this,AP,AN[0],AR[0],AB,AV);AX.push(AC);w[AS].AddValueAxis(AC);if(this.mDualAxes){AP="Y2";if(z.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AP="X2";}AG=G.call(this,AP,AN[1],AR[1],AB,AT);AW.push(AG);w[AS].AddValueAxis(AG);}}}else{AV=false;AT=false;AN=[0,0];AR=[0,0];for(AS=0;AS<AB;++AS){AK=w[AS].GetMinMaxValue(E.VA_Y1,AN[0],AR[0],AV);AN[0]=AK.Min;AR[0]=AK.Max;AV=AK.AreInitialized;if(this.mDualAxes){AK=w[AS].GetMinMaxValue(E.VA_Y2,AN[1],AR[1],AT);AN[1]=AK.Min;AR[1]=AK.Max;AT=AK.AreInitialized;}x=z.mIsGraphMatrix?z.getAxisTripleId("O1"):new X.TripleId({ObjectId:n.DssGraphO1Body,SeriesId:AS});AJ=new X.CategoryAxis({TripleId:x,GraphObjectManager:this,AxisLabelsLocation:b.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});w[AS].SetCategoryAxis(AJ);AH.push(AJ);}if(z.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AP="X1";}AC=G.call(this,AP,AN[0],AR[0],AB,AV);AX.push(AC);for(AS=0;AS<AB;++AS){w[AS].AddValueAxis(AC);}if(this.mDualAxes){AP="Y2";if(z.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AP="X2";}AG=G.call(this,AP,AN[1],AR[1],AB,AT);AW.push(AG);for(AS=0;AS<AB;++AS){w[AS].AddValueAxis(AG);}}}AY=this.mVecO1Axis.length;AD=this.mVecY1Axis.length;AM=this.mVecY2Axis.length;if(this.mUseDepth){for(AS=0;AS<AY;++AS){AH[AS].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AS=0;AS<AD;++AS){AX[AS].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AS=0;AS<AM;++AS){AW[AS].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}}AU=AH.length;for(AS=0;AS<AU;++AS){AH[AS].SetDataset(this.mDatasetPtr);}for(AS=0;AS<AY;++AS){u.push(this.mVecO1Axis[AS]);}for(AS=0;AS<AD;++AS){u.push(this.mVecY1Axis[AS]);if(this.mDualAxes){u.push(this.mVecY2Axis[AS]);}}C.Reset(0,0,0,0);c.call(this,AA,C);d.call(this,C,AF);y=w.length;for(AS=0;AS<y;++AS){u.push(w[AS]);w[AS].GenerateMapAndList();}for(AS=0;AS<AY;++AS){AX[AS].GenerateMapAndList();}for(AS=0;AS<AD;++AS){AX[AS].GenerateMapAndList();if(this.mDualAxes){AW[AS].GenerateMapAndList();}}var AI=z.mIsGraphMatrix,AO=z.isUADataAreaOutput();if(!(AI&&AO)){if(this.mUseDepth){R.call(this);f.call(this,AF);}else{f.call(this,AF);R.call(this);}}},LoadProperties:function W(){var u,w=this.mChartContextPtr;this._super();var t=this.mGraphType=w.mGraphType;if(!(w.mIsTimeSeriesChart)){if(!w.mIsGraphMatrix){u=w.GetProperty(k.DssGraphDepthMode,r);if(u){this.mUseDepth=(u!==B);}u=w.GetProperty(k.DssGraph2DDepth,r);if(u){this.mDepth=u;}u=w.GetProperty(k.DssGraph2DAngle,r);if(u){this.mDepthDirection=u;}}this.mOrientation=w.IsVertical()?J.OR_VERTICAL:J.OR_HORIZONTAL;this.mDualAxes=w.IsDualAxis();}if((t>=h.DssGraphTypeVertical_Area_Percent)&&(t<=h.DssGraphTypeHorizontal_Line_Percent)&&(t%7===0)){this.mLayout=N.LO_PERCENT;}if(this.mLayout!==N.LO_PERCENT&&(t>=h.DssGraphTypeVertical_Bar_DualAxis_Percent&&t<=h.DssGraphTypeHorizontal_Area_DualAxis_Percent)){this.mLayout=N.LO_PERCENT;}},isMutipleValueAxis:function S(){var t=this.mChartAreaOptions;return(this.mOrientation===t.mOrientation);},ReserveAreaCategoryAxis:function F(y,AG){var u=this.mChartContextPtr,x=[],AB=[],z,AA,AD,AC,w,AF,t,AE;if(!this.isMutipleValueAxis()){this.CalculateChartAreas(y,AB);}z=this.mVecO1Axis.length;for(AA=0;AA<z;++AA){if(u.mIsGraphMatrix){l.ResetRect(this.isMutipleValueAxis()?y:AB[AA]);}else{l=this.isMutipleValueAxis()?new X.Rect2D({Rect2D:y}):new X.Rect2D({Rect2D:AB[AA]});}this.mVecO1Axis[AA].AdjustTitleArea(l);if(u.mIsTimeSeriesChart){this.mVecO1Axis[AA].AdjustDataArea(l,0,0,true);}else{AD=this.mOrientation===J.OR_HORIZONTAL?this.mBottomMargin:this.mLeftMargin;AC=this.mOrientation===J.OR_HORIZONTAL?this.mTopMargin:this.mRightMargin;this.mVecO1Axis[AA].AdjustDataArea(l,AD,AC);}if(u.mRecalculateFrame){if(this.mOrientation===J.OR_VERTICAL){w=y.x;t=y.width;if(AA===0){if(l.x>y.x){w=l.x;t-=(l.x-y.x);}}if(AA===this.mVecO1Axis.length-1){if(y.x+y.width>l.x+l.width){t=l.x+l.width-w;}}l.x=w;l.width=t;}else{AF=y.y;AE=y.height;if(AA===0){if(l.y>y.y){AF=l.y;AE-=(l.y-y.y);}}if(AA===this.mVecO1Axis.length-1){if(y.y+y.height>l.y+l.height){AE=l.y+l.height-AF;}}l.y=AF;l.height=AE;}}x.push(l);}l.ResetRect(x[0]);for(AA=1;AA<x.length;++AA){if(!this.RectangleIntersection(l,x[AA],o)){l.Reset(0,0,0,0);break;}l.ResetRect(o);}AG.ResetRect(l);},Draw:function j(){var u=this.mCategoryPlots,x,z,y,t,w;this._super();x=this.mVecY1Axis.length;for(w=0;w<x;++w){this.mVecY1Axis[w].Draw();}z=this.mVecY2Axis.length;for(w=0;w<z;++w){this.mVecY2Axis[w].Draw();}y=this.mVecO1Axis.length;for(w=0;w<y;++w){this.mVecO1Axis[w].Draw();}t=u.length;for(w=0;w<t;++w){u[w].Draw();}},ShouldRotateDataLabel:function V(){var AB=this.mChartContextPtr,z=this.mDatasetPtr,t=AB.GetGraphMatrixContext(),y=z.showDatalabels(),w=false,AA=false;if(y&&AB.mIsGraphMatrix&&z.onlyBarDataLabelEnabled()){var u=this.mCategoryPlots[0],x;if(this.mOrientation===J.OR_VERTICAL){x=AB.GetProperty(g.DssGraphMatrixInitedDataLabelRotation,X.gNullTripleId);if(x!==undefined&&x!==null){AA=x;}if(AA){x=AB.GetProperty(g.DSSGraphMatrixDataLabelRotated,X.gNullTripleId);if(x!==undefined&&x!==null){t.mIsNeedRotateDataLabel=x;return ;}}w=u.ShouldRotateDataLabel();t.mIsNeedRotateDataLabel=w;AB.PutGraphProperty(g.DssGraphMatrixInitedDataLabelRotation,X.gNullTripleId,true);AB.PutGraphProperty(g.DSSGraphMatrixDataLabelRotated,X.gNullTripleId,w);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlotManager","TripleId","Rect2D","RectangleObject","TextObject","Legend","GridChartPlotManager","ValuePlotManager");var X=mstrmojo.chart,R=X.enums,A=R.EnumDSSExtraGraphObject,B=R.EnumGraphMajorType,J=X.ChartContext,Y=R.EnumDSSGraphObjectManager,K=Y.DssLegend,Z=X.gNullTripleId,C=X.gNullSeriesId,E=X.gNullGroupId;var M=mstrmojo.chart.model,a=M.enums,D=a.EnumDSSGraphType,F=a.EnumDSSGraphProperty,G=a.EnumDSSGraphObject,V=a.EnumVariantBool,Q=V.VARIANT_FALSE,b=a.EnumDSSExtraGraphProperty;function P(h,g){var k=this.mChartContextPtr,f=this.mGraphObjectList,e,c,d;g=g||false;if(!this.isSupportedChartType()||g){e="Graph Type Not Supported";c=new X.TextObject({TripleId:new X.TripleId({ObjectId:A.DssGraphWarningMessage}),GraphObjectManager:this});c.SetTextWidthLimit(h.width);c.SetText(e);d=c.GetBoundingRect();c.SetTextWidthLimit(h.width);c.MoveTo((h.width-d.width)/2,(h.height-d.height)/2);f.push(c);return true;}if(!this.checkDataset()){e="Insufficient Data To Plot";c=new X.TextObject({TripleId:new X.TripleId([A.DssGraphWarningMessage,C,E]),GraphObjectManager:this});c.SetTextWidthLimit(h.width);c.SetText(e);d=c.GetBoundingRect();c.SetTextWidthLimit(h.width);c.MoveTo((h.width-d.width)/2,(h.height-d.height)/2);f.push(c);return true;}var j=k.mImageUsage===32;if(j){e=this.mDatasetPtr.GetBannerText();c=new X.TextObject({TripleId:new X.TripleId([A.DssGraphBanner,0,0]),GraphObjectManager:this});c.SetTextWidthLimit(h.width);c.SetText(e);d=c.GetBoundingRect();c.SetTextWidthLimit(h.width);c.MoveTo((h.width-d.width)/2,(h.height-d.height)/2);f.push(c);return true;}return false;}mstrmojo.chart.ChartManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.ChartManager",mGraphType:D.DssGraphTypeVertical_Bar_Side_by_Side,mPlotManagers:null,mDatasetPtr:null,mLegendPtr:null,mHighlightLayerObjectPtr:null,mIsTitleShown:false,mIsSubtitleShown:false,mIsFootnoteShown:false,mIsLegendShown:false,mIsExpanded:false,mIsInitialized:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,mAxisLabelsAutoFit:true,init:function U(c){this._super(c);this.mPlotManagers=[];},GenerateMapAndList:function N(){var k=this.mChartContextPtr,g,h,f,j,d,c,e;this.LoadProperties();g=new X.Rect2D({x:0,y:0,width:k.mGraphWidth,height:k.mGraphHeight});if(P.call(this,g)===true){this.mIsInitialized=true;return ;}if(!k.mIsGraphMatrix){h=k.GetProperty(F.DssGraph2ScaleDirection,new X.TripleId({ObjectId:G.DssGraphO1Body,SeriesId:-3}));if(h){this.mDatasetPtr.mReverseGroup=(h!==Q);}else{this.mDatasetPtr.mReverseGroup=false;}f=this.CreateBackground();this.mGraphObjectList.unshift(f);this.AddToMap(f);}j=null;d=null;switch(k.GetGraphMajorType()){case B.GMT_GRID:this.CalculateLayout(g);d=new X.GridChartPlotManager({TripleId:X.PlotManagerId,GraphObjectManager:this,Area:g});break;case B.GMT_BOX:case B.GMT_CATEGORY:this.CalculateLayout(g);d=new X.CategoryPlotManager({TripleId:X.PlotManagerId,GraphObjectManager:this,Area:g});break;case B.GMT_PIE:break;case B.GMT_SCATTER:case B.GMT_BUBBLE:this.CalculateLayout(g);d=new X.ValuePlotManager({TripleId:X.PlotManagerId,GraphObjectManager:this,Area:g});break;default:P.call(this,g,true);break;}if(d!==null&&d!==undefined){this.mGraphObjectManagerList.unshift(d);d.SetDataset(this.mDatasetPtr);d.mLegendPtr=this.mLegendPtr;if(k.mIsTimeSeriesChart){this.mRightMargin=0;}d.SetMarginInfo(this.mLeftMargin,this.mRightMargin,this.mTopMargin,this.mBottomMargin);this.mPlotManagers.push(d);c=this.mPlotManagers.length;for(e=0;e<c;++e){this.mPlotManagers[e].GenerateMapAndList();}}this.mIsInitialized=true;},LoadProperties:function L(){var g=this.mChartContextPtr,e,f,d,c;e=g.GetProperty(F.DssGraphType,Z);if(e){this.mGraphType=e;}if(g.mIsTimeSeriesChart||g.mIsGraphMatrix){this.mIsTitleShown=false;this.mIsSubtitleShown=false;this.mIsFootnoteShown=false;this.mIsLegendShown=false;return ;}f=g.GetGraphMajorType();if(f!==B.GMT_3D_CATEGORY&&f!==B.GMT_HISTOGRAM&&f!==B.GMT_BOX){e=g.GetProperty(F.DssGraphShowLegendText,Z);if(e){this.mIsLegendShown=e!==Q;}}e=g.GetProperty(F.DssGraphShowTitle,Z);if(e){this.mIsTitleShown=e!==Q;}e=g.GetProperty(F.DssGraphShowSubtitle,Z);if(e){this.mIsSubtitleShown=e!==Q;}e=g.GetProperty(F.DssGraphShowfootnote,Z);if(e){this.mIsFootnoteShown=e!==Q;}d=false;if(!g.mManualLayoutMode){d=true;}else{e=g.GetProperty(b.DssGraphInfoRecalculateLegend,Z);if(e){if(e!==Q){d=true;}}}if(d){e=g.GetProperty(b.DssGraphInfoAutosizeHorizontal,Z);c=g.GetProperty(b.DssGraphInfoAutosizeVertical,Z);if(e&&c){this.mIsExpanded=(e!==Q&&c!==Q);}}if(g.mManualLayoutMode){e=g.GetProperty(F.DssGraphAxisAutoFit,new X.TripleId({ObjectId:G.DssGraphO1Body}));if(e){this.mAxisLabelsAutoFit=e!==Q;}if(this.mAxisLabelsAutoFit){g.mRecalculateFrame=true;}}},CreateBackground:function I(){var e=this.mChartContextPtr,d,c;d=new X.TripleId({ObjectId:G.DssGraphBackground,SeriesId:C,GroupId:E});c=new X.Rect2D({x:0,y:0,width:e.mGraphWidth,height:e.mGraphHeight});return new X.RectangleObject({TripleId:d,GraphObjectManager:this,Area:c});},isSupportedChartType:function W(){var d=this.mChartContextPtr,c;c=d.GetGraphMajorType();switch(c){case B.GMT_CATEGORY:case B.GMT_PIE:case B.GMT_BUBBLE:case B.GMT_SCATTER:case B.GMT_GRID:case B.GMT_BOX:return true;default:return false;}},checkDataset:function H(){var d=this.mDatasetPtr.GetSeriesCount(),f=this.mChartContextPtr;if(this.mDatasetPtr.CountMetric()===0&&this.mChartContextPtr.mIsGraphMatrix){var c=this.mDatasetPtr.IsHeaderEmpty(true),e=this.mDatasetPtr.IsHeaderEmpty(false);return(!e||!c);}return true;},CalculateLayout:function S(AB){var j=this.mChartContextPtr,AC,u,AG,o,AI,g,x,AE,l,p,n,c,w,q,AA,AH,z,f,e,k,r,AD,AF,t,y,d,s,h;AC=0;u=0;if(j.mIsTimeSeriesChart){h=J.sDefaultMarginForTimeSeries;AC=h;u=h;this.mRightMargin=0;}else{if(j.mIsUniformAxisMode&&!(j.mIsEntireChart)){h=J.sDefaultUniformAxisMargin;AC=h;u=h;this.mRightMargin=u;}else{h=J.sDefaultMargin;AC=j.vdHeight(h);u=j.vdWidth(h);this.mRightMargin=u;}}AG=AB.x+AB.width;o=AB.y+AB.height;AB.x+=u;AB.y+=AC;AG-=this.mRightMargin;o-=AC;AB.width=AG-AB.x;AB.height=o-AB.y;this.mLeftMargin=u;this.mTopMargin=AC;this.mBottomMargin=AC;if(j.mIsTimeSeriesChart){return ;}AI=null;if(this.mIsTitleShown){g=j.mManualLayoutMode&&!j.mRecalculateFrame?new X.Rect2D():j.vdRect(X.gDefaultTitlePosition);x=new X.TripleId({ObjectId:G.DssGraphTitle});d=j.GetProperty(F.DssGraphTextContent,x);if(d){z=d;}else{z="Graph Title";}AI=new X.TextObject({TripleId:x,GraphObjectManager:this,rect:g});AI.SetText(z);this.AddToMapAndList(AI);if(!j.mManualLayoutMode||j.mRecalculateFrame){AE=AI.GetBoundingRect();o=AB.y+AB.height;AB.y=AE.y+AE.height+AC;AB.height=o-AB.y;if(AB.height<0){AB.height=0;}}if(j.mManualLayoutMode){g=j.GetLocation(F.DssGraphTitleLocation);AI.SetRect(g);AI.CalculateDeviceRect();}else{if(!this.mIsExpanded){j.PutLocation(F.DssGraphTitleLocation,AE);}}}l=null;if(this.mIsSubtitleShown){n=j.mManualLayoutMode&&!j.mRecalculateFrame?new X.Rect2D():j.vdRect(X.gDefaultSubtitlePosition);p=new X.TripleId({ObjectId:G.DssGraphSubtitle});d=j.GetProperty(F.DssGraphTextContent,p);z=(d===null||d===undefined)?("Graph Subtitle"):d;l=new X.TextObject({TripleId:p,GraphObjectManager:this,rect:n});l.SetText(z);this.AddToMapAndList(l);if(!j.mManualLayoutMode||j.mRecalculateFrame){l.MoveTo(n.x,AB.y);c=l.GetBoundingRect();o=AB.y+AB.height;AB.y=c.y+c.height+AC;AB.height=o-AB.y;if(AB.height<0){AB.height=0;}}if(j.mManualLayoutMode){n=j.GetLocation(X.DssGraphSubTitleLocation);l.SetRect(n);l.CalculateDeviceRect();}else{if(!this.mIsExpanded){j.PutLocation(X.DssGraphTitleLocation,c);}}}w=null;if(this.mIsFootnoteShown){AA=j.mManualLayoutMode&&!j.mRecalculateFrame?new X.Rect2D():j.vdRect(X.gDefaultFootnotePosition);q=new X.TripleId({ObjectId:G.DssGraphFootnote});d=j.GetProperty(F.DssGraphTextContent,q);if(d===null||d===undefined){z="Graph Footnote";}else{z=d;}w=new X.TextObject({TripleId:q,GraphObjectManager:this,rect:AA});w.SetText(z);this.AddToMapAndList(w);if(!j.mManualLayoutMode||j.mRecalculateFrame){AH=w.GetBoundingRect();w.MoveTo(AA.x,AB.y+AB.height-AH.height);AB.height=(AB.y+AB.height-AC-AH.height)-AB.y;if(AB.height<0){AB.height=0;}}if(j.mManualLayoutMode){AA=j.GetLocation(F.DssGraphFootnoteLocation);w.SetRect(AA);w.CalculateDeviceRect();}else{if(!this.mIsExpanded){j.PutLocation(F.DssGraphTitleLocation,AH);}}}f=j.mGraphWidth;e=j.mGraphHeight;if(this.mIsLegendShown&&!j.mIsGraphMatrix){k=this.mDatasetPtr.GetSeriesCount();if(k===1){r=this.mDatasetPtr.GetSeriesLabel(0,false);if(r===""){this.mIsLegendShown=false;}}}if(this.mIsLegendShown){if(AB.height>0){this.mLegendPtr=new X.Legend({TripleId:new X.TripleId({ObjectId:K}),GraphObjectManager:this,DataSet:this.mDatasetPtr,Area:AB});this.mLegendPtr.GenerateMapAndList();this.mGraphObjectManagerList.push(this.mLegendPtr);if(!j.mManualLayoutMode||j.mRecalculateFrame){AD=new X.Rect2D({Rect2D:AB});this.mLegendPtr.CalculateFrame(u,AC,AB);this.mLeftMargin+=AB.x-AD.x;this.mRightMargin+=AD.x+AD.width-(AB.x+AB.width);this.mBottomMargin+=AD.y+AD.height-(AB.y+AB.height);if(!j.mManualLayoutMode){if(this.mIsExpanded){if(AI!==null&&AI!==undefined){g=j.vdRect(X.gDefaultTitlePosition);AI.SetRect(g);AI.CalculateDeviceRect();j.PutLocation(F.DssGraphTitleLocation,g);}if(l!==null&&l!==undefined){n=j.vdRect(X.gDefaultSubtitlePosition);l.SetRect(n);l.CalculateDeviceRect();j.PutLocation(F.DssGraphSubTitleLocation,n);}if(w!==null&&w!==undefined){AA=j.vdRect(X.gDefaultFootnotePosition);w.SetRect(AA);w.CalculateDeviceRect();j.PutLocation(F.DssGraphFootnoteLocation,AA);}}}}}}if(j.mManualLayoutMode&&!j.mRecalculateFrame){AF=j.mGraphWidth;t=j.mGraphHeight;if(this.mIsExpanded){j.SetGraphSize(f,e);}if(this.mIsExpanded){j.SetGraphSize(AF,t);}}else{if(!this.mChartContextPtr.mIsGraphMatrix){y=15;d=j.GetProperty(F.DssGraphFontSize100,new X.TripleId({ObjectId:G.DssGraphDataText,SeriesId:0}));if(d){y=Math.floor(d/100+0.5);}if(y>this.mTopMargin){s=y-this.mTopMargin;if(s>AB.height/10){s=AB.height/10;}AB.y+=s;AB.height-=s;this.mTopMargin=y;}}}},Draw:function O(){var c,e,d;if(!this.mIsInitialized){this.GenerateMapAndList();}c=this.mGraphObjectList.length;if(c>0){this.mGraphObjectList[0].Draw();}e=this.mPlotManagers.length;for(d=0;d<e;++d){this.mPlotManagers[d].Draw();}if(this.mLegendPtr!==null&&this.mLegendPtr!==undefined){this.mLegendPtr.Draw();}for(d=1;d<c;++d){this.mGraphObjectList[d].Draw();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","GenericContext","GraphObjectManager","ChartManager","Point2D","NumberObject","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory","EnumLabelLevelOption","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMajorGraphType","EnumAxisLabelsLocation","EnumGraphMatrixMarkerTypeInChart","EnumFontRotation","EnumRectCompare");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphFillEffect","EnumDSSGraphStockLayout");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var Aw=mstrmojo.chart,Q=Aw.enums,A8=Q.EnumLayout,BC=Q.EnumMajorGraphType,Aa=Q.EnumOrientation,Ah=Q.EnumGraphSubType,Au=Q.EnumGraphMajorType,l=Q.EnumGraphMatrixMajorGraphType,A0=Q.EnumAxisDirection,f=Q.EnumAxisLabelsLocation,u=Q.EnumGraphMatrixMajorGraphType,I=Q.EnumFontRotation,Aq=Q.EnumGraphMatrixMarkerTypeInChart,Am=Q.EnumRectCompare,AT=Q.EnumImageUsage,Z=mstrmojo.hash,Ae=Aw.gNullTripleId,Ap=mstrmojo.chart.model,AZ=Ap.enums,BE=AZ.EnumDSSGraphType,BF=AZ.EnumDSSGraphProperty,BG=AZ.EnumDSSGraphObject,AV=AZ.EnumVariantBool,AQ=AV.VARIANT_FALSE,Az=AZ.EnumDSSExtraGraphProperty,AX=mstrmojo.chart.common.Utility,Ab=AX.tripleId;var A4=0,Ag=2,Y=0;var AG=new Aw.Rect2D();var AI=new Aw.TripleId();var AO=new Aw.ChartAdvFormat();var AU=20;function S(BP){var BQ=1,BV=2,BR=4,BU=8;var BT=this.mDatasetPtr.showHideItemsOnAxis(BP),BS=0;if(BT.axisLabels){BS=BS|BR;}if(BT.majorGrids){BS=BS|BV;}if(BT.minorGrids){BS=BS|BU;}if(BT.axisBody){BS=BS|BQ;}return BS;}function Ay(BT){var BS={HighTrim:0,LowTrim:0,isCaTrim:true};if(this.mUniformAxisPtr){var BR,BU=this.mChartContextPtr,BQ=BU.getUniformAxisContext(),BP=BQ.CategoryAxis;BR=BT?BP.X:BP.Y;BS.HighTrim=BR.Trims[1];BS.LowTrim=BR.Trims[0];}return BS;}function AE(){var BR={PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};if(this.mUniformAxisPtr){var BQ,BT=this.mUniformAxisPtr,BU=this.mChartContextPtr,BP=BU.getUniformAxisContext(),BS=BP.ValueAxis;switch(BT.Key){case"x2":case"X2":BQ=BS.X2;BR.SecondaryLowTrim=BQ.Trims[0];BR.SecondaryHighTrim=BQ.Trims[1];break;case"y2":case"Y2":BQ=BS.Y2;BR.SecondaryLowTrim=BQ.Trims[0];BR.SecondaryHighTrim=BQ.Trims[1];break;case"x":case"x1":case"X":case"X1":BQ=BS.X1;BR.PrimaryLowTrim=BQ.Trims[0];BR.PrimaryHighTrim=BQ.Trims[1];break;default:BQ=BS.Y1;BR.PrimaryLowTrim=BQ.Trims[0];BR.PrimaryHighTrim=BQ.Trims[1];break;}}return BR;}function z(BX){var BV=this.mChartContextPtr.GetGraphMatrixContext(),BY=BX.ShapeType||BV.mMarkerShape;BV.mGraphType=this.mGraphType;BV.updateGMGraphTypeWithMarkerShape(BY);if(BX.DataAreaPaddings){BV.UpdateValueAxisPadding(BX.DataAreaPaddings);}if(BX.ColorBy){var BW=BX.ColorBy;BV.mHasColorBy=BW.HasColorBy||false;}if(BX.SizeBy){var Bb=BX.SizeBy;BV.mHasSizeBy=Bb.HasSizeBy||BV.mHasSizeBy;BV.mMaxSizeVal=Bb.Max||BV.mMaxSizeVal;BV.mMinSizeVal=Bb.Min||BV.mMinSizeVal;BV.mCustomScaleForSizeBy=Bb.mCustomScaleForSizeBy||Bb.CustomScaleForSizeBy;}var BS=this.mChartContextPtr,Ba=BS.GetGraphMajorType();BV.mHasSizeBy=(Ba===Au.GMT_BUBBLE)||BV.mHasSizeBy;var BQ=1,Bc=2;BV.AxisLayout=BX.AxisLayout||(BQ|Bc);if(BX.ElementInfo){var BU=BV.mElementsInfo.Max,BR=BV.mElementsInfo.Min,BP=BX.ElementInfo;if(BP.Max){var BZ=BP.Max;BU.Mode=BZ.Mode||BU.Mode;BU.Size=BZ.Size||BU.Size;}if(BP.Min){var BT=BP.Min;BR.Mode=BT.Mode||BR.Mode;BR.Size=BT.Size||BR.Size;}}}function s(BX){var BT=this.mChartContextPtr,BW=BT.getUniformAxisContext();if(BX.UniformAxisPaddings){var BU=BX.UniformAxisPaddings;this.UpdateUniformAxisMargins(BU);if(BT.IsGridChart()===false){var Ba=BW.ValueAxis,BR=Ba.X1,BQ=Ba.X2,BZ=Ba.Y1,BY=Ba.Y2;BY.Trims[1]=BU.ySecondaryHighTrim;BQ.Trims[1]=BU.xSecondaryHighTrim;BY.Trims[0]=BU.ySecondaryLowTrim;BQ.Trims[0]=BU.xSecondaryLowTrim;BZ.Trims[1]=BU.yPrimaryHighTrim;BR.Trims[1]=BU.xPrimaryHighTrim;BZ.Trims[0]=BU.yPrimaryLowTrim;BR.Trims[0]=BU.xPrimaryLowTrim;BQ.perCell=BU.x2PerCell;BY.PerCell=BU.y2PerCell;BZ.PerCell=BU.yPerCell;BR.PerCell=BU.xPerCell;}if(BT.IsBubbleChart()===false&&BT.IsScatterChart()===false){var BV=BW.CategoryAxis,BS=BV.X,BP=BV.Y;BS.Trims[0]=BU.xCaLowTrim;BS.Trims[1]=BU.xCaHighTrim;BP.Trims[0]=BU.yCaLowTrim;BP.Trims[1]=BU.yCaHighTrim;}}BW.mIsAxisTitleAndLabelRequired=false;}function BK(BP){switch(BP){case BG.DssGraphY1Body:case BG.DssGraphY2Body:case BG.DssGraphY3Body:case BG.DssGraphY4Body:case BG.DssGraphX1Body:case BG.DssGraphX2Body:return true;}return false;}function AH(){var BP=this.mChartContextPtr.mGraphType;switch(BP){case BE.DssGraphTypeX_Y_Scatter:case BE.DssGraphTypeDualAxis_X_Y_Scatter:case BE.DssGraphTypeX_Y_Scatter_with_Labels:case BE.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case BE.DssGraphTypeBubble:case BE.DssGraphTypeBubble_DualAxis:case BE.DssGraphTypeBubble_With_Labels:case BE.DssGraphTypeBubble_DualAxis_With_Labels:case BE.DssGraphTypeHorizontal_Line_Absolute:case BE.DssGraphTypeHorizontal_Line_Stacked:case BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BE.DssGraphTypeHorizontal_Line_Percent:case BE.DssGraphTypeHorizontal_Bar_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_Stacked:case BE.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BE.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BE.DssGraphTypeHorizontal_Bar_Percent:case BE.DssGraphTypeHorizontal_Bar_Absolute:case BE.DssGraphTypeHorizontal_Area_Absolute:case BE.DssGraphTypeHorizontal_Area_Stacked:case BE.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BE.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BE.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BE.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BE.DssGraphTypeHorizontal_Area_Percent:case BE.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BE.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BE.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function A5(){switch(this.mChartContextPtr.mGraphType){case BE.DssGraphTypeHorizontal_Line_Absolute:case BE.DssGraphTypeHorizontal_Line_Stacked:case BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BE.DssGraphTypeHorizontal_Line_Percent:case BE.DssGraphTypeHorizontal_Bar_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_Stacked:case BE.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BE.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BE.DssGraphTypeHorizontal_Bar_Percent:case BE.DssGraphTypeHorizontal_Bar_Absolute:case BE.DssGraphTypeHorizontal_Area_Absolute:case BE.DssGraphTypeHorizontal_Area_Stacked:case BE.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BE.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BE.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BE.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BE.DssGraphTypeHorizontal_Area_Percent:case BE.DssGraphTypeGridChart:case BE.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BE.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BE.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function Av(BP){if(BP){return AH.call(this)?1:0;}return A5.call(this)?0:1;}function Af(BP){BP.mDataAreaBottomMargin=BP.mDataAreaTopMargin=BP.mDataAreaRightMargin=BP.mDataAreaLeftMargin=0;}function g(BR,BS){if(Av.call(this,BR,BS)===0){return true;}var BT=this.mChartContextPtr,BP=BT.getValueAxisKeyFromLayout(BR,BS),BQ=BT.getUniformAxisContext().ValueAxis;return BQ[BP].Metrics.length>0;}function A1(){var BQ=this.mChartContextPtr,BP;if(BQ.mIsGraphMatrix){BQ.mAbsoluteFontLineSize=true;BQ.mManualLayoutMode=false;this.mFontAntiAlias=true;BQ.mIsFontAntiAlias=this.mFontAntiAlias;return ;}if(!BQ.mIsTimeSeriesChart){BP=BQ.GetProperty(BF.DssGraphLockFontSize,Ae);if(BP){BQ.mAbsoluteFontLineSize=(BP!==AQ);}else{BQ.mAbsoluteFontLineSize=true;}BP=BQ.GetProperty(BF.DssGraphSeriesByColumn,Ae);if(BP){this.mDatasetPtr.mSeriesByColumn=(BP!==AQ);}else{this.mDatasetPtr.mSeriesByColumn=true;}}BP=BQ.GetProperty(BF.DssGraphAutoArrange,Ae);if(BP){BQ.mManualLayoutMode=(BP===AQ);if(BP===AQ){BP=BQ.GetProperty(Az.DssGraphInfoRecalculateChartFrame,Ae);if(BP){BQ.mRecalculateFrame=(BP!==AQ);}else{BQ.mRecalculateFrame=false;}}}else{BQ.mManualLayoutMode=false;}BP=BQ.GetProperty(BF.DssGraphFontAntiAlias,Ae);if(BP){this.mFontAntiAlias=BP;}else{this.mFontAntiAlias=true;}BQ.SetFontAntiAlias(this.mFontAntiAlias);}function BA(BS,BR,BT,BQ){BR=(BR!==undefined)?BR:-1;BT=(BT!==undefined)?BT:true;this.mAxisLayoutHighPadding=0;this.mAxisLayoutLowPadding=0;if(g.call(this,BS,BT)===false){BQ.CanSkip=true;return ;}var BU=this.mChartContextPtr;BQ.IsPrimary=BT;BQ.MaxLabelLength=BR;var BP=BU.getUniformAxisContext();BP.mIsAxisTitleAndLabelRequired=true;BU.mIsEntireChart=false;A1.call(this);if(g.call(this,BS,BT)===false){BQ.CanSkip=true;}}function BO(){this.mAxisLayoutHighPadding=this.mUniformAxisPtr.mHighTrim||0;this.mAxisLayoutLowPadding=this.mUniformAxisPtr.mLowTrim||0;}function AS(BT,BS,BP,BU,BR){if(this.mVisualMode===A4){BR.CanSkip=true;return ;}if(BT){if(BS<=AU&&AH.call(this)){BR.CanSkip=true;return ;}}else{if(BP<=AU&&A5.call(this)===false){BR.CanSkip=true;return ;}}var BV=this.mChartContextPtr;BV.SetGraphSize(BS,BP);BV.mIsEntireChart=false;var BQ=BV.getUniformAxisContext();BQ.mIsAxisTitleAndLabelRequired=true;if(BU===undefined){BU=true;}BR.IsPrimary=BU;if(BR===undefined){BR={SkipLayout:false};}else{if(BR&&BR.SkipLayout){BR.SkipLayout=BR.SkipLayout&&(this.mUniformAxisPtr!==null);}else{BR.SkipLayout=false;}}BV.populateCanvas();}function b(BQ,BX){var BR=200,BU=201,BP=202,Ba=4,BS=1,Bb=24,BT=this.mChartContextPtr,BZ=BT.GetGraphMatrixContext(),BV=BT.mGraphType;BT.mGraphType=BQ;var BY=BT.GetGraphMajorType(),BW=BZ.isCombinationChart()||BX===203;if(BX===BR){if(BY===Au.GMT_CATEGORY){if(BT.IsBarChart()){switch(BQ){case BE.DssGraphTypeVertical_Bar_Absolute:case BE.DssGraphTypeVertical_Bar_Side_by_Side:BQ=BE.DssGraphTypeVertical_Line_Absolute;break;case BE.DssGraphTypeVertical_Bar_Stacked:BQ=BE.DssGraphTypeVertical_Line_Stacked;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Absolute:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Stacked:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Absolute:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Stacked:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BE.DssGraphTypeVertical_Bar_Percent:BQ=BE.DssGraphTypeVertical_Line_Percent;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Percent:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Bar_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeHorizontal_Line_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeHorizontal_Bar_Absolute:case BE.DssGraphTypeHorizontal_Bar_Side_by_Side:BQ=BE.DssGraphTypeHorizontal_Line_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;}}else{if(BT.IsAreaChart()){switch(BQ){case BE.DssGraphTypeVertical_Area_Absolute:BQ=BE.DssGraphTypeVertical_Line_Absolute;break;case BE.DssGraphTypeVertical_Area_Stacked:BQ=BE.DssGraphTypeVertical_Line_Stacked;break;case BE.DssGraphTypeVertical_Area_BiPolar_Absolute:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BE.DssGraphTypeVertical_Area_BiPolar_Stacked:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BE.DssGraphTypeVertical_Area_DualAxis_Absolute:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BE.DssGraphTypeVertical_Area_DualAxis_Stacked:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BE.DssGraphTypeVertical_Area_Percent:BQ=BE.DssGraphTypeVertical_Line_Percent;break;case BE.DssGraphTypeHorizontal_Area_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_Absolute;break;case BE.DssGraphTypeHorizontal_Area_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_Stacked;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BE.DssGraphTypeHorizontal_Area_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeVertical_Area_DualAxis_Percent:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Percent:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}else{if(BX===BU||BX===BP){if(BT.IsAreaChart()){switch(BQ){case BE.DssGraphTypeVertical_Area_Absolute:BQ=BE.DssGraphTypeVertical_Line_Absolute;break;case BE.DssGraphTypeVertical_Area_Stacked:BQ=BE.DssGraphTypeVertical_Line_Stacked;break;case BE.DssGraphTypeVertical_Area_BiPolar_Absolute:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BE.DssGraphTypeVertical_Area_BiPolar_Stacked:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BE.DssGraphTypeVertical_Area_DualAxis_Absolute:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BE.DssGraphTypeVertical_Area_DualAxis_Stacked:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BE.DssGraphTypeVertical_Area_Percent:BQ=BE.DssGraphTypeVertical_Line_Percent;break;case BE.DssGraphTypeHorizontal_Area_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_Absolute;break;case BE.DssGraphTypeHorizontal_Area_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_Stacked;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BE.DssGraphTypeHorizontal_Area_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeVertical_Area_DualAxis_Percent:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Percent:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BT.IsBarChart()){switch(BQ){case BE.DssGraphTypeVertical_Bar_Absolute:case BE.DssGraphTypeVertical_Bar_Side_by_Side:BQ=BE.DssGraphTypeVertical_Line_Absolute;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Stacked:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BE.DssGraphTypeVertical_Bar_Stacked:BQ=BE.DssGraphTypeVertical_Line_Stacked;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Stacked:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BE.DssGraphTypeVertical_Bar_Percent:BQ=BE.DssGraphTypeVertical_Line_Percent;break;case BE.DssGraphTypeHorizontal_Bar_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case BE.DssGraphTypeVertical_Bar_BiPolar_Absolute:BQ=BE.DssGraphTypeVertical_Bar_BiPolar_Absolute;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BE.DssGraphTypeVertical_Bar_DualAxis_Absolute:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_Absolute;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Percent:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BX===Ba||BX===BS||BX===Bb){if(BT.IsAreaChart()){switch(BQ){case BE.DssGraphTypeVertical_Area_Absolute:BQ=BE.DssGraphTypeVertical_Line_Absolute;break;case BE.DssGraphTypeVertical_Area_Stacked:BQ=BE.DssGraphTypeVertical_Line_Stacked;break;case BE.DssGraphTypeVertical_Area_BiPolar_Absolute:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BE.DssGraphTypeVertical_Area_BiPolar_Stacked:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BE.DssGraphTypeVertical_Area_DualAxis_Absolute:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BE.DssGraphTypeVertical_Area_DualAxis_Stacked:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BE.DssGraphTypeVertical_Area_Percent:BQ=BE.DssGraphTypeVertical_Line_Percent;break;case BE.DssGraphTypeHorizontal_Area_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_Absolute;break;case BE.DssGraphTypeHorizontal_Area_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_Stacked;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BE.DssGraphTypeHorizontal_Area_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeVertical_Area_DualAxis_Percent:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Percent:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BT.IsBarChart()){switch(BQ){case BE.DssGraphTypeVertical_Bar_Side_by_Side:case BE.DssGraphTypeVertical_Bar_Absolute:BQ=BE.DssGraphTypeVertical_Line_Absolute;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Absolute:case BE.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Absolute:case BE.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_Side_by_Side:case BE.DssGraphTypeHorizontal_Bar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case BE.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case BE.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Stacked:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BE.DssGraphTypeVertical_Bar_Stacked:BQ=BE.DssGraphTypeVertical_Line_Stacked;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Stacked:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BE.DssGraphTypeVertical_Bar_Percent:BQ=BE.DssGraphTypeVertical_Line_Percent;break;case BE.DssGraphTypeHorizontal_Bar_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Percent:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BW){if(BT.IsBarChart()){switch(BQ){case BE.DssGraphTypeVertical_Bar_Absolute:case BE.DssGraphTypeVertical_Bar_Side_by_Side:BQ=BE.DssGraphTypeVertical_Line_Absolute;break;case BE.DssGraphTypeVertical_Bar_Stacked:BQ=BE.DssGraphTypeVertical_Line_Stacked;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Absolute:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Stacked:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BE.DssGraphTypeVertical_Bar_DualAxis_Absolute:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Stacked:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BE.DssGraphTypeVertical_Bar_Percent:BQ=BE.DssGraphTypeVertical_Line_Percent;break;case BE.DssGraphTypeHorizontal_Bar_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeHorizontal_Bar_Absolute:case BE.DssGraphTypeHorizontal_Bar_Side_by_Side:BQ=BE.DssGraphTypeHorizontal_Line_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BE.DssGraphTypeHorizontal_Line_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Percent:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BT.IsAreaChart()){switch(BQ){case BE.DssGraphTypeVertical_Area_Absolute:BQ=BE.DssGraphTypeVertical_Line_Absolute;break;case BE.DssGraphTypeVertical_Area_Stacked:BQ=BE.DssGraphTypeVertical_Line_Stacked;break;case BE.DssGraphTypeVertical_Area_BiPolar_Absolute:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BE.DssGraphTypeVertical_Area_BiPolar_Stacked:BQ=BE.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BE.DssGraphTypeVertical_Area_DualAxis_Absolute:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BE.DssGraphTypeVertical_Area_DualAxis_Stacked:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BE.DssGraphTypeVertical_Area_Percent:BQ=BE.DssGraphTypeVertical_Line_Percent;break;case BE.DssGraphTypeHorizontal_Area_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_Absolute;break;case BE.DssGraphTypeHorizontal_Area_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_Stacked;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BE.DssGraphTypeHorizontal_Area_Percent:BQ=BE.DssGraphTypeHorizontal_Line_Percent;break;case BE.DssGraphTypeVertical_Area_DualAxis_Percent:BQ=BE.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Percent:BQ=BE.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}}}BT.mGraphType=BV;return BQ;}function H(BT,BS,BQ){var BP=BQ.length,BR;for(BR=0;BR<BP;++BR){if(BQ[BR].si===BT&&BQ[BR].gi===BS){return true;}}return false;}function q(BS,Bd,BX,BV,BU,Bc){var Be={},BT=this.mChartContextPtr,BW,Ba;if(BT.mCanvas===null){BT.populateCanvas();}BS=BS||1014;Bd=Bd||694;Be.GW=BS;Be.GH=Bd;BT.SaveSurfaceToObject(Be);var Bb=this.mChartContextPtr.GetProperty(BF.DssGraphSeriesByColumn,Ae),BZ,BP;if(Bb&&Bb!==AQ){BZ=BV;BP=BX;}else{BZ=BX;BP=BV;}var BQ=[];Ba=BQ.length;if(Ba>0){Be.Areas=[];for(BW=0;BW<Ba;++BW){var BR={};var BY=new Aw.TripleId({ObjectId:BQ[BW].GetObjectID(),SeriesId:BQ[BW].GetSeriesID(),GroupId:BQ[BW].GetGroupID()});if(BY.mObjectId!==BG.DssGraphRiser&&BY.mObjectId!==BG.DssGraphDataMarker&&BY.mObjectId!==BG.DssGraphPieSlice&&BY.mObjectId!==BG.DssGraphLegendMarker&&BY.mObjectId!==BG.DssGraphLegendText&&BY.mObjectId!==BG.DssGraph2DO1Label){continue;}if(!H.call(this,BY.mSeriesId,BY.mGroupId,Bc)){continue;}BR.OID=BY.mObjectId;BR.SID=BY.mSeriesId;BR.GID=BY.mGroupId;BR.Shape=BQ[BW].GetShape();BR.Coords=BQ[BW].GetCoordinates();Be.Areas.push(BR);}}if(Bc.length>0){Ba=Bc.length;Be.Selected=[];for(BW=0;BW!==Ba;++BW){Be.Selected.push(Bc[BW].sid);Be.Selected.push(Bc[BW].gid);}}return Be;}function B(BU){if(BU){var BT=this.mChartContextPtr,BR=this.mChartManagerPtr;if(!(BT&&BR&&BT.mIsGraphMatrix)){return ;}if(BT.mPartialRendering&&(BT.IsBubbleChart()||BT.IsScatterChart())){var BQ=BR.GetGraphObjectManager(Aw.PlotId0),BP,BS=false;if(BQ&&BQ.waitingList){BP=BQ.waitingList;if(BS){BU.hiddenItems=BU.hiddenItems||[];BP.forEach(function(BV){BU.hiddenItems.push({x:BV.Position.x,y:BV.Position.y,shp:BV.Shape,sz:BV.Size,id:null});});}else{BU.hiddenItems=BQ.waitingList;delete BQ.waitingList;}}}}}function N(){this.mDatasetPtr.finalize();var BP=this.mChartManagerPtr;BP.Draw();}function A6(){var BP=this.mChartContextPtr;if(BP.GetGraphMatrixGraphMajorType()===u._AREA&&BP.IsVertical()){return 1;}return 2;}function AM(BQ,BS,BR,BP){if(BR===null||BR===undefined){return ;}if(BP){if(BS){BR.ResetAxisPadding();BR.SetDataset(this.mDatasetPtr);BR.AdjustTitleArea(BQ);BR.AdjustDataArea(BQ,Y,Y,false);}else{BR.TrimAxisPadding(BQ);BR.ReserveTitleAndLabels(BQ,Y,Y);BR.AdjustDeviceDataArea(BQ,false);}}else{if(BS){BR.TrimAxisPadding(BQ,false);BR.SetDeviceDataArea(BQ);BR.ResetAxisPadding();BR.GenerateMapAndList();}else{BR.TrimAxisPadding(BQ,false);BR.SetDeviceDataArea(BQ);BR.AdjustDeviceDataArea(BQ,true);BR.UpdateTitleAndLabelArea(BQ);BR.GenerateGridLinesEx();}}}function C(BQ,BX,BW){var BR=this.mChartContextPtr;if(!BR.mIsGraphMatrix){return null;}var BS=null;if(BX){BS=this.mUniformAxisPtr;}else{var BP=[BG.DssGraphO1Body,BG.DssGraphX1Body,BG.DssGraphY1Body,BG.DssGraphY2Body];if(!BW&&!BR.IsDualAxis()){BW=true;}if(BR.GetGraphType()===BE.DssGraphTypeGridChart){var BT=new Aw.CategoryAxisInfo(),BV=this.mDatasetPtr.mSeriesByColumn;if(!BQ){BT.ToY(!BV);}else{BT.ToX(BV);}Ab.reset(AI,BT.mId.mObjectId,BT.mId.mSeriesId,BT.mId.mGroupId);}else{var BU;if(BR.IsVertical()){BU=BQ?0:2;}else{BU=BQ?2:0;}if(!BW){BU++;}Ab.reset(AI,BP[BU],0,-3);}BS=this.mChartManagerPtr.GetGraphObjectManager(AI,true);}return BS;}function BI(BR){var BW=this.mChartContextPtr,BP=false;if(BW.mIsTimeSeriesChart){BP=true;}else{var BT=BW.GetProperty(BF.DssGraph2DOrdSpaceMode,Aw.gNullTripleId);if(BT){BP=BT;}}var BQ,BS=BW.GetGraphType();if(BS>=BE.DssGraphTypeVertical_Line_Absolute&&BS<=BE.DssGraphTypeHorizontal_Line_Percent){BQ=true;}var BV=this.mDatasetPtr.GetGroupCount(),BU=(BV<=1&&BQ);BR.mAxisCross=(BP&&BQ&&!BU);}function AP(BP,BV,BW){var BU=BV[BP.toUpperCase()],BR=BU.CondenseLabel,BS=BW.PrimaryMetricIndex,BT=BS.length>=1?BS[0]:-1,BQ=BR[BT],BX=BW.getCondenseStatus();if(BQ!==null&&BQ!==undefined){if(BX!==undefined){if(BX!==BQ){BW.checkCondense(BQ);}}}}function AR(BW,BZ){BZ=(BZ!==undefined)?BZ:true;var Bi="X1",Bg="X1",BT=C.call(this,BW,true,BZ),BU=0,Be=BW?A0.AD_X:A0.AD_Y,BR=this.mChartContextPtr,BY=BR.getUniformAxisContext(),BX=BY.ValueAxis;var Ba=Av.call(this,BW,BZ)===BU,Bc,Bd,BS,Bf,Bb;if(BT){if(Ba===false){Bb=BT.getCondenseStatus();if(Bb===null){Bc=Bi;AP.call(this,Bc,BX,BT);}}return BT;}var BV=1;if(Ba){var BP=BR.GetGraphType();if(BP===BE.DssGraphTypeGridChart){var Bh=this.mDatasetPtr.mSeriesByColumn;if(BW){Bg=!Bh?"O1":"O2";}else{Bg=Bh?"O1":"O2";Bi="Y1";}}else{Bg="O1";if(!BW){Bi="Y1";}}if(Bg==="O1"){BR.caKeyMap.c1=Bi;}else{BR.caKeyMap.c2=Bi;}BT=this.mUniformAxisPtr=new Aw.CategoryAxis({TripleId:BR.getAxisTripleId(Bg),mChartContextPtr:this.mChartContextPtr,GraphObjectManager:this.mChartManagerPtr,AxisLabelsLocation:f.ALL_BOTTOM,AxisDirection:Be,IsUA:true});BI.call(this,BT);Bd=S.call(this,Bi);BT.SetIntegrity(Bd);}else{if(!BW){Bi="Y1";Bg="Y1";}var BQ=BW?BX.X1:BX.Y1;if(BZ===false){Bi=BW?"X2":"Y2";BQ=BX[Bi];Bg=BW?"X2":"Y2";}BS=BQ.Metrics;BT=this.mUniformAxisPtr=new Aw.ValueAxis({mChartContextPtr:this.mChartContextPtr,TripleId:BR.getAxisTripleId(Bg),GraphObjectManager:this.mChartManagerPtr,Min:BQ.Min,Max:BQ.Max,LargerGridInterval:false,IsPercent:BR.IsPercentChart(),AxisDirection:Be,IsShown:true,PrimaryMetricIndex:BS,IsUA:true});Bc=Bi;AP.call(this,Bc,BX,BT);Bf=BX[Bc.toUpperCase()];if(Bf.Valid===false){BT.SetIntegrity(BV);}else{Bc=Bi;if(Bc==="x"){Bc="X1";}Bd=S.call(this,Bc);BT.SetIntegrity(Bd);}}BT.mIsUniformAxis=true;BT.Key=Bi;return BT;}function AJ(BX,BW,BP,BS){var BR,BT,BV,BQ=this.mChartContextPtr,BU=BQ.getUniformAxisContext();if(BW===false){if(BX){BR=BP?"X1":"Y1";}else{BR=BP?"X2":"Y2";}BT=BU.ValueAxis[BR];BT.Trims[0]=BS.mLowTrim||0;BT.Trims[1]=BS.mHighTrim||0;}else{BR=BP?"X":"Y";BV=BU.CategoryAxis[BR];BV.Trims[0]=BS.mLowTrim||0;BV.Trims[1]=BS.mHighTrim||0;}}function L(BQ,BU,BS,BT){if(BT===undefined){BT=true;}this.mChartContextPtr.resetCanvas();this.mDatasetPtr.finalize();var BR=AR.call(this,BU,BT);BR.SetDeviceDataArea(BQ);AM.call(this,BQ,BS,BR,false);BR.resetRestrictSpace();AJ.call(this,BT,BS,BU,BR);var BP=Av.call(this,BU,BT)===1;if(BP){this.mDatasetPtr.saveShownLabels(BR);}BR.Draw();}function F(BU,BV,Bc){var BS=this.mChartContextPtr,BW=BS.mDataset,Be,BZ=BS.getUniformAxisContext(),Bd=BZ.ValueAxis,BR=BV?"X":"Y",Bb;BR+=Bc?"1":"2";Bb=Bd[BR].Max;var BY=true;var BQ=BW.showDatalabels();if(BQ){BY=(BW.dataLabelStyle===2);}var BP=Bb,BX,Ba=null;if(BY){AO.restore();this.mDatasetPtr.getValueAxisNumberFormat(AO,BU);var BT=new Aw.NumberObject({TripleId:new Aw.TripleId({ObjectId:BG.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,Number:BP,NumberFormat:AO,GraphCollectionObject:Ba,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(BT){BX=BT.mText;}Be=BT;}else{BX=BW.GetTextLabel(0,0);Be=new Aw.TextObject({TripleId:new Aw.TripleId({ObjectId:BG.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,GraphCollectionObject:Ba});}if(Be){Be.SetText(BX);}return Be;}function Ac(BQ){var BP={};switch(BQ){case BE.DssGraphTypeVertical_Area_Absolute:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Area_Stacked:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Area_BiPolar_Absolute:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeVertical_Area_BiPolar_Stacked:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeVertical_Area_DualAxis_Absolute:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Area_DualAxis_Stacked:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Area_Percent:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Area_Absolute:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Area_Stacked:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Area_Percent:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Bar_Side_by_Side:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_CLUSTER;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Bar_Stacked:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_CLUSTER;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Stacked:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_CLUSTER;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Stacked:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeVertical_Bar_Percent:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Bar_Side_by_Side:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_CLUSTER;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Bar_Stacked:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_CLUSTER;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_CLUSTER;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeHorizontal_Bar_Percent:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Line_Absolute:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Line_Stacked:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Line_BiPolar_Absolute:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeVertical_Line_BiPolar_Stacked:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeVertical_Line_DualAxis_Absolute:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Line_DualAxis_Stacked:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Line_Percent:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Line_Absolute:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Line_Stacked:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Line_BiPolar_Absolute:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeHorizontal_Line_BiPolar_Stacked:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeHorizontal_Line_DualAxis_Absolute:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Line_DualAxis_Stacked:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_STACKED;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Line_Percent:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Bullet:case BE.DssGraphTypeVertical_Bar_Absolute:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeHorizontal_Bullet:case BE.DssGraphTypeHorizontal_Bar_Absolute:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_NULL;break;case BE.DssGraphTypeVertical_Bar_BiPolar_Absolute:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Absolute:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_BIPOLAR;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_ABSOLUTE;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Area_DualAxis_Percent:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Area_DualAxis_Percent:BP.mMajorGraphType=BC.MGT_AREA;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Bar_DualAxis_Percent:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BP.mMajorGraphType=BC.MGT_BAR;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeVertical_Line_DualAxis_Percent:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_VERTICAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;case BE.DssGraphTypeHorizontal_Line_DualAxis_Percent:BP.mMajorGraphType=BC.MGT_LINE;BP.mLayout=A8.LO_PERCENT;BP.mOrientation=Aa.OR_HORIZONTAL;BP.mGraphSubType=Ah.GST_DUALAXIS;break;}switch(BP.mGraphSubType){case Ah.GST_NULL:BP.mDualAxes=false;BP.mSplitDualAxes=false;break;case Ah.GST_DUALAXIS:BP.mDualAxes=true;BP.mSplitDualAxes=false;break;case Ah.GST_BIPOLAR:BP.mDualAxes=true;BP.mSplitDualAxes=true;break;}return BP;}function An(BT,Br,BS,Bb,Bm){var BV=this.mChartContextPtr,Bf=this.mDatasetPtr,Bl,Bj=BV.getUniformAxisContext(),Ba=this.mUniformAxisPtr,BW=new Aw.Rect2D(),BY=false,Bo,BR,Bh,Bc,BX,Be,Bd,BZ,Bi,BU,BQ,Bp;BW.ResetRect(BT);Bl=BV.GetProperty(Az.DSSGraphMatrixDataLabelRotated,Aw.gNullTripleId);var Bg=Bf.showDatalabels();if(Bg&&BV.IsBarChart()&&Bl!==null){var Bk=Bl,Bq=Bj.ValueAxis,Bn=Bb?"X":"Y";Bn+=Bm?"1":"2";Bo=Bq[Bn].Max;BQ=F.call(this,Br,Bb,Bm);if(Bb){BQ.GetFormatFont().mFontRotation=I.FR_NORMAL;}else{var BP=Ac(BV.GetGraphType());if(BP.mLayout===A8.LO_CLUSTER){Bk=true;}if(Bk){BQ.GetFormatFont().mFontRotation=I.FR_90;}else{BQ.GetFormatFont().mFontRotation=I.FR_NORMAL;}}BR=BQ.GetBoundingRect();Bh=5;Bc=Ba.GetMaxTick();BX=Ba.GetMinTick();Be=Ba.GetPositionByValue(Bc);Bd=Ba.GetPositionByValue(BX);BZ=Ba.GetPositionByValue(Bo);if(Bb){if(BS-BZ<Bh*2+BR.width){BU=Bh*2+BR.width;Bi=BS-BU;Bp=(Bi>Bd);if(Bp&&BU/(Be-Bd)<0.2){BW.width-=BU;BY=true;BT.ResetRect(BW);Ba.dataLabelPadding=BU;}}}else{if(Bo>0&&BZ<Bh*2+BR.height){BU=Bh*2+BR.height;Bi=BU;Bp=(Bi>BZ);if(Bp&&BU/(Bd-Be)<0.2){BW.y+=BU;BW.height-=BU;BY=true;BT.ResetRect(BW);Ba.dataLabelPadding=BU;}}}}return BY;}function BB(BR,BQ,BP,BS){return An.call(this,BR,BQ,BP,true,BS);}function P(BR,BQ,BP,BS){return An.call(this,BR,BQ,BP,false,BS);}function a(BT,BV,BU){var BR=false,BQ=false,BP=Am.NONE,BS=this.mUniformAxisSpace;if(BV<0||BU<0){BS.width=BV;BS.height=BU;return BP;}BR=BV===BS.width;BQ=BU===BS.height;if(BR&&BQ){BP=Am.KeepBoth;}else{if(BR){BP=BU>BS.height?Am.ExpandY:Am.ShrinkY;}else{if(BQ){BP=BV>BS.width?Am.ExpandX:Am.ShrinkX;}else{BP=Am.NONE;if(BT){BP=BV>BS.width?Am.ExpandX:Am.ShrinkX;}else{BP=BU>BS.height?Am.ExpandY:Am.ShrinkY;}}}}BS.width=BV;BS.height=BU;return BP;}function E(BQ,BP){var BR=this.mChartContextPtr;if(this.mInitialized){return false;}if(BR.GetGraphMajorType()===Au.GMT_HISTOGRAM){this.mDatasetPtr.mIsForHistogram=true;}BR.SetGraphSize(BQ,BP);A1.call(this);this.mChartManagerPtr=new Aw.ChartManager({mTripleId:Aw.ManagerId,mDatasetPtr:this.mDatasetPtr,mChartContextPtr:BR});this.mChartManagerPtr.GenerateMapAndList();this.mInitialized=true;return true;}function AB(BP){switch(BP){case BE.DssGraphTypeVertical_Area_Absolute:case BE.DssGraphTypeVertical_Area_Stacked:case BE.DssGraphTypeVertical_Area_BiPolar_Absolute:case BE.DssGraphTypeVertical_Area_BiPolar_Stacked:case BE.DssGraphTypeVertical_Area_DualAxis_Absolute:case BE.DssGraphTypeVertical_Area_DualAxis_Stacked:case BE.DssGraphTypeVertical_Area_Percent:case BE.DssGraphTypeHorizontal_Area_Absolute:case BE.DssGraphTypeHorizontal_Area_Stacked:case BE.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BE.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BE.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BE.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BE.DssGraphTypeHorizontal_Area_Percent:case BE.DssGraphTypeD3_Connect_Group_Areas:case BE.DssGraphTypeD3_Connect_Group_Ribbons:case BE.DssGraphTypeD3_Connect_Series_Areas:case BE.DssGraphTypeD3_Connect_Series_Ribbons:case BE.DssGraphTypeD3_Surface:case BE.DssGraphTypeD3_Surface_with_Sides:case BE.DssGraphTypeD3_Honeycomb_Surface:return 2;default:return 1;}}function w(BZ,BX,BP,BV){var BY=BZ?BV:BP,BW=BZ?BP:BV,BQ=BP,BT=true,BR,BU,BS=AR.call(this,BZ,BX);BU=BS.resizeAction=a.call(this,BZ,BY,BW);if(BU===Am.KeepBoth){return BS;}if(BP>=0){BS.resetRestrictSpace(this.mUniformAxisSpace);}if(BZ){BR=this.isAxisLabelRotated(BZ,BX);if(BR){if(!(BU===Am.ShrinkX||BU===Am.ShrinkY||BU===Am.ExpandY)){BQ=-1;BT=false;}}else{if(BS.getLabelRotation()===I.FR_NORMAL&&BS.resizeAction===Am.ExpandX){BQ=BV;BT=false;}else{BQ=-1;BT=false;}}}BS.updateMaxLabelLength(BQ,BT);return BS;}function Al(){if(this.mUniformAxisSpace===null){this.mUniformAxisSpace={width:0,height:0,x:0,y:0};this.mUniformAxisSpace.width=-1;}}mstrmojo.chart.ChartImpl=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.chart.ChartImpl",mFontAntiAlias:true,mDatasetPtr:null,mFormatManager:null,mChartManagerPtr:null,mOldChartManager:null,mChartContextPtr:null,mInitialized:false,mUniformAxisSpace:null,mUniformAxisPtr:null,mVisualMode:null,init:function Ad(BP){this._super(BP);this.mDatasetPtr=this.mDatasetPtr||BP.DataSet||null;this.mChartContextPtr=this.addDisposable(new Aw.GenericContext(BP));this.mFormatManager=this.mFormatManager||BP.FormatManager||null;this.mVisualMode=Ag;},SetData:function AN(BQ){var BP=this.mDatasetPtr=BQ;this.mChartContextPtr.mDataset=BQ;BP.SetFormatManager(this.mFormatManager);},GetOptions:function y(BP,BT,BQ,BS){var BR,BU=Ab.create(BP,BT,BQ);BR=this.mChartContextPtr.GetProperty(BS,BU);if(BR){return BR;}switch(BS){case BF.DssGraphAutoArrange:return{Value:this.mChartContextPtr.mManualLayoutMode,IsValid:true};case BF.DssGraphType:case BF.DssGraphEnhancedSeriesEffect:case BF.DssGraphCurvedLines:case BF.DssGraphFontAntiAlias:case BF.DssGraphInfoSuppressLastLevel:case BF.DssGraphInfoIncludeSubtotal:case BF.DssGraphInfoNestedLabel:case BF.DssGraphInfoNestedLabelBracket:case BF.DssGraph2DSplitYAutomatic:case BF.DssGraphAxisNumberFormat:return{Value:this.mChartContextPtr.GetProperty(BS,BU),IsValid:true};case BF.DssGraph2ScaleDirection:if(BP===BF.DssGraphO1Body){return{Value:this.mDatasetPtr.mReverseGroup,IsValid:true};}break;case BF.DssGraphSeriesByColumn:return{Value:this.mDatasetPtr.mSeriesByColumn,IsValid:true};}return{IsValid:false};},OnRectangleSelection:function n(BP,BQ){var BS=[],BT,BU=this.mChartManagerPtr,BR=new Aw.Rect2D({x:BP.x,y:BP.y,width:BP.w,height:BP.h});BT=BU.GetGraphObjectManager(Aw.PlotId0);if(!BT){return BS;}BT.OnRectangleSelection(BR,BS,BQ.outPut);return BS;},SaveImageToObject:function Ax(BT,BQ,BU,BP,BS,BR){BT=BT||1014;BQ=BQ||694;E.call(this,BT,BQ);N.call(this);return q.call(this,BT,BQ,BU,BP,BS,BR);},PlainDraw:function J(BP,BQ){var BR=this.mChartContextPtr;BP=BP||BR.mGraphWidth;BQ=BQ||BR.mGraphHeight;return E.call(this,BP,BQ);},GetDataGroup:function t(){if(this.mChartContextPtr.mIsGraphMatrix){return this.mDatasetPtr.GetDataGroup();}return 1;},setCanvasProps:function A7(BP){if(this.mChartContextPtr){this.mChartContextPtr.mCanvasInfo=Z.copy(BP,this.mChartContextPtr.mCanvasInfo);}},SetFormatManager:function BH(BP){this.mFormatManager=BP;this.mChartContextPtr.SetFormatManager(BP);this.mDatasetPtr.SetFormatManager(BP);},IsDataEnough:function O(){if(this.mChartContextPtr.mIsGraphMatrix){return true;}var BQ,BP;BQ=this.mDatasetPtr.GetGroupCount();BP=AB.call(this,this.mChartContextPtr.mGraphType);return BQ>=BP;},DrawUniformYAxis:function BN(BQ,BY,BX,BW){var BR=this.mChartContextPtr;BR.startTimer({functionName:"DrawUniformYAxis",purpose:"render uniform Y axis",caller:arguments.caller||"unknown"});BW=BW||{};AS.call(this,false,BQ,BY,BX,BW);if(BW.CanSkip){BR.endTimer();return q.call(this,BQ,BY,false,false,false,[]);}BX=BW.IsPrimary;var BU=BR.getUniformAxisContext();if(BW.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(g.call(this,false,BX)===false){BR.endTimer();return q.call(this,BQ,BY,false,false,false,[]);}var BV=A5.call(this),BP=Math.round(BW.dataLabelPadding||0),BT=BU.mDataAreaTopMargin,BZ=BY-BT-BU.mDataAreaBottomMargin,BS=new Aw.Rect2D({x:(BX?BQ:0),y:BT,width:0,height:BZ});if(BP){BS.y=BP;BS.height-=BP;}L.call(this,BS,false,BV,BX);}BR.endTimer();return q.call(this,BQ,BY,false,false,false,[]);},DrawUniformXAxis:function V(BQ,BZ,BX,BW){var BR=this.mChartContextPtr;this.mChartContextPtr.startTimer({functionName:"DrawUniformXAxis",purpose:"render uniform X axis",caller:arguments.caller||"unknown"});BW=BW||{};AS.call(this,true,BQ,BZ,BX,BW);if(BW.CanSkip){BR.endTimer();return q.call(this,BQ,BZ,false,false,false,[]);}BX=BW.IsPrimary;var BU=BR.getUniformAxisContext();if(BW.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(g.call(this,true,BX)===false){BR.endTimer();return q.call(this,BQ,BZ,false,false,false,[]);}var BV=!AH.call(this),BP=Math.round(BW.dataLabelPadding||0),Ba=BU.mDataAreaLeftMargin,BT=0,BY=BQ-Ba-BU.mDataAreaRightMargin,BS=new Aw.Rect2D({x:Ba,y:(BX?BT:BZ),width:BY,height:0});if(BP){BS.width-=BP;}L.call(this,BS,true,BV,BX);}BR.endTimer();return q.call(this,BQ,BZ,false,false,false,[]);},DrawDataAreaForUniformAxis:function AK(BS,BP,BR){this.mChartContextPtr.startTimer({functionName:"DrawDataAreaForUniformAxis",purpose:"render data area for the mini chart",caller:arguments.caller||"unknown"});if(this.mVisualMode===A4){return q.call(this,BS,BP,false,false,false,[]);}var BU=this.mChartContextPtr,BQ=BU.getUniformAxisContext();BQ.xDataLabelPadding=BR.xDataLabelPadding||0;BQ.yDataLabelPadding=BR.yDataLabelPadding||0;BQ.mIsAxisTitleAndLabelRequired=false;this.mInitialized=false;BU.mIsEntireChart=false;this.mChartContextPtr.populateCanvas();E.call(this,BS,BP);N.call(this);BQ.xDataLabelPadding=0;BQ.yDataLabelPadding=0;BU.endTimer();var BT=q.call(this,BS,BP,false,false,false,[]);B.call(this,BT);return BT;},GetUniformAxisMargins:function D(){var BR=this.mChartContextPtr,BQ=BR.getUniformAxisContext(),BP={LEFT:BQ.mDataAreaLeftMargin,RIGHT:BQ.mDataAreaRightMargin,TOP:BQ.mDataAreaTopMargin,BOTTOM:BQ.mDataAreaBottomMargin};return BP;},UpdateUniformAxisMargins:function BD(BQ){var BR=this.mChartContextPtr,BP=BR.getUniformAxisContext();if(BQ.LEFT){BP.mDataAreaLeftMargin=BQ.LEFT;}if(BQ.RIGHT){BP.mDataAreaRightMargin=BQ.RIGHT;}if(BQ.TOP){BP.mDataAreaTopMargin=BQ.TOP;}if(BQ.BOTTOM){BP.mDataAreaBottomMargin=BQ.BOTTOM;}},GetUniformAxisLabelsInfo:function BL(BR,BS,BQ){var BP=AR.call(this,BR);if(BP){return BP.getUniformAxisLabelsInfo(BQ);}return[];},GetPositionAtTick:function x(BT,BP,BW){var BQ=this.mChartContextPtr,Bc,BS,BZ,Bb;if(!BQ.mIsGraphMatrix){return 0;}var BV=BQ.getUniformAxisContext();if(!BV){return 0;}var BR=this.mUniformAxisPtr;if(BR){var BY=BR.mTripleId.mObjectId;if(BK.call(this,BY)){var Ba=BR.mDeviceDataArea;if(!BR.GetTrimWithPadding()){var BX=new Aw.Rect2D();if(BP){Bc=BV.mDataAreaLeftMargin;BS=0;BZ=BW-Bc-BV.mDataAreaRightMargin;BX.Reset(Bc,BS,BZ,0);}else{Bc=0;BS=BV.mDataAreaTopMargin;Bb=BW-BS-BV.mDataAreaBottomMargin;BX.Reset(Bc,BS,0,Bb);}BR.TrimAxisPadding(BX,false);BR.SetDeviceDataArea(BX);BR.SetTrimWithPadding(false);}var BU=BR.GetPositionAtTick(BT);BR.SetDeviceDataArea(Ba);return BU;}}return 0;},getZeroLineInfo:function AW(BT,BS,BR){var BQ={};BQ.Qualified=this.IsZeroBaseLineQualified(BT,BS);if(BQ.Qualified){var BP=this.mUniformAxisPtr;if(BP===null||BP===undefined){this.mUniformAxisPtr=AR.call(this,BT,BS);}BQ.Position=this.GetPositionAtTick(0,BT,BR);BQ.Shapes=this.mDatasetPtr.GetShapesDistributionByValueAxis();}else{BQ.Position=-1;BQ.Shapes={};}return BQ;},IsZeroBaseLineQualified:function k(BX,BV){BX=BX||false;if(BV===undefined){BV=true;}this.useOriginFormatForZeroLine=false;var BQ=this.mChartContextPtr;if(!BQ.mIsGraphMatrix){return false;}if(BQ.IsBarChart()===false&&BQ.IsLineChart()===false&&BQ.IsAreaChart()===false){return false;}var BS=this.mUniformAxisPtr;if(BS){var BW=BS.mTripleId.mObjectId;if(BK.call(this,BW)){if(BS.isBaseLineQualified()){return true;}else{if(BQ.isCombinationChart()===false){return false;}if(BS.liftedFromZero()){var BY=this.mDatasetPtr.GetShapesDistributionByValueAxis();var BP=BY.Primary;if(BV&&BP&&(BP.BAR&&BP.BAR.length||BP.AREA&&BP.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}BP=BY.Secondary;if(!BV&&BP&&(BP.BAR&&BP.BAR.length||BP.AREA&&BP.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}}}}}else{var BR,BU=BQ.getUniformAxisContext();if(BU.ValueAxis){if(BV){BR=BX?"X1":"Y1";}else{BR=BX?"X2":"Y2";}var BT=BU.ValueAxis[BR];if(BT){return BT.Min<0&&BT.Max>0;}}}return false;},GetAxisLabelRotation:function A9(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}var BP=this.mUniformAxisPtr;if(BP===null){return false;}return BP.getLabelRotation();},GetShownNumericTicks:function AD(BP){var BR=this.mChartContextPtr;if(BR.mIsGraphMatrix){var BQ=BR.GetGraphMatrixContext();return BP?BQ.mShownValueTickSet[0]:BQ.mShownValueTickSet[1];}},SetShowNumericTicks:function o(BR,BP){var BS=this.mChartContextPtr;if(BS.mIsGraphMatrix){var BQ=BS.GetGraphMatrixContext();if(BP){BQ.mShownValueTickSet[0]=BR;}else{BQ.mShownValueTickSet[1]=BR;}}},refreshChartComponents:function AL(BZ){var BR=this.mChartContextPtr,Bd=BR.IsVertical(),Bc=BR.IsBarChart()||BR.IsAreaChart()||BR.IsLineChart(),Ba=BR.IsBubbleChart()||BR.IsScatterChart();var Bf=BZ.size;if(Bf){BR.SetGraphSize(Bf.w,Bf.h);}var BW=BZ.dataProvider;if(BW){this.mDatasetPtr.refresh(BW);}var BS="Y1",BT,Bb=this.mChartManagerPtr,BV;var BQ=BZ.plot;if(BQ){var Be={mObjectId:20002,mSeriesId:0,mGroupId:-3};var BY=Bb.GetGraphObjectManager(Be);if(BY){BY.refresh(BZ.purpose,BQ);}}var BP=BZ.primaryValueAxis;if(BP){if(Bc&&!Bd){BS="X1";}BT=BR.getAxisTripleId(BS);BV=Bb.GetGraphObjectManager(BT);if(BV){BV.refresh(BZ.purpose,BP);}}BS="X1";var BU=BZ.secondaryValueAxis;if(BU){if(Ba){BS="X1";}BT=BR.getAxisTripleId(BS);BV=Bb.GetGraphObjectManager(BT);if(BV){BV.refresh(BZ.purpose,BU);}}BS="O1";var BX=BZ.primaryCategoryAxis;if(BX){BT=BR.getAxisTripleId(BS);BV=Bb.GetGraphObjectManager(BT);if(BV){BV.refresh(BZ.purpose,BX);}}},GetDataAreaPadding:function BM(){var BR=this.mChartContextPtr,Bk=BR.GetGraphMatrixContext(),BZ={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},Bi,Bh;if(!BR.mIsGraphMatrix){return BZ;}var Bl=function(Bq){var Bp=0;Bq.forEach(function(Br){Bp+=Br;});return Bp;};var BY,BQ,BT=0,BV=0,Ba=0,Bo=0,Be=0;if(Bk.isCombinationChart()){var Bf=this.mDatasetPtr.GetSeriesByShape();if(Bf.Circle){BV=Bf.Circle.length;}if(Bf.Square){Ba=Bf.Square.length;}if(Bf.Line){Be=Bf.Line.length;}if(Bf.Area){Bo=Bf.Area.length;}if(Bf.Bar){BT=Bf.Bar.length;}BY=this.mDatasetPtr;BQ=BY.GetDiscreteSeries();if(!(BV>0||Ba>0||(Bk.mHasSizeBy&&Be>0)||(!Bk.mHasSizeBy&&(Be>0||Bo>0)&&BQ.length>0&&(AX.HasArrayIntersection(BQ,Bf.Line)||AX.HasArrayIntersection(BQ,Bf.Area))))){return BZ;}if(BT===BY.GetSeriesCount()){return BZ;}}else{if(BR.IsBarChart()||BR.mGraphType===BE.DssGraphTypeGridChart||(Bk.mMarkerShape===200&&BR.IsBubbleChart()===false&&BR.IsScatterChart()===false)){return BZ;}}var Bj=BR.IsAreaChart()||BR.IsLineChart(),Bm=Bk.isCombinationChart()===false,BU;if(Bm===false){Bm=Bl([BT,Bo,Be,Ba,BV])<=1;}if(Bm&&BR.GetGraphMajorType()===Au.GMT_CATEGORY){var Bb=2;BY=this.mDatasetPtr;BQ=BY.GetDiscreteSeries();if(Bk.mHasSizeBy===false&&(!(Bj&&BQ.length>0)||(Bj&&BY.GetGroupCount()<=1&&BY.GetSeriesCount<=1))){BU=this.GetMaxElementRadius(BR.mGraphWidth,BR.mGraphHeight);if(BR.IsLineChart()){BU=Math.max(BU,Bb);}BZ.Y1.LowOffset=BZ.Y1.HighOffset=BZ.Y2.LowOffset=BZ.Y2.HighOffset=BU;BZ.X2.LowOffset=BZ.X2.HighOffset=BU;BZ.X1.LowOffset=BZ.X1.HighOffset=BU;return BZ;}}var BW=true;if(BW){if(BR.IsScatterChart()){BU=this.GetMaxElementRadius(BR.mGraphWidth,BR.mGraphHeight);BZ.Y1.LowOffset=BZ.Y1.HighOffset=BZ.Y2.LowOffset=BZ.Y2.HighOffset=BU;BZ.X2.LowOffset=BZ.X2.HighOffset=BU;BZ.X1.LowOffset=BZ.X1.HighOffset=BU;return BZ;}}var Bc=BR.getUniformAxisContext();Bc.mIsAxisTitleAndLabelRequired=false;BR.mImageUsage=AT.OBJECT_CLIP_COMPUTATION;E.call(this,BR.mGraphWidth,BR.mGraphHeight);BR.mImageUsage=AT.GENERAL;var Bg=Aw.PlotId0,Bn=this.mChartManagerPtr.GetGraphObjectManager(Bg);if(!Bn){return BZ;}var BS;for(Bi=0;Bi<2;++Bi){for(Bh=0;Bh<2;++Bh){var BX=Bi===0,Bd=Bh===0,BP=BX?(Bd?"X1":"X2"):(Bd?"Y1":"Y2");BS=Bn.GetMaxElementOffsetClippedByBoundary(BX,Bd);BZ[BP].LowOffset=BS.LowOffset;BZ[BP].HighOffset=BS.HighOffset;}}return BZ;},GetUniformYAxisWidth:function Aj(Ba,BP,BZ){this.mChartContextPtr.startTimer({functionName:"GetUniformYAxisWidth",purpose:"Create uniform Y axis instance and do axis layout",caller:arguments.caller||"unknown"});Al.call(this);var BY={};BA.call(this,false,BP,BZ,BY);if(BY.CanSkip){return 0;}BP=BY.MaxLabelLength;BZ=BY.IsPrimary;var BR=this.mChartContextPtr,BU=BR.mDataset,BW=BR.getUniformAxisContext(),BX=A5.call(this),Bb,BT,Bc,BV=900,BS;AG.Reset(Y,Y,Ba,Ba-A6.call(this)*Y);BR.SetGraphSize(Ba,Ba-A6.call(this)*Y);BT=w.call(this,false,BZ,BP,Ba);if(BT.resizeAction===Am.KeepBoth){return this.mUniformAxisSpace.width;}AG.width=Math.max(AG.width,0);AG.height=Math.max(AG.height,0);if(BT.restrictWidth===-1){AG.width=Math.max(AG.width,BV);}else{AG.width=Math.min(BT.restrictWidth,BV);}BS=AG.width;AM.call(this,AG,BX,BT,true);var BQ=BU.showDatalabels();if(!BX&&BQ){this.AdjustingAxisPaddingForDataLabel(AG,false,Ba,Ba);}Af.call(this,BW,AG,Ba,BP,false,BZ);Bb=0;this.mUniformAxisPtr=BT;if(BZ){Bc=AG.x+Bb;}else{Bc=BS-(AG.x+AG.width)-Y+Bb;}if(this.mUniformAxisSpace.width===-1){BT.restrictWidth=this.mUniformAxisSpace.width=Bc;}BO.call(this);BR.endTimer();return Math.max(Bc,0);},GetUniformXAxisHeight:function j(BR,BP,BZ){this.mChartContextPtr.startTimer({functionName:"GetUniformXAxisHeight",purpose:"Create uniform X axis instance and do axis layout",caller:arguments.caller||"unknown"});Al.call(this);var BY={};BA.call(this,true,BP,BZ,BY);if(BY.CanSkip){return 0;}BP=BY.MaxLabelLength;BZ=BY.IsPrimary;var BS=this.mChartContextPtr,BU=BS.mDataset,BV=BS.getUniformAxisContext(),BX=!AH.call(this),BW=400,BQ,Ba,BT,Bb;AG.Reset(0,0,BR,BW);BS.SetGraphSize(BR,BW);BT=w.call(this,true,BZ,BP,BR);if(BT.resizeAction===Am.KeepBoth){return this.mUniformAxisSpace.height;}AM.call(this,AG,BX,BT,true);BQ=BU.showDatalabels();if(!BX&&BQ){this.AdjustingAxisPaddingForDataLabel(AG,true,BR,BZ);}Af.call(this,BV,AG,BR,BP,true,BZ);Ba=0;this.mUniformAxisPtr=BT;if(BZ){Bb=BW-(AG.y+AG.height)-Y+Ba;}else{Bb=AG.y;}if(this.mUniformAxisSpace.height===-1){BT.restrictHeight=this.mUniformAxisSpace.height=Bb;}BO.call(this);BS.endTimer();return Math.max(Bb,0);},UpdatePartialRenderingWindow:function G(BQ,BR,BP){BQ=BQ||false;var BS=this.mChartContextPtr;if(BS.IsScatterChart()||BS.IsBubbleChart()){BS.mPartialRendering=BQ;}else{BS.mPartialRendering=BQ&&(BR!==undefined);if(BS.mPartialRendering){BS.mPartialRendering=BS.mPartialRendering&&(BR.x!==undefined&&BR.y!==undefined&&BR.width!==undefined&&BR.height!==undefined);}}if(BS.mPartialRendering){if(BS.mRenderingWindow===null){BS.mRenderingWindow={};}if(BR){Z.copy(BR,BS.mRenderingWindow);}}else{BS.mRenderingWindow=null;}if(BP!==undefined){if(BS.mPartialRendering){this.mVisualMode=BP;}else{this.mVisualMode=Ag;}}},updateUniformXAxisLayout:function A(BS){var BQ=BS,BP=this.mChartContextPtr.getUniformAxisContext(),BV=BP.CategoryAxis.X,BR=1,BU=2,BT=3,BW=4;BV.Layout=BQ.Layout;if(BQ.Layout===BW){BV.Layout=BR;BV.ForbideStagger=true;}else{if(BQ.Layout===BT){BV.ForbideStagger=true;}else{BV.ForbideStagger=false;}}BV.StartRow=0;if(BV.Layout===BU){BV.StartRow=BQ.StartRow;}if(BQ.LabelWidthLimit!==undefined){BV.LabelWidthLimit=BQ.LabelWidthLimit;}BV.EnforceCluster=(!!BQ.EnforceCluster)||BV.EnforceCluster;BV.EnforceFringe=(!!BQ.EnforceFringe)||BV.EnforceFringe;},updateUniformAxisLabelRotation:function A3(BT,BR){if(BR===undefined){BR=-1;}var BQ={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};var BS=this.mChartContextPtr,BP=BS.getUniformAxisContext();if(BR===-1){if(BT===undefined){return ;}switch(BT){case BQ.NORMAL:case BQ.STAGGER:BP.mLabelRotation.X1=I.FR_AUTOMATIC;break;default:BP.mLabelRotation.X1=I.FR_90;break;}}else{if(BR===2){BP.mLabelRotation.X1=I.FR_90;}else{BP.mLabelRotation.X1=I.FR_NORMAL;}}},EnableUniformAxis:function W(BU,BQ){BQ=BQ||false;var BV=this.mChartContextPtr,Bb=BV.getUniformAxisContext(),Bj=Bb.ValueAxis,Bh,BR,Bg=Bj.X1,Bf=Bj.X2,BY=Bj.Z,BT=Bj.Y1,BS=Bj.Y2;Bh=AX.isValidNumber(BU.YMinValue);BR=AX.isValidNumber(BU.YMaxValue);BT.Valid=Bh&&BR;BT.Min=parseFloat(Bh?BU.YMinValue:0);BT.Max=parseFloat(BR?BU.YMaxValue:0);BT.CustomScale=(BU.YCustomScale!==undefined)?BU.YCustomScale:false;BT.CondenseLabel=(BU.YCondenseLabel!==undefined)?BU.YCondenseLabel:{};BT.CondenseEnforced=BU.YCondenseEnfored||false;BT.AutoMin=BU.YAutoMin;BT.AutoMax=BU.YAutoMax;Bh=AX.isValidNumber(BU.Y2MinValue)||AX.isValidNumber(BU.X2MinValue);BR=AX.isValidNumber(BU.Y2MaxValue)||AX.isValidNumber(BU.X2MaxValue);BS.Valid=Bh&&BR;BS.Min=parseFloat(AX.isValidNumber(BU.Y2MinValue)?BU.Y2MinValue:(AX.isValidNumber(BU.X2MinValue)?BU.X2MinValue:0));BS.Max=parseFloat(AX.isValidNumber(BU.Y2MaxValue)?BU.Y2MaxValue:(AX.isValidNumber(BU.X2MaxValue)?BU.X2MaxValue:0));BS.CustomScale=(BU.Y2CustomScale!==undefined)?BU.Y2CustomScale:((BU.X2CustomScale!==undefined)?BU.X2CustomScale:false);BS.CondenseLabel=(BU.Y2CondenseLabel!==undefined)?BU.Y2CondenseLabel:(BU.X2CondenseLabel!==undefined?BU.X2CondenseLabel:{});BS.CondenseEnforced=BU.Y2CondenseEnfored||BU.X2CondenseEnfored||false;BS.AutoMin=BU.Y2AutoMin;BS.AutoMax=BU.Y2AutoMax;Bh=AX.isValidNumber(BU.XMinValue);BR=AX.isValidNumber(BU.XMaxValue);Bg.Valid=Bh&&BR;Bg.Min=parseFloat(Bh?BU.XMinValue:0);Bg.Max=parseFloat(BR?BU.XMaxValue:0);Bg.CustomScale=(BU.XCustomScale!==undefined)?BU.XCustomScale:false;Bg.CondenseLabel=(BU.XCondenseLabel!==undefined)?BU.XCondenseLabel:{};Bg.CondenseEnforced=BU.XCondenseEnfored||false;Bg.AutoMin=BU.XAutoMin;Bg.AutoMax=BU.XAutoMax;Bh=AX.isValidNumber(BU.X2MinValue);BR=AX.isValidNumber(BU.X2MaxValue);Bf.Valid=Bh&&BR;Bf.Min=parseFloat(Bh?BU.X2MinValue:0);Bf.Max=parseFloat(BR?BU.X2MaxValue:0);Bf.CustomScale=(BU.X2CustomScale!==undefined)?BU.X2CustomScale:false;Bf.CondenseLabel=(BU.X2CondenseLabel!==undefined)?BU.X2CondenseLabel:{};Bf.CondenseEnforced=BU.X2CondenseEnfored||false;Bf.AutoMin=BU.X2AutoMin;Bf.AutoMax=BU.X2AutoMax;BY.Min=parseFloat(AX.isValidNumber(BU.ZMinValue)?BU.ZMinValue:0);BY.Max=parseFloat(AX.isValidNumber(BU.ZMaxValue)?BU.ZMaxValue:0);BY.CustomScale=(BU.ZCustomScale!==undefined)?BU.ZCustomScale:false;BY.AutoMin=BU.ZAutoMin;BY.AutoMax=BU.ZAutoMax;Bb.mGraphHeight=(BU.GraphHeight!==undefined)?BU.GraphHeight:0;if(BQ){return ;}BV.mIsUniformAxisMode=true;BV.mIsGraphMatrix=true;if(BU.XMetrics){Bg.Metrics.splice(0,Bg.Metrics.length);Bg.Metrics=Bg.Metrics.concat(BU.XMetrics);}if(BU.YMetrics){BT.Metrics.splice(0,Bj.Y1.Metrics.length);BT.Metrics=Bj.Y1.Metrics.concat(BU.YMetrics);}if(BU.Y2Metrics){BS.Metrics.splice(0,BS.Metrics.length);BS.Metrics=BS.Metrics.concat(BU.Y2Metrics);}if(BU.X2Metrics){Bf.Metrics.splice(0,Bf.Metrics.length);Bf.Metrics=Bf.Metrics.concat(BU.X2Metrics);}if(BU.ZMetrics){BY.Metrics.splice(0,BY.Metrics.length);BY.Metrics=BY.Metrics.concat(BU.ZMetrics);}if(BU.LabelPlacement!==undefined){this.updateUniformAxisLabelRotation(BU.LabelPlacement,BU.xAxisRotateMode);}if(BU.XCategoryAxis){var Bi=BU.XCategoryAxis,Bd=Bb.CategoryAxis.X,BW=3;Bd.Truncation={Idices:[],Texts:[]};if(Bd.Layout!==BW){Bd.Truncation.Idices=BU.TruncatedIdices;Bd.Truncation.Texts=BU.TruncatedTexts;}this.updateUniformXAxisLayout(Bi);}if(BU.YCategoryAxis){var Ba=BU.YCategoryAxis;var BX=Bb.CategoryAxis.Y;if(Ba.LabelWidthLimit!==undefined){BX.LabelWidthLimit=Ba.LabelWidthLimit;}BX.EnforceCluster=(!!Ba.EnforceCluster)||BX.EnforceCluster;BX.EnforceFringe=(!!Ba.EnforceFringe)||BX.EnforceFringe;}if(BV.IsScatterChart()||BV.IsBubbleChart()){var Be=BV.GetGraphMatrixContext(),Bc=Be.AxisLayout;if(Bc===null||Bc===undefined){return ;}var BZ=4,BP=8;if(!!(Bc&BZ)){BT.Min=parseFloat((BU.Y2MinValue!==undefined)?BU.Y2MinValue:0);BT.Max=parseFloat((BU.Y2MaxValue!==undefined)?BU.Y2MaxValue:0);BT.CustomScale=(BU.Y2CustomScale!==undefined)?BU.Y2CustomScale:false;BT.CondenseLabel=(BU.Y2CondenseLabel!==undefined)?BU.Y2CondenseLabel:{};BT.Metrics.splice(0,BT.Metrics.length);BT.Valid=BS.Valid;if(BU.Y2Metrics){BT.Metrics=BT.Metrics.concat(BU.Y2Metrics);}BS.Metrics.splice(0,BS.Metrics.length);}if(!!(Bc&BP)){Bg.Min=parseFloat((BU.X2MinValue!==undefined)?BU.X2MinValue:0);Bg.Max=parseFloat((BU.X2MaxValue!==undefined)?BU.X2MaxValue:0);Bg.CustomScale=(BU.X2CustomScale!==undefined)?BU.X2CustomScale:false;Bg.CondenseLabel=(BU.X2CondenseLabel!==undefined)?BU.X2CondenseLabel:{};Bg.Metrics.splice(0,Bg.Metrics.length);Bg.Valid=BS.Valid;if(BU.X2Metrics){Bg.Metrics=Bj.Y1.Metrics.concat(BU.X2Metrics);}BS.Metrics.splice(0,BS.Metrics.length);}}},AdjustingAxisPaddingForDataLabel:function d(BX,BR,BV,BW){var BP=this.mChartContextPtr,BQ=BP.getValueAxisKeyFromLayout(BR,BW),BS;var BU=BP.getAxisTripleId(BQ);BS=BP.getUniformAxisInformation(BU.mObjectId);var BZ=BS.Metrics||[];var BY=BP.GetProperty(Az.DSSGraphMatrixUseCustomMinMax,BU),BT;if(BY){BT=BY;if(BT){return false;}}if(BR){return BB.call(this,BX,BZ,BV,BW);}return P.call(this,BX,BZ,BV,BW);},ShouldRotateDataLabel:function Ai(){var BQ=this.mChartContextPtr,BR=this.mDatasetPtr,BV=BR.showDatalabels(),BW=BQ.GetGraphMatrixContext();var BX=false;if(BV){BX=BQ.IsBarChart();if(!BX&&BQ.isCombinationChart()){var BP=BR.GetSeriesByShape().Bar,BS=BR.GetSeriesCount();BX=(BP.length===BS);if(!BX&&BP.length){BX=true;for(var BT=0;BT<BS;BT++){if(BP.indexOf(BT)===-1&&BR.showSeriesDatalabel(BT)){BX=false;break;}}}}}if(BX){this.mInitialized=false;var BU=BQ.getUniformAxisContext();BU.mIsAxisTitleAndLabelRequired=false;BQ.mIsEntireChart=false;}return{Rotation:BW.mIsNeedRotateDataLabel,Adjust:BX};},ShouldAdjustValueAxis:function M(){return false;},GetMaxElementRadius:function AY(BQ,Bc,BX){var BR=this.mChartContextPtr,BW=BR.GetGraphMatrixContext(),BP=BR.GetGraphType(),BU=BR.GetGraphMatrixGraphMajorType(),Bb=this.mDatasetPtr.GetGroupCount(),BY;BX=BX||false;switch(BU){case l._GRID:case l._SCATTER:case l._BUBBLE:return BW.GetMaxMarkerSize(Aq._SHAPES_IN_BUBBLESCATTER,false,Bb,BW.mHasSizeBy);case l._AREA:BY=((BP>=BE.DssGraphTypeVertical_Area_Absolute&&BP<=BE.DssGraphTypeVertical_Area_Percent));return BW.GetMaxElementSizeInAreaChart(BY,Bb);case l._LINE:BY=((BP>=BE.DssGraphTypeVertical_Line_Absolute&&BP<=BE.DssGraphTypeVertical_Line_Percent));if(BW.isCombinationChart()){var Ba=0,BZ=0,BV=0,BT=4,BS=this.mDatasetPtr.GetSeriesByShape();if(BS.Line&&BS.Line.length>0){Ba=BW.GetMaxElementSizeInLineChart(BY,Bb,false,BV);}if((BS.Circle&&BS.Circle.length>0)||(BS.Square&&BS.Square.length>0)){BZ=BW.GetMaxElementSizeInLineChart(BY,Bb,true,BT);}return Math.max(Ba,BZ);}return BW.GetMaxElementSizeInLineChart(BY,Bb);case l._PIE:if(this.mDatasetPtr){Bb*=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);}BY=this.mChartContextPtr.IsVertical();return BW.GetMaxMarkerSize(Aq._PIE,BY,Bb,BW.mHasSizeBy);case l._BAR:return 0;default:break;}return 0;},setGraphType:function AF(BP){this.mGraphType=this.mChartContextPtr.mGraphType=BP;},setThemeType:function h(BP){this.mChartContextPtr.mThemeType=BP;},getCondenseStatus:function c(){var BQ,BP=this.mUniformAxisPtr;if(BP){BQ=BP.mCondenseLabels;}return BQ;},enableCondense:function As(BQ,BP){var BR=this.mUniformAxisPtr;if(BR){BR.checkCondense(BQ,BP);}},isAxisLabelRotated:function AA(){var BQ=this.mUniformAxisPtr;if(BQ===null){return false;}var BP=BQ.getLabelRotation();return BP===I.FR_90;},liftedFromZero:function BJ(){if(this.mUniformAxisPtr){if(this.mMinTick!==undefined){return this.mMinTick===0&&this.mLowTrim>0;}}return false;},configureChart:function At(BP){var BR=this.mChartContextPtr;BR.mIsUniformAxisMode=true;BR.mIsGraphMatrix=true;if(BP.ThemeType){this.setThemeType(BP.ThemeType);}if(BP.Usage){BR.mImageUsage=BP.Usage;}if(BP.Timer!==undefined){BR.mUseTimer=BP.Timer||false;}if(BR.mImageUsage===AT.BANNER){return ;}var BQ;BQ=BP.isABL&&BP.Extremes&&((BP.Extremes.X2Metrics&&BP.Extremes.X2Metrics.length)||(BP.Extremes.Y2Metrics&&BP.Extremes.Y2Metrics.length));if(BP.GraphType){if(BQ){BP.GraphType=BR.mapGraphTypeToDualAxis(BP.GraphType);}if(BP.ShapeType){this.setGraphType(b.call(this,BP.GraphType,BP.ShapeType));}else{this.setGraphType(BP.GraphType);}}if(BP.GraphSize){BR.SetGraphSize(BP.GraphSize.W,BP.GraphSize.H);}if(BP.Extremes){this.EnableUniformAxis(BP.Extremes,false);}if(BP.OutputType){BR.mImageFormat=BP.OutputType;}s.call(this,BP);z.call(this,BP);},resetCanvas:function Ar(){var BP=this.mChartContextPtr;BP.resetCanvas();},updateUniformAxis:function r(BS){var BR=this.mUniformAxisPtr,BQ=BR.mDeviceDataArea.width,BP=BR.mDeviceDataArea.height;if(!BR){return q.call(this,BQ,BP,false,false,false,[]);}if(BS.Redraw){BR.Draw();}return q.call(this,BQ,BP,false,false,false,[]);},getUniformAxisBanding:function AC(){var BP=true,BQ=this.mUniformAxisPtr;if(BP&&BQ){return BQ.getBandings();}return[];},getUniformAxisGridLinePosition:function K(BQ){var BP=true,BR=this.mUniformAxisPtr;if(BP&&BR){return BR.getGridLinePosition(BQ);}return[];},echoCondenseStatus:function U(BS,BQ){var BR=this.mUniformAxisPtr;if(BR===null){return ;}var BP=BR.getCondenseStatus();if(BP!==undefined){BS[BQ]=BP;}},echoLayoutPaddings:function A2(BR,BP){var BQ=this.mUniformAxisPtr;if(BQ===null){return ;}BR[BP]=BR[BP]||{};BR[BP].HighOffset=this.mAxisLayoutHighPadding||0;BR[BP].LowOffset=this.mAxisLayoutLowPadding||0;},UpdateValueAxisPadding:function Ao(BQ){var BP=this.mChartContextPtr.GetGraphMatrixContext();BP.UpdateValueAxisPadding(BQ);},getUniformAxisTrims:function Ak(BQ){var BP=(BQ&&AH.call(this)===false)||(!BQ&&A5.call(this));if(BP){return Ay.call(this,BQ);}else{return AE.call(this);}},getUniformAxisFormat:function R(){var BP=this.mUniformAxisPtr;if(!!BP){if(BP.mCondenseLabels){return"Condensed";}if(BP.mNumberFormat){return BP.mNumberFormat.mCustomFormat;}}return undefined;},formatAsUniformAxisLabel:function p(BP){if(!this.mUniformAxisPtr){return undefined;}return this.mUniformAxisPtr.formatAsLabel(BP);},getAxisPadding:function e(BR){var BQ=0,BS=1;if(BR===BQ){return{L:0,H:(this.mUniformAxisPtr&&this.mUniformAxisPtr.dataLabelPadding||0)};}else{if(BR===BS){var BP=this.mAxisLayoutLowPadding||0;var BT=this.mAxisLayoutHighPadding||0;return{L:BP,H:BT};}else{return{L:0,H:0};}}},getStatistics:function X(BQ){var BY={},Be,Ba,Bf,BR,BV=0,Bc,Bb;Be=Aw.PlotId0;switch(BQ.Type){case BV:var BZ=0,BS=this.mChartContextPtr,BX=this.mDatasetPtr;var Bd=BX.GetSeriesCount(),BP=BX.GetGroupCount();BY.Total=Bd*BP;if(BS.IsScatterChart()||BS.IsBubbleChart()){Ba=this.mChartManagerPtr.GetGraphObjectManager(Be);if(Ba){Bf=Ba.mGraphObjectList;BR=Bf.length;for(Bc=0;Bc<BR;++Bc){if(Bf[Bc].mTripleId.mObjectId===BG.DssGraphRiser){BZ++;}}BY.Displayed=BZ;}}else{if(BS.IsBarChart()||BS.IsAreaChart()||BS.IsLineChart()||BS.IsGridChart()){if(BX.endSeries!==-1||BX.endGroup!==-1){var Bh=Math.max(BX.startSeries,0),BU=Math.max(BX.startGroup,0),BW=BX.endSeries===-1?Bd:BX.endSeries,BT=BX.endGroup===-1?BP:BX.endGroup;BY.Displayed=(BT-BU)*(BW-Bh);}else{Ba=this.mChartManagerPtr.GetGraphObjectManager(Be);if(Ba){var Bg=[Ba.AreaSeriesRenderer,Ba.mBarSeriesRendererPtr,Ba.mLineSeriesRendererPtr];for(Bb=0;Bb<Bg.length;++Bb){if(Bg[Bb]){Bf=Bg[Bb].mGraphObjectList;BR=Bf.length;for(Bc=0;Bc<BR;++Bc){if(Bf[Bc].mTripleId.mObjectId===BG.DssGraphRiser){BZ++;}}}}BY.Displayed=BZ;}}}}break;default:break;}return BY;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.FormatManager","mstrmojo.chart.DataSetImpl","mstrmojo.chart.ChartImpl","mstrmojo.chart.CEModuleMain");var B=mstrmojo.chart,D=B.common;mstrmojo.chart.MsiChart=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.MsiChart",mUniversalProperty:null,createFormatManager:function E(L,H){var M,J,G;if(H.map&&H.map.gpp){M=H.map.gpp;}else{M=new D.MapStructure();var K;if(L){G=L.gp.length;for(J=0;J<G;++J){K=L.gp[J];M.push([-3,K.gsid,K.goid,K.gaid],K.v);}}H.map=H.map||{};H.map.gpp=M;}var I=new B.FormatManager({GraphPropertyMap:M});return I;},createDataSet:function C(G){return new B.DataSetImpl(G);},createChartFromFormatManager:function A(J,I,G,K){B.gModuleMain.ResetGraphObjectMap();this.mUniversalProperty=this.mUniversalProperty||{};var H=new B.ChartImpl({mDatasetPtr:J,mFormatManager:I,GDFFile:G,UseTimer:K});H.mChartContextPtr.globalFormats=this.mUniversalProperty;return H;},setController:function F(G){B.gModuleMain.setController(G);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.Obj","mstrmojo.Box","mstrmojo.Label","mstrmojo.Table","mstrmojo.VisEnum","mstrmojo.VisAxisLabel","mstrmojo.VisUtility","mstrmojo.PageNavigationPanel","mstrmojo._CanSupportTransaction","mstrmojo._Formattable","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.EnumVisualizationTemplates");mstrmojo.requiresClsP("mstrmojo.gm","GMEnums","TrendLineModel","GMDataModel","VecDrawer","GMUtility","GMIdentities","GMAxisScale");mstrmojo.requiresClsP("mstrmojo.chart","DataSetImpl","ChartImpl","MsiChart");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var At=100,k=100;var g=mstrmojo,B6=g.VisUtility,Bc=g.css,Ap=g.hash,B0=g.array,A4=g.string,CA=g.chart,B7=CA.model,A3=B7.enums,x=mstrmojo.mstr.EnumDSSXMLObjectTypes,AU=mstrmojo.gm.EnumTrendLineModelType,BX=g.gm,A1=BX.GMAxisScale,BZ=BX.EnumTrendRefModelLabels,o=BX.GMUtility,Bh=BX.EnumSelectionOptionLevel,D=g.num,B8=BX.EnumABLDirection,G=BX.EnumContextMenu,BY=g.VisEnum.ControlType,CB=g.vi.viz.EnumDSSDropZones,A8=g.vi.viz.EnumVisualizationTemplates,h=g.vi.viz.EnumAggregatedVisTemplates,BJ=BX.EnumColorByType,M=BX.EnumDrawingAPI,Ag=BX.EnumXAxisLabelStatus,CC=BX.EnumABLDirection,C=BX.EnumAxis,BU=A3.EnumDSSGraphType,AQ=BX.EnumFitTo,Bn=BX.EnumAxisType,B4=BX.EnumGraphType,BM=BX.EnumSizeByType,BF=BX.EnumAxis,AZ=BX.EnumTheme,AI=BX.EnumMetricsPosition,n=CA.common.Utility,B2=BX.EnumShape,BN=BX.EnumSubtype,Aj=BX.EnumShape,Bo=BX.EnumAxisScale,Al=BX.EnumMaxSizeType,Bt=BX.EnumMinSizeType,d=BX.EnumIdentityType,AY=BX.WidgetPropertyTag,BL=BX.FormatingPropertyTag,AX=BX.EnumRefLineModelType,CE=BX.StackExetrmeId,a=BX.DualAxisSubAxisBit,A5=false,Bv="00000000000000000000000000000000",AO=0,Ao="_tmsp",AW=0,Av=-20,y=0,I=5,s=5,U=2,CL=0,BB=1,z=3,f=0,Ba=16,A0=32,Bu=1,BA=2,Bi=4,Q=8,A7=["MAX","MIN","AVG","MED","FIRST","LAST","CONST"],BR=[mstrmojo.desc(5417,"Max"),mstrmojo.desc(5416,"Min"),mstrmojo.desc(12151,"Avg"),mstrmojo.desc(12152,"Med"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(12153,"Const")],F={isZeroPadding:true,X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},J={x:{first:"top",second:"bottom"},y:{first:"right",second:"left"}},q=[16756758,2701311,2275844,956159,14580142,2477516,14732825,11119017,15715763,9873407,9101208,8437759,15516634,9494752,15392673,14079702],Bp=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807];mstrmojo.requiresDescs(2058,2460,12091,12092);var Bm=[2,9,16,23,30,37];var Ab=[7,14,21,28,35,42];var Ai=o.filterInValidMetricIndex,b=o.getOptionObjArr;function Ad(CO){var CP=true,AS;for(AS in CO){if(CO.hasOwnProperty(AS)){CP=false;break;}}return CP;}function AD(CO,CS){var CT=false,AS=["XAxis","YAxis"],CQ=AS.length,CP,CR;for(CR=0;CR<CQ;CR++){CP=CO&&CO[AS[CR]];if(CP){CT=!Ad(CP);if(CT){break;}}}return CT||CS.isPie;}function l(){this.rwHdrSmrs=[];this.colHdrSmrs=[];delete this.mulAttsOnAxisForABL;delete this.ttlDispTp;delete this.chartInfo;delete this.defaultsForShape;delete this.rowHeaderCnt;delete this.colHeaderCnt;delete this.model;delete this.isPie;this.splitPlottingMetrics=undefined;this.metricInfos={};this.sharedPool={};this.metricSelectionInfo={};this.attributeSelectionInfo={};this.axisScaleCache=null;}function CN(AS,CU){var CP=this.getChartInfo();if(!CP.isABL){this.removeGroupInfo();}var CT=(CU===1||CU===8)||(CU===15||CU===22)||(CU===29||CU===36)||(CU===91||CU===92);if(CT){var CR;var CV=AS.dz,CQ=CV.XAxis,CO=CV.YAxis,CS=CV.BreakBy;if(CP.dirc===BX.EnumABLDirection.VERTICAL){CR=this.getMetricsOnYAxis();}else{CR=this.getMetricsOnXAxis();}if(CR.length>1){if(CP.dirc===BX.EnumABLDirection.VERTICAL){if((CQ.MetricNames!==undefined&&(!CQ.TemplateUnit||CQ.TemplateUnit.length===0))||(CS.MetricNames!==undefined&&(!CQ.TemplateUnit||CQ.TemplateUnit.length===0))){this.clusteredBarSpecialCase=true;}}else{if((CO.MetricNames!==undefined&&(!CO.TemplateUnit||CO.TemplateUnit.length===0))||(CS.MetricNames!==undefined&&(!CO.TemplateUnit||CO.TemplateUnit.length===0))){this.clusteredBarSpecialCase=true;}}}}this.isGridPie=CP.isGrid&&CP.isPie;this.onlyMetricNamesOnAxisForGridPie=Bf.call(this);this.isMetricNamesOnXAxis=BK.call(this,"XAxis");this.isMetricNamesOnYAxis=BK.call(this,"YAxis");this.isMetricNamesOnRows=BK.call(this,"Rows");this.isMetricNamesOnColumns=BK.call(this,"Columns");if(CP.isABL){if(AJ.call(this,"XAxis","n").length>1||AJ.call(this,"YAxis","n").length>1){this.mulAttsOnAxisForABL=true;}}}function BI(AS){var CS=B4;var CW=this.view,CZ,CR;var Ca=CW.getWidgetPropertyValue(AY.SHAPE);var CT=CW.getWidgetPropertyValue(AY.SUB_TYPE);var CU=this.getChartType();var CQ=[B2.CIRCLE,B2.SQUARE,B2.PIE,B2.RING,B2.TICK];var CO=CQ.concat([B2.BAR]);var Cb=function(Cc){var Cj=false,Cd=false;if(CU!==CS.BAR&&CU!==CS.LINE&&CU!==CS.AREA){return{enableComb:false,hasBarShape:false};}var Cg=1,Cf,Ch=[],Ce=[],Ck=[];var Cl=Cc.dz,Cm=Cl.XAxis.TemplateMetric&&Cl.XAxis.TemplateMetric.concat()||[];Cm=Cm.concat(Cl.YAxis.TemplateMetric&&Cl.YAxis.TemplateMetric.concat()||[]);Cm.forEach(function(Cn){Ch.push(Cn.id);Ck.push(Cn.ax);});var Ci=Cl.visProp.fmt.metricShapes||"{}";Cm=JSON.parse(Ci.replace(/'/g,'"'));Ch.forEach(function(Cn){if(Cm.hasOwnProperty(Cn)){Ce.push(Cm[Cn]);}});Cd=Ce.length&&Ce[0]===Cg;for(Cf=1;Cf<Ce.length;Cf++){Cj=Cj||Ce[Cf]!==Ce[Cf-1];Cd=Cd||Ce[Cf]===Cg;if(Cj&&Cd){break;}}return{enableComb:Cj,hasBarShape:Cd};};var CY=Cb(AS);if(CT!==undefined){CZ=CT;}if(((CU===CS.BUBBLE||CU===CS.SCATTER)&&CQ.indexOf(Ca)===-1)||((CU===CS.GRID)&&(CO.indexOf(Ca)===-1))){Ca=B2.CIRCLE;}var CP=[4,24,201,202,200];var CX=CQ.indexOf(Ca);if(CX>=0&&CX<CQ.length){this.ceMarkerShape=CP[CX];}var CV=BC.call(this,CU,CZ,this.chartDirection,Ca,CY.enableComb,CY.hasBarShape);this.chartSubType=CV.subType;CR=CV.ceChartType;this.ceChartType=CR;this.markerShape=CV.shape;this.isPercentage=As(CR,Ab);this.isStacked=As(CR,Bm.concat(Ab));}function Bq(CP){var CT=CP.dm.rct;var CO=CP.dm.cct;var CQ=CP.ptt.row;var CS=CP.ptt.col;var CR=this,AS=CP.dz;if(CQ.length===0){CQ.push(0);}if(CS.length===0){CS.push(0);}if(CT<0){CT=CP.dm.rct=CP.gvs.items.length;}if(CO<0){CO=CP.dm.cct=CP.gvs.items[0].items.length;}CR.rowHeaderCnt=Bz(AS.Rows);CR.colHeaderCnt=Bz(AS.Columns);}function AB(CO,AS){if(this.isBubbleOrScatter()){return this.getAxisLayout4CE(CO,AS);}else{return this.axisLayout;}}function AK(AS){var CO=document.createElement("div");CO.innerHTML=AS;return CO.innerText;}function CI(CU,CO){var CW=CU.es,CR=CU.fs,CT=CU.otp,AS=CR&&CR.length,CS=CW.length/AS,CV,CP=function(CX){CX=o.restoreSpecialChars(CX);CX=A4.decodeHtmlString(CX).trim();return CX;};CU.n=CP(CU.n);if(CW){B0.forEach(CW,function(CX){CX.n=CP(CX.n);});}if(CT===12&&AS){for(var CQ=0;CQ<CW.length;CQ++){switch(CO){case"row":CV=CQ%AS;break;case"col":CV=Math.floor(CQ/CS);break;}switch(CR[CV].bftp){case 5:break;case 4:CW[CQ].bftp=4;break;case 7:CW[CQ].bftp=7;break;default:}}}}function W(CR,CT){var CO=this.model,AS,CP,CQ,CS;AS=this.mapFromChartToLDSIndex(CR,CT);CP=CO.getLocalDataSet(AS.r,AS.c);CQ=CP.generateDataProvider();CS=CQ[AS.dpIdx];return CS;}function CF(CO,CP){this.layoutPaddingEchos=this.layoutPaddingEchos||{X1:[],X2:[],Y1:[],Y2:[]};var AS=CO?"X2":"Y2";if(CP){AS=CO?"X1":"Y1";}return this.layoutPaddingEchos[AS];}function BE(CO,CP){this.condenseEchos=this.condenseEchos||{X1:[],X2:[],Y1:[],Y2:[]};var AS=CO?"X2":"Y2";if(CP){AS=CO?"X1":"Y1";}return this.condenseEchos[AS];}function R(){return true;}function CJ(CP){if(this.enableCombiChart){return false;}var AS=CP.shape;if(AS===Aj.BAR||CP.tp===B4.GRID){return true;}if(AS===Aj.TICK){var CO=this.getChartInfo();return CO.isABL;}return false;}function CH(CT,CP,CS){var CR,AS=CT.shape;if(this.enableCombiChart){CR=W.call(this,CP,CS);var CQ=CR.getSeriesByShape();if(CQ.Circle.length||CQ.Square.length){return false;}if(CQ.Line.length&&this.hasSizeBy()){return false;}var CO=CR.GetDiscreteSeries();if(CO.length){if(CQ.Line.length){if(n.HasArrayIntersection(CO,CQ.Line)){return false;}}if(CQ.Area.length){if(n.HasArrayIntersection(CO,CQ.Area)){return false;}}}return true;}if(CJ.call(this,CT)){return true;}if(AS===Aj.AREA){CR=W.call(this,CP,CS);return CR.getGroupCount()>=2&&CR.GetDiscreteSeries().length===0;}if(AS===Aj.LINE){CR=W.call(this,CP,CS);return !this.hasSizeBy()&&CR.getGroupCount()>=2&&CR.GetDiscreteSeries().length===0;}return false;}function A9(AS,CT,CP,CS){var CV=this.view.getDefaultProperties(),CU=AS[CP]||{},CO=this.getChartInfo(),CQ=(CT.fmt||CT.fms),CR;if(CQ.length===0){CQ={};}else{if(typeof CQ==="string"){CQ=JSON.parse(o.restoreSpecialChars(CQ));}}CU.modix=CS;CU[AY.TREND_TYPE]=CT.tp;CU[AY.TREND_LEVEL]=CT.lv;CU[AY.TREND_ENABLED]=CT.enabl===1;CU.fmt=CQ;[AY.TREND_REF_LINE_THICKNESS,AY.TREND_REF_LINE_COLOR,AY.TREND_REF_LINE_STYLE].forEach(function(CW){CR=CQ[CW];if(CR===undefined){CU[CW]=CV[CW];}else{CU[CW]=CR;}});if(CO.isABL){CU[AY.TREND_INCLUDE_BREAK_BY]=(CT.incl===1);}if(CT.cst.vv!==""&&!isNaN(CT.cst.vv)){CU[AY.TREND_POLY_DEGREE]=parseFloat(CT.cst.vv);}CU.existing=true;CT.clientDef=CU;AS[CP]=CU;}function K(CO,CS,AS){var CP,CR,CQ=this.view;[BL.REF_LABELS_FONT_FAMILY,BL.REF_LABELS_FONT_SIZE,BL.REF_LABELS_FONT_STYLE,BL.REF_LABELS_FONT_COLOR].forEach(function(CT){CR=CQ.getWidgetPropertyValue(CT);CP=CO[CT];if((typeof CR==="object")&&(CP===undefined||typeof CP!=="object"||(CR[CT+Ao]>CP[CT+Ao]))){AS[CT]=CR[CT];CO[CT]=CR;}else{if(CP===undefined){AS[CT]=CS[CT];}else{if(typeof CP!=="object"){AS[CT]=CP;}else{AS[CT]=CP[CT];}}}});}function H(CR,CV,AS,CS){var CO=this.getChartInfo();if(CO.isBubbleOrScatter){if(CV.tp===AX.FIRST||CV.tp===AX.LAST){return ;}}var CW=this.view.getDefaultProperties(),CU=CR[AS]||{},CT={},CP=(CV.fmt||CV.fms),CQ;CT.modix=CS;CT[AY.REF_TYPE]=CV.tp;CT[AY.REF_LEVEL]=CV.lv;if(CP.length===0){CP={};}else{if(typeof CP==="string"){CP=JSON.parse(o.restoreSpecialChars(CP));}}CT.fmt=CP;[AY.TREND_REF_LINE_THICKNESS,AY.TREND_REF_LINE_COLOR,AY.TREND_REF_LINE_STYLE].forEach(function(CX){CQ=CP[CX];if(CQ===undefined){CT[CX]=CW[CX];}else{CT[CX]=CQ;}});K.call(this,CP,CW,CT);CT[AY.REF_ENABLED]=CV.enabl===1;CT[AY.REF_SHOW_LABEL]=(CV.la!==BZ.DssModelLabelsNone&&CV.la!==BZ.DssModelLabelsReserved);CT[AY.REF_LABEL_TYPE]=CV.la;CT[AY.REF_CONST_VALUE]=CV.cst.vv;if(CV.tp===AX.CONST){CT[AY.REF_LINE_NAME]=CV.lin;}CT.existing=true;if(CU[CV.tp]===undefined){CU[CV.tp]=[];}CU[CV.tp].push(CT);CV.clientDef=CT;CR[AS]=CU;}function BS(AS,CO){if(!AS&&!CO){return true;}if(AS&&CO){return(AS.x===CO.x&&AS.y===CO.y&&AS.width===CO.width&&AS.height===CO.height&&AS.flag===CO.flag);}return false;}function B3(CS){var CR=[],CQ=[],AS=CS.length,CP,CO;for(CP=0;CP<AS;CP++){CO=CS[CP];if(CO.actionId===27){CR.push(CO);}else{CQ.push(CO);}}CR=CR.concat(CQ.reverse());return CR;}function Ar(CU){var CV=CU.cellHandle,CY=CU.mid,Ca=this.getMetricSortInfo(),CQ=this.getChartInfo();if(CV&&Ca.metricId===CY){var Cb=this.xtabModel,Cc=this.getRowHeadersByCell(CV),CR=Cc.headers,CO=Ca.elements||[],CT=CO.length,CS;if(CT===CR.length){for(CS=0;CS<CT;CS++){if(CQ.isABL&&this.isStacked){var CX=CR[CS].id,AS=CO[CS],CZ,CW,CP=CX[2];if(CP!==":"){CP=";";}CZ=CX.split(CP)[1];CW=AS.split(CP)[1];if(this.isAttrInZone(CZ,"ColorBy")||this.isAttrInZone(CW,"BreakBy")){if(CZ!==CW){return false;}}else{if(Cb.getNormalizedFormElementId(CO[CS])!==Cb.getNormalizedFormElementId(CR[CS].id)){return false;}}}else{if(Cb.getNormalizedFormElementId(CO[CS])!==Cb.getNormalizedFormElementId(CR[CS].id)){return false;}}}this.updateSortIndex(CV);this.showMetricSortIcon=true;return true;}}return false;}function AG(CT,CS,CO,CU,CQ,CV,CP,AS,CR){return{sortIndex:CT,sortType:CS,objType:CO,objID:CU,ascending:CQ,axisIndex:CV,subtotalsPosition:CP,eIds:AS,formId:CR,actionId:26};}function Y(AS){return(this.getColTitleInfo(true).items)[AS];}function c(AS){return(this.getRowTitleInfo(true).items)[AS];}function r(AS,Ca){var Cb=this.firstRes,CY=Cb.gsi,CS=Ca.id,CV=0,CO=1,CT=2,CU,CW=CY.sorts[AS-1],CR,CZ,CQ,CP,CX;for(CU=0;CU<CW.length;CU++){CR=CW[CU];CZ=CR.key.split("!");CQ=CZ[CV];CP=CZ[CO];CX=CZ[CT];if(CP===CS){if(CR.isAsc===true){return CL;}return BB;}}return z;}function L(CR){var CQ=this.chartType,AS=this.metricsType,CP=this.dz.SizeBy.TemplateMetric,CO=(CP&&CP.length)||0;if(CR===undefined){CR=this.getMetricsOnYAxis();}return((CQ===B4.BUBBLE)||(CQ===B4.SCATTER))&&(CR.length>1&&CO>1)&&(AS===AI.MetricsByColumn||AS===AI.MetricsByRow);}function Af(){return this.getSizeByMetrics().length;}function AC(CS,CT,CR){if(this.fakeGroupInfo===false){if(CT===false){return[];}return CS;}var CO=CS.length,CQ,AS=Math.ceil(CO/2),CP=[];for(CQ=0;CQ<CO;CQ++){if(CT){if(CQ%2===0){CP.push(CS[CQ]);}}else{if(CQ%2===1){CP.push(CS[CQ]);}}}if(CR&&CP.length<AS){CP.push(Av);}return CP;}function BD(AS,CP){var CO=[];B0.forEach(AS,function(CQ){CO.push(CP[CQ]);});return CO;}function AE(CQ,CP){var CO=this.model,AS=CO.getMetricNumberFormat(CP);return D.formatByMask(AS,CQ);}function O(CP,CQ){var CO=function CO(CS){return CS.did===CQ;},AS=CP.docModel,CR=AS.getDatasetUnits(["att"],CO);if(CR&&CR[0]){return CR[0];}return undefined;}function Be(AS,CR){var CQ={},CP,CO;CP=Math.max(AS.LowOffset,CR.LowOffset);CO=Math.max(AS.HighOffset,CR.HighOffset);CQ.LowOffset=CP;CQ.HighOffset=CO;return CQ;}function Bx(CP,CO){if(CP.isZeroPadding&&CO.isZeroPadding){return CP;}var AS={};AS.X1=Be(CP.X1,CO.X1);AS.X2=Be(CP.X2,CO.X2);AS.Y1=Be(CP.Y1,CO.Y1);AS.Y2=Be(CP.Y2,CO.Y2);return AS;}function CG(AS,CO){var CP={};CP.Y1=AS.Y1;CP.Y2=AS.Y2;CP.X1=CO.X1;CP.X2=CO.X2;return CP;}function AF(CO,CQ){var AS=this.condenseEchos,CP={};if(AS===undefined){return{X1:false,X2:false,Y1:false,Y2:false};}CP.X1=AS.X1[CQ]||false;CP.X2=AS.X2[CQ]||false;CP.Y1=AS.Y1[CO]||false;CP.Y2=AS.Y2[CO]||false;return CP;}function B1(CO,CR,CP,AS){CO=CO||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};CR=CR||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};CP=CP||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};AS=AS||{PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};var CQ={};CQ.xPrimaryHighTrim=CO.PrimaryHighTrim||0;CQ.xPrimaryLowTrim=CO.PrimaryLowTrim||0;CQ.yPrimaryHighTrim=CR.PrimaryHighTrim||0;CQ.yPrimaryLowTrim=CR.PrimaryLowTrim||0;CQ.xSecondaryHighTrim=CP.SecondaryHighTrim||0;CQ.xSecondaryLowTrim=CP.SecondaryLowTrim||0;CQ.ySecondaryHighTrim=AS.SecondaryHighTrim||0;CQ.ySecondaryLowTrim=AS.SecondaryLowTrim||0;return CQ;}function P(AS,CO){AS=AS||{LowTrim:0,HighTrim:0};CO=CO||{LowTrim:0,HighTrim:0};return{xCaHighTrim:AS.HighTrim,yCaHighTrim:CO.HighTrim,xCaLowTrim:AS.LowTrim,yCaLowTrim:AS.LowTrim};}function V(CS,CO){var CP={},CU=this.getChartInfo();CP.TOP=CS.TOP;CP.BOTTOM=CS.BOTTOM;CP.LEFT=CO.LEFT;CP.RIGHT=CO.RIGHT;var AS=false,CR,CQ=CU.isABL&&CU.dirc===B8.VERTICAL,CT=true;if(CT){if(CQ){AS=true;CR=CS;}else{AS=true;CR=CO;}}return CP;}function As(CP,CO){var AS=CO.length,CQ;for(CQ=0;CQ<AS;CQ++){if(CP===CO[CQ]){return true;}}return false;}function Aa(CO,AS){var CP=AS.col,CZ,CQ,CT,CR,CX;if(this.view&&this.view.excludeData){var CY=this.firstRes,CU=CY.gsi,CW=CU&&CU.mx,CV=false,CS;B0.forEach(CW,function(Ca,Cb){if(Ca.did===CO){CV=true;CS=Cb;}});if(CV){return CS;}}if(CP){CZ=CP.length;CQ=CP[CZ-1];if(CQ&&CQ.otp===-1&&CQ.es){CX=CQ.es;CT=CX.length;for(CR=0;CR<CT;CR++){if(CX[CR].oid===CO){return CR;}}}}return Av;}function Ak(CQ){var CP,CO,AS,CS,CT,CR=this.metricsOnDropZone[CQ];if(!CR){CP=this.gts;CO=this.dz[CQ];AS=CO.TemplateMetric;CR=[];if(AS&&AS.length>0){CT=AS.length;for(CS=0;CS<CT;CS++){CR.push(Aa.call(this,AS[CS].id,CP));}}this.metricsOnDropZone[CQ]=CR;}return CR;}function Am(CO,AS){if(CO.index<AS.index){return -1;}if(CO.index>AS.index){return 1;}return 0;}function A2(CS){var CQ,AS,CT,CR,CO,CP=[];CR=this.colorByInfo;if(CR.tp===BJ.ATT||CR.tp===BJ.ATT_METRICS){CT=CR.atts;AS=CT.length;for(CQ=0;CQ<AS;CQ++){CO=CT[CQ];if(CO.axis===CS){CP.push({index:CO.uidx,order:CQ});}}return CP.sort(Am);}return[];}function Ax(CQ,CS,CO,CR){var CP,AS=CQ.length;for(CP=0;CP<AS;CP++){if(CS===CQ[CP]&&(CR===undefined||CR===CO[CP])){return CP;}}return -1;}function Ay(CO,CV,CS,CY,CX){var CR,CP,CZ,CT=CS.length,AS,CQ,CW;if(CT>0&&(CO===undefined||CV===undefined)){B6.visPrint("the extreme is likely missing");return{min:0,max:99999999};}if(CT===0){return undefined;}var CU=false;for(CR=0;CR<CT;CR++){CQ=CS[CR];if(CQ===undefined||CQ===Av){return undefined;}CW=Ax(CV,CQ,CY,CX);if(CW>=0){AS=CO[CW];if(!CU&&AS.length>=1){CP=o.parseNumeric(AS[0]);CZ=o.parseNumeric(AS[1]);CU=true;}else{if(CP>o.parseNumeric(AS[0])){CP=o.parseNumeric(AS[0]);}if(CZ<o.parseNumeric(AS[1])){CZ=o.parseNumeric(AS[1]);}}}else{B6.visPrint("the metric "+CQ+" Not Found in extremes from back end");return{min:0,max:99999999};}}return{min:CP,max:CZ};}function p(CT,CV,AS,CS){var CQ=this.extrs,CR,CO,CU,CP,CY,CX;if(CT!==Bo.GLOBAL){CP=this.mapFromChartToLDSIndex(AS,CS);CY=CP.r;CX=CP.c;}if(CV==="XAxis"||CV==="X2Axis"){CV="x";}else{if(CV==="YAxis"||CV==="Y2Axis"){CV="y";}else{if(CV==="SizeBy"){CV="z";}}}if(CT===Bo.GLOBAL){if(CQ.g){CO=CQ.g.ex;CR=CQ.g.mids;CU=CQ.g.etp;}}else{if(CT===Bo.PERROWCOL){if(CV!=="z"){var CW=(CV==="y"?CQ.r:CQ.c);if(CW){CR=CW.mids;CO=CW.ex[(CV==="y"?CY:CX)];CU=CW.etp;}}else{if(CQ.all){CR=CQ.all.mids;CO=CQ.all.ex[CY][CX];CU=CQ.all.etp;}}}else{if(CT===Bo.PERCELL){if(CQ.all){CR=CQ.all.mids;CO=CQ.all.ex[CY][CX];CU=CQ.all.etp;}}}}return{mids:CR,exObj:CO,etp:CU};}function e(CO,AS){if(this.isHistogram){return CO;}var CR=this.chartSubType,CP=false,CQ=BX.EnumShape.BAR;AS=AS||[];B0.forEach(AS,function(CS){if(CS===CQ){CP=true;}});if(CO&&(CO.min!==undefined&&CO.max!==undefined)){if(CO.min>0){if(CP){CO.min=0;}if(CR===BN.PERCENT){CO.max=1;CO.min=0;}}if(CO.max<0){if(CP){CO.max=0;}if(CR===BN.PERCENT){CO.min=-1;CO.max=0;}}}return CO;}function Aq(CO,CQ,CP){var AS;if(CP==="YAxis"){AS=Ai(this.getMetricsOnAxisOfChart(CO,CQ,"y",true,true));}else{if(CP==="Y2Axis"){AS=Ai(this.getMetricsOnAxisOfChart(CO,CQ,"y",false,true));}else{if(CP==="XAxis"){AS=Ai(this.getMetricsOnAxisOfChart(CO,CQ,"x",true,true));}else{if(CP==="X2Axis"){AS=Ai(this.getMetricsOnAxisOfChart(CO,CQ,"x",false,true));}else{B6.visPrint("to support");}}}}return AS;}function AA(CQ,CU,CS,CT){var AS=CS[0];if(AS!=="X"&&AS!=="Y"){return null;}this.axisScaleCache=this.axisScaleCache||{};this.axisScaleCache[CT]=this.axisScaleCache[CT]||{};this.axisScaleCache[CT][CS]=this.axisScaleCache[CT][CS]||{};var CO=CT,CR=null,CP=this.axisScaleCache[CT][CS];CP=CP||{};if(CS[0]==="X"){if(CO===Bo.GLOBAL||CO===Bo.PERROWCOL){CR=CP[CU];}}else{if(CS[0]==="Y"){if(CO===Bo.GLOBAL||CO===Bo.PERROWCOL){CR=CP[CQ];}}else{}}if(!!CR){return CR;}return null;}function AH(CR,CU,CS,CP,CT){var AS=CS[0];if(AS!=="X"&&AS!=="Y"){return ;}this.axisScaleCache=this.axisScaleCache||{};this.axisScaleCache[CT]=this.axisScaleCache[CT]||{};this.axisScaleCache[CT][CS]=this.axisScaleCache[CT][CS]||{};var CO=CT,CQ=this.axisScaleCache[CT][CS];CQ=CQ||{};if(CS[0]==="X"){if(CO===Bo.GLOBAL||CO===Bo.PERROWCOL){CQ[CU]=CP;}}else{if(CS[0]==="Y"){if(CO===Bo.GLOBAL||CO===Bo.PERROWCOL){CQ[CR]=CP;}}else{}}}function AR(CT,Ca,CQ,CP){var CS=this.getChartInfo(),Cc=this,CV=CS.dirc,CR=BX.EnumABLDirection,Cf,Cb,Ce,CU,CY,CW,CX,AS,Cd,CO=[],CZ;if(CP===undefined){CP=this.axisScale;}CU=AA.call(this,CT,Ca,CQ,CP);if(!!CU){return CU;}Cd=Aq.call(Cc,CT,Ca,CQ);B0.forEach(Cd,function(Cg){CO.push(Cc.getOnTheFlyShapeForMetric(Cg));});CZ=p.call(this,CP,CV===CR.VERTICAL?"y":"x",CT,Ca);Cf=CZ.exObj;Cb=CZ.mids;Ce=CZ.etp;CU={};if(CV===CR.VERTICAL){if(this.isStacked&&!this.splitPlottingMetrics){CW=(CQ==="YAxis")&&Ay(Cf,Cb,[CE.PRIMARY_Y_AXIS],Ce,f);AS=(CQ==="Y2Axis")&&Ay(Cf,Cb,[CE.SECONDARY_Y_AXIS],Ce,f);}else{CW=(CQ==="YAxis")&&Ay(Cf,Cb,Cd,Ce,f);AS=(CQ==="Y2Axis")&&Ay(Cf,Cb,Cd,Ce,f);}if(CW){CW=e.call(Cc,CW,CO);CU.min=CU.YMin=CW.min;CU.max=CU.YMax=CW.max;}if(AS){AS=e.call(Cc,AS,CO);CU.min=CU.Y2Min=AS.min;CU.max=CU.Y2Max=AS.max;}}else{if(this.isStacked&&!this.splitPlottingMetrics){CY=(CQ==="XAxis")&&Ay(Cf,Cb,[CE.PRIMARY_X_AXIS],Ce,f);CX=(CQ==="X2Axis")&&Ay(Cf,Cb,[CE.SECONDARY_X_AXIS],Ce,f);}else{CY=(CQ==="XAxis")&&Ay(Cf,Cb,Cd,Ce,f);CX=(CQ==="X2Axis")&&Ay(Cf,Cb,Cd,Ce,f);}if(CY){CY=e.call(Cc,CY,CO);CU.min=CU.XMin=CY.min;CU.max=CU.XMax=CY.max;}if(CX){CX=e.call(Cc,CX,CO);CU.min=CU.X2Min=CX.min;CU.max=CU.X2Max=CX.max;}}AH.call(this,CT,Ca,CQ,CU,CP);return CU;}function Ae(CP,CY,CS,CZ){var CT,CR,CQ,CV,CU,Ca,CX,CW,CO,Cb,AS;if(CZ===undefined){CZ=this.axisScale;}CT=AA.call(this,CP,CY,CS,CZ);if(!!CT){return CT;}CV=p.call(this,CZ,"x",CP,CY);CX=CV.exObj;CO=CV.mids;CR=CV.etp;CU=p.call(this,CZ,"y",CP,CY);CW=CU.exObj;Cb=CU.mids;CQ=CU.etp;Ca=Aq.call(this,CP,CY,CS);if(CS==="YAxis"){AS=Ay(CW,Cb,Ca,CQ,f);CT={YMin:AS&&AS.min,YMax:AS&&AS.max};}else{if(CS==="Y2Axis"){AS=Ay(CW,Cb,Ca,CQ,f);CT={Y2Min:AS&&AS.min,Y2Max:AS&&AS.max};}else{if(CS==="XAxis"){AS=Ay(CX,CO,Ca,CR,f);CT={XMin:AS&&AS.min,XMax:AS&&AS.max};}else{if(CS==="X2Axis"){AS=Ay(CX,CO,Ca,CR,f);CT={X2Min:AS&&AS.min,X2Max:AS&&AS.max};}else{B6.visPrint("to support");}}}}CT.min=AS&&AS.min;CT.max=AS&&AS.max;AH.call(this,CP,CY,CS,CT,CZ);return CT;}function Az(CQ,CT){var CO,CS,CR,AS,CP,CU=Aa.call(this,CQ,this.gts);CO=p.call(this,Bo.GLOBAL);CS=CO.exObj;CR=CO.mids;AS=CO.etp;if(CT===true){CP=Ay(CS,CR,[CU],AS,Ba);}else{CP=Ay(CS,CR,[CU],AS,f);}return CP;}function Bl(CR,CU){var CT=this.getChartInfo(),AS={},CQ=this,CS=["YAxis","Y2Axis","XAxis","X2Axis"],CO,CP;CP=CT.isABL?AR:Ae;CS.forEach(function(CV){CO=CP.call(CQ,CR,CU,CV);Ap.copy(CO,AS);});return AS;}function Bj(CO){var AS=["AllMetrics","XAxis","X2Axis","YAxis","Y2Axis","SizeBy"];return(AS.indexOf(CO)<0);}function A6(CS,CQ,CP){var CV,CR,Cd=0,CX=1,Cc=2,CT=3,CU,CZ,CY=this.axisScale,CW,AS,Cb,Ca;Ca=this.view.getWidgetPropertyValue(AY.AXIS_SCALE_DATA);if(CS!==undefined){CW=(this.model.getMetricIDsFromIndex([CS]))[0];}if(CY!==Bo.CUSTOM||!Ca){return CY;}CZ=parseInt(Ca[0][CX],10);if(CZ!==Bo.DIFFERENT){if(CP!==undefined){CP.min=parseFloat(Ca[0][Cc]);CP.max=parseFloat(Ca[0][CT]);}return CZ;}for(CV=1,CR=Ca.length;CV<CR;CV++){CU=Ca[CV];var CO=CU[Cd];if(CQ!==undefined&&CO===CQ){AS=parseInt(CU[CX],10);if(CP!==undefined){CP.min=parseFloat(CU[Cc]);CP.max=parseFloat(CU[CT]);}break;}if(CW!==undefined&&CW===CO){Cb=parseInt(CU[CX],10);if(CP!==undefined){CP.min=parseFloat(CU[Cc]);CP.max=parseFloat(CU[CT]);}}}return AS!==undefined?AS:Cb;}function AV(CT){var CO=Bj(CT),CP,CS=[],AS,CR=0,CU=0,CQ=this;if(CO){AS=this.getMetricIndexFromID(CT);return[this.getOnTheFlyShapeForMetric(AS)];}CP=Aq.call(this,CR,CU,CT);B0.forEach(CP,function(CV){CS.push(CQ.getOnTheFlyShapeForMetric(CV));});return CS;}function B9(CO,CX,CY){var CZ=this,CP=this.getChartInfo(),Cc=p.call(this,Bo.GLOBAL),CT,CW,Ca,CV,CU,Cb=Bj(CO);var AS;var CR={};if(Cb){var CS=Aa.call(this,CO,this.gts);AS=A6.call(this,CS,undefined,CR);}else{AS=A6.call(this,undefined,CO,CR);}if(!CY){if(AS===Bo.CUSTOM){return{min:CR.min,max:CR.max,scaleType:AS};}}if(!Cb){if(CO==="SizeBy"){CT=Cc.exObj;CW=Cc.mids;Ca=Cc.etp;if(CP.tp===B4.BUBBLE||CP.tp===B4.SCATTER){CU=Ai(this.getMetricsOnAxisOfChart(0,0,"z"));}else{CU=this.getSizeByMetrics();}CV=Ay(CT,CW,CU,Ca,Ba);}else{var CQ=CP.isABL?AR:Ae;CV=CQ.call(this,0,0,CO,Bo.GLOBAL);}}else{CV=Az.call(this,CO,CX);}if(CV){if(CP.isABL&&AS!==Bo.CUSTOM){CV=e.call(CZ,CV,AV.call(CZ,CO));}return{min:CV.min,max:CV.max,scaleType:AS};}B6.visPrint("getGlobalExtremeForAxisOrMetric getting faked extreme");return{min:0,max:99999999,scaleType:AS};}function By(Cs,Ct,C0,Cl){var C3=this.getChartInfo(),CZ=this,Co=0,CY=1,Ce=2,Cz=3,CS=4,Cn=5,Ci=7,C4=8,Cb=Cl.length,Cw,Cp,CU,Cu,Cv=false,C1,Cg,CT,Cm,Ca,Cr,CW,Cy,CV,AS,Cq,CO,Ch,C2=["Dumy","x","y","z","x2","y2"],Cf=["Dumy","XAxis","YAxis","SizeBy","X2Axis","Y2Axis"];Ch=C2[Cf.indexOf(Cs)];var CR=true,Cc;if(Ch==="x2"){Ch="x";CR=false;}if(Ch==="y2"){Ch="y";CR=false;}for(Cw=1;Cw<Cb;Cw++){Cp=Cl[Cw];CU=Cp[Co];if(CU===Cs){Cv=true;Cu=parseInt(Cp[CY],10);if(Cu===Bo.CUSTOM){Cg=parseFloat(Cp[Cz]);C1=parseFloat(Cp[Ce]);CT=o.isTrueForBoolValue(Cp[Ci]);Cm=o.isTrueForBoolValue(Cp[C4]);return{max:Cg,min:C1,autoMin:CT,autoMax:Cm};}if(Cs==="SizeBy"){CV=p.call(this,Cu,Cs,Ct,C0);Ca=CV.exObj;Cr=CV.mids;CW=CV.etp;if(C3.tp===B4.BUBBLE||C3.tp===B4.SCATTER){Cq=Ai(this.getMetricsOnAxisOfChart(Ct,C0,"z"));}else{Cq=this.getSizeByMetrics();}Cy=Ay(Ca,Cr,Cq,CW,Ba);}else{Cc=C3.isABL?AR:Ae;Cy=Cc.call(this,Ct,C0,Cs,Cu);}return{max:Cy.max,min:Cy.min,autoMin:false,autoMax:false};}}AS=this.gts;var CQ,Ck,Cj,CP,Cx=Ai(this.getMetricsOnAxisOfChart(Ct,C0,Ch,CR));if(Cv===false){var Cd=true;Cg=C1=undefined;for(Cw=1;Cw<Cb;Cw++){Cp=Cl[Cw];CU=Cp[Co];Cu=parseInt(Cp[CY],10);if(Bj(CU)){CO=Aa.call(this,CU,AS);if(As(CO,Cx)){if(Cu===3){Cj=o.isTrueForBoolValue(Cp[Ci]);CP=o.isTrueForBoolValue(Cp[C4]);Ck=CP?parseFloat(Cp[Cn]):parseFloat(Cp[Cz]);CQ=Cj?parseFloat(Cp[CS]):parseFloat(Cp[Ce]);}else{CV=p.call(this,Cu,Cs,Ct,C0);Ca=CV.exObj;Cr=CV.mids;CW=CV.etp;Cy=Ay(Ca,Cr,[CO],CW,Cs==="SizeBy"?Ba:f);if(C3.isABL&&Cs!=="SizeBy"){var CX=CZ.getOnTheFlyShapeForMetric(CO);Cy=e.call(CZ,Cy,[CX]);}Ck=Cy.max;CQ=Cy.min;Cj=false;CP=false;}if(Cd){C1=CQ;Cg=Ck;CT=Cj;Cm=CP;}else{C1=C1<CQ?C1:CQ;Cg=Cg>Ck?Cg:Ck;CT=CT===Cj?CT:false;Cm=Cm===CP?Cm:false;}Cd=false;}}}return{max:Cg,min:C1,autoMin:CT,autoMax:Cm};}}function Ac(CW,Cg,Cf){var CV=1,Cc=2,Cd=3,Ci=4,AS=5,CP=7,CR=8,Ch,CX,Ca;Ch=Cf[0];Ca=parseInt(Ch[CV],10);if(Ca===Bo.CUSTOM){var CQ,CS,CZ,Cb;CZ=o.isTrueForBoolValue(Ch[CP]);Cb=o.isTrueForBoolValue(Ch[CR]);CQ=CZ?parseFloat(Ch[Ci]):parseFloat(Ch[Cc]);CS=Cb?parseFloat(Ch[AS]):parseFloat(Ch[Cd]);CX={XMin:CQ,XMax:CS,YMin:CQ,YMax:CS,ZMin:CQ,ZMax:CS,X2Min:CQ,X2Max:CS,Y2Min:CQ,Y2Max:CS,XAutoMin:CZ,XAutoMax:Cb,X2AutoMin:CZ,X2AutoMax:Cb,YAutoMin:CZ,YAutoMax:Cb,Y2AutoMin:CZ,Y2AutoMax:Cb,ZAutoMin:CZ,ZAutoMax:Cb};}else{var CO,Ce,CT,CU,CY;CO=By.call(this,"XAxis",CW,Cg,Cf);Ce=By.call(this,"YAxis",CW,Cg,Cf);CU=By.call(this,"X2Axis",CW,Cg,Cf);CY=By.call(this,"Y2Axis",CW,Cg,Cf);CT=By.call(this,"SizeBy",CW,Cg,Cf);CX={XMin:CO.min,XMax:CO.max,YMin:Ce.min,YMax:Ce.max,ZMin:CT.min,ZMax:CT.max,X2Min:CU.min,X2Max:CU.max,Y2Min:CY.min,Y2Max:CY.max,XAutoMin:CO.autoMin,XAutoMax:CO.autoMax,X2AutoMin:CU.autoMin,X2AutoMax:CU.autoMax,YAutoMin:Ce.autoMin,YAutoMax:Ce.autoMax,Y2AutoMin:CY.autoMin,Y2AutoMax:CY.autoMax,ZAutoMin:CT.autoMin,ZAutoMax:CT.autoMax};}return CX;}function BQ(){var CQ=this.colorByInfo,CO,CT,CS,AS,CR,CP;if(CQ.tp===BJ.METRICS){CP=CQ.colorByMetricIndex;CO=p.call(this,Bo.GLOBAL,"c",0,0);CT=CO.exObj;CS=CO.mids;AS=CO.etp;CR=Ay(CT,CS,[CP],AS,A0);return CR;}return undefined;}function BT(CO){var AS;if(CO==="x1"){AS="x";}else{if(CO==="y1"){AS="y";}else{AS=CO;}}return AS.toUpperCase();}function Bb(Cc,Ci){var CP,Ca=this.getChartInfo(),CT=B4,CQ=this.axisScale,CO,Cb,CV,Cd,CY,CX,AS,Ce,CS,Ch,CZ=this.getSizeByMetrics(),CU=CZ.length>0;if(CQ===Bo.CUSTOM){Ch=this.view.getWidgetPropertyValue(AY.AXIS_SCALE_DATA);}if(Ca.isABL){if(CQ===Bo.CUSTOM){Cd=Ac.call(this,Cc,Ci,Ch);if(Ca.isABL&&this.chartSubType===BN.PERCENT){if(CU){var Cl=CZ[0];if(A6.call(this,Cl,"SizeBy")===Bo.CUSTOM){CY=this.model.mx[Cl].max;CX=this.model.mx[Cl].min;Cd.ZMin=Cd.ZMin*(CY-CX)+CX;Cd.ZMax=Cd.ZMax*(CY-CX)+CX;}}}}else{Cd=Bl.call(this,Cc,Ci);if(CU){var Cg=p.call(this,CQ,"z",Cc,Ci);CO=Cg.exObj;Cb=Cg.mids;CV=Cg.etp;AS=Ay(CO,Cb,CZ,CV,Ba);if(AS){Cd.ZMin=AS.min;Cd.ZMax=AS.max;}}}}else{if(Ca.tp===CT.BUBBLE||Ca.tp===CT.SCATTER){CS=Ai(this.getMetricsOnAxisOfChart(Cc,Ci,"z"));if(CQ===Bo.CUSTOM){Cd=Ac.call(this,Cc,Ci,Ch);}else{Cd=Bl.call(this,Cc,Ci);if(CU){Ce=p.call(this,CQ,"z",Cc,Ci);CO=Ce.exObj;Cb=Ce.mids;CV=Ce.etp;AS=Ay(CO,Cb,CS,CV,Ba);if(AS){Cd.ZMin=AS.min;Cd.ZMax=AS.max;}}}if(CU&&CS.length>0&&Cd.ZMin===undefined&&Cd.ZMax===undefined){var CR=this.sizeByMetricsSharedInAxis;if(CR.length>1){var Cf=[],CW=[];CR.forEach(function(Cm){Cf.push(Cd[BT(Cm)+"Min"]);CW.push(Cd[BT(Cm)+"Max"]);});Cd.ZMin=Cf.sort()[0];Cd.ZMax=CW.sort()[CW.length-1];}else{if(CR.length===1){var Ck=this.collisionSizeByMetric;var Cj=A6.call(this,Ck[0],BT(CR[0])+"Axis");if(Cj===Bo){Cd.ZMin=Cd[BT(CR[0])+"Min"];Cd.ZMax=Cd[BT(CR[0])+"Max"];}else{if(Cj!==Bo.GLOBAL){Cj=Bo.PERCELL;}Ce=p.call(this,Cj,"z",Cc,Ci);CO=Ce.exObj;Cb=Ce.mids;CV=Ce.etp;AS=Ay(CO,Cb,CS,CV,undefined);if(AS){Cd.ZMin=AS.min;Cd.ZMax=AS.max;}}}}}}else{if(Ca.tp===CT.GRID){if(CQ===Bo.CUSTOM){Cd=Ac.call(this,Cc,Ci,Ch);}else{Ce=p.call(this,CQ,"z",Cc,Ci);CO=Ce.exObj;Cb=Ce.mids;CV=Ce.etp;AS=Ay(CO,Cb,CZ,CV,Ba);if(AS){Cd={ZMin:AS.min,ZMax:AS.max};}else{Cd={};}}}}}CP={YMinValue:Cd.YMin,YMaxValue:Cd.YMax,Y2MinValue:Cd.Y2Min,Y2MaxValue:Cd.Y2Max,XMinValue:Cd.XMin,XMaxValue:Cd.XMax,X2MinValue:Cd.X2Min,X2MaxValue:Cd.X2Max,ZMinValue:Cd.ZMin,ZMaxValue:Cd.ZMax};Ap.copyProps(["XAutoMin","XAutoMax","X2AutoMin","X2AutoMax","YAutoMin","YAutoMax","Y2AutoMin","Y2AutoMax","ZAutoMin","ZAutoMax"],Cd,CP);return CP;}function BW(CS,CR){var CQ=false,CO=this,AS,CP=false;B0.forEach(CS,function(CT){if(CT===undefined||CT<0){CP=true;}else{AS=A6.call(CO,CT,CR);if(AS===Bo.CUSTOM){CQ=true;}}});return{emptyAxis:CP,customAxisEnabled:CQ};}function BV(CR,CU){var CP,CS,CQ,AS,CO,CT;CS=Bb.call(this,0,0);CP={origMin:CS.ZMinValue,origMax:CS.ZMaxValue};CQ=CP.origMin;AS=CP.origMax;if(CU&&CQ<0){CT=this.getSizeByExtremeForNegativeProportionalMode(CR);CQ=CT.min||CQ;AS=CT.max||AS;}CO=[AS];if(CQ!==AS){CO.push(CQ);}return CO;}function An(CP){if(CP===undefined){CP=true;}var Ci,Cd=this.getMetricsOnXAxis(),Ca=this.getMetricsOnYAxis(),CW=this.getChartInfo(),CS=CW.tp,Cn=this.getSizeByMetrics(),CQ=this.getColorByMetrics(),Cj=this.model,CZ=Cj.getMetricNames(),Ce=BD(Cn,CZ),Cm=this.markerShape,Cp=[],Co=[],CV=0,Cf=true,Ck=0,Ch=0,CU=[],Cc=true,CO=this.model.cic,Cl=this.model.cir,AS,CX,CT,Cb,CY,CR,Cg;Ci=Math.min(Cd.length,Ca.length);if(Cn.length>0){Ci=Math.min(Ci,Cn.length);}if(Ce&&Ce[0]&&Cm!==Aj.AREA){if((!L.call(this)&&this.getSizeByScaleType(0)===Bo.GLOBAL)||(!L.call(this)&&this.getSizeByScaleType(0)===Bo.CUSTOM)||(!L.call(this)&&(CO===1&&Cl===1&&((CS===B4.BUBBLE||CS===B4.SCATTER)||CS===B4.GRID||CW.isABL)))){AS=BV.call(this,Cn[0],this.property.readItem(AY.MIN_SIZE_TYPE)===Bt.PROPORTIONAL);CX=AS.length;CT=0;Cb=0;CY="";for(Ck=0;Ck<CX;Ck++){Cb=AS[Ck];if(isNaN(Cb)){CY="NaN";}else{CY=AE.call(this,Cb,Cn[0]);Cc=false;}Cp.push({diameter:CT,value:CY,num:Cb});}CR=Cp.length;if(CR>0){Cg=false;if(Cg){for(Ck=0;Ck<CR;++Ck){Cp[Ck].value=o.formatNumber(Cp[Ck].num,"up").s;}}}}else{Cf=false;for(Ck=0;Ck<Ce.length;Ck++){Cc=false;if(!Cc){break;}}}if(Ce.length>1&&!L.call(this)){for(Ch=0;Ch<Ci;Ch++){if(CW.isPie&&CQ&&CQ.indexOf(Cn[Ch])!==-1){Co[Ch]="Total of "+Ce[Ch];}else{Co[Ch]=Ce[Ch];}}}else{for(Ch=0;Ch<Ce.length;Ch++){if(CW.isPie&&CQ&&CQ.indexOf(Cn[Ch])!==-1){Co[Ch]="Total of "+Ce[Ch];}else{Co[Ch]=Ce[Ch];}}}if(Cm===Aj.CIRCLE||Cm===Aj.LINE){CV=BM.CIRCLE;}else{CV=BM.SQUARE;}for(Ck=0;Ck<Ce.length;Ck++){if(this.getSizeByScaleType(Ck)===Bo.CUSTOM){CU.push(Ce[Ck]);}}}if(Cc){Co=[];}return{sizeByDataProvider:Cp,sizeByTitles:Co,sizebyType:CV,sizeByMode:Cf,sizeByScaleType:CU};}function BC(CQ,CU,CT,CP){var CO=B4,CV=BX.EnumABLDirection,AS,CR,CS=(CQ===CO.BAR||CQ===CO.LINE||CQ===CO.AREA);if(CS){if(CP!==Aj.BAR){if(CU===BN.CLUSTERED){CU=BN.ABSOLUTE;}}else{if(CU===BN.ABSOLUTE){CU=BN.CLUSTERED;}}if(CQ===CO.BAR){if(CU===BN.ABSOLUTE){if(CP===Aj.BAR){CU=BN.CLUSTERED;}}}}if(CS&&CU===BN.AUTO){if(CP===B2.AREA){CU=BN.STACKED;}else{if(CP===B2.BAR){CU=BN.CLUSTERED;}else{CU=BN.ABSOLUTE;}}}if(CS&&CP===B2.BAR&&CU===BN.ABSOLUTE){CU=BN.CLUSTERED;}if(CQ===CO.AREA){if(CT===CV.VERTICAL){switch(CU){case BN.ABSOLUTE:AS=1;break;case BN.STACKED:AS=2;break;case BN.PERCENT:AS=7;break;}}else{switch(CU){case BN.ABSOLUTE:AS=8;break;case BN.STACKED:AS=9;break;case BN.PERCENT:AS=14;break;}}}else{if(CQ===CO.BAR){if(CT===CV.VERTICAL){switch(CU){case BN.CLUSTERED:AS=15;break;case BN.ABSOLUTE:AS=91;break;case BN.STACKED:AS=16;break;case BN.PERCENT:AS=21;break;}}else{switch(CU){case BN.CLUSTERED:AS=22;break;case BN.ABSOLUTE:AS=92;break;case BN.STACKED:AS=23;break;case BN.PERCENT:AS=28;break;}}}else{if(CQ===CO.LINE){if(CT===CV.VERTICAL){switch(CU){case BN.ABSOLUTE:AS=29;break;case BN.STACKED:AS=30;break;case BN.PERCENT:AS=35;break;}}else{switch(CU){case BN.ABSOLUTE:AS=36;break;case BN.STACKED:AS=37;break;case BN.PERCENT:AS=42;break;}}}else{if(CQ===CO.BUBBLE){AS=61;}else{if(CQ===CO.SCATTER){AS=51;}else{if(CQ===CO.GRID){AS=20000;}else{B6.visPrint("the ce chart type is not found");}}}}}}return{ceChartType:AS,shape:CP,subType:CU};}function Bw(CS,CW,CP,CZ){var Cc=this.hasGroupInfoStored(),CQ=this.gts,CY=[],Cd=this.dz,CR,CO,CT,CV,Cb,AS,CU,Ca=this;if(this.shallWeUseGroupInfo&&CW&&Cc.existing){var CX=Cc.gi;if(CP===true){B0.forEach(CX,function(Cf){var Ce=Cf[0];if(Ce!==Av){Cf[0]=Aa.call(Ca,Ce,CQ);}Ce=Cf[1];if(Ce!==Av){Cf[1]=Aa.call(Ca,Ce,CQ);}});}B0.forEach(CX,function(Ce){if(CW===true){CY.push(Ce[CS]);}else{if(Ce[CS]!==Av){CY.push(Ce[CS]);}}});return CY;}CR=this.getChartInfo();if(CR.isABL){if(CR.dirc===B8.VERTICAL){if(CZ==="x"){return CY;}CO=Cd.YAxis;}else{if(CZ==="y"){return CY;}CO=Cd.XAxis;}}else{if(CZ==="x"){CO=Cd.XAxis;}else{CO=Cd.YAxis;}}CT=CO.TemplateMetric;B0.forEach(CT,function(Ce){CV=Ce.idx;Cb=Ce.id;AS=parseInt(Ce.ax,10);CU=(AS===a.PRIMARY);if((CS===0&&CU===true)||(CS===1&&CU===false)){if(CP){CY.push(CV);}else{CY.push(Cb);}}});return CY;}function CM(){var CO,AS,CP=this.getChartInfo();if(CP.isABL){if(CP.dirc===B8.VERTICAL){CO=this.getMetricsOnYAxis();}else{CO=this.getMetricsOnXAxis();}}else{if(CP.tp===B4.GRID){CO=[];}else{CO=this.getMetricsOnYAxis();AS=this.bubbleSeriesNum;if(CP.isBubbleOrScatter&&AS!==undefined){CO=CO.slice(0,AS);}}}return CO;}function u(AS){var CO=[1,2,7,15,91,16,21,29,30,35];if(As(AS,CO)){return 1;}return 0;}function CD(AS){var CO=[8,9,14,22,92,23,28,36,37,42];if(As(AS,CO)){return 1;}return 0;}function Z(CQ,AS){if(!CQ||AS>=CQ.length){return 1;}var CP,CO=0;for(CP=0;CP<AS;CP++){CO+=(CQ[CP]||0);}return CO%2+1;}function AN(CU,CT,CV,CQ,CO){var CP,AS=CO.items.slice(CT,CT+CQ),CR=AS.length,CS=[];for(CP=0;CP<CR;CP++){CS.push({items:AS[CP].items.slice(CU,CU+CV)});}return CS;}function Bd(AS,CS){var CQ=[];var CR=0;var CO=Math.floor(AS/CS);var CP=CS;while(CP--){CQ.push(CR);CR+=CO;}CQ.push(AS);return CQ;}function Bz(AS){var CP=AS.TemplateUnit,CO=0;if(CP){B0.forEach(CP,function(CQ){CO+=o.getAttributeFormCnt(CQ);});}return CO;}function BP(CP){var CS=CP.gsi,CR=CS.mx,CQ=CP.nf,CO,AS=CR&&CR.length;for(CO=0;CO<AS;CO++){if(typeof CQ[CO].nfs!=="string"){CQ[CO].nfs=B6.getNumberFormat(CP,CO);}if(CR[CO].numfmt===undefined){CR[CO].numfmt=CQ[CO].nfs;}}}function B5(CO,CU){var CR=CU.gts,CQ=CR.row,CS=CR.col,CP;function AS(CZ,CW,CY){var CX=CW.length,CV;for(CV=0;CV<CX;CV++){if(CZ===CW[CV][CY]){return CV;}}return -1;}[CS,CQ].forEach(function(CW){if(!CP&&CW){var CV=CW[CW.length-1];if(CV&&CV.otp===-1&&CV.es){CP=CV.es;}}});function CT(CY,CX,Ca,CZ){var CW=AS(CY.id,CX,"id");if(CW>=0){var Cc=CX[CW],CV=Cc.dropzones=Cc.dropzones||[],Cb=Ap.clone(Cc.fs);CY.uidx=CW;CY.axis=Ca;CY.fs=Cb;CY.fcnt=Cb&&Cb.length;CY.n=Cc.n;CY.cs=Cc.cs;CY.rs=Cc.rs;CV.push(CZ);}}["Rows","Columns","SizeBy","AngleBy","Angle","SliceBy","ColorBy","XAxis","YAxis","BreakBy","AdditionalMetrics"].forEach(function(CZ){var Cb=CO[CZ];if(Cb){var CX=0,CW=Cb.TemplateUnit,CY;if(CW){while(CX<CW.length){CY=CW[CX];if(CY.t===x.Dimension){var CV=[];CQ.concat(CS).forEach(function(Cc){if(Cc.hid===CY.id){CV.push({id:Cc.id,t:Cc.t,srcUnit:CY});}});Array.prototype.splice.apply(CW,[CX,1].concat(CV));CX+=CV.length;}else{CX++;}}CW.forEach(function(Cd,Cc){Cd.idx=Cc;});}(CW||[]).forEach(function(Cc){CT(Cc,CQ,"row",CZ);CT(Cc,CS,"col",CZ);});var Ca=Cb.TemplateMetric;if(CP&&Ca){Ca.forEach(function(Cd){var Cc=AS(Cd.id,CP,"oid");if(Cc>=0){Cd.dzidx=Cd.idx;Cd.idx=Cc;Cd.n=CP[Cc].n;CP[Cc].cds=Cd.cds;}});}}});}function AL(CP){var CQ=["XAxis","YAxis","BreakBy","Rows","Columns","SliceBy"],CS,CO,AS=CQ.length,CR,CT=[];for(CR=0;CR<AS;CR++){CO=CQ[CR];CS=CP[CO];if(CS&&CS.MetricNames!==undefined){CT.push(CO);}}if(CT.length===1){switch(CT[0]){case"XAxis":return AI.MetricsByXAxis;case"YAxis":return AI.MetricsByYAxis;case"BreakBy":return AI.MetricsByBreakBy;case"Rows":return AI.MetricsByRow;case"Columns":return AI.MetricsByColumn;case"SliceBy":return AI.MetricsBySlice;}}else{if(CT.length===2){if((CT[0]==="XAxis"&&CT[1]==="YAxis")||(CT[1]==="XAxis"&&CT[0]==="YAxis")){return AI.MetricsByAxis;}B6.visPrint("the metricsBy item is incorrect #1");return AI.MetricsByRow;}}if(CT.length>2){B6.visPrint("the metricsBy item is incorrect #2");return AI.MetricsByRow;}if(CT.length===0){return AI.MetricsByRow;}}function BG(){var AS=this.dz,CR=this.getChartInfo(),CP=CR.isABL,CQ=AS.Rows.MetricNames!==undefined,CO=AS.YAxis.TemplateUnit===undefined;return CP&&CQ&&CO;}function X(){var AS=this.dz,CP=AS.Columns.MetricNames!==undefined,CO=AS.XAxis.TemplateMetric===undefined;return CP&&CO;}function BK(CP){var AS=this.dz,CO=AS[CP];return(CO.MetricNames!==undefined);}function BH(CQ){var AS=this.dz,CO=AS[CQ],CP=Object.keys(CO);return BK.call(this,CQ)&&CP.length===1;}function Bf(){var CS=this.getChartInfo(),CR=CS.isPie,CP=CS.isGrid,CQ=BH.call(this,"XAxis")||BH.call(this,"YAxis"),AS=this.getMetricsOnAngleBy(),CO=AS.length>=2;return CP&&CR&&CQ&&CO;}function AJ(CX,CO){var CZ=this.dz,CU=[],CT,CS,CV,CY,CW,CQ,CP,CR,AS=this.gts;CW=CZ[CX].TemplateUnit;if(CW){CT=CW.length;for(CS=0;CS<CT;CS++){CV=CW[CS];CQ=CV.axis;if(CQ==="row"){CP=AS.row;}else{CP=AS.col;}CR=CV.uidx;CY=CP[CR];if(CY){if(CO&&CY[CO]){CU.push(CY[CO]);}else{CU.push(CY);}}}}return CU;}function Au(Cb,AS){var Cd=Cb.ColorBy,CV=[],CW,CS,CZ,CY,CX=Cd.TemplateUnit,CT=Cd.TemplateMetric,Cc=false,CQ=false,CR=false,CO=BJ.NULL,CP;if(CX&&CX.length>0){Cc=true;}if(CT&&CT.length>0){CY=CT[0].idx;CQ=true;CP=CT[0].id;}if(Cd.MetricNames!==undefined){CR=true;}if(!(CR||CT||Cc)){return{tp:BJ.NULL};}if(Cc){if(CR){CO=BJ.ATT_METRICS;}else{CO=BJ.ATT;}CW=CX.length;for(CS=0;CS<CW;CS++){CV.push(CX[CS]);}return{tp:CO,atts:CV};}if(CR){CO=BJ.METRICS_ITEM;return{tp:CO};}if(CQ){CO=BJ.METRICS;CZ=AS.gsi;this.thresholds=CZ.thresholds;var Ca=this.thresholds&&this.thresholds[CP],CU;if(!Ca){return{tp:BJ.NULL};}CU=B6.getRankMode(Ca);return{tp:CO,metrics:CT,rankMode:CU,colorByMetricIndex:CY,thresholds:Ca};}}function j(CO,CP,AS){var CQ=document.createElement("div");CQ.setAttribute("class","gm-zero-line horizontal");CQ.style.width=CO+"px";CQ.style.top=CP+"px";CQ.style.left="0px";if(AS){Bc.addClass(CQ,"dashed");}else{Bc.addClass(CQ,"nondashed");}return CQ;}function BO(CO,CP,AS){var CQ=document.createElement("div");CQ.setAttribute("class","gm-zero-line vertical");CQ.style.height=CO+"px";CQ.style.top="0px";CQ.style.left=CP+"px";if(AS){Bc.addClass(CQ,"dashed");}else{Bc.addClass(CQ,"nondashed");}return CQ;}function AT(CV){var CO,AS,CQ,CU,CP=CV.dataProvider,CW=R.call(this),CR,CT=this.defn,CS=CT.gpp;if(this.ChartFactory===undefined){this.ChartFactory=new CA.MsiChart();this.ChartFactory.setController(this.controller);}CQ=this.ChartFactory;AS=this.sharedFormatManager;if(!AS){AS=CQ.createFormatManager(CS,this.sharedPool);}if(CW){this.sharedFormatManager=AS;}CO=CQ.createDataSet({dataProvider:CP,formatManager:AS});if(CO===null){return null;}if(CO.GetStatus(true)===0){return null;}CU=this.addDisposable(CQ.createChartFromFormatManager(CO,AS,null,this.view.enableCETimer));CR=CU.IsDataEnough();if(!CR){o.destroyDisposable(this,CU.id);return null;}if(this.useCECanvas){CU.setCanvasProps({type:"JSON"});}else{CU.setCanvasProps({type:"SVG",gradPrefix:"gmGrad",mGradientCount:++AW,seriesDrawOrder:CO.GetSeriesIndexByPriority()});}return CU;}function B(CO){var CX=CO?CO.length:0,CW,CV,CT,AS,CZ,CP,CR;var CU=function(Cc){var Ca,Cb=-1;if(Cc&&Cc.indexOf&&Cc.indexOf("idx")>=0){Ca=Cc.split(":");if(Ca&&Ca.length===2){Cb=parseInt(Ca[1]);}}return Cb;};var CS=function(Cg,Ci){var Cc=this.getChartInfo(),Cf,Ce=null,Cj=this.dz,Cb,Cd,Ch,Ca;if(Cc.dirc===B8.VERTICAL){Cb=Cj.YAxis;Ch=Cb.TemplateMetric;Cf=Ch&&Ch.length>0&&Ch[Cg];if(Cf){Ca=parseInt(Cf.ax,10);if(Ca===a.PRIMARY&&Ci||Ca===a.SECONDARY&&!Ci){Ce=Cf.id;}}}else{if(Cc.dirc===B8.HORIZONTAL){Cd=Cj.XAxis;Ch=Cd.TemplateMetric;Cf=Ch&&Ch.length>0&&Ch[Cg];if(Cf){Ca=parseInt(Cf.ax,10);if(Ca===a.PRIMARY&&Ci||Ca===a.SECONDARY&&!Ci){Ce=Cf.id;}}}}return Ce;};var CQ=function(Cb,Ca,Ce){var Cd=Cb[Ca],Cc=Ce?0:1;if(Cd[0]===Av||Cd[1]===Av){Cb[Ca]=undefined;}else{Cd[Cc]=Av;}};for(CW=0;CW<CX;CW++){CV=CO[CW];CT=CV[0];AS=CU(CT);if(AS>=0){CR=CS.call(this,AS,true);if(CR){CV[0]=CR;}else{CQ(CO,CW,true);}}CZ=CV[1];CP=CU(CZ);if(CP>=0){CR=CS.call(this,CP,false);if(CR){CV[1]=CR;}else{CQ(CO,CW,false);}}}var CY=[];for(CW=0;CW<CX;CW++){if(CO[CW]!==undefined){CY.push(CO[CW]);}}this.setGroupInfo(CY);return CY;}function AP(AS,CV,CR,CP,CT){var CS=document.createElement("div"),CQ=(CP==="x"?CV:AS)-CR,CO,CU;CQ=CQ>0?CQ:0;CO=CP==="x"?AS:CQ;CU=CP==="x"?CQ:CV;CS.style.position="absolute";CS.style.width=CO+"px";CS.style.height=CU+"px";CS.style[J[CP][CT?"first":"second"]]="0px";return CS;}mstrmojo.gm.GMController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gm.GMController",dualAxisEnabled:false,model:undefined,firstRes:undefined,view:undefined,drawer:undefined,manager:undefined,horizontalMode:false,enablePartialRendering:false,chartType:-1,isBlankGrid:false,chartSubType:BN.AUTO,chartDirection:-1,rowHeaderCnt:2,colHeaderCnt:2,splitPlottingMetrics:undefined,inChartLayout:undefined,mWd:0,mHt:0,isEmpty:false,ceChartType:BU.DssGraphTypeVertical_Line_Absolute,isPercentage:false,isStacked:false,isPie:false,isHistogram:false,isBoxPlot:false,isWaterfall:false,piePartition:undefined,totalRows:undefined,totalStartCols:undefined,useCECanvas:false,maxPadding:undefined,maxRowPadding:undefined,maxColPadding:undefined,axisScale:Bo.GLOBAL,axisScaleCache:null,freezeChart:A5,markerShape:undefined,ceMarkerShape:undefined,palette:Bp,isLarge:false,metricsType:AI.MetricsByColumn,fakeGroupInfo:false,shallWeUseGroupInfo:false,enableCombiChart:false,pureAreaChart:false,globalColorMapping:true,ttlDispTp:undefined,mulAttsOnAxisForABL:false,trendlineDefined:false,clusteredBarSpecialCase:false,init:function(AS){this.rhStyles=null;this.chStyles=null;this.xTitleStyles=null;this.yTitleStyles=null;if(this._super){this._super(AS);}this.bandings=[];this.chartInstancePool=[];this.yZeroAxisPos=[];this.xZeroAxisPos=[];this.y2ZeroAxisPos=[];this.x2ZeroAxisPos=[];this.disabledUnits=[];this.yMajorGridLinePos=[];this.yMinorGridLinePos=[];this.xMajorGridLinePos=[];this.xMinorGridLinePos=[];this.xAxisTrims=[];this.x2AxisTrims=[];this.yAxisTrims=[];this.y2AxisTrims=[];this.caAxisTrims=[[],[]];this.axisFormats={x1:[],x2:[],y1:[],y2:[]};this.dz=AS.firstRes.dz;this.gts=AS.firstRes.gts;this.highLightShapeIndex={};this.resetHighLightIndex=true;this.metricsOnDropZone={};this.hasTotal=undefined;this.heightCache=[];this.widthCache=[];},postInit:function(){var AS=this.firstRes,CO=this.xtabModel;this.adjustMetricNamesInDropZone();this.consumeJSON(AS);this.getAxisScaleMode();this.setupDualAxis();this.composeCustomString();if(!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause())){this.configureTrendLineBubbleForecast(AS);}if(!AS.eg){this.initMaxMinSizeProps();this.initChartingDetails();}if(AS){this.disabledUnits=B6.findDisabledUnits(AS,CO);}},postInit4NoData:function(){BI.call(this,this.firstRes);},adjustMetricNamesInDropZone:function(){if(!this.getChartInfo().isPie){if(Ap.walk("firstRes.dz.XAxis",this)&&this.firstRes.dz.XAxis.MetricNames!==undefined){this.firstRes.dz.BreakBy.MetricNames=this.firstRes.dz.XAxis.MetricNames;delete this.firstRes.dz.XAxis.MetricNames;}if(Ap.walk("firstRes.dz.YAxis",this)&&this.firstRes.dz.YAxis.MetricNames!==undefined){this.firstRes.dz.BreakBy.MetricNames=this.firstRes.dz.YAxis.MetricNames;delete this.firstRes.dz.YAxis.MetricNames;}}},getMetricInGSIMx:function(AS){var CO=this.firstRes.gsi.mx;return CO[AS];},valueTypeDataLabelEnabled:function(){var CO=this.view;if(CO.noData){return false;}var AS=this.getShowDataLabelOptions();return AS.length>0;},isGradientABL:function(){var CO=this.colorByInfo,CR=this.getChartInfo(),AS,CQ=false,CP=[];if(CR.isABL===false){return false;}if(CO.tp===BJ.ATT){AS=AJ.call(this,"YAxis","id");AS=AS.concat(AJ.call(this,"XAxis","id"));CP=AJ.call(this,"ColorBy","id");B0.forEach(CP,function(CS){if(AS.indexOf(CS)>=0){CQ=true;return false;}});return CQ;}else{if(CO.tp===BJ.NULL||CO.tp===BJ.METRICS_ITEM){return false;}}return true;},textTypeDataLabelEnabled:function(){var AS=this.getChartInfo();if(AS.isPie){return this.getUnitsCountInSliceBy()>0;}return this.getBreakByAttributes().length>0;},checkAttributeIntersection:function(AS,CO){var CU=this.dz,CS,CR,CT,CQ=Ap.clone(AS||{}),CW=[],CP=this.view.model,CV=!!CP.docModel.als;if(this.view.interactor.fmtMode||this.view.interactor.fmtFake){return["mockid"];}B0.forEach(CO||[],function(CX){CS=CU[CX];CR=CS.TemplateUnit;B0.forEach(CR||[],function(CY){CT=[CY.id];if(CV){CT=CT.concat(CP.getLinkedAttributes(CY.id)||[]);}B0.forEach(CT,function(CZ){if(CQ.hasOwnProperty(CZ)){CW.push(CZ);delete CQ[CZ];return false;}});});});return CW;},isSeasonalityEnabled:function(){var CT=this,CQ=this.getChartInfo(),CS=false,CV=this.xtabModel,CR,CU;if(CQ.isABL){var AS=AJ.call(this,"YAxis","id");AS=AS.concat(AJ.call(this,"XAxis","id"));AS.forEach(function(CX){CR=O(CV,CX);CU=CT.getAttributeById(CX);if(CR&&CU){var CW=CR.fs,CY=CU.fs;B0.forEach(CW,function(CZ){if((CZ.bftp===1||CZ.bftp===8)&&B0.find(CY,"id",CZ.fid)!==-1){CS=true;}});}});if(CS){var CP=false,CO=this.trConfigPool;Ap.forEach(CO,function(CW){var CX=CW[AY.TREND_TYPE];if(CX){CP=CP||(CX!==AU.LOG&&CX!==AU.POW);}});if(!CP){CS=false;}}}return CS;},getGlobalExtremeForAxisOrMetric:function(CP,CO,AS){return B9.call(this,CP,CO,AS);},getAttributeById:function(CT){var CP,AS=this.gts,CR=AS.row,CO=AS.col,CQ=CR.length,CS=CO.length;for(CP=0;CP<CQ;CP++){if(CR[CP].id===CT||CR[CP].hid===CT){return CR[CP];}}for(CP=0;CP<CS;CP++){if(CO[CP].id===CT||CO[CP].hid===CT){return CO[CP];}}return null;},initMaxMinSizeProps:function(){var CT=this.view,CP=CT.getWidgetPropertyValue(AY.MAX_SIZE_TYPE),CU=CT.getWidgetPropertyValue(AY.MAX_SIZE_VALUE),CR=CT.getWidgetPropertyValue(AY.MIN_SIZE_TYPE),CQ=CT.getWidgetPropertyValue(AY.MIN_SIZE_VALUE),CO=function(CV){if(CV===Al.MANUAL){return 2;}return 0;},AS=function(CV){if(CV===Bt.MANUAL){return 2;}if(CV===Bt.PROPORTIONAL){return 1;}return 0;};this.sizeInfo=this.sizeInfo||{};var CS=this.sizeInfo;CS.Max={Mode:CO(CP),Size:CU};CS.Min={Mode:AS(CR),Size:CQ};CS.ProportionalMinMax=CR===Bt.MANUAL;},initChartingDetails:function(){var CO=this.model,AS=this.mapFromChartToLDSIndex(0,0),CP=CO.getLocalDataSet(AS.r,AS.c),CQ=CP.generateDataProvider(),CR=CQ[AS.dpIdx];this.chartingDetails={nSeries:CR.innerGetSeriesCount()};},getAxisModeForAxis:function(CO,CS,CR,CQ){var AS=this.getMetricsOnAxisOfChart(CO,CS,CR,CQ);if(AS&&AS[0]!==undefined){var CP;if(CR==="x"||CR==="y"){CP=CR.toUpperCase()+(CQ?"":"2")+"Axis";}else{CP="SizeBy";}return A6.call(this,AS[0],CP);}return undefined;},isPerCellScaleOn:function(CO,CS,AS){var CR,CQ,CP;if(AS==="y"||AS==="y1"){CR="y";CP=true;}else{if(AS==="y2"){CR="y";CP=false;}else{if(AS==="x"||AS==="x1"){CR="x";CP=true;}else{CR="x";CP=false;}}}CQ=this.getAxisModeForAxis(CO,CS,CR,CP);return CQ===Bo.PERCELL;},composeCustomString:function(){var Cd=this,Cc=this.property,CX=Cc.readItem(AY.AXIS_SCALE),CO=Cc.readItem(AY.AXIS_SCALE_DATA),CQ=[],Cg=[],AS=this.getNumericAxisOptions(true,undefined,undefined,CQ,Cg),CR={},Cf={},Cb,CW,CV=Cd.getChartInfo(),CY,CP,Ce,CS,CU,Ca,CZ,CT=[];AS.forEach(function(Ch){CY=Ch.key;if(CY!=="AllMetrics"){if(Ch.sizeBy||Ch.key==="SizeBy"){CT.push(CY);}Cb=Cd.getGlobalExtremeForAxisOrMetric(CY,Ch.sizeBy,true);if(CV.isABL){Cb=e.call(Cd,Cb,AV.call(Cd,CY));}if(Cb.scaleType===undefined||isNaN(Cb.scaleType)){Cb.scaleType=Bo.GLOBAL;}CP={axKey:CY,rMin:Cb.min,rMax:Cb.max,minMax:CX,logScale:false,isCust:false,scaleType:Cb.scaleType};CW=new A1(CP);CR[CY]=CW;}});if(CO){Cf=A1.createAxisScaleCollectionFromArrays(CO,Cf);CZ=A1.serializeCollection2String(Cf);for(Ce in CR){if(CR.hasOwnProperty(Ce)){CS=CR[Ce];CU=Cf[Ce];if(CU){if(CX===Bo.CUSTOM){CS.absorbInfo(CU);}else{CS.logScale=CU.logScale===true;}if(CT.indexOf(Ce)>=0){CS.logScale=false;}}}}}this.sizeByMetricsSharedInAxis=CQ;this.collisionSizeByMetric=Cg;Ca=A1.serializeCollection2String(CR);if(CZ!==Ca){Cc.updateItem(AY.AXIS_SCALE_DATA,Ca);}},getBreakByAttributes:function(){return AJ.call(this,"BreakBy");},getSliceByAttributes:function(){return AJ.call(this,"SliceBy");},isMetricNamesInZone:function(AS){return BK.call(this,AS);},isAttrInZone:function(CQ,CP){var CO=[],AS=AJ.call(this,CP);AS.forEach(function(CR){if(CR.id){CO.push(CR.id);}});return CO.indexOf(CQ)!==-1;},getSelectedObjectsInfo:function(AS,CQ){var CP=[],CO;B0.forEach(AS,function(CR){CO=CR.identity;CP.push(CO.getSelectedObjectInfo(CQ));});return CP;},isEmptyBreakby:function(){var CO=this.getHostStructure(),AS=CO.BreakBy.length;return AS;},isEmptyVis:function(){var CT=this.getHostStructure(),CS=this.isPie,CP=CT.Rows.length,CR=CT.Columns.length,CO=CT.XAxis.length,CU=CT.YAxis.length,CQ=CT.SliceBy.length,AS=CT.AngleBy.length;if(CS&&this.getChartType()===B4.GRID){return this.isBlankGrid;}if(CP>0||CR>0||CO>0||CU>0){return false;}if(CS){if(CQ>0||AS>0){return false;}}return true;},getHostStructure:function(){var CS,CU,CZ,CP,Ca=this.dz||this.firstRes.dz,CO=["Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","AngleBy"],CX=CO.length,CV={},AS=this.gts,CW=this,CR=CW.xtabModel.data,CY=CR.gsi||{},CQ=(CY.rows||[]).concat(CY.cols||[]),Cb={},CT=function(Ce){if(Ce.srcUnit){Ce=Ce.srcUnit;if(CU.filter(function(Cg){return Ce.id===Cg.id;}).length>0){return ;}}var Cd=Ap.copy(Ce,{zone:CS+1});var Cc;if(Ce.t!==4){if(Ce.axis!==undefined&&Ce.uidx!==undefined){Cc=AS[Ce.axis][Ce.uidx];}}var Cf=O(CW.xtabModel,Ce.id);if(Cf&&Cf.fs){Cd.fs=Cf.fs;}if(Cb[Ce.id]){Cd.st=Cb[Ce.id];}if(Cc){Cd.at=Cc.at;}CU.push(Cd);};CQ.forEach(function(Cc){if(Cc.hasOwnProperty("st")&&Cc.hasOwnProperty("did")){Cb[Cc.did]=Cc.st;}});for(CS=0;CS<CX;CS++){CZ=CO[CS];CP=Ca[CZ]||Ca.Angle;CU=CV[CZ]=[];if(CP.TemplateUnit){B0.forEach(CP.TemplateUnit,CT);}if(CP.TemplateMetric){B0.forEach(CP.TemplateMetric,CT);}if(CP.MetricNames!==undefined){CU.push({n:"Metric Names",id:Bv,t:AO,zone:CS+1});}}return CV;},updatePalette:function(AS){if(AS===AZ.DARK){this.palette=q;}else{this.palette=Bp;}},initYAxisMargins:function(){var AS,CP=this.getChartCountInCol(),CO=this.yAxisMargins=[];for(AS=0;AS<CP;AS++){CO.push(-1);}},initXAxisMargins:function(){var CO,AS=this.getChartCountInRow(),CP=this.xAxisMargins=[];for(CO=0;CO<AS;CO++){CP.push(-1);}},formatChartInstancePool:function(){var CO,CP,AS=this.chartInstancePool;CP=this.getChartCountInCol();for(CO=0;CO<CP;CO++){AS[CO]=[];}},configureTrendLine:function(CR){var CZ=CR.gsi.mx,AS=this.getChartInfo(),CU=this,CV,CT,CY,CX={},CQ=false,CW={},Ca,CS;if(AS.tp===B4.GRID){return ;}if(AS.isABL){CX={globalProp:{trdFwdFst:0,trdBwdFst:0,trdFstEnabled:false,trdSeason:CR.dz.sea!==undefined?parseInt(CR.dz.sea,10):0}};}else{CX={};if(AS.tp===B4.BUBBLE||AS.tp===B4.SCATTER){CQ=true;}}Ca=CX.globalProp;B0.forEach(CZ,function(Cc){CY=Cc.did;CX[CY]={min:Cc.min,max:Cc.max};if(Cc.foreBwd!==undefined||Cc.foreFwd!==undefined){CX[CY].trdBwdFst=Cc.foreBwd;CX[CY].trdFwdFst=Cc.foreFwd;if(!CQ){Ca.trdFstEnabled=Ca.trdFstEnabled||Cc.fstEnabled!==false;}}CV=Cc.mdls;if(CV){if(AS.isABL){Ca.trdFwdFst=Ca.trdFwdFst<Cc.foreFwd?Cc.foreFwd:Ca.trdFwdFst;Ca.trdBwdFst=Ca.trdBwdFst<Cc.foreBwd?Cc.foreBwd:Ca.trdBwdFst;}CT=CV.mod_c;CS=1;B0.forEach(CT,function(Cd){if(Cd.tp>=AX.MAX&&Cd.tp<=AX.CONST){H.call(CU,CW,Cd,CY,CS);}else{A9.call(CU,CX,Cd,CY,CS);}CS++;});}});if(AS.isABL&&this.isStacked&&!this.splitPlottingMetrics){var Cb=AS.dirc===B8.VERTICAL?"Y":"X",CP=Cb+"Axis",CO=CR.dz[CP];CV=CO.mdls;if(CV){CT=CV.mod_c;CS=1;B0.forEach(CT,function(Cd){if(Cd.tp>=AX.MAX&&Cd.tp<=AX.CONST){var Cc=Cd.dua===0?CP:Cb+"2Axis";H.call(CU,CW,Cd,Cc,CS);}else{B6.visPrint("No way entering this branch");A9.call(CU,CX,Cd,CY,CS);}CS++;});}}this.trConfigPool=CX;this[AY.REF_LINE_DEF]=CW;},hasRefLineInOppositeAxis:function(CT){var CU=this.dz||this.firstRes.dz,AS=this.getChartInfo(),CO=false;if(AS.isABL&&this.isStacked&&!this.splitPlottingMetrics){var CV=AS.dirc===B8.HORIZONTAL?"Y":"X",CP=CV+"Axis",CQ=CU[CP],CS,CR;CS=CQ.mdls;if(CS){CR=CS.mod_c;B0.forEach(CR,function(CW){if(CW.tp>=AX.MAX&&CW.tp<=AX.CONST){if(CW.dua===CT){CO=true;return false;}}});}}return CO;},getBubbleForcastExtremeForPieWithTotal:function(CQ){var CV,CS,CP,AS,CO,CY=this.model.getMetricCount(),CT=this.getMetricIndexFromID(CQ.did),Ca=this.totalRows||[],Cb=Ca.length,CU=this.firstRes.gvs.items,CX,CZ,CR,CW;AS=CU.length;for(CV=0;CV<Cb;CV++){CO=Ca[CV];if(CO<AS){CX=CU[CO].items||[];CS=CT;CP=CX.length;while(CS<CP){CZ=CX[CS];if(CZ!==undefined){CZ=parseFloat(CZ.rv);if(!isNaN(CZ)){if(CR===undefined||CR>CZ){CR=CZ;}if(CW===undefined||CW<CZ){CW=CZ;}}}CS+=CY;}}}if(CR!==undefined){return{min:CR,max:CW};}return{min:CQ.min,max:CQ.max};},configureTrendLineBubbleForecast:function(CQ){var CW=CQ.gsi.mx,AS=this.getChartInfo(),CU=this,CV,CT,CR,CS={},CP=false,CO=false;if(AS.tp===B4.GRID){return ;}if(AS.tp===B4.BUBBLE||AS.tp===B4.SCATTER){CP=true;}if(this.isPie&&this.hasTotalForPie()){CO=true;}B0.forEach(CW,function(CX){CV=CX.did;if(CP){if(CO){CR=CU.getBubbleForcastExtremeForPieWithTotal(CX);}else{CR={min:CX.min,max:CX.max};}CT={min:CR.min,max:CR.max};CS[CV]=CT;CT[AY.TREND_BUBBLE_FORE_FWD]=CT[AY.TREND_BUBBLE_MAX]=CR.max;CT[AY.TREND_BUBBLE_FORE_BWD]=CT[AY.TREND_BUBBLE_MIN]=CR.min;if(CX.foreBwd!==undefined||CX.foreFwd!==undefined){CT[AY.TREND_BUBBLE_FORE_FWD]=CX.foreFwd;CT[AY.TREND_BUBBLE_FORE_BWD]=CX.foreBwd;CT[AY.TREND_BUBBLE_FORE_ENABLED]=CX.fstEnabled!==false;}}});this[AY.TREND_BUBBLE_FORE_DEF]=CS;},getTrendLineJSON:function(AS){return AS.trendref;},getTrendLineObjectsForMetricAtScale:function(CS,CX,CQ,CP,CW,CR){var CU=this.trendLineJSON,AS=CU[CR],CV,CY,CT,CO=[];if(AS){B0.forEach(AS,function(CZ){CY=undefined;CV=CZ["x-vars"];if(CZ.mid===CS&&(CP===undefined||(CV&&CV[0]===CP))){CY=Ap.copy(CZ,{});if(CR==="g"){CY.inChartModel=CY.models;}else{if(CR==="all"){CY.inChartModel=CY.models[CX][CQ];}else{if(CR==="r"){CY.inChartModel=CY.models[CX];}else{CY.inChartModel=CY.models[CQ];}}}delete CY.models;}if(CY){CT=isNaN(CY.inChartModel[0].model);if((CT===true&&CW===true)||(!CT&&!CW)){CO.push(CY);}}});}return CO;},getTrendLinesObjectForMetric:function(CQ,AS,CS,CP,CT){var CR=this,CU=["g","all","r","c"],CO=[];CU.forEach(function(CV){CO=CO.concat(CR.getTrendLineObjectsForMetricAtScale(CQ,AS,CS,CP,CT,CV));});return CO;},isLogScale:function(CP,CU,CZ){var CY=this,CQ=CY.view,CX,CO=CY.getChartInfo(),Cc;if(CO.isABL&&CO.sbtp===BX.EnumSubtype.PERCENT){return false;}if(CY.logScaleCache===undefined){CY.logScaleCache=[{},{}];}var CS,CV=CP[0]==="y"||CP[0]==="Y",CT=CP==="y"||CP==="Y"||CP==="y1"||CP==="Y1"||CP==="x"||CP==="X"||CP==="x1"||CP==="X1";Cc=CY.logScaleCache[CV?1:0];if(CV){CS=Cc[CU]=Cc[CU]||{};}else{CS=Cc[CZ]=Cc[CZ]||{};}if(CT){if(CS.Primary!==undefined){return CS.Primary;}}else{if(CS.Secondary!==undefined){return CS.Secondary;}}var Ca;if(CV){if(CT){Ca="YAxis";}else{Ca="Y2Axis";}}else{if(CT){Ca="XAxis";}else{Ca="X2Axis";}}var AS=Aq.call(this,CU,CZ,Ca);if(AS&&AS.length>0){CX=b.call(CY,AS,CP,false);}if(!CX||CX.length===0){return undefined;}var CW,Cb,CR;CW=CQ.getWidgetPropertyValue(AY.AXIS_SCALE_DATA);CR=A1.createAxisScaleCollectionFromArrays(CW);Cb=CR[CX.key];if(Cb){if(CT){CS.Primary=Cb.logScale;}else{CS.Secondary=Cb.logScale;}return Cb.logScale;}return false;},getDataLabelType:function(){var AS=this.getMetricLevelDataLabel();if(AS===undefined){var CO=this.property.readItem(AY.DATA_LABEL);if(CO===undefined||((CO===2)&&!this.valueTypeDataLabelEnabled())||(CO===3&&!this.textTypeDataLabelEnabled())){AS=mstrmojo.gm.EnumDataLabels.HIDE;}}return AS||this.property.readItem(AY.DATA_LABEL);},getMetricLevelDataLabel:function(){var CO=this.property.readItem(AY.DATA_LABEL),CQ=this.getShowDataLabelOptions(),AS,CP;if(CO===2&&CQ.length===1){AS=this.property.readItem(AY.METRIC_LEVEL_DATA_LABEL);if(AS){CP=CQ[0].key;if(AS[CP]===false){AS[CP]=true;this.property.updateItem(AY.METRIC_LEVEL_DATA_LABEL,AS);}}}},consumeJSON:function(Cd){var CZ,CX,CU,Ct,Cg,Cl,Ck,Ci,Cr=this,Co=Cd;l.call(this);var Cs=this.view.model.data.dz.visProp.fmt.th;if(Cs!==undefined&&Cs!==null){if(typeof Cs==="number"){this.view.theme=Cs;}else{if(typeof Cs==="string"){this.view.theme=parseInt(Cs,10);}}}var Cb=Cd.dz,CO=Cb.visProp.fmt;Cr.trendLineJSON=this.getTrendLineJSON(Cd);Cr.ttlDispTp=Cd.lnm;Cr.fmt=CO;Cr.extrs=Cd.extrs;var AS=Cd.gts;Cr.th=[];B0.forEach(AS.row,function(Cu){CI(Cu,"row");var Cv=O(Cr.xtabModel,Cu.id);if(Cv&&Cv.t){Cu.t=Cv.t;}if(Cu.cs===undefined){Cu.cs=1;}});B0.forEach(AS.col,function(Cu){CI(Cu,"col");var Cv=O(Cr.xtabModel,Cu.id);if(Cv&&Cv.t){Cu.t=Cv.t;}if(Cu.rs===undefined){if(Cu.opt!==-1){Cu.rs=1;}}});B5(Cb,Cd);BP(Cd);Bq.call(this,Cd);CU=Co.dm.rct;Ct=Co.dm.cct;CZ=Co.ptt.row;CX=Co.ptt.col;BI.call(this,Cd);Ci=Au.call(this,Cb,Cd);if(Ci.tp===BJ.METRICS){var Ca=Ci.metrics[0].id;Cr.thresholds=Cd.gsi.thresholds[Ca];}Cr.colorByInfo=Ci;Cr.metricsType=AL.call(this,Cb);CN.call(this,Cd,this.ceChartType);Cr.configureTrendLine(Cd);if(Co.gvs.items){Cg=AN(0,0,Ct,CU,Co.gvs);}this.model=this.addDisposable(new BX.GMDataModel({ttlDispTp:this.ttlDispTp,eg:Co.eg,rp:CZ,cp:CX,rct:CU,cct:Ct,gts:Co.gts,fullNf:Co.nf,mx:Co.gsi.mx,dz:Cb,trConfigPool:this.trConfigPool,clusteredBarSpecialCase:this.clusteredBarSpecialCase,onlyMetricNamesOnAxisForGridPie:this.onlyMetricNamesOnAxisForGridPie,isMetricNamesOnXAxis:this.isMetricNamesOnXAxis,colorType:Ci.tp,gmCtr:this,metricsType:this.metricsType,splitPlottingMetrics:this.getSplitPlottingMetrics(),getMetricsOnXAxis:this.getControllerAPI(M.GET_METRICS_ON_X),getMetricsOnYAxis:this.getControllerAPI(M.GET_METRICS_ON_Y),getSizeByMetrics:this.getControllerAPI(M.GET_METRICS_ON_SIZE_BY),property:this.property,isBlankGrid:this.isBlankGrid}));Cl=this.model;var Cc=this.getChartInfo();if(Cc.isABL&&this.getSplitPlottingMetrics()){Ck=this.getSecondaryMetrics();if(Ck.length>0){this.shallWeUseGroupInfo=true;}}Cl.shallWeUseGroupInfo=this.shallWeUseGroupInfo;Cr.shouldDrawShapeFlag=AD(Cb,Cc);if(!this.shallWeUseGroupInfo){this.removeGroupInfo();}else{this.updateGroupInfo();}if(Co.gvs.items){Cl.feedLdss(0,0,Ct,CU);}if(this.scriptClass!=="mstrmojo.ngm.NewGMController"){if(Co.ghs.chs.items){Cl.feedChs(Co.ghs.chs);}if(Co.ghs.rhs.items){Cl.feedRhs(Co.ghs.rhs);}}if(Cl.cetSelectors){this.view.cetSelectors=Cl.cetSelectors;delete Cl.cetSelectors;}Cl.extractInfoLowestHeaderInfoToAttrObj();Cl.constructColorByInfo();this.inChartLayout=this.getSubChartsLayout();if(this.isPie){this.preprocessForPie(Cd);}var CT=this.getRowTitleInfo(true),CY=this.getColTitleInfo(true),Cj=this.attributeSelectionInfo;if(CT&&CT.items){B0.forEach(CT.items,function(Cu){Cj[Cu.id]=Cu;});}if(CY&&CY.items){B0.forEach(CY.items,function(Cu){Cj[Cu.id]=Cu;});}var Ch=Cc.isABL&&this.splitPlottingMetrics,Cf=this.metricSelectionInfo;for(var CW=0;CW<CU;CW++){for(var CS=0;CS<Ct;CS++){[Cr.getXAxisInfo(CW,CS,true,Ch),Cr.getXAxisInfo(CW,CS,false,Ch),Cr.getYAxisInfo(CW,CS,true,Ch),Cr.getYAxisInfo(CW,CS,false,Ch)].forEach(function(Cu){if(Cu.isMetric){Cu.cellHandlers.forEach(function(Cw,Cv){if(Cw&&!isNaN(Cw.row)&&!isNaN(Cw.col)){Cf[Cu.ids[Cv]]={mid:Cu.ids[Cv],cellHandle:Cw};}});}});}}var Cn=this.getYAxisInfo(),CP=this.getXAxisInfo();this.xIsNumeric=CP.isMetric;this.yIsNumeric=Cn.isMetric;this.axisLayout=this.getAxisLayout4CE();this.enablePartialRendering=this.view.getWidgetPropertyValue(AY.PARTIAL_RENDER)==="true";if(Cc.isBubbleOrScatter&&(this.metricsType!==AI.MetricsByRow&&this.metricsType!==AI.MetricsByColumn)){var CR=this.getMetricsOnXAxis(),CQ=this.getMetricsOnYAxis(),Cp=this.getSizeByMetrics(),Cm=Math.min(CR.length,CQ.length);if(Cp.length>0){Cm=Math.min(Cm,Cp.length);}this.bubbleSeriesNum=Cm;}if(Cc.isABL){var Ce=AJ.call(this,"YAxis","n"),Cq=AJ.call(this,"XAxis","n"),CV=AJ.call(this,"BreakBy","n");if(Ce.length+Cq.length===0&&CV.length>0){this.specialSortable=true;}}},getAxisOriginLineIdentity:function(AS){var CP=AS+"axOrLnId";if(this[CP]){return this[CP];}var CO,CQ=["x1","x2"],CR=CQ.indexOf(AS)!==-1?d.X_AXIS_ORIGIN_LINE:d.Y_AXIS_ORIGIN_LINE;CO=new mstrmojo.gm.GeneralIdentity({objType:CR});this[CP]=CO;return CO;},getAxisOriginLabelIdentity:function(AS){var CP=AS+"axOrLbId";if(this[CP]){return this[CP];}var CO,CQ=["x1","x2"],CR=CQ.indexOf(AS)!==-1?d.X_AXIS_ORIGIN_LABEL:d.Y_AXIS_ORIGIN_LABEL;CO=new mstrmojo.gm.GeneralIdentity({objType:CR});this[CP]=CO;return CO;},getAllAxisProperties:function(){var AS=this.view;return AS.getAllAxisProperties();},printExtremes:function(){var CQ=this,CP,CO,CT,CS,AS,CR;CS=CQ.getChartCountInCol();AS=CQ.getChartCountInRow();for(CP=0;CP<CS;CP++){for(CO=0;CO<AS;CO++){CT=W.call(this,CP,CO);CR=Bb.call(CQ,CP,CO);B6.visPrint("("+CP+", "+CO+")"+JSON.stringify(CR));}}},getGraphShapeCount:function(CS){var CU=this,CR,CQ,CO,CT=0,AS=0,CP=0,CV,CW;CS=CS||false;CV=CU.getChartCountInCol();CW=CU.getChartCountInRow();for(CR=0;CR<CV;CR++){for(CQ=0;CQ<CW;CQ++){CO=W.call(this,CR,CQ);AS=CO.innerGetSeriesCount();CP=CO.innerGetGroupCount();if(CS&&AS>0&&CP>0){return CV*CW*AS*CP;}CT+=AS*CP;}}return CT;},getColorByMetricExtremes:function(){return BQ.call(this);},getCategoricalAxisLabelsInfo:function(CO,CW,CQ,CZ){CZ=CZ||{purpose:"content"};var CY=false,CX=0,Ce=0,Cb,Cf,AS,Cc,Ca=[],Cg,CT=B4,CV=this.getChartInfo();if(CV.isABL&&CV.dirc===B8.VERTICAL&&CQ==="y"){CY=true;}else{if(CV.isABL&&CV.dirc===B8.HORIZONTAL&&CQ==="x"){CY=true;}else{Cb=W.call(this,CO,CW);Cf=Cb.innerGetSeriesCount();AS=Cb.innerGetGroupCount();Cc=Cb.getGroupCount();CY=(Cf===0||AS===0);}}if(CY){switch(CZ.purpose){case"count":return 0;default:return Ca;}}if(CV.tp===CT.GRID){switch(CZ.purpose){case"count":return CQ==="x"?AS:Cf;default:if(CQ==="x"){for(Ce=0;Ce<AS;Ce++){Cg=Cb.getGraphCell(CX,Ce);Ca.push(Cg.getGroupLabel(0).join(" "));}}else{for(CX=0;CX<Cf;CX++){Cg=Cb.getGraphCell(CX,Ce);Ca.push(Cg.getSeriesLabel(0).join(" "));}}return Ca;}}switch(CZ.purpose){case"count":var Ch=0;if(Cc===AS){for(Ce=0;Ce<AS;Ce++){Cg=Cb.innerGetGraphCell(CX,Ce);if(!Cg.isFaked){Ch++;}}}else{Ch=Cc;}return Ch;default:if(Cc===AS){for(Ce=0;Ce<AS;Ce++){Cg=Cb.innerGetGraphCell(CX,Ce);if(!Cg.isFaked){Ca.push(Cg.getGroupLabel(0).join(" "));}}}else{var CS=Cb.bwdLbs||[],CU=CS.length,Cd=Cb.fwdLbs||[],CR,CP;for(Ce=0;Ce<Cc;Ce++){if(Ce<CU){CR=(CS[Ce]).join(" ");}else{if(Ce>=CU+AS){CP=Cd[Ce-(CU+AS)];if(CP){CR=CP.join(" ");}else{CR="";}}else{Cg=Cb.innerGetGraphCell(CX,Ce-CU);CR=Cg.getGroupLabel(0).join(" ");}}Ca.push(CR);}}return Ca;}},getColorByLegendInfo:function(){var AS=this.model;return AS.getColorByLegendInfo();},getSizeByLegendInfo:function(){return this.getAdaptedSizeByDataProvider();},constructSizebyDataProvider:function(){return An.call(this);},getSizeByExtremeForNegativeProportionalMode:function(CV){var CU,CS,CP,AS,CX,CZ,CQ,CR,Ca,CW,CO,CY=this.model.getMetricCount(),CT=this.firstRes.gvs.items;AS=CT.length;for(CU=0;CU<AS;CU++){CX=CT[CU].items||[];CS=CV;CP=CX.length;while(CS<CP){CQ=CX[CS];if(CQ!==undefined){CQ=parseFloat(CQ.rv);if(!isNaN(CQ)){CZ=Math.abs(CQ);if(CR===undefined||CR>CZ){CR=CZ;Ca=CQ;}if(CW===undefined||CW<CZ){CW=CZ;CO=CQ;}}}CS+=CY;}}return{min:Ca,max:CO};},getAdaptedSizeByDataProvider:function(){var AS=this.constructSizebyDataProvider(),CS,CQ={},CR=mstrmojo.desc(13966,"Size by:"),CP,CO=[];if(!AS.sizeByTitles||AS.sizeByTitles.length<=0){return null;}CQ.custMetrics=AS.sizeByScaleType;CP=AS.sizeByTitles.length;B0.forEach(AS.sizeByTitles,function(CT){CO.push(CT);});if(CP>1){CQ.items=CO;}if(AS.sizeByMode===true&&AS.sizeByDataProvider.length>1){CQ.item=CP>1?CR:AS.sizeByTitles[0];CS=CQ.elements=[];B0.forEach(AS.sizeByDataProvider,function(CT){CS.push({sign:"<",v:CT.value});});if(CS.length===5){CS[0].sign="=";CS[4].sign="=";}CQ.caseFlag=0;return CQ;}if(AS.sizeByMode===true&&AS.sizeByDataProvider.length===1){CQ.caseFlag=2;CQ.item=CP>1?CR:AS.sizeByTitles[0];CQ.elements=[{diameter:12,shape:"rect",sign:"=",v:AS.sizeByDataProvider[0].value}];return CQ;}CQ.item=CR;CQ.items=CO;CQ.elements=[];CQ.caseFlag=1;return CQ;},getXAxisLabels:function(CO){var AS=0;return this.getCategoricalAxisLabelsInfo(AS,CO,"x");},getYAxisLabels:function(AS){var CO=0;return this.getCategoricalAxisLabelsInfo(AS,CO,"y");},countXAxisLabels:function(CO){var AS=0;return this.getCategoricalAxisLabelsInfo(AS,CO,"x",{purpose:"count"});},countYAxisLabels:function(AS){var CO=0;return this.getCategoricalAxisLabelsInfo(AS,CO,"y",{purpose:"count"});},estimateXAxisSize:function(CT,CP,CR){var CQ,CX,AS=CT.length,CU=0,CV=0,CS=20,CO=20,CW=this.view.HTML5PROPS.AXIS_LABEL_X;for(CQ=0;CQ<AS;CQ++){CX=B6.measureTextSize(CT[CQ],CW,0);CU=Math.max(CU,CX.width);CV=Math.max(CV,CX.height);}if(CP===Ag.STAGGER){CS=(CU+I)*((AS+1)>>1)+I;CO=CV*2+I*3;}else{if(CP===Ag.ROTATE){CS=CV*AS+I*(AS+1);CO=CU+I*2;}else{CS=CU*AS+I*(AS+1);CO=CV+I*2;}}if(CR&&!CP&&CS>CR){CS=CR;}if(CS<AS*5){CS=AS*5;}return{width:CS,height:CO};},estimateYAxisSize:function(CQ){var CP,CY,CR,CO,AS=CQ.length,CV=0,CW=0,CX=this.view.HTML5PROPS.AXIS_LABEL_Y,CS="H",CU,CT=true;for(CP=0;CP<AS;CP++){CY=B6.measureTextSize(CQ[CP],CX,0);CV=Math.max(CV,CY.width);if(CT){if(CU===undefined){CU=B6.measureTextSize(CS,CX,1).height;CU=Math.round(CU*0.85);}CW=CU;}else{CW=Math.max(CW,CY.height);}}CR=CV+I*2;CO=CW*AS+I*(2*AS);return{width:CR,height:CO};},initLayouter:function(CY){var CU,CT,Ce=this,Cf=this.view.getWidgetPropertyValue(AY.FIT_TO),CW=this.getChartCountInCol(),CX=this.getChartCountInRow(),CO=this.getXAxisInfo(),Cc=this.getYAxisInfo(),Ca=function(){var Ci,Cj,Cl,Ch=0,Ck=0,Cg=Math.min(10,CX);for(Ci=0;Ci<Cg;Ci++){Cl=Ce.getXAxisLabels(Ci);Cj=Ce.estimateXAxisSize(Cl,Ag.NORMAL).width;Ck=Math.max(Ck,Cj);Ch+=Cl.length;if(Ch>100){break;}}return Ck;},CQ=function(){var Ci,Cj,Cl,Ch=0,Ck=0,Cg=Math.min(10,CX);for(Ci=0;Ci<Cg;Ci++){Cl=Ce.getXAxisLabels(Ci);Cj=Ce.estimateXAxisSize(Cl,Ag.STAGGER).width;Ck=Math.max(Ck,Cj);Ch+=Cl.length;if(Ch>100){break;}}return Ck;},Cd=function(Ck){var Cj,Co,Cg,Ch,Cm,Cl=0,Ci=Ck.length,Cn=Ce.view.HTML5PROPS.AXIS_LABEL_Y;for(Cj=0;Cj<Ci;Cj++){Co=Ck[Cj];Cg=B6.measureTextWidth(Co,Cn,0);if(Co.length>10){Ch=Co.substr(0,10)+"...";Cm=B6.measureTextWidth(Ch,Cn,0);Cg=Math.min(Cg,Cm);}Cl=Math.max(Cl,Cg);}return Cl;},CP=function(){var Ch,Ci,Cg=0;for(Ch=0;Ch<CX;Ch++){Ci=Ce.countXAxisLabels(Ch);Cg+=Ci;}return Cg;},CS=function(){var Cg,Ci,Ch=[];for(Cg=0;Cg<CX;Cg++){Ci=Ce.getXAxisLabels(Cg);Ch=Ch.concat(Ci);}return Ch;},Cb=function(){var Cg,Ci,Ch=[];for(Cg=0;Cg<CX;Cg++){Ci=Ce.countXAxisLabels(Cg);Ch.push(Ci);}return Ch;},CV=function(){var Cg,Ci,Ch=[];for(Cg=0;Cg<CW;Cg++){Ci=Ce.countYAxisLabels(Cg);Ch.push(Ci);}return Ch;},CZ=function(){var Ck,Cg,Cl,Cj=1,Ch=Ce.getChartInfo(),Cq=Ch.shape,Cp=Ce.chartSubType,Cn=Ce.chartType,Co=s,Cm=[],Ci=40;if(Cq===Aj.BAR&&Cp===BN.CLUSTERED&&Cn!==B4.GRID){Cj=Ce.chartingDetails.nSeries;}if(Cq===Aj.PIE||Cq===Aj.RING){Co=Math.max(24,Co);}else{if((Cq===Aj.LINE||Cq===Aj.AREA)&&!Ch.isCombo){Co=U;}}for(Ck=0;Ck<CX;Ck++){Cl=Ce.countXAxisLabels(Ck);Cg=(Cj*Co)*(Cl+0.5);Cm.push(Math.max(Math.floor(Cg+0.5),Ci));}return Cm;},AS=function(){var Cj,Cp,Ck,Ci=1,Ch=Ce.getChartInfo(),Cq=Ch.shape,Co=Ce.chartSubType,Cm=Ce.chartType,Cg=s,Cl=[];if(Cq===BX.EnumShape.BAR&&Co===BN.CLUSTERED&&Cm!==B4.GRID){Ci=Ce.chartingDetails.nSeries;}if(Cq===BX.EnumShape.PIE||Cq===BX.EnumShape.RING){Cg=Math.max(24,Cg);}else{if((Cq===Aj.LINE||Cq===Aj.AREA)&&!Ch.isCombo){Cg=U;}}var Cn=Ap.walk("GENERAL_PROPS.ALL.minRowHeight",mstrApp.getThemeProps("OGM"))||0;for(Cj=0;Cj<CW;Cj++){Ck=Ce.countYAxisLabels(Cj);Cp=Math.max((Ci*Cg)*(Ck+0.5),Cn);Cl.push(Math.floor(Cp+0.5));}return Cl;},CR=function(Cj){var Cg,Ck,Ch,Ci=[];if(!Cj||Cj.length===0){for(Cg=0;Cg<CW;Cg++){Ci.push(Cg%2);}return Ci;}Ck=Cj.length;Ci=[0];Ch=Cj[0];for(Cg=1;Cg<Ck;Cg++){Ci.push(Ch%2);Ch+=Cj[1];}return Ci;};CY.fitTo=Cf;CY.chartType=this.chartType;CY.nRows=CW;CY.nCols=CX;CY.xInfo=CO;CY.yInfo=Cc;CY.xAxisType=CO.isMetric?Bn.METRIC:Bn.ATTRIBUTE;CY.yAxisType=Cc.isMetric?Bn.METRIC:Bn.ATTRIBUTE;CY.widthCache=this.widthCache;CY.heightCache=this.heightCache;CY.minWidths=CO.isMetric?null:CZ();CY.minHeights=Cc.isMetric?null:AS();CU=CO.isMetric?undefined:Cb();CT=Cc.isMetric?undefined:CV();if(Cf===AQ.NONE){CY.maxXAxisWidth=CO.isMetric?undefined:Ca();CY.maxXAxisWidthStagger=CO.isMetric?undefined:CQ();delete CY.widthRatio;delete CY.heightRatio;}else{CY.nLabels=CP();CY.minXLabelWidth=CO.isMetric?undefined:Cd(CS());CY.widthRatio=CU;CY.heightRatio=CT;}this.widthRatio=CU;this.heightRatio=CT;this.bandingFlags=CR(CT);CY.API.owner=this;CY.API.getXAxisHeight=this.getXAxisHeight;CY.API.getXAxis2Height=this.getXAxis2Height;CY.API.getYAxisWidth=this.getYAxisWidth;CY.API.getYAxis2Width=this.getYAxis2Width;CY.API.getRowHeight=this.getControllerAPI(M.GET_CHART_HEIGHT);CY.API.getColWidth=this.getControllerAPI(M.GET_CHART_WIDTH);CY.API.calculateAllXAxisStyle=this.getControllerAPI(M.LAYOUT_ALL_X_AXIS_LABELS);CY.API.calculateOneXAxisStyle=this.getControllerAPI(M.LAYOUT_ONE_X_AXIS_LABELS);},preprocessForPie:function(Ce){var Cd=this.getChartInfo(),CP=false,CV=this.model,CW=B4,Cg=Cd.dirc,CZ=BX.EnumABLDirection,CT=Cd.tp,Cf=this.getUnitsCountInSliceBy(),Cc=this.piePartition=[],Ca=this.totalRows=[],CQ=this.totalStartCols=[],CY,Co,Ci,Cj,Ch,Cb,CS,CR,Ck,Cn,CX,AS=0,CU;if(!CP){Cb=this.dz;CS=Cb.SliceBy;CR=CS.TemplateUnit;if(CR&&CR.length>0){AS=CR[0].uidx;}else{B6.visPrint("actually, it should be a bubble chart. not implemented!");}}CY=CV.rct;Co=CV.cct;Cj=CV.getUnitAttributesCountOnRow();Ch=CV.getUnitAttributesCountOnCol();Cn=CV.getMetricCount();var CO,Cl;if((Cd.isABL&&Cg===CZ.VERTICAL)||(CT===CW.BUBBLE||CT===CW.SCATTER)||(CT===CW.GRID)){CO=function(){if(CY>0){Cc.push(0);}if(!isNaN(AS)){AS=Cm(Ce.gts,"row",AS);for(Ci=0;Ci<CY;Ci++){CU=CV.getRowHeaderObj(Ci,AS);if(CU&&CU.stt===1){if(Ci+1<CY){Cc.push(Ci+1);}}}}Ck=Cc.length;for(Ci=1;Ci<Ck;Ci++){Ca.push(Cc[Ci]-1);}Ca.push(CY-1);};Cl=function(){CX=Cj-1-Cf;var Cr=0,Cp,Cq,Cu=[],Cw=[];if(CX>=0){var Ct=this.gts.row[CX];Ct.fcnt=Ct.fcnt||Ct.cs||Ct.rs||1;if(Ct.t===1&&Ct.fcnt>1){var Cv=CV.modelRhs[CX];Ci=0;while(Ci<=Cv.mxIdx){if(Cv[Ci]){Cc.push(Ci);}Ci++;}}else{Cp=this.getBreakByAttributeIndices(true);Cq=B0.indexOf(Cp,CX)>=0;if(Cq){for(var Cs=Cp.length-1;Cs>=0;Cs--){Cr=0;for(Ci=0;Ci<Cp[Cs];Ci++){Cr+=this.gts.row[Ci].cs||1;}Cu=this.getPiePartitions(Cr,true);if(Cu.length>Cw.length){Cw=Cu;}if(Cw.length===CY){break;}}Cc=this.piePartition=Cw;}else{for(Ci=0;Ci<CX;Ci++){Cr+=this.gts.row[Ci].cs||1;}Cc=this.piePartition=this.getPiePartitions(Cr,true);}}}else{Cc.push(0);}};if(CP){Cl.call(this);}else{if(this.hasTotalForPie()){CO.call(this);}else{Cl.call(this);}}}else{if(Cd.isABL&&Cg===CZ.HORIZONTAL){CO=function(){if(Co>0){Cc.push(0);}if(!isNaN(AS)){AS=Cm(Ce.gts,"col",AS);for(Ci=0;Ci<Co;Ci++){CU=CV.getColHeaderObj(Ci,AS);if(CU&&CU.stt===1){Cc.push(Ci);}}}Ck=Cc.length;for(Ci=1;Ci<Ck;Ci++){CQ.push(Cc[Ci]);}CQ.push(Co-Cn);};Cl=function(){CX=Ch-1-Cf;var Cp,Cq,Cs=[],Ct=[];if(CX>=0){Cp=this.getBreakByAttributeIndices(false);Cq=B0.indexOf(Cp,CX)>=0;if(Cq){for(var Cr=Cp.length-1;Cr>=0;Cr--){Cs=this.getPiePartitions(Cp[Cr],false);if(Cs.length>Ct.length){Ct=Cs;}if(Ct.length===Co){break;}}Cc=this.piePartition=Ct;}else{Cc=this.piePartition=this.getPiePartitions(CX,false);}}else{Cc.push(0);}};if(CP){Cl.call(this);}else{if(this.hasTotalForPie()){CO.call(this);}else{Cl.call(this);}}}}function Cm(Cu,Cq,Ct,Cr){Ct=Ct||0;if(!!!Cu){return Ct;}Cr=Cr||0;var Cs,Cv,Cp,Cx="cs",Cw=Cr;if(Cq.toLowerCase()==="row"){Cp=Cu.row;}else{Cp=Cu.col;Cx="rs";}for(Cs=0;Cp&&Cs<Ct;Cs++){Cv=Cp[Cs];Cw+=(Cv[Cx]||1);}return Cw;}},getBreakByAttributeIndices:function Br(CV){var CP=this.dz.BreakBy,CU=CP&&CP.TemplateUnit||[],CR,CQ,AS,CO=this.gts,CS=CV?CO.row:CO.col,CT=[];if(CU.length>0){for(CR=0;CR<CU.length;CR++){AS=CU[CR];for(CQ=0;CQ<CS.length;CQ++){if(CS[CQ].t===12&&AS.id===CS[CQ].id){CT.push(CQ);break;}}}}return CT;},getPiePartitions:function Ah(CY,Ca){var CW=this.model,CX=Ca?CW.rct:CW.cct,CV,CT,AS,CS,CZ,CU,CO,CR,CQ,CP=[];for(CV=0;CV<CX;CV++){AS=Ca?CW.getRowHeaderObj(CV,CY):CW.getColHeaderObj(CV,CY);CS=[];CW.collectHeaderObj(AS,CS);CZ=CS.length;CU=[];for(CT=0;CT<CZ;CT++){CO=CS[CT];CU.push(CO.idx);}CR=CU.join(",");if(CQ!==CR){CP.push(CV);CQ=CR;}}return CP;},hasTotalForPie:function(){if(this.hasTotal!==undefined){return this.hasTotal;}var CQ,AS=this.dz,CP,CS=false,CR=this.getUnitsCountInSliceBy()>0,CO=["XAxis","YAxis","SizeBy"];for(CQ=0;CQ<3;CQ++){CP=AS[CO[CQ]];if(CP&&CP.TemplateMetric&&CP.TemplateMetric.length>0){CS=true;break;}}this.hasTotal=CS&&CR;return this.hasTotal;},setCEChartType:function(AS){if(AS&&this.ceChartType===AS){return false;}if(AS===undefined){AS=this.ceChartType;}this.ceChartType=AS;this.isPercentage=As(AS,[7,21,35,14,28,42]);this.isStacked=As(AS,[2,16,21,28,30,9,23,37]);return true;},getUnitsCountInSliceBy:function(){return this.getSliceByAttrsID().length;},getCellHandler:function(CP,AS,CT,CY,CR){var CU=this.model,CV,CQ,CZ,CX,CS;if(CT!==Av){CQ=this.mapFromChartToLDSIndex(CP,AS);CV=CQ.r;CZ=CQ.c;CX=CU.mapChartIndexToGrid(CV,CU.rp);CS=CU.mapChartIndexToGrid(CZ,CU.cp);if(CR){var CW=this.piePartition,Ca,CO=0;if(CY===B8.VERTICAL){Ca=this.totalRows;if(Ca.length>0&&CW.length>0){CO=Ca[0]-CW[0];CX+=CO;}}else{if(CY===B8.HORIZONTAL){Ca=this.totalStartCols;if(Ca.length>0&&CW.length>0){CO=Ca[0]-CW[0];CS+=CO;}}}}return{row:CX+this.gts.col.length,col:CS+CT+this.gts.row.length};}return undefined;},getYAxisInfo:function(Cc,CQ,CY,CV,CU){var CX=this,CP=this.getChartInfo(),CT=this.model,CO=[],CS,Cb=true,CW,AS,CR,Ca=this.onlyMetricNamesOnAxisForGridPie,CZ=this.isMetricNamesOnXAxis;if(this.chartType===B4.GRID||(CD(this.ceChartType))||Ca){Cb=false;}CU=false;if(Cb){if(CP.isABL||CU){if(CY===false){CR=this.getSecondaryMetrics(CV);CW=CT.getMetricNamesFromIndex(CR);AS=CT.getMetricIDsFromIndex(CR);}else{CR=this.getPrimaryMetrics(CV);CW=CT.getMetricNamesFromIndex(CR);AS=CT.getMetricIDsFromIndex(CR);}if(Cc!==undefined&&CQ!==undefined){B0.forEach(CR,function(Cd){CO.push(CX.getCellHandler(Cc,CQ,Cd,CP.dirc,CP.isPie));});}}else{if(CY===false){CR=this.getMetricsOnSecondaryYAxis();}else{CR=this.getMetricsOnPrimaryYAxis();}if(CP.isBubbleOrScatter&&this.bubbleSeriesNum!==undefined){CR=CR.slice(0,this.bubbleSeriesNum);}CW=CT.getMetricNamesFromIndex(CR);AS=CT.getMetricIDsFromIndex(CR);}}else{if(Ca&&!CZ){CW=["Metric Names"];AS=["0"];CR=this.getMetricsOnAngleBy();}else{CW=AJ.call(this,"YAxis","n");AS=AJ.call(this,"YAxis","id");}}return{isMetric:Cb,items:CW,ids:AS,cellHandlers:CO,mtsIdxArr:CR,displayItems:CS};},getXAxisInfo:function(Cc,CQ,CY,CV){var CX=this,CU=this.model,CR=this.chartType,CP=this.getChartInfo(),CO=[],CT,Cb=true,CW,AS,CS,Ca=this.onlyMetricNamesOnAxisForGridPie,CZ=this.isMetricNamesOnXAxis;if((u(this.ceChartType))||CR===B4.GRID||Ca){Cb=false;}if(Cb){if(CP.isABL){if(CY===false){CS=this.getSecondaryMetrics(CV);CW=CU.getMetricNamesFromIndex(CS);AS=CU.getMetricIDsFromIndex(CS);}else{CS=this.getPrimaryMetrics(CV);CW=CU.getMetricNamesFromIndex(CS);AS=CU.getMetricIDsFromIndex(CS);}if(Cc!==undefined&&CQ!==undefined){B0.forEach(CS,function(Cd){CO.push(CX.getCellHandler(Cc,CQ,Cd,CP.dirc,CP.isPie));});}}else{if(CY===false){CS=this.getMetricsOnSecondaryXAxis();}else{CS=this.getMetricsOnPrimaryXAxis();}if(CP.isBubbleOrScatter&&this.bubbleSeriesNum!==undefined){CS=CS.slice(0,this.bubbleSeriesNum);}CW=CU.getMetricNamesFromIndex(CS);AS=CU.getMetricIDsFromIndex(CS);}}else{if(Ca&&CZ){CW=["Metric Names"];AS=["0"];CS=this.getMetricsOnAngleBy();}else{CW=AJ.call(this,"XAxis","n");AS=AJ.call(this,"XAxis","id");}}return{isMetric:Cb,items:CW,ids:AS,cellHandlers:CO,mtsIdxArr:CS,displayItems:CT};},getRowTitleInfo:function(CO){var CQ=this.model,CP=CQ.getRowTitleInfo(),CR=this.rowHeaderCnt,AS=[];if(CR<CP.length){CP.slice(0,CR);}B0.forEach(CP,function(CS){if(CO){AS.push(CS);}else{AS.push(CS.n);}});return{items:AS};},getColTitleInfo:function(CO){var CQ=this.model,CP=CQ.getColTitleInfo(),CR=this.colHeaderCnt,AS=[];if(CR<CP.length){CP.slice(0,CR);}B0.forEach(CP,function(CS){if(CO){AS.push(CS);}else{AS.push(CS.n);}});return{items:AS};},isGrid:function(){return this.chartType===B4.GRID;},isBubble:function(){return this.chartType===B4.BUBBLE;},isScatter:function(){return this.chartType===B4.SCATTER;},isBubbleOrScatter:function(){var AS=this.chartType;return AS===B4.BUBBLE||AS===B4.SCATTER;},clearLayoutInfo:function(){this.widthCache=[];this.heightCache=[];},updateChartInfo:function(){delete this.chartInfo;},supportSort:function(){if(this.chartDirection===BX.EnumABLDirection.VERTICAL){return !(this.dz.Columns.TemplateUnit&&!this.dz.XAxis.TemplateUnit);}else{return !(this.dz.Rows.TemplateUnit&&!this.dz.YAxis.TemplateUnit);}},getChartInfo:function(){var CT=this.chartInfo;if(CT){return CT;}var CR=B4,CS=this.getChartType(),CP=false,CO=this.property,CQ=CO&&CO.readItem(AY.DATA_LABEL),AS=(CO&&CO.readItem(AY.DATA_LABELS_PLACEMENT))||1;if(CS===CR.AREA||CS===CR.BAR||CS===CR.LINE){CP=true;}this.chartInfo={tp:CS,sbtp:this.chartSubType,dirc:this.chartDirection,shape:this.markerShape,ceMarkerShape:this.ceMarkerShape,isABL:CP,isPie:this.isPie,isHistogram:this.isHistogram,isBoxPlot:this.isBoxPlot,isWaterfall:this.isWaterfall,isRing:false,hasSizeBy:this.hasSizeBy(),isCombo:this.enableCombiChart,isBubbleOrScatter:this.isBubbleOrScatter(),isGrid:this.isGrid(),dlTp:CQ,dlPlmt:AS};return this.chartInfo;},getDrillableAttributes:function(){return["Year","Month"];},getDebugMenu:function(){var CO=[],AS=this.enablePartialRendering;if(AS){CO.push({n:"Disable Partial Rendering",did:G.DISABLE_PARTIAL_RENDERING});}else{CO.push({n:"Enable Partial Rendering",did:G.ENABLE_PARTIAL_RENDERING});}if(o.mUseTimer){CO.push({n:"Disable Timer",did:G.DISABLE_TIMER});}else{CO.push({n:"Enable Timer",did:G.ENABLE_TIMER});}if(this.view.enableCETimer){CO.push({n:"Disable CE Timer",did:G.DISABLE_CE_TIMER});}else{CO.push({n:"Enable CE Timer",did:G.ENABLE_CE_TIMER});}CO.push({n:"Print Extremes",did:G.OUTPUT_EXTREMES});CO.push({n:"Print #DataPoints",did:G.OUTPUT_DATA_COUNT});return CO;},getContextMenuData:function(CO){var AS=[];if(CO===BY.GM_ROW_HEADER_TITLE){AS.push({n:"CIRCLE",did:G.CIRCLE});AS.push({n:"SQUARE",did:G.SQUARE});AS.push({n:"PIE",did:G.PIE});AS.push({n:"TICKER",did:G.TICKER});AS.push({n:"RING",did:G.RING});}else{if(CO===BY.GM_COL_HEADER_TITLE){AS.push({n:"Print Extremes",did:G.OUTPUT_EXTREMES});AS.push({n:"Open Legend",did:G.OPEN_LEGEND});AS.push({n:"Switch Combination Chart",did:G.COMBINATION});}}return AS;},getChartType:function(){if(this.chartType===undefined||B4.UNDEFINED){var CU=this.firstRes,AS=CU.dz,CR=AS.XAxis,CO=AS.YAxis,CQ,CS=this.view,CP=CS.getWidgetPropertyValue(AY.SHAPE),CT=CS.getWidgetPropertyValue(AY.VIS_TYPE);if(CR.TemplateMetric&&CO.TemplateMetric){if(this.hasSizeBy()){CQ=B4.BUBBLE;}else{CQ=B4.SCATTER;}}else{if(!CR.TemplateMetric&&!CO.TemplateMetric){CQ=B4.GRID;if((!CR.TemplateUnit||CR.TemplateUnit.length===0)&&(!CO.TemplateUnit||CO.TemplateUnit.length===0)){this.isBlankGrid=true;}}else{if(CP===B2.LINE){CQ=B4.LINE;}else{if(CP===B2.BAR){CQ=B4.BAR;}else{if(CP===B2.AREA){CQ=B4.AREA;}else{if(CP===B2.PIE){CQ=B4.BAR;}else{if(CP===B2.RING){CQ=B4.BAR;}else{CQ=B4.BAR;}}}}}if(CO.TemplateMetric){this.chartDirection=BX.EnumABLDirection.VERTICAL;}else{this.horizontalMode=true;this.chartDirection=BX.EnumABLDirection.HORIZONTAL;}}}this.chartType=CQ;this.isHistogram=(CT===A8.GRAPHMATRIXVERTICALHISTOGRAM);this.isBoxPlot=(CT===A8.GRAPHMATRIXVERTICALBOXPLOT||CT===A8.GRAPHMATRIXHORIZONTALBOXPLOT);this.isWaterfall=(CT===A8.GRAPHMATRIXVERTICALWATERFALL||CT===A8.GRAPHMATRIXHORIZONTALWATERFALL);this.isPie=(CP===B2.PIE||CP===B2.RING);if(this.isPie){this.isBlankGrid=false;}if(CU.eg!==undefined&&!(CS&&CS.excludeData)){this.isBlankGrid=true;}}return this.chartType;},getChartDirection:function(){if(this.chartDirection===undefined){this.getChartType();}return this.chartDirection;},getVisType:function A(){return this.view.getWidgetPropertyValue(AY.VIS_TYPE);},getAggregatedVisType:function Bs(){var CO=this.getVisType(),AS="default";Ap.forEach(h,function(CQ,CP){if(CQ.indexOf(CO)>-1){AS=CP.toString().toLowerCase();return false;}});return AS;},getMetricsOnAxisOfChart:function(CU,Cg,CP,Cb,CZ){var CV,CQ,CS=this.getChartInfo(),Ca=CS.dirc,CW,CT,Ci,CY,Cc,CR,Cd,Cf,CX,AS,CO,Ce,Ch;if(CS.tp===B4.GRID){return[];}if(CP==="y"&&CS.isABL&&Ca===1){return[];}if(CP==="x"&&CS.isABL&&Ca===2){return[];}this.metricsOnAxisCache=this.metricsOnAxisCache||{};this.metricsOnAxisCache[CP]=this.metricsOnAxisCache[CP]||{};Ch=(CP==="y"||CP==="z")?CU:Cg;Ch+="#"+(Cb?1:0)+"#"+(CZ?1:0);Ce=this.metricsOnAxisCache[CP][Ch];if(Ce!==undefined){return Ce;}CV=this.mapFromChartToLDSIndex(CU,Cg);CQ=this.splitPlottingMetrics;CW=this.getMetricsOnXAxis();CT=this.getMetricsOnYAxis();Ci=CW.concat(CT);CY=this.getPrimaryMetrics(true);Cc=this.getSecondaryMetrics(true);CR=this.getSizeByMetrics();Cf=this.inChartLayout||this.getSubChartsLayout();Cd=Math.min(CW.length,CT.length);if(CR.length>0){Cd=Math.min(Cd,CR.length);}if(!CQ){if(CP==="y"){if(CS.isABL){if(Cb===false){Ce=Cc;}else{Ce=CY;}}else{if(CS.tp===B4.BUBBLE||CS.tp===B4.SCATTER){if((this.haveY1&&Cb!==false)||(!this.haveY1&&Cb===false)){Ce=CT.slice(0,Cd);}}}}else{if(CP==="x"){if(CS.isABL){if(Cb===false){Ce=Cc;}else{Ce=CY;}}else{if(CS.tp===B4.BUBBLE||CS.tp===B4.SCATTER){if((this.haveX1&&Cb!==false)||(!this.haveX1&&Cb===false)){Ce=CW.slice(0,Cd);}}}}else{if(CS.tp===B4.BUBBLE||CS.tp===B4.SCATTER){if(CR.length>0){Ce=CR.slice(0,Cd);}}else{Ce=CR;}}}}else{if(CP==="y"){if(CS.isABL&&Ca===2){CX=Cb?"YAxis":"Y2Axis";AS=Cb?CY[0]:Cc[0];if(AS!==undefined){CO=A6.call(this,AS,CX);}if(this.metricsType===AI.MetricsByRow){if(Cb===false){Ce=Cc.length>0?[Cc[CV.inchtRow]]:[];}else{Ce=CY.length>0?[CY[CV.inchtRow]]:[];}}else{if(CZ&&this.metricsType===AI.MetricsByColumn&&CO===Bo.PERCELL){Ce=[Ci[Cg%Ci.length]];}else{if(Cb===false){Ce=Cc;}else{Ce=CY;}}}}else{if(CS.tp===B4.BUBBLE||CS.tp===B4.SCATTER){if((this.haveY1&&Cb!==false)||(!this.haveY1&&Cb===false)){Ce=CT.length>0?[CT[CU%Cf.r]]:[];}}}}else{if(CP==="x"){if(CS.isABL&&Ca===1){CX=Cb?"XAxis":"X2Axis";AS=Cb?CY[0]:Cc[0];if(AS!==undefined){CO=A6.call(this,AS,CX);}if(this.metricsType===AI.MetricsByColumn){if(Cb===false){Ce=Cc.length>0?[Cc[CV.inchtCol]]:[];}else{Ce=CY.length>0?[CY[CV.inchtCol]]:[];}}else{if(CZ&&this.metricsType===AI.MetricsByRow&&CO===Bo.PERCELL){Ce=[Ci[CU%Ci.length]];}else{if(Cb===false){Ce=Cc;}else{Ce=CY;}}}}else{if(CS.tp===B4.BUBBLE||CS.tp===B4.SCATTER){if((this.haveX1&&Cb!==false)||(!this.haveX1&&Cb===false)){Ce=CW.length>0?[CW[Cg%Cf.c]]:[];}}}}else{if((CS.tp===B4.BUBBLE||CS.tp===B4.SCATTER)&&CR.length>0){Ce=CR.length>0?[CR[CU%CR.length]]:[];}else{Ce=CR;}}}}Ce=Ce||[];this.metricsOnAxisCache[CP][Ch]=Ce;return Ce;},getSubChartsLayout:function(){var CU=this.splitPlottingMetrics,CQ=this.getChartInfo(),CP,AS=this.shallWeUseGroupInfo,CO=this.metricsType;if(!CU){return{r:1,c:1};}var CS=B4,CV=this.model.plottingMetricsIndex;if(CQ.tp===CS.BUBBLE||CQ.tp===CS.SCATTER){var CT=this.getMetricsOnXAxis();var CR=this.getMetricsOnYAxis();return{r:CR.length,c:CT.length};}if(CO===AI.MetricsByRow){if(AS&&CQ.isABL){CP=this.getGroupInfo();return{r:CP.length,c:1};}return{r:CV.length,c:1};}if(CO===AI.MetricsByColumn){if(AS&&CQ.isABL){CP=this.getGroupInfo();return{r:1,c:CP.length};}return{r:1,c:CV.length};}B6.visPrint("getSubChartsLayout need to be implemented for this chart type");return{r:1,c:1};},getChartCountInCol:function(){return this.model.cic*this.inChartLayout.r;},getChartCountInRow:function(){return this.model.cir*this.inChartLayout.c;},getSplitPlottingMetrics:function(){var CO=B4;if(this.chartType===CO.GRID&&this.isPie===false){this.splitPlottingMetrics=false;}else{if(this.chartType===CO.GRID&&this.isPie&&this.getMetricsOnAngleBy().length===0){this.splitPlottingMetrics=false;}else{if(this.chartType===CO.GRID&&this.isPie&&BK.call(this,"SliceBy")){this.splitPlottingMetrics=false;}else{var AS=this.metricsType;this.splitPlottingMetrics=(AS===AI.MetricsByRow||AS===AI.MetricsByColumn);}}}return this.splitPlottingMetrics;},reRenderGM:function(){var AS=this.view;if(AS&&AS.excludeData){AS.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:AS.getVisEmptyMsgControls()});return ;}this.widthCache.length=0;this.heightCache.length=0;AS.reRender();},hideContextMenu:function(){var AS=this.view.contextMenu;if(AS!==undefined){AS.hideContextMenu();}},getAxisScaleMode:function(){var CO=this.view.getWidgetPropertyValue(AY.AXIS_SCALE),AS,CP;if(CO){this.axisScale=CO;if(CO===Bo.CUSTOM){CP=this.view.getWidgetPropertyValue(AY.AXIS_SCALE_DATA);if(CP&&CP.length>0){AS=parseInt(CP[0][1],10);if(AS<=Bo.PERCELL){this.axisScale=AS;}else{this.axisScale=Bo.CUSTOM;}}}}else{this.axisScale=Bo.GLOBAL;}return this.axisScale;},getPerCellSetting:function(AS,CO){return{xPerCell:this.isPerCellScaleOn(AS,CO,"x1")||false,x2PerCell:this.isPerCellScaleOn(AS,CO,"x2")||false,y2PerCell:this.isPerCellScaleOn(AS,CO,"y2")||false,yPerCell:this.isPerCellScaleOn(AS,CO,"y1")||false};},getChartUniformAxisTrims:function(AS,CW){var CO,Cb=this.yAxisTrims,CU=this.xAxisTrims,CY=Cb[AS],Ca=CU[CW];var CX=this.y2AxisTrims,CR=this.x2AxisTrims,Cc=CX[AS],CV=CR[CW];CO=B1.call(this,Ca,CY,CV,Cc);var CT=this.caAxisTrims[0],CQ=this.caAxisTrims[1],CZ=CT[CW],CP=CQ[AS],CS;CS=P.call(this,CZ,CP);CO=mstrmojo.hash.copy(CS,CO);return CO;},getChartUniformAxisMargins:function(CQ,CT){var CP=this.yAxisMargins,CS=this.xAxisMargins,AS=CP[CQ],CR=CS[CT],CO;if(!CR){B6.visPrint("cannot find the x-axis margin");}if(!AS){B6.visPrint("cannot find the y-axis margin");}CO=V.call(this,AS,CR);return CO;},getDataAreaPadding:function(Cb,Ch){var Cf=this.axisScale,CV=this.maxDataAreaPaddingCache,CW=Bo,CQ,Cc,Ce,Cd,CS,CO,AS,CX;if(Cf===CW.PERCELL){if(CV&&CV[Cb]&&CV[Cb][Ch]){return CV[Cb][Ch];}else{return null;}}if(Cf===CW.PERROWCOL||Cf===CW.GLOBAL||Cf===CW.CUSTOM){var CY;if(this.dataAreaPaddingGlobalZero){CY={X1:{HighOffset:0,LowOffset:0},Y1:{HighOffset:0,LowOffset:0},X2:{HighOffset:0,LowOffset:0},Y2:{HighOffset:0,LowOffset:0}};}else{if(!CV){return null;}if(Cb>=At){Cb=0;}if(Ch>=k){Ch=0;}CQ=CV.length;Cc=CV[0].length;var Ci,CT;if(this.maxRowPadding===undefined){Ci=this.maxRowPadding=[];for(Ce=0;Ce<CQ;Ce++){CS=CV[Ce][0];for(Cd=0;Cd<Cc;Cd++){if(Cd!==0){CS=Bx(CS,CV[Ce][Cd]);}}Ci.push(CS);}}if(this.maxColPadding===undefined){CT=this.maxColPadding=[];for(Cd=0;Cd<Cc;Cd++){AS=CV[0][Cd];for(Ce=0;Ce<CQ;Ce++){if(Ce!==0){AS=Bx(AS,CV[Ce][Cd]);}}CT.push(AS);}}Ci=this.maxRowPadding;CT=this.maxColPadding;CS=Ci[Cb];AS=CT[Ch];if(Cf===CW.GLOBAL||Cf===CW.CUSTOM){CO=this.inChartLayout;CX=CO.r;for(Ce=Cb%CQ;Ce<CQ;Ce+=CX){CS=Bx(CS,Ci[Ce]);}CX=CO.c;for(Ce=Ch%Cc;Ce<Cc;Ce+=CX){AS=Bx(AS,CT[Ce]);}}CY=CG(CS,AS);}var Cj,Ca,CP,CR,Cg=this.layoutPaddingEchos,CU=[Ch,Ch,Cb,Cb],CZ=["X1","X2","Y1","Y2"];if(Cg){for(Ca=0;Ca<CZ.length;Ca++){Cj=CZ[Ca];CR=CU[Ca];CP=Cg[Cj][CR];if(CP){CY[Cj].HighOffset=Math.max(CY[Cj].HighOffset,(CP.HighOffset||0));CY[Cj].LowOffset=Math.max(CY[Cj].LowOffset,(CP.LowOffset||0));}}}return CY;}},getMetricNameOnAngleBy:function(CO){function CP(CT){var CS,CR,CQ;CS=this.dz;CR=CS.AngleBy||CS.Angle;if(CR){CQ=CR.TemplateMetric;}if(CQ&&CQ.length>CT){return CQ[CT];}return null;}var AS=CP.call(this,CO);if(AS){return AS.n;}return"";},getMetricsOnAngleBy:function(){return Ak.call(this,"AngleBy");},getMetricsOnXAxis:function(){return Ak.call(this,"XAxis");},setGroupInfo:function(AS){var CO=this.view;if(CO.GMController===undefined){CO.GMController=this;}CO.setWidgetPropertyValue(AY.GROUP_INFO,JSON.stringify(AS));},removeGroupInfo:function(){this.setGroupInfo([]);},updateGroupInfo:function(){var CR=this.view,CP=this.getGroupInfo(),CS=[],CO=[Av,Av],AS=this.gts,CQ=this;B0.forEach(CP,function(CT){if(CT[0]!==Av){CO[0]=Aa.call(CQ,CT[0],AS);}if(CT[1]!==Av){CO[1]=Aa.call(CQ,CT[1],AS);}if(CO[0]!==Av||CO[1]!==Av){CS.push(CT);}});CR.setWidgetPropertyValue(AY.GROUP_INFO,JSON.stringify(CS));},hasGroupInfoStored:function(){var CO,AS=this.view.getWidgetPropertyValue(AY.GROUP_INFO);if(AS){AS=AS.replace(/'/g,'"');CO=JSON.parse(AS);}if(CO&&CO.length>0){if(AS.indexOf("idx")>=0){CO=B.call(this,CO);}return{existing:true,gi:CO};}return{existing:false};},getDummyGroupInfo:function(CQ,CX,CO){var CY=this.model;var CV=[],CT,CU=this.getPrimaryMetrics(),CP=this.getSecondaryMetrics(),Cd=(CY&&CY.getMetricIds())||[],Cb=BD(CU,Cd),AS=BD(CP,Cd);if(CQ){var Cc=function(Cf){var Ce;for(Ce=0;Ce<Cf.length;Ce++){if(Cf[Ce]===CQ){Cf.splice(Ce,1);break;}}};Cc(Cb);Cc(AS);if(CO){if(CX){Cb=[CQ].concat(Cb);}else{AS=[CQ].concat(AS);}}else{if(CX){Cb=Cb.concat([CQ]);}else{AS=AS.concat([CQ]);}}}var CS=Cb.length,CR=AS.length,CW=Math.max(CS,CR);for(CT=0;CT<CW;CT++){var Ca,CZ;Ca=(Cb[CT]!==undefined?Cb[CT]:Av);CZ=(AS[CT]!==undefined?AS[CT]:Av);CV.push([Ca,CZ]);}return CV;},getMetricIndexFromID:function(AS){return Aa.call(this,AS,this.gts);},getGroupInfo:function(CQ){var CS=this.view,CO=this.gts,CP=[],CR=this;if(CS.GMController===undefined){CS.GMController=this;}var AS=this.hasGroupInfoStored();if(AS.existing){CP=AS.gi;}else{CP=this.getDummyGroupInfo();CS.setWidgetPropertyValue(AY.GROUP_INFO,JSON.stringify(CP));}if(CQ===true){B0.forEach(CP,function(CU){var CT=CU[0];if(CT!==Av){CU[0]=Aa.call(CR,CT,CO);}CT=CU[1];if(CT!==Av){CU[1]=Aa.call(CR,CT,CO);}});}return CP;},haveMetricAxisTitle:function(CT){var CO=this.haveX1||this.haveX2,CQ=this.haveY1||this.haveY2,CU=this.getChartInfo(),CR=this.model,AS=CR&&CR.dz,CS=AS?AS.XAxis:CR&&CR.getData().dz.XAxis,CP=AS?AS.YAxis:CR&&CR.getData().dz.YAxis;if(CU.isABL){CO=!!CS.TemplateMetric;CQ=!!CP.TemplateMetric;}if(CT==="x"){return CO;}if(CT==="y"){return CQ;}return CQ||CO;},haveAxisTitle:function(AS){var CR=this.haveX1||this.haveX2,CV=this.haveY1||this.haveY2,CP=this.getChartInfo(),CU=CP.dirc,CT,CS,CQ,CO=this.metricsType;if(CP.isABL){CS=this.getMetricsOnYAxis();CT=this.getMetricsOnXAxis();CQ=CT.concat(CS);if(CQ.length===1){if(CT.length===1){CR=false;}else{CV=false;}}else{if(CU===B8.VERTICAL){if(CO===AI.MetricsByRow||CO===AI.MetricsByYAxis){CR=false;}else{if(CO===AI.MetricsByXAxis){if(this.hasAttributesInDropzone("XAxis")){CR=false;}else{CR=true;CV=false;}}else{CR=false;CV=false;}}}else{if(CO===AI.MetricsByColumn||CO===AI.MetricsByXAxis){CV=false;}else{if(CO===AI.MetricsByYAxis){if(this.hasAttributesInDropzone("YAxis")){CV=false;}else{CR=false;CV=true;}}else{CR=false;CV=false;}}}}}if(AS==="x"){return CR;}if(AS==="y"){return CV;}return CV||CR;},haveAttributeAxisTitle:function(CP){var AS=this.haveX1||this.haveX2,CO=this.haveY1||this.haveY2;AS=this.hasAttributesInDropzone("XAxis");CO=this.hasAttributesInDropzone("YAxis");if(CP==="x"){return AS;}if(CP==="y"){return CO;}return CO||AS;},getShapeForOption:function(CS){if(this.view.noData){return[];}var AS=this.metricShapeArr,CO=this.model.colorType,CQ,CT=this.getChartInfo(),CR=[];if(!CT.isABL||!this.enableCombiChart){return[CT.shape];}if(CS!==undefined&&(CO===BJ.ATT_METRICS||CO===BJ.METRICS_ITEM)){var CP;B0.forEach(CS.comb,function(CU){if(CU.tp===4){CP=CU.eid;return false;}});if(CP!==undefined){CQ=this.getMetricIndexFromID(CP);}}if(CS!==undefined&&CS.optLvl===Bh.METRIC){CQ=this.getMetricIndexFromID(CS.key);}if(CQ===undefined||CQ===Av){B0.forEach(AS,function(CU){if(CU!==undefined&&CU>=0){CR.push(CU);}});return CR;}return[AS[CQ]];},getOnTheFlyShapeForMetric:function(CP){var AS=this.getForbiddenShapeForMetric(CP),CO=this.getResolvedShapeForMetric(CP);if(AS.indexOf(CO)>=0){return Aj.LINE;}return CO;},getResolvedShapeForMetric:function(CS){var CP=this.model,CQ=CP&&CP.getMetricIDsFromIndex([CS])[0],CO=this.property.generalProps,CR=CO.metricShapes,AS;if(CR){AS=CR[CQ];}if(AS!==undefined){return AS;}return this.markerShape;},getForbiddenShapeForMetric:function(CR){var CU=this,CP=[],CW,CV=[],AS=this.getChartInfo(),CO=this.getPrimaryMetrics(false),CQ=this.getSecondaryMetrics(false);if(AS.isABL){if(CQ.indexOf(CR)>=0){CW=this.hasGroupInfoStored();if(CW.existing){var CT=this.getGroupInfo(true);CT.forEach(function(CY){if(CY[1]===CR&&CY[0]>=0){CP.push(CY[0]);}});}else{CP=CO;}}}var CX=false,CS=false;CP.forEach(function(CY){var CZ=CU.getResolvedShapeForMetric(CY);if(CZ===Aj.BAR){CX=true;}else{if(CZ===Aj.AREA){CS=true;}}});if(CX){CV.push(Aj.BAR);}if(CS){CV.push(Aj.AREA);}return CV;},getPrimaryMetrics:function(AS){if(!this.horizontalMode){return this.getMetricsOnPrimaryYAxis(AS);}return this.getMetricsOnPrimaryXAxis(AS);},getSecondaryMetrics:function(AS){if(!this.horizontalMode){return this.getMetricsOnSecondaryYAxis(AS);}return this.getMetricsOnSecondaryXAxis(AS);},getMetricsOnPrimaryXAxis:function(CO){var AS=Bw.call(this,0,CO,true,"x");if(AS){return AS;}var CP=this.getMetricsOnXAxis();return AC.call(this,CP,true,CO);},getMetricsOnSecondaryXAxis:function(CO){var AS=Bw.call(this,1,CO,true,"x");if(AS){return AS;}var CP=this.getMetricsOnXAxis();return AC.call(this,CP,false,CO);},getMetricsOnPrimaryYAxis:function(CO){var AS=Bw.call(this,0,CO,true,"y");if(AS){return AS;}var CP=this.getMetricsOnYAxis();return AC.call(this,CP,true,CO);},getMetricsOnSecondaryYAxis:function(CO){var AS=Bw.call(this,1,CO,true,"y");if(AS){return AS;}var CP=this.getMetricsOnYAxis();return AC.call(this,CP,false,CO);},getMetricsOnYAxis:function(){return Ak.call(this,"YAxis");},getMetricsOnTooltip:function(){return Ak.call(this,"AdditionalMetrics");},getSliceByAttrsID:function(){var CO=this.getSliceByAttributes(),AS=[];B0.forEach(CO,function(CP){AS.push(CP.id);});return AS;},getBreakByAttrsID:function(){var CO=this.getBreakByAttributes(),AS=[];B0.forEach(CO,function(CP){AS.push(CP.id);});return AS;},getColorByAttrsID:function(){var CQ,CO=[],CP,AS,CR;CQ=this.colorByInfo;if(CQ.tp===BJ.ATT||CQ.tp===BJ.ATT_METRICS){CR=CQ.atts;AS=CR.length;for(CP=0;CP<AS;CP++){CO.push(CR[CP].id);}return CO;}return[];},getRowColorAttrsIndex:function(){return A2.call(this,"row");},getColColorAttrsIndex:function(){return A2.call(this,"col");},getColorByUnitIds:function(Cb){var CS,CP,CV,CW,CX=[],Ca,CU,CR,CT=[],CZ=this,CY=false,CO=false;if(Cb===BX.EnumABLDirection.VERTICAL){CR=["Rows","YAxis","Columns","XAxis"];}else{CR=["Columns","XAxis","Rows","YAxis"];}CR.forEach(function(Cc){CU=AJ.call(CZ,Cc,"id");B0.forEach(CU,function(Cd){CT.push({id:Cd,zone:Cc});});if((Cc==="Rows"||Cc==="Columns")&&CZ.dz[Cc].MetricNames!==undefined){CT.push({id:-1,zone:Cc});}});CW=this.colorByInfo;if(CW.tp===BJ.METRICS_ITEM||CW.tp===BJ.ATT_METRICS){CY=true;}if(CW.tp===BJ.ATT||CW.tp===BJ.ATT_METRICS||CW.tp===BJ.METRICS_ITEM){CV=CW.atts;CP=(CV&&CV.length)||0;B0.forEach(CT,function(Cc){if(Cc.id===-1&&CY){CX.push({id:-1,unique:false,zone:Cc.zone,es:CZ.getMetricIdsOfABLChart(Cb)});CO=true;return ;}for(CS=0;CS<CP;CS++){Ca=CV[CS];if(Cc.id===Ca.id){CX.push({id:Ca.id,unique:false,zone:Cc.zone,es:CZ.getElementsOfAttr(Ca)});break;}}});if(!CO&&CY){CX.push({id:-1,unique:true,es:this.getMetricIdsOfABLChart(Cb)});}var AS=[],CQ;for(CS=0,CQ=CX.length;CS<CQ;CS++){AS.push(CX[CS].id);}for(CS=0;CS<CP;CS++){Ca=CV[CS];if(AS.indexOf(Ca.id)<0){CX.push({id:Ca.id,unique:true,es:this.getElementsOfAttr(Ca)});}}}return CX;},getElementsOfAttr:function(AS){var CO=this.gts,CT=CO.row,CP=CO.col,CR=(AS.axis==="row"?CT:CP),CQ=AS.uidx,CS=[];B0.forEach(CR[CQ].es,function(CU){CS.push(CU.id);});return CS;},getMetricIdsOfABLChart:function(CP){var CR,CS,CQ=[],CT,CO=this.dz,AS;if(CP===BX.EnumABLDirection.VERTICAL){CT="YAxis";}else{CT="XAxis";}AS=CO[CT].TemplateMetric;if(AS&&AS.length>0){CS=AS.length;for(CR=0;CR<CS;CR++){CQ.push(AS[CR].id);}}return CQ;},splitPiesInGraphCellForABL:function(){if(this.chartType===5){return true;}return this.metricsType!==AI.MetricsBySlice;},getSizeByScaleType:function(AS){var CO,CQ="SizeBy",CP;CO=this.getSizeByMetrics();CP=CO[AS];return A6.call(this,CP,CQ);},getSizeByMetrics:function(){var CT,CO,CU,CP,AS,CV,CR,CS="SizeBy",CQ=this.metricsOnDropZone[CS];if(!CQ){AS=this.gts;CV=this.dz[CS];CR=this.chartType;CT=CV.TemplateMetric;CQ=[];if(CT&&CT.length>0){CP=this.getMetricsOnYAxis();if(L.call(this,CP)){CU=Math.min(CT.length,CP.length);}else{if((CR===B4.BUBBLE)||(CR===B4.SCATTER)){CU=CT.length;}else{CU=1;}}for(CO=0;CO<CU;CO++){CQ.push(Aa.call(this,CT[CO].id,AS));}}this.metricsOnDropZone[CS]=CQ;}return CQ;},getColorByMetrics:function(){return Ak.call(this,"ColorBy");},getAttributesOnDropZone:function(AS,CO){return AJ.call(this,AS,CO);},getGMHeaderCount:function(CO){var AS=this.dz;return Bz.call(this,AS[CO]);},setupDualAxis:function(){var CU,CQ,CT=this.getChartInfo(),CP,CS,CR=this;this.haveX1=false;this.haveX2=false;this.haveY1=false;this.haveY2=false;this.drawX1Numeric=false;this.drawX2Numeric=false;this.drawY1Numeric=false;this.drawY2Numeric=false;if(CT.isABL){if(this.horizontalMode){CQ=this.getYAxisInfo();if(CQ.items.length>0){this.haveY1=true;}if(this.clusteredBarSpecialCase){this.haveY1=true;}}else{CU=this.getXAxisInfo();CP=this.getMetricsOnPrimaryYAxis();CS=this.getMetricsOnSecondaryYAxis();if(CU.items.length>0){this.haveX1=true;}if(this.clusteredBarSpecialCase){this.haveX1=true;}}}var CO=function(CW,CV){if(CW.length>0){if(CV==="XAxis"){CR.haveX1=true;}else{if(CV==="XAxis2"){CR.haveX2=true;}else{if(CV==="YAxis"){CR.haveY1=true;}else{if(CV==="YAxis2"){CR.haveY2=true;}}}}B0.forEach(CW,function(CX){if(CX===undefined||CX<0){return ;}if(A6.call(CR,CX,CV)!==Bo.PERCELL){if(CV==="XAxis"){CR.drawX1Numeric=true;}else{if(CV==="XAxis2"){CR.drawX2Numeric=true;}else{if(CV==="YAxis"){CR.drawY1Numeric=true;}else{if(CV==="YAxis2"){CR.drawY2Numeric=true;}}}}}else{if(CV==="XAxis"){CR.drawX1Numeric=CR.drawX1Numeric||CR.getChartCountInCol()===1;}else{if(CV==="XAxis2"){CR.drawX2Numeric=CR.drawX2Numeric||CR.getChartCountInCol()===1;}else{if(CV==="YAxis"){CR.drawY1Numeric=CR.drawY1Numeric||CR.getChartCountInRow()===1;}else{if(CV==="YAxis2"){CR.drawY2Numeric=CR.drawY2Numeric||CR.getChartCountInRow()===1;}}}}}});}};CO(this.getMetricsOnPrimaryXAxis(),"XAxis");CO(this.getMetricsOnSecondaryXAxis(),"XAxis2");CO(this.getMetricsOnPrimaryYAxis(),"YAxis");CO(this.getMetricsOnSecondaryYAxis(),"YAxis2");if(CR.clusteredBarSpecialCase){if(CT.dirc===CC.VERTICAL){this.drawX1Numeric=true;}else{this.drawY1Numeric=true;}}if(this.isBubbleOrScatter()){var AS=this.axisLayout;this.haveY1=(AS&BA)!==0;this.haveY2=(AS&Bi)!==0;this.haveX1=(AS&Bu)!==0;this.haveX2=(AS&Q)!==0;}if(this.onlyMetricNamesOnAxisForGridPie){if(this.isMetricNamesOnXAxis){this.haveX1=true;}else{this.haveY1=true;}}if(CT.isGrid&&CT.isPie){if(this.isMetricNamesOnRows){this.haveY1=true;}}CQ=this.getYAxisInfo();if(CT.isGrid&&CQ.items.length>0&&CQ.isMetric===false){this.haveY1=true;}},setupAxisLayout:function(){var Ce,CS=0,Cj=false,CX=false,CZ=false,Cb=false,Ca=false,CQ=false,CO=false,AS=false,CP=false,CY=false,CW=this.chartType,Cm=this.chartDirection,CU=this.metricsType,CT=this.getXAxisInfo(),Cd=this.getXAxisInfo(undefined,undefined,false,undefined),Cg=this.getYAxisInfo(),Ck=this.getYAxisInfo(undefined,undefined,false,undefined),Cl=this.getMetricsOnAngleBy(),Cf=CW===B4.AREA||CW===B4.BAR||CW===B4.LINE,Ch=this.isPie,CR=this.isGrid(),Cn=this.isBubbleOrScatter();if(Cf){if(Cm===CC.VERTICAL){Ce=Cg.items.length;if(Ck&&Ck.items){CS=Ck.items.length;}if(Ce>0&&CS>0){CX=true;}if(CX){if(CU===AI.MetricsByRow){CZ=true;}else{CZ=true;AS=true;}}else{if((Ce<=1&&CS<=1)||CU===AI.MetricsByRow){CZ=true;}else{if(CU===AI.MetricsByColumn){Cb=true;Ca=true;}else{if(CU===AI.MetricsByXAxis||CU===AI.MetricsByBreakBy){if(CT.items.length===0){if(this.chartSubType!==BN.STACKED&&this.chartSubType!==BN.PERCENT){CQ=true;}}else{CZ=true;AS=true;}}}}}}else{Ce=CT.items.length;if(Cd&&Cd.items){CS=Cd.items.length;}if(Ce>0&&CS>0){Cj=true;}if(Cj){if(CU===AI.MetricsByColumn){Cb=true;}else{Cb=true;CP=true;}}else{if((Ce<=1&&CS<=1)||CU===AI.MetricsByColumn){Cb=true;}else{if(CU===AI.MetricsByRow){if(BG.call(this)){CY=true;}CZ=true;}else{if(CU===AI.MetricsByYAxis||CU===AI.MetricsByBreakBy){if(Cg.items.length===0){CO=true;}else{Cb=true;CP=true;}}}}}}}else{if(CR){if(Ch&&Cl.length>1){if(CU===AI.MetricsByRow){CZ=true;Cb=false;this.haveY1=true;}if(CU===AI.MetricsByColumn){CZ=false;Cb=true;Ca=true;}}}else{if(Cn){if(CU===AI.MetricsByRow||CU===AI.MetricsByColumn){CZ=true;Cb=true;}else{CZ=true;Cb=true;AS=true;CP=true;}}}}var Ci=this.dz.XAxis.TemplateUnit;if(Ci&&Ci.length>0){Cb=true;}var Cc=this.view.getWidgetPropertyValue(BL.Y_AXIS_TITLE_SHOW),CV=this.view.getWidgetPropertyValue(BL.X_AXIS_TITLE_SHOW);if(Cc===undefined){Cc=this.view.getWidgetPropertyDefaultValue(BL.Y_AXIS_TITLE_SHOW,{isMetric:this.yIsNumeric});}if(CV===undefined){CV=this.view.getWidgetPropertyDefaultValue(BL.X_AXIS_TITLE_SHOW,{isMetric:this.xIsNumeric});}if(!Cc){CZ=false;}if(!CV){if(Cb&&!Ca){Cb=false;}}this.isXDualAxis=Cj;this.isYDualAxis=CX;this.hasHeaderInY=CZ;this.hasFooterInX=Cb;this.isFooterAbove=Ca;this.metricNameInX=CQ;this.metricNameInY=CO;this.combineMetricNameInX=CP;this.combineMetricNameInY=AS;this.metricNamesOnRowMetricsOnXAxis=CY;this.metricNamesOnColumnMetricsOnYAxis=X.call(this);},getAxisLayout4CE:function(CU,CT){var CW=0,CX,CV,CQ;var CP,CY,AS,CS;if(CU!==undefined&&CT!==undefined){CQ=this.chartAxisLayouts=this.chartAxisLayouts||{x:[],y:[]};CX=CQ.y;CV=CQ.x;var CR=0,CO=0;if(CV[CT]===undefined){CP=this.getXAxisInfo(CU,CT,true,false,true);CY=this.getXAxisInfo(CU,CT,false,false,true);if(CP.items.length>0){CR|=Bu;}if(CY.items.length>0){CR|=Q;}CV[CT]=CR;}else{CR=CV[CT];}if(CX[CU]===undefined){AS=this.getYAxisInfo(CU,CT,true,false,true);CS=this.getYAxisInfo(CU,CT,false,false,true);if(AS.items.length>0){CO|=BA;}if(CS.items.length>0){CO|=Bi;}CX[CU]=CO;}else{CO=CX[CU];}CW|=CR;CW|=CO;}else{CP=this.getXAxisInfo(CU,CT,true,false);CY=this.getXAxisInfo(CU,CT,false,false);AS=this.getYAxisInfo(CU,CT,true,false);CS=this.getYAxisInfo(CU,CT,false,false);if(CP.items.length>0){CW|=Bu;}if(AS.items.length>0){CW|=BA;}if(CS.items.length>0){CW|=Bi;}if(CY.items.length>0){CW|=Q;}}return CW;},getYAxisWidth4FitWindow:function(CS){var CP,CT,AS,CQ=0,CO=this.getChartCountInCol(),CR=this.getControllerAPI(M.GET_CHART_HEIGHT);CO=Math.min(CO,At);for(CP=0;CP<CO;CP++){CT=W.call(this,CP,0);AS=this.getSingleYAxisWidth(CR(CP,0),CT,CP,0,CS);CQ=Math.max(CQ,AS);}return CQ;},getYAxisWidth4FitContent:function(AS){if(AS){return this.getNumericYAxisWidth(true);}return this.getCategoricalYAxisWidth();},getYAxisWidth:function(){if(this.metricNamesOnRowMetricsOnXAxis){var CR=this.getXAxisInfo(0,0),CS=[CR.items],CO=this.view.HTML5PROPS.RH,CQ=this.view.layouter;var CT=CQ.getRowHeadersWidth(CS,CO);if(CT&&CT.length>0){this.haveY1=true;return CT[0];}}var CU,CP=0,CV=this.view.getWidgetPropertyValue(AY.FIT_TO),AS=this.getYAxisInfo(undefined,undefined,true,false);if(this.isBubbleOrScatter()){CU=this.axisLayout;if((CU&BA)===0){return 0;}}if(AS.items.length===0&&!this.metricNameInY){if(this.hasHeaderInY&&!this.haveY2){return this.view.textHeightInY+2*y;}return 0;}if(!AS.isMetric||this.drawY1Numeric){if(CV===AQ.NONE){CP=this.getYAxisWidth4FitContent(AS.isMetric);}else{CP=this.getYAxisWidth4FitWindow(true);}}if(this.hasHeaderInY&&this.haveY1){CP+=this.view.textHeightInY+2*y;}return CP;},getYAxis2Width:function(){var AS,CP,CO=this.getYAxisInfo(undefined,undefined,false,true);if(this.isBubbleOrScatter()){AS=this.axisLayout;if((AS&Bi)===0){return 0;}}if(CO.items.length===0){if(this.hasHeaderInY&&!this.haveY1){CP=this.view.textHeightInY+2*y;return CP;}return 0;}if(!CO.isMetric){return 0;}CP=this.drawY2Numeric?this.getNumericYAxisWidth(false):0;if(this.hasHeaderInY){CP+=this.view.textHeightInY+2*y;}return CP;},getCategoricalYAxisWidth:function(){var CO,CR,CP,CQ=0,AS=this.getChartCountInCol();for(CO=0;CO<AS;CO++){CR=this.getYAxisLabels(CO);CP=this.estimateYAxisSize(CR).width;CQ=Math.max(CQ,CP);}return CQ;},getNumericYAxisWidth:function(CS){var AS=-1,CQ=this.getControllerAPI(M.GET_CHART_HEIGHT),CP,CO,CR;var CU=this.getChartCountInCol();for(CP=0;CP<CU;CP++){var CT=W.call(this,CP,0);CO=this.getSingleYAxisWidth(CQ(CP,0),CT,CP,0,CS);if(CO>AS){AS=CO;}}return AS;},getXAxisHeight:function(CP){var CO,AS,CQ=this.getXAxisInfo();if(this.isBubbleOrScatter()){CO=this.axisLayout;if((CO&Bu)===0){return 0;}}if(CQ.items.length===0&&!this.metricNameInX){if(this.metricNameInX&&!this.haveX2){return this.view.textHeightInX+y*2;}return 0;}if(CQ.isMetric){AS=this.drawX1Numeric?this.getNumericXAxisHeight(CP,true):0;if(this.hasFooterInX&&!this.isFooterAbove){AS+=this.view.textHeightInX+2*y;}}else{AS=this.getCategoricalXAxisHeight(CP);if(this.hasFooterInX){AS+=this.view.textHeightInX+2*y;}}return AS;},getXAxis2Height:function(CQ){var CO,CP=this.view,CR=CP.rowHeaderMaxHeightWithoutX2;if(!this.haveX2){return CR;}if(this.isBubbleOrScatter()){CO=this.axisLayout;if((CO&Q)===0){return CR;}}var AS=this.drawX2Numeric?this.getNumericXAxisHeight(CQ,false):0;if(this.hasFooterInX&&!this.isFooterAbove){AS+=this.view.textHeightInX+2*y;}return Math.max(CR,AS);},getCategoricalXAxisHeight:function(AS){return this.getNumericXAxisHeight(AS,true);},getNumericXAxisHeight:function(CU,CT){var CO=0,AS=this.getControllerAPI(M.GET_CHART_WIDTH),CR,CQ,CV;var CS=this.getChartCountInRow(),CP=this.view.getWidgetPropertyValue(AY.SCALE_CHART_WIDTH);CS=Math.min(CS,k);for(CR=0;CR<CS;CR++){CQ=W.call(this,0,CR);CV=this.getSingleXAxisHeight(AS(0,CR)*CP,CQ,0,CR,CU,CT);CO=Math.max(CO,CV);}return CO;},getSingleYAxisWidth:function(CR,CP,AS,CT,CU){var CS=this.getAxisChartInstance(CP,AS,CT,"y",CU,0,CR,true),CO;if(CS===null){return 0;}CO=CS.GetUniformYAxisWidth(CR,-1,CU);var CQ=BE.call(this,false,CU);CS.echoCondenseStatus(CQ,AS);var CV=CF.call(this,false,CU);CS.echoLayoutPaddings(CV,AS);return CO;},getSingleXAxisHeight:function(CV,CO,AS,CR,CW,CS){var CQ=this.getAxisChartInstance(CO,AS,CR,"x",CS,CV,0,true),CU;if(CQ===null){return 0;}CU=CQ.GetUniformXAxisHeight(CV,-1,CS);var CP=BE.call(this,true,CS);CQ.echoCondenseStatus(CP,CR);var CT=CF.call(this,true,CS);CQ.echoLayoutPaddings(CT,CR);return CU;},getCategoricalColWidth:function(CS){var CR=this.getXAxisLabels(CS),CO=this.xLabelPlacement,AS=this.view.GMW,CP=this.view.layouter.minWidths,CQ;CQ=this.estimateXAxisSize(CR,CO,AS).width;if(CP&&CP[CS]){CQ=Math.max(CQ,CP[CS]);}return CQ;},checkBarColumnsForAxisPadding:function t(CP,AS){var CT=this.getChartInfo(),CS=this.hasBarChart,CQ=this.isCombo,CO=CS&&(CQ||CT.sbtp===BX.EnumSubtype.AUTO||CT.sbtp===BX.EnumSubtype.CLUSTERED);var CR=-1;if(CS){var CU=W.call(this,CP,AS);CR=CU.getGroupCount();if(CO){CR*=CU.innerGetSeriesCount();}CR+=0.5;}return CR;},getCategoricalRowHeight:function(CQ){var CR=this.getYAxisLabels(CQ);var CP=this.estimateYAxisSize(CR).height;var CO=this.checkBarColumnsForAxisPadding(CQ,0);if(CO>0){CP+=2*Math.round(CP/(4*CO-2));}var AS=this.view.layouter.minHeights;if(AS&&AS[CQ]){CP=Math.max(CP,AS[CQ]);}return CP;},getColHeaderSummary:function(CQ){if(this.colHdrSmrs[CQ]){return this.colHdrSmrs[CQ];}var CS,CW,CR,AS,CP,CX,CY,CT=this.model,CU=this.getChartCountInRow(),CV=[];for(CS=0;CS<CU;CS++){CX=this.mapFromChartToLDSIndex(CQ,CS).c;CY=CT.mapChartIndexToGrid(CX,CT.cp);CR=CT.getColHeaderObj(CY,CQ);AS=CT.headerInfoToProp(1,CR,"n&id");CP=AS[0].id;CW=CT.getColTitleInfo()[CR.tui].id;CV.push(CP);}var CO={unit:CW,elements:CV};this.colHdrSmrs.push(CO);return CO;},getRowHeaderSummary:function(CP){if(this.rwHdrSmrs[CP]){return this.rwHdrSmrs[CP];}var CR,CQ,CO,CY,AS,CT,CW,CS=this.model,CV=this.getChartCountInCol(),CU=[];for(CR=0;CR<CV;CR++){CT=this.mapFromChartToLDSIndex(CR,CP).r;CW=CS.mapChartIndexToGrid(CT,CS.rp);CQ=CS.getRowHeaderObj(CW,CP);AS=CS.headerInfoToProp(0,CQ,"n&id");CO=AS[0].id;CY=CS.getRowTitleInfo()[CQ.tui].id;CU.push(CO);}var CX={unit:CY,elements:CU};this.rwHdrSmrs.push(CX);return CX;},getRowHeadersByCell:function AM(CX){var CZ=this.model,Cc=CZ.getMetricCount(),CQ=CZ.getUnitAttributesCountOnRow(),CU=CZ.getUnitAttributesCountOnCol(),CT=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],CS,CV,Cb,CO,CW,CY,Ca,CR,CP,AS=[];if(CX){CV=CX.row-this.gts.col.length;Cb=CX.col-this.gts.row.length;CO=Cb%Cc;CW=CZ.getMetricProp(undefined);CR=Ap.copy(CW[CO],{});CR.gvsRI=CV;CR.gvsCI=Cb;}else{return{metricObj:undefined,headers:undefined};}if(this.horizontalMode){CR.axis=C.DssAxisRows;if(this.specialSortable){CR.axis=C.DssAxisColumns;}for(CS=0;CS<CU;CS++){CY=Y.call(this,CS);if(this.specialSortable&&CY.dropzones.indexOf("BreakBy")>=0){continue;}Ca=Ap.copyProps(CT,CZ.getColHeaderObj(Cb,CS),{});CP=CZ.headerInfoToProp(1,Ca,"n&id");Ap.copy(CP[0],Ca);AS.push(Ca);}}else{CR.axis=C.DssAxisColumns;if(this.specialSortable){CR.axis=C.DssAxisRows;}for(CS=0;CS<CQ;CS++){CY=c.call(this,CS);if(this.specialSortable&&CY.dropzones.indexOf("BreakBy")>=0){continue;}Ca=Ap.copyProps(CT,CZ.getRowHeaderObj(CV,CS),{});CP=CZ.headerInfoToProp(0,Ca,"n&id");Ap.copy(CP[0],Ca);AS.push(Ca);}}return{metricObj:CR,headers:AS};},getMetricSortInfo:function CK(){var Cd=this.firstRes,Cb=Cd.gsi,CO=Cb.sorts[0],CU=Cb.sorts[1],CR=CO.concat(CU),CX=0,AS=1,CW=4,Ca=4,CV,Cc,CT,CQ,CP,CS,CZ,CY={};if(this.metricSortInfo){return this.metricSortInfo;}for(CV=0;CV<CR.length;CV++){CT=CR[CV];Cc=CT.key.split("!");CQ=parseInt(Cc[CX]);CP=Cc[AS];CS=Cc[CW];if(CQ===Ca){CZ=CS!==""?CS.split(""):[];CY={metricId:CP,elements:CZ,order:CT.isAsc};}}this.metricSortInfo=CY;return CY;},updateSortIndex:function S(AS){var CP=this.view,CO=CP.getWidgetPropertyValue(AY.SORT_INDEX);if(CO&&(CO.row!==AS.row||CO.col!==AS.col)){CP.setWidgetPropertyValue(AY.SORT_INDEX,AS);}},getUpdateMetricSortAction:function N(CQ,AS,CP){var CS,CO,CR=this.getChartInfo();this.sortingMetric=true;CO=this.getMetricSortDefinition(CQ,AS);CS=this.getSortActions(CO);if(CR.isABL&&CP){this.fakeSortActionsStackTotal(CS);}return{act:"sortGM",nodeKey:this.view.k,subActions:CS,partialUpdate:{nodes:[this.view.k]}};},getControllerAPI:function Bg(CO){var Ck=this,Ca=this.view,CW=Ck.getChartInfo(),CQ=Ck.model;var AS=function(Cp,Co){var Cs,Cm,Cq=0;if(Co instanceof Array){Cs=Co[0];Cm=Co[1];}else{Cs=+Co;Cm=+Co+1;}var Cr=function(){var Ct;for(Ct=Cs;Ct<Cm;Ct++){if(Ck.widthCache[Ct]===undefined){return false;}}return true;};var Cn;if(Ck.manager.isAsync&&Cr()===false){for(Cn=Cs;Cn<Cm;Cn++){if(Ck.widthCache[Cn]===undefined){Ck.manager.queryColWidth(Cn);Cq+=Ck.manager.chartW||Ck.manager.master.chartW;}else{Cq+=Ck.widthCache[Cn];}}}else{for(Cn=Cs;Cn<Cm;Cn++){if(Ck.widthCache[Cn]===undefined){Ck.widthCache[Cn]=Ck.getCategoricalColWidth(Cn);}Cq+=Ck.widthCache[Cn];}}return Cq;};var CT=function(Cp,Co){var Cs,Cm,Cq=0;if(Cp instanceof Array){Cs=Cp[0];Cm=Cp[1];}else{Cs=+Cp;Cm=+Cp+1;}var Cr=function(){var Ct;for(Ct=Cs;Ct<Cm;Ct++){if(Ck.heightCache[Ct]===undefined){return false;}}return true;};var Cn;if(Ck.manager.isAsync&&Cr()===false){for(Cn=Cs;Cn<Cm;Cn++){if(Ck.heightCache[Cn]===undefined){Ck.manager.queryRowHeight(Cn);Cq+=Ck.manager.chartH||Ck.manager.master.chartH;}else{Cq+=Ck.heightCache[Cn];}}}else{for(Cn=Cs;Cn<Cm;Cn++){if(Ck.heightCache[Cn]===undefined){Ck.heightCache[Cn]=Ck.getCategoricalRowHeight(Cn);}Cq+=Ck.heightCache[Cn];}}return Cq;};var Cg=function(Cq,Cp){if(Cp===undefined){Cp=0;}var Cr=Ck.mapFromChartToLDSIndex(Cq,0).r,Ct=CQ.mapChartIndexToGrid(Cr,CQ.rp),Cm=CQ.getRowHeaderObj(Ct,Cp),Cu=CQ.mapGridIndexToChart(Cm.o,CQ.rp),Cs=CQ.mapGridIndexToChart(Cm.o+Cm.rs-1,CQ.rp),Cn=Cs-Cu+1,Co=Ck.inChartLayout.r;Cu*=Co;Cs=Cu+Cn*Co-1;return[Cu,Cs];};var Cb=function(Cq,Cp){if(Cp===undefined){Cp=0;}var Cs=Ck.mapFromChartToLDSIndex(0,Cq).c,Co=CQ.mapChartIndexToGrid(Cs,CQ.cp),Cm=CQ.getColHeaderObj(Co,Cp),Cu=CQ.mapGridIndexToChart(Cm.o,CQ.cp),Cr=CQ.mapGridIndexToChart(Cm.o+Cm.cs-1,CQ.cp),Cn=Cr-Cu+1,Ct=Ck.inChartLayout.c;Cu*=Ct;Cr=Cu+Cn*Ct-1;return[Cu,Cr];};var Cj=function(Cv,C9,C1,C6,Cs,Cr,Cm,Cu,Cw){var Ct,Cp,C0,C5,Cx,Cq,C4,C8,Co,C3,Cz=Ck.view,C7=Cz.getWidgetPropertyValue(BL.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cy=Cz.getWidgetPropertyValue(BL.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cn=Cz.getWidgetPropertyValue(BL.ROW_VALUES_SHOW);Ct=Ck.mapFromChartToLDSIndex(Cs,Cr).r;Cp=CQ.mapChartIndexToGrid(Ct,CQ.rp);C0=CQ.getRowHeaderObj(Cp,Cr);Co=C0.fid;C4=CQ.headerInfoToProp(0,C0,"n&id&bftp");C5=C4[0].n;Cx=C4[0].id;Cq=C4[0].bftp;C8=C0.tui;C3=CQ.getRowTitleInfo()[C8];var C2=document.createElement("div");C2.setAttribute("row",Cs);C2.setAttribute("col","0");C2.setAttribute("rowSpan",Cm);C2.setAttribute("colSpan",Cu);C2.setAttribute("depth",Cr);C2.setAttribute("class",Cw);C2.setAttribute("type",BY.GM_ROW_HEADER);C2.setAttribute("text",o.replaceSpecialChars(C5));C2.style.width=Cv+"px";C2.style.height=C9+"px";C2.style.top=C1+"px";C2.style.left=C6+"px";if(Cn){if(Cq){o.fillImageInDiv(C2,Cq,C5);}else{o.fillTextInDiv(C2,{objType:d.ROW_HEADER_TEXT},C5,Cv,C9,false,Ck.rhStyles,C7,Cy);}}o.fillBackgroundDiv(C2);C2.selectionInfo=[[{eid:Cx,v:C5,tid:C3.id,n:C3.n,isRowAttribute:true,tui:C8}]];C2.identity=new mstrmojo.gm.HeaderCellIdentity({objType:d.ROW_HEADER,eid:Cx,v:C5,tid:C3.id,n:C3.n,tui:C8,fid:Co,isRowAttribute:true,o:C0.o,dpt:C0.dpt,dei:C0.dei,at:C0.at});C2.bftp=Cq;return C2;};var CU=function(Cm,Cu,Cp,Cw,Co){Cm.style.width=Cu+"px";Cm.style.height=Cp+"px";Cm.style.top=Cw+"px";Cm.style.left=Co+"px";var Ct=Ck.view,Cv=o.restoreSpecialChars(Cm.getAttribute("text")),Cn=Ct.getWidgetPropertyValue(BL.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cq=Ct.getWidgetPropertyValue(BL.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cr=Ct.getWidgetPropertyValue(BL.COLUMN_VALUES_SHOW),Cs=Cm.bftp;Cm.innerHTML="";if(Cr){if(Cs){o.fillImageInDiv(Cm,Cs,Cv);}else{o.fillTextInDiv(Cm,{objType:d.COL_HEADER_TEXT},Cv,Cu,Cp,false,Ck.chStyles,Cn,Cq);}}o.fillBackgroundDiv(Cm);};var CV=function(Cm,Cu,Cp,Cw,Co){Cm.style.width=Cu+"px";Cm.style.height=Cp+"px";Cm.style.top=Cw+"px";Cm.style.left=Co+"px";var Ct=Ck.view,Cv=o.restoreSpecialChars(Cm.getAttribute("text")),Cn=Ct.getWidgetPropertyValue(BL.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cq=Ct.getWidgetPropertyValue(BL.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cr=Ct.getWidgetPropertyValue(BL.ROW_VALUES_SHOW),Cs=Cm.bftp;Cm.innerHTML="";if(Cr){if(Cs){o.fillImageInDiv(Cm,Cs,Cv);}else{o.fillTextInDiv(Cm,{objType:d.ROW_HEADER_TEXT},Cv,Cu,Cp,false,Ck.rhStyles,Cn,Cq);}}o.fillBackgroundDiv(Cm);};var Ci=function(Cv,C9,C1,C6,Ct,Cr,Cm,Cu,Cw){var Cs,Cp,C0,C4,C5,Cx,Cq,C8,C3,Co,Cz=Ck.view,C7=Cz.getWidgetPropertyValue(BL.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cy=Cz.getWidgetPropertyValue(BL.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cn=Cz.getWidgetPropertyValue(BL.COLUMN_VALUES_SHOW);Cs=Ck.mapFromChartToLDSIndex(Ct,Cr).c;Cp=CQ.mapChartIndexToGrid(Cs,CQ.cp);C0=CQ.getColHeaderObj(Cp,Ct);Co=C0.fid;C4=CQ.headerInfoToProp(1,C0,"n&id&bftp");C5=C4[0].n;Cx=C4[0].id;Cq=C4[0].bftp;C8=C0.tui;C3=CQ.getColTitleInfo()[C8];var C2=document.createElement("div");C2.setAttribute("row","0");C2.setAttribute("col",Cr);C2.setAttribute("rowSpan",Cm);C2.setAttribute("colSpan",Cu);C2.setAttribute("depth",Ct);C2.setAttribute("class",Cw);C2.setAttribute("type",BY.GM_COL_HEADER);C2.setAttribute("text",o.replaceSpecialChars(C5));C2.style.width=Cv+"px";C2.style.height=C9+"px";C2.style.top=C1+"px";C2.style.left=C6+"px";if(Cn){if(Cq){o.fillImageInDiv(C2,Cq,C5);}else{o.fillTextInDiv(C2,{objType:d.COL_HEADER_TEXT},C5,Cv,C9,false,Ck.chStyles,C7,Cy);}}o.fillBackgroundDiv(C2);C2.selectionInfo=[[{eid:Cx,v:C5,tid:C3.id,n:C3.n,isRowAttribute:false,tui:C8}]];C2.identity=new mstrmojo.gm.HeaderCellIdentity({objType:d.COL_HEADER,eid:Cx,v:C5,tid:C3.id,n:C3.n,tui:C8,fid:Co,isRowAttribute:false,o:C0.o,dpt:C0.dpt,dei:C0.dei,at:C0.at});C2.bftp=Cq;return C2;};var Cc=function(Cx,C7,C0,C6,Ct,Cs,Cm,Cv,Cy){var C1,Cp,Co,C4,Cr="",C2=document.createElement("div"),C3=[""],Cq,Cw,C5=C3.length,Cz=Ck.view,Cn=Cz.getWidgetPropertyValue(BL.COLUMN_VALUES_SHOW);if(Ck.metricsType===AI.MetricsByColumn&&Ck.isFooterAbove){Cp=Ck.getYAxisInfo(Ct,Cs,Ck.haveY1);C3=Cp.items;if(CW.isPie){Cq=Ck.getMetricsOnAngleBy();if(!Cp.isMetric){C3=CQ.getMetricNamesFromIndex(Cq);}Cw=CQ.getMetricIDsFromIndex(Cq);}C5=C3.length;Cr=BY.GM_COL_HEADER_EXTRA;}Co=CB.YAxis;C4=Cs%C5;C1=C3[C4];C2.setAttribute("row","0");C2.setAttribute("col",Cs);C2.setAttribute("rowSpan",Cm);C2.setAttribute("colSpan",Cv);C2.setAttribute("depth",Ct);C2.setAttribute("class",Cy);C2.setAttribute("type",Cr);C2.setAttribute("text",C1);if(C1!==""){C2.setAttribute("dzId",Co);C2.setAttribute("dzIndex",C4);}C2.style.width=Cx+"px";C2.style.height=C7+"px";C2.style.top=C0+"px";C2.style.left=C6+"px";if(Cn&&C1!==""){o.fillTextInDiv(C2,{objType:d.COL_HEADER_TEXT},C1,Cx,C7,false,Ck.chStyles);}o.fillBackgroundDiv(C2);if(Ck.metricsType===AI.MetricsByColumn&&Ck.isFooterAbove){if(CW.isPie){C2.selectionInfo={mid:Cw[Cs],midx:Cq[Cs]};}else{var Cu=Cp.cellHandlers;C2.selectionInfo={mid:Cp.ids[C4],midx:Cp.mtsIdxArr[C4],cellHandle:Cu[C4]};}}return C2;};var Cd=function(Cu,C5,Cx,C3,Cr,Cq,Cm,Ct,Cv){var Cy,C4,Co,C1,Cp="",Cz=document.createElement("div"),C0=[""],C2=C0.length,Cw=Ck.view,Cn=Cw.getWidgetPropertyValue(BL.ROW_VALUES_SHOW);if(Ck.metricsType===AI.MetricsByRow&&Ck.metricNamesOnRowMetricsOnXAxis){C4=Ck.getXAxisInfo(Cr,Cq);C0=C4.items;C2=C0.length;Cp=BY.GM_ROW_HEADER_EXTRA;}Co=CB.XAxis;C1=Cr%C2;Cy=C0[C1];Cz.setAttribute("row",Cr);Cz.setAttribute("col",0);Cz.setAttribute("rowSpan",Cm);Cz.setAttribute("colSpan",Ct);Cz.setAttribute("depth",Cq);Cz.setAttribute("class",Cv);Cz.setAttribute("type",Cp);Cz.setAttribute("text",Cy);if(Cy!==""){Cz.setAttribute("dzId",Co);Cz.setAttribute("dzIndex",C1);}Cz.style.width=Cu+"px";Cz.style.height=C5+"px";Cz.style.top=Cx+"px";Cz.style.left=C3+"px";if(Cn){o.fillTextInDiv(Cz,{objType:d.ROW_TITLE_TEXT},Cy,Cu,C5,false,Ck.rhStyles);}o.fillBackgroundDiv(Cz);if(Ck.metricsType===AI.MetricsByRow&&Ck.metricNamesOnRowMetricsOnXAxis){var Cs=C4.cellHandlers;Cz.selectionInfo={mid:C4.ids[C1],midx:C4.mtsIdxArr[C1],cellHandle:Cs[C1]};}return Cz;};var Cl=function(Cm,Ct,Cp,Cv,Co){Cm.style.width=Ct+"px";Cm.style.height=Cp+"px";Cm.style.top=Cv+"px";Cm.style.left=Co+"px";var Cs=Ck.view,Cu=Cm.getAttribute("text"),Cn=Cs.getWidgetPropertyValue(BL.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL),Cq=Cs.getWidgetPropertyValue(BL.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL),Cr=Cs.getWidgetPropertyValue(BL.ROW_VALUES_SHOW);Cm.innerHTML="";if(Cr){o.fillTextInDiv(Cm,{objType:d.ROW_HEADER_TEXT},Cu,Ct,Cp,false,Ck.rhStyles,Cn,Cq);}o.fillBackgroundDiv(Cm);};var CP=function(DF,DP,DI,DM,Cz,Ct,DQ,Cp,DJ,Cq,DK){if(Ck.metricNamesOnRowMetricsOnXAxis){DJ="gm-rowheader-cell-dummy";return Cd(DF,DP,DI,DM,Cz,Ct,DQ,Cp,DJ);}var DR=document.createElement("div");DR.setAttribute("class",DJ);DR.setAttribute("row",Cz);DR.setAttribute("col",Ct);DR.setAttribute("rowSpan",DQ);DR.setAttribute("colSpan",Cp);if(Ck.clusteredBarSpecialCase){DR.setAttribute("type",BY.GM_Y_NUMERIC);}else{DR.setAttribute("type",Ck.yIsNumeric?BY.GM_Y_NUMERIC:BY.GM_Y_CATEGORY);}DR.style.width=DF+"px";DR.style.height=DP+"px";DR.style.top=DI+"px";DR.style.left=DM+"px";DR.style.backgroundColor="rgba(0,0,0,0)";DR.drawAxis=true;if(Cz%2===1&&Ck.view.getWidgetPropertyValue(AY.BANDING)){Bc.addClass(DR,"banding");}var DO,C8,C6,DX,DT,Cm,DD,DB,DW,Cy,Cn=CB.YAxis,C9,C2,DS=[],DG=0,C4=false,Cx=false,Co,C3,DE,C5,DH,DA,C0=Ck.isGrid(),DN=Ck.isPie,DC=Ck.haveX1,DL=CW.isABL&&Ck.splitPlottingMetrics;DX=Ck.mapFromChartToLDSIndex(Cz,Ct);DT=Ck.getXAxisInfo(Cz,Ct,true,DL);Cm=Ck.getXAxisInfo(Cz,Ct,false,DL);DD=Ck.getYAxisInfo(Cz,Ct,Cq,DL);if(C0&&DN){DW=Ck.model.getMetricNamesFromIndex(Ck.getMetricsOnAngleBy());Cn=CB.Angle;}else{if(DD.isMetric){DW=DD.items;C2=DD.cellHandlers;}else{DW=[];}}if(DD.isMetric&&CW.isABL&&Ck.splitPlottingMetrics){C4=true;if(DD.mtsIdxArr[DX.inchtRow]<0){Cx=true;}}if(DD.isMetric&&!Cx){if(Cq===false){DA=Ai(Ck.getMetricsOnAxisOfChart(Cz,Ct,"y",false));}else{DA=Ai(Ck.getMetricsOnAxisOfChart(Cz,Ct,"y",true));}DR.drawAxis=true;B0.forEach(DA,function(DZ){if(DZ===undefined||DZ<0){DR.drawAxis=false;}else{var DY=Cq?"YAxis":"Y2Axis";if(A6.call(Ck,DZ,DY)===Bo.PERCELL){DR.drawAxis=(Ck.getChartCountInRow()===1);}}});DH=new BX.AxisIdentity({isNumericAxis:true,objType:d.Y_NUMERIC,metricIdxArr:DA});}else{if(!DD.isMetric){DH=new BX.AxisIdentity({isNumericAxis:false,objType:d.Y_CATEGORY,attrIdArr:DD.ids});}}if(!Cx&&Ck.hasHeaderInY){if(DW.length===0&&DT.isMetric){DW=DC?DT.items:Cm.items;C2=DC?DT.cellHandlers:Cm.cellHandlers;Cn=CB.XAxis;}Cy=DW.length;DG=Ck.view.textHeightInY+2*y;DB=document.createElement("div");DR.metrics=[];var Cu,DV,DU=[],C7=[];if(Ck.combineMetricNameInY){for(DO=0;DO<Cy;DO++){C7.push(DO);DR.metrics.push(DW[DO]);}}else{if(C4){C9=DX.inchtRow;}else{C9=Cz%Cy;}C7.push(C9);DR.metrics.push(DW[C9]);}for(DO=0;DO<C7.length;DO++){C9=C7[DO];C8=DW[C9];Cu={};Cu.extraAttributes={};C6=Cu.extraAttributes;Cu.text=C8;C6.dzId=Cn;C6.dzIndex=C9;C6.type=BY.GM_YLABEL;if(CW.isABL&&C2){if(C2[C9]){DE=(C2[C9].col-Ck.gts.row.length)%CQ.getMetricCount();DV=Ck.getMetricInGSIMx(DE);Co=CQ.getMetricIDsFromIndex([DE])[0];C3=CQ.getMetricIDFromIndex(DE);C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({n:C8,mid:Co,mOriId:C3,midx:DE,cellHandle:C2[C9],objType:d.Y_METRIC_AXIS_TITLE});C5=Ck.metricSelectionInfo;if(!C5[Co]){C5[Co]=C6.selectionInfo;}}else{C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({objType:d.Y_METRIC_AXIS_TITLE});}if(Ar.call(Ck,C6.selectionInfo)){Cu.sort=true;C6.sort=true;C6.sortOrder=Ck.metricSortInfo.order;DB.innerText+=Ck.metricSortInfo.order?"asc":"desc";}}else{if(CW.isBubbleOrScatter){DE=DD.mtsIdxArr[C9];DV=Ck.getMetricInGSIMx(DE);Co=CQ.getMetricIDsFromIndex([DE])[0];C3=CQ.getMetricIDFromIndex(DE);C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({n:C8,mid:Co,mOriId:C3,midx:DE,objType:d.Y_METRIC_AXIS_TITLE});C5=Ck.metricSelectionInfo;if(!C5[Co]){C5[Co]=C6.selectionInfo;}}}C6.customScale=(A6.call(Ck,DE,"YAxis")===Bo.CUSTOM);DS.push(C6.selectionInfo);DU.push(Cu);}DR.appendChild(DB);var C1=new mstrmojo.VisAxisLabel({placeholder:DB,width:DP+"px",height:Ck.view.textHeightInY+"px",cssClass:"gm-yaxis-cell-label",styles:Ck.yTitleStyles,align:Cq?"left":"right",contentData:DU});C1.render();C1.parent=Ca;Ck.addDisposable(C1);if(C7.length===1){DR.labelDiv=C1.domNode;}else{DR.combinedLabelDiv=C1.domNode;}}else{if(!Cx&&DD.isMetric){if(DW.length===0&&DT.isMetric){DW=DC?DT.items:Cm.items;C2=DC?DT.cellHandlers:Cm.cellHandlers;Cn=CB.XAxis;}Cy=DW.length;DR.metrics=[];var C7=[];for(DO=0;DO<Cy;DO++){C7.push(DO);DR.metrics.push(DW[DO]);}for(DO=0;DO<C7.length;DO++){C9=C7[DO];C8=DW[C9];C6={};C6.dzId=Cn;C6.dzIndex=C9;C6.type=BY.GM_YLABEL;if(CW.isABL&&C2){if(C2[C9]){DE=(C2[C9].col-Ck.gts.row.length)%CQ.getMetricCount();Co=CQ.getMetricIDsFromIndex([DE])[0];C3=CQ.getMetricIDFromIndex(DE);C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({n:C8,mid:Co,mOriId:C3,midx:DE,cellHandle:C2[C9],objType:d.Y_METRIC_AXIS_TITLE});C5=Ck.metricSelectionInfo;if(!C5[Co]){C5[Co]=C6.selectionInfo;}}else{C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({objType:d.Y_METRIC_AXIS_TITLE});}}else{if(CW.isBubbleOrScatter){DE=DD.mtsIdxArr[C9];Co=CQ.getMetricIDsFromIndex([DE])[0];C3=CQ.getMetricIDFromIndex(DE);C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({n:C8,mid:Co,mOriId:C3,midx:DE,objType:d.Y_METRIC_AXIS_TITLE});C5=Ck.metricSelectionInfo;if(!C5[Co]){C5[Co]=C6.selectionInfo;}}}DS.push(C6.selectionInfo);}}}DR.selectionInfos=DS;var Cw=AP(DF,DP,DG,"y",Cq);DR.setAttribute("isPrimary",Cq);DR.appendChild(Cw);if(!Cx&&DR.drawAxis){var Cv=Ck.view.getWidgetPropertyValue(Cq?AY.SCALE_Y:AY.SCALE_Y2),Cr=Cv!==undefined&&Cv!==1;Ck.drawYAxis(Cw,DF-DG,DP,Cz,DX.r,Ct,false,DX.dpIdx,Cr,Cq,DK,Ck.hasHeaderInY);}else{if(Ck.view.getWidgetPropertyValue(AY.BANDING)){var Cs=[{Start:0,Size:DP}];Ck.drawInChartBanding(DR,Cs,Ck.bandingFlags[Cz]);}}DR.subRegion=DK;if(DH){DR.identity=DH;}return DR;};var CY=function(DE,DN,DH,DL,Cz,Ct,DO,Cq,DI,Cr,DJ){var DP=document.createElement("div");DP.setAttribute("row",Cz);DP.setAttribute("col",Ct);DP.setAttribute("rowSpan",DO);DP.setAttribute("colSpan",Cq);DP.setAttribute("class",DI);if(Ck.clusteredBarSpecialCase){DP.setAttribute("type",BY.GM_X_NUMERIC);}else{DP.setAttribute("type",Ck.xIsNumeric?BY.GM_X_NUMERIC:BY.GM_X_CATEGORY);}DP.innerHTML="";DP.style.width=DE+"px";DP.style.height=DN+"px";DP.style.top=DH+"px";DP.style.left=DL+"px";DP.style.backgroundColor="rgba(0,0,0,0)";DP.drawAxis=true;var DV=Ck.mapFromChartToLDSIndex(Cz,Ct),DK=CW.isABL&&Ck.splitPlottingMetrics,DR=Ck.getXAxisInfo(Cz,Ct,Cr,DK),DC=Ck.getYAxisInfo(Cz,Ct,true,DK),C7=Ck.getYAxisInfo(Cz,Ct,false,DK),Cy=Ck.haveY1,DF=0,DB,Cx,Cn=CB.XAxis,C9,DU,C0,DQ=[],C2=false,Cw=false,Cp,C1,DD,C3,DA,DG;if(DR.isMetric){DU=DR.items;C0=DR.cellHandlers;}else{DU=[];}if(DR.isMetric&&CW.isABL&&Ck.splitPlottingMetrics){C2=true;if(DR.mtsIdxArr[DV.inchtCol]<0){Cw=true;}}if(DR.isMetric&&!Cw){if(Cr===false){DA=Ai(Ck.getMetricsOnAxisOfChart(Cz,Ct,"x",false));}else{DA=Ai(Ck.getMetricsOnAxisOfChart(Cz,Ct,"x",true));}DP.drawAxis=true;B0.forEach(DA,function(DY){if(DY===undefined||DY<0){DP.drawAxis=false;}else{var DX=Cr?"XAxis":"X2Axis";if(A6.call(Ck,DY,DX)===Bo.PERCELL){DP.drawAxis=(Ck.getChartCountInCol()===1);}}});DG=new BX.AxisIdentity({isNumericAxis:true,objType:d.X_NUMERIC,metricIdxArr:DA});}else{if(!DR.isMetric){DG=new BX.AxisIdentity({isNumericAxis:false,objType:d.X_CATEGORY,attrIdArr:DR.ids});}}if(!Cw&&Ck.hasFooterInX){var DM,C8,C4,Cu,DT,DS=[],C6=[],Cs;DB=document.createElement("div");DF=Ck.view.textHeightInX+2*y;if(DR.isMetric&&!Ck.isFooterAbove){DP.appendChild(DB);if(DU.length===0&&DC.isMetric){DU=Cy?DC.items:C7.items;C0=Cy?DC.cellHandlers:C7.cellHandlers;Cn=CB.YAxis;}Cx=DU.length;DP.metrics=[];if(Ck.combineMetricNameInX){for(DM=0;DM<Cx;DM++){C6.push(DM);DP.metrics.push(DU[DM]);}}else{if(C2){C9=DV.inchtCol;}else{C9=Ct%Cx;}C6.push(C9);DP.metrics.push(DU[C9]);}for(DM=0;DM<C6.length;DM++){C9=C6[DM];C8=DU[C9];Cu={};Cu.extraAttributes={};C4=Cu.extraAttributes;Cu.text=C8;C4.dzId=Cn;C4.dzIndex=C9;C4.type=BY.GM_XLABEL;if(CW.isABL&&C0){if(C0[C9]){DD=(C0[C9].col-Ck.gts.row.length)%CQ.getMetricCount();DT=Ck.getMetricInGSIMx(DD);Cp=CQ.getMetricIDsFromIndex([DD])[0];C1=CQ.getMetricIDFromIndex(DD);C4.selectionInfo=C4.identity=new BX.MetricAxisTitleIdentity({n:C8,mid:Cp,mOriId:C1,midx:DD,cellHandle:C0[C9],objType:d.X_METRIC_AXIS_TITLE});C3=Ck.metricSelectionInfo;if(!C3[Cp]){C3[Cp]=C4.selectionInfo;}}else{C4.selectionInfo=C4.identity=new BX.MetricAxisTitleIdentity({objType:d.X_METRIC_AXIS_TITLE});}if(Ar.call(Ck,C4.selectionInfo)){Cu.sort=true;C4.sort=true;C4.sortOrder=Ck.metricSortInfo.order;DB.innerText=Ck.metricSortInfo.order?"asc":"desc";}}else{if(CW.isBubbleOrScatter){DD=DR.mtsIdxArr[C9];DT=Ck.getMetricInGSIMx(DD);Cp=CQ.getMetricIDsFromIndex([DD])[0];C4.selectionInfo=C4.identity=new BX.MetricAxisTitleIdentity({n:C8,mid:Cp,midx:DD,objType:d.X_METRIC_AXIS_TITLE});C3=Ck.metricSelectionInfo;if(!C3[Cp]){C3[Cp]=C4.selectionInfo;}}}C4.customScale=(A6.call(Ck,DD,"XAxis")===Bo.CUSTOM);DQ.push(C4.selectionInfo);DS.push(Cu);}Cs=new mstrmojo.VisAxisLabel({placeholder:DB,width:DE+"px",height:Ck.view.textHeightInX+"px",cssClass:(Cr?"gm-xaxis-cell-label":"gm-x2axis-cell-label"),styles:Ck.xTitleStyles,align:Cr?"bottom":"top",contentData:DS});Cs.render();Cs.parent=Ca;if(!Cr&&!Ck.drawX2Numeric){var Co=Cs.domNode,Cm={};Cm.top=(DN-DF)>>1;B6.positionDomNode(Co,Cm);}Ck.addDisposable(Cs);if(C6.length===1){DP.labelDiv=Cs.domNode;}else{DP.combinedLabelDiv=Cs.domNode;}}else{if(!DR.isMetric){DP.appendChild(DB);DS=[];if(DR.items.length>0){B0.forEach(DR.items,function(DY,DX){Cu={text:DY,extraAttributes:{type:BY.GM_XLABEL,dzId:CB.XAxis,dzIndex:DX,identity:new BX.AttributeAxisTitleIdentity({n:DY,tid:DR.ids[DX],objType:d.X_ATTRIBUTE_AXIS_TITLE})}};DS.push(Cu);});}Cs=new mstrmojo.VisAxisLabel({placeholder:DB,width:DE+"px",height:Ck.view.textHeightInX+"px",cssClass:"gm-xaxis-cell-label",styles:Ck.xTitleStyles,align:"bottom",contentData:DS});Cs.render();Cs.parent=Ca;Ck.addDisposable(Cs);if(DS.length===1){DP.labelDiv=Cs.domNode;}else{if(DS.length>1){DP.combinedLabelDiv=Cs.domNode;}}}}}else{if(!Cw&&!Ck.hasFooterInX&&DR.isMetric){if(DU.length===0&&DC.isMetric){DU=Cy?DC.items:C7.items;C0=Cy?DC.cellHandlers:C7.cellHandlers;Cn=CB.YAxis;}Cx=DU.length;DP.metrics=[];var DM,C8,C4,C6=[];for(DM=0;DM<Cx;DM++){C6.push(DM);DP.metrics.push(DU[DM]);}for(DM=0;DM<C6.length;DM++){C9=C6[DM];C8=DU[C9];C4={};C4.dzId=Cn;C4.dzIndex=C9;C4.type=BY.GM_XLABEL;if(CW.isABL&&C0){DD=(C0[C9].col-Ck.gts.row.length)%CQ.getMetricCount();Cp=CQ.getMetricIDsFromIndex([DD])[0];C4.selectionInfo=C4.identity=new BX.MetricAxisTitleIdentity({n:C8,mid:Cp,midx:DD,cellHandle:C0[C9],objType:d.X_METRIC_AXIS_TITLE});C3=Ck.metricSelectionInfo;if(!C3[Cp]){C3[Cp]=C4.selectionInfo;}}else{if(CW.isBubbleOrScatter){DD=DR.mtsIdxArr[C9];Cp=CQ.getMetricIDsFromIndex([DD])[0];C1=CQ.getMetricIDFromIndex(DD);C4.selectionInfo=C4.identity=new BX.MetricAxisTitleIdentity({n:C8,mid:Cp,mOriId:C1,midx:DD,objType:d.X_METRIC_AXIS_TITLE});C3=Ck.metricSelectionInfo;if(!C3[Cp]){C3[Cp]=C4.selectionInfo;}}}DQ.push(C4.selectionInfo);}}}DP.selectionInfos=DQ;var Cv=AP(DE,DN,DF,"x",Cr);DP.setAttribute("isPrimary",Cr);DP.appendChild(Cv);if(!Cw&&DP.drawAxis){var DW=Ck.view.getWidgetPropertyValue(Cr?AY.SCALE_X:AY.SCALE_X2),C5=DW!==undefined&&DW!==1;Ck.drawXAxis(Cv,DE,DN-DF,Cz,Ct,DV.c,false,DV.dpIdx,C5,Cr,DJ);}DP.subRegion=DJ;if(DG){DP.identity=DG;}return DP;};var CS=function(){var Ct,Cs,Cv,Cr,Cy,Cz,Cp,Co=Ck.getChartInfo(),C0=Co.isBubbleOrScatter&&this.hasSizeBy(),Cn=Co.isBubbleOrScatter&&!this.hasSizeBy(),Cq=false;Ck.dataAreaPaddingGlobalZero=CJ.call(this,CW);if(Ck.dataAreaPaddingGlobalZero){return ;}Ck.maxRowPadding=undefined;Ck.maxColPadding=undefined;if(Ck.maxDataAreaPaddingCache){delete Ck.maxDataAreaPaddingCache;}var Cm=Ck.maxDataAreaPaddingCache=[];Cy=Ck.getChartCountInCol();Cz=Ck.getChartCountInRow();C0=C0&&(Cz*Cy>=1);var Cu=Math.min(Cy,At),Cx=Math.min(Cz,k);for(Ct=0;Ct<Cu;Ct++){Cp=[];Cm.push(Cp);for(Cs=0;Cs<Cx;Cs++){Cq=CH.call(this,CW,Ct,Cs);if(Cq){Cp.push(Ap.clone(F));}else{if(Cn){Cv=Cv||Ck.queryChartInstance(0,0,false,true);Cr=Cr||Cv.GetDataAreaPadding();}else{if(C0){var Cw={purpose:"clipping"};Cv=Ck.getSharedChartInstance(Ct,Cs,Cw);}else{Cv=Ck.queryChartInstance(Ct,Cs,false,true);}Cr=Cv.GetDataAreaPadding();}Cp.push(Cr);}}}};var CX=function(Cv,Cq,Cw,Co,Cx,Cn,Cu,Cp,Cr,Ct,Cs){var Cm=document.createElement("div");Cm.setAttribute("chartDiv",1);Cm.svg=!this.useCECanvas;Cm.setAttribute("row",Cx);Cm.setAttribute("col",Cn);Cm.setAttribute("rowSpan",Cu);Cm.setAttribute("colSpan",Cp);Cm.setAttribute("class",Cr);Cm.setAttribute("type",BY.GM_MINI_CHART);Cm.innerHTML="";Cm.style.width=Cv+"px";Cm.style.height=Cq+"px";Cm.style.top=Cw+"px";Cm.style.left=Co+"px";if(Ck.view.getWidgetPropertyValue(AY.BANDING)&&!Ck.bandings[Cx]){Ck.bandings[Cx]=[{Start:0,Size:Cq}];}Ck.drawOnDiv(Cm,Cv,Cq,Cx,Cn,true,Cr,Cs);o.fillBackgroundDiv(Cm);if(Cx%2===1&&Ck.view.getWidgetPropertyValue(AY.BANDING)){Bc.addClass(Cm,"banding");}Cm.subRegion=Cs;return Cm;};var CZ=function(Cn,Cu,Cq,Cx,Cp,Cs,Ct){var Cw=false;var Co=parseInt(Cn.style.width,10);var Cv=parseInt(Cn.style.height,10);if(Cu&&Cn.style.width!==Cu+"px"){Cn.style.width=Cu+"px";Co=Cu;Cw=true;}if(Cq&&Cn.style.height!==Cq+"px"){Cn.style.height=Cq+"px";Cv=Cq;Cw=true;}if(Cx){Cn.style.top=Cx+"px";}if(Cp){Cn.style.left=Cp+"px";}if(Ck.enablePartialRendering&&!BS(Cn.subRegion,Ct)){Cw=true;Cn.subRegion=Ct;}var Cm=parseInt(Cn.getAttribute("row"),10),Cr=parseInt(Cn.getAttribute("col"),10);if(Cm%2===1&&Ck.view.getWidgetPropertyValue(AY.BANDING)){Bc.addClass(Cn,"banding");}else{Bc.removeClass(Cn,"banding");}if(Cw){Cn.innerHTML="";Ck.drawOnDiv(Cn,Co,Cv,Cm,Cr,true,"",Ct);o.fillBackgroundDiv(Cn);}};var Ch=function(DR,DH,DQ,DJ,DN,Cr,DL){if(Ck.metricNamesOnRowMetricsOnXAxis){return Cl(DR,DH,DQ,DJ,DN);}var DP,Ct=false,Cn=CB.YAxis,DA;var C7=parseInt(DR.style.width,10);var DF=parseInt(DR.style.height,10);if(DH&&DR.style.width!==DH+"px"){DR.style.width=DH+"px";C7=DH;Ct=true;}if(DQ&&DR.style.height!==DQ+"px"){DR.style.height=DQ+"px";DF=DQ;Ct=true;}if(DJ){DR.style.top=DJ+"px";}if(DN){DR.style.left=DN+"px";}var DK=parseInt(DR.getAttribute("row"),10);var DV=parseInt(DR.getAttribute("col"),10);var DX=Ck.mapFromChartToLDSIndex(DK,DV);if(DK%2===1&&Ck.view.getWidgetPropertyValue(AY.BANDING)){Bc.addClass(DR,"banding");}else{Bc.removeClass(DR,"banding");}if(Ck.enablePartialRendering&&!BS(DR.subRegion,DL)){Ct=true;DR.subRegion=DL;}if(Ct||Ck.forceUpdateAxis()){var DM=CW.isABL&&Ck.splitPlottingMetrics,DT=Ck.getXAxisInfo(DK,DV,true,DM),Cm=Ck.getXAxisInfo(DK,DV,false,DM),DE=Ck.getYAxisInfo(DK,DV,Cr,DM),DI=0,DB,DC,DS=[],Cy,Cq,DW,C4,Cz=Ck.isGrid(),DO=Ck.isPie,DD=Ck.haveX1,C3=false,Cx=false;if(Cz&&DO){C4=Ck.getMetricsOnAngleBy();DW=Ck.model.getMetricNamesFromIndex(C4);Cn=CB.Angle;}else{if(DE.isMetric){C4=DE.mtsIdxArr;DW=DE.items;}else{C4=[];DW=[];}}if(DE.isMetric&&CW.isABL&&Ck.splitPlottingMetrics){C3=true;if(DE.mtsIdxArr[DX.inchtRow]<0){Cx=true;}}DR.innerHTML="";var C1=DE.cellHandlers,DG,Cp,C2,C5;if(!Cx&&Ck.hasHeaderInY){if(!DQ){DQ=DR.clientHeight;}if(DW.length===0&&DT.isMetric){DW=DD?DT.items:Cm.items;C4=DD?(DT.isMetric?DT.mtsIdxArr:[]):(Cm.isMetric?Cm.mtsIdxArr:[]);Cn=CB.XAxis;}Cy=DW.length;DI=Ck.view.textHeightInY+2*y;DB=document.createElement("div");Cq=Ck.model.getMetricIDsFromIndex(C4);DR.metrics=[];var C9,C6,Cu,DU=[],C8=[];if(Ck.combineMetricNameInY){for(DP=0;DP<Cy;DP++){C8.push(DP);DR.metrics.push(DW[DP]);}}else{if(C3){DA=DX.inchtRow;}else{DA=DK%Cy;}C8.push(DA);DR.metrics.push(DW[DA]);}for(DP=0;DP<C8.length;DP++){DA=C8[DP];C9=DW[DA];DC=Ck.metricSelectionInfo[Cq[DA]];Cu={};Cu.extraAttributes={};C6=Cu.extraAttributes;Cu.text=C9;C6.dzId=Cn;C6.dzIndex=DA;C6.type=BY.GM_YLABEL;DS.push(DC);if(DC){C6.selectionInfo=C6.identity=DC;if(Ar.call(Ck,C6.selectionInfo)){Cu.sort=true;C6.sort=true;C6.sortOrder=Ck.metricSortInfo.order;DB.innerText+=Ck.metricSortInfo.order?"asc":"desc";}C6.customScale=(A6.call(Ck,C6.selectionInfo.midx,"YAxis")===Bo.CUSTOM);}DU.push(Cu);}DR.appendChild(DB);var C0=new mstrmojo.VisAxisLabel({placeholder:DB,width:DQ+"px",height:Ck.view.textHeightInY+"px",cssClass:"gm-yaxis-cell-label",styles:Ck.yTitleStyles,align:Cr?"left":"right",contentData:DU});C0.render();C0.parent=Ca;Ck.addDisposable(C0);if(C8.length===1){DR.labelDiv=C0.domNode;DR.combinedLabelDiv=undefined;}else{DR.labelDiv=undefined;DR.combinedLabelDiv=C0.domNode;}}else{if(!Cx&&DE.isMetric){if(DW.length===0&&DT.isMetric){DW=DD?DT.items:Cm.items;C1=DD?DT.cellHandlers:Cm.cellHandlers;Cn=CB.XAxis;}Cy=DW.length;DR.metrics=[];var C8=[];for(DP=0;DP<Cy;DP++){C8.push(DP);DR.metrics.push(DW[DP]);}for(DP=0;DP<C8.length;DP++){DA=C8[DP];C9=DW[DA];C6={};C6.dzId=Cn;C6.dzIndex=DA;C6.type=BY.GM_YLABEL;if(CW.isABL&&C1){if(C1[DA]){DG=(C1[DA].col-Ck.gts.row.length)%CQ.getMetricCount();Cp=CQ.getMetricIDsFromIndex([DG])[0];C2=CQ.getMetricIDFromIndex(DG);C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({n:C9,mid:Cp,mOriId:C2,midx:DG,cellHandle:C1[DA],objType:d.Y_METRIC_AXIS_TITLE});C5=Ck.metricSelectionInfo;if(!C5[Cp]){C5[Cp]=C6.selectionInfo;}}else{C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({objType:d.Y_METRIC_AXIS_TITLE});}}else{if(CW.isBubbleOrScatter){DG=DE.mtsIdxArr[DA];Cp=CQ.getMetricIDsFromIndex([DG])[0];C2=CQ.getMetricIDFromIndex(DG);C6.selectionInfo=C6.identity=new BX.MetricAxisTitleIdentity({n:C9,mid:Cp,mOriId:C2,midx:DG,objType:d.Y_METRIC_AXIS_TITLE});C5=Ck.metricSelectionInfo;if(!C5[Cp]){C5[Cp]=C6.selectionInfo;}}}DS.push(C6.selectionInfo);}}}DR.selectionInfos=DS;var Cw=AP(C7,DF,DI,"y",Cr);DR.setAttribute("isPrimary",Cr);DR.appendChild(Cw);if(!Cx&&DR.drawAxis){var Cv=Ck.view.getWidgetPropertyValue(Cr?AY.SCALE_Y:AY.SCALE_Y2),Co=Cv!==undefined&&Cv!==1;Ck.drawYAxis(Cw,C7-DI,DF,DK,DX.r,DV,true,DX.dpIdx,Co,Cr,DL);}else{if(Ck.view.getWidgetPropertyValue(AY.BANDING)){var Cs=[{Start:0,Size:DQ}];Ck.drawInChartBanding(DR,Cs,Ck.bandingFlags[DK]);}}}};var CR=function(DP,DG,DO,DI,DM,Cr,DK){var Ct=false,DU,Cn=CB.XAxis,DC,DQ=[],Cq,DA;var C6=parseInt(DP.style.width,10);var DE=parseInt(DP.style.height,10);if(DG&&DP.style.width!==DG+"px"){DP.style.width=DG+"px";C6=DG;Ct=true;}if(DO&&DP.style.height!==DO+"px"){DP.style.height=DO+"px";DE=DO;Ct=true;}if(DI){DP.style.top=DI+"px";}if(DM){DP.style.left=DM+"px";}if(Ck.enablePartialRendering&&!BS(DP.subRegion,DK)){Ct=true;DP.subRegion=DK;}var DJ=parseInt(DP.getAttribute("row"),10);var DT=parseInt(DP.getAttribute("col"),10);var DV=Ck.mapFromChartToLDSIndex(DJ,DT);if(Ct||Ck.forceUpdateAxis()){var DL=CW.isABL&&Ck.splitPlottingMetrics,DR=Ck.getXAxisInfo(DJ,DT,Cr,DL),DD=Ck.getYAxisInfo(DJ,DT,true,DL),C8=Ck.getYAxisInfo(DJ,DT,false,DL),Cy=Ck.haveY1,DH=0,DB,Cx,C1=false,Cw=false;DU=DR.isMetric?DR.items:[];var C2=DR.isMetric?DR.mtsIdxArr:[];if(DR.isMetric&&CW.isABL&&Ck.splitPlottingMetrics){C1=true;if(DR.mtsIdxArr[DV.inchtCol]<0){Cw=true;}}DP.innerHTML="";var Cz=DR.cellHandlers,DF,Cp,C0,C3;if(!Cw&&Ck.hasFooterInX){if(!DG){DG=DP.clientWidth;}var DN,C9,C4,Cu,DS=[],C7=[],Cs;DB=document.createElement("div");DH=Ck.view.textHeightInX+2*y;if(DR.isMetric&&!Ck.isFooterAbove){DP.appendChild(DB);if(DU.length===0&&DD.isMetric){DU=Cy?DD.items:C8.items;C2=Cy?(DD.isMetric?DD.mtsIdxArr:[]):(C8.isMetric?C8.mtsIdxArr:[]);Cn=CB.YAxis;}Cx=DU.length;Cq=Ck.model.getMetricIDsFromIndex(C2);DP.metrics=[];if(Ck.combineMetricNameInX){for(DN=0;DN<Cx;DN++){C7.push(DN);DP.metrics.push(DU[DN]);}}else{if(C1){DA=DV.inchtCol;}else{DA=DT%Cx;}C7.push(DA);DP.metrics.push(DU[DA]);}for(DN=0;DN<C7.length;DN++){DA=C7[DN];C9=DU[DA];DC=Ck.metricSelectionInfo[Cq[DA]];Cu={};Cu.extraAttributes={};C4=Cu.extraAttributes;Cu.text=C9;C4.dzId=Cn;C4.dzIndex=DA;C4.type=BY.GM_XLABEL;DQ.push(DC);if(DC){C4.selectionInfo=C4.identity=DC;if(Ar.call(Ck,C4.selectionInfo)){Cu.sort=true;C4.sort=true;C4.sortOrder=Ck.metricSortInfo.order;DB.innerText+=Ck.metricSortInfo.order?"asc":"desc";}}C4.customScale=(A6.call(Ck,C4.selectionInfo.midx,"XAxis")===Bo.CUSTOM);DS.push(Cu);}Cs=new mstrmojo.VisAxisLabel({placeholder:DB,width:DG+"px",height:Ck.view.textHeightInX+"px",cssClass:(Cr?"gm-xaxis-cell-label":"gm-x2axis-cell-label"),styles:Ck.xTitleStyles,align:Cr?"bottom":"top",contentData:DS});Cs.render();Cs.parent=Ca;if(!Cr&&!Ck.drawX2Numeric){var Co=Cs.domNode,Cm={};Cm.top=(DO-DH)>>1;B6.positionDomNode(Co,Cm);}Ck.addDisposable(Cs);if(C7.length===1){DP.labelDiv=Cs.domNode;DP.combinedLabelDiv=undefined;}else{DP.labelDiv=undefined;DP.combinedLabelDiv=Cs.domNode;}}else{if(!DR.isMetric){DP.appendChild(DB);DS=[];if(DR.items.length>0){B0.forEach(DR.items,function(DY,DX){Cu={text:DY,extraAttributes:{type:BY.GM_XLABEL,dzId:CB.XAxis,dzIndex:DX,identity:new BX.AttributeAxisTitleIdentity({n:DY,tid:DR.ids[DX],objType:d.X_ATTRIBUTE_AXIS_TITLE})}};DS.push(Cu);});}Cs=new mstrmojo.VisAxisLabel({placeholder:DB,width:DG+"px",height:Ck.view.textHeightInX+"px",cssClass:"gm-xaxis-cell-label",styles:Ck.xTitleStyles,align:"bottom",contentData:DS});Cs.render();Cs.parent=Ca;Ck.addDisposable(Cs);if(DS.length===1){DP.labelDiv=Cs.domNode;}else{if(DS.length>1){DP.combinedLabelDiv=Cs.domNode;}}}}}else{if(!Cw&&!Ck.hasFooterInX&&DR.isMetric){if(DU.length===0&&DD.isMetric){DU=Cy?DD.items:C8.items;Cz=Cy?DD.cellHandlers:C8.cellHandlers;Cn=CB.YAxis;}Cx=DU.length;DP.metrics=[];var DN,C9,C4,C7=[];for(DN=0;DN<Cx;DN++){C7.push(DN);DP.metrics.push(DU[DN]);}for(DN=0;DN<C7.length;DN++){DA=C7[DN];C9=DU[DA];C4={};C4.dzId=Cn;C4.dzIndex=DA;C4.type=BY.GM_XLABEL;if(CW.isABL&&Cz){DF=(Cz[DA].col-Ck.gts.row.length)%CQ.getMetricCount();Cp=CQ.getMetricIDsFromIndex([DF])[0];C0=CQ.getMetricIDFromIndex(DF);C4.selectionInfo=C4.identity=new BX.MetricAxisTitleIdentity({n:C9,mid:Cp,mOriId:C0,midx:DF,cellHandle:Cz[DA],objType:d.X_METRIC_AXIS_TITLE});C3=Ck.metricSelectionInfo;if(!C3[Cp]){C3[Cp]=C4.selectionInfo;}}else{if(CW.isBubbleOrScatter){DF=DR.mtsIdxArr[DA];Cp=CQ.getMetricIDsFromIndex([DF])[0];C0=CQ.getMetricIDFromIndex(DF);C4.selectionInfo=C4.identity=new BX.MetricAxisTitleIdentity({n:C9,mid:Cp,mOriId:C0,midx:DF,objType:d.X_METRIC_AXIS_TITLE});C3=Ck.metricSelectionInfo;if(!C3[Cp]){C3[Cp]=C4.selectionInfo;}}}DQ.push(C4.selectionInfo);}}}DP.selectionInfos=DQ;var Cv=AP(C6,DE,DH,"x",Cr);DP.setAttribute("isPrimary",Cr);DP.appendChild(Cv);if(!Cw&&DP.drawAxis){var DW=Ck.view.getWidgetPropertyValue(Cr?AY.SCALE_X:AY.SCALE_X2),C5=DW!==undefined&&DW!==1;Ck.drawXAxis(Cv,C6,DE-DH,DJ,DT,DV.c,true,DV.dpIdx,C5,Cr,DK);}}},Cf=function(C0,Cv,Cs,Cw,Cq){if(C0.length<=0){return Ag.NORMAL;}Cq=Cq||false;var Cx=0,Cz=0,C4=Cs,C5=10,Cr=5,C1=[],Cu=C0.length,Cy=Cv-C4*2,Co=C0.length,Cm=Cy/Co;var C3=function(){var C8,DA,C7,C6,C9=Ck.view.HTML5PROPS.AXIS_LABEL_Y;for(C8=0;C8<Cu;C8++){DA=C0[C8];C7=B6.measureTextWidth(DA,C9,0);C6=C4+(C8+0.5)*Cm-0.5*C7;C1.push({Size:C7,Start:C6});}};var C2=function(C7){var C8=C7.Start,C6=C8+C7.Size;return(C8>=Cr&&C6<=Cv-Cr);};var Cn=function(C9,DC,DA){var C8,DB,C7,C6=false;for(C8=DC;C8<C9.length;C8+=DA){DB=C9[C8];if(C2(DB)===false){return true;}if(C8>=DA){C7=C9[C8-DA];if(C7.Start+C7.Size+C5>DB.Start){return true;}}}return C6;};C3();if(Cn(C1,0,1)===false){return Ag.NORMAL;}var Ct=false,Cp=false;Ct=Cn(C1,0,2)===false;Cp=Cn(C1,1,2)===false;if(Ct&&Cp){return Ag.STAGGER;}if(Cw){return Ag.ROTATE;}else{return Ag.HORI_DROP;}},Ce=function(){var Cs,Ct,Co,Cy,Cw=Ck.view,Cp=1,Cr=0,Cu=this.getChartCountInRow(),Cx=this.property.readItem(BL.X_AXIS_LABELS_ROTATION),Cq=Cw.getWidgetPropertyValue(AY.SCALE_CHART_WIDTH),Cm=Ck.getControllerAPI(M.GET_CHART_WIDTH),Cv=Math.min(100,Cu),Cn=Ag.NORMAL;if(Cx===undefined){Cx=-1;}Cy=Cx===-1||Cx===2;for(Cs=0;Cs<Cv;Cs++){Ct=Ck.getXAxisLabels(Cs);Co=Cm(0,Cs)*Cq;Cp=this.checkBarColumnsForAxisPadding(0,Cs);if(Cp>0){Cr=Math.round(Co/Cp/4);}Cn=Math.max(Cn,Cf(Ct,Co,Cr,Cy));if(Cn===Ag.ROTATE){break;}}return Cn;};switch(CO){case M.GET_CHART_WIDTH:return AS;case M.GET_CHART_HEIGHT:return CT;case M.GET_ROW_HEADER:return Cj;case M.UPDATE_ROW_HEADER:return CV;case M.GET_COLUMN_HEADER:return Ci;case M.UPDATE_COLUMN_HEADER:return CU;case M.GET_EXTRA_COLUMN_HEADER:return Cc;case M.CREATE_UNIT_Y_AXIS:return CP;case M.CREATE_UNIT_X_AXIS:return CY;case M.GET_FULL_FLEDGED_CHART:return CX;case M.GET_ROW_SPAN:return Cg;case M.GET_COLUMN_SPAN:return Cb;case M.GET_METRICS_ON_X:return this.getMetricsOnXAxis;case M.GET_METRICS_ON_Y:return this.getMetricsOnYAxis;case M.GET_METRICS_ON_SIZE_BY:return this.getSizeByMetrics;case M.UPDATE_MINI_CHART:return CZ;case M.UPDATE_Y_AXIS:return Ch;case M.UPDATE_X_AXIS:return CR;case M.MAX_RADIUS_CALC:return CS;case M.LAYOUT_ALL_X_AXIS_LABELS:return Ce;case M.LAYOUT_ONE_X_AXIS_LABELS:return Cf;}},getUnifiedMetricCondense:function(CP,CQ,Ce,Cl){var Cn=this,Cd=this.getMetricCondense(CP),Cf=CQ==="y"?Cn.model.cic:Cn.model.cir,CY=CQ==="y"?Cn.inChartLayout.r:Cn.inChartLayout.c,AS,CZ,Cc,CT=false,Ck,Cm,CX,CU,CW,CO,Cb,CS,Ci,Ca,CV=CQ.toUpperCase()+(Ce?"":"2"),Cj,Co=this.isBubbleOrScatter();if(!Cd){return false;}else{Cd=false;}for(var Ch=0;Ch<Cf;Ch++){if(CQ=="y"){CO=Cl+Ch*CY;Cb=0;}else{CO=0;Cb=Cl+Ch*CY;}AS=Cn.isLogScale(CV,CO,Cb);Ca=Bb.call(this,CO,Cb);Cm=Ca[CV+"MinValue"];Ck=Ca[CV+"MaxValue"];CZ=Cn.getOnTheFlyShapeForMetric(Aq.call(Cn,CO,Cb,CV+"Axis"));Cc=0;if(Cn.chartSubType===3&&!Co){Cc=2;}else{if(Cn.chartSubType===5&&!Co){CT=true;Cc=1;}}Cj=!!(Cc&1)?10:6;CS=n.prepareScalePlateOptions(AS,CZ,Cc);Ci=n.getScalePlate(true);if(Ci){Ca=Ci.getMaxMinTickValue(CS,Cc,Ck,Cm);if(CT){CW="0%";}else{CW=Cn.model.getMetricNumberFormat(CP);if(CW.match("%")!==null){var Cg=this.model,CR=Cg.getFullNumberFormat()[CP];if(CR&&CR.nct===4){Cj=10;}}}CX=D.formatByMask(CW,Ca.Max);CU=D.formatByMask(CW,Ca.Min);if(CX.length>Cj||CU.length>Cj){Cd=true;break;}}}return Cd;},getMetricCondense:function(CO){var AS=this.getMetricFormat(CO);return AS&&AS.cds===true;},getMetricFormat:function(CS){var CO=this.model,CP,CQ=false,CR,AS;if(CS>=0){CP=CO.getMetricIDsFromIndex([CS])[0];CR=CO.getMetricNamesFromIndex([CS])[0];CQ=CO.getMetricCondenseFromIndex([CS])[0];AS=CO.getMetricNumberFormat(CS);return{mId:CP,n:CR,nf:AS,cds:CQ};}return{};},getMetricFormatFromIndexArray:function(AS){var CO=[],CP=this;B0.forEach(AS,function(CQ){CO.push(CP.getMetricFormat(CQ));});return CO;},hasTheSameFormat:function(AS,CR){var CQ=this,CP=CQ.getMetricFormat(AS),CO=CQ.getMetricFormat(CR);return CP.nf===CO.nf;},hasCustomOnAxis:function(){var CQ,CO,CR,CP;CO=Ai(this.getMetricsOnYAxis());CQ=Ai(this.getMetricsOnXAxis());CR=BW.call(this,CQ,"XAxis");CP=BW.call(this,CO,"YAxis");var AS=false;if(!CR.emptyAxis&&CR.customAxisEnabled){AS=true;}if(!CP.emptyAxis&&CP.customAxisEnabled){AS=true;}return AS;},populateChartRefreshment:function(AS,CW,CX){var CR=W.call(this,AS,CW);CR.rowIndex=AS;CR.colIndex=CW;CX.dataProvider=CR;var CO=this.getControllerAPI(M.GET_CHART_WIDTH);var CU=this.getControllerAPI(M.GET_CHART_HEIGHT);var CS=this.view.getWidgetPropertyValue(AY.SCALE_CHART_WIDTH);var CQ=this.view.getWidgetPropertyValue(AY.SCALE_CHART_HEIGHT);CX.size={w:CO(AS,CW)*CS,h:CU(AS,CW)*CQ};var CT=Bb.call(this,AS,CW);var CP=this.getChartInfo(),CV=B4;if(CP.tp===CV.BUBBLE){CX.primaryValueAxis={min:CT.YMinValue,max:CT.YMaxValue};CX.secondaryValueAxis={min:CT.XMinValue,max:CT.XMaxValue};}else{}if(CP.tp===CV.BUBBLE){CX.plot={};}else{}},getSharedChartInstance:function(AS,CS,CU){this.sharedCharts=this.sharedCharts||{};var CR=null,CV,CO=CU.purpose;if(CO==="clipping"){this.sharedCharts[CO]=this.sharedCharts[CO]||{};var CT,CP,CQ=this.sharedCharts[CO];CV="x:",CT=Ai(this.getMetricsOnAxisOfChart(AS,CS,"x",true));CV+=CT.join("-")+"; y:";CP=Ai(this.getMetricsOnAxisOfChart(AS,CS,"y",true));CV+=CP.join("-");CR=CQ[CV];}else{CR=this.sharedCharts[CO];}if(CR){this.populateChartRefreshment(AS,CS,CU);CR.refreshChartComponents(CU);}else{CR=this.queryChartInstance(AS,CS,false,true);if(CO==="dataLabelRotation"){if(CR.mDatasetPtr.showDatalabels()===false){return null;}}if(CO==="clipping"){this.sharedCharts[CU.purpose][CV]=CR;}else{this.sharedCharts[CU.purpose]=CR;}}return CR;},queryChartInstance:function(Ci,Cq,CV,Ce){var Ch,CY,Cr,Cd,Cm,Ck,CW,CS,Cj,Cg=this.chartsPosIdMap,Cf=this.getChartInfo();if(!Cg){Cg=this.chartsPosIdMap={};}if(!Cg[Ci]){Cg[Ci]={};}if(Cg[Ci][Cq]){o.destroyDisposable(this,mstrmojo.all[Cg[Ci][Cq]]);}Ck=W.call(this,Ci,Cq);Ck.rowIndex=Ci;Ck.colIndex=Cq;CW=Bb.call(this,Ci,Cq);CS=this.hasSizeBy();Cj={HasSizeBy:CS};if(CS){Cj.Max=CW.ZMaxValue;Cj.Min=CW.ZMinValue;}Ch=this.hGetChartInstance({dataProvider:Ck});Cg[Ci][Cq]=Ch.id;CW.GraphHeight=400;CW.LabelPlacement=this.xLabelPlacement;Cj={HasSizeBy:CS};if(CS){Cj.Max=CW.ZMaxValue;Cj.Min=CW.ZMinValue;}var Cn={Extremes:CW,SizeBy:Cj};if(Ce){var CQ=this.getControllerAPI(M.GET_CHART_WIDTH);var Ca=this.getControllerAPI(M.GET_CHART_HEIGHT);var CR=this.view.getWidgetPropertyValue(AY.SCALE_CHART_WIDTH);var CP=this.view.getWidgetPropertyValue(AY.SCALE_CHART_HEIGHT);Cn.GraphSize={W:CQ(Ci,Cq)*CR,H:Ca(Ci,Cq)*CP};}if(CV){CY=this.getDataAreaPadding(Ci,Cq);Cr=this.getChartUniformAxisMargins(Ci,Cq);Cd=this.getChartUniformAxisTrims(Ci,Cq);Cm=this.getPerCellSetting(Ci,Cq);mstrmojo.hash.copy(Cd,Cr);mstrmojo.hash.copy(Cm,Cr);Cn.DataAreaPaddings=CY;Cn.UniformAxisPaddings=Cr;}Cn.isABL=Cf.isABL;Cn.GraphType=this.ceChartType;this.completePropForCE(Cn,{dataProvider:Ck});var Cp,AS,Cc,CU;Cp=Ai(this.getMetricsOnAxisOfChart(Ci,Cq,"x",true));AS=Ai(this.getMetricsOnAxisOfChart(Ci,Cq,"y",true));Cc=Ai(this.getMetricsOnAxisOfChart(Ci,Cq,"x",false));CU=Ai(this.getMetricsOnAxisOfChart(Ci,Cq,"y",false));var Cb=BW.call(this,Cp,"XAxis"),CO=BW.call(this,AS,"YAxis"),Cs=BW.call(this,Cc,"XAxis"),CX=BW.call(this,CU,"YAxis");if(Cb.emptyAxis===false){CW.XCustomScale=Cb.customAxisEnabled;CW.XMetrics=Cp;}if(CO.emptyAxis===false){CW.YCustomScale=CO.customAxisEnabled;CW.YMetrics=AS;}if(Cs.emptyAxis===false){CW.X2CustomScale=Cs.customAxisEnabled;CW.X2Metrics=Cc;}if(CX.emptyAxis===false){CW.Y2CustomScale=CX.customAxisEnabled;CW.Y2Metrics=CU;}CW.XCategoryAxis=CW.XCategoryAxis||{};CW.YCategoryAxis=CW.YCategoryAxis||{};var Cl=(this.chartSubType===BN.CLUSTERED||this.chartSubType===BN.ABSOLUTE),CT=(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Cl,CZ=(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart;CW.XCategoryAxis.EnforceCluster=CT;CW.XCategoryAxis.EnforceFringe=CZ;CW.YCategoryAxis.EnforceCluster=CT;CW.YCategoryAxis.EnforceFringe=CZ;var Co=AF.call(this,Ci,Cq);CW.X1CondenseEnfored=Co.X1;CW.YCondenseEnfored=Co.Y1;CW.X2CondenseEnfored=Co.X2;CW.Y2CondenseEnfored=Co.Y2;Cn.ElementInfo=this.sizeInfo;Cn.AxisLayout=AB.call(this,Ci,Cq);Cn.Extremes=CW;Ch.configureChart(Cn);return Ch;},calculateRadius:function(){this.getControllerAPI(M.MAX_RADIUS_CALC).call(this);},decideDataLabelRotation:function(){var Cf=this,Ce=false,Cg=this.getChartInfo(),AS=this.hasBarChart,CS=this.isCombo;var CY=0,Ca=W.call(this,0,0),Cb=Ca&&Ca.getSeriesCount()||0;if(!!Ca===false||Cb===0){return ;}if(CS){for(;CY<Cb;i++){Ce=Ce||Ca.getShapeBySeries()===1;}}else{Ce=this.markerShape===1&&Cg.isABL;}if(Ce===false){return ;}var CQ={purpose:"dataLabelRotation"},CZ=Cf.getSharedChartInstance(0,0,CQ);if(!!CZ===false){return ;}if(CZ.mDatasetPtr&&CZ.mDatasetPtr.showDatalabels()===false){return ;}var CR=CZ.mChartContextPtr,CV=CZ.mDatasetPtr,CX=CR.mGraphWidth,Cc=CR.mGraphHeight;var CO=CR.IsBarChart();if(!CO&&CR.isCombinationChart()){var Cd=CV.GetSeriesByShape().Bar,Cb=CV.GetSeriesCount();CO=(Cd.length===Cb);if(!CO&&Cd.length){CO=true;}}if(CO){}else{return ;}var CT=21155,CP=mstrmojo.chart.gNullTripleId;CR.PutGraphProperty(CT,CP,null);var CW=CZ.ShouldRotateDataLabel(CX,Cc);var CU=0;if(CW.Adjust&&(CR.IsBarChart(1)||CZ.mDatasetPtr.GetSeriesCount()===1)){var Ca=W.call(this,0,0);if(CR.IsVertical()){CZ=this.getAxisChartInstance(Ca,0,0,"y",true,0,Cc,false);if(CZ!==null){CZ.GetUniformYAxisWidth(Cc,-1,true);}else{if(CR.IsDualAxis()){CZ.GetUniformYAxisWidth(Cc,-1,false);}}this.YAxisDataLabelPadding=CZ&&CZ.getAxisPadding(CU).H||0;}else{CZ=this.getAxisChartInstance(Ca,0,0,"x",true,0,CX,false);if(CZ!==null){CZ.GetUniformXAxisHeight(CX,-1,true);}else{if(CR.IsDualAxis()){CZ.GetUniformXAxisHeight(CX,-1,false);}}this.XAxisDataLabelPadding=CZ&&CZ.getAxisPadding(CU).H||0;}}},setupAxisCondense:function(){var CT=this,CP={},CS={},CR={},CV={},CO=this.getXAxisInfo(),AS=this.getYAxisInfo(),CW=this.getXAxisInfo(undefined,undefined,false),CQ=this.getYAxisInfo(undefined,undefined,false),CU=function(Cd,Ca,Cf){var Cc,Cb,CX,CZ,Ce,Cg=Ca==="y"?CT.inChartLayout.r:CT.inChartLayout.c,CY;for(Cc=0;Cc<Cg;Cc++){if(Ca==="y"){CY=CT.getMetricsOnAxisOfChart(Cc,0,Ca,Cf);}else{CY=CT.getMetricsOnAxisOfChart(0,Cc,Ca,Cf);}CZ=CY.length;if(CZ===1){CX=CY[0];Cd[CX]=CT.getUnifiedMetricCondense(CX,Ca,Cf,Cc);}else{if(CZ>1){Ce=false;for(Cb=0;Cb<CZ;Cb++){CX=CY[Cb];if(CT.getUnifiedMetricCondense(CX,Ca,Cf,Cc)){Ce=true;break;}if(CT.chartSubType!==5){if(Cb!==0&&!CT.hasTheSameFormat(CX,CY[0])){Ce=true;break;}}}for(Cb=0;Cb<CZ;Cb++){CX=CY[Cb];Cd[CX]=Ce;}}}}};if(CO.isMetric){CU(CP,"x",true);}if(AS.isMetric){CU(CS,"y",true);}if(CW.isMetric){CU(CR,"x",false);}if(CQ.isMetric){CU(CV,"y",false);}this.xCondense=CP;this.yCondense=CS;this.x2Condense=CR;this.y2Condense=CV;},getRowHeadersToCalcWidth:function(){var CQ=this.rowHeaderCnt,CP=[],CO,AS=this.model;for(CO=0;CO<CQ;CO++){CP.push(AS.collectHeadersLabels(0,CO));}return CP;},getColHeadersToCalcWidth:function(){var CQ=this.colHeaderCnt,CP=[],CO,AS=this.model;for(CO=0;CO<CQ;CO++){CP.push(AS.collectHeadersLabels(1,CO));}return CP;},createACanvas:function E(CR,CP,AS,CQ){var CO=document.createElement("canvas");CO.width=CR;CO.height=CP;CO.style.zIndex=8;CO.style.top=CQ+"px";CO.style.left=AS+"px";CO.style.position="absolute";return CO;},parseNumericAxisFormat:function w(CR,CU,CT,CO){var AS=CR?"x":"y";var CQ=Ai(this.getMetricsOnAxisOfChart(CT,CO,AS,CU));var CS="General",CP=this.model;CQ.forEach(function(CW,CV){var CX=CP.getMetricNumberFormat(CW);if(!!CX&&CX.hasOwnProperty("nfs")){CX=CX.nfs;if(CS===undefined){CS=CX;}else{if(CS!==CX){CS="General";return CS;}}}});return CS;},postDrawCollecting:function Bk(CS,AS,CZ,CX,CU,CW,Cc){var CQ=CX.getUniformAxisTrims(CS,CZ),CV,Ce,Cd,CO,CT;var Ca=CW,CR=0,CP=CU;if(!CS){CR=CU;CP=0;Ca=Cc;}if(CX.IsZeroBaseLineQualified(CS,CZ)){CV=CX.GetPositionAtTick(0,CS,Ca);}else{CV=null;}var Cb=0,CY=1;Ce=AS?CX.getUniformAxisGridLinePosition(true):[];Cd=AS?CX.getUniformAxisGridLinePosition(false):[];CO=AS?(CX.getUniformAxisFormat()||this.parseNumericAxisFormat(CS,CZ,CR,CP)):"";CT=!!CX.useOriginFormatForZeroLine?CY:Cb;return{MajorGrids:Ce,MinorGris:Cd,ZeroPos:CV,ZeroStyle:CT,AxisTrims:CQ,AxisFormat:CO};},drawYAxis:function(Cb,CX,Cm,CR,Ce,CV,Cj,CP,Ch,Ci,Ca,CO){var Cf,Ck=this.model,AS=this.yIsNumeric,CW=Ci?this.yZeroAxisPos:this.y2ZeroAxisPos,Cs=this.yMajorGridLinePos,Cp=this.yMinorGridLinePos,CS=Ck.getLocalDataSet(Ce,CV),Cu=CS.generateDataProvider(),Co=this.yAxisMargins;var Cg=Cu[CP];if(Cj===true){Cg.clearGraphJSON();}var Cc=this.getAxisChartInstance(Cg,CR,0,"y",Ci,CX,Cm,true);if(Cc&&Cc.newBorn){Cc.GetUniformYAxisWidth(Cm,-1,Ci);Co[CR]=Cc.GetUniformAxisMargins();delete Cc.newBorn;}var Ct=true;if(Cc&&!CO){Ct=!!Cc.visited;}if(!Cc){Cc=this.getAxisChartInstance(Cg,CR,0,"y",Ci,CX,Cm,true);Cc.GetUniformYAxisWidth(Cm,-1,Ci);Co[CR]=Cc.GetUniformAxisMargins();}else{if(Ct||Ch){Cc.configureChart({GraphSize:{W:CX,H:Cm},ElementInfo:this.sizeInfo,AxisLayout:AB.call(this,CR,0),Timer:this.view.enableCETimer});Cc.GetUniformYAxisWidth(Cm,CX,Ci);Co[CR]=Cc.GetUniformAxisMargins();}else{Co[CR]=Cc.GetUniformAxisMargins();}}Cc.UpdatePartialRenderingWindow(this.enablePartialRendering,Ca,Ca?Ca.flag:2);var CU={};if(this.YAxisDataLabelPadding>0&&this.YAxisDataLabelPadding<Cm){CU.dataLabelPadding=this.YAxisDataLabelPadding;}var Cl=Cc.DrawUniformYAxis(CX,Cm,Ci,CU),Cd=Cl.svg;if(this.useCECanvas){var Cn=null;if(!this.drawer){Cn=this.drawer=new BX.VecDrawer();}else{Cn=this.drawer;}Cn.graphData=Cl;var CY=Cn.graphNode=this.createACanvas(CX,Cm,0,0);if(Ci){CY.style.left="";CY.style.right="0px";}else{CY.style.left="0px";CY.style.right="";}Cb.appendChild(CY);Cn.retrieveGraphSrc(Cm,CX);}else{if(this.clusteredBarSpecialCase){Cd.setAttribute("type",BY.GM_SVG_Y_NUMERIC);}else{Cd.setAttribute("type",this.yIsNumeric?BY.GM_SVG_Y_NUMERIC:BY.GM_SVG_Y_CATEGORY);}Cd.style.position="absolute";Cb.appendChild(Cd);AW=Cc.mChartContextPtr.mCanvas.mGradientCount;}if(this.view.getWidgetPropertyValue(AY.BANDING)){Cf=Cc.getUniformAxisBanding();this.bandings[CR]=Cf;this.drawInChartBanding(Cb.parentNode,Cf,this.bandingFlags[CR]);}var CQ,CZ=this.postDrawCollecting(false,AS,Ci,Cc,CR,CX,Cm);Cs[CR]=CZ.MajorGrids;Cp[CR]=CZ.MinorGris;CW[CR]=CZ.ZeroPos;CQ=CZ.AxisTrims;if(CQ.isCaTrim){var Cr=this.caAxisTrims[1];Cr[CR]=CQ;}else{var CT=Ci?this.yAxisTrims:this.y2AxisTrims;CT[CR]=CQ;}if(AS){var Cq=this.axisFormats["y"+(Ci?"1":"2")];Cq[CR]=CZ.AxisFormat;}Cc.visited=true;},getAxisChartInstance2:function(CS,CR,CX,Cb){var Cc=this.model,CO=this.getControllerAPI(M.GET_CHART_WIDTH),CV=this.getControllerAPI(M.GET_CHART_HEIGHT),CP=this.view.getWidgetPropertyValue(AY.SCALE_CHART_WIDTH),AS=this.view.getWidgetPropertyValue(AY.SCALE_CHART_HEIGHT),CY=this.mapFromChartToLDSIndex(CS,CR),CZ=CX==="x"?CS:CY.r,CU=CX==="x"?CY.c:CR,CQ=CY.dpIdx,CT=Cc.getLocalDataSet(CZ,CU),Ce=CT.generateDataProvider(),Ca=Ce[CQ],CW=CO(CS,CR)*CP,Cd=CV(CS,CR)*AS;return this.getAxisChartInstance(Ca,CS,CR,CX,Cb,CW,Cd,true);},getAxisChartInstance:function(Ca,CU,CS,CX,Cb,CW,Cg,CT){var CO,CY,CQ;var Cf=Ai(this.getMetricsOnAxisOfChart(CU,CS,CX,Cb));var CV=BW.call(this,Cf,CX==="x"?"XAxis":"YAxis");var Ce=(Cb===false)?CX.toUpperCase()+"2AxisChart":CX.toUpperCase()+"AxisChart";var AS=CX==="x"&&{Layout:this.xLabelPlacement,StartRow:Z(this.widthRatio,CS),EnforceCluster:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Cc,EnforceFringe:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart};CT=CT||false;if(CV.emptyAxis){return null;}if(CT&&!this.forceUpdateAxis()){if(Ca[Ce]){if(CX==="x"){var Ci=this.property.readItem(BL.X_AXIS_LABELS_ROTATION);Ca[Ce].updateUniformAxisLabelRotation(this.xLabelPlacement,Ci);Ca[Ce].updateUniformXAxisLayout(AS);}CQ=this.getDataAreaPadding(CU,CS);if(!!CQ){Ca[Ce].UpdateValueAxisPadding(CQ);}if(Ca[Ce].newBorn){delete Ca[Ce].newBorn;}return Ca[Ce];}}o.destroyDisposable(this,Ca&&Ca[Ce]);Ca.rowIndex=CU;Ca.colIndex=CS;Ca.EnforedCondense=Ca.EnforedCondense||{};CY=this.hGetChartInstance({dataProvider:Ca,isAxis:true});CO=Bb.call(this,CU,CS);var Cd,Ch=CX.toUpperCase()+"MinValue";Cd=CO[Ch];if(Cd!==undefined&&Cd<0&&this.msgCenter){if(this.isLogScale(Cb?CX:CX+"2",CU,CS)){var CZ=this.view;if(CZ.logScaleChanged){var CR=mstrmojo.desc(13656,"Data less than or equal to zero has been removed from the graph");this.msgCenter[CR]=true;CZ.logScaleChanged=false;}}}CO.GraphHeight=400;CO.LabelPlacement=this.xLabelPlacement;CO.xAxisRotateMode=this.property.readItem(BL.X_AXIS_LABELS_ROTATION);if(Cb===false){Ca[Ce]=CY;CO[CX.toUpperCase()+"2Metrics"]=Cf;CO[CX.toUpperCase()+"2CustomScale"]=CV.customAxisEnabled;CO[CX.toUpperCase()+"2CondenseLabel"]=this[CX+"2Condense"];CO[CX.toUpperCase()+"2CondenseEnfored"]=Ca.EnforedCondense[CX.toUpperCase()+"2"]||false;}else{Ca[Ce]=CY;CO[CX.toUpperCase()+"Metrics"]=Cf;CO[CX.toUpperCase()+"CustomScale"]=CV.customAxisEnabled;CO[CX.toUpperCase()+"CondenseLabel"]=this[CX+"Condense"];CO[CX.toUpperCase()+"CondenseEnfored"]=Ca.EnforedCondense[CX.toUpperCase()]||false;}if(this.forceUpdateAxis()){CQ=this.getDataAreaPadding(CU,CS);if(!!CQ){Ca[Ce].UpdateValueAxisPadding(CQ);}}var Cc=(this.chartSubType===BN.CLUSTERED||this.chartSubType===BN.ABSOLUTE);if(CX==="x"){CO.XCategoryAxis=AS;}else{CO.YCategoryAxis={EnforceCluster:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart&&Cc,EnforceFringe:(this.enableCombiChart||this.getSecondaryMetrics(false).length>0)&&this.hasBarChart};}var CP={Extremes:CO};this.completePropForCE(CP,{dataProvider:Ca,isAxis:true});CP.AxisLayout=AB.call(this,CU,CS);CY.configureChart(CP);CY.newBorn=true;return CY;},drawXAxis:function(Ca,CV,Cl,Cd,CP,CT,Ch,CO,Cf,Cg,CZ){var Ci=this.model,Cm=this.xIsNumeric,CU=Cg?this.xZeroAxisPos:this.x2ZeroAxisPos,Cq=this.xMajorGridLinePos,Cp=this.xMinorGridLinePos,CR=Ci.getLocalDataSet(Cd,CT),Cs=CR.generateDataProvider(),Ce=Cs[CO],Ck=this.xAxisMargins;if(Ch===true){Ce.clearGraphJSON();}var Cb=this.getAxisChartInstance(Ce,0,CP,"x",Cg,CV,Cl,true);if(Cb&&Cb.newBorn){Cb.GetUniformXAxisHeight(CV,-1,Cg);Ck[CP]=Cb.GetUniformAxisMargins();delete Cb.newBorn;}var Cr=true;if(Cb){Cr=!!Cb.visited;}if(!Cb){Cb=this.getAxisChartInstance(Ce,0,CP,"x",Cg,CV,Cl,true);Cb.GetUniformXAxisHeight(CV,-1,Cg);Ck[CP]=Cb.GetUniformAxisMargins();}else{if(Cr||Cf){Cb.configureChart({GraphSize:{W:CV,H:Cl},ElementInfo:this.sizeInfo,AxisLayout:AB.call(this,0,CP),Timer:this.view.enableCETimer});Cb.GetUniformXAxisHeight(CV,Cl,Cg);Ck[CP]=Cb.GetUniformAxisMargins();}else{Ck[CP]=Cb.GetUniformAxisMargins();}}Cb.UpdatePartialRenderingWindow(this.enablePartialRendering,CZ,CZ?CZ.flag:2);var CS={};if(this.XAxisDataLabelPadding>0&&this.XAxisDataLabelPadding<CV){CS.dataLabelPadding=this.XAxisDataLabelPadding;}var Cj=Cb.DrawUniformXAxis(CV,Cl,Cg,CS),Cc=Cj.svg;if(this.useCECanvas){var Co=null;if(!this.drawer){Co=this.drawer=new BX.VecDrawer();}else{Co=this.drawer;}Co.graphData=Cj;var CX=Co.graphNode=this.createACanvas(CV,Cl,0,0);if(Cg){CX.style.top="0px";CX.style.bottom="";}else{CX.style.top="";CX.style.bottom="0px";}Ca.appendChild(CX);Co.retrieveGraphSrc(Cl,CV);}else{if(this.clusteredBarSpecialCase){Cc.setAttribute("type",BY.GM_SVG_X_NUMERIC);}else{Cc.setAttribute("type",this.xIsNumeric?BY.GM_SVG_X_NUMERIC:BY.GM_SVG_X_CATEGORY);}Cc.style.position="absolute";Ca.appendChild(Cc);AW=Cb.mChartContextPtr.mCanvas.mGradientCount;}var CQ,CY=this.postDrawCollecting(true,Cm,Cg,Cb,CP,CV,Cl);Cq[CP]=CY.MajorGrids;Cp[CP]=CY.MinorGris;CU[CP]=CY.ZeroPos;CQ=CY.AxisTrims;if(CQ.isCaTrim){var CW=this.caAxisTrims[0];CW[CP]=CQ;}else{var AS=Cg?this.xAxisTrims:this.x2AxisTrims;AS[CP]=CQ;}if(Cm){var Cn=this.axisFormats["x"+(Cg?"1":"2")];Cn[CP]=CY.AxisFormat;}Cb.visited=true;},mapFromChartToLDSIndex:function(CP,CU){var CR=this.inChartLayout,CS=Math.floor(CP/CR.r),AS=Math.floor(CU/CR.c),CO=CP%CR.r,CT=CU%CR.c,CQ=CO*CR.c+CT;return{r:CS,c:AS,dpIdx:CQ,inchtRow:CO,inchtCol:CT};},drawInChartZeroLine:function(CO,CX,CS,AS,CU){var CT,CW=this.xZeroAxisPos[CU],CV=this.yZeroAxisPos[AS],CP=this.x2ZeroAxisPos[CU],CR=this.y2ZeroAxisPos[AS],CQ=false;if(this.chartType===B4.BAR){if(this.axisFormat.xAxOriLnShw){CW=CP=null;}else{CQ=true;}if(this.axisFormat.yAxOriLnShw){CV=CR=null;}else{CQ=true;}}if(CV){CT=j(CX,CV,CQ);CO.appendChild(CT);}if(CR){CT=j(CX,CR,CQ);CO.appendChild(CT);}if(CW){CT=BO(CS,CW,CQ);CO.appendChild(CT);}if(CP){CT=BO(CS,CP,CQ);CO.appendChild(CT);}},drawInChartBanding:function(AS,CU,CS){var CQ,CO,CW,CR,CP=CU.length,CT=document,CV=CT.createElement("div");CV.setAttribute("class","gm-banding-container");for(CQ=0;CQ<CP;CQ++){CO=CU[CQ].Start;CW=CU[CQ].Size;CR=CT.createElement("div");CR.setAttribute("class","gm-banding-div");CR.style.top=CO+"px";CR.style.height=CW+"px";if(CQ%2!==CS){Bc.addClass(CR,"odd");}CV.appendChild(CR);}AS.appendChild(CV);},drawOnDiv:function(CU,CQ,Cc,CW,Cg,Ca,CR,CT){var Ci=this.bandings,AS=CT?CT.flag:2,CP,Ch,CZ,CV;CZ=W.call(this,CW,Cg);if(CZ.isBlankGrid){var Cj=this.getChartInfo();if(Cj.isGrid===false){return ;}}if(Ca===true){CZ.clearGraphJSON();}CP=CQ;Ch=Cc;CZ.r=CW;CZ.c=Cg;var Cb=CZ.graphJSON;if(!Cb){CV=this.queryChartInstance(CW,Cg,true,true);var Cf=true;if(this.enablePartialRendering){if(this.isBubbleOrScatter()){var Ce=1000;Cf=(CZ.getGroupCount()>Ce);}}CV.UpdatePartialRenderingWindow(this.enablePartialRendering&&Cf,CT,AS);var CO={xDataLabelPadding:this.XAxisDataLabelPadding,yDataLabelPadding:this.YAxisDataLabelPadding};Cb=CV.DrawDataAreaForUniformAxis(CP,Ch,CO);CZ.graphJSON=Cb;}CU.hiddenItems=Cb.hiddenItems;var CX=Cb.svg;if(this.useCECanvas){var Cd=null;if(!this.drawer){Cd=this.drawer=new BX.VecDrawer();}else{Cd=this.drawer;}Cd.graphData=Cb;var CS;CS=Cd.graphNode=this.createACanvas(CP,Ch,0,0);CU.appendChild(CS);Cd.retrieveGraphSrc(Ch,CP);}else{CX.setAttribute("type",BY.GM_SVG_CHART);CU.appendChild(CX);AW=CV.mChartContextPtr.mCanvas.mGradientCount;}this.drawInChartZeroLine(CU,CQ,Cc,CW,Cg);if(this.view.getWidgetPropertyValue(AY.BANDING)){if(this.yIsNumeric){var CY=[{Start:0,Size:Cc}];this.drawInChartBanding(CU,CY,this.bandingFlags[CW]);}else{if(Ci[CW]!==undefined){this.drawInChartBanding(CU,Ci[CW],this.bandingFlags[CW]);}}}},hasSizeBy:function(){var AS=this.dz.SizeBy.TemplateMetric;return(AS&&AS.length>0)||false;},hasColorBy:function(){var AS=this.view;if(AS.noData){return false;}return this.model.colorType!==BJ.NULL;},isAxisAttributeInColorBy:function Aw(){var AS=this.dz,CT=AS.XAxis,CP=AS.YAxis,CS=AS.ColorBy,CR=(CT.TemplateUnit||[]).concat(CP.TemplateUnit||[]),CU=CS.TemplateUnit||[],CO=function(CV){return typeof CV.MetricNames!=="undefined";};if((CO(CT)||CO(CP))&&CO(CS)){return true;}for(var CQ=0;CQ<CR.length;++CQ){if(B0.find(CU,"n",CR[CQ].n)>=0){return true;}}return false;},completePropForCE:function(CQ,CR){var CP=CR.graphSize,CT=this.getChartInfo(),CO=this.model,AS,CS;if(this.useCECanvas){CS=105;}else{CS=103;}AS={isABL:CT.isABL,OutputType:CS,GraphType:this.ceChartType,ThemeType:this.view.theme,ColorBy:{HasColorBy:CO.colorType!==BJ.NULL},ElementInfo:this.sizeInfo};if(CP){AS.GraphSize=CP;}if(this.enableCombiChart){AS.ShapeType=203;}else{if(this.ceMarkerShape){AS.ShapeType=this.ceMarkerShape;}}Ap.copy(AS,CQ);},hGetChartInstance:function(CP){var AS=CP.dataProvider,CO=AT.call(this,CP);if(!CO){B6.visPrint("chart instance is invalid");AS.testDataProvider();}return CO;},getStyleEffectsOptions:function(){var CR=this.view;if(CR.noData){return[];}var AS=[],CO,CP=this,CQ=this.getColorByOptions();AS.push({opt:mstrmojo.desc(2058,"All"),optLvl:Bh.ALL_SHAPE,comb:-1});CO=this.getMetricsOnYAxis();CO=CO.concat(this.getMetricsOnXAxis());B0.forEach(CO,function(CT){AS.push(b.call(CP,[CT]));});if(CQ){AS.push(CQ);}var CS=CR.identity;if(CS&&CS.identityArr&&CS.identityArr.length>0){AS.push({opt:mstrmojo.desc(12091,"Selected Elements"),optLvl:Bh.ITSELF,comb:-1});}return AS;},getColorByOptions:function(){var CQ=this.view;if(CQ.noData){return[];}var CP,CU=[],CT=this.model,CS=CT.colorType,CW,AS,CR,CV;function CO(Cb){var Ca,CY=[],Cd=Cb.levels,Cc=Cb.elements,CZ=Cb.types,CX=Cd.length;for(Ca=0;Ca<CX;Ca++){CY.push({eid:Cc[Ca],tid:Cd[Ca],tp:CZ[Ca]});}return CY;}if(CS===BJ.ATT||CS===BJ.ATT_METRICS||CS===BJ.METRICS_ITEM){CW=CT.getColorByLegendInfo();AS=CW.item;CR=CW.elements;B0.forEach(CR,function(CX){CU.push({opt:CX.label,comb:CO(CX.token),optLvl:Bh.COLOR_BY});});CV=CQ.arrayOfComb;if(CV&&CV.length>1){CU.push({opt:mstrmojo.desc(12092,"Multiple Elements"),comb:[],key:"multiple",optLvl:Bh.COLOR_BY});}CP={opt:AS,optLvl:Bh.COLOR_BY,comb:-1,subOptions:CU};if(CS===BJ.METRICS_ITEM){CP.isMetricNames=true;}return CP;}return undefined;},getNumericAxisOptions:function(Ch,CS,Cf,CQ,Ci){var CX=this.view;if(CX.noData){return[];}var CT=this.getChartInfo(),Cc=[],Cg=this,CP=this.inChartLayout,CR=CP.r,CY=CP.c,CV=[],CO=[],AS=[],Cb=[],Ca=[],CW,Ce,CU,Cd;if(CT.tp!==B4.GRID){for(CW=0;CW<CR;CW++){CO=Ai(this.getMetricsOnAxisOfChart(CW,0,"y",true));if(CO.length>0){if(!Cf){CV.push(b.call(Cg,CO,"y",CS));}Cc=Cc.concat(CO);}AS=Ai(this.getMetricsOnAxisOfChart(CW,0,"y",false));if(AS.length>0){if(!Cf){CV.push(b.call(Cg,AS,"y2",CS));}Cc=Cc.concat(AS);}}for(Ce=0;Ce<CY;Ce++){Cb=Ai(this.getMetricsOnAxisOfChart(0,Ce,"x",true));if(Cb.length>0){if(!Cf){CV.push(b.call(Cg,Cb,"x",CS));}Cc=Cc.concat(Cb);}Ca=Ai(this.getMetricsOnAxisOfChart(0,Ce,"x",false));if(Ca.length>0){if(!Cf){CV.push(b.call(Cg,Ca,"x2",CS));}Cc=Cc.concat(Ca);}}}if(Cf){Cc.forEach(function(Cj){CV.push(b.call(Cg,[Cj],"x",CS));});}if(Ch){var CZ=false;CU=this.getSizeByMetrics();Cd=[];B0.forEach(CU,function(Cj){if(Cc.indexOf(Cj)<0){Cd.push(Cj);}else{CZ=true;if(Ci){Ci.push(Cj);}}});if(CT.isBubbleOrScatter&&!this.splitPlottingMetrics&&CZ){}else{if(Cd.length>0){Cc=Cc.concat(Cd);CV.push(b.call(Cg,Cd,"z"));}}if(CQ&&CZ){B0.forEach(CU,function(Cj){if(CO.indexOf(Cj)>=0){CQ.push("y1");}if(AS.indexOf(Cj)>=0){CQ.push("y2");}if(Cb.indexOf(Cj)>=0){CQ.push("x1");}if(Ca.indexOf(Cj)>=0){CQ.push("x2");}});}}if(CV.length>1){CV.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(Cc),key:"AllMetrics"});}return CV;},getDependentMetricOptions:function(){var CQ=this.view;if(CQ.noData){return[];}var AS,CP=this,CO=[];AS=CM.call(this);B0.forEach(AS,function(CR){CO.push(b.call(CP,[CR]));});return CO;},getIndependentMetricOptions:function(){var CQ=this.view;if(CQ.noData){return[];}var AS=[],CP=this,CR=this.getChartInfo(),CO=[];if(CR.tp===B4.BUBBLE||CR.tp===B4.SCATTER){AS=this.getMetricsOnXAxis();}B0.forEach(AS,function(CS){CO.push(b.call(CP,[CS]));});return CO;},getRealReferenceOptionFromAxisOption:function(CO,AS,CS){var CR=this.view;if(CR.noData){return[];}var CQ=Ap.clone(CO),CP=AS-1;CQ.opt=CQ.opt+" - "+BR[CP];CQ.key=CQ.key+","+A7[CP];CQ.refType=AS;if(CS!==undefined){CQ.modix=CS;}return CQ;},getReferenceAxisOption:function(){var CP=this.view;if(CP.noData){return[];}var CO=false,AS=[],CQ;if(this.isStacked&&!this.splitPlottingMetrics){CO=true;}CQ=this.getNumericAxisOptions(false,CO,!CO);CQ.forEach(function(CR){if(CR.key!=="AllMetrics"){AS.push(CR);}});return AS;},getReferenceLineOptions:function(){var CP=this.view;if(CP.noData){return[];}var AS=[],CO=this,CQ;CQ=this.getReferenceAxisOption();CQ.forEach(function(CS){var CR;for(CR in AX){if(AX.hasOwnProperty(CR)){AS.push(CO.getRealReferenceOptionFromAxisOption(CS,AX[CR]));}}});return AS;},getEnabledReferenceLineOptions:function(CO){var CQ=this.view;if(CQ.noData||CO===undefined){return[];}var AS=CO.key.split(",")[0],CU=this[AY.REF_LINE_DEF],CP=CU[AS],CR=[],CT,CV;var CS=function(CX){var CY={};CY.refType=parseInt(CV,10);CY.key=AS+","+A7[CV-1]+","+CX.modix;CY.opt=AS+" - "+BR[CV-1];if(CY.refType===AX.CONST){CY.c=parseFloat(CX[AY.REF_CONST_VALUE]);CY.lin=CX[AY.REF_LINE_NAME];}CY.modix=CX.modix;CY.existing=true;CR.push(CY);};for(CV in CP){if(CP.hasOwnProperty(CV)){var CW=parseInt(CV,10);CT=CP[CW];B0.forEach(CT,CS);}}return CR;},getShowDataLabelOptions:function(){var CQ=this.view;if(CQ.noData){return[];}if(this.dlOptions){return this.dlOptions;}var CP=this,CR=this.getChartInfo(),AS,CO=[];if(CR.isPie){AS=this.getMetricsOnAngleBy();}else{if(CR.tp!==B4.GRID){AS=CM.call(this);}else{AS=this.getSizeByMetrics();}}B0.forEach(AS,function(CS){CO.push(b.call(CP,[CS]));});if(CO.length>1){CO.unshift({opt:mstrmojo.desc(2460,"All Metrics"),mos:this.getMetricFormatFromIndexArray(AS),key:"AllMetrics"});}this.dlOptions=CO;return CO;},getAttributeSortPlusExistedMetricSort:function(CT,CP){if(CT.dropzones===undefined){CT=this.attributeSelectionInfo[CT.tid];}var AS=false,CR=this.view,CQ=CR.getWidgetPropertyValue(AY.SORT_INDEX),CO=CR.getWidgetPropertyValue(AY.SORT_ORDER);var CS=this.getChartInfo();if(CS.isABL&&(CT.dropzones.indexOf("XAxis")>=0||CT.dropzones.indexOf("YAxis")>=0)){AS=true;if(CQ){this.property.removeItem(AY.SORT_INDEX);this.property.removeItem(AY.SORT_ORDER);}}if(!CQ){CQ=null;}if(AS||!this.showMetricSortIcon){return this.getMetricSortDefinition(null,CO,CT,CP);}return this.getMetricSortDefinition(CQ,CO,CT,CP);},getMetricSortDefinition:function(CZ,CT,Cg,CR){var Cd=[],Cq=this,Cb=this.getChartInfo(),Cj=this.jsonModel?this.jsonModel:this.model,Cr=Cj.getMetricCount(),Ck,CO=[],AS=[],Ce={},CQ=null,CP=this.colHeaderCnt,Cp=this.rowHeaderCnt,Ca,CS,Cs,Cn,Cm,Co=["fi","headerID","headerText","id","idx","levelIndex","n","ui","tui"],Ch,CX,Cl=Cj.getUnitAttributesCountOnRow(),Ci=Cj.getUnitAttributesCountOnCol(),CW=false,CY,CV;var CU=false,Cf=false;if(Cb.isABL&&this.sortingMetric){if(Cb.dirc===B8.VERTICAL){CU=true;}else{Cf=true;}}if(Cg===undefined){Cg=null;}if(CR===undefined){CR=true;}for(Ck=0;Ck<Ci;++Ck){CQ=Y.call(this,Ck);if(CQ){if(!CU||CQ.dropzones.indexOf("XAxis")<0){if(Cg&&!Cg.isRowAttribute&&(Cg.tui===Ck)){AS.push({unit:CQ,isAsc:CR});}else{Ce=CQ;if(Ce.otp===12||Ce.otp===47){CX=r.call(this,BF.DssAxisColumns,CQ);if(CW){AS.push({unit:CQ,isAsc:CX!==BB});}else{if(CX!==z){AS.push({unit:CQ,isAsc:CX!==BB});}}}}}}}for(Ck=0;Ck<Cl;Ck++){CQ=c.call(this,Ck);if(CQ){if(!Cf||CQ.dropzones.indexOf("YAxis")<0){if(Cg&&Cg.isRowAttribute&&(Cg.tui===Ck)){CO.push({unit:CQ,isAsc:CR});}else{Ce=CQ;if(Ce.otp===12||Ce.otp===47){CX=r.call(this,BF.DssAxisRows,CQ);if(CW){CO.push({unit:CQ,isAsc:CX!==BB});}else{if(CX!==z){CO.push({unit:CQ,isAsc:CX!==BB});}}}}}}}if(Cb.isABL===false){return CO.concat(AS);}if(CZ){CS=CZ.row-this.gts.col.length;Cs=CZ.col-this.gts.row.length;Cn=Cs%Cr;Cm=Cj.getMetricProp(undefined);Ch=Ap.copy(Cm[Cn],{});Ch.gvsRI=CS;Ch.gvsCI=Cs;}var Cc=[];if(this.horizontalMode){Cd=Cd.concat(CO);if(CZ){Ch.axis=C.DssAxisRows;if(Cq.specialSortable){Ch.axis=C.DssAxisColumns;}for(Ck=0;Ck<Ci;Ck++){Ca=Y.call(this,Ck);if(Cq.specialSortable&&Ca.dropzones.indexOf("BreakBy")>=0){continue;}CY=Ap.copyProps(Co,Cj.getColHeaderObj(Cs,Ck),{});CV=Cj.headerInfoToProp(1,CY,"n&id");Ap.copy(CV[0],CY);Cc.push(CY);}Cc.push(Ch);}Cd=Cd.concat(AS);if(CZ){Cd.push({unit:Ch,isAsc:CT,elements:Cc});}}else{Cd=Cd.concat(AS);Cd=Cd.concat(CO);if(CZ){Ch.axis=C.DssAxisColumns;if(Cq.specialSortable){Ch.axis=C.DssAxisRows;}for(Ck=0;Ck<Cl;Ck++){Ca=c.call(this,Ck);if(Cq.specialSortable&&Ca.dropzones.indexOf("BreakBy")>=0){continue;}CY=Ap.copyProps(Co,Cj.getRowHeaderObj(CS,Ck),{});CV=Cj.headerInfoToProp(0,CY,"n&id");Ap.copy(CV[0],CY);Cc.push(CY);}Cc.push(Ch);Cd.push({unit:Ch,isAsc:CT,elements:Cc});}}return Cd;},getSortActions:function(Cm){var Ck=-1,Cc=-1,Cb=[],Ca,CY,Ci=false,CW=this.firstRes,Cj=CW.gsi,CO=Cj.sorts[0],CV=Cj.sorts[1],CS=false,Co=false,Cg,Ce,Cf,CP,Ch,CR,CT;if(CO){if(CO.length>0){CS=true;}}if(CV){if(CV.length>0){Co=true;}}if(CS&&Co){Cb.push({actionId:27,axisName:C.DssAxisRows});Cb.push({actionId:27,axisName:C.DssAxisColumns});}else{if(CS){Cb.push({actionId:27,axisName:C.DssAxisRows});}else{if(Co){Cb.push({actionId:27,axisName:C.DssAxisColumns});}}}for(Cg=0;Cg<Cm.length;Cg++){var Cn=Cm[Cg],Cl=Cn.isAsc,AS=Cn.unit,CU,CQ,Ca=AS.otp;if(AS.otp===4){Ca=4;CU=[];if(Cn.elements){for(Ce=0;Ce<Cn.elements.length;Ce++){CU.push(Cn.elements[Ce]);}}var CZ=null;for(Ce=0;Ce<CU.length;Ce++){var CX=CU[Ce];if(CX.otp===4){CZ=CX;CY=CZ.oid;break;}}if(CZ!==null){if(Cn.elements){Ch=AS.axis;if(Ch===C.DssAxisRows){CQ=this.gts.col;}else{if(Ch===C.DssAxisColumns){CQ=this.gts.row;}}}CP=CQ.sorts;if(!CP){CP={sortCollection:[]};CQ.sorts=CP;}Cf={sortType:4,subtotalsPosition:0};CP.sortCollection.push(Cf);Cf.isAsc=Cl;Cf.metricID=CY;Cf.elements=CU;Cf.objectID=CY;Cf.objectType=Ca;}if(Ch===C.DssAxisRows&&Ck>0){Cf.subtotalsPosition=Ck;}else{if(Ch===C.DssAxisColumns&&Cc>0){Cf.subtotalsPosition=Cc;}}Cb=Cb.concat(AG.call(this,Cg,1,Ca,CY,Cl,Ch,Cf.subtotalsPosition,CU,""));}else{if(Ca===12||(Ca===47&&(AS.ost===12033||AS.ost===12032))){var Cd=(Ca===47&&AS.ost===12033);CR=AS;Ch=CR.isRowAttribute?C.DssAxisRows:C.DssAxisColumns;CT=CR.fid;CY=CR.id;var Cp;if(Ch===C.DssAxisRows){Cp=this.gts.row;}else{if(Ch===C.DssAxisColumns){Cp=this.gts.col;}}CP=Cp.sorts;if(!CP){CP={sortCollection:[]};Cp.sorts=CP;}Cf={sortType:2,subtotalsPosition:0};CP.sortCollection.push(Cf);Cf.isAsc=Cl;Cf.attributeID=CY;Cf.formID=CT;Cf.objectID=CY;Cf.objectType=Ca;if(Ch===C.DssAxisRows&&Ck>0){Cf.subtotalsPosition=Ck;}else{if(Ch===C.DssAxisColumns&&Cc>0){Cf.subtotalsPosition=Cc;}}Cb=Cb.concat(AG.call(this,Cg,Ca===47?(Cd?24:10):3,Ca,CY,Cl,Ch,Cf.subtotalsPosition,null,CT));}}}return B3(Cb);},fakeSortActionsStackTotal:function(CU){if(CU&&CU.length){var AS,CQ;for(AS=0;AS<CU.length;AS++){if(CU[AS]&&CU[AS].eIds){CQ=CU[AS];break;}}var CT=CQ&&CQ.eIds;if(CQ&&CT&&CT.length){for(AS=0;AS<CT.length;AS++){if(CT[AS].otp===4){continue;}var CS=CT[AS],CP,CO=CS.id[2];if(CO!==":"){CO=";";}CP=CS.id.split(CO)[1];if(CP){if(this.isAttrInZone(CP,"ColorBy")||this.isAttrInZone(CP,"BreakBy")){CS.headerText=CS.n="StackedTotal";var CR=CS.id.split(CO);CS.id="DB:"+CR[1]+":-1";}}}}}},getShapeFormatsObject:function(){var AS;AS=this[AY.FORMATS_ON_COMBINATION];if(!this.shapeFormatsRead){AS=this.view.getWidgetPropertyValue(AY.FORMATS_ON_COMBINATION);this[AY.FORMATS_ON_COMBINATION]=AS;this.shapeFormatsRead=true;}return AS;},setShapeFormatsWithCombination:function(CQ,AS){var CO,CP;CO=this.getShapeFormatsObject();if(CO===undefined){CO=this[AY.FORMATS_ON_COMBINATION]={};}CP=o.serializeCombination(CQ);if(Object.keys(AS).length<=0){delete CO[CP];}else{CO[CP]=AS;}this.view.setWidgetPropertyValue(AY.FORMATS_ON_COMBINATION,CO);},getShapeFormatsWithCombination:function(CP){if(CP===undefined||CP.length===0){return undefined;}var AS,CO;AS=this.getShapeFormatsObject();if(AS){CO=o.serializeCombination(CP);return AS[CO];}return undefined;},getDataLabelFontFormat:function(){var CP=this.property,AS=[BL.DATA_LABELS_FONT_FAMILY,BL.DATA_LABELS_FONT_SIZE,BL.DATA_LABELS_FONT_STYLE,BL.DATA_LABELS_FONT_COLOR],CO={};AS.forEach(function(CQ){CO[CQ]=CP.readItem(CQ);});return CO;},getDefaultsForShape:function(CP){var CO=this.defaultsForShape;if(!CO){CO=this.defaultsForShape={};}if(CO[CP]){return CO[CP];}var CR=this.view,CQ=CR.getDefaultProperties(),AS=CR.model.data.dz.visProp.fmt,CT={},CS=[BL.SHAPE_LINE_THICKNESS,BL.SHAPE_LINE_COLOR,BL.SHAPE_LINE_STYLE,BL.SHAPE_FILL_COLOR,BL.SHAPE_FILL_STYLE,BL.SHAPE_FILL_TRANSPARENCY,BL.SHAPE_FILL_EFFECT,BL.SHAPE_FILL_COLOR_DEFAULT,BL.SHAPE_BORDER_COLOR,BL.SHAPE_BORDER_STYLE,BL.SHAPE_BORDER_THICKNESS,BL.LINE_MARKER_SHOW,BL.LINE_MARKER_SHAPE,BL.LINE_MARKER_SIZE,BL.LINE_MARKER_COLOR_EQUAL,BL.PIE_EXPLODE,BL.DATA_LABELS_FONT_FAMILY,BL.DATA_LABELS_FONT_SIZE,BL.DATA_LABELS_FONT_STYLE,BL.DATA_LABELS_FONT_COLOR];this.property.updateDefaults(CQ,AS);B0.forEach(CS,function(CU){CT[CU]=CQ[CU];});CO[CP]=CT;return CT;},getVolatileDefaultsForShape:function(AS){var CO=this.volDefaultsForShape;if(!CO){CO=this.volDefaultsForShape={};}if(CO[AS]){return CO[AS];}var CP=this.getDefaultsForShape(AS);CO[AS]=Ap.copy(CP);return CO[AS];},refineShapeFormatsObject:function(){var CO=this[AY.FORMATS_ON_COMBINATION];var CU=["metricLevelProp","colorByLevelProp","concreteLevelProp"];this.levelPropCache={};var CS=this.getColorByAttrsID()||[];var CT=this.getBreakByAttrsID()||[];CT=CT.filter(function(CV){return CS.indexOf(CV)===-1;});function CR(CW){var CX=CT.some(function(CY){return CW.indexOf(CY)!==-1;});if(CX){return CU[2];}var CV=CS.some(function(CY){return CW.indexOf(CY)!==-1;});if(CV){return CU[1];}return CU[0];}for(var CQ in CO){var CP=CR(CQ);this.levelPropCache[CP]=true;}var AS=this.view.model.data.dz.ColorBy;if("MetricNames" in AS&&!AS.TemplateUnit){this.levelPropCache.colorByLevelProp=true;}},clearShapeFormatsCache:function(AS){switch(AS){default:}this.property.clearReadItemCache();delete this.levelPropCache;delete this.sharePropCache;delete this.allPropFormatsRead;delete this.allPropFormatsCache;delete this.lineMarkerShowCache;delete this.metricLvlDLRead;delete this.metricLvlDLCache;delete this.shapeColorCache;delete this.shapeColorFormatsCache;delete this.shapeFormatsCache;},getDefaultsMergedWithAllPropsCachedObject:function(AS){if(!this.sharePropCache){var CP=this.getDefaultsForShape(this.chartInfo.shape);var CO=this.getAllPropsFormatsCachedObject(AS);this.sharePropCache=o.getResolvedFormatsObject([CP,CO]);this.sharePropCache.lnMkShw=this.getLineMarkerShowCachedObject(AS);}return this.sharePropCache;},getLineMarkerShowCachedObject:function(AS){this.lineMarkerShowCache=this.lineMarkerShowCache||AS.getPropertyValue(BL.LINE_MARKER_SHOW);return this.lineMarkerShowCache;},getAllPropsFormatsCachedObject:function(AS){if(!this.allPropFormatsRead){this.allPropFormatsCache=AS.getPropertyValue(BL.ALL_SHAPE_FORMAT);this.allPropFormatsRead=true;}return this.allPropFormatsCache;},getMetricDataLabelCachedObject:function(CR,CQ){var CO=true;if(!this.metricLvlDLRead){this.metricLvlDLCache=CR.getPropertyValue(AY.METRIC_LEVEL_DATA_LABEL);this.metricLvlDLRead=true;}var CS=this.metricLvlDLCache;var AS=CO;if(CS===undefined){AS=CO;}else{var CP=CQ.assMetricDLIDCache=CQ.assMetricDLIDCache||CQ.getAssMetricDataLabelID();if(CP!==undefined){AS=CS[CP];}else{AS=false;}}return AS;},getShapeFormatsCachedObject:function(AS){this.shapeFormatsCache=this.shapeFormatsCache||{};var CO=AS.gc.groupData.map(function(CP){return[CP.mIdx,CP.C,CP.R].join("-");}).join(";");AS.idx="idx" in AS?AS.idx:[AS.gc.gID,AS.gc.sID,CO].join(";");return this.shapeFormatsCache[AS.idx];},setShapeFormatsCachedObject:function(CO,AS){this.shapeFormatsCache[CO.idx]=AS;},getComboLevelPropCachedObject:function(CO){var CR,CP,CQ,AS=this.getShapeFormatsObject();if(!AS){return ;}if(!this.levelPropCache){this.refineShapeFormatsObject();}if(!CO.concreteCombStr&&this.levelPropCache.concreteLevelProp){CQ=CO.getSelectedObjectLowestLevel(true);CO.concreteCombStr=(CQ===undefined||CQ.length===0)?"":o.serializeCombination(CQ);}if(!CO.metricCombStr&&this.levelPropCache.metricLevelProp){CR=CO.getSelectedObjectMetricInfo();CO.metricCombStr=(CR===undefined||CR.length===0)?"":o.serializeCombination(CR);}if(!CO.colorByCombStr&&this.levelPropCache.colorByLevelProp){CP=CO.getSelectedObjectColorByInfo();CO.colorByCombStr=(CP===undefined||CP.length===0)?"":o.serializeCombination(CP);}return[AS[CO.concreteCombStr],AS[CO.metricCombStr],AS[CO.colorByCombStr]];},getShapeColorCachedObject:function(CO,AS){this.shapeColorCache=this.shapeColorCache||[];return this.shapeColorCache[AS.idx]=this.shapeColorCache[AS.idx]||CO.getColorByData();},getShapeColorFormatsCachedObject:function(CU,CR,CQ,CW){var CO=CQ,CV=mstrmojo.gm.ShapeFillType,CX=this.getMetricDataLabelCachedObject(CU,CR),CS=this.getShapeColorCachedObject(CU,CR),CT=CS+(CX?"T":"F");if(typeof CS==="object"){CT=JSON.stringify(CS)+(CX?"T":"F");}this.shapeColorFormatsCache=this.shapeColorFormatsCache||{};if(CW){if(this.shapeColorFormatsCache[CT]){return this.shapeColorFormatsCache[CT];}else{CO=this.shapeColorFormatsCache[CT]=Ap.copy(CQ);}}CS=(CS!==undefined&&CS!==null)?CS:CO[BL.SHAPE_FILL_COLOR];var AS=false;if(CS&&typeof CS==="object"){AS=true;}if(CS!==undefined){CO[BL.SHAPE_LINE_COLOR]=CO[BL.SHAPE_FILL_COLOR]=CS;var CY=CU.getPropertyValue(BL.LINE_MARKER_COLOR);if(CY===undefined){CO[BL.LINE_MARKER_COLOR]=AS?CS.c1:CS;}else{CO[BL.LINE_MARKER_COLOR]=CY;}if(CO[BL.LINE_MARKER_BORDER_COLOR]===undefined){CO[BL.LINE_MARKER_BORDER_COLOR]=AS?CS.c1:(CY!==undefined?CY:CS);}if(CO[BL.SHAPE_BORDER_COLOR]===undefined){CO[BL.SHAPE_BORDER_COLOR]=AS?CS.c1:CS;}}CO[BL.SHAPE_FILL_STYLE]=AS?CV.Gradient:CV.Solid;if(AS&&this.chartInfo.isABL){var CP=CU.getShape();if(CP===Aj.LINE||CP===Aj.TICK){CO[BL.SHAPE_FILL_STYLE]=CV.Solid;CO[BL.SHAPE_LINE_COLOR]=CO[BL.SHAPE_FILL_COLOR]=CS.c1;}}CO[BL.DATA_LABELS_SHOW]=CX;return CO;},forceUpdateAxis:function(){var AS=this.view;if(AS){return AS.forceUpdateAxis;}return false;},forceUpdateCharts:function(){var AS=this.view;if(AS){return AS.forceUpdateCharts;}return false;},clearLogScaleCahce:function(){delete this.logScaleCache;},resetDataLabelType:function(){var AS=this.chartInfo;if(AS){AS.dlTp=this.getDataLabelType();}},resetDataLabelPlacement:function(){var AS=this.chartInfo;if(AS){AS.dlPlmt=this.property.readItem(AY.DATA_LABELS_PLACEMENT);}},resetFitTo:function(){if(this.dz){var AS=this.property,CO=((!!this.dz.Rows.TemplateUnit&&!this.dz.YAxis.TemplateMetric)||(!!this.dz.Columns.TemplateUnit&&!this.dz.XAxis.TemplateMetric))?AQ.NONE:AQ.AUTOMATIC;AS.reInitItem(AY.FIT_TO,CO);}},clearDataLabelFormatCache:function(){var AS=this.ChartFactory;if(AS&&AS.mUniversalProperty){delete AS.mUniversalProperty.DatatextFormat;}},resetDefaultShapeProp:function(){delete this.defaultsForShape;delete this.volDefaultsForShape;},formatAsAxisLabel:function(CP,CO){if(!CP||CP.length<=0){return undefined;}var AS;if(this.chartSubType===BN.PERCENT){AS=D.formatByMask("#%",CO);}else{AS=this.formatValue(CP,CO);}return AS;},formatValue:function(CY,CW){var CR,CX,CV,CS,CU,CQ,CO=this.inChartLayout,CT=CO.r,CP=CO.c,AS=this.mericsAxisMapCache;CX=this.getMetricIndexFromID(CY[0]);if(!AS){AS=this.mericsAxisMapCache={};}if(AS[CX]!==undefined){return this.formatMetricsValueUniformly(CY,CW,AS[CX]);}for(CR=0;CR<CT;CR++){CS=Ai(this.getMetricsOnAxisOfChart(CR,0,"y",true));if(CS.indexOf(CX)>=0){AS[CX]={row:CR,col:0,axisName:"y",isPrimary:true};return this.formatMetricsValueUniformly(CY,CW,AS[CX]);}CQ=Ai(this.getMetricsOnAxisOfChart(CR,0,"y",false));if(CQ.indexOf(CX)>=0){AS[CX]={row:CR,col:0,axisName:"y",isPrimary:false};return this.formatMetricsValueUniformly(CY,CW,AS[CX]);}}for(CR=0;CR<CP;CR++){CV=Ai(this.getMetricsOnAxisOfChart(0,CR,"x",true));if(CV.indexOf(CX)>=0){AS[CX]={row:0,col:CR,axisName:"x",isPrimary:true};return this.formatMetricsValueUniformly(CY,CW,AS[CX]);}CU=Ai(this.getMetricsOnAxisOfChart(0,CR,"x",false));if(CU.indexOf(CX)>=0){AS[CX]={row:0,col:CR,axisName:"x",isPrimary:false};return this.formatMetricsValueUniformly(CY,CW,AS[CX]);}}return AE.call(this,CW,CX);},getMetricInfo:function(CR){this.metricInfos=this.metricInfos||{};var CT=this.metricInfos;if(!!CT[CR]){return CT[CR];}var AS=this.gts,CP=AS.col,CS=CP.length;if(CS&&CP[CS-1].otp===-1){var CQ=CP[CS-1].es;CQ.forEach(function(CU){if(CU.oid===CR){CT[CR]=Ap.copy(CU,{});}});var CO=this.firstRes.gnf;CO.forEach(function(CU){if(CU.id===CR){CT[CR].nf=Ap.copy(CU,{});}});}},formatMetricsValueUniformly:function(Cg,Ca,AS){var CW,CT,CS=AS.row,CR=AS.col,CQ=AS.axisName,Cb=AS.isPrimary,CP=this.condenseEchos,CX=this.mapFromChartToLDSIndex(CS,CR),CY=CQ==="x"?CS:CX.r,CV=CQ==="x"?CX.c:CR,CO=CX.dpIdx,CU=this.model.getLocalDataSet(CY,CV),Ci=CU.generateDataProvider(),CZ=Ci[CO],Cc=CQ.toUpperCase()+(Cb?"AxisChart":"2AxisChart");if(CZ[Cc]){return CZ[Cc].formatAsUniformAxisLabel(Ca);}CT=CQ==="x"?CR:CS;Cc=CQ.toUpperCase();if(Cb){Cc=Cc+"1";}else{Cc=Cc+"2";}CP=CP&&CP[Cc];CW=CP&&CP[CT];if(CW){return n.abbreviateNumber(Ca,5);}else{Cc=Cc.toLowerCase();if(Cb){Cc=Cc[0];}Cc=Cc+"Condense";if(this[Cc]){return n.abbreviateNumber(Ca,5);}}var Ch=this,Cf=[],Ce="General";Cg.forEach(function(Ck){var Cj=Ch.getMetricInfo(Ck);if(Cj&&Cj.nf){Cf.push(Cj.nf);}});if(Cf.length){var Cd=1;Ce=Cf[0].nfs;for(;Cd<Cf.length;Cd++){if(Cf[Cd].nfs!=Ce){Ce="General";break;}}}return D.formatByMask(Ce,Ca);},hasAttributesInDropzone:function(CO){var AS=this.dz[CO].TemplateUnit;return(AS&&AS.length>0);},getAttributeIds:function(){if(!this.attributeIds){var CP=this.gts.row,AS=this.gts.col,CO={};B0.forEach(CP,function(CQ){if(CQ.otp!==-1&&CQ.otp!==4){CO[CQ.id]=CQ.es;}});B0.forEach(AS,function(CQ){if(CQ.otp!==-1&&CQ.otp!==4){CO[CQ.id]=CQ.es;}});this.attributeIds=CO;}return this.attributeIds;},getDataProvider:function(AS,CO){return W.call(this,AS,CO);},isOneDotCase:function(){var AS=this.model,CP,CO,CQ;CP=AS.getLocalDataSet(0,0);if(this.chartDirection===BX.EnumABLDirection.VERTICAL){CQ=AS.getMetricCount();if(CQ===0){CO=CP.wd;}else{CO=CP.wd/CQ;}}else{CO=CP.items.length;}return CO<2;},isCompactMode:function(){return this.view.getWidgetPropertyValue(AY.FIT_TO)===AQ.COMPACT;},getMinMaxOnNumericAxis:function(AS,CO){return Bl.call(this,AS,CO);},getMinMaxForDP:function(AS,CO){return Bb.call(this,AS,CO);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.enums.EnumThemeProperties");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMLegend","GMController","GMProperty","GMAxisScale","GMPropertyNode","GMPropDefaults");var j=mstrmojo,An=j.gm,Ao=j.func.wrapMethods,Q=j.array,Z=j.hash,J=An.GMProperty,Ar=An.GMUtility,F=j.VisUtility,U=An.EnumShape,Al=An.EnumSubtype,q=An.EnumGridLines,p=An.EnumLegendSlot,AJ=An.EnumTrendRefModelLabels,s=An.EnumRefLineModelType,K=An.EnumSelectionOptionLevel,a=An.GMPropDefaults,H=An.EnumGraphType,o=An.EnumColorByType,Aq=j.chart.enums.EnumLineStyle,Ab=An.EnumCombinedLineStyle,Ak=An.EnumShapeFormatStatus,n=An.FormatingPropertyTag,AQ=An.WidgetPropertyTag,L=An.GMAxisScale,r=An.EnumAxisScale,AW=An.EnumIdentityType,B=j.VisEnum.ControlType,AY=An.GMPropertyNode,AH=j.VisEnum.VIS_CARDLIMIT.NON_GRID,u=j.vi.viz.EnumDSSDropZones,AT={n:"Metric Names",did:"00000000000000000000000000000000",t:0,cs:1},y=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME;var AS="_tmsp",g="_default",S="allVal",AP="rfLnFnt",Ad=true;var AF={lgdBgFillClr:"lgdBgFillStyle",shpFillClr:"shpFillStyle",bgFillClr:"bgFillStyle",rwHdrFillClr:"rwHdrFillStyle",colHdrFillClr:"colHdrFillStyle"};var AA=[{pos:p.LEFT_TOP},{pos:p.LEFT_MIDDLE},{pos:p.LEFT_BOTTOM},{pos:p.RIGHT_TOP},{pos:p.RIGHT_MIDDLE},{pos:p.RIGHT_BOTTOM}];var D=[AQ.AXIS_SCALE,AQ.AXIS_SCALE_DATA,AQ.SUB_TYPE,AQ.OUTSIDE_BORDER,AQ.SELECTION_TYPE,AQ.SELECTIONS,AQ.AXIS_SCALE_MANUAL_MIN,AQ.AXIS_SCALE_MANUAL_MAX,AQ.SINGLE_AXIS_SCALE_TYPE,AQ.TREND_LINE_DEF,AQ.REF_LINE_DEF,n.OUTSIDE_BORDER_SHOW,n.OUTSIDE_BORDER_COLOR,n.OUTSIDE_BORDER_STYLE,n.OUTSIDE_BORDER_THICKNESS,n.COLOR_SQUARE_COLOR];var c=[n.MAJOR_GRID_LINES_SHOW,n.MAJOR_GRID_LINES_COLOR,n.MAJOR_GRID_LINES_THICKNESS,n.MAJOR_GRID_LINES_STYLE,n.MINOR_GRID_LINES_SHOW,n.MINER_GRID_LINES_COLOR,n.MINER_GRID_LINES_THICKNESS,n.MINER_GRID_LINES_STYLE,n.X_AXIS_LINE_SHOW,n.X_AXIS_LINE_COLOR,n.X_AXIS_LINE_STYLE,n.X_AXIS_LINE_THICKNESS,n.X_AXIS_TITLE_SHOW,n.X_AXIS_TITLE_CONTENT,n.X_AXIS_TITLE_FONT_COLOR,n.X_AXIS_TITLE_FONT_FAMILY,n.X_AXIS_TITLE_FONT_STYLE,n.X_AXIS_TITLE_FONT_SIZE,n.X_AXIS_LABELS_FONT_COLOR,n.X_AXIS_LABELS_FONT_SIZE,n.X_AXIS_LABELS_FONT_FAMILY,n.X_AXIS_LABELS_FONT_STYLE,n.X_AXIS_LABELS_ROTATION,n.X_AXIS_LABELS_SHOW,n.Y_AXIS_LINE_SHOW,n.Y_AXIS_LINE_COLOR,n.Y_AXIS_LINE_STYLE,n.Y_AXIS_LINE_THICKNESS,n.Y_AXIS_TITLE_SHOW,n.Y_AXIS_TITLE_CONTENT,n.Y_AXIS_TITLE_FONT_SIZE,n.Y_AXIS_TITLE_FONT_COLOR,n.Y_AXIS_TITLE_FONT_FAMILY,n.Y_AXIS_TITLE_FONT_STYLE,n.Y_AXIS_LABELS_FONT_SIZE,n.Y_AXIS_LABELS_FONT_COLOR,n.Y_AXIS_LABELS_FONT_FAMILY,n.Y_AXIS_LABELS_FONT_STYLE,n.Y_AXIS_LABELS_ROTATION,n.Y_AXIS_LABELS_SHOW,n.MAJOR_GRID_LINES_SHOW,n.MAJOR_GRID_LINES_COLOR,n.MAJOR_GRID_LINES_THICKNESS,n.MAJOR_GRID_LINES_STYLE,n.MINOR_GRID_LINES_SHOW,n.MINER_GRID_LINES_COLOR,n.MINER_GRID_LINES_THICKNESS,n.MINER_GRID_LINES_STYLE,n.X_AXIS_ORIGIN_LINE_SHOW,n.X_AXIS_ORIGIN_LINE_COLOR,n.X_AXIS_ORIGIN_LINE_STYLE,n.X_AXIS_ORIGIN_LINE_THICKNESS,n.Y_AXIS_ORIGIN_LINE_SHOW,n.Y_AXIS_ORIGIN_LINE_COLOR,n.Y_AXIS_ORIGIN_LINE_STYLE,n.Y_AXIS_ORIGIN_LINE_THICKNESS];var X=[AQ.METRIC_SHAPES,AQ.LOG_SCALE,AQ.TREND_LINE_DEF,AQ.TREND_BUBBLE_FORE_DEF,AQ.REF_LINE_DEF,AQ.AXIS_ORIGIN,AQ.FORMATS_ON_COMBINATION,n.ALL_SHAPE_FORMAT,AQ.METRIC_LEVEL_DATA_LABEL];var l={UNKNOW:-1,UPDATE_CHARTS:1,CHART_SCALE:2,SPLITTER_LINE_SCALE:3,UPDATE_ALL:4};var h=[n.ROW_TEXT_SHOW,n.ROW_HEADER_SHOW,n.ROW_VALUES_SHOW,n.COLUMN_TEXT_SHOW,n.COLUMN_HEADER_SHOW,n.COLUMN_VALUES_SHOW,n.ALL_ROW_COLUMN_SHOW,n.ROW_TEXT_TEXT_FONT_FAMILY,n.ROW_TEXT_TEXT_FONT_SIZE,n.ROW_TEXT_TEXT_FONT_STYLE,n.ROW_HEADER_TEXT_FONT_FAMILY,n.ROW_HEADER_TEXT_FONT_SIZE,n.ROW_HEADER_TEXT_FONT_STYLE,n.ROW_VAVLUE_TEXT_FONT_FAMILY,n.ROW_VAVLUE_TEXT_FONT_SIZE,n.ROW_VAVLUE_TEXT_FONT_STYLE,n.COLUMN_TEXT_TEXT_FONT_FAMILY,n.COLUMN_TEXT_TEXT_FONT_SIZE,n.COLUMN_TEXT_TEXT_FONT_STYLE,n.COLUMN_HEADER_TEXT_FONT_FAMILY,n.COLUMN_HEADER_TEXT_FONT_SIZE,n.COLUMN_HEADER_TEXT_FONT_STYLE,n.COLUMN_VAVLUE_TEXT_FONT_FAMILY,n.COLUMN_VAVLUE_TEXT_FONT_SIZE,n.COLUMN_VAVLUE_TEXT_FONT_STYLE,n.ALL_ROW_COLUMN_TEXT_FONT_FAMILY,n.ALL_ROW_COLUMN_TEXT_FONT_SIZE,n.ALL_ROW_COLUMN_TEXT_FONT_STYLE,n.V_MATRIX_LINES_SHOW,n.H_MATRIX_LINES_SHOW,n.ALL_MATRIX_LINES_SHOW,n.V_MATRIX_LINES_COMBINED_STYLE,n.H_MATRIX_LINES_COMBINED_STYLE,n.ALL_MATRIX_LINES_COMBINED_STYLE,n.X_AXIS_LINE_SHOW,n.X_AXIS_LINE_COMBINED_STYLE,n.Y_AXIS_LINE_SHOW,n.Y_AXIS_LINE_COMBINED_STYLE,n.ALL_AXIS_LINE_SHOW,n.ALL_AXIS_LINE_COMBINED_STYLE,n.ALL_LINE_SHOW,n.ALL_LINE_COMBINED_STYLE,n.X_AXIS_TITLE_SHOW,n.Y_AXIS_TITLE_SHOW,n.ALL_AXIS_TITLE_SHOW,n.X_AXIS_TITLE_CONTENT,n.Y_AXIS_TITLE_CONTENT,n.ALL_AXIS_TITLE_CONTENT,n.X_AXIS_LABELS_SHOW,n.Y_AXIS_LABELS_SHOW,n.ALL_AXIS_LABELS_SHOW,n.X_AXIS_LABELS_ROTATION,n.Y_AXIS_LABELS_ROTATION,n.ALL_AXIS_LABELS_ROTATION,n.X_AXIS_TITLE_FONT_FAMILY,n.X_AXIS_TITLE_FONT_STYLE,n.X_AXIS_TITLE_FONT_SIZE,n.Y_AXIS_TITLE_FONT_FAMILY,n.Y_AXIS_TITLE_FONT_STYLE,n.Y_AXIS_TITLE_FONT_SIZE,n.ALL_AXIS_TITLE_FONT_FAMILY,n.ALL_AXIS_TITLE_FONT_STYLE,n.ALL_AXIS_TITLE_FONT_SIZE,n.X_AXIS_LABELS_FONT_SIZE,n.X_AXIS_LABELS_FONT_FAMILY,n.X_AXIS_LABELS_FONT_STYLE,n.Y_AXIS_LABELS_FONT_SIZE,n.Y_AXIS_LABELS_FONT_FAMILY,n.Y_AXIS_LABELS_FONT_STYLE,n.ALL_AXIS_LABELS_FONT_SIZE,n.ALL_AXIS_LABELS_FONT_FAMILY,n.ALL_AXIS_LABELS_FONT_STYLE,n.ALL_TEXT_FONT_SIZE,n.ALL_TEXT_FONT_FAMILY,n.ALL_TEXT_FONT_STYLE,AQ.AXIS_SCALE_DATA,AQ.DATA_LABEL,AQ.FIT_TO];var N=[n.X_AXIS_ORIGIN_LINE_SHOW,n.X_AXIS_ORIGIN_LINE_COMBINED_STYLE,n.Y_AXIS_ORIGIN_LINE_SHOW,n.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE,n.ALL_AXIS_ORIGIN_LINE_SHOW,n.ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE,AQ.TREND_LINE_DEF,AQ.REF_LINE_DEF,n.MODIFIED_DEF_FILL_COLOR,n.SHAPE_FILL_TRANSPARENCY,n.SHAPE_LINE_COMBINED_STYLE,n.SHAPE_BORDER_COLOR,n.SHAPE_BORDER_COMBINED_STYLE,n.LINE_MARKER_SHOW,n.LINE_MARKER_COLOR,n.REF_LABELS_FONT_FAMILY,n.REF_LABELS_FONT_STYLE,n.REF_LABELS_FONT_SIZE];var I=[AQ.SCALE_CHART_WIDTH,AQ.SCALE_CHART_HEIGHT];var C=[AQ.SCALE_ROW_HEADERS,AQ.SCALE_COL_HEADERS,AQ.SCALE_Y,AQ.SCALE_Y2,AQ.SCALE_X,AQ.SCALE_X2,AQ.SCALE_V_EXTRA_LINE];var Ac=[n.ALL_TEXT_FONT_COLOR,n.ALL_TEXT_FONT_STYLE,n.ALL_AXIS_LABELS_FONT_COLOR,n.ALL_AXIS_LABELS_FONT_STYLE];var AZ=[AQ.BANDING,AQ.AXIS_SCALE_DATA,AQ.AXIS_ORIGIN,AQ.MAX_SIZE_TYPE,AQ.MAX_SIZE_VALUE,AQ.MIN_SIZE_TYPE,AQ.MIN_SIZE_VALUE];var Ap=[n.SHAPE_LINE_COMBINED_STYLE,n.SHAPE_BORDER_COMBINED_STYLE,n.SHAPE_FILL_TRANSPARENCY];function AG(At){var As=typeof At;if(As==="object"||As==="array"){return new AY({jsonObj:At,parent:undefined});}return At;}function AM(As){var Au=1,At;if(As===Ab.NONE){At=Aq.LS_NONE;Au=0;}else{if(As===Ab.DASHED){At=Aq.LS_DASH;}else{if(As===Ab.DOTTED){At=Aq.LS_DOT;}else{At=Aq.LS_SOLID;if(As===Ab.THICK){Au=2;}}}}return{ceLnStyle:At,thk:Au};}function AE(){var As={},At=this.getShowDataLabelOptions();At.forEach(function(Au){As[Au.key]=Ad;});return As;}function M(As){var Av=this.getShowDataLabelOptions(),Au=true,At;Av.forEach(function(Aw){At=Aw.key;if(At!=="AllMetrics"){if(As[At]===undefined){As[At]=false;}if(As[At]===false){Au=false;}}});As.AllMetrics=Au;}function Y(As){if(typeof As==="boolean"){return As===true?1:0;}return As;}function Ae(Au,At){var As=AG({});As.setProperty(Au,At,true);return As.jsonObj;}function AX(Ax){var Au={},Az,As=Ax.existing,At,Ay={},A0={rfLnFntClr:true,rfLnFntFml:true,rfLnFntStyle:true,rfLnFntSz:true,trdRefLnClr:true,trdRefLnStyle:true,trdRefLnThk:true},Aw={metricId:"metricId",trdTp:"lineType",trdLvl:"lineLevel",trdSeason:"seasonality",trdIncBB:"includeBreakby",trdEnabled:"enabled",dropzoneId:"dropzoneId",refTp:"lineType",refLvl:"lineLevel",refLbTp:"lineLabel",trdDgr:"lineConstant",refCstVl:"lineConstant",refEnabled:"enabled",modix:"lineIndex",trdFstEnabled:"enabled",trdBbForeEnabled:"enabled",trdBwdFst:"min",trdFwdFst:"max",trdBbForeBwd:"min",trdBbForeFwd:"max",subAxis:"subAxis",refLnName:"refLnName"};if(Ax.trdRefLnCmbStyle!==undefined){var Av=AM(Ax.trdRefLnCmbStyle);Ax.trdRefLnStyle=Av.ceLnStyle;Ax.trdRefLnThk=Av.thk;}for(Az in Ax){if(Ax.hasOwnProperty(Az)){if(A0[Az]===true){if(Az.indexOf(AP)>=0&&As){Ay[Az]=Ae(Az,Ax[Az]);}else{Ay[Az]=Y(Ax[Az]);}}else{At=Aw[Az];if(At!==undefined){Au[At]=Y(Ax[Az]);}}}}Au.format=Ar.replaceSpecialChars(JSON.stringify(Ay));return Au;}function AV(At,A0,Az){var A6=this.GMController,Av=A0.key.split(",")[0],A8=this.model.data,Ax,A3,A7=At.jsonObj,A2=["existing","trdBwdFst","trdDgr","trdEnabled","trdFwdFst","trdIncBB","trdLvl","trdTp","refLvl","refTp","refEnabled","refCstVl"],A5,A1=false,A4,Aw,Au,As;if(A7.modix===undefined){return true;}A5=A7.modix-1;if(Av.indexOf("Axis")>=0){A3=A8.dz[Av[0]+"Axis"].mdls;}else{Ax=A6.getMetricIndexFromID(Av);A3=A8.gsi.mx[Ax].mdls;}A4=A3.mod_c[A5];Aw=A4.fms;if(Aw===""||Aw===undefined){As={};}else{Au=Ar.restoreSpecialChars(Aw);As=JSON.parse(Au);}if(A7.trdRefLnCmbStyle!==undefined){var Ay=AM(A7.trdRefLnCmbStyle);A7.trdRefLnStyle=Ay.ceLnStyle;A7.trdRefLnThk=Ay.thk;As.trdRefLnStyle=A7.trdRefLnStyle;As.trdRefLnThk=Ay.thk;}Q.forEach(At.modifiedPropertyKeys,function(A9){if(A2.indexOf(A9)!==-1){A1=true;}var BA=A7[A9];if(As[A9]!==undefined){if(A9.indexOf(AP)>=0){As[A9]=Ae(A9,BA);}else{As[A9]=Y(BA);}}if(A9===AQ.REF_LINE_NAME){A4.lin=BA;}});A4.fms=Ar.replaceSpecialChars(JSON.stringify(As));if(!Az){A4.la=A7.refLbTp;}return A1;}function AK(Aw){var Ay=this.GMController[AQ.REF_LINE_DEF],At=Aw.key.split(","),As=At[0],A0=At[1],Au=Ay[As]||{},Az=s[A0],Ax=Au[Az],Av;Q.forEach(Ax,function(A1){if(A1.modix===Aw.modix){Av=A1;return false;}});return Av;}function AN(At,Aw,Ax){var Ay=Aw.modifiedPropertyKeys,Az=Aw.jsonObj,As=Ay.length,Av,Au;for(Av=0;Av<As;Av++){Au=Ay[Av];if(Az[Au]==="default"){delete At[Au];delete At[Au+AS];continue;}At[Au]=Az[Au];if(Ax!==true){At[Au+AS]=Az[Au+AS];}}return At;}function k(Au){var At,Av,As=[AQ.TREND_SEASONALITY,AQ.TREND_FORECAST_ENABLED,AQ.TREND_BWD_FORECAST,AQ.TREND_FWD_FORECAST];for(At=0,Av=Au.length;At<Av;At++){if(As.indexOf(Au[At])>=0){return true;}}return false;}function Af(Au){var As=typeof Au,At;if(As==="number"||As==="string"){At=mstrmojo.gm.ShapeFillType.Solid;}else{At=mstrmojo.gm.ShapeFillType.Gradient;}return At;}function V(At,As){if(typeof As==="object"&&At.indexOf(AP)>=0){return As[At];}return As;}function AO(At,Av,Au,As){if(!As&&At.indexOf(AP)>=0){Av=Ae(At,Av);}if(Au===undefined){var Ax=AF[At];if(Ax){this.setWidgetPropertyValue(Ax,Af(Av));}this.setWidgetPropertyValue(At,(Av&&Av.jsonObj)||Av);}else{var Aw=this.getWidgetPropertyValue(At);if(Aw===undefined){Aw={};}Aw[Au.key]=(Av&&Av.jsonObj)||Av;this.setWidgetPropertyValue(At,Aw);}}function W(Aw,At,As){if(this.noData){return ;}var Ay,Ax,A0=this,A2,Av,Au,Az,A3=false,A1=this.GMController,A4;if(Aw===AQ.METRIC_SHAPES){A2=At.modifiedPropertyKeys[0];Ax={key:A2};Ay=this.readGlobalProperty(AQ.TREND_LINE_DEF,Ax);if(Ay.jsonObj[AQ.TREND_ENABLED]){Av=A1.getMetricIndexFromID(A2);Au=Ar.isTrendLineAvailableForMetric(this,Av);Az=Ar.isTrendLineAvailableForMetric(this,Av,At.jsonObj[A2]);if(Au!==Az){A3=true;}}}else{if(Aw===AQ.SHAPE){if(As.isABL&&As.dirc===An.EnumABLDirection.HORIZONTAL){A4=A1.getMetricsOnXAxis();}else{if(As.isBubbleOrScatter||(As.isABL&&As.dirc===An.EnumABLDirection.VERTICAL)){A4=A1.getMetricsOnYAxis();}}Q.forEach(A4,function(A5){A2=A1.model.getMetricIDsFromIndex([A5])[0];Ax={key:A2};Ay=A0.readGlobalProperty(AQ.TREND_LINE_DEF,Ax);if(Ay.jsonObj[AQ.TREND_ENABLED]){Au=Ar.isTrendLineAvailableForMetric(A0,A5);Az=Ar.isTrendLineAvailableForMetric(A0,A5,At);if(Au!==Az){A3=true;return false;}}});}}return A3;}function Ag(At,Av,Ax){if(this.noData){return false;}if(this.skipSuppressDataCheck){return false;}if(D.indexOf(At)>=0){return true;}if(W.call(this,At,Av,Ax)){return true;}if(At===AQ.SHAPE){var As=this.readGlobalProperty(At),Au=this.GMController,Aw;if(Au.getUnitsCountInSliceBy()>0&&(U.PIE===As||U.RING===As)){return true;}Aw=this.readGlobalProperty(AQ.SUB_TYPE);if((U.AREA===As||U.AREA===Av)&&Aw===Al.AUTO){return true;}}return false;}function AL(Ay,Aw){var Ax=this.GMController,Az=this.getChartInfo();Aw.puFiltersConfig={};if(Ax.showMetricSortIcon){var Av=this.getWidgetPropertyValue(AQ.SORT_INDEX),At=this.getWidgetPropertyValue(AQ.SORT_ORDER),Au=(Ay===Al.STACKED||Ay===Al.PERCENT||(Ay===Al.AUTO&&Az.tp===H.AREA)),As=Ax.getUpdateMetricSortAction(Av,At,Au);Aw.actions.push(As);}}function Aj(At,As){At=parseInt(At,10);if(As===Aq.LS_NONE||At===0){return Ab.NONE;}if(As===Aq.LS_DASH){return Ab.DASHED;}if(As===Aq.LS_DOT){return Ab.DOTTED;}if(As===Aq.LS_SOLID){if(At===1){return Ab.THIN;}return Ab.THICK;}}function Ah(Au,At){var As={};if(At){Q.forEach(Au,function(Av){if(Av===AQ.TREND_REF_LINE_COMBINED_STYLE){As[AQ.TREND_REF_LINE_THICKNESS]=At[AQ.TREND_REF_LINE_THICKNESS];As[AQ.TREND_REF_LINE_STYLE]=At[AQ.TREND_REF_LINE_STYLE];As[AQ.TREND_REF_LINE_COMBINED_STYLE]=Aj(At[AQ.TREND_REF_LINE_THICKNESS],At[AQ.TREND_REF_LINE_STYLE]);}else{As[Av]=At[Av];}});}return As;}function z(Av,A1,Ax){var BC,Ay,A0,BB,BA=this.GMController,Az=this.model.data.dz.visProp.fmt.allShpFmt,A2,Au=BA.getDefaultsForShape(BA.getChartInfo().shape),Aw=[];if(Av===K.ALL_SHAPE){Aw.push(Au);Ay=n.ALL_SHAPE_FORMAT;A0=this.getWidgetPropertyValue(Ay);Aw.push(A0);}else{if(Av===K.COLOR_BY){Q.forEach(Ax,function(BD){Aw.push(Au);A2=BA.getShapeFormatsWithCombination(BD);if(A2){Aw.push(A2);}else{Aw.push(Ar.stringToJSON(Az));}});}else{if(Av===K.METRIC){Q.forEach(Ax,function(BD){Aw.push(Au);Aw.push(BA.getShapeFormatsWithCombination(BD));});}else{if(Av===K.ITSELF){Q.forEach(A1,function(BD){if(BD.isPie){Aw.push(BD.sPieDP.getFormattingProperties(BD.sliceIdx));}else{BB=BD.getGraphCell();Aw.push(BB.getFormattingProperties());}});}}}}BC=Ar.getResolvedFormatsObject(Aw);var A3=BC.shpFillClr,A9;if(BC===Au){A9=BA.getVolatileDefaultsForShape(BA.getChartInfo().shape);}else{A9=BC;}if(A3!==undefined){A9[n.SHAPE_LINE_COLOR]=A9[n.SHAPE_FILL_COLOR]=A3;}var A6=false,A5=false,As=false,A7,A4;var At=[],A8;Q.forEach(Aw,function(BD){if(BD!==undefined){At.push(BD);}});A8=At.length;for(A7=0;A7<A8;A7++){A4=At[A7];if(A4[n.LINE_MARKER_COLOR]!==undefined){As=true;}if(A4[n.LINE_MARKER_BORDER_COLOR]!==undefined){A5=true;}if(A4[n.SHAPE_BORDER_COLOR]!==undefined){A6=true;}}if(!As){delete A9[n.LINE_MARKER_COLOR];}if(!A5){delete A9[n.LINE_MARKER_BORDER_COLOR];}if(!A6){delete A9[n.SHAPE_BORDER_COLOR];}return A9;}function AC(As){[n.SHAPE_LINE_COMBINED_STYLE,n.SHAPE_BORDER_COMBINED_STYLE].forEach(function(At){var Aw=At.replace("CmbStyle","Thk"),Av=At.replace("CmbStyle","Style"),Au=As[Aw],Ax=As[Av];if(Au!==undefined&&Ax!==undefined){As[At]=Aj(Au,Ax);}});}function x(At,As){if(!At){return ;}Q.forEach(Ap,function(Au){if(At[Au]!==undefined){if(As[Au]===undefined){As[Au]=[];}As[Au].push({val:At[Au],tmsp:At[Au+AS]});}});}function AU(Ay,Au){var At,As,Ax,Aw,Av;Q.forEach(Ap,function(Az){At=Ay[Az];As=Au[Az+AS];Ax=false;Av=false;Aw=undefined;Q.forEach(At,function(A0){if(As!==undefined&&A0.tmsp!==undefined&&A0.tmsp>As){Ax=true;}if(Aw===undefined){Aw=A0.val;}else{if(Aw!==A0.val){Av=true;}}});if(As===undefined||Ax){if(Av){Au[Az]=undefined;}else{if(Aw!==undefined){Au[Az]=Aw;}}}});}function t(As,Au){var At;Q.forEach(Au,function(Av){At=false;Q.forEach(As,function(Aw){if(Aw.tp===4&&Aw.eid===Av.eid){At=true;return false;}});if(!At){return false;}});return true;}function AB(Aw,At,As){var Au=[],Av=Ar.reverseMapping(At);Q.forEach(Aw,function(Ax){if(Ax.tid===-1){if(As){Au.push(Ax);}}else{if(Av[Ax.tid]!==undefined){Au.push(Ax);}}});return Au;}function R(Au,At,As){var Aw={},Av=[];Au.forEach(function(Ay){var Ax=AB(Ay,At,As),Az=Ar.serializeCombination(Ax);if(Aw[Az]===undefined){Aw[Az]=true;Av.push(Ax);}});return Av;}function G(){var As=this.model.data||{},At=F.getPropertyByPath(As,"gts.row",[]),Av=F.getPropertyByPath(As,"gts.col",[]),Au=At.concat(Av);return Au;}function AI(As){if(!As||As.length<=0){return undefined;}var At,Au=true,Av=As.length;if(Av===1){return As[0];}for(At=1;At<Av;At++){if(As[At]!==As[At-1]){Au=false;break;}}if(Au){return As[0];}return undefined;}function P(Aw,At,Av,Au){var Ay,Ax,As={};["jsonObj","modifiedPropertyKeys","opt"].forEach(function(Az){if(Aw.hasOwnProperty(Az)){As[Az]=Z.clone(Aw[Az]);}});Ay=As.jsonObj;if(Av){for(Ax in At){if(At.hasOwnProperty(Ax)){Ay[Ax]=At[Ax];}}}else{Q.forEach(Au||As.modifiedPropertyKeys,function(Az){if(At.hasOwnProperty(Az)){Ay[Az]=At[Az];}});}return As;}function E(Ax,Av,Ay,Au){var At,Aw,As=[];for(At in Ay){if(((Au&&At==="AllMetrics")||(!Au&&At!=="AllMetrics"))&&Ay.hasOwnProperty(At)){Aw={};Aw.modifiedPropertyKeys=Z.clone(Av);Aw.jsonObj=Z.clone(Ay[At]);As.push({name:Ax,value:Aw,option:{key:At}});}}return As;}function b(As,At){return As===AQ.REF_LINE_DEF&&At[S].modifiedPropertyKeys[0]===AQ.REF_LINE_NAME;}function e(){return{suppressData:true,needRefresh:true,actions:[],undoRedoCallback:undefined};}function f(Ax,At,A1){var Aw,Au=A1.length,As,Av,Az,Ay,A0;if(Ax===AQ.REF_LINE_DEF||Ax===AQ.TREND_LINE_DEF){Ax=At.modifiedPropertyKeys[0];A0=Ax;if(Ax===n.REF_LABELS_FONT_COLOR||Ax===AQ.TREND_REF_LINE_COLOR){return false;}if(Ax===AQ.TREND_REF_LINE_COMBINED_STYLE){A0=AQ.TREND_REF_LINE_THICKNESS;}if(!At.jsonObj.fmt){return true;}A1=[];A1.push(At.jsonObj.fmt[A0]);Au=A1.length;At=At.jsonObj[A0];}if(Au<=0){return true;}if(Ax.indexOf("FntStyle")>=0){Az=At&1;Ay=At&2;for(Aw=0;Aw<Au;Aw++){As=A1[Aw];if(typeof As==="object"){As=As[Ax];}if((Az!==(As&1))||(Ay!==(As&2))){return true;}}return false;}if(Ax.indexOf("LnCmbStyle")>=0){if(A0===n.TREND_REF_LINE_THICKNESS){Av=At;}else{Av=AM(At).thk;}for(Aw=0;Aw<Au;Aw++){if((Av!==2&&A1[Aw]===2)||(Av===2&&A1[Aw]!==2)){return true;}}return false;}return true;}mstrmojo.gm._GMPropertyHandler=mstrmojo.provide("mstrmojo.gm._GMPropertyHandler",{scriptClass:"mstrmojo.gm._GMPropertyHandler",getWidgetPropertyDefaultValue:function(At,As){return this.property.readItemDefault(At,As);},getWidgetPropertyValue:function(As){return this.property.readItem(As);},setWidgetPropertyValue:function(At,As){if(At===n.V_MATRIX_LINES_SHOW||At===n.H_MATRIX_LINES_SHOW){this.property.removeItem(AQ.MATRIX_LINES);}if(At===n.X_AXIS_LINE_SHOW||At===n.Y_AXIS_LINE_SHOW){this.property.removeItem(AQ.AXES);}this.property.updateItem(At,As);},removeWidgetProperty:function(As){this.property.removeItem(As);},getWidgetProps:function(){return this.property.generalProps;},isXMLDirty:function(){return this.property.isXMLDirty();},resetXMLDirtyFlag:function(){this.property.resetXMLDirtyFlag();},readGlobalProperty:function(A3,A2){if(A3.indexOf("CmbStyle")!==-1){var A5=A3.replace("CmbStyle","Thk"),A7=A3.replace("CmbStyle","Style"),A0=this.readGlobalProperty(A5,A2),BD=this.readGlobalProperty(A7,A2);if(A0===undefined||BD===undefined){return undefined;}return Aj(A0,BD);}if(A3===AQ.TREND_BUBBLE_MAX||A3===AQ.TREND_BUBBLE_MIN){var BA=this.getGlobalExtremeForAxisOrMetric(A2.key,A2.sizeBy);if(A3===AQ.TREND_BUBBLE_MAX){return BA.max;}return BA.min;}if(A3===n.COLOR_SQUARE_COLOR){var A9=this.colorSqureIdentity;if(A9){return{color:A9.decodedColor,isDefaultColor:A9.isDefaultColor};}return{color:"#0000FF",isDefaultColor:true};}if(A3===AQ.TREND_LINE_DEF){var As=this.GMController.trConfigPool||{},A1,Av;if(A2===undefined){return AG.call(this,As.globalProp||{});}A1=Z.clone(As[A2.key]);Av=this.makeDefaultsObjectAtOption(A3);Z.copy(A1,Av);Av.trdRefLnCmbStyle=Aj(Av.trdRefLnThk,Av.trdRefLnStyle);return AG.call(this,Av);}if(A3===AQ.TREND_BUBBLE_FORE_DEF){var A4=this.GMController[AQ.TREND_BUBBLE_FORE_DEF],Ax=A4[A2.key],BH=this.makeDefaultsObjectAtOption(A3);Z.copy(Ax,BH);return AG.call(this,BH);}if(A3===AQ.REF_LINE_DEF){var A8=AK.call(this,A2),BC=this.makeDefaultsObjectAtOption(A3);Z.copy(A8,BC);BC.trdRefLnCmbStyle=Aj(BC.trdRefLnThk,BC.trdRefLnStyle);return AG.call(this,BC);}if(A3===AQ.AXIS_SCALE_DATA){var Az,Aw;Az=this.getWidgetPropertyValue(A3);Aw=L.createAxisScaleCollectionFromArrays(Az);if(A2===undefined){return AG.call(this,Aw);}return AG.call(this,Aw[A2.key]);}if(A3===AQ.METRIC_LEVEL_DATA_LABEL){var At=this.getWidgetPropertyValue(AQ.METRIC_LEVEL_DATA_LABEL);if(!At){At=AE.call(this);}else{M.call(this,At);}if(!A2){return new AY({jsonObj:At,parent:undefined});}if(At[A2.key]!==undefined){return At[A2.key];}return this.makeDefaultsObjectAtOption(A3);}if(A3===AQ.AXIS_ORIGIN){var BB=this.getWidgetPropertyValue(AQ.AXIS_ORIGIN);if(!BB){BB=this.createAxisOriginObject();}if(!A2){return new AY({jsonObj:BB,parent:undefined});}if(BB[A2.key]!==undefined){return new AY({jsonObj:BB[A2.key],parent:undefined});}return new AY({jsonObj:this.makeDefaultsObjectAtOption(A3),parent:undefined});}if(A3===n.LINE_MARKER_COLOR){var Ay={},BF=this.GMController,A6=BF&&BF.colorByInfo,Au=A6&&A6.tp,BG=this.getWidgetPropertyValue(n.LINE_MARKER_COLOR),BE;if(BG===undefined){if(Au===o.NULL){BE=BF.getVolatileDefaultsForShape(BF.getChartInfo().shape);}Ay[n.LINE_MARKER_COLOR]=BE&&BE[n.SHAPE_FILL_COLOR];Ay[n.LINE_MARKER_COLOR+g]=true;}else{Ay[n.LINE_MARKER_COLOR]=BG;Ay[n.LINE_MARKER_COLOR+g]=false;}return AG(Ay);}return this.readPropertiesUniformly(A3,A2);},readPropertiesUniformly:function(Aw,Ax){var Ay,Av,Au,As,Az,A0,At=J.getUnderlyingPropertyNameWithAll(Aw);Ay=At.length;if(Ay>1){Au=this.getWidgetPropertyValue(At[0]);for(Av=1;Av<Ay;Av++){As=V(At[Av],this.getWidgetPropertyValue(At[Av]));if(As!==Au){if(Aw===n.ALL_GRID_LINES_SHOW){if(Au===q.SHOW&&As===q.HIDE){return q.SHOW_MAJOR_ONLY;}}return undefined;}}return Au;}Az=this.getWidgetPropertyValue(Aw);if(Ax!==undefined){if(Az!==undefined){A0=Az[Ax.key];if(A0!==undefined){return new AY({jsonObj:A0,parent:undefined});}A0=this.makeDefaultsObjectAtOption(Aw);}else{A0=this.makeDefaultsObjectAtOption(Aw);}return AG(A0);}if(Az!==undefined){return AG(Az);}if(X.indexOf(Aw)>=0){return new AY({jsonObj:{},parent:undefined});}return undefined;},writeGlobalProperty:function AR(Ax,Ay,At,Aw,As){var Au=this,Az,Av=e();Au.GMController.clearShapeFormatsCache();if(Ax!==""&&Ax!==undefined){if(this.syning){return ;}if(Ax===n.COLOR_SQUARE_COLOR){if(this.colorSqureIdentity){this.updateColorByMap([this.colorSqureIdentity.comb],Ay);}return ;}if(Ax.indexOf("CmbStyle")!==-1){Av=this.processCombineLineStyle(Ax,Ay,At);}else{if(Ax===AQ.TREND_LINE_DEF){Av=this.processTrendLine(Ax,Ay,At);}else{if(Ax===AQ.REF_LINE_DEF){Av=this.processReferenceLine(Ax,Ay,At);}else{if(Ax===AQ.TREND_BUBBLE_FORE_DEF){Av=this.processTrendLineForcast(Ax,Ay,At,Aw);}else{if(Ax===AQ.AXIS_SCALE_DATA){Av=this.processAxisScale(Ax,Ay,At,Aw);}else{if(Ax===AQ.METRIC_LEVEL_DATA_LABEL){Av=this.processMetricLevelDataLabel(Ax,Ay,At);}else{if(Ax===AQ.AXIS_ORIGIN){Av=this.processAxisOrigin(Ax,Ay,At);}else{if(Ax===n.ALL_GRID_LINES_SHOW){Av=this.processGridLineShow(Ax,Ay);}else{if(Ax===n.LINE_MARKER_COLOR){Av=this.processLineMarkColor(Ax,Ay);}else{Av=this.processPropertiesUniformly(Ax,Ay,At,As);}}}}}}}}}}if(Aw){return ;}Az=this.getPropertyUpdateCallback(Ax,Ay,At,As,Av.suppressData);if(Av.suppressData){Au.partialUpdate(Ax,{allVal:Ay},Av.needRefresh,At);if(Az.success){Az.success();}}this.submitUpdatesAndPersistXML(Av.actions,Az,Av.undoRedoCallback,Av.suppressData,false,Av.puFiltersConfig);},getRaiseEventCallback:function(Av,Aw,At,As){var Au=this.id;return{success:function(){var Ax=j.all[Au];Ax.syning=true;if(Av===n.MODIFIED_DEF_FILL_COLOR){Ax.raiseEventShapeFormattingChanged(n.SHAPE_FILL_COLOR);}else{Ax.raiseEventGlobalPropertyChanged(Av,Aw,At||{});}if(As){As.forEach(function(Ay){Ax.raiseEventGlobalPropertyChanged(Ay.name,Ay.value,Ay.option);});}Q.forEach(J.propertyMap[Av],function(Ay){Ax.raiseEventGlobalPropertyChanged(Ay,Ax.readGlobalProperty(Ay,At),At||{});});Ax.syning=false;}};},getPropertyUpdateCallback:function(Ax,Au,Ay,Aw,As){var Az=false,At,A0={},Av;if(Ax===AQ.SHAPE||Ax===AQ.METRIC_SHAPES||Ax===AQ.SUB_TYPE||Ax===n.TOTAL_SHOW||Ax===n.INT_SUM_SHOW||Ax===AQ.SHOW_BOTH_TOTALS){Az=true;}if(!Az){Av=this.getRaiseEventCallback(Ax,Au,Ay,Aw);Ao(Av,A0);}if(!As){if(Az){Ao(this.getXTabRefreshCallBack(),A0);}else{Ao(this.getDocModelSliceCallback(),A0);}}else{if(Az){At=this.zonesModel.getUpdateCallback();Ao(At,A0);}}return A0;},processCombineLineStyle:function(Au,As,Aw){var Az=this,Av=this.id,Ax=e(),A0=this.readGlobalProperty(Au,Aw),A1=[],Ay,At=function(A7,A6){var A5=Au.replace("CmbStyle","Thk"),A3=Au.replace("CmbStyle","Style"),A4=AM(A6),A2=A4.thk,A8=A4.ceLnStyle;A7.writeGlobalProperty(A5,A2,Aw,true);A7.writeGlobalProperty(A3,A8,Aw,true);};J.getUnderlyingPropertyNameWithAll(Au.replace("CmbStyle","Thk")).forEach(function(A2){A1.push(Az.getWidgetPropertyValue(A2));});At(this,As);Ax.needRefresh=f(Au,As,A1);Ay=Ax.needRefresh;Ax.undoRedoCallback={undo:function(){var A2=j.all[Av];At(A2,A0);A2.doUpdateOnUndoRedo(Au,A0,{allVal:A0},Ay,Aw,undefined);},redo:function(){var A2=j.all[Av];At(A2,As);A2.doUpdateOnUndoRedo(Au,As,{allVal:As},Ay,Aw,undefined);}};return Ax;},processTrendLine:function(Ax,Av,Ay){var A6,A4,A5,Az,A2=this,A1=e(),Au=Av.modifiedPropertyKeys,As=false,Aw=false,A0=this.GMController.trConfigPool,At=this.getChartInfo(),A3=At.isABL;if(Ay===undefined){A1.suppressData=false;A6=Av.jsonObj;Au.forEach(function(A7){if(A7===AQ.TREND_SEASONALITY){As=true;}else{Aw=true;}});for(A4 in A0){if(A4.length===32&&A0.hasOwnProperty(A4)){A5=A0[A4];if(A5.existing&&(As||Aw)){A2.collectABLForecastActions(A6,A4,A1.actions);}}}}else{A5=Av.jsonObj;if(A3){A6=this.readGlobalProperty(Ax,undefined).jsonObj;}else{A6=undefined;}Az=Ah(Au,A5.fmt);A1.suppressData=!AV.call(A2,Av,Ay,true);A2.collectTrendLineAction(A5,A1.actions,Ay.key);this.checkCustomScaleNotificationForTrendLine(Ay.key);if(A3){if(k(Au)){A2.collectABLForecastActions(A6,Ay.key,A1.actions);}if(Au[0]===AQ.TREND_TYPE&&this.isSeasonalityEnabled()&&(A5[AQ.TREND_TYPE]===An.EnumTrendLineModelType.LOG||A5[AQ.TREND_TYPE]===An.EnumTrendLineModelType.POW)){this.trendSeasonalityError=true;}}A1.needRefresh=f(Ax,Av,[]);this.getUndoRedoCallBackForTrdRefLine(A1,Ax,Av,Az,A1.needRefresh,Ay,true);}return A1;},getPartialUpdateFilterConfigForRefLine:function(){return{data:{include:{dz:true,gsi:true,ghs:true,trendref:true,extrs:true}}};},processReferenceLine:function(Ax,As,Ay){var A1=this,Az,A0=e(),A3=this.GMController,At=As.modifiedPropertyKeys,A2=As.jsonObj,Aw=false,Av=Ay.key.split(","),Au=Av[0],A4=Av[1];if(At[0]===AQ.REF_CONST_VALUE){As.setProperty(AQ.REF_ENABLED,true);}if(At.indexOf(AQ.REF_SHOW_LABEL)>=0){Aw=true;}if(At.indexOf(AQ.REF_ENABLED)>=0&&As.jsonObj[AQ.REF_ENABLED]){Aw=true;}if(Aw){if(A2[AQ.REF_SHOW_LABEL]){if(A2[AQ.REF_LABEL_TYPE]<=0){As.setProperty(AQ.REF_LABEL_TYPE,AJ.DssModelLabelsType);}}else{As.setProperty(AQ.REF_LABEL_TYPE,AJ.DssModelLabelsNone);}}Az=Ah(At,AK.call(this,Ay));A0.puFiltersConfig=this.getPartialUpdateFilterConfigForRefLine();if(A3.isStacked&&!A3.splitPlottingMetrics){A2.dropzoneId=(Au==="YAxis"||Au==="Y2Axis")?4:3;A2.subAxis=Au.search("2")>=0?1:0;}else{A2.metricId=Au;}A2[AQ.REF_TYPE]=s[A4];if(A2[AQ.REF_ENABLED]===false&&At.indexOf(AQ.REF_ENABLED)>=0){A0.suppressData=false;A1.collectRemoveRefLineAction(A2,A0.actions);}else{A0.suppressData=!AV.call(A1,As,Ay,false);if(A3.isStacked&&!A3.splitPlottingMetrics){Au=undefined;}A1.collectRefLineAction(A2,A0.actions,Au);}A0.needRefresh=f(Ax,As,[]);this.getUndoRedoCallBackForTrdRefLine(A0,Ax,As,Az,A0.needRefresh,Ay,false);return A0;},processTrendLineForcast:function(Ax,Az,Av,Aw){var At=e(),Ay=this.GMController;At.suppressData=false;if(Aw){AN((Ay[AQ.TREND_BUBBLE_FORE_DEF])[Av.key],Az,true);}var Au=Az.jsonObj,As=AX(Au);if(typeof As.max==="number"){As.max=String(As.max);}if(typeof As.min==="number"){As.min=String(As.min);}As.metricId=Av.key;At.actions.push(this.getUpdateForecastInfoAction(As));return At;},generateUndoRedoConfigForAxisConfig:function(Az,Av,A0,Ay,At){var A2,As,Ax={},A1=Ay?this.undoPropValConfig:this.redoPropValConfig,Au=this.undoPropValConfig.modifiedKeys,Aw=A1[Az];Ax[Az]=At?L.serializeCollection2String(Aw):Aw;if(A1.hasOwnProperty(AQ.AXIS_SCALE)){Ax[AQ.AXIS_SCALE]=A1[AQ.AXIS_SCALE];}As=E(Az,Au,Aw,A0.key!=="AllMetrics");if(Ay){A2=P(Av,Aw[A0.key],false,Au);return{undoPropValConfig:Ax,associatedOptionsForUndo:As,undoValue:A2};}delete this.undoPropValConfig;delete this.redoPropValConfig;return{redoPropValConfig:Ax,associatedOptionsForRedo:As,redoValue:Av};},updateUndoRedoConfigForAxisConfig:function(At,Ax,Aw,Au){if(!this.undoPropValConfig){this.undoPropValConfig={modifiedKeys:[]};}if(!this.redoPropValConfig){this.redoPropValConfig={};}var As=At?this.undoPropValConfig:this.redoPropValConfig,Av=function(Az,A0){var Ay;if(Q.isArray(A0)){Ay=Az[Ax];Q.forEach(A0,function(A1){if(Ay.indexOf(A1)<0){Ay.push(A1);}});}else{if(typeof A0==="object"){Ay=Z.clone(A0);}else{Ay=A0;}}Az[Ax]=Ay;};if(Au||!As.hasOwnProperty(Ax)){Av(As,Aw);}},processAxisScale:function(Az,Av,A0,A3){var A5,A4,Ay,A1,Aw,Au,A2=e(),At=Av.modifiedPropertyKeys;A4=this.getWidgetPropertyValue(Az);Ay=L.createAxisScaleCollectionFromArrays(A4);this.updateUndoRedoConfigForAxisConfig(true,Az,Ay);if(Av.jsonObj.scaleType!==r.CUSTOM&&At[0]!==AQ.LOG_SCALE){A2.suppressData=false;A2.puFiltersConfig={data:{include:{extrs:true}}};}if(At[0]!==AQ.LOG_SCALE){this.updateUndoRedoConfigForAxisConfig(true,AQ.AXIS_SCALE,this.getWidgetPropertyValue(AQ.AXIS_SCALE));this.setWidgetPropertyValue(AQ.AXIS_SCALE,r.CUSTOM);this.updateUndoRedoConfigForAxisConfig(false,AQ.AXIS_SCALE,r.CUSTOM,true);}else{this.logScaleChanged=true;}if(At[0]===AQ.SINGLE_AXIS_SCALE_TYPE&&Av.jsonObj[AQ.SINGLE_AXIS_SCALE_TYPE]!==r.CUSTOM){Av.setProperty(AQ.AXIS_SCALE_MANUAL_MIN,Av.jsonObj[AQ.AXIS_SCALE_REAL_MIN]);Av.setProperty(AQ.AXIS_SCALE_MANUAL_MAX,Av.jsonObj[AQ.AXIS_SCALE_REAL_MAX]);Av.setProperty(AQ.AXIS_SCALE_AUTO_MIN,false);Av.setProperty(AQ.AXIS_SCALE_AUTO_MAX,false);}if(A0.key==="AllMetrics"){var As=[AQ.AXIS_SCALE_AUTO_MIN,AQ.AXIS_SCALE_AUTO_MAX,AQ.AXIS_SCALE_MANUAL_MIN,AQ.AXIS_SCALE_MANUAL_MAX,AQ.SINGLE_AXIS_SCALE_TYPE];var Ax=As.indexOf(At[0]);if(Ax>=0){Q.forEach(As,function(A6){if(At.indexOf(A6)<0){At.push(A6);}});}for(A5 in Ay){if(A5!=="AllMetrics"&&Ay.hasOwnProperty(A5)){AN(Ay[A5],Av,true);}}}else{AN(Ay[A0.key],Av,true);}delete Ay.AllMetrics;A1=L.serializeCollection2String(Ay);this.setWidgetPropertyValue(AQ.AXIS_SCALE_DATA,A1);if(!A2.suppressData){this.setWidgetPropertyValue("axScaleModified",1);}this.updateUndoRedoConfigForAxisConfig(true,"modifiedKeys",At,true);this.updateUndoRedoConfigForAxisConfig(false,Az,Ay,true);if(!A3){Aw=this.generateUndoRedoConfigForAxisConfig(Az,Av,A0,true,true);Au=this.generateUndoRedoConfigForAxisConfig(Az,Av,A0,false,true);this.getUndoRedoCallBackForAxisConfig(A2,Az,Aw,Au,true,A0);}return A2;},processMetricLevelDataLabel:function(Av,At,Ax){var A0=e(),A1,Aw=this.id,A3=true,A2=this.readGlobalProperty(Av),Ay=A2.jsonObj,As=Ay[Ax.key],Au,Az=Z.clone(Ay);if(Ax.key==="AllMetrics"){for(A1 in Ay){if(Ay.hasOwnProperty(A1)){Ay[A1]=At;}}}else{Ay[Ax.key]=At;for(A1 in Ay){if(A1!=="AllMetrics"&&Ay.hasOwnProperty(A1)){if(Ay[A1]===false){A3=false;}}}if(Ay.AllMetrics!==undefined){Ay.AllMetrics=A3;}}this.setWidgetPropertyValue(Av,Ay);Au=Ay;A0.undoRedoCallback={undo:function(){var A4=j.all[Aw];A4.setWidgetPropertyValue(Av,Az);A4.doUpdateOnUndoRedo(Av,As,{allVal:As},true,Ax,undefined);},redo:function(){var A4=j.all[Aw];A4.setWidgetPropertyValue(Av,Au);A4.doUpdateOnUndoRedo(Av,At,{allVal:At},true,Ax,undefined);}};return A0;},processAxisOrigin:function(Aw,As,Ax){var A3,Av,Au,Ay=e(),At=As.modifiedPropertyKeys,A2=this.readGlobalProperty(Aw),A0=A2.jsonObj,Az=true,A1=null;if(At[0]===AQ.AXIS_ORIGIN_AUTO&&As.jsonObj[AQ.AXIS_ORIGIN_AUTO]===true){As.jsonObj[AQ.AXIS_ORIGIN_VALUE]=0;At.push(AQ.AXIS_ORIGIN_VALUE);}this.updateUndoRedoConfigForAxisConfig(true,Aw,A0);if(Ax.key==="AllMetrics"){if(At[0]===AQ.AXIS_ORIGIN_VALUE){At.push(AQ.AXIS_ORIGIN_AUTO);}for(A3 in A0){if(A0.hasOwnProperty(A3)){AN(A0[A3],As);}}if(A0.AllMetrics===undefined){A0.AllMetrics=Z.copy(As.jsonObj);}}else{AN(A0[Ax.key],As);Z.forEach(A0,function(A4,A5){if(A5!=="AllMetrics"){Az=Az&&A4.axOriAuto;if(A1===null){A1=A4.axOriValue;}else{if(A1!==undefined){if(A1!==A4.axOriValue){A1=undefined;}}}}});A0.AllMetrics={axOriAuto:Az,axOriValue:A1};}this.setWidgetPropertyValue(Aw,A0);this.setWidgetPropertyValue(n.X_AXIS_ORIGIN_LINE_SHOW,!As.jsonObj[AQ.AXIS_ORIGIN_AUTO]);this.setWidgetPropertyValue(n.Y_AXIS_ORIGIN_LINE_SHOW,!As.jsonObj[AQ.AXIS_ORIGIN_AUTO]);this.updateUndoRedoConfigForAxisConfig(true,"modifiedKeys",At,true);this.updateUndoRedoConfigForAxisConfig(false,Aw,A0,true);Av=this.generateUndoRedoConfigForAxisConfig(Aw,As,Ax,true,false);Au=this.generateUndoRedoConfigForAxisConfig(Aw,As,Ax,false,false);this.getUndoRedoCallBackForAxisConfig(Ay,Aw,Av,Au,true,Ax);return Ay;},processGridLineShow:function(Av,Aw){var As=e(),Au=this.id,Ax=this.readGlobalProperty(Av),At=function(A0,A1){var Az=A1,Ay=A1;if(A1===q.SHOW_MAJOR_ONLY){Az=q.SHOW;Ay=q.HIDE;}A0.setWidgetPropertyValue(n.MAJOR_GRID_LINES_SHOW,Az);A0.setWidgetPropertyValue(n.MINOR_GRID_LINES_SHOW,Ay);};At(this,Aw);As.undoRedoCallback={undo:function(){var Ay=j.all[Au];At(Ay,Ax);Ay.doUpdateOnUndoRedo(Av,Ax,{allVal:Ax},true,undefined,undefined);},redo:function(){var Ay=j.all[Au];At(Ay,Aw);Ay.doUpdateOnUndoRedo(Av,Aw,{allVal:Aw},true,undefined,undefined);}};return As;},processLineMarkColor:function(Ay,Az){var Ax=this.id,Aw=e(),Av=this.readGlobalProperty(Ay),Au=Z.clone(Az),At=function(A4,A2,A3){var A0=A3?A2:Z.clone(A2),A5=A2.jsonObj[Ay],A1;if(A5==="default"){A4.removeWidgetProperty(Ay);}else{A4.setWidgetPropertyValue(Ay,A5);}A1=A4.readGlobalProperty(Ay);A0.jsonObj[Ay]=A1.jsonObj[Ay];A0.jsonObj[Ay+g]=A1.jsonObj[Ay+g];return A0;},As=function(A2){var A1=j.all[Ax],A0=At(A1,A2);A1.doUpdateOnUndoRedo(Ay,A0,{allVal:A0},true,undefined,undefined);};Av.modifiedPropertyKeys.push(Ay);At(this,Az,true);Aw.undoRedoCallback={undo:function(){As(Av);},redo:function(){As(Au);}};return Aw;},processPropertiesUniformly:function(Ax,At,Ay,Av){var A0=this,Az=e(),Au,As=this.getChartInfo(),Aw={},A1=[];if(Ax===AQ.SUB_TYPE){AL.call(this,At,Az);}Au=J.getUnderlyingPropertyNameWithAll(Ax);Q.forEach(Au,function(A2){if(Az.suppressData){Az.suppressData=!Ag.call(A0,A2,At,As);}Aw[A2]=A0.getWidgetPropertyValue(A2);if(Ay&&Aw[A2]){Aw[A2]=Aw[A2][Ay.key];}if(A2.indexOf("FntStyle")>=0||A2.indexOf("LnThk")>=0){A1.push(Aw[A2]);}AO.call(A0,A2,At,Ay);});Q.forEach(Av,function(A2){var A3=J.getUnderlyingPropertyNameWithAll(A2.name);Q.forEach(A3,function(A4){AO.call(A0,A4,A2.value,A2.option);});});Az.needRefresh=f(Ax,At,A1);this.getUndoRedoCallBackForUniformProperty(Az,Ax,At,Aw,Az.needRefresh,Ay,Av);return Az;},getUndoRedoCallBackForUniformProperty:function(A0,Aw,At,Az,A1,Ay,Av){var Ax=this.id,As;function Au(A3,A2){Q.forEach(A2,function(A4){var A5=J.getUnderlyingPropertyNameWithAll(A4.name);Q.forEach(A5,function(A6){AO.call(A3,A6,A4.value,A4.option);});});}if(A0.suppressData){if(Av&&Av.length>0){As=Z.clone(Av);Q.forEach(As,function(A2){A2.value=A2.valueWas;});}A0.undoRedoCallback={undo:function(){var A5,A2,A3=j.all[Ax],A4=[];if(!A3){return ;}for(A5 in Az){if(Az.hasOwnProperty(A5)){A2=Az[A5];AO.call(A3,A5,A2,Ay,true);A2=V(A5,A2);A4.push(A2);}}Au(A3,As);A3.doUpdateOnUndoRedo(Aw,AI(A4),Az,A1,Ay,As);},redo:function(){var A2=j.all[Ax],A3=J.getUnderlyingPropertyNameWithAll(Aw);if(!A2){return ;}Q.forEach(A3,function(A4){AO.call(A2,A4,At,Ay);});Au(A2,Av);A2.doUpdateOnUndoRedo(Aw,At,{allVal:At},A1,Ay,Av);}};}},getUndoRedoCallBackForTrdRefLine:function(Ay,Au,As,Ax,A0,Aw,At){var Av=this.id,Az;if(Ay.suppressData){Az=P(As,Ax,true);Ay.undoRedoCallback={undo:function(){var A1=j.all[Av];if(!A1){return ;}AV.call(A1,Az,Aw,At);A1.doUpdateOnUndoRedo(Au,Az,{allVal:Az},A0,Aw,undefined);},redo:function(){var A1=j.all[Av];if(!A1){return ;}AV.call(A1,As,Aw,At);A1.doUpdateOnUndoRedo(Au,As,{allVal:As},A0,Aw,undefined);}};}},getUndoRedoCallBackForAxisConfig:function(At,Az,As,Av,Au,Aw){var Ax=this.id,Ay;if(At.suppressData){Ay=function(A1,A0){var A2;if(!A1){return ;}for(A2 in A0){if(A0.hasOwnProperty(A2)){A1.setWidgetPropertyValue(A2,A0[A2]);}}};At.undoRedoCallback={undo:function(){var A0=j.all[Ax];if(!A0){return ;}Ay(A0,As.undoPropValConfig);A0.doUpdateOnUndoRedo(Az,As.undoValue,{allVal:As.undoValue},Au,Aw,As.associatedOptionsForUndo);},redo:function(){var A0=j.all[Ax];if(!A0){return ;}Ay(A0,Av.redoPropValConfig);A0.doUpdateOnUndoRedo(Az,Av.redoValue,{allVal:Av.redoValue},Au,Aw,Av.associatedOptionsForRedo);}};}},doUpdateOnUndoRedo:function(Aw,Ax,At,Au,Av,As){var Ay;if(Aw===mstrmojo.gm.FormatingPropertyTag.MODIFIED_DEF_FILL_COLOR){this.GMController.clearShapeFormatsCache();}this.partialUpdate(Aw,At,Au,Av,true);Ay=this.getPropertyUpdateCallback(Aw,Ax,Av,As,true);if(Ay.success){Ay.success();}},processChangeShape:function AD(Az){var Av=[],Aw=this,Ay=Aw.GMController.dz,Au=Ay.SliceBy.TemplateUnit||[],As=Ay.AngleBy.TemplateMetric||[],At=Ay.SizeBy.TemplateMetric||[],Ax=G.call(Aw);this.zonesModel.CARDLIMIT=AH;this.zonesModel.checkAndWarnLargeItemsForAddUnits(Ax,function(){if(Ay.SliceBy.MetricNames!==undefined){Au.push(AT);}if(Az===U.AREA){Q.forEach(At,function(A0){A0.zone=u.SizeBy;if(!A0.did){A0.did=A0.id;}A0.cs=1;});Av=At;}if(Az!==U.PIE&&Az!==U.RING){Q.forEach(Au,function(A0){A0.zone=u.SliceBy;if(!A0.did){A0.did=A0.id;}A0.cs=1;});Q.forEach(As,function(A0){A0.zone=u.Angle;if(!A0.did){A0.did=A0.id;}A0.cs=1;});Av=(Av||[]).concat((As.concat(Au||[])));}if(Av.length>0){Aw.changeShapeProperty(AQ.SHAPE,Az);Aw.zonesModel.gmZones.deleteItems(Av,undefined,true);}else{Aw.writeGlobalProperty(AQ.SHAPE,Az);}});},getPartialUpdateType:function(As){if(h.indexOf(As)>=0){return l.UPDATE_ALL;}if(N.indexOf(As)>=0){return l.UPDATE_CHARTS;}if(C.indexOf(As)>=0){return l.SPLITTER_LINE_SCALE;}if(I.indexOf(As)>=0){return l.CHART_SCALE;}return l.UNKNOW;},partialUpdate:function(Av,As,A0,Aw,Au){var At,Ay,Az=this,Ax=false;if(this.noData){return ;}Ar.startTimer({functionName:"VisGraphMatrix.partialUpdate",purpose:"Partial update of GraphMatrix ("+this.k+")"});At=J.getUnderlyingPropertyNameWithAll(Av);this.resetAxisProps(At);this.resetHTML5Props();this.configureTrendAndRefLine(Av);this.resetGMCtrlCache(Av,As);this.setUpForceUpdateFlag(Av);Ax=b(Av,As);if(A0&&!Ax){Ax=this.handlePartialUpdate(this.getPartialUpdateType(Av),Au);}if(!Ax){if(Ac.indexOf(Av)>=0){At=[Av];}At.forEach(function(A1){Ay=Az.updateSingleProperty(A1,As,A0,Aw);Ax=Ax||Ay;});}this.clearForceUpdateFlag();if(!Ax){this.clientRerenderGraphMatrix();}Ar.endTimer();},handlePartialUpdate:function(As,At){var Au=this.GMController;switch(As){case l.UPDATE_CHARTS:this.updateCharts();break;case l.UPDATE_ALL:Au.reRenderGM();break;case l.CHART_SCALE:if(At){Au.reRenderGM();}else{this.onControlResized();}break;case l.SPLITTER_LINE_SCALE:if(At){Au.reRenderGM();}else{this.onControlResized(false,false,true,true);}break;default:return false;}return true;},updateSingleProperty:function(Aw,As,A1,Ax){var At,Ay={},Au=this.manager,A2=this.HTML5PROPS,Av=As[S],A0=As.hasOwnProperty(Aw)?As[Aw]:Av,Az=this.GMController;switch(Aw){case n.BG_COLOR:case n.BG_FILL_TRANSPARENCY:break;case n.ROW_HEADER_FILL_COLOR:case n.ROW_HEADER_FILL_TRANSPARENCY:this.updateRowValueBackground();this.updateHeaderTitle("row","bg");break;case n.ROW_HEADER_TEXT_FONT_COLOR:case n.ROW_HEADER_TEXT_FONT_STYLE:case n.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case n.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("row","font");break;case n.ROW_VAVLUE_TEXT_FONT_COLOR:case n.ROW_VAVLUE_TEXT_FONT_STYLE:case n.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case n.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:Au.updateSubSetOfVSlaves("row",Az.metricNamesOnRowMetricsOnXAxis);break;case n.COLUMN_HEADER_FILL_COLOR:case n.COLUMN_HEADER_FILL_TRANSPARENCY:this.updateColumnValueBackground();this.updateHeaderTitle("col","bg");break;case n.COLUMN_HEADER_TEXT_FONT_COLOR:case n.COLUMN_HEADER_TEXT_FONT_STYLE:case n.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:case n.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:this.updateHeaderTitle("col","font");break;case n.COLUMN_VAVLUE_TEXT_FONT_COLOR:case n.COLUMN_VAVLUE_TEXT_FONT_STYLE:case n.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:case n.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:Au.updateSubSetOfHSlaves("column",Az.metricNamesOnColumnMetricsOnYAxis);break;case n.V_MATRIX_LINES_COLOR:case n.V_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.v",A2.MATRIX_LINE_V);break;case n.H_MATRIX_LINES_COLOR:case n.H_MATRIX_LINES_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-matrix-line.h",A2.MATRIX_LINE_H);break;case n.X_AXIS_LINE_COLOR:case n.X_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.h",A2.AXIS_LINE_X);break;case n.Y_AXIS_LINE_COLOR:case n.Y_AXIS_LINE_COMBINED_STYLE:this.updateMatrixLineStyle(".gm-axis-line.v",A2.AXIS_LINE_Y);break;case n.X_AXIS_ORIGIN_LINE_COLOR:case n.X_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(Aw,"v",".gm-set-originline",A0);break;case n.Y_AXIS_ORIGIN_LINE_COLOR:case n.Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:this.updateOriginLineStyle(Aw,"h",".gm-set-originline",A0);break;case n.Y_AXIS_TITLE_FONT_COLOR:case n.Y_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontStyle("yaxis");break;case n.Y_AXIS_LABELS_FONT_COLOR:case n.Y_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("yaxis",Aw);break;case n.X_AXIS_TITLE_FONT_COLOR:case n.X_AXIS_TITLE_FONT_STYLE:this.updateAxisTitleFontStyle("xaxis");break;case n.X_AXIS_LABELS_FONT_COLOR:case n.X_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("xaxis",Aw);break;case n.ALL_AXIS_LABELS_FONT_COLOR:case n.ALL_AXIS_LABELS_FONT_STYLE:this.updateAxisLabelFontStyle("allaxis",Aw);break;case n.GRID_LINE_AUTO:case n.ALL_GRID_LINES_SHOW:case n.MAJOR_GRID_LINES_SHOW:case n.MINOR_GRID_LINES_SHOW:case n.ALL_GRID_LINES_COLOR:case n.ALL_GRID_LINES_COMBINED_STYLE:case n.MAJOR_GRID_LINES_COLOR:case n.MAJOR_GRID_LINES_COMBINED_STYLE:case n.MINER_GRID_LINES_COLOR:case n.MINER_GRID_LINES_COMBINED_STYLE:this.hPlaceHGridLines(A2.GRID_LINE_MAJOR,A2.GRID_LINE_MINOR);this.hPlaceVGridLines(A2.GRID_LINE_MAJOR,A2.GRID_LINE_MINOR);break;case AQ.LEGEND_VISIBLE:case AQ.LEGEND_MODE:case AQ.SCALE_LEGEND_WIDTH:case n.LEGEND_BG_COLOR:case n.LEGEND_BG_FILL_TRANSPARENCY:case n.LEGEND_FONT_COLOR:case n.LEGEND_FONT_STYLE:case n.LEGEND_FONT_SIZE:case n.LEGEND_FONT_FAMILY:this.legendPartialUpdate(Aw,A1);break;case AQ.LEGEND_POSITION:if(this.legend){this.legend.updateLegendSlot(A0,this.getLegendDockPosIdx(A0));}break;case n.ALL_TEXT_FONT_COLOR:case n.ALL_TEXT_FONT_STYLE:this.updateHeaderTitle("row","font");this.updateHeaderTitle("col","font");Au.updateVSlaves();Au.updateHSlaves();if(As.hasOwnProperty(S)){this.updateChartFontStyle(Aw,"all-text",Av);}else{if(Aw.indexOf("FntClr")>=0){Ay.dl=n.DATA_LABELS_FONT_COLOR;Ay.rfl=n.REF_LABELS_FONT_COLOR;}else{if(Aw.indexOf("FntStyle")>=0){Ay.dl=n.DATA_LABELS_FONT_STYLE;Ay.rfl=n.REF_LABELS_FONT_STYLE;}}this.updateChartFontStyle(Aw,B.GM_ORIGIN_LABEL);this.updateChartFontStyle(Ay.dl,B.GM_DATA_LABEL,As[Ay.dl]);this.updateChartFontStyle(Ay.rfl,B.GM_REF_LABEL,As[Ay.rfl]);}if(this.legend){this.legend.updateStyle(A2.LEGEND);}break;case AQ.BANDING:case AQ.AXIS_ORIGIN:case AQ.MAX_SIZE_TYPE:case AQ.MAX_SIZE_VALUE:case AQ.MIN_SIZE_VALUE:case AQ.DATA_LABEL:case AQ.DATA_LABELS_PLACEMENT:case AQ.METRIC_LEVEL_DATA_LABEL:case n.DATA_LABELS_FONT_FAMILY:case n.DATA_LABELS_FONT_SIZE:this.updateAxisAndCharts(Aw);break;case AQ.MIN_SIZE_TYPE:if(Aw===AQ.MIN_SIZE_TYPE&&this.needLegend&&Az.hasSizeBy()){this.sizeByData=Az.getSizeByLegendInfo();}this.updateAxisAndCharts(Aw);this.hUpdateLegend();break;case n.DATA_LABELS_FONT_STYLE:if(A1){this.updateAxisAndCharts(Aw);}else{this.updateChartFontStyle(Aw,B.GM_DATA_LABEL,A0);}break;case n.DATA_LABELS_FONT_COLOR:this.updateChartFontStyle(Aw,B.GM_DATA_LABEL,A0);break;case AQ.REF_LINE_DEF:At=A0.modifiedPropertyKeys[0];if(At===AQ.TREND_REF_LINE_COMBINED_STYLE||At===AQ.TREND_REF_LINE_COLOR){this.updateTrdAndRefLineStyle(".gm-set-referenceline",A0,Ax);}else{this.updateChartFontStyle(Aw,B.GM_REF_LABEL,A0);}break;case AQ.TREND_LINE_DEF:this.updateTrdAndRefLineStyle(".gm-set-trendline",A0,Ax);break;case n.REF_LABELS_FONT_COLOR:case n.REF_LABELS_FONT_STYLE:this.updateChartFontStyle(Aw,B.GM_REF_LABEL,A0);break;default:return false;}return true;},getHTML5Props:function(){return this.HTML5PROPS;},resetHTML5Props:function(){var As=this.property,At=this.HTML5PROPS;As.initHTML5Props(At);this.applyHTML5Props(At);this.adjustRHAndCHOpacity();this.postFillGMControllerStyle();this.updateLegendColorByOpacity();},adjustRHAndCHOpacity:function(){var Av=this.HTML5PROPS;var As=Av.BK;var Au=Av.RH_BK;var At=Av.CH_BK;if(As.backgroundColor===Au.backgroundColor){if(Au.opacity<=As.opacity){Au.opacity=0;}else{Au.opacity-=As.opacity;}}if(As.backgroundColor===At.backgroundColor){if(At.opacity<=As.opacity){At.opacity=0;}else{At.opacity-=As.opacity;}}},getAllAxisProperties:function(){var As={},Au=this.GMController,At=this;if(Au.axisFormat){return Au.axisFormat;}c.forEach(function(Av){As[Av]=At.readGlobalProperty(Av);});Au.axisFormat=As;return As;},resetAxisProps:function(Au){var At=this.GMController.axisFormat,Aw=this,Av,As;if(At){Au.forEach(function(Ax){if(Ax.indexOf("CmbStyle")>=0){Av=Ax.replace("CmbStyle","Thk");As=Ax.replace("CmbStyle","Style");}c.forEach(function(Ay){if((Ay===Ax)||(Av&&Ay===Av)||(As&&Ay===As)){At[Ay]=Aw.readGlobalProperty(Ay);}});});}},getDefaultProperties:function(){var A1=this;if(this.theme===undefined){var Av=Z.walk("model.data.dz.visProp.fmt.th",A1);if(Av!==undefined&&Av!==null){if(typeof Av==="number"){this.theme=Av;}else{if(typeof Av==="string"){this.theme=parseInt(Av,10);}}}}var A3=this.GMController,A2=this.scriptClass==="mstrmojo.ngm.VisNewGraphMatrix",Az=mstrApp.getThemeProps("THEME_STYLE"),Ay=Az===y.DEFAULT,A0=A3&&(A3.isPie?H.PIE:A3.getChartType()),Au=a.lightTheme({isNGM:A2,chartType:A0,isNewTheme:Ay}),A4=this.getDocModel(),Ax=false;if(A4){var At=A4.getCurrentPaletteColors();if(At&&At.length){Au.shpFillClr=Au.shpLnClr=At[0];Ax=true;}}if(A3){var Aw=A2?"NGM":"OGM",As=mstrApp.getThemeProps(Aw).DEFAULT_PROPS[A0];Z.keyarray(As).forEach(function(A5){Au[A5]=As[A5];});}if(!Ax){a.update(this.theme,["shpFillClr"]);a.update(this.theme,["shpLnClr"]);}return Au;},configureTrendAndRefLine:function Aa(As){if(As===AQ.TREND_LINE_DEF||As===AQ.REF_LINE_DEF||As.indexOf("allTxtFnt")>=0||As.indexOf(AP)>=0){this.GMController.configureTrendLine(this.getData());}},isLogScaleChanged:function Am(At){var As=At[AQ.AXIS_SCALE_DATA]||At[S];return !!(As&&As.modifiedPropertyKeys&&As.modifiedPropertyKeys[0]===AQ.LOG_SCALE);},resetGMCtrlCache:function A(At,Au){var As=this.GMController;if(At===AQ.MAX_SIZE_TYPE||At===AQ.MAX_SIZE_VALUE||At===AQ.MIN_SIZE_TYPE||At===AQ.MIN_SIZE_VALUE){As.initMaxMinSizeProps();}else{if(At===AQ.AXIS_SCALE_DATA){As.getAxisScaleMode();As.setupDualAxis();if(this.isLogScaleChanged(Au)){As.clearLogScaleCahce();As.msgCenter={};}}else{if(At===AQ.DATA_LABEL){As.resetDataLabelType();}else{if(At===AQ.DATA_LABELS_PLACEMENT){As.resetDataLabelPlacement();}else{if(At.indexOf("dlFnt")>=0||At.indexOf("allTxtFnt")>=0){As.clearDataLabelFormatCache();}else{if(At===n.MODIFIED_DEF_FILL_COLOR||At===n.SHAPE_BORDER_COMBINED_STYLE||At===n.SHAPE_LINE_COMBINED_STYLE){As.resetDefaultShapeProp();}else{if(At===n.SHAPE_FILL_TRANSPARENCY){As.resetDefaultShapeProp();}else{if(At===AQ.AXIS_ORIGIN){delete As.axisFormat;}}}}}}}}},getColorByComb:function O(Au){var At,Aw=Au.levels,Av=Au.elements,Ax=Aw.length,As=[];for(At=0;At<Ax;At++){As.push({tid:Aw[At],eid:Av[At]});}return As;},updateLegendColorByOpacity:function Ai(){var As=this.GMController,At=As.hasColorBy(),Ay=As.getDefaultsForShape(As.getChartInfo().shape),Ax=this.property.readItem(n.ALL_SHAPE_FORMAT),Aw,Au,Av=this;if(!At){return ;}this.colorByData=As.getColorByLegendInfo();if(!this.colorByData){return ;}if(As.colorByInfo.tp===o.METRICS){Au=Ar.getResolvedFormatsObject([Ay,Ax]);this.colorByData.elements.forEach(function(Az){Az.opacity=Au[n.SHAPE_FILL_TRANSPARENCY]/100;});}else{this.colorByData.elements.forEach(function(Az){Aw=As.getShapeFormatsWithCombination(Av.getColorByComb(Az.token));Au=Ar.getResolvedFormatsObject([Ay,Ax,Aw]);Az.opacity=Au[n.SHAPE_FILL_TRANSPARENCY]/100;});}},setUpForceUpdateFlag:function(At){if(At.indexOf("AxTt")>=0||At.indexOf("AxLb")>=0||At.indexOf("allTxtFnt")>=0){this.forceUpdateAxis=true;}var As=this;Q.forEach(AZ,function(Au){if(Au===At){As.forceUpdateAxis=true;return false;}});},clearForceUpdateFlag:function d(){delete this.forceUpdateAxis;},updateDummyANodeStyle:function(As){var At=this.domDummyA;if(At.style.display!=="none"){F.applyStyles2DomNode(At,As);At.setAttribute("type",B.GM_DUMMY_A);}},updateHeaderTitle:function(A2,Av){var A0=A2==="row"?".gm-rowheader-title":".gm-colheader-title",At=this.domNode.querySelectorAll(A0),Ay,Au=At.length,As,Aw,Az,A1=this.HTML5PROPS,A3,Ax;if(A2==="row"){A3=A1.RH_BK;Ax=A1.RH_TITLE;Aw=this.getWidgetPropertyValue(n.ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL);Az=this.getWidgetPropertyValue(n.ROW_HEADER_TEXT_ALIGNMENT_VERTICAL);}else{A3=A1.CH_BK;Ax=A1.CH_TITLE;Aw=this.getWidgetPropertyValue(n.COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL);Az=this.getWidgetPropertyValue(n.COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL);}for(Ay=0;Ay<Au;Ay++){As=At[Ay];if(Av==="bg"){F.applyStyles2DomNode(As,A3);}else{if(As.getAttribute("type")===null){F.applyStyles2DomNode(As.firstChild.firstChild,Ax);}else{if(As.firstChild){Ar.updateTextColorAndAlignment(As,Aw,Az);}}}}},updateHeaderValueFontStyle:function(Aw){var Av=Aw==="row"?"div.gm-rowheader-cell, div.gm-rowheader-cell-dummy":"div.gm-colheader-cell, div.gm-colheader-cell-dummy",At=this.domNode.querySelectorAll(Av),Au,Az=At.length,Ay,As,Ax;if(Aw==="row"){As=this.getWidgetPropertyValue(n.ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL);Ax=this.getWidgetPropertyValue(n.ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL);}else{As=this.getWidgetPropertyValue(n.COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL);Ax=this.getWidgetPropertyValue(n.COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL);}for(Au=0;Au<Az;Au++){Ay=At[Au];if(Ay.getAttribute("class").indexOf("gm-colheader-cell-dummy")>=0&&!this.GMController.metricNamesOnColumnMetricsOnYAxis){continue;}Ar.updateTextColorAndAlignment(Ay,As,Ax);}},updateAxisTitleFontStyle:function(Av){var Au=Av==="yaxis"?".gm-yaxis-cell-label .gm-text-body-nowrap":".gm-xaxis-cell-label .gm-text-body-nowrap, .gm-x2axis-cell-label .gm-text-body-nowrap",As=this.domNode.querySelectorAll(Au),At,Ax=As.length,Aw=this.HTML5PROPS[Av==="yaxis"?"AXIS_TITLE_Y":"AXIS_TITLE_X"];for(At=0;At<Ax;At++){F.applyStyles2DomNode(As[At],Aw);}},updateRowValueBackground:function(){var As=this.domRowHeader.childNodes,At,Av=As.length,Au=this.HTML5PROPS.RH_BK;for(At=0;At<Av;At++){F.applyStyles2DomNode(As[At],Au);}if(this.GMController.metricNamesOnRowMetricsOnXAxis){F.applyStyles2DomNode(this.domYAxis,Au);}},updateColumnValueBackground:function(){var As=this.domColHeader.childNodes,At,Av=As.length,Au=this.HTML5PROPS.CH_BK;for(At=0;At<Av;At++){if(At===Av-1&&this.colHeaderExtraH>0&&!this.GMController.metricNamesOnColumnMetricsOnYAxis){break;}F.applyStyles2DomNode(As[At],Au);}},updateMatrixLineStyle:function(Aw,Av){var As=this.domNode.querySelectorAll(Aw),At,Au,Ax=As.length;for(Au=0;Au<Ax;Au++){At=As[Au].firstChild;F.applyStyles2DomNode(At,Av);}},updateOriginLineStyle:function(Az,A2,A1,Au){var At=this.domNode.querySelectorAll(A1),Ay,Av=At.length,Aw,As,Ax,A0;if(Az.indexOf("Clr")>=0){Aw=Ar.decodeColor(Au);for(Ay=0;Ay<Av;Ay++){if(At[Ay].getAttribute("subtype")===A2){At[Ay].style.stroke=Aw;}}}else{if(Az.indexOf("CmbStyle")>=0){As=AM(Au);Ax=As.thk;A0=As.ceLnStyle;if(A0===Aq.LS_DOT){A0="1 1";}else{if(A0===Aq.LS_DASH){A0="3 1";}else{A0="";}}for(Ay=0;Ay<Av;Ay++){if(At[Ay].getAttribute("subtype")===A2){At[Ay].style.strokeDasharray=A0;At[Ay].style.strokeWidth=Ax;}}}}},updateTrdAndRefLineStyle:function(A1,At,Az){var Au=At.modifiedPropertyKeys[0],As=this.domNode.querySelectorAll(A1),Ay,Av=As.length,Aw,Ax,A0,A2=Az.key;if(Au===AQ.TREND_REF_LINE_COLOR){Aw=Ar.decodeColor(At.jsonObj[Au]);for(Ay=0;Ay<Av;Ay++){if(A2===As[Ay].identity.tlOpt.key){As[Ay].style.stroke=Aw;}}}else{if(Au===AQ.TREND_REF_LINE_COMBINED_STYLE){Ax=At.jsonObj[AQ.TREND_REF_LINE_THICKNESS];A0=At.jsonObj[AQ.TREND_REF_LINE_STYLE];if(A0===Aq.LS_DOT){A0="1 1";}else{if(A0===Aq.LS_DASH){A0="3 1";}else{A0="";}}for(Ay=0;Ay<Av;Ay++){if(A2===As[Ay].identity.tlOpt.key){As[Ay].style.strokeDasharray=A0;As[Ay].style.strokeWidth=Ax;}}}}},updateAxisLabelFontStyle:function(Au,Av){var At=this.manager,As=this.GMController;if(Au==="yaxis"){At.updateSubSetOfVSlaves("axis",As.metricNamesOnRowMetricsOnXAxis);}else{if(Au==="xaxis"){At.updateSubSetOfHSlaves("axis",As.metricNamesOnColumnMetricsOnYAxis);}else{At.updateSubSetOfVSlaves("axis",As.metricNamesOnRowMetricsOnXAxis);At.updateSubSetOfHSlaves("axis",As.metricNamesOnColumnMetricsOnYAxis);}}this.updateChartFontStyle(Av,B.GM_ORIGIN_LABEL);},updateChartFontStyle:function(A0,A2,Au){var Ay,As,A3,Ax,A4,Aw,A1,Az,A6,At=this.domNode.querySelectorAll(".gm-chart .gm-tspan"),Av=At.length,A5=this.HTML5PROPS;switch(A2){case B.GM_ORIGIN_LABEL:if(A0.indexOf("FntClr")>=0){Aw={p:"fill",v:A5.AXIS_LABEL_X.color};A1={p:"fill",v:A5.AXIS_LABEL_Y.color};}else{if(A0.indexOf("FntStyle")>=0){Aw={p:"textDecoration",v:A5.AXIS_LABEL_X.textDecoration||"none"};A1={p:"textDecoration",v:A5.AXIS_LABEL_Y.textDecoration||"none"};}}break;case B.GM_DATA_LABEL:case"all-text":Aw=this.getPropValue(A0,Au);break;case B.GM_REF_LABEL:if(Au.opt){As=Au.opt.key;A0=Au.modifiedPropertyKeys[0];Au=Au.jsonObj[A0];}else{Au=V(A0,Au);}Aw=this.getPropValue(A0,Au);break;default:break;}for(Ay=0;Ay<Av;Ay++){Ax=At[Ay].getAttribute("type");if(A2==="all-text"){A4=At[Ay].parentNode.style;A4[Aw.p]=Aw.v;}else{if(Ax&&Ax.indexOf(A2)>=0){A4=At[Ay].parentNode.style;switch(A2){case B.GM_ORIGIN_LABEL:if(Ax.indexOf("v")>=0){A4[Aw.p]=Aw.v;}else{A4[A1.p]=A1.v;}break;case B.GM_DATA_LABEL:A4[Aw.p]=Aw.v;break;case B.GM_REF_LABEL:if(As){Az=At[Ay].parentNode;if(Az){A6=Az.identity;}if(A6&&A6.tlOpt){A3=A6.tlOpt.key;}if(A3===As){A4[Aw.p]=Aw.v;}}else{A4[Aw.p]=Aw.v;}break;default:break;}}}}},getPropValue:function(As,At){var Au;if(As.indexOf("FntClr")>=0){Au=Ar.decodeColor(At);return{p:"fill",v:Au};}if(As.indexOf("FntStyle")>=0){if((At&8)&&(At&4)){Au="line-through underline";}else{if(At&8){Au="line-through";}else{if(At&4){Au="underline";}else{Au="none";}}}return{p:"textDecoration",v:Au};}},updateCharts:function(){if(this.excludeData){return ;}var As=this.manager.master;As.clearCharts();As.updateCharts();this.updateSelections();},updateAxisAndCharts:function(Au){var At=this.manager,As=this.GMController;if(Au!==AQ.BANDING){this.hCalcRadiusAndMargin(true);}At.updateSubSetOfVSlaves("axis",As.metricNamesOnRowMetricsOnXAxis);At.updateSubSetOfHSlaves("axis",As.metricNamesOnColumnMetricsOnYAxis);if(Au===AQ.AXIS_ORIGIN){var Av=this.HTML5PROPS;this.hPlaceHGridLines(Av.GRID_LINE_MAJOR,Av.GRID_LINE_MINOR);this.hPlaceVGridLines(Av.GRID_LINE_MAJOR,Av.GRID_LINE_MINOR);}this.updateCharts();},legendPartialUpdate:function(Av,As){var Au=true,At,Aw=this.HTML5PROPS;if(!this.legend){this.hInitLegend();}At=this.legend;if(Av===n.LEGEND_FONT_STYLE){Au=As;}else{if((Av===n.LEGEND_BG_COLOR)||(Av===n.LEGEND_FONT_COLOR)||(Av===n.LEGEND_BG_FILL_TRANSPARENCY)){Au=false;}}At.updateStyle(Aw.LEGEND);if(Au){At.updateTitleLineHeight(Aw.LEGEND);this.onControlResized(false,true,false,true);At.updateAfterResize();At.updateSplitter();}},getLegendDockPosIdx:function(Au){var As,At=AA.length;for(As=0;As<At;As++){if(Au===AA[As].pos){return As;}}return -1;},makeDefaultsObjectAtOption:function(At){var As,Au=this.getDefaultProperties();if(X.indexOf(At)>=0){switch(At){case AQ.METRIC_SHAPES:As=this.getWidgetPropertyValue(AQ.SHAPE);break;case AQ.LOG_SCALE:break;case AQ.METRIC_LEVEL_DATA_LABEL:As=false;break;case AQ.TREND_LINE_DEF:As={};As[AQ.TREND_TYPE]=An.EnumTrendLineModelType.BEST_FIT;As[AQ.TREND_LEVEL]=An.EnumTrendRefLevel.DssModelLevelPerCell;As[AQ.TREND_ENABLED]=false;As[AQ.TREND_INCLUDE_BREAK_BY]=!!this.getChartInfo().isABL;[AQ.TREND_POLY_DEGREE,AQ.TREND_REF_LINE_THICKNESS,AQ.TREND_REF_LINE_COLOR,AQ.TREND_REF_LINE_STYLE].forEach(function(Av){As[Av]=Au[Av];});break;case AQ.TREND_BUBBLE_FORE_DEF:As={};As[AQ.TREND_BUBBLE_FORE_FWD]=987654321;As[AQ.TREND_BUBBLE_FORE_BWD]=-987654321;As[AQ.TREND_BUBBLE_FORE_ENABLED]=false;break;case AQ.REF_LINE_DEF:As={};As[AQ.REF_TYPE]=s.AVG;As[AQ.REF_ENABLED]=false;As[AQ.REF_SHOW_LABEL]=true;As[AQ.REF_LABEL_TYPE]=AJ.DssModelLabelsType|AJ.DssModelLabelsValue;As[AQ.REF_LEVEL]=An.EnumTrendRefLevel.DssModelLevelPerCell;[AQ.TREND_REF_LINE_THICKNESS,AQ.TREND_REF_LINE_COLOR,AQ.TREND_REF_LINE_STYLE,n.REF_LABELS_FONT_FAMILY,n.REF_LABELS_FONT_SIZE,n.REF_LABELS_FONT_STYLE,n.REF_LABELS_FONT_COLOR].forEach(function(Av){As[Av]=Au[Av];});As[AQ.TREND_REF_LINE_STYLE]=1;break;case AQ.AXIS_ORIGIN:As={};As[AQ.AXIS_ORIGIN_AUTO]=true;As[AQ.AXIS_ORIGIN_VALUE]=0;break;case AQ.FORMATS_ON_COMBINATION:break;case n.ALL_SHAPE_FORMAT:break;}}else{F.visPrint(At+"is not in COMPLEX_PROPERTY object! Add it in if it is complex property");}return As;},createAxisOriginObject:function(){var As={},Au=this,Av=AQ.AXIS_ORIGIN,At=this.getNumericAxisOptions(false);At.forEach(function(Aw){As[Aw.key]=Au.makeDefaultsObjectAtOption(Av);});if(As.AllMetrics===undefined){As.AllMetrics=this.makeDefaultsObjectAtOption(Av);}return As;},getPropertiesOfFormatable:function(){var A3=this,A6=A3.getDocModel(),Aw,Av=this.curSelOptLvl,A1,A4=this.GMController,A5=this.arrayOfComb,A0=mstrApp.getThemeProps("THEME_STYLE"),Az=A0===y.DEFAULT,Au=A4.getDefaultsForShape(A4.getChartInfo().shape)[n.SHAPE_BORDER_COLOR],At,Ay;if(this.interactor.fmtState===Ak.PER_COLORBY){A1=this.interactor.getColorByIdentities();Aw=true;}else{A1=this.interactor.getBreakByIdentities();}At=z.call(this,Av,A1,A5);if(Aw&&A5&&A5[0]){var A7=[],As=[];Q.forEach(A5[0],function(A8){A7.push(A8.tid);As.push(A8.eid);});if(As.length>0){var Ax=A6.getColorBy(A7,As);At[n.SHAPE_LINE_COLOR]=At[n.SHAPE_FILL_COLOR]=Ax.color;At[n.SHAPE_FILL_COLOR_DEFAULT]=!Ax.isManual;At[n.SHAPE_LINE_COLOR+g]=!Ax.isManual;}}var A2=At[n.SHAPE_FILL_COLOR];if(At[n.LINE_MARKER_COLOR]===undefined){At[n.LINE_MARKER_COLOR]=A2;At[n.LINE_MARKER_COLOR+g]=true;}else{At[n.LINE_MARKER_COLOR+g]=false;}if(At[n.LINE_MARKER_BORDER_COLOR]===undefined){At[n.LINE_MARKER_BORDER_COLOR]=A2;At[n.LINE_MARKER_BORDER_COLOR+g]=true;}else{At[n.LINE_MARKER_BORDER_COLOR+g]=false;}if(At[n.SHAPE_BORDER_COLOR]===undefined){At[n.SHAPE_BORDER_COLOR]=Az&&Au!==undefined?Au:A2;At[n.SHAPE_BORDER_COLOR+g]=true;}else{At[n.SHAPE_BORDER_COLOR+g]=false;}AC.call(this,At);if(Av===K.ALL_SHAPE||Av===K.METRIC){Ay=Z.clone(At);this.updateConflictShapeFormat(Ay,Av);return AG(Ay);}return AG(At);},updateConflictShapeFormat:function(Az,Av){var At=this.getStyleEffectsOptions(),Ax,Aw,Ay=this,Au=this.arrayOfComb&&this.arrayOfComb[0],As={};Q.forEach(At,function(A0){Ax=A0.optLvl;if(Ax===K.METRIC&&Av===K.ALL_SHAPE){Aw=z.call(Ay,Ax,undefined,[A0.comb]);x(Aw,As);}else{if(Ax===K.COLOR_BY){Q.forEach(A0.subOptions,function(A1){if(!A1.key||A1.key!=="multiple"){if(Av===K.ALL_SHAPE||(Av===K.METRIC&&t(A1.comb,Au))){Aw=z.call(Ay,Ax,undefined,[A1.comb]);x(Aw,As);}}});}}});AU(As,Az);},writeFormatableProperties:function(A7){var A5,As,A8,BG,A4,BB,Ay,A0,BH=this,BF=this.GMController,A9=BF.model,BJ=this.identity,BA=A7.jsonObj,Az=A7.modifiedPropertyKeys,BI=true,Ax=Az.indexOf(n.SHAPE_FILL_COLOR),A6=Az.indexOf(n.SHAPE_FILL_TRANSPARENCY),BC=Az.indexOf(n.SHAPE_LINE_COLOR),Au=true;if(Ax>-1||BC>-1){BI=false;if(!BF.hasColorBy()){BH.writeGlobalProperty(n.MODIFIED_DEF_FILL_COLOR,BA[Az[0]]);return ;}}if(!BJ){return ;}A5=BJ.objType;if(A5===AW.SHAPE_COLLECTION){var A2,At=this.curSelOptLvl,Aw=this.arrayOfComb;if(this.interactor.fmtState===Ak.PER_COLORBY){A2=this.interactor.getColorByIdentities();}else{A2=this.interactor.getBreakByIdentities();}Az.forEach(function(BP){if(BP.indexOf("CmbStyle")!==-1){var BN=BP.replace("CmbStyle","Thk"),BL=BP.replace("CmbStyle","Style"),BM=AM(BA[BP]),BK=BM.thk,BO=BM.ceLnStyle;A7.setProperty(BN,BK);A7.setProperty(BL,BO);}});if(At===K.ALL_SHAPE){A0=n.ALL_SHAPE_FORMAT;BB=this.getWidgetPropertyValue(A0);BH.mergeModifiedFormatsForSingleShape(undefined,At,A7);}else{if(At===K.COLOR_BY||At===K.METRIC||At===K.ITSELF){A0=AQ.FORMATS_ON_COMBINATION;BB=this.getWidgetPropertyValue(A0);Q.forEach(Aw,function(BK){if(Az[0]!==n.SHAPE_FILL_COLOR&&Az[0]!==n.SHAPE_LINE_COLOR){BH.mergeModifiedFormatsForSingleShape(BK,At,A7);}});}}Ay=this.getWidgetPropertyValue(A0);if(At!==K.ALL_SHAPE&&Az){if(Aw){if(A9.colorType===o.ATT){Au=false;}A8=BF.getColorByAttrsID();As=R(Aw,A8,Au);}else{As=this.collectUniqueCombination(A2,K.COLOR_BY);}if(Ax>=0||BC>=0){BG=Az[Ax>=0?Ax:BC];A4=A7.jsonObj[BG];}}}if(!BI){this.updateColorByMap(As,A4);}else{var BE=this.id,A3=Az[0],Av=function(){BH.GMController.clearShapeFormatsCache();BH.partialUpdate(A3,{allVal:A7},true);BH.raiseEventShapeFormattingChanged(A3);if(A6>=0){BH.hUpdateLegend();}},A1=function(BK){var BL=j.all[BE];if(A0===AQ.FORMATS_ON_COMBINATION){BL.GMController[A0]=Z.clone(BK);}BL.setWidgetPropertyValue(A0,BK);Av();},BD={undo:function(){A1(BB);},redo:function(){A1(Ay);}};Av();this.submitUpdatesAndPersistXML(undefined,undefined,BD,true);}},mergeModifiedFormatsForSingleShape:function(Au,Aw,As){var At,Av,Ax=this.GMController;if(Aw===K.ALL_SHAPE){At=n.ALL_SHAPE_FORMAT;Av=this.getWidgetPropertyValue(At);if(Av===undefined){Av={};}AN(Av,As);this.setWidgetPropertyValue(At,Av);}else{Av=Ax.getShapeFormatsWithCombination(Au);if(Av===undefined){Av={};}AN(Av,As);Ax.setShapeFormatsWithCombination(Au,Av);}},collectUniqueCombination:function(At,Aw){var Ax={},Au,Av,As=[];Q.forEach(At,function(Ay){if(Aw===K.ITSELF){Au=Ay.getSelectedObjectLowestLevel(true);}else{if(Aw===K.COLOR_BY){Au=Ay.getSelectedObjectColorByInfo();}else{if(Aw===K.METRIC){Au=Ay.getSelectedObjectMetricInfo();}}}Av=Ar.serializeCombination(Au);if(Ax[Av]===undefined){Ax[Av]=true;As.push(Au);}});return As;},getTrendRefInfo:function(As){return AX(As);},changeShapeProperty:function w(At,Au){var As=this;if(this.syning){return ;}As.setWidgetPropertyValue(At,Au.jsonObj||Au);},updateColorByMap:function(Ay,Au){var At=JSON.stringify({color:Au}),As=this.getDocModel(),Aw=[],Ax=As.getUpdateColorMapCallback(),Av=F.getUpdateColorMapAction.bind(this);Q.forEach(Ay,function(Az){Aw.push(Av(Az,At));});this.submitUpdatesAndPersistXML(Aw,Ax,undefined,false,true);if(this.forceUpdateColorMap){if(Ax.success&&Aw.length>0){Ax.success({defn:{epm:Aw[0].epm}});}}},checkCustomScale:function(At){var Au=false,As=this.getWidgetPropertyValue(AQ.AXIS_SCALE_DATA);Q.forEach(As||[],function(Aw){if(Aw.length>1){if(Aw[0]===At){var Av=parseInt(Aw[1],10);if(Av===r.CUSTOM){Au=true;return false;}}}});return Au;},abandonCustomAxisScale:function(){if(this.GMController.hasCustomOnAxis()){this.setWidgetPropertyValue(AQ.AXIS_SCALE,r.GLOBAL);}},absorbAxisOrigin:function(){var As=this.getWidgetPropertyValue(AQ.AXIS_ORIGIN),At=this.createAxisOriginObject();if(As){Z.forEach(At,function(Aw,Ax){if(As[Ax]){At[Ax]=As[Ax];}});}var Au=true;var Av=null;Z.forEach(At,function(Aw,Ax){if(Ax!=="AllMetrics"){Au=Au&&Aw.axOriAuto;if(Av===null){Av=Aw.axOriValue;}else{if(Av!==undefined){if(Av!==Aw.axOriValue){Av=undefined;}}}}});At.AllMetrics={axOriAuto:Au,axOriValue:Av};this.setWidgetPropertyValue(AQ.AXIS_ORIGIN,At);},resetAxisOrigin:function(){this.removeWidgetProperty(AQ.AXIS_ORIGIN);},clearChartScale:function(){this.removeWidgetProperty(AQ.SCALE_CHART_WIDTH);this.removeWidgetProperty(AQ.SCALE_CHART_HEIGHT);},clearContainerFit:function(){this.removeWidgetProperty(AQ.FIT_TO);},persistOnTheFlyShape:function(Ay){var Ax=this.GMController,Au=Ax.model,Av=Au.getMetricIDsFromIndex([Ay])[0],Aw=Ax.getResolvedShapeForMetric(Ay),As=Ax.getOnTheFlyShapeForMetric(Ay);if(Aw!==As){var At=this.readGlobalProperty(AQ.METRIC_SHAPES);At.setProperty(Av,As);this.setWidgetPropertyValue(AQ.METRIC_SHAPES,At.jsonObj);}},updateMetricShape:function(Av){var As=this.readGlobalProperty(AQ.METRIC_SHAPES),At=Av.did,Au=As.jsonObj,Aw=false;if(As!==undefined&&Au.hasOwnProperty(At)){delete Au[At];delete Au[At+AS];Aw=true;}if(Aw){this.setWidgetPropertyValue(AQ.METRIC_SHAPES,Au);}},updateSubtype:function(As){this.setWidgetPropertyValue(AQ.SUB_TYPE,As||this.getWidgetPropertyDefaultValue(AQ.SUB_TYPE,{shapeType:this.getChartInfo().shape}));}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.hash","mstrmojo.VisBase","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.VisTooltip","mstrmojo.VisSplitter","mstrmojo.VisAxisLabel","mstrmojo.gm.TitleLabelCapsule","mstrmojo.MenuButton","mstrmojo.WidgetMatrix","mstrmojo.WidgetMatrixManager","mstrmojo._HasOwnAvatar","mstrmojo._VizSelectionHelper","mstrmojo.vi.ui._IsDropTarget","mstrmojo.gm._SupportDndAsBlackBox","mstrmojo.vi.models.EnumDragSources","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.vi._MonitorsAppState","mstrmojo.chart.enums.EnumLineStyle","mstrmojo.vi.ui.rw._XtabDE","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.chart.common.Utility","mstrmojo.vi.ui.rw.VizBox","mstrmojo.vi.ui.VIDragUnit","mstrmojo.vi.models.CombineDropZonesModel","mstrmojo.vi.ui.rw.GhostImageContainer","mstrmojo.vi.ui.rw.FreezingImageContainer","mstrmojo.vi.enums.EnumThemeProperties");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVizStyles","EnumVisualizationTemplates");mstrmojo.requiresClsP("mstrmojo.vi.ui.rw","_HasVisSelections","selectors._IsMultiUnitControl","selectors._BrushesAndHighlights");mstrmojo.requiresClsP("mstrmojo.ui.menus","ToolbarEditorConfig","MenuConfig","_HasMenuPopup");mstrmojo.requiresClsP("mstrmojo.gm","GMUtility","GMEnums","GMLegend","GMLayout","GMContainer","GMController","GMInteractivity","GMProperty","GMPropertyNode","GMPropDefaults","DndItemRenderer","GMAxisScale","GMIdentities","_SupportGraphMatrixBrushesAndHighlights","GMScroll","_GMPropertyHandler");mstrmojo.requiresDescs(5614,8121,11820,11821,11822,11823,11824,12093,12094,12095,12096,12097,12098,12099,12100,12101,12102,12103,12104,13165);var S=true,AB=mstrmojo,BF=AB.vi.viz,BK=AB.gm,BL=AB.func.wrapMethods,c=AB.array,BI=AB.css,Ag=AB.dom,w=AB.num,k=AB.hash,V=AB.VisUtility,B=BF.EnumDSSDropZones,x=mstrmojo.vi.models.CombineDropZonesModel.EnumDropZones,AG=BF.EnumVizStyles,BA=AG.GRAPH_MATRIX,A8=BF.EnumVisualizationTemplates,BP=BK.GMUtility,AZ=BK.GMUtility.sizeCalculator,d=BK.GMLegend,f=BK.EnumShape,Al=BK.WidgetPropertyTag,AM=BK.FormatingPropertyTag,o=BK.EnumTRFManipulations,l=150,AE=5,C=250,t=0.75,Q=0.2,O=1,BH=1,D=1,AL=1,Ad=15,An=15,A5=5,AU=1,A3=AB.vi.models.EnumDragSources,A7=AB.VisEnum.GMLegendDataType,AH=BK.EnumTheme,J=BK.EnumLegendMode,AQ=BK.EnumLegendSlot,AR=BK.EnumGridLines,R=BK.EnumClickType,W=BK.EnumGraphType,Ay=BK.EnumContextMenu,G=AB.VisEnum.ControlType,Au=BK.EnumDockPosition,At=BK.EnumIdentityType,BB=BK.EnumShapeFormatStatus,BM=BK.Enum3DGMapping,X=BK.EnumSelectionOptionLevel,Ao="_tmsp",AP=BK.EnumColorByType,AN=BK.EnumFitTo,BE=mstrmojo.vi.ui.rw.GhostImageContainer,AW=mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME;var N=["mstrmojo.gm.GMProperty","mstrmojo.gm.GMInteractivity","mstrmojo.vi.models.GMDropZones","mstrmojo.vi.models.CombineDropZonesModel","mstrmojo.vi.models.editors.GMEditorModel","mstrmojo.Model","mstrmojo.gm.GMController","mstrmojo.ui.menus.Menu","mstrmojo.ui.menus.ToolbarEditor"];var BO={barchart:mstrmojo.desc(11820,"Bar Chart"),linechart:mstrmojo.desc(8121,"Line Chart"),areachart:mstrmojo.desc(11821,"Area Chart"),bubblechart:mstrmojo.desc(11822,"Bubble Chart"),piechart:mstrmojo.desc(11823,"Pie Chart"),combochart:mstrmojo.desc(11824,"Combo Chart")};var Av=["background-color","fx"];function Ar(){var BR=this.chartResizeListener,BW=this.splitterListeners,BU=this.lassoListener,BS=this.legendResizeListener,BT=this.legendClickListener,BV=this.updateSelectionsListener;if(BR){BR.clear();delete this.chartResizeListener;}if(BW){BW.forEach(function(BX){BX.clear();});this.splitterListeners=[];}if(BU){BU.clear();delete this.lassoListener;}if(BS){BS.clear();delete this.legendResizeListener;}if(BT){BT.clear();delete this.legendClickListener;}if(BV){BV.clear();delete this.updateSelectionsListener;}}var Aj=[];function Ai(){var BR=this.GMController,BS=BR.getGraphShapeCount(true);if(BS>10000){l=800;}else{l=150;}}function A6(){var BT,BZ,BX=this.GMController,Ba=BX.getColTitleInfo(true),BR=this.colHeaderHArr.length,Bb=this.HTML5PROPS,BU=BX.getAttributesOnDropZone("Rows").length>0?2:3,BS,BY,BW=160;var BV=function(){BY=this.rowHeaderMaxHeightWithoutX2;BS=V.measureTextHeight("Test Text",Bb.RH_TITLE,0,100,undefined,true,true);BY=Math.max(BY,BS*BU+2*AU+2*A5);return BX.haveX2?65535:BY;};this.colHeaderMaxHeightArr=[];for(BT=0;BT<BR;BT++){BZ=Ba.items[BT].n;BS=V.measureTextHeight(BZ,Bb.CH_TITLE,0,100,undefined,true,true);BY=BS*BU+2*AU+2*A5;this.colHeaderMaxHeightArr.push(Math.max(BW,this.colHeaderHArr[BT]));}this.rowHeaderMaxHeight=BV.call(this);}function AT(BR,BS,BT){BS.clearCachedXMLDoc();BS.updateDefaults(this.getDefaultProperties(),BR);BS.setTemplateObjectMapping(BT);BS.consumeJsonFmt(BR);BS.initFromXML();}function A1(BT,BU,BW){var BR=BT.gts,BV=true,BS=BW.supportViewFilterPool={};c.forEach(BR.row,function(BX){var BZ=BX.id,BY;if(BZ&&BZ!==""){BY=BU.supportsViewFilterActions(BX.id);if(!BY){BV=false;}BS[BX.id]=BY;}});c.forEach(BR.col,function(BX){var BZ=BX.id,BY;if(BZ&&BZ!==""){BY=BU.supportsViewFilterActions(BX.id);if(!BY){BV=false;}BS[BX.id]=BY;}});BW.supportViewFilter=BV;}function n(Bd){var BX=this,BV=this.readGlobalProperty(Al.METRIC_SHAPES),Bc=Bd.chartType,Bb=(Bc===W.AREA||Bc===W.BAR||Bc===W.LINE),BT=false,BR,Ba,BU,BS=false,BW=false,Be;if(!Bb||BV===undefined){BT=false;}else{var BZ=Bd.model;Be=BV.jsonObj;Ba=Bd.getMetricsOnYAxis();Ba=Ba.concat(Bd.getMetricsOnXAxis());BR=BZ.getMetricIDsFromIndex(Ba);c.forEach(BR,function(Bf){if(Be[Bf]!==undefined){BT=true;}});c.forEach(Ba,function(Bf){if(Bd.getForbiddenShapeForMetric(Bf).length>0){BT=true;BX.persistOnTheFlyShape(Bf);}});BS=true;BW=false;var BY=Bd.metricShapeArr=[];c.forEach(Ba,function(Bf){BU=Bd.getOnTheFlyShapeForMetric(Bf);BY[Bf]=BU;if(BU!==f.AREA){BS=false;}if(BU===f.BAR){BW=true;}});}Bd.enableCombiChart=BT;Bd.hasBarChart=BW;Bd.pureAreaChart=BS;}function Ah(BT){var BR=BT.dz;if(!BR){BR=BT.dz={};}var BS=["Rows","Columns","XAxis","YAxis","BreakBy","ColorBy","SizeBy","SliceBy","AdditionalMetrics","AngleBy","visProp"];c.forEach(BS,function(BU){if(!BR[BU]){BR[BU]={};}});if(!BR.visProp.fmt){BR.visProp.fmt={};}}function AD(Bd){var BR=this.GMController,Bl=BR.getChartInfo();if(Bl.isBubbleOrScatter){var Bg=Bd.selectedCharts,Ba,BU,Bh,BV,BZ,Bk,BW,BX,Bi,Bc,BS,Bn,Bb=this.masterViewer,Bf,Be;var BT=function(Br,Bq,Bt,Bs,Bp,Bo){return Bp>=Br&&Bp<=Bq&&Bo>=Bt&&Bo<=Bs;},Bm=function(Bp,Bo,Br,Bq){return(Br-Bp)*(Br-Bp)+(Bq-Bo)*(Bq-Bo);};var BY=function(By,Bz,Bx){var Bt=Bz.BoundingBox.x,Bs=Bz.BoundingBox.y,Bp=Bz.Size,Bv=By.offsetLeft,Bu=By.offsetTop,Bw=By.offsetWidth,Bo=By.offsetHeight,Br=Bx.left,B1=Bx.top,Bq=Br+Bx.width,B0=B1+Bx.height;Br=Math.max(Br-Bv,0);Bq=Math.min(Bq-Bv,Bw);B1=Math.max(B1-Bu,0);B0=Math.min(B0-Bu,Bo);return Bm(Bt,Bs,Br,B1)<Bp*Bp||Bm(Bt,Bs,Br,B0)<Bp*Bp||Bm(Bt,Bs,Bq,B1)<Bp*Bp||Bm(Bt,Bs,Bq,B0)<Bp*Bp||BT(Br-Bp,Bq+Bp,B1,B0,Bt,Bs)||BT(Br,Bq,B1-Bp,B0+Bp,Bt,Bs);};var Bj=Bg?Bg.length:0;for(Bf=0;Bf<Bj;Bf++){Ba=Bg[Bf];Bi=Ba.row;Bc=Ba.col;BU=Bb.getChart(Bi,Bc);Bk=BR.getDataProvider(Bi,Bc);Bh=BU&&BU.hiddenItems;BZ=Bh?Bh.length:0;for(Be=0;Be<BZ;Be++){BV=Bh[Be];BS=BV.Id.mGroupId;Bn=BV.Id.mSeriesId;if(BY(BU,BV,Bd)){BW=Bk.getGraphCell(Bn,BS).getIdentity();BX=this.interactor.getShapeSelectionInfo(BW);this.addMetricValueSelection(BX);}}}}}function j(BT,BW,BU){var Bd=BW.firstChild,Bi=BU.firstChild,BV=Bd?Bd.offsetWidth:0,BS=Bd?Bd.offsetHeight:0,BX=Bi?Bi.offsetWidth:0,Bf=Bi?Bi.offsetHeight:0,Be=document.body.offsetWidth,Ba=document.body.offsetHeight,BZ=10,Bh=5,Bj=5;if(Bd){Bd.style.left="0";Bd.style.right="auto";Bd.style.top="0";Bd.style.bottom="auto";}if(Bi){Bi.style.left="0";Bi.style.right="auto";Bi.style.top="0";Bi.style.bottom="auto";}var BR={w:Math.max(BV,BX),h:0};var Bb=BS>0,Bc=Bf>0;if(Bb&&Bc){BR.h=BS+Bf+BZ;}else{if(Bb){BR.h=BS;}else{if(Bc){BR.h=Bf;}else{return false;}}}if(Bb){BW.style.left=BT.x+"px";BW.style.top=BT.y-BS-BZ/2+"px";}if(Bc){BU.style.left=BT.x+"px";BU.style.top=BT.y+BZ/2+"px";}if(BT.x+BR.w>Be){BW.style.left=BT.x-BV+"px";BU.style.left=BT.x-BX+"px";}if(Bb){var BY=0;if(BT.y-BS-BZ/2<Bh){BY=Bh;BW.style.top=BY+"px";BU.style.top=BY+BS+BZ+"px";}else{if(BT.y+BZ/2+Bf>Ba){BY=Math.max(Ba-Bf-BZ-BS,Bh);BW.style.top=BY+"px";BU.style.top=BY+BS+BZ+"px";}}}else{if(Bc){var Bg=0;if(BT.y+BZ/2+Bf>Ba){Bg=Math.max(Ba-Bj-Bf,Bh);BU.style.top=Bg+"px";}}}}function AK(BY,BX,BZ){var BT=Ag.position(BZ),BV=BT.x,Bb=BT.x+BT.w,BS=BT.y+BT.h,Ba=false,BW,BR;c.forEach(BX||[],function(Be){var Bd=Ag.position(Be),Bh=Bd.x,Bf=Bd.x+Bd.w,Bc=Bd.y,Bj={xLeft:Math.max(Bh,BV),xRight:Math.min(Bf,Bb),yTop:BS,yBottom:Bc},Bi=BY.pageX,Bg=BY.pageY;Ba=Bi>=Bj.xLeft&&Bi<=Bj.xRight&&Bg>=Bj.yTop&&Bg<=Bj.yBottom;return !Ba;});if(Ba&&BY.target&&BY.target.getAttribute("type")==="marker"){BW=BY.target.getAttribute("class");BR="no-hover-"+BW;BY.target.setAttribute("class",BR);BY.target.setAttribute("type","no-hover-marker");Aj.push(BY.target);}else{var BU=[];c.forEach(Aj,function(Bc){BR=Bc.getAttribute("class");BW=BR.substring(9);if(Bc===BY.target&&Ba){BU.push(Bc);}else{Bc.setAttribute("class",BW);Bc.setAttribute("type","marker");}});Aj=BU;}return Ba;}function Ak(BR){var BT=this.GMController,BU=BT.getChartInfo(),BS;if(BU.isABL){BS=0;}else{if(BU.isBubbleOrScatter){BS=1;}else{BS=2;}}if(BR||(this.lastChartType!==undefined&&BS!==this.lastChartType)){this.raiseEvent({name:"regenerateToolbar"});}this.lastChartType=BS;}function AJ(){return{success:function BR(){this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}function A0(BT,BR,BU){var BS=new mstrmojo.ui.editors.controls.CharacterGroup(BT);BS.setFormatSource(BR);if(BU!=="undefined"){BS.fontColor.showNoFill=BU;}return BS;}function AA(BW){var BT=this,BU,BV,BS,BR;BU=BT.parent.boxContent;BR=BU.model.docModel;BV=BU.fmts.ttl;BS=BU.getFontToolbarProps();if(BS.onGroupValueChange===undefined){BS.onGroupValueChange=function(BX,BZ,BY){BR.changeUnitFormatProperty(BT.parent,[{formatType:2,propertyName:BX,newValue:BZ,oldValue:BY}]);};}return A0(BS,BV,BW);}function h(BS){var BR=this;return new mstrmojo.ui.menus.ToolbarEditorConfig({contents:[{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",showDivider:false,children:[AA.call(BR,BS)]}]});}function BD(BR){return mstrmojo.hash.copy(BR,{act:"operateTRFLine",tks:this.k,partialRetrieval:this.model.getDataService().newRetrievalKeysConfig().addNode(this.k)});}function AC(BT,BR){var BS=this.readGlobalProperty(Al.METRIC_LEVEL_DATA_LABEL);BS.setProperty(BT,BR);this.writeGlobalProperty(Al.METRIC_LEVEL_DATA_LABEL,BS,undefined);}function Az(BR){return BR.model.controller.cmdMgr;}function AY(BR){return BR&&BR.parentNode&&BR.parentNode.childNodes[0];}function a(BR){return{act:"setProperty",nodeKey:this.getData().k,prs:"FormattingWidget",pri:4,v:BP.replaceSpecialChars(BR)};}function AX(BV,BU,BS){var BX,BR,BW="block",BT=BV.style;for(BX in BU){if(BU.hasOwnProperty(BX)){BR=BU[BX];if((typeof BR)==="number"){if((BX==="width"||BX==="height")&&BR===0){BW="none";}BR+="px";}BT[BX]=BR;}}BT.backgroundColor="rgba(0,0,0,0)";if(!BS&&!BU.hasOwnProperty("display")){BT.display=BW;}}function g(BV,Bj,BU){var Bg,BZ,BX=1-Q,Be=this.GMInfo,Bd=Be.yAxisWidth,BS=Be.yAxis2Width,BY=Be.xAxisHeight,Bf=Be.xAxis2Height,Ba=this.getWidth(),Bh=this.getHeight(),Bb=this.rowHeaderW,Bc=this.colHeaderH,Bi=this.actualWidth,BW=this.actualHeight,BR=(BU&&BU.min!==undefined)?BU.min:20,BT=(BU&&BU.max!==undefined)?BU.max:65535;if(BV===G.GM_YAXIS){return{size:Bd,min:BR,max:Math.min(BT,Math.floor(Ba*BX-Bb-BS))};}if(BV===G.GM_YAXIS2){return{size:BS,min:BR,max:Math.min(BT,Math.floor(Ba*BX-Bb-Bd))};}if(BV===G.GM_XAXIS){return{size:BY,min:BR,max:Math.min(BT,Math.floor(Bh*BX-Bc-Bf))};}if(BV===G.GM_XAXIS2){return{size:Bf,min:BR,max:Math.min(BT,Math.floor(Bh*BX-Bc-BY))};}Bg=this.rowHeaderWArr[Bj];if(BV===G.GM_V_MATRIX_LINE){return{size:Bg,min:BR,max:Math.min(BT,Math.floor(Ba*BX-Bd-BS-Bb+Bg))};}Bg=this.colHeaderHArr[Bj];if(BV===G.GM_H_MATRIX_LINE){return{size:Bg,min:BR,max:Math.min(BT,Math.floor(Bh*BX-BY-Bf-Bc+Bg))};}BZ=this.manager;if(BV===G.GM_V_CHART_LINE){return{size:BZ.getColWidth(Bj),min:BR,max:BT};}if(BV===G.GM_H_CHART_LINE){return{size:BZ.getRowHeight(Bj),min:BR,max:BT};}if(BV===G.GM_V_EXTRA_LINE){return{size:this.rowHeaderExtraW,min:BR,max:Math.min(BT,Math.floor(Ba*BX))};}Bg=Bi-Bd-BS-Bb;if(BV===G.GM_RIGHT_BORDER){return{size:Bg,min:BR,max:Math.min(BT,Math.floor(Ba-Bd-BS-Bb))};}Bg=BW-BY-Bf-Bc;if(BV===G.GM_BOTTOM_BORDER){return{size:Bg,min:BR,max:Math.min(BT,Math.floor(Bh-BY-Bf-Bc))};}}function BG(BT,BS){var BU=!BS?this.getDependentMetricOptions():this.getIndependentMetricOptions(),BR;BU.forEach(function(BV){if(BT===BV.key){BR=BV;}});return BR;}function M(BR){var BT=this.getReferenceAxisOption(),BS;BT.forEach(function(BU){if(BU.key===BR){BS=BU;return false;}});return BS;}function AO(BS,BR){var BT;if(BS&&BR){BS.style.display="none";BT=document.elementFromPoint(BR.pageX,BR.pageY);BS.style.display="block";}return BT||BS;}function Ab(BY,BW){var BT=this.scrollNode;if(!BT){return ;}var BZ=BT.xPos=BT.xPos||0,BX=BT.yPos=BT.yPos||0,BV=BT.xPos+BW.deltaX,BU=BT.yPos+BW.deltaY,BS=BT.offsetWidth-BT.parentNode.offsetWidth,BR=BT.offsetHeight-BT.parentNode.offsetHeight;BU=(BU<0)?0:BU;BU=(BU>BR)?BR:BU;BV=(BV<0)?0:BV;BV=(BV>BS)?BS:BV;if(BX===BU&&BZ===BV){return ;}switch(BY){case"v":BX=BT.yPos=BU;break;case"h":BZ=BT.xPos=BV;break;default:BX=BT.yPos=BU;BZ=BT.xPos=BV;}BT.style[Ag.CSS3_TRANSFORM]=Ag.createTranslateString(-BZ,-BX,0);this.onscroll();Ag.stopPropogation(undefined,BW);Ag.preventDefault(undefined,BW);}function Aa(BT){var BS=BT.target||BT.srcElement,BR=BS.getAttribute("ctrlType");if(BR===G.GM_CHART_ROW||BR===G.GM_CHART_COL){Ab.call(this,"both",BT);}}function q(){return(this.defn&&!!this.defn.ttl)?" "+this.defn.ttl:"";}mstrmojo.gm.VisGraphMatrix=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.gm._SupportDndAsBlackBox,mstrmojo._VizSelectionHelper,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo.gm._SupportGraphMatrixBrushesAndHighlights,mstrmojo.vi._MonitorsAppState,mstrmojo.vi.ui.rw._XtabDE,mstrmojo.gm._GMPropertyHandler],{scriptClass:"mstrmojo.gm.VisGraphMatrix",cssClass:"gm-light-theme",menuCssClass:"gm-context-menu-light",theme:AH.LIGHT,noData:false,zIndex:1,sBarWidth:11,textHeightInX:20,textHeightInY:20,lines:null,masterViewer:undefined,slaveRowHeaders:[],slaveColHeaders:[],slaveYAxis:undefined,slaveYAxis2:undefined,slaveXAxis:undefined,slaveXAxis2:undefined,manager:undefined,chartResizeListener:undefined,splitterListeners:undefined,lassoListener:undefined,updateSelectionsListener:undefined,interactor:undefined,mousePos:undefined,layouter:mstrmojo.gm.GMLayout,svgPool:[],normalizedIdCache:{},formattingMode:false,enableTooltip:true,enableShapeHover:true,curSelOptLvl:undefined,enableCETimer:false,initFlagForContextMenu:true,preClickType:R.NONE,trendLineNotifications:null,referencefLineNotifications:null,handleDndForParentNode:true,avatarCssClass:"mstrmojo-VIUnitList",mainContainerNode:"domMainContainer",markupString:'<div id="{@id}" class="{@cssClass}" style="width:{@width}px; position:absolute; height:{@height}px; left:{@left}px; top:{@top}px; z-index:{@zIndex};" mstrAttach:click,scroll,mouseover,mousemove,mouseout,mousedown,mouseup,contextmenu><div class="gm-main-container"><div class="gm-tableheader"></div><div class="gm-colheader"></div><div class="gm-rowheader"></div><div class="gm-yaxis"></div><div class="gm-container"></div><div class="gm-yaxis"></div><div></div><div class="gm-xaxis"></div><div></div><div class="gm-dummy-a"></div><div class="gm-dummy-b"></div></div><div class="gm-legend"></div><div class="gm-message"></div></div>',markupSlots:{domMainContainer:function(){return this.domNode.firstChild;},domTabHeader:function(){return this.domNode.firstChild.childNodes[0];},domColHeader:function(){return this.domNode.firstChild.childNodes[1];},domRowHeader:function(){return this.domNode.firstChild.childNodes[2];},domYAxis:function(){return this.domNode.firstChild.childNodes[3];},domGM:function(){return this.domNode.firstChild.childNodes[4];},domYAxis2:function(){return this.domNode.firstChild.childNodes[5];},domVSBar:function(){return this.domNode.firstChild.childNodes[6];},domXAxis:function(){return this.domNode.firstChild.childNodes[7];},domHSBar:function(){return this.domNode.firstChild.childNodes[8];},domDummyA:function(){return this.domNode.firstChild.childNodes[9];},domDummyB:function(){return this.domNode.firstChild.childNodes[10];},domLegend:function(){return this.domNode.childNodes[1];},domMessage:function(){return this.domNode.childNodes[2];}},markupMethod:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},init:function(BR){this.lines={axes:{},borders:{},vlines:{},hlines:{},rows:[],cols:[],hMajorGridLines:[],hMinorGridLines:[],vMajorGridLines:[],vMinorGridLines:[],axisSplitters:{}};this.HTML5PROPS={};this._super(BR);this.property=this.addDisposable(new BK.GMProperty());this.interactor=this.addDisposable(new BK.GMInteractivity({widget:this,fmtMode:this.formattingMode}));this.initFlagForContextMenu=true;this.trendLineNotifications=[];this.referencefLineNotifications=[];this.splitterListeners=[];this.enableDomDommy=false;},onAppStateChange:function Aq(BR){this._super(BR);this.closePopup();},getContainerMenuItems:function(BR){if(!this.noData){var BS=this.getMenuHandler("changeGlobalShape");if(BS){BR.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",this.id,BS);}}this.getMenuHandler("debug");},raiseEventCMSelection:function(BR,BS){var BT={name:"onContextMenuSelection",identityType:BR};if(BS!==undefined){BT.metricId=BS;}this.raiseEvent(BT);return BT;},raiseEventShapeFormattingTargetsChanged:function(){var BR={name:"shapeFormattingTargetsChanged"};this.raiseEvent(BR);return BR;},raiseEventFormatableChanged:function(BR,BU,BS){if(BR===undefined&&BU===undefined&&BS===undefined){this.raiseEvent(this.lastFormatableChangedObj);return this.lastFormatableChangedObj;}var BT={name:"formattingObjectChanged",identity:BR};BT.selectionlevel=BU;if(BS){BT.arrayOfComb=BS;}this.identity=BR;this.curSelOptLvl=BU;this.arrayOfComb=BS;this.raiseEvent(BT);this.lastFormatableChangedObj=BT;return BT;},raiseEventGlobalPropertyChanged:function(BT,BS,BR){var BU={name:"propertyChanged",n:BT,opt:BR,v:BS};this.raiseEvent(BU);return BU;},raiseEventOnFormattingIdentity:function(BR){if(this.formattingMode){var BS={name:"nonShapeFormatableChanged",identities:BR};this.raiseEvent(BS);return BS;}},raiseEventOnNonFormattingIdentity:function(BR){var BS={name:"nonShapeFormatableChanged",identities:BR};this.raiseEvent(BS);return BS;},raiseEventShapeFormattingChanged:function(BR){var BS=this.getPropertiesOfFormatable();BS.modifiedPropertyKeys=[BR];if(BR===AM.SHAPE_FILL_COLOR){BS.modifiedPropertyKeys.push(AM.SHAPE_BORDER_COLOR);}this.raiseEventGlobalPropertyChanged("ShapeFormatting",BS);},absorbGraphStyle:function(){var BW=this,BR,BS=this.getChartInfo(),Ba=mstrmojo.chart.common.Utility,BU=this.defn.gpp,BT=BU&&BU.gp,BV;BR={isGridChart:BS.isGrid,isPieShape:BS.isPie,isVertical:BS.dirc===BK.EnumABLDirection.VERTICAL};var BZ,BY=1,BX=false;c.forEach(BT,function(Bb){BV=Ba.transformProperty(Bb,0,BR);if(BV&&BV.Name){BX=false;switch(BV.Name){case"ShowSeriesDataLabel":if(!BZ){BZ=BZ||BV.Value;}break;case"DataLabel":BY=BV.Value;BX=BR.isPieShape;break;default:BX=true;break;}if(BX&&BW.property.readItem(BV.Name,true)===undefined){BW.setWidgetPropertyValue(BV.Name,BV.Value);}}});},postFillGMControllerStyle:function Ac(){var BS=this.GMController,BR=this.HTML5PROPS;BS.rhStyles=BR.RH;BS.chStyles=BR.CH;BS.xTitleStyles=BR.AXIS_TITLE_X;BS.yTitleStyles=BR.AXIS_TITLE_Y;},checkTemplateAndDropzone:function A9(){var BS=this,BR=BS.getData(),BY=BR.dz,BV=BR.gsi;if(!!BR.eg&&!this.excludeData){return true;}var BZ=BV.rows,BT=BV.cols,BX;[BT,BZ].forEach(function(Bb){if(!BX&&Bb){var Ba=Bb[Bb.length-1];if(Ba&&Ba.did==="-1"){BX=BV.mx;}}});var BU=["Rows","Columns","SizeBy","AngleBy","SliceBy","ColorBy","XAxis","YAxis","BreakBy","AdditionalMetrics"],BW=true;c.forEach(BU,function(Bb){var Ba=BY[Bb],Bc;if(Ba){Bc=Ba.TemplateMetric;if(Bc){c.forEach(Bc,function(Bd){BW=BW&&(c.find(BX,"did",Bd.id)!==-1);});}}});return BW;},update:function AI(Bf){var BR=this._super(Bf);if(!BR){return BR;}if(!this.checkTemplateAndDropzone()){mstrmojo.err({name:"Currently we do not support metric selector targeting to Widget",message:"Attribute/Metric in Dropzone doesn't match Grid Template"});return BR;}var Bi=this,BU=Bi.model,Bd=this.getData(),Bb,BS,Bh,BW=this.property,Bg=BU.docModel,BX=Bg.datasets,BZ,Bc;if(V.isOnExpressMode()){this.noData=!!Bd.eg;if(!this.noData){this.INVALID_TEMP=BP.isInvalidTemplate(Bd);}if(this.noData||this.INVALID_TEMP){this.errorMsg=BP.getInvalidTemplateErrMsg(Bd.eg);return BR;}}Bi.sid=Bd.sid;Ah(Bd);BP.startTimer({functionName:"VisGraphMatrix.update",purpose:"JSON loading & consuming ("+this.k+")"});Bb=Bd.dz;BS=Bb.visProp.fmt;var BY,Be={},BV,Ba={};for(BZ in BX){if(BX.hasOwnProperty(BZ)){Bc=BX[BZ];BV=Bc.did;BY=Bc.att.concat(Bc.mx);c.forEach(BY,function(Bj){Be[Bj.did]=Bj.t;Ba[Bj.did]=BV;});}}this.itemId2DsIdMap=Ba;AT.call(this,BS,BW,Be);BP.destroyDisposable(this,this.GMController);Bh=this.GMController=this.addDisposable(new BK.GMController({view:this,property:this.property,defn:this.defn,firstRes:Bd,xtabModel:BU}));Bh.msgCenter={};this.noData=!this.excludeData&&!!Bd.eg;if(!this.noData){Bh.postInit();this.absorbGraphStyle();this.resetHTML5Props();this.absorbAxisOrigin();A1.call(this,Bd,BU,Bh);n.call(this,Bh);Bh.updateChartInfo();BW.setController(this.GMController);Ak.call(this,true);}else{Bh.postInit4NoData();this.errorMsg=Bd.eg;}var BT=Bh.isPie?W.PIE:Bh.getChartInfo().tp;this.property.updateChartProps(BT);Bh.resetDataLabelType();Bh.resetDataLabelPlacement();Bh.resetFitTo();BP.endTimer(undefined,true);return BR;},getVisType:function F(){var BV=this.getWidgetPropertyValue("visType");if(BV===undefined){var BU=this.GMController.chartType,BT=this.getChartInfo(),BR=BK.EnumABLDirection.VERTICAL;if(BT.isCombo){BV=A8.GRAPHCOMBINATIONBARAREADUALAXIS;}else{if(BT.isGrid){var BS=this.getWidgetPropertyValue(Al.SHAPE);if(BS===f.LINE){BU=W.LINE;}else{if(BS===f.BAR){BU=W.BAR;}else{if(BS===f.AREA){BU=W.AREA;}else{if(BS===f.PIE){BU=W.BAR;}else{if(BS===f.RING){BU=W.BAR;}else{BU=W.BAR;}}}}}}switch(BU){case W.AREA:BV=(BT.dirc===BR)?A8.GRAPHMATRIXVERTICALAREAAUTOMATIC:A8.GRAPHMATRIXHORIZONTALAREAAUTOMATIC;break;case W.BAR:BV=(BT.dirc===BR)?A8.GRAPHMATRIXVERTICALBARAUTOMATIC:A8.GRAPHMATRIXHORIZONTALBARAUTOMATIC;break;case W.LINE:BV=(BT.dirc===BR)?A8.GRAPHMATRIXVERTICALLINEAUTOMATIC:A8.GRAPHMATRIXHORIZONTALLINEAUTOMATIC;break;case W.SCATTER:case W.BUBBLE:BV=A8.GRAPHMATRIXBUBBLECIRCLEMM;break;case W.PIE:BV=A8.GRAPHMATRIXPIE;break;case W.GRID:break;}}}return{s:BA,vt:BV};},getChartStyle:function(){return this.node.data.visName;},setInteractive:function(BR){this.enableTooltip=BR;this.enableShapeHover=BR;},getFlushGraphPropertyAction:function(BS){var BY=[],BT,BR,BX,BV,BU,BW=false;c.forEach(BS,function(BZ){BT=BZ.n;BV=BZ.v;BU=BM[BT];if(BU!==undefined){BW=true;BR=BU.split("_");BX=BR.join("\u001e");BY[BX]=BV;}});},isInCombinationMode:function(){var BR=this.GMController;return BR.enableCombiChart;},trendLineCouldBeEnabled:function(){return true;},refLineCouldBeEnabled:function(){return true;},isAttributeMetricChart:function(){var BR=this.GMController;return BR.isABL;},getGraphFormatsForSingleShape:function(BU,BV){var BT,BS,BR,BW,BX=this.GMController;if(BV===X.ALL_SHAPE){BS=AM.ALL_SHAPE_FORMAT;BR=this.getWidgetPropertyValue(BS);return BR;}if(BV===X.ITSELF_RESOLVED){BW=BU.getGraphCell();return BW.getFormattingProperties();}if(BV===X.ITSELF){BT=BU.getSelectedObjectLowestLevel(true);}else{if(BV===X.COLOR_BY){BT=BU.getSelectedObjectColorByInfo();}else{if(BV===X.METRIC){BT=BU.getSelectedObjectMetricInfo();}}}return BX.getShapeFormatsWithCombination(BT);},clientRerenderGraphMatrix:function(){this.update();this.GMController.reRenderGM();},updateColorMapCallback:function(){this.colorByData=this.GMController.getColorByLegendInfo();this.GMController.clearShapeFormatsCache();this.updateCharts();if(this.legend){this.legend.updateColorBySquare(this.colorByData);}this.raiseEventShapeFormattingChanged(AM.SHAPE_FILL_COLOR);},applyHTML5Props:function(BR){O=parseInt(BR.MATRIX_LINE_V.borderWidth,10)||1;BH=parseInt(BR.MATRIX_LINE_H.borderWidth,10)||1;D=parseInt(BR.AXIS_LINE_Y.borderWidth,10)||1;AL=parseInt(BR.AXIS_LINE_X.borderWidth,10)||1;Ad=Math.floor((parseInt(BR.AXIS_TITLE_X.fontSize,10)||11)/t+0.5);An=Math.floor((parseInt(BR.AXIS_TITLE_Y.fontSize,10)||11)/t+0.5);BR.AXIS_TITLE_X.lineHeight=Ad+"px";BR.AXIS_TITLE_Y.lineHeight=An+"px";Ad+=12;An+=12;},getAddTRLineAction:function(BS){var BR=BD.call(this,BS);BR.rm=o.AddTRLine;return BR;},getUpdateTRLineAction:function(BS){var BR=BD.call(this,BS);BR.rm=o.UpdateTRLine;return BR;},getRemoveTRLineAction:function(BS){var BR=BD.call(this,BS);BR.rm=o.RemoveTRLine;return BR;},getUpdateForecastInfoAction:function(BS){var BR=BD.call(this,BS);BR.rm=o.UpdateForecastInfo;return BR;},collectTrendLineAction:function(BS,BU,BR){var BT;BT=this.getTrendRefInfo(BS);if(BR){BT.metricId=BR;}if(BS.existing){BU.push(this.getUpdateTRLineAction(BT));}else{BU.push(this.getAddTRLineAction(BT));}},collectRefLineAction:function(BT,BU,BR){var BS;BS=this.getTrendRefInfo(BT);if(BR){BS.metricId=BR;}if(BT.existing){BU.push(this.getUpdateTRLineAction(BS));}else{BU.push(this.getAddTRLineAction(BS));}},collectAddRefLineAction:function(BS,BT){var BR;BR=this.getTrendRefInfo(BS);BT.push(this.getAddTRLineAction(BR));},collectRemoveRefLineAction:function(BS,BT){var BR;BR=this.getTrendRefInfo(BS);if(BS.existing){BT.push(this.getRemoveTRLineAction(BR));}},collectABLForecastActions:function(BR,BS,BW){var BU={},BT=BR[Al.TREND_SEASONALITY];BU[Al.TREND_SEASONALITY]=BT;BU[Al.TREND_FORECAST_ENABLED]=BR[Al.TREND_FORECAST_ENABLED];BU[Al.TREND_BWD_FORECAST]=BR[Al.TREND_BWD_FORECAST];BU[Al.TREND_FWD_FORECAST]=BR[Al.TREND_FWD_FORECAST];var BV=this.getTrendRefInfo(BU);BV.metricId=BS;BW.push(this.getUpdateForecastInfoAction(BV));},getEnableTrendLineActions:function(BS,BT,BR){BT=BT||[];this.collectTrendLineAction(BS,BT,BR);return BT;},getEnableRefLineActions:function(BS,BT,BR){BT=BT||[];this.collectRefLineAction(BS,BT,BR);return BT;},onFormatableTargetChanged:function(BV){var BZ,Ba,BS,BR=this.interactor.fmtState,BY,BW,Bb,BU;if(this.syning){return ;}if(BV&&BV.optLvl===X.COLOR_BY){BR=this.interactor.fmtState=BB.PER_COLORBY;}if(BR===BB.PER_COLORBY){BZ=this.interactor.getColorByIdentities();}else{BZ=this.interactor.getBreakByIdentities();}if(!BV){var BT=this.GMController.model.colorType;if(BR!==BB.PER_SHAPE&&(BT===AP.NULL||BT===AP.METRICS)){BS=X.ALL_SHAPE;V.visPrint("Changed to ALL");}else{BS=(BR===BB.PER_COLORBY?X.COLOR_BY:X.ITSELF);Bb=this.collectUniqueCombination(BZ,BS);V.visPrint("Changed to Color By by Mouse Action");}this.curSelOptLvl=BS;}else{BS=BV.optLvl;this.curSelOptLvl=BS;if(BV.key==="none"){this.clearSelections(true);}else{if(BS===X.ALL_SHAPE){V.visPrint("Changed to ALL");}else{if(BS===X.ITSELF){V.visPrint("Changed to Selected Elements");Bb=this.collectUniqueCombination(BZ,BS);}else{if(BS===X.COLOR_BY){Ba={};BY=BV.comb;Bb=[BY];c.forEach(BY,function(Bc){if(!Ba[Bc.tid]){Ba[Bc.tid]=[{id:Bc.eid}];}else{Ba[Bc.tid].push({id:Bc.eid});}});V.visPrint("Changed to Color By Option "+BV.opt);}else{if(BS===X.METRIC){BW=BV.comb;Ba={};c.forEach(BW,function(Bc){if(!Ba[Bc.tid]){Ba[Bc.tid]=[{id:Bc.eid}];}else{Ba[Bc.tid].push({id:Bc.eid});}});V.visPrint("Changed to Metric By Option "+BV.opt);}}}}}}BU={objType:At.SHAPE_COLLECTION,identityArr:BZ};var BX;if(BW){BX=[BW];}else{if(Bb){BX=Bb;}else{BX=undefined;}}this.syning=true;this.raiseEventFormatableChanged(BU,BS,BX);this.syning=false;},submitUpdatesAndPersistXML:function Ap(BV,Bd,BT,BR,Bc,BX){BV=BV||[];if(this.isXMLDirty()){BV.push(this.getPersistAction());}if(BV.length===0){return ;}var BY=this,BW,BU,BS={},Bb=BY.getDocModel(),Ba=Bb.getDataService();if(BX){BU=this.model.getDataService().newRetrievalKeysConfig();BU.addNode(this.k,BX);BV[0].partialRetrieval=BU;}if(BR){k.copy(mstrmojo.DocDataService.SUPPRESS_DATA,BS);}if(Bc){k.copy(mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION,BS);}if(BR&&BT){BW={silent:true,undo:BT.undo,redo:BT.redo};}else{BW={callback:this.getUnSilentUndoRedoCallback(BV,Bb)};}Az(BY).execute({execute:function BZ(){var Be=Ba.newUpdate(this,undefined);Be.add(BV,Bd,BS);if(!BR){this.submitUpdate(Be);}else{this.submitSilent(Be.actions);}BY.resetXMLDirtyFlag();},urInfo:BW});},getModelController:function(){return this.model.controller||this.getDocModel().controller;},getXTabRefreshCallBack:function(){return this.getModelController()._getXtabCallback(this);},getDocModelSliceCallback:function(){return this.getDocModel().getSliceCallback({tks:this.k});},getUnSilentUndoRedoCallback:function(BU,BS){var BT=this.getXTabRefreshCallBack(),BR=false;c.forEach(BU,function(BV){if(BV.act==="updateElementsPropertiesMap"){BR=true;return false;}});if(BR){BL(BS.getUpdateColorMapCallback(),BT);}return BT;},outputLog4PartialRender:function Am(){if(S&&window.console){if(this.GMController.enablePartialRendering){V.visPrint("# Partial Rendering: ON");}else{V.visPrint("# Partial Rendering: OFF");}}},hEvalSizeIteratively:function BJ(){this.hEvalSize4Headers();A6.call(this);this.hEvalSize4GMArea();if(!this.getWidgetPropertyValue(AM.COLUMN_HEADER_SHOW)){return ;}var BV,BZ,BW,BS=this.layouter,BX=this.GMController,BU=false,Ba=BX.getColTitleInfo(true),BY=this.hGetColTitleWidth(),BR=this.colHeaderHArr.length,Bb=this.HTML5PROPS,BT=BX.getAttributesOnDropZone("Rows").length>0?2:3;for(BV=0;BV<BR;BV++){BZ=Ba.items[BV].n;BW=BS.batchEvalTextHeight([BZ],[BY],Bb.CH_TITLE,A5+AU,BT)[0];if(BW>this.colHeaderHArr[BV]){this.colHeaderHArr[BV]=BW;BU=true;}}if(BU){A6.call(this);this.hEvalSize4GMArea();}},isEmpty:function Y(){return this.noData||!this.GMController||this.GMController.isEmptyVis();},isNoData:function e(){var BR=this.getData();return !this.excludeData&&!!BR.eg;},getVisEmptyMsgControls:function A(){var BS=this.GMController,BW=BS&&BS.getAggregatedVisType(),BT,BV=V.getAttMetricCount.call(this);BW=BW==="default"?"barchart":BW;BT=BO[BW]||mstrmojo.desc(5614,"Graph Matrix");if(this.excludeData){return[{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",cssClass:BW,visName:BT,visDropzoneMsg:mstrmojo.vi.ui.rw.FreezingImageContainer.getVisDropzoneMsg(BV.attCount,BV.metricCount)}];}var BU;if(this.noData){if(this.model.data.egt===2){BU=V.getVisEmptyMsg.call(this,"AE_ERROR",this.model.data.eg);}else{BU=V.getVisEmptyMsg.call(this,"NODATA_OTHERERROR",this.model.data.eg);}}else{BU=V.getVisEmptyMsg();}if(!(mstrApp&&mstrApp.isWSStyling)||this.noData){return[{scriptClass:"mstrmojo.Container",markupString:BU,markupSlots:{containerNode:function(){return this.domNode;}}}];}var BR=BE.getVisDesc(BW);return[{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",cssClass:BW,visName:BT,visDesc:BR}];},renderErrorMessage:function Ax(BS){var BT=this.domMessage,BR=document.createElement("div");BT.style.cssText+="position:relative;";BR.className="mstrmojo-message gm-error-msg";BR.innerText=BS;BT.appendChild(BR);},displayOtherNotificationMessage:function(){var BS=this.GMController,BR=BS.msgCenter;if(BR){k.forEach(BR,function(BT,BU){mstrmojo.notify(BU,null);});delete BS.msgCenter;}},displayTrendLineErrorMessages:function(){var BS,BV=this.GMController,BT=BV.trendLineErrors;if(BT){for(BS in BT){if(BT.hasOwnProperty(BS)){AB.notify(BT[BS]);}}}delete BV.trendLineErrors;var BR=this.trendLineNotifications,BU=this.referenceLineNotifications;c.forEach([BR,BU],function(BW){c.forEach(BW,function(BX){AB.notify(BX);});});this.trendLineNotifications=[];this.referenceLineNotifications=[];if(BV.trendlineDefined&&BV.mulAttsOnAxisForABL){AB.notify(mstrmojo.desc(12281,"Trend lines are disabled due to multiple attributes on independent axis."));}if(this.trendSeasonalityError){AB.notify(mstrmojo.desc(14105,"The seasonality feature is unavailable with logarithmic and power trend line models."));delete this.trendSeasonalityError;}},setModel:function L(BR){this._super(BR);this.listenToUpdateColorMap(this.updateColorMapCallback);},setBgFormats:function(){var BR=this.defn.fmts&&this.defn.fmts.p_fmts;if(k.isEmpty(this.bgFormats)&&BR){var BS=this.bgFormats={};c.forEach(Av,function(BT){if(BR[BT]){BS[BT]=BR[BT];}});}},postBuildRendering:function(){var BU=this;this.waitingForData=this.waitingForData||this.excludeData&&mstrApp.isAppStatePause();if(this.waitingForData){if(this.excludeData&&mstrApp.isAppStatePause()){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});}return ;}if(!this.checkTemplateAndDropzone()){mstrmojo.err({name:"Currently we do not support metric selector targeting to Widget",message:"Attribute/Metric in Dropzone doesn't match Grid Template"});return ;}if(V.isOnExpressMode()){var BT=this.model.docModel.thm.did,BR=((BT==="F1FED8AC42B57AC1B0E9518FED0F89D6"&&!mstrApp.isWSStyling)?"mojo-theme-dark":"mojo-theme-light"),BS=document.getElementsByClassName("mstrmojo-OIVMPage ");if(BS.length===1){BS[0].setAttribute("class","mstrmojo-OIVMPage "+BR);}}this.postBuilderingCalled=true;var BV=this.HTML5PROPS;if(V.isOnExpressMode()){if(this.isEmpty()||this.INVALID_TEMP){this.renderErrorMessage(this.errorMsg||mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data."));this._super();return ;}}else{if(this.isEmpty()){this._super();return ;}}if(!this.hValidateInput()||this.INVALID_TEMP){return ;}this.applyHTML5Props(BV);this.setTheme(this.theme);this.hResetLocalVars();mstrApp.showProgress({category:"GM",message:mstrmojo.desc(8445,"Loading")+q.call(this)});if(this.excludeData){this.raiseEvent({name:"toggleCtrlOverlay",visible:true,controls:this.getVisEmptyMsgControls()});return ;}if(!this.noData){mstrApp.showProgress({message:mstrmojo.desc(14804,"Calculating")+q.call(this)});BP.startTimer({functionName:"VisGraphMatrix.postBuildRendering",purpose:"Layout of GraphMatrix ("+this.k+")"});this.adjustRHAndCHOpacity();this.hInitHelpers();this.hPrepareDataAndCE();this.hEvalSize4Legend();this.hEvalSizeIteratively();this.hCalcRadiusAndMargin(true);this.hDecideDataLabelRotation();this.initGMScroll();this.hLayoutControls();this.hFillContents();this.hInitLegend();this.hInitWidgetMatrixes();this.updateRowValueBackground();this.updateColumnValueBackground();this.hUpdateLegend();this.hPlaceRHResizers(BV.MATRIX_LINE_V);this.hPlaceCHResizers(BV.MATRIX_LINE_H);this.hPlaceYResizers(BV.AXIS_LINE_Y);this.hPlaceXResizers(BV.AXIS_LINE_X);this.hPlaceOutBorders();this.outputLog4PartialRender();BP.endTimer(undefined,true);BP.startTimer({functionName:"WidgetMatrixManager.drawCharts",purpose:"Rendering of GraphMatrix ("+this.k+")"});this.manager.drawCharts();BP.endTimer(undefined,true);mstrApp.showProgress({message:mstrmojo.desc(14805,"Finalizing")+q.call(this)});this.hPlaceRowResizers(BV.MATRIX_LINE_H);this.hPlaceColResizers(BV.MATRIX_LINE_V);this.hPlaceHGridLines(BV.GRID_LINE_MAJOR,BV.GRID_LINE_MINOR);this.hPlaceVGridLines(BV.GRID_LINE_MAJOR,BV.GRID_LINE_MINOR);this.hPlaceYSplitters(BV.MATRIX_LINE_V);this.hInitListeners();setTimeout(function(){BU.updateScrollBars();},0);}this.setBgFormats();this.displayTrendLineErrorMessages();this.displayOtherNotificationMessage();this.initFlagForContextMenu=false;this.attachEventListener("highLightObjectChange",this.interactor.id,this.interactor.onHighLightObjectChange);var BW=this.getExp(),BX=this.getRowsAndCols();V.modifyScExp(BW,BX,this.model,this.normalizedIdCache);if(this._super){this._super();}Ai.call(this);mstrApp.hideProgress({category:"GM"});this.noSwitch=true;this.raiseEventShapeFormattingTargetsChanged();delete this.noSwitch;},updateScrollBars:function(){this.vSBar.updateScrollbars();this.hSBar.updateScrollbars();if(this.masterViewer){this.scrollNode=this.masterViewer.domContainer.firstChild;}},updateChartsPosition:function(BV,BT){var BU=this.scrollNode;if(!BU){return ;}var BZ=BU.xPos||0,BY=BU.yPos||0,BX=BT,BW=BT,BS=BU.offsetWidth-BU.parentNode.offsetWidth,BR=BU.offsetHeight-BU.parentNode.offsetHeight;BW=(BW<0)?0:BW;BW=(BW>BR)?BR:BW;BX=(BX<0)?0:BX;BX=(BX>BS)?BS:BX;if(BV==="v"){if(BY===BW){return ;}BY=BU.yPos=BW;}else{if(BZ===BX){return ;}BZ=BU.xPos=BX;}BU.style[Ag.CSS3_TRANSFORM]=Ag.createTranslateString(-BZ,-BY,0);this.onscroll();},onBrushing:function z(BS){if(BS.keys.indexOf(this.k)!==-1){var BU=this.manager,BR=BS.from.getSelectionHash(),BV=[],BW,BY=-1,BT=-1,BX=this.GMController;k.forEach(BR,function(Ba){var BZ=this.GMController.checkAttributeIntersection(Ba,["Rows","Columns"]);c.forEach(BZ,function(Bb){var Bc={};Bc[Bb]=Ba[Bb];BV.push(Bc);});},this);BW=BU.filterCharts(BV);c.forEach(BW,function(BZ){if(BZ.byRow){BY=BY<0?BZ.start:Math.min(BY,BZ.start);}else{BT=BT<0?BZ.start:Math.min(BT,BZ.start);}});if(BY>=0){this.updateChartsPosition("v",BU.master.getRowPosition(BY));}if(BT>=0){this.updateChartsPosition("h",BU.master.getColPosition(BT));}BX.resetHighLightIndex=true;}if(this._super){this._super(BS);}},onscroll:function A4(){var BR,BW,BT=this,BS=this.manager,BV=this.HTML5PROPS,BU=this.scrollNode;if(!BU){return ;}if(mstrApp&&mstrApp.toggleProgress){mstrApp.toggleProgress(false);if(this._blockTimeout){window.clearTimeout(this._blockTimeout);}this._blockTimeout=window.setTimeout(function(){mstrApp.toggleProgress(true);},l*1.5);}if(!this._timeout){this._timeout=window.setTimeout(function(){BR=BU.xPos;BW=BU.yPos;BT.vSBar.updateScrollPosition(BW);BT.hSBar.updateScrollPosition(BR);BP.startTimer({functionName:"VisGraphMatrix.onscroll.annonymous",purpose:"Rendering of GraphMatrix (after scrolling) ("+this.k+")"});BT.outputLog4PartialRender();BS.drawCharts();BT.updateSelections();BP.endTimer();delete BT._timeout;if(mstrApp&&mstrApp.hideWait){mstrApp.hideWait(true);}},l);}BR=BU.xPos;BW=BU.yPos;BS.scrollTo(BR,BW);BT.hPlaceRowResizers(BV.MATRIX_LINE_H);BT.hPlaceColResizers(BV.MATRIX_LINE_V);BT.hPlaceHGridLines(BV.GRID_LINE_MAJOR,BV.GRID_LINE_MINOR);BT.hPlaceVGridLines(BV.GRID_LINE_MAJOR,BV.GRID_LINE_MINOR);BT.interactor.updateSelectedBroders();},onmouseover:function(Bb){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BV=this.getRealTarget(Bb),BS=this.interactor,BR=this.GMController.getChartInfo(),BW=Bb.e,BX=this,BZ=this.vSBar,Bc=this.hSBar,BT=this.domNode;c.forEach([BX.domGM,BX.domRowHeader,BX.domYAxis,BX.domYAxis2],function(Bd){if(Ag.contains(Bd,BV,true,BT)){BZ.toggleHoverState(true);return false;}});c.forEach([BX.domGM,BX.domColHeader,BX.domXAxis],function(Bd){if(Ag.contains(Bd,BV,true,BT)){Bc.toggleHoverState(true);return false;}});var BY=BS.domMenuPH.getElementsByClassName("mstrmojo-ui-Menu"),Ba=BS.domToolbarPH.firstChild;if(BS.fmtMode&&AK(BW,BY,Ba)){return ;}var BU=V.getMouseOffset(BW);BS.handleMouseOver(BV,BR,BU.x,BU.y);},onmouseout:function(BS){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BT=this.domNode,BR=BS.e.toElement||BS.e.relatedTarget,BU=this;c.forEach([BU.domGM,BU.domRowHeader,BU.domYAxis,BU.domYAxis2],function(BV){if(!Ag.contains(BV,BR,true,BT)){BU.vSBar.toggleHoverState(false);return false;}});c.forEach([BU.domGM,BU.domColHeader,BU.domXAxis],function(BV){if(!Ag.contains(BV,BR,true,BT)){BU.hSBar.toggleHoverState(false);return false;}});if(!Ag.contains(BT,BR,true)){this.interactor.hideTooltip();this.interactor.clearHoveredTarget();this.interactor.clearHoveredSetShape();this.interactor.clearHoveredShape();this.interactor.clearSHTargets();}},oncontextmenu:function Aw(Ba){delete this.noHighlightAfterKeepOnlyExcludeDrill;delete this.noReorderAfterShowData;if(!this.hasRendered||V.isOnExpressMode()){return ;}this.raiseEventOnNonFormattingIdentity([]);var Bb=this.getDocModel(),BS=Bb&&Bb.getSelectedViUnit(),BY=(BS instanceof mstrmojo.vi.ui.rw.VizBox)&&BS.titleBar;if(BY&&BY.onclick){BY.onclick();}var BT=Ba.e,BU=this.getRealTarget(Ba),BW={x:BT.pageX+2,y:BT.pageY+2},BX=this.GMController.disabledUnits,BR=this.interactor,BZ=this.legend,BV=BU.identity||(BU.parentNode&&BU.parentNode.identity);this.mousePos={x:BT.pageX+2,y:BT.pageY+2};this.closePopup();if(BZ&&Ag.contains(BZ.domNode,BU,true)){BR.handleRMCOnLegend(BU,k.clone(BW));if(BV&&BV.objType!==At.GRAPH_SHAPE){this.raiseEventOnFormattingIdentity([BV]);}}else{BR.handleRMClick(BU,BX,k.clone(BW),BT);}this.preClickType=R.RIGHT_CLICK;j.call(this,BW,this.interactor.domToolbarPH,this.interactor.domMenuPH);if(BT!==null){Ag.stopPropogation(BT.hWin,BT);Ag.preventDefault(BT.hWin,BT);}},getRealTarget:function(BR){return BR.getTarget();},clearUserSelections:function(){if(this.isClearAllDisabled()){return false;}this.interactor.clearSelectRules();this.clearSelections(true);this.endSelections();return true;},resetSelectionEmptyFlag:function(){this.selectionEmptyFlag=k.isEmpty(this.getSelectionHash());},endSelections:function(){if(k.isEmpty(this.getSelectionHash())){if(!this.selectionEmptyFlag){this.selectionEmptyFlag=true;this._super();}}else{this.selectionEmptyFlag=false;this._super();}},closePopup:function(){var BR=this.interactor;if(BR){BR.hideToolbar();BR.hideContextMenu();}if(this._super){this._super();}this._lastOpened=null;},onmousedown:function(BR){this.shouldNotTriggerClick=false;var BT=this.vSBar.domNode,BS=this.hSBar.domNode,BU=BR.getTarget();if(Ag.contains(BS,BU)||Ag.contains(BT,BU)){this.shouldNotTriggerClick=true;}},onclick:function(Bd){delete this.noHighlightAfterKeepOnlyExcludeDrill;delete this.noReorderAfterShowData;if(this.shouldNotTriggerClick){this.shouldNotTriggerClick=false;return ;}if(this.noData||this.INVALID_TEMP){return ;}this.raiseEventOnNonFormattingIdentity([]);var Bb=this,BS=this.interactor,BW=this.getRealTarget(Bd),BU=Bd.hWin,BX=Bd.e,BR=BX.ctrlKey||BX.metaKey,Bc=this._timeoutClick;Bb.model.docModel.setVisActive(Bb.id);if(Bd.e.originEvent){this.onmousemove(Bd);window.setTimeout(function(){BS.hideTooltip();},2500);}this.mousePos={x:BX.pageX+2,y:BX.pageY+2};this.closePopup();if(this.enableDomDommy&&(BW===this.domDummyA||BW===this.domDummyB)){var BZ=this.GMController.getDebugMenu();this.showContextMenu(Bd,BZ);return ;}this.hideContextMenu();if(this.formattingMode){if(Bc){Ag.stopPropogation(BU,BX);window.clearTimeout(Bc);delete this._timeoutClick;BS.handleDblClick(BW,BR,BX);this.preClickType=R.DOUBLE_CLICK;}else{this._timeoutClick=window.setTimeout(function(){BS.handleClick(BW,BR,BX);delete Bb._timeoutClick;Bb.preClickType=R.LEFT_CLICK;},C);}}else{if(Bc){window.clearTimeout(Bc);delete this._timeoutClick;}var Ba=BW.getAttribute("type");if(Ba===G.LASSO_SELECTOR){var Be=this.manager.master.lassoSelector;var BV=AO(Be,BX);BS.handleClick(BV,BR,BX,Be);}else{if(Ba===G.LINE_CONTAINER){var BY=AO(BW,BX);var BT=BY&&BY.getAttribute("type");if(BT===G.GM_SHAPE||BT===G.GM_MARKER){BS.handleClick(BY,BR,BX);}else{BS.handleClick(BW,BR,BX);}}else{BS.handleClick(BW,BR,BX);}}this.preClickType=R.LEFT_CLICK;}},onmousemove:function(Bd){if(!this.hasRendered||this.INVALID_TEMP||this.noData){return ;}var BW,BT,BU=Bd.e,BV=this.getRealTarget(Bd),BY=BV.getAttribute("type"),BR=this.GMController.getChartInfo(),BS=this.interactor,Bc;var BZ=BS.domMenuPH.getElementsByClassName("mstrmojo-ui-Menu"),Ba=BS.domToolbarPH.firstChild;if(BS.fmtMode&&AK(BU,BZ,Ba)){BS.hideTooltip();return ;}var Bb=this.enableTooltip;if(!Bb){return ;}if(BY===G.GM_SVG_CHART){BS.hideTooltip();Bc=this.domGM.childNodes[0];Bc.style.zIndex="-2";BW=document.elementFromPoint(BU.pageX,BU.pageY);Bc.style.zIndex="auto";BT=BW.getAttribute("type");if(BS.fmtMode&&(BT===G.LINE_CONTAINER||BT===G.GM_H_GRID_LINE||BT===G.GM_V_GRID_LINE||BT===G.GM_H_MINOR_GRID_LINE||BT===G.GM_V_MINOR_GRID_LINE)){BS.handleMouseOver(BW);}else{BS.handleMouseOver(BV,BR,V.getMouseOffset(BU).x,V.getMouseOffset(BU).y);}}else{if(BY===G.LASSO_SELECTOR){var Be=this.manager.master.lassoSelector;BW=AO(Be,BU);BT=BW.getAttribute("type");if(BT===G.GM_SHAPE||BT===G.GM_MARKER){BS.handleMouseOver(BW,BR,V.getMouseOffset(BU).x,V.getMouseOffset(BU).y);BS.showTooltip(BW,{x:BU.pageX,y:BU.pageY});}else{BS.handleMouseOver(BW,BR,V.getMouseOffset(BU).x,V.getMouseOffset(BU).y);BS.hideTooltip();}}else{if(BY===G.GM_SHAPE||BY===G.GM_MARKER||BY===G.GM_TREND_LINE||BY===G.GM_REF_LINE){BS.handleMouseOver(BV,BR,V.getMouseOffset(BU).x,V.getMouseOffset(BU).y);BS.showTooltip(BV,{x:BU.pageX,y:BU.pageY});}else{if(BY===G.GM_SET_SHAPE){if(BR.tp===W.AREA&&BR.shape===f.AREA){BS.handleMouseOver(BV,BR,V.getMouseOffset(BU).x,V.getMouseOffset(BU).y);}else{BS.hideTooltip();}}else{if(BY===G.LINE_CONTAINER){var BX=AO(BV,BU);BT=BX.getAttribute("type");if(BT===G.GM_SHAPE||BT===G.GM_MARKER){BS.handleMouseOver(BX,BR,V.getMouseOffset(BU).x,V.getMouseOffset(BU).y);BS.showTooltip(BX,{x:BU.pageX,y:BU.pageY});}else{BS.hideTooltip();}}else{BS.hideTooltip();}}}}}},destroy:function(){var BR=this.interactor;if(BR){this.closePopup();}Ar.call(this);this.hResetLocalVars();this._super();if(this.GMController===mstrmojo.gm.GMLayout.API.owner){mstrmojo.gm.GMLayout.API={};}delete this.GMController;},unrender:function(){var BS=this.interactor,BT=this,BR=this.lines;if(BS){BS.hideTooltip();}Ar.call(this);var BU=function(BV){BV=typeof BV==="string"?BT[BV]:BV;if(BV){BV.unrender();BT.removeChildren(BV,true);}};["Row","Col"].forEach(function(BW){var BV="slave"+BW+"Headers",BX=BT[BV];BX.forEach(BU);BT[BV]=[];});["slaveXAxis","slaveYAxis","slaveXAxis2","slaveYAxis2","masterViewer","legend"].forEach(function(BV){BU(BV);delete BT[BV];});c.forEach(Object.keys(BR),function(BW){var BV=BR[BW];if(c.isArray(BV)){BV.forEach(BU);BR[BW]=[];}else{c.forEach(Object.keys(BV),function(BY){var BX=BV[BY];BU(BX);delete BV[BY];});}});BP.handleDestroy(this,N);BP.handleDestroy(this.GMController,["mstrmojo.gm.GMDataModel"]);if(this.GMController){delete this.GMController.manager;}this._super();},hResetLocalVars:function(){this.sBarWidth=11;BP.destroyDisposable(this,this.manager);this.manager=undefined;BP.destroyDisposable(this,this.masterViewer);this.masterViewer=undefined;this.slaveRowHeaders=[];this.slaveColHeaders=[];this.slaveYAxis=undefined;this.slaveXAxis=undefined;this.slaveYAxis2=undefined;this.slaveXAxis2=undefined;this.yAxisFixed=false;this.yAxis2Fixed=false;this.xAxisFixed=false;this.xAxis2Fixed=false;this.lines={axes:{},borders:{},vlines:{},hlines:{},rows:[],cols:[],hMajorGridLines:[],hMinorGridLines:[],vMajorGridLines:[],vMinorGridLines:[],axisSplitters:{}};this.textHeightInX=Ad;this.textHeightInY=An;},hValidateInput:function(){var BS=parseInt(this.width,10),BR=parseInt(this.height,10);if(isNaN(BS)||isNaN(BR)){return false;}return true;},hInitHelpers:function(){var BS,BR;BS=this.addDisposable(new mstrmojo.WidgetMatrixManager({GMController:this.GMController,widthScale:this.getWidgetPropertyValue(Al.SCALE_CHART_WIDTH),heightScale:this.getWidgetPropertyValue(Al.SCALE_CHART_HEIGHT)}));BR=this.interactor;BR.domWidget=this.domNode;BR.clearAll();this.manager=this.GMController.manager=BS;this.interactor=BR;},hPrepareDataAndCE:function(){var BR=this.GMController,BS=BR.hasColorBy(),BT=BR.hasSizeBy();this.needLegend=BS||BT;this.colorByData=BS?BR.getColorByLegendInfo():null;this.sizeByData=BT?BR.getSizeByLegendInfo():null;this.needLegend=!!this.colorByData||!!this.sizeByData;BR.setupAxisCondense();BR.setupAxisLayout();this.updateLegendColorByOpacity();},hDecideDataLabelRotation:function(){var BR=this.GMController;BR.decideDataLabelRotation();},hCalcRadiusAndMargin:function(BS){var BR=this.GMController;BR.calculateRadius();if(BS){BR.initYAxisMargins();BR.initXAxisMargins();}},hInitLegend:function(){if(!this.needLegend){return ;}var BT=this.isShapeCombonation(),BR;if(BT.shapeType===undefined){BR=this.getChartInfo().shape;}else{BR=BT.shapeType;}if(BR===f.LINE&&this.GMController.isOneDotCase()){BR=f.CIRCLE;}BP.destroyDisposable(this,this.legend);var BU=this.HTML5PROPS,BS=new BK.GMLegend({widget:this,shapeType:BR,placeholder:this.domLegend,currDockedPositionIdx:this.getLegendDockPosIdx(this.getWidgetPropertyValue(Al.LEGEND_POSITION)),cutBy:this.legendCutBy,styles:BU.LEGEND,model:this.model});BS.render();BS.parent=this;this.legend=this.addDisposable(BS);this.domLegend=BS.domNode;},hUpdateLegend:function(){var BR=this.legend;if(BR){BR.cutBy=this.legendCutBy;BR.minHeight=this.legendMinHeight;BR.updateContainerSize(this.getWidth(),this.actualHeight);BR.feedData([{dataType:A7.COLOR_BY,dataObj:this.colorByData},{dataType:A7.SIZE_BY,dataObj:this.sizeByData}],this.getWidgetPropertyValue(Al.LEGEND_MODE)===J.MINIMIZED);}},hInitListeners:function(){var Bb=this,BU=this.id,Bf=this.legend,BW=this.manager,Bd=this.GMController,Bg=this.lines,Bc=Bg.axes,BV=Bg.hlines,Ba=Bg.vlines,BX=Bg.borders&&Bg.borders.bottom,BY=Bg.borders&&Bg.borders.right;this.chartResizeListener=BW.attachEventListener("MiniChartResized",BU,function(Bh){var Bi=Bh.chartWidthScale,Bj=Bh.chartHeightScale;if(Bi){Bd.initXAxisMargins();this.writeGlobalProperty(Al.SCALE_CHART_WIDTH,Bi,undefined,undefined,[{name:Al.FIT_TO,value:AN.MANUAL,valueWas:this.GMController.view.getWidgetPropertyValue(Al.FIT_TO)}]);}if(Bj){Bd.initYAxisMargins();this.writeGlobalProperty(Al.SCALE_CHART_HEIGHT,Bj,undefined,undefined,[{name:Al.FIT_TO,value:AN.MANUAL,valueWas:this.GMController.view.getWidgetPropertyValue(Al.FIT_TO)}]);}});this.updateSelectionsListener=BW.attachEventListener("UpdateSelections",BU,function(){Bb.updateSelections();});k.keyarray(Bc).forEach(function(Bh){Bb.splitterListeners.push(Bc[Bh].attachEventListener("splitterMoved",BU,function(Bi){Bb.onSplitterMoved(Bi.position,Bi.info);}));});k.keyarray(Ba).forEach(function(Bh){Bb.splitterListeners.push(Ba[Bh].attachEventListener("splitterMoved",BU,function(Bi){Bb.onSplitterMoved(Bi.position,Bi.info);}));});k.keyarray(BV).forEach(function(Bh){Bb.splitterListeners.push(BV[Bh].attachEventListener("splitterMoved",BU,function(Bi){Bb.onSplitterMoved(Bi.position,Bi.info);}));});if(BX){this.splitterListeners.push(BX.attachEventListener("splitterMoved",BU,function(Bh){Bb.onSplitterMoved(Bh.position,Bh.info);}));}if(BY){this.splitterListeners.push(BY.attachEventListener("splitterMoved",BU,function(Bh){Bb.onSplitterMoved(Bh.position,Bh.info);}));}if(Bf){this.legendResizeListener=Bf.attachEventListener("gm-legend-resized",BU,function(Bh){Bb.onLegendResized(Bh.position);});this.legendClickListener=Bf.attachEventListener("gm-legend-clicked",BU,function(Bh){Bb.onLegendClicked(Bh);});}var BS=[{node:Bb.domRowHeader,dirc:"v"},{node:Bb.domColHeader,dirc:"h"},{node:Bb.domGM,dirc:"both"},{node:Bb.domYAxis,dirc:"v"},{node:Bb.domYAxis2,dirc:"v"},{node:Bb.domXAxis,dirc:"h"}];c.forEach(BS,function(Bh){if(Bh.node){V.addWheelListener(Bh.node,Ab.bind(Bb,Bh.dirc));}});function BZ(Bi){var Bh=Ag.findWidget(Bi.target);if(Bh.scriptClass==="mstrmojo.VisSplitter"||Bh.scriptClass==="mstrmojo.VisAxisLabel"){return true;}else{return false;}}function BR(Bh){if(BZ(Bh.event)){return{pause:false};}}function Be(Bi){if(!Bi.event.type.startsWith("mouse")){var Bs=Bi.deltaX,Bn=Bi.deltaY,Bl=Bi.event;var Bk;this.hSBar.toggleHoverState(true);this.vSBar.toggleHoverState(true);var Bm=this.scrollNode;if(!Bm){return ;}var Br=Bm.xPos=Bm.xPos||0,Bq=Bm.yPos=Bm.yPos||0,Bp=Bm.xPos-Bs,Bo=Bm.yPos-Bn,Bj=Bm.offsetWidth-Bm.parentNode.offsetWidth,Bh=Bm.offsetHeight-Bm.parentNode.offsetHeight;Bo=(Bo<0)?0:Bo;Bo=(Bo>Bh)?Bh:Bo;Bp=(Bp<0)?0:Bp;Bp=(Bp>Bj)?Bj:Bp;if(Bq===Bo){this.getDocModel().raiseEvent(k.copy({name:"visOutsideScrolled",deltaX:0,deltaY:Bn,originalEvent:Bl},{}));}else{if(Bq!==Bo){Bk=new WheelEvent("wheel",{view:window,bubbles:true,deltaMode:(Bl.deltaMode!==undefined?Bl.deltaMode:1),deltaX:0,deltaY:-Bn,deltaZ:0,});Ab.call(this,"both",Bk);}}if(Br===Bp){this.getDocModel().raiseEvent(k.copy({name:"visOutsideScrolled",deltaX:Bs,deltaY:0,originalEvent:Bl},{}));}else{if(Br!==Bp){Bk=new WheelEvent("wheel",{view:window,bubbles:true,deltaMode:(Bl.deltaMode!==undefined?Bl.deltaMode:1),deltaX:-Bs,deltaY:0,deltaZ:0,});Ab.call(this,"both",Bk);}}}if(BZ(Bi.event)){return{pause:false};}}function BT(Bh){this.hSBar.toggleHoverState(false);this.vSBar.toggleHoverState(false);if(BZ(Bh.event)){return{pause:false};}}if(Bb.domMainContainer){V.addWheelListener(Bb.domMainContainer,Aa.bind(Bb));V.addBasicTouchSupport(Bb.domMainContainer,Bb,BR.bind(Bb),Be.bind(Bb),BT.bind(Bb));}},hLayoutLegend:function(BT){var BS=this.legendIsRight(BT),BR=this.domMainContainer;if(BS){BR.style.left="0px";}else{BR.style.left=this.legendW+this.legendP+O+"px";}},hEvalSize4Headers:function(){var BR=this.GMController,Be=this.HTML5PROPS,BZ=BR.getRowHeadersToCalcWidth(),Bf=BR.getColHeadersToCalcWidth(),BT=BR.getRowTitleInfo(),BU=BR.getColTitleInfo(),Bd=BR.getYAxisInfo(undefined,undefined,BR.haveY1),BX=this.layouter,Bi=this.getWidgetPropertyValue(AM.ROW_HEADER_SHOW),Bb=this.getWidgetPropertyValue(AM.ROW_VALUES_SHOW),Bg=this.getWidgetPropertyValue(AM.COLUMN_HEADER_SHOW),BY=this.getWidgetPropertyValue(AM.COLUMN_VALUES_SHOW),Ba=this.getWidgetPropertyValue(AM.Y_AXIS_TITLE_SHOW),BW=function(Bk,Bl){var Bj,Bm=Bk.length;for(Bj=0;Bj<Bm;Bj++){Bk[Bj]*=(Bl[Bj]||1);}},Bh=function(Bk,Bl){var Bj;Bk.length=Bl;for(Bj=0;Bj<Bl;Bj++){Bk[Bj]=0;}},BS=function(){var Bk=BZ.length>0,Br=Bi,Bp=Bd.items.length>0&&!Bd.isMetric,Bm=Ba,Bl=BR.hasFooterInX&&BR.isFooterAbove,Bq=BY;var Bo=Bk&&Br,Bj=Bp&&Bm,Bn=Bl&&Bq;return{hasAndShowRT:Bo,hasAndShowYAAT:Bj,hasAndShowFA:Bn};};this.rowHeaderWArr=BX.getRowHeadersWidth(BZ,Be.RH);this.colHeaderHArr=BX.getColHeadersHeight(Bf,Be.CH);this.rowHeaderExtraW=BX.getRowHeaderP1Width(BZ.length,Bf.length,BU,this.colHeaderHArr,Be.CH_TITLE,Bg,BR);if(BR.isGridPie&&BZ.length===0&&Bd.items.length===0&&BR.isMetricNamesOnColumns){Bd.items.push("Metric Names");}var BV=BR.getAttributesOnDropZone("Columns").length>0?2:3;this.rowHeaderMaxHeightWithoutX2=BX.getColHeaderP1Height(BT,this.rowHeaderWArr,Bd,Be,BS(),BV);this.colHeaderExtraH=this.rowHeaderMaxHeightWithoutX2;if(this.rowHeaderExtraW===0){this.removeWidgetProperty(Al.SCALE_V_EXTRA_LINE);}else{var Bc=this.getWidgetPropertyValue(Al.SCALE_V_EXTRA_LINE);this.rowHeaderExtraW*=Bc;}BW(this.rowHeaderWArr,this.getWidgetPropertyValue(Al.SCALE_ROW_HEADERS));BW(this.colHeaderHArr,this.getWidgetPropertyValue(Al.SCALE_COL_HEADERS));if(!Bi&&!Bb){Bh(this.rowHeaderWArr,BZ.length);}if(!Bg&&!BY){Bh(this.colHeaderHArr,Bf.length);}},hEvalSize4Legend:function(){var BV,BT=this.colorByData,BS=this.sizeByData,BU=this.getWidth(),BR=this.getHeight(),BW=this.HTML5PROPS.LEGEND,BX;if(!this.needLegend||this.getWidgetPropertyValue(Al.LEGEND_VISIBLE)===false){this.legendW=this.legendH=this.legendP=0;}else{d.applyHTML5Props(BW);this.legendP=AE;BX=this.getWidgetPropertyValue(Al.SCALE_LEGEND_WIDTH);if(BX==="undefined"||this.legendScale!==BX){this.legendScale=BX;this.legendResized=true;this.legendFixedW=undefined;delete this.legendFixedW;}BV=d.getLegendSize([{dataType:A7.COLOR_BY,dataObj:BT},{dataType:A7.SIZE_BY,dataObj:BS}],this.legendResized?this.legendScale:undefined,BU,BR,BW,this.legendFixedW);this.legendCutBy=BV.cutBy;this.legendMinHeight=BV.minHeight;this.legendFixedW=BV.width;if(BV.scale){this.legendScale=BV.scale;}if(this.getWidgetPropertyValue(Al.LEGEND_MODE)===J.MINIMIZED||BV.autoCollapse){BV=d.getLegendSize4MinMode(BT,BR);this.legendCutBy=undefined;}this.legendW=BV.width;this.legendH=BV.height;}},legendIsRight:function(BR){BR=BR||this.getWidgetPropertyValue(Al.LEGEND_POSITION);return BR===AQ.RIGHT_MIDDLE||BR===AQ.RIGHT_TOP||BR===AQ.RIGHT_BOTTOM;},hEvalSize4GMArea:function(){var Bf,BS=this.GMController,Bg=BS.isXDualAxis,BW=BS.isYDualAxis,BY=this.manager,Ba=this.layouter,Bc=this.GMInfo,Be=this.xAxisFixed?Bc.xAxisHeight:undefined,Bi=this.yAxisFixed?Bc.yAxisWidth:undefined,BU=this.yAxis2Fixed?Bc.yAxis2Width:undefined,BV=this.xAxis2Fixed?Bc.xAxis2Height:undefined,Bd=this.getWidth(),BZ=this.getHeight(),BT=this.rowHeaderWArr,Bh=this.colHeaderHArr,BR=this.legendIsRight(),BX=this.getWidgetPropertyValue(Al.SCALE_ALL),Bb=this.getWidgetPropertyValue(AM.Y_AXIS_TITLE_SHOW);if(this.legendW>0){Bd-=this.legendW+this.legendP+O;}this.actualWidth=Bd;this.actualHeight=BZ;this.rowHeaderW=AZ.sum(BT,O);this.colHeaderH=AZ.sum(Bh,BH);Bf=AZ.add(0,this.rowHeaderW,O);Bf=AZ.add(Bf,this.rowHeaderExtraW,O);Bd-=Bf;BZ-=AZ.add(0,this.colHeaderH,BH);BS.initLayouter(Ba);Bc=Ba.calculateLayout(Bf,Bd,BZ,Be,BV,Bi,BU,BX,{h:0,v:0,ha:AL,va:D,ob:0,dx:Bg,dy:BW,rb:(BR&&this.legendW>0),styles:this.HTML5PROPS.RH_TITLE,syat:Bb,rhMaxH:this.rowHeaderMaxHeight});if(Bc.widthCacheChanged){BY.feedChartWidthInfo(BS.widthCache);BY.updateHSlaves();BS.initXAxisMargins();}if(Bc.heightCacheChanged){BY.feedChartHeightInfo(BS.heightCache);BY.updateVSlaves();BS.initYAxisMargins();}this.colHeaderExtraH=Bc.xAxis2Height;BZ-=AZ.add(0,this.colHeaderExtraH,BS.haveX2?AL:BH);BZ-=AZ.add(0,Bc.xAxisHeight,AL);Bd-=AZ.add(0,Bc.yAxisWidth,D);Bd-=AZ.add(0,Bc.yAxis2Width,D);this.GMW=(Bc.pageWidth)||Bd;this.GMH=(Bc.pageHeight)||BZ;this.actualWidth-=Bd-this.GMW;this.actualHeight-=BZ-this.GMH;this.GMInfo=Bc;this.autoSetPRFlag();},autoSetPRFlag:function(){var BS=this.GMController;if(BS.isBubbleOrScatter()){BS.enablePartialRendering=true;return ;}var BU=1.2;var BT=BS.getChartCountInCol()*BS.getChartCountInRow();if(BT<=1){var BR=(this.GMInfo.avgChartWidth/this.GMW>=BU)||(this.GMInfo.avgChartHeight/this.GMH>=BU);if(BR){BS.enablePartialRendering=BS.getGraphShapeCount()>10000;}}else{BU=2;if((this.GMInfo.avgChartWidth/this.GMW>=BU)||(this.GMInfo.avgChartHeight/this.GMH>=BU)){BS.enablePartialRendering=true;}}},initGMScroll:function(){var BR,BS;BP.destroyDisposable(this,this.vSBar);BR=new BK.GMScroll({view:this,placeholder:this.domVSBar,cssClass:"gm-vsbar",bodyClass:"gm-vsbar-body",direction:"v"});BR.render();BR.addScrollListener();this.vSBar=this.addDisposable(BR);BP.destroyDisposable(this,this.hSBar);BS=new BK.GMScroll({view:this,placeholder:this.domHSBar,cssClass:"gm-hsbar",bodyClass:"gm-hsbar-body",direction:"h"});BS.render();BS.addScrollListener();this.hSBar=this.addDisposable(BS);},hLayoutControls:function(){var Bc=this.GMController,BW=this.GMInfo,Bf=BW.yAxisWidth,Bd=BW.yAxis2Width,BR=BW.xAxisHeight,BZ=this.rowHeaderW,BY=AZ.sum([BZ,this.rowHeaderExtraW],O),BX=AZ.sum([BY,Bf],O),Bb=this.colHeaderH,BU=AZ.sum([Bb,this.colHeaderExtraH],BH),BV=BX+(Bc.haveY1?D:O),BT=BU+(Bc.haveX2?AL:BH),Ba=BV+this.GMW+(Bc.haveY2?D:0),BS=BT+this.GMH+(Bc.haveX1?AL:0),Be=this.HTML5PROPS.LEGEND;this.offsetX=BV;this.offsetY=BT;this.offsetX2=Ba;this.offsetY2=BS;AX(this.domLegend,{width:this.legendW,height:this.legendH});V.applyStyle2Legend(Be,this.domLegend);AX(this.domMainContainer,{width:this.actualWidth,height:this.actualHeight});AX(this.domTabHeader,{width:BX,height:BU});AX(this.domColHeader,{width:this.GMW,height:BU,left:BV});AX(this.domRowHeader,{width:BY,height:this.GMH,top:BT});AX(this.domYAxis,{width:Bf,height:this.GMH,left:(BY===0)?0:(BY+O),top:BT});AX(this.domGM,{width:this.GMW,height:this.GMH,left:BV,top:BT});AX(this.domYAxis2,{width:Bd,height:this.GMH,left:Ba,top:BT});AX(this.domXAxis,{width:this.GMW,height:BR,left:BV,top:BS});AX(this.domDummyA,{width:BY,height:BR,top:BS});AX(this.domDummyB,{width:Bf,height:BR,left:BY+O,top:BS});this.hLayoutLegend();this.hLayoutScrollBars(BV,BT,Ba,BS,BR,Bd);},hLayoutScrollBars:function(BU,BT,BX,BS,BR,BY){var BV=this.GMInfo,BW=this.vSBar,BZ=this.hSBar;AX(BW.domNode,{height:this.GMH,width:this.sBarWidth,top:BT,left:BX+BY-this.sBarWidth});AX(BW.domBody,{height:BV.canvasHeight});AX(BZ.domNode,{width:this.GMW,height:this.sBarWidth,left:BU,top:BS+BR-this.sBarWidth});AX(BZ.domBody,{width:BV.canvasWidth});},hGetRowTitleHeight:function(){var BR=this.colHeaderHArr.length;if(this.colHeaderExtraH>0){return this.colHeaderExtraH;}return this.colHeaderHArr[BR-1];},hGetColTitleWidth:function(){var BS=this.rowHeaderWArr.length,BR=this.GMInfo;if(this.rowHeaderExtraW>0){return this.rowHeaderExtraW;}if(BR.yAxisWidth>0){return BR.yAxisWidth;}return this.rowHeaderWArr[BS-1];},getCellForNode:function AF(BR){return BR.identity;},getCellUnitIndex:function I(BR){return(BR.o!==undefined)?BR.o:BR._ei;},hFillContents:function(){var Bb=this,BY=this.GMInfo,Be=this.HTML5PROPS,Bd=this.GMController,BV=Bb.getWidgetPropertyValue(AM.ROW_HEADER_SHOW),BU=Bb.getWidgetPropertyValue(AM.COLUMN_HEADER_SHOW),BX=function(){var Bu,Bn,Bg,Bm,Bh,Bw=Bb.domTabHeader,Bt=Bb.rowHeaderWArr.length,Bs=Bb.colHeaderHArr.length,Bp=Bb.rowHeaderExtraW>0||Bb.colHeaderExtraH>0,Bi=Bb.GMController,Br=0,Bf=0,Bj=Bd.getRowTitleInfo(true),Bk=Bd.getColTitleInfo(true),Bv=Bd.getYAxisInfo(),Bl,Bx=[],Bo;Bb.rowTitleH=Bm=Bb.hGetRowTitleHeight();Bb.colTitleW=Bh=Bb.hGetColTitleWidth();if(Bb.rowHeaderWidgets){Bb.rowHeaderWidgets.forEach(function(By){BP.destroyDisposable(Bb,By);});}Bb.rowHeaderWidgets=[];Bw.innerHTML="";for(Bu=0;Bu<Bt;Bu++){Bx=[];Bn=document.createElement("div");Bn.setAttribute("class","gm-rowheader-title");AX(Bn,{width:Bb.rowHeaderWArr[Bu],height:Bm,left:Br},true);Bn.setAttribute("type",G.GM_ROW_HEADER_TITLE);Bn.setAttribute("depth",String(Bu));V.applyStyles2DomNode(Bn,Be.RH_BK);Bw.appendChild(Bn);Bn.identity=new BK.TitleCellIdentity(Bj.items[Bu]);if(BV&&Bj.items[Bu].n){Bo={text:Bj.items[Bu].n,extraAttributes:{type:G.GM_ROW_HEADER_TITLE}};Bx.push(Bo);Bl=new mstrmojo.gm.TitleLabelCapsule({width:Bb.rowHeaderWArr[Bu],height:Bm,cssClass:"gm-rowheader-title",styles:Be.RH_TITLE,labelObj:Bx[0],maxLineCount:Bd.getAttributesOnDropZone("Columns").length>0?2:3});Bl.render();Bl.parent=Bb;Bb.addDisposable(Bl);Bb.rowHeaderWidgets.push(Bl);Bg=Bl.domNode;V.applyStyles2DomNode(Bg,Be.RH_BK);if(Bg.firstChild&&Bg.firstChild.firstChild){V.applyStyles2DomNode(Bg.firstChild.firstChild,Be.RH_TITLE);}Bg.identity=new BK.TitleCellIdentity(Bj.items[Bu]);Bn.appendChild(Bg);}Br+=Bb.rowHeaderWArr[Bu]+O;}if(Bb.columnHeaderWidgets){Bb.columnHeaderWidgets.forEach(function(By){BP.destroyDisposable(Bb,By);});}Bb.columnHeaderWidgets=[];for(Bu=0;Bu<Bs;Bu++){Bx=[];Bn=document.createElement("div");Bn.setAttribute("class","gm-colheader-title");AX(Bn,{width:Bh,height:Bb.colHeaderHArr[Bu],top:Bf,right:0},true);Bn.setAttribute("type",G.GM_COL_HEADER_TITLE);Bn.setAttribute("depth",String(Bu));V.applyStyles2DomNode(Bn,Be.CH_BK);Bw.appendChild(Bn);Bn.identity=new BK.TitleCellIdentity(Bk.items[Bu]);if(BU&&Bk.items[Bu].n){Bo={text:Bk.items[Bu].n,extraAttributes:{type:G.GM_COL_HEADER_TITLE}};Bx.push(Bo);Bl=new mstrmojo.gm.TitleLabelCapsule({width:Bh,height:Bb.colHeaderHArr[Bu],cssClass:"gm-colheader-title",styles:Be.CH_TITLE,labelObj:Bx[0],maxLineCount:Bd.getAttributesOnDropZone("Rows").length>0?2:3});Bl.render();Bl.parent=Bb;Bb.addDisposable(Bl);Bb.columnHeaderWidgets.push(Bl);Bg=Bl.domNode;V.applyStyles2DomNode(Bg,Be.CH_BK);if(Bg.firstChild&&Bg.firstChild.firstChild){V.applyStyles2DomNode(Bg.firstChild.firstChild,Be.CH_TITLE);}Bg.identity=new BK.TitleCellIdentity(Bk.items[Bu]);Bn.appendChild(Bg);}Bf+=Bb.colHeaderHArr[Bu]+BH;}var Bq=Bb.getWidgetPropertyValue(AM.Y_AXIS_TITLE_SHOW);if(Bq===undefined){Bq=Bb.getWidgetPropertyDefaultValue(AM.Y_AXIS_TITLE_SHOW,{isMetric:Bi.yIsNumeric});}if(Bp&&BY.yAxisWidth>0&&Bq&&Bv.isMetric===false&&Bv.items.length>0){Bx=[];if(Bv.isMetric===false&&Bv.items.length>0){c.forEach(Bv.items,function(Bz,By){Bo={text:Bz,extraAttributes:{type:G.GM_YLABEL,dzId:B.YAxis,dzIndex:By,identity:new BK.AttributeAxisTitleIdentity({n:Bz,tid:Bv.ids[By],objType:At.Y_ATTRIBUTE_AXIS_TITLE})}};Bx.push(Bo);});}Bl=new mstrmojo.VisAxisLabel({width:Bh+"px",height:Math.min(Bm,Bb.textHeightInY)+"px",cssClass:"gm-yaxis-cell-label",styles:Bi.yTitleStyles,align:"center",contentData:Bx});Bl.render();Bl.parent=Bb;if(Bb.extraTitleWidget){BP.destroyDisposable(Bb,Bb.extraTitleWidget);}Bb.addDisposable(Bl);Bb.extraTitleWidget=Bl;Bl.domNode.style.bottom=Math.max((Bm-Bb.textHeightInY)/2,0)+"px";Bl.domNode.style.right=Math.max((Bh-Bl.contentWidth)/2,0)+"px";Bw.appendChild(Bl.domNode);Bb.extraTitleDiv=Bl.domNode;}else{Bb.extraTitleDiv=undefined;}},Ba=function Ba(){var Bh,Bi,Bg=0,Bf=Bb.domRowHeader.childNodes;for(Bh=0;Bh<Bb.rowHeaderWArr.length;Bh++){if(Bf[Bh]){Bi=Bf[Bh];}else{Bi=document.createElement("div");Bb.domRowHeader.appendChild(Bi);}Bi.setAttribute("class","gm-rowheader-lv2");AX(Bi,{width:Bb.rowHeaderWArr[Bh],height:Bb.GMH,left:Bg,"z-index":Bb.rowHeaderWArr.length-1-Bh});Bg+=Bb.rowHeaderWArr[Bh]+O;if(Bb.slaveRowHeaders[Bh]){Bb.slaveRowHeaders[Bh].resizeAbs(Bb.rowHeaderWArr[Bh],Bb.GMH);}}},BS=function BS(){var Bh,Bi,Bf=0,Bg=Bb.domColHeader.childNodes;for(Bh=0;Bh<Bb.colHeaderHArr.length;Bh++){if(Bg[Bh]){Bi=Bg[Bh];}else{Bi=document.createElement("div");Bb.domColHeader.appendChild(Bi);}Bi.setAttribute("class","gm-colheader-lv2");AX(Bi,{width:Bb.GMW,height:Bb.colHeaderHArr[Bh],top:Bf,"z-index":Bb.colHeaderHArr.length-1-Bh});Bf+=Bb.colHeaderHArr[Bh]+BH;if(Bb.slaveColHeaders[Bh]){Bb.slaveColHeaders[Bh].resizeAbs(Bb.GMW,Bb.colHeaderHArr[Bh]);}}if(Bb.colHeaderExtraH>0){if(Bg[Bh]){Bi=Bg[Bh];}else{Bi=document.createElement("div");Bb.domColHeader.appendChild(Bi);}Bb.domXAxis2=Bi;Bi.setAttribute("class","gm-colheader-lv2");AX(Bi,{width:Bb.GMW,height:Bb.colHeaderExtraH,top:Bf});if(Bb.slaveColHeaders[Bh]){Bb.slaveColHeaders[Bh].resizeAbs(Bb.GMW,Bb.colHeaderExtraH);}}else{Bb.domXAxis2=null;}},BR=function(){var Bg,Bf=Bb.domYAxis.childNodes;if(Bf[0]){Bg=Bf[0];}else{Bg=document.createElement("div");Bb.domYAxis.appendChild(Bg);}AX(Bg,{position:"absolute",width:BY.yAxisWidth,height:Bb.GMH});if(Bb.slaveYAxis){Bb.slaveYAxis.resizeAbs(BY.yAxisWidth,Bb.GMH);}},BW=function(){var Bg,Bf=Bb.domYAxis2.childNodes;if(Bf[0]){Bg=Bf[0];}else{Bg=document.createElement("div");Bb.domYAxis2.appendChild(Bg);}AX(Bg,{position:"absolute",width:BY.yAxis2Width,height:Bb.GMH});if(Bb.slaveYAxis2){Bb.slaveYAxis2.resizeAbs(BY.yAxis2Width,Bb.GMH);}},BT=function(){var Bg,Bf=Bb.domXAxis.childNodes;if(Bf[0]){Bg=Bf[0];}else{Bg=document.createElement("div");Bb.domXAxis.appendChild(Bg);}AX(Bg,{position:"absolute",width:Bb.GMW,height:BY.xAxisHeight});if(Bb.slaveXAxis){Bb.slaveXAxis.resizeAbs(Bb.GMW,BY.xAxisHeight);}},Bc=function(){var Bh,Bg=Bb.masterViewer,Bf=Bb.domGM.childNodes;if(Bf[0]){Bh=Bf[0];}else{Bh=document.createElement("div");Bb.domGM.appendChild(Bh);}AX(Bh,{position:"absolute",width:Bb.GMW,height:Bb.GMH});if(Bg){Bg.resizeAbs(Bb.GMW,Bb.GMH);}},BZ=function(){var Bf=Bb.legend;if(Bf){Bf.width=Bb.legendW;Bf.height=Bb.legendH;}};BX();Ba();BS();BR();BW();BT();Bc();BZ();},hPlaceOutBorders:function(BX){var Bb,BZ,Bg=this.actualWidth,Bf=this.actualHeight,Bl=document,Bj=this.domMainContainer,BT=this.lines.borders,BV=this.getWidgetPropertyValue(Al.OUTSIDE_BORDER),Bi=this.HTML5PROPS.MATRIX_LINE_V,BU=this.HTML5PROPS.MATRIX_LINE_H,Bh=parseInt(Bi.borderWidth,10)||0,Bk=this.getWidgetPropertyValue(Al.FIT_TO),BS=this.legendIsRight(BX),Ba=this.getWidth(),Bc=this.getHeight(),Bd=this.legendW,BR=this.GMInfo.nCols===1&&this.GMInfo.nRows===1,BW=mstrApp.getThemeProps("THEME_STYLE"),BY=BW===AW.DEFAULT,Be=1;if(!BV){BZ=BT.left;if(BZ){BZ.hide();}BZ=BT.right;if(BZ){BZ.hide();}BZ=BT.top;if(BZ){BZ.hide();}BZ=BT.bottom;if(BZ){BZ.hide();}return ;}BZ=BT.left;if(Bd>0&&!BS){if(!BZ){Bb=Bl.createElement("div");BZ=new mstrmojo.VisSplitter({placeholder:Bb,type:G.GM_V_MATRIX_LINE,identity:{objType:At.V_MATRIX_LINE},styles:Bi,dir:"v",parent:this,draggable:false});this.addDisposable(BZ);BZ.render();Bb=BZ.domNode;Bj.appendChild(Bb);BT.left=BZ;}BZ.updatePosition({left:0,height:Bf});}else{if(BZ){BZ.hide();}}BZ=BT.right;if((Bd<=0&&((Ba-Bg)>Be))||(Bd>0&&(BS||((Ba-Bg-Bd-this.legendP)>Be)))&&!(BR&&BY)){if(!BZ){Bb=Bl.createElement("div");BZ=new mstrmojo.VisSplitter({placeholder:Bb,type:G.GM_V_MATRIX_LINE,identity:{objType:At.V_MATRIX_LINE},styles:Bi,dir:"v",parent:this,context:{dock:Au.RIGHT,type:G.GM_RIGHT_BORDER},draggable:Bk===AN.NONE});this.addDisposable(BZ);BZ.render();Bb=BZ.domNode;Bj.appendChild(Bb);BT.right=BZ;}BZ.updatePosition({left:Bg,height:Bf});BZ.updateSize(g.call(this,G.GM_RIGHT_BORDER));}else{if(BZ){BZ.hide();}}BZ=BT.bottom;if((Bc-Bf)>Be){if(!BZ){Bb=Bl.createElement("div");BZ=new mstrmojo.VisSplitter({placeholder:Bb,type:G.GM_H_MATRIX_LINE,identity:{objType:At.H_MATRIX_LINE},styles:BU,dir:"h",parent:this,context:{dock:Au.BOTTOM,type:G.GM_BOTTOM_BORDER},draggable:Bk===AN.NONE});this.addDisposable(BZ);BZ.render();Bb=BZ.domNode;Bj.appendChild(Bb);BT.bottom=BZ;}BZ.updatePosition({top:Bf,width:Bg+Bh});BZ.updateSize(g.call(this,G.GM_BOTTOM_BORDER));}else{if(BZ){BZ.hide();}}},hPlaceYResizers:function(Ba){var BR,Bb,BS=this.GMInfo,BU=BS.yAxisWidth,BX=BS.yAxis2Width,BZ=this.actualHeight,BY=document,BT=this.domMainContainer,BW=this.lines.axes,BV=this.getWidgetPropertyValue(AM.Y_AXIS_LINE_SHOW);if(!BV){Bb=BW.y1;if(Bb){Bb.domNode.style.display="none";}Bb=BW.y2;if(Bb){Bb.domNode.style.display="none";}return ;}Bb=BW.y1;if(BU>0){if(!Bb){BR=BY.createElement("div");Bb=new mstrmojo.VisSplitter({placeholder:BR,cssClass:"gm-axis-line",type:G.GM_YAXIS_LINE,identity:{objType:At.Y_AXIS},styles:Ba,dir:"v",context:{dock:Au.RIGHT,type:G.GM_YAXIS},parent:this});this.addDisposable(Bb);Bb.render();BR=Bb.domNode;BT.appendChild(BR);BW.y1=Bb;}Bb.updatePosition({left:this.offsetX-D,height:BZ-BS.xAxisHeight});Bb.updateSize(g.call(this,G.GM_YAXIS));}else{if(Bb){Bb.hide();}}Bb=BW.y2;if(BX>0){if(!Bb){BR=BY.createElement("div");Bb=new mstrmojo.VisSplitter({placeholder:BR,cssClass:"gm-axis-line",type:G.GM_YAXIS2_LINE,identity:{objType:At.Y2_AXIS},styles:Ba,dir:"v",context:{dock:Au.LEFT,type:G.GM_YAXIS2},parent:this});this.addDisposable(Bb);Bb.render();BR=Bb.domNode;BT.appendChild(BR);BW.y2=Bb;}Bb.updatePosition({left:this.offsetX2-D,height:BZ-BS.xAxisHeight});Bb.updateSize(g.call(this,G.GM_YAXIS2));}else{if(Bb){Bb.hide();}}},hPlaceXResizers:function(Bb){var BS,Bc,BY=this.GMController,BU=this.GMInfo,BR=BU.xAxisHeight,BX=BU.xAxis2Height,BT=this.actualWidth,Ba=document,BV=this.domMainContainer,BW=this.lines.axes,BZ=this.getWidgetPropertyValue(AM.X_AXIS_LINE_SHOW);if(!BZ){Bc=BW.x1;if(Bc){Bc.domNode.style.display="none";}Bc=BW.x2;if(Bc){Bc.domNode.style.display="none";}return ;}Bc=BW.x1;if(BR>0){if(!Bc){BS=Ba.createElement("div");Bc=new mstrmojo.VisSplitter({placeholder:BS,cssClass:"gm-axis-line",type:G.GM_XAXIS_LINE,identity:{objType:At.X_AXIS},styles:Bb,dir:"h",context:{dock:Au.TOP,type:G.GM_XAXIS},parent:this});this.addDisposable(Bc);Bc.render();BS=Bc.domNode;BV.appendChild(BS);BW.x1=Bc;}Bc.updatePosition({top:this.offsetY2-AL,width:this.rowHeaderW?BT:BT-BU.yAxis2Width-BU.yAxisWidth,left:this.rowHeaderW?0:BU.yAxisWidth});Bc.updateSize(g.call(this,G.GM_XAXIS));}else{if(Bc){Bc.hide();}}Bc=BW.x2;if(BX>0&&BY.haveX2){if(!Bc){BS=Ba.createElement("div");Bc=new mstrmojo.VisSplitter({placeholder:BS,cssClass:"gm-axis-line",type:G.GM_XAXIS2_LINE,identity:{objType:At.X2_AXIS},styles:Bb,dir:"h",context:{dock:Au.BOTTOM,type:G.GM_XAXIS2},parent:this});this.addDisposable(Bc);Bc.render();BS=Bc.domNode;BV.appendChild(BS);BW.x2=Bc;}Bc.updatePosition({top:this.offsetY-AL,width:this.rowHeaderW?BT:BT-BU.yAxis2Width-BU.yAxisWidth,left:this.rowHeaderW?0:BU.yAxisWidth});Bc.updateSize(g.call(this,G.GM_XAXIS2));}else{if(Bc){Bc.hide();}}},hPlaceColResizers:function(Bb){var Ba=this.getWidgetPropertyValue(AM.V_MATRIX_LINES_SHOW),BS=this.lines.cols;if(!Ba){BS.forEach(function(Bq){if(Bq){Bq.hide();}});return ;}var Bl,Bh,Bd,Bi,BW,Bo,Bp=document,BR=Bp.createDocumentFragment(),Bg=this.manager,BT=this.GMController,BX=!(BT.haveX2||BT.isFooterAbove),BV=this.GMInfo.xAxis2Height,Bj=this.GMInfo.nCols,BY=Bg.intersectCheck4Col(this.GMW),Bf=BY.start,BU=BY.end,Bk=this.actualHeight,Bn=this.domMainContainer,Bc=this.offsetX,Bm=this.colHeaderHArr,Be=Bm.length;Bk=AZ.minus(Bk,this.GMInfo.xAxisHeight,AL);var BZ=Bg.collectColDepths(Bj);for(Bl=0;Bl<Bj;Bl++){Bd=BS[Bl];if(Bl>=Bf&&Bl<BU&&Bl<Bj-1){Bo=BZ[Bl];BW=Bg.getColOffset(Bl+1)+Bc;Bi=AZ.sum(Bm,BH,Bo);if(Bo===Be&&BX){Bi=AZ.add(Bi,BV,BH);}if(!Bd){Bh=Bp.createElement("div");Bd=new mstrmojo.VisSplitter({placeholder:Bh,type:G.GM_V_CHART_LINE,identity:{objType:At.V_MATRIX_LINE},styles:Bb,dir:"v",context:{dock:Au.RIGHT,type:G.GM_CHART_COL,depth:Bl},markControlType:true,parent:this});this.addDisposable(Bd);Bd.render();Bh=Bd.domNode;BR.appendChild(Bh);BS[Bl]=Bd;this.splitterListeners.push(Bd.attachEventListener("splitterMoved",this.id,function(Bq){this.onSplitterMoved(Bq.position,Bq.info);}));}Bd.updatePosition({left:BW-BH,top:Bi,height:Bk-Bi});Bd.updateSize(g.call(this,G.GM_V_CHART_LINE,Bl));}else{if(Bd){Bd.hide();}}}Bn.appendChild(BR);},hPlaceVGridLines:function(Bk,Bt){var Bp,Bo,Bm,Ba,Bd,Bi,Bf,BT=0,BR=0,Bl=this.GMH,Bj=0,BU=this.lines,Bs=BU.vMajorGridLines,BY=BU.vMinorGridLines,BV=this.GMController,BZ=BV.xMajorGridLinePos,Bn=BV.xMinorGridLinePos,Bh=this.manager,Bc=Bh.intersectCheck4Col(this.GMW),Bg=Bc.start,BW=Bc.end,Br=this.domGM,Be=0,Bu=document,BS=Bu.createDocumentFragment(),BX=this.getWidgetPropertyValue(AM.MAJOR_GRID_LINES_SHOW),Bb=this.getWidgetPropertyValue(AM.MINOR_GRID_LINES_SHOW)===AR.SHOW,Bq=false;if(BX===AR.AUTO){Bq=(this.GMInfo.nRows===1&&this.GMInfo.nCols===1);}else{if(BX===AR.SHOW||BX===AR.SHOW_MAJOR_ONLY){Bq=true;}}for(Bp=Bg;Bp<=BW;Bp++){Ba=Bh.getColOffset(Bp)+Be;if(Bq){Bd=BZ[Bp];if(!Bd){continue;}for(Bo=0,Bm=Bd.length;Bo<Bm;Bo++,BT++){Bf=Bs[BT];if(!Bf){Bi=Bu.createElement("div");Bf=new mstrmojo.VisSplitter({placeholder:Bi,type:G.GM_V_GRID_LINE,identity:{objType:At.GRID_LINE},styles:Bk,dir:"v",cssClass:"gm-grid-line-major",bodyCssClass:"gm-grid-line-body-major",draggable:false,parent:this});this.addDisposable(Bf);Bf.render();Bi=Bf.domNode;BS.appendChild(Bi);Bs[BT]=Bf;}Bf.updateStyle(Bk);Bf.updatePosition({top:Bj,left:Ba+Bd[Bo],height:Bl});}}if(Bb){Bd=Bn[Bp];for(Bo=0,Bm=Bd.length;Bo<Bm;Bo++,BR++){Bf=BY[BR];if(!Bf){Bi=Bu.createElement("div");Bf=new mstrmojo.VisSplitter({placeholder:Bi,type:G.GM_V_MINOR_GRID_LINE,identity:{objType:At.MINOR_GRID_LINE},styles:Bt,dir:"v",cssClass:"gm-grid-line-minor",bodyCssClass:"gm-grid-line-body-minor",draggable:false,parent:this});this.addDisposable(Bf);Bf.render();Bi=Bf.domNode;BS.appendChild(Bi);BY[BR]=Bf;}Bf.updateStyle(Bt);Bf.updatePosition({top:Bj,left:Ba+Bd[Bo],height:Bl});}}}for(Bo=BT,Bm=Bs.length;Bo<Bm;Bo++){Bf=Bs[Bo];if(Bf){Bf.hide();}}for(Bo=BR,Bm=BY.length;Bo<Bm;Bo++){Bf=BY[Bo];if(Bf){Bf.hide();}}Br.appendChild(BS);},hPlaceHGridLines:function(Bi,Bt){var Bp,Bo,Bj,Bh,Bd,Bg,Be,BT=0,BR=0,Bk=this.GMW,BZ=0,BU=this.lines,Bs=BU.hMajorGridLines,BX=BU.hMinorGridLines,BV=this.GMController,BY=BV.yMajorGridLinePos,Bm=BV.yMinorGridLinePos,Bf=this.manager,Bb=Bf.intersectCheck4Row(this.GMH),Bc=Bb.start,Bl=Bb.end,Br=this.domGM,Bn=0,Bu=document,BS=Bu.createDocumentFragment(),BW=this.getWidgetPropertyValue(AM.MAJOR_GRID_LINES_SHOW),Ba=this.getWidgetPropertyValue(AM.MINOR_GRID_LINES_SHOW)===AR.SHOW,Bq=false;if(BW===AR.AUTO){Bq=(this.GMInfo.nRows===1&&this.GMInfo.nCols===1);}else{if(BW===AR.SHOW||BW===AR.SHOW_MAJOR_ONLY){Bq=true;}}for(Bp=Bc;Bp<=Bl;Bp++){Bh=Bf.getRowOffset(Bp)+Bn;if(Bq){Bd=BY[Bp];if(!Bd){continue;}for(Bo=0,Bj=Bd.length;Bo<Bj;Bo++,BT++){Be=Bs[BT];if(!Be){Bg=Bu.createElement("div");Be=new mstrmojo.VisSplitter({placeholder:Bg,type:G.GM_H_GRID_LINE,identity:{objType:At.GRID_LINE},styles:Bi,dir:"h",cssClass:"gm-grid-line-major",bodyCssClass:"gm-grid-line-body-major",draggable:false,parent:this});this.addDisposable(Be);Be.render();Bg=Be.domNode;BS.appendChild(Bg);Bs[BT]=Be;}Be.updateStyle(Bi);Be.updatePosition({top:Bh+Bd[Bo],left:BZ,width:Bk});}}if(Ba){Bd=Bm[Bp];for(Bo=0,Bj=Bd.length;Bo<Bj;Bo++,BR++){Be=BX[BR];if(!Be){Bg=Bu.createElement("div");Be=new mstrmojo.VisSplitter({placeholder:Bg,type:G.GM_H_MINOR_GRID_LINE,identity:{objType:At.MINOR_GRID_LINE},styles:Bt,dir:"h",cssClass:"gm-grid-line-minor",bodyCssClass:"gm-grid-line-body-minor",draggable:false,parent:this});this.addDisposable(Be);Be.render();Bg=Be.domNode;BS.appendChild(Bg);BX[BR]=Be;}Be.updateStyle(Bt);Be.updatePosition({top:Bh+Bd[Bo],left:BZ,width:Bk});}}}for(Bo=BT,Bj=Bs.length;Bo<Bj;Bo++){Be=Bs[Bo];if(Be){Be.hide();}}for(Bo=BR,Bj=BX.length;Bo<Bj;Bo++){Be=BX[Bo];if(Be){Be.hide();}}Br.appendChild(BS);},hPlaceRowResizers:function(BZ){var BY=this.getWidgetPropertyValue(AM.H_MATRIX_LINES_SHOW),BT=this.lines.rows;if(!BY){BT.forEach(function(Bl){if(Bl){Bl.hide();}});return ;}var Bi,Bd,Ba,Be,BU,Bk=document,BR=Bk.createDocumentFragment(),Bc=this.manager,Bb=this.GMInfo.nRows,BV=Bc.intersectCheck4Row(this.GMH),BX=BV.start,Bg=BV.end,Bf=this.actualWidth,Bj=this.domMainContainer,Bh=this.offsetY,BS=this.rowHeaderWArr;var BW=Bc.collectRowDepths(Bb);for(Bi=0;Bi<Bb;Bi++){Ba=BT[Bi];if(Bi>=BX&&Bi<Bg&&Bi<Bb-1){Be=Bc.getRowOffset(Bi+1)+Bh;BU=AZ.sum(BS,O,BW[Bi]);if(!Ba){Bd=Bk.createElement("div");Ba=new mstrmojo.VisSplitter({placeholder:Bd,type:G.GM_H_CHART_LINE,identity:{objType:At.H_MATRIX_LINE},styles:BZ,dir:"h",context:{dock:Au.BOTTOM,type:G.GM_CHART_ROW,depth:Bi},markControlType:true,parent:this});this.addDisposable(Ba);Ba.render();Bd=Ba.domNode;BR.appendChild(Bd);BT[Bi]=Ba;this.splitterListeners.push(Ba.attachEventListener("splitterMoved",this.id,function(Bl){this.onSplitterMoved(Bl.position,Bl.info);}));}Ba.updatePosition({top:Be,left:BU,width:Bf-BU});Ba.updateSize(g.call(this,G.GM_H_CHART_LINE,Bi));}else{if(Ba){Ba.hide();}}}Bj.appendChild(BR);},hPlaceRHResizers:function(Bd){var BX,BS,Be,BZ=this.colHeaderH,BY=0,BW=this.rowHeaderWArr,BU=BW.length,Bb=this.actualHeight,Ba=document,BV=this.domMainContainer,Bc=this.lines.vlines,BT=this.GMController,BR=this.getWidgetPropertyValue(AM.V_MATRIX_LINES_SHOW);for(BX=0;BX<BU;BX++){BY+=BW[BX];Be=Bc[BX];if(!BR||BW[BX]===0){if(Be){Be.hide();}continue;}if(BX===BU-1||((BX===BU-2)&&(BT.haveY1===false))){BZ=0;}if(!Be){BS=Ba.createElement("div");Be=new mstrmojo.VisSplitter({placeholder:BS,type:G.GM_V_MATRIX_LINE,identity:{objType:At.V_MATRIX_LINE},styles:Bd,dir:"v",context:{dock:Au.RIGHT,type:G.GM_ROW_HEADER,depth:BX},parent:this});this.addDisposable(Be);Be.render();BS=Be.domNode;BV.appendChild(BS);Bc[BX]=Be;}Be.updatePosition({left:BY,top:BZ,height:Bb-BZ-this.GMInfo.xAxisHeight});Be.updateSize(g.call(this,G.GM_V_MATRIX_LINE,BX));BY+=O;}Be=Bc[BX];if(this.rowHeaderExtraW>0){BY+=this.rowHeaderExtraW;if(!BR){if(Be){Be.hide();}}else{if(!Be){BS=Ba.createElement("div");Be=new mstrmojo.VisSplitter({placeholder:BS,type:G.GM_V_MATRIX_LINE,identity:{objType:At.V_MATRIX_LINE},styles:Bd,dir:"v",context:{dock:Au.RIGHT,type:G.GM_V_EXTRA_LINE},parent:this});this.addDisposable(Be);Be.render();BS=Be.domNode;BV.appendChild(BS);Bc[BX]=Be;}Be.updatePosition({left:BY,top:0,height:Bb-this.GMInfo.xAxisHeight});Be.updateSize(g.call(this,G.GM_V_EXTRA_LINE));}}else{if(Be){Be.hide();}}},hPlaceCHResizers:function(Be){var BX,BR,Bf,BV=this.rowHeaderW,BT=this.GMController,Ba=0,Bb=this.GMInfo.xAxis2Height,BY=this.colHeaderHArr,BU=BY.length,BS=this.actualWidth,Bd=document,BW=this.domMainContainer,BZ=this.lines.hlines,Bc=this.getWidgetPropertyValue(AM.H_MATRIX_LINES_SHOW);for(BX=0;BX<BU;BX++){Ba+=BY[BX];Bf=BZ[BX];BV=this.rowHeaderW;if(!Bc||BY[BX]===0){if(Bf){Bf.hide();}continue;}if(BX===BU-1){BV=0;}if((BX!==BU-1)&&(BT.haveY1===false)&&this.colTitleW){BV-=this.colTitleW;if(this.domTabHeader.offsetWidth===this.colTitleW){BV=0;}}if(!Bf){BR=Bd.createElement("div");Bf=new mstrmojo.VisSplitter({placeholder:BR,type:G.GM_H_MATRIX_LINE,identity:{objType:At.H_MATRIX_LINE},styles:Be,dir:"h",context:{dock:Au.BOTTOM,type:G.GM_COL_HEADER,depth:BX},parent:this});this.addDisposable(Bf);Bf.render();BR=Bf.domNode;BW.appendChild(BR);BZ[BX]=Bf;}Bf.updatePosition({top:Ba,left:BV,width:BS-BV});Bf.updateSize(g.call(this,G.GM_H_MATRIX_LINE,BX,{max:this.colHeaderMaxHeightArr[BX]}));Ba+=BH;}Bf=BZ[BX];if(this.colHeaderExtraH>0){Ba+=Bb;if(!Bc){if(Bf){Bf.hide();}}else{if(!Bf){BR=Bd.createElement("div");Bf=new mstrmojo.VisSplitter({placeholder:BR,type:G.GM_H_MATRIX_LINE,identity:{objType:At.H_MATRIX_LINE},styles:Be,dir:"h",context:{dock:Au.BOTTOM,type:G.GM_XAXIS2},parent:this});this.addDisposable(Bf);Bf.render();BR=Bf.domNode;BW.appendChild(BR);BZ[BX]=Bf;}Bf.updatePosition({top:Ba,width:BS});Bf.updateSize(g.call(this,G.GM_XAXIS2,undefined,{max:this.rowHeaderMaxHeight}));}}else{if(Bf){Bf.hide();}}},hPlaceYSplitters:function(Bg){var BW=function(Bq){if(!Bq.haveY1||!Bq.hasHeaderInY){return false;}var Bl=Bq.isMetricNamesInZone("Rows"),Bp=Bq.getMetricsOnXAxis(),Bm=Bq.getMetricsOnPrimaryXAxis(),Bo=Bp&&Bp.length,Bj=Bm&&Bm.length,Bn=Bq.getAttributesOnDropZone("YAxis"),Bi=Bn&&Bn.length,Bk=Bq.getChartInfo();if(Bk.isGrid&&Bk.isPie){Bp=Bq.getMetricsOnAngleBy();Bo=Bp&&Bp.length;}return Bl&&Bo>=2&&Bi>=1&&(Bo===Bj||Bj===0);};var BS,Bh,BU=this.GMInfo,BZ=BU.yAxisWidth,Bb=BU.yAxis2Width,Be=this.GMH,Bc=document,BV=this.domMainContainer,BX=this.lines.axisSplitters,Bd=this.GMController,BT=this.getWidgetPropertyValue(AM.V_MATRIX_LINES_SHOW),Ba=BT&&BW(Bd),Bf=false,BR=0,BY=this.textHeightInY+2*BR;if(!Ba){Bh=BX.y1Splitter;if(Bh){Bh.domNode.style.display="none";}}else{Bh=BX.y1Splitter;if(BZ>BY){if(!Bh){BS=Bc.createElement("div");Bh=new mstrmojo.VisSplitter({placeholder:BS,type:G.GM_V_MATRIX_LINE,identity:{objType:At.V_MATRIX_LINE},styles:Bg,dir:"v",draggable:false,parent:this});this.addDisposable(Bh);Bh.render();BS=Bh.domNode;BV.appendChild(BS);BX.y1Splitter=Bh;}Bh.updatePosition({left:this.offsetX-BZ+BY-D,top:this.offsetY,height:Be});}else{if(Bh){Bh.hide();}}}if(!Bf){Bh=BX.y2Splitter;if(Bh){Bh.domNode.style.display="none";}}else{Bh=BX.y2Splitter;if(Bb>BY){if(!Bh){BS=Bc.createElement("div");Bh=new mstrmojo.VisSplitter({placeholder:BS,type:G.GM_V_MATRIX_LINE,identity:{objType:At.V_MATRIX_LINE},styles:Bg,dir:"v",draggable:false,parent:this});this.addDisposable(Bh);Bh.render();BS=Bh.domNode;BV.appendChild(BS);BX.y2Splitter=Bh;}Bh.updatePosition({left:this.offsetX2+Bb-BY-D,top:this.offsetY,height:Be});}else{if(Bh){Bh.hide();}}}},hInitWidgetMatrixes:function(){var Bq=this,Bh=this.GMInfo,Bo=Bq.GMController,Bb=Bo.manager,Bm=BK.EnumDrawingAPI,Bj=Bo.getControllerAPI(Bm.GET_CHART_WIDTH),Bi=Bo.getControllerAPI(Bm.GET_CHART_HEIGHT),Bg=Bo.getControllerAPI(Bm.GET_ROW_HEADER),Bf=Bo.getControllerAPI(Bm.GET_COLUMN_HEADER),Be=Bo.getControllerAPI(Bm.CREATE_UNIT_Y_AXIS),Bd=Bo.getControllerAPI(Bm.CREATE_UNIT_X_AXIS),Bc=Bo.getControllerAPI(Bm.GET_FULL_FLEDGED_CHART),Ba=Bo.getControllerAPI(Bm.GET_ROW_SPAN),BZ=Bo.getControllerAPI(Bm.GET_COLUMN_SPAN),BU=Bo.getControllerAPI(Bm.UPDATE_MINI_CHART),BT=Bo.getControllerAPI(Bm.UPDATE_Y_AXIS),BS=Bo.getControllerAPI(Bm.UPDATE_X_AXIS),BR=Bo.getControllerAPI(Bm.GET_EXTRA_COLUMN_HEADER),Bs=Bo.getControllerAPI(Bm.UPDATE_ROW_HEADER),Br=Bo.getControllerAPI(Bm.UPDATE_COLUMN_HEADER),Bp=[],Bl=[],BY=function(){var Bu,By=Bq.rowHeaderWArr.length,Bt=Bq.domRowHeader.childNodes,Bx,Bw,Bv;for(Bu=0;Bu<By;Bu++){Bx={name:"rh",manager:Bb,depth:Bu,depthOnRow:false,placeholder:Bt[Bu],phCss:"gm-rowheader-cell",nRows:Bh.nRows,nCols:1,chartW:Bq.rowHeaderWArr[Bu],chartH:Bh.avgChartHeight,fixWidth:true,contentSummary:Bo.getRowHeaderSummary(Bu),useOwnSplitter:false};Bw=Bq.addDisposable(new BK.GMContainer(Bx));Bv=Bw.API;Bv.createUnitChart=Bg;Bv.updateUnitChart=Bs;Bv.getRowSpan=Ba;Bw.render();Bq.slaveRowHeaders.push(Bw);Bl.push(Bw);}},BX=function(){var Bu,Bw,Bv,By,Bx=Bq.colHeaderHArr.length,Bt=Bq.domColHeader.childNodes;for(Bu=0;Bu<Bx;Bu++){By={name:"ch",manager:Bb,depth:Bu,depthOnRow:true,placeholder:Bt[Bu],phCss:"gm-colheader-cell",nRows:1,nCols:Bh.nCols,chartW:Bh.avgChartWidth,chartH:Bq.colHeaderHArr[Bu],fixHeight:true,contentSummary:Bo.getColHeaderSummary(Bu),useOwnSplitter:false};Bw=Bq.addDisposable(new BK.GMContainer(By));Bv=Bw.API;Bv.createUnitChart=Bf;Bv.updateUnitChart=Br;Bv.getColSpan=BZ;Bw.render();Bq.slaveColHeaders.push(Bw);Bp.push(Bw);}if(Bq.colHeaderExtraH>0){By={manager:Bb,placeholder:Bt[Bu],phCss:" gm-colheader-cell-dummy",nRows:1,nCols:Bh.nCols,chartW:Bh.avgChartWidth,chartH:Bq.colHeaderExtraH,fixHeight:true,useOwnSplitter:false};Bw=Bq.slaveXAxis2=Bq.addDisposable(new BK.GMContainer(By));Bv=Bw.API;if(Bo.haveX2){Bw.isPrimary=false;Bv.createUnitChart=Bd;Bv.updateUnitChart=BS;}else{Bv.createUnitChart=BR;Bv.updateUnitChart=Br;}Bw.render();Bw.domNode.style.backgroundColor="rgba(0,0,0,0)";Bq.slaveColHeaders.push(Bw);Bp.push(Bw);}},Bn=function(){var Bv={name:"y",manager:Bb,placeholder:Bq.domYAxis.childNodes[0],phCss:"gm-yaxis-cell",nRows:Bh.nRows,nCols:1,chartW:Bh.yAxisWidth,chartH:Bh.avgChartHeight,fixWidth:true,useOwnSplitter:false},Bu=Bq.slaveYAxis=Bq.addDisposable(new BK.GMContainer(Bv)),Bt=Bu.API;Bu.isPrimary=true;Bt.createUnitChart=Be;Bt.updateUnitChart=BT;Bu.render();Bl.push(Bu);},Bk=function(){var Bt={name:"y2",manager:Bb,placeholder:Bq.domYAxis2.childNodes[0],phCss:"gm-yaxis-cell",nRows:Bh.nRows,nCols:1,chartW:Bh.yAxis2Width,chartH:Bh.avgChartHeight,fixWidth:true,useOwnSplitter:false},Bv=Bq.slaveYAxis2=Bq.addDisposable(new BK.GMContainer(Bt)),Bu=Bv.API;Bv.isPrimary=false;Bu.createUnitChart=Be;Bu.updateUnitChart=BT;Bv.render();Bl.push(Bv);},BW=function(){var Bu={name:"x",manager:Bb,placeholder:Bq.domXAxis.childNodes[0],phCss:"gm-xaxis-cell",nRows:1,nCols:Bh.nCols,chartH:Bh.xAxisHeight,chartW:Bh.avgChartWidth,fixHeight:true,useOwnSplitter:false};var Bt=Bq.slaveXAxis=Bq.addDisposable(new BK.GMContainer(Bu)),Bv=Bt.API;Bt.isPrimary=true;Bv.createUnitChart=Bd;Bv.updateUnitChart=BS;Bt.render();Bp.push(Bt);},BV=function(){var Bv={name:"master",manager:Bb,placeholder:Bq.domGM.childNodes[0],phCss:"gm-chart",nRows:Bh.nRows,nCols:Bh.nCols,chartW:Bh.avgChartWidth,chartH:Bh.avgChartHeight,enableLassoSelect:!Bq.formattingMode,APIOwner:Bq,useOwnSplitter:false,canvasScrolled:true,useAsSelectorOrBrushes:Bq.hasAssociatedNodes()||Bq.selectorControl,shouldDrawShapeFlag:Bo.shouldDrawShapeFlag},Bt=Bq.masterViewer=Bq.addDisposable(new BK.GMContainer(Bv)),Bu=Bt.API;Bu.createUnitChart=Bc;Bu.updateUnitChart=BU;Bu.lassoSelected=Bq.lassoSelected;Bu.lassoSelecting=Bq.lassoSelecting;Bt.render();Bt.domNode.style.overflow="hidden";Ag.attachMarkupEvent(Bq.id,Bt.domContainer,"scroll");};Bb.setDimensions(Bh.nRows,Bh.nCols,Bh.avgChartWidth,Bh.avgChartHeight);Bb.API.getChartWidth=Bj;Bb.API.getChartHeight=Bi;BY();BX();Bn();if(Bo.haveY2){Bk();}BW();BV();Bb.master=this.masterViewer;Bb.hSlaves=Bp;Bb.vSlaves=Bl;Bb.binding();Bb.yAxis=this.slaveYAxis;Bb.xAxis=this.slaveXAxis;Bb.yAxis2=this.slaveYAxis2;Bb.xAxis2=this.slaveXAxis2;this.addChildren(Bp);this.addChildren(Bl);this.addChildren(this.masterViewer);},setTheme:function(BR){if(BR===AH.DARK){this.cssClass="gm-dark-theme";this.menuCssClass="gm-context-menu-dark";}else{this.cssClass="gm-light-theme";this.menuCssClass="gm-context-menu-light";}this.theme=BR;if(this.domNode){this.domNode.setAttribute("class",this.cssClass);}this.GMController.updatePalette(BR);},onLegendDropped:function(BR){this.writeGlobalProperty(Al.LEGEND_POSITION,BR);},onLegendDropZoneChange:function s(BR){this.hLayoutLegend(BR.pos);this.hPlaceOutBorders(BR.pos);},lassoSelecting:function(){this.shouldNotTriggerClick=false;this.interactor.clearSelectedCharts();},lassoSelected:function(BY){var BV=this.interactor;if(Ag.supportsTouches===true){return ;}var BS=this.getWidgetPropertyValue(AM.SELECTION_LIMIT);if(BY.selectedShapes.length>BS||(BY.ctrlKey&&(BY.selectedShapes.length+Object.keys(this._viSelections).length>BS))){var BX=this,BU=function(){BX.clearSelections();BV.clearSelectedPolyShapes();BV.clearSelectedShapes();BV.clearSelectedCharts();BX.GMController.highLightShapeIndex={};BX.endSelections();};mstrmojo.alert(mstrmojo.desc(16269,"The amount of data points you have selected is outside the maximum limit.")+"\n \n"+mstrmojo.desc(16270,"To increase the maximum limit on data point selection, please go to Format Panel > Data Exploration > More Options."),BU);return ;}var BR=this.parent;BV.clearSelectedTargets();this.clearCxtMnuSelection();BV.clearContextMenuSelectedShapes();BV.clearContextMenuSelectedTargets();if(!BY.ctrlKey){this.clearSelections();BV.clearSelectedPolyShapes();BV.clearSelectedShapes();BV.clearSelectedCharts();this.GMController.highLightShapeIndex={};}BV.selectShapes(BY.selectedShapes,true);for(var BW=0;BW<BY.selectedShapes.length;BW++){var BT=AY(BY.selectedShapes[BW]);if(BT&&(BT.tagName===mstrmojo.gm.GMInteractivity.SHAPE_SUBTYPE.LINE||BT.tagName===mstrmojo.gm.GMInteractivity.SHAPE_SUBTYPE.POLYGON)){BV.selectPolyShape(BT);}}AD.call(this,BY);this.endSelections();this.shouldNotTriggerClick=true;BV.toggleGMFade();this.displayVizBoxVisFilterIndicator(true,BR);},getReplaceType:function(){var BS=this.GMController,BT=BS.getChartInfo(),BR=(BT.isABL&&BT.dirc===BK.EnumABLDirection.HORIZONTAL);if(BR||BT.tp===W.BUBBLE||BT.tp===W.SCATTER){return 0;}return 1;},getSliceAttrNum:function(){var BT=this.GMController,BU=BT.getChartInfo(),BS=BT.getUnitsCountInSliceBy(),BR=(BU.isABL&&BU.dirc===BK.EnumABLDirection.HORIZONTAL);if(BU.isPie&&BS>0){if((this.getReplaceType()===0&&!BR)||(this.getReplaceType()===1&&BR)){return BS;}return 0;}return 0;},getMenuHandler:function P(BV){var Bj=this,BY=Bj.interactor,Bi=Bj.GMController,Ba,BZ,BR;BR=this._super(BV);if(BR!==mstrmojo.emptyFn){return BR;}var BS=function(){Ba=Bi.getChartInfo();var Bx=new mstrmojo.ui.menus.MenuConfig();var Bp=[{id:12097,desc:"Bar",v:f.BAR},{id:12098,desc:"Line",v:f.LINE},{id:12099,desc:"Area",v:f.AREA},{id:12100,desc:"Circle",v:f.CIRCLE},{id:12101,desc:"Square",v:f.SQUARE},{id:12102,desc:"Tick",v:f.TICK},{id:12103,desc:"Ring",v:f.RING},{id:12104,desc:"Pie",v:f.PIE}];var Bn={Area:true,Line:true},Br={Area:true,Line:true,Bar:true},Bo={},Bq=Ba.isBubbleOrScatter?Br:Bn;if(Ba.isABL){Bq=Bo;}var Bv=[];Bp.forEach(function(By){if(!Bq[By.desc]){Bv.push(By);}});var Bw=Bj.readGlobalProperty(Al.METRIC_SHAPES).jsonObj,Bs=Object.keys(Bw),Bt=false,Bu=Bj.readGlobalProperty("Shape");Bs=c.filter(Bs,function(By){return By.indexOf(Ao)<0;});if(Bs.length>0){c.forEach(Bs,function(By){if(Bw[By]!==Bu){Bt=true;}});}Bv.forEach(function(By){Bx.addMenuItem(mstrmojo.desc(By.id,By.desc),Bt?"":(f[By.desc.toUpperCase()]===Bu)?"on":"",function(){Bj.setWidgetPropertyValue(Al.METRIC_SHAPES,{});Bj.processChangeShape(By.v);});});Bx.hasToggleItem=true;return Bx;};var Bl=function(Bq){var Bn=Bq.ctxt,Bo=Bn.dtlb,Bp=Bn.mid;AC.call(Bj,Bp,Bo);};var BX=function(Bq){var Bn=Bq.ctxt,Br=Bn.sp,Bp=Bn.mid,Bo;Bo=Bj.readGlobalProperty(Al.METRIC_SHAPES);Bo.setProperty(Bp,Br);Bj.writeGlobalProperty(Al.METRIC_SHAPES,Bo,undefined);};var Bm=function(){Bj.updateAfterKeepOnly(true);Bj.noHighlightAfterKeepOnlyExcludeDrill=true;};var Bg=function(){Bj.updateAfterKeepOnly(false);Bj.noHighlightAfterKeepOnlyExcludeDrill=true;};var Be=function(){BZ=Bi.getSelectedObjectsInfo(BY.selectedShapes);Bj.showData(BZ);Bj.noReorderAfterShowData=true;};var Bk=function(){Bj.updateAfterKeepOnly(true);Bj.noHighlightAfterKeepOnlyExcludeDrill=true;};var Bb=function(){Bj.updateAfterKeepOnly(false);Bj.noHighlightAfterKeepOnlyExcludeDrill=true;};var Bh=function(Bo){var Bn=Bo.ctxt.drillUnit,Bp=Bo.ctxt.fromUnit;Bj.drillGM(Bn,Bp);Bj.noHighlightAfterKeepOnlyExcludeDrill=true;};var BW=function(Bo){var Bn=Bo.ctxt.drillUnit;Bj.drillGM(Bn);Bj.noHighlightAfterKeepOnlyExcludeDrill=true;};var BT=function(Br){var Bo=Br.ctxt,Bn,Bt,Bq,Bs,Bp;Bn=Bo.isAsc;Bp=Bo.identity;Bt=Bo.selInfo;Bi.sortingMetric=false;if(Bp||Bt){Bq=Bi.getAttributeSortPlusExistedMetricSort(Bp||Bt,Bn);Bs=Bi.getSortActions(Bq);Bj.updateAfterSort(Bs);}else{V.visPrint("undefined identity or selection info");}};var Bd=function(Bn){var Bv=Bn.ctxt,Bu,Bs,Bt,Bq;Bu=Bv.isAsc;Bs=Bv.selInfo;Bq=Bs.cellHandle;if(Bq){Bi.sortingMetric=true;Bt=Bi.getMetricSortDefinition(Bq,Bu);var Br=Bi.getSortActions(Bt);Bj.setWidgetPropertyValue(Al.SORT_ORDER,Bu);Bj.setWidgetPropertyValue(Al.SORT_INDEX,Bq);var Bo=Bi.getChartInfo(),Bp=true;if(Bp&&Bo.isABL&&Bi.isStacked){Bi.fakeSortActionsStackTotal(Br);}Bj.updateAfterSort(Br);}else{V.visPrint("undefined cell handle");}};var Bc=function(Bq){var Bo=Bq.ctxt,Bp=Bo.axis;var Bn=-1;switch(Bp){case B.Rows:Bp=1;break;case B.Columns:Bp=2;break;case Bn:break;}Bj.model.controller.onGetAdvSortData(Bj,Bp,Bo.item.t);};var Bf=function(){var Bn=Bi.getSortActions([]);Bj.removeWidgetProperty(Al.SORT_ORDER);Bj.removeWidgetProperty(Al.SORT_INDEX);Bj.updateAfterSort(Bn);};var BU=function(){var Bn=Bj.GMController.getDebugMenu();Bj.showContextMenu(null,Bn);};switch(BV){case"selectionKeepOnly":return Bm;case"selectionExclude":return Bg;case"selectionShowData":return Be;case"headerKeepOnly":return Bk;case"headerExclude":return Bb;case"headerDrill":return Bh;case"drill":return BW;case"sortAttributeTitle":return BT;case"advancedSort":return Bc;case"clearSort":return Bf;case"sortMetricTitle":return Bd;case"changeShape":return BX;case"showDataForMetric":return Bl;case"changeGlobalShape":return BS;case"debug":return BU;case"attributeAddToFilter":case"attributeUseAsSelector":case"attributeFormat":case"sortAxisAttribute":case"advancedSortAxisAttribute":case"attributeRename":case"attributeRemove":case"attributeNew":case"filterOnSelection":case"createGroup":case"createCalculationDE":case"showMarker":case"hideMarker":case"dataLabelShowValue":case"dataLabelShowText":case"dataLabelHide":case"metricFormat":case"metricRename":case"metricRemove":case"metricNew":case"metricAddToFilter":break;}return mstrmojo.emptyFn;},showContextMenu:function(BS,BU){var BY=this.contextMenu,BT=this,BR=this.GMController,BX,BW,BV;if(BS!==null){BW=BS.e;BV=BS.hWin;BX=Ag.position(this.getRealTarget(BS));BX.y+=BX.h;BX.x-=1;}else{BX={x:0,y:0,w:0,h:0};}if(BY){BY.hideContextMenu();BY.unrender();delete this.contextMenu;}BY=new mstrmojo.MenuButton({cmCssClass:this.menuCssClass,zIndex:1000,cm:BU,dynamicUpdate:true,executeCommand:function(BZ){switch(BZ.did){case Ay.OUTPUT_EXTREMES:BR.printExtremes();break;case Ay.OUTPUT_DATA_COUNT:V.visPrint("# Data Points in Total: "+BR.getGraphShapeCount());V.visPrint("Count of Chart is "+BR.getChartCountInCol()*BR.getChartCountInRow());break;case Ay.ENABLE_PARTIAL_RENDERING:BR.enablePartialRendering=true;BT.writeGlobalProperty(Al.PARTIAL_RENDER,true);break;case Ay.DISABLE_PARTIAL_RENDERING:BR.enablePartialRendering=false;BT.writeGlobalProperty(Al.PARTIAL_RENDER,false);break;case Ay.ENABLE_TIMER:BP.mUseTimer=true;break;case Ay.DISABLE_TIMER:BP.mUseTimer=false;break;case Ay.ENABLE_CE_TIMER:BT.enableCETimer=true;break;case Ay.DISABLE_CE_TIMER:BT.enableCETimer=false;break;default:break;}}});this.contextMenu=BY;BY.set("cmPos",BX);BY.render();BY.showContextMenu();if(BS!==null){Ag.stopPropogation(BV,BW);Ag.preventDefault(BV,BW);}},hideContextMenu:function(){var BR=this.contextMenu;if(BR){BR.hideContextMenu();}},onSplitterMoved:function(BR,BT){var BV,BU=this.manager,BW=this.GMInfo,BX=BT.dock,BY=BT.type,BS=BT.depth,Ba=0,BZ=0;if(BY===G.GM_CHART_ROW){BU.resizeRow(BU.master,BS,BR);return ;}if(BY===G.GM_CHART_COL){BU.resizeCol(BU.master,BS,BR);return ;}if(BX===Au.RIGHT){Ba=BR;}else{if(BX===Au.LEFT){Ba=-BR;}else{if(BX===Au.TOP){BZ=-BR;}else{BZ=BR;}}}if((BY===G.GM_ROW_HEADER||BY===G.GM_YAXIS)&&Ba===0){return ;}if((BY===G.GM_COL_HEADER||BY===G.GM_XAXIS)&&BZ===0){return ;}if(BY===G.GM_RIGHT_BORDER||BY===G.GM_BOTTOM_BORDER){BU.resizeBorder(BU.master,Ba,BZ);return ;}if(BY===G.GM_ROW_HEADER){BV=this.getWidgetPropertyValue(Al.SCALE_ROW_HEADERS)[BS];BV*=(1+Ba/this.rowHeaderWArr[BS]);this.rowHeaderWArr[BS]+=Ba;this.writeGlobalProperty(Al.SCALE_ROW_HEADERS,BV,{key:BS});}else{if(BY===G.GM_COL_HEADER){BV=this.getWidgetPropertyValue(Al.SCALE_COL_HEADERS)[BS];BV*=(1+BZ/this.colHeaderHArr[BS]);this.colHeaderHArr[BS]+=BZ;this.writeGlobalProperty(Al.SCALE_COL_HEADERS,BV,{key:BS});}else{if(BY===G.GM_YAXIS){BV=this.getWidgetPropertyValue(Al.SCALE_Y);BV*=(1+Ba/BW.yAxisWidth);BW.yAxisWidth+=Ba;this.yAxisFixed=true;this.writeGlobalProperty(Al.SCALE_Y,BV);}else{if(BY===G.GM_YAXIS2){BV=this.getWidgetPropertyValue(Al.SCALE_Y2);BV*=(1+Ba/BW.yAxis2Width);BW.yAxis2Width+=Ba;this.yAxis2Fixed=true;this.writeGlobalProperty(Al.SCALE_Y2,BV);}else{if(BY===G.GM_XAXIS){BV=this.getWidgetPropertyValue(Al.SCALE_X);BV*=(1+BZ/BW.xAxisHeight);BW.xAxisHeight+=BZ;this.xAxisFixed=true;this.writeGlobalProperty(Al.SCALE_X,BV);}else{if(BY===G.GM_XAXIS2){BV=this.getWidgetPropertyValue(Al.SCALE_X2);BV*=(1+BZ/BW.xAxis2Height);BW.xAxis2Height+=BZ;this.xAxis2Fixed=true;this.writeGlobalProperty(Al.SCALE_X2,BV);}else{if(BY===G.GM_V_EXTRA_LINE){BV=this.getWidgetPropertyValue(Al.SCALE_V_EXTRA_LINE);BV*=(1+Ba/this.rowHeaderExtraW);this.rowHeaderExtraW+=Ba;this.writeGlobalProperty(Al.SCALE_V_EXTRA_LINE,BV);}}}}}}}},onLegendResized:function(BS){var BR=this.legend;if(BR){this.legendFixedW=this.legendW+BS;this.legendScale=(this.legendFixedW)/(this.legendW/this.legendScale);this.legendResized=true;this.writeGlobalProperty(Al.SCALE_LEGEND_WIDTH,this.legendScale);}},onLegendClicked:function(BR){var BS=BR.action;if(BS==="close"){this.writeGlobalProperty(Al.LEGEND_VISIBLE,false);}else{if(BS==="minimize"){this.writeGlobalProperty(Al.LEGEND_MODE,J.MINIMIZED);}else{if(BS==="restore"){this.writeGlobalProperty(Al.LEGEND_MODE,J.RESTORED);}}}},onControlResized:function(BR,BU,BS,BV){BP.startTimer({functionName:"VisGraphMatrix.onControlResized",purpose:"Partial update of GraphMatrix ("+this.k+")"});var BT=this.HTML5PROPS;if(BU){this.hEvalSize4Legend();}if(BR){this.hEvalSizeIteratively();}else{this.hEvalSize4GMArea();this.hDecideDataLabelRotation();}this.hCalcRadiusAndMargin(BS);this.hLayoutControls();this.hFillContents();this.updateRowValueBackground();this.updateColumnValueBackground();this.hUpdateLegend();if(BV){this.outputLog4PartialRender();this.manager.drawCharts();this.updateSelections();}this.hPlaceRHResizers(BT.MATRIX_LINE_V);this.hPlaceCHResizers(BT.MATRIX_LINE_H);this.hPlaceYResizers(BT.AXIS_LINE_Y);this.hPlaceXResizers(BT.AXIS_LINE_X);this.hPlaceYSplitters(BT.MATRIX_LINE_V);this.hPlaceOutBorders();this.hPlaceRowResizers(BT.MATRIX_LINE_H);this.hPlaceColResizers(BT.MATRIX_LINE_V);this.hPlaceHGridLines(BT.GRID_LINE_MAJOR,BT.GRID_LINE_MINOR);this.hPlaceVGridLines(BT.GRID_LINE_MAJOR,BT.GRID_LINE_MINOR);BP.endTimer();this.updateScrollBars();if(mstrApp&&mstrApp.hideWait){mstrApp.hideWait(true);}},configurePopup:function Af(BR,BS){BR.hostId=this.id;BR.hostElement=BS;},getPersistAction:function(BR){BR=BR||this.property.getXMLString();return a.call(this,BR);},getDragData:function BN(BS){var BR=this.interactor;return BR.getDragData(BS,this);},deleteItem:function BQ(BS){var BR=this.interactor;return BR.deleteItem(BS,this);},createAvatar:function Z(BV,BS){var BR=document.createElement("div"),BU=BS.src.data,BT=BU.item,BW;if(!BT){return ;}if(!this.itemRenderer){this.itemRenderer=new mstrmojo.vi.ui.VIDragUnit();}BW=this.itemRenderer.getUnitAvatar(BS,true);BI.addClass(BW,"isAvatar");BR.appendChild(BW);BR.style.margin="10px 0 0 10px";return BR;},positionAvatar:function y(BT){if(!this.avatar){return ;}var BR=this.avatar,BS=BR.style;BS.left=BT.x-BR.offsetWidth/2+"px";BS.top=BT.y-BR.offsetHeight-13+"px";},isDragValid:function AV(BU){if(this.isInPresentation()){return false;}var BV=BU.src.data;if(!BV){return this._super(BU);}var BS=this.model.getCellInfo(BV.item),BR=BS&&BS.isTitle,BT=BS&&BS.isMetric&&BS.isHeader;return mstrApp.isInVFInteractMode&&(BR||BT)?false:(!!(BV&&BV.item)||this._super(BU));},isInPresentation:function(){return mstrApp.isDossier||(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation());},allowDrop:function K(BU){var BV=BU.src.data,BR=BV&&BV.src,BT=this.interactor;BU.dndGM=true;if(BR===A3.DATASETS||BR===A3.VIZ_EDITOR||BR===A3.VIZ||BR===A3.ALL_OBJECT_LIST){var BS=BV.items;if(BS&&BS.length===1){BT.getDropZonesOnGraph(BU,this);if(Object.keys(this.dropZonesOnGraph).length>0){return true;}}else{return true;}}return false;},isDragingMultipleObj:function H(BT){var BS,BU=BT.src.data,BR=BU&&BU.items;if(BT.isDragingMultipleObj===undefined){BT.isDragingMultipleObj=false;for(BS=1;BS<BR.length;BS++){if(BR[BS].t!==BR[BS-1].t){BT.isDragingMultipleObj=true;break;}}}return BT.isDragingMultipleObj;},ondragenter:function U(BS){var BW=this.isEmpty();if(BW){this.actualWidth=this.domNode.offsetWidth;this.actualHeight=this.domNode.offsetHeight;}var BV,BY,BT=this.interactor;if(!this.dndHighlightCanvas){var BU=document.createElement("canvas"),BR=Ag.position(this.domNode),BZ=Ag.position(this.domMainContainer);this.domNode.appendChild(BU);BU.style.position="absolute";BU.style.zIndex=1000;BU.width=BZ.w||BR.w;BU.height=BZ.h||BR.h;BU.style.top=(BZ.y-BR.y)+"px";BU.style.left=(BZ.x-BR.x)+"px";this.dndHighlightCanvas=BU;}if(!this.dndHighlightNodes){BV=document.createElement("div");this.domNode.appendChild(BV);BY={placeholder:BV,top:0,left:0,zIndex:20,nodeCss:"gm-dnd-highlight-node"};this.dndHighlightNodes=new BK.DndReplaceNode(BY);this.dndHighlightNodes.render();this.dndHighlightNodes.parent=this;}if(!this.dndTooltip){BV=document.createElement("div");document.body.appendChild(BV);BY={placeholder:BV,contentNodeCssClass:"gm-dnd-replace-node-tooltip",boundary:document.body};this.dndTooltip=new BK.DndTooltip(BY);this.dndTooltip.render();this.dndTooltip.parent=this;}if(!this.dndArrow){BV=document.createElement("div");document.body.appendChild(BV);this.dndArrow=BV;}BS.dndGM=true;this.setInteractive(false);BT.clearHoveredShape();BT.hideTooltip();BT.toggleHoverEffect(this,false);var BX=this.excludeData;this.dndAsBlackBox=this.isDragingMultipleObj(BS)||BX;if(!(this.isDragingMultipleObj(BS)||BX)){BT.calculateDropZoneOnGraphRange(this,BS);this.ondragover(BS);}if(this._super){this._super(BS);}},ondragover:function Ae(BS){var BR=this.interactor;BS.dndGM=true;if(!(this.isDragingMultipleObj(BS)||this.excludeData)){BR.clearHighlightDropZoneOnGraph(this);if(BR.findEnteredDropZoneOnGraph(BS,this)){BR.findTargetInDropZoneOnGraph(BS,this);BR.highlightDropZoneOnGraph(BS,this);}}BR.updateAvatarIcon(BS);if(this._super){this._super(BS);}},ondragleave:function AS(BS){BS.dndGM=true;var BT=Ag.position(this.domMainContainer),BU=BS.tgt&&BS.tgt.pos,BR=(BU.x>BT.x&&BU.x<BT.x+BT.w)&&(BU.y>BT.y&&BU.y<BT.y+BT.h);if(BR){BS.tgt.widget=this;}else{this._super(BS);}},ondrop:function E(BS){var BR=this.interactor;BS.dndGM=true;BR.ondrop(BS,this);this._super(BS);},cleanUpAfterTarget:function A2(BR){BR.dndGM=true;this._super(BR);this.setInteractive(true);this.interactor.toggleHoverEffect(this,true);if(this.domNode.contains(this.dndHighlightCanvas)){this.domNode.removeChild(this.dndHighlightCanvas);}delete this.dndHighlightCanvas;if(document.body.contains(this.dndArrow)){document.body.removeChild(this.dndArrow);}delete this.dndArrow;if(this.dndHighlightNodes){this.dndHighlightNodes.destroy();}delete this.dndHighlightNodes;if(this.dndTooltip){this.dndTooltip.destroy();}delete this.dndTooltip;this.dropZonesOnGraph=null;this.currEnteredDropZoneID=null;},toggleContainerCls:function(BS,BR){var BT=this.domMainContainer;if(BS){BI.addClass(BT,BR);}else{BI.removeClass(BT,BR);}},toggleContainerCls2:function(BS,BR){var BT=this.domMainContainer;if(BS){BI.addClass(BT,BR);}else{BI.removeClass(BT,BR);}},updateSelections:function(){this.highlight(this.getSelectionType(),this.getSelectionHash());},clearSelectedShapesAndCharts:function(){var BR=this.interactor,BS=this.manager;if(BS){BS.dismissLassoSelector();}if(BR){BR.clearSelectedPolyShapes();BR.clearSelectedShapes();BR.clearSelectedCharts();}},clearSelectedHighlights:function(BT){var BR=this.interactor,BS=this.manager;if(BS){BS.dismissLassoSelector();}if(BR){BR.clearSelectedShapes();BR.clearSelectedPolyShapes();BR.clearSelectedCharts();BR.clearSelectedTargets();}if(!BT){this.GMController.highLightShapeIndex={};}},clearSelectedContextMenuHighlights:function(){var BR=this.interactor;if(BR){BR.clearContextMenuSelectedShapes();BR.clearContextMenuSelectedTargets();}},toggleShapeSelectionIndex:function(BX,BS){var BZ,BW,BU,Ba,BV,Bb,BT,BY=this.GMController,BR=BY.highLightShapeIndex;BY.resetHighLightIndex=false;if(BX.isPie){BZ=BX.sPieDP.graphCell;Ba=BX.sliceIdx;}else{BZ=BX.gc;}BV=BZ.dp;Bb=BV.rowIndex;BT=BV.colIndex;BW=BZ.gID;BU=BZ.sID;if(BR[Bb]===undefined){BR[Bb]={};}if(BR[Bb][BT]===undefined){BR[Bb][BT]={};}BR=BR[Bb][BT];if(BR[BW]===undefined){BR[BW]={};}if(BX.isPie){if(BR[BW][BU]===undefined){BR[BW][BU]={};}BR[BW][BU][Ba]=BS;}else{BR[BW][BU]=BS;}},getNumericAxisOptions:function(BR){var BS=this.GMController;return BS.getNumericAxisOptions(BR);},getStyleEffectsOptions:function(){var BR=this.GMController;return BR.getStyleEffectsOptions();},getColorByOptions:function(){var BS=this.GMController,BR=BS.getColorByOptions();if(!BR){return[];}return BR.subOptions;},getTitleRMCPopup:function(){if(!this.parent.boxContent.formattingMode){return ;}var BR={name:"titleBarRMC"};this.raiseEvent(BR);return h.call(this,false);},getFontToolbarProps:function(){return{cssClass:"mstrmojo-ui-ToolbarCharacter cf",layoutConfig:null,width:"397px",height:"22px"};},getChartInfo:function(){return this.GMController.getChartInfo();},getHostStructure:function(){return this.GMController.getHostStructure();},getDependentMetricOptions:function(){return this.GMController.getDependentMetricOptions();},getIndependentMetricOptions:function(){return this.GMController.getIndependentMetricOptions();},getReferenceAxisOption:function(){return this.GMController.getReferenceAxisOption();},getRealReferenceOptionFromAxisOption:function(BS,BR,BT){return this.GMController.getRealReferenceOptionFromAxisOption(BS,BR,BT);},getReferenceLineOptions:function(){return this.GMController.getReferenceLineOptions();},getEnabledReferenceLineOptions:function(BR){return this.GMController.getEnabledReferenceLineOptions(BR);},getShowDataLabelOptions:function(){return this.GMController.getShowDataLabelOptions();},isSeasonalityEnabled:function(){return this.GMController.isSeasonalityEnabled();},formatAsAxisLabel:function(BR,BS){return this.GMController.formatAsAxisLabel(BR,BS);},isShapeCombonation:function(){var BS=this.GMController,BR=BS.metricShapeArr,BV=false,BU,BW=(BR&&BR.length)||0,BT;if(BS.enableCombiChart){if(BW===0){BV=true;}else{if(BW===1){BV=false;}else{for(BU=1;BU<BW;BU++){if(BR[BU]!==BR[BU-1]){BV=true;break;}}}}if(!BV){BT=BR[0];}}return{isComb:BV,shapeType:BT};},isMajorGridLineShow:function(){var BS=this.getWidgetPropertyValue(AM.MAJOR_GRID_LINES_SHOW),BT=this.GMInfo,BR=false;if(BS===AR.AUTO){BR=BT&&(BT.nRows===1&&BT.nCols===1);}else{if(BS===AR.SHOW){BR=true;}}return BR;},getReferenceOptionForMetricId:function(BS){var BU=false,BT=this.getReferenceAxisOption(),BR;BT.forEach(function(BW){var BV=BW.mos;BV.forEach(function(BX){if(BX.mId===BS){BR=BW;BU=true;return false;}});if(BU){return false;}});return BR;},copyTrendLineInfoForSwap:function(BV,BX){var BT,BS,Bd,Bc,Bf,Be,Ba=[],BZ=[],BW=[],Bb,BY,BU=4,BR="00000000000000000000000000000000";c.forEach(BX.items,function(Bg){if(Bg.t===BU&&Bg.id!==BR){Ba.push(Bg);}});c.forEach(BV.items,function(Bg){if(Bg.t===BU&&Bg.id!==BR){BZ.push(Bg);}});Bb=Math.min(BZ.length,Ba.length);for(BY=0;BY<Bb;BY++){BT=BG.call(this,Ba[BY].did,true);Bd=this.readGlobalProperty(Al.TREND_LINE_DEF,BT);Bf=Bd.jsonObj;if(Bf.trdEnabled){return BW;}}for(BY=0;BY<Bb;BY++){BS=BG.call(this,BZ[BY].did);Bc=this.readGlobalProperty(Al.TREND_LINE_DEF,BS);Be=Bc.jsonObj;if(Be.trdEnabled){BT=BG.call(this,Ba[BY].did,true);Bd=this.readGlobalProperty(Al.TREND_LINE_DEF,BT);Bd.setProperty(Al.TREND_ENABLED,true);Bd.setProperty(Al.TREND_LEVEL,Be.trdLvl);Bd.setProperty(Al.TREND_TYPE,Be.trdTp);if(Be.trdDgr){Bd.setProperty(Al.TREND_POLY_DEGREE,Be.trdDgr);}this.collectTrendLineAction(Bd.jsonObj,BW,BT.key);}}return BW;},queryTrendLineStatusForMetric:function(BS){var BR=BG.call(this,BS),BT=this.readGlobalProperty(Al.TREND_LINE_DEF,BR);return(BT.jsonObj[Al.TREND_ENABLED]);},switchOnOffTrendLineForMetric:function(BT,BR){if(BR){this.checkCustomScaleNotificationForTrendLine(BT);}var BS=BG.call(this,BT),BU=this.readGlobalProperty(Al.TREND_LINE_DEF,BS);BU.setProperty(Al.TREND_ENABLED,BR);this.writeGlobalProperty(Al.TREND_LINE_DEF,BU,BS);},getExistingRefLineOptions:function(BS){var BR=this.getReferenceOptionForMetricId(BS);return this.getEnabledReferenceLineOptions(BR);},getExistingRefLineOptionsForAxis:function(BR){var BS=M.call(this,BR);return this.getEnabledReferenceLineOptions(BS);},getAvailableRefLineTypes:function(BS){if(BP.isIgnoredMetric(this,this.GMController.getMetricIndexFromID(BS))){return[];}var BT=this.getExistingRefLineOptions(BS),BR=this.getChartInfo().isBubbleOrScatter?[BK.EnumRefLineModelType.FIRST,BK.EnumRefLineModelType.LAST]:[];return k.valarray(BK.EnumRefLineModelType).filter(function(BU){return BR.indexOf(BU)===-1&&(BU===BK.EnumRefLineModelType.CONST||c.find(BT,"refType",BU)===-1);});},toggleRefLineEnabled:function(BU,BS,BT,BX,BY){if(BT){this.checkCustomScaleNotificationForReferenceLine(BU);}var BV=this.getReferenceOptionForMetricId(BU),BR=this.getRealReferenceOptionFromAxisOption(BV,BS,BY),BW=this.readGlobalProperty(Al.REF_LINE_DEF,BR);BW.setProperty(Al.REF_ENABLED,BT);if(BS===BK.EnumRefLineModelType.CONST){BW.setProperty(Al.REF_CONST_VALUE,w.parseNumeric(BX));}this.writeGlobalProperty(Al.REF_LINE_DEF,BW,BR);},copyRefLineInfoForSwap:function u(){var BV=this.GMController,BX=BV.getChartInfo(),BR=0;if(!BX.isABL||!BV.isStacked||BV.splitPlottingMetrics){return[];}var BU=this.getReferenceAxisOption(),BS,BT=this,BW=[];if(BU){c.forEach(BU,function(BZ){BS=BZ.key;if(BS==="YAxis"||BS==="Y2Axis"||BS==="XAxis"||BS==="X2Axis"){BR=BS.search("2")>=0?1:0;if(!BV.hasRefLineInOppositeAxis(BR)){var BY=BT.getEnabledReferenceLineOptions(BZ);c.forEach(BY,function(Ba){var Bb=BT.readGlobalProperty(Al.REF_LINE_DEF,Ba),Bd=Bb.jsonObj;Bd.dropzoneId=(BS==="YAxis"||BS==="Y2Axis")?4:3;Bd.subAxis=BR;if(Bd.refEnabled){var Bc=k.clone(Bd);Bc.dropzoneId=Bd.dropzoneId===3?4:3;BT.collectAddRefLineAction(Bc,BW);}});}}});}return BW;},getTemplateUpdateForKeepOnlyAndShow:function r(Bu,BX){var Bw=this,Bp=B.Rows,Bk=B.Columns,Bo=B.XAxis,Ba=B.YAxis,Bg=B.BreakBy,BZ=B.ColorBy,Bi=B.SliceBy,By=x.HORIZONTAL,Bl=x.VERTICAL;var BV=Bw.model,Bq=Bw.getDocModel(),Bm=Bq.getDataService(),Bc=Bm.newUpdate(this);var Bd={act:"updateTemplate",keyContext:Bw.k,actions:[]},BW,Be=true,Bn=Bd.actions,Bv=Bw.GMController,Bf=Bv.getChartInfo(),Br=Bf.tp,Bh=Bw.zonesModel,Bj=Bh.gmZones,Bb={did:undefined,t:12},BS={id:undefined,items:[]},Bx=Bh.getUpdateCallback(),BY=this.getXTabRefreshCallBack();if(BX){BS.id=BX.isRowAttribute?Bp:Bk;Bb.did=Bu.did;Bb.t=Bu.t;if(Bq.prefs&&Bq.prefs.rtprnt){Be=parseInt(Bq.prefs.rtprnt,10)===1;}else{if(BV.xtab.defn.tkp!==undefined){Be=parseInt(BV.xtab.defn.tkp,10)===-1;}}var BU,Bt=Bj.getZoneModelByZoneId(BS.id);Bt.items.forEach(function(Bz){if(Bz.did===BX.tid){BU=Bz;return false;}});if(Be){Bn.push(Bh.getAddDZUnitAction(BS,Bb,BU?BU.uidx+1:0));}else{if(BU){Array.prototype.push.apply(Bn,Bj.getRemoveDropZoneUnitActions(BS,BU));Bn.push(Bh.getAddDZUnitAction(BS,Bb,BU.uidx));}}}else{if(Bf.isPie){var Bs=B.SliceBy,BR=false;Bb.did=Bu.did;Bb.t=Bu.t;if(Bv.hasColorBy()){var BT=Bh.getZoneModelByZoneId(BZ);(BT&&BT.items||[]).forEach(function(Bz){if(Bh.isAttribute(Bz)){Array.prototype.push.apply(Bn,Bh.getRemoveDropZoneUnitActions(BT,Bz));BR=true;}});if(BR){Bn.push(Bh.getAddDZUnitAction(k.copy({id:BZ},k.copy(BS,{})),Bb));}}c.forEach([By,Bl,Bg,Bi],function(B0){var Bz=Bh.getZoneModelByZoneId(B0);if(Bz&&Bz.items&&Bz.items.length>0){if(B0===By){Bz.items.forEach(function(B1){if(B1.zone===Bo){if(Bh.isAttribute(B1)){Bs=B1.zone;}}else{if(B1.zone===Bk){if(Bs!==Bo&&Bs!==Ba){Bs=B1.zone;}}}});}else{if(B0===Bl){Bz.items.forEach(function(B1){if(B1.zone===Ba){if(Bh.isAttribute(B1)){if(Bs!==Bo){Bs=B1.zone;}}}else{if(B1.zone===Bp){if(Bs!==Bo&&Bs!==Ba&&Bs!==Bk){Bs=B1.zone;}}}});}else{Bs=B0;}}}});Bn.push(Bh.getAddDZUnitAction(k.copy({id:Bs},k.copy(BS,{})),Bb));}else{if(Br===W.BUBBLE||Br===W.SCATTER){BS.id=Bg;Bb.did=Bu.did;Bb.t=Bu.t;BW=Bj.getItemCountInZone(BS.id);Bn.push(Bh.getAddDZUnitAction(BS,Bb,BW));}else{if(Bf.isABL||Br===W.GRID){if(Bf.isPie){Bb.did=Bu.did;Bb.t=Bu.t;Bn.push(Bh.getAddDZUnitAction(k.copy({id:BZ},k.copy(BS,{})),Bb));Bn.push(Bh.getAddDZUnitAction(k.copy({id:Bi},k.copy(BS,{})),Bb));}else{if(Br===W.GRID||Bf.dirc===mstrmojo.gm.EnumABLDirection.VERTICAL){c.forEach(Bh.moveAttributesToZone(Bo,Bk),function(Bz){Bn.push(Bz);});BS.id=Bo;Bb.did=Bu.did;Bb.t=Bu.t;Bn.push(Bh.getAddDZUnitAction(BS,Bb,0));}else{c.forEach(Bh.moveAttributesToZone(Ba,Bp),function(Bz){Bn.push(Bz);});BS.id=Ba;Bb.did=Bu.did;Bb.t=Bu.t;Bn.push(Bh.getAddDZUnitAction(BS,Bb,0));}}}}}}Bc.add(Bd,BL(Bx,BY));return Bc;},updateAfterKeepOnlyAndShow:function b(BZ,BS){var BX=this,BV=BX.model,BT=BX.getTemplateUpdateForKeepOnlyAndShow(BZ,BS);var BR=BX.getContextMenuSelections(),BW=BV.getSelectorDataFromTemplateLimit(BX.model.data.tpl).concat({keepOnly:true,data:BR}),BU=AJ.call(BX),Ba=BV.getKeepOnlyActionsForAssociatedNodes(BW,BU);if(BR&&BR.length>0){BT.add(Ba.actions,Ba.callback);}Az(BX).execute({execute:function BY(){this.submitUpdate(BT);},urInfo:{callback:BT.callback}});},drillGM:function As(BZ,BS){var BX=this,BV=BX.model,BT=BX.getTemplateUpdateForKeepOnlyAndShow(BZ,BS);var BR=BX.getContextMenuSelections(),BW=BV.getSelectorDataFromTemplateLimit(BX.model.data.tpl).concat({keepOnly:true,data:BR}),BU=AJ.call(BX),Ba=BV.getKeepOnlyActionsForAssociatedNodes(BW,BU);if(BR&&BR.length>0){BT.add(Ba.actions,Ba.callback);}Az(BX).execute({execute:function BY(){this.submitUpdate(BT);},urInfo:{callback:BT.callback}});},isClearAllDisabled:function BC(){var BR=this.findSelectorControl();if(!!BR&&!BR.showall){return true;}return false;},execFormatHandler:function(){var BR=this.interactor;if(BR){BR.formatHandler(BR.selectedTargets.length?BR.selectedTargets:BR.selectedShapes);}},onNDECreated:function(BS){var BU=BS[0],BT=this.model.data.gts.row.concat(this.model.data.gts.col),BR;this.clearSelections();c.forEach(BT,function(BV){if((BV.t===47||BV.otp===47)&&BV.ost===12033&&BV.id===BU.unitId){c.forEach(BV.es,function(BW){if(BW.n===BU.n&&BW.id&&BW.id.indexOf(BU.id)>-1){BR=BW;}if(BR){return false;}});if(BR){return false;}}});if(BR){this.addAttributeSelection(BU.unitId,BR.id,BR.n);this.interactor.doHighlight(AB.vi.ui.rw.SelectionType.ATTS,k.clone(this.getSelectionHash()));}},checkCustomScaleNotificationForTrendLine:function(BR){if(this.checkCustomScale(BR)){this.trendLineNotifications.push(mstrmojo.desc(14443,"The trend line might not be displayed, as a custom scale has been applied to this metric."));}},checkCustomScaleNotificationForReferenceLine:function(BR){if(this.checkCustomScale(BR)){this.referenceLineNotifications.push(mstrmojo.desc(14444,"The reference line might not be displayed, as a custom scale has been applied to this metric."));}},clearAllSelectionsAndHighlight:function p(BS){var BR=BS.getTarget();if(BR){BR.setAttribute("type",G.GM_SVG_CHART);this.shouldNotTriggerClick=false;this.onclick(BS);BR.setAttribute("type","");}},requirePreload:true,getFonts:function(){var BT=this,BR=[],BS={};["dlFntFml","rfLnFntFml","lgdFntFml","xAxTtFntFml","xAxLbFntFml","yAxTtFntFml","yAxLbFntFml","allTxtFntFml","rwHdrTxtFntFml","colHdrTxtFntFml","rwVlTxtFntFml","colVlTxtFntFml","ttlFntFml"].forEach(function(BX){var BU=BT.getWidgetPropertyValue(BX);BU=typeof BU==="object"?BU[BX]:BU;var BW={name:BU,isItalic:false,isBold:false};var BV=BW.fontFamily+":"+BW.isItalic+":"+BW.isBold;if(!BS[BV]){BS[BV]=true;BR.push(BW);}});return BR;}});}());